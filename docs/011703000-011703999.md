# StackOverflow 问答 11703000-11703999

# linux - 在 Linux 上查找 Win exe 所需的 DLL（与 mingw 交叉编译）？

> ID：11703000
> 
> 赞同：16
> 
> 时间：2012-07-28T17:03:56.250
> 
> 标签：linux, dependencies, mingw, cross-compiling

我在 Linux 上使用 MinGW 交叉编译到 Windows。让这项工作变得轻而易举。不过，用所需的 DLL 打包它并不是那么简单。目前的解决方案是在 Windows 上运行可执行文件并复制 DLL 直到它实际运行。

是否有适用于 Linux 的工具列出我的 Windows .exe 所需的 DLL？（类似于`ldd`DependencyWalker 的组合。）

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2015-10-16T15:28:47.363

截至 2015 年底，没有工具链实用程序支持列出 Windows 二进制文件的动态依赖项（例如 ldd 或 otool）。

从我的测试中，通常可以看到完整的依赖项列表，例如：

```
strings MY.EXE | grep -i '\.dll$' 
```

Hackish，但它一直对我有用。

举个完整的例子，[试试](https://gist.github.com/h0tw1r3/51084def72c9765a5d12)我在 linux 上的交叉环境中使用的这个脚本。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2019-11-02T13:27:38.483

检查您的实用程序是否支持带有`objdump --help`. 如果没有，请为 MinGW 安装交叉编译器工具集（如[https://packages.debian.org/sid/mingw-w64](https://packages.debian.org/sid/mingw-w64)）。

比看：

```
objdump --private-headers $EXE 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2021-04-01T22:51:35.653

```
$ objdump -p program.exe | grep "DLL Name:"
        DLL Name: KERNEL32.dll
        DLL Name: msvcrt.dll 
```

FWIW 可以使用`objdump`with `-p`(or `-x`) 选项。这比筛选“.dll”字符串要好得多，因为它很可能会产生很多误报。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2019-08-24T23:07:20.210

```
 #!/bin/sh

    notfounddlls='KERNEL32.dll'
    dllbase=/usr/x86_64-w64-mingw32

    nc=1
    while [ $nc -gt 0 ];
    do
       nc=0
       for f in *.exe *.dll
       do
          for dep in $(strings $f | grep -i '\.dll$')
          do
             if [ ! -e $dep ]; then
                echo $notfounddlls | grep -iw $dep > /dev/null
                if [ $? -ne 0 ]; then
                   dllloc=$(find $dllbase -iname $dep)
                   if [ ! -z $dllloc ]; then
                      cp $dllloc .
                      echo "Copying "$(basename $dllloc)
              nc=$(($nc + 1))
           else
              notfounddlls="$notfounddlls $dep"
           fi
        fi
             fi
          done
       done
    done
    echo "System DLLS: "$notfounddlls 
```

# cocoa - OSX 10.8：eventkit.h 在哪里？

> ID：11703006
> 
> 赞同：0
> 
> 时间：2012-07-28T17:04:52.123
> 
> 标签：cocoa, eventkit, osx-mountain-lion

我是唯一的，还是其他人在做的时候也有错误

```
#import <EventKit/EventKit.h> 
```

由于某种原因，即使 XCode 在输入几个字母后向我建议，也找不到此文件（10.8，XCode 4.4）！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-28T17:48:56.787

我在一个带有 Xcode 4.4 的新项目中尝试了这个。它工作得很好。

您的项目是否已固定到 10.7 SDK？检查您的**Base SDK**设置。它应该设置为**最新的 OS X (OS X 10.8)**。

这通常在项目中设置，但您也可能在目标设置中覆盖它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-02T11:20:24.550

在 XCode 4.4 之前，我曾经只是将一个框架拖到右侧导航器的框架部分。这很有效，而且很直观。出于某种原因，它不适用于 EventKit 框架（甚至可能所有其他框架）。该框架被识别，但*破坏了`#include`*. 如果使用[Xcode 4 中添加框架中](https://stackoverflow.com/questions/6334966/adding-framework-in-xcode-4)的方法完成，则可以正常工作。

# javascript - Meteor 中的后台任务

> ID：11703010
> 
> 赞同：59
> 
> 时间：2012-07-28T17:05:23.330
> 
> 标签：javascript, meteor, npm

我想知道，有没有办法实现背景任务，也许是工人池。你能告诉我方向吗，我正在考虑为此写包？

* * *

## 回答 #1

> 赞同：108
> 
> 时间：2014-01-25T14:45:05.433

## 2019 年更新

在考虑为任何东西编写一个包之前，首先看看是否有现有的包可以满足你的需要。在 Meteor 世界中，这意味着在 Atmosphere 上查找“工作/队列/任务/工人管理/调度”包，然后在 npm 上查找相同的搜索词。您还需要更准确地定义您的要求：

*   你想要持久性，还是内存解决方案有效？
*   您希望能够将作业分配到不同的机器上吗？

## 流星专用

*   [job-collection](https://github.com/vsivsi/meteor-job-collection/) - 可靠（我在 2014 年在初创公司的生产中使用它），但目前处于维护模式。允许您安排在任何地方（服务器、客户端）运行的持久作业。
*   [SteveJobs - 由几个](https://github.com/msavin/stevejobs)[强大的 Meteor 工具](http://www.maxsavin.com/)的作者 Max Savin 积极维护
*   [littledata:synced-cron](https://github.com/percolatestudio/meteor-synced-cron/) - “Meteor 的简单 cron 系统。它支持在多个进程之间同步作业。”

*废弃的包裹：*

*   [artwells:queue](https://atmospherejs.com/artwells/queue) - 优先级、调度、日志记录、重新排队。由 MongoDB 支持的队列。最后一次[代码提交](https://github.com/artwells/meteor-queue/commits/master)：2015 年 10 月。
*   超级基本的 cron 包：[easycron](https://atmospherejs.com/chfritz/easycron)。最后更新：2015 年 12 月。
*   [差异：工人](https://atmospherejs.com/differential/workers)- 产生无头工人流星进程来处理异步作业。最后一次[代码提交](https://github.com/Differential/meteor-workers/commits/master)：2015 年 1 月
*   [cron](https://atmospherejs.com/mrt/cron)（[自 2015 年起](https://github.com/alexsuslov/Meteor.cron)）
*   [PowerQueue -](https://github.com/CollectionFS/Meteor-power-queue)[自 2014 年以来](https://github.com/CollectionFS/Meteor-power-queue/commits/master)被放弃。排队异步任务，限制资源使用，重试失败。支持子队列。[没有调度](https://github.com/CollectionFS/Meteor-power-queue/issues/15)。没有测试，但[漂亮的演示](http://power-queue-test.meteor.com/)。[由于使用递归调用](https://github.com/CollectionFS/Meteor-power-queue/issues/31)，不适合长时间运行。

## Npm 包

Meteor 已经能够直接使用 npm 包好几年了，所以这个问题相当于在 NPM 上寻找[job/worker/queue 管理包。](https://github.com/sindresorhus/awesome-nodejs#job-queues)如果你不关心持久性：

*   [Async](https://caolan.github.io/async) “提供了大约 70 个函数，其中包括通常的‘功能性’嫌疑人（`map`, `reduce`, `filter`, `each`...）以及一些常见的异步控制流模式（`parallel`, `series`, `waterfall`...）”
*   [d3-queue](https://github.com/d3/d3-queue) - 极简主义，由 D3 作者 Mike Bostock 编写

如果您确实需要持久性，因为 Meteor 已经使用 MongoDB，使用具有持久性到 MongoDb 的作业调度包可能是有利的。最强大和最受欢迎的似乎是[Agenda](https://github.com/agenda/agenda)，但不幸的是它已经几个月没有维护了，而且它有大量积压的[问题](https://github.com/agenda/agenda/issues)。

如果你愿意为你的项目添加一个由[redis](http://redis.io/)支持的依赖，还有更多的选择：

*   [Bull](https://www.npmjs.com/package/bull#feature-comparison) - 功能最全的 Node 作业队列解决方案，由 Redis 提供支持
*   [蜜蜂](https://github.com/bee-queue/bee-queue)- 简单、快速、健壮。不受[Bull 展示的内存泄漏的影响](https://github.com/OptimalBits/bull/issues/1110#issuecomment-436473121)
*   [Kue](https://www.npmjs.com/package/kue) - Node 的优先级作业队列

和 MongoDB 一样，Redis 也可以提供高可用性（通过 Redis Sentinel），如果你想在多个工作机器之间分配作业，你可以[将它们都指向同一个 Redis 服务器](https://github.com/OptimalBits/bull/issues/873#issuecomment-437445002)。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-07-17T21:10:21.143

有一个基于 Cron 作业的包，可用于在特定时间间隔或日期安排任务。这是包：[https ://atmosphere.meteor.com/package/cron](https://atmosphere.meteor.com/package/cron)

如果您碰巧查看了该软件包的来源，您会注意到它们只是在使用：

`Meteor.setInterval( ... , delay );`

因此，如果您将任务保存在数据库中，然后在启动期间将它们加载到间隔中，那么您可能会走上正确的轨道。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2017-10-27T12:14:18.783

如果您正在寻找特定于 Meteor 的东西，我很高兴分享一个名为 Steve Jobs 的新软件包。它使运行后台作业就像调用方法一样简单。

它具有您期望的所有标准功能，例如只运行一次作业、重试失败的作业等等。您可以在 GitHub 上了解更多信息：

[http://github.com/msavin/stevejobs](http://github.com/msavin/stevejobs)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-29T07:38:32.620

我猜他们的路线图上有适当的支持，但与此同时，我设法通过`setInterval`. 请参阅[cron-tick](https://atmosphere.meteor.com/package/cron-tick)包。

# ajax - 如何使用ajax 发布到instagram？请帮帮我

> ID：11703011
> 
> 赞同：1
> 
> 时间：2012-07-28T17:05:28.637
> 
> 标签：ajax, jquery, instagram

我有这个代码，但它不工作。它对我说 ajax 帖子是成功的，但是当我查看 make refresh 我发现它不喜欢。

```
<?
if ($data->user_has_liked == false) 
{ 
?>

<a href="#" id="<?=$data->id;?>" class="like"><span class="<?=$data->id;?>">Like</span></a>
<? } else { echo 'Liked'; } ?>

<script type="text/javascript">
       $('a.like').click(function() {
            var mediaId = $(this).attr('id');
            $.ajax({
                url: "https://api.instagram.com/v1/media/" + mediaId + "/likes?callback=?",
                dataType: "jsonp",
                data: {
                    access_token: '<?=$access_token;?>',
                    _method: 'POST'
                },
                type: "POST",
                success: function(data, textStatus, jqXHR) {
                  $("."+mediaId+"").text('Liked');
                },
                error: function(jqXHR, textStatus, errorThrown) {
                     $("."+mediaId+"").text('Error!<br/>' + textStatus + ' - ' + errorThrown);
               }
             });
        });
</script> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-10-01T00:13:03.950

我正在构建类似的东西，最近遇到了这个问题。

即使您的请求是作为类型发送的：POST 请求本身实际上是作为 GET 发送的。这会导致您的请求成功返回而不喜欢任何内容。相反，它将返回该媒体 ID 的所有数据。

如果您将数据类型更改为 JSON 而不是 JSONP，您的请求应该如您所愿；但是，它可能需要一个需要 SSL 的 HTTPS 连接。

# html - 如何为 CSS 等内容指定相对路径？

> ID：11703012
> 
> 赞同：0
> 
> 时间：2012-07-28T17:05:38.957
> 
> 标签：html, css

当我链接到任何文件时，我必须指定如下所示的绝对路径

```
<link rel="stylesheet" type="text/css" 
      href="F:/XmppOld/XAMPP2/htdocs/MAIN_SITE_LAYOUT/css/stylemainpage.css" /> 
```

我想缩小到

```
<link rel="stylesheet" type="text/css" href="/css/stylemainpage.css" /> 
```

我不知道该怎么做。我尝试放置`stylemainpage.css`在正在查看的页面内，但它不起作用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-28T17:06:55.510

尝试使用`<link rel="stylesheet" type="text/css" href="css/stylemainpage.css"/>`（之前没有前导斜杠`css`）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-28T17:09:07.930

路径取决于您放置 HTML 文件的位置

```
HTML
  index.html
CSS
  style.css 
```

您的 HTML 文件中的 CSS 路径将是 -`<link href="../CSS/style.css" rel="stylesheet"/>`

编辑：在你的情况下，路径应该是 -

```
<link href="../css/stylemainpage.css" rel="stylesheet" type="text/css" /> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-28T17:11:08.210

将 CSS 文件和 HTML pgae 保存在同一个文件夹中，然后只包含 CSS 文件名。如果要将 CSS 文件保存在同一服务器根目录下的其他文件夹中，并且仍想使用相对路径名，请使用`..`和`/`. 用于`..`上一级和`/`下一级。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-28T17:14:22.170

```
<link rel="stylesheet" type="text/css" href="css/stylemainpage.css"/> 
```

把你`css`放进去`css folder`

# hibernate - Hibernate 4——配置C3P0

> ID：11703017
> 
> 赞同：5
> 
> 时间：2012-07-28T17:06:19.317
> 
> 标签：hibernate, c3p0

除非我真的很沮丧，否则我不会发布这个。我正在尝试在一个非常简单的应用程序中使用 Hibernate 4.1.1 配置 C3P0，但我得到了一个找不到类的异常。我在我的类路径中包含了 C3P0 特定的 jar 文件。hibernate-c3p0-3.5.2-Final.jar

休眠.属性：

```
hibernate.connection.provider_class=org.hibernate.service.jdbc.connections.internal.C3P0ConnectionProvider
hibernate.c3p0.acquire_increment=1
hibernate.c3p0.idle_test_period=180
hibernate.c3p0.max_size=60
hibernate.c3p0.max_statements=0
hibernate.c3p0.min_size=10 
```

堆栈跟踪：

```
28 Jul, 2012 9:23:08 PM org.hibernate.service.jdbc.connections.internal.ConnectionProviderInitiator instantiateExplicitConnectionProvider
INFO: HHH000130: Instantiating explicit connection provider: org.hibernate.service.jdbc.connections.internal.C3P0ConnectionProvider
Exception in thread "main" org.hibernate.service.spi.ServiceException: Unable to create requested service [org.hibernate.service.jdbc.connections.spi.ConnectionProvider]
    at org.hibernate.service.internal.AbstractServiceRegistryImpl.createService(AbstractServiceRegistryImpl.java:186)
    at org.hibernate.service.internal.AbstractServiceRegistryImpl.initializeService(AbstractServiceRegistryImpl.java:150)
    at org.hibernate.service.internal.AbstractServiceRegistryImpl.getService(AbstractServiceRegistryImpl.java:131)
    at org.hibernate.engine.jdbc.internal.JdbcServicesImpl.buildJdbcConnectionAccess(JdbcServicesImpl.java:223)
    at org.hibernate.engine.jdbc.internal.JdbcServicesImpl.configure(JdbcServicesImpl.java:89)
    at org.hibernate.service.internal.StandardServiceRegistryImpl.configureService(StandardServiceRegistryImpl.java:75)
    at org.hibernate.service.internal.AbstractServiceRegistryImpl.initializeService(AbstractServiceRegistryImpl.java:159)
    at org.hibernate.service.internal.AbstractServiceRegistryImpl.getService(AbstractServiceRegistryImpl.java:131)
    at org.hibernate.cfg.SettingsFactory.buildSettings(SettingsFactory.java:71)
    at org.hibernate.cfg.Configuration.buildSettingsInternal(Configuration.java:2277)
    at org.hibernate.cfg.Configuration.buildSettings(Configuration.java:2273)
    at org.hibernate.cfg.Configuration.buildSessionFactory(Configuration.java:1742)
    at org.hibernate.cfg.Configuration.buildSessionFactory(Configuration.java:1782)
    at eko.test.hibernate.Hibernate4Test.main(Hibernate4Test.java:17)
Caused by: org.hibernate.HibernateException: Could not instantiate connection provider [org.hibernate.service.jdbc.connections.internal.C3P0ConnectionProvider]
    at org.hibernate.service.jdbc.connections.internal.ConnectionProviderInitiator.instantiateExplicitConnectionProvider(ConnectionProviderInitiator.java:192)
    at org.hibernate.service.jdbc.connections.internal.ConnectionProviderInitiator.initiateService(ConnectionProviderInitiator.java:114)
    at org.hibernate.service.jdbc.connections.internal.ConnectionProviderInitiator.initiateService(ConnectionProviderInitiator.java:54)
    at org.hibernate.service.internal.StandardServiceRegistryImpl.initiateService(StandardServiceRegistryImpl.java:69)
    at org.hibernate.service.internal.AbstractServiceRegistryImpl.createService(AbstractServiceRegistryImpl.java:176)
    ... 13 more
Caused by: org.hibernate.service.classloading.spi.ClassLoadingException: Unable to load class [org.hibernate.service.jdbc.connections.internal.C3P0ConnectionProvider]
    at org.hibernate.service.classloading.internal.ClassLoaderServiceImpl.classForName(ClassLoaderServiceImpl.java:141)
    at org.hibernate.service.jdbc.connections.internal.ConnectionProviderInitiator.instantiateExplicitConnectionProvider(ConnectionProviderInitiator.java:189)
    ... 17 more
Caused by: java.lang.ClassNotFoundException: Could not load requested class : org.hibernate.service.jdbc.connections.internal.C3P0ConnectionProvider
    at org.hibernate.service.classloading.internal.ClassLoaderServiceImpl$1.findClass(ClassLoaderServiceImpl.java:99)
    at java.lang.ClassLoader.loadClass(ClassLoader.java:321)
    at java.lang.ClassLoader.loadClass(ClassLoader.java:266)
    at java.lang.Class.forName0(Native Method)
    at java.lang.Class.forName(Class.java:264)
    at org.hibernate.service.classloading.internal.ClassLoaderServiceImpl.classForName(ClassLoaderServiceImpl.java:138)
    ... 18 more 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-28T17:14:58.393

您包含的 jar 文件的版本为 3.5.2-Final，并且不包含您配置的类。为什么不使用版本为 4.1.1 的版本（因为这是您使用的 Hibernate 版本），并且里面有必要的类：http: [//grepcode.com/snapshot/repository.jboss。 org/nexus/content/repositories/releases/org.hibernate/hibernate-c3p0/4.1.1.Final/](http://grepcode.com/snapshot/repository.jboss.org/nexus/content/repositories/releases/org.hibernate/hibernate-c3p0/4.1.1.Final/)

# php - 如何为用户创建“提要”（数据库设计）？

> ID：11703019
> 
> 赞同：1
> 
> 时间：2012-07-28T17:06:53.743
> 
> 标签：php, mysql, database, mysqli, feed

因此，在我的网站上，用户可以执行不同的任务，例如评论、加入群组、发送消息、提供反馈等。现在我想在用户个人资料页面上创建一个提要，告诉每个人他们一直在做什么，有点像 Facebook，但简单得多。

例子：

`John Doe sent a message to Bob Smith`

`Bob Smith gave some feedback to John Doe`

`Bob Smith joined John Doe's group`

为了做这样的事情，我应该从适当的表中提取所有信息，还是每次执行我想要包含在提要中的任务时都在“提要”表中插入一行。

基本上，我想通过个人资料页面上的活动选项卡来实现他们在 stackoverflow 上所做的事情。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-28T17:28:28.623

我认为如果您确实使用用户的活动创建了一个额外的表，那会更容易。检查所有这些表，您可能甚至不需要所有数据，然后将它们格式化为提要，这将对您的服务器造成影响。还要考虑未来（例如，如果你有 100 个这样的桌子怎么办）。

使用额外的表可以让您只查询提要表并使用此信息。无需从正确的表中提取，因为表中的数据可能没有直接用处，需要进行一些计算。

您可能会考虑的另一点是未来对提要的更改。假设您想在提要上显示更多信息，但相应的表格没有该信息，您将不得不更改所有这些表格（更不用说使用它们来添加信息的脚本/页面）。但是使用一个提要表，您可以再添加一个元素并更改提要创建方法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-28T17:19:41.237

userid_did(int)|userid_to(int)|operation(int)|date(varchar)|id(int)

我猜？

# clojure - Clojure 中的生产者消费者队列

> ID：11703024
> 
> 赞同：3
> 
> 时间：2012-07-28T17:07:12.487
> 
> 标签：clojure

我想在 clojure 中构建一个生产者-消费者程序。要求是消费者可以在生产者将消息放入队列时从队列中拖动项目，如果使用 java 我将使用`ConcurrentLinkedQueue`，但我不太确定如何使用不可变集合在 clojure 中执行此操作，请帮助。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-28T22:05:20.127

如果您只想要 1 个消费者，只需使用代理即可。如果没有看到[Clojure Producer Consumer](https://stackoverflow.com/questions/8925371/clojure-producer-consumer)或[Producer consumer with 资格](https://stackoverflow.com/questions/2760017/producer-consumer-with-qualifications)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-28T17:27:33.923

我认为您可以在原子内部使用 Clojure 的[不可变队列](http://clojuredocs.org/clojure_core/1.2.0/clojure.core/seque)，这将使您可以原子地访问队列。

# javascript - 带有本地客户端的 Socket.io。Origin null 和 Access-Control-Allow-Origin

> ID：11703026
> 
> 赞同：4
> 
> 时间：2012-07-28T17:07:46.077
> 
> 标签：javascript, sockets, node.js, websocket, socket.io

我正在尝试使用本地客户端测试一个简单的 socket.io 示例。这是我的代码：

服务器：

```
var sio = require('socket.io');
var io = sio.listen(8077, {log: false});

io.sockets.on('connection', function (socket) {
    console.log('connection detected');
    socket.on('hello', function(data){
        console.log('hello received: ' + data);
    });
}); 
```

客户：

```
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
  <head>
    <script src="socket.io-client/dist/socket.io.js" type="text/javascript"></script>
  </head>
  <body>
    <script type="text/javascript">
      var socket = io.connect('http://localhost:8077');
      if(socket != undefined){
          socket.emit('hello', 'this is a test');
      }
    </script>
  </body>
</html> 
```

如果我把我的客户端放在远程服务器上，它运行得很好，但是如果我尝试从本地运行我的客户端，我的浏览器会给我以下错误：

```
XMLHttpRequest cannot load http://localhost:8077/socket.io/1/?t=1343494806858.
Origin null is not allowed by Access-Control-Allow-Origin 
```

我知道在 http 服务器中有一个 http 标头可以解决这个问题，但我不知道在套接字上下文中是否有类似的选项。我需要一个本地客户。我不想从额外的 http nodejs 服务器提供客户端代码。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-28T17:31:31.787

您是否尝试过设置 server origins 参数（它设置了您提到的标头）？：

```
var sio = require('socket.io');
var io = sio.listen(8077, {log: false, origins: '*:*'}); 
```

现在您也没有在本地访问该服务器，您是否确保更新该行：

```
var socket = io.connect('http://localhost:8077'); 
```

包括远程服务器的 ip（或域，如果你有的话）：

```
var socket = io.connect('http://XX.XX.XX.XX:8077'); 
```

您能在控制台中看到哪一行返回错误（您将 chrome/ff 与 firebug 一起使用？）。在 if 语句中，socket 变量可能永远不会被 undefined。使用连接的推荐方法是通过将回调附加到连接事件来等待它准备好，例如：

```
socket.on('connect', function () {  // <-instead of the if
    socket.emit('hello', 'this is a test');
} 
```

# ruby-on-rails - 为什么 bundler 不在 OS X 10.8 上安装 json 1.7.4 gem？

> ID：11703030
> 
> 赞同：8
> 
> 时间：2012-07-28T17:08:03.830
> 
> 标签：ruby-on-rails, json, gem, makefile, bundler

我在带有 XCode 4.4、Ruby 1.9.3 和 Rails 3.2 的 OS X 10.8 上。

当我从 git 克隆我的 rails 项目并运行时：

```
bundle install 
```

我得到：

安装 json (1.7.4) Errno::EPERM: Operation not allowed - /Users/myuser/.rvm/gems/ruby-1.9.3-p0/gems/json-1.7.4/.gitignore 安装 json 时出错(1.7.4)，并且 Bundler 无法继续。`gem install json -v '1.7.4'`在捆绑之前确保成功。

然后我尝试：

```
gem install json -v '1.7.4' 
```

并得到：

错误：执行 gem 时 ... (Errno::EPERM) 不允许操作 - /Users/scalessec/.rvm/gems/ruby-1.9.3-p0/gems/json-1.7.4/.gitignore

好的。权限问题，对吧？咱们试试吧：

```
sudo gem install json -v '1.7.4' 
```

不去。这是我得到的：

构建原生扩展。这可能需要一段时间... 错误：安装 json 时出错：错误：无法构建 gem 原生扩展。

/Users/myuser/.rvm/rubies/ruby-1.9.3-p0/bin/ruby extconf.rb 创建 Makefile

make 编译 generator.c make: /usr/bin/gcc-4.2: Permission denied make: *** [generator.o] Error 1

有没有搞错？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-07-29T00:16:00.517

我不确定，但我在 2 天前升级到了 OS X 10.8（从 Lion，我的 Rails 配置运行良好）。我遇到了同样的 JSON 1.7.4 问题。

最终，我注意到 Xcode 的命令行工具没有安装（但它们在 OS X 10.7 上！），从而解决了这个问题。**我刚刚在 Xcode 中重新安装了 CLI 工具**，JSON 1.7.4 问题就消失了。

另外，以防万一，查看本指南：[https ://thoughtbot.com/blog/the-hitchhikers-guide-to-riding-a-mountain-lion](https://thoughtbot.com/blog/the-hitchhikers-guide-to-riding-a-mountain-lion)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-31T01:23:55.760

感谢 aabulkhairov 的解决方案。

这是针对任何有相同症状但**仍在运行 OS X Lion的人**

我能够从 App Store 将 Xcode 更新到 4.4，然后使用 XCode > Preferences > Downloads**安装 CLI 工具**；这解决了这个问题。新的 XCode 与 Lion 兼容，我的 Rails 应用程序按预期运行。

我想我之所以进入这种状态，是因为从 App Store 安装的以前版本的 XCode 4.2.1 取代了我从 developer.apple.com 下载的更旧版本——这可能是我丢失 CLI 工具的地方。从那时起，我显然再也不需要编译带有本机扩展的 gem。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-29T19:50:08.017

重新安装 CLI 工具对我有用。

在此处使用最佳答案： [如何在 Mac OS X 10.8 / Xcode 4.4 上使用/安装 gcc](https://stackoverflow.com/questions/9353444/how-to-use-install-gcc-on-mac-os-x-10-8-xcode-4-4)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-07-31T12:31:15.277

对于 OS X 使用：
`sudo gem install json --pre`对于最新版本

检查您使用的 Ruby 版本。这可以很容易地安装`ruby 1.9.3`。将 ruby​​ 版本更改为 1.9.3 并执行

`sudo gem install json -v '1.7.4'`

# python - 打印在 python 中使用 __getitem__ 作为列表的类

> ID：11703032
> 
> 赞同：0
> 
> 时间：2012-07-28T17:08:21.703
> 
> 标签：python, list, class, magic-methods

我有一个类应该作为差异列表（增量），从另一个列表计算。例如，如果我有一个位置列表，我可以使用我的类来动态创建一个位移列表。

为此，我使用`__getitem__`了以下方法：

```
class Deltas(object):
    def __init__(self, ref):
        self.ref = ref

    def __getitem__(self, index):
        if index == 0:
            return 0
        else:
            return self.ref[index] - self.ref[index-1]

samplelist = [1,2,3,5,7,9]

deltas = Deltas(samplelist) 
```

如果我打印单个元素，它可以正常工作，但如果我打印整个列表，它会给我：

```
> print deltas
<__main__.Deltas object at 0x7f7aa93e3b50> 
```

我想知道我必须实施什么其他方法才能得到这个：

```
> print deltas
[0, 1, 1, 2, 2, 2] 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-28T17:13:23.200

您需要实施`__repr__`. `print`在打印之前将其参数转换为字符串，然后使用`str`which 依次查找`__str__`然后`__repr__`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-28T19:52:28.127

例如，添加此方法将起作用：

```
def __repr__(self):
    return [x for x in self].__repr__() 
```

或者，或者：

```
def __repr__(self):
    strs = []
    for x in self:
        strs.append(str(x))
    return '[%s]' % ', '.join(strs) 
```

# android - 无效的地图 android maps api 指纹

> ID：11703035
> 
> 赞同：0
> 
> 时间：2012-07-28T17:08:36.007
> 
> 标签：android, google-maps

我按照获取地图调试密钥的说明进行操作，但收到一条错误消息，提示我输入的指纹无效。我在命令提示符下输入了以下内容：

```
C:\Users\Teererai>keytool -list -alias androiddebugkey -keystore C:\Users\Teerer
ai\.android\debug.keystore -storepass android -keypass android 
```

并得到以下输出：

androiddebugkey，2012 年 6 月 20 日，PrivateKeyEntry，证书指纹 (SHA1)：75:BD:38:52:6D:03:83:E6:34:F0:3C:88:72:6F:C3:E2:38:8A :C9:96

但是当我尝试将其复制并粘贴到注册站点时，我收到一条消息，指出我输入的指纹无效。是不是我做错了什么？请帮忙。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-28T17:22:34.500

为了使地图 api 工作，您需要 MD5 指纹而不是 SHA1。为了获得 MD5，您需要在命令中添加 -v 选项。请参阅[如何从 Java 的 keytool 获取 MD5 指纹，而不仅仅是 SHA-1？](https://stackoverflow.com/questions/6305938/how-can-i-get-the-md5-fingerprint-from-javas-keytool-not-only-sha-1)

# prolog - 如何在 Prolog 中添加多项式？

> ID：11703041
> 
> 赞同：2
> 
> 时间：2012-07-28T17:09:04.217
> 
> 标签：prolog, clpfd

我有以下任务：

> 编写一个将添加两个多项式的方法。即 0+2*x^3 和 0+1*x^3+2*x^4 将给出 0+3*x^3+2*x^4。

我还写了以下代码：

```
add_poly(+A1*x^B1+P1,+A2*x^B2+P2,+A3*x^B3+P3):-
    (
       B1=B2,
       B3 = B2,
       A3 is A1+A2,
       add_poly(P1,P2,P3)
    ;
       B1<B2,
       B3=B1,
       A3=A1,
       add_poly(P1,+A2*x^B2+P2,P3)
    ;
       B1>B2,
       B3=B2,
       A3=A2,
       add_poly(+A1*x^B1+P1,P2,P3)
    ).
add_poly(X+P1,Y+P2,Z+P3):-
    Z is X+Y,
    add_poly(P1,P2,P3). 
```

我的问题是我不知道如何停止。我想在一个参数为空时停止，而不是将第二个参数附加到第三个参数。但是我如何检查它们是否为空？谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-28T17:49:07.877

几点说明：

尽量避免`(;)/2`一开始就出现歧义。它们需要特殊的缩进才能阅读。它们使阅读单个规则变得更加复杂——想想`(=)/2`你必须编写和跟踪的所有额外目标。

* * *

然后，我不确定您可以对多项式做出什么假设。你能假设它们是以规范的形式写成的吗？

* * *

对于您的程序：考虑您的第一条规则的主要内容：

```
add_poly(+A1*x^B1+P1,+A2*x^B2+P2,+A3*x^B3+P3):- 
```

我将概括一些论点：

```
add_poly(+A1*x^B1+P1,_,_):- 
```

和一些子项：

```
 add_poly(+_+_,_,_):- 
```

这对应于：

```
add_poly(+(+(_),_),_,_) :- 
```

不确定你喜欢这个。

因此，此规则仅适用于以前缀`+`后跟中缀开头的术语`+`。至少您的示例数据不包含前缀`+`。

另外，请注意 -`+`运算符是*左关联*的。这意味着`1+2+3+4`关联到左侧：

```
?- write_canonical(1+2+3+4).
+(+(+(1,2),3),4) 
```

因此，如果您有一个术语`0+3*x^3+2*x^4`，那么您“看到”的第一件事就是`_+2*x^4`. 左边的术语嵌套得更深。

* * *

对于您的实际问题（如何停止） - 您必须明确测试最左边的子项是一个整数，使用`integer/1`- 或者可能是一个术语 (*)/2 （这取决于您的假设）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-28T20:21:04.577

我假设您所说的多项式在 1 个变量中并且具有整数指数。

这里有一个处理正规多项式形式的过程：多项式可以表示为因子的列表（总和），其中（整数）指数由位置隐式表示。

```
:- [library(clpfd)].

add_poly(P1, P2, Sum) :-
    normalize(P1, N1),
    normalize(P2, N2),
    append(N1, N2, Nt),
    aggregate_all(max(L), (member(M, Nt), length(M, L)), LMax),
    maplist(rpad(LMax), Nt, Nn),
    clpfd:transpose(Nn, Tn),
    maplist(sumlist, Tn, NSum),
    denormalize(NSum, Sum).

rpad(LMax, List, ListN) :-
    length(List, L),
    D is LMax - L,
    zeros(D, Z),
    append(List, Z, ListN).

% the hardest part is of course normalization: here a draft

normalize(Ts + T, [N|Ns]) :-
    normalize_fact(T, N),
    normalize(Ts, Ns).
normalize(T, [N]) :-
    normalize_fact(T, N).

% build a list with 0s left before position E
normalize_fact(T, Normal) :-
    fact_exp(T, F, E),
    zeros(E, Zeros),
    nth0(E, Normal, F, Zeros).

zeros(E, Zeros) :-
    length(Zeros, E),
    maplist(copy_term(0), Zeros).

fact_exp(F * x ^ E, F, E).
fact_exp(x ^ E, 1, E).
fact_exp(F * x, F, 1).
fact_exp(F, F, 0).

% TBD...
denormalize(NSum, NSum). 
```

测试：

```
?- add_poly(0+2*x^3, 0+1*x^3+2*x^4, P).
P = [0, 0, 0, 3, 2] 
```

答案仍然是正常形式，应该写 denormalize/2...

# c++ - VOID 是指“无”还是“什么”？

> ID：11703046
> 
> 赞同：6
> 
> 时间：2012-07-28T17:09:22.610
> 
> 标签：c++

VOID 是什么意思？是“无”还是“无”？

查字典的时候，答案是什么都没有。但有人说这意味着什么。我很困惑它是否与 null 相同或具有独特的含义。当我在谷歌上搜索它的含义时，我得到了空指针的结果以及更多我无法理解的东西，最后我是一个 class12 的女孩。

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-07-28T17:11:11.797

在 C++ 中，void 在不同的上下文中可能意味着不同的东西。例如，void指针表示可以指向任何对象的指针

```
int x = 0;
void *p = &x; // ok -- void pointers can point to any object. 
```

但是当 void 用作函数的返回类型时，这意味着该函数不返回任何内容。

```
void f()
{
  cerr << "Hello there\n";
  // No return, since the function has a void return type.
} 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-07-28T20:09:39.827

让我给你一些关于变量声明、函数和指针的**详细**解释`void`，因为你提到你是 12 年级。请允许我从变量声明开始，因为它更适合我的解释。

首先，当你声明一个变量时会发生什么？换句话说，当你说 时会发生什么`int x`？如您所知，所有变量都驻留在内存中。内存被分成块，每个块为 8 位宽。这些块被称为*字节*，是大多数计算机体系结构中最小的可寻址内存单元。每个字节都有一个数字，我们通常使用十六进制数字来表示每个字节的内存地址。例如，内存中的第一个位置是`0000 0000`只能保存 8 位的地址。第二个字节位于`0000 0001`。依此类推，直到到达地址的最后一个字节`FFFF FFFF`。

这里重要的是内存块内的位是 0 和 1。一个例子是`01101010`。我想说的是，0 和 1 既不是整数，也不是字符，也不是十进制值。它们本质上什么都不是，您将决定如何看待它们。如果您决定将它们视为整数，`01101010`则将被视为数字 106（十六进制的 6A，写为`0x6A`），而如果您决定将这些位视为字符，则这些位将被视为字母“j”。

回到我的问题。当你说的时候会发生什么`int x`？有很多事情发生：

1.  您告诉计算机您愿意将内存中的位视为整数值。
2.  您要求在内存中保留足够数量的字节以容纳`int`，那是多少？由于`int`通常是 32 位（可能或多或少取决于 CPU、操作系统等），因此您要求从内存中保留 32 位。那是多少字节？由于我们已经说过每个内存块是 8 位，那么您要求保留 4 个字节的内存，它们将是连续的（例如，您将保留地址`00AA F000`, `00AA F001`, `00AA F002`, `00AA F003`）。这意味着不同的变量类型将根据它们的大小在内存中保留不同数量的字节。所以 a`char`将只保留 1 个字节，因为它是 8 位，而 a`float`将保留 8 个字节，因为它需要 64 位，依此类推。**指针中不是这种情况，所以请注意！**

在我跳转到指针之前，我想以不同的方式重复这个想法：`type variable_name`like`int x`意味着您将内存的内容视为整数，并且您将保留 4 个字节。更改类型将更改位的处理方式。

现在指点。当你说的时候会发生什么`int *p`？它与普通变量完全不同。指针可以告诉你某物的位置（某物的内存地址）。根据上面的解释，每个内存地址都是这样的十六进制数：AA00 F001。所以内存地址是一个 8 位的十六进制数，这意味着它是一个 32 位的数字。因此，当您创建指针时，您是说要将位视为内存地址（不是整数，不是字符，不是十进制值等）。因此，所有指针变量都将在内存中保留相同数量的块，即 4 字节（32 位），因为任何内存地址都是 32 位。所以`int *p`和`char *q`两者都将在内存中保留 4 个字节，因为两者都将在它们内部保存一个 32 位宽的内存地址。

这里开始行动。从理论上讲，如果所有类型的指针都会在内存中保留相同数量的位，我们为什么不使用`char`指针来指向`int`变量（如`char *q; int x; q = &x;`）？理论上你可以做这个指针但是有一个问题。正如我之前所说，an`int`将占用内存中的 4 个字节，而 a`char`将只占用 1 个字节。这意味着如果一个`int`位于内存中的地址`AA00 FF00`并且您想在它旁边放置另一个，则新的将位于该地址上，`AA00 FF04`因为第一个`int`已经保留的 4 个字节（从`AA00 FF00`到`AA00 FF03`）和下一个可用的内存位置（地址）将在`AA00 FF04`这种情况下。还在我这儿？

所以指针声明意味着两件事：

1.  在内存中保留 32 位以将内存地址放入其中。
2.  每次我们说`p++`我们将在内存中跳转多个块，这些块等于指针类型的大小（以字节为单位），并且与您所指向的事物的类型无关。举个例子：`char c; int *p; p = &c;`now`p`是指向所在的内存地址，`c`不会`p++`指向下一个内存地址，而是指向距离初始位置4个字节的地址，因为一个int指针的一步大小是 4 个字节。

那么是什么`void`？`void`是表示“无”或“无类型”的东西。话虽如此，让我们检查变量和指针的 void：

你能`void x`像你说的那样说`int x`吗？不，你不能，因为在变量声明中你指定了如何处理一些位以及你需要多少位。当您说`void x`您没有指定如何处理这些位时，也没有说您需要多少位。

你能`void *p`像你说的那样说`int *p`吗？是的，你可以，因为你说你想要一个指针，并且知道它是一个指针，我们直接知道你想要内存中的 32 位，我们也知道你想把它们当作内存地址，所以这里没有歧义上一个案例。好的，当我们告诉`void`指针递增时会发生什么`p++`？这是问题所在。当指针类型已知时，内存中的跳转是已知的，但在这里它是未知的。解决办法是什么？稍后您需要转换`void`指针，这样您就可以知道每次递增时可以在内存中跳转多少块。好吧，如果最后我们会投到什么东西上，我们会得到什么好处呢？为什么我们不从一开始就直接在那个东西的类型中创建它呢？通常一个`void`指针被创建，您将每次使用它来指向不同的类型，而不仅仅是一种类型。如果在某个应用程序中你已经知道你总是会指向一个`int`例子，那么创建一个`void`指针没有任何好处，但是如果你知道你需要指向不同的类型，那么这里`void`指针就变得很方便了。当然，这不是初学者级别的话题。

好的，所以`void`没有任何意义，它与功能有什么关系？如您所知，函数的类型是函数返回内容的定义。因此，每次调用时，`int`函数都会返回一个。`int`以下是一些有效的示例：

```
int Function1();
//...
//somewhere in the middle of your program
int x, y;
x = Function1(); //valid
y = ( 100 - Function1() ) / 2; //valid
Function1(); //also valid but the return is lost since it wasn't stored or displayed 
```

当您说函数是类型`void`时，您是在说调用它时它不返回任何内容（这在 C++ 中有效）。以下是您可以做和不能做的事情：

```
void Function2();
//...
//somewhere in the middle of your program
int x, y;
x = Function2(); //NOT valid, Function2 will not return anything to be stored in x
y = 100 + Function2(); //Not valid, Function 2 will not return anything to be added to 100
Function2(); //valid, the function will be called, and will do some work, then you will continue execution after it terminates. 
```

我们是否从`void`函数中受益？是的，很多，并不是每个函数都会返回一些东西给我们。假设您要为具有记分牌的游戏编写程序。当一个新游戏开始时，你想将分数重置为 0。假设你有一个名为的函数`ResetScore()`来完成这项工作，在你调用它之后，resetting 没有任何有价值的东西可以返回给你，所以你可能会做这个函数`void ResetScore()`。如果您需要从该功能获得一些反馈，那么您可能会开始考虑另一种类型。

我希望这可以为您澄清事情。既然你说你是12年级，我又写了一个详细的答案。祝你好运！

**编辑：在下面的评论中回答您的问题：**

`void`在我们了解函数和非空函数之间的区别之前，我们需要回答一个问题。如果一个函数不是`void`，无论何时我们调用它，它都会返回一些东西，那么，谁来捕捉函数的返回呢？”

简单的。抓住回报的人就是打电话的人。例如，如果我们有一个函数`int F1()`，并且在你的程序中间的某个地方，那么你`x = F1();`就是`x`那个将捕获函数返回的人`F1()`。这个概念不适用于`void`函数，因为它们不返回任何内容，换句话说，由于 F2 不返回任何内容，因此`void F2()`某处`y = F2();`将无法工作，因此我们不能像使用 F1 一样使用它。

因此，主要规则是调用者是捕获函数返回的人。`void main()`在这种情况下，和 和有什么区别`int main()`？在 C++ 中 main() 函数必须有一个返回值，所以`void main()`是不允许的。但是对于其他函数，不同之处在于它们`void`不会向调用者返回任何内容，而它们会返回`int`。那么，谁调用该`main`函数？操作系统 (OS) 调用它。操作系统从`main`函数返回有什么好处？了解程序是否正常终止或异常终止是有好处的，因此在异常终止时，操作系统可以向您显示众所周知的“发送/不发送”报告消息（此处讨论 Microsoft Windows）。所以返回类型`main()`对您的程序或其输出没有影响，它只会影响它如何终止，因为函数的返回是函数中发生的最后一件事，而函数的返回`main()`是所有程序中的最后一件事（当你退出程序）。

我希望这能澄清你的问题。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-28T18:22:18.773

“空”的意思是“没有类型”。如果函数返回类型为“void”，则意味着它不返回任何类型的值。

然而，指向 void 的指针意味着它是一个没有特定类型的指针，这些指针通常必须转换为正确的类型。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-28T18:33:46.967

VOID 没有任何意义。在 C/C++ 中指向 void 类型的指针可用于指向任何类型的指针，其中一些应该进行类型转换，例如指向函数的指针。VOID 表示没有类型或没有参数列表。

# php - 我正在寻找与我在 ASP 中使用的 rs.MoveNext 等效的 PHP

> ID：11703047
> 
> 赞同：0
> 
> 时间：2012-07-28T17:09:46.600
> 
> 标签：php, asp-classic

我只使用 PHP 大约一个星期（尽管我已经使用 ASP 12 年了，但我绝不是专家）所以请多多包涵……我正在尝试将我的 Classic ASP 网站转换为php。到目前为止，我已经能够找到大多数问题的答案，但我被困在这个问题上。

**我正在寻找与我在 ASP 中使用的 .MoveNext 函数等效的 PHP。**

在示例中，我有一个包含大约 450 条记录的表，虽然我希望将它们全部显示，但我只希望每列有 100 条记录。它可能不是很好的代码，但它对我有用。

```
set rsSpecial = Server.CreateObject("ADODB.recordset")
'Grab all the Supporters Names and Website URLs Order by Name
rsSpecial.Open "SELECT sName, sURL FROM gktwspcf ORDER BY sName ASC", conn
    if not rsSpecial.EOF then
        sSpecialFriends = sSpecialFriends & "<table width=" & Chr(34) & "98%" & Chr(34) & ">" & vbCrLf
        Do
            i=0
            sSpecialFriends = sSpecialFriends & "<td valign=" & Chr(34) & "top" & Chr(34) & ">" & vbCrLf
            sSpecialFriends = sSpecialFriends & "<p>" & vbCrLf
            Do
                if rsSpecial("sURL") <> "" Then
                    sSpecialFriends = sSpecialFriends & "<a href='"& Replace(rsSpecial("sURL"), "&", "&amp;") & "' target=" & Chr(34) & "_blank" & Chr(34) & ">"
                    sSpecialFriends = sSpecialFriends & "" & Replace(rsSpecial("sName"), "&", "&amp;") & ""
                    sSpecialFriends = sSpecialFriends & "</a>"
                    sSpecialFriends = sSpecialFriends & "<br>" & vbCrLF
                        'Otherwise just list their name
                else
                    sSpecialFriends = sSpecialFriends & "" & Replace(rsSpecial("sName"), "&", "&amp;") & ""
                    sSpecialFriends = sSpecialFriends & "<br>" & vbCrLF
                end if
                i=i+1
                rsSpecial.MoveNext
            Loop Until i=100 or rsSpecial.EOF
            sSpecialFriends = sSpecialFriends & "</td>" & vbCrLf
        Loop Until rsSpecial.EOF
        sSpecialFriends = sSpecialFriends & "</table>" & vbCrLf
    end if
rsSpecial.Close
Set rsSpecial=Nothing 
```

我似乎找不到一个很好的例子来说明如何在 PHP 中重新创建一个嵌套循环，我可以在其中移动到下一条记录。这就是我目前所拥有的——它显示每条记录，100 次，100 列宽。 **我想我需要找到某个地方来插入与 MoveNext 等效的 PHP。**

```
$result = mysql_query ("SELECT sName, sURL FROM gktw_spcFriends ORDER BY sName ASC", $con) or die(mysql_error()); 
$sSpecialFriends = "";
if (mysql_num_rows($result))
$row = mysql_fetch_array($result);
    { 
    $sSpecialFriends = $sSpecialFriends."<table width=".Chr(34)."98%".Chr(34).">" ."\n";
        do
        {
            $i=0;
            $sSpecialFriends = $sSpecialFriends."<td valign=".Chr(34)."top".Chr(34).">" ."\n";
            $sSpecialFriends = $sSpecialFriends."<p>" ."\n";
                do
                {
                    //Check for URL
                    if ($row['sURL'] != "")
                    {                                               
                        $sSpecialFriends = $sSpecialFriends . "<a href='". str_replace("&", "&amp;", $row['sURL']) . "' target=" . Chr(34) . "_blank" . Chr(34) . ">"."\n";
                        $sSpecialFriends = $sSpecialFriends . "" . str_replace("&", "&amp;", $row['sName']) . "" ."\n";
                        $sSpecialFriends = $sSpecialFriends . "</a>" ."\n";
                        $sSpecialFriends = $sSpecialFriends . "<br>" ."\n";
                    }
                    //Otherwise just list their name
                    else
                    {
                        $sSpecialFriends = $sSpecialFriends . "" . str_replace("&", "&amp;", $row['sName']) . "" ."\n";
                        $sSpecialFriends = $sSpecialFriends . "<br>" ."\n";
                    }
                    $i=$i+1;
                }
                while ($i<100);
            $sSpecialFriends = $sSpecialFriends . "</td>" ."\n";
        }
        while($row = mysql_fetch_array($result));
    $sSpecialFriends = $sSpecialFriends . "</table>" ."\n";
    }

mysql_close($con); 
```

因此，如果有人可以帮助我使用与 ASP 的 MoveNext 等效的 PHP 和/或完成我想要完成的工作的最佳方式。

感谢您的任何帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-30T16:47:00.313

欢迎来到 StackOverflow，马特。除非您使用的是 ADODB 库，否则 PHP 不会真正那样工作。下面的 PHP 脚本循环遍历像 MOVENEXT 这样的记录：

```
// Get all the data from the "example" table

$result = mysql_query("SELECT * FROM example") 
or die(mysql_error());  

echo "<table border='1'>";
echo "<tr> <th>Name</th> <th>Age</th> </tr>";

// keeps getting the next row until there are no more to get

while ($row = mysql_fetch_array($result)) {
    echo "<tr><td>"; 
    echo $row['name'];
    echo "</td><td>"; 
    echo $row['age'];
    echo "</td></tr>"; 
} 

echo "</table>";

mysql_close($dbConn); 
```

但是，如果您使用的是 ADODB 库，您仍然可以像这样使用 MOVENEXT 和 EOF：

```
$rs = $db->Execute($sql); 
if ($rs) 
    while (!$rs->EOF) { 
        ProcessArray($rs->fields);     
        $rs->MoveNext(); 
    } 
```

我建议使用顶级版本，更简单。

# c# - 如何创建线程

> ID：11703050
> 
> 赞同：-2
> 
> 时间：2012-07-28T17:10:04.607
> 
> 标签：c#, multithreading

当我点击button1时应该打印A但是当我点击button2时需要停止thread1并需要启动thread2，这里有什么问题请帮助我

```
 private void button1_Click(object sender, EventArgs e)
    {
        if (thread2.IsAlive)
        {
            thread2.Suspend();
        }
        thread1 = new Thread(threadOne);
        thread1.Start();
    }

    private void button2_Click(object sender, EventArgs e)
    {
        if (thread1.IsAlive)
        {
            thread1.Suspend();
        }
        thread2 = new Thread(threadTwo);
        thread2.Start();
    }

    private void threadOne() {
        for (int i=0; i < 20; i++ )
        {
            Console.Write("A");
            Thread.Sleep(500);
        }
    }

    private void threadTwo()
    {
        for (int i = 0; i < 20; i++)
        {
            Console.Write("B");
            Thread.Sleep(500);
        }
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-28T17:47:54.523

正如其他海报正确指出的那样，有很多错误。我要补充一点：

1) 商业级软件中的大多数线程在应用程序的生命周期内永远不会终止——它们被编写为无限循环，带有阻塞调用，等待来自其他线程或 I/O 操作的某种信号。

2) 线程对象的持续创建/终止/销毁代价高昂、难以控制、难以调试、不可靠并且通常会导致痛苦。

3) 如果您的多线程代码包含以下任何一项：

```
Suspend()
Resume(), (except in some thread ctors)
Join()
Abort()
IsAlive() 
```

你可能应该再想一想:)

我知道你只是在学习，但有时最好在漏洞变得更大之前修补漏洞:)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-28T17:16:16.743

您正在按钮单击事件中创建线程的实例，因此检查 threadX.IsAlive 的 if 语句将抛出错误报告空引用异常

所以请在加载时创建线程 1 和 2 的实例

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-28T17:16:30.673

检查`null`也。使用`Abort()`方法而不是 Suspend()，因为您每次都在创建一个新线程。

```
private void button1_Click(object sender, EventArgs e)
    {
        if (thread2!=null && thread2.IsAlive)
        {
            thread2.Abort();
        }
        thread1 = new Thread(threadOne);
        thread1.Start();
    }

    private void button2_Click(object sender, EventArgs e)
    {
        if (thread1!=null && thread1.IsAlive)
        {
            thread1.Abort();
        }
        thread2 = new Thread(threadTwo);
        thread2.Start();
    } 
```

# ruby-on-rails - Ember 路由器未初始化（带 ember-rails）

> ID：11703053
> 
> 赞同：0
> 
> 时间：2012-07-28T17:10:22.907
> 
> 标签：ruby-on-rails, ember.js

我无法让我的应用程序通过路由器加载启动。我正在使用 ember-rails gem 来生成资产。我创建了一个资源，并尝试通过 ember 路由器连接它，但路由器从不路由任何东西。

[这](http://jsfiddle.net/kcjzw/)是 ember-rails 生成的代码的 JSFiddle 的链接。我自己添加的唯一代码是路由器创建时的`enter`、`connectOutlets`和`location`属性。

我错过了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-08T13:34:04.957

我最终在 github 上找到了一个非常好的基本 ember-rails[示例](https://github.com/bazzel/ember-sample2)。在这个例子中，他使用了一个更新版本的 ember，似乎可以解决我的问题。

# android - 一个按钮用于两个操作

> ID：11703054
> 
> 赞同：1
> 
> 时间：2012-07-28T17:10:26.897
> 
> 标签：android

谁能告诉我？我怎样才能对两个动作使用相同的按钮？就像 em 在我的活动中使用一个按钮来计算一些值，并且在计算出当我再次按下相同的按钮然后重置所有字段之后。就像在这个应用程序 [http://www.crazness.com/games/play-love-tester/](http://www.craziness.com/games/play-love-tester/)中一样，当我按下按钮测试爱情然后我再次按下相同的按钮然后所有字段重置。我应该在我的活动中使用什么来解决上述问题？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-28T17:14:40.017

您可以创建一个指示程序状态的全局变量，然后在需要时更改此值。在您的`OnClickListener`中，`Button`您创建一个`if`语句来检查此变量并为相关值执行所需的操作。

例子：

```
public class MainActivity extends Activity {
    private int state = 0;

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);

        Button button = (Button) findViewById(R.id.button);
        button.setOnClickListener(new View.OnClickListener() {
            @Override
            public void onClick(View v) {
                if (state == 0) {
                    // State 1
                }
                else if (state == 1) {
                    // State 2 
                }
                else {
                    // Default state
                }
            }
        });

        // Rest of your code including state changing part
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-28T19:05:48.697

*   您可以通过更改按钮文本来做到这一点。

如果您不希望有人看到文本更改。测试（例如“点击”和其他状态“点击”（末尾有 1 个空白）或其他解决方案。

```
....

Button bt = (Button) findViewById(R.id.button);
bt.setOnClickListener(new View.OnClickListener() {

public void onClick(View v) {
//  todo: check for expected instance (Button) 
Button btc = (Button)v;
String bText = btc.getText().toString();

if (bText == "open") {
     btc.setText("close");
     }
     else if (bText == "close") {
     btc.setText("open"); 
     }
}

[...] 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-28T23:14:00.450

您可以使用切换按钮来执行此操作。

在您的 xml 文件中添加一个切换按钮

```
<ToggleButton 
    android:id="@+id/tbtn"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:text=""
    android:textOff="Reset"
    android:textOn="Calculation"
    android:background="@drawable/icon"/> 
```

Java 文件

```
public class Reviews extends Activity implements OnClickListener {

private ToggleButton tbtn;
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);

    tbtn = (ToggleButton) findViewById(R.id.tbtn);
    tbtn.setOnClickListener(this);

    public void onClick(View view) {

        if (tbtn.isChecked()) {

            //calculate the result
        } 
        else {

             //Reset your global calculation variable;
        }

        }
    }
} 
```

# c# - 如何获取多个网卡数据

> ID：11703057
> 
> 赞同：0
> 
> 时间：2012-07-28T17:10:48.770
> 
> 标签：c#, nic

我有代码，可以找到我的 NIC 卡 IP 地址、IP 子网、网关、Mac 和网卡名称（描述）。但问题是，我的 PC 上有多个 NIC 卡和 WiFi。而这个程序而不是 4 个 NIC 卡只显示了一个主卡。如何解决这个问题？

```
public  void NIC_data()
    {
        ManagementObjectSearcher query = new
        ManagementObjectSearcher("SELECT * FROM Win32_NetworkAdapterConfiguration WHERE IPEnabled = 'TRUE'");
        ManagementObjectCollection queryCollection = query.Get();
        foreach (ManagementObject mo in queryCollection)
        {
            string[] addresses = (string[])mo["IPAddress"];
            string[] subnets = (string[])mo["IPSubnet"];
            string[] defaultgateways = (string[])mo["DefaultIPGateway"];
            textBox1.Text = string.Format("Network Card: {0}", mo["Description"]);
            textBox2.Text = string.Format(" MAC Address: {0}", mo["MACAddress"]);
            foreach (string ipaddress in addresses)
            {
                textBox3.Text = string.Format(" IP Address: {0}", ipaddress);
            }
            foreach (string subnet in subnets)
            {
                textBox4.Text = string.Format(" Subnet Mask: {0}", subnet);
            }
            foreach (string defaultgateway in defaultgateways)
            {
                textBox5.Text = string.Format(" Gateway: {0}", defaultgateway);
            }
        } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-28T17:34:14.313

您只需将循环的最后一个值分配给文本框，例如`textBox3.Text = ....`.

附加到`textBox3.Text += ...`或使用组合框。

# java - 执行操作的最佳时间：循环内或循环后

> ID：11703062
> 
> 赞同：0
> 
> 时间：2012-07-28T17:11:19.487
> 
> 标签：java, performance, optimization

我正在阅读一个文件以供稍后解析。该文件的大小不可能超过 MB，因此在现阶段这对我来说可能不是一个关键问题。但出于最佳实践的原因，我想知道何时是执行操作的最佳时间。

例子：

使用我从[http://www.dzone.com/snippets/java-read-file-string](http://www.dzone.com/snippets/java-read-file-string)粘贴的方法，我正在将缓冲区读入字符串。我现在想删除所有空格。我的方法目前是这样的：

```
private String listRaw;

public boolean readList(String filePath) throws java.io.IOException {
    StringBuffer fileData = new StringBuffer(1024);
    BufferedReader reader = new BufferedReader(
            new FileReader(filePath));
    char[] buf = new char[1024];
    int numRead=0;
    while((numRead=reader.read(buf)) != -1){
        String readData = String.valueOf(buf, 0, numRead);
        fileData.append(readData);
        buf = new char[1024];
    }
    reader.close();
    listRaw = fileData.toString().replaceAll("\\s","");
    return true;
} 
```

因此，我在将字符串完整存储到类变量时从字符串中删除了所有空格。

对我来说，这意味着更少的处理，但更多的内存使用。出于最佳实践原因，在将变量附加到变量时，我是否会更好地对其进行`replaceAll()`操作？使用更多处理但避免传递多余的空白。`readData``fileData`

我想这对像我正在处理的小文件这样的小文件影响不大，但如果它是一个 200MB 的日志文件呢？

它完全取决于案例，还是有一个我最好遵循的共识？

* * *

感谢大家的投入。我相信您已经帮助我将思维定势指向了编写 Java 的正确方向。

我已经更新了我的代码以考虑提出的观点。包括 Don Roby 的建议，即在某些时候，我可能想保留空格。希望现在情况更好！

```
private String listRaw;

public boolean readList(String filePath) throws java.io.IOException {
    StringBuilder fileData = new StringBuilder(51200);
    BufferedReader reader = new BufferedReader(new FileReader(filePath));
    char[] buf = new char[51200];
    boolean spaced = false;
    while(reader.read(buf) != -1){
        for(int i=0;i<buf.length;i++) {
            char c = buf[i];
            if (c != '\t' && c != '\r' && c != '\n') {
                if (c == ' ') {
                    if (spaced) {
                        continue;
                    }
                    spaced = true;
                } else {
                    spaced = false;
                }

                fileData.append(c);
            }
        }
    }
    reader.close();
    listRaw = fileData.toString().trim();
    return true;
} 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-28T17:20:31.290

您最好在最后只创建和应用一次正则表达式替换。但你会获得更多

*   以合理的大小初始化 StringBuilder
*   避免在循环内创建字符串，并将读取的字符直接附加到 StringBuilder
*   避免在每次迭代时实例化一个新的 char 缓冲区。

为避免不必要的长临时字符串创建，您可以逐个字符地读取字符，并且仅将字符附加到 StringBuilder （如果它[不是空格](http://docs.oracle.com/javase/6/docs/api/java/lang/Character.html#isWhitespace%28char%29)）。最后， StringBuilder 将只包含好的字符，您不需要任何`replaceAll()`调用。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-07-28T17:18:18.240

在这段代码中实际上有几个非常低效的地方，你必须先修复它们，然后再担心你提出的相对不那么重要的问题。

首先，不要`buf`在循环的每次迭代中创建一个新对象——使用同一个！这样做没有问题 - 新数据会覆盖旧数据，并且您可以节省对象分配（这是您可以执行的更昂贵的操作之一。）

其次，同样，不要创建一个`String`来调用`append()`——使用它的形式，`append`它需要一个`char`数组和一个偏移量（在这种情况下为 0）和长度（`numRead`在这种情况下）。同样，每次循环迭代都会少创建一个对象.

最后，要回答您实际提出的问题：在循环中执行此操作会在每次迭代中创建一个 String 对象，但是通过我们刚刚完成的调整，您每次迭代创建*零*个对象 - 因此删除循环结束是明显的赢家！

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-28T17:24:41.683

根据您要进行的解析，您最好*不要*在单独的步骤中删除空格，而在解析期间忽略它们。

想要删除*所有*空格也是相当罕见的。您确定不想用单个空格替换多个空格吗？

# python - 如何将两个列表的元素添加到一个列表中？

> ID：11703064
> 
> 赞同：15
> 
> 时间：2012-07-28T17:11:25.137
> 
> 标签：python, list

例如，我有一个这样的列表：

```
list1 = ['good', 'bad', 'tall', 'big']

list2 = ['boy', 'girl', 'guy', 'man'] 
```

我想列一个这样的清单：

```
list3 = ['goodboy', 'badgirl', 'tallguy', 'bigman'] 
```

我尝试了这样的事情：

```
list3=[]
list3 = list1 + list2 
```

但这只会包含`list1`

所以我用`for`：

```
list3 = []
for a in list1:
 for b in list2:
  c = a + b
  list3.append(c) 
```

但这会导致列表过多（在这种情况下，4 * 4 = 16）

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2012-07-28T17:14:21.310

您可以使用列表推导`zip`：

```
list3 = [a + b for a, b in zip(list1, list2)] 
```

`zip`通过组合你给它的可迭代元素中的元素来生成一个元组列表。因此，在您的情况下，它将从`list1`and返回成对的元素`list2`，直到先用完为止。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-28T17:17:17.613

使用您尝试的循环的解决方案是一种方法，这比 Xions 解决方案对初学者更友好。

```
list3 = []
for index, item in enumerate(list1):
    list3.append(list1[index] + list2[index]) 
```

这也适用于更短的解决方案。使用 map() 和 lambda，我更喜欢这个而不是 zip，但这取决于每个人

```
list3 = map(lambda x, y: str(x) + str(y), list1, list2); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-28T17:20:58.593

对于这个或任何两个相同大小的列表，您也可以像这样使用：

```
for i in range(len(list1)):
    list3[i]=list1[i]+list2[i] 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-28T17:21:52.577

使用拉链

```
list3 = []
for l1,l2 in zip(list1,list2):
    list3.append(l1+l2) 
```

`list3 = ['goodboy', 'badgirl', 'tallguy', 'bigman']`

# google-apps-script - 遇到未定义的变量时，模板化的 html 返回服务器错误

> ID：11703067
> 
> 赞同：0
> 
> 时间：2012-07-28T17:11:29.003
> 
> 标签：google-apps-script

嗨，我想知道这是否是预期的行为：

```
<html>
  <head>
  </head>
  <body>
    <?if(a){
      Logger.log("a ="+a)?>
      <table>
        <tr>
          <th>First Name</th>
          <th>Last Name</th>
          <th>Id</th>
        </tr>
        <tr>
          <td><input type='text' name=firstName id='firstNameToEdit' /></td>
          <td><input type='text' name=lastName id='lastNameToEdit' /></td>
          <td><label id='down_id'></label></td>
        </tr>
      </table>
    <?}else{Logger.log("a="+a)}?>
  </body>  
</html> 
```

当 a 被定义时，我在日志中得到 a 的值，并且一切都按预期显示，但是当我离开 a 未定义时，执行似乎停止在 if(a) 并且日志什么也不显示。

我像这样提供html：

```
 var t = HtmlService.createTemplateFromFile('test');
  return t.evaluate(); 
```

当我以这种方式服务时：

```
 var t = HtmlService.createTemplateFromFile('test');
  t.a = b;
  return t.evaluate(); 
```

where (b:{undefined,null}) 那么如果我在 html 模板中记录 a 的值，我会得到 a=null （在这两种情况下）。似乎模板中不能有未定义的变量。

PS我真的很感激一种在编辑器中关闭自动识别的方法

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-30T19:29:20.413

如果您在编辑器中运行 doGet() 方法，您应该会看到错误：

> ReferenceError：未定义“a”。

在 JavaScript 中，您不能引用不存在的变量。要解决此问题，您可以将 if 大小写更改为：

```
<? if (this.a) { 
```

由于`this`始终定义为当前对象/范围。

# html - IE 在图像上定位锚元素

> ID：11703068
> 
> 赞同：2
> 
> 时间：2012-07-28T17:11:46.587
> 
> 标签：html, css, internet-explorer, xhtml

我在使用 IE9（和 8）在图像上定位空（有点）锚元素时遇到问题。锚点包含文本，但它是使用 CSS 的 text-indent 属性从页面开始的。

我正在一个有一系列促销面板的网站上工作，它们都包含在 UL 中。每个 LI 内部都有一个宣传图片，以及位于其不同区域的 1 个或多个锚元素。IMG 和 A 元素绝对定位在 LI 元素中。因此，基本结构看起来像 UL > LI > IMG A A。

此设置在 Firefox 和 Chrome 中运行良好，但 IE 不喜欢它。我试过在这个设置上使用 z-index 没有运气。

谁能解释 IE 遇到的问题，并为我的 CSS 提供更好的解决方案？*我使用 div、img 和单个锚点为我的问题制作了一个快速/简化的示例。*这可以复制/粘贴到您的机器上以查看它的运行情况。

```
 <!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
    <head>
        <title></title>
        <meta name="Description" content="" />
        <meta http-equiv="Content-type" content="text/html;charset=UTF-8" />
        <link type="text/css" rel="stylesheet" href="" />
        <style type="text/css">
            #div {
                z-index:1;
                display: block;
                background:red;
                position:relative;
            }
            #image {
                z-index:2;
                position:absolute;
                top:0;
                left:0;
                display:block;
            }
            #anchor {
                z-index:3;
                display:block;
                overflow:hidden;
                position: absolute;
                top:0;
                left:0;
                text-indent:-9999px;
                width:640px;
                height:480px;
            }
        </style>
    </head>
    <body>
        <div id="div">
            <img id="image" src="http://farm8.staticflickr.com/7130/7438112718_2e8340081b_z.jpg" />
            <a href="#" id="anchor">clicky</a>
        </div>
    </body>
</html> 
```

我对 UL > LI > IMG A 布局没有太多控制权。这是设置，当我们获得新的促销时，我们可以轻松地更新图像，并且只需根据图像有多少“号召性用语”轻松添加或删除锚点。A 元素的定位是内联注入的。

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-10T19:40:35.487

我遇到过同样的问题。使用您的示例，这是我的解决方案：

```
<style type="text/css">
    #div {
        position:relative;
    }
    #anchor {
        display:block;
        width:640px;
        height:480px;
        overflow:hidden;
        text-indent:-9999px;
        position:absolute;
        top:0;
        left:0;
        background:url(http://farm8.staticflickr.com/7130/7438112718_2e8340081b_z.jpg) no-repeat 640px 480px;
    }
</style>

<div id="div">
    <img id="image" src="http://farm8.staticflickr.com/7130/7438112718_2e8340081b_z.jpg" />
    <a href="#" id="anchor">clicky</a>
</div> 
```

由于锚标记具有隐藏溢出的设置宽度和高度，将锚标记的背景图像设置为它绝对定位的图像（或您已经包含的任何图像），但将背景位置设置为更大的正像素值比锚点的宽度和高度以及背景重复到不重复。通过这样做，锚标签在 IE 中工作，并且浏览器不会下载额外的资源，因此您可以节省带宽。注意：img 标签不需要任何特殊的样式，包含的 div 只需要相对位置。

如果您不想担心设置背景位置、无法控制任何动态生成的图像的大小和/或不关心节省带宽，您还可以创建并使用一个小的 (1x1 ) 清晰/透明图像（必要时设置背景重复）。

或者，增加比利护城河的小提琴示例：http: [//jsfiddle.net/7NpLq/29/](http://jsfiddle.net/7NpLq/29/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-28T18:19:31.957

我认为您可以使用普通的旧 HTML 图像映射来实现您想要的：

[http://www.w3schools.com/tags/tag_map.asp](http://www.w3schools.com/tags/tag_map.asp)

否则，这里有一个小提琴做我认为你最初试图做的事情：

[http://fiddle.jshell.net/7NpLq/](http://fiddle.jshell.net/7NpLq/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-02-10T12:13:17.927

此问题也影响 IE10，但不影响 IE11。背景图像方法的替代方法是应用于`background-color: rgba(0, 0, 0, 0);`锚点。请注意，这在不支持`rgba`颜色的 IE8 中不起作用。

# php - 重定向管理员/？？？到 admin.php/??? 使用 .htaccess

> ID：11703072
> 
> 赞同：1
> 
> 时间：2012-07-28T17:12:25.417
> 
> 标签：php, .htaccess, url, mod-rewrite, rewrite

这是我目前的 htaccess 文件：

```
Options +FollowSymLinks
RewriteEngine On
RewriteBase /blog/

ErrorDocument 404 /blog/404.php

RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d

RewriteRule ^(.*)\.html$ post.php/$1.html

RewriteRule ^index$ index.php
RewriteRule ^archives$ archives.php
RewriteRule ^about$ about.php
RewriteRule ^search$ search.php

RewriteRule ^feed$ feed.php 
```

目前，如果我去`domain.com/blog/*.html`，它正在（在后台）重定向到`domain.com/blog/post.php/*`

我几乎想复制这个，但我不确定所有这些正则表达式的东西。

我也希望能够去`domain.com/blog/admin/*`并让它（在后台）重定向到`domain.com/blog/admin.php?p=*`

如果你们能帮助我，我将不胜感激！

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-28T17:18:44.010

就像是：

```
RewriteRule ^/?admin/(.*)$ admin.php?p=$1&%{QUERY_STRING} [L,NC] 
```

会成功的。

这很快就完成了，并且没有经过测试，但它给了你这个想法。你把这个放在上面：

```
RewriteRule ^(.*)\.html$ post.php/$1.html 
```

编辑：取出 rewritecond 因为我刚刚意识到它没用

编辑：也添加了查询字符串，因为您现在实际上正在转换 _GET。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-28T17:25:53.133

将多视图添加到 .htaccess 的第一行：

```
Options FollowSymLinks MultiViews 
```

然后，重新启动apache。它应该将 admin 指向 admin.php。

注意：同一目录下不要有多个同名不同扩展名的文件。

[http://httpd.apache.org/docs/2.2/mod/mod_negotiation.html](http://httpd.apache.org/docs/2.2/mod/mod_negotiation.html)

# ios - iOS Master-Detail 如何在点击添加项目按钮时加载新视图？

> ID：11703079
> 
> 赞同：0
> 
> 时间：2012-07-28T17:13:41.063
> 
> 标签：ios, uitableview, uisplitviewcontroller, master-detail

在 Master-Detail 应用程序中点击 + 按钮时，如何显示新的数据输入视图？新显示的视图如何将 2 个字符串返回到主从视图？

主视图有一个 UITableView

每个单元格包含 2 个字符串。正文和副标题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-28T17:18:40.420

你的答案不清楚，但让我试试

首先推送/模态您的新视图。

然后使用委托传回数据。

使用下面的链接获取委托教程。

[dismissModalViewController 并传回数据](https://stackoverflow.com/questions/6203799/dismissmodalviewcontroller-and-pass-data-back)

# c++ - 在 C++ 中解析数学表达式

> ID：11703082
> 
> 赞同：27
> 
> 时间：2012-07-28T17:14:11.453
> 
> 标签：c++, parsing, tree

我有一个关于解析树的问题：

我有一个字符串（数学表达式 estring），例如：`(a+b)*c-(d-e)*f/g`. 我必须在树中解析该表达式：

```
class Exp{};
class Term: public Exp{
    int n_;
}

class Node: Public Exp{
    Exp* loperator_;
    Exp* roperator_;
    char operation; // +, -, *, /
} 
```

我可以使用什么算法来构建代表上述表达式字符串的树？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-07-28T17:39:10.520

使用[调车码算法](http://en.wikipedia.org/wiki/Shunting-yard_algorithm)。维基百科的描述相当全面，我希望它就足够了。

您也可以尝试编写一个正式的语法，例如[解析表达式语法](http://en.wikipedia.org/wiki/Parsing_expression_grammar)，并使用工具生成解析器。[这个关于 PEG 的网站](http://bford.info/packrat/)列出了 3 个用于 PEG 解析的 C/C++ 库。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-07-28T17:18:06.847

`(a+b)*c-(d-e)*f/g`是一个固定表达式。

要轻松制作[tree](http://www.cs.man.ac.uk/~pjj/cs212/fix.html)，请先将其转换为 Prefix 表达式。

从示例中，前缀 of`(A * B) + (C / D)`是`+ (* A B) (/ C D)`

```
 (+)            
     / \        
    /   \       
  (*)    (/)         
  / \   /  \        
 A   B C    D   

 ((A*B)+(C/D)) 
```

然后你的树看起来有 + 作为它的根节点。您可以继续填充关于每个运算符的左右子树。

此外，[**此链接**](http://www.engr.mun.ca/~theo/Misc/exp_parsing.htm)详细解释了递归下降解析，并且可以实现。

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2012-07-29T13:32:30.447

```
#include <algorithm>
#include <iostream>
#include <string>
#include <cctype>
#include <iterator>

using namespace std;

class Exp{
public:
//  Exp(){}
    virtual void print(){}
    virtual void release(){}
};
class Term: public Exp {
    string val;
public:
    Term(string v):val(v){}
    void print(){
        cout << ' ' << val << ' ';
    }
    void release(){}
};

class Node: public Exp{
    Exp *l_exp;
    Exp *r_exp;
    char op; // +, -, *, /
public:
    Node(char op, Exp* left, Exp* right):op(op),l_exp(left), r_exp(right){}
    ~Node(){
    }
    void print(){
        cout << '(' << op << ' ';
        l_exp->print();
        r_exp->print();
        cout  << ')';
    }
    void release(){
        l_exp->release();
        r_exp->release();
        delete l_exp;
        delete r_exp;
    }
};

Exp* strToExp(string &str){
    int level = 0;//inside parentheses check
    //case + or -
    //most right '+' or '-' (but not inside '()') search and split
    for(int i=str.size()-1;i>=0;--i){
        char c = str[i];
        if(c == ')'){
            ++level;
            continue;
        }
        if(c == '('){
            --level;
            continue;
        }
        if(level>0) continue;
        if((c == '+' || c == '-') && i!=0 ){//if i==0 then s[0] is sign
            string left(str.substr(0,i));
            string right(str.substr(i+1));
            return new Node(c, strToExp(left), strToExp(right));
        }
    }
    //case * or /
    //most right '*' or '/' (but not inside '()') search and split
    for(int i=str.size()-1;i>=0;--i){
        char c = str[i];
        if(c == ')'){
            ++level;
            continue;
        }
        if(c == '('){
            --level;
            continue;
        }
        if(level>0) continue;
        if(c == '*' || c == '/'){
            string left(str.substr(0,i));
            string right(str.substr(i+1));
            return new Node(c, strToExp(left), strToExp(right));
        }
    }
    if(str[0]=='('){
    //case ()
    //pull out inside and to strToExp
        for(int i=0;i<str.size();++i){
            if(str[i]=='('){
                ++level;
                continue;
            }
            if(str[i]==')'){
                --level;
                if(level==0){
                    string exp(str.substr(1, i-1));
                    return strToExp(exp);
                }
                continue;
            }
        }
    } else
    //case value
        return new Term(str);
cerr << "Error:never execute point" << endl;
    return NULL;//never
}

int main(){
    string exp(" ( a + b ) * c - ( d - e ) * f / g");
    //remove space character
    exp.erase(remove_if(exp.begin(), exp.end(), ::isspace), exp.end());
    Exp *tree = strToExp(exp);
    tree->print();
    tree->release();
    delete tree;
}
//output:(- (* (+  a  b ) c )(/ (* (-  d  e ) f ) g )) 
```

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2012-07-28T17:40:29.790

第一步是为您的表达式编写语法。这种简单情况的第二步是编写递归下降解析器，这是我推荐的算法。这是关于递归下降解析器的 wiki 页面，它具有漂亮的 C 实现。

[http://en.wikipedia.org/wiki/Recursive_descent_parser](http://en.wikipedia.org/wiki/Recursive_descent_parser)

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2012-07-29T00:50:48.393

您可以使用此语法来创建您的表达式。

```
exp:
    /* empty */
  | non_empty_exp { print_exp(); }
  ;
non_empty_exp:
    mult_div_exp
  | add_sub_exp
  ;
mult_div_exp:
    primary_exp
  | mult_div_exp '*' primary_exp { push_node('*'); }
  | mult_div_exp '/' primary_exp { push_node('/'); }
  ;
add_sub_exp:
    non_empty_exp '+' mult_div_exp { push_node('+'); }
  | non_empty_exp '-' mult_div_exp { push_node('-'); }
  ;
primary_exp:
  | '(' non_empty_exp ')'
  | NUMBER { push_term($1); }
  ; 
```

以下是您的词法分析器。

```
[ \t]+   {}
[0-9]+   { yylval.number = atoi(yytext); return NUMBER; }
[()]     { return *yytext; }
[*/+-]   { return *yytext; } 
```

使用以下例程构建表达式：

```
std::list<Exp *> exps;

/* push a term onto expression stack */
void push_term (int n) {
    Term *t = new Term;
    t->n_ = n;
    exps.push_front(t);
}

/* push a node onto expression stack, top two in stack are its children */
void push_node (char op) {
    Node *n = new Node;
    n->operation_ = op;
    n->roperator_ = exps.front();
    exps.pop_front();
    n->loperator_ = exps.front();
    exps.pop_front();
    exps.push_front(n);
}

/*
 * there is only one expression left on the stack, the one that was parsed
 */
void print_exp () {
    Exp *e = exps.front();
    exps.pop_front();
    print_exp(e);
    delete e;
} 
```

以下例程可以漂亮地打印您的表达式树：

```
static void
print_exp (Exp *e, std::string ws = "", std::string prefix = "") {
    Term *t = dynamic_cast<Term *>(e);
    if (t) { std::cout << ws << prefix << t->n_ << std::endl; }
    else {
        Node *n = dynamic_cast<Node *>(e);
        std::cout << ws << prefix << "'" << n->operation_ << "'" << std::endl;
        if (prefix.size()) {
            ws += (prefix[1] == '|' ? " |" : "  ");
            ws += "  ";
        }
        print_exp(n->loperator_, ws, " |- ");
        print_exp(n->roperator_, ws, " `- ");
    }
} 
```

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2016-10-10T15:32:52.443

我写了一个类来处理这个问题。它有点冗长，也许不是地球上最有效的东西，但它处理有符号/无符号整数、双精度、浮点、逻辑和按位运算。

它检测数字上溢和下溢，返回有关语法的描述性文本和错误代码，可以强制将双精度数作为整数处理，或忽略标志，支持用户可定义的精度和智能舍入，如果设置 DebugMode(true)，甚至会显示其工作。

最后......它不依赖任何外部库，所以你可以把它放进去。

示例用法：

```
CMathParser parser;

double dResult = 0;
int iResult = 0;

//Double math:
if (parser.Calculate("10 * 10 + (6 ^ 7) * (3.14)", &dResult) != CMathParser::ResultOk)
{
    printf("Error in Formula: [%s].\n", parser.LastError()->Text);
}
printf("Double: %.4f\n", dResult);

//Logical math:
if (parser.Calculate("10 * 10 > 10 * 11", &iResult) != CMathParser::ResultOk)
{
    printf("Error in Formula: [%s].\n", parser.LastError()->Text);
}
printf("Logical: %d\n", iResult); 
```

最新版本始终可通过[CMathParser GitHub 存储库](https://github.com/NTDLS/CMathParser)获得。

# angularjs - 如何转换为属性？

> ID：11703086
> 
> 赞同：25
> 
> 时间：2012-07-28T17:14:34.697
> 
> 标签：angularjs

是否可以以某种方式`ngTransclude`用于属性值，而不是替换内部 HTML 内容？例如这个简单的指令

```
var testapp = angular.module('testapp', [])

testapp.directive('tag', function() {
  return {
    template: '<h1><a href="{{transcludeHere}}" ng-transclude></a></h1>',
    restrict: 'E',
    transclude: true
  }
}); 
```

并将其用作

```
<tag>foo</tag> 
```

我想把它翻译成

```
<h1><a href="foo">foo</a></h1> 
```

有什么方法可以做到这一点，还是我必须使用属性而不是嵌入？

**这是一个[例子](http://jsfiddle.net/darthdeus/bMW7a/)**

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2012-07-28T20:40:47.893

像这样的东西：

```
var testapp = angular.module('testapp', [])

testapp.directive('tag', function() {
  return {
    restrict: 'E',
    template: '<h1><a href="{{transcluded_content}}">{{transcluded_content}}</a></h1>',
    replace: true,
    transclude: true,
    compile: function compile(tElement, tAttrs, transclude) {
        return {
            pre: function(scope) {
                transclude(scope, function(clone) {
                  scope.transcluded_content = clone[0].textContent;
                });
            }
        }
    }
  }
});​ 
```

[小提琴](http://jsfiddle.net/vt8BF/2/)。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-12-02T11:41:41.403

另一种解决方案：

```
app.directive('tag', function($compile) {
  return {
    restrict: 'E',
    template:"<h1></h1>",
    transclude: 'element',
    replace: true,
    controller: function($scope, $element, $transclude) {
      $transclude(function(clone) {
        var a = angular.element('<a>');
        a.attr('href', clone.text());
        a.text(clone.text());        
        // If you wish to use ng directives in your <a>
        // it should be compiled
        //a.attr('ng-click', "click()");
        //$compile(a)($scope);       
        $element.append(a);
      });
    }
  };
}); 
```

Plunker：[http ://plnkr.co/edit/0ZfeLz?p=preview](http://plnkr.co/edit/0ZfeLz?p=preview)

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2014-09-25T11:23:39.000

我最初知道您的问题是关于嵌入的，但是使用属性可以更简洁地解决这个问题。

```
var testapp = angular.module('testapp', [])

testapp.directive('tag', function() {
  return {
    template: '<h1><a href="{{url}}">{{url}}</a></h1>',
    restrict: 'E',
    scope: {
      url: '@'
    }
  }
}); 
```

和你的 html

```
<tag url="foo"></tag> 
```

译文：

```
<h1><a href="foo">foo</a></h1> 
```

此外，在最新版本的 Angular 中，有一个称为“一次性绑定”的功能，非常适合这种情况，您只希望/需要在初始化时一次性完成插值。语法如下所示：

```
{{::url}} 
```

只需将模板中 {{url}} 的所有实例替换为上述内容即可。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2014-05-21T06:59:37.657

Vadim 的答案可以通过使用该`compile`函数轻松修复，并返回将发生转换的 postLink 函数。

```
app.directive('tag', function ($compile) {
  return {
    restrict: 'E',
    template: '<h1></h1>',
    transclude: 'element',
    replace: true,
    compile: function($element, $attrs) {
        return function ($scope, $element, $attrs, $controller, $transclude) {
          $transclude(function(clone) {
            var a = angular.element('<a></a>');
            a.attr('href', clone.text());
            a.text(clone.text());        
            // If you wish to use ng directives in your <a>
            // it should be compiled
            // a.attr('ng-click', 'click()');
            // $compile(a)($scope);
            $element.append(a);
          });
        };
    }
  };
}); 
```

请参考[https://docs.angularjs.org/api/ng/service/](https://docs.angularjs.org/api/ng/service/) $compile

该`$transclude`函数曾经在函数中传递`compile`，但已被弃用，现在在`link`函数中。

# c# - 在设计模式下添加到表单上时，如何在表单设计器下方为我的自定义组件获取图像/图标？

> ID：11703087
> 
> 赞同：0
> 
> 时间：2012-07-28T17:14:34.370
> 
> 标签：c#, winforms, visual-studio, components, custom-component

我正在使用 Visual Studio 2010、C# 和 WinForms，并创建了如下自定义组件：

```
public partial class SlidePanel : Panel 
{
    some code here...
} 
```

所以它是一个组件类而不是用户控件。

我想要的是当我在 windows 窗体上拖动我的组件以在窗体下方获得一个代表我的组件的图标时。一个示例是现有的绑定源控件 - 当您将其添加到表单时，它会在表单下方（在表单设计器上）为您提供一个图标，您可以选择该图标然后更改属性。我怎样才能做到这一点？该图标可以是通用的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-28T19:59:08.077

> 所以它是一个组件类而不是用户控件。

不，两者都不是。它仍然是一个面板控件，您只是自定义了它的行为。如果此类在您的解决方案的项目中，那么您将在编译后自动将其添加到工具箱中。在顶部，就在箭头之后。如果这没有发生，那么您的设置错误。工具 + 选项、Windows 窗体设计器、常规，确保 AutoToolboxPopulate 设置为 True。

如果您确实想要您描述的内容（底部添加的图标），那么您需要创建一个派生自 Component 的类。这是一种非常不同的动物，它不能在形式上具有视觉表示。它当然不能像面板之类的东西。有关示例，请参[见此答案。](https://stackoverflow.com/a/11680806/17034)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-03-18T01:07:39.900

我知道这已经很晚了，但我只是在阅读相同的问题，而这个问题引起了我的兴趣。我在这里假设您要做的是在您的表单上有一个可以在设计器中缩小的控件。结果，这将使控件从窗体中消失。通过在表单下方有一个组件，您仍然可以通过选择该组件来编辑其属性。

我的想法是尝试 ControlDesigner。我不确定这是否可行，这不是一个微不足道的解决方案，我目前没有时间研究它，但你可以通过两种方式来这里。

一：ControlDesiger 会让你阴影属性，所以当你在设计器中设置它们时它们没有效果，这就是你设置为不可见的控件在设计器中保持可见的原因。阴影属性将没有效果或将具有您提供的效果，但随后会在序列化时更新实际属性。

二：您实际上可以在控件设计器中动态创建一个组件，并在您添加面板派生控件时将其添加到窗体中。然后，当您在组件中设置属性时，此更改可以反映在您的控件中。几年前我做了类似的事情只是为了浪费时间，但我并没有花很多时间真正让它正常工作，所以可能不会发生。

只是一些想法

丹尼胡特

# javascript - javascript内存问题

> ID：11703088
> 
> 赞同：0
> 
> 时间：2012-07-28T02:31:02.100
> 
> 标签：javascript, html, jquery

假设在我的 webapp 启动之前，我想最初创建所有 dom 元素并将它们存储在一些预加载的数组中。就像是：

```
for (i = 1...100) { preLoader.push($('<div id="' + i + '" />')); } 
```

然后稍后，根据操作，我将从数组中获取正确的元素并将其附加到 DOM。
现在我的问题是：如果我以后做：

`$(div#i).remove()`

它还会影响我的 preLoader 数组，还是它与 DOM 中的引用不同？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-28T17:28:02.887

> 它还会影响我的 preLoader 数组吗

*不，它不会*。对象将从内存中删除，仅当且仅当*没有办法访问它时*，即没有对它的引用。之后`$('div#'+i).remove()`，您无法从 DOM 访问它，但您仍然可以通过 访问它。因此`preLoader[i-1]`您需要从`preLoader`数组中**显式**删除对象：

```
preLoader.splice(i-1,1); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-28T17:20:29.907

DOM 中的对象是相同的。如果您想再次重复使用相同的标签，您应该调用

```
$(div#i).detach(); 
```

来自 jquery 文档：

> .detach() 方法与 .remove() 方法相同，不同之处在于 .detach() 保留与已删除元素关联的所有 jQuery 数据。当移除的元素稍后要重新插入到 DOM 中时，此方法很有用。

如果您使用 .remove() 您将丢失与被删除的元素相关的事件和数据。但是即使使用 remove() ，您也可以通过再次调用 .appendTo() 来重用相同的元素。

提琴手的示例：http: [//jsfiddle.net/sKRCF/1](http://jsfiddle.net/sKRCF/1) （对不起警报，这是简单的方法）。

# twitter-bootstrap - 如何通过单击外部来关闭 Twitter Bootstrap 弹出窗口？

> ID：11703093
> 
> 赞同：304
> 
> 时间：2012-07-28T17:15:34.870
> 
> 标签：twitter-bootstrap, popover

我们可以像模态框一样让弹出框被关闭吗，即。当用户点击它们之外的某个地方时让它们关闭？

不幸的是，我不能只使用真正的模态而不是弹出框，因为模态意味着位置：固定，那将不再是弹出框了。:(

* * *

## 回答 #1

> 赞同：480
> 
> 时间：2013-02-13T15:45:27.790

**更新：**更强大的解决方案：http: [//jsfiddle.net/mattdlockyer/C5GBU/72/](http://jsfiddle.net/mattdlockyer/C5GBU/72/)

对于仅包含文本的按钮：

```
$('body').on('click', function (e) {
    //did not click a popover toggle or popover
    if ($(e.target).data('toggle') !== 'popover'
        && $(e.target).parents('.popover.in').length === 0) { 
        $('[data-toggle="popover"]').popover('hide');
    }
}); 
```

对于包含图标的按钮使用**（此代码在 Bootstrap 3.3.6 中有一个错误，请参阅此答案中的以下修复）**

```
$('body').on('click', function (e) {
        //did not click a popover toggle, or icon in popover toggle, or popover
        if ($(e.target).data('toggle') !== 'popover'
            && $(e.target).parents('[data-toggle="popover"]').length === 0
            && $(e.target).parents('.popover.in').length === 0) { 
            $('[data-toggle="popover"]').popover('hide');
        }
    }); 
```

**对于 JS 生成的 Popovers**使用`'[data-original-title]'`代替`'[data-toggle="popover"]'`

**警告：**上面的解决方案允许同时打开多个弹出窗口。

**请一次弹出一个：**

**更新：** Bootstrap 3.0.x，见代码或小提琴[http://jsfiddle.net/mattdlockyer/C5GBU/2/](http://jsfiddle.net/mattdlockyer/C5GBU/2/)

```
$('body').on('click', function (e) {
    $('[data-toggle="popover"]').each(function () {
        //the 'is' for buttons that trigger popups
        //the 'has' for icons within a button that triggers a popup
        if (!$(this).is(e.target) && $(this).has(e.target).length === 0 && $('.popover').has(e.target).length === 0) {
            $(this).popover('hide');
        }
    });
}); 
```

这将处理已打开且未单击的弹出框的关闭，或者它们的链接尚未被单击。

* * *

**更新：** Bootstrap 3.3.6，[见小提琴](http://jsfiddle.net/C5GBU/1837/)

修复关闭后需要点击 2 次才能重新打开的问题

```
$(document).on('click', function (e) {
    $('[data-toggle="popover"],[data-original-title]').each(function () {
        //the 'is' for buttons that trigger popups
        //the 'has' for icons within a button that triggers a popup
        if (!$(this).is(e.target) && $(this).has(e.target).length === 0 && $('.popover').has(e.target).length === 0) {                
            (($(this).popover('hide').data('bs.popover')||{}).inState||{}).click = false  // fix for BS 3.3.6
        }

    });
}); 
```

**更新：**使用之前改进的条件，实现了这个解决方案。修复双击和重影弹窗问题：

```
$(document).on("shown.bs.popover",'[data-toggle="popover"]', function(){
    $(this).attr('someattr','1');
});
$(document).on("hidden.bs.popover",'[data-toggle="popover"]', function(){
    $(this).attr('someattr','0');
});
$(document).on('click', function (e) {
    $('[data-toggle="popover"],[data-original-title]').each(function () {
        //the 'is' for buttons that trigger popups
        //the 'has' for icons within a button that triggers a popup
        if (!$(this).is(e.target) && $(this).has(e.target).length === 0 && $('.popover').has(e.target).length === 0) {
            if($(this).attr('someattr')=="1"){
                $(this).popover("toggle");
            }
        }
    });
}); 
```

* * *

## 回答 #2

> 赞同：84
> 
> 时间：2013-03-27T21:50:27.563

```
$('html').on('mouseup', function(e) {
    if(!$(e.target).closest('.popover').length) {
        $('.popover').each(function(){
            $(this.previousSibling).popover('hide');
        });
    }
}); 
```

如果您单击弹出框以外的任何位置，这将关闭所有弹出框

**引导程序 4.1 的更新**

```
$("html").on("mouseup", function (e) {
    var l = $(e.target);
    if (l[0].className.indexOf("popover") == -1) {
        $(".popover").each(function () {
            $(this).popover("hide");
        });
    }
}); 
```

* * *

## 回答 #3

> 赞同：43
> 
> 时间：2013-10-28T15:01:45.313

**最简单、最安全的版本**，适用于任何引导版本。

演示：http: [//jsfiddle.net/guya/24mmM/](http://jsfiddle.net/guya/24mmM/)

演示 2：在弹出内容中单击时不关闭 [http://jsfiddle.net/guya/fjZja/](http://jsfiddle.net/guya/fjZja/)

演示 3：多个弹出窗口：http: [//jsfiddle.net/guya/6YCjW/](http://jsfiddle.net/guya/6YCjW/)

* * *

只需调用此行将关闭所有弹出框：

```
$('[data-original-title]').popover('hide'); 
```

* * *

使用以下代码在外部单击时关闭所有弹出窗口：

```
$('html').on('click', function(e) {
  if (typeof $(e.target).data('original-title') == 'undefined') {
    $('[data-original-title]').popover('hide');
  }
}); 
```

上面的代码片段在正文上附加了一个点击事件。当用户单击弹出框时，它的行为将正常。当用户单击不是弹出框的内容时，它将关闭所有弹出框。

**它也适用于使用 Javascript 启动的弹出框，而不是其他一些不起作用的示例。（见演示）**

如果您不想在单击弹出内容内容时关闭，请使用此代码（请参阅第二个演示的链接）：

```
$('html').on('click', function(e) {
  if (typeof $(e.target).data('original-title') == 'undefined' && !$(e.target).parents().is('.popover.in')) {
    $('[data-original-title]').popover('hide');
  }
}); 
```

* * *

## 回答 #4

> 赞同：20
> 
> 时间：2013-09-20T06:21:35.547

使用引导程序 2.3.2，您可以将触发器设置为“焦点”，它就可以工作：

```
$('#el').popover({trigger:'focus'}); 
```

* * *

## 回答 #5

> 赞同：19
> 
> 时间：2015-11-27T08:43:06.653

没有一个所谓的高票解决方案对我有用。当第一次打开和关闭（通过单击其他元素）弹出框后，每个都会导致一个错误，它不会再次打开，直到您在触发链接上单击**两次而不是一次。**

所以我稍微修改了一下：

```
$(document).on('click', function (e) {
    var
        $popover,
        $target = $(e.target);

    //do nothing if there was a click on popover content
    if ($target.hasClass('popover') || $target.closest('.popover').length) {
        return;
    }

    $('[data-toggle="popover"]').each(function () {
        $popover = $(this);

        if (!$popover.is(e.target) &&
            $popover.has(e.target).length === 0 &&
            $('.popover').has(e.target).length === 0)
        {
            $popover.popover('hide');
        } else {
            //fixes issue described above
            $popover.popover('toggle');
        }
    });
}) 
```

* * *

## 回答 #6

> 赞同：18
> 
> 时间：2012-07-28T18:08:27.017

这基本上不是很复杂，但是需要进行一些检查以避免故障。

[演示（jsfiddle）](http://jsfiddle.net/Sherbrow/e6Gt8/)

```
var $poped = $('someselector');

// Trigger for the popover
$poped.each(function() {
    var $this = $(this);
    $this.on('hover',function() {
            var popover = $this.data('popover');
            var shown = popover && popover.tip().is(':visible');
            if(shown) return;        // Avoids flashing
            $this.popover('show');
    });
});

// Trigger for the hiding
 $('html').on('click.popover.data-api',function() {
    $poped.popover('hide');
}); 
```

* * *

## 回答 #7

> 赞同：11
> 
> 时间：2012-07-28T17:40:33.397

我制作了一个 jsfiddle 来向您展示如何做到这一点：

[http://jsfiddle.net/3yHTH/](http://jsfiddle.net/3yHTH/)

这个想法是在单击按钮时显示弹出框，并在单击按钮外部时隐藏弹出框。

# HTML

```
<a id="button" href="#" class="btn btn-danger">Click for popover</a> 
```

# JS

```
$('#button').popover({
    trigger: 'manual',
    position: 'bottom',
    title: 'Example',
    content: 'Popover example for SO'
}).click(function(evt) {
    evt.stopPropagation();
    $(this).popover('show');
});

$('html').click(function() {
    $('#button').popover('hide');
}); 
```

* * *

## 回答 #8

> 赞同：9
> 
> 时间：2017-07-06T11:49:36.330

只需将此属性与元素添加

```
data-trigger="focus" 
```

* * *

## 回答 #9

> 赞同：6
> 
> 时间：2017-09-07T11:19:34.580

**只需将此属性添加到 html 元素即可在下次单击时关闭弹出框。**

```
data-trigger="focus" 
```

来自[https://getbootstrap.com/docs/3.3/javascript/#dismiss-on-next-click的参考](https://getbootstrap.com/docs/3.3/javascript/#dismiss-on-next-click)

* * *

## 回答 #10

> 赞同：5
> 
> 时间：2014-07-22T13:25:29.490

根据[http://getbootstrap.com/javascript/#popovers](http://getbootstrap.com/javascript/#popovers)，

```
<button type="button" class="popover-dismiss" data-toggle="popover" title="Dismissible popover" data-content="Popover Content">Dismissible popover</button> 
```

使用焦点触发器在用户下次单击时关闭弹出框。

```
$('.popover-dismiss').popover({
    trigger: 'focus'
}) 
```

* * *

## 回答 #11

> 赞同：3
> 
> 时间：2012-11-28T11:22:57.640

这已经在[这里](https://stackoverflow.com/questions/8947749/how-can-i-close-a-twitter-bootstrap-popover-with-a-click-from-anywhere-else-on)问过了。我当时给出的相同答案仍然适用：

我也有类似的需求，并找到[了 Lee Carmichael 的 Twitter Bootstrap Popover 的这个很棒的小扩展，称为 BootstrapX - clickover](http://blog.leecarmichael.com/2012/04/bootstrapx-clickover.html)。[他在这里](http://www.leecarmichael.com/bootstrapx-clickover/examples.html)也有一些使用示例。基本上，它将弹出框更改为交互式组件，当您单击页面上的其他位置或弹出框内的关闭按钮时，该组件将关闭。这也将允许同时打开多个弹出框和许多其他不错的功能。

* * *

## 回答 #12

> 赞同：3
> 
> 时间：2013-10-14T14:47:29.777

派对迟到了……但我想我会分享的。我喜欢弹出框，但它的内置功能太少了。我写了一个引导扩展 .bubble() ，这就是我想要的 popover 的一切。四种解除方法。单击外部，打开链接，单击 X，然后单击转义。

它会自动定位，因此它永远不会离开页面。

[https://github.com/Itumac/bootstrap-bubble](https://github.com/Itumac/bootstrap-bubble)

这不是无缘无故的自我推销……我这辈子抓过别人的代码很多次，我想贡献自己的力量。试一试，看看它是否适合你。

* * *

## 回答 #13

> 赞同：3
> 
> 时间：2016-06-03T16:55:42.480

修改后的接受解决方案。我所经历的是，在隐藏了一些弹出框之后，它们必须被点击两次才能再次出现。这是我为确保 popover('hide') 不会在已经隐藏的弹出窗口上被调用所做的工作。

```
$('body').on('click', function (e) {
    $('[data-original-title]').each(function () {
        //the 'is' for buttons that trigger popups
        //the 'has' for icons within a button that triggers a popup
        if (!$(this).is(e.target) && $(this).has(e.target).length === 0 && $('.popover').has(e.target).length === 0) {
            var popoverElement = $(this).data('bs.popover').tip();
            var popoverWasVisible = popoverElement.is(':visible');

            if (popoverWasVisible) {
                $(this).popover('hide');
                $(this).click(); // double clicking required to reshow the popover if it was open, so perform one click now
            }
        }
    });
}); 
```

* * *

## 回答 #14

> 赞同：3
> 
> 时间：2019-05-11T20:46:24.447

此解决方案工作正常：

```
$("body")   .on('click'     ,'[data-toggle="popover"]', function(e) { 
    e.stopPropagation();
});

$("body")   .on('click'     ,'.popover' , function(e) { 
     e.stopPropagation();
});

$("body")   .on('click'  , function(e) {
        $('[data-toggle="popover"]').popover('hide');
}); 
```

* * *

## 回答 #15

> 赞同：2
> 
> 时间：2012-12-20T02:34:42.217

```
jQuery("#menu").click(function(){ return false; });
jQuery(document).one("click", function() { jQuery("#menu").fadeOut(); }); 
```

* * *

## 回答 #16

> 赞同：2
> 
> 时间：2013-01-07T21:04:05.493

您还可以使用事件冒泡从 DOM 中删除弹出窗口。它有点脏，但工作正常。

```
$('body').on('click touchstart', '.popover-close', function(e) {
  return $(this).parents('.popover').remove();
}); 
```

在您的 html 中，将 .popover-close 类添加到应该关闭弹出框的弹出框内的内容中。

* * *

## 回答 #17

> 赞同：2
> 
> 时间：2014-10-31T13:10:29.347

如果您使用选择器委托创建弹出框，“隐藏”方法似乎不起作用，而必须使用“销毁”。

我让它像这样工作：

```
$('body').popover({
    selector: '[data-toggle="popover"]'
});

$('body').on('click', function (e) {
    $('[data-toggle="popover"]').each(function () {
        //the 'is' for buttons that trigger popups
        //the 'has' for icons within a button that triggers a popup
        if (!$(this).is(e.target) && $(this).has(e.target).length === 0 && $('.popover').has(e.target).length === 0) {
            $(this).popover('destroy');
        }
    });
}); 
```

[JSfiddle在这里](http://jsfiddle.net/vdimchev/anhLtjdp/)

* * *

## 回答 #18

> 赞同：2
> 
> 时间：2015-03-02T17:48:47.053

我们发现@mattdlockyer 的解决方案存在问题（感谢您的解决方案！）。当像这样使用 popover 构造函数的选择器属性时......

```
$(document.body').popover({selector: '[data-toggle=popover]'}); 
```

...为 BS3 提出的解决方案将不起作用。相反，它会在其本地创建第二个弹出框实例`$(this)`。这是我们防止这种情况的解决方案：

```
$(document.body).on('click', function (e) {
    $('[data-toggle="popover"]').each(function () {
        //the 'is' for buttons that trigger popups
        //the 'has' for icons within a button that triggers a popup
        if (!$(this).is(e.target) && $(this).has(e.target).length === 0 && $('.popover').has(e.target).length === 0) {
            var bsPopover = $(this).data('bs.popover'); // Here's where the magic happens
            if (bsPopover) bsPopover.hide();
        }
    });
}); 
```

如前所述，`$(this).popover('hide');`由于委托的侦听器，将创建第二个实例。提供的解决方案仅隐藏已经实例化的弹出框。

我希望我能为你们节省一些时间。

* * *

## 回答 #19

> 赞同：2
> 
> 时间：2016-11-05T04:13:07.243

Bootstrap[原生支持这一点](http://getbootstrap.com/javascript/#popovers)：

[JS Bin 演示](http://output.jsbin.com/qetuki)

> **下次单击时关闭所需的特定标记**
> 
> 对于正确的跨浏览器和跨平台行为，您必须使用`<a>`标签，而*不是*`<button>`标签，并且您还必须包含`role="button"`and`tabindex`属性。

* * *

## 回答 #20

> 赞同：2
> 
> 时间：2016-12-19T20:21:02.227

此解决方案在第二次显示弹出框时消除了讨厌的第二次点击

使用 Bootstrap v3.3.7 测试

```
$('body').on('click', function (e) {
    $('.popover').each(function () {
        var popover = $(this).data('bs.popover');
        if (!popover.$element.is(e.target)) {
            popover.inState.click = false;
            popover.hide();                
        }
    });
}); 
```

* * *

## 回答 #21

> 赞同：2
> 
> 时间：2018-02-20T08:31:43.080

我已经尝试了许多以前的答案，对我来说真的没有任何效果，但这个解决方案确实：

[https://getbootstrap.com/docs/3.3/javascript/#dismiss-on-next-click](https://getbootstrap.com/docs/3.3/javascript/#dismiss-on-next-click)

> 他们建议使用锚标签而不是按钮，并注意 role="button" + data-trigger="focus" + tabindex="0" 属性。

前任：

```
<a tabindex="0" class="btn btn-lg btn-danger" role="button" data-toggle="popover" 
data-trigger="focus" title="Dismissible popover" data-content="amazing content">
Dismissible popover</a> 
```

* * *

## 回答 #22

> 赞同：2
> 
> 时间：2021-10-17T08:04:32.470

引导程序 5 更新：

```
$(document).on('click', function (e) {
    var
        $popover,
        $target = $(e.target);

    //do nothing if there was a click on popover content
    if ($target.hasClass('popover') || $target.closest('.popover').length) {
        return;
    }

    $('[data-bs-toggle="popover"]').each(function () {
        $popover = $(this);

        if (!$popover.is(e.target) &&
            $popover.has(e.target).length === 0 &&
            $('.popover').has(e.target).length === 0)
        {
            $popover.popover('hide');
        } 
    });
}) 
```

* * *

## 回答 #23

> 赞同：1
> 
> 时间：2013-10-29T20:25:05.390

我想出了这个：我的场景在同一页面上包含更多弹出框，隐藏它们只会使它们不可见，因此，无法单击弹出框后面的项目。这个想法是将特定的弹出框链接标记为“活动”，然后您可以简单地“切换”活动的弹出框。这样做将完全关闭弹出框 $('.popover-link').popover({ html : true, container: 'body' })

```
$('.popover-link').popover().on 'shown.bs.popover', ->
  $(this).addClass('toggled')

$('.popover-link').popover().on 'hidden.bs.popover', ->
  $(this).removeClass('toggled')

$("body").on "click", (e) ->
  $openedPopoverLink = $(".popover-link.toggled")
  if $openedPopoverLink.has(e.target).length == 0
    $openedPopoverLink.popover "toggle"
    $openedPopoverLink.removeClass "toggled" 
```

* * *

## 回答 #24

> 赞同：1
> 
> 时间：2014-01-17T14:48:45.427

我只是在显示新弹出框之前删除其他活动弹出框（引导程序 3）：

```
$(".my-popover").popover();

$(".my-popover").on('show.bs.popover',function () {
    $('.popover.in').remove();
}); 
```

* * *

## 回答 #25

> 赞同：1
> 
> 时间：2015-03-04T14:40:54.897

@guya 的答案有效，除非您在弹出窗口中有日期选择器或时间选择器之类的东西。为了解决这个问题，这就是我所做的。

```
if (typeof $(e.target).data('original-title') === 'undefined' && 
    !$(e.target).parents().is('.popover.in')) {
        var x = $(this).parents().context;
        if(!$(x).hasClass("datepicker") && !$(x).hasClass("ui-timepicker-wrapper")){
            $('[data-original-title]').popover('hide');
        }
} 
```

* * *

## 回答 #26

> 赞同：1
> 
> 时间：2016-07-25T17:04:42.190

用 3.3.6 测试，第二次点击没问题

```
 $('[data-toggle="popover"]').popover()
            .click(function () {
            $(this).popover('toggle');
        });;

        $(document).on('click', function (e) {
            $('[data-toggle="popover"]').each(function () {
                //the 'is' for buttons that trigger popups
                //the 'has' for icons within a button that triggers a popup
                if (!$(this).is(e.target) && $(this).has(e.target).length === 0 && $('.popover').has(e.target).length === 0) {
                    $(this).popover('hide');
                }
            });
        }); 
```

* * *

## 回答 #27

> 赞同：0
> 
> 时间：2013-03-04T08:20:09.220

演示：http: [//jsfiddle.net/nessajtr/yxpM5/1/](http://jsfiddle.net/nessajtr/yxpM5/1/)

```
var clickOver = clickOver || {};
clickOver.uniqueId = $.now();

clickOver.ClickOver = function (selector, options) {
    var self = this;

    //default values
    var isVisible, clickedAway = false;

    var callbackMethod = options.content;
var uniqueDiv = document.createElement("div");
var divId = uniqueDiv.id = ++clickOver.uniqueId;
uniqueDiv.innerHTML = options.loadingContent();

options.trigger = 'manual';
options.animation = false;
options.content = uniqueDiv;

self.onClose = function () {
    $("#" + divId).html(options.loadingContent());
    $(selector).popover('hide')
    isVisible = clickedAway = false;
};
self.onCallback = function (result) {
    $("#" + divId).html(result);
};

$(selector).popover(options);

//events
$(selector).bind("click", function (e) {
    $(selector).filter(function (f) {
        return $(selector)[f] != e.target;
    }).popover('hide');

    $(selector).popover("show");
    callbackMethod(self.onCallback);

    isVisible = !(clickedAway = false);
});

$(document).bind("click", function (e) {
    if (isVisible && clickedAway && $(e.target).parents(".popover").length == 0) {
        self.onClose();
        isVisible = clickedAway = false;
    } else clickedAway = true;
}); 
```

}

这是我的解决方案。

* * *

## 回答 #28

> 赞同：0
> 
> 时间：2013-08-05T08:40:21.567

这种方法确保您可以通过单击页面上的任意位置来关闭弹出框。如果您单击另一个可单击实体，它会隐藏所有其他弹出框。动画：false 是必需的，否则您将在控制台中收到 jquery .remove 错误。

```
$('.clickable').popover({
 trigger: 'manual',
 animation: false
 }).click (evt) ->
  $('.clickable').popover('hide')
  evt.stopPropagation()
  $(this).popover('show')

$('html').on 'click', (evt) ->
  $('.clickable').popover('hide') 
```

* * *

## 回答 #29

> 赞同：0
> 
> 时间：2013-08-16T04:03:31.220

好的，这是我第一次尝试在 stackoverflow 上实际回答一些问题，所以这里什么都没有：P

似乎不太清楚这个功能在最新的引导程序上是否真的开箱即用（好吧，如果你愿意妥协用户可以点击的*地方*。我不确定你是否必须把'点击悬停”本身，但在 iPad 上，单击用作切换。

最终结果是，您可以在桌面上悬停或单击（大多数用户会悬停）。在触摸设备上，触摸元素会将其抬起，再次触摸会将其取下。当然，这与您的原始要求略有妥协，但至少您的代码现在更干净了:)

> $(".my-popover").popover({ trigger: 'click hover' });

* * *

## 回答 #30

> 赞同：0
> 
> 时间：2014-05-01T13:44:18.853

使用 Matt Lockyer 的代码，我做了一个简单的重置，这样 dom 就不会被隐藏的元素覆盖。

马特的代码： http: [//mattlockyer.com/2013/04/08/close-a-twitter-bootstrap-popover-when-clicking-outside/](http://mattlockyer.com/2013/04/08/close-a-twitter-bootstrap-popover-when-clicking-outside/)

小提琴：http: [//jsfiddle.net/mrsmith/Wd2qS/](http://jsfiddle.net/mrsmith/Wd2qS/)

```
 $('body').on('click', function (e) {
    //hide popover from dom to prevent covering elements
    $('.popover').css('display', 'none');
    //bring popover back if trigger element is clicked
    $('[data-toggle="popover"]').each(function () {
        if ($(this).is(e.target) && $(this).has(e.target).length === 0 && $('.popover').has(e.target).length === 0) {
            $('.popover').css('display', 'block');
        }
    });
    //hide popover with .popover method
    $('[data-toggle="popover"]').each(function () {
        //the 'is' for buttons that trigger popups
        //the 'has' for icons within a button that triggers a popup
        if (!$(this).is(e.target) && $(this).has(e.target).length === 0 && $('.popover').has(e.target).length === 0) {
            $(this).popover('hide');
        }
    });
}); 
```

* * *

## 回答 #31

> 赞同：0
> 
> 时间：2014-07-21T12:55:05.453

试试这个，这将通过单击外部隐藏。

```
$('body').on('click', function (e) {
    $('[data-toggle="popover"]').each(function () {
    //the 'is' for buttons that trigger popups
    //the 'has' for icons within a button that triggers a popup
    if (!$(this).is(e.target) && $(this).has(e.target).length === 0 && $('.popover').has(e.target).length === 0) {
    $(this).popover('hide');
    }
    });
}); 
```

* * *

## 回答 #32

> 赞同：0
> 
> 时间：2014-09-08T21:19:51.610

我在使用 mattdlockyer 的解决方案时遇到问题，因为我正在使用如下代码动态设置弹出链接：

```
$('body').popover({
        selector : '[rel="popover"]'
}); 
```

所以我不得不像这样修改它。它为我解决了很多问题：

```
$('html').on('click', function (e) {
  $('[data-toggle="popover"]').each(function () {
    //the 'is' for buttons that trigger popups
    //the 'has' for icons within a button that triggers a popup
    if (!$(this).is(e.target) && $(this).has(e.target).length === 0 && $('.popover').has(e.target).length === 0) {
        $(this).popover('destroy');
    }
  });
}); 
```

请记住，destroy 会删除元素，因此选择器部分在初始化弹出框时很重要。

* * *

## 回答 #33

> 赞同：0
> 
> 时间：2015-05-15T06:33:32.177

```
$('html').on('click.popover', function (e) {
    var allpopins = $('.popover.in');
    if (allpopins.has(e.target).length > 0 &&
        !$('.btn', allpopins).is(e.target))
        return;
    // recognise pop-up 
    var id = $(e.target).attr('aria-describedby');
    var popin = $("#" + id);
    //on any button click in entire pop-up hide this pop-ups
    $(popin).on(".btn", function () { popin.remove(); });
    // on any place out of entire popup hide all pop-ups 
    $('.popover.in').not(popin).remove();
}); 
```

这是我最好的性能解决方案。干杯。

* * *

## 回答 #34

> 赞同：0
> 
> 时间：2016-06-21T14:42:35.233

答案非常好，只是添加一个角度指令，以防你像我一样使用角度：

```
app.directive('popover', ['$document', function($document) {
    return {
        restrict: 'EA',
        link: function(scope, elem, attrs) {
            $(document).ready(function() {
                $('[data-toggle="popover"]').popover();
            });

            elem.bind('click', function(e) {
                $('#notification').popover('toggle');
            })

            $('body').on('click', function (e) {
                //the 'is' for buttons that trigger popups
                //the 'has' for icons within a button that triggers a popup
                if (!elem.is(e.target)
                    && elem.has(e.target).length === 0
                    && $('.popover').has(e.target).length === 0) {
                    elem.popover('hide');
                }
            });
        }
    };
}]); 
```

html代码：

```
<a popover tabindex="0" role="button"
   id="notification"
   data-toggle="popover" data-trigger="manual"
   data-container="body" data-placement="bottom"
   data-content="This is a popover">
   Popover button
</a> 
```

它应该像 use 一样简单`data-trigger='click focus'`，因为根据引导程序：

> 弹出框是如何触发的 - 点击 | 悬停 | 焦点 | 手动的。您可以传递多个触发器；用空格分隔它们。手动不能与任何其他触发器结合使用。

但是，由于未知原因，同时使用单击和聚焦对我不起作用，而是我必须手动切换它。

* * *

## 回答 #35

> 赞同：0
> 
> 时间：2017-01-06T05:34:53.217

```
$(document).on('click', function(e) {
  $('[data-toggle="popover"]').each(function() {
    if (!$(this).is(e.target) && $(this).has(e.target).length === 0 && $('.popover').has(e.target).length === 0) {
      $(this).popover('hide').data('bs.popover').inState.click = false
    }

  });
}); 
```

* * *

## 回答 #36

> 赞同：0
> 
> 时间：2017-04-18T07:10:55.057

已接受答案的最新更新存在问题：如果您启用了一些工具提示并打开一个弹出框，然后单击具有工具提示的元素，则工具提示的文本将显示为弹出框。

为了防止这种情况，只需添加

```
 if ($(this).data('bs.popover')) { 
```

在 if 语句中（或将其与 && 连接到 if 语句中）

```
// only show one popover at the time and hide on clicking outside
$(document).on('click', function (e) {
    $('[data-toggle="popover"],[data-original-title]').each(function () {
        //the 'is' for buttons that trigger popups
        //the 'has' for icons within a button that triggers a popup
        if (!$(this).is(e.target) && $(this).has(e.target).length === 0 && $('.popover').has(e.target).length === 0) {
            if ($(this).data('bs.popover')) {
                (($(this).popover('hide').data('bs.popover') || {}).inState || {}).click = false  // fix for BS 3.3.6
            }
        }
    });
}); 
```

* * *

## 回答 #37

> 赞同：0
> 
> 时间：2019-03-29T09:50:22.867

我找到了一个很好且简单的解决方案来解决这个问题。这样做，我们只在需要时激活一个事件监听器。此外，我们没有出现弹出窗口不出现的问题，因为解除弹出窗口的事件同时触发。

将弹出框添加到 HTML

```
 <input id="popoverId" type="text" data-toggle="popover" data-trigger="manual" data-content="Popover content"> 
```

需要时显示弹出框。

```
$('#popoverId').popover('show'); 
```

将此侦听器添加到您的 Javascript。这个监听器将在弹出框显示后立即触发，并将一个监听器附加到主体上，当用户单击页面主体上的任何位置时，它将隐藏弹出框，然后删除事件监听器，直到再次显示弹出框。

```
$('#popoverId').on('shown.bs.popover', function () {
    $('body').click(function () {
        $('#popoverId').popover('hide');
        $('body').off();
    });
}); 
```

* * *

## 回答 #38

> 赞同：0
> 
> 时间：2020-10-19T04:36:03.447

根据最高的两个答案，我有一个小问题：

```
<span class="btn btn-info btn-minier popover-info" data-rel="popover"
                                              data-placement="bottom" data-html="true" title=""
                                              data-content="popover-content"
                                              data-original-title="popover-title">
                                            <i class="ace-icon fa fa-info smaller-100"></i>
                                        </span> 
```

```
 $('[data-rel=popover]').popover({html: true});
            $(document).on("shown.bs.popover", '[data-rel=popover]', function () {
                $('[data-rel="popover"][popover-show="1"]').popover('hide');
                $(this).attr('popover-show', '1');
            });
            $(document).on("hidden.bs.popover", '[data-rel=popover]', function () {
                if ($(this).attr('popover-show') === '0') {
                    // My important fix: using bootstrap 3.4.1, if hide popover by .popover('hide') and click to show, popover internal treat it is already shown and dispatch hidden event immediately without popover anything.
                    $(this).popover('toggle');
                } else {
                    $(this).attr('popover-show', '0');
                }
            });
            $('html').on('click', function (e) {
                if (typeof $(e.target).data('original-title') == 'undefined'
                    && typeof $(e.target).parent().data('original-title') == 'undefined'
                    && !$(e.target).parents().is('.popover.in')) {
                    $('[data-rel="popover"][popover-show="1"]').popover('hide');
                }
            }); 
```

* * *

## 回答 #39

> 赞同：0
> 
> 时间：2021-06-26T07:59:33.987

对于正在寻找适用于 Bootstrap 5 而没有 jQuery 的解决方案的任何人，即使弹出框是动态生成的（即手动触发）：

```
document.querySelector('body').addEventListener('click', function(e) {
    var in_popover = e.target.closest(".popover");

    if (!in_popover) {
        var popovers = document.querySelectorAll('.popover.show');

        if (popovers[0]) {
            var triggler_selector = `[aria-describedby=${popovers[0].id}]`;

            if (!e.target.closest(triggler_selector)) {
                let the_trigger = document.querySelector(triggler_selector);
                if (the_trigger) {
                    bootstrap.Popover.getInstance(the_trigger).hide();
                }
            }
        }
    }
}); 
```

* * *

## 回答 #40

> 赞同：-2
> 
> 时间：2016-07-27T14:30:26.977

```
$("body").find('.popover').removeClass('in'); 
```

* * *

## 回答 #41

> 赞同：-2
> 
> 时间：2020-10-06T10:56:13.967

只需设置**data-trigger="focus click"**

# deployment - 如何使用 Composer、Symfony2 和 Capistrano 之类的东西进行部署？

> ID：11703097
> 
> 赞同：4
> 
> 时间：2012-07-28T17:16:23.623
> 
> 标签：deployment, symfony, workflow, capistrano, composer-php

我试图找出一个方便的工作流程，以便使用像 Capistrano 这样的部署器，以及 Symfony 和 Composer。

我面临的一个问题是 Capistrano 要求项目位于存储库 (git) 中并且服务器可以访问它，但是如果我使用 Composer，我该如何处理呢？Composer 是 Symfony 2.1+ 的默认依赖管理器，我们不应该在 repo 中包含 vendor/（我们在 .gitignore 中指定）。

我还没用过Capistrano，我猜可以添加命令在远程生产服务器上运行，例如：'composer update nothing'来刷新锁文件。但是我怎么知道它有效呢？这可以通过向配方添加更多命令来检查吗？

如果您知道任何其他部署者，请告诉我。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-28T23:06:47.673

使用[capifony](http://capifony.org/)。这是 Symfony 项目的 capistrano 食谱的集合。阅读有关它的更多信息并从官方文档中了解如何使用它：http: [//capifony.org/](http://capifony.org/)

Capifony 支持作曲家。您必须手动启用它（选项[use_composer](https://github.com/everzet/capifony/blob/master/lib/symfony2.rb#L35)）。

# mysql - mysql 错误 1426 (42000)：为列“时间”指定的精度 14 太大。最大妈妈是 6

> ID：11703098
> 
> 赞同：0
> 
> 时间：2012-07-28T17:16:25.120
> 
> 标签：mysql

家伙。当我尝试创建一个时间戳类型的表时，我遇到了一个奇怪的问题。

```
create table `test`
 ( `time` timestamp(14) ); 
```

*错误 1426 (42000)：为列“时间”指定的精度 14 太大。最大值为 6。*

我认为这`14`是一个字节长度的存储。但这似乎是时间精度，因为 6 = 微秒（1/1000000），2012-07-29 00:37:46。***000000***

任何人都可以解释一下吗？我没有在在线文档中找到它！谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-28T17:18:15.993

时间戳列使用[unix 时间戳](http://www.unixtimestamp.com/index.php)格式，您无法控制它们的精度，它们始终为 4 个字节（如果可以为空，则为 5 个字节）。尝试

```
create table `test` ( `time` timestamp ); 
```

# javascript - JSON 和 JS 回调函数

> ID：11703101
> 
> 赞同：1
> 
> 时间：2012-07-28T17:16:28.970
> 
> 标签：javascript, jquery, json, callback, jsonp

在获取和解析 JSON 信息方面，我在理解 JS 回调时遇到了一些问题。

我想要做的是使用这个远程代码来填充选择下拉列表。

```
setCategories({
    "categories": ["Billing", "Gameplay", "Bugs", "Rules & Policies", "Technical Support"]
}); 
```

上面的这段代码来自一个远程 .js 文件，这是文件的全部内容。我现在无法链接到该文件。

现在我正在使用我所知道的来访问 JSON 信息

```
$.ajax({
          url: "http://web.ccpgamescdn.com/common/frontendtest/categories.js",
          dataType: 'jsonp',
          data: data,
          success: function(data, textStatus, jqxhr) {
             console.log(data); //data returned

          }
        }); 
```

这如何从控制台返回此错误消息

> 未捕获的 ReferenceError：未定义 setCategories

我知道如何解析一个简单的 json 文件，但是这个 JS 回调超出了我的知识范围，我不确定如何使用它。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-28T17:20:30.900

函数`setCategories`真的存在吗？如果不是，或者不是全球性的，那就是你的问题。

使用 jQuery 最好让 jQuery 管理 JSON-P 回调的名称，但是对于 Web 服务对于它期望的回调函数的名称不灵活的情况，您可以`jsonpCallback`在构建 AJAX 请求时通过参数来适应这一点：

```
$.ajax({
    ....
    jsonpCallback: 'setCategories'
    ....
}); 
```

# c# - c# File.Copy from \\127.0.0.1

> ID：11703107
> 
> 赞同：0
> 
> 时间：2012-07-28T17:16:56.707
> 
> 标签：c#, .net, file-io

在 C# (.NET 2.0) 中，我有以下代码行：

```
File.Copy(fileName, @"C:\Temp\someDir\SomeFile.jpg"); 
```

其中文件名是“\\127.0.0.1\someDir\someFile.jpg”。我收到一个 IOException，上面写着“系统检测到可能尝试破坏安全性。请确保您可以联系对您进行身份验证的服务器。”

知道这里发生了什么吗？

谢谢，斯科特

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-28T21:30:17.393

File 类接受可以是服务器或共享的[UNC路径的路径。](http://compnetworking.about.com/od/windowsnetworking/g/unc-name.htm)因此，在您的情况下， File.Copy 假设 fileName 是服务器或共享的 UNC 路径，因此复制方法会引发异常

```
File.Copy("\\127.0.0.1\someDir\someFile.jpg", @"C:\Temp\someDir\SomeFile.jpg"); 
```

我建议您尝试使用[WebClient.UploadFile](http://msdn.microsoft.com/en-us/library/36s52zhs.aspx)

# java - HTMLUnit 解析 aspx

> ID：11703112
> 
> 赞同：2
> 
> 时间：2012-07-28T17:17:24.693
> 
> 标签：java, asp.net, html-parsing, htmlunit

我正在尝试使用 HTMLUnit解析以下页面[http://www.vermittlerregister.org 。](http://www.vermittlerregister.org)但问题是，我没有得到请求的页面。相反，我得到了该网站的超时页面，这对我来说没有任何意义。

```
final WebClient webClient = new WebClient();
webClient.getPage("http://www.vermittlerregister.org"); 
```

我通过控制台得到的唯一警告是：

> com.gargoylesoftware.htmlunit.IncorrectnessListenerImpl 通知
> 警告：遇到过时的内容类型：'application/x-javascript'。

这不应该导致根据请求获取不同页面的问题。

顺便说一句：如果我使用标准的 JAVA Api java.net.URL，我会得到正确的页面内容。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-07T09:20:11.267

您正在获取的页面有一条刷新指令 - 半小时后用户会被重定向到超时消息：

```
<meta id="ctl00_MetaRefresh" http-equiv="REFRESH" 
content="1800;url=http://www.vermittlerregister.org:80//system/logout.aspx?timeout=true" /> 
```

HtmlUnit 需要决定是给你当前页面，还是刷新要发送给你的页面。它的默认行为是立即遵循所有刷新指令（`WebClient`使用[`ImmediateRefreshHandler`](http://htmlunit.sourceforge.net/apidocs/com/gargoylesoftware/htmlunit/ImmediateRefreshHandler.html)）。您可以将其更改为 a [`NiceRefreshHandler`](http://htmlunit.sourceforge.net/apidocs/com/gargoylesoftware/htmlunit/NiceRefreshHandler.html)，它允许您根据延迟时间选择要遵循的刷新：

```
final WebClient webClient = new WebClient();
webClient.setRefreshHandler(new NiceRefreshHandler(5));
webClient.getPage("http://www.vermittlerregister.org"); 
```

`WebClient`如果延迟为 5 秒或更短，这会告诉刷新，并且会忽略页面上的 30 分钟刷新指令。

# android - 发送电子邮件时出现错误“没有应用程序可以执行此操作”

> ID：11703114
> 
> 赞同：2
> 
> 时间：2012-07-28T17:17:40.533
> 
> 标签：android, android-intent

这是代码，除了没有应用程序可以执行此操作“错误之外，一切正常。请让我知道代码中的错误是什么。

```
 public void sends(View button) {   
        // Do click handling here  

        final EditText date = (EditText) findViewById(R.id.editText1);  
        String da = date.getText().toString();  

        final EditText phone = (EditText) findViewById(R.id.editText2);  
        String ph = phone.getText().toString();  

        final EditText nameplate = (EditText) findViewById(R.id.editText3);  
        String np = nameplate.getText().toString(); 

        final EditText issue = (EditText) findViewById(R.id.editText4);  
        String i = issue.getText().toString(); 

        StringBuilder s= new StringBuilder(100);
        s.append(da);
        s.append(". ");
        s.append(ph);
        s.append(". ");
        s.append(np);
        s.append(". ");
        s.append(i);

        String st=s.toString();

        Intent emailIntent = new Intent(android.content.Intent.ACTION_SEND); 
        //emailIntent.setType("plain/text");
        //startActivity(emailIntent); 
        startActivity(Intent.createChooser(emailIntent, "Send your email in:"));

        Intent emailIntentt= new Intent(android.content.Intent.ACTION_SEND);  

        String aEmailList[] = { "shreyas.tallani@gmail.com" };  

        emailIntentt.putExtra(android.content.Intent.EXTRA_EMAIL, aEmailList);  
        //emailIntentt.putExtra(android.content.Intent.EXTRA_CC, aEmailCCList);  
        //emailIntentt.putExtra(android.content.Intent.EXTRA_BCC, aEmailBCCList);  

        emailIntentt.putExtra(android.content.Intent.EXTRA_SUBJECT, "Feedback");  

        emailIntentt.setType("message/rfc822");  
        emailIntentt.putExtra(android.content.Intent.EXTRA_TEXT, st);

        startActivityForResult(emailIntentt, REQUEST_SEND_MAIL);
    } 
    public static final int REQUEST_SEND_MAIL = 1;

    public void onActivityResult(int requestCode, int resultCode, Intent data) {

        switch (requestCode) {
        case REQUEST_SEND_MAIL:
            // When the request to send mail returns
            if (resultCode == Activity.RESULT_OK) {
                Toast.makeText(this, "message successfully sent", Toast.LENGTH_SHORT).show();

            } else {
                Toast.makeText(this, "sorry", Toast.LENGTH_SHORT).show();
            }

            }} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2016-04-04T21:37:45.613

这帮助了我：

```
String email = person.getEmail();
Intent intent = new Intent(Intent.ACTION_SENDTO);
intent.setType("message/rfc822");
intent.putExtra(Intent.EXTRA_EMAIL, new String[]{email});
intent.putExtra(Intent.EXTRA_SUBJECT, "Happy Birthday!");
intent.setData(Uri.parse("mailto:" + email));
context.startActivity(Intent.createChooser(intent, "Send e-mail to")); 
```

关于 Uri.fromParts() 方法有很多答案，但经过数小时的头痛 Uri.parse();

通过单击我可以在手机上安装所有电子邮件应用程序。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-28T18:31:41.620

我会说你的问题是`emailIntentt.setType("message/rfc822");`。将类型设置为`"plain/text"`。

也不要启动两个活动，一个就足够了，只需使用选择器。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-01T12:04:28.440

删除 startActivity() 或 startActivityForResult()

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-28T18:23:59.730

你有`startActivity()`和`startActivityForResult`！您必须有一个。这就是为什么第一个意图被触发并且没有应用程序可以捕获它的原因。

试试这个：

```
Intent emailIntent = new Intent(android.content.Intent.ACTION_SEND);   
String aEmailList[] = { "shreyas.tallani@gmail.com" };  

emailIntent.setType("plain/text");
emailIntent.putExtra(android.content.Intent.EXTRA_EMAIL, aEmailList); 
emailIntent.putExtra(android.content.Intent.EXTRA_SUBJECT, "Feedback");   
emailIntent.putExtra(android.content.Intent.EXTRA_TEXT, st);

startActivityForResult(emailIntent, REQUEST_SEND_MAIL); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-30T10:55:09.833

我给你的 2 条建议：

1、在谷歌API目标模拟器中运行或在设备中运行

2，在你运行这个应用程序之前先登录你的电子邮件帐户:)

干杯

# php - .htaccess 重写规则不发送数据

> ID：11703116
> 
> 赞同：0
> 
> 时间：2012-07-28T17:18:07.180
> 
> 标签：php, apache, .htaccess

我有以下规则 -

```
Options +FollowSymLinks  
RewriteEngine On  
RewriteCond %{REQUEST_FILENAME} !-f  
RewriteCond %{REQUEST_FILENAME} !-d  
RewriteRule (.*) index.php?url=$1 [L] 
```

在尝试获取 $_GET['url'] 时，它什么也没给我，我启用了 mod_rewrite 但仍然如此。
例如，如果我输入这个 url localhost//index/main $url 是空的，虽然它应该是“index/main”

ubuntu LTS 12.04 apache2

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-28T20:32:14.443

尝试在 .htaccess 文件顶部添加这一行：

> 选项 - 多视图

# java - 在插件存储库中找不到插件 - 当我的公司 Nexus 关闭时如何解决问题？

> ID：11703124
> 
> 赞同：6
> 
> 时间：2012-07-28T17:19:04.273
> 
> 标签：java, maven, hadoop, nexus

我正在尝试在`Hadoop`本地进行建设，当我这样做时

```
$ mvn  -U clean install -Pdist -Dtar -Ptest-patch 
```

如前所述 - [http://wiki.apache.org/hadoop/HowToSetupYourDevelopmentEnvironment](http://wiki.apache.org/hadoop/HowToSetupYourDevelopmentEnvironment)

```
[ERROR] Error resolving version for plugin 'org.apache.maven.plugins:maven-javadoc-plugin' from the repositories [local (/Users/me/.m2/repository), nexus (http://beefy.myorg.local:8081/nexus/content/groups/public)]: Plugin not found in any plugin repository -> [Help 1] 
```

当我在控制台上看到日志时，我看到

```
[INFO] Apache Hadoop Distribution
[INFO] Apache Hadoop Client
[INFO] Apache Hadoop Mini-Cluster
[INFO]                                                                         
[INFO] ------------------------------------------------------------------------
[INFO] Building Apache Hadoop Main 3.0.0-SNAPSHOT
[INFO] ------------------------------------------------------------------------
Downloading: http://beefy.myorg.local:8081/nexus/content/groups/public/org/apache/maven/plugins/maven-javadoc-plugin/maven-metadata.xml
[WARNING] Could not transfer metadata org.apache.maven.plugins:maven-javadoc-plugin/maven-metadata.xml from/to nexus (http://beefy.myorg.local:8081/nexus/content/groups/public): Error transferring file: Operation timed out 
```

由于`nexus`我的公司倒闭了，有什么办法可以解决这个问题并让 hadoop 构建？

**更新**

在我的项目pom中添加后`repository`，它仍然失败

```
[ERROR] Failed to execute goal on project hadoop: Could not resolve dependencies for project groupId:hadoop:jar:master-SNAPSHOT: Failed to collect dependencies for [org.apache.hadoop:hadoop-core:jar:0.20.2 (compile)]: Failed to read artifact descriptor for org.apache.hadoop:hadoop-core:jar:0.20.2: Could not transfer artifact org.apache.hadoop:hadoop-core:pom:0.20.2 from/to nexus (http://beefy.myorg.local:8081/nexus/content/groups/public): Error transferring file: Operation timed out -> [Help 1] 
```

这是`pom.xml`

```
 <repositories>
        <repository>
            <id>mvnrepository</id>
            <url>http://mvnrepository.com/artifact/</url>
        </repository>

    </repositories>
    <dependencies>
        <dependency>
            <groupId>org.apache.hadoop</groupId>
            <artifactId>hadoop-core</artifactId>
            <version>0.20.2</version>
        </dependency>
    </dependencies> 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-07-28T17:56:15.257

如果您可以访问互联网，只需声明一个新的 maven 存储库（在您的 pom 或您的 settings.xml 中）：

```
 <repositories>
    <repository>
      <id>your-internal-repo</id>
      <url>http://beefy.myorg.local:8081/nexus/content/</url>
    </repository>

    <repository>
      <id>mvnrepository</id>
      <url>http://mvnrepository.com/artifact/</url>
    </repository>
  </repositories> 
```

此配置将首先尝试从您的存储库下载，然后失败。并且 maven 将尝试所有声明的存储库，直到它工作....或不工作:)

实际上，您的内部存储库是一个代理，它缓存远程的（mvnrepository）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-28T17:48:55.073

[使用maven 安装插件](http://maven.apache.org/plugins/maven-install-plugin/usage.html)下载依赖项并将它们放置在您的 m2 存储库中

# javascript - 在 Sharepoint 中设置框架

> ID：11703125
> 
> 赞同：1
> 
> 时间：2012-07-28T17:19:06.613
> 
> 标签：javascript, html, sharepoint

我正在尝试将小应用程序从`html/javascript`一个页面移植到`Sharepoint`另一个页面。我是 SP 世界的新手，非常感谢您的帮助。

我正在尝试两个并排有两个框架**50%/50%**（页面视图 Web 部件？）和一个控制框架（**高度 80%/20%**）。

所以我的问题是我应该怎么做？我尝试使用表格，但我必须以像素为单位设置行高，这样对我来说效果不太好。我应该使用区域吗？或者是其他东西？

另外，我如何将网址传递给页面视图 Web 部件并显示它（例如`.src`在中设置框架`html`）？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-02T19:44:39.467

由于您熟悉 HTML/Javascript，您应该使用[共享点设计](http://sharepoint.microsoft.com/en-us/product/related-technologies/pages/sharepoint-designer.aspx)器来创建和修改自定义页面，这将使您可以完全控制页面区域。

您可以创建一个页面，然后从页面布局中分离 - 这将从您选择的页面布局中复制标记并允许您直接编辑页面。从那里，我会做一些简单的事情，比如为您的（50/50 区域）设置 2 个 div，然后为 20% 区域设置 1 个控制 div，并使用 CSS 设置框架样式。

# ruby-on-rails-3 - css 资产未在生产中预编译

> ID：11703127
> 
> 赞同：0
> 
> 时间：2012-07-28T17:19:44.587
> 
> 标签：ruby-on-rails-3, production-environment

问题，如何让资产管道编译所有 .css 和 .js？

我试过了

```
config.assets.precompile += %w(*.css, *.js) 
```

这让所有的 .js 都进行了预编译。但由于某种原因，.css 文件没有编译。

建议？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-29T17:03:14.967

对于任何试图自己做这件事的人，答案与选择器的格式有关。预编译采用一个选择器数组，选择器应该是字符串，所以你可以这样做

```
config.assets.precompile += ['*.css', '*.js'] 
```

让所有 css 和 js 文件进行预编译。您可以将此逻辑扩展为更加个性化，例如，我能够将所有 css 分组为 3 个清单文件，但仍然发现能够包含任何 .js 更具可扩展性，尽管有几个清单 .js 文件在最受欢迎的页面上拨打更少的电话。

```
config.assets.precompile += ['logged.css','forum.css','editor.css', '*.js'] 
```

# javascript - Javascript 连续重定向

> ID：11703128
> 
> 赞同：-1
> 
> 时间：2012-07-28T17:19:53.630
> 
> 标签：javascript, gps

我有这个页面加载一次很好......

基本上它正在拉一个gps位置，然后我希望它每10秒进行一次重定向以再次拉取gps数据......

但它不会每 10 秒不断重定向...

怎么了-从外观上看它应该...

```
 <script type="text/javascript"> 

// Get a single location update
function getLocationConstant()
{
    if(navigator.geolocation)
    {
        navigator.geolocation.getCurrentPosition(onGeoSuccess,onGeoError,{enableHighAccuracy:true,maximumAge:0});
    } else {
        alert("Your browser or device doesn't support Geolocation");
    }
}

// If we have a successful location update
function onGeoSuccess(event)
{
    document.getElementById("Latitude").value =  event.coords.latitude; 
    document.getElementById("Longitude").value = event.coords.longitude;
    document.getElementById("location").href = "track2.cfm?track=s&GPSLat=" + event.coords.latitude + "&GPSLong=" + event.coords.longitude;

    redirectUrl = "track2.cfm?track=y&GPSLat=" + event.coords.latitude + "&GPSLong=" + event.coords.longitude; 

    gpslat = event.coords.latitude; 
    gpslong = event.coords.longitude; 

}

// If something has gone wrong with the geolocation request
function onGeoError(event)
{
    alert("Error code " + event.code + ". " + event.message);
}

function redirect() 
{ 
    window.location = redirectUrl; 
} 
setTimeout(redirect,10000); 

 </script> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-28T17:31:33.283

这里有几个问题。

1）就像 jay c 说的，一个是回调只运行一次。要解决这个问题，您可以执行 setInterval 所说的操作，或者，在重定向结束时，您只需再次设置计时器……</p>

```
function redirect() {
    window.location = redirectUrl;
    setTimeout(redirect, 10000);
} 
```

2) 如果位置没有改变，URL 总是相同的。浏览器可能会注意到这一点并且不会刷新 url。您可以通过一些窗口重新加载操作来强制它，或者您可以通过附加时间戳来保证 url 的新鲜度。

```
var currentTime = new Date();
var milliseconds = currentTime.getTime();

redirectUrl = "track2.cfm?track=y&GPSLat=" + event.coords.latitude + "&GPSLong=" + event.coords.longitude + "&time=" + milliseconds; 
```

# python - 我的代码出现错误，出现尝试异常

> ID：11703131
> 
> 赞同：0
> 
> 时间：2012-07-28T17:20:07.173
> 
> 标签：python

```
try:
    for v in d.values():
        for item in v[1:]:
            if item != v[0]:
except ValueError:
    raise ValueError('this is inconsistent') 
```

我得到以下输出-

```
except ValueError: 
```

^ IndentationError: 需要一个缩进块

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-28T17:21:42.943

如果这是您的整个代码片段，那么在 line 之后`if item != v[0]:`，没有语句。你需要在那里放一个。

如果您想*引发*异常，则不需要`try...except`围绕该代码段的块。你可以这样框定它：

```
for v in d.values():
    for item in v[1:]:
        if item != v[0]:
            raise ValueError('this is inconsistent') 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-28T17:26:04.767

该错误可能是因为程序在 if item != v[0]: 之后期待一个语句，但它没有找到任何语句并将除了 ValueError: 行视为不在其正确缩进处的下一行。

# android - 如何在以下帮助下开始主要活动 ?

> ID：11703143
> 
> 赞同：6
> 
> 时间：2012-07-28T17:21:45.237
> 
> 标签：android, intentfilter

当我以这种方式宣布我的主要活动时：

```
<activity android:name=".MyActivity"
          android:configChanges="orientation|keyboardHidden"
          android:windowSoftInputMode="stateHidden"
          android:screenOrientation="portrait">
    <intent-filter>
          <action android:name="android.intent.action.MAIN"/>
          <action android:name="com.package.name.MyActivity"/>
          <category android:name="android.intent.category.LAUNCHER" />
    </intent-filter>
</activity> 
```

`No Activity found to handle Intent { act=com.package.name.MyActivity flg=0x24000000 }`然后当我使用此代码时出现错误：

```
Intent intent = new Intent("com.package.name.MyActivity");
intent.addFlags(Intent.FLAG_ACTIVITY_SINGLE_TOP | Intent.FLAG_ACTIVITY_CLEAR_TOP);
context.startActivity(intent); 
```

如果不使用`Intent i = new Intent(this, MyActivity.class);`，我该如何在`action`for的帮助下做到这一点`<intent-filter>`

**没有帮助：**

```
 <intent-filter>
      <action android:name="android.intent.action.MAIN"/>
      <action android:name="com.package.name.VIEW"/>
      <category android:name="android.intent.category.LAUNCHER" />
 </intent-filter> 
```

代码：

```
Intent intent = new Intent("com.package.name.VIEW");
intent.addFlags(Intent.FLAG_ACTIVITY_SINGLE_TOP | Intent.FLAG_ACTIVITY_CLEAR_TOP);
context.startActivity(intent); 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-07-28T18:27:00.907

尝试指定两个意图过滤器：

```
<activity android:name=".MyActivity"
          android:configChanges="orientation|keyboardHidden"
          android:windowSoftInputMode="stateHidden"
          android:screenOrientation="portrait">
    <intent-filter>
          <action android:name="android.intent.action.MAIN"/>
          <category android:name="android.intent.category.LAUNCHER" />
    </intent-filter>
    <intent-filter>
          <action android:name="com.package.name.MyAction"/>
          <category android:name="android.intent.category.DEFAULT"/>
    </intent-filter>
</activity> 
```

然后您可以使用操作名称启动活动：

```
Intent intent = new Intent("com.package.name.MyAction");
context.startActivity(intent); 
```

或类名：

```
Intent intent = new Intent(context, MyActivity.class);
context.startActivity(intent); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-28T17:25:03.133

标签中的`name`属性`action`是动作的名称，而不是您的活动的名称。删除线，

```
 <action android:name="com.package.name.MyActivity"/> 
```

由于意图过滤器标签位于您的活动标签下，因此系统已经知道它已应用于该活动。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-28T17:31:52.807

你的班级名称不是`com.package.name.MyActivity`，它是`com.package.name.general.MyActivity`。

避免这个错误的一个简单方法是使用类而不是包名来创建新的 Intent。您可以使用自动完成来填写正确的课程。

您说您不想通过指定类来创建 Intent。我想知道为什么不——我认为这是一个好方法。

# custom-controls - NSSegmentedControl setFrame 被忽略？（自定义 NSSegmentedControl）

> ID：11703145
> 
> 赞同：0
> 
> 时间：2012-07-28T17:22:12.937
> 
> 标签：custom-controls, height, customization, frame, nssegmentedcontrol

我想自定义一个 NSSegmentedControl。我想做的第一件事是改变控制器的高度。在界面生成器中，NSSegmentedControl 的高度字段被禁用。所以我简单地尝试改变它的高度，在我的代码中改变它的框架

```
[_scSeedChoice setFrame:NSMakeRect(_scSeedChoice.frame.origin.x, _scSeedChoice.frame.origin.y, _scSeedChoice.frame.size.width, 40)]; 
```

但什么也没发生。

我是否错过了什么或完全不可能更改 NSSegmentedControl。

如果我做不到，我会使用 2 NSButton 实现我自己的墙。

谢谢...（为您未来的帮助）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-19T22:08:58.380

标准 Aqua 控件具有固定高度：标题栏为 22 像素，按钮（我相信）为 17 像素，分段控件也是如此。也许在其中设置图像可能会有所帮助。

# jquery - JQuery没有方法'按钮'

> ID：11703148
> 
> 赞同：0
> 
> 时间：2012-07-28T17:22:35.710
> 
> 标签：jquery, asp.net, jquery-ui

我已经检查了按钮文档，但没有找到我正在寻找的确切内容。

我刚刚生成了一个新的 jquery.ui 脚本/css，以便我使用的文件上传将使用与我的网站相同的主题。

这是HTML

```
<div id="fileupload">
<form action="/Webservices/FileTransferHandler.ashx" method="post" enctype="multipart/form-data">
    <div class="fileupload-buttonbar">
        <label class="fileinput-button">
            <span>Add files...</span>
            <input type="file" name="files[]" multiple="multiple" />
        </label>
        <button type="button" class="delete button">Delete all files</button>
        <div class="fileupload-progressbar"></div>
    </div>
</form>
<div class="fileupload-content">
    <table class="files"></table>
</div> 
```

以及抛出异常的 Jquery

```
_initFileUploadButtonBar: function () {
        var fileUploadButtonBar = this.element.find('.fileupload-buttonbar'),
            filesList = this.element.find('.files'),
            ns = this.options.namespace;
        fileUploadButtonBar
            .addClass('ui-widget-header ui-corner-top');
        this.element.find('.fileinput-button').each(function () {
            var fileInput = $(this).find('input:file').detach();
            $(this).button({icons: {primary: 'ui-icon-plusthick'}})
                .append(fileInput);
        }); 
```

这是发生在 .button() 调用上的异常： Uncaught TypeError: Object [object Object] has no method 'button'

有任何想法吗？你现在不能在标签上调用 .button() 吗？Jquery UI 版本在我的主题更改中从 1.8.13 更改为 1.8.22，jquery 从 1.6.1 更改为 1.7.2

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-02T19:00:27.977

Utkanos 有正确的答案，我只是在这里重复以将问题标记为已关闭。

我没有声明 .button 方法，我需要确保将 jquery.ui.button.js 也包含在 UI 包中。

# html - 使用 Perl 在 HTML 表格中创建超链接

> ID：11703150
> 
> 赞同：2
> 
> 时间：2012-07-28T17:23:10.867
> 
> 标签：html, perl

我正在使用该模块`HTML::Template`创建一个像这样的格式化表（使用 array `@rows`）：

```
my $tmpl = HTML::Template->new(filehandle => \*DATA);
$tmpl->param(ROWS => \@rows); 
print $tmpl->output;

__DATA__ 
<table border="1"> 
<TMPL_LOOP ROWS> 
  <tr> 
  <TMPL_LOOP CELLS> 
    <td><TMPL_VAR CELL></td> 
  </TMPL_LOOP>
  </tr> 
</TMPL_LOOP>
</table> 
```

但是，我现在想创建表中某些元素的超链接。元素链接到的地址取决于该单元格的文本以及表格的列。 **示例：** 如果一行有元素`Home, Office, Travel, Play`，那么我希望它们链接到`www.mywebsite.com/Home`，`www.mywebsite2.com/Office`并且`www.mywebsite3.com/Play`没有超链接`Travel`。如何在 HTML::Template 创建的表中创建此类超链接？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-28T19:26:37.797

**编辑：**根据更新的问题和问题作者的评论重写了使用[Template::Toolkit的答案。](http://metacpan.org/module/Template%3a%3aToolkit)

```
# Your app sets up whatever data structure it wants to pass to the tempalte, for example,
my @rows = [
    [ # cells in row #1
        { url => 'www.mywebsite.com/Home', label => 'Home' },
        { url => 'www.mywebsite2.com/Office', label => 'Office' },
    ],
    [ # cells in row #2
        { url => 'www.mywebsite3.com/Play', label => 'Play' },
        { label => 'Travel' },
    ],
];

# No need to print, prints to STDOUT automatically by default
my $tmpl = Template->new;
$tmpl->process(\*DATA, { rows => \@rows })
    || die $tmpl->error();

__DATA__ 
<table border="1">
[% FOR row IN rows %] 
  <tr> 
  [% FOR cell IN row %] 
    <td>
    [% IF cell.url %]
      <a href="http://[% cell.url | url %]">[% cell.label | html %]</a>
    [% ELSE %]
      [% cell.label | html %]
    [% END %]
    </td> 
  [% END %]
  </tr> 
[% END %]
</table> 
```

Template::Toolkit 具有许多与 Perl 相同的功能（如果启用 Perl 块，实际上完全相同，但我不建议这样做）。

在每个`[% %]`您放入指令的内部。如果没有指令并且没有使用 执行赋值`=`，则该块被视为变量查找，并且传递到模板的值被插入到那里的文本中。在进行变量查找时，您可以使用句点来遍历整个复杂的数据结构以分隔查找。例如，

```
[% rows.0.0.label %] 
```

在上面的示例中插入，将输出“Home”。

上面显示的`| url`and`| html`符号添加了过滤器，这些过滤器将清理输出以确保`[% %]`块内的值输出为正确的 URL 或 HTML（通常避免 XSS 和其他输出格式错误）。

Template Toolkit 有时对它的工作方式有点模糊和不精确，甚至不如 Perl 严格，所以有时你必须小心一点。这也可能是一个性能问题，特别是如果您`process()`在应用程序中调用很多次（将模板嵌入另一个往往会更快一些）。但是，它在大多数模板问题上都做得相当好，如果您需要与网页设计师合作，界面也不会太吓人。

如果您使用 Template::Toolkit，我强烈建议您通读本[教程](https://metacpan.org/module/Template%3a%3aManual%3a%3aIntro)以了解它。

**原答案：**

Lone Shepherd 的评论是答案：

我正在使用该模块`HTML::Template`创建一个像这样的格式化表（使用 array `@rows`）：

```
my $tmpl = HTML::Template->new(filehandle => \*DATA);
$tmpl->param(ROWS => \@rows); 
print $tmpl->output;

__DATA__ 
<table border="1"> 
<TMPL_LOOP ROWS> 
  <tr> 
  <TMPL_LOOP CELLS> 
    <td><a href="http://www.mywebsite.com/<TMPL_VAR CELL ESCAPE=HTML>"><TMPL_VAR CELL ESCAPE=HTML></a></td> 
  </TMPL_LOOP>
  </tr> 
</TMPL_LOOP>
</table> 
```

只需为您的超链接添加 HTML。根据[HTML::Template](http://metacpan.org/module/HTML%3a%3aTemplate)的文档，您可以将`<TMPL_VAR ...>`位放在属性中。

作为旁注，添加`ESCAPE=HTML`也是一个好主意，除非你确定你已经清理了你的输出（防止像[跨站点脚本攻击](https://www.owasp.org/index.php/Cross-site_Scripting_%28XSS%29)你的 web 应用程序）。

# google-apps-script - GoogleAppsScript - 无法从日历中获取事件

> ID：11703152
> 
> 赞同：0
> 
> 时间：2012-07-28T17:23:52.273
> 
> 标签：google-apps-script, google-calendar-api

以下代码假设从 Google 日历获取 7 月份的事件

```
// The code below will retrieve all the events for the user's default calendar and
// display the description of the first event
var cal = CalendarApp.getDefaultCalendar();
Logger.log(cal.getName());
var events = cal.getEvents(new Date("July 01, 2012 EST"), new Date("July 30, 2012 EST"));
if (events[0]) {
  Logger.log(events[0].getDescription());
}
else
{
    Logger.log("No events found");
} 
```

但它只打印“未找到事件”，

我验证了日历名称，它得到了正确的日历，但没有得到事件

还有什么要验证的吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-29T18:47:27.653

上面的代码由于某种原因在我的 Chrome 浏览器 (版本:20.0.1132.57) 上失败了，我尝试使用 Safari 并且这次它可以工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-28T18:07:52.343

我尝试了您的代码，它按书面方式工作。

您是否在未定义用户且 getDefaultCalendar() 无法确定默认日历的地方运行此程序？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-30T15:20:06.813

getDescription() 方法只会获取事件的**描述**。因此，如果创建的事件中没有描述，则记录器将为空。

试试这个例如：

```
function myCalender(){

var cal = CalendarApp.getDefaultCalendar();
Logger.log(cal.getName());
var events = cal.getEvents(new Date("July 01, 2012 EST"), new Date("August 10, 2012    EST"));

var eventsCount = events.length;  
for (var i = 0; i <= eventsCount -1; i++) {

var myEvent =events[i];

var myDescription = myEvent.getDescription();
var myStartTime = myEvent.getDateCreated();
var myEndTime = myEvent.getEndTime();

Logger.log(myEvent.getDescription(), myEvent.getEndTime());

}   

} 
```

# git - 获取“阶段”的 Git 概念

> ID：11703162
> 
> 赞同：7
> 
> 时间：2012-07-28T17:25:07.080
> 
> 标签：git, workflow, git-index, git-stage

当它适用于 Git 时，我仍然很难理解 staging 的概念。

可以用 SVN 做任何类比吗？在 Git 中设置阶段级别的主要目的是什么？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-28T17:35:04.523

暂存区的主要优点是您可以轻松地仅提交给定文件中的部分更改。（`git add -p`例如使用。）据我所知，在 SVN 中进行“部分”提交的唯一方法是在每个文件级别上，或者通过手动备份文件然后临时恢复您不想要的更改承诺。

如果（像我一样）你不是一个高度组织化的开发人员，并且希望能够在事后将更改整理成“整洁”的提交，那就太好了。这遵循了 Git 的一般态度，即宁愿给你灵活性而不是强制严格。如果你不需要它，你总是可以不使用它，而使用`git commit -a ...`.

SVN 无法类比，因为 SVN 不是 Git，也没有这样的概念。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-07-28T17:41:27.477

**相似之处：**

必须添加应该是存储库一部分的文件才能被跟踪。这两个工具都使用该`add`命令来完成此操作。添加文件意味着准备提交。

**差异：**

Git 在添加文件时允许更多细节。您可以决定添加整个文件或不同的代码行。将文件添加到*索引*或*阶段*允许更大的灵活性。SVN 自动提交对已添加到存储库的文件的所有更改。Git 将与每个提交操作关联的更改的决定权留给用户。换句话说：Git 中的下一次*提交*仅包含已暂存的那些更改（行或文件），而与文件的跟踪状态无关。SVN 自动包含跟踪文件的所有更改。

**附加信息：**

尝试阅读一些描述 Git 工作流程的文章，例如[Oliver Steele](http://web.archive.org/web/20120917134032/http://osteele.com/archives/2008/05/my-git-workflow)的文章。但请注意，使用 Git 的方法**不止一种**——有很多种。如果你愿意，你可以像使用 SVN 一样使用 Git。
不要期望在短时间内理解 Git 的哲学。我花了一年的时间才开始使用它，但我仍然在学习使用它的新方法。我认为如果你是在 SVN 思维模式下长大的，那就更难了。那里有大量的材料：文章、视频…… - 花点时间尝试其中的一些。这是我收集的列表中的一个选择。

*   [Git 沉浸式体验](http://gitimmersion.com/)
*   [像 (a) Git 一样思考](http://think-like-a-git.net/)
*   [Git 寓言](http://tom.preston-werner.com/2009/05/19/the-git-parable.html)
*   [Lars Vogel 的 Git 教程](http://www.vogella.com/articles/Git/article.html)
*   [tekkub 收集的链接和背景信息](https://gist.github.com/423320)

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-07-28T17:53:37.220

以下是一些显示分期有用的场景：

*   你在一个特定的作品上工作，并且在你的项目中做了很多改变。在测试完整的东西之前，您还不想提交它们。但是这些更改通常可以独立到足以进行多个逻辑提交而不是单个大提交。这是您暂存选择性部分并进行多次提交的时候。

*   在调试时，登台特别有用。您可以在日志语句周围散布以跟踪错误的来源。然后您进行修复，并使用这些日志语句再次测试。但是，您希望在对代码进行任何更改以删除这些日志语句之前提交修复。

*   事实证明它有用的另一种情况是，当您正在做某事时，发现一些不相关的东西，例如拼写错误，您想要修复并快速解决它。

还有其他几种这样的场景，一旦你掌握了它，你可能无法使用任何缺乏这个概念的东西:)。

PS：我根本没有用过SVN，所以无法对两者进行比较。

# php - PHP/DOMDocument: unset() 不释放资源

> ID：11703164
> 
> 赞同：2
> 
> 时间：2012-07-28T17:25:26.487
> 
> 标签：php, memory-leaks, domdocument

我有一个`$dom`包含 PHP DOMDocument 实例的变量。此变量正在循环中设置和取消设置。

`unset($dom)`但是不会释放内存：`memory_get_usage(false)`报告说只有大约 10MB 的 700B 被释放。`memory_get_usage(true)`报告之前和之后完全相同的内存使用量`unset()`。

我尝试了以下方法：

*   `unset()`我检查了 $dom 的引用计数在调用: `xdebug_debug_zval('dom')`reports: dom: (refcount=1, is_ref=0)=class DOMDocument { }之前正好是1。

*   我尝试了[DOMDocument PHP Memory Leak](https://stackoverflow.com/questions/8379829/domdocument-php-memory-leak)中提出的解决方案，但这无济于事。

*   我试过`gc_enable()`+ `gc_collect_cycles()`。但这也无济于事。

*   `$dom->__destruct()`我之前尝试过调用，`unset()`但这会导致错误，因为 DOMDocument 显然没有析构函数。

*   在取消设置变量之前，我递归地删除了 DOM 中的所有节点。它并没有带来丝毫的不同。

*   在重新使用它之前，我尝试将变量设置为 null：`$dom = null`

现在我没有想法......有人建议我还能尝试调试或解决这个问题吗？

编辑：

*   php -v 使用 Suhosin-Patch (cli) 报告 5.3.10-1ubuntu3.2

*   源代码可以在这里看到：[https ://github.com/jerico-dev/ojs/blob/dev/plugins/generic/lucene/classes/SolrWebService.inc.php#L256](https://github.com/jerico-dev/ojs/blob/dev/plugins/generic/lucene/classes/SolrWebService.inc.php#L256)

*   前几次迭代的输出是：

    ```
    before object creation: 19292296
    after object creation: 29849832
    before unset: 30055232
    after unset: 30054448
    before object creation: 29849592
    after object creation: 39858840
    before unset: 40079920
    after unset: 40079136
    before object creation: 39858272
    after object creation: 49923216
    before unset: 50136448
    after unset: 50135664 
    ```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-28T17:28:26.813

这应该释放 $dom 中的内存存储。

```
$dom = null; 
```

# objective-c - Core Plot 的 CPTPlotSpaceDelegate：正确实现缩放和平移

> ID：11703165
> 
> 赞同：1
> 
> 时间：2012-07-28T17:25:27.717
> 
> 标签：objective-c, ios, core-plot

我已经在我的视图控制器中`CPTPlotDataSource`实现了代表。`CPTPlotSpaceDelegate`我也设置了`plotSpace.allowsUserInteraction = YES`和 `self.hostView.allowPinchScaling = YES`。

然而，方法

`-(BOOL)plotSpace:(CPTPlotSpace *)space shouldScaleBy:(CGFloat)interactionScale aboutPoint:(CGPoint)interactionPoint`,

`-(BOOL)plotSpace:(CPTPlotSpace *)space shouldHandlePointingDeviceDownEvent:(id)event atPoint:(CGPoint)point`,

`-(CGPoint)plotSpace:(CPTPlotSpace *)space willDisplaceBy:(CGPoint)proposedDisplacementVector`和

`-(CPTPlotRange *)plotSpace:(CPTPlotSpace *)space willChangePlotRangeTo:(CPTPlotRange *)newRange forCoordinate:(CPTCoordinate)coordinate`即使绘图是可缩放的，也不会调用。

我在代码中遗漏了什么？

谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-28T17:42:06.353

我确实忘记设置我的代表：`plotSpace.delegate = self;`

# iphone - iOS在textview UIColor中设置文本范围

> ID：11703170
> 
> 赞同：0
> 
> 时间：2012-07-28T17:26:09.840
> 
> 标签：iphone, objective-c, ios, ios5, ios4

我正在寻找我的文本视图中的所有文本都是灰色的，然后第一句话是黑色的。如何将该范围设置为黑色。我已经有了第一句字符串/范围。谢谢你。

```
 [tv setTextColor:[UIColor grayColor]];

    id<UITextInputTokenizer> tokenizer = tv.tokenizer;
    UITextRange *range = [tokenizer rangeEnclosingPosition:tv.beginningOfDocument
                                           withGranularity:UITextGranularitySentence
                                               inDirection:UITextStorageDirectionForward];
    NSString *firstSentence = [tv textInRange:range];
    NSLog(@"%@",firstSentence); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-28T17:51:28.753

这里没有太多好消息。您需要一个 NSAttributed 字符串，但这不能用作标准文本视图的模型。我没有亲自检查过，但这里有一些可能有助于参考的网络代码[......](https://stackoverflow.com/questions/5550739/set-nsattributedstring-to-uitextview)

# mysql - mysql获取id数组

> ID：11703171
> 
> 赞同：1
> 
> 时间：2012-07-28T17:26:17.247
> 
> 标签：mysql, database, select, count

所以我有一个带有几张表的数据库。主要是植物。我还有一个 PlantEffects 表，其中包含植物 ID、效果 ID。我需要做的是选择植物，但按 PlantEffects.effect_id 计数排名前 5 位的 PlantEffects。所以它会像

```
|ID|NAME|top_effect_ids|
|1 |abc |1,4,5,6,7     |
|2 |def |3,2,9,7,5     | 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-28T17:43:24.757

如果我正确理解您的问题，您希望将前五名`effect_id`（按计数）放入 CSV 列表中。

你可以这样做：

```
SELECT 
    a.id, 
    a.name, 
    SUBSTRING_INDEX(GROUP_CONCAT(b.effect_id ORDER BY b.effectcnt DESC), ',', 5) AS top_effect_ids
FROM 
    plants a
INNER JOIN
(
    SELECT plant_id, effect_id, COUNT(1) AS effectcnt
    FROM planteffects
    GROUP BY plant_id, effect_id
) b ON a.id = b.plant_id
GROUP BY 
    a.id, a.name 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-28T17:28:58.693

你应该首先规范你的表。

意思是：不要将top_effect_ids写在一列，而是创建一个外键为Plant ID和效果ID的表并写5行（例如：`(1,1) , (1,4) , (1,5) , (1,6) , (1,7)`

在此处阅读更多信息：[https ://en.wikipedia.org/wiki/Database_normalization](https://en.wikipedia.org/wiki/Database_normalization)

# formtastic - 如果使用 Formtastic 选中“其他”单选或复选框，则显示/隐藏 div

> ID：11703172
> 
> 赞同：0
> 
> 时间：2012-07-28T17:26:22.133
> 
> 标签：formtastic

这很像其他被问到的问题。我知道如何使用 HTML/Javascript 来做到这一点，但我的问题是针对 Formtastic 的。

（这里是一个几乎相同问题的链接，除了我需要弄清楚如何让 Formtastic 发出类似于此处示例的 HTML：[Show/hide div if "other" radio OR checkbox is checked](https://stackoverflow.com/questions/6125738/show-hide-div-if-other-radio-or-checkbox-is-checked)）

通常你会有一个单选按钮列表：

*   选择 1
*   选择 2
*   选择 3

好吧，这一切都很好，而且 Formtastic 可以轻松处理它。但是当我想要这个时会发生什么：

*   选择 1
*   选择 2
*   选择 3
*   其他：[此处输入文字]

在我点击“其他”之前，文本输入应该是灰色的。如果我选择“其他”，我需要用户输入它是什么。（同样的论点也适用于复选框。）

我意识到交互性是 Javascript，而不是 Formtastic 的工作。我说的是实际的标记。

有没有办法让 Formtastic 发出这个？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-28T23:28:54.070

Formtastic 对此没有任何开箱即用的东西，主要是因为我不知道在发布表单数据时参数应该如何显示的既定模式。如果没有约定和模型端的良好支持，感觉就像我们只是半生不熟的东西可能对某些人有用。

好消息是您可以使用自定义输入来完成您自己的解决方案。而不是`:as => :select`do `:as => :select_with_other`，然后开始建立自己`SelectWithOtherInput`的`app/inputs/select_with_other_input.rb`：

`class SelectWithOtherInput < Formtastic::Inputs::SelectInput end`

您需要查看 SelectInput 的源代码及其包含的模块，以了解您需要覆盖什么以获得所需的内容，但这是目前唯一的方法。

如果你能为此建立一个很好的模式，我很乐意看一个补丁。

# file-io - 在 Vim 脚本的 BufWritePre 中中止写入

> ID：11703174
> 
> 赞同：3
> 
> 时间：2012-07-28T17:26:57.237
> 
> 标签：file-io, vim

如何取消`BufWritePre`/ `FileWritePre`auto 命令中的写入？

我已经看过[这个问题](https://stackoverflow.com/questions/5542969/prevent-file-saving-during-bufwritepre)和建议的解决方案`throw`，显示错误消息，我不希望这样。由于我正在显示自己的错误消息，因此对用户来说应该是透明的，没有写入任何内容。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-28T18:02:06.280

那么，只需抛出您自己的错误消息。我认为没有其他方法可以解决这个问题。毕竟，用户希望在发出 a 之后写入缓冲区`:w`，因此只有异常可以防止这种情况发生。

`BufWriteCmd`您可以通过使用钩子和来解决此问题`:setl buftype=acwrite`，并完全自己编写缓冲区，但这是很多（容易出错）的工作，并且如果您打算发出错误，无论如何，请使用异常。

# applet - 用于与智能卡进行相互身份验证的 Java Applet

> ID：11703176
> 
> 赞同：0
> 
> 时间：2012-07-28T17:27:20.617
> 
> 标签：applet, certificate, smartcard, mutual-authentication

我需要开发一个 java 小程序，用于 Tomcat 6（服务器）和智能卡“ **IDGo 300** ”（客户端）之间的相互身份验证。

为了做到这一点，我想到了以下方案：

1.  Tomcat（服务器）向 SmartCard（客户端）发送其数字证书（由 CA 签名）的请求。
2.  客户端输入 PIN 并选择智能卡上的可用证书，然后 Applet 将其证书（由 CA 签名）发送到 tomcat。tomcat 验证数字证书，如果正确则发回他的证书。
3.  小程序验证服务器的证书，如果证书正确，则向服务器发送确认。
4.  服务器为客户端提供完全访问权限以使用 Web 应用程序。

我有一些问题：

1.  这个方案可行吗？
2.  我想通过我的小程序管理所有内容，当客户端断开智能卡时，他将失去对服务器的访问权限。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-29T12:20:17.420

可行吗？是的。实用吗？不，我会主张使用厚实的 Java 应用程序。

首先，您不能通过简单地发送证书来进行身份验证。您还需要诸如质询-响应之类的东西（输入 PIN 后由智能卡上的私钥创建的签名）。

其次，您需要特殊权限才能使用 Applet 中的任何硬件。这意味着您必须更改客户端的权限，或者您可能必须签署 Applet，之后用户必须接受该特定任务的 Applet。

小程序有非常特定的生命周期。您可能不想将卡的移除与 Applet 的生命周期同步。当您断开连接时，用户可能会阻止发送的响应。您可以使用[`waitForCardAbsent()`](http://docs.oracle.com/javase/6/docs/jre/api/security/smartcardio/spec/javax/smartcardio/CardTerminal.html#waitForCardAbsent%28long%29)单独的线程测试卡是否已被移除。

如果您不能信任连接（没有 SSL 的 HTTP），那么您就不能信任 Applet 代码。用户可能不想将他们的 PIN 输入到不受信任的代码中。

如果您想支持多个浏览器和 Java 运行时，您将遇到无数问题。

作为一个小问题，该`javax.smartcardio`软件包可能并不总是可用；这不是`javax`一无是处。

# vb.net - 在文本框下方显示表单

> ID：11703178
> 
> 赞同：0
> 
> 时间：2012-07-28T17:27:31.183
> 
> 标签：vb.net, visual-studio-2005

您好，我正在使用 Visual Basic 2005 为我的论文做一些事情，我希望 for 显示在文本框下方，但我可以使用绘图点获取文本框的确切位置。

这是我现在的代码：

```
Dim x As Integer = Me.txtStockQUnit.Location.X + Me.Location.X + Me.grpMonitoring.Location.X
Dim y As Integer = Me.txtStockQUnit.Height + Me.txtStockQUnit.Location.Y + Me.Location.Y + Me.grpMonitoring.Location.Y
My.Forms.frmQuantityUnitDropListGrid.Location = New Point(x, y)
My.Forms.frmQuantityUnitDropListGrid.ShowDialog() 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-29T21:18:18.703

刚刚在网上找到它并且正在按照我想要的方式工作。

```
Dim ctl as Textbox 'the textbox which the form will show at its bottom
Dim ctlpos As Point = ctl.PointToScreen(New Point(0, 0)) 'Point.Empty is not function so se Point(0, 0)

Me.StartPosition = FormStartPosition.Manual 'set it to manual
Me.Location = New Point(ctlpos.X - 2, ctlpos.Y + ctl.Height - 2) 'then locate its position
Me.show 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-29T08:34:31.120

窗体上控件的位置相对于窗体的左上角，因此您不需要使用 Me.Location 来定位文本框。

以下示例在 Form_Load 上设置文本框和表单的位置：

```
Private Sub Form1_Load(sender As System.Object, e As System.EventArgs) Handles MyBase.Load
    'position a textbox on the form relative to the top left corner of the form
    txtStockQUnit.Location = New Point(100, 25)

    'position the form relative the top left corner of the primary display
    Me.Location = New Point(100, 300)
End Sub 
```

注意：文本框只能放置在表单表面上，而不是“半空中”。

# .net - PowerShell：创建自定义异常

> ID：11703180
> 
> 赞同：8
> 
> 时间：2012-07-28T17:27:38.483
> 
> 标签：.net, powershell

这是我的代码：

```
Function Foo {
    If (1 -Eq 2) {
        # Do stuff
    }
    Else {
        # Throw custom exception
    }
}

Try {
    Foo

    Write-Host "Success"
}
Catch {
    $ErrorMessage = $_.Exception.InnerException.Message

    Write-Host "Failure"

    # Do stuff with the error message
} 
```

我想`# Throw custom exception`用会导致`Catch`触发的代码替换。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2012-07-28T19:50:50.980

不确定我是否真的明白你的问题，但似乎你想要做的就是：

```
throw "message for the exception" 
```

# android - 按下按钮时清除微调器

> ID：11703181
> 
> 赞同：2
> 
> 时间：2012-07-28T17:27:43.953
> 
> 标签：android, android-spinner

谁能建议如何在单击按钮时清除微调器中的值？

```
Spinner spinner1;
private static final String[] SpinArray= { "00", "01", "02",
        "03", "04", "05", "06", "07", "08", "09", "10", "11", "12", "13",
        "14", "15", "16", "17", "18", "19", "20", "21", "22", "23", "00" };

adapter = new ArrayAdapter(this, android.R.layout.simple_spinner_item,
            SpinArray);
    adapter.setDropDownViewResource(android.R.layout.simple_spinner_dropdown_item);
    spinner1.setAdapter(adapter);

    spinner1.setOnItemSelectedListener(new mySpinnerListener());

public void onItemSelected(AdapterView parent, View v, int position,  
            long id) {
        // TODO Auto-generated method stub
        switch(parent.getId()){
        case R.id.spinner1:
            spinner1=parent.getSelectedItem().toString();
            break;

    } 
```

在按钮点击我试图清除使用

```
spinner1.setAdapter(null); and spinner1.setOnItemSelectedListener(null); 
```

这两个在我的情况下都不起作用..请帮忙

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-28T17:31:58.660

`spinner1.getAdapter().clear();`应该做的伎俩。

正如埃里克在评论中所说，`spinner1.getAdapter().notifyDataSetChanged();`在那之后打电话。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-07-26T13:53:23.343

单击按钮时，我清除了数组列表并使微调器适配器为空。

```
arrContent.clear();
spinner1.setAdapter(null); 
```

# android - 我们可以在 android 中控制 GPS 跟踪器设备吗

> ID：11703182
> 
> 赞同：0
> 
> 时间：2012-07-28T17:27:49.523
> 
> 标签：android, gps

我们可以从设备跟踪 gps 并获取设备的纬度和经度并查找设备的位置 但是是否有可能以编程方式从 android 手机跟踪任何 gps 设备 这是 iphone 中的一个应用程序 此功能是可能的 iphone 但在 android 中有任何可能性

[从 iphone 控制 gps 跟踪器设备](http://www.starburstsoftware.co.uk/GPSTracker/)

# html - 是否可以在斜体的选择列表中显示文本的任何部分？

> ID：11703185
> 
> 赞同：2
> 
> 时间：2012-07-28T17:28:06.997
> 
> 标签：html, css

我有一种标准的选择列表：

```
<select>
  <option value="volvo">Volvo</option>
  <option value="saab">Saab</option>
  <option value="mercedes">Mercedes</option>
  <option value="audi">Audi cars</option>
</select> 
```

是否可以以斜体显示例如“汽车”一词？我尝试添加标准 html，但没有奏效。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-28T17:29:33.547

否 - 与输入字段和文本区域一样，选项标签不允许在其中使用不同的样式，整个选项只有一种样式。

要实现您所描述的，您将需要一个下拉菜单的 HTML/JavaScript 模拟，而不是本机模拟，例如

[http://www.mitya.co.uk/scripts/jQuery-drop-down-selector-124](http://www.mitya.co.uk/scripts/jQuery-drop-down-selector-124)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-28T17:37:41.090

> 请注意：仅在**Firefox 10.2**上检查，但它确实完成了此处所要求的内容

我可以使用 CSS 来做到这一点，就像[**我的小提琴**](http://jsfiddle.net/9Ay8A/)

HTML

```
<select>
  <option value="volvo">Volvo</option>
  <option value="saab">Saab</option>
  <option value="mercedes">Mercedes</option>
    <option class="italic" value="audi">Audi</option>
</select> 
```

CSS

```
option.italic:after{
    content: "cars";
    font-style: italic;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-28T17:38:32.773

使用直接 html 几乎是不可能的。

您可以使用相同的样式

```
SELECT { border: solid 1px color; font-weight: bold; }
OPTION { background:xx; font-style: italic; } 
```

但对于不同的风格，你应该使用 javascript。

# c# - 在 C# 中添加“...”作为摘要

> ID：11703191
> 
> 赞同：-4
> 
> 时间：2012-07-28T17:28:53.000
> 
> 标签：c#

考虑一下我的网站上有一个部分，我想显示新闻摘要。有没有办法在 C# 中指定数量的字符后添加三个点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-28T17:32:54.033

使用`Substring()`C# 的方法来获取您想要显示多少并将“...”附加到末尾。

```
string text = "Hello World, How are you? Blah blah blah blah..";
text.Substring(0,100); 
```

更多： http: [//msdn.microsoft.com/en-us/library/system.string.substring (v=vs.100).aspx](http://msdn.microsoft.com/en-us/library/system.string.substring(v=vs.100).aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-28T17:34:22.300

简单的字符串操作就足够了：

```
if (str.Length > MaxLength)
    str = str.SubString(0, MaxLength - 3) + "..."; 
```

繁荣完成。

# php - 包含来自单独文件夹的文件

> ID：11703193
> 
> 赞同：2
> 
> 时间：2012-07-28T17:29:01.673
> 
> 标签：php, include

![在此处输入图像描述](../Images/37f81d89f886dc47f010704baba95dab.png)

附图显示了文件的位置，它将帮助您给出答案。我想包含 `'db/functions.php'`在我的文件中`'process/delete.php'`，但没有任何效果。我在开始时尝试过关注`'delete.php'`

```
include_once '/db/functions.php';
include_once './db/functions.php';
include_once '../db/functions.php';
include_once $_SERVER['DOCUMENT_ROOT'].'/db/functions.php'; 
```

当我打开 MAMP/log/php_error.log 文件时，它显示以下错误

```
[28-Jul-2012 21:55:23] PHP Warning:  include_once() 
[<a href='function.include'>function.include</a>]: 
Failed opening '/db/functions.php' for inclusion 
(include_path='.:/Applications/MAMP/bin/php/php5.3.6/lib/php') in 
/Applications/MAMP/htdocs/electromart/process/delete.php on line 3 
```

其中第 3 行是包含语句。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-28T17:35:57.393

从错误中您可以看到`electromart`路径中缺少该文件夹，并且当您移动到另一台计算机时，目录结构也可能会根据服务器的设置方式发生变化。尝试

```
include_once $_SERVER['DOCUMENT_ROOT'].'/electromart/db/functions.php'; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-28T17:39:36.370

试试这个：`include_once realpath(dirname(__FILE__)."../db/functions.php");`

# javascript - LimeJS 自定义 Sprite Swallowing 事件

> ID：11703194
> 
> 赞同：11
> 
> 时间：2012-07-28T17:29:07.920
> 
> 标签：javascript, html, game-engine, google-closure-library, limejs

我通过以下方式制作了一个自定义的 Lime JS sprite 类：

```
test.obj = function() {
  lime.Sprite.call(this);
  .
  .
  this.label = new lime.Label(). ...;
  this.appendChild(this.label);
}
goog.inherits(test.obj, lime.Sprite); 
```

我无法让标签点击冒泡到根程序；它总是吞噬事件。您是否需要做一些特别的事情才能单击标签以冒泡到我的根事件处理程序，即：

```
goog.events.listen(objinstance, ["click", "touchstart"], function() { .. }); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-16T16:17:17.173

你停止任何传播吗？否则会发生这种情况是很奇怪的。查看应该传递 goog.events.BrowserEvent 对象作为参数的侦听器函数，看看它们是否自动停止了库源内部的一些传播。

# perl - XML::Twig 无法使用 cpan 安装

> ID：11703197
> 
> 赞同：2
> 
> 时间：2012-07-28T17:29:44.177
> 
> 标签：perl, module, installation, cpan, xml-twig

我是安装 CGI 模块的新手。在我`ppm`用来安装模块的开发机器上。在我的生产服务器上，我没有 ActivePerl，因此没有`ppm`.

当我尝试使用 安装 XML::Twig 时`cpan`，我得到以下输出：

```
CPAN: Storable loaded ok (v2.20)
Going to read '/root/.cpan/Metadata'
  Database was generated on Sat, 28 Jul 2012 14:03:03 GMT
Running install for module 'XML::Twig'
CPAN: Data::Dumper loaded ok (v2.124)
'YAML' not installed, falling back to Data::Dumper and Storable to read prefs '/root/.cpan/prefs'
Running make for M/MI/MIROD/XML-Twig-3.40.tar.gz
CPAN: Digest::SHA loaded ok (v5.62)
CPAN: Compress::Zlib loaded ok (v2.037)
Checksum for /root/.cpan/sources/authors/id/M/MI/MIROD/XML-Twig-3.40.tar.gz ok
Scanning cache /root/.cpan/build for sizes
............................................................................DONE
CPAN: Archive::Tar loaded ok (v1.76)
XML-Twig-3.40/
XML-Twig-3.40/Twig.pm
XML-Twig-3.40/Twig_pm.slow
CPAN: File::Temp loaded ok (v0.22)

  CPAN.pm: Going to build M/MI/MIROD/XML-Twig-3.40.tar.gz

run 'perl Makefile.PL -y' to install all tools,
    'perl Makefile.PL -n' to skip installation
Do you want to install 'xml_pp' (XML pretty printer)? [y] Do you want to install 'xml_grep' (XML grep - grep XML files using XML::Twig's subset of XPath)? [y] Do you want to install 'xml_split' (split big XML files)? [y] Do you want to install 'xml_merge' (merge back files created by xml_split)? [y] Do you want to install 'xml_spellcheck' (spellcheck XML files skipping tags)? [y] Checking if your kit is complete...
Looks good
Writing Makefile for XML::Twig
Could not read '/root/.cpan/build/XML-Twig-3.40-mL4ddI/META.yml'. Falling back to other methods to determine prerequisites
---- Unsatisfied dependencies detected during ----
----        MIROD/XML-Twig-3.40.tar.gz        ----
    XML::Parser [requires]
  Ignoring dependencies on modules ARRAY(0xa01ac10), ARRAY(0xa01aa90)
/usr/bin/perl speedup Twig_pm.slow > Twig.pm
/usr/bin/perl -i_bak -p filter_for_5.005 Twig.pm Twig/XPath.pm
/usr/bin/perl check_optional_modules
cp Twig.pm blib/lib/XML/Twig.pm
cp Twig/XPath.pm blib/lib/XML/Twig/XPath.pm
cp tools/xml_merge/xml_merge blib/script/xml_merge
/usr/bin/perl -MExtUtils::MY -e 'MY->fixin(shift)' -- blib/script/xml_merge
cp tools/xml_grep/xml_grep blib/script/xml_grep
/usr/bin/perl -MExtUtils::MY -e 'MY->fixin(shift)' -- blib/script/xml_grep
cp tools/xml_pp/xml_pp blib/script/xml_pp
/usr/bin/perl -MExtUtils::MY -e 'MY->fixin(shift)' -- blib/script/xml_pp
cp tools/xml_split/xml_split blib/script/xml_split
/usr/bin/perl -MExtUtils::MY -e 'MY->fixin(shift)' -- blib/script/xml_split
cp tools/xml_spellcheck/xml_spellcheck blib/script/xml_spellcheck
/usr/bin/perl -MExtUtils::MY -e 'MY->fixin(shift)' -- blib/script/xml_spellcheck
Manifying blib/man1/xml_merge.1
Manifying blib/man1/xml_grep.1
Manifying blib/man1/xml_pp.1
Manifying blib/man1/xml_split.1
Manifying blib/man1/xml_spellcheck.1
Manifying blib/man3/XML::Twig.3pm
  MIROD/XML-Twig-3.40.tar.gz
  /usr/bin/make -- OK
Warning (usually harmless): 'YAML' not installed, will not store persistent state
Running make test
/usr/bin/perl speedup Twig_pm.slow > Twig.pm
/usr/bin/perl -i_bak -p filter_for_5.005 Twig.pm Twig/XPath.pm
/usr/bin/perl check_optional_modules
Skip blib/lib/XML/Twig.pm (unchanged)
Skip blib/lib/XML/Twig/XPath.pm (unchanged)
PERL_DL_NONLAZY=1 /usr/bin/perl "-MExtUtils::Command::MM" "-e" "test_harness(0, 'blib/lib', 'blib/arch')" t/*.t
t/is_field.t ........................ 
Dubious, test returned 2 (wstat 512, 0x200)
No subtests run 
t/pod.t ............................. ok
t/pod_coverage.t .................... ok
t/test1.t ........................... 
Dubious, test returned 2 (wstat 512, 0x200)
No subtests run 
t/test2.t ........................... 
Dubious, test returned 2 (wstat 512, 0x200)
No subtests run 
t/test3.t ........................... 
Dubious, test returned 2 (wstat 512, 0x200)
No subtests run 
t/test4.t ........................... 
Dubious, test returned 2 (wstat 512, 0x200)
No subtests run 
t/test5.t ........................... 
Dubious, test returned 2 (wstat 512, 0x200)
No subtests run 
t/test_3_24.t ....................... 
Dubious, test returned 2 (wstat 512, 0x200)
No subtests run 
t/test_3_26.t ....................... 
Dubious, test returned 2 (wstat 512, 0x200)
No subtests run 
t/test_3_27.t ....................... 
Dubious, test returned 2 (wstat 512, 0x200)
No subtests run 
t/test_3_30.t ....................... 
Dubious, test returned 2 (wstat 512, 0x200)
No subtests run 
t/test_3_32.t ....................... 
Dubious, test returned 2 (wstat 512, 0x200)
No subtests run 
t/test_3_35.t ....................... 
Dubious, test returned 2 (wstat 512, 0x200)
No subtests run 
t/test_3_36.t ....................... 
Dubious, test returned 2 (wstat 512, 0x200)
No subtests run 
t/test_3_38.t ....................... 
Dubious, test returned 2 (wstat 512, 0x200)
No subtests run 
t/test_3_39.t ....................... 
Dubious, test returned 2 (wstat 512, 0x200)
No subtests run 
t/test_3_40.t ....................... 
Dubious, test returned 2 (wstat 512, 0x200)
No subtests run 
t/test_additional.t ................. 
Dubious, test returned 2 (wstat 512, 0x200)
No subtests run 
t/test_attregexp_cond.t ............. 
Dubious, test returned 2 (wstat 512, 0x200)
No subtests run 
t/test_autoencoding_conversion.t .... 
Failed 2/2 subtests 
t/test_bugs_3_15.t .................. 
Dubious, test returned 2 (wstat 512, 0x200)
No subtests run 
t/test_bugs_3_18.t .................. 
Dubious, test returned 2 (wstat 512, 0x200)
No subtests run 
t/test_bugs_3_19.t .................. 
Dubious, test returned 2 (wstat 512, 0x200)
No subtests run 
t/test_bugs_3_21.t .................. 
Dubious, test returned 2 (wstat 512, 0x200)
No subtests run 
t/test_bugs_3_22.t .................. 
Dubious, test returned 2 (wstat 512, 0x200)
No subtests run 
t/test_cdata.t ...................... 
Dubious, test returned 2 (wstat 512, 0x200)
No subtests run 
t/test_class_methods.t .............. 
Dubious, test returned 2 (wstat 512, 0x200)
No subtests run 
t/test_class_selector.t ............. 
Dubious, test returned 2 (wstat 512, 0x200)
No subtests run 
t/test_comment_handler.t ............ 
Dubious, test returned 2 (wstat 512, 0x200)
No subtests run 
t/test_drop_comments.t .............. 
Dubious, test returned 2 (wstat 512, 0x200)
No subtests run 
t/test_entities.t ................... 
Dubious, test returned 2 (wstat 512, 0x200)
No subtests run 
t/test_erase.t ...................... 
Dubious, test returned 2 (wstat 512, 0x200)
No subtests run 
t/test_errors.t ..................... 
Dubious, test returned 2 (wstat 512, 0x200)
No subtests run 
t/test_even_more_coverage.t ......... 
Dubious, test returned 2 (wstat 512, 0x200)
No subtests run 
t/test_expand_external_entities.t ... 
Dubious, test returned 2 (wstat 512, 0x200)
No subtests run 
t/test_ignore_elts.t ................ 
Dubious, test returned 2 (wstat 512, 0x200)
No subtests run 
t/test_keep_atts_order.t ............ 
Dubious, test returned 2 (wstat 512, 0x200)
No subtests run 
t/test_kwalitee.t ................... ok
t/test_mark.t ....................... 
Dubious, test returned 2 (wstat 512, 0x200)
No subtests run 
t/test_memory.t ..................... 
Dubious, test returned 2 (wstat 512, 0x200)
No subtests run 
t/test_nav.t ........................ 
Dubious, test returned 2 (wstat 512, 0x200)
No subtests run 
t/test_need_3_args_open.t ........... 
Dubious, test returned 2 (wstat 512, 0x200)
No subtests run 
t/test_need_io_scalar.t ............. 
Dubious, test returned 2 (wstat 512, 0x200)
No subtests run 
t/test_need_use_bytes.t ............. 
Dubious, test returned 2 (wstat 512, 0x200)
No subtests run 
t/test_new_features_3_15.t .......... 
Dubious, test returned 2 (wstat 512, 0x200)
No subtests run 
t/test_new_features_3_16.t .......... 
Dubious, test returned 2 (wstat 512, 0x200)
No subtests run 
t/test_new_features_3_18.t .......... 
Dubious, test returned 2 (wstat 512, 0x200)
No subtests run 
t/test_new_features_3_22.t .......... 
Dubious, test returned 2 (wstat 512, 0x200)
No subtests run 
t/test_pi_handler.t ................. 
Dubious, test returned 2 (wstat 512, 0x200)
No subtests run 
t/test_pos.t ........................ 
Dubious, test returned 2 (wstat 512, 0x200)
No subtests run 
t/test_safe_encode.t ................ 
Dubious, test returned 2 (wstat 512, 0x200)
No subtests run 
t/test_simplify.t ................... 
Dubious, test returned 2 (wstat 512, 0x200)
No subtests run 
t/test_spaces.t ..................... 
Dubious, test returned 2 (wstat 512, 0x200)
No subtests run 
t/test_twig_roots.t ................. 
Dubious, test returned 2 (wstat 512, 0x200)
No subtests run 
t/test_unique_xpath.t ............... 
Dubious, test returned 2 (wstat 512, 0x200)
No subtests run 
t/test_variables.t .................. 
Dubious, test returned 2 (wstat 512, 0x200)
No subtests run 
t/test_with_lwp.t ................... 
Dubious, test returned 2 (wstat 512, 0x200)
No subtests run 
t/test_wrapped.t .................... 
Dubious, test returned 2 (wstat 512, 0x200)
No subtests run 
t/test_xml_split.t .................. 
Failed 23/59 subtests 
t/test_xml_split_g.t ................ 
Dubious, test returned 2 (wstat 512, 0x200)
Failed 13/13 subtests 
t/test_xpath_cond.t ................. 
Dubious, test returned 2 (wstat 512, 0x200)
No subtests run 
t/tests_3_23.t ...................... 
Dubious, test returned 2 (wstat 512, 0x200)
No subtests run 
t/xmlxpath_01basic.t ................ 
Dubious, test returned 2 (wstat 512, 0x200)
No subtests run 
t/xmlxpath_02descendant.t ........... 
Dubious, test returned 2 (wstat 512, 0x200)
No subtests run 
t/xmlxpath_03star.t ................. 
Dubious, test returned 2 (wstat 512, 0x200)
No subtests run 
t/xmlxpath_04pos.t .................. 
Dubious, test returned 2 (wstat 512, 0x200)
No subtests run 
t/xmlxpath_05attrib.t ............... 
Dubious, test returned 2 (wstat 512, 0x200)
No subtests run 
t/xmlxpath_06attrib_val.t ........... 
Dubious, test returned 2 (wstat 512, 0x200)
No subtests run 
t/xmlxpath_07count.t ................ 
Dubious, test returned 2 (wstat 512, 0x200)
No subtests run 
t/xmlxpath_08name.t ................. 
Dubious, test returned 2 (wstat 512, 0x200)
No subtests run 
t/xmlxpath_09a_string_length.t ...... 
Dubious, test returned 2 (wstat 512, 0x200)
No subtests run 
t/xmlxpath_09string_length.t ........ 
Dubious, test returned 2 (wstat 512, 0x200)
No subtests run 
t/xmlxpath_10pipe.t ................. 
Dubious, test returned 2 (wstat 512, 0x200)
No subtests run 
t/xmlxpath_12axisdescendant.t ....... 
Dubious, test returned 2 (wstat 512, 0x200)
No subtests run 
t/xmlxpath_13axisparent.t ........... 
Dubious, test returned 2 (wstat 512, 0x200)
No subtests run 
t/xmlxpath_14axisancestor.t ......... 
Dubious, test returned 2 (wstat 512, 0x200)
No subtests run 
t/xmlxpath_15axisfol_sib.t .......... 
Dubious, test returned 2 (wstat 512, 0x200)
No subtests run 
t/xmlxpath_16axisprec_sib.t ......... 
Dubious, test returned 2 (wstat 512, 0x200)
No subtests run 
t/xmlxpath_17axisfollowing.t ........ 
Dubious, test returned 2 (wstat 512, 0x200)
No subtests run 
t/xmlxpath_18axispreceding.t ........ 
Dubious, test returned 2 (wstat 512, 0x200)
No subtests run 
t/xmlxpath_19axisd_or_s.t ........... 
Dubious, test returned 2 (wstat 512, 0x200)
No subtests run 
t/xmlxpath_20axisa_or_s.t ........... 
Dubious, test returned 2 (wstat 512, 0x200)
No subtests run 
t/xmlxpath_21allnodes.t ............. 
Dubious, test returned 2 (wstat 512, 0x200)
No subtests run 
t/xmlxpath_22name_select.t .......... 
Dubious, test returned 2 (wstat 512, 0x200)
No subtests run 
t/xmlxpath_23func.t ................. 
Dubious, test returned 2 (wstat 512, 0x200)
No subtests run 
t/xmlxpath_24namespaces.t ........... 
Dubious, test returned 2 (wstat 512, 0x200)
No subtests run 
t/xmlxpath_25scope.t ................ 
Dubious, test returned 2 (wstat 512, 0x200)
No subtests run 
t/xmlxpath_26predicate.t ............ 
Dubious, test returned 2 (wstat 512, 0x200)
No subtests run 
t/xmlxpath_28ancestor2.t ............ 
Dubious, test returned 2 (wstat 512, 0x200)
No subtests run 
t/xmlxpath_29desc_with_predicate.t .. 
Dubious, test returned 2 (wstat 512, 0x200)
No subtests run 
t/xmlxpath_30lang.t ................. 
Dubious, test returned 2 (wstat 512, 0x200)
No subtests run 
t/xmlxpath_additional.t ............. 
Dubious, test returned 2 (wstat 512, 0x200)
No subtests run 
t/xmlxpath_nav.t .................... 
Dubious, test returned 2 (wstat 512, 0x200)
No subtests run 
t/xmlxpath_test1.t .................. 
Dubious, test returned 2 (wstat 512, 0x200)
No subtests run 
t/xmlxpath_test_twig_roots.t ........ 
Dubious, test returned 2 (wstat 512, 0x200)
No subtests run 
t/xmlxpath_test_with_handlers.t ..... 
Dubious, test returned 2 (wstat 512, 0x200)
No subtests run 
t/xmlxpath_xpath_cond.t ............. 
Dubious, test returned 2 (wstat 512, 0x200)
No subtests run 
t/zz_dump_config.t .................. ok

Test Summary Report
-------------------
t/is_field.t                      (Wstat: 512 Tests: 0 Failed: 0)
  Non-zero exit status: 2
  Parse errors: No plan found in TAP output
t/test1.t                         (Wstat: 512 Tests: 0 Failed: 0)
  Non-zero exit status: 2
  Parse errors: No plan found in TAP output
t/test2.t                         (Wstat: 512 Tests: 0 Failed: 0)
  Non-zero exit status: 2
  Parse errors: No plan found in TAP output
t/test3.t                         (Wstat: 512 Tests: 0 Failed: 0)
  Non-zero exit status: 2
  Parse errors: No plan found in TAP output
t/test4.t                         (Wstat: 512 Tests: 0 Failed: 0)
  Non-zero exit status: 2
  Parse errors: No plan found in TAP output
t/test5.t                         (Wstat: 512 Tests: 0 Failed: 0)
  Non-zero exit status: 2
  Parse errors: No plan found in TAP output
t/test_3_24.t                     (Wstat: 512 Tests: 0 Failed: 0)
  Non-zero exit status: 2
  Parse errors: No plan found in TAP output
t/test_3_26.t                     (Wstat: 512 Tests: 0 Failed: 0)
  Non-zero exit status: 2
  Parse errors: No plan found in TAP output
t/test_3_27.t                     (Wstat: 512 Tests: 0 Failed: 0)
  Non-zero exit status: 2
  Parse errors: No plan found in TAP output
t/test_3_30.t                     (Wstat: 512 Tests: 0 Failed: 0)
  Non-zero exit status: 2
  Parse errors: No plan found in TAP output
t/test_3_32.t                     (Wstat: 512 Tests: 0 Failed: 0)
  Non-zero exit status: 2
  Parse errors: No plan found in TAP output
t/test_3_35.t                     (Wstat: 512 Tests: 0 Failed: 0)
  Non-zero exit status: 2
  Parse errors: No plan found in TAP output
t/test_3_36.t                     (Wstat: 512 Tests: 0 Failed: 0)
  Non-zero exit status: 2
  Parse errors: No plan found in TAP output
t/test_3_38.t                     (Wstat: 512 Tests: 0 Failed: 0)
  Non-zero exit status: 2
  Parse errors: No plan found in TAP output
t/test_3_39.t                     (Wstat: 512 Tests: 0 Failed: 0)
  Non-zero exit status: 2
  Parse errors: No plan found in TAP output
t/test_3_40.t                     (Wstat: 512 Tests: 0 Failed: 0)
  Non-zero exit status: 2
  Parse errors: No plan found in TAP output
t/test_additional.t               (Wstat: 512 Tests: 0 Failed: 0)
  Non-zero exit status: 2
  Parse errors: No plan found in TAP output
t/test_attregexp_cond.t           (Wstat: 512 Tests: 0 Failed: 0)
  Non-zero exit status: 2
  Parse errors: No plan found in TAP output
t/test_autoencoding_conversion.t  (Wstat: 0 Tests: 2 Failed: 2)
  Failed tests:  1-2
t/test_bugs_3_15.t                (Wstat: 512 Tests: 0 Failed: 0)
  Non-zero exit status: 2
  Parse errors: No plan found in TAP output
t/test_bugs_3_18.t                (Wstat: 512 Tests: 0 Failed: 0)
  Non-zero exit status: 2
  Parse errors: No plan found in TAP output
t/test_bugs_3_19.t                (Wstat: 512 Tests: 0 Failed: 0)
  Non-zero exit status: 2
  Parse errors: No plan found in TAP output
t/test_bugs_3_21.t                (Wstat: 512 Tests: 0 Failed: 0)
  Non-zero exit status: 2
  Parse errors: No plan found in TAP output
t/test_bugs_3_22.t                (Wstat: 512 Tests: 0 Failed: 0)
  Non-zero exit status: 2
  Parse errors: No plan found in TAP output
t/test_cdata.t                    (Wstat: 512 Tests: 0 Failed: 0)
  Non-zero exit status: 2
  Parse errors: No plan found in TAP output
t/test_class_methods.t            (Wstat: 512 Tests: 0 Failed: 0)
  Non-zero exit status: 2
  Parse errors: No plan found in TAP output
t/test_class_selector.t           (Wstat: 512 Tests: 0 Failed: 0)
  Non-zero exit status: 2
  Parse errors: No plan found in TAP output
t/test_comment_handler.t          (Wstat: 512 Tests: 0 Failed: 0)
  Non-zero exit status: 2
  Parse errors: No plan found in TAP output
t/test_drop_comments.t            (Wstat: 512 Tests: 0 Failed: 0)
  Non-zero exit status: 2
  Parse errors: No plan found in TAP output
t/test_entities.t                 (Wstat: 512 Tests: 0 Failed: 0)
  Non-zero exit status: 2
  Parse errors: No plan found in TAP output
t/test_erase.t                    (Wstat: 512 Tests: 0 Failed: 0)
  Non-zero exit status: 2
  Parse errors: No plan found in TAP output
t/test_errors.t                   (Wstat: 512 Tests: 0 Failed: 0)
  Non-zero exit status: 2
  Parse errors: No plan found in TAP output
t/test_even_more_coverage.t       (Wstat: 512 Tests: 0 Failed: 0)
  Non-zero exit status: 2
  Parse errors: No plan found in TAP output
t/test_expand_external_entities.t (Wstat: 512 Tests: 0 Failed: 0)
  Non-zero exit status: 2
  Parse errors: No plan found in TAP output
t/test_ignore_elts.t              (Wstat: 512 Tests: 0 Failed: 0)
  Non-zero exit status: 2
  Parse errors: No plan found in TAP output
t/test_keep_atts_order.t          (Wstat: 512 Tests: 0 Failed: 0)
  Non-zero exit status: 2
  Parse errors: No plan found in TAP output
t/test_mark.t                     (Wstat: 512 Tests: 0 Failed: 0)
  Non-zero exit status: 2
  Parse errors: No plan found in TAP output
t/test_memory.t                   (Wstat: 512 Tests: 0 Failed: 0)
  Non-zero exit status: 2
  Parse errors: No plan found in TAP output
t/test_nav.t                      (Wstat: 512 Tests: 0 Failed: 0)
  Non-zero exit status: 2
  Parse errors: No plan found in TAP output
t/test_need_3_args_open.t         (Wstat: 512 Tests: 0 Failed: 0)
  Non-zero exit status: 2
  Parse errors: No plan found in TAP output
t/test_need_io_scalar.t           (Wstat: 512 Tests: 0 Failed: 0)
  Non-zero exit status: 2
  Parse errors: No plan found in TAP output
t/test_need_use_bytes.t           (Wstat: 512 Tests: 0 Failed: 0)
  Non-zero exit status: 2
  Parse errors: No plan found in TAP output
t/test_new_features_3_15.t        (Wstat: 512 Tests: 0 Failed: 0)
  Non-zero exit status: 2
  Parse errors: No plan found in TAP output
t/test_new_features_3_16.t        (Wstat: 512 Tests: 0 Failed: 0)
  Non-zero exit status: 2
  Parse errors: No plan found in TAP output
t/test_new_features_3_18.t        (Wstat: 512 Tests: 0 Failed: 0)
  Non-zero exit status: 2
  Parse errors: No plan found in TAP output
t/test_new_features_3_22.t        (Wstat: 512 Tests: 0 Failed: 0)
  Non-zero exit status: 2
  Parse errors: No plan found in TAP output
t/test_pi_handler.t               (Wstat: 512 Tests: 0 Failed: 0)
  Non-zero exit status: 2
  Parse errors: No plan found in TAP output
t/test_pos.t                      (Wstat: 512 Tests: 0 Failed: 0)
  Non-zero exit status: 2
  Parse errors: No plan found in TAP output
t/test_safe_encode.t              (Wstat: 512 Tests: 0 Failed: 0)
  Non-zero exit status: 2
  Parse errors: No plan found in TAP output
t/test_simplify.t                 (Wstat: 512 Tests: 0 Failed: 0)
  Non-zero exit status: 2
  Parse errors: No plan found in TAP output
t/test_spaces.t                   (Wstat: 512 Tests: 0 Failed: 0)
  Non-zero exit status: 2
  Parse errors: No plan found in TAP output
t/test_twig_roots.t               (Wstat: 512 Tests: 0 Failed: 0)
  Non-zero exit status: 2
  Parse errors: No plan found in TAP output
t/test_unique_xpath.t             (Wstat: 512 Tests: 0 Failed: 0)
  Non-zero exit status: 2
  Parse errors: No plan found in TAP output
t/test_variables.t                (Wstat: 512 Tests: 0 Failed: 0)
  Non-zero exit status: 2
  Parse errors: No plan found in TAP output
t/test_with_lwp.t                 (Wstat: 512 Tests: 0 Failed: 0)
  Non-zero exit status: 2
  Parse errors: No plan found in TAP output
t/test_wrapped.t                  (Wstat: 512 Tests: 0 Failed: 0)
  Non-zero exit status: 2
  Parse errors: No plan found in TAP output
t/test_xml_split.t                (Wstat: 0 Tests: 59 Failed: 23)
  Failed tests:  1-2, 4, 6, 8, 10, 12, 14, 16, 18, 20, 22
                24, 26, 28, 30, 32, 34, 36, 38, 40, 42
                44
t/test_xml_split_g.t              (Wstat: 512 Tests: 7 Failed: 7)
  Failed tests:  1-7
  Non-zero exit status: 2
  Parse errors: Bad plan.  You planned 13 tests but ran 7.
t/test_xpath_cond.t               (Wstat: 512 Tests: 0 Failed: 0)
  Non-zero exit status: 2
  Parse errors: No plan found in TAP output
t/tests_3_23.t                    (Wstat: 512 Tests: 0 Failed: 0)
  Non-zero exit status: 2
  Parse errors: No plan found in TAP output
t/xmlxpath_01basic.t              (Wstat: 512 Tests: 0 Failed: 0)
  Non-zero exit status: 2
  Parse errors: No plan found in TAP output
t/xmlxpath_02descendant.t         (Wstat: 512 Tests: 0 Failed: 0)
  Non-zero exit status: 2
  Parse errors: No plan found in TAP output
t/xmlxpath_03star.t               (Wstat: 512 Tests: 0 Failed: 0)
  Non-zero exit status: 2
  Parse errors: No plan found in TAP output
t/xmlxpath_04pos.t                (Wstat: 512 Tests: 0 Failed: 0)
  Non-zero exit status: 2
  Parse errors: No plan found in TAP output
t/xmlxpath_05attrib.t             (Wstat: 512 Tests: 0 Failed: 0)
  Non-zero exit status: 2
  Parse errors: No plan found in TAP output
t/xmlxpath_06attrib_val.t         (Wstat: 512 Tests: 0 Failed: 0)
  Non-zero exit status: 2
  Parse errors: No plan found in TAP output
t/xmlxpath_07count.t              (Wstat: 512 Tests: 0 Failed: 0)
  Non-zero exit status: 2
  Parse errors: No plan found in TAP output
t/xmlxpath_08name.t               (Wstat: 512 Tests: 0 Failed: 0)
  Non-zero exit status: 2
  Parse errors: No plan found in TAP output
t/xmlxpath_09a_string_length.t    (Wstat: 512 Tests: 0 Failed: 0)
  Non-zero exit status: 2
  Parse errors: No plan found in TAP output
t/xmlxpath_09string_length.t      (Wstat: 512 Tests: 0 Failed: 0)
  Non-zero exit status: 2
  Parse errors: No plan found in TAP output
t/xmlxpath_10pipe.t               (Wstat: 512 Tests: 0 Failed: 0)
  Non-zero exit status: 2
  Parse errors: No plan found in TAP output
t/xmlxpath_12axisdescendant.t     (Wstat: 512 Tests: 0 Failed: 0)
  Non-zero exit status: 2
  Parse errors: No plan found in TAP output
t/xmlxpath_13axisparent.t         (Wstat: 512 Tests: 0 Failed: 0)
  Non-zero exit status: 2
  Parse errors: No plan found in TAP output
t/xmlxpath_14axisancestor.t       (Wstat: 512 Tests: 0 Failed: 0)
  Non-zero exit status: 2
  Parse errors: No plan found in TAP output
t/xmlxpath_15axisfol_sib.t        (Wstat: 512 Tests: 0 Failed: 0)
  Non-zero exit status: 2
  Parse errors: No plan found in TAP output
t/xmlxpath_16axisprec_sib.t       (Wstat: 512 Tests: 0 Failed: 0)
  Non-zero exit status: 2
  Parse errors: No plan found in TAP output
t/xmlxpath_17axisfollowing.t      (Wstat: 512 Tests: 0 Failed: 0)
  Non-zero exit status: 2
  Parse errors: No plan found in TAP output
t/xmlxpath_18axispreceding.t      (Wstat: 512 Tests: 0 Failed: 0)
  Non-zero exit status: 2
  Parse errors: No plan found in TAP output
t/xmlxpath_19axisd_or_s.t         (Wstat: 512 Tests: 0 Failed: 0)
  Non-zero exit status: 2
  Parse errors: No plan found in TAP output
t/xmlxpath_20axisa_or_s.t         (Wstat: 512 Tests: 0 Failed: 0)
  Non-zero exit status: 2
  Parse errors: No plan found in TAP output
t/xmlxpath_21allnodes.t           (Wstat: 512 Tests: 0 Failed: 0)
  Non-zero exit status: 2
  Parse errors: No plan found in TAP output
t/xmlxpath_22name_select.t        (Wstat: 512 Tests: 0 Failed: 0)
  Non-zero exit status: 2
  Parse errors: No plan found in TAP output
t/xmlxpath_23func.t               (Wstat: 512 Tests: 0 Failed: 0)
  Non-zero exit status: 2
  Parse errors: No plan found in TAP output
t/xmlxpath_24namespaces.t         (Wstat: 512 Tests: 0 Failed: 0)
  Non-zero exit status: 2
  Parse errors: No plan found in TAP output
t/xmlxpath_25scope.t              (Wstat: 512 Tests: 0 Failed: 0)
  Non-zero exit status: 2
  Parse errors: No plan found in TAP output
t/xmlxpath_26predicate.t          (Wstat: 512 Tests: 0 Failed: 0)
  Non-zero exit status: 2
  Parse errors: No plan found in TAP output
t/xmlxpath_28ancestor2.t          (Wstat: 512 Tests: 0 Failed: 0)
  Non-zero exit status: 2
  Parse errors: No plan found in TAP output
t/xmlxpath_29desc_with_predicate.t (Wstat: 512 Tests: 0 Failed: 0)
  Non-zero exit status: 2
  Parse errors: No plan found in TAP output
t/xmlxpath_30lang.t               (Wstat: 512 Tests: 0 Failed: 0)
  Non-zero exit status: 2
  Parse errors: No plan found in TAP output
t/xmlxpath_additional.t           (Wstat: 512 Tests: 0 Failed: 0)
  Non-zero exit status: 2
  Parse errors: No plan found in TAP output
t/xmlxpath_nav.t                  (Wstat: 512 Tests: 0 Failed: 0)
  Non-zero exit status: 2
  Parse errors: No plan found in TAP output
t/xmlxpath_test1.t                (Wstat: 512 Tests: 0 Failed: 0)
  Non-zero exit status: 2
  Parse errors: No plan found in TAP output
t/xmlxpath_test_twig_roots.t      (Wstat: 512 Tests: 0 Failed: 0)
  Non-zero exit status: 2
  Parse errors: No plan found in TAP output
t/xmlxpath_test_with_handlers.t   (Wstat: 512 Tests: 0 Failed: 0)
  Non-zero exit status: 2
  Parse errors: No plan found in TAP output
t/xmlxpath_xpath_cond.t           (Wstat: 512 Tests: 0 Failed: 0)
  Non-zero exit status: 2
  Parse errors: No plan found in TAP output
Files=99, Tests=72,  2 wallclock secs ( 0.17 usr  0.11 sys +  1.95 cusr  0.42 csys =  2.65 CPU)
Result: FAIL
  MIROD/XML-Twig-3.40.tar.gz
  /usr/bin/make test -- NOT OK
//hint// to see the cpan-testers results for installing this module, try:
  reports MIROD/XML-Twig-3.40.tar.gz
Warning (usually harmless): 'YAML' not installed, will not store persistent state
Running make install
  make test had returned bad status, won't install without force
Failed during this command:
 MIROD/XML-Twig-3.40.tar.gz                   : make_test NO 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-28T23:07:35.863

It looks like there was some sort of problem with [XML::Parser](https://www.metacpan.org/module/XML::Parser), which is the Perl interface to [expat](http://expat.sourceforge.net):

```
---- Unsatisfied dependencies detected during ----
----        MIROD/XML-Twig-3.40.tar.gz        ----
    XML::Parser [requires]
  Ignoring dependencies on modules ARRAY(0xa01ac10), ARRAY(0xa01aa90)

```

Ensure that you have expat installed, install [XML::Parser](https://www.metacpan.org/module/XML::Parser), and then install [XML::Twig](https://www.metacpan.org/module/XML::Twig).

I'm a bit worried about this line, which is [CPAN::Distribution](https://www.metacpan.org/module/CPAN::Distribution) interpolating an array references that should be dereferenced:

```
Ignoring dependencies on modules ARRAY(0xa01ac10), ARRAY(0xa01aa90)

```

Which version of [CPAN] do you have? The `-v` switch should show you the program and module version:

```
% cpan -v
CPAN: File::HomeDir loaded ok (v0.99)
cpan script version 1.5701, CPAN.pm version 1.960001 
```

You might need to update your CPAN tool first.

# visual-studio-2010 - Visual Studio 加载项自动显示除头文件之外的代码文件？

> ID：11703199
> 
> 赞同：3
> 
> 时间：2012-07-28T17:29:56.007
> 
> 标签：visual-studio-2010, visual-c++, ide, visual-studio-addins

在 Visual Studio 2010 C++ 项目中，我总是同时打开标头 (.h) 和相应的代码文件 (.cpp)。

我将头文件的代码窗口停靠在左侧，将代码文件停靠在右侧。

是否有可用于 VS2010 的加载项自动为我执行此操作？

# java - SimpleDateFormat - 你需要使用 RegEx 吗？

> ID：11703210
> 
> 赞同：3
> 
> 时间：2012-07-28T17:31:53.280
> 
> 标签：java, regex, date, simpledateformat

我有下面的代码，它产生了这个：

```
2012-07-28 17:30:23 
```

这就是我想要的。但是，如果我想自己提取所有数字以分配给变量，我是否需要制作正则表达式，或者有什么方法可以简单地从 SimpleDateFormat 中提取这些数字？

```
 SimpleDateFormat dateFormatUCT = new SimpleDateFormat("yyyy-MM-dd HH:mm:ss");
 dateFormatUCT.setTimeZone(TimeZone.getTimeZone("UCT"));

 //Time in UCT
 String date = dateFormatUCT.format(new Date());

 System.out.println(date); 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-07-28T17:37:07.423

你有一个约会。将 if 转换为[GregorianCalendar](http://docs.oracle.com/javase/6/docs/api/java/util/GregorianCalendar.html)，并向 GregorianCalendar 询问每个字段：

```
GregorianCalendar cal = new GregorianCalendar(TimeZone.getTimeZone("UCT")); // or UTC?
cal.setTime(theDate); // if you want something other than the current date
int year = cal.get(Calendar.YEAR);
int month = cal.get(Calendar.MONTH) + 1; // months start at 0, duh!
... 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-07-28T17:37:10.063

你不需要正则表达式。您只需获取日期并将其提供给日历，然后使用该`get()`方法获取每个字段。

```
Calendar c = Calendar.getInstance(TimeZone.getTimeZone("UTC"));
c.setTime(new Date());

System.out.println(c.get(Calendar.YEAR));
System.out.println(c.get(Calendar.MONTH));
System.out.println(c.get(Calendar.DATE)); 
```

等等

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-28T17:40:57.457

**一**、使用`split()`方法

**2.** 这样做...

```
String s = new SimpleDateFormat("yyyy-MM-dd HH:mm:ss").format(new Date());

  String[] arr = s.split(" ");

  String newDStr = arr[0];

  String newTStr = arr[1];

  String[] DateArr = newDStr.split("-");       // Holds Date values.
  String[] TimeArr = newTStr.split(":");       // Holds Time values 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-28T17:39:03.773

您无法从`SimpleDateFormat`afaik 中提取它们，但您可以使用`Java.util.Calendar`其`get(Calendar.{DAY_OF_MONTH|MONTH|YEAR|HOUR|MINUTE|SECOND})`方法提取日期组件。该`Calendar`对象提供了一个`setTime()`获取日期的方法。因此，您可以使用相同的日期来格式化`SimpleDateFormat`并使用`Calendar`.

# sql - 查询表中一列的唯一性并返回所有列

> ID：11703212
> 
> 赞同：-1
> 
> 时间：2012-07-28T17:32:10.657
> 
> 标签：sql, unique

```
table_name
-----------------
ID [PK]
Title 
Last_Name 
First_Name 
Middle_Name 
Suffix 
Full_Address 
Address1 
Address2 
City 
State 
Zip 
County 
Phone1 
Phone2 
Email 
```

我有一个包含上述列名的表。我希望能够返回“电子邮件”唯一的查询中的所有列和所有行。我将如何使用 SQL 执行此操作？

如果两行具有相同的电子邮件地址，那么我只希望返回其中的一行。哪个并不重要。如果我可以组合这些行，那将是不必要的。

我正在使用 LibreOffice Base，它是一个使用 HSQL 数据库引擎的 .odb 数据库。

我试图只选择其电子邮件在表中不重复的行。一个例子是我想给数据库中的每个人发送电子邮件，但我知道很多人在数据库中列出了两次，因为我已经合并了来自多个不同来源的数据。

我的主键是我刚刚看到的 ID 列，我没有在上面列出。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-28T17:54:51.900

您可以使用此解决方案在每封电子邮件中仅获取一行（无论是否有重复）。该行基于`ID`每封电子邮件的最大值：

```
SELECT b.*
FROM   (SELECT MAX(ID) AS ID FROM table_name GROUP BY Email) a
JOIN   table_name b ON a.ID = b.ID 
```

对于电话号码：

```
SELECT b.*
FROM   (SELECT MAX(ID) AS ID FROM table_name GROUP BY Phone1) a
JOIN   table_name b ON a.ID = b.ID 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-28T17:38:36.420

如果您使用的是支持窗口函数的 SQL 引擎，那么您将执行以下操作：

```
select Title Last_Name, First_Name, Middle_Name, Suffix, Full_Address, Address1,
       Address2, City, State, Zip, County, Phone1, Phone2, Email
from (select t.*, count(*) over (partition by email) as NumOnEmail
      from t
     ) t
where NumOnEmail = 1 
```

在任何数据库中，您应该能够：

```
select Title Last_Name, First_Name, Middle_Name, Suffix, Full_Address, Address1,
       Address2, City, State, Zip, County, Phone1, Phone2, Email
from t
where t.email in (select email from t group by email having count(*) = 1) 
```

# jquery - jquery - 克隆的行失去功能

> ID：11703214
> 
> 赞同：0
> 
> 时间：2012-07-28T17:32:47.287
> 
> 标签：jquery, clone, tablerow

**没关系....我用过现场，它似乎工作......**

我有包含表单元素的表。当用户输入新值并单击添加按钮时，表的最后一行将被克隆，输入字段将更新为新信息。此外，每一行都包含一个删除图标。当用户单击删除图标时，它所属的行将被删除。

我有所有的工作...

**除了**，克隆行的删除图标不起作用。当您单击它时没有任何反应，我尝试了各种方法，但似乎无法弄清楚那部分......我一个月前刚开始使用 jquery 并认为我遗漏了一些明显的东西，但不确定是什么。 ..

我把代码放在jsfiddle上，希望有人能帮忙：

[http://jsfiddle.net/sMqcB/](http://jsfiddle.net/sMqcB/)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-28T17:35:44.847

因为这些是新注入到 DOM 的元素。它不会知道您已经定义的现有点击事件。

解决方法：使用jQuery的[`on`](http://api.jquery.com/on/)方法。

改变

```
$('img.seminars-faux-remove').click(function() {
    $(this).closest('tr').remove();
}); 
```

至

```
$(document).on("click",'img.seminars-faux-remove',function() {
    $(this).closest('tr').remove();
}); 
```

jQuery [on](http://api.jquery.com/on/)将适用于当前和未来的元素。此方法可从 jQuery 1.7+ 开始使用。如果你使用的是旧版本的 jQuery，你可以考虑使用[live](http://api.jquery.com/live/)。但是如果你使用的是 1.7+ ，你**应该**使用 jQuery on。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-28T17:37:33.057

您可以通过使用`.clone(true)`而不是保留该功能`.clone()`。请参阅[.clone()](http://api.jquery.com/clone/)文档，特别是`[withDataAndEvents]`参数的含义。

[演示](http://jsfiddle.net/sMqcB/4/)

# jquery - ASP.NET MVC 4 Web Api ajax 文件上传

> ID：11703219
> 
> 赞同：8
> 
> 时间：2012-07-28T17:33:34.847
> 
> 标签：jquery, asp.net-mvc, file-upload, asp.net-mvc-4, asp.net-web-api

我正在使用 asp.net mvc 4 web api 开发某种服务。在一个表单上，用户必须上传几个文件，然后将表单提交到服务器。问题在于 ajax 文件上传到 asp.net mvc web api。我已经实现了没有 ajax 的上传。但我需要用ajax完成。这是实施

```
public Task<HttpResponseMessage> PostJob()
{
    if (!Request.Content.IsMimeMultipartContent())
    {
        throw new HttpResponseException(Request.CreateResponse(HttpStatusCode.UnsupportedMediaType));
    }

    string path = HttpContext.Current.Server.MapPath(string.Format("~/Resources/Documents"));
    MultipartFormDataStreamProvider provider = new MultipartFormDataStreamProvider(path);
    var request = Request.Content.ReadAsMultipartAsync(provider);

    var task = request.ContinueWith<HttpResponseMessage>(t =>
    {
        if (t.IsFaulted || t.IsCanceled)
        {
            return new HttpResponseMessage(HttpStatusCode.InternalServerError);
        }

        string fileName = provider.BodyPartFileNames.FirstOrDefault().Value;
        string originalName = provider.BodyPartFileNames.FirstOrDefault().Key.TrimStart('"').TrimEnd('"');
        string RandomName = provider.BodyPartFileNames.First().Value + Path.GetExtension(originalName);

        FileInfo file = new FileInfo(fileName);
        file.CopyTo(Path.Combine(path, originalName), true);
        file.Delete();

        return new HttpResponseMessage(HttpStatusCode.Created);

    }); 
```

我找到了使用 HTML5 [http://www.strathweb.com/2012/04/html5-drag-and-drop-asynchronous-multi-file-upload-with-asp-net-webapi/](http://www.strathweb.com/2012/04/html5-drag-and-drop-asynchronous-multi-file-upload-with-asp-net-webapi/)的文章。我需要在 IE8 中进行这项工作。也许你有什么想法？

任何帮助表示赞赏，Iryna。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-07-28T17:49:50.217

您无法在 IE8 等旧版浏览器中使用纯 JavaScript 和 AJAX 上传文件。原因是您无权访问用户在文件输入中选择的文件内容。而且由于您无权访问此内容，因此无法将其发送到服务器。

您可以使用一些现有的文件上传插件：

*   [上传](http://www.plupload.com/)
*   [蓝灵](https://github.com/blueimp/jQuery-File-Upload)
*   [价值 Ajax 上传](http://valums.com/ajax-upload/)
*   [上传](http://www.uploadify.com/)

他们将测试浏览器的功能，如果它支持 HTML5 和允许使用 AJAX 上传文件的新 XHR2 对象，它将使用它。或者，如果浏览器不支持它，插件可以回退到 Flash 或隐藏的 iframe。因此，如果您需要支持旧版浏览器，您别无选择，只能使用其他一些客户端脚本技术（例如 Flash）或使用隐藏的 iframe 来伪造 AJAX 请求并实际发送正常的*multipart/form-data*请求。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-30T20:03:26.667

您可以对 7、8 和 9 使用 silverlight 拖放控件

# python - python mysql api撇号

> ID：11703220
> 
> 赞同：0
> 
> 时间：2012-07-28T17:33:39.720
> 
> 标签：python, code-injection, mysql-python, apostrophe

众所周知，Python 的 cgi.escape() 函数不会转义引号或撇号。Python MySQLdb API 也可以这样说吗？在下面的例子中，O'Reilly 中的撇号是否在进入数据库时​​被转义了？

```
lastname = O'Reilly
cursor.execute ('INSERT INTO table_name (surname) VALUES (%s)', (lastname,)) 
```

谢谢！

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-07-28T17:37:05.823

是的（答案至少需要 30 个字符）。

# html - 在backbone.js 中处理模板

> ID：11703222
> 
> 赞同：0
> 
> 时间：2012-07-28T17:33:46.950
> 
> 标签：html, backbone.js, underscore.js

我正在使用backbone.js，并且在开发过程中有许多.js 和.html 模板文件（每个模型一个）。在部署应用程序之前，我将所有 .js 压缩到一个文件中，它运行良好。我如何也可以为模板执行此操作？我有一些想法，但他们有问题：

*   将所有模板放在主页中不可见的“div”标签下。然而，一旦浏览器加载模板，模板就会被“执行”（例如图片无需下载）
*   将编码的模板放入 javascript 变量中。但是编码的 html 将不可读，这对于客户端调试很重要
*   将模板放在外部 xml 文件中。我想避免使用 xml 解析器。由于编码，其他非 xml 格式将再次无法读取。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-30T07:12:36.347

on my project i do this as follows:

Backbone has Underscore in it and Underscore has already a very cool minimalistic Template system. so i write the templates in separate files and get them with jQuery

```
 $.get('html_template.tpl', function(template) {
        $(body).html(_.template(template)(template_data));
    }); 
```

so i let the user only download templates if really needed.

Maybe it helps.

* * *

Underscore Template : [http://documentcloud.github.com/underscore/#template](http://documentcloud.github.com/underscore/#template)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-29T06:52:16.117

我建议使用[把手](http://handlebarsjs.com/)进行模板。

我所做的是将模板打包到一个 javascript 文件 (templates.js) 中，因此它们不在 DOM 上。模板被编译成用于生产的 js 变量，但在开发中它们按原样使用，因此调试应该很简单。

我在一篇[博文中写了更多关于这个的内容](http://berzniz.com/post/24743062344/handling-handlebars-js-like-a-pro)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-28T17:36:00.210

好的...我之前找不到任何东西，但是在我发布问题后的那一刻，我了解到了这一点：

```
<script type="text/template" id="user-template">
...
</script> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-28T20:45:56.580

如果您刚刚了解了`<script type="text/template" id="">`ICanHaz.js 可能[是](http://icanhazjs.com/)您接下来可以尝试的东西，或者[Handlebars.js](http://handlebarsjs.com/)

# php - 简单的 webform PHP 脚本 - 它不起作用

> ID：11703228
> 
> 赞同：0
> 
> 时间：2012-07-28T17:34:51.323
> 
> 标签：php, webforms

我希望 PHP 脚本将它从 html 页面获取的所有值打印到屏幕上。

这是 HTML 代码：

```
 <!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=windows-1255">
<title>Insert title here</title>
</head>
<body>
   <div>
    <form enctype="multipart/form-data" action="rect.php" method="post">
        <label>Name:</label><input type="text" name="name"><br />
        <label>Family Name:</label><input type="text" name="family"><br />
        <label>Age:</label><input type="text" name="age"><br />
        <input type="button" value="Print">
    </form>
   </div>
</body>
</html> 
```

* * *

//这是PHP代码：

```
 <?php 
$name = $_REQUEST['name'];
$family_name = $_REQUEST['family'];
$age = $_REQUEST['age'];

print $name.$family_name.$age;
?> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-28T17:48:48.893

$_REQUEST 应该可以工作，但是您的按钮是无用的。

```
 <input type="button" value="Print"> 
```

应该

```
 <input type="submit" value="Print"> 
```

这应该可以解决问题:)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-28T17:36:48.387

首先也是最重要的：使用`$_POST`. 使用`$_REQUEST`是不好的做法。

```
<?php 
   $name = $_POST['name'];
   $family_name = $_POST['family'];
   $age = $_POST['age'];
   print $name.$family_name.$age;
?> 
```

* * *

而且您的按钮没有提交。把它变成这样：

```
<input type="submit" value="Print"> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-28T17:50:49.500

改变

```
<input type="button" value="Print"> 
```

至

```
<input type="submit" value="Print"> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-28T21:18:21.010

如果您只是将文本发送到 PHP 表单，则不需要 enctype。

您的按钮必须是 type="submit"

并且您应该使用 $_POST ，因为显然您将它用于表单。

# android - 将android布局上的数据显示为.Net GridView

> ID：11703229
> 
> 赞同：0
> 
> 时间：2012-07-28T17:34:59.260
> 
> 标签：android, listview, gridview

我需要在表格上显示数据（如 .Net GridView）。我使用过 ListView ，但它似乎不像我想要的那样。例如，标题和列不在对齐上。我从 Web 服务中检索数据，它包含 sql 表。

如何将数据显示为 .Net GridView 设计以及如何检索所选项目的列值。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-28T17:36:39.297

Android 有它自己的[GridView](http://developer.android.com/reference/android/widget/GridView.html)。它类似于 ListView，所以如果您使用过 ListView，那么 GridView 应该没问题。

这是一个[教程](http://www.mkyong.com/android/android-gridview-example/)。

# xcode - 在 Xcode 中完全更改项目的名称

> ID：11703234
> 
> 赞同：0
> 
> 时间：2012-07-28T17:35:57.143
> 
> 标签：xcode, file-management

我正在制作一款名为“梯子”的游戏，但现在我将其称为“桥梁”。我所有的文件名以及属性和方法名称都使用“梯形图”，我只想将所有名称完全更改为“桥”。

我刚刚在搜索导航器中进行了查找和替换，结果出现了无数错误。

我想我只是要重写整个程序，这会很糟糕，但我只是从几个文件中复制粘贴代码，然后重写故事板。

主要问题是应用程序的标题和文件名；我不知道如何正确更改这些。正确的程序是什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-28T17:38:33.773

在 Project Navigator 中编辑项目名称（显示为描述 xcodeproj 文件）。完成此操作后，Xcode 会询问您是否希望它使用新名称更新项目的其余部分。

# java - OutputKeys.INDENT 不影响节点，从另一个文档复制

> ID：11703236
> 
> 赞同：2
> 
> 时间：2012-07-28T17:36:13.353
> 
> 标签：java, xml, dom

我将 XML 文件读入 org.w3c.dom.Document，通过 getElementsByTagName 找到一个节点，以这种方式从其他文档追加子节点：

```
foundNode.appendChild(document.adoptNode(othersDocumentNode.cloneNode(true))); 
```

之后，我将结果保存到 StringWriter：

```
Transformer transformer = TransformerFactory.newInstance().newTransformer();
transformer.setOutputProperty(OutputKeys.INDENT, "yes");
transformer.setOutputProperty("{http://xml.apache.org/xslt}indent-amount", "20");
transformer.transform(
    new DOMSource(document),
    new StreamResult(out)
); 
```

结果我得到这样的文件：

```
<document>
                   <foundNode>
<nestedContent>
  <content/>
</nestedContent>
                   </foundonde>
</document> 
```

即格式化不会影响嵌套内容。我希望所有文档都被格式化。我怎样才能做到这一点？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-29T12:46:40.937

输出缩进的效果被指定为实现定义。如果您不喜欢一个处理器处理它的方式，您可以随时尝试另一个（在这种情况下，尝试 Saxon）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-29T13:34:12.257

您很可能会发现 <foundNode> 的第一个子节点是一个文本节点，它只包含一个换行符。文本节点通常会阻止自动缩进器完成其工作，这包括 a) 换行和 b) 插入适当的缩进。当然，它是通过插入自己的文本节点来做到这一点的，因此人们可以看到为什么通常编写缩进器来避免在存在现有文本节点的情况下缩进。

但是因为保留了换行符，所以**看起来**压痕确实有效，只是它不遵守缩进宽度配置。

你能做些什么来解决这个问题取决于你任务的更广泛的背景。例如，您可以从嵌套内容中递归地修剪空白文本节点。

```
private static void removeWhitespace(Element el) {
    NodeList nl = el.getChildNodes();
    for (int i = 0; i < nl.getLength(); i++) {
        Node n = nl.item(i);
        if (n.getNodeType() == Node.TEXT_NODE) {
            String text = n.getTextContent();
            String trimmed = text.trim();
            if (trimmed.isEmpty())
                el.removeChild(n);
            else if (trimmed.length() < text.length())
                n.setTextContent(trimmed);
        }
        if (n.getNodeType() == Node.ELEMENT_NODE)
            removeWhitespace((Element) n);
    }
} 
```

（注意：这只是一个原始示例。如果您知道文本节点中没有任何有效负载数据，它就可以工作。）

在解析其他文档时调用[DocumentBuilderFactory.setIgnoringElementContentWhitespace](http://docs.oracle.com/javase/7/docs/api/javax/xml/parsers/DocumentBuilderFactory.html#setIgnoringElementContentWhitespace%28boolean%29)乍一看可能看起来很诱人，但请注意 JavaDoc 中描述的约束。

# javascript - 带有 jQ uery 的 Wikipedia 样式工具提示

> ID：11703237
> 
> 赞同：1
> 
> 时间：2012-07-28T17:36:24.517
> 
> 标签：javascript, jquery, html

当您将鼠标悬停在参考链接 ( `[1]`) 上时，维基百科的工具提示使用什么库？

或者也许有一个模仿该功能的库（允许您插入许多不同的 HTML 元素等）。

所需的库需要能够与 jQuery/jqUI 一起使用（因此它不能基于原型等），或者它可以单独工作。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-28T17:42:27.290

通过少量的谷歌搜索，您可以找到许多文章和源代码：

1.  [http://speckyboy.com/2009/09/16/25-useful-jquery-tooltip-plugins-and-tutorials/](http://speckyboy.com/2009/09/16/25-useful-jquery-tooltip-plugins-and-tutorials/)
2.  维基百科工具提示 jQuery： http: [//finndorby.com/?p=184](http://finndorby.com/?p=184)

# css - CSS 是否有 :blur 选择器（伪类）？

> ID：11703241
> 
> 赞同：73
> 
> 时间：2012-07-28T17:36:59.593
> 
> 标签：css, css-selectors, pseudo-class

我知道有一个`:focus`选择器。我似乎找不到`:blur`选择器的使用或文档。有吗？

* * *

## 回答 #1

> 赞同：121
> 
> 时间：2012-07-28T17:47:46.847

CSS中没有`:blur`伪类。

[动态伪类](http://www.w3.org/TR/selectors/#dynamic-pseudos)与其他伪类以及实际上所有其他选择器一样，表示*状态*；它们不代表文档树中状态之间的*事件*或*转换。**也就是说*：`:focus`伪类代表一个焦点元素；它不代表一个刚刚*获得*焦点的元素，也不存在一个伪类来代表一个刚刚*失去*焦点的元素。**`:blur`**

 ***同样，这适用于`:hover`伪类。虽然它表示一个上面有一个指针设备的元素，但对于刚刚被*指向*`:mouseover`的元素既没有伪类，也没有刚刚被*指向*的元素的伪类。*`:mouseout`*

 **如果您需要将样式应用于*未*聚焦的元素，您有两种选择：

1.  使用`:not(:focus)`（浏览器支持较少）：

    ```
    input:not(:focus), button:not(:focus) {
        /* Styles for only form inputs and buttons that do not have focus */
    } 
    ```

2.  声明适用于任何元素的规则，无论其焦点状态如何，并覆盖具有焦点的元素：

    ```
    input, button {
        /* Styles for all form inputs and buttons */
    }

    input:focus, button:focus {
        /* Styles for only form inputs and buttons that have focus */
    } 
    ```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-07-28T17:40:23.037

不，CSS 没有 blur 伪选择器，大概是因为 blur 更像是一个事件而不是一个状态。（不清楚什么时候应该失去模糊状态）。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-07-28T17:46:42.873

默认情况下，所有常规选择器都不聚焦。所以你不需要特殊的模糊选择器。

这些是优先选择器。

```
.myButton
.myButton:hover
.myButton:focus
.myButton:active 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2016-04-25T23:30:29.203

使用一般过渡来设置模糊过渡。

```
.example {
  transition-property: opacity;
  transition-duration: 2s; /* This will happen after the hover state and can also be used for consistency on the overall experience */
  opacity: 0;
}
.example:hover {
  opacity: .8;
  transition-duration: .3s;
  transition-delay: .1s;
} 
```*****

# html - CSS 背景图片的动态宽度

> ID：11703242
> 
> 赞同：0
> 
> 时间：2012-07-28T17:37:02.697
> 
> 标签：html, css, html-lists

我的页面上有设置菜单栏，使用列表和 CSS 来显示菜单元素。在菜单按钮的右侧，在本例中为“主页”，我有一个空栏元素，我想在关闭菜单栏宽度结束元素之前将其扩展到页面的宽度。我试图将宽度设置为 100%，这会导致它中断到下一行并填充页面的整个宽度，如下所示。关于我如何将所有内容保持在同一行并让空元素的宽度是动态的有什么想法吗？

的HTML：

```
<div>
   <li class="menu-home">
      <a href="#">&nbsp;</a>
   </li>
   <li class="menu-bar"> </li>
   <li class="menu-bar-right"> </li>
</div> 
```

CSS：

```
li.menu-bar {
   position: static;
   float: left;
   list-style-type: none;
   background-image: url('top.png');
   border-style: none;
   border-width: 0px;
   padding: 0px;
   height: 34px;
   width: 100%;
} 
```

问题：

![在此处输入图像描述](../Images/3b3df7d5e0d5bc02f24ae3508c2915fa.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-28T17:56:49.467

您可以分别`float`将`'home' and 'right'`LI 分配给`left and right`。任何`LIs`出现`home and right` `LIs`在标记下方的内容都会溢出到中心区域。

[http://jsfiddle.net/gwmFk/1/](http://jsfiddle.net/gwmFk/1/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-28T19:22:06.827

如果您知道主页按钮的宽度，您可以`display: inline-block;`在栏的其余部分使用，并给它一个等于该宽度的右边距（加上任何填充或空间等）

你知道按钮的宽度吗？

# session - 如何使用 Wicket 在会话中存储用户数据？

> ID：11703250
> 
> 赞同：3
> 
> 时间：2012-07-28T17:37:35.240
> 
> 标签：session, authentication, wicket

*我正在使用“Wicket in Action”一书来学习 Wicket。*

## 我做了什么（可以安全跳过）

我想创建这样的工作流程：

*   用户第一次打开页面——打印出“用户未登录”
*   用户进入登录页面
*   用户登录（成功）
*   用户被重定向到主页 - 并打印出有关用户的信息

书中都有描述，理论上看起来还可以。有一个用于用户数据的类 ( `UserData`)，还有`MySession`一个保存用户数据的类 session ( )。会话在 Wicket 中创建`MyWebApplication`，调用`newSession`方法。

但结果是——它不起作用。

## 问题

成功登录后用户数据被删除。问题是创建会话：

*   进入页面，加
*   进入登录页面，加上
*   回到主页

结果创建了 6 个会话。当然，每个新会话都会杀死前一个会话，以及所有数据。

**问题：**那么如何在会话中正确存储用户数据，或者更确切地说如何使会话像真实会话一样工作？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-29T10:43:05.277

找到了！似乎 Wicket 故意放弃会话（默认情况下），所以如果一个人想要保留它，她/他必须通过调用`bind`会话来明确声明它。在 Craig Tataryn 的帖子中了解更多信息：

[http://basementcoders.com/2008/10/sessions-in-wicket/](http://basementcoders.com/2008/10/sessions-in-wicket/)

# java - 我可以编写小程序（数据库）在服务器上的共享驱动器中运行吗

> ID：11703253
> 
> 赞同：0
> 
> 时间：2012-07-28T17:37:49.310
> 
> 标签：java, applet

我可以编写一个 Java 小程序（在网页中）来控制服务器共享驱动器中的 SQlite 数据库，以便我公司的所有员工都可以访问它吗？

最后，我想给所有员工一个链接（/server/myFile/program.html），他们可以访问他们需要的信息。我还想嵌入一个像 iText 这样的 pdf 引擎来生成报告。小程序是否适合此类任务，或者我会遇到与安全管理器相关的问题。我需要你的建议。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-28T17:45:25.387

好吧，如果您需要对 SQLite 之类的资源进行共享访问，最好将您的小程序拆分为 UI 组件（小程序）和一个控制对 SQLite 数据库访问的服务器组件。虽然 SQLite 支持多客户端访问，但您可能会发现与通过 applet 直接访问相比，您需要更好地控制数据库资源（而且我不完全确定 JRE 沙箱是否会让您访问共享文件系统)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-03T19:40:35.183

为了扩展 Dataknife 的答案（因为他所说的所有内容都是正确的，而且我不想成为那些鹦鹉学舌（重复）每个人的人之一），沙盒中的 JRE 将不允许您访问共享文件系统。不过，有一个简单的解决方案。至少在整个测试过程中，您可以对您的小程序进行自我签名。这在此处进行了解释->[解释](http://linuxpoison.blogspot.com/2008/06/how-to-create-self-signed-certificates.html) ，或者我可以为您简化，

1.  打开`cmd.exe`
2.  输入以下内容：`cd "C:\Program Files\Java\jdk1.7.0_05\bin"`
    ---或类似的东西，它指向的位置必须具有以下文件：`keytool.exe`和 `jarsigner.exe`
3.  现在命令提示符指向那里，输入这一行：`keytool -genkey -keyalg rsa -alias test -validity 3650`然后按照提示进行操作。这将创建一个名为“test”的密钥，它将签署一个 jar 文件 10 年。
4.  现在你有了这个，编译你的类文件并将它们导出到一个 .jar 文件中
5.  现在这里是您实际签名的地方。返回 cmd.exe 并输入以下内容：`jarsigner "PATH_TO_YOUR_JAR_FILE\YOUR_FILE.jar" test`输入密码
6.  现在应该对其进行签名，以检查它是否已签名，键入以下内容：`jarsigner -verify -verbose -certs "PATH_TO_YOUR_JAR_FILE\YOUR_FILE.jar"`
7.  要运行小程序，请照常将其嵌入到 html 文件中，但`archive="YOUR_FILE.jar"`在标记的代码部分之后添加代码

现在，如果您必须从浏览器中对其进行多次调试，则不必重新导出项目。首先运行程序（编译类文件）然后使用winRAR打开你的jar文件，删除自上次签名以来更改的所有类文件，然后使用添加按钮手动添加它们，进入项目的bin文件夹，然后选择您删除的类文件（以及自上次签名以来添加的任何文件）。现在转到 cmd.exe 并从上面重复步骤 2、5 和 6。

希望这可以帮助你，迪伦

# iphone - 是否需要“synchronizeFile”来保证 iPhone 上的文件完整性？

> ID：11703254
> 
> 赞同：2
> 
> 时间：2012-07-28T17:37:58.917
> 
> 标签：iphone, ios, file-io

我在 iPhone 应用程序中遇到问题，当应用程序重新启动时，某些文件在应用程序运行时显示为 0 大小。我已经检查了我的代码。这些文件的编写方式基本上是：

```
 NSFileHandle *fHandle = [NSFileHandle fileHandleForWritingAtPath: myFileName];
   do 
   {
        // code to set value of myNSData
        [fHandle writeData: myNSData];
        // some more logic here
   } 
   while (!done)

   [fHandle closeFile]; 
```

我已经在模拟器和真实设备上看到了这个问题。它只是偶尔发生，所以情况很难追踪。

我的问题是：我是否需要调用 [fHandle synchronizeFile] 来确保数据进入永久存储？当我重新打开应用程序时，iOS 是否有可能在将文件缓冲区发送到永久存储之前丢失文件缓冲区中的数据，从而导致 0 大小的文件？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-28T18:20:58.807

根据[文档](https://developer.apple.com/library/mac/#documentation/Cocoa/Reference/Foundation/Classes/nsfilehandle_Class/Reference/Reference.html#//apple_ref/doc/uid/20000304-DontLinkElementID_34)，这是有保证的：

```
同步文件
导致所表示的文件的所有内存数据和属性
由接收方写入永久存储。

- (void)synchronizeFile

讨论
此方法应由需要
文件始终处于已知状态。对此的调用
方法在内存被刷新之前不会返回。

```

所以只要你调用`synchronizeFile`，就可以确定你写的所有内容都被刷新了。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-28T17:44:25.700

我不确定写入数据时的 NSFileHandle 结果，但我建议使用 NSData 的`writeToFile:atomically:`方法，因为“原子”标志可以满足您的要求 - 它保证所有数据都已写入，或者没有。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-28T17:44:44.593

据我所知，它不需要被调用（也许除非你做了一些非常棘手的线程/GCD/什么）。对我来说，只需调用 writeData: 和 closeFile 就足够了。

# javascript - 如何一起使用 JQuery 日期选择器和时间选择器

> ID：11703255
> 
> 赞同：0
> 
> 时间：2012-07-28T17:38:04.880
> 
> 标签：javascript

我想一起实现 JQuery Datepicker 和 Time picker。我下载了插件。我使用这个 JS 来配置它：

```
<script type="text/javascript" src="resources/js/timepicker-addon.js"></script>
....
                       <script type="text/javascript">
                            //For calendar
                            $(".datepicker").datepicker({
                                inline: true,
                                showWeek: true,
                                firstDay: 1,
                                dateFormat: 'dd-MM-yy',
                                timeFormat: 'h:m',
                            separator: ' @ '
                            });                            
                        </script> 
```

但是当我打开 JSF 页面时，我看到了简单的日历。你能帮我实现时间选择器吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-28T17:40:08.307

您可以使用本文推荐的内容：http: [//trentrichardson.com/examples/timepicker/](http://trentrichardson.com/examples/timepicker/)

使用后，您将看到以下内容：

![在此处输入图像描述](../Images/e4a502a66c9078fdee55041fb039b788.png)

# android - Android Activity Intent 在关机后仍然存在

> ID：11703256
> 
> 赞同：6
> 
> 时间：2012-07-28T17:38:05.933
> 
> 标签：android, android-intent, android-activity, notifications, destroy

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-28T20:57:59.127

这是一种解决方法 - 而不是 IMO 的解决方案。

## 问题

请记住，问题是 onCreate() 和 onNewIntent() 无论如何都保持给活动相同的意图（没有什么是粘性的）。最严重的违规者是 onCreate()，因为*Bundle savedInstanceState*始终为空。

## 解决问题

我创建了一个可序列化的（让调用是 sFOO）类，它包含意图动作和来自意图附加内容的时间戳。在 onCreate() 期间，我加载了这个序列化类 (sFOO)。在 onStart() 期间，我将 sFOO 与正在处理的意图进行比较。如果一切都是新的，我知道需要处理意图并更新 sFoo 然后保存。如果不是，我无视意图。

## 你需要代码吗？

在 onStart()

```
Intent activityIntent = this.getIntent();       
    if (activityIntent != null)
    {                         
        if (activityIntent.getAction() != null)
        {                       
            boolean newIntent = false;

            //Is the intent action being processes same as previous? 
            if (activityIntent.getAction().compareTo(this.mLastProcessedIntent.mLastIntentProcessedAction) == 0)
            {
                if (activityIntent.getExtras() != null)
                {
                    //Is the intent time stamp being processed same as previous?
                    if (activityIntent.getExtras().getLong(TIME_STAMP_KEY) != this.mLastProcessedIntent.mLastIntentProcessedTimestamp)
                    {                           
                        newIntent = true;                                                       
                    }
                }
            }
            else
            {
                Log.d(TAG,"Last processed intent action does not equal new one.");
                newIntent = true;
            }

            if (newIntent)
            {
                 updateAndSaveProcessedIntent();
                 /*YOUR CODE HERE TO HANDLE INTENT*/
            }

        }
    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-28T17:52:47.503

听起来您用来启动 Activity 的 Intent 可能已作为“粘性” Intent 广播。粘性 Intent 使 Intent 即使在被消耗后仍然可用。如果是这种情况，您的应用将获得与之前使用的相同的 Intent。如果您可以检查正在广播该 Intent 的任何内容，以查看它是否是粘性 Intent。您将在清单中看到这一点：

```
<uses-permission android:name="android.permission.BROADCAST_STICKY"/> 
```

它将使用以下方法发送：

```
sendStickyBroadcast(intent); 
```

如果您没有能力改变它（如果它不是您的应用程序调用它），那么您可能只需要找到一种适合您的应用程序的方法来处理它。这只是没有看到任何代码的一种可能性。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-21T07:20:17.880

我的解决方案是首先将我的活动更改为 `android:launchMode="singleTop"` 然后使用 onNewIntent

`@Override protected void onNewIntent(Intent intent) { super.onNewIntent(intent); setIntent(intent); }`

# c - printf() 的异常行为？

> ID：11703257
> 
> 赞同：5
> 
> 时间：2012-07-28T17:38:12.890
> 
> 标签：c

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-28T17:40:02.080

```
printf("%f",9/5); 
```

该语句是**未定义**的行为，因为参数必须是 type`double`并且`9 / 5`是 type `int`。

用于`9 / 5.0`具有类型的参数`double`（以及正确的浮动除法）。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-07-28T17:39:35.597

`9/5`是类型`int`。`int`将参数传递给`printf`with`"%f"`具有未定义的行为。

`9.0/5.0`如果你想试试`1.800000`，或者`(double)(9/5)`如果你想`1.000000`

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-07-28T17:41:32.710

为什么是这样？

所以 9 / 5 是通过将两个整数相除得到的——两个整数相除得到一个整数值 1。但是，由于它是一个 int，并且`%f`指定的对象需要一个浮点数，因此这是未定义的行为。

Ps.：你可能想要

```
9.0 / 5 
```

或者

```
9 / 5.0 
```

或者

```
9.0 / 5.0 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-07-28T17:38:55.193

回复：*程序的输出不应该是 1.000000 吗？*

如果您的除法会导致浮点值而不是`int`. 由于您尝试`int`使用 `%f`格式规范打印 an，因此结果是*未定义*的行为。

更多细节：

有两个相关的问题：

1.  您从除法中得到了`int`eger 结果，但尝试使用浮点值的格式`%f`

2.  （您的问题似乎暗示您知道这一点）整数除法会产生一个*整数*，这就是`%f`格式说明符不合适的原因。当格式说明符和参数不匹配时，行为是*undefined*。

    为避免整数结果，请尝试：

    `9.0 / 5`或者`9 / 5.0`甚至`9.0 / 5.0`

    获得您期望的结果，*然后*说明`%f`符将是适当的并按预期工作。

    请注意，当您进行整数除法时，结果将是另一个整数。但是，如果*至少一个*操作数是浮点数，则另一个操作数也将提升为浮点数，并且除法将产生浮点值。

    使用整数除法，您会得到截断，这意味着结果的小数部分被丢弃。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-28T17:58:32.083

答案很简单。9 是整数，5 也是整数。当整数除以整数时，结果将为 0 并将升级为 0.00000，因为您在 printf() 中使用了 "%f" 如果您想要正确的结果，请执行 9.0/5 现在您肯定会得到正确的回答

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-07-28T17:39:05.107

那是因为`9/5`是 1 并且是整数类型。小数部分被简单地截断。`5.0/9`要实现您想要的，请强制除法使用or`5/9.0`或`5.0/9.0`or进行浮点运算`(float) 5/9`

当整数参数的类型与 绑定时`%f`，则行为未定义。

这在 C99 标准第 7.21.6.1 节第 9 节中进行了说明。该段引述如下：

> 如果转换规范无效，则行为未定义。**如果任何参数不是相应转换规范的正确类型，则行为未定义。**

# c# - 帧不循环更新

> ID：11703264
> 
> 赞同：0
> 
> 时间：2012-07-28T17:38:57.400
> 
> 标签：c#, emgucv

这是我的相关代码：

在表单的加载方法中：

```
Application.Idle += new EventHandler(delegate(object s, EventArgs ea)
{
    if (!recording)
    {
        currentFrame = getFrame();
        ib.Image = currentFrame;
    }
    else
    {
        ib.Image = recFrame;
    }
    }); 
```

按下按钮（ib 是表单上的 ImageBox）：

```
Measurements measurements = new Measurements();
String name = txtSampleName.Text;
ib.Image = recFrame;
stopwatch.Start();
recording = true;
while ((count = (int)Math.Floor(stopwatch.ElapsedMilliseconds/(double)1000)) < finalTime)
{
    currentFrame = getFrame();        
    Measurement currentMeasurement = new Measurement(name, currentFrame);
    measurements.add(currentMeasurement);
}
recording = false;
stopwatch.Stop();
measurements.write(txtDirectory.Text); 
```

问题是框​​架实际上并没有更新。currentFrame 采用循环开始之前帧的值。recFrame 在 ib.Image 中不可见 - ib 只是在循环期间挂起 - 并没有像应有的那样填充 recFrame）。currentMeasurement 按原样添加到测量列表中，但其中的帧不是来自相机的当前帧。下面是来自 getFrame() 的代码摘要，它要么不返回当前时间来自网络摄像头的内容，要么是并且 currentFrame 无论如何都采用其旧值：

```
private Image<Bgr, Byte> getFrame()
{
    // get the frame
    Image<Bgr, Byte> frame = capture.QueryFrame();

    // draw some stuff on top of the frame
    // ...

    // return
    return frame;
} 
```

我是否需要添加某种延迟来等待某事完成？我试过放入一个 Thread.Sleep 并没有任何帮助。我不明白问题是什么，所以一直无法寻找一个明智的解决方案。当我稍后将测量中的帧导出到 AVI 文件时，所有帧在循环开始之前都具有 currentFrame 的值，并且不会更改。

有任何想法吗？

非常感谢，

弗罗斯科伊。

编辑：在 currentMeasurement = new Measurement(name,currentFrame) 行上使用 currentFrame.Copy() 意味着当前捕获的帧实际上已放入列表中，然后写入 AVI 文件。我不明白为什么？另外，在ib中仍然没有显示recFrame，所以我也不明白这里发生了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-28T17:48:34.730

尝试你的 while 循环 DoEvents 调用

```
while ((count = (int)Math.Floor(stopwatch.ElapsedMilliseconds/(double)1000)) < finalTime) 
{ 
    currentFrame = getFrame(); 
    ib.Image = currentFrame; 
Application.DoEvents();               
    Measurement currentMeasurement = new Measurement(name, currentFrame); 
    measurements.add(currentMeasurement); 
} 
```

# c - 调用 fork() 时程序陷入死锁

> ID：11703268
> 
> 赞同：2
> 
> 时间：2012-07-28T17:39:16.673
> 
> 标签：c, operating-system, fork, pipe, shared-memory

我已经实现了一个基于共享内存的管道，当我尝试使用程序调用时遇到了`fork`问题`main`。

以下主要：

```
# include "my_shm_piper.h"
#include <stdio.h>
#include <stdlib.h>
#include <string.h>
#include <sys/wait.h>
#include <unistd.h>
#include <fcntl.h>
#include <sys/stat.h>
#include <sys/types.h>
#include <sys/shm.h>
#include <semaphore.h>
#include <sys/mman.h>
int main()
{
    int spd[2], pid, rb;
    char buff[4096];

    fork();  // that fork is okay , but if we put it after initPipe() , there's a deadlock

    initPipe();

    if (my_pipe(spd) < 0)
    {
        perror("my_pipe");
        exit(1);
    }

    if (fork()) 
    {
        rb = my_read(spd[0], buff, sizeof(buff));
        if (rb > 0)
            write(1, buff, rb);
    }

    else
    {
        my_write(spd[1], "hello world!\n", sizeof("hello world!\n"));
    }

    my_close(spd[0]);
    my_close(spd[1]);
    removePipe();
    return 0;
} 
```

在使用共享内存库实现的**匿名管道上使用。**

当我像上面那样输入`1st`命令时`fork()`，我的程序按预期工作，所有`hello-world`-s 都出现了。

但是当我把`fork`after `initPipe()`，有死锁，程序挂起：

```
int main()

{
    int spd[2], pid, rb;
    char buff[4096];

    initPipe();
    fork();   // now the fork() is after the initialization ,and we have a deadlock

    if (my_pipe(spd) < 0)
    {
        perror("my_pipe");
        exit(1);
    }

        // from here the same as above 
} 
```

我认为初始化阶段`fork()`只发生一次，而不是像第一次那样发生两次`main()`。

我猜写作/阅读阶段有问题，但我似乎找不到确切的来源。

感谢您对此事的帮助

谢谢

**编辑：**

H.文件中的结构：

```
struct PipeShm
{
    int init;
    int flag;
    sem_t *mutex;
    char * ptr1;
    char * ptr2;
    int status1;
    int status2;
    int semaphoreFlag;
}; 
```

这是 initPipe：

```
int initPipe()
{
    if (!myPipe.init)
    {
        myPipe.mutex = mmap (NULL, sizeof *myPipe.mutex, PROT_READ | PROT_WRITE,MAP_SHARED | MAP_ANONYMOUS, -1, 0);
        if (!sem_init (myPipe.mutex, 1, 1))
        {
            myPipe.init = TRUE;
        }
        else
            perror ("initPipe");
    }
    return 1;   // always successful
} 
```

这是 my_pipe()：

```
int my_pipe(int spd[2])
{
    spd[0] = shmget(2009, SHMSIZE, 0);      // for reading
    spd[1] = shmget(2009, SHMSIZE, 0666 | IPC_CREAT);  // for writing

     if (spd[0] == -1 || spd[1] == -1)
     {
             perror("shmget");
             exit(EXIT_FAILURE);
             return -1;
     }

     return 1;

} 
```

这是阅读：

```
ssize_t my_read(int spd, void *buf, size_t count)
{

    char array[4096];
    memset (array, '\0', 4096);
    ssize_t returnVal = 0;

    sem_wait (myPipe.mutex);

    int sval;
    sem_getvalue (myPipe.mutex, &sval);

    printf ("my_read - wait %d\n", sval);
    if (sem_wait (myPipe.mutex))
    perror ("sem_wait");

    printf ("my_read - proceed\n");

    if (myPipe.flag == FALSE)
    {
        myPipe.ptr1 = shmat (spd, NULL, 0); // attaching the segment
        if (myPipe.ptr1 == (void *) -1)
            error_out ("shmat");

        strncpy (array, myPipe.ptr1, count);
        array[count] = '\0';

        returnVal = strlen (array);
        buf = (void *) array;

        printf ("Output:%s", array);

    }

    else if (myPipe.flag == TRUE)
    {
        const size_t region_size = sysconf (_SC_PAGE_SIZE);
        myPipe.ptr1 = mmap (0, region_size, PROT_READ | PROT_WRITE, MAP_SHARED, spd, 0);
        if (myPipe.ptr1 == (void *) -1)
            error_out ("mmap");

        strncpy (array, myPipe.ptr1, count);
        array[count] = '\0';

        returnVal = strlen (array);
        buf = (void *) array;

        printf ("Output:%s", array);

    }

    return returnVal;

} 
```

这就是写作：

```
ssize_t my_write(int spd, const void *buf, size_t count)
{

       ssize_t returnVal = 0;
       sleep(1); // debug to ensure that read goes first for testing.
        if (myPipe.flag == FALSE)
        {
            myPipe.ptr2 = shmat (spd, NULL, 0); // attaching the segment
            if (myPipe.ptr2 == (void *) -1)
                error_out ("shmat");

            char *d = (char *) buf;

            returnVal = snprintf (myPipe.ptr2, count, "%s", d);
        }
        else
        {
            const size_t region_size = sysconf (_SC_PAGE_SIZE);

            // Map the region into memory.
            myPipe.ptr2 = mmap (0, region_size, PROT_READ | PROT_WRITE, MAP_SHARED, spd, 0);
            if (myPipe.ptr2 == MAP_FAILED)
                error_out ("mmap");
            char *d = (char *) buf;

            returnVal = snprintf (myPipe.ptr2, count, "%s", d);
        }

        sem_post (myPipe.mutex);
        return returnVal;

} 
```

进程就这样挂起 - 在第二个主要中（这是控制台上的输出）：

```
my_read - wait 0
my_read - proceed
Output:hello world!
// here it just gets stuck 
```

在第一个 main 中，控制台的输出是：

```
my_read  - wait 0
my_read  - wait 0
my_read - proceed
my_read - proceed
Output:hello world!
Output:hello world!
// here the program is done , the end 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-28T22:53:06.477

啊。棘手的一个，但我很无聊，想弄清楚。

基本上，您的等待和帖子是不平衡的。如果您查看您的 read() 函数，您会等待两次：

```
sem_wait (myPipe.mutex);
// some more code
if (sem_wait (myPipe.mutex))
  perror ("sem_wait"); 
```

但是你的 write 函数只发一篇文章。

但是，如果分叉发生在之前，为什么它会起作用`initPipe()`？因为您将信号量初始化为 1：

```
if (!sem_init (myPipe.mutex, 1, 1)) 
```

由于您在 init 之前分叉，因此您有两个不同的信号量，其值为 1；每个人都会收到一个帖子和两个等待，所以你很好。

在另一种情况下，您有一个值为 1 的信号量，它将接收两个帖子和四个等待。`1 + 2 < 4`，所以你的一位读者会坚持下去`sem_wait`。

顺便说一句，这是一种相当复杂的写作方式`pipe(2)`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-01T00:08:54.910

给定“工作”代码，您有两个管道，每个管道都有一个读取器和一个写入器。给定“不工作”代码，您有一个带有 2 个读取器和 2 个写入器的管道，并尝试创建相同的未命名管道两次。

当 2 个读取器和 2 个写入器时，同一管道的第二次创建将返回 -1 并将 errno 设置为 EEXISTS。

# ruby-on-rails - 由于'MAKE'，Rails 无法生成新项目

> ID：11703272
> 
> 赞同：0
> 
> 时间：2012-07-28T17:39:39.230
> 
> 标签：ruby-on-rails, gem, makefile

当我尝试开始一个新的 Rails 项目时，我被卡住了。它为 json 1.7.4 哭泣。我在窗户上。

```
rails new delete
      create
      create  README.rdoc
.
.
.
         run  bundle install
Fetching source index for https://rubygems.org/
Using rake (0.9.2.2)
Using i18n (0.6.0)
Using multi_json (1.3.6)
Using activesupport (3.2.6)
Using builder (3.0.0)
.
.
.
Using coffee-script (2.2.0)
Using rack-ssl (1.3.2)
Installing json (1.7.4) with native extensions
Gem::Installer::ExtensionBuildError: ERROR: Failed to build gem native extension
.
        C:/Programozas/Ruby192/bin/ruby.exe extconf.rb
creating Makefile

make
'make' is not recognized as an internal or external command,
operable program or batch file.

Gem files will remain installed in C:/Programozas/Ruby192/lib/ruby/gems/1.9.1/ge
ms/json-1.7.4 for inspection.
Results logged to C:/Programozas/Ruby192/lib/ruby/gems/1.9.1/gems/json-1.7.4/ext
/json/ext/generator/gem_make.out
An error occured while installing json (1.7.4), and Bundler cannot continue.
Make sure that `gem install json -v '1.7.4'` succeeds before bundling. 
```

它也为 gem install json -v '1.7.4' 删除了相同的错误。我该怎么办？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-28T19:36:14.630

您需要在具有可以理解的软件的环境中运行`make`。您的 windows 环境似乎没有这样的软件。

看起来在 Windows 上使用 Rails 进行开发的一种常见方法是使用[RubyInstaller](https://github.com/oneclick/rubyinstaller)。SO上有类似问题*的人（谷歌搜索30秒后）*已经修复了与RubyInstaller附带的**[DevKit](https://github.com/oneclick/rubyinstaller/wiki/development-kit)**类似的问题，因为它提供了“......一个“健全”的环境......带有make，gcc，sh和类似的*nix 构建工具已安装..."

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-29T12:43:38.807

我在 Windows 7（32 位）上创建新项目时遇到了类似的问题。我已经在我的 \DevKit 中安装了 DevKit。我收到的错误消息说：

请更新您的 PATH 以包含构建工具或从“http://rubyinstaller.org/downloads”下载 DevKit，并按照“http://github.com/oneclick/rubyinstaller/wiki/Development-Kit”中的说明进行操作。安装 json (1.7.4) 时发生，并且 Bundler 无法继续。`gem install json -v '1.7.4'`在捆绑之前确保成功。

C:\myrailsproject>gem install json -v 1.7.4 错误：安装 json 时出错：“json”本机 gem 需要安装构建工具。

请更新您的 PATH 以包含构建工具或从“http://rubyinstaller.org/downloads”下载 DevKit，并按照“http://github.com/oneclick/rubyinstaller/wiki/Development-Kit”中的说明进行操作

更新 gem 文件以使用 json 1.7.3 运行一切正常

# tomcat - 对于 URLRewriter tukey，一旦规则匹配，我如何停止处理进一步的规则

> ID：11703276
> 
> 赞同：0
> 
> 时间：2012-07-28T17:40:02.583
> 
> 标签：tomcat, url-rewriting, tuckey-urlrewrite-filter

我正在使用带有 tuckey 的 tomcat 进行 URLRewrite。我的 urlrewrite.xml 中几乎没有规则。我如何确保其中一条规则匹配；它停止处理进一步的规则！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-28T18:15:14.380

找到了答案；提到“last = true”例如：

```
 <rule >
        <from>/kids/(.*)$</from>
        <to type="forward" last="true">/kids/$1.jsp</to>
    </rule> 
```

# math - 三次贝塞尔曲线段

> ID：11703283
> 
> 赞同：5
> 
> 时间：2012-07-28T17:40:37.637
> 
> 标签：math, graphics, coordinates, bezier

如果我有描述贝塞尔曲线 P1、P2、P3、P4 的 4 个点（其中 P1 和 P4 是曲线的端点，P2 和 P3 是曲线的控制点），我怎么能找到描述的点只有这条贝塞尔曲线的一部分？

我找到了这个[答案](https://stackoverflow.com/questions/878862/drawing-part-of-a-bezier-curve-by-reusing-a-basic-bezier-curve-function)，这正是我正在寻找的，但答案似乎是错误的。如果我在应该代表整个贝塞尔曲线的方程中设置 t0=0 和 t1=1，则结果点无效。它们不等于原始点。

似乎该解决方案与 De Casteljau 算法有关，但我无法理解它是如何工作的。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-07-28T19:51:15.827

是的，[De Casteljau 的算法](http://en.wikipedia.org/wiki/De_Casteljau%27s_algorithm)是要走的路。

# 参数化

如果您的曲线没有从*t* =0到*t* =1 正确参数化，那么您似乎使用错误的方程来描述您的曲线。[维基百科](http://en.wikipedia.org/wiki/B%C3%A9zier_curve#Cubic_B.C3.A9zier_curves)为您提供了正确的公式：

> B( *t* ) = (1−<i>t) ³ *P* [1] + 3(1−<i>t) ² *t* *P* [2] + 3(1−<i>t) *t* ² *P* [3] + *t* ³ *P* [4]
> 
> [我将维基百科中从零开始的索引调整为你的问题中的从一开始。]

如果你设置*t* =0，你会得到*P* [1]，你的起点。如果您设置*t* =1，您将获得*P* [4]，即您的端点。在这两者之间，曲线的形状由这些点和两个控制点*P* [2]和*P* [3]决定。

# De Casteljau 算法

让*t*成为您想要切割曲线的参数。假设您只想保留初始部分。*你画出从P* [1]到*P* [2]、从那里到*P* [3]和从那里到*P* [4]的三条线。这些线中的每一条都以其长度的分数*t*进行分割，即在分割点之前的线的长度与整个长度相关，如*t*： 1。您现在有三个新点*P* [12]到*P* [34]。再次执行相同操作以获得两个点*P* [123]和*P* [234], 并再次获得单点*P* [1234]。最后一点是 B( *t* )，即截断曲线的端点。与之前一样，起点是*P* [1]。新的控制点是我们刚刚构建的*P* [12]和*P* [123 。]

删除曲线的初始部分的工作方式相同。因此，您可以分两步修剪曲线的两端。您获得了一组新的控制点，它们准确地（直到您使用的数值精度）描述了原始曲线的一段，不涉及近似值或类似的东西。

您可以将上面的所有几何描述转换为代数公式，并且在完美的世界中，您应该从您引用的问题的[答案中得出结果。](https://stackoverflow.com/a/879213/1468366)

唉，这似乎不是一个完美的世界。在撰写本文时，这些公式仅使用了二次多项式，因此它们无法描述三次曲线上的端点。正确的公式应该如下：

*   *P'* [1] = *u* [0] *u* [0] *u* [0] *P* [1] + ( *t* [0] *u* [0] *u* [0] + *u* [0] *t* [0] *u* [0] + *u* [0] *u* [0] *t* [0] ) *P* [2] + ( *t* [0] *t* [0] *u* [0] + *u* [0] *t* [0] *t* [0] + *t* [0] *u* [0] *t* [0] ) *P* [3]+ *t* [0] *t* [0] *t* [0] *P* [4]
*   *P'* [2] = *u* [0] *u* [0] *u* [1] *P* [1] + ( *t* [0] *u* [0] *u* [1] + *u* [0] *t* [0] *u* [1] + *u* [0] *u* [0] *t* [1] ) *P* [2] + ( *t* [0] *t* [0] *u* [1] + *u* [0] *t* [0] *t* [1] + *t* [0] *u* [0] *t* [1] ) *P* [3]+ *t* [0] *t* [0] *t* [1] *P* [4]
*   *P'* [3] = *u* [0] *u* [1] *u* [1] *P* [1] + ( *t* [0] *u* [1] *u* [1] + *u* [0] *t* [1] *u* [1] + *u* [0] *u* [1] *t* [1] ) *P* [2] + ( *t* [0] *t* [1] *u* [1] + *u* [0] *t* [1] *t* [1] + *t* [0] *u* [1] *t* [1] ) *P* [3]+ *t* [0] *t* [1] *t* [1] *P* [4]
*   *P'* [4] = *u* [1] *u* [1] *u* [1] *P* [1] + ( *t* [1] *u* [1] *u* [1] + *u* [1] *t* [1] *u* [1] + *u* [1] *u* [1] *t* [1] ) *P* [2] + ( *t* [1] *t* [1] *u* [1] + *u* [1] *t* [1] *t* [1] + *t* [1] *u* [1] *t* [1] ) *P* [3]+ *t* [1] *t* [1] *t* [1] *P* [4]

其中*u* [0] = 1 - *t* [0]和*u* [1] = 1 - *t* [1]。

请注意，在括号中的表达式中，至少有一些项是相等的并且可以组合。我没有这样做，因为我相信这里所说的公式会使模式更清晰。*您可以简单地为x*和*y*方向独立执行这些计算来计算新的控制点。

# php - wkhtmltopdf 问题

> ID：11703285
> 
> 赞同：1
> 
> 时间：2012-07-28T17:40:39.090
> 
> 标签：php, wkhtmltopdf

1) 我将“wkhtmltopdf-i386”重命名为“wkhtmltopdf”，并将“wkhtmltopdf”上传到我的服务器中名为“/usr/local/bin”的文件夹中

2）我上传了php集成脚本，在同一个文件夹中，并将其命名为“pdf_class.php”（https://github.com/aur1mas/Wkhtmltopdf/blob/master/Wkhtmltopdf.php）

我将这两个文件上传到“/home/kacmaz/domains/xxx.com/public_html/test_pdf/”

3）我在同一个文件夹中上传了一个名为“test.php”的文件，其中包含：

```
 <?php

include "pdf_class.php";

  try 
{
    $wkhtmltopdf = new Wkhtmltopdf(array('path' =>'/home/kacmaz/domains/xxx.com/public_html/test_pdf'));
    //$wkhtmltopdf = new Wkhtmltopdf(array('path' => APPLICATION_PATH . '/../public/uploads/'));
    $wkhtmltopdf->setTitle("Title");
    $wkhtmltopdf->setHtml("http://www.google.com");
    $wkhtmltopdf->output(Wkhtmltopdf::MODE_DOWNLOAD, "myfile.pdf");
} 
catch (Exception $e) 
{
    echo $e->getMessage();
}
?> 
```

它创建像“779753975.html”“749335291.html”这样的文件到“/home/kacmaz/domains/xxx.com/public_html/test_pdf/”（文件是21字节，它写“http://www.google. com”在文件中）

但它给出了这个错误

> WKHTMLTOPDF 没有返回任何数据

而且没有pdf文件，我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-14T13:42:23.137

我目前无法真正复制环境，但我建议尝试替换

```
$wkhtmltopdf->setHtml("http://www.google.com"); 
```

和

```
$wkhtmltopdf->setHtml("<h1>This Is A Test</h1><p>Ponies</p>"); 
```

看看会产生什么。听起来好像正在生成一些临时文件，并且 setHtml 将其内容写入临时文件，并且正在根据这些文件生成 pdf，这就是为什么您没有得到任何数据，因为它实际上不是 HTML 内容。

此外，与往常一样，在命令行中使用类似内容进行测试以查看其是否有效可能会消除一些问题。

# android - Android ListView 刷新单行 - 我应该从 ArrayAdapter 隐藏 ListView

> ID：11703293
> 
> 赞同：0
> 
> 时间：2012-07-28T17:41:50.457
> 
> 标签：android

我指的是[Android ListView 刷新单行](https://stackoverflow.com/questions/2123083/android-listview-refresh-single-row)

但是，要使用上述链接技术，我必须`ListView`使`ArrayAdapter`.

目前，为了有一种非常优化的方式来更新显示`ListView`，我需要对我的`ArrayAdapter`

```
public PortfolioArrayAdapter(ListView listView, Activity activity, List<TransactionSummary> transactionSummaries) {
    super(activity, R.layout.portfolio_management_row_layout, transactionSummaries);
    this.activity = activity;
    this.listView = listView;
    ...
}

// Do not use notifyDataSetChanged, as it will refresh entire ListView.
// We only want to update certain row.
private void refreshView(final int row) {
    final int firstVisiblePosition = listView.getFirstVisiblePosition();
    final int lastVisiblePosition = listView.getLastVisiblePosition();
    if (row < firstVisiblePosition || row > lastVisiblePosition) {
        return;
    }
    this.activity.runOnUiThread(new Runnable() {
        public void run() {
            final View view = listView.getChildAt(row - firstVisiblePosition);
            // Refresh?
            getView(row, view, listView);                
        }
    });
} 
```

* * *

但是，我觉得传递`ListView`引用很不舒服`ArrayAdapter`，因为我认为它们应该相互独立？（由于 MVC？）

有没有更好的方法可以让*ListView 刷新单行*？

在 Java Swing 中，他们以一种非常简洁的方式做到了这一点。它们为表模型提供了以下方法。

[fireTableCellUpdated（行，列）；](http://docs.oracle.com/javase/1.5.0/docs/api/javax/swing/table/AbstractTableModel.html#fireTableCellUpdated%28int,%20int%29)

因此，该模型可以告诉视图哪一行和哪一列受到影响，而无需知道视图是谁。

在 Andorid 中，我的模型 ( `ArrayAdapter`) 需要知道，`ListView`是视图，只有这样我的模型才能与视图对话。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-28T17:47:59.737

我不确定为什么您认为您的 ArrayAdapter 不应该能够引用您的 ListView。ListView 是您的 View 和 ArrayAdapter 您的模型，因此它们需要交互。来自维基百科：

> 当模型的状态发生变化时，模型会通知其关联的视图和控制器。此通知允许视图生成更新的输出，并且控制器可以更改可用的命令集

这不正是侦听器原理的工作原理吗，您将视图添加到侦听对象列表中并在任何更改时通知它们。

# vim - 如何将可变参数传递给 vimscript 中的另一个函数？

> ID：11703297
> 
> 赞同：13
> 
> 时间：2012-07-28T17:42:16.980
> 
> 标签：vim, variadic-functions

我想为插件的函数编写一个包装器，但它使用可变参数（`...`）。如何将我的函数接收到的相同参数传递给插件的函数？

例子：

```
function! PluginInterface(...)
    for i in a:000
        echo i
    endfor
endfunction

function! MyInterface(...)
    echo a:1 . ' is great'
    call PluginInterface(a:000)
endfunction

echo '>> Their call'
call PluginInterface('hello', 'world')
echo '>> My call'
call MyInterface('hello', 'world') 
```

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2012-07-28T17:42:16.980

不要直接调用函数 ( `call PluginInterface(a:000)`)，而是使用`call()`：

```
call call("PluginInterface", a:000)
call call(function("PluginInterface"), a:000) 
```

（这看起来很奇怪，但`call()`它是一个函数，所以你仍然必须在它前面加上`:call`or`let x =`或其他接受 . 的东西`expr`。）

见`:help call()`。

# c# - 检查它是否是 sqldatareader 中的最后一条记录

> ID：11703305
> 
> 赞同：14
> 
> 时间：2012-07-28T17:43:20.563
> 
> 标签：c#, sql, sqldatareader

有没有办法检查我是否在最后一条记录上？谢谢

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-07-28T18:04:21.640

使用此模式来识别和处理结果中的最后一行：

```
if (reader.Read())
{
    var loop = true;
    while (loop)
    {
        //1\. Here retrive values you need e.g. var myvar = reader.GetBoolean(0);
        loop = reader.Read();
        if (!loop)
        {
            //You are on the last record. Use values read in 1.
            //Do some exceptions
        }
        else {
            //You are not on the last record.
            //Process values read in 1., e.g. myvar
        }
    }
} 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-07-28T17:47:41.213

除了“之后没有另一个”之外，没有。这可能意味着您需要缓冲该行，尝试读取，然后查看缓冲的数据（如果结果是最后一个）。

在很多情况下，当数据适中，你正在构建某种对象模型时，你可以只看构造的数据，即`List<T>`在使用阅读器时将所有行都做一个，然后**再看**最后一行在列表中。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-28T17:59:20.073

遍历`SqlDataReader`：

```
SqlDataReader reader = ...;
while(reader.Read())
{
    // the reader will contain the current row
} 
```

阅读器中没有任何内容告诉您这是最后一行。如果您仍然需要进入最后一行，也许将该行的数据存储在一个单独的变量中，您可以在退出循环后获取该数据。

其他选择是：

*   将数据放入 DataSet/DataTable
*   将数据存储在列表/数组中
*   以相反的顺序检索数据（重写您的查询），以便第一行是您想要的。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-28T17:59:36.407

另一种可能性是将信息放入数据集中。

您正在使用查询读取数据。我们称它为 q。请改用此查询：

```
select row_number() over (order by (select NULL)) as seqnum,
       count(*) over (partition by null) as numrecs
       q.*,
from (<q>) q
order by seqnum 
```

现在最后一条记录有 seqnum = numrecs，您可以在应用程序中对其进行测试。

顺便说一句，这假设您正在以无序的方式检索数据。如果要排序，请将条件放在 row_number() 的“order by”子句中。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-28T17:54:37.407

1.  如您所知，SQLDataReader 没有“行数”属性。你只是读到EOF。

2.  但是，DataSet*可以*。也许您可以替换 DataAdapter 和某种数据集或表：

    *   [http://social.msdn.microsoft.com/Forums/en-US/csharpgeneral/thread/dc198199-be24-473c-9973-746fe14d65ba/](http://social.msdn.microsoft.com/Forums/en-US/csharpgeneral/thread/dc198199-be24-473c-9973-746fe14d65ba/)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-07-28T18:09:12.803

如果不重复自己，即两次获取记录，您将无法做到这一点。这是一个更短的方法

```
System.Data.DataTable dt = new System.Data.DataTable();
dt.Load(myDataReader);
int recordCount = dt.Rows.Count;
if(recordCount > 0)
{
   if(dt.Rows[recordCount-1]["username"] == "wrong value")
     throw new Exception("wrong value");
} 
```

我临时写了这个，所以它没有经过测试，但这就是方法

# hadoop - hadoop管道编译错误

> ID：11703306
> 
> 赞同：0
> 
> 时间：2012-07-28T17:43:21.953
> 
> 标签：hadoop, mapreduce

我第一次尝试了 Hadoop Pipe (WordCount)，在编译过程中出现以下错误：

```
/usr/bin/ld: skipping incompatible /root/hadoop-0.20.205.0/c++/Linux-amd64-64/lib/libhadooppipes.a when searching for -lhadooppipes
/usr/bin/ld: cannot find -lhadooppipes  
/usr/bin/ld: skipping incompatible /root/hadoop-0.20.205.0/c++/Linux-amd64-64/lib/libhadooputils.a when searching for -lhadooputils
/usr/bin/ld: cannot find -lhadooputils 
```

这是否意味着我需要获取 Hadoop 源 tar 然后以某种方式编译？任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-05-21T03:23:43.687

你可以发布你的Makefile吗？

解决我的问题的一件事是我有一个 -m32 标志需要更改为 -m64。

确保检查标志，因为您的编译器很可能对架构感到困惑。

# ios - Facebook sdk io 从相册中获取照片

> ID：11703307
> 
> 赞同：2
> 
> 时间：2012-07-28T17:43:22.937
> 
> 标签：ios, xcode, facebook, sdk, photos

我得到了 facebook sdk op 并运行。我尝试获取相册的所有照片。目前我正在使用这个：

```
NSString *S = [[NSString alloc] initWithFormat:@"%s%@%s","https://graph.facebook.com/",albumID, "/photos"];
[facebook requestWithGraphPath:S andDelegate:self]; 
```

我也得到了一个结果，我尝试将其解析为一组照片或照片 ID。但是我尝试了几个小时并在每个地方搜索网络，但我找不到解决方案。我究竟做错了什么？

```
- (void)request:(FBRequest *)request didLoad:(id)result

        for (NSDictionary *anAlbum in [result objectForKey:@"data"]) {
            [arrayAllPhotos addObject:[anAlbum objectForKey:@"id"]];

            NSString *url = [[NSString alloc] initWithFormat:@"https://graph.facebook.com/%@/picture",[arrayAllPhotos objectAtIndex:counter]];

            UIImage *image = [UIImage imageWithData:[NSData dataWithContentsOfURL:[NSURL URLWithString:url]]];
        }
} 
```

这是我从 Facebook 得到的 JSON。提前致谢！

```
{
   "data": [
      {
         "id": "244119762368747",
         "from": {
            "name": "Eindhovens Studenten Corps Intro",
            "category": "Non-profit organization",
            "id": "235447296569327"
         },
         "picture": "http://photos-g.ak.fbcdn.net/hphotos-ak-snc7/392553_244119762368747_67274374_s.jpg",
         "source": "http://a7.sphotos.ak.fbcdn.net/hphotos-ak-snc7/s720x720/392553_244119762368747_67274374_n.jpg",
         "height": 480,
         "width": 720,
         "images": [
            {
               "height": 1365,
               "width": 2048,
               "source": "http://a7.sphotos.ak.fbcdn.net/hphotos-ak-snc7/s2048x2048/392553_244119762368747_67274374_n.jpg"
            },
            {
               "height": 640,
               "width": 960,
               "source": "http://a7.sphotos.ak.fbcdn.net/hphotos-ak-snc7/392553_244119762368747_67274374_n.jpg"
            },
            {
               "height": 480,
               "width": 720,
               "source": "http://a7.sphotos.ak.fbcdn.net/hphotos-ak-snc7/s720x720/392553_244119762368747_67274374_n.jpg"
            },
            {
               "height": 320,
               "width": 480,
               "source": "http://a7.sphotos.ak.fbcdn.net/hphotos-ak-snc7/s480x480/392553_244119762368747_67274374_n.jpg"
            },
            {
               "height": 213,
               "width": 320,
               "source": "http://a7.sphotos.ak.fbcdn.net/hphotos-ak-snc7/s320x320/392553_244119762368747_67274374_n.jpg"
            },
            {
               "height": 120,
               "width": 180,
               "source": "http://photos-g.ak.fbcdn.net/hphotos-ak-snc7/392553_244119762368747_67274374_a.jpg"
            },
            {
               "height": 86,
               "width": 130,
               "source": "http://photos-g.ak.fbcdn.net/hphotos-ak-snc7/392553_244119762368747_67274374_s.jpg"
            },
            {
               "height": 86,
               "width": 130,
               "source": "http://photos-g.ak.fbcdn.net/hphotos-ak-snc7/s75x225/392553_244119762368747_67274374_s.jpg"
            }
         ] 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-22T01:29:23.003

when you add objects to your `arrayAllPhotos` use `source` instead of `id`:

```
[arrayAllPhotos addObject:[NSUrl urlWithString:[anAlbum objectForKey:@"source"]]]; 
```

oh and then when you want to use these images do this:

```
UIImage *image = [[UIImage imageWithData:[NSData dataWithContentsOfUrl:[arrayAllPhotos objectAtIndex:indexOfObjectYouWant]]]]; 
```

hope it helps

# android - ViewGroup 的自定义子视图未显示。如何将自定义视图添加到扩展 ViewGroup 的类？

> ID：11703309
> 
> 赞同：0
> 
> 时间：2012-07-28T17:43:24.050
> 
> 标签：android, android-custom-view, mobile-application

我正在尝试创建一个小型 BrickBreaker 游戏。

到目前为止，我有一个 MainActivity.java、BrickBreakerView.java 和一个 Paddle.java。BrickBreakerView 扩展了 ViewGroup 类，而 Paddle 扩展了 View 类。我希望能够向 BrickBreakerView 添加一个 Paddle、Bricks、Ball 和一个记分板（我将创建的自定义视图类）。本质上，BrickBreakerView 将控制这些视图的交互。

MainActivity 的 xml 布局将 BrickBreakerView 添加到布局中。BrickBreakerView 在 onCreate 方法中实例化了一个 Paddle，它还将 paddle 添加为子视图 (addView())。

我已经覆盖了 Paddle 的 onDraw 方法来绘制一个给定 X 和 Y 位置的蓝色矩形。但是，当我运行我的程序时，我在屏幕上看不到任何东西。我已经使用 Log.d 进行了测试，以检查是否调用了 BrickBreakerView 和 Paddle 的构造函数。

谢谢你的帮助！另外，我是 Android 开发的新手，如果你们能就我的游戏结构给我一些意见，我将不胜感激：D！

以下是相关的代码片段。

这在我的主要活动中被调用：

```
 setContentView(R.layout.main); 
```

我的 main.xml 看起来像：.BrickBreakerView

```
 android:id="@+id/mainView"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    /> 
```

BrickBreakerView.java 类：

```
 public class BrickBreakerView extends ViewGroup{

public BrickBreakerView(Context context, AttributeSet attrs) {
    super(context, attrs);
    setBackgroundColor(Color.GRAY);
    Paddle paddle = new Paddle(context, 100, 400);
    paddle.setYPosition(400);
    addView(paddle);
    Log.d("print", "Brick Breaker View constructor");
}

@Override
protected void onLayout(boolean changed, int l, int t, int r, int b) {
    // TODO Auto-generated method stub
    Log.d("print", "onLayout called");
} 
```

}

Paddle.java 类：

```
 public class Paddle extends View{

private int myX, myY;

public Paddle(Context context, int xPos, int yPos) {
    super(context);
    // TODO Auto-generated constructor stub
    Log.d("print", "paddle constructor");
    myX = xPos;
    myY = yPos;
    invalidate();
}
public void setXPosition(int x) {
    myX = x;
    invalidate();
}
public void setYPosition(int y) {
    myY = y;
    invalidate();
}
@Override
protected void onDraw(Canvas canvas) {
    // TODO Auto-generated method stub

    Log.d("print", "onDraw called");
    super.onDraw(canvas);
    Paint paint = new Paint();
    paint.setColor(Color.BLUE);
    canvas.drawRect(myX, myY, myX+100, myY+50, paint);
} 
```

}

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-31T07:01:52.087

使桨实例成为砖块破坏者视图的成员变量。创建并将其添加到视图组 - 您正在执行此操作。在onLayout中，放入paddle.layout(0,0,100,100)

# php - 多个提交按钮不起作用

> ID：11703311
> 
> 赞同：0
> 
> 时间：2012-07-28T17:44:02.587
> 
> 标签：php

我正在寻找使用简单 php 的多个提交按钮的解决方案。

这是我的表单代码

```
 <!-- Widget Starts -->
                <div class="widget">
                    <div class="title js_opened">
                        <div class="icon"><img src="themes/<?php echo WEBSITE_ADMIN_PANEL_THEME; ?>/images/icons/navigation/pages<?php echo $retina_suffix; ?>.png" width="24" height="24" alt="" /></div>
                        <span>Fill The Fields Marked With *</span>
                    </div>
                    <div class="content">
                        <div class="form_row first">
                            <label>Title<span class="star">&nbsp;*</span></label>
                            <div class="form_right"><input type="text" name="title" maxlength="100" value="<?php echo $session->getSession("pages_title") ;?>" /></div>
                            <div class="clear"></div>
                        </div>
                        <div class="form_row last">
                            <label>Description<span class="star">&nbsp;*</span></label>
                            <div class="form_right"><textarea name="description" class="Editor"><?php echo $session->getSession("pages_description") ;?></textarea></div>
                            <div class="clear"></div>
                        </div>
                    </div>
                </div>
                <!-- Widget Ends -->

                <!-- Widget Starts -->
                <div class="widget">
                    <div class="title js_opened">
                        <div class="icon"><img src="themes/<?php echo WEBSITE_ADMIN_PANEL_THEME; ?>/images/icons/navigation/meta<?php echo $retina_suffix; ?>.png" width="24" height="24" alt="" /></div>
                        <span>Metadata Information</span>
                    </div>
                    <div class="content">
                        <div class="form_row first">
                            <label>Title</label>
                            <div class="form_right"><input type="text" name="meta_title" maxlength="250" value="<?php echo $session->getSession("pages_meta_title") ;?>" /></div>
                            <div class="clear"></div>
                        </div>
                        <div class="form_row">
                            <label>Keywords</label>
                            <div class="form_right"><textarea id="meta_keywords" name="meta_keywords"><?php echo $session->getSession("pages_meta_keywords") ;?></textarea></div>
                            <div class="clear"></div>
                        </div>
                        <div class="form_row">
                            <label>Description</label>
                            <div class="form_right"><textarea id="meta_description" name="meta_description"><?php echo $session->getSession("pages_meta_description") ;?></textarea></div>
                            <div class="clear"></div>
                        </div>
                        <div class="form_row">
                            <label>Robot</label>
                            <div class="form_right">
                                <select name="meta_robot">
                                    <option value="">Please Choose An Option</option>
                                    <option value="index, follow" <?php if ($session->getSession("pages_meta_robot")=="index, follow") echo "selected=\"selected\""; ?> >index, follow</option>
                                    <option value="noindex, follow" <?php if ($session->getSession("pages_meta_robot")=="noindex, follow") echo "selected=\"selected\""; ?> >noindex, follow</option>
                                    <option value="index, nofollow" <?php if ($session->getSession("pages_meta_robot")=="index, nofollow") echo "selected=\"selected\""; ?> >index, nofollow</option>
                                    <option value="noindex, nofollow" <?php if ($session->getSession("pages_meta_robot")=="noindex, nofollow") echo "selected=\"selected\""; ?> >noindex, nofollow</option>
                                </select>
                            </div>
                            <div class="clear"></div>
                        </div>
                        <div class="form_row last">
                            <label>Author</label>
                            <div class="form_right"><input type="text" name="meta_author" maxlength="50" value="<?php echo $session->getSession("pages_meta_author") ;?>" /></div>
                            <div class="clear"></div>
                        </div>
                    </div>
                </div>
                <!-- Widget Ends -->

                <div class="form_buttons">
                    <input type="submit" name="add" value="Save" />&nbsp;<span class="no_mobile">&nbsp;</span>
                    <input type="submit" name="add" value="Save &amp; New" />&nbsp;<span class="no_mobile">&nbsp;</span>
                    <input type="reset" value="Clear" />
                </div>
                </form>
                <!-- Form Ends --> 
```

这是我的php处理页面代码（我省略了将表单结果保存到数据库中的部分。

```
<?php
$submit = $_POST["add"];
if ($submit == "Save")
{
header("location:pages_view.php?type=success&msg=" .urlencode($msg));
exit();
}
else
{
header("location:pages_add.php?type=success&msg=" .urlencode($msg));
exit();
}
?> 
```

我想要实现的是，如果我在表单中按下第一个提交按钮，即保存，那么它应该保存表单并转到查看页面，如果我按下第二个提交按钮，即保存和新建，那么它应该保存表单数据和返回同一页面，即添加页面。

请帮我找出解决方案。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-28T18:07:39.977

检查是否设置了提交按钮的名称，并据此进行操作。

例如：

```
<?php
  if($_SERVER['REQUEST_METHOD'] == 'POST') // if form is submitted...
  {
    if(isset($_POST['save'])) // check whether it is the "Save" button that's being clicked
    {
      //code for saving
      echo 'saved';
    }
    else  // it's the "Save & New" button
    {
      //code for save and new
      echo 'save and new';
    }
  }
?>
<html>
<body>
  <form method="POST">
    <input type="text" name="msg" />
    <!-- and other input elements goes here.. -->

    <input type="submit" name="save" value="Save" />
    <input type="submit" name="savenew" value="Save & New" />
  </form>
</body>
</html> 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-07-28T18:02:33.350

在表单的某处创建一个隐藏字段：

```
<input type="hidden" id="myHiddenField" value="" name="add"> 
```

制作两个按钮：

```
<button onclick="formSubmit(save)">Save!</button>
<button onclick="formSubmit(something)">Something else!</button> 
```

然后应用一些Javascript：

```
<script language="javascript">
function formSubmit(tobesend) {
document.getElementById("myHiddenField").value(tobesend);
document.form.submit();
}
</script> 
```

它的作用是：单击按钮时，将隐藏字段的值设置为某个值，然后提交表单。在您的 PHP 文件中，您可以检查 $_POST['add'] 的值并执行您想做的任何事情。

注意：我对 javascript 相当陌生，所以这可能是一个非功能性代码。它只是为了展示如何实现你想要做的事情。

# redirect - 重定向和谷歌问题

> ID：11703317
> 
> 赞同：0
> 
> 时间：2012-07-28T17:44:52.050
> 
> 标签：redirect, seo, dns, traffic

我最近将我的首选域从非 www 设置为“www”，以防止搜索引擎中出现重复的内容。我认为选择一个并坚持下去是一件好事。我还必须设置一些 301 重定向，因为我更改了页面中的一些 slug 以提高我的排名。

我的网站是[http://www.ffmages.com](http://www.ffmages.com)，谷歌目前在没有“www”的情况下对其进行索引。

现在，当通过 Google 的图像目录查看我的一些页面时，我收到如下消息：

> 上一页将您发送到 [http://ffmages.com/final-fantasy-xii...-etros-shrine/](http://ffmages.com/final-fantasy-xii...-etros-shrine/)。
> 
> 如果您不想访问该页面，您可以返回上一页。

我注意到这大大减少了我的流量，因为它阻止了用户自动查看页面。我想知道是否有人可以向我解释导致这种情况的原因，以及我是否在编程方面做了一些事情。

*   我可以做什么（如果有的话）来解决 Google 问题？
*   还有什么可能导致我的流量和 Google 搜索结果大幅下降？
*   我可以从后端做些什么吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-28T17:56:20.573

我认为您可以设置规范链接

使用这个

```
<link rel="canonical" href="http://www.example.com/" /> 
```

将 example.com 更改为您的链接，Google 将识别您的 www。

您还可以使用 .htaccess 将通配符重定向到 www。

第一个规范的 1 会更好。

我做网站已经 3 年了，我的大多数网站都有 PR 4，我使用规范，索引效果很好。我在谷歌的排名也相当不错，我的网站每天有大约 100,000 次访问。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-30T08:53:00.223

Google 仍在更改其索引，在 google 中进行“site:ffmages.com”搜索（网络和图像搜索），您将看到索引页面的 www 和 no-www 版本。我检查了页面，你做了一个完美的 301 重定向。

不要放一个 rel 规范版本的页面，这是没用的。您只需等待，也许，登录 Google 网站管理员工具（或创建帐户）并设置首选域（配置 > 设置）。

# php - 在 php/javascript 中将“Sun Jul 15 2012 00:00:00 GMT+0700 (SE Asia Standard Time)”转换为 YYYY-mm-dd

> ID：11703318
> 
> 赞同：0
> 
> 时间：2012-07-28T17:44:53.840
> 
> 标签：php, javascript, jquery-ui-datepicker

我正在使用来自 eyecon.ro 的 datepicker 插件，并且我使用`$('input').DatePickerGetDate();`.

输出是：`Sun Jul 15 2012 00:00:00 GMT+0700 (SE Asia Standard Time)`

如何将其转换为`Y-m-d`格式？

我试过这些：

1.  `$('input').DatePickerGetDate("YY-mm-dd");`
2.  `$('input').DatePickerGetDate("Y-m-d");`
3.  `$('input').DatePickerGetDate("YYYY-mm-dd");`

但结果是一样的：`Sun Jul 15 2012 00:00:00 GMT+0700 (SE Asia Standard Time)`

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-28T18:46:13.290

初始化 datepicket 时添加格式选项

```
$('.input').DatePicker({
    format:'Y-m-d',
    date: $('.input').val(),
    current: $('.input').val(),
     ....//rest of your initialising code 
```

并使用访问数据

```
$('.input').DatePickerGetDate(true); 
```

希望这可以帮助..

# amazon-ec2 - AWS EC2 高 CPU 警报响起

> ID：11703320
> 
> 赞同：22
> 
> 时间：2012-07-28T17:45:12.933
> 
> 标签：amazon-ec2, amazon-web-services, cpu-usage

我有一个运行 windows 2008 R2 的微型 EC2 实例。最近我收到了很多高 CPU 警报，当我登录 AWS 管理控制台时，我看到我的 CPU 几乎固定在 100%。但是，如果我登录实例并打开任务管理器，我的 CPU 看起来几乎处于空闲状态。我已经将任务管理器打开了一段时间，并截取了这张屏幕截图，显示了 AWS 正在报告的内容与我的实例正在执行的操作之间的差异。建议？

![CPU 使用情况图](../Images/2b51b3e3dd7482338e1b2232134b399f.png) （[https://s3.amazonaws.com/caskerdbbucket/public/cpu.png](https://s3.amazonaws.com/caskerdbbucket/public/cpu.png)）

PS：任务管理器更新速度设置为“低”

* * *

## 回答 #1

> 赞同：36
> 
> 时间：2012-07-30T01:42:14.770

操作系统公开的数据在[Amazon EC2](http://aws.amazon.com/ec2/)等虚拟化环境中通常不足或具有误导性，并且报告的百分比取决于您的实例类型和底层处理器核心利用率（通常与您从管理程序），除其他外 - 您所看到的很可能是由当今大多数相关 Unix/Linux 监控工具中暴露的相应*CPU 窃取时间引起的（但不幸的是，不是在 Windows 上，请参阅我的问题*[Is there a Windows equivalent of Unix' CPU 窃取时间'？](https://serverfault.com/questions/392216/is-there-a-windows-equivalent-of-unix-cpu-steal-time)有关此问题的更多信息） - 参见例如列 %steal 或 st in `sar`or `top`：

> **st -- 窃取时间**
> 管理程序从该虚拟机“窃取”用于其他任务（例如运行另一个虚拟机）的 CPU 量。

博文[EC2 监控：CPU 被盗案例](http://axibase.com/news/ec2-monitoring-the-case-of-stolen-cpu/)对此主题进行了很好的探索和说明：

> 当 top 命令显示 40% CPU 繁忙但 CloudWatch 显示服务器已达到 100% 时，您会选择哪一边？答案很简单（CloudWatch 是正确的，top 不是）[...]

*CPU 窃取时间*对于您正在使用的 EC2 实例类型 t1.micro 来说尤其普遍，根据定义，它可能会受到严重限制（通常约为 97% 的窃取时间！），请参阅[微实例](http://docs.amazonwebservices.com/AWSEC2/latest/UserGuide/concepts_micro_instances.html)以获得对该概念的广泛解释和说明 - 具体而言，[实例使用其分配的资源时的](http://docs.amazonwebservices.com/AWSEC2/latest/UserGuide/concepts_micro_instances.html#when-instance-uses-allotted-resources)部分状态：

> 我们希望您的应用程序在一段时间内仅消耗一定数量的 CPU 资源。如果应用程序消耗的 CPU 资源超过您的实例分配的 CPU 资源，**我们会暂时限制该实例，使其在低 CPU 级别运行。如果您的实例继续使用其分配的所有资源，其性能将会下降**。我们将增加限制其 CPU 级别的时间，从而增加允许实例再次爆发之前的时间。*[强调我的]*

因此，您可能已经超出了微型实例的可持续 CPU 使用情况，需要调整您的工作负载或切换到另一种实例类型。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-07-07T13:38:01.257

我遇到了同样的问题，花了很多时间才找到解决方案。在互联网上我没有找到我的案例，所以我分享。

我在事件列表中发现记录了许多欺诈性登录尝试。在那种情况下，任务管理器报告了 30-40% 的 CPU 使用率（Cloud Watch 100%），并且在进程列表中可以看到一些 winlogon.exe。更改远程桌面端口（默认为 3389）后，我没有更多问题了。现在 Cloud Watch 中的 CPU 使用率高达 34-35%。

希望这可以帮助。

# javascript - 如何正确提醒我的变量

> ID：11703321
> 
> 赞同：3
> 
> 时间：2012-07-28T17:45:17.353
> 
> 标签：javascript, jquery

我对 Jquery 有相当的了解，但决定深入研究 JavaScript，因为我不了解“原始”JavaScript。
所以这是我的问题：在文档加载时，我的函数执行良好并发出警报：**'Hi my name is John'**但在按钮上单击它警报只是：**'Hi my name is'**。我的问题是为什么会发生这种情况，我该如何解决？
我知道我可以通过将我的变量放在我的函数中来修复它，但是有没有办法调用我的函数外部声明的第一个变量**（在脚本类型之后的变量）**？

[在这里摆弄](http://jsfiddle.net/6nuCx/)
我的代码：

```
<!DOCTYPE html>
<head>
<script type="text/javascript">

//If I try to call this variable WILL NOT WORK:(

var name ='John'; <--SO HOW CAN I CALL THIS VARIABLE TO MY CLICK FUNCTION?--> 

function displayName(name)
{
//If I put my variable like this WILL WORK fine...
//var name ='John';
alert('Hi I am '+name);

}

//This function works on document load
//displayName(name);
</script>
</head>
<body>

<!--This doesn't work well if variable is OUTSIDE my function:(-->
<button type="button" onclick="displayName(name)">Display Name</button>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-07-28T17:51:22.633

您的代码实际上很好，您刚刚为全局选择了一个不幸的名称：`name`。如果您将其更改为其他内容（例如`foo`），它可以工作：http: [//jsfiddle.net/6nuCx/1/](http://jsfiddle.net/6nuCx/1/)

*原因*有点不明。全局变量成为`window`对象的属性。但是该`window`对象已经有一个名为 的属性`name`，它是窗口的*名称*。我很惊讶地发现您的代码不起作用，因为我希望您的代码会覆盖窗口的名称。但显然不是。（这是一个**很好的**例子，说明为什么最好*避免使用全局变量*。）无论如何，选择一个*不同*的变量名，一个不与现有`name`属性冲突的变量名，可以解决它。

但是您在代码中做了一些可能不明显的事情，所以让我们更深入地研究一下（这里我使用`foo`版本以避免混淆）：

```
// Here, you're defining a global variable called `foo`
var foo ='John';

// Here you have a global function, `displayName`, which accepts an
// *argument* named `foo`
function displayName(foo)
{
    // Here, within the function, the symbol `foo` refers to the
    // *argument*, not to the global. The global is *hidden* by
    // the argument (this is called "shadowing" -- the local
    // "shadows" the global).
    alert('Hi I am '+foo);
} 
```

并在您的 HTML 中：

```
<!-- Here, `foo` refers to the global variable -->
<button type="button" onclick="displayName(foo)">Display Name</button> 
```

如果我们更改该参数的名称可能会更清楚：

```
var foo ='John';

function displayName(f)
{
    alert('Hi I am '+f);
} 
```

并且 HTML 没有改变：

```
<!-- Here, `foo` refers to the global variable -->
<button type="button" onclick="displayName(foo)">Display Name</button> 
```

* * *

上面我说过最好避免使用全局变量，你的问题就是一个很好的例子。那么我们该怎么做呢？好吧，主要是通过避免 DOM0 处理程序（比如你的 DOM0 处理程序`onclick`）。以下是你可以如何重铸你的小提琴：[Live copy](http://jsfiddle.net/6nuCx/8/)

```
<!DOCTYPE html>
<html>
<head>
</head>
<body>
<button id="theButton" type="button">Display Name</button>
<script type="text/javascript">
// Start a "scoping function"
(function() {
    // Everything within this function is local to the function,
    // not global
    var name = 'John';

    function displayName(n)
    {
        alert('Hi I am ' + n);
    }

    // Instead of the onclick= in the markup, hook up here in
    // the code
    document.getElementById("theButton").onclick = function() {
        displayName(name);
    };
})();
</script>
</body>
</html> 
```

请注意我们是如何自由使用`name`的，因为我们没有创建全局变量或与全局变量交互。另请注意，我将代码放在按钮*之后*，因为代码假定按钮已经存在。

更好的是，使用`addEventListener`或`attachEvent`连接处理程序。

```
var btn = document.getElementById("theButton");
if (btn.addEventListener) {
    btn.addEventListener("click", handler, false);
}
else if (btn.attachEvent) {
    btn.attachEvent("onclick", handler);
}
else {
    // Punt!
    btn.onclick = handler;
}

function handler() {
    display(name);
} 
```

如您所见，我们必须同时处理这两个问题，因为旧版本的 IE（或“兼容模式”下的新版本）没有`addEventListener`. 这是使用 jQuery 之类的库的原因之一，但我知道您正在尝试在没有库的情况下扩展您的理解，这是有充分理由的。最好的！

* * *

最后，你问：

> 我知道我可以通过将变量放在函数内部来修复它，但是有没有办法调用在函数外部声明的第一个变量（在脚本类型之后的变量）？

以上都没有回答这个问题。:-) 答案是：是的，您可以直接引用它，方法是删除影响全局的参数：[Live example](http://jsfiddle.net/6nuCx/10/)

```
<!DOCTYPE html>
<html>
<head>
<script type="text/javascript">
var foo ='John';

// Note: No argument declared
function displayName()
{
    // Because the argument doesn't shadow it, we can refer
    // to foo, because foo is declared in an *enclosing
    // context*
    alert('Hi I am '+foo);
}
</script>
</head>
<body>
<!-- Note we don't pass any argument ------v -->
<button type="button" onclick="displayName()">Display Name</button>
</body>
</html> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-28T17:57:40.963

Arhhh 被打败了，我想说使用 name 是一个糟糕的选择：

[http://jsfiddle.net/6nuCx/7/](http://jsfiddle.net/6nuCx/7/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-28T17:58:39.797

试试这个：

```
var name ='John'; 

function displayName()
{
alert('Hi I am '+name);

}

</script>
</head>
<body>

<button type="button" onclick="displayName()">Display Name</button>
</body>
</html> 
```

# php - 计算时使用括号

> ID：11703325
> 
> 赞同：0
> 
> 时间：2012-07-28T17:46:25.263
> 
> 标签：php, math, brackets

我一直在环顾四周，注意到有些人在编写计算/总和时使用括号，而有些人则不使用括号，所以想知道有什么区别，什么是更好的选择，为什么？

```
$foo = ($foobar * 100); 
```

**或者**

```
$foo = $foobar * 100; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-28T17:48:04.977

在这个例子中没有区别。他们这样做只是为了跟随[BODMAS](http://en.wikipedia.org/wiki/Order_of_operations#Mnemonics)。使用它会更好，因为您确信在更长的计算中。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-28T17:51:03.043

对此没有任何具体答案，但使用大括号的 AFAIT`(`将避免计算时的混淆。

阅读这些有用的链接以获取更多信息

### [http://www.phpdeveloper.org.uk/articles/php-coding-guidelines/](http://www.phpdeveloper.org.uk/articles/php-coding-guidelines/)

### [http://framework.zend.com/manual/en/coding-standard.coding-style.html](http://framework.zend.com/manual/en/coding-standard.coding-style.html)

### [http://pear.php.net/manual/en/standards.php](http://pear.php.net/manual/en/standards.php)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-29T00:48:06.817

括号控制操作的顺序。

例如在 中`$x * $y + 2`，乘法将在加法之前执行，因此隐含地有这样的括号：`($x * $y) + 2`。

如果不使用括号，则将按照语言[定义](http://php.net/manual/en/language.operator)的顺序进行运算，这就是所谓的运算符优先级。

我建议您在一个表达式中混合使用不同的运算符（不包括赋值）时始终使用括号。或者，您可以将表达式分解为多个语句，为构成计算的元素提供描述性名称。

# python - Python：'import *' vs execfile

> ID：11703327
> 
> 赞同：13
> 
> 时间：2012-07-28T17:46:43.583
> 
> 标签：python, django, django-settings, python-import, execfile

在我的一些 Django 应用程序中，我使用`settings_local.py`文件来覆盖各种环境（例如开发、测试和生产）中不同的设置。我最初使用以下代码将其内容包含在`settings.py`：

```
try:
    from settings_local import *
except ImportError:
    sys.stderr.write("The settings_local.py file is missing.\n")
    DEBUG=False 
```

我最近发现了这个`execfile`功能并切换到类似的东西：

```
try:
    execfile(path.join(PROJECT_ROOT, "settings_local.py"))
except IOError:
    sys.stderr.write("The settings_local.py file is missing.\n"
    DEBUG=False 
```

两者都按预期工作，但我很好奇我是否遗漏了任何问题，一般来说哪种方法更推荐以及为什么。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-07-28T19:12:09.843

`execfile`每次评估设置文件时，使用函数将导致评估 Python 源文件 (.py)。您每次都在执行 Python 解析器。使用`import`不一定会这样做（可能使用 .pyc 文件）。通常，当您第一次在 Python（至少是 cPython）中运行项目时，它会被编译为字节码，并且不会再次重新编译。你打破了这一点。这不一定是问题，但您应该意识到这一点。

使用`execfile`还会导致您在文件中可能拥有的所有导入在`settings_local.py`文件的模块范围内重新评估`settings.py`。使用`import *`将包括`settings_local.py`模块范围内的所有项目。最终效果是相同的（包含在`settings_local.py`模块范围内的所有项目都包含在 中`settings.py`），但方法不同。

最后，模块作为模块执行而不是包含在内是正常的。代码包含诸如`os.path.dirname(__file__)`. 如果任何代码确实使用了它，您会混淆它，因为代码将不再在作者可能合理预期的模块中执行。

根据我的经验，人们使用`import`not `execfile`。Django 非常“约定优于配置”。遵守约定。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-11-02T17:57:32.937

另一个区别： execfile 获取上下文字典；默认情况下的全局上下文或指定的字典。这可能会导致一些奇怪的事情

`dont_do_this.py`：

```
# Probably not a good thing to do
z=x+1  # an expression that involves an un-defined field 
```

明显地，

```
from dont_do_this import * 
```

失败。

然而，

```
d={'x':1}
execfile( 'dont_do_this.py', d ) 
```

没问题，结果是`d=={'x':1, 'z':2}`

注意

```
x=1
execfile( 'dont_do_this.py' ) 
```

没问题，并导致变量`z`被添加到全局变量中。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-28T17:52:04.523

第一个版本 ( `from settings_local import *`) 是每个人都希望看到的。它还将让代码分析器找到该模块。

# android - Android RTSP 请求不发送音频 SETUP 命令

> ID：11703328
> 
> 赞同：1
> 
> 时间：2012-07-28T17:46:47.947
> 
> 标签：android, media-player, android-videoview, rtsp, pcm

我有一个发送 H.264/L16 实时流的 RTSP 服务器。它在 VLC 上运行良好。但是，当在 Android 中使用 VideoView 或 MediaPlayer 播放时，它只会在发送 PLAY 请求之前为视频发送一次 SETUP 请求。因此，只有视频没有声音。默认的 Android 媒体播放器可以正常播放 L16 编码的音频文件（与 8000 采样率的流格式完全相同）。除了通常的“无法在客户端打开文件，正在尝试服务器端”之外没有错误。我下载了 Android 源代码，希望找到它发送 SETUP 请求但失败的部分。

任何帮助表示赞赏。提前致谢。

# ruby-on-rails - 在两个现有迁移之间插入 Rails 迁移

> ID：11703329
> 
> 赞同：0
> 
> 时间：2012-07-28T17:46:51.733
> 
> 标签：ruby-on-rails, ruby, heroku, sqlite, migration

我创建了以下迁移：

```
class FixVoteColumnName < ActiveRecord::Migration
    def change
        rename_column :votes, :post_id, :votable_id
        add_column :votes, :votable_type, :string
      end
    end 
```

然后错误地创建了这个迁移，再次重命名该列：

```
class ChangeVoteTableColumns < ActiveRecord::Migration
  def change
    rename_column :votes, :post_id, :votable_id
  end
end 
```

这显然会在运行 rake db:migrate 时引发错误：

```
==  FixVoteColumnName: migrating ==============================================
-- rename_column(:votes, :post_id, :votable_id)
rake aborted!
An error has occurred, this and all later migrations canceled:

Missing column votes.post_id 
```

当我第一次看到这个错误时，我只是删除了第二次迁移（例如，将其移至我的垃圾文件夹），再次运行 rake db:migrate，然后继续。在那之后，我创建了 3 个迁移并成功运行它们。

当我推到 Heroku 时，这被证明是有问题的。不知何故，Heroku 仍在处理已删除的迁移。我通过运行 heroku run rake db:schema:reload 让它工作，但我知道这不是一个长期的解决方案。

我认为我需要做的是将第二次迁移移回我的 db/migrate 目录，并在将 :votable_id 重命名为 :post_id 的两者之间插入迁移，以便第二次迁移可以正常运行。我也可以运行 rake db:rollback，但是自从有问题的迁移以来已经进行了一些迁移，这可能会变得一团糟。

关于如何负责任地解决这个问题的任何想法？这只是一个有趣的项目，因此删除数据库并不是世界末日，但我想学习如何以*正确*的方式进行操作，如果有的话。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-29T04:25:49.473

迁移在很多方面都很棒，但是一旦你混淆了之前的迁移并且已经运行了后续的迁移，那么它们的美丽就会崩溃，修复它可能会让人头疼。

如果这只是为了好玩，我会修复您的迁移，以便所有迁移都是准确的并建立在先前的迁移之上。不要遗漏任何步骤。然后恢复到迁移的最开始，然后是重新迁移..

```
rake db:migrate VERSION=0
rake db:migrate 
```

如果我正在快速构建一个未上线的应用程序，我通常会迁移回 VERSION 0，然后合并我的迁移，这样我就有一个构建资源的迁移，我发现它看起来更有条理，但几乎没有必要的。

作为一项规则，我建议**永远不要删除/修改当前迁移之后的迁移**。正如您发现的那样，在开发过程中，这可能会造成麻烦，而当您在现场时，这可能会令人痛苦（并且有风险）来解决。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-28T18:05:08.247

您的 github 存储库中可能有一个已删除的迁移文件。

确保您已提交删除此文件。

`git status`如果有什么不同，会告诉你...

提交删除的文件：

```
git add -u 
git commit -m "file deleted" 
```

现在你可以推送到你的 github 和 heroku

```
git push
git push heroku 
```

Heroku 不应该再看到旧的迁移......

# android - Android：xml中的主题

> ID：11703331
> 
> 赞同：0
> 
> 时间：2012-07-28T17:47:26.087
> 
> 标签：android, xml, themes

我在动态壁纸示例的 xml 中找到了这条小线

```
 android:theme="@android:style/Theme.Light.WallpaperSettings" 
```

现在我一直在寻找可以在上面设置的主题的完整列表，但我找不到它，有人可以帮忙吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-28T17:51:33.947

`android-sdk\platforms\android-8\data\res\values\themes.xml`

# methods - 找到对抗其他策略的最佳游戏策略，例如在纸牌游戏 Toepen

> ID：11703346
> 
> 赞同：5
> 
> 时间：2012-07-28T17:49:03.713
> 
> 标签：methods, simulation

我想测试一些纸牌游戏战术，我的目标是了解女巫战术在现实生活中会更好。为此，我做了一个模拟，但我不知道我是否做了一个好的模拟。所以我想知道如何创建一个好的模拟。

您无法模拟现实生活中的每一个因素，例如虚张声势。还有一些因素是可以消除的，我尽量消除。剩下的因素，比如虚张声势，已经超出了范围。模拟那些是不可能的。

我使用我的模拟项目来比较一些策略。通过这种方式，您可以看到可以针对其他策略使用的策略。这样做的缺点是，如果您知道其他玩家的战术，您只能使用它。当您不知道可以使用什么策略来对付它时，那么您需要一台计算机来测试它。所以你只能用这个项目来回顾你的演奏风格。

这个问题不是关于创造一个“上帝战术”，而是关于编写好的模拟软件，可以用来模拟例如纸牌游戏。所以我想知道如何进行良好的模拟：

*   我需要携带什么？
*   你怎么知道你的模拟是一个好的模拟？
*   我应该如何处理情况？例如生成一些随机手牌，或尝试所有可能性。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-28T21:13:21.930

回答你的三个问题：

1.  诸如纸牌粘在一起和不同的洗牌技术之类的因素并不重要。我假设您将通过使用伪随机噪声源（如 rand()）来对洗牌进行建模，以随机化牌的顺序。大多数洗牌技术可能已经足够好，这对于您的目的来说是一个完全足够的模型。

2.  我对游戏的了解不够深入，无法知道如何简单地描述策略。您所描述的测试应该回答当它们正面交锋时哪种战术会获胜的问题。如果只有这两种策略，并且它们足够简单，可以完全实施，那么是的，你的测试会告诉你哪个更好。如果这款游戏与大多数此类游戏一样，并且涉及许多不同的策略和微妙之处，那么当这两种策略正面交锋时，知道这两种策略中的哪一种会获胜可能不会告诉你哪个策略实际上更好。

3.  我在回答你的第二个问题时基本上涵盖了这一点，但如果你已经 100% 正确地编程了战术，那么机器人对峙的结果将很有用，因为他们会告诉你这两种策略中哪一种会更频繁地获胜当他们正面交锋时。不过，我认为在大多数这样的游戏中，仅凭这一点并不能告诉您该策略的整体效果有多好。再说一次，我对这款游戏的了解不够肯定，但如果游戏涉及许多可能的策略，那么测试可能不会告诉你太多超级有用的信息。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-28T21:23:55.130

您无法使用这种模拟来证明任何事情。你真正倾向于的是模拟 A 比 B 更好，但不是他们在现实世界中的工作方式或对抗其他策略的方式。

您可以大致了解什么可能会更好或更糟，但仅此而已。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-08T09:37:23.900

我的答案不是基于研究，而是我对小范围内模拟战术的想法。

**这就是我进行模拟的方式：**

您需要做的第一件事是**确保您可以实施您想要比较的策略**。如果您无法对它们进行编程，那么您就无法自行测试它们。

**写下测试范围**，每次有新想法都可以扩展你的项目。当你这样做时，你正在创建一个永远不会完成的项目。所以标记你想做什么并**考虑每一个选项**。诈唬就是一个很好的例子。进行虚张声势的模拟几乎是不可能的，你可以计算你有多少获胜的机会，但是一个正常的人会虚张声势，例如当他认为其他人会通过或他会赢时。在程序中实现“感觉”是一项艰巨的工作。**并不是每个人**对虚张声势都有相同的感受。但是你可以做出不同的诈唬牌（感觉），让机器人在每一种战术中使用它们。这将是很多工作，就我而言，这是不值得的。

**找出你想如何比较战术**。您想知道要赢多少零钱吗？或者您是否出于其他原因想做一些随机游戏？

每个游戏都有**更多的方言**，找出你想要遵循的一套规则。执行这些规则。如果不这样做，模拟将不正确。

执行所有战术，并**尽可能使用相同的功能**。这样您就可以自动测试核心功能。使用这种方法，您可以更快地完成工作，并且您会发现从未发现过的错误。

**测试系统。测试对于模拟来说非常重要**。**一个小问题可能会导致错误的结果**。使用调试器检查您的代码，以了解它是否可以执行操作。**制作“调试模式”，在此模式下显示每场比赛的结果并进行审查**。也**让其他人回顾游戏是如何进行的**。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-08T15:27:27.050

在您的更多详细信息请求中，您要求：

> 什么是重要的？
> 
> 怎样才能做出好的模拟？
> 
> 你怎么知道它在现实生活中是相关的。

第一个问题的答案只能由游戏中的专家来回答；创建 AI 并非易事，要创建出色的 AI，您需要了解游戏中的所有策略，并且需要编写这些策略。然后您要么需要知道何时使用这些策略，要么知道你是什么人试图确定计算机循环通过所有组合。

进行良好的模拟很大程度上取决于您要实现的目标。您可以使用国际象棋方法，让 AI 播放所有可能的场景并选择最好的场景。这实际上会完全从游戏中移除策略，但它也可能会提出一些新策略；但是好的国际象棋程序使用开书之类的东西。为了模拟现实生活，您可能需要使用一些策略组合，并根据情况采取所有可能的动作。

另外，你说你不能诈唬，但这不一定是真的。如果这是游戏中的一种策略，那么您可能应该对诈唬进行编程，并尝试对诈唬做出反应。如果你打算这样做，你需要实施一个诈唬技能并检测诈唬技能以及诈唬百分比。有了它，您还可以了解对于给定的现实生活技能水平而言，虚张声势的频率是多少。如果您确实实施了虚张声势，您可能希望能够在打开或关闭它的情况下运行您的模拟。

为了测试你的模拟器，并确保它与现实生活准确，我建议让计算机面对所有已知的组合/结果，并确保结果与你在现实生活中看到的相同。之后开始循环，但慢慢增加测试，首先运行一些策略并检查结果，然后再添加一些。如果你从一开始就把所有的策略都放进去，你将很难发现其中一个不能正常工作。

# visual-studio-2010 - 配置VS以在头文件更改时重新运行预构建脚本？

> ID：11703348
> 
> 赞同：4
> 
> 时间：2012-07-28T17:49:25.520
> 
> 标签：visual-studio-2010, visual-studio, dependencies, build-process

我的 VS2010 版本中有一个 perl 脚本，它使用多个头文件作为输入自动编码头文件。

也就是说script.pl读取ah、bh、ch，生成zh

如何设置依赖项，以便在输入头文件之一更改时重新运行此脚本？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-13T17:22:42.810

我不知道根据依赖项/文件系统检查自动重新运行它，但您当然可以向项目或解决方案添加自定义预构建步骤，直接调用 perl 脚本。在 VS2010 中，转到 Project 菜单，选择“Properties...”，然后转到 Build Events 选项卡。在预构建事件命令行框中，键入要调用 script.pl 的命令行。

查看[MSDN 文档](http://msdn.microsoft.com/en-us/library/42x5kfw4.aspx)以获取一些有用的宏和构建路径的快捷方式。此外，该页面确实说

> **笔记**
> 
> 如果项目是最新的并且没有触发构建，则不会运行预构建事件。

因此，如果项目中的任何文件都没有更改，它可能不会运行 script.pl，但对 、 或 的更改`a.h`应该`b.h`足以`c.h`确保`z.h`生成。除非您没有将上游头文件添加到项目中......这可能是另一罐蠕虫。

如果是这种情况，想到的解决方法是创建第二个名为“HeaderBuild”的虚拟项目，或者类似的唯一工作是包含所需的`.h`文件，调用`script.pl`并将`z.h`输出复制到您的真实项目标题目录。确保虚拟项目在真实项目之前运行，您应该一切顺利。

# android - Android 应用程序中的始终开启数字键盘

> ID：11703349
> 
> 赞同：0
> 
> 时间：2012-07-28T17:49:34.633
> 
> 标签：android, keyboard, always-on-top

在我的应用程序的新页面（实际上是许多页面）上，我希望数字键盘始终打开，这可能吗？而不是为每个数字制作单独的按钮。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-28T17:59:12.100

您可以按字段设置它，我不知道您是否可以将其设置为默认值

```
<EditText android:inputType="number" ... /> 
```

# c# - 通过c#运行powershell脚本

> ID：11703350
> 
> 赞同：0
> 
> 时间：2012-07-28T17:49:35.087
> 
> 标签：c#, powershell, cmd

我有几个问题。这是它的工作原理。在 Windows 窗体上，用户单击按钮。该按钮执行一个 cmd 脚本，然后 cmd 脚本执行一个 powershell 脚本。

为什么你问的 cmd 脚本？好吧，如果我单击按钮运行一个 powershell 脚本，我会遇到签名问题。

在 powershell 脚本的开头，我将执行策略设置为不受限制。如果我直接通过 powershell 运行脚本，这将完全改变执行策略并且脚本可以正常工作。如果我让用户单击按钮来运行 powershell 脚本，它会说我在签名时遇到问题，即使执行策略确实设置为不受限制！荒谬的。我发现在 cmd 脚本中设置执行策略解决了这个问题，这就是我在单击按钮时运行我的 powershell 脚本的方式。无论如何，这是一种解决方法，并且有效。

我现在的问题是我有一个 cmd 脚本，它调用 powershell 脚本来更改注册表项。这通过单击按钮再次完成。看起来不错，一切似乎都正常，但是键的值没有改变。现在，如果我只是在没有 Windows 窗体应用程序的情况下运行 cmd 脚本，键的值确实会改变。为什么会这样？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-28T17:57:04.787

我认为您的实际问题是“如何从 C# 调用 Powershell 脚本，并确保它以管理权限运行？”

答案是“模仿”：

*   [从 C# 以管理员身份执行 PowerShell](https://stackoverflow.com/questions/1313673/execute-powershell-as-an-administrator-from-c-sharp)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-28T21:41:24.383

使用automation.runspaces 命名空间给我带来了很多问题。我是一名学生，我在一所大学工作。我正在使用大学计算机和大学域。长话短说，我放弃了使用运行空间，我只是在 c# 中打开 powershell 并执行脚本。那没有用，所以我写了一些 cmd 脚本。这是一个有效的示例：

Powershell脚本：

# 重命名为 Mac 地址

```
$OS = Get-WmiObject Win32_OperatingSystem
$NIC = Get-WmiObject Win32_NetworkAdapterConfiguration | where{$_.IPEnabled -eq “TRUE”}
$PC = Get-WmiObject -class Win32_ComputerSystem 

if($NIC.MacAddress -eq $null)
    {
    Write-Host "No Network Connection! The PC will not be renamed until the network is enabled"
    }
else
    {
    $MacAddress = $NIC.MacAddress
    $NewPCName = "PC-" + $MacAddress.Substring(0) -replace ':'

    $PC.Rename($NewPCName) 

    Write-Host -ForegroundColor Green "New PC Name"
    $NewPCName
    }
    write-Host "The PC has been renamed and will restart in 5 seconds."
    start-sleep -s 5
    restart-computer 
```

如果我在 powershell 中运行上面的脚本，它就可以工作。如果我使用 Process.Start(powershell.exe, "C:\myscript"); 在 c# 中它不会运行。即使设置执行策略也无济于事。所以我使用如下的cmd脚本：

cmd脚本：

powershell -noexit -executionpolicy unrestricted "C:\myscript.ps1"

它执行。

现在我有以下内容：

Powershell脚本：

Set-ItemProperty "HKLM:\SOFTWARE\Microsoft\Windows NT\CurrentVersion\Winlogon" -name AutoAdminLogon -value 0 write-host "Changing Registry" Start-Sleep -s 10

cmd脚本：

powershell -noexit -executionpolicy unrestricted "C:\Windows\ITS\ChangeRegistry.ps1"

在我的 Windows 窗体程序中，我有一个按钮单击事件调用 cmd 脚本。看起来它可以工作，没有任何崩溃，cmd按应有的方式执行，它写入主机，它休眠了10秒。但注册表项永远不会改变。但是我的第一个 powershell 重命名脚本和 cmd 示例只需单击 Windows 窗体上的按钮即可完美运行。所以我就是不明白。

# php - 从 php 回显不同的语言

> ID：11703353
> 
> 赞同：-2
> 
> 时间：2012-07-28T17:50:11.090
> 
> 标签：php, html

> **可能重复：**
> [如何解决我的 PHP 网页文件语言编码问题？](https://stackoverflow.com/questions/6516589/how-i-can-solve-my-php-web-page-file-language-encoding)

我在数据库（mysql）中有不同的语言数据。但是当我在 html 页面中选择并回显数据时，它会显示为问号“????” 这是为什么？我该如何克服呢？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-28T17:52:46.020

可能是字符编码问题。您使用的是哪种字符编码，您的浏览器使用的是哪一种？

这里讨论了一个类似的主题，因此您也可以查看它：[如何解决我的 PHP 网页文件语言编码问题？](https://stackoverflow.com/questions/6516589/how-i-can-solve-my-php-web-page-file-language-encoding)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-28T17:52:59.937

可能您的 html 页面使用与 mysql 不同的字符编码。确保将文本转换为正确的字符编码。

编辑：现在知道您的数据库使用 utf8 编码，那么另一种可能性是您插入数据库的文本与 utf8 编码不兼容。因此，要么将插入数据编码为 utf8，要么将 html 页面和数据库都更改为 ISO-8859-1 编码（通常是正确的编码）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-28T17:55:42.493

在 HTML 页面的 head 部分使用适当的字符集声明，例如

```
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8"> 
```

# jquery - 新 jquery detach 方法返回的对象的 webstorage & 序列化

> ID：11703358
> 
> 赞同：0
> 
> 时间：2012-07-28T17:50:32.153
> 
> 标签：jquery, detach, web-storage

我正在使用 jquery 开发一个小型 Web 客户端应用程序

会话第一页的应用程序仅包含触发 ajax 请求的应用程序菜单，显示在新选项卡（页面内）中接收到的数据并通过回调设置事件处理程序。

当用户打开了多个选项卡时，使用 $(tab).detach() 将未聚焦的选项卡从 DOM 中分离出来，并且返回的对象存储在一个数组中，直到选项卡重新获得焦点（对象然后追加回 DOM）。

detach 的魔力在于返回的对象包含所有事件处理程序绑定到其中的所有 html 元素（所以当我们将它附加回来时，我们不必重新绑定任何东西）这是伟大和快速的，除了我无法设法序列化该对象（并存储它以恢复用户在网站的不同页面上浏览时打开的选项卡）。我可以找到 html，但事件处理程序...？

```
$panels.panel[el]=$("#"+el).detach();

alert(itobj($panels.panel[el]));  //->  key: 0 value: [object HTMLDivElement]
alert($panels.panel[el].html());  //-> return the innerhtml

sessionStorage.setItem(el,$.toJSON($panels.panel[el]));

alert(sessionStorage.getItem(el));  //-> {"length":1,"0":{},"context":{"jQuery17204145571568968498":1,"location":{}},"selector":"#panelid"} 
```

那么会话如何恢复这些事件处理程序呢？它与上下文有什么关系吗？还是有更好的序列化方法（一直使用来自：[http](http://code.google.com/p/jquery-json/) ://code.google.com/p/jquery-json/ 的 toJSON ）？

非常感谢任何帮助，所以感谢 tun（跟踪所有回调以召回它们的想法非常令人沮丧 - 并且使分离的魔力变得无用）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-08T05:19:28.253

访问事件处理程序属性

```
 var elem = $('#someid')[0];

 var data = jQuery.hasData( elem ) && jQuery._data( elem );

 console.log(data.events);    //-> {"click":[{"type":"click","origType":"click","data":{"length":1,"0":{"jQuery17207324459496430933":45},"context":{"jQuery17207324459496430933":1,"location":{}},"selector":"#pnl_ctbuilder_1"},"guid":25,"selector":".panel_close a","quick":null,"namespace":""}]} 
```

[使用 jQuery 访问绑定到事件处理程序的函数](https://stackoverflow.com/questions/2388030/accessing-functions-bound-to-event-handlers-with-jquery)

但这就是答案的核心：只有普通对象（没有函数也没有循环引用，没有事件处理程序）可以序列化以保存在 sessionstore/localstore

因此，不幸的是，分离的魔力不会发生在 webstorage 上。

# javascript - 在 JQuery mobile 中的段落内使用变量

> ID：11703365
> 
> 赞同：0
> 
> 时间：2012-07-28T17:51:29.513
> 
> 标签：javascript, jquery, mobile, cordova

我将 JQuery mobile 与 PhoneGap 一起使用，并且我一直在尝试通过 html 页面在电话屏幕上显示一串文本。大多数文本总是相同的，但我希望由我使用 javascript 在命名空间内创建的变量控制某些部分：

```
$.Game = 
{ 
    gName: "global name" 
}; 
```

然后我想在我想要显示的文本中使用这个变量，我试图找到一种方法将它放入一个段落中，但它需要在脚本标签内。有谁知道如何做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-28T18:01:52.380

你的意思是这样吗？

```
<p id="paragraph"></p> 
```

和 jQuery：

```
$(document).load(function() {
    $("#paragraph").text($.Game.gName);
}); 
```

# c# - 是否有必要在同一个文件夹中拥有（非）本地化资源？

> ID：11703367
> 
> 赞同：1
> 
> 时间：2012-07-28T17:51:50.203
> 
> 标签：c#, .net, winforms, localization, resources

当我不将本地化资源（Resources.culture .resx）与中性资源（即非本地化 - *Resources.resx*）放在同一文件夹中，并设置当前 UI 文化（***Thread.CurrentThread.CurrentUICulture*** *= XYZculture）时，* **ResourceManager**不能找到所需的本地化资源并使用该文化的默认中性资源。

 ****为什么这是必要的？我什至无法将中性资源移动到与**Properties**不同的文件夹，因为这些资源甚至不会在启动时加载。****

# javascript - 使用像素检测后 Kinetic.JS 图像无法拖动

> ID：11703375
> 
> 赞同：0
> 
> 时间：2012-07-28T17:53:13.993
> 
> 标签：javascript, html, kineticjs

我正在使用`Kinetic.JS`库来开发 HTML5 应用程序。我使用 Kinetic.Image 加载图像（`.PNG`格式），并使用像素检测仅检测图像的非透明部分。问题是尽管我已将`draggable`属性设置为`true`并使用`saveImageData`方法，但我无法正确拖动图像。图像被拖得很好（使用`path`检测）。大佬们有什么解决办法吗？这是我的代码：

```
 var beeObj = new Image();
        beeObj.onload = function(){ 
            bee = new Kinetic.Image({ //bee is global variable
            x: 325 - 45,
            y: 145 - 83,
            image: beeObj,          
            draggable: true         
        });
        lineLayer.add(bee); 
        lineLayer.draw();
        bee.saveImageData();
   };
   beeObj.src = directory + "smile_bee.png"; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-04T09:26:23.977

您的图像加载器中没有 DetectionType .. 它应该类似于

```
bee = new Kinetic.Image({ //bee is global variable
        x: 325 - 45,
        y: 145 - 83,
        image: beeObj,          
        draggable: true,
        DetectionType: 'Pixels'         
    }); 
```

在鼠标移出时，您可以使用相同的功能，即

bee.saveImageData();

并用相同的函数结束整个 onload 函数，然后它将起作用

现在 Eric 发布了 v4+，所以现在没有像素检测类型

你可以使用类似的东西

```
 image.createImageBuffer(); 
```

//清空图像缓冲区

```
 image.clearImageBuffer(); 
```

希望这能帮到..

问候

# javascript - 如何将复选标记作为字符？

> ID：11703384
> 
> 赞同：7
> 
> 时间：2012-07-28T17:54:21.810
> 
> 标签：javascript, html

```
$("#status").html('<img src="available.png">Available'); 
```

而不是 checkMark 图片我想要一个 chekMark 字符。
请问有办法吗？

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-07-28T17:58:12.117

您可以使用[U+2713](http://www.fileformat.info/info/unicode/char/2713/index.htm)（复选标记符号✓）：

```
$("#status").text("\u2713 Available"); 
```

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2012-07-28T17:58:31.590

尝试

```
$("#status").html('&#10003;'); 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-07-28T17:56:47.597

尝试任何一个

```
&#10003; 
```

`&#x2713;`

一个是十六进制，一个是十进制。如果我不在它们周围放置代码标记，你会得到

✓ ✓

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-07-28T17:57:32.417

看到这个：[http ://www.danshort.com/HTMLentities/index.php?w=dingb](http://www.danshort.com/HTMLentities/index.php?w=dingb)

`&#10003;`或者`&#10004;`

虽然我必须说我认为图片是更好的选择：您可以在以后随时修改它而无需更改代码。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-07-28T18:03:49.480

试试这个：

**十进制：**

```
&#10003; 
```

或 **十六进制：**

```
&#x2713; 
```

**例子：** `$("#status").html('&#10003;');`

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2017-10-05T05:07:18.400

您还可以在 Web 字体中使用复选标记。

这个问题（和答案）现在已经有五年了。为了那些来自谷歌的人，我想添加另一个近年来可用的选项，但在以前的答案中没有提到。

您当然仍然可以使用 unicode 字符 (`.html("&#10003;")`或`.text("\u2713")`，但是在过去几年中，网络字体变得更加普遍。例如，材质图标有一个复选标记： [https ://material.io/icons/#ic_check](https://material.io/icons/#ic_check)

谷歌（制作和维护材料图标）也很好地解释了网络字体以及如何在这里使用它们：[https ://google.github.io/material-design-icons/](https://google.github.io/material-design-icons/)

基本上网络字体是两全其美的：图像的定制和字体字符的使用/动态。使用 web 字体优于 unicode 字符的优点是：

*   控制样式（您可以制作自己的任何样式的网络字体字符，而 unicode 字符就是它们的样子）
*   使用多种样式（您可以为不同情况制作具有多种复选标记样式的网络字体；您不会被锁定在一种样式中）
*   代码可读性（很少有开发人员知道什么`\u2713`或`&#10003`意思，但`<i class="myfont">check</i>`很容易理解
*   可移植性：虽然每个主流浏览器都默认使用 unicode 字体，但仍有一些计算机或设备默认使用非 unicode 字体呈现。事实上，[维基百科目前的 unicode 字体列表](https://en.wikipedia.org/wiki/Unicode_font#List_of_Unicode_fonts)相当长，但每种字体所支持的字符差异很大，而且每种字体在不同平台上的渲染方式也存在明显差异。包含 webfont 可确保每个用户都看到相同的内容，而不管平台或默认字体如何。
*   更多选项：安装 webfont 允许您更新样式、向字体添加新图标/字符等。目前无法使用 unicode 执行此操作。

# objective-c - 如何在私有接口方法上设置 gdb 断点

> ID：11703385
> 
> 赞同：1
> 
> 时间：2012-07-28T17:54:24.757
> 
> 标签：objective-c, gdb

假设 Apple 使用了一个私有框架 DictationServices.framework，它有一个带有符号/方法 dictationEnabled 的 @interface SODictationPreferences。如何以**编程**方式在该方法上设置断点（使用 ObjectiveC）？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-28T17:55:02.930

以下是如何以非编程方式执行此操作：

```
root:~/DictationServices.framework$ ps -Afw | grep Preferences
  501 44726 44621   0  7:46PM ??         0:02.60 /Applications/System Preferences.app/Contents/MacOS/System Preferences
// pid of /Applications/System Preferences.app == 44726 
(gdb) attach 44726 
Attaching to process 44726.
Reading symbols for shared libraries + done
Reading symbols for shared libraries +++.+.+.+.+++++++..+++++++ done
Reading symbols for shared libraries + done
0x00007fff8befe686 in mach_msg_trap ()
(gdb) b dictationEnabled
Breakpoint 3 at 0x10e57bc93
(gdb) c
Continuing.
Breakpoint 3, 0x000000010e57bc93 in -[SODictationPreferences dictationEnabled] ()
(gdb) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-18T21:41:41.937

可能通过ptrace？

```
 ptrace -- process tracing and debugging 
```

概要 #include #include

```
 int
 ptrace(int request, pid_t pid, caddr_t addr, int data); 
```

说明 ptrace() 提供跟踪和调试工具。它允许一个进程（跟踪进程）控制另一个进程（跟踪进程）。

# html - Safari 使用字符时不显示文本

> ID：11703386
> 
> 赞同：0
> 
> 时间：2012-07-28T17:54:29.670
> 
> 标签：html, css, safari, mobile-safari

当我在代码中使用 & 符号或任何符号时，它将在除 Safari 之外的所有浏览器上正确显示。在 Safari 上，符号将显示，但不显示类的内容。（号码）。删除符号后，内容将在 Safari 上正确显示。

```
<h4 class="classname">12345 &amp; 678910</h4> 
```

CSS 代码

```
 .classname {

        background:url(../images/pic.png) 0 32px no-repeat;
        float:right;
        padding:19px 25px 0 30px; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-28T18:02:17.100

[它在 Safari 5.1.1: Fiddle](http://jsfiddle.net/XPz6W/)中对我来说很好用 。

![Safari 小提琴](../Images/57f7be1c5347ec026ec6ab0393eda6dc.png)

我无法提供屏幕截图，但它在 iPhone4 (iOS 5.1.1) 的 Safari 上也能正常工作。

# python - 使用python读取文本文件并将内容传输到mysql数据库表

> ID：11703394
> 
> 赞同：-2
> 
> 时间：2012-07-28T17:55:53.883
> 
> 标签：python, python-3.x

我是使用 python 编程处理数据库的新手。
通过使用 python 编程，我想读取由 STUDEN T_NAME、STUDENT_MARKS 组成的原始文本文件。由管道符号分隔（如下例所示），我想将此数据推送到学生表中，该表由 2 列（STUDENT_NAME，STUDENT_MARKS）和各自的数据值组成。

输入数据文件将是这样的（它由数千条这样的记录组成），我的输入文件是 .Dat 文件，它仅以记录开头，每行包含 0 个或更多记录数（没有固定的记录数在每一行），没有其他关键字出现在其他任何地方::

> 记录 STUDENT_NAME| 杰克| STUDENT_MARKS|200| 学生姓名| 克拉克 |STUDENT_MARKS|200| 学生姓名| 艾基尔 | STUDENT_MARKS|30| 学生姓名| 水库 | STUDENT_MARKS|200| 学生姓名| 琼斯 | STUDENT_MARKS|200| 学生姓名| 杰克 | STUDENT_MARKS|100|

输出mysql表table::

> ## 学生姓名| STUDENT_MARKS
> 
> ```
>  jack   |   200
>  clark  |   200 
> ```
> 
> …………

请建议我以有效的方式读取文件和推送数据。如果有人能给我脚本来实现这一点，我将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-28T18:28:53.067

```
# import mysql module
import MySQLDB

# import regular expression module
import re

# set file name & location (note we need to create a temporary file because 
# the original one is messed up)

original_fyle = open('/some/directory/some/file.csv', 'r')
ready_fyle = open('/some/directory/some/ready_file.csv', 'w')

# initialize & establish connection 
con = MySQLdb.connect(host="localhost",user="username", passwd="password",db="database_name") 
cur = con.cursor()

# prepare your ready file 

for line in original_fyle:
    # substitute useless information this also creates some formatting for the 
    # actuall loading into mysql
    line = re.sub('STUDENT_NAME|', '\n', line) 
    line = re.sub('STUDENT_MARKS|', '', line)
    ready_fyle.write(line)

# load your ready file into db

# close file
ready_file.close()

# create a query 
query = 'load data local infile "/some/directory/some/ready_file.csv" into table table_name field terminated by "|" lines terminated by "\n" '
# run it 
cur.execute(query)
# commit just in case 
cur.commit() 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-28T18:31:03.240

本着[善待新人](https://blog.stackoverflow.com/2012/07/kicking-off-the-summer-of-love/)的精神，一些代码可以帮助您入门：

```
# assuming your data is exactly as in the original question
data = '''records STUDENT_NAME| jack | STUDENT_MARKS|200| STUDENT_NAME| clark |STUDENT_MARKS|200| STUDENT_NAME| Ajkir | STUDENT_MARKS|30| STUDENT_NAME| Aqqm | STUDENT_MARKS|200| STUDENT_NAME| jone | STUDENT_MARKS|200| STUDENT_NAME| jake | STUDENT_MARKS|100|'''

data  = data.split('|')

for idx in range(1, len(data), 4):
    # every second item in the list is a name and every fourth is a mark
    name = data[idx].strip() # need to add code to check for duplicate names
    mark = int(data[idx+2].strip()) # this will crash if not a number
    print(name, mark) # use these values to add to the database 
```

您可能想[通过本教程来使用 SQLite](http://zetcode.com/db/sqlitepythontutorial/)来学习如何在 Python 中使用此类数据库。[这个关于文件输入的教程](http://en.wikibooks.org/wiki/Non-Programmer%27s_Tutorial_for_Python_3/File_IO)可能很有用。

您可能想从这个开始，然后[返回一些代码](http://whathaveyoutried.com)。

# batch-file - 简单的文件 I/O 和使用批处理搜索

> ID：11703395
> 
> 赞同：0
> 
> 时间：2012-07-28T17:56:01.403
> 
> 标签：batch-file

我正在尝试批量执行一些简单的文件 I/O。自从我完成批处理以来已经有一段时间了，即便如此，我还是总是把循环搞砸了。

无论如何，我有一个外部文件，它只是一个字符串对列表，用空格分隔。我需要让脚本读取文件，提取字符串并将每一对用作另一个程序的参数的一部分。我已经完成了第二部分，但我需要阅读该文件。

更简单：

外部文件 file.txt 有以下内容：

```
STRING1 STRING2
STRING3 STRING4
...
STRINGN STRINGN+1 
```

脚本只需要这样做

```
:Run program with STRING1 and STRING2
:Run program with STRING3 and STRING4
... 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-29T07:46:04.437

阅读`HELP FOR`然后在命令行尝试

```
for /f "tokens=1,2" %a in (file.txt) do @echo :Run program with %a and %b >>script.bat 
```

# haskell - haskell monad 案例示例

> ID：11703396
> 
> 赞同：0
> 
> 时间：2012-07-28T17:56:12.447
> 
> 标签：haskell

如何检查客户？

```
case e of
    Just e -> let client = (e, sink)
    Nothing -> let client = false

case msg of
    _   | not client -> do nothing
        | msg -> do something
        | otherwise -> do print "i was born in..." 
```

可能甚至没有关闭，但希望它清楚我想要做什么。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-28T18:04:03.377

我想你正在寻找这样的东西：

```
m e sink = do
    case e of
        Nothing -> print "No Client"
        (Just c) -> do
            -- Client is in c 
```

如果不是，我们真的需要更多代码和描述来说明您正在尝试做什么。

否则，我必须告诉你，你似乎在 Haskell 中做一些必要的事情。你应该回去阅读一些教程，比如[Learn You A Haskell](http://learnyouahaskell.com/)和[Real World Haskell](http://book.realworldhaskell.org/read/)。尤其是后者包含了大量关于实际 Haskell 程序的 Haskell 应用示例。

# c# - 检测到人体时 Kinect 深度 FPS 显着减慢

> ID：11703400
> 
> 赞同：0
> 
> 时间：2012-07-28T17:56:47.640
> 
> 标签：c#, wpf, kinect, frame-rate, depth

我有一个应用程序，可以在其中创建自己的深度框架（使用 Kinect SDK）。问题是当检测到人类时，深度的 FPS（然后是颜色）会显着减慢。[这](http://youtu.be/m09Pxz0yNpc)是一个帧变慢的电影。我正在使用的代码：

```
 using (DepthImageFrame DepthFrame = e.OpenDepthImageFrame())
        {
            depthFrame = DepthFrame;
            pixels1 = GenerateColoredBytes(DepthFrame);

            depthImage = BitmapSource.Create(
                depthFrame.Width, depthFrame.Height, 96, 96, PixelFormats.Bgr32, null, pixels1,
                depthFrame.Width * 4);

            depth.Source = depthImage;
        }

...

    private byte[] GenerateColoredBytes(DepthImageFrame depthFrame2)
    {
        short[] rawDepthData = new short[depthFrame2.PixelDataLength];
        depthFrame.CopyPixelDataTo(rawDepthData);

        byte[] pixels = new byte[depthFrame2.Height * depthFrame2.Width * 4];

        const int BlueIndex = 0;
        const int GreenIndex = 1;
        const int RedIndex = 2;

        for (int depthIndex = 0, colorIndex = 0;
            depthIndex < rawDepthData.Length && colorIndex < pixels.Length;
            depthIndex++, colorIndex += 4)
        {
            int player = rawDepthData[depthIndex] & DepthImageFrame.PlayerIndexBitmask;

            int depth = rawDepthData[depthIndex] >> DepthImageFrame.PlayerIndexBitmaskWidth;

            byte intensity = CalculateIntensityFromDepth(depth);
            pixels[colorIndex + BlueIndex] = intensity;
            pixels[colorIndex + GreenIndex] = intensity;
            pixels[colorIndex + RedIndex] = intensity;

            if (player > 0)
            {
                pixels[colorIndex + BlueIndex] = Colors.Gold.B;
                pixels[colorIndex + GreenIndex] = Colors.Gold.G;
                pixels[colorIndex + RedIndex] = Colors.Gold.R;
            }
        }

        return pixels;
    } 
```

FPS 对我来说非常重要，因为我正在制作一个应用程序，它可以在检测到人的照片时保存他们的照片。如何保持更快的 FPS？为什么我的应用程序会这样做？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-30T14:20:44.883

GY 是正确的，您没有正确处理。您应该重构您的代码，以便尽快处理掉 DepthImageFrame。

```
...
private short[] rawDepthData = new short[640*480]; // assuming your resolution is 640*480

using (DepthImageFrame depthFrame = e.OpenDepthImageFrame())
{
    depthFrame.CopyPixelDataTo(rawDepthData);
}

pixels1 = GenerateColoredBytes(rawDepthData);    
...

private byte[] GenerateColoredBytes(short[] rawDepthData){...} 
```

您说您在应用程序的其他地方使用深度框架。这是不好的。如果您需要深度框架中的一些特定数据，请单独保存。

dowhilefor 也是正确的，您应该使用 WriteableBitmap 查看它，它非常简单。

```
private WriteableBitmap wBitmap;

//somewhere in your initialization
wBitmap = new WriteableBitmap(...);
depth.Source = wBitmap;

//Then to update the image:
wBitmap.WritePixels(...); 
```

此外，您正在创建新数组以在每一帧上一次又一次地存储像素数据。您应该将这些数组创建为全局变量，一次创建它们，然后在每一帧上覆盖它们。

最后，虽然这不应该有很大的不同，但我很好奇您的 CalculateIntensityFromDepth 方法。如果编译器没有内联该方法，那就是很多无关的方法调用。尝试删除该方法，然后在当前调用方法的位置编写代码。

# python - 如何以与数据库一致的方式计算我的应用程序 python 端的点之间的距离

> ID：11703407
> 
> 赞同：2
> 
> 时间：2012-07-28T17:57:59.440
> 
> 标签：python, django, gis, postgis, geodjango

我正在编写一个大量使用 geodjango（在 PostGis 上）和空间查找的应用程序。数据库端的距离查询效果很好，但现在我必须计算应用程序 python 端两点之间的距离（这些点来自使用单独查询获得的模型）。

我可以想出很多方法来计算这个距离，但我想知道以与数据库输出一致的方式来做。

是否有任何神奇的 python 函数可以计算两个点之间的距离，它们是在哪个 SRID 中测量的？如果不是，您还能提出什么其他方法。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-28T19:54:23.957

您可以使用[这个问题的 hasrsine 函数](https://stackoverflow.com/a/4913653/624900)：

```
>>> from math import radians, cos, sin, asin, sqrt
>>> 
>>> def haversine(lon1, lat1, lon2, lat2):
...     """
...     Calculate the great circle distance between two points 
...     on the earth (specified in decimal degrees)
...     """
...     # convert decimal degrees to radians 
...     lon1, lat1, lon2, lat2 = map(radians, [lon1, lat1, lon2, lat2])
...     # haversine formula 
...     dlon = lon2 - lon1 
...     dlat = lat2 - lat1 
...     a = sin(dlat/2)**2 + cos(lat1) * cos(lat2) * sin(dlon/2)**2
...     c = 2 * asin(sqrt(a)) 
...     km = 6367 * c
...     return km 
... 
>>> haversine(-1.7297, 53.3205, -1.6997, 53.3186)
2.0025842109026413 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-06-05T17:15:06.517

如果您想要与 PostGIS 的方式保持一致，您可能想要使用比 hasrsine 实现更好的东西。我建议您查看[GeographicLib](http://geographiclib.sourceforge.net/)的 Python 版本，它可以更准确地进行计算。

你会在[gis.stackexchange上得到更好的答案](https://gis.stackexchange.com/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-28T19:25:57.857

使用适当的数据连接来执行您已经在使用的 SQL 函数，然后检索它... 保持一切一致。

# android - Google Play 商店的 RSS 提要

> ID：11703411
> 
> 赞同：4
> 
> 时间：2012-07-28T17:58:15.487
> 
> 标签：android, mobile

Apple 应用商店为您提供 RSS 提要，以将提交到应用商店的最新应用程序获取到您最喜欢的提要阅读器中。我想知道谷歌游戏商店是否也有一个 RSS 提要，可以让你做同样的事情？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-28T18:05:05.810

不，他们不提供任何信息供第三方开发人员使用/使用，包括 RSS。

编辑：一些第 3 方似乎确实有可用的提要，但[使用 RSS 阅读器关注 Android 市场（适用于初学者）](http://androinica.com/2009/07/tips-follow-the-android-market-with-an-rss-reader-for-beginners/)

编辑2：[更多证据](https://stackoverflow.com/questions/7998995/how-can-i-get-android-market-rss-feed)

# c++ - OpenGL如何渲染它的三角形？

> ID：11703412
> 
> 赞同：1
> 
> 时间：2012-07-28T17:58:16.923
> 
> 标签：c++, algorithm, opengl, language-agnostic, rendering

我需要一种算法来在不使用 OpenGL 的情况下渲染像素完美的三角形。

我在哪里可以获得像OpenGL这样的算法正在使用？最好是单线程。

它必须像 OpenGL 那样做，因为 OpenGL 不会在共享边的两个三角形上留下间隙或重叠像素。扫描线方法会产生这些错误：http: [//joshbeam.com/articles/triangle_rasterization/](http://joshbeam.com/articles/triangle_rasterization/)。我也尝试了这个半空间算法：[http](http://devmaster.net/forums/topic/1145-advanced-rasterization/) ://devmaster.net/forums/topic/1145-advanced-rasterization/但我无法让它工作（呈现胡言乱语）。

*   OpenGL是如何做到的？它是否如此密集的工作以至于我应该忘记它并改用（错误的）扫描线方法？

*   我在哪里可以得到算法？

我更喜欢 C++ 解决方案，但语言不是问题。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-29T03:23:38.450

正如 Alan 和您的文章链接所提到的，OpenGL 使用基于扫描线的方法。然而，管理差距不是数学准确性的问题。您需要对三角形边缘的像素进行额外的约定。OpenGL 使用的约定与 Direct3D 使用的约定相同。它被称为“左上角”，我见过的最好的解释是这篇[MSDN 光栅化规则文章](http://msdn.microsoft.com/en-us/library/windows/desktop/bb147314%28v=vs.85%29.aspx)。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-28T20:43:08.073

典型的 OpenGL 实现将使用与您的第一个链接或多或少相同的扫描线/光栅化方法。避免差距和重叠的关键是要非常小心你的数学，以避免舍入误差的不确定性。

如果您将像素视为具有某些有限区域的屏幕正方形，那么您可能会出现重叠，因为相邻的三角形通常都会重叠像素。但是，如果您将像素视为正方形中心的无限小点，则可以保证没有间隙或重叠。

您还需要定点整数数学的算术确定性，而不是浮点数学的舍入误差。每个光栅化扫描线的左端从大于或等于起始扫描值的第一个像素开始。光栅化扫描线的右端在严格小于结束扫描值的第一个像素之前结束。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-28T18:21:14.360

看看[OpenMesa](http://www.mesa3d.org/)，它是 OpenGL 规范的开源实现。它目前最高支持 OpenGL 3.0。

# matlab - Matlab - 将训练（神经网络）图像特征插入 ms 访问数据库

> ID：11703413
> 
> 赞同：2
> 
> 时间：2012-07-28T17:58:22.680
> 
> 标签：matlab, ms-access, neural-network, cbir

我正在使用 DWT 和神经网络做一个关于 CBIR 的项目。我已经提取了颜色和纹理特征并训练了提取特征的归一化值。我在matlab中使用了神经网络工具来实现图像分类。所有这些都成功地完成了。

我的问题是 - 有没有办法将训练后的图像值自动插入到 ms 访问数据库中？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-29T00:17:14.137

神经网络对象具有您可以访问以获取网络权重的属性。例子：

```
net = feedforwardnet();       %# or the obsolete functions: newff, newpr, ..
net.b     %# bias vectors
net.IW    %# input weight matrices
net.LW    %# layer weight matrices 
```

请参阅文档以了解每个的含义。您可以查看[此答案](https://stackoverflow.com/a/2420953/97160)以获取如何使用它们自己计算网络输出的示例。

此外，还有一个[GETWB](http://www.mathworks.com/help/toolbox/nnet/ref/getwb.html)便捷函数可以将所有权重作为向量获取：

```
weights = getwb(net); 
```

您可以将这些值保存在数据库中。您可以使用[SETWB](http://www.mathworks.com/help/toolbox/nnet/ref/setwb.html)功能重新设置权重。

有关如何在 MATLAB 中与数据库交互的概述，请参见[此处（这里是与 MS Access 数据库交互的一个](https://stackoverflow.com/a/6600301/97160)[示例](https://stackoverflow.com/a/3102503/97160)）。

# android - 将新版本的 android 应用程序发布到 google play 后，admob 状态更改为非活动状态，并且不显示任何广告

> ID：11703415
> 
> 赞同：2
> 
> 时间：2012-07-28T17:58:27.110
> 
> 标签：android, admob

Admob 在我的应用程序上展示广告，一切正常。然后我创建了该应用程序的新版本，将其上传到谷歌播放，广告停止出现。在 admob 中，此应用程序的状态更改为“非活动：AdMob 从未收到您网站的广告请求”（气泡从绿色变为红色），尽管第一个版本有一些收入，当时广告仍在在职的。

我没有更改 adUnitId，它与 admob 中显示的 Publisher id 相同。当我从 Eclipse 运行该应用程序时，测试广告正确显示，但仅测试广告。如果我从测试设备列表中删除我的设备，则永远不会显示广告。

在 LogCat 中，我收到以下消息： Received ad url: "url" 然后 onFailedToReceiveAd（广告请求成功，但由于缺少广告库存而没有返回广告。）好吧，我可能因为我所在的位置而没有收到广告或者其他什么，但是对于使用我的应用程序的所有数百人来说，这怎么可能呢？问题一定出在其他地方。

可能是什么问题呢？我是否需要为 Google Play 商店中的每个应用更新都在 admob 中创建一个新应用？（这对我来说似乎不合逻辑）

谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-03T15:36:50.463

我曾经遇到过这个问题，admob 审核团队阻止了我的应用程序。也许你的也被屏蔽了。

# django - 根据给定 urlconf 的 absolute_url 查找对象

> ID：11703419
> 
> 赞同：-1
> 
> 时间：2012-07-28T17:58:40.220
> 
> 标签：django, django-models, django-views, django-urls

我在 model.py 中定义了以下 get_absolute_url：

```
class Product(models.Model):

  def get_absolute_url(self):
      return "/products/category/type/%d%s%d" % (self.owner.id,
      self.owner, self.id) 
```

我在 urls.py 中定义了以下 urlconf：

```
url(r'^products/category/type/(\w+)(\w+)(\w+)/$', 'detail'), 
```

在views.py 中的'detail' 方法中，我如何使用它的get_absolute_url 来引用Product 对象的实例？

我是新来的。谢谢您的帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-28T21:34:37.593

我猜你真正想做的只是在`detail`视图中获取相关对象。

但首先，警告一句：您的 URL 很奇怪，不会给您预期的结果。所有者 id、所有者和 id 的值之间没有区别，因此正则表达式将*始终*将所有字符分配到最后两个作为所有者 id，并将每个字符分配给所有者和 id。例如，如果您的 URL 是`products/category/type/1daniel34/`, 而不是被解析为`('1', 'daniel', '34')`this 将始终被解析为`('1daniel', '3', '4')`. 您应该在要捕获的每个元素之间放置一个斜杠，使用`\d`而不是`\w`匹配数字，并使用命名组：

```
^products/category/type/(?P<owner_id>\d+)/(?P<owner>\w+)/(?P<id>\d+)/$ 
```

（此外，您应该考虑使用[装饰`permalink`器](https://docs.djangoproject.com/en/1.4/ref/models/instances/#django.db.models.permalink)来生成绝对 URL，而不是从 urlconf 复制整个字符串。）

现在，一个观点是它传递了从 URL conf 捕获的值。因此，您对绝对 URL 的引用令人困惑：没有理由关心 get_absolute_url 生成的值，您只需使用在视图中传递的值来查询数据库。在这种情况下，您的视图将如下所示：

```
def detail(owner_id, owner, id):
    product = Product.objects.get(id=id, owner_id=owner_id)
    ...etc... 
```

请注意，我省略了对 的引用`owner`，因为所有者 ID 似乎足以识别对象。实际上，我会说 id 本身就足够了，因为它是唯一的，并且您根本不需要所有者：但这由您决定。

# java - XMLPullParser 在执行时抛出错误

> ID：11703420
> 
> 赞同：0
> 
> 时间：2012-07-28T17:58:47.920
> 
> 标签：java, xmlpullparser

我尝试了一个使用 XMLPullParser 的简单示例，但它引发了异常。

```
Exception in thread "main" org.xmlpull.v1.XmlPullParserException: could not load any factory class (even small or full default implementation); nested exception is: 
org.kxml2.io.XmlReader
at org.xmlpull.v1.XmlPullParserFactory.newInstance(XmlPullParserFactory.java:225)
at org.xmlpull.v1.XmlPullParserFactory.newInstance(XmlPullParserFactory.java:76)
at XMLParsing.main(XMLParsing.java:18) 
```

我的代码是：

```
import java.io.IOException;
import java.io.StringReader;

import org.xmlpull.v1.XmlPullParser;
import org.xmlpull.v1.XmlPullParserException;
import org.xmlpull.v1.XmlPullParserFactory;

public class XMLParsing {

    /**
     * @param args
     * @throws XmlPullParserException 
     * @throws IOException 
     */
    public static void main(String[] args) throws XmlPullParserException, IOException {

        XmlPullParserFactory factory = XmlPullParserFactory.newInstance();
        factory.setNamespaceAware(true);
        XmlPullParser xpp = factory.newPullParser();

        xpp.setInput(new StringReader ("<foo>Hello World!</foo>"));
        int eventType = xpp.getEventType();
        while (eventType != XmlPullParser.END_DOCUMENT) {
         if(eventType == XmlPullParser.START_DOCUMENT) {
             System.out.println("Start document");
         } else if(eventType == XmlPullParser.END_DOCUMENT) {
             System.out.println("End document");
         } else if(eventType == XmlPullParser.START_TAG) {
             System.out.println("Start tag "+xpp.getName());
         } else if(eventType == XmlPullParser.END_TAG) {
             System.out.println("End tag "+xpp.getName());
         } else if(eventType == XmlPullParser.TEXT) {
             System.out.println("Text "+xpp.getText());
         }
         eventType = xpp.next();
        }

    }

} 
```

谁能说可能是什么问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-28T19:19:04.297

我认为抛出异常是因为您没有传递必须创建工厂的类名。尝试使用其覆盖的方法`newInstance(java.lang.String factoryClassName)`。

您可以在此处找到有关使用工厂的更多信息：[http ://www.xmlpull.org/v1/doc/api/org/xmlpull/v1/XmlPullParserFactory.html#newInstance%28%29](http://www.xmlpull.org/v1/doc/api/org/xmlpull/v1/XmlPullParserFactory.html#newInstance%28%29)

# c++ - 为什么重命名我的变量会防止出现段错误？

> ID：11703422
> 
> 赞同：1
> 
> 时间：2012-07-28T17:59:16.550
> 
> 标签：c++, iterator, segmentation-fault, iteration

我有一个单一的深度优先搜索算法来遍历我的图，给定一个起始节点的迭代器。

文档摘要：

*   `GraphIter`是一个**typedef**`Graph::iterator`
*   `Graph`类**扩展** `map<string, Node>`
*   `start->second.edges()`返回`set<string>`

**如果 的大小**为**0**`start->second.edges()` ，则此代码会导致分段错误：

 **（为简洁起见，我已经截断了不相关的部分，包括递归调用。）

* * *

## 错误代码

```
void Graph::dfs(GraphIter start)
{
    cout << "EDGES SIZE: " << start->second.edges().size() << endl;

    for (set<string>::iterator it = start->second.edges().begin();
          it != start->second.edges().end(); ++it)
    {
        GraphIter iter = this->find(*it);     // <--- SEGMENTATION FAULT
    }
} 
```

* * *

现在看看当我拉`start->second.edges()`入一个局部变量时会发生什么：不再有段错误！

这是不生成段错误的代码：

* * *

## 好代码

```
void Graph::dfs(GraphIter start)
{
    set<string> edges = start->second.edges();       // <--- MAGIC TRICK
    cout << "EDGES SIZE: " << edges.size() << endl;

    for (set<string>::iterator it = edges.begin();
          it != edges.end(); ++it)
    {
        GraphIter iter = this->find(*it);
    }
} 
```

* * *

所以区别在于，在好的代码中，当字符串集的**大小**（来自`edges()`方法）为**0**时，`for`在第二种情况下永远不会进入循环。但是在第一种情况下，`for`循环仍然至少执行一次，直到它意识到它不能取消引用`it`变量。

为什么这些不同？他们不访问相同的内存部分吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-28T18:02:18.120

因为按值`edges()`返回一个，并且将迭代器返回到不同的容器，因为每次调用都会返回一个新的。`set``start->second.edges().begin()``start->second.edges().end()``edges()``set`

通过使用命名变量创建单个副本，您可以确保迭代器都来自同一个容器，并且您可以有效地迭代 from `begin()`to `end()`。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-28T18:01:52.353

可能是按值`start->second.edges()`返回`std::set<std::string>`。这将使循环中的迭代器不兼容并导致未定义的行为。

你的“魔术”

```
set<string> edges = start->second.edges(); 
```

确保您在同一个容器“边缘”上进行迭代。

`Node::edges()`您可以通过引用返回来修复它：

```
const std::set<std::string>& edges() const { .... } 
```**

# c - 并发 RPC 服务器

> ID：11703424
> 
> 赞同：2
> 
> 时间：2012-07-28T17:59:26.703
> 
> 标签：c, rpc

我需要创建一个能够同时处理来自客户端的多个请求的并发 RPC 服务器。

在 linux 中使用`rpcgen`编译器（基于 sun RPC），它不支持`-A`为并发服务器创建存根的选项。（该`-A`选项在 solaris 中可用）

感谢有人可以提供一些想法：

1.  在linux中创建并发RPC服务器的方法是什么。一些谷歌搜索建议在存根中进行更改，这不是一个好主意。
2.  任何其他可用的 RPC 包 - sun rpc 的替代品。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-29T17:12:05.637

It's such an old post and surely you will already have solved it, but it can be helpfull to somebody else:

In the "**rpcgen**" RPC compiler provided in the GNU toolchain the corresponding option is "**`-M`**", for example:

**`rpcgen -M your_xdr_file.x`**

The change in the generated code is simple but elegant: the caller is who has to alloc the buffer where the client stub will write the response. This is the common behaviour in thread safe APIs. So will happen in the server stub, and there appears a hook in the server (called "`PROGRAMNAME_VERSION_freeresult`") where you will have the opportunity to free all the resources that you could have allocated when executing the call in the server side.

Hope it helps someone!

# jquery - 未捕获的类型错误：对象 [object Object] 没有方法“nivoSlider”

> ID：11703425
> 
> 赞同：0
> 
> 时间：2012-07-28T17:59:31.107
> 
> 标签：jquery, slider, nivo-slider

我收到 nivoslider 的错误，当我在 chrome 中调试它时，我发现这个`no method nivoSlider`代码工作正常，直到我添加了另一个滑块内容滑块。现在它只显示最后一张图像而不是移动。我听说过这个话题，所以得出结论，如果你使用 jQuery 的 2 个滑块，它会产生冲突或类似的东西，我不知道请帮忙。

```
<div class="slider-wrapper theme-default">
    <div id="slider" class="nivoSlider">
        <?php $banner_query=executeQuery("select * from tbl_picture where status=1");
            while($banner=mysql_fetch_array($banner_query)){?>
        <img src="image/<?php echo $banner['picture'];?>"  alt="<?php echo $banner['title'];?>" title="<?php echo $banner['title'];?>" border="0"/>
        <?php }?>      
    </div>  

</div>

<script type="text/javascript" src="codelibrary/js/jquery-1.6.4.min.js"></script>
<script type="text/javascript" src="codelibrary/js/jquery.nivo.slider.pack.js"></script>
<script type="text/javascript">
    $(window).load(function() {
        $('#slider').nivoSlider();
    });
</script> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-17T00:46:27.757

此错误告诉您 JQuery 对象（`$('#slider')`在这种情况下）没有 nivoSlider 方法，这意味着由于某种原因尚未加载 nivoSlider 插件。

很可能其中一件事情正在发生：

*   在包含 nivoSlider**之前，**您还没有包含 jquery
*   您**不止一次**包含 jquery 源

这与页面中有多少滑块无关，这是脚本加载问题。显然，如果您有多个，则不能使用相同的 ID。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-28T19:36:02.053

如果您使用 2 个或更多具有相同 ID 选择器的滑块，您可能会遇到冲突。但是，目前您似乎在概念上使用它是开箱即用的，除了使用 PHP 推出幻灯片。一般而言，尽管在这种情况下要确切知道发生了什么，但几乎没有什么可做的。

如果您可以在我自己和像我这样的其他人可以查看并亲自查看的地方发布一些代码，我们可能会更好地协助，但是目前基于您的问题，并且提到想要一次使用多个，我的结论是，您可能`#slider`对您想要的页面上的两个滑块使用相同的 ID。

# python - 多用户的 Python 缓存

> ID：11703426
> 
> 赞同：0
> 
> 时间：2012-07-28T17:59:35.047
> 
> 标签：python, django, caching, oauth, oauth-2.0

我正在为 Vimeo API 创建一个 python 包装器，这是我第一次创建 python 发行版。我对**python 缓存**有疑问。

我引用了这个[现有的 python-vimeo 包装器](https://github.com/dkm/python-vimeo/blob/master/vimeo/__init__.py)来缓存请求令牌。那家伙是这样实现的

```
"""By default, this client will cache API requests for 120 seconds. To
override this setting, pass in a different cache_timeout parameter (in
seconds), or to disable caching, set cache_timeout to 0.""" 
```

我想知道它是否会产生问题。如果有**多个用户****同时**使用该功能来准确连接vimeo ，并将这样的信息存储在服务器中

```
return self._cache.setdefault(key, processor(headers, content)) 
```

它不会产生问题（信息将**在缓存中被覆盖**）吗？

如果它产生问题，你能告诉我最好的解决方案吗？我认为它将以经过身份验证的用户名的名称存储在文件名中。我对吗？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-28T18:59:18.990

我不确定我是否理解这个问题，但您可以创建一个前缀键，其中键的前缀是用户名。所以一个天真的但可能是好的方法是保存到

> 用户名+"_"+key

取而代之的是钥匙

很可能不会有任何关键冲突。

# actionscript-3 - Flex 4 在运行时更改主应用程序背景颜色

> ID：11703428
> 
> 赞同：0
> 
> 时间：2012-07-28T17:59:41.400
> 
> 标签：actionscript-3, flash, apache-flex, actionscript, styles

Flex 4 中是否可以在运行时更改背景颜色`<s:Application>`？我已经看到了如何使用应用程序组件的 MX 版本而不是 spark 版本的示例。

我无法将`backgroundColor`属性绑定到变量并对其进行修改。但是，我认为我应该使用`styleManager`组件的属性来执行此更改。

谁能解释如何做到这一点？

感谢您的时间。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-28T18:47:40.943

我建议你通过这个：

[http://help.adobe.com/en_US/flex/using/WS2db454920e96a9e51e63e3d11c0bf69084-7fee.html](http://help.adobe.com/en_US/flex/using/WS2db454920e96a9e51e63e3d11c0bf69084-7fee.html)

视频教程逐步介绍了在 Flex 4 中使用 CSS 和皮肤，这是更改视觉组件的主要方法。

应用程序仍然具有 backgroundColor 样式：http: [//help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/spark/components/Application.html](http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/spark/components/Application.html)

```
<?xml version="1.0" encoding="utf-8"?>
<s:Application xmlns:fx="http://ns.adobe.com/mxml/2009" 
               xmlns:s="library://ns.adobe.com/flex/spark" 
               xmlns:mx="library://ns.adobe.com/flex/mx" minWidth="955" minHeight="600"
               creationComplete="application1_creationCompleteHandler(event)">
    <s:layout>
        <s:HorizontalLayout/>
    </s:layout>
    <fx:Script>
        <![CDATA[
            import mx.events.FlexEvent;

            protected function application1_creationCompleteHandler(event:FlexEvent):void
            {
                setStyle('backgroundColor',0xCCCCCC);
            }

        ]]>
    </fx:Script>
    <s:Button click="setStyle('backgroundColor','0xff0000');" label="turn red"/>
    <s:Button click="setStyle('backgroundColor','0x0000ff');" label="turn blue"/>
    <s:Button click="setStyle('backgroundColor','0x00ff00');" label="turn green"/>
</s:Application> 
```

更好的方式去 IMO

```
<?xml version="1.0" encoding="utf-8"?>
<s:Application xmlns:fx="http://ns.adobe.com/mxml/2009" 
               xmlns:s="library://ns.adobe.com/flex/spark" 
               xmlns:mx="library://ns.adobe.com/flex/mx" minWidth="955" minHeight="600">
    <s:layout>
        <s:HorizontalLayout/>
    </s:layout>
    <fx:Style>
        @namespace s "library://ns.adobe.com/flex/spark";
        @namespace mx "library://ns.adobe.com/flex/mx";
        s|Application{
            backgroundColor:#CCCCCC;
        }
    </fx:Style>
    <s:Button click="setStyle('backgroundColor','0xff0000');" label="turn red"/>
    <s:Button click="setStyle('backgroundColor','0x0000ff');" label="turn blue"/>
    <s:Button click="setStyle('backgroundColor','0x00ff00');" label="turn green"/>
</s:Application> 
```

最好还是将 CSS 拉出到它自己的文件中，然后用

```
<fx:Style source="myStyle.css"/> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-28T18:43:42.363

你可以试试

```
FlexGlobals.topLevelApplication.setStyle("backgroundColor", 0xff0000);  // that would turn it into bright red
FlexGlobals.topLevelApplication.setStyle("backgroundAlpha", 1);  // Sometimes background color is ignored when background alpha is zero 
```

如果背景颜色没有改变，这意味着您的组件之一可能正在指定背景颜色。

# javascript - 灯箱、CSS 和 JavaScript

> ID：11703429
> 
> 赞同：0
> 
> 时间：2012-07-28T17:59:45.270
> 
> 标签：javascript, html, css, windows, popup

我想在 html 页面上添加 6-7 个透明弹出窗口，我添加 4 到现在 1 和 2 工作正常，当我按下链接时 3 和 4 会弹出但之后如果我想关闭它们，透明背景会消失但中间的窗口仍然存在......我将附上 html 代码和 css（它是一个非常简单的代码，即使这样我也无法弄清楚什么是错的）

我感谢所有的帮助谢谢大家！

非常感谢您回答如何添加代码:)

```
@CHARSET "ISO-8859-1";

/* This is a style of dim effect onClick on Register or Log in button - it's the transparent background*/
.black_overlay1, .black_overlay2, .black_overlay3, .black_overlay4{
    display: none;
    position: fixed;
    top: 0%;
    left: 0%;
    width: 100%;
    height: 100%;
    background-color: black;
    z-index:1001;
    -moz-opacity: 0.8;
    opacity:.80;
    filter: alpha(opacity=80);
}

/* This is a style for log in and registration form */
.white_box  {
   display: none;
   position: absolute;
   top: 25%;
   left: 25%;
   width: 50%;
   height: 50%;
   padding: 16px;
   border: 5px solid #ffffff;
   background-color: #cee9ad;
   z-index:1002;
   overflow: auto;
}

<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html>
    <head>
        <title>
            Simple lightBox effect with css and javascript
        </title>

    <link rel="stylesheet" type="text/css" href="style.css" />

    </head>
    <body>
<!-- BUTTONS for LogIn and Register -->

        <a href="javascript:void(0)" onclick = "document.getElementById('light1').style.display='block';document.getElementById('fade').style.display='block'">Energy Efficient</a>

        <a href="javascript:void(0)" onclick = "document.getElementById('light2').style.display='block';document.getElementById('fade').style.display='block'">Cost efficient</a>

        <a href="javascript:void(0)" onclick = "document.getElementById('light3').style.display='block';document.getElementById('fade').style.display='block'">Sustainability &amp; Safety</a>

        <a href="javascript:void(0)" onclick = "document.getElementById('light4').style.display='block';document.getElementById('fade').style.display='block'">Time Saving</a>

<!-- LOG IN FORM - WRITE DOWN HERE -->
        <div id="light1" class="white_box" style="position: absolute; left: 607px; top: 120px; width:630px; height:560px">      
            <p>Energy Efficient</p>
        </div>

        <div id="light2" class="white_box" style="position: absolute; left: 607px; top: 120px; width:630px; height:560px">      
            <p>Cost efficient</p>
        </div>

        <div id="light3" class="white_box" style="position: absolute; left: 607px; top: 120px; width:630px; height:560px">      
            <p>Sustainability &amp; Safety</p>
        </div>

        <div id="light4" class="white_box" style="position: absolute; left: 607px; top: 120px; width:630px; height:560px">      
            <p>Time Saving</p>
        </div>

<!-- Javascript for hidding div with LogIn form and the fade effect with it -->

        <a onclick="document.getElementById('light2').style.display='none';document.getElementById('fade').style.display='none'" href="javascript:void(0)">
            <div id="fade" class="black_overlay1" onclick = "document.getElementById('light1').style.display='none';document.getElementById('fade').style.display='none'">
            </div>
        </a>

        <a onclick="document.getElementById('light2').style.display='none';document.getElementById('fade').style.display='none'" href="javascript:void(0)">
            <div id="fade" class="black_overlay2" onclick = "document.getElementById('light2').style.display='none';document.getElementById('fade').style.display='none'">
            </div>
        </a>

        <a onclick="document.getElementById('light2').style.display='none';document.getElementById('fade').style.display='none'" href="javascript:void(0)">
            <div id="fade" class="black_overlay3" onclick = "document.getElementById('light3').style.display='none';document.getElementById('fade').style.display='none'">
            </div>
        </a>

        <a onclick="document.getElementById('light2').style.display='none';document.getElementById('fade').style.display='none'" href="javascript:void(0)">
            <div id="fade" class="black_overlay4" onclick = "document.getElementById('light4').style.display='none';document.getElementById('fade').style.display='none'">
            </div>
        </a>

<!-- Other content on the page -->

    </body>
</html> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-30T18:08:18.963

该错误是由重复的`ID`属性值引起的，包括传递给`getElementById`函数的属性值。

这是固定的 HTML 代码。我已将`ONCLICK`属性中的脚本转换为一个`SCRIPT`块中的两个函数，以使它们更易于管理和阅读。

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html>
    <head>
        <title>
            Simple lightBox effect with css and javascript
        </title>

        <link rel="stylesheet" type="text/css" href="style.css" />

        <script>
        function doshow(num) {
            document.getElementById('light'+num).style.display='block';
            document.getElementById('fade'+num).style.display='block';
        }
        function dohide(num) {
            document.getElementById('light'+num).style.display='none';
            document.getElementById('fade'+num).style.display='none';
        }
        </script>

    </head>
    <body>
<!-- BUTTONS for LogIn and Register -->

        <a href="javascript:void(0)" onclick = "doshow(1)">Energy Efficient</a>

        <a href="javascript:void(0)" onclick = "doshow(2)">Cost efficient</a>

        <a href="javascript:void(0)" onclick = "doshow(3)">Sustainability &amp; Safety</a>

        <a href="javascript:void(0)" onclick = "doshow(4)">Time Saving</a>

<!-- LOG IN FORM - WRITE DOWN HERE -->
        <div id="light1" class="white_box" style="position: absolute; left: 607px; top: 120px; width:630px; height:560px">      
            <p>Energy Efficient</p>
        </div>

        <div id="light2" class="white_box" style="position: absolute; left: 607px; top: 120px; width:630px; height:560px">      
            <p>Cost efficient</p>
        </div>

        <div id="light3" class="white_box" style="position: absolute; left: 607px; top: 120px; width:630px; height:560px">      
            <p>Sustainability &amp; Safety</p>
        </div>

        <div id="light4" class="white_box" style="position: absolute; left: 607px; top: 120px; width:630px; height:560px">      
            <p>Time Saving</p>
        </div>

<!-- Javascript for hidding div with LogIn form and the fade effect with it -->

        <a onclick="dohide(1)" href="javascript:void(0)">
            <div id="fade1" class="black_overlay1">
            </div>
        </a>

        <a onclick="dohide(2)" href="javascript:void(0)">
            <div id="fade2" class="black_overlay2">
            </div>
        </a>

        <a onclick="dohide(3)" href="javascript:void(0)">
            <div id="fade3" class="black_overlay3">
            </div>
        </a>

        <a onclick="dohide(4)" href="javascript:void(0)">
            <div id="fade4" class="black_overlay4">
            </div>
        </a>

<!-- Other content on the page -->

    </body>
</html> 
```

# gwt - GWT 数据网格选择

> ID：11703430
> 
> 赞同：0
> 
> 时间：2012-07-28T18:00:05.827
> 
> 标签：gwt, datagrid, row, selection

我想根据表单的状态拒绝在数据网格中选择一行。如果表单具有更改数据的字段，我希望拒绝行选择。

是否有一个事件我可以捕获（在选择之前）并取消，还是我必须自己实现逻辑？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-30T06:05:09.443

您可以在您的 SelectionModel 上使用 SelectionChangeHandler（它为您提供一个已选择的对象，您可以取消选择它），或者您可以在您的 DataGrid 上使用 CellPreviewHandler（它为您提供一个被点击的行 - event.getContext() .getIndex() - 您可以在您的 SelectionModel 中取消选择它）。

选择取决于你想在事件之后做什么：你必须在你的 UI 中做一些明显的事情，这样用户就不会混淆为什么点击一行会选择它，而点击另一行却不会。例如，您可以在呈现 DataGrid 后立即更改不可选择行的背景颜色，然后在选择错误行时显示错误消息。

# google-docs-api - Google Doclist API：修订提要：次要修订？

> ID：11703431
> 
> 赞同：1
> 
> 时间：2012-07-28T18:00:11.620
> 
> 标签：google-docs-api

有没有办法通过修订提要访问微小的变化？

谢谢

Ĵ

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-29T00:57:29.140

Google Docs 没有次要修订和主要修订的概念，所有修订都可通过修订供稿获得。如果您指的是[*pruned* revisions](https://support.google.com/docs/bin/answer.py?hl=en&answer=95902)，则目前无法检索被修剪的各个修订。

# c++ - Eclipse C++：“在 PATH 中找不到程序“g++””

> ID：11703432
> 
> 赞同：43
> 
> 时间：2012-07-28T18:00:20.833
> 
> 标签：c++, c, eclipse, g++

如图所示，我在 Windows 7（32 位）中安装了 gpp。

![在此处输入图像描述](../Images/0a58c01000380c6f163c269b832d6cf4.png)

PATH 变量气体 g++

```
"%SystemRoot%\system32;%SystemRoot%;%SystemRoot%\System32\Wbem;%SYSTEMROOT%\System32\WindowsPowerShell\v1.0\;C:\cygnus\cygwin-b20\H-i586-cygwin32\bin\g++" 
```

仍然 eclipse 显示错误：

> “在 PATH 中找不到程序“g++””。

如何解决？

![在此处输入图像描述](../Images/004583a8cf11fee83750f9b7aa651363.png)

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2012-10-03T20:36:25.527

今天我遇到了这个问题并通过以下方式解决了它。我在 Eclipse 设置（例如，Preferences/C++/Build/Settings/Discovery）中找到的任何地方都按下了“重置默认值”按钮。之后错误消失，代码编译成功。

* * *

## 回答 #2

> 赞同：17
> 
> 时间：2014-02-10T10:09:56.530

这就是我摆脱它的方式：

1.  安装 MinGW。
2.  选择基本设置中的所有文件并选择应用更改。
3.  选择新的 C++ 项目 您将能够在工具链部分看到“MinGW GCC”，选择相同并创建项目。

* * *

## 回答 #3

> 赞同：11
> 
> 时间：2012-12-24T08:02:11.833

您需要手动下载的 eclipse`gcc`的`g++`编译器工具链（在您的 Windows 机器上），其中一个选项可以通过安装隐式完成（通过为,`cygwin`选择适当的开发包），然后添加编译的,包的位置喜欢windows环境的变量。`gcc``g++``gcc``g++``C:\cygwin\etc\alternatives``PATH`

在此之后打开 Eclipse 并`Project->properties->C/C++ Tool Chain Editor`添加替换默认值`GNU C++ compiler`并`GNU C Compiler`使用`Cygwin C++ compiler`并`Cygwin C compiler`重建项目。相关的错误`gcc, g++ PATH not found`现在将消失。

* * *

## 回答 #4

> 赞同：10
> 
> 时间：2012-07-28T18:01:46.920

你需要：

```
C:\cygnus\cygwin-b20\H-i586-cygwin32\bin 
```

在`PATH`.

并不是

```
C:\cygnus\cygwin-b20\H-i586-cygwin32\bin\g++ 
```

正如你所写。

* * *

## 回答 #5

> 赞同：8
> 
> 时间：2013-05-09T15:09:56.887

我遇到了同样的问题，唯一对我有用的解决方案是：

1.  打开命令行并检查“g++”是否实际执行编译器
2.  如果 (1) 有效，请取消选中 Project->Build automatically in Eclipse
3.  清洁项目
4.  构建项目

* * *

## 回答 #6

> 赞同：8
> 
> 时间：2014-10-04T05:29:27.227

我在使用 Windows 7 的 mingw-64 (x86_64-4.9.1-release-posix-seh-rt_v3-rev1)、Eclipse Luna 4.4.1 和 CDT 8.5.0.201409172108 上遇到了同样的问题。

我通过将以下两个环境变量放在下面解决了这个问题

> 窗口 -> 首选项 -> C/C++ -> 构建-> 环境

*   名称：MINGW_HOME 值：（mingw安装目录不带“\bin”）
*   名称：MSYS_HOME 值：（msys 安装目录不带“\bin”）

你可以检查

> Window -> Preferences -> C/C++ -> Build -> Settings -> Discovery -> CDT GCC Built-in Compiler Settings MinGW [ Shared ]

，如果它没有抱怨“在这个系统上没有检测到 Toolchain MinGW GCC”，那么你就准备好了。

* * *

## 回答 #7

> 赞同：7
> 
> 时间：2016-04-21T06:21:57.207

我遇到了同样的问题：Eclipse 无法在 PATH 中找到 (g++) 和 (gcc)，即使它们可以从命令行访问。我也确信 PATH 正确地指向了它们。

我刚刚从 Eclipse 的工作区中删除了 (.metadata) 文件夹，作为重置它的一种手段，这对我有用。

* * *

## 回答 #8

> 赞同：6
> 
> 时间：2013-07-14T08:28:00.920

它`PATH`位于项目属性 > C/C++ 构建 > 环境（见下面的屏幕截图）。

![在此处输入图像描述](../Images/a2971af25f91df8f118ea72270670d65.png)

供您参考，我使用的是 MinGW，在安装 MSYS 之前我遇到了同样的错误。后来我发现我还需要安装 MSYS，因为`make.exe`MinGW 没有附带。（我不认为这个错误是 MSYS 的原因。）

安装好MSYS后，将MSYS和MinGW路径添加到环境变量中，重启Eclipse。请记住重建您的项目以纠正错误。如果重启后错误仍然存​​在，请重新创建工作区。至少这已经解决了我网站上的问题，希望这对你也有帮助。

祝你好运！

* * *

## 回答 #9

> 赞同：4
> 
> 时间：2013-12-12T09:35:09.953

我有一个类似的问题。引发错误，但代码已编译和链接。该错误是由错误解析器使用与编译的配置不同的配置引起的。

错误解析器配置仅对我的软件的 Linux 配置有效。我的活动配置是为 MinGW 和 Windows 设置的。

解决方案：

*   在**Windows->Preferences->C/C++->Indexer**下的 Elipse中，将索引器的 Build Configuration 设置为**Use active build configuration**。
*   清理并重建，否则旧错误将仍然可见

* * *

## 回答 #10

> 赞同：3
> 
> 时间：2012-08-15T09:21:59.787

也许它在这里无关，但它可能对某人有用。
我安装了 jdk：`D:\Program Files\Java\jdk1.7.0_06\bin`
所以我将它添加到`%PATH%`变量并在 cmd 上检查它，一切正常，但 Eclipse 一直向我显示该错误。
我使用了引号，`%PATH%`所以它看起来像：

```
%SYSTEMROOT%\System32;"D:\Program Files\Java\jdk1.7.0_06\bin" 
```

问题解决了。

* * *

## 回答 #11

> 赞同：3
> 
> 时间：2013-12-06T19:01:54.253

我有类似的问题，我通过以下方式解决了它：

使用 Ubuntu 软件中心安装 g++ GNU C++ 编译器

更改：Window -> Preferences -> C/C++ -> Build -> Settings -> Discovery -> CDT GCC Build in Complier Settings [Shared] from: ${COMMAND} -E -P -v -dD "${INPUTS }" 到：/usr/bin/${COMMAND} -E -P -v -dD "${INPUTS}"

我希望它有所帮助。

* * *

## 回答 #12

> 赞同：2
> 
> 时间：2016-08-20T21:28:49.227

I had the same problem in Sublime..

1.  Right click on my computer
2.  Advanced system settings
3.  Environment variables
4.  in system variables, change path to location of '...\MinGW\bin'

Example: D:\work\sublime\MinGW\bin

* * *

## 回答 #13

> 赞同：2
> 
> 时间：2020-03-12T10:37:53.163

对我来说，它得到了修复：

转到：窗口 -> 首选项 -> C/C++ -> 构建 -> 环境

然后按“添加...”

姓名：`MINGW_HOME`

值：（`C:\MinGW`如果您选择自定义路径，您的可能会有所不同）

点击“应用并关闭”

现在，如果您正确执行所有操作，它应该可以工作

* * *

## 回答 #14

> 赞同：1
> 
> 时间：2013-04-10T02:29:03.127

我认为 cgywin 可能不适合你，因为如果你启动命令提示符，你只能在 Win7 中编译你的代码；您需要改用 MinGW 编译器工具集。安装编译器后，转到 Properties->C/C++ Build->Tool Chain Editor -> 将您当前的工具链更改为 MinGW GCC。

* * *

## 回答 #15

> 赞同：1
> 
> 时间：2014-10-16T09:22:37.957

使用 Gaisler Tools for GR712RC Installation for OS RTEMS，所有提示对我都不起作用。我正在使用 Eclipse 开普勒。

简单的方法是在目录中**复制**`sparc-rtems-gcc.exe`to`gcc.exe`和`sparc-rtems-g++.exe`to 。`g++.exe``C:\opt\rtems-4.10-mingw\bin`

* * *

## 回答 #16

> 赞同：1
> 
> 时间：2015-05-17T17:41:34.097

WINDOWS 7的

如果有新人阅读本文，请确保在任何此操作之前简单地尝试全新安装 mingw。如果这是您的问题，它将为您节省很多时间。

我打开了wingw安装程序，选择了要删除的每个程序，应用更改（在安装选项卡下，左上角），关闭，返回并安装每个可用的文件（在“基本设置”部分）。之后，在开始一个新的 C++ 项目时，eclipse 使用“MinGW GCC”工具链运行良好。

我希望这对其他人有用。如果没有，我也会重新安装 JDK（Java 开发人员工具包）和 ECLIPSE。我有一个 64 位系统，但我只能让 Eclipse 和 JDK 的 32 位版本一起工作。

* * *

## 回答 #17

> 赞同：1
> 
> 时间：2017-01-07T04:31:07.993

首先安装 Eclipse C++ 需要的 MinGW 或其他 C/C++ 编译器。

使用[https://sourceforge.net/projects/mingw-w64/](https://sourceforge.net/projects/mingw-w64/) 令人难以置信的是，download.cnet.com 的版本带有恶意软件。

回到 Eclipse。

现在在 Eclipse 帮助手册讨论的所有路径设置中，而不是键入路径，**选择变量**和

```
**MINGW_HOME** 
```

并对所有需要编译器路径的实例执行此操作。

首先是单击任何项​​目的**首选项**和**C/C++ General**然后是**路径和符号**并添加

```
**MINGW_HOME** to those paths of for the compiler. 
```

接下来只需将主目录添加到**C++/C Build**下的**Build Variables**

 **[构建变量屏幕截图](https://i.stack.imgur.com/2Jygx.png)

* * *

## 回答 #18

> 赞同：1
> 
> 时间：2017-02-23T00:27:23.810

如果你有你的 PATH 设置并且你可以通过命令行看到 g++ --version，然后尝试删除项目并创建一个新的 c++ 项目。

所以重置默认值可能会起作用，但我认为如果之前没有添加它，它必须更新 PATH 。

* * *

## 回答 #19

> 赞同：1
> 
> 时间：2015-11-11T18:29:17.777

就我而言，我没有在*安装管理器*中*标记安装**mingw32-gcc-g++* *包*，这就是eclipse不知道它的原因。

 *需要转到安装管理器，标记它（在*基本设置*选项卡中）并*更新目录*

* * *

## 回答 #20

> 赞同：1
> 
> 时间：2018-08-28T11:13:09.790

原因是eclipse找不到你的gcc或者g++环境变量路径。

您可能已尝试运行`c`or`c++`或`fortran`但`eclipse`无法找到编译器。

因此，在您的环境变量中添加路径。

1.  Windows -> 搜索 - 环境变量 -> 点击底部的环境变量。

2.  单击路径->编辑->新建->您的变量路径

路径应该是完整的，例如：

```
C:\Users\mahidhai\cygwin64\usr\sbin 
```

确保变量被永久存储。关闭环境变量 GUI 后它不会被删除。

有时您可能会发现添加路径变量很困难。确保 Windows 已更新。

即使 Windows 已更新并且您遇到问题，也可以直接转到注册表并导航到以下内容。

```
HKLM\SYSTEM\CurrentControlSet\Control\Session Manager\Environment 
```

在此处添加您的路径。删除路径变量的任何不必要的重复。

**注意：** 你需要在系统环境变量-path中添加你的路径变量

* * *

## 回答 #21

> 赞同：1
> 
> 时间：2020-03-12T05:02:00.990

[在此处输入图像描述](https://i.stack.imgur.com/CLIX0.jpg)如果您只是想运行 C 程序但遇到此错误，这可能意味着即使“C:\MinGW\bin”已经添加到 Windows 路径变量中，也没有安装 MinGw c++ 编译器。

**解决方案：**

1.  运行“mingw-get-setup.exe”打开MinGW安装管理器

2.  打开所有软件包->MinGw->MinGW 基础系统->MinGW 编译器套件

3.  选择以下编译器进行安装：

    . mingw32-gcc-g++

    . mingw32-gcc-v3-core

    . mingw32-gcc-vc-g++

4.  单击安装->应用更改以应用上述更改

5.  等待安装完成（可能有一些错误，忽略它们）。

6.  重新启动 Eclipse。

7.  完毕。

它在我的环境中工作。

希望它适用于您的情况。

* * *

## 回答 #22

> 赞同：1
> 
> 时间：2017-05-23T17:26:42.710

在 Windows 10 上遇到此问题，安装了 eclipse Neon Release (4.6.0) 和 MSYS2。Eclipse 一直抱怨“在 PATH 中找不到程序 'g++'”和“在 PATH 中找不到程序 'gcc'”，但它正在编译和运行我的 C++ 代码。在命令提示符下，我可以运行 g++。

解决方案是为 Eclipse 定义名为“PATH”的 C++ 环境变量，以指向名为“path”的 Windows 变量，也就是 $(Path)。菜单：首选项>>C/C++>>构建>>环境

看起来 eclipse 对这个环境的名称是区分大小写的，而 windows 不关心大小写。***

# url - 这三个网址的区别？

> ID：11703433
> 
> 赞同：2
> 
> 时间：2012-07-28T18:00:55.093
> 
> 标签：url, query-string, url-routing, anchor

有人可以解释在 url 中传递不同的参数有什么关系吗？

例如

```
1: www.domain.com/folder1/folder2/file.html?param=9?val=ty5?test
2: www.domain.com/folder1/folder2/file.html#param=93#val=t5y5?test=9
3: www.domain.com/folder1/folder2/file.html&param=9?val=ty5&test=90#poiu 
```

基本上我想知道这三个字符`(#, &, ?)`在 url 中做了什么。我见过他们大部分时间？我可以使用其他东西吗，例如：`www.domain.com/folder1/folder2/file.html*param=9_val+ty5@test`

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-07-28T18:05:01.233

`?`表示查询字符串的开始分隔[查询字符串](http://www.w3schools.com/asp/coll_querystring.asp)
`&`的键值对
`#`表示一个[锚点](http://www.w3schools.com/tags/tag_a.asp)。[这里](http://freepages.computers.rootsweb.ancestry.com/~pasher/anchors.htm)有更多关于锚链接的内容。

请注意，您的所有三个网址都不正确。

有效网址：

```
http://domain/path/file?name=value&name=value#anc 
```

我注意到您已经用附加问题编辑了您的问题

> 我可以使用其他的东西吗例如：www.domain.com/folder1/folder2/file.html*param=9_val+ty5@test

您可以在查询字符串或锚点中使用您喜欢的任何内容，只要它是[url 编码](http://www.w3schools.com/tags/ref_urlencode.asp)的。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-28T18:09:58.987

这篇[维基百科文章](http://en.wikipedia.org/wiki/URI_scheme)详细介绍了一些很好的例子。

*   A`?`表示查询的开始
*   A`&`分隔查询中的参数
*   A标识要呈现`#`的资源中的片段。`HTML`它通常用于识别浏览器应该确保的页面是否在视图中，例如标题等

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-28T18:06:01.800

? 表示 URL 包含 QueryString 值。& 用于多个查询字符串值。例子

```
www.abc.com/page?id=abc&pwd=def 
```

# 对我来说是新的，我第一次看到它。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-07-28T18:08:40.607

*   1：？用于将后端代码与其参数分开。注意文件扩展名是 html 并不一定说后端代码是 HTML
*   2：#用于链接到html页面内的锚点
*   3：& 用于将参数与其他参数分开。在这种情况下，file.html 本身也是一个参数，而后端代码是“/”，它可以是任何东西。例如 index.php、default.asp、index.do。这一切都取决于您的 URL 重写。

# php - PHP $row 到数组

> ID：11703435
> 
> 赞同：0
> 
> 时间：2012-07-28T18:01:12.557
> 
> 标签：php

```
while($row = mysql_fetch_array($result)) 
```

目前我的 $row['content'] 里面有四个字符串，我怎样才能将它们放入数组中的单独对象中？

如 0 > “第一个字符串”

1 > “第二个字符串”等...

目前，它们似乎都捆绑在一起......但我需要将它们分开放置在一个数组中。

我是 PHP 新手，花了很长时间试图找出如何做到这一点。

提前致谢。

print_r ($row['content']);

回报：

你好世界！又一个又一个……更多来了……

$row 的 var 转储返回：

数组（4）{[0]=>字符串（1）“1”[“id”]=>字符串（1）“1”[1]=>字符串（12）“你好世界！” [“内容”]=> 字符串（12）“你好世界！” } 数组（4）{ [0]=> 字符串（1）“2”[“id”]=> 字符串（1）“2”[1]=> 字符串（11）“另一个”[“内容”] => string(11) "另一个" } array(4) { [0]=> string(1) "3" ["id"]=> string(1) "3" [1]=> string(18 ) "还有一个..." ["content"]=> string(18) "还有另一个..." } array(4) { [0]=> string(1) "4" ["id" ]=> string(1) "4" [1]=> string(14) "更多来..." ["content"]=> string(14) "更多来..." }

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-28T18:04:00.660

尝试

```
while($row = mysql_fetch_array($result))
{
  $output[] = $row['content'];
}
echo "<pre>";
print_r($output); 
```

* * *

## 回答 #2

> 赞同：-3
> 
> 时间：2012-07-28T18:08:46.703

编辑：我读错了，对不起。如果您的字符串用逗号分隔，那么这就足够了：

```
$array = explode(',', $row['content']); 
```

# java - 在 Android 中查询数据库时出现错误

> ID：11703445
> 
> 赞同：0
> 
> 时间：2012-07-28T18:02:28.993
> 
> 标签：java, android, sql, sqlite, cursor

我是 Android 编程新手，对 java 很生疏！我一直在开发一个小程序，要求用户向 EditText 输入一些内容，一旦时间停止或用户单击“完成”按钮，它就会在数据库中搜索用户设置的值。也就是说，我在那部分遇到了错误。:(

```
public class UserScreen extends Activity implements View.OnClickListener {

    public TextView tvCounter;
    public EditText input;
    public Button finish;

    public void onCreate(Bundle savedInstanceState) {
        // TODO Auto-generated method stub
        super.onCreate(savedInstanceState);
        setContentView(R.layout.gamescreen);

        tvCounter = (TextView) findViewById(R.id.tvCounter);
        finish = (Button) findViewById(R.id.bFinish);
        finish.setOnClickListener(this);

        new CountDownTimer(30000, 1000) {

            public void onTick(long millisUntilFinished) {
                tvCounter.setText("seconds remaining: "
                        + Long.toString(millisUntilFinished / 1000));
            }

            public void onFinish() {
                tvCounter.setText("done!");
                searchDB();
            }
        }.start();
    }

    private SQLiteDatabase database;
    private DatabaseHelper dbHelper;

    public void searchDB() {
        Object tableList[] = { "table1", "table2", "table3", "table4",
                "table5", "table6" };
        Object columnList[] = { "column1", "column2", "column3", "column4", "column5", "column6" };
        int pList[] = { R.id.et1, R.id.et2, R.id.et3,
                R.id.et4, R.id.et5, R.id.et6 };

        database = dbHelper.getReadableDatabase();
        Cursor cursor = null;

        for (int i = 0; i < tableList.length; i++) {

            input = (EditText) findViewById(pList[i]);
            String data = input.getText().toString();

            cursor = database.rawQuery("SELECT * FROM " + tableList[i]
                    + " WHERE " + pList[i] + " = " + columnList[i], null);

            String dbStuff = cursor.toString();
                        if (dbStuff == data) { 
                            tvCounter.setText("YEAH");
                        } 
                        else { 
                        tvCounter.setText("DAMN"); 
                        }
        }
        cursor.close();
    }

    public void onClick(View v) {
        // TODO Auto-generated method stub
        searchDB();
    }
} 
```

错误是：

```
07-28 17:43:59.385: E/AndroidRuntime(920): FATAL EXCEPTION: main
07-28 17:43:59.385: E/AndroidRuntime(920): java.lang.NullPointerException
07-28 17:43:59.385: E/AndroidRuntime(920): at com.example.androidgame.GameScreen.searchDB(GameScreen.java:56)
07-28 17:43:59.385: E/AndroidRuntime(920): at com.example.androidgame.GameScreen.onClick(GameScreen.java:84)
07-28 17:43:59.385: E/AndroidRuntime(920): at android.view.View.performClick(View.java:3511)
07-28 17:43:59.385: E/AndroidRuntime(920): at android.view.View$PerformClick.run(View.java:14105)
07-28 17:43:59.385: E/AndroidRuntime(920): at android.os.Handler.handleCallback(Handler.java:605)
07-28 17:43:59.385: E/AndroidRuntime(920): at android.os.Handler.dispatchMessage(Handler.java:92)
07-28 17:43:59.385: E/AndroidRuntime(920): at android.os.Looper.loop(Looper.java:137)
07-28 17:43:59.385: E/AndroidRuntime(920): at android.app.ActivityThread.main(ActivityThread.java:4424)
07-28 17:43:59.385: E/AndroidRuntime(920): at java.lang.reflect.Method.invokeNative(Native Method)
07-28 17:43:59.385: E/AndroidRuntime(920): at java.lang.reflect.Method.invoke(Method.java:511)
07-28 17:43:59.385: E/AndroidRuntime(920): at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:784)
07-28 17:43:59.385: E/AndroidRuntime(920): at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:551)
07-28 17:43:59.385: E/AndroidRuntime(920): at dalvik.system.NativeStart.main(Native Method) 
```

创建或访问 DB 在另一个类中。

公共类 DBAccess 扩展 Activity {

```
private DatabaseHelper databaseHelper;
private SQLiteDatabase db;

public void onCreate(Context context){
    databaseHelper = new DatabaseHelper(context);
    searchDB();
}

public void openDB(){
    db = databaseHelper.getWritableDatabase();
}
public void closeDB(){
    db.close();
}
public void searchDB(){
    Intent Scoring = getIntent();
    String rawdata[] = Scoring.getStringArrayExtra("data");
    openDB();
    Object tableList[] = { "table1", "table2", "table3", "table4", "table5", "table6" };
    Object columnList[] = { "KEY_COLUMN1", "KEY_COLUMN2", "KEY_COLUMN3", "KEY_COLUMN4", "KEY_COLUMN5",
    "KEY_COLUMN6" };

    int downScore = 0;
    int upScore = 0;
    String dbStuff;

    Cursor cursor = null;

    for (int i = 0; i < tableList.length; i++) {
        if(rawdata[i] == "niente")
            downScore = downScore + 5;
        else {
            cursor = db.rawQuery("SELECT * FROM " + tableList[i] + " WHERE " + rawdata[i] + " = " + columnList[i] , null);
        dbStuff = cursor.toString();
        if (i == 0)
             cursor.moveToFirst();
        else
            cursor.moveToNext();
        if(dbStuff == rawdata[i])
            upScore = upScore + 10;
        else
            downScore = downScore + 5;
        }
    }
    closeDB();
    cursor.close();
    Intent i = new Intent(this, ScoreScreen.class);
    i.putExtra("uScore", upScore);
    i.putExtra("dScore", downScore);
    } 
```

}

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-28T21:26:04.620

设计方面，将数据库构建和维护方面与数据库访问层本身分开。

为此，有 2 节课。1）将所有的构建和维护放在DBHelper.java中，2）DBAccess.java有访问数据库的方法。

下面是这个的代码片段......请注意，应用程序（活动）本身应该一无所知，并且对数据库本身的构造没有可见性（参见 DBHelper 类本身的可见性），而是对简单访问具有完全可见性方法，例如打开、关闭、CRUD 方法...

* * *

```
:

class DBHelper extends SQLiteOpenHelper {

    :
    :

    private SQLiteDatabase db;
    private static final int DATABASE_VERSION = 1;
    private static final String DB_NAME = "dbname.db";
    :
    :

}

public class DBAccess {

    :
    :

    private DBHelper dbHelper;
    private SQLiteDatabase db;

    :
    :

    public DBAccess(Context context) {
        dbHelper = new DBHelper(context);
    }

    /**
     * Open the database
     */
    public void openDB() {
        db = dbHelper.getWritableDatabase();
    }

    /**
     * Close the database
     */
    public void closeDB() {
        db.close();
    }

    :
    :
} 
```

活动使用数据库，您可以有一个名为 setupDB() 的方法，该方法在活动创建期间调用：

```
private void setupDB() {
    dbAccess = new DBAccess(this);
    dbAccess.openDB();
}

:

private void searchDB() {
    :

    mStatusList = dbAccess.selectAllStatus();

    :
}

:
: 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-28T18:04:52.267

您需要初始化您的数据库，它的助手在`onCreate()`：

```
 database = new SQLiteDatabase();
  dbHelper = new DatabaseHelper(); 
```

# android - 不知道为什么代码不起作用.. Android/Java

> ID：11703449
> 
> 赞同：-2
> 
> 时间：2012-07-28T18:02:54.237
> 
> 标签：android, telephonymanager

我目前正在尝试创建一个应用程序，该应用程序可以跟踪我在电话中花费的时间，然后在单击按钮后将其显示在敬酒消息中。

代码在这里找到：http: [//paste.ideaslabs.com/show/6INd0afyi](http://paste.ideaslabs.com/show/6INd0afyi)

我似乎无法弄清楚为什么该应用程序无法正常工作...

这个想法是创建一个服务，只要我打电话就开始（并从那时起无限期地运行）。Service 有两个 while 循环，通过 TelephonyManager 类使用 getCallState() 方法跟踪对话的开始时间和结束时间。然后在活动类中存储和使用结束时间和开始时间变量的值。

活动类只是使用一个按钮来显示一条吐司消息，说明我花了多少时间。

当我尝试在手机上运行该应用程序时，我可以看到该服务正在运行，但该应用程序有时会崩溃或只是显示通话时间为 0 分钟（这不是真的..）

希望大家指出错误？！

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-28T18:12:11.450

仅通过查看您发布的代码，我会说您没有正确阅读有关服务的文档。您不会通过执行来创建服务`MyService s = new MyService()`

阅读[Android 开发人员指南](http://developer.android.com/guide/components/services.html)或[Android SDK 文档](http://developer.android.com/reference/android/app/Service.html)。例如，您将看到如何启动本地服务或使用意图来启动服务。

例如：

```
Intent intent = new Intent(this, HelloService.class);
startService(intent); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-28T22:16:33.420

操作系统会在某些事件发生时广播它们。例如。接收短信，电话状态（发送，接收）。通过阅读您的帖子，我认为您应该使用广播接收器注册您的应用程序。这是一个示例代码。

```
public class PhoneCallState extends BroadcastReceiver 
{

static long start_time, end_time;

@Override
public void onReceive(Context context, Intent intent) 
{
   final Bundle extras = intent.getExtras();

   if(intent.getAction().equals(TelephonyManager.ACTION_PHONE_STATE_CHANGED))
   {            
      final String state = extras.getString(TelephonyManager.EXTRA_STATE);

      if ("RINGING".equals(state))
      {
        Toast.makeText(context, "Ringing", Toast.LENGTH_LONG).show();
      }       

      if ("OFFHOOK".equals(state))
      {

        start_time = System.currentTimeMillis();
        Toast.makeText(context, "Off", Toast.LENGTH_LONG).show();
      }

      if ("IDLE".equals(state))
      {

        end_time = System.currentTimeMillis();

        long duration = (end_time - start_time) /1000;
        Toast.makeText(context, "Duration : " + duration, Toast.LENGTH_LONG).show();

      }

   }
} 
```

并在清单文件中注册您的接收器。

```
<receiver android:name=".PhoneCallState">
    <intent-filter>
        <action android:name="android.intent.action.PHONE_STATE" />
    </intent-filter>
</receiver> 
```

}

最后不要伪造添加 PHONE_STATE 权限。

```
<uses-permission android:name="android.permission.READ_PHONE_STATE" /> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-28T18:39:52.730

看看您以前的问题，我建议您阅读以下内容：[How to make a phone call in android and come back to my Activity when the call is done?](https://stackoverflow.com/q/1556987/1267661)

它描述了如何设置 PhoneStateListener 以便在本地启动呼叫、从其他人接收呼叫并结束呼叫时接收意图。

> Service 有两个 while 循环来跟踪开始时间和结束时间

PhoneStateListener 不需要这些 while 循环，您可以简单地获取两个时间戳并减去差值，而无需每毫秒运行两个 while 循环。

# html - 谷歌地图上可点击的地名

> ID：11703452
> 
> 赞同：-1
> 
> 时间：2012-07-28T18:03:37.820
> 
> 标签：html, google-maps, names

我想知道是否可以访问谷歌地图上显示的名称并允许您创建事件。

例如，是否可以使名称“London”（英国）可点击并具有指向其他页面的超链接？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-28T18:34:59.913

> 我想知道是否可以访问谷歌地图上显示的名称并允许您创建事件。

不，不是，它们是瓷砖的一部分。

> 例如，是否可以使名称“London”（英国）可点击并具有指向其他页面的超链接？

但是，您可以向地图添加点击监听器，对点击位置进行[反向地理编码](https://developers.google.com/maps/documentation/javascript/geocoding#ReverseGeocoding)并根据该结果执行一些操作。

# php - php在同一个文件上自动生成代码

> ID：11703460
> 
> 赞同：0
> 
> 时间：2012-07-28T18:04:46.113
> 
> 标签：php

以下代码生成一个新的 php 文件 playlist.php，其中包含 $start $result 变量中的代码

```
$path = "./files/";
$path2="http://".$_SERVER['SERVER_NAME'].dirname($_SERVER["PHP_SELF"])."/files/";
//echo $path2;
$folder = opendir($path);
$start="<asx version='3.0'>\n<title>Example ASX playlist</title>";
$Fnm = "./playlist.php";
$inF = fopen($Fnm,"w");
fwrite($inF,$start."\n");
while( $file = readdir($folder) ) {
 if (($file != '.')&&($file != '..')&&($file != 'index.htm')){
 $result="<entry>\n<title>$file</title>\n<ref href='$path2$file'/>\n<param name='image'     value='preview.jpg'/>\n</entry>\n";
     fwrite($inF,$result);
 }
}
fwrite($inF,"</asx>");
closedir($folder);
fclose($inF); 
```

我想在指定行号上包含此代码的同一文件中生成相同的代码，这可能吗？

[上面的 php 脚本在新文件http://tinypaste.com/ff242cd6](http://tinypaste.com/ff242cd6)上生成以下代码

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-28T18:33:45.763

```
echo highlight_file(__FILE__,true); 
```

[http://www.php.net/manual/en/function.show-source.php](http://www.php.net/manual/en/function.show-source.php)

这会让您返回当前文件的源代码。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-28T18:58:12.060

追加方法如下：

```
$path = "./files/";
$path2="http://".$_SERVER['SERVER_NAME'].dirname($_SERVER["PHP_SELF"])."/files/";
//echo $path2;
$folder = opendir($path);
$start="<asx version='3.0'>\n<title>Example ASX playlist</title>";
$Fnm = "./playlist.php";
// build content
$fileContent=$start.'/n';

while( $file = readdir($folder) ) {
 if (($file != '.')&&($file != '..')&&($file != 'index.htm')){
 $result="<entry>\n<title>$file</title>\n<ref href='$path2$file'/>\n<param name='image'     value='preview.jpg'/>\n</entry>\n";
     //append to content
$fileContent .= $result;
 }
}
     //append to content
$fileContent .= "</asx>";

// append to file and check status
if ( file_put_contents(__FILE__ , $fileContent , FILE_APPEND) === false )
{

echo "failed to put contents in ".__FILE__."<br>";

} 
```

应该这样做...

编辑：

好的，在我开始之前，你应该先看看一些基本的 PHP 教程，这些教程可以在网上找到。

所以，不要将内容写入文件，只需回显它，并在回显时添加动态内容：

```
$title='the title of your playlist';

$start="<asx version='3.0'>\n<title>".$title."</title>/n";

while( $file = readdir($folder) ) {
 if (($file != '.')&&($file != '..')&&($file != 'index.htm')){
 $result="<entry>\n<title>$file</title>\n<ref href='$path2.$file'/>\n<param name='image'     value='preview.jpg'/>\n</entry>\n";
}
}

$endCont = $start.$result."</asx>";

echo $endCont; 
```

我创建了一个名为`$title`. 该值将是输出中生成的标题。您也可以像使用`<entry>\n<title>$file</title>`.

# java - Android JSONObject 说“name 没有值”，当“name”项肯定存在时

> ID：11703468
> 
> 赞同：0
> 
> 时间：2012-07-28T18:05:15.487
> 
> 标签：java, android, json

我正在使用 Android 的`org.json.JSONObject`课程，到目前为止效果很好。但现在我正在解析一个稍微不同的对象，它给了我一个`JSONException: no value for name`. 但这个名字肯定在那里。

我什至记录了一个`toString()`JSONObject，它就在那里。它是：

```
07-28 17:29:47.281: D/asdf(1639): {"status":"OK","file":{"id":32707990,"icon":"removedforstackoverflow","screenshot":"removedforstackoverflow","name":"Testname123","created_at":"2012-05-23T22:42:55","is_mp4_available":null,"content_type":"application\/x-iso9660-image","is_shared":false,"size":155271168,"parent_id":0}} 
```

为什么它说它不存在，而它肯定存在？我错过了什么吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-28T18:10:53.167

您可能正在尝试从根对象中获取名称。但是name是存储在name下的子对象的一个​​字段`file`。

```
String name = root.getJSONObject("file").getString("name"); 
```

# php - MySQL表之间的自动增量

> ID：11703470
> 
> 赞同：7
> 
> 时间：2012-07-28T18:05:38.700
> 
> 标签：php, mysql, sql

在 MySQL 中，是否可以在两个不同的表中拥有一个自动递增的列？示例：table1 有一个“secondaryid”列，table2 也有一个“secondaryid”列。是否可以让 table1.secondaryid 和 table2.secondaryid 保存相同的信息？像 table1.secondaryid 可以保存值 1、2、4、6、7、8 等，而 table2.secondaryid 可以保存值 3、5、9、10？这样做的原因是双重的：1）这两个表将在一个单独的“喜欢”表中引用（类似于用户在 facebook 上喜欢一个页面）和 2）table2 中的数据是 table1 使用主键的子集。因此，table2 中包含的信息取决于 table1，因为它们是不同类别的主题。（类别为 table1，主题为 table2）。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-28T18:18:12.257

您似乎想在两个单独的表中区分类别和主题，但在另一个表中引用它们的 id`likes`以方便用户喜欢类别或主题。

您可以做的是创建一个包含子类型`categories`和`topics`. 自动递增的键将在超实体表中生成，并仅插入两个子类型表之一（基于它是类别还是主题）。

子类型表通过 1:1 关系中的自动递增字段引用此超实体。

这样，您可以简单地将超实体表链接到`likes`仅基于一列的表（可以表示类别或主题），并且`id`在子类型表中都不会出现。

这是一个简化的示例，说明如何对此进行建模：

![ER模型](../Images/8a7f84884b36bd04b10c8bf6e818feac.png)

此模型将允许您维护类别和主题之间的关系，但在`superentity`表中概括了这两个实体。

此模型的另一个优点是您可以将子类型表中的公共字段抽象到超实体表中。例如说`categories`and`topics`都包含字段`title`和`url`: 您可以将这些字段放在`superentity`表中，因为它们是其子类型的公共属性。仅将特定于子类型表的字段放入子类型表中。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-07-28T18:12:10.513

您不能在表之间共享 auto_increment 值，但您可以让它看起来是：

```
set @@auto_increment_increment=2; // change autoinrement to increase by 2

create table evens (
    id int auto_increment primary key
);
alter table evens auto_increment = 0;

create table odds (
    id int auto_increment primary key
);
alter table odds auto_increment = 1; 
```

这样做的缺点是您正在更改全局设置，因此**所有**auto_inc 字段现在将增长 2 而不是 1。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-07-28T18:19:57.510

如果您只是希望两个表中的 ID 不同，您可以最初将 table2 的 AUTO_INCREMENT 设置为某个大数字。

```
ALTER TABLE `table2` AUTO_INCREMENT=1000000000; 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-28T18:26:31.370

听起来你想要一个 MySQL 等价的序列，可以在 DBMS 中找到，比如 PosgreSQL。有一些已知的方法，其中大部分涉及创建跟踪序列名称的表和保持当前值的整数字段。这种方法允许您查询包含序列的表，并在必要时在一个或多个表上使用它。

[这里有一篇文章](http://www.microshell.com/database/mysql/emulating-nextval-function-to-get-sequence-in-mysql/)对这个问题有一个有趣的方法。[我还在DB PEAR 模块](http://pear.php.net/manual/en/package.database.db.intro-sequences.php)中看到了这种方法，它现在已经过时了。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-28T18:09:16.893

您需要通过客户端或在 mysql 内部通过 sql 函数手动设置另一个表的增量值：

```
ALTER TABLE users AUTO_INCREMENT = 3 
```

因此，在插入 table1 之后，您将返回最后一个自动增量，然后通过该值修改另一个表的自动增量字段。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-07-28T18:14:13.240

你可以用触发器做到这一点：

```
-- see http://dev.mysql.com/doc/refman/5.0/en/information-functions.html#function_last-insert-id
CREATE TABLE sequence (id INT NOT NULL);
INSERT INTO sequence VALUES (0);

CREATE TABLE table1 (
    id INT UNSIGNED NOT NULL AUTO_INCREMENT,
    secondardid INT UNSIGNED NOT NULL DEFAULT 0,
    PRIMARY KEY (id)
);

CREATE TABLE table2 (
    id INT UNSIGNED NOT NULL AUTO_INCREMENT,
    secondardid INT UNSIGNED NOT NULL DEFAULT 0,
    PRIMARY KEY (id)
);

DROP TRIGGER IF EXISTS table1_before_insert;
DROP TRIGGER IF EXISTS table2_before_insert;

DELIMITER //

CREATE
TRIGGER table1_before_insert
    BEFORE INSERT ON 
        table1
    FOR EACH ROW
BEGIN
    UPDATE sequence SET id=LAST_INSERT_ID(id+1);
    NEW.secondardid = LAST_INSERT_ID();
END;
//

CREATE
TRIGGER table2_before_insert
    BEFORE INSERT ON 
        table2
    FOR EACH ROW
BEGIN
    UPDATE sequence SET id=LAST_INSERT_ID(id+1);
    NEW.secondardid = LAST_INSERT_ID();
END;
// 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-07-28T18:18:27.710

我对你的问题感到困惑。如果表 2 是表 3 的子集，为什么要让它共享主键值。您的意思是表 2 和表 3 之间的类别是分开的吗？

如果是这样，我会质疑将它们放入单独表格的设计选择。听起来你有两种不同的情况之一。首先是你有一个“类别”实体，它有两种风格。在这种情况下，您应该有一个单独的类别表，可能带有一个指定类别类型的类型列。

第二个是你的用户可以“喜欢”不同的东西。在这种情况下，“用户喜欢”表应该为每个对象有一个单独的外键。您可以使用复合外键完成一个技巧，之后您将拥有对象的类型和常规的数字 id。因此，like 表将具有“type”和“id”。person 表将有一列填充“PERSON”，另一列填充数字 id。连接会说“在 a.type = b.type 和 a.id = b.id 上”。（或者“类型”上的部分可能是隐含的，在表的选择中）。

# php - 获取 next() 和 prev() 数组元素未按预期工作

> ID：11703475
> 
> 赞同：1
> 
> 时间：2012-07-28T18:06:14.907
> 
> 标签：php, arrays, pointers

我有一个包含查询搜索的所有结果的数组。

我的问题是我需要从这个数组中选择一行，然后才能选择下一行和上一行。

这是我的代码

```
function getUserProf(array $data, $faceid)
{
    //make sure that all data is saved in an array
    $userprof = array();

    //makes the array with the info we need
    foreach ($data as $val)
        if ($val['faceid'] == $faceid){
            $userprof = array ("id" => $val["id"], "total" => $val["total"], "faceid" => $val["faceid"], "lname" => $val["lname"], "fname" => $val["fname"], "hand" => $val["hand"], "shot1" => $val["shot1"], "shot1" => $val["shot1"], "shot2" => $val["shot2"], "shot3" => $val["shot3"], "shot4" => $val["shot4"], "shot5" => $val["shot5"]);
        }
        $next = next($data);//to get the next profile
        $prev = prev($data);//to get the next profile
        $userprofinfo = array('userprof' => $userprof, 'next' => $next);//make a array with the profile and the next prof and the prev prof

    //we return an array with the info
    return $userprofinfo;
} 
```

这以某种方式起作用，但它没有给我正确的下一行和上一行？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-28T18:11:46.963

您的问题是`prev()`移动数组指针 -1 并`next()`再次移动它 +1，导致`$next`与您在调用之前开始的当前行完全相同`prev()`。

此外，在完整运行之后，您会得到`$prev`and ，这会将数组指针留在数组的末尾。（所以你总是会得到最后一个元素）`$next``foreach()`

试试这个：

```
function getUserProf(array $data, $faceid) {
    foreach ($data as $key => $val) {
        if ($val['faceid'] == $faceid) {
            return array( 
                'userprof' => $val,
                'prev'     => isset($data[$key-1]) ? $data[$key-1] : array(),
                'next'     => isset($data[$key+1]) ? $data[$key+1] : array()
            );
        }
    }
} 
```

# javascript - 将变量传递给 AngularJS 控制器，最佳实践？

> ID：11703477
> 
> 赞同：69
> 
> 时间：2012-07-28T18:07:31.203
> 
> 标签：javascript, javascript-framework, angularjs

**我是[AngularJS](http://angularjs.org)**的新手，并且喜欢我目前所看到的，尤其是模型/视图绑定。我想利用它来构建一个简单的“添加到购物篮”功能。

到目前为止，这是我的控制器：

```
function BasketController($scope) {
    $scope.products = [];

    $scope.AddToBasket = function (Id, name, price, image) {

        ...

    };
} 
```

这是我的 HTML：

```
<a ng-click="AddToBasket('237', 'Laptop', '499.95', '237.png')">Add to basket</a> 
```

现在这可行，但我高度怀疑这是在我的模型中创建新产品对象的正确方法。然而，这就是我完全缺乏 AngularJS 经验的地方。

如果这不是这样做的方法，那么最佳做法是什么？

* * *

## 回答 #1

> 赞同：86
> 
> 时间：2012-10-25T19:16:34.160

您可以在外部 div 中使用[ng-init ：](http://docs.angularjs.org/api/ng.directive:ngInit)

```
<div ng-init="param='value';">
    <div ng-controller="BasketController" >
        <label>param: {{value}}</label>
    </div>
</div> 
```

然后，该参数将在您的控制器范围内可用：

```
function BasketController($scope) {
        console.log($scope.param);
} 
```

* * *

## 回答 #2

> 赞同：65
> 
> 时间：2012-07-28T20:29:04.007

您可以创建一个篮子服务。通常在 JS 中，您使用对象而不是大量参数。

这是一个例子：http: [//jsfiddle.net/2MbZY/](http://jsfiddle.net/2MbZY/)

```
var app = angular.module('myApp', []);

app.factory('basket', function() {
    var items = [];
    var myBasketService = {};

    myBasketService.addItem = function(item) {
        items.push(item);
    };
    myBasketService.removeItem = function(item) {
        var index = items.indexOf(item);
        items.splice(index, 1);
    };
    myBasketService.items = function() {
        return items;
    };

    return myBasketService;
});

function MyCtrl($scope, basket) {
    $scope.newItem = {};
    $scope.basket = basket;    
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-09-30T16:56:37.117

我在 AngularJS 方面不是很先进，但我的解决方案是为你的购物车使用一个简单的 JS 类（在咖啡脚本的意义上），它扩展了 Array.

AngularJS 的美妙之处在于您可以使用 ng-click 传递“模型”对象，如下所示。

我不明白使用工厂的好处，因为我发现它不如 CoffeeScript 类漂亮。

为了可重用的目的，我的解决方案可以转换为服务。但除此之外，我看不到使用工厂或服务等工具的任何优势。

```
class Basket extends Array
  constructor: ->

  add: (item) ->
    @push(item)

  remove: (item) ->
    index = @indexOf(item)
    @.splice(index, 1)

  contains: (item) ->
    @indexOf(item) isnt -1

  indexOf: (item) ->
    indexOf = -1
    @.forEach (stored_item, index) ->
      if (item.id is stored_item.id)
        indexOf = index
    return indexOf 
```

然后在控制器中初始化它并为该操作创建一个函数：

```
 $scope.basket = new Basket()
 $scope.addItemToBasket = (item) ->
   $scope.basket.add(item) 
```

最后你设置了一个 ng-click 到一个锚点，在这里你将你的对象（从数据库中检索为 JSON 对象）传递给函数：

```
li ng-repeat="item in items"
  a href="#" ng-click="addItemToBasket(item)" 
```

# google-apps-script - 用于修改文档内容的 API，例如 App Script Document.*？

> ID：11703483
> 
> 赞同：0
> 
> 时间：2012-07-28T18:08:00.463
> 
> 标签：google-apps-script, google-docs-api, google-drive-api

是否有计划将这个非常有用的 API 开放给 App Script 之外的工具？

我们喜欢 App Script，但需要其他系统的访问权限。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-21T15:41:47.830

还没有，但这是我们正在积极研究的事情。与此同时，不幸的是，您遇到了 Apps 脚本，或者您可以上传文件格式，我们可以将其转换为 Google 文档，例如 ODT 或 RTF 文件，然后通过 API 将它们上传到 Drive，并使用`convert`URL 参数为`true`. 请参阅：[https ://developers.google.com/drive/v2/reference/files/insert#convert](https://developers.google.com/drive/v2/reference/files/insert#convert)

# java - 在来自 unix 的 windows slave 上的 Jenkins 中使用 ProcessBuilder 启动 Java 进程时出错

> ID：11703484
> 
> 赞同：1
> 
> 时间：2012-07-28T18:08:00.197
> 
> 标签：java, maven, hudson, jenkins, processbuilder

我有一台运行 Jenkins master 的 unix 机器，我还配置了一个 windows slave。这很好用。但是当我使用 groovy 插件（在选项系统 groovy 脚本中）运行 groovy 脚本并使用 java.lang.ProcessBuilder 运行 maven 命令时，我得到了这个：

```
Caused by: java.io.IOException: java.io.IOException: error=2, 
    No such file or directory
    at java.lang.UNIXProcess.<init>(UNIXProcess.java:148)
    at java.lang.ProcessImpl.start(ProcessImpl.java:65)
    at java.lang.ProcessBuilder.start(ProcessBuilder.java:453)
    ... 122 more
Build step 'Groovy Postbuild' marked build as failure
Finished: FAILURE 
```

异常说的目录不存在，实际上存在。

所以我的问题是当master在unix slave上运行时，如何在windows slave上使用[groovy脚本启动maven命令？](https://mriet.wordpress.com/2011/06/23/groovy-jenkins-system-script/)

我发现它是推测性的，为什么`java.lang.UNIXProcess`当我在 Windows 上运行 groovy 脚本时会出现异常（脚本文件本身与 Windows 从属位于同一台机器上，我也从中检查`System.getEnv()`是否`JAVA_HOME`正确）

# php - jquery mobile，php数据属性在php循环列表中没有改变

> ID：11703485
> 
> 赞同：0
> 
> 时间：2012-07-28T18:08:04.533
> 
> 标签：php, jquery-mobile

嗨，我正在使用此代码传递 data-testid 参数

```
--- php loop here 
echo <<<_END
<pre>
<ul data-role="listview"> <li>
<a id="test" href="#test" data-rel="dialog" data-testid="$row[1]">$row[3] $row[1]</a>
</li> </ul>
</pre>
_END; 
```

我正在使用它在链接内部页面#test 上检索它：

```
 var b = $('a#test').data('testid');
    document.write(b); 
```

问题是，尽管 >$row[3] $row[1]< 循环正确并更改了 data-testid="$row[1]" 在检索时保持不变 - 即使测试号甚至不在数据库中再回来！自从我第一次打电话（这是正确的号码）以来，它一直保持不变。我如何让它刷新？

我试过 $row[1] 周围没有引号和单引号，但结果是一样的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-28T18:21:52.517

您可能希望包含更多代码，例如如何填充行数组以及在哪里调用 jquery 函数。

我刚刚测试了这段代码：

```
<?php

$rows = Array();

for($i = 0; $i < 5; $i++){
        $rows[] = Array("row0," . $i, "row1," . $i, "row2," . $i, "row3," . $i);
}

foreach($rows as $row){
echo <<<_END
<pre>
<ul data-role="listview"> <li>
<a id="test" href="#test" data-rel="dialog" data-testid="$row[1]">$row[3] $row[1]</a>
</li> </ul>
</pre>
_END;

}

?> 
```

它像它应该的那样工作，它返回这个作为输出：

```
<pre>
<ul data-role="listview"> <li>
<a id="test" href="#test" data-rel="dialog" data-testid="row1,0">row3,0 row1,0</a>
</li> </ul>
</pre><pre>
<ul data-role="listview"> <li>
<a id="test" href="#test" data-rel="dialog" data-testid="row1,1">row3,1 row1,1</a>
</li> </ul>
</pre><pre>
<ul data-role="listview"> <li>
<a id="test" href="#test" data-rel="dialog" data-testid="row1,2">row3,2 row1,2</a>
</li> </ul>
</pre><pre>
<ul data-role="listview"> <li>
<a id="test" href="#test" data-rel="dialog" data-testid="row1,3">row3,3 row1,3</a>
</li> </ul>
</pre><pre>
<ul data-role="listview"> <li>
<a id="test" href="#test" data-rel="dialog" data-testid="row1,4">row3,4 row1,4</a>
</li> </ul> 
```

所以问题在于填充数组，或者更有可能在 jquery 中查询它。我注意到您对链接使用相同的 id 'test'，这是一种不好的做法。更改每个链接的链接 ID，然后再次尝试打印数据。

# symfony - symfony 2 注释路由 + 组路由

> ID：11703486
> 
> 赞同：1
> 
> 时间：2012-07-28T18:08:26.243
> 
> 标签：symfony, routes

在 symfony 2中使用**注解路由**或**组路由**在性能、便利性、可维护性或任何其他方面更可取的方面有什么不同吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-28T19:37:11.403

使用[SensioFrameworkExtraBundle](http://symfony.com/doc/current/bundles/SensioFrameworkExtraBundle/index.html)，已经随 Symfony 2 一起提供。将路由名称和路径放在控制器操作的同一位置是正确的方法。如果您想修改路径或操作名称，只需转到该操作，无需编辑`routing.yml`.

然后为您的“分组路由”命名，例如`bundle_controller`模式或可能`bundle_entity`（如果控制器用于单个实体上的 CRUD）：

```
# app/config/routing.yml
acme_hello_my_annotated_controller:
    resource: "@AcmeHelloBundle/Controller/MyAnnotatedController.php"
    type: annotation 
```

最终为注释定义的所有路径添加前缀（添加`prefix: /my/path/prefix`）。

**编辑**：对表演一无所知。我只说方便。

# javascript - 添加一个在点击时调用内容脚本函数的按钮？

> ID：11703492
> 
> 赞同：2
> 
> 时间：2012-07-28T18:08:52.793
> 
> 标签：javascript, jquery, google-chrome, google-chrome-extension, content-script

我在 Google Chrome 扩展的 content.js 中有以下代码：

```
jQuery(document).ready(function () {
    jQuery("body").html('<input type="button" id="soso" value="asd" onclick="goFrame()" />');
});
function goFrame() {
    alert('Value');
} 
```

该按钮已成功创建，但是当我单击它时，该消息未出现，并且在 Google Chrome 控制台中出现以下错误：

> 未捕获的 ReferenceError：未定义 goFrame

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-28T20:40:47.037

首先阅读[Chrome 扩展代码 vs 内容脚本 vs 注入脚本](https://stackoverflow.com/questions/9915311/chrome-extension-code-vs-content-scripts-vs-injected-scripts/9916089#9916089)。

为了解决这个问题，去掉内联事件监听器，动态绑定事件：

```
 ...
    var $input = $('<input type="button" id="soso" value="asd">').click(goFrame);
    jQuery("body").html($input);
});
function goFrame() {
    alert('Value');
} 
```

# php - Windows上的PHP exec打开cmd窗口

> ID：11703502
> 
> 赞同：0
> 
> 时间：2012-07-28T18:10:04.873
> 
> 标签：php, exec

我在win XP上运行PHP，我`exec()`在我的程序中使用了一些东西，但每次`exec()`运行`cmd.exe`时，服务器上都会打开一个窗口几秒钟。我怎样才能让它在后台运行？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-28T18:15:14.630

在命令前加上`start /B`.

```
$process = popen("start /B ". $cmd, "r"); 
```

[https://www.php.net/manual/function.exec.php#86329](https://www.php.net/manual/function.exec.php#86329)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-28T18:13:45.940

```
$WshShell = new COM("WScript.Shell");
$oExec = $WshShell->Run('yourprogpath', 0, false); 
```

仅限窗户。

编辑 - 我认为 Fraxtil 的答案可能会更好，如果它适用于 Windows 和 unix。

# javascript - 如何一起使用 Timepicker 和 Datepicker

> ID：11703507
> 
> 赞同：0
> 
> 时间：2012-07-28T18:11:10.747
> 
> 标签：javascript

> **可能重复：**
> [如何一起使用 JQuery datepicker 和 timepicker](https://stackoverflow.com/questions/11703255/how-to-use-jquery-datepicker-and-timepicker-together)

我想将 timepicker 和 datepicker 集成在一起。像这样的东西：

![在此处输入图像描述](../Images/2764ca2463a790537144b264b2da5038.png)

是否可以将它们一起用于一个输入字段？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-28T18:20:58.657

我建议使用 jQuery 非常好的插件[Datetimepicker](http://trentrichardson.com/examples/timepicker/)。

这比将两个不同的插件集成在一个字段中并根据这些插件获得文本结果要容易得多，而且可能更有效。

# nsis - NSIS：从注册表中读取 DWORD？

> ID：11703510
> 
> 赞同：2
> 
> 时间：2012-07-28T18:11:32.793
> 
> 标签：nsis

我正在尝试更新现有安装程序以读取注册表值（如果存在）并在进行升级安装时更改安装设置以匹配现有安装设置。

但我因无法成功读取注册表值而挂断电话。

我在安装程序中这样写密钥：

```
WriteRegDWORD HKLM "Software\${PRODUCT}" "IniPath" 0x00000026 
```

这部分工作正常，密钥被创建或修改，并且是 DWORD 类型，一切都很好。

但是，如果我尝试读回该值，我似乎每次都得到一个空值。

```
ReadRegDWORD $IniPath HKCU "Software\${PRODUCT}" "IniPath"
MessageBox MB_OK "$$IniPath=$IniPath" 
```

打印结果`$IniPath=`

我也尝试`ClearErrors`在阅读之前和`IfErrors`之后做，它似乎进入了 IfErrors ......但我不明白为什么它会出现错误并且看不到密钥。我正在运行 32 位 Windows，所以我怀疑这是 64 位“注册表的错误部分”错误。

写入 DWORD 的行工作正常。如果我删除注册表项，然后立即使用 regedit 检查注册表，则该键就在那里。但不管密钥是否存在。

那么可能会出现什么问题导致它无法读取值，或者如何调试呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-28T20:00:31.527

您正在写信给 HKLM 并从 HKCU 阅读...

要调试注册表问题，您可以使用[Process Monitor](http://technet.microsoft.com/en-us/sysinternals/bb896645.aspx)。

# c# - 我无法绘制 ListView 背景图像

> ID：11703521
> 
> 赞同：0
> 
> 时间：2012-07-28T18:13:25.277
> 
> 标签：c#, listview, background

所以我正在使用设计视图并设置了我的 ListView 的背景图像，但是当我调试它时它没有绘制。然而，它是在设计视图上绘制的。我可以更改背景颜色（这在设计视图中没有影响，但在调试中它会更改背景颜色）

简单地说：我的背景图像没有绘制。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-28T19:27:24.190

好的，我发现如果您没有在 STA 模式下运行，它不会绘制图像

# java - 使用 spring + jpa + hibernate 但不能持久化实体并且从不抛出异常，测试通过

> ID：11703525
> 
> 赞同：2
> 
> 时间：2012-07-28T18:14:35.037
> 
> 标签：java, spring, hibernate, jpa, spring-mvc

我已经测试了很长时间并搜索了几个小时。由于有一些类似的问题，但尝试后仍然无法正常工作，我正在使用spring MVC和jpa和hibernate来建立一个基础项目，但问题是当我将实体放入数据库时​​我无法将它保存到数据库中码头。奇怪的是，Junit 测试通过了。

这是基本代码。

web.xml

```
<!-- The definition of the Root Spring Container shared by all Servlets and Filters -->
    <context-param>
        <param-name>contextConfigLocation</param-name>
        <param-value>/WEB-INF/spring/root-context.xml</param-value>
    </context-param>

    <!-- Creates the Spring Container shared by all Servlets and Filters -->
    <listener>
        <listener-class>org.springframework.web.context.ContextLoaderListener</listener-class>
    </listener>

    <!-- Processes application requests -->
    <servlet>
        <servlet-name>controller</servlet-name>
        <servlet-class>org.springframework.web.servlet.DispatcherServlet</servlet-class>
        <init-param>
            <param-name>contextConfigLocation</param-name>
            <param-value>/WEB-INF/spring/controller.xml</param-value>
        </init-param>
        <load-on-startup>1</load-on-startup>
    </servlet>

    <servlet-mapping>
        <servlet-name>controller</servlet-name>
        <url-pattern>/</url-pattern>
    </servlet-mapping> 
```

db-context.xml

```
<?xml version="1.0" encoding="UTF-8"?>
<beans xmlns="http://www.springframework.org/schema/beans"
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:tx="http://www.springframework.org/schema/tx"
    xsi:schemaLocation="http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans.xsd
        http://www.springframework.org/schema/tx http://www.springframework.org/schema/tx/spring-tx-3.1.xsd">

    <!-- DBCP DataSource -->
    <bean class="org.apache.commons.dbcp.BasicDataSource" id="dataSource"
        destroy-method="close">
        <property name="driverClassName" value="com.mysql.jdbc.Driver" />
        <property name="url" value="jdbc:mysql://localhost/spring" />
        <property name="username" value="root" />
        <property name="password" value="root" />
    </bean>

    <!-- JPA EntityManagerFactory -->
    <bean id="entityManagerFactory"
        class="org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean">
        <property name="jpaVendorAdapter">
            <bean id="jpaVendorAdapter"
                class="org.springframework.orm.jpa.vendor.HibernateJpaVendorAdapter">
                <property name="showSql" value="true" />
                <property name="generateDdl" value="true" />
                <property name="databasePlatform" value="org.hibernate.dialect.MySQL5Dialect" />
            </bean>
        </property>
        <property name="dataSource" ref="dataSource" />
    </bean>

    <!-- Persistence Context Annotated -->
    <bean
        class="org.springframework.orm.jpa.support.PersistenceAnnotationBeanPostProcessor"
        id="persistenceAnnotationBeanPostProcessor" />

    <!-- Transaction -->
    <bean id="transactionManager" class="org.springframework.orm.jpa.JpaTransactionManager">
        <property name="entityManagerFactory" ref="entityManagerFactory" />
        <property name="dataSource" ref="dataSource" />
    </bean>

    <tx:annotation-driven transaction-manager="transactionManager" />

</beans> 
```

persistence.xml（在 META-INF 文件夹中）

```
<?xml version="1.0" encoding="UTF-8"?>
<persistence xmlns="http://java.sun.com/xml/ns/persistence"
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xsi:schemaLocation="http://java.sun.com/xml/ns/persistence
      http://java.sun.com/xml/ns/persistence/persistence_2_0.xsd"
    version="2.0">

    <persistence-unit name="persist" transaction-type="RESOURCE_LOCAL">
        <properties>
            <property name="hibernate.hbm2ddl.auto" value="create-drop" />
            <property name="hibernate.show_sql" value="true" />
            <property name="hibernate.transaction.flush_before_completion"
                value="true" />
            <property name="hibernate.cache.provider_class" value="org.hibernate.cache.HashtableCacheProvider" />
        </properties>
    </persistence-unit>

</persistence> 
```

Person.java（实体 bean）

```
@Entity
public class Person {

    private int id;
    private String name;

    @Id
    @GeneratedValue
    public int getId() {
        return id;
    }

    // ..

} 
```

PersonDaoImpl.java

```
@Repository
@Transactional(propagation = Propagation.SUPPORTS, readOnly = true)
public class PersonDaoImpl implements PersonDao {

    private EntityManager entityManager;

    @PersistenceContext
    public void setEntityManager(EntityManager entityManager) {
        this.entityManager = entityManager;
    }

    @Transactional(propagation = Propagation.REQUIRED, readOnly = false)
    public Person persist(Person person) {
        entityManager.persist(person);
        return person;
    }

    // ...

} 
```

PersonServiceImpl.java

```
@Service
public class PersonServiceImpl implements PersonService {

    private PersonDao personDao;

    @Inject
    public void setPersonDao(PersonDao personDao) {
        this.personDao = personDao;
    }

    public Person create(Person person) {
        return personDao.persist(person);
    }

    // @Transactional(propagation = Propagation.REQUIRED, readOnly = false)
    public Person save(Person person) {
        return personDao.merge(person);
    }

    // ...

} 
```

人控制器.java

```
@Controller
@Scope("prototype")
@RequestMapping("/person")
public class PersonController {

    private PersonService personService;

    @Inject
    public void setPersonService(PersonService personService) {
        this.personService = personService;
    }

    @RequestMapping(value = "/add", method = RequestMethod.POST)
    public ModelAndView add(@RequestParam("username") String name) {
        Person person = new Person();
        person.setName(name);
        System.out.println(name);  // i can get the value
        personService.create(person); // nothing happend... throws no Excp
        ModelAndView mav = new ModelAndView();
        mav.setViewName("result");
        mav.addObject("val", person.getName());
        return mav;
    }

} 
```

PersonControllerTest.java

```
@RunWith(SpringJUnit4ClassRunner.class)
@ContextConfiguration("/test-context.xml")
public class PersonControllerTest {

    private PersonController controller;

    @Inject
    public void setController(PersonController controller) {
        this.controller = controller;
    }

        // the test passed no matter @Transactional or not, if not, the db get the row
    @Test(/*expected = NullPointerException.class*/)
    @Transactional
    public void testAdd() {
//      PersonController controller = new PersonController();
        assertEquals("test", controller.add("test").getModelMap().get("val"));
    }

} 
```

省略了一些 xml，如 context 和 mvc config xml 和 import 声明，servie 和 dao 接口，有人可以帮我吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-21T08:52:38.660

Spring Junit 不应该（并且默认情况下不会）持久化到数据库中。

如果您希望数据持久保存在数据库中，请将此行添加到您的测试类中。

```
@TransactionConfiguration(transactionManager = "transactionManager", defaultRollback = false) 
```

# facebook - 通过 Facebook API 在墙上发布时更改 Facebook 图标

> ID：11703526
> 
> 赞同：0
> 
> 时间：2012-07-28T18:14:59.637
> 
> 标签：facebook

当我通过 Facebook API 在我的墙上发布帖子并且我没有设置图像时，会出现默认的 Facebook 图标。有人知道我如何更改此图标吗？

示例：http: [//i.stack.imgur.com/8uLDk.png](http://i.stack.imgur.com/8uLDk.png)

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-29T04:28:04.137

设置一个看起来像图标的图像；）

# php - 将参数传递给包含在 IMG 标记中的 PHP 文件

> ID：11703530
> 
> 赞同：2
> 
> 时间：2012-07-28T18:15:49.490
> 
> 标签：php, mysql

我有两个文件 [ Main.html ] 和 [image.php]。然而，[image.php] 正在处理二进制数据，因为它显示来自数据库的图像。我的问题是我可以吗？如果可以的话，我如何将参数从 main 传递到 [image.php]？

我在 main 中调用 image.php，如下所示：

> img src="image.php" alt="从数据库中检索的图像"

```
<?php
$mysqli=mysqli_connect('localhost','root','','draftdb');
if (!$mysqli)
die("Can't connect to MySQL: ".mysqli_connect_error());

    $stmt = $mysqli->prepare("SELECT display.PICTURE_ID 
    FROM cards  
    INNER JOIN display ON cards.DISPLAY_ID = display.DISPLAY_ID 
    WHERE display.DISPLAY_ID=? AND cards.CARD_TYPE =?" );

     if( rand(1, 8) == 8) 
     {
     $cardtype='Mythic';
     $displayid=rand(1,15) ;

     }

     else
     {
     $cardtype='Rare';
    $displayid=rand(16,19) ;
     }

    $stmt->bind_param("si", $displayid, $cardtype);
    $stmt->execute();
    $stmt->bind_result($image);
    $stmt->fetch();
    header("Content-Type: image/jpeg");
    echo $image; 
    ?> 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-28T18:18:23.733

在这里很难做出一个非常详细的答案，因为最简单的解决方案很好......很简单。

您肯定已经看到带有`?`和`var=value&var2=anothevalue`在其中的网站地址

你可以自己做同样的事情。

`<img src="image.php?param=wat&moreparam=lolz" />`

和

`$param = isset($_GET['param']) ? $_GET['param'] : null;`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-28T18:19:46.023

照常

```
img src="image.php?data=hello" 
```

然后在 image.php

```
$_GET['data'] 
```

# postgresql - 尝试使用 ant 创建数据库

> ID：11703531
> 
> 赞同：0
> 
> 时间：2012-07-28T18:16:07.490
> 
> 标签：postgresql, ant

我的 build.xml

```
<?xml version='1.0'?> 
<project xmlns:ivy="antlib:org.apache.ivy.ant" name='myTest' basedir='.' default='usage'> 
<property file='build.properties' /> 
<property name='src.dir' value='src' /> 
<property name='web.dir' value='war' /> 
<property name='build.dir' value='${web.dir}/WEB-INF/classes' /> 
<property name='name' value='myTest' />
<property name="sql.driver" value="org.postgresql.Driver"/>
<property name="sql.url" value="jdbc:postgresql://localhost:5432/tbook"/>
<property name="sql.user" value="postgres"/>
<property name="sql.pass" value="admin"/>
<path id='master-classpath'> 
    <fileset dir='${web.dir}/WEB-INF/lib'> 
        <include name='*.jar' /> 
    </fileset> 
    <!-- We need the servlet API classes: --> 
    <!-- * for Tomcat 5/6 use servlet-api.jar --> 
    <!-- * for other app servers - check the docs --> 
    <fileset dir='${appserver.lib}'> 
        <include name='servlet*.jar' /> 
    </fileset> 
    <pathelement path='${build.dir}' /> 
</path> 
<target name='usage'> 
    <echo message='' /> 
    <echo message='${name} build file' /> 
    <echo message='-----------------------------------' /> 
    <echo message='' /> 
    <echo message='Available targets are:' /> 
    <echo message='' /> 
    <echo message='build --> Build the application' /> 
    <echo message='deploy --> Deploy application as directory' /> 
    <echo message='deploywar --> Deploy application as a WAR file' /> 
    <echo message='resolve --> retrieve dependencies with ivy' />
    <echo message='' /> 
</target>
<target name="createDB_PostgreSQl">
      <sql driver="${sql.driver}" 
           url="${sql.url}" 
           userid="${sql.user}" 
           password="${sql.pass}"
           src="db.sql">
           <classpath refid="master-classpath"/>
    </sql>
   </target>

   <target name="dropDB_PostgreSQl">
      <input message="Do you really want to delete this table (y/n)?" validargs="y,n" addproperty="do.delete" /> 
      <condition property="do.abort"> 
            <equals arg1="n" arg2="${do.delete}"/> 
      </condition> 
      <fail if="do.abort">Build aborted by user.</fail> 
      <sql driver="${sql.driver}" url="${sql.url}" userid="${sql.user}" password="${sql.pass}" >
           <classpath>
            <pathelement location="postgresql-9.0-802.jdbc4.jar"/>
           </classpath>  
           drop database sample_project;
      </sql>
   </target>
<target name="createTables_PostgreSQL">
      <sql driver="${sql.driver}" url="${sql.url}" userid="${sql.user}" password="${sql.pass}" >
           <classpath refid="master-classpath"/>
           <transaction src="user.sql"/>
      </sql>
   </target>
<target name='build' description='Compile main source tree java files'> 
    <mkdir dir='${build.dir}' /> 
    <javac destdir='${build.dir}' source='1.5' target='1.5' debug='true' 
        deprecation='false' optimize='false' failonerror='true'> 
        <src path='${src.dir}' /> 
        <classpath refid='master-classpath' /> 
    </javac> 
</target>

<target name="clean">
    <delete includeemptydirs="false">
        <fileset dir="build/" includes="**/**"/>
    </delete>
</target>

<target name='deploy' depends='build' description='Deploy application'> 
    <copy todir='${deploy.path}/${name}' preservelastmodified='true'> 
        <fileset dir='${web.dir}'> 
            <include name='**/*.*' /> 
        </fileset> 
    </copy> 
</target>

<target name="resolve" description="retrieve dependencies with ivy">
        <ivy:retrieve />
</target>

<target name='deploywar' depends='build' 
    description='Deploy application as a WAR file'> 
    <war destfile='${name}.war' webxml='${web.dir}/WEB-INF/web.xml'> 
        <fileset dir='${web.dir}'> 
            <include name='**/*.*' /> 
        </fileset> 
    </war> 
    <copy todir='${deploy.path}' preservelastmodified='true'> 
        <fileset dir='.'> 
            <include name='*.war' /> 
        </fileset> 
    </copy> 
</target> 
</project> 
```

例外是：

> org.postgresql.util.PSQLException:ERROR: CREATE DATABASE 不能在事务块内执行

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-28T22:06:06.823

看看过去的这个线程。[http://archives.postgresql.org/pgsql-jdbc/2005-11/msg00132.php](http://archives.postgresql.org/pgsql-jdbc/2005-11/msg00132.php)

基本上对于创建数据库任务添加这个 autocommit="true"

# node.js - 尝试创建聊天的 Node.JS 错误

> ID：11703532
> 
> 赞同：0
> 
> 时间：2012-07-28T18:16:10.570
> 
> 标签：node.js, heroku, socket.io

我目前正在编写一个将在 Heroku 上运行的聊天应用程序。我正在使用 Node.JS 和 Socket.IO 来完成这项任务。当我在本地运行它时它工作得很好但是当我将它部署到heroku时我得到这个错误：

```
app[web.1]: /app/node_modules/socket.io/lib/manager.js:724
app[web.1]:   rand.writeInt32BE(this.sequenceNumber, 11);
app[web.1]:        ^
app[web.1]: TypeError: Object 
```

这是代码的 Socket.IO 部分（其余只是经典的 Express 代码）：

```
var socket = require('socket.io');
var io = socket.listen(app);

io.configure(function () { 
    io.set("transports", ["xhr-polling"]); 
    io.set("polling duration", 10); 
});

var usernames = {}

io.sockets.on('connection', function (socket) {
    socket.on('adduser', function(username) {
      socket.username = username;
      usernames[username] = username;
      socket.join('room');
      socket.emit('action', username, 'connected');
      socket.broadcast.to('room').emit('action', username, 'connected');
    });
    socket.on('message', function(message) {
      socket.emit('message', socket.username, message);
      socket.broadcast.to('room').emit('message', socket.username, message);
    });
}); 
```

有没有人知道如何解决这个错误？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-28T20:04:37.957

确保您使用的是**package.json**中指定的正确版本的**节点**和**npm**

 **```
"engines": {
    "node": "0.8.x"
    ,"npm": "1.1.x"
} 
```**

# php - PHP - 如何通过 curl 登录并下载文件？

> ID：11703533
> 
> 赞同：0
> 
> 时间：2012-07-28T18:17:33.190
> 
> 标签：php, curl, http-authentication

我使用 php，使用 curl 我使用 httpauth 通过 http 访问服务器上的目录。我将用户名和密码传递给它，它似乎可以工作，但是一旦我登录，我如何获取当前目录，然后继续下载该目录中的文件？我使用此 curl 代码进行身份验证：

```
 $ch = curl_init();
curl_setopt($ch, CURLOPT_URL, $url);
curl_setopt($ch, CURLOPT_RETURNTRANSFER, true);
curl_setopt($ch, CURLOPT_USERPWD, "$username:$password");
curl_setopt($ch, CURLOPT_HTTPAUTH, CURLAUTH_BASIC);
$output = curl_exec($ch);
$info = curl_getinfo($ch);
curl_close($ch); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-28T18:24:55.457

只需为将来的任何请求重新发送凭据即可。HTTP 身份验证不跟踪登录；客户端只需为每个请求重新发送用户名/密码对。

# postgresql - 如何优化点到圆匹配？

> ID：11703535
> 
> 赞同：-2
> 
> 时间：2012-07-28T18:17:42.430
> 
> 标签：postgresql, computational-geometry

我有一个包含一堆地球坐标（纬度/经度）和相关半径的表。我还有一个表格，其中包含一堆我想与这些圆圈匹配的点，反之亦然。两者都是动态的；即可以随时添加或删除新的圆或新的点。添加任何一个时，我希望能够将新圆或点与所有适用的点或圆分别匹配。

我目前有一个 PostgreSQL 模块，其中包含一个 C 函数，可以在给定坐标的情况下查找地球上两点之间的距离，而且它似乎可以工作。问题是可扩展性。为了让它发挥作用，该函数当前必须扫描整个表并对每一行进行一些三角计算。两个表都按纬度和经度索引，但函数不能使用它们。在我们知道这两件事是否匹配之前，它必须做它的事情。新信息的发布频率可能高达每秒几次，并且每次检查每个点都开始变得相当笨拙。

我看过 PostgreSQL 的几何类型，但它们似乎更适合直角坐标而不是球体上的点。

如何安排/优化/过滤/预先计算这些数据以使匹配更快并减轻负载？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-29T10:19:42.767

您还没有提到[PostGIS](http://postgis.refractions.net/) - 为什么您排除了这种可能性？

[http://postgis.refractions.net/documentation/manual-2.0/PostGIS_Special_Functions_Index.html#PostGIS_GeographyFunctions](http://postgis.refractions.net/documentation/manual-2.0/PostGIS_Special_Functions_Index.html#PostGIS_GeographyFunctions)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-28T18:34:59.077

在这里大声思考......你有一个点（纬度/经度）和一个半径，你想找到所有可能重叠的现有点半径组合？（或类似的东西...）

似乎您可以存储更多信息以及可以帮助您排除在查询期间远未接近的其他数字的这些数字......这可能会避免大量的触发操作。

例如，使用点 x,y 和半径 r，您可以轻松地计算出一个可行的纬度/经度（方形区域）范围，如果对另一个点进行不必要的计算，可以使用该范围来帮助排除它。

然后，您可以将最大和最小 lat 和 long 与该点一起存储在数据库中。然后，在对每一行运行三角函数之前，您可以过滤结果以消除明显超出范围的点。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-28T18:28:34.887

如果我理解正确，那么我的第一个想法是缓存一些数据并消除大部分检查。

就像想象你的圆圈实际上是一个盒子，它有 4 个边

您可以存储这些线的基本坐标，就像您在真实地图上拥有线（网格）一样。所以你存储每个圆的东、西、北、南边缘

如果你得到你的坐标和它在那个盒子外面，你可以确定它也不会在圆圈内，因为盒子比圆圈大。

如果不是，那么您必须像现在一样检查。但我想你已经可以消除大部分步骤了。

# objective-c - 关于创建“相机胶卷”式功能的问题

> ID：11703540
> 
> 赞同：1
> 
> 时间：2012-07-28T18:18:40.663
> 
> 标签：objective-c, ios, ios5

我对Objective-C相当陌生，所以请提前原谅我的无知=]这是我到目前为止的内容：

*   该应用程序是一个标签栏样式的应用程序
*   与这篇文章相关的视图包含几个按钮，单击这些按钮会下拉不同类型的图像
*   单击按钮后，将使用从 Web 服务返回的数据填充数组
*   显示一个新视图，其中包含一个 UIImageView

现在这是我希望得到澄清的（或简单的想法）

*   正如我所说，应用程序本身是一个标签栏样式的应用程序，但我在添加的第三个视图时遇到了一些问题。目前，当我单击一个按钮时，视图会正确加载，但它是在选项卡栏视图区域内加载的。这不是最佳的，我希望这个新视图显示在选项卡栏的上方，从而占据手机上的整个区域。我从包含按钮（这是一个选项卡视图）的视图控制器内部打开这个视图，如下所示：

    `UIViewController * browsePictures = [[UIViewController alloc]initWithNibName:@"PictureGalleryViewController" bundle:[NSBundle mainBundle]]; [self.view addSubview:browsePictures.view];`

*   在这第三个视图中，我有一个 UIImageView（我不确定这是应用程序的正确视图），需要通过从 Web 服务返回的数据来填充。正如我发现的那样，通过 JSON 返回二进制数据的效率非常低，所以我要返回 URL，这意味着我需要为返回的每个图像调用网络。我对此很好，我只是好奇是否有更好的方法来做到这一点。

*   我试图通过第三个视图实现的功能类似于 iPhone 的相机胶卷功能。在这种情况下，当用户向左或向右手势时，它会将数组的当前索引向上或向下移动一个并加载数组中的下一张照片。我不确定如何实现此功能。

我想这就是现在的全部。谢谢！

# css - 使用数据：将 SVG 编码为 CSS 过滤器

> ID：11703541
> 
> 赞同：11
> 
> 时间：2012-07-28T18:18:55.577
> 
> 标签：css, firefox, data-uri

也许有人可以在我的测试中指出一个错误，但似乎如果我想在 CSS 编码中使用 SVG 过滤器`data: uri`以避免使用额外的文件，如果数据没有编码为 base64，它会失败。

我已经用 Firefox Aurora 进行了测试，其他浏览器似乎在这两种情况下都无法识别过滤器。

测试文件：

```
<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<style type="text/css">

#filter1 {
filter:url(data:image/svg+xml,<svg xmlns%3D"http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg"><filter id%3D"desaturate"><feColorMatrix type%3D"saturate" values%3D"0"%2F><%2Ffilter><%2Fsvg>#desaturate);
}

#filter2 {
filter:url(data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciPjxmaWx0ZXIgaWQ9ImRlc2F0dXJhdGUiPjxmZUNvbG9yTWF0cml4IHR5cGU9InNhdHVyYXRlIiB2YWx1ZXM9IjAiLz48L2ZpbHRlcj48L3N2Zz4%3D#desaturate);
}

</style>
</head>
<body>
<p style="color:red" id=filter1>Filter applied "as is"</p>
<p style="color:red" id=filter2>This one is encoded as base64</p>
</body>
</html> 
```

现场演示[http://martinezdelizarrondo.com/bugs/svgfilter.html](http://martinezdelizarrondo.com/bugs/svgfilter.html)

url() 的内容在两种情况下都是相同的：

```
<svg xmlns="http://www.w3.org/2000/svg"><filter id="desaturate"><feColorMatrix type="saturate" values="0"/></filter></svg> 
```

[使用http://software.hixie.ch/utilities/cgi/data/data](http://software.hixie.ch/utilities/cgi/data/data)编码

如您所见，第一个保持红色，但在第二种情况下，应用了 svg 过滤器并且文本变为灰色。

在第一种情况下我忘记了什么吗？

在[这个错误](https://bugzilla.mozilla.org/show_bug.cgi?id=686013)中，我没有找到任何关于编码的信息，所以我想它应该是可能的（当然使用更简单的文本编码要好得多，而不是用 base64“加密”它）

谢谢

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-07-28T20:36:57.643

经过更多的尝试和错误，我发现在数据上使用转义是有效的，现在我们只需要等待其他浏览器实现对它的支持。

```
<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<style type="text/css">

#filterBase64 {
    filter:url(data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciPjxmaWx0ZXIgaWQ9ImRlc2F0dXJhdGUiPjxmZUNvbG9yTWF0cml4IHR5cGU9InNhdHVyYXRlIiB2YWx1ZXM9IjAiLz48L2ZpbHRlcj48L3N2Zz4%3D#desaturate);
}

#filterEscape {
    filter:url(data:image/svg+xml,%3Csvg%20xmlns%3D%22http%3A//www.w3.org/2000/svg%22%3E%3Cfilter%20id%3D%22desaturate%22%3E%3CfeColorMatrix%20type%3D%22saturate%22%20values%3D%220%22/%3E%3C/filter%3E%3C/svg%3E#desaturate);
}

</style>
</head>
<body>
<p style="color:red" id=filterBase64>This one is encoded as base64</p>
<p style="color:red" id=filterEscape>Filter encoded with "escape()"</p>
<p style="color:red" id=filterScript>This one is applied with javascript</p>
<script>
document.getElementById("filterScript").style.filter="url(data:image/svg+xml," + escape('<svg xmlns="http://www.w3.org/2000/svg"><filter id="desaturate"><feColorMatrix type="saturate" values="0"/></filter></svg>') + "#desaturate)";
</script>
</body>
</html> 
```

# magento - Magento 社区扩展：我们应该使用基本主题目录吗？

> ID：11703544
> 
> 赞同：3
> 
> 时间：2012-07-28T18:19:19.180
> 
> 标签：magento

在开发一个将在任何特定项目范围之外重用的模块时，即使用社区代码池，我应该使用基本主题来存储我的模板、布局和皮肤文件吗？

我几乎 100% 肯定我应该这样做，但是我看到这么多的社区模块使用默认的皮肤和主题目录，以至于它已经种下了一个小小的怀疑种子。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-28T19:49:09.540

是的，你绝对应该使用`base/default`你的社区模块主题——这样做你正在**利用 Magento 提供的后备层次结构**，允许你的主题是可移植的并且易于被希望这样做的客户扩展。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-07-28T22:47:20.277

我不期待这个答案的支持，但想澄清蒂姆和德鲁的答案：

不幸的是，目前 Magento 只为我们提供了 3 个级别的后备：

*   基本/默认
*   current_package/默认值
*   current_package/current_theme

因为'current_package' 在标准Magento 安装中是'default'，你经常会看到扩展开发者将他们的文件放在'default/default' 中。这是一个糟糕的决策，因为这意味着在指定非默认包时将不再找到文件。

显然，将文件放在“基本/默认”中也不是最佳位置，因为从某种意义上说，您正在消除核心文件和第 3 方文件之间的区别。正如其他人所提到的，现在它是可靠地添加文件同时仍然允许回退的唯一方法。

幸运的是，这在 Magento 2 中不会成为问题，因为这些文件将成为模块的一部分，从而允许几乎无限的回退。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-07-28T18:57:40.563

是的。最佳实践是创建

```
app/design/frontend/base/default/template/your_extension_dir/ 
```

和

```
app/design/frontend/base/default/layout/your_extension_dir/ 
```

并将您的文件放在那里。

# android - Android - 如何将操作栏选项卡设置为首次选择？

> ID：11703547
> 
> 赞同：1
> 
> 时间：2012-07-28T18:19:36.123
> 
> 标签：android, android-actionbar, android-tabs

这是我的代码：

```
 Tab tab = actionBar
            .newTab()
            .setText(R.string.friends)
            .setTabListener(
                    new TabListener<FriendsFragment>(this, "friends_list",
                            FriendsFragment.class));
    actionBar.addTab(tab);

    tab = actionBar
            .newTab()
            .setText(R.string.home)
            .setTabListener(
                    new TabListener<UserHomeFragment>(this, "user_home",
                            UserHomeFragment.class));
    actionBar.addTab(tab);

    tab = actionBar
            .newTab()
            .setText(R.string.highscores)
            .setTabListener(
                    new TabListener<HighscoresFragment>(this, "highscores",
                            HighscoresFragment.class));
    actionBar.addTab(tab); 
```

如何将“UserHome”设置为显示/选择的第一个选项卡？我想像现在这样在中间。因此，当我的“TabActivity”启动时，它会是这样的：Friends - **Home** - Highscores

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-28T19:37:23.113

有几个选项，当前实现最简单的方法是在使用[ActionBar#addTab(Tab tab, boolean setSelected)](http://developer.android.com/reference/android/app/ActionBar.html#addTab%28android.app.ActionBar.Tab,%20boolean%29)将选项卡添加到操作栏时将其设置为选定选项卡。

或者，您可以使用[ActionBar#setSelectedNavigationItem(int position)](http://developer.android.com/reference/android/app/ActionBar.html#setSelectedNavigationItem%28int%29)设置选择。

# c++ - 未使用模板特化

> ID：11703553
> 
> 赞同：1
> 
> 时间：2012-07-28T18:20:24.827
> 
> 标签：c++, templates

我定义了以下功能：

```
template <typename T> buffer_t &operator<<(buffer_t &buffer, T data);
template <> buffer_t &operator<<(buffer_t &buffer, const char *data);
template <> buffer_t &operator<<(buffer_t &buffer, const Glib::ustring &data); 
```

当我打电话时：

```
buffer << Glib::ustring("hello"); 
```

编译器使用通用模板定义而不是 Glib::ustring 的特化。

我在这里做错了什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-28T18:22:41.997

您有一个*函数*模板，并且您想要执行*模板参数推导*。为此，您的函数调用与模板化函数参数相匹配`T data`。我相信 14.8.2.4 适用于您的专业化的部分排序，其中`P`模板参数`A`是实际参数的类型；重点是我的）：

> 在完成偏序之前，对用于偏序的类型执行某些转换：
> 
> — 如果`P`是引用类型，`P`则替换为引用的类型。
> 
> —**如果`A`是引用类型，`A`则替换为引用的类型。**

因此，由于您的参数的类型是`A = Glib::ustring`，那么这对于专业化的匹配`const Glib::ustring &`不如主模板那么好，即使您有实际的 const 引用，在部分排序期间引用也会被剥离，并且您再次以更糟糕的比赛结束。

解决这个问题的常用方法是让你的主模板成为一个常量引用；this 也可以绑定到临时对象，因此应该“与”值参数“一样好”：

```
template <typename T> buffer_t & operator<<(buffer_t & buffer, T const & data);
//                                                             ^^^^^^^^^ 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-07-28T19:13:46.287

```
template <typename T> buffer_t &operator<<(buffer_t &buffer, T data); 
```

是主要模板。专业化不是主要模板。编译器在匹配函数时仅找到主模板，然后，如果选择的模板函数具有特化，则查看这些，如果编译器找到特化，则与参数完全匹配 - 使用它，否则使用主模板。

```
template <> buffer_t &operator<<(buffer_t &buffer, const Glib::ustring &data) 
```

此专业化与操作不完全匹配`buffer_t << Glib::ustring("s")`，但完全匹配

```
template <> buffer_t &operator<<(buffer_t &buffer, Glib::ustring data) 
```

我建议你不要使用函数模板专业化，使用重载。

```
template <typename T> buffer_t &operator<<(buffer_t &buffer, T data);
buffer_t &operator<<(buffer_t &buffer, const char *data);
buffer_t &operator<<(buffer_t &buffer, const Glib::ustring &data); 
```

# android - Android：创建活动时系统调用getView两次

> ID：11703555
> 
> 赞同：2
> 
> 时间：2012-07-28T18:20:55.263
> 
> 标签：android, android-listview

我有一个自定义列表，其中包含大约 20 个项目和每个项目三行。我使用 Log 来跟踪如何调用 getView 方法

```
public View getView(int position, View convertView, ViewGroup parent) {

    Log.e("getView", "at position " + position);
    View view = convertView;

    if (view == null) {
        LayoutInflater inflater = ((Activity) context).getLayoutInflater();
        view = inflater.inflate(resourceId, parent, false);
    }
            // my code here

} 
```

然后，当列表项加载时，我收到了这个日志

"getView", "在位置 0"; "getView", "在位置 1"; "getView", "在位置 2"; "getView", "在位置 3"; "getView", "在位置 0"; "getView", "在位置 1"; "getView", "在位置 2"; "getView", "在位置 3"; "getView", "在位置 4"; "getView", "在位置 5"; .....................

谁能告诉我为什么 getView 方法从 0 到 3 调用了两次？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-28T19:57:02.417

> 谁能告诉我为什么 getView 方法从 0 到 3 调用了两次？

该`getView`方法被调用两次`ListView`，因为作为其方法的一部分，它`onMeasure`调用`getView` 适配器的方法来获取行`View`以查看它们有多大。我猜你有三个可见的行，所以`ListView`将为前三个可见的孩子调用该`getView`方法三次。

# junit - 自定义报告给 Jenkins

> ID：11703563
> 
> 赞同：4
> 
> 时间：2012-07-28T18:21:47.010
> 
> 标签：junit, jenkins

我正在尝试将我们自己的私有测试工具连接到 Jenkins。我可以通过命令行运行测试并在我的本地机器上创建报告。我需要将该报告转换为 xml JUnit 格式，特别是针对 Jenkins。完成后，如何将刚刚创建的 xml 文件关联到最近的作业。这样，正确的报告就会与正确的工作一起出现吗？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-07-29T21:29:43.670

Jenkins 的工作方式很简单：你创建一个作业，然后 Jenkins 运行它。作业的每次运行都称为构建。如果您将作业配置为在构建结束时查找测试报告文件，则测试报告将加载并显示在 Jenkins UI 中。无法在构建之外或构建之后向构建提交测试报告。

通常这不是问题。您将测试程序/脚本作为构建的一部分运行，它会生成 JUnit 格式的 xml 文件。完成所有构建步骤后，Jenkins 会查找 xml 文件并加载它们。不过，你必须告诉 Jenkins 去做。您打开作业配置并添加一个名为“发布 JUnit 测试结果报告”的新构建后操作。然后你给 Jenkins 一个用于搜索文件的模式。您可以使用`**/*.xml`这意味着 Jenkins 将`*.xml`在每个目录和子目录中查找所有文件。或者，`**/testreports/*.xml`如果您知道测试报告将在哪里，您也可以使用。

# python - Python 继承和 __init__

> ID：11703564
> 
> 赞同：3
> 
> 时间：2012-07-28T18:21:51.433
> 
> 标签：python, oop

我正在学习 Python，我发现了一些关于 Python 如何构造一个让我感到困惑的子类的东西。

我有一个从列表类继承的类，如下所示。

```
class foo(list):
    def __init__(self, a_bar):
        list.__init__([])
        self.bar = a_bar 
```

我知道那`list.__init__([])`需要在那里，但我对此感到困惑。在我看来，这条线只会创建一个新的列表对象，然后将其分配给任何内容，所以我怀疑它只会被垃圾收集。Python 怎么知道这个列表是我的对象的一部分？我怀疑幕后发生了一些事情，我想知道它是什么。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-28T18:26:54.210

多重继承安全的做法是：

```
class foo(list):
    def __init__(self, a_bar):
        super(foo, self).__init__()
        ... 
```

这可能更清楚地表明您正在调用基类ctor。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-28T18:24:40.977

您通常在子类化和覆盖`__init__()`函数时这样做：

```
list.__init__(self) 
```

如果您使用的是 Python 3，则可以使用`super()`：

```
super().__init__() 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-28T18:24:40.267

实际对象不是使用创建的，`__init__`而是使用创建的`__new__`。 `__init__`不是用于创建对象本身，而是用于初始化它——即添加属性等。在`__init__`调用时，`__new__`已经调用了，因此在您的示例中，列表甚至在您的代码运行之前就已经创建了。 `__init__`不应该返回任何东西，因为它应该“就地”初始化对象（通过改变它），所以它会产生副作用。（请参阅[上一个问题](https://stackoverflow.com/questions/674304/pythons-use-of-new-and-init)和[文档](http://docs.python.org/reference/datamodel.html#basic-customization)。）

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-28T20:14:16.450

你说对了一部分：

```
list.__init__([]) 
```

“创建一个新的列表对象。” 但是这段代码是错误的。正确的代码_should_be：

```
list.__init__(self) 
```

你需要它存在的原因是因为你继承自一个`list`有它自己的方法的`__init__()`方法，它（大概）对初始化本身很重要。当您定义自己的`__init__()`方法时，您实际上是在覆盖继承的同名方法。为了确保父类的`__init__()`代码也被执行，您需要调用该父类的`__init__()`.

有几种方法可以做到这一点：

```
#explicitly calling the __init__() of a specific class
#"list"--in this case
list.__init__(self, *args, **kwargs)     

#a little more flexible. If you change the parent class, this doesn't need to change
super(foo, self).__init__(*args, **kwargs) 
```

有关`super()`查看[此问题](https://stackoverflow.com/q/576169/1142167)的更多信息，有关超级陷阱的指导，请参阅[本文](https://fuhm.net/super-harmful/)。

# java - Hibernate：将次要对象封装在映射对象中

> ID：11703567
> 
> 赞同：0
> 
> 时间：2012-07-28T18:22:21.567
> 
> 标签：java, hibernate

我正在尝试使用 Hibernate 来保存/加载看起来像这样的对象（这些是轮廓；为简洁起见，我省略了访问器），但无法弄清楚要放入什么`Item.hbm.xml`：

```
class Item {
  String name;
  Vec3d position;
}

class Vec3d {
  double x;
  double y;
  double z;
} 
```

数据库架构：

```
create table item (
  item_id bigint primary key,
  name varchar(64) not null,
  x double not null,
  y double not null,
  z double not null
); 
```

到目前为止，`Item.hbm.xml`基本上看起来像这样：

```
...
<class name="Item" table="item">
  <id name="id" column="item_id">
    <generator class="sequence" />
  </id>

  <property name="name" type="string" />
  <!-- ??? How do I map the position ??? -->
</class>
... 
```

我找不到有关如何将位置向量作为单个对象获取的文档，而是作为字段存储在与 Item 类相同的行中。将它存储在一个单独的表中并且仅仅为了读取一个项目而导致一个连接似乎很浪费。

我在寻找答案时遇到的麻烦可能来自于不知道 Hibernate 用于此模式的术语。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-28T18:58:08.167

这通常在休眠注释中使用 @Embeddable 和 @Embedded 来解决。但是，在使用映射文件时，您可以使用组件标记。

[http://vuknikolic.wordpress.com/2010/11/27/embeddable-with-hbm-xml/](http://vuknikolic.wordpress.com/2010/11/27/embeddable-with-hbm-xml/)

# javafx-2 - Javafx中如何使用Task类的调用方法的返回值

> ID：11703568
> 
> 赞同：15
> 
> 时间：2012-07-28T18:22:30.480
> 
> 标签：javafx-2

我正在使用 Task 类在 javafx 应用程序中运行后台任务以从数据库中获取数据。

```
public class CustomTask extends Task<ObservableList<ObservableList>> {
    TableView tableview;
    ObservableList<ObservableList> data;

    public CustomTask(TableView tableview) {
        this.tableview = tableview;
    }

    @Override
    protected ObservableList<ObservableList> call() throws Exception {
        DateFormat dateFormat = new SimpleDateFormat("yyyy-MM-dd");
        Date date = new Date();
        String SQL = "SELECT * from sell where Date='" + dateFormat.format(date) + "'";
        ResultSet rs = DBConnect.getResultSet(SQL);
        data = DBConnect.generateListDateFromTable(rs, true);

        return data;
    }
} 
```

如何使用数据对象。

* * *

## 回答 #1

> 赞同：31
> 
> 时间：2014-06-15T02:43:40.463

**示例 1`addEventHandler`**

```
MyResultObjectType result;
CustomTask task = new CustomTask();
task.addEventHandler(WorkerStateEvent.WORKER_STATE_SUCCEEDED, 
        new EventHandler<WorkerStateEvent>() {
    @Override
    public void handle(WorkerStateEvent t) {
        result = task.getValue();
    }
}); 
```

**示例 2`setOnSucceeded`**

```
MyResultObjectType result;
CustomTask task = new CustomTask();
task.setOnSucceeded(new EventHandler<WorkerStateEvent>() {
    @Override
    public void handle(WorkerStateEvent t) {
        result = task.getValue();
    }
}); 
```

**示例 3`addListener`**

```
task.valueProperty().addListener(new ChangeListener<Task>() {
    @Override
    public void changed(ObservableValue<? extends mytype> obs, 
                        mytype oldValue, mytype newValue) {
        if (newValue != null) {
            System.out.println("Result = " + newValue);
        }
    }
}); 
```

* * *

## 回答 #2

> 赞同：19
> 
> 时间：2012-07-30T09:52:16.160

绑定到任务的[value 属性](https://docs.oracle.com/javase/8/javafx/api/javafx/concurrent/Task.html#valueProperty)或提供[task.setOnSucceeded()](https://docs.oracle.com/javase/8/javafx/api/javafx/concurrent/Task.html#setOnSucceeded-javafx.event.EventHandler-)事件处理程序并在提供的事件处理程序中调用 task.getValue()。

# java - 番石榴中的 Floats.tryParse()

> ID：11703571
> 
> 赞同：3
> 
> 时间：2012-07-28T18:22:45.247
> 
> 标签：java, guava

我找到了唯一的方法：

```
Ints.tryParse() 
```

番石榴中的 Double/Float 有没有类似的方法？

如果不是，缺席的原因是什么？

谢谢。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-07-28T18:37:50.387

我们（嗯，我）在不到 24 小时前完成了代码审查的工作中有一个[实现。](http://codereview.appspot.com/6354088/)它应该有望在 14.0 中发布。（除 之外的其他整数类型`int`，包括无符号类型，都将进入刚刚开始的单独代码审查。）

# c# - 如何在指定时间执行指定任务

> ID：11703572
> 
> 赞同：4
> 
> 时间：2012-07-28T18:23:10.900
> 
> 标签：c#

我是 C# 的新手，但是 java 有在指定时间执行指定任务的方法，所以使用 c# 它是怎么做的

```
Timer t=new Timer();
TimerTask task1 =new TimerTask()           

t.schedule(task1, 3000); 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-28T18:26:17.330

您可以在此处获得有关计时器如何在 C# 中工作的完整教程：http: [//www.dotnetperls.com/timer](http://www.dotnetperls.com/timer)

简而言之：

```
using System;
using System.Collections.Generic;
using System.Timers;

public static class TimerExample // In App_Code folder
{
    static Timer _timer; // From System.Timers
    static List<DateTime> _l; // Stores timer results
    public static List<DateTime> DateList // Gets the results
    {
        get
        {
            if (_l == null) // Lazily initialize the timer
            {
                Start(); // Start the timer
            }
            return _l; // Return the list of dates
        }
    }
    static void Start()
    {
        _l = new List<DateTime>(); // Allocate the list
        _timer = new Timer(3000); // Set up the timer for 3 seconds
        //
        // Type "_timer.Elapsed += " and press tab twice.
        //
        _timer.Elapsed += new ElapsedEventHandler(_timer_Elapsed);
        _timer.Enabled = true; // Enable it
    }
    static void _timer_Elapsed(object sender, ElapsedEventArgs e)
    {
        _l.Add(DateTime.Now); // Add date on each timer event
    }
} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-07-28T20:01:13.937

使用[`Anonymous Methods`](http://msdn.microsoft.com/en-us/library/0yw3tz5k%28v=VS.100%29.aspx)和`Object Initializer`：

```
var timer = new Timer { Interval = 5000 };
timer.Tick += (sender, e) =>
    {
        MessageBox.Show(@"Hello world!");
    }; 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-07-28T18:32:12.460

这是一个示例：

```
public class Timer1
{

    public static void Main()
    {
        System.Timers.Timer aTimer = new System.Timers.Timer();
        aTimer.Elapsed+=new ElapsedEventHandler(OnTimedEvent);
        // Set the Interval to 5 seconds.
        aTimer.Interval=5000;
        aTimer.Enabled=true;

        Console.WriteLine("Press \'q\' to quit the sample.");
        while(Console.Read()!='q');
    }

    // Specify what you want to happen when the Elapsed event is raised.
    private static void OnTimedEvent(object source, ElapsedEventArgs e)
    {
        Console.WriteLine("Hello World!");
    }
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-28T18:26:40.257

```
using System;
using System.Threading;

namespace ConsoleApplication6
{
    class Program
    {

        public void TimerTask(object state)
        {
            //Do your task
            Console.WriteLine("oops");
        }

        static void Main(string[] args)
        {
            var program = new Program();
            var timer = new Timer(program.TimerTask, 
                                  null, 
                                  3000, 
                                  Timeout.Infinite);
            Thread.Sleep(10000);
        }
    }
} 
```

# python - python 正则表达式中括号的奇怪行为

> ID：11703573
> 
> 赞同：0
> 
> 时间：2012-07-28T18:23:12.840
> 
> 标签：python, regex, quotes, parentheses, backreference

我正在编写一个 python 正则表达式，它通过文本文档查找引用的字符串（从黑盒记录的航空公司飞行员的引用）。我首先尝试使用以下规则编写正则表达式：

返回引号之间的内容。
*如果它以单人打开，则仅在以单人关闭时返回。
如果它以双精度打开，则仅在以双精度关闭时返回。*

例如，我不想匹配“hi there”或“hi there”，而是“hi there”和“hi there”。

我使用包含以下内容的测试页面：

```
CA  "Runway 18, wind 230 degrees, five knots, altimeter 30."
AA  "Roger that"
18:24:10 [flap lever moving into detent]
ST: "Some passenger's pushing a switch. May I?" 
```

所以我决定从简单的开始：

```
 re.findall('("|\').*?\\1', page)
 ########## /("|').*?\1/ <-- raw regex I think I'm going for. 
```

这个正则表达式的行为非常出乎意料。
我以为会：

1.  ( " | " ) 匹配单引号或双引号，另存为反向引用 /1。
2.  .*? 匹配非贪心通配符。
3.  \1 匹配它在反向引用 \1 中找到的任何内容（第一步）。

相反，它返回一个引号数组，但从不返回任何其他内容。

```
['"', '"', "'", "'"] 
```

我真的很困惑，因为等效的（afaik）正则表达式在 VIM 中工作得很好。

```
\("\|'\).\{-}\1/) 
```

我的问题是：
为什么它只返回括号内的匹配项？这是我对反向引用理解的缺陷吗？如果是这样，为什么它可以在 VIM 中工作？

以及如何编写我在 python 中寻找的正则表达式？

谢谢您的帮助！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-28T18:31:26.000

除了引号之外，您没有捕获任何内容，这是 Python 返回的内容。

如果您添加另一个组，情况会好得多：

```
for quote, match in re.finditer(r'("|\')(.*?)\1', page):
  print match 
```

我为您的字符串文字加上了前缀`r`，使其成为*原始*字符串，这在您需要使用大量反斜杠（`\\1`变得`\1`）时很有用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-28T18:29:25.450

您需要用一对额外的括号来捕获所有内容。

```
re.findall('(("|\').*?\\2)', page) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-28T18:30:20.060

阅读[文档](http://docs.python.org/library/re.html#re.findall)。 `re.findall`返回组，如果有的话。如果您想要整个匹配，则必须将其全部分组，或使用`re.finditer`. 看到[这个问题](https://stackoverflow.com/questions/11663995/regex-working-on-regexpal-but-not-with-python/11664124#11664124)。

# php - 如何为用户定义的时区正确存储时间？

> ID：11703578
> 
> 赞同：0
> 
> 时间：2012-07-28T18:24:43.597
> 
> 标签：php, date

如何正确存储时间，以便以后可以使用用户定义的时区更改时区？您通常如何使用 DateTime 类执行此操作？

例如：

您运行一个论坛脚本。

您的服务器的当地时间是美国

用户 A 来自欧盟

用户 B 来自日本

用户 A 根据他在欧盟的当地时间发布并查看时间。

用户 B 在日本当地时间看到用户 A 的帖子。

我的问题是您应该存储时间的时区。您通常如何使用 DateTime 类来做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-28T19:02:16.367

以 UTC 格式保存时间，以确保稳定性和一致性。

**[每个用户都应该将他的偏好以PHP 的已知时区](http://il.php.net/manual/en/timezones.php)**的形式保存在数据库中。

然后，在显示时，将时间更改为正确的时区。

```
$time = "13:37 2012-12-21";
$datetime = new DateTime($time);
$user_timezone = new DateTimeZone($user_timezone_from_the_database);
$datetime->setTimezone($user_timezone);
$datetime->format("H:i:s Y-m-d"); 
```

将为用户产生正确的日期/时间。

# forms - web2py 表单创建

> ID：11703580
> 
> 赞同：1
> 
> 时间：2012-07-28T18:25:25.833
> 
> 标签：forms, api, web2py

我正在尝试在 web2py 中创建一个表单。我不确定正确的语法，并且从站点中的示例中不明白这是如何完成的。有人可以给出更好的解释吗？

像这样的简单表格是如何创建的？

```
<form> 
<select> 
<option>Paint</option>
<option>Brushes</option>
<option>Erasers</option>
</select>
Quantity: <input type="text" /> 
<input type="submit" />
</form> 
```

如何验证更复杂的表单？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-31T15:03:18.430

```
items = ['Paint','Brushes','Erasers']
form = FORM(
    SELECT(*items),
    INPUT('Quantity', _type='text'),
)

return dict(form=form) 
```

（在视图中）：

```
{{ extend 'layout.html' }}

{{ =form}} 
```

要验证此表单或“更复杂”的表单：

（在控制器中）

```
 form = FORM(...) # This is the same form def as above, must be before form.process() 

 if form.process().accepted:
     # Valid!
 else:
     # invalid. 
```

如果您有更具体的问题，我会尝试回答，但我强烈建议您查看这本书并尝试创建和验证您自己的简单表单。您可以使用欢迎应用程序作为开始。或者，您可以搜索 web2py 应用程序并下载并使用它们。

完整阅读这两章，我会在未来帮助你解决任何 web2py 问题（会有一个测验！）：

数据库抽象层（对于释放 web2py 的 DB 驱动表单的全部功能很重要）： [http ://web2py.com/books/default/chapter/29/6](http://web2py.com/books/default/chapter/29/6)

表单和验证器（您需要了解的有关创建表单并将其链接到数据的所有信息： [http ://web2py.com/books/default/chapter/29/7](http://web2py.com/books/default/chapter/29/7)

# ruby-on-rails - 回形针 - nil:NilClass 的未定义方法“匹配”

> ID：11703581
> 
> 赞同：4
> 
> 时间：2012-07-28T18:25:27.093
> 
> 标签：ruby-on-rails, file-upload, paperclip

我是rails和ruby的新手。我正在创建一个可以上传照片的简单应用程序。我安装了回形针 gem，我试图在我的模型中配置它以指定缩略图大小，如下所示：

```
has_attached_file :photo, 
    :styles => {:thumb => '120x120>', :large => '640x480>' },
    :default_style => :thumb,
    :url => "/system/photos/:basename.:extension",
    :path => ":rails_root/public/system/photos/:basename.:extension" 
```

但是，我不断收到错误：

```
undefined method `match' for nil:NilClass 
```

当我删除 :styles 参数时，一切都按预期工作。

任何人都可以阐明一些观点并指出我正确的方向吗？

谢谢

**编辑：**

堆栈跟踪如下：

```
C:/RailsInstaller/Ruby1.9.3/lib/ruby/gems/1.9.1/bundler/gems/paperclip-70f0f1fea030/lib/paperclip/content_type_detector.rb:60:in `type_from_file_command'
C:/RailsInstaller/Ruby1.9.3/lib/ruby/gems/1.9.1/bundler/gems/paperclip-70f0f1fea030/lib/paperclip/content_type_detector.rb:16:in `detect'
C:/RailsInstaller/Ruby1.9.3/lib/ruby/gems/1.9.1/bundler/gems/paperclip-70f0f1fea030/lib/paperclip/io_adapters/file_adapter.rb:14:in `cache_current_values'
C:/RailsInstaller/Ruby1.9.3/lib/ruby/gems/1.9.1/bundler/gems/paperclip-70f0f1fea030/lib/paperclip/io_adapters/file_adapter.rb:5:in `initialize'
C:/RailsInstaller/Ruby1.9.3/lib/ruby/gems/1.9.1/bundler/gems/paperclip-70f0f1fea030/lib/paperclip/io_adapters/registry.rb:29:in `new'
C:/RailsInstaller/Ruby1.9.3/lib/ruby/gems/1.9.1/bundler/gems/paperclip-70f0f1fea030/lib/paperclip/io_adapters/registry.rb:29:in `for'
C:/RailsInstaller/Ruby1.9.3/lib/ruby/gems/1.9.1/bundler/gems/paperclip-70f0f1fea030/lib/paperclip/attachment.rb:412:in `post_process_style'
C:/RailsInstaller/Ruby1.9.3/lib/ruby/gems/1.9.1/bundler/gems/paperclip-70f0f1fea030/lib/paperclip/attachment.rb:402:in `block in post_process_styles'
C:/RailsInstaller/Ruby1.9.3/lib/ruby/gems/1.9.1/bundler/gems/paperclip-70f0f1fea030/lib/paperclip/attachment.rb:401:in `each'
C:/RailsInstaller/Ruby1.9.3/lib/ruby/gems/1.9.1/bundler/gems/paperclip-70f0f1fea030/lib/paperclip/attachment.rb:401:in `post_process_styles'
C:/RailsInstaller/Ruby1.9.3/lib/ruby/gems/1.9.1/bundler/gems/paperclip-70f0f1fea030/lib/paperclip/attachment.rb:394:in `block (2 levels) in post_process'
activesupport (3.2.7) lib/active_support/callbacks.rb:403:in `_run__792123923__photo_post_process__530674861__callbacks'
activesupport (3.2.7) lib/active_support/callbacks.rb:405:in `__run_callback'
activesupport (3.2.7) lib/active_support/callbacks.rb:385:in `_run_photo_post_process_callbacks'
activesupport (3.2.7) lib/active_support/callbacks.rb:81:in `run_callbacks'
C:/RailsInstaller/Ruby1.9.3/lib/ruby/gems/1.9.1/bundler/gems/paperclip-70f0f1fea030/lib/paperclip/callbacks.rb:26:in `run_paperclip_callbacks'
C:/RailsInstaller/Ruby1.9.3/lib/ruby/gems/1.9.1/bundler/gems/paperclip-70f0f1fea030/lib/paperclip/attachment.rb:393:in `block in post_process'
activesupport (3.2.7) lib/active_support/callbacks.rb:403:in `_run__792123923__post_process__530674861__callbacks'
activesupport (3.2.7) lib/active_support/callbacks.rb:405:in `__run_callback'
activesupport (3.2.7) lib/active_support/callbacks.rb:385:in `_run_post_process_callbacks'
activesupport (3.2.7) lib/active_support/callbacks.rb:81:in `run_callbacks'
C:/RailsInstaller/Ruby1.9.3/lib/ruby/gems/1.9.1/bundler/gems/paperclip-70f0f1fea030/lib/paperclip/callbacks.rb:26:in `run_paperclip_callbacks'
C:/RailsInstaller/Ruby1.9.3/lib/ruby/gems/1.9.1/bundler/gems/paperclip-70f0f1fea030/lib/paperclip/attachment.rb:392:in `post_process'
C:/RailsInstaller/Ruby1.9.3/lib/ruby/gems/1.9.1/bundler/gems/paperclip-70f0f1fea030/lib/paperclip/attachment.rb:107:in `assign'
C:/RailsInstaller/Ruby1.9.3/lib/ruby/gems/1.9.1/bundler/gems/paperclip-70f0f1fea030/lib/paperclip.rb:196:in `block in has_attached_file'
activerecord (3.2.7) lib/active_record/attribute_assignment.rb:85:in `block in assign_attributes'
activerecord (3.2.7) lib/active_record/attribute_assignment.rb:78:in `each'
activerecord (3.2.7) lib/active_record/attribute_assignment.rb:78:in `assign_attributes'
activerecord (3.2.7) lib/active_record/base.rb:498:in `initialize'
activerecord (3.2.7) lib/active_record/persistence.rb:44:in `new'
activerecord (3.2.7) lib/active_record/persistence.rb:44:in `create'
app/controllers/photography_controller.rb:23:in `create'
actionpack (3.2.7) lib/action_controller/metal/implicit_render.rb:4:in `send_action'
actionpack (3.2.7) lib/abstract_controller/base.rb:167:in `process_action'
actionpack (3.2.7) lib/action_controller/metal/rendering.rb:10:in `process_action'
actionpack (3.2.7) lib/abstract_controller/callbacks.rb:18:in `block in process_action'
activesupport (3.2.7) lib/active_support/callbacks.rb:414:in `_run__403597772__process_action__67609296__callbacks'
activesupport (3.2.7) lib/active_support/callbacks.rb:405:in `__run_callback'
activesupport (3.2.7) lib/active_support/callbacks.rb:385:in `_run_process_action_callbacks'
activesupport (3.2.7) lib/active_support/callbacks.rb:81:in `run_callbacks'
actionpack (3.2.7) lib/abstract_controller/callbacks.rb:17:in `process_action'
actionpack (3.2.7) lib/action_controller/metal/rescue.rb:29:in `process_action'
actionpack (3.2.7) lib/action_controller/metal/instrumentation.rb:30:in `block in process_action'
activesupport (3.2.7) lib/active_support/notifications.rb:123:in `block in instrument'
activesupport (3.2.7) lib/active_support/notifications/instrumenter.rb:20:in `instrument'
activesupport (3.2.7) lib/active_support/notifications.rb:123:in `instrument'
actionpack (3.2.7) lib/action_controller/metal/instrumentation.rb:29:in `process_action'
actionpack (3.2.7) lib/action_controller/metal/params_wrapper.rb:207:in `process_action'
activerecord (3.2.7) lib/active_record/railties/controller_runtime.rb:18:in `process_action'
actionpack (3.2.7) lib/abstract_controller/base.rb:121:in `process'
actionpack (3.2.7) lib/abstract_controller/rendering.rb:45:in `process'
actionpack (3.2.7) lib/action_controller/metal.rb:203:in `dispatch'
actionpack (3.2.7) lib/action_controller/metal/rack_delegation.rb:14:in `dispatch'
actionpack (3.2.7) lib/action_controller/metal.rb:246:in `block in action'
actionpack (3.2.7) lib/action_dispatch/routing/route_set.rb:73:in `call'
actionpack (3.2.7) lib/action_dispatch/routing/route_set.rb:73:in `dispatch'
actionpack (3.2.7) lib/action_dispatch/routing/route_set.rb:36:in `call'
journey (1.0.4) lib/journey/router.rb:68:in `block in call'
journey (1.0.4) lib/journey/router.rb:56:in `each'
journey (1.0.4) lib/journey/router.rb:56:in `call'
actionpack (3.2.7) lib/action_dispatch/routing/route_set.rb:600:in `call'
actionpack (3.2.7) lib/action_dispatch/middleware/best_standards_support.rb:17:in `call'
rack (1.4.1) lib/rack/etag.rb:23:in `call'
rack (1.4.1) lib/rack/conditionalget.rb:35:in `call'
actionpack (3.2.7) lib/action_dispatch/middleware/head.rb:14:in `call'
actionpack (3.2.7) lib/action_dispatch/middleware/params_parser.rb:21:in `call'
actionpack (3.2.7) lib/action_dispatch/middleware/flash.rb:242:in `call'
rack (1.4.1) lib/rack/session/abstract/id.rb:205:in `context'
rack (1.4.1) lib/rack/session/abstract/id.rb:200:in `call'
actionpack (3.2.7) lib/action_dispatch/middleware/cookies.rb:338:in `call'
activerecord (3.2.7) lib/active_record/query_cache.rb:64:in `call'
activerecord (3.2.7) lib/active_record/connection_adapters/abstract/connection_pool.rb:473:in `call'
actionpack (3.2.7) lib/action_dispatch/middleware/callbacks.rb:28:in `block in call'
activesupport (3.2.7) lib/active_support/callbacks.rb:405:in `_run__122749671__call__530674861__callbacks'
activesupport (3.2.7) lib/active_support/callbacks.rb:405:in `__run_callback'
activesupport (3.2.7) lib/active_support/callbacks.rb:385:in `_run_call_callbacks'
activesupport (3.2.7) lib/active_support/callbacks.rb:81:in `run_callbacks'
actionpack (3.2.7) lib/action_dispatch/middleware/callbacks.rb:27:in `call'
actionpack (3.2.7) lib/action_dispatch/middleware/reloader.rb:65:in `call'
actionpack (3.2.7) lib/action_dispatch/middleware/remote_ip.rb:31:in `call'
actionpack (3.2.7) lib/action_dispatch/middleware/debug_exceptions.rb:16:in `call'
actionpack (3.2.7) lib/action_dispatch/middleware/show_exceptions.rb:56:in `call'
railties (3.2.7) lib/rails/rack/logger.rb:26:in `call_app'
railties (3.2.7) lib/rails/rack/logger.rb:16:in `call'
actionpack (3.2.7) lib/action_dispatch/middleware/request_id.rb:22:in `call'
rack (1.4.1) lib/rack/methodoverride.rb:21:in `call'
rack (1.4.1) lib/rack/runtime.rb:17:in `call'
activesupport (3.2.7) lib/active_support/cache/strategy/local_cache.rb:72:in `call'
rack (1.4.1) lib/rack/lock.rb:15:in `call'
actionpack (3.2.7) lib/action_dispatch/middleware/static.rb:62:in `call'
railties (3.2.7) lib/rails/engine.rb:479:in `call'
railties (3.2.7) lib/rails/application.rb:220:in `call'
rack (1.4.1) lib/rack/content_length.rb:14:in `call'
railties (3.2.7) lib/rails/rack/log_tailer.rb:17:in `call'
rack (1.4.1) lib/rack/handler/webrick.rb:59:in `service'
C:/RailsInstaller/Ruby1.9.3/lib/ruby/1.9.1/webrick/httpserver.rb:138:in `service'
C:/RailsInstaller/Ruby1.9.3/lib/ruby/1.9.1/webrick/httpserver.rb:94:in `run'
C:/RailsInstaller/Ruby1.9.3/lib/ruby/1.9.1/webrick/server.rb:191:in `block in start_thread' 
```

摄影控制器：

```
def create
  @photo = Photo.create(params[:photo])
end 
```

最后，我的部分表单可能会有所帮助：

```
<%= form_for @photo, :url => { :controller => 'photography', :action => 'create'}, :html => { :multipart => true } do |f| %>
  <% if @photo.errors.any? %>
  <div id="errorExplanation">
    <h2><%= pluralize(@photo.errors.count, "error") %> prohibited
        this photo from being saved:</h2>
    <ul>
    <% @photo.errors.full_messages.each do |msg| %>
      <li><%= msg %></li>
    <% end %>
    </ul>
  </div>
  <% end %>

  <div class="field">
    <%= f.label :title %><br />
    <%= f.text_field :title %>
  </div>
  <div class="field">
    <%= f.label :description %><br />
    <%= f.text_area :description %>
  </div>
  <%= f.file_field :photo %>
  <div class="actions">
    <%= f.submit ('Upload Photo') %>
  </div>
<% end %> 
```

再次感谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-02T09:48:51.410

我遇到了这个错误，以及其他类似的错误，使用回形针。但是我在windows上运行我的开发环境，最新版本的回形针使用了`file'命令，windows似乎不太喜欢这个命令。

希望这将很快得到解决，但现在我通过使用最新版本的回形针来回避这个问题，即 3.0.4。

如果您也在 Windows 上运行，只需将其添加到您的 Gemfile 中：

```
gem 'paperclip', '3.0.4' 
```

PS 在开发中尝试使用 3.0.4 并在生产中使用最新版本可能是值得的。

# jquery - 如何使用 jQuery 从 HTML 中删除多个字符串？

> ID：11703594
> 
> 赞同：0
> 
> 时间：2012-07-28T18:27:58.620
> 
> 标签：jquery

我有这个 jQuery 来删除第一个选项组：

```
var topicSelectHtml = $('#TopicID')
    .clone()
    .find("optgroup:first")
    .remove().end().html(); 
```

来自以下 HTML：

```
<select name="TopicID" id="TopicID">
   <optgroup label="Admin">
      <option value="0000">All Topics</option>
   </optgroup>
   <optgroup label="AA">
      <option value="05**">a</option>
      <option value="0505">b</option>
      <option value="0510">c</option>
   </optgroup>
   <optgroup label="BB">
      <option value="10**">d</option>
      <option value="1005">e</option>
   </optgroup>
</select> 
```

有没有办法我也可以这样做，所以值以“**”结尾的选项也被删除？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-28T18:32:31.867

您可以将 jQuery 的[结尾与](http://api.jquery.com/attribute-ends-with-selector/)选择器一起使用：

```
var topicSelectHtml = $('#TopicID')
    .clone()
    .find("optgroup:first").remove().end()
    .find("option[value$='**']").remove().end().html(); 
```

# google-places-api - 如何使用文本搜索通过谷歌地方 api 按距离对结果进行排序

> ID：11703597
> 
> 赞同：4
> 
> 时间：2012-07-28T18:28:29.240
> 
> 标签：google-places-api, google-places

我想按距离获取我所在位置附近的所有餐厅。我正在使用文本搜索和谷歌地方 api 使用这个 url：[https](https://maps.googleapis.com/maps/api/place/textsearch/json?query=restaurants&location=32.16107,34.806618&radius=200&sensor=true&key=api_key) ://maps.googleapis.com/maps/api/place/textsearch/json?query=restaurants&location=32.16107,34.806618&radius=200&sensor=true&key=api_key 。我得到的结果很少，没有任何顺序。我尝试了 rankby=distance 但根据文档（https://developers.google.com/places/documentation/），您只能在常规搜索中使用它，这意味着在使用 textsearch 时没有这样的参数选项（我试过了无论如何->不工作）。我正在使用文本搜索，因为常规搜索只返回“类型”：[“建立”]。如何按距离订购 google place api 的文本搜索？我可以'

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-29T23:38:07.883

您是对的，Places API Textsearch 不支持该`rankBy=distance`参数。如果您认为这将是一项有用的功能，请提交[Places API 功能请求](http://code.google.com/p/gmaps-api-issues/issues/entry?template=Places%20API%20-%20Feature%20Request)。

`rankBy=distance`但是，您可以通过使用参数和参数执行 Places API 搜索请求来获得您正在寻找的结果`keyword=restaurant`：

> [https://maps.googleapis.com/maps/api/place/search/json?keyword=restaurant&location=32.16107,34.806618&rankBy=distance&sensor=false&key=YOUR_API_KEY](https://maps.googleapis.com/maps/api/place/search/json?keyword=restaurant&location=32.16107,34.806618&rankBy=distance&sensor=false&key=YOUR_API_KEY)

该`keyword`参数与所有可用字段匹配，包括但不限于姓名、类型和地址，以及客户评论和其他第三方内容。

# javascript - Javascript中的无符号32位整数

> ID：11703599
> 
> 赞同：9
> 
> 时间：2012-07-28T18:28:34.470
> 
> 标签：javascript, integer, unsigned-integer

如何在 Javascript 中模拟没有任何外部依赖的 32 位无符号整数？`x >>> 0`使用或`x | 0`不使用的技巧（对于乘法，它们似乎适用于加法/减法），并且双打在乘法过程中会失去精度。

例如，尝试将 2654435769 * 340573321 (mod 2^32) 相乘。结果应该是 1。

[这个答案](https://stackoverflow.com/a/6422061/1113426)有乘法。加法/减法/除法呢？

[这是](http://www.wolframalpha.com/input/?i=Mod%5B2654435769+*+340573321%2C+2%5E32%5D)wolfram alpha 的链接，展示了上面的等式。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-28T21:45:21.160

32 位 unsigned int 适合 Javascript 的[64 位浮点数](http://en.wikipedia.org/wiki/Double-precision_floating-point_format)——在执行加法、减法或除法时不应该有精度损失。只需掩码`0xffffffff`以保持在 32 位整数内。乘法超出了合适的范围，但是您已经有了解决方案。

# .net - Dapper 列号而不是列名？

> ID：11703600
> 
> 赞同：5
> 
> 时间：2012-07-28T18:28:42.070
> 
> 标签：.net, dapper

[我有一个与Dapper-dot-net "no column name"](https://stackoverflow.com/questions/7326375/dapper-dot-net-no-column-name)非常相似的问题，但那里的答案并没有让我到达我需要的地方。

我正在编写一个 Web 界面并使用 dapper 从我客户的 ERP 系统中的存储过程中获取数据。SP 返回没有列名的 4 列数据。话虽如此，SP 已锁定，我无法更改它们。正如 Sam 建议的那样，我已尝试通过在查询中使用临时表来解决此问题。

```
var grid = QueryMultiple(@"set nocount on 
declare @t table(Id int, Name nvarchar(max), AnotherId int)

insert @t
exec proc

set nocount off 
select Id, Name from @t
select Id, AnotherId from @t
"); 
```

但是，我现在发现原始 SP 还包含一个用于记录的插入，因此 SQL 不允许我将我的 sp 插入临时表中。

提到添加对以下内容的支持：

```
class Foo { [ColumnNumber(1)] public string Name {get;set;} } 
```

我怎样才能做到这一点？有人可以指出我正确的方向来修改 Dapper 源以不需要列名并允许我按列号映射吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-28T19:50:55.903

非平凡绑定的问题不断出现；它最近出现在这里：[http ://code.google.com/p/dapper-dot-net/issues/detail?id=108](http://code.google.com/p/dapper-dot-net/issues/detail?id=108)

我的建议仍然存在，尽管我还没有时间编写代码。我提出一个你可以选择处理的静态事件，并应用你想要的任何深奥的映射，即

```
SqlMapper.ColumnBind += (sender, args) {
    int colIndex = args.ColumnIndex;
    Type type = args.TargetType;
    MemberInfo member = // ... Entirely up to you to define logic
    args.Member = member;
}; 
```

以上完全是理论上的，但它会满足您的需求吗？

注意：如果`ColumnBind`没有订阅，它只会像往常一样进行正常的基本名称映射。想法？

（注意：它也可以是每个类型的单个事件调用，而不是每个列；这可能更有效，因为订阅者会`GetProperties`不那么频繁地调用等）

# intellij-idea - 禁用 IntelliJ 警告

> ID：11703601
> 
> 赞同：13
> 
> 时间：2012-07-28T18:28:48.720
> 
> 标签：intellij-idea

IntelliJ 以与突出实际错误相同的方式突出显示某些“错误”（不会阻止成功编译），这让我非常恼火。例如，幻数并不是真正的错误，但它会以与不兼容类型错误完全相同的方式被标记。

我怎样才能改变这个？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-07-28T19:01:03.877

每当您看到检查警告/错误时，您可以将插入符号放在上面并按 Alt+Enter（还会出现一个灯泡，告诉您这一点）。将出现一个菜单，其中包含建议的快速修复。您可能需要按右打开子菜单，然后您会在此处找到“编辑检查设置”。调用它后，您可以按照 hvgotcodes 的回答 :) 进行操作，这只是获取这些设置的更快方法。

* * *

## 回答 #2

> 赞同：15
> 
> 时间：2012-07-28T18:31:09.880

去`Settings -> Inspections`。然后，您需要在长长的列表中搜索违规检查，您可以通过将鼠标悬停在边缘的警告标记上来获取其名称。您可以更改检查的严重性，无论是错误、警告等，还是完全禁用它。

编辑：如果您在“设置”中搜索“魔术”，您会得到以下信息，这应该会有所帮助：

![在此处输入图像描述](../Images/b724a4fcb2442bf5823a4dcea3b08370.png)

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2016-10-12T17:57:42.393

正如迈克尔卡尔文所说，您可以使用 SuppressWarnings 注释。例如：

```
@SuppressWarnings("OptionalUsedAsFieldOrParameterType") 
```

请参阅[https://github.com/JetBrains/intellij-community/blob/master/plugins/InspectionGadgets/src/inspectionDescriptions/OptionalUsedAsFieldOrParameterType.html](https://github.com/JetBrains/intellij-community/blob/master/plugins/InspectionGadgets/src/inspectionDescriptions/OptionalUsedAsFieldOrParameterType.html)

通常在互联网上搜索确切的描述会导致我这样做。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2019-02-20T16:07:24.817

*与 OP 没有直接关系，但可能对未来的 Google 员工有用*

我在试图弄清楚如何禁用 IntelliJ IDEA 对已被 Java 8 功能取代的 Guava 功能的警告时遇到了这个问题。在我的案例中，我无法使用这些功能的 Java 8 版本，因为我们使用的库是用 Guava 构建的（尽管是 Java 8 项目）。所以为了解决这个问题，我`SuppressWarnings`在使用 Guava 的任何类之前添加了一个注释：

```
@SuppressWarnings(Guava)
public final class... 
```

# java - java自定义JTree insertnodeinto

> ID：11703602
> 
> 赞同：1
> 
> 时间：2012-07-28T18:28:50.083
> 
> 标签：java, swing, jtree

我在这里看到了很多类似的主题，但无法真正找到解决我的小问题的方法。

我的应用程序正在搜索文件并在 jtree 中显示结果。我有一个问题。当我使用 insertNodeInto(...); 将新节点添加到树中时；我可以在搜索的同时搜索找到的项目，但可视化存在问题。我的意思是渲染节点时存在问题 - 我真的无法正确解释，所以我将这张图片包括在内。

![在此处输入图像描述](../Images/a490f17d88607e38359c721b8b79c667.png)

当我在搜索结束时在 jtree 上使用重新加载时，一切都恢复正常 - 渲染正常，不幸的是，这会关闭用户打开的所有选项卡。

我是一名学生 - 对不起我糟糕的英语。我希望有人知道为什么会出现这个问题。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-29T05:44:23.093

您的 GUI 的显示方式看起来就像是在绘制线程（事件调度线程 (EDT)）之外向模型添加组件。这反过来将触发该线程之外的绘制，这将导致绘制不稳定。

请查看[本教程关于 Swing 中的线程](http://docs.oracle.com/javase/tutorial/uiswing/concurrency/worker.html)

查看`DefaultTreeModel`，很明显该`insertNodeInto(..)`方法将触发 GUI 更新，因此如果未在 EDT 上完成，您很容易出现示例中描述的绘画问题。

一个快速的解决方法是添加一个类似于下面的（*未编译*的）代码的方法：

```
public void safeInsertNodeInto(final MutableTreeNode newChild,
                           final MutableTreeNode parent, final int index) {
          SwingUtilities.invokeLater(
                  new Runnable(){
                       public void run(){
                            model.insertNodeInto(newChild,parent,index);
                       }
                   }
           );
 } 
```

然后调用该方法而不是直接调用您的模型。

也就是说，我强烈建议阅读上面引用的教程。有更高级的方法来处理 EDT 约束。

# apache - 这些是什么类型的字符以及如何解码？

> ID：11703605
> 
> 赞同：1
> 
> 时间：2012-07-28T18:29:13.533
> 
> 标签：apache, character-encoding, decode, mod-security

所以，正如上面的标题所说，这与我刚刚实现 mod_security 的事实有关，我想解码日志结果，例如：

`\\xe7\\xa9\\x80\\xe7\\x94\\xb0\\xe6\\x81\\xb5\\xe4\\xba\\x8c`

只是想知道什么是阻塞

更多数据

> ModSecurity：使用代码 403（第 2 阶段）拒绝访问。
> 
> 模式匹配**"(^[\"' `\\xc2\\xb4\\xe2\\x80\\x99\\xe2\\x80\\x98;]+|[\\"'`\xc2\xb4\xe2\x80\x99\xe2\x80\x98;]+$)"**
> 
> 在 ARGS:search_query。[文件“/etc/apache2/mod-security modsecurity_crs_41_sql_injection_attacks.conf”][行“64”][id“981318”][rev“2.2.5”]
> 
> [msg "SQL 注入攻击：检测到常见注入测试"] [data "\xe2"]
> 
> [严重性“CRITICAL”] [标记“WEB_ATTACK/SQL_INJECTION”] [标记“WASCTC/WASC-19”] [标记“OWASP_TOP_10/A1”] [标记“OWASP_AppSensor/CIE1”] [标记“PCI/6.5.2”]
> 
> [主机名“www.site.com”][uri“/results”][unique_id“UBREwh@DH6YAAGY0LjMAAAAE”]

希望这些额外的信息有用

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2016-08-16T10:02:05.787

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-28T19:16:18.313

它可以是任何东西。如果没有上下文，我的猜测是通过将每个字节替换为 \x 和十六进制值来将 UTF-8 编码中的汉字转换为文本。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-28T18:37:44.767

对我来说，这看起来像十六进制格式的 ASCII

# html - 渲染一个简单的聊天布局

> ID：11703606
> 
> 赞同：0
> 
> 时间：2012-07-28T18:29:16.947
> 
> 标签：html, css

我目前正在设计一个聊天网站。布局将非常简单。

我想要一个包含所有消息的 div，但屏幕底部的 20 像素为表单字段保留以发送消息。

HTML 代码可能如下所示：

```
<div id="messages">
...
</div>
<input type="text" id="message" /> 
```

如何使用 CSS3 呈现这种布局？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-28T18:36:58.230

我看不出在这种情况下使用绝对定位有什么问题：

```
#messages {
    position: absolute;
    top: 0;
    bottom: 20px;
    left: 0;
    right: 0;
    overflow: auto;
}

#message {
    position: absolute;
    bottom: 0;
    height: 20px;
    left: 0;
    right: 0;
} 
```

请参阅此 jsFiddle 以获取[**实时示例**](http://jsfiddle.net/LQhML/) （为清楚地了解两个元素的开始/结束位置，添加了颜色）

# php - FPDF 错误：图像文件丢失或不正确：images/Photo/sample.jpg

> ID：11703609
> 
> 赞同：0
> 
> 时间：2012-07-28T18:29:41.950
> 
> 标签：php, mysql, image, pdf, fpdf

我正在从数据库和图像文件夹中获取图像。

现在，如果我在文件夹中没有图像，它会给我错误：

```
FPDF error: Missing or incorrect image file: images/Photo/a.jpg 
```

我正在根据 mysql 数据库图像字段对文件夹中的图像进行排序。

现在我想要的是，如果文件夹中没有图像或者图像字段为空，它不应该给我这个错误。而是显示文件夹中已经存在的默认图像。

我正在使用的代码是：

```
 $pict=$row['pict'];
    $image1 = "images/Photo/$pict";
    $pdf->SetX($xaxis);
    $xaxis=$xaxis-55;
    $yaxis=$yaxis+7;

    $pdf->Cell(0,0,$pdf->Image($image1,$xaxis,$yaxis,25,29),0,0,'L',0);
    $sign=$row['sign'];
    $image2= "images/Signature/$sign";
    $yaxis=$yaxis+35;
    $pdf->Cell(0,0,$pdf->Image($image2,$xaxis,$yaxis,20,0),0,0,'L',0); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-28T19:03:27.917

好的。我已经做了。

我应该做的就是：

```
 $pict=$row['pict'];

    //$xaxis=43';

    $pdf->SetX($xaxis1);

    $pdf->Cell(22,80,'-'.$fia2.' '.$sa,0,0,'L',0);
    if (empty($pict))
    {$image1="images/Photo/blank.jpg";}
    else {$image1 = "images/Photo/$pict";}
    $pdf->SetX($xaxis);
    $xaxis=$xaxis-55;
    $yaxis=$yaxis+7;

    $pdf->Cell(0,0,$pdf->Image($image1,$xaxis,$yaxis,25,29),0,0,'L',0);
    $signs=$row['sign'];
    if (empty($signs))
    {$image2="images/Signature/blank.jpg";}
    else {$image2 = "images/Signature/$signs";} 
```

# php - 使用 Notepad++，PHP 中的注释 `//` 会停止脚本

> ID：11703611
> 
> 赞同：1
> 
> 时间：2012-07-28T18:30:04.263
> 
> 标签：php, comments, notepad++

问题始于这个问题：[为什么这个 `$_SESSION = $_POST` 会失败？](https://stackoverflow.com/questions/11701179/why-does-this-session-post-fail)

一段时间后，我发现我在该问题中描述的问题是由`//`PHP 中的注释引起的（如问题的最后更新中所述）。

我怀疑我的编辑器 Notepad++ 对此有某种影响。

例如，如果我写：

```
<?
echo "test1<br>";
echo "test2<br>";
echo "test3<br>";
// Comment
echo "test4<br>";
echo "test5<br>";
?>
<?
echo "test6<br>";
echo "test7<br>";
echo "test8<br>";
?> 
```

`// Comment`当前内部注释之后的所有内容都将`<?...?>`被忽略。因此，上面的输出是：

> 测试1 测试
> 2测试3 测试6
> 测试
> 7
> 测试
> 8

另一种评论`/*...*/`工作正常。

奇怪的是，它只发生在我编辑或创建的评论上。所有其他未触及的评论都没有害处。可能有一些我不知道的 Notepad++ 设置导致了这种情况。如果之前在你摆弄程序时会发生“看不见”的事情，那么我可能在某个时候做错了什么。

有什么建议么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-28T18:34:35.240

检查你的行尾！使用 unix 样式的行结尾保存文件。（编辑 > EOL 转换 > UNIX 格式）

# php - Wordpress 电子商务插件将总订单成本限制为 999,999,999

> ID：11703612
> 
> 赞同：2
> 
> 时间：2012-07-28T18:30:07.707
> 
> 标签：php, mysql, wordpress, e-commerce

我有一个电子商务网站的问题。我正在使用 Wordpress 和电子商务插件[Wordpress E-Commerce](http://getshopped.org/)。

我不太了解 PHP，所以我不明白为什么会这样。

我的问题是，当人们下订单超过 999,999,999 货币时，它会在 999,999,999 处中断。例如，如果有人购买了价值 2,400,000,000 件的物品，那么每件物品的价格将减至 999,999,999。

有人知道为什么会这样吗？或解决方法？

从我在 PHP 文件中看到的内容来看，这是用于编译“总价”的代码。

```
$total = 0;
$shipping = $row['pnp'];
$total_shipping += $shipping;

$total += ( $row['price'] * $row['quantity']); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-05T22:07:45.797

听起来您需要更改 MySQL 中的数据长度。顺便说一句，恭喜你找到了这个限制。您显然在在线销售方面做得很好！

# open-source - 混合开源软件并在 GPL3、MIT、BSD 许可下发布

> ID：11703615
> 
> 赞同：1
> 
> 时间：2012-07-28T18:30:27.427
> 
> 标签：open-source, licensing

我正在编写一个 javascript 库，我正在考虑在三重许可的 GPL3、MIT、BSD 下提供它。

我还发现了一个 Apache 2.0 开源项目，我想将它包含在我的项目中。

根据[http://www.apache.org/licenses/GPL-compatibility.html](http://www.apache.org/licenses/GPL-compatibility.html) Apache 2 软件可以包含在 GPLv3 项目中，所以我的项目的 GPL3 版本是兼容的。

我可以在 MIT 和 BSD 项目中包含 Apache 2.0 代码，以便最终项目可以与三重许可证 GPL3、MIT、BSD 兼容吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-28T19:00:54.393

我找到了这个网站 [http://www.dwheeler.com/essays/floss-license-slide.html](http://www.dwheeler.com/essays/floss-license-slide.html)

这非常简单地解释了哪些代码可以在哪些项目中使用。

如我所见，我可以包含 MIT、BSD 和 Apache2.0 代码并生成我的 GPL3 项目。但我不能使用 Apache2.0 代码来生成 MIT 或 BSD 项目。

兼容性只是一种方式。因此，如果我想让我的项目获得多重许可和许可兼容，我必须在 Apache2.0/GPL3 许可下发布它。

# ios - 让 iOS 和 Mac UI 元素“摇晃”

> ID：11703616
> 
> 赞同：0
> 
> 时间：2012-07-28T18:30:53.910
> 
> 标签：ios, macos, cocoa-touch, cocoa, user-interface

我敢肯定你以前见过它；在mac上输入密码时，如果输入错误，它会震动！

我想知道的是，有没有一种方法可以使用 XCode 中的 UI 对象（在 iOS 或 Mac 平台上）。

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-28T23:29:45.597

优秀的[cimgf.com](http://www.cimgf.com)上有一个[教程](http://www.cimgf.com/2008/02/27/core-animation-tutorial-window-shake-effect/)，它描述了您想要的内容。

# objective-c - 使用 ARC 的自定义类初始值设定项 - self.name 还是 name？

> ID：11703617
> 
> 赞同：1
> 
> 时间：2012-07-28T18:30:53.920
> 
> 标签：objective-c, ios5, memory-management

使用 ARC 定义 Person 类时，

1.  我应该在初始化程序中使用**self.fullname**还是只使用**fullname**？
2.  如果我使用**全名**，传递的字符串会保留吗？
3.  如果我使用**self.fullname**我必须定义一个 setter 或一个属性？我应该使用**强**吗？

![人员类初始化器](../Images/ce031206933135cbfa10c027016b19da.png)

来自前 ARC 的思维方式，我正试图围绕 ARC 建议的变化。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-28T18:34:19.730

1.  使用 ARC，它们的行为方式相同，只是`self.fullname`会通过 setter。默认设置器将为您提供 KVO 合规性。但除此之外，没有区别。
2.  是的，如果指针被宣布为强，他们会的。
3.  要使用`self.fullname = ...`，您必须定义一个 setter。对于 NSStrings 和其他具有可变变体的类，通常建议使用`(copy)`.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-28T19:05:50.823

在初始化程序中，我建议*不要*在 上调用任何方法`self`，因为该对象处于这种不寻常的状态，它缺乏自我一致性。对于您给出的简单示例，它不会立即产生影响。但是，如果您稍后定义自己的`-setFullname:`方法来读取或写入对象的任何其他部分，那么`self.fullname =`从您的初始化程序调用将导致问题，因为该对象尚未完全形成。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-28T19:35:19.640

我认为可用的答案需要一些澄清。

## 你的问题的长答案

看看这个标题：

```
Person : NSObject {
    NSString *name; // better to call this _name to not confuse it with the property
    // and even more better to not use an ivar, but only a property
}

@property (strong) NSString *name; 
```

1.  你有一个实例变量。通常你会用下划线将你的 ivar 与属性称为相同的名称，但通常你会发现 ivar 和属性具有相同的名称。
2.  也可以*只*声明一个属性，在这种情况下，编译器会*自动*为你插入一个带下划线的 ivar！

现在重要的是要理解，和之间有一个主要区别`name = @"John Smith"`，`self.name = @"John Smith"`第一个直接设置实例变量（又名`_name = @"John Smith"`，忽略内存管理和（没有 ARC）如果前一个值不为零则创建泄漏。使用 self- dot-syntax (self.name) 使用*自动生成的访问器*（=setter 方法），它尊重所选的内存管理（通常是保留或强或复制）。

在属性之前和 ARC 之前，对象设置器看起来像这样：

```
-(void)setName:(NSString*)newName {
    if(newName != name) {
        [name release];
        name = newName;
        [newName retain];
    }
} 
```

这意味着，旧的 iVar 值被释放并保留新的 iVar 值。所有的平衡和罚款。

现在，使用 ARC 和综合访问器（属性），您不必关心所有这些。属性综合存取器，而 ARC 根据对代码的分析综合和平衡保留/释放调用。因此 ARC 和属性不一定相互要求，因为它们综合了不同的方面（例如，请注意 ivar 声明中的不同语法“__weak”和属性声明中的“（weak）”？）。但了解它过去是如何工作的很有用，因为现在您会发现两者之间存在重大差异

```
name = @"John Smith"; // directly access ivar, the old value is never released 
// your program is leaking if you're not using ARC 
```

并通过综合访问器

```
self.name = @"John Smith"; // old ivar released, new ivar set, all okay 
```

## 对您的问题的简短回答

1.  如果不需要两者，请不要使用 ivar*和属性*
2.  self.property = newValue 通过其 setter 方法设置新值
3.  ivar = newValue 直接设置新值，绕过任何setter方法
4.  如果有 setter 方法，绝对建议使用访问器并且不要直接设置 ivars（换句话说：如果你有一个属性，通过调用 self.property = newValue 来使用它的 setter）

# android - 谷歌地图KML格式的2点之间的路线

> ID：11703624
> 
> 赞同：1
> 
> 时间：2012-07-28T18:31:22.663
> 
> 标签：android, google-maps, kml, routes

我是一名 Android 应用程序开发人员。我有一个使用谷歌地图 api 的应用程序，并且正在从谷歌以 KML 格式获取 2 点之间的路线。我用[这个问题](https://stackoverflow.com/questions/2023669/j2me-android-blackberry-driving-directions-route-between-two-locations)做到了。直到 7 月 27 日星期五，一切都顺利进行。现在，谷歌没有提供 KML 文件，而是返回包含绘制路线的地图的 HTML 网页......

我的问题是有人知道我现在如何从谷歌或其他类似服务获取 KML 文件吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-28T22:46:48.670

你将不得不改变你的实现。人们过去在地图上绘制路径以指示方向的方式不是官方的。

[https://developers.google.com/maps/documentation/directions/](https://developers.google.com/maps/documentation/directions/)

# playframework-2.0 - filterMany for Play 2 返回所有结果

> ID：11703629
> 
> 赞同：7
> 
> 时间：2012-07-28T18:31:48.107
> 
> 标签：playframework-2.0, ebean

我正在使用带有 ebean 的 Play 2.0.2。

在`Info`课堂上，我定义

```
@ManyToMany(fetch=FetchType.EAGER)
private Set<MemberInfo> members;

private Date createdDate = new Date(); 
```

并`MemberInfo`有`memberId`场。

当我做

```
public static Finder<Long,Info> find 
        = new Finder<Long,Info>(Long.class, Info.class);

find.fetch("members")
    .where().filterMany("members").eq("memberId", memberId)
    .order().desc("createdDate")
    .findList(); 
```

它返回全部，`Info`而不检查`memberId`.`members`

我做错什么了？谢谢。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-07-28T20:26:44.320

`filterMany()`不按子表达式过滤父结果（两者都有单独的“范围”）。

正如[其 API 中](http://www.avaje.org/static/javadoc/pub/com/avaje/ebean/Query.html#filterMany%28java.lang.String%29)所描述的，它将找到**所有** `Info`对象并为每个对象进行过滤`members`。

[Google Groups](https://groups.google.com/forum/?fromgroups#!topic/ebean/k0cKsUI-_tg)上也有非常相似的主题，问题的作者为此提供了自己的解决方法。

检查以下之间的区别：

```
find.fetch("members")
    .where().filterMany("members").eq("memberId", 1L)
    .findList(); 
```

和

```
find.fetch("members")
    .where().eq("members.memberId", 1L)
    .findList(); 
```

# jquery - 将 Div 放在淡入淡出脚本前面

> ID：11703630
> 
> 赞同：0
> 
> 时间：2012-07-28T18:31:48.913
> 
> 标签：jquery, html

我已经实现了一个在滚动时淡化图像的脚本。

就是这个：

```
<script type="text/javascript">
        // The social div 
    var $socialDiv,
        // The social div's height 
        socialDivHeight = 500,
        currentSocialDivHeight = socialDivHeight;

    $(document).ready(function() {
        $socialDiv = $('.social');
        $socialDiv.css({
            'background-image': 'url(http://a3.sphotos.ak.fbcdn.net/hphotos-ak-prn1/563655_324264884301748_471368753_n.jpg)',
            'background-repeat': 'no-repeat',
            'background-attachment': 'fixed',
           'background-size' : '110% auto',
            'height' : socialDivHeight + 'px',
            'margin-left' : '-50%',
            'margin-right' : '-50%',
            'margin-top': '200opx',

        });
    });

    $(window).scroll(function() { 
        //Get scroll position of window 
        var windowScroll = $(this).scrollTop(); 

        var newSocialDivHeight = Math.max(0, socialDivHeight - windowScroll);

        if (Math.abs(newSocialDivHeight - currentSocialDivHeight) < 1)
            return;

        $socialDiv.css({
            'opacity' : 1 - windowScroll / 400
        });

        currentSocialDivHeight = newSocialDivHeight;
    });
</script> 
```

但是，我试图在上面放置一个 div。并且 z-index 不起作用。

我的分区：

```
<div style="position: absolute; top: 20px; left: 20px; z-index: 1;">
    <img src="http://images5.fanpop.com/image/photos/24600000/Hello-Kitty-Mving-Glittery-Dress-hello-kitty-24617449-320-310.gif" width="119" height="82" />
</div> 
```

我的网站：

[http://cargocollective.com/btatest](http://cargocollective.com/btatest)

如果你看右上角，你会看到它。

所以我的问题是；我如何把它带到前面？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-28T18:42:04.067

在页面下方，您有一个 z-index 为 10 的 div#content_container。因此，您至少需要一个 11 的 z-index 才能使其显示在顶部。

其次，问题是 div 中的图像无法加载。这意味着 div 没有高度或宽度。

# java - 在 Java 中从 XML 中去除空格和换行符

> ID：11703635
> 
> 赞同：18
> 
> 时间：2012-07-28T18:32:51.057
> 
> 标签：java, xml, newline, cdata, strip

使用 Java，我想获取以下格式的文档：

```
<tag1>
 <tag2>
    <![CDATA[  Some data ]]>
 </tag2>
</tag1> 
```

并将其转换为：

```
<tag1><tag2><![CDATA[  Some data ]]></tag2></tag1> 
```

我尝试了以下方法，但它没有给我我期望的结果：

```
DocumentBuilderFactory dbfac = DocumentBuilderFactory.newInstance();
dbfac.setIgnoringElementContentWhitespace(true);
DocumentBuilder docBuilder = dbfac.newDocumentBuilder();
Document doc = docBuilder.parse(new FileInputStream("/tmp/test.xml"));

Writer out = new StringWriter();
Transformer tf = TransformerFactory.newInstance().newTransformer();
tf.setOutputProperty(OutputKeys.INDENT, "no");
tf.transform(new DOMSource(doc), new StreamResult(out));
System.out.println(out.toString()); 
```

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-10-31T17:52:19.167

遵循@Luiggi Mendoza 问题评论中的说明的工作解决方案。

```
public static String trim(String input) {
    BufferedReader reader = new BufferedReader(new StringReader(input));
    StringBuffer result = new StringBuffer();
    try {
        String line;
        while ( (line = reader.readLine() ) != null)
            result.append(line.trim());
        return result.toString();
    } catch (IOException e) {
        throw new RuntimeException(e);
    }
} 
```

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2012-07-28T18:56:30.793

递归遍历文档。删除任何内容为空白的文本节点。修剪任何具有非空白内容的文本节点。

```
public static void trimWhitespace(Node node)
{
    NodeList children = node.getChildNodes();
    for(int i = 0; i < children.getLength(); ++i) {
        Node child = children.item(i);
        if(child.getNodeType() == Node.TEXT_NODE) {
            child.setTextContent(child.getTextContent().trim());
        }
        trimWhitespace(child);
    }
} 
```

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2013-03-17T16:06:44.083

正如[另一个问题的答案中](https://stackoverflow.com/questions/4274524/how-to-remove-the-white-spaces-bteween-tags-in-xml)所记录的那样，相关函数将是[DocumentBuilderFactory.setIgnoringElementContentWhitespace()](http://download.oracle.com/javase/1.5.0/docs/api/javax/xml/parsers/DocumentBuilderFactory.html#setIgnoringElementContentWhitespace%28boolean%29)，但是 - 正如这里已经指出的那样 - 该函数需要使用验证解析器，这需要 XML 模式或类似的。

因此，最好的办法是遍历从解析器获得的文档，并删除所有类型为 TEXT_NODE 的节点（或那些仅包含空格的 TEXT_NODE）。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2020-11-03T08:59:42.510

我支持@jtahlborn 的回答。为了完整起见，我调整了他的解决方案以完全删除仅空白元素，而不是仅仅清除它们。

```
public static void stripEmptyElements(Node node)
{
    NodeList children = node.getChildNodes();
    for(int i = 0; i < children.getLength(); ++i) {
        Node child = children.item(i);
        if(child.getNodeType() == Node.TEXT_NODE) {
            if (child.getTextContent().trim().length() == 0) {
                child.getParentNode().removeChild(child);
                i--;
            }
        }
        stripEmptyElements(child);
    }
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2019-02-13T10:12:54.603

Java8+transformer 不会创建任何内容，但 Java10+transformer 会到处放置空行。我仍然想保留一个漂亮的缩进。这是我从任何 DOMElement 实例（例如`doc.getDocumentElement()`根节点）创建 xml 字符串的辅助函数。

```
public static String createXML(Element elem) throws Exception {
        DOMSource source = new DOMSource(elem);
        StringWriter writer = new StringWriter();
        StreamResult result = new StreamResult(writer);
        TransformerFactory transformerFactory = TransformerFactory.newInstance();
        Transformer transformer = transformerFactory.newTransformer();
        transformer.setOutputProperty(OutputKeys.INDENT, "yes");
        //transformer.setOutputProperty("{http://xml.apache.org/xslt}indent-amount", "2");
        //transformer.setOutputProperty("http://www.oracle.com/xml/is-standalone", "yes");
        transformer.setOutputProperty(OutputKeys.DOCTYPE_PUBLIC,"yes");
        transformer.setOutputProperty("http://www.oracle.com/xml/is-standalone", "yes");
        transformer.transform(source, result);

        // Java10-transformer adds unecessary empty lines, remove empty lines
        BufferedReader reader = new BufferedReader(new StringReader(writer.toString()));
        StringBuilder buf = new StringBuilder();
        try {
            final String NL = System.getProperty("line.separator", "\r\n");
            String line;
            while( (line=reader.readLine())!=null ) {
                if (!line.trim().isEmpty()) {
                    buf.append(line); 
                    buf.append(NL);
                }
            }
        } finally {
            reader.close();
        }
        return buf.toString();  //writer.toString();
    } 
```

* * *

## 回答 #6

> 赞同：-4
> 
> 时间：2012-07-28T19:04:37.813

试试这个代码。FileStream 中的`read`和方法忽略空格和缩进。`write`

```
try {
    File f1 = new File("source.xml");
    File f2 = new File("destination.xml");
    InputStream in = new FileInputStream(f1);  
    OutputStream out = new FileOutputStream(f2);

    byte[] buf = new byte[1024];
    int len;
    while ((len = in.read(buf)) > 0){
    out.write(buf, 0, len);
}
in.close();
out.close();
System.out.println("File copied.");
} catch(FileNotFoundException ex){
    System.out.println(ex.getMessage() + " in the specified directory.");
    System.exit(0);
} catch(IOException e7){
    System.out.println(e7.getMessage());  
} 
```

# php - 如何让博主/wordpress/tumlr 允许用户屏蔽 url

> ID：11703637
> 
> 赞同：14
> 
> 时间：2012-07-28T18:33:02.800
> 
> 标签：php, .htaccess, mod-rewrite, cross-domain, cname

我正在创建一个`saas`应用程序。用户有自己的网址，例如**user** .mysaasapp.com

为了让用户拥有自己的 url，我使用了 mod rewrite。`http://mysaasapp.com/?user=user`类似的东西`user.mysaasapp.com`（这工作得很好）

现在，我想让用户灵活地屏蔽他们的网址。这意味着用户可以将他们的子域 (saas.theirdomain.com) 定向到 user.mysaasapp.com。我该怎么做。

我阅读了很多关于此的文章（cname），但仍然没有明确的解决方案。我想知道像 wordpress/google 这样的大公司是如何做到的。

例如[http://www.tumblr.com/docs/en/custom_domains](http://www.tumblr.com/docs/en/custom_domains)

例如[http://developer.uservoice.com/docs/site/domain-aliasing/](http://developer.uservoice.com/docs/site/domain-aliasing/)

我意识到公司会采取这个过程：

1.  让用户添加 cname
2.  让用户在 saas 应用程序中输入他们的域（可能在自定义域下）

我需要什么才能让这个工作？谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-06T11:58:23.297

如果我是对的，您可以在其中使用通配符`ServerAlias`并使用 mod_rewrite 您可以将其重写为正确的文件，这样您的虚拟主机就会像

```
<VirtualHost *:80>
    ServerName mysaasapp.com
    ServerAlias *.mysaasapp.com
    DocumentRoot /var/www/user
</VirtualHost> 
```

你的 CNAME 就像

`*.mysaasapp.com IN CNAME mysaasapp.com`

我希望这有帮助

**编辑：**

将虚拟主机更改为

```
<VirtualHost *:80>
    ServerName mysaasapp.com
    ServerAlias *.mysaasapp.com
    DocumentRoot [STANDARDFOLDER]
</VirtualHost> 
```

并替换`[STANDARDFOLDER]`为`DocumentRoot`mysaasapp.com 的

并在您`index.php`的顶部：

```
// Array with all the subdomains who doesn't belong to users
$_notUsers = array("www");
// No code without a Boom,
$_domainParts = explode('.',$_SERVER[HTTP_HOST],-2);
// Check if subdomain is legit
if(!in_array($_domainParts[0],$_notUsers) && !empty($_domainParts)){
    // get the real subdomain structure
    $_sub = str_replace('.mysaasapp.com','',$_SERVER['HTTP_HOST']);
    // Don't look at this it's horrible :'( but this makes it think that there is 
    // something in user 
    $_GET['user'] = $_sub;
    // I dont know where you want it in the question its index.php and in comment its 
    // user.php so change this as you want it
    include 'user.php';
    // Exit so we dont have an user page and homepage together but only when
    // using user.php comment this out when using index.php
    exit;
// end
} 
```

这是一个非常肮脏的解决方案，我希望它现在对你有用

**更新：**

起初我不知道你也想从自定义域重定向，

然后他们必须将 CNAME 添加到他们的 DNS 服务器/管理器

```
theirdomain.com IN CNAME thierusername.mysaasapp.com 
```

如果您的 DNS 记录是这样的，那么所有子域都将转到您的 apache，它是否应该使用我给您的代码和 Vhost

**更新 2：**

lanzz 刚刚指出了一些我忘记的东西（facepalm），我正在检查 HOST 标头这是没有意义的，因为它会有，`customdomain.com`所以你需要向你的用户询问他们的域（如果你没有共享 IP，让他们用 CNAME 指向，如果你没有共享 IP，您可以让他们使用 A 记录指向您的 IP）并从 HTTP_HOST 查找域，然后在您的数据库中搜索它应该可以工作！

一点点编辑的代码：

```
//first look if you're on your own domain,
// also again an Array with all the subdomains who doesn't belong to users
$_notUsers = array("www");
//lets explode the domain 
$_domainParts = explode(".",$_SERVER["HTTP_HOST"]);
//get length of $_domainParts
$_domainPartsLength = count($_domainParts);
//get last two parts (little bit ugly but there are uglier ways)
$_currentDomain = $_domainParts[$_domainPartsLength-1] . "." . $_domainParts[$_domainPartsLength-2];
//time to check if it's yours and if it's legit
if($_currentDomain == "mysaasapp.com"){
    if(!in_array($_domainParts[0],$_notUsers) && !empty($_domainParts)){
        // get the real subdomain structure
        $_sub = str_replace('.mysaasapp.com','',$_SERVER['HTTP_HOST']);
        // Don't look at this it's horrible :'( but this makes it think that there is 
        // something in user 
        $_GET['user'] = $_sub;
        // I dont know where you want it in the question its index.php and in comment 
        // its user.php so change this as you want it
        include 'user.php';
        // Exit so we dont have an user page and homepage together but only when
        // using user.php comment this out when using index.php
        exit;
    }
    // here is your standard index (sorry for the odd placing)
}else{
    //now here are we gonna play with the custom domain
    // this function should return the username if the hostname is found in the
    // database other wise it should return false
    $_user = userGetByDomain($_SERVER["HTTP_HOST"]);
    if($_user === false){
        // tell the browser its not legit
        header("Status: 404 Not Found");
        //show your 404 page
        include '404.php';
        // and die
        exit;
    }
    // now we know everything is okay we are gonna do the same thing as above
    $_GET['user'] = $_user;
    // I dont know where you want it in the question its index.php and in comment 
    // its user.php so change this as you want it
    include 'user.php';
    // Exit so we dont have an user page and homepage together but only when
    // using user.php comment this out when using index.php
    exit;
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-02T15:44:55.960

由于您要处理站点上抛出的任何主机名，因此您需要将站点放在主虚拟主机中（[配置中首先出现的](http://httpd.apache.org/docs/2.2/vhosts/examples.html#default)主机）。主虚拟主机将处理没有为其主机名定义特定虚拟主机的主机名的所有请求。

在您的代码中，您应该检查`$_SERVER['HTTP_HOST']`并从中确定相关用户。您将需要处理四种不同的情况：

1.  该请求针对您的主域（或`www.yourmaindomain`），在这种情况下，您没有相关用户
2.  该请求是针对您主域上的子域（例如`foouser.yourmaindomain`），那么您知道该请求是针对`foouser`
3.  该请求不是针对上述任何一项，但您已将用户配置为使用该主机名。您将需要在代码中维护这些域到用户的分配，这超出了本问题的范围。
4.  该请求不是针对上述任何一项；有人错误地将主机名指向了您的 IP，或者指向了错误的主机名，或者该主机名尚未分配给用户，或者有人出于任何原因在您的 IP 上访问了错误的主机名。对于这种情况，您将需要显示某种未找到的页面。

@EaterOfCorpses 的解决方案似乎假设您将能够确定用户记录指向*的主机名；*`CNAME`这很少是真的，并且在很大程度上取决于用户的浏览器（即浏览器需要包含`Host: <CNAME target>`而不是包含`Host: <original hostname>`在 HTTP 请求中，但浏览器会提供 URL 中使用的原始主机名，这仍然是用户的自定义域，而不是`username.yourdomain`指向根据`CNAME`记录）。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-31T15:02:57.963

在您的客户端创建 cname 后，您需要让 Apache 知道以侦听它。

因此，如果您有一个非常简单的虚拟主机设置，就像这样

```
<VirtualHost *:80>
    ServerName user.mysaasapp.com
    DocumentRoot /var/www/user
</VirtualHost> 
```

你客户的 cname 是这样的

```
customdomain.com        IN      CNAME  user.mysaasapp.com 
```

您需要将 customdomain.com 添加到您的虚拟主机条目中，因此它变为

```
<VirtualHost *:80>
    ServerName user.mysaasapp.com
    ServerAlias customdomain.com
    DocumentRoot /var/www/user
</VirtualHost> 
```

我在这里做了一些假设，但这就是我过去的做法，当然不包括任何拼写错误。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-06T19:20:18.443

假设您使用的是 Apache httpd（基于 mod_rewrite 的提及），您将使用以下 httpd 配置（来自[http://httpd.apache.org/docs/2.2/vhosts/mass.html#simple](http://httpd.apache.org/docs/2.2/vhosts/mass.html#simple)）：

httpd.conf 的简单动态虚拟主机示例

```
# get the server name from the Host: header
UseCanonicalName Off

# this log format can be split per-virtual-host based on the first field
LogFormat "%V %h %l %u %t \"%r\" %s %b" vcommon
CustomLog logs/access_log vcommon

# include the server name in the filenames used to satisfy requests
VirtualDocumentRoot /www/hosts/%0/docs
VirtualScriptAlias /www/hosts/%0/cgi-bin 
```

然后，您将需要您的“saas 应用程序”将其 CNAME“saas.theirdomain.com”链接（以符号方式或其他方式）作为如下目录：“/www/hosts/saas.theirdomain.com/docs”基于示例以上。

例如

```
ln -s /www/mysaasapp/user /www/hosts/saas.theirdomain.com 
```

/www/mysaasapp/user 是您的 saas 应用程序所在的位置。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-05T09:27:50.483

如果您的用户为您的服务使用默认端口，那么您无需担心任何事情。只需告诉您的用户更改 DNS 管理器中的 CNAME（别名）和 A（主机）设置。

> @ --> 将指向 DOMAIN_NAME （如果他们想将 theirdomain.com 屏蔽到您的服务中）。
> 
> saas --> 将指向 user.mysaasapp.com（如果他们想将 saas.theirdomain.com 屏蔽为您的服务）。

如果您让他们使用特定端口使用您的特定服务，那么您可以将其添加到您的 VirtualHost 设置中

```
<VirtualHost *:[[PORT_NUMBER]]>    // set to 80 if no special ports required.
ServerName mysaasapp.com
ServerAlias user.mysaasapp.com    // Change [[user]] to custom user's alias.
DocumentRoot USER_FOLDER 
</VirtualHost> 
```

我希望这能解决你的问题。

# web-services - Glassfish - JMS 请求/响应 - 消息不在队列中

> ID：11703638
> 
> 赞同：1
> 
> 时间：2012-07-28T18:33:14.003
> 
> 标签：web-services, glassfish, jms, openmq

我正在尝试使用包含的 OpenMQ JMS 队列在 Glassfish 3.1.2 中实现 Web 服务，该队列使用临时排队响应来实现同步 JMS 请求响应。它发送一条消息，该消息由远程客户端作业（在容器外运行）从主队列中提取，并在临时队列上接收响应。

在基本的 Java POC 中，这是可行的。但是一旦我将服务器端代码放入容器中，它就不起作用了。

我关闭了工作，以便消息只会进入队列而不被拾取，然后我使用 QBrowser 跟随队列。

如果我只是从生产者那里发送消息，**它就会进入队列并且可以被作业读取。**

但是，一旦我添加了代码来接收（）响应，**队列上的消息就无法读取。**QBrowser 说队列中有 1 条消息，但它被标记为 UnAck 并且队列显示为空（例如消息不可读）。

connectionFactory 和 requestQueue 作为 glassfish 的 @Resource 注入。主队列在 glassfish 中定义。

Web服务内部：

```
connection = connectionFactory .createConnection();
connection.start();

session = connection.createSession(false, Session.AUTO_ACKNOWLEDGE);

MessageProducer producer = session.createProducer(requestQueue);
producer.setDeliveryMode(DeliveryMode.NON_PERSISTENT);

MyObject myObj=new MyObject();
Message message=session.createObjectMessage(myObj);

TemporaryQueue responseQueue = session.createTemporaryQueue();
MessageConsumer consumer = session.createConsumer(responseQueue);

message.setJMSReplyTo(responseQueue);

producer.send(message);

//if I comment out the next line, the message appears on the queue. If I leave it in, it will behave as described above.
Message response=consumer.receive(); 
```

我尝试了各种方法，包括单独的连接和会话以及异步消费者，并为生产者尝试了一个 Transacted 会话，但在尝试提交时只得到了堆栈跟踪。

为了让这个正确进入队列，我错过了什么？

提前致谢！

编辑： ConnectionFactory 和队列的 Domain.xml 参考：

```
<connector-connection-pool description="Connection factory for job processing" name="jms/MyJobs" 
    resource-adapter-name="jmsra" connection-definition-name="javax.jms.ConnectionFactory" 
    transaction-support=""></connector-connection-pool>
<connector-resource pool-name="jms/MyJobs" jndi-name="jms/MyJobs"></connector-resource>
<admin-object-resource res-adapter="jmsra" res-type="javax.jms.Queue"
   description="Queue to request a job process" jndi-name="jms/MyJobRequest">
   <property name="Name" value="MyJobRequest"></property>
</admin-object-resource>

[...]

  <resource-ref ref="jms/MyJobs"></resource-ref>
  <resource-ref ref="jms/MyJobRequest"></resource-ref> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-08T14:53:15.193

原来是交易问题。

通过添加一个新方法来解决它：

```
@Transactional(propagation = Propagation.REQUIRED, rollbackFor = Throwable.class) 
private void sendMessage(MessageProducer producer, Message message) throws Exception{   
         producer.send(message); 
} 
```

# c++ - 我可以假设分配器不直接持有他们的内存池（因此可以被复制）吗？

> ID：11703643
> 
> 赞同：9
> 
> 时间：2012-07-28T18:34:02.847
> 
> 标签：c++, c++11, allocator, stateful

我正在编写一个容器，并希望允许用户使用自定义分配器，但我不知道是否应该通过引用或值传递分配器。

是否可以保证（或至少是一个合理的假设）分配器对象*不会*直接包含其内存池，因此可以复制分配器并期望分配器的内存池是交叉兼容的？还是我总是需要通过引用传递分配器？

（我发现通过引用传递对性能的影响大于 2，因为编译器开始担心别名，所以它决定了我是否可以依赖这个假设。）

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-07-28T18:38:31.060

旧的 C++ 标准对符合标准的分配器提出了要求：这些要求包括，如果您有`Alloc<T> a, b`，则`a == b`，并且您可以`b`使用`a`. 分配器基本上是*无状态*的。

* * *

在 C++11 中，情况变得更加复杂，因为现在支持*有状态*分配器。当您复制和移动对象时，如果分配器不同，是否可以从另一个容器复制或移动一个容器，以及如何复制或移动分配器，都有特定的规则。

先回答你的问题：不，你绝对*不能*假设复制你的分配器是有意义的，你的分配器甚至可能不可复制。

这是关于这个主题的 23.2.1/7：

> 除非另有说明，本节中定义的所有容器都使用分配器获取内存（见 17.6.3.5）。`allocator_traits<allocator_-type>::select_on_container_copy_construction`这些容器类型的复制构造函数通过调用它们的第一个参数来获取分配器。移动构造函数通过移动构造从属于被移动容器的分配器中获取分配器。分配器的这种移动构造不应通过异常退出。这些容器类型的所有其他构造函数都采用`Allocator&`参数（17.6.3.5），一个分配器，其值类型与容器的值类型相同。[注意：如果构造函数的调用使用可选分配器参数的默认值，则分配器类型必须支持值初始化。—end note] 在每个容器对象的生命周期内或直到分配器被替换之前，此分配器的副本用于由这些构造函数和所有成员函数执行的任何内存分配。分配器只能通过 assignment 或 swap() 替换。只有当 `allocator_traits<allocator_type>::propagate_on_container_copy_assignment::value`, `allocator_traits<allocator_type>::propagate_on_container_move_assignment::value`, 或`allocator_traits<allocator_type>::propagate_on_container_swap::value`在执行相应的容器操作时为真。`allocator_traits<allocator_type>::propagate_on_container_swap::value`除非被交换的对象具有比较相等或为真的分配器，否则调用容器的交换函数的行为是未定义的。在本条款中定义的所有容器类型中，成员`get_allocator()`返回用于构造容器的分配器的副本，或者，如果该分配器已被替换，则返回最近替换的副本。

另请参见[`std::allocator_traits`](http://en.cppreference.com/w/cpp/memory/allocator_traits)概要的文档。

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2012-07-28T19:06:11.193

在 C++11 第 17.6.3.5 节分配器要求 [allocator.requirements] 中指定了符合分配器的要求。其中的要求是：

```
X                    an Allocator class for type T
...
a, a1, a2            values of type X&
...
a1 == a2             bool          returns true only if storage
                                   allocated from each can be
                                   deallocated via the other.
                                   operator== shall be reflexive,
                                   symmetric, and transitive, and
                                   shall not exit via an exception.
...
X a1(a);                           Shall not exit via an exception.
                                   post: a1 == a 
```

即，当您复制分配器时，需要两个副本才能删除彼此的指针。

可以想象，可以将内部缓冲区放入分配器，但副本必须保留其他缓冲区的列表。或者，分配器可能有一个不变量，即解除分配始终是无操作的，因为指针始终来自内部缓冲区（来自您自己的缓冲区或来自其他副本）。

但无论采用何种方案，副本都必须是“交叉兼容的”。

**更新**

这是一个符合 C++11 的分配器，它执行“短字符串优化”。为了使其符合 C++11，我必须将“内部”缓冲区放在分配器外部，以便副本相等：

```
#include <cstddef>

template <std::size_t N>
class arena
{
    static const std::size_t alignment = 16;
    alignas(alignment) char buf_[N];
    char* ptr_;

    std::size_t 
    align_up(std::size_t n) {return n + (alignment-1) & ~(alignment-1);}

public:
    arena() : ptr_(buf_) {}
    arena(const arena&) = delete;
    arena& operator=(const arena&) = delete;

    char* allocate(std::size_t n)
    {
        n = align_up(n);
        if (buf_ + N - ptr_ >= n)
        {
            char* r = ptr_;
            ptr_ += n;
            return r;
        }
        return static_cast<char*>(::operator new(n));
    }
    void deallocate(char* p, std::size_t n)
    {
        n = align_up(n);
        if (buf_ <= p && p < buf_ + N)
        {
            if (p + n == ptr_)
                ptr_ = p;
        }
        else
            ::operator delete(p);
    }
};

template <class T, std::size_t N>
class stack_allocator
{
    arena<N>& a_;
public:
    typedef T value_type;

public:
    template <class U> struct rebind {typedef stack_allocator<U, N> other;};

    explicit stack_allocator(arena<N>& a) : a_(a) {}
    template <class U>
        stack_allocator(const stack_allocator<U, N>& a)
            : a_(a.a_) {}
    stack_allocator(const stack_allocator&) = default;
    stack_allocator& operator=(const stack_allocator&) = delete;

    T* allocate(std::size_t n)
    {
        return reinterpret_cast<T*>(a_.allocate(n*sizeof(T)));
    }
    void deallocate(T* p, std::size_t n)
    {
        a_.deallocate(reinterpret_cast<char*>(p), n*sizeof(T));
    }

    template <class T1, std::size_t N1, class U, std::size_t M>
    friend
    bool
    operator==(const stack_allocator<T1, N1>& x, const stack_allocator<U, M>& y);

    template <class U, std::size_t M> friend class stack_allocator;
};

template <class T, std::size_t N, class U, std::size_t M>
bool
operator==(const stack_allocator<T, N>& x, const stack_allocator<U, M>& y)
{
    return N == M && &x.a_ == &y.a_;
}

template <class T, std::size_t N, class U, std::size_t M>
bool
operator!=(const stack_allocator<T, N>& x, const stack_allocator<U, M>& y)
{
    return !(x == y);
} 
```

它可以这样使用：

```
#include <vector>

template <class T, std::size_t N> using A = stack_allocator<T, N>;
template <class T, std::size_t N> using Vector = std::vector<T, stack_allocator<T, N>>;

int main()
{
    const std::size_t N = 1024;
    arena<N> a;
    Vector<int, N> v{A<int, N>(a)};
    v.reserve(100);
    for (int i = 0; i < 100; ++i)
        v.push_back(i);
    Vector<int, N> v2 = std::move(v);
    v = v2;
} 
```

上述问题的所有分配都是从`arena`大小为 1 Kb 的本地中提取的。您应该能够通过值或引用传递此分配器。

# android - 为什么 UtteranceProgressListener 不是接口？

> ID：11703653
> 
> 赞同：5
> 
> 时间：2012-07-28T18:35:59.917
> 
> 标签：android, text-to-speech

我正在使用 Android 的 TTS 功能，TextToSpeech 类有这个方法来设置一个监听器，一旦 TextToSpeech 完成播放就会得到通知：

```
public int setOnUtteranceCompletedListener(TextToSpeech.OnUtteranceCompletedListener listener) 
```

但是`OnUtteranceCompletedListener`被定义为`public abstract class`。由于我`MainActivity`已经扩展了 Activity，它也不能扩展`OnUtteranceCompletedListener`。我可以将旧方法与 a 一起使用`OnUtteranceCompletedListener`，但这已被弃用：

```
public int setOnUtteranceCompletedListener (TextToSpeech.OnUtteranceCompletedListener listener)` 
```

为什么`OnUtteranceCompletedListener`不定义为`public static interface`？我正在考虑编写自己`UtteranceProgressListenerImpl`的 s 方法，然后调用`MainActivity`s`onDone`方法。这是正确的方法还是有更好/更清洁的选择？

```
private class UtteranceProgressListenerImpl extends UtteranceProgressListener {

    private MainActivity mainActivity;

    UtteranceProgressListenerImpl(MainActivity mA) {
        mainActivity = mA;
    }

    @Override
    public void onDone(String utteranceId) {
        mainActivity.onDone(utteranceId);
    }

    @Override
    public void onError(String utteranceId) { /* empty */ }

    @Override
    public void onStart(String utteranceId) { /* empty */ }

} 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-07-29T17:50:07.493

我不知道我认为它也应该是一个界面。我使用此代码来解决它。它也可以[在这里](https://github.com/gast-lib/gast-lib/blob/master/library/src/root/gast/speech/voiceaction/VoiceActionExecutor.java)使用。

另外，为我不久前提交的[这个错误](http://code.google.com/p/android/issues/detail?id=23808)投票。

```
public void setTts(TextToSpeech tts)
    {
        this.tts = tts;
        if (Build.VERSION.SDK_INT >= 15)
        {
            tts.setOnUtteranceProgressListener(new UtteranceProgressListener()
            {
                @Override
                public void onDone(String utteranceId)
                {
                    onDoneSpeaking(utteranceId);
                }

                @Override
                public void onError(String utteranceId)
                {
                }

                @Override
                public void onStart(String utteranceId)
                {
                }
            });
        }
        else
        {
            Log.d(TAG, "set utternace completed listener");
            tts.setOnUtteranceCompletedListener(new OnUtteranceCompletedListener()
            {
                @Override
                public void onUtteranceCompleted(String utteranceId)
                {
                    onDoneSpeaking(utteranceId);
                }
            });
        }
    } 
```

# vim - 无法使用 clang_snippets=1 的参数隐藏 <# 和 #> 和 clang_complete

> ID：11703654
> 
> 赞同：2
> 
> 时间：2012-07-28T18:36:02.910
> 
> 标签：vim, autocomplete, macvim, clang-complete

我在我的 .vimrc 上设置了这个：

```
let g:clang_snippets=1
let g:clang_snippets_engine='clang_complete'
let g:clang_conceal_snippets=1
set conceallevel=2 concealcursor=inv 
```

我不知道隐藏是如何工作的，也许 clang_complete 的文档应该有一个关于隐藏片段装饰的特定设置的提示。

我该如何隐藏它？我正在使用用 构建的 MacVim `+conceal`，但它不起作用。[这是我现在凌乱的.vimrc](https://gist.github.com/3194336)。

注意：我坚持使用`g:clang_snippets_engine='clang_complete'`它是因为它似乎比 snipMate 参数完成更智能，切换到 NORMAL 模式是在参数之间导航的更明智选择，因为我可以在 INSERT 模式下对参数使用 SuperTab 完成，同时能够导航它们在正常模式下使用相同的选项卡。snipMate 引擎有时对我来说也很奇怪，有时它在完成后切换到一个参数，有时不是。

另外，我在函数调用之后（snipMate 执行此操作）之后缺少最后一个选项卡来跟踪最后一个参数，所以我可以插入`;`并点击`Enter`.

免责声明：这个问题与[https://github.com/Rip-Rip/clang_complete/issues/176](https://github.com/Rip-Rip/clang_complete/issues/176)上的问题有关。

**编辑：**

我的问题是我的 .vimrc 中的这一行：

```
au BufNewFile,BufRead *.cpp set syntax=cpp11 
```

我正在使用[C++11 语法支持](http://www.vim.org/scripts/script.php?script_id=3797)，@xaizek 发现并指出它是已接受响应中下面评论中的问题，似乎根本原因是其中使用了`syntax clear`命令。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-28T20:00:54.303

根据`:help 'concealcursor'`：

```
Sets the modes in which text in the cursor line can also be concealed.
When the current mode is listed then concealing happens just like in
other lines.
  n     Normal mode
  v     Visual mode
  i     Insert mode
  c     Command line editing, for 'incsearch' 
```

因此，`concealcursor=iv`您要求 Vim 在插入和可视模式下隐藏隐藏的文本，但在正常模式下显示。所以就这样做：

```
:set concealcursor=inv 
```

# firefox - Firefox Add-on SDK 在首次运行时打开选项卡

> ID：11703655
> 
> 赞同：1
> 
> 时间：2012-07-28T18:36:18.370
> 
> 标签：firefox, firefox-addon, firefox-addon-sdk

我正在使用 Firefox Add-on SDK，并且我试图在我的 Firefox 扩展第一次安装后立即打开一个选项卡。下面的代码在我的 main.js 中，但它似乎不起作用。有小费吗？

主.js：

```
var ss = require("simple-storage");
var tabs = require('tabs');

if (typeof(ss.storage.firstRun) === undefined) {
    ss.storage.firstRun = false;
    alert('First run');
    tabs.open("http://www.google.com"); 
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-28T19:25:12.913

尝试使用加载安装原因：[https ://addons.mozilla.org/en-US/developers/docs/sdk/latest/dev-guide/tutorials/load-and-unload.html](https://addons.mozilla.org/en-US/developers/docs/sdk/latest/dev-guide/tutorials/load-and-unload.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-30T07:57:09.130

您的方法是正确的，但`typeof`运算符为您提供了一个字符串，因此您必须将其与字符串进行比较：

```
if (typeof ss.storage.firstRun == "undefined") { 
```

这样它应该可以工作。

# ios - iOS：在第二个视图控制器中嵌套数组 - 使用对象？

> ID：11703656
> 
> 赞同：0
> 
> 时间：2012-07-28T18:36:21.990
> 
> 标签：ios, object, delegates, multidimensional-array

在我的应用程序中，创建了一个 NSArray 来存储库搜索的各种结果。这个想法是每个 NSArray 的结果也应该存储在本地，这样如果将来再次进行搜索，就会检索到本地结果。

现在，我一直在考虑两种不同的方法。第一种是在第二个视图控制器中简单地创建一个数组，用于存储不同的结果数组。第二种方法是创建一个名为 Search 的类（例如），它有一个 NSArray 属性来存储结果。该对象将在第二个视图控制器中启动（然后将其添加到自己的数组中）。

这有意义吗？在内存管理方面一个比另一个好？另外，我需要使用委托函数将数据传递到第二个视图控制器，对吧？谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-28T20:54:46.660

个人觉得差别不大。要澄清第二个选项，请创建一个单例对象，您的 Search 类可让任何客户端类（视图控制器）使用该对象。该单例提供了一个存储函数和一个检索最后一个结果函数。

您可以通过只使用类本身来使这更简单——类方法来存储和检索，然后该类使用静态 NSMutableArray（或 NSArray）来保存对象。

如果你想让这个数组在重启后可用，那么使用 NSUserDefaults。如果您的数组中的内容无法保存为默认值（某些对象不能），您可以将数组转换为 NSData 对象并将其存储（如果所有对象都符合 NSCoding，则您的状态良好。

# windows-8 - ListView 在 WinJS 中绑定到具有分组功能的存储文件

> ID：11703659
> 
> 赞同：0
> 
> 时间：2012-07-28T18:37:10.417
> 
> 标签：windows-8, winjs

我想使用 WinJS 在我的 Windows 8 Metro 应用程序中复制音乐应用程序的歌曲视图。

我正在使用 StorageDataSource 从列表视图中的音乐库中加载文件。这很好用，现在我想按某些属性（例如：专辑）对音乐文件进行分组。

StorageDataSource 不支持分组，所以我正在寻找有关如何进行此操作的提示。它必须高效，因为用户可以在库中拥有许多项目，但我不需要它在添加/删除新文件时自动更新（尽管它会很好）。

我目前的理解是我需要构建 2 个自定义数据源：

1.  一个或 ListView 的 itemDataSource，并且是 StorageDataSource 的包装器。例如：getItemsFromIndex 实现在底层数据源中查询其包装在文字中的项目。我不能只设置 StorageDataSource，因为它的对象是不可变的。

2.  一个用于 listView 的 groupDataSource。当应用程序加载时，我手动构建它一次，通过迭代我的第一个 StorageDataSource 并确定我有多少组，以及每个组从 itemDataSource 索引开始的位置。

它有效，但我想知道是否有更好的方法。在 ListLayout 中设置组似乎也是不可能的，它会强制项目水平显示。

有没有人有关于这里需要什么的高级视图的提示？谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-28T23:01:22.727

首先，如果您使用不支持分组的列表布局，您是正确的；它仅在网格布局中受支持。您可以选择使用自定义项模板呈现功能为您可以根据需要设置样式的组插入假数据项。

你的其他东西需要一些学习，我建议你看一下 ListView 示例，以真正了解数据源 API 的来龙去脉。

一种选择是让 ListView 通过提供 computerDataSourceGroups 函数为您计算它们：http: [//msdn.microsoft.com/en-us/library/windows/apps/hh700578.aspx](http://msdn.microsoft.com/en-us/library/windows/apps/hh700578.aspx)

另一种选择是 StorageDataSource 源适合您查看；将分组添加到此作为原始数据源实际上可能是您最有效和可维护的解决方案。它有望让您继续利用列表视图的虚拟化，而不会导致数据源被虚拟化。您应该在 VS 的 ui.js 中的引用节点中找到源代码。

# python - 对python脚本的ajax请求

> ID：11703660
> 
> 赞同：1
> 
> 时间：2012-07-28T18:37:11.773
> 
> 标签：python, ajax, cgi

我刚刚测试了我制作的脚本。它在 python 中。我使用 ajax 发送请求并尝试获取结果。

```
function ajaxFunction(){
    var ajaxRequest;
    var e = document.getElementById("ktype");
    var ktype = e.options[e.selectedIndex].value;
    var acookie = document.getElementById("acookie").value;
alert (ktype +"\n" + acookie);
    try{
        ajaxRequest = new XMLHttpRequest();
    } catch (e){
        try{
            ajaxRequest = new ActiveXObject("Msxml2.XMLHTTP");
        } catch (e) {
            try{
                ajaxRequest = new ActiveXObject("Microsoft.XMLHTTP");
            } catch (e){
                return false;
            }
        }
    }
    ajaxRequest.onreadystatechange = function(){
        if (ajaxRequest.readyState < 4){
            document.getElementById("resp").innerHTML = "<center><img src='loading.gif' style='max-width:60px; max-height:60px;'></center>";
        }
        if(ajaxRequest.readyState == 4){
            document.getElementById("resp").innerHTML = ajaxRequest.responseText;
        }
    }
ajaxRequest.open("POST", "kindle.py", true);
ajaxRequest.setRequestHeader("Content-type","application/x-www-form-urlencoded");
ajaxRequest.send("amzcookie=" + acookie + "&ktype=" + ktype);
} 
```

python脚本使用CGI。没有像 django 这样的 web 框架。

当我执行此请求时，它只会打印 python 文件的内容。不执行任何代码。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-28T19:03:50.850

你应该使用`JQuery`它......而不是写你自己的`Ajax`请求，它可以写成一行：

```
$.post('link-to-my-python-script',{data},
          function(answer){
                      // process your request here ..
                  }); 
```

你可以在这里阅读更多相关信息：[JqueryPost](http://api.jquery.com/jQuery.post/)

# sql-server - 将 Hub 和 Spoke 模型与服务器和客户端上的 SQL Server Express 同步

> ID：11703665
> 
> 赞同：0
> 
> 时间：2012-07-28T18:38:04.610
> 
> 标签：sql-server, wcf, sql-server-2008, synchronization, wcf-data-services

我一直在研究如何将客户端 SQL Server Express 同步到中央 SQL Server Express。起初我查看了复制，但唯一的问题是如果中央服务器是 SQL Server 2008 Express，则不支持复制。

我必须找到另一个解决方案；我查看了带有 WCF 的同步框架。起初它看起来很有希望，但我研究得越多，我就越意识到文档非常差，而且没有使用 Visual Studio 2010 项目将 SQL Server 2008 同步到 SQL Server 2008 的示例。我确实在博客上找到了一些示例，但始终无法让它们发挥作用。我得出的结论是，由于缺乏对产品的支持和示例，同步框架不是可行的方法。

我现在正在研究一个需要大量编码和测试的定制解决方案。

我只是想知道是否有人必须将生产服务器 SQL Server Express 与也运行 SQL Server Express 的客户端同步。你是如何做到这一点的，你使用了什么技术？

我被卡住了，任何帮助将不胜感激。

谢谢你

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-30T14:02:35.537

如果您指的是 VS Local Database Cache 项目项，是的，它不支持 SQL Express 作为客户端。

如果您愿意提供代码，文档有教程，请参阅：[教程：同步 SQL Server 和 SQL Express](http://msdn.microsoft.com/en-us/library/ff928700)

您可以查看的其他示例： [数据库同步：SQL Server 和 SQL Express 2-Tier](http://code.msdn.microsoft.com/Database-SyncSQL-Server-a9752fac)

[数据库同步：SQL Server 和 SQL Express N-Tier with WCF](http://code.msdn.microsoft.com/Database-SyncSQL-Server-e97d1208)

# ios - 在两个视图控制器之间传递数据

> ID：11703666
> 
> 赞同：1
> 
> 时间：2012-07-28T18:38:05.830
> 
> 标签：ios, objective-c, iphone, cocoa-touch, uiviewcontroller

我有两个视图控制器，称为 DataPass 和 ViewController。我想将数据从 DataPass 传递到 ViewController。我在 ViewController 中有一个标签，在我的 ViewController 中有一个 UIButton，它将自行关闭，并且在关闭时会将数据传递给 DataPass 中的标签。

我做不到。请帮忙。这是我的代码：

视图控制器.h

```
@interface ViewController : UIViewController
- (IBAction)sayfaGec:(id)sender;
@property (retain, nonatomic) IBOutlet UILabel *label;
+(ViewController *)hop; 
```

视图控制器.m

```
+(ViewController *)hop{
    static ViewController *myInstance = nil;
    if (myInstance == nil){
        myInstance = [[[self class]alloc]init];
        myInstance.label.text = @"test";
    }
    return myInstance;
} 
```

数据通行证

```
- (IBAction)sayfaKapat:(id)sender; 
```

数据通行证

```
- (IBAction)sayfaKapat:(id)sender {
    [ViewController hop].label.text = @"ddsg";
    [self dismissModalViewControllerAnimated:YES];
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-28T18:55:03.683

```
ViewController.h

- (void)setLabelData:(NSString:)aString;

ViewController.m

- (void)setLabelData:(NSString:)aString{
    [yourLabel setText:aString];
} 
```

在您的 DataPass 中，您说：

```
ViewController *vContr = [[ViewController aloc]init];
[vContr setLabelData: @"asta la vista baby!"];
[self.view addSubview:vContr.view]; 
```

# jquery-mobile - PhoneGap (Cordova)，使用 Sencha Touch 2 还是 jQuery Mobile？

> ID：11703667
> 
> 赞同：5
> 
> 时间：2012-07-28T18:38:11.693
> 
> 标签：jquery-mobile, cordova, sencha-touch-2, cordova-2.0.0

过去我使用过 PhoneGap (1.x) 和 Sencha Touch 1.x，因为那是当时最好的组合。虽然我比任何 ExtJS 库都更喜欢 jQuery。但当时 jQuery Mobile 确实有问题。页面转换导致 Android 设备上出现白色闪烁。响应能力不如 Sencha Touch 1 (ST1)。尽管 ST1 也有它的怪癖，但它绝对是最好的选择。

但目前 PhoneGap 是第 2 版，Sencha Touch 也是如此。但就像我说的，我更喜欢 jQuery。所以我实际上想知道这些天 jQuery Mobile 是否还不错。从一页滑到另一页时，它是否仍然显示很多闪烁？还是有其他什么毛病？

还是我仍然应该选择 Sencha Touch（在这种情况下是第 2 版）？

我希望我可以通过这篇文章中的答案来缩短测试这两种产品的时间。这就是我要问的原因。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-30T06:48:08.517

这实际上**取决于**您要创建应用程序的**平台。**

如果假设你想构建一个 iOS 应用程序，那么你应该选择 Phonegap + sencha，因为 sencha 使它看起来像一个真正的原生应用程序。它适用于 iPhone。但是，如果您想在 Android 中移植相同的应用程序。那么它是一个错误。由于硬件规格低，它在android中非常慢。虽然它在 HTC one x 和 S3 中更好一些，因为它们有很好的规格。

我会**推荐****Jquery Mobile** ，因为这些年来它得到了改进。虽然它的外观和感觉不如 Sencha 好，但它在我测试的几乎所有平台（Android 2.x 及更高版本、Iphone、BB 5.x 及更高版本）上都运行良好。

JQM 相对于 Sencha 的优势之一是可以自定义 Jquery 移动脚本，然后将其导入您的应用程序。它可以根据您的需要缩小。更多信息请看这里[http://jquerymobile.com/download-builder/](http://jquerymobile.com/download-builder/) 所以 JQM 将比 sencha 更轻量级。

这是我所有的个人经历。希望对你有帮助

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-01T16:12:17.670

@Coder_sLaY：Sencha 有 SDKTools 和一个 Visual IDE，不仅可以创建应用程序构建，还可以创建原生 android/ios 构建。Sencha 可以像 jQuery mobile 一样精简。

因此可以自定义 Sencha 移动脚本，包括外部脚本，然后将代码缩小以准备生产，从 Sencha touch 中删除所有未使用的类。

如果您要查看 Sencha 路线，请转到 API 文档并查看指南和视频，因为有很多更改使编码更容易，包括新的数据包，这简直太棒了！

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-29T13:27:03.103

该闪烁问题已在最新版本的 Jquery Mobile 中得到解决。

[http://jquerymobile.com/blog/](http://jquerymobile.com/blog/)

[https://github.com/jquery/jquery-mobile/issues/4024 已](https://github.com/jquery/jquery-mobile/issues/4024)解决。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-13T21:57:57.780

Quora 上也有一些关于这个主题的讨论。

您可能想查看此线程[我们正在 jQuery Mobile、Sencha Touch 和 Dojo Mobile 之间做出决定。各有什么优缺点？](http://www.quora.com/Were-deciding-between-jQuery-Mobile-Sencha-Touch-Dojo-Mobile-What-are-the-pros-and-cons-for-each).

# javascript - 获取链接的 url 的特定部分

> ID：11703673
> 
> 赞同：0
> 
> 时间：2012-07-28T18:38:54.410
> 
> 标签：javascript, jquery, url

我想在页面上链接的第三个和第四个斜杠之间获取 URL 的特定部分。

编辑：对不起，我认为我第一次不清楚，我的意思是获取页面上找到的链接 URL 的特定部分。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-28T18:44:15.473

```
var getSegment = function (url, index) {
   return url.replace(/^https?:\/\//, '').split('/')[index];
} 
```

用法：

```
getSegment("http://domain.com/a/b/c/d/e", 4); // "d" 
```

* * *

`replace`确保协议 ( `http`or ) 之后的前两个斜杠`https`不计算在内。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-28T18:43:24.880

[这](http://jsfiddle.net/b6dd6/)是获取特定路径段的工作示例。

代码：

```
var url = "www.test.com/one/two/three?p1=v&p2=v#anc";
var file = url.split('?')[0];
var pathanddomain = file.split('/');
var path = pathanddomain.splice(1, pathanddomain.length-1);
var pathIndexToGet = 2;
document.write(path[pathIndexToGet]);​ 
```

如果要对当前页面执行此操作，请使用：

```
var url = window.location.href; 
```

此外，如果您的网址以 http(s):// 开头，则需要将其删除。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-28T18:53:12.263

您应该详细说明您的问题并应指定哪个是您的域，这意味着您问这个问题的目的是什么？

这可能会帮助您：

```
var urlValue = url.split("/"); 
```

然后将 urlValue 存储为数组。然后在数组上获取 urlvalue 的第三个和第四个值。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-28T18:47:19.927

我建议：

```
var link = 'http://www.example.com/directory1/directory2/directory3/directory4/index.html';

console.log(link.split('/')[5]);​ 
```

[JS 小提琴演示](http://jsfiddle.net/Eubmg/)。

我们使用`[5]`not的原因`[4]`是因为 URL 开头的两个斜杠，并且因为 JavaScript 数组是从零开始的。

# php - 如何在 Ubuntu 12.04 中将 PHP 版本从 5.3 降级到 5.2？

> ID：11703676
> 
> 赞同：5
> 
> 时间：2012-07-28T18:39:44.513
> 
> 标签：php, ubuntu-12.04, php-5.2, downgrade

我刚刚安装了 Ubuntu 12.04，也安装了 PHP。默认情况下，它安装了 5.3.10 版本，但我的 PHP 项目不支持 PHP v5.3.10。

我想将 PHP 版本降级到 5.2。我该怎么做？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-28T19:52:33.337

您必须卸载 PHP，然后重新安装旧版本。但是，如果您正在从事要出售或提供给客户的项目，或者无论如何，我的建议是删除实际上在 5.2x 和 5.3x 之间中断的任何功能，并将其替换为新的对应部件，就像大多数人们不会因为任何需要而想要恢复到旧版本的 PHP，而且一般来说 php 版本只会朝着一个方向发展，如果你把自己限制在 5.2 中，并且你的软件为人们以一种或另一种形式制作，你会怎么做明年当所有服务器都配备 PHP 6 时？更不用说许多托管解决方案试图在新机器上提供最新和最好的，并且不会为单个客户端恢复，尤其是在共享托管环境中。

无论如何，在 Ubuntu 下的终端中再次回到您的问题，您可以尝试以下操作。`sudo apt-get purge php5`然后它会提示您输入密码，然后继续删除 PHP，假设您有独立的 PHP 包并且没有与某些预配置的 LAMP 堆栈捆绑在一起，但是只要版本正确，它通常仍然可以正常工作。

至于重新安装它，`purge`请从命令中删除并使用 install。但是，您需要查找安装 PHP 存档版本的方法，因为 apt-get 将为您提供最新的

# ruby-on-rails - Heroku 上的 OpenSSL::SSL::SSLError

> ID：11703679
> 
> 赞同：23
> 
> 时间：2012-07-28T18:40:42.650
> 
> 标签：ruby-on-rails, heroku, openssl, omniauth

我正在尝试通过 Facebook 或 Twitter 对用户进行身份验证，让他们填写信息，然后单击保存（从而创建用户记录）。我在最后一步遇到 OpenSSL 错误——点击保存后。这发生在 Devise RegistrationsController#create 方法中。

所以我在托管在 Heroku 上的 Rails 应用程序中遇到了这个错误：

```
2012-07-28T18:25:13+00:00 app[web.1]: OpenSSL::SSL::SSLError (SSL_connect returned=1 errno=0 state=SSLv3 read server certificate B: certificate verify failed) 
```

我见过很多解决方案，但没有一个有效。以下是我尝试过的一些事情：

1）安装`certified`宝石

2）升级Heroku gem到v2.30，再次推送

3）这个：

```
Rails.application.config.middleware.use OmniAuth::Builder do
  provider :twitter, TWITTER_KEY, TWITTER_SECRET, {:client_options => {:ssl => {:ca_file => "/usr/lib/ssl/certs/ca-certificates.crt"}}}
  provider :facebook, FACEBOOK_KEY, FACEBOOK_SECRET, {:scope => "publish_actions,user_location,email", :client_options => {:ssl => {:ca_file => "/usr/lib/ssl/certs/ca-certificates.crt"}}}
end 
```

似乎一个问题可能是这个证书文件实际上并不存在——我在几个地方都看到过它，而且这似乎是 Heroku 的 ca_cert 文件的默认路径，但我可能是错的。

奇怪的是，这是*在*我已经通过 FB/Twitter 进行身份验证并尝试创建用户帐户之后发生的。为什么会这样，我该如何解决/调试这个？真诚的困惑。

**更新：**我将此行添加到 Omniauth 初始化程序中，现在它“工作”了。因此，我诊断出问题出在 Omniauth 上。但是，我仍然希望进行 SSL 验证……这显然会留下一个安全漏洞。

`OpenSSL::SSL::VERIFY_PEER = OpenSSL::SSL::VERIFY_NONE`

* * *

## 回答 #1

> 赞同：41
> 
> 时间：2013-06-07T11:50:31.453

经过一番搜索后，我发现：

如果您使用 Ruby 通过 https 打开与外部服务器的连接，例如。Facebook Graph API，您可能会遇到以下错误：

```
OpenSSL::SSL::SSLError:SSL_connectreturned=1errno=0state=SSLv3readservercertificateB:certificateverifyfailed 
```

此错误是由于 Ruby 无法找到用于验证安全 Web 服务器真实性的证书颁发机构证书 (CA Certs)。解决方案是将此[ca-bundle.crt](http://curl.haxx.se/ca/ca-bundle.crt)下载到您的应用程序`lib/`目录中：然后将以下代码添加到`config/initializers/fix_ssl.rb`：

```
require 'open-uri'
require 'net/https'

module Net
  class HTTP
    alias_method :original_use_ssl=, :use_ssl=

    def use_ssl=(flag)
      self.ca_file = Rails.root.join('lib/ca-bundle.crt').to_s
      self.verify_mode = OpenSSL::SSL::VERIFY_PEER
      self.original_use_ssl = flag
    end
  end
end 
```

这应该会强制 ruby​​ 使用应用程序 lib/ 目录中的 CA 包。

取自：http: [//jimneath.org/2011/10/19/ruby-ssl-certificate-verify-failed.html](http://jimneath.org/2011/10/19/ruby-ssl-certificate-verify-failed.html)

**更新：**

您可能需要使用`self.ca_path=`而不是`self.ca_file=`取决于您的系统。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-07-30T21:01:58.753

听起来您在 OmniAuth 中获得了正确的 openssl 配置，但您的 CA 证书路径可能不正确？

您可以通过运行以下命令在您的 heroku 服务器上进行检查：

```
heroku run bash 
```

...然后运行 ​​openssl 以显示正确的路径：

```
$ openssl version -a
OpenSSL 1.0.0e 6 Sep 2011
OPENSSLDIR: "/usr/lib/ssl" 
```

...您应该在 $OPENSSLDIR/certs/ca-certificates.crt 找到 ca_certificates.crt 文件

我会确认该路径更新您的代码以匹配。

# css - 在样式表中使用 IE 条件注释

> ID：11703684
> 
> 赞同：34
> 
> 时间：2012-07-28T18:41:47.437
> 
> 标签：css, conditional-comments

我知道您可以在 HTML 中使用 IE 条件注释：

```
<!--[if IE]>
  <link href="ieOnlyStylesheet.css" />
<![endif]--> 
```

但是，如果我只想在**样式表**中定位 IE，为 html 中的特定元素设置 css 规则怎么办。例如，您可以**在 css 文件中使用这个 Chrome/Safari hack 作为 css 代码......**

```
@media screen and (-webkit-min-device-pixel-ratio:0) {
    .myClass{
        background: #fff;
        background:rgba(255,0,255,0.7);
    }
} 
```

但是在 CSS 样式表中使用 IE hack，如下所示：

```
 <!--[if IE]>
      .myClass{
        background: #fff;
        background:rgba(255,0,255,0.7);
    }
 <![endif]--> 
```

不起作用。我**在样式表**中使用什么来仅针对 IE？

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2012-07-28T18:56:35.967

条件注释在样式表中不起作用。相反，您可以在 HTML 中使用条件注释将不同的 CSS 类或 ID 应用于您可以使用 CSS 定位的元素。

例如：

```
<!--[if IE]>
  <div id="wrapper" class="ie">
<![endif]-->
<!--[if !IE]>
  <div id="wrapper">
<![endif]--> 
```

此外，还有诸如[Modernizr](http://modernizr.com/)之类的工具以非常相似的方式进行特征检测（通过向`<html>`元素添加类）。您可以使用它逐步增强新浏览器的设计/脚本，同时仍支持旧浏览器。

* * *

## 回答 #2

> 赞同：19
> 
> 时间：2013-10-20T22:54:58.403

这可能比 Derek Hunziker 所说的更容易：

只需按原样包含此代码：

```
<!DOCTYPE html>
<!--[if lt IE 7]>      <html class="no-js lt-ie9 lt-ie8 lt-ie7"> <![endif]-->
<!--[if IE 7]>         <html class="no-js lt-ie9 lt-ie8"> <![endif]-->
<!--[if IE 8]>         <html class="no-js lt-ie9"> <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js"> <!--<![endif]-->
    <head> 
```

然后你可以轻松地定位它，例如，如果你想定位 IE 8 并降低你写：

```
.lt-ie9 body{css rule here;} 
```

你就完成了！

干杯

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2018-03-17T22:22:55.303

条件注释在 Internet Explorer 9 及更低版本中有效，但被 Internet Explorer 10 及更高版本忽略。**您可以在样式表中使用 Internet Explorer 特定的 CSS 规则**。黑客？是的，但不是真正肮脏的黑客恕我直言。

要定位 Internet Explorer 8、9、10 和 11，您可以使用：

**@媒体屏幕\0 {…}**

要针对 Internet Explorer 6 和 7，您可以使用：

**@媒体屏幕\9 {…}**

资料来源：[https ://keithclark.co.uk/articles/moving-ie-specific-css-into-media-blocks/media-tests/](https://keithclark.co.uk/articles/moving-ie-specific-css-into-media-blocks/media-tests/)

它对我有用。**我没有时间在不同的浏览器中测试它。如果您可以确认它有效（或无效），请添加一些评论（使用您测试过的浏览器。）**

例子：

```
/* Default CSS rule for all browsers */

span.icon {
	width: 16px;
	display: inline-block;
	margin-right: -16px;
}

/* Style rules in the media rules below will only be applied in Internet Explorer */
/* Other browsers will ignore them. */  

@media screen\0, @media screen\9 {	
  span.icon {
    margin-right: 8px;
	}	
}
```

```
--- Nothing to see here. Only CSS rules ---
```

一个完整的例子：

```
span.icon {
	width: 16px;
	display: inline-block;
	margin-right: -16px;
}

/* Style rules in the media rules below will only be applied in Internet Explorer, other browsers will ignore them. */  

@media screen\0, @media screen\9 {	

	/* Style rules here will only be applied in Internet Explorer, other browsers will ignore them. */ 

	span.icon {
   		margin-right: 8px;
	}	
}

/* -----------------------------------------------------------------------------*/

a.icon {
	-webkit-padding-start: 1.5em;
	text-decoration: none;
}

a.icon:hover {
	text-decoration: underline;
}

span.icon_file {
	background : url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAIAAACQkWg2AAAABnRSTlMAAAAAAABupgeRAAABHUlEQVR42o2RMW7DIBiF3498iHRJD5JKHurL+CRVBp+i2T16tTynF2gO0KSb5ZrBBl4HHDBuK/WXACH4eO9/CAAAbdvijzLGNE1TVZXfZuHg6XCAQESAZXbOKaXO57eiKG6ft9PrKQIkCQqFoIiQFBGlFIB5nvM8t9aOX2Nd18oDzjnPgCDpn/BH4zh2XZdlWVmWiUK4IgCBoFMUz9eP6zRN75cLgEQhcmTQIbl72O0f9865qLAAsURAAgKBJKEtgLXWvyjLuFsThCSstb8rBCaAQhDYWgIZ7myM+TUBjDHrHlZcbMYYk34cN0YSLcgS+wL0fe9TXDMbY33fR2AYBvyQ8L0Gk8MwREBrTfKe4TpTzwhArXWi8HI84h/1DfwI5mhxJamFAAAAAElFTkSuQmCC ") left top no-repeat;
}

span.icon_dir {
	background : url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAd5JREFUeNqMU79rFUEQ/vbuodFEEkzAImBpkUabFP4ldpaJhZXYm/RiZWsv/hkWFglBUyTIgyAIIfgIRjHv3r39MePM7N3LcbxAFvZ2b2bn22/mm3XMjF+HL3YW7q28YSIw8mBKoBihhhgCsoORot9d3/ywg3YowMXwNde/PzGnk2vn6PitrT+/PGeNaecg4+qNY3D43vy16A5wDDd4Aqg/ngmrjl/GoN0U5V1QquHQG3q+TPDVhVwyBffcmQGJmSVfyZk7R3SngI4JKfwDJ2+05zIg8gbiereTZRHhJ5KCMOwDFLjhoBTn2g0ghagfKeIYJDPFyibJVBtTREwq60SpYvh5++PpwatHsxSm9QRLSQpEVSd7/TYJUb49TX7gztpjjEffnoVw66+Ytovs14Yp7HaKmUXeX9rKUoMoLNW3srqI5fWn8JejrVkK0QcrkFLOgS39yoKUQe292WJ1guUHG8K2o8K00oO1BTvXoW4yasclUTgZYJY9aFNfAThX5CZRmczAV52oAPoupHhWRIUUAOoyUIlYVaAa/VbLbyiZUiyFbjQFNwiZQSGl4IDy9sO5Wrty0QLKhdZPxmgGcDo8ejn+c/6eiK9poz15Kw7Dr/vN/z6W7q++091/AQYA5mZ8GYJ9K0AAAAAASUVORK5CYII= ") left top no-repeat;
}

span.icon_up {
	background : url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAmlJREFUeNpsU0toU0EUPfPysx/tTxuDH9SCWhUDooIbd7oRUUTMouqi2iIoCO6lceHWhegy4EJFinWjrlQUpVm0IIoFpVDEIthm0dpikpf3ZuZ6Z94nrXhhMjM3c8895977BBHB2PznK8WPtDgyWH5q77cPH8PpdXuhpQT4ifR9u5sfJb1bmw6VivahATDrxcRZ2njfoaMv+2j7mLDn93MPiNRMvGbL18L9IpF8h9/TN+EYkMffSiOXJ5+hkD+PdqcLpICWHOHc2CC+LEyA/K+cKQMnlQHJX8wqYG3MAJy88Wa4OLDvEqAEOpJd0LxHIMdHBziowSwVlF8D6QaicK01krw/JynwcKoEwZczewroTvZirlKJs5CqQ5CG8pb57FnJUA0LYCXMX5fibd+p8LWDDemcPZbzQyjvH+Ki1TlIciElA7ghwLKV4kRZstt2sANWRjYTAGzuP2hXZFpJ/GsxgGJ0ox1aoFWsDXyyxqCs26+ydmagFN/rRjymJ1898bzGzmQE0HCZpmk5A0RFIv8Pn0WYPsiu6t/Rsj6PauVTwffTSzGAGZhUG2F06hEc9ibS7OPMNp6ErYFlKavo7MkhmTqCxZ/jwzGA9Hx82H2BZSw1NTN9Gx8ycHkajU/7M+jInsDC7DiaEmo1bNl1AMr9ASFgqVu9MCTIzoGUimXVAnnaN0PdBBDCCYbEtMk6wkpQwIG0sn0PQIUF4GsTwLSIFKNqF6DVrQq+IWVrQDxAYQC/1SsYOI4pOxKZrfifiUSbDUisif7XlpGIPufXd/uvdvZm760M0no1FZcnrzUdjw7au3vu/BVgAFLXeuTxhTXVAAAAAElFTkSuQmCC ") left top no-repeat;

}

.nowrap {
  white-space: nowrap ;
}

div.fileList {
	padding: 20px;
}

html, body {
    width: 100%;
    height: 100%;    
    margin: 0;
    padding: 0;
}

table.FileList {
    border-collapse: collapse;
    margin: 20px;
  }

  table.FileList th {
    text-align: left;
    font-weight: bold;
  }

  table.FileList td {
    border: 0px solid #000;
  }

table.FileList tr.heading{
    border-bottom: 1px solid black;
}
```

```
<table class="FileList">
        <tr class="heading"><th>Archive</th></tr>
            <tr><td>&nbsp;</td></tr>
            <tr><td><span class="icon icon_dir nowrap">&nbsp;</span><span class="nowrap"><a class="icon" href="http://localhost/browse?year=2018">2018</a></span></td></tr>
            <tr><td><span class="icon icon_dir nowrap">&nbsp;</span><span class="nowrap"><a class="icon" href="http://localhost/browse?year=2017">2017</a></span></td></tr>
            <tr><td><span class="icon icon_dir nowrap">&nbsp;</span><span class="nowrap"><a class="icon" href="http://localhost/browse?year=2016">2016</a></span></td></tr>
            <tr><td><span class="icon icon_dir nowrap">&nbsp;</span><span class="nowrap"><a class="icon" href="http://localhost/browse?year=2015">2015</a></span></td></tr>
            <tr><td><span class="icon icon_dir nowrap">&nbsp;</span><span class="nowrap"><a class="icon" href="http://localhost/browse?year=2015">2014</a></span></td></tr>            
    </table>
```

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2012-07-28T18:43:24.703

您不能使用 IE 条件注释，但可以使用 hacks。[这个 CSS hacks 页面](http://www.webdevout.net/css-hacks/)解释了你可以使用（以及更多）的 IE hacks。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-12-20T01:58:23.370

IE 样式表黑客

```
.Class {
   color:  green;     /* standard */
   color:  green\9;   /* IE 8 and below */
   *color: green;     /* IE 7 and below */
   color:  green !ie; /* IE 7 and below */
   _color: green;     /* IE 6 */
} 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-07-28T19:10:01.473

您想要做的是像通常对任何其他浏览器一样设置样式表中的所有内容。将普通样式表导入页面后，您将使用常规`<!--[if IE]>`条件语句导入特定于 IE 的样式表。

按照此方法导入所有浏览器的样式，然后使用您的 IE 特定样式覆盖那些不兼容、无法正确呈现或需要调整以在 IE 中使用的样式。

# c# - Unity：公众不会出现在默认引用/检查员中..？

> ID：11703685
> 
> 赞同：1
> 
> 时间：2012-07-28T18:41:50.533
> 
> 标签：c#, monodevelop, unity3d

我已经尝试了几个小时，但我不知道出了什么问题。

通常，当您在 Unity C# 中定义公共对象/变量时，它会显示在检查器或默认引用中，您可以在其中将某些东西拖到它上面。

这是我的测试代码：

```
using UnityEngine;
using System;
using System.Collections;

[Serializable]
public class modGlobals : MonoBehaviour {

    public static GUIStyle defaultMask;
    public GUIStyle trollo;

} 
```

啊啊啊...

![对象不显示](../Images/936e8842b9217258efad6e02c59246f8.png)

我尝试了几个选项，在 MonoDev 和 Visual Studio 中一样编写了东西，将我所有的文件放在一个命名空间中，w 和 w/o 可序列化属性但是.. 有什么问题？

感谢帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-29T15:27:44.173

是的，您确实需要将其附加到场景中的游戏对象，以便在属性检查器中显示公共成员，因为您的脚本继承自 MonoBehaviour。

这就是我得到的。 ![场景视图中的属性检查器。](../Images/f505e3ad1d7f3e98c3163d04729e6540.png)

此外，您不能在属性检查器中公开静态成员 - 即使标记为 SerializableAttribute。System.SerializableAttribute 在此声明类型上无效。它仅对“类、结构、枚举、委托”声明有效。

关于您关于需要具有对象的全局可访问脚本的评论，您有几个选项，例如

*   [附加到游戏对象（示例](https://gamedev.stackexchange.com/questions/32861/whats-the-proper-way-to-use-static-objects-and-singletons-in-unity/32868#32868)）的单例脚本，使用[DontDestroyOnLoad()](http://docs.unity3d.com/Documentation/ScriptReference/Object.DontDestroyOnLoad.html)设置，因此它在场景更改之间持续存在。
*   静态类

# ruby-on-rails - 在 Windows 上使用 twitter-bootstrap-rails 生成器发出警告

> ID：11703686
> 
> 赞同：7
> 
> 时间：2012-07-28T18:41:59.630
> 
> 标签：ruby-on-rails, gem, bundler, twitter-bootstrap-rails

我正在尝试在我的第一个 Rails 项目中使用 twitter-bootstrap-rails gem，在 Windows 7 机器上运行

```
ruby 1.9.3p125 (2012-02-16) [i386-mingw32]
Rails 3.2.1
twitter-bootstrap-rails 2.1.1 
```

当我运行时，`rails g bootstrap:install`我得到以下信息：

```
[WARNING] Please install gem 'therubyracer' to use Less.
    C:/RailsInstaller/Ruby1.9.3/lib/ruby/gems/1.9.1/gems/bundler-1.1.5/lib/bundler/runtime.rb:74:in `require': cannot load such file -- twitter/bootstrap/rails (LoadError)
        from C:/RailsInstaller/Ruby1.9.3/lib/ruby/gems/1.9.1/gems/bundler-.1.5/lib/bundler/runtime.rb:74:in 'rescue in block in require'
        from C:/RailsInstaller/Ruby1.9.3/lib/ruby/gems/1.9.1/gems/bundler-.1.5/lib/bundler/runtime.rb:62:in 'block in require'
        from C:/RailsInstaller/Ruby1.9.3/lib/ruby/gems/1.9.1/gems/bundler-.1.5/lib/bundler/runtime.rb:55:in 'each'
        from C:/RailsInstaller/Ruby1.9.3/lib/ruby/gems/1.9.1/gems/bundler-.1.5/lib/bundler/runtime.rb:55:in 'require'
        from C:/RailsInstaller/Ruby1.9.3/lib/ruby/gems/1.9.1/gems/bundler-.1.5/lib/bundler.rb:119:in `require'
        from H:/Dev/sugarcane/config/application.rb:7:in `<top (required)>'
        from C:/RailsInstaller/Ruby1.9.3/lib/ruby/gems/1.9.1/gems/railties-3.2.1/lib/rails/commands.rb:24:in `require'
        from C:/RailsInstaller/Ruby1.9.3/lib/ruby/gems/1.9.1/gems/railties-3.2.1/lib/rails/commands.rb:24:in `<top (required)>'
        from script/rails:6:in `require'
        from script/rails:6:in `<main>' 
```

这是我的 Gemfile：

```
source 'https://rubygems.org'
gem 'rails', '3.2.1'
gem 'pg'

group :assets do
  gem 'sass-rails',   '~> 3.2.3'
  gem 'coffee-rails', '~> 3.2.1'
  gem 'twitter-bootstrap-rails', :git => 'git://github.com/seyhunak/twitter-bootstrap-rails.git'
  gem 'uglifier', '>= 1.0.3'
end

gem 'jquery-rails' 
```

我尝试将其包含`gem therubyracer`在我的 Gemfile 中，但我收到有关 libv8 gem 的编译错误，这[在 Windows 上不可用](https://stackoverflow.com/questions/6356450/therubyracer-gem-on-windows)。我也尝试过`gem therubyracer, :platform => :ruby`，但 Bundler 仍然尝试在`bundle install`. 我也尝试安装 node.js 和 include `gem execjs`，但无济于事。

我遇到的每个解决方案似乎都没有帮助。我想在这个项目上使用 LESS 而不是静态 CSS，所以一个允许我在 Windows 机器上使用 LESS 和 Rails 的解决方案将是最有帮助的。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-29T11:56:40.087

我已经改用[bootstrap-sass](https://github.com/thomas-mcdonald/bootstrap-sass/ "引导程序") gem。

因此，我可以使用 SASS 作为 CSS 预处理器，而不是使用 LESS。缺点是它似乎没有任何代码生成器。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-28T19:03:27.357

根据gem 到 static 的[这个](https://github.com/seyhunak/twitter-bootstrap-rails/issues/14)更改分支：

```
gem 'twitter-bootstrap-rails', :git => "git://github.com/seyhunak/twitter-bootstrap-rails.git", :branch => "static" 
```

它为我解决了问题。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-09-12T19:34:22.287

还请查看您的应用程序 Gemfile。

确保其中包含“therubyracer”宝石。

所以如果你找到线：

# gem 'therubyracer', 平台: :ruby

像这样删除哈希：

gem 'therubyracer', 平台: :ruby

# javascript - 在页面刷新视图 jsFiddle 后使用 cookie.js 在 div 上保持切换状态

> ID：11703688
> 
> 赞同：1
> 
> 时间：2012-07-28T18:42:15.047
> 
> 标签：javascript, jquery, html

我有一个简单的代码，它允许我在两个 div 之间切换，它们是两个子导航的包装（#sub-nav-wrap 是替代导航）。它们固定在浏览器的底部：

```
$(function(){
$('.button').click(function(){
    $('#sub-nav-wrapmin').toggle();
    $('#sub-nav-wrap').toggle();
}); 
```

});

我希望做的是保持每个 div 的状态与用户在页面刷新后选择的状态相同，即使单击新的子标题菜单也将保持不变，而不是诉诸默认状态。

html是这样的：

```
<!--- Main Sub Wrap --->
<div id="bottom-wrap">
<!-- Mini Sub Nav -->

<div id="sub-nav-wrapmin" class="snWrap divone">
        <div id="sn-contentmin">
            <div id="sn-likemin"></div> 
            <div id="sn-coffeesml"></div>
            <div id="sn-sharemin"></div>
            <div id="sn-commentsml"></div>
            <div id="toggle-barmin">
                    <div id="sn-sidebrdrmin"></div>
                    <div class="sn-toggle button"></div>
           </div>
              <ul class="sn-comicsmin menu">
                <li><a class="sn-comics" style="background-position: right top" href="#comic.html">Comic</a></li>
                <li><a class="sn-archive" href="#archive.html">Archive</a></li>
                <li><a class="sn-vote" href="#vote.html">Vote</a></li>
                <li><a class="sn-spotlight" href="#spotlight.html">Spotlight</a></li>
            </ul>
      </div>
</div>
<!-- Sub Nav -->
<div id="sub-nav-wrap" class="snWrap divtwo">
    <div id="sub-nav-container">
         <div id="sub-nav-content">

                <div id="sn-bnrlft"></div>
                <div id="sn-bnrrgt"></div>
                <div class="sn-dividelft"></div>
                <div class="sn-dividergt"></div>
                <div id="sn-likebg"></div>
                <div id="sn-coffeebtn">
                </div>
                <div id="sn-sharebtn"></div>
                <div id="sn-commentbtn"></div>    
                <div id="toggle-bar">
                    <div id="sn-sidebrdr"></div>
                    <div class="toggle button"></div>
                </div>            
        </div>
        <div id="sub-nav-brdr">
            <ul class="sub-nav-comics menu">
                <li><a class="comics" style="background-position: right top" href="#comic.html">Comic</a></li>
                <li><a class="archive" href="#archive.html">Archive</a></li>
                <li><a class="vote" href="#vote.html">Vote</a></li>
                <li><a class="spotlight" href="#spotlight.html">Spotlight</a></li>
            </ul>
        </div>
    </div>
</div> 
```

CSS是这样的：

```
#sub-nav-wrap {
    display: none;  
} 
```

这是我第一次问，我一直在绞尽脑汁想用这个网站上的其他类似代码让它工作，但没有任何效果。将不胜感激任何帮助...

大卫

我构建了一个[jsFiddle](http://jsfiddle.net/replacement4/nKFt7/60)来展示在没有 cookie 的情况下导航是如何工作的。 [这](http://jsfiddle.net/replacement4/nvf3V/3)是我使用 cookie 的尝试。我希望这是简单的事情，我只是想念理解......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-28T22:59:52.573

我注意到的一件事是 jQuery.cookie 不存在于小提琴中，但我认为无论如何你在实际站点上都有它。[给你](http://jsfiddle.net/nvf3V/9/)。我相信有更有效的方法，但这仍然有效。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-28T18:58:20.803

您需要 jQuery cookie[插件](https://github.com/carhartl/jquery-cookie/)才能在 jQuery 中以这种方式使用 cookie。jQuery 中没有对您正在尝试做的事情的原生支持。

如果旧浏览器不是问题，您可以使用本地存储并执行以下操作：

```
$(function(){
    var wrapmin = localStorage.getItem('wrapmin')||false,
        wrap = localStorage.getItem('wrap')||false;

    if (wrapmin) $('#sub-nav-wrapmin').show();
    if (wrap) $('#sub-nav-wrap').show();

    $('.button').click(function(){
        $('#sub-nav-wrapmin').toggle();
        $('#sub-nav-wrap').toggle();
        wrapmin = $('#sub-nav-wrapmin').is(':visible');
        wrap = $('#sub-nav-wrap').is(':visible');
        localStorage.setItem('wrapmin', wrapmin),
        localStorage.setItem('wrap', wrap);
    });    
}); 
```

您还需要更改 CSS，如果最初显示元素，它现在将无法正常工作。

[小提琴](http://jsfiddle.net/nKFt7/61/)

cookie 插件有据可查。你通过给它一个名字和一个值来设置一个cookie，即。两个值，而不是一个：

```
$.cookie('the_cookie', 'the_value'); 
```

# android - Android: org.apache.http.NoHttpResponseException: 目标服务器响应失败

> ID：11703689
> 
> 赞同：4
> 
> 时间：2012-07-28T18:42:26.493
> 
> 标签：android

我的 Android 应用程序使用 HttpClient/HttpGet 来访问 REST API。我还设置：

```
httpGet.addHeader("Authorization", "Basic " + basicAuth); 
```

...它将Base64编码的“用户名：密码”发送到服务器。为了测试，我只使用 HTTP 而不是 HTTPS 来连接服务器。

每当我在 HttpClient 上调用“执行”时，我都会收到以下异常：

```
07-28 10:51:39.610: I/# PA #(12112): org.apache.http.NoHttpResponseException: The target server failed to respond
07-28 10:51:39.610: I/# PA #(12112):    at org.apache.http.impl.conn.DefaultResponseParser.parseHead(DefaultResponseParser.java:85)
07-28 10:51:39.610: I/# PA #(12112):    at org.apache.http.impl.io.AbstractMessageParser.parse(AbstractMessageParser.java:174)
07-28 10:51:39.610: I/# PA #(12112):    at org.apache.http.impl.AbstractHttpClientConnection.receiveResponseHeader(AbstractHttpClientConnection.java:180)
07-28 10:51:39.610: I/# PA #(12112):    at org.apache.http.impl.conn.DefaultClientConnection.receiveResponseHeader(DefaultClientConnection.java:235)
07-28 10:51:39.610: I/# PA #(12112):    at org.apache.http.impl.conn.AbstractClientConnAdapter.receiveResponseHeader(AbstractClientConnAdapter.java:259)
07-28 10:51:39.610: I/# PA #(12112):    at org.apache.http.protocol.HttpRequestExecutor.doReceiveResponse(HttpRequestExecutor.java:279)
07-28 10:51:39.610: I/# PA #(12112):    at org.apache.http.protocol.HttpRequestExecutor.execute(HttpRequestExecutor.java:121)
07-28 10:51:39.610: I/# PA #(12112):    at org.apache.http.impl.client.DefaultRequestDirector.execute(DefaultRequestDirector.java:428)
07-28 10:51:39.610: I/# PA #(12112):    at org.apache.http.impl.client.AbstractHttpClient.execute(AbstractHttpClient.java:555)
07-28 10:51:39.610: I/# PA #(12112):    at org.apache.http.impl.client.AbstractHttpClient.execute(AbstractHttpClient.java:487)
07-28 10:51:39.610: I/# PA #(12112):    at org.apache.http.impl.client.AbstractHttpClient.execute(AbstractHttpClient.java:465)
07-28 10:51:39.610: I/# PA #(12112):    at org.thomasamsler.android.app.tasks.HttpGetTask.doInBackground(HttpGetTask.java:87)
07-28 10:51:39.610: I/# PA #(12112):    at org.foo.android.app.tasks.HttpGetTask.doInBackground(HttpGetTask.java:1)
07-28 10:51:39.610: I/# PA #(12112):    at android.os.AsyncTask$2.call(AsyncTask.java:264)
07-28 10:51:39.610: I/# PA #(12112):    at java.util.concurrent.FutureTask$Sync.innerRun(FutureTask.java:305)
07-28 10:51:39.610: I/# PA #(12112):    at java.util.concurrent.FutureTask.run(FutureTask.java:137)
07-28 10:51:39.610: I/# PA #(12112):    at android.os.AsyncTask$SerialExecutor$1.run(AsyncTask.java:208)
07-28 10:51:39.610: I/# PA #(12112):    at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1076)
07-28 10:51:39.610: I/# PA #(12112):    at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:569)
07-28 10:51:39.610: I/# PA #(12112):    at java.lang.Thread.run(Thread.java:856) 
```

笔记：

我实际上有三台具有不同托管服务提供商的开发服务器。连接到其中两个时，出现上述错误。连接到第三台服务器时，一切正常。此外，其他 GET 和 POST 请求在所有三个开发服务器上都可以正常工作。

所以我想知道在设置基本身份验证标头时是否有关于 HTTP GET 的特定内容。

我还可以使用“curl”对有问题的 REST API 进行调用，而不会出现任何问题。

代码：

```
import java.io.ByteArrayOutputStream;
import java.io.IOException;

import org.apache.http.HttpEntity;
import org.apache.http.HttpResponse;
import org.apache.http.client.ClientProtocolException;
import org.apache.http.client.HttpClient;
import org.apache.http.client.methods.HttpGet;
import org.apache.http.impl.client.DefaultHttpClient;

import android.os.AsyncTask;
import android.util.Log;

public class HttpGetTask extends AsyncTask<HttpGetRequestArgs, Void, String> implements AppConstants {

    private HttpTaskNotifier mNotifier;

    private HttpResponse mHttpResponse;
    private int mHttpStatusCodeOk;
    private int mHttpStatusCode;
    private int mErrorCode = AppConstants.NO_ERROR;

    public HttpGetTask(int httpStatusCodeOk, HttpTaskNotifier notifier) {

        mNotifier = notifier;
        mHttpStatusCodeOk = httpStatusCodeOk;
    }

    @Override
    protected String doInBackground(HttpGetRequestArgs... args) {

        HttpGetRequestArgs httpGetRequestArgs = args[0];

        HttpClient httpClient = new DefaultHttpClient();
        HttpGet httpGet = null;

        try {

            httpGet = new HttpGet(httpGetRequestArgs.getUrl());

            String apiKey = httpGetRequestArgs.getApiKey();

            if (null != apiKey && !"".equals(apiKey)) {

                httpGet.addHeader("Authorization", "ApiKey " + apiKey);
            }

            String basicAuth = httpGetRequestArgs.getBasicAuth();

            if (null != basicAuth && !"".equals(basicAuth)) {

                httpGet.addHeader("Authorization", "Basic " + basicAuth);
            }

        }
        catch (IllegalArgumentException e) {

            Log.e(LOG_TAG, "EXCEPTION", e);
            return null;
        }

        try {

            mHttpResponse = httpClient.execute(httpGet);
        }
        catch (ClientProtocolException e) {

            mErrorCode = AppConstants.REST_ERROR;
            return null;
        }
        catch (IOException e) {

            mErrorCode = AppConstants.REST_ERROR;
            return null;
        }
        catch (IllegalArgumentException iae) {

            mErrorCode = AppConstants.REST_ERROR;
            return null;
        }

        if (null == mHttpResponse) {

            mErrorCode = AppConstants.REST_ERROR;
            return null;
        }

        mHttpStatusCode = mHttpResponse.getStatusLine().getStatusCode();

        if (mHttpStatusCodeOk != mHttpStatusCode) {

            mErrorCode = AppConstants.REST_ERROR;
            return null;
        }

        ByteArrayOutputStream out = new ByteArrayOutputStream();
        HttpEntity httpEntity = mHttpResponse.getEntity();

        if (null == httpEntity) {

            mErrorCode = AppConstants.REST_ERROR;
            return null;
        }

        try {

            httpEntity.writeTo(out);
            out.close();
        }
        catch (IOException ioe) {

            mErrorCode = AppConstants.REST_ERROR;
            return null;
        }

        return out.toString();
    }

    @Override
    protected void onPostExecute(String content) {

        if (AppConstants.NO_ERROR != mErrorCode) {

            mNotifier.onError(mErrorCode);
        }

        mNotifier.doProcess(content);
    }

    @Override
    protected void onCancelled() {

        mNotifier.doCancel();
    }
} 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-01T01:27:31.487

我终于弄清楚了问题所在。当我对用户名和密码进行 Base64 编码时，我对 Base64.encodeToString(...) 使用了错误的标志。所以我改变了标志：

从：

```
basicAuth = Base64.encodeToString(basicAuth.getBytes(), Base64.DEFAULT); 
```

至：

```
basicAuth = Base64.encodeToString(basicAuth.getBytes(), Base64.NO_WRAP); 
```

......一切都很好。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-30T03:44:52.837

你可以尝试很多：[Android上的HttpClient : NoHttpResponseException through UMTS/3G](https://stackoverflow.com/questions/2052299/httpclient-on-android-nohttpresponseexception-through-umts-3g)

# javascript - 如何减小 JQuery datepicker 的大小

> ID：11703691
> 
> 赞同：0
> 
> 时间：2012-07-28T18:42:41.300
> 
> 标签：javascript, jquery

我设法将 JQuery datepicker 运行到 JSF 页面中。

![在此处输入图像描述](../Images/e46085fbc2709137e2721a23e67bc23d.png)

但正如您所见，按钮和日历不是对称的——它们比平时大。你能告诉我如何减小日历的大小吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-28T18:53:50.203

您需要创建一个新的 css 文件并将其放在另一个“jquery”文件下方，然后将所有必要的 ui-datepicker 样式（到此新文件）添加/编辑到最适合您需求的文件中

# nsxmlparser - NSXMLParser Big-5 转换为 UTF-8

> ID：11703701
> 
> 赞同：0
> 
> 时间：2012-07-28T18:43:48.907
> 
> 标签：nsxmlparser

我的 XML 文件有中文字符，它们是 Big-5，如何根据下面的代码将其转换为 UTF-8？

```
- (BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:(NSDictionary *)launchOptions
{
    NSString *xmlFilepath = [[[NSBundle mainBundle] resourcePath]  stringByAppendingPathComponent:@"Hostels.xml"];

    NSData *xml = [[NSData alloc] initWithContentsOfFile:xmlFilepath];

    NSXMLParser *xmlParser = [[NSXMLParser alloc] initWithData:xml];

    Parser *theParser = [[Parser alloc] initParser];

    [xmlParser setDelegate:theParser];

....... 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-24T04:33:50.267

尝试使用这段代码提取Big-5编码的汉字

```
//-2147481085,  // Traditional Chinese (Big 5)
//-2147481082,  // Traditional Chinese (Big 5 HKSCS)
//-2147482589,  // Traditional Chinese (Windows, DOS)
//-2147483646, //Traditional Chinese (Mac OS)
#define NSBIG5Encoding -2147482589
NSString* content = [NSString stringWithContentsOfFile:fileParh_
                                              encoding:NSBIG5Encoding
                                                 error:nil];
NSData *XMLData = [content dataUsingEncoding:NSUTF8StringEncoding];
NSXMLParser *parser = [[NSXMLParser alloc] initWithData:XMLData]; 
```

# c# - c# - Streamwriter 类

> ID：11703702
> 
> 赞同：0
> 
> 时间：2012-07-28T18:44:08.193
> 
> 标签：c#, streamwriter

我正在尝试`List<string>`使用该类将 a 写入文件`StreamWriter`。当我将参数（在调试模式下）传递给`write_lines()`函数时，程序会停止而没有任何错误。也许有人知道我做错了什么

```
 public class Writer
{
    private StreamWriter the_writer;
    private string PS_filepath;

    public Writer()
    {

    }

    public void write_lines(List<string> thelines, string path)
    {
        this.PS_filepath = path;
        this.the_writer = new StreamWriter(PS_filepath, true);

        foreach(string line in thelines)
        {
            the_writer.WriteLine(line);
        }
    }
} 
```

`Path var is C:\path\text.xyz`

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-28T18:45:51.503

您的作家是在本地创建的，但从未正确关闭。

没有理由将变量存储在实例中，因此整个方法可以简单地设为静态：

```
public static void write_lines(List<string> thelines, string path)
{
    //this.PS_filepath = path;
    using (StreamWriter writer = new StreamWriter(path, true))
    {
      foreach(string line in thelines)
      {
          writer.WriteLine(line);
      }
    }
} 
```

这`using`将确保您的文件已关闭（因此完全写入）。其他变化只是小的改进。

# html - 使用 Scrapy 获取隐藏元素

> ID：11703703
> 
> 赞同：0
> 
> 时间：2012-07-28T18:44:08.360
> 
> 标签：html, scrapy

我正在使用scrapy从文章中获取评论。

例如，[testPage](http://techcrunch.com/2012/07/28/not-that-kind-of-filthy-get-your-mind-out-of-the-gutter/)在文章末尾有评论。

我如何能够访问这些评论？
看来scrapy下载的html不包含对评论的引用。

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-28T18:55:56.110

据我所知，scrapy 看到一个禁用 javascript 的网页，这些是 facebook 评论，即它们是通过该页面上的 javascript 提取的。

你可能想看看这里[如何结合scrapy和htmlunit来用javascript抓取url](https://stackoverflow.com/questions/8047666/how-to-combine-scrapy-and-htmlunit-to-crawl-urls-with-javascript)

# php - 在 iOS 中显示图像

> ID：11703706
> 
> 赞同：0
> 
> 时间：2012-07-28T18:45:25.260
> 
> 标签：php, mysql, ios, amazon-web-services

我希望用户将他们的照片上传到 Amazon S3 我使用 AWS SDK 将图片上传到 Amazon S3 服务。在使用 AWS SDK 上传照片时，我想在数据库中保留照片的 URL、路径：我使用此功能来显示图像： S3GetObjectRequest *getObjectRequest = [[S3GetObjectRequest alloc] initWithKey:nameImage withBucket:@"nameBucket"];

```
S3GetObjectResponse *getObjectResponse = [[AmazonClientManager s3] getObject:getObjectRequest];

UIImage *tampon = [[UIImage alloc] initWithData:getObjectResponse.body]; 
```

对于一个用户，他有很多图像，我现在必须将每个图像的名称显示为图像，你能帮帮我吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-28T20:08:56.113

如果您开发基于浏览器的应用程序，那么您不太可能实现您的目标，因为我还没有在 iOS 上找到支持从浏览器上传到服务器的浏览器。它处理苹果不允许很多东西直接与本地存储通信。

另一方面，基于 HTML5 的开发解决方案确实将 API 绑定到设备硬件中，例如 phonegap 和 appmobi（它们是同一个），但是没有 PHP，你必须知道 javascript和jquery之类的东西广泛地能够与您的服务器或接受请求的第3方系统进行通信，但总而言之，这是您问题的基础，Apple只是不允许像浏览器这样的应用程序直接访问存储我知道原因实际上更复杂一点，但这就是它归结为的原因。

# gcc - 将 libtool 与 gcov 一起使用时，“DSO 引用了隐藏符号‘atexit’”

> ID：11703709
> 
> 赞同：12
> 
> 时间：2012-07-28T18:45:53.200
> 
> 标签：gcc, ubuntu, linker, libtool, gcov

我有一个 C++ 项目，它使用 GNU Autotools 构建脚本和 libtool 进行链接。最近，我通过确保

```
GCOV_CFLAGS="-fprofile-arcs -ftest-coverage"
GCOV_LDFLAGS="-fprofile-arcs -ftest-coverage" 
```

..分别包含在我的`CFLAGS`和`LDFLAGS`中。在使用 g++-4.2（由 homebrew 安装）的 OS X 10.7.4 上，一切正常。

在使用 g++ 4.6.3 的 Ubuntu 12.04 上，libtool 无法链接我的一项测试：

```
/bin/bash ./libtool --tag=CXX   --mode=link g++ -Wall -Wextra -Werror -ansi -fprofile-arcs -ftest-coverage -g -O0 -fprofile-arcs -ftest-coverage -L/usr/local/lib -Wl,-rpath -Wl,/usr/local/lib   -o myproj/inttests/locale_test myproj/inttests/locale_test.o myproj/app/libapp.la -lboost_thread-mt -lboost_system-mt -pthread -llog4cplus  
libtool: link: g++ -Wall -Wextra -Werror -ansi -fprofile-arcs -ftest-coverage -g -O0 -fprofile-arcs -ftest-coverage -Wl,-rpath -Wl,/usr/local/lib -o myproj/inttests/.libs/locale_test myproj/inttests/locale_test.o -pthread  -L/usr/local/lib myproj/app/.libs/libapp.so -lboost_thread-mt -lboost_system-mt /usr/lib/liblog4cplus.so -pthread
/usr/bin/ld: myproj/inttests/.libs/locale_test: hidden symbol `atexit' in /usr/lib/x86_64-linux-gnu/libc_nonshared.a(atexit.oS) is referenced by DSO
/usr/bin/ld: final link failed: Bad value
collect2: ld returned 1 exit status
make[2]: *** [myproj/inttests/locale_test] Error 1 
```

如何修复我在 ubuntu/g++ 4.6 上的构建？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-28T18:45:53.200

谷歌搜索后，我看到[了这个线程](http://lists.gnu.org/archive/html/libtool/2011-05/msg00003.html)，它建议`--coverage`在`CXXFLAGS`运行时添加`./configure`。事实上，虽然它不适用于那张海报，但它适用于我：

```
./configure CXXFLAGS="--coverage" 
```

然而，这个变量是为包安装程序保留的，而不是维护者（我）。问题简化为“我如何将它正确地合并到构建中？”

这*还*不够：

```
GCOV_CFLAGS="-fprofile-arcs -ftest-coverage --coverage"
GCOV_LDFLAGS="-fprofile-arcs -ftest-coverage" 
```

假设`GCOV_CFLAGS`包含在有效文件`CXXFLAGS`中（未显示，但确实如此），似乎此修复程序应该有效。它没有。

`CXXFLAGS="--coverage"`进一步深入研究，如果我们从命令行删除并将其放在某个地方，似乎我们至少应该获得一些牵引力`configure.ac`。**实际上，除非**该行位于`AC_PROG_CXX`选择编译器的调用上方，否则这也不起作用。

所以现在我们有了一点了解。`AC_PROG_CXX`当它看到 时正在改变某些东西`--coverage`，这很可能是放置 in`GCOV_CFLAGS`不起作用的原因：为时已晚。

仔细查看日志，似乎秘诀是自动包含`-lgcov`在失败的链接步骤中。我不确定这个库是否需要保密，但如果我这样更改变量：

```
GCOV_CFLAGS="-fprofile-arcs -ftest-coverage --coverage"
GCOV_LDFLAGS="-fprofile-arcs -ftest-coverage"
GCOV_LIBS="-lgcov" 
```

..并确保`GCOV_LIBS`包含在 中`LIBS`，然后一切正常，在我所有的平台上。

**编辑**：另见此[线程](https://stackoverflow.com/q/566472/580412)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-08-21T16:48:42.623

以更通用的方式，可以通过确保您的库在链接命令行上正确排序来修复此错误。

# php - 希伯来语中的 php mkdir() 创建 gibrish 文件夹

> ID：11703711
> 
> 赞同：2
> 
> 时间：2012-07-28T18:46:03.573
> 
> 标签：php, html, mkdir

我正在尝试使用英文的 php 制作一个目录，并且它正在工作。但是当我在希伯来语中尝试时，它会像这样在 gibrish 中创建文件夹：׳”׳•׳¨׳“׳”| ׳׳©׳—׳§ ׳©׳•׳׳～</p>

我该如何解决？谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-28T19:41:07.210

PHP 在处理字符串时有一些 Unicode 支持，但内部 PHP 的字符串类型是单字节的，不支持多字节编码。如果您将 PHP 文件保存为 UTF-8 格式，则可以使用正确的 HTTP 编码以 UTF-8 输出字符串，但是 PHP 的许多函数不支持多字节字符串。有一些这样做，但仍然大多数没有。

我查看了 PHP 源代码，大多数文件系统函数（如`mkdir`不支持 Unicode）。它们对单字节字符串进行操作，这就是为什么当您尝试创建目录时会出现 ASCII 乱码。

您可以在调用之前尝试调用`setlocale`并将其设置为，看看这是否有任何区别。`he_IL``mkdir`

了解更多信息：

> 字符串是一系列字符，其中一个字符与一个字节相同。这意味着 PHP 仅支持 256 个字符集，因此不提供原生 Unicode 支持。查看[字符串类型的详细信息](http://www.php.net/manual/en/language.types.string.php#language.types.string.details)。

详细信息更多地讨论了不同的编码、多字节感知的函数和基于 PHP 中是否启用 Zend 多字节支持的不同行为，以及以不同编码保存文件如何影响 PHP 中的字符串。

不幸的是，此时，我不相信您将能够直接在 PHP 中创建包含多字节字符串的目录。

在内部，该函数在 file.c 中`mkdir`调用此函数[mkdir](http://lxr.php.net/xref/PHP_5_3/ext/standard/file.c#1416) ，该函数调用[_php_stream_mkdir](http://lxr.php.net/xref/PHP_5_3/main/streams/streams.c#1810)，后者使用`plain files wrapper`调用[php_mkdir_ex](http://lxr.php.net/xref/PHP_5_3/ext/standard/file.c#php_mkdir_ex)最终使用[virtual_mkdir](http://lxr.php.net/xref/PHP_5_3/TSRM/tsrm_virtual_cwd.c#1772)创建目录，该目录使用C mkdir 函数创建目录。

我认为当它调用 mkdir 在文件系统上创建目录时，所有编码都已丢失，它被视为单字节 char * 字符串。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-03-21T15:12:44.073

使用 mb_convert_encoding 将名称（字符串）从 UTF-8 转换为 ISO-8859-8。我已经使用 PHP 7 和 Windows 10 对其进行了测试。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-28T18:52:22.873

基本上你不能，除非你的操作系统的编码系统支持这些字符。希伯来语也必须是扩展 UTF-8 包的一部分，对吗？

例如，在 Windows 下，默认代码页是 iso-8859-1，它没有希伯来语。

我认为将其切换到 UTF-8 可能会起作用，因为现在新的 Windows 版本允许文件名中包含所有 Unicode 字符，但它并不真正推荐

# jquery - 使用列表中的选项构建动态选择，我需要将 .change 添加到最后一个选择选项

> ID：11703713
> 
> 赞同：0
> 
> 时间：2012-07-28T18:46:36.227
> 
> 标签：jquery

我有人帮助我，他想出了这个，效果很好。它使用来自 UL 的选项构建 3 个动态选择过滤器。

```
$(function() {
    renderNextLevel('#something > div > div');
});

function renderNextLevel(parent) {
    $(parent).children('ul').each(function() {
        var height = $(this).parentsUntil('#something').length;
        var current = $(parent).children('ul');
        var sel = $('.sel' + height);
        if (sel.length == 0) {
            sel = $('<select />');
            sel.attr('class', 'sel' + height);
            sel.attr('id', 'sel' + height);
            $('#something').append(sel);
            fopt =  $("<option />", {
                "value"   : "",
                "text"    : "Go to...",
            }).appendTo(sel);

            var nextLevel = function(text, idx) {
                var parents = $({});
                $('#something select').each(function() {
                    if($(this).index() > idx){
                        $(this).remove();
                    }
                });

                $('#something').find('li a').each(function() {
                    if ($(this).text() == text) {
                        parents = parents.add($(this).parent());
                    }
                });
                renderNextLevel(parents);
            };

            sel.change(function() {
                 nextLevel(sel.find('option:selected').text(), sel.index());
            });
        }

        $(this).children('li').each(function() {
            var opt = $('<option />');
            var link = $(this).children('a');
            var optVal = link.attr("href");
            var optText = link.text();
            if (sel.find('option[name="' + optText + '"]').length == 0) {
                sel.append(opt);
                opt.attr('value', optVal);
                opt.attr('name', optText);
                opt.text(optText);
            }
        });
    });
 } 
```

我现在需要最后一个选择框选项才能在选择时转到 URL。

```
$("#something select").change(function() {
    window.location = $(this).find("option:selected").val();
 }); 
```

但它不起作用。有什么帮助吗？

演示[http://jsfiddle.net/qjWH7/6/](http://jsfiddle.net/qjWH7/6/)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-28T18:50:39.970

当您动态生成选择元素时，您应该委托事件：

```
$(document).on('change', "#something select", function() {
    if (this.selectedIndex == 2) {
        window.location = $(this).val();
    }
}); 
```

# mongodb - 即使在索引字段上，MongoDB 排序也非常慢

> ID：11703716
> 
> 赞同：6
> 
> 时间：2012-07-28T18:47:34.840
> 
> 标签：mongodb, sorting, indexing

所以我今天遇到了这个问题，我的 MongoDB 查询非常慢并且超时。我发布了这个问题 - [MongoDB 记录太多？](https://stackoverflow.com/questions/11701103/mongodb-too-many-records)他的建议是正确的，我必须确保索引并删除不区分大小写。我在 Mongo shell 中尝试过，效果很好。

但是，当我通过 PHP 运行它时，它仍然是一样的 :( 然后我意识到查询在“id”（不是 _id）字段上有一个排序，当我删除它时，事情进展得很快。但是有了排序，它真的很慢。我已经在 id 字段上有一个索引。这是查询顺便说一句：

```
db.tweet_data.find({ 
...     $or: 
...         [ 
...             { in_reply_to_screen_name: /^kunalnayyar$/, handle: /^kaleycuoco$/, id: { $gt: 0 } }, 
...             { in_reply_to_screen_name: /^kaleycuoco$/, handle: /^kunalnayyar$/, id: { $gt: 0 } } 
...         ], 
...     in_reply_to_status_id_str: { $ne: null } 
...     
...     } ).sort({id:-1})explain() 
```

所以我的索引是：（不是复合的）`{ {id:-1} , {handle:1}, {in_reply_to_screen_name:1} }` 经过一些阅读，我意识到它应该是一个复合索引，我尝试了两种变体但没有成功：1\. `{handle:1, in_reply_to_screen_name:1, id:-1}` 2.`{id:-1,handle:1, in_reply_to_screen_name:1}`

我不确定我哪里出错了，但我很确定问题是在这里索引。我太忙了，无法理解要索引的顺序和字段

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-28T20:59:45.603

您应该`explain`针对您的查询运行，它将帮助您弄清楚发生了什么。

Mongo 很可能没有使用索引进行过滤和排序。当您使用 时`$or`，它可以使用多个索引来匹配选项。但是，当您添加 a 时`sort`，它可能不会使用可用于过滤的索引。

当您要对查询进行排序时，您需要确保已排序的字段在您要命中的索引中（最后，或者它不能使用它来排序）。

您也可以通过传递索引提示来加快速度。我不知道您的查询匹配多少个文档，但如果它是一个小数字，并且您确保初始条件符合索引，则`_id`可以快速完成排序。

# c# - 如何从 visio 自动化获取泳道形状对象中的形状？

> ID：11703719
> 
> 赞同：1
> 
> 时间：2012-07-28T18:48:24.097
> 
> 标签：c#, automation, ms-office, visio

我正在使用办公自动化将 visio 文件转换为指定的 xml 格式流程图，我需要使用泳道数据作为工作流过程的容器。[那么我怎样才能得到工作流形状和泳道](http://i.stack.imgur.com/nqmy9.png)之间的关系呢？

**代码**

```
IVisio.Shape shape = o as IVisio.Shape;

double width = shape.Cells["Width"]
        .Result[Microsoft.Office.Interop.Visio.VisUnitCodes.visMillimeters];
double height = shape.Cells["Height"]
        .Result[Microsoft.Office.Interop.Visio.VisUnitCodes.visMillimeters];
double pinX = shape.Cells["PinX"]
        .Result[Microsoft.Office.Interop.Visio.VisUnitCodes.visMillimeters];
double pinY = shape.Cells["PinY"]
        .Result[Microsoft.Office.Interop.Visio.VisUnitCodes.visMillimeters]; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-29T10:47:50.217

返回与传入和传出连接关联的形状的 ID。

```
using Visio = Microsoft.Office.Interop.Visio;
visioObj = (Visio.Application)                  
     System.Runtime.InteropServices.Marshal.GetActiveObject("Visio.Application");

Array ids = shape.ConnectedShapes(Visio.VisConnectedShapesFlags
        .visConnectedShapesAllNodes, "");

// Using first item and get name   
string name = visioObj.ActivePage.Shapes[ids.GetValue(0)].Name; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-29T21:41:09.593

要查找容器关系，可以使用 API 与此方法：

```
public class ShapeWrapper
{
    public IVisio.Shape Shape { get; set; }

    private List<ShapeWrapper> children = new List<ShapeWrapper>();
    public List<ShapeWrapper> Children { get { return this.children; } }

    public ShapeWrapper(IVisio.Shape shape)
    {
        Shape = shape;
    }
}

private void FindChildren(ShapeWrapper shapeWrapper, 
                              List<IVisio.Shape> addedShapes)
{
    IVisio.Selection children = shapeWrapper
       .Shape.SpatialNeighbors[
            (short)IVisio.VisSpatialRelationCodes.visSpatialContain, 
            0,
            (short)IVisio.VisSpatialRelationFlags.visSpatialFrontToBack];

    foreach (IVisio.Shape child in children)
    {
        if (!addedShapes.Contains(child))
        {
             //MessageBox.Show(child.Text);
             ShapeWrapper childWrapper = new ShapeWrapper(child);
             shapeWrapper.Children.Add(childWrapper);

             FindChildren(childWrapper, addedShapes);
        }
    }
} 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2017-03-07T07:04:33.030

您使用 PackagePart 的数据创建 XML 文档。您需要特别注意管理您创建的特定类型 XML 文档的模式的 XML 名称空间。您创建一个包含 XML 的新文件并将该文件保存到包中的某个位置。在新的 PackagePart 和 Package 或其他 PackagePart 对象之间创建必要的关系。您更新需要参考新零件的任何现有零件。例如，如果您将新的页面内容部分（新页面）添加到文件中，您还需要更新页面索引部分（/visio/pages/pages.xml 文件）以包含有关新页面的正确信息。

# c# - 如何在这个嵌套的 GridView 中显示问题及其答案？

> ID：11703720
> 
> 赞同：0
> 
> 时间：2012-07-28T18:48:27.493
> 
> 标签：c#, asp.net, gridview, sql-server-2008-r2

我是一名新的 ASP.NET 开发人员，我开发了一个简单的基于 Web 的测验引擎应用程序，类似于 ASP.NET 网站中解释的应用程序。应用程序应该显示不同类型的问题，例如具有单个答案或多个答案的多项选择问题。我现在正在努力解决将显示问题及其可能选择（两个选择或 4 或 5 个选择）的查询。我有以下数据库设计：

```
Questions Table: QuestionID, Question, QuestionOrder, AnswerExplanation
Answers Table: AnswerID, Answer
Quiz Table: QuizID, Title, Description
QuizContent Table: ID, QuizID, QuestionID, AnswerID, isCorrect 
```

*（isCorrect 是一个标志，表示该问题的正确答案）*

我首先按照 StackOverFlow 中某人的建议将其实现为嵌套的 GridView。但是现在我不知道如何仅检索带有可能答案的问题，然后单击下一步按钮转到另一个问题。**那么你能帮我修改一下吗？**

我的 ASP.NET 代码：

```
<asp:GridView ID="GridView1" runat="server" AutoGenerateColumns="False" 
                        DataKeyNames="QuestionID" DataSourceID="SqlDataSource1">
                        <Columns>
                            <asp:BoundField DataField="QuestionID" HeaderText="QuestionID" 
                                InsertVisible="False" ReadOnly="True" SortExpression="QuestionID" />
                            <asp:BoundField DataField="Question" HeaderText="Question" 
                                SortExpression="Question" />
                            <asp:BoundField DataField="QuestionOrder" HeaderText="QuestionOrder" 
                                SortExpression="QuestionOrder" />
                            <asp:BoundField DataField="AnswerExplanation" HeaderText="AnswerExplanation" 
                                SortExpression="AnswerExplanation" />
                            <asp:TemplateField>
                                <ItemTemplate>
                                    <asp:GridView ID="AnswersGridView" runat="server" AutoGenerateColumns="false"
                                                    DataKeyNames="AnswerID" DataSourceID="SqlDataSource2">
                                        <Columns>
                                            <asp:BoundField DataField="AnswerID" HeaderText="AnswerID" 
                                                InsertVisible="False" ReadOnly="True" SortExpression="AnswerID" />
                                            <asp:BoundField DataField="Answer" HeaderText="Answer" 
                                                SortExpression="Answer" />
                                        </Columns>
                                    </asp:GridView>
                                    <asp:SqlDataSource ID="SqlDataSource2" runat="server" 
                                                ConnectionString="<%$ ConnectionStrings:Quiz2ConnectionString %>" 
                                                SelectCommand="SELECT * FROM [Answers]"></asp:SqlDataSource>
                                </ItemTemplate>
                            </asp:TemplateField>
                        </Columns>
                    </asp:GridView>
                    <asp:SqlDataSource ID="SqlDataSource1" runat="server" 
                        ConnectionString="<%$ ConnectionStrings:Quiz2ConnectionString %>" 
                        SelectCommand="SELECT * FROM [Questions]"></asp:SqlDataSource> 
```

现在，我必须提出一个查询，它可以显示任何类型的问题及其可能的答案或选择（2 个或 4 个或 6 个选择），那么**该怎么做呢？**

注意：我是否应该在我的设计中使用 QuizID 作为 SessionParameter，如 ASP.NET 代码所示？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-28T19:13:17.520

If I understand you correctly then change PageSize=1 on parent Gridview. This will display only one row of parent GridView. Which is probably the questions Gridview. Also change AllowPaging=true. oh... you seem to be very new. The query you have written is not correct. Study Sql and learn .net parameterized queries. In case you use the Master-Child relationship as you did then the child grid will use the SelectedDatakey.Value to provide to the child query. " SelectCommand="SELECT * FROM [Answers] where QuestionId=@QuesionId">

you also have to include QuestionId in the Answers table for foreign key relationship. YOu seem very new first study. databases and query then you will be alittle at ease.

# android - Android - 单击菜单按钮时显示 Toast 或其他行为

> ID：11703724
> 
> 赞同：0
> 
> 时间：2012-07-28T18:49:13.690
> 
> 标签：android, android-ui, android-menu

如果按下菜单按钮，我希望能够显示吐司或对话框或其他选项，而不是有时显示菜单。

我试过这个，但当然它不起作用，因为 onCreateOptionsMenu 是在第一次加载 Activity 时调用的，而不是在禁用菜单键时。有什么办法可以做我想做的事吗？

```
@Override
public boolean onCreateOptionsMenu(Menu menu) {
   if (disableMenu())
      Toast.makeText(this, R.string.no_menu_for_you, Toast.LENGTH_LONG).show();
} 
```

编辑：我添加了 .show() 以便人们不会关注那部分。这不是导致问题的原因。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-28T18:51:18.443

你忘了打电话`show()`：

```
 Toast.makeText(this, R.string.no_menu_for_you, Toast.LENGTH_LONG).show(); 
```

**编辑 ：**

如您所愿`capture the click of a menu buttin`，我想这会起作用，但我没有尝试过：

```
protected boolean onKeyDown(int keyCode, KeyEvent event) {
     if (keyCode == KeyEvent.KEYCODE_MENU) {
         // When Menu Key is pressed
         Toast.makeText(this, R.string.no_menu_for_you, Toast.LENGTH_LONG).show();
         return true;
     }
     return false;
 } 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-28T18:56:59.870

您忘记了`.show()`，应该使用`onPrepareOptionsMenu`，每次按下菜单按钮时都会调用它。

```
@Override
public boolean onPrepareOptionsMenu(Menu menu) {
   super.onPrepareOptionsMenu(menu);

   if (disableMenu())
      Toast.makeText(this, R.string.no_menu_for_you, Toast.LENGTH_LONG).show();

   return true;
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-28T18:53:13.287

您忘记在吐司上调用 show() 了。

如果这无济于事，请尝试在 onCreateOptionsMenu(Menu menu) 中返回 true，然后在 onOptionsItemSelected(MenuItem item) 中实现您的菜单行为。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-28T18:51:33.227

要求`.show()`显示`Toast`为

```
Toast.makeText(this, R.string.no_menu_for_you, Toast.LENGTH_LONG).show(); 
```

代替

```
Toast.makeText(this, R.string.no_menu_for_you, Toast.LENGTH_LONG); 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2014-07-16T10:15:44.550

您忘记调用**`show()`**显示吐司所需的方法。

并且要对菜单按钮执行任何操作，您可以使用以下方式。

`onKeyDown(int keyCode, KeyEvent event)`像我一样覆盖方法。

```
@Override
    public boolean onKeyDown(int keyCode, KeyEvent event) {

        switch (keyCode) 

        case KeyEvent.KEYCODE_MENU:

        Toast.makeText(getApplicationContext(),"Menu key Pressed", 3000).show();    

            break;  
        }

                return false;
    } 
```

# jquery - 如果选中复选框，则向变量添加值，如果未选中则恢复先前的值（jquery）

> ID：11703725
> 
> 赞同：2
> 
> 时间：2012-07-28T18:49:15.520
> 
> 标签：jquery, variables, checkbox

我是 jquery 的菜鸟（对于“菜鸟”，我的意思是“我几个小时前开始使用 jquery”）。我想做的很简单：在选中复选框时向变量添加一个值，如果未选中复选框，则恢复同一变量的先前值。该值必须写在文档的范围内。我写的代码有两个问题：

1-当我取消选中复选框时，值不会恢复；

2-我希望该值始终显示在文档中，即使是在第一次加载页面时，我也不知道该怎么做（现在它出现在第一次点击后，因为它写在 if 条件中）

这是脚本：它有什么问题？

```
<script type="text/javascript">
    var pds1=0;
    $(document).ready(function() {
        $("#mat1").click(function() {
            if($('#mat1').is(':checked')) { 
                pds1=pds1+10;
                $('#perk1').html(pds1);
            } 
            else {
                if(pds1>0)
                {
                    pds1=pds1-10;
                }
                else {}
            }
        });
    });
</script> 
```

这是HTML：

```
<input id="mat1" type="checkbox" /> <span id="perk1"></span> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-28T18:58:35.733

无论选中还是未选中，您都必须更新跨度。您的代码如下所示：

```
var pds1 = 0;
$(document).ready(function () {
    $('#perk1').html(pds1);

    $("#mat1").click(function () {
        if ($('#mat1').is(':checked')) 
           pds1 = pds1 + 10;
        else if (pds1 > 0) 
           pds1 = pds1 - 10;
        $('#perk1').html(pds1);
    });
}); 
```

jsFiddle：http: [//jsfiddle.net/eHasK/2/](http://jsfiddle.net/eHasK/2/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-28T19:02:29.947

所以，你追求两件事：

1.  页面加载时显示变量的初始值
2.  未选中该框时显示更新的值。

见下文：

```
<script type="text/javascript">
var pds1=0;
$(document).ready(function() {
    $('#perk1').html(pds1); // Display initial value on page load
    $("#mat1").click(function() {
        if($('#mat1').is(':checked')) { 
            pds1=pds1+10;
            $('#perk1').html(pds1);
        } else {
        if(pds1>0)
        {
            pds1=pds1-10;
            $('#perk1').html(pds1); // Display updated value on uncheck
        }
        else {}
        }
    });
});
</script> 
```

您可能还对数据绑定框架感兴趣，例如 Knockout

[http://knockoutjs.com/documentation/introduction.html](http://knockoutjs.com/documentation/introduction.html)

# python - Python 绘制 ASCII 地图

> ID：11703727
> 
> 赞同：6
> 
> 时间：2012-07-28T18:49:33.747
> 
> 标签：python, python-2.7, mud, online-game

我需要在我用 python 构建的 MUD 中从玩家的当前房间绘制 2 半径地图（或更多，如果可能的话）。房间被设置为容器，`self.exits = {'west':1, 'north':2}`其中键是值（相邻房间的 UID）所在的方向。房间仅以这种方式链接。self.location 为 0 的玩家可以输入 'n' 并且他们的位置，基于上面的变量，然后是 2，并且那个房间的内容将有玩家的 UID 附加到它的内容。

因此，我希望根据上述变量显示如下所示的地图，其中“u”是玩家的当前位置。

```
 [ ]
     |
[ ]-[u] 
```

我已经完成了**这**部分，因为这只是 1 的半径。这是我如何执行此操作的一小段（经过大量修改以在此处发布），您会看到我发布的原因，因为它的代码很差。

```
mloc = '[u]'
mn = '   '
mw = '   '
spn= ' '
spw= ' '
for Exit in room.exits.keys():
  if Exit == 'north':
    mn = '[ ]'
    spn = '|'
  if Exit == 'west': 
    mw = '[ ]-'
# player.hear() is our function for printing a line to the player's screen
player.hear('    '+mn)
player.hear('     '+sp)
player.hear(mw+mloc) 
```

在我的精神错乱中，我设法在所有 8 个不同的方向（对角线，不包括向上或向下）上完成了这项工作。但是我必须循环我刚刚用我的第一个 for 循环解析的房间，然后绘制它们，然后将它们全部隔开，然后考虑到 (sp)ace 的重叠，例如 '\' 或 ' |' 如果有相互交叉的路径。这个小任务立刻变成了噩梦，在我完成之前就变成了 200 行。

另一个障碍是我只能逐行打印。所以如果地图是 50 个字符高，我必须有`player.hear()`50 行，我不反对。在发布答案之前请记住这一点。

我对格式也不挑剔。我只是想要一个“一目了然的地图”来帮助玩家在世界各地旅行。

多谢你们。我希望我提供了足够的信息。让我知道，如果没有。（这是我引用的整个（未完成和可怕的）模块的链接[。Map.py](http://code.google.com/p/gilmud/source/browse/Map.py)

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-07-28T20:20:54.840

这段代码有严重的问题。让我们从头开始设计。这将有望成为如何设计和构建类和数据结构的一个很好的教训。

首先，您应该围绕一个`Map`类组织您的代码，然后将您的房间表示为一个网格。您不应该考虑“房间 1”、“房间 2”等（在地图上很难跟踪），而应该根据坐标来考虑房间。

现在，我们在开始时会忽略一些可能的特征，包括玩家只看到他去过的房间、玩家留在地图的中心以及对角线路径。如果您想要它们，您可以稍后在基本功能正常工作后将它们放入。现在，我们的目标是看起来有点像这样：

```
[ ]-[u] [ ] [ ]
 |
[ ]-[ ]-[ ] [ ]
     |
[ ]-[ ]-[ ] [ ]
 |
[ ]-[ ]-[ ]-[ ] 
```

也就是说，我们将其表示为一个网格，其中一些房间相连，而另一些房间则没有。让我们让每个房间都有一个坐标对，有点像这样：

```
 0   1   2   3
   0 [ ]-[u] [ ] [ ]
      |
   1 [ ]-[ ]-[ ] [ ]
          |
   2 [ ]-[ ]-[ ] [ ]
      |
   3 [ ]-[ ]-[ ]-[ ] 
```

让 x 沿着顶部，y 沿着侧面。左上角是 (0, 0)，`[u]`里面是 (0, 1)。

现在，我们`Map`类的组件是什么？

1.  地图高度：整数

2.  地图宽度：整数）

3.  player_x, player_y：玩家坐标

4.  可能的路径：我们可以在它们之间移动的成对房间列表。上面的地图将表示为：

    ```
    [((0, 0), (1, 0)), ((0, 0), (1, 0)), ((1, 0), (1, 1)), ((1, 1), (2, 1)),
     ((1, 0), (1, 2)), ((0, 2), (1, 2)), ((1, 2), (2, 2)), ((0, 2), (0, 3)),
     ((0, 3), (1, 3)), ((1, 3), (2, 3)), ((2, 3), (3, 3))] 
    ```

请注意，我订购了每一对，以便较大的元组在前（这在以后很重要）。

所以现在我们有了我们的设计，让我们编写那个`Map`类！

我可以想到我们想要的四种方法：`print_map`、`move`和初始化程序。初始化很简单：只需设置我们上面列出的四个属性：

```
class Map:
    def __init__(self, height, width, player_x, player_y, paths):
        self.height = height
        self.width = width
        self.x = player_x
        self.y = player_y
        self.paths = paths 
```

现在，`move`很简单。给定一个方向 n/e/s/w：

```
 def move(self, direction):
        if direction == "n":
            if ((self.x, self.y - 1), (self.x, self.y)) not in self.paths:
                print "Cannot go north"
            else:
                self.y -= 1 
```

“北”的`move`功能只是检查是否有通往我们所在房间上方的路径。

现在最有趣的部分是：打印地图。为此，您可以循环遍历行（0 到`self.height`）和列（0 到`self.width`）。（*注意*：您不能`print`在这种情况下使用，因为它会自动在字符串后放置换行符或空格。相反，我们使用[sys.stdout.write](https://stackoverflow.com/questions/255147/how-do-i-keep-python-print-from-adding-spaces)。

```
def print_map(self):
    for y in range(0, self.height):
        # print the yth row of rooms
        for x in range(0, self.width):
            if self.x == x and self.y == y:
                sys.stdout.write("[u]")  # this is the player's room
            else:
                sys.stdout.write("[ ]")  # empty room
            # now see whether there's a path to the next room
            if ((x, y), (x + 1, y)) in self.paths:
                sys.stdout.write("-")
            else:
                sys.stdout.write(" ")
        # now that we've written the rooms, draw paths to next row
        print  # newline
        for x in range(0, self.width):
            sys.stdout.write(" ")  # spaces for above room
            if ((x, y), (x, y + 1)) in self.paths:
                sys.stdout.write("|  ")
            else:
                sys.stdout.write("   ")
        print 
```

现在，让我们将它们放在一起并尝试一下。这是代码：

```
import sys

class Map:
    def __init__(self, height, width, player_x, player_y, paths):
        self.height = height
        self.width = width
        self.x = player_x
        self.y = player_y
        self.paths = paths

    def move(self, direction):
        if direction == "n":
            if ((self.x, self.y - 1), (self.x, self.y)) not in self.paths:
                print "Cannot go north"
            else:
                self.y -= 1
        if direction == "s":
            if ((self.x, self.y), (self.x, self.y + 1)) not in self.paths:
                print "Cannot go south"
            else:
                self.y += 1
        if direction == "e":
            if ((self.x, self.y), (self.x + 1, self.y)) not in self.paths:
                print "Cannot go east"
            else:
                self.x += 1
        if direction == "w":
            if ((self.x - 1, self.y), (self.x, self.y)) not in self.paths:
                print "Cannot go west"
            else:
                self.x -= 1

    def print_map(self):
        for y in range(0, self.height):
            # print the yth row of rooms
            for x in range(0, self.width):
                if self.x == x and self.y == y:
                    sys.stdout.write("[u]")  # this is the player's room
                else:
                    sys.stdout.write("[ ]")  # empty room
                # now see whether there's a path to the next room
                if ((x, y), (x + 1, y)) in self.paths:
                    sys.stdout.write("-")
                else:
                    sys.stdout.write(" ")
            # now that we've written the rooms, draw paths to next row
            print  # newline
            for x in range(0, self.width):
                sys.stdout.write(" ")  # spaces for above room
                if ((x, y), (x, y + 1)) in self.paths:
                    sys.stdout.write("|  ")
                else:
                    sys.stdout.write("   ")
            print

paths = [((0, 0), (1, 0)), ((0, 0), (1, 0)), ((1, 0), (1, 1)), ((1, 1),
         (2, 1)), ((1, 1), (1, 2)), ((0, 2), (1, 2)), ((1, 2), (2, 2)),
         ((0, 2), (0, 3)), ((0, 3), (1, 3)), ((1, 3), (2, 3)), ((2, 3),
         (3, 3))]
m = Map(4, 4, 0, 0, paths)

while True:
    m.print_map()
    direction = raw_input("What direction do you want to move? [n/e/s/w] ")
    m.move(direction) 
```

请注意，我在底部添加了一个部分，用于创建地图并允许玩家在其周围移动。这是它运行时的样子：

```
Davids-MacBook-Air:test dgrtwo$ python Map.py 
[u]-[ ] [ ] [ ] 
     |          
[ ] [ ]-[ ] [ ] 
     |          
[ ]-[ ]-[ ] [ ] 
 |              
[ ]-[ ]-[ ]-[ ] 

What direction do you want to move? [n/e/s/w] e
[ ]-[u] [ ] [ ] 
     |          
[ ] [ ]-[ ] [ ] 
     |          
[ ]-[ ]-[ ] [ ] 
 |              
[ ]-[ ]-[ ]-[ ] 

What direction do you want to move? [n/e/s/w] s
[ ]-[ ] [ ] [ ] 
     |          
[ ] [u]-[ ] [ ] 
     |          
[ ]-[ ]-[ ] [ ] 
 |              
[ ]-[ ]-[ ]-[ ] 

What direction do you want to move? [n/e/s/w] w
Cannot go west
[ ]-[ ] [ ] [ ] 
     |          
[ ] [u]-[ ] [ ] 
     |          
[ ]-[ ]-[ ] [ ] 
 |              
[ ]-[ ]-[ ]-[ ] 

What direction do you want to move? [n/e/s/w] e
[ ]-[ ] [ ] [ ] 
     |          
[ ] [ ]-[u] [ ] 
     |          
[ ]-[ ]-[ ] [ ] 
 |              
[ ]-[ ]-[ ]-[ ] 
```

可以对这段代码进行许多改进（特别是`move`方法是重复的），但这是一个好的开始。尝试制作 20x20 的地图，您会看到它展开得很好。

ETA：我应该注意到`print_map`可以用更短的形式重写为：

```
def print_map(self):
    for y in range(0, self.height):
        print "".join(["[%s]%s" %
                    ("u" if self.x == x and self.y == y else " ",
                     "-" if ((x, y), (x + 1, y)) in self.paths else " ")
                        for x in range(0, self.width)])
        print " " + "   ".join(["|" if ((x, y), (x, y + 1)) in self.paths
                              else " " for x in range(0, self.width)]) 
```

但这有点激烈。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-07-29T05:30:26.610

我这样做是作为一个练习，房间和网格“打印自己”。我将此添加到讨论中，因为最终使用更大的网格可能更容易实现。

## ASCII 地图

```
+++++++++++++++
+++++++++++++++
+++++++++++++++
++++++   ++++++
++++++ 2 ++++++
++++++/| ++++++
+++  / | ++++++
+++ 3--1 ++++++
+++     \++++++
+++++++++\  +++
+++++++++ 4 +++
+++++++++   +++
+++++++++++++++
+++++++++++++++
+++++++++++++++ 
```

此网格中的每个单元格都是三乘三的“+”符号。实现了四个房间，其 id 值为 1 到 4。房间之间的连接表示为斜杠、反斜杠和管道。

## 编码

```
class Room(object):
    def __init__(self, id, loc, exits):
        self.id = id # unique identifier, may be a name
        self.row = loc[0] # loc is tuple of (row, col)
        self.col = loc[1] 
        # exits is a list where 'X' means no exit and 
        # any other value is id of destination
        self.exits = exits 

    def __str__(self):
        directions = '\\|/- -/|\\'
        room = [ e if e == 'X' else ' ' for e in self.exits ]
        for idx in range(len(room)):
            if room[idx] == ' ':
                room[idx] = directions[idx]
            if room[idx] == 'X':
                room[idx] = ' '
        room[4] = self.id[0] # only print first char of id
        return ''.join(room)

class Map(object):
    def __init__(self, rows, cols, rooms):
        self.rows = rows
        self.cols = cols
        self.rooms = rooms

    def __str__(self):
        world = []
        for i in range(self.rows * 3):
            world.append( ['+++'] * self.cols )
        for room in self.rooms:
            ascii = str(room)
            x = room.col
            y = room.row
            for idx in range(0, 3):
                cell = ascii[idx*3:idx*3+3]
                world[y*3+idx][x] = cell
        return '\n'.join( [ ''.join(row) for row in world ] )

if __name__ == '__main__':
    # set up four rooms
    # each room has unique id (string of any length) and coordinates
    # it also has a set of 8 possible exits, represented as a list where
    # 'X' means exit is blocked and valid exits contain the id of the target room
    r1 = Room(id='1', loc=(2,2), exits=['X','2','X',
                                        '3',' ','X',
                                        'X','X','4',])
    r2 = Room(id='2', loc=(1,2), exits=['X','X','X',
                                        'X',' ','X',
                                        '3','1','X',])
    r3 = Room(id='3', loc=(2,1), exits=['X','X','2',
                                        'X',' ','1',
                                        'X','X','X',])
    r4 = Room(id='4', loc=(3,3), exits=['1','X','X',
                                        'X',' ','X',
                                        'X','X','X',])
    # initialize Map with a list of these four rooms
    map = Map(rows = 5, cols=5, rooms=[r1, r2, r3, r4])
    print map 
```

移动例程没有实现，为了使这种表示起作用，只有单个字符 id 会很好地显示出来。

本系统的优点：

*   易于添加和删除房间
*   房间的定义是人类可读的
*   输出功能超载`__str__`，因此房间和网格“打印自己”，这可能对未来的调试或适应未来的格式有用，例如作为 HTML 表格中的单元格。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-29T06:15:34.463

基于坐标的地图有很多优点，但是考虑到很多优质的泥浆使用的是传统的房间世界，而且人们已经为许多泥浆和泥浆客户端制作了自动地图，因此为没有坐标的泥浆制作自动地图也不是不可能的. 您只需要根据具体情况处理冲突。

但是，您仍然可以使用@david-robinson 的答案。你想要做的是保持一个小地图大致以玩家为中心，并使用出口数据动态更新它。不要试图保存整个区域的地图；通过动态更新，您将避免一些地理冲突。

要将地图写入泥客户端，您需要做的就是将地图线以适当的间距写入并用新线终止。您将所有地图线放入一个列表中，以便将其作为一组线发送（您不希望在地图的线之间插入一些其他线，例如当它发送出套接字时），并且任何泥客户端都会打印它正确（当然使用等宽字体）。

# php - WordPress相关帖子错误

> ID：11703728
> 
> 赞同：1
> 
> 时间：2012-07-28T18:49:39.547
> 
> 标签：php, wordpress

我不仅在 Google 上进行了搜索，还在其他地方（包括此处）进行了搜索，但找不到任何可以帮助解决此问题的内容。

这是问题所在。我有一个基于标签而不是类别的相关帖子片段，我在 WordPress 主题中使用它，并且我已经使用了很长时间，并且效果非常好。这是：

```
 $tags = wp_get_post_tags($post->ID);
    $tagIDs = array();
    if ($tags) {
        $tagcount = count($tags);
        for ($i = 0; $i < $tagcount; $i++) {
            $tagIDs[$i] = $tags[$i]->term_id;
        }
    $args=array(
    'tag__in' => $tagIDs,
    'post__not_in' => array($post->ID),
    'showposts'=>mytheme_option( 'related_count' ),
    'ignore_sticky_posts'=>1
    );
    $my_query = new WP_Query($args);
    if( $my_query->have_posts() ) {
        echo '<h4>'. __('Other Posts You May Be Interested In', "themename"). ':</h4><ul>';
        while ($my_query->have_posts()) : $my_query->the_post(); ?>

            <li class="imglink">

                <!-- post loop stuff goes here -->

            </li>

<?php endwhile;
echo '</ul>';
}
else {
echo '<h4>'. __('Other Posts You May Be Interested In', "themename"). ':</h4>
'. __('<p>There are no related posts at this time.</p>', "themename"). '';
}   
}
$post = $original_post;
wp_reset_query(); 
```

就像我说的那样，它真的很好用。如果帖子具有相同的标签，则显示：

> 您可能感兴趣的其他帖子：显示具有相同标签的帖子

但问题是：如果给单个帖子一个标签，而没有其他帖子具有相同的标签，则显示如下：

> 您可能感兴趣的其他帖子：目前没有相关帖子。

现在，如果没有为帖子分配标签，则绝对不会显示任何内容。应该显示相关帖子的 div 是空的，但应该说没有相关帖子。

我一直在寻找解决方案并尝试了许多不同的方法来纠正这个问题，但我似乎无法理解它。有人可以帮助我获得：

> 您可能感兴趣的其他帖子：目前没有相关帖子。

如果帖子没有标签，则显示。非常感谢您的任何帮助，并在此先感谢您。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-28T19:07:43.057

我相信问题来自函数顶部的条件：

```
$tags = wp_get_post_tags($post->ID);

$tagIDs = array();
if ($tags) {
    # All of your code is in this conditional, 
    # if there are no tags, nothing will happen
} 
```

如果没有找到该帖子的标签，它会跳过您的所有代码并且不呈现任何内容。代码底部的 else 语句仅在当前帖子有标签但没有其他帖子包含该标签时才会执行。

**根据要求编辑**示例 - 您需要有 2 个 else 条件来回显无帖子内容，一个用于如果没有标签，一个用于如果有标签但未找到帖子：

```
$tags = wp_get_post_tags($post->ID);

$tagIDs = array();
if ( count( $tags ) > 0) {
    // setup $tagIDs and perform query...

    if( $my_query->have_posts() ) {
        // Echo out posts.
    } else {
        echo '<h4>'. __('Other Posts You May Be Interested In', "themename"). ':</h4>
        '. __('<p>There are no related posts at this time.</p>', "themename"). '';
    }
} else {
    echo '<h4>'. __('Other Posts You May Be Interested In', "themename"). ':</h4>
    '. __('<p>There are no related posts at this time.</p>', "themename"). '';
} 
```

那应该这样做。但是，我可能会建议将内容包装到一个函数中。然后，您可以在函数末尾回显无帖子内容，如果找到帖子，则“返回”。那你就不会重蹈覆辙了。

# php - 将具有特定键的数组项移动到数组中的第一个位置，PHP

> ID：11703729
> 
> 赞同：21
> 
> 时间：2012-07-28T18:49:39.950
> 
> 标签：php, arrays

PHP中将键选择的数组元素移动到第一个位置的最优雅的方法是什么？

输入：

```
$arr[0]=0;
$arr[1]=1;
$arr[2]=2;
....
$arr[n]=n;
$key=10; 
```

输出：

```
$arr[0]=10;
$arr[1]=0;
$arr[2]=1;
$arr[3]=2;
....
$arr[n]=n; 
```

* * *

## 回答 #1

> 赞同：35
> 
> 时间：2012-07-28T18:57:45.940

使用[`array_unshift`](http://php.net/manual/en/function.array-unshift.php)：

```
$new_value = $arr[n];
unset($arr[n]);
array_unshift($arr, $new_value); 
```

* * *

## 回答 #2

> 赞同：15
> 
> 时间：2016-07-27T20:02:42.863

无需取消设置键。为了简短起见，请执行以下操作

```
//appending $new in our array 
array_unshift($arr, $new);
//now make it unique.
$final = array_unique($arr); 
```

**[演示](http://phpfiddle.org/lite?code=%3C?php%5Cn$arr%20=%20array(1,2,3,4,5,6,7,8,3,10);%5Cnvar_dump($arr);%5Cnecho%20'%3Cbr%3E';%5Cn$new%20=%20intval('3');%5Cnarray_unshift($arr,%20$new);%5Cnvar_dump(array_unique($arr));%5Cn?%3E%5Cn)**

* * *

## 回答 #3

> 赞同：12
> 
> 时间：2013-07-29T19:08:23.433

老问题，已经回答了，但如果你有一个关联数组，你可以使用 array_merge。

```
$arr = array_merge([$key=>$arr[$key]], $arr); 
```

* * *

已编辑（上面显示 PHP7+ 符号，下面是示例）

```
$arr = ["a"=>"a", "b"=>"b", "c"=>"c", "d"=>"d"];
$arr = array_merge(["c"=>$arr["c"]], $arr); 
```

本次手术的有效结果

```
$arr == ["c"=>"c", "a"=>"a", "b"=>"b", "d"=>"d"] 
```

* * *

## 回答 #4

> 赞同：7
> 
> 时间：2012-07-28T19:01:06.607

像这样的东西应该工作。检查数组键是否存在，获取它的值，然后获取`unset`它，然后使用它`array_unshift`再次创建项目并将其放在开头。

```
if(in_array($key, $arr)) {
    $value = $arr[$key];
    unset($arr[$key]);
    array_unshift($arr, $value);
} 
```

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2012-07-28T18:56:04.667

```
<?php
$key = 10;
$arr = array(0,1,2,3);
array_unshift($arr,$key);
var_dump($arr) //10,0,1,2,3
?> 
```

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2012-07-28T19:11:09.147

```
$arr[0]=0;
$arr[1]=1;
$arr[2]=2;
$arr[3]=10;

$tgt = 10;
$key = array_search($tgt, $arr);
unset($arr[$key]);
array_unshift($arr, $tgt);

// var_dump( $arr );
array
0 => int 10
1 => int 0
2 => int 1
3 => int 2 
```

* * *

## 回答 #7

> 赞同：3
> 
> 时间：2015-12-04T09:17:40.777

由于任何数字键都将被重新索引`array_unshift`（如[doc 中所述](http://php.net/manual/en/function.array-unshift.php)），因此最好使用`+`数组联合运算符在数组的第一个位置移动具有特定键的项目：

```
$item = $arr[$key];
unset($arr[$key]);
$arr = array($key => $item) + $arr; 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2012-07-28T20:32:04.727

```
$tgt = 10;
$key = array_search($tgt, $arr);
for($i=0;$i<$key;$i++)
{
   $temp = $arr[$i];
   $arr[$i] = $tgt;
   $tgt = $temp;
} 
```

在这个简单的代码之后，您需要做的就是显示重新排列的数组。:)

# eclipse - 无法将德比性质添加到项目中

> ID：11703734
> 
> 赞同：2
> 
> 时间：2012-07-28T18:50:50.570
> 
> 标签：eclipse, jakarta-ee, derby

我在我的项目中添加（和删除）德比性质时遇到了麻烦。我确实设法在我的一个项目中添加和运行 derby，但现在我无法将它添加到任何新项目（动态 Web 项目或 java）中。

我收到此错误：

> 将 Derby jar 添加到项目“web222”时出错：java.lang.ClassCastException：org.eclipse.ui.internal.WorkbenchWindow 无法转换为 org.eclipse.jface.window.ApplicationWindow”

我正在使用`Eclipse Juno EE`. 我究竟做错了什么？

# c - 不使用指针的堆栈实现

> ID：11703739
> 
> 赞同：0
> 
> 时间：2012-07-28T18:51:42.103
> 
> 标签：c, algorithm, data-structures

我需要实现一个非常基本的堆栈数据结构，以便在`C`不使用指针的情况下保存整数。这可能只使用数组吗？简单的伪代码将不胜感激。

编辑：我正在使用一个名为[UPPAAL](http://www.uppaal.org/)的模型检查工具，它支持的基本功能，`C`我需要使用`UPPAAL`不支持的递归函数。我考虑过使用我自己的堆栈来实现递归，因为`UPPAAL`不支持指针。有更好的想法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-28T18:57:53.053

假设您被允许为整个结构进行一次动态分配（您必须以一种或另一种方式），您可以只使用*整数*作为偏移量：

```
unsigned int capacity = 100;
unsigned int top      = 0;

int * buf = malloc(sizeof(int) * capacity);

// push:
buf[top++] = n;

// pop:
int value = buf[--top];

// empty:
int is_empty = (top == 0);

// increase capacity:
if (top == capacity)
{
    int * tmp = realloc(buf, capacity * 2 * sizeof(int));
    if (!tmp) { /* out of memory, die */ }
    buf = tmp;
    capacity *= 2;
}

// destroy
free(buf); 
```

此代码仅用于说明；在您的实现中，您显然会检查溢出和下溢。

# android - 某些设备会忽略 Manifest 中的字符串资源，Parse Error

> ID：11703742
> 
> 赞同：2
> 
> 时间：2012-07-28T18:52:10.050
> 
> 标签：android, parsing, resources, manifest, setorientation

尝试使用字符串限定符在清单文件中设置方向

```
android:screenOrientation="@string/orientation" 
```

在 4.0 华硕平板电脑上工作，但在 2.1 野火和 4.1 Galaxy S 上都失败了。问题实际上是链接到资源，如果在其中输入肖像就可以了。

我尝试更改平板电脑中使用的限定符以在手机上进行测试。这意味着所有设备都使用完全相同的代码、资源和布局。所以它不能是拼写错误或构建问题。但它在手机而不是平板电脑上仍然失败。这似乎是android中的另一个错误。

给出以下错误，logcat 中没有任何内容

```
Installation error: INSTALL_PARSE_FAILED_UNEXPECTED_EXCEPTION
Please check logcat output for more details.
Launch canceled! 
```

清单部分

```
<activity
    android:name=".MainActivity"
        android:screenOrientation="@string/orientation"
        android:label="@string/app_name">
        <intent-filter>
            <action android:name="android.intent.action.MAIN" />

            <category android:name="android.intent.category.LAUNCHER" />
        </intent-filter>
    </activity> 
```

我知道我可以以编程方式做到这一点。但是野火还有另一个问题，不是立即重新启动。相反，它等待视图设置等。这不会发生在其他设备中。

谷歌搜索并找到其他一些使用这些方法的人，但他们似乎没有发现任何问题。 [http://capdroid.wordpress.com/2012/07/21/different-screen-orientation-on-different-screen-size](http://capdroid.wordpress.com/2012/07/21/different-screen-orientation-on-different-screen-size)

谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-12T14:50:29.083

我有同样的问题，我已经使用整数值而不是字符串值解决了它，并在“onCreate”方法中设置方向：

例子：

值/字符串.xml

```
<resources>

    <integer name="orientation">1</integer>
... 
```

值-sw600dp/strings.xml

```
<resources>
     <integer name="orientation">0</integer>
</resources> 
```

然后，在您的 onCreate 中：

```
 @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);

        this.setRequestedOrientation(getResources().getInteger(R.integer.orientation)); 
```

每个方向都有一个整数值，有关更多详细信息，请参阅此页面：http: [//developer.android.com/reference/android/R.attr.html#screenOrientation](http://developer.android.com/reference/android/R.attr.html#screenOrientation)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-28T19:57:53.197

> 尝试使用字符串限定符在清单文件中设置方向

虽然当您在编辑器中键入它时它是一个字符串，但 AFAIK 它实际上是作为整数存储在系统中的，因此从字符串资源进行的转换不太可能是可靠的。坦率地说，我很惊讶它可以在一台平板电脑上运行——设备制造商可能已经增加了对此的支持来处理他们自己的应用程序之一。

虽然您可以在清单中使用字符串资源，但它们必须是以字符串形式存储的东西（例如，`android:label`）。

您*可能*可以使用整数资源，查找用于这些常量的值（可能与它们的 Java 等价物相同）。

> 这似乎是android中的另一个错误。

对我来说，这似乎是开发人员超越记录行为界限的另一个地方，然后想知道为什么未记录的行为不起作用。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-28T20:05:59.313

阅读[官方开发人员文档以识别由](http://developer.android.com/guide/topics/manifest/activity-element.html)*strings*指示的符号形式，将其放入字符串资源将产生解析错误，如 OP 的问题所示。

不，我不会草率下结论将其归类为“错误”，对于每个人和他们自己，一些制造商可以自由地实施自己的机制来处理它，而其他制造商则坚持谷歌的源代码方式。

# javascript - 如何使用 if hasClass 条件禁用 jQuery mouseleave 事件？//悬停动画

> ID：11703745
> 
> 赞同：2
> 
> 时间：2012-07-28T18:52:55.017
> 
> 标签：javascript, jquery, hover, jquery-animate, conditional-statements

我有一个简单的悬停动画；我分离了[mouseenter](http://api.jquery.com/mouseenter/)和[mouseleave](http://api.jquery.com/mouseleave/)函数来定义 mouseleave 的条件。如果该条件属实；禁用 mouseleave 功能，但我无法让这个条件工作，javascript 忽略我的条件并运行 mouseleave 函数。

[这是jsFiddle。](http://jsfiddle.net/Bvr9B/10/)

jQuery：

```
$('.bigBox').mouseenter(function() {
    $('.trigger').stop().animate({'left':'-50px'},222);
    $('.bigBox').stop().animate({'left':'-1px'},222);
});

var holdCondition = $('#hold').hasClass('selected');
//tried to disable mouseleave here but didnt work

if ( !holdCondition ) {//if #hold has not class selected
    $('.bigBox').mouseleave(function() {
        $('.trigger').stop().animate({'left':'-1px'},222);
        $('.bigBox').stop().animate({'left':'-111px'},222);
    });
}

$('.option').click(function(){
    $('.option').removeClass('selected');
    $(this).addClass('selected');
}); 
```

html:

```
<div class="bigBox">
   <span class="trigger">X</span>

   <span class="option selected">A</span>
   <span class="option">B</span>
   <span id="hold" class="option">Hold</span>
</div> 
```

CSS：

```
.bigBox {
    position:fixed; top:10%; width:100px; height: 20px; 
    left:-111px;  border:1px solid #000; padding-left:5px;
}
.trigger { 
    position:fixed; top:10%; width:20px; height: 20px; 
    left:-1px; border:1px solid #000; text-align:right; padding-right:5px;
}
.option { margin:0 5px; cursor:pointer; }
.selected { color:#f00; } 
```

​</p>

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-28T19:01:37.777

你`holdCondition`只会运行一次，而不是你必须每次检查它`.mouseleave()`。试试这个。

[这是jsFiddle。](http://jsfiddle.net/Bvr9B/15/)

```
 $('.bigBox').mouseleave(function() {
        var holdCondition = $('#hold').hasClass('selected');

        if ( !holdCondition ) {//if #hold has not class selected
          $('.trigger').stop().animate({'left':'-1px'},222);
          $('.bigBox').stop().animate({'left':'-111px'},222);
        }
    }); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-28T18:59:47.960

“选择”何时应用于 id 为“保持”的元素？我怀疑这发生在用户交互中，不一定是在页面加载时？

你写这个的方式：

```
if ( !holdCondition ) {//if #hold has not class selected
    $('.bigBox').mouseleave(function() { 
```

如果不是holdCondition ，则鼠标离开会*在页面加载*时定义。

您想要的是检查 mouseleave 内的 !holdCondition：

```
$('.bigBox').mouseleave(function() {
    if ( !holdCondition ){
        $('.trigger').stop().animate({'left':'-1px'},222);
        $('.bigBox').stop().animate({'left':'-111px'},222);
    }
}); 
```

# c - 在 C 中检查泄漏的工具？

> ID：11703746
> 
> 赞同：3
> 
> 时间：2012-07-28T18:53:00.627
> 
> 标签：c, memory-leaks, instruments, valgrind, osx-mountain-lion

我刚刚升级到 Mac OS X Mountain Lion，发现它`valgrind`仍然与 Mountain Lion 不兼容。

我有一个 600 行的 C 代码，我需要检查内存泄漏。

除了 valgrind 之外，还有什么方法可以做到这一点？我可以使用 Xcode 工具吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-28T20:08:37.387

您可以检查[clang 静态分析器](http://clang-analyzer.llvm.org/)。这是在代码中查找错误的非常棒的工具。

它比 valgrind 更好，因为它进行静态分析而不是运行代码——因此它可以找到你很少遇到的错误。但是，它也更有可能触发误报。而且它没有 valgrind 成熟。

# iphone - TBXML XML 格式

> ID：11703749
> 
> 赞同：0
> 
> 时间：2012-07-28T18:53:31.400
> 
> 标签：iphone, xml, xcode, tbxml

我已经知道如何在我的 Xcode 项目中解析 TBXML。但我被困在一个我不太了解的 XML 结构上。

这是 XML 结构：

```
 <CurDate Dates="27.07.2012" Date="07/27/2012">
    <Currency Kod="USD" CurrencyCode="USD">
    <Unit>1</Unit>
    <Name>AMERICA</Name>
    <CurrencyName>US DOLLAR</CurrencyName>
    <ForexBuying>1.81</ForexBuying>
    <ForexSelling>1.8187</ForexSelling>
    </Currency>
    </CurDate> 
```

我需要有关此 XML 结构的帮助。我的代码如下所示：

```
 TBXMLElement *elementName = [TBXML childElementNamed:@"Currency" parentElement:element];
        TBXMLElement *altinTemp = [TBXML childElementNamed:@"CurrencyName" parentElement:elementName]; 
```

这是我获取 XML 的 CurrencyName 的方法，但我得到了一个错误。见代码：

```
 + (TBXMLElement*) childElementNamed:(NSString*)aName parentElement:(TBXMLElement*)aParentXMLElement{
TBXMLElement * xmlElement = aParentXMLElement->firstChild;
const char * name = [aName cStringUsingEncoding:NSUTF8StringEncoding];
while (xmlElement) {
    if (strlen(xmlElement->name) == strlen(name) && memcmp(xmlElement->name,name,strlen(name)) == 0) {
        return xmlElement;
    }
    xmlElement = xmlElement->nextSibling;
}
return nil;
} 
```

这是我得到一个错误。错误是“线程 1：EXC_BAD_ACCESS（代码=2，地址=0x10）

任何回复都会对我有好处！谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-09T10:36:27.610

我相信你想要这样的东西

```
NSError *error = nil;
TBXML* tbxml = [TBXML tbxmlWithXMLString:@"<CurDate Dates='27.07.2012' Date='07/27/2012'><Currency Kod='USD' CurrencyCode='USD'><Unit>1</Unit><Name>AMERICA</Name><CurrencyName>US DOLLAR</CurrencyName><ForexBuying>1.81</ForexBuying><ForexSelling>1.8187</ForexSelling></Currency></CurDate>" error:&error];

if (error) {
    NSLog(@"%@ %@", [error localizedDescription], [error userInfo]);
} else {
// If TBXML found a root node, process element and iterate all children
    if (tbxml.rootXMLElement){
        TBXMLElement *element = tbxml.rootXMLElement;

        if ([TBXML childElementNamed:@"Currency" parentElement:element]) {

            element = element->firstChild;

            do{
                TBXMLElement *altinTemp = [TBXML childElementNamed:@"CurrencyName" parentElement:element];
                NSString *currencyName = [TBXML textForElement:[TBXML childElementNamed:@"CurrencyName" parentElement:element]];
                NSLog(@"%@",currencyName);
            }while ((element = element->nextSibling));

            error = nil;
        } 
    }
} 
```

一个替代方案

```
childElementNamed: parentElement: 
```

是

```
childElementNamed: parentElement: error: 
```

这允许您处理任何一个 nil 节点（我认为您有）。错误：似乎也可以添加到大多数 TBXML 类函数中，它会降低性能，因此最好仅将其用于调试或节点/值可能存在或不存在的时候。

# javascript - 在通过 Object.create 创建的对象上设置原型

> ID：11703751
> 
> 赞同：3
> 
> 时间：2012-07-28T18:53:48.683
> 
> 标签：javascript, prototype, object-create

给定以下代码，我在弄清楚如何设置原型链时遇到了一些麻烦。

```
var Model = {
    prototype: {
        init: function(){},
        log: function(){ console.log('instance method log was called') }
    },
    log: function(){ console.log('class method log was called') },
    create: function() {
        var object = Object.create(this);
        object.parent = this;
        object.prototype = object.fn = Object.create(this.prototype);
        return object;
    },
    init: function() {
        var instance = Object.create(this.prototype);
        instance.parent = this;
        instance.init.apply(instance, arguments);
        return instance;
    }
}

var User = Model.create();
User.log(); // 'class method log was called'

// create a new method after creation
Model.warn = function() { console.warn('warn was called') }

User.warn() // 'warn was called'

var user = User.init();
user.log(); // 'instance method log was called' 
```

具体来说，这一行让我在 create 方法中感到困惑：

```
object.prototype = object.fn = Object.create(this.prototype); 
```

我了解 create 方法如何创建一个原型指向 Model 的新对象，但倒数第二行似乎用新对象 (Model.prototype) 覆盖了该原型。但是，看起来原始原型仍然完好无损，因为即使在创建新对象后我也可以向 Model 添加方法，并且新对象仍然可以访问它。

有人可以对实际发生的事情有所了解吗？

**编辑**- 我应该指出这段代码来自O'reilly的*Javascript Web Applications*

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-04T21:52:55.167

行。所以只是为了删除噪音代码，你在问这个代码：

```
var Model = {
    prototype: {},
    create: function() {
        var object = Object.create(this);
        object.prototype = Object.create(this.prototype);
        return object;
    }
}; 
```

Model.create() 函数的第一行很简单，它创建了一个扩展（原型）模型的新对象。

但是你很困惑，因为下一行覆盖了对象的“原型”属性。不是对象的原型，对象原型仍然是Model，它存储在一个名为[[Prototype]]的隐藏属性中，代码修改的属性与对象的[[Prototype]]无关，它只有相同的姓名。让我们更改名称以理解它，它将是相同的：

```
var Model = {
    blablabla: {},
    create: function() {
        var object = Object.create(this);
        object.blablabla = Object.create(this.blablabla);
        return object;
    }
}; 
```

它扩展了 Model.blablabla，因此当您更改 object.blablabla 时，它不会影响 Model.blablabla。

```
var SubModel = Model.create();
SubModel.blablabla.newMethod = function() { };
console.log(Model.blablabla.newMethod); // undefined 
```

很多时候，为字段选择正确的名称比看起来更重要。

# css - 如何使此侧边栏可滚动？

> ID：11703754
> 
> 赞同：0
> 
> 时间：2012-07-28T18:53:59.407
> 
> 标签：css

如何使这个“侧边栏”可滚动？我尝试了溢出：自动，但没有奏效。

[http://jsfiddle.net/kk2gD/](http://jsfiddle.net/kK2gD/)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-28T18:59:30.303

更正填充的行尾，并降低侧边栏的高度。

```
#sidebar {
    float:left;
    width:330px;
    text-align:center;
    height:100px;
    background:#eee;
    padding:150px 5px;
    overflow: auto;
} 
```

[http://jsfiddle.net/wMq2E/](http://jsfiddle.net/wMq2E/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-28T18:59:01.643

这将解决它：

```
#sidebar {
    float:left;
    width:330px;
    text-align:center;
    height:200px;
    background:#eee;
    padding:150px 5px;
    overflow:scroll;
} 
```

首先，您缺少一个`;`in `padding`。

其次，您应该设置`overflow`为`scroll`.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-28T18:59:41.290

这应该工作得很好。我在你的 css 中发现了一个错字。在......的最后

```
padding:150px 5px 
```

`;`失踪了。应该与之合作。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-28T19:02:47.277

```
padding:150px 5px;<-- you miss this coma
overflow:auto; 
```

# javascript - 用jquery做一些和和乘法

> ID：11703757
> 
> 赞同：-2
> 
> 时间：2012-07-28T18:54:16.100
> 
> 标签：javascript, jquery

我试图在一个表格中总结一些值，我没有设法得到任何地方：

如您所见，有 3 个复选框、3 个单选按钮和 1 个选择下拉菜单

我需要对选定的复选框求和，乘以其中一个单选值并在最后求和所选框中的值。不知道该怎么做：/

我可以将结果保存在对象中吗？不是 json 对象，而是 javascript

```
<div class="reciright">
        <form id="formi">
        <div class="recil">
            <span class="ltitle">Extras incluídos:</span>
            <div class="recheck"><input class="acc1" type="checkbox" name="vehicle" value="0.4" /> Caixa original</div>
            <div class="recheck"><input class="acc2" type="checkbox" name="vehicle" value="1" /> Cabo e carregador</div>
            <div class="recheck"><input class="acc3" type="checkbox" name="vehicle" value="3" /> Auscultadores</div>

            <span class="ltitle">Estado Geral:</span>
            <div class="recheck"><input type="radio" name="vehicle" value="0.5" /> 100% Funcional</div>
            <div class="recheck"><input type="radio" name="vehicle" value="0.4" /> Funcional mas não a 100%</div>
            <div class="recheck"><input type="radio" name="vehicle" value="0.3" /> Avariado</div>

        </div>

        <div class="recir">
            <span class="ltitle">Dados do Equipamento:</span>
            <div class="recampos">N.de Serie</div> <input class="inputix" type="text" name="fname" id="nserie">
            <p><div class="recampos">Modelo:</div><select class="selectit" id="modelo">
            <option value="50">iPad 2 wifi</option>
            <option value="20">iPad 1</option>
            <option value="10">iPad 2</option>
            <option value="1">iPad 3</option>
        </select></p>

            <div class="recampos2">Breve descricao do equipamento</div>
            <textarea rows="3" cols="50" class="recitextarea"></textarea>

        </div>
        <div class="icecream"></div>
        </form>
    </div> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-28T19:20:22.860

可能是这样的：

```
$("#modelo, [type='checkbox'], [type='radio']").on('change', function() {
    var boxvalue = 0,
        boxes = $("[type='checkbox']", "#formi").filter(':checked'),
        radios = parseFloat($("[type='radio']").filter(':checked').val()) || 1,
        dropdown = parseFloat($("#modelo").val()) || 1;

    $.each(boxes, function() {
        boxvalue+=parseFloat(this.value)||0;
    });

    var sum = (boxvalue * radios) * dropdown;

    $("#nserie").val(sum);
}); 
```

[小提琴](http://jsfiddle.net/XzEP4/) ​</p>

# html - 我在 head 部分的自定义标签的 Chrome/Firefox 错误 - 不是 IE

> ID：11703758
> 
> 赞同：0
> 
> 时间：2012-07-28T18:54:27.270
> 
> 标签：html, firefox, google-chrome

我的头部部分是这样的：

```
<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN">
<html lang="es" xml:lang="es">
<head>
    <title>Hi!</title>
    <mycustomtag att="1"></mycustomtag>
    <script>...</script>
    <!--anything else-->
</head>
<body>
</body>
</html> 
```

Chrome/Firefox 的问题是 MyCustomTag 出现在 BODY 部分和 SCRIPT 标签。我不知道为什么会出现：

```
<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN">
<html lang="es" xml:lang="es">
<head>
    <title>Hi!</title>
</head>
<body>
    <mycustomtag att="1"></mycustomtag>
    <script>...</script>
    <!--anything else-->
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-28T19:09:54.247

Add

```
<style>
mycustomtag { display: none; }
</style> 
```

The Chrome behavior is a feature, not a bug. When you use an invented tag, you deviate from HTML specifications, and browser may do whatever they want. (You also have a nonconforming doctype, which triggers quirks mode in some browsers.)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-28T21:31:52.063

解决此问题的唯一方法是管理 html 的渲染并添加自定义标记以开始正文和结束正文标记。这种方式可以删除浏览器注入的所有标签。Chrome 在正文末尾插入标签也 :s 是不可思议的！关闭标签是！非常感谢！–

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-28T19:32:26.927

要处理元素在DOM 中`body`而不`head`在 DOM 中的问题（与仅需要隐藏元素相反），通过将元素从`body`（如果存在）移动到 DOM 来操作`head`：

```
<script>
var myElement = document.getElementsByTagName('mycustomtag')[0];
if(myElement.parentNode === document.body) {
  document.body.removeChild(myElement);
  document.head.appendChild(myElement);
}
 </script> 
```

# asp.net-mvc-3 - 请向我解释asp.net的实体框架

> ID：11703759
> 
> 赞同：1
> 
> 时间：2012-07-28T18:54:41.217
> 
> 标签：asp.net-mvc-3, entity-framework

到目前为止，我一直在使用带有 Linq to Sql 的 MVC3，以便预先生成所有模型，我会自己创建数据库，然后将表移动到 dbml 编辑器上，如果我想更改表，我会删除实体在编辑器上并再次拖动它。它工作得非常好，但我注意到微软正在大量使用 EF，我可能也应该学习这一点。

所以，看了一些文章后，我完全糊涂了。我想从 Code First 方法开始，据我了解，它使开发人员首先为实体创建模型，然后模型创建数据库。这里最令人困惑的是，当我更改模型时，以及在运行时将我的模型与实体进行比较时，如果它确定两个不同，它会删除所有表并重新创建它们。如果是这种情况，我该如何保存我的数据？如何存储我的所有表格，以免它们被丢弃？我应该改用“数据库优先”的方法吗？

请帮忙。谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-28T20:19:09.930

您完全正确地查看实体框架而不是 Linq To Sql。微软专注于 EF，这就是要走的路。实体框架具有三个选项：

*   数据库优先
*   模型优先
*   代码优先

首先使用数据库，您有一个现有的数据库，可用于为您创建模型。这是在一个设计器中完成的，它将向您展示您的模型的外观以及您可以在哪里修改实体和数据库之间的映射。

模型首先从一个空的设计师开始。您创建实体，然后让实体框架为其创建数据库模式。

使用 Code First，您无需设计师。相反，您在代码中创建实体，并且在运行时实体框架会创建从您的实体到数据库的映射。这是通过一些约定（例如每个实体到自己的表，Id 属性作为主键）和您可以添加的自定义映射来完成的。

从 Linq To Sql 的背景来看，模型优先/数据库优先对您来说可能听起来很熟悉。Code First 是一种新方法，它吸引了想要创建纯粹 POCO 的干净域模型的人们。他们专注于代码，而不是数据库。

您可以尝试所有三个。它们都有一个共同的基础和一些额外的功能。

创建数据库时，Code First 会有很多选择。[在这里](http://blogs.msdn.com/b/adonet/archive/2011/09/28/ef-4-2-code-first-walkthrough.aspx)，您可以找到一些有助于入门的信息。您看到您的数据库每次都被删除和重新创建的原因是因为数据库初始化程序。您有多种创建、重新创建和更新数据库的选项。

在开发环境中，在每次模型更改时删除和创建数据库可能是最容易的。您还可以使用一些初始测试数据为您的数据库播种。在生产环境中，您将使用 Code First 迁移在每次模型更改时迁移您的数据库，从而保留您的数据。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-28T19:57:55.523

> 如果它确定两个不相同，它会删除所有表并重新创建它们。

默认情况下，你会得到一个异常。您必须明确指示您的应用程序删除并重新创建数据库。我没有 EF 代码第一次体验（只有 db 第一次），但我不喜欢在生产中删除和重新创建数据库。在开发过程中，这应该没问题。

> 如何持久化我的数据？

使用[代码优先迁移](http://blogs.msdn.com/b/adonet/archive/2012/02/09/ef-4-3-code-based-migrations-walkthrough.aspx)。

更多链接：

[EF 4.2 代码优先演练](http://blogs.msdn.com/b/adonet/archive/2011/09/28/ef-4-2-code-first-walkthrough.aspx)

[实体框架主页](http://msdn.microsoft.com/en-us/data/aa937723)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-28T20:03:26.357

如果您的模型与您的数据库不匹配，默认情况下代码优先只会抛出异常。听起来您已经创建（并设置）了一个“删除或重新创建”初始化程序（IDatabaseInitializer），这会导致数据库的强制重新生成。您可以构建不同类型的初始化程序，其中一种是 EF 4.3.1 新增的，它允许[数据库迁移](http://msdn.microsoft.com/en-us/library/hh829293%28v=vs.103%29.aspx)，而不是删除和重新创建。

# c# - 使用 C# 打印到静态文档

> ID：11703762
> 
> 赞同：0
> 
> 时间：2012-07-28T18:55:09.283
> 
> 标签：c#, wpf, winforms, pdf, printing

我的父亲是一名二手车推销员，我将给他写一份申请，让他可以输入有关所售汽车、买家和他自己的所有信息，以节省他一些时间。

唯一真正的挑战是我需要打印三个静态文件，并且我需要在这些文件上放置诸如买家姓名、汽车制造商/型号/年份等信息。有人会如何推荐我这样做？理想情况下，我想扫描静态（空白）文档，以某种方式将文本框放在页面上的空白点周围，其中包含一条信息（如买方的姓名），然后打印它。

有没有人有一个体面的方法呢？有没有办法创建一个带有空白文本框的 PDF 文档，然后我以编程方式打开将信息插入文本框的文档？

我更喜欢用 C# 编写解决方案，我将通过 C# 收集数据，但我唯一遇到的问题是打印方面。

谢谢，

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-28T19:05:49.593

我建议您使用 Visual Studio 的内置 Crystal Reports，因为这将允许您设计表单（作为报表）并将它们与数据合并。

有很多资源可用于入门，包括：

[入门（如何在 Crystal Reports for Visual Studio 中使用）](http://msdn.microsoft.com/en-us/library/ms225615%28v=vs.90%29)

和

[在 Visual Studio 2010 中使用 Crystal Reports 生成报告](http://www.codeproject.com/Articles/166291/Generate-a-report-using-Crystal-Reports-in-Visual)

# objective-c - 如何构建一个在离线输入数据时同步的应用程序？

> ID：11703763
> 
> 赞同：1
> 
> 时间：2012-07-28T18:55:13.177
> 
> 标签：objective-c, ios, database

假设我使用 iphone 应用程序和带有某种集中式数据库的 web 应用程序构建了一个 todo 应用程序。如果我在没有互联网连接的情况下在我的 iPhone 上添加待办事项，我显然无法在网络应用程序上看到它们。由于离线时无法发出 API 请求，因此数据不在数据库中。

为了防止离线时添加的任务丢失，您是否将它们存储在本地，然后在建立互联网连接时，然后调用 API 来创建这些任务并将它们添加到数据库中？

这在 iOS 中究竟是如何做到的？我只是在本地构建对象吗？你怎样才能让它知道特定的任务不在数据库中，并且应该调用 API 来完成它们？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-28T19:38:44.613

您需要将所有数据存储在本地数据库中，然后检查互联网连接是否可用，如果互联网可用，通过 API 调用将数据发送到网络，然后如果您收到来自的响应，则从本地数据库中删除数据服务器。这种方式在从服务器获得响应后删除您本地数据库的每一行。

对于此实现，您可以拥有：

```
-  create a database on mobile
-  Register User on Server, After registering client should get a response from server and a timestamp.
-  Save timestamp and register a Pending Intent for 12 / 24 hrs to Start a Background Service that would Sync the Data to Server.
-  In case of no availability of Internet while Service wants to Sync data, we should have a Broadcast Receiver that check for internet connectivity, and as soon as Internet is available it would silently Start Service (Sync Service) in background and send data to Server.
-  Server would again send a response with timestamp, on receiving timestamp we delete our local Database, and repeat step 3\. This cycle will keep on repeating. 
```

我认为这应该达到目的。如果如何实现这一点，请发表评论。

# c# - C# 掩码文本框

> ID：11703769
> 
> 赞同：3
> 
> 时间：2012-07-28T18:56:41.617
> 
> 标签：c#, ip, maskedtextbox

如何更改 IP 地址输入的屏蔽文本框属性？例如

```
private void Interneta_savienojums_Load(object sender, EventArgs e)
{
    maskedTextBox1.Text = "   .   .   .   ";
    maskedTextBox1.PromptChar = ' ';
    maskedTextBox1.Mask = "009.009.009.900";
    maskedTextBox1.ResetOnSpace = false;
    maskedTextBox1.SkipLiterals = false;
} 
```

在表单文本框中显示（...），正是我想要的。当我输入 123.123.123.123 时一切正常，但当我输入 时 `23 .1 .001.200`，返回值为`23 .1 .001.200`，但我需要`23.1.1.200`。如何删除空格并返回正常值？这可能吗？

对于我使用的 ip 检查，这是解决方案！

```
try
        {
            IPAddress IP = IPAddress.Parse("127.0.0.000");
            MessageBox.Show(IP.ToString());
        }
        catch (FormatException)
        {
            MessageBox.Show("Wrong ip !");
        } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-28T19:21:53.807

为什么不让自己的生活更轻松并创建 4 个单独的数据输入框？如果我输入得太快或需要备份，我个人总是很难使用单个文本框方法。

然后，您可以在用户离开时验证每个框的有效数据，以确保他们不会输入错误的值。

如果您可以访问数字编辑文本框，您甚至可以设置最小值和最大值（或者您可以自己实现）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-28T19:16:24.280

尝试使用此代码

```
var input = "009.009.009.900";
var result = input.Trim(); 
```

您还可以在同一域中使用这些功能

```
String.Trim
String.TrimEnd
String.TrimStart
String.Remove 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-28T19:19:50.577

您可以在访问 Text 属性时去掉空格，例如

```
maskedTextBox1.Text.Replace(" ", ""); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-28T19:20:13.987

是的，有可能，根据 msdn查看[MaskedTextBox.Mask Property](http://msdn.microsoft.com/en-us/library/system.windows.forms.maskedtextbox.mask.aspx)

> 9 - 数字或空格，可选。

试着玩面具

# grails - 遍历 hasMany 引用的 Grails GORM web 流

> ID：11703771
> 
> 赞同：0
> 
> 时间：2012-07-28T18:57:02.567
> 
> 标签：grails, reference, grails-orm, spring-webflow

我对 Grails 还是比较陌生。我正在开发一个在线调查。我一直遇到 webflow 问题，我似乎无法在网上找到解决方案。我有一个班级调查，其中有很多主题，有很多问题。在我的网络流程中，主题和问题的数量是动态的，具体取决于您选择的调查。我的问题是如何迭代（在网络流中）每个主题和问题（有点像一个数组或列表），我可以在其中获取特定的主题和问题并将它们设置为流变量。例如，我会给我的调查和主题课程：

```
class Survey implements Serializable {

List topic
String surveyName
float version
static hasMany = [topic:Topic]

static constraints = {

    surveyName (blank:false)
}
} 
```

和主题：

```
class Topic implements Serializable {

List primaryQuestion
String topicName
static belongsTo = [survey:Survey]
static hasMany = [primaryQuestion:PrimaryQuestion]

static constraints = {

    topicName (blank:false)
}
} 
```

所以我设置了我的流变量

```
 onStart {
        flow.survey = Survey.get(params.id)
    } 
```

那么如何在控制器中获取每个单独的主题和问题呢？我的目标是让一个视图用“下一个”和上一个“表示每个问题。根据我对 Web 流程的理解，我知道这是可能的。我只是不知道如何将单个问题传递给视图而不是同时遍历所有这些。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-28T21:47:32.843

如果我正确理解了您的问题，那么您需要做的就是遍历您的列表。首先，一个小费；在大多数情况下，您不需要将模型推入流范围。您可以简单地执行以下操作：

```
onStart {
  [survey : Survey.get(params.id)]
} 
```

然后在你看来：

```
<g:each in="${survey.topic}" var="topic">
  <g:each in="${topic.primaryQuestion}" var="question">
     ...
  </g:each>
</g:each> 
```

另一个提示，将主题重命名为您的调查域中的主题，并将primaryQuestion 重命名为主题中的primaryQuestions。这样更有意义。

如果我不在这里，您可能需要编辑您的问题并使其更清晰。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-29T18:02:51.297

我终于通过 GORM 文档弄清楚了。这就是我一直在寻找的：

```
flow.topics = flow.survey ? Topic.findAllBySurvey(flow.survey) : [] 
```

这会将调查中的所有主题放入一个列表中，我可以使用以下方法获取每个主题：

```
onEntry{
    flow.topic = flow.topics.get(i)
} 
```

再次感谢您的回复。

# oracle - Oracle 中 2 个 SELECT 语句之间的分号导致 System.Data.OracleClient 出错

> ID：11703776
> 
> 赞同：1
> 
> 时间：2012-07-28T18:57:46.637
> 
> 标签：oracle, ado.net

我正在使用 Oracle 的 ADO.Net 提供程序来执行 2 个用分号分隔的选择语句。我正在使用 system.Data.OracleClient 数据提供程序。但是，Oracle 似乎不喜欢分号，因为在 ADO.Net 代码运行时出现无效字符错误。关于如何解决这个问题的任何想法，因为我必须在同一个数据库行程中运行两个 SELECT 语句？

```
 string sql = @"
                        WITH
                      x AS
                      (
                        SELECT
                          RowNum AS RowIndex,
                          CAST(Contract_Id AS VARCHAR2(1000)) Contract_Id,
                          Contract_Number,
                          Name AS Contract_Name,
                          Contract_Number
                          || ' '
                          || Name AS Contract_Description,
                          Eff_Date,
                          Expiry_Date
                        FROM
                         contracts
                        WHERE
                          contract_number LIKE :ContractSearchText
                        OR name LIKE :ContractSearchText
                      )
                    SELECT
                      *
                    FROM
                      x
                    WHERE
                      RowIndex  >= :StartingRowIndex
                    AND RowIndex < (:StartingRowIndex + :MaxRows) ;

                    SELECT
                          COUNT(*)
                        FROM
                          contracts
                        WHERE
                          contract_number LIKE :ContractSearchText
                        OR name LIKE :ContractSearchText;
                       "; 
```

**更新**

亚历克斯的回复是我能找到的最佳答案。但是，我想出了另一个替代答案，我不确定桌子是被击中两次还是只被击中一次。备用查询依赖于使用计数派生表创建 CROSS JOIN。可能有人可以告诉我在这个替代答案中桌子是否只被击中一次？

```
 WITH
                      x AS
                      (
                        SELECT
                          RowNum AS RowIndex,
                          CAST(Contract_Id AS VARCHAR2(1000)) Contract_Id,
                          Contract_Number,
                          Name AS Contract_Name,
                          Contract_Number
                          || ' '
                          || Name AS Contract_Description,
                          Eff_Date,
                          Expiry_Date
                        FROM
                          vha_int_contract
                        WHERE
                          contract_number LIKE :ContractSearchText
                        OR name LIKE :ContractSearchText
                      ),
                      y as ( select count(distinct contract_id)  TotalCount from x)
                    SELECT
                      *
                    FROM
                      x cross join y
                    WHERE
                      RowIndex  >= :StartingRowIndex
                    AND RowIndex < (:StartingRowIndex + :MaxRows) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-30T10:46:33.020

您通常不能在一次调用中运行多个 SQL 语句，而且切换到 PL/SQL 并不是真正必要的。看起来您正在尝试同时计算匹配行的数量，我想您可以执行类似“30 的结果 1 到 5”之类的操作。虽然您可以进行两次单独的调用，但由于另一个事务可能在两者之间提交，它们可能会得到不一致的结果（因此您不希望 '25 to 30 of 29' 或部分最后一页，如 '25 to 29 of 30'？）。

您可以在每个返回的行中将总计数作为一个额外的字段，这有点多余但不会再花费 - 实际上更少，因为您只打了一次表，您没有两个单独的查询。这使用 , 的[`analytic function`](http://docs.oracle.com/cd/E11882_01/server.112/e26088/functions004.htm)版本[`count`](http://docs.oracle.com/cd/E11882_01/server.112/e26088/functions039.htm)和一个空`over`子句，因为在这种情况下您想计算所有内容：

```
SELECT x.*, COUNT(1) OVER () Range_Count
FROM
(
    SELECT
        RowNum AS RowIndex,
        CAST(Contract_Id AS VARCHAR2(1000)) Contract_Id,
        Contract_Number,
        Name AS Contract_Name,
        Contract_Number
        || ' '
        || Name AS Contract_Description,
        Eff_Date,
        Expiry_Date,
        COUNT(1) OVER () Total_Count
    FROM
        contracts
    WHERE
        contract_number LIKE :ContractSearchText
        OR name LIKE :ContractSearchText
    ) x
WHERE RowIndex >= :StartingRowIndex
AND RowIndex < (:StartingRowIndex + :MaxRows) 
```

我在这里做了两个计数，只是为了好玩。您需要的是内部查询，`COUNT(1) OVER () Total_Count`; 这将为您`Total_Count`返回的每一行提供一列，其值等于您原来的单独`COUNT(*)`查询会找到的值。不过，我也在外部查询上放了一个`COUNT(1) OVER () Range_Count`，它会显示该范围内有多少条记录——`:Max_Rows`直到你到达最后一个“页面”。可能没有用，您可以在处理它们时只计算行数，但只是显示它确实是可能的。

您目前在查询中没有任何排序，这意味着您可能无法获得预期的结果。我建议您`ORDER BY`在内部查询中添加一个子句，或者将其更改`RowNum`为`ROW_NUMBER() OVER(ORDER BY Contract_ID)`坚持分析主题。

* * *

不太确定你想从你的评论中得到什么。如果您想要匹配 each 的记录数`Contract_Id`，您可以在内部查询中添加另一个术语：

```
 COUNT(1) OVER (PARTITION BY Contract_Id) Contract_Id_Count 
```

如果您想要不同值的总数`Contract_Id`，请改为添加：

```
 COUNT(DISTINCT Contract_Id) OVER () Contract_Id_Count 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-01T15:43:41.303

因此，除了能够为操作提供更好的方法之外，我们是否可以说 ado.net 不喜欢分号？我运行了一些批处理查询，通常是创建表，做一些事情然后删除表。在 T-SQL 中，上述情况是可能的，因为 SQL Server 在大多数操作中不需要分号来终止语句，这与 Oracle 的终止符是强制性的不同。

我目前认为解决瘦问题的唯一方法是使用存储过程（不如 T-SQL 好或易于编码），但它确实允许执行批处理语句。

# php - 将 3 个字符串合二为一

> ID：11703788
> 
> 赞同：0
> 
> 时间：2012-07-28T18:59:38.960
> 
> 标签：php

我一直在尝试将 3 个字符串合并为一个，但在这样做时遇到了麻烦。

字符串在下面。

```
$from="/2/3/4/5/6/";
$to="/30/31/32/33/34/";
$sub="/2/3/4/5/6/7/8/9/10/11/12/";#this is dynamic, ever changing past > (/2/3/4/5/6/) 
```

输出必须如下所示。

```
$output="/30/31/32/33/34/6/7/8/9/10/11/12/"; 
```

否则，如果`$sub`发生如下变化。

```
$from="/2/3/4/5/6/";
$to="/30/31/32/33/34/";
$sub="/2/3/4/5/6/7/8/";
$output="/30/31/32/33/34/6/7/8/"; 
```

否则如果`$to`发生变化，那么这个。

```
$from="/2/3/4/5/6/";
$to="/30/31/";
$sub="/2/3/4/5/6/7/8/";
$output="/30/31/6/7/8/"; 
```

需要`$to`首先，然后是`$sub`末尾，减去`$from`末尾之前的`/*/(eg./6/)`要组合成1个字符串。

这怎么可能？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-28T19:10:07.837

您基本上是在字符串中存储序列化的数组结构。聪明[的爆炸](http://php.net/explode)应该有助于：

```
$output = $to
  . implode('/', array_diff(
      explode('/', $sub),
      array_slice(explode('/', $from), 0, -2)
    )) . '/'; 
```

另一种可能是正则表达式

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-28T20:14:03.213

这可能会帮助您获得所需的内容：

```
$str1 = substr($from, -2);
$pos = strpos($sub,$str1);
$str2 = substr($sub,$pos);
$output = $to.$str2; 
```

# java - 如何设置 JFrame 背景透明但 JPanel 或 JLabel 背景不透明？

> ID：11703794
> 
> 赞同：8
> 
> 时间：2012-07-28T19:00:14.050
> 
> 标签：java, image, swing, jframe, image-viewer

根据任务，我们必须创建一个像 Picas 一样的图像查看器。中间的图片，半透明的黑色背景和使用左/右按钮更改图像。

我可以显示一个图像，将其设置为底涂，将其设置为半透明框架，但随着框架图像变得半透明。我究竟做错了什么。

```
Dimension dim = Toolkit.getDefaultToolkit().getScreenSize();   

JFrame f1 = new JFrame("ShowImage");
f1.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);

f1.setSize(dim);

f1.setUndecorated(true);
f1.setOpacity(0.5f);
ShowImage panel = new ShowImage();
panel.setBackground(Color.black);

f1.setContentPane(panel); 
f1.setVisible(true); 
```

我试过

```
si.setOpaque();   
si.setBackground(Color.black);
si.setForeground(Color.red); 
```

没有工作

当我取一个布尔值并进行测试时

```
si.isDisplayable();
si.isVisible();
si.isShowing(); 
```

只有可见返回为真，其余为假，这些是否有任何影响因素？

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2012-07-28T22:06:53.230

问题是，`JFrame`的默认`Layout`管理器是 a `BorderLayout`，这意味着您的`ShowImage`窗格正在填充框架的整个区域（黑色）。我敢打赌，如果您将背景更改`ShowPane`为红色。它会显示为完全填充为红色

现在您可以查看[A Visual Guide to Layout Managers](http://docs.oracle.com/javase/tutorial/uiswing/layout/visual.html)或更改 ShowPane 的工作方式

**更新**

抱歉，我不熟悉 Java 7 中的新 Transparency API（仍在使用 Java 6 hack ;)）

![透明框](../Images/2eb5b6bfc511582d994b4f07ff25240b.png)

你能帮我验证一下这是你正在寻找的那种效果吗？读取方块是图像的位置（黑色背景是框架-nb，我只捕获了框架）

**更新**

![图像预览](../Images/04eecd36ed1792bb42f5529359cdb39e.png)

首先，您要阅读[Window.isOpaque](http://docs.oracle.com/javase/7/docs/api/java/awt/Window.html#isOpaque%28%29)和[Window.setBackground](http://docs.oracle.com/javase/7/docs/api/java/awt/Window.html#setBackground%28java.awt.Color%29)以了解此解决方案的工作原理。

接下来，不要使用[Window.setOpacity](http://docs.oracle.com/javase/7/docs/api/java/awt/Window.html#setOpacity%28float%29)，它不会达到你想要的效果。主要原因是不透明度值应用于父级及其子级（最初是通过我）。

所以，框架代码：

```
Dimension dim = Toolkit.getDefaultToolkit().getScreenSize();

setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);

// Make sure where in the top left corner, please lookup how
// to find the screen insets ;)
setLocation(0, 0);
setSize(dim);
// Set undecorated
setUndecorated(true);
// Apply a transparent color to the background
// This is ALL important, without this, it won't work!
setBackground(new Color(0, 255, 0, 0));

// This is where we get sneaky, basically where going to 
// supply our own content pane that does some special painting
// for us
setContentPane(new ContentPane());
getContentPane().setBackground(Color.BLACK);
setLayout(new BorderLayout());

// Add out image pane...    
ShowImage panel = new ShowImage();
add(panel);

setVisible(true); 
```

`ContentPane`。_ 基本上，我们需要“欺骗”绘制引擎，让其思考透明（不透明）的位置，然后绘制我们自己的不透明度

```
public class ContentPane extends JPanel {

    public ContentPane() {

        setOpaque(false);

    }

    @Override
    protected void paintComponent(Graphics g) {

        // Allow super to paint
        super.paintComponent(g);

        // Apply our own painting effect
        Graphics2D g2d = (Graphics2D) g.create();
        // 50% transparent Alpha
        g2d.setComposite(AlphaComposite.getInstance(AlphaComposite.SRC_OVER, 0.5f));

        g2d.setColor(getBackground());
        g2d.fill(getBounds());

        g2d.dispose();

    }

} 
```

我很抱歉我之前的回答，但我希望这可以弥补它；）

**使用按钮更新**

这就是我修改它的方式

```
ShowImage panel = new ShowImage();
panel.setBackground(Color.RED);

setContentPane(new ContentPane());
getContentPane().setBackground(Color.BLACK);
setLayout(new BorderLayout());
add(panel);

JPanel pnlButtons = new JPanel(new FlowLayout(FlowLayout.RIGHT));
pnlButtons.setOpaque(false);
pnlButtons.add(new JButton("<<"));
pnlButtons.add(new JButton("<"));
pnlButtons.add(new JButton(">"));
pnlButtons.add(new JButton(">>"));

// Okay, in theory, getContentPane() is required, but better safe the sorry
getContentPane().add(pnlButtons, BorderLayout.SOUTH);

setVisible(true); 
```

![带按钮的示例](../Images/8b9c384dc86e18d2681ad1bf58715bf3.png)

# ms-access - Access 2003 引用子表单记录源

> ID：11703801
> 
> 赞同：0
> 
> 时间：2012-07-28T19:01:42.007
> 
> 标签：ms-access

使用 Access 2003 并希望使用 DCount 来获取查询中的记录计数，该查询是子表单的记录源。我在子表单上使用了一个未绑定的文本框，并在我使用时得到#Error

=DCount("Trans Type","Me.RecordSource",[Void]=False And [Cleared]=False)

作为我的未绑定控件的控制源。

我查看了[http://access.mvps.org/access/forms/frm0031.htm](http://access.mvps.org/access/forms/frm0031.htm)，看来这应该可行。

谢谢

周杰伦

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-28T19:30:06.157

如果 RecordSource 是查询的名称，则可以使用类似的方法，无需引号和 Me：

```
=DCount("[Trans Type]",[RecordSource],"[Void]=False And [Cleared]=False") 
```

但是，最好按名称引用查询。另外，它可能不会给出你想要的结果，一个子表单通常是由 Link Child<->Link Master 字段过滤的，所以如果你想要对子表单中列出的记录进行计数，最好在里面放一个控件表单页脚并在其中输入计数或总和。

# javascript - Twitter Bootstrap Carousel 跳过问题

> ID：11703802
> 
> 赞同：7
> 
> 时间：2012-07-28T19:02:00.633
> 
> 标签：javascript, twitter-bootstrap, carousel

在我正在处理的网站上，当您在页面加载时第一次单击下一步按钮时，轮播似乎会跳到第三张图片。有没有人知道为什么会这样？我正在遵循[引导文档](http://twitter.github.com/bootstrap/javascript.html#carousel)中建议的布局。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-28T20:22:09.267

轮播的初始化好像有问题。

当您第一次单击箭头时，它会初始化触发第一个开关的轮播并选择下一张幻灯片，因为您单击了箭头（全部同时）。

一个直接的解决方法是添加此代码以在加载时初始化轮播（这也启用自动滑动）：

```
$(function() {
    $('#myCarousel').carousel();
}); 
```

确保在插件之后包含它，一切都应该没问题。

### 更新

**它似乎也只是**在没有过渡效果的情况下跳到第 3 位。

正如*merv*所建议的，您可以包含该`bootstrap-transition.js`文件，它将解决您的问题。

无论如何，我提交了一张票，对于那些想要跟进的人：[github上的问题](https://github.com/twitter/bootstrap/issues/4205)

# mysql - mysql复制slave不抓master

> ID：11703804
> 
> 赞同：1
> 
> 时间：2012-07-28T19:02:28.973
> 
> 标签：mysql, replication, database-replication

2天前我开始设置y MySQL主从复制。我从主人那里导出并在奴隶和所有这些东西上导入它。这一切都很好。但是我在设置从奴隶到主人的连接时遇到了一些麻烦。所以我在晚上停止了工作。现在大约 1.5 天后，我解决了问题并且我的复制正在运行。主人一直在奔跑。但是现在当我跑步时，`show slave status`我落后于主人约 125,000 秒。我认为从属服务器会自动从主服务器下载所有记录的内容并运行这些内容以使它们同步。但是 的值`seconds_behind_master`只是变得非常缓慢。这是正常的吗？有没有办法立即推送过去 1.5 天的所有内容，还是我出了什么问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-28T19:08:13.873

从站将尽可能快地在单个线程中执行二进制日志。根据您的服务器配置和主服务器上的负载，从服务器可能需要很长时间才能赶上（在某些情况下甚至会落后更多）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-06-24T07:16:44.923

这是因为 MySQL 从服务器没有赶上主服务器，并且随着时间的推移，它将有更多的滞后或从服务器落后于主服务器。这种情况的唯一解决方案是检查从站的错误日志，并建议在该位置启动 MySQL 从站复制和 bin-log。这里的位置对于更改主命令是准确的。

*   如果您没有找到任何带有错误日志文件的位置，则尝试将 bin-log 转换为文本文件并找到主服务器失去连接的正确日期和时间，并与从服务器交叉检查哪个条目最后插入从服务器并确认位置然后使用更改主命令。

或者

*   更改您的 [主服务器作为从服务器] 和 [从服务器作为主服务器] 并尝试再次进行复制，然后通过反向复制一切顺利，并且在您更改为原始架构之后。它肯定会起作用。

# java - Javac 找不到包中确实存在的类

> ID：11703806
> 
> 赞同：1
> 
> 时间：2012-07-28T19:02:36.893
> 
> 标签：java, compilation, javac

我是java新手，我遇到了一个错误（经过半小时的搜索）并没有显示出来。我有两门课（这是我遵循的教程）：

板子.java：

```
package skeleton;

import javax.swing.JPanel;

public class Board extends JPanel {
    public Board() {}
} 
```

和 Skeleton.java （我已经剥离了不相关的材料）：

```
package skeleton;

import javax.swing.JFrame;

public class Skeleton extends JFrame {
    public Skeleton() {
        add(new skeleton.Board());
    }
    public static void main(String[] args) {
        new Skeleton();
    }
} 
```

我编译了它们，但是 Skeleton 得到了它找不到 Board 的错误。有谁知道为什么 javac 找不到一个在那里的类？

编辑：它们都在同一个名为“skeleton”的文件夹中。另外，我的操作系统是windows xp prof。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-28T19:10:07.903

If its in the same package you don't need to use namespace to call the second class.

Try checking if `Board.class` file is present in the folder. The just use `new Board();` to instantiate.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-28T19:55:12.100

试一试。

```
$ ls      
skeleton
$ ls skeleton
Board.java  Skeleton.java
$ javac skeleton/*.java
$ ls skeleton
Board.class  Board.java  Skeleton.class  Skeleton.java 
```

调用 javac 命令，使两个 .class 文件都出现在骨架中。此外，在运行时确保骨架的父目录在类路径中。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-28T21:33:27.287

假设您在同一目录中编译并运行：

运行时然后使用

```
java -cp . skeleton.Skeleton 
```

# c# - 无限期调用方法

> ID：11703807
> 
> 赞同：-1
> 
> 时间：2012-07-28T19:02:41.833
> 
> 标签：c#, wpf, c++-cli

我想使用使用 c++/cli 创建的 .dll，其中包含 c# wpf 项目中的普通 c 代码。c 代码的函数需要永久调用。此函数最初是在 ac 命令行应用程序的主函数中无限循环调用的。

如何从 wpf c# 项目中永久调用函数而不干扰应用程序的其余部分？我想这应该很容易，但我是 wpf 的新手，对 .Net 也很陌生。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-28T19:05:49.070

您可以在另一个[线程](http://msdn.microsoft.com/en-us/library/system.threading.thread.aspx)`while(true)`上有一个循环。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-28T19:13:38.253

如果我理解正确，您要做的就是继续调用该方法吗？使用计时器：

包括`using System.Windows.Threading;`在文件的顶部。然后写：

```
DispatcherTimer timer = new DispatcherTimer();
timer.Interval = TimeSpan.FromMilliseconds(x); //x is the amount of milliseconds you want between each method call

timer.Tick += (source, e) =>
{
    method();
};
timer.Start(); 
```

计时器将在每次滴答时运行您的方法，您可以在匿名方法中编写额外的代码来控制调用您的方法的频率/次数、调用时间等。当然，它不会干扰您的程序的其余部分。

如果您想尽可能频繁地调用您的程序，请将第二行中的 x 替换为 1。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-28T19:27:51.983

```
using System.Threading;

Thread t = new Thread(()=>{
while(true)
{
//call your method here...
Thread.Sleep(500); //optional if you want a pause between calls.
}
});
t.IsBackground = true;
t.Start(); 
```

# asp.net - 使用皮肤文件，无法设置启用和禁用按钮之间的差异

> ID：11703809
> 
> 赞同：2
> 
> 时间：2012-07-28T19:02:49.713
> 
> 标签：asp.net, stylesheet, skinning

我有一个皮肤文件来设置我的按钮属性，但是当我设置一个状态为 false 的按钮时，该按钮在大多数浏览器中仍然显示与以前相同。

当按钮设置为禁用时，有没有办法可以更改按钮皮肤？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-28T19:11:04.517

大多数浏览器会自动为您设置禁用元素的样式。如果要修改样式表中的默认样式，可以使用以下方法定位禁用元素：

```
input[disabled='disabled'] {
  ... styles go here ... 
} 
```

# r - 使用模糊匹配替换R中变量内的字符串

> ID：11703810
> 
> 赞同：2
> 
> 时间：2012-07-28T17:54:14.140
> 
> 标签：r, text-mining, matching

我有包含 3 个相关变量的数据：第一个是活动 (x1)，第二个是受访者对该活动的评分 (x2)，第三个是 x1 (x3) 中活动的专有名称。x1 变量是受访者编写的，与活动 x3 的参考变量非常接近，但都有些不同。我想用参考 x3 匹配并替换所有 x1 - 我正在考虑使用一个循环来引用每个参考活动 x3，并使用 agrep 之类的程序替换 x1 受访者的书面活动。但是， agrep 似乎只是告诉我匹配是什么。如何用 x3 中的“正确”字符串标题替换 x1 变量？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-28T18:55:47.483

在 R 中，该函数`agrep`返回找到匹配项的索引，而不是匹配项的数量

```
agrep('chrg', c('charge', 'trapper', 'friend', 'charger'))
# [1] 1 4 
```

如果您想获得值而不是索引，则可以通过`value=TRUE`.

```
agrep('chrg', c('charge', 'trapper', 'friend', 'charger'), value=TRUE)
# [1] "charge"  "charger" 
```

**更新后编辑：**

如果`x1`和`x3`是同相的（对于每个索引，您都有*相同*活动的名称），这是一个可以解决问题的片段。

```
subs <- function(x, old, new) {
    # Replace 'old' by 'new' in 'x'.
    matchv <- match(x, old, nomatch=0)
    replace(x, matchv > 0, new[matchv])
}
# y is any vector that contains short names.
subs(y, x1, x3) 
```

如果它们不是同相，您可以使用如下创建`old`和向量。`new``agrep`

```
oldnew <- sapply(x1, function(x) { agrep(x, x3, value=TRUE)[1] })
subs(y, names(oldnew), oldnew) 
```

# scala - Scala中缀/后缀运算符

> ID：11703812
> 
> 赞同：2
> 
> 时间：2012-07-28T19:03:17.450
> 
> 标签：scala, postfix-operator

我想让下面的代码工作，但我得到一个编译错误：'object A#c does not take parameters'

"b" 光盘

如果我不使用'd'，代码编译得很好。它一定与对我来说是新的中缀/后缀运算符有关。有人可以帮我使上面的代码工作，并向我解释（或给我一些指示）为什么上面的代码语法不起作用？

我的班级定义：

```
object A {
    implicit def stringToA(b: String) : A = new A(b)
}

class A(private val b: String) {

    object c {
        println("c")

        def d: Unit = {
            println("d!")
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-28T19:37:55.970

在 scala`a op b`中是`a.op(b)`，所以你的`"b" c d`意愿是`"b".c(d)`，但你想要的是`"b".c.d`，所以你需要完整地编写它。

如果你真的需要写它`"b" c d`，你可以尝试为`d`一个方法做一个arg `c`，例如

```
trait D {}

object d extends D

class A {

   def c(ignored: D) = println("d!")

} 
```

或者可能

```
class A {

   object c {
      def apply(ignored: D) = println("d!")
   }
} 
```

# php - SimplePie：致命错误：调用非对象上的成员函数 set_cache_location()

> ID：11703817
> 
> 赞同：0
> 
> 时间：2012-07-28T19:03:34.193
> 
> 标签：php, mysql, simplepie

我正在尝试将 SimplePie RSS 解析器配置为将提要缓存到 mySQL 数据库中，但是当我尝试加载 SimplePie 页面时，我不断收到以下错误消息：

*   致命错误：在非对象上调用成员函数 set_cache_location()
*   警告：substr() 期望参数 1 是字符串，数组在
*   警告：PDO::__construct() 期望参数 2 是字符串，给定数组

**当我将“端口”设置为“端口”时，我收到以下错误消息：**

> 警告：mysql://“它在此处显示我的数据库用户名和密码”不可写。确保您设置了正确的相对或绝对路径，并且该位置是服务器可写的。在 /home/...../SimplePie.php 第 1357 行

有没有人熟悉 SimplePie？

**编辑**

在下面的代码中，我显然遗漏了 mySQL 设置的用户名和密码。但我只是想承认我“知道”我应该替换这些价值观。另外，我使用“3306”作为我的端口号，因为我被告知这是 mysql 的默认端口号......和主机名的“localhost”

$feed->set_cache_location('mysql://username:password@localhost:3306/database');

```
<?php

include('./base.php');
require_once('./php/autoloader.php');

$feed = new SimplePie();
$feed->set_cache_location('mysql://username:password@hostname:3306/database');

$rssurl = $_GET['r'];
$feedlimit = $_GET['limit'];

if (!empty($feedlimit)) {
$feedlimit = $_GET['limit'];
}

else {

$feedlimit = 10;

}

// Set which feed to process.
if (!empty($rssurl)) {

    $feed->set_feed_url($rssurl);

}

else 

    $rss_results = mysql_query("SELECT feed_id, feed_url, feed_title, feed_order, feed_page_id FROM user_feeds  WHERE ((feed_owner = '" . $_SESSION['UserId'] . "') AND (feed_page_id = '" . $pageid . "')) ORDER BY feed_order ASC LIMIT 1;");

        if ($rss_results) {

        while($row = mysql_fetch_array($rss_results))
        {
        $feed->set_feed_url($row[feed_url]);

        }

        }
        else {
          // something went wrong.
          echo mysql_error();
}

$feed->enable_cache(true);

// Run SimplePie.
$feed->init();

// This makes sure that the content is sent to the browser as text/html and the UTF-8 character set (since we didn't change it).
$feed->handle_content_type();

// Let's begin our XHTML webpage code.  The DOCTYPE is supposed to be the very first thing, so we'll keep it on the same line as the closing-PHP tag.
?>

<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
<title>Feed Page</title>
<script type="text/javascript" src="./js/jquery-1.3.2.min.js"></script>
<script type="text/javascript" src="./js/jquery-ui-1.7.1.custom.min.js"></script>
<link rel='stylesheet' href='./css/styleb.css' type='text/css' media='all' />

<script type="text/javascript">
  // When the document is ready set up our sortable with it's inherant function(s)
  $(document).ready(function() {
    $("#test-list").sortable({
      handle : '.handle',
      update : function () {
          var order = $('#test-list').sortable('serialize');
        $("#info").load("process-sortable.php?"+order);
      }
    });
});
</script>

</head>
<body>

<div>                       

<div id="rsscontent">   

<ul>

    <?php
    /*
    Here, we'll loop through all of the items in the feed, and $item represents the current item in the loop.
    */
    foreach ($feed->get_items(0,$feedlimit) as $item):

        $feeditem = $item->get_feed();
    ?>
<?php if($_GET["view"] === "headlines") {

        echo "<li><h2 class='feed_entry_title'><a href='";
        echo $item->get_permalink();
        echo "'>";      
        echo $item->get_title();
        echo "</a></h2>";
        echo "<hr /></li>";

        }

elseif ($_GET["view"] === "excerpts") { 

        echo "<li><h2 class='feed_entry_title'><a href='";
        echo $item->get_permalink();
        echo "'>";
        echo $item->get_title();
        echo "</a></h2><div class='feed_entry_content'>";
        echo $item->get_description();
        echo "</div><hr /></li>";

} else { 

        echo "<li><h2 class='feed_entry_title'><a href='";
        echo $item->get_permalink();
        echo "'>";
        echo $item->get_title();
        echo "</a></h2><div class='feed_entry_content'>";
        echo $item->get_content();
        echo "</div><hr /></li>";

} ?>

    <?php endforeach; ?>
 <ul>
</div>

</body>

</html> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-18T17:46:33.860

我浏览了 php 代码，发现问题出在 MySQL.php 中。

作为快速修复，只需在 Cache 目录（第 90-94 行）中注释掉 MySQL.php：

```
public function __construct($location, $name, $type)
{
    $this->options = array(
          //'user' => null,
          //'pass' => null,
          //'host' => '127.0.0.1',
          //'port' => '3306',
          //'path' => '',
          'extras' => array(
                'prefix' => '',
          ),
    );
    $this->options = array_merge_recursive($this->options, SimplePie_Cache::parse_URL($location)); 
```

然后它应该工作。

# ruby-on-rails - RoR：查找对象数组的所有关联对象

> ID：11703822
> 
> 赞同：1
> 
> 时间：2012-07-28T19:04:25.000
> 
> 标签：ruby-on-rails, arrays, associations, associated-object

在 Rails 中工作，我正在努力输出 2012 年秋季季度的用户课程列表。我在这里有 3 个重要模型：用户、宿舍和课程。根据我所做的其他工作，我很确定我的模型协会是正确的，但对于那些感兴趣的人：

*   用户 has_many :quarters 和 has_many :courses through Quarters
*   Quarter belongs_to 用户和 HABTM 课程（通过适当的连接表）
*   课程 has_many users through quarters 和 HABTM Quarters

我想实现一个查询来收集特定季度的课程，例如

```
 current_user.quarters.where(:term => "Fall 2012").courses.each do |c|
       puts c.title
    end 
```

但这会导致我理解的错误“未定义的方法'课程'”，但我仍然想像上面的代码那样*访问对象数组的所有关联对象，*而不是运行我需要的嵌入式循环：

```
 current_user.quarters.where(:term => "Fall 2012").courses.each do |q|
        q.courses.each do |c|
            puts c.title
        end
    end 
```

谢谢！任何想法表示赞赏:)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-28T19:12:00.520

像这样 ：

```
current_user.courses.where("quarters.term" => 'Fall 2012') 
```

应该管用 ：）

# linux - 如何在 amazon micro ec2 服务器（Amazon Linux）上安装 SVN 客户端

> ID：11703823
> 
> 赞同：6
> 
> 时间：2012-07-28T19:04:29.460
> 
> 标签：linux, svn, amazon-ec2, amazon

我在云上使用商业颠覆服务器（Assembla），我有一个带有 Amazon Linux 的 Amazon 微型服务器。我想在那台机器上安装一个 SVN 客户端。我知道 rapidSVN 在 Linux 上运行，但我不知道它是否在 Amazon Linux 上受支持，以及它是否是如何设置的。请建议我可以使用哪个 SVN，并指导我如何设置它。（我更喜欢带有 GUI 界面的客户端）。
谢谢

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-07-28T19:44:56.600

我很确定 amazon linux 是基于 RPM 的，你需要通过 yum 安装 svn：

```
sudo yum install subversion 
```

# java - Java中旅行商问题的蛮力算法

> ID：11703827
> 
> 赞同：5
> 
> 时间：2012-07-28T19:04:50.177
> 
> 标签：java, algorithm, recursion, traveling-salesman

我正在为学校的数学课做一个项目，我选择做我的旅行商问题，这是我一直想进一步研究的问题。但是，我的蛮力求解算法存在问题。

***请到底部更新查看最新版本的代码**

* * *

* * *

**如果您知道旅行推销员的问题是什么，请跳过此段落：** 尽可能地总结一下，TSP 是这样的：你是一个推销员，想要访问一个地区的每个城市（一个城市本质上是地图上的一个点）。在有界的 x 和 y 区域中有“n”个城市，每个城市都与每个城市相连（假设一条直路）。您需要在允许您访问每个城市的城市中找到最短的路线。我想使用的算法之一（我需要测试其他算法）是蛮力，它检查每条可能的路线并返回最短的路线路线。之所以不总是使用它，是因为它需要我们检查 (n-1)！可能的路线，随着“n”的增加，这个数字会变得很大——事实上，只有 50 个城市，那就是 608281864034267560872252163321295376887552831379210240000000000 条要检查的路线。

*假设在这篇文章中讨论的所有示例，我们将使用具有 4*个城市的任意区域（即使算法可以处理 n 个城市。我们也不关心距离 - 我们想粗暴地击中每条可能的路线力量）。

这是一个简单的图片演示我在说什么（4个城市是我开始检查过程是否正常工作）

[带有城市的地图图片](http://www.emeraldinsight.com/content_images/fig/0050300707002.png)

这是蛮力算法（假设所有其他调用的方法都能正常工作，因为它们确实如此）：

（检查下面的更多解释）

[代码]

```
public void BruteForceFindBestRoute(Route r) //Must start r having 1 unflagged city to begin with
    {
        if(!r.allFlagged() && r.route.size() != m.cities.size())
        {
            /*STEP 1 Begin with last unflagged city*/
            City pivot = r.lastCityAdded();
            /*STEP 2: Flag city*/
            pivot.visited = true;
            /*STEP 3: Find cities "NOT IN ROUTE"*/
            ArrayList<City> citiesNotInRoute = new ArrayList<City>();
            for(int i = 0; i<m.cities.size(); i++)
            {
                if(!r.isCityInRoute(m.cities.get(i).name))
                {
                    citiesNotInRoute.add(m.cities.get(i));
                }
            }
            /*STEP 4: Recursively call BruteForceFindBestRoute() using these cities added to the end of our original route*/
            for(int i = 0; i<citiesNotInRoute.size(); i++)
            {
                Route newRoute = r;
                newRoute.addToRoute(citiesNotInRoute.get(i));
                BruteForceFindBestRoute(newRoute);
            }
        }
        /*STEP 5: If the route is full but the last city isn't flagged, then flag it call BruteForceFindBestRoute() again, with the last city flagged*/
        else if(!r.allFlagged() && r.route.size() == m.cities.size())
        {
            if(r.allFlaggedButLast())
            {
                Route x = r;
                x.flagLastCity();
                BruteForceFindBestRoute(x);
            }
        }
        /*STEP 6: If all cities are flagged, the route is full. Check to see if it's the best route.*/
        else if(r.allFlagged())
        {
            if(IsBestRoute(r))
                bestRoute = r;
        }
        else
            System.err.println("Error: somehow all cities got flagged, but the route isn't full");

    } 
```

这是我的逻辑：（注意：城市对象有一个名为“已访问”的“标志”布尔变量）

*（如果没有标记所有路线，并且路线不包含每个可能的城市）*

*   从 1 个未标记城市的路线开始。
*   标记“最后一个未标记”的城市（这个城市是“枢轴”）
*   找到每个“不在 ROUTE R”中的城市，并将其添加到新路线中。
*   在这些路由中的每一个上递归调用 BruteForce 方法。

*（如果所有路线都没有标记，但路线包含每个城市）*

*   标记最后一个城市

*（否则...这意味着该路线已标记每个城市并包含每个可能的城市）*

*   看看这是否是最短的路线 - 如果是，将其存储在全局变量中

这张图片将帮助我解释问题......所以程序正确地从左侧下降。然而，在它到达底部之后，人们会期望递归跳回到第 4 步，它确实如此。然而，不是 R 将城市 A 标记和城市 B 未标记，然后在包含 Aflag 和 B 的“新路线”上递归调用自己，R 现在包含所有 4 个城市，并且所有 4 个城市都被标记。它失败了，因为它将城市 D 再次添加到“newRoute”，再次递归调用自身，在另一种方法中，我们得到一个数组越界错误，因为我所在的地区没有 5 个城市，但路线 r 中有 5 个城市错误（A、B、C、D、D）。

[递归树结构的有用图片](http://i264.photobucket.com/albums/ii191/om3n07/46049b90.jpg)

该问题与在循环中调用递归或在递归调用中引用路由“r”有关。

如果您知道我需要做什么，我将非常感谢您的帮助。

感谢任何会帮助我的人。我会将整个项目发送给任何愿意提供帮助的人。

* * *

**更新**

好吧，所以我试图缩短和简化我原来的方法，这就是我所拥有的：

```
public void BruteForceFindBestRoute(Route r, ArrayList<City> citiesNotInRoute)
    {
        if(!citiesNotInRoute.isEmpty())
        {
            for(int i = 0; i<citiesNotInRoute.size(); i++)
            {
                City justRemoved = (City) citiesNotInRoute.remove(0).clone();
                Route newRoute = (Route) r.clone();
                newRoute.addToRoute(justRemoved);

                BruteForceFindBestRoute(newRoute, citiesNotInRoute);
                citiesNotInRoute.add(justRemoved);
            }
        }
        else //if(citiesNotInRoute.isEmpty())
        {
            if(IsBestRoute(r))
                bestRoute = r;
        }

    } 
```

问题是，当我们跳出递归时，for 循环中的变量 i 似乎失去了意义，并且循环不会继续。想法？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-28T19:22:15.337

递归调用返回后，您应该从路线中删除城市。你来做这件事：

```
 Route newRoute = r;
            newRoute.addToRoute(citiesNotInRoute.get(i));
            BruteForceFindBestRoute(newRoute); 
```

但从来没有一个`newRoute.removeFromRoute`或类似的。

请注意，您正在编写 Java，并且在 Java 中，对象的分配是*通过引用*完成的。这意味着`r`和`newRoute`是*同一个对象*。`newRoute`不是`r`您可能期望的独立副本。所以任何修改`newRoute`都会改变`r`。您可能想在那里明确复制您的路线。对此的 Java 术语是[clone](http://docs.oracle.com/javase/7/docs/api/java/lang/Cloneable.html)。确保你的克隆足够深，即克隆所有相关的数据结构，而不是在原始数据结构和它的克隆之间共享它们。

*注意：*有很多地方可以让你的代码更高效，但无论如何，蛮力远非高效，而且你只是在谈论几个城市，也许你不必关心。但是，如果您想研究替代方案，请考虑维护所有未访问城市的单个链接列表。每个调用都会遍历该列表，删除一个元素，递归并放回元素。无需在每次调用中从头开始构建此列表。[跳舞链接](http://arxiv.org/abs/cs/0011047)的想法可以巧妙地应用于此任务，作为预制链接列表实现的替代方案。

**编辑：**

您的代码的以下变体对我有用：

```
import java.util.*;

class SO11703827 {

    private static ArrayList<Integer> bestRoute;

    public static void bruteForceFindBestRoute
        (ArrayList<Integer> r,
         ArrayList<Integer> citiesNotInRoute)
    {
        if(!citiesNotInRoute.isEmpty())
        {
            for(int i = 0; i<citiesNotInRoute.size(); i++)
            {
                Integer justRemoved =
                    (Integer) citiesNotInRoute.remove(0);
                ArrayList<Integer> newRoute =
                    (ArrayList<Integer>) r.clone();
                newRoute.add(justRemoved);

                bruteForceFindBestRoute(newRoute, citiesNotInRoute);
                citiesNotInRoute.add(justRemoved);
            }
        }
        else //if(citiesNotInRoute.isEmpty())
        {
            if(isBestRoute(r))
                bestRoute = r;
        }

    }

    private static boolean isBestRoute(ArrayList<Integer> r) {
        System.out.println(r.toString());
        return false;
    }

    public static void main(String[] args) {
        ArrayList<Integer> lst = new ArrayList<Integer>();
        for (int i = 0; i < 6; ++i)
            lst.add(i);
        ArrayList<Integer> route = new ArrayList<Integer>();
        bruteForceFindBestRoute(route, lst);
    }
} 
```

# gwt - 在 GWT 中为 JavaScript 代码引用 JavaScript 库

> ID：11703828
> 
> 赞同：0
> 
> 时间：2012-07-28T19:04:50.820
> 
> 标签：gwt, javascript, d3.js, jsni

我正在使用[d3.js 库](http://d3js.org/)并编写了一些 JavaScript 代码，这些代码已经绘制了我想要的动画。为了简单/大小，假设我想使用[这个](http://bl.ocks.org/1062544)示例源代码。我正在尝试使用 GWT 围绕动画构建更丰富的用户界面。例如，如果我在 GWT java 中设计了一个按钮来打开/关闭粒子动画并触发“StopAnimation()”javascript 函数，我应该将 d3.js 库放置在哪里以便正确引用它？

我已阅读与此主题相关的以下帖子：

[发布 1](https://stackoverflow.com/questions/10641066/javascript-library-from-gwts-java) [发布 2](https://stackoverflow.com/questions/4138887/is-there-any-way-to-automatically-bridge-a-javascript-library-to-gwt) [发布 3](https://developers.google.com/web-toolkit/doc/latest/DevGuideCodingBasicsJSNI)

我对 GWT 真的很陌生，所以我可能遗漏了一些东西，但所有这些示例都谈到了从 GWT 代码直接接触 javascript 库或与 javascript 代码交互。就我而言，我需要与 GWT 交互的唯一 javascript 代码是[粒子示例](http://bl.ocks.org/1062544)，所以我不认为 d3.js 应该需要任何特殊的 JSNI 接口对吗？...因为粒子示例代码是唯一使用的部分d3.js。我遇到的问题是，当我将 javascript 代码放入已编译的 html 文件中时，它永远不会产生动画。

```
<!DOCTYPE html>
<html>
<head>
    <meta http-equiv="content-type" content="text/html; charset=UTF-8">

    <link type="text/css" rel="stylesheet" href="MenuViewer.css">

    <title>Wrapper HTML for MenuViewer</title>

    <script language="javascript" src="com.JoshBradley.MenuViewer/com.JoshBradley.MenuViewer.nocache.js"></script>
    <script language="javascript" src="d3-v2.9.5/d3.v2.js"></script>

</head>
<body>
    <div id="graph"></div>
    <div id="menu"></div>
    <script type="text/javascript">
        var w = 960;
        var h = 500;
        var z = d3.scale.category20c();
        var i = 0;

        var svg = d3.select("body").select("graph").append("svg:svg").attr("width", w).attr("height", h).style("pointer-events", "all").on("mousemove", particle);

        function particle() {
            var m = d3.svg.mouse(this);

            svg.append("svg:circle").attr("cx", m[0]).attr("cy", m[1]).attr("r", 1e-6).style("stroke", z(++i)).style("stroke-opacity", 1).transition().duration(2000).ease(Math.sqrt).attr("r", 100).style("stroke-opacity", 1e-6).remove();
        }
    </script>
</body> 
```

我看到了我在 GWT 中创建的东西，但没有粒子。最初我收到参考错误，因为 d3.js 不在正确的文件夹中，但是一旦我将它放在 war 目录中，它们就消失了，所以问题不可能是参考错误。我可以像这样将 javascript 代码直接放入 html 文件中吗？到目前为止，我并不担心 GWT/javascript 与粒子代码的交互是否正常工作。我只想在同一页面上看到相应的 GWT 代码和粒子代码动画。我会担心稍后停止动画。

RootPanel 分配给“menu”div，粒子代码分配给“graph”div。当我通过 firebug 检查 html 时，“graph” div 中没有创建任何内容。有人可以解释我做错了什么吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-29T19:56:02.940

此位不正确：

```
d3.select("body").select("graph") 
```

没有称为“图形”的元素，因此这将是一个空选择。

D3 使用 CSS3 来[选择](https://github.com/mbostock/d3/wiki/Selections)元素。我想你想选择 ID 为“graph”的元素，所以它应该是：

```
d3.select("body").select("#graph") 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-30T09:24:25.833

除了上面的答案：查看[Protovis-GWT](http://code.google.com/p/choosel/wiki/ProtovisGWT)的源代码。Protovis 是 D3.js 的前身，Protovis-GWT 是它的 GWT 包装器。

您可以查看 GWT 包装器的源代码以了解它们如何与 Protovis 交互，并且由于 Protovis 和 d3.js 共享一些常见的设计模式，它可能会对您的用例有所帮助。

# windows-installer - 如何在选择父项时自动选择 MSI 功能表中的功能

> ID：11703829
> 
> 赞同：0
> 
> 时间：2012-07-28T19:04:53.377
> 
> 标签：windows-installer, far

在我的具体示例中，我正在查看[FarManager](http://www.farmanager.com) 3 的夜间构建。但是，这同样适用于 FarManager 2.0。

默认情况下，安装 FarManager 时不会选择插件功能。您可以使用以下命令从非交互式命令行安装中选择功能：

```
msiexec /i "farSetup.msi" /passive ADDLOCAL=Addons,Colors,Macros,SetUp,Shell,XLat' 
```

`ADDLOCAL=Addons`我认为仅仅因为功能表就应该可以做到这一点。如果您在[Orca](http://msdn.microsoft.com/en-us/library/windows/desktop/aa370557(v=vs.85).aspx)中打开 Feature Table ，您会看到 Addons 的以下子功能。

![来自 msi 功能表的插件](../Images/357c1668a78525c7dbfc1fef8ae95c5b.png)

有没有办法修改特征表，以`ADDLOCAL=Addons`暗示*颜色、宏、SetUp、Shell 和 XLat*的 clild 特征？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-29T14:08:25.877

您是否尝试过指定包含`msidbFeatureAttributesFollowParent`(value `2`) 和`msidbFeatureAttributesUIDisallowAbsent`(value 16) 的属性，将您带到`26`? 根据[功能表文档](http://msdn.microsoft.com/en-us/library/windows/desktop/aa368585.aspx)，这应该将功能状态联系在一起。当然，如果您想让子特征保持未选中状态，这是不可行的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-29T03:20:49.230

严格来说，没有。

但是，您可以拥有类似 INSTALLADDONS=1 的属性，然后在功能条件中使用该属性。当属性包含插件时，您还可以有一个自定义操作，将其他功能名称添加到 ADDLOCAL 属性。

# crystal-reports - 水晶报表拆分字符串公式

> ID：11703830
> 
> 赞同：0
> 
> 时间：2012-07-28T19:05:07.993
> 
> 标签：crystal-reports, report, formula

我试图只显示字符串字段的日期部分。这是字符串的格式：`STARTED:/ 03/23/1983 TIME:/ 03:12`

我需要删除 "STARTED:/" 和 "TIME:/ 03:12" 并且只显示字符串的日期部分：`03/23/1983`。我可以使用什么公式来做到这一点？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-05-12T04:57:30.687

I have used this formula to split the string of Full Name into "Last Name", rest of the string is concatenated as "First Name"

```
 Dim string_array() As String
        Dim i As Integer = 0
        Dim ContactName As String = dt(0)("ContactName").ToString()
        Dim contact_name As String
        contact_name = String.Empty
        If ContactName.Length = 0 Then
            contact_name = String.Empty
        Else
            string_array = Split(ContactName, " ")
            If string_array.Count > 1 Then
                For i = 0 To string_array.Count - 2
                    If string_array(i) = String.Empty Then
                        Continue For
                    End If
                    contact_name = contact_name & " " & string_array(i)
                Next
            Else
                contact_name = ContactName
            End If
        End If 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-28T19:27:03.387

Crystal Reports 帮助文件是您的朋友，应该是您对内置函数和数据类型的简单问题的第一站。

在 CR 中，字符串只是存储为字符数组，因此您可以像数组一样访问它们 - 通过索引。因此，在您的情况下，如果您始终具有相同的字符串格式（即相同数量的字符、前导零等），那么您可以执行以下操作：

```
local stringvar mystr := {table.your_string}; //mystr:="STARTED:/ 03/23/1983 TIME:/ 03:12"
mystr[11 to 20] //return "03/23/1983"
```

或者，您可以使用 Mid() 字符串函数。

# windows-phone-7 - 超出范围异常，但索引在范围内！WP 7.1

> ID：11703831
> 
> 赞同：1
> 
> 时间：2012-07-28T19:05:11.847
> 
> 标签：windows-phone-7

自从我将项目从 7.0 转换为 7.1 后，我就遇到了非常奇怪的错误。例如：

```
List<bool> locks = new List<bool>(11);
locks[0] = true; 
```

它在第二行抛出一个参数超出范围异常，但是当我将鼠标放在锁上时，它显示它有 11 个元素，所有这些元素都初始化为 false。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-28T19:41:49.443

[`List<T>`](http://msdn.microsoft.com/en-us/library/dw8e0z9z%28v=vs.95%29)我只是在 Silverlight 框架中查找了 MSDN 条目。如果您发布的代码是您的确切代码，那么您将得到 ，`ArgumentOutOfRangeException`因为索引不存在。

您的构造函数`List<bool> locks = new List<bool>(11);`正在创建一个包含 0 个元素的新列表，但初始容量为 11。

当您调用 时`locks[0] = true;`，您正在尝试访问尚未添加的元素，因此会引发异常。

根据您的评论，您似乎在列表中看到了 11 个布尔值。除非您在两行之间有更多代码，否则这是不可能的。

使用调试器，如果您深入研究对象，您将看到 的支持数组，该数组`List<bool>`将包含 11 个元素。但它`List`本身没有任何元素。您可以通过调用轻松验证这一点`List.Count`

而且你永远不会`null`在任何地方看到布尔值。 `bool`是一个默认值为 false 的值类型，这就是为什么后备数组显示 11 个元素全部为 false 的原因。

# wpf - DragMove() 和最大化

> ID：11703833
> 
> 赞同：11
> 
> 时间：2012-07-28T19:05:15.997
> 
> 标签：wpf, drag, move, maximize

我在 WPF 中的自定义窗口（AllowTransparency，WindowStyle=None）有问题。DragMove() 方法效果很好，但是当我最大化窗口，或者通过 Windows 7 Aero Snap 自动最大化时，这个方法根本不起作用。所以我不能用鼠标拖动来取消捕捉窗口并将它的状态返回到 WindowState.Normal。左右 Aero Snap 效果很好，我可以毫无问题地捕捉和取消捕捉窗口。但是当它最大化时，除了 Win+Down 组合之外没有任何效果。也许有人知道如何解决这个问题，或者我在哪里可以找到其他方法来使用有效的 Aero Snap 功能对自定义窗口进行适当的 DragMove？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-07-28T20:20:43.830

这是我的方法。试着让它更短）））

```
private void InitHeader()
{
    var border = Find<Border>("borderHeader");
    var restoreIfMove = false;

    border.MouseLeftButtonDown += (s, e) =>
    {
        if (e.ClickCount == 2)
        {
            if ((ResizeMode == ResizeMode.CanResize) ||
                (ResizeMode == ResizeMode.CanResizeWithGrip))
            {
                SwitchState();
            }
        }
        else
        {
            if (WindowState == WindowState.Maximized)
            {
                restoreIfMove = true;
            }

            DragMove();
        }
    };
    border.MouseLeftButtonUp += (s, e) =>
    {
        restoreIfMove = false;
    };
    border.MouseMove += (s, e) =>
    {
        if (restoreIfMove)
        {
            restoreIfMove = false;
            var mouseX = e.GetPosition(this).X;
            var width = RestoreBounds.Width;
            var x = mouseX - width / 2;

            if (x < 0)
            {
                x = 0;
            }
            else
            if (x + width > screenSize.X)
            {
                x = screenSize.X - width;
            }

            WindowState = WindowState.Normal;
            Left = x;
            Top = 0;
            DragMove();
        }
    };
}

private void SwitchState()
{
    switch (WindowState)
    {
        case WindowState.Normal:
        {
            WindowState = WindowState.Maximized;
            break;
        }
        case WindowState.Maximized:
        {
            WindowState = WindowState.Normal;
            break;
        }
    }
} 
```

（要获得 screenSize 我使用本机方法）

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2014-01-06T00:52:43.007

Groaner 的解决方案无法在多个显示器设置下正常运行，尤其是在主显示器不在最左侧的情况下。

这是我基于他的解决方案，它可以正确处理单个或多个监视器设置。在此代码中，“rctHeader”是在 XAML 中定义的 Rectangle。

```
 private bool mRestoreIfMove = false;

    public MainWindow()
    {
        InitializeComponent();
    }

    private void SwitchWindowState()
    {
        switch (WindowState)
        {
            case WindowState.Normal:
                {
                    WindowState = WindowState.Maximized;
                    break;
                }
            case WindowState.Maximized:
                {
                    WindowState = WindowState.Normal;
                    break;
                }
        }
    }

    private void rctHeader_MouseLeftButtonDown(object sender, MouseButtonEventArgs e)
    {
        if (e.ClickCount == 2)
        {
            if ((ResizeMode == ResizeMode.CanResize) || (ResizeMode == ResizeMode.CanResizeWithGrip))
            {
                SwitchWindowState();
            }

            return;
        }

        else if (WindowState == WindowState.Maximized)
        {
            mRestoreIfMove = true;
            return;
        }

        DragMove();
    }

    private void rctHeader_MouseLeftButtonUp(object sender, MouseButtonEventArgs e)
    {
        mRestoreIfMove = false;
    }

    private void rctHeader_MouseMove(object sender, MouseEventArgs e)
    {
        if (mRestoreIfMove)
        {
            mRestoreIfMove = false;

            double percentHorizontal = e.GetPosition(this).X / ActualWidth;
            double targetHorizontal = RestoreBounds.Width * percentHorizontal;

            double percentVertical = e.GetPosition(this).Y / ActualHeight;
            double targetVertical = RestoreBounds.Height * percentVertical;

            WindowState = WindowState.Normal;

            POINT lMousePosition;
            GetCursorPos(out lMousePosition);

            Left = lMousePosition.X - targetHorizontal;
            Top = lMousePosition.Y - targetVertical;

            DragMove();
        }
    }

    [DllImport("user32.dll")]
    [return: MarshalAs(UnmanagedType.Bool)]
    static extern bool GetCursorPos(out POINT lpPoint);

    [StructLayout(LayoutKind.Sequential)]
    public struct POINT
    {
        public int X;
        public int Y;

        public POINT(int x, int y)
        {
            this.X = x;
            this.Y = y;
        }
    }

} 
```

* * *

## 回答 #3

> 赞同：11
> 
> 时间：2015-06-17T21:39:07.083

在 WPF 中，我强烈建议在[Window.DragMove](https://msdn.microsoft.com/en-us/library/system.windows.window.dragmove(v=vs.110).aspx)之前恢复窗口时使用[Control.PointToScreen](https://msdn.microsoft.com/en-us/library/system.windows.forms.control.pointtoscreen(v=vs.110).aspx)。PointToScreen 还将处理多个监视器设置。这将简化以下内容的恢复：

```
 private void OnMouseLeftButtonDown( object sender, MouseButtonEventArgs e )
    {
        if( e.ClickCount == 2 )
        {
            if( ResizeMode != ResizeMode.CanResize && 
                ResizeMode != ResizeMode.CanResizeWithGrip )
            {
                return;
            }

            WindowState = WindowState == WindowState.Maximized
                ? WindowState.Normal
                : WindowState.Maximized;
        }
        else
        {
            mRestoreForDragMove = WindowState == WindowState.Maximized;
            DragMove();
        }
    }

    private void OnMouseMove( object sender, MouseEventArgs e )
    {
        if( mRestoreForDragMove )
        {
            mRestoreForDragMove = false;

            var point = PointToScreen( e.MouseDevice.GetPosition( this ) );

            Left = point.X - ( RestoreBounds.Width * 0.5 );
            Top = point.Y;

            WindowState = WindowState.Normal;

            DragMove();
        }
    }

    private void OnMouseLeftButtonUp( object sender, MouseButtonEventArgs e )
    {
        mRestoreForDragMove = false;
    }

    private bool mRestoreForDragMove; 
```

* * *

## 回答 #4

> 赞同：7
> 
> 时间：2016-09-24T08:35:33.020

另一个答案有点晚了，但我的代码更简单，所以我把它放在这里。左右对齐可以正常工作，但是当窗口最大化或对齐到屏幕上界并最大化时，DragMove 方法将不起作用！所以这就是我所做的：

* * *

只需在要拖动的元素上处理 Mouse_Down 事件，如下所示：

```
private void TitleBar_MouseLeftButtonDown(object sender, MouseButtonEventArgs e)
{
    if (WindowState == WindowState.Maximized)
    {
        var point = PointToScreen(e.MouseDevice.GetPosition(this));

        if (point.X <= RestoreBounds.Width / 2)
            Left = 0;

        else if (point.X >= RestoreBounds.Width)
            Left = point.X - (RestoreBounds.Width - (this.ActualWidth - point.X));

        else
            Left = point.X - (RestoreBounds.Width / 2);

        Top = point.Y - (((FrameworkElement)sender).ActualHeight / 2);
        WindowState = WindowState.Normal;
    }
    DragMove(); 
} 
```

我希望它可以帮助某人！

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2019-03-21T02:26:55.707

DragMove() 方法仅适用于表单的标题栏中，因此请使用：

```
[DllImport("user32.dll")]
public static extern IntPtr SendMessage(IntPtr hWnd, int wMsg, int wParam, int lParam);

public static void StartDrag(Window window)
{
    WindowInteropHelper helper = new WindowInteropHelper(window);
    SendMessage(helper.Handle, 161, 2, 0);
} 
```

**不要忘记添加 System.Windows.Interop**

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2015-01-05T10:47:53.547

我为此写了一篇博文：

[http://dragablz.net/2014/12/16/getting-windows-snap-to-play-with-wpf-borderless-windows/](http://dragablz.net/2014/12/16/getting-windows-snap-to-play-with-wpf-borderless-windows/)

# windows - 将文件复制到文件夹的所有子文件夹

> ID：11703834
> 
> 赞同：0
> 
> 时间：2012-07-28T19:05:37.043
> 
> 标签：windows, batch-file, cmd

我需要将 test.swf 复制到 c:/test 文件夹的所有不包含“git”字的子文件夹

只是尝试了类似的东西但没有奏效

```
@setlocal enableextensions enabledelayedexpansion
@echo off
for /r %%a in (.) do
( 
if not x%a:git=%==x%a% do
(
@copy "C:\test.swf" %a > nul
)
)
endlocal 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-29T03:02:25.520

使用 vbscript 肯定没有错:-) *（请参阅[OP 的回答](https://stackoverflow.com/a/11703970/1012053)）*

但我想我会指出你的批处理代码哪里出错了。

*   左括号必须与 IF 或 DO 在同一行，并且前面必须有一个空格。
*   DO 不与 IF 一起使用
*   您还需要 FOR /D 选项与 /R 一起使用。没有它，您将获得文件而不是目录。
*   您`.`将包括父目录。相反，您只想`*`得到孩子。
*   我不确定您的要求，但我假设路径`C:\test\_git_\test`应该获取文件，因为文件夹名称不包含“git”（尽管父级包含）。您的代码将在路径中的任何位置查找 git。
*   在批处理文件中，所有 FOR 变量都必须用双百分号引用，如 %%a 中所示。你不一致。
*   您不能对 FOR 变量执行搜索和替换，只能对环境变量执行搜索和替换。

其他改进点，但不是错误：

*   很少需要 enableExtensions。默认情况下启用。
*   最好放在`@echo off`顶部，然后在每个命令前面加上`@`.
*   您启用了延迟扩展，但没有使用它。尽管使用您的算法的正确解决方案需要它。

这是您的算法的正确代码。*（实际上下面的代码解决方案都没有经过测试，但我认为我猜对了）*

```
@echo off
setlocal enableDelayedExpansion
for /d /r "c:\test" %%F in (*) do (
  set "name=%%~nxF"
  if "!name:git=!" neq "!name!" copy "c:\test.swf" "%%F" >nul
) 
```

以上通常有效。但如果文件夹名称包含，则会失败，`!`因为延迟扩展会破坏 %%F 的扩展。解决方案是在循环内打开和关闭延迟扩展。

```
@echo off
setlocal disableDelayedExpansion
for /d /r "c:\test" %%F in (*) do (
  set "name=%%~nxF"
  setlocal enableDelayedExpansion
  if "!name:git=!" neq "!name!" (
    endlocal
    copy "c:\test.swf" "%%F" >nul
  ) else endlocal
) 
```

但是有一个更简单的方法。您可以使用正则表达式将 DIR 的结果通过管道传输到 FINDSTR，该正则表达式将过滤掉名称中带有“git”的文件夹。然后使用 FOR /F 处理结果。
***编辑***-*我简化了正则表达式。*

```
@echo off
for /f "delims=" %%F in (
  'dir /ad /s /b "c:\test\*" ^| findstr /virc:"git[^\\]*$"'
) do copy "c:\test.swf" "%%F" 
```

整个过程可以在命令行中的一行完成

```
for /f "delims=" %F in ('dir /ad /s /b "c:\test\*" ^| findstr /virc:"git[^\\]*$"') do @copy "c:\test.swf" "%F" 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-28T19:23:59.997

刚刚用 vbscript 做的

```
Const SourceDir = "C:\source"
Const TargetDir  = "C:\target\"

Set objFSO = CreateObject("Scripting.FileSystemObject")
Set objFolder = objFSO.GetFolder(TargetDir)
Set colSubfolders = objFolder.Subfolders

Set dosyalarklasor = objFSO.GetFolder(SourceDir)
Set dosyalar = dosyalarklasor.Files

For Each objSubfolder in colSubfolders
    if not instr(objSubfolder.Name,".git") > 0 then
        For Each dosya in dosyalar
        objFSO.CopyFile dosya, TargetDir & objSubfolder.Name & "\"
        Next
    end if 
Next 
```

# sql - How to retrieve the last 2 records from table?

> ID：11703844
> 
> 赞同：1
> 
> 时间：2012-07-28T19:06:39.683
> 
> 标签：sql, oracle10g

I have a table with n number of records

How can i retrieve the nth record and (n-1)th record from my table in SQL without using derived table ?

I have tried using `ROWID` as

```
select * from table where rowid in (select max(rowid) from table); 
```

It is giving the nth record but i want the (n-1)th record also . And is there any other method other than using `max,derived table and pseudo columns`

Thanks

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-28T19:23:38.367

您不能依赖 rowid 将您带到表中的最后一行。您需要一个自动递增的 id 或创建时间来进行正确的排序。

例如，您可以使用：

```
select *
from (select t.*, row_number() over (order by <id> desc) as seqnum
      from t
     ) t
where seqnum <= 2 
```

尽管语法允许，但子查询中的 order by 子句被忽略（例如[http://docs.oracle.com/javadb/10.8.2.2/ref/rrefsqlj13658.html](http://docs.oracle.com/javadb/10.8.2.2/ref/rrefsqlj13658.html)）。

需要明确的是，rowid 与表中行的顺序无关。Oracle 文档非常清楚它们指定了数据的*物理*访问路径（http://docs.oracle.com/cd/B28359_01/server.111/b28318/datatype.htm#i6732）。确实，在空数据库中，将记录插入新表可能会创建单调递增的行 ID 序列。 *但是你不能依赖这个。* rowid 的唯一保证是它们在表中是唯一的，并且是访问特定行的最快方式。

我不得不承认，我在其最新版本的子查询中找不到关于 Oracle 处理或不处理 order by 的良好文档。ANSI SQL 不需要兼容的数据库来支持子查询中的排序。Oracle 语法允许这样做，并且至少在某些情况下似乎可以工作。我最好的猜测是，它可能会在单个处理器、Oracle 的单线程实例上运行，或者如果数据访问是通过索引进行的。一旦引入并行性，结果可能不会被排序。自从我开始使用 Oracle（在 1990 年代中期）以来，我一直认为子查询中的 order bys 通常会被忽略。我的建议是不要依赖于功能，直到 Oracle 明确声明它受支持。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-28T19:10:13.450

```
select * from (select * from my_table order by rowid) where rownum <= 2 
```

and for rows between N and M:

```
select * from (
   select * from (
      select * from my_table order by rowid
                 ) where rownum <= M
              ) where rownum >= N 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-28T19:08:09.823

Try this

```
select top 2 * from table order by rowid desc 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-28T19:20:03.667

假设`rowid`作为表中的列：

```
SELECT * FROM table ORDER BY rowid DESC LIMIT 2 
```

# c++ - How exactly does minimax recursion work?

> ID：11703846
> 
> 赞同：4
> 
> 时间：2012-07-28T19:07:30.260
> 
> 标签：c++, recursion, concept, minimax

So I was looking up Mini-max for a Tic-Tac-Toe Game, but couldn't understand how the recursion worked? Okay, so basically here are my questions:

1.  How does minimax know whose turn is it? Whats the best way to indicate the player whose turn it is generating?
2.  How do you generate possible moves?
3.  How do you know when you are at a terminal node, and how do you generate the terminal nodes?

For example in this Pseudo-code

```
function integer minimax(node, depth)
if node is a terminal node or depth <= 0:
    return the heuristic value of node
α = -∞
for child in node: # evaluation is identical for both players
    α = max(α, -minimax(child, depth-1))
return α 
```

A `node` is a board correct? And is the depth how many plies the code has to go down in recursion? Also what is the `max` function and where are the nodes being generated from?

Now, so far I have this code for creating a board:

```
class Board{
    public:
        Board();
        ~Board(){};
    public: // The board
        // In the board, 1 is x, 2 is o, 0 is empty square.
        int board[3][3];
}; 
```

But how would I know whose turn is it? And how do I generate the child nodes for the board?

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-28T19:32:03.273

我们将首先以您的井字游戏为例。

*   极小极大算法最适合玩家交替回合的游戏，但也适用于玩家每回合可能进行多次移动的游戏。为简单起见，我们假设前者。在这种情况下，您不需要在每个节点上存储“X 移动”或“O 移动”，因为这可以通过节点深度的奇偶性来确定（无论我是偶数步还是奇数步数，从顶部开始）。
*   从每个位置生成可能的移动需要您知道它是谁的移动（可以像以前一样确定），以及从特定位置开始合法移动的规则。对于像井字游戏这样的简单游戏，给定一个位置，枚举所有状态就足够了，这些状态包括当前位置的副本加上一个属于当前玩家的新棋子，依次放置在每个空方格上。对于像奥赛罗这样的游戏，你还必须检查每个位置以确保它遵循规则，并根据规则的后果更新最终位置（对于奥赛罗，翻转一堆棋子的颜色）。一般来说，从您跟踪的每个有效位置，您都会枚举一个新棋子的所有可能位置，并检查规则集允许哪些位置。
*   一般来说，你永远不会生成整棵树，因为游戏树的大小很容易超过地球的存储容量。您始终设置最大迭代深度。因此，终端节点只是处于最大深度的节点，或者是不存在合法移动的节点（对于井字游戏，每个方格都填满的棋盘）。您不会事先生成终端节点；它们是在游戏树构建过程中自然生成的。Tic-tac-toe 非常简单，您*可以*生成整个游戏树，但不要尝试使用您的 tic-tac-toe 代码，例如 Othello。

查看您的伪代码：

*   `max(a, b)`是返回`a`或中较大者的任何函数`b`。这通常由数学库或类似库提供。
*   这`depth`是您将搜索的最大深度。
*   您正在计算的启发式值是一些描述棋盘价值的数值。对于像井字游戏这样简单到可以枚举整个游戏树的游戏，您可以指定`1`为进行分析的玩家获胜`-1`的棋盘位置，为其他玩家获胜的棋盘位置，以及`0`任何不确定的立场。一般来说，您必须自己编写一个启发式方法，或者使用一个被广泛接受的方法。
*   您可以在分析期间根据其父节点动态生成节点。您的根节点始终是您进行分析的位置。

如果您还没有使用过图形或树，我建议您先这样做；特别是树原语对于这个问题是*必不可少的。*

* * *

作为对该线程中评论的回答，该评论询问了一个确定轮到给定节点的示例，我提供了这个伪 Python：

```
who_started_first = None

class TreeNode:
    def __init__(self, board_position = EMPTY_BOARD, depth = 0):
        self.board_position = board_position
        self.children = []
        self.depth = depth
    def construct_children(self, max_depth):
        # call this only ONCE per node!
        # even better, modify this so it can only ever be called once per node
        if max_depth > 0:

            ### Here's the code you're actually interested in.
            if who_started_first == COMPUTER:
                to_move = (COMPUTER if self.depth % 2 == 0 else HUMAN)
            elif who_started_first == HUMAN:
                to_move = (HUMAN if self.depth % 2 == 0 else COMPUTER)
            else:
                raise ValueError('who_started_first invalid!')

            for position in self.board_position.generate_all(to_move):
                # That just meant that we generated all the valid moves from the
                # currently stored position. Now we go through them, and...
                new_node = TreeNode(position, self.depth + 1)
                self.children.append(new_node)
                new_node.construct_children(max_depth - 1) 
```

每个节点都能够从“根”节点跟踪其绝对深度。当我们试图确定我们应该如何为下一步生成棋盘位置时，我们会根据我们的深度（ 的结果`self.depth % 2`）的奇偶性和我们对谁先走的记录来检查它是由谁走的。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-28T19:33:49.883

> 1）极小极大如何知道轮到谁了？指示正在生成轮到的玩家的最佳方式是什么？

你有这个`depth`论点。如果深度是偶数，则轮到一名玩家，如果深度为奇数，则轮到另一名玩家。

> 2）你如何产生可能的动作？

使用游戏规则。在井字游戏中，可能的移动意味着将一个人的标记放入一个空闲的单元格中。

> 3）你怎么知道你什么时候在终端节点，你如何生成终端节点？

终端节点是某人获胜的节点。您通过递归生成它们。每个递归调用都应该被赋予棋盘的当前状态。我猜那是你的伪代码中的`node`and`child`参数。因此，如果在那种情况下有人赢了，那就是终结，否则你尝试所有合法的动作并递归。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-28T19:44:37.227

我可以提供一些关于您正在寻找什么的想法，因为我为井字游戏编写了一个极小极大算法。

直接回答您的问题：

1.  我的极小极大算法没有确定这一点。它接受了一个参数，该参数决定了算法使用的是哪个玩家。

2.  知道玩家要移动，循环通过棋盘上的所有空白方格，并为每个方格生成一个节点，其中包含当前玩家在该方格中的令牌。从那里递归地进行。

3.  我使用了一个返回值的函数，该值指示游戏是否结束，以及是平局还是胜利。

我的基本算法是这样做的：

*   输入：要移动的玩家，以及棋盘的状态。
*   找出黑板上剩下的所有空格。
    *   使用玩家在该空间中的移动生成一个新棋盘。
    *   如果游戏结束，则生成一个包含游戏结果的节点。
    *   否则，运行算法，传入另一个玩家和新棋盘，并生成一个包含对手理想移动结果的节点。
*   确定哪个节点（移动）会导致最好的最坏情况。
*   输出：最好的棋步，以及从中得到的游戏结果信息。

# java - Java 的 Random 遵循什么分布？

> ID：11703849
> 
> 赞同：0
> 
> 时间：2012-07-28T19:07:44.097
> 
> 标签：java

Java 的[Random](http://docs.oracle.com/javase/1.4.2/docs/api/java/util/Random.html)遵循什么分布？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-28T19:09:33.590

[Random Javadoc](http://docs.oracle.com/javase/7/docs/api/java/util/Random.html)说它是一个均匀分布。如果你使用[`nextGaussian()`](http://docs.oracle.com/javase/7/docs/api/java/util/Random.html#nextGaussian%28%29)，你会得到一个[高斯分布](http://en.wikipedia.org/wiki/Normal_distribution)的双精度值。

# c++ - how to compare structs

> ID：11703853
> 
> 赞同：6
> 
> 时间：2012-07-28T19:08:38.267
> 
> 标签：c++

I am having difficulties to set up the comparison correctly. Here is an example of my problem, where my code wrongly assumes {1,2}={2,1}: [http://ideone.com/i7huL](http://ideone.com/i7huL)

```
#include <iostream>
#include <map>
using namespace std;

struct myStruct {
  int a;
  int b;
  bool operator<(const myStruct& rhs) const {
           return rhs.a < this->a && rhs.b < this->b;
  }
};

int main() {
       std::map  <myStruct, int> mymap ;
       myStruct m1={1,2};
       myStruct m2={2,1};
       mymap.insert(make_pair(m1,3));
       std::map<myStruct, int>::iterator it1 = mymap.find(m1);
       std::map<myStruct, int>::iterator it2 = mymap.find(m2);
       cout << it1->second << it2->second;
       // here it1->second=it2->second=3, although I would have expected it2 to be equal to map.end().
} 
```

I could use || instead of &&, but I'm not sure this is the correct way either. I just want to have operator< implemented in such a way that I am able to find objects in my map, without making any errors, as is the case in the code I linked to.

Thanks.

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-28T19:15:20.283

是的，这个操作符实现没有多大意义。我建议：

```
 bool operator<(const myStruct& rhs) const {
      return rhs.a < this->a || (rhs.a == this->a && rhs.b < this->b);
  } 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-07-28T19:18:03.673

```
bool operator<(const myStruct& rhs) const {
  if (a < rhs.a) return true;
  if (a == rhs.a) return b < rhs.b;
  return false;
} 
```

如果您正在寻找对许多数据成员的概括，那么有一个使用 C++11 [std::tie](http://en.cppreference.com/w/cpp/utility/tuple/tie)的好例子：

```
struct S {
    int n;
    std::string s;
    float d;
    bool operator<(const S& rhs) const {
        return std::tie(n, s, d) < std::tie(rhs.n, rhs.s, rhs.d);
    }
}; 
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-07-28T19:24:26.887

问题是您的运营商没有定义[严格的弱排序](http://en.wikipedia.org/wiki/Strict_weak_ordering)。仔细想想你的例子`{1,2}`和`{2,1}`你的运营商会怎样。假设`X = {1,2}`和`Y = {2,1}`。

X < Y？1 < 2*且*2 < 1？不，因此 X 不小于 Y。

Y < X？2 < 1*且*1 < 2？不，因此 Y 不小于 X。

那么，如果 X 不小于 Y，并且 Y 不小于 X，还剩下什么？他们是平等的。

您需要选择结构的成员之一，或者`a`作为`b`主要比较。如果主要比较结果相等，*那么*您才检查次要比较。就像你[按字母顺序排列](http://en.wikipedia.org/wiki/Lexicographical_order)某些东西一样。首先你检查第一个字母，只有当它们相等时，你才能继续下一个。Hans Passant 提供了一个例子。

对于您的操作员，这是一个更严重的问题示例。我上面给出的*不一定是*坏的，因为也许你*想* `{1,2}`被认为等于`{2,1}`。基本问题作物具有这样的一组值：考虑`X = {1,1}, Y = {1,2}, Z = {2,2}`

对于您的运算符，X 肯定小于 Z，因为 1 小于 2。但是 X 等于 Y，Y 等于 Z。为了遵守严格的弱排序，如果 X = Y，并且 Y = Z，那么 X 应该等于 Z。但这里不是这样。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-07-28T19:24:10.613

您询问了如何推广到四个 int 成员，这是我将如何构建此类代码以获得最大清晰度。

```
bool operator<(const myStruct& rhs) const
{
  if (a < rhs.a)
    return true;
  if (a > rhs.a)
    return false;
  if (b < rhs.b)
    return true;
  if (b > rhs.b)
    return false;
  if (c < rhs.c)
    return true;
  if (c > rhs.c)
    return false;
  if (d < rhs.d)
    return true;
  if (d > rhs.d)
    return false;
  return false;
} 
```

您可以轻松地为任意数量的数据成员扩展此类代码。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-07-29T17:40:22.217

我更喜欢通过比较元素的相等性来写这个，直到找到两个不同的元素：

```
bool operator<(const myStruct& rhs) const {
    if (a != rhs.a)
        return a < rhs.a;
    if (b != rhs.b)
        return b < rhs.b;
    return false; // this and rhs are equal.
} 
```

我发现这比用 || 混合编写单个表达式更清晰、更可扩展。和 && （根据@HansPassant），并且比@jahhaj 让每个通过测试导致 a `return true;`or的方法更紧凑`return false;`。性能大致相同，除非您对值的分布有所了解。有一个避免`operator==()`和只使用的论点`operator<()`，但这仅适用于您尝试编写最大程度的通用模板代码。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-07-28T19:33:06.470

最简单的解决方案用于`std::tie`比较元组。

```
return std::tie(rhs.a, rhs.b) < std::tie(a, b); 
```

这可以非常快速且简单地推广到更多数据成员。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-07-28T19:26:29.873

问题是你需要知道你的结构代表什么。否则定义 < 运算符将变得任意。其他人将无法给你一个合适的答案。举一个例子，当你的结构表示二维点的笛卡尔坐标时。在这种情况下，您可以定义一个有意义的排序运算符，例如结构与原点的距离。

即，距离 d1 = this->a*this->a + this->b*this->b 距离 d2 = rhs.a*rhs.a + rhs.b*rhs.b if(d1 < d2) 返回 true ; 否则返回假；

# php - PHP：弹出警报然后重定向页面

> ID：11703854
> 
> 赞同：6
> 
> 时间：2012-07-28T19:08:42.617
> 
> 标签：php, header, echo

我是 PHP 新手。

当有人上传的文件太大时，我想向他们显示一个警告弹出窗口并将他们重定向到前一页（反之亦然）。

```
if(file size is too big){    
   ob_start();   
   header("location:index.php");    
   echo "<script type='text/javascript'>alert('Your File Size is too big!');</script>";   
   ob_end_flush();   
   exit;    
} 
```

上面的代码只会将我重定向到 index.php 并且不会显示任何警告弹出窗口。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-07-28T19:10:31.097

做类似的事情

```
header("Location: index.php?Message=" . urlencode($Message)); 
```

然后在 index.php 上...

```
if (isset($_GET['Message'])) {
    print $_GET['Message'];
} 
```

换句话说，`index.php`将始终检查是否在 url 中传递了一条消息。如果有，请显示它。然后，只需在重定向中传递消息

如果您真的想使用模态弹出窗口，请生成 js ...

```
if (isset($_GET['Message'])) {
    print '<script type="text/javascript">alert("' . $_GET['Message'] . '");</script>';
} 
```

请注意，如果您在消息中使用引号，除非您对其进行转义，否则这将中断

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2016-08-17T19:55:17.387

```
<script type="text/javascript">
alert("YOUR MESSAGE HERE");
location="REDIRECTION_PAGE.php";
</script> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-28T19:12:13.747

问题在于`header("location:index.php");`将响应代码设置为`302`自动。浏览器立即重定向而不查看页面内容。

您需要在发送警报后在 javascript 中进行重定向，或者让您重定向的页面进行警报。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-07-28T19:49:13.873

代码如下：

```
if($_FILES['file']['size'] > 200000) //any file size, 200 kb in this case
{
 echo "<script type='javascript'>alert('File size larger than 200 KB')</script>";
}
header("Location: index.php"); 
```

`index.php`无论文件是否成功上传，浏览器都会被重定向到页面。只是如果文件较大，则会出现弹出窗口。

# javascript - 如何在 JQuery 数据选择器中显示小时数

> ID：11703860
> 
> 赞同：2
> 
> 时间：2012-07-28T19:09:56.850
> 
> 标签：javascript, css

我想使用简单的 JQuery 数据选择器，但不仅仅是选择日期。我想在日期格式中添加小时，但我也想保留日历的经典视图。我只想添加小时作为额外功能来精确定义时间。这可能吗？

```
 <script type="text/javascript">
                        //For calendar
                        $(".datepicker").datepicker({
                            inline: true,
                            showWeek: true,
                            firstDay: 1,
                            dateFormat: 'yyyy-mm-dd HH:MM:ss',
                        });                            
                    </script> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-28T19:14:55.707

jQuery UI 的 datepicker 选择日期，而不是时间。您可以为小时添加不同的字段，例如选择字段。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-28T19:15:35.680

[http://trentrichardson.com/examples/timepicker/](http://trentrichardson.com/examples/timepicker/)

你可以试试上面的插件和 datepicker 的组合

你甚至可以使用默认的`$('.datepicker').datetimepicker();`

# .net - 任务栏的窗口

> ID：11703872
> 
> 赞同：1
> 
> 时间：2012-07-28T19:11:41.570
> 
> 标签：.net, wpf, xaml, window

我的 WPF 窗口有问题。我将它设置`TopMost="True"`为永远在顶部。问题是，当我单击另一个窗口（例如 Firefox）时，我的窗口仍然在顶部，但在任务栏（开始栏）的后面，所以任务栏在顶部，然后是我的窗口，然后是 Firefox 窗口。我使用 Windows 7。

**问题：我必须在我的代码中更改什么以设置我的窗口反对任务栏？**

XAML 代码：

```
<Window x:Class="WpfApplication1.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        Title="Pixeli morti" Height="350" Width="525" WindowStyle="None" WindowStartupLocation="CenterScreen" WindowState="Maximized" ResizeMode="NoResize" Background="#00000000" Topmost="True" AllowsTransparency="True">
    <Grid>
        <Canvas Name="canvas1" />
    </Grid>
</Window> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-30T12:31:39.283

这对我有用，无论您切换到哪个窗口，它都会始终保持在任务栏的顶部和上方。我使用了 SetWindowPos 方法，通过 p/invoke 包含它。

为了完成这项工作，我们需要一些枚举和标志，请注意您可能不需要所有标志，但拥有一个包含所有最常用的 pinvoke 方法的库总是一个好主意。

```
public enum SetWindowPosFlags : uint
{
    SWP_ASYNCWINDOWPOS = 0x4000,
    SWP_DEFERERASE = 0x2000,
    SWP_DRAWFRAME = 0x0020,
    SWP_FRAMECHANGED = 0x0020,
    SWP_HIDEWINDOW = 0x0080,
    SWP_NOACTIVATE = 0x0010,
    SWP_NOCOPYBITS = 0x0100,
    SWP_NOMOVE = 0x0002,
    SWP_NOOWNERZORDER = 0x0200,
    SWP_NOREDRAW = 0x0008,
    SWP_NOREPOSITION = 0x0200,
    SWP_NOSENDCHANGING = 0x0400,
    SWP_NOSIZE = 0x0001,
    SWP_NOZORDER = 0x0004,
    SWP_SHOWWINDOW = 0x0040,
}
public static class HWND
{
   public static IntPtr
   NoTopMost = new IntPtr(-2),
   TopMost = new IntPtr(-1),
   Top = new IntPtr(0),
   Bottom = new IntPtr(1);
} 
```

你也需要实际的方法，例如将它放在像 WinApi 这样的静态帮助器类中是个好主意

```
[DllImport("user32.dll")]
[return: MarshalAs(UnmanagedType.Bool)]
static extern bool SetWindowPos(IntPtr hWnd, IntPtr hWndInsertAfter, int X, int Y, int cx, int cy, SetWindowPosFlags uFlags); 
```

最后在窗口代码中，我使用必要的参数调用了该方法：

```
public Window1()
{
    InitializeComponent();
    this.SourceInitialized += (sender, args) =>
    {
        var wih = new WindowInteropHelper(this);
        WinApi.SetWindowPos(wih.Handle, HWND.TopMost, 0, 0, 0, 0, SetWindowPosFlags.SWP_NOMOVE | SetWindowPosFlags.SWP_NOSIZE);
    };
} 
```

如果您的窗口被调整大小、最小化或最大化，您可能需要再次调用该方法。事实上，如果它再次被激活。您还应该检查它在模态对话框中的行为。

# mysql - MySQL 5.5 基于 IF 语句的查询

> ID：11703873
> 
> 赞同：1
> 
> 时间：2012-07-28T19:11:42.117
> 
> 标签：mysql, if-statement, phpmyadmin, procedure, case-statement

纠结这个问题太久了，特来求救。。。

我有一个 MySQL 存储过程，我想执行以下操作：

给定记录的“id”和“用户名”

1.  如果表中不存在 id 则创建记录
2.  否则，如果 id 存在且用户名与存在的不同，则更新记录
3.  否则什么都不做

我尝试了以下方法：

```
BEGIN

DECLARE doCreate INT;
DECLARE doUpdate INT;
SELECT COUNT(*) INTO doCreate FROM app_user WHERE id=1;
IF (doCreate > 0) THEN 
   SELECT COUNT(*) INTO doUpdate FROM app_user WHERE id=1 AND username='other';
END IF

IF(doCreate = 0) THEN ---SYNTAX ERROR ON THIS LINE---
   SELECT 'CREATE';
ELSE IF(doUpdate = 0) THEN
   SELECT 'UPDATE';
ELSE
   SELECT 'NOTHING';
END IF

END 
```

我也尝试用 case 语句替换 if-elseif-else 块，但得到相同的结果......

```
CASE ---ERROR ON THIS LINE---
   WHEN doCreate = 0 THEN 
      SELECT 'CREATE';
   WHEN doUpdate = 0 THEN
      SELECT 'UPDATE';
   ELSE
      SELECT 'NOTHING';
END 
```

*   我似乎对第一个 END IF 之后的任何内容都有语法错误，所以这是发生的第一个问题......

任何帮助将不胜感激 - 我相信有更好的方法来做到这一点。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-28T19:17:23.897

我相信您需要用 s 来终止`END IF`s `;`，并且在内部`ELSEIF`应该是一个词。否则，`END IF`需要另一个，但找不到。

```
IF (doCreate > 0) THEN 
   SELECT COUNT(*) INTO doUpdate FROM app_user WHERE id=1 AND username='other';
END IF; /* terminate with ; */

IF(doCreate = 0) THEN 
   SELECT 'CREATE';
ELSEIF(doUpdate = 0) THEN
   SELECT 'UPDATE';
ELSE
   SELECT 'NOTHING';
END IF; /* terminate with ; */ 
```

查看[MySQL`IF/ELSE`语法参考](http://dev.mysql.com/doc/refman/5.5/en/if-statement.html)以获取各种使用示例。

# linux - Can i merge icon with executable application in linux?

> ID：11703877
> 
> 赞同：0
> 
> 时间：2012-07-28T19:12:39.683
> 
> 标签：linux, executable

if you made up an application in linux you will get a blank ugly icon but if i wanted to add an icon without going and make a desktop entry , is it possible ? if i uploaded my portable app to the internet i would like that users see the icon merged to my portable app ! :) Thanks

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-28T21:16:05.457

Linux 上的大多数桌面环境都遵循[freedesktop.org 桌面条目规范](http://www.freedesktop.org/wiki/Specifications/desktop-entry-spec)的应用程序描述和图标。您需要在其中一个[XDG 目录](http://freedesktop.org/wiki/Specifications/basedir-spec)中（特别是在其中一个目录中）有一个单独`.desktop`的文件，该文件将列出一个[图标](http://freedesktop.org/wiki/Specifications/icon-theme-spec)（这是另一个目录中的图像文件）。`applications``$XDG_DATA_DIRS`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-28T20:19:42.777

对于脚本可能不是，但对于在 Gnome (nautilus) 下看到的 ELF 二进制文件，您可以尝试 [elfres](http://www.compholio.com/elfres/) [http://www.compholio.com/elfres/](http://www.compholio.com/elfres/)

# asp.net - 更改 mysql 数据库的字符集和排序规则

> ID：11703878
> 
> 赞同：0
> 
> 时间：2012-07-28T19:12:48.933
> 
> 标签：asp.net, mysql, character, collation

如何配置 MySQL 数据库和 asp.net 项目，使默认字符集为 utf8，排序规则为 utf8_general_ci？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-28T19:33:18.750

您可以如下所示设置 mysql 数据库，或在此链接[http://dev.mysql.com/doc/refman/5.0/en/charset-applications.html上查看更多其他设置](http://dev.mysql.com/doc/refman/5.0/en/charset-applications.html)

```
CREATE DATABASE mydb
  DEFAULT CHARACTER SET utf8
  DEFAULT COLLATE utf8_general_ci; 
```

在 ASP.NET 中，您可以通过连接字符串将字符集设置为 UTF8

这边走

```
"Server=DB_SERVER_NAME;Database=DBNAME;Uid=YOUR_ID;Pwd=YOUR_PASSWORD;Charset=utf8;" 
```

# search - Lucene Search Manager

> ID：11703879
> 
> 赞同：1
> 
> 时间：2012-07-28T19:12:49.387
> 
> 标签：search, lucene

I'm designing a new search based web application in lucene. I've to share and re-open the IndexSearcher across multiple Threads. I've read about the SearcherManager in the api document. I'm not able to understand the uses of it. How should I share the SearcherManager across MultipleThreads.

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-29T12:25:43.507

请参阅[此处](http://blog.mikemccandless.com/2011/09/lucenes-searchermanager-simplifies.html)以获取包含来自 Lucene 提交者之一的代码示例的文章

# mysql - SELECT 语句 - 添加另一个派生字段

> ID：11703885
> 
> 赞同：0
> 
> 时间：2012-07-28T19:13:33.337
> 
> 标签：mysql, sql

我有一个有 3 列的表。`Name`, `DateOfBirth`, `DateDeceded`. 字段`DateOfBirth`和`DateDeceded`具有数据类型`DATE`。

现在当我做一个`Select * from TableName`. 我想显示姓名、出生日期、过世日期和该人居住的年数（`DateDeceded`- `DateOfBirth`）。

如何编写 SQL Select 语句以包含该`NumberOfYearsLived`字段？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-28T19:18:39.960

尝试：

```
SELECT Name,
       DateOfBirth,
       DateDeceded,
       YEAR(DateDeceded) - YEAR(DateOfBirth) AS NumberOfYearsLived
  FROM TableName 
```

编辑：你可能想试试这个。可能更准确。

```
SELECT Name,
       DateOfBirth,
       DateDeceded,
       TIMESTAMPDIFF(YEAR, DateDeceded, DateofBirth) AS NumberOfYearsLived
  FROM TableName 
```

[http://dev.mysql.com/doc/refman/5.5/en/date-and-time-functions.html#function_timestampdiff](http://dev.mysql.com/doc/refman/5.5/en/date-and-time-functions.html#function_timestampdiff)

# c - 通过交换函数进行字符串交换

> ID：11703887
> 
> 赞同：1
> 
> 时间：2012-07-28T19:13:35.977
> 
> 标签：c, string, pointers

我已经编写了交换字符串的代码，但我无法交换。问题是什么，如何通过使用函数来解决它`swap`？

```
#include <stdio.h>

void swap( char*,char*);
int main()
{
    char *ptr[2] = {"hello", "morning"};
    swap(ptr[0], ptr[1]);
    printf("%s %s", ptr[0], ptr[1]);
    return 0;
}

void swap(char *t1, char*t2)
{
    char *t;
    t = t1;

    t1 = t2;
    t2 = t;
} 
```

我也尝试过`(&ptr[0], &ptr[1])`，但这里显示的是[`segmentation fault`](http://en.wikipedia.org/wiki/Segmentation_fault). 我也做了一个 char, `*p1 = ptr[0], char *p1 = ptr[1]`, 然后传递`&p1`, 和`&p2`to `swap`，但我仍然遇到分段错误。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-07-28T19:16:02.197

C 函数参数是按值传递的。您将地址的值传递给您的`swap`函数，并期望这些值（地址）发生变化。但只有函数中地址的*副本*`swap`会发生变化。

要更改实际传入的地址，您需要额外的参考级别：

```
void swap(char **t1, char **t2)
{
    char *t;

    t = *t1;
    *t1= *t2;
    *t2 = t;
} 
```

并这样称呼它`swap`：`swap(&ptr[0], &ptr[1]);`

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-07-28T19:15:59.743

您需要传入指向 char 数组指针的指针才能切换它们。通过这样做，您可以交换这些指针的值。（哪些是实际的数组。）

```
#include<stdio.h>
void swap( char**,char**);
int main()
{
        char *ptr[2] = {"hello","mornig"};
        swap(&ptr[0], &ptr[1]);
        printf("%s %s",ptr[0], ptr[1]);
        return 0;
}

void swap( char **t1,char **t2)
{
        char *t;
        t = *t1;

        *t1 = *t2;
        *t2 =t;
} 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-07-28T19:15:30.803

您需要将指针传递给您的字符串以交换它们（char**）。否则，您所做的更改将是本地交换功能。

```
void swap( char **t1,char **t2)
{
        char *t;
        t = *t1;

        *t1 = *t2;
        *t2 =t;
}

int main()
{
        char *ptr[2] = {"hello","mornig"};
        swap(&ptr[0], &ptr[1]);
        printf("%s %s",ptr[0],ptr[1]);
        return 0;
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-29T06:59:05.387

`char *ptr[2] = {"hello","mornig"};`- 该语句意味着您正在分配一个大小为 2 的数组，该数组将存储两个字符串的地址（即`char *`）。现在，您提供的两个字符串将在`text segment`其中是只读数据。如果我们试图修改它，这将导致崩溃（sgmentation fault）。

所以如果你打电话`swap(&ptr[0], &ptr[1])`会导致崩溃。因为您试图`m`在第一个只读字符串中写入字符`h`。无法写入 中的字符串`text segment`。

如果你想简单地交换一个字符串，你可以调用函数 as `swap(&ptr[0], &ptr[1])`，相当于`swap((ptr + 0),(ptr + 1));`.

并更改交换功能如下

```
void swap( char **t1,char **t2)
{
        char *t;

        t = *t1;
        *t1 = *t2;
        *t2 =t;
} 
```

这里我们只是交换存储在数组指针中的字符串的地址`ptr`。

# php - How can I use custom forms fields like table for symfony form

> ID：11703891
> 
> 赞同：0
> 
> 时间：2012-07-28T19:13:47.433
> 
> 标签：php, symfony, doctrine-orm

In Symfony docs they say to use this

```
<div>
    {{ form_label(form.task) }}
    {{ form_errors(form.task) }}
    {{ form_widget(form.task) }}
</div> 
```

But this generates the label element.

But I want to have table `<td>` instead of `<label>`

And also for the input `textbox`, I want to mention the size of text box. Where can I do that?

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-28T19:19:40.460

您必须定义您的[表单主题](http://symfony.com/doc/current/cookbook/form/form_customization.html)。

可能，[本教程](http://symfony.com/doc/current/book/forms.html#form-theming)就是您正在寻找的

# shell - Bash script to recursively traverse directories, compare and sync files

> ID：11703894
> 
> 赞同：0
> 
> 时间：2012-07-28T19:14:08.290
> 
> 标签：shell

I'm trying to write a bash shell script to sync content on two different paths.

The algorithm I'm striving for consists of the following steps

1.  given two full (as opposed to relative) paths
2.  recursively compare files (whose filename optionally may have basename and suffix) in corresponding directories of both paths
3.  if either corresponding directories or files are not present, then copy each file (from the path with the folder) to the other corresponding folder.

I've figured out steps 1 and 2 which are

```
OLD_IFS=$IFS
# The extra space after is crucial
IFS=\

for old_file in `diff -rq old/ new/ | grep "^Files.*differ$" | sed 's/^Files \(.*\) and .* differ$/\1/'`
do
   mv $old_file $old_file.old
done
IFS=$OLD_IFS 
```

Thanks.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-28T19:48:57.247

我在 Java 中实现了一个类似的算法，基本上可以归结为：

1.  检索目录 A 和 B 的列表，例如`A.lst`和`B.lst`

2.  创建两个列表的[*交集*](http://en.wikipedia.org/wiki/Intersection_%28set_theory%29)（例如`cat A.lst B.lst | sort | uniq -d`）。这是您需要实际比较的文件列表；您还必须递归地下降到任何目录。

    你可能想看看你的shell（例如for [`bash`](http://www.gnu.org/software/bash/manual/html_node/Bash-Conditional-Expressions.html#Bash-Conditional-Expressions)）或[`test`](http://linux.die.net/man/1/test)命令支持的条件表达式。我还建议使用`cmp`而不是`diff`.

    注意：当您在一侧有一个目录而在另一侧有一个同名文件时，您需要考虑正确的操作应该是什么。

3.  找到仅存在于 A 中的文件（例如`cat A.lst B.lst B.lst | sort | uniq -u`）并将它们递归地复制（`cp -a`）到 B 中。

4.  同样，找到只存在于 B 中的文件，并将它们递归地复制到 A。

**编辑：**

我忘了提到一个重要的优化：如果你事先`sort`列出了文件列表`A.lst`，你可以使用而不是执行设置操作：`B.lst`[`comm`](http://linux.die.net/man/1/comm)`cat ... | sort | uniq ...`

*   路口：`comm -12 A.sorted.lst B.sorted.lst`

*   仅存在于 A 中的文件：`comm -23 A.sorted.lst B.sorted.lst`

*   仅存在于 B 中的文件：`comm -13 A.sorted.lst B.sorted.lst`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-10-30T12:39:06.047

有一个现成的解决方案（shell 脚本），基于**find**（也使用与您相同的想法），用于同步两个目录：[https://github.com/Fitus/Zaloha.sh](https://github.com/Fitus/Zaloha.sh)。

文档在这里：[https](https://github.com/Fitus/Zaloha.sh/blob/master/DOCUMENTATION.md) ://github.com/Fitus/Zaloha.sh/blob/master/DOCUMENTATION.md 。

干杯

# three.js - Three.JS UTF8 Loader

> ID：11703896
> 
> 赞同：2
> 
> 时间：2012-07-28T19:14:27.353
> 
> 标签：three.js

I'm attempting to display a 3D model in Three.JS that has been converted to UTF8 format using Won's WebGL Loader ( [http://code.google.com/p/webgl-loader/](http://code.google.com/p/webgl-loader/) ). I don't know how to convert the metadata outputted from WebGL Loader into what Three.JS expects, and a Google Search and read through the source hasn't shed any insight. The output of WebGLLoader and input requirements for Three.JS listed below.

WebGL Loader Output:

```
MODELS['abc_normals.obj'] = {
  materials: {
  },
  decodeParams: {
    decodeOffsets: [-8192,-88,-2278,0,0,-511,-511,-511],
    decodeScales: [0.012115,0.012115,0.012115,0.000978,0.000978,0.001957,0.001957,0.001957],
  },
  urls: {
    'abc_normals.utf8': [
      { material: '',
        attribRange: [0, 8288],
        indexRange: [66304, 14914],
        bboxes: 111046,
        names: ['default', ],
        lengths: [44742, ],
      },
    ],
  }
}; 
```

Three.JS requirements:

```
{ scale: 0.815141, offsetX: -0.371823, offsetY: -0.011920, offsetZ: -0.416061 } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-29T15:19:04.927

您是否像 webgl-loader 的首页推荐的那样使用 r50？我认为之后的输出与 three.js 加载器不兼容。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-02-28T01:00:25.983

您列出的输出是一个 javascript 数据结构，但 THREE.js 需要 JSON。为了使这个有效的 json 它需要是这样的：

```
{
  "materials": {
  },
  "decodeParams": {
    "decodeOffsets": [-8192,-88,-2278,0,0,-511,-511,-511],
    "decodeScales": [0.012115,0.012115,0.012115,0.000978,0.000978,0.001957,0.001957,0.001957],
  },
  "urls": {
    "abc_normals.utf8": [
      { "material": "",
    "attribRange": [0, 8288],
    "indexRange": [66304, 14914],
    "bboxes": 111046,
    "names": ["default", ],
    "lengths": [44742, ],
      },
    ],
  }
}; 
```

自动转换可以通过加载 JS 然后将模型保存为 JSON。您可以在 Chrome 或 Firef 中尝试此操作

```
MODELS={}
(insert your .js here)
JSON.stringify(MODELS) 
```

# ruby-on-rails-3 - 当 Capistrano 尝试运行资产时收到有关缺少 multi_json-1.3.6 的消息：预编译

> ID：11703898
> 
> 赞同：0
> 
> 时间：2012-07-28T19:14:42.333
> 
> 标签：ruby-on-rails-3, asset-pipeline

我正在使用带有 Rails 3.2.1 的 Capistrano。当我这样做时`cap deploy`，我收到此错误：

```
Could not find multi_json-1.3.6 in any of the sources 
```

以下是导致此错误的一些相关输出：

```
 * executing `deploy:assets:precompile'
  * executing "cd /home/jason/dittypad-cap/releases/20120728190221 && bundle exec rake RAILS_ENV=production RAILS_GROUPS=assets assets:precompile"
    servers: ["sniphq.com"]
    [sniphq.com] executing command
 ** [out :: sniphq.com] Could not find multi_json-1.3.6 in any of the sources 
```

不过，我确实有这个宝石：

```
$ bundle list | grep multi_json
  * multi_json (1.3.6) 
```

我很想知道如果我`assets:precompile`直接在生产环境中运行会发生什么。我第一次尝试它，它工作。但是现在当我尝试它时，我得到了这个：

```
$ bundle exec rake RAILS_ENV=production RAILS_GROUPS=assets assets:precompile
/home/jason/.rvm/gems/ruby-1.9.2-p290/gems/bundler-1.0.22/lib/bundler/rubygems_integration.rb:143:in `block in replace_gem': rake is not part of the bundle. Add it to Gemfile. (Gem::LoadError)
    from /home/jason/dittypad-cap/shared/bundle/ruby/1.9.1/bin/rake:18:in `<main>' 
```

`multi_json`为什么即使我拥有它，它也会抱怨失踪？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-28T19:50:14.467

我通过将捆绑程序版本更新到 1.0.18 来解决这个问题。

我在这里得到了答案：[Rails 3.1 上的 Capistrano 部署/资产失败](https://stackoverflow.com/questions/7577731/capistrano-deploy-assets-on-rails-3-1-fails)

# sed - sed - 注释匹配的行和后面的 x 行

> ID：11703900
> 
> 赞同：14
> 
> 时间：2012-07-28T19:14:59.553
> 
> 标签：sed, text-manipulation

我需要帮助来使用 sed 来注释匹配的行和它后面的 4 行。在一个文本文件中。

我的文本文件是这样的：

```
[myprocess-a]
property1=1
property2=2
property3=3
property4=4

[anotherprocess-b]
property1=gffgg
property3=gjdl
property2=red
property4=djfjf

[myprocess-b]
property1=1
property4=4
property2=2
property3=3 
```

我想在所有具有文本“[myprocess”的行和预期输出后面的 4 行前加上 # 前缀：

```
#[myprocess-a]
#property1=1
#property2=2
#property3=3
#property4=4

[anotherprocess-b]
property1=gffgg
property3=gjdl
property2=red
property4=djfjf

#[myprocess-b]
#property1=1
#property4=4
#property2=2
#property3=3 
```

非常感谢您对此的帮助。

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2012-07-28T19:32:04.400

您可以通过将正则表达式应用于一组行来做到这一点：

```
sed -e '/myprocess/,+4 s/^/#/' 
```

这将匹配带有 'myprocess' 的行以及它们之后的 4 行。对于这 4 行，它会在行首插入一个“#”。

（我认为这可能是一个 GNU 扩展——它不在我所知道的任何“sed one liner”备忘单中）

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-28T19:37:14.543

```
sed '/\[myprocess/ { N;N;N;N; s/^/#/gm }' input_file 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-28T22:17:55.047

在. *_* _ [http://www.gnu.org/software/gawk/manual/html_node/Concatenation.html](http://www.gnu.org/software/gawk/manual/html_node/Concatenation.html)`awk`

```
awk '/myprocess/{f=1} f>5{f=0} f{f++; $0="#" $0} 1'  foo.txt 
```

或者如果块总是以空行结束

```
awk '/myprocess/{f=1} !NF{f=0} f{$0="#" $0} 1'  foo.txt 
```

# java - 将一个变量用作另一个数据类型不同但名称相同的变量

> ID：11703901
> 
> 赞同：0
> 
> 时间：2012-07-28T19:14:59.660
> 
> 标签：java, design-patterns, reflection, data-structures

我正在使用一个类，我将输入作为文件名和文件位置。我有一个预定义的文件名，所以我会将预定义的文件名与我收到的文件名匹配，然后相应地存储值。请看下面的代码

```
//Set of storage maps and tables 
public class storage
{
//Storage set
public static Set<Integer> tiger = new HashSet<Integer>();

//Storage set
public static Set<Integer> lion = new HashSet<Integer>();

//This is the table used for storing the browser customer count  
public static Table<String,String,Integer> elephant = HashBasedTable.create(); 

//Storage map 
public static Map<String, String> monkey = new HashMap<String, String>();

public static void storeDataDirector(String fileLocation,String fileName) throws     Exception 
{
    if (fileName = monkey) 
                **update the "monkey map"**

} 
```

这是我的问题，我还有很多地图和表格要使用，所以我不能使用多个 if 条件然后检查和更新它们。

我想知道的是以下

正如我之前所说，我发送给程序的文件名“字符串文件名”与“地图猴子”的名称相同，但前者是字符串，后者是地图。**我想知道是否可以使用字符串变量作为对地图实例的引用，因为它们都具有相同的名称**。这将高度避免我在程序中使用的 if 条件，因此我想为此提供可能的解决方案......与类型大小写 ort 相关的任何内容

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-28T19:29:27.437

你需要有另一个`Map`- 其键是 a`String`和值是 a `Map`。就像是`Map<String,Map> allMaps = new HashMap<String,Map>()`

一旦你有了这张地图，用你所有的文件名和相应的地图填充它`monkey`。

`allMaps .put("monkey", monkey)`

如果字符串文件名对应的不是 a`map`而是 a `set`，那么您需要声明一些更通用的内容`Map<String,Object> allMaps = new HashMap<String,Object>()`。当然，这意味着您需要先将值转换为特定类型，然后才能对它做任何有意义的事情。

然后，要使用此映射，请使用您的文件名参数

`Map monkeyAgain = allMaps.get(filename)`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-28T19:29:49.927

您可以使用反射：

```
Storage.class.getField(fileName).get(null) 
```

您仍然必须转换返回的对象。我不认为这是正确的做法。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-28T19:23:38.283

这个想法是将它们关联到一个 Map 中，并使用文件名作为键，例如

```
Map<String, Map<String, String>>
//  file    store structure 
```

如果您需要一个通用的解决方案，您可以通过实现商店结构的抽象来解决这个问题，方法是实现类似于此的接口：

```
// T is the store type and U is the original type (String from file for instance...)
public interface StoreUnit<T, U> {

    void update(U record);

    List<T> list();

} 
```

因此您将为每种情况（Set，Map，Table ...）提供一个实现，并将使用文件名作为键将其关联到一个映射中。

```
monkeyFileName => MapStoreUnit<Entry<String,String>,String>
tigerFileName => SetStoreUnit<Integer, String>
elephantFileName => TableStoreUnit<Entry<Entry<String,String>,String>,String> // not sure if for Table there is something better than Entry ;) 
```

当您想更新某个商店时，您可以`get`使用文件名作为键在地图上执行 a ，并调用`update`使用记录实现的方法（可能是`String`, complex `Object`）等等。当您需要从那里读取某些内容时，您可以使用该`list`方法。

# php - 当前菜单项 - foreach

> ID：11703903
> 
> 赞同：0
> 
> 时间：2012-07-28T19:15:26.807
> 
> 标签：php

考虑一下：

```
 $menuItems = array (
        "page1" => "1.php",
        "page2" => "2.php",
        "page3" => "3.php",
        "page4" => "4.php",
        "page5" => "5.php",
     ); 
```

现在我创建这样的菜单：

```
 <ul class="menu">
        <?php 
           foreach($menuItems as $name => $url) {
           echo "<li><a href='$url' class='$class'>$name</a></li>";
           } 
        ?>
    </ul> 
```

效果很好。但现在我需要在当前页面上添加一个 .current 类。

要获取当前页面，我这样做：

```
 <?php 
         function curPageName() {
            return substr($_SERVER["SCRIPT_NAME"],strrpos($_SERVER["SCRIPT_NAME"],"/")+1);
         }
         $curpage = curPageName();
      ?> 
```

它也很好用。

所以我想问题是如何将 $curpage 分配给...当前页面？:)

谢谢你。亚历克斯

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-28T19:17:31.207

很简单，在你的循环中，检查 if`$url == $curpage`并适当地追加。

例子：

```
<?php

    $menuItems    = array(
        "page1" => "1.php",
        "page2" => "2.php",
        "page3" => "3.php",
        "page4" => "4.php",
        "page5" => "5.php",
    );
    $current_item = "2.php"; //Assume we got this from the function
?>
<ul class="menu">
    <?php
    foreach ($menuItems as $name => $url) {
        echo "<li><a href='$url'";
        if ($url == $current_item) {
            echo " class='current'";
        }
        echo ">$name</a></li>\n";
    }
    ?>
</ul> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-28T19:28:51.670

```
 <ul class="menu">
    <?php 
       foreach($menuItems as $name => $url) {

       if ($url === $curpage){
          $class.=' .current';
       }

       echo "<li><a href='$url' class='$class'>$name</a></li>";

       } 
    ?>
    </ul> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-28T19:32:31.073

```
<ul class="menu">
    <?php 
       foreach($menuItems as $name => $url) {
       $class = 'default';
       if (curPageName() == $name) {
          $class.='.current';
       } 
       echo "<li><a href='$url' class='$class'>$name</a></li>";
       } 
    ?>
</ul> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-28T19:43:49.583

所以我在你的帮助下成功了！多谢你们。特别感谢 Adel - 虽然你有一个错误，但我修复它是这样的：

```
 foreach($menuItems as $name => $url) {
          $class = 'default';
          if (curPageName() == $url) {
             $class.=' \. current';
          } 
         echo "<li><a href='$url' class='$class'>$name</a></li>";
         } 
```

惊人的！再次感谢！

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-28T20:19:00.510

```
<?php
  $menuItems = array(
               'page1' => '1.php',
               'page2' => '2.php',
               'page3' => '3.php',
               'page4' => '4.php',
               'page5' => '5.php',
  );
  $current_page = curPageName();
?>
<ul class="menu">
  <?php
    foreach ($menuItems as $name => $url) {
  ?>
    <li><a href="<?php=$url?>"
    <?php 
      if ($url == $current_page) {
    ?>
    class="current"
    <?php 
      } 
    ?>
    ><?php=$name?></a></li>
  <?php 
    }
  ?>
</ul> 
```

为什么每次迭代都使用curPageName()？

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-07-28T20:48:48.477

您可以使用三元语法来解决您的问题。它包含在以下语法中：

```
(if condition ? true : false) 
```

因此，我们可以在您的答案中使用这种方式`curPageName`与`url`foreach 循环内部进行比较。

```
$url == curPageName() ? 'current' : 'notCurrent' 
```

现在你只需要使用它对你有利。

**我喜欢printf**的语法。所以代码更干净。尝试这个：

```
<?php
/**
 * curPageName()  is defined in question
 * my_links() is a shortcut to array defined in question
 */
$template = "<li%s><a href="%s">%s</a></li>";
$links    = my_links();
$current  = curPageName();
print '<ul class="menu">';
foreach ($likns as $name => $url) {
  $class = $current == $url ? ' class="current"' : '';
  printf($template, $class, $url, $name);
}
print '</ul>'; 
```

中的每个`%s`项目`$template`都将通过顺序变量进行更改。因此，如果您需要更改模板，代码是干净且最容易进行维护的。

或者，如果您想要另一种最简单的模板方式，请使用 php 模板语法。注意`:`foreach 语句后的使用和`endforeach`. 您可以看到我使用的 echo 短代码`<?=$var?>`比`<?php echo $var ?>`.

```
<?php
/**
 * curPageName()  is defined in question
 * my_links() is a shortcut to array defined in question
 */
$links   = my_links();
$current = curPageName();
?>
<ul class="menu">
  <?php foreach ($links as $name => $url): ?>
    <li<?=($current == $url ? ' class="current"' : '')?>>
        <a href="<?=$url?>"><?=$name?></a>
    </li>
  <?php endforeach ?>
</ul> 
```

# bash - 两个 bash 别名，相同的功能

> ID：11703905
> 
> 赞同：1
> 
> 时间：2012-07-28T19:15:34.813
> 
> 标签：bash

我有一个非常简单的功能

```
function filefinder
{
  FILE=$1; test -f $FILE || FILE=`find . -name $FILE`; /usr/bin/geany $FILE
}
alias geany=filefinder 
```

但我希望其他编辑器使用相同的功能。我怎样才能做到这一点？说，我想补充`alias nano=filefinder`。显然我不想硬连线geany或nano。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-28T20:01:44.087

怎么样：

```
function filefinder
    {
        FILE=$2; ED=$1; test -f $FILE || FILE=`find . -name $FILE`; /usr/bin/$ED $FILE;
    }
    alias geany="filefinder geany"
    alias gedit="filefinder gedit"
    alias nano="filefinder nano"
```

我假设您的发行版将所有 exec 保存在 /usr/bin

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-29T20:45:47.900

执行此类操作的常用方法是使用通常用于保存用户首选编辑器名称的变量。

```
function filefinder {
  editor=${VISUAL:-$EDITOR}; editor=${editor:-emacs}; FILE=$1; test -f "$FILE" || FILE=$(find . -name "$FILE"); "$editor" "$FILE"
} 
```

这遵循 Bash 在您使用该`readline`函数时所做的事情`edit-and-execute-command`。

如果`$VISUAL`设置使用它，如果不使用`$EDITOR`。它没有设置，`emacs`用作后备（当然，如果你愿意，你可以使用其他东西）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-28T19:36:02.250

环境变量怎么样？：

```
function filefinder
{
  if [ -z "$MY_EDITOR" ];then 
    echo "MY_EDITOR is not set";
  else  
    FILE=$1; test -f $FILE || FILE=`find . -name $FILE`; $MY_EDITOR $FILE
  fi
}

alias myedit=filefinder 
```

# objective-c - CFURLRef 需要桥接转换错误

> ID：11703923
> 
> 赞同：5
> 
> 时间：2012-07-28T19:17:47.670
> 
> 标签：objective-c, ios, url, audio

我正在尝试播放声音，但是当我编码时：

```
AudioServicesCreateSystemSoundID ((CFURLRef) alertSound, &soundFileObject); 
```

它引发以下错误：

**将 Objective-C 指针类型“NSURL *”转换为 C 指针类型“CFURLRef”（又名“const struct __CFURL *”）需要桥接转换错误**

我已经尝试了以下两种建议的解决方案：

```
AudioServicesCreateSystemSoundID ((__bridge CFURLRef) alertSound, &soundFileObject); 
```

或者

```
AudioServicesCreateSystemSoundID ((CFURLRef) CFBridgingRetain(alertSound), &soundFileObject); 
```

但我仍然无法播放声音。

我想问题是：桥接错误是声音没有播放的原因，还是我应该在其他地方寻找？

我可以使用 SysSound 示例代码播放声音，并且我使用的是 iOS 6 和 Xcode 4.5。

感谢您的任何指点:)

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-07-28T19:50:40.457

演员阵容可能不是声音没有播放的原因：

```
AudioServicesCreateSystemSoundID ((__bridge CFURLRef) alertSound, &soundFileObject); 
```

很好。

您的错误很可能出现在您没有向我们展示的代码中。一个常见问题是 URL 创建错误或文件格式无效。

修改您的代码如下：

```
OSStatus status = AudioServicesCreateSystemSoundID((__bridge CFURLRef)alertSound, &soundFileObject);
NSLog(@"AudioServicesCreateSystemSoundID status = %ld", status); 
```

并检查你得到什么状态码；`parmErr`(-50) 比较常见，通常意味着您的 URL 为零。

哦，还有一个想法，你没有显示你实际在哪里播放声音。你知道这`AudioServicesCreateSystemSoundID`实际上并没有播放声音。您需要致电：

```
AudioServicesPlaySystemSound(soundFileObject); 
```

抱歉，如果您已经知道了！

# iphone - 集成iOS6 facebook功能

> ID：11703924
> 
> 赞同：4
> 
> 时间：2012-07-28T19:17:51.913
> 
> 标签：iphone, xcode, ipad, ios6

我正在尝试使用 iOS6 Facebook 功能将屏幕截图从我的应用程序导出到 Facebook。按下按钮时如何显示应用程序内的选项？

以下是我当前的代码。我想截取屏幕截图，同时使用 iOS6 Facebook 功能导出到 Facebook。

```
- (IBAction)export1:(id)sender{

NSIndexPath *indexPath = [NSIndexPath indexPathForRow:0 inSection:0];
[self.tableView scrollToRowAtIndexPath:indexPath
                      atScrollPosition:UITableViewScrollPositionTop
                              animated:YES];
exporting.hidden=YES;

CGSize imageSize = [[UIScreen mainScreen] bounds].size;
if (NULL != UIGraphicsBeginImageContextWithOptions)
    UIGraphicsBeginImageContextWithOptions(imageSize, NO, 0);

else
    UIGraphicsBeginImageContext(imageSize);

CGContextRef context = UIGraphicsGetCurrentContext();

// Iterate over every window from back to front
for (UIWindow *window in [[UIApplication sharedApplication] windows]) 
{
    if (![window respondsToSelector:@selector(screen)] || [window screen] == [UIScreen mainScreen])
    {
        // -renderInContext: renders in the coordinate space of the layer,
        // so we must first apply the layer's geometry to the graphics context
        CGContextSaveGState(context);
        // Center the context around the window's anchor point
        CGContextTranslateCTM(context, [window center].x, [window center].y);
        // Apply the window's transform about the anchor point
        CGContextConcatCTM(context, [window transform]);
        // Offset by the portion of the bounds left of and above the anchor point
        CGContextTranslateCTM(context,
                              -[window bounds].size.width * [[window layer] anchorPoint].x,
                              -[window bounds].size.height * [[window layer] anchorPoint].y);

        // Render the layer hierarchy to the current context
        [[window layer] renderInContext:context];

        // Restore the context
        CGContextRestoreGState(context);
    }
}

// Retrieve the screenshot image
CGRect contentRectToCrop = CGRectMake(0, 70, 740, 740);
UIImage *image = UIGraphicsGetImageFromCurrentImageContext();

CGImageRef imageRef = CGImageCreateWithImageInRect([image CGImage], contentRectToCrop);
UIImage *croppedImage = [UIImage imageWithCGImage:imageRef];
UIGraphicsEndImageContext();

UIImageWriteToSavedPhotosAlbum(croppedImage, nil, nil, nil); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-31T10:41:22.313

[这](https://stackoverflow.com/questions/13153307/how-to-do-facebook-login-in-ios-6/13153474#13153474)是使用 iOS6 中内置的 Facebook SDK 轻松将图像发布到 Facebook 的方法。如果这对您有任何帮助，我们会很高兴。快乐编码:)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-07T11:33:20.837

Apple Developer Site 提供了一个新的 Social.framework，用于集成 Twitter 和 Facebook 等社交体验。

参考[这里](https://developer.apple.com/library/ios/#documentation/Social/Reference/Social_Framework/_index.html)。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-29T17:01:57.323

@Clarence 我认为您应该查看[适用于 iOS 的最新 Facebook SDK](http://developers.facebook.com/ios/)

它还有一些关于如何在 iOS 6 中在 facebook 上发布图像的教程。

只需下载 SDK，您就会在 Documents 文件夹中找到示例代码，其中包括一个示例 HelloFacebookSample，它显示了如何在 iOS 6 中在 Facebook 上发布图像。

你只需要在这个方法中传递你的图像对象 -

```
[FBNativeDialogs presentShareDialogModallyFrom:self initialText:nil image:croppedImage url:nil handler:nil]; 
```

在使用上述方法之前，您需要在此处正确遵循 v 3.1 安装[说明](http://developers.facebook.com/docs/getting-started/facebook-sdk-for-ios/3.1/)

# iphone - 什么是可接受的滚动 FPS，以及提高性能的技巧是什么？

> ID：11703925
> 
> 赞同：18
> 
> 时间：2012-07-28T19:17:51.913
> 
> 标签：iphone, ios, objective-c, ipad, uiscrollview

我在许多 WWDC 视频中看到，您希望尽可能接近 60.0 FPS 以获得更好的流畅滚动体验。我有一个 UIScrollLView 可以一次加载图像和几个表格视图。目前我得到 30 FPS。这是推荐的 FPS 的一半。只是想知道你们通常会为加载图像和其他繁重内容/渲染内容的表格视图/滚动视图获得什么 FPS。

还有其他优化 FPS 的技巧吗？过去一周到现在，我一直在使用时间分析器、分配和核心动画工具来启动 Instruments，以尽可能多地进行优化。

只是为了澄清一下我所拥有的。我在 iPad 上有砖石/瀑布/pinterest 风格的布局。所以它不仅仅是一个普通的 UITableView。它是一个填满整个屏幕的 UIScrollView，并充满了几个 UIView。每个视图都有一个 150x150 的 UIImageView 和一个 UITableView，并且它还有一些属性标签，使用 Core Text 绘制。所以当你看到屏幕的时候，一眼就可以看到5-8个表格视图，每个单元格又有一个UIImageView，然后每个单元格渲染使用核心文本绘制的属性标签。

所以你可以想象这是多么深刻和复杂。这不仅仅是带有 UIImageView 的常规表格视图。我知道如何在带有 UIImage 的 iPhone 中仅使用一个 UITableView 来获得 60 FPS。这个概念是异步加载图像，而不是尽可能地阻塞主线程。

**编辑：**

似乎这里的问题是我在视图中的 UITableView ..当我从 UIView 中删除它时，我得到了非常平滑的滚动..

我上传了一个示例项目，它是我所拥有的更简单的版本，但它清楚地显示了问题。链接在[这里](http://dl.dropbox.com/u/19680269/BroBoard.zip)

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-08-04T05:24:16.437

许多因素会影响渲染性能，以下是您可以检查的一些项目：

*   简介 - 你说你已经这样做了，太棒了！不幸的是，分析经常被忽视，即使它可以揭示意想不到的问题。在一个应用程序中，我正在使用不同单元格表示日期的日历。起初在单元格之间滚动很慢，这是出乎意料的。我想也许是画了太多的单元格。分析后，我发现它占用了我`[NSCalender currentCalender]`85% 的 CPU 时间！修复后，一切都滚动得很好！

*   图像 - 大图像在 CoreGraphics 中增加了很多负载。滚动尤其需要大量的绘制操作来移动它们。一个技巧是尽可能少地缩放设备上的图像，这使 CoreGraphics 的工作变得更容易。如果图像是显示它的视图的两倍，请在将其显示在视图中之前调整 UIImage 的大小。iOS 设备处理 PNG 的效果最好。它们在编译时由工具 (pngcrush) 压缩，iOS 具有用于渲染它们的特殊硬件。

**编辑**：JPG 可能是照片的更好选择。iOS 设备也有专用的 JPG 解码器。

*   自定义绘图 - 如果可能，请减少您所做的自定义 CGContext 绘图的数量。许多自定义绘图对动画速度有负面影响。如果可能的话，我会考虑在复杂的自定义绘图上使用图像。

*   剔除 - 只画你需要的东西。`UITableView`在单元格出现时自动卸载和加载单元格，因此这是为您完成的，但任何自定义 CGContext 绘图仅应在该部分可见时完成。根据我的经验，自动视图阴影也可能非常慢。

*   重用 - 使用重用标识符`UITableView`，这将允许`UITableView`重用单元对象，而不是在滚动时重新分配 - 看看这个[问题](https://stackoverflow.com/questions/2152180/iphone-what-are-reuseidentifiers-uitableviewcell)的答案。还重用`UIImages`而不是为同一个文件分配多个。`imageNamed`自动缓存图像，但`imageFromContents`文件不会。

*   创建你自己的 - 你可以创建你自己的网格视图类，它剔除隐藏在屏幕外的子视图视图，并通过延迟内容加载滚动。通过编写自定义解决方案，您可以完全控制流程并创建针对使用环境优化的设计。对于大多数用例，您将很难构建比 Apple 标准更好的东西，但我已经看到它在特定情况下完成。

*   最后的手段 - 减小有问题的视图的大小（改进过滤），将内容分成多个页面，缩小图像，删除性能不佳的旧设备。在牺牲大部分内容之前，我会满足于 30 FPS。设备将继续变得更快，旧设备将被淘汰，您的应用程序将逐渐变得更快。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-07-28T19:23:47.720

我的速度接近 60 fps，`UITableViewController`其中表格包含大约 2000 个单元格，每个单元格从网络上提取图像。诀窍是根据需要延迟加载图像。这个[来自 Apple 的示例代码](http://developer.apple.com/library/ios/#samplecode/LazyTableImages/Introduction/Intro.html)非常有用。

一般的想法是通过不阻塞主线程来保持 UI 响应。在另一个线程上执行下载和其他耗时的任务。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-07-28T19:21:51.363

我会做一些称为延迟加载的事情，它不会加载图像，直到它们真正被看到。

这是一个很好的例子： http: [//www.cocoacontrols.com/platforms/ios/controls/mhlzytableimages](http://www.cocoacontrols.com/platforms/ios/controls/mhlazytableimages)

祝你好运！

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-07-28T20:49:35.160

我所做的是使用 NSCache。我创建了一个小类，其属性符合 NSCache 数据协议（它真的很容易做到）。所以我要做的是在主表中的每个单元格和各种值得缓存的东西之间建立关系：NSAttributed 字符串、图像等——实际上是任何需要工作才能创建的东西。我不预加载它，但你可以。

当 tableview 要求您提供单元格时，请在缓存中查找主要对象。如果有，请拉出所有需要的对象。如果缓存中没有对象，则以旧方式获取数据，但在完成之前，请将其也保存在缓存中。

这确实帮助我在滚动单元格时减少了“口吃”。此外，不要为单元格中的任何内容设置动画 - 这会影响性能。一切都应该完全渲染。

要记住的另一件事 - 确保可以设置为不透明的视图的属性设置为 YES。这肯定有助于系统渲染单元格（如果您使用一个单元格，则包括背景视图。）

编辑：

所以你提供的信息包括 UITableViews 可能是根本问题。所以有两个建议：

1）你能退后一步，弄清楚如何让scrollView成为一个单一的UITableView吗？有了表格的页眉和页脚、部分的页眉和页脚，甚至可以让单元格成为浮动视图，你难道不知道如何重新架构你所拥有的吗？

2）所以你决定不接受建议1。然后，这样做。将 tableview 使用的空间视为容器视图。每当编辑 tableview 时，对其进行图像快照并保留此图像。一旦用户开始滚动，就将 tableViews 换成图像。当 scrollView 停止时，将 UITableView 换回。这当然需要一些微调。事实上，您可能会在滚动期间在表格上覆盖一个不透明的图像快照（这将隐藏它并防止它被要求自行绘制）。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-08-06T22:45:40.303

一般来说，您可以做一些事情来获得更好的表格视图性能：

1）切换到 Loren Brichter 绘制 UITableViewCell 的方法（因为缺少更好的链接：[http ://www.therefinedgeek.com.au/index.php/2010/12/21/fast-scrolling-uitableview-updates-for- ios-4-2/](http://www.therefinedgeek.com.au/index.php/2010/12/21/fast-scrolling-uitableview-updates-for-ios-4-2/) )

基本上，他的代码所做的就是将所有单元格内容呈现为一个不透明的 UIView，UITableView（和 CoreGraphics）可以非常快速地爆炸到 UITableViewCell

如果您不想在 drawRect: 中完成所有单元格设计，您仍然可以使用 nib，但是：

*   确保每个子视图都标记为不透明
*   没有任何透明/半透明的子视图
*   没有任何带有 alpha 通道的图像！= 1.0f。

2）不要让 UIImageView 做任何缩放来显示你的图像，给它一个正确大小的 UIImage

3) 如果您使用的是 iOS 5 及更高版本，您可以为特定的单元格标识符注册一个 nib。这样，当您调用 [tableView dequeueReusableCellWithIdentifier:] 时，您一定会得到一个单元格。单元分配更快（根据 Apple 的说法），并且您可以编写更少的代码：

```
- (void)viewDidLoad {
    UINib *nib = [UINib nibWithNibName:@"MyCell" bundle:nil];
    [self.tableView registerNib:nib forCellReuseIdentifier:@"MyCellIdentifier"];
}

// ...

- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath {
    static NSString *cellIdentifier = @"MyCellIdentifier";
    MyCell *cell = (MyCell *)[tableView dequeueReusableCellWithIdentifier:cellIdentifier];

    // Commented out code is no longer needed
    //if (cell == nil) {
    //    cell = [[MyCell alloc] initWithStyle:UITableViewCellStyleDefault reuseIdentifier:cellIdentifier];
    //}

    // setup cell

    return cell;
} 
```

4) 显示从网上下载的图像

*   显示默认图像（下载真实图像时要查看的内容）
*   在单独的线程上开始下载（提示：使用 GCD 的 dispatch_async()）
*   当图像进来时，缓存它（提示：NSCache），并显示在单元格上
    *   将所有图像下载/缓存在主线程之外；您应该在主线程上做的唯一一件事就是设置图像（记住 UI 代码必须在主线程上！）

您可能想要编写一个支持异步的 UIImageView（或使用现有库）。

远离 EGOImageView，即使它具有异步下载功能，它也会在主线程上进行缓存查找（恰好在磁盘上，这意味着昂贵的磁盘 IO），然后再分派到后台线程进行下载。我曾经使用它，但最终我编写了自己的一组类来处理这个问题，而且速度明显更快。

-

只要按照这些，以及其他人在这里写的东西，你就会有像玻璃一样滚动的表格视图:)

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-08-06T17:38:33.887

人眼以大约 60 FPS 的速度观看，所以这就是推荐的原因，但 30 FPS 也会显得非常流畅，尤其是当普通用户观看它时，而不是你试图找到尽可能多的东西来修复。这显然取决于滚动的速度，如果帧与帧之间的差异是几个像素的移动，30 FPS 就可以了，但更快的移动需要更高的 FPS 才能显得流畅

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-08-06T07:19:08.697

您想要 60 fps，但实际上 30 fps 看起来并不算太糟糕。但我会尝试在滚动时达到 60fps 以获得更流畅的外观。

有许多性能改进的可能性，各种教程也显示了这些可能性

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2012-08-06T20:16:21.463

虽然 60 FPS 是理想的，但像 Halo 这样的游戏以 30 FPS 运行非常漂亮。Halo 中的战场混乱可能比大多数列表更令人惊讶，更快速的动作，甚至像你这样的复杂列表！

# javascript - 如何根据用户的浏览器尺寸动态设置 div 高度

> ID：11703927
> 
> 赞同：5
> 
> 时间：2012-07-28T19:18:02.477
> 
> 标签：javascript, jquery

使用这个例子：

[http://jsfiddle.net/FhWxh/](http://jsfiddle.net/FhWxh/)

HTML：

```
<div id="container">
    <div id="header">
        <p>Header</p>
    </div>

    <div id="content">
        <p><b>Main content</b></p>
        <br>
        <br>
        <br>
        <br>
        <br>
        <br>
        <br>
        <br>
        <br>
        <br>
        Content
        <br>
        <br>
        <br>
        <br>
        <br>
        <br>
        <br>
        <br>
        <br>
        <br>
        Content
        <br>
        <br>
        <br>
        <br>
        <br>
        <br>
        <br>
        <br>
        <br>
        <br>
        Content
        <br>
        <br>
        <br>
        <br>
        <br>
        <br>
        <br>
        <br>
        <br>
        <br>
        Content
        <br>
        <br>
        <br>
        <br>
        <br>
        <br>
        <br>
        <br>
        <br>
        <br>
        Content
        <br>
        <br>
        <br>
        <br>
        <br>
        <br>
        <br>
        <br>
        <br>
        <br>
        Content
    </div>

    <div id="sidebar">
        <p><b>Sidebar</b></p>
        <br>
        <br>
        <br>
        <br>
        <br>
        <br>
        <br>
        <br>
        <br>
        <br>
        Content
        <br>
        <br>
        <br>
        <br>
        <br>
        <br>
        <br>
        <br>
        <br>
        <br>
        Content
        <br>
        <br>
        <br>
        <br>
        <br>
        <br>
        <br>
        <br>
        <br>
        <br>
        Content
        <br>
        <br>
        <br>
        <br>
        <br>
        <br>
        <br>
        <br>
        <br>
        <br>
        Content
        <br>
        <br>
        <br>
        <br>
        <br>
        <br>
        <br>
        <br>
        <br>
        Content
    </div>

    <div id="footer">
        <p>Footer</p>
    </div>
</div> 
```

CSS：

```
body {
    font: normal 16px/1.5em helvetica, arial, sans-serif
}
p {
    text-align:center;
}
#container {
    width:960px;
    margin:0px auto;
}
#header {
    text-align:center;
    background: #777;
    color:#fff;
    height:50px;
    padding:5px;
}
#content {
    float:right;
    width:610px;
    text-align:center;
    background:#ccc;
    padding:150px 5px;
}
#sidebar {
    float:left;
    width:330px;
    text-align:center;
    height:300px;
    background:#eee;
    padding:15px 5px;
    overflow:auto;
}
#footer {
    clear:both;
    text-align:center;
    background: #555;
    color:#fff;
    height:50px;
    padding:5px;
} 
```

如何使“侧边栏”达到用户浏览器高度的 100%（减去 50 像素为标题留出空间）？

我相信可以使用javascript获取用户的浏览器高度并将其动态插入到css中，但我不知道该怎么做。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-07-28T19:20:38.480

尝试以下操作：

```
$('#sidebar').height($(window).height() - 50) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-10-20T11:20:07.350

Div 将根据浏览器大小调整大小

```
$(window).on('load resize', function(){
    $('#div').height($(this).height());
    $('#div').width($(this).width());
}); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-28T19:43:47.680

尽量不用js，是不是你想要的那种效果？[http://jsfiddle.net/FhWxh/4/](http://jsfiddle.net/FhWxh/4/)

更完整一点[http://jsfiddle.net/FhWxh/13/show/](http://jsfiddle.net/FhWxh/13/show/) 整个内容大小由包装器设置（设置为 960px），页脚和页眉固定在其中的位置，内容和侧边栏是在您之前使用的容器类中。它并不完美，但我希望它有所帮助

# java - Java正则表达式提取键值对

> ID：11703929
> 
> 赞同：0
> 
> 时间：2012-07-28T19:18:11.593
> 
> 标签：java, regex

如何`bookid`使用 Java 从这个字符串中提取值？

```
href="http://www.books.com/?bookname=cooking&bookid=12345678&bookprice=123.45">cooking book 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-28T19:24:50.643

通常你应该使用一些解析器，但如果你的字符串真的这么短，那么也许正则表达式可以是这样的选项

```
String s="href=\"http://www.books.com/?bookname=cooking&bookid=12345678&bookprice=123.45\">cooking book";
Pattern p= Pattern.compile("(?<=bookid=)\\d+");
Matcher m=p.matcher(s);
if (m.find())
    System.out.println(m.group()); 
```

输出：

> 12345678

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-28T19:32:47.720

一个非常简单的答案是

```
String[] queryParams =  url.split("\\?")[1].split("&"); 
```

这将为您提供每个元素中 a=b 形式的所有参数。然后，您可以拆分所需的参数。

但理想情况下，您应该通过**参数名称提取值**

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-28T19:29:28.367

您可以使用以下代码片段：

```
 String str = "href=\"http://www.books.com/?bookname=cooking&bookid=12345678&bookprice=123.45\">cooking book";
            String[] strArray = str.split("&");
            String bookId = "";
            for(int i=0;i<strArray.length;i++)
            {
               if(strArray[i].startsWith("bookid"))
               {
                  bookId = strArray[i].split("=")[1];
               }
            }
            System.out.println("Book ID = "+bookId); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-28T19:26:50.197

Pshemo 你打败了我，但你也可以使用这个：“（id \ = [0-9] *）”

并尝试[RegexPlanet](http://www.regexplanet.com/advanced/java/index.html)尝试您的正则表达式并以 java 格式检索转义的字符串

# python - 音频组成员无法访问 /dev/dsp 播放声音

> ID：11703934
> 
> 赞同：1
> 
> 时间：2012-07-28T19:19:17.817
> 
> 标签：python, linux, audio, permissions

我正在尝试使用此处引用的以下脚本来使用 python 播放音调：http: //forums.xkcd.com/viewtopic.php?f=11& [t=49360](http://forums.xkcd.com/viewtopic.php?f=11&t=49360)

```
python -c "freq=220;sec=2;from math import sin,pi;rate=8000;w=                 
[chr(127+int(127*sin(i*2*pi*freq/rate))) for i in     xrange(rate)]*sec;s=''.join(w);print s" >/dev/dspi in      
xrange(rate)]*sec 
```

我收到权限被拒绝错误 /dev/dsp: Permission denied

我是 root，我的用户是音频组的成员。有什么我想念的吗？我正在使用 ubuntu 11.04

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-28T19:58:36.863

这是因为 /dev/dsp 在 ubuntu 中被删除 Ubuntu [下缺少 /dev/dsp](https://superuser.com/questions/244173/missing-dev-dsp-under-ubuntu)

运行这些命令将起作用：

```
 python -c "freq=220;sec=2;from math import sin,pi;rate=8000;w=[chr(127+int(127*sin(i*2*pi*freq/rate))) for i in xrange(rate)]*sec;s=''.join(w);print s"  > tmp_sound
 pacat tmp_sound    >padsp 
```

# git - 该产品开发的理想 git 分支策略是什么？

> ID：11703940
> 
> 赞同：2
> 
> 时间：2012-07-28T19:19:51.597
> 
> 标签：git, version-control, merge, branch, branching-and-merging

假设我想向 Twitter（神奇的开源）iPhone 应用程序添加一组相关但独立的功能。在应用程序中，您可以点击“家庭自动化”并看到一屏用于控制家中功能的按钮：灯光；电视; 温度; 色调; 和音乐。

在 Git 中开发这套功能的理想分支模型是什么？

以下是一些假设：

*   一个人（同一个人）将开发所有功能。
*   Twitter 鼓励将 rebase 作为其集成模型。
*   所有功能共享一些基本代码。

这是我对该模型的**好**东西，尽管我很想听听所有模型选项：

*   代码审查员应该很容易在最后独立审查每个功能。换句话说，审查 Lights 代码的人不必处理在实现 TV 时所做的任何更改。

*   在开发过程中，每个功能都应该有很好的、干净的历史记录。在使用 Lights 时查看 foo.m 时，我应该只看到为实现 Lights 所做的更改，而不是为实现 TV 所做的更改。

*   即使我让电视处于凌乱/损坏的状态，我仍然可以编译和测试灯光。

该模型的一个**要求**是，我需要能够定期生成集成了所有功能的测试版本，就像它们将呈现给用户一样。换句话说，当我运行我的测试构建时，我会看到一个包含所有功能的家庭自动化屏幕。

我最初的直觉是这样设置分支：

```
Twitter
    \
     Automation
        \
         Lights
        \
         Television
        \
         Temperature
        \
         ... 
```

换句话说，我将从 Twitter 分支创建“自动化”分支，其中包含所有家庭自动化功能使用的共享代码，包括用于访问功能的概览 UI 的存根代码（即“全屏按钮”上面提到的）。然后我会从自动化创建一系列分支，每个功能一个。

但是，在这个模型中，我无法理解如何在这个世界上生成完全集成的测试版本。我想我需要创建一些其他分支，定期将 Lights/Television/etc 分支合并在一起。但是这次合并会有明显的冲突。

例如，假设自动化分支中的共享 UI 代码有一个函数`num_buttons_to_render`返回要在家庭自动化 UI 中呈现的按钮数量。自动化分支将在此处返回 0，因为它本身不实现任何功能。每个子分支（灯光、电视等）都将返回 1，因为它们只实现各自的工作流程，而不关心其他功能。但是测试分支想要在这里返回 5，因为它想要渲染所有 5 个自动化功能（灯光、电视、温度、阴影和音乐）。所以我想在测试分支中解决一次冲突，然后随着时间的推移继续整合所有功能分支的后续更改。但我什至不清楚我能否做到这一点，因为所有功能分支都使用 Twitter 开发标准规定的变基模型。

我是 git 的新手，所以我希望我在这里有意义。如果没有，我会在这里主动回答任何后续问题。非常感谢你的帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-28T22:51:56.327

> 我想我需要创建一些其他分支，定期将 Lights/Television/etc 分支合并在一起。

这听起来很有道理。

> 但是这次合并会有明显的冲突。

所以对付他们。最好早点而不是晚点。

> 但是测试分支想要在这里返回 5，因为它想要渲染所有 5 个自动化功能（灯光、电视、温度、阴影和音乐）。所以我想在测试分支中解决一次冲突，然后随着时间的推移继续整合所有功能分支的后续更改。

为什么会有冲突？

为什么不让每个功能调用一个函数来注册自己，这会增加功能的计数。如果没有特征调用该函数，则计数为零。如果有人调用它，则计数为一。如果五个调用它，计数是五个。这似乎比在某个地方有一个硬编码的计数器更好，它在不同的分支中具有不同的值。

我认为您建议的分支模型没有任何问题，您描述的唯一问题与 git 无关，可以通过改进代码设计来解决。

> 但我什至不清楚我能否做到这一点，因为所有功能分支都使用 Twitter 开发标准规定的变基模型。

也许我错过了一些东西，但我不明白为什么这是个问题。如果您定期从上游代码中变基自动化，然后从自动化（而不是从上游）中变基每个功能分支，那么从功能分支合并回自动化分支就没有问题。

# r - 带有聚合数据的 R 堆叠条形图

> ID：11703947
> 
> 赞同：7
> 
> 时间：2012-07-28T19:21:11.657
> 
> 标签：r, ggplot2, aggregate

我在创建带有聚合数据的堆叠条形图时遇到了麻烦。在处理来自其他人报告的汇总表时，我通常使用 Excel，但我想开始在 R 中制作我的所有图表，可能使用 lattice 或 ggplot。在 Excel 中，对以下聚合数据进行堆叠条形图需要单击几下（插入、柱形图、堆叠列），然后您会得到类似的结果。![在此处输入图像描述](../Images/0eb6fd2eeca8ac6b0d76140e97d2529e.png).

除了想在 RI 中使用此图表外，还想使用 ggplot 的分面，即在 ggplot 中并排放置两个堆叠的条形图来比较两组（A 和 B）。我玩过其他图表，这似乎是最好的选择。这是数据。Excel 图表仅显示 A 组（数字为百分比）。

```
D<-as.data.frame(structure(list(Group = c("A", "A", "A", "A", "A", 
"A", "B", "B", "B", "B", "B", "B"
), Education = c("NVQ Level 4 and above", "NVQ Level3", "NVQ Level 2", 
"Below NVQ Level 2", "Other qualification", "No qualification", 
"NVQ Level 4 and above", "NVQ Level3", "NVQ Level 2", "Below NVQ Level 2", 
"Other qualification", "No qualification"), Full.Time = c(47, 
27, 23, 17, 18, 9, 36, 26, 22, 22, 27, 12), PT.16.hours = c(20, 
24, 22, 18, 18, 12, 22, 21, 21, 22, 14, 10), PT.16.hours.1 = c(12, 
11, 10, 11, 13, 5, 24, 25, 25, 20, 16, 12)), .Names = c("Group", 
"Education", "Full.Time", "PT>16.hours", "PT<16.hours"))) 
```

在开始分面以显示两组之间的差异之前，我实际上在使用 ggplot2 创建单个堆叠条形图（如上图）时遇到了麻烦。我猜我不应该有 3 个变量（FullTime,PT,PT>16 hours），而是每个案例的单行，所以不要有

```
A    NVQ Level 4 and above      47  20  12
A    NVQ Level3                 27  24  11 
```

我应该

```
Group          Education    Work     Percentage
A   NVQ Level 4 and above   Full Time   47
A   NVQ Level 4 and above   PT>16 hours 20 
```

如果这是让 ggplot 绘制图表的唯一方法，您将如何通过几行代码从一种格式更改为另一种格式？我经常发现这种类型的数据，因此最好有一个标准化的程序。我也玩过 ggplot 选项“身份”，但没有取得太大成功。

任何帮助将非常感激。

谢谢

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-07-28T20:04:28.770

`reshape`你的数据：

```
library(reshape2)
df <- melt(D) 
```

并简单地绘制它:)

```
ggplot(df, aes(x = factor(Education), y = value, fill = factor(variable))) +
geom_bar() + facet_grid(.~Group) +
ylab('') + xlab('') + opts(title = '') + scale_fill_discrete('') +
theme_bw() +
opts(axis.text.x=theme_text(angle = 45, hjust = 1, vjust = 1)) 
```

第一行设置美学，第二行添加`bar`图层，`facet`第三行我们从图中删除不需要的文本，第四行设置`b&w`主题，最后一行我们旋转 x asis 标签。

![在此处输入图像描述](../Images/0e1af9280e4206a7150cba34fcd9a109.png)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-28T19:52:14.027

诀窍是使用包装将三个测量`melt`的`plyr`列融合为一个（一个名为 的新列`value`），以及一个标识列（名为`variable`）进行分组：

```
require(ggplot2)
require(reshape)

# first we need to get Full.Time, PT.16, etc. into one column
df <- melt(D, .measure.vars=.(Full.Time, PT.16.hours, PT.16.hours.1))
ggplot(df, aes(x=Education, y=value, fill=variable )) +
  geom_bar(stat="identity") 
```

其余的只是重新排序因子，以便输出与您想要的匹配。

看看`df`melt 最终做了什么，因为它是 ggplot2 的常见工作流程。

![阴谋](../Images/27c1c22927a7c2dd90865c81069d578c.png)

要使用因子移动到多面图，`Group`只需添加适当的`facet_wrap`：

```
ggplot(df, aes(x=Education, y=value, fill=variable )) +
  geom_bar(stat="identity") +
  facet_wrap(~ Group) 
```

![刻面图](../Images/ee3260c6ef389dfbaf1172c3ea4aa01e.png)

# css - Flexslider 图像大小 - 自动调整到流体宽度？

> ID：11703948
> 
> 赞同：0
> 
> 时间：2012-07-28T19:21:14.283
> 
> 标签：css, image, layout, slider, flexslider

我已经安装了 Flexslider 的基本版本。我已经删除了与 div ID="main" 相关的 css，以便滑块可以在我的页面上伸展。

但是，图像不会根据新宽度进行调整。

[这就是我的意思。](http://adam.com.sa/flex.png)

我将宽度属性更改为：

```
.flexslider .slides img 
```

这确实会改变宽度，但图像仍然不会自动对齐到从滑块开始的左侧开始。仍然存在一种图像重叠。

需要在 CSS 中进行哪些更改以使它们对齐？FlexSlider 是否仅适用于固定图像尺寸，而不适用于流体布局？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-22T23:43:52.230

我所做的是将一个带有类的跨度包装到图像标签中

```
<span class="className"><img src="images/slideImage-1.jpg"></span> 
```

然后在我添加的CSS中

```
.flexslider .slides .className img{
width: 244px; 
```

}

希望有帮助

# c - C 中跨平台数据类型的库

> ID：11703949
> 
> 赞同：0
> 
> 时间：2012-07-28T19:21:20.707
> 
> 标签：c, cross-platform

是否有用于提供跨平台数据类型的 C（不是 C++、Boost 等）库？

详细地说，我想将`int`一个文件存储在 32 位 linux 机器中，然后`int`从 64 位 windows 机器中读取文件。这可能吗 ？

更新：我也不想使用 sqlite 或某种数据库。我想要一个可以帮助我在整个代码中使用数据类型的库。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-28T20:09:53.943

如果您只想存储 32 位有符号整数，只需确定一种格式，例如大端。然后您可以自己编写序列化/反序列化：

```
void write_int32_be (int32_t i, FILE *f)
{
  uint8_t buf[4];

  buf[0] = ((uint32_t)i >> 24);
  buf[1] = ((uint32_t)i >> 16) & 0xFF;
  buf[2] = ((uint32_t)i >> 8) & 0xFF;
  buf[3] = (uint32_t)i & 0xFF;
  fwrite (buf, 4, 1, f);
}

int32_t read_int32_be (FILE *f)
{
  uint8_t buf[4];

  fread (buf, 4, 1, f);

  return ((uint32_t)buf[0] << 24) |
         ((uint32_t)buf[1] << 16) |
         ((uint32_t)buf[2] << 8) |
          (uint32_t)buf[3];
} 
```

如果您需要多种类型，请使用[tpl](http://tpl.sourceforge.net/)、[Eet](http://www.enlightenment.org/p.php?p=about/efl/eet&l=en)、[Avro](http://avro.apache.org/docs/current/)、[protobuf-c等库或](http://code.google.com/p/protobuf-c/)[XDR](http://en.wikipedia.org/wiki/External_Data_Representation)、[JSON](http://en.wikipedia.org/wiki/JSON)或[ASN.1](http://en.wikipedia.org/wiki/Abstract_Syntax_Notation_One)等标准的实现。如果您有大型数值数据集，请使用[HDF](http://en.wikipedia.org/wiki/Hierarchical_Data_Format)或[NetCDF 之](http://en.wikipedia.org/wiki/NetCDF)类的东西。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-28T19:43:24.397

如果您的编译器了解 C99 标准，那么您可以使用**int32_t**

[http://en.wikipedia.org/wiki/C_data_types#Fixed_width_integer_types](http://en.wikipedia.org/wiki/C_data_types#Fixed_width_integer_types) 恕我直言，您的操作系统应该具有相同的字节序。x86 和 x86_64 上的 Windows 和 Linux 都是 little-endian，所以它应该可以工作。 [http://en.wikipedia.org/wiki/Endianness#Endianness_and_operating_systems_on_architectures](http://en.wikipedia.org/wiki/Endianness#Endianness_and_operating_systems_on_architectures)

# jquery - AJAX 提交前的 jQuery 验证

> ID：11703955
> 
> 赞同：3
> 
> 时间：2012-07-28T19:21:55.990
> 
> 标签：jquery, ajax, validation, jquery-validate

我有一个带有以下 jQuery 验证代码的简单注册表单：

```
$(document).ready(function(){

    $("#registerForm").validate({

    rules: {

    Username: {required: true, minlength: 6},   
    Password: {required: true, minlength: 6},
    re_Password: {required: true, equalTo: "#Password"} 

    },

    });     
}); 
```

在我提交表单之前它会正确验证。

当我还想对表单进行 AJAX 提交时，问题就来了，因为表单不再验证并在没有验证的情况下提交：

```
<form id="registerForm" action="register.php" method="post" onsubmit="xmlhttpPost('register.php', 'registerForm', 'signup-box'); return false;"> 
```

有效的默认值是：

```
<form method="post" id="registerForm" action="register.php"> 
```

请，如果有人能指出我正确的方向或给我一些起点来解决这个问题，我将不胜感激。

谢谢。

* * *

感谢 Kundan Singh Chouhan，我找到了将以下代码添加到 document.ready 块的解决方案：

```
$("#registerForm").submit(function(){

    if($("#registerForm").valid()){

        xmlhttpPost('register.php', 'registerForm', 'signup-box'); 

   }

return false;

}); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2016-05-23T07:47:21.920

我认为您应该为 JQuery Validator 使用提交处理程序，如下所示：

```
$('#id_of_form').validate(){

    // rules and messages

    submitHandler: function(form) {

    // place your code for Ajax Request here...

    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-28T19:36:34.750

我认为您应该必须从表单标签中删除 onsubmit 事件并在 document.ready() 中编写以下脚本

```
$("form").submit(function(){
   if($("form").validate()){
      xmlhttpPost('register.php', 'registerForm', 'signup-box'); 
   }
   return false;
}); 
```

希望这能解决您的问题。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-04-19T20:43:07.360

您可以使用[jQuery.Validation](https://jqueryvalidation.org/)这里是一些示例代码：

```
 var $form = $("form");
    $form.validate({
        rules: {
            Username: {required: true, minlength: 6},   
            Password: {required: true, minlength: 6},
            re_Password: {required: true, equalTo: "#Password"} 
        },
        invalidHandler: function(event, validator) {
            // 'this' refers to the form
            var errors = validator.numberOfInvalids();
            if (errors) {
                var message = errors === 1
                  ? 'You missed 1 field. It has been highlighted'
                  : 'You missed ' + errors + ' fields. They have been highlighted';  
            }
        },
        submitHandler: function (form) {

            var $form = $(form);
            $.ajax({
                url: destinationUrl,
                method: "POST",
                data: $form.serialize()
                })
                .done(function (result) {
                    // show some message, etc...

                    return false; // blocks redirect after submission via ajax
                })
                .fail(function (response, error) {
                    // failed
                })
                .always(function() {

                });
        }
    }); 
```

问候。

# javascript - 用于形成值的咖啡脚本变量

> ID：11703959
> 
> 赞同：0
> 
> 时间：2012-07-28T19:22:32.550
> 
> 标签：javascript, ruby-on-rails-3, coffeescript

好的，所以我在表单中有这个

```
<INPUT type="text" name="inputbox" value="">
<INPUT TYPE="button" NAME="button2" Value="Write" onClick="writeText(this.form)"> 
```

我有以下从咖啡脚本生成的javascript

```
(function() {
  var writeText;

  writeText = function(form) {
    return form.inputbox.value = "ping";
  };

}).call(this); 
```

我需要知道如何调用 writeText？

因为当我单击按钮时没有任何反应......如果我删除 function(){}.call(this) 包装器，它就可以工作。

我无法移除包装纸。我需要知道如何使用 .call(this) 调用 writeText。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-28T19:28:02.263

这是一个作用域问题，Coffeescript 将所有内容都包装在它自己的闭包中，以避免污染全局命名空间。有两种解决方案；

1.  使用 coffeescript 的“--bare”选项进行编译（首先避免将包装器放在那里）。

2.  将您的咖啡脚本函数绑定到浏览器在运行时看到的某个对象。像这样：

`window.writeText = (form) -> form.inputbox.value = "ping"`

在第二个选项中，您的 writeText 函数绑定到浏览器中的 window 对象，这是`this`您的脚本在浏览器中运行时的隐式对象。

# c - 32 位和 64 位系统上的数组指针

> ID：11703960
> 
> 赞同：2
> 
> 时间：2012-07-28T19:22:44.203
> 
> 标签：c, arrays, pointers

以下代码在 32 位和 64 位系统上打印不同的结果：

```
#include <stdio.h>
void swapArray(int **a, int **b) 
{ 
    int *temp = *a; 
    *a = *b; 
    *b = temp; 
} 

int main() 
{ 
    int a[2] = {1, 3}; 
    int b[2] = {2, 4}; 
    swapArray(&a, &b); 
    printf("%d\n", a[0]); 
    printf("%d\n", a[1]); 
    return 0; 
} 
```

在 32 位系统中编译后，输出为：

```
2
3 
```

在 64 位上，输出为：

```
2
4 
```

据我了解，该函数`swapArray`只是交换指向 and 中第一个元素的`a`指针`b`。所以调用后，`swapArray`应该`a`指向应该指向。 出于这个原因，应该让步，并且应该引用内存中的位置之后的下一个字节，其中包含.`2``b``1`
`a[0]``2``a[1]``2``4`

谁能解释一下？

**编辑：**
感谢评论和答案，我现在注意到`&a`and`&b`是 type`int (*)[]`而不是`int **`。这显然使代码不正确（实际上我收到了编译器警告）。然而，有趣的是，为什么编译器 (gcc) 只给出警告而不是错误。
我仍然想知道是什么导致了不同系统上的不同结果，但是由于代码不正确，因此相关性较低。

**编辑 2：**
至于不同系统上的不同结果，我建议阅读[AndreyT 的评论](https://stackoverflow.com/questions/11703960/arrays-pointers-on-32bit-and-64bit-systems#comment15523522_11704003)。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-28T21:31:04.283

在回答您的问题之前，让我们看看在指针操作期间会发生什么。我正在使用一个非常简单的代码来演示这一点：

```
#include <stdio.h>

int main() {
        int *p;
        int **p2;
        int x = 3;
        p = &x;
        p2 = &p;
        return 0;
} 
```

现在看反汇编：

```
(gdb) disassemble 
Dump of assembler code for function main:
   0x0000000000400474 <+0>: push   rbp
   0x0000000000400475 <+1>: mov    rbp,rsp
   0x0000000000400478 <+4>: mov    DWORD PTR [rbp-0x14],0x3
   0x000000000040047f <+11>:    lea    rax,[rbp-0x14]
   0x0000000000400483 <+15>:    mov    QWORD PTR [rbp-0x10],rax
   0x0000000000400487 <+19>:    lea    rax,[rbp-0x10]
   0x000000000040048b <+23>:    mov    QWORD PTR [rbp-0x8],rax
=> 0x000000000040048f <+27>:    mov    eax,0x0
   0x0000000000400494 <+32>:    leave  
   0x0000000000400495 <+33>:    ret 
```

拆卸是不言而喻的。但是这里需要补充几点，

我的函数的堆栈帧从这里开始：

```
 0x0000000000400474 <+0>: push   rbp
   0x0000000000400475 <+1>: mov    rbp,rsp 
```

所以让他们现在拥有的

```
(gdb) info registers $rbp
rbp            0x7fffffffe110   0x7fffffffe110 
```

在这里，我们将值`3`放入`[rbp - 0x14]`'s 地址。让我们看看内存映射

```
(gdb) x/1xw $rbp - 0x14
0x7fffffffe0fc: 0x00000003 
```

重要的是要注意`DWORD`使用了 32 位宽的数据类型。所以在旁注中，整数文字`3`被视为 4 字节单位。

下一条指令用于`lea`加载前面指令中刚刚保存的值的有效地址。

```
0x000000000040047f <+11>:   lea    rax,[rbp-0x14] 
```

这意味着 now`$rax`将具有价值`0x7fffffffe0fc`。

```
(gdb) p/x $rax
$4 = 0x7fffffffe0fc 
```

接下来我们将使用这个地址保存到内存中

```
0x0000000000400483 <+15>:   mov    QWORD PTR [rbp-0x10],rax 
```

重要的是要注意`QWORD`这里使用的 a。因为 64 位系统有 8 字节的本机指针大小。`0x14 - 0x10 = 4`字节在前面的`mov`指令中使用。

接下来我们有：

```
 0x0000000000400487 <+19>:    lea    rax,[rbp-0x10]
   0x000000000040048b <+23>:    mov    QWORD PTR [rbp-0x8],rax 
```

这又是第二次间接。与地址相关的所有值总是`QWORD`. 重要的是要注意这一点。

现在让我们来看看你的代码。

在调用 swaparray 之前，您有：

```
=> 0x00000000004004fe <+8>: mov    DWORD PTR [rbp-0x10],0x1
   0x0000000000400505 <+15>:    mov    DWORD PTR [rbp-0xc],0x3
   0x000000000040050c <+22>:    mov    DWORD PTR [rbp-0x20],0x2
   0x0000000000400513 <+29>:    mov    DWORD PTR [rbp-0x1c],0x4
   0x000000000040051a <+36>:    lea    rdx,[rbp-0x20]
   0x000000000040051e <+40>:    lea    rax,[rbp-0x10]
   0x0000000000400522 <+44>:    mov    rsi,rdx
   0x0000000000400525 <+47>:    mov    rdi,rax 
```

这是非常微不足道的。您的数组已初始化，`&`当数组开头的有效地址加载到`$rdi`and时，运算符的效果可见`$rsi`。

现在让我们看看它在里面做什么`swaparray()`。

数组的开头保存在`$rdi`and`$rsi`中。所以让我们看看他们的内容

```
(gdb) p/x  $rdi
$2 = 0x7fffffffe100
(gdb) p/x  $rsi
$3 = 0x7fffffffe0f0

   0x00000000004004c8 <+4>: mov    QWORD PTR [rbp-0x18],rdi
   0x00000000004004cc <+8>: mov    QWORD PTR [rbp-0x20],rsi 
```

现在按照以下说明执行第一条语句`int *temp = *a`。

```
 0x00000000004004d0 <+12>:    mov    rax,QWORD PTR [rbp-0x18]
   0x00000000004004d4 <+16>:    mov    rax,QWORD PTR [rax]
   0x00000000004004d7 <+19>:    mov    QWORD PTR [rbp-0x8],rax 
```

现在到了决定性的时刻，你的`*a`?

1.  它加载到`$rax`存储在`[rbp - 0x18]`. `$rdi`保存值的位置。它又保存第一个数组的第一个元素的地址。
2.  通过使用存储到的地址执行另一个间接`$rax`获取 a`QWARD`并将其加载到`$rax`. 那么它会返回什么呢？它将返回一个`QWARD`from `0x7fffffffe100`。这实际上将由保存在那里的两个四字节数量形成一个 8 字节数量。详细说明，

那里的记忆如下。

```
(gdb) x/2xw $rdi
0x7fffffffe100: 0x00000001  0x00000003 
```

现在如果你拿一个`QWORD`

```
(gdb) x/1xg $rdi
0x7fffffffe100: 0x0000000300000001 
```

所以你实际上已经被搞砸了。因为您正在获取不正确的边界。

其余代码可以用类似的方式解释。

现在为什么它在 32 位平台上有所不同？因为在 32 位平台中，本机指针宽度为 4 个字节。所以这里的情况会有所不同。您的语义不正确代码的主要问题源于整数类型宽度和本机指针类型的差异。如果两者都相同，您仍然可以解决您的代码。

但是你永远不应该编写假定本机类型大小的代码。这就是标准适用的原因。这就是你的编译器给你警告的原因。

从语言的角度来看，它的类型不匹配已经在前面的答案中指出，所以我不打算讨论。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-07-28T19:29:01.773

```
swapArray(&a, &b); 
```

`&a`并且`&b`不是 type`int **`而是 type `int (*)[2]`。顺便说一句，您的编译器足以接受您的程序，但编译器有权拒绝翻译它。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-07-28T19:27:39.497

您不能使用指针技巧交换数组（它们不是指针！）。您要么必须创建指向这些数组的指针并使用指针，要么使用 malloc 等动态分配数组。

我在 64 位系统上得到的结果与你的不同，例如，我得到：

```
2
3

test: ELF 64-bit LSB executable, x86-64, version 1 (SYSV), dynamically linked (uses shared libs), for GNU/Linux 2.6.8, not stripped 
```

在我的 mac 上使用 clang 我得到一个错误：

```
test.cpp: In function ‘int main()’:
test.cpp:13: error: cannot convert ‘int (*)[2]’ to ‘int**’ for argument ‘1’ to ‘void swapArray(int**, int**)’ 
```

我认为这是未定义的行为，您正在尝试解释可能是垃圾输出的内容。

# signature - 尝试在 BREW MP 上开发应用程序

> ID：11703962
> 
> 赞同：1
> 
> 时间：2012-07-28T19:23:11.293
> 
> 标签：signature, brew-framework, brewmp

这家手机制造商绕过了高通/BREW 认证或认证过程。该电话仅在 Sprint 网络上运行。我无法访问开发者模式，因为我缺少所需的签名。我在 BREW 开发团队等处注册。由于电话从未通过 BREW 认证，我被告知无法从 BREW 获得签名。我可以从 Sprint 或 Hand-Set 制造商处获得此签名吗？他们必须把它给我还是向我收费？任何其他想法将不胜感激。

凯文

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-26T06:51:04.827

我认为他们可以，但他们不会。甚至 Sprint 也可能没有能力，他们可能只有 BREW/Qualcomm 提供给他们的签名密钥，仅供他们使用。无论哪种方式，我建议您购买另一部手机，并选择具有尽可能多的“祖父”设备的手机，如果您决定在其中一家商店发布您的应用程序，这将减少测试。

# css - 文本选择突出显示太多

> ID：11703964
> 
> 赞同：14
> 
> 时间：2012-07-28T19:23:31.987
> 
> 标签：css, padding, textselection

由于填充，文本选择在任一侧突出显示太多。

![文本选择示例](../Images/da54b948af746ef30209e5150097910b.png)

[http://jsfiddle.net/JamesKyle/pA7BJ/](http://jsfiddle.net/JamesKyle/pA7BJ/)

如何使用 CSS 解决此问题？我尝试了很多不同的东西，但似乎都不起作用。（即尝试使用边距和其他属性）。

我已经多次遇到这个问题，但一直无法弄清楚。

如果有人能告诉我如何解决这个问题并解释如何计算文本选择突出显示，我将非常感激。

Firefox/Opera 中似乎没有出现这种情况（无法测试 IE），并且可能仅限于基于 webkit 的浏览器。

> **解决了：**
> 
> 添加`position: relative`到任何填充元素（这可能是 webkit 错误）。
> 
> [http://jsfiddle.net/JamesKyle/ejfsM/](http://jsfiddle.net/JamesKyle/ejfsM/)

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-07-28T19:40:16.717

这很奇怪。但是，更改 CSS 位置似乎可行，例如：

```
div.sizing-container {
    padding: 75px;
    position: relative;
} 
```

[http://jsfiddle.net/LJLdW/](http://jsfiddle.net/LJLdW/)

不知道在你的情况下是否可行。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-28T19:34:03.600

更改 to 的填充`div.sizing-container`将`75px 0px 75px 0px`解决此问题。由于此元素上的填充，突出显示如此之大。

然后你需要改变添加：

```
width: 93%;
padding-left: 3%; 
```

到身体。然后添加 10px 填充到`.sizing-container`

这为我解决了问题。这就是我能说的。

# javascript - 如何引用给定 ID 的“标题”？

> ID：11703969
> 
> 赞同：1
> 
> 时间：2012-07-28T19:23:54.213
> 
> 标签：javascript, jquery

```
var data = {};
data.event = [
{
    "id":"998",
    "title":"Foo",
    "thumb":"",
    "source":""
},
{
    "id":"999",
    "title":"Bar",
    "thumb":"",
    "source":""
}
] 
```

鉴于 id=998 我需要提取“标题”的值，我对正确的语法有点迷茫。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-28T19:28:42.063

您可以使用[$.each()](http://api.jquery.com/jQuery.each/)进行迭代并检查 ID 是否匹配，然后将 title 的值写入变量。

```
var title;

$.each(data.event, function(i,e) {
    if (this.id==='998') {
        title=this.title;
        return false;
    }
}); 
```

[小提琴](http://jsfiddle.net/cxdPK/3/)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-28T19:29:54.427

```
function titleFromId(id) {
   for (var i = 0, l = data.event.length; i < l; i += 1) {
      if (data.event[i].id === id) {
         return data.event[i].title;
      }
   }
}

var title = titleFromId('998'); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-28T19:25:24.433

您需要遍历`event`数组。对于每个项目，如果`item.id`是您要查找的值，则返回`item.title`。

类似于以下内容：

```
function findTitleById(desiredId) {
    var title, item;
    for (var i = data.event.length - 1; i >= 0; i--){
        item = data.event[i];
        if (item.id === desiredId) {
           title = item.title;
           break;
        }
    }
    return title;
} 
```

有更高级的方法可以做到这一点，但在尝试之前我会理解上述内容。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-28T19:29:29.637

您可以使用`$.each()`功能：

```
$.each(data.event, function(i, v){
    alert(v.id + " " + v.title)
}) 
```

[http://jsfiddle.net/NGALP/](http://jsfiddle.net/NGALP/)

# node.js - 带有nodejs的imagemagick不起作用

> ID：11703973
> 
> 赞同：7
> 
> 时间：2012-07-28T19:24:42.200
> 
> 标签：node.js, node-imagemagick

我正在尝试使用 node-imagemagick 库调整图像大小，但它不起作用。

我用来调整大小的代码是

```
im.resize({
      srcPath: __dirname+'originalimage.jpg',
      dstPath: __dirname+'resized.jpg',
      width: 50
    }, function(err, stdout, stderr){
      if (err) throw err;

    }); 
```

它抛出错误

```
Error: Command failed: Invalid Parameter - -set

    at ChildProcess.<anonymous> (E:\NodeJsDevelopment\node_modules\imagemagick\imagemagick.js:64:15)
    at ChildProcess.EventEmitter.emit (events.js:91:17)
    at Process._handle.onexit (child_process.js:674:10) 
```

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-07-29T14:57:12.420

在 Windows 上，您还需要安装 imagemagick exe。nodejs imagemagick 库只是 imagemagick exe 的包装器。因此，在安装 imagemagick exe 并转换和识别可执行文件在路径中之前，它不会起作用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-07-31T09:04:19.073

只是你的系统中没有安装 ImageMagick。如果您使用的是 Linux 发行版，您可以执行以下操作：

```
sudo apt-get install imagemagick 
```

# bash - 按深度排序文件（bash）

> ID：11703979
> 
> 赞同：5
> 
> 时间：2012-07-28T19:25:28.397
> 
> 标签：bash, sorting

bash 中是否有办法按深度顺序对目录中的文件进行排序，例如首先打印当前目录中的文件，然后打印子目录或子目录中的文件等等，总是从它们的深度来看。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2016-10-14T09:23:55.320

将 find 的“-printf”功能与排序结合使用。你自己看：

```
find . -printf "%d %p\n"|sort -n 
```

它生成一个深度排序列表（在第一列显示深度，在第二列显示文件路径）。这打印在我当前的目录中：

```
0 .
1 ./bin
1 ./log
1 ./templates
2 ./bin/cc_env
3 ./files/test/mail.txt 
```

如果要剥离第一列，我们可以使用 perl：

```
find . -printf "%d %p\n"|sort -n|perl -pe 's/^\d+\s//;' 
```

然后你就走了。perl 过滤器将删除所有前导数字。如果您想省略目录本身，请使用“-type f”参数：

```
find . -type f -printf "%d %p\n"|sort -n|perl -pe 's/^\d+\s//;' 
```

提示：研究 find 手册页以获得更多类似 printf %d 的技巧。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-07-30T05:17:46.860

最简单的解决方案：

```
$ echo * */* */*/* */*/*/* */*/*/*/* */*/*/*/*/*
a a/b a/b/c a/b/c/d1 a/b/c/d2 a/b/c/d1/e a/b/c/d2/e a/b/c/d1/e/f a/b/c/d2/e/f 
```

或者，在列中：

```
$ echo * */* */*/* */*/*/* */*/*/*/* */*/*/*/*/* |tr ' ' '\n'
a
a/b
a/b/c
a/b/c/d1
a/b/c/d2
a/b/c/d1/e
a/b/c/d2/e
a/b/c/d1/e/f
a/b/c/d2/e/f 
```

树的深度在示例中是硬编码的，但您可以编写一个小脚本并使其更灵活：

```
A="*"
while true
do
  B=$(echo $A)
  [ "$B" = "$A" ] && break
  echo $B
  A="$A/*"
done | tr ' ' '\n' 
```

使用示例：

```
$ A="*"; while true; do B=$(echo $A); [ "$B" = "$A" ] && break; echo $B; A="$A/*"; done | tr ' ' '\n'
a
a/b
a/b/c
a/b/c/d1
a/b/c/d2
a/b/c/d1/e
a/b/c/d2/e
a/b/c/d1/e/f
a/b/c/d2/e/f 
```

为树提供了示例：

```
$ mkdir -p a/b/c/d{1,2}/e/f
$ tree .
.
└── a
    └── b
        └── c
            ├── d1
            │   └── e
            │       └── f
            └── d2
                └── e
                    └── f

9 directories, 0 files 
```

查找/深度解决方案显然不起作用，因为`find`会一个接一个地显示子树。`-depth`键表示必须在哪个方向显示子树。但这并不意味着，当然，输出将按深度排序。

```
$ find .
.
./a
./a/b
./a/b/c
./a/b/c/d2
./a/b/c/d2/e
./a/b/c/d2/e/f
./a/b/c/d1
./a/b/c/d1/e
./a/b/c/d1/e/f

$ find . -depth
./a/b/c/d2/e/f
./a/b/c/d2/e
./a/b/c/d2
./a/b/c/d1/e/f
./a/b/c/d1/e
./a/b/c/d1
./a/b/c
./a/b
./a
. 
```

如您所见，两种情况下的答案都是不正确的（有和没有`-find`）。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-07-28T20:40:58.677

一种合理的技术将用于`find`生成文件路径名，然后处理文件名，以便路径中斜杠数量的计数在名称之前，然后您可以按斜杠计数（深度）然后按名称排序. 简单的解决方案假定您的文件名中没有换行符（其他空格和奇数字符无关紧要）。有趣/棘手的部分是找到一种干净的方法来计算给定行中斜线的数量。

```
find . -type f -print |
perl -n -e '$x = $_; $x =~ tr%/%%cd; print length($x), " $_";' |
sort -k 1n -k 2 |
sed 's/^[0-9][0-9]* //' 
```

可能有一种更紧凑的 Perl 编写方式，但它确实有效。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-28T21:04:43.133

使用函数递归遍历文件系统

**测试.sh：**

```
#!/bin/bash

function traverse() {
    find $1 -mindepth 1 -maxdepth 1 ! -type d -exec echo "$2"{} \; 
    for d in $(find $1 -mindepth 1 -maxdepth 1 -type d ! -name ".")
    do
        # if you just need files comment out next line
        echo "$2$d"
        traverse "$d" "${2}  "
    done
}

traverse $1 
```

**用法：**
`./test.sh dir`
给出输出：

```
./test.sh
./testA
  ./testA/dat2
  ./testA/dat1
  ./testA/testB
    ./testA/testB/dat4
./testC
  ./testC/dat3 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-28T19:27:17.973

使用`find`命令：

```
find . -depth 
```

来自`man find`：

> -depth 在目录本身之前处理每个目录的内容。

# .net - 使用反射添加事件处理程序时引发 TargetException

> ID：11703991
> 
> 赞同：3
> 
> 时间：2012-07-28T19:27:37.423
> 
> 标签：.net, reflection, asynchronous, delegates, backgroundworker

我想在 WebClient 对象回调时调用 BackgroundWorker 线程。

我在此 BackgroundWorker 上运行的目标方法不固定，因此我需要以编程方式定位指定的方法。

为实现这一点：传递给 WebClient 的事件 args 对象的属性之一详细说明了应获取的方法（e.UserState.ToString()）。该方法*正在*按预期获得。

然后我希望做的是将此获得的方法添加为 BackgroundWorker.DoWork 事件的委托。

```
// this line gets the targeted delegate method from the method name
var method = GetType().GetMethod(e.UserState.ToString(), BindingFlags.NonPublic | BindingFlags.Instance);
if (method != null)
{
    // get the DoWork delegate on the BackgroundWorker object
    var eventDoWork = _bw.GetType().GetEvent("DoWork", BindingFlags.Public | BindingFlags.Instance);
    var tDelegate = eventDoWork.EventHandlerType;
    var d = Delegate.CreateDelegate(tDelegate, this, method);

    // add the targeted method as a handler for the DoWork event
    var addHandler = eventDoWork.GetAddMethod(false);
    Object[] addHandlerArgs = { d };
    addHandler.Invoke(this, addHandlerArgs);

    // now invoke the targeted method on the BackgroundWorker thread
    if (_bw.IsBusy != true)
    {
        _bw.RunWorkerAsync(e);
    }
} 
```

出于某种原因，在线上抛出了 TargetException

```
addHandler.Invoke(this, addHandlerArgs); 
```

异常消息是

> 对象与目标类型不匹配。

我正在构建代码的方法的签名是

```
private void GotQueueAsync(object sender, DoWorkEventArgs e) 
```

这与 BackgroundWorker.DoWork 事件处理程序的签名相匹配。

谁能向我解释我做错了什么或为什么我无法以编程方式添加此处理程序方法。

[如果重要，这是一个 WP7 应用程序。]

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-28T19:35:54.763

您传递`this`错误：

```
addHandler.Invoke(this, addHandlerArgs); 
```

带有事件的对象不是`this`（尽管`this`有处理程序） - 它应该是`_bw`：

```
addHandler.Invoke(_bw, addHandlerArgs); 
```

不过，更简单地说：

```
var d = (DoWorkEventHandler)Delegate.CreateDelegate(
    typeof(DoWorkEventHandler), this, method);
_bw.DoWork += d; 
```

或者至少使用`EventInfo.AddEventHandler`.

# javascript - 从函数中将多个参数添加到内置函数中

> ID：11703993
> 
> 赞同：0
> 
> 时间：2012-07-28T19:27:41.250
> 
> 标签：javascript, arguments, fromcharcode

我正在尝试添加 String.fromCharCode()。并将其添加到一个重命名它的函数中，如下所示：

```
function from() {
    var ar = arguments.length;
    var argumentss = '';
    for (var i = 0; i < ar; i++) {
        var a = argumentss + '\'' + arguments[i];
           if (i == ar - 1) {
               argumentss = a + '\''
           } else {
               argumentss = a + '\', '
           }
    }
    var arg = eval(argumentss);
    return String.fromCharCode(arg)
} 
```

我需要这样做，所以不要说没有理由这样做，因为我实际使用它的方式是有原因的。

我想要做的是让它成为可能：

```
from(65,66,67) //returns ABC 
```

不做`function from(a,b,c)`

由于使用 fromCharCode，您可以根据需要执行任意数量的参数。如果有自定义的 fromCharCode 函数，它也会很有用。谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-28T19:42:36.493

这是你想要的吗？

```
function from() {
    var result = '';
    for (var i = 0; i < arguments.length; i++) {
       result += String.fromCharCode(arguments[i]);
    }
    return result;
}

from(65,66,67)
//result ->  ABC 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-28T19:36:33.773

这是否解决了您的问题？在开始时调用一次：

```
String.from = String.fromCharCode.bind(String) 
```

并稍后使用：

```
String.from(65, 66, 67)  //"ABC" 
```

使用内置[`String.fromCharCode()`](https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/String/fromCharCode).

# php - 新浪微博 API PHP 演示不起作用？

> ID：11703999
> 
> 赞同：1
> 
> 时间：2012-07-28T19:28:38.093
> 
> 标签：php, oauth-2.0, social-networking, weibo, sinaweibo

我正在尝试使用新浪微博的 API，但无法使用 oAuth2 进行身份验证。[我从http://code.google.com/p/libweibo/](http://code.google.com/p/libweibo/)下载了 SDK V2 的演示， 但是当我尝试它时，我得到的是：

```
array
  'oauth_token' => string '5e24ba793881fb7d4xxxxx' 
  'oauth_token_secret' => string '215ccbf8009f0f03a7831axxxxxx'
  'user_id' => string '22191xxxxx' 
```

根据文档，我应该获得一个具有到期日期的访问令牌，例如：

> {“Access_token”：“SlAV32hkKG”，“expires_in”：3600}

当我尝试使用 oauth_token 时，它会抱怨说它不是有效的令牌。

有谁知道我做错了什么？

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-01T04:26:47.997

虽然有参数`auth_token`和`oauth_token_secret`，但它应该是 OAuth 1 请求令牌，而不是 OAuth 2.0 访问令牌。

我不知道 libweibo，你运行的演示是否正确？