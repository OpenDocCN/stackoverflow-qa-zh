# StackOverflow 问答 10577000-10577999

# oracle - 如何识别 Oracle 死锁中涉及的行？

> ID：10577000
> 
> 赞同：7
> 
> 时间：2012-05-14T02:47:12.483
> 
> 标签：oracle, deadlock

当 Oracle 检测到死锁时，会写入如下跟踪文件：

```
*** SESSION ID:(56.27081) 2012-05-14 08:16:28.013
DEADLOCK DETECTED ( ORA-00060 )
[Transaction Deadlock]
The following deadlock is not an ORACLE error. It is a
deadlock due to user error in the design of an application
or from issuing incorrect ad-hoc SQL. The following
information may aid in determining the deadlock: Deadlock graph:
                       ---------Blocker(s)--------  ---------Waiter(s)---------
Resource Name          process session holds waits  process session holds waits
TX-0010002c-002719b5       146      56     X            164      44           X
TX-000f002a-002edd1e       164      44     X            146      56           X
session 56: DID 0001-0092-00050D0D       session 44: DID 0001-00A4-0002E3C2
session 44: DID 0001-00A4-0002E3C2       session 56: DID 0001-0092-00050D0D
Rows waited on:
Session 44: obj - rowid = 00035157 - AAA1FXAAxAAASfLAAn
  (dictionary objn - 217431, file - 49, block - 75723, slot - 39)
Session 56: obj - rowid = 00035157 - AAA1FXAAsAACjuiAAP
  (dictionary objn - 217431, file - 44, block - 670626, slot - 15) 
```

如何根据以上信息确定涉及的行，以协助调试应用程序？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-05-14T03:44:10.553

我找到了答案：

1.  后面的数字`dictionary objn`可用于从 DBA_objects 中进行选择。

    ```
    SELECT owner, object_name, object_type 
    FROM dba_objects 
    WHERE object_id = 217431; 
    ```

2.  识别表后，可以使用 rowid 找到该行：

    ```
    SELECT * 
    FROM table_found_above 
    WHERE rowid = 'AAA1FXAAxAAASfLAAn'; 
    ```

如果跟踪文件显示没有“等待的行”，则此技术将不起作用。该问题可能是由于未编制索引的外键造成的。

# c - c有一些方便的ORM库框架吗？

> ID：10577006
> 
> 赞同：7
> 
> 时间：2012-05-14T02:48:44.747
> 
> 标签：c, database, orm

我最近用 c 语言使用 sqlite3。谁能告诉我一些方便的 C 的 ORM 吗？是否有必要为我自己的项目开发 ORM 机制？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-14T05:38:51.877

对 ORM 的需求向我表明，您有某种业务/领域对象模型，您想映射到数据库。

如果是这种情况，那么让我感到震惊的是，您正在尝试使用最适合系统编程 (C) 的语言编写业务应用程序。您可能要考虑这是否是一个好的架构策略。

此外，我认为 ORM 不太可能适合以下语言：

1.  本身不是面向对象的
2.  对元编程/反射没有太多支持，这往往是许多 ORM 方案的核心

最后，有很多人认为 ORM 在任何情况下都是一种反模式。（[例子](http://seldo.com/weblog/2011/08/11/orm_is_an_antipattern)，[例子](http://dkalemis.wordpress.com/2011/06/19/the-orm-anti-pattern-and-other-solutions/)，[例子](http://www.infoq.com/presentations/Simple-Made-Easy)）

总的来说，我的建议是：

*   如果您打算继续使用 C，请完全避免使用 ORM
*   切换到 ORM 至少得到很好支持并符合范式的语言/平台（最明显的是 Java）

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-03-26T18:58:18.093

我把[这个库](https://bitbucket.org/isti/c-orm/wiki/Home)写成“C 的 ORM”。

示例代码如下所示：

```
typedef struct person {
  int id;
  char *name;
} person;

void find_by_name(isti_db *db, const char *text, person** result) {
  corm_person_select *s;
  corm_person_select_alloc(&s, db);
  s->name(s, "like", text)->_go_one(s, result);  // populate result from the database
  s->_free(s, 0);  // in "real" code, 0 is a chained status value
} 
```

不幸的是，它并没有在任何地方使用（据我所知），它包含了很多经验丰富的 c 程序员可能会觉得奇怪的想法。但它并没有被放弃——我仍然对这个问题感兴趣，并希望在某个时候继续研究它。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-14T05:12:58.770

一个简短的谷歌搜索想出了这个：[http ://ales.jikos.cz/smorm/](http://ales.jikos.cz/smorm/)

我从来没有用过，所以不要怪我，如果它重新格式化你所有的硬盘驱动器，让你的冰箱温暖到足以破坏你的牛奶，但如果你真的不想写，看起来总比没有好查询。

# java - 这不是工厂模式吗？

> ID：10577008
> 
> 赞同：0
> 
> 时间：2012-05-14T02:48:51.843
> 
> 标签：java, factory-pattern

我正在和老师争论这是否是工厂模式。我可以得到一些你们的意见吗？

```
public class UrlFactory {
    private static boolean testMode;
    private static long testDate;

    public static URLConnection fetchConnection(String url) 
                                              throws IOException
    {
        URL address = new URL(url);

        if(testMode)
            return new MockURLConnection(address, testDate);
        return address.openConnection();
    }

    public static void SetTestMode(long testDate)
    {
        UrlFactory.testMode = true;
        UrlFactory.testDate = testDate;
    }

    public static void UnSetTestMode()
    {
        UrlFactory.testMode = false;
    }
} 
```

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-05-14T02:53:58.970

它在结构上看起来类似于工厂，但我想说它忽略了工厂模式的要点。理想情况下，工厂是可实例化和可覆盖的（例如，具有用于创建的虚拟方法）。我会推荐一个带有虚拟方法`UrlFactory`的非静态类的设计。`fetchConnection`然后，您可以拥有一个派生类`MockUrlFactory`，该类重写`fetchConnection`以返回一个`MockURLConnection`.

例子：

```
public class UrlFactory {
    public URLConnection fetchConnection(String url)
        throws IOException {
        URL address = new URL(url);
        return address.openConnection();
    }
}

public class MockUrlFactory extends UrlFactory {
    private long testDate;

    public MockUrlFactory(long testDate) {
        this.testDate = testDate;
    }

    public URLConnection fetchConnection(String url)
        throws IOException {
        URL address = new URL(url);
        return new MockURLConnection(address, testDate);
    }
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-14T03:04:29.183

正如 bobbymcr 所指出的，肯定有更好、更面向对象的方式来实现工厂模式。

但是，这并不排除您的示例本身就是工厂模式的示例。

请记住，术语“设计模式”本身有点难以定义。这意味着大多数“设计模式”也很难用具体的术语来定义。它们通常以非常笼统的术语表述，实现细节留给开发人员。事实上，这种普遍性是内置在设计模式的定义中的：

> 这种语言的元素是称为模式的实体。每个模式都描述了一个在我们的环境中反复出现的问题，然后描述了该问题解决方案的核心，以这样一种方式，您可以使用该解决方案一百万次，***而无需两次使用相同的方式***.

多次定义的松散使得对设计模式的讨论本质上是准宗教的，并且与任何宗教一样，有许多狂热者。然而，我遇到的大多数狂热者都提出了值得考虑的可靠观点，即使你没有完全坚持信仰。

话虽如此，我的宗教立场与 bobbymcr 相同。工厂方法供子类覆盖。

# c++ - 从远程服务器接收数据

> ID：10577012
> 
> 赞同：1
> 
> 时间：2012-05-14T02:49:27.770
> 
> 标签：c++, http, sockets, proxy, remote-server

我在从远程服务器接收数据时遇到问题。似乎我可以向[http://www.google.com](http://www.google.com)之类的主机发送 HTTP 请求，但我无法得到回复。我正在向主机发送格式如下的 HTTP 1.0 请求：

GET / HTTP/1.0
主机：www.google.com
连接：关闭

这是代理代码的一部分：

```
 //Parse Request Buffer
    HttpRequest req;
    req.ParseRequest(request.c_str(), request.length());

    //Format Data to be Sent:
    req.AddHeader ("Connection", "close");  // add connection close headers
    req.SetVersion ("1.0");                 // set http 1.0 flag
    char *requestBuf = new char [req.GetTotalLength()];
    req.FormatRequest(requestBuf);

    //Get host IP by name
    struct hostent *host;
    host = gethostbyname(req.GetHost().c_str());

    //Setup remote address structure
    struct sockaddr_in remoteAddr;
    remoteAddr.sin_family = AF_INET;     
    remoteAddr.sin_port = htons(req.GetPort());   
    remoteAddr.sin_addr = *((struct in_addr *)host->h_addr);

    //create new socket for remote server
    int remoteSock = socket(AF_INET, SOCK_STREAM, 0);
    if(remoteSock < 0)
    {
            perror("Socket Error");
            //return -1;
    }

    //connecting to remote server
    if(connect(remoteSock, (struct sockaddr *)&remoteAddr, sizeof(remoteAddr)) < 0)
    {
            perror("Connect Error");
            //return -1;
    }

    cout.flush() << requestBuf << endl;
    //send request to remote server
    if(send(remoteSock, requestBuf, sizeof(requestBuf), 0) < 0)
    {
            perror("Write Error");
            //return -1;
    }

    //receive reply from server
    char *recBuf = new char [1024];
    int bufSize = 1024;
    int readSize;

    while(1)
    {
            readSize = read(remoteSock, recBuf, bufSize);   //Read from Remote Server
            cout.flush() << recBuf << endl;
            if(readSize <= 0)       //If the requestBuf not filled, nothing left to send to client
                    break;
            write(clientSock, recBuf, readSize);            //write reply to Client

    }

    close(remoteSock); 
```

recBuf 的 cout.flush() 什么也不输出。
关于发生了什么的任何想法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-14T14:08:45.603

在这段代码中：

```
if(send(remoteSock, requestBuf, sizeof(requestBuf), 0) < 0) 
```

您只向远程端发送（可能）4 或 8 个字节。`requestBuf`被声明为`char *`，它是一个指针类型。而不是`sizeof(requestBuf)`，您需要传递您构建的请求的实际长度，这似乎是`req.GetTotalLength()`您的情况。

# c++ - 如何管理不断增长的 C++ 项目

> ID：10577015
> 
> 赞同：5
> 
> 时间：2012-05-14T02:49:52.417
> 
> 标签：c++, netbeans, scons

我想知道我应该如何管理一个不断增长的 C++ 项目。现在，我正在使用 Netbeans 开发一个项目，生成 makefile 是一项繁琐的工作。这个项目太大了，我决定把它分成几个部分。这样做的最佳方法是什么？

我正在尝试使用 Scons 作为我的构建系统。我已经取得了一些成功，但我是否应该在每次追加或删除文件时编辑构建脚本。它太沉闷了。

所以我需要你的建议。

PS对了，google chrome这样的大项目是怎么做到的呢？是否每个人都使用某种 IDE 来构建仅为软件分发而生成的脚本？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-14T05:58:16.687

我还将 Netbeans 用于 C++ 并使用 SCons 进行编译。我使用的 jVi Netbeans 插件真的很好用。

由于某种原因，Netbeans Python 插件不再是官方的，我根本不明白。你仍然可以得到它，它确实使编辑 SCons 构建脚本成为一种很好的体验。即使 Netbeans 没有 SCons 插件（还没有？），您仍然可以配置其构建命令来执行 SCons。

至于由 IDE 自动维护 SCons 脚本，我也不这样做，我是手动进行的。但它不像我必须每天处理这个问题，所以我不认为这很重要，尤其是考虑到脚本的易读性。

这是 SCons 中的构建脚本，其作用与前面提到的 CMake 相同：

```
env = Environment()
env.EnsurePythonVersion(2, 5)
env.EnsureSConsVersion(2, 1)

libTarget = env.SharedLibrary(target = 'foo', source = ['a.cpp', 'b.cpp', 'c.pp'])
env.Program(target = 'bar', source = ['bar.cpp', libTarget]) 
```

SCons Glob() 函数是一个不错的选择，但我倾向于回避*自动*构建目录中的所有文件。列出要构建的子目录也是如此。我已经为此烧了足够多的时间，并且更喜欢明确指定要构建的文件/目录。

如果您听到有关 SCons 比其他替代品慢的传言，[SCons GoFastButton](http://www.scons.org/wiki/GoFastButton)有一些可以提供帮助的指针。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-05-14T03:05:51.080

大多数大型项目都坚持使用自动为它们处理所有混乱细节的构建系统。我是 CMake 的忠实粉丝（这是 KDE 用于其所有组件的），但 scons 是另一个受欢迎的选择。我的编辑器 (KDevelop) 应该自己处理 CMake 项目，但我仍然自己编辑构建脚本，因为它并不难。

我建议你好好学习一种工具并坚持使用它（大量文档可用于您感兴趣的任何工具）。如果您还没有考虑过版本控制，请确保您还研究过版本控制（我对 git 情有独钟，但 Mercurial 和 Subversion 也是非常受欢迎的选择）。

* * *

一个简单的 CMake 示例：

```
project("My Awesome Project" CXX)
cmake_minimum_required(VERSION 2.8)
add_library(foo SHARED a.cpp b.cpp c.cpp) #we'll build an so file
add_executable(bar bar.cpp)
target_link_libraries(bar foo) #link bar to foo 
```

这显然是一个微不足道的案例，但是很容易根据需要进行管理和扩展。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-14T03:15:43.147

> 我正在尝试使用 Scons 作为构建系统。我在这方面取得了一些成功，但每次追加或删除文件时我都应该编辑构建脚本。它太沉闷了。

根据文件的组织方式，您可以使用例如 Scon 的`Glob()`功能将源文件作为列表获取，而不必单独列出所有文件。例如，要将所有 c++ 源文件构建为可执行文件，您可以执行以下操作：

```
 Program('program', Glob('*.cpp')) 
```

你可以在 CMake 中使用它的命令来做同样的事情。

而且，如果你使用 SCons，因为它是 Python，你可以编写任意 Python 代码来制作你的源文件列表。

您还可以将文件组织到多个文件夹中，并拥有主构建脚本可以调用的辅助 SCons（或 CMakeList.txt）构建文件。

# ios - 需求加载一个 UIScrollView

> ID：10577020
> 
> 赞同：2
> 
> 时间：2012-05-14T02:50:27.287
> 
> 标签：ios, cocoa-touch, uiscrollview, uipagecontrol

我想使用带有分页的 UIScrollView 实现一个应用程序，类似于苹果天气应用程序。

但我有点担心性能。我一直在使用的示例实现加载所有视图，然后应用程序启动。在某一点之后，一旦证明这很慢？

我想知道苹果的相机胶卷是如何处理这个问题的，用户可能有 100 多张可以滚动浏览的照片。我是否应该尝试找出一种仅在需要时才构建视图的方法？或者也许有一种方法可以从 UITableView 复制出列可重用单元技术，仅用于水平视图加载，因为每个视图将具有相同的布局。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-14T04:19:02.890

一个非常有效的解决方案是确保尽可能重用任何视图。如果你打算简单地显示图像，你可以使用 UIScrollView 的子类，并在 layoutSubviews 中布局这些可重用的视图。在这里，您可以检测哪些视图可见和不可见，并根据需要创建子视图。

一个示例出队函数可能如下所示：

```
- (UIImageView *)dequeueReusableTileWithFrame:(CGRect) frame andImage:(UIImage *) image
{
    UIImageView *tile = [reusableTiles anyObject];
    if (tile) {
        [reusableTiles removeObject:tile];
        tile.frame = frame;
    }
    else {
        tile = [[UIImageView alloc] initWithFrame:frame];
    }
    tile.image = image;
    return tile;
 } 
```

reusableTiles 只是 NSMutableSet 类型的 iVar。然后，您可以使用它来加载获取任何当前屏幕外的图像视图，并快速轻松地将它们带回视图。

您的 layoutSubviews 可能类似于：

```
- (void)layoutSubviews {
     [super layoutSubviews];

     CGRect visibleBounds = [self bounds];
     CGPoint contentArea = [self contentOffset];

     //recycle all tiles that are not visible
     for (GSVLineTileView *tile in [self subviews]) {

         if  (! CGRectIntersectsRect([tile frame], visibleBounds)) {
             [reusableTiles addObject:tile];
             [tile removeFromSuperview];
         }
     }

     int col = firstVisibleColumn = floorf(CGRectGetMinX(visibleBounds)/tileSize.width);
     lastVisibleColumn = floorf(CGRectGetMaxX(visibleBounds)/tileSize.width)    ;
     int row = firstVisibleRow = floorf(CGRectGetMinY(visibleBounds)/tileSize.height);
     lastVisibleRow = floorf(CGRectGetMaxY(visibleBounds)/tileSize.height);

     while(row <= lastVisibleRow)
     {
         col = firstVisibleColumn;
         while (col <= lastVisibleColumn) 
         {
             if(row < firstDisplayedRow || row > lastDisplayedRow || col < firstDisplayedColumn || col >lastDisplayedColumn)
             {

                 UImageView* tile = [self dequeueReusableTileWithFrame:CGRectMake(tileSize.width*col, tileSize.height*row, tileSize.width, tileSize.height) andImage:YourImage];
                 [self addSubview:tile];
             }
             ++col;
         }
         ++row;
     }

     firstDisplayedColumn = firstVisibleColumn;
     lastDisplayedColumn = lastVisibleColumn;
     firstDisplayedRow = firstVisibleRow;
     lastDisplayedRow = lastVisibleRow;
} 
```

当我使用一个特别大的滚动视图区域时，我使用了与此类似的东西来平铺一行区域，它似乎工作得很好。对于我在为图像视图而不是我的自定义 tileView 类更新此内容时可能创建的任何拼写错误，我深表歉意。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-05-14T03:35:02.363

到目前为止，最有效的解决方案（这在许多照片浏览应用程序中使用，例如 Facebook，也可能是本地照片应用程序）将是按需加载内容，就像 UITableView 所做的那样。Apple 的[StreetScroller](https://developer.apple.com/library/ios/#samplecode/StreetScroller/Introduction/Intro.html#//apple_ref/doc/uid/DTS40011102)示例项目应该让您走上正轨。

# jquery - jquery click() 没有一致地调用

> ID：10577021
> 
> 赞同：0
> 
> 时间：2012-05-14T02:50:51.817
> 
> 标签：jquery, click

我要疯了。我有一系列绑定了点击事件的 div。他们中的大多数都按预期工作，但其中一些人什么都不做。它们之间的代码没有区别（无论是生成它们的 javascript 还是我在元素检查器中看到的结果 HTML）。它们都在 Safari 中工作，但在 Chrome 中我有时会失败。在下面的代码中，即使是“PLAY”也从未写入控制台。

很难共享代码，因为它是这么大的东西的一部分，但它基本上如下所示。首先是一些从 javascript 写入文档的 HTML：

```
<div class='thumbnail' id='p-"+ip+"'></div> 
```

结果如下：

```
<div class='thumbnail' id='p-220'></div> 
```

然后我将 click() 绑定到它上面，如下所示：

```
 playHandler(ip);

      function playHandler(ip) {
          $("#p-"+ip).click(function() 
            console.log("PLAY");
            popTranscription.listen("canplayall",function() { this.currentTime(ip) });
            popTranscription.play();
            cued = true;
          });
      } 
```

大多数情况下，单击 div 会触发绑定函数。有时不是。总是相同的特定缩略图类 div 不起作用（例如，我在文档中有一个很长的列表，每个都由那个 'ip' 变量区分。即 ip 1、2、3 将始终有效，而 4 将始终有效不行）。

抱歉，我没有更多要展示的内容，但是有人对要查找的内容有任何想法吗？我正在失去它。我尝试使用 bind() 而不是 click()。我尝试了 onclick 而不是 jquery，但这也给了我奇怪的不一致行为（有时它找到了函数，有时没有）。

更新：问题与页面上存在的重复 ID 有关。我在 ID 字符串中添加了一些唯一标识符，问题就解决了。谢谢你的领导！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-14T06:05:42.547

试试这个方法

```
 $(".thumbnail").click(function() {
            var idchunk = $(this).attr('id');
            var ip = idchunk.split('-');
            console.log("PLAY");
            popTranscription.listen("canplayall",function() { this.currentTime(ip[1]) });
            popTranscription.play();
            cued = true;
          }); 
```

# jquery - 如何添加加载页面后消失的加载文本

> ID：10577027
> 
> 赞同：0
> 
> 时间：2012-05-14T02:52:15.240
> 
> 标签：jquery, ajax, load

我有一个通过 .load() 加载视频的页面。我想添加页面加载后消失的加载文本。请有人告诉我如何做到这一点，我不知道如何判断页面是否已完成加载，所以我不知道何时删除加载程序。

JS

```
 // define var video
var video = $('div.video');

// define click function
$('a').on('click', function( e ) {

    // define var link
    var link = $(this).attr('href');

    // Add loading text
    $('.wrap').append('<span class="load">Loading text...</span>');

    // load content into video
    video.load( link + ' .content' );   

    // prevent default href action
    e.preventDefault();

}); 
```

谢谢您的帮助。干杯

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-14T02:54:40.653

这个应该可以的。

```
video.load( link + ' .content' , function() {
    $('.wrap .load').remove();
}); 
```

# java - 如何检索不受信任的 SSL 服务器证书以查看和信任它？

> ID：10577029
> 
> 赞同：6
> 
> 时间：2012-05-14T02:52:32.917
> 
> 标签：java, ssl, ssl-certificate

我的问题：

我想连接到可能使用 Java 默认不信任的证书（因为它们是自签名）。

所需的工作流程是尝试连接，检索证书信息，将其呈现给用户，如果他接受它，则将其添加到信任库，以便继续信任它。

我被困在检索证书上。我有代码（见文章末尾），这些代码是我从这里和从回答有关 java SSL 的问题所指向的站点中抄来的。`SSLSocket`该代码只是创建一个`Certificate[]`. 当我使用已经可信任的证书连接到服务器时，代码可以正常工作。但是当我使用自签名证书连接到服务器时，我得到了通常的结果：

```
Exception in thread "main" javax.net.ssl.SSLHandshakeException: 
   sun.security.validator.ValidatorException: PKIX path building failed:
   sun.security.provider.certpath.SunCertPathBuilderException: unable to 
   find valid certification path to requested target
        at sun.security.ssl.Alerts.getSSLException(Unknown Source)
        at sun.security.ssl.SSLSocketImpl.fatal(Unknown Source)
        at sun.security.ssl.Handshaker.fatalSE(Unknown Source)
        at sun.security.ssl.Handshaker.fatalSE(Unknown Source)
        at sun.security.ssl.ClientHandshaker.serverCertificate(Unknown Source)
        [etc] 
```

如果我运行，`-Djavax.net.debug=all`我会看到 JVM 确实检索了自签名证书，但会在到达返回证书的地步之前破坏连接以使用不受信任的证书。

好像是先有鸡还是先有蛋的问题。它不会让我看到证书，因为它们不受信任。但我需要查看证书才能将它们添加到信任库中，以便它们受到信任。你如何摆脱这种状态？

例如，如果我将程序运行为：

```
java SSLTest www.google.com 443 
```

我得到了 Google 正在使用的证书的打印输出。但是如果我运行它

```
java SSLTest my.imap.server 993 
```

我得到了上面提到的异常。

编码：

```
import java.io.InputStream;
import java.io.OutputStream;
import java.security.cert.*;
import javax.net.SocketFactory;
import javax.net.ssl.*;

public class SSLTest
{
    public static void main(String[] args) throws Exception {
        if (args.length != 2) {
            System.err.println("Usage: SSLTest host port");
            return;
        }

        String host = args[0];
        int port = Integer.parseInt(args[1]);

        SocketFactory factory = SSLSocketFactory.getDefault();
        SSLSocket socket = (SSLSocket) factory.createSocket(host, port);

        socket.startHandshake();

        Certificate[] certs = socket.getSession().getPeerCertificates();

        System.out.println("Certs retrieved: " + certs.length);
        for (Certificate cert : certs) {
            System.out.println("Certificate is: " + cert);
            if(cert instanceof X509Certificate) {
                try {
                    ( (X509Certificate) cert).checkValidity();
                    System.out.println("Certificate is active for current date");
                } catch(CertificateExpiredException cee) {
                    System.out.println("Certificate is expired");
                }
            }
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2016-05-06T07:37:25.713

您可以执行此操作，实现一个`TrustManager`接受所有证书的临时文件和一个`HostnameVerifier`验证所有名称的临时文件（显然，您必须使用它们来检索证书而不是发送私人数据）。

以下代码从任意 https url 检索证书并将它们保存到文件中：

```
URL url = new URL("https://<yoururl>");

SSLContext sslCtx = SSLContext.getInstance("TLS");
sslCtx.init(null, new TrustManager[]{ new X509TrustManager() {

    private X509Certificate[] accepted;

    @Override
    public void checkClientTrusted(X509Certificate[] xcs, String string) throws CertificateException {
    }

    @Override
    public void checkServerTrusted(X509Certificate[] xcs, String string) throws CertificateException {
        accepted = xcs;
    }

    @Override
    public X509Certificate[] getAcceptedIssuers() {
        return accepted;
    }
}}, null);

HttpsURLConnection connection = (HttpsURLConnection) url.openConnection();

connection.setHostnameVerifier(new HostnameVerifier() {

    @Override
    public boolean verify(String string, SSLSession ssls) {
        return true;
    }
});

connection.setSSLSocketFactory(sslCtx.getSocketFactory());

if (connection.getResponseCode() == 200) {
    Certificate[] certificates = connection.getServerCertificates();
    for (int i = 0; i < certificates.length; i++) {
        Certificate certificate = certificates[i];
        File file = new File("/tmp/newcert_" + i + ".crt");
        byte[] buf = certificate.getEncoded();

        FileOutputStream os = new FileOutputStream(file);
        os.write(buf);
        os.close();
    }
}

connection.disconnect(); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-14T07:05:43.120

请参阅[Andreas Sterbenz 的 InstallCert 实用程序的副本](https://forums.oracle.com/forums/thread.jspa?messageID=9797465&#9797465)。

# c# - 找不到基于速率的性能计数器示例

> ID：10577032
> 
> 赞同：1
> 
> 时间：2012-05-14T02:53:10.343
> 
> 标签：c#, .net, perfmon, performancecounter

我们想在我们的应用程序中添加一些性能计数器，它们中的大多数都需要反映特定的速率，例如每小时的安全异常次数、每小时的用户登录次数、每 15 分钟的应用程序异常次数。所有在线示例都显示如何每秒执行此操作，但我们希望能够在自定义时间段（小时、分钟等）内执行此操作。

如果有人可以展示一些如何做到这一点的代码示例，那就太好了。据我了解，我们需要创建两个计数器：一个用于存储总数，一个用于存储时间段。

任何人都可以分享一些如何创建基于速率的性能计数器的代码吗？

# macos - 我需要一种无需在 Mac 上安装即可运行 Haskell 代码的方法

> ID：10577033
> 
> 赞同：4
> 
> 时间：2012-05-14T02:53:23.603
> 
> 标签：macos, haskell, osx-snow-leopard, haskell-platform, non-admin

我喜欢在 Haskell 中开发，但目前面临挑战。在我的教育地点，我的帐户没有管理权限。我想在那里调试/测试。我需要一种方法来运行 Haskell 代码，而无需安装`haskell-platform`或`ghci`其他任何需要管理权限级别的东西。例如，将运行 haskell 代码（当然限于不包括文件访问）或 java 实用程序（或独立`.app`的，尽管由于“家长控制”的性质而首选 java）的网站，或其他我没有想到。Ruby 或 Python 中的源代码或编译的 Java、Flash 和源代码优于本机代码。这是在 Mac OS X 10.6 上，供参考。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-05-14T02:58:55.003

您可以在没有管理员权限的情况下安装 GHC，但您必须从源代码构建。查看[MacOS X 上的构建以](http://hackage.haskell.org/trac/ghc/wiki/Building/MacOSX)了解更多详细信息。

本质上，与任何其他开源项目一样，您可以编译代码并将其安装在文件系统上的任何位置，例如安装到主文件夹中的文件夹中（为此我经常使用 ~/.local 文件夹）。

正如链接页面所提到的，您还可以使用[MacPorts](http://www.macports.org/)并将其安装到您可以写入的任何地方。安装 MacPorts 后，您可以安装 GHC。

**编辑**

正如 Carl 在下面的评论中指出的那样，您不需要从源代码构建。只需从[http://www.haskell.org/ghc/download_ghc_7_4_1#binaries](http://www.haskell.org/ghc/download_ghc_7_4_1#binaries)获取二进制压缩包。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-14T03:18:51.750

除了所有其他想法之外，几家公司还会以每小时几美分的价格向您租用虚拟（云）Linux 服务器。你有这些，可以安装任何你想要的，然后冻结图像直到你再次需要它。

通常，如果您可以完成一项工作，这可能比本地解决方案没有优势，但可能的额外好处是您的工作可以保留在一台“计算机”上，您可以在坐在任何种类的现代 PC 前访问该计算机可能在给定的一天对您可用。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-05-14T12:29:39.340

不仅 Haskell 的替代方案是[http://ideone.com/](http://ideone.com/)

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-05-14T08:31:05.480

对于网站选项，[TryHaskell](http://tryhaskell.org)几乎不会削减它，这是有限的。

[codepad](http://codepad.org/) OTOH 更自由，应该更有用。

但老实说，显然，bindist 选项是最好的选项！

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2013-03-31T08:26:37.707

试试[http://hiji.tinyrocket.se/](http://hiji.tinyrocket.se/)它是一个使用 javascript 编写的 haskell 解释器。

[http://ghc.io/](http://ghc.io/) GHC.IO 是 Haskell 交互式解释器 ghci 的一个版本，它在 Web 浏览器中在线运行。

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2012-05-14T03:09:37.957

如果你真的不能安装任何东西，那么有

[http://tryhaskell.org/](http://tryhaskell.org/) -- 和 GHCi 一样，但是你不能加载模块，这意味着你不仅不能使用很多标准函数（比如 Data.List 中的函数），而且你可以'不要使用某些语言特性（如用户定义的代数数据类型）。

我还记得一个 hpaste 风格的网站，它执行它的代码——并允许你拥有私人粘贴——但我现在不记得了。**编辑：**我在想[http://codepad.org/——](http://codepad.org/)谢谢@Mog

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2012-05-14T03:09:32.090

在[http://tryhaskell.org/](http://tryhaskell.org/)上有一个基于 Web 的 Haskell 解释器。但是，它可能无法为您的要求提供足够的功能。

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2017-06-03T21:25:18.437

您只需要安装自制软件，如果您在主目录中安装，则无需 root 权限即可。然后你可以`brew install cabal-install` 自动安装cabal和ghc，或者`brew install stack`安装stack。

# iphone - 这个 iOS UI 元素叫什么，如何制作？

> ID：10577034
> 
> 赞同：0
> 
> 时间：2012-05-14T02:53:54.557
> 
> 标签：iphone, ios, user-interface, uislider, uiprogressview

在下图中，我绘制了我试图弄清楚如何制作的元素。它是 UISlider 和 UIProgressview 之间的交叉。它具有 UIProgressview 的样式和外观，但具有 ...slider 类似于 UISlider。我将如何定期制作其中之一？几乎每个音乐播放器都有它们... :|

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-14T03:02:19.403

您是在谈论音量滑块还是轨道进度？

如果是音量滑块，它只是普通的 UISlider。

如果你在谈论轨道进度，那么它也是一个 UISlider。不同之处在于，每在轨道中经过一秒钟，它就会更新滑块相对于轨道中位置的位置。然后当用户滑动滑块时，它会更新轨道相对于滑块位置的位置

希望这可以帮助

# verilog - Verilog 连续仿真

> ID：10577038
> 
> 赞同：3
> 
> 时间：2012-05-14T02:54:15.007
> 
> 标签：verilog, modelsim

verilog 中是否有特殊的开始和结束关键字允许模拟继续运行直到遇到结束关键字？我知道这将无法合成；但是，我只想将其用于测试目的。verilog 中的 $finish 关键字也退出了 modelsim。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-14T15:45:26.233

`$finish`并且`$stop`是停止模拟的verilog系统任务。`$finish`终止模拟，同时`$stop`停止模拟并进入交互模式。所以你可以使用`$stop`. 甚至`$finish`应该没问题，因为 ModelSim 通常会询问您是否要完成。选择“否”保持在仿真模式，选择“是”将退出 ModelSim。

# php - 如何在 slugify 函数中将“:”替换为“/”？

> ID：10577041
> 
> 赞同：1
> 
> 时间：2012-05-14T02:55:31.743
> 
> 标签：php, regex

我有一个功能可以使文本变得模糊，它运行良好，除了我需要用“/”替换“：”。目前它用“-”替换所有非字母或数字。这里是 ：

```
function slugify($text)
    {
        // replace non letter or digits by -
        $text = preg_replace('~[^\\pL\d]+~u', '-', $text);

        // trim
        $text = trim($text, '-');

        // transliterate
        if (function_exists('iconv'))
        {
            $text = iconv('utf-8', 'us-ascii//TRANSLIT', $text);
        }

        // lowercase
        $text = strtolower($text);

        // remove unwanted characters
        $text = preg_replace('~[^-\w]+~', '', $text);

        if (empty($text))
        {
            return 'n-a';
        }

        return $text;
    } 
```

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-05-14T03:00:11.943

我只做了一些修改。我提供了一组搜索/替换数组，让我们用 替换大部分内容`-`，但替换`:`为`/`：

```
$search = array( '~[^\\pL\d:]+~u', '~:~' );
$replace = array( '-', '/' );
$text = preg_replace( $search, $replace, $text); 
```

后来，最后一个用空字符串`preg_replace`替换了我们。`/`所以我允许在字符类中使用正斜杠。

```
$text = preg_replace('~[^-\w\/]+~', '', $text); 
```

输出以下内容：

```
// antiques/antiquities
echo slugify( "Antiques:Antiquities" ); 
```

# ruby-on-rails - 在子控制器中如何查看父级？

> ID：10577042
> 
> 赞同：0
> 
> 时间：2012-05-14T02:55:37.970
> 
> 标签：ruby-on-rails, ruby-on-rails-3

我收到错误：

```
ActiveRecord::RecordNotFound in ShoesController#choose_store_shoes

Couldn't find Store without an ID 
```

请记住，`shoes`属于`Store`. 这一切都发生在鞋子控制器中，从`see_shoes`动作开始，然后当用户点击时，`Store`它使用`choose_store_shoes`动作。这应该显示商店和鞋子。我只需要帮助实际进入该页面。

```
ShoesController

  def see_stores
   @stores = Store.paginate(:page => params[:page], :per_page => 20)
  end

  def choose_store_shoes
   @store = Store.find(params[:id])
  end 
```

我的路线：

```
resources :shoes do
  collection do
     get 'see_stores'
     get 'choose_store_shoes'
  end
end 
```

然后是我点击商店的视图，它应该显示它：

```
<% for store in @stores %>
   <%= link_to choose_store_shoes_shoes_path(store.id) do %>
      <%= store.name %>
      <%= store.location %>
   <% end %>
<% end %> 
```

我想我链接或路由不正确。什么是正确的方法？

先感谢您。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-14T03:30:41.643

当 url 方案中没有 :id 时，您正在解析 :id。你需要修复你的路线。

在您的 routes.rb 中，更改`collection do`为`member do`使 url 方案接受 :id。

对路线进行此更改后，您可以使用正确的 id 指定您想要的商店：`127.0.0.1:3000/shoes/:id/choose_store_shoes`

# ruby - 什么可以解释“无效的存储块长度”错误？

> ID：10577045
> 
> 赞同：6
> 
> 时间：2012-05-14T02:55:57.080
> 
> 标签：ruby, zlib, rubyzip

我在 Vagrant 虚拟框中的基本 Ubuntu lucid32 映像上运行带有 Ruby 1.9.3p194 的 Rails (3.2.3) 应用程序。虚拟盒子在 Leopard 上运行，物有所值。我正在尝试在应用程序中使用 ruby​​zip 来解压缩 zip 存档 - `2009_da_lmp.zip`. 直接使用 ruby​​zip 存储库中的示例代码，我可以确认我可以列出存档文件的内容：

```
#f is the absolute path to 2009_da_lmp.zip (string)
Zip::ZipFile.open(f) { |zf| zf.entries[0] }  
 => 20090101_da_lmp.csv #that is indeed a file in the archive. 
```

使用存储库中示例中的更多代码，我尝试获取存档中的实际文件：

```
Zip::ZipInputStream.open(f) { |zis|
  entry = zis.get_next_entry
  print "first line of '#{entry.name}' (#{entry.size} bytes: ) "
  puts "'#{zis.gets.chomp}'" }

=> first line of '20090101_da_lmp.csv' (826610 bytes: ) Zlib::DataError: 
   invalid stored block lengths #and a long stack trace I can provide 
                                #if that might help 
```

Mac OS 解压缩实用程序可以很好地解压缩存档。我想知道这是否是某种与编码相关的事情（我的语言环境设置为 en_US.UTF-8，因为这样可以减少在开发人员中使用 PostgreSQL 的痛苦），但我不知道如何判断是否是这种情况。我找不到任何可能导致此错误的信息。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-05-14T16:10:19.230

这是向充气机提供随机数据时发现的典型错误。事实上，你会在大约 1/4 的时间从随机数据中得到这个错误（当第一个字节的低三位是 000 或 001 时）。所以我猜想通货膨胀只是出于某种原因从错误的字节开始。

# java - 如何以编程方式在文本视图上设置 android:layout_weight？

> ID：10577046
> 
> 赞同：0
> 
> 时间：2012-05-14T02:56:02.820
> 
> 标签：java, android, xml

我有一个 XML 格式的表格布局，它完全符合我的要求：

```
<TableRow  android:layout_width="wrap_content" android:layout_height="wrap_content" android:background="@drawable/evenrow">
<TextView android:text="Check" android:layout_height="wrap_content" android:textAppearance="?android:attr/textAppearanceLarge" android:layout_weight="1"></TextView> 
```

我正在尝试以编程方式添加表格行，但我似乎无法设置 layout_weight 。这是java代码：

```
TableRow.LayoutParams trlayout = new TableRow.LayoutParams (TableRow.LayoutParams.WRAP_CONTENT, TableRow.LayoutParams.WRAP_CONTENT, 1);
TableLayout.LayoutParams tablelayout = new TableLayout.LayoutParams (TableLayout.LayoutParams.FILL_PARENT, TableLayout.LayoutParams.FILL_PARENT);
TableRow tr = new TableRow(this);
    tr.setLayoutParams(trlayout);
    TextView check = new TextView(this);
    check.setText(String.format("%5.2f", i)); 
    tr.addView(check); 
```

我认为 new TableRow.LayoutParams 的第三个参数是该行子级的默认权重，但它不起作用。我错过了什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-14T03:32:14.327

好吧，在常规 XML 中，如果您设置`wrap_content`了要扩展的方向尺寸，那么布局权重将不起作用。

将宽度参数更改为“0dp”，然后您的布局重量应该可以工作。

# wcf - 使用 IIS 托管的 WCF Restful 服务

> ID：10577052
> 
> 赞同：1
> 
> 时间：2012-05-14T02:56:58.477
> 
> 标签：wcf, iis, rest, post, .net-4.0

我已经成功地将我的 WCF RESTful Web 服务部署到 IIS 7。当我通过 IE 中的浏览器通过类似 "https://myserver/mservice.svc/postuser/JohnSmith" 的方式调用它时，我已经验证了我的服务正在运行。该方法是 POST，并且我已验证我的 IIS 配置允许 POST。

我的问题如下。我们正在使用允许外部 Web 服务调用的第 3 方软件即服务应用程序。它允许您配置 URL“https://myserver/mservice.svc/postuser/”，然后您可以选择一个参数。当我从外部应用程序调用 Web 服务时，在 IIS 中注册了 404 错误。

我认为我调用 Web 服务“https://myserver/mservice.svc/postuser/JohnSmith”的方式与 SAAS 应用程序调用我的外部 Web 服务的方式之间一定存在一些差异。Web 服务正在尝试传递用户名，但我无法检测到它是如何构建的。

我是否需要为托管在可以处理 XML 的 IIS 中的 Web 服务编写启用 Web 的前端？我假设这是 SAAS 应用程序尝试将用户名传递到我的 Web 服务的方式。

提前感谢大家的想法和帮助。

# python - Python 子进程模块在段错误时不返回标准输出

> ID：10577055
> 
> 赞同：9
> 
> 时间：2012-05-14T02:57:17.197
> 
> 标签：python, segmentation-fault, subprocess

我正在从 Python 运行一个 C 可执行文件，这个可执行文件有时会出现段错误。当它发生段错误时，子进程模块不会在 stdout 或 stderr 中返回任何内容。

示例代码：

```
import subprocess

proc = subprocess.Popen(['./a.out'], stdin=subprocess.PIPE,
        stdout=subprocess.PIPE, stderr=subprocess.PIPE)
out, err = proc.communicate()
print 'out: "%s"' % out
print 'err: "%s"' % err
print proc.returncode 
```

的来源`a.out`是：

```
int main() {
    printf("hello world\n");
    int x = 1 / 0;
} 
```

的输出`./a.out`是：

```
hello world
Floating point exception 
```

Python 代码的输出是（在 Linux 中，python 2.7）：

```
out: ""
err: ""
-8 
```

即使它崩溃了，有没有办法获得可执行文件的输出？

将返回码转换为字符串消息的通用方法也很好。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-14T03:14:10.363

您的 C 程序没有刷新其输出缓冲区。解决此问题的最简单方法是将 STDOUT 的输出模式更改为无缓冲：

```
#include <stdio.h>
int main(int argc,char **argv) {
    setvbuf(stdout,_IONBF,0,0);
    printf("hello world\n");
    int x = 1 / 0;
} 
```

现在你的程序（我编辑它以修正一个错字）产生正确的输出：

```
$ python2.7 x.py
out: "hello world
"
err: ""
0
$ 
```

令人困惑的是，我的 Mac 上的返回码是 0，因为因信号而终止的程序没有返回码。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-14T03:06:52.207

应用程序几乎可以肯定在遇到分段错误之前不会刷新其输出缓冲区。

默认情况下，C stdio 库配置缓冲，`stdout`以便在行的每一端刷新缓冲区，但只有`stdout`tty。这就是从命令行运行时*确实*看到输出的原因`a.out`。

你不能直接让 C 程序从 Python 端改变它。但是你*可以*做的是给它一个 tty 来使用它`stdout`，即一个伪 tty。打开和设置伪终端的细节比设置常规管道复杂得多，但有一些模块可以帮助您：请参阅[Pexpect](http://www.noah.org/wiki/Pexpect)和[这个 SO question](https://stackoverflow.com/questions/527197/intercepting-stdout-of-a-subprocess-while-it-is-running)等。

# php - curl_init($url) 返回资源 ID #7

> ID：10577063
> 
> 赞同：3
> 
> 时间：2012-05-14T02:58:41.013
> 
> 标签：php

我一直在使用 CURL 功能从 url 获取图像并将其保存到 m 服务器，因为 COPY() 已从我的主机中禁用。

我传递的网址是 $url=http://upload.wikimedia.org/wikipedia/commons/thumb/e/e8/People_from_Switzerland.png/285px-People_from_Switzerland.png

```
 $headers[] = 'Accept: image/gif, image/x-bitmap, image/jpeg, image/pjpeg';              
$headers[] = 'Connection: Keep-Alive';         
$headers[] = 'Content-type: application/x-www-form-urlencoded;charset=UTF-8';   
$userAgent = 'php';
$process = curl_init($url);
curl_setopt($process, CURLOPT_HTTPHEADER, $headers);         
curl_setopt($process, CURLOPT_HEADER, 0);         
curl_setopt($process, CURLOPT_USERAGENT, $useragent);         
curl_setopt($process, CURLOPT_TIMEOUT, 30);         
curl_setopt($process, CURLOPT_RETURNTRANSFER, 1);         
curl_setopt($process, CURLOPT_FOLLOWLOCATION, 1);
curl_setopt($ch, CURLOPT_SSL_VERIFYPEER, false); 
```

当我尝试回显 curl_init($url) 输出时出现以下错误

进程资源 id #7
**警告**：curl_setopt() 期望参数 1 是资源，在 **警告**中给出 null ：curl_errno() 期望参数 1 是资源，在中给出 null

请帮忙！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-14T03:01:34.443

`curl_setopt($ch, CURLOPT_SSL_VERIFYPEER, false);`

`$ch`您之前使用的来自哪里`$process`，最后一行是从其他地方复制的吗？

未定义的变量将为空。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-14T03:00:01.243

您忘记在最后一行更改`$ch`为：`$process`

```
curl_setopt($ch, CURLOPT_SSL_VERIFYPEER, false); 
```

应该：

```
curl_setopt($process, CURLOPT_SSL_VERIFYPEER, false); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-04T13:48:42.160

使用 PHP 这将从您提供的任何 url 下载图像文件并保存。我用它来脸书。

```
$headers[] = 'Accept: image/gif, image/x-bitmap, image/jpeg, image/pjpeg';  
$headers[] = 'Connection: Keep-Alive';
$headers[] = 'Content-type: application/x-www-form-urlencoded;charset=UTF-8';

$userAgent = 'php';
$process = curl_init('https://sphotos-a.xx.fbcdn.net/xxxx/xxxxxx_n.jpg');
curl_setopt($process, CURLOPT_HTTPHEADER, $headers);
curl_setopt($process, CURLOPT_HEADER, 0);     
curl_setopt($process, CURLOPT_USERAGENT, $useragent);
curl_setopt($process, CURLOPT_TIMEOUT, 30);
curl_setopt($process, CURLOPT_RETURNTRANSFER, 1);  
curl_setopt($process, CURLOPT_FOLLOWLOCATION, 1)
curl_setopt($process, CURLOPT_BINARYTRANSFER,1);
curl_setopt($process, CURLOPT_SSL_VERIFYPEER, false);
$raw=curl_exec($process);
curl_close ($process);
$open=fopen('final.jpeg',x);
$write=fwrite($open,$raw);
$clo= fclose($open); 
```

# php - 为什么我的 SQL 插入语句无法通过我的 php 脚本执行？

> ID：10577072
> 
> 赞同：0
> 
> 时间：2012-05-14T03:00:31.180
> 
> 标签：php, mysql, sql, syntax, syntax-error

在 php 脚本中，我尝试了几种不同的插入语句：

```
$query = "INSERT INTO table (charfield,charfield,intfield,decimalfield) VALUES ('$stringvar','$stringvar',$intvar,$decimalvar)";
$query = "INSERT INTO table (charfield,charfield,intfield,decimalfield) VALUES ('".$stringvar."','".$stringvar."',".$intvar.",".$decimalvar.")";
$query = 'INSERT INTO table (charfield,charfield,intfield,decimalfield) VALUES ("'.$stringvar.'","'.$stringvar.'",'.$intvar.','.$decimalvar.')';
$query = 'INSERT INTO table (charfield,charfield,intfield,decimalfield) VALUES ("'.$stringvar.'","'.$stringvar.'","'.$intvar.'","'.$decimalvar.'")'; 
```

我也使用以下几种不同的方式执行了它：

```
mysql_real_escape_string($query);
mysql_query($query);
$result = @mysql_query($query); 
```

我已经回应了正在连接的语句，它看起来很好。即使我将其复制并粘贴到 phpmyadmin sql 编辑器中，它也可以正常执行。数据库是 MySQL 并且用户具有正确的权限。

我究竟做错了什么？

* * *

**编辑：**

错误消息使用`or die`：

```
Access denied for user 'schaffins'@'localhost' (using password: NO) 
```

我已经添加了一个有权选择、插入和更新的用户，并且在执行任何操作之前，我在 php 中使用该用户进行连接。

此外，我能够插入到我在同一个脚本中创建的另一个表中。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-14T03:19:00.570

这个问题不在于您的插入 - 错误是连接到数据库，因此它甚至没有达到运行插入语句的程度。

从错误消息“用户'schaffins'@'localhost'的访问被拒绝（使用密码：否）”中仔细检查您传递给mysql_connect（）的凭据，看来问题出在您的密码上。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-14T03:09:19.743

您不能`mysql_real_escape_string`在整个查询中使用。这将转义作为查询语法一部分的引号。您需要在要插入查询的值上使用它。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-14T18:44:16.833

有时数据库连接仅在某些操作后发生 &| 进行验证。在尝试执行任何 sql 之前，请确保您有一个打开的连接。如果连接嵌套在 if/else 代码块中，则可能不满足条件并且不会建立 db 连接。

尝试找到 db 连接并将其移动（或复制）到 php 中更“全球化”的位置 - 也就是 php 中的某个位置，以确保在任何可能排除基于条件建立连接的 if 语句之前建立 db 连接不允许

# java - 在Java中为数组对象赋值

> ID：10577073
> 
> 赞同：2
> 
> 时间：2012-05-14T03:00:36.387
> 
> 标签：java, arrays

我正在尝试为这样的数组对象赋值：

```
public class Players {
    String Name;
}

Players[] player = new Players[10];
String name = Mike;
player[1].Name = name; 
```

我得到一个 NullPointerException 并且不知道为什么。这可能是什么原因造成的？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-05-14T03:02:37.540

这是因为创建一个新数组不会在数组内创建单个对象；您应该单独创建它们，例如在循环中。

```
Players[] player = new Players[10];
for (int i = 0 ; i != player.length ; i++) {
    player[i] = new Players();
} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-05-14T03:02:39.477

`new Players[10]`制作一个有 10 个插槽的数组。它不会在插槽中放置任何东西。所以数组的所有 10 个元素都是`null`.

您需要创建对象并将它们粘贴到数组中。例如：

```
for (int i = 0; i < player.length; i++) {
    player[i] = new Players();
} 
```

# php - 使用 SWIG 在 PHP 中迭代 std::map

> ID：10577075
> 
> 赞同：8
> 
> 时间：2012-05-14T03:00:57.540
> 
> 标签：php, c++, map, swig, language-binding

我正在使用 SWIG 包装一个`std::map`在 PHP 中返回的函数。

在 PHP 代码中，我需要遍历地图的元素。

Thw SWIG 库提供对`std::map`接口`std_map.i`文件的支持，但仅包装了以下方法：

```
 clear()
 del($key)
 get($key)
 has_key($key)
 is_empty()
 set($key, $x)
 size() 
```

如何迭代地图的元素？`std_map.i`我是否需要使用某种用于迭代器和的包装器来扩展文件`begin()`和`end()`？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-16T21:28:07.143

正如@awoodland 所说，您将必须实现迭代器接口。

这是关于stackoverflow的另一个问题。虽然它是 Java，但它可以让您更好地了解您正在寻找的内容：

[将 SWIG 与 C++ 的 std::map 一起使用时，Java 没有迭代器](https://stackoverflow.com/questions/9465856/no-iterator-for-java-when-using-swig-with-c-and-stdmap)

# svn - 如何在跟踪上游时仅对 svn 存储库的一部分进行分叉？

> ID：10577076
> 
> 赞同：0
> 
> 时间：2012-05-14T03:01:15.510
> 
> 标签：svn, branch

我正在查看一个支持“插件”的 SVN 项目，我想在其中 fork 与该项目一起打包的插件之一。如何只在 svn 树中分叉该子目录？如果可能的话，我希望能够将以后的更改合并到上游。（我猜这可能是不可能的，没有意义。）。获取历史记录会很好，但是是可选的。

特别是我最擅长管理 hg 存储库，尽管我也使用过 bzr、git 和 darcs。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-14T03:48:52.937

关于如何组织存储库有两个主要的 SVN 约定（请注意，这些只是约定，不必这样做）：

```
repo_root -
   trunk - Project1
         - Project2
         ...
   branches - 
         - branch1
            - Project1
            - Project2
            ...
         - branch2
            - Project1
            - Project2
            ...
         ...             
   tags - 
         - tag1
            - Project1
            - Project2
            ...
         - tag2
            - Project1
            - Project2
            ...
         ... 
```

或者：

```
repo_root -
   - Project1
     - trunk -
     - branches -
       - branch1 -
       ...
     - tags -
     ...
   - Project2
   ... 
```

如果您的存储库已经以第二种方式组织并且您的插件是一个单独的项目 - 那么您只需将其分支（`svn copy repo_root/Project/trunk repo_root/Project/new_branch`- 插入 http、svn 等，如适用）。

如果您的存储库以第一种方式组织，甚至以第二种方式组织，但您的插件不是具有自己的主干/分支/标签的单独项目，您可以创建一个仅包含插件的分支：`svn copy --parents repo_root/trunk/[path_prefix]/plugin repo_root/branches/new_branch/[path_prefix]/plugin`.

然后，您必须小心从主干（或其他分支）合并到此分支，仅对插件所做的更改（例如 not `svn merge repo_root/trunk ...`， but `svn merge repo_root/trunk/[path_prefix]/plugin ...`）。

您应该不会遇到比通常（例如完整的主干或分支）SVN 分支和合并更多的问题。

一个重要的注意事项：如果插件依赖于项目的其他部分（很可能是这种情况），则在分支上开发时必须维护一个混合工作副本：检查主干，cd 到插件目录，然后运行`svn switch ^/branches/new_branch/[path_prefix]/plugin`.

# javascript - 滑动切换 jquery - 单击或悬停图像时显示段落

> ID：10577077
> 
> 赞同：0
> 
> 时间：2012-05-14T03:01:17.553
> 
> 标签：javascript, jquery

对，我正在尝试使用 jQuery 在人们或悬停或单击段落顶部的图像时显示段落，这是我到目前为止得到的：

```
 <script      src="http://ajax.googleapis.com/ajax/libs/jquery/1.4.1/jquery.min.js"type="text/javascript"></script>
<script>
jQuery.noConflict;
jQuery(document).ready(function(){
//Hide the tooglebox when page load
jQuery(".toggle").hide();
//slide up and down when hover over img
jQuery("img").click(function(){
// slide toggle effect set to slow you can set it to fast too.
jQuery(this).next(".toggle").slideToggle("slow");
return true;
});
});
</script>

<p>Welcome!</p>

<h2>Choose your category</h2>

<div id="front-page">
<div id="front-page-row">
<div id="front-page-cell">
<p><img src="images/running.png" alt="Running" class="category"/></p>
<p class="toggle">List of events<br/>bldasfblda<br/>bdwfbwef</p>
</div>

<div id="front-page-cell">
<p><img src="images/mtb.png" alt="MountainBike" class="category"/></p>
<p class="toggle">List of events<br/>bldasfblda<br/>bdwfbwef</p>
</div>

<div id="front-page-cell">
<p><img src="images/music.png" alt="Music" class="category"/></p>
<p class="toggle">List of events<br/>bldasfblda<br/>bdwfbwef</p>
</div>
</div>
</div> 
```

单击图像时没有任何反应

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-14T03:35:45.563

我会先`.toggle`用 CSS 隐藏元素，所以它们会立即变得不可见。其次，我会避免`#front-page-cell`反复使用 ID，而是将其转换为类名，并将其用作 CSS 选择器。

```
<style>
  .toggle { display: none }
</style>
<script>
  jQuery.noConflict();
  jQuery(function($){
    $(".front-page-cell").on("click", "img.category", function(){
      $(this).closest(".front-page-cell").find(".toggle").toggle("slow");
    });
  });
</script> 
```

演示：http: [//jsbin.com/evomay/edit#javascript,html](http://jsbin.com/evomay/edit#javascript,html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-14T03:10:40.800

我认为您的代码部分应该如下所示：

```
<script>
jQuery.noConflict;
jQuery(document).ready(function(){
//Hide the tooglebox when page load
jQuery(".toggle").hide();
//slide up and down when hover over img
jQuery("img").click(function(){
// slide toggle effect set to slow you can set it to fast too.
jQuery(this).parent().next(".toggle").slideToggle("slow");
return true;
});
});
</script> 
```

因为`next(selecetor)`正在寻找兄弟姐妹。并且`.toggle`是`p`那个父母的兄弟姐妹`img`

# data-binding - knockout.js - 数据绑定文本默认值

> ID：10577078
> 
> 赞同：24
> 
> 时间：2012-05-14T03:01:20.177
> 
> 标签：data-binding, knockout.js

在 knockout.js 中，我有一个非常标准的字段，如下所示：

```
<label data-bind="text: JobTitle"></label> 
```

如果文本值为空，我想要在此处指定默认值，例如“未指定职位”。

这可以在 knockout.js 中执行吗？

谢谢。

* * *

## 回答 #1

> 赞同：49
> 
> 时间：2012-12-07T16:04:08.010

最短/最简单的方法可能是：

```
<label data-bind="text: JobTitle()||'No Job Title Specified'"></label> 
```

工作示例：

```
var ViewModel = function() {
    this.jobTitle = ko.observable();
};

ko.applyBindings(new ViewModel());
```

```
body { font-family: arial; font-size: 14px; }
.liveExample { padding: 1em; background-color: #EEEEDD; border: 1px solid #CCC; max-width: 655px; }
.liveExample input { font-family: Arial; }
.liveExample b { font-weight: bold; }
.liveExample p { margin-top: 0.9em; margin-bottom: 0.9em; }
.liveExample select[multiple] { width: 100%; height: 8em; }
.liveExample h2 { margin-top: 0.4em; font-weight: bold; font-size: 1.2em; }
```

```
<script src="https://cdnjs.cloudflare.com/ajax/libs/knockout/3.2.0/knockout-min.js"></script>
<div class='liveExample'>   
    <p>Job Title: <input data-bind='value: jobTitle' /></p> 
    <h2 data-bind="text: jobTitle()||'No Job Title Specified'"></h2>  
</div>
```

或 JS 小提琴：http: [//jsfiddle.net/735qC/43/](http://jsfiddle.net/735qC/43/)

* * *

## 回答 #2

> 赞同：18
> 
> 时间：2012-05-14T04:17:40.403

所以我猜你想要一个真正的默认值，而不仅仅是一个占位符文本。这是一种使用扩展器的方法；

```
ko.extenders.defaultIfNull = function(target, defaultValue) {
    var result = ko.computed({
        read: target,
        write: function(newValue) {
            if (!newValue) {
                target(defaultValue);
            } else {
                target(newValue);
            }
        }
    });

    result(target());

    return result;
};

var viewModel = function() {
   this.someValue = ko.observable().extend({ defaultIfNull: "some default" });
};

ko.applyBindings(new viewModel()); 
```

[http://jsfiddle.net/madcapnmckay/aTMpp/](http://jsfiddle.net/madcapnmckay/aTMpp/)

希望这可以帮助。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2016-12-30T09:46:19.257

甚至比其他代码示例更短的是：

```
ko.extenders.withDefault = function(target, defaultValue) {
    target.subscribe(function(input) {
        if(!input) target(defaultValue)
    });
    return target
}; 
```

随着启蒙

```
ko.observable().extend({ withDefault: "some Default" }) 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-08-01T18:07:23.880

You can do it like this:

```
<label data-bind="text: JobTitle() != undefined && JobTitle() != null ? JobTitle() : 'No Job Title Specified'"></label> 
```

With the undefined control, you can check whether you have that function or not when you are loading the page for the first time.

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2017-03-17T15:11:52.960

*将默认值仅用于显示目的*可能很有用，而不是应用*始终*返回默认值的扩展程序。

这样，模型的属性保持为空，例如在验证（检查空属性）或将数据发送回服务器（您可能不想发回此默认值）时更好。

您可以在以下示例中使用自定义绑定，它基于文本绑定，呈现提供的默认文本或`-`如果未提供（当然，您可以根据需要进行调整）：

```
ko.bindingHandlers['textWithDefault'] = {
    'init': function() {
      return { 'controlsDescendantBindings': true };
    },
    'update': function (element, valueAccessor) {
        var value, defaultValue;
        var options = ko.utils.unwrapObservable(valueAccessor());
        if (options !== null && typeof options == "object") {
            value = ko.unwrap(options['text']);
            defaultValue = ko.unwrap(options['default']);
        } else {
            value = options;
        }
        defaultValue = defaultValue || '-';

        ko.utils.setTextContent(element, value || defaultValue);
    }
};

function ExampleModel() {
  this.value = 'Sample text';
  this.observableValue = ko.observable('More sample text');
  this.emptyValue = '';
  this.emptyObservableValue = ko.observable();
};

ko.applyBindings(new ExampleModel());
```

```
<script src="https://cdnjs.cloudflare.com/ajax/libs/knockout/3.3.0/knockout-min.js"></script>
<div data-bind="textWithDefault: value"></div>
<div data-bind="textWithDefault: observableValue"></div>
<div data-bind="textWithDefault: emptyValue"></div>
<div data-bind="textWithDefault: emptyObservableValue"></div>
<div data-bind="textWithDefault: { text: emptyValue, default: 'Custom empty value' }"></div>
<div data-bind="textWithDefault: { text: emptyObservableValue, default: 'Another custom empty value' }"></div>
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-05-14T14:18:20.287

我在返回表的数据时遇到了这个问题，但只有一些列是可排序的。

```
<tr data-bind="foreach: ArrAsrColumnHeaders">
  <th class="sortable koJson" data-bind="
     css: {active: ((typeof(isActive) != 'undefined') ?  isActive : '')}
      , text: text
      , attr:{href: ((typeof(jsonClick) != 'undefined') ?  jsonClick : '')}">
  </th>
</tr> 
```

这表示，对于表标题中的每一列，如果定义了“isActive”并将其设置为 true，则添加类“活动”，但如果它不存在，请不要惊慌。添加“href”属性也是如此。

免责声明：我不太了解淘汰赛，无法知道这种方法的局限性，但这对我来说很有效，而更直接的方法是 `css: {active: isActive() || ''}`抛出错误。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2016-07-18T02:24:18.823

要在输入字段中显示数据，最简单的方法是...

```
<input title="Stage" value="Default Entry Goes Here" readonly="readonly" type="text" id="stage" class="form-control" data-bind="value: model.stage ||text-input: Default Entry Goes Here"> 
```

它出错但有效.. :)

# c++ - 安全服务器不工作

> ID：10577080
> 
> 赞同：1
> 
> 时间：2012-05-14T03:01:59.200
> 
> 标签：c++, api, networking, ssl, liblacewing

Lacewing 库应该支持托管安全服务器。

它说如果证书加载正确，它应该是安全的。但是，我正在托管它，它说证书已成功加载，但是当我从客户端向服务器发送消息时，我没有收到它。如果没有加载证书，我会这样做。

```
#include <string>
#include <iostream>  
#define  LacewingFunction
#include "Lacewing.h"

void onReceive (Lacewing::Server &Server, Lacewing::Server::Client &Client,
                char * Data, int Size) {
                    /* callback body */
                    std::cout << Data << "\n";
}

void onConnect (Lacewing::Server &Server, Lacewing::Server::Client &Client)
{
    std::cout << "Connected!" << "\n";
    Client.Send("TestingS");
}

void onReceiveC (Lacewing::Client &Client, char * Data, int Size)
{
    std::cout << Data << "\n";
    Client.Send("TesingC");
}

int main(int argc, char* argv[])  
{  
    std::string s;
    std::cin >> s;
    if(s == "server")
    {
        Lacewing::EventPump pump;
        Lacewing::Server* server = new Lacewing::Server(pump);
        server->LoadSystemCertificate("MY","localhost");
        std::cout << server->CertificateLoaded();
        server->onReceive(onReceive);
        server->onConnect(onConnect);
        server->Host(1234);
        std::cout << server->CertificateLoaded();
        pump.StartEventLoop();
    }
    else
    {
        Lacewing::EventPump pump;
        Lacewing::Client* server = new Lacewing::Client(pump);
        server->onReceive(onReceiveC);
        server->Connect("192.168.2.12",1234);
        pump.StartEventLoop();
    }

    return 0;  
} 
```

两次证书都说它已加载。

这是api文档。 [http://lacewing-project.org/docs/server/LoadSystemCertificate.html](http://lacewing-project.org/docs/server/LoadSystemCertificate.html)

谢谢

也许makecert生成的证书不起作用？有人有证书我可以试试吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-14T10:18:39.347

我正在尝试同样的事情。

```
bSecure = WebServer.LoadSystemCertificate("My", "localhost","localmachine");
bSecure = WebServer.CertificateLoaded(); 
```

两者都是正确的，因此应该加载证书。

看这里：[如何制作证书](http://www.codeproject.com/Articles/24027/SSL-with-Self-hosted-WCF-Service)

这在 IE9 中运行良好，端口设置为 5040。 `https://localhost:5040/` 它在 Firefox 或 Chrome 中不起作用，但这与加载“认证机构”证书有关。

# jquery - 是否有 jquery 模板计数或索引？

> ID：10577081
> 
> 赞同：3
> 
> 时间：2012-05-14T03:02:02.080
> 
> 标签：jquery, jsp

今天，我的前辈告诉我使用jquery模板。但我对此一无所知。我想在 jquery 模板中使用 varStatus，但我不知道如何使用，也不知道这个功能是否存在。

```
**<!--this is JSTL style loop-->**
<c:forEach var="item" items="${menuItems}" varStatus="status">
<div class="tbtn" data-z_index="${99-status.count}"> //<--This line has loop count
    <div id="${item.m_id}" class="tab_non">
        <div class=left></div>
        <div class=right></div>
        <div class=bg>
            <div class=icon></div>
            <div class=font id=topbutton>${item.m_id}</div>
        </div>
        <div class="close"></div>
    </div>
</div>
</c:forEach> 
```

这是 jquery-template 样式循环

```
<script id="topMenuTemplate" type="text/x-jQuery-tmpl">
{{if data}}
{{each data}}
<div class="tbtn" data-z_index="${loop??}"> //<--I need to use loop count here too!!
    <div id="${name}" class="tab_non">
        <div class=left></div>
        <div class=right></div>
        <div class=bg>
            <div class=icon></div>
            <div class=font id=topbutton>${name}</div>
        </div>
        <div class="close"></div>
    </div>
</div>
{{/each}}
{{/if}}
</script> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-14T03:09:48.493

从 1.4.3 开始，您可以访问`index`：

```
{{each( index, value ) collection}} content {{/each}} 
```

请注意，`index`这里只是一个您想用来代替 的自定义字符串值`index`，但 jQuery 将默认`$index`为当前索引值。

```
<li>
    Title: ${Name}.
    {{each Languages}}
        ${$index + 1}: <em>${$value}. </em>
    {{/each}}
</li> 
```

因此，在您的示例中，您可以使用`$index`变量代替`${loop}`：

```
<div class="tbtn" data-z_index="${index}"> 
```

来源：[http ://api.jquery.com/template-tag-each/](http://api.jquery.com/template-tag-each/)

# silverlight - WCF RIA 服务和 EF 4.1

> ID：10577087
> 
> 赞同：1
> 
> 时间：2012-05-14T03:03:03.317
> 
> 标签：silverlight, entity-framework-4.1, wcf-ria-services

我是否必须为任何具有 ICollection 属性的实体显式添加 [Include] 属性，以便结果 LoadOperation 回调将使用其集合填充我的实体？

从服务中查询数据很好，但是当被传递给 LoadOperation 时，它不会添加某个实体的集合。它与服务消息的序列化/反序列化有关吗？

如果是，原因是什么？我在 WPF 中将 EF 与 DbContext.Includes 一起使用，但是当我想查询实体的集合时，我的 T4 模板生成的项目没有任何问题。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-14T04:18:22.960

[Include] 属性是建议 WCF 编组器序列化相关实体所必需的。具体来说，[MSDN](http://msdn.microsoft.com/en-us/library/system.servicemodel.domainservices.server.includeattribute%28v=vs.91%29.aspx)建议

> 此属性指定关联应该是任何代码生成的客户端实体的一部分，并且在将结果序列化到客户端时应该包括任何相关实体。

您仍然需要在 DbContext 上使用 query.Include() 从数据库中检索相关数据。

# android - Android：基于回合的网络游戏引擎

> ID：10577090
> 
> 赞同：0
> 
> 时间：2012-05-14T03:03:21.687
> 
> 标签：android, networking

这可能是雄心勃勃的，但在stackoverflow中我相信......

我想知道这些功能和可能的障碍是为 android 平台创建一个基于回合的网络游戏引擎，并且将以类似于“Words with Friends”等游戏的方式播放。

该引擎将针对纸牌游戏量身定制，并且每次玩家轮到他/她时只需要在对等方之间发送数据包。游戏资源（例如图像和声音）可能必须从中央服务器下载并存储在 android 设备的临时存储空间中，以减少应用程序必须在设备上永久拥有的存储量。

在我为这个项目投入大量时间之前，我想我会问一些初步的问题。

1.  基于种子/回合的网络游戏为开发者提供了哪些限制/障碍？
2.  是否有可能使用 PayPal 等服务集成基于游戏内微交易的商店？
3.  对等体之间的数据包是否需要加密以防止作弊？
4.  如何从中央服务器验证客户端以防止盗版？
5.  平衡轻量级存储/cpu 要求的最佳方法是什么，同时仍然拥有清晰的图形？
6.  从使用 android SDK 中单独学习 java 是一个好主意，还是直接跳进去？

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-14T05:59:21.103

1.  网络增加了复杂性；看看能不能先做单机
2.  是的，但不赞成；谷歌更喜欢并且可能有一天会坚持让你使用他们的应用内功能。
3.  是的，如果你用“劝阻”代替“预防”
4.  网络工作的登录身份验证是一种方法。
5.  如果 UI 有 3D 图形，则使用 OpenGL，否则，使用 Canvas 甚至 HTML5
6.  跳

# java - 正则表达式 - 文字字符串和引号之间的匹配

> ID：10577096
> 
> 赞同：0
> 
> 时间：2012-05-14T03:04:23.547
> 
> 标签：java, regex, split, delimiter

我在正则表达式方面很糟糕，非常感谢任何关于这个问题的帮助，我认为这对于任何熟悉的人来说都是新东西。

我从 REST 调用中得到这样的响应

```
 {"responseData":{"translatedText":"Ciao mondo"},"responseDetails":"","responseStatus":200,"matches":[{"id":"424913311","segment":"Hello World","translation":"Ciao mondo","quality":"74","reference":"","usage-count":50,"subject":"All","created-by":"","last-updated-by":null,"create-date":"2011-12-29 19:14:22","last-update-date":"2011-12-29 19:14:22","match":1},{"id":"0","segment":"Hello World","translation":"Ciao a tutti","quality":"70","reference":"Machine Translation provided by Google, Microsoft, Worldlingo or the MyMemory customized engine.","usage-count":1,"subject":"All","created-by":"MT!","last-updated-by":null,"create-date":"2012-05-14","last-update-date":"2012-05-14","match":0.85}]} 
```

我所需要的只是这些引文之间的“Ciao mondo”。我希望使用 Java 的拆分功能可以做到这一点，但不幸的是它不允许两个单独的分隔符，因为我可以在翻译之前指定文本。

为简化起见，我坚持使用正则表达式来收集 translateText":" 和下一个 "

我会非常感谢任何帮助

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-14T03:25:31.947

您可以使用`\"translatedText\":\"([^\"]*)\"`表达式来捕获匹配项。

表达式含义如下：find 引用`translatedText`后跟一个冒号和一个开引号。然后匹配以下引号之前的每个字符，并将结果捕获到*捕获组*中。

```
String s = " {\"responseData\":{\"translatedText\":\"Ciao mondo\"},\"responseDetails\":\"\",\"responseStatus\":200,\"matches\":[{\"id\":\"424913311\",\"segment\":\"Hello World\",\"translation\":\"Ciao mondo\",\"quality\":\"74\",\"reference\":\"\",\"usage-count\":50,\"subject\":\"All\",\"created-by\":\"\",\"last-updated-by\":null,\"create-date\":\"2011-12-29 19:14:22\",\"last-update-date\":\"2011-12-29 19:14:22\",\"match\":1},{\"id\":\"0\",\"segment\":\"Hello World\",\"translation\":\"Ciao a tutti\",\"quality\":\"70\",\"reference\":\"Machine Translation provided by Google, Microsoft, Worldlingo or the MyMemory customized engine.\",\"usage-count\":1,\"subject\":\"All\",\"created-by\":\"MT!\",\"last-updated-by\":null,\"create-date\":\"2012-05-14\",\"last-update-date\":\"2012-05-14\",\"match\":0.85}]}";
System.out.println(s);
Pattern p = Pattern.compile("\"translatedText\":\"([^\"]*)\"");
Matcher m = p.matcher(s);
if (!m.find()) return;
System.out.println(m.group(1)); 
```

此片段[打印`Ciao mondo`](http://ideone.com/Tpu9U)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-14T03:20:42.623

使用前瞻和后瞻来收集引号内的字符串： (?<=[,.{}:]\").*?(?=\")

```
class Test
{
    public static void main(String[] args)
    {
        Scanner scanner = new Scanner(System.in);
        String in = scanner.nextLine();

        Matcher matcher = Pattern.compile("(?<=[,.{}:]\\\").*?(?=\\\")").matcher(in);

        while(matcher.find())
            System.out.println(matcher.group());
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-14T03:25:53.903

试试这个正则表达式 -

```
^.*translatedText":"([^"]*)"},"responseDetails".*$ 
```

匹配组将包含文本 Ciao mondo。

这假定 translateText 和 responseDetails 将始终出现在您的示例中指定的位置。

# spring - 如何设置 Spring 会话范围 bean 的属性名称？

> ID：10577098
> 
> 赞同：12
> 
> 时间：2012-05-14T03:04:55.843
> 
> 标签：spring, spring-mvc, spring-webflow

给定一个配置了会话范围的 spring bean，例如：

```
@Component
@Scope(proxyMode=ScopedProxyMode.TARGET_CLASS,value=WebApplicationContext.SCOPE_SESSION)
public class SomeBean {
} 
```

有什么方法可以控制 Spring 将 bean 存储在 http 会话中的名称吗？

默认情况下使用会话键`scopedTarget.someBean`的弹簧接缝有什么我可以添加到注释中以显式指定会话中的属性名称吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-14T03:32:19.380

我会使用：

```
@Component (value="mySpecialName")
@Scope (value="session") 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2019-11-28T10:47:06.340

你不能。该`scopedTarget`部分在 Spring 的作用域代理创建中进行了硬编码。因此，如果不重写根本不可能的框架部分。

该名称被硬编码在[`ScopedProxyBeanDefinitionDecorator`](https://github.com/spring-projects/spring-framework/blob/master/spring-aop/src/main/java/org/springframework/aop/config/ScopedProxyBeanDefinitionDecorator.java#L56)which 委托给[`ScopedProxyUtils`](https://github.com/spring-projects/spring-framework/blob/master/spring-aop/src/main/java/org/springframework/aop/scope/ScopedProxyUtils.java#L106).

您使用范围代理的事实是框架内部的事情。您可能希望使用它在会话中存储某些内容并在页面或类似内容中检索它。不要，只需公开将委托给适当范围实例的常规 bean。

# postgresql - rails 3.1复杂的find_by_sql查询嵌套has_many通过模型

> ID：10577100
> 
> 赞同：0
> 
> 时间：2012-05-14T03:05:17.307
> 
> 标签：postgresql, ruby-on-rails-3.1, nested, has-many-through

我的简化 Rails 应用程序看起来像这样

```
# chapter.rb
has_many :sections
has_many :videos, through: :sections

# section.rb
belongs_to :chapter
has_many :videos

# video.rb
belongs_to :section
has_many :votes

# vote.rb
belongs_to :video 
```

我想要做的是**找到给定章节当前最流行的 5 个视频**，这意味着按照上个月收到的投票数对视频进行排序（显然限制为 5 个结果）。

我想`popular_videos`在我的章节模型中编写一个方法，我认为这需要一个`find_by_sql`查询，对吧？但我不知道足够的 sql 来编写这个查询。

投票表有一`created_at`列，我正在为我的数据库使用 postgres。任何帮助是极大的赞赏。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-14T18:58:24.747

我对rails一无所知，但是从问题中猜测表结构，我认为像下面这样的SQL将是提供你想要的一种方法：

```
SELECT video.id, video.name, count(*) as vote_count
  FROM video JOIN vote ON (video.id = vote.video_id)
  WHERE vote.date > (current_date - interval '1 month')
  GROUP BY video.id, video.name
  ORDER BY vote_count DESC
  LIMIT 5; 
```

如果您运行的是 PostgreSQL 9.1 或更高版本，您可能可以`video.name`从`GROUP BY`列表中省略。

# jquery - 无效的 JSON 类型 MVC 3

> ID：10577103
> 
> 赞同：1
> 
> 时间：2012-05-14T03:06:29.133
> 
> 标签：jquery, ajax, json, asp.net-mvc-3

我在网上搜索了所有内容，我认为我正确使用了 JSON，但我找不到它有什么问题。我需要将此 json 对象作为 MVC 控制器操作的参数传递：

JSON：

```
{ 
"ContactId": "0",
"Fax2": "dsad",
"Phone2": "dsad",
"Tittle": "asdsa",
"Cellphone": "dsadsd", 
"Address": { "City": "kjshksdfks",
             "Country": "undefined",
             "Id": "0",
             "State": "dsadsa"}
} 
```

.NET 对象如下：

```
public class Contact
{
    public string ContactId {get; set;}
    public string Fax2 {get; set;}
    public string Phone2 {get; set;}
    public string Tittle {get; set;}
    public string Cellphone {get; set;}
    public Address ContactAddress {get; set;}
} 
```

嵌套地址类型如下：

```
public class Address
{
    public string City {get; set;}
    public string Country {get; set;}
    public int Id {get; set;}
    public string State {get; set;}
} 
```

我的 JSON 有什么问题？，为了将干净传递给控制器​​操作，我缺少什么

确切的错误是：无效的 JSON 原语：联系人

注意：我尝试使用 javascript 对象、JSON.stringify 和 toJSON()

提前致谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-14T07:55:07.527

我怀疑您缺少 ajax 调用的内容类型。另见：[http](http://forums.asp.net/t/1665485.aspx/1?asp+net+mvc+3+json+values+not+recieving+at+controller) ://forums.asp.net/t/1665485.aspx/1?asp+net+mvc+3+json+values+not+recieving+at+controller 。

我改变了几件事 1) 标题 -> 标题和地址 -> 联系人地址；这应该有效：

JSON：

```
{
  "ContactId": "a",
  "Fax2": "b",
  "Phone2": "c",
  "Title": "d",
  "Cellphone": "e",
  "ContactAddress": {
      "Id": 22,
      "City": "a",
      "State": "b",
      "Country": "c"
    }
} 
```

称呼：

```
<script>
    var contact = { "ContactId": "a", "Fax2": "b", "Phone2": "c", "Title": "d", "Cellphone": "e", "ContactAddress": { "Id": 22, "City": "a", "State": "b", "Country": "c"} };

    $.ajax({
        type: 'POST',
        url: '[YOUR-URL]',
        data: JSON.stringify(contact),
        success: function (result) {
            alert('success');
        },
        dataType: "json",
        contentType: "application/json; charset=utf-8"
    });
</script> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-14T15:45:36.040

完成，我分享解决方案：

由于请求表明它是“json”类型，因此附加类型必须在 json 中，否则路由引擎会将其视为非 json 对象，因此标记 json 无效，所以，在我的如果我这样做：

```
{
  "ContactId": "a",
  "Fax2": "b",
  "Phone2": "c",
  "Title": "d",
  "Cellphone": "e",
  "ContactAddress": {
      "Id": 22,
      "City": "a",
      "State": "b",
      "Country": "c"
    }
},{"provider": 1} 
```

尽管它不需要任何额外的配置，因为使用 JSON 来传递额外的参数，但在使用 .NET 对象的不同场景中，我们必须指定控制器可以接受许多参数。因此，为此我们必须配置控制器路由：

```
context.MapRoute(
    "Providers_default",
    "Catalogs/{controller}/{action}/{id1}/{id2}",
    new { controlller = "Provider", action = "Index", id = UrlParameter.Optional }
); 
```

这是一个链接： [http ://weblogs.asp.net/scottgu/archive/2007/12/03/asp-net-mvc-framework-part-2-url-routing.aspx](http://weblogs.asp.net/scottgu/archive/2007/12/03/asp-net-mvc-framework-part-2-url-routing.aspx)

最好的祝福！

# java - 将集合绑定到表单 - 为什么它不起作用？

> ID：10577104
> 
> 赞同：1
> 
> 时间：2012-05-14T03:06:34.107
> 
> 标签：java, spring, spring-mvc

有人可以帮我找出为什么我尝试将 Collection 绑定到 Spring MVC 中的表单不起作用吗？

这是我的对象的样子 -

```
public class TestObj {
   private Integer testNumber;
   private String home;
   private String destination;
} 
```

这是我的表单对象，其中包含上述对象的列表 -

```
public class TestForm {
   private List<TestObj> testList;
   //contains getter and setter for testList
} 
```

在我的控制器中，我实现了 formBackingObject 方法 -

```
public class MyController extends SimpleFormController {

    public MyController() {
        setCommandClass(TestForm.class);
        setCommandName("testForm");
    }

        protected Object formBackingObject(HttpServletRequest request) throws Exception {
           if (isFormSubmission(request)) {
              testForm = (TestForm) super.formBackingObject(request);
              //THIS ALWAYS RETURNS NULL ON FORM SUBMISSION 
              List<TestObj> testList = testForm.getTestList();
           } else {
              //load initial data using hibernate. TestObj is hibernate domain object.
              List<TestObj> testList = myService.findTestList();
              testForm = new TestForm(testList);
           }
           return testForm;
        } 
```

这是我的 JSP 片段 -

```
<form:form commandName="testForm" method="post">
   <c:forEach items="${testForm.testList}" var="testvar" varStatus="testRow">
     <tr>
       <td>
          <form:hidden path="testList[${testRow.index}].home" />
          <c:out value="${testvar.home}" />
    </td>
    <td>
      <form:input path="testList[${testRow.index}].destination" />
    </td>
     </tr>
   </c:forEach>
   <tr><td><input type="submit"></td></tr>
</form:form> 
```

虽然第一次加载数据时表单上显示良好，但当我按下提交按钮时，控件转到 formBackingObject 方法并且 isFormSubmission 返回 true。但是，当我使用 super.formBackingObject(request) 获取命令对象时，它会返回 testList 值为 null 的表单对象。我无法弄清楚为什么这个简单的案例不起作用？

我将非常感谢任何帮助使其正常工作。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-14T04:02:56.667

您使用的是 Spring 3 吗？如果是这样，你应该看看[这篇文章](https://stackoverflow.com/questions/4734259/spring-simpleformcontroller-in-3-0)。

关于列表处理和对象绑定，看看[这篇文章](https://stackoverflow.com/questions/1681882/spring-3-collection-binding)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-14T05:32:23.497

尝试使用以下代码。也许这可以解决你的问题。

```
private List<TestObj> operationParameterses = LazyList.decorate(new ArrayList<TestObj>(), FactoryUtils.instantiateFactory(TestObj.class)); 
```

它不会返回你所有的空列表。

希望对您有所帮助。

干杯。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-14T16:17:17.310

我想我对 formBackingObject 方法的理解一定是错误的。我从实现中删除了该方法，使用 referenceData 进行初始表单加载，并使用 onSubmit 在提交时对其进行处理。这可以正常工作，并且确实可以按预期返回表单中的集合。

谢谢大家的帮助。

# spring - 如何使用事务范围的持久性上下文进行非事务性读取查询？

> ID：10577110
> 
> 赞同：3
> 
> 时间：2012-05-14T03:08:40.163
> 
> 标签：spring, jpa, scope, transactional

我阅读了 Spring 文档，它说：

> @PersistenceContext 注解有一个可选的属性类型，默认为 PersistenceContextType.TRANSACTION。这个默认值是您接收共享 EntityManager 代理所需要的。

1.  这是否意味着我必须让 EntityManager 在事务中工作？
2.  它如何用于非事务性方法（读取查询），例如下面代码中的 loadProductsByCategory？
3.  “共享”是什么意思？它如何使用 EntityManager 与他人共享？
4.  我是否需要将 @Transactional 添加到方法 loadProductsByCategory 才能将 EntityManager 绑定到线程？因为 ProductDaoImpl 类是单例的并且工作在多线程中，但是 entityManager 不是线程安全的。

    ```
    @Service
    public class ProductDaoImpl implements ProductDao {
        @PersistenceContext
        private EntityManager em;
        public Collection loadProductsByCategory(String category) {
            Query query = em.createQuery("from Product as p where p.category = :category");
            query.setParameter("category", category);
            return query.getResultList();
        }
        @Transactional
        public void loadProductsByCategory(Product product) {
            em.persist(product);
        }
    } 
    ```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-05-15T05:01:08.697

以下博客链接对此行为进行了详细分析。[http://doanduyhai.wordpress.com/2011/11/21/spring-persistencecontext-explained/](http://doanduyhai.wordpress.com/2011/11/21/spring-persistencecontext-explained/)这是我的总结。

`EntityManager`是一个java接口，它允许spring提供它自己的接口实现。spring 注入的实现使用动态代理来处理对实体管理器的调用。动态代理的行为方式如下。

如果没有`@Transactional`注解，因为`loadProductsByCategory`spring 在被调用时会创建一个`EntityManager`em的实例`em.createQuery`，spring 不会返回 JPA 创建的 Query 对象，但它会返回`EntityManager`这个 spring 代理的 Spring Proxy 将所有调用转发给真正的实现`Query`并等待直到`getResult`or `getSingleResult`or`executeUpdate`被调用并立即关闭实体管理器。

因此，当没有`@Transactional`Spring 时，将确保尽快关闭实体管理器，即在实体管理器上的每个方法调用之后或提取结果集之后。在上面的示例中，如果您注释掉 query.getResultList()，您最终将泄漏一个未关闭的实体管理器实例

```
 public Collection loadProductsByCategory(String category) {
        Query query = em.createQuery("from Product as p where p.category = :category");
        query.setParameter("category", category);
        return null;
        // a leak of an entity manager will happen because getResultList() was never called, so 
        // spring had no chance to close the entity manager it created when em.creaueQuery was 
        // invoked.
        // return query.getResultList(); 
 } 
```

当有@Transactional 属性时，spring 事务管理器将在调用事务方法之前创建一个事务上下文。当事务方法调用实体管理器上的任何方法时，Spring 将创建一个全新的 EntityManager 实例并将其与当前跨国关联，如果事务方法调用另一个方法，该方法调用另一个方法并且所有这些方法都使用实体管理器，那么实体管理器是在所有这些电话中共享。这是一个例子。

```
main(..)
{
    Foo foo = call spring to get foo instance 
    foo.doFoo();
} 

public class Foo {
     @PersistenceContext 
     EntityManager em; 

     @Autowired
     Bar bar;

     @Transactional 
     public doFoo(){
         // before this method is called spring starts a spring transaction
         em.createQuery(....) // here spring will create an instance of the Entity manager 
          // and assoicated with the current tx 
         bar.doBar(); // call bar transactional method 
     }
}

public calss Bar {

      @PersistenceContext 
     EntityManager em; 

     @Transactional 
     public doBar(){
         // no tx is started here because one was already started in doFoo
         em.createQuery(....) // spring looks under the current tx and finds that it has 
            // an entity manager, was created in the doFoo() method so this entity manager
            // is used, This is what is meant by sharing of the entity manager.
     }
} 
```

回答你最后一个问题。

> 我是否需要将 @Transactional 添加到方法 loadProductsByCategory 才能将 EntityManager 绑定到线程？因为 ProductDaoImpl 类是单例的并且工作在多线程中，但是 entityManager 不是线程安全的。

@Transactional 导致 spring 将一个 spring tx 绑定到当前线程，然后实体管理器绑定到 spring tx，该 spring tx 通过线程本地绑定到当前线程。

Pro JPA 2 书在第 6 章中对这些内容进行了很好的解释，它有点密集，并且在 Java EE 的上下文中进行了解释，但是对于 spring 的步骤是相同的​​。

# css - CSS 问题：为什么 100% 宽度加 1px 边框落在 FF 浏览器中，但不在 Chrome 中？

> ID：10577116
> 
> 赞同：3
> 
> 时间：2012-05-14T03:10:10.583
> 
> 标签：css

我使用**1140px cssgrid.net 框架**，我在内容中使用 12 个 cols，侧边栏使用 2cols 和 10cols 并将border-right：1px 放在侧边栏中，为什么 10col 落在 FF 浏览器中而不是在 Crhome 中？加价：

```
<div id="sidebar" class="twocols"></div>
<div id="main_content" class="tencols"></div> 
```

款式：

```
#sidebar { border-right: 1px solid red } 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-14T03:47:53.813

可能是你必须定义`box-sizing`它。它适用于所有浏览器。

```
#sidebar { 
  border-right: 1px solid red;
  -moz-box-sizing:border-box;
  -webkit-box-sizing:border-box;
  box-sizing:border-box;
 } 
```

# php - 在类对象中调用函数时出错

> ID：10577117
> 
> 赞同：0
> 
> 时间：2012-05-14T03:10:25.607
> 
> 标签：php

我有一个示例代码：

```
class DBConnect {
    private $connect = null;
    private $query = null;
    public $result = 0;
    public $data = null;
    public $_result;

    function connect() {
        $this->connect = mysql_connect(MYSQL_HOST, MYSQL_USER, MYSQL_PASS) or die("Can't connect database");
        mysql_query("set names 'utf8'");
        mysql_select_db(MYSQL_NAME, $this->connect);
    }

    function close() {
        if($this->connect) {
            mysql_close($this->connect);    
        }
    }

    function query($sql) {
        $this->query = mysql_query($sql);
        if(!$this->query) {
            echo "Error: " . mysql_error();
            exit;
        }
    }

    function get_data($category_id) {
        $sql = 'SELECT id, name FROM category WHERE id='.$category_id;
        query($sql); // This is error
        $row = mysql_fetch_object($query);
        $data = $row->category;
        return $data;
    }
} 
```

当我运行调试时错误是：`Call to undefined function query() in line...`，如何修复它？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-14T03:23:30.827

您可以更改功能查询-> query1

```
function query1($sql) { 
        $this->query = mysql_query($sql); 
        if(!$this->query) { 
            echo "Error: " . mysql_error(); 
            exit; 
        } 
    } 
```

进而：

```
function get_data($category_id) { 
        $sql = 'SELECT id, name FROM category WHERE id='.$category_id; 
        $this->query1($sql); // Error has repair
        $row = mysql_fetch_object($query); 
        $data = $row->category; 
        return $data; 
    } 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-05-14T03:19:42.043

在这部分代码中

```
function get_data($category_id) {
        $sql = 'SELECT id, name FROM category WHERE id='.$category_id;
        $this->query($sql); // This is error -> this is suppose to
        $row = mysql_fetch_object($this->query); // this also
        $data = $row->category;
        return $data;
    } 
```

# jquery - jquery parent、parents 和最接近的不能选择或跨过部分标签

> ID：10577124
> 
> 赞同：0
> 
> 时间：2012-05-14T03:11:56.733
> 
> 标签：jquery

我在下面有一个DOM结构：

```
<div class='box'>
    <section id="profile">
        <h1>testuser</h1>
        <div id="following">
            <a class="btn unfollow" style="width: 180px;" rel="nofollow" data-remote="true" data-method="delete" href="/users/testuser/unfollow">Unfollow</a>
        </div>
    </section>
</div> 
```

然后我有一个响应链接的触发器，我有一个`$(this)`. 我可以通过一些控制台日志来确认我现在在 DOM 中。

给我一个 ID 为#following`$(this).parent()`的 div。

但是我不能选择 #profile 或 .box 使用`parents()`. 做 a`parent().parent()`也给出零？

是否有某些原因我无法通过 section 标签向上遍历 DOM 树？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-14T03:15:40.847

对我来说似乎很好：`alert($("a").parent().parent().attr("id"))`返回“个人资料”。见：http: [//jsfiddle.net/TZawQ/](http://jsfiddle.net/TZawQ/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-14T03:17:53.667

尝试使用`$.closest()`：

```
$(this).closest(".box"); 
```

当然，这个问题似乎有点可疑。我能够毫无问题地成功访问`.box`（和`#profile`） ：`$.parents`

```
$(".box").on("click", "a.btn.unfollow", function(e){
  e.preventDefault();
  $(this).parents(".box").css("background-color", "red");
}); 
```

[http://jsbin.com/uranit/edit#javascript,html](http://jsbin.com/uranit/edit#javascript,html)

我们需要看看你是如何选择这些元素的。

# python - 处理 scipy.integrate.odeint 中的 KeyboardInterrupt

> ID：10577131
> 
> 赞同：2
> 
> 时间：2012-05-14T03:13:00.537
> 
> 标签：python, exception-handling, scipy, numerical-integration

在对 scipy.integrate.odeint 的调用中评估导数时是否有合理的方法来处理异常？

如果在紧密循环中调用积分器，则此问题变得很重要，并且由于某种原因您需要停止执行。目前，我已经求助于转换`KeyboardInterrupt`为`SystemExit`异常（见下文）以使进程退出，这很好，但显然不理想。

scipy.integrate 绑定和 Fortran 代码似乎正在对 odepack.error 进行一些操作，但我不确定这些异常是否会传播到 Python 中。

```
from scipy.integrate import odeint
import numpy
import sys
import time

def derivative_faststop(func):
    def impl(*args, **kwargs):
        try:
            return func(*args, **kwargs)
        except KeyboardInterrupt:
            print sys.exc_info()
            sys.exit(1)
    return impl

@derivative_faststop
def f(x, t):
    # NB. the sleep is only present to model the real system
    time.sleep(0.5)
    return [1.0]

ts = numpy.linspace(0.00, 1.0, 11)
print odeint(f, [0.0], ts) 
```

# centos - 如何跟踪来自哪个环境变量

> ID：10577134
> 
> 赞同：1
> 
> 时间：2012-05-14T03:13:56.587
> 
> 标签：centos, environment-variables

我的同事在某处创建了一个 JAVA_HOME 变量，但他不记得了。

我检查了 /etc/profile、/etc/bashrc、/root/.bash_profile、/root/.bashrc。所有这些文件都没有设置 JAVA_HOME 的行，但它仍然不断返回旧值。

那么，有没有办法找出它来自哪里？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-14T03:25:26.893

这是一种粗略但有效的方法：

cd /
grep -r "JAVA_HOME" 。

这将递归搜索起始点（在此示例中为 UNIX 根目录）下的所有子目录，以查找包含字符串 'JAVA_HOME' 的任何文件。

您可以使用 grep -r --include="*.ext" "JAVA_HOME" 。如果您想将搜索限制为扩展名为 .ext 的文件。

# clojure - 了解 Clojure 期货

> ID：10577140
> 
> 赞同：7
> 
> 时间：2012-05-14T03:15:17.143
> 
> 标签：clojure, future

我正在尝试了解 Clojure 期货，并且我已经看到了常见的 Clojure 书籍中的示例，并且有些示例将期货用于并行计算（这似乎是有道理的）。

但是，我希望有人可以解释改编自 O'Reilly 的 Programming Clojure 书中的一个简单示例的行为。

```
(def long-calculation (future (apply + (range 1e8)))) 
```

当我尝试取消引用时，通过这样做

```
(time @long-calculation) 
```

它返回正确的结果（4999999950000000），但在我的机器上几乎是立即（0.045 毫秒）。

但是当我调用实际函数时，就像这样

```
(time (apply + (range 1e8))) 
```

我也得到了正确的结果，但所花费的时间要大得多（~ 5000 毫秒）。

当我取消对未来的引用时，我的理解是创建了一个新线程来评估表达式 - 在这种情况下，我预计它也需要大约 5000 毫秒。

为什么取消引用的未来如此迅速地返回正确的结果？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-05-14T03:25:41.800

一旦您创建未来（在单独的线程中），未来的计算就会开始。在您的情况下，计算会在您执行后立即开始`(def long-calculation ....)`

取消引用将做以下两件事之一：

*   如果未来没有完成，阻塞直到它完成然后返回值（这可能需要任意时间，或者如果未来无法终止，甚至永远不会完成）
*   如果未来已经完成，则返回结果。这几乎是瞬时的（这就是为什么您会看到非常快的取消引用返回）

您可以通过比较以下内容来看到效果：

```
;; dereference before future completes
(let [f (future (Thread/sleep 1000))]
  (time @f))
=> "Elapsed time: 999.46176 msecs"

;; dereference after future completes
(let [f (future (Thread/sleep 1000))]
  (Thread/sleep 2000)
  (time @f))
=> "Elapsed time: 0.039598 msecs" 
```

# android - Vuforia & Unity 1.5 不在 Android 上的场景中渲染对象

> ID：10577148
> 
> 赞同：3
> 
> 时间：2012-05-14T03:16:54.683
> 
> 标签：android, unity3d, qcar-sdk

我对这个问题感到非常沮丧，Unity3D 社区也不是很有帮助，因为没有人回答我的问题。我进行了大量搜索以找出问题所在，但没有成功。我安装了 Qualcomm Vuforia 1.5 和 Unity3D 1.5.0.f。我使用 Unity 扩展。我导入了他们的名为 vuforia-imagetargets-android-1-5-10.unitypackage 的演示应用程序，将他们的木片图像目标放在场景中，他们的 AR 相机，并在图像目标顶部添加了一个盒子对象。然后我构建它并发送到我的三星 Galaxy 平板电脑。但是，当我在平板电脑上打开应用程序并将平板电脑指向图像目标时，什么都没有显示 - 框不存在。就好像我没有在场景中添加任何对象一样。我只看到设备摄像头看到的内容。

以前有人经历过吗？你有什么想法可能是错的吗？似乎没有人在网上抱怨它。

谢谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-07T04:51:37.167

确保您为 ARCamera 激​​活并加载了 ImageTarget 数据集（在检查器中，在 Data Set Load Behaviour 下），并且检查器中 Camera 子标题旁边的复选框已选中。

还要确保立方体（或其他 3d 对象）是层次结构中 ImageTarget 的子对象，并且您的 ImageTarget 对象将其“图像目标行为”设置为预期图像。

您可能还必须以不可见场景的方式指向 ARCamera。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-15T03:53:09.577

好的。我得到了解决方案。我在高通的论坛上问过，一位绅士很好地向我解释说我错过了在 Unity 的 AR 相机中设置数据集加载行为。我必须激活图像目标数据集并加载相应的图像目标。一旦我设置了这两个东西，构建和部署，一切都运行良好。

祝你好运！

# c - 宏中使用的 __builtin 函数的 GCC 优化

> ID：10577149
> 
> 赞同：2
> 
> 时间：2012-05-14T03:17:19.413
> 
> 标签：c, gcc, macros

如果我有一个像这样的宏：

```
#define MAX_SIZE ((1<<18)-1) 
```

我可以放心，到运行时这个数学已经完成并且 MAX_SIZE 是一个文字。

我的问题是，如果我使用 __builtin 函数，例如：

```
#define BIT_OFFSET (__builtin_clz(MAX_SIZE)) 
```

这是否也会在运行时变成一个常数？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-14T03:49:20.537

对于某些值、某些机器和某些编译器的某些版本，__builtin_clz(constant) 将在编译时进行评估。但是不能保证它会在编译时针对所有值、所有机器和所有编译器进行评估。使用 gcc -S 查看编译器在目标机器上做了什么。

# python - slimxmpp '从 xml 流读取错误' 已连接 <--> 已断开循环

> ID：10577150
> 
> 赞同：1
> 
> 时间：2012-05-14T03:17:23.467
> 
> 标签：python, xml, django, xmpp, google-talk

我在开发分支上。

我`EchoBot`只修改了一点，下面是更改/添加的代码，否则我从源代码中包含的示例中获取其余部分：

```
self.add_event_handler("session_start", self.start)
self.add_event_handler("changed_status", self.change)
...

def start(self, event):
    self.send_presence(pshow='xa' , ppriority="0")
    self.get_roster()

def change(self, event):
    #This is django stuff, essentially what I am trying to do is log info from changed_status events
    c = Change(jid = event['from'], timestamp = timezone.now(), new_availability = event['type'], new_priority = event['priority'])
    c.save()
```

我在开始一段时间时遇到了麻烦，然后在重新启动后它工作了大约一个小时，然后似乎突然出现了以下相同的错误。接下来发生的基本上是一个连接循环，然后另一个 XML 流错误导致断开连接等......

```
ERROR    Error reading from XML stream.
DEBUG    reconnecting...
DEBUG    SEND (IMMED): 
INFO     Waiting for  from server
DEBUG     ==== TRANSITION connected -> disconnected
DEBUG    connecting...
DEBUG    Waiting 1.84108932156 seconds before connecting.
DEBUG    Connecting to xx.xxx.xxx.xxx:xxxx
DEBUG     ==== TRANSITION disconnected -> connected
DEBUG    SEND (IMMED): 
DEBUG    RECV: X-GOOGLE-TOKENX-OAUTH2
DEBUG    SEND (IMMED): 
DEBUG    RECV: 
DEBUG    Starting TLS
INFO     Negotiating TLS
INFO     Using SSL version: 3 
```

发生此错误后，如果我尝试从中运行`EchoBot`，`echo_client.py`我会卡在`connecting to xx.xxx.xxx.xxx:xxxx`.

如果我`EchoBot`再次运行我的版本，它会开始正常工作，但我担心会再次出现其他错误。

可能相关：
* 连接到 Google Talk
* 还通过我的浏览器登录了 gmail
* 还在我的 Android 上登录了 Google Talk

我的问题是如何解决这个错误，或者如何捕捉并正确处理它？

# javascript - Google Maps API：查找动态生成的缩放和中心？

> ID：10577151
> 
> 赞同：2
> 
> 时间：2012-05-14T03:17:32.350
> 
> 标签：javascript, jquery, google-maps

我在 javascript 和调试方面很糟糕（php 是我的最爱）。我动态生成一个列表以显示在地图上，现在我需要找到坐标的中心，然后缩小以显示所有坐标。这是我使用的代码，是从另一个 SO 成员那里找到的。

```
 var map = null;
    var markerArray = []; //create a global array to store markers
    var locations = [
        ['Bondi Beach', -33.890542, 151.274856, 4, 'http://www.kjftw.com/sandbox/gmap/images/icons/numeric/red04.png'],
        ['Coogee Beach', -33.923036, 151.259052, 5, 'http://www.kjftw.com/sandbox/gmap/images/icons/numeric/red05.png'],
        ['Cronulla Beach', -34.028249, 151.157507, 3, 'http://www.kjftw.com/sandbox/gmap/images/icons/numeric/red03.png'],
        ['Manly Beach', -33.80010128657071, 151.28747820854187, 2, 'http://www.kjftw.com/sandbox/gmap/images/icons/numeric/red02.png'],
        ['Maroubra Beach', -33.950198, 187.259302, 1, 'http://www.kjftw.com/sandbox/gmap/images/icons/numeric/red01.png']];

    function initialize() {
        var myOptions = {
            zoom: 10,
            center: new google.maps.LatLng(-33.80010128657071, 151.28747820854187),
            mapTypeControl: true,
            mapTypeControlOptions: {
                style: google.maps.MapTypeControlStyle.DROPDOWN_MENU
            },
            navigationControl: true,
            mapTypeId: google.maps.MapTypeId.ROADMAP
        }
        map = new google.maps.Map(document.getElementById("map_canvas"), myOptions);

        google.maps.event.addListener(map, 'click', function() {
            infowindow.close();
        });

        // Add markers to the map
        // Set up markers based on the number of elements within the myPoints array
        for (var i = 0; i < locations.length; i++) {
            createMarker(new google.maps.LatLng(locations[i][1], locations[i][2]),locations[i][0], locations[i][3], locations[i][4]);
        }

        mc.addMarkers(markerArray, true);
    }

    var infowindow = new google.maps.InfoWindow({
        size: new google.maps.Size(150, 50)
    });

    function createMarker(latlng, myTitle, myNum, myIcon) {
        var contentString = myTitle;
        var marker = new google.maps.Marker({
            position: latlng,
            map: map,
            icon: myIcon,
            zIndex: Math.round(latlng.lat() * -100000) << 5,
            title: myTitle
        });

        google.maps.event.addListener(marker, 'click', function() {
            infowindow.setContent(contentString);
            infowindow.open(map, marker);
        });

        markerArray.push(marker); //push local var marker into global array
    }

    window.onload = initialize; 
```

看来这是所需的功能（在答案中找到）[Google Maps API：计算折线的中心/缩放，](https://stackoverflow.com/questions/3320925/google-maps-api-calculate-center-zoom-of-polyline) 但我不知道如何实现它。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-14T03:41:24.483

尝试将该解决方案应用于您的`initialize`函数，如下所示：

```
function initialize() {

    ...

    map = new google.maps.Map(document.getElementById("map_canvas"), myOptions);

    google.maps.event.addListener(map, 'click', function() {
        infowindow.close();
    });

    // instantiate the bounds object
    var bounds = new google.maps.LatLngBounds();

    // Add markers to the map
    // Set up markers based on the number of elements within the myPoints array
    for (var i = 0; i < locations.length; i++) {
        var locationLatLng = new google.maps.LatLng(locations[i][1], locations[i][2]);

        createMarker(locationLatLng,
                     locations[i][0], 
                     locations[i][3], 
                     locations[i][4]);

        bounds.extend(locationLatLng);
    }

    map.fitBounds(bounds);

    ...
} 
```

希望这可以帮助

# objective-c - 随机图像错误

> ID：10577155
> 
> 赞同：0
> 
> 时间：2012-05-14T03:18:43.933
> 
> 标签：objective-c, xcode4, uiimage, arc4random

我正在制作一个应用程序，当您按下按钮时，它会给您一个随机图像。当我运行它时，我没有收到任何错误，但是当我单击按钮时，应用程序冻结，并且在 xcode 上，它在此代码的末尾显示“线程 1：断点 1.1”：

```
-(void)changeLabel{

    progressView.progress += 0.15;

    if (progressView.progress == 1) {

        label.hidden = YES;

        progressView.hidden = YES;

        [timer invalidate];

        imagenesTest.hidden = NO;

         int randomNumber = arc4random() % 4;

        switch (randomNumber) {

            case 0:

                imagenesTest.image = [UIImage imageNamed:@"image1.png"];

                break;
            case 1:

                imagenesTest.image = [UIImage imageNamed:@"image2.png"];

                break;
            case 2:

                imagenesTest.image = [UIImage imageNamed:@"image3.png"];
                break;

            case 3:

                imagenesTest.image = [UIImage imageNamed:@"image4.png"];
         default:
                break;
}
}
} 
```

当我按下一个按钮时，它应该激活一个进度条，然后放置随机图像。它在进度条开始工作之前给出错误。这是我的按钮代码：

```
- (IBAction)scan:(id)sender {

    label.hidden = NO;

    imagenesTest.hidden = YES;

    progressView.hidden = NO;

    progressView.progress = 0;

    timer = [NSTimer scheduledTimerWithTimeInterval:1 target:self selector:@selector(changeLabel) userInfo:nil repeats:YES];

} 
```

当我单击线程时，它会突出显示我

```
0x94feb6:  jmp    0x3ef05 
                  ; -[UIWindow _setRotatableClient:toOrientation:updateStatusBar:duration:force:isRotating:] + 4724 
```

我对代码做错了吗？对不起，如果我没有很好地解释自己，我几个月前开始编程

谢谢你，埃米利奥

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-14T06:48:10.077

如果这是控制台告诉我们的所有信息，这不是错误消息，这意味着您添加了一个断点。在您的代码旁边，您会看到一条排水沟线，如果您按下它，您可以添加断点，这些断点是这些蓝色箭头的东西。这是一张图片：

因此，要取消选择断点，只需单击它或右键单击它并按删除。

还要禁用断点：command+Y 或按顶部靠近停止按钮和方案栏和构建状态栏的断点选择按钮

检查我对这个最近类似问题的回答： [iPhone 应用程序简单计算器 - 客观 c 错误](https://stackoverflow.com/questions/10568775/iphone-app-simple-calculator-objective-c-error/10568801#10568801)

更新：

你能放一些`NSLog`检查图像是否有效以及方法是否被调用。告诉我你的结果！

`NSLog`基本上是登录调试控制台。因此，添加`NSLog(@"test");`到您的方法中，如果它被打印到控制台中，您就知道该方法已被调用

也可以`if`发表声明说

```
if (image) {
NSLog(@"image is valid");
} 
```

该语句的条件仅在`image`非零/有效/初始化时发生。所以

> 图片有效

应该打印在调试控制台中

# asp.net - 未找到请求的处理程序：

> ID：10577159
> 
> 赞同：10
> 
> 时间：2012-05-14T03:19:07.997
> 
> 标签：asp.net, web-services, servicestack, servicestack-bsd

我第一次构建服务栈：hello world。

[我已按照此处](http://servicestack.net/ServiceStack.Hello/#view-webservice)的分步指南进行操作：

但这给了我一个错误：未找到请求的处理程序：可能缺少什么？谢谢。

这是我的 global.asax.cs

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Web;
using System.Web.Security;
using System.Web.SessionState;
using ServiceStack.ServiceHost;
using ServiceStack.WebHost.Endpoints;

namespace ServiceStack.SearchService
{
    public class Global : System.Web.HttpApplication
    {
        public class Hello { public string Name { get; set; } }
        public class HelloResponse { public string Result { get; set; } }
        public class HelloService : IService<Hello>
        {
            public object Execute(Hello request)
            {
                return new HelloResponse { Result = "Hello, " + request.Name };
            }
        }

        /// Web Service Singleton AppHost
        public class HelloAppHost : AppHostBase
        {
            //Tell Service Stack the name of your application and where to find your web services
            public HelloAppHost()
                : base("Hello Web Services", typeof(HelloService).Assembly) { }

            public override void Configure(Funq.Container container) { }
        }

        protected void Application_Start(object sender, EventArgs e)
        {
            //Initialize your application
            var appHost = new HelloAppHost();
            appHost.Init();
        }

        void Application_End(object sender, EventArgs e)
        {
            //  Code that runs on application shutdown

        }

        void Application_Error(object sender, EventArgs e)
        {
            // Code that runs when an unhandled error occurs

        }

        void Session_Start(object sender, EventArgs e)
        {
            // Code that runs when a new session is started

        }

        void Session_End(object sender, EventArgs e)
        {
            // Code that runs when a session ends. 
            // Note: The Session_End event is raised only when the sessionstate mode
            // is set to InProc in the Web.config file. If session mode is set to StateServer 
            // or SQLServer, the event is not raised.

        }

    }
} 
```

这是我的 web.config：

```
<?xml version="1.0" encoding="utf-8"?>
<!--
  For more information on how to configure your ASP.NET application, please visit
  http://go.microsoft.com/fwlink/?LinkId=169433
  -->
<configuration>
  <connectionStrings>
    <add name="ApplicationServices" connectionString="data source=.\SQLEXPRESS;Integrated Security=SSPI;AttachDBFilename=|DataDirectory|\aspnetdb.mdf;User Instance=true" providerName="System.Data.SqlClient" />
  </connectionStrings>
  <system.web>
    <compilation debug="true" targetFramework="4.0" />
    <authentication mode="Forms">
      <forms loginUrl="~/Account/Login.aspx" timeout="2880" />
    </authentication>
    <membership>
      <providers>
        <clear />
        <add name="AspNetSqlMembershipProvider" type="System.Web.Security.SqlMembershipProvider" connectionStringName="ApplicationServices" enablePasswordRetrieval="false" enablePasswordReset="true" requiresQuestionAndAnswer="false" requiresUniqueEmail="false" maxInvalidPasswordAttempts="5" minRequiredPasswordLength="6" minRequiredNonalphanumericCharacters="0" passwordAttemptWindow="10" applicationName="/" />
      </providers>
    </membership>
    <profile>
      <providers>
        <clear />
        <add name="AspNetSqlProfileProvider" type="System.Web.Profile.SqlProfileProvider" connectionStringName="ApplicationServices" applicationName="/" />
      </providers>
    </profile>
    <roleManager enabled="false">
      <providers>
        <clear />
        <add name="AspNetSqlRoleProvider" type="System.Web.Security.SqlRoleProvider" connectionStringName="ApplicationServices" applicationName="/" />
        <add name="AspNetWindowsTokenRoleProvider" type="System.Web.Security.WindowsTokenRoleProvider" applicationName="/" />
      </providers>
    </roleManager>
    <httpHandlers>
      <add path="*" type="ServiceStack.WebHost.Endpoints.ServiceStackHttpHandlerFactory, ServiceStack" verb="*" />
      <add path="api*" type="ServiceStack.WebHost.Endpoints.ServiceStackHttpHandlerFactory, ServiceStack" verb="*" />
    </httpHandlers>
  </system.web>
  <system.webServer>
    <modules runAllManagedModulesForAllRequests="true" />
    <validation validateIntegratedModeConfiguration="false" />
    <handlers>
      <add path="*" name="ServiceStack.Factory" type="ServiceStack.WebHost.Endpoints.ServiceStackHttpHandlerFactory, ServiceStack" verb="*" preCondition="integratedMode" resourceType="Unspecified" allowPathInfo="true" />
    </handlers>
  </system.webServer>
  <location path="servicestack">
    <system.web>
      <httpHandlers>
        <add path="*" type="ServiceStack.WebHost.Endpoints.ServiceStackHttpHandlerFactory, ServiceStack" verb="*" />
        <add path="servicestack*" type="ServiceStack.WebHost.Endpoints.ServiceStackHttpHandlerFactory, ServiceStack" verb="*"/>
      </httpHandlers>
    </system.web>
    <!-- Required for IIS 7.0 -->
    <system.webServer>
      <modules runAllManagedModulesForAllRequests="true" />
      <validation validateIntegratedModeConfiguration="false" />
      <handlers>
        <add path="*" name="ServiceStack.Factory" type="ServiceStack.WebHost.Endpoints.ServiceStackHttpHandlerFactory, ServiceStack" verb="*" preCondition="integratedMode" resourceType="Unspecified" allowPathInfo="true" />
      </handlers>
    </system.webServer>
  </location>
</configuration> 
```

我通过在浏览器中输入来浏览它。

```
http://localhost:50097/ServiceStack.SearchService/servicestack/metadata 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-11-24T14:26:38.073

如果您要将服务映射到自定义路径，则该列表中缺少一个小步骤。 [你可以在这里找到它](https://github.com/ServiceStack/ServiceStack/wiki/Run-servicestack-side-by-side-with-another-web-framework)：

引用缺少的步骤：

> 您还需要在 AppHost 中配置根路径。

```
public override void Configure(Container container)
{
    SetConfig(new EndpointHostConfig { ServiceStackHandlerFactoryPath = "api" });
} 
```

`"api"`您正在使用的自定义路径的名称在哪里。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-05-14T18:43:22.290

看起来您正在尝试在**/**根路径以及混合路径`/servicestack`和`/api`自定义路径中托管 ServiceStack。您需要选择其中一个，而不是所有 3 个的组合。如果您想在[/ 根路径](http://www.servicestack.net/ServiceStack.Hello/#rootpath)托管，请使用以下配置：

```
<system.web>
  <httpHandlers>
    <add path="*" type="ServiceStack.WebHost.Endpoints.ServiceStackHttpHandlerFactory, ServiceStack" verb="*"/>
  </httpHandlers>
</system.web>

<!-- Required for IIS 7.0 -->
<system.webServer>
  <handlers>
    <add path="*" name="ServiceStack.Factory" type="ServiceStack.WebHost.Endpoints.ServiceStackHttpHandlerFactory, ServiceStack" verb="*" preCondition="integratedMode" resourceType="Unspecified" allowPathInfo="true" />
  </handlers>
</system.webServer> 
```

以上应该替换所有其他 ServiceStack 配置映射。完成此操作后，您应该能够在以下位置查看元数据页面：

`http://localhost:50097/metadata`

注意：如果您在端口上运行 ASP.NET，那么您不太可能还拥有虚拟目录路径`/ServiceStack.SearchService/`。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2014-01-17T02:18:39.673

我遇到了这个确切的问题，但找不到直接的答案——在最简单的 ServiceStack 演示中出现 403.14 错误。

**..:: 简单答案::..**

你的答案很简单。您通过提供 3 而不是 Mythz 提到的 1 来混淆您的处理程序。此外，您的请求没有指定的路线。

```
[Route("/hello")]
public class Hello { public string Name { get; set; } } 
```

这将解决您的 403.13 错误（语义问题），您可以转到 http://{localdomain}:{port}/hello 并实际查看元数据（用分配给 IIS Express 的实际端口号替换 {port}你）。如果不进行此调整，您将需要访问 http://{localdomain}:{port}/metadata。

**..:: 详细解答 ::..**

路由，因为它与 ServiceStack 中的 IIS 相关，是通过语义/约定完成的。由于这些路由是动态的，当 IIS 在运行时没有提供正确的路由时，它会假定存在文件夹问题（物理路径）并抛出 403.14 错误。同时，如果您提供了多个路径而应该只有一个路径，那么在运行时当一切都连接好时会发生不好的事情。

为了确保您拥有所有必需品，这里是您需要对提供的原始代码进行的所有调整。

一个。调整 Web 配置文件以仅处理 Mythz 响应中探索的一个路径

```
<system.web>
  <httpHandlers>
    <add path="*" type="ServiceStack.WebHost.Endpoints.ServiceStackHttpHandlerFactory, ServiceStack" verb="*"/>
  </httpHandlers>
</system.web>

<!-- Required for IIS 7.0 -->
<system.webServer>
  <handlers>
    <add path="*" name="ServiceStack.Factory" type="ServiceStack.WebHost.Endpoints.ServiceStackHttpHandlerFactory, ServiceStack" verb="*" preCondition="integratedMode" resourceType="Unspecified" allowPathInfo="true" />
  </handlers>
</system.webServer> 
```

湾。进行本文前面所述的路线调整。

# arrays - lua中的数组索引

> ID：10577164
> 
> 赞同：0
> 
> 时间：2012-05-14T03:19:34.833
> 
> 标签：arrays, loops, lua, coronasdk

在 lua 中显示数组时，它总是从 1 开始，所以如果我使用它`select * from ...`作为`table.id`. 我现在的问题是，如果 sql 查询`table.id`不是以 1 开头，或者会是这样`[3,5,6, ...]`怎么办？

我的代码是这样的，

```
local data = {}

for row in db:nrows("SELECT song.id as id, song.title as song, artist.name as artist, genre.name as genre, album.title as album FROM song, artist, genre, album WHERE song.artist_id = artist.id AND song.genre_id = genre.id AND song.album_id = album.id AND song.duration = 120.00") do
                        data[row.id] = {}
                        data[row.id].song = row.song
                        data[row.id].artist = row.artist
                        data[row.id].genre = row.genre
                        data[row.id].album = row.album
end 
```

所以输出`row.id`是 [3,5,6, ..] 因为我使用了`row.id`作为数组的索引`data`。

我的问题是我应该做什么或使用什么才能使数组的索引`data`变成这样，[1,2,3,....]？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-14T03:22:47.543

您可以只使用索引变量：

```
local data = {}
local next = 1

for row in db:nrows("SELECT song.id as id, song.title as song, artist.name as artist, genre.name as genre, album.title as album FROM song, artist, genre, album WHERE song.artist_id = artist.id AND song.genre_id = genre.id AND song.album_id = album.id AND song.duration = 120.00") do
    data[next] = row
    next = next + 1
end 
```

# php - 检查名称是否在数据库中？

> ID：10577169
> 
> 赞同：0
> 
> 时间：2012-05-14T03:21:00.003
> 
> 标签：php, mysql

我有一张表，其中包括 16 个汽车名称。如果在数据库中找到汽车的名称，我想更改字体颜色和大小。

这是我的桌子：

![在此处输入图像描述](../Images/c44b8c73b73d1b5472de860d64ec5f66.png)

这是我前三辆车的 PHP 代码：

```
<?php
$connection = mysql_connect($host,$user,$password);
if (!$connection){
  die('Could not connect: ' . mysql_error());
}
mysql_select_db("cars", $connection);

$carname="car";
$squery = mysql_query("SELECT * FROM marks WHERE care_name=$car_name ");
echo"<div class='cars'>";
if(mysql_fetch_array($squery))  {
    echo"<r><strong>". $row['car1'] ."<strong></r>";
}
else{
    echo"<p>". $row['car1'] ."</p>";
}
echo"</div>";

echo"<div class='cars'>";
if(mysql_fetch_array($squery))  {
    echo"<r><strong>". $row['car2'] ."<strong></r>";
}
else{
    echo"<p>". $row['car2'] ."</p>";
}
echo"</div>";

echo"<div class='cars'>";
if(mysql_fetch_array($squery))  {
    echo"<r><strong>". $row['car3'] ."<strong></r>";
}
else{
    echo"<p>". $row['car3'] ."</p>";
}
echo"</div>";

?> 
```

但是，这不起作用，它只在第一辆车上（`car1`）。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-14T03:24:54.013

您正在使用诸如 $row 之类的变量，而没有先为其赋值。您需要将返回值保存`mysql_fetch_array`到`$row`变量中，例如

```
$row = mysql_fetch_array($squery);
if($row){
...
} 
```

编辑：在进一步检查您的代码时，它包含多个基本错误，例如

*   使用没有赋值的变量；
*   每次从 $row 访问汽车时，您都使用不同的名称（
    至少我希望这是一个编码错误，而不是您的数据库表中有 16 列，每辆车一个列......）；
*   如果 mysql_fetch_array 失败，你仍然尝试打印内容
*   您正在为每个单独的 mysql_fetch_array 编写代码，而不是使用循环

可能还有很多其他人。在我们提供进一步帮助之前，您确实需要提高对编码实践（可能还有数据库）的基本了解，因为这里有太多基本错误表明您对您正在尝试做的事情缺乏了解

# django - Django 项目目录可以有或没有 South 更简单的结构吗？

> ID：10577170
> 
> 赞同：3
> 
> 时间：2012-05-14T03:21:39.440
> 
> 标签：django, model-view-controller, migration, django-south

我是 Django 的新手。

但是，我对 Django 的目录结构有点困惑。例如，我必须在不同的地方编写这么多的models.py，这可能会导致将来维护项目的困难。我想让它更像真正的 MVC 结构，每个模型文件都在一个模型目录中。

是否可以使用 South 来做到这一点，它似乎只查看 models.py，还是我应该考虑使用不同的迁移工具？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-14T04:59:42.677

Django 将代码组织到“应用程序”中，这就是为什么你有单独的 models.py 文件的原因，我认为没有办法将它们全部放在一个目录中，因为每个应用程序都有自己的 Python 包。

但是，我通常构建代码的方式是为我的所有代码创建一个（或几个，如果它是一个更大的项目）应用程序，因为您可以在单个 models.py 文件中拥有任意数量的模型。

我不认为 South 会帮助你，但它会让你更容易管理你的迁移，所以我强烈推荐它。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-14T07:25:19.820

我认为 django 中没有将所有模型放在一个地方的规定。而且把所有东西放在一个地方也是个坏主意。因为每个应用程序都有自己的数据库架构，并且将应用程序独立起来是实现可重用性因素的必要条件。最好让模型彼此隔离，附加到他们的应用程序，因为它有助于可重用性。

南方没有做到这一点。它只是跟踪你的 Db 迁移 n 固定装置。

无论 DB Schema 设计得多么完美，South 都会在某一时刻出现。

# c# - 从字符串中提取字符串

> ID：10577172
> 
> 赞同：0
> 
> 时间：2012-05-14T03:22:14.097
> 
> 标签：c#, asp.net, regex, string

我会浪费很多时间，因为我在处理字符串/字符方面没有太多经验。

我有

```
string original = "1111,2222,"This is test work")"; 
```

我需要

```
string first = "1111";
string second = "2222";
string name = "This is test work"; 
```

C# ASP.NET

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-14T03:26:32.573

使用[`string.Split()`](http://msdn.microsoft.com/en-us/library/b873y76a)- 您的模式很简单（以逗号分隔），此处无需使用 RegEx：

```
var parts = original.Split(',');
first = parts[0];
second = parts[1];
name = parts[2].TrimEnd(')'); //in case you really wanted to remove that last bracket 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-14T03:26:39.890

使用[String.Split](http://msdn.microsoft.com/en-us/library/b873y76a.aspx)方法：

```
string[] values = original.Split(new Char [] {','}); 
```

这将在每个逗号处拆分您的字符串并返回一个包含每个部分的字符串数组。访问：

```
string first = values[0];
string second = values[1];
string name = values[2]; 
```

# c# - 如何检索 ADO.NET SqlCommand 的结果？

> ID：10577174
> 
> 赞同：5
> 
> 时间：2012-05-14T03:22:31.577
> 
> 标签：c#, asp.net, sql-server, select

好吧，要么我现在真的很累，要么真的很厚，但我似乎找不到答案

我正在使用 ASP.NET，我想查找表中的行数。

我知道这是 SQL 代码：`select count(*) from topics`，但是我怎么能把它显示为一个数字呢？

我要做的就是运行该代码，如果它 = 0 则显示一件事，但如果它大于 0 则显示其他内容。请帮忙？

这是我到目前为止所拥有的

```
string selectTopics = "select count(*) from topics";
// Define the ADO.NET Objects
SqlConnection con = new SqlConnection(connectionString);
SqlCommand topiccmd = new SqlCommand(selectTopics, con);
if (topiccmd == 0)
    {
        noTopics.Visible = true;
        topics.Visible = false;
    } 
```

但我知道我错过了一些严重的错误。我一直在寻找年龄，但找不到任何东西。

PHP 就简单多了。:)

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-05-14T03:28:11.027

请注意，您必须先打开连接并执行命令，然后才能访问 SQL 查询的结果。`ExecuteScalar`返回*单个*结果值（如果您的查询将返回多列和/或多行，则必须使用不同的方法）。

注意`using`构造的使用，它将安全地关闭和处理连接。

```
string selectTopics = "select count(*) from topics";
// Define the ADO.NET Objects
using (SqlConnection con = new SqlConnection(connectionString))
{
   SqlCommand topiccmd = new SqlCommand(selectTopics, con);
   con.Open();
   int numrows = (int)topiccmd.ExecuteScalar();
   if (numrows == 0)
    {
        noTopics.Visible = true;
        topics.Visible = false;
    }
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-14T03:27:02.573

**ExecuteScalar**是您正在寻找的。（SqlCommand的方法）

顺便说一句，坚持使用 C#，PHP 再简单不过了。这只是熟悉。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-14T05:54:35.653

您需要打开连接这可能有效：

```
SqlConnection sqlConnection1 = new SqlConnection("Your Connection String");
SqlCommand cmd = new SqlCommand();
SqlDataReader reader;

cmd.CommandText = "select count(*) from topics";
cmd.CommandType = CommandType.Text;
cmd.Connection = sqlConnection;
sqlConnection1.Open();

reader = cmd.ExecuteReader();
// Data is accessible through the DataReader object here.

sqlConnection1.Close(); 
```

类似问题：[C#'select count' sql 命令错误地从 sql server 返回零行](https://stackoverflow.com/q/6326208/1208585)

# ruby-on-rails-3 - pg_search 和 Rails 3.2.3 中 Multisearch 的基本设置

> ID：10577178
> 
> 赞同：2
> 
> 时间：2012-05-14T03:22:53.827
> 
> 标签：ruby-on-rails-3, full-text-search, pg-search

这是我在这里的第一个问题，经过数月的潜伏​​和吸收。所以我希望我能正确地做到这一点。

[在从这个 Railscast](http://railscasts.com/episodes/343-full-text-search-in-postgresql)了解 pg_search_scope 功能后，我一直试图让 pg_search 的多搜索功能在我的 Rails 3.2.3 应用程序中工作。我相信 pg_search 文档假定读者比我有更好的 Rails 工作知识。我只是无法从我找到的资源跳转到使用多搜索获取工作应用程序。任何帮助将非常感激。这是我的设置：

**配置/初始化程序/pg_search.rb**

```
PgSearch.multisearch_options = {
  :using => {
    :tsearch => {
      :dictionary => "english"
    },
    :trigram => {}
  },
  :ignoring => :accents
} 
```

**在视图中搜索表单**

```
<%= form_tag articles_path, method: :get do %>
    <%= text_field_tag :query, params[:query], :class => "search-box" %>
    <%= submit_tag "Search This Site", name: nil, :class => "btn btn-search" %>
<% end %> 
```

**文章.rb**

```
include PgSearch
multisearchable :against => [:title, :content]

def self.search(query)
  if query.present?
    search(query)
  else
    scoped
  end
end 
```

**文章控制器.rb**

```
def index
  @articles = PgSearch.multisearch(params[:query])

  respond_to do |format|
    format.html # index.html.erb
    format.json { render json: @articles }
  end
end 
```

搜索已知术语时，我没有得到任何搜索结果。我究竟做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-14T12:28:43.873

看起来我的错误是`@articles`在我的控制器中使用变量而不是显式定义`@pg_search_documents`，这是我在我的视图中使用的（我完全忘记发布）。出于某种原因，我认为`@articles = PgSearch.multisearch(params[:query])`在我的控制器中使用会通过 pg_search 魔术酱将搜索结果附加到“@pg_search_documents”。

# android - 无法加载android虚拟设备

> ID：10577179
> 
> 赞同：-1
> 
> 时间：2012-05-14T03:23:21.887
> 
> 标签：android

当我想使用 AVD 时出现错误：

```
[Dex Loader] Unable to execute dex: Multiple dex files define    
Lcom/willis/layout/Client_layoutActivity$1;
[client_layout] Conversion to Dalvik format failed: Unable to execute dex: Multiple dex files define Lcom/willis/layout/Client_layoutActivity$1; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-23T01:17:35.957

我收到了这些信息：

```
[2013-01-22 21:36:43 - Dex Loader] Unable to execute dex: Multiple dex files define Landroid/support/v4/accessibilityservice/AccessibilityServiceInfoCompat$AccessibilityServiceInfoVersionImpl;
[2013-01-22 21:36:43 - Prueba1] Conversion to Dalvik format failed: Unable to execute dex: Multiple dex files define Landroid/support/v4/accessibilityservice/AccessibilityServiceInfoCompat$AccessibilityServiceInfoVersionImpl 
```

我所做的是，在 Eclipse 中，转到我的**Android Dependencies**目录，然后右键单击它，选择**Build Path**然后**Remove from Build Path**，*清理*你的项目和*Build*。也许您想取消选中“*自动构建*”选项。

希望能帮助到你！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-14T04:38:15.433

您的问题与 AVD 没有任何关系，而是与 dexing 过程（转换为 Dalvik 可执行文件）有关，然后将其压缩到设备上的单个 .apk 文件中。

您似乎`com.willis.layout.Client_layoutActivity$1`不止一次包含在内。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-16T05:48:33.703

这是构建路径问题。确保您的 bin 文件夹不包含在您的构建路径中。右键单击您的项目，转到属性，然后转到构建路径。确保 Honeycomb 库在您的 libs/ 文件夹中，而不是在您的源文件夹中。将 libs/ 中的库单独包含在构建路径中。顺便说一句，您可能需要引入 android-support-v4 库来获得 Ice Cream Sandwich 支持，而不是 Honeycomb 支持库。

# java - Shell 脚本和 java 参数

> ID：10577181
> 
> 赞同：4
> 
> 时间：2012-05-14T03:23:35.150
> 
> 标签：java, shell, unix, command-line-arguments

我编写了下面的脚本**run.sh**来调用 java 类：

```
java -cp . Main $1 $2 $3 $4 
```

这是我的 java 类（它只显示参数）：

```
public class Main {
    public static void main(String[] args) {
        for (String arg : args) {
            System.out.println(arg);
        }
    }
} 
```

除非我尝试传递包含空格的参数，否则这是有效的。例如 ：

```
./run.sh This is "a test" 
```

将显示：

```
This
is
a
test 
```

如何修改我的 shell 脚本和/或更改我的参数语法以传递未修改的参数“a test”？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-05-14T03:25:08.453

像这样：

```
java -cp . Main "$@" 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-05-14T03:32:38.550

您还必须屏蔽脚本中的每个参数：

```
java -cp . Main "$1" "$2" "$3" "$4" 
```

现在参数 4 应该是空的，$3 应该是“一个测试”。

要验证，请尝试：

```
#!/bin/bash
echo 1 "$1"
echo 2 "$2"
echo 3 "$3"
echo 4 "$4"
echo all "$@" 
```

并称之为

```
./params.sh This is "a test" 
1 This
2 is
3 a test
4 
all This is a test 
```

# flash - Flash 组件（标签、uiloader 等）内容是否保留在其他帧上？

> ID：10577185
> 
> 赞同：0
> 
> 时间：2012-05-14T03:24:20.600
> 
> 标签：flash, actionscript, label, flash-cs5, uiloader

我的电影有 5 帧，全部设置为关键帧。第 1 帧包含一个名为 lblMyname 的标签和一个名为 uiMypic 的 uiloader，然后按下一些按钮将转到选定的帧。然后我将它们复制并粘贴到第 5 帧上。当电影开始时，lblMyname 将设置为一个名称，例如 Robert，uiMypic 将通过 uiMypic.source = "http://localhost/test.jpg 的代码加载图像”。

我的问题来了，当我单击按钮转到第 5 帧时，我希望看到 lblMyname 和 uiMypic 都显示与第 1 帧相同的值，但事实并非如此！lblMyname 显示它的默认文本，而 uiMypic 不显示任何内容/空白。

为什么以及如何使它们显示与第一帧相同的内容？我不想在第 5 帧再次重新加载它们的值...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-14T14:24:56.853

组件和影片剪辑的实例仅存在于它们的补间范围/关键帧中。因此，如果您有多个补间跨度或一个为 1 帧补间跨度的关键帧，则第 1 帧中的组件与第 5 帧中的组件完全不同，并且不会携带第 1 帧到第 5 帧中的值。

您可以通过使组件的补间跨度包含所有帧来使组件跨帧保持不变。现在更常见的是，在您使用代码切换图像和内容组件的第一帧中设置了类似的内容。

因此，您的“转到第 5 帧”按钮只是告诉您的代码加载图像并显示将在第 5 帧中的内容的组件标签。如果您确实希望将图像放在时间轴中，您可以将它们全部放置在第一帧中，但根据您所在的“帧”打开和关闭它们。

# c# - 如何在 Visual Studio 中设置解决方案的引用路径？

> ID：10577187
> 
> 赞同：8
> 
> 时间：2012-05-14T03:24:57.523
> 
> 标签：c#, visual-studio, visual-studio-2010

我有一个 C# 解决方案包含许多项目。每个项目引用指定文件夹中的一些 dll。根据 MSDN，我们可以在 project -> Properties -> Reference Paths 中添加项目的引用路径。它将在项目文件夹下生成一个 .csproj.user 文件，内容如下：

```
<Project ToolsVersion="4.0" xmlns="http://schemas.microsoft.com/developer/msbuild/2003">
    <PropertyGroup>
        <ReferencePath>C:\References\bin\</ReferencePath>
    </PropertyGroup>
</Project> 
```

但这仅适用于一个项目。是否有一种简单的方法可以将相同的设置应用于解决方案中的所有项目？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2015-08-18T16:44:53.860

我找到了[一篇博客文章](http://andsmi.com/post/85237953978/adding-reference-paths-to-all-projects-in-solution)，解释了如何做到这一点。

打开包管理器控制台（例如查看 | 其他窗口 | 包管理器控制台）并使用如下脚本作为相对路径：

```
$path = [System.IO.Path]; foreach ($proj in get-project -all) {$proj.Properties.Item("ReferencePath").Value="$($path::GetDirectoryName($proj.filename))\..\libs"} 
```

或者对于所有项目的单个固定项目参考：

```
foreach ($proj in get-project -all) {$proj.Properties.Item("ReferencePath").Value="C:\lib"} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-14T04:25:38.580

我不相信有，可能是因为项目可以加载到许多解决方案中，并且如果所需库的引用路径被限定为解决方案，您最终会遇到构建错误或不同的行为，具体取决于您使用的解决方案如果解决方案告诉项目在不同的地方寻找依赖关系，则构建项目。

# php - 逐行编辑表格

> ID：10577190
> 
> 赞同：0
> 
> 时间：2012-05-14T03:25:18.033
> 
> 标签：php, mysql, html-table, edit

我有一个表，其中包含从 SQL 表中检索到的数据。我在每一行的末尾附加了一个编辑按钮。编辑按钮允许用户编辑某个项目的信息。我希望编辑按钮允许用户使用它所附加的信息。例如：

```
--------------------------
NAME | AGE | GENDER |
--------------------------
  A  |  4  | Female |EDIT
--------------------------
  B  |  9  | Female |EDIT
--------------------------
  C  |  2  |  Male  |EDIT
-------------------------- 
```

如果我单击 A 行上的 EDIT 按钮，它将允许我编辑 A 的信息。请帮忙。

```
<form id="edit" name="edit" method="post" action="edititem.php">
    <table width="792" border='1' align='center' cellpadding='0' cellspacing='0' id='usertable'>
    <tr bgcolor=#706C4B  style='color:black'>
        <td width="16%" align='center'  id="box_header2" style='width:10%'>Item Name</td>
        <td width="16%" align='center'  id="box_header2" style='width:10%'>Item Quantity</td>
        <td width="14%" align='center' id="box_header2" style='width:13%'>Storage Capacity</td>
        <td width="13%" align='center' id="box_header2" style='width:11%'>Brand</td>
        <td width="13%" align='center' id="box_header2" style='width:11%'>Color</td>
        <td width="13%" align='center' id="box_header2" style='width:12%'>MAC Address</td>
        <td width="13%" align='center' id="box_header2" style='width:12%'>S/N Number</td>
        <td width="13%" align='center' id="box_header2" style='width:12%'></td>
    </tr>

 <?php
 $sql="select * from item";
 $result=mysql_query($sql);
  while ($row=mysql_fetch_array($result))
    {
    ?>
    <tr bgcolor=#cfccb7 style='color:black'>  
        <td><div align="center"><?php echo $row['item_name']?></div></td>
        <td><div align="center"><?php echo $row['item_quantity']?></div></td>
        <td><div align="center"><?php echo $row['item_capacity']?></div></td>
        <td><div align="center"><?php echo $row['item_brand']?></div></td>
        <td><div align="center"><?php echo $row['item_color']?></div></td>
        <td><div align="center"><?php echo $row['item_mac']?></div></td>
        <td><div align="center"><?php echo $row['item_sn']?></div></td>
        <td><div align="center"><input type="submit" name="button" id="button" value="Edit" /></div></td>
    </tr>
     <?php
     }
     ?>

    </table>
    </form> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-14T03:35:49.307

这是一个部分答案，可以帮助您入门。当用户单击按钮时，您需要执行如下 SQL 语句：

//定义更新查询
$SQLQuery = " update YourTableName
set column1 = ' ".$phpVariable1." ',
column2 = ' ".$phpVariable2." '
where keyCol = ' ".$phpVariableKey." ' ";

// 运行更新查询
$result = mysql_query($SQLQuery);

在您的情况下，$phpVariableKey 包含值“A”。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-14T03:39:11.343

理论上，您可能希望为每一行的按钮赋予与数据库中该行相关的唯一值（即 button_1、button_2 等）。然后，您可以根据提交按钮的值接受和处理表单输入。例如，您可以根据按钮值显示编辑屏幕，或显示可编辑的文本字段而不是表格中该行的内容。

或者，您可以通过 JavaScript 将单击处理程序附加到按钮，该处理程序将表格单元格的内容替换`input`为特定行的可编辑文本字段。在处理表单的 POST 时，您可以根据这些新文本字段的值更新数据库。

# php - 使用 ImageMagick 指定具有字体系列的字体

> ID：10577197
> 
> 赞同：9
> 
> 时间：2012-05-14T03:26:06.257
> 
> 标签：php, fonts, imagemagick, font-family

是否可以使用 ImageMagick 中的字体系列渲染字体？

我已经尝试了我能想到的一切，但似乎没有任何效果。我做了很多搜索，似乎找不到任何可以解决这个特定问题的东西。

我最终使用的是 PHP，但我也尝试在命令行上使用 ImageMagick，但没有成功。我在 Linux 上使用 ImageMagick 6.7.6。这是我到目前为止所做的。

*   `identify -list font`我已经使用命令测试了 ImageMagick 识别的字体
*   我根据系统上安装的 xml 文件手动创建了一个 type.xml 文件
*   我使用这个脚本创建了一个 type.xml 文件： [imagick_type_gen](http://www.imagemagick.org/Usage/scripts/imagick_type_gen)
*   我测试过多种字体类型：ttf、otf、pfb、ttc

`identify -list font`这是我测试过的一些字体的示例输出：

```
Font: DejaVu-Sans-Book
  family: DejaVu Sans
  style: Normal
  stretch: Normal
  weight: 400
  glyphs: /usr/share/fonts/dejavu/DejaVuSans.ttf

Font: Baskerville-Regular
  family: Baskerville
  style: Normal
  stretch: Normal
  weight: 400
  glyphs: /usr/share/fonts/custom/Baskerville.ttc

Font: Palatino-Roman
  family: Palatino
  style: Normal
  stretch: Normal
  weight: 400
  glyphs: /usr/share/fonts/urw-fonts/p052003l.pfb

Font: Honey-Script-Light
  family: Honey Script
  style: Normal
  stretch: Normal
  weight: 300
  glyphs: /usr/share/fonts/custom/HoneyScript-Light.ttf 
```

如果我指定完整的字体名称，一切都会按预期工作：

```
convert -pointsize 32 -font "Honey-Script-Light" label:'Testing' testing.png 
```

![在职的](../Images/a6724af5325a869ee948c17c4ba66e25.png)

但是，当我尝试使用字体系列（由 type.xml 列出`identify -list font`和在 type.xml 中列出）时，我得到了默认的系统字体：

```
convert -pointsize 32 -family "Honey Script" label:'Testing' testing.png 
```

![不工作](../Images/b058ed85102ea7ee8d6a76eacc1b791e.png)

我也尝试指定所有字体的参数，但它再次不起作用：

```
convert -pointsize 32 -stretch Normal -style Normal -weight 300 -family "Honey Script"   label:'Testing' testing.png 
```

当我通过 PHP 执行类似的过程时，实际上只要我尝试设置绘图对象的字体系列，它就会返回错误。

```
$draw->setFontFamily('Honey Script'); 
```

这是引发的错误：

```
PHP Fatal error:  Uncaught exception 'ImagickDrawException' with message 'Unable to set font family; parameter not found in the list of configured fonts 
```

就像命令行选项一样，如果我指定完整的字体名称，图像就会正确呈现。

```
$draw->setFont('Honey-Script-Light'); 
```

从我发现的有关如何配置要与 ImageMagick 一起使用的字体的所有内容中，确实配置了字体。为什么我不能根据字体系列选择字体？

这可能是一个未记录的错误吗？有什么我想念的吗？

我意识到我可以简单地指定完整的字体名称并完成它，但有一个特定于我的项目的原因使得指定字体系列更好。

如果它不起作用，为什么要指定字体系列？这就是 ImageMagick 关于字体系列选项的说法：

> 此设置建议 ImageMagick 应尝试使用字体系列来呈现文本。如果可以找到家庭，则使用它；如果不是，则替换默认字体（例如，“Arial”）或已知相似的系列（例如，如果请求“System”但未找到，则可能使用“Courier”）。

任何想法都非常受欢迎。我几乎被困在这一点上。

**编辑：**
我更喜欢使用字体系列而不是完全命名的字体的主要原因是因为我正在处理的输入。我从第三方收到需要处理的文件。这些文件将字体指定为：

```
font-family="Honey Script" font-style="Normal" font-stretch="Normal" font-weight="300" 
```

如果我必须根据该信息指定确切的字体名称，我需要为字体系列和属性的每个可能组合创建一个映射到确切的字体名称。由于数百种字体被添​​加到系统中，这将很难维护。

在我看来，必须有一种方法可以让 ImageMagick 根据上面列出的有关字体的所有可用详细信息来检索确切的字体。

如果那不可能，那么为什么 ImageMagick 可以选择指定字体系列呢？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2014-11-06T09:34:10.890

这是将所有可用的 Imagick 字体作为图像输出（到浏览器中）的方法

```
 public function test_fonts(){
    //load background
    $im = new Imagick();
    $im->newimage(800, 10000, 'lightgray');
    $y = 10;
    $i = 1;
    foreach($im->queryFonts() as $font){
        $insert_image = new Imagick();
        $insert_image->newImage(600, 30, 'whitesmoke');
        $insert_image->setImageFormat("png");
        $draw = new ImagickDraw();
        $draw->setFont($font);
        $draw->setFontSize(25);
        $draw->setFillColor(new ImagickPixel('black'));
        $draw->setgravity(imagick::GRAVITY_NORTH);
        $insert_image->annotateImage($draw, 0, 0, 0, $i . '.' .  $font );
        $im->compositeImage( $insert_image,  $insert_image->getImageCompose(),100, $y);
        $y += 30;
        $i++;
    }
    $im->setImageFormat('jpg');
    header('Content-Type: image/jpg');
    echo $im;

} 
```

您应该看到如下内容： ![在此处输入图像描述](../Images/90e34242cf3c727403fad7ac7bcc1578.png)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-14T03:39:35.420

这是由于字体系列的工作方式。例如，“Arial”字体系列包括粗体、斜体、下划线等的特定字体定义。在选择要在图像中使用的字体时，您必须具体。

我猜如果你真的想要，你可以这样做：

1.  取字体系列名称，用破折号替换空格
2.  如果这行得通，那就太好了！
3.  如果没有，追加`-Regular`到最后再试一次

但是你不应该对字体系列做任何程序化的事情，除非你被迫;-)

我的 imagick 知识来源主要来自这个人：http://valokuva.org/?cat= [1](http://valokuva.org/?cat=1)

# php - Yii 管理页面的高级搜索不起作用。更改了模型->搜索（）标准

> ID：10577198
> 
> 赞同：0
> 
> 时间：2012-05-14T03:26:16.817
> 
> 标签：php, yii

我编辑了我的模型->搜索功能的条件，只查看具有相同业务 ID 的数据，但现在高级搜索不起作用。

这是我模型上的代码 model->search()

```
 public function search() {
    // Warning: Please modify the following code to remove attributes that
    // should not be searched.

    $criteria = new CDbCriteria;

    $criteria->compare('LOVEAGENT_ID', $this->LOVEAGENT_ID);
    $criteria->compare('FIRST_NAME', $this->FIRST_NAME, true);
    $criteria->compare('LAST_NAME', $this->LAST_NAME, true);
    $criteria->compare('DOB', $this->DOB, true);
    $criteria->compare('PASSWORD', $this->PASSWORD, true);
    ............

    $criteria->condition = 'BUSINESS_ID=:businessID';
    $criteria->params = array(':businessID' => Yii::app()->user->businessId);

    return new CActiveDataProvider($this, array(
                'criteria' => $criteria,
            ));
} 
```

我的管理员控制器：

```
 public function actionAdmin() {
        $model = new LoveAgentContactDetails('search');
        $model->unsetAttributes();  // clear any default values

        if (isset($_GET['LoveAgentContactDetails'])) {
            $model->attributes = $_GET['LoveAgentContactDetails'];
        }

        $this->render('admin', array(
            'model' => $model,
        ));
    } 
```

和 Cgrid 视图设置在视图：

```
$this->widget('zii.widgets.grid.CGridView', array(
'id' => 'love-agent-contact-details-grid',
'dataProvider' => $model->search(),
'filter' => $model,
'columns' => array(

    'FIRST_NAME',
    'LAST_NAME',
    'lastLoginTime',
    'created',

    array(
        'class' => 'CButtonColumn',
    ),
), 
```

));

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-14T06:06:12.060

问题就在这里

```
 $criteria->condition = 'BUSINESS_ID=:businessID'; 
```

通过这种方式，您重新编写了先前准备好的条件。你可以使用`CDbCriteria::addCondition`，但最好的方法是

```
 $criteria->compare('BUSINESS_ID',Yii::app()->user->businessId); 
```

# c# - 如何访问从 A 类到 B 类的设置值

> ID：10577201
> 
> 赞同：2
> 
> 时间：2012-05-14T03:26:51.807
> 
> 标签：c#, winforms

我有A级和B级

A类有：

```
public int ID
{
    get;    
    set;
} 
```

运行程序时，将值分配给 ID ex:123 并在表单关闭时销毁并设置默认值，即 = 0

问题：如何在 B 类中的值被销毁之前保存它？所以我可以访问 B 类中的值并执行验证。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-14T03:34:28.683

让我假设`Class A`和`Class B`是双赢形式，而您`A`从`B`. 以如下形式编写`A`方法：

```
public int GetInput(){
   Show();
   return ID;
} 
```

同样在`A`的构造函数中写入以下行

```
public A()
{
    Visible=false;
} 
```

在表格`B`中写下以下打开表格`A`：

```
public void OpenA()
{
    var a=new A();
    var i=a.GetInput();
} 
```

现在`i`包含 的值`ID`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-14T05:28:28.160

我相信 Observable 模式可以帮助你。使用下一条链：主线程（Form if winforms）在关闭之前向A发送事件，A在销毁之前向B发送事件

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-14T05:40:09.803

您可以订阅 OnClosed 事件。

[http://msdn.microsoft.com/en-us/library/system.windows.forms.form.onclosed.aspx](http://msdn.microsoft.com/en-us/library/system.windows.forms.form.onclosed.aspx)

基本上，您的 B 类可以执行以下操作：

```
form.OnClosed += (sender, e) => {
    var id = form.ID;
    //Do something with the ID
} 
```

希望能帮助到你。

# java - 重构类型代码覆盖

> ID：10577202
> 
> 赞同：2
> 
> 时间：2012-05-14T03:26:52.940
> 
> 标签：java, refactoring, hierarchy

我目前正在寻找一段代码，它可以序列化/反序列化数据。

类结构看起来像这样：

```
public class Field
{
    public abstract void writeField(DataOutputStream out);

    public abstract int getFieldID();

    ...

    protected static final int INT_FIELD = 1;
    protected static final int BOOL_FIELD = 2;

    ...

    public void write(DataOutputStream out)
    {
        out.writeInt(getFieldID());
        writeField(out);
    }

    ...
}

public class IntField extends Field
{
    public int v;

    public void writeField(DataOutputStream out)
    {
        out.writeInt(v);
    }

    public int getFieldID()
    {
        return Field.INT_FIELD;
    }
} 
```

我觉得 getFieldID 的实现方式并不是最好的。

编写一个抽象方法来返回该类的唯一标识符感觉很糟糕。

有没有更好的方法来实现这一点？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-14T03:35:02.637

在基类中列出特定于子类的常量并不是一个好主意，因为理想情况下，超类不应该知道它的子类。仅仅列出基类中的常量并不像*使用*它们来区分基类代码中的子类那么糟糕。

理想情况下，您应该将常量移动到它们各自的子类中。如果你不能在不破坏编译的情况下做到这一点，那么你确实偶然发现了重构的主要候选者。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-05-14T07:02:18.173

您可以使用泛型定义一个类。像这样：

场地

```
import java.io.DataOutputStream;

public abstract class Field<T extends Object> {
    public abstract void writeField(DataOutputStream out);
    public abstract T getValue();
    public abstract Class<T> getFieldClass();
} 
```

内部字段

```
import java.io.DataOutputStream;
import java.io.IOException;

public class IntField extends Field<Integer> {
    public Integer v;

    @Override
    public void writeField(DataOutputStream out) {
        try {
            out.writeChars(v.toString());
        } catch (IOException e) {
            e.printStackTrace();
        }
    }

    @Override
    public Integer getValue() {
        return v;
    }

    @Override
    public Class<Integer> getFieldClass() {
        return Integer.class;
    }
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-14T03:34:50.280

除了使用在子类中重写的超类抽象方法使用实现继承之外，还可以使类紧密耦合。

您可以拥有一个在实现类中实现的接口，其中接口中声明的所有方法都在实现类中实现。这种方法是另一种继承方式，称为接口继承。这减少了超类和子类之间的紧密耦合。

# php - mysqli_connect 因 dbpassword 失败

> ID：10577208
> 
> 赞同：0
> 
> 时间：2012-05-14T03:28:52.167
> 
> 标签：php, mysql

我的系统似乎有一些我无法解释的奇怪问题。我有以下代码片段，可用于连接到数据库并从数据库中读取数据

```
define('DB','products');
define('HOST','localhost');
define('DBPASS','password');
define('DBUSER','root');
define('DBTABLE','product_tb');
$conn=mysqli_connect(HOST,DBUSER,DBPASS) or die('Could not connect: ' . mysqli_error($conn)); 
```

但是它总是报错我无法与mysqli_connect建立连接。我尝试在另一个系统上运行此代码，它工作正常。这是两个警告和一个失败的连接错误。

> 警告：mysqli_connect() [function.mysqli-connect]: (28000/1045): Access denied for user 'root'@'localhost' (using password: NO) in D:\xampp\htdocs\products.php on line 7
> 
> 警告：mysqli_error() 期望参数 1 为 mysqli，布尔值在第 7 行的 D:\xampp\htdocs\products.php 中给出 无法连接：

当我测试系统不需要密码时会发生这种情况，所以我将 DBPASS 留为空白，但是一旦我在真实系统上使用它，无论我是否遗漏了 DBPASS，它都会失败并出现完全相同的错误...... .我以为是缓存，但我重新启动了mysql和apache，但没有任何效果。如果你能提供一些帮助，谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-14T03:55:51.780

要检查连接错误，您应该使用 mysqli_connect_error() 而不是 mysqli_error()

这将解决您的错误消息之一。

```
$conn=mysqli_connect(HOST,DBUSER,DBPASS) or die('Could not connect: ' . mysqli_connect_error()); 
```

另一条错误消息是由数据库服务器中的无效权限引起的。阻止您访问数据库。就像@Dragon 评论的那样，您可以使用命令行中的用户名/密码组合登录吗？如果您没有 cmd 行访问权限，您是否有 php myadmin 或其他东西，您可以检查 user/pass/db 组合以确保它有效。

正如@MarcB 所说，明智的做法是使用只能访问服务器上特定数据库的登录名，而不是对所有数据库的root 访问权限。这样，如果您的代码被黑客入侵，他们将只能访问 1 个数据库（理论上）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-08-14T08:45:29.467

经过很长时间的忙碌后，我发现了这个——它实际上就在我的 cPanel->Home->MySQL 数据库中：

远程 MySQL 主机

“mysql2000.my-virtual-panel.com”是 MySQL 服务器的地址。当您连接到 MySQL 服务器时，您必须指定此主机。

$host="mysql2000.my-virtual-panel.com";

它应该有帮助。

# php - 使用 PHP 从数据库中检索的数据未以 HTML 格式显示

> ID：10577209
> 
> 赞同：0
> 
> 时间：2012-05-14T03:29:11.807
> 
> 标签：php

我遇到了一个问题，我让用户将信息输入到 textarea 并将该信息存储在 mysql 数据库中。允许用户将 HTML 插入文本区域，例如：

```
<ul>
  <li>Test</li>
</ul> 
```

但是，我无法理解为什么从数据库中检索以显示用户输入的数据的数据没有显示用户请求的正确 HTML 格式。

这就是我所拥有的： 显示信息：

```
<?php
function display ($result) {
  if (mysql_num_rows($result) > 0) {
    echo "<form action='scripts/submit.php' method='post'>";
      echo "<input type='submit' name='post' value='Post'/>";
      echo " | ";
      echo "<label for='searchDate'>Search Archives By Date:</label>";
      echo "<input type='text' name='searchDate'>";
      echo "<input type='submit' name='submitDate' value='Search'/>";
      echo " | ";
      echo "<label for='searchTicket'>Search Archives By Ticket:</label>";
      echo "<input type='text' name='searchTicket'/>";
      echo "<input type='submit' name='submitTicket' value='Search'/>";
      echo "<hr/>";
    echo "</form>";
    echo "<table border='1' id='resultTable'>";
      while($row = mysql_fetch_assoc($result)) {
      $replace = str_replace ("\n","<br/>",$row['content']);
      echo "<tr>";
        echo "<td><span id='boldText'>Entry By:</span> ".$row['user']." | <span id='boldText'>Description:</span> ".$row['description']." | <span id='boldText'>Entry Date:</span> ".$row['date']."</td>";
      echo "</tr>";
      echo "<tr>";
        echo "<td>";
            echo "<p>".$replace."</p>";
        echo "</td>";
      echo "</tr>";
      echo "<tr>";
        echo "<td>";
          echo "<form action='scripts/submit.php' method='post'>";
            echo "<input type='hidden' name='count' value='$row[count]'/>";
            echo "<input type='submit' name='edit' value='Edit'/>";
            echo "<input type='submit' name='delete' value='Delete'/>";
          echo "</form>";
        echo "</td>";
      echo "</tr>";
          }
          echo "</table>";
      }
      else {
        echo "<h3 id='noResults'>Nothing has been posted yet.  Click 'Post' to add something to the whiteboard.</h3>";
        echo "<form action='scripts/submit.php' method='post'>";
          echo "<input type='submit' name='post' value='Post'/>";
        echo "</form>";
      }
}

?> 
```

添加帖子逻辑：

```
if(isset($_POST['add_post'])) {
$content = mysql_real_escape_string($_POST['content']);
$description = mysql_real_escape_string($_POST['desc']);

  $query = "INSERT INTO $table_name (user, description, content)
            VALUES ('$_SESSION[logged_in]','$description', '$content')";
  $result = mysql_query($query);
  session_write_close();
  header('Location: ../whiteboard.php');
} 
```

出于某种原因，上面的示例将不起作用，但这将：

```
<p style="font-weight: 900;">Test</p> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-14T04:08:00.783

[在使用htmlentities()](http://php.net/manual/pt_BR/function.htmlentities.php)或[nl2br()](http://php.net/manual/pt_BR/function.nl2br.php)插入数据库之前尝试解析，并在取回时执行相反的操作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-14T04:52:46.623

如果您在浏览器中查看数据库条目，您将看到格式化 HTML 的结果，而不是实际的标记 - 如果您想要的话，请使用 htmlentities($result)。

查看页面源以查看正在检索的内容并查看它与您期望看到的内容有何不同。

# php - php Mongo find 仅使用 4 个条件

> ID：10577210
> 
> 赞同：5
> 
> 时间：2012-05-14T03:29:13.307
> 
> 标签：php, search, mongodb

-->*请查看底部的更新，我在 Mongo shell 中复制了相同的问题*

我的标准通过 GET 参数传递并被放入 $data （作为 assc 数组）。然后它进入下面的部分，其中每个搜索词变得部分不完全匹配。之后，我们删除（未设置）空标准。

总共有 15 个可能的字段，至少可以设置 1 个，最多可以设置 15 个。

```
foreach ($data as $k => $v) { 
     // Make them partial match
     $data[$k] = new MongoRegex('/'.$v.'/i');
     // Remove empty criteria
     if (empty($v)) unset($data[$k]); 
}
// Run the search
$cursor = $this->collection->find($data); 
```

只要通过的标准是 4 或更少，一切都很好，例如：

```
Array ( 
   [phone] => MongoRegex Object ( [regex] => 433 [flags] => i ) 
   [property_name] => MongoRegex Object ( [regex] => west [flags] => i ) 
   [city] => MongoRegex Object ( [regex] => H [flags] => i ) 
   [zip_postcode] => MongoRegex Object ( [regex] => 9 [flags] => i ) 
) 
```

这将返回 5 个结果。

但是在第 4 个之后添加的任何标准都是无效的。

```
Array ( 
   [phone] => MongoRegex Object ( [regex] => 433 [flags] => i ) 
   [state_province] => MongoRegex Object ( [regex] => Virginia [flags] => i ) 
   [property_name] => MongoRegex Object ( [regex] => west [flags] => i ) 
   [city] => MongoRegex Object ( [regex] => H [flags] => i ) 
   [zip_postcode] => MongoRegex Object ( [regex] => 9 [flags] => i )
) 
```

这应该返回 2 但仍返回 5 并且无论添加多少条件项都将返回 5

--**更新**--

所以我在 Shell 中尝试过它，令我惊讶的是它在那里也不起作用。

```
db.property_list.find({phone:/433/, property_name:/west/, city:/h/, zip_postcode:/9/}).count() 
```

**返回 5**

现在，当我添加第 5 个参数**时，它应该将结果缩小到 2**，但它无效并且仍然显示计数为 5！！！

```
db.property_list.find({phone:/433/, property_name:/west/, city:/h/, zip_postcode:/9/, state_province:/Virginia/}).count() 
```

**返回 5**

通过大量的实验，我意识到它只是被拾取的前 4 个标准！！就像在最后一个示例中，我将位置切换为“城市”标准`'state_province'`，`'city'`这将是无效的，因为它将是第 5 个标准！

--**新更新**--

事实证明，如果我在第 5 个标准上使用普通匹配而不是正则表达式，它将起作用。我是否正确假设 Mongo 只能为 4 个正则表达式标准执行 find() ？所以这将正确**返回 1**

```
db.property_list.find({phone:/433/, property_name:/west/, city:/h/, zip_postcode:/9/, state_province:Virginia}).count() 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-15T01:14:29.143

每个查询有 4 个允许的正则表达式条件的硬性限制。大约六个月前在核心 mongo 代码中修复了它：[https ://github.com/mongodb/mongo/commit/62554d064a264f9b6c28099ba71421f250bbbba9](https://github.com/mongodb/mongo/commit/62554d064a264f9b6c28099ba71421f250bbbba9)

看起来这个修复还没有被拉入 mongo 的 1.8 或 2.0 分支，这是显示硬限制的 v1.8 分支：[https ://github.com/mongodb/mongo/blob/v1.8/db/ matcher.cpp#L159](https://github.com/mongodb/mongo/blob/v1.8/db/matcher.cpp#L159)

# xml - 使用 XSL 扩展 XSD 复杂元素类型？

> ID：10577212
> 
> 赞同：1
> 
> 时间：2012-05-14T03:29:21.317
> 
> 标签：xml, xslt, xsd

我有一个 XSD 文档，我正试图用 XSL 解析以用于文档目的，其中 complexTypes 经常包含其他 complexTypes 的元素。如果可能的话，我想在它们的容器旁边显示这些复杂类型元素的内容。这是我正在使用的一个简单示例：

```
<xs:complexType name="S">
  <xs:sequence>
    <xs:element name="A" type="X"/>
  </xs:sequence>
</xs:complexType>

<xs:complexType name="X">
  <xs:sequence>
    <xs:element name="F"/>
    <xs:element name="G"/>
    <xs:element name="H"/>
  </xs:sequence>
</xs:complexType> 
```

我如何让上面的内容显示为：“S 包含 X 类型的 A（包含 F、G 和 H）”？

提前感谢您的帮助！

添加示例：

```
 <xsl:for-each select="*">
    <xsl:choose>

      <!-- call template without param -->
      <xsl:when test="name() = 'xs:complexType'">
        <xsl:value-of select="@name"/>
        <xsl:text> contains </xsl:text>

        <xsl:call-template name="top"/>
        <xsl:text>&#xa;</xsl:text>
      </xsl:when>

      <!-- for contained elements with types -->
      <xsl:when test="@type != ''  and  name() = 'xs:element' and $typeToLocate = ''">
        <xsl:value-of select="@name"/>
        <xsl:text> of type </xsl:text>
        <xsl:value-of select="@type"/>
        <xsl:text>(which contains: </xsl:text>

        <!--
          point at which i want processor to return to root, locate the
          indicated complex type, output its contents then continue going
          through schema.
        -->
        <xsl:call-template name="top">
          <xsl:with-param name="typeToLocate" select="@type"/>
        </xsl:call-template>

        <xsl:text>)</xsl:text>
      </xsl:when>

      <!-- when type is located, send it to signal proper output -->
      <xsl:when test="$typeToLocate != ''  and  $typeToLocate = @name">
        <xsl:call-template name="top">
          <xsl:with-param name="typeToLocate" select="$typeToLocate"/>
        </xsl:call-template>
      </xsl:when>

      <!-- for elements contained in indicated type -->
      <xsl:when test="$typeToLocate != ''  and  name() = 'xs:element'">
        <xsl:value-of select="@name"/>
        <xsl:text> </xsl:text>

        <xsl:call-template name="top">
          <xsl:with-param name="typeToLocate" select="$typeToLocate"/>
        </xsl:call-template>
      </xsl:when>

      <!-- for continuing through non-content elements under found type -->
      <xsl:when test="$typeToLocate != ''">
        <xsl:call-template name="top">
          <xsl:with-param name="typeToLocate" select="$typeToLocate"/>
        </xsl:call-template>
      </xsl:when>

      <!-- for ignoring non-content elements during normal processing -->
      <xsl:otherwise>
        <xsl:call-template name="top"/>
      </xsl:otherwise>

    </xsl:choose>
  </xsl:for-each>

</xsl:template> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-14T05:38:49.717

为了广泛回答您的问题，而不给出具体的样式表，我建议......

(1) 创建一个模板来匹配XSD公共级别的复杂类型。所述模板的序列构造器将直接负责产生像“S”这样的文本。

(2)在所述序列构造器内，但在所述文本产生之后，在复杂类型节点上调用。这将负责所需生产的其余部分，从“包含...”开始。

(3) 创建描述内容模板。这里的序列构造器由两部分组成： (3.1) 像“contains”这样的常量产生；(3.2) 调用序列成员的应用模板。这部分将产生类似“A 类型 X(which ~)”

(4) 创建一个模板来匹配xs:sequence/xs:element。正如您从 3.2 中猜到的那样，序列构造函数将包含 3 个部分： (4.1) 生成式，如“X 类型的 A（其中” (4.2) 调用与子复杂类型相关的 describe-contents 模板）；最后（4.3）不断产生“）”

如果您的目标仅限于 xs:sequence 和复杂类型，则应该这样做。尽管如此，这种基于模板的方法（模板与句法元素大致匹配）应该可以扩展到 xs:choice 等。

我假设您实际上想要对深层复杂类型定义进行递归描述。

# javascript - 使用 xmlhttp.open 获取 2 个不同的 url

> ID：10577213
> 
> 赞同：0
> 
> 时间：2012-05-14T03:29:43.947
> 
> 标签：javascript, gm-xmlhttprequest

需要有关以下代码的帮助。问题是它只触发最后一个 xmlhttp.open 而不是两者。代码如下。

```
<script type="text/javascript">
function loadXMLDoc(obj){ 
  var xmlhttp; 
  var flag; 
  var mycode;
  mycode = obj;

  if (window.XMLHttpRequest){// code for IE7+, Firefox, Chrome, Opera, Safari
    xmlhttp=new XMLHttpRequest();
  }else{// code for IE6, IE5
    xmlhttp=new ActiveXObject("Microsoft.XMLHTTP");
  }
  xmlhttp.onreadystatechange=function(){
    if (xmlhttp.readyState==4 && xmlhttp.status==200){
    }
  }
   flag = document.getElementById(mycode);
   if (flag.value == "Uncall") {
     flag.value = "Call Patient";
     document.getElementById('myDiv'+mycode).innerHtml="<b><font color='#00FF00'>Called</font></b>";        
   }else{ 
     flag.value = "Uncall";
     document.getElementById('myDiv'+mycode).innerHtml="<b><font color='#00FF00'>Calling..</font></b>";
     **xmlhttp.open("GET","http://1.1.1.1/callnumber.cgi?"+mycode,true);
     xmlhttp.send();
     xmlhttp.open("GET","http://2.2.2.2/displaynumber.php?"+mycode,true);
     xmlhttp.send();**
   }
}
</script> 
```

感谢一些意见

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-14T03:49:52.087

不要重复使用相同的请求对象。

最好的建议是不要自己写这些。找到一个库并使用它们的实现。JQuery 还不错。还有很多其他选择。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-14T03:57:46.873

```
<script type="text/javascript">
function loadXMLDoc(obj){
  var xmlhttp; 
  var flag;
  var mycode;
  mycode = obj;
  flag = document.getElementById(mycode);
  if (flag.value != "Uncall"){
      loadXMLDocCall(obj,"http://1.1.1.1/callnumber.cgi?");
      loadXMLDocCall(obj,"http://2.2.2.2/displaynumber.php?");
      flag.value = "Uncall";
      document.getElementById('myDiv'+mycode).innerHtml="<b><font color='#00FF00'>Calling..</font></b>";
      } else { 
       flag.value = "Call Patient";
       document.getElementById('myDiv'+mycode).innerHtml="<b><font color='#00FF00'>Called</font></b>";
      }
}
function loadXMLDocCall(obj,url){ 
  var xmlhttp; 
  var mycode;
  mycode = obj;

  if (window.XMLHttpRequest){// code for IE7+, Firefox, Chrome, Opera, Safari
    xmlhttp=new XMLHttpRequest();
  }else{// code for IE6, IE5
    xmlhttp=new ActiveXObject("Microsoft.XMLHTTP");
  }
  xmlhttp.onreadystatechange=function(){
    if (xmlhttp.readyState==4 && xmlhttp.status==200){
    }
  }
   xmlhttp.open("GET",url+mycode,true);
   xmlhttp.send();
 }
</script> 
```

# mongodb - 我可以直接在 MongoDB 中使用主干吗？*没有node.js，socket.io

> ID：10577214
> 
> 赞同：4
> 
> 时间：2012-05-14T03:29:53.553
> 
> 标签：mongodb, backbone.js

我已经看到了所有使用backbone.js 和node 的帖子/相同的应用程序——但我想让它尽可能简单，并且该应用程序不太依赖实时、异步调用或任何东西。

我怎么能这样做呢？我不能只将backbone.sync 与MongoDB 一起使用吗？

希望在这里得到一些帮助...

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-05-14T06:19:24.160

Mongodb 确实提供了一个 http 接口，您可以让您的客户端 javascript 应用程序直接与之对话。

但是，它可以做的事情是有限的。

您可以使用多种技术来为 mongodb 提供更全功能的 http 接口

此链接为您提供有关通过 HTTP 与 mongo 交互所需的所有信息，还概述了一些 3rd 方技术以增强其功能。

[MongoDB - Http 接口](http://www.mongodb.org/display/DOCS/Http+Interface)

希望能帮助到你。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2014-03-09T23:11:49.130

从安全的角度来看，这是一个**非常糟糕的主意**。通过这样做，您将向世界开放您的数据库，这只是自找麻烦。任何仔细检查您的客户端代码的人都将能够弄清楚如何访问您的 mongodb 并使用它来存储他们想要的任何内容，而无需他们支付任何费用，并且您需要支付全部费用。此外，如果您不小心，他们甚至可以读取其他用户的数据或关闭或更改服务器，包括更改身份验证凭据。

除非您绝对信任您的用户，否则您需要有一些位于服务器（而不是客户端）上的中间件（例如 node.js），其工作是说“是的，你可以这样做，不，你不能这样做那。”

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-14T16:26:43.123

Raadad 提到了 HTTP 接口，但它（如他链接的页面所述）仅为了方便而提供。它不是功能齐全的 REST 接口，不建议用于生产。如果您正在寻找这样的界面，那么您应该看看 sleepy mongoose 和类似的：

[http://www.snailinaturtleneck.com/blog/2010/02/22/sleepy-mongoose-a-mongodb-rest-interface/](http://www.snailinaturtleneck.com/blog/2010/02/22/sleepy-mongoose-a-mongodb-rest-interface/)

基本上，我的意思是，如果您遇到 HTTP 接口问题，每个人都会给您的第一条建议是“不要使用 HTTP 接口”。

如果你想保持一切原生和在 node.js 中，那么官方支持的原生 node.js 驱动程序是要走的路：

[https://github.com/mongodb/node-mongodb-native](https://github.com/mongodb/node-mongodb-native)

# c# - 像这样制作linq会导致连接池问题吗

> ID：10577217
> 
> 赞同：2
> 
> 时间：2012-05-14T03:30:38.670
> 
> 标签：c#, .net, linq, connection-pooling

如果我将 dbContext 作为全局变量打开，如下面的代码所示，与在每个函数中使用新的数据上下文并将其包装在 using 块中相比，它会导致连接池问题吗？

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Web;
using LoopinDeals.Helper;

namespace LoopinDeals.Model
{
    public class DealUsersRepository
    {
        private DataClassesDataContext DbContext = new DataClassesDataContext();

        public void AddUser(string Email, string Password)
        {
            DealUser deal = new DealUser()
            {
                Email = Email,
                Password = Password,
                EmailVerified = true,
                LastLogin = DateTime.Now,
                AccountCreated = DateTime.Now,
                IsActive = true,
                RegistrationMethod = RegistrationType.Normal.ToString(),
                Subscribe = "true"
            };

            DbContext.DealUsers.InsertOnSubmit(deal);
            DbContext.SubmitChanges();
        }

        public void AddSignUpUser(string Email, string City)
        {
            try
            {
                DealUser UserData = new DealUser()
                    {
                        Email = Email,
                        City = City,
                        IsActive = false,
                        LastLogin = DateTime.Now
                    };
                DbContext.DealUsers.InsertOnSubmit(UserData);
            }
            catch (Exception ex)
            {               

            }
        }

        public void UpdateSignUpUser(string Email, string FirstName, string LastName, string Password, string Mobile, string City)
        {
            try
            {
                DealUser UserData = DbContext.DealUsers.Single(UD => UD.Email == Email);
                UserData.FirstName = FirstName;
                UserData.LastName = LastName;
                UserData.Password = Password;
                UserData.Mobile = Mobile;
                UserData.City = City;
                UserData.IsActive = true;
                UserData.LastLogin = DateTime.Now;
                DbContext.SubmitChanges();
            }
            catch (Exception ex)
            {

            }
        }

    }
} 
```

**描述**

请注意，这段代码不是我写的，它是外包的。它崩溃并显示以下错误消息，我正在尝试找出解决方法。

> “/”应用程序中的服务器错误。超时已过。在从池中获取连接之前超时时间已过。这可能是因为所有池连接都在使用中并且达到了最大池大小。说明：执行当前 Web 请求期间发生未处理的异常。请查看堆栈跟踪以获取有关错误及其源自代码的位置的更多信息。
> 
> 异常详细信息：System.InvalidOperationException：超时已过期。在从池中获取连接之前超时时间已过。这可能是因为所有池连接都在使用中并且达到了最大池大小。
> 
> 源错误：
> 
> [没有相关的源代码行]
> 
> 源文件：c:\Windows\Microsoft.NET\Framework64\v2.0.50727\Temporary ASP.NET Files\root\f44daa26\cce00cbd\App_Web_b21g2v5x.5.cs 行：0
> 
> 堆栈跟踪：
> 
> [InvalidOperationException：超时已过期。在从池中获取连接之前超时时间已过。这可能是因为所有池连接都在使用中并且达到最大池大小。]
> System.Data.ProviderBase.DbConnectionFactory.GetConnection(DbConnection owningConnection) +6264689
> System.Data.ProviderBase.DbConnectionClosed.OpenConnection(DbConnection outerConnection, DbConnectionFactory connectionFactory) +6265031
> System.Data.SqlClient.SqlConnection.Open() +258
> System.Data.Linq.SqlClient.SqlConnectionManager.UseConnection(IConnectionUser 用户) +65 System.Data.Linq.SqlClient.SqlProvider.get_IsSqlCe() +33 System.Data .Linq.SqlClient.SqlProvider.InitializeProviderMode() +32
> System.Data.Linq.SqlClient.SqlProvider.System.Data.Linq.Provider.IProvider.Execute（表达式查询）+63
> System.Data.Linq.DataQuery`1.System.Collections.Generic.IEnumerable.GetEnumerator() +45 LoopinDeals.Model.SiteDetails..ctor() +253 LoopinDeals.Admin.Default..ctor() +76
> ASP.admin_default_aspx..ctor() 在 c:\Windows\Microsoft.NET\Framework64\v2.0.50727\Temporary ASP .NET Files\root\f44daa26\cce00cbd\App_Web_b21g2v5x.5.cs:0
> __ASP.FastObjectFactory_app_web_b21g2v5x.Create_ASP_admin_default_aspx() 在 c:\Windows\Microsoft.NET\Framework64\v2.0.50727\Temporary ASP.NET Files\root\f44daa26\ cce00cbd\App_Web_b21g2v5x.22.cs:0
> System.Web.Compilation.BuildManager.CreateInstanceFromVirtualPath(VirtualPath virtualPath, Type requiredBaseType, HttpContext context, Boolean allowCrossApp, Boolean noAssert) +138
> System.Web.UI.PageHandlerFactory.GetHandlerHelper(HttpContext context, String requestType, VirtualPath virtualPath, String physicalPath) + 50 System.Web.MaterializeHandlerExecutionStep.System.Web.HttpApplication.IExecutionStep.Execute() +425 System.Web.HttpApplication.ExecuteStep(IExecutionStep step, Boolean& completedSynchronously) +263

我在这里添加了 SiteDetailsConstructor，这是否可能导致连接池问题？

```
 public class SiteDetails
    {
        public DataClassesDataContext DbContext = new DataClassesDataContext();

        public SiteDetails()
        {
            var Details = from dtl in DbContext.SiteSettings
                          select dtl;

            foreach (var item in Details)
            {
                MetaIndexKeyword = item.MetaIndexKeyword;
                MetaIndexDesc = item.MetaIndexDesc;
                MetaIndexTitle = item.MetaIndexTitle;
                MetaGetPrefrenceKeyword = item.MetaGetPrefrenceKeyword;
                MetaGetPrefrenceDesc = item.MetaGetPrefrenceDesc;
                Logo = item.Logo;
                Favicon = item.Favicon;
                NoImage = item.NoImage;
                SiteName = item.SiteName;
                SiteTitle = item.SiteTitle;
                SiteUrl = item.SiteUrl;
                FbAndTwitterShareMessage = item.FbAndTwitterShareMessage;
                CharacterSet = item.CharacterSet;
                SiteMaintanance = item.SiteMaintanance;
                PasswordChar = item.PasswordChar;
                HtmlMetaKeyword = item.HtmlMetaKeyword;
                HtmlMetaDescription = item.HtmlMetaDescription;
                MetaDataGoogleSiteMap = item.MetaDataGoogleSiteMap;
                WebMasterEmail = item.WebMasterEmail;
                SupportEmail = item.SupportEmail;
                NoReplyName = item.NoReplyName;
                NoReplyEmail = item.NoReplyEmail;
                DeleteExpireDeals = item.DeleteExpireDeals;
                DealsPerPageBeforeLogin = item.DealsPerPageBeforeLogin;
                DealsPerPageAfterLogin = item.DealsPerPageAfterLogin;
                RecentViewDeals = item.RecentViewDeals;
                BoughtDeals = item.BoughtDeals;
                FbFanPage = item.FacebookFanPage;
                FbApplicationId = item.FbApplicationId;
                FbSecret = item.FbSecret;
                FbApiSharingDeals = item.FbApiSharingDeals;
                GoogleApiKey = item.GoogleApiKey;
                TwitterScreenName = item.TwitterScreenName;
                TwitterConsumerKey = item.TwitterConsumerKey;
                TwitterConsumerSecret = item.TwitterConsumerSecret;
                SharingAppId = item.SharingAppId;
                SharingAppSecret = item.SharingAppSecret;
                SharingCanvasURL = item.SharingCanvasURL;
                InviteMessage = item.InviteMessage;
                SharingMsgLink = item.SharingMsgLink;
                ShareMsgPicture = item.ShareMsgPicture;
                ShareMsgName = item.ShareMsgName;
                ShareMsgCaption = item.ShareMsgCaption;
                ShareMsgDesc = item.ShareMsgDesc;
            }

        }

        public static string MetaIndexKeyword { get; set; }
        public static string MetaIndexDesc { get; set; }
        public static string MetaIndexTitle { get; set; }
        public static string MetaGetPrefrenceKeyword { get; set; }
        public static string MetaGetPrefrenceDesc { get; set; }
        public static string Logo { get; set; }
        public static string Favicon { get; set; }
        public static string NoImage { get; set; }
        public static string SiteName { get; set; }
        public static string SiteTitle { get; set; }
        public static string SiteUrl { get; set; }
        public static string FbAndTwitterShareMessage { get; set; }
        public static string CharacterSet { get; set; }
        public static string SiteMaintanance { get; set; }
        public static string PasswordChar { get; set; }
        public static string HtmlMetaKeyword { get; set; }
        public static string HtmlMetaDescription { get; set; }
        public static string MetaDataGoogleSiteMap { get; set; }
        public static string WebMasterEmail { get; set; }
        public static string SupportEmail { get; set; }
        public static string NoReplyName { get; set; }
        public static string NoReplyEmail { get; set; }
        public static bool? DeleteExpireDeals { get; set; }
        public static int? DealsPerPageBeforeLogin { get; set; }
        public static int? DealsPerPageAfterLogin { get; set; }
        public static int? RecentViewDeals { get; set; }
        public static int? BoughtDeals { get; set; }
        public static string FbFanPage { get; set; }
        public static string FbApplicationId { get; set; }
        public static string FbSecret { get; set; }
        public static string FbApiSharingDeals { get; set; }
        public static string GoogleApiKey { get; set; }
        public static string TwitterScreenName { get; set; }
        public static string TwitterConsumerKey { get; set; }
        public static string TwitterConsumerSecret { get; set; }

        public static string SharingAppId { get; set; }
        public static string SharingAppSecret { get; set; }
        public static string SharingCanvasURL { get; set; }
        public static string InviteMessage { get; set; }
        public static string SharingMsgLink { get; set; }
        public static string ShareMsgPicture { get; set; }
        public static string ShareMsgName { get; set; }
        public static string ShareMsgCaption { get; set; }
        public static string ShareMsgDesc { get; set; }

    }
} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-14T03:37:44.930

它不应该导致连接池问题，因为数据库连接仅在您调用时打开、使用和关闭`SubmitChanges`。

由于 DBContext 不是线程安全的，但如果您的存储库实例被多个线程使用，它会导致问题。

另一个问题是 EF 在 DBContext 实例中完成的数据缓存 - 如果您不处置 DBContext 实例，这些缓存的数据会累积，并且在一段时间后会变得非常大，以至于导致内存压力。

由于这两个原因（并且重新创建上下文没有太多开销），总体而言，将 DBContext 的使用保持在 using 块中是更好的做法。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-05-14T03:39:14.620

全局管理上下文不会导致连接池问题。但是，上下文包含所有已访问数据的 DBSet，因此上下文将不断增长，直到内存不足（假设您的数据库大于可用内存）。

但是创建上下文很便宜，为什么要在全球范围内管理它？

-- 对新信息的反应

我认为您显示的代码片段根本不是问题的根源。相反，通过查看代码跟踪，问题似乎发生在 SiteDetails 的构造函数中。这个构造函数是否加载了大量数据？如果是操作系统，您可能只是因为太多线程试图加载太多数据而使数据库不堪重负。

# exchange-server - EWS：在邮箱/帐户之间复制项目

> ID：10577218
> 
> 赞同：5
> 
> 时间：2012-05-14T03:30:40.640
> 
> 标签：exchange-server, exchangewebservices, ews-managed-api

如果我的应用程序具有两个用户的凭据，用户 A 和用户 B，其帐户/邮箱位于同一 Exchange 服务器上，有没有办法可以将项目（例如电子邮件）从用户 A 邮箱中的文件夹复制到用户 B 中的一个，并将流量保持在 Exchange 服务器的本地？

两个用户都不会委托/授予对另一个用户的访问权限，我不希望通过公用文件夹来执行此操作。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-04-09T06:44:56.810

使用 ExportItems 操作导出和使用 UploadItems 操作导入是您的最佳选择。刚刚在 MSDN 上发布了新内容，详细讨论了这一点：[Exporting and importing items by using EWS in Exchange](http://msdn.microsoft.com/en-us/library/office/dn672316%28v=exchg.150%29.aspx)。

# ruby-on-rails - simple_form 是否与回形针 validates_attachment_presence 一起使用？

> ID：10577221
> 
> 赞同：3
> 
> 时间：2012-05-14T03:31:14.883
> 
> 标签：ruby-on-rails, paperclip, simple-form

我有一个带有回形针附件的模型，称为头像，该模型使用 validates_attachment_presence 来确保头像存在。simple_form 似乎没有选择这一点，也没有使用星号呈现表单以指示头像是必填字段。我添加了一个额外的 validates_presence_of :avatar 和 simple_form 拾取该字段，但现在当用户不选择头像时它不会添加错误类。有没有人用 simple_form 处理回形针附件？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-19T20:37:00.260

解决方案是添加存在验证以及 attachment_presence：

```
validates :avatar, attachment_presence: true, presence: true 
```

这将以简单的形式正确显示星号并正确验证文件的存在。

# sql - 具有多个列的 SQL 更新查询，其值作为单个查询从另一个表中获取

> ID：10577222
> 
> 赞同：0
> 
> 时间：2012-05-14T03:31:19.233
> 
> 标签：sql

我想更新从 PI 表中选择的三列，即 LCID、LCNo、AmendmentStatus，所以我编写了以下成功执行的更新查询：

```
UPDATE  #TempTableOne  
    SET     
            LCID=(SELECT ISNULL(ExportLCID,0) FROM ExportLC WHERE ExportLCID= (SELECT LCID FROM [PI] WHERE PIID=(SELECT PIID FROM Job WHERE JobID=TT.OrderID))),
            LCNo=(SELECT ISNULL(ExportLCNo,'') FROM ExportLC WHERE ExportLCID= (SELECT LCID FROM [PI] WHERE PIID=(SELECT PIID FROM Job WHERE JobID=TT.OrderID))),
            AmendmentStatus=(SELECT AmendmentStatus FROM ExportLC WHERE ExportLCID= (SELECT LCID FROM [PI] WHERE PIID=(SELECT PIID FROM Job WHERE JobID=TT.OrderID))),      

    FROM    #TempTableOne  AS TT
    WHERE TT.OrderType=3 
```

但是是否有可能更新查询执行单个查询，例如：

```
Update  #TempTableOne    
   SET  SELECT LCID = ISNULL(ExportLCID,0) ,
        LCNo=ISNULL(ExportLCNo,''), 
        AmendmentStatus=AmendmentStatus 
  FROM  ExportLC 
  WHERE ExportLCID = (SELECT LCID 
                        FROM [PI] 
                       WHERE PIID=(SELECT PIID 
                                     FROM Job 
                                     WHERE JobID=TT.OrderID
                                   )
                       )
               ) 
```

因为我想加快我的查询

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-14T03:54:33.877

将查询更改为不使用 JOINS 应该会更快：

```
Update  #TempTableOne    
   SET  LCID = ISNULL(lc.ExportLCID,0) ,
        LCNo=ISNULL(lc.ExportLCNo,''), 
        AmendmentStatus=lc.AmendmentStatus 
  FROM #TempTableOne tt  
  JOIN  Job on Job.JobID = TT.OrderID
  JOIN  [PI] on [PI].PIID = Job.PIID
  JOIN ExportLC lc on [PI].LCID = lc.ExportLCID 
```

# yii - Yii 中 CActiveForm->checkBoxList 中的预选项目

> ID：10577231
> 
> 赞同：1
> 
> 时间：2012-05-14T03:32:47.127
> 
> 标签：yii, selecteditem, checkboxlist

我有两个数组。一个是**$categories**，其中包含从我的数据库中检索到的所有类别，另一个是**$preSelectedCategories**，其中包含在我的表单加载时需要在我的复选框列表中预先选择的类别。我试图这样做：

```
<?php echo $form->labelEx($model,'category_id'); ?>
<?php echo $form->checkBoxList($model, 'category_id', $categories, $preSelectedCategories, array('multiple'=>true)); ?>
<?php echo $form->error($model,'category_id'); ?> 
```

但我没有成功。谁能帮我解决这个问题？谢谢！

编辑：我已经知道使用**CHtml::checkBoxList**会有所帮助，但我想要的是使用**CActiveForm::checkBoxList**因为我使用模型来验证复选框列表。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-15T05:00:50.003

一种选择是使用[`CHtml::activeName`](http://www.yiiframework.com/doc/api/1.1/CHtml#activeName-detail)为输入获取适当的名称并将其传递给`CHtml::checkBoxList`，就像其他人建议的那样。

在我看来，另一个更合适的选择是`category_id`在呈现表单之前将您想要预先检查的那些 s 添加到控制器中的模型中（仅当它是 GET 请求时）。那么您根本不需要修改表单。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-07T11:22:25.000

您可以轻松地使用选定的项目预先填充 checkBoxList，它在其第二个参数中采用一组选定的键。

```
$selected_keys = array_keys(CHtml::listData( $model->books, 'id' , 'id'));

echo CHtml::checkBoxList('Author[books][]', $selected_keys, $books); 
```

请在我的博客上查看完整示例：

[http://scriptbaker.com/how-to-make-yii-checkboxlist-selected/](http://scriptbaker.com/how-to-make-yii-checkboxlist-selected/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-14T05:14:30.323

`CHtml::actviceCheckBoxList`（您使用的 CActiveForm::checkBoxList 是它的包装器）具有这样的语法

```
 public static function activeCheckBoxList($model,$attribute,$data,$htmlOptions=array()) 
```

如果您想手动设置预选值 - 您应该使用 CHtml::checkBoxList

```
public static function checkBoxList($name,$select,$data,$htmlOptions=array()) 
```

这是一段 CHtml 类参考

```
 * @param string $name name of the check box list. You can use this name to retrieve
     * the selected value(s) once the form is submitted.
     * @param mixed $select selection of the check boxes. This can be either a string
     * for single selection or an array for multiple selections.
     * @param array $data value-label pairs used to generate the check box list.
     * Note, the values will be automatically HTML-encoded, while the labels will not. 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-14T05:37:43.993

```
<?php 
$categories = array(1,2,3);
$preSelectedCategories = array(1=>true,2=>true); // use this way 
echo CHtml::checkBoxList('category_id',$preSelectedCategories,$categories); 
?> 
```

试试这个我试过了，运行成功。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-05-15T10:44:03.390

删除 $preSelectedCategories 变量。将 $model->category_id 设置为包含选定复选框值的数组。

```
<?php echo $form->labelEx($model,'category_id'); ?>
<?php 
$model->category_id = array('value1','value2');
echo $form->checkBoxList($model, 'category_id', $categories, array('multiple'=>true)); ?>
<?php echo $form->error($model,'category_id'); ?> 
```

你应该试试这个，但我没有测试这个。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-06-15T09:41:34.713

在将属性显示在表单上之前，使用数组填充属性。

在控制器中：

```
public function actionUpdate($id) {

  $model=$this->loadModel($id);

  //For example
  $categories = array(0=>'Option One',1=>'Option Two',2=>'Option Three');
  $preSelectedCategories = array(1,2);

  //Magic here
  $model->category_id = $preSelectedCategories;

  if(isset($_POST['NameOfModel']) {
    //category_id reset with incoming form data...
  }
  ...
  $this->render('update',array('model'=>$model,'categories'=>$categories));
} 
```

在视图中，在您的表单中：

```
echo $form->checkBoxList($model,'category_id',$categories); 
```

未经测试，因为我在这里修改它...改编自 Bootstrap 扩展的表单小部件。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2014-12-29T11:30:30.633

大多数 yii 成员都有同样的问题，所以这里有更甜美的代码和清晰的解释。

首先，您需要找到您预先选择的类别，例如 -

```
$criteria = new CDbCriteria();
$criteria->select = 'category_id as id';
$criteria->condition = 'userid = :userid';
$criteria->params = array(':userid' => Yii::app()->user->id);

//store pre-selected id into variable  - $selected_keys
$selected_keys = array_keys(CHtml::listData(MyCategory::model()->findAll($criteria), 'id', 'id')); 
```

现在生成整个类别列表，例如 -

```
$list = CHtml::listData(Categories::model()->findAll(array('order'=>'id')), 'id', 'category_name');

//htmlOptions for class and others elements
$htmlOptions = array('template' => '{input}{label}', 'separator'=>'', 'class'=>'in-checkbox', 'multiple'=>true, 'checked'=>'checked'); 
```

查看部分 -

```
<?php echo $form->labelEx($model, 'Category', array('class'=>'col-md-3 control-label')); ?>
<?php $model->Category = $selected_keys; //assign pre-selected list to Category list
      echo $form->checkBoxList($model, 'Category', $list, $htmlOptions); ?>
<?php echo $form->error($model, 'Category'); ?> 
```

试试这个，很好用。。

# iphone - 类的.h文件中的Typedef枚举常量？

> ID：10577232
> 
> 赞同：0
> 
> 时间：2012-05-14T03:32:54.943
> 
> 标签：iphone, objective-c, ios, cocoa-touch, design-patterns

我正在编写一个 iPhone 应用程序，并将我的常量安排在 Constants.h 和 Constants.m 文件中，正如这个问题中所推荐的：[Objective-C 中的常量](https://stackoverflow.com/questions/538996/constants-in-objective-c)。

我的问题是，如果我在 Constants.h 中定义一个 typedef 枚举，并想在我的一个类 .h 文件中声明该 typedef 枚举的属性，那么实现它的正确方法是什么？我是否需要将 typedef 枚举移出 Constants.h 和 classes .h 文件？似乎违背了拥有全局常量文件的目的......

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-05-14T04:37:43.233

我对这些范围类型问题的回答是将声明限制在所需的最小范围内。

如果您在实现中只需要枚举，则将声明放在 .m 中。如果仅接口需要枚举，则将声明放在接口的 .h 中。如果多个独立接口需要枚举，那么我会求助于将它放在全局 .h 文件中。

我这样做有两个原因。1）限制范围减少合并。2) 限制范围减少了受更改影响的文件数量。

当您的所有 typedef 都在一个文件中时，任何时候两个开发人员更新任何类型时，其中一个都必须在提交时合并。我已经处理了足够多的错误，这些错误是由我生活中的错误合并造成的。我尽量避免它们。

当您的程序中的*每个*文件都包含一个文件时，对该文件的任何更改都会影响程序中的*每个*文件。我已经发布了在没有任何提交的模块中有错误的生产代码。对全局包含的更改导致了一个没有人预料到并且没有人测试过的问题，因为它看起来像模块未被触及。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-14T03:38:45.000

A`typedef`创建一个可以用作类型的名称，例如`int`,`BOOL`或任何其他类型：它是类型 _def_inition。编译器只需要能够看到`typedef`您想要声明该类型变量的任何位置。这意味着您需要做的就是将您的 Constants.h 导入到您要使用该类型的文件中：

```
// Constants.h
typedef unsigned int Nimitz; 
```

* * *

```
#import "Constants.h"

@interface Excelsior : NSObject

@property (assign) Nimitz numPlanes;

@end 
```

# ruby-on-rails - 如何在后台处理交易时向用户显示“您的付款正在处理...”页面？

> ID：10577233
> 
> 赞同：3
> 
> 时间：2012-05-14T03:33:27.127
> 
> 标签：ruby-on-rails, payment-gateway, payment, resque

我经营一家在线商店，流量非常大。最近，由于支付网关出现某种问题，整个系统在一次大型促销活动中陷入停顿，他们的 API 响应需要 17 秒才能响应，而不是正常的 2-3 秒。有数百人同时尝试购买。这导致生产集群中每个 Web 服务器中的所有 Web 工作线程都被占用，等待来自支付网关的 API 响应。整个生产集群被锁定，无法提供任何页面。

解决此问题的一种方法是使用 Resque 在后台处理付款。Web 服务器将立即向用户返回一个响应，该响应会说“您的付款正在处理中......” Web 服务器将能够继续进行下一个 Web 请求。

处理完付款后，问题是继续结帐。我无法使用 AJAX 轮询事务是否已完成，因为许多客户没有 JavaScript。我不能依赖它。我不想使用 JavaScript 或任何类型的可靠性低的服务器推送技术，因为如果一定比例的结帐在“处理...”页面上停滞不前，它会产生昂贵的客户支持问题。

我如何设计页面流以便可以在后台可靠地处理事务？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-14T18:24:55.937

你试过Gearman吗？

[http://gearman.org/](http://gearman.org/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-14T03:49:32.430

查看基于事件的解决方案（例如 EventMachine）并让它处理这些请求。在这种情况下，标准的 RoR 服务器将全部崩溃。使用 javascript 进行某种后端处理绝对是解决这个问题的最简单方法，但如果这不是一个选项，我会探索将这个流程转移到更好的设计中，以处理诸如 API 永远不会响应的事情。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-23T23:29:10.400

是的。回复“处理中，我们将向您发送电子邮件确认”。让后台进程发送带有链接的电子邮件并标记指示结果的记录。然后客户可以回来查看，或者等待电子邮件并查看。

您对 AJAX 所做的任何事情都会占用服务器以响应 AJAX 请求。同样的问题。除非请求只是以“足够低但不太低”的频率轮询结果。轮询比通知更丑陋。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-15T06:20:00.563

我知道您说过您不能依赖启用了 Javascript 的客户端，但我认为在没有客户端脚本的情况下尝试实现这一点并不优雅。

1.  例如，您可以强制您的用户一直单击刷新按钮以生成 HTTP 请求，以从服务器拉回支付交易的状态（“处理中”、“成功”或“失败”），直到完成为止，但它很笨重。

2.  或者，为了获得更好的体验，请使用元刷新指令来自动刷新，但它仍然会使您的网站看起来过时：

    <meta http-equiv="refresh" content="2; url=http://site.com/checkout/?session=123" />

3.  但我的强烈偏好是改用客户端行为。使用它可以立即更改显示。使用您选择的 AJAX 库、JQuery 或只是 Javascript。操纵 DOM 以仅显示“处理”消息。或者，如果您将现有页面元素保留在那里，请确保禁用表单的每个按钮或其他可提交部分，以防止用户双击。并警告用户付款需要几秒钟。处理付款后，HTTP 响应将到达以进行屏幕，以显示付款失败或成功。

所有这些方法都可以消除您对支付服务器处理交易所花费时间的担忧。如果您的服务器端出现问题，那么这是一个需要解决的不同问题。

# sql-server-2008 - sql server 按日期时间选择

> ID：10577235
> 
> 赞同：0
> 
> 时间：2012-05-14T03:33:52.633
> 
> 标签：sql-server-2008

```
 Select * From MyTable where Email_Date = @Email_Date

    --Email_Date = 2012-05-13 10:49:48.050 
```

SQL Server 2008 R2。Email_Date 是日期时间字段。不返回任何记录。如何将日期时间作为过滤器传递。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-14T04:08:22.740

```
DECLARE @Email_Date_Str varchar(10)
SET @Email_Date_Str = CONVERT(varchar(10), @Email_Date, 120)
SELECT * FROM MyTable WHERE CONVERT(varchar(10), Email_Date, 120) = @Email_Date_Str 
```

# c# - 在 C#.NET 中 MS 访问 SQL 服务器

> ID：10577237
> 
> 赞同：3
> 
> 时间：2012-05-14T03:33:59.370
> 
> 标签：c#, .net, sql-server, ms-access

出口。我们正在对 SQL Server 进行导出 Ms 访问。

我们知道如何逐表导出该表。我们面临并且无法处理的是，MS Access中存在的表之间的关系在导出后会丢失。这很烦人。有没有一种方法或工具可以让我们一次处理多个表，或者有一些解决方法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-14T05:28:27.490

既然你用 c# 标记了它，我将假设你想自己实现它。以下是您需要的构建块：

1.  创建到您的 Access 数据库的 DAO 连接（添加对 DAO 库的引用，创建一个新的`DBEngine`，然后使用其`OpenDatabase`方法获取`Database`引用）：

    ```
    DBEngine dbe = new DBEngine();
    Database db = dbe.OpenDatabase(pathToDatabase); 
    ```

2.  遍历[`Relations`属性](http://msdn.microsoft.com/en-us/library/ff197067.aspx)以访问存储在 MS Access 数据库中的关系。

3.  在 SQL Server 数据库中创建关系。为此，您可以

    *   [使用 SMO](http://msdn.microsoft.com/en-us/library/ms162566.aspx)或
    *   [普通的旧 T-SQL](https://stackoverflow.com/a/48883/87698)：

        ```
        ALTER TABLE table1 
        ADD CONSTRAINT table1_fkfield_fk FOREIGN KEY (fkfield) 
        REFERENCES table2 (pkfield) 
        ```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-14T04:15:11.770

看起来微软对此有一个答案。Access 中有一个名为 Upsizing Wizard 的选项，它“保留数据库结构，包括数据、索引和默认设置”。

这是 KB 文章的链接，解释更多：http: [//support.microsoft.com/kb/237980](http://support.microsoft.com/kb/237980)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-14T05:16:58.220

使用 SQL Server 数据转换服务 (DTS) 将数据从 Access 数据库导入 SQL Server 数据库。有关 DTS 和 DTS 导入向导的详细信息，请参阅 SQL Server 7.0 联机丛书中的“数据转换服务”和“使用导入和导出向导”主题。有关示例，请参阅 SQL Server 联机丛书中的“从 Access 数据库示例导入数据”主题。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-14T05:15:35.127

为了将 Access 数据库迁移到 SQL Server，我们有许多第三方工具和 Microsoft Assitant。检查此链接 [Link 1](http://support.microsoft.com/kb/237980) [Link 2](http://cfpayne.wordpress.com/2006/07/23/how-to-import-microsoft-access-into-sql-server-2005/)

# jquery - JQuery Mobile data-rel="back" 在对话框中不起作用

> ID：10577238
> 
> 赞同：1
> 
> 时间：2012-05-14T03:34:04.970
> 
> 标签：jquery, node.js, jquery-mobile, express, pug

我正在尝试在我的 express.js 项目中使用 jquery 移动对话框来显示错误。我能够成功显示带有错误的对话框，但我的问题是当我单击对话框关闭按钮时，浏览器会返回主页然后返回对话框。这是我的代码：

```
div#home(data-role='page',data-theme="f",data-url='/')
    header(data-role='header')
        h1= title
    div(data-role='content',role='main')
      -if(typeof error !== "undefined")
         script(type='text/javascript')
          $(function() {
           $('#dialogbody').html("<p>#{error}</p>");
           $.mobile.changePage('#dialog', 'pop', true, true);
          });
      -if(typeof info !== "unddefined")
         script(type='text/javascript') 
          $.mobile.changePage('#dialog', 'pop', true, true);
      form(name='home',action='/', method='POST')   
       div(data-role='fieldcontain')
        fieldset(data-role='controlgroup')
         label.label(for='email') email
         input.input.required.email(id='email',type='text',value='',placeholder='name@email.com',name='email')
         label.label(for='password') password
         input.input.required(id='password',type='password',value='',placeholder='Enter your password',name='password')
        fieldset.ui-grid-a
          div.button.ui-block-a
             input.button(type='submit',value='Sign In',data-transition='fade',data-theme='a',style='width: 100%;')
          div.ui-block-b   
             input(type='submit',value='Sign Up',data-transition='fade',data-theme='b',onclick="home.action='/signup'; return true;")
        div
             a( data-transition='fade', data-theme='a',href=paypalURL) 
div(id='dialog',data-role='dialog',data-overlay-theme='a',data-transition='pop')
        div(data-role='content')
            div (id='dialogbody') 
            <a href="#" data-role="button" data-rel="back" data-theme="a">Close</a> 
```

有什么我错过的还是 JQuery mobile 中的错误？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-14T13:38:40.387

输出代码是否正确？你能过去吗？

您将 a 元素放在 html 语法中而不是 Jade 中，这可能是问题所在。

# java - Java数组变量显示为null？

> ID：10577240
> 
> 赞同：0
> 
> 时间：2012-05-14T03:34:21.497
> 
> 标签：java, arrays, null

我正在使用扫描仪用数据填充数组。它似乎有效，因为当我在“if”语句中打印 (player[i].Name) 时，它会打印一个值。但是，当我尝试在语句 (players[1].Name) 之外打印此值时，它会给出一个空值。

```
int i = 0;
        while (scanner.hasNextLine()) {
                if (scanner.hasNext()) {
                players[i].Name = scanner.next();
                System.out.println(players[i].Name);
                }
                if (scanner.hasNext()) {
                players[i].Position = scanner.next();
                System.out.println(players[i].Position);
                }
                if (scanner.hasNext()) {
                players[i].Height = scanner.next();
                System.out.println(players[i].Height);
                }
                 if (scanner.hasNext()) {
                players[i].Weight = scanner.next();
                System.out.println(players[i].Weight);
                }
               i++;      
            }//end while 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-14T03:40:00.187

您在 for 循环中执行此操作。我认为这不会产生预期的结果。本质上，您将名称分配给同一个玩家，而扫描仪拥有下一个。将它从 for 循环中取出，然后将 i++ 的 while 循环作为循环的最后一个。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-14T03:41:30.703

你正在做这个 10 倍（对于每个 i）：

```
 // Get all possible scanner entries for all possible lines for i=0
 while (scanner.hasNextLine()) {
        if (scanner.hasNext()) {
            players[i].Name = scanner.next();
 // .. then repeat getting all scanner entries for all lines for i=1... 
```

也许这就是你的意思：

```
int i = 0;
while (scanner.hasNextLine()) {
    if (scanner.hasNext()) {
        players[i].Name = scanner.next();
        System.out.println(players[i].Name);
        i++;
    }
} 
```

甚至可能是这样：

```
int i = 0;
while (scanner.hasNextLine()) {
    while (scanner.hasNext()) {
        players[i].Name = scanner.next();
        System.out.println(players[i].Name);
        i++;
    }
} 
```

或这个：

```
int i = 0;
while ((i < 10) && scanner.hasNextLine()) {
    while ((i < 10) && scanner.hasNext()) {
        players[i].Name = scanner.next();
        System.out.println(players[i].Name);
        i++;
    }
} 
```

# ruby - 反向包含数组？

> ID：10577243
> 
> 赞同：0
> 
> 时间：2012-05-14T03:34:46.453
> 
> 标签：ruby

我想检查**数组中的任何项目是否是 string 的一部分**。就像是`.include?`

我为此编写了一个函数，但我相信会有**更简单的方法**。

有人可以建议我如何使用**更少的代码来实现相同的目标**吗？

```
$goes_into_cron_comments=["Edumate_upgrade","login"].map!{|item| item.downcase} 
params={}
params['run']="login_ldap"

def contains(array,string)
        array.each{|item| 
            if string.include?(string)
                return true
            end
        }
        return false
end
#if ($goes_into_cron_comments.include?(params['run'].downcase)) #original condition
if (contains($goes_into_cron_comments,params['run'].downcase))
    puts "contains"
else 
    puts "doesn't contain"
end 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-14T03:49:10.520

有些事情你可以做会更好。您可以使用[`Enumerable#any?`](https://ruby-doc.org/core/Enumerable.html#method-i-any-3F)而不是手动迭代：

```
array.any? { |item| string.include?(item) } 
```

或者你可以使用[`Regexp.union`](https://ruby-doc.org/core/Regexp.html#method-c-union)：

```
string =~ Regexp.union(array)
# or if you want a true boolean
!!(string =~ Regexp.union(array))
!(string =~ Regexp.union(array)).nil? 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-14T03:45:11.053

试试这个：

```
str = 'hey, this is a string'
arr = %w{one hey may}

arr.any? { |el| str.include? el }
=> true 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-14T03:43:29.503

我会做这样的事情：

```
def contains?(array,string)
    array.index{|item| string.include?(item)}
end 
```

索引将返回一个真值/假值，所以这可能是“最干净”的方法。我还会包括 ? 在函数定义的末尾，只是为了更清楚地说明它应该如何使用以及预期的结果。

# java - geo_point 类型的不同格式？

> ID：10577251
> 
> 赞同：0
> 
> 时间：2012-05-14T03:35:54.167
> 
> 标签：java, lucene, geolocation, elasticsearch

从这里的文档：[http ://www.elasticsearch.org/guide/reference/mapping/geo-point-type.html](http://www.elasticsearch.org/guide/reference/mapping/geo-point-type.html)

它说 geo_point 接受不同的格式。例如：支持这两个

> 1.  “位置”：“-71.34, 41.12”
>     
>     
> 2.  “位置”：{“纬度”：41.12，“经度”：-71.34}

我想问这两个是一样的吗？我正在使用 ES 0.17.6 并遇到此问题：

当我使用 (1) 格式进行索引时，我无法使用 (2) 格式进行搜索。如果我使用（1）格式再次搜索，它是成功的。

例如：如果我用 (2) 格式索引：

```
curl -XPUT 'http://localhost:9200/twitter/pin/1' -d '
{
    "pin" : {
        "location" : {
                        lat: 41.12,
                        lon: -71.34
                },
        "tag" : ["food", "family"],
        "text" : "my favorite family restaurant"
    }
}' 
```

我无法使用此 (1) 格式进行搜索

```
curl -XGET 'http://localhost:9200/twitter/pin/_search' -d '
{
        "query": {
                "filtered" : {
                        "query" : {
                                "field" : { "text" : "restaurant" }
                        },
                        "filter" : {
                                "geo_distance" : {
                                        "distance" : "12km",
                                        "pin.location" : "-71.34, 41.12"
                                }
                        }
                }
        }
}
' 
```

如果我使用 (2) 格式进行搜索，它将成功：

```
2\. "pin.location" : {
            "lat" : 41.12,
            "lon" : -71.34
    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-14T11:54:46.957

当 geo_point 表示为字符串时，它应该遵循以下`lat lon`格式：`"pin.location" : "41.12, -71.34"`

# c# - windows phone7中后台（定期任务）和前台应用程序之间的通信？

> ID：10577252
> 
> 赞同：0
> 
> 时间：2012-05-14T03:35:58.497
> 
> 标签：c#, windows-phone-7, asmx

我是 Windows Phone 7 的新手。

我正在 wp7 中开发一个项目，在该项目中每 60 秒我需要将我的纬度经度详细信息发送到 Web 服务（asmx）。

我有一个后台服务，并且正在连接到 asmx 服务。当我在 asmx 上更新我的详细信息时，需要在手机上显示 toast 消息，但我无法做到，请帮助我

这是我的后台服务代码

```
 protected override void OnInvoke(ScheduledTask task)
               {

        watcher = new GeoCoordinateWatcher(GeoPositionAccuracy.Default);
        watcher.Start();
        string useremail = task.Description.ToString();
        string latitude = watcher.Position.Location.Latitude.ToString();
        string longitude = watcher.Position.Location.Longitude.ToString();

        ServiceReference1.UpdateUserLocationSoapClient obj = new ServiceReference1.UpdateUserLocationSoapClient();
        obj.UpdateUserLocation1Completed += new EventHandler<ServiceReference1.UpdateUserLocation1CompletedEventArgs>(obj_UpdateUserLocation1Completed);
        obj.UpdateUserLocation1Async(useremail, latitude, longitude);   
        // If debugging is enabled, launch the agent again in one minute.
        #if DEBUG_AGENT
        ScheduledActionService.LaunchForTest(task.Name, TimeSpan.FromSeconds(5));
        #endif

        // Call NotifyComplete to let the system know the agent is done working.
        NotifyComplete();
    } 
```

私人无效obj_UpdateUserLocation1Completed（对象发送者，ServiceReference1.UpdateUserLocation1CompletedEventArgs e）{

```
 ShellToast toast = new ShellToast();

        toast.Title = "kk";
        toast.Content = "ss" + e.Result.ToString();
        toast.Show();

    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-14T06:50:24.383

要在应用程序和后台代理之间进行通信，您应该使用 Mutex。

一个例子：[http ://www.31a2ba2a-b718-11dc-8314-0800200c9a66.com/2011/11/this-is-continuation-of-this-post.html](http://www.31a2ba2a-b718-11dc-8314-0800200c9a66.com/2011/11/this-is-continuation-of-this-post.html)

编辑：删除 NotifyComplete(); 来自 OnInvoke 并将其放入 obj_UpdateUserLocation1Completed

# unit-testing - Selenium 和 jUnit 的第一步——有什么好的教程吗？

> ID：10577254
> 
> 赞同：22
> 
> 时间：2012-05-14T03:36:33.660
> 
> 标签：unit-testing, jakarta-ee, testing, selenium, junit

任何人都知道一个适合初学者的好教程`Selenium`吗`jUnit`？
我已经拥有`unit testing`和`acceptance testing`（**Rails 3**上的**RSpec**和**Capybara**）的背景，现在我正在使用**JavaEE**开始这个新项目，并且我正在寻找这两种技术的快速入门。 谢谢。

 ***** * *

## 回答 #1

> 赞同：31
> 
> 时间：2012-09-10T12:45:23.213

我正在对这个主题进行一些广泛的阅读/研究，所以我将分享我发现的好文章/幻灯片/书籍/答案：

*   [http://www.qaautomation.net/?cat=7](http://www.qaautomation.net/?cat=7)：我使用了这个网站，我认为它非常好（无论如何对于 Selenium）。

*   [http://www.vogella.com/articles/JUnit/article.html](http://www.vogella.com/articles/JUnit/article.html)：刚看了看，似乎很有趣

*   [wakaleo: junit-kung-fu-getting-more-out-of-your-unit-tests](http://www.slideshare.net/wakaleo/junit-kung-fu-getting-more-out-of-your-unit-tests) : 对一些关键 JUnit 功能的精彩概述

*   [使用 JUnit 和 Selenium 测试您的 Web 应用程序的 UI](http://www.codeproject.com/Articles/143430/Test-your-web-application-s-UI-with-JUnit-and-Sele)

*   [testing-a-web-application-with-selenium-2/](http://thomassundberg.wordpress.com/2011/10/18/testing-a-web-application-with-selenium-2/)：Selenium + JUnit

*   [硒最佳实践](http://mestachs.wordpress.com/2012/08/13/selenium-best-practices/)

*   [你使用 JUnit，所以你想了解 Hamcrest](http://code.google.com/p/hamcrest/)

*   [所以问题：how-to-use-junit-and-hamcrest-together](https://stackoverflow.com/questions/5569394/how-to-use-junit-and-hamcrest-together) (TBC) 一起使用 JUnit 和 Hamcrest 时要小心：如果 Hamcrest 的版本大于或等于 1.2，那么您应该使用 junit-dep.jar。这个 jar 没有 hamcrest 类，因此可以避免类加载问题。

*   此外，关于 Hamcrest，它[在其谷歌代码页上](http://code.google.com/p/hamcrest/)声明“Hamcrest 它不是一个测试库：碰巧匹配器对测试非常有用”。因此，您可能想[研究 FEST](http://code.google.com/p/fest/) “其使命是简化软件测试”。

*   [所以问题：junit-one-test-case-per-method-or-multiple-test-cases-per-method](https://stackoverflow.com/questions/6252187/junit-one-test-case-per-method-or-multiple-test-cases-per-method)

*   [所以问题：selenium-junit-tests-how-do-i-run-tests-within-a-test-in-sequential-order](https://stackoverflow.com/questions/8518314/selenium-junit-tests-how-do-i-run-tests-within-a-test-in-sequential-order)

*   [tomek kaczanowscy 的博客：“实用单元测试”的作者（见下文）](http://kaczanowscy.pl/tomek/)

*   这本书最近出版了（2012 年出版，有很多过时的书），看起来很有趣：[Tomek Kaczanowski 的用 TestNG 和 Mockito 进行的实用单元测试](http://practicalunittesting.com/)

最后，您可能想查看一个模拟框架（即[Mockito](http://code.google.com/p/mockito/)、[JMock](http://www.jmock.org/)、[EasyMock](http://www.easymock.org)）：

*   [所以问题：java中的模拟对象是什么](https://stackoverflow.com/questions/2128148/what-are-mock-objects-in-java)

*   [SO问题：模拟框架为我做什么](https://stackoverflow.com/questions/8095796/what-does-a-mocking-framework-do-for-me)

*   [http://mestachs.wordpress.com/2012/07/09/mockito-best-practices/](http://mestachs.wordpress.com/2012/07/09/mockito-best-practices/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-15T08:09:04.527

我建议您使用 TestNG 而不是 JUnit。TestNG 为您提供了更多选项和可能性，特别是如何运行测试以及以何种顺序运行测试（Junit 不能）。这里有一些有用的链接。

*   [测试NG文档](http://testng.org/doc/documentation-main.html)，
*   [SeleniumHQ](http://seleniumhq.org/)在这里你可以找到第一个指南
*   [硒API](http://selenium.googlecode.com/svn/trunk/docs/api/java/index.html)
*   [CssSelectors](http://www.w3.org/TR/selectors/#selectors)对于查找没有 id/name 的元素非常有用，比 xpath 更好

希望有帮助****

# shell - 使用 sed 对与模式匹配的行编号

> ID：10577256
> 
> 赞同：19
> 
> 时间：2012-05-14T03:36:48.940
> 
> 标签：shell, unix, sed

我正在编写搜索与某种模式匹配的行的脚本。我必须为这个脚本使用 sed。这适用于搜索和打印匹配的行：

```
sed -n /PATTERN/p 
```

但是，我还想在行本身前面打印匹配的行号。我怎样才能使用 sed 做到这一点？

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2012-05-14T14:09:28.797

您可以使用`grep`：

```
grep -n pattern file 
```

如果在行号中使用`=`，`sed`将打印在单独的行上并且不可用在模式空间中进行操作。但是，您可以将输出通过管道传输到 sed 的另一个实例中，以合并行号及其适用的行。

```
sed -n '/pattern/{=;p}' file | sed '{N;s/\n/ /}' 
```

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2012-05-14T03:58:39.297

`=`用于打印行号。

```
sed -n /PATTERN/{=;p;} 
```

* * *

## 回答 #3

> 赞同：9
> 
> 时间：2014-07-30T08:59:33.207

对于 sed，使用以下获取行号

```
sed -n /PATTERN/= 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-05-14T03:44:45.183

切换到 awk。

```
BEGIN {
  ln=0
}

$0 ~ m {
  ln+=1
  print ln " " $0
  next
}

{
  print $0
} 
```

...

```
awk -f script.awk -v m='<regex>' < input.txt 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2013-12-13T07:01:59.173

使用 Perl：

```
perl -ne 'print "$.: $_" if /regex/' input.file 
```

`$.`包含行号。如果输入文件包含：

```
record foo
bar baz
record qux 
```

这个单行：`perl -ne 'print "$.: $_" if /record/' input.file`将打印：

```
1: record foo
3: record qux 
```

或者，如果您只希望总行数与模式匹配，请使用：

`perl -lne '$count++ if /regex/; END { print int $count }' input.file`

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2016-10-20T16:07:27.400

这是最简单的方法：

```
awk '{print ln++  ":  "  $0 }' 
```

# windows - 在脚本中使用 Del

> ID：10577258
> 
> 赞同：0
> 
> 时间：2012-05-14T03:37:23.817
> 
> 标签：windows, batch-file, cmd

我在这样的脚本中使用 del：

```
del C:\Users\Eric\Desktop\dir\*.* 
```

当脚本运行时，如果我想运行脚本，命令提示符让我输入 y 或 n 表示是或否。我不希望它提示我，我只想让它这样做。我怎么能做到这一点？

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-14T03:44:46.870

```
del c:\Users\Eric\Desktop\dir\*.* /q 
```

/q 开关关闭[确认](http://www.microsoft.com/resources/documentation/windows/xp/all/proddocs/en-us/del.mspx?mfr=true)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-16T14:36:52.337

您可以`/q`按照 CognitiveCarbon 的建议使用开关。连同`/f`删除只读文件和`/s`递归删除。

您还可以像这样通过管道`y`传递命令的答案：

`echo y| del c:\Users\Eric\Desktop\dir\*.*`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-14T03:41:49.177

如果这是一个 bash 脚本（假设 del 别名为 rm），如标签所示，请使用 rm -rf 文件或目录 但是要小心，这会强制递归删除并且不会提示您！

# java - 使用 ElasticSearch 的 Java API 进行分页

> ID：10577260
> 
> 赞同：4
> 
> 时间：2012-05-14T03:38:28.417
> 
> 标签：java, playframework, elasticsearch

我正在尝试在播放框架中使用弹性搜索模块来搜索书籍，我有以下方法在控制器中执行搜索，该控制器根据用户输入的搜索字符串返回书籍列表

```
public static void bookList(String search){
    SearchResults<Book> searchResult =  ElasticSearch.search(QueryBuilders.queryString(search)  , Book.class);
    List<Book> bookList = searchResult.objects  ;
    render(bookList);
} 
```

现在我需要对获得的结果进行分页。我该如何使用 Java API 做到这一点？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-14T03:47:50.370

在 Play 的 Elasticsearch 模块文档中：

> 调用 ElasticSearch.query() 并随后设置查询参数（例如分页）

因此，在您的情况下，您想从 i 检索 j 搜索结果：

```
SearchResults<Book> searchResult =  ElasticSearch.query(QueryBuilders.queryString(search), Book.class).from(i).size(j).fetch(); 
```

# visual-studio - 启动项目进行调试时，为什么 Visual Studio 构建整个解决方案而不仅仅是项目？

> ID：10577266
> 
> 赞同：5
> 
> 时间：2012-05-14T03:39:13.823
> 
> 标签：visual-studio, unit-testing, debugging

在 Visual Studio 中，如果选择“开始调试”或“不调试就开始”来运行当前选择的启动项目，Visual Studio 总是会构建整个解决方案。这似乎没有必要，因为它真正需要做的就是构建您希望启动的项目及其依赖项。

例如，如果您有一些单元测试项目，则在所有单元测试项目也都编译完成之前，您无法运行启动项目。至少，构建所有这些单元测试项目是浪费时间，因为希望运行的项目无论如何都不会依赖于它们。

是否有可能改变这种行为？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-05-14T03:51:02.710

是的，您可以更改此行为（出于您描述的确切原因，我总是这样做）。

去`Tools > Options > Projects and Solutions > Build and Run`。然后选中“仅在运行时构建启动项目和依赖项”。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-05-06T22:42:09.243

就我而言，这已经过检查，但仍未建立。VS 2012 仅构建主（启动）项目，但没有构建它的依赖项。发现是因为里面设置`Active configuration`了`ConfigurationManager`只构建Main（启动）项目。

前往`Build`>`ConfigurationManager`

确保检查您要构建的所有项目，如下面的屏幕截图所示

![在此处输入图像描述](../Images/0cbe5a38d5e801898825ea31f9e3973e.png)

# c++ - 删除单独插槽中的发件人

> ID：10577269
> 
> 赞同：4
> 
> 时间：2012-05-14T03:39:50.037
> 
> 标签：c++, qt, memory-management, signals-slots

我有一个发出 3 个不同信号的对象，我想传输这些信号并删除它们的发送者。该对象位于将充当这些信号的发射器的另一个对象中。

通常我会这样：

```
void SomeClass::someSideFunction() {
    Request* request = _StorageProvider.insert("somedata");

    connect(request, SIGNAL(succeded()),        this, SLOT(handleSucceded()));
    connect(request, SIGNAL(failed()),          this, SLOT(handleFailed()));
    connect(request, SIGNAL(alreadyExists()),   this, SLOT(handleAlreadyExists()));
}

void SomeClass::handleSucceded() {
    Request* request = qobject_cast<Request*>(sender());
    if(request != NULL) request ->deleteLater();
    emit succeded();
}

void SomeClass::handleFailed() {
    Request* request = qobject_cast<Request*>(sender());
    if(request != NULL) request ->deleteLater();
    emit failed();
}

void SomeClass::handleAlreadyExists() {
    Request* request = qobject_cast<Request*>(sender());
    if(request != NULL) request ->deleteLater();
    emit alreadyExists();
} 
```

有没有更好的方法来做到这一点？即使“请求”是 storageProvider 的子项，但仍有许多请求正在进行，我只需要等待删除它们，直到父项死亡。

我在想这样的解决方案：

```
connect(request, SIGNAL(succeded()),        this, SIGNAL(succeded()));
connect(request, SIGNAL(failed()),          this, SIGNAL(failed()));
connect(request, SIGNAL(alreadyExists()),   this, SIGNAL(alreadyExists()));
connect(request, SIGNAL(succeded()),        this, SLOT(memoryHnadler()));
connect(request, SIGNAL(failed()),          this, SLOT(memoryHnadler()));
connect(request, SIGNAL(alreadyExists()),   this, SLOT(memoryHnadler())); 
```

如果存在，内存处理程序将删除发送者。这种方法有什么缺点，什么可能更好？

请注意，对象在完成时只会发出这些信号之一！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-14T07:43:41.450

An option is to have the request schedule its own deletion using QObject::deleteLater(). Like this:

```
void Request::emitSucceeded() {
    emit succeeded();
    deleteLater();
}

void Request::emitFailed(int errorCode, const QString& errorString ) {
    m_errorCode = errorCode;
    m_errorString = errorString;
    emit failed();
    deleteLater();
} 
```

For instance, KDELib's base class for asynchronous operations, [KJob](http://api.kde.org/4.8-api/kdelibs-apidocs/kdecore/html/classKJob.html), is using this pattern (unless explicitly disabled via setAutoDelete(false)).

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-14T07:01:30.747

我看不出您的第二种方法有任何不利之处。Qt 将首先发送信号，然后是内存处理程序，因为它的执行顺序与您声明连接的顺序相同。

内存处理程序必须是唯一删除 Request 对象的处理程序。

另一种方法是使用 Request 对象作为参数发出信号，然后依靠用户槽删除它们。但是如果没有声明用户槽，你将保持内存增长......

# design-patterns - 优雅的设计是否意味着删除所有“if-else”？或者我们需要平衡

> ID：10577273
> 
> 赞同：0
> 
> 时间：2012-05-14T03:40:33.307
> 
> 标签：design-patterns

我不想说“全部”那么极端

我的印象是漂亮的设计消除了很多 if else 多态性取代了 switch-case。今天又看了一个题目，用继承去掉if-else。

在我的理解中，设计通常意味着让人们对程序中的概念感到熟悉，以便人们可以轻松地更改/扩展程序。但有时我觉得人们对“if-else”也很方便。

是否有一些指导方针，以便有时我们应该更喜欢 OO 概念，而在其他情况下我们应该只使用“if-else”

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-14T07:01:13.107

我认为我们需要区分重构复杂的 if-else 语句和用于类层次结构的 if-else 逻辑。

我们**总是**需要 if-else 块，你的代码仍然可以优雅地使用它们。但是像所有代码一样，它必须被维护和可读。

if-esle 块在用于检查类层次结构时并不优雅。例如：

```
if(object.instanceof derivedClassA) {
    object.doMethod();
}
else if(object.instanceof derivedClassB) {
    ....
}
else if(object.instanceof baseClass) {
}
... 
```

这可以***而且***应该使用 OOP 技术来处理，例如继承和多态性。但是，与任何旨在改进代码的技术一样，OOP 可能会被滥用和过度使用。[我总是尝试通过使用Strategy 设计模式](http://en.wikipedia.org/wiki/Strategy_design_pattern)来避免过度使用继承，这种设计模式提倡优先`HAS-A`关系而不是`IS-A`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-14T03:47:11.720

在这种情况下可能适用的一个约定是古老的“三法则”：

[http://en.wikipedia.org/wiki/Rule_of_three_(computer_programming](http://en.wikipedia.org/wiki/Rule_of_three_(computer_programming) )

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-14T03:53:16.500

对此有一些激烈和媚俗的看法：[http](http://www.antiifcampaign.com/) ://www.antiifcampaign.com/ 。

重要的是要注意，有许多语言没有多态性，并且在许多情况下，即使语言支持运行时多态性，也不能从性能角度证明它是合理的。例如，一个 N 体问题将是使用多态性的地方，即使它会起作用。

我喜欢 SO [anti-if 运动中的这个主题](https://stackoverflow.com/questions/1167589/anti-if-campaign)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-14T04:00:33.900

如果别的 ...

在查看顺序代码时是最易读的。当我们嵌套或链接它们时会出现问题，因为读者通常无法遵循逻辑。

如果周五早点回家 其他如果周三喝咖啡 其他如果周六或周日呆在家里

嵌套的 if 语句更加混乱。

在这些情况下，switch 类型的语句更清晰，因为它看起来像一张表格——这又是一种读者觉得适合多项选择的风格

Switch day case 周三：喝咖啡 周五：早点回家 周六，周日：待在家里

当我们提前知道选项时，就有更好的方法来处理它。

def test(v): if v == 'a': 做某事 elif v == 'b': 做其他事

测试('a') 测试('b')

效率低下且不清楚。最好使用单独命名的方法，或者如果 v 来自外部源，则使用字典。

选择 = a：做某事 b：做其他事

选择['a']?() 选择['b']?()

最后一个例子是更少的 sudo 代码和更多的咖啡脚本。这 ？在函数调用之前意味着如果字典引用无效，则不会进行调用。

我刚刚阅读了安迪的回复。三人制无处不在——而且有充分的理由。正如我上面所讨论的，太多的信息会导致混乱。我在我的博客中讨论了三法则——尤其是在讨论分解设计时。

# c# - C# 应用程序的调试转储

> ID：10577274
> 
> 赞同：0
> 
> 时间：2012-05-14T03:40:37.553
> 
> 标签：c#, .net, debugging, dump, adplus

我使用 ADPlus 生成了 ac# 应用程序的挂起转储。当我尝试使用 VS2008 调试它时，它显示以下错误消息

没有为任何调用堆栈帧加载符号。无法显示源代码。

我已经设置了 .net 应用程序的符号路径。

**我应该怎么做才能从转储中查看 c# 应用程序的调用堆栈？**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-14T05:32:00.353

[http://blogs.msdn.com/b/tess/archive/2008/02/04/net-debugging-demos-lab-1-hang.aspx](http://blogs.msdn.com/b/tess/archive/2008/02/04/net-debugging-demos-lab-1-hang.aspx)

Visual Studio 不是一个合适的工具（VS 2010 更好，但它只能分析 .NET 4 转储），你必须学习 WinDbg。

# c++ - 在 UNIX 上可以正常工作，但在 Visual Studio 中不行？

> ID：10577275
> 
> 赞同：2
> 
> 时间：2012-05-14T03:40:50.337
> 
> 标签：c++, visual-studio, unix

所以我已经在一个大学项目上工作了几个星期，但只在我的 Mac 上运行，它在 Lion 上运行 Netbeans，然后每天都在我的 linux 安装上练习使用纯 vi/g++/gdb。

我最初从我的合作伙伴那里得到了第一个项目，他把它放在一个 .rar 文件中。我提取了这些并开始工作，后来才发现当我回到 Visual Studio 时（明天我要演示这个！），我得到了错误：

“SDI.exe 中 0x7736DEFE (ntdll.dll) 处的未处理异常：0xC00000FD：堆栈溢出（参数：0x00000001、0x00082FA4）。” SDI.exe 中 0x77373557 (ntdll.dll) 处的未处理异常：0xC0000005：访问冲突写入位置 0x00080FEC。

这让我非常沮丧！我的代码在 Netbeans 和终端中完美运行，奇怪的是，我的朋友拥有原始 .rar 文件，而是压缩文件，解压缩，然后我们打开他的项目，删除他的文件，然后放入我的文件，然后编译完美！但是必须有一些Visual Studio文件可以保存某些设置或其他东西，因为尽管它在他的项目中运行，但如果我只是将文件复制到一个新项目中它就不起作用！我明天要演示，我真的很困惑，所以对此主题的任何帮助将不胜感激。谢谢！

# php - 解析巨大的 XML - 记住上次成功处理的节点以在下次运行时设置偏移量

> ID：10577276
> 
> 赞同：0
> 
> 时间：2012-05-14T03:40:51.250
> 
> 标签：php, xml, xmlreader

我有一些用于计划导入的相当大的 xml 文件。我使用 cron 来解析它们。问题是处理需要太多时间并且总是超过 php“max_execution_time”。由于我使用 XMLReader，它允许“逐行”读取 xml，我看到的唯一一个解决方案是：跟踪当前工作的“节点”，记住它并在下一次 cron 运行时设置节点偏移量。

我现在有

```
 $xml = new XMLReader;
  $xml->open($file);
  $pointer = 0;

  while($xml->read()) {

    if ($xml->nodeType == XMLReader::ELEMENT && $xml->localName == 'Product') {
      $chunk = array();
      $chunk['ProductID'] = $xml->getAttribute('ProductID');
      $chunk['ProductName'] = $xml->getAttribute('ProductName');
      process_import($chunk); // Process received date
      save_current_node_in_BD($pointer++); // insert current position in BD
    }
  }
  $xml->close();
} 
```

使用 $pointer++ 来计算处理的节点是个好主意吗？ **如何为下一次 cron 运行设置偏移量？**

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-14T03:56:33.783

首先，当您从 cron 执行 php 时，通常使用默认 max_execution_time 为 0（禁用）的 cli 版本。如果您无法更改，请继续阅读。

如果您的 XML 可以在一段时间内被解析（仅解析，不处理），您可以有两个 cron：

1.  第一个 cron 将解析 XML 并将新任务转储到一堆。
2.  第二个 cron 将从堆中取出工作，对其进行处理，然后将其从堆中移除。

桩可以通过几种方式实现，其中：

*   一个数据库表
*   工作项目录（每个工作项是一个文件）

**编辑**

如果您不能禁用执行时间限制，您可以保留一个包含文件名和位置的小文件。在每次迭代中，您都可以打开此文件以确定是否还有工作要做。为了确保它在时间用完时保存该文件，您需要注册一个[关闭功能](http://www.php.net/manual/en/function.register-shutdown-function.php)。

# mysql - 使用 Amazon RDS 构建我自己的数据库扩展解决方案

> ID：10577281
> 
> 赞同：0
> 
> 时间：2012-05-14T03:41:31.313
> 
> 标签：mysql, amazon-web-services, scalability, sharding, amazon-rds

我决定在我的 ASP.NET 应用程序中使用 Amazon RDS MySQL。为了将来支持大数据库容量，我决定使用分片，但在一个简单的实现中。我将在单个数据库上工作，当 Id 达到 1,000,0000 以上的增量 id 时，我将使用第二个数据库，依此类推。

每个数据库都将具有相同的数据库架构。现在，我将创建一个变量来保存我正在并行处理的 Amazon RDS 服务器的数量。我将使用 UNION ALL 编写查询。这些查询将动态创建，并将考虑服务器的数量来创建一个 UNION ALL 查询，该查询利用整个服务器来连接数据。然后我将再次查询该数据。

我将仅将这种技术用于我希望变大的表。应用程序将根据我为每个服务器设置的最大 id（即服务器 1，最多 1,000,000）知道向哪个服务器发送删除和更新 sql 查询。对于插入语句，我当然会将数据插入到最后一个服务器。我不需要担心复制、恢复和备份功能，Amazon RDS 会处理这些。

我对你的问题是：

1.  这是构建我自己的分片架构的好方法吗？选择更昂贵的解决方案？
2.  加入查询怎么样，如果我有不同服务器的连接字符串，我还能在 Visual Studio 中制作它们吗？
3.  这个解决方案在性能方面有多好，我需要了解他们的任何问题吗？

一般来说，我想要一个简单的解决方案，让我可以从一台服务器开始，并在需要时轻松扩展。今天的大多数解决方案都非常复杂，即使不是，也非常昂贵。

谢谢

# php - bootstrap typeahead 让结果数据源结果出现？

> ID：10577284
> 
> 赞同：0
> 
> 时间：2012-05-14T03:41:47.107
> 
> 标签：php, jquery, twitter-bootstrap, typeahead

我搜索时没有得到任何结果。

```
<input type="text" class="span1" id="tag_field" data-items='4' data-provide="typeahead" data-source='[<?php echo json_encode($groups); ?>]' >
<?php echo json_encode($groups); ?> 
```

当我回显 json_encond($groups) 它以这种格式出现

```
{"35":"biology","37":"economist","33":"programmers"} 
```

如果我使用这种格式输入数据源，我会得到结果。

```
 data-source='["Alabama","Alaska","Arizona"]'> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-14T03:48:17.320

我认为 Typeahead 插件期望一个字符串数组作为`data-source`. 你`json_encode`正在创建一个对象，当你回显它时，你只是将它包装在一个数组中。

你想要这样的东西：

```
<?php
$groups = array("biology", "economist", "programmers");
?>

<input type="text" class="span1" id="tag_field" data-items='4' data-provide="typeahead" data-source='<?php echo json_encode($groups); ?>'> 
```

您可以使用 PHP 中的[array_values()](http://php.net/manual/en/function.array-values.php)函数来确保您`$groups`是一个基本的数字索引数组。

# templates - 将列表映射到 HTML 并在 Play 2.0 模板中插入结果

> ID：10577288
> 
> 赞同：4
> 
> 时间：2012-05-14T03:42:58.413
> 
> 标签：templates, scala, playframework, playframework-2.0

给定一个 foobar 列表（每个都包含一个名称和一个用于创建 URL 超链接的 slug），在 Play 2.0 模板中将该列表中的每个项目呈现为链接（或其他一些 HTML）的惯用方式是什么？ )，然后在列表中插入一些字符，比如逗号？

例如，如果有 3 个 foobar，最终输出可能如下所示：

`<a href="/quux/foobar1">Foobar1</a>, <a href="/quux/foobar2">Foobar2</a>, <a href="/quux/foobar3">Foobar3</a>`

我的第一个冲动是尝试：

```
@foobars.map{foobar => 
<a href="@routes.Foobars.quux(foobar.slug)">@foobar.name</a>
}.mkString(", ") 
```

但这输出转义的 HTML，这不是我想要的。

这似乎是一个常见的用例；有没有一种惯用的方法可以完成？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-31T14:36:15.297

您应该能够使用 Html 帮助程序来停止转义......

```
@{Html(foobars.map{foobar => 
    <a href="@routes.Foobars.quux(foobar.slug)">@foobar.name</a>
}.mkString(", "))} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-14T08:56:14.363

我没有用过Play，但我认为这`mkString`似乎是问题所在。它将您精心构建的 a 转换`NodeSeq`为 a `String`，然后将其传递给 Play 的 HTML 输出例程，在那里它被转换为 a `Text`（包括转义）。

为了避免这种情况：

```
@foobars.map{foobar => 
  <a href="@routes.Foobars.quux(foobar.slug)">@foobar.name</a>
}.reduceLeft((e1: xml.NodeSeq, e2: xml.NodeSeq) => e1 ++ xml.Text(", ") ++ e2) 
```

（对于空的 foobar 序列，这将失败。你必须查看`reduceLeftOption`那时。）

不过，Play API 中可能有专门的函数。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-03-19T21:03:06.423

基于 Debilski 的想法，我构建了一个工作版本。但遗憾的是，我在追加时得到了额外的空间。没什么大不了的，但它就在那里：

```
<td>
    @r.countries.map{ country =>
      <a href="@routes.Items.editCountry(country.toString, "main")">
         @Country.findOneByID(country).map(_.name)
      </a>
    }.reduceLeftOption((e1: Html, e2: Html) => e1 += Html(",") += e2)
</td> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-11-06T15:10:23.317

使用其他答案的组合，我也能够为 Play 2.3 解决这个问题：

```
@foobars.map{foobar =>
    <a href="@routes.Foobar.quux(foobar.slug)">@foobar.name</a>
}.reduceLeftOption((e1: Html, e2: Html) => Html(e1 + "," + e2)) 
```

# sql - SQL查询到动态数据透视/转换表中的数据

> ID：10577292
> 
> 赞同：0
> 
> 时间：2012-05-14T03:43:42.077
> 
> 标签：sql, sql-server, database, sql-server-2008, tsql

我有下表，

```
Company_ID             part_id     Serial NO
------------------    ----------- --------------
1                     BAU          BAU2512  
1                     BAU          BAU3512
1                     BAU          BAU4512
2                     BAU          BAU5512
2                     BAU          BAU6512
2                     BAU          BAU7512 
```

我想要一个查询来返回这个

```
Company_id             Item#1       Item#2         Item#3   
------------------    ---------     -------------  ----------- 
1                     BAU2512       BAU3512        BAU4512
2                     BAU5512       BAU6512        BAU7512 
```

使用 SQL Server 2008 对查询的任何帮助表示赞赏

创建示例表。

```
-- Suppress data loading messages
SET NOCOUNT ON

-- Create Sample Data using a Table Varable
DECLARE @Company TABLE
(Company_ID int,
 part_ID varchar(30),
 SerialNO varchar(30))

-- Load Sample Data
INSERT INTO @Company VALUES (1, 'BAU', 'BAU2512')
INSERT INTO @Company VALUES (1, 'BAU', 'BAU3512')
INSERT INTO @Company VALUES (1, 'BAU', 'BAU4512')
INSERT INTO @Company VALUES (2, 'BAU', 'BAU5512')
INSERT INTO @Company VALUES (2, 'BAU', 'BAU6512')
INSERT INTO @Company VALUES (2, 'BAU', 'BAU7512') 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-14T04:43:37.540

啊哈，我认为没有办法为此使用动态 sql。基于这里的答案[PIVOT in sql 2005](https://stackoverflow.com/questions/198716/pivot-in-sql-2005#199763)

以下是适合我的解决方案。

**创建表等**

```
-- Create Sample Data using a Table Varable
create table dbo.Company
(Company_ID int,
 part_ID varchar(30),
 SerialNO varchar(30))

-- Load Sample Data
INSERT INTO Company VALUES (1, 'BAU', 'BAU2512')
INSERT INTO Company VALUES (1, 'BAU', 'BAU3512')
INSERT INTO Company VALUES (1, 'BAU', 'BAU4512')
INSERT INTO Company VALUES (2, 'BAU', 'BAU5512')
INSERT INTO Company VALUES (2, 'BAU', 'BAU6512')
INSERT INTO Company VALUES (2, 'BAU', 'BAU7512') 
```

**查询**

```
DECLARE @sql AS varchar(max)
DECLARE @pivot_list AS varchar(max) -- Leave NULL for COALESCE technique
DECLARE @select_list AS varchar(max) -- Leave NULL for COALESCE technique

SELECT @pivot_list = COALESCE(@pivot_list + ', ', '') + '[' + CONVERT(varchar, PIVOT_CODE) + ']'
        ,@select_list = COALESCE(@select_list + ', ', '') + '[' + CONVERT(varchar, PIVOT_CODE) + '] AS [col_' + CONVERT(varchar, PIVOT_CODE) + ']'
FROM (
    SELECT DISTINCT PIVOT_CODE
    FROM (
        SELECT Company_ID, SerialNO, ROW_NUMBER() OVER (PARTITION BY Company_ID ORDER BY SerialNO) AS PIVOT_CODE
        FROM Company
    ) AS rows
) AS PIVOT_CODES

SET @sql = '
;WITH p AS (
    SELECT Company_ID, SerialNO, ROW_NUMBER() OVER (PARTITION BY Company_ID ORDER BY SerialNO) AS PIVOT_CODE
    FROM Company
)
SELECT Company_ID, ' + @select_list + '
FROM p
PIVOT (
    MIN(SerialNO)
    FOR PIVOT_CODE IN (
        ' + @pivot_list + '
    )
) AS pvt
'

PRINT @sql

EXEC (@sql) 
```

**在这里回答：**

[http://sqlfiddle.com/#!3/7fd86/1](http://sqlfiddle.com/#!3/7fd86/1)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-14T03:49:01.780

看起来你想要一个 PIVOT 语句。看看[这里](http://blog.sqlauthority.com/2008/06/07/sql-server-pivot-and-unpivot-table-examples/)。

# asp.net - 单击时复选框的大小正在更改

> ID：10577293
> 
> 赞同：0
> 
> 时间：2012-05-14T03:43:42.690
> 
> 标签：asp.net, html

当我单击页面上的复选框时，文本的大小也会改变。我使用了萤火虫，我注意到有一个 element.style 改变了大小..

这是我的 html 代码

```
 <td align="left">

 7.<asp:CheckBox 
 ID="chk18_7" runat="server"  
 Text="Ambulation" Enabled="False" /> 
```

这是我的CSS

```
.style3
        {
            font-size: 10px;
        } 
```

这是我在萤火虫中的代码

```
<td align="left">
7.
<span class="aspNetDisabled style3" style="font-size:15px">
<input id="chk18_7" type="checkbox" onclick="return false;" disabled="disabled" checked="checked" name="chk18_7">
<label for="chk18_7">Ambulation</label>
</span>
</td> 
```

我怎样才能删除 style="font-size:15px"

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-14T04:00:22.980

虽然看起来您可能有一个验证器或某种应用内联样式的 javascript，但您可以通过将其添加到样式表来调整标签的样式：

`span.aspNetDisabled.style3 label {font-size:10px !important}`

# java - xpath 的 RuntimeException

> ID：10577305
> 
> 赞同：1
> 
> 时间：2012-05-14T03:46:08.773
> 
> 标签：java, dom, xpath, runtimeexception

我有一个函数，在这个函数中，我使用 Xpath 来获取节点的位置，如下所示：

```
 Node goTo;
.....

private Node xpathgo(Node node) throws XPathExpressionException {
       XPath xpath = XPathFactory.newInstance().newXPath();
       Node result;

 if (node == null || node.getNodeName() == null){
            return null;
        }

               xpathgo(node.getFirstChild());

               result =   (Node) xpath.evaluate("//*[. = \"" + goTo.getNodeValue() + "\"]", node,XPathConstants.NODE);

            xpathgo(node.getNextSibling());
 return  result;   
} 
```

基本上我用它来获取一个由 URL html 代码组成的 DOM 节点，但我面临两个问题，首先，有时我得到这个异常：

```
Exception in thread "main" java.lang.RuntimeException: Could not resolve the node to a handle
    at com.sun.org.apache.xml.internal.dtm.ref.DTMManagerDefault.getDTMHandleFromNode(DTMManagerDefault.java:574)
    at com.sun.org.apache.xpath.internal.XPathContext.getDTMHandleFromNode(XPathContext.java:182)
    at com.sun.org.apache.xpath.internal.XPath.execute(XPath.java:301)
    at com.sun.org.apache.xpath.internal.jaxp.XPathImpl.eval(XPathImpl.java:210)
    at com.sun.org.apache.xpath.internal.jaxp.XPathImpl.evaluate(XPathImpl.java:275) 
```

还有这个用于其他类型的节点：

```
Caused by: javax.xml.transform.TransformerException: Expected ], but found: the
at com.sun.org.apache.xpath.internal.compiler.XPathParser.error(XPathParser.java:608)
at com.sun.org.apache.xpath.internal.compiler.XPathParser.consumeExpected(XPathParser.java:526)
at com.sun.org.apache.xpath.internal.compiler.XPathParser.Predicate(XPathParser.java:1935)
at com.sun.org.apache.xpath.internal.compiler.XPathParser.Step(XPathParser.java:1724)
at com.sun.org.apache.xpath.internal.compiler.XPathParser.RelativeLocationPath(XPathParser.java:1624)
at com.sun.org.apache.xpath.internal.compiler.XPathParser.LocationPath(XPathParser.java:1595)
at com.sun.org.apache.xpath.internal.compiler.XPathParser.PathExpr(XPathParser.java:1315)
at com.sun.org.apache.xpath.internal.compiler.XPathParser.UnionExpr(XPathParser.java:1234)
at com.sun.org.apache.xpath.internal.compiler.XPathParser.UnaryExpr(XPathParser.java:1140)
at com.sun.org.apache.xpath.internal.compiler.XPathParser.MultiplicativeExpr(XPathParser.java:1061)
at com.sun.org.apache.xpath.internal.compiler.XPathParser.AdditiveExpr(XPathParser.java:1003)
at com.sun.org.apache.xpath.internal.compiler.XPathParser.RelationalExpr(XPathParser.java:928)
at com.sun.org.apache.xpath.internal.compiler.XPathParser.EqualityExpr(XPathParser.java:868)
at com.sun.org.apache.xpath.internal.compiler.XPathParser.AndExpr(XPathParser.java:832)
at com.sun.org.apache.xpath.internal.compiler.XPathParser.OrExpr(XPathParser.java:805)
at com.sun.org.apache.xpath.internal.compiler.XPathParser.Expr(XPathParser.java:788)
at com.sun.org.apache.xpath.internal.compiler.XPathParser.initXPath(XPathParser.java:127)
at com.sun.org.apache.xpath.internal.XPath.<init>(XPath.java:176)
at com.sun.org.apache.xpath.internal.XPath.<init>(XPath.java:264)
at com.sun.org.apache.xpath.internal.jaxp.XPathImpl.eval(XPathImpl.java:193)
at com.sun.org.apache.xpath.internal.jaxp.XPathImpl.evaluate(XPathImpl.java:275)
... 7 more 
```

但有趣的是，在展位案例中，节点是一个`[#text]`让我困惑为什么会发生的节点。

# android - android:textAppearance 用于阿拉伯语

> ID：10577309
> 
> 赞同：0
> 
> 时间：2012-05-14T03:47:13.623
> 
> 标签：android, textview, arabic

TexView 中的默认字体可怕地呈现阿拉伯语。

有没有办法可以将 TextView 设置为可以很好地呈现阿拉伯语的样式，也许使用`android:textAppearance`？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-14T05:36:36.400

创建一个字体并将其设置为所有显示文本的组件（TextView、EditText、Button、...）。去做这个：

1-将您的字体文件复制到您的资产文件夹中

2- 在您的活动中：

```
someTypeFace = Typeface.createFromAsset(getAssets(), "fonts/someFont.ttf"); 
```

3-到处都有一个 View 对象：

```
someTextView = (TextView) findViewById(R.id.some_text_view);
someTextView.setTypeface(someTypeFace); 
```

# responsive-design - 无法保持响应式布局

> ID：10577310
> 
> 赞同：0
> 
> 时间：2012-05-14T03:47:26.820
> 
> 标签：responsive-design

我在一个网站上工作，这里是[http://mytownsville.info/Young-Passion/](http://mytownsville.info/Young-Passion/) 问题是我无法保持响应式布局。当我缩小浏览器时，徽标只是搞砸了。寻求您的帮助。

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-31T18:49:04.013

您正在使用 position:absolute; 这会使响应式设计变得过于复杂。你看过弹性盒子吗？：

[http://www.html5rocks.com/en/tutorials/flexbox/quick/](http://www.html5rocks.com/en/tutorials/flexbox/quick/)

或者您也可以使用带有百分比宽度的“float”。这将允许您的内容按比例缩小，但仍保持相同的布局（不会被推送到不同的行等）。然后当你得到非常小的宽度时，你可以使用 CSS3 媒体查询来捕捉到不同的布局。

一般来说，建议先从移动/最小布局开始，然后再构建，而不是相反。

# javascript - 如何找到字符串的某个部分开始的位置？

> ID：10577311
> 
> 赞同：1
> 
> 时间：2012-05-14T03:47:30.003
> 
> 标签：javascript, regex

已经很晚了，我真的很累，我很难弄清楚一件简单的事情。

我有一个字符串，其形式为

```
BROADCAST FROM x\ny\nz 
```

...其中`x`是一个没有空格或换行符的单词，`y`是一个数字，并且`z`是一个字符串，其字符长度为`y`.

我所需要的只是找到 的起始索引，`z`以便我可以`string.slice(indexOfZ)`取而代之。

这个正则表达式的形式是什么，我将如何用 JavaScript 编写它？

效果应该是...

```
pattern = /\n[0-9]{1,}\n.*/;
var index = string.match(pattern); 
```

我在某个地方错了吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-14T03:55:04.203

为什么`/^BROADCAST FROM \w+ \d+ (.+)$/`行不通？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-14T03:54:10.820

正则表达式很好，但在这种情况下，为什么要让自己很难。

```
var aParts = sFullString.split("\n"); 
```

编辑：看起来你只是想要 z 所以：

```
var z = aParts[2]; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-14T03:53:17.943

找到这个的一种方法是用 / 分割字符串

```
var myString = x\ny\nz;
var str =  myString.split('\'); //if the format is same. 
```

`var index = str[2].indexOf("z")`.

可能还有另一种解决方案。但这是我目前想到的。

希望这个有帮助。

# javascript - HTML javascript 从输入中获取值

> ID：10577312
> 
> 赞同：0
> 
> 时间：2012-05-14T03:47:32.187
> 
> 标签：javascript, html, submit

如何在提交时显示的确认对话框中使用表单字段的值，如下所示？

```
<form action='removefinish.php' method='post' "accept-charset='UTF-8'">
Role: <br>
<select name="role">
<option value="" selected="selected"></option>
<option VALUE="Administrator"> Administrator</option>
<option VALUE="Employee"> Employee</option>
</select>
<br>
<label for='username'>ID: &nbsp;</label>  
<br>
<input type='text' name='username' id='username'/>  
<br>
<br><br>
<input type='submit' name='Submit' value='Submit' onclick="return confirm('Are you sure to remove ID: ')";/> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-14T04:24:33.847

将`onclick`属性替换为以下内容：

```
onclick="return confirm('Are you sure to remove ID ' +
   document.getElementById('username').value + '?')" 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-14T04:23:30.847

您需要挂钩到表单的提交事件。

在你的情况下，你需要给你的`form`元素一个 ID，在这个例子中，我们给它一个 id`formID`

```
<form id="formID" action="removefinish.php" method="post" "accept-charset='UTF-8'"> 
```

然后，您像这样挂钩表单的事件：

```
function formHook() {
    document.getElementById('formID').addEventListener('submit', function(e) {
        // This will fire when the form submit button is pressed,
        // or when the user presses enter inside of a field.

        // Get the value from the username field.
        var value = document.getElementByID('username').value;

        // Ask the user to confirm.
        if (!confirm('Are you sure you wish to remove ' + value + ' from the database?')) {
            // Stop the form from processing the request.
            e.preventDefault();
            return false;
        }
    }, false);
} 
```

您需要在文档加载后执行此操作，以确保 javascript 可以找到表单，而不是在将其添加到 DOM 之前查看。为此，您可以简单地使用以下内容：

```
window.addEventListener('load', formHook, false); 
```

现在，当文档完成加载时，`formHook`将调用该函数。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-14T03:54:05.873

你可以`return confirm('Are you sure to remove ID: ' + document.getElementById('username').value() ) );"`

但是，您可能希望从中创建一个函数，只是`return customConfirmFunction( );`为了使其更易于阅读和面向未来，以防您需要为其添加更多逻辑。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-14T03:58:13.590

如果您不想转到另一个页面，您可以使用 ajax，或者将您的表单操作设置为相同的请求 php 文件。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-14T04:11:49.307

你可以做这样的事情： -

```
 <script type="text/javascript">
    var valueText=document.getElementById("username");
    function confirmPopUp()
    {
    var bul=confirm("Are you sure to remove ID"+valueText.value);
    if(bul==true)
    {
    //statements
    }
    else
    {
    //statements
    }
    }
</Script> 
```

# url - 如何将 POST 数据设置为 URL 并在字符串变量中获取结果

> ID：10577316
> 
> 赞同：1
> 
> 时间：2012-05-14T03:47:54.497
> 
> 标签：url, post

我正在尝试获取 POST 结果，但服务器已阻止它。我试过了

*   fsockopen
*   卷曲
*   文件获取内容

但是我从服务器得到的结果与“拒绝访问”的错误消息相同。

有什么方法可以从块服务器获取 POST 结果。

```
<?php
$post_arr = array ("regno" => "1"); 
    $addr = 'url'; 

    $fp = fsockopen($addr, 80, $errno, $errstr, 30); 
    if (!$fp) { 
        echo "$errstr ($errno)<br />\n"; 
    } else { 

        $req = ''; 
        foreach ($post_arr as $key => $value) { 
            $value = urlencode(stripslashes($value)); 
            $req .= "&" . $key . "=" . $value; 
        } 

        $header = "POST /cgi-bin/webscr HTTP/1.0\r\n"; 
        $header .= "Content-Type: application/x-www-form-urlencoded\r\n"; 
        $header .= "Content-Length: " . strlen($req) . "\r\n\r\n"; 
        fwrite($fp, $header); 
        while (!feof($fp)) { 
            echo fgets($fp, 128); 
        } 
        fclose($fp); 
    }  
?> 
```

并且

```
<?php
    $postdata = http_build_query( 
        array( 
            'regno' => 1
        ) 
    ); 

    $opts = array('http' => 
        array( 
            'method'  => 'POST', 
            'header'  => 'Content-type: application/x-www-form-urlencoded', 
            'content' => $postdata 
        ) 
    ); 

    $context  = stream_context_create($opts); 

    $result = file_get_contents('url', false, $context); 
    echo $result;
?> 
```

上述两种方法都给了我拒绝访问的输出。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-14T15:22:19.767

尝试设置 HTTP_REFERER 变量。

```
'header'  => "Content-type: application/x-www-form-urlencoded\r\nReferer: http://urltopost\r\n", 
```

如果这不起作用，请尝试模仿更多的标题。这是我通过查看 Chrome 开发者工具的网络选项卡得到的：

```
POST /hse/result.asp HTTP/1.1
Host: urlhost
Connection: keep-alive
Content-Length: 17
Cache-Control: max-age=0
Origin: url
User-Agent: something
Content-Type: application/x-www-form-urlencoded
Accept: text/html,application/xhtml+xml,application/xml;q=0.9,*/*;q=0.8
Referer: url
Accept-Encoding: gzip,deflate,sdch
Accept-Language: en-US,en;q=0.8
Accept-Charset: ISO-8859-1,utf-8;q=0.7,*;q=0.3
Cookie: ASPSESSIONIDASRCTADA=FBHLDODAOCBACEKMNFLJIMGO 
```

**编辑**以包含工作代码：如果您将第二个代码片段中的 $opts 定义替换为此，它将起作用。这个对我有用。

```
$opts = array('http' => 
    array( 
        'method'  => 'POST', 
        'header'  => "Content-type: application/x-www-form-urlencoded\r\n"
                    ."Referer: url\r\n",
        'content' => $postdata 
    ) 
); 
```

完整代码：

```
<?php 
$postdata = http_build_query( array( 'regno' => 1 ) ); 
$opts = array('http' => array( 'method' => 'POST', 'header' => "Content-type: application/x-www-form-urlencoded\r\n" ."Referer: urltopost\r\n", 'content' => $postdata ) );
$context = stream_context_create($opts); 
$result = file_get_contents('urltopost', false, $context);
echo $result;
?> 
```

# asp.net-mvc-3 - 来自根的 ASP.NET 和 PNG 不起作用

> ID：10577320
> 
> 赞同：0
> 
> 时间：2012-05-14T03:48:55.410
> 
> 标签：asp.net-mvc-3, png, http-status-code-404

我很困惑，但为什么[http://usayouthhoops.com/apple-touch-icon-144x144.png](http://usayouthhoops.com/apple-touch-icon-144x144.png)不能工作，即使它在根目录中？我不断收到 404 错误。我将扩展名更新为 .JPG 并且可以正常工作。这发生在 IIS 和我的本地 VS 服务器上。我没有对路线做任何特别的事情。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-14T06:10:58.753

您的 web.config 中是否有任何内容阻止从根目录提供任何特定内容？还尝试手动删除您的 bin 和 obj 文件夹，重新构建并检查。

...

# mysql - 在mysql中为单个变量声明多个变量

> ID：10577321
> 
> 赞同：0
> 
> 时间：2012-05-14T03:48:57.430
> 
> 标签：mysql, sql

我的查询通过 jira 问题提取错误项目列表（特定于 jira 的组件），我需要找出如何在此查询中输入多个 pkey，单个 pkey 工作正常，但是当我声明多个 pkey 时它会引发错误消息.

在下面的查询中，abc-123 是一个 jira bug id，子查询找到组件名称，第二个子查询将获取项目名称，其余查询将提取与组件关联的错误列表，我想输入'def-456'，'jdk -985' 在 'abc-123' 旁边，我尝试设置新变量但它不起作用，有人可以帮忙吗

$

```
set @pkey := 'abc-123';

select jiraissue.*, co.* 
from jiraissue,project,issuetype,nodeassociation,component,
customfieldvalue cv
,customfieldoption co 
where 
component.cname = (SELECT component.cname
FROM nodeassociation, component, jiraissue
WHERE component.ID = nodeassociation.SINK_NODE_ID
AND jiraissue.id = nodeassociation.SOURCE_NODE_ID
AND nodeassociation.ASSOCIATION_TYPE = 'IssueComponent'
AND pkey = @pkey) and 
project.pkey = (SELECT substring_index(jiraissue.pkey,'-',1) as project_name
FROM nodeassociation, component, jiraissue
WHERE component.ID = nodeassociation.SINK_NODE_ID
AND jiraissue.id = nodeassociation.SOURCE_NODE_ID
AND nodeassociation.ASSOCIATION_TYPE = 'IssueComponent'
AND pkey = @pkey) and 
issuetype.pname = 'Bug' and
jiraissue.project = project.id and 
jiraissue.issuetype = issuetype.id and 
nodeassociation.association_type = 'IssueComponent' and
nodeassociation.source_node_entity = 'Issue'  and
nodeassociation.source_node_id = jiraissue.id  and
nodeassociation.sink_node_entity = 'Component'  and
nodeassociation.sink_node_id = component.id 
and jiraissue.id = cv.issue
and cv.stringvalue = co.id
and cv.customfield = 10020; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-14T04:08:25.780

尝试更换

```
AND pkey = @pkey 
```

有了这个：

```
AND pkey in (@pkey, @pkey1, @pkey2) 
```

然后在顶部：

```
set @pkey := 'abc-123', @pkey1 := 'def-456', @pkey2 = 'ghi-789' 
```

# regex - 将姓氏拆分到新行

> ID：10577325
> 
> 赞同：3
> 
> 时间：2012-05-14T03:49:16.837
> 
> 标签：regex, perl, unix, awk

我有一个文件和一行文件看起来像这样

```
GIVEN=David Smith
GIVEN=John Doe Young
GIVEN=Ms Sam Parker
GIVEN=Mr James Free Foo ABC
GIVEN=Joe Cam-Barr 
```

我只想找到任何以开头的行`GIVEN`并找到最后一个空格字符（假设是姓氏），然后换行。

所以输入=

```
FOO=Bar
GIVEN=David Smith
Baz=123 
```

输出应该是

```
FOO=Bar
GIVEN=David
LAST=Smith
Baz=123 
```

这是我所能得到的：

```
(?<=(GIVEN=))(.*\ ) 
```

见这里演示[http://regexr.com?30uh8](http://regexr.com?30uh8)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-14T03:57:50.670

```
open(my $IN, "<infile.txt") or die $!;
chomp(my @lines = <$IN>);
close $IN;

foreach(@lines){
  s/^(GIVEN\=.+)\s+(\S+)$/$1\nLAST=$2/;
}

open(my $OUT,">outfile.txt") or die $!;
print "$_\n" foreach(@lines);
close $OUT; 
```

应该管用。如果输入文件非常大，则根据需要逐行读取。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-14T10:29:29.990

```
awk ' /^GIVEN=/ {last=$NF; $NF=""; print; print "LAST=" last; next} 1' filename 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-14T19:50:43.340

[substr](http://perldoc.perl.org/substr.html)和[rindex](http://perldoc.perl.org/rindex.html)运算符专为此任务而设计。rindex查找从[字符串](http://perldoc.perl.org/rindex.html)右侧开始的字符第一次出现的位置，并且[substr](http://perldoc.perl.org/substr.html)采用位置和长度来插入子字符串：

这个[substr](http://perldoc.perl.org/substr.html)作用于`$_`，从 给出的位置开始`rindex`，用 替换下一个`1`字符`\nLAST=`：

```
while( <> ) {
    substr( $_, rindex( $_, ' ' ), 1, "\nLAST=" ) if /\AGIVEN=/;
    print;
    } 
```

当您查看此代码时，您会发现它已经是单行代码所需的形式，尽管在这种情况下，我使用通用引用来避免 shell 插值问题：

```
% perl -pi.old -e 'substr($_,rindex($_,q( )),1,qq(\nLAST=)) if /\AGIVEN=/' ... 
```

然而，这可能会破坏某些人的名字。不是每个姓氏都是一个词。询问此人是了解其姓氏的唯一好方法。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-14T11:18:52.923

```
thames.434> cat file
    FOO=Bar
    GIVEN=David Smith
    Baz=123

thames.435> awk '{if ($0~/GIVEN/){x=$2;$2="";print;print "LAST=",x}else print}' file
    FOO=Bar
GIVEN=David 
LAST= Smith
    Baz=123 
```

# list - knockout.js - 使用模板修改列表中当前项目中的 DOM（展开列表项小节）

> ID：10577326
> 
> 赞同：0
> 
> 时间：2012-05-14T03:49:18.133
> 
> 标签：list, templates, dom, knockout.js, handler

在此示例中，我想使用 knockout.js 来允许单击“展开”链接并将其文本更改为“折叠”。我还想设置使 jobDetails 部分可见。这是一个非常普遍的问题，如何让 knockout.js 使用点击处理程序专门修改列表中“当前”项目的 DOM。

```
<script type="text/html" id="job-template">
    <div class="jobContainer">
        <label data-bind="text: JobTitle"></label> 
        <label data-bind="text: CompanyName"></label>
        <div class="jobDetails">
            <label data-bind="text: City"></label>
            <label data-bind="text: State"></label>
        </di>
    <div>
        <a class="expand" href="#" data-bind="click: ???">Expand</a>        
    </div>
    </div>    
</script> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-14T04:23:40.993

这对于 KO 来说非常简单。这是一个简单的方法。仅供参考，我不得不稍微修正你的标记。

```
<div>
    <div class="jobContainer">
        <label data-bind="text: JobTitle"></label>
        <label data-bind="text: CompanyName"></label>
        <div class="jobDetails" data-bind="visible: expanded">
            <label data-bind="text: City"></label>
            <label data-bind="text: State"></label>
        </div>
    <div>
    <a class="expand" href="#" data-bind="click: toggle, text: linkLabel">Expand</a>        
</div>   

var viewModel = function() {
    this.JobTitle = ko.observable("some job");
    this.CompanyName = ko.observable("some company");
    this.City = ko.observable("some city");
    this.State = ko.observable("some state");

    this.someValue = ko.observable().extend({ defaultIfNull: "some default" });

    this.expanded = ko.observable(false);

    this.linkLabel = ko.computed(function () {
        return this.expanded() ? "collapse" : "expand";
    }, this);      

    this.toggle = function () {
        this.expanded(!this.expanded());
    };
}; 
```

[http://jsfiddle.net/madcapnmckay/XAzW6/](http://jsfiddle.net/madcapnmckay/XAzW6/)

希望这可以帮助。

# php - 处理数据透视数据操作的正确方法（通过 has_many "through"）

> ID：10577328
> 
> 赞同：0
> 
> 时间：2012-05-14T03:49:32.250
> 
> 标签：php, orm, kohana, kohana-3, kohana-3.2

在一个基本的博客应用程序中，我有一个文章模块，它允许我选择相关类别。有3张桌子；文章，article_categories，类别。2个模型，`Model_Article`并`Model_Category`扩展ORM，并相应地分配了多个“通过”关系。在“编辑文章”表单提交期间，正确的方法（或更好的方法）是什么：

*   以数组格式检索所有可用`category ids`以填充`Form::select()`
*   从数据透视表中检索分配`category ids`，以数组格式为选定的类别
*   成功提交表单后更新数据透视表，其中一些数据透视表已经存在。最好在添加/删除相关数据之前检查现有数据（而不是删除所有现有数据透视数据然后添加所有提交的数据`category ids`）。

**基本上我希望有一种方法可以在不遍历 ORM 对象的情况下获取数据透视数组。**

不确定我所要求的是否只能通过数据库准备的语句/查询构建器来完成。如果是这样，是否建议我将自己的方法（使用准备好的语句/查询生成器）添加到我的`Model_Article extend ORM`？

我正在使用的当前方法是：

**获取所有类别 ID**

```
 $categories_orm = ORM::factory('article_category')->find_all();
    foreach($categories_orm as $category_orm) {
        $categories[$category_orm->id] = $category_orm->name;
    } 
```

**获取选定的类别 ID**

```
 $categories_current = $article->article_categories->find_all();
    foreach($categories_current as $category){
        $categories_selected = $category->id;
    } 
```

**更新类别 ID**

```
 $categories_orm = $article->article_categories->find_all();
    $categories_existing = array();
    foreach($categories_orm as $category){
        $categories_existing[] = $category->id;
    }
    $categories_selected = $this->request->post('category');

    $categories_to_remove = array_diff($categories_existing,$categories_selected);
    $categories_to_add = array_diff($categories_selected,$categories_existing);
    if(!empty($categories_to_remove)) {
        $article->remove('article_categories', $categories_to_remove);
    }
    if(!empty($categories_to_add)) {
        $article->add('article_categories', $categories_to_add);
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-31T06:44:07.730

您可能应该将您的关系表重命名为`articles_categories`（复数）以遵循 Kohana 约定，并且`categories`是关系的更好别名。

类别模型应该用于检索所有类别 ID。然后你像你的例子一样循环遍历它来填充一个数组。

**获取所有类别。**

```
$categories_orm = ORM::factory('category')->find_all();
foreach ($categories_orm as $category)
{
    $categories[$categories_orm->id] = $categories_orm->name;   
} 
```

确保您的 select 元素在数组中提供 post 值，方法是这样命名：

```
name="categories[]" 
```

**更新关系。**

```
$article = ORM::factory('article', $post['article_id']);

// do stuff (validate, update the article etc.)

// remove all relationships
$article->remove('categories');

// add new relationships
$article->add('categories', $post['categories']); 
```

我可能会使用隐藏的表单字段进行检查，以首先验证类别关系是否需要更新。我想一篇文章的类别很少改变。

# c++ - 如何在 C++ 程序中查看我的硬盘目录？

> ID：10577332
> 
> 赞同：1
> 
> 时间：2012-05-14T03:50:29.323
> 
> 标签：c++, navigation, directory

我正在寻找一个函数，它将返回特定目录中的内容列表。我得到的最接近的是使用这个：

```
system("dir"); 
```

但这只会打印工作目录的内容，我不能 CD 到其他任何地方。

我正在使用 Windows，我没有计划让它跨平台，所以不用担心。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-14T04:09:06.350

看下面[这个页面](http://www.boost.org/doc/libs/1_49_0/libs/filesystem/v3/doc/tutorial.html)直接复制的例子。它使用`boost::filesystem`so 适用于所有主要系统。

```
int main(int argc, char* argv[])
{
    path p (/* Specify a directory here */);

    try
    {
        if (exists(p))    // does p actually exist?
        {
            if (is_regular_file(p))        // is p a regular file?   
                cout << p << " size is " << file_size(p) << '\n';
            else if (is_directory(p))      // is p a directory?
            {
                cout << p << " is a directory containing:\n";

                copy(directory_iterator(p), directory_iterator(), // directory_iterator::value_type
                  ostream_iterator<directory_entry>(cout, "\n")); // is directory_entry, which is
                                                                  // converted to a path by the
                                                                  // path stream inserter
            }
            else
                cout << p << " exists, but is neither a regular file nor a directory\n";
        }
        else
            cout << p << " does not exist\n";
    }

    catch (const filesystem_error& ex)
    {
        cout << ex.what() << '\n';
    }

    return 0;
} 
```

# c++ - 插入队列模式的模式

> ID：10577334
> 
> 赞同：1
> 
> 时间：2012-05-14T03:51:26.540
> 
> 标签：c++, stl

我必须处理 type 的单个对象`InternalMessage`，将每个对象转换为一定数量的`ExternalMessage`对象（InternalMessages 和 ExternalMessages 之间存在一对多的关系），并将这些`ExternalMessage`对象放入队列中进行处理。我想有两种插入到这个队列的模式 - 批处理，所有的`ExternalMessage`都被原子地插入到队列中，以及正常插入，其中`ExternalMessage`对象在创建时被插入到队列中。请注意，有多个线程为此队列生成消息。

我解决这个问题的想法是有一个`Inserter`对象来处理插入：

```
class Inserter {
public:
    void ProcessMessage(const ExternalMessage& externalMessage) = 0;
};

class SingleInserter {
public:
    SingleInserter(Queue* q) : m_q(q) { }
    void ProcessMessage(const ExternalMessage& externalMessage) {
        m_q->Insert(q);
    }
private:
    Queue* m_q;
};

class BatchInserter {
public:
    BatchInserter(Queue* q) : m_q(q) { }
    void ProcessMessage(const ExternalMessage& externalMessage) {
        m_cache.Insert(externalMessage);
    }
    ~BatchInserter() {
        m_q->BatchInsert(m_cache);
    }

private:
    Queue* m_q;
    List<ExternalMessages> m_cache;
}; 
```

然后在`Inserter`创建消息时向下传递调用堆栈。

```
BatchInserter ins; 
```

或者

```
SingleInserter ins; 
```

接着

```
HandleMessage(someInternalMessage, ins); 
```

和 HandleMessage 会做：

```
void HandleMessage(const InternalMessage& msg, Inserter& ins) {
    //... do logic, eventually create a externalMsg (note - this could be further down
    //the call stack, in a loop, etc. Multiple external messages could be created each
    //call to HandleMessage)
    ins.ProcessMessage(externalMsg);
} 
```

这种设计理想吗？很高兴它允许不同的插入类型，但是有什么方法可以做到这一点而不必将对象向下传递到调用堆栈（例如，通过模板特化）？其次，在实现这一点时我应该遵守一个 STL 模式吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-14T04:10:31.710

在我看来没问题。我能想到的唯一改变就是制作`HandleMessage`模板。所以你会有`template <class T> HandleMessage(const InternalMessage& msg, T& inserter)`. 有了这个，你就不会强迫这个类的用户从抽象基类派生，`Inserter`并且会避免由于虚函数引起的动态调度造成的小开销。

# mysql - Seek 有助于加快我的 mysql 查询速度

> ID：10577335
> 
> 赞同：2
> 
> 时间：2012-05-14T03:51:34.497
> 
> 标签：mysql, performance, optimization, query-optimization

编辑我的案例的详细信息。

```
CREATE TABLE IF NOT EXISTS `tbl_user` (
  `id` int(50) NOT NULL auto_increment,
  `fbuid` bigint(20) unsigned NOT NULL,
  `fullname` varchar(255) NOT NULL,
  PRIMARY KEY  (`id`),
  UNIQUE KEY `fbuid` (`fbuid`)
) ENGINE=MyISAM  DEFAULT CHARSET=utf8 AUTO_INCREMENT=7 ;

INSERT INTO `tbl_user` (`id`, `fbuid`, `fullname`) VALUES
(1, 1002, 'User B'),
(2, 1001, 'User A'),
(3, 1003, 'User C'),
(4, 1004, 'User D'),
(5, 1005, 'User E'),
(6, 1006, 'User F');

CREATE TABLE IF NOT EXISTS `tbl_userscores` (
  `fbuid` bigint(20) NOT NULL,
  `game_id` varchar(255) NOT NULL,
  `score1` bigint(20) NOT NULL default '0',
  `score2` bigint(20) NOT NULL default '0',
  `score3` bigint(20) NOT NULL default '0',
  `score4` bigint(20) NOT NULL default '0',
  `created_date` datetime NOT NULL,
  `updated_date` datetime NOT NULL,
  PRIMARY KEY  (`game_id`),
  UNIQUE KEY `fbuid` (`fbuid`,`game_id`),
  KEY `fbuid_2` (`fbuid`,`game_id`,`score4`),
  KEY `fbuid_3` (`fbuid`,`game_id`,`score4`,`updated_date`),
  KEY `fbuid_4` (`fbuid`,`game_id`,`score1`,`score2`,`score3`,`score4`,`created_date`,`updated_date`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8;

INSERT INTO `tbl_userscores` (`fbuid`, `game_id`, `score1`, `score2`, `score3`, `score4`, `created_date`, `updated_date`) VALUES
(1001, '13361975565253060', 650, 3300, 7675, 14500, '2012-05-05 13:59:55', '2012-05-05 14:01:50'),
(1001, '1336278398787510', 3100, 87725, 326675, 573625, '2012-05-06 12:28:20', '2012-05-06 12:33:27'),
(1001, '13368015862343980', 12875, 82550, 158625, 299550, '2012-05-12 13:48:08', '2012-05-12 13:53:15'),
(1001, '13369691453105020', 7925, 58525, 283100, 368225, '2012-05-14 12:20:47', '2012-05-14 12:25:54'),
(1002, '1336328839124400', 1275, 11475, 31450, 50475, '2012-05-07 02:27:34', '2012-05-07 02:28:20'),
(1002, '13363686059958120', 11025, 48900, 72725, 115150, '2012-05-07 13:30:21', '2012-05-07 13:31:07'),
(1002, '13364088902032830', 6650, 6700, 10200, 17625, '2012-05-08 00:41:46', '2012-05-08 00:42:32'),
(1002, '13364910479425300', 3600, 17050, 60450, 114800, '2012-05-08 23:31:03', '2012-05-08 23:31:49'),
(1002, '13364949763272710', 17250, 168125, 479475, 596925, '2012-05-07 00:37:33', '2012-05-07 00:41:21'),
(1003, '13363240964199380', 84150, 84150, 84150, 84150, '2012-05-07 01:11:37', '2012-05-07 01:12:22'),
(1003, '1336465518338010', 297275, 351300, 437150, 468350, '2012-05-08 16:31:52', '2012-05-08 16:32:38'),
(1003, '13368122913207860', 0, 82350, 94150, 102750, '2012-05-12 16:45:20', '2012-05-12 16:48:09'),
(1003, '13368125091164060', 423925, 428125, 521875, 589750, '2012-05-12 16:54:00', '2012-05-12 16:54:47'),
(1004, '13363118226930570', 3275, 10975, 16250, 22900, '2012-05-06 21:43:58', '2012-05-06 21:44:43'),
(1004, '13366228756934380', 23275, 149100, 380600, 382075, '2012-05-10 12:08:46', '2012-05-10 12:10:49'),
(1004, '13366232802957960', 3650, 23525, 49975, 49975, '2012-05-10 12:14:55', '2012-05-10 12:15:42'),
(1005, '13361215491096720', 1200, 16250, 39125, 55800, '2012-05-04 16:52:59', '2012-05-04 16:54:29'),
(1005, '13361216729657120', 11000, 29800, 82575, 188550, '2012-05-04 16:55:03', '2012-05-04 16:56:33'),
(1005, '13361364491988250', 6925, 50925, 89100, 180425, '2012-05-04 21:01:12', '2012-05-04 21:02:43'),
(1005, '13362204979150640', 11300, 39800, 63675, 78725, '2012-05-05 20:22:08', '2012-05-05 20:23:36'),
(1005, '13362311869003160', 11575, 61500, 134200, 233600, '2012-05-05 23:20:17', '2012-05-05 23:21:48'),
(1005, '133628163373910', 3500, 40175, 131375, 251725, '2012-05-06 13:21:03', '2012-05-06 13:22:35'),
(1006, '13361224889844730', 6700, 30575, 49650, 50475, '2012-05-04 17:08:24', '2012-05-04 17:09:10'),
(1006, '13366294182421110', 16800, 87675, 119150, 206500, '2012-05-10 13:57:42', '2012-05-10 14:00:15'),
(1006, '13366296357158010', 23050, 99025, 229075, 381925, '2012-05-10 14:01:27', '2012-05-10 14:03:58'),
(1006, '13368319289949330', 22975, 130375, 350600, 355150, '2012-05-12 22:13:00', '2012-05-12 22:15:08'); 
```

有了上面的数据，我使用下面的 sql 来获得每周的高分。

```
SELECT U1.fbuid, U1.fullname, U2.score4 AS weeklyhighscore, U2.created_date, U2.updated_date, TIMEDIFF( U2.updated_date, U2.created_date ) AS Duration
    FROM tbl_user AS U1, (  
                SELECT fbuid, score4, MIN( updated_date ) AS updated_date, created_date
                FROM tbl_userscores AS A
                WHERE A.score4
                IN (
                    SELECT MAX(  `score4` ) AS best
                    FROM tbl_userscores AS B
                    WHERE A.fbuid = B.fbuid
                    AND B.score1 >0
                    AND B.score2 >0
                    AND B.score3 >0
                    AND B.score4 >0
                    AND `updated_date` >= '2012-05-06 00:00:00' AND `updated_date` <= '2012-05-12 23:59:59'
                    GROUP BY fbuid
                )
                GROUP BY A.fbuid
                ORDER BY  `A`.`score4` DESC , updated_date ASC
            ) AS U2
WHERE U1.fbuid = U2.fbuid
ORDER BY weeklyhighscore DESC 
LIMIT 0 , 30 
```

预期结果 ：

```
+-------+----------+-----------------+---------------------+---------------------+----------+
| fbuid | fullname | weeklyhighscore | created_date        | updated_date        | Duration |
| 1002  | User B   | 596925          | 2012-05-07 00:37:33 | 2012-05-07 00:41:21 | 00:03:48 |
| 1003  | User C   | 589750          | 2012-05-12 16:54:00 | 2012-05-12 16:54:47 | 00:00:47 |
| 1001  | User A   | 573625          | 2012-05-06 12:28:20 | 2012-05-06 12:33:27 | 00:05:07 |
| 1004  | User D   | 382075          | 2012-05-10 12:08:46 | 2012-05-10 12:10:49 | 00:02:03 |
| 1006  | User F   | 381925          | 2012-05-10 14:01:27 | 2012-05-10 14:03:58 | 00:02:31 |
| 1005  | User E   | 251725          | 2012-05-06 13:21:03 | 2012-05-06 13:22:35 | 00:01:32 |
+-------+----------+-----------------+---------------------+---------------------+----------+ 
```

我有两个表，tbl_user 和 tbl_userscores。用户每次玩游戏时，它会将次数保存为 score1 到 score4（4 次得分，其中 score4 为最终得分）。

tbl_userscores 使用 (fbuid,score4,updated_date,create_date) 编制索引。它拥有 45K 条记录，并且还在不断增长。

我想获得前 30 名的每周高分。这个查询平均需要 45 秒才能完成。

因此，我想就如何使它变得更好寻求专家的建议。

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-14T09:13:36.567

我相信大部分时间都花在为每个用户提取 max(score4) 的相关子查询上。可能会对其进行重组以一次获得前 30 名并用作主表的过滤器。不幸的是，由于您可能会得到重复项并且需要采用最早的 updated_date 来避免它们，因此还有额外的派生表来获取此过滤器。如果这被证明是最慢的部分，您可能会删除`minUpdated`派生表，封装完整的查询并使用`not exists`仅选择每个 score4 具有最小更新日期的记录。这应该更快，因为您通常只有 30 多条记录。

```
SELECT U1.fbuid, 
       U1.fullname, 
       U2.score4 AS weeklyhighscore, 
       U2.created_date, 
       U2.updated_date, 
       TIMEDIFF( U2.updated_date, U2.created_date ) AS Duration
FROM tbl_user AS U1
INNER JOIN tbl_userscores U2
   ON U1.FbUid = U2.FbUid
/* Top 30 scores by user */
INNER JOIN
(
  SELECT B.fbuid, 
         MAX(`score4`) AS best
    FROM tbl_userscores AS B
   WHERE B.score1 > 0
     AND B.score2 > 0
     AND B.score3 > 0
     AND B.score4 > 0
     AND `updated_date` >= '2012-05-06 00:00:00'
     AND `updated_date` < '2012-05-13 00:00:00'
   GROUP BY fbuid
   ORDER BY best DESC
   LIMIT 30
) A
   ON U2.FbUid = A.FbUid
  AND U2.Score4 = best
/* Filter by min(updated_date) in case of several same scores per user */
INNER JOIN
(
  SELECT FbUid, Score4, MIN(updated_date) updated_date
    FROM tbl_userscores
   GROUP BY FbUid, Score4
) minUpdated
   ON U2.FbUid = minUpdated.FbUid
  AND U2.Score4 = minUpdated.Score4
  AND U2.Updated_date = minUpdated.Updated_date
ORDER BY weeklyhighscore DESC 
```

我已经用更有希望的模式 >= 和 < 替换了日期比较。此更改避免了日期时间解析问题（如果在一天的最后 999 毫秒内进行更新，您可能会丢失记录）。这也是一个很好的防御工具——即使有人以某种方式设法输入了您的业务逻辑不期望的日期的时间部分，您的查询也将起作用。

# haskell - 使用 ldap-haskell 的 LDAP 身份验证：可以使其安全吗？

> ID：10577341
> 
> 赞同：5
> 
> 时间：2012-05-14T03:53:05.533
> 
> 标签：haskell, ldap

我正在构建一个需要身份验证的 Haskell Web 应用程序。我的组织运行 LDAP 服务器，我不希望重新发明轮子。`LDAP.Init.ldapSimpleBind`但是，当我从包中检查源代码时`ldap-haskell`，我发现它调用了 C 例程`ldap_simple_bind_s`。据我所知，这个 API 调用会将我的用户密码明文发送到 LDAP 服务器。不能接受的。

*   我是否正确理解了`ldap-haskell`正在做什么？

*   如果是这样，我是否有一种*安全*的方法可以从用 Haskell 编写的应用程序向 LDAP 服务器验证我的用户？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-14T16:37:14.360

密码*必须*通过安全连接以明文形式发送到支持密码策略检查的 LDAP 服务器。否则将导致服务器无法管理密码历史记录和密码质量检查。如果服务器不支持密码策略和历史记录检查，则该服务器不应用于重要的任务关键型应用程序。使用 SSL，否则使用 StartTLS 扩展操作提升到 TLS 的不安全连接。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-05-14T03:55:48.750

您可以使用端口 636（安全 LDAP）而不是端口 389 连接到您的 LDAP 服务器吗？在这种情况下，您至少会有 SSL 保护。

# windows-phone-7 - 页面转换后关于 mvvmlight 列表框 SelectedIndex 聚焦颜色的奇怪症状

> ID：10577344
> 
> 赞同：0
> 
> 时间：2012-05-14T03:53:31.607
> 
> 标签：windows-phone-7, mvvm-light

我有一个关于 Mvvmlight 绑定 Listbox SelectedIndex 的问题。完整的源代码可以在[这里](https://skydrive.live.com/?cid=866FAAAC43FA6E14&id=866FAAAC43FA6E14!322)下载。这是我的先决条件：

**[测试模型]**

```
string Title;
string Description; 
```

**[测试视图模型]**

```
ObservableCollection<TestModel> TestList; 
```

**[xaml 绑定]**

```
<ListBox ItemSource="{Binding TestList}"
         SelectedIndex="{Binding SelectedIndex Mode=TwoWay}">
       .....
       <i:EventTrigger EventName="SelectionChanged">
       .....
       </i:EventTrigger>..... 
```

这是我的 OnSelectionChanged 代码：

```
 private void OnSelectionChanged(TestModel test)
    {
        int index = SelectedIndex;
        Debug.WriteLine("[SelectionChanged] +++, index={0}", index);
        // If selected index is -1 (no selection) do nothing
        if (-1 == SelectedIndex)
            return;
        Debug.WriteLine("[SelectionChanged] selected item={0}", test.Title);
        // Reset selected index to -1 (no selection)
        SelectedIndex = -1;
        Debug.WriteLine("[SelectionChanged] ---, index={0}", index);
    } 
```

我有一个包含 MainPage.xaml 和 TestPage.xaml的[示例。](https://skydrive.live.com/?cid=866FAAAC43FA6E14&id=866FAAAC43FA6E14!322)

1.  **MainPage**：这个页面有一个按钮，点击按钮会导航到**TestPage**
2.  **TestPage**：此页面有一个列表框并绑定到 ViewModel

当我运行这个示例时，点击按钮到**TestPage**，然后尝试点击 Listbox 的任何项目，我可以看到该项目没有**聚焦颜色**（因为我将 SelectedIndex 重置为-1）。

问题来了，当我回到**MainPage**，然后再次点击按钮到**TestPage**，你会看到点击 Listbox 的任何项目都会导致每个项目的**焦点颜色**，这很奇怪。

希望任何人都可以帮助我看看我的样品是否有任何问题。谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-17T13:26:45.120

我从下面的人那里得到了解决方法：

改变：

```
<i:EventTrigger EventName="SelectionChanged"> 
```

至：

```
<i:EventTrigger EventName="Tap"> 
```

它真的像我预期的那样工作。 **点击**可以允许用户**点击重复的 ListItem**，“reset SelectedIndex = -1”可以使**选定的项目没有突出显示颜色**。

# dynamics-crm-2011 - 从 MS Dynamics CRM 4.0 到 MS Dynamics CRM 2011 的数据迁移

> ID：10577347
> 
> 赞同：2
> 
> 时间：2012-05-14T03:54:28.543
> 
> 标签：dynamics-crm-2011, dynamics-crm-4

我们如何将数据 [数据迁移] 从 CRM 4.0 导入到 CRM 2011？我们是否有任何数据导入向导 [工具] 来导入 4.0 到 2011 的数据。如果是，请您提供我的网址。

我们还可以使用 CRM 网络服务导入数据吗？

请给我你的想法和建议。

提前致谢

普拉约什

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-14T23:03:05.243

这里有两个问题，所以有两个答案：

1）您可以使用 CRM Webservices 导入数据，它们在整个 MSDN 中都有很好的记录：http: [//msdn.microsoft.com/en-us/library/gg334357.aspx](http://msdn.microsoft.com/en-us/library/gg334357.aspx)

2) 如果您有当前的 CRM 4.0 安装并希望“升级”到 CRM 2011，则这是受支持的升级。您的升级选项记录在几个地方 - 试试 CRM 2011 部署指南，或这篇 Technet 文章：[http](http://technet.microsoft.com/en-us/library/gg554717.aspx) ://technet.microsoft.com/en-us/library/gg554717.aspx - 我已经使用并更喜欢“新SQL server 实例”方法，因为它似乎最安全且最容易回滚。我强烈建议避免就地升级 - 不要**尝试**将您的实时 CRM 4 数据库导入 CRM 2011，因为这是一种单向操作，并且数据库将在 CRM 4.0 中停止工作！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-06T16:13:45.877

我找到了我发布的错误的解决方案。

下面给出了解决方案： -

[http://weblogs.asp.net/pabloperalta/archive/2010/11/01/step-by-step-installing-crm-2011-on-premise-and-migrating-from-dynamics-crm-4-0- 32-bits-on-premise.asp](http://weblogs.asp.net/pabloperalta/archive/2010/11/01/step-by-step-installing-crm-2011-on-premise-and-migrating-from-dynamics-crm-4-0-32-bits-on-premise.aspx)

x感谢和问候

普拉约什

# matlab - 如何摆脱 MATLAB 中罗盘图的刻度线

> ID：10577352
> 
> 赞同：0
> 
> 时间：2012-05-14T03:55:21.287
> 
> 标签：matlab, plot, label

我正在尝试在 MATLAB 中创建一个包含许多子图的大图，其中最中心的图是指南针。但是，我只想显示指南针中的箭头，而不是侧面的刻度线。我知道在使用普通绘图功能时，您可以简单地输入：

```
set(h,'XTick',[],'YTick',[]); 
```

但我想知道在用函数绘图时是否有类似物`compass`。]

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-14T04:39:18.863

不幸的是，这并不容易。从[此处](http://www.mathworks.com/support/solutions/en/data/1-DRAF4Z/index.html?product=ML&solution=1-DRAF4Z)的 Mathworks 支持站点，您必须执行以下操作：

```
set(findall(gcf, 'String', '30', '-or','String','60') ,'String', ' '); 
```

也就是说，您需要找到每个刻度线并将其设置为只有一个空格的字符串。您可能可以构建所需的命令，然后对其进行评估。

# mysql - 将 CSV 文件导入 mysql。（特别是关于创建表命令）

> ID：10577358
> 
> 赞同：0
> 
> 时间：2012-05-14T03:56:01.317
> 
> 标签：mysql, csv, phpmyadmin, load-data-infile, create-table

我有一个充满像这样的值的文本文件：

第一行是这样的列名列表：

```
col_name_1, col_name_2, col_name_3 ......(600 columns) 
```

并且所有以下列都有这样的值：

```
1101,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,1101,1,3.86,65,0.46418,65,0.57151... 
```

将其导入mysql的最佳方法是什么？

具体来说，如何提出正确的 CREATE TABLE 命令，以便数据能够正确加载自身？什么是最好的通用数据类型，它可以接受所有上述值，如 1101 或 3.86 或 0.57151。我不担心该表在存储方面效率低下，因为我需要一次性使用它。

我已经尝试了其他相关问题中的一些建议，例如使用 Phpmyadmin（由于大量数据，我猜测它会崩溃）

请帮忙！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-14T04:01:57.460

CSV 文件中的数据未标准化；这 600 列可能分布在几个相关的表中。这是处理这些数据的推荐方法。然后，您可以使用`fgetcsv()`PHP 中逐行读取 CSV 文件。

要让 MySQL 处理 CSV，您可以创建一个 600 列的表（我认为）并发出一个`LOAD DATA LOCAL INFILE`语句（或者可能使用`mysqlimport`，不确定）。

最通用的数据类型必须是`VARCHAR`或`TEXT`用于更大的值，但是当用于数字、日期等时，你当然会失去语义。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-14T04:11:10.833

我注意到您包含了 phpmyadmin 标记。

PHPMyAdmin 可以开箱即用地处理这个问题。它将“神奇地”决定制作每一列的类型，并`CREATE`为您提供表格以及`INSERT`所有数据。无需担心`LOAD DATA FROM INFILE`，但如果您想在不依赖 PHPMyAdmin 的神奇工具的情况下确切知道发生了什么，该方法会更安全。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-12-16T19:08:21.540

尝试 [convertcsvtomysql](http://www.convertcsvtomysql.com/)，只需上传您的 csv 文件，然后您可以下载和/或复制 mysql 语句以创建表并插入行。

# google-maps-api-3 - Google 距离矩阵 API 限制

> ID：10577359
> 
> 赞同：0
> 
> 时间：2012-05-14T03:56:08.393
> 
> 标签：google-maps-api-3, licensing

**为什么 Google 会限制 JavaScript 距离矩阵 API 的使用，以便仅当您在 Google 地图上显示数据时才能使用它？**

来自[距离矩阵 API 文档](https://developers.google.com/maps/documentation/distancematrix/)

> 距离矩阵 API 的使用必须与谷歌地图上的信息显示相关；例如，在请求并在地图上显示这些目的地之前，确定彼此在特定驾驶时间内的起点-目的地对。禁止在不显示 Google 地图的应用程序中使用该服务。

我编写了一个简单的书签脚本供个人使用，它允许我选择一个地址并单击它，然后它会显示到几个兴趣点的行驶距离和时间。为了遵守这个看似随意的限制，我现在必须使用更多的 Google 资源来显示我不想看到的地图！

有人知道他们为什么会有这个限制吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-14T05:00:34.370

这是由于 Google 和数据提供商之间的许可限制。

# regex - 如何在 bash 正则表达式中匹配“有或无”？

> ID：10577364
> 
> 赞同：9
> 
> 时间：2012-05-14T03:57:04.717
> 
> 标签：regex, bash

我无法`(t|b|bug_|task_|)1234`使用 bash 正则表达式捕获这种格式的字符串中的数字。以下不起作用：

```
[[ $current_branch =~ ^(t|b|bug_|task_|)([0-9]+) ]] 
```

但是一旦我把它改成这样：

```
[[ $current_branch =~ ^(t|b|bug_|task_)([0-9]+) ]] 
```

它有效，但当然它是错误的，因为它不包括没有前缀的情况。我意识到在这种情况下我可以做到

```
[[ $current_branch =~ ^(t|b|bug_|task_)?([0-9]+) ]] 
```

并获得相同的结果，但我想知道为什么第二个示例不起作用。例如，该正则表达式似乎在 Ruby 中运行良好。

（这是在`GNU bash, version 3.2.48(1)-release (x86_64-apple-darwin11)`，OSX Lion）

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-18T11:45:56.237

我确信正则表达式的工作版本和非工作版本之间的区别在于不同的阅读方式[`regex (7)`](http://www.kernel.org/doc/man-pages/online/pages/man7/regex.7.html "正则表达式 (7) 手册页")。我将引用整个相关部分，因为我认为它触及了您问题的核心：

* * *

> POSIX.2 中定义的正则表达式（“RE”）有两种形式：现代 RE（大致是 egrep 的那些；POSIX.2 称这些“扩展”RE）和过时的 RE（大致是 ed(1) 的那些） ; POSIX.2 “基本” REs）。过时的 RE 主要是为了在一些旧程序中向后兼容；他们将在最后讨论。POSIX.2 保留了 RE 语法和语义的某些方面；“(!)” 标志着这些方面的决定可能无法完全移植到其他 POSIX.2 实现中。
> 
> 一个（现代）RE 是一个（！）或多个非空（！）*分支*，用“|”分隔。它匹配任何与其中一个分支匹配的东西。
> 
> 一个分支是一个（！）或多个*片段*，连接在一起。它匹配第一个匹配，然后匹配第二个匹配，依此类推。
> 
> 一块是一个*原子*，可能后跟一个（！）'*'、'+'、'?'或*bound*。后跟“*”的原子匹配该原子的 0 个或多个匹配序列。后跟“+”的原子匹配该原子的 1 个或多个匹配的序列。一个原子后跟“？” 匹配原子的 0 或 1 个匹配序列。
> 
> 边界是“{”后跟一个无符号十进制整数，可能后跟“，”，可能后跟另一个无符号十进制整数，总是后跟“}”。整数必须介于 0 和 RE_DUP_MAX (255(!)) 之间，如果有两个整数，则第一个不得超过第二个。一个原子后跟一个包含一个整数 i 且没有逗号的边界匹配原子的完全 i 匹配的序列。一个原子后跟一个包含一个整数 i 和一个逗号的边界，匹配一系列 i 或多个原子匹配。后跟包含两个整数 i 和 j 的边界的原子匹配原子的 i 到 j（包括）匹配的序列。
> 
> 原子是包含在“()”中的正则表达式（匹配正则表达式的匹配）、空集“()”（匹配空字符串）（！）、括号表达式（见下文）、'。 ' （匹配任何单个字符）、'^'（匹配行首的空字符串）、'$'（匹配行尾的空字符串）、'\' 后跟字符之一“ ^.[$()|*+?{\" （匹配作为普通字符的那个字符），一个 '\' 后跟任何其他字符（！）（匹配作为普通字符的那个字符，就像 ' \' 不存在（！）），或没有其他意义的单个字符（匹配该字符）。一种 '{' 后面跟一个数字以外的字符是普通字符，而不是bound(!)的开头。以“\”结束 RE 是非法的。

* * *

好的，这里有很多东西要解压。首先，请注意“（！）”符号表示存在开放或不可移植的问题。

关键问题在下一段：

> 一个（现代）RE 是一个（！）或多个非空（！）*分支*，用“|”分隔。

你的情况是你有一个空的分支。正如您从“（！）”中看到的那样，空分支是一个开放或不可移植的问题。我认为这就是为什么它适用于某些系统但不适用于其他系统的原因。（我在 Cygwin 4.1.10(4)-release 上对其进行了测试，但它不起作用，然后在 Linux 3.2.25(1)-release 上测试它，它确实如此。这两个系统具有相同但不完全相同的手册页*正则表达式7。*）

假设分支必须是非空的，那么一个分支可以是一个片段，也可以是一个原子。

原子可以是“一组空的“()”（匹配空字符串）（！）”。 `<sarcasm>`嗯，这真的很有帮助。`</sarcasm>` 因此，POSIX 为空字符串指定了一个正则表达式，即`()`，但还附加了一个“（！）”，表示这是一个开放的问题，或者不可移植。

由于您要查找的是与空字符串匹配的分支，请尝试

```
[[ $current_branch =~ ^(t|b|bug_|task_|())([0-9]+) ]] 
```

它使用`()`正则表达式匹配空字符串。（这在我的 Cygwin 4.1.10(4)-release shell 中对我有用，而你原来的正则表达式没有。）

但是，虽然（希望）这个建议在您当前的设置中对您有用，但不能保证它是可移植的。很抱歉让您失望了。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-24T18:54:56.747

`[[ $current_branch =~ ^(t|b|bug_|task_|)([0-9]+) ]]`在 bash 4.1.2 中为我工作，但在 bash 3.2.48 中失败。这可能只是两个版本之间修复的错误。

# mysql - 在 OS X 10.7 中找不到 Mysql 命令

> ID：10577374
> 
> 赞同：190
> 
> 时间：2012-05-14T03:59:56.630
> 
> 标签：mysql

我无法让我的 mysql 在 os x 10.7 上启动。它位于`/usr/local/mysql/bin/mysql`

我`mysql --version`在终端中输入命令时找不到命令。

我试过这[无法从命令行mac访问mysql](https://stackoverflow.com/questions/8195418/cant-access-mysql-from-command-line-mac)但仍然找不到命令。我尝试使用 dmg 安装 mysql，我尝试通过自制软件安装它，但我无法让它工作。当我尝试用自制软件启动 mysql 时，我得到[MySQL 无法启动](https://stackoverflow.com/questions/10576743/mysql-wont-start/10576831#10576831)

这是我的`$PATH`：

> /usr/bin:/bin:/usr/sbin:/sbin:/usr/local/bin:/usr/X11/bin:/usr/local/git/bin:/Users/Victoria/bin:/usr/local //usr/local/mysql/bin/private/var/mysql/private/var/mysql/bin

* * *

## 回答 #1

> 赞同：422
> 
> 时间：2012-05-14T04:16:12.640

这是您的 $PATH 的问题：

`/usr/local//usr/local/mysql/bin/private/var/mysql/private/var/mysql/bin`.

`$PATH`是 shell 搜索命令文件的地方。要搜索的文件夹需要用冒号分隔。所以你想要`/usr/local/mysql/bin/`在你的路径中，但它会在 中搜索`/usr/local//usr/local/mysql/bin/private/var/mysql/private/var/mysql/bin`，这可能不存在。

相反，你想要`${PATH}:/usr/local/mysql/bin`.

就这样吧`export PATH=${PATH}:/usr/local/mysql/bin`。

如果您希望每次打开终端时都运行它，请将其放入文件中`.bash_profile`，该文件在终端打开时运行。

* * *

## 回答 #2

> 赞同：39
> 
> 时间：2017-02-08T12:00:07.597

另一种方法是在`/usr/local/bin`

```
ln -s /usr/local/mysql/bin/mysql /usr/local/bin/mysql 
```

但如果您需要其他可执行文件，例如`mysqldump`，则需要为它们创建软链接。

* * *

## 回答 #3

> 赞同：34
> 
> 时间：2016-08-09T10:25:35.300

我遇到了同样的问题，最后我得到了解决方案。如果您使用的是 MAMP，请完成以下步骤。

1.  启动 MAMP 或 MAMP PRO
2.  启动服务器
3.  打开终端（应用程序 -> 实用程序）
4.  输入：（一行）/Applications/MAMP/Library/bin/mysql --host=localhost -uroot -proot

这对我有用。

* * *

## 回答 #4

> 赞同：26
> 
> 时间：2017-11-19T10:52:00.903

`.bashrc`您必须使用以下命令在文件中为 mysql 设置 PATH ：

```
 export PATH=$PATH:/usr/local/mysql/bin 
```

但是如果你正在使用，`oh my zsh`那么你必须在`.zshrc`文件中添加路径。

* * *

## 回答 #5

> 赞同：26
> 
> 时间：2019-07-28T14:37:20.833

如果你安装了 MySQL 服务器，你仍然得到

```
mysql -u root -p command not found 
```

您很可能会遇到这种情况，因为您的 mac 版本较旧。

试试这个：

在终端的主目录中`open -t .bash_profile`

粘贴`export PATH=${PATH}:/usr/local/mysql/bin/`进去并保存

而不是`mysql -u root -p`在终端中粘贴以下内容：

```
/usr/local/mysql/bin/mysql -u root -p 
```

**或者**使用别名而不是写完整路径

```
alias mysql=/usr/local/mysql/bin/mysql 
```

输入您的密码。现在你进来了。

* * *

## 回答 #6

> 赞同：10
> 
> 时间：2019-08-10T21:31:44.103

您的**PATH**可能未设置。转到终端并输入：

`echo 'export PATH="/usr/local/mysql/bin:$PATH"' >> ~/.bash_profile`

本质上，这允许您从任何地方访问 mysql。

键入`cat .bash_profile`以检查 PATH 是否已设置。

现在检查**mysql**版本：`mysql --version`

如果这仍然不起作用，请关闭终端并重新打开。现在检查版本，它应该可以工作。祝你好运！

* * *

## 回答 #7

> 赞同：5
> 
> 时间：2015-09-16T03:40:03.900

我已经尝试了很多关于 SO 的建议，但这是对我真正有用的建议：

```
sudo sh -c 'echo /usr/local/mysql/bin > /etc/paths.d/mysql' 
```

然后你输入

```
mysql 
```

它会提示您输入密码。

* * *

## 回答 #8

> 赞同：3
> 
> 时间：2019-01-21T15:24:52.843

如果您使用的是终端，则需要将以下内容添加到`./bash_profile`

`export PATH="/usr/local/mysql/bin:$PATH"`

如果您使用的是 zsh，则需要将上面的行添加到您的`~/.zshrc`

* * *

## 回答 #9

> 赞同：2
> 
> 时间：2018-08-09T08:52:04.457

在 bash_profile 中添加以下行：

```
alias startmysql='sudo /usr/local/mysql/support-files/mysql.server start'
alias stopmysql='sudo /usr/local/mysql/support-files/mysql.server stop' 
```

并保存 bash_profile。

现在，在终端中使用以下命令启动和停止 mysql 服务器：

```
startmysql //to start mysql server 
```

和

```
stopmysql //to stop mysql server 
```

* * *

## 回答 #10

> 赞同：2
> 
> 时间：2019-12-19T19:49:36.617

我安装了 MAMP 并且 phpmyadmin 正在工作。

但找不到 /usr/local/bin/mysql

这修复了它

```
sudo ln -s /Applications/MAMP/Library/bin/mysql /usr/local/bin/mysql 
```

* * *

## 回答 #11

> 赞同：2
> 
> 时间：2020-02-15T09:31:59.090

在终端做：

```
vi ~/.bash_profile 
```

并添加这一行：

```
export PATH=${PATH}:/usr/local/mysql/bin 
```

并在终端中输入：

```
mysql -u [username] -p [password] 
```

* * *

## 回答 #12

> 赞同：2
> 
> 时间：2020-06-19T23:42:36.687

也许我会帮助别人。以上答案均不适用于 Catalina。最后，这解决了问题

`echo 'export PATH="/usr/local/opt/mysql@5.7/bin:$PATH"' >> /Users/$(whoami)/.bash_profile`

当然，你必须为你安装的mysql的版本而改变

* * *

## 回答 #13

> 赞同：1
> 
> 时间：2018-10-15T15:22:14.737

使用 MAMP

1.  通常在 /Applications/MAMP/Library/bin/mysql 找到 mysql
2.  须藤 vi /etc/paths
3.  将此路径添加到文件 /Applications/MAMP/Library/bin
4.  :wq (保存并退出文件)
5.  关闭终端窗口
6.  重新打开终端并输入mysql，它应该可以工作

* * *

## 回答 #14

> 赞同：1
> 
> 时间：2021-02-24T16:20:01.870

在终端中使用这两个命令

```
alias mysql=/usr/local/mysql/bin/mysql
mysql --user=root -p 
```

然后它会要求您输入用户 pc 的密码

输入密码：

* * *

## 回答 #15

> 赞同：0
> 
> 时间：2020-09-17T11:00:50.443

也许我会帮助你们中的一些人，即使您在尝试更改 .bash_profile 中的路径后无法从终端打开 mysql

然后你总是发现错误“MYSQL not found”因此你可以直接使用以下命令它会询问你的密码并打开 sql bash

/usr/local/mysql/bin/mysql -u root -p

* * *

## 回答 #16

> 赞同：0
> 
> 时间：2020-11-22T16:59:14.977

通过**HomeBrew安装****mariadb**后我遇到了同样的问题，建议运行- 这解决了问题。**`brew doctor``brew link mariadb`**

 *** * *

## 回答 #17

> 赞同：-1
> 
> 时间：2021-01-11T05:20:54.203

您可能使用 zsh 而不是 bash，那么您必须在 .zshenv 而不是 .bash_profile 中输入上述命令**

# css - 我如何使用中间人的 firesass

> ID：10577376
> 
> 赞同：0
> 
> 时间：2012-05-14T04:00:17.257
> 
> 标签：css, firebug, sass, middleman

如何从中间人启用 sass 的“--debug-info”开关？

我一直在使用 sass 来创建 css，并使用 firesass 来调试 sass。

我刚开始玩中间人，它使用 sass。

问题是，我不知道如何从中间人启用“--debug-info”开关。

搜索“middleman firesass”会得到以下结果： [https ://github.com/middleman/middleman/issues/127](https://github.com/middleman/middleman/issues/127)

这显示了一块可以解决该问题的红宝石。但我不知道如何处理该块。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-22T03:57:01.233

将以下内容放入您的 config.rb

```
compass_config do |compass|
  compass.sass_options = {:debug_info => true}
end 
```

# python - 将压缩后的数据作为字符串放入脚本中

> ID：10577385
> 
> 赞同：0
> 
> 时间：2012-05-14T04:01:43.157
> 
> 标签：python, string, io, compression, gzip

上周我买了一个[Lorem Ipsupm生成器，我承认它非常酷。](http://code.google.com/p/lorem-ipsum-generator/source/browse/trunk/lipsum.py?r=41)

我的问题：有人可以向我展示上述脚本的作者如何能够将 gzip 压缩文件的内容作为字符串发布到他们的代码中的教程吗？我不断收到[gzip 压缩常规文件的](https://stackoverflow.com/a/10560955/881224)示例，我感觉有点迷失在这里。

对于它的价值，我有另一个非常相似的模块（它生成随机名称、公司等），现在它从几个不同的文本文件中读取。我更喜欢这种方法；它需要在我的项目中少一个子目录来放置数据，它还为我提供了一种新的做事方式。

我对流、IO 类型等很陌生。随意将链接倾倒在我的腿上。片段也总是受到赞赏。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-14T04:30:21.257

假设您在 *nix 环境中，您只需要 gzip 和 base64 编码器来生成字符串。假设您的内容位于 中`file.txt`，出于本示例的目的，我使用具有该特定名称的随机字节创建了文件。

所以你需要先压缩它：

```
$ gzip file.txt 
```

这将生成一个`file.txt.gz` 您现在需要嵌入到代码中的文件。为此，您需要对其进行编码。一种常见的方法是使用 Base64 编码，这可以通过`base64`程序来完成：

```
$ base64 file.txt.gz
H4sICGmHsE8AA2ZpbGUudHh0AAGoAFf/jIMKME+MgnEhgS4vd6SN0zIuVRhsj5fac3Q1EV1EvFJK
fBsw+Ln3ZSX7d5zjBXJR1BUn+b2/S3jHXO9h6KEDx37U7iOvmSf6BMo1gOJEgIsf57yHwUKl7f9+
Beh4kwF+VljN4xjBfdCiXKk0Oc9g/5U/AKR02fRwI+zYlp1ELBVDzFHNsxpjhIT43sBPklXW8L5P
d8Ao3i2tQQPf2JAHRQZYYn3vt0tKg7drVKgAAAA= 
```

现在您已经拥有了在 python 脚本中使用该文件的内容所需的一切：

```
from cStringIO import StringIO
from base64 import b64decode
from gzip import GzipFile

# this is the variable with your file's contents    
gzipped_data = """
H4sICGmHsE8AA2ZpbGUudHh0AAGoAFf/jIMKME+MgnEhgS4vd6SN0zIuVRhsj5fac3Q1EV1EvFJK
fBsw+Ln3ZSX7d5zjBXJR1BUn+b2/S3jHXO9h6KEDx37U7iOvmSf6BMo1gOJEgIsf57yHwUKl7f9+
Beh4kwF+VljN4xjBfdCiXKk0Oc9g/5U/AKR02fRwI+zYlp1ELBVDzFHNsxpjhIT43sBPklXW8L5P
d8Ao3i2tQQPf2JAHRQZYYn3vt0tKg7drVKgAAAA=
"""

# we now decode the file's content from the string and unzip it
orig_file_desc = GzipFile(mode='r', 
                          fileobj=StringIO(b64decode(gzipped_data)))

# get the original's file content to a variable
orig_file_cont = orig_file_desc.read()

# and close the file descriptor
orig_file_desc.close() 
```

显然，您的程序将依赖于 base64、gzip 和 cStringIO python 模块。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-14T04:17:26.807

我不确定你到底在问什么，但这是一个刺...

[Lipsum.py](http://code.google.com/p/lorem-ipsum-generator/source/browse/trunk/lipsum.py?r=41)的作者在他们的代码中包含了内嵌的压缩数据，作为 Base64 编码的文本块。 [Base64](https://en.wikipedia.org/wiki/Base64)是一种使用可打印 ASCII 字符表示二进制数据的编码机制。它可用于在 Python 代码中包含二进制数据。它更常用于在电子邮件附件中包含二进制数据……下次有人向您发送图片或 PDF 文档时，请查看原始消息，您会看到非常相似的内容。

Python 的模块提供了在数据的 base64 和二进制表示之间进行转换的例程......一旦你有了数据的二进制表示，无论你是从文件中读取它还是解码一个字符串，你*如何*`base64`得到它并不重要嵌入到您的代码中。

 *Python 的`gzip`模块可以用来解压数据。它需要一个类似文件的对象......并且 Python 提供了`StringIO`将字符串包装在正确的方法集中的模块，以使它们像文件一样工作。您可以在以下代码的[lipsum.py](http://code.google.com/p/lorem-ipsum-generator/source/browse/trunk/lipsum.py?r=41)中看到这一点：

```
sample_text_file = gzip.GzipFile(mode='rb',
    fileobj=StringIO(base64.b64decode(DEFAULT_SAMPLE_COMPRESSED))) 
```

这是创建一个`StringIO`对象，其中包含存储在`DEFAULT_SAMPLE_COMPRESSED`.

这里提到的所有模块都在[Python 标准库](http://docs.python.org/library/)的文档中进行了描述。

一般来说，我不建议在你的代码中包含这样的内联数据作为一个好主意，除非你的数据很小并且相对静态。否则，将其打包到 Python 包中，这样可以更轻松地编辑和跟踪更改。

我是否回答了正确的问题？

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-14T04:47:10.477

怎么样：压缩和编码一个字符串，将其打印出来，然后再次解码并解压缩。

```
from StringIO import StringIO
import base64
import gzip

contents = 'The quick brown fox jumps over the lazy dog'

zip_text_file = StringIO()

zipper = gzip.GzipFile(mode='wb', fileobj=zip_text_file)

zipper.write(contents)
zipper.close()

enc_text =  base64.b64encode(zip_text_file.getvalue())
print enc_text

sample_text_file = gzip.GzipFile(mode='rb',
    fileobj=StringIO(base64.b64decode(enc_text)))
DEFAULT_SAMPLE = sample_text_file.read()
sample_text_file.close()
print DEFAULT_SAMPLE 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2021-07-22T18:58:19.940

老问题，但我最近必须为 AWS 日志执行此操作。在 Python3 中使用`BytesIO`而不是`StringIO`：

```
import base64
from io import BytesIO

DEFAULT_SAMPLE_COMPRESSED = "Some base 64 encoded and gzip compressed string"

sample_text_file = gzip.GzipFile(
    mode='rb',
    fileobj=BytesIO(base64.b64decode(DEFAULT_SAMPLE_COMPRESSED))
)

binary_text = sample_text_file.read() # This will be the final string as bianry
text = binary_text .decode() # This will make the binary text a string. 
```*

# php - 编辑 Tierprice 显示

> ID：10577397
> 
> 赞同：-2
> 
> 时间：2012-05-14T04:08:34.490
> 
> 标签：php, magento, e-commerce, magento-1.6

如何让那个信息tierprice，出现在表格中，如图

![图片](../Images/42ebe84cb68131b0bba04af19b92ac1c.png)

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-14T19:31:03.067

我会给你一些大方向：

1.  转到管理面板打开模板提示 (http://vimeo.com/1067069)
2.  重新加载页面并找到相关的模板文件，它可能会被命名为 tierprice.html 或类似的东西。
3.  更改 html 以根据需要显示。

如果您在执行此操作时遇到特定问题，那么将是发布另一个问题的好时机。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-15T16:56:01.943

完美的 Gershon Herczeg，

我打破了他的头一点，但设法解决。

在位于 /app/design/frontend/base/default/template/catalog/product/view 的“tierprice.phtml”中更改了以下几行。

endif 后的第 50 行添加到“静态”表

```
 <h4 class="tierprice"> Progressive Discount Table </ h4>
<li> <table> <td style="background:#dfdfdf;border:1px solid #b4b4b4;padding:4px;text-align:center;"> Qty. </ td> </ tr>
   <td style="border:1px solid #b4b4b4;padding:4px;text-align:center;">Price</ td> </ tr></ table> </ li> 
```

在else之后的第185行，添加了以下代码

```
 <? php echo $ this-> __ ("<td <table> style="background:#dfdfdf;border:1px solid #b4b4b4;padding:4px;text-align:center;">% + $ 1 s units. </ tr> </ td> <td style="border:1px solid #b4b4b4;padding:4px;text-align:center;">% 2 $ s </ tr> </ td> </ table> ', $ _price ['price_qty'], $ _price ['formated_price'])?> 
```

感谢那些提供帮助的人，感谢那些抱怨的人

再次感谢

# iphone - 将一个类的对象声明为另一个类

> ID：10577402
> 
> 赞同：0
> 
> 时间：2012-05-14T04:09:12.083
> 
> 标签：iphone, objective-c

我有一个名为 Building 的课程：

```
@interface Building : NSObject
@property (nonatomic,retain)NSString* node;
@property (nonatomic,retain)NSString* subnode;
@property (nonatomic,retain)NSString* supernode;
@property (nonatomic,retain)Node *reference;
@end 
```

我有另一个名为：Node

```
@property (nonatomic,retain)NSMutableArray* strArray;
@property (nonatomic,retain)NSString * strName; 
```

我从第三类声明了 Building 的实例。我通过使用建筑物的引用从第三类设置了 strName：

```
 building.reference.strName=strVal; 
```

但这给了我空值。我如何通过使用 Building 类的引用来设置这个值。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-14T04:15:29.873

确保您`reference`在`Building`'s`-init`方法中进行初始化。例如（假设`Node`也直接继承自`NSObject`）：

```
- (id) init {
    self.reference = [[Node alloc] init];
    return self;
} 
```

此外，您可以编写指定的初始化方法以在初始化时传入现有节点，例如`-initWithNode: (Node)myNode`. 然后你会得到你`Building`的`-init`方法来调用`[self initWithNode:[[Node alloc] init]`。

然后要初始化一个`Building`对象，您可以调用`[[Building alloc] init]`（以获取具有空白节点的建筑物）或`[[Building alloc] initWithNode:myNodeObject]`（以获取具有您已经实例化的节点的建筑物）。

请注意，如果 Node 不直接从 NSObject 继承（它自己不做任何事情`init`），您也应该调用超类`init`例程，因此您的初始化程序将变为：

```
- (id) init {
    if(self = [super init]) {
        self.reference = [[Node alloc] init];
    }
    return self;
} 
```

# ios - 是否可以编辑和重新编译 iOS 二进制文件？

> ID：10577406
> 
> 赞同：13
> 
> 时间：2012-05-14T04:10:37.797
> 
> 标签：ios, reverse-engineering, ida, otool

我有一个应用程序并最近发布到 Cydia。它已被其他人破解并发布在洪流网站上。我内部有一个二进制校验和验证机制，他们能够根据他们对二进制文件所做的更改创建一个新的校验和文件。他们编辑了两个函数并将其反编译并发布到种子。

我看到可以看到函数和类的实际实现。但是为了编辑函数，他们必须找到该函数的地址并通过 HEX EDITOR 进行编辑。我不想让它“无法破解”，但我真的很想知道他们是如何破解的。

如何在 iOS 二进制文件中编辑函数并重新编译？例如，我的一个课程中有以下方法。

```
- (id) getSomething {

   return @"Something";
} 
```

我想编辑这个函数的返回值。那可能吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-14T07:44:51.810

通常，您不会“重新编译”它。只需将文件提供给 IDA，查找字符串、函数调用或您要查找的任何内容，然后使用十六进制编辑器或类似工具在汇编级别编辑文件。在大多数情况下，只需将条件跳转更改为无条件跳转或 nop（无操作）就足够了。如果要更改返回值，则必须付出更多的努力，但是根据我的经验，您可以直接在二进制文件中编辑 char 序列，如果它被指定为常量或初始值 - 或者您只需编写一个全新的功能并将其汇编代码“复制”到原始文件中。您只需要确保您的新功能不会占用比原来更多的空间 - 否则一切都会变得更加复杂。我希望这就是你所要求的，

# php - Zend Gdata 日历错误请求错误

> ID：10577410
> 
> 赞同：0
> 
> 时间：2012-05-14T04:11:46.890
> 
> 标签：php, zend-framework, cakephp-1.3, gdata, gdata-api

我一直在尝试使用 CakePHP 中的 ZEND GData API 并让它设置和检索日历列表。

所有这些都有效，但是当我尝试检索日历事件时，我收到一个错误的请求错误，我不知道如何解决它。这是运行脚本时收到的错误消息的代码。

***注意：我正在使用 XAMPP 从我的机器上测试这个**

```
 //GET LIST OF EVENTS
        $index = 0;
        foreach($listFeed as $list) {
            $query = $service->newEventQuery($list->link[0]->href);
            // Set different query parameters
            $query->setUser('default');
            $query->setVisibility('private');
            $query->setProjection('full');
            $query->setOrderby('starttime');

            // Get the event list
            try {
                $eventFeed[$index] = $service->getCalendarEventFeed($query);
            } catch (Zend_Gdata_App_Exception $e) {
                echo "Error: " . $e->getResponse() . "<br />";
            }
            $index++;
        } 
```

这是错误消息：

> 错误：HTTP/1.1 400 错误请求内容类型：text/html；charset=UTF-8 日期：2012 年 5 月 14 日星期一 04:04:41 GMT 过期时间：2012 年 5 月 14 日星期一 04:04:41 GMT 缓存控制：私有，max-age=0 X-content-type-options： nosniff X-frame-options: SAMEORIGIN X-xss-protection: 1; mode=block 服务器：GSE 连接：关闭 无效的请求 URI

感谢您的时间和帮助。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-29T03:58:44.700

1.  `$service->newEventQuery()`这里不需要参数。

2.  我相信您正在从单个用户那里检索日历列表。假设是你自己。所以

    `$query->setUser('default');`

    不会帮助您获得任何第二个日历，而只会帮助您获得名称为您的电子邮件地址的主日历。

    参考[谷歌开发者协议指南](https://developers.google.com/google-apps/calendar/v1/developers_guide_protocol#RetrievingEvents%3a)

    要获取提要，请使用您在本文档上一节中找到的 URL 向日历发送以下 HTTP 请求：

    `GET https://www.google.com/calendar/feeds/userID/private-magicCookie/full`

    因此，将 userID 替换为您的 calendarID 以获取特定日历的事件源。

尝试

```
 $index = 0;
    foreach($listFeed as $list) {
        $calendarID = $list->id->text;
        $user = str_replace("http://www.google.com/calendar/feeds/default/owncalendars/full/", '', $calendarID);
        $query = $service->newEventQuery();
        // Set different query parameters
        $query->setUser($user);
        $query->setVisibility('private');
        $query->setProjection('full');
        $query->setOrderby('starttime');

        // Get the event list
        try {
            $eventFeed[$index] = $service->getCalendarEventFeed($query);
        } catch (Zend_Gdata_App_Exception $e) {
            echo "Error: " . $e->getResponse() . "<br />";
        }
        $index++;
    } 
```

# windows-phone-7 - 在 WP7 中如何强制 ListPicker 以完整模式显示（或发送点击）？

> ID：10577413
> 
> 赞同：0
> 
> 时间：2012-05-14T04:12:07.703
> 
> 标签：windows-phone-7, listpicker

我需要以编程方式强制（WP7 工具包）ListPicker 以完整模式显示其列表。我该怎么做（或者如何发送点击手势或点击间接做同样的事情）？谢谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-14T04:17:17.290

您可以将 的 设置`ExpansionMode`为`ListPicker`您想要的样式。通过 XAML

```
<toolkit:ListPicker x:Name="MyListPicker"
                    ExpansionMode="FullScreenOnly"
                    >
  ....
</toolkit:ListPicker> 
```

或在代码中；

```
MyListPicker.ExpansionMode = ExpansionMode.FullScreenOnly 
```

希望有帮助。

# java - 10 个客户端请求一个 Servlet。创建了多少个 servlet 实例

> ID：10577414
> 
> 赞同：14
> 
> 时间：2012-05-14T04:12:18.727
> 
> 标签：java, jsp, jakarta-ee, servlets

假设有 10 个客户端请求一个 Servlet。创建了多少个 servlet 实例？如果每个实例都试图进行更改，它还会产生任何并发修改问题吗？请帮忙。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-05-14T04:13:25.767

仅存在一个 servlet 实例（每个类加载器），每个请求将在其自己的线程上提供服务

那么在您需要管理同步的请求之间是否有任何共享的东西

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-14T05:19:57.110

Servlet 在 servlet 容器中被实例化为单例，这就是为什么我们不能在其中声明全局变量的原因。

# php - 从 GET/POST 预填充 Yii 表单

> ID：10577415
> 
> 赞同：2
> 
> 时间：2012-05-14T04:13:09.373
> 
> 标签：php, yii, yii-cformmodel

我的问题是我有一个包含简短表单的 HTML 页面。我想要的是当这个页面发布/进入我的 Yii 模型表单时，能够使用传入表单中的值抓取并预填充模型的空表单......

我不认为我可以使用分页小部件，因为我的初始页面是 HTML。如果设置了这个 POST 值而不是模型，有什么方法可以将其拉入。

我还是 Yii 的新手，所以如果这是一个简单的答案，我很抱歉

编辑：为了澄清，我的初始表单有一些来自我的主页表单的值。HTML 页面有 3 个字段，比如名字、姓氏、电子邮件地址。然后将该表格发布到我的整页表格中，该表格要求提供其他信息以完成模型。我希望我可以在新的 php/yii 表单中预先填充名字和姓氏。

基本上我希望当我第一次渲染 _form.php 时，我可以获取一个 GET/POST 值并将其分配给当前模型，或者将其添加为表单上的默认值。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-14T12:56:10.877

“我希望......我可以获取 GET/POST 值并将其分配给当前模型”

你当然可以。在您的控制器中执行此操作，您将被设置：

```
$model->first_name = $_GET['first_name']; 
```

当然，您可能还想验证这些值并设置模型场景，以确保您最终不会收到攻击者传入的错误数据。否则你可能会遇到 XSS 攻击。但是直接分配模型属性的能力很好而且很强大......

# javascript - 如何使用 JQuery 获得真实的图像高度？

> ID：10577418
> 
> 赞同：1
> 
> 时间：2012-05-14T04:13:16.763
> 
> 标签：javascript, jquery, html, css, image

我想加载 html ，然后得到真实的图像高度。

```
$("#cover").html(stuff); //this has the image inside it
$(function(){
    console.log($("#cover img").height()); //sometimes it's 0
}); 
```

由于某种原因，高度有时为 0。可能是因为图像尚未完全加载，而 JQuery 将其视为 0？如果是这样，我该如何克服？加载图像时是否有回调或其他东西？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-14T04:18:38.087

您可以使用 jQuery 的 .load() 方法

```
$('#cover').html(stuff);
$('#cover img').load(function () {
    console.log($(this).height());
}; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-14T04:19:20.330

为什么console.log里面有个匿名函数？你试过这个吗？

```
$("#cover").html(stuff); //this has the image inside it
console.log($("#cover img").height()); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-14T04:17:58.117

```
//locate the image(s)
$("#cover img").each(function(){

    //Build a new Image Object outside the DOM
    //that way, CSS won't affect it
    var img = new Image();

    //add a callback when loaded
    img.onload = function(){
        //your width and height
        //img.width
        //img.height
    }

    //use the image src to load
    //use attr() to resolve path issues across browsers
    img.src = $(this).attr('src');

}); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-14T04:23:31.620

尝试使用[`load method`](http://api.jquery.com/load/)我们可以利用的方法使这项工作也按照我们想要的方式进行。

> 我们现在遇到的问题是，在 Webkit 浏览器中，jQuery 代码在 DOM 就绪时运行，而 DOM 在图像加载之前就已经就绪。所以代码运行，但由于没有图像可以得到宽度，我们得到 0 作为图像的宽度。我们可以使用 load 方法让代码等到窗口完全加载后再运行。

```
 $(window).load(function() {
            console.log($("#cover img").height()); 
}); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-14T04:29:58.893

尝试使用 attr() 获取高度：-

```
$("#yourElemengtID").attr('height') 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-05-14T05:11:29.257

这是我之前使用的一段小代码，希望对您有所
帮助

```
function MouseIn()
        {
            var src;
            //to get original image size
            var img =$(this);// displayed image
            var theImage = new Image();// create a cache image
            var imgsource =img.attr("src");// take the src of displayed image
            theImage.src = imgsource;// give cached image the source of displayed image
            var original_height = theImage.height// take height of image from the source
            var original_width = theImage.width;//take width of image from the source

            // to get the displayed image size
            var Image_displaysize_width= img.width();
            var Image_displaysize_height= img.height();
      } 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-10-21T05:12:22.730

你不是打算做这样的事情吗？

```
 jQuery("#myImg")[0].naturalHeight 
```

最好还是尽可能不要使用 jQuery 的开销。

```
 document.getElementById('myImg').naturalHeight 
```

# java - 通过删除字符从现有字符串创建回文

> ID：10577422
> 
> 赞同：6
> 
> 时间：2012-05-14T04:14:24.640
> 
> 标签：java, string, algorithm, palindrome

我如何通过删除零个或多个字母来确定您可以从一个单词中获得的最长回文的长度。

例如：amanQQQapl12345anacaZZZnalpaXXXna67890ma
最长的回文将是 21 位数字。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-05-14T04:34:04.843

这可以通过动态规划来解决。**将d[i, j]**定义为原始字符串中最长回文的长度。

> 如果 s[i] = s[j], d[i, j] = max(d[i+1, j-1] + 2, d[i, j-1], d[i+1, j] ）。
> 
> 否则 d[i, j] = max(d[i, j-1], d[i+1, j])。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-05-14T08:24:38.060

单词 W 中最长的回文是W 及其镜像的[最长公共子序列。](http://en.wikipedia.org/wiki/Longest_common_subsequence_problem)

您可以在 O(n²) 时间和 O(n) 空间中计算它，其中 n 是 W 的长度，但如果您知道只需要删除几个字符来制作回文，则可以有更好的复杂性。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-14T07:21:30.447

回文最多可以有一个奇数字母，即中间字母，以及任意数量的偶​​数字母。

您可以计算每个字母出现的频率。如果每个字母不是全部或没有，则为每个字母添加计数/2*2，如果任何字母的计数为奇数，则添加一个。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-06-14T11:03:49.470

这是@Rambo 答案的正确实现，以防其他人发现他的答案过于简洁。我添加了对先前结果的缓存，但条件是不同符号的最大数量最多为 1000。由于多个分支使用相同的子分支，这提供了显着的加速。

```
int d[1000][1000] = {0}; // To store result of previous computation

int computeMaxPalindromeLength(vector<int>& a, int start, int end) {
    if(d[start][end] != 0) // If not precomputed, recompute.
        return d[start][end];
    if(start == end) { // The mid character should be taken as 
        d[start][end] = 1;
        return 1;
    }
    else if(start == end-1) {
        d[start][end] = (a[start] == a[end])?2:1;
        return d[start][end];
    }
    if(a[start] == a[end]) {
        d[start][end] = max( 2 + computeMaxPalindromeLength(a, start+1, end-1), 
            max(computeMaxPalindromeLength(a, start+1, end), computeMaxPalindromeLength(a, start, end-1)));
    } else {
        d[start][end] = max(computeMaxPalindromeLength(a, start+1, end), computeMaxPalindromeLength(a, start, end-1));
    }
    return d[start][end];
} 
```

将上述方法称为：-

```
vector<int>& a; // Convert each character of string to digit if working with alphanumeric characters.
int maxPalindromeLength = computeMaxPalindromeLength(a, 0, a.size()-1); 
```

# mod-rewrite - Apache mod_rewrite 为所有非脚本 URI 替换不同的子文件夹

> ID：10577423
> 
> 赞同：0
> 
> 时间：2012-05-14T04:14:31.113
> 
> 标签：mod-rewrite

我的目标是将非 jsp URL 重定向到不同的子文件夹

### 浏览器网址

*   [http://mydomain.com/site-Xghthhg/css/styles1/layouts.css](http://mydomain.com/site-Xghthhg/css/styles1/layouts.css)
*   [http://mydomain.com/site-Xghthhg/jslibs/jquery/jquery.js](http://mydomain.com/site-Xghthhg/jslibs/jquery/jquery.js)
*   [http://mydomain.com/site-Xghthhg/jslibs/jquery/plugins/jd/jquery.jd.js](http://mydomain.com/site-Xghthhg/jslibs/jquery/plugins/jd/jquery.jd.js)

### 代理到

*   [http://mydomain.com/map/css/styles1/layouts.css](http://mydomain.com/map/css/styles1/layouts.css)
*   [http://mydomain.com/map/jslibs/jquery/jquery.js](http://mydomain.com/map/jslibs/jquery/jquery.js)
*   [http://mydomain.com/map/jslibs/jquery/plugins/jd/jquery.jd.js](http://mydomain.com/map/jslibs/jquery/plugins/jd/jquery.jd.js)

### httpd.conf

```
RewriteCond  %{REQUEST_FILENAME} !(.+\.jsp) 
RewriteCond  %{REQUEST_URI} ^/site-(.*)/^(.*)$
RewriteRule  ^/site-(.*)/^(.*)$ /map/$2 [P] 
```

我不明白为什么它不起作用！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-14T04:23:03.630

您应该在第一行使用 REQUEST_URI。你不需要第二行。最后，您的正则表达式无效，插入符号表示“匹配开头”，因此在正则表达式中间使用它是没有意义的。

```
 RewriteCond %{REQUEST_URI} !(.+\.jsp)
 RewriteRule ^/site-([^/]*)/(.*)$ /map/$2 [P] 
```

在这里，我确实在中间使用了插入符号，但在 [] 上下文中，插入符号具有不同的含义：匹配*除*以下字符之外的任何字符（因此 [^/]* 匹配不是斜杠的字符串）。

# javascript - Sencha Touch 2 App - 功能需求

> ID：10577427
> 
> 赞同：0
> 
> 时间：2012-05-14T04:15:35.320
> 
> 标签：javascript, google-maps-api-3, sencha-touch, extjs, sencha-touch-2

在 Sencha Touch V2 中开发了一个应用程序。这个应用程序包含一个 Mappa 面板，其中有一个地图，这个地图已经填充了对应于从 json 文件中获取的各个位置（咖啡馆）的标记。

应用地图面板功能如下：

在标记上单击开始和结束位置 textields 弹出窗口，用户在其中输入开始和结束位置的值，再次单击任何其他标记会导致开始和结束位置的方向被绘制到地图上。

我们需要实现以下功能：

我们需要通过单击按钮来促进在地图上绘制的谷歌地图中输入的位置的方向，还需要重新创建地图实例（刷新地图）并将现有标记放置在另一个按钮单击（地图清除按钮）上，以便创建一个新实例供用户查找不同起点和终点位置的方向。

我们遇到的问题是：

1.  在为按钮单击定义处理程序时，没有执行任何操作（获取方向处理程序不起作用）。
2.  为了重新创建地图的实例，我们将地图设置为空，但这会导致地图没有标记。

任何人都可以在 Sencha touch 版本 2 中帮助完成此应用程序的任务。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-14T05:04:43.230

很久以前就创建了这种应用程序/功能。您可以创建一个浮动并在那里为端点`formpanel`提供字段条目。`source``destination`

然后，您可以点击“获取路线”按钮编写以下代码，

代码片段：-

```
tap: function() {
   var src = Ext.getCmp('srcField');
       var destn = Ext.getCmp('destField');
       var mode = Ext.getCmp('travelMode');
       var request = {
        origin: src.getValue(), 
        destination: destn.getValue(),
        travelMode: mode.getPressedButtons()[0].getText(),
       };

     Ext.Ajax.request({
      url: 'http://maps.googleapis.com/maps/api/directions/json?origin='+src.getValue()+'&destination='+destn.getValue()+'&mode='+mode.getPressedButtons()[0].getText()+'&sensor=false';
          method:'post',

          success : function(response) {
              showDirections(response,request);
          }         
     });

     function showDirections(res,req) {
       var directionsService = new google.maps.DirectionsService();
       var directionsDisplay = new google.maps.DirectionsRenderer();
       var map = Ext.getCmp('googleMapComponentId').getMap();

       directionsService.route(request, function(response, status) {
       if (status == google.maps.DirectionsStatus.OK) {
             directionsDisplay.setDirections(response);
             directionsDisplay.setMap(map);
       }
     });
  } 
```

# php - 如何加快通过 Amazon SES 发送邮件的速度？

> ID：10577435
> 
> 赞同：6
> 
> 时间：2012-05-14T04:16:25.123
> 
> 标签：php, curl, amazon-web-services, amazon-ses

发送 50 万封电子邮件需要很长时间：6 到 8 小时。配额允许每秒 90 封电子邮件。从性能良好的专用服务器发送，因此内存/连接不应该是问题。一次使用 50 封电子邮件。

尝试了一批不同数量的电子邮件：超过 50 个导致 CURL 错误：似乎亚马逊对某些线程没有响应。即使批次中有 50 个并且批次之间有 1200 毫秒的暂停，每个邮件输出也会出现一些问题。

因此，平均 50 个批次需要 4 到 6 秒才能完成 + 1.2 秒的暂停——对于每天 500k 的邮件发送来说相当长。

请建议如何调整邮件以使其速度更接近 90 邮件/秒。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-18T14:57:47.283

并行运行多个作业怎么样？这样可以减少每个 cURL 错误造成的潜在损害。从两个作业开始，每个作业都有相应的暂停和限制。

您还应该确保设置 cURL 超时。至少配置 CURLOPT_CONNECTTIMEOUT 和 CURLOPT_TIMEOUT。

# c# - 将 C++/CLI 中的动态对象返回到 C#

> ID：10577439
> 
> 赞同：3
> 
> 时间：2012-05-14T04:17:01.753
> 
> 标签：c#, dynamic, c++-cli

我有一个包含大量类的 C++/CLI 项目——这些类有自己的元数据系统。所以我想返回一个动态对象来简化 C# 中的一些用例。但我看不到如何在 C++ 中做到这一点。

在 C# 中，我可以编写以下代码：

```
dynamic TestThisOut()
{
    return null;
}

void mork()
{
    var d = TestThisOut();
    d.Fork();
} 
```

我想`TestThisOut()`用 C++/CLI 编写，这样我就可以像在上面的“mork”函数中一样使用它（即不必键入动态关键字）。这可能吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-28T15:10:38.320

您**可以**在 c++/cli 中创建动态对象，但不能像在 C# 项目中那样使用它。但是，您可以从 C# 中使用它。这是您的操作方法：

在 C++/CLI 中创建返回**Object^**的属性或方法。**使用System::Runtime::CompilerServices::DynamicAttribute**标记此属性或方法。你已准备好出发。

这是我创建的一个快速示例：

```
namespace ClassLibrary1 
{
    using namespace System;
    using namespace System::Dynamic;

    public ref class Class1 : public DynamicObject
    {
    public:
        [System::Runtime::CompilerServices::Dynamic]
        static property Object^ Global
        {
        public:
            Object^ get()
            {
                return gcnew Class1();
            }
        }

    public:
        String^ Test()
        {
            return "Test";
        }
    };
} 
```

还有我的 C# 消费者：

```
Console.WriteLine( ClassLibrary1.Class1.Global.Test() ); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-14T04:28:24.017

[dynamic](http://msdn.microsoft.com/en-us/library/dd264736.aspx)是 C# 4.0 关键字。C++ CLI（以及[VB.NET](http://social.msdn.microsoft.com/Forums/is/vblanguage/thread/22cc1e87-8a51-4d49-8adb-df110d40e36f)）不支持它。

如果你想在 C++ CLI 中使用动态对象，那么你可以使用[impromptu-interface](http://code.google.com/p/impromptu-interface/)库。[支持的选项列表](http://code.google.com/p/impromptu-interface/wiki/UsageReallyLateBinding)。信息来自[这个问题](https://stackoverflow.com/questions/9283731/dynamic-c-sharp-object-used-in-c-cli)

# jquery - 页面加载后选中复选框

> ID：10577440
> 
> 赞同：0
> 
> 时间：2012-05-14T04:17:02.253
> 
> 标签：jquery, asp.net, checkbox

我的页面中有一个复选框

如果选中该复选框，那么我想显示一个 div。如果未选中，则另一个 div。

```
<input type="checkbox" id="CBforGrid" />Add CheckBoxes<br /> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-14T04:20:50.823

您尚未显示 div 的标记，但假设它们从一开始都是隐藏的，您可以在页面加载时一次性执行类似的操作（正如您的问题标题所暗示的那样）：

```
$(document).ready(function() {
   if ($("#CBforGrid").is(":checked"))
      $("#adiv").show();
   else
      $("#anotherdiv").show();
}); 
```

或者，如果您的意思是每次用户更改复选框时都这样做，那么可能是这样的：

```
$(document).ready(function() {
    var $aDiv = $("#adiv").hide(),
        $anotherDiv = $("#anotherDiv");

    $("#CBforGrid").click(function() {
       $aDiv[this.checked ? "show" : "hide"]();
       $anotherDiv[this.checked ? "hide" : "show"]();
    });
}); 
```

演示：http: [//jsfiddle.net/Vk6R8/](http://jsfiddle.net/Vk6R8/)

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-05-14T04:18:32.623

在页面加载

```
$(function(){
   if($('#CBforGrid').is(':checked')) {
        $('div').show();
   }
}); 
```

在复选框上单击

```
 $(function(){
      $('#CBforGrid').click(function(){

          if($(this).is(':checked')) {
               $('div').show();
           } else {
               $('div').hide();
           }

      });

    }); 
```

# ios - viewDidUnload 与 viewDidDisappear

> ID：10577451
> 
> 赞同：6
> 
> 时间：2012-05-14T04:18:22.203
> 
> 标签：ios, view, uiviewcontroller, lifecycle

我不明白什么时候应该在`viewDidUnload`vs中实现一些东西`viewDidDisappear`。两者有什么区别？

`NSNotification`例如，当视图控制器从视图层次结构中删除时，我想发送一个。在这两种方法之间，我从哪里发布通知是否重要？

[https://developer.apple.com/documentation/uikit/uiviewcontroller](https://developer.apple.com/documentation/uikit/uiviewcontroller)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-14T04:25:49.033

这是参考苹果的文档：-

viewDidUnload:-

当内存不足的情况发生并且不需要当前视图控制器的视图时，系统可能会选择从内存中删除这些视图。此方法在视图控制器的视图被释放后调用，这是您执行任何最终清理的机会。如果您的视图控制器存储了对视图或其子视图的单独引用，您应该使用此方法来释放这些引用。您还可以使用此方法删除对您为支持视图而创建但在视图消失后不再需要的任何对象的引用。

viewDidDisappear:-

通知视图控制器其视图已从每次视图消失或移动到其他视图的视图层次结构中删除。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-14T04:21:09.857

`viewDidDisappear`每次视图消失或转到其他视图`viewDidUnload`时调用，当控制器的视图从内存中释放时调用。（在 iOS 6.0 中已弃用。在内存不足的情况下不再清除视图，因此永远不会调用此方法。）[请参阅参考资料](https://developer.apple.com/reference/uikit/uiviewcontroller/1621383-viewdidunload)。

# php - Smarty 变量不起作用

> ID：10577458
> 
> 赞同：1
> 
> 时间：2012-05-14T04:19:11.183
> 
> 标签：php, variables, web, smarty

所以我很确定我根据 smarty 文档做这件事是正确的，但我似乎什至无法让一个简单的变量正常工作，这是我的代码

```
{extends file="master.tpl"}

{block name=body}
div id="LeftPanel">
    <div>
        {$image}
</div>
{/block} 
```

后面的代码

```
$smarty->assign('$image'," ");
if($voFrontPage != null && $voFrontPage->Image_ID) {
    $sImage = "<a href='ViewEvent.php?EventID={$voFrontPage->Event_ID}' class='ImgLink'>"; 
    $sImage .= "<img alt='{$voEvent->Title}' class='center' src='Includes/Objects/ImageHandler.php?ImageID={$voFrontPage->Image_ID}' title='{$voEvent->Title}' class='ui-corner-all'/></a>";
    $smarty->assign('$image',$sImage);
} 
```

尝试使用此功能时收到以下错误...我真的不明白我做错了什么。

SmartyCompilerException：第 4 行模板“templates/index.tpl”中的语法错误“{$image}”未知标签“private_print_expression”在 /home/masc/www/Includes/3rdPartyLibs/smarty/sysplugins/smarty_internal_templatecompilerbase.php 第 627 行

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-14T22:46:14.593

好的，我想通了，这是一个损坏的 smarty 安装，显然不是所有上传到服务器的文件。

# mysql - MySQL - 插入期间的列特定时区

> ID：10577461
> 
> 赞同：3
> 
> 时间：2012-05-14T04:19:50.420
> 
> 标签：mysql, timezone

假设我有 2 个 TIMESTAMP 字段/列，`event`并且`stamp`. 对于`event`字段，当我们插入时，我想设置时区，以便该事件将使用用户指定的时区。但是，我不想`stamp`使用那个时区。我想`stamp`使用服务器使用的任何默认时区。

```
SET time_zone = <UTC offset>; 
```

不起作用，因为它会影响两者`event`以及`stamp`我们只想`event`受时区影响的地方。

有没有办法在插入期间为特定列设置时区？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-14T04:31:58.307

插入日期时，MySQL 不会担心时区。

我建议将日期/时间存储在 GMT (+00:00) 中，并使用另一个字段来存储使用的时区（例如“欧洲/阿姆斯特丹”）。

**编辑**

不过，我不完全确定您是否需要使用的时区，因为您可以在脚本/应用程序中以任何您喜欢的方式格式化 GMT 时间。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-14T04:38:04.620

```
SET time_zone = <user timezone>;    
INSERT ... SET event = CURRENT_TIMESTAMP(), stamp = UTC_TIMESTAMP(), ... 
```

[或在http://dev.mysql.com/doc/refman/5.5/en/date-and-time-functions.html](http://dev.mysql.com/doc/refman/5.5/en/date-and-time-functions.html)阅读更多内容

# java - 多屏幕尺寸问题

> ID：10577467
> 
> 赞同：0
> 
> 时间：2012-05-14T04:20:40.293
> 
> 标签：java, android, xml, screen-size

根据我的理解，支持多种屏幕尺寸是在 3.2 或更高版本上工作的。低于该版本，它不会自动检测屏幕尺寸并选择正确的布局文件夹。

**如果我错了，请纠正我**

但是，我的情况是我在模拟器和两个不同大小和版本的设备上运行应用程序。

> 模拟器：1.6 版本，带 QVGA。它会自动检测屏幕尺寸并选择正确的布局文件夹。
> 
> 第一款设备：2.2 小尺寸版本（QVGA）。它不会自动检测屏幕尺寸并选择错误的布局文件夹
> 
> 第二台设备：4.0.4 版本，带有 Nexus S 中等尺寸 (HVGA)。它会自动检测屏幕尺寸并选择正确的布局文件夹。

我的 manifest.xml

```
<uses-sdk android:minSdkVersion="12" />

<supports-screens
    android:anyDensity="true"
    android:largeScreens="true"
    android:normalScreens="true"
    android:resizeable="true"
    android:smallScreens="true"
    android:xlargeScreens="true"
    android:requiresSmallestWidthDp="426" >
</supports-screens> 
```

我的文件夹

> 资源/可绘制
> 
> 资源/布局
> 
> res/layout-小

我没有创建新的可绘制集，因为如果使用小布局，图像可以清楚地显示，所以我不打扰那个。

如果我将我的第一台设备从 2.2 升级到 3.2 或更高版本，那么设备会自动检测并选择正确的文件夹怎么办？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-14T05:02:19.570

下面的链接将指导您如何使用它。

```
http://www.brighthub.com/mobile/google-android/articles/61895.aspx# 
```

# graphics - OpenGLES2 着色器：照明位置和相机移动？

> ID：10577468
> 
> 赞同：0
> 
> 时间：2012-05-14T04:20:47.490
> 
> 标签：graphics, opengl-es, opengl-es-2.0, shader, vertex-shader

我尝试按照[http://www.learnopengles.com/android-lesson-two-ambient-and-diffuse-lighting/上的教程为我的 OpenGLES2 应用程序添加照明](http://www.learnopengles.com/android-lesson-two-ambient-and-diffuse-lighting/)

与上面的教程不同，我有 FPS 摄像机运动。在顶点着色器中，我在世界坐标中有硬编码的摄像机位置 (u_LightPos)。但是当我移动摄像机时，它会产生奇怪的照明效果。我必须使用投影/转换这个位置吗？查看矩阵？

```
uniform mat4 u_MVPMatrix;         
uniform mat4 u_MVMatrix;       

attribute vec4 a_Position;    
attribute vec4 a_Color;     
attribute vec3 a_Normal;    

varying vec4 v_Color;  

void main()         
{                         
 vec3 u_LightPos=vec3(0,0,-20.0);
 vec3 modelViewVertex = vec3(u_MVMatrix * a_Position); 
 vec3 modelViewNormal = vec3(u_MVMatrix * vec4(a_Normal, 0.0));     

 float distance = length(u_LightPos - modelViewVertex);           

  // Get a lighting direction vector from the light to the vertex.
  vec3 lightVector = normalize(u_LightPos - modelViewVertex);   

   // Calculate the dot product of the light vector and vertex normal. If the normal and light vector are
   // pointing in the same direction then it will get max illumination.
  float diffuse = max(dot(modelViewNormal, lightVector), 0.1);    

   // Attenuate the light based on distance.
   diffuse = diffuse * (1.0 / (1.0 + (0.25 * distance * distance))); 

   // Multiply the color by the illumination level. It will be interpolated across the triangle.
  v_Color = a_Color * diffuse;   

   // gl_Position is a special variable used to store the final position.
   // Multiply the vertex by the matrix to get the final point in normalized screen coordinates.
 gl_Position = u_MVPMatrix * a_Position;                         
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-14T05:25:28.803

对向量进行算术运算时，它们必须在同一坐标空间中。你从 u_LightPos （世界空间）中减去 modelViewVertex （视图空间），这会给你一个虚假的结果。

您需要决定是否要在世界空间或视图空间中进行光照计算（两者都应该有效），但您必须将所有输入转换到同一空间。

这意味着要么在世界空间中获取顶点/法线/光照位置，要么在视图空间中获取顶点/法线/光照位置。

尝试将您的 lightpos 乘以**视图**矩阵（不是模型视图），然后在计算中使用它而不是 u_Lightpos，我认为它应该可以工作。

# c# - 更新面板中用户控件内按钮的回发触发器

> ID：10577474
> 
> 赞同：9
> 
> 时间：2012-05-14T04:21:13.407
> 
> 标签：c#, asp.net, updatepanel, postback, ajaxcontroltoolkit

我在更新面板内放置了一个用户控件，即像这样。

```
<asp:UpdatePanel ID="testupdatepnl" runat="server" UpdateMode="Conditional">
        <ContentTemplate>
                        <uc1:TestControl ID="ctlTest" runat="server" />
        </ContentTemplate>
</asp:UpdatePanel> 
```

现在我在这个用户控件中放置了一个按钮，比如 Click。我想在按钮单击时回发整个页面。我试图添加这样的回发触发器

```
<Triggers>
    <asp:PostBackTrigger ControlID="clickButton" />
</Triggers> 
```

由于按钮位于用户控件内，因此在这样运行时出现错误。

有没有办法为此按钮进行回发。

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-05-14T06:39:16.933

从 HTML 中删除并将其`<Triggers>`添加到`PageLoad`事件

```
ScriptManager scriptManager = ScriptManager.GetCurrent(this.Page);
scriptManager.RegisterPostBackControl(WebUserControl11.FindControl("ButtonId")); 
```

**注意：从**[这里](http://www.dotnetspider.com/resources/29004-A-control-with-ID-button-could-not-be-found.aspx)学到的

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-08-07T05:08:41.750

您还应该注意，如果您使用的是 Ajax Control Toolkit。您可以将 ScriptManager 替换为 ToolkitScriptManager。

```
Dim btn As Button = CType(UserControl.FindControl("ButtonID"), Button)        
AjaxControlToolkit.ToolkitScriptManager.GetCurrent(Page).RegisterPostBackControl(btn) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-14T06:19:20.923

因为您用作触发器的按钮放置在更新面板内，并且在渲染后其客户端 ID 被更改。

使按钮可从用户控件访问并在服务器端声明触发器，例如

```
var ClickButton= ctlTest.FindControl("clickButton") as Button;

var trigger = new PostBackTrigger();
trigger.ControlID = ClickButton.UniqueID.ToString();
testupdatepnl.Triggers.Add(trigger); 
```

有关更多详细信息，请参阅以下线程 [使用 LoginView 触发 UpdatePanel 内的按钮](https://stackoverflow.com/questions/5558049/trigger-a-button-inside-a-updatepanel-with-a-loginview)

# php - 执行 PHP 代码的字符串变量

> ID：10577475
> 
> 赞同：0
> 
> 时间：2012-05-14T04:21:40.420
> 
> 标签：php, string, echo

我想要做的是从数据库中提取 html 和 PHP 代码，然后执行它。例如，我可能有：

```
<?php 
  $test = <<<END
    <p> <?php 
    echo time(); 
    ?> </p>
    END;
  echo $test;
?> 
```

我想要的是让 $test 打印

```
<p> 12:00PM </p>                  //right 
```

而不是打印：

```
<p> <?php echo time(); ?> </p>    //wrong 
```

当我使用回声功能时会发生这种情况。

请不要告诉我如何使用 JavaScript 或其他解决方法做同样的事情。而是坚持这个问题并记住该示例只是演示我的问题的示例。实际的代码要复杂得多。

我查看[了包含 PHP 代码的 Javascript 字符串变量，](https://stackoverflow.com/questions/2178287/javascript-string-variable-that-contains-php-code)但没有一个答案有效。

谢谢，

布雷特

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-14T19:27:59.147

我强烈建议不要做你要求做的事情。这有很多很好的理由。

正如其他人所说，这个问题的答案是使用`eval()`. 但是，`eval()`它有几个主要问题。

首先，从对该问题的评论进行跟进，通过它运行的代码执行速度明显慢于常规 PHP 代码。尽管 PHP 是一种脚本语言，但它确实进行了优化以加快运行速度。这些优化都不适用于 eval 块，因为脚本引擎在实际运行之前无法知道代码的外观。

不仅如此，从数据库加载代码也比使用常规`include()`语句从文件加载代码要慢。

其次，`eval()`这是您可能遇到的最大的安全问题之一。一条`eval()`语句将运行它给出的*任何*PHP 代码，这意味着攻击者可以操纵该代码将能够在您的服务器上做*任何事情。*简而言之，`eval()`代码中的单个语句可以将一个小黑客变成一个灾难性的黑客。

一种不涉及过多更改概念的替代解决方案是将 PHP 代码保存到文件而不是数据库中。这将允许您`include()`在适当的时候简化它，并消除上面讨论的速度问题。如果您愿意，您仍然可以使用数据库来存储它，并使用 cron 作业或类似的方法将其导出到缓存文件，或者您可以直接将其保存到文件中。

但是，这种解决方案不一定能消除安全风险。您仍然可以有效地运行任意代码，这仍然意味着黑客可以通过相对简单的黑客攻击造成很大的破坏。

因此，我建议重新考虑为什么需要允许将用户输入的 PHP 代码输入到您的软件中。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-05-14T04:24:25.400

您可以为此使用[eval](http://www.php.net/eval) ()

```
$test = <<<END
<p> <?php 
echo time(); 
?> </p>
END;

ob_start();
eval("?>$test");
$result = ob_get_clean(); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-14T05:16:08.190

像这样的东西可能有用...

```
<?php echo writedata($code_to_parse); ?>

<?php
function writedata($data){
    if(substr($data,0,2)=="?>"){
        eval($data);
    // eval will run & echo the code immediately, so return an empty $code
    $code="";
}else{
    $code="$data";
}
return $code;
}
?> 
```

现在，您可以通过一个函数调用处理纯 html 和混合 php/html。

样本数据：

```
?>Bonjour. The time now is <?php echo $timenow; ?> in Paris.

<div class="bluebox">Perfect day for swimming</div> 
```

使用 eval() 有一些副作用，记住它会在调用它时立即执行，因此有时会产生意想不到的结果。

# c# - 确保一些电子邮件按顺序送达，而另一些电子邮件随机送达

> ID：10577482
> 
> 赞同：1
> 
> 时间：2012-05-14T04:23:25.753
> 
> 标签：c#, multithreading, email

我正在尝试使用多线程方法同时发送多封电子邮件。这是我的描述：

我有 5 封电子邮件需要随机发送：

```
Email1
Email2
Email3
Email4
Email5 
```

可能会先发送 Email5，然后再发送 Email1 或 Email4。

我收到了客户的新要求：Email1,2,3 可能是随机发送的，但 Email4 必须在 Email5 之前发送（用户在 Email5 之前收到 Email4，我的意思是有些邮件需要按订单发送，有些是随机发送的）。

我不知道如何使用多线程方法来处理这个问题。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-14T04:35:23.837

[如果您使用任务并行库，使用ContinueWith](http://msdn.microsoft.com/en-us/library/dd537612.aspx)很容易满足这种要求

```
 var firstTask = new Task(() => SendEmail(4));
  var secondTask = firstTask.ContinueWith((t) => SendEmail(5));
  firstTask.Start(); 
```

另一种不使用 TPL 的方法可以使用 a`LinkedList`将必须按顺序发送的电子邮件链接在一起。创建一个`Queue<LinkedList<Email>>`. 您的工作线程消耗这些`Queue`项目，挑选 a `LinkedList`，然后将其链接起来发送每个`Email`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-14T04:41:29.453

如果您使用工作模式，则将工作队列拆分为有序和非有序（两个工作队列），并让序列队列仅由一个线程提供服务。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-14T04:29:12.723

分配优先级？但是除非您实际上拥有与邮件服务器的多个连接，否则您的邮件无论如何都会按顺序发送出去......

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-14T04:30:58.737

将信号量与每封电子邮件相关联，并获取电子邮件 5 的线程，并在电子邮件 4 发送电子邮件之前等待它的信号量。每个信号量都应该使用零许可进行初始化，并且线程在发送电子邮件后应该释放一个许可。您也可以使用互斥锁来做到这一点。

# java - 如果在两个 Java Web 应用程序之间实现会话共享，会话超时是否会受到影响

> ID：10577483
> 
> 赞同：0
> 
> 时间：2012-05-14T04:23:26.133
> 
> 标签：java, httpsession

如果我将部署和运行在 tomcat 中的专用机器上的一个 java web 应用程序的会话（HTTPSession）与部署和运行在 tomcat 中的单独机器上的其他 java web 应用程序共享，会话超时会受到影响吗？

我的意思是，如果我在具有相同会话的不同浏览器窗口中从一个应用程序跳转到另一个应用程序，第一个应用程序是否会超时，反之亦然？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-14T04:31:00.583

每个会话都由底层容器管理，因此两个容器不会进行通信以查看会话是否应该超时。

因此，即使同一会话正在另一个容器中使用并且仍然处于活动状态，您的 tomcat 可能会根据配置使您的会话超时。

此外，不推荐在 JVM 之间共享会话，因为并非所有容器都允许您这样做。我认为 WSAD 允许您这样做，但不是共享会话，而是建议您共享对象。

# tomcat - tomcat安装异常

> ID：10577494
> 
> 赞同：14
> 
> 时间：2012-05-14T04:25:07.827
> 
> 标签：tomcat, windows-7, installation

我正在尝试在 Windows 7 上安装 tomcat-7.0.27。然后单击 bin/startup.bat，出现一个窗口，我在最后一行看到“INFO：服务器启动时间为 761 毫秒”。然后我尝试检查“http”//localhost:8080”，但下面的信息显示：

```
HTTP Status 500 -

type Exception report

message

description The server encountered an internal error () that prevented it from fulfilling this request.

exception

org.apache.jasper.JasperException: java.lang.IllegalStateException: No output folder
    org.apache.jasper.servlet.JspServletWrapper.handleJspException(JspServletWrapper.java:585)
    org.apache.jasper.servlet.JspServletWrapper.service(JspServletWrapper.java:391)
    org.apache.jasper.servlet.JspServlet.serviceJspFile(JspServlet.java:390)
    org.apache.jasper.servlet.JspServlet.service(JspServlet.java:334)
    javax.servlet.http.HttpServlet.service(HttpServlet.java:722)
root cause

java.lang.IllegalStateException: No output folder
    org.apache.jasper.JspCompilationContext.createOutputDir(JspCompilationContext.java:738)
    org.apache.jasper.JspCompilationContext.getOutputDir(JspCompilationContext.java:196)
    org.apache.jasper.JspCompilationContext.getClassFileName(JspCompilationContext.java:581)
    org.apache.jasper.compiler.Compiler.isOutDated(Compiler.java:461)
    org.apache.jasper.compiler.Compiler.isOutDated(Compiler.java:425)
    org.apache.jasper.JspCompilationContext.compile(JspCompilationContext.java:639)
    org.apache.jasper.servlet.JspServletWrapper.service(JspServletWrapper.java:357)
    org.apache.jasper.servlet.JspServlet.serviceJspFile(JspServlet.java:390)
    org.apache.jasper.servlet.JspServlet.service(JspServlet.java:334)
    javax.servlet.http.HttpServlet.service(HttpServlet.java:722)
note The full stack trace of the root cause is available in the Apache Tomcat/7.0.27 logs.

Apache Tomcat/7.0.27 
```

然后我在窗口的每个开头都找到了这些信息：

```
java.util.logging.ErrorManager: 4
java.io.FileNotFoundException: C:\Program Files\apache-tomcat-7.0.27\logs\catalina.2012-05-14.log (Access is denied) 
```

谁能告诉我这里出了什么问题？

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2012-05-14T04:28:40.607

当您安装东西不够小心时，Windows 7 很容易遇到这样的麻烦。您必须确保 SYSTEM 用户对 Tomcat 文件夹具有完全访问权限，这样当 Tomcat 运行时，它可以在自己的目录中自由创建文件夹和文件。

* * *

## 回答 #2

> 赞同：18
> 
> 时间：2012-07-18T16:28:16.910

问题是运行 Tomcat 的用户在安装文件夹中缺少文件权限（读/写）。

解决方案

右键单击 Tomcat 文件夹（apache-tomcat-7.0.29），选择“属性”，转到“安全选项卡”，尝试完全控制您电脑中的任何用户配置文件，以确保安全。

然后，再次单击 C:\Program Files (x86)\Apache Software Foundation\apache-tomcat-7.0.29\bin\startup.bat 并等待应用程序“startup.bat”自行创建文件夹。

* * *

其他选项是手动（我手动创建了以下目录）：

*   apache-tomcat-7.0.14/work/Catalina/localhost：
*   apache-tomcat-7.0.14/work/Catalina/localhost/_
*   apache-tomcat-7.0.14/work/Catalina/localhost/docs
*   apache-tomcat-7.0.14/work/Catalina/localhost/examples
*   apache-tomcat-7.0.14/work/Catalina/localhost/host-manager
*   apache-tomcat-7.0.14/work/Catalina/localhost/manager
*   apache-tomcat-7.0.14/config/Catalina/localhost/
*   apache-tomcat-7.0.14/logs

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2013-05-18T20:34:14.077

什么对我有用：转到您的 tomcat 安装 bin 目录，对我来说：C:\Program Files\Apache Software Foundation\apache-tomcat-7.0.37\bin。右键单击“startup.bat”并选择“以管理员身份运行”

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2013-01-07T00:29:45.903

谷歌在搜索时将我指向这里：

```
HTTP Status 500 - java.lang.IllegalStateException: No output folder 
```

我是 Mac OS X 10.8.2 Mountain Lion 用户。我需要做的是，在去 usr/local 之后

```
sudo chown -R <YOUR_USERNAME> apache-tomcat-7.0.34 
```

当然，一切都发生在终端。您还应该**注意更改适合您的 apache tomcat 版本的文件夹名称中的数字。**

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2013-11-06T19:36:23.363

您没有在系统驱动器中创建文件夹所需的访问权限。

您可以通过以下方式解决此问题

1.  右键单击位于 apache 安装的“bin”文件夹中的“startup.bat”。

2.  点击“以管理员身份运行”

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2014-03-07T09:46:55.990

检查 CATALINA_HOME 环境变量是否设置为正确的 tomcat 路径

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2013-11-19T09:17:29.090

感谢您的解决方案。

这个问题在我的电脑中通过以下步骤解决。

1.  右键单击位于 apache 安装的“bin”文件夹中的“startup.bat”。

2.  点击“以管理员身份运行”

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2015-03-12T07:17:25.770

我遇到了同样的问题，但是可以通过管理权限轻松解决，只需使用管理权限打开命令提示符就可以了！！！希望能帮助别人..

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2013-11-14T20:54:37.130

如果这对您有用，有时工作目录只是处于错误状态，您可以通过删除它并允许 tomcat 从头开始​​创建一个新目录来修复它。

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2014-08-28T18:37:28.343

我在 Windows 8 上遇到了这个问题，并且运行“startup.bat”不起作用。

我通过转到我的 JazzTeamServer 文件夹（我正在安装 Jazz CLM），右键单击文件夹、属性、安全性、编辑并标记为您正在使用的组的完全控制来修复它。

之后，Tomcat 服务器能够创建它需要的所有文件夹。

希望这会有所帮助，这是我在 SO 中的第一个答案。;)

# facebook - Facebook、Twitter 和电子邮件无法使用 ShareKit

> ID：10577498
> 
> 赞同：0
> 
> 时间：2012-05-14T04:26:10.420
> 
> 标签：facebook, sharekit

我是一名新的 iOS 开发人员，我创建了一个应用程序，我想在其中分享 Facebook、Twitter 和电子邮件的链接。我正在使用 Xcode 4.2 和 iOS 5。我访问了很多网站并使用了很多示例代码，但我无法管理它。使用 ShareKit 库，我可以共享图像但无法共享链接。

任何人都可以分享我能够做到这一点的链接或示例源代码吗？提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-14T06:54:51.350

查看[ShareKit 2.0](https://github.com/ShareKit/ShareKit)演示应用程序。如需下载，请遵循[安装 wiki 指南](https://github.com/ShareKit/ShareKit/wiki/Installing-sharekit)。不再维护原始 ShareKit。

# javascript - 从移动到服务器的 Reddit 风格投票

> ID：10577499
> 
> 赞同：0
> 
> 时间：2012-05-14T04:26:19.003
> 
> 标签：javascript, html, mobile

我正在计划一个应用程序，其中本地服务器有一个项目列表，而移动用户有一个下载该列表的应用程序。然后，移动用户可以对列表项投赞成票或反对票，而且只能投一次票。我打算用 HTML5 和 JavaScript 编写代码。我对服务器和其他东西有点陌生，所以我想知道最好的方法来做到这一点，就移动用户获取列表视图并返回投票而言。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-14T04:35:27.673

您必须根据项目的可扩展性对服务器进行解码。

[Tomcat Apache](http://tomcat.apache.org/)可用于较少数量的服务器连接，而可使用[Glassfish](http://glassfish.java.net/)服务器以获得更高的可扩展性。

[Glassfish 和 Tomcat 的区别](http://www.wikivs.com/wiki/GlassFish_vs_Tomcat)

编辑：

要学习 RESTful Web 服务，[请参阅教程](http://rest.elkstein.org/)

[在 Eclipse 上安装 Apache 和轴](http://www.ibm.com/developerworks/webservices/library/ws-apacheaxis/section3.html)

# nsis - 如何在 NSIS 中使用/包含 StrContains

> ID：10577504
> 
> 赞同：0
> 
> 时间：2012-05-14T04:27:51.017
> 
> 标签：nsis

我是否需要包含特定的 .nsh 库或函数定义才能在 NSIS 中使用函数“StrContains”？

我一直在寻找图书馆的下载，但我似乎找不到它？

当我去编译这段代码时，我得到了编译错误：*“无效命令：${StrContains}”*

```
!include "LogicLib.nsh"

# Compile error below
!macro test
   ${StrContains} $0 $1 "abc"
!macroend

Section 
  DetailPrint ""
SectionEnd 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-14T08:28:56.593

您需要在代码中添加 NSIS wiki 的[StrContains 函数页面中显示的函数定义（在](http://nsis.sourceforge.net/StrContains)[字符串函数](http://nsis.sourceforge.net/Category%3aString_Functions)类别中）。

不要忘记最后一个`!define StrContains ...`能够调用它的语句`${StrContains}`

# android - 新活动启动时如何杀死线程以及如何覆盖之前的线程

> ID：10577507
> 
> 赞同：0
> 
> 时间：2012-05-14T04:28:02.280
> 
> 标签：android, android-intent

当当前活动空闲 10 秒时，我有大约 10 个活动，然后它应该返回主页

我在每个活动中使用的代码是

```
final Handler handler=new Handler();
final Runnable r = new Runnable()
{
                public void run()
                {

                    handler.postDelayed(this, 10000);
                    Intent intent = new Intent(Business_Personal.this,PrintoActivity.class);
                    startActivity(intent);
                    Thread.interrupted();
                }
            };

            handler.postDelayed(r, 10000);
            Thread thread = new Thread()
            {
                @Override
                public void run() {
                    try {
                        while(true)
                        {
                            sleep(1000);
                            handler.post(r);

                        }
                    } catch (InterruptedException e) {
                        e.printStackTrace();
                    }
                }
            }; 
```

如果我使用上面的代码，那么直到第 3 次活动它工作正常，但在第 3 次活动中，时间已经结束，它会回到主页

当我进入下一个活动时我需要代码它应该杀死前一个线程并创建一个新线程

要不然

覆盖之前的线程

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-14T04:38:29.527

您需要使用在 Activity 的 onDestroy 或 onPause 上设置为 false 的某个布尔值来停止线程。

```
而（线程需要）{
}

公共 onDestroy(){
  线程需要 = 假；
}

```

# jquery - 按下 Tab 键时如何停止在 keydown 上运行的 jQuery 函数

> ID：10577509
> 
> 赞同：1
> 
> 时间：2012-05-14T04:28:25.900
> 
> 标签：jquery

我是 jQuery 新手，还没有找到解决方案。

我有这个 HTML：

```
<input type="text" id="Box1" /><br />
<input type="text" id="Box2" /> 
```

和 jQuery：

```
$("#Box1").keydown(function () {
    $("#Box2").val("");
});
$("#Box2").keydown(function () {
    $("#Box1").val("");
}); 
```

这里的例子：http: [//jsfiddle.net/tv4my/](http://jsfiddle.net/tv4my/)

当您输入“Box1”然后开始输入“Box2”时，Box1 的内容被清除。这很好，但是如果按下 Tab 键，我不希望此函数运行，即，如果我按下 Box2 内的 Tab 键，我不希望 Box1 被清除。我如何用 jQuery 写这个？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-14T04:31:59.303

`e.preventDefault()`单击该键时使用：

```
$("input").keydown(function(e){
    if(e.keyCode == "9"){
        e.preventDefault();
    }
}); 
```

[在此处](http://jsfiddle.net/ranganadh/zMn2q/)检查 JSFiddle 。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-14T04:40:12.037

您需要检查用于启动事件的密钥：

```
$("#Box1").keydown(function (e) {
    // If the pressed key is not tab (9) then reset Box2
    if(e.keyCode !== 9){
        $("#Box2").val("");
    }
});
$("#Box2").keydown(function (e) {
    // If the pressed key is not tab (9) then reset Box1
    if(e.keyCode !== 9){
        $("#Box1").val("");
    }
}); 
```

# ruby-on-rails - 如何对多对多值求和？

> ID：10577511
> 
> 赞同：1
> 
> 时间：2012-05-14T04:28:42.467
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3, ruby-on-rails-3.1, collect

每个用户可以有很多资源，每个资源都有很多投票，每个投票都有一个价值属性，我想总结所有特定用户的资源。

如果我以语法不正确的方式输入它，我想要类似...

`@user.resources.votes.sum(&:value)`，但这显然行不通。

我相信我需要使用`collect`但我不确定？

这是我得到的最接近的，但它会打印出来，呵呵

`<%= @user.resources.collect { |r| r.votes.sum(&:value) } %>`

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-14T05:01:27.203

我建议`has_many :through`在 User 和 Vote 对象之间建立关系。像这样设置模型：

```
class User < ActiveRecord::Base
  has_many :resources
  has_many :votes, :through => :resources
end

class Resource < ActiveRecord::Base
  belongs_to :user
  has_many :votes
end

class Vote < ActiveRecord::Base
  belongs_to :resource
end 
```

完成此操作后，您可以简单地调用`user.votes`该集合并做任何您想做的事情。

有关`has_many :through`关系的更多信息，请参阅本指南： http: [//guides.rubyonrails.org/association_basics.html#the-has_many-through-association](http://guides.rubyonrails.org/association_basics.html#the-has_many-through-association)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-14T06:58:25.923

你怎么知道谁投票有一个 Vote 实例？您的投票模型必须具有`voter_id`字段和附加关联：

```
# in Vote.rb
belongs_to :voter, class_name: 'User', foreign_key: 'voter_id' 
```

在您的用户模型中：

```
# in User.rb
has_may :submited_votes, class_name: 'Vote', foreign_key: 'voter_id' 
```

所以，`@user.votes`（正如大卫安德伍德所提议的）会给你@user 资源的投票。并且`@user.submited_votes`会给你@user提交的投票。

仅使用 User <- Resource <- Vote 关系将不允许您将他的某些用户投票和对其资源的投票分开。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-14T04:35:22.780

总而言之，这应该有效或真正接近。

```
sum = 0
@user.resources.each do |r|
r.votes.each do |v|
    sum += v.value
end
end 
```

这可能对您有用：

```
@user.resources.map {|r| r.votes.sum(:value)}.sum 
```

你有多少条记录，我相信有一种方法可以将它推送到数据库级别，我必须检查一下，但如果只有几条记录，那么在 ruby​​ 中这样做可能就可以了

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-14T05:09:06.937

试试这个代码

```
@user.resources.map(&:votes).flatten.map(&:value).sum 
```

# c++ - 是否可以指示 GNU ld 打印链接期间需要哪些 .o 文件？

> ID：10577512
> 
> 赞同：1
> 
> 时间：2012-05-14T04:29:08.177
> 
> 标签：c++, ld, avr, avr-gcc

*一点背景知识：*我正在尝试为嵌入式传感器系统构建 AVR 二进制文件，并且我正在运行接近我的大小限制。我使用了一些外部库来帮助我，但是当每个库编译成一个对象时它们相当大。我想把它们拉成更小的对象，这样只有我需要的功能才链接到我的程序中。通过拆分一个大型库，我已经设法将二进制大小减少了 2k。

知道在游戏的每个阶段使用了哪些对象会很有帮助，这样我就可以更有效地拆分它们。有没有办法`ld`打印它正在链接的对象？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-26T17:46:22.443

我不确定*对象*级别，但我相信您可以使用and在*符号*级别解决这个问题。这应该摆脱所有未引用符号的代码，并向您显示已删除的符号，如果由于某种原因您决定返回目标文件级别并想要识别仅包含已删除符号的目标文件，这可能会很有用。`CFLAGS="-fdata-sections -ffunction-sections"``LDFLAGS="-Wl,--gc-sections -Wl,--print-gc-sections"`

更准确地说，我引用的编译器标志将要求编译器将每个函数或全局变量放在自己的一个部分中，然后`--gc-sections`链接器标志将删除所有未使用的部分。可能每个目标文件都包含自己的部分，即使其中的函数都共享一个部分。在这种情况下，仅链接器标志就应该满足您的要求：消除未使用的整个对象。gcc 手册指出编译器标志会增加对象大小，虽然我希望最终的可执行文件不应该受此影响，但我不确定，所以`LDFLAGS="-Wl,--gc-sections`无论如何你都应该尝试一下。

列出的选项名称可能是有用的关键字，可用于在 stackoverflow 上搜索有关如何减小二进制文件大小的其他建议。`gc-sections`例如，目前产生 62 场比赛。

# javascript - 如何在 Javascript 中捕获 printscreen 事件？

> ID：10577515
> 
> 赞同：3
> 
> 时间：2012-05-14T04:29:31.413
> 
> 标签：javascript, html, screenshot, dom-events

我正在尝试编写一个包含一些敏感内容的 Web 应用程序。我已经阻止了复制和粘贴。如何检测何时有人按下 printscreen 键，以便在按下时隐藏数据？

不要担心手机/相机/录屏软件，因为它们不是在环境中使用的。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2019-01-05T01:50:42.230

简短的回答是，您无法可靠地检测或干扰打印屏幕功能。这不是浏览器功能，而是用户系统的功能，因此在大多数情况下，事件会在您尝试检测它的环境之外触发。html、css 或 javascript 都无法侦听该事件，或阻止其默认设置以可靠的方式采取行动。您应该重新考虑保护您的内容的策略，并接受这样一个现实，即无论您做什么，人们总会有办法“窃取”它。

**编辑：**

我在想，您可以编写一个 java 小程序来检测打印屏幕事件触发，因为 java 可能有权访问系统事件。但我没有费心研究如何做到这一点，因为该功能取决于两件事 - 用户在其浏览器中安装并启用了 java，以及授予其安全权限的 java applet 去窥探系统事件。

只是出于兴趣：[https ://stackoverflow.com/a/29965963/4933137](https://stackoverflow.com/a/29965963/4933137)

# facebook - 我什么时候应该加载新的访问令牌？

> ID：10577520
> 
> 赞同：1
> 
> 时间：2012-05-14T04:30:31.327
> 
> 标签：facebook, cookies, oauth-2.0

我的应用在客户端使用 Facebook Javascript SDK 授权，授权用户应用从 Facebook API 获取访问令牌，使用带有签名请求和提供的 facebook cookie `code`，并将其存储到数据库中。

一切正常，但我想知道，什么时候应该刷新存储的访问令牌？如果用户更改了密码并再次登录/连接怎么办。

据我了解，现在她有了新的访问令牌，应用程序应该从 Facebook 加载它。但是我怎么能理解什么时候应该检查一个新的令牌呢？使用 facebook cookie 检查每个请求不起作用，因为每个用户每秒的请求很少（如果她没有更改密码，则事件）。或者也许我做错了什么？

我是说：

*   我已经在客户端授权用户
*   我有带有签名请求的 cookie
*   签名请求足以在服务器端授权用户（验证用户凭据）
*   当用户用户向我的应用发出请求时，我可以`access token`随时通过调用 Facebook API 来获取（因为我需要`code`来自签名的请求）。所以，当我没有存储`access token`或现有`access token`已过期时，我正在这样做。
*   `access token`只是存储在数据库中，可以随时在不同的线程中使用，可能几分钟后（意味着我们没有用户请求和带有签名请求的 cookie）
*   如果存储`access token`未过期，但在 facebook 端无效怎么办？我需要获取新`access token`的，但此时 cookie 已经消失了。

目前我只看到一种方法：将`code`签名请求存储到数据库中，当我们发现我们有 invalid`access token`时，尝试加载它。但我注意到这是正确的方法，并且在大多数情况下不太有用

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-14T06:37:37.827

你有客户端令牌和服务器令牌，客户端一个是短暂的（几个小时），服务器一个是长期的（60 天）。

客户端的令牌不应该过多打扰您，因为您可以轻松获得一个新令牌，如“[处理无效和过期的访问令牌](http://developers.facebook.com/docs/authentication/access-token-expiration/)”指南中所述：

> **使用 Javascript SDK 实现身份验证的桌面 Web 和移动 Web 应用程序**
> 
> 调用 FB.getLoginStatus() 或确保 status: true 在您调用 FB.init() 时设置，这意味着用户下次登陆您的应用程序并登录 Facebook 时，您将通过这些调用传递 authResponse 对象将包含一个新的、有效的访问令牌。
> 
> 在这种情况下，它只是用户使用您的应用程序的行为，它隐式地生成了一个新的访问令牌。

您保存在数据库中的服务器端令牌不能轻易复制，必须再次将用户发送到身份验证对话框：

> **实现服务器端身份验证流程的桌面 Web 和移动 Web 应用程序**
> 
> 在这种情况下，要获得新的访问令牌，您必须再次让用户通过完整的服务器端流程：即获得一个代码并将其交换为新的访问令牌。
> 
> 但是，假设用户没有取消对您的应用程序的授权，当您将用户重定向到 OAuth Dialog 时，不会提示用户重新授权您的应用程序，而是会立即重定向到您的 redirect_uri。这意味着重新认证过程对用户来说是透明的。

您当然可以将客户端令牌发送到服务器并保留它，但它非常没有意义，因为它是短暂的。另一种选择是使用[新端点在服务器端扩展](http://developers.facebook.com/roadmap/offline-access-removal/)**有效**的客户端令牌，然后将其持久化。

至于“如何知道何时获取新令牌”，在服务器端，当您发出 api 请求时，只需检查响应并查看是否返回错误，如果是，则它是什么（我添加的第一个 url 中有一个列表）。如果令牌已过期，则只需将用户再次发送到身份验证对话框（您可以将某种代码返回到客户端并从那里执行），然后将新令牌保存到数据库。

无需检查 cookie，它们在后台使用，但您不应该与它们有任何关系。

* * *

# 编辑

不要使用 cookie，它们在任何时候都不应该让您担心。

你应该做什么：

在服务器端，您应该按照[服务器端身份验证指南](http://developers.facebook.com/docs/authentication/server-side/)中的说明，获取“代码”并用令牌交换它。该令牌将有 60 天。

根据需要使用存储在数据库中的那个令牌（其他线程，什么不是），当你从 facebook 收到一个错误说令牌已过期时，只需将用户导航回身份验证对话框页面。

您不能使用“代码”来获取多个令牌，这样对您没有帮助。如果用户会话（和令牌）无效（由于各种原因），当您尝试发出 api 请求时，您仍然会从 facebook 收到错误消息，当这种情况发生时，只需再次将用户发送到身份验证对话框。

# javascript - 用户和服务器之间的 HTML5 同步

> ID：10577521
> 
> 赞同：0
> 
> 时间：2012-05-14T04:30:36.240
> 
> 标签：javascript, jquery, cakephp

我正在尝试创建一个 HTML5 应用程序，该应用程序将允许用户自动将文件从用户的计算机上传到我的服务器（类似于 Windows 的 Dropbox，其中文件传输在后台在计算机和服务器之间更新）。

用户将在一个文件夹中拥有大约 100 多个 .csv 文件。HTML5 应用程序将要求用户选择文件夹。之后，文件将在后台上传到服务器。

这在使用 WebSockets 或 FileStream 的 HTML5 中是否可行？任何建议将被认真考虑！谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-14T05:06:18.500

您可以通过使用 JWebSocket 框架来实现这一点。访问[https://jwebsocket.org/](https://jwebsocket.org/)。它有很多插件，其中一个插件是 FileUpload 插件。http://enapso.org/jwsForum219/posts/list/59.page。希望这会对你有所帮助。

# php - 在yii中如何在执行sql后获得成功消息

> ID：10577522
> 
> 赞同：0
> 
> 时间：2012-05-14T04:30:54.417
> 
> 标签：php, sql, yii

我需要知道如何在成功执行 sql 或错误执行失败消息后获取成功消息。我的示例如下

```
 `
     public function actionSql()
      {          
            $table_no='1';
            $employee='1';
            $status='1';
    $connection=Yii::app()->db;
       $sql="INSERT INTO orders_transaction (table_no,employee,status) VALUES(:table_no,:employee,:status)";

     $command=$connection->createCommand($sql);
     $command->bindParam(":table_no",$table_no,PDO::PARAM_STR);
     $command->bindParam(":employee",$employee,PDO::PARAM_STR);
        $command->bindParam(":status",$status,PDO::PARAM_STR);

    $command->execute();} ` 
```

执行后我需要知道该行是否成功插入。
我使用低于一个但没有使用它唯一的回显成功而不是失败

```
if($command->execute())
   {
    echo "Successful";
   }

   else {
      echo "ERROR";
        } 
```

所以我尝试了这个，它给**带有密码的本地主机的权限被拒绝错误“”**

```
 $result=mysql_query($sql);

    // if successfully insert data into database, displays message "Successful".
         if($result){
              echo "Successful";

                   }

            else {
               echo "ERROR";
                  } 
```

我希望你能理解我的问题。请给出任何建议或答案。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-14T04:41:59.003

```
Execute() 
```

返回受影响的行数（对于 INSERT、DELETE、UPDATE 等）。

```
$num = $command->execute(); 
```

这里 $num 将包含受影响的行数。

# jquery - 使用 addthis 分享按钮时网页的设计问题

> ID：10577533
> 
> 赞同：0
> 
> 时间：2012-05-14T04:32:32.617
> 
> 标签：jquery, asp.net, css, webforms, addthis

我正在开发一个具有英语和阿拉伯语版本的多语言网站。

英文版显示的文章出现在右侧，但是当以阿拉伯文版查看文章时，它会在左侧增加很多额外的空间。您可以通过查看浏览器底部的水平滚动条来注意到这一点。我无法弄清楚是什么原因造成的。我将不胜感激有关此的帮助。下面是浏览器的链接

[http://tinyurl.com/83s8n97](http://tinyurl.com/83s8n97)

网站采用 asp.net 4.0 webforms 设计。

当我从页面中删除此脚本/HTML 代码时，页面会出现在中间，两侧没有任何额外空间

```
<div style="width:100%;">                                      
<div class="addthissharewrapper">                                              
     <div class="addthis_toolbox addthis_default_style" style="width:102px;">
              <a class="addthis_button_facebook"></a>
               <a class="addthis_button_twitter"  ></a>
               <a class="addthis_button_compact"></a>
               <a class="addthis_counter addthis_bubble_style"></a>
                                    </div>
                                </div> 
                            </div>  

    <script type="text/javascript" src="http://s7.addthis.com/js/250/addthis_widget.js#pubid=ra-ddddddd"></script> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-14T05:16:43.037

首先明确这一点： -

您正在为相同的文章使用两个不同的文章 ID。对于您正在使用的英语：

```
http://tinyurl.com/cq7fv4n 
```

对于阿拉伯语，您正在使用：

```
http://tinyurl.com/83s8n97 
```

现在请检查这个；我发现问题出在这里：

*   `.at_a11y`（第 1 行）中有一个类`widget082.css`；如果我们`[left: -10000px !important;]`从类中删除，`[at_a11y]`则可以删除水平滚动。

我认为它会解决你的问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-07T14:34:12.017

覆盖样式表中的 at_a11y 类，如下所示：

```
.at_a11y {
    height: 1px !important;
    /*left: -10000px !important;*/
    left:0px !important; /* Change left attribute to resolve scrolling bug */
    overflow: hidden !important;
    position: absolute !important;
    top: auto !important;
    width: 1px !important;
} 
```

# memory-leaks - 垃圾收集器会导致内存泄漏吗？

> ID：10577534
> 
> 赞同：12
> 
> 时间：2012-05-14T04:32:50.560
> 
> 标签：memory-leaks, garbage-collection

如果我有一个垃圾收集器来跟踪每个分配的对象，并在它们不再具有对它们的可用引用时立即释放它们，你还会有内存泄漏吗？

考虑到内存泄漏是没有任何参考的分配是不是不可能的，或者我错过了什么？

编辑：所以我算作内存泄漏的是您在代码中不再有任何引用的分配。您仍然参考的大量累积分配不是我在这里考虑的泄漏。

我也只是在谈论普通的最先进的 GC，已经有一段时间了，但我知道像循环引用这样的情况不会把它们绊倒。我不需要任何语言的具体答案，这只是来自我与朋友的对话。我们谈论的是 Actionscript 和 Java，但我不在乎那些特定的答案。

Edit2：从它的声音来看，似乎没有任何原因代码可以完全失去引用分配的能力并且没有 GC 能够拾取它，但我仍在等待更多的权衡.

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-05-16T13:18:44.473

如果你的问题真的是这样的：

> 考虑到内存泄漏是没有任何参考的分配是不是不可能的，或者我错过了什么？

那么答案是“是的，那是不可能的”，因为正确实施的垃圾收集器将回收所有没有活动引用的分配。

但是，在（例如）Java 中肯定会出现“内存泄漏”。我对“内存泄漏”的定义是仍然有一个活动引用的分配（这样它就**不会**被垃圾收集器回收）**但**程序员不知道该对象是不可回收的（即：对于程序员，这个对象已经死了，应该被回收）。一个简单的例子是这样的：

> 对象A -> 对象B

在此示例中，ObjectA 是代码中正在使用的对象。然而，ObjectA 包含对 ObjectB 的引用，该引用实际上已失效（即：ObjectB 已被分配和使用，现在，从程序员的角度来看，已失效）但程序员忘记将 ObjectA 中的引用设置为 null。在这种情况下，ObjectB 已“泄露”。

听起来不是什么大问题，但在某些情况下这些泄漏是累积的。让我们假设 ObjectA 和 ObjectB 实际上是同一个类的实例。每次使用这样的实例时，都会发生程序员忘记将引用设置为 null 的问题。最终你会得到这样的结果：

> 对象A -> 对象B -> 对象C -> 对象D -> 对象E -> 对象F -> 对象G -> 对象H -> 等等...

现在 ObjectB 到 ObjectH 都被泄露了。像这样的问题（最终）会导致你的程序崩溃。即使使用正确实施的垃圾收集器。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-17T00:02:26.003

要确定程序是否存在内存泄漏，必须首先定义什么是泄漏。如果存在某些状态`S`和一系列输入，我会将程序定义为存在内存泄漏，`I`例如：

1.  如果程序处于状态“S”并且接收到输入“I”，它仍将处于状态“S”（如果它没有崩溃），但是......
2.  重复上述序列“N”次所需的内存量将无限增加。

完全在垃圾收集框架内运行的程序绝对有可能出现上述定义的内存泄漏。发生这种情况的一种常见方式是使用事件订阅。

假设一个线程安全的集合公开了一个`CollectionModified`事件，`IEnumerator<T>`其`IEnumerable<T>.GetEnumerator()`方法返回的在创建时订阅该事件，并在`Dispose`; 即使在修改集合时，该事件也用于允许枚举继续进行（例如，确保在整个枚举过程中持续存在于集合中的对象将仅返回一次；在其中一部分期间存在的对象将不超过一次返回） . 现在假设创建了该集合类的长期实例，并且某些特定输入将导致它被枚举。如果`CollectionModified`事件持有对每个 non-disposed 的强引用`IEnumerator<T>`，那么重复枚举集合将创建和订阅无限数量的枚举器对象。内存泄漏。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-14T04:42:14.120

内存泄漏不仅仅取决于垃圾收集算法的效率，如果您的程序保留了具有较长生命周期的对象引用，例如在没有使用的实例变量或静态变量中，您的程序就会发生内存泄漏。

引用计数存在循环引用含义的已知问题

```
Object 1 refers to Object 2 and Object 2 refers to Object 1 
```

但没有其他人引用对象 1 或对象 2，在这种情况下引用计数算法将失败。

由于您正在研究垃圾收集器本身，因此值得一读[不同的实现策略](http://en.wikipedia.org/wiki/Garbage_collection_%28computer_science%29)。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-17T15:16:57.607

您可能会以另一种方式使用 GC 导致内存泄漏：如果您使用[保守的垃圾收集器](http://en.wikipedia.org/wiki/Garbage_collection_%28computer_science%29#Precise_vs._conservative_and_internal_pointers)，天真地扫描内存并且对于看起来像指针的所有内容，不释放它“指向”的内存，您可能会留下无法访问的内存分配。

# regex - 如何在 CakePHP 中验证 10 位电话号码（仅限数字和空格）？

> ID：10577535
> 
> 赞同：-2
> 
> 时间：2012-05-14T04:32:57.250
> 
> 标签：regex, validation, cakephp

我希望验证一个 10 位数的电话号码，并在 CakePHP 中每个数字段之间最多允许四个空格。我该怎么做？

有效输入示例：

*   04 123 123 34
*   0266 234 234
*   0266123123
*   02 66 55 12 12

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-14T04:36:11.133

此验证对我有用-希望此答案对其他人有所帮助。如果您有改进，请发布它们。

```
'phone' => array(
    'phone-1' => array(
        'required'   => true,
        'allowEmpty' => false,
        'last'       => true,
        'rule'       => 'notEmpty',
        'message'    => 'This field cannot be left blank'
    ),
    'phone-2' => array(
        'last'       => true,
        'rule'       => array('minLength', 10),
        'message'    => 'This field has a minimum length of 10 characters'
    ),
    'phone-3' => array(
        'last'       => true,
        'rule'       => array('maxLength', 14),
        'message'    => 'This field has a maximum length of 14 characters'
    ),
    'phone-4' => array(
        'last'       => true,
        'rule'       => array('phone', '/^[0-9]( ?[0-9]){8} ?[0-9]$/'), 
        // start and end in a digit and require 8 digits inbetween (so total of 10 digits required).
        // allow a single space between any digit (so this is valid "0 1 2 3 4 5 6 7 8 9" ... 19 characters ... but our minLength and maxLength validation protects us from this)
        // minLength 10 means "0123456789" is the shortest valid input.
        // maxLength 14 means "01 23 45 67 89" is the most spaced we can be (i.e. max 4 spaces allowed... they could be anywhere in the string e.g. "12 123 123 1 1") 
        // http://en.wikipedia.org/wiki/Telephone_numbers_in_Australia
        'message'    => 'Please enter a valid 10 digit phone number (digits and spaces only)'
    )
), 
```

# python - 如何追加到字典中的列表？

> ID：10577542
> 
> 赞同：0
> 
> 时间：2012-05-14T04:34:34.027
> 
> 标签：python, list, dictionary

我可以附加到字典中的列表吗？

```
test = {'food' : 'apple'} 
```

是否有添加命令并将`'banana'`其转换为

```
test = { 'food': ['apple','banana'] } 
```

谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-14T04:37:49.910

不，因为它首先不是一个列表。

```
test['food'] = [test['food'], 'banana'] 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-05-14T04:38:39.763

您需要创建一个`dict`where`values`列表：

```
test = {'food' : ['apple']}
test['food'].append('banana') 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-05-14T04:37:43.763

最简单的解决方案就是将哈希值设为一个列表，该列表可能只包含一个元素。然后，例如，您可能有这样的事情：

```
test = {'food' : ['apple']}
test['food'].append('banana') 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-14T04:39:52.320

我建议[`defaultdict`](http://docs.python.org/library/collections.html#collections.defaultdict)在这种情况下使用 a ，处理列表字典非常简单，因为每次修改条目时都不需要两个单独的案例：

```
import collections

test = collections.defaultdict(list)

test['food'].append('apple')
test['food'].append('banana')

print test
# defaultdict(<type 'list'>, {'food': ['apple', 'banana']}) 
```

# oracle - dbms_sql.to_cursor_number - 获取 SYS_REFCURSOR 的无效游标错误

> ID：10577543
> 
> 赞同：0
> 
> 时间：2012-05-14T04:34:38.440
> 
> 标签：oracle, cursor, sys-refcursor

我有以下用于创建表和视图的代码。

```
create table test_company
(
    comp_id number
    , comp_name varchar2(500)
)
;
insert into test_company values(1, 'CompanyA');
insert into test_company values(2, 'CompanyB');
insert into test_company values(3, 'CompanyC');
create or replace view test_company_view as select * from test_company; 
```

我有以下代码用于光标测试。但是`dbms_sql.to_cursor_number`出现错误`ORA-01001: invalid cursor`

```
set serveroutput on;
declare
    reader test_company_view%ROWTYPE;
    datacursor SYS_REFCURSOR;
    v_cursor_id number;
begin
    open datacursor for select * from test_company_view;
    v_cursor_id := dbms_sql.to_cursor_number(datacursor); -- ERROR: invalid cursor
    loop fetch datacursor into reader;
        exit when datacursor%NOTFOUND;
        dbms_output.put_line(reader.comp_id);
    end loop;
    close datacursor;
end; 
```

我做错了什么？感谢您的帮助！

我试过了`strongly-typed REF CURSOR`，`weakly-typed REF CURSOR`但他们得到了同样的错误。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-14T10:51:41.920

从[文档](http://docs.oracle.com/cd/B28359_01/appdev.111/b28370/dynamic.htm#BHCBJGEH)中：

> 将 REF CURSOR 变量转换为 SQL 游标编号后，本机动态 SQL 操作无法访问它。

这不是`dbms_sql.to_cursor_number`引发错误，而是`fetch datacursor into reader`因为`datacursor`无法再访问。

# java - 如何将位图图像转换为可绘制图像，以便将其显示在另一个位图图像上

> ID：10577548
> 
> 赞同：0
> 
> 时间：2012-05-14T04:35:35.493
> 
> 标签：java, android

**我有一个扩展视图的类...在其中我有两个位图图像以显示一个在另一个上....为此我正在尝试将一个位图图像转换为可绘制的图像但它在第一个图像上显示了什么我正在尝试这是.....**

```
public class ShowCanvas extends View {

Bitmap CanvasBitmap;
Bitmap ScaledBitmap;
Bitmap smallbitmap;
private static final int INVALID_POINTER_ID = -1;

private Drawable mImage;
private float mPosX;
private float mPosY;

private float mLastTouchX;
private float mLastTouchY;
private int mActivePointerId = INVALID_POINTER_ID;

private ScaleGestureDetector mScaleDetector;
private float mScaleFactor = 1.f;

public ShowCanvas(Context context) {
    super(context);
    // TODO Auto-generated constructor stub

    ScaledBitmap = DrawView.scaled;

**when i get the image from drawable it shows over the first one...** 
```

mImage = getResources().getDrawable(R.drawable.dress01);

**但是当我使用它时，它会显示图像...**

mImage = new BitmapDrawable(getResources(), Dress.bitmap);

```
 System.out.println("Drawable" + mImage);

    int X = mImage.getMinimumWidth();

    int Y = mImage.getIntrinsicHeight();

    System.out.println(" Rough" + X + "\t" + Y);

    mImage.setBounds(0, 0, mImage.getIntrinsicWidth(),
            mImage.getIntrinsicHeight());

}

public void setBitmap(Bitmap bitmap) {
    // TODO Auto-generated method stub
    CanvasBitmap = bitmap;

    System.out.println("CanvasBitmap" + CanvasBitmap);

    int X = CanvasBitmap.getHeight();
    int Y = CanvasBitmap.getWidth();

    System.out.println("CanvasBitmap " + X + "\t" + Y);

}

@Override
protected void onDraw(Canvas canvas) {
    // TODO Auto-generated method stub
    Paint mpaint = new Paint();
    canvas.save();

    canvas.drawBitmap(ScaledBitmap, 0, 0, mpaint);

    mImage.draw(canvas);

    Log.i("Debug", "mImage.draw(canvas)");

    canvas.restore();

} 
```

}

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-14T04:45:45.127

```
Drawable d =new BitmapDrawable(bitmap); 
```

使用它来将位图图像转换为可绘制的。

# iphone - 当用户在文本字段中输入其他数字值时如何显示警报

> ID：10577549
> 
> 赞同：0
> 
> 时间：2012-05-14T04:35:42.400
> 
> 标签：iphone, objective-c, xcode

我有 iphone 应用程序，我在其中输入任何数值，例如 10 2 0 1 0.2 等，如果用户输入任何文本，它应该提醒输入数字，而不是这个。

```
 UIAlertView * alert = [[UIAlertView alloc] initWithTitle:@"Error" message:@"Value Must Be In Number " delegate:nil cancelButtonTitle:@"OK" otherButtonTitles:nil];
    [alert show];
    [alert release]; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-14T04:54:42.617

试试这个代码：

```
- (BOOL)textFieldShouldReturn:(UITextField *)textField
{
    if (textField==txtMobileNo) 
    {
        [self validatePhone];
    }else
    {
        [textField resignFirstResponder];

    }
    // called when 'return' key pressed. return NO to ignore.
    return YES;
}

- (BOOL) validatePhone
{
    NSString *phoneRegex = @"^+(?:[0-9] ?){6,14}[0-9]$"; 
    NSPredicate *phoneTest = [NSPredicate predicateWithFormat:@"SELF MATCHES %@", phoneRegex]; 
    if ([phoneTest evaluateWithObject:txtMobileNo.text] == YES) 
    {
        NSLog(@"proper phone nO ");        
        return YES;   
    }
    else
    {
        UIAlertView *alert=[[UIAlertView alloc] initWithTitle:nil message:@"Please,Enter Your Person proper phone no" delegate:self cancelButtonTitle:@"Dismiss" otherButtonTitles:nil  ];
        [alert show];
        [alert release];
        NSLog(@"phone no. not in proper format");
        return NO;
        [txtMobileNo becomeFirstResponder];

    }  
} 
```

我希望你有帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-14T04:42:26.140

这会破坏应用程序，不是吗？您要查看的是 UITextfield 委托方法。将您的 viewController 设置为 textields 委托，并使其响应 UITextFieldDelegate 协议。

我将实现 textField:shouldChangeCharactersInRange:replacementString 方法并检查 replacementString 是否有不需要的字符。

但是，如果那里包含不需要的字符，我想我只会返回 NO，而不是显示警报。然后，当用户输入的内容不是您想要的内容时，什么也不会发生。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-14T04:45:00.383

您验证输入的字符并在此委托中执行您的逻辑，

```
- (BOOL)textField:(UITextField *)textField shouldChangeCharactersInRange:(NSRange)range replacementString:(NSString *)string{

// your logic to restriction goes here.like check the entered char and through alert
}

-(BOOL) validateNumericValue:(NSString*) textValue
{   
    NSNumberFormatter* numberFormatter = [[[NSNumberFormatter alloc] init] autorelease];
    NSNumber* number = [numberFormatter numberFromString:textValue];

    if (number != nil) 
    {
        return YES;
    }
    return NO;
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-14T04:50:47.727

您可以使用以下方法检查它是否是一个数字：-

```
NSString *yourString= @"121212";
NSCharacterSet *decimalNUmSet= [NSCharacterSet decimalDigitCharacterSet];
BOOL isNum= ([[yourString stringByTrimmingCharactersInSet:decimalNUmSet] isEqualToString:@""] || 
                      [[yourString stringByTrimmingCharactersInSet:decimalNUmSet] isEqualToString:@"."]); 
```

这里的第二部分也包括十进制数。

另一种方法是向用户显示一个数字键盘，以便他只能输入数字。

# php - 从 mysql 表返回类别 id

> ID：10577551
> 
> 赞同：0
> 
> 时间：2012-05-14T04:36:38.397
> 
> 标签：php, mysql, codeigniter

我正在使用以下查询从“地点”表中返回所有“活动”条目。每个作者也可以包含在一个类别（cat_id）中，我也想返回它以进行排序。$user_id 代表登录用户的 id，cat_id 应该只在 userid = $user_id 的地方返回。我尝试了几件事，但似乎无法使其正常工作。下面的查询是有效的，但如果用户属于多个类别，它会返回两次条目。

```
$active = 1;
$query_str = "SELECT a.*,b.user_id,c.username,c.fbook, d.cat_id FROM place a
LEFT OUTER JOIN wait b ON a.id=b.post_id AND b.user_id='$user_id'
JOIN users c ON a.userid=c.id
LEFT OUTER JOIN user_cat d ON d.userid='$user_id' AND d.user_id=a.userid
WHERE ACTIVE = ? ORDER BY a.date desc";
$q = $this->db->query($query_str, $active); 
```

user_cat 表

```
+-----+--------+--------+---------+-----------------+
| id  | userid | cat_id | user_id | fbid            |
+-----+--------+--------+---------+-----------------+
| 295 |    268 |     52 |     277 | 100001077604247 | 
| 296 |    268 |     52 |     271 | 100000021742637 | 
| 297 |    268 |     53 |     276 |               0 | 
| 298 |    268 |     53 |     272 | 100000038821713 | 
| 299 |    268 |     53 |     275 |               0 | 
+-----+--------+--------+---------+-----------------+ 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-14T07:50:35.207

将 user_cat 表上的联接更改为

```
LEFT JOIN (select userid, cat_id from user_cat group by user_id) AS d ON d.userid='$user_id' AND d.user_id=a.userid 
```

这可能会有所帮助

# video - 同时为环聊应用使用多个视频输入

> ID：10577555
> 
> 赞同：1
> 
> 时间：2012-05-14T04:37:31.413
> 
> 标签：video, hangout

我有兴趣为 Google 视频群聊开发一个简单的应用程序，该应用程序允许用户使用他正常的内置网络摄像头拍摄他的脸，而辅助 USB 连接的网络摄像头同时拍摄其他内容，并显示在应用程序屏幕中。是否可以使用环聊 api 做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-18T18:13:40.940

Google+ 环聊确实支持应用程序中的多个网络摄像头供稿实例。但是，摄像机选择是全局配置，因此您将无法做您想做的事情。此外，环聊插件不允许从一台计算机打开多个环聊。因此，为了完成来自两个网络摄像头的多个馈送，您显然可以尝试使用两台计算机（并使用两个不同的 id 登录）或创建一个虚拟机并以不同用户身份加入 VM 内。

# java - OOP 继承执行

> ID：10577557
> 
> 赞同：3
> 
> 时间：2012-05-14T04:37:36.837
> 
> 标签：java, oop, class

为什么执行 TestClass.main() 输出 202 202 101？

```
class BaseClass
{
    int data = 101;
    public void print()
    {
        System.out.print(data + " ");
    }
    public void fun()
    {
        print();
    }
}
class SubClass extends BaseClass
{
    int data = 202;
    public void print()
    {
        System.out.print(data + " ");
    }
}
class TestClass
{
    public static void main(String[] args)
    {
        BaseClass obj = new SubClass();
        obj.print();
        obj.fun();
        System.out.print(obj.data);
    }
} 
```

由于我对 OOP 的了解很差，我认为执行必须是这样的：

1- obj.print(); 从子类打印 202

2- 因为没有 obj.fun(); 子类中的方法它调用父方法，所以输出应该是 101

3- System.out.print(obj.data); 应该打印 202，因为该值在子类中被覆盖。

所以我认为输出是 202 101 202 但不是，你能解释一下为什么吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-14T04:42:00.837

> 由于没有 obj.fun(); 子类中的方法它调用父方法，所以输出应该是 101

实际上，它为 调用超类`fun`，但超类调用`print`，并且由于`print`被覆盖，覆盖版本（在子类中）被调用。

> System.out.print(obj.data); 应该打印 202，因为该值在子类中被覆盖。

变量不会被覆盖，而是被子类隐藏，如`obj`声明为`BaseClass`，它直接访问它的`data`属性。与方法调用不同，这是在编译时决定的。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-14T04:40:40.223

因为方法是多态的，而字段不是

如果你删除

```
int data = 101; 
```

从你`BaseClass`那里它不会编译

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-14T04:45:58.527

诀窍在于决定执行哪种方法。该选择是根据对象实例的类型做出的。在您的情况下， obj 是 a`SubClass`并且每次调用`print()`都会执行`SubClass`. 这种机制[在 OOP 中称为多态性](http://en.wikipedia.org/wiki/Polymorphism_in_object-oriented_programming)。

我建议您不要混合方法和变量，而是只对方法进行一些测试。代码基本相同，具有相同的多态行为，但没有变量。

```
class BaseClass
{
    public void print()
    {
        System.out.print(101 + " ");
    }
    public void fun()
    {
        print();
    }
}
class SubClass extends BaseClass
{
    public void print()
    {
        System.out.print(202 + " ");
    }
}
class TestClass
{
    public static void main(String[] args)
    {
        BaseClass obj = new SubClass();
        obj.print();
        obj.fun();
    }
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-14T04:43:59.217

1 和 2 - 方法是多态的 - 方法 from`base class`将使用方法 from `sub class`，**如果可以**的话，如果你有参考`sub class`

3 - 字段不是多态的。它取自参考类型。

# iphone - 表格视图中的分组单元格在下一节标题之前具有半透明区域/填充。我该如何改变呢？

> ID：10577570
> 
> 赞同：0
> 
> 时间：2012-05-14T04:39:48.310
> 
> 标签：iphone, ios, uitableview

我正在毫不掩饰地编辑它以使其恢复正常-我仍然对此感到困惑！:)

我有一个分组的表格视图。我有自定义标题视图，用户可以点击它来展开该部分中的单元格（见下文 - 抱歉，但我不得不混淆单元格中的文本）。

![在此处输入图像描述](../Images/2dc80448e63327f8e1df3bae5c04ad0d.png)

当我点击一个部分标题时，该部分的单元格将通过顶部动画插入/删除。问题是，我可以看到单元格在一个我用黄色突出显示的小区域中短暂地动画到它们的正确位置。在示例中，我在以黄色突出显示的区域中简要地看到了蓝色单元格。

对于包含单元格的任何部分，都会出现此半透明区域。没有细胞的部分没有这个半透明区域。

节标题视图以红色突出显示。上一节的最后一个单元格和下一个标题视图之间似乎有一些空间或填充。

这个区域是什么，我如何访问它以更改属性使其不透明？即，我不想看到任何单元格“飞过”该区域以到达其指定区域。

如果我切换到非分组，则没有问题 - 单元格动画进出，而不会在其他任何地方的背景中看到。

任何人都可以帮助我吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-28T04:33:24.640

这两种方法`UITableViewDelegate`可能会对您有所帮助：

```
- (UIView *)tableView:(UITableView *)tv viewForFooterInSection:(NSInteger)section;
- (CGFloat)tableView:(UITableView *)tv heightForFooterInSection:(NSInteger)section; 
```

并在`UITableView`：

```
@property(nonatomic) CGFloat sectionFooterHeight 
```

显式返回它们将使您能够更好地控制表格视图中的填充。

# sql - Oracle：将数据插入表空间表的权限不足

> ID：10577573
> 
> 赞同：0
> 
> 时间：2012-05-14T04:40:24.393
> 
> 标签：sql, oracle, tablespace

我对这一切有点陌生......我想创建一个包含我所有表和索引的新表空间。

首先是表空间代码..

```
create tablespace  Sales_T  
datafile      'C:\oracle\product\10.2.0\oradata\project\dataexample.dbf'  
size 100m 
autoextend on next 100m; 
```

然后将在此空间上分配的用户：

```
create user app_admin identified by "p4ss" default tablespace
sales_T temporary tablespace temp; 

grant connect, resource to app_admin; 

grant dba to app_admin; 
```

登录app_admin用户，我可以创建表，但不能查询或插入数据，我需要授予哪些权限？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-14T04:46:10.113

用这个

```
grant imp_full_database to p4ss; 
```

这将允许您访问您的数据库并让您查询它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-09-23T14:32:43.833

配额可能是问题：

```
sql>select username,tablespace_name,max_bytes from dba_ts_quotaS WHERE USERNAME='p4ss';

no rows selected
quotas are not allocate for p4ss user

sql> alter user p4ss quota unlimited on sales_T;

sql>select username,tablespace_name,max_bytes from dba_ts_quotaS WHERE USERNAME='p4ss';

USERNAME                       TABLESPACE_NAME                 MAX_BYTES
------------------------------ ------------------------------ ----------
P4SS                           SALES_T                                 -1 
```

-1 表示无限制

# macos - 问：OS X 中的终端脚本

> ID：10577576
> 
> 赞同：0
> 
> 时间：2012-05-14T04:40:58.653
> 
> 标签：macos

这是一个关于旧帖子的问题。

原始链接在这里：

[OSX 中的终端脚本](https://stackoverflow.com/questions/4187124/terminal-scripting-in-osx)

khachik 建议的文件是：

```
 #!/bin/sh

     show=`defaults read com.apple.Finder AppleShowAllFiles 2>/dev/null`

    if [ "$show" == "TRUE" ]; then
    defaults write com.apple.Finder AppleShowAllFiles FALSE
    else # here we come, if it is FALSE or is empty (the default)
    defaults write com.apple.Finder AppleShowAllFiles TRUE
    fi

    killall Finder 
```

我通过在 TextWrangler 中输入它并将其保存为带有“.command”后缀的文本文件来实现这一点。它作为可双击的例程运行，在运行时会打开一个新的终端窗口。

我最初开始在终端的“纳米”编辑器中输入它，但不知何故消失了，终端提示变成了一个插入符号（“>”）。我假设 Mac 的一种内置语言已被激活。我完成了输入，但它不会运行。

我的问题是 a) 上面的脚本是什么语言的？b) 有没有办法知道终端激活了哪种语言？我输入了“哪种语言”，但没有得到答案。谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-14T05:44:16.890

这是当您输入多行命令的一部分时 bash 使用的提示符，它要求输入下一行。基本上，你开始了一些你还没有完成的事情。可能是您没有关闭报价、`if`声明或类似内容。

尝试键入`"`并按回车键，您会看到该提示。键入另一个`"`并再次按回车，它会抱怨一个无效的命令（并返回到正常提示）。

# forms - 如何在 Sencha Touch 2 中使用 JsonP 提交表单？

> ID：10577578
> 
> 赞同：2
> 
> 时间：2012-05-14T04:41:00.687
> 
> 标签：forms, sencha-touch, jsonp, extjs, sencha-touch-2

我正在使用 Sencha Touch 2 编写一个应用程序，它在从 Web 访问时工作得很好。当我为 iPhone 构建它并将 url 从本地 url (../services/myservice.php) 更改为远程 url (http://remoteurl.com/services/myservice.php) 时出现了问题

我开始收到跨域错误：

```
**XMLHttpRequest cannot load http://example.com/services/userRegister.php?_dc=1336972603884\. Origin http://localhost is not allowed by Access-Control-Allow-Origin.** 
```

还有想问一下有没有办法使用jsonp提交表单，所以我没有这个问题了。

这是我的表单代码：

```
Ext.define('RegistroMovil.view.Register',{
extend: 'Ext.form.Panel',
xtype: 'register',
requires:[
    'Ext.form.FieldSet',
    'Ext.form.Email'
],
config: {
    title: 'Register',
    iconCls: 'user',
    url: 'http://example.com/proys/congreso/services/userRegister.php',
    items: [
    ... 
```

以及提交表单的按钮代码：

```
{
            xtype: 'button',
            text: 'Register',
            handler: function(){
                this.up('register').submit({
                    success: function(f, a){
                        alert('Your id: ' + a.id);
                        f.reset();
                    }
                });
            }
        }, 
```

非常感谢你！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-14T05:09:17.487

[由于跨域资源共享](https://stackoverflow.com/questions/8074665/cross-origin-resource-sharing-with-credentials)策略，您收到上述错误。

在按钮的`tap`事件处理程序上`submit`，您可以使用 an`Ext.Ajax.request();`但我觉得这也会导致您遇到相同的错误。

例如

```
Ext.Ajax.request({
  values : paramValues // values from form fields..
  url: '.../test.php',

  success: function(response) {
    console.log(response.responseText);
  }

  failure: function(response) {
    console.log(response.responseText);
  }
}); 
```

所以，最好写一个`Ext.util.JSONP.request()`来处理表单`submit`。

> 请注意，如果您要从与运行页面的原始域不同的域中的页面检索数据，则必须使用此类，因为相同的原始策略。

例如

```
Ext.util.JSONP.request({
      params: paramValues // values from form fields..
      url: '.../test.php',
      callbackKey: 'callback',
      scope: 'this',
      success: function(response) {
        console.log(response.responseText);
      }

      failure: function(response) {
        console.log(response.responseText);
      }
}); 
```

# fadein - 黑色背景上的褪色文本

> ID：10577580
> 
> 赞同：0
> 
> 时间：2012-05-14T04:41:14.190
> 
> 标签：fadein

我有以下淡入淡出代码，它允许我将文本从白色淡入黑色，但在我的网站上，我有一个背景，需要将它从黑色淡入白色，谁能帮忙..

```
<html>
<head>
<title>Fading Text Example</title>
<script language="javascript"> 
var hcolor=255;
function Fade(direction) {
obj=document.getElementById("head1");
hcolor += direction;
if (hcolor >= 0 && hcolor < 256) {
hex=hcolor.toString(16);
if (hex.length==1) hex="0" + hex;
obj.style.color="#" + hex + hex + hex;
window.setTimeout("Fade(" + direction + ");",1);
}
}
</script>
</head>
<body onLoad="Fade(1);">
<h1 ID="head1" style="color:#FFFFFF;">
Fading Text Example</h1> 
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-14T04:49:13.517

似乎该函数已经包含指定方向的能力，只需传入 -1 而不是 1，并将初始值设置`hColor`为 0。在下面的节点我还稍微编辑了格式以清理变量名称并使其稍微干净/ 更合规。

```
<html>
    <head>
        <title>Fading Text Example</title>
        <script language="text/javascript"> 
            var hColor=0;
            function fade(direction) {
                obj=document.getElementById("head1");
                hcolor += direction;
                if ((hColor >= 0) && (hColor < 256)) {
                    hex=hColor.toString(16);
                    if (hex.length==1) hex="0" + hex;
                    obj.style.color="#" + hex + hex + hex;
                    window.setTimeout("fade(" + direction + ");",1);
                }
            }
        </script>
    </head>
    <body onload="fade(-1);">
    <h1 id="head1" style="color:#FFFFFF;">Fading Text Example</h1> 
</body> 
```

# asp.net-mvc-3 - 在路由声明中转换动作名称

> ID：10577582
> 
> 赞同：0
> 
> 时间：2012-05-14T04:41:49.157
> 
> 标签：asp.net-mvc-3

我想知道是否有办法在 MVC3 中声明路由，以便路由“zone1/{controller}/{action}”指向`{controller}.zone1{action}`方法，“zone2/{controller}/{action}”指向`{controller}.zone2{action}`方法，例如。所以这基本上是根据路由转换目标动作名称。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-14T05:13:05.330

查看属性路由项目。您可以在您的方法中指定我觉得更容易阅读的路线。这是一个不错的简介：http: [//gregorsuttie.com/2012/01/12/attributerouting-for-mvc/](http://gregorsuttie.com/2012/01/12/attributerouting-for-mvc/)

您也可以编写自己的自定义路由处理程序，但我不相信您可以在没有一些自定义代码的情况下做您想做的事。不过，我在这里可能是错的。但是，属性路由项目应该可以很好地满足您的需求。

# php - 我们可以在 PHP 中的一行上做多个爆炸语句吗？

> ID：10577588
> 
> 赞同：7
> 
> 时间：2012-05-14T04:42:44.607
> 
> 标签：php, explode

我们可以在 PHP 中做多个explode() 吗？

例如，要做到这一点：

```
foreach(explode(" ",$sms['sms_text']) as $no)
foreach(explode("&",$sms['sms_text']) as $no)
foreach(explode(",",$sms['sms_text']) as $no) 
```

一体式爆炸是这样的：

```
foreach(explode('','&',',',$sms['sms_text']) as $no) 
```

最好的方法是什么？我想要的是在一行中拆分多个分隔符上的字符串。

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-05-14T04:47:31.020

如果您想用多个分隔符分割字符串，也许[`preg_split`](http://php.net/manual/en/function.preg-split.php)是合适的。

```
$parts = preg_split( '/(\s|&|,)/', 'This and&this and,this' );
print_r( $parts ); 
```

结果是：

```
Array ( 
  [0] => This 
  [1] => and 
  [2] => this 
  [3] => and 
  [4] => this 
) 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2014-12-04T18:02:28.920

这是我在 PHP.net 找到的一个很好的解决方案：

```
<?php

//$delimiters must be an array.

function multiexplode ($delimiters,$string) {

    $ready = str_replace($delimiters, $delimiters[0], $string);
    $launch = explode($delimiters[0], $ready);
    return  $launch;
}

$text = "here is a sample: this text, and this will be exploded. this also | this one too :)";
$exploded = multiexplode(array(",",".","|",":"),$text);

print_r($exploded);

//And output will be like this:
// Array
// (
//    [0] => here is a sample
//    [1] =>  this text
//    [2] =>  and this will be exploded
//    [3] =>  this also 
//    [4] =>  this one too 
//    [5] => )
// )

?> 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-14T04:46:10.740

你可以用这个

```
function multipleExplode($delimiters = array(), $string = ''){

    $mainDelim=$delimiters[count($delimiters)-1]; // dernier

    array_pop($delimiters);

    foreach($delimiters as $delimiter){

        $string= str_replace($delimiter, $mainDelim, $string);

    }

    $result= explode($mainDelim, $string);
    return $result;

} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-14T04:48:03.983

您可以使用[`preg_split()`函数](http://php.net/manual/en/function.preg-split.php)使用正则表达式分割字符串，如下所示：

```
$text = preg_split('/( |,|&)/', $text); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-14T04:52:01.137

我会去[`strtok()`](http://php.net/manual/en/function.strtok.php)，例如

```
$delimiter = ' &,';
$token = strtok($sms['sms_text'], $delimiter);

while ($token !== false) {
    echo $token . "\n";
    $token = strtok($delimiter);
} 
```

# mysql - 用于创建数据库的 cron 作业会影响用户吗？

> ID：10577589
> 
> 赞同：1
> 
> 时间：2012-05-14T04:42:52.940
> 
> 标签：mysql, cron

我有一个网站，我需要在其中创建一个临时数据库表，该表每 5 小时重新创建一次。完成该动作大约需要 0.5 秒。

网站分析显示大约 5 次点击/秒。这个数字可能会逐渐增加。

## 问题

cron 作业清空数据库并重新创建它。这是否意味着，当有人访问一个基于临时数据库填充数据的页面时，该页面在 cron 作业下处于活动状态时，他可能找不到数据或数据不完整？或者由于锁定，这种情况由Mysql处理？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-14T05:22:18.457

根据我的测试，如果一个 MySQWL 客户端尝试删除数据库，而另一个客户端锁定了其中一个表，则客户端将等待直到表被解锁。

但是，删除数据库的客户端本身也不能锁定任何数据库表。因此，根据您在做什么，您可能需要使用其他一些方法来序列化请求等。例如，如果作业需要删除并重新创建数据库、创建表并在其他客户端使用它们之前填充它们，那么表锁定将是一个问题，因为不会总是有一个表需要锁定。

考虑使用显式锁定[`get_lock()`](http://dev.mysql.com/doc/refman/5.5/en/miscellaneous-functions.html#function_get-lock)来协调“临时”数据库上的操作。

还要考虑重新考虑你的策略。定期删除和重新创建整个数据库并不是一种常见的做法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-14T07:40:53.327

Instead of dropping and recreating, you might to create first under a temporary name, populate and then drop the old one while renaming the new one.

Additionally, you should either make your web app fit for retrying if the table was not found in order to cope with the small time window where the table is not here, or operate on a view instead of renaming tables.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-14T04:54:15.353

据我所知，当您锁定表时，除非您将其解锁，否则其他人无法访问该表，但其他连接只会等到 0.5 秒后，因此您的用户在重新创建表时可能需要额外等待 0.5 秒.

不用担心没有数据，只是有时间延迟。

# facebook - 不安全的 JavaScript 尝试使用 URL 访问框架：域、协议和端口必须匹配。

> ID：10577590
> 
> 赞同：4
> 
> 时间：2012-05-14T04:43:13.567
> 
> 标签：facebook, fbconnect

我正在尝试通过调用来设置应用程序的高度：

```
FB.init({ appId: fbAppId,
            status: true,
            cookie: true,
            xfbml: true,
            oauth: true,
            channelURL: webUrl + '/channel.html'
        });
FB.Canvas.setAutoResize(); 
```

如果它在 HTTP 上不起作用，但在 HTTPS 上起作用。

示例 URL： http: [//www.facebook.com/ListerineAU/app_300955373319633](http://www.facebook.com/ListerineAU/app_300955373319633) - 不工作 [https://www.facebook.com/ListerineAU/app_300955373319633](https://www.facebook.com/ListerineAU/app_300955373319633) - 工作

错误信息：

```
Unsafe JavaScript attempt to access frame with URL http://www.facebook.com/ListerineAU/app_300955373319633 from frame with URL https://s-static.ak.facebook.com/connect/xd_arbiter.php?version=5#channel=f35120b198&origin=http%3A%2F%2Fjwteeth.aptira.com&channel_path=%2F%3Ffb_xd_fragment%23xd_sig%3Df2eb2cde4%26&transport=postmessage. Domains, protocols and ports must match. 
```

FB端好像出错了，有没有其他人遇到过这种情况？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-25T08:46:20.297

发现这在 facebook 错误中列出

> 脸书的最新回应
> 
> Øyvind Sean Kinsey 这是用于测试条件的预期异常 - 这没有副作用。26/04/2012 22:29 · 状态更改为按设计

[https://developers.facebook.com/bugs/122268321247958](https://developers.facebook.com/bugs/122268321247958)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-16T04:42:22.090

显然我们公司的防火墙阻止了通往

```
http://static.ak.facebook.com/connect/xd_arbiter.php?version=6#channel=f4f408309365a4&origin=http%3A%2F%2F[domain]&channel_path=%2F%3Ffb_xd_fragment%23xd_sig%3Df1af91536f1c7%26&transport=postmessage 
```

说它在脚本上包含一些不安全性。

# android - 问题关闭弹出窗口

> ID：10577596
> 
> 赞同：5
> 
> 时间：2012-05-14T04:44:15.220
> 
> 标签：android, popup

我实现了一个弹出菜单，点击一个按钮就会显示出来。这是我的 onclick 方法。

```
public void showOverflow(View view) {

    boolean click = true;
    Button action = (Button) findViewById(R.id.btbAction);

    LayoutInflater inflater = (LayoutInflater) main.this
            .getSystemService(Context.LAYOUT_INFLATER_SERVICE);
    View popupView = inflater.inflate(R.layout.overflow_layout, null);
    final PopupWindow pw = new PopupWindow(popupView,
            LayoutParams.WRAP_CONTENT, LayoutParams.WRAP_CONTENT);
    pw.setOutsideTouchable(true);
    if (click) {
        pw.showAsDropDown(action, 0, 0);
        click = false;
    } else {
        pw.dismiss();
        click = true;
    }
} 
```

单击按钮时会显示弹出窗口。现在，问题是当我在弹出窗口之外触摸时，窗口没有被关闭。我尝试将此属性设置为弹出窗口

```
pw.setOutsideTouchable(true); 
```

事情保持不变。请帮我解决这个问题

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-14T05:11:40.540

您应该将`setOutsideTouchable`调用的参数更改为**`true`**： `pw.setOutsideTouchable(false);`

> 控制是否将弹出窗口通知其窗口外的触摸事件。这仅对可触摸但不可聚焦的弹出窗口有意义，这意味着窗口外的触摸将传递到后面的窗口。默认值为**false**。
> 
> 如果弹出窗口正在显示，则调用此方法将仅在下次显示弹出窗口时或通过手动调用其中一个 update() 方法时生效。
> 
> 参数：`touchable` **如果**弹出窗口应该接收外部触摸事件，则为true，否则为**false**

另一方面，`click`局部变量应该做什么？它设置为**true**，因此无论何时调用该方法，它总是会强制`pw`弹出`showOverflow`，并且以后无缘无故地设置为**false**，因为它的生命周期在您离开该方法时结束。

您的代码应如下所示：

```
private LayoutInflater inflater;
private Button action;
private PopupWindow pw;
private View popupView;
/*
 * (non-Javadoc)
 * @see android.app.Activity#onCreate(android.os.Bundle)
 */
@Override
protected void onCreate(Bundle savedInstanceState)
{
    super.onCreate(savedInstanceState);
    setContentView(R.layout.splash);
    inflater = (LayoutInflater) getSystemService(Context.LAYOUT_INFLATER_SERVICE);
    popupView = inflater.inflate(R.layout.overflow_layout, null, false);

    action = (Button) findViewById(R.id.action);
    action.setOnClickListener(this);
}

public void showOverflow()
{
    pw = new PopupWindow(getApplicationContext());
    pw.setWidth(WindowManager.LayoutParams.WRAP_CONTENT);
    pw.setHeight(WindowManager.LayoutParams.WRAP_CONTENT);
    pw.setOutsideTouchable(true);

    pw.setContentView(popupView);
    pw.showAsDropDown(action, 0, 0);
} 
```

`getApplicationContext()`如果你在`Activity`课堂上，应该使用。否则你应该得到`Context`作为参数。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-03-13T02:51:19.480

更改`pw.setOutsideTouchable(true);`为`pw.setOutsideTouchable(false);`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-09-02T14:43:21.757

我知道这是一个老问题，但这就是我为解决它所做的工作

问题是：

> 每次调用 showOverFlow() 时都会创建一个新的 popupwindow 实例，这就是为什么在关闭 popupwindow 后会显示另一个弹出窗口

你会做什么是初始化popupview`OnCreate`

然后调用`popupwindow.showAsDropDown(view)`方法`showOverFlow()`

最后你可以检查它是否显示下面的代码

将此代码放入您的按钮 onclick

```
 if(popupwindow.isShowing()){
  popup.dismiss() }
  else{
  ShowOverflow()} 
```

# iphone - NSRunLoop 在长时间延迟后调用我的选择器

> ID：10577598
> 
> 赞同：2
> 
> 时间：2012-05-14T04:44:31.493
> 
> 标签：iphone, objective-c, ios, macos, nsrunloop

问题陈述：我们有一个辅助线程，我们在其中进行所有后端处理。在这个辅助线程中，我们创建了一个单独的 NSRunLoop 来运行。我们在这个运行循环中创建和使用计时器

```
 NSAutoreleasePool *myPool = [[NSAutoreleasePool alloc] init];
NSRunLoop * threadRL = [NSRunLoop currentRunLoop];
[threadRL addPort:[NSMachPort port] forMode:NSDefaultRunLoopMode];
[threadRL run];
[myPool release]; 
```

除了对选择器的调用需要将近 10 秒的时间来执行之外，每件事都运行良好，而且这种情况并非每次都随机发生。

```
[myclass performSelector:@selector(func) onThread:myThread withObject:nil waitUntilDone:NO]; 
```

我也试过了，没有区别。

```
[myclass performSelector:@selector(func) onThread:myThread withObject:nil waitUntilDone:NO modes:[NSArray arrayWithObjects: NSDefaultRunLoopMode, NSRunLoopCommonModes,nil]]; 
```

我没有在 func 中做任何可能需要这么多时间的任务，

我在想的是，runloop 可能处于不同的模式。

有没有办法让资金以最高优先级执行，即在运行循环中执行的内容被中断或类似的东西。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-14T11:08:16.920

您可以创建一个 NSTimer 并将 firedate 设置为现在。请参阅下面的示例代码。

```
 NSTimer *timer = [[NSTimer alloc] initWithFireDate:now
                                                  interval:.01
                                                    target:myClass
                                                  selector:@selector(funct)
                                                  userInfo:nil
                                                   repeats:NO];

   NSRunLoop *runLoop = [NSRunLoop currentRunLoop];
        [runLoop addTimer:timer forMode:NSDefaultRunLoopMode];
        [runLoop run]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-15T12:36:15.443

我正在回答我自己的问题。当没有字节可读取时，我的运行循环正在等待 NSInputStream:read 。所以 func 在 runloop 源中排队，但是由于线程正在等待套接字读取，所以没有执行任何操作。

当我挂钩运行循环并看到它卡在那里时，我知道了这一点。

# php - 单击按钮后获取 url 部分

> ID：10577600
> 
> 赞同：0
> 
> 时间：2012-05-14T04:45:00.193
> 
> 标签：php, mysql, php-5.3

```
while($row=mysql_fetch_array($result))
{
   echo "<td>".$row['status']."</td>";
   echo "<td><a href='book.php?id='".$row['id'].">Book</a></td>";
} 
```

在 book.php 页面中，我想获取在 url 中解析的 id="something" 的东西。有人可以帮助我吗？

书本.php

```
<?php
$id=$_GET['id']; // this is not right
echo $id;
?> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-14T04:49:39.600

尝试用这个替换

```
echo "<td><a href='book.php?id=".$row['id']."'>Book</a></td>"; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-14T05:02:53.677

如果您想要当前页面网址，请使用以下功能

```
function CurrentPageURL()
{
 $pageURL = $_SERVER['HTTPS'] == 'on' ? 'https://' : 'http://';
 $pageURL .= $_SERVER['SERVER_PORT'] != '80' ?     
 $_SERVER["SERVER_NAME"].":".$_SERVER["SERVER_PORT"].$_SERVER["REQUEST_URI"] :   
 $_SERVER['SERVER_NAME'] . $_SERVER['REQUEST_URI'];
 return $pageURL;
} 
```

您只关心解析查询字符串，那么此链接可能会对您有所帮助

[http://php.net/manual/en/function.parse-str.php](http://php.net/manual/en/function.parse-str.php)

# ios - 如何访问iphone的文件系统？

> ID：10577602
> 
> 赞同：-3
> 
> 时间：2012-05-14T04:45:28.557
> 
> 标签：ios, iphone, objective-c, xcode, ios4

我想实现一个用于访问 iphone 文件系统的程序。我的应用程序是这样一种方式，即我的简历在我的 iphone 中，我想通过访问文件系统来上传它。

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-05-14T04:54:47.163

恐怕您无法做到这一点..由于苹果对证券非常严格，它提供了应用程序的沙盒，这意味着您只能访问文件系统，而不能访问其他应用程序的文件

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-05-14T06:57:21.550

您无法访问文件系统。除了越狱。

您的应用可以访问应用的本地文件夹。

# ruby-on-rails - 在 Rails 应用程序中计算数据列中的浮点元素的块或方法

> ID：10577604
> 
> 赞同：0
> 
> 时间：2012-05-14T04:45:45.593
> 
> 标签：ruby-on-rails, rails-activerecord

我试图显示输入的所有记录的浮点数的总和，但我似乎不知道该怎么做。这是情况。我的应用程序（纯粹用于学习目的）有一个用户可以注册游泳者个人资料，并且在这样做时，可以为游泳者记录游泳。游泳属于游泳者，游泳者有很多游泳。

```
 // swims_controller.rb
   // SwimsController#index
   @swims = @swimmer.swims.all
   @distances = @swimmer.swims.all(:select => "distance") 
```

在此操作的视图中，我遍历游泳以获取游泳日期和游泳距离。然后我添加了这行不起作用

```
<p>Total distance: <%= @distances.each { | x | x.distance.inject(:+).to_f } %></p> 
```

我得到的错误是“5500.0:Float 的未定义方法‘注入’”（5500.0 是为该游泳者记录的第一次游泳的距离）。我使用了基于其他线程的注入（例如，[如何对 Ruby 中的数字数组求和？](https://stackoverflow.com/questions/1538789/how-to-sum-array-members-in-ruby)）但很明显，我遗漏了一些东西。实际上，我可能遗漏了很多东西，因为我想将这个 #total_distance 方法放在游泳模型（swim.rb）中，但是当我尝试这样做时，我无法让控制器识别该方法我在别处读到，由于“缓存”问题，视图不应尝试访问模型中定义的方法。

任何人对此的有用指导都会有很大帮助。似乎是一件非常基本的事情，但由于某种原因，在无数次搜索查询之后，我发现关于此类问题的指导很少。谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-14T05:45:29.933

我不是那种经验，但尝试做**<%= @swims.inject(0) {|num,n| 数字 + n[：距离] } %>**

或者

**<%= @distances.inject {|sum, n| 总和 + n } %>**

我希望这会奏效。
谢谢。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-14T04:52:20.863

你应该看看活动记录计算。它已经支持 sum： [http ://ar.rubyonrails.org/classes/ActiveRecord/Calculations/ClassMethods.html](http://ar.rubyonrails.org/classes/ActiveRecord/Calculations/ClassMethods.html#M000296)

# iphone - 我们如何从 iphone 中的 filename.a 文件和 appname.ipa 文件中获取源代码？

> ID：10577609
> 
> 赞同：-4
> 
> 时间：2012-05-14T04:46:28.603
> 
> 标签：iphone, objective-c, ios, ipa, .a

> **可能重复：**
> [是否可以对我的 iPhone 应用程序进行逆向工程？](https://stackoverflow.com/questions/5058203/is-it-possible-to-reverse-engineer-my-iphone-application)
> [如何从 .ipa 文件中获取源代码？](https://stackoverflow.com/questions/5522229/how-can-i-get-the-source-code-from-the-ipa-file)

有没有办法从 iphone 中的已编译 (.a) 文件和 .ipa 文件中提取源代码。在android中，我们可以从.apk文件中获取源代码，那么为什么我们不能从.ipa文件中获取源代码。应该有任何方法可以从 iphone 中的已编译文件中获取源代码。我也陷入了这样一种情况：iphone 的任何 api 都有，然后它包含 .a 已编译的文件，我将无法修改它的代码。因此，如果有人找到了从 iphone 中的编译文件中找出源代码的方法，那么请回答这个问题....！我会非常感谢你。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-14T04:52:38.507

不，您无法从 ipa 获取代码...

**.a**文件是一个静态库。静态库是一组例程、外部函数和变量，它们在编译时在调用者中解析并由编译器、链接器或绑定器复制到目标应用程序中，从而生成目标文件和独立的可执行文件。更多关于[维基](http://en.wikipedia.org/wiki/Static_library)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-14T05:51:47.123

创建.a文件的基本目标不是隐藏源代码吗？

但是，我“听说”有人使用一些专门的工具来反汇编签名的二进制文件。[IDA](http://www.hex-rays.com/products/ida/index.shtml)就是其中之一。

我无法在操作该工具方面为您提供更多帮助，因为我自己没有使用过它；）

# java - Double.parseDouble(String) 和 Double.valueOf(String) 有什么区别？

> ID：10577610
> 
> 赞同：68
> 
> 时间：2012-05-14T04:46:31.723
> 
> 标签：java, type-conversion

我想转换`String`为`Double`数据类型。我不知道我是否应该使用`parseDouble`or `valueOf`。

这两种方法有什么区别？

* * *

## 回答 #1

> 赞同：86
> 
> 时间：2012-05-14T04:49:23.407

[`parseDouble`](http://docs.oracle.com/javase/6/docs/api/java/lang/Double.html#parseDouble%28java.lang.String%29)返回包含字符串值的原始双精度：

> 返回一个新的 double，初始化为由指定 String 表示的值，由 Double 类的 valueOf 方法执行。

[`valueOf`](http://docs.oracle.com/javase/6/docs/api/java/lang/Double.html#valueOf%28double%29)返回一个 Double 实例，如果已经缓存，您将获得相同的缓存实例。

> 返回表示指定双精度值的 Double 实例。如果不需要新的 Double 实例，则通常应优先使用此方法而不是构造函数 Double(double)，因为此方法可能会通过缓存频繁请求的值来显着提高空间和时间性能。

为了避免创建新的 Double 对象实例的开销，您通常应该使用[`valueOf`](http://docs.oracle.com/javase/6/docs/api/java/lang/Double.html#valueOf%28double%29)

* * *

## 回答 #2

> 赞同：37
> 
> 时间：2012-05-14T05:28:55.917

`Double.parseDouble(String)`将返回原始`double`类型。 `Double.valueOf(String)`将返回一个类型的包装对象`Double`。

因此，例如：

```
double d = Double.parseDouble("1");

Double d = Double.valueOf("1"); 
```

而且，`valueOf(...)`是一个重载的方法。它有两种变体：

1.  [`Double valueOf(String s)`](https://docs.oracle.com/javase/8/docs/api/java/lang/Double.html#valueOf-java.lang.String-)
2.  [`Double valueOf(double d)`](https://docs.oracle.com/javase/8/docs/api/java/lang/Double.html#valueOf-double-)

而`parseDouble`具有以下签名的单个方法：

1.  [`double parseDouble(String s)`](https://docs.oracle.com/javase/8/docs/api/java/lang/Double.html#parseDouble-java.lang.String-)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2014-06-25T06:20:29.767

parseDouble() 方法用于初始化一个字符串（它应该包含一些数值）......它返回的值是原始数据类型，如 int、float 等。

但是 valueOf() 创建了一个 Wrapper 类的对象。您必须打开它才能获得双精度值。它可以与巧克力相提并论。制造商用一些箔纸或纸包裹巧克力以防止污染。用户拿起巧克力，取下并扔掉包装纸，然后吃掉。

观察以下转换。

`int k = 100; Integer it1 = new Integer(k);`

int 数据类型 k 使用 Integer 类转换为对象 it1。it1 对象可用于 Java 编程中任何需要 k 对象的地方。

以下代码可用于展开（从 Integer 对象中取回 int）对象 it1。

```
int m = it1.intValue(); 
```

System.out.println(m*m); // 打印 10000

//intValue() 是 Integer 类的一个方法，它返回一个 int 数据类型。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-14T06:30:41.817

它们都将 String 转换为 double 值，但是 parseDouble() 方法返回原始 double 值， valueOf() 方法进一步将原始 double 转换为包含原始 double 值的 Double 包装类对象。

如果 String 中的值不可转换为原始 double，则从 String 到原始 double 的转换可能会引发 NFE(NumberFormatException)。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-14T04:49:14.593

文档`parseDouble()`说“返回一个初始化为指定字符串表示的值的新双精度值，由 Double 类的 valueOf 方法执行。”，所以它们应该是相同的。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-05-14T05:09:12.663

如果要将字符串转换为双精度数据类型，则大多数选择 parseDouble() 方法。请参阅示例代码：

```
String str = "123.67";
double d = parseDouble(str); 
```

您将获得双倍的价值。请参阅 tutorialData 中的 StringToDouble[教程](http://tutorialdata.com/example/Java-Data-Types/StringToDouble.html)。

# android - Android NDK 上的嵌套函数

> ID：10577613
> 
> 赞同：2
> 
> 时间：2012-05-14T04:47:03.703
> 
> 标签：android, gcc, android-ndk, nested-function

有没有办法在 Android NDK 上使用嵌套函数？这应该是可能的，因为 NDK 使用 gcc 对吗？

好吧，我尝试在 main 中定义一个函数，但编译器根本无法识别它。这是错误

错误：在“{”标记之前不允许函数定义错误：输入结束时应为“}”

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-15T05:49:45.073

我不确切知道。但就 NDK 使用`arm`gcc 编译器而言，嵌套函数可能在[ARM 架构](http://gcc.gnu.org/ml/gcc-bugs/2000-09/msg00353.html)上被破坏——我最好的猜测是嵌套函数可能在 NDK 工具集中被禁用。无论如何 - 嵌套函数是 GCC 扩展，所以如果你希望你的代码是可移植的，你最好不要使用 gcc 扩展，而是使用 C89/C90 兼容代码。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-16T13:38:37.087

[这里](http://gcc.gnu.org/onlinedocs/gcc/Nested-Functions.html)的嵌套函数示例，其中 a`foo()`包含 a `square()`，编译并运行良好（在 Tegra 3 上）。我使用 NDK r8 android 工具链（使用 android-cmake，如果这有什么不同，那不应该是这种情况）。如果您使用旧版本，也许您应该尝试使用 r8？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-14T06:03:18.980

是的，这应该是可能的。您可能需要将 -fnested-functions 标志添加到 gcc 调用。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-10-14T23:13:30.950

嵌套函数需要一个可执行堆栈，在 Android 中默认禁用。

我花了难以置信的时间来弄清楚 - 但你需要在你的 CFLAGS 中添加以下内容：

-z execstack -Wa,--execstack

一切顺利！

# c# - 如何使用 NinjectHttpApplication（无 nuget）在 HttpModule 中注入依赖项？

> ID：10577615
> 
> 赞同：4
> 
> 时间：2012-05-14T04:47:20.930
> 
> 标签：c#, asp.net-mvc, dependency-injection, ninject

我有一个 .Net MVC 3.0 应用程序，我正在使用 Ninject 3.0。我没有安装任何nuget。我引用了 Ninject.dll、Ninject.Web.Common.dll 和 Ninject.Web.Mvc.dll（以及其他 2 个）。我想在自定义 HttpModule 中注入依赖项，但我不知道如何使它与 NinjectHttpApplication 一起工作。

我有这个错误：

激活 IntPtr 时出错
没有匹配的绑定可用，并且类型不是自绑定的。
激活路径：
3) 将依赖 IntPtr 注入到 Func{IKernel} 类型的构造函数的参数方法中
2) 将依赖 Func{IKernel} 注入到 HttpApplicationInitializationHttpModule 类型的构造函数的参数lazyKernel
1) 请求IHttpModule

这是代码：

全球.asax

```
public class MvcApplication: NinjectHttpApplication
{
    ...
    protected override void OnApplicationStarted()
    {
        base.OnApplicationStarted();

        AreaRegistration.RegisterAllAreas();

        RegisterGlobalFilters(GlobalFilters.Filters);
        RegisterRoutes(RouteTable.Routes);
    }

    protected override IKernel CreateKernel()
    {
        var modules = new INinjectModule[]
        {
            new ServiceModule()
        };

        IKernel kernel = new StandardKernel(modules);

        return kernel;
    }
} 
```

网络配置

```
<httpModules>
    <add name="NinjectHttpModule" type="Ninject.Web.Common.NinjectHttpModule"/>
</httpModules> 
```

自定义HttpModule.cs

```
public class CustomHttpModule : IHttpModule
{
    private ITesttService service;
    public CustomHttpModule(ITesttService service)
    {
        this.service = service;
    }
    ...
} 
```

服务模块.cs

```
public class ServiceModule : NinjectModule  
{
    public override void Load()
    {
        ...
        Kernel.Bind<ITestService>().To<TestService>();
        Kernel.Bind<IHttpModule>().To<CustomHttpModule>().InSingletonScope();
    }
} 
```

这个绑定解决了我的问题：

```
kernel.Bind<Func<IKernel>>().ToMethod(c => () => this.Kernel); 
```

但是根据github上的这篇**[文章](https://github.com/ninject/Ninject.Web.Common/issues/4)**，我不应该这样做。

你能告诉我我做错了什么或错过了什么吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-14T23:24:32.130

目前从 NinjectHttpApplication 派生时没有使用 NinjectHttpModule 的好方法。引导程序为两种方式注册 HttpApplicationInitializationHttpModule ，一旦加载了 NinjectHttpModule ，这个模块也会被加载。

不幸的是，没有什么好的地方可以卸载它。

我建议您使用 WebActivator，而不是从 NinjectHttpApplication 派生。这是让它运行的唯一正确方法。您不一定必须使用 nuget 以这种方式设置您的应用程序。您还可以手动添加相同的文件并手动引用所有必需的程序集。

# git - 基于路径和分支发现 Git 对象哈希

> ID：10577616
> 
> 赞同：2
> 
> 时间：2012-05-14T04:47:23.843
> 
> 标签：git

我正在编写一个小型 Web Git 可视化工具，我想转换文件路径和分支：

```
master repository/folder/test => a39bc19d82890f25df2d08d8bea627bb4354e8d8
mybranch repository/folder/test/myfile.py => 76e2242459d360f7429ed748426e660b6dacc9a9 
```

进入 Git 对象哈希，所以我可以正确使用`git show`and `git cat-file`，以及`git ls-tree`. 我的应用目前看起来像这样：

```
show.php?h=76e2242459d360f7429ed748426e660b6dacc9a9 
```

我想将路径转换为更有用的东西，例如：

```
show.php?branch=master&path=repository/folder/test/myfile.py 
```

有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-22T06:06:35.307

分支：路径符号是解决方案。感谢努法尔·易卜拉欣！

# c++ - 计算BMI程序

> ID：10577620
> 
> 赞同：0
> 
> 时间：2012-05-14T04:48:05.390
> 
> 标签：c++, qt4

这是一个通过输入体重和身高来计算BMI的程序

```
#ifndef BMIVIEWER_H
#define BMIVIEWER_H
#include <QWidget>
#include <QGridLayout>
#include <QLineEdit>
#include <QLabel>
#include <QPushButton>
#include <QLCDNumber>
#include <QErrorMessage>
#include <QString>
#include <QMessageBox>

class BmiViewer : public QWidget {
   Q_OBJECT

public:

    BmiViewer();
    void calculateBmi();

private:
 QLineEdit* heightEntry;
 QLineEdit* weightEntry;
 QLCDNumber* result;
 QErrorMessage* error;
};

#endif // BMIVIEWER_H 
```

bmiviewer.cpp

```
#include "bmiviewer.h"
BmiViewer::BmiViewer(){
setWindowTitle("MMI Calculator");
QGridLayout* layout = new QGridLayout;
QLabel* inputWeightRequest = new QLabel ("Enter weight in Kg:");
weightEntry = new QLineEdit;
QLabel* inputHeightRequest = new QLabel ("Enter height in meters:");
heightEntry = new QLineEdit;
QPushButton* calc = new QPushButton ("Calculate");
QLabel* labelbmi = new QLabel ("BMI");
result = new QLCDNumber;

result->setSegmentStyle(QLCDNumber::Flat);
result->setDigitCount(8);

layout->addWidget (inputWeightRequest, 0,0);
layout->addWidget (weightEntry, 0,1);
layout->addWidget (inputHeightRequest, 1,0);
layout->addWidget (heightEntry, 1,1);
layout->addWidget (calc, 2,1);
layout->addWidget (labelbmi, 3,0);
layout->addWidget (result, 3,1);

setLayout(layout);

//connect signals and slots

connect(calc,SIGNAL(clicked()),this, SLOT(calculateBmi()));

}

void BmiViewer::calculateBmi(){
int wanswer=0;
int hanswer=0;
double bmi;
QString iStr = weightEntry->text();
QString iStrh = heightEntry->text();
bool ok;
wanswer = iStr.toInt(&ok);
hanswer = iStrh.toInt(&ok);
if (!ok) {
 error = new QErrorMessage(this);
 error->showMessage("Please enter a valid integer");
 return;
}

    //calculate BMI

    bmi=wanswer/(hanswer*hanswer);
    result->display(bmi);

   } 
```

主文件

```
#include <QApplication>
#include "bmiviewer.h"

int main(int argc, char *argv[]) {
    QApplication a(argc, argv);
    BmiViewer w;
    w.show();

    return a.exec();
} 
```

当我编译它时它输出： Object::connect: No such slot BmiViewer::calculateBmi() in bmiviewer.cpp:29

它显示界面，但未进行任何计算。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-14T04:49:40.567

添加行

```
public slots: 
```

前

```
void calculateBmi(); 
```

您从未将 bmi 函数声明为插槽，因此无法连接到它。

# css - HTML/CSS：拉伸高度 布局

> ID：10577622
> 
> 赞同：1
> 
> 时间：2012-05-14T04:48:26.200
> 
> 标签：css, html, height, stretching

```
<div style="width: 800px; height: 600px"> 
    <div style="height: 100px"> 
        top fixed-height row
    </div> 
    <div style="???"> 
        bottom stretching row (the height should be 500px in this case.) 
    </div> 
</div> 
```

在没有 javascript 的情况下创建两行布局的标准方法是什么，其中顶部是固定大小，底部是拉伸并适合其父 div？

*   我希望两行的样式都是独立的。我在这里找到了几个解决方案，但是如果我更改顶行的高度，则需要随之更改底行的样式（例如边距）。

*   我不需要支持旧浏览器。如果它是标准的，那就没问题了。

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-14T05:38:43.323

对于这种情况，您可以使用预处理器（如 LESS）：

```
@contHeight: 600px;
@topHeight: 100px;

div#containingdiv { 
    width: 800px; 
    height: @contHeight; 
    }
div#toprow { 
    width: 100%;
    height: @topHeight; 
    }
div#bottomrow {
    height: @contHeight - @topHeight; 
    } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-14T05:38:46.643

您可以使用`display`CSS 中的属性来解决此问题。

工作[**示例**](http://jsfiddle.net/Bongs/ymLWq/)

HTML

```
<div id="a" style="width: 300px; height: 200px"> 
    <div id="b" style="height: 55%"> 
        top fixed-height row
    </div> 
    <div id="c" style=""> 
        bottom stretching row (the height should be 500px in this case.) 
    </div> 
</div> ​ 
```

CSS

```
#a
{
    border: 1px solid black;
    display:table;
}
#b
{
    background-color:red;
    display:table-row;
}
#c
{
    background-color:green;
    display:table-row;
}​ 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-14T05:13:11.517

HTML 和 CSS 是静态而非动态语言，您可以在其中执行计算。您只能将样式单独应用于每个 div，因为实际上每个“行”div 的样式之间*没有*依赖关系，您可以根据另一个来确定一个的高度。

但是，根据您要实现的目标，可以设置包含 div 而不是底部 div 的样式。

例如，一个非常简单的示例，顶行应该有红色背景，底行有黄色背景，将包含 div 的样式设置为底部 div 所需的外观，顶部 div 将覆盖此外观容器上部：

```
div#containingdiv { width: 800px; height: 600px; background:#ffff00; }
div#toprow { height: 100px; background:#ff0000; width 100%; }
div#bottomrow { } 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-14T07:01:37.443

我刚刚写了一篇关于 HTML CSS 布局的博客，该演示让您可以通过 javascript 操作大多数 css 设置。

[http://attemptingawesomeness.blogspot.com.au/2012/05/css-html-layout-guide_13.html](http://attemptingawesomeness.blogspot.com.au/2012/05/css-html-layout-guide_13.html)

[http://attemptingawesomeness.blogspot.com.au/2012/05/ultimate-html-css-layout-demo.html](http://attemptingawesomeness.blogspot.com.au/2012/05/ultimate-html-css-layout-demo.html)

# android - 使用广播/意图在服务和活动之间进行通信

> ID：10577623
> 
> 赞同：0
> 
> 时间：2012-05-14T04:48:27.590
> 
> 标签：android, service, android-intent, broadcastreceiver, intentfilter

我正在尝试将 UI 从服务通信/更新到活动。我收到的广播不是我发送的。任何想法为什么？

服务代码：

```
@Override
    //binder returns NULL

    public void onStart(Intent intent, int startId) {
        // TODO Auto-generated method stub
        super.onStart(intent, startId);
        Intent i = new Intent();
    i.putExtra("lol", "haha");
        i.setAction(MYACTION);
        sendBroadcast(i); 
```

活动代码：

```
protected void onResume() {
        // TODO Auto-generated method stub
        super.onResume();
         IntentFilter intentFilter = new IntentFilter(MYACTION);
             registerReceiver(recv, intentFilter);
    }

    BroadcastReceiver recv = new BroadcastReceiver() {

            @Override
            public void onReceive(Context context, Intent intent) {
                // TODO Auto-generated method stub
                Intent getintent = getIntent();
String action = getintent.getAction();
//ACTION RECEIVED IS DIFFERENT FROM MYACTION. IT IS ACTION.MAIN

// VALUE RECEIVED IS NULL
                String val = getintent.getStringExtra("lol");
                } 
```

我没有在清单中注册接收器。有必要吗？

如评论中所述：我在广播接收器中没有收到相同的操作，并且意图的值为 NULL。

我究竟做错了什么？

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-14T06:15:12.993

您不需要使用`getIntent`，因为它转换为 Activity 的意图，而不是接收到广播的意图。所以在你的情况下，你只需要使用`intent`哪个是指广播的意图。并确保在从捆绑包中读取所需值之前进行检查，因为您可能首先获得另一个广播，其捆绑包中不包含**lol**。

所以在你的广播接收器中，这样做：

```
....
String val = getintent.getStringExtra("lol");

if(val.equals("your_action_string"){
    String val = intent.getStringExtra("lol");  //getIntent() replaced by intent
}
.... 
```

PS 不，您不需要注册任何广播接收器，因为它是通过编程方式创建和使用的

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-14T04:55:15.003

如果您正在发出网络请求或扩展任务，我会查看异步任务。它使更新 UI 变得更加容易。只需确保调用 onPreExecute() 和 onPostExecute() 即可。我不喜欢服务和接收器。

[http://developer.android.com/reference/android/os/AsyncTask.html](http://developer.android.com/reference/android/os/AsyncTask.html)

# javascript - HTML5 数据被读取为数字而不是字符串？

> ID：10577626
> 
> 赞同：1
> 
> 时间：2012-05-14T04:48:48.617
> 
> 标签：javascript, jquery, html

我有以下 HTML：

```
<tr id="row_1" data-rk="02000008" data-pk="0001I"> 
```

当我用萤火虫检查它时，它显示为：

```
dataset DOMStringMap { rk="02000008", pk="0001I"}   
pk "0001I"  
rk "02000008" 
```

然后我使用 jQuery 来阅读：

```
var pk = $("tr[id='row_" + row + "']").data('pk')
var rk = $("tr[id='row_" + row + "']").data('rk') 
```

然而，当我检查我的 javascript 中的值时，这是萤火虫调试器显示的内容。它们也是稍后在 Ajax 调用中发送到我的 C# 代码的相同值。

```
pk shows as "0001I"
rk shows as 2000008 
```

有人可以解释一下吗？rk 和 pk 都以相同的方式编码，都有一个或多个前导零，但一个以字符串形式返回，另一个以数字形式返回。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-14T04:54:56.097

这是[设计使然](http://api.jquery.com/data/#data-html5)：

> 每次尝试都将字符串转换为 JavaScript 值（这包括布尔值、数字、对象、数组和 null），否则将其保留为字符串。要将值的属性作为字符串检索而不进行任何转换，请使用该[`attr()`](http://api.jquery.com/attr/)方法。

你必须使用的是：

```
var pk = $("tr[id='row_" + row + "']").attr('data-pk')
var rk = $("tr[id='row_" + row + "']").attr('data-rk') 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-05-14T04:55:04.293

Javascript 自动解析，因此尾随的 'I'`"0001I"`导致 javascript 将其解释为字符串

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-14T04:54:05.827

尝试：

```
var pk = $("tr[id='row_" + row + "']").attr('data-pk'); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-14T05:01:42.573

由于 jQuery 弄乱了你的数据，你可以这样做：

```
var rk = document.getElementById('row_' + row]).getAttribute('data-rk'); 
```

并且保证你是一个字符串。

# biztalk - 如何让出现在 WebDav 服务器上的文件触发 BizTalk 事件？

> ID：10577629
> 
> 赞同：3
> 
> 时间：2012-05-14T04:49:20.810
> 
> 标签：biztalk, webdav, biztalk-2010

我有一个遗留系统，可以创建在 WebDav 中可见的文件作为输出。我想在出现匹配过滤器的文件时触发 BizTalk 业务流程接收端口 - 很像标准文件适配器，但用于 WebDav。

我找到了[BizTalk Scheduled Task Adapter](http://biztalkscheduledtask.codeplex.com/)，它可以通过 HTTP 拉入文件，但它看起来已被遗弃、文档不完整且已过时。

那么，它是如何完成的呢？我可以使用标准的 HTTP 适配器吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-18T19:27:22.293

如果您能够通过 BizTalk 服务器的 UNC 路径访问 WebDAV，则文件适配器*应该*可以解决问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-21T12:16:24.277

您是否尝试为 WebDav 文件夹分配驱动器号？

[http://en.wikipedia.org/wiki/WebDAV](http://en.wikipedia.org/wiki/WebDAV)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-24T00:22:31.487

我们不得不解决这个问题，我们创建了一个完全不相关的单独进程，以使遗留系统中的文件副本出现在 Samba 共享中，然后我们使用普通的 FILE 适配器附加到该共享中。

# lua - 如何在lua的函数中获取函数的调用者？

> ID：10577633
> 
> 赞同：3
> 
> 时间：2012-05-14T04:49:38.993
> 
> 标签：lua, coronasdk

如何在 lua 的函数中获取函数的调用者？

具体来说，我正在寻找（用于命令输出中的调试目的，例如打印）在调用公共函数时记录的能力，并指示它是从哪里调用的。

例如，这可能只是调用它的文件名

IE

```
File 1 - Has commonly used function 

File 2 - Calls of the the file one functions 
```

PS Mud - 这样做时我实际上得到了零 - 那这正常吗？在这种情况下无法获得更多信息：

调用文件；

```
SceneBase = {}
  function SceneBase:new(options)
  end
return SceneBase 
```

调用文件：

```
require("views.scenes.scene_base")
local scene = SceneBase.new() 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-14T15:20:25.727

`debug.getinfo(2).name`如果它有一个并且它是一个字符串，它将给你调用函数的名称。如果它是一个匿名函数，你会得到`nil`，如果它使用字符串键以外的东西存储在表中，你会得到`?`.

```
function foo() print(debug.getinfo(2).name) end

-- _G["foo"] => function name is a string
function bar() foo() end
bar() --> 'bar'

-- _G[123] => function name is a number
_G[123] = function() foo() end
_G[123]() --> '?'

-- function has no name
(function() foo() end)()  --> 'nil' 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-14T06:09:13.703

Lua[调试库](http://www.lua.org/pil/23.1.html)可让您获取堆栈跟踪。

# ruby-on-rails - simple_form_for NilClass:Class 的未定义方法“model_name”

> ID：10577638
> 
> 赞同：1
> 
> 时间：2012-05-14T04:50:06.963
> 
> 标签：ruby-on-rails, simple-form

构建基本表单以创建新数据时收到以下错误。当我点击提交时，我得到

> simple_form_for NilClass:Class 的未定义方法“model_name”

```
**_form.html.erb**
<%= simple_form_for(@calls) do |f| %>
  <%= f.error_notification %>
  <%= f.input :caller_name %>
  <%= f.input :caller_phone, hint: "xxx-xxx-xxxx" %>
  <%= f.input :caller_address %>
  <%= f.input :primary_diagnosis %>
  <%= f.error :base %>
  <%= f.button :submit %>
<% end %>

**calls_controller.rb**
def create
     @call = Call.new(params[:call])

     respond_to do |format|
       if @call.save
         format.html { redirect_to @call, notice: 'Call was successfully created.' }
         format.json { render json: @call, status: :created, location: @call }
       else
         format.html { render action: "new" }
         format.json { render json: @call.errors, status: :unprocessable_entity }
       end
     end
   end

**new.html.erb**
<h1>New Call</h1>

<%= render 'form' %>

<%= link_to 'Back', calls_path %> 
```

我在这里有点迷茫，因为我遵循了 Rails 命名约定，甚至尝试使用具有相同结果的脚手架。已经重新启动了webrick。帮助？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-14T04:55:31.143

你要求一个`simple_form_for(@calls)`

然而你的控制器正在创建`@call`

你应该改变

```
<%= simple_form_for(@calls) do |f| %> 
```

至

```
<%= simple_form_for(@call) do |f| %> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-14T04:53:42.613

假设您`@call`在控制器中设置，我相信您需要将其传递给部分。请参阅此页面上的第 3.4.4 部分：http: [//guides.rubyonrails.org/layouts_and_rendering.html#using-partials](http://guides.rubyonrails.org/layouts_and_rendering.html#using-partials)

标签应如下所示：

```
<%= render :partial => "form", :locals => { :calls=> @calls} %> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-08-20T13:16:10.800

我认为您必须在控制器中定义一个“新”方法。只需创建一个新的空实例并将其返回给视图。

```
def new
     @call = Call.new
end 
```

当您发回带有内容的表单时，“create”方法是对 POST 操作的响应。然后从收到的参数创建一个新实例并将其保存到数据库中。

# javascript - 窗口 onhashchange 不起作用

> ID：10577642
> 
> 赞同：1
> 
> 时间：2012-05-14T04:50:53.467
> 
> 标签：javascript, jquery, html, dom

我有一个包含两篇文章的网页。加载此页面后，使用 jQuery 隐藏两篇文章并向下滑动第一篇。用户可以单击导航选项卡查看第二篇文章。`onhashchange`然后使用事件单击返回按钮返回第一篇文章。以下是我的 HTML 代码：

```
<nav>
 <a href='#1'>Article 1</a>
 <a href='#2'>Article 2</a>
</nav>

<article id=1>
 The first article.
</article>

<article id=2>
 The second article.
</article> 
```

这是javascript代码：

```
function change(hash)
{
 $('article:visible').slideUp();
 if(hash != '')
 {
  $(hash).slideDown();
 }
 else
 {
  $('article').first().slideDown();
 }
}

$('nav a').click(function(){
 var id = $(this).attr('href');
 change(id);
});

$('article').hide();
change(location.hash);
window.onhashchange = change(location.hash); 
```

观察到的是，尽管单击后退按钮，该页面仍保留在第二篇文章上。我使用的是 firefox 12.0 浏览器，不知道是什么原因导致它无法工作。任何帮助表示赞赏。谢谢。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-14T05:02:39.030

您可能想尝试：

```
window.onhashchange = change;

//and read location.hash in the change function instead
function change(){
    var hash = location.hash;
    ...
} 
```

或者

```
window.onhashchange = function(){
    change(location.hash);
} 
```

* * *

```
window.onhashchange = change(location.hash); 
```

如果我的 JS 没有生锈，这将失败，因为

*   来电`change()`
*   没有返回的函数返回`undefined`
*   您分配`undefined`给`window.onhashchange`- 这是错误的，因为您应该将 a 分配`function`给一个事件。

# php - mysql_num_rows(); 和标头（）；给出重定向循环

> ID：10577644
> 
> 赞同：0
> 
> 时间：2012-05-14T04:51:01.177
> 
> 标签：php, mysql

使用 header(); 时出现重定向循环错误；在 mysql_num_rows() 之后；如果我替换 header(); with echo 没有重定向循环错误。

```
<?php

  require("includes/inc.php");

$id = trim(sanitize($_GET['id'])); //Receives the id of the file from the url

$fileid = mysql_query("SELECT * FROM files WHERE fileid = '$id'");
    if (mysql_num_rows($fileid) != 1) {
        header('Location: download.php?error=invalid_file');
    } else {
        echo "File Exist";
    }

?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-14T04:52:59.630

尝试这个。让我知道是否不起作用

```
<?php

  require("includes/inc.php");

$id = trim(sanitize($_GET['id'])); //Receives the id of the file from the url

if($id)
{
    $fileid = mysql_query("SELECT * FROM files WHERE fileid = '$id'");
    if (mysql_num_rows($fileid) != 1) {
        header('Location: download.php?error=invalid_file');
    } else {
        echo "File Exist";
    }
}
?> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-14T04:54:50.707

这里没有足够的信息。上面的文件叫什么名字？什么是 PHP 代码`download.php`？中是否有任何重定向`includes/inc.php`？

当然，如果您删除`header()`呼叫，您不会收到错误 - 它是`header('Location: download.php...')`执行重定向的。

# mongodb - Go 与 Mongodb 的测试策略

> ID：10577649
> 
> 赞同：2
> 
> 时间：2012-05-14T04:51:55.420
> 
> 标签：mongodb, go

我正在尝试在 Go 和 MongoDb 中启动一个项目。当我试图找出对我的数据库交互进行单元测试的最佳方法时，我感到很困惑。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-14T17:33:44.507

通常人们使用数据库模拟，[在这里](https://stackoverflow.com/questions/7413985/unit-testing-with-mongodb)阅读Java 中的相同答案。

# ruby-on-rails-3 - API 设计 - 在一条路线上创建 2 个不同的资源

> ID：10577650
> 
> 赞同：0
> 
> 时间：2012-05-14T04:51:58.760
> 
> 标签：ruby-on-rails-3, api, rest, routes

我正在设计一个与移动应用程序一起使用的 API，但我遇到了一个特定的要求。在一种情况下，我需要创建两个不同的资源，我更愿意用一个 HTTP 请求来完成，所以我不必处理多个请求和回调等。

为简化起见，我有一个名为 Buckets 的资源和一个名为 Apples 的资源。Buckets 包含许多 Apple，Buckets 也可以由用户命名。用户命名一个存储桶，然后在整个应用程序中，可以将不同的 Apple 实例分配给该特定存储桶。

我不清楚如何创建我的路线如果用户正在查看 Apple 并希望将其分配给具有全新名称的 Bucket。在这种情况下，我的路线必须首先使用新名称创建存储桶，然后将 Apple 添加到该存储桶。

我到目前为止的一些路线是：

```
POST /buckets                    # create a new bucket
POST /buckets/:bucket_id/apples  # create a new apple within an existing bucket 
```

这条混合路线会是什么样子？也许是这样的：

```
POST /buckets/new/apples         # post data would contain NAME of new bucket and ID of apple 
```

接受任何建议，但重申一下，我真的很想在一个 HTTP 请求中完成所有这些。不确定这是否破坏了 RESTful 设计模式。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-14T07:09:33.223

我认为我正在寻找的是嵌套属性。

[http://api.rubyonrails.org/classes/ActiveRecord/NestedAttributes/ClassMethods.html](http://api.rubyonrails.org/classes/ActiveRecord/NestedAttributes/ClassMethods.html)

[http://railscasts.com/episodes/196-nested-model-form-part-1](http://railscasts.com/episodes/196-nested-model-form-part-1)

# php - PRAGMA table_info() 上的子查询

> ID：10577659
> 
> 赞同：0
> 
> 时间：2012-05-14T04:53:04.080
> 
> 标签：php, sqlite, subquery

```
$tbl = 'brand';
$sth = self::$db->prepare('PRAGMA table_info(SELECT tbl_name FROM sqlite_master WHERE tbl_name = ? LIMIT 1)');
$sth->execute(array($tbl));
$obj = $sth->fetch(PDO::FETCH_OBJ);
$sth->closeCursor();
return $obj; 
```

此脚本返回`Fatal error: Call to a member function execute() on a non-object`. 我假设错误是由语句中的语法错误造成的，而`brand`表存在于数据库中。

我的问题是，有没有另一种方法可以在 SQLite3 中执行这样的语句？我想从用户输入中获取给定表名的表信息。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-14T04:56:27.273

只需使用字符串连接来创建和执行以下 SQL：

PRAGMA table_info(品牌)

不要使用子查询来获取表名。

# java - Java - 从文件中获取行

> ID：10577660
> 
> 赞同：2
> 
> 时间：2012-05-14T04:53:11.940
> 
> 标签：java, string, io

以下是我当前的功能。如果找到 lineToCompare，它工作正常并返回 true。

```
public static int checkrank(String lineToCompare){
    try{
        // Open the file that is the first 
        // command line parameter
        FileInputStream fstream = new FileInputStream("ranks.txt");

        // Get the object of DataInputStream
        DataInputStream in = new DataInputStream(fstream);
        BufferedReader br = new BufferedReader(new InputStreamReader(in));

        String strLine;
        //Read File Line By Line

        while ((strLine = br.readLine()) != null)   {
        //Compare the line with the line to compare (string)
        if(strLine.trim().compareTo(lineToCompare) == 0)
          return true;
        }

        //Close the input stream
        in.close();
    }catch (Exception e){//Catch exception if any
        System.err.println("Error: " + e.getMessage());
    }

    return false;

} 
```

但是，我需要它在找到 lineToCompare 之后获取该行。

这是一个示例文本文件：

```
xXPwnageLolXx
1
SomethingTest
0
AnotherSomething
3 
```

我需要它来查找文本行（lineToCompare），然后在找到的行之后返回数字。我该怎么做？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-14T04:56:38.280

```
while ((strLine = br.readLine()) != null)   {
    //Compare the line with the line to compare (string)
    if(strLine.trim().compareTo(lineToCompare) == 0) {
      //I found it!  Read the next line...
      final String lineAfter = br.readLine();
      return Integer.parseInt(lineAfter);    
    }
} 
```

我已经编辑了这个片段以包含 Dowards 的建议。局部变量是不必要的，我只是为了便于阅读而保留它。

# iphone - 在 facebook 中查看喜欢的评论

> ID：10577661
> 
> 赞同：1
> 
> 时间：2012-05-14T04:53:25.043
> 
> 标签：iphone, ios

我正在构建一个应用程序，在该应用程序中，我陷入了需要做一些事情的位置，比如在 Facebook 上评论照片。

![在此处输入图像描述](../Images/5fcc2ffdec0c836fed14a205b0e3bc85.png)

顶部应该有图像，我们可以在下部添加评论。现在，我的问题是如何实现这一点 - 我想我有两个选择 - 1.使用自定义 UIView 并继续增加 Uiview。2\. 使用表格视图。

任何想法，我们如何才能实现这一目标。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-14T05:12:57.210

**绝对是一个`UITableView`**`UITableViewCell`带有图片的自定义，每个不同的文本（名称，评论，时间等）都有`UIImageView`一些`UILabels`。然后你需要能够计算每一行的高度

```
- (CGFloat)tableView:(UITableView *)tableView heightForRowAtIndexPath:(NSIndexPath *)indexPath 
```

* * *

用户输入新评论的最底部应该是带有 a`UIButton`和 a的单独视图`UITextField`

# c# - 想要使用 Web 浏览器控件保存网页

> ID：10577662
> 
> 赞同：4
> 
> 时间：2012-05-14T04:53:33.280
> 
> 标签：c#, windows-phone-7

我最近使用**网络浏览器控件**为 windows phone 7 创建了一个网络浏览器。**但是如果用户单击保存按钮**，我想保存一个网页。而且我还需要在另一个页面（Page1.xaml）中显示保存的页面，其中包含该特定网页的**标题和 URL ，以及该网页的****缩略图**。**由于是 c# 新手，我不知道如何使用独立存储**来保存网页。我研究了很多地方，但我没有得到答案。谁能帮我这个？？？我的网络浏览器名称是**"browsers"**，文本框名称是**"UrlTextBox"**，保存按钮名称是**"savebtn"**。提前感谢您的辛勤工作！！！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-14T12:34:59.267

浏览器保存的缓存文件对托管 WebBrowser 控件的应用程序不可用，因此要直接访问这些文件，您需要自己下载它们。

如果您只想要页面中的文本，那么您可以通过调用`SaveToString()`.
如果您需要更多内容，则需要解析通过调用返回的值`SaveToString`，然后自己请求任何额外的文件（图像、javascript、css 等），然后自己将所有内容保存到独立存储中。您还需要更新您保存的所有内容中的路径，以便在 IS 文件结构中使用适当的相对路径。

在创建屏幕截图方面，如果您乐于在该特定点使用屏幕副本，您可以执行如下所示的操作：[http://www.jeff.wilcox.name/2011/10/screenshots-cs-如何在您的设备上捕获您的应用程序的屏幕截图/](http://www.jeff.wilcox.name/2011/10/screenshots-cs-how-to-capture-screenshots-of-your-app-on-your-device/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-23T08:05:55.307

从 Silverlight #WP7 应用程序中截取屏幕截图。看看这里 - [http://blog.galasoft.ch/archive/2010/12/28/taking-a-screenshot-from-within-a-silverlight-wp7-application.aspx](http://blog.galasoft.ch/archive/2010/12/28/taking-a-screenshot-from-within-a-silverlight-wp7-application.aspx)

# javascript - 使用用户代理对黑莓设备进行分类

> ID：10577664
> 
> 赞同：0
> 
> 时间：2012-05-14T04:53:40.463
> 
> 标签：javascript, blackberry, user-agent

我需要根据操作系统版本对黑莓设备进行分类。

如果 BB5 和 BB6 则 {do this}

如果 BB7 及以上，则{执行此操作}

我知道，BB 5 useragent 看起来像这样：

**BlackBerry9700/5.xxx 配置文件/MIDP-2.1 配置/CLDC-1.1 VendorID/229**

BB 6 以后的用户代理是：

**Mozilla/5.0 (BlackBerry; U; BlackBerry 9800; zh-TW) AppleWebKit/534.1+ (KHTML, like Gecko) Version/6.xxx Mobile Safari/534.1+**

那么，我如何对 5&6 和 7&above 进行分类？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-14T05:14:32.203

开源的**Detect Mobile Browsers**脚本可能正是您想要的。

当访问该网页时，该网页还包含以多种格式下载脚本的链接，它将通过一个实时示例向您显示相关信息。

在不是移动设备的台式电脑上，我收到以下信息：

**未检测到移动浏览器。**
**Mozilla/5.0 (Windows NT 5.1; rv:12.0) Gecko/20100101 Firefox/12.0**

[http://detectmobilebrowsers.com/](http://detectmobilebrowsers.com/)

*PS 如果您确实使用该脚本，请注意要在变量上使用布尔值**true**或**false**（即，在变量名之前使用**!!**来测试是否为 false）。*

这是我完成的 jsfiddle 示例，因此您可以使用黑莓设备进行测试。

[http://jsfiddle.net/sPBrL/4/](http://jsfiddle.net/sPBrL/4/)

# java - 我如何学习编程竞赛的算法？

> ID：10577666
> 
> 赞同：5
> 
> 时间：2012-05-14T04:53:58.350
> 
> 标签：java, algorithm

学习编程竞赛（例如 USACO）算法的最佳方法是什么。我刚进入白银部门，需要开始学习算法。是否有任何好的书籍或教程来学习 Java 中的算法和技术，例如 Dijkstra's、Dynamic Programming、Flood-fill 等，并且实际上能够知道如何实现它们来解决问题？非常感谢您的帮助！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-14T05:13:11.647

1.  实践！这是最重要的一点。定期在[SPOJ](http://SPOJ.pl "SPOJ")、[UVA](http://uva.onlinejudge.org "紫外线A")等在线评委中解决问题。解决更多问题将使您熟悉编程比赛中提出的问题的类型和格式。这样，您还将提高推导自己的算法和看穿问题的能力。

2.  获取[算法简介，Cormen](https://rads.stackoverflow.com/amzn/click/com/0262032937 "算法导论，Cormen")。这是一本学习和分析算法和数据结构的优秀书籍。

# html - 需要语义标记

> ID：10577667
> 
> 赞同：1
> 
> 时间：2012-05-14T04:54:04.650
> 
> 标签：html, accessibility, semantic-markup

什么是学生/员工信息等数据的最佳语义和可访问标记。

我有一个页面，我想显示姓名（名字+姓氏）、地址、生日、电话号码、电子邮件、网站、专业、未成年人、高中、父亲姓名、母亲姓名等个人信息。

它不是表格数据，因为这不是数据列表。这是仅关于一个人/对象/学校/公司的信息。

它可以以一列、两列或三列混合布局呈现。例子

```
姓名
电话号码 | 电子邮件 | 网站
------------------------------
章节标题
专业 | 次要的
当前gpa | 上学期gpa

章节标题
------------------------------
父亲| 高分辨率照片| CLIPARTO 母亲
学校| 大学

```

我正在考虑使用 Div + DL，但对于可访问性来说似乎有点矫枉过正。

```
<div>
  <h3>Title</h3>
  <div class="row">
    <dl>
       <dt>Major</dt>
       <dd>Computer Science</dd>
     </dl>

     <dl>
       <dt>Minor</dt>
       <dd>Math</dd>
     </dl>

   </div>
 </div> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-15T02:43:48.703

微格式ftw。你可以使用 dl，虽然我会使用 ul，但这确实是特权；这很有意义，就像使用列表对几乎任何事情都有意义一样，但这确实是您的意见。您可以为学生使用 hcard 微格式。对于他的成绩和专业……我不太确定；我 100% 相信并支持微格式，但也有一些灰色地带。你可以自己做决定。你可以为父母使用 xfn (rel="parent")，但专业还是取决于你。参考： http: [//microformats.org](http://microformats.org)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-14T05:09:42.907

HTML 中没有此类信息的语义标记，除非可能对“语义”一词使用奇怪的语义。但是数据*是*表格的，因为它可以组织为一个两列的表，一列中的属性名称，另一列中的属性值。无论您使用表格、描述列表还是其他东西，都应该取决于默认渲染的可接受性和样式的易用性。

HTML 4 定义的使用`dl`是错误的（这不是*定义*列表），但 HTML 4 在这个问题上是自相矛盾的，实际视图（和 HTML5 视图）`dl`只是名称/值对的列表。如果您决定使用它，那么拥有一个`dl`包含多个这样的对的元素可能是最简单的。

但是，如果要通过标题分隔项目，那么最好为标题添加标题标记，并`dl`在每个标题后放置一个表格或一个元素。

# javascript - jQuery No-Ui-Slider 将指针设置为所需值

> ID：10577669
> 
> 赞同：0
> 
> 时间：2012-05-14T04:54:09.463
> 
> 标签：javascript, jquery, slider

我正在使用 Refreshless.com (http://refreshless.com/nouislider/) 的 NoUIslider

```
$("#slider").noUiSlider("init", 
       { dontActivate: "lower", startMax: "40%", scale: [0, 500],
       tracker: function(){
                                foo();
                            }, 
       clickmove: function(){
                                foo();
                            }
                        });
foo(); 
```

滑块的值读取为：

```
 Math.ceil($("#slider").noUiSlider("getValue", {point: ""})); 
```

我需要将滑块设置为用户在文本框中输入的值。文档很少，我尝试了几件事，但没有移动滑块：

```
$("#slider").noUiSlider("move", {
        moveStyle: "animate",
        setTo: [members],
        scale: [10, 500],
        saveScale: true
}); 
```

所有选项都已用尽，我需要你的帮助。谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-23T17:15:44.973

对于 setTo 参数，使用指定两个滑块值的数组。即使当我将此插件与单个滑块一起使用时，除非我使用具有两个值的数组，否则 setTo 也是无效的。将您的代码更改为以下内容：

```
$("#slider").noUiSlider("move", {
    moveStyle: "animate",
    setTo: [30, 200],
    scale: [10, 500],
    saveScale: true
}); 
```

如果您使用单个滑块，只需将两个数组成员设置为您希望单个滑块所在的位置（即 [30, 30]）。

顺便说一句，我停止使用这个滑块插件，因为它太古怪了。我开始使用 Egor Khmelev 的滑块插件 (http://egorkhmelev.github.com/jslider/)，效果很好。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-25T13:43:20.387

我通过禁用动画并将值设置为同一范围内的整数来使其工作 - 你不需要像我之前想的那样计算出一个等价的比例。

# css - 如何使 Internet Explorer 8 支持 nth child() CSS 元素？

> ID：10577674
> 
> 赞同：26
> 
> 时间：2012-05-14T04:54:32.097
> 
> 标签：css, internet-explorer-8, compatibility, css-selectors, ie8-compatibility-mode

我想给我的表格行一个斑马条纹效果。在所有其他浏览器中，它可以使用 CSS nth 子元素来完成。但我也想做IE 8。那么我该怎么做呢？

* * *

## 回答 #1

> 赞同：57
> 
> 时间：2013-05-04T20:36:21.890

使用 polyfill：[Selectivizr](http://selectivizr.com/)就足够了。

没有 polyfill：由于 IE8 支持第一个孩子，你可以欺骗它来支持 iE8 中的第 n 个孩子，即

```
/*li:nth-child(2)*/
li:first-child + li {}/*Works for IE8*/ 
```

虽然我们无法模拟复杂的选择器，即 IE8 的 nth-child(2n+1) 或 nth-child(odd)。

* * *

## 回答 #2

> 赞同：36
> 
> 时间：2013-04-18T22:04:16.767

作为 Selectivizr 的替代方案，您可以使用一点 jQuery：

```
$('.your-list li:nth-child(3n+1)').addClass('nth-child-3np1'); 
```

然后在你的 CSS 中添加第二个选择器：

```
:nth-child(3n+1)
{
    clear: both;
}

.nth-child-3np1
{
    clear: both;
} 
```

* * *

## 回答 #3

> 赞同：26
> 
> 时间：2012-05-14T05:00:00.077

您可以使用[http://selectivizr.com/](http://selectivizr.com/) JS，它支持 IE 的 css3 选择器。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2016-07-28T06:07:16.893

'first-child' 和 '+' 选择器在 IE7 中都可用，而 '+' 是相加的。

因此 'nth-child' 可以通过连续添加 '+' 选择器来模拟，所以：

```
tr:nth-child(4) 
```

变成：

```
tr:first-child + tr + tr + tr 
```

如果所有兄弟元素都相同，则“*”通配符就足够了，如下所示：

```
tr:first-child + * + * + * 
```

如果指定很多行，这将减少 css 文件的大小。

请注意，选择器之间的空格不是必需的，因此可以通过将它们排除在外来进一步减小文件大小，因此选择第 1、第 3 和第 5 行：

```
tr:first-child,tr:first-child+*+*,tr:first-child+*+*+*+* 
```

当然，一个人不想迎合非常大的桌子！

如果将`*`用作填充符，请确保为`:first-child`元素和最后一个元素指定显式标记名，因为该规则将针对 DOM 中的每个元素进行测试，并且明确指定这两个元素会在特定浏览器应用它的任何一端强制失败规则首先，而不是在它必须跨过每个序列中的几个元素以最终使每个元素都失败的规则之后失败。不要无缘无故地让你的浏览器工作！

# sql - 如何通过脚本从 sql server 代理获取失败的作业？

> ID：10577676
> 
> 赞同：4
> 
> 时间：2012-05-14T04:54:44.683
> 
> 标签：sql, sql-server, sql-server-2008

我想通过 sql 脚本获取 sql server 代理无法启动或运行的失败作业...

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-05-17T05:24:15.603

我创建了一个视图来获取 sql server 中的失败作业

```
CREATE VIEW dbo.View_Failed_Jobs
    AS
    SELECT   Job.instance_id
        ,SysJobs.job_id
        ,SysJobs.name as 'JOB_NAME'
        ,SysJobSteps.step_name as 'STEP_NAME'
        ,Job.run_status
        ,Job.sql_message_id
        ,Job.sql_severity
        ,Job.message
        ,Job.exec_date
        ,Job.run_duration
        ,Job.server
        ,SysJobSteps.output_file_name
    FROM    (SELECT Instance.instance_id
        ,DBSysJobHistory.job_id
        ,DBSysJobHistory.step_id
        ,DBSysJobHistory.sql_message_id
        ,DBSysJobHistory.sql_severity
        ,DBSysJobHistory.message
        ,(CASE DBSysJobHistory.run_status
            WHEN 0 THEN 'Failed'
            WHEN 1 THEN 'Succeeded'
            WHEN 2 THEN 'Retry'
            WHEN 3 THEN 'Canceled'
            WHEN 4 THEN 'In progress'
        END) as run_status
        ,((SUBSTRING(CAST(DBSysJobHistory.run_date AS VARCHAR(8)), 5, 2) + '/'
        + SUBSTRING(CAST(DBSysJobHistory.run_date AS VARCHAR(8)), 7, 2) + '/'
        + SUBSTRING(CAST(DBSysJobHistory.run_date AS VARCHAR(8)), 1, 4) + ' '
        + SUBSTRING((REPLICATE('0',6-LEN(CAST(DBSysJobHistory.run_time AS varchar)))
        + CAST(DBSysJobHistory.run_time AS VARCHAR)), 1, 2) + ':'
        + SUBSTRING((REPLICATE('0',6-LEN(CAST(DBSysJobHistory.run_time AS VARCHAR)))
        + CAST(DBSysJobHistory.run_time AS VARCHAR)), 3, 2) + ':'
        + SUBSTRING((REPLICATE('0',6-LEN(CAST(DBSysJobHistory.run_time as varchar)))
        + CAST(DBSysJobHistory.run_time AS VARCHAR)), 5, 2))) AS 'exec_date'
        ,DBSysJobHistory.run_duration
        ,DBSysJobHistory.retries_attempted
        ,DBSysJobHistory.server
        FROM msdb.dbo.sysjobhistory DBSysJobHistory
        JOIN (SELECT DBSysJobHistory.job_id
            ,DBSysJobHistory.step_id
            ,MAX(DBSysJobHistory.instance_id) as instance_id
            FROM msdb.dbo.sysjobhistory DBSysJobHistory
            GROUP BY DBSysJobHistory.job_id
            ,DBSysJobHistory.step_id
            ) AS Instance ON DBSysJobHistory.instance_id = Instance.instance_id
        WHERE DBSysJobHistory.run_status <> 1
        ) AS Job
    JOIN msdb.dbo.sysjobs SysJobs
       ON (Job.job_id = SysJobs.job_id)
    JOIN msdb.dbo.sysjobsteps SysJobSteps
       ON (Job.job_id = SysJobSteps.job_id AND Job.step_id = SysJobSteps.step_id)
    GO 
```

-- 现在执行select语句查询失败的作业

```
Select * from View_Failed_Jobs 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-05-14T05:05:49.663

这是 SQL Server 2008 的示例：
[SQL Server 代理作业查询示例](http://www.toadworld.com/platforms/sql-server/w/wiki/10351.sql-server-agent-job-query-samples)

如果你在谷歌上搜索“sql server failed jobs”，你会发现更多，但不幸的是，大多数示例都没有说明它们是否适用于 SQL Server 2008，例如[这个](http://sqlschoolhouse.wordpress.com/2010/07/27/get-failed-jobs-from-sql-server-agent/)。

* * *

**编辑：**

提示：当您从第一个链接复制代码时，请使用“查看源代码”按钮： ![查看源代码](../Images/9b0cb70aded6761305bae1b0d075e77b.png)

我首先尝试了一个“复制到剪贴板”按钮，但是它在 SQL Server 抱怨的 SQL 代码中生成了一些 HTML 标记（并且没有让我执行查询）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-02-01T04:02:37.383

您可以使用使用 sql 代理的快捷方式->作业活动监视器。[![在此处输入图像描述](../Images/51f719836f57360d351d8e9e98ff0d1d.png)](https://i.stack.imgur.com/4EmcA.jpg)

# c# - 两个选定日期之间的天数

> ID：10577678
> 
> 赞同：-2
> 
> 时间：2012-05-14T04:54:49.270
> 
> 标签：c#, datetime

> **可能重复：**
> [两个日期之间的天数差异](https://stackoverflow.com/questions/2330302/days-difference-between-two-dates)

我需要知道两个选定日期之间的天数。通常用于比较我使用 DateTime.CompareTo 的日期，但这里的情况有所不同。在此先感谢，并对愚蠢的问题感到抱歉。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-14T04:56:59.377

用这个：

```
 int DaysBetween(DateTime d1, DateTime d2) {
    TimeSpan span = d2.Subtract(d1);
    return Math.Abs((int)span.TotalDays);
} 
```

///

```
Console.WriteLine(DaysBetween(DateTime.Now.AddDays(10), DateTime.Now) ); 
```

将返回 10

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-14T04:57:30.487

不是原始解决方案，但：

```
DateTime d1=DateTime.MinValue;
DateTime d2=DateTime.MaxValue;
TimeSpan span=d2-d1;
Console.WriteLine
         ( "There're {0} days between {1} and {2}" , span.TotalDays, d1.ToString(), d2.ToString() ); 
```

资料来源：[http ://social.msdn.microsoft.com/Forums/en-US/csharpgeneral/thread/0625cefa-461b-4a3c-b7f0-d39d06741b70/](http://social.msdn.microsoft.com/Forums/en-US/csharpgeneral/thread/0625cefa-461b-4a3c-b7f0-d39d06741b70/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-14T05:37:35.413

试试这个（你可以使用 .net TimeSpan 类改进它）

```
 public static int DateDiff(string Interval, DateTime Date1, DateTime Date2)
    {
        int difVale = 0;
        DateTime startDate, endDate;

        if (Date1 > Date2)
        {
            endDate = Date1; 
            startDate = Date2;
        }
        else
        {
            startDate = Date1; 
            endDate = Date2;
        }
        switch (Interval)
        {
            case "D":
            case "d":
                for (int nYear = startDate.Year; nYear < endDate.Year; nYear++)
                {
                    difVale += new DateTime(nYear, 12, 31).DayOfYear;
                }
                difVale += endDate.DayOfYear - startDate.DayOfYear;
                break;

            case "M":
            case "m":
                difVale = endDate.Year - startDate.Year;
                difVale = difVale * 12;
                difVale += endDate.Month - startDate.Month;
                break;
            case "Y":
            case "y":
                difVale = endDate.Year - startDate.Year;
                break;
        }
        if (Date1 > Date2)
        {
            difVale = -difVale;
        }
        return difVale;
    } 
```

# android - Android：清单：$ 符号代表什么？

> ID：10577680
> 
> 赞同：1
> 
> 时间：2012-05-14T04:54:52.410
> 
> 标签：android, android-manifest

以下代码示例用于android设备管理员应用程序开发 `receiver android:name=".app.DeviceAdminSample$DeviceAdminSampleReceiver`

“DeviceAdminSample”和“DeviceAdminSampleReceiver”之间的 $ 符号在这里是什么意思？完整的xml如下...

```
<activity android:name=".app.DeviceAdminSample"
                android:label="@string/activity_sample_device_admin">
        <intent-filter>
            <action android:name="android.intent.action.MAIN" />
            <category android:name="android.intent.category.SAMPLE_CODE" />
        </intent-filter>
    </activity>
    <receiver android:name=".app.DeviceAdminSample$DeviceAdminSampleReceiver"
            android:label="@string/sample_device_admin"
            android:description="@string/sample_device_admin_description"
            android:permission="android.permission.BIND_DEVICE_ADMIN">
        <meta-data android:name="android.app.device_admin"
                android:resource="@xml/device_admin_sample" />
        <intent-filter>
            <action android:name="android.app.action.DEVICE_ADMIN_ENABLED" />
        </intent-filter>
    </receiver> 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-14T04:57:49.993

DeviceAdminSampleReceiver 类是 DeviceAdminSample 中的一个内部类。

Java 将使用 $ 符号编译内部类。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-14T05:00:39.177

这是一个例子

```
public class DeviceAdminSample{

private String someInstanceVariable = "";

public class DeviceAdminSampleReceiveranonymous {
 //Inner Class
}
} 
```

$ 表示内部类。

您可以参考[此处](http://blog.andresteingress.com/2011/10/12/anonymous-inner-classes-in-android/)的 $ 类示例。

# javascript - 您可以使用嵌入在 iOS 应用程序的 UIWevView 中的 Facebook 评论插件进行静默登录吗？

> ID：10577687
> 
> 赞同：1
> 
> 时间：2012-05-14T04:55:24.543
> 
> 标签：javascript, facebook, facebook-graph-api, facebook-comments

我们在 iOS 应用程序的 UIWebView 中使用 Facebook 评论。超过 50% 的用户使用 Facebook 登录到我们的应用程序，因此我们拥有该用户的访问令牌。

当我们在应用程序的 UIWebview 中加载 FB 评论插件时，用户需要重新进行身份验证似乎很疯狂。

有没有办法利用用户可能已经通过我们的应用程序进行身份验证并使用他们的访问令牌静默登录这一事实？我希望找到某种将`access_token`参数传递给评论插件的方法，但在文档中看不到任何内容。

# objective-c - 在 iOS 5 中获取最后一个重定向的 url？

> ID：10577690
> 
> 赞同：2
> 
> 时间：2012-05-14T04:55:56.513
> 
> 标签：objective-c, ios, web-services, ios5

有人可以发布最简单的工作代码，当我 GET 请求一个 url 时可以获得最后一个重定向的 url(nth) 吗？

我知道我需要使用异步请求，但我无法制定出解决问题的完整工作代码。

我正在使用 ios5，所以我可以使用 ios5 中最新添加的异步内置功能。

我已经尝试了很多东西，但我仍然没有成功。使用下面的代码，我尝试发送带有参数的获取请求，但是由于站点的重定向，这些参数不知何故丢失了:(！

```
NSURLRequest *request = [NSURLRequest requestWithURL:urlOriginal];

[NSURLConnection 
sendAsynchronousRequest:request
queue:[NSOperationQueue mainQueue]
completionHandler:^(NSURLResponse *response, NSData *data, NSError *error) 
{
    NSLog("the returned data should be the final data of the redirected url with parameters but it is not");
}];

} 
```

**编辑**

所以这就是我现在所做的：

```
NSURLRequest *requestOriginal = [NSURLRequest requestWithURL:urlOriginal];

 NSURLConnection *connection = [[NSURLConnection alloc] initWithRequest:requestOriginal delegate:self];

[connection start]; 
```

和委托：

```
-(NSURLRequest *)connection:(NSURLConnection *)connection
        willSendRequest:(NSURLRequest *)request
       redirectResponse:(NSURLResponse *)redirectResponse
{

    if (redirectResponse) {
    NSMutableURLRequest *r = [request mutableCopy]; // original request
    [r setURL: [request URL]];
    return r;
} else {
     NSLog(@"redirecting to : %@", [request URL]);
    return request;
}
} 
```

并且日志为我提供了我需要的正确请求 url 以及最初传递的 get 参数。

现在如何从这个请求中获取数据？另一个 completionHandler 委托方法？

编辑2：

好的，所以我也实现了其他的委托：

*   (void)connection:(NSURLConnection *)connection didReceiveResponse:(NSURLResponse *)response

*   (void)connection:(NSURLConnection *)connection didReceiveData:(NSData *)data

*   (void)connection:(NSURLConnection *)connection didFailWithError:(NSError *)error

*   (void)connectionDidFinishLoading:(NSURLConnection *)connection

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-14T05:29:07.150

请阅读文档中的[处理重定向和其他请求更改](https://developer.apple.com/library/ios/#documentation/Cocoa/Conceptual/URLLoadingSystem/Articles/RequestChanges.html#//apple_ref/doc/uid/TP40009506-SW1)。简而言之，您需要 a) 为您的连接提供一个委托，并且 b)`connection:willSendRequest:redirectResponse:`在所述委托中实现该方法。我不明白你在你的问题中到底想做什么——你只是想要你的连接被重定向到的 URL 中的数据，还是你想看到重定向的请求？无论哪种方式，实施上述方法应该会有所帮助。您的委托将能够看到重定向的请求，并且原封不动地返回它应该会导致连接加载新的 URL。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-01-09T09:16:17.640

我们可以通过 NSMutableURLRequest 实现这一点。我已按照这些步骤操作，对我来说效果很好。通过下面提到的链接。

URL：[点击这里：获取最终重定向的 url](https://stackoverflow.com/a/59660548/1773472)

PS：如果您需要进一步的帮助，请告诉我。

# android - 使用 3G 连接时 RTSP 不工作，但使用 WiFi 时它工作

> ID：10577693
> 
> 赞同：0
> 
> 时间：2012-05-14T04:56:27.897
> 
> 标签：android, streaming, rtsp, android-wifi, rtsp-client

我一直在研究播放不同广播 rtsp 的应用程序，当我在仅使用 wifi（Android 4.3）的平板电脑上试用它时，我实际上可以很好地听到广播电台。但是，当我在手机上测试它（使用 Android 2.3）时，我无法使用它的 3G 连接获得任何结果。但是，当我打开手机的wifi时，它可以工作。

例如，此 rtsp 不适用于这两种情况：rtsp://movil.mediastream.com.pe/av_rpp/audio01

我错过了什么？为什么它适用于wifi而不适用于3G？我该怎么做才能让它在带有 3G 的 Android 2.3 中运行？使应用程序正常工作的替代方法是什么？提前致谢

这是我用来播放rtsp的功能；

```
public void playUrl( Context context, String myUrl )
{
    if ( myMusicPlayer == null )    { 

        myMusicPlayer = new MediaPlayer(); 
        myMusicPlayer.setAudioStreamType(AudioManager.STREAM_MUSIC);

        try {
            myMusicPlayer.setDataSource( myUrl );

        } catch (IllegalArgumentException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
            Log.d( TAG, "Argument error: " + e.getMessage() ); 
        } catch (IllegalStateException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
            Log.d( TAG, "State error: " + e.getMessage() ); 
        } catch (IOException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
            Log.d( TAG, "IO error: " + e.getMessage() ); 
        } finally {
            Log.d( TAG, "myMusicPlayer with url: " + myUrl + " created from playUrl()" ); 

            try {
                myMusicPlayer.prepare();
            } catch (IllegalStateException e) {
                // TODO Auto-generated catch block
                e.printStackTrace();
            } catch (IOException e) {
                // TODO Auto-generated catch block
                e.printStackTrace();
            } finally {
                Log.d( TAG, "myMusicPlayer with url: " + myUrl + " prepared from playUrl()" ); 

                isPaused = false;
                isStopped = false;

                myMusicPlayer.setVolume( 0.4f, 0.4f ); 
                myMusicPlayer.start(); 
            }

        }

    }   // end of if statement

} 
```

这是我在使用在 3G 中不起作用的 rtsp 之一时从 Android 鲨鱼那里得到的：

```
No.     Time        Source                Destination           Protocol Length Info
      1 0.000000    25.27.123.52          68.28.68.132          DNS      84     Standard query A rtsp.vog.sprintpcs.com

Frame 1: 84 bytes on wire (672 bits), 84 bytes captured (672 bits)
Linux cooked capture
Internet Protocol Version 4, Src: 25.27.123.52 (25.27.123.52), Dst: 68.28.68.132 (68.28.68.132)
User Datagram Protocol, Src Port: 2015 (2015), Dst Port: domain (53)
Domain Name System (query)

No.     Time        Source                Destination           Protocol Length Info
      2 0.885515    68.28.68.132          25.27.123.52          DNS      130    Standard query response A 68.28.31.20

Frame 2: 130 bytes on wire (1040 bits), 130 bytes captured (1040 bits)
Linux cooked capture
Internet Protocol Version 4, Src: 68.28.68.132 (68.28.68.132), Dst: 25.27.123.52 (25.27.123.52)
User Datagram Protocol, Src Port: domain (53), Dst Port: 2015 (2015)
Domain Name System (response)

No.     Time        Source                Destination           Protocol Length Info
      3 0.889796    25.27.123.52          68.28.31.20           TCP      76     51864 > rtsp [SYN] Seq=0 Win=65535 Len=0 MSS=1432 SACK_PERM=1 TSval=68282 TSecr=0 WS=2

Frame 3: 76 bytes on wire (608 bits), 76 bytes captured (608 bits)
Linux cooked capture
Internet Protocol Version 4, Src: 25.27.123.52 (25.27.123.52), Dst: 68.28.31.20 (68.28.31.20)
Transmission Control Protocol, Src Port: 51864 (51864), Dst Port: rtsp (554), Seq: 0, Len: 0

No.     Time        Source                Destination           Protocol Length Info
      4 1.369477    68.28.31.20           25.27.123.52          TCP      80     rtsp > 51864 [SYN, ACK] Seq=0 Ack=1 Win=4296 Len=0 MSS=1460 WS=1 TSval=1377591467 TSecr=68282 SACK_PERM=1

Frame 4: 80 bytes on wire (640 bits), 80 bytes captured (640 bits)
Linux cooked capture
Internet Protocol Version 4, Src: 68.28.31.20 (68.28.31.20), Dst: 25.27.123.52 (25.27.123.52)
Transmission Control Protocol, Src Port: rtsp (554), Dst Port: 51864 (51864), Seq: 0, Ack: 1, Len: 0

No.     Time        Source                Destination           Protocol Length Info
      5 1.370102    25.27.123.52          68.28.31.20           TCP      68     51864 > rtsp [ACK] Seq=1 Ack=1 Win=131070 Len=0 TSval=68379 TSecr=1377591467

Frame 5: 68 bytes on wire (544 bits), 68 bytes captured (544 bits)
Linux cooked capture
Internet Protocol Version 4, Src: 25.27.123.52 (25.27.123.52), Dst: 68.28.31.20 (68.28.31.20)
Transmission Control Protocol, Src Port: 51864 (51864), Dst Port: rtsp (554), Seq: 1, Ack: 1, Len: 0

No.     Time        Source                Destination           Protocol Length Info
      6 1.372055    25.27.123.52          68.28.31.20           RTSP     581    OPTIONS rtsp://movil.mediastream.com.pe/av_rpp/audio01 RTSP/1.0

Frame 6: 581 bytes on wire (4648 bits), 581 bytes captured (4648 bits)
Linux cooked capture
Internet Protocol Version 4, Src: 25.27.123.52 (25.27.123.52), Dst: 68.28.31.20 (68.28.31.20)
Transmission Control Protocol, Src Port: 51864 (51864), Dst Port: rtsp (554), Seq: 1, Ack: 1, Len: 513
Real Time Streaming Protocol

No.     Time        Source                Destination           Protocol Length Info
      7 2.074345    68.28.31.20           25.27.123.52          TCP      68     rtsp > 51864 [ACK] Seq=1 Ack=514 Win=4809 Len=0 TSval=1377592153 TSecr=68379

Frame 7: 68 bytes on wire (544 bits), 68 bytes captured (544 bits)
Linux cooked capture
Internet Protocol Version 4, Src: 68.28.31.20 (68.28.31.20), Dst: 25.27.123.52 (25.27.123.52)
Transmission Control Protocol, Src Port: rtsp (554), Dst Port: 51864 (51864), Seq: 1, Ack: 514, Len: 0

No.     Time        Source                Destination           Protocol Length Info
      8 2.074776    25.27.123.52          68.28.31.20           RTSP     448    DESCRIBE rtsp://movil.mediastream.com.pe/av_rpp/audio01 RTSP/1.0

Frame 8: 448 bytes on wire (3584 bits), 448 bytes captured (3584 bits)
Linux cooked capture
Internet Protocol Version 4, Src: 25.27.123.52 (25.27.123.52), Dst: 68.28.31.20 (68.28.31.20)
Transmission Control Protocol, Src Port: 51864 (51864), Dst Port: rtsp (554), Seq: 514, Ack: 1, Len: 380
Real Time Streaming Protocol

No.     Time        Source                Destination           Protocol Length Info
      9 2.169196    25.27.123.52          50.22.213.141         SSL      69     [Malformed Packet]

Frame 9: 69 bytes on wire (552 bits), 69 bytes captured (552 bits)
Linux cooked capture
Internet Protocol Version 4, Src: 25.27.123.52 (25.27.123.52), Dst: 50.22.213.141 (50.22.213.141)
Transmission Control Protocol, Src Port: 39306 (39306), Dst Port: https (443), Seq: 1, Ack: 1, Len: 1
Secure Sockets Layer
[Malformed Packet: SSL]

No.     Time        Source                Destination           Protocol Length Info
     10 2.419297    68.28.31.20           25.27.123.52          RTSP     329    Reply: RTSP/1.0 200 OK

Frame 10: 329 bytes on wire (2632 bits), 329 bytes captured (2632 bits)
Linux cooked capture
Internet Protocol Version 4, Src: 68.28.31.20 (68.28.31.20), Dst: 25.27.123.52 (25.27.123.52)
Transmission Control Protocol, Src Port: rtsp (554), Dst Port: 51864 (51864), Seq: 1, Ack: 894, Len: 261
Real Time Streaming Protocol

No.     Time        Source                Destination           Protocol Length Info
     11 2.419766    25.27.123.52          68.28.31.20           TCP      68     51864 > rtsp [ACK] Seq=894 Ack=262 Win=130812 Len=0 TSval=68589 TSecr=1377592715

Frame 11: 68 bytes on wire (544 bits), 68 bytes captured (544 bits)
Linux cooked capture
Internet Protocol Version 4, Src: 25.27.123.52 (25.27.123.52), Dst: 68.28.31.20 (68.28.31.20)
Transmission Control Protocol, Src Port: 51864 (51864), Dst Port: rtsp (554), Seq: 894, Ack: 262, Len: 0

No.     Time        Source                Destination           Protocol Length Info
     12 2.509346    50.22.213.141         25.27.123.52          TCP      68     https > 39306 [ACK] Seq=1 Ack=2 Win=513 Len=0 TSval=3587254903 TSecr=68539

Frame 12: 68 bytes on wire (544 bits), 68 bytes captured (544 bits)
Linux cooked capture
Internet Protocol Version 4, Src: 50.22.213.141 (50.22.213.141), Dst: 25.27.123.52 (25.27.123.52)
Transmission Control Protocol, Src Port: https (443), Dst Port: 39306 (39306), Seq: 1, Ack: 2, Len: 0

No.     Time        Source                Destination           Protocol Length Info
     13 2.510210    25.27.123.52          50.22.213.141         SSL      89     Continuation Data

Frame 13: 89 bytes on wire (712 bits), 89 bytes captured (712 bits)
Linux cooked capture
Internet Protocol Version 4, Src: 25.27.123.52 (25.27.123.52), Dst: 50.22.213.141 (50.22.213.141)
Transmission Control Protocol, Src Port: 39306 (39306), Dst Port: https (443), Seq: 2, Ack: 1, Len: 21
Secure Sockets Layer

No.     Time        Source                Destination           Protocol Length Info
     14 2.819330    68.28.31.20           25.27.123.52          RTSP/SDP 740    Reply: RTSP/1.0 200 OK, with session description

Frame 14: 740 bytes on wire (5920 bits), 740 bytes captured (5920 bits)
Linux cooked capture
Internet Protocol Version 4, Src: 68.28.31.20 (68.28.31.20), Dst: 25.27.123.52 (25.27.123.52)
Transmission Control Protocol, Src Port: rtsp (554), Dst Port: 51864 (51864), Seq: 262, Ack: 894, Len: 672
Real Time Streaming Protocol

No.     Time        Source                Destination           Protocol Length Info
     15 2.819649    25.27.123.52          68.28.31.20           TCP      68     51864 > rtsp [ACK] Seq=894 Ack=934 Win=130140 Len=0 TSval=68669 TSecr=1377592998

Frame 15: 68 bytes on wire (544 bits), 68 bytes captured (544 bits)
Linux cooked capture
Internet Protocol Version 4, Src: 25.27.123.52 (25.27.123.52), Dst: 68.28.31.20 (68.28.31.20)
Transmission Control Protocol, Src Port: 51864 (51864), Dst Port: rtsp (554), Seq: 894, Ack: 934, Len: 0

No.     Time        Source                Destination           Protocol Length Info
     16 2.914297    50.22.213.141         25.27.123.52          SSL      78     Continuation Data

Frame 16: 78 bytes on wire (624 bits), 78 bytes captured (624 bits)
Linux cooked capture
Internet Protocol Version 4, Src: 50.22.213.141 (50.22.213.141), Dst: 25.27.123.52 (25.27.123.52)
Transmission Control Protocol, Src Port: https (443), Dst Port: 39306 (39306), Seq: 1, Ack: 23, Len: 10
Secure Sockets Layer

No.     Time        Source                Destination           Protocol Length Info
     17 2.928645    25.27.123.52          68.28.31.20           RTSP     502    SETUP rtsp://movil.mediastream.com.pe/av_rpp/audio01/trackID=1 RTSP/1.0

Frame 17: 502 bytes on wire (4016 bits), 502 bytes captured (4016 bits)
Linux cooked capture
Internet Protocol Version 4, Src: 25.27.123.52 (25.27.123.52), Dst: 68.28.31.20 (68.28.31.20)
Transmission Control Protocol, Src Port: 51864 (51864), Dst Port: rtsp (554), Seq: 894, Ack: 934, Len: 434
Real Time Streaming Protocol

No.     Time        Source                Destination           Protocol Length Info
     18 2.938016    25.27.123.52          50.22.213.141         TCP      68     39306 > https [FIN, ACK] Seq=23 Ack=11 Win=65348 Len=0 TSval=68692 TSecr=3587255189

Frame 18: 68 bytes on wire (544 bits), 68 bytes captured (544 bits)
Linux cooked capture
Internet Protocol Version 4, Src: 25.27.123.52 (25.27.123.52), Dst: 50.22.213.141 (50.22.213.141)
Transmission Control Protocol, Src Port: 39306 (39306), Dst Port: https (443), Seq: 23, Ack: 11, Len: 0

No.     Time        Source                Destination           Protocol Length Info
     19 3.519708    50.22.213.141         25.27.123.52          TCP      68     https > 39306 [ACK] Seq=11 Ack=24 Win=513 Len=0 TSval=3587255676 TSecr=68692

Frame 19: 68 bytes on wire (544 bits), 68 bytes captured (544 bits)
Linux cooked capture
Internet Protocol Version 4, Src: 50.22.213.141 (50.22.213.141), Dst: 25.27.123.52 (25.27.123.52)
Transmission Control Protocol, Src Port: https (443), Dst Port: 39306 (39306), Seq: 11, Ack: 24, Len: 0

No.     Time        Source                Destination           Protocol Length Info
     20 3.519727    50.22.213.141         25.27.123.52          TCP      68     https > 39306 [FIN, ACK] Seq=11 Ack=24 Win=513 Len=0 TSval=3587255676 TSecr=68692

Frame 20: 68 bytes on wire (544 bits), 68 bytes captured (544 bits)
Linux cooked capture
Internet Protocol Version 4, Src: 50.22.213.141 (50.22.213.141), Dst: 25.27.123.52 (25.27.123.52)
Transmission Control Protocol, Src Port: https (443), Dst Port: 39306 (39306), Seq: 11, Ack: 24, Len: 0

No.     Time        Source                Destination           Protocol Length Info
     21 3.520178    25.27.123.52          50.22.213.141         TCP      68     39306 > https [ACK] Seq=24 Ack=12 Win=65348 Len=0 TSval=68809 TSecr=3587255676

Frame 21: 68 bytes on wire (544 bits), 68 bytes captured (544 bits)
Linux cooked capture
Internet Protocol Version 4, Src: 25.27.123.52 (25.27.123.52), Dst: 50.22.213.141 (50.22.213.141)
Transmission Control Protocol, Src Port: 39306 (39306), Dst Port: https (443), Seq: 24, Ack: 12, Len: 0

No.     Time        Source                Destination           Protocol Length Info
     22 3.539004    68.28.31.20           25.27.123.52          TCP      68     rtsp > 51864 [ACK] Seq=934 Ack=1328 Win=5623 Len=0 TSval=1377593667 TSecr=68690

Frame 22: 68 bytes on wire (544 bits), 68 bytes captured (544 bits)
Linux cooked capture
Internet Protocol Version 4, Src: 68.28.31.20 (68.28.31.20), Dst: 25.27.123.52 (25.27.123.52)
Transmission Control Protocol, Src Port: rtsp (554), Dst Port: 51864 (51864), Seq: 934, Ack: 1328, Len: 0

No.     Time        Source                Destination           Protocol Length Info
     23 3.539010    68.28.31.20           25.27.123.52          RTSP     192    Reply: RTSP/1.0 500 Internal Server Error

Frame 23: 192 bytes on wire (1536 bits), 192 bytes captured (1536 bits)
Linux cooked capture
Internet Protocol Version 4, Src: 68.28.31.20 (68.28.31.20), Dst: 25.27.123.52 (25.27.123.52)
Transmission Control Protocol, Src Port: rtsp (554), Dst Port: 51864 (51864), Seq: 934, Ack: 1328, Len: 124
Real Time Streaming Protocol

No.     Time        Source                Destination           Protocol Length Info
     24 3.539159    25.27.123.52          68.28.31.20           TCP      68     51864 > rtsp [ACK] Seq=1328 Ack=1058 Win=130016 Len=0 TSval=68813 TSecr=1377593689

Frame 24: 68 bytes on wire (544 bits), 68 bytes captured (544 bits)
Linux cooked capture
Internet Protocol Version 4, Src: 25.27.123.52 (25.27.123.52), Dst: 68.28.31.20 (68.28.31.20)
Transmission Control Protocol, Src Port: 51864 (51864), Dst Port: rtsp (554), Seq: 1328, Ack: 1058, Len: 0

No.     Time        Source                Destination           Protocol Length Info
     25 3.543981    68.28.31.20           25.27.123.52          TCP      68     rtsp > 51864 [FIN, ACK] Seq=1058 Ack=1328 Win=5623 Len=0 TSval=1377593731 TSecr=68690

Frame 25: 68 bytes on wire (544 bits), 68 bytes captured (544 bits)
Linux cooked capture
Internet Protocol Version 4, Src: 68.28.31.20 (68.28.31.20), Dst: 25.27.123.52 (25.27.123.52)
Transmission Control Protocol, Src Port: rtsp (554), Dst Port: 51864 (51864), Seq: 1058, Ack: 1328, Len: 0

No.     Time        Source                Destination           Protocol Length Info
     26 3.584053    25.27.123.52          68.28.31.20           TCP      68     51864 > rtsp [ACK] Seq=1328 Ack=1059 Win=130016 Len=0 TSval=68822 TSecr=1377593731

Frame 26: 68 bytes on wire (544 bits), 68 bytes captured (544 bits)
Linux cooked capture
Internet Protocol Version 4, Src: 25.27.123.52 (25.27.123.52), Dst: 68.28.31.20 (68.28.31.20)
Transmission Control Protocol, Src Port: 51864 (51864), Dst Port: rtsp (554), Seq: 1328, Ack: 1059, Len: 0

No.     Time        Source                Destination           Protocol Length Info
     27 3.590624    25.27.123.52          68.28.31.20           TCP      68     51864 > rtsp [FIN, ACK] Seq=1328 Ack=1059 Win=130016 Len=0 TSval=68823 TSecr=1377593731

Frame 27: 68 bytes on wire (544 bits), 68 bytes captured (544 bits)
Linux cooked capture
Internet Protocol Version 4, Src: 25.27.123.52 (25.27.123.52), Dst: 68.28.31.20 (68.28.31.20)
Transmission Control Protocol, Src Port: 51864 (51864), Dst Port: rtsp (554), Seq: 1328, Ack: 1059, Len: 0

No.     Time        Source                Destination           Protocol Length Info
     28 3.874756    68.28.31.20           25.27.123.52          TCP      68     rtsp > 51864 [ACK] Seq=1059 Ack=1329 Win=5623 Len=0 TSval=1377594162 TSecr=68823

Frame 28: 68 bytes on wire (544 bits), 68 bytes captured (544 bits)
Linux cooked capture
Internet Protocol Version 4, Src: 68.28.31.20 (68.28.31.20), Dst: 25.27.123.52 (25.27.123.52)
Transmission Control Protocol, Src Port: rtsp (554), Dst Port: 51864 (51864), Seq: 1059, Ack: 1329, Len: 0

No.     Time        Source                Destination           Protocol Length Info
     29 17.501055   25.27.123.52          68.28.68.132          DNS      86 
```

这是我为一个适用于 wifi 和 3G 的 rtsp 获得的 pcap 文件：

```
No.     Time        Source                Destination           Protocol Length Info
      1 0.000000    107.20.164.42         25.27.123.52          TCP      56     http > 53888 [ACK] Seq=1 Ack=1 Win=4824 Len=0

Frame 1: 56 bytes on wire (448 bits), 56 bytes captured (448 bits)
Linux cooked capture
Internet Protocol Version 4, Src: 107.20.164.42 (107.20.164.42), Dst: 25.27.123.52 (25.27.123.52)
Transmission Control Protocol, Src Port: http (80), Dst Port: 53888 (53888), Seq: 1, Ack: 1, Len: 0

No.     Time        Source                Destination           Protocol Length Info
      2 10.627568   25.27.123.52          68.28.68.132          DNS      84     Standard query A rtsp.vog.sprintpcs.com

Frame 2: 84 bytes on wire (672 bits), 84 bytes captured (672 bits)
Linux cooked capture
Internet Protocol Version 4, Src: 25.27.123.52 (25.27.123.52), Dst: 68.28.68.132 (68.28.68.132)
User Datagram Protocol, Src Port: 61420 (61420), Dst Port: domain (53)
Domain Name System (query)

No.     Time        Source                Destination           Protocol Length Info
      3 11.085971   68.28.68.132          25.27.123.52          DNS      130    Standard query response A 68.28.31.20

Frame 3: 130 bytes on wire (1040 bits), 130 bytes captured (1040 bits)
Linux cooked capture
Internet Protocol Version 4, Src: 68.28.68.132 (68.28.68.132), Dst: 25.27.123.52 (25.27.123.52)
User Datagram Protocol, Src Port: domain (53), Dst Port: 61420 (61420)
Domain Name System (response)

No.     Time        Source                Destination           Protocol Length Info
      4 11.088280   25.27.123.52          68.28.31.20           TCP      76     51402 > rtsp [SYN] Seq=0 Win=65535 Len=0 MSS=1432 SACK_PERM=1 TSval=280424 TSecr=0 WS=2

Frame 4: 76 bytes on wire (608 bits), 76 bytes captured (608 bits)
Linux cooked capture
Internet Protocol Version 4, Src: 25.27.123.52 (25.27.123.52), Dst: 68.28.31.20 (68.28.31.20)
Transmission Control Protocol, Src Port: 51402 (51402), Dst Port: rtsp (554), Seq: 0, Len: 0

No.     Time        Source                Destination           Protocol Length Info
      5 11.184782   68.28.31.20           25.27.123.52          TCP      80     rtsp > 51402 [SYN, ACK] Seq=0 Ack=1 Win=4296 Len=0 MSS=1460 WS=1 TSval=1378652387 TSecr=280424 SACK_PERM=1

Frame 5: 80 bytes on wire (640 bits), 80 bytes captured (640 bits)
Linux cooked capture
Internet Protocol Version 4, Src: 68.28.31.20 (68.28.31.20), Dst: 25.27.123.52 (25.27.123.52)
Transmission Control Protocol, Src Port: rtsp (554), Dst Port: 51402 (51402), Seq: 0, Ack: 1, Len: 0

No.     Time        Source                Destination           Protocol Length Info
      6 11.185299   25.27.123.52          68.28.31.20           TCP      68     51402 > rtsp [ACK] Seq=1 Ack=1 Win=131070 Len=0 TSval=280444 TSecr=1378652387

Frame 6: 68 bytes on wire (544 bits), 68 bytes captured (544 bits)
Linux cooked capture
Internet Protocol Version 4, Src: 25.27.123.52 (25.27.123.52), Dst: 68.28.31.20 (68.28.31.20)
Transmission Control Protocol, Src Port: 51402 (51402), Dst Port: rtsp (554), Seq: 1, Ack: 1, Len: 0

No.     Time        Source                Destination           Protocol Length Info
      7 11.186806   25.27.123.52          68.28.31.20           RTSP     576    OPTIONS rtsp://67.212.178.250/live/lakalle.stream RTSP/1.0

Frame 7: 576 bytes on wire (4608 bits), 576 bytes captured (4608 bits)
Linux cooked capture
Internet Protocol Version 4, Src: 25.27.123.52 (25.27.123.52), Dst: 68.28.31.20 (68.28.31.20)
Transmission Control Protocol, Src Port: 51402 (51402), Dst Port: rtsp (554), Seq: 1, Ack: 1, Len: 508
Real Time Streaming Protocol

No.     Time        Source                Destination           Protocol Length Info
      8 11.405223   68.28.31.20           25.27.123.52          RTSP     353    Reply: RTSP/1.0 200 OK

Frame 8: 353 bytes on wire (2824 bits), 353 bytes captured (2824 bits)
Linux cooked capture
Internet Protocol Version 4, Src: 68.28.31.20 (68.28.31.20), Dst: 25.27.123.52 (25.27.123.52)
Transmission Control Protocol, Src Port: rtsp (554), Dst Port: 51402 (51402), Seq: 1, Ack: 509, Len: 285
Real Time Streaming Protocol

No.     Time        Source                Destination           Protocol Length Info
      9 11.405676   25.27.123.52          68.28.31.20           RTSP     443    DESCRIBE rtsp://67.212.178.250/live/lakalle.stream RTSP/1.0

Frame 9: 443 bytes on wire (3544 bits), 443 bytes captured (3544 bits)
Linux cooked capture
Internet Protocol Version 4, Src: 25.27.123.52 (25.27.123.52), Dst: 68.28.31.20 (68.28.31.20)
Transmission Control Protocol, Src Port: 51402 (51402), Dst Port: rtsp (554), Seq: 509, Ack: 286, Len: 375
Real Time Streaming Protocol

No.     Time        Source                Destination           Protocol Length Info
     10 11.734520   68.28.31.20           25.27.123.52          RTSP/SDP 757    Reply: RTSP/1.0 200 OK, with session description

Frame 10: 757 bytes on wire (6056 bits), 757 bytes captured (6056 bits)
Linux cooked capture
Internet Protocol Version 4, Src: 68.28.31.20 (68.28.31.20), Dst: 25.27.123.52 (25.27.123.52)
Transmission Control Protocol, Src Port: rtsp (554), Dst Port: 51402 (51402), Seq: 286, Ack: 884, Len: 689
Real Time Streaming Protocol

No.     Time        Source                Destination           Protocol Length Info
     11 11.774576   25.27.123.52          68.28.31.20           TCP      68     51402 > rtsp [ACK] Seq=884 Ack=975 Win=130100 Len=0 TSval=280562 TSecr=1378652931

Frame 11: 68 bytes on wire (544 bits), 68 bytes captured (544 bits)
Linux cooked capture
Internet Protocol Version 4, Src: 25.27.123.52 (25.27.123.52), Dst: 68.28.31.20 (68.28.31.20)
Transmission Control Protocol, Src Port: 51402 (51402), Dst Port: rtsp (554), Seq: 884, Ack: 975, Len: 0

No.     Time        Source                Destination           Protocol Length Info
     12 11.775863   25.27.123.52          68.28.31.20           RTSP     499    SETUP rtsp://67.212.178.250/live/lakalle.stream/trackID=1 RTSP/1.0

Frame 12: 499 bytes on wire (3992 bits), 499 bytes captured (3992 bits)
Linux cooked capture
Internet Protocol Version 4, Src: 25.27.123.52 (25.27.123.52), Dst: 68.28.31.20 (68.28.31.20)
Transmission Control Protocol, Src Port: 51402 (51402), Dst Port: rtsp (554), Seq: 884, Ack: 975, Len: 431
Real Time Streaming Protocol

No.     Time        Source                Destination           Protocol Length Info
     13 11.919571   68.28.31.20           25.27.123.52          RTSP     424    Reply: RTSP/1.0 200 OK

Frame 13: 424 bytes on wire (3392 bits), 424 bytes captured (3392 bits)
Linux cooked capture
Internet Protocol Version 4, Src: 68.28.31.20 (68.28.31.20), Dst: 25.27.123.52 (25.27.123.52)
Transmission Control Protocol, Src Port: rtsp (554), Dst Port: 51402 (51402), Seq: 975, Ack: 1315, Len: 356
Real Time Streaming Protocol

No.     Time        Source                Destination           Protocol Length Info
     14 11.919788   25.27.123.52          68.28.31.20           TCP      68     51402 > rtsp [ACK] Seq=1315 Ack=1331 Win=129744 Len=0 TSval=280591 TSecr=1378653113

Frame 14: 68 bytes on wire (544 bits), 68 bytes captured (544 bits)
Linux cooked capture
Internet Protocol Version 4, Src: 25.27.123.52 (25.27.123.52), Dst: 68.28.31.20 (68.28.31.20)
Transmission Control Protocol, Src Port: 51402 (51402), Dst Port: rtsp (554), Seq: 1315, Ack: 1331, Len: 0

No.     Time        Source                Destination           Protocol Length Info
     15 12.242948   25.27.123.52          68.28.31.20           RTP      56     Unknown RTP version 0

Frame 15: 56 bytes on wire (448 bits), 56 bytes captured (448 bits)
Linux cooked capture
Internet Protocol Version 4, Src: 25.27.123.52 (25.27.123.52), Dst: 68.28.31.20 (68.28.31.20)
User Datagram Protocol, Src Port: 11960 (11960), Dst Port: afs3-kaserver (7004)
Real-Time Transport Protocol

No.     Time        Source                Destination           Protocol Length Info
     16 12.246630   25.27.123.52          68.28.31.20           RTSP     432    PLAY rtsp://67.212.178.250/live/lakalle.stream RTSP/1.0

Frame 16: 432 bytes on wire (3456 bits), 432 bytes captured (3456 bits)
Linux cooked capture
Internet Protocol Version 4, Src: 25.27.123.52 (25.27.123.52), Dst: 68.28.31.20 (68.28.31.20)
Transmission Control Protocol, Src Port: 51402 (51402), Dst Port: rtsp (554), Seq: 1315, Ack: 1331, Len: 364
Real Time Streaming Protocol

No.     Time        Source                Destination           Protocol Length Info
     17 12.255425   25.27.123.52          68.28.31.20           RTP      56     Unknown RTP version 0

Frame 17: 56 bytes on wire (448 bits), 56 bytes captured (448 bits)
Linux cooked capture
Internet Protocol Version 4, Src: 25.27.123.52 (25.27.123.52), Dst: 68.28.31.20 (68.28.31.20)
User Datagram Protocol, Src Port: 11960 (11960), Dst Port: afs3-kaserver (7004)
Real-Time Transport Protocol

No.     Time        Source                Destination           Protocol Length Info
     18 12.256874   25.27.123.52          68.28.31.20           RTP      56     Unknown RTP version 0

Frame 18: 56 bytes on wire (448 bits), 56 bytes captured (448 bits)
Linux cooked capture
Internet Protocol Version 4, Src: 25.27.123.52 (25.27.123.52), Dst: 68.28.31.20 (68.28.31.20)
User Datagram Protocol, Src Port: 11960 (11960), Dst Port: afs3-kaserver (7004)
Real-Time Transport Protocol

No.     Time        Source                Destination           Protocol Length Info
     19 12.425122   68.28.31.20           25.27.123.52          RTSP     364    Reply: RTSP/1.0 200 OK

Frame 19: 364 bytes on wire (2912 bits), 364 bytes captured (2912 bits)
Linux cooked capture
Internet Protocol Version 4, Src: 68.28.31.20 (68.28.31.20), Dst: 25.27.123.52 (25.27.123.52)
Transmission Control Protocol, Src Port: rtsp (554), Dst Port: 51402 (51402), Seq: 1331, Ack: 1679, Len: 296
Real Time Streaming Protocol

No.     Time        Source                Destination           Protocol Length Info
     20 12.425476   25.27.123.52          68.28.31.20           TCP      68     51402 > rtsp [ACK] Seq=1679 Ack=1627 Win=129448 Len=0 TSval=280692 TSecr=1378653592

Frame 20: 68 bytes on wire (544 bits), 68 bytes captured (544 bits)
Linux cooked capture
Internet Protocol Version 4, Src: 25.27.123.52 (25.27.123.52), Dst: 68.28.31.20 (68.28.31.20)
Transmission Control Protocol, Src Port: 51402 (51402), Dst Port: rtsp (554), Seq: 1679, Ack: 1627, Len: 0

No.     Time        Source                Destination           Protocol Length Info
     21 12.494663   68.28.31.20           25.27.123.52          RTCP     72     Sender Report 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-14T06:30:42.203

它可以与第三方应用程序一起使用吗？您的移动提供商可能正在过滤您的连接，因此 RTP 数据包无法通过。如果是这样的话，你真的无能为力。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-15T23:57:28.807

在您的第一个 pcap 文件（转储中缺少任何 RTP 数据包的文件）中，客户端和服务器可能不同意 RTSP 协议中的传输。如果您查看 DESCRIBE 和 SETUP 之间的典型 rtsp 对话，则应该就传输协议达成一致，该协议将涵盖未通过 3G pcap 的二进制数据连接（音频流）的 IP 地址/端口。

[请参阅此 RTSP 会话转储](http://snipplr.com/view/56509/youtube-rtsp-cli-request--audio-track-only/)中的 #149、#156

也许您需要弄清楚如何让您的 pcap 查看器从您正在转储的 RTSP 数据包中的适当位移中提取和/或格式化实际的 RTPS 消息。这样，您可以比较正常 RTSP 会话的情况，如提供的链接中的会话。

# php - PHP 将文件读入数组

> ID：10577694
> 
> 赞同：3
> 
> 时间：2012-05-14T04:56:37.930
> 
> 标签：php

我有一个包含以下数据的文件（Test.txt）：1,0

我想将此文件的内容读入一个数组，然后打印变量。这是我当前的代码：

```
 function readUserDetails($username) {
    $userDetails = explode(',', file($username.".txt"));
    print($userDetails[0].$userDetails[1]);
} 
```

如果我使用以下参数调用 readUserDetails 函数：“Test”，我会收到以下错误：

> 注意：第 128 行 C:\Users\s13\Game\Game6\default.php 中的数组到字符串转换 注意：未定义偏移量：第 129 行 C:\Users\s13\Game\Game6\default.php 数组中的 1

我可以帮忙吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-14T05:00:14.680

PHP`file()`函数将一个文件读入一个数组，将文件的一行读入每个数组元素。请参阅[http://php.net/manual/en/function.file.php](http://php.net/manual/en/function.file.php)。`explode()`需要一个字符串。查看`file()`正在阅读的内容，看看它是否是您想要的：

```
<?php
   ...
   $userDetails = file($username.".txt");
   print_r($userDetails);
?> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-14T05:00:36.317

`file($username.".txt")`已经返回给你一个数组，你正试图用分隔符来爆炸一个`,` 数组

尝试这个

```
function readUserDetails($username) {
  $userDetails = explode(',', file_get_contents($username.".txt"));
  print($userDetails[0].$userDetails[1]);
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-14T05:02:13.570

您可以使用 file_get_contents() 将文件的内容作为字符串返回。

$userDetails = explode(',', file_get_contents($username.".txt"));

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-14T05:02:26.500

尝试：

$array = explode("\n", file_get_contents($username.'txt'));

# ajax - 来自 Yii CListView 的“发布”参数

> ID：10577697
> 
> 赞同：3
> 
> 时间：2012-05-14T04:57:06.890
> 
> 标签：ajax, pagination, yii

所以我为我的一个 Yii 项目设置了分页，并使用**CListView**达到了预期的结果。出于安全性和可读性的目的，我将 actionParams 函数配置为仅映射到**$_POST**参数。

现在我的问题是，当我点击任何可排序字段或页面链接时，它实际上是**GET**的数据。如何将其更改为**POST**？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-14T08:11:43.700

我不知道它是否能满足您的需求，但您可以通过 JavaScript 手动触发 ajax 更新：`$.fn.yiiListView.update('list-id',{type: 'POST'});`. 在第二个参数中，您还可以发送数据和其他 ajax 选项，例如：`$.fn.yiiListView.update('list-id',{type: 'POST',data:{ex_var: 'TEST'}});`.

但是要使用它，您必须将上述内容绑定到寻呼机的单击事件。

另一种解决方案是编辑 jquery.yiilistview.js（您可以在 framework/zii/widgets/assets/listview 中找到它）。转到更新函数所在的第 82 行并编辑其选项，例如：

```
options = $.extend({
type: 'GET', //<- change this to POST
url: $.fn.yiiListView.getUrl(id),
    ... 
```

});

您还必须刷新资产文件夹。但请记住，它会改变所有 CListViews 的行为 :)

问候。

# node.js - 检测nodejs中的内存泄漏

> ID：10577704
> 
> 赞同：36
> 
> 时间：2012-05-14T04:59:18.927
> 
> 标签：node.js

是否有一些工具可以检测 nodejs 中的内存泄漏？并告诉我你在测试 nodejs 应用程序方面的经验。

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2012-05-14T08:46:49.657

以下工具对于发现内存泄漏应该很有用：

[节点检查器](https://github.com/dannycoates/node-inspector)

还有一个教程可以帮助您在这里找到内存泄漏：

[https://github.com/felixge/node-memory-leak-tutorial](https://github.com/felixge/node-memory-leak-tutorial)

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2012-05-15T16:01:18.400

在追踪内存泄漏时，我尝试了上面的节点检查器。
截至 2012 年 4 月，它尚未更新为与当代节点版本 v0.6.12 一起使用因此我发现：[https](https://github.com/c4milo/node-webkit-agent) ://github.com/c4milo/node-webkit-agent 。
它能够显示节点检查器不支持的较新 V8 引擎的堆快照。很快我就能够检测到泄漏的模块（在可能的情况下），我希望你也有类似的成功！

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2013-05-31T11:55:47.577

我还可以推荐以下来源：

1.  以下 NodeUp 剧集讨论了分析和内存泄漏检测工具：

    *   [http://nodeup.com/twentyone](http://nodeup.com/twentyone)
    *   [http://nodeup.com/fortyfive](http://nodeup.com/fortyfive)
2.  这篇文章 - [Tracking Down Memory Leaks in Node.js – A Node.JS Holiday Season](https://hacks.mozilla.org/2012/11/tracking-down-memory-leaks-in-node-js-a-node-js-holiday-season/)，它基本上聚合了所有广为人知的模块和技术来追踪内存泄漏

3.  对于 Mac OS - [Instruments](http://en.wikipedia.org/wiki/Instruments_%28application%29)工具可能有助于调试本机 (C++) 模块。它不像 SmartOS 工具那么复杂，但很容易设置。

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2017-09-17T00:00:26.730

**方法 1 -**
Node 允许我们手动触发垃圾收集，这是我们在尝试确认内存泄漏时应该做的第一件事。这可以通过运行带有 --expose-gc 标志的 Node 来完成（即 node --expose-gc index.js）。一旦节点以该模式运行，您可以随时通过从程序调用 global.gc() 以编程方式触发垃圾收集。

您还可以通过调用 process.memoryUsage().heapUsed 检查进程使用的内存量。

通过手动触发垃圾收集并检查使用的堆，您可以确定您是否确实观察到程序中的内存泄漏。当您进行此测试时，内存增长变得更加明显。

**方法2 -**

3 堆转储方法

Node 的 --inspect 标志登陆节点版本 6。此功能允许您从 Chrome 的 DevTools 中调试和检查您的节点进程。

只需通过 --inspect 标志启动应用程序：

`$ node --inspect index.js`

按照 URL 到检查器并导航到内存选项卡。

DevTools 内存选项卡

[![在此处输入图像描述](../Images/e3df9212f9d6d7c0ee18cb01e32cc968.png)](https://i.stack.imgur.com/4mcLn.png) 这是我们将要做的：

使用 autocannon -c 1 -d 60 [http://localhost:PORT](http://localhost:PORT)
[ [https://www.npmjs.com/package/autocannon](https://www.npmjs.com/package/autocannon) ]
在大约 10 秒后拍摄堆快照，并在 30 秒后再次拍摄。

堆快照比较
比较视图向我们展示了快照之间发生了什么。您可以看到大量对象已创建或未被 GC 收集。

请阅读这些精彩的文章以了解更多信息。
他们对查找和修复泄漏有很大帮助：-

[https://www.alexkras.com/simple-guide-to-finding-a-javascript-memory-leak-in-node-js/](https://www.alexkras.com/simple-guide-to-finding-a-javascript-memory-leak-in-node-js/)

[https://www.nearform.com/blog/self-detect-memory-leak-node/](https://www.nearform.com/blog/self-detect-memory-leak-node/)

[https://addyosmani.com/blog/taming-the-unicorn-easing-javascript-memory-profiling-in-devtools/](https://addyosmani.com/blog/taming-the-unicorn-easing-javascript-memory-profiling-in-devtools/)

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2014-05-23T03:13:33.740

我直接使用 Chrome 开发工具和 heapsnapshot 文件，而不是 node-inspector 或 node-webkit-agent。

`require()`**堆转储**模块。

向正在运行的 nodejs 进程发送 usr2 信号以获取 heapsnapshot 文件。

在 Chrome 开发工具的配置文件选项卡上加载 heapsnapshot 文件。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2015-06-15T13:36:02.767

我使用了 npm 包 Memwatch：

查看[Github 存储库](https://github.com/lloyd/node-memwatch)和 [NPM 源](https://www.npmjs.com/package/memwatch)

基本上，这个包会在 V8 引擎执行垃圾回收后立即检查内存堆使用情况，并为您提供实际内存使用情况的基线。

这是我使用它的方式：

```
var memwatch = require('memwatch');

memwatch.on('leak', function(info) {
    console.log('Memwatch leak: ');
    console.log(info);
});

memwatch.on('stats', function(stats) {
    console.log.message('Memwatch stats: ');
    console.log(stats);
}); 
```

从原始文档：

> 该`'stats'`事件偶尔发出，为您提供描述堆使用情况和随时间变化的趋势的数据。
> 
> 该`'leak'`事件在您的代码出现内存泄漏时发出。它通常在堆大小在短时间内持续增长时执行。

Memwatch 还提供了一个“HeapDiff”类来计算您可以在函数中获取的两个快照之间的堆状态。

在舞台环境中运行 memwatch 可能是个好主意，以便跟踪导致问题的事件。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2015-06-08T16:42:58.283

一件好事是 [https://github.com/bnoordhuis/node-heapdump](https://github.com/bnoordhuis/node-heapdump) 非常简单，您可以在 Chrome 中查看结果（因为浏览器 javascript 和 nodejs 中的 V8 引擎相同）并随时比较内存中的对象大小。

还有一个提示如何“手动”检测内存泄漏或帮助防止它，是在代码的某些地方强制垃圾收集器，看看会发生什么。

使用“node --expose-gc file.js”和代码中任何可以使用函数 gc() 的地方启动您的应用程序；调用垃圾收集。

# go - 如何在 GO 中导出所有包 API 名称

> ID：10577707
> 
> 赞同：1
> 
> 时间：2012-05-14T04:59:34.347
> 
> 标签：go

导出到 api.txt 文件，如

```
fmt.Println(params...)
net.LookupIP(params...)
... 
```

逐行

我用它来 IDE 自动完成

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-16T02:34:20.243

正如其他人所说，gocode 可能已经完成了您想要的工作。但无论如何，要列出一个包的导出 API，您可以使用`go tool api <pkg>`. 例如

```
$ go tool api runtime | grep func

pkg runtime, func Breakpoint()
pkg runtime, func CPUProfile() []byte
pkg runtime, func Caller(int) (uintptr, string, int, bool)
pkg runtime, func Callers(int, []uintptr) int
pkg runtime, func FuncForPC(uintptr) *Func
pkg runtime, func GC()
... 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-14T17:51:35.793

go 存储库中已经有一个包含完整 Go1 API 的文本文件： [http ://code.google.com/p/go/source/browse/api/go1.txt](http://code.google.com/p/go/source/browse/api/go1.txt)

但是我建议您设置[gocode](https://github.com/nsf/gocode)（如果还没有的话，可以为您的 IDE 编写一个小插件）。它为变量和包提供了上下文相关的自动完成功能，即使它们不是标准库的一部分，或者当它们以不同的名称导入时也是如此。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-14T06:45:01.033

解析包文件，遍历 TLD，收集导出和暴露的标识符，你几乎是 gocode 多年来的位置。

# java - 发送短信前显示确认对话框

> ID：10577711
> 
> 赞同：2
> 
> 时间：2012-05-14T04:59:59.993
> 
> 标签：java, android, eclipse, android-alertdialog, messagebox

我是 Android 新手，我已经完全绑定了我的应用程序，但我希望现在对其进行更改。

当有人发送短信时，我想显示一个发送短信的确认对话框，询问是否发送。我必须为此创建一个通用类，我已经编写了源代码，它工作正常，但如果用户不点击是或取消，对话框就会消失，但我希望它仍然会显示，直到用户不点击是或取消按钮。

如何解决？

```
public void send_SMS( final String message)
    { 
    try{

        AlertDialog.Builder dialog = new AlertDialog.Builder(ctx);
        dialog.setTitle("Send SMS");
        dialog.setMessage("Are U sure want to Send SMS");
        dialog.setCancelable(true);
        dialog.setPositiveButton("Yes", new DialogInterface.OnClickListener() {

            @Override
            public void onClick(DialogInterface dialog, int which) {
                // TODO Auto-generated method stub
                sentpi = PendingIntent.getBroadcast(ctx, 0, new Intent(SENT),0);
                delpi = PendingIntent.getBroadcast(ctx, 0, new Intent(DELIVERED), 0);//
                String id = message.substring(3, 4);
                int msgId = Integer.valueOf(id, 16).intValue();

                if(dba.IsConOpenOrClose()==false)
                    dba.Open();
                if(ConstantClass.SelectCord.equals("All")){
                    if(msgId == 3 || msgId == 9){   
                    devId = message.substring(4, 20);
                    ConstantClass.CurrentId = devId;
                    strSql = new String("SELECT * FROM "+ ConstantClass.dbName[2] + " WHERE " + DataBaseAdapter.Key_DevID + " = ?");
                    cur = dba.ExecuteSelect(strSql, devId);
                    if(cur!=null)
                        cur.moveToFirst();
                    int cordId = cur.getInt(cur.getColumnIndex(DataBaseAdapter.Key_DevCoordId));
                    phoneNumber = dba.getSendSmsMobileNo(cordId);
                    dba.prcUpdateOrClean(devId, 1);
                    cur.close();
                    }
                }else{
                    phoneNumber = dba.getSendSmsMobileNo(dba.CurrentWorkingCoordinator(DataBaseAdapter.Key_SendCoord, 1));
                /*********now getting the Field smsProcess Update for particular devices ********************/
                if(msgId == 3 || msgId == 9 || msgId == 7){
                    devId = message.substring(4, 20);
                    if(dba.IsConOpenOrClose()==false)
                        dba.Open();
                    ConstantClass.CurrentId = devId;
                    dba.prcUpdateOrClean(devId, 1);

                }else if(msgId == 15 || msgId == 13 || msgId == 11 || msgId == 1){
                    if (dba.IsConOpenOrClose()==false)
                        dba.Open();
                    phoneNumber = dba.getSendSmsMobileNo(dba.CurrentWorkingCoordinator(DataBaseAdapter.Key_SendCoord, 1));
                    if(phoneNumber.length()==11){
                        pdNo = phoneNumber.substring(1, 11);
                    }else{
                        pdNo = phoneNumber.substring(0, 10);
                    }
                    devId = "000000" + pdNo;
                    ConstantClass.CurrentId = devId;                
                    dba.prcUpdateOrClean(devId, 1);

                }
                }
                  SmsManager sms = SmsManager.getDefault();
                  if(phoneNumber!=null){
                      sms.sendTextMessage(phoneNumber, null, message.toUpperCase(), sentpi, delpi); 
                  }else{
                      throw new java.lang.NullPointerException() ;
                  }               
            }
        });
        dialog.setNegativeButton("Cancel", new DialogInterface.OnClickListener() {

            @Override
            public void onClick(DialogInterface dialog, int which) {
                // TODO Auto-generated method stub
                dialog.cancel();
            }
        });
        AlertDialog dlg = dialog.create();
        dlg.show();       
    }catch(Throwable e){
        dlg = new ExceptionDialog(this.ctx,"Sending SMS",e.getMessage());
        dlg.show();
    }   
}
public BroadcastReceiver sms_send = new BroadcastReceiver(){
    @Override
    public void onReceive(Context context,Intent intent){
        String Info = "Send Info:";
        switch(getResultCode()){
        case Activity.RESULT_OK:
            Info += "Sms Send Successfull";
            break;
        case SmsManager.RESULT_ERROR_GENERIC_FAILURE:
            Info += "Sms Sending faild : genric faliure";
            break;
        case SmsManager.RESULT_ERROR_NO_SERVICE:
            Info += "Sending failed due to no Service";
            break;
        case SmsManager.RESULT_ERROR_NULL_PDU:
            Info += "Send failed : Null PDU";
            break;
        case SmsManager.RESULT_ERROR_RADIO_OFF:
            Info += "Send failed: Radio Service OFF";
            break;
        }
         Toast.makeText(ctx, Info, Toast.LENGTH_SHORT).show();
    }
};
public BroadcastReceiver sms_delivered = new BroadcastReceiver(){
    @Override 
    public void onReceive(Context context, Intent intent){
        String Info = "SMS Delivered :";
        switch(getResultCode()){
        case Activity.RESULT_OK:
            Info += "Sms Deliverd";
            break;
        case Activity.RESULT_CANCELED:
            Info += "Sms not Delivered";
            break;
        }
        Toast.makeText(ctx, Info, Toast.LENGTH_SHORT).show();
    }
};
public IntentFilter getSentIntentFilter(){
    return new IntentFilter(SENT);      
}
public IntentFilter getDeliveredFilter(){
    return new IntentFilter(DELIVERED);
}
/*private void reThrow(MyException ex){
    if(ex.nullPointerException instanceof NullPointerException  ){

    }
}
private class MyException extends Exception{
    public Exception nullPointerException;
    public MyException (){}
    public MyException(Exception NullPointerException){
        this.nullPointerException = NullPointerException;       
    }
}*/
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-14T05:07:27.233

```
dialog.setCancelable(true); should be like  dialog.setCancelable(false); 
```

当用户按下后退按钮时，它可以防止关闭警报对话框:)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-14T05:28:23.933

使用我的课程：

```
import java.util.ArrayList;

import org.mabna.order.R;
import org.mabna.order.dataModel.EntMapMovementsCollection;

import android.app.Activity;
import android.app.AlertDialog;
import android.graphics.Typeface;
import android.view.LayoutInflater;
import android.view.View;
import android.view.View.OnClickListener;
import android.view.ViewGroup;
import android.widget.Button;
import android.widget.LinearLayout;
import android.widget.TextView;

public class MessageBox {

    static ArrayList<AlertDialog> arrAlertDialog = new ArrayList<AlertDialog>();
    static OnMyDialogResult mDialogResult; // the callback

    public enum MessageBoxState {
        OK, YesNo
    }

    public enum MessageBoxResult {
        OK, Cancel, Yes, No
    }

    public final static void show(final Activity parent, String title,
            String message, MessageBoxState state) {

        // if (alertDialog != null)
        // {
        // alertDialog.dismiss();
        // }

        AlertDialog.Builder builder;

        LayoutInflater inflater = (LayoutInflater) parent
                .getSystemService(Activity.LAYOUT_INFLATER_SERVICE);
        View layout = inflater.inflate(R.layout.dialog_messagebox,
                (ViewGroup) parent.findViewById(R.id.layout_root));
        layout.setMinimumWidth(400);

        Typeface tf = Farsi.GetFarsiFont(parent);

        TextView tvTitle = (TextView) layout.findViewById(R.id.tvTitle);
        tvTitle.setText(Farsi.Convert(title));
        tvTitle.setTypeface(tf);
        tvTitle.setPadding(10, 10, 10, 10);

        TextView tvMessage = (TextView) layout.findViewById(R.id.tvMessage);
        tvMessage.setText(Farsi.Convert(message));
        tvMessage.setTypeface(tf);
        tvMessage.setPadding(10, 10, 10, 10);

        Button btnOK = (Button) layout.findViewById(R.id.btnOK);
        Button btnYes = (Button) layout.findViewById(R.id.btnYes);
        Button btnNo = (Button) layout.findViewById(R.id.btnNo);
        Button btnCancel = (Button) layout.findViewById(R.id.btnCancel);
        btnOK.setText(Farsi.Convert("تایید"));
        btnOK.setTypeface(tf);
        LinearLayout.LayoutParams lp = (LinearLayout.LayoutParams) btnOK
                .getLayoutParams();
        lp.setMargins(10, 10, 10, 10);
        btnOK.setLayoutParams(lp);

        btnYes.setText(Farsi.Convert("بله"));
        btnYes.setTypeface(tf);
        lp = (LinearLayout.LayoutParams) btnYes
                .getLayoutParams();
        lp.setMargins(10, 10, 10, 10);
        btnYes.setLayoutParams(lp);

        btnNo.setText(Farsi.Convert("خیر"));
        btnNo.setTypeface(tf);
        btnNo.setPadding(10, 10, 10, 10);
        lp = (LinearLayout.LayoutParams) btnNo
                .getLayoutParams();
        lp.setMargins(10, 10, 10, 10);
        btnNo.setLayoutParams(lp);

        btnCancel.setText(Farsi.Convert("انصراف"));
        btnCancel.setTypeface(tf);
        btnCancel.setPadding(10, 10, 10, 10);
        lp = (LinearLayout.LayoutParams) btnCancel
                .getLayoutParams();
        lp.setMargins(10, 10, 10, 10);
        btnCancel.setLayoutParams(lp);

        btnOK.setOnClickListener(new OnClickListener() {

            @Override
            public void onClick(View v) {
                // TODO Auto-generated method stub
                btnOK_onClick();
            }
        });
        btnYes.setOnClickListener(new OnClickListener() {

            @Override
            public void onClick(View v) {
                // TODO Auto-generated method stub
                btnYes_onClick();
            }
        });
        btnNo.setOnClickListener(new OnClickListener() {

            @Override
            public void onClick(View v) {
                // TODO Auto-generated method stub
                btnNo_onClick();
            }
        });
        btnCancel.setOnClickListener(new OnClickListener() {

            @Override
            public void onClick(View v) {
                // TODO Auto-generated method stub
                btnCancel_onClick();
            }
        });

        LinearLayout layout_OK = (LinearLayout) layout
                .findViewById(R.id.layout_OK);
        LinearLayout layout_YesNo = (LinearLayout) layout
                .findViewById(R.id.layout_YesNo);

        switch (state) {
        case OK:
            layout_YesNo.setVisibility(LinearLayout.GONE);
            layout_OK.setVisibility(LinearLayout.VISIBLE);
            break;
        case YesNo:
            layout_YesNo.setVisibility(LinearLayout.VISIBLE);
            layout_OK.setVisibility(LinearLayout.GONE);
            break;
        default:
            break;
        }

        builder = new AlertDialog.Builder(parent);
        builder.setView(layout);

        AlertDialog alertDialog;

        alertDialog = builder.create();
        alertDialog.setCancelable(false);
        alertDialog.show();
        mDialogResult = null; // causes each messageBox instance has its own
                                // DialogResult because it removes previous
                                // DialogResults

        arrAlertDialog.add(alertDialog);
        return;
    }

    public static void showException(Activity act,
            Exception e) {
        MessageBox.show(act, "خطا", e.toString(), MessageBoxState.OK);
    }

    public static void showException(Activity act, String additionalDetails,
            Exception e) {
        MessageBox.show(act, "خطا", additionalDetails + ": " + e.toString(),
                MessageBoxState.OK);
    }

    private static AlertDialog getLastDialog() {
        AlertDialog dialog = arrAlertDialog.get(arrAlertDialog.size() - 1);
        arrAlertDialog.remove(dialog);
        return dialog;
    }

    private final static void btnOK_onClick() {
        AlertDialog currentdialog = getLastDialog();
        if (mDialogResult != null) {
            mDialogResult.finish(MessageBoxResult.OK);
            currentdialog.dismiss();
            mDialogResult.dialogClosed();
        } else {
            currentdialog.dismiss();
        }
    }

    private final static void btnYes_onClick() {
        AlertDialog currentdialog = getLastDialog();
        if (mDialogResult != null) {
            mDialogResult.finish(MessageBoxResult.Yes);
            currentdialog.dismiss();
            mDialogResult.dialogClosed();
        } else {
            currentdialog.dismiss();
        }
    }

    private final static void btnNo_onClick() {
        AlertDialog currentdialog = getLastDialog();
        if (mDialogResult != null) {
            mDialogResult.finish(MessageBoxResult.No);
            currentdialog.dismiss();
            mDialogResult.dialogClosed();
        } else {
            currentdialog.dismiss();
        }
    }

    private final static void btnCancel_onClick() {
        AlertDialog currentdialog = getLastDialog();
        if (mDialogResult != null) {
            mDialogResult.finish(MessageBoxResult.Cancel);
            currentdialog.dismiss();
            mDialogResult.dialogClosed();
        } else {
            currentdialog.dismiss();
        }
    }

    public final static void setDialogResult(OnMyDialogResult dialogResult) {
        mDialogResult = dialogResult;
    }

    public interface OnMyDialogResult {
        void finish(MessageBoxResult result);

        void dialogClosed();
    }

} 
```

它的布局：

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:id="@+id/layout_root"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:background="@color/white"
    android:orientation="vertical"
    android:padding="10dp" >

    <TextView
        android:id="@+id/tvTitle"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_gravity="right"
        android:layout_weight="1"
        android:text="TextView"
        android:textStyle="bold" >
    </TextView>

    <TextView
        android:id="@+id/tvLine"
        android:layout_width="fill_parent"
        android:layout_height="2dip"
        android:layout_weight="1"
        android:background="@color/black"
        android:text="" >
    </TextView>

    <TextView
        android:id="@+id/tvMessage"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_gravity="right"
        android:layout_weight="1"
        android:text="TextView" >
    </TextView>

    <LinearLayout
        android:id="@+id/layout_YesNo"
        android:layout_width="fill_parent"
        android:layout_height="fill_parent"
        android:layout_gravity="center_horizontal"
        android:gravity="center" >

        <Button
            android:id="@+id/btnCancel"
            android:layout_width="70dip"
            android:layout_height="40dip"
            android:text="Button" >
        </Button>

        <Button
            android:id="@+id/btnNo"
            android:layout_width="70dip"
            android:layout_height="40dip"
            android:text="Button" />

        <Button
            android:id="@+id/btnYes"
            android:layout_width="70dip"
            android:layout_height="40dip"
            android:text="Button" >
        </Button>
    </LinearLayout>

    <LinearLayout
        android:id="@+id/layout_OK"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:layout_gravity="center"
        android:baselineAligned="true"
        android:orientation="vertical" >

        <Button
            android:id="@+id/btnOK"
            android:layout_width="80dip"
            android:layout_height="40dip"
            android:layout_gravity="center"
            android:gravity="center"
            android:text="Button" >
        </Button>
    </LinearLayout>

</LinearLayout> 
```

在活动中：

```
MessageBox.show(this, "warning", "Are you sure?", MessageBoxState.YesNo);
MessageBox.setDialogResult(new OnMyDialogResult() {
                    @Override
                    public void finish(MessageBoxResult result) {
                        if (result == MessageBoxResult.Yes)
                            //...
                    }

                    @Override
                    public void dialogClosed() {
                    }
                }); 
```

# forms - 需要为带有 oracle 数据库的 tomcat webapp 配置旧的 JDBCRealm

> ID：10577725
> 
> 赞同：2
> 
> 时间：2012-05-14T05:01:51.853
> 
> 标签：forms, oracle, tomcat, glassfish, jdbcrealm

我正在尝试恢复一些旧的 java webapps，但丢失了我的旧 glassfish 配置文件，其中定义了我的 JDBCRealm。现在我正在尝试将旧战争部署到 Tomcat 7，并且需要重新创建 JDBCRealm 来验证用户身份。自从我从事这些工作以来已经很长时间了，我不记得该怎么做，我查看了官方文档，但它缺少 oracle 的连接URL。我认为我的数据库是像以前一样使用用户和角色表设置的。

我什至可以在 Tomcat 7 上重用在 glassfish 3 上运行的旧战争吗？它包含一个 sun-web.xml 文件。那只是为了玻璃鱼吗？

我正在使用表单身份验证方法 - 这是我的 web.xml 的片段：

```
 <login-config>
<auth-method>FORM</auth-method>
<realm-name>jdbc/myapp/realm</realm-name>
<form-login-config>
  <form-login-page>/loginPage.jsp</form-login-page>
  <form-error-page>/loginError.jsp</form-error-page>
</form-login-config> 
```

这是我的 server.xml 文件中的领域片段：

```
 <Realm className="org.apache.catalina.realm.LockOutRealm">

    <Realm className="org.apache.catalina.realm.UserDatabaseRealm"
      resourceName="UserDatabase"/>

  </Realm>

  <Realm className="org.apache.catalina.realm.JDBCRealm" 
driverName="oracle.jdbc.OracleDriver"
connectionURL="jdbc:oracle:thin:@localhost:1521:XE"
   userTable="users"userNameCol="username" 
userCredCol="wpassword"userRoleTable="roles"roleNameCol="rolename"/> 
```

我的 connectionURL 看起来正确吗？还有什么可能是错的？现在，当我尝试登录时，它永远不会接受我的密码。我总是得到我的登录错误页面（不是完整的应用程序崩溃）。

最新领域版本：

```
<Realm className="org.apache.catalina.realm.JDBCRealm"
       driverName="oracle.jdbc.OracleDriver"
       connectionURL="jdbc:oracle:thin:@localhost:1521:XE"
       connectionName="uname"
       connectionPassword="pword_33"
       userTable="USERS"
       userNameCol="USERNAME"
       userCredCol="WPASSWORD"
       userRoleTable="ROLES"
       roleNameCol="ROLENAME" /> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-14T14:25:21.790

连接 URL 看起来没问题，假设数据库 sid 是 XE。您似乎缺少 connectionName 和 connectionPassword 属性。[文档](http://tomcat.apache.org/tomcat-7.0-doc/config/realm.html)中以粗体列出的任何属性都是必需的。

# javascript - Jquery ValidationEngine 自定义验证

> ID：10577727
> 
> 赞同：1
> 
> 时间：2012-05-14T05:02:08.870
> 
> 标签：javascript, jquery, jquery-validation-engine

我有两个领域。我希望第一个字段大于零（0），第二个字段大于一（1）。此外，第一个字段不应等于或大于第二个字段。

这就是我到目前为止所做的

```
$("#entryForm").validationEngine();

$('#field1').rules('add', {
    min: 1,
    messages: {
        required: 'Some custom message for the required field'
    }
});

$('#field2').rules('add', {
    min: 2,
    messages: {
        required: 'Some custom message for the required field'
    }
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-14T06:28:40.600

也许你可以尝试这样的事情：

```
<input value="field1" class="validate[required,equals[field2]] text-input" type="text" name="field2" id="field2" /> 
```

或者您也可以编写一个单独的函数调用在那里进行验证。这里提到的所有这些：

[http://www.position-relative.net/creation/formValidator/demos/demoValidators.html](http://www.position-relative.net/creation/formValidator/demos/demoValidators.html)

# c++ - 如何确保成功安装了boost？

> ID：10577728
> 
> 赞同：0
> 
> 时间：2012-05-14T05:02:12.543
> 
> 标签：c++, linux, boost, centos

我正在尝试安装一个明确声称需要安装 boost 的 linux 工具。(http://www.statmt.org/moses/?n=Development.GetStarted)

我已经下载了boost1.42的源代码（放入/usr/local/boost1.42）进行编译。虽然编译过程产生了很多错误和警告（正常吗？boost官网说应该不会有其他错误，除了IO错误。），最后我得到了/usr中的/stage/lib和/boost /local/boost1.42 目录。现在我可以运行如下示例：

```
 #include <boost/regex.hpp>
#include <iostream>
#include <string>

int main()
{
    std::string line;
    boost::regex pat( "^Subject: (Re: |Aw: )*(.*)" );

    while (std::cin)
    {
        std::getline(std::cin, line);
        boost::smatch matches;
        if (boost::regex_match(line, matches, pat))
            std::cout << matches[2] << std::endl;
    }
}

 $ c++ -I /usr/local/boost_1_42_0 example.cpp -o example -L~/usr/local/boost_1_42_0/stage/lib/ -lboost_regex 
```

这实际上会发出一个可执行文件“示例”，没有编译警告和正确的行为。但是当我想查看它的链接细节时：

```
$ldd -v example 
```

结果相当混乱：

```
 linux-vdso.so.1 =>  (0x00007fffb4b9c000)
    libboost_regex.so.1.42.0 => not found
    libstdc++.so.6 => /usr/lib64/libstdc++.so.6 (0x0000003f79600000)
    libm.so.6 => /lib64/libm.so.6 (0x0000003f72e00000)
    libgcc_s.so.1 => /lib64/libgcc_s.so.1 (0x0000003f78e00000)
    libc.so.6 => /lib64/libc.so.6 (0x0000003f72200000)
    libpthread.so.0 => /lib64/libpthread.so.0 (0x0000003f72a00000)
    /lib64/ld-linux-x86-64.so.2 (0x0000003f71e00000)

    Version information:
    ./example:
            libgcc_s.so.1 (GCC_3.0) => /lib64/libgcc_s.so.1
            libpthread.so.0 (GLIBC_2.2.5) => /lib64/libpthread.so.0
            libc.so.6 (GLIBC_2.2.5) => /lib64/libc.so.6
            libstdc++.so.6 (CXXABI_1.3) => /usr/lib64/libstdc++.so.6
            libstdc++.so.6 (GLIBCXX_3.4) => /usr/lib64/libstdc++.so.6
    /usr/lib64/libstdc++.so.6:
            libm.so.6 (GLIBC_2.2.5) => /lib64/libm.so.6
            ld-linux-x86-64.so.2 (GLIBC_2.3) => /lib64/ld-linux-x86-64.so.2
            libgcc_s.so.1 (GCC_4.2.0) => /lib64/libgcc_s.so.1
            libgcc_s.so.1 (GCC_3.3) => /lib64/libgcc_s.so.1
            libgcc_s.so.1 (GCC_3.0) => /lib64/libgcc_s.so.1
            libc.so.6 (GLIBC_2.4) => /lib64/libc.so.6
            libc.so.6 (GLIBC_2.3) => /lib64/libc.so.6
            libc.so.6 (GLIBC_2.3.2) => /lib64/libc.so.6
            libc.so.6 (GLIBC_2.2.5) => /lib64/libc.so.6
    /lib64/libm.so.6:
            libc.so.6 (GLIBC_PRIVATE) => /lib64/libc.so.6
            libc.so.6 (GLIBC_2.2.5) => /lib64/libc.so.6
    /lib64/libgcc_s.so.1:
            libc.so.6 (GLIBC_2.4) => /lib64/libc.so.6
            libc.so.6 (GLIBC_2.2.5) => /lib64/libc.so.6
    /lib64/libc.so.6:
            ld-linux-x86-64.so.2 (GLIBC_PRIVATE) => /lib64/ld-linux-x86-64.so.2
            ld-linux-x86-64.so.2 (GLIBC_2.3) => /lib64/ld-linux-x86-64.so.2
    /lib64/libpthread.so.0:
            ld-linux-x86-64.so.2 (GLIBC_2.3) => /lib64/ld-linux-x86-64.so.2
            ld-linux-x86-64.so.2 (GLIBC_2.2.5) => /lib64/ld-linux-x86-64.so.2
            ld-linux-x86-64.so.2 (GLIBC_PRIVATE) => /lib64/ld-linux-x86-64.so.2
            libc.so.6 (GLIBC_2.3.2) => /lib64/libc.so.6
            libc.so.6 (GLIBC_PRIVATE) => /lib64/libc.so.6
            libc.so.6 (GLIBC_2.2.5) => /lib64/libc.so.6 
```

似乎链接器在 /usr/local/boost1.42/stage/lib/libboost_regex.a 中没有找到 libboost_regex.a （参见 ldd 日志：libboost_regex.so.1.42.0 => 未找到）。

那么它真正想要加载哪个库？为什么“未找到”会产生正确的可执行文件？

如果我想确保 boost 安装成功，我是否必须将 /usr/local/boost1.42 和 /usr/local/boost1.42/stage/lib 导出到任何地方，以便其他程序可以知道它的位置?

谢谢！洪斌

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-14T10:30:37.813

要在非标准位置（未在 ld.so.conf 中指定）安装 boost 并使用它，请执行以下操作：

1.  `--prefix`使用和`--libdir`选项配置升压：

    ```
    $ ./bootstrap.sh --prefix=${PREFIX} --libdir=${PREFIX}/lib64 
    ```

2.  构建并安装 boost 设置 rpath 为相同的值`--libdir`，例如`${PREFIX}/lib64`：

    ```
    $ ./b2 -d+2 --layout=system variant=release link=shared threading=multi runtime-link=shared linkflags="-Wl,-rpath,${PREFIX}/lib64"

    $ sudo ./b2 -d+2 --layout=system variant=release link=shared threading=multi runtime-link=shared linkflags="-Wl,-rpath,${PREFIX}/lib64" install 
    ```

3.  编译你的应用程序指定 boost 包含目录：

    ```
    $ g++ -c -I${PREFIX}/include ... 
    ```

4.  链接指定 boost lib 位置的应用程序。还将 rpath 嵌入二进制文件中，以便应用程序可以找到 boost 库而不必摆弄`LD_LIBRARY_PATH`：

    ```
    $ g++ -L${PREFIX}/lib64 -Wl,-rpath,${PREFIX}/lib64 ... 
    ```

在上面设置 PREFIX 以提升安装位置，例如`export PREFIX=/usr/local/my_boost`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-14T05:07:30.853

是的，您需要告诉动态链接器共享对象（`.so`文件，而不是`.a`文件）的位置。

这可以通过设置`LD_LIBRARY_PATH`正确的路径（并导出该路径）或编辑`/etc/ld.so.conf`（或其他一些设置文件，取决于发行版）来完成。

（另一种选择是在链接可执行文件时使用`rpath`选项，但环境设置对于开发来说更加灵活。）

# android - 每秒刷新 ListView 项目

> ID：10577737
> 
> 赞同：2
> 
> 时间：2012-05-14T05:03:41.993
> 
> 标签：android

假设我有来自服务器或本地数据库的数据。我在列表视图中显示它们。我在每个列表视图项中有四五个文本视图。现在我想每秒刷新一次列表视图项（要求只是这样的）。

我应该如何实现这一点。notifyDataSetChanged() 是我知道的。

我想要一些不会使活动滞后的强大解决方案。

请指导。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-14T05:25:36.640

```
 private Thread t;
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);

        t = new Thread(){   
            @Override
            public void run() {
                try {
                    synchronized(this){ 
                        wait(2000); // set time whatever you want
                    }

                } 
                catch(InterruptedException ex){ 
                    ex.printStackTrace();
                }

               lv.clear();
               onCreate(null);
            }
        };
            t.start();
    } 
```

尝试这个 ..

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-14T05:19:58.400

我认为您应该降低更新频率。1 秒对于更新来说太小了。您可以使用[AsyncTask](http://www.vogella.com/articles/AndroidPerformance/article.html) 每 1 秒执行一次。[在postDelay()](http://developer.android.com/reference/android/os/Handler.html)的帮助下

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-14T05:12:07.977

我认为使用 notifyDataSetChanged 是唯一的方法。

为什么你认为它可能会使 Activity 滞后？

# php - php根据mysql中的列重命名目录中的文件

> ID：10577739
> 
> 赞同：0
> 
> 时间：2012-05-14T05:04:45.893
> 
> 标签：php, mysql, file, rename

我想知道是否有人可以提供帮助。假设我有一个包含“cust_id”和“name”列的数据库。我想将目录中的 2000 多个图像从现有的“name.jpg”重命名为“cust_id.jpg”。列“名称”包含文件夹中的所有图像名称，我希望它们重命名为关联的客户 ID #。

我很确定这可以用 php/mysql 完成，但我对 php 的了解非常有限，我不知道从哪里开始写这篇文章。我意识到我必须创建一个记录集来提取所需的数据、读取目录、循环等，但我目前这超出了我的能力范围。一点帮助？

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-14T05:17:28.540

试试这个代码..假设你的表名是`tbl_customer`并且你有你的数据库连接设置

```
$res = mysql_query("SELECT * FROM tbl_customer");

while($row = mysql_fetch_assoc($res)){
  $name = $row['name'];
  $cust_id = $row['cust_id'];

  if(file_exists('path/to/your/image/directory/'.$name)){
    rename('path/to/your/image/directory/'.$name,'path/to/your/image/directory/'.$cust_id.".jpg");
  }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-14T05:10:38.773

要获得良好的响应，可能需要一些细节。Sitll我正在尝试帮助你。我现在假设表名等。你可以使用你的名字。另外我假设每个客户只有一个图像。

```
UPDATE `customer_images`
SET `name` = CONCAT(`cust_id`,".jpg") 
```

这`cust_id`是客户ID的列名

如果假设不正确或 SQL 不起作用，请告诉我。

# functional-programming - 并发清理链接器错误（奇怪）

> ID：10577740
> 
> 赞同：1
> 
> 时间：2012-05-14T05:04:48.690
> 
> 标签：functional-programming, linker-errors, clean-language

为 Windows 下载了最新版本的“并发清理”(2.4)。它安装，IDE 运行。我可以编译并运行一个非常简单的程序：

```
module blah
Start = 1 
```

问题是，如果我进行任何更改（例如 Start = 2，或 Start = [1,2,3] 或 Start = "hi"），那么链接器会说它无法创建可执行文件。如果我删除现有的可执行文件，它可以创建可执行文件。有时，如果我从 IDE 中生成并返回，它可以创建它。

我怀疑 Windows Defender，所以我将其关闭。然后我怀疑UAC所以我尽我所能关闭它（我认为你不能真正关闭它，但你可以在一些控制面板GUI上调整“级别”）。

作为最后的手段，我下载了 2.2 版，并得到了同样的错误。

无论如何，如果有人有任何想法或建议，我正在倾听。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-12-12T08:48:29.543

如果程序仍在后台运行，则 Clean IDE 不会替换可执行文件，因此无法运行链接器。当您尝试在 CleanIDE 中编译时，请确保您的应用程序没有运行。

# java - 如何在不运行程序的情况下生成时序图

> ID：10577744
> 
> 赞同：0
> 
> 时间：2012-05-14T05:05:02.697
> 
> 标签：java, uml, sequence

我需要为我的项目生成序列图。

我已经创建了类、具有适当签名的方法、从一个类到另一个类的方法调用等，但是，由于尚未实现逻辑，我无法真正运行 Web 应用程序以通过跟踪获取序列图。

有什么方法可以在不运行跟踪的情况下获得序列图？

语言：Java

IDE：日食

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-21T16:24:01.197

正如我在评论中提到的，您可以使用潜水员生成静态序列图。Diver 通过选择方法并生成序列来支持静态序列图。您可以为重要方法生成静态序列并解释您的同事。

# image - 使用 rss 提要在 simplepie 中仅显示图像

> ID：10577746
> 
> 赞同：1
> 
> 时间：2012-05-14T05:05:14.287
> 
> 标签：image, simplepie

使用 rss 提要时如何在 simplepie 中仅显示图像。我正在使用 simplepie，但只能从 rss 中提取图像。如何做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-06T19:57:32.280

考虑到某些提要结构不同，据我所知，没有明确的方法可以做到这一点。这就是我能够做到的。首先查看这篇文章：

[如何使用 SimplePie 从 WordPress RSS 提要显示缩略图？](http://blogosys.com/2011/04/how-to-display-thumbnail-from-rss-feed-using-simplepie.html)

我能够复制和粘贴代码并进行一些小改动

我没有使用 Wordpress，但它帮助我了解需要做什么。

在 feed->init() 之后插入此代码；

```
 //This function will get an image from the feed

function returnImage ($text) {
    $text = html_entity_decode($text, ENT_QUOTES, 'UTF-8');
    $pattern = "/<img[^>]+\>/i";
    preg_match($pattern, $text, $matches);
    $text = $matches[0];
    return $text;
}

    //This function will filter out image url which we got from previous returnImage() function

    function scrapeImage($text) {
        $pattern = '/src=[\'"]?([^\'" >]+)[\'" >]/';
        preg_match($pattern, $text, $link);
        $link = $link[1];
        $link = urldecode($link);
        return $link;

    } 
```

现在您要调用函数，以便它搜索描述，或者在我的情况下搜索内容，以找到 img 标记并正确构造输出。这就是我的代码的样子：

```
foreach ($feed->get_items(0 , 3) as $item):
    $feedDescription = $item->get_content();
    $image = returnImage($feedDescription);
    $image = scrapeImage($image);
    $image_url= $item->get_permalink();
    $description = $item->get_description();
?>
        <div class="item">
            <h4><a href="<?php echo $item->get_permalink(); ?>"><?php echo $item->get_title(); ?></a></h4>
            <div class="image-box"><?php echo '<a href="' . $image_url . '"><img src="' . $image . '" /></a>'."\n";?></div>
            <p><?php echo $description ?></p>
            <p><a href="<?php echo $item->get_permalink(); ?>">Continue Reading</a></p>   
        </div>

    <?php endforeach; ?> 
```

这可能需要一些错误，但是一旦您知道您的 img 标签在提要中的位置，您就可以使用 simplepie 来解析提要，该函数将找到标签和格式，因此它已准备好 html。

要只拉一篇文章，您可以编辑您的循环：

```
foreach ($feed->get_items(0 , 1) as $item): 
```

第一个数字 (0) 是起点，0 是最新的帖子。第二个数字 (1) 是要拉多少帖子。由于您只想要一张图像，因此您希望该数字为 1。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-20T15:48:00.977

也许您想在客户端执行此操作。那么使用 jQuery 就很容易了。假设您的 javascript 中的项目内容看起来像这样

```
var content = '<div><a href="http://kwout.com/cutout/b/es/y2/ukn_rou_sha.jpg"
imageanchor="1" style="clear: right; float: right; margin-bottom: 1em; margin-left: 1em;">
<img border="0" height="239" src="http://kwout.com/cutout/b/es/y2/ukn_rou_sha.jpg"
width="320"></a>Erat austro rerum.</div>'; 
```

然后，您可以使用 jQuery 选择器轻松识别和隔离内容中的图像。例如使用

```
$(content).find('img:first');   //find the FIRST image inside an element or
$(content).find('a:first');     //take the hyperlink AND the image 
```

如果它不是内容中的第一个图像，或者内容比这个示例更复杂（主要是 ;-) - 不用担心 - 然后一些其他选择器会解决问题。查看 jquery.com 上的文档以获取更多信息。

通过这种方式，我删除了元素，向内容中的不同元素添加了一些或添加了类，以我的方式显示帖子。

# asp.net - 企业库缓存应用程序块隔离存储到不同的机器

> ID：10577747
> 
> 赞同：0
> 
> 时间：2012-05-14T05:05:45.443
> 
> 标签：asp.net, enterprise-library, distributed-caching

我是缓存应用程序块的新手。我想要的是，我想将数据存储在另一台专用机器而不是数据库中（没有数据库的分布式缓存）。

无论如何我可以做到这一点吗？

我可以在 Enterprise Library Configuration Manager 的缓存设置的 Backing Stores 下看到以下选项：

1) 数据缓存存储 2) 自定义缓存存储 3) 隔离存储缓存存储

顾名思义，“隔离存储缓存存储”应该是我问题的答案。但是当我添加一个独立的存储缓存存储时，我没有可以提供单独的专用机器名称的选项。

请任何人指导我如何提供不同的专用机器名称并将其用作分布式缓存的独立存储后备存储。

非常感谢！![在此处输入图像描述](../Images/374122937b41e2cddccb7c5d44f73772.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-14T05:41:24.863

隔离存储不是这样工作的——它是本地机器上的存储，仅限于用户和应用程序。如果要将数据存储在单独的机器上，则需要使用不同的后备存储。

Entlib 的缓存块不是为分布式缓存而设计的。如果那是您真正想要的，您应该调查显式分布式缓存。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-28T07:32:41.200

尽管市场上有许多第三方分布式缓存提供程序，但在某些方面，AppFabric 和 NCache 之间始终存在比较。就 Appfabric 而言，它是一个很棒的工具，但由于它是 MS 的免费产品，所以它在功能列表方面也有一些限制。另一方面，Alachisoft 的[NCache](http://www.alachisoft.com/ncache)会让你付出一些代价，但同时它们也会为你带来一些东西。它是一款功能丰富的产品，具有出色的 24/7 技术支持。

现在[Memcached](http://memcached.org/)，坦率地说它与 NCache 或 Appfabric 根本没有可比性。它是一个开源分布式内存对象缓存系统，被 facebook 等一些知名人士使用。但它也有很多限制。它仅在某些特定情况下有效。如果你想要高性能、高可扩展性和高可靠性，memcached 不是推荐的。它不提供动态集群，这意味着您无法在运行时添加或删除节点。它也有单点故障，没有拓扑等。所以底线是，你必须使用 NCache 或 Appfabric。

这是[NCache 与 Appfabric 的功能比较。](http://distributedcaching.blog.com/2011/05/26/ncache-features-that-app-fabric-does-not-have/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-22T09:35:44.810

最后我们正在考虑使用

NCache 或 AppFebric

NCache 企业版是一个非常酷的缓存工具。它有很多缓存集群功能，如客户端缓存、镜像缓存、副本缓存、分区、分区副本缓存等。这是一个非常昂贵的工具，成本约为 795 美元（美国），他们要求每年维护费用的 25%成本。它具有在运行时将缓存主机添加到集群中的功能。（酷啊！）

考虑到这一点，我们对 Appfebric 进行了一些研发，我们发现 Appfebric 也是用于分布式缓存的好工具，但不知何故，我觉得 AppFebric 正在从 NCache 复制粘贴功能。因为如果我们进行分析：

NCache 副本缓存 = AppFebric 高可用性模式。

同样，AppFebric 工具没有 NCache 之类的异步复制机制（Mirror and Partation-Replica 缓存拓扑）

当然，ASynchronous 复制机制对于高可用性模式来说是不安全的。

市场上还有另外一个工具 MemCache，我没有对那个工具做太多的研发。欢迎任何想法。

问候， SP。小建筑师 CTS

# maven - 使用 RAD 8 在错误位置生成 ibm-web-bnd.xml 的 MAVEN 插件

> ID：10577755
> 
> 赞同：2
> 
> 时间：2012-05-14T05:07:51.727
> 
> 标签：maven, m2e, ibm-rad

我有一个项目已从 ANT 构建转换为 eclipse，我们使用的是 IBM RAD8 和 m2e maven 插件。

web.xml 和 ibm-web-bnd.xml 绑定文件之间的连接似乎不起作用。绑定文件有许多资源映射绑定问题，当我生成 ibm-web-bnd.xml 时（通过使用 web.xml 设计器）。

此外，当它生成时，它位于**target/m2e-wtp/web-resources/WEB-INF/ibm-web-bnd.xml**如何控制它的着陆位置？它不是我期望的地方吗？

# java - SimpleDateFormat 在具有相同时区的不同操作系统上返回不同的结果

> ID：10577756
> 
> 赞同：0
> 
> 时间：2012-05-14T05:08:38.483
> 
> 标签：java, simpledateformat

这个简单的函数为我的 Win 7 和 XP 系统返回不同的时间字符串，即使两个系统处于相同的时区（德国），系统时间也相同。

```
private static String timeNow() {
    Calendar cal = Calendar.getInstance();
    return sdfTime.format(cal.getTime());
} 
```

和

```
private static final DateFormat sdfTime = new SimpleDateFormat("HH:mm"); 
```

它们返回的时间正好相差 2 小时（此函数在我的 XP 系统上返回系统时间 -2 小时）。我试图通过设置 sdfTime.setTimeZone(TimeZone.getTimeZone("Germany")) 来解决这个问题，但这没有帮助。

为什么会有这种差异，我该如何解决？

提前非常感谢。

# java - 如何在 LinkedLIst 中搜索项目？

> ID：10577764
> 
> 赞同：1
> 
> 时间：2012-05-14T05:09:54.333
> 
> 标签：java, linked-list

添加我使用的项目

```
public void add(Object s) {
    list.add(s);
} 
```

删除我使用的项目

```
public void remove(Object s) {
    list.remove(s);
} 
```

现在搜索`LinkedList`当我使用点运算符并搜索内置 API 时，我看不到任何暗示搜索功能的东西。会`contains`吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-14T05:15:54.353

如果LinkedList API中包含搜索元素，则Yes [contains方法将返回。](http://docs.oracle.com/javase/6/docs/api/java/util/LinkedList.html#contains%28java.lang.Object%29)`true`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-14T05:42:56.720

由于您似乎想知道*项目*在列表中的位置，以便您可以访问找到的实际实例，因此您想使用[`indexOf`](http://docs.oracle.com/javase/6/docs/api/java/util/List.html#indexOf%28java.lang.Object%29)它来查找它并[`get`](http://docs.oracle.com/javase/6/docs/api/java/util/List.html#get%28int%29)返回找到的实例。没有将两者结合的方法。

```
List list = ...
Object item = ...
int index = list.indexOf(item);
if (index > 0) {
    Object found = list.get(index);
    ...
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-14T05:16:27.193

是的，对于搜索，您将使用该`contains`方法。但是请注意，通过 LinkedList 进行搜索需要 O(n) 时间，即时间线性取决于列表的大小，因此如果您的列表很大并且您进行大量搜索，您将需要使用一些其他数据结构体。例如，您可能应该像这样初始化您的列表：

```
Collection something = new LinkedList(); 
```

然后，如果您发现搜索操作的性能正在损害您的程序，您可以这样做：

```
Collection something = new LinkedHashSet(); 
```

对于更高级的搜索，您应该使用[Map](http://docs.oracle.com/javase/1.5.0/docs/api/java/util/Map.html)而不是列表或任何其他集合，但这是一种完全不同的数据结构。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-14T05:13:20.853

是的，它是[`contains`](http://docs.oracle.com/javase/1.4.2/docs/api/java/util/LinkedList.html#contains%28java.lang.Object%29)。如果你想要更高级的东西，你必须编写自己的 a 实现`LinkedList`或者想出一些实用函数。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-14T05:16:58.987

[`contains(Object)`](http://docs.oracle.com/javase/7/docs/api/java/util/List.html#contains%28java.lang.Object%29)确实是您正在寻找的。[`Collections.binarysearch(List, T)`](http://docs.oracle.com/javase/7/docs/api/java/util/Collections.html#binarySearch%28java.util.List,%20T%29)如果列表按升序排序，您也可以使用。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-06-16T18:11:37.383

以下代码示例将使您理解

```
 // Assuming that we java imported java.util.LinkedList........

    LinkedList ll =new LinkedList();
    ll.add("red");
    ll.add("blue");
    ll.get(0);  // gets the first element.........
    ll.getFirst(); // returns the first element..
    ll.getLast(); // returns the last element....
    int position = ll.indexOf("red");        

    boolean status;
    status= ll.contains("red"); // returns true if list contains red or returns false.... 
```

# php - 如何使用 codeigniter 上传 vcard(.vcf) 文件

> ID：10577771
> 
> 赞同：0
> 
> 时间：2012-05-14T05:10:54.160
> 
> 标签：php, codeigniter

我尝试使用 codeigniter 上传 vcard 文件。但是不允许上传。如何使用 codeigniter 上传 vcard(.vcf) 文件？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-13T02:02:51.763

如果上述建议不起作用，请尝试以下操作：

```
'vcf' => 'text/plain' 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-03-07T22:20:07.260

我需要使用

```
'vcf'   =>  array('text/x-vcard', 'application/octet-stream', 'text/plain', 'text/directory') 
```

全面覆盖。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-14T16:04:30.197

您需要将以下内容添加到数组`/application/config/mimes.php`内部。`$mimes`

```
'vcf'   =>  'application/octet-stream',
'vcf'   =>  'text/x-vcard' 
```

您还需要`allowed_types`为上传类设置配置变量。可以在[手册页](http://codeigniter.com/user_guide/libraries/file_uploading.html)上找到设置配置变量的示例。

```
$config['allowed_types'] = 'vcf'; 
```

了解其他文件类型是否可以使用您的代码成功上传、查看您尝试过的一些内容以及了解您在尝试上传 vcf 文件时遇到的错误会很有帮助。

# python - 忽略 CSV 的第一行，csv.reader() | 菜单和列表 - 从简单的 input() 菜单和循环访问 CSV 中的不同行

> ID：10577772
> 
> 赞同：0
> 
> 时间：2012-05-14T05:11:16.470
> 
> 标签：python, python-3.x

lol.txt 如下：

```
1,2,3\n
\n
4,5,6\n
\n
AwesomeSauce,12.3,10\n 
```

我正在使用的代码：

```
import csv

NumberAdult = input("Please enter the number of adults: ")
NumberAdult = int(NumberAdult)
NumberChild = input("Please enter the number of children: ")
NumberChild = int(NumberChild)
n = 0
with open ("lol.txt",'rt', newline = '\n') as f:
    csv_r = (line for line in csv.reader(f) if line)
    for row in csv_r:
        entries = [(name, float(price1), float(price2)) for name, price1, price2 in csv_r]
        for index, entry in enumerate(entries):
            price1 = float(entry[1])
            price2 = float(entry[2])
            print ("%i. %17s - %5.2f / %5.2f" % (index, entry[0], price1, price2))

choice = int(input("Which package would you like?: "))

packageChoice = (entries[choice])
for row in packageChoice:
    name = entry[0]
    AdultPrice = float(entry[1])
    ChildPrice = float(entry[2])

price = AdultPrice*NumberAdult + ChildPrice*NumberChild

print(name, price) 
```

输出：

> 请输入成人人数：2
> 请输入儿童人数：1
> 0\. 4 - 5.00 / 6.00
> 1\. AwesomeSauce - 12.30 / 10.00
> 您想要哪种套餐？：1
> AwesomeSauce 34.6

这意味着它忽略了 lol.txt 的第一行`1,2,3\n`- 因为`csv.reader()`似乎将此行视为字段名而不是数据。

有没有解决的办法？使用`csv.dictreader()`或其他东西来分配独立于文件本身的字段名称？

编辑：没关系`csv.reader()`，它不会将它们视为字段名称。所以看起来问题出在这个部分：

```
with open ("lol.txt",'rt', newline = '\n') as f:
    csv_r = (line for line in csv.reader(f) if line)
    for row in csv_r: 
```

现在，我不知道该怎么做——这是我让脚本最接近工作的地方。任何提示，搜索词，什么？

最终编辑：没关系，现在一切正常！我有一个我忘记的循环：

```
for row in csv_r:
   entries = [(name, float(price1), float(price2)) for name, price1, price2 in csv_r] 
```

这导致它跳过第一行。感谢 freenode 上#python 的 dash 让我再次看到那条线！

新问题：

```
import csv

NumberAdult = input("Please enter the number of adults: ")
NumberAdult = int(NumberAdult)
NumberChild = input("Please enter the number of children: ")
NumberChild = int(NumberChild)
n = 0
with open ("lol.txt",'rt', newline = '\n') as f:
    csv_r = (line for line in csv.reader(f) if line)
    entries = [(name, float(price1), float(price2)) for name, price1, price2 in csv_r]
    for index, entry in enumerate(entries):
        price1 = float(entry[1])
        price2 = float(entry[2])
        print ("%i. %17s - %5.2f / %5.2f" % (index, entry[0], price1, price2))

choice = int(input("Which package would you like?: "))

packageChoice = (entries[choice])
for row in packageChoice:
    name = entry[0]
    AdultPrice = float(entry[1])
    ChildPrice = float(entry[2])

price = AdultPrice*NumberAdult + ChildPrice*NumberChild

print(name, price) 
```

唯一的“选项”（无论您输入什么作为选项）是 2.，因为它是通过 list 放入的最后一行`entries`。

```
>>>
Please enter the number of adults: 2
Please enter the number of children: 1
0\.                 1 -  2.00 /  3.00
1\.                 4 -  5.00 /  6.00
2\.      AwesomeSauce - 12.30 / 10.00
Which package would you like?: 1
AwesomeSauce 34.6
>>> 
```

现在，我很确定问题出在此处：

```
csv_r = (line for line in csv.reader(f) if line)
entries = [(name, float(price1), float(price2)) for name, price1, price2 in csv_r]
for index, entry in enumerate(entries): 
```

或者，我应该为菜单的结果做另一个类似的部分，我不确定。我将努力实现两者以尝试对其进行故障排除。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-14T05:35:11.027

评论太长，无法进入评论；

`csv.reader()`不将第一行视为标题（仅`DictReader`具有该行为。）尝试插入一些打印语句进行调试 - 查看`csv_r`包含的内容会很有帮助。

* * *

```
csv_r = (line for line in csv.reader(f) if line) 
```

您确定您不是要对列表表达式使用方括号，而不是为生成器表达式使用括​​号吗？

* * *

```
for row in csv_r:
        entries = [(name, float(price1), float(price2)) for name, price1, price2 in csv_r] 
```

您确定要为中`entries`的每一行实现一次列表`csv_r`吗？当然你只需要这样做一次吗？

* * *

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-14T06:05:31.503

您错误地使用了 csv 模块。它返回一个生成器，因此后续调用会返回更多行。

实际上，您正在生成相同生成器的列表。

您似乎两次转换/检查您的数据

您正在遍历 csv_r 中的行，然后使用列表推导来做同样的事情，这是多余的。

这是一个简化版本

```
 import csv

NumberAdult = input("Please enter the number of adults: ")
NumberAdult = int(NumberAdult)

NumberChild = input("Please enter the number of children: ")
NumberChild = int(NumberChild)
n = 0

with open ("lol.txt") as f:
    csv_r = csv.reader(f)
    entries=[]
    for row in csv_r:
        #TODO:do checks here
        entries.append((row[0], float(row[1]), float(row[2])))

for index, entry in enumerate(entries):
    price1 = entry[1]  #do you need this?
    price2 = entry[2]  #do you need this?
    print ("%i. %17s - %5.2f / %5.2f" % (index, entry[0], price1, price2))

choice = int(input("Which package would you like?: "))
packageChoice = (entries[choice])
for row in packageChoice:
    name = entry[0]
    AdultPrice = float(entry[1])
    ChildPrice = float(entry[2]) 
price = AdultPrice*NumberAdult + ChildPrice*NumberChild
print(name, price) 
```

# facebook - 限制在朋友墙上发帖

> ID：10577773
> 
> 赞同：0
> 
> 时间：2012-05-14T05:11:18.310
> 
> 标签：facebook, facebook-wall

我需要在多个朋友墙上发帖。我知道它可以通过批量请求来完成，而且发帖到朋友墙是有限制的，例如我一天只能发帖到 10 个朋友墙。那是对的吗？

# php - cURL 似乎不是 php 中的编码数组

> ID：10577774
> 
> 赞同：0
> 
> 时间：2012-05-14T05:11:21.423
> 
> 标签：php, curl, httprequest

有人告诉我，通过将数组传递给 CURLOPT_POSTFIELDS 会自动为您执行 URL 编码，但由于某种原因，它并没有为我执行此操作。我试图自己编码一个字符串，但这不会包含在标题中。当我传入一个数组时，它没有被编码。

这是我的代码：

```
 $ch = curl_init();

            curl_setopt($ch, CURLOPT_HTTPHEADER, array("Accept: application/json', 'Content-Type: application/x-www-form-urlencoded"));
            curl_setopt($ch, CURLOPT_URL, "http://localhost:8888/testrail/index.php?/miniapi/add_case/s2");  
            curl_setopt($ch, CURLOPT_POSTFIELDS, $caseArgs);//$caseArgs is an array from another function
            curl_setopt($ch, CURLOPT_POST, true);

            curl_setopt($ch, CURLOPT_HEADER, 1);

            curl_exec($ch); 
```

编辑 - - -

```
Here is the array that I am working with:

    /*Function to set the data for each individual test case*/
function setTestCase($cellValue){
            $case[]=array();
        $case['title'] = $cellValue[0];
        echo $case['title']. "<- Title"."<br/>";
        $case['type'] = $cellValue[1];
        echo $case['type']. "<- Type"."<br/>";
        $case['priority'] = $cellValue[2];
        echo $case['priority']. "<- Priority"."<br/>";

        /*$case['estimate'] = $cellValue[3];
        echo $case['estimate']. "<- Estimate"."<br/>";
        $case['milestone'] = $cellValue[4];
        echo $case['milestone']. "<- MileStone"."<br/>";
        $case['refs'] = $cellValue[5];
        echo $case['refs']. "<- Custom Refs"."<br/>";
        $case['precon'] = $cellValue[6];
        echo $case['precon']. "<- Custom Precondition"."<br/>";
        $case['steps'] = $cellValue[7];
        echo $case['steps']. "<- Custom Steps"."<br/>";
        $case['expectedresults'] = $cellValue[8];
        echo  $case['expectedresults']. "<- Expected Results"."<br/>";
        $case['testSuite'] = $cellValue[9];
        echo $case['testSuite']. "<- TestSuite"."<br/>";*/

        $caseData=array(

            'Title'=> $case['title'],
            'Type'=> $case['type'],
            'Priority'=> $case['priority'],
            'key'=> "246810",

        );

        return $caseData; 
```

}

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-14T06:24:07.170

http_build_query 将对~~多维~~数组进行 URL 编码。

编辑：对不起。有人在上面提到了一个多维数组，我只是想到了它。

但是，您有一个错误，在`$case[] = array();` 这一行中，将一个新数组放入数组的第一个元素中`$case`。只需将其更改为：`$case = array();`

# java - 日食.jar 导出

> ID：10577777
> 
> 赞同：0
> 
> 时间：2012-05-14T05:12:03.287
> 
> 标签：java, eclipse

刚刚在 Eclipse 中完成了我的项目，使用 Sphinx 进行语音识别。在 Eclipse 中，程序运行良好，但是在我导出 .jar 并从命令行运行它之后，我得到了这个：

```
Exception in thread "main" java.lang.NoClassDefFoundError: edu/cmu/sphinx/util/p
rops/ConfigurationManager
        at edu.cmu.sphinx.demo.helloworld.HelloWorld.main(HelloWorld.java:34)
Caused by: java.lang.ClassNotFoundException: edu.cmu.sphinx.util.props.Configura
tionManager
        at java.net.URLClassLoader$1.run(Unknown Source)
        at java.net.URLClassLoader$1.run(Unknown Source)
        at java.security.AccessController.doPrivileged(Native Method)
        at java.net.URLClassLoader.findClass(Unknown Source)
        at java.lang.ClassLoader.loadClass(Unknown Source)
        at sun.misc.Launcher$AppClassLoader.loadClass(Unknown Source)
        at java.lang.ClassLoader.loadClass(Unknown Source)
        ... 1 more 
```

任何人都知道我做错了什么？谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-14T05:17:31.967

您的类路径中缺少第三方（Sphynx）尝试：

java -cp ; 班级名称 .....

# php - 如何在 apns 的日志文件中获取 $this->pdo 值？

> ID：10577781
> 
> 赞同：0
> 
> 时间：2012-05-14T05:12:24.123
> 
> 标签：php, iphone, ios, apple-push-notifications

我不知道 PHP 脚本。我是一名 iPhone 开发人员。我想为我的 iPhone 应用启用 Apple 推送通知。我正在关注教程[http://www.raywenderlich.com/3525/apple-push-notification-services-tutorial-part-2](http://www.raywenderlich.com/3525/apple-push-notification-services-tutorial-part-2)。从终端运行 push.php 文件时，我的 push_development.log 文件中出现以下错误，

终端命令：

```
unknownc42c032e8297:~ creagx$ cd /Users/creagx/Desktop/PushChatServer
unknownc42c032e8297:PushChatServer creagx$ php push/push.php development 
```

push_development.log 文件中的错误消息：

```
2012-05-14T10:17:14+05:30 Push script started (development mode)
2012-05-14T10:17:14+05:30 Exiting with fatal error: exception 'PDOException' with message 'SQLSTATE[HY000] [2002] No such file or directory' in /Users/gopi/Desktop/PushChatServer/push/push.php:82
Stack trace:
#0 /Users/gopi/Desktop/PushChatServer/push/push.php(82): PDO->__construct('mysql:host=loca...', 'gopipush', 'uH4q9xQGNAuFW...', Array)
#1 /Users/gopi/Desktop/PushChatServer/push/push.php(36): APNS_Push->__construct(Array)
#2 {main} 
```

我想知道通过这个命令传递的值是什么？

```
// Create a connection to the database.
        $this->pdo = new PDO(
            'mysql:host=' . $config['db']['host'] . ';dbname=' . $config['db']['dbname'], 
            $config['db']['username'], 
            $config['db']['password'],
            array());

        writeToLog('PDO Value: ' . $this->pdo); 
```

我尝试使用 打印日志文件中的 PDO 值`writeToLog('PDO Value: ' . $this->pdo);`。谁能告诉我如何知道 pdo 值？提前致谢。

**编辑：**

```
// Create a connection to the database.
        $this->pdo = new PDO(
            'mysql:host=' . $config['db']['host'] . ';dbname=' . $config['db']['dbname'], 
            $config['db']['username'], 
            $config['db']['password'],
            array());

        writeToLog('Host: ' . $config['db']['host']);
        writeToLog('DataBase: ' . $config['db']['dbname']);
        writeToLog('Username: ' . $config['db']['username']);
        writeToLog('Password: ' . $config['db']['password']); 
```

再次在日志文件中收到相同的错误消息。我认为`writeToLog('Host: ' . $config['db']`['host']); 行将不会编译，直到行中的错误修复`$this->pdo`。这是对的吗？请帮我。提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-14T05:24:19.797

PDO 是一个类...您可以使用 var_dump 来检查它的成员变量。var_dump 直接输出，因此您可以使用输出缓冲来捕获它，如下所示：

```
ob_start();
var_dump($this->PDO);
writeToLog('PDO state: ' . ob_get_contents());
ob_end_clean(); 
```

老实说，这可能很容易做到：

```
writeToLog('Host: ' . $config['db']['host']);
writeToLog('DB: ' . $config['db']['dbname']);
writeToLog('username: ' .  $config['db']['password']);
writeToLog('Password: ' . $config['db']['password']); 
```

这一切都假设这`writeToLog`是您创建的工作功能。如果没有，那就`echo`取而代之。

# android - 当我在 android 中运行我的 twitter 应用程序时，出现以下错误

> ID：10577782
> 
> 赞同：0
> 
> 时间：2012-05-14T05:12:39.903
> 
> 标签：android

请帮助我如何解决这个问题。

```
java.lang.IllegalArgumentException: already added: Ltwitter4j/Annotation;
[2012-05-14 10:40:59 - Twitter] Dx  at com.android.dx.dex.file.ClassDefsSection.add(ClassDefsSection.java:123)
[2012-05-14 10:40:59 - Twitter] Dx  at com.android.dx.dex.file.DexFile.add(DexFile.java:163)
[2012-05-14 10:40:59 - Twitter] Dx  at com.android.dx.command.dexer.Main.processClass(Main.java:486)
[2012-05-14 10:40:59 - Twitter] Dx  at com.android.dx.command.dexer.Main.processFileBytes(Main.java:455)
[2012-05-14 10:40:59 - Twitter] Dx  at com.android.dx.command.dexer.Main.access$400(Main.java:67)
[2012-05-14 10:40:59 - Twitter] Dx  at com.android.dx.command.dexer.Main$1.processFileBytes(Main.java:394)
[2012-05-14 10:40:59 - Twitter] Dx  at com.android.dx.cf.direct.ClassPathOpener.processArchive(ClassPathOpener.java:245)
[2012-05-14 10:40:59 - Twitter] Dx  at com.android.dx.cf.direct.ClassPathOpener.processOne(ClassPathOpener.java:131)
[2012-05-14 10:40:59 - Twitter] Dx  at com.android.dx.cf.direct.ClassPathOpener.process(ClassPathOpener.java:109)
[2012-05-14 10:40:59 - Twitter] Dx  at com.android.dx.command.dexer.Main.processOne(Main.java:418)
[2012-05-14 10:40:59 - Twitter] Dx  at com.android.dx.command.dexer.Main.processAllFiles(Main.java:329)
[2012-05-14 10:40:59 - Twitter] Dx  at com.android.dx.command.dexer.Main.run(Main.java:206)
[2012-05-14 10:40:59 - Twitter] Dx  at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
[2012-05-14 10:40:59 - Twitter] Dx  at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57)
[2012-05-14 10:40:59 - Twitter] Dx  at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
[2012-05-14 10:40:59 - Twitter] Dx  at java.lang.reflect.Method.invoke(Method.java:616)
[2012-05-14 10:40:59 - Twitter] Dx  at com.android.ide.eclipse.adt.internal.build.DexWrapper.run(DexWrapper.java:180)
[2012-05-14 10:40:59 - Twitter] Dx  at com.android.ide.eclipse.adt.internal.build.BuildHelper.executeDx(BuildHelper.java:702)
[2012-05-14 10:40:59 - Twitter] Dx  at com.android.ide.eclipse.adt.internal.build.builders.PostCompilerBuilder.build(PostCompilerBuilder.java:646)
[2012-05-14 10:40:59 - Twitter] Dx  at org.eclipse.core.internal.events.BuildManager$2.run(BuildManager.java:728)
[2012-05-14 10:40:59 - Twitter] Dx  at org.eclipse.core.runtime.SafeRunner.run(SafeRunner.java:42)
[2012-05-14 10:40:59 - Twitter] Dx  at org.eclipse.core.internal.events.BuildManager.basicBuild(BuildManager.java:199)
[2012-05-14 10:40:59 - Twitter] Dx  at org.eclipse.core.internal.events.BuildManager.basicBuild(BuildManager.java:321)
[2012-05-14 10:40:59 - Twitter] Dx  at org.eclipse.core.internal.events.BuildManager.build(BuildManager.java:396)
[2012-05-14 10:40:59 - Twitter] Dx  at org.eclipse.core.internal.resources.Project$1.run(Project.java:618)
[2012-05-14 10:40:59 - Twitter] Dx  at org.eclipse.core.internal.resources.Workspace.run(Workspace.java:2344)
[2012-05-14 10:40:59 - Twitter] Dx  at org.eclipse.core.internal.resources.Project.internalBuild(Project.java:597)
[2012-05-14 10:40:59 - Twitter] Dx  at org.eclipse.core.internal.resources.Project.build(Project.java:124)
[2012-05-14 10:40:59 - Twitter] Dx  at com.android.ide.eclipse.adt.internal.project.ProjectHelper.doFullIncrementalDebugBuild(ProjectHelper.java:1000)
[2012-05-14 10:40:59 - Twitter] Dx  at com.android.ide.eclipse.adt.internal.launch.LaunchConfigDelegate.launch(LaunchConfigDelegate.java:147)
[2012-05-14 10:40:59 - Twitter] Dx  at org.eclipse.debug.internal.core.LaunchConfiguration.launch(LaunchConfiguration.java:854)
[2012-05-14 10:40:59 - Twitter] Dx  at org.eclipse.debug.internal.core.LaunchConfiguration.launch(LaunchConfiguration.java:703)
[2012-05-14 10:40:59 - Twitter] Dx  at org.eclipse.debug.internal.ui.DebugUIPlugin.buildAndLaunch(DebugUIPlugin.java:928)
[2012-05-14 10:40:59 - Twitter] Dx  at org.eclipse.debug.internal.ui.DebugUIPlugin$8.run(DebugUIPlugin.java:1132)
[2012-05-14 10:40:59 - Twitter] Dx  at org.eclipse.core.internal.jobs.Worker.run(Worker.java:54)
[2012-05-14 10:40:59 - Twitter] Dx 1 error; aborting
[2012-05-14 10:40:59 - Twitter] Conversion to Dalvik format failed with error 1 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-14T05:17:09.103

似乎您已经包含了相同的库，请检查对 android 库的所有引用，并检查所有 jar 库只包含一次。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-14T05:17:47.403

这可能是由于“annotations.jar”文件造成的。请检查以下链接，它可能会解决您的错误。

[缺少 annotations.jar](https://stackoverflow.com/questions/10061986/missing-annotations-jar)

# ruby - Ruby：检查字符串是否可以转换为整数

> ID：10577783
> 
> 赞同：11
> 
> 时间：2012-05-14T05:12:51.527
> 
> 标签：ruby

> **可能重复：**
> [使用 Ruby 测试字符串是否基本上是引号中的整数？](https://stackoverflow.com/questions/1235863/test-if-a-string-is-basically-an-integer-in-quotes-using-ruby)

```
“1”
“一”

```

第一个字符串是一个数字，我可以说 to_i 来获得一个整数。
第二个字符串也是一个数字，但我不能直接调用 to_i 来获取所需的数字。

如何检查是否可以使用 to_i 成功转换？

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2012-05-14T07:33:08.877

有一种`Integer`方法，`to_i`如果它不能转换，就会引发异常：

```
>> Integer "1"
=> 1
>> Integer "one"
ArgumentError: invalid value for Integer(): "one" 
```

我想您可以将其与内联救援一起使用：

```
Integer(foo) rescue nil 
```

如果您的字符串可以转换，您将获得整数，否则`nil`（或您想放在后面的任何其他内容`rescue`）。

虽然引发异常可能看起来有点矫枉过正，但该`Integer`方法是我所知道的 Ruby 中最全面的检查（例如，“09”不会转换，因为前导零使其成为八进制，而 9 是无效数字）。用正则表达式覆盖所有这些情况将是一场噩梦。

# c - 将数组复制到动态分配的内存

> ID：10577787
> 
> 赞同：5
> 
> 时间：2012-05-14T05:13:01.580
> 
> 标签：c, arrays, memory, pointers, dynamic

我让我的代码正常工作，但我觉得好像有一种更快的方法可以做到这一点，尤其是在我的函数副本中。这是我的代码。这可以更快吗？这是在 C 顺便说一句。另外，当我从函数返回 cpy 时，它是否会删除动态内存，因为它超出了范围？我不想有内存泄漏：P

```
#include <stdio.h>
#include <stdlib.h>
double *copy(double a[], unsigned ele);
int main(){
    double arr[8], *ptr;
    unsigned i=0;
    for(;i<7;i++){
        scanf_s("%lf", &arr[i]);
    }
    ptr=copy(arr, 8);
    for(i=0;i<7; i++)
        printf("%f", ptr[i]);

}

double *copy(double a[], unsigned ele){
    double *cpy= malloc(sizeof(double)*ele);
    int i=0;
    for(;i<ele; i++)
        cpy[i]=a[i];
    return cpy;
} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-14T05:15:17.367

您可以将您的替换`for`为`memcpy`.

```
memcpy(cpy, a, ele * sizeof *cpy); 
```

除此之外，您所做的一切都很好：您正在返回一个指针，因此调用者有机会获得`free`它。

`free`另外，我认为如果您要退出，最好不要打电话- 操作系统无论如何都会收集内存。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-05-14T05:17:26.013

使用 Memcpy。它可能能够利用您的底层硬件等......无需重新发明轮子。:-)

```
void * memcpy ( void * destination, const void * source, size_t num );

double *copy(double a[], unsigned ele){
    size_t size = sizeof(double)*ele ;
    double *cpy= malloc(size);
    memcpy( cpy, a, size ) ;
    return cpy;
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-14T05:26:23.377

> 它是否删除了动态内存，因为它超出了范围

不，它没有：唯一超出范围的内存是持有指针的内存；你返回那个指针的值，这是你唯一需要访问你 malloc-ed 的内存并且在你明确释放它之前一直保持 malloc-ed 的东西。

> 我不想有内存泄漏

当您获得不会释放的内存时，就会发生内存泄漏。实际上，您的代码存在内存泄漏：您没有`free`复制指针返回的内存：`free(ptr);`在代码末尾。在这种情况下，这并不重要，但避免忘记它是一个好习惯。

另请注意，如果内存在指向它的指针超出范围时会自动释放，则它将从复制函数本身内部释放，并且您将返回一个无效指针；然后每次指针超出范围时都会有很多双重免费等！幸运的是，这不会发生，因为您使用 malloc 获得的内存必须通过 free 显式释放。

# javascript - JavaScript：字符串与数字比较

> ID：10577789
> 
> 赞同：0
> 
> 时间：2012-05-14T05:13:07.647
> 
> 标签：javascript, html, string-comparison, autoboxing, type-conversion

我们知道默认情况下，下面的'obj'是字符串。如果不使用 'parseInt'，JavaScript 如何将其与数字进行比较？

```
obj = document.frm.weight.value;
if( obj < 0 || obj > 5 ){
    alert("Enter valid range!");
    return false;
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-14T07:28:18.073

好吧，作为一个[EMCAScript](http://www.ecma-international.org/publications/files/ECMA-ST/Ecma-262.pdf)实现，Javascript 将遵循Ecma-262 的**11.8.5**部分中定义的**抽象关系比较算法。**

 **首先，Javascript 将应用于两个操作数的内部 operator ，它必须根据传递给它的参数`ToPrimitive`返回一个原始值（**undefined**、**boolean**、**string**、**null**或**number ）。**如果将原始值传递给返回值，`ToPrimitive`则返回值是传递给运算符的参数值，如果是 Object，则调用 Javascript 中所有 Objects 实现的内部方法，则为**[[DefaultValue]]**。此方法负责返回 Object 表示的原始类型。根据代码的类型，此方法可能会调用Object 的一个`toString`或多个`valueOf`方法。

例如：

```
 var x = {valueOf: function() { return 3; }};

 console.log(x > 2); // true
 console.log(x < 1); // false
 console.log(x == 3); // true 
```

Javascript 如何决定它应该调用哪个方法？好吧，`ToPrimitive`操作员可能会收到一个可选参数，它用于优先选择特定类型，例如`Number`or `String`。如果`Number`传递，则`valueOf`首先调用该方法，如果该方法在 Object 中不存在或不返回原始类型，`toString`则调用该方法。如果`String`通过，则相反：`toString`首先被调用，如果它既不存在于 Object 中也不返回原始值，`valueOf`则被调用。
这就是为什么在上面的代码片段中，我可以自由地比较一个 Object 和一个原始类型。在处理比较时，理解这一点非常重要。

之后，如果两个操作数都是`Strings`Javascript 将遵循一些与 Unicode 标准相关的有趣且特定的算法，检查代码点值。否则，Javascript 会将两个操作数转换为`Number`并比较它们的数学值。请注意，如果其中一个是**NaN**，则比较的计算结果为**undefined**，这在语句中将是**错误的。**`if`

一些例子：

```
// true => ToNumber(true) > ToNumber(false)
console.log(true > false); 
// true => ToNumber("5") < ToNumber(10)
console.log("5" < 10); 
// false ToNumber(ToPrimitive(obj, Number)) == ToNumber(10)
console.log(({valueOf: function() { return 10}}) > 10); 
// false, it's not related to the length of the strings, 
// the code point value of each char  is used to evaluate the comparison
console.log('Hello worlds' > 'hello'); 
```

希望它有助于澄清一些事情。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-14T05:16:49.127

如果`<`or的操作数之一`>`是数字，则另一个将被强制转换为数字。

```
alert("3" > 3);   // false
alert("3.5" > 3); // true 
```

**编辑和进一步解释：**

如果无法将其他参数转换为数字，则将其转换为称为特殊值的特殊值**-****缩写**`NaN`代表“**非**数字”。该值有一个绝对无法比较的特殊属性 - 所有关系运算符都喜欢，并且如果其中一个参数是，则将返回。 ******`NaN``<``>``=``false``NaN`******

 ******```
alert("" > 3);      // false
alert("3.5?" > 3);  // false
alert({} > 3);      // false 
```

另外，请注意，在第二行中，如果我们使用

```
alert(parseInt("3.5?") > 3); 
```

它会发出警报`true`，因为从字符串中`parseInt`读取，然后停止读取并因此评估为。然而，`"3.5"``"3.5?"``"?"``3.5`

```
alert("3.5?" > 3); 
```

返回`false`，因为从`string`to`number`的转换不像`parseInt`. 因为`"3.5"`确实不是一个数字，所以它被转换为`NaN`.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-14T06:09:12.327

字符串将使用任意规则转换为数字。通常你会看到这样的规则：

*   如果字符串以 开头`0x`，则将其视为十六进制数。
*   如果字符串以 开头`0`，则将其视为八进制数。（并非在所有浏览器中）
*   否则，将其视为十进制。

这尤其意味着像“09”这样的输入可能会使浏览器混淆，它可能被解释为`9`或`0`（因为九不是有效的八进制数字）。

通常，在将字符串与数字进行比较时，您应该始终`parseInt`使用 radix 参数手动调用`10`。这样一来，就没有惊喜了。********

# c++ - 我应该如何检测大型 C++ 项目中的编译时间瓶颈？

> ID：10577793
> 
> 赞同：21
> 
> 时间：2012-05-14T05:13:17.627
> 
> 标签：c++, visual-studio, visual-studio-2008, compiler-optimization

我想减少大型 C++ 项目的编译时间。我尝试使用预编译的头文件、接口等。但在继续之前，我想知道是否有任何工具可以帮助检测为什么编译时间这么长。有人建议使用 pc-lint，我会试一试。 [我应该如何检测大型 C++ 项目中不必要的#include 文件？](https://stackoverflow.com/questions/74326/how-should-i-detect-unnecessary-include-files-in-a-large-c-project) 但是，如果有其他工具可以分析编译时间并谈论任何提高编译速度的提示，请告诉我。提前致谢。

环境：Microsoft Visual Studio C++ 2008 或 2010。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-14T06:16:42.990

我喜欢的一种方法是查看您的一些源的预处理器输出——只需从编译器的角度阅读其中的一些，而不是`#inclu`sion 的某种抽象表示。您可能会发现一些您不需要的大块包含/库，并且不一定知道依赖项/包含的存在（或需要）。从那里，决定可以删除哪些依赖项。即使您的依赖关系都是正确的，大输出也可以建议您如何*将*较大的模块划分为较小的部分。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-05-14T06:46:53.883

C++*还不*是模块化的（还），编译瓶颈通常是由于包含问题；即在不需要时使用包含太多文件。*目前*也可能需要这些包含，但通过一些简单的重新设计可能会变得多余。

*   要检测多余的包含，您可以检查[include-what-you-use](http://code.google.com/p/include-what-you-use/)，您将遇到的唯一问题是它在 Clang 之上工作，因此您需要在那里进行一些设置。
*   否则，您需要查看您的代码，特别是*headers*。

由于该工具是自给自足的并且有文档记录，因此让我对审查过程进行一些扩展。

1.  任何包含两个以上的标题`#include`都是高度可疑的。
2.  相反，如果您的源文件塞满了各种类型和功能，而它只有几个包含，则可能意味着其中一个标题带来了太多。

如果您不知道什么是必需的，什么不是，以及如何删除多余的标题，我建议您阅读[Pimpls - Beauty Marks You Can Depend On](http://www.gotw.ca/publications/mill04.htm)；如果您不知道 Pimpl 是什么，请阅读[编译防火墙](http://www.gotw.ca/gotw/024.htm)。不过，我建议谨慎行事，Pimpl 具有运行时和维护成本，因此仅在确实需要时才使用它。就个人而言，我绝对会在您提供给第三方的库的公共标头中推荐它（ABI 兼容性），否则尽量避免它。

如果手动检查不是您的强项，您可以为每个**标头**生成预处理器输出（不要太担心源文件），然后检查更大的输出。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-05-14T05:24:03.157

我不知道有任何工具可以改善编译时间，但我可以建议很少的手动补救措施（将此视为评论）：

1.  对每个头文件都有`#include`保护，这样多个包含就不会产生任何问题
2.  减少成员函数体，内联函数体直接放入头文件；只要有他们的声明
3.  检查是否没有不必要的`template`函数和类；请记住，模板`inline`是默认的。太多的模板/元编程会导致巨大的编译时间。
4.  如果`#define`s 的数量不必要地高，那么它们会增加预处理阶段，最终增加编译时间

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-05-14T09:45:38.037

You could look into [unity builds.](http://buffered.io/posts/the-magic-of-unity-builds/)
Basically it's including all `.cpp` files into one .cpp file and only compiling that one file. I've tested it on a big project and it was really effective.
It works because of it uses much less I/O when it includes all your headers/cpp's once and not for every cpp.

Now we don't use unity builds anymore because we all got a SSD hardware upgrade, and they are just awesome.

Here's a related SO question about Unity builds: [#include all .cpp files into a single compilation unit?](https://stackoverflow.com/questions/543697/include-all-cpp-files-into-a-single-compilation-unit)

# database - SSD 的低延迟键值存储

> ID：10577795
> 
> 赞同：13
> 
> 时间：2012-05-14T05:13:26.533
> 
> 标签：database, performance, nosql, key-value, solid-state-drive

我们正在开发具有以下属性的 SSD 支持的键值解决方案：

*   吞吐量：10000 TPS；50/50 看跌/获得；
*   延迟：平均 1 毫秒，第 99.9 个百分位数 10 毫秒
*   数据量：约 10 亿个值，每个约 150 字节；64位密钥；随机访问，20% 的数据适合 RAM

我们在商品 SSD 上尝试了 KyotoCabinet、LevelDB 和 RethinkDB，使用不同的 Linux IO 调度程序、ext3/xfs 文件系统；使用[Rebench](https://github.com/coffeemug/rebench)进行了许多测试；并发现在所有情况下：

*   只读吞吐量/延迟非常好
*   仅写入/仅更新始终处于中等水平，但有许多高延迟异常值
*   *即使在直接访问块设备（绕过文件系统）的情况下，*混合的读/写工作负载也会导致吞吐量/延迟的灾难性波动

 *下图说明了 KyotoCabinet 的这种行为（横轴是时间，三个周期清晰可见 - 只读、混合、仅更新）。

问题是：是否有可能使用 SSD 实现描述的 SLA 的低延迟以及推荐哪些键值存储？

![在此处输入图像描述](../Images/03d6806eefdb618d1b68c26375922b65.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-06T16:23:38.987

高度变化的写入延迟是 SSD（尤其是消费模型）的一个常见属性。[在这个AnandTech 评论](http://www.anandtech.com/show/6432/the-intel-ssd-dc-s3700-intels-3rd-generation-controller-analyzed)中有一个很好的解释。

总结是随着磨损均衡开销的增加，SSD 写入性能会随着时间的推移而恶化。随着驱动器上的可用页面数量减少，NAND 控制器必须开始对页面进行碎片整理，这会导致延迟。NAND 还必须构建 LBA 到块映射，以跟踪数据在各种 NAND 块中的随机分布。随着地图的增长，地图上的操作（插入、删除）会变慢。

您将无法使用软件方法解决低级硬件问题，您将需要升级到企业级 SSD 或放宽延迟要求。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-12-25T19:14:52.603

[Aerospike](http://aerospike.com)是一种较新的键/值（行）存储，可以完全在 SSD 上运行，读/写延迟小于 1 毫秒，TPS 非常高（达到数百万）。

SSD 具有出色的随机读取访问权限，但减少写入差异的关键是使用顺序 IO（这类似于常规硬盘）。它还大大减少了在 SSD 上进行大量写入时可能发生的磨损均衡和褪色。

如果您正在构建自己的键值系统，请使用日志结构的方法（如 Aerospike），以便批量写入并以大块的形式附加/写入。内存索引可以维护值的正确数据位置，而后台进程从磁盘清理过时/删除的数据并整理文件碎片。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-06T20:46:04.903

这是一种轻率的想法，但它可能会奏效。假设您的 SSD 为 128GB。

1.  在 SSD 上创建一个 128GB 的​​交换分区
2.  配置您的机器以将其用作交换
3.  在机器上设置 memcached 并设置 128GB 内存限制
4.  基准

内核是否能够足够快地将内容分页进出？没办法知道。这更多地取决于您的硬件而不是内核。

Poul-Henning Kamp 在 Varnish 中做了与此非常相似的事情，它让内核跟踪 Varnish 的事物（虚拟与物理内存），而不是让 Varnish 去做。 [https://www.varnish-cache.org/trac/wiki/ArchitectNotes](https://www.varnish-cache.org/trac/wiki/ArchitectNotes)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2019-04-05T23:13:54.907

NuDB 专为您的用例而设计。无论数据库有多大，它都具有 O(1) 的插入和查找功能。目前，它使用 9TB（9 TB）的数据文件来满足 Rippled 的需求。该库是开源的，只有标头，并且只需要 C++11 [https://github.com/CPPAlliance/NuDB](https://github.com/CPPAlliance/NuDB)*

# jquery - jQuery，将表格元素的背景颜色设置为前一个元素的颜色？

> ID：10577799
> 
> 赞同：0
> 
> 时间：2012-05-14T05:14:19.557
> 
> 标签：jquery, colors, background, html-table

我想动态设置 div 的背景颜色等于直接进行它的表行的背景颜色。这就是我想我想做的事情：

```
$(this).next().css('background-color', $(this).css('background-color')); 
```

在此板上寻找答案时，我发现[了此线程](https://stackoverflow.com/questions/9674724/set-text-color-of-one-element-to-bg-color-of-another-element)。这似乎是对他们有用的答案，但我的不起作用。任何建议都欣然接受。

编辑

对于那些要求查看我正在尝试做什么的人，这里是构建我的表格主体的 PHP 代码：

```
<?php
//  For every row past the first (header) row, create a table entry
    while ( $row = fgetcsv($handle) ) {

        echo "<tr class='c_edd_row'>";                      
        //  Build each cell         
        $num = count($row);         
        for ($c=0; $c < $num; $c++) {
            //  Do not echo entries 23 through 27 (unused cells)
           if ( $c < 23 || $c > 27 ) {
              echo "<td>".$row[$c]."</td>";
              //  save the last entry for the hidden div
              $validation_notes = $row[$c];
          }
        }
        echo "</tr>";
        echo "<tr class='c_sub_row'>
        <td colspan='42' class='c_notes_div'>
        <div class='c_notes_div'>".$validation_notes."</div>
        </td></tr>";
    }
?> 
```

响应者是正确的，我没有很好地说明我的问题。我所说的 div 实际上包含在 TRs 中。我将其用作最后一行条目中包含数据的每一行的下拉列表。

当我单击一行时，具有类 c_sub_row 的下一行从 display:none 更改为 display:table-row，效果很好，但我需要它在发生这种情况时采用前一行的颜色。

最终更新 - 非常感谢 Jonathan Sampson

这是基于以下评论的最终解决方案：

```
$('.c_edd_row').on('click',  function(event) {
    var bg = $(this).css("background-color");
    $(this).next().css("background-color", bg);   //  colors the next row
    $(this).next().find('div').css("background-color", bg);  //  colors the div
}); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-14T05:26:10.737

表格行永远不会直接在`div`元素之前 - 这将是无效的表格标记。如果您想将 tr 的背景设置为它之前的 tr 的背景，您可以执行以下操作：

```
$("tr:eq(1)").css("background-color", function(){
  return $(this).prev().css("background-color");
}); 
```

或者您可能在 a`div`内有 a `tr`，并且您希望 与的父级之前的`div`具有相同的背景颜色：`tr``div`

```
$(this).css("background-color", function(){
  return $(this).closest("tr").prev().css("background-color");
}); 
```

`this`当前`div`元素在哪里。

这里的魔力发生在用作方法的第二个参数的匿名函数中`$.css`。从它里面你可以做任何事情。例如，我们可以选择页面上的任何其他元素并复制其背景颜色：

```
$(this).css("background-color", function(){
  return $(".someOtherDiv").css("background-color");
}); 
```

同样，假设`this`是我们的目标`div`元素，它现在将具有与 相同的背景颜色`<div class="someOtherDiv">...</div>`。

### 更新

从评论中，听起来你有两个表格行（至少）。一个可见，下一个隐藏。在第二个中，您有一个 div。当您单击第一个（可见）表格行时，您希望显示第二个并将第一个 TR 的 bg 应用于第二个（现在可见）表格行中的 DIV：

```
$("tr:visible").on("click", function(event){
  var bg = $(this).css("background-color");
  $(this).next().show().find("div").css("background-color", bg);
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-14T05:30:46.900

```
$(document).ready(function(){

 $(".your_table_class tr:last-child").each(function(){
    $(this).parent().next().css('background-color', $(this).css('background-color'));
 })

}); 
```

这`.your_table_class`是在下一个 div 将被着色的所有表格中使用的类/虚拟类。记住 div 应该是表格的下一个元素。

此外，如果您的表格包含`<tbody>`标签，那么该行将是`$(this).parent().parent().next().css('background-color', $(this).css('background-color'));`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-14T05:36:00.873

### *[jsBin 演示](http://jsbin.com/aqotix/edit#javascript,html,live)*

```
var neededBG = $('#children_table tr').css('background-color');   // cache the needed color
$('#children_div').css({backgroundColor: neededBG });             // use of the needed color 
```

# sql - 如何编写查询以获取期间范围内的数据？

> ID：10577804
> 
> 赞同：0
> 
> 时间：2012-05-14T05:15:12.443
> 
> 标签：sql, oracle

我有一个员工表，其中包含如下列

```
emp_id, firstname, lastname, month  and year. 
```

现在我需要在 2012 年 1**月**和**2012**年 3 月之间从表中获取*员工*。 在*月份*和*年份*列中，我们为 jan 存储“1”，为 March 存储“3”，即月份编号，并且 year 列具有类似*2012*的年份。 请帮忙。

 ******** * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-14T05:17:42.023

2012 年 1 月至 2012 年 3 月期间的员工：

```
select * from employee
where year = 2012 and month between 1 and 3 
```

2012 年 1 月至 2013 年 3 月期间的员工：

```
select * from employee
where (year = 2012 and month between 3 and 12)
or (year = 2013 and month between 1 and 3) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-14T05:22:21.813

```
SELECT * 
FROM  employee
WHERE to_char(year,0000) + to_char(month,00) BETWEEN '201201' AND '201203' 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-14T05:35:12.153

我认为您最好在进行选择之前将所有内容都转换为日期时间。我个人更喜欢单个日期时间列而不是单独的“月”和“年”列，但如果你不能那样做，这样的事情会起作用：

```
SELECT * FROM employees 
 WHERE CAST( CAST(year AS VARCHAR(4)) +
            RIGHT('0' + CAST(month AS VARCHAR(2)), 2) +
            '00'
            AS DATETIME)
BETWEEN
    CAST( CAST(start_year AS VARCHAR(4)) +
            RIGHT('0' + CAST(start_month AS VARCHAR(2)), 2) +
            '00'
            AS DATETIME)
AND
    CAST( CAST(end_year AS VARCHAR(4)) +
            RIGHT('0' + CAST(end_month AS VARCHAR(2)), 2) +
            '00'
            AS DATETIME) 
```

不幸的是，这有点丑陋。也许可以通过在选择语句之前将开始日期和结束日期转换为日期时间并将它们存储在变量中来清理它？

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-05-14T06:00:38.613

嗨，这可能对你有帮助，

```
 select * from emp
where to_date(concat('1-',concat(concat(month,'-'), year)),'DD-MM-YY') 
      between to_date('1-&month-&year' ,'DD-MM-YY') 
and   to_date('1-&month-&year' ,'DD-MM-YY') ; 
```

我将每个月和年的值转换为指定格式的数据并进行比较。*******

# gwt - 通过单击子面板中的按钮关闭弹出面板

> ID：10577807
> 
> 赞同：1
> 
> 时间：2012-05-14T05:15:41.663
> 
> 标签：gwt, popuppanel

我有以下面板层次结构：

**自定义面板 1**包含**PopupPanel**包含**DecklayoutPanel**包含**CustomPanel 2**包含**FlowPanel**包含**Button**。

如何通过单击按钮关闭自定义面板 1 或 PopupPanel？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-14T07:30:33.967

// 自定义面板2

```
class CustomPanel2 {
  @UiField Button closeButton;

  public CustomPanel2() {
    initWidget(uiBinder.createAndBindUi(this));
  }

  public HasClickHandlers closeButton() {
    return closeButton;
  }
} 
```

// 自定义面板1

```
class CustomPanel1 implements ClickHandler {
  @UiField PopupPanel myPopupPanel;
  @UiField CustomPanel2 customPanel2;

  public CustomPanel1() {
    initWidget(uiBinder.createAndBindUi(this));
    customPanel2.closeButton().addClickHandler(this);
  }

  @Override
  public void onClick(ClickEvent e) {
    myPopupPanel.hide();
  }
} 
```

# c# - 如果列名不是从第一行开始，如何使用 OLEDB 查询从 Excel 中获取列名

> ID：10577809
> 
> 赞同：3
> 
> 时间：2012-05-14T05:15:54.860
> 
> 标签：c#, excel, oledb

我在 OLEDB 查询中面临 2 个问题

（问题 1）

我需要获取用户上传的 Excel 表的列名。我的 excel 连接字符串是

```
connectionString = "Provider=Microsoft.Jet.OLEDB.4.0;Data Source="+fileNameAndPath+";
Extended Properties=\"Excel 8.0;HDR=YES;IMEX=1\""; 
```

然后我将使用这个命令

```
connection.Open();

DataTable schemaTable = connection.GetSchema("Columns");
Taking column name from each datarow like this
string name = (string)row["COLUMN_NAME"]; 
```

如果列名出现在 excel 的第一行中，它工作正常。但如果列名行不是从第一行开始，它会将列名命名为“F1，F2，.....”。我该如何解决这个问题？有什么方法可以告诉查询，从哪一行获取列名？

（问题 2）

像列标题一样，我需要从 excel 中选择特定范围内的数据。比如说从第 3 行到第 12 行取数据。所以我使用了这样的查询，

```
Select RepName, Country from [Sheet1$3:12]. 
```

但它抛出了异常，像这样的消息“没有为一个或多个必需参数提供值”。

我的查询中有语法错误吗？

如果是这样，任何人都可以告诉如何更正查询？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-09T09:44:08.290

问题 1 无法通过 OLEDB 解决，Excel 不是数据库，它唯一能做的就是使用第一行作为列名，或者如果第一行为空白，F1 等。

解决此问题的唯一方法是使用互操作删除空白行，然后通过 OLEDB 查询或通过互操作解析整个工作表。

# iphone - 可以有两个指定的初始化程序吗？

> ID：10577824
> 
> 赞同：1
> 
> 时间：2012-05-14T05:17:31.337
> 
> 标签：iphone, objective-c, ios, cocoa-touch, design-patterns

我在 UIViewController 的子类中有以下内容；

```
- (id) initWithFullScreen
{
    self = [super initWithNibName:nil bundle:nil];

    if (self) 
    {
        _fullScreen = YES;
    }

    return self;     
}
- (id) init
{
    self = [super initWithNibName:nil bundle:nil];

    if (self) 
    {
        _fullScreen = NO;
    }

    return self; 
}

- (id) initWithNibName:(NSString *)nibNameOrNil bundle:(NSBundle *)nibBundleOrNil 
{
    return [self init];
} 
```

如您所见，它们并没有像推荐的那样全部链接在一起，因为有两个初始化器调用指定初始化器的超类。这样做可以吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-14T05:26:27.033

为什么不这样做呢：

```
- (id)initWithFullScreen:(BOOL)useFullScreen
{
  self = [super initWithNibName:nil bundle:nil];
  if(self) {
    _fullScreen = useFullScreen;
  }
  return self;
}

- (id)init
{
  return [self initWithFullScreen:NO];
}

- (id)initWithNibNameBlahBlahBlah...
{
  return [self init];
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-14T05:43:41.183

好的，可以。

指定的初始化器不是 Objective-C 语言的一部分，它只是一个约定。通常，如果您通过一个 init 方法路由所有内容，则不必担心在您可能想要提供的所有其他便利 init 方法中重复代码。

它还让您知道当您想要创建子类时应该在超类上调用哪个 init 方法。（实际上，您的第三个 init 方法`initWithNibName...`违反了此规则。您没有调用超类的指定初始化程序，而是调用`init`.）

在您的情况下，使用方法签名声明一个初始化程序并将`initWithFullScreen:(BOOL)fullScreen`其指定为指定的初始化程序可能是要走的路。并且在其中你确保你调用了超类的指定初始化器，你就是。

`initWithFullScreen`然后，您可以创建便利初始化程序：`initWithoutFullScreen`如果您愿意；他们都只会调用您指定的初始化程序。例如：

```
- (id)initWithoutFullScreen
{
    return [self initWithFullScreen:NO];
} 
```

所以，打破惯例是可以的。你可能有你的理由。但是，如果您坚持下去，通常更容易使您的代码井井有条。

### 修正案

额外的功劳，考虑 NSCoding 协议，它要求类有一个`initWithCoder:`方法。有人可能会说它违反了规则，因为采用 NSCoding 并且其超类也采用 NSCoding 的类必须准备有两条初始化路径：`initWithCoder:`调用的方法`[super initWithCoder:coder]`和常规指定的初始化程序。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-14T05:35:11.050

将它们视为`methods`而不是`initializers`。所以是的，你可以拥有尽可能多`methods`的。
也尝试使用`nibNameOrNil`and `nibBundleOrNil`in `initWithFullScreen`，`init`除非你真的不需要它们。
同样为简单起见，您可以使用这样的方法

```
- (id) initWithNibName:(NSString *)nibNameOrNil bundle:(NSBundle *)nibBundleOrNil fullScreen:(BOOL)useFullScreen
{
    if (self = [super initWithNibName:nibNameOrNil bundle:nibBundleOrNil])
      {
         _fullScreen = useFullScreen;
      }
    return self;
} 
```

# ruby - 提高 OOP 技能？哪个Smalltalk？

> ID：10577826
> 
> 赞同：2
> 
> 时间：2012-05-14T05:17:37.753
> 
> 标签：ruby, oop, smalltalk

我将开始学习`Smalltalk`以提高我的面向对象技能。哪种 Smalltalk 实现最适合我的目的。如果可能的话，我在哪里可以找到学习推荐实施的材料。

PS 1：不，请不要建议跳过学习 Smalltalk 并转而使用 C# 或 Java 的想法。

PS 2：如果您认为还有其他更好的方法可以提高我的 OOP 技能。这些是什么？

我是 Macintosh 上的 Ruby 开发人员。

谢谢

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-05-14T07:42:46.670

I'd go with [Pharo](http://www.pharo-project.org/home), a very nice free Smalltalk implementation. If you are not so much into graphical Smalltalk environments, I've also had good experiences with [GNU Smalltalk](http://smalltalk.gnu.org/).

As for learning materials, there's also good free ones:

*   [Computer Programming using GNU Smalltalk](http://www.canol.info/books/computer_programming_using_gnu_smalltalk/) (very basic Smalltalk intro)
*   [Pharo by example](http://pharobyexample.org/)
*   [Dynamic Web Development with Seaside](http://book.seaside.st/book) (framework specific)

A lot of the old Smalltalk books are also freely available by now, see:

[http://stephane.ducasse.free.fr/FreeBooks.html](http://stephane.ducasse.free.fr/FreeBooks.html)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-05-14T14:32:09.577

关于 Smalltalk 的有趣和强大的东西不是在位，而是在想法中（我花了几年时间才意识到这一点）。

如果没有这种认识，可能会发生的事情是，您会将思维方式从您的第一种编程语言移植到 Smalltalk 语法（15 年后我仍然因 C 语言受损），错过了真正的果汁（尽管工具、闭包、直播系统等肯定会带来生产力）。

最能帮助我重新排列我的神经元以了解 Smalltalk 的重要性是：

*   [计算机革命尚未发生](https://www.youtube.com/watch?v=oKg1hTOQXoY)
*   [http://www.c2.com/cgi/wiki?AlanKayOnMessaging](http://www.c2.com/cgi/wiki?AlanKayOnMessaging)
*   [Smalltalk 的早期历史](http://samizdat.cc/shelf/documents/2004/08.02-historyOfSmalltalk/historyOfSmalltalk.pdf)

话虽如此，我对 Pharo 的学习、研究和生产开发非常满意。我认为它非常适合学习，因为丑陋的代码正在迅速消失，取而代之的是干净、深思熟虑、有趣的替换代码。查看 FileSystem（包含在 1.4 中）以获取令人惊叹的文件库。我经常发现自己在我的 Ruby 应用程序中重新实现了它的一部分。

无论您选择哪个 Smalltalk，都*必须*查看[http://www.world.st/](http://www.world.st/)。它是所有 Smalltalk 变体的每本书、视频、论坛的交换所

# android - 另一个包中的共享首选项

> ID：10577832
> 
> 赞同：0
> 
> 时间：2012-05-14T05:19:26.503
> 
> 标签：android

我是android开发的新手。有没有办法从另一个包扩展类？我正在尝试从另一个包中获取共享首选项，尽管我能够访问同一包中的类之间的共享首选项。但是，在不同的包中，我不知道应该如何执行 editer.commit() 或编辑另一个包中的共享首选项。请帮忙。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-14T05:33:06.753

```
我举了两个使用共享偏好的活动之间共享数据的例子。
使用此代码，您可以了解共享偏好是如何工作的。
您还可以在同一应用程序的不同包中的两个活动之间共享数据。
```

```
PracSharePrefActivity 类
```

```
package com.sharedpref;

import android.app.Activity;
import android.content.Intent;
import android.content.SharedPreferences;
import android.os.Bundle;
import android.preference.PreferenceManager;
import android.util.Log;
import android.view.View;
import android.view.View.OnClickListener;
import android.widget.Button;

public class PracSharePrefActivity extends Activity {

    private SharedPreferences settings;
    private String name,subject;
    private Button btnSave;
    /** Called when the activity is first created. */
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);

        settings = PreferenceManager.getDefaultSharedPreferences(this);

        name = settings.getString("Name","");
        subject = settings.getString("Subject", "");

        Log.e("Name0==",name);
        Log.e("Subject0==",subject);

        String yourName="Deval";
        String yourSubject="Android";

        SharedPreferences.Editor editor = settings.edit();

        editor.putString("Name",yourName);
        editor.putString("Subject", yourSubject);

        editor.commit();

        Log.e("Name 1==",settings.getString("Name", ""));
        Log.e("Subject 1==",settings.getString("Subject", ""));       

        btnSave=(Button)findViewById(R.id.btnsave);
        btnSave.setOnClickListener(new OnClickListener() {

            @Override
            public void onClick(View v) {
                Intent i=new Intent(PracSharePrefActivity.this,GetSharedPref.class);
                startActivity(i);
            }
        });

    }

} 
```

```
“GetSharedPref”类
```

```
package com.sharedpref;

import android.app.Activity;
import android.content.SharedPreferences;
import android.os.Bundle;
import android.preference.PreferenceManager;
import android.util.Log;

public class GetSharedPref extends Activity {
    private SharedPreferences preferences;
    private String name,subject;
     @Override
        public void onCreate(Bundle savedInstanceState) {
            super.onCreate(savedInstanceState);
            setContentView(R.layout.pref);          

            preferences = PreferenceManager.getDefaultSharedPreferences(this);
            name = preferences.getString("Name", "");
            subject=preferences.getString("Subject", "");

            Log.e("Name:  ",preferences.getString("Name", ""));
            Log.e("Subject:  ",preferences.getString("Subject",""));

            preferences = PreferenceManager.getDefaultSharedPreferences(this);    
     }
} 
```

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2012-05-14T05:32:05.257

试试这个代码

将字符串放入 sharedpreference

```
 SharedPreferences USERNAME_and_PASSWORD;
            SharedPreferences.Editor editor;

USERNAME_and_PASSWORD = getSharedPreferences(Shared_preference_key,
                MODE_PRIVATE);
        editor = USERNAME_and_PASSWORD.edit();
                editor.putString(user_name_key, userName);
                editor.commit(); 
```

从共享首选项中获取字符串

```
 SharedPreferences USERNAME_and_PASSWORD;
 USERNAME_and_PASSWORD = getSharedPreferences(Shared_preference_key,
                    MODE_PRIVATE);
     USERNAME_and_PASSWORD = getSharedPreferences(Shared_preference_key,
                        MODE_PRIVATE);
    String Return_Password = USERNAME_and_PASSWORD.getString(pass_word_key,
                    "Guest"); 
```

# java - Eclipse galileo 项目验证错误导致退出工作区？

> ID：10577834
> 
> 赞同：0
> 
> 时间：2012-05-14T05:19:45.287
> 
> 标签：java, eclipse, setup-project, galileo

我开发了动态网络项目。我多次执行该应用程序。但是目前，当我尝试清理项目（项目->清理->我的项目）时，它显示出一些内部问题。项目验证失败。
这是因为当 spring bean 实例化时发生内存不足。错误消息是
堆栈跟踪是

java.lang.OutOfMemoryError：在 org.eclipse.wst.xml.core.internal.parser.XMLSourceParser 的 org.eclipse.wst.xml.core.internal.parser.XMLStructuredRegionFactory.createRegion(XMLStructuredRegionFactory.java:31) 处的 Java 堆空间.createStructuredDocumentRegion(XMLSourceParser.java:110) at org.eclipse.wst.xml.core.internal.parser.XMLSourceParser.parseNodes(XMLSourceParser.java:358) at org.eclipse.wst.xml.core.internal.parser.XMLSourceParser .getDocumentRegions(XMLSourceParser.java:164) 在 org.eclipse.wst.sse.core.internal.text.StructuredDocumentReParser._core_reparse_text(StructuredDocumentReParser.java:309) 在 org.eclipse.wst.sse.core.internal.text.StructuredDocumentReParser .core_reparse(StructuredDocumentReParser.java:708) 在 org.eclipse.wst.sse.core.internal.text.StructuredDocumentReParser.reparse(StructuredDocumentReParser.java:1352) 在 org.eclipse.wst.sse.core.internal.text.StructuredDocumentReParser.reparse(StructuredDocumentReParser.java:1284) at org.eclipse.wst.sse.core.internal.text.BasicStructuredDocument.updateModel(BasicStructuredDocument.java:2705) at org. eclipse.wst.sse.core.internal.text.BasicStructuredDocument.internalReplaceText(BasicStructuredDocument.java:1919) at org.eclipse.wst.sse.core.internal.text.BasicStructuredDocument.replaceText(BasicStructuredDocument.java:2415) at org. eclipse.wst.sse.core.internal.text.BasicStructuredDocument.set(BasicStructuredDocument.java:2927) 在 org.eclipse.core.internal.filebuffers.ResourceTextFileBuffer.setDocumentContent(ResourceTextFileBuffer.java:579) 在 org.eclipse.core。 internal.filebuffers.ResourceTextFileBuffer.initializeFileBufferContent(ResourceTextFileBuffer.java:290) 在 org.eclipse.core.internal.filebuffers。ResourceFileBuffer.create(ResourceFileBuffer.java:245) 在 org.eclipse.core.internal.filebuffers.TextFileBufferManager.connect(TextFileBufferManager.java:113) 在 org.eclipse.wst.sse.core.internal.FileBufferModelManager.getModel(FileBufferModelManager. java:656) at org.eclipse.wst.sse.core.internal.model.ModelManagerImpl._doCommonGetModel(ModelManagerImpl.java:569) at org.eclipse.wst.sse.core.internal.model.ModelManagerImpl._commonGetModel(ModelManagerImpl. java:536）在 org.eclipse.wst.sse.core.internal.model.ModelManagerImpl._commonGetModel(ModelManagerImpl.java:509) 在 org.eclipse.wst.sse.core.internal.model.ModelManagerImpl.getModelForRead(ModelManagerImpl. java:1438) 在 org.eclipse.wst.validation.internal.ValManager $2 的 org.eclipse.wst.sse.core.internal.validate.ValidatorGroupListener.validationStarting(ValidatorGroupListener.java:72)。run(ValManager.java:847) at org.eclipse.core.runtime.SafeRunner.run(SafeRunner.java:42) at org.eclipse.wst.validation.internal.ValManager.notifyGroupListenersStarting(ValManager.java:845) at org .eclipse.wst.validation.internal.ValManager.accept(ValManager.java:800) 在 org.eclipse.wst.validation.internal.ValManager.validate(ValManager.java:667) 在 org.eclipse.wst.validation.internal .ValBuilderJob$Visitor.visit(ValBuilderJob.java:298) at org.eclipse.core.internal.resources.Resource$2.visit(Resource.java:108) at org.eclipse.core.internal.resources.Resource$1.visitElement (Resource.java:60) 在 org.eclipse.core.internal.watson.ElementTreeIterator.doIteration(ElementTreeIterator.java:82) 在 org.eclipse.core.internal.watson.ElementTreeIterator.doIteration(ElementTreeIterator.java:86)42) 在 org.eclipse.wst.validation.internal.ValManager.accept(ValManager.java:800) 在 org.eclipse.wst 的 org.eclipse.wst.validation.internal.ValManager.notifyGroupListenersStarting(ValManager.java:845) .validation.internal.ValManager.validate(ValManager.java:667) 在 org.eclipse.wst.validation.internal.ValBuilderJob$Visitor.visit(ValBuilderJob.java:298) 在 org.eclipse.core.internal.resources.Resource $2.visit(Resource.java:108) at org.eclipse.core.internal.resources.Resource$1.visitElement(Resource.java:60) at org.eclipse.core.internal.watson.ElementTreeIterator.doIteration(ElementTreeIterator.java :82) 在 org.eclipse.core.internal.watson.ElementTreeIterator.doIteration(ElementTreeIterator.java:86)42) 在 org.eclipse.wst.validation.internal.ValManager.accept(ValManager.java:800) 在 org.eclipse.wst 的 org.eclipse.wst.validation.internal.ValManager.notifyGroupListenersStarting(ValManager.java:845) .validation.internal.ValManager.validate(ValManager.java:667) 在 org.eclipse.wst.validation.internal.ValBuilderJob$Visitor.visit(ValBuilderJob.java:298) 在 org.eclipse.core.internal.resources.Resource $2.visit(Resource.java:108) at org.eclipse.core.internal.resources.Resource$1.visitElement(Resource.java:60) at org.eclipse.core.internal.watson.ElementTreeIterator.doIteration(ElementTreeIterator.java :82) 在 org.eclipse.core.internal.watson.ElementTreeIterator.doIteration(ElementTreeIterator.java:86)在 org.eclipse.wst.validation.internal.ValBuilderJob$Visitor.visit(ValBuilderJob.java: 298）在 org.eclipse.core.internal.resources.Resource$2.visit(Resource.java:108) 在 org.eclipse.core.internal.resources.Resource$1.visitElement(Resource.java:60) 在 org.eclipse .core.internal.watson.ElementTreeIterator.doIteration(ElementTreeIterator.java:82) 在 org.eclipse.core.internal.watson.ElementTreeIterator.doIteration(ElementTreeIterator.java:86)在 org.eclipse.wst.validation.internal.ValBuilderJob$Visitor.visit(ValBuilderJob.java: 298）在 org.eclipse.core.internal.resources.Resource$2.visit(Resource.java:108) 在 org.eclipse.core.internal.resources.Resource$1.visitElement(Resource.java:60) 在 org.eclipse .core.internal.watson.ElementTreeIterator.doIteration(ElementTreeIterator.java:82) 在 org.eclipse.core.internal.watson.ElementTreeIterator.doIteration(ElementTreeIterator.java:86)Resource$1.visitElement(Resource.java:60) at org.eclipse.core.internal.watson.ElementTreeIterator.doIteration(ElementTreeIterator.java:82) at org.eclipse.core.internal.watson.ElementTreeIterator.doIteration(ElementTreeIterator.java :86)Resource$1.visitElement(Resource.java:60) at org.eclipse.core.internal.watson.ElementTreeIterator.doIteration(ElementTreeIterator.java:82) at org.eclipse.core.internal.watson.ElementTreeIterator.doIteration(ElementTreeIterator.java :86)

Java 堆空间。提前致谢。
拉克斯曼杂烩

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-14T05:51:24.127

您必须增加 Eclipse 的内存设置。有两种方法。

1)在调用eclipse时添加额外的JVM参数 2)编辑eclipse.ini。在这种方法中不需要传递参数

打开可以在 eclipse 安装目录中找到的 eclipse.ini。将 -xmx 修改为更高的值。

例如

```
-startup
plugins/org.eclipse.equinox.launcher_1.0.100.v20080501.jar
--launcher.library
plugins/org.eclipse.equinox.launcher.gtk.linux.x86_64_1.0.100.v20080428-1330
-showsplash
org.eclipse.platform
-vm
/usr/lib/jvm/java-1.5.0-sun/jre/bin/java
-vmargs
-Xms512m
-Xmx1024m
-XX:+UseParallelGC
-XX:PermSize=256M
-XX:MaxPermSize=512M 
```

# jquery - 如何在 jQuery Mobile 中的一个圆角框中设计分组输入文本字段

> ID：10577839
> 
> 赞同：1
> 
> 时间：2012-05-14T05:20:20.937
> 
> 标签：jquery, css, jquery-mobile

谁能告诉我如何将多个文本输入字段放在一个分组的圆角框中？

还带有文本占位符。

请看附图

![输入圆角框](../Images/cc7c6ccfb39a08cae1bc10c9d61b6668.png)

我正在尝试下面的代码：

```
<div data-role="content" data-inset="true" data-theme="b">
    <div data-role="fieldcontain">
    <form id="frmLogin" action="#" method="POST" data-transition="slide">
      <fieldset data-role="controlgroup" class="ui-corner-all ui-controlgroup ui-controlgroup-vertical">

        <div class="ui-field-contain">
          <label id="txtLoginName" for="loginName"></label>
          <input type="text" name="loginName" id="loginName" value=""  class="required"/>
        </div>
        <div class="ui-field-contain">
          <label id="txtLoginPassword" for="loginPassword"></label>
          <input type="password" name="password" id="loginPassword" value="" class="required"/>
        </div>

        <div class="ui-grid-a">
          <div class="ui-block-a">
            &nbsp;
          </div>
          <div class="ui-block-b">
            <a id="btnLoginSubmit" href="#" data-role="button" data-transition="slide" data-inline="true"></a>
          </div>
        </div>

      </fieldset>
    </form>
    </div>
  </div> 
```

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-14T05:44:29.617

我没有你的 CSS 可以使用。所以，这里有一个简单的替代方案。

CSS：

```
div {
    border: 2px #ddd solid;
    border-radius: 20px;
    width: 300px;
    padding: 20px;
}
div input {
    border: none;
    width: 260px;
    padding: 20px;
}
div input:not(:last-child) {
    border-bottom: 1px #ddd solid;
} 
```

HTML：

```
<div>
    <input type="text"  value="email"/>
    <input type="password" value="password" />
</div> 
```

### [演示](http://jsfiddle.net/SLaYG/)

# trigger.io - 如何查看当前 Trigger.io Forge 平台的版本？

> ID：10577847
> 
> 赞同：2
> 
> 时间：2012-05-14T05:22:07.127
> 
> 标签：trigger.io, forge

我想锁定我构建应用程序的 Forge 平台版本。`platform_version`我相信我可以通过更新config.json 文件中的值来做到这一点。

但是如何从命令行中找出当前的平台版本呢？我想使用命令行，因为网站（http://docs.trigger.io/en/v1.3/release-notes.html）由于快速发布而没有完全更新。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-14T12:46:16.313

是的 - 有两种选择：

*   查看[https://trigger.io/forge/platform_version/](https://trigger.io/forge/platform_version/)以查看可用的主要/次要版本
*   查看`.template/platform_version.txt`您的应用程序目录，其中包含用于创建特定构建的次要版本

请参阅[http://docs.trigger.io/en/v1.3/release-notes.html#v1-3-12](http://docs.trigger.io/en/v1.3/release-notes.html#v1-3-12)

# android - 在android中显示来自其他类的图像

> ID：10577848
> 
> 赞同：0
> 
> 时间：2012-05-14T05:22:18.197
> 
> 标签：android, image

我通过调用其他类在活动中显示图像，但它没有显示它向我显示错误的图像。我的代码如下

```
public class VideosActivity extends Activity {
    //DrawView draw;
    float a=0;
    float b=0;
    ImageView image;
    MotionEvent event;
    Button  back ;
    Button next;
    TextView t;
    String info = "";
    int count =0;
    FirstImage  i= new FirstImage (this);
TableLayout tl;
TableRow ru,rm,rl,rlm;

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
         setContentView(R.layout.videos_layout);
         i=(FirstImage)findViewById(R.id.first);
         //back = (Button) findViewById(R.id.button1);
        // next = (Button) findViewById(R.id.button2);
        //
     // addListenerOnButton();

}

    private void addListenerOnButton() {
        // TODO Auto-generated method stub

        if (count == 0)
            back.setEnabled(false);

        next.setOnClickListener( new OnClickListener() {

            public void onClick(View arg0) {
                if(count==0){
                image.setImageResource(R.drawable.hand);
                back.setEnabled(true);
                count++;

                addListenerOnButton();

                }
                else if (count==1){
                    image.setImageResource(R.drawable.tissue);
                    count++;

                    addListenerOnButton();

                }

                else if (count==2){
                    image.setImageResource(R.drawable.cellconstfinal1);
                    count++;

                    addListenerOnButton();

                }
                else if (count==3){
                    //nucleus
                    image.setImageResource(R.drawable.cellconstfinal1);
                    count++;

                    addListenerOnButton();

                }
                else if (count==4){
                    //nchromosome
                    image.setImageResource(R.drawable.hand);
                    count++;

                    addListenerOnButton();

                }
                else
                {   //double helix
                    count++;
                    image.setImageResource(R.drawable.handash1);
                    next.setEnabled(false);

                    addListenerOnButton();

                }

            }
        });

        back.setOnClickListener(new OnClickListener() {

            public void onClick(View arg0) {
                if(count==1){
                    image.setImageResource(R.drawable.human);
                    back.setEnabled(false);
                    count--;

                    addListenerOnButton();

                    }
                    else if (count==2){
                        image.setImageResource(R.drawable.hand);
                        count--;

                        addListenerOnButton();

                    }

                    else if (count==3){
                        image.setImageResource(R.drawable.tissue);
                        count--;

                        addListenerOnButton();

                    }
                    else if (count==4){
                        image.setImageResource(R.drawable.cellconstfinal1);
                        count--;

                        addListenerOnButton();

                    }
                    else if (count==5){
                        //nucleus
                        image.setImageResource(R.drawable.tissue);
                        count--;

                        addListenerOnButton();

                    }
                    else {
                        //chromosome
                        //count==6
                        image.setImageResource(R.drawable.cellconstfinal1);
                        count--;

                        addListenerOnButton();
                        next.setEnabled(true);

                    }
                }
            });
    } 
```

它向我显示以下错误。我不明白为什么它向我显示以下错误。

```
05-10 19:27:32.097: E/AndroidRuntime(638): FATAL EXCEPTION: main
05-10 19:27:32.097: E/AndroidRuntime(638): java.lang.RuntimeException: Unable to instantiate activity ComponentInfo{com.example.androidtablayout/com.example.androidtablayout.VideosActivity}: java.lang.NullPointerException
05-10 19:27:32.097: E/AndroidRuntime(638):  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2585)
05-10 19:27:32.097: E/AndroidRuntime(638):  at android.app.ActivityThread.startActivityNow(ActivityThread.java:2503)
05-10 19:27:32.097: E/AndroidRuntime(638):  at android.app.LocalActivityManager.moveToState(LocalActivityManager.java:127)
05-10 19:27:32.097: E/AndroidRuntime(638):  at android.app.LocalActivityManager.startActivity(LocalActivityManager.java:339)
05-10 19:27:32.097: E/AndroidRuntime(638):  at android.widget.TabHost$IntentContentStrategy.getContentView(TabHost.java:651)
05-10 19:27:32.097: E/AndroidRuntime(638):  at android.widget.TabHost.setCurrentTab(TabHost.java:323)
05-10 19:27:32.097: E/AndroidRuntime(638):  at android.widget.TabHost$2.onTabSelectionChanged(TabHost.java:129)
05-10 19:27:32.097: E/AndroidRuntime(638):  at android.widget.TabWidget$TabClickListener.onClick(TabWidget.java:453)
05-10 19:27:32.097: E/AndroidRuntime(638):  at android.view.View.performClick(View.java:2408)
05-10 19:27:32.097: E/AndroidRuntime(638):  at android.view.View$PerformClick.run(View.java:8816)
05-10 19:27:32.097: E/AndroidRuntime(638):  at android.os.Handler.handleCallback(Handler.java:587)
05-10 19:27:32.097: E/AndroidRuntime(638):  at android.os.Handler.dispatchMessage(Handler.java:92)
05-10 19:27:32.097: E/AndroidRuntime(638):  at android.os.Looper.loop(Looper.java:123)
05-10 19:27:32.097: E/AndroidRuntime(638):  at android.app.ActivityThread.main(ActivityThread.java:4627)
05-10 19:27:32.097: E/AndroidRuntime(638):  at java.lang.reflect.Method.invokeNative(Native Method)
05-10 19:27:32.097: E/AndroidRuntime(638):  at java.lang.reflect.Method.invoke(Method.java:521)
05-10 19:27:32.097: E/AndroidRuntime(638):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:868)
05-10 19:27:32.097: E/AndroidRuntime(638):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:626)
05-10 19:27:32.097: E/AndroidRuntime(638):  at dalvik.system.NativeStart.main(Native Method)
05-10 19:27:32.097: E/AndroidRuntime(638): Caused by: java.lang.NullPointerException
05-10 19:27:32.097: E/AndroidRuntime(638):  at android.content.ContextWrapper.getResources(ContextWrapper.java:80)
05-10 19:27:32.097: E/AndroidRuntime(638):  at android.view.View.<init>(View.java:1810)
05-10 19:27:32.097: E/AndroidRuntime(638):  at android.widget.ImageView.<init>(ImageView.java:103)
05-10 19:27:32.097: E/AndroidRuntime(638):  at com.example.androidtablayout.FirstImage.<init>(FirstImage.java:8)
05-10 19:27:32.097: E/AndroidRuntime(638):  at com.example.androidtablayout.VideosActivity.<init>(VideosActivity.java:27)
05-10 19:27:32.097: E/AndroidRuntime(638):  at java.lang.Class.newInstanceImpl(Native Method)
05-10 19:27:32.097: E/AndroidRuntime(638):  at java.lang.Class.newInstance(Class.java:1429)
05-10 19:27:32.097: E/AndroidRuntime(638):  at android.app.Instrumentation.newActivity(Instrumentation.java:1021)
05-10 19:27:32.097: E/AndroidRuntime(638):  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2577)
05-10 19:27:32.097: E/AndroidRuntime(638):  ... 18 more
05-10 19:27:41.897: I/Process(638): Sending signal. PID: 638 SIG: 9 
```

第一个图像 .jav 代码在这里............

```
public class FirstImage extends ImageView {
    public FirstImage(Context context) {
        super(context);
        // TODO Auto-generated constructor stub

    }

} 
```

视频布局是代码如下....

```
<?xml version="1.0" encoding="utf-8"?>

<ScrollView xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    >

  <!--  Screen Design for VIDEOS -->
<TableLayout 
    android:id="@+id/tablelayout"
    android:layout_width="fill_parent" 
    android:layout_height="fill_parent"
    android:stretchColumns="1">

     <TableRow
          android:id="@+id/tableRow1"
          android:layout_width="wrap_content"
          android:layout_height="wrap_content" >

          <TextView
               android:id="@+id/textView"
              android:layout_width="wrap_content"
              android:layout_height="wrap_content"
              android:padding="15dip"
              android:text="pic on click which will tell where is the dna located in human body or cell "
              android:textSize="18dip" />
      </TableRow>

      <TableRow
          android:id="@+id/tableRow2"
          android:layout_width="wrap_content"
          android:layout_height="wrap_content" >

          <FrameLayout 
        android:layout_width="wrap_content"
          android:layout_height="wrap_content">
        <com.example.AndroidTablayout.FirstImage
            android:id="@+id/first"
         android:layout_width="fill_parent"
         android:layout_height="fill_parent"
         android:src="@drawable/human"/>                                               
</FrameLayout>
      </TableRow>

      <TableRow
          android:id="@+id/tableRow3"
          android:layout_width="wrap_content"
          android:layout_height="wrap_content" >

          <LinearLayout
              android:id="@+id/linearLayout1"
              android:layout_width="wrap_content"
              android:layout_height="wrap_content" >

              <Button
                  android:id="@+id/button1"
                  android:layout_width="100dp"
                  android:layout_height="wrap_content"
                  android:text="Back" />

              <Button
                  android:id="@+id/button2"
                  android:layout_width="100dp"
                  android:layout_height="wrap_content"
                  android:text="Next" />

          </LinearLayout>

      </TableRow>
       <TableRow
          android:id="@+id/tableRow4"
          android:layout_width="wrap_content"
          android:layout_height="wrap_content" >
          <TextView
              android:id="@+id/textView1"
              android:layout_width="wrap_content"
              android:layout_height="wrap_content"
              android:padding="15dip"
              android:text="please don't mind  "
              android:textSize="18dip" />
          </TableRow>

  </TableLayout>
  </ScrollView> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-14T06:56:25.360

**编辑：** 检查这个答案：

[自定义图像视图android](https://stackoverflow.com/questions/3266143/custom-image-view-android)

也许您需要使用 AttributeSet 参数来实现构造函数。

# c# - Mono C# 编译器和 MS C# 编译器关于作用域的区别

> ID：10577859
> 
> 赞同：7
> 
> 时间：2012-05-14T05:24:45.917
> 
> 标签：c#, visual-studio-2010, compiler-construction, mono, compiler-errors

关于 C# 中实例方法/属性范围的差异，我在这里遇到了一个极端情况。这是代码：

```
public class Base
{
   public EventHandler Click {get;set;}
   public Base(EventHandler clickHandler)
   {
      this.Click = clickHandler;
   }
}

public class Derived: Base
{
   public Derived(): base((sender, e) => Execute())
   {
   }

   private void Execute()
   {
   }
} 
```

代码在 MonoDevelop 3.0 上编译得很好，但在 VS2010 中给出了一个错误：非静态字段、方法或属性“Base.Execute”需要对象引用基本上，归结为调用基类的派生类的构造函数的构造函数，MS的C#编译器不允许访问派生类的方法/属性等。怎么会呢？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-14T05:39:59.867

VS 编译器遵循规范。不确定在 Mono 实现中允许使用它的原因是什么。

[C# 规范](http://technet.microsoft.com/en-us/library/ms228593.aspx "获取 C# 规范的说明")，第 10.11.1 节构造函数初始化器：

> 实例构造函数初始化程序无法访问正在创建的实例。因此，在构造函数初始化程序的参数表达式中引用 this 是编译时错误，就像参数表达式通过简单名称引用任何实例成员一样，也是编译时错误。

# jquery - Backbone.js 视图无法更新

> ID：10577860
> 
> 赞同：0
> 
> 时间：2012-05-14T05:24:51.300
> 
> 标签：jquery, backbone.js, views, accordion, underscore.js

我正在为这里的一个问题提供示例代码，但我偶然发现了这个问题。我明确知道缺少一些简单的东西，但无法推理出什么。渲染一个简单的集合不会显示在 DOM 中，但会在控制台中进行调试。代码有点长（冗长），所以不想在这里复制。有一个jsfiddle请看

### 提琴手

[http://jsfiddle.net/zRSg3/2/](http://jsfiddle.net/zRSg3/2/)

视图如下所示：

```
/*Provides visual display of category*/
var categoryView = Backbone.View.extend({
    tagName: "div",
    template:_.template($("#categoryView").html()),
    className: "category-view",
    initialize: function() {
    },
    render: function() {
        $(this.el).empty().html(this.template(this.model.toJSON()));
        return this;
    }    
});

/*visual display of how categories looks*/
var categoriesView = Backbone.View.extend({
    el: "#accordian",
    render: function() {    
        this.collection.each(this.renderEach,this);
        return this;
    },
    renderEach: function(mod,index,arr) {
        $(this.el).empty().append(new categoryView({model:mod}).render().el);
    },
    events: {
        "load": "initAccordian"
    },
    initAccordian: function() {

    }
}); 
```

他们被渲染成这样：

```
var userCategoriesView = new categoriesView({collection:userCategories});
userCategoriesView.render();​ 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-14T06:10:08.020

您的第一个问题是您不能拼写“手风琴”（但我也不能因此不会感觉太糟糕）：

```
el: "#accordian", 
```

应该：

```
el: "#accordion", 
```

您的下一个问题是`renderEach`通过您的集合清除每一步的所有 HTML，这样您最终将只呈现最后一个元素：

```
renderEach: function(mod,index,arr) {
    $(this.el).empty().append(new categoryView({model:mod}).render().el);
}, 
```

挂断`empty()`电话：

```
renderEach: function(mod,index,arr) {
    $(this.el).append(new categoryView({model:mod}).render().el);
}, 
```

您将遇到的另一个问题是，`load`您甚至没有，`#accordion`所以：

```
events: {
    "load": "initAccordian"
}, 
```

不会做任何事情。你必须给`initAccordian`自己打电话（你可能也想修正拼写）；如果您需要等到浏览器在`initAccordion`调用之前再次获得控制权，那么您可以使用[`setTimeout`](https://developer.mozilla.org/en/DOM/window.setTimeout)时间为零的 a：

```
render: function() {
    var that = this;
    this.collection.each(this.renderEach,this);
    setTimeout(function() { that.initAccordion() }, 0);
    return this;
} 
```

如果您需要浏览器在完成工作之前将所有内容定位和调整大小，这种“零超时”技巧很有用。

此外，较新版本的 Backbone 在您的视图中提供了一个 jQuery 化版本的`this.el`in [`this.$el`](http://documentcloud.github.com/backbone/#View-%24el)，因此您不需要`$(this.el)`.

这是您的小提琴的清理版本：http: [//jsfiddle.net/ambiguous/EMMrD/](http://jsfiddle.net/ambiguous/EMMrD/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-14T06:10:29.343

您在 HTML 中为元素命名了 id ，但您将视图作为选择器`accordion`传递。[修复](http://jsfiddle.net/buckdoyle/zRSg3/4/)了那个微小的变化。`#accordian`

另外：我是否建议您将用于存储扩展 Backbone 类的变量大写？使用小写字母很容易将它们误认为是实例。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-14T05:31:07.320

您忘记了传递`el`给视图的构造函数。

只需将：更改`var userCategoriesView = new categoriesView({collection:userCategories});`为：

`var userCategoriesView = new categoriesView({collection:userCategories, el: $('#accordion')});`

# ruby-on-rails - 删除侧边栏 - 狂欢商务

> ID：10577861
> 
> 赞同：2
> 
> 时间：2012-05-14T05:25:11.300
> 
> 标签：ruby-on-rails, ruby-on-rails-3.1, spree

我正在尝试从我的 Spree 应用程序中删除侧边栏。

在我的`apps/override/remove_sidebar.rb`：

```
Deface::Override.new(
  :virtual_path =>"layouts/spree_application",
  :name => "remove_sidebar",
  :remove => "[data-hook='homepage_sidebar_navigation']") 
```

还有什么我想念的吗？服务器检测到覆盖，但没有任何反应。

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-15T20:22:34.790

修复了我自己的问题：

在`apps/override/remove_sidebar.rb`：

```
Deface::Override.new(
  :virtual_path =>"spree/layouts/spree_application",
  :name => "remove_sidebar",
  :remove => "aside#sidebar") 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-14T23:27:49.477

[data-hook='homepage_sidebar_navigation'] 没有出现在 layouts/spree_application

这出现在以下文件中，并且覆盖在那里正常工作： core/app/views/spree/home/index.html.erb core/app/views/spree/products/index.html.erb

# c# - Kinect 用户检测

> ID：10577862
> 
> 赞同：3
> 
> 时间：2012-05-14T05:25:18.070
> 
> 标签：c#, kinect

我正在开发一个应用程序当 kinect 传感器检测到一个人可以在其上工作的骨架时，如果其他人靠近现有用户，它会检测到第二个人。
我想限制用户 kinect 传感器首先检测到它，如果其他用户来，这不应该检测到另一个。
提前致谢

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-14T13:25:29.207

另请参阅 Jurgeon D 对[Kinect SDK player detection](https://stackoverflow.com/questions/10562554/kinect-sdk-player-detection/10562574#10562574)的回答，因为它处理骨架索引。@Fixus 也是正确的，因为您可以使用 ID。但是，如果您的意思是检测到超过 2 个人，则仅检测到一个，即不是编程，即在 Kinect 的硬件和@FelixK 中。是正确的。

### 骨骼指数

```
void nui_SkeletonFrameReady(object sender, SkeletonFrameReadyEventArgs e) 
{
    SkeletonFrame sf = e.SkeletonFrame;
    //check which skeletons in array are active and
    // use that array indexes for player index
    SkeletonData player1 = sf.Skeletons[playerIndex1];
    SkeletonData player2 = sf.Skeletons[playerIndex2];
} 
```

### 骨架 ID

```
void nui_SkeletonFrameReady(object sender, SkeletonFrameReadyEventArgs e)
{
    SkeletonFrame sf = e.SkeletonFrame;

    if (sf.TrackingState == SkeletalTrackingState.Tracked)
     {
          int ID1 = sf.TrackingID;
     } 
```

### 也是检测人类的代码

```
 DepthImageFrame depthFrame;
 short[] rawDepthData = new short[depthFrame.PixelDataLength];
 depthFrame.CopyPixelDataTo(rawDepthData); 
 Byte[] pixels = new byte[depthFrame.Height * depthFrame.Width * 4];     
 int player = rawDepthData[depthIndex] & DepthImageFrame.PlayerIndexBitmask;

 if (player > 0)
 {
     //do something
 } 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-05-14T05:33:48.443

Kinect 将检测新用户，因为这是他的工作 :) 但请记住，每个用户都有自己的 ID，因此您始终知道第一个用户是第一个用户，第二个是第二个用户。这样你就可以只在你想使用的用户的骨架上工作

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-05-14T05:31:04.857

如果我正确理解您的问题，这是不可能的，您不能修改 Kinects 行为以及它如何检测用户（如果框架中没有任何内容；我认为没有什么）。

你必须在你的代码中解决这个问题。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-04T14:00:16.260

在其中一个 kinect 快速入门教程中，有一种仅检测一个用户的方法。我为自己的应用程序尝试了它并且它有效。

```
using (SkeletonFrame skeletonFrame = e.OpenSkeletonFrame())
{
    if (skeletonFrame == null)
                return;

    Skeleton[] skeletons= new Skeleton[skeletonFrame.SkeletonArrayLength];
    skeletonFrame.CopySkeletonDataTo(skeletons);

    if (skeletons.All(s => s.TrackingState == SkeletonTrackingState.NotTracked))
                return;

    Skeleton skeleton = (from s in skeletons
                                 where s.TrackingState == SkeletonTrackingState.Tracked
                                 select s).FirstOrDefault();
    if (skeleton == null) return;

    // TODO: Do something to the skeleton data...

} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2019-12-24T07:01:31.700

```
KinectManager kinectManager = KinectManager.Instance;
AvatarController avatarCtrl = avatar ? avatar.gameObject.GetComponent<AvatarController> () : null;

if (kinectManager != null && kinectManager.IsInitialized () && avatar != null && avatarCtrl && kinectManager.IsUserTracked (avatarCtrl.playerId)) {
        //User detected. You can do the remaining thing.
} 
```

# python - 如何使用 Products.csvreplicata 1.1.7 和 Products.PressRoom 在 Plone 4.1 中导出 PressContacts

> ID：10577866
> 
> 赞同：1
> 
> 时间：2012-05-14T05:26:08.833
> 
> 标签：python, plone

如何使用 Products.csvreplicata 1.1.7 和 Products.PressRoom 3.18 在 Plone 4.1 中将 PressContacts 导出到 csv？或者是否有任何其他产品可以将所有 PressRoom 联系人导入/导出到 csv 中。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-15T07:49:15.090

转到站点设置/CSV Replicata 工具，然后选择 PressRoom 内容作为可导出（然后选择要在导入/导出期间考虑的模式）。

# php - Div 将更改与在 id 之后放置类对齐

> ID：10577868
> 
> 赞同：3
> 
> 时间：2012-05-14T05:26:17.400
> 
> 标签：php, css

我真的面临一个奇怪的问题。这是以下代码和代码的示例图片

HTML

```
<div id="showCatagory_<?php echo $row['catagory_id']; ?>" class="left"  style="display:block">
<?php echo $value; ?>
</div> 
```

CSS

```
.left { float:left } 
```

当我使用它`<div id="showCatagory_<?php echo $row['catagory_id']; ?>" class="left" style="display:block">`时，我得到以下图片，这是错误的

![在此处输入图像描述](../Images/0e9b2dbe2982189c3fbe4698b69d555e.png)

如果我使用`<div class="left" id="showCatagory_<?php echo $row['catagory_id']; ?>" style="display:block">`，那么我得到正确的对齐，如下图所示

在这里，我将`class="left"`id 放在后面以使其正确。谁能告诉我为什么

![在此处输入图像描述](../Images/5869317f89bf1d7684b4b3ea5b0d0e67.png)

谁能告诉我为什么

```
<div class="left" id="showCatagory_<?php echo $row['catagory_id']; ?>" class="left"  style="display:block"> 
```

不同于

```
<div id="showCatagory_<?php echo $row['catagory_id']; ?>" class="left" style="display:block"> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-14T06:11:10.373

只要您的价值观得到净化；唯一会导致这种情况的是您的 PHP 在破坏标记标记的内联语句中抛出错误。

```
<tag foo="bar" bar="<?php echo foo(); ?>"></tag> 
```

在此示例中，如果`foo()`函数引发错误，而 PHP 插入了一个大错误报告，则 HTML 最终将如下所示：

```
<tag foo="bar" bar="Error Statement:
Error details...
  > Error echoes HTML markup characters.
Error trace information (line: 263)"></tag> 
```

错误中包含的任何标记字符都会破坏标记。因此，如果`foo="bar"`在 PHP 错误之后，它将不属于该标记，因为它已被错误中断。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-14T05:28:16.210

如果你仔细观察，问题中仍然有一堆错别字......但我明白你的意思......你在问为什么类属性的位置会影响结果。

几乎可以肯定那里有一个无关的引号或类似的东西正在破坏您的 html。包含什么`$row[category_id']`？万一里面有引号，你可以试试`str_replace('"', '', $row[category_id]);`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-31T12:53:39.163

我犯傻了。我使用了 float:left 但没有使用 clear。使用后，我得到了正确的显示。感谢大家

# iphone - iPhone：如何将数组索引处的字符合并到文本中：

> ID：10577869
> 
> 赞同：0
> 
> 时间：2012-05-14T05:26:21.660
> 
> 标签：iphone, objective-c, ios5

我有一个字符数组，例如

```
shuffleArray = [[NSMutableArray alloc] initWithObjects:@"H",@"E",@"L",@"L",@"O", nil]; 
```

我想生成这些字符的字符串，比如“HELLO”。

那么我该怎么做呢？

任何帮助都将是可观的。

提前谢谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-14T05:26:58.003

```
NSString *word = [shuffleArray componentsJoinedByString:@""]; 
```

应该这样做……</p>

# git - Accurev 是分布式版本控制系统吗？

> ID：10577875
> 
> 赞同：-1
> 
> 时间：2012-05-14T05:27:37.943
> 
> 标签：git, svn, version-control, accurev

1.  Accurev 是像 Git 这样的分布式版本控制系统还是像 SVN 这样的集中式版本控制系统？
2.  Accurev 与 Git 或 SVN 相比有什么优势吗？如果有，它们是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-14T05:33:25.570

根据其[维基百科页面](http://en.wikipedia.org/wiki/AccuRev_SCM)，AccuRev 是一个集中式版本控制系统（à la SVN）。

它很可能是一个专有软件（具有所有缺点，特别是供应商锁定），不像 GIT 和 SVN（它们都是免费软件），所以它可能没有被广泛使用。

我建议改用 GIT（但我以前从未听说过 AccuRev）。

# haskell - 具有编译器强制长度的 Haskell 多维数组

> ID：10577878
> 
> 赞同：3
> 
> 时间：2012-05-14T05:27:51.890
> 
> 标签：haskell, algebraic-data-types

我一直在尝试一些 Haskell，因为我对强类型很感兴趣，但我对解决这个问题的最佳方法感到困惑：

Data.Vector 中定义的 Vector 数据类型允许通过嵌套数组的方式进行多维数组。但是，这些是由列表构成的，并且不同长度的列表被认为是相同的数据类型（与不同长度的元组不同）。

我如何扩展这种以相同方式起作用的数据类型（或编写类似的数据类型），*除了*不同长度的向量被认为是不同的数据类型，因此任何尝试创建具有不同长度行的多维数组/矩阵（对于例如）会导致编译时错误？

元组似乎通过写出 63 个不同的定义（每个有效长度一个）来管理这一点，但如果可能的话，我希望能够处理任意长度的向量。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-14T07:48:34.833

这种类型取决于值的类型通常称为依赖类型编程，幸运的是，Wolfgang Jeltsch使用 GADT 和 TypeFamilies 在 Haskell 中写[了一篇关于依赖类型的博客文章。](http://jeltsch.wordpress.com/2012/04/30/dependently-typed-programming-and-theorem-proving-in-haskell/)

这篇博文的要点是，如果我们有两种表示自然数的类型：

```
data Zero
data Succ nat 
```

可以通过以下方式构建具有类型强制长度的列表：

```
data List el len where
   Empty :: List el Zero
   cons  :: el -> List el nat -> List el (Succ nat) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-14T05:57:22.463

我看到了两种方法：

1）“类型化”方式：使用依赖类型。在某种程度上，这在 Haskell 中是可能的，最近 GHC 扩展为[`DataKinds`](http://www.haskell.org/ghc/docs/7.4.1/html/users_guide/kind-polymorphism-and-promotion.html)*. 更好的是，使用具有*真正*高级类型系统的语言，例如 Agda。

2）另一种方式：编码你的向量，如

```
data Vec a = {values :: [a], len :: [Int]} 
```

然后，只导出

```
buildVec :: [a] -> Vec a
buildVec as = Vec as (length as) 
```

并检查使用相同长度向量的其他函数中的正确长度，例如确保矩阵函数或`Vec`加法中的相同长度向量。甚至更好：为矩阵提供另一个自定义构建器/ctor。

*我刚刚看到：您想要的正是`DataKinds`.

# javascript - 启动 node.js 服务器

> ID：10577879
> 
> 赞同：23
> 
> 时间：2012-05-14T05:28:07.367
> 
> 标签：javascript, node.js

我最近进入了节点并将其安装在我的本地主机上。我正在使用 WAMP。我在 Windows Vista 上。

Anwyay，我安装了它。我在我的 localhost 目录中创建了一个新文件，名为`server.js`

```
var http = require('http');

http.createServer(function (request, response) {
    response.writeHead(200, {
        'Content-Type': 'text/plain',
        'Access-Control-Allow-Origin' : '*'
    });
    response.end('Hello World\n');
}).listen(1337); 
```

然后我去节点并尝试打字`% node server.js`，我得到的只是一个省略号。是什么赋予了？

* * *

**更新：**我检查了我的 Systems 变量，发现我`PATH`将 node.js 列为`C:\Program Files (x86)\nodejs\`

![在此处输入图像描述](../Images/d2bdb110f96103d86254c145684f1562.png)

* * *

## 回答 #1

> 赞同：47
> 
> 时间：2012-05-14T05:35:11.343

运行`cmd`然后运行`node server.js`。在您的示例中，您正在尝试使用 REPL 来运行您的命令，但这是行不通的。省略号是 node.js 在关闭当前范围之前期望更多的标记（您可以在此处键入代码并动态运行它）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2021-08-31T13:52:14.270

您编写的 NodeJS 代码已更正，它应该可以工作，但正如@dwerner 所说，您必须`node server.js`在命令提示符中编写，而不是在 Node REPL 中编写。

但是今天大多数使用 NodeJS 的人都在使用开发环境 (IDE) 进行开发。通过使用 IDE，您可以获得运行代码的热键，以及许多可以帮助您进行日常开发的东西（例如语法高亮）

当今用于 NodeJS 开发的最受欢迎的 IDE 之一是 VSCode，您可以查看它。

# windows - 问题“R6016 - 线程数据空间不足”的可能根本原因是什么

> ID：10577880
> 
> 赞同：3
> 
> 时间：2012-05-14T05:28:14.713
> 
> 标签：windows, multithreading, visual-c++, windows-7, com

我想知道导致我创建的应用程序（COM .exe）出现问题“R6016 - 线程数据空间不足”的可能根本原因。

# wicket-1.5 - onSubmit 出错，反馈未呈现

> ID：10577883
> 
> 赞同：0
> 
> 时间：2012-05-14T05:28:25.107
> 
> 标签：wicket-1.5

我在按钮的 onSubmit 中有一些逻辑（在表单中），这可能会失败，所以我想使用`error(myMessage)`. 但它不起作用，而且看起来很正常：

[添加了反馈面板，但未显示所有消息](https://stackoverflow.com/questions/8027968/feedback-panel-added-but-does-not-show-all-messages)

是否有可能呈现在 onSubmit 中报告错误的反馈面板？

页面上没有使用 ajax。我正在使用检票口 1.5.6

编辑：

我的页面.java

```
public class MyPage extends WebPage {

    private static final Logger logger = Logger.getLogger(MyPage.class);
    private static final long serialVersionUID = -8874964120018036584L;

    public MyPage(PageParameters parameters) {
        super(parameters);
        logger.debug("Creating new login page");

        add(new MyLoginForm("loginForm"));
    }
} 
```

MyLoginForm.java

```
public class MyLoginForm extends StatelessForm<Void> {

    private static final Logger logger = Logger.getLogger(MyLoginForm.class);
    private static final long serialVersionUID = -8694389090804630170L;
    private MyUser user = new MyUser();

    public MyLoginForm(String id) {
        super(id);
        setOutputMarkupId(true);
        logger.debug("Creating new stateless login form");

        add(new RequiredTextField<String>("login", new PropertyModel<String>(user, "login")));
        add(new PasswordTextField("password", new PropertyModel<String>(user, "password")));
        add(new Button("submit"));
        add(new FeedbackPanel("feedback"));
    }

    @Override
    public void onSubmit() {
        info("test info");
    }
} 
```

我的页面.html

```
<body>
    <form wicket:id="loginForm">
        <fieldset>
            <legend><wicket:message key="form.login.legend"/></legend>
            <input type="text" wicket:id="login" />
            <input type="password" wicket:id="password" />
            <input type="submit" wicket:id="submit" />
            <span wicket:id="feedback"></span>
        </fieldset>
    </form>
</body> 
```

catalina.out

```
16 May 2012 15:24:20:860 WARN  [http-8080-2] [WebSession:135] Component-targetted feedback message was left unrendered. This could be because you are missing a FeedbackPanel on the page.  Message: [FeedbackMessage message = "test info", reporter = loginForm, level = INFO] 
```

当我尝试覆盖 Button 中的 onSubmit 方法而不是 MyLoginForm 中的方法时，也会发生同样的情况......

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-16T18:08:50.393

您需要将反馈面板添加到您的页面。反馈消息在组件层次结构中“冒泡”。最简单的方法是在您的页面上设置一个反馈面板。

但是，您也可以在报告错误的 FormComponent 附近显示错误。请参阅[此 pdf 以获得灵感](http://www.google.de/url?sa=t&rct=j&q=wicket%20shiny%20form&source=web&cd=3&ved=0CFoQFjAC&url=http://londonwicket.googlecode.com/files/LondonWicket-FormsWithFlair.pdf&ei=SuyzT5jhEoLGswbgy4nNDA&usg=AFQjCNEn1aQYh7-GrVFHS8EMbCIobAF8Ew)或[可能的实现](http://code.google.com/p/elephas/source/browse/trunk/src/main/java/org/elephas/webapp/frontend/component/common/form/ShinyFormVisitor.java?spec=svn73&r=73)。

编辑：我只是使用 wicket 快速入门构建了一个非常简单的测试。如下更改了主页并且它有效（我看到了所有错误/信息消息）

html:

```
<form wicket:id="form">
            <div wicket:id="feedback"></div>
            <input wicket:id="submit" type="button" value="submit">

</form> 
```

爪哇：

```
Form<Void> form = new Form<Void>("form") {
        @Override
        protected void onSubmit() {
            super.onSubmit();
            error("test error from form");
            error("test info from form");
        }
    };
    add(form);
    form.add(new FeedbackPanel("feedback"));
    form.add(new SubmitLink("submit") {
        @Override
        public void onSubmit() {
            super.onSubmit();
            error("an error occurred in button submit");
            info("test info from the button");
        }
    }); 
```

编辑 2：事实证明，使用了 StatelessForm（我忽略了那个细节）。切换回（正常）表单，消息应正确显示。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-23T11:15:18.713

我检查了两次，Wicket 1.5.6 FeedbackPanel（以及我有问题的 SignInForm）的工作情况比 1.5.4 差我不知道，这种行为的背景是什么。

编辑： 1.5.5 版运行良好。

EDIT2：[https ://issues.apache.org/jira/browse/WICKET-4536](https://issues.apache.org/jira/browse/WICKET-4536)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-11-12T18:52:04.347

我为遇到此问题的其他人找到了另一种方法..

我有一个继承自的基类，然后我将反馈消息作为基类的一部分打印出来。我也遇到了这个问题，只是让我的基类中的一个方法返回了一个自身的实例（返回这个)，然后我只是通过这个方法访问 info 方法......所以，getMethod().info("some message").. 它对我有用。我的 feedbackPanel 也设置在基类中..

所以我想你可以做同样的事情.. 只需访问你想要标记反馈消息的页面实例。

# c# - 运行Windows应用程序时及时调试器错误

> ID：10577886
> 
> 赞同：0
> 
> 时间：2012-05-14T05:28:42.310
> 
> 标签：c#

我在没有 Visual Studio 2010 的情况下从 Windows 运行应用程序。我只运行 app.exe 文件，但出现此错误。

![在此处输入图像描述](../Images/7ca268cd231b526cd8ad584e465085aa.png)

我怎样才能禁用它并得到真正的错误？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-14T05:44:00.227

按照消息告诉您的操作 - 在 Visual Studio 中启用即时调试，然后您将能够看到实际问题。

# objective-c - 这个对象会发生什么

> ID：10577888
> 
> 赞同：0
> 
> 时间：2012-05-14T05:29:03.507
> 
> 标签：objective-c, ios, object

我在 secondObject 的帮助下创建了一个 firstObject。现在我释放了第二个对象，第一个对象会发生什么。这是我的代码。

```
SecondObject *secondObject = [[SecondObject alloc]init];
FirstObject *firstObject = [[FirstObject alloc]initWithSecondObject:secondObject];
[secondObject doSomethings];
[firstObject doSomeThings];
[secondObject release]; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-14T05:31:12.427

除非`secondObject`有`firstObject`它释放的引用，否则不会发生任何事情`firstObject`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-14T05:34:32.123

如果`firstObject`需要保留对`secondObject`超出其`initWithSecondObject:`方法的引用，则应保留`secondObject`. `secondObject`即使您在上面的代码中释放它，这也将防止被释放。当你释放一个对象时，你是在说：“我用完了这个。” 但是只有在当前没有其他对象使用它时才会释放该对象（由保留计数确定，而不是您应该查看它）。

# java - 将数据从 Action Class 传输到 Jsp

> ID：10577895
> 
> 赞同：0
> 
> 时间：2012-05-14T05:30:18.520
> 
> 标签：java, struts

我是 Java 新手，正在研究 Struts，我想将数据从我的操作类发送到 jsp。

我正在从数据库中检索员工详细信息，并希望将它们显示在 jsp 的网格视图中，以便您帮我解决。由于将返回多条记录，如何将每条记录分配给表格行

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-14T05:51:01.280

如果您使用的是 Struts 1 并且您在请求中保存您的列表，那么代码可能如下所示：

动作类执行方法

```
List<String> names= new ArrayList<String>(); 
names.add("A");
names.add("B");
request.setAttribute("names", names); 
```

在 JSP 中

```
<logic:iterate name="names" id="namesId">

    <span>
        Names <bean:write name="namesId"/>
    </span>

</logic:iterate> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-14T05:46:15.317

实际上，您需要将您的员工记录放在类似数据结构的列表中，而不是在 jsp 页面上，您可以在`logic:iterate`标签的帮助下对其进行迭代。请参阅有关如何使用此标签的文档。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2018-06-25T07:06:55.397

如果您更喜欢 Struts2...

创建一个具有以下内容的 Action 类：

```
public class Actionmain{
ActionForm aform=new ActionForm(); // which generate the setters 
```

和吸气剂：

```
public String getProdCode(ActionForm aform){
    if (reqLogPCForm ==null){
        return "Error";
    }else if{
        ActionVO AVO=null;
        try{
            VO = execute(hmInput);
        }
    } 
```

# java - 使用参数从 URL 解析 InputStream

> ID：10577905
> 
> 赞同：1
> 
> 时间：2012-05-14T05:31:32.063
> 
> 标签：java, android, parsing, inputstream, jdom

我正在尝试解析下一个网址： http://kavim-t.co.il/include/getXMLStations.asp?parent= [55_%20_2](http://kavim-t.co.il/include/getXMLStations.asp?parent=55_%20_2)

代码：

```
//using jdom SAX parser
SAXBuilder builder = new SAXBuilder();
URL url = new URL("http://kavim-t.co.il/include/getXMLStations.asp?parent=55_%20_2");
InputStream in = getInputStrem(url);
Document document = builder.build(in); ... 
```

获取输入流（）：

```
public static InputStream getInputStrem(URL url) {
    InputStream in = null;
    try {
        HttpURLConnection con = (HttpURLConnection) url.openConnection();
        con.setRequestMethod("GET");
        con.connect();
        in = con.getInputStream();

    } catch (IOException e) {
        e.printStackTrace();
    }
    return in;
} 
```

异常“第 3 行错误：第 3 行第 29 列：格式不正确（无效令牌）”

尝试运行下一行时得到：

```
Document document = builder.build(in) 
```

我认为问题出在 getInputStream() 函数中，

因为如果我将 Url 替换为更简单的（没有参数和经典结构），它工作正常。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-14T09:42:32.297

这可能是一个字符编码问题。您得到的错误可能是因为 InputStream 被解释为与实际数据不同的字符集。

URL 有一个输入流，但也有一个字符集。当您将流提供给 JDOM 时，您将忽略该字符集。

您应该尝试的第一件事是删除所有 getInputStream 代码。JDOM 有一个直接的 SAXBuilder.build(URL) 方法，该方法将同时考虑流和字符集......

你的整个代码可以这样简化。事实上，如果你给 JDOM 一个字符串参数，它会将它解释为一个 URL (SystemID)，所以你的代码可以很简单：

```
SAXBuilder builder = new SAXBuilder();
Document document = builder.build("http://kavim-t.co.il/include/getXMLStations.asp?parent=55_%20_2"); 
```

编辑： - -

好吧，我在我的环境中运行了“我的”版本的代码，并且（使用 Xerces 作为解析器）我得到了关于这个问题的更多细节......：

```
Caused by: org.apache.xerces.impl.io.MalformedByteSequenceException: Invalid byte 2 of 3-byte UTF-8 sequence.
    at org.apache.xerces.impl.io.UTF8Reader.invalidByte(Unknown Source)
    at org.apache.xerces.impl.io.UTF8Reader.read(Unknown Source)
    at org.apache.xerces.impl.XMLEntityScanner.load(Unknown Source)
    at org.apache.xerces.impl.XMLEntityScanner.scanContent(Unknown Source)
    at org.apache.xerces.impl.XMLDocumentFragmentScannerImpl.scanContent(Unknown Source)
    ... 11 more 
```

因此，您的输入数据似乎未正确编码....

再次编辑：

这是输入文档上 xmllint 的输出。xmllint 是一个可用于大多数 Linux 发行版的 unix 程序。它提供了一种很好的“客观”方式来验证您的 XML。

```
david.xml:3: parser error : Input is not proper UTF-8, indicate encoding !
Bytes: 0xEE 0xF1 0xE5 0xF3
<option value="22958">22958: Ã®Ã±Ã¥Ã³ Ã¸Ã©Ã£Ã©Ã°Ã¢</option><option value="22920">22920: Ã£Ã©
                             ^ 
```

实际上，您有一个损坏的 XML 文档。如果您*坚持*，您可以向 JDOM 的 SAXBuilder 添加一个忽略错误的错误处理程序。请参阅此处的 JDOM 文档：http: [//www.jdom.org/docs/apidocs/org/jdom2/input/SAXBuilder.html#setErrorHandler%28org.xml.sax.ErrorHandler%29](http://www.jdom.org/docs/apidocs/org/jdom2/input/SAXBuilder.html#setErrorHandler%28org.xml.sax.ErrorHandler%29)在其中可以添加忽略的 ErrorHandler问题。（覆盖错误方法，并返回而不是抛出异常）.....然后不会报告问题，解析器将“继续”，但是您*将*在解析结果中丢失数据....

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-03T13:04:58.463

从文件中读取相同的问题，我解决了这个问题：

```
File file = new File("/somewhere/somefile.xml"); 
FileInputStream stream = new FileInputStream(file), "UTF-8");
Reader reader = new BufferedReader(new InputStreamReader(stream));

SAXBuilder builder = new SAXBuilder();           
Document doc = builder.build(reader); 
```

在您的情况下，您可能会从 URL 获取流，例如：

```
InputStream stream = new URL("http://www.somewhere.com/somefile.xml").openStream();
Reader reader = new BufferedReader(new InputStreamReader(stream));

SAXBuilder builder = new SAXBuilder();           
Document doc = builder.build(reader); 
```

作为最后一个资源（因为编码不能在 Url::openStream() 上强制执行），我将在本地保存数据，然后像我的第一个示例中那样使用文件流打开它。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-14T05:38:44.243

来自 HTTP 请求的 XML 响应文本格式不正确。尝试先验证它。因此，是个例外。

# jquery - 如何让我的“点击”功能在 iOS 上工作

> ID：10577906
> 
> 赞同：19
> 
> 时间：2012-05-14T05:31:33.513
> 
> 标签：jquery, ios

我有一组用作按钮的 Div。这些按钮有一个简单的 jquery click() 函数，适用于除 iOS 之外的所有浏览器。

例如：

```
<div class="button">click me</div> 
```

和

```
$('.button').click(function(){

   alert('hi');

}); 
```

我不确定为什么这在 iOS 上不起作用 - 显然 iOS 中没有“点击”。

不幸的是，我自己没有 iphone 设备来测试这个，但是我收到了很多来自我的客户的抱怨，他们想点击一些东西，但什么也没发生。

让它发挥作用的关键是什么？

* * *

## 回答 #1

> 赞同：37
> 
> 时间：2012-05-14T05:42:33.367

[单击](http://www.quirksmode.org/dom/events/click.html)“：表示当同一元素上发生 mousedown 和 mouseup 事件或通过键盘激活元素时。

来自[Jquery Bug，](http://bugs.jquery.com/ticket/5677)有解决方法，只需添加`"cursor: pointer"`到元素的 CSS，click 事件就会按预期工作。你甚至可以看到这个[Jquery 点击 Ios](http://blog.alanszlosek.com/post/4369588562/jquerys-live-click-handler-on-mobile-safari)寻求帮助

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2015-12-28T11:53:58.283

实际上，接受的答案对我不起作用。我尝试使用“cursor:pointer”、onclick=""，甚至将元素转换为锚标记。

我所做的就是绑定点击事件的 touchstart 事件。为了让它在所有平台上都能正常工作，我不得不像这样进行丑陋的 ua 欺骗：

```
var ua = navigator.userAgent,
event = (ua.match(/iPad/i) || ua.match(/iPhone/)) ? "touchstart" : "click";

jQuery("body").on(event, '.clickable_element', function(e) {
    // do something here
}); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2016-04-23T20:56:24.523

根据[Marek 的回答](https://stackoverflow.com/questions/10577906/how-to-make-my-click-function-work-with-ios/36816311#34493059)，这是我的看法（稍微整理了一下）：

```
var ua = navigator.userAgent, 
pickclick = (ua.match(/iPad/i) || ua.match(/iPhone/)) ? "touchstart" : "click";

$('.clickable_element').on(pickclick, function(e) {
     // do something here
}); 
```

在标准方面，该行业还有很多工作要做……</p>

**编辑：**

在安卓手机上没用。采取了更严格的方法：

```
if (document.documentElement.clientWidth > 1025) { pickclick = 'click' }
if (document.documentElement.clientWidth < 1025) { pickclick = 'touchstart' }

$('.clickable_element').on(pickclick, function(e) {
     // do something here
}); 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2017-02-01T16:28:33.333

同样基于[Marek 的回答](https://stackoverflow.com/questions/10577906/how-to-make-my-click-function-work-with-ios/36816311#34493059)，它使事件适应设备以触发功能，这是一个强制触发 iOS 设备点击的代码，其中首先有一个 touchstart 事件：

```
var UA = navigator.userAgent,
iOS = !!(UA.match(/iPad|iPhone/i));

if (iOS) {
   $(document).on('touchstart', function (e) {
       e.target.click();
   });
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-14T05:51:28.247

你可以使用这个：

```
$('button').bind( "touchstart", function(){
    alert('hi');
}); 
```

另一种解决方案是将元素的光标设置为指针，并与 jQuery live 和 click 事件一起使用。在 CSS 中设置它。

# ios - 在我的 Xcode 项目中找不到

> ID：10577912
> 
> 赞同：1
> 
> 时间：2012-05-14T05:32:29.863
> 
> 标签：ios, ipad

嗨，在我的 Xcode 项目中，我包含了`libxml2.dylib`框架。我仍然收到错误消息：

> 未找到 libxml2/tree.h。

如何解决这个问题？

我没有提供任何搜索标题路径。我在用`Xcode 4.2`

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-14T05:39:30.693

在我自己使用 libxml2 的项目中，我修改了 Header Search 路径以明确告诉编译器在哪里可以找到头文件：

![指向 libxml2 头文件所在位置的指针](../Images/cc787e31584e7ea5f373d35dfb531b02.png)

从 " `$(SDKROOT)`" 位可以看出，它实际上内置在随 Xcode 一起安装的 SDK 中。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-05T16:21:32.400

将标题搜索路径更改为：

> /Applications/Xcode.app/Contents/Developer/Platforms/iPhoneOS.platform/Developer/SDKs/iPhoneOS5.1.sdk/usr/include/libxml2

不客气 ：）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-10-16T06:37:52.357

我有类似的问题，并按照本文的步骤解决问题：

[http://www.optimusmobility.com/2013/06/11/how-to-resolve-libxmltree-h-file-not-found-error/](http://www.optimusmobility.com/2013/06/11/how-to-resolve-libxmltree-h-file-not-found-error/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-14T05:44:04.893

阅读这份文件......我认为这个网址对你有帮助......

在此网址中查看此主题 `Setting up your project file`

如果您不知道 Xcode 中的标头搜索路径，请按照步骤

```
go to target->click on BUild Setting-> search heder in search bar -> then you see search Path -> and check header search path 
```

您进入构建阶段“与二进制库链接”并添加 libxml2 框架

```
 You follow all step after use step then click all tab (not combined tab) 
```

# c# - 使用 Flickr API 时如何跳过登录页面？

> ID：10577918
> 
> 赞同：0
> 
> 时间：2012-05-14T05:33:41.693
> 
> 标签：c#, asp.net, api, flickr

我在我的 web 应用程序中使用 Flickr API，我想使用 C# 和 Asp.net 向访问者显示我的照片库，我能够显示图像，但每次它都要求登录用户。现在我的问题是我怎么能跳过这个登录部分，因为我不能指望访问者有一个 flickr/yahoo 帐户。

将非常感谢有用的建议。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-15T00:55:10.490

您无需登录即可使用 Flickr API 查看公共照片。您需要将照片的可见性设置为公开。

只有调用用户可见的照片才会被返回。要返回私人或半私人照片，调用者必须经过身份验证并以“读取”权限登录，并有权查看照片。因此，如果您想显示公共照片，则不需要用户登录。您只需要使用您的应用程序密钥进行身份验证并调用 API 方法来检索照片。

[本](http://richardshepherd.com/how-to-use-jquery-with-a-json-flickr-feed-to-display-photos/)教程让您了解如何在不登录的情况下拨打电话。它适用于 JQuery，但显示了调用方式。

# c# - 如何在.NET 中搜索域中的所有用户帐户？

> ID：10577920
> 
> 赞同：0
> 
> 时间：2012-05-14T05:33:47.647
> 
> 标签：c#, .net, windows, vb.net, winapi

如何在 .NET 中搜索域中的所有用户帐户？

不是域中的计算机名称，而是用户帐户，这就是您用于登录 Windows 的内容。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-14T05:50:31.203

您可以尝试以下方法。

```
PrincipalContext ctx = new PrincipalContext(ContextType.Machine,Environment.MachineName);
UserPrincipal user = new UserPrincipal(ctx);
user.Name = "*";
PrincipalSearcher ps = new PrincipalSearcher();
ps.QueryFilter = user;
PrincipalSearchResult<Principal> result = ps.FindAll();
foreach (Principal p in result)
{
    using (UserPrincipal up = (UserPrincipal)p)
    {
        MessageBox.Show(up.Name);
    }
} 
```

或这个：

```
using System.Management;

namespace ConsoleApplication1
{
    class Program
    {

        static void Main(string[] args)
        {
            SelectQuery query = new SelectQuery("Win32_UserAccount");
            ManagementObjectSearcher searcher = new ManagementObjectSearcher(query);
            foreach (ManagementObject envVar in searcher.Get())
            {
                Console.WriteLine("Username : {0}", envVar["Name"]);
            }

            Console.ReadLine();
        } 
```

另请参阅*[如何列出所有 Windows 用户](http://www.andreas-kraus.net/blog/how-to-list-all-windows-users/)*。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-14T07:18:44.910

搜索域用户的另一种方法：

```
using System.DirectoryServices;
using System.DirectoryServices.ActiveDirectory;

        using (var domain = Domain.GetCurrentDomain())
        using (var directoryEntry = domain.GetDirectoryEntry())
        using (var directorySearcher = new DirectorySearcher(directoryEntry, "(&(objectCategory=person)(objectClass=user))"))
        {
            directorySearcher.PageSize = 1000;

            using (var searchResults = directorySearcher.FindAll())
            {
                foreach (SearchResult searchResult in searchResults)
                {
                    using (var userEntry = searchResult.GetDirectoryEntry())
                    {
                        Console.WriteLine(userEntry.Properties["cn"][0]);
                    }
                }
            }
        } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-14T05:43:34.363

您可以使用以下内容：

```
List<string> LdapUsers = new List<string>();

if (String.IsNullOrWhiteSpace(domain))
{
    string username = WindowsIdentity.GetCurrent().Name;
    domain = username.Substring(0, username.IndexOf("\\"));
}

PrincipalContext context;
if (!String.IsNullOrWhiteSpace(user) && !String.IsNullOrWhiteSpace(password) && !String.IsNullOrWhiteSpace(domain))
    context = new PrincipalContext(ContextType.Domain, domain, user, password);
if (!String.IsNullOrWhiteSpace(domain))
    context = new PrincipalContext(ContextType.Domain, domain);
else
    context = new PrincipalContext(ContextType.Domain);
UserPrincipal userP = new UserPrincipal(context);
userP.Enabled = true;
PrincipalSearcher pS = new PrincipalSearcher();
pS.QueryFilter = userP;

PrincipalSearchResult<Principal> result = pS.FindAll();
foreach (Principal p in result)
    LdapUsers.Add(domain + "\\" + p.SamAccountName); 
```

# android - 在应用程序处于前台时保持 android 服务处于活动状态

> ID：10577922
> 
> 赞同：2
> 
> 时间：2012-05-14T05:34:18.230
> 
> 标签：android, sockets, service

我有一项服务正在维护与游戏服务器的套接字连接。游戏需要经常与服务器进行双向通信，因此只要应用程序有前台，此连接就应该保持打开状态。然而，由于保持连接打开是电池密集型的，我们希望尽可能好，一旦应用程序离开前台（即用户返回主屏幕），我们就会终止连接。

这一切都非常接近工作，但我们遇到了一些小烦恼。每当游戏更改活动（例如偏好活动）时，连接就会断开。现在我们可以让每个活动在暂停时断开连接并启动负责此操作的服务，但这似乎不太理想，因为它会导致不必要的断开和重新连接。将服务停止绑定到 onStop 方法似乎也不太理想，因为在用户离开游戏后连接将保持很长时间。

我们正在寻找的是一种在初始活动开始后不久启动服务并在应用程序处于前台时保持该服务运行的方法。一旦用户离开应用程序，服务就会关闭。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-14T06:28:54.887

如果您只需要它在应用程序处于前台时运行（即显示其中一个活动），那么您实际上并不需要服务。使您的连接管理器类成为单例并计算使用它的活动数量，如下所述：[https ://groups.google.com/forum/#!msg/android-developers/yxOzuMGlcSo/yd-pkau0zzAJ](https://groups.google.com/forum/#!msg/android-developers/yxOzuMGlcSo/yd-pkau0zzAJ)

当您需要在没有 UI 的情况下运行时，会使用 Android 中的服务，因此不太适合您的用例。

# memory - 单击 CrViewer 打印按钮时出现“尝试读取或写入受保护内存..”错误

> ID：10577926
> 
> 赞同：5
> 
> 时间：2012-05-14T05:35:04.763
> 
> 标签：memory, printing, crystal-reports, protected

I am getting the error "Attempted to read or write protected memory.." on print button click of the Crystal Report Viewer. This error is random and sometimes the report prints without any errors. Sometimes it gives error as "Handle is invalid". I have tried 2-3 solutions provided on internet like un-checking the "Suppress JIT optimization.."option , but nothing has worked for me. Please help!! (Other details : Crystal Reports 2011, Crystal Reports for VS2010 version 13.0.2, C# 2010 winforms application)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2016-09-20T22:45:11.967

我只在 64 位 Windows7 上遇到了这个问题，并且`Windows6.1-KB2695321-v2-x64`修复程序解决了这个问题。

我使用 Windows Hotfix Downloader 来下载修补程序。

我希望这有帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-09-23T22:05:59.977

我用这种方式来避免这个问题：

1.  在水晶报表查看器中将显示打印按钮设置为 false
2.  向工具条添加自定义按钮，请查看以下链接： http: [//www.manjuke.com/2011/08/invoke-custom-method-when-crystal.html](http://www.manjuke.com/2011/08/invoke-custom-method-when-crystal.html)
3.  将 Eventhandler 设置为新的自定义按钮，并在其中设置代码以直​​接打印到打印机

    ```
    cr1.PrintToPrinter(1, false, 0, 0); 
    ```

当您直接打印到打印机时，问题不会出现。或者您可以创建一个打印对话框并使用它来打印您的报告 我这样做了，一切正常

# ruby-on-rails-3 - Rails - 嵌套模型无法保存

> ID：10577932
> 
> 赞同：1
> 
> 时间：2012-05-14T05:35:58.230
> 
> 标签：ruby-on-rails-3, nested-forms

我对 Rails 很陌生，我正在编写一个包含嵌套模型的注册表单。当我提交表单时，用户保存得很好，但嵌套模型不会将任何内容保存到订阅数据库，控制台也不会抛出任何错误。

我真诚地希望我没有遗漏一些非常明显的东西，我很感激你可以分享的任何提示。谢谢！

这是代码-

楷模：

```
class Plan < ActiveRecord::Base
  attr_accessible :posts, :name, :price
  has_many :users
end

class User < ActiveRecord::Base
  belongs_to :plan
  has_many :events
  has_one :subscription, :autosave => true

  accepts_nested_attributes_for :subscription

  attr_accessible :subscription_attributes

  def save_with_payment
    if valid?
    customer = Stripe::Customer.create(
      email:email, 
      plan: plan_id,
      card: stripe_card_token )
    self.stripe_customer_token = customer.id
    save!
  end
  rescue Stripe::InvalidRequestError => e
    logger.error "Stripe error while creating customer: #{e.message}"
    errors.add :base, "There was a problem with your credit card."
    false
  end
end

class Subscription < ActiveRecord::Base
  attr_accessible :plan_id, :status, :user_id
  belongs_to :user

end 
```

这是用户控制器：

```
def new
  @user = User.new
  plan = Plan.find(params[:plan_id])
  @user = plan.user
  @user.build_subscription
end

def create
  @user = User.new(params[:user])
  if @user.save_with_payment
    sign_in @user
    flash[:success] = "Welcome to the SendEvent!"
    redirect_to @user
  else
    render 'new'
  end
end 
```

这是表格：

```
<%= form_for @user, :html => {:class => "form-inline"} do |f|  %>
    <%= render 'shared/error_messages', object: f.object %>
    <div class="control-group">
      <%= f.label :name, :class => "control-label" %> 
      <%= f.text_field :name %>
    </div>  

    # A few more fields here and...

    # The nested model:
    <%= f.fields_for :subscription do |builder| %>
      <%= builder.hidden_field :status, :value => true %>
    <% end %>
    <%= f.submit "Create my account", class: "btn btn-large btn-primary", id: "submitacct" %>
<% end %> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-16T22:39:34.327

来自[RailsCasts的示例应用程序](http://www.railscasts.com)

[RailsCasts 第 196 集：嵌套模型表单（修订版）](https://github.com/railscasts/episode-196/tree/master/revised/questionnaire-after)

也许能帮到你。

# c++ - Eclipse 中的 MakeFile 是什么？

> ID：10577935
> 
> 赞同：0
> 
> 时间：2012-05-14T05:36:31.220
> 
> 标签：c++, eclipse, makefile

Eclipse 中的 MakeFile 是什么？从文档中：

> makefile 是一个由 make 命令引用的文本文件，它描述目标的构建，并包含诸如源级依赖关系和构建顺序依赖关系等信息。CDT 可以为您生成一个 makefile，这样的项目称为 Managed Make 项目。一些项目，称为标准 Make 项目，允许您定义自己的 makefile。

但是解释并不能帮助我理解 MakeFile 是什么。我正在从 VisualStudio/C# 迁移到 Eclipse/C++。MakeFile 是否类似于 Visual Studio 的元数据？什么时候需要编写 MakeFile，为什么除了 C++ 代码还需要它？

[编辑] 我曾经在 Windows 上使用 VS 和 C# 进行开发。现在在 Mac 上尝试 Eclipse/C++。我从来没有在 Linux 上构建过任何人。所以到目前为止我读到的答案根本无助于解释任何事情。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-14T05:40:50.840

用最简单的术语来说，makefile 是构建程序的文件。这些通常在命令行中使用。如果你曾经在 linux 上构建过一些东西，你可能已经运行过 ./configure ；制作 ; 进行安装。您在那里使用生成文件。

更多信息... [https://en.wikipedia.org/wiki/Make_(software](https://en.wikipedia.org/wiki/Make_(software) )

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-14T05:51:18.473

简单来说：Make 可帮助您在一个文件中创建跨平台配置设置，并且可以在许多平台上运行，包括 Windows 或 Mac OS-es。

提到 Windows，您应该在要安装的计算机上安装了 Make（在 Windows 上，Cygwin 和 MinGW 包括 Make）。仅当用户实际*从源代码构建代码*时才需要它。

但是，当然，您应该为每个不同的平台包含 Make 代码（例如，一个用于类 Unix，一个用于 Windows，等等）

# php - 卷曲请求响应没有得到

> ID：10577936
> 
> 赞同：0
> 
> 时间：2012-05-14T05:36:35.087
> 
> 标签：php

我正在使用 curl 向支付系统的虚拟商户支付网关发送支付信息。这是我的代码：

```
$Url= "https://www.myvirtualmerchant.com/VirtualMerchant/process.do";
    // is cURL installed yet?
    if (!function_exists('curl_init')){
        die('Sorry cURL is not installed!');
    }

    // OK cool - then let's create a new cURL resource handle
    $ch = curl_init();

    // Now set some options (most are optional)

    // Set URL to download
    curl_setopt($ch, CURLOPT_URL, $Url);

    // Include header in result? (0 = yes, 1 = no)
   // curl_setopt($ch, CURLOPT_HEADER, 0);

    // Should cURL return or print out the data? (true = return, false = print)
    curl_setopt($ch, CURLOPT_RETURNTRANSFER, true);

    // Timeout in seconds
    curl_setopt($ch, CURLOPT_TIMEOUT, 10);

    $fields = array(
            'ssl_card_number'=>urlencode($_POST['ssl_card_number']),
            'ssl_exp_date'=>urlencode($_POST['ssl_exp_date']),
            'ssl_cvv2cvc2'=>urlencode($_POST['ssl_cvv2cvc2']),
            'ssl_avs_address'=>urlencode($_POST['ssl_avs_address']),
            'ssl_avs_zip'=>urlencode($_POST['ssl_avs_zip']),
            'ssl_merchant_id'=>urlencode($_POST['ssl_merchant_id']),
            'ssl_user_id'=>urlencode($_POST['ssl_user_id']),
            'ssl_pin'=>urlencode($_POST['ssl_pin']),
            'ssl_transaction_type'=>urlencode($_POST['ssl_transaction_type']),
            'ssl_amount'=>urlencode($_POST['ssl_amount']),
            'ssl_show_form'=>urlencode($_POST['ssl_show_form']),
            'TransactionType'=>urlencode($_POST['TransactionType'])
        );

    //url-ify the data for the POST
    foreach($fields as $key=>$value) { $fields_string .= $key.'='.$value.'&'; }
    rtrim($fields_string,'&');
    curl_setopt($ch,CURLOPT_POSTFIELDS,$fields_string);

    // Download the given URL, and return output
    echo $output = curl_exec($ch);

    // Close the cURL resource, and free system resources
    curl_close($ch);

    print_r($output); 
```

但是在 $output 我什么也没得到，没有任何错误或消息。我做错了吗？请告诉我 ？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-01-15T17:56:29.040

首先，我会检查您的 mechant_id、pin 等。下面是我在解决类似问题后创建的工作代码。

```
<html>
    <body>
        <p>--start--</p>

<?php
//if you have a live account don't use the "demo" post url it won't work
$post_url = 'https://www.myvirtualmerchant.com/VirtualMerchant/process.do';

//replace the xxx's with your proper merchant_id, etc. 
//they will give you these when you activate your account

//I've set form to not show, and ssl_result_format =>ascii to get a string returned

$fields = array(
    'ssl_merchant_id'           =>'xxxxxx',
    'ssl_user_id'               =>'xxx',
    'ssl_pin'               =>'xxxxx',
    'ssl_show_form'             =>'false',
    'ssl_result_format'         =>'ascii',
    'ssl_test_mode'             =>'false',
    'ssl_transaction_type'      =>'ccsale',
    'ssl_amount'                =>'1.44',
    'ssl_card_number'           =>'5000300020003003',
     'ssl_exp_date'             =>'1214',
    'ssl_avs_address'           =>'Test 3',
    'ssl_avs_zip'               =>'123456',
    'ssl_cvv2cvc2'              =>'123',
);

//build the post string
$fields_string = '';
foreach($fields as $key=>$value) { $fields_string .=$key.'='.$value.'&'; }
rtrim($fields_string, "&");

//open curl session
// documentation on curl options at http://www.php.net/curl_setopt

$ch = curl_init();
//begin seting curl options
//set URL
curl_setopt($ch, CURLOPT_URL, $post_url);

//set method
curl_setopt($ch, CURLOPT_POST, 1);
curl_setopt($ch, CURLOPT_RETURNTRANSFER, 1);

//set post data string
curl_setopt($ch, CURLOPT_POSTFIELDS, $fields_string);

//these two options are frequently necessary to avoid SSL errors with PHP
curl_setopt($ch, CURLOPT_SSL_VERIFYPEER, false);
curl_setopt($ch, CURLOPT_SSL_VERIFYHOST, false);

$result = curl_exec($ch); 

if($result === FALSE) {
    //post failed
    die(curl_error($ch));

} else {
    //got a response
    //some people seem to get name/value pairs delimited with "&" 
    //but currently mine is \n 
    //support told me there's no way to change it..
    $response_array = explode("\n",$result); 

    //make it nice and useful
    foreach( $response_array as $k=>$v ){
        $v=explode("=",$v);
        $a[$v[0]]=$v[1];
    }

    //show the whole array
    print_r($a);

    //use a specific return value
    //returns "APPROVAL" if it went through
    echo('<h1>'. $a[ssl_result_message] . '</h1>');
}
?>

       <p>--end--</p>
    </body>
</html> 
```

上面的代码应该给你一个像这样的屏幕：

```
--start--

Array ( [ssl_card_number] => 50**********3003 [ssl_exp_date] => 1214 [ssl_amount] => 1.44 [ssl_customer_code] => [ssl_salestax] => [ssl_invoice_number] => [ssl_description] => [ssl_departure_date] => [ssl_completion_date] => [ssl_company] => [ssl_first_name] => [ssl_last_name] => [ssl_avs_address] => Test 3 [ssl_address2] => [ssl_city] => [ssl_state] => [ssl_avs_zip] => 123456 [ssl_country] => [ssl_phone] => [ssl_email] => [ssl_result] => 0 [ssl_result_message] => APPROVAL [ssl_txn_id] => AA49315-1234567-F78F-468F-AF1A-F5C4ADCFFB1E [ssl_approval_code] => N53032 [ssl_cvv2_response] => [ssl_avs_response] => [ssl_account_balance] => 0.00 [ssl_txn_time] => 01/15/2014 11:53:15 AM )

APPROVAL

--end-- 
```

确保在完成测试后删除所有这些测试购买。我被告知他们会禁止发布您的真实购买。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-14T05:52:31.187

您正在调用 HTTPS 页面。请参考以下链接

[http://unitstep.net/blog/2009/05/05/using-curl-in-php-to-access-https-ssltls-protected-sites/](http://unitstep.net/blog/2009/05/05/using-curl-in-php-to-access-https-ssltls-protected-sites/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-14T05:57:47.727

尝试在 curl 关闭之前找到错误给出此代码：-

```
echo "Curl Error :--" . curl_error($ch); 
```

如果没有发现错误，请这样做：-

```
curl_setopt($ch, CURLOPT_RETURNTRANSFER, 1);
$result = curl_exec($ch); 
```

然后

```
print_r($result);
exit; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-14T06:02:05.130

尝试这个：

```
$output = curl_exec($ch);
$response = curl_getinfo($ch);
echo "<pre>";
print_r($response);
echo "</pre>"; 
```

希望你能得到回应:)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-14T05:39:17.807

试试这个找出错误

```
var_dump(curl_error($ch)); 
```

之前和打电话`curl_exec($ch);`

# iphone - 应用进入后台时如何获取本地通知

> ID：10577940
> 
> 赞同：0
> 
> 时间：2012-05-14T05:37:36.083
> 
> 标签：iphone

我是 iPhone 新手。我正在做项目，因为本地通知概念，我在中间遇到了问题。在我的应用程序中，我通过使用计时器概念将请求发送到服务器并每 20 秒获得一次响应，但是当应用程序进入后台时，我们怎么能通过使用本地通知每 20 秒从服务器获取响应。如果有人知道这个概念，请帮助我...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-14T05:51:56.700

当应用程序处于后台模式时，您会收到 loacl 通知，然后单击是按钮

```
- (void)application:(UIApplication *)app didReceiveLocalNotification:(UILocalNotification *)notif 
```

这个函数是调用，你得到字典

```
 NSLog(@"%@",[notif userInfo]); 
```

并在这个函数中调用xml..你可以很容易地从你的服务器获得共鸣

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-14T05:57:29.013

通常，您的应用程序不会在后台执行，并且本地通知不会为您提供在后台执行的能力。

（[这有例外，但它们有限制。](http://developer.apple.com/library/ios/DOCUMENTATION/iPhone/Conceptual/iPhoneOSProgrammingGuide/ManagingYourApplicationsFlow/ManagingYourApplicationsFlow.html#//apple_ref/doc/uid/TP40007072-CH4-SW24)如果你*真的需要*每 20 秒 ping 一次服务器，因为你是一个 VoIP 应用程序，你可以声明你是一个 VoIP 应用程序并设置一个保持 -用于执行该 ping 的活动处理程序。但是，如果您要提交到 App Store，Apple 将要求您真正实现类似 VoIP 的应用程序，而不仅仅是在后台下载新的 RSS 提要等。）

本地通知*的*用途是在您的应用未激活时引起用户的注意。当您的应用程序正在运行时，您可以安排本地通知以在一段时间后向用户发布消息（有点像日历警报）。如果您正在使用一种受支持的后台执行模式，您可以立即使用本地通知来引起用户的注意。无论哪种方式，只有当用户选择点击通知时，您的应用才会被激活。

# math - 链式哈希表查找的预期最坏情况时间复杂度？

> ID：10577943
> 
> 赞同：3
> 
> 时间：2012-05-14T05:38:04.897
> 
> 标签：math, data-structures, hash, big-o, probability

当使用一个好的散列函数（任意两个元素碰撞的概率为 1 / m，其中 m 是桶的数量）实现散列表时，众所周知，查找元素是 Θ(1 + α)，其中 α 是负载因子。但是，如果所有元素最终都放入同一个桶中，最坏情况的运行时间是 O(n)。

我最近在阅读哈希表，发现[这篇文章](http://compgeom.cs.uiuc.edu/~jeffe/teaching/algorithms/notes/07-hashing.pdf)声称（第 3 页）如果 α = 1，则**预期**的最坏情况复杂度为 Θ(log n / log log n)。通过“预期的最坏情况复杂性”，我的意思是，根据预期，如果元素由统一的散列函数分布，您将不得不做的最大工作量。这与实际的最坏情况不同，因为最坏情况的行为（同一桶中的所有元素）极不可能实际发生。

我的问题如下——作者似乎暗示不同的 α 值可以改变查找的预期最坏情况复杂性。有谁知道某处的公式、表格或文章讨论了改变 α 如何改变预期的最坏情况运行时间？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-14T14:45:54.427

对于固定`α`的，预期的最坏时间总是`Θ(log n / log log n)`。但是，如果您制作`α`的函数`n`，则预期的最坏时间可能会改变。例如，如果`α = O(n)`预期的最坏时间是`O(n)`（即您拥有固定数量的哈希桶的情况）。

一般来说，项目在桶中的分布近似为泊松分布，随机桶中包含`i`项目的几率为。最坏的情况只是接近独立观察的第一个最坏的情况。（不完全独立，但相当接近。）观察中最糟糕的往往是发生几率大约为几倍的事情。（更准确地说，分布由 Β 分布给出，但对我们的分析来说已经足够好了。）`α^i e^(-α) / i!``m``m``m``m``1/m``1/m`

当您进入泊松分布的尾部时，该`i!`术语的增长支配着其他所有事物，因此高于给定值的所有事物的累积概率`i`小于选择`i`自身的概率。因此，您可以通过求解以下问题得出一个很好的近似值：

```
α我e-α / 我！= 1/m = 1/(n/α) = α/n
```

取双方的日志，我们得到：

```
i log(α) - α - (i log(i) - i + O(log(i)) = log(α) - log(n)
log(n) - α = i log(i) - i - i log(α) + O(log(i))
```

如果我们保持`α`不变，那么这是：

```
log(n) = i log(i) + O(i)
```

`i`如果有表格`k log(n) / log(log(n))`，这可以工作`k = Θ(1)`吗？让我们尝试一下：

```
log(n) = (k log(n) / log(log(n))) (log(k) + log(log(n)) - log(log(log(n)))) + O(log(日志（n）））
       = k (log(n) + o(log(n)) + o(log(n))
```

然后我们得到更清晰的估计，对于任何固定负载平均值`α`，预期的最坏时间是`(1 + o(1)) log(n) / log(log(n))`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-19T20:25:36.140

经过一番搜索，我发现了[这篇研究论文](https://www.cs.uwaterloo.ca/research/tr/1978/CS-78-46.pdf)，它对一大堆不同类型的哈希表（包括链式哈希表）的预期最坏情况行为进行了完整分析。作者给出的答案是预期长度约为 Γ ^(-1) (m)，其中 m 是桶数，Γ 是[Gamma 函数](http://en.wikipedia.org/wiki/Gamma_function)。假设 α 是一个常数，这大约是 ln m / ln ln m。

希望这可以帮助！

# asp.net - 虚假 URL 访问导致服务器挂起

> ID：10577947
> 
> 赞同：1
> 
> 时间：2012-05-14T05:38:44.770
> 
> 标签：asp.net, iis, firewall

当访问不可用的 URL 时，我们会在内部引发异常并向支持团队发送电子邮件。我们这样做是为了确定我们的 Web 应用程序中是否存在隐藏错误。几天前，突然有大量对不可用 url 的访问，这增加了服务器的负载并导致 SMTP 将大型异常电子邮件排队。此尝试已完全关闭 IIS，并且没有任何应用程序可访问。

如何防止这种情况？是否有任何其他选项（如防火墙等）禁止来自同一 IP 的继续请求。我在谷歌看到过这种行为。我们怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-14T05:54:52.070

我建议缓存已经发送的通知。在您的应用程序发送电子邮件之前，它可以检查是否已报告此错误。

您可以将缓存有效期设置为 1 分钟，这样您每分钟最多可以收到 1 封相同的电子邮件。在 ASP.NET 中很容易实现。

# android - MapView 在不移动总是动画到用户当前位置

> ID：10577951
> 
> 赞同：0
> 
> 时间：2012-05-14T05:38:59.967
> 
> 标签：android

我正在开发一个应用程序，它可以找到用户当前位置并找到附近的地方。我几乎完成了这个应用程序，但现在的问题是，当找到用户当前位置并将标记添加到用户当前位置时，但是当我想要将地图移动或滚动到 onTouchEvent 方法中的任何其他位置地图不移动并返回到用户当前位置标记。在模拟器中 onTouchEvnet 工作正常但在设备上它不工作这里是我移动地图的代码。

//这是我的移动地图代码

```
@Override
public boolean onTouchEvent(MotionEvent event, MapView mapView) {
      if(event.getAction()==MotionEvent.ACTION_MOVE) {
             GeoPoint p = mapView.getProjection().fromPixels(
             (int) event.getX(),
             (int) event.getY());
             MapController mc=mapView.getController();
             mc.animateTo(p);
             return true;
       } else{
             return false;
       }     
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-29T05:12:25.860

你能澄清一下你的问题吗？当用户触摸该点时，您是否尝试动画到特定位置但它只是回到用户当前位置？这可能是因为 MyLocationOverlay.enableMyLocation() 试图保持蓝点在 MapView 中可见。

# jquery - 如何在仅允许 Jquery-1.6.3 版本的情况下制作具有动态数据变化的饼图

> ID：10577956
> 
> 赞同：0
> 
> 时间：2012-05-14T05:40:06.427
> 
> 标签：jquery, pie-chart

如何用jquery制作饼图但没有任何第三方插件，饼图的数据需要动态更新，教程链接或说明会很高兴分享。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-14T07:52:18.013

```
<script src="http://code.jquery.com/jquery-1.6.3.min.js"></script>
<script src="http://code.highcharts.com/highcharts.js"></script>
<script src="http://code.highcharts.com/modules/exporting.js"></script>

<div id="container" style="min-width: 400px; height: 400px; margin: 0 auto"></div>
<input type="button" id="btnPieChart" value="Pie Chart" />

 $(document).ready(function () {    

            RenderPieChart('container', [
                      ['Firefox', 45.0],
                      ['IE', 26.8],
                      ['Chrome',  12.8],                         
                      ['Safari', 8.5],
                      ['Opera', 6.2],
                      ['Others', 0.7]
                  ]);     

     $('#btnPieChart').live('click', function(){
         var data = [
                      ['Firefox', 42.0],
                      ['IE', 26.8],
                      {
                          name: 'Chrome',
                          y: 14.8,
                          sliced: true,
                          selected: true
                      },
                      ['Safari', 6.5],
                      ['Opera', 8.2],
                      ['Others', 0.7]
                  ];

            RenderPieChart('container', data);
     });

            function RenderPieChart(elementId, dataList) {
                new Highcharts.Chart({
                    chart: {
                        renderTo: elementId,
                        plotBackgroundColor: null,
                        plotBorderWidth: null,
                        plotShadow: false
                    }, title: {
                        text: 'Browser market shares at a specific website, 2010'
                    },
                    tooltip: {
                        formatter: function () {
                            return '<b>' + this.point.name + '</b>: ' + this.percentage + ' %';
                        }
                    },
                    plotOptions: {
                        pie: {
                            allowPointSelect: true,
                            cursor: 'pointer',
                            dataLabels: {
                                enabled: true,
                                color: '#000000',
                                connectorColor: '#000000',
                                formatter: function () {
                                    return '<b>' + this.point.name + '</b>: ' + this.percentage + ' %';
                                }
                            }
                        }
                    },
                    series: [{
                        type: 'pie',
                        name: 'Browser share',
                        data: dataList
                    }]
                });
            };
        }); 
```

# serialization - 协议缓冲区可以用于实现第 3 方协议吗

> ID：10577957
> 
> 赞同：1
> 
> 时间：2012-05-14T05:40:08.827
> 
> 标签：serialization, protocol-buffers

当只有通信通道的一端使用它时，是否可以使用谷歌协议缓冲区作为序列化机制？

即，给定一个客户端，该客户端需要与以某种定义的消息字节结构进行通信的某个第 3 方服务器或硬件进行通信。

是否可以使用 protobuf IDL 指定确切的字节结构？或者 protobuf 是否使用它自己的字节打包格式，因此两端必须使用 protobuf 协议说话？

如果不是 protobuf，是否有一些库可以实现这一目标？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-14T06:03:11.740

不，协议缓冲区的布局非常严格，无法更改，并且不太可能与您正在使用的布局相匹配，*除非*它秘密使用协议缓冲区并且只是不宣传这一事实。编码[记录在这里](https://developers.google.com/protocol-buffers/docs/encoding)。

至于替代品；这在很大程度上取决于您使用的平台/语言/框架。发现您必须编写自己的工具来讨论所需的协议并不罕见。

# android - 哪个是在服务器 android 上上传图像的最佳视图或表面视图

> ID：10577959
> 
> 赞同：0
> 
> 时间：2012-05-14T05:40:12.210
> 
> 标签：android, camera

我想从相机捕捉图像并上传到服务器

用于捕获最好直接使用意图简单排序代码或使用最好的视图或表面视图的图像

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-14T05:46:50.680

当你使用 basic 时`Intent`，你真的不需要为 sufaceView 或 View 操心。用户会收到图像提示，并被询问是否保存它。使用`onActivityResult`将负责上传。

你看过[android相机图像捕捉](http://developer.android.com/guide/topics/media/camera.html)吗？他们有从 android 相机捕获图像的所有可能性的示例代码。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-14T05:47:22.427

如果您想在您的活动中进行一些自定义或图像捕获的其他一些功能，那么最好使用surfaceview。我已经给你一个例子，你可以试试这个来捕捉帧。我已经解释了一切，如果您有任何问题，那么您可以要求我会尽力帮助您。而不是 onPreviewFrame 在拍摄的照片上使用。

[Android 相机表面视图](https://stackoverflow.com/questions/10482057/android-camera-surface-view/10482872#10482872)

希望它会帮助你。

# java - 使用通过 LAN 连接的其他 Windows 计算机启动应用程序并在一台 Windows 计算机上跟踪其状态

> ID：10577961
> 
> 赞同：0
> 
> 时间：2012-05-14T05:40:15.957
> 
> 标签：java, ssh, windows-shell

我希望能够在运行 Windows 的两台机器之间进行通信。我希望能够从一台机器上启动一个应用程序，然后在另一台机器上查看它的运行状态。

谁能帮助我了解我可以使用哪些技术？

我做了一些研究，发现可以使用**SSH**，但我不确定如何使用它。
如果可能的话，我希望能够使用**Java**。如果没有，请建议。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-14T06:07:23.510

如果我理解正确，您可以在这种情况下使用 RMi。

```
The Java RMI system allows an object running in one Java Virtual Machine (VM) to invoke methods on an object running in another Java VM. RMI provides for remote communication between programs written in the Java programming language via the Java Remote Method Protocol (JRMP). 
```

希望这会帮助你。

# php - 编译的 PHP 框架

> ID：10577963
> 
> 赞同：-1
> 
> 时间：2012-05-14T05:40:22.470
> 
> 标签：php, orm, frameworks, kohana

**我不想将 PHP 编译为原生 EXES 或类似的东西，只编译/缓存（这两个词都不能反映我的意思）框架逻辑本身**

有没有类似编译的 PHP 框架的东西？

我的意思是以小花为例。它是可扩展的、可覆盖的、有趣的等等。但它最终会加载 200 个文件以显示一页！

我认为最好的是如果你有`Controller_Admin extends Controller_Admin_Template extends Controller_Template extends Kohana_Controller_Template extends Controller extends Kohana_Controller`. 这不是必需的……如果我们只是将方法体复制粘贴到`$parent->whatever()`它上面，最终会得到一个漂亮、更小、更快的文件。

我们已经为 JS 和 CSS 做到了，以最大限度地减少资源下载；为什么不是整个框架？:D

我也在寻找一个可编译的ORM。Kohana ORM 非常……慢……它使用魔法方法，加载表格，通常使用起来很有趣，但在服务器的电路中……很痛苦。:P

如果我们可以在生产服务器`ORM::factory('test')->compiled()->where('bla','=','1)->execute();`中编译`ORMC::factory('test','SELECT * FROM test WHERE bla=1')->execute();`它会很酷。这适用于除 ORM 之外的许多其他东西，但 ORM 会受益匪浅。

在我看来，动态框架的开销似乎并没有因为易用性而倾斜。有了这个，我们不会失去任何轻松并加快速度。;)

所以我的问题是：这样的事情存在吗？如果不是，我的逻辑是否有缺陷？

* * *

编辑：

由于答案失败，我会更直接地展示我想做的事情。

我们有一个 /application/ ，其中有与没有“编译”的完全相同的代码，还有一个 /compiled_app/ ，其中所有（例如）可以简化的查询都是简化的（不是对象 Query_Builder 而是`SELECT blablablabla`等）。

同样，一个类有 50 个文件会增加很多 umm... 覆盖向量？:D 这是一个不必要的 100% 保证~~瓶颈~~性能开销。也许它并不多，但它总是在那里。它没有必要。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-14T06:31:41.900

PHP 是一种解释性语言，因此不能编译。

有 APC 将 PHP 代码动态编译成 Zend 引擎执行的字节码并缓存它。这可以获得相当多的性能，但它有缺点和限制。

不过老实说，你所要求的听起来很像过早的优化。决定代码运行速度的最大因素是算法的选择。对一百万条记录进行编译的冒泡排序仍将比对相同数量记录的未编译快速排序慢。PHP 应用程序还倾向于花费大量时间与外部系统（例如数据库）进行通信。您根本无法通过编译 PHP 来优化此类活动。无论 PHP 是否被编译，一个需要 10 秒的查询将需要 10 秒。

如果您的应用程序存在性能问题，那么它正在执行的 SQL 查询通常是优化的一个很好的起点。许多 PHP 代码执行过多的查询，在循环中执行查询，或者查询应用程序随后不做任何事情的数据。找到并消除这些将无休止地加速您的应用程序。

但是，重要的是要注意，您永远不应该通过猜测瓶颈在哪里来优化您的代码。使用像 XDebug 这样的工具来生成运行代码的配置文件，然后分析他的输出以确定代码中的热点在哪里。

最重要的是，如果您没有性能问题，那么**为了优化本身而进行优化就是浪费时间**。过早的优化会浪费开发人员的时间，它往往会降低源代码的可读性和难以维护，并且有引入错误的趋势。仅在证明需要时才进行优化。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-14T06:39:15.157

您可以查看[Flow3](http://flow3.typo3.org/)框架及其[工作原理](http://net.tutsplus.com/tutorials/php/aspect-oriented-programming-in-php/)。它不是你真正想要的，但也许你会觉得它很有趣。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-05-14T05:53:37.733

您可以检查[Yaf](http://php.net/yaf)。它是一个编译为 PHP 扩展的框架。你听说过[嘻哈](https://github.com/facebook/hiphop-php)吗？它可以将整个 PHP 应用程序编译成一个二进制文件。

# java - 动态条件语句

> ID：10577966
> 
> 赞同：0
> 
> 时间：2012-05-14T05:41:07.813
> 
> 标签：java, conditional-statements

我想在java中创建动态条件语句
以下是我在文件中的表达式，有数百个表达式并且它们不断变化

```
0001|((condition1 == 100) && ((condition2 == 1) || (condition2 == 2) || (condition2 == 3)) && (condition3 > 74))
0002|((condition1 == 100) && ((condition2 == 1) || (condition2 == 2) || (condition2 == 3)) && (condition3 > 59) && ((condition4 == 3) || (condition5 > 30))) 
```

这些表达式在我的课堂上是硬编码的。

```
if(condition1==100 && ((condition2 == 1) || (condition2 == 2) || (condition2 == 3))){

if(condition3>74){
return "0001"
}
if(condition3>59 && ((condition4 == 3) || (condition5 > 30))){
return "0002"
}

} 
```

我想创建动态条件语句，例如

首先我检查所有条件1 == 100的表达式，
然后检查 ((condition2 == 1) || (condition2 == 2) || (condition2 == 3))
然后根据最终条件返回值

它类似于第一个 DFS，然后是 BFS

有人可以告诉我如何在java中首先检查深度然后是Bredth First

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-14T06:38:56.670

您的情况是：您想要定义很多条件并连续更改它。您需要有一个解决方案来动态更改表达式并定义新条件。

对于动态情况，例如您的情况，有两种解决方案：

1.  使用`Rule Engine`. 这很有好处，你可以从[http://java.sun.com/developer/technicalArticles/J2SE/JavaRule.html看到更多信息，你可以从](http://java.sun.com/developer/technicalArticles/J2SE/JavaRule.html)[这里](http://java-source.net/open-source/rule-engines) 看到它的开源实现。
2.  使用`Dynamic Language`or`Script Language`和`Script`api。

在第二个解决方案中，您有几个选择。我在下面写了一些：

*   `Groovy`: 一个完整而精彩的脚本语言。见[http://groovy.codehaus.org/](http://groovy.codehaus.org/)
*   `Spring Expression Language`：`Spring`调用简单表达式的解决方案。见[http://static.springsource.org/spring/docs/3.0.5.RELEASE/reference/expressions.html](http://static.springsource.org/spring/docs/3.0.5.RELEASE/reference/expressions.html)
*   `BeanShell`: 一个简单而美妙的脚本语言。

还有更多动态语言，例如`JRuby`您可以通过在网络中简单搜索来查看它。您可以从[此处](http://www.ibm.com/developerworks/java/library/j-javascripting1/)`Script`阅读有关java 中 api 的更多信息。

**编辑：**

对于示例，您可以使用`BeanShell Script Language`如下：

首先创建一个名称`test.bsh`包含打击内容的文件：

```
if(variable_1 == 100 )
{
   System.out.println("Sample condition checked and is true.");
}
else
{
   System.out.println("Sample condition checked and is false.");
} 
```

`variable_1`来自java的第二组：

```
import bsh.*;

Interpreter bsh = new Interpreter ();
bsh.set ("variable_1", 100); 
```

并在最终调用脚本中如下：

```
 bsh.source (script); 
```

结果如下：

```
Sample condition checked and is true. 
```

通过这种方法，您无需重新编译或重新启动即可更改`test.bsh`内容。

# javascript - KineticJS 中的鼠标悬停事件问题

> ID：10577967
> 
> 赞同：2
> 
> 时间：2012-05-14T05:41:07.967
> 
> 标签：javascript, html, canvas, kineticjs, jquery-events

我正在尝试对 KinetiJs Canvas 库进行一些实验。我在下面所做的是 - 绘制一个矩形，每当鼠标悬停时，我希望在特定点之间绘制一条线。

问题是，当鼠标悬停时我看不到任何线条。

我试过检查`onmousemove`函数是否被调用并且它确实被调用了，但是没有画线。谁能解释一下为什么？

```
$(document).ready(function () {
    var stage = new Kinetic.Stage({
        container: "sketchcanvas",
        width: 600,
        height: 600
    });
    var layer = new Kinetic.Layer();
    var rect = new Kinetic.Rect({
        x: 50,
        y: 50,
        width: 500,
        height: 500,
        fill: "#00D2FF",
        stroke: "black",
        strokeWidth: 4
    });
    rect.on("mousemove", function () {
        var mousePos = stage.getMousePosition();
        var x = mousePos.x;
        var y = mousePos.y;
        var line = new Kinetic.Line({
            points: [60, 60, 80, 80, 100, 200],
            stroke: "black",
            strokeWidth: 15,
            lineCap: 'round',
            lineJoin: 'round'
        });
        layer.add(line);
    });
    layer.add(rect);
    stage.add(layer);
}); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-14T05:44:40.273

在 KineticJS 中，对图层进行更改或添加后，您需要对`draw()`图层进行效果显示

```
...
layer.add(line);
layer.draw(); 
```

# rdf - RDF XML 中的整数和日期时间文字

> ID：10577971
> 
> 赞同：3
> 
> 时间：2012-05-14T05:41:30.067
> 
> 标签：rdf, semantic-web, triplestore

我已经开始使用三元存储和 RDF 来存储图像元数据，但我不明白如何将整数值放入 RDF/XML。

```
<?xml version="1.0"?>
<rdf:RDF xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#" xmlns:exif="http://penkov.me/exif/">
  <rdf:Description rdf:about="http://penkov.me/images/0">
    <exif:SourceFile>./205CANON/_MG_0538.CR2</exif:SourceFile>
    <exif:Make>Canon</exif:Make>
    <exif:FocalLength>50</exif:FocalLength>
  </rdf:Description>
</rdf:RDF> 
```

我猜`50`在`<exif:FocalLength>`标签中将被三重存储视为字符串，并且不可能对这个值进行范围查询。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-14T06:53:52.443

简单（但冗长）：

```
<exif:FocalLength rdf:datatype="http://www.w3.org/2001/XMLSchema#integer">50</exif:FocalLength> 
```

请参阅[RDF/XML 规范中的此部分](http://www.w3.org/TR/REC-rdf-syntax/#section-Syntax-datatyped-literals)

# jquery - IE jQuery 表单触发手动点击，访问被拒绝

> ID：10577973
> 
> 赞同：0
> 
> 时间：2012-05-14T05:41:36.283
> 
> 标签：jquery, internet-explorer, jqueryform

我有一个表格可以上传带有`jQuery`表格的图像。翻转是可以的，但是当我想在选择文件后点击触发文件输入类型时，`IE ONLY`返回此错误：`access is denied`

```
$('#imageform #photoimg').trigger('click'); or setTimeout(function(){$('#imageform #photoimg').trigger('click')},1000);
$('#photoimg').live('change',function()
{
    //$("#preview").html('');
    //$("#preview").html('<img src="loader.gif" alt="Uploading...."/>');
    $("#imageform").ajaxForm(
        success: function(out) {
            var imageur = out;
            // do tiny work with out;
        }
    }).submit();
}); 
```

问题出在哪里，我该如何解决？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-05T04:23:29.887

默认情况下，IE 不允许您触发文件元素更改。

如果你想要这个功能，可以使用[ajaxuploader](http://ajaxuploader.com/) 或[fileuploader](https://github.com/valums/file-uploader)：

```
var uploader = new qq.FileUploader({
    // pass the dom node (ex. $(selector)[0] for jQuery users)
    element: document.getElementById('file-uploader'),
    // path to server-side upload script
    action: '/server/upload'
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-17T03:19:35.340

我在 j query.form.js 中评论了这些行，然后一切对我来说都很好。即使我没有解决方案，也不要问我原因，但它肯定有效。

```
 if (io.contentWindow.document.execCommand) {
              try { // #214
                   io.contentWindow.document.execCommand('Stop');
             } catch(ignore) {}
          } 
```

# android - 自定义渐变actionbar背景，显示不好，需要dither

> ID：10577974
> 
> 赞同：1
> 
> 时间：2012-05-14T05:42:00.150
> 
> 标签：android, gradient, android-actionbar, dithering

我使用线性背景（xml 形状）作为 android 4.0 中的操作栏背景。它显示不好，看起来带状。

如何使其渲染平滑？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-17T19:04:31.807

首先，我假设您使用的是默认`RGBA_8888`像素格式（Android 2.3 的默认格式）。其次，在某些显示器上，渐变渲染效果不佳。一种解决方法是使用可绘制对象在渐变上覆盖[少量噪点](http://www.noisetexturegenerator.com/)（应该使用重复的半透明噪点纹理）。`drawable-nodpi`[`<layer-list>`](https://developer.android.com/guide/topics/resources/drawable-resource.html#LayerList)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-16T20:42:05.797

尝试提高`PixelFormat`窗口的质量：

```
@Override
public void onAttachedToWindow() {
    super.onAttachedToWindow();
    getWindow().setFormat(PixelFormat.RGBA_8888);
} 
```

这可能是[这个问题](https://stackoverflow.com/questions/2928101/android-using-linear-gradient-as-background-looks-banded)的重复。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-18T09:51:49.503

它是重复图案（平铺）还是九个补丁？ICS 在某些类型的渲染方面存在一些问题，因为默认情况下它使用硬件加速进行绘图，这使得无法使用某些绘图技术（特别是在 Drawables 时）并与其他一些技术产生不希望的结果。你可以在这里看到一些解释和[列表](http://developer.android.com/guide/topics/graphics/hardware-accel.html)。

幸运的是，其中大多数都有解决方案或解决方法。只需要知道您使用哪种元素来绘制背景。

# java - 用 drawstring() 写一个变量

> ID：10577975
> 
> 赞同：0
> 
> 时间：2012-05-14T05:42:07.450
> 
> 标签：java, graphics, jframe, paint, drawstring

我的程序中的图形有一些问题。我想 drawstring() 在屏幕上绘制一个变量，但是，该变量是从另一个类中给出的。

我所拥有的“大纲”是这样的：

```
public void paint(Graphics g){
    g.drawString(text, sPosX, sPosY);
} 
```

这就是我的绘画方法。我想要另一个类来运行它，同时传递一个文本变量来说明拉绳会说什么。

我不确定如何执行此操作，因为我无法执行类似 gui.paint(null, data) （gui 是类的名称）之类的操作，因为即使我将 (String text) 添加到 paint() 方法，我得到错误。

如果您能提供帮助，将不胜感激。谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-14T05:45:01.070

为您的 GUI 类提供一个带有 setter 的字段，并让您的绘制方法引用该字段。

```
public class GUI extends Component
{
  private String text;

  public void setText(String text)
  {
    this.text = text;
  }

  public void paint(Graphics g)
  {
    g.drawString(this.text, sPosX, sPosY);
  }
} 
```

在你的另一堂课上：

```
gui.setText("Now is the time for all good men"); 
```

# javascript - jquery .empty() 与按键事件冲突

> ID：10577978
> 
> 赞同：2
> 
> 时间：2012-05-14T05:43:03.537
> 
> 标签：javascript, jquery

这意味着允许用户输入一条消息，然后按回车键发送它。这应该清除该框，以便用户可以输入新消息。问题是在 .empty() 事件*之后*发生按 enter 的标准结果（创建换行符） ......所以文本消失并被换行符替换，这是非常不可取的。我该如何规避这个？

```
 $('#messagebox').keypress(function(event) {
        if (event.keyCode == '13') {
            send();
            $('#messagebox').empty();
        }
    }); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-14T05:44:30.120

您可以阻止`keypress`via的默认操作[`event.preventDefault()`](http://api.jquery.com/event.preventDefault/)（或`return false`从您的事件处理函数，它是`preventDefault`+的 jQuery 简写`stopPropagation`）：

[实例](http://jsbin.com/evakew)| [来源](http://jsbin.com/evakew/edit)：

HTML：

```
<p>Pressing Enter will clear the text area below:</p>
<textarea id="messagebox" rows="10" cols="50"></textarea> 
```

JavaScript：

```
jQuery(function($) {

  $("#messagebox").focus().keypress(function(event) {
    if (event.keyCode === 13) {
      $(this).val("");
      event.preventDefault();
    }
  });

}); 
```

* * *

FWIW，我可能会使用[`val`](http://api.jquery.com/val)空字符串而不是[`empty`](http://api.jquery.com/empty)清除文本区域，因为`val`专门用于设置表单字段的值 - 但如果`empty()`对你有用......

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-14T05:46:02.523

```
$('#messagebox').keypress(function(event) {
    if (event.keyCode == '13') {
        event.preventDefault();
        send();
        $(this).empty();
    }
}); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-14T05:55:18.117

[演示](http://jsbin.com/ihitev/edit#javascript,html,live)

```
$('#messagebox').on('keydown',function(e) {
    if (e.which === 13) {
        send();
        $(this).val('');
        e.preventDefault();
    }
}); 
```

# java - Java jar 文件命令行参数

> ID：10577979
> 
> 赞同：-3
> 
> 时间：2012-05-14T05:43:19.457
> 
> 标签：java, jar

我可以附加到标准“java -jar”命令的参数是什么？例如这是一个：

```
java -Xmx1024M -Xms1024M -jar server.jar 
```

“-Xmx1024M -Xms1024M”基本上给了它 1024mb 的 RAM，对吗？我还能在命令中输入什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-14T05:47:19.180

尝试

```
java -help 
```

这将为您提供所有可用选项的列表。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-15T06:22:49.380

这是我发现很有帮助的[参考资料。](http://docs.oracle.com/javase/6/docs/technotes/tools/windows/java.html)

# excel - 将数据刮入Stata

> ID：10577980
> 
> 赞同：0
> 
> 时间：2012-05-14T05:43:24.910
> 
> 标签：excel, scrape, stata

我有 40,000 个 HTML 文件。每个文件都有一个包含特定公司损益表的表格。

我想将所有这些数据刮到 Stata 中。（或者，放入 Excel/CSV 文件）。最终产品应该是一个 Stata/Excel 文件，其中包含所有公司的列表及其资产负债表的详细信息（收入、利润等）

我可以知道如何做到这一点吗？我尝试了 Outwit，但似乎还不够好。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-15T05:37:41.443

Stata 并不是完成这项工作的最佳工具。您必须使用低级`file`命令来读取输入文本文件，然后解析出相关表（同样，使用低级字符串处理）。将它们放入数据集中是最简单的部分；你可以

```
 expand 2 in l
    replace company = "parsed name" in l
    replace revenue = parsed_revenue in l 
```

等等，或者使用`post`力学。运气好的话，你会发现一些可能使它更简单的包，但我不知道有什么，而且`findit html`似乎没有带来任何可用的东西。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-15T20:30:13.133

Stata 不是这项工作的好工具。原则上是可以的。就我个人而言，我已经做过类似的事情：将 ascii 文件读入 Stata，解析它们并从中提取信息。[我已使用insheet](http://www.stata.com/help.cgi?insheet)将数据转储到 Stata 中。然后我用Stata的[字符串函数](http://www.stata.com/help.cgi?string%20functions)处理了数据。这有点麻烦。这些文件的结构非常简单明了。我不想想象当文件具有更复杂的结构时会发生什么。

我认为最好的策略是使用脚本语言，例如 Python、Perl 或 Ruby。提取包含在 html 表中的信息。结果可以很容易地写入 csv、Excel 甚至是 Stata (.dta) 文件。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-11-04T14:24:19.153

你应该使用 Python beautifulsoup 包。从 HTML 文件中提取数据非常方便。以下是链接。

[http://www.crummy.com/software/BeautifulSoup/](http://www.crummy.com/software/BeautifulSoup/)

在文档中，有很多命令，但只有少数命令很重要。以下是重要的命令：

```
from bs4 import BeautifulSoup

#read the file
fp=open(file_name,'r')
data=fp.read()
fp.close()

#pass the data to beautifulsoup
soup = BeautifulSoup(html_doc, 'html.parser')

#extract the html elements by id and write result into file 
```

# google-chrome - Extjs 4 FiltersChrome 中的功能模糊

> ID：10577988
> 
> 赞同：1
> 
> 时间：2012-05-14T05:44:06.683
> 
> 标签：google-chrome, extjs, filter, extjs4

我对 Extjs 4.0.2 有疑问。当我从过滤器（Ext.ux.grid.FiltersFeature）中的文本字段移出鼠标时，我无法在此字段中输入文本。这个问题出现在 Chrome 中，但在 FF 中一切正常。我想继续在过滤器字段中输入文本，而我的鼠标离开它。

# jquery - jQuery UI 可以自动设置样式吗？

> ID：10577993
> 
> 赞同：3
> 
> 时间：2012-05-14T05:44:45.900
> 
> 标签：jquery, jquery-ui

我使用该`.button()`方法来设置按钮和其他输入元素的样式。

但是当我使用 javascript 创建任何其他按钮时，我需要`.button()`再次调用该方法。

jQuery UI 能否像方法一样自动设置样式`.live()`（可以自动设置事件）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-14T05:49:39.957

不幸的是，据我所知，这是不可能的。

如果您发现自己必须在`.button()`任何地方编写代码，请考虑自己编写一个函数来封装该行为。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-14T05:57:48.273

我想说这个小插件会帮助你：

[http://brandonaaron.net/code/livequery/docs](http://brandonaaron.net/code/livequery/docs)

但是我没有任何机会使用最新的 jquery 版本对其进行测试。

# c++ - decltype 是否需要涉及完整类型的表达式？

> ID：10577996
> 
> 赞同：3
> 
> 时间：2012-05-14T05:45:09.370
> 
> 标签：c++, c++11

考虑下面的代码，它试图确定嵌套 typedef 的存在。

```
 #include<type_traits>
  struct foo;// incomplete type
  template<class T> 
  struct seq
  {
       using value_type = T;
  };
  struct no_type{};
  template<class T>
  struct check_type : std::true_type{};
  template<> 
  struct check_type<no_type> :std::false_type{};
  template<class T> 
  struct has_value_type
  {
    template<class U>
    static auto check(U const&)-> typename U:: value_type;
     static auto check(...)->no_type;  
    static bool const value = check_type<decltype(check(std::declval<T>()))>::value;
    using type = has_value_type;
  };
  int main()
  {
      char c[has_value_type<seq<foo>>::value?1:-1];
      (void)c;
  } 
```

现在调用`has_value_type<seq>::value`会导致编译错误，因为无效使用不完整类型`seq<foo>::value_type`。是否`decltype`需要表达式中的完整类型？如果没有，我该如何消除错误？我正在使用 gcc 4.7 进行编译。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-14T09:06:57.943

您的代码是有效的 C++11，它定义了显示为 decltype 操作数的顶级函数调用不会引入临时函数，即使调用是纯右值。

添加此规则是为了使您的代码有效并防止返回类型的实例化（如果它是类模板特化），否则需要确定析构函数的访问限制。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-14T06:09:45.957

`decltype`需要一个有效的表达式，你当然可以有一个涉及不完整类型的有效表达式。但是，您的问题是

```
template<class U>
auto check(U const&) -> typename U::value_type; 
```

`foo`当`U`is时有返回类型`seq<foo>`。您不能按值返回不完整的类型，因此您最终会得到一个格式错误的表达式。您可以使用例如`void_<typename U::value_type>`（带`template<typename T> struct void_ {};`）的返回类型，并且您的测试似乎有效。