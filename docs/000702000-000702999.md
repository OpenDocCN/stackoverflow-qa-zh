# StackOverflow 问答 000702000-000702999

# .net - .Net：嵌套引用

> ID：702000
> 
> 赞同：0
> 
> 时间：2009-03-31T16:54:12.257
> 
> 标签：.net, oop, reference

当涉及到嵌套引用时，垃圾收集有多聪明？

以这段代码为例：

```
Public Class SomeClass
    Private m_SomeOtherClass(Me)
End Class 
```

我知道 GC 通过查看剩余引用的数量来工作，并且任何没有任何引用的对象最终都会被转储。因此，在这种情况下，如果有来自成员变量的引用，那么内存泄漏是否正在等待发生（除非您实现 IDisposable 等）？

现在我假设 GC 对此足够聪明，因为它可能会检查是否有任何引用来自对象本身，而不是将它们计入引用计数。但我想我会挖一点。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2009-03-31T16:58:43.073

绝对没问题。GC 从一组根（本地和静态变量等）工作，并找到它可以找到的所有引用。如果没有其他东西引用这个相互引用的对象，它将有资格被收集。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-03-31T16:59:24.337

GC 足够聪明。如果它们在时间和空间维度上分配得足够近，它甚至会同时收集两个对象；）

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-03-31T17:59:09.700

基本答案：这不是问题。

我以前听过这种问题，它源于与引用计数的混淆，循环引用确实会造成问题。

.NET 收集器不计算引用，它只是扫描和标记引用的对象。这些标志还可以防止它进入循环。这是一个非常简单且几乎万无一失的机制。系统不需要计算或跟踪入站引用，因此短期引用的开销为零。但是你必须留意引用存在的地方，一个常见的问题是订阅事件的对象。该事件保留一个引用，因此您需要在订阅对象被回收之前取消订阅。GC 的另一个好处是逻辑也可以反向工作：只要您的代码可以访问引用，该引用就保证是有效的，仅仅因为该引用存在。

引用计数要求编译器在每次更改、复制或超出范围时注入代码，从而产生持续的开销。当计数降至零时，对象可以立即被销毁。系统需要一种机制来（手动）处理周期。你可以通过搜索COM IUnknown接口找到一些恐怖故事。

# .net - 用于 WinForms (.NET) 的用户友好的异常处理库

> ID：702002
> 
> 赞同：2
> 
> 时间：2009-03-31T16:54:41.273
> 
> 标签：.net, winforms, exception-handling

我正在尝试找到一个不错的库，用于对未处理的异常进行用户友好的异常处理。

我找到了以下一个： http: [//www.codeproject.com/KB/exception/ExceptionHandling.aspx](http://www.codeproject.com/KB/exception/ExceptionHandling.aspx)

是否有任何其他类似的项目 LGPL/免费（或便宜）。

我正在寻找以下功能：

*   用户友好的崩溃屏幕
*   带有确认按钮的远程记录（用户可以通过网络发送错误消息）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-03-31T17:04:25.527

您可以查看Microsoft 模式和实践组提供的[异常处理应用程序块。](http://msdn.microsoft.com/en-us/library/cc309505.aspx)我认为它能够做你需要的一切，甚至更多。

# c++ - （*这个）[我]？

> ID：702003
> 
> 赞同：1
> 
> 时间：2009-03-31T16:55:13.537
> 
> 标签：c++, syntax

我在课堂上重载了 [] 运算符。除了在我的课堂上调用这个函数还有更好的方法`(*this)[i]`吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2009-03-31T16:57:26.243

好吧，你可以使用“operator[](i)”。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2009-03-31T17:00:10.153

在（size_t i）处添加函数并使用此函数

**编辑**
如果您积极使用 stl 避免语义不一致： in`std::vector operator[]`不检查索引是否有效，但 at(..) 检查并可能引发`std::out_of_range`异常。我认为在您的班级中会有更多类似行为的项目。
也许这个名字不是这个功能的最佳名字。

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2009-03-31T16:59:18.097

不好，但明确：

```
this->operator[](i) 
```

如果您发现需要做很多事情，请创建一个 At() 函数，该函数与 operator[] 完全一样。然后你可以说：

```
this->At(i) 
```

* * *

## 回答 #4

> 赞同：6
> 
> 时间：2009-03-31T17:05:31.920

这可能是一个合理的妥协：

```
T& me = *this;

// ...

me[i]; 
```

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2009-03-31T17:14:55.703

既然您正在从自己的类中访问某些内容，为什么不直接使用私有函数，命名为您认为合适的名称：

```
class MyClass
{
    private:
        SomeType& Item(int index) { /* return a value */ }
    public:
        SomeType& operator[](int index) { return Item(index); }
        void SomeFunction(void);
}

void myClass::SomeFunction(void)
{
    SomeType localVar = Item(42); // internal access
}

int main(int argCount, char ** argList)
{
    MyClass myClass;
    SomeType x;

    x = myClass[42]; // external access

    return 0;
} 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2009-03-31T17:04:08.910

`this->[i]`甚至不编译。唯一的其他选择是`this->operator[](i)`.

# wcf - 我可以/应该使用模拟框架将事件动态添加到类吗？

> ID：702004
> 
> 赞同：1
> 
> 时间：2009-03-31T16:55:19.447
> 
> 标签：wcf, events, mocking, callback, factory

考虑以下接口：

```
public interface IMyCallback
{
  void SomeEvent(int someArg);
} 
```

这是将从 WCF 服务接收“事件”的 WCF 回调的合同。我对此接口的实现如下所示

```
public class MyCallback : IMyCallback
{
  void IMyCallback.SomeEvent(int someArg)
  {
    OnSomeEvent(someArg);
  }

  protected virtual void OnSomeEvent(int someArg)
  {
    EventHandler<SomeEventArgs> handler = this.SomeEvent;

    if (handler != null)
    {
      handler(this, new SomeEventArgs(someArg));
    }
  }

  public event EventHandler<SomeEventArgs> SomeEvent;
} 
```

这允许我在客户端代码中实例化回调并挂钩 SomeEvent 事件。每当服务器调用我的回调时，我都会收到一个普通的旧 .NET 事件。一切都很好。

问题来了：我想写一个工厂类来自动创建这个回调，所以我很容易在我的所有项目和任何接口中重用这种方法。工厂将被称为：

```
var myCallback = CallbackFactory.CreateCallback<IMyCallback>(); 
```

我可以/应该使用模拟框架来动态创建这个类，还是应该硬着头皮直接发出 IL？还是我应该只手动编写每个实现的代码？还是有另一种我没有想到的方法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-03-31T17:15:37.650

您可以使用[Castle Project 的 DynamicProxy](http://castleproject.org/dynamicproxy/index.html)，它应该为您提供生成代理所需的所有基础设施。那么您不必担心发出 IL，如果操作不当，可能会产生令人讨厌的副作用。

我不知道在使用代理时您想如何附加到用户代码中的事件，仅仅是因为您的 IMyCallback 没有实际事件，只有调用的事件。还是我误解了你的问题？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-03-31T17:15:43.080

我认为使用模拟框架很好。从本质上讲，模拟/存根框架只不过是一种为已知输入轻松提供类型定义实现的方法。

既然这正是你在这里所做的，我说那就去吧。

# php - 从单词列表中自动链接页面文本中的关键字

> ID：702006
> 
> 赞同：0
> 
> 时间：2009-03-31T16:55:24.550
> 
> 标签：php, mysql, automation

我的网站有很多动态统计数据，其中包含人名、地点和主题，它们都有自己的关联页面。我想根据我在“单词”和“链接”的 MySQL 数据库中设置的数据自动将每个链接到他们的页面。

自动链接 20-50 次可能出现的 15-20,000 个关键字和链接的有效方法是什么？我正在使用 MySQL 和 PHP。

[这是 C++ 的类似查询](https://stackoverflow.com/questions/154365/search-25-000-words-within-a-text)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-03-31T17:20:14.863

通常，您希望尽可能少地进行这种链接搜索，因为没有特别有效的方法可以做到这一点。您没有具体说明您的站点上有哪些类型的数据，但我假设它类似于 wiki 或博客。我将讨论这种功能，就像它为 wiki 所做的那样，但类似的方法适用于任何事情。

使用 wiki，您只想在页面更改（或首先提交）时进行链接搜索。请注意，必须以两种不同的方式处理链接。首先，当创建或编辑页面时，您需要搜索该页面的文本以确定其中应该包含哪些链接。其次，每当创建、重命名或删除任何页面时，您都需要（除了在创建的情况下搜索此页面）搜索所有其他页面以根据需要添加/更新/删除链接。如何存储这些链接有几个选项。

一种选择是在数据库中保留每个页面文本的两个“版本”。一个版本是原始的“标记”版本，这是您实际输入的内容，如果您选择编辑页面将显示什么内容。第二个版本是解析/处理的“显示”版本。这是用于向普通查看者显示页面的数据。

例如，如果您的粗体 wiki 标记是`**`，则“标记版本”具有`**bold text**`，而“显示版本”具有`<strong>bold text</strong>`。这样您就不必在每个页面视图上处理您的标记。

这种方法适用于页面链接，方法是搜索提交的文本以查找应链接的单词，并将这些链接放入“显示版本”。例如，当一个页面被提交时，你会逐步检查页面文本中的每个单词，并将其与“链接单词”列表进行比较（确保你已经缓存了这个列表，你不想做数据库查询每个字）。这可以通过将潜在的链接词作为键存储到散列中来变得相当有效。如果正在测试的单词在“链接单词”列表中，那么当您将其复制到“显示版本”文本中时，您会在该单词周围放置一个指向相关页面的链接。如果不是，您只需输入单词，就像在“标记版本”中一样。

关于如何实现这一点还有其他一些选项，但这是一个相当简单的选项。我暂时把它留给你，但如果你想让我描述任何其他选项，请在评论中告诉我，我会编辑它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-03-31T17:11:34.853

也许是[雪球的](http://snowball.tartarus.org/)[PHP 包装器？](http://pecl.php.net/package/stem)

# powershell - 无法在 PowerGUI 中启动调试器

> ID：702012
> 
> 赞同：0
> 
> 时间：2009-03-31T16:56:23.033
> 
> 标签：powershell, powergui

我正在使用 PowerGUI 脚本编辑器 1.7.1.702，并尝试启动调试器，但我收到这样的错误消息：

> 找不到名称为“Remove-PSBreakPoint -BreakPoint $bE4078E3092DF4dd9A469F3DC0CBB505C;Remove-Variable vE4078E3092DF4dd9A469F3DC0CBB505C;Remove-Variable bE4078E3092DF4dd9A469F3DC0CBB505C;

这发生在这一行：

```
Write-Host $MyInvocation.MyCommand.Definition 
```

我正在使用 PowerShell v2。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2010-01-05T22:04:41.977

请在此处升级到 PowerShell 2.0 的 RTM 版本：http: [//support.microsoft.com/kb/968929](http://support.microsoft.com/kb/968929)

# cocoa - NSTimer 中的代码可防止自动睡眠

> ID：702022
> 
> 赞同：8
> 
> 时间：2009-03-31T16:58:10.547
> 
> 标签：cocoa, macos, sleep

我`NSTimer`在我的应用程序中运行，它收集一些数据并定期将其发送到服务器。在生产中，计时器将每隔几个小时触发一次。

我担心干扰自动睡眠。在测试中，定时器和睡眠时间的某些组合完全阻止了自动睡眠——显示器睡眠，系统继续运行。将 my 设置`NSTimer`为一分钟总是会停止它。

一些 Mac 应用程序因在运行时干扰自动睡眠而臭名昭著（或者一直干扰，如果它们安装了守护程序）。哪些操作可以阻止系统休眠以及如何安全地运行定期任务？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2011-08-11T17:05:09.383

`NSLog()`，至少在登录到时`/var/log/system.log`，可以防止空闲睡眠。我使用每分钟调用一次的启动守护程序进行测试，`NSLog(@"test")`系统睡眠空闲时间为 1 分钟，系统从未进入睡眠状态。通过注释掉 NSLog 行，系统在 1 分钟后进入睡眠状态。

这是我找到的其他遇到此问题的人的[唯一参考。](https://discussions.apple.com/thread/2336938?start=0&tstart=0)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-05-15T17:48:50.633

根据 Apple 的文章“ [Mac OS X：为什么您的 Mac 可能无法睡眠或保持睡眠模式](http://support.apple.com/kb/HT1776)”，访问磁盘将阻止您的计算机进入睡眠状态。

此外，我的测试表明，线程的优先级也会影响计算机是否会休眠。以下带有计时器的代码将允许计算机进入睡眠状态。

```
@implementation AppController

-(void)timerFired:(NSTimer *)aTimer
{

}

-(void)spawnThread
{
   NSAutoreleasePool *pool = [[NSAutoreleasePool alloc] init];
   [NSThread setThreadPriority:0.0];

   [NSTimer scheduledTimerWithTimeInterval:20 target:self selector:@selector(timerFired:) userInfo:nil repeats:YES];

   while(1) //Run forever!
   {
      [[NSRunLoop currentRunLoop] runUntilDate:[NSDate dateWithTimeIntervalSinceNow:300]];
   }

   [pool drain];
}

-(void)awakeFromNib
{
   [NSThread detachNewThreadSelector:@selector(spawnThread) toTarget:self withObject:nil];
}

@end 
```

删除 setThreadPriority 调用将阻止计算机进入睡眠状态。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-04-03T04:06:59.657

我有点困惑，请耐心等待。=)

您的应用程序的活动将重置机器的睡眠计时器，因此除非传输之间的延迟大于不活动时间，否则机器将不会进入睡眠状态。我不完全确定在 OS X 上将什么归类为“活动”，但如果它与 Linux 类似，我希望网络或磁盘 IO 将与处于运行状态的进程一样计算 - 也就是说，处理数字或混洗数据在内存中。

此外，如果系统确实进入睡眠状态，您是否希望机器唤醒以便您的应用程序可以与远程主机通信？

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-04-02T03:21:34.320

你看过launchd吗？[http://developer.apple.com/MacOsX/launchd.html](http://developer.apple.com/MacOsX/launchd.html)

这是操作系统用于其自身服务的内容，因此我确信睡眠已被考虑在内。

# iphone - UITabBarController UINavigationController 内部的内存管理问题

> ID：702042
> 
> 赞同：0
> 
> 时间：2009-03-31T17:02:26.653
> 
> 标签：iphone, memory-management, uitabbarcontroller

我必须在 UINavigationController 中使用 UITabBarController。一切似乎都是正确的，但是如果我记录选项卡的 dealloc 调用，就会发生一些奇怪的事情。

如果我不触摸后退按钮，则会调用每个选项卡的所有 dealloc。如果我切换到任何其他选项卡，然后点击后退按钮，则不会调用第一个选项卡的 dealloc，但其他选项卡会。

这有什么问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2009-03-31T17:08:32.207

看看[这个 SO question](https://stackoverflow.com/questions/576764/tab-bar-controller-inside-a-navigation-controller-or-sharing-a-navigation-root-v)。基本上，导航控制器内的标签栏控制器不受官方支持，但您可以通过使用没有 UITabBarController 的标签栏来模仿行为。

# asp.net - MS .Net 2.0 框架 Oracle 数据提供者还是 Oracle 9i/10g/11g 数据提供者？

> ID：702046
> 
> 赞同：2
> 
> 时间：2009-03-31T17:03:09.443
> 
> 标签：asp.net, oracle, asp.net-2.0

对于那些熟悉该主题的人（并希望面临类似的情况），您能否就哪个提供商最适合 ASP.net 2.0 框架应用程序发表您的意见？

我正在寻找的要点是：

1.  表现
2.  功能性

从我在网上收集的信息来看，Oracle 提供的数据提供程序似乎提供了更好的性能和功能，但您需要安装和设置客户端/服务器软件，这可能很麻烦。

提前感谢你的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-03-31T17:12:26.427

你几乎回答了你自己的问题。Oracle ODP 提供更多功能（虽然我不确定性能），而 Microsoft ODP 提供更简单的部署。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-03-31T17:15:14.860

我发现使用 odp.net 驱动程序进行批量插入的能力非常有用。它允许您将参数数组传递给存储过程以执行批量 crud 操作。

所以我想从性能和功能的角度来看这是值得的。

如果您也打算使用它，我不确定 odp.net 驱动程序是否适用于 Enterprise Library。

# msbuild - 是否可以将 Ocracoke 负载测试集成为 MSBuild 的一部分？

> ID：702049
> 
> 赞同：0
> 
> 时间：2009-03-31T17:04:13.887
> 
> 标签：msbuild, ocracoke

我希望我的负载测试作为我的构建的一部分运行。我可以用 Ocracoke 做到这一点吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2010-11-12T05:14:15.760

我对 Ocracoke 了解不多，但你为什么不看看 Visual Studio 呢？

# xslt - XSLT：合并一组树层次结构

> ID：702052
> 
> 赞同：2
> 
> 时间：2009-03-31T17:04:25.743
> 
> 标签：xslt, grouping, hierarchy, merge

我有一个基于 Excel 在另存为“XML Spreadsheet 2003 (*.xml)”时生成的 XML 文档。

电子表格本身包含一个带有标签层次结构的标题部分：

```
| ABCDEFGHI
-+------------------------------------------------ -----
1| a1 a2
2| a11 a12 a13 a21 a22
3| a111 a112 a121 a122 a131 a132 a221 a222

```

此层次结构存在于工作簿中的所有工作表上，并且在任何地方看起来或多或少都相同。

Excel XML 的工作方式与普通的 HTML 表格完全一样。( `<row>`s 包含`<cell>`s)。我已经能够将所有内容转换为这样的树形结构：

```
<node title="a1" col="1">
  <node title="a11" col="1">
    <node title="a111" col="1"/>
    <node title="a112" col="2"/>
  </node>
  <node title="a12" col="3">
    <node title="a121" col="3" />
    <node title="a122" col="4" />
  </node>
  <!-- and so on -->
</node> 
```

但这里是复杂的：

*   有多个工作表，因此每个工作表都有一棵树
*   每个工作表上的层次结构可能略有不同，树将不相等（例如，工作表 2 可能有“a113”，而其他工作表没有）
*   树的深度没有明确限制
*   然而，标签在所有工作表中都是相同的，这意味着它们可以用于分组

我想将这些单独的树合并成一个看起来像这样的树：

```
<node title="a1">
  <col on="sheet1">1</col>
  <col on="sheet2">1</col>
  <node title="a11">
    <col on="sheet1">1</col>
    <col on="sheet2">1</col>
    <node title="a111">
      <col on="sheet1">1</col>
      <col on="sheet2">1</col>
    </node>
    <node title="a112">
      <col on="sheet1">2</col>
      <col on="sheet2">2</col>
    </node>
    <node title="a113"><!-- different here -->
      <col on="sheet2">3</col>
    </node>
  </node>
  <node title="a12">
    <col on="sheet1">3</col>
    <col on="sheet2">4</col>
    <node title="a121">
      <col on="sheet1">3</col>
      <col on="sheet2">4</col>
    </node>
    <node title="a122">
      <col on="sheet1">4</col>
      <col on="sheet2">5</col>
    </node>
  </node>
  <!-- and so on -->
</node> 
```

理想情况下，我希望能够在我什至从 Excel XML 构建三个结构*之前*进行合并（如果你让我开始这样做，那就*太好了*）。但是由于我不知道我将如何做到这一点，所以在构建树之后进行合并（即：上述情况）就可以了。

谢谢你的时间。:)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-04-01T04:20:28.163

**这是 XSLT 1.0 中一种可能的解决方案**：

```
<xsl:stylesheet version="1.0"
 xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
 <xsl:output omit-xml-declaration="yes" indent="yes"/>

    <xsl:template match="/*">
      <t>
        <xsl:apply-templates
           select="node[@title='a1'][1]">
          <xsl:with-param name="pOther"
            select="node[@title='a1'][2]"/>
        </xsl:apply-templates>
      </t>
    </xsl:template>

    <xsl:template match="node">
      <xsl:param name="pOther"/>

      <node title="{@title}">
        <col on="sheet1">
          <xsl:value-of select="@col"/>
        </col>
          <xsl:choose>
            <xsl:when test="not($pOther)">
              <xsl:apply-templates mode="copy">
                <xsl:with-param name="pSheet" select="'sheet1'"/>
              </xsl:apply-templates>
            </xsl:when>
            <xsl:otherwise>
              <col on="sheet2">
                <xsl:value-of select="$pOther/@col"/>
              </col>
              <xsl:for-each select=
                "node[@title = $pOther/node/@title]">

                <xsl:apply-templates select=".">
                  <xsl:with-param name="pOther" select=
                   "$pOther/node[@title = current()/@title]"/>
                </xsl:apply-templates>
              </xsl:for-each>

              <xsl:apply-templates mode="copy" select=
                "node[not(@title = $pOther/node/@title)]">
                <xsl:with-param name="pSheet" select="'sheet1'"/>
              </xsl:apply-templates>

              <xsl:apply-templates mode="copy" select=
                "$pOther/node[not(@title = current()/node/@title)]">
                <xsl:with-param name="pSheet" select="'sheet2'"/>
              </xsl:apply-templates>
            </xsl:otherwise>
          </xsl:choose>
      </node>
    </xsl:template>

    <xsl:template match="node" mode="copy">
      <xsl:param name="pSheet"/>

      <node title="{@title}">
        <col on="{$pSheet}">
          <xsl:value-of select="@col"/>
        </col>

        <xsl:apply-templates select="node" mode="copy">
          <xsl:with-param name="pSheet" select="$pSheet"/>
        </xsl:apply-templates>
      </node>
    </xsl:template>
</xsl:stylesheet> 
```

**当对这个 XML 文档应用上述转换时**（两个 XML 文档在一个公共顶部节点下的连接——留给读者作为练习:)）：

```
<t>
    <node title="a1" col="1">
        <node title="a11" col="1">
            <node title="a111" col="1"/>
            <node title="a112" col="2"/>
        </node>
        <node title="a12" col="3">
            <node title="a121" col="3" />
            <node title="a122" col="4" />
        </node>
        <!-- and so on -->
    </node>
    <node title="a1" col="1">
        <node title="a11" col="1">
            <node title="a111" col="1"/>
            <node title="a112" col="2"/>
            <node title="a113" col="3"/>
        </node>
        <node title="a12" col="4">
            <node title="a121" col="4" />
            <node title="a122" col="5" />
        </node>
        <!-- and so on -->
    </node>
</t> 
```

产生了想要的结果：

```
<t>
    <node title="a1">
        <col on="sheet1">1</col>
        <col on="sheet2">1</col>
        <node title="a11">
            <col on="sheet1">1</col>
            <col on="sheet2">1</col>
            <node title="a111">
                <col on="sheet1">1</col>
                <col on="sheet2">1</col>
            </node>
            <node title="a112">
                <col on="sheet1">2</col>
                <col on="sheet2">2</col>
            </node>
            <node title="a113">
                <col on="sheet2">3</col>
            </node>
        </node>
        <node title="a12">
            <col on="sheet1">3</col>
            <col on="sheet2">4</col>
            <node title="a121">
                <col on="sheet1">3</col>
                <col on="sheet2">4</col>
            </node>
            <node title="a122">
                <col on="sheet1">4</col>
                <col on="sheet2">5</col>
            </node>
        </node>
    </node>
</t> 
```

**请注意**以下事项：

1.  我们假设两个顶级`node`元素都具有`"a1"`其`title`属性的值。这很容易概括。

2.  模板匹配`node`有一个名为 的参数，它是从另一个文档中`pOther`命名的相应元素。`node`仅当 $`pOther`存在时才应用此模板。

3.  当不存在名为的对应元素`node`时，将应用另一个模板，也匹配`node`，但处于模式`copy`中。该模板有一个名为 的参数`pSheet`，其值为该元素所属的工作表名称（字符串）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-03-31T18:21:08.617

一个以工作表编号作为参数的可调用模板如何检查输入并返回正确的“col”节点，如果它出现在该工作表的 XML 中，如果没有，则返回任何内容。在每个节点上，为每个工作表调用一次。

为了合并树，可能是一个模板，它在任何工作表中查找当前节点的所有子节点，并为每个子节点递归。

抱歉没有示例代码，我发现编写 XSLT 很慢，可能是因为我不经常这样做。所以我很可能错过了一些重要的事情。但是把它们放在一起会得到类似的东西：

*   获取“/node”的标题。有了这个标题：
    *   在所有工作表中搜索此标题，为每个工作表发出“col”节点
    *   在所有工作表中搜索具有此标题的节点的子节点（丢弃重复项）
    *   递归每个标题。

以下是一些用于以各种方式删除重复项的片段：

[http://www.dpawson.co.uk/xsl/sect2/N2696.html](http://www.dpawson.co.uk/xsl/sect2/N2696.html)

读取多个文档是依赖于处理器的，但是如果所有其他方法都失败了，使用任何旧的脚本语言可能会做一些剪切和粘贴，前提是您知道它们都将具有相同的编码，不要使用冲突的 id，等等。

# mstest - PartCover 控制台生成空输出 xml

> ID：702071
> 
> 赞同：5
> 
> 时间：2009-03-31T17:09:23.593
> 
> 标签：mstest, partcover

我正在使用 partcover 为一堆 mstest 供电的单元测试生成代码覆盖率。

我使用命令行：

```
PartCover.exe --target "c:\Program Files\Microsoft Visual Studio 9.0\Common7\IDE\MSTest.exe" --target-args "/testcontainer:c:\CrusieControlProjects\AcademyPro\AcademyTests\bin\Release\AcademyTests.dll" --include [AcademyPro*]* 
```

这运行，所有测试通过，但我最终得到输出：

```
Results file:      C:\Program Files\Gubka Bob\PartCover .NET 2.3\TestResults\Administrator_PSLV22 2009-03-31 17_54_18.trx
Run Configuration: Default Run Configuration
Target PageFaultCount: 10565
Target PagefileUsage: 27631616
Target PeakPagefileUsage: 31297536
Target PeakWorkingSetSize: 31498240
Target QuotaNonPagedPoolUsage: 8180
Target QuotaPagedPoolUsage: 217124
Target QuotaPeakNonPagedPoolUsage: 13012
Target QuotaPeakPagedPoolUsage: 255524
Target WorkingSetSize: 30310400
request target shutdown
<PartCoverReport date="2009-03-31T18:00:36.7676250+01:00" /> 
```

当我使用 --output 命令运行时，xml 文件最终只有

```
<PartCoverReport date="2009-03-31T18:00:36.7676250+01:00" /> 
```

为什么会发生这种情况？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2009-03-31T20:21:09.890

为了解决这个问题，我最终降级了。

我使用的是 2.3 版（这是一个开发版本）并切换到 2.2 版。

现在测试运行良好，我得到了合理的覆盖率数据。

也许这会帮助某人。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2009-10-05T19:28:55.013

我在 x64 上遇到了与 NUnit 类似的问题。问题是我使用的是 nunit-console.exe (AnyCPU)。切换到 nunit-console-x86.exe（显式 32 位）解决了这个问题。

我无法使用 MSTest 访问环境，但如果您引用的可执行文件是 AnyCPU，您可能会在系统上寻找它的明确 32 位版本。最坏的情况，您可以使用 CorFlags 创建一个。

# iframe - iframe中从子到父的跨域访问

> ID：702074
> 
> 赞同：12
> 
> 时间：2009-03-31T17:11:01.390
> 
> 标签：iframe, cross-domain

当 iframe 中加载的页面来自另一个域时，我们如何从 iframe 中加载的文档访问父文档？

我收到权限被拒绝错误。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2009-07-05T13:24:47.293

如果您可以控制这两个文档，那么您可以轻松地使用 easyXDM ( [http://easyxdm.net](http://easyxdm.net) ) 在它们之间进行通信。可以在[http://consumer.easyxdm.net/current/example/methods.html找到一个简单易用的使用示例](http://consumer.easyxdm.net/current/example/methods.html)

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2009-03-31T17:25:08.440

这个相当古老的博客文章似乎正在解决这个问题：http: [//jszen.blogspot.com/2005/03/cross-domain-security-woes.html](http://jszen.blogspot.com/2005/03/cross-domain-security-woes.html)

[http://radio.javaranch.com/pascarello/2005/12/30/1135962460818.html](http://radio.javaranch.com/pascarello/2005/12/30/1135962460818.html)强调了如果允许跨域 javascript 的一些风险。

所以权限被拒绝错误是正确的。

# c# - 为什么我的 HttpWebRequest 返回 400 Bad request？

> ID：702079
> 
> 赞同：8
> 
> 时间：2009-03-31T17:12:06.427
> 
> 标签：c#, httpwebrequest

以下代码因 400 bad request 异常而失败。我的网络连接良好，我可以访问该站点，但无法通过 HttpWebRequest 获取此 uri。

```
private void button3_Click(object sender, EventArgs e)
{
    WebRequest req = HttpWebRequest.Create(@"http://www.youtube.com/");
    try
    {
        //returns a 400 bad request... Any ideas???
        WebResponse response = req.GetResponse();
    }
    catch (WebException ex)
    {
        Log(ex.Message);                
    }
} 
```

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2009-03-31T17:19:46.457

首先，将 WebRequest 转换为 HttpWebRequest，如下所示：

```
HttpWebRequest req = (HttpWebRequest)HttpWebRequest.Create(@"http://www.youtube.com/"); 
```

然后，添加这行代码：

```
req.UserAgent = "Mozilla/4.0 (compatible; MSIE 6.0; Windows NT 5.1; SV1; .NET CLR 1.1.4322; .NET CLR 2.0.50727)"; 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2009-03-31T17:21:43.470

在**HttpWebRequest**中设置**UserAgent**和**Referer**：

 **```
var request = (HttpWebRequest)WebRequest.Create(@"http://www.youtube.com/");
request.Referer = "http://www.youtube.com/"; // optional
request.UserAgent =
    "Mozilla/4.0 (compatible; MSIE 8.0; Windows NT 6.0; WOW64; " +
    "Trident/4.0; SLCC1; .NET CLR 2.0.50727; Media Center PC 5.0; " +
    ".NET CLR 3.5.21022; .NET CLR 3.5.30729; .NET CLR 3.0.30618; " +
    "InfoPath.2; OfficeLiveConnector.1.3; OfficeLivePatch.0.0)";
try
{
    var response = (HttpWebResponse)request.GetResponse();
    using (var reader = new StreamReader(response.GetResponseStream()))
    {
        var html = reader.ReadToEnd();
    }
}
catch (WebException ex)
{
    Log(ex);
} 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2009-03-31T17:16:27.180

这个问题可能有很多原因。你有更多关于 WebException 的细节吗？

我之前遇到的一个原因是您的用户代理字符串错误。一些网站（例如谷歌）检查请求是否来自已知的用户代理，以防止自动机器人访问他们的页面。

事实上，您可能需要检查 YouTube 的用户协议是否禁止您做您正在做的事情。如果是这样，那么您正在做的事情可能会通过经过批准的渠道（例如 Web 服务）更好地完成。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2009-03-31T17:14:30.383

也许你有一个代理服务器正在运行，而你还没有设置 HttpWebRequest 的 Proxy 属性？

# asp.net-mvc - 带有 IIS 7 的 asp.net mvc url 上的斜杠

> ID：702088
> 
> 赞同：7
> 
> 时间：2009-03-31T17:14:30.913
> 
> 标签：asp.net-mvc, iis, iis-7

我在 IIS 7 / windows 2008 服务器上使用 asp.net MVC。

问题是 asp.net mvc 生成的 url 末尾没有斜线，例如：[http://site.com/category/asp](http://site.com/category/asp)。单击此 url 时，IIS 7 可能认为它是一个目录并发出 302 重定向到[http://site.com/category/asp/](http://site.com/category/asp/)（带有结尾斜杠）。我该如何改变这个？我不想要额外的重定向过热。这不会发生在 Visual Studio Web 服务器上。nerddinner.com 上也不会发生。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-03-31T17:19:41.963

您可能可以在 IIS7 中使用 URL 重写来提供帮助。看看 Scott Hanselman 写的关于这个问题的文章：

[http://www.hanselman.com/blog/ASPNETMVCAndTheNewIIS7RewriteModule.aspx](http://www.hanselman.com/blog/ASPNETMVCAndTheNewIIS7RewriteModule.aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-03-31T22:01:08.603

我认为这不是方法，因为 Visual Studio 上的 Web 服务器不使用重写，并且 url 在那里工作，没有 302 重定向。另外，我不认为 nerddinner.com 正在使用 IIS 重写..

谢谢

# java - 帮我运行这个 netbeans 快速入门程序

> ID：702089
> 
> 赞同：1
> 
> 时间：2009-03-31T17:14:45.767
> 
> 标签：java, netbeans

我是使用 java 和 netbeans 的新手。我想做一个swing gui，我已经按照这个步骤（[http://www.netbeans.org/kb/60/java/quickstart-gui.html#top](http://www.netbeans.org/kb/60/java/quickstart-gui.html#top)）但是当我运行它时，什么都没有发生，我没有什么都看不见。

我应该在这里填写什么？

```
public void main (string args[]) {

    ???????????????

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-11-26T03:16:39.833

这很常见。在创建项目页面下，有一个通常被遗漏的步骤，即**确保选中设置为主项目复选框并清除创建主类字段。**

原因：如果你不按照这一步，程序会正确编译，但是你不会出现窗口，因为程序正在愉快地执行主类然后退出。

修复：您可以通过右键单击项目删除 Main.java 类，然后删除来解决此问题。如果您重新编译程序，您将收到一个对话框，提示您将 CelsiusConverterGUI 设置为该项目的主类，如教程中所述。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-06-22T04:42:24.657

如果您已按照链接教程中的说明进行操作，则该项目不应有 Main 类。在创建项目步骤的第 5 步中，您应该清除了创建主类复选框。

*确保选中 Set as Main Project 复选框并清除 Create Main Class 字段。*

我建议您重新启动教程并重试。祝你好运。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-03-31T17:25:29.280

这是应用程序的入口点，或者是 Java 调用以启动应用程序的第一件事。您可能应该在这里创建您的类的新实例。我看到它被称为 ContactEditor 所以如果你把它命名为这个你应该能够做到：

```
ContactEditor contactEditor = new ContactEditor(); 
```

在此之后，您可能需要在该类中调用一个方法，但除非您发布您当前拥有的源代码，否则我无法帮助您。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-03-31T17:27:35.063

也许你应该从这里开始：http: [//www.netbeans.org/kb/docs/java/quickstart.html](http://www.netbeans.org/kb/docs/java/quickstart.html)

# javascript - 学习入门级 Javascript 的最佳网站？

> ID：702094
> 
> 赞同：1
> 
> 时间：2009-03-31T17:15:32.253
> 
> 标签：javascript

学习入门级 Javascript 的最佳网站是什么？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2009-03-31T17:17:19.630

[www.w3schools.com](http://www.w3schools.com)有很多关于 Javascript 和 DOM 的信息。他们甚至有一个在线教程/示例，允许您修改示例并重新运行它以尝试您的新 Javascript 技能。

**注意：**并非所有内容都没有错误。尽管如此，它还是非常有用的。如需其他意见，请参阅[http://w3fools.com](http://w3fools.com)。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2009-04-01T17:40:36.977

拧w3schools ......认真。

前往 yahoo 开发者网络，学习真正的 js。

[http://developer.yahoo.com/yui/theater/](http://developer.yahoo.com/yui/theater/)

并从 Crockford 视频中学习 JS。这将节省您的时间。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2011-09-24T08:13:45.793

Code Academy 是一个很棒的学习 Javascript 的网站。

[http://www.codecademy.com/](http://www.codecademy.com/)

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2009-03-31T17:19:34.787

[www.w3schools.com](http://www.w3schools.com)有很棒的教程，而[www.jslint.com](http://www.jslint.com)将帮助您学习最佳实践（并省去一些麻烦）。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2009-08-27T11:32:11.630

[Sitepoint](http://www.sitepoint.com/)是一个非常棒的网站，可提供所有与网络相关的书籍、文章和博客。它也有非常活跃的讨论论坛。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2009-04-01T17:47:43.077

网站很好，但我建议手头有一本好书。Simply Javascript (ISBN 0-9802858-0-1) 是 Site Point 的一本优秀书籍。其他是 O'Reilly 上的 Head First Javascript，以及 Friends of ED 上的 DOM Scripting（如果您正在寻找操纵浏览器 UI）

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2009-05-16T16:42:06.087

我最近一直在使用一个关于在 java 中开发 GUI 的网站，这是我想学习并找到这个网站 ( [http://www.macs.hw.ac.uk/guidebook/](http://www.macs.hw.ac.uk/guidebook/) ?) 经过几个小时的阅读和学习，我学会了如何开发我的第一个 GUI，这是一个使用四位数 int 字符串打开它的安全密码板。该站点非常易于理解，作者为您提供了很好的代码示例。我知道有更简单的方法来开发 GUI，但现在我只想对它们有一个基本的了解，这就是这个网站所做的。它教您有关 JPanel、JLabels 以及制作漂亮 GUI 所需的所有其他知识。自从我开始学习 Java 以来，我发现最好使用不同的站点，因为我还没有找到一个可以教你一切的站点。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2009-08-27T11:15:38.497

[**JavaScript 简介**](http://www.howtocreate.co.uk/tutorials/javascript/introduction)

* * *

## 回答 #9

> 赞同：-4
> 
> 时间：2009-04-01T17:42:16.037

您应该跳过所有基础知识并学习 jQuery API。

# c - 如何获取库函数的内存位置？

> ID：702097
> 
> 赞同：2
> 
> 时间：2009-03-31T17:15:59.663
> 
> 标签：c, memory-management, linker, sparc, rtems

我正在使用 SPARC RTEMS C 编译器编译 C 程序。

使用 Xlinker -M 选项，我可以获得一个包含很多我不认识的东西的大内存映射。

我还尝试使用 RCC nm 实用程序，它返回一个更易读的符号表。我假设这个实用程序为 printf 提供的位置是 printf 在内存中的位置，并且每个调用 printf 的程序都将在执行期间到达该位置。这是一个有效的假设吗？

有没有办法获取所有库/系统功能的位置列表？此外，当链接完成时，它是只链接可执行文件调用的函数，还是链接库中的所有函数？考虑到我在符号表和内存映射中找到的东西的数量，在我看来是后者。我可以让它只链接所需的功能吗？

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2009-03-31T17:24:01.047

大多数情况下，当使用动态库时，该`nm`实用程序将无法为您提供准确的答案。如今的二进制文件使用所谓的可重定位地址。这些地址在映射到进程的地址空间时会发生变化。

> 使用 Xlinker -M 选项，我可以获得一个包含很多我不认识的东西的大内存映射。

链接器映射通常包含所有符号——您的、标准库、运行时挂钩等。

> 有没有办法获取所有库/系统功能的位置列表？

标题是查看的好地方。

> 此外，当链接完成时，它是只链接可执行文件调用的函数，还是链接库中的所有函数？

链接并不一定意味着所有符号都将被解析（即给定地址）。这取决于您正在创建的二进制文件的类型。

但是，像 gcc 这样的一些编译器确实允许您是否创建不可重定位的二进制文件。（对于 gcc，您可以查看 exp 文件、dlltool 等。）检查相应的文档。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-03-31T20:26:04.480

使用动态链接， 1\. 您的可执行文件对所有外部调用（PLT 表）有一个特殊的位置。2\. 你的可执行文件有一个它依赖的库列表

这两件事是独立的。不可能说哪个外部函数存在于哪个库中。

当程序执行外部函数调用时，实际发生的情况是它调用 PLT 表中的一个条目，该条目会跳转到动态加载程序。动态加载器查看调用了哪个函数（通过 PLT），查看它的名称（通过可执行文件中的符号表）并在所有映射的库中查找该名称（所有给定的可执行文件都依赖）。一旦找到名字，就将对应函数的地址写回PLT，所以下次调用直接绕过动态链接器。

要回答您的问题，您应该做与动态链接器相同的工作：获取依赖库的列表，并查找其中的所有名称。这可以使用“nm”或“readelf”实用程序来完成。

至于静态链接，我认为 libXXX.a 中给定目标文件中的所有符号都会被链接。例如，静态库 libXXX.a 由目标文件 ao、bo 和 co 组成，如果你需要一个函数 foo()，它驻留在在 ao 中，然后 ao 将链接到您的应用程序 - 连同函数 foo() 和其中定义的所有其他数据。这就是例如 C 库函数按文件拆分的原因。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-05-16T20:12:52.900

如果要动态链接，请使用 dlopen/dlsym 来解析 UNIX .so 共享库入口点。

[http://www.opengroup.org/onlinepubs/009695399/functions/dlsym.html](http://www.opengroup.org/onlinepubs/009695399/functions/dlsym.html)

假设您知道要调用的函数的名称，以及它们在哪个 .so 中。这相当简单。

```
void    *handle;
int     *iptr, (*fptr)(int);

/* open the needed object */
handle = dlopen("/usr/home/me/libfoo.so", RTLD_LOCAL | RTLD_LAZY);

/* find the address of function and data objects */
*(void **)(&fptr) = dlsym(handle, "my_function");
iptr = (int *)dlsym(handle, "my_object");

/* invoke function, passing value of integer as a parameter */
(*fptr)(*iptr); 
```

如果您想获取所有动态符号的列表，objdump -T file.so 是您的最佳选择。（objdump -t file.a 如果您正在寻找静态绑定函数）。objdump 是跨平台的，是 binutils 的一部分，所以在紧要关头，您可以将二进制文件复制到另一个系统，并在不同平台上使用 objdump 对它们进行错误处理。

如果您希望动态链接是最佳的，您应该查看您的 ld.so.conf，它指定了 ld.so.cache 的搜索顺序（so.cache right ;）。

# asp.net - 会使 ASP.NET 文本输入无效的示例文本？

> ID：702100
> 
> 赞同：2
> 
> 时间：2009-03-31T17:17:00.317
> 
> 标签：asp.net, validation

我需要对验证控件进行一些检查，但我不确定 ASP.NET 会认为哪种类型的文本是安全问题。有人可以给我一些东西试试吗？我尝试了各种 HTML 标签，它似乎可以接受它们。这是一个多行富文本框，用于将文本字段保存到数据库。保存代码在 If Me.IsValid 内部，没有指定 ELSE，但在调用 save 函数后，它会继续显示“已保存”消息并重定向页面。一些用户一直在失去工作，所以我认为问题在于 Me.IsValid 是错误的，所以调用了保存函数但什么都不做......无论如何我可以尝试用什么来使其无效？注意我没有为此编写代码，我只是对其进行故障排除。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-03-31T17:28:32.753

听起来您将 Validator 控件与 ValidateRequest 混淆了，ValidateRequest 是 ASP.Net 用于清理请求的内部机制。

验证器验证完全取决于您的验证器。您使用的是RequiredFieldValidator 吗？然后无效的输入只是空白文本框。它是一个正则表达式验证器吗？然后您需要输入与正则表达式不匹配的内容。自定义验证器？然后你需要检查验证逻辑。

在我看来，这听起来更像是您担心输入被清理以运行数据库查询。首先要检查的是，在您的 Page 指令中，“ValidateRequest”没有设置为“false”。如果是这样，那将解释为什么允许 HTML 通过。

您还应该检查以下内容：

[如何：通过对字符串应用 HTML 编码来防止 Web 应用程序中的脚本攻击](http://msdn.microsoft.com/en-us/library/a2a4yykt.aspx)

[验证 ASP.NET 网页中的用户输入](http://msdn.microsoft.com/en-us/library/7kh55542.aspx)

然后，如果您想尝试数据库注入攻击，只需 google 即可获得基本的 SQL 注入教程。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-03-31T17:21:43.080

```
javascript:alert('rrrrrooooaaaarrrrr'); 
```

是一个好的开始。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-03-31T17:22:15.780

尝试一些 ASCII 代码来表示不间断空格、回车等。

由于您要保存到数据库，因此也可以尝试一些 sql 注入。

# c# - C#部署的安装问题

> ID：702101
> 
> 赞同：12
> 
> 时间：2009-03-31T17:17:14.823
> 
> 标签：c#, .net

我有一个使用[ClickOnce](http://en.wikipedia.org/wiki/ClickOnce)部署部署的程序，然后安装在我的机器上。我尝试运行它，它给了我以下错误：

```
PLATFORM VERSION INFO
    Windows                 : 5.1.2600.196608 (Win32NT)
    Common Language Runtime : 2.0.50727.3053
    System.Deployment.dll   : 2.0.50727.3053 (netfxsp.050727-3000)
    mscorwks.dll            : 2.0.50727.3053 (netfxsp.050727-3000)
    dfdll.dll               : 2.0.50727.3053 (netfxsp.050727-3000)
    dfshim.dll              : 2.0.50727.3053 (netfxsp.050727-3000)

SOURCES
    Deployment url          : file:///C:/../MyProg.appref-ms%7C

ERROR SUMMARY
    Below is a summary of the errors, details of these errors are listed later in the log.
    * Activation of C:\..\MyProg.appref-ms| resulted in exception. Following failure messages were detected:
        + The referenced assembly is not installed on your system. (Exception from HRESULT: 0x800736B3)

COMPONENT STORE TRANSACTION FAILURE SUMMARY
    No transaction error was detected.

WARNINGS
    There were no warnings during this operation.

OPERATION PROGRESS STATUS
    * [3/30/09 2:45:10 PM] : Activation of C:\..\MyProg.appref-ms| has started.

ERROR DETAILS
    Following errors were detected during this operation.
    * [3/30/09 2:45:16 PM] System.Runtime.InteropServices.COMException
        - The referenced assembly is not installed on your system. (Exception from HRESULT: 0x800736B3)
        - Source: System.Deployment
        - Stack trace:
            at System.Deployment.Internal.Isolation.IStore.GetAssemblyInformation(UInt32 Flags, IDefinitionIdentity DefinitionIdentity, Guid& riid)
            at System.Deployment.Internal.Isolation.Store.GetAssemblyManifest(UInt32 Flags, IDefinitionIdentity DefinitionIdentity)
            at System.Deployment.Application.ComponentStore.GetAssemblyManifest(DefinitionIdentity asmId)
            at System.Deployment.Application.ComponentStore.GetSubscriptionStateInternal(DefinitionIdentity subId)
            at System.Deployment.Application.SubscriptionStore.GetSubscriptionStateInternal(SubscriptionState subState)
            at System.Deployment.Application.SubscriptionState.Validate()
            at System.Deployment.Application.SubscriptionState.get_IsInstalled()
            at System.Deployment.Application.ApplicationActivator.ProcessOrFollowShortcut(String shortcutFile, String& errorPageUrl, TempFile& deployFile)
            at System.Deployment.Application.ApplicationActivator.PerformDeploymentActivation(Uri activationUri, Boolean isShortcut, String textualSubId, String deploymentProviderUrlFromExtension, BrowserSettings browserSettings, String& errorPageUrl)
            at System.Deployment.Application.ApplicationActivator.ActivateDeploymentWorker(Object state)

COMPONENT STORE TRANSACTION DETAILS
    No transaction information is available. 
```

我无法卸载该程序，但我不明白为什么（一个对话框会弹出一秒钟并在我阅读之前消失），并且在我卸载旧版本之前无法重新安装该应用程序。

问题可能是什么，我能做些什么？

以前的版本是使用 Visual Studio 2008 部署的。此版本是使用 Visual C# Express Edition 部署的。MySQL Connection 包有一个依赖项。发布时我没有自定义任何设置，除了目录位置和版本号（非重复版本号）。

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2009-04-01T02:24:29.440

您的应用程序商店可能被搞砸了。您可以尝试删除此密钥（它将全部删除所有当前安装的 Click-Once 应用程序）：

```
HKEY_CURRENT_USER\Software\Classes\SOFTWARE\Microsoft\Windows\CurrentVersion\Deployment\SideBySide 
```

请注意，如果您的应用程序在该错误之外或在其他机器上“工作”，那么这可能是您的问题。

# sql-server-2005 - SQL Server 2005 中的数据分页仅返回 1（一）行

> ID：702105
> 
> 赞同：0
> 
> 时间：2009-03-31T17:18:00.080
> 
> 标签：sql-server-2005, paging

有人请帮助我。

我在 SQL Server 2005 中有一个用于数据分页的存储过程（见下文）。存储过程的目的是返回特定类别 (CatID) 的产品页面 (prodid, description)。

当我执行存储过程时：

```
EXEC @return_value = [dbo].[ecosys_CNET_GetCategoryProducts]  
@CatID = N'AA',  
@PageNumber = 1,  
@ProductsPerPage = 10,  
@HowManyProducts = @HowManyProducts OUTPUT 
```

即使有很多产品，它也只返回一 (1) 行：

```
@HowManyProducts: 10034 
```

我有一个类似的存储过程，它适用于较小的数据集。我达到某种极限了吗？

```
set ANSI_NULLS ON  
set QUOTED_IDENTIFIER ON  
go  

CREATE PROCEDURE [dbo].[ecosys_CNET_GetCategoryProducts]  

(  
@CatID char(2),  
@PageNumber INT,  
@ProductsPerPage INT,  
@HowManyProducts INT OUTPUT  
)  

AS  

-- Declare a new @Products TABLE variable.  
DECLARE @Products TABLE  
(  
RowNumber INT,  
prodid VARCHAR(40),  
description VARCHAR(2000)  
)  

-- Populate the @Product TABLE variable with the selected Products.  
INSERT INTO @Products  

SELECT  

ROW_NUMBER() OVER (ORDER BY cds_atr.prodid),  
cds_atr.prodid,  
cds_stdnee.description  

FROM cds_stdnee  

JOIN cds_atr  
ON (cds_stdnee.prodid = cds_atr.prodid)  

WHERE cds_atr.catid = @CatID  

-- Return the Total Number of Products using an OUTPUT variable.  
SELECT @HowManyProducts = COUNT(prodid) FROM @Products  

-- Extract the Requested Page of Products.  
SELECT DISTINCT prodid, description  

FROM @Products  

WHERE RowNumber > (@PageNumber - 1) * @ProductsPerPage  
  AND RowNumber <= @PageNumber * @ProductsPerPage 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-03-31T17:23:34.060

如果它只返回一行，很可能只有一行要返回。添加一个`SELECT * FROM @Products`并查看那里有哪些行。特别是，查看行号。

# jquery - jquery自动搜索水印

> ID：702113
> 
> 赞同：3
> 
> 时间：2009-03-31T17:20:18.653
> 
> 标签：jquery, watermark

我正在使用 jquery 插件 wordFilter: [http://people.apache.org/~gmonroe/wordFilter/index.html](http://people.apache.org/~gmonroe/wordFilter/index.html)它提供了自动搜索功能，它允许根据输入到 text_field 中的文本自动过滤元素列表。

它工作得很好，但如果没有输入文本，我希望那里也有一个 text_field 水印。不幸的是，此文本会导致自动搜索触发。当然，我不希望这样，我希望在用户实际键入之前将其忽略。

有没有人有使用带有水印的自动搜索类型文本字段的经验？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-04-12T19:37:42.187

我很容易实现了这个效果。我没有立即将自动搜索功能添加到字段中，而是在用户第一次单击该字段后添加。

以下是相关的代码块：

CSS：设置水印颜色

```
.自动搜索 {
    颜色：#999；
}  

```

HTML：为文本框提供 autoSearch 类。我使用 searchclass 属性来指定搜索框将搜索

```
<input type="text" class="field autoSearch" searchclass="assign-filter" id="assign-search"/>

```

Javascript：清除该框并在单击时删除自动搜索类。添加自动搜索功能

```
$('.autoSearch').click(function() {
        $(this).val('');
        $(this).removeClass('autoSearch');
        $(this).autoSearch('.'+$(this).attr('searchclass'));
    });

```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-07-29T14:42:45.777

如果用户选项卡到文本框，则不会触发 click 事件，因此不会删除水印，而是应该使用 focus 事件。

```
$('.autoSearch').focus(function() {
        $(this).val('');
        $(this).removeClass('autoSearch');
        $(this).autoSearch('.'+$(this).attr('searchclass')); 
    }); 
```

# ruby - 林克地图！或收集！

> ID：702123
> 
> 赞同：26
> 
> 时间：2009-03-31T17:23:19.240
> 
> 标签：ruby, linq, map, collect

什么是Linq相当于[map！或收集！](http://www.ruby-doc.org/core/classes/Array.html#M002213)Ruby中的方法？

```
 a = [ "a", "b", "c", "d" ]
   a.collect! {|x| x + "!" }
   a             #=>  [ "a!", "b!", "c!", "d!" ] 
```

我*可以*通过使用 foreach 遍历集合来做到这一点，但我想知道是否有更优雅的 Linq 解决方案。

* * *

## 回答 #1

> 赞同：37
> 
> 时间：2009-03-31T17:25:37.643

地图 = 选择

```
var x = new string[] { "a", "b", "c", "d"}.Select(s => s+"!"); 
```

* * *

## 回答 #2

> 赞同：24
> 
> 时间：2009-03-31T17:25:40.543

高阶函数`map`最好用[Enumerable.Select](http://msdn.microsoft.com/en-us/library/system.linq.enumerable.select.aspx)表示，它是`System.Linq`.

如果您好奇，其他高阶函数会像这样爆发：

`reduce ->` [Enumerable.Aggregate](http://msdn.microsoft.com/en-us/library/system.linq.enumerable.aggregate.aspx)
`filter ->` [Enumerable.Where](http://msdn.microsoft.com/en-us/library/system.linq.enumerable.where.aspx)

# iis - 启用 IIS7 gzip

> ID：702124
> 
> 赞同：230
> 
> 时间：2009-03-31T17:23:30.410
> 
> 标签：iis, iis-7, compression, gzip

如何使 IIS7 能够 gzip 静态文件（如 js 和 css）以及如何在发送到客户端之前测试 IIS7 是否真的对它们进行 gzip 压缩？

* * *

## 回答 #1

> 赞同：243
> 
> 时间：2011-03-26T18:54:21.140

### 配置

您可以在`Web.config`文件中完全启用 GZIP 压缩。如果您在共享主机上并且无法直接配置 IIS，或者您希望您的配置在您的所有目标环境之间传输，这将特别有用。

```
<system.webServer>
  <httpCompression directory="%SystemDrive%\inetpub\temp\IIS Temporary Compressed Files">
    <scheme name="gzip" dll="%Windir%\system32\inetsrv\gzip.dll"/>
    <dynamicTypes>
      <add mimeType="text/*" enabled="true"/>
      <add mimeType="message/*" enabled="true"/>
      <add mimeType="application/javascript" enabled="true"/>
      <add mimeType="*/*" enabled="false"/>
    </dynamicTypes>
    <staticTypes>
      <add mimeType="text/*" enabled="true"/>
      <add mimeType="message/*" enabled="true"/>
      <add mimeType="application/javascript" enabled="true"/>
      <add mimeType="*/*" enabled="false"/>
    </staticTypes>
  </httpCompression>
  <urlCompression doStaticCompression="true" doDynamicCompression="true"/>
</system.webServer> 
```

### 测试

要测试压缩是否有效，请使用[Chrome](http://code.google.com/chrome/devtools/)或[Firebug for Firefox](http://getfirebug.com/)中的开发人员工具，并确保设置了 HTTP 响应标头：

```
Content-Encoding: gzip 
```

请注意，如果响应代码为 304（未修改），则不会出现此标头。如果是这种情况，请进行完全刷新（在按下刷新按钮时按住 shift 或 control）并再次检查。

* * *

## 回答 #2

> 赞同：58
> 
> 时间：2014-02-28T18:28:24.603

您需要在 Windows 功能控制面板中启用该功能：

![IIS 功能截图](https://i.stack.imgur.com/mtfcb.png)

* * *

## 回答 #3

> 赞同：37
> 
> 时间：2009-03-31T17:58:25.943

**HttpModule 中的全局 Gzip**

如果您无权访问最终的 IIS 实例（共享主机...），您可以创建一个 HttpModule 将此代码添加到每个 HttpApplication.Begin_Request 事件：

```
HttpContext context = HttpContext.Current;
context.Response.Filter = new GZipStream(context.Response.Filter, CompressionMode.Compress);
HttpContext.Current.Response.AppendHeader("Content-encoding", "gzip");
HttpContext.Current.Response.Cache.VaryByHeaders["Accept-encoding"] = true; 
```

**测试**

荣誉，没有测试就没有解决方案。我喜欢使用 Firefox 插件“ [Liveheaders](https://addons.mozilla.org/en-US/firefox/addon/3829) ”，它显示了浏览器和服务器之间每条 http 消息的所有信息，包括压缩、文件大小（您可以将其与服务器上的文件大小进行比较）。

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2016-11-16T07:56:39.647

在 windows 2012 r2 下可以在这里找到：

[![在此处输入图像描述](https://i.stack.imgur.com/9f6Xk.png)](https://i.stack.imgur.com/9f6Xk.png)

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2017-04-24T14:46:00.103

正如查理提到的，我只需要在 windows 功能中添加该功能。对于在 windows 10 或 server 2012+ 上找不到它的人，如下所示。我有点挣扎

## 视窗 10

[![在此处输入图像描述](https://i.stack.imgur.com/QdRRc.png)](https://i.stack.imgur.com/QdRRc.png)

## 视窗服务器 2012 R2

[![在此处输入图像描述](https://i.stack.imgur.com/EygSW.png)](https://i.stack.imgur.com/EygSW.png)

## 窗口服务器 2016

[![在此处输入图像描述](https://i.stack.imgur.com/uEv3s.png)](https://i.stack.imgur.com/uEv3s.png)

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2009-04-01T11:28:10.147

如果您将 YSlow 与 Firebug 一起使用并分析您的页面性能，YSlow 肯定会告诉您页面上的哪些工件不是经过 gzip 压缩的！

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2013-11-12T02:56:37.483

如果您还尝试 gzip 动态页面（如 aspx）但它不起作用，可能是因为未启用该选项（您需要使用 Windows 功能安装动态内容压缩模块）：

[http://support.esri.com/en/knowledgebase/techarticles/detail/38616](http://support.esri.com/en/knowledgebase/techarticles/detail/38616)

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2018-09-07T13:16:54.950

对于所有不得不与德国/德国服务器斗争的穷人:)

[![auf deutsch bitte schön](https://i.stack.imgur.com/u3Qvj.jpg)](https://i.stack.imgur.com/u3Qvj.jpg)

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2014-04-30T02:11:01.023

Another easy way to test without installing anything, neither is it dependent on IIS version. Paste your url to this [link - SEO Checkup](http://seositecheckup.com/ "SEO Checkup")

![test gzip](https://i.stack.imgur.com/bEiUT.png)

To add to web.config: [http://www.iis.net/configreference/system.webserver/httpcompression](http://www.iis.net/configreference/system.webserver/httpcompression)

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2010-11-03T03:32:49.853

尝试安装了 Firebug 插件的 Firefox。我正在使用它；Web 开发人员的绝佳工具。

我也使用 web.config 在我的 IIS7 中启用了 Gzip 压缩。

# google-maps - 控制 GDirections 迷你弹出地图

> ID：702126
> 
> 赞同：1
> 
> 时间：2009-03-31T17:23:36.197
> 
> 标签：google-maps

我正在使用 Google Maps API 为我的大学编写校园地图。在主地图上，当在“地图”地图类型中查看时，有一个校园的自定义叠加层，设置为（通过使用 GEvent.addDomListener）在卫星或混合模式下查看地图时将其删除。当用户通过我的地图获得往返校园的路线时，会出现一条折线和 2 个标记，就像正常情况一样。单击标记时，会显示一个小的弹出式地图，重点是该特定标记周围的校园区域。

我想知道是否有人知道设置这些迷你弹出地图属性的方法。我需要扩展事件侦听器以确保当小地图被点击退出“地图”模式时覆盖被取消。我还需要能够为这些地图设置缩放级别。

有任何想法吗？

（可以根据需要提供代码，不确定需要哪些部分，也不想在这里发布整个 f'n 的东西。）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2010-02-02T03:08:57.887

看起来没有任何内置选项可以修改您从*GDirection标记获得的**infoWindow*，但您可以在将标记取回后显式替换它们。

 *[这篇文章](http://osdir.com/ml/GoogleMapsAPI/2009-02/msg00208.html)描述了这个过程。

# vb.net - Vb.Net 中的自引用

> ID：702135
> 
> 赞同：1
> 
> 时间：2009-03-31T17:26:28.547
> 
> 标签：vb.net

如何`GetType`从对象本身中获取对象的类型（带有）？

类似的东西`GetType(Me)`（当然，这是行不通的）。

谢谢。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2009-03-31T17:27:54.627

`Me.GetType()`应该管用。如果没有，那么请说出它没有的方式。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-03-31T17:30:07.773

你在想`typeof(Me)`吗？

# c# - C# 3.0：在集合中填充具有不同行为的对象

> ID：702139
> 
> 赞同：0
> 
> 时间：2009-03-31T17:27:57.497
> 
> 标签：c#, collections, c#-3.0, lambda

我想在组合框中填充项目，每个项目都有不同的行为。是的，我知道我可以简单地创建 3 个派生自基类的类。但我的问题是“还有其他方法吗”和“有什么可能”。在 Java 中可以执行“new MyClass(){public void overriddenmethod(){...} }”，但在 C# 中我们不能，可以吗？

现在我使用 lambda 动态定义一个方法，但问题是我稍后希望 new XxxFormatter() 作为该对象的实例变量。由于 XxxFormatters 不共享公共基类，因此我不能将它们作为 SerializingHelper 类中的单个字段。

你有什么想法？

```
public delegate void SerializingHandler(Stream s, object o);

class SerializingHelper
{
    public string Name { get; set; }
    public SerializingHandler Serializer { get; set; }
}

comboFormat.Items.AddRange(new object[] 
{ 
            new SerializingHelper{ Name = "Binary", 
Serializer = (s,o)=>new BinaryFormatter().Serialize(s,o),

            new SerializingHelper{ Name = "Soap", 
Serializer = (s,o)=>new SoapFormatter().Serialize(s,o), 

            new SerializingHelper{ Name = "Xml", 
Serializer = (s,o)=>new XmlSerializer(typeof(KontaktpartnerData), new Type[]   
 {typeof(ArrayList), typeof(KontaktPartner)}).Serialize(s,o), }

}); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-03-31T17:45:48.297

如果您只想防止每次都实例化一个新的序列化程序实例，您可以在 lambda 之外实例化它们：

```
var binaryFormatter = new BinaryFormatter();

comboFormat.Items.AddRange(new object[]
{ 
    new SerializingHelper
    {
        Name = "Binary",
        Serializer = binaryFormatter.Serialize
    }

    ...
}); 
```

* * *

如果您确实需要将格式化程序存储为字段，则可以执行以下操作：

```
delegate void SerializingHandler<TFormatter>(TFormatter formatter,
                                             Stream stream,
                                             object graph);

interface ISerializingHelper
{
    void Serialize(Stream stream, object graph);
}

class SerializingHelper<TFormatter> : ISerializingHelper
{
    private readonly SerializingHandler<TFormatter> handler;
    private readonly TFormatter formatter;

    public SerializingHelper(SerializingHandler<TFormatter> handler,
                             TFormatter formatter)
    {
        this.handler = handler;
        this.formatter = formatter;
    }

    public TFormatter Formatter
    {
        get { return this.formatter; }
    }

    public void Serialize(Stream stream, object graph)
    {
        this.handler(this.formatter, stream, graph);
    }
} 
```

# php - 日期应该存储为日期时间还是 SQL 中的 int？

> ID：702141
> 
> 赞同：4
> 
> 时间：2009-03-31T17:28:20.663
> 
> 标签：php, sql

我在日期时间（0000-00-00 00:00:00）中存储我在论坛中发布的所有日期。我看到 phpBB、punBB 和所有流行的论坛都将日期存储在 int 中？

什么是更好的？

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2009-03-31T17:30:44.247

如果您将日期存储为 INT，那么连接到数据库的每个应用程序或工具都必须知道如何将该 INT 转换为有意义的东西。我建议坚持使用适合数据的数据类型，除非您的特定 RDBMS 对特定数据类型有严重缺陷。

还有一个需要考虑的问题...如果将它们存储为 INT，那么您还将无法访问许多特定于日期的函数，并且必须自己编写它们。例如，返回特定日期的日期名称（星期一、星期二等）。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2009-03-31T17:31:07.880

我不确定是否有“更好”的答案。但我会推荐日期时间，因为如果您将它们存储为 int，您可能会遇到[2038 年问题。](http://en.wikipedia.org/wiki/Year_2038_problem)

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2009-03-31T19:45:18.807

此外，前纪元日期也存在问题。在 INT 中保留诸如成员出生日期之类的信息很困难，因为有些成员可能在 1970 年 1 月 1 日之前出生。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2009-03-31T17:48:31.877

我对所有时间字段都使用 DATETIME（并且，使用 MySQL，我总是避免使用 TIMESTAMP）。不过，我使用的一个技巧是将列设置为 NULL DEFAULT NULL。这样，对于我认为日期为空或空白的情况，我无需担心或检查“0000-00-00 00:00:00”；我只检查`IS NULL`.

我能想到过去人们可能考虑使用 INT 作为日期列的唯一原因是因为有一次，DATETIME（以及 DATE 和 TIME）在 MySQL 内部实现为字符串。在这种情况下，DATETIME 字段将比 INT 字段大得多，因此如果空间是一个问题，我可以看到正在做出该决定。如今，情况不再如此（我会说 MySQL 4.x 及更高版本），没有充分的理由不再选择 DATETIME。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2009-03-31T17:44:18.177

如今，大多数 DBMS 都允许您对真实的日期时间字段进行更多时髦的查询。使用可用于日期操作和查询的函数，很难证明使用整数是合理的。

我想大多数 BB 系统都使用 INT，因为它们更容易在多个数据库引擎中实现，如果你只关心日期部分，而不是时间部分，你可能会从 INT 中获得比日期时间更好的性能（通常是 8 字节浮点数）。

就我个人而言，我更喜欢将日期存储在日期时间字段中，因为我几乎从不从一个数据库平台迁移到另一个数据库平台，例如，向数据库询问每个月的最后一个星期五是有好处的。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2009-03-31T17:44:42.510

最好的答案是“视情况而定”。如果没有其他信息，我会说 datetime 更好。我认为这些论坛的实现是未能识别更好、更成熟的数据类型。你必须想出一个很好的理由来解释为什么你想要整数超过日期。也许他们有，我只是不知道。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2009-04-15T01:54:29.877

datetime 在内部是一个 int，从某个*epoch*开始的秒数或毫秒数，通常是 1970 年 1 月 1 日午夜的 linux 纪元。

但它允许您使用各种美妙的日期函数来添加、减去和分解时间间隔，而这是您无法使用 int 完成的（无需自己重写所有这些函数）。

因此，通过使用日期/日期时间而不是 int，您不会失去任何东西，并且会像其他人回答的那样获得很多东西。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2009-04-01T15:47:24.830

SQL 2008 引入了一种“日期”数据类型，它小于完整的“日期时间”字段，如果您不需要时间部分（如果您正在考虑使用 INT，听起来您不需要）。

有关详细信息，请参阅[本文](http://www.sqlteam.com/article/using-the-date-data-type-in-sql-server-2008)。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2009-03-31T20:06:04.950

我使用的数据仓库将日期存储为 int 格式，例如 20090331 格式。然后有一个表格专门用于将该 int 转换为任何与日期相关的信息，包括日期时间表示。这提供了很大的灵活性，并允许我们添加额外的信息，例如季度编号、假期指定等。如果您需要除整数日期之外的任何内容，只需加入日期表即可。

```
select MyTable.Stuff,DimDate.AsDateTime,DimDate.BusinessQuarter,DimDate.IsHoliday from MyTable
inner join DimDate on MyTable.DateKey = DimDate.DateKey 
```

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2009-04-15T02:12:41.567

I want to follow up on tpdi's answer and describe my experience having done it both ways several times.

When an integer has been used, it's been done with the convention described by tpdi - a given number of seconds past some point in time around 1970.

Back when a lot of production software was at least partially written in C, this mode was the (UNIX-style) standard and a reasonable number of functions were provided for mapping and date calculations.

One issue not discussed much above is that interpolations by hour, minute, and second are not equally well-handled by all languages and DBMS libraries. Integer-based dates handle this more nicely without worrying about rounding errors - at least as long as you don't need a resolution less than 1 second. It's also helpful to not need to deal with dates before 0, although it can be handled without too much trouble with negative integers.

The final benefit can be that most languages/DBMSs have a feature for handling this convention, which makes it easier to use multiple languages and DBMS products with fewer compatibility issues.

In some reasonable cases it's as @tpdi desribes; but it can also be turned on its head - you can lose precision and cross-language compatibility through libraries that handle integer datetimes if they fit your context.

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2009-04-15T02:46:18.457

我会使用**Datetime**，除非有[其他日期](http://en.wikipedia.org/wiki/Maya_calendar)和可能的[时间](http://en.wikipedia.org/wiki/International_Atomic_Time)可以更好地存储为**int**。

* * *

## 回答 #12

> 赞同：-1
> 
> 时间：2009-03-31T19:26:45.730

仅供参考，如果您使用 int/timestamp，那么您仍然可以获得您的 RDBMS 可以为日期/时间提供的所有功能。例如，在 MySQL 中，`FROM_UNIXTIME(timestamp)`它采用整数时间戳并返回一个`DATETIME`，然后您可以随意使用它。

对于冗长的讨论，没有比 Drupal 项目的优秀人员更好的了：[http ://groups.drupal.org/node/731](http://groups.drupal.org/node/731)

希望这可以帮助。

# .net - 如何使用 System.Uri .NET 类来检查 URL 是否有效？

> ID：702144
> 
> 赞同：16
> 
> 时间：2009-03-31T17:28:36.980
> 
> 标签：.net, regex

在[之前的一篇文章](https://stackoverflow.com/questions/161738/what-is-the-best-regular-expression-to-check-if-a-string-is-a-valid-url)中，建议使用 System.Uri 检查 URL 是否有效。如何做到这一点？

* * *

## 回答 #1

> 赞同：32
> 
> 时间：2009-03-31T17:44:52.167

要检查 url 是否有效而不是使用异常，您可以使用[TryCreate](http://msdn.microsoft.com/en-us/library/ms131572.aspx)方法：

```
Uri result;
if (Uri.TryCreate("http://www.google.com", UriKind.RelativeOrAbsolute, out result)) 
{
    // the url is valid
} 
```

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2009-05-13T06:27:22.557

使用 Uri.TryCreate 可能会对相对 Uris 产生一些问题，像这样的字符串“/folder/{ht.com.m\/sx.r:erp://” TryCreate 返回 true，所以我使用 IsWellFormedUriString 和TyrCreate，我不确定 TryCreate 是否必要，通过我的小测试，无论是否使用 TryCreate，我都会得到相同的结果

```
public static bool IsUri(this string source) {
  if(!string.IsNullOrEmpty(source) && Uri.IsWellFormedUriString(source, UriKind.RelativeOrAbsolute)){
    Uri tempValue;
    return (Uri.TryCreate(source, UriKind.RelativeOrAbsolute, out tempValue));
  }
  return (false);
} 
```

**例子**

```
address= "http://www.c$nbv.gob.mx"
if(address.IsUri()){
  //returns false
}
address= "http://www.cnbv.gob.mx"
if(address.IsUri()){
  //returns true
}
address= "http://www.cnbv.gob.mx:80"
if(address.IsUri()){
  //returns true
}
address= "/directory/path"
if(address.IsUri()){
  //returns true
}
address= "~re#l|ativ[ainco#recta\car:.\peta"
if(address.IsUri()){
  //returns false
} 
```

* * *

## 回答 #3

> 赞同：9
> 
> 时间：2009-03-31T17:52:18.093

可以使用静态 IsWellFormedUriString 方法：

```
bool isValid = Uri.IsWellFormedUriString(url, UriKind.Absolute); 
```

[http://msdn.microsoft.com/en-us/library/system.uri.iswellformeduristring.aspx](http://msdn.microsoft.com/en-us/library/system.uri.iswellformeduristring.aspx)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-03-31T17:32:57.827

如果您正在检查 URL 的结构是否有效，那么[前面的答案](https://stackoverflow.com/questions/702144/how-would-one-use-system-uri-net-class-to-check-if-the-url-is-valid/702159#702159)就可以了。

但是，如果要检查资源是否确实存在，则必须使用派生自 WebRequest/WebResponse 的类。对于 HTTP 和 FTP 资源，HttpWebRequest/FtpWebRequest 和 HttpWebResponse/FtpWebResponse 类可以正常工作（WebClient 也是如此），但如果您有其他必须支持的方案，则必须为该方案找到特定的提供程序。

# windows-installer - 是否可以将条件添加到核心 InstallShield 自定义操作？（如 OnInstallFilesActionBefore）

> ID：702145
> 
> 赞同：3
> 
> 时间：2009-03-31T17:28:46.277
> 
> 标签：windows-installer, installation, installshield, custom-action, installscript

我通过序列编辑器向*OnInstallFilesActionBefore*自定义操作添加了一个条件。我做到了，所以它只在您第一次安装设置时执行，这意味着我的条件是：

```
Not Installed 
```

我现在看到编译时记录了这个警告：

> ISDEV : 警告 InstallExecuteSequence 序列中自定义操作 OnInstallFilesActionBefore 的条件已被修改。这将在运行时导致不可预测的结果。

看，我认为自定义操作只是一个特定于 InstallShield 的包装器，它允许我们在 InstallFiles 操作之前添加代码。除了我添加到它的代码之外，它还会做其他事情吗？如果它所做的只是执行我添加的代码，那么我需要注意这个警告吗？我有点担心它说它“**会**在运行时导致不可预测的结果”，好像它们是肯定的。

据我所知，它工作正常。我的代码在第一次安装时执行，但在卸载或修复时不执行。这就是我想要的。

作为记录，我使用的是 DevStudio v9。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-04-05T23:08:00.097

如果我没记错的话，并且已经有几年了，所以我可能是错的，那么只有在您使用混合 InstallScript MSI 项目类型时才包含该操作。因此它将用于在文件复制事件之前运行 installscript 操作。

因此，如果您在其中没有任何 installscript 操作，则为其添加条件不会导致问题。虽然它导致了为什么你首先想要这个条件的问题。

您可能最好使用仅包含标准 MSI 操作的基本 MSI 项目类型。这意味着您也不依赖 ISScript Installshield 运行时，因此这通常是一种更好的做法，并且完全消除了您的问题背后的担忧。

# python - Django Model.object.get pre_save 函数怪异

> ID：702150
> 
> 赞同：3
> 
> 时间：2009-03-31T17:29:39.897
> 
> 标签：python, django, django-models, error-handling, django-signals

我制作了一个连接到模型“pre_save”信号的函数。在函数内部，我试图检查模型实例的 pk 是否已经存在于表中：

```
sender.objects.get(pk=instance._get_pk_val()) 
```

模型的第一个实例引发错误。我发现了错误并从标题中生成了一个 slug 字段。在第二种情况下，它不会引发错误。我在两个实例上检查了 instance._get_pk_val() 的值，它们是相同的：无

所以：

```
# This one raises an error in the sluggit function
instance1 = Model(title="title 1")
instance1.save()

# This one doesn't raise an error
instance2 = Model(title="title 2")
instance2.save() 
```

这是我玩python和django的第三天。所以我很抱歉，如果它是我没有看到的新事物。

**编辑：**

该模型：

```
class Test(models.Model):
    title = models.CharField(max_length=128)
    slug = models.SlugField(max_length=128)
    slug.prepopulate_from=('title',)

signals.pre_save.connect(package.sluggit, sender=Test) 
```

功能基础：

```
def sluggit(sender, instance, signal, *args, **kwargs):
    try:
        sender.objects.get(pk=instance._get_pk_val())
    except:
        # Generate Slug Code 
```

@S.Lot 告诉我在评论中覆盖 save() 方法。我得试试。我仍然想知道为什么对 model.objects.get() 的第二次调用没有使用此方法引发错误。

**编辑 2** 谢谢@S.Lot。覆盖保存方法非常有效。还是对信号法很好奇。嗯，很奇怪。

**编辑 3** 在玩了一会儿之后，我发现使用 instance.objects.get() 而不是 sender.objects.get() 有效：

```
def sluggit(sender, instance, signal, *args, **kwargs):
    try:
        sender.objects.get(pk=instance._get_pk_val())
    except:
        # Generate Slug Code 
```

需要是：

```
def sluggit(sender, instance, signal, *args, **kwargs):
    try:
        instance.objects.get(pk=instance._get_pk_val())
    except:
        # Generate Slug Code 
```

一个错误？出于某种原因，我认为 sender.objects.get() 将与 Test.objects.get() 相同。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-03-31T19:19:18.807

S.Lott 是正确的......使用`save()`，因为你已经承认你已经开始这样做了。

至于信号问题，老实说，我认为您的代码没有任何问题。我什至自己在本地成功地运行它。你确定你在问题中正确地表达了它吗？或者那个 instance2 还不是现有的数据库对象（可能是您的测试代码中的一个错误）？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-04-24T03:48:50.217

感谢您发布此信息。谷歌排名靠前的结果（在我发布此内容时）有点过时，并且显示了连接信号的旧方式（显然最近被重写了）。您的编辑以及更正的代码片段向我展示了它是如何完成的。

我希望更多的海报编辑他们的评论以进行修复。谢谢。:-)

# css - 无脚本标签内的 div 显示效果不佳

> ID：702154
> 
> 赞同：3
> 
> 时间：2009-03-31T17:30:16.337
> 
> 标签：css

我想在用户禁用 javascript 时显示 noscript 警告，就像 StackOverflow 一样。

我使用这个html：

```
<noscript>    
  <div id="noscript-warning">
    Este sitio funciona mejor con JavaScript habilitado. Descubrí
    <a href="">cómo habilitarlo.</a>
  </div>
</noscript> 
```

这个CSS：

```
#noscript-warning
{
    font-family: Arial,Helvetica,sans-serif;
    position: fixed;
    top: 0;
    left: 0;
    width: 100%;
    z-index: 101;
    text-align: center;
    font-weight: bold;
    font-size: 12pt;
    color: white;
    background-color: #AE0000;
    padding: 10px 0;
    display: block;    
}

#noscript-warning a
{
    color: #FFFFC6;
}

#container
{
    width: 98%;
    margin: auto;
    padding: auto;
    background-color: #fff;
    color: black;
    border-style: solid;
    border-color: #3E4F4F;
    border-width: 1px 2px 2px 1px;
    line-height: 130%;
} 
```

其中#container 是我的模板的主要内容元素。

当 noscript 标签可见时，它会出现在一些内容的前面。我不希望这样，内容应该显示在警告下方。

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-03-31T18:09:00.270

如果您想要 position: fixed 的行为并且需要从顶部向下推送初始内容，您可以在 noscript 区域中包含第二个 div。给这个 div 可见性：隐藏和高度等于 div 的高度，位置：固定。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-03-31T17:39:27.953

问题在于您设置`position: fixed`了警告。你不能指望页面的内容会围绕它移动，因为你将它固定在浏览器窗口的顶部。当你向下滚动时会发生什么？整个页面的内容重新排列以绕过警告？

即使它们滚动，您是否希望警告停留在浏览器窗口的顶部？如果没有，`position: fixed`那不是您要找的。

# flash - 如何将位图文件加载到 BitmapData 对象中？

> ID：702164
> 
> 赞同：16
> 
> 时间：2009-03-31T17:32:31.887
> 
> 标签：flash, actionscript, bitmap, drawing, bitmapdata

在 Flash 中，[BitmapData](http://livedocs.adobe.com/flash/8/main/wwhelp/wwhimpl/common/html/wwhelp.htm?context=LiveDocs_Parts&file=00001944.html)对象可用于将位图存储在 RAM 中，稍后您可以使用[beginBitmapFill()](http://livedocs.adobe.com/flash/9.0/main/wwhelp/wwhimpl/common/html/wwhelp.htm?context=LiveDocs_Parts&file=00001895.html)方法将它们绘制到 MovieClip。

如何将外部位图文件 (.jpg) 加载到 BitmapData 对象中？

即使是 AS3 代码也会有所帮助。

* * *

## 回答 #1

> 赞同：42
> 
> 时间：2009-04-01T06:08:22.787

加载 PNG 并“获取”其 bitmapData 的 AS3 代码

```
var bitmapData:BitmapData;

var loader:Loader = new Loader();
    loader.contentLoaderInfo.addEventListener(Event.COMPLETE, onComplete);
    loader.load(new URLRequest("../lib/img.png"));

function onComplete (event:Event):void
{
    bitmapData = Bitmap(LoaderInfo(event.target).content).bitmapData;
} 
```

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2011-08-17T15:00:02.120

参考棉花的第一个帖子。

实际上每个图像都是一个位图，所以你需要做的就是

```
bitmapData = event.target.content.bitmapData 
```

代替

```
bitmapData = Bitmap(LoaderInfo(event.target).content).bitmapData; 
```

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2012-02-06T08:19:17.580

取自棉花和意志，这将在加载后显示位图：

```
import flash.display.Bitmap;
import flash.display.BitmapData;

var bitmapData:BitmapData;
var bmVis:Bitmap;

var loader:Loader = new Loader();
    loader.contentLoaderInfo.addEventListener(Event.COMPLETE, onComplete);
    loader.load(new URLRequest("put url here"));

function onComplete (event:Event):void
{
    trace("loaded!");
    bitmapData = event.target.content.bitmapData;
    bmVis = new Bitmap(bitmapData);
    this.addChild(bmVis);
} 
```

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2009-03-31T17:34:07.000

您必须将外部文件 (.jpg) 加载到 MovieClip 中并等待它加载。

然后将包含外部文件的 MovieClip 的快照放入您的 BitmapData 对象中。

```
myBitmap = new BitmapData(myMC._width, myMC._height,true,0x00FFFFFF)

myBitmap.draw( myMC) 
```

* * *

请参阅[Flash 8 中的图像 API 简介。](http://www.adobe.com/devnet/flash/articles/image_api_05.html)

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2009-11-08T20:00:13.060

GUI 阶段：
将图像加载到库中（文件 -> 导入 -> 库）。
在库浏览器中，右键单击并点击“属性”，注意它是 X x Y 像素。
打开“高级”选项卡。
选择“为动作脚本导出”。导出为 myImg

动作脚本阶段：

```
import flash.display.BitmapData;
import flash.display.Bitmap; //needed?
..........
var myPic:BitmapData = new myImg(X,Y); 
```

# javascript - 如何实现按住按钮 javascript？

> ID：702165
> 
> 赞同：6
> 
> 时间：2009-03-31T17:32:56.657
> 
> 标签：javascript, forms, button

我是一个完整的新手，正在寻找有关实现 javascript 的说明。我正在尝试用按钮和文本字段替换 YUI 滑块。我正在尝试实现按钮，当按住时，将继续使文本字段增加，最好以越来越快的速度增加。（[http://www.blackbird502.com/white.htm](http://www.blackbird502.com/white.htm)I)）我在头部的java标签中有这个：

```
function holdit(btn, action, start, speedup) {
var t;

var repeat = function () {
    action();
    t = setTimeout(repeat, start);
    start = start / speedup;
}

btn.mousedown = function() {
    repeat();
}

btn.mouseup = function () {
    clearTimeout(t);
}

/* to use */
holdit(btn, function () { }, 1000, 2); 
/* x..1000ms..x..500ms..x..250ms..x */ 
```

我不知道如何在正文中实现按下并按住以下内容：

```
<form><input type=button value="UP"  class="btn" onClick="javascript:this.form.amount.value++;"><br /><input type=text name=amount value=5 class="text"><br /> <input type=button value="DOWN"  class="btn" onClick="javascript:this.form.amount.value--;" ></form> 
```

是否可以？谢谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2009-03-31T22:58:49.900

这段代码应该做你正在寻找的一切；它非常松散地基于 tj111 的示例。我试图让它尽可能地可重用，并且它不需要将 JavaScript 与 HTML 混合。

您确实需要向按钮 (`btnUP`和`btnDOWN`) 和文本字段 ( `amount`) 添加 ID。`window.onload`您可以在语句中更改这些 ID 。

```
// This function creates a closure and puts a mousedown handler on the element specified in the "button" parameter.
function makeButtonIncrement(button, action, target, initialDelay, multiplier){
    var holdTimer, changeValue, timerIsRunning = false, delay = initialDelay;
    changeValue = function(){
        if(action == "add" && target.value < 1000)
            target.value++;
        else if(action == "subtract" && target.value > 0)
            target.value--;
        holdTimer = setTimeout(changeValue, delay);
        if(delay > 20) delay = delay * multiplier;
        if(!timerIsRunning){
            // When the function is first called, it puts an onmouseup handler on the whole document 
            // that stops the process when the mouse is released. This is important if the user moves
            // the cursor off of the button.
            document.onmouseup = function(){
                clearTimeout(holdTimer);
                document.onmouseup = null;
                timerIsRunning = false;
                delay = initialDelay;
            }
            timerIsRunning = true;
        }
    }
    button.onmousedown = changeValue;
}

//should only be called after the window/DOM has been loaded
window.onload = function() {
    makeButtonIncrement(document.getElementById('btnUP'), "add", document.getElementById('amount'), 500, 0.7);
    makeButtonIncrement(document.getElementById('btnDOWN'), "subtract", document.getElementById('amount'), 500, 0.7);
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2009-03-31T22:59:34.440

这有点快速和肮脏，但它应该给你一个开始。基本上，您想设置一些可以使用的初始“常量”来获得所需的行为。增量之间的初始时间为 1000 毫秒，并且在每次迭代中，如果变为该值的 90%（1000、990、891、... 100）并在 100 毫秒处停止变小。您可以调整此因素以获得更快或更慢的加速。其余的我相信非常接近我认为你想要的。看来您只是错过了活动分配。在`window.onload`您将看到我将`onmouseup`, 和事件分配给仅使用初始超时`onmousedown`调用`increment()`or函数的函数，或停止计数器的函数。 `decrement()``ClearTimeout()`

编辑：我稍微改变了这个以修复错误。现在，如果您将鼠标指针从按钮上移开并释放，它将停止计数器。

```
<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01//EN">
<html lang="en">
<head>
    <title><!-- Insert your title here --></title>
    <script>

      // Fake Constants
      var INITIAL_TIME = 1000;
      var ACCELERATION = .9;
      var MIN_TIME = 100;

      // create global variables to hold DOM objects, and timer
      var up = null,
        down = null,
        count = null,
        timer = null;

      // Increment the counter
      function increment (time) {
        // decrease timeout by our acceleration factor, unless it's at the minimum
        time = (time * ACCELERATION > MIN_TIME) ? (time * ACCELERATION) : MIN_TIME;
        count.value ++ ;
        // set the timeout for the next round, and pass in the new smaller timeout
        timer = setTimeout(
                  function () {
                    increment(time);
                  }, time);
      }
      // Same as increment only subtracts one instead of adding.
      // -- could easily make one function and pass an pos/neg factor instead
      function decrement (time) {
        time = time * ACCELERATION > MIN_TIME ? (time * ACCELERATION) : MIN_TIME;
        count.value --;
        timer = setTimeout(
                  function () {
                    decrement(time);
                  }, time);
     }

     // Initialize the page after all the forms load
     window.onload = function () {
       // initialization function

       // assign DOM objects to our vars for ease of use.
       up = document.getElementById('up_btn');
       down = document.getElementById('dwn_btn');
       count = document.getElementById('count');

       // create event handlers for mouse up and down
       up.onmousedown = function () {
         increment(INITIAL_TIME);
       }
        down.onmousedown = function () {
         decrement(INITIAL_TIME);
       }

       document.onmouseup = function () {
         clearTimeout(timer);
       }

     }

  </script>
</head>
<body>
  <!-- Insert your content here -->

  <form name="the_form">
    <input type="button" value="Up" id="up_btn" /><br />
    <input type="button" value="Down" id="dwn_btn" /></br>

    <br />
    Count: 
    <input type="text" value="0" id="count" />

  </form> 

</body>
</html> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-03-31T17:46:45.347

最简单的方法是为每个按钮添加一个 ID，然后使用它们来检索元素并添加事件。

```
//should only be called after the window/DOM has been loaded
window.onload = function() {
  //the buttons
  var btnUP = document.getElementById('btnUP');
  var btnDOWN = document.getElementById('btnDOWN');

  //the amount
  var amount = document.getElementById('amount');

  //actions to occur onclick
  var upClick = function() {
    amount.value++;
  }
  var downClick = function() {
    amount.value--;
  }

  //assign the actions here
  holdit(btnUP, upClick, 1000, 2);
  holdit(btnDOWN, downClick, 1000, 2); 

}

<form>
  <input type=button value="UP"  class="btn" id='btnUP'>
  <br />
  <input type=text name=amount value=5 class="text" id='amount'>
  <br /> 
  <input type=button value="DOWN"  class="btn" id='btnDOWN'>
</form> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-04-01T02:53:36.547

一个不容忽视的方面是您正在挂钩 onclick 事件 - 这发生在完整的单击（鼠标键向下和向上键）上。听起来您想听另一个不同的事件，http://www.w3schools.com/jsref/jsref_onmousedown.asp'>onMouseDown。我认为，如果您要实施其他一些基于计时器的解决方案，那么您已经获得了您所要求的功能。

祝你好运！

# solr - 如何在 Solr 中进行生日（不是出生日期）搜索？

> ID：702168
> 
> 赞同：3
> 
> 时间：2009-03-31T17:34:02.413
> 
> 标签：solr

我有一个存储出生日期的索引，我想搜索出生日期在某个月/日的 X 天内的任何人。例如，我想知道某个人的生日是否会在一定天数内到来，无论他们是哪一年出生的。我将如何使用 Solr 执行此查询？（在“生日”字段上）

作为后续，假设此查询经常执行，我是否应该索引除出生日期以外的其他内容？比如只是月日对？进行此类查询的最有效方法是什么（从查询和索引的角度来看）？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-03-31T17:40:11.447

如果天/月对很棘手（我不知道是否如此），为什么不设置“他们 1980 年的生日”字段（无论他们当时是否还活着）。然后您只需要针对 1980 进行搜索。这*实际上*是一个日/月对，但存储在一个您可以轻松使用的类型中。

请注意，1980 年是闰年，这就是我选择它的原因——否则那些生日为 2 月 29 日的人可能很难代表。

或者，整数形式的“日/月”对：

```
(100 * month) + day 
```

会给你一个简单的表示，很容易搜索和索引。我通常发现在单个字段中存储数据比使用两个字段更简单。再说一次，我从来没有用过 Solr ......

**编辑：**我有另一个想法。这有点温和，但即便如此......

以有效的月、日、年格式存储出生*日期。*我不知道 Solr 是否可以轻松地以 MM/dd/yyyy 格式执行此操作，然后进行字典顺序搜索，但替代方法是

```
(100000 * month) + (1000 * dayOfMonth) + (year - 1900) 
```

（这是假设您不需要它来存储早于 1900 年的出生日期。我相信您可以定制它。）

您仍然可以恢复原始出生日期，但排序将按生日顺序排列，任何特定日期的年龄最大的人都会排在第一位。

这确实意味着很难按实际*年龄*对人们进行分类。我不知道这对你来说是不是一个问题。

无论如何，正如我所说，这有点离谱，但它可能会有所帮助:)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-03-31T18:45:07.267

您需要记住 Solr 使用 Lucene，并且到目前为止 - 一切都作为字符串存储和索引。

范围查询不起作用，因为日期通常在内部索引为 YYYYMMDD

在仅存储 MMDD 字符串的索引中拥有一个单独的字段将很容易搜索。或者，如果您不想要一个额外的字段，并且愿意以不同的方式索引日期，请在索引时重新排列顺序，以便索引生日 MMDDYYY

然后你可以构造范围查询，因为你需要匹配的所有东西都在字符串的前面，而 ​​lucene 是按字典顺序匹配的

（ba -> bc 的范围查询将匹配 BAt、BAseball，但不匹配 BEcause。）

像这样的索引是一次性的固定成本，除了按时间顺序排列的内部安排之外，不会破坏任何东西。如果这是个问题，请使用两个字段，磁盘空间很便宜！）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-03-31T18:01:17.323

您可以将生日存储为从 1 到 366 的数字。然后搜索该值。优点是您可以很容易地搜索日期范围。缺点是你不能轻易地使用这个字段来查找生日是这个月的人。

# java - NetBeans 中 Java API 和语言的上下文帮助

> ID：702170
> 
> 赞同：3
> 
> 时间：2009-03-31T17:34:36.233
> 
> 标签：java, netbeans

是否可以在 NetBeans 中为 Java API 和语言设置上下文帮助。

例如，在源代码中按 F1 键`ServletContextListener`（对于 API）或单词`while`（对于语言）并获取有关这些单词的帮助。（例如在 Visual Studio 中）

我正在使用 NetBeans 6.5。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-03-31T19:27:13.153

按 Alt-F1 将在您的默认浏览器中打开 javadoc，但您必须为您正在使用的 API 安装 javadoc。

例如，要安装 Java SE javadoc，请转到[java.sun.com](http://java.sun.com/javase/downloads/index.jsp)并下载文档，然后在 Netbeans 中转到**工具**> **Java 平台**，然后单击**Javadoc**选项卡。接下来，单击**添加 ZIP/文件夹**并选择刚刚下载的文件。

**Window** > **Other** > **Javadoc**将显示一个面板，其中包含有关您突出显示的类/接口的一些基本信息。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-03-31T17:55:10.380

您可以获得的最接近的是 ctrl-space 来显示帮助（例如 ctrl-space）。

您是否正在寻找类似 Visual Studio 的功能？

# internet-explorer-8 - 如何在 IE8 中创建 Webslice？

> ID：702172
> 
> 赞同：2
> 
> 时间：2009-03-31T17:35:28.243
> 
> 标签：internet-explorer-8, ie8-webslice, web-slice

如何在 IE8 中创建 Webslice？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2009-03-31T17:46:18.747

*   [Internet Explorer 8 准备工具包 - WebSlices](http://www.microsoft.com/windows/internet-explorer/readiness/developers-new.aspx#webslices)（官方网站）
*   [所有你需要知道的关于 IE8 WebSlices - 最终用户与开发者](http://news.softpedia.com/news/All-You-Need-to-Know-about-IE8-WebSlices-End-Users-vs-Developers-80575.shtml)
*   [Internet Explorer 8 中的活动和网页切片](http://blogs.msdn.com/ie/archive/2008/03/06/activities-and-webslices-in-internet-explorer-8.aspx)
*   [为 IE8 创建基本 WebSlice](http://blogs.tech-recipes.com/shamanstears/2008/03/13/creating-basic-webslices-for-ie8/)
*   MSDN 上的[Internet Explorer 又名 IE 8 主页](http://msdn.microsoft.com/en-us/ie/default.aspx)
*   在 MSDN[上使用 Web Slices 订阅内容](http://msdn.microsoft.com/en-us/library/cc196992(VS.85).aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2010-08-10T13:52:05.443

关于身份验证和网络切片的好博客：

[http://blogs.msdn.com/b/ie/archive/2009/03/11/web-slice-and-feed-authentication-developer-guidelines.aspx](http://blogs.msdn.com/b/ie/archive/2009/03/11/web-slice-and-feed-authentication-developer-guidelines.aspx)

# java - 操作 Hibernate 二级缓存

> ID：702175
> 
> 赞同：5
> 
> 时间：2009-03-31T17:36:38.053
> 
> 标签：java, hibernate, caching, jakarta-ee, ehcache

我使用休眠作为我的 ORM 解决方案，使用 EHCache 作为二级（读写）缓存。

我的问题是：是否可以直接访问二级缓存？

我想访问这个：[http ://www.hibernate.org/hib_docs/v3/api/org/hibernate/cache/ReadWriteCache.html](http://www.hibernate.org/hib_docs/v3/api/org/hibernate/cache/ReadWriteCache.html)

如何访问 Hibernate 使用的同一个 ReadWriteCache？

我有一些我正在做的直接/自定义 JDBC 插入，我想自己将这些对象添加到二级缓存中。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2009-04-01T03:02:01.970

我会在映射到您的实体的 EntityPersister 上调用“afterInsert”，因为读/写是一种异步并发策略。在查看了 Hibernate 3.3 源代码后，我将其拼凑在一起。我不是 100% 认为这会奏效，但它对我来说看起来不错。

```
EntityPersister persister = ((SessionFactoryImpl) session.getSessionFactory()).getEntityPersister("theNameOfYourEntity");

if (persister.hasCache() && 
    !persister.isCacheInvalidationRequired() && 
    session.getCacheMode().isPutEnabled()) {

    CacheKey ck = new CacheKey( 
                    theEntityToBeCached.getId(), 
                    persister.getIdentifierType(), 
                    persister.getRootEntityName(), 
                    session.getEntityMode(), 
                    session.getFactory() 
                );

    persister.getCacheAccessStrategy().afterInsert(ck, theEntityToBeCached, null);
} 
```

--

```
/**
 * Called after an item has been inserted (after the transaction completes),
 * instead of calling release().
 * This method is used by "asynchronous" concurrency strategies.
 *
 * @param key The item key
 * @param value The item
 * @param version The item's version value
 * @return Were the contents of the cache actual changed by this operation?
 * @throws CacheException Propogated from underlying {@link org.hibernate.cache.Region}
 */
public boolean afterInsert(Object key, Object value, Object version) throws CacheException; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-04-01T03:40:25.247

我通过创建自己的缓存提供程序来做到这一点。我只是覆盖了 EhCacheProvider 并将我自己的变量用于管理器，因此我可以将它以静态形式返回。获取 CacheManager 后，您可以调用 manager.getCache(class_name) 来获取该实体类型的 Cache。然后使用主键、类型和类名构建一个 CacheKey：

```
 CacheKey cacheKey = new CacheKey(key, type, class_name, EntityMode.POJO,
    (SessionFactoryImplementor)session.getSessionFactory()); 
```

缓存本质上是一个地图，因此您可以检查您的对象是否在缓存中，或者遍历实体。

当您最初构建 SessionFactory 时，可能有一种访问 CacheProvider 的方法，这将避免您自己实现的需要。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-15T09:03:49.553

hibernate 和 JPA 现在都提供对底层二级缓存的直接访问：

```
sessionFactory.getCache();
entityManager.getCache(); 
```

# database - 一个光荣的报告工具

> ID：702178
> 
> 赞同：3
> 
> 时间：2009-03-31T17:38:41.997
> 
> 标签：database, reporting, report, wizard

我正在寻找一个出色的报告工具。我知道光荣是一个主观的术语，但是......这是我的愿望：

*   对于业务类型来说非常简单
*   不需要我指定任何 SQL
*   可以检查数据库的模式来解释用户的请求，而无需程序员干预
*   成本几乎为零
*   可以保存常用制作的报告

这听起来很像数据透视表，除了那些对于这种环境来说太复杂了。

是否存在这样的工具，或者我注定要在公司编程生涯的剩余时间里写一份报告？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2009-03-31T17:43:41.717

一个无所不能的报告向导一直是许多编程公司的梦想。

第一步是意识到它的不可实现。第 2 步是在完美的向导和整天编写自定义报告的程序员之间找到一个快乐的媒介。

尝试创建一个公司特定的向导。我做了一个方便的“让用户去做”类型的过滤。我为用户要过滤的每个字段提供一个文本框，并让他们添加逗号分隔的过滤器，使用 % 作为通配符，- 用于范围，并从中构造查询。它还有助于将结果转储到 excel 中，并让营销暴徒从那里开始使用它（他们通常使用 excel 非常方便）。

它变得毛茸茸的地方是连接。与其试图找出要在报告中加入哪些表，不如为它们提供 6-12 个标准分组，每个预定义的分组应该涵盖几乎所有内容。我使用选项卡 UI 做到了这一点。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2011-03-07T23:13:04.473

我推荐[HTSQL](http://htsql.org/)。查询只是遵循许多可预测约定的 URL（例如 .../sales?state='OH' for SELECT * FROM sales WHERE state='OH'）。设置很简单，演示文稿很好看。一定要浏览陈列柜。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2009-07-21T18:53:55.363

临时报告的可怕之处在于：您肯定会得到答案。知道答案是*正确*的就是当您需要我们时 - 了解架构的人。

当您尝试通过限制报告的种类或范围来适应这种情况时，您可以对简单的过滤器进行操作，从而使它们变得越来越没用。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2011-02-14T14:39:28.070

我建议尝试（我们自己的）**[i-net Clear Reports](http://www.inetsoftware.de/products/crystal-clear)**。在我看来这是光荣的（但我承认有很大的偏见......;）。

*   查看我们非常简单[的临时](https://www.inetsoftware.de/external-services/remote/public/remote/adhoc)报告组件的演示。
*   可以导出为任何主要格式，如 PDF、HTML、SVG、XLS 等，以及 Java 小程序查看器。
*   我们提供免费且功能齐全的[报表设计](http://www.inetsoftware.de/products/crystal-clear/designer)器。
*   作为 WAR 文件安装在您的应用程序服务器上，或者可以用作您自己的应用程序中的库。
*   出色的技术支持（您通常会在几分钟或几小时内得到答复，而不是几天或几周）
*   可以阅读 Crystal Reports 模板。（对于很多客户来说，这是杀手级功能，因为您不必重新创建所有旧的 Crystal Reports 模板）
*   伟大而有竞争力的定价——如果你计算支持成本（你绝对应该这样做），**有效地“[低于开源](http://www.inetsoftware.de/support/news/why-i-net-crystal-clear-costs-less-than-open-source)”的成本将使你付出代价。**

# python - Django 与其他 Python Web 框架？

> ID：702179
> 
> 赞同：61
> 
> 时间：2009-03-31T17:39:02.620
> 
> 标签：python, django, wsgi, web-frameworks, turbogears

我几乎尝试了所有存在的 Python Web 框架，我花了很长时间才意识到没有灵丹妙药的框架，每个都有自己的优点和缺点。我从[Snakelets](http://snakelets.sf.net "小蛇")开始，并且非常享受能够毫不费力地在较低级别控制几乎所有东西，但后来我发现了[TurboGears](http://turbogears.org "涡轮齿轮")，并且从那时起我一直在使用它 (1.x)。像 Catwalk 和 web 控制台这样的工具对我来说是无价的。

但是随着 TurboGears 2 的推出，它带来了 WSGI 支持，并且在阅读了 Django 和 WSGI 阵营之间的宗教辩论之后，我真的在***“以正确的方式做事”***之间左右为难，例如，学习 WSGI，花费宝贵的时间编写功能这已经存在于 Django 和其他全栈框架中，而不是使用 Django 或一些为我做所有事情的高级框架。我可以看到后者的缺点非常明显：

1.  在这个过程中我没有学到任何东西
2.  如果我需要做任何较低级别的事情，那会很痛苦
3.  仅使用身份验证的基本站点所需的开销是疯狂的。（海事组织）

所以，我想我的问题是，哪个是更好的选择，或者只是一个意见问题，如果它以最小的麻烦实现了我想要的，我应该接受它并使用 Django（我想要身份验证和 CRUD 接口我的数据库）？我尝试了 Werkzeug、Glashammer 和朋友，但 AuthKit 和 Repoze 吓到了我，以及设置基本身份验证所涉及的步骤数量。我查看了 Pylons，但文档似乎缺乏，当引用身份验证或 CRUD 接口等简单功能时，各种 wiki 页面和文档似乎相互矛盾，版本等有不同的 hack。

* * *

感谢 S. Lott 指出我不够清楚。我的问题是：从长远来看，以下哪一项是值得的，但在短期内不会痛苦（例如，某种中间立场，有人吗？） - 学习 WSGI，还是坚持使用“包含电池”的框架？如果是后者，我将不胜感激关于是否应该再试一次 Django、坚持使用 TurboGears 1.x 或冒险进入其他框架的建议。

此外，我尝试过 CherryPy，但似乎找不到足够好的 CRUD 应用程序，我可以立即投入使用。

* * *

## 回答 #1

> 赞同：55
> 
> 时间：2009-03-31T22:25:31.977

> Django 和 WSGI 阵营之间的宗教辩论

您似乎对什么是 WSGI 和 Django 有点困惑。说 Django 和 WSGI 在竞争有点像说 C 和 SQL 在竞争：你在比较苹果和橘子。

Django 是一个框架，WSGI 是一个协议（由 Django 支持），用于服务器如何与框架交互。最重要的是，直接学习使用 WSGI 有点像学习汇编。这是一次很棒的学习体验，但它并不是你应该为生产代码做的事情（也不是打算这样做的）。

无论如何，我的建议是自己弄清楚。大多数框架都有“在一小时内制作一个 wiki/blog/poll”类型的练习。花一点时间与每一个，找出你最喜欢哪一个。毕竟，如果你不愿意尝试不同的框架，你怎么能在它们之间做出选择呢？

* * *

## 回答 #2

> 赞同：21
> 
> 时间：2009-03-31T18:11:31.370

我想说你对使用 Django 或类似的全栈框架“不学习任何东西”有点过于悲观，并且低估了文档和大型社区的价值。即使使用 Django，仍然有相当长的学习曲线；如果它没有做你想做的一切，它并不像框架代码是不可穿透的。

一些个人经验：我花了数年时间，断断续续地玩弄 Twisted/Nevow、TurboGears 和其他一些 Python Web 框架。我从来没有完成任何事情，因为框架代码永远未完成并且在我下面被重写，文档通常不存在或错误，唯一可行的支持是通过 IRC（我经常得到很好的建议，但如果我也问的话，我觉得我在强加许多问题）。

相比之下，在过去的几年里，我用 Django 淘汰了一些网站。与我之前的经验不同，它们实际上已部署并正在运行。Django 开发过程可能缓慢而谨慎，但它导致的比特腐烂和弃用要少得多，并且文档实际上很有帮助。

对 Django 的 HTTP 身份验证支持[终于在](http://code.djangoproject.com/ticket/689)几周前推出了，如果这就是你在 #3 中所指的。

* * *

## 回答 #3

> 赞同：16
> 
> 时间：2009-03-31T21:54:24.207

我建议再看看TG2。我认为人们没有注意到自上一个版本以来取得的一些进步。除了不断增长的 WSGI 实用程序堆栈之外，还有很多 TG2 特定的项目需要考虑。这里有几个亮点：

[TurboGears 管理系统](http://turbogears.org/2.0/docs/main/Extensions/index.html)- 数据库的这个 CRUD 接口可以使用声明性配置类完全自定义。它还与 Dojo 集成，为您提供无限可滚动的表格。服务器端验证也是自动化的。管理界面使用 RESTful url 和 HTTP 动词，这意味着使用行业标准以编程方式连接很容易。

[CrudRestController](http://turbogears.org/2.0/docs/main/Extensions/Crud/index.html) / [RestController](http://turbogears.org/2.0/docs/modules/tgcontroller.html?highlight=restcontroller#tg.controllers.RestController) - TurboGears 提供了一种结构化的方式来处理控制器中的服务。只需扩展我们的 RestController，您就可以使用标准化的 HTTP 动词。[将 Sprox](http://www.sprox.org)与 CrudRestController结合使用，您可以使用完全可自定义的自动生成表单将 crud 放在应用程序的任何位置。TurboGears 现在支持将 mime 类型作为 url 中的文件扩展名，因此您可以让控制器渲染 .json 和 .xml，并使用与渲染 html 相同的接口（从控制器返回字典）

如果您单击链接，您将看到我们有一组使用 sphinx 构建的新文档，它比过去的文档更广泛。

凭借最好的[Web 服务器](http://pylonshq.com)、[ORM](http://www.sqlalchemy.org)和[模板系统](http://genshi.edgewall.org/)（选择你自己的），很容易理解为什么 TG 对于想要快速上手的人来说是有意义的，并且随着网站的增长仍然具有可扩展性。

TurboGears 通常被视为试图达到一个移动的目标，但我们在发布方面是一致的，这意味着您不必担心在后备箱中工作以获得所需的最新功能。面向未来：更多 TurboGears 扩展将允许您的应用程序通过简单的粘贴命令来扩展功能。

* * *

## 回答 #4

> 赞同：11
> 
> 时间：2009-03-31T22:07:15.843

您的问题似乎是“是否值得学习 WSGI 并自己做所有事情”或使用“为您做所有事情的全栈框架”。

我会说这是一种错误的二分法，显然还有第三种方式。TurboGears 2 试图提供一条从“为你做所有事情”风格的框架到理解 WSGI 中间件的平滑路径，以及自定义框架的几乎每个方面以满足应用程序需求的能力。

我们可能不会在每个级别的每个地方都取得成功，但特别是如果你已经有一些 TurboGears 1 的经验，我认为 TG2 的学习曲线一开始会非常非常容易，你将有能力在什么时候更深入你需要它。

要解决您的特定问题：

*   我们提供了一个开箱即用的授权系统，与您在 TG1 中使用的系统相匹配。
*   我们提供了一个开箱即用的“django admin”之类的界面，称为 tgext.admin，它与 dojo 配合使用非常好，可以将精美的电子表格之类的界面作为默认界面。

我还想谈谈现有的几个其他选项，并谈谈好处。

*   **樱桃派。** 我认为 CherryPy 是一个很棒的网络服务器和一个很好的简约网络框架。它内部不是基于 WSGI，但具有良好的 WSGI 支持，尽管它不会为您提供“全栈”体验。但是对于既需要快速又不是特别适合 Django 或 TurboGears 提供的默认设置的自定义设置，这是一个很好的解决方案。

*   **姜戈。**我认为 Django 是一个非常好的、紧密集成的网站开发系统。如果您的应用程序和工作风格非常适合它的标准设置，那就太棒了。但是，如果您需要调整数据库使用、替换模板语言、使用不同的用户授权模型或以其他方式做事，您很可能会发现自己与框架作斗争。

*   **Pylons** 像 CherryPy 这样的 Pylons 是一个很棒的简约网络框架。与 CherryPy 不同的是，它在整个系统中启用了 WSGI，并提供了一些健全的默认值，例如 SQLAlchemy 和 Mako，可以帮助您很好地扩展。新的官方文档比旧的 wiki 文档质量要好得多，这就是您所看到的。

* * *

## 回答 #5

> 赞同：7
> 
> 时间：2009-03-31T17:46:40.823

你看过 CherryPy 吗？它简约，但高效且简单。它的级别足够低，不会妨碍他们，但足够高以隐藏复杂性。如果我没记错的话，TurboGears 就是建立在它之上的。

使用 CherryPy，您可以选择很多东西。（模板框架、ORM（如果需要）、后端等）

* * *

## 回答 #6

> 赞同：7
> 
> 时间：2009-03-31T22:44:35.927

> 学习 WSGI

WSGI 非常简单。它基本上是一个看起来像的函数。

```
def application(environ, start_response) pass 
```

收到 HTTP 请求时调用该函数。`environ`包含各种数据（如请求 URI 等），`start_response`是一个可调用函数，用于设置标头。

返回值是网站的正文。

def application(environ, start_response): start_response("200 OK", []) return "..."

这就是它的全部内容，真的......它不是一个框架，而是一个供网络框架使用的协议......

对于创建站点，使用 WSGI*不是*“正确的方式”——使用现有的框架是……但是，如果你正在编写 Python 网络框架，那么使用 WSGI 绝对是正确的方式……

你使用哪个框架（CherryPy、Django、TurboGears 等）基本上是个人喜好。在每个框架中玩，看看你最喜欢哪个，然后使用它。有一个关于这个的 StackOverflow 问题（有一个很好的答案），[“对直接 python 框架的建议"](https://stackoverflow.com/questions/7170/recommendation-for-straight-forward-python-frameworks)

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2009-03-31T18:12:33.490

你检查过 web2py 吗？在最近评估了许多 Python Web 框架后，我决定采用这个。如果您还没有，还请查看 Google App Engine。

* * *

## 回答 #8

> 赞同：2
> 
> 时间：2009-04-01T09:36:46.483

我想说正确的答案取决于你真正想要和需要的东西，因为从长远来看，什么是值得的，取决于你从长远来看需要什么。如果您的目标是尽快部署应用程序，那么“更简单”的路线，即。Django，肯定是要走的路。一个经过充分测试和有据可查的系统的价值，正是您想要的不能被低估。

另一方面，如果您有时间学习可能适用于其他领域的各种新事物，并希望拥有最广泛的定制范围，那么 Turbogears 之类的东西会更好。Turbogears 为您提供了最大的灵活性，但您*将*不得不花费大量时间阅读外部文档，如 Repoze、SQLAlchemy 和 Genshi 以完成任何有用的事情。在某些情况下，TG2 文档故意不如 TG1 文档详细，因为人们认为外部文档比以前更好。这种事情是障碍还是投资，取决于你自己的要求。

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2009-03-31T19:04:16.643

Django 绝对值得学习，听起来很适合您的目的。它附带的管理界面易于启动和运行，并且确实使用身份验证。

至于“任何较低级别”，如果您的意思是 sql，则完全可以使用 extra 关键字将 sql 推入您的查询中。从风格上讲，你总是尽量避免这种情况。

至于“什么都不学”……真正的问题是你的偏好是主要学习低层次的东西还是高层次的东西，这几乎不是这里任何人都可以为你回答的问题。

* * *

## 回答 #10

> 赞同：1
> 
> 时间：2009-05-29T14:09:47.780

Pylons 对我来说似乎是一个很棒的工具：

*   一个真正的 Web 框架（CherryPy 只是一个 Web 服务器），
*   小型代码库 - 重用其他项目，
*   完全考虑到 WSGI 编写，基于 Paste，
*   允许您立即编写应用程序并在必要时触摸低级位，

我使用过 CherryPy 和 TurboGears 并查看了许多其他框架，但没有一个像 Pylons 那样轻巧高效。查看[Google 上的演示文稿](http://www.youtube.com/watch?v=Ui-mSFuUZmQ)。

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2009-03-31T19:11:10.853

我是 TurboGears 的粉丝，这正是原因：在控制和做事正确与简单之间进行了很好的权衡。

当然，你必须做出自己的决定。也许你更愿意学得更少，也许更多。也许我喜欢知识/控制的领域（例如数据库），你不会关心的。并且不要误会。我没有将任何框架描述为必然是困难或错误的。这只是我的主观判断。

如果可能的话，我也会推荐 TurboGears 2。当它出现时，我认为它会比 1.0 好得多，因为它选择了默认值（genshi、pylons、SqlAlchemy）

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2009-03-31T19:46:54.637

我建议使用 TurboGears 2。他们在整合 Python 世界的精华方面做得非常出色。

**WSGI：**假设您正在 TG2 或其他一些框架中开发中等复杂的项目/业务解决方案，比如 Grok。即使这些框架支持 WSGI，这是否意味着使用这些框架的人必须学习 WSGI？在大多数情况下，答案是否定的。我的意思是毫无疑问拥有这些知识是件好事。

WSGI 知识可能在以下情况下更有用

*   您想使用一些中间件或其他一些未作为标准堆栈的一部分提供的组件，例如。带有 TG 的 Authkit 或[没有 ZODB 的 Grok](http://blog.d2m.at/2008/04/13/grok-without-zodb-wsgi-based/)。
*   你正在做一些整合。

**CherryPy**很好，但考虑在事务结束时处理您的数据库提交/回滚，公开 json，在这种情况下进行验证 TG，类似 Django 的框架为您完成所有工作。

* * *

## 回答 #13

> 赞同：-1
> 
> 时间：2015-11-12T01:36:31.150

Web2py 是这里的秘诀。不要错过检查它。

# ruby-on-rails - Rails 2.3 中的测试服务器端口有变化吗？

> ID：702180
> 
> 赞同：1
> 
> 时间：2009-03-31T17:39:10.340
> 
> 标签：ruby-on-rails, ruby, testing

我昨天将 rails 从 2.1.1 升级到了 2.3.2，我的一些测试开始失败。

当我在 2.1.1 下运行时，测试服务器在端口 3000 上运行，所以我有一个包含端口的 HOST_DOMAIN 变量 - HOST_DOMAIN = "localhost.tst:3000"。这样我的 assert_redirected_to 就会成功。

然而，现在测试服务器似乎在端口 80 上运行，因此 HOST_DOMAIN 中的端口导致测试失败。

没有具体原因我将端口保留在 HOST_DOMAIN 中。我更想知道 Rails 2.3 中的某些东西是否改变了测试服务器运行的端口，以及我可以在哪里阅读更多关于原因的信息。我已经搜索了很多，但找不到任何东西，所以我要去我的去处询问开发问题:)

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2010-06-03T06:42:19.060

测试请求使用“test.host”，即端口 80。你可以写

```
@request.host = 'www.example.com'
@request.port = 3000 
```

[http://lists.rubyonrails.org/pipermail/rails/2006-April/030204.html](http://lists.rubyonrails.org/pipermail/rails/2006-April/030204.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-06-05T20:31:37.477

您具体指的是哪个测试服务器？

您是在谈论在集成和“功能”测试中运行的“模拟”服务器吗？

我假设您正在使用 rails 的内置 test::unit 东西？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-04-01T02:50:11.500

默认仍然是端口 3000，您的配置必须以某种方式更改它。

编辑：我不喜欢阅读。我以为您的意思是在命令行上运行脚本/服务器时。

# html - 用 div 替换 HTML 表格

> ID：702181
> 
> 赞同：55
> 
> 时间：2009-03-31T17:39:20.980
> 
> 标签：html, css, html-table

好吧，我正在尝试接受不应该使用 html 表格，而应该使用 div 的想法。但是，我经常有类似于以下的代码

```
<table>
    <tr>
        <td>First Name:</td>
        <td colspan="2"><input  id="txtFirstName"/></td>
    </tr>
    <tr>
        <td>Last Name:</td>
        <td colspan="2"><input  type="text" id="txtLastName"/></td>
    </tr>
    <tr>
        <td>Address:</td>
        <td>
            <select type="text" id="ddlState">
                <option value="NY">NY</option>
                <option value="CA">CA</option>
            </select>
        </td>
        <td>
            <select type="text" id="ddlCountry">
                <option value="NY">USA</option>
                <option value="CA">CAN</option>
            </select>
        </td>
    </tr>
</table> 
```

我希望标签对齐，我希望控件对齐。如果不使用表格，我将如何做到这一点？

* * *

## 回答 #1

> 赞同：43
> 
> 时间：2009-03-31T18:16:56.630

这应该可以解决问题。

```
<style>
div.block{
  overflow:hidden;
}
div.block label{
  width:160px;
  display:block;
  float:left;
  text-align:left;
}
div.block .input{
  margin-left:4px;
  float:left;
}
</style>

<div class="block">
  <label>First field</label>
  <input class="input" type="text" id="txtFirstName"/>
</div>
<div class="block">
  <label>Second field</label>
  <input class="input" type="text" id="txtLastName"/>
</div> 
```

我希望你明白这个概念。

* * *

## 回答 #2

> 赞同：26
> 
> 时间：2009-03-31T18:26:59.727

请注意，尽管不鼓励将表格作为页面布局的主要方式，**但它们仍然有自己的位置**。表格可以而且*应该*在适当的时间和地点使用，直到一些更流行的浏览器（ahem、IE、ahem）变得更加符合标准，表格*有时*是解决问题的最佳途径。

* * *

## 回答 #3

> 赞同：10
> 
> 时间：2012-09-13T12:40:49.947

我到处寻找一个简单的解决方案，发现这段[代码](http://snook.ca/archives/html_and_css/getting_your_di "点击")对我有用。`right`div 是我为了可读性而留下的第三列。

这是HTML：

```
<div class="container">
  <div class="row">
    <div class="left">
      <p>PHONE & FAX:</p>
    </div>
    <div class="middle">
      <p>+43 99 554 28 53</p>
    </div>
    <div class="right"> </div>
  </div>
  <div class="row">
    <div class="left">
      <p>Cellphone Gert:</p>
    </div>
    <div class="middle">
      <p>+43 99 302 52 32</p>
    </div>
    <div class="right"> </div>
  </div>
  <div class="row">
    <div class="left">
      <p>Cellphone Petra:</p>
    </div>
    <div class="middle">
      <p>+43 99 739 38 84</p>
    </div>
    <div class="right"> </div>
  </div>
</div> 
```

和CSS：

```
.container {
    display: table;
    }
.row  {
    display: table-row;
    }
.left, .right, .middle {
    display: table-cell;
    padding-right: 25px;
    }
.left p, .right p, .middle p {
    margin: 1px 1px;
   } 
```

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2009-03-31T18:56:55.177

您*可以*创建简单的基于浮动的表单，而不必丢失您的流动布局。例如：

```
<style type="text/css">
    .row { clear: left; padding: 6px; }
    .row label { float: left; width: 10em; }
    .row .field { display: block; margin-left: 10em; }
    .row .field input, .row .field select {
        width: 100%;
        box-sizing: border-box;
        -moz-box-sizing: border-box; -webkit-box-sizing: border-box; -khtml-box-sizing: border-box;
    }
</style>

<div class="row">
    <label for="f-firstname">First name</label>
    <span class="field"><input name="firstname" id="f-firstname" value="Bob" /></span>
</div>
<div class="row">
    <label for="f-state">State</label>
    <span class="field"><select name="state" id="f-state">
        <option value="NY">NY</option>
    </select></span>
</div> 
```

但是，当您有复杂的表单布局时，这确实会崩溃，其中有多个固定和灵活宽度列的网格。此时，您必须决定是坚持使用 div 并放弃流式布局，而是将所有内容都放到固定的像素位置，还是让表格来做。

就我个人而言，流动布局是一个比用于布局表单的确切元素更重要的可用性功能，所以我通常选择表格。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2009-03-31T17:47:02.303

基本上它归结为使用固定宽度的页面并为这些标签和控件设置宽度。这是实现无表布局的最常见方式。

有很多方法可以设置宽度。 [Blueprint.css](http://www.blueprintcss.org/)是一个非常流行的 CSS 框架，可以帮助您设置列/宽度。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2015-07-14T21:58:10.123

有一个非常有用的在线工具，只是自动将表格转换为 div：

[http://www.html-cleaner.com/features/replace-html-table-tags-with-divs/](http://www.html-cleaner.com/features/replace-html-table-tags-with-divs/)

以及解释它的视频：[https ://www.youtube.com/watch?v=R1ArAee6wEQ](https://www.youtube.com/watch?v=R1ArAee6wEQ)

我每天都在使用它。我希望它有帮助；）

# c++ - 在构造函数中初始化，最佳实践？

> ID：702185
> 
> 赞同：8
> 
> 时间：2009-03-31T17:40:17.560
> 
> 标签：c++

我已经用 C++ 编程了一段时间，并且我使用了这两种方法：

```
class Stuff {
public:
     Stuff( int nr ) : n( nr ) { }
private:
     int n;
} 
```

或者

```
class Stuff {
public:
     Stuff( int nr ) { 
         n = nr;
     }
private:
     int n;
} 
```

注意： this 和[this](https://stackoverflow.com/questions/24551/best-practice-initialize-class-fields-in-constructor-or-at-declaration)不一样，类似但不一样。

什么被认为是最佳实践？

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2009-03-31T17:42:25.950

初始化器列表是首选。请参阅[常见问题解答 10.6](http://www.parashift.com/c++-faq-lite/ctors.html#faq-10.6)

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2009-03-31T17:55:57.040

使用初始化器的一大优势：如果在初始化器列表中的任何地方抛出异常，则将为那些已经初始化的成员调用析构函数——并且只为那些成员调用。

当您使用构造器主体来初始化对象时，您需要正确处理异常并适当地展开对象。这通常更难做对。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2009-03-31T17:46:07.860

尽可能使用初始化列表。对于 int 而言，这两种方式都没有多大关系，但对于更复杂的成员对象，您最终会得到被调用对象的默认构造函数，然后是对该对象的赋值，这很可能最终变慢。

另外，对于 const 成员或没有默认构造函数的成员，无论如何您都必须这样做。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2009-03-31T17:46:17.483

如果可能，请使用第一个版本。

第一个是使用初始化器列表进行初始化，并实际调用成员的构造函数。

二是赋值。如果 n 是具有默认构造函数的类型，则它已经被调用，然后您将分配给它。如果 n 没有默认构造函数，您将被迫使用第一种类型。同样，如果 n 是参考：`int &n`.

如果没有直接将参数之一传递给构造函数的成员的构造函数，则添加可以为您进行转换的私有静态函数可能是值得的。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2009-03-31T17:48:48.023

我通常会尽可能地尝试做初始化列表。一方面，这表明您正在初始化构造函数中的代码。const memebers*必须*以这种方式初始化。

如果您只是将代码放在构造函数的主体中，那么很可能有人会决定稍后将其中的大部分内容移到非构造函数的“设置”例程中。

不过，它可以被过度使用。我有一个同事喜欢创建具有 2 页初始化程序代码的类，没有构造函数代码，可能还有 2 页用于整个其余的类代码。我觉得这真的很难读。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2009-03-31T17:52:39.700

第二个选项不是初始化而是赋值。对于具有用户定义的默认构造函数的类型，第二个选项将调用默认构造函数，然后调用赋值运算符（无论是否用户定义）来分配值。

有些类型不能被默认初始化：如果你有一个没有默认构造函数的属性，持有引用（常量或非常量）或有常量属性，它们必须在初始化列表中初始化。

数组可以在初始化列表中进行值初始化，但不能在构造函数主体中进行：

```
class X {
public:
   X() : array() {} // value-initializes the array
// equivalent to:
// X() { for ( int i = 0; i < 10; ++i ) array[i]=0; }    
private:
   int array[10];
}; 
```

对于 POD 类型，您可以在初始化列表中对它们进行值初始化，但不能在括号内：

```
class X {
public:
   X() : pod() {} // value-initializes
// equivalent to (but easier to read and subtly faster as it avoids the copy):
// X() { pod = {}; } 
private:
   PODType pod;
}; 
```

最后，一些类通过使用构造函数来提供功能，这些构造函数在默认构造之后会更复杂（如果可以实现）。

```
class X
{
public:
   X() : v(10) {} // construct a vector of 10 default initialized integers
// equivalent to:
// X() { for ( int i = 0; i < 10; ++i ) v.push_back(0); }
private:
   std::vector<int> v;
}; 
```

最后，只要它们实际上是等价的，初始化列表在 C++ 中就更惯用了。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2009-03-31T17:59:04.817

我想补充一点，您不需要在 Header (.h) 上声明初始化列表。它可以在构造函数的实现中完成（这很常见）。

那么：

```
//Stuff.h
class Stuff {
public:
     Stuff( int nr );
private:
     int n;
}

//Stuff.cpp
Stuff::Stuff(int nr)
: n(nr)
{
    //initalize complex members
} 
```

是合法的，并且 imo 集中初始化重要的字段。有时我们需要在主体中初始化复杂的成员，所以你的初始化列表和复杂的初始化都在 .cpp 文件中。

# wcf - 这个 WCF 设置会起作用吗？

> ID：702187
> 
> 赞同：0
> 
> 时间：2009-03-31T17:40:58.277
> 
> 标签：wcf, iis

我对世界上的 WCF/IIS/MS Web 堆栈角落还很陌生，所以我希望能帮助我评估我的设计。

我需要的是一个以 URI 形式呈现大量资源的系统。每个资源都是一个 WCF Web 服务，提供许多读取和写入操作。我需要为不同的资源提供用户名/密码安全。

我希望如何完成这项工作是让 IIS 使用它用于其他一切的普通设备来处理安全性。然后使用 URL 重写将所有内容重新映射到单个 Web 服务，该服务将根据重写的查询字符串提供正确的资源。

*   这行得通吗？
*   我错过了什么吗？
*   有一个更好的方法吗？
*   如果您碰巧知道一个非常好的零碎教程（例如安全设置进入什么文件？）我会很感激链接？

目前只有少数（2 到 20 个）用户，因此最好使用静态配置文件，因为它以后不会引起问题。

正如我所说，我在这个领域几乎不知道杰克，所以我真的不知道我不知道什么。

* * *

我找到了一些链接（甚至不知道我是否正在寻找正确的方向）

*   [WCF 安全基础知识](http://www.devx.com/codemag/Article/33342/1763/page/1)（假设比我更熟悉）
*   [提高 Web 安全性：WCF 的场景和实施指南](http://www.codeplex.com/WCFSecurityGuide/Release/ProjectReleases.aspx?ReleaseId=15892)（真的很长，书本很长）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-03-31T17:56:07.197

是的，这听起来很正常。对于您想使用 ASP.NET 成员身份模块的身份验证，它提供了一个通用安全 API，可以使用集成（Windows 用户）、Web 表单登录、甚至 LiveID 或一些自定义身份验证。根据我的经验，MSDN 已被证明是一个很好的资源，这里有一篇动手[文章](http://msdn.microsoft.com/en-us/library/6e9y4s5t.aspx)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-03-31T18:01:55.747

对于 Web http 绑定，WCF 使用 WebGet 属性提供开箱即用的 Uri 重写。对于 SOAP，端点 URL 是相同的，所以我假设您需要 RESTful 端点。如果是这样，您需要基本身份验证而不是 WS-Security。

# c# - 这段代码可以优化吗？

> ID：702188
> 
> 赞同：7
> 
> 时间：2009-03-31T17:41:18.293
> 
> 标签：c#, .net, optimization, image-processing

我有一些循环遍历 2 个多维字节数组（大小相同）的图像处理代码。它从源数组中获取一个值，对其执行计算，然后将结果存储在另一个数组中。

```
int xSize = ResultImageData.GetLength(0);
int ySize = ResultImageData.GetLength(1);

for (int x = 0; x < xSize; x++)
{                
   for (int y = 0; y < ySize; y++) 
   {                                                
      ResultImageData[x, y] = (byte)((CurrentImageData[x, y] * AlphaValue) +
                                    (AlphaImageData[x, y] * OneMinusAlphaValue));
   }
} 
```

该循环当前需要大约 11 毫秒，我认为这主要是由于访问字节数组值，因为计算非常简单（2 次乘法和 1 次加法）。

我能做些什么来加快速度吗？这是我的程序的时间关键部分，此代码每秒被调用 80-100 次，因此任何速度增益，无论多么小都会有所作为。目前 xSize = 768 和 ySize = 576，但将来会增加。

**更新**：感谢[Guffa](https://stackoverflow.com/users/69083/guffa)（请参阅下面的答案），以下代码为我每次循环节省了 4-5 毫秒。虽然它是*不安全*的代码。

```
int size = ResultImageData.Length;
int counter = 0;
unsafe
{
    fixed (byte* r = ResultImageData, c = CurrentImageData, a = AlphaImageData)
    {
        while (size > 0)
        {
            *(r + counter) = (byte)(*(c + counter) * AlphaValue + 
                                    *(a + counter) * OneMinusAlphaValue);
            counter++;
            size--;
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2009-03-31T17:49:14.543

这些都是独立的计算，所以如果你有一个多核 CPU，你应该能够通过并行计算获得一些好处。请注意，您需要保留线程并让它们完成工作，因为如果每次都重新创建线程，线程创建的开销可能会使它变得更慢而不是更快。

另一件可能有效的事情是将工作分配给图形处理器。查看[这个问题](https://stackoverflow.com/questions/375011/utilizing-the-gpu-with-c)以获得一些想法，例如，使用[Accelerator](http://research.microsoft.com/en-us/projects/Accelerator/)。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2009-03-31T18:17:32.447

要获得此代码的任何真正加速，您需要使用指针来访问数组，这会删除所有索引计算和边界检查。

```
int size = ResultImageData.Length;
unsafe 
{
   fixed(byte* rp = ResultImageData, cp = CurrentImageData, ap = AlphaImageData) 
   {
      byte* r = rp;
      byte* c = cp;
      byte* a = ap;
      while (size > 0) 
      {
         *r = (byte)(*c * AlphaValue + *a * OneMinusAlphaValue);
         r++;
         c++;
         a++;
         size--;
      }
   }
} 
```

编辑：
固定变量无法更改，因此我添加了代码以将指针复制到可以更改的新指针。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2009-03-31T17:44:00.890

一种选择是使用不安全的代码：将数组固定在内存中并使用指针操作。不过，我怀疑速度的提高会如此剧烈。

一张纸条：你是怎么计时的？如果您使用的是 DateTime，请注意此类的分辨率很差。您应该添加一个外部循环并重复该操作十次——我敢打赌结果小于 110 毫秒。

```
for (int outer = 0; outer < 10; ++outer)
{
    for (int x = 0; x < xSize; x++)
    {                
         for (int y = 0; y < ySize; y++) 
         {                                                
              ResultImageData[x, y] = (byte)((CurrentImageData[x, y] * AlphaValue) +
                                             (AlphaImageData[x, y] * OneMinusAlphaValue));
         }
    }
} 
```

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2009-03-31T17:48:48.617

因为*看起来*矩阵中的每个单元格都是完全独立于其他单元格计算的。您可能希望考虑让多个线程处理此问题。为了避免创建线程的成本，您可以拥有一个线程池。

如果矩阵足够大，它可能是一个非常好的速度增益。另一方面，如果它太小，它可能无济于事（甚至伤害）。不过值得一试。

一个例子（伪代码）可能是这样的：

```
void process(int x, int y) {
    ResultImageData[x, y] = (byte)((CurrentImageData[x, y] * AlphaValue) +
        (AlphaImageData[x, y] * OneMinusAlphaValue));
}

ThreadPool pool(3); // 3 threads big

int xSize = ResultImageData.GetLength(0);
int ySize = ResultImageData.GetLength(1);

for (int x = 0; x < xSize; x++) {
     for (int y = 0; y < ySize; y++)  {
         pool.schedule(x, y);  // this will add all tasks to the pool's work queue
     }
}

pool.waitTilFinished(); // wait until all scheduled tasks are complete 
```

**编辑：** [Michael Meadows](https://stackoverflow.com/users/7643/michael-meadows)在评论中提到 plinq 可能是一个合适的选择：http: [//msdn.microsoft.com/en-us/magazine/cc163329.aspx](http://msdn.microsoft.com/en-us/magazine/cc163329.aspx)

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2009-03-31T17:50:31.420

我建议运行一些空测试来弄清楚你的理论界限是什么。例如，从循环内部取出计算，看看节省了多少时间。尝试用运行相同次数的单循环替换双循环，看看节省了多少时间。然后你可以确定你正在沿着正确的路径进行优化（我看到的两条路径是将双循环展平为单循环并使用乘法[也许使用查找表会更快]）。

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2009-03-31T17:55:14.343

真的很快，您可以通过反向循环并与 0 进行比较来获得优化。大多数 CPU 具有与 0 进行比较的快速操作。

例如

```
int xSize = ResultImageData.GetLength(0) -1;
int ySize = ResultImageData.GetLength(1) -1; //minor optimization suggested by commenter

for (int x = xSize; x >= 0; --x)
{                
     for (int y = ySize; y >=0; --y) 
     {                                                
          ResultImageData[x, y] = (byte)((CurrentImageData[x, y] * AlphaValue) +
                                         (AlphaImageData[x, y] * OneMinusAlphaValue));
     }
} 
```

请参阅[http://dotnetperls.com/Content/Decrement-Optimization.aspx](http://dotnetperls.com/Content/Decrement-Optimization.aspx)

* * *

## 回答 #7

> 赞同：3
> 
> 时间：2009-03-31T18:11:59.950

您可能正在遭受边界检查。就像 Jon Skeet 所说的那样，一个锯齿状数组而不是一个多维（即`data[][]`代替`data[,]`）会更快，虽然这看起来很奇怪。

编译器会优化

```
for (int i = 0; i < data.Length; i++) 
```

通过消除每个元素的范围检查。但这是某种特殊情况，它不会对 Getlength() 做同样的事情。

出于同样的原因，缓存或提升 Length 属性（将其放入 xSize 之类的变量中）也曾经是一件坏事，尽管我无法使用 Framework 3.5 进行验证

* * *

## 回答 #8

> 赞同：2
> 
> 时间：2009-04-01T16:52:49.760

尝试交换 x 和 y for 循环以获得更线性的内存访问模式和（因此）更少的缓存未命中，就像这样。

```
int xSize = ResultImageData.GetLength(0);
int ySize = ResultImageData.GetLength(1);

for (int y = 0; y < ySize; y++) 
{
    for (int x = 0; x < xSize; x++)
    {
        ResultImageData[x, y] = (byte)((CurrentImageData[x, y] * AlphaValue) +
            (AlphaImageData[x, y] * OneMinusAlphaValue));
    }
} 
```

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2009-03-31T17:43:51.500

如果您使用 LockBits 获取图像缓冲区，则应在外循环中循环 y 并在内循环中循环 x，因为它是存储在内存中的方式（按行，而不是按列）。我会说 11 毫秒是相当快的，但......

* * *

## 回答 #10

> 赞同：1
> 
> 时间：2009-03-31T17:43:57.863

图像数据是否必须存储在多维（矩形）数组中？如果您改用锯齿状数组，您可能会发现 JIT 有更多可用的优化（包括删除边界检查）。

* * *

## 回答 #11

> 赞同：1
> 
> 时间：2009-03-31T18:02:56.337

如果每次运行代码片段时 CurrentImageData 和/或 AlphaImageData 都不会更改，则可以在运行显示的代码片段之前存储产品并避免循环中的乘法。

编辑：我刚刚想到的另一件事：有时 int 操作比 byte 操作快。用您的处理器缓存利用率来抵消这一点（您将大大增加数据大小并承受更大的缓存未命中风险）。

* * *

## 回答 #12

> 赞同：1
> 
> 时间：2009-03-31T19:18:13.270

计算需要 442,368 次加法和 884,736 次乘法，我认为 11 毫秒在现代 CPU 上实际上非常慢。

虽然我不太了解 .net 的具体细节，但我知道高速计算并不是它的强项。在过去，我构建了具有类似问题的 Java 应用程序，我一直使用 C 库来进行图像/音频处理。

从硬件的角度来看，您要确保内存访问是顺序的，即按照缓冲区在内存中存在的顺序单步执行。您可能还需要重新排序，以便编译器利用可用的指令，例如 SIMD。如何解决这个问题最终将取决于您的编译器，我无法在 vs.net 上提供帮助。

在嵌入式 DSP 上我会爆发

(AlphaImageData[x, y] * OneMinusAlphaValue) 和 (CurrentImageData[x, y] * AlphaValue) 并使用 SIMD 指令计算缓冲区，可能在执行加法之前并行计算。也许做足够小的块来将缓冲区保存在 cpu 上的缓存中。

我相信您所做的任何事情都需要比 .net 所允许的更直接地访问内存/cpu。

* * *

## 回答 #13

> 赞同：1
> 
> 时间：2009-04-01T07:17:04.730

您可能还想看看 Mono 运行时及其 Simd 扩展。也许你的一些计算可以利用 SSE 加速，因为我收集到你基本上是在做向量计算（我不知道乘法加速到哪个向量大小，但有一些大小）

（宣布 Mono.Simd 的博文：http: [//tirania.org/blog/archive/2008/Nov-03.html](http://tirania.org/blog/archive/2008/Nov-03.html)）

当然，这在 Microsoft .NET 上是行不通的，但也许您对一些实验感兴趣。

* * *

## 回答 #14

> 赞同：1
> 
> 时间：2009-04-01T16:51:26.533

有趣的是，图像数据通常非常相似，这意味着计算可能非常重复。您是否探索过为计算做一个查找表？所以任何时候 0.8 乘以 128 - value[80,128] 你已经预先计算到 102.4，你只是查了一下？您基本上是在用内存空间换取 CPU 速度，但它可能对您有用。

当然，如果您的图像数据的分辨率太高（并且位数太高），这可能不切实际。

# ruby - 我如何找到一个开源的 Ruby 项目来工作？

> ID：702192
> 
> 赞同：4
> 
> 时间：2009-03-31T17:42:33.750
> 
> 标签：ruby, open-source

我应该去 SourceForge 并尝试通过搜索找到看起来很有趣的东西吗？或者是否有一个特定于 Ruby 的网站可以帮助您找到可以贡献的开源项目？

找到它之后，您通常只是向项目所有者发送一封电子邮件，看看您是否可以提供帮助，还是您只是开始向他们的存储库提交代码，他们会在审查质量后接受还是离开？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-03-31T21:34:57.950

Ruby 项目的标准托管站点是[RubyForge](https://RubyForge.Org/)。另一个比 RubyForge 稍早的站点是[Ruby Application Archive (RAA)](http://RAA.Ruby-Lang.Org/)。除了 RubyForge，还有很多 Ruby 项目托管在[SourceForge 上](https://SourceForge.Net/)。特定或与[JRuby](http://JRuby.Org/)相关的项目有时托管在[CodeHaus](http://Codehaus.Org/)或 Sun 的新项目托管站点[Kenai](https://Kenai.Com/)上。对于[IronRuby](http://IronRuby.Net/)，一些项目在[CodePlex](http://CodePlex.Com/)上运行。使用[Git](http://Git-SCM.Com/)版本控制系统的项目通常托管在[Gitorious](http://Gitorious.Org/)或[GitHub 上](https://GitHub.Com/)，而使用[Darcs的项目](http://Darcs.Net/)版本控制系统往往是自托管的。

然而，特别是大型 Rub​​y 项目通常有自己的基础设施，例如[Merb](http://Merbivore.Com/)、[DataMapper](http://DataMapper.Org/)，当然还有[Ruby on Rails](http://RubyOnRails.Org/)。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-03-31T17:44:58.330

我建议去[github](http://www.github.com)寻找项目。您可以四处搜索，轻松检查，项目所有者更容易管理您的更改。

# .net - WPF 组件隐藏设计器中的子组件

> ID：702194
> 
> 赞同：0
> 
> 时间：2009-03-31T17:42:51.597
> 
> 标签：.net, wpf, viewbox, visualdesigner

像视图框这样的一些组件在可视化设计器中显示为实心框。但是，它们可以包含子组件。要查看子组件，我将视图框注释掉。完成后，我必须删除评论以恢复功能。这很烦人。有没有办法在视觉设计器中永久地使视图框不可见（或表现得像dockview/stackview组件）？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-03-31T17:51:52.633

[没有可视化设计时的控件。](http://msdn.microsoft.com/en-us/library/cc165609.aspx)

# nhibernate - 在运行时添加 nHibernate 映射？

> ID：702195
> 
> 赞同：4
> 
> 时间：2009-03-31T17:42:57.087
> 
> 标签：nhibernate

**背景：**

尝试使用 nHibernate 时出现映射失败。该应用程序由几个程序集组成。其中一个程序集是有用的例程库，另一个是使用该库的应用程序代码。库程序集将自己添加到 nHibernate 配置中，但由于它不知道其他程序集，因此不会添加它们。我的 xml 映射文件位于应用程序程序集中。我认为它没有找到它，因为它没有在应用程序程序集中查找。

**问题：** 您可以在不将其添加到配置的情况下映射到任意程序集中的类吗？

如果没有，您可以在运行时添加映射吗？

谢谢

ps 我确实确保映射文件被标记为嵌入式资源

* * *

**更新 - 2009 年 4 月 3 日**

我更改了底层库以允许在初始化时添加程序集。这似乎工作得很好。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2009-03-31T17:59:48.560

您可以在构建会话工厂时在运行时添加映射：

```
ISessionFactory sf = new Configuration()
    .AddFile("Item.hbm.xml")
    .AddFile("Bid.hbm.xml")
    .BuildSessionFactory(); 
```

或与组件：

```
ISessionFactory sf = new Configuration()
    .AddAssembly("NHibernate.Auction")
    .BuildSessionFactory(); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2009-03-31T21:24:41.233

重新发表您的评论 - 不，一旦您构建了会话工厂，您就无法添加映射。但是，您可以重新创建会话工厂。请记住，虽然它可能是昂贵的操作（一秒钟左右）。

# c# - Response.Redirect 的奇怪错误

> ID：702203
> 
> 赞同：1
> 
> 时间：2009-03-31T17:44:22.857
> 
> 标签：c#, asp.net

尝试在我的 ASP.NET 页面之一中使用 Response.Redirect 时出现以下错误：

```
[ArgumentOutOfRangeException: Specified argument was out of the range of valid values.
Parameter name: offset]
   System.Web.HttpResponseStream.Write(Byte[] buffer, Int32 offset, Int32 count) +8858392
   System.Web.HttpResponseStreamFilterSink.Write(Byte[] buffer, Int32 offset, Int32 count) +30      
   System.Web.HttpWriter.Filter(Boolean finalFiltering) +8754611
   System.Web.HttpResponse.FilterOutput() +82
   System.Web.ApplicationStepManager.ResumeSteps(Exception error) +501
   System.Web.HttpApplication.System.Web.IHttpAsyncHandler.BeginProcessRequest(HttpContext context, AsyncCallback cb, Object extraData) +123
   System.Web.HttpRuntime.ProcessRequestInternal(HttpWorkerRequest wr) +379 
```

我以前从未见过这种情况。如果我在页面加载事件期间进行 Response.Redirect，就会发生这种情况。

有任何想法吗？

编辑：这不是我的代码，如果我只是在 Page_Load 中单独粘贴 Response.Redirect，就会发生这种情况。

编辑#2：使用 302 FOUND 标头工作正常，但这不是 response.redirect 应该做的吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-03-31T19:18:56.013

这可能不会有太大帮助，但是当偏移量 < 0（不是）或缓冲区长度为零时，异常本身会在 HttpResponseStream.Write(byte[] buffer, int offset, int count) 中引发。据我了解，如果启用缓冲输出并且设法将零字节写入流中，则可能会发生这种情况。

我会在进行重定向之前尝试调用 Flush 并尝试使用第二个参数。我还会检查 web.config 是否有任何自定义过滤器注册（虽然不太可能）。还要确保您的目标应用程序没有异步页面处理，这可能会造成严重破坏。

显然其他人也遇到了类似的错误，但通常是在编写自己的过滤器时。我最终会在汇编程序级别进行调试......

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-03-31T18:12:32.960

我会仔细查看目标页面的代码（因为您评论错误正在那里发生）。它可能正在使用取决于请求的东西。我从未见过类似的错误，但看起来您确实应该专注于该页面正在执行的任何特殊操作。

# mysql - 比较 mysql -indexes 中的两个字段？

> ID：702208
> 
> 赞同：2
> 
> 时间：2009-03-31T17:44:55.537
> 
> 标签：mysql, indexing

我相当确定我知道这个问题的答案，但任何想法都会非常有帮助......

首先，这是 MySQL 5.1.32-community。我有一个大表（数百万行，无法减小大小 - 即减小的大小），相关字段是两个日期时间字段。我们称它为 date1 和 date2。我需要运行一个返回所有行的选择查询（实际上是 UUID varchar(40)，其中 date1 > date2.

```
SELECT id FROM table1 WHERE date1 > date2; 
```

运行时间太长（2 分钟左右）。日期本身的索引显然没有任何作用。缺少存储两个日期之间的差异并对其进行索引 - 有什么方法可以减少查询时间？这似乎是一个基本的问题，但我总是想知道我是否只是错过了一些东西......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-03-31T17:51:36.207

你有没有计算过是否真的有太多的数据被返回，以至于需要很长时间才能返回所有数据？

```
select count(ID) from table1 WHERE date1 > date2; 
```

查询似乎很简单，您的数据量可能就是问题所在。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-12-25T18:11:55.603

我试图找到我自己的答案。

但我有一个线索：函数索引。

我在 Oracle Dbs 上使用过它。

但接缝 MySQL 缺乏支持：

[MySQL中是否可以有基于函数的索引？](https://stackoverflow.com/questions/10595037/is-it-possible-to-have-function-based-index-in-mysql)

# blackberry - 如何在 Blackberry Storm 上显示数字虚拟键盘？

> ID：702230
> 
> 赞同：1
> 
> 时间：2009-03-31T17:50:18.067
> 
> 标签：blackberry, keyboard

我在显示我想要的 Blackberry Storm 虚拟键盘时遇到了一些困难。我可以选择在某个屏幕上切换键盘的可见性。每当用户键入一个数字时，它都由屏幕处理，而不是任何特定字段（此屏幕上没有文本字段）。这很好用。当用户选择时，我可以显示和隐藏键盘。

我的问题是：如何使键盘显示的内容与将焦点放在应用了数字过滤器的 BasicEditField 上时显示的键盘相同，而不使用 BasicEditField 作为输入？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-04-02T22:33:58.893

我认为 BlackBerry 没有公开任何 API 以允许对显示的虚拟键盘类型进行编程控制。我似乎记得在 BB 论坛上读过它（虽然很遗憾我现在找不到它）。

您可以尝试做的一件事是将 BasicEditField 与数字字段一起使用，但将其放置在屏幕外以使其不可见。当您想要捕获用户的数字输入时，请将焦点放在该元素上。我没试过，这只是一个想法。

# svn - 是否有 svn 命令仅从客户端删除文件？

> ID：702233
> 
> 赞同：4
> 
> 时间：2009-03-31T17:51:07.597
> 
> 标签：svn

在 perforce 中，您可以发出“sync to none”命令从客户端删除文件，但在软件仓库（或 svn lingo 中的存储库）中保持原样。

> p4 同步 ...#none

svn中是否有类似的命令？

* * *

**编辑：**

感谢那些到目前为止已经回答的人。

澄清：

我不想在目录上使用 rm -rf ，因为它会删除所有文件，即使是那些仅限本地的文件。我也不想手动删除客户端和存储库中的单个文件。

'p4 sync ...#none' 命令允许我从客户端中删除位于仓库/存储库中的文件，并且只保留本地文件。

对于少量文件，这没什么大不了的，但是对于大量文件，手工操作很痛苦。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-03-31T18:00:37.153

您可以简单地在本地删除文件（使用操作系统的删除命令）。虽然，下次您更新工作副本时会重新创建该文件。

此外，从 1.5 版开始，您可以进行稀疏签出，您可以省略将存储库的某些部分写入工作副本。但如果我没记错的话，这适用于目录，而不是单个文件。

以下是描述稀疏检出功能的发行说明部分：http: [//subversion.tigris.org/svn_1.5_releasenotes.html#sparse-checkouts](http://subversion.tigris.org/svn_1.5_releasenotes.html#sparse-checkouts)

这是SVN书的相应章节：http: [//svnbook.red-bean.com/en/1.5/svn.advanced.sparsedirs.html](http://svnbook.red-bean.com/en/1.5/svn.advanced.sparsedirs.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-03-31T18:16:11.733

所以你基本上想删除所有版本化和未修改的文件？

您可以编写一个脚本，遍历所有文件并在它们上调用“svn status”，删除“svn status”给出空输出的文件......

* * *

编辑：一个天真的 python 脚本，用于删除未修改的文件。保留未版本化和本地修改的文件......这很**慢**，最好发出“svn stat -v”并解析它。该脚本仅删除文件，不涉及文件夹。

```
import os
from subprocess import *

def isUnchangedInRepo(name):
    output = Popen(["svn","stat",name], stdout=PIPE).communicate()[0]
    return len(output) == 0

for dirname, dirnames, filenames in os.walk('.'):
    for filename in filenames:
        testfile = os.path.join(dirname, filename)
        if(testfile.find("\\.svn") == -1) and isUnchangedInRepo(testfile):
            print testfile
#           os.remove(testfile) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-03-31T18:22:23.670

如果您只想删除存储库中的文件，而不是仅在本地可用的文件，您可以使用简单的 shell 脚本（在 Linux/cygwin 上）执行此操作，类似的东西

```
 svn  st -v | cut -c '41-' | xargs echo rm 
```

（**注意：**删除`echo`以真正删除任何内容）。

但是，这将删除存储库中的任何文件，无论本地修改状态如何。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2009-03-31T21:45:34.337

使用颠覆 1.6.0

```
svn update --set-depth exclude <file> 
```

这将从您的工作副本中删除该文件，并标记它不应在更新时返回。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2009-03-31T18:22:03.827

使用 TortoiseSVN，您可以创建本地化到该机器的忽略模式。不确定这是否适合您的情况。

[在http://arcware.net/tortoisesvn-global-ignore-pattern-vs-svn-ignore/](http://arcware.net/tortoisesvn-global-ignore-pattern-vs-svn-ignore/)上有很好的概述。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2009-03-31T18:34:49.787

采用

```
svn rm folderToDelete --keep-local 
```

使用 TortoiseSVN，按住 shift 键的同时右键单击文件夹，弹出[扩展菜单](http://tortoisesvn.net/node/347)，然后选择“删除（保留本地）”。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2009-03-31T21:57:38.643

或者创建一个补丁。这将在补丁文件中记录所有本地更改。

在tortoise中：右键->tortoiseSVN->创建补丁。您可以稍后将此补丁文件应用到另一个工作副本。

附言。你没有提到你为什么要这样做，但上面可能最终是你真正需要的。

# c# - 在 C# 中强制转换和使用“as”有什么区别？

> ID：702234
> 
> 赞同：47
> 
> 时间：2009-03-31T17:51:16.333
> 
> 标签：c#

如果有区别，做以下演员的两种方式有什么区别？

在这种情况下`e`是一个`GridViewRowEventArgs`对象。

```
GridView gv = (GridView)e.Row.FindControl("gv"); //first way

GridView gv2 = e.Row.FindControl("gv") as GridView; //second way 
```

* * *

## 回答 #1

> 赞同：81
> 
> 时间：2009-03-31T17:52:11.603

区别在于：

*   如果强制转换失败，它会抛出一个[`InvalidCastException`](http://msdn.microsoft.com/en-us/library/system.invalidcastexception.aspx).
*   如果`as`操作符失败，它只返回一个空引用。
*   您不能使用`as`不可为空的值类型（例如，您不能使用“ `o as int`”）。
*   cast 运算符也用于拆箱。（`as`可用于拆箱为可为空的值类型。）
*   cast 运算符还可以执行用户定义的转换。

编辑：我在[其他地方写过](https://stackoverflow.com/questions/496096/casting-vs-using-the-as-keyword-in-the-clr/496167#496167)我觉得什么时候适合使用哪个运算符。那可能值得一读……

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2009-03-31T18:07:19.150

上述答案中没有提到的是*意图*——你为什么要执行转换，以及（更重要的是）转换后的行会发生什么？

例如，我多次看到类似以下的代码：

> `if ((foo as SomeType).SomeMethod()) { /* ... */ }`

这可以与使用演员的版本进行比较：

> `if (((SomeType) foo).SomeMethod()) { /* ... */ }`

那么，这些中哪个更好呢？

演员是。

如果转换失败，使用`as`将导致。`NullReferenceException`

`InvalidCastException`如果转换失败，使用强制转换将导致。

现在告诉我，哪个对调试更有用？A `NullReferenceException`，几乎可以由任何东西产生，或者 an `InvalidCastException`，它可以让您知道实际出了什么问题？

因此，*仅*`as`当转换*实际上是*可选的时才使用（意味着在使用变量之前*必须*进行检查）。`null`否则，请使用演员表，从而使您的意图更加明确。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2009-03-31T17:56:04.607

安全演员**为**

```
variable as type 
```

和

```
(variable is type) ? (type)variable : (type)null 
```

并且不适用于值类型。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2009-03-31T17:53:56.890

一般来说，静态转换和“as”之间的区别在于，如果转换失败，它将抛出异常，而“as”只会将变量设置为空。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2009-03-31T17:55:12.423

“as”语句基本上尝试强制转换变量，如果失败则返回 null 而不是抛出异常。因此，您要转换的值必须是可为空的——引用类型或可为空的原语。在您的示例中，您必须执行以下操作：

```
int? i2 = o as int; 
```

或者它不会编译。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2009-03-31T17:53:50.727

但是，如果您使用引用类型，例如 Table，则第一个将引发 InvalidCastException，以防 o 无法分配给 Table，而第二个只会返回 null。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2009-03-31T17:56:34.853

除了 Jon 指出的问题之外，`as`关键字有效地转换`o`为`SomeClass`. 如果`o`不是从`SomeClass`它派生的，则返回`null`. 而简单的演员表会抛出异常。

```
SomeClass i2 = o as SomeClass; 
```

变成

```
SomeClass i2;
if (o is SomeClass)
    i2 = (SomeClass)o;
else
    i2 = null; 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2009-12-08T09:31:53.823

我可能会在这里说明显而易见的事情，但是使用“as”演员可以获得的一件事是，您可以保证最终得到您请求的类型的对象。这在某些情况下会派上用场。

# ruby-on-rails - Rails after_save 回调创建基于 column_changed 的 关联模型？

> ID：702236
> 
> 赞同：6
> 
> 时间：2009-03-31T17:51:18.393
> 
> 标签：ruby-on-rails, activerecord, callback

我有一个带有状态列的 ActiveRecord 模型。当模型与状态更改一起保存时，我需要将状态更改以及负责更改的人员写入历史文件。我在想 after_save 回调会很好用，但我不能使用 status_changed？动态方法来确定历史写入是必须执行的。如果模型已保存但状态未更改，我不想写入历史记录。我现在处理它的唯一想法是使用实​​例变量标志来确定 after_save 是否应该执行。有任何想法吗？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2009-11-10T18:02:43.647

自问题发布以来，这可能已经改变，但 after_save 回调应该有`*_changed?`可用的动态方法并正确设置：

```
class Order
  after_save :handle_status_changed, :if => :status_changed?
end 
```

或者

```
class Order
  after_save :handle_status_changed
  def handle_status_changed
    return unless status_changed?
    ...
  end
end 
```

使用 Rails 2.3.2 对我来说可以正常工作。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2009-04-06T08:04:32.897

请改用`before_save`回调。然后您可以访问新旧状态值。回调被包装在一个事务中，所以如果保存失败或被另一个回调取消，历史写入也将被回滚。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-04-01T15:11:50.733

我看到两个解决方案：

1.  就像你说的：添加一个变量标志并在设置时运行回调。

2.  更新记录后运行 save_history。

例子：

```
old_status = @record.status
if @record.update\_attributes(params[:record])
  save_history_here if old_status != @record.status
  flash[:notice] = "Successful!"
  ...
else
  ...
end 
```

* * *

## 回答 #4

> 赞同：-7
> 
> 时间：2012-03-29T17:41:14.107

有没有人听说过数据库触发器？如果您在数据库服务器上编写 on_update 数据库触发器，那么每次更新记录时，它都会在关联的审计表中创建先前记录值的历史副本。

这是我鄙视 Rails 的主要方面之一。它花费大量时间试图为开发人员做所有事情，以至于让开发人员误以为他们必须遵循诸如编写专门的 Rails 方法之类的粗俗做法来完成该死的数据库服务器已经完全能够自己完成的所有事情。

*再次对 Rails 摇头*

# delphi - LoadPackage 调用初始化，但 registerClass 不起作用

> ID：702246
> 
> 赞同：7
> 
> 时间：2009-03-31T17:53:17.763
> 
> 标签：delphi, delphi-7

我有一个单元，它在初始化部分定义了 TBla 和以下代码：

```
initialization
  RegisterClass(TBla);
  showMessage('registered'); 
```

这个单位是在一个包裹里面。行。

在一个按钮上单击我的应用程序，我有以下代码：

```
 LoadPackage('C:\temp\testes_packs\pack1\Package1.bpl');
  pc := GetClass('TBla');
  if pc = nil then
    ShowMessage('didnt work'); 
```

当我单击按钮时，会显示“已注册”消息。但是，“没用”也显示了。这表明初始化被调用但由于某种原因寄存器类不起作用。

好的，为了证明 LoadPackage 是问题所在，我将我的单元（包含 TBla 类）直接包含到我的项目中，并删除了 loadPackage 行，然后显示“已注册”消息并且 getClass 有效。

有任何想法吗？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2009-03-31T18:01:30.600

您的包需要在其“要求”列表中包含“rtl”和“vcl”。这样，类注册列表将是共享包中的一个，而不是您自己的包的私有列表。

此外，您的应用程序需要编译为使用运行时包。特别是，“rtl”和“vcl”包需要在其运行时包列表中。

如果不做这两件事，一个模块使用的类注册列表将与另一个模块使用的列表不同。它们都必须使用同一个，这样做的方法是确保两个模块共享 RTL 公开的列表。

# ubuntu - 如何自动化 dpkg/apt-get？

> ID：702248
> 
> 赞同：9
> 
> 时间：2009-03-31T17:53:21.337
> 
> 标签：ubuntu, debian, apt

我正在尝试创建一个自动下载新服务器包的脚本。但是，像 'mysql-server' 这样的一些东西不能自动安装，因为你需要先在 ncurses 界面中配置它们。我浏览了手册页，找不到任何合适的东西。

我不在乎以后是否必须上传/编辑 conf 文件——我只需要安装适当的软件包。

除了抓取压缩包并自己构建它们之外，任何人都知道该怎么做？

*UPDATE* 发现对于 mysql-server 之类的东西，你可以这样做：

```
DEBIAN_FRONTEND='noninteractive' apt-get install -yq mysql-server

```

但是期望看起来像我需要的东西 sun-java6-jdk; 还没评价

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2011-11-21T20:02:19.053

来自[ossramblings.com](http://www.ossramblings.com/preseed_your_apt_get_for_unattended_installs)的回答：

首先，正常安装你的包；然后，从 debconf 数据文件中提取配置答案：

```
sudo apt-get install debconf-utils
sudo debconf-get-selections | grep mypackage > something.seed 
```

然后，对于其他安装，您可以在安装包之前应用它：

```
sudo debconf-set-selections ./something.seed 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2016-08-12T02:19:20.080

任何`debconf`用于获取配置值的 Debian 软件包都可以在无人看管的情况下运行。诀窍是首先搜索给定软件包具有的任何配置*问题*`debconf`的预安装*答案。*

 *# 预安装配置答案

只需创建以下格式的文件，

```
# Use one line for each question
package-name question-name question-type answer
package-name question-name question-type really long \
answer here
package-name question-name question-type answer
... 
```

并将其输入系统，如下所示：

```
$ debconf-set-selections my-selections-file 
```

现在，你准备好了`apt-get install`，像往常一样。

## 一次性

由于此命令也从标准输入读取，您可以执行以下操作：

```
$ echo "man-db man-db/auto-update boolean true" | debconf-set-selections 
```

## 寻找默认答案

你怎么知道哪些包使用了这些配置答案？好吧，如果您已经以交互方式安装了相关软件包，则可以查询本地系统以查看当前配置了哪些值。`debconf-get-selections`打印当前系统的所有配置答案的列表。例如

```
$ debconf-get-selections | grep '^man' 
```

在我的系统上返回以下内容：

```
man-db  man-db/install-setuid   boolean false
man-db  man-db/auto-update      boolean true 
```

您可能需要安装该`debconf-utils`软件包才能使该命令可用。

## 样本

```
# Preset values to questions which would otherwise be asked while
# installing packages.
# Use debconf-set-selections to install
openssh-server  openssh-server/permit-root-login        boolean false
man-db  man-db/install-setuid   boolean false
man-db  man-db/auto-update      boolean true 
```

### 来源

*   [Anthony Towns 的回答](https://stackoverflow.com/a/705221/712526)和[烂尾链接](https://web.archive.org/web/20120618123342/http://www.davidpashley.com/blog/debian/java-license)
*   手动debconf [-set-selections(1)](http://manpages.ubuntu.com/manpages/xenial/en/man1/debconf-set-selections.1.html)
*   ServerFault 上的[重复答案](https://serverfault.com/a/407358/85654)

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2009-04-01T12:13:40.977

对于通过 debconf 提出问题的软件包（这是 ncurses 显示的内容），您可以预先回答问题。对于 sun-java，可以按照[http://www.davidpashley.com/blog/debian/java-license上的说明预先回答问题](https://web.archive.org/web/20120618123342/http://www.davidpashley.com/blog/debian/java-license)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-03-31T18:08:22.533

我不确定 mysql-server 到底需要什么配置，但你可以尝试类似 [expect](http://linux.die.net/man/1/expect)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2009-05-22T23:20:02.370

我会调查[cron-apt](http://packages.debian.org/lenny/cron-apt)。我自己没有尝试过，但它的包装描述听起来很有希望。

# c++ - 如何从 C++ 非托管 XLL 文件调用 Xlam 中的方法

> ID：702253
> 
> 赞同：0
> 
> 时间：2009-03-31T17:54:21.100
> 
> 标签：c++, excel, vba

我有一个带有一些方法的 Xlam 插件，我想从 C++ 非托管 Xll 文件中调用这些方法，有没有办法做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2009-03-31T18:52:27.903

可以使用[Excel12v](http://msdn.microsoft.com/en-us/library/bb687851.aspx)功能吗？

# php - 将值从 php 的一个关联数组分配到另一个数组

> ID：702255
> 
> 赞同：1
> 
> 时间：2009-03-31T17:54:23.550
> 
> 标签：php, declaration, variable-assignment, associative-array

我有一个`$params`从数据库中获取数据的变量：

```
$params = mssql_fetch_array($result) 
```

据我所知，它是关联数组。我想要另一个数组`$tempParams`来保存这个数组的值。我可以使用以下语句分配它：

```
$tempParams = $params 
```

此外，我是否需要一个语句来声明并为 $tempParams 赋值，或者这些可以分开吗？

我想问的另一个问题是以下陈述是正确的；虽然 $tempParams 包含值；

```
$params['column1'] = $tempParams['newColumns'] 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2009-03-31T18:01:52.063

是的，

```
$tempParams = $params; 
```

将所有值从 $params 复制到 $tempParams。

```
$params['foo'] = 'bar';
echo $tempParams['foo']; //nothing
$tempParams = $params;
echo $tempParams['foo']; //'bar'
$params['foo'] = 'hai';
echo $tempParams['foo']; //still: 'bar' 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-03-31T18:07:18.090

至于您的数组是否是关联的，请阅读[mysql_fetch_array()上的文档](http://us.php.net/mysql_fetch_array)

就分配而言，您实际上可以将其放在一个语句中

```
$tempParams = $params = mysql_fetch_array( $result, MYSQL_ASSOC ); 
```

这个简单的测试表明，当您进行这样的赋值时，两个变量都是单独的副本而不是引用。

```
$a = $b = array( 1, 2, 3 );

$b[1] = 'x';

echo '<pre>';
print_r( $a );
print_r( $b );
echo '</pre>'; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-03-31T18:07:39.663

是的，= 运算符将完全复制数组。

你可以自己检查一下：

```
// get the $params from DB
print_r ($params); // will output array contents
$tempParams = $params;
print_r ($tempParams); // must be the same as above 
```

在 PHP 中没有“声明”变量之类的东西，但是如果你想说 $tempParams 在赋值之前是一个数组，你可以这样做：

```
$tempParams = array (); 
```

这将使 $tempParams 成为一个内部没有元素的数组。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2009-03-31T18:38:06.017

对于数组、数字和关联数组，= 运算符将复制变量。并且这两个变量完全相互独立。但是，在处理对象时，= 运算符会创建对该对象的引用，并且两个变量都指向完全相同的对象。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2009-03-31T18:00:43.177

是的，您可以，但是如果您正在处理对象（取决于您使用的 PHP 版本），这可能会导致某种别名。

为什么要复制数组？你不能使用相同的原始变量（$params）吗？

# c# - C# 中的 F# 扩展方法

> ID：702256
> 
> 赞同：38
> 
> 时间：2009-03-31T17:54:30.927
> 
> 标签：c#, f#, extension-methods

如果您要在用 F# 编写的程序集中定义一些扩展方法和属性，然后在 C# 中使用该程序集，您会在 C# 中看到定义的扩展吗？

如果是这样，那就太酷了。

* * *

## 回答 #1

> 赞同：53
> 
> 时间：2009-03-31T18:05:45.440

```
[<System.Runtime.CompilerServices.Extension>]
module Methods =   
    [<System.Runtime.CompilerServices.Extension>]   
    let Exists(opt : string option) =                
    match opt with
       | Some _ -> true                  
       | None -> false 
```

只能通过将命名空间（使用 using）添加到将要使用它的文件中，才能在 C# 中使用此方法。

```
if (p2.Description.Exists()) {   ...} 
```

[这是原始博客文章的链接。](http://langexplr.blogspot.com/2008/06/using-f-option-types-in-c.html)

在评论“扩展静态方法”中回答问题：

```
namespace ExtensionFSharp 

module CollectionExtensions = 

  type System.Linq.Enumerable with   
    static member RangeChar(first:char, last:char) = 
      {first .. last} 
```

在 F# 中，您可以这样称呼它：

```
open System.Linq 
open ExtensionFSharp.CollectionExtensions 

let rangeChar = Enumerable.RangeChar('a', 'z') 
printfn "Contains %i items" rangeChar.CountItems 
```

在 C# 中，您可以这样称呼它：

```
using System;
using System.Collections.Generic;
using ExtensionFSharp;

    class Program
    {
        static void Main(string[] args)
        {
            var method = typeof (CollectionExtensions).GetMethod("Enumerable.RangeChar.2.static");

            var rangeChar = (IEnumerable<char>) method.Invoke(null, new object[] {'a', 'z'});
            foreach (var c in rangeChar)
            {
                Console.WriteLine(c);
            }
        }
    } 
```

现在，把我那该死的奖牌给我！

* * *

## 回答 #2

> 赞同：19
> 
> 时间：2009-03-31T21:36:59.537

尽管我有其他答案，但我还是从家里的盒子里用 F# CTP（在 VS shell 上）和 C# Express（所有免费的开发工具！）尝试了这个，这很有效：

F＃

```
#light
namespace MyFSharp

// C# way
[<System.Runtime.CompilerServices.Extension>]
module ExtensionMethods =
    [<System.Runtime.CompilerServices.Extension>]
    let Great(s : System.String) = "Great"

    // F# way
    type System.String with
        member this.Awesome() = "Awesome"
    let example = "foo".Awesome() 
```

C＃

```
using System;
using MyFSharp;  // reference the F# dll
class Program
{
    static void Main(string[] args)
    {
        var s = "foo";
        //s.Awesome(); // no
        Console.WriteLine(s.Great());  // yes
    }
} 
```

我不知道你可以这样做；漂亮。感谢@alex。

* * *

## 回答 #3

> 赞同：10
> 
> 时间：2016-09-24T16:57:40.313

出于某种原因，接受的答案建议使用反射来获取 F# 类型扩展方法。由于编译的方法名称在 F# 版本之间有所不同，并且可能会因参数、内联和其他命名相关问题而有所不同，所以我宁愿建议使用[`CompiledNameAttribute`](https://msdn.microsoft.com/en-us/visualfsharpdocs/conceptual/core.compilednameattribute-class-%5Bfsharp%5D)代替，它更容易与 C# 融合。此外，不需要反射（及其性能和类型安全问题）。

假设你在 F# 中有这个：

```
namespace Foo.Bar
module StringExt =
    type System.String with
        static member ToInteger s = System.Int64.Parse(s) 
```

您将无法直接调用它，编译后的版本将如下所示（取决于是否存在重载）：

```
namespace Foo.Bar
{
    using Microsoft.FSharp.Core;
    using System;

    [CompilationMapping(SourceConstructFlags.Module)]
    public static class StringExt
    {
        public static long String.ToInteger.Static(string s) => 
            long.Parse(s);
    }
} 
```

除非您使用反射，否则您无法访问该方法`String.ToInteger.Static`。然而，一个简单的方法装饰[`CompiledNameAttribute`](https://msdn.microsoft.com/en-us/visualfsharpdocs/conceptual/core.compilednameattribute-class-%5Bfsharp%5D)解决了这个问题：

```
namespace Foo.Bar
module StringExt =
    type System.String with
        [<CompiledName("ToInteger")>]
        static member ToInteger s = System.Int64.Parse(s) 
```

现在编译的方法在 Reflector 中是这样的，标记编译名称的变化：

```
namespace Foo.Bar
{
    using Microsoft.FSharp.Core;
    using System;

    [CompilationMapping(SourceConstructFlags.Module)]
    public static class StringExt
    {
        [CompilationSourceName("ToInteger")]
        public static long ToInteger(string s) => 
            long.Parse(s);
    }
} 
```

您仍然可以按照在 F# 中习惯的方式使用此方法（如`String.ToInteger`本例所示）。但更重要的是，您现在可以在没有反射或其他 C# 技巧的情况下使用此方法：

```
var int x = Foo.Bar.StringExt.ToInteger("123"); 
```

当然，您可以通过在 C# 中为`Foo.Bar.StringExt`模块添加类型别名来简化您的生活：

```
using Ext = Foo.Bar.StringExt;
....
var int x = Ext.ToInteger("123"); 
```

这与扩展方法不同，使用`System.Runtime.CompilerServices.Extension`属性装饰静态成员会被忽略。这只是一种使用来自其他 .NET 语言的[*类型扩展的简单方法。*](https://docs.microsoft.com/en-us/dotnet/articles/fsharp/language-reference/type-extensions)如果您想要一个似乎对类型起作用的“真正”扩展方法，请使用`let`此处其他答案中的 -syntax。

* * *

## 回答 #4

> 赞同：6
> 
> 时间：2009-03-31T21:26:54.507

根据[语言规范](http://research.microsoft.com/en-us/um/cambridge/projects/fsharp/manual/spec2.aspx)，第 10.7 节“类型扩展”：

可选的扩展成员是静态成员的语法糖。可选扩展成员的使用详细说明了对具有编码名称的静态成员的调用，其中对象作为第一个参数传递。此版本的 F# 中未指定名称的编码，并且与 C# 扩展成员的 C# 编码不兼容

# c# - 身份成员不支持类型“Microsoft.SqlServer.Types.SqlHierarchyId”

> ID：702257
> 
> 赞同：3
> 
> 时间：2009-03-31T17:54:55.140
> 
> 标签：c#, sql, linq-to-sql, orm, hierarchyid

我在尝试使用 Linq2Sql 从表中读取数据时遇到上述异常。有谁知道这里发生了什么？

# c# - 帮助设计 ac# '电子表格样式的应用程序'

> ID：702267
> 
> 赞同：0
> 
> 时间：2009-03-31T17:56:31.330
> 
> 标签：c#, architecture, gridview, oop

我需要创建一个应用程序来显示来自多个不同来源的数据（实时数据馈送和来自数据库的静态数据）。该应用程序主要需要满足以下要求：

*   在网格中显示数据，实时更新（现有数据和添加新行）
*   相应地格式化数据（如果 x 小于 y 则突出显示单元格黄色；更新时闪烁等）
*   网格的结构应该用xml定义，即过于简化：

    `<col name="Col1" source="DB" col="my_col" type="String"> <col name="Col2" source="RealTimeFeed" rtfield="MY_FIELD" type="Double">`

我可以为数据源编写处理程序，但由于我是 c# 新手，所以在决定数据模型时遇到了一些麻烦，特别是要使其易于在 DataGrid 上显示。

我看到 DataGrid 可以显示对象数组，前提是它们具有要显示的列的属性。这是最好的使用方法吗，记住在读取 XML 文件之前我不会知道行的属性吗？（即在这种情况下，我发现我有一个来自 Db 的字符串列 Col1 和来自实时提要的 Col2。）

或者我可以以某种方式从头开始创建和操作数据集并将其绑定到网格？（任何这样做的例子都会很有帮助）

在此先感谢您的帮助。我很欣赏这是一个相当开放的问题......

相对湿度

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-03-31T18:01:28.757

如果可能，我会使用 VSTO 并将 Excel 作为前端。这为用户提供了一个熟悉的、强大的界面，并为您省去了很多工作。听起来部分布局 XML 可以合并到 Excel 模板中，并且部分属于程序的 app.config。

如果 VSTO 在这里不是合适的技术，请澄清问题。

# silverlight - 如何枚举silverlight中的所有输入控件

> ID：702269
> 
> 赞同：0
> 
> 时间：2009-03-31T17:56:45.057
> 
> 标签：silverlight

是否可以在 silverlight 用户控件的代码隐藏中枚举所有输入控件？

例如，假设您想在后台向另一个服务执行表单提交。您需要发送一个 POST，其中包含您的 silverlight 页面上包含的所有输入。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-03-31T18:34:18.990

我不认为有一种自动的方法可以做到这一点，但您始终可以使用它`VisualTreeHelper`来遍历 Silverlight 应用程序的可视化树，并挑选出您感兴趣的任何控件的值。

但是，将控件绑定到 ViewModel 类的属性不是更容易吗？您可以向该类添加一个方法，然后根据它管理的属性为您构建 POST 请求。

# .net - 将一组值存储在配置文件中

> ID：702270
> 
> 赞同：4
> 
> 时间：2009-03-31T17:56:48.927
> 
> 标签：.net, collections, config

在 .Net 3.5 (Windows) 服务中，我想在配置文件中存储一小部分值。基本上，我需要允许管理员在这个小集合中添加和删除值。我需要在配置文件中添加什么来存储小值的集合，以及如何在 C# 中读取集合？

为了澄清，我正在寻找的集合是这样的数据：

```
<Illegal Characters>
  <CustomCollection value="?"/>
  <CustomCollection value="#"/>
  <CustomCollection value=","/>
</Illegal Characters> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-05-06T06:21:12.977

有一篇关于创建自定义配置节处理程序的好文章，它将值作为列表加载在[这里](http://www.dotneat.net/2007/10/16/StoringACollectionOnYourAppconfigUsingSectionHandlers.aspx)。

基本上你`IConfigurationSectionHandler`的 Create 方法应该是这样的：

```
public object Create(object parent, object configContext, XmlNode section)
{
    IList<string> illegal = new List<string>();
    XmlNodeList processesNodes= section.SelectNodes("CustomCollection");

    foreach (XmlNode child in processesNodes)
    {
        illegal.Add(child.Attributes["value"].InnerText);
    }
    return illegal;
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-04-01T03:49:19.187

作为替代方案，您可以将单个非法字符字符串作为正则表达式存储在配置文件中。这样您就不必遍历字符来检查它们是否在给定的字符串中使用 - 您可以根据正则表达式进行比较。可能会节省一些 cpu 和复杂性。

当然，如果管理员要直接编辑文件，使用单个 XML 节点会更容易。但是，如果他们通过应用程序本身更改字符列表，那么正则表达式可能会很好。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-03-31T18:05:52.943

如果值的数量很少并且与它们关联的名称是固定的，您应该能够将它们存储在 appSettings 配置部分并使用[ConfigurationManager](http://msdn.microsoft.com/en-us/library/system.configuration.configurationmanager.aspx) .AppSettings 集合引用它们。这对于标准键值对非常有效。如果您的数据比这更复杂，您可能希望定义自己的配置部分和关联的[ConfigurationSectionHandler](http://msdn.microsoft.com/en-us/library/system.configuration.iconfigurationsectionhandler.aspx)以将数据解析为您想要的任何自定义对象。您可能还需要实现[FileSystemWatcher](http://msdn.microsoft.com/en-us/library/system.io.filesystemwatcher.aspx)来检测对配置文件的更改并更新正在运行的应用程序的配置，除非启动/停止服务以应用新配置是可以接受的。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-03-31T18:03:20.737

我将描述 VB.NET 中的方式，因为我确信 C# 方式在某些情况下非常相似或相同。在解决方案资源管理器中打开我的项目下的 settings.settings 文件。添加所需的设置，例如“OutputPath”。然后，在代码中，引用它

```
variable = My.Settings.OutputPath

' If a user modifiable setting, you can use:
My.Settings.OutputPath = variable
My.Settings.Save() 
```

# ruby-on-rails - 在 Rails 中创建静态页面的最佳方法是什么？

> ID：702282
> 
> 赞同：4
> 
> 时间：2009-03-31T17:58:36.143
> 
> 标签：ruby-on-rails, ruby

我在我的 Ruby on Rails 应用程序中创建了一些资源：

```
localhost/admin/books
localhost/admin/users
localhost/admin/... 
```

现在我想创建一个静态页面，它只包含这些资源的链接并且可以从`localhost/admin`

我试图在其中创建页面`/public/admin/index.html`并且它可以工作，但不幸的是我必须在该文件中复制我的资源控制器的布局。

还有其他方法可以创建静态页面吗？

**编辑：**对于“静态页面”，我并不是指静态页面，因为该页面的*来源*是静态的。我的意思是*内容*是静态的，即不是由模型和/或数据库生成的。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2009-03-31T18:00:32.537

只需创建一个包含页面内容的视图，调用它`index.html.erb`，然后将控制器中的操作方法保留为无操作。

使用[页面缓存](http://guides.rubyonrails.org/caching_with_rails.html#page-caching)获得奖励积分。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-03-31T18:03:33.370

[Ryan Bates](http://railscasts.com)有一个关于这个主题的[截屏视频。](http://railscasts.com/episodes/117-semi-static-pages)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-06-18T12:18:43.027

现在最好使用`high_voltage`gem：[https ://github.com/thoughtbot/high_voltage](https://github.com/thoughtbot/high_voltage)

只需在 中创建`pages`目录，在`views`其中添加页面，然后使用类似的链接`link_to 'About', page_path('about')`

# c# - 如果嵌套控件中的控件实现了 INamingContainer，您是否只需要在嵌套控件上使用 FindControl？

> ID：702297
> 
> 赞同：0
> 
> 时间：2009-03-31T18:01:47.867
> 
> 标签：c#

我有一个 GridView，其中有一个 Panel，而该 Panel 内部是另一个 GridView。我不认为Panel实现了INamingContainer，所以我不需要先找到Panel控件然后在Panel中找到嵌套的GridView的原因吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-03-31T18:06:10.743

是的，INamingContainer 定义了控件需要具有唯一 ID 的上下文。

# unix - 如何确定 Solaris 系统的 IP 地址

> ID：702301
> 
> 赞同：35
> 
> 时间：2009-03-31T18:02:13.030
> 
> 标签：unix, networking, ip-address, solaris, ip

当我想知道我登录的 Solaris 机器的 IP 地址时，我想发出什么命令？

* * *

## 回答 #1

> 赞同：54
> 
> 时间：2009-03-31T18:54:10.130

如果您是普通用户（即不是“root”）**`ifconfig`**不在您的路径中，但这是您想要的命令。

进一步来说：**`/usr/sbin/ifconfig -a`**

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2009-03-31T20:05:51.113

以下对我来说效果很好：

```
ping -s my_host_name 
```

* * *

## 回答 #3

> 赞同：9
> 
> 时间：2011-08-26T04:58:33.747

```
/usr/sbin/ifconfig -a | awk 'BEGIN { count=0; } { if ( $1 ~ /inet/ ) { count++; if( count==2 ) { print $2; } } }' 
```

这将列出机器的确切 IP 地址

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2013-02-22T11:55:34.973

下面的 shell 脚本给出了一个很好的接口和 IP 地址的表格结果（不包括环回接口）它已经在 Solaris 机器上进行了测试

```
/usr/sbin/ifconfig -a | awk '/flags/ {printf $1" "} /inet/ {print $2}' | grep -v lo

ce0: 10.106.106.108
ce0:1: 10.106.106.23
ce0:2: 10.106.106.96
ce1: 10.106.106.109 
```

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2009-03-31T18:06:41.087

尝试使用`ifconfig -a`. 查找“inet xxx.xxx.xxx.xxx”，即您的 IP 地址

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2009-05-01T15:37:25.990

`hostname`并`uname`会给你主机的名字。然后使用`nslookup`将其转换为 IP 地址。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2013-03-09T21:09:40.020

还有：

```
getent $HOSTNAME 
```

或者可能：

```
getent `uname -n` 
```

在 Solaris 11 上，*ifconfig*命令被视为旧版命令，正在被*ipadm取代*

```
ipadm show-addr 
```

将显示 Solaris 11 及更高版本系统上的 IP 地址。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2009-04-10T09:19:15.297

```
/usr/sbin/host `hostname` 
```

应该做的伎俩。请记住，solaris 机器具有多个 IP 地址是一种非常常见的配置，但在这种情况下

```
 /usr/sbin/ifconfig -a inet | awk '/inet/ {print $2}' 
```

将它们全部列出

# wpf - WPF 将窗口大小锁定为 Viewbox 大小

> ID：702304
> 
> 赞同：0
> 
> 时间：2009-03-31T18:02:51.797
> 
> 标签：wpf, window, stretch, viewbox, uniform

我有一个窗口，其中包含一个具有均匀拉伸的可调整大小的视图框。然而，窗框并没有均匀地伸展。因此，当有人调整表单的大小时，空白的间隙会沿着表单的一个或另一个边缘打开。看起来很糟糕。有什么方法可以强制窗口仅均匀扩展？（或另一种看待它的方式，将其锁定到视图框边界）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-07-23T14:06:48.810

查看属性中的`ResizeMode`选项`MainWindow`。设置为`NoResize` 窗口大小在运行时不会改变。

您可以将其设置为`CanMinimize`, `CanResize`& `CanResizeWithGrip`。

# iphone - 是否可以在设置应用程序中动态更改 iphone 应用程序的设置页面？

> ID：702319
> 
> 赞同：3
> 
> 时间：2009-03-31T18:05:22.133
> 
> 标签：iphone, settings

对于我正在开发的 iPhone 应用程序，我希望能够在我的应用程序的设置区域中动态添加或删除部分。理想情况下，我希望能够更改多值说明符中的选项列表，并添加新行以深入到一个设置页面的副本中。我在苹果文档中没有看到任何关于此的内容，但是编译后是否可以更改设置模式？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2009-03-31T18:27:05.140

据我所知，您无法通过 SDK 执行此操作，因为应用程序设置架构基于在安装时部署的 plist，并且由于沙箱，您的应用程序在运行时将无法访问该文件。

正如许多人所指出的，“设置”应用程序实际上不再适用于琐碎的设置。我建议在您的应用程序中添加一个首选项部分。但我当然不会告诉你任何有用的东西。=)

* * *

## 回答 #2

> 赞同：-3
> 
> 时间：2010-07-17T19:37:44.227

你可以改变它。在 X 代码中，您必须在下面创建一个新文件，`Resource -> Settings Bundle`然后在下面`ApplicationSettings ->Settings.bundle`编辑`root.plist`. 就这么容易开始。连接它以连接是另一个问题。

# c++ - 用 C 重写 C++ 方法

> ID：702320
> 
> 赞同：0
> 
> 时间：2009-03-31T18:05:34.630
> 
> 标签：c++, c, struct, methods

如何在 C 中对这些方法进行等效处理？我在某处读到它们可以“替换为将结构指针作为第一个参数的函数”，但我不确定如何做到这一点，如果这是正确的做法。

```
struct SCustomKeys
{
    struct SCustomKey Save[10];
    struct SCustomKey Load[10];
    struct SCustomKey Slot[10];

    struct SCustomKey PrintScreen;
    struct SCustomKey LastItem; // dummy, must be last

    //--methods--
    struct SCustomKey &key(int i) { return ((SCustomKey*)this)[i]; }
    struct SCustomKey const &key(int i) const { return ((SCustomKey*)this)[i]; }
}; 
```

以下是如何使用它们的示例：

```
void ZeroCustomKeys (SCustomKeys *keys)
{
    int i = 0;

    SetLastCustomKey(&keys->LastItem);
    while (!IsLastCustomKey(&keys->key(i))) {
        keys->key(i).key = 0;
        keys->key(i).modifiers = 0;
        i++;
    };
} 
```

更多上下文： http: [//pastebin.com/m649210e8](http://pastebin.com/m649210e8)

谢谢您的帮助。不过，我还没有能够建议替换使用此函数的 C++ 方法。关于如何解决这个问题的任何想法？

```
void InitCustomKeys (struct SCustomKeys *keys)
{
    UINT i = 0;

    SetLastCustomKey(&keys->LastItem);
    while (!IsLastCustomKey(&keys->key(i))) {
        SCustomKey &key = keys->key(i);
        key.key = 0;
        key.modifiers = 0;
        key.handleKeyDown = NULL;
        key.handleKeyUp = NULL;
        key.page = NUM_HOTKEY_PAGE;
        key.param = 0;
        i++;
    };

    //an example key
    keys->PrintScreen.handleKeyDown = HK_PrintScreen;
    keys->PrintScreen.code = "PrintScreen";
    keys->PrintScreen.name = L"Print Screen";
    keys->PrintScreen.page = HOTKEY_PAGE_MAIN;
    keys->PrintScreen.key = VK_PAUSE;
} 
```

我现在正在尝试的新功能是：

```
 struct SCustomKey* key(struct SCustomKeys *scs, int i) { 
    return &(((SCustomKey*)scs)[i]); 
 } 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2009-03-31T18:10:07.397

基本上，而不是像这样的成员函数：

```
struct SCustomKey &key(int i) { return ((SCustomKey*)this)[i]; } 
```

您需要将其重写为一个函数，该函数将指向 SCustomKeys 的指针作为它的第一个参数。

该函数将如下所示：

```
SCustomKey* key(SCustomKeys* customKeys, int i) 
{ return ((SCustomKey*)(customKeys)+i); } 
```

这应该为您提供一个指向您尝试访问的元素的指针。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2009-03-31T18:08:48.693

```
 struct SCustomKey &key(int i) { return ((SCustomKey*)this)[i]; }
 struct SCustomKey const &key(int i) const {
     return ((SCustomKey*)this)[i]; 
 } 
```

会变成

```
 struct SCustomKey* key(struct SCustomKeys *scs, int i) { 
    /* Shouldn't you be using one of Load/Save/... arrays? */
    return &(((SCustomKey*)scs)[i]); 
 } 
```

C 没有`const`函数。所以，只有一个版本。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-03-31T18:11:07.580

我会用你的例子来解释。这是您的代码（实际上只有方法）：

```
struct SCustomKeys
{
    // snipped

    //--methods--
    struct SCustomKey &key(int i) { return ((SCustomKey*)this)[i]; }
    struct SCustomKey const &key(int i) const { return ((SCustomKey*)this)[i]; }
}; 
```

这就是我用 C 语言编写它的方式：

1.  添加一个指向该方法应该作用的结构的指针。
2.  返回指针而不是引用，因为 C 没有引用。
3.  我不认为`const`可以在 C 中使用相同的，所以我们只需要一个版本。

```
struct SCustomKeys
{
    // snipped
};
//--methods-- (outside the struct)

struct SCustomKey *key(struct sCustomkey *this, int i) { return &(((SCustomKey*)this)[i]); } 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-03-31T18:09:17.007

这个想法是，您将传递一个指向 SCustomKeys 的指针作为第一个（嗯，这并不重要；它可以是任何）参数，并使用它来代替“this”。

# sql - T-SQL：将“数字”格式化为类似于 c# 样式 {0:#.00####} 的格式

> ID：702322
> 
> 赞同：0
> 
> 时间：2009-03-31T18:05:51.930
> 
> 标签：sql, sql-server

有没有一种简单的方法可以将 SQL Server **numeric(18,6)**数据类型格式化为类似于 c# 的**{0:#.00####}**但在 T-SQL 中的格式？

例如

1.  12.550000 应该产生 12.55。
2.  14.456700 应该产生 14.4567。
3.  15.00 应该产生 15.00。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-03-31T18:26:21.133

坦率地说，这种类型的格式化最好由不在 SQL 中的应用程序完成。SQl 用于数据访问和影响数据的内容，它并不擅长任何格式化。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-11-30T13:30:11.517

没有尾随'.00'的情况有点不同：

```
CAST(CAST(@val AS REAL) AS VARCHAR) 
```

1.  12.550000 将产生 12.55。
2.  14.456700 将产生 14.4567。
3.  15.00 将产生 15。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2020-04-05T05:14:52.273

格式化值而不需要 Cast 和 Substring

使用函数调用`Format`

例子：

```
SELECT FORMAT(123456789, '##-##-#####');
DECLARE @d DATETIME = '10/01/2011';  
SELECT FORMAT ( @d, 'd', 'en-US' ) AS 'US English Result'  
,FORMAT ( @d, 'd', 'en-gb' ) AS 'Great Britain English Result'  
      ,FORMAT ( @d, 'd', 'de-de' ) AS 'German Result'  
      ,FORMAT ( @d, 'd', 'zh-cn' ) AS 'Simplified Chinese (PRC) Result';
SELECT FORMAT(@d, 'dd/MM/yyyy') AS FechaInicial 
SELECT FORMAT(@d, 'dd/MM/yyyy HH:mm:ss') AS FechaInicial 
declare @EndOfDayRate as decimal(18,4)='1.0002' 
SELECT  @EndOfDayRate   as EndOfDayRate
            ,FORMAT(@EndOfDayRate, 'N', 'en-us') AS 'Number Format'  
            ,FORMAT(@EndOfDayRate, 'G', 'en-us') AS 'General Format'  
            ,FORMAT(@EndOfDayRate, 'C', 'en-us') AS 'Currency Format'* 
```

复制并粘贴代码并在 SQL Server 上运行

SQL server 官方文档中的更多信息：[文档](https://docs.microsoft.com/en-us/sql/t-sql/functions/format-transact-sql?view=sql-server-ver15)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-03-31T18:14:49.490

有[CONVERT()](http://msdn.microsoft.com/en-us/library/ms187928.aspx)和[CAST()](http://msdn.microsoft.com/en-us/library/ms187928.aspx)函数

```
SELECT CAST(@val AS numeric(18,6))

SELECT CAST(@val AS decimal(18,6)) 
```

我还没有遇到过原生 T-SQL 格式字符串，但是从 2005 年开始，我相信您可以使用您选择的 .NET 语言编写的 CLR UDF 来实现一些东西。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2009-03-31T18:47:37.120

正如 HLGEM 所说，最好在前端做这种事情，但为了好玩，下面的代码似乎可以工作。不过，可能有更好的方法来做到这一点。

```
REPLACE(
     RTRIM(
          REPLACE(
               CAST(@test AS VARCHAR), '0', ' '
          )
     ), ' ', '0'
) +
CASE
     WHEN @test = FLOOR(@test) THEN '00'
     WHEN FLOOR(@test*10) = @test * 10 THEN '0'
     ELSE ''
END 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2021-08-14T02:08:17.233

我会使用带有适当标签“#.00”的指令“格式”来指示小数位数

```
declare @value1 as numeric(10,8)=12.550000;-- will produce 12.55.
declare @value2 as numeric(10,8)=14.456700; --will produce 14.4567.
declare @value3 as numeric(10,8)=15.00;--will produce 15.

select @value1,@value2,@value3,FORMAT (@value1, '#.00') ,FORMAT (@value1, '#.00'),FORMAT (@value2, '#.00'),FORMAT (@value3, '#.00') 
```

[![结果](https://i.stack.imgur.com/znw4f.png)](https://i.stack.imgur.com/znw4f.png)

# c# - XNA 的新手，一般问题

> ID：702334
> 
> 赞同：1
> 
> 时间：2009-03-31T18:07:38.587
> 
> 标签：c#, object, xna, user-input, collision

正如标题所指出的，我在 XNA 相对较新。然而，我的老板给了我一个琐碎的任务，看看我能不能完成它。我毫不怀疑我最终会这样做，但一些正确方向的指示会有所帮助。

这不是家庭作业，我只是在寻找一些提示和指示，因此我不必深入研究所有文档；）

*   我将如何将相机视点添加到我的项目中？
*   处理用户输入的最佳方式是什么（在这种情况下是键盘）
*   检测两个对象之间碰撞检测的最佳实践/常用方法？

另外我必须注意，我来自 C++ 背景，C# 对我来说是相当新的（尽管我之前做过一些小项目，比如这个）。对于这两种语言之间的转换过程的任何帮助，我们也将不胜感激。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-04-01T17:42:07.723

好吧，在不了解您的项目（例如 2D 或 3D）的情况下，我只能为您指明一些网站的方向，您可以在其中轻松找到有关这些主题的特定信息。查看上一个关于优秀[XNA 博客](https://stackoverflow.com/questions/661249/what-the-best-xna-blog/687761)的问题，因为列出的大多数网站都会有好地方供您搜索有关您尝试做的任何事情的信息（有很多示例）。

至于从 C++ 迁移到 C#，这里有一些资源可以帮助您：

*   [C++ -> C#：从 C++ 迁移到 C# 需要了解的内容](http://msdn.microsoft.com/en-us/magazine/cc301520.aspx)
*   [C++ 程序员的 C# 常见问题解答](http://andymcm.com/csharpfaq.htm)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-04-01T17:34:54.510

查看这个简单的 3d 教程，访问不同的章节位于右侧的菜单栏中。

[http://www.riemers.net/eng/Tutorials/XNA/Csharp/series1.php](http://www.riemers.net/eng/Tutorials/XNA/Csharp/series1.php)

它有简单的地形、键盘和摄像机角度信息，全部都是完整的代码，大约需要 2 个小时才能完成整个过程。请享用

# python - 如何使 Django slugify 与 Unicode 字符串一起正常工作？

> ID：702337
> 
> 赞同：45
> 
> 时间：2009-03-31T18:07:54.467
> 
> 标签：python, django, unicode, django-templates, slug

我可以做些什么来防止`slugify`过滤器去除非 ASCII 字母数字字符？（我正在使用 Django 1.0.2）

[cnprog.com](http://cnprog.com)有问题 URL 中的汉字，所以我查看了他们的代码。他们没有`slugify`在模板中使用，而是在`Question`模型中调用此方法以获取永久链接

```
def get_absolute_url(self):
    return '%s%s' % (reverse('question', args=[self.id]), self.title) 
```

他们是否对 URL 进行了处理？

* * *

## 回答 #1

> 赞同：100
> 
> 时间：2010-10-27T18:58:15.517

我为 askbot Q&A 论坛采用了一个名为[unidecode](http://pypi.python.org/pypi/Unidecode)的 python 包，它适用于基于拉丁语的字母表，甚至对于希腊语看起来也很合理：

```
>>> import unidecode
>>> from unidecode import unidecode
>>> unidecode(u'διακριτικός')
'diakritikos' 
```

它对亚洲语言做了一些奇怪的事情：

```
>>> unidecode(u'影師嗎')
'Ying Shi Ma '
>>> 
```

这有意义吗？

在 askbot 中，我们像这样计算 slug：

```
from unidecode import unidecode
from django.template import defaultfilters
slug = defaultfilters.slugify(unidecode(input_text)) 
```

* * *

## 回答 #2

> 赞同：24
> 
> 时间：2011-08-12T14:55:48.997

Mozilla 网站团队一直致力于实现： [https](https://github.com/mozilla/unicode-slugify) ://github.com/mozilla/unicode-slugify 示例代码 [http://davedash.com/2011/03/24/how-we-slug-at-mozilla /](http://davedash.com/2011/03/24/how-we-slug-at-mozilla/)

* * *

## 回答 #3

> 赞同：23
> 
> 时间：2016-03-23T10:30:55.683

使用**Django >= 1.9**，[`django.utils.text.slugify`](https://docs.djangoproject.com/en/stable/ref/utils/#django.utils.text.slugify)有一个`allow_unicode`参数：

```
>>> slugify("你好 World", allow_unicode=True)
"你好-world" 
```

如果您使用 Django <= 1.8（自 2018 年 4 月起您不应该使用它），您可以[从 Django 1.9 获取代码](https://github.com/django/django/blob/1.9/django/utils/text.py#L413-L427)。

* * *

## 回答 #4

> 赞同：15
> 
> 时间：2010-10-25T21:45:40.603

此外， slugify 的 Django 版本不使用 re.UNICODE 标志，因此它甚至不会尝试理解`\w\s`它与非 ascii 字符有关的含义。

这个自定义版本对我来说效果很好：

```
def u_slugify(txt):
        """A custom version of slugify that retains non-ascii characters. The purpose of this
        function in the application is to make URLs more readable in a browser, so there are 
        some added heuristics to retain as much of the title meaning as possible while 
        excluding characters that are troublesome to read in URLs. For example, question marks 
        will be seen in the browser URL as %3F and are thereful unreadable. Although non-ascii
        characters will also be hex-encoded in the raw URL, most browsers will display them
        as human-readable glyphs in the address bar -- those should be kept in the slug."""
        txt = txt.strip() # remove trailing whitespace
        txt = re.sub('\s*-\s*','-', txt, re.UNICODE) # remove spaces before and after dashes
        txt = re.sub('[\s/]', '_', txt, re.UNICODE) # replace remaining spaces with underscores
        txt = re.sub('(\d):(\d)', r'\1-\2', txt, re.UNICODE) # replace colons between numbers with dashes
        txt = re.sub('"', "'", txt, re.UNICODE) # replace double quotes with single quotes
        txt = re.sub(r'[?,:!@#~`+=$%^&\\*()\[\]{}<>]','',txt, re.UNICODE) # remove some characters altogether
        return txt 
```

注意最后一个正则表达式替换。这是更健壮的 expression 问题的一种解决方法`r'\W'`，它似乎要么去掉一些非 ascii 字符，要么错误地重新编码它们，如以下 python 解释器会话所示：

```
Python 2.5.1 (r251:54863, Jun 17 2009, 20:37:34) 
[GCC 4.0.1 (Apple Inc. build 5465)] on darwin
Type "help", "copyright", "credits" or "license" for more information.
>>> import re
>>> # Paste in a non-ascii string (simplified Chinese), taken from http://globallives.org/wiki/152/
>>> str = '您認識對全球社區感興趣的中國攝影師嗎'
>>> str
'\xe6\x82\xa8\xe8\xaa\x8d\xe8\xad\x98\xe5\xb0\x8d\xe5\x85\xa8\xe7\x90\x83\xe7\xa4\xbe\xe5\x8d\x80\xe6\x84\x9f\xe8\x88\x88\xe8\xb6\xa3\xe7\x9a\x84\xe4\xb8\xad\xe5\x9c\x8b\xe6\x94\x9d\xe5\xbd\xb1\xe5\xb8\xab\xe5\x97\x8e'
>>> print str
您認識對全球社區感興趣的中國攝影師嗎
>>> # Substitute all non-word characters with X
>>> re_str = re.sub('\W', 'X', str, re.UNICODE)
>>> re_str
'XXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXX\xa3\xe7\x9a\x84\xe4\xb8\xad\xe5\x9c\x8b\xe6\x94\x9d\xe5\xbd\xb1\xe5\xb8\xab\xe5\x97\x8e'
>>> print re_str
XXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXX?的中國攝影師嗎
>>> # Notice above that it retained the last 7 glyphs, ostensibly because they are word characters
>>> # And where did that question mark come from?
>>> 
>>> 
>>> # Now do the same with only the last three glyphs of the string
>>> str = '影師嗎'
>>> print str
影師嗎
>>> str
'\xe5\xbd\xb1\xe5\xb8\xab\xe5\x97\x8e'
>>> re.sub('\W','X',str,re.U)
'XXXXXXXXX'
>>> re.sub('\W','X',str)
'XXXXXXXXX'
>>> # Huh, now it seems to think those same characters are NOT word characters 
```

我不确定上面的问题是什么，但我猜它源于“[在 Unicode 字符属性数据库中被归类为字母数字的任何内容](http://docs.python.org/library/re.html)”以及它是如何实现的。我听说 python 3.x 对更好的 unicode 处理有很高的优先级，所以这可能已经修复了。或者，也许这是正确的 python 行为，我在滥用 unicode 和/或中文。

目前，一种解决方法是避免使用字符类，并根据明确定义的字符集进行替换。

* * *

## 回答 #5

> 赞同：9
> 
> 时间：2009-03-31T18:30:52.433

恐怕 django 对 slug 的定义意味着 ascii，尽管 django 文档没有明确说明这一点。这是 slugify 的默认过滤器的来源......您可以看到这些值正在转换为 ascii，如果出现错误，请使用“忽略”选项：

```
import unicodedata
value = unicodedata.normalize('NFKD', value).encode('ascii', 'ignore')
value = unicode(re.sub('[^\w\s-]', '', value).strip().lower())
return mark_safe(re.sub('[-\s]+', '-', value)) 
```

基于此，我猜 cnprog.com 没有使用官方`slugify`功能。如果您想要不同的行为，您可能希望调整上面的 django 片段。

尽管如此，URL 的 RFC 确实声明非 us-ascii 字符（或者，更具体地说，除了字母数字和 $-_.+!*'() 之外的任何字符）应该使用 %hex 表示法进行编码. 如果您查看浏览器发送的实际原始 GET 请求（例如，使用 Firebug），您会发现中文字符实际上是在发送之前编码的……浏览器只是让它在显示中看起来很漂亮。我怀疑这就是为什么 slugify 只坚持 ascii，fwiw。

* * *

## 回答 #6

> 赞同：8
> 
> 时间：2011-05-31T18:26:39.947

你可能想看看： [https ://github.com/un33k/django-uuslug](https://github.com/un33k/django-uuslug)

它将为您处理两个“U”。唯一的**U**和 Unicode中的**U。**

它将为您轻松完成这项工作。

* * *

## 回答 #7

> 赞同：4
> 
> 时间：2011-01-06T15:47:21.843

这就是我使用的：

[http://trac.django-fr.org/browser/site/trunk/djangofr/links/slughifi.py](http://trac.django-fr.org/browser/site/trunk/djangofr/links/slughifi.py)

SlugHiFi 是常规 slugify 的包装器，不同之处在于它将国家字符替换为对应的英文字母。

所以你得到的不是“Ą”，而是“A”，而不是“Ł”=>“L”，等等。

* * *

## 回答 #8

> 赞同：2
> 
> 时间：2019-02-07T17:27:01.910

我有兴趣在 slug 中只允许 ASCII 字符，这就是为什么我尝试对相同字符串的一些可用工具进行基准测试：

*   [Unicode Slugify](https://github.com/mozilla/unicode-slugify)：

    ```
    In [5]: %timeit slugify('Παίζω τρέχω %^&*@# και γ%^(λώ la fd/o', only_ascii=True)
    37.8 µs ± 86.7 ns per loop (mean ± std. dev. of 7 runs, 10000 loops each)

    'paizo-trekho-kai-glo-la-fdo' 
    ```

*   [姜戈乌斯鲁格](https://github.com/un33k/django-uuslug)：

    ```
    In [3]: %timeit slugify('Παίζω τρέχω %^&*@# και γ%^(λώ la fd/o')
    35.3 µs ± 303 ns per loop (mean ± std. dev. of 7 runs, 10000 loops each)

    'paizo-trekho-kai-g-lo-la-fd-o' 
    ```

*   [令人敬畏的 Slugify](https://github.com/voronind/awesome-slugify)：

    ```
    In [3]: %timeit slugify('Παίζω τρέχω %^&*@# και γ%^(λώ la fd/o')
    47.1 µs ± 1.94 µs per loop (mean ± std. dev. of 7 runs, 10000 loops each)

    'Paizo-trekho-kai-g-lo-la-fd-o' 
    ```

*   [Python Slugify](https://github.com/un33k/python-slugify)：

    ```
    In [3]: %timeit slugify('Παίζω τρέχω %^&*@# και γ%^(λώ la fd/o')
    24.6 µs ± 122 ns per loop (mean ± std. dev. of 7 runs, 10000 loops each)

    'paizo-trekho-kai-g-lo-la-fd-o' 
    ```

*   `django.utils.text.slugify`使用[统一解码](https://github.com/avian2/unidecode)：

    ```
    In [15]: %timeit slugify(unidecode('Παίζω τρέχω %^&*@# και γ%^(λώ la fd/o'))
    36.5 µs ± 89.7 ns per loop (mean ± std. dev. of 7 runs, 10000 loops each)

    'paizo-trekho-kai-glo-la-fdo' 
    ```

# asp.net-mvc - 在 ASP.Net MVC 1.0 如何插入模型子数据？

> ID：702341
> 
> 赞同：0
> 
> 时间：2009-03-31T18:08:33.173
> 
> 标签：asp.net-mvc, datagrid

我只是第一次玩 MVC 并且遇到了问题。

假设我有 2 张桌子 - 人物和位置。Location 与 Person 具有外键关系 - 因此 1 个人可以拥有多个属于他们的位置。

在我看来，我有 Person 字段的表单输入 - 这很好用。

但是，我还希望有一个网格来保存位置（使用标准的添加/删除按钮），以及与位置网格中的当前记录相关联的主从表单输入。

我的问题是如何在视图中实现子关系网格和表单输入？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-04-14T17:18:11.663

您可以使用另一种带有自己的添加/保存/提交按钮的位置表格。因此，当从 Person 表单发生提交时，它将更新 Person 记录，但如果从 Location 表单发生提交，它将执行适当的操作。

像这样：

```
// person data
<table>
    <tr><td>Name:</td><td><%=Model.PersonName%></td></tr>
    <tr><td>Title:</td><td><%=Model.PersonTitle%></td></tr>
    <tr><td>Other Info:</td><td><%=Model.PersonOtherInfo%></td></tr>
</table>
// person's locations grid
<table>
    <tr><th></th><th></th></tr>
    <% foreach (Location loc in Model.PersonLocations) { %>
    <tr><td>Delete</td><td><%=loc.LocationName%></td></tr>
    <% } %>
</table>
// new location form
<% using (Html.BeginForm<MyController>(p => p.New())) { %>
<table>
    <tr>
        <td>Location Name</td>
        <td><%=Html.TextBox("LocationName")%></td>
    </tr>
    <tr>
        <td colspan="2">
            <%=Html.SubmitButton("Save", "Save")%>&nbsp;
            <%=Html.Button("Cancel", "Cancel", HtmlButtonType.Button,"javascript:cancelEdit();") %>
        </td>
    </tr>
</table>
<%=Html.AntiForgeryToken() %>
<%}%> 
```

# python - 如何获取 sqlalchemy 中受影响的行数？

> ID：702342
> 
> 赞同：39
> 
> 时间：2009-03-31T18:08:34.873
> 
> 标签：python, sqlalchemy

我有一个关于 Python 和 sqlalchemy 模块的问题。`cursor.rowcount`sqlalchemy Python 中的等价物是什么？

* * *

## 回答 #1

> 赞同：36
> 
> 时间：2009-03-31T18:21:52.733

`ResultProxy`对象也有[`rowcount`](https://docs.sqlalchemy.org/en/13/core/connections.html#sqlalchemy.engine.ResultProxy.rowcount)属性。

* * *

## 回答 #2

> 赞同：22
> 
> 时间：2017-04-21T08:57:47.647

`rowcount`不是受影响的**行**数。它的匹配行数。看看[医生](http://docs.sqlalchemy.org/en/latest/core/connections.html#sqlalchemy.engine.ResultProxy.rowcount)怎么说

> 此属性返回*匹配*的行数，它不一定与实际*修改*的行数相同- 例如，如果给定的 SET 值与那些已经出现在行中的人。这样的行将被匹配但不会被修改。在具有两种样式的后端（例如 MySQL）上，`rowcount`默认配置为在所有情况下都返回匹配计数

因此对于以下两种情况`rowcount`都会报告`1`。因为`Rows matched: 1`

1.  一行更改为`update`语句。

    ```
    Query OK, 1 row affected (0.00 sec)
    Rows matched: 1  Changed: 1  Warnings: 0 
    ```

2.  执行相同`update`的语句。

    ```
    Query OK, 0 row affected (0.00 sec)
    Rows matched: 1  Changed: 0  Warnings: 0 
    ```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2018-12-07T15:47:37.397

Shiplu 所说的当然是正确的，但是，要回答这个问题，在许多情况下，您可以通过在 WHERE 子句中包含值不同的条件来轻松地使匹配的列等于更改的列，即：

```
UPDATE table
SET column_to_be_changed = "something different"
WHERE column_to_be_changed != "something different" AND [...your other conditions...] 
```

`rowcount`然后将返回受影响的行数，因为它等于匹配的行数。

# c# - OnDataBinding vs Inline：优点、缺点和开销

> ID：702343
> 
> 赞同：10
> 
> 时间：2009-03-31T18:08:37.587
> 
> 标签：c#, asp.net, coding-style, code-behind

我想我会问这个问题，看看为什么许多示例和人们更喜欢在 aspx 代码中使用内联数据绑定而不是在使用 WebForms 时实现 OnDataBinding 事件。

对于任何**数据绑定控件（例如，Repeater、GridView 等），**如果我需要执行任何不是开箱即用的内置操作（例如，我需要执行 Eval），我总是为字段级控件实现 OnDataBinding 方法。我看到的大多数示例都使用内联 <%# 语法在 aspx 页面中使用代码。

内联 ASP.NET 代码示例：

```
<asp:Literal ID="litExample" runat="server"
    Text='<%# Eval("ExampleField").ToString() %>' /> 
```

我喜欢如何做的例子：

在 aspx 中：

```
<asp:Literal ID="litExample" runat="server" 
    OnDataBinding="litExample_DataBinding" /> 
```

在代码隐藏 .cs 中：

```
protected void litExample_DataBinding(object sender, System.EventArgs e)
{
    Literal lit = (Literal)(sender);
    lit.Text = string.Format("{1} - {2}",
        Eval("ExampleField").ToString(),
        Eval("ExampleField2").ToString());
} 
```

我个人更喜欢 codebehind 方法，因为它使我的 aspx 页面保持干净，而且我没有所有这些内联代码，下一个人只知道总是在 .cs 文件中查找代码更改。由于 HTML 只是占位符，代码绑定决定了实际控制的内容，因此这种方式也可以更好地保持表示和代码的分离。

现在这些都是非常基本的例子。该字段可以是您希望使用前导 0 格式化的整数或需要特定格式的 DateTime 等。它还可能需要各种操作和代码来获取应存储在“文本”属性中的最终值结束。

如果您使用内联代码，您在哪里画线并将其移动到代码隐藏？

无论哪种方式，都有哪些优点和缺点？

一个比另一个占用更多的开销吗？

**编辑注意：**我不是在谈论为仅在页面上的控件分配值，而是正在被数据绑定的控件，因为它存在于转发器模板或 gridview 项目模板等中......显然是坐在页面上的文字可以在代码中分配。

**编辑注：**我想我会收集更多的回应，特别是关于开销。大多数人不使用 OnDataBinding 事件吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2009-03-31T18:11:54.787

我更喜欢相反的情况。我更喜欢将我的代码隐藏限制在过程代码中，并将我的所有声明性代码保留在我的 Aspx 页面中。在上面的示例中，文字绝对是声明性的，因此（根据我的偏好）不属于代码隐藏。更强大的功能通常在我的代码隐藏中，我不希望我的开发人员在试图理解它时不得不筛选一堆初始化行而变得混乱。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2009-07-18T19:33:12.620

它们之间几乎没有性能差异。数据绑定表达式被解析并编译成类似的东西

```
control.DataBinding += new EventHandler(ControlDataBinding); 
```

并且

```
private void ControlDataBinding(object sender, EventArgs e) {
    control.Text = Eval("Field");
} 
```

在这种情况下，不会重写 OnDataBinding 方法。执行基本 Control.OnDataBinding 方法，该方法引发 DataBinding 事件，从而导致执行上述代码。

当您覆盖 OnDataBinding 时，您只是在基本代码运行之前接管，并自己设置`Text`属性（例如）。

* * *

我不喜欢给出部分答案，但这次我会这样做，因为我认为它很整洁，而且它最近救了我：

我说数据绑定表达式被解析了。事实上，所有的标记都经过解析，生成了 C#、VB.NET 或任何语言的代码，并将它们编译成一个类。当页面被请求时，这个类的一个实例被创建，并开始它的生命。

您可以在磁盘上找到这些生成的代码文件，*抱歉，我不记得在哪里*。它们的有趣之处在于它们仍然可以作为代码工作。

例如，我最近设置了一些相当复杂的 Infragistics 网格，完成了所有格式设置，然后发现我需要能够在 rumtime 设置格式（以将正确的格式导出到导出的 Excel 文件中）。为此，我打开了源文件（所有网格都在单个用户控件中），并且能够将每个网格的配置提取到单独的一组方法中。

我能够使用 ReSharper 清理它们，将通用代码序列提取到基类中，并使用一种静态方法来设置每个网格。然后我可以调用它们进行初始设置，以及用于 Excel 导出的虚拟网格的设置。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2010-03-02T20:32:59.627

我更喜欢 OnDataBinding 的方式。您可以通过对所有 OnDataBinding 调用使用“Databind”区域来保持代码隐藏的干净，并且可以通过从那里取出那些可怕的服务器端代码块来保持标记的干净。

我认为大多数人都使用内联方式，因为它更容易理解和实施。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-03-31T18:29:59.563

实际上，我更喜欢将 aspx 用于您希望绑定的控件，例如 listview、gridview、repeater 和其他类似的控件。

对于其他控件，我会在代码隐藏中直接设置它们（作为我正在执行的过程的一部分，而不是为整个页面调用 literal.DataBind 或 DataBind）。如果它是一个用户/自定义控件，我希望调用者执行 DataBind，那么我将覆盖 DataBind 并设置值。

也就是说，我通常在代码隐藏之外有大量代码，并调用 ShowUser 之类的东西，在那里我将这些分配给控件（而不是设置属性，然后进行绑定，并为简单控件设置所有这些 eval） .

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2011-01-24T06:22:32.863

我同意菱角。我喜欢我的标记是干净的，并且我的所有 aspx/ascx 代码都驻留在我的代码隐藏文件（它所属的位置）中。

我只有一件事要补充。我不想在我的代码中乱扔我的每个数据绑定控件的 OnDataBinding() 事件。相反，我在嵌入可绑定控件（例如示例中的中继器）中的用户控件的 OnDataBinding() 事件中完成所有操作。

例如，在我的用户控件的代码隐藏中，您会发现：

```
protected override void OnDataBinding(EventArgs e)
{
    base.OnDataBinding(e);

    litExample.Text = Eval("ExampleField") + " - " + Eval("ExampleField2");
} 
```

从这里您可以设置所有控件的属性或调用其他方法来设置它们。请注意，在我的示例中，我不需要像您在此处那样执行拳击：`Literal lit = (Literal)(sender);`

仅此一项就可以节省一些性能（当然是纳秒，但值得衡量）。在此处阅读“性能”部分：http: [//msdn.microsoft.com/en-us/library/yz2be5wk%28v=vs.80%29.aspx](http://msdn.microsoft.com/en-us/library/yz2be5wk%28v=vs.80%29.aspx)

我也反对在我的代码中使用字符串。我会使用 const 字符串变量来定义“ExampleField”和“ExampleField2”，或者将它们设置为用户控件中的公共属性，然后可以由包含控件/页面根据数据对象的列名进行设置被束缚。这提供了更多的灵活性和控制的重复使用。

仅供参考：您不需要在 Eval 上调用 ToString()，因为此方法已经返回一个字符串。

# jquery - 如何使用 jQuery 将多个事件处理程序绑定到一个事件？

> ID：702352
> 
> 赞同：1
> 
> 时间：2009-03-31T18:09:46.507
> 
> 标签：jquery, event-handling

在尝试将多个事件处理程序附加到单个事件时，我遇到了 jQuery 的奇怪行为。

如何将两个不同的事件处理程序绑定到同一个事件？

```
$(this).focus(function(){/*...*/});
$(this).focus(function(){/*...*/}); // replaces the previous one? 
```

我错过了什么？

### 更新

您知道它是否会影响事件数据的路由方式吗？似乎添加第二个事件处理程序会导致`eventObject.data`属性返回`undefined`......？

* * *

### 结语

这个问题在某种程度上与 jQuery 规范化事件处理的方式以及`eventObject`数据属性如何根据路由变化有关，我有一个延迟计时器，它在稍后未定义时读取属性，我通过简单地创建一个来解决它本地临时为它。

```
obj.inputText.bind('blur', obj, function(e) {
    var div = e.data.div;
    setTimeout(function() { div.hide(); }, 333); // works!
    // setTimeout(function() { e.data.div.hide(); }, 333); // does not work
}); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-03-31T18:19:12.337

这确实有效。我只是仔细检查了这段代码：

```
$(document).ready(function() {
  $("#FirstName").focus(function() {
    console.log("focus1");
  });

  $("#FirstName").focus(function() {
    console.log("focus2");
  });
}); 
```

当输入字段获得焦点时，它确实会产生两条控制台消息。

你确定你的两个处理程序都没有运行吗？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-06-12T18:37:20.737

您不能在调用所有需要的处理程序的“主”函数上创建吗？

$(this).focus( function() { function1();function2();etc..... });

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-03-31T18:22:44.527

这在理论上应该可行，尝试使用以下方法触发所有处理程序：

```
$(this).focus( function() { alert('handler1'); });
$(this).focus( function() { alert('handler2'); });
$(this).focus(); 
```

# visual-c++ - CDC文本绘制问题

> ID：702354
> 
> 赞同：0
> 
> 时间：2009-03-31T18:10:17.693
> 
> 标签：visual-c++, mfc, text, drawing, cdc

我正在尝试使用 CDC::ExtTextOut() 将文本绘制到设备上下文（CDC），但我得到了垃圾输出。绘制的输出文本是奇怪的字体。

传递给我的 CDC 指针源自 unicode 构建 ActiveX 控件 (.ocx)。文本绘制代码驻留在 ANSI 构建 DLL 中。

此设置中似乎存在某种不兼容性。

有没有人遇到过这种情况，你是如何解决的？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-04-02T22:14:47.007

您是否尝试过在 CDC 上设置字体？

```
CFont *oldvalue = dc->SelectObject(GetStockObject(OEM_FIXED_FONT));

dc->ExtTextOut(....);

dc->SelectObject(oldvalue); 
```

# design-patterns - 什么是序列化代理模式？

> ID：702357
> 
> 赞同：12
> 
> 时间：2009-03-31T18:10:59.860
> 
> 标签：design-patterns, serialization

唉，谷歌让我失望了……

什么是序列化代理模式，我在哪里可以了解有关实现和使用它的更多信息？

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2009-08-11T05:11:21.350

*在 Josh Bloch 的Effective Java* , Second Edition的最后一节中有一个很好的描述。

假设您有一个`A`想要序列化的类。你首先声明它来实现`Serializable`。然后使用序列化方法`writeReplace()`返回一个所谓的“序列化代理”，它将代替`A`. 该`writeReplace()`方法不需要公开。永远不会调用默认序列化，因此可以维护`A`的所有 API 属性。`A`

通常，代理作为私有静态嵌套类实现，它本身必须实现`Serializable`（或`Externalizable`用于完全控制读/写过程）。因为代理是私有的，所以它的实现细节，比如有一个无参数的构造函数和可变的，将被隐藏。

代理存储了足够的原始对象状态以进行写入，以便它可以在反序列化时重构对象。在反序列化时，代理使用该方法`readResolve()`返回一个`A`. 对于单例，这可以是单例实例本身。

我写了一篇详细的博客文章，[其中包括使用序列化代理进行序列化不可变和单例的](http://lingpipe-blog.com/2009/08/10/serializing-immutable-singletons-serialization-proxy/)示例。

# wcf - 使用 Silverlight 使用 Oracle 数据

> ID：702358
> 
> 赞同：0
> 
> 时间：2009-03-31T18:11:03.867
> 
> 标签：wcf, silverlight, oracle, web-services, soap

我想使用 OracleClient 在服务器端获取一些数据。像 OracleDataReader rdr = OracleDataAccess.ExecuteReader(Conn, sQry);

将此数据传送到 Silverlight 的最佳方式是什么？

我设置了一个 Web 服务，我只是不知道**打包结果集的最佳数据结构**。

silverlight CLR 不能使用 OracleClient DLL，所以我不能使用任何典型的 Oracle 结果集数据结构（DataSet？）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2009-04-01T15:22:41.160

您可以使用 SOAP，但如果您想要一些真正轻量级的东西，WCF 可以返回 JSON。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-04-01T15:37:49.550

是的，正确的，客户端的 SL 没有办法（它在沙箱中运行），您可以与服务器中的服务通信并从那里返回查询结果（您可以只使用普通的 ADO .net 或 fnacy 的东西运行查询像 ADO .net 实体框架）。

HTH布劳里奥

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-03-31T18:28:08.680

Silverlight 不处理对您的数据库的直接数据访问（它并不总是保证您的 Silverlight 应用程序将与您的数据源具有正确的连接）。

最好的办法是编写 WCF 服务（或任何其他类型的 Web 服务）来处理对 Oracle 的 CRUD 操作。然后，您可以从 Silverlight 应用程序使用这些服务。

# ruby-on-rails - 其他人如何在迁移中建立外键关系

> ID：702363
> 
> 赞同：0
> 
> 时间：2009-03-31T18:12:01.447
> 
> 标签：ruby-on-rails, database

我正在用 Ruby on Rails 开发一些东西，我目前有几个模型之间存在关系。现在，模型指定了关系，所以我知道 RoR 将强制执行完整性，但是在数据库级别呢？

其他人是否在数据库表中设置外键关系？如果是这样，如何？，似乎没有任何方法可以在迁移中设置/销毁数据库关系（可能使用原始 SQL）

谢谢

保罗。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-03-31T18:24:10.343

这是有关如何操作的指南：http: [//seb.box.re/2006/7/29/foreign-key-and-rails-migration](http://seb.box.re/2006/7/29/foreign-key-and-rails-migration)

这里还有一个插件：http: [//github.com/harukizaemon/foreign_key_migrations/tree/master](http://github.com/harukizaemon/foreign_key_migrations/tree/master)

但是，Rails 在迁移中不容易支持外键是有原因的。基本上，在使用 ActiveRecord 时它们并不是必需的。

这里很好地解释了为什么它们不是必需的，并且不鼓励在 Rails 中使用它们：[http ://www.motionstandingstill.com/i-dont-use-foreign-key-constraints-with-rails/2008-10-17/](http://www.motionstandingstill.com/i-dont-use-foreign-key-constraints-with-rails/2008-10-17/)

在这个问题上意见不一。这里有一个很好的讨论：http: [//forum.softiesonrails.com/forums/3/topics/138](http://forum.softiesonrails.com/forums/3/topics/138)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-03-31T18:19:05.410

除了使用 SQL 之外，没有办法从迁移中做到这一点，这意味着：

1.  它是特定于数据库的
2.  你必须使用 SQL

第一个并不是什么大不了的事（无论如何，您多久在项目中切换一次数据库？），第二个只是生活中的事实。因此，如果需要，请使用它们。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2009-03-31T18:23:57.550

顺便说一句，这些东西应该始终在数据库级别设置。除了应用程序之外，还有其他方法可以访问和更改数据库中的数据。除非您想要无用的数据，否则您不应该在应用程序中设置这些类型的规则。即使您必须（GASP）使用 SQL，所有涉及数据完整性的事情都必须在数据库级别。

# php - 从 PHP 中为 AD LDAP 组的所有成员选择属性的最佳方法是什么？

> ID：702364
> 
> 赞同：2
> 
> 时间：2009-03-31T18:12:28.403
> 
> 标签：php, active-directory, ldap

我需要从 PHP 应用程序中为特定组中的所有用户选择一些属性。我意识到我可以查询组的“成员”属性以获取每个成员的 dn，然后对每个成员的属性进行单独的 LDAP 查询。然而，我希望有一个我可以执行的查询可以一次返回所有结果，以防止 PHP 应用程序和 LDAP 服务器 (AD) 之间过多的来回操作。

使用[LDAP 浏览器](http://www.google.com/search?q=ldap+browser+Jarek+Gawor)，我可以成功地在我的整个域上运行搜索：

```
Search DN:  DC=middlebury,DC=edu
Filter: (memberOf=CN=BG_Cells,OU=General,OU=Groups,DC=middlebury,DC=edu)
Attributes: objectClass,mail,givenName,sn,sAMAccountName,telephoneNumber 
```

并取回预期的结果。然而，当我使用 PHP 的方法尝试这个过滤器`ldap_search()`时，我得到一个`Operations error`with code `1`。

下面是我正在使用的 PHP。

```
....
$baseDN = 'DC=middlebury,DC=edu';
$filter = '(memberOf=CN=BG_Cells,OU=General,OU=Groups,DC=middlebury,DC=edu)';
$attributes = array('objectClass','mail','givenName','sn','sAMAccountName','telephoneNumber');

$result = ldap_search($connection, $baseDN, $filter, $attributes);

if (ldap_errno($connection))
    print "Read failed for $filter with message: ".ldap_error($connection).", #".ldap_errno($ connection)); 
```

其他过滤器在这些属性上工作得很好，并且只使用属性`array('mail')`数组或空数组并不能消除错误结果，所以我确定问题出在我的过滤器而不是连接或属性集上。

第二种选择是在组的“成员”字段中对组成员 dns 进行一次查询，然后为每个成员 dn 构建一个长 OR 查询。然而，这仍然会涉及两个查询。

那么有没有更好的方法来获取每个成员的属性，最好是在一个查询中？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-04-07T14:31:02.507

很难说，但通常情况下，LDAP 结果代码 (1) 表明关联的请求与正在进行的另一个操作（例如，在多阶段 SASL 绑定中间的非绑定请求）的顺序不一致。它并不表示客户端发送了错误消息。

在执行查询之前您是否绑定了连接？-吉姆

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-03-31T19:39:50.097

我不确定问题到底出在哪里，在过滤器或属性选择中。如果是归因选择。如果是过滤器，那么我建议您现在将属性选择放在一边，以隔离问题。

你能显示`ldap_search()`你正在执行的相关代码吗？

# java - java接口设计：如何处理有状态的处理

> ID：702367
> 
> 赞同：1
> 
> 时间：2009-03-31T18:13:01.290
> 
> 标签：java, design-patterns, interface

我在为我的应用程序的特定部分设计一个好的架构时遇到了麻烦，尤其是在涉及维护状态的地方。

我有一组解析操作：

我的类`Reader`将数据块读入缓冲区并处理整个控制流。我的班级`Parser`在缓冲区和 a 中获取数据块`ParsedDataHandler`，并将其分成较小的块以供`ParsedDataHandler`管理。

`ParsedDataHandler`是我正在尝试设计的界面；我想我想做这样的事情（“BlockInfo”表示一些包含各种状态位的数据结构，其中将包括一个保存整个原始数据块的 ByteBuffer。“ChunkMetadata”表示包括块内每个块的位置的信息，以及`Parser`已确定的有关该块的任何其他信息）

```
interface ParsedDataHandler
{
    void beginBlock(BlockInfo bi);
    void handleParsedData(BlockInfo bi, ChunkMetadata m);
    void endBlock(BlockInfo bi);
} 
```

so`Reader`将调用`ParsedDataHandler.beginBlock()`让它在块的开头设置任何状态，并承诺保留 BlockInfo 常量的指定部分（可能是全部），直到它进行匹配调用`ParsedDataHandler.endBlock()`- 之后它可能会重用数据缓冲区下一个区块。`Parser`遍历数据块并根据预定义的数据协议将其拆分为块，并且会调用`ParsedDataHandler.handleParsedData()`多次，每个块调用一次。合约包含一个保持固定的缓冲区的一个原因是，它`ParsedDataHandler`可以在开始或结束时复制整个数据块，并且当它们一直在一起时不必将块重新组合成一个块.

所以有责任分工：

*   `Reader`只负责管理整个例程和读取数据，它不会关心其他任何事情。
*   `Parser`是将数据块分成块的东西，它不在乎如何处理它们或数据如何到达那里
*   `ParsedDataHandler`是我正在尝试设计的接口，以便具体类可以实现它并正常工作，而不关心它的作用，`Reader`或者`Parser`不关心如何将块分成块或数据来自哪里。

我的问题是，维护任何状态的负担是否应该由实现的类承担`ParsedDataHandler`并远离 BlockInfo？如果我的接口的语义包括 BlockInfo 中的原始数据块在 beginBlock() 和 endBlock() 调用之间不会改变的事实，那么我是否应该只将其传递给 beginBlock() 而不是其他调用？还是为了方便而发送它可以吗？

有没有更好的设计模式来处理这种情况？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-03-31T19:41:52.887

首先，您的实现非常接近[State Pattern](http://en.wikipedia.org/wiki/State_pattern)的经典示例。我看到的唯一问题是 BlockInfo 的作用。

如果 BlockInfo 在这些步骤之间发生了更改，那么您的实现就是您需要做的。看看我引用的维基百科文章。点在 Mousedown、MouseMove 和 MouseUp 之间发生变化，因此它必须是抽象工具的参数。

如果在步骤之间没有更改 BlockInfo，那么您需要考虑几件事。

如果实现 ParsedDataHandler 的类正在初始化 BlockInfo 结构的任何部分，那么我会将其分离出来并使其成为该类的私有成员，并让 BlockInfo 传入解析过程外部的初始化数据。

如果 BlockInfo 正在被 BeginBlock 修改并传递给后续例程，那么您应该克隆 BlockInfo，将其内部存储在实现 ParsedDataHandler 的类中。然后将其从参数列表中删除。

如果您之后需要 BlockInfo，我将创建一个返回内部 BlockInfo 的只读属性。

根据您的问题，我猜您应该将 BlockInfo 传递给 BeginBlock 并将其存储在内部。从其他方法的参数中删除它，然后在需要检索它时添加 readonly 属性。

# architecture - 在 ColdFusion 8 中配置 3 层

> ID：702369
> 
> 赞同：0
> 
> 时间：2009-03-31T18:13:33.393
> 
> 标签：architecture, coldfusion

我们正在将我们的 ColdFusion 8 应用程序从 2 层应用程序迁移到 3 层架构。任何人都可以提供有关如何配置 Web 服务器和应用程序服务器以便应用程序可以通信的说明吗？使用 cfcomponent 是否足以将所有数据库通信放在应用程序服务器中？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-04-01T17:47:24.637

有很多方法可以做到这一点。经典的方法是在您的应用程序层中创建 Web 服务 CFC，并通过 xml / wsdl 检索数据，这些数据由您的顶层 .cfm 使用

就个人而言，使用 CF8 中的 Serialize / Deserialize JSON 函数加上酷的 Javascript 库（如 Jquery），我很想通过 Ajax + JSON 主要在 javascript 中进行显示。

根据最后一个问题，答案肯定是肯定的。当前的 CF 思维倾向于将所有查询放在带有可选网关 CFC 的 DAO CFC 中（经常争论对网关的需求）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-05-05T22:33:52.460

查看一些很棒的框架，它们可能会极大地帮助您以标准化的方式实现这一点。

一些包括

ColdBox ColdSpring Mach-II Fusebox Model-Glue .. 还有更多！

# c# - 对 GridView 和 INamingContainer 感到困惑？

> ID：702374
> 
> 赞同：0
> 
> 时间：2009-03-31T18:15:25.840
> 
> 标签：c#

我有一个嵌套的 GridView。为了让我找到嵌套的GridView，我必须在Parent GridView上做一个FindControl，但我的印象是，如果父控件实现了INamingContainer，你只需要这样做，根据这个[链接](http://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.gridview.aspx)，GridView没有实现来自 INamingContainer。还有别的原因吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-03-31T18:17:23.963

问题是每一行（或单元格，不记得确切）都有自己的一组 ID，因此它肯定是实现 INamingContainer 的 ID 之一。

更新 - 它的行：http: [//msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.gridviewrow.aspx](http://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.gridviewrow.aspx)

# sql-server-2005 - 执行部署到文件系统的 SSIS 包时出现问题

> ID：702377
> 
> 赞同：1
> 
> 时间：2009-03-31T18:16:20.220
> 
> 标签：sql-server-2005, configuration, ssis

我有一个 SSIS 主包，它执行几个子包。它工作得很好，但是当我将它部署到服务器上的文件系统时，我得到一个错误代码“0xC00220DE”。“该系统找不到指定的文件。”

当我通过双击它在服务器上运行包时，它可以正常工作。但是当我使用 DTExec 时：

```
dtexec /FILE "d:\cmcdx\ssis\MAESTRO_FACTURACION.dtsx" 
```

我收到提到的错误。

包配置正确，我执行包的用户是机器管理员。

我应该将包部署到 Sql Server 吗？部署主子包的最佳实践是什么？我的想法在这里用完了......

顺便说一句，我正在运行 Sql Server 2005 sp3。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2009-04-02T09:30:54.133

解决了。

我使用相对路径指向子包，在运行时 SSIS 无法找到它们。

最后我使用了一个特定的路径，在配置文件中设置。然后我使用部署实用程序，将所有内容复制到服务器，通过双击 SSISDeploymentManifest 文件运行它并将路径更改为正确的位置。

感谢詹姆斯和贾斯汀的回答。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-03-31T18:27:19.133

包是否没有从包配置文件中获取路径或位置值？如果是这样，请确保包含 /ConfigFile 参数和配置文件的路径。可能要检查的另一件事是，如果您在包中有任何引用映射网络驱动器的连接，这些连接可能无法在与本地控制台帐户不同的服务帐户下运行。

[编辑] 在服务器上尝试下面的命令行（注意双斜杠）。

```
dtexec /FILE "d:\\cmcdx\\ssis\\MAESTRO_FACTURACION.dtsx" 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2009-03-31T19:39:20.160

这里有几件事可能会出错。您提到您正在使用主包来运行多个子包。您的所有子包是否也在服务器上的正确位置？

请记住，子包的路径应该是主包中的变量，以便在需要时可以通过服务器上的配置文件更改这些值。

您可能还想查看 MSDN 上的这组教程：

[包部署方法主题](http://msdn.microsoft.com/en-us/library/ms137900.aspx)

这些教程解释了当你的包运行时如何在服务器上正确启用包配置。

# iphone - 一些 IBOutlets 在多个 Nib 应用程序中为零

> ID：702385
> 
> 赞同：1
> 
> 时间：2009-03-31T18:17:39.610
> 
> 标签：iphone

我有一个多 Nib 应用程序，在我的`awakeFromNib:`方法中，有些`IBOutlet`s 是 nil。

我想我已经缩小了问题的范围，但我不知道为什么。我有一个`MainWindow.xib`文件，它是由 Xcode 创建的。在那里，我有应用程序委托和几个视图控制器（我有一个彼此的 Nib）。让我们称其中之一为`MatrixViewController`.

我还有一个`MatrixView.xib`文件，其中有控制器和视图。我想要做的是从它`MatrixViewController`的`awakeFromNib`视图中初始化一些东西。但是，其中的所有网点都是零。

我认为这是因为`awakeFromNib:`我正在回复是在加载时发送的，`MainWindow.xib`而不是`MatrixView.xib`，我正确吗？

解决这个问题的替代方法是什么？关于它的一件好事是，所有的初始化都是在应用程序加载时完成的，我想保留它。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-03-31T22:04:08.597

使用`-viewDidLoad`代替`-awakeFromNib`

这是 iPhone 与 MacOSX 的差异之一。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-04-01T05:49:49.507

如果要在显示视图之前更改 IBOutlets，则只能从 viewDidLoad 引用它们。

调用 awakeFromNib 时，可能尚未加载 nib。

# python - Python 3.0.1 可执行文件创建者

> ID：702395
> 
> 赞同：6
> 
> 时间：2009-03-31T18:21:20.520
> 
> 标签：python, executable, py2exe, pyinstaller

有谁知道现在是否有支持 Python 3.0.1 的 Windows Python 可执行创建程序？似乎 py2exe 和 pyInstaller 以及我发现的所有其他内容仍然无法支持 3.0 或 3.0.1。

任何帮助是极大的赞赏。

编辑：我想我可以将程序降级到旧版本的 Python 以使其与 py2exe 一起使用。最困难的部分可能是使用旧版本的 Tkinter。

有没有人幸运地使用 py2exe 或 pyInstaller（或其他 Windows 友好程序）创建使用 Tkinter 和子进程的可执行文件。

我实际上不确定如何获取我的程序将安装到的目录，以便子进程可以找到我正在使用的可执行程序。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2009-08-11T22:07:12.890

[cx_Freeze](http://cx-freeze.sourceforge.net/)怎么样。似乎支持 python 3.0 和 3.1？

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-11-13T11:13:08.233

~~不支持 Python 3 `py2exe`。要评论的相关错误在这里：
[https ://sourceforge.net/p/py2exe/feature-requests/20/](https://sourceforge.net/p/py2exe/feature-requests/20/)~~

# Python3 的 py2exe 出来了！

这是原始错误报告：http:
[//sourceforge.net/projects/py2exe/](http://sourceforge.net/projects/py2exe/)

这是提到该版本的评论：http:
[//sourceforge.net/projects/py2exe/](http://sourceforge.net/projects/py2exe/)

这是pypi上的包：
[https ://pypi.python.org/pypi/py2exe/0.9.2.0](https://pypi.python.org/pypi/py2exe/0.9.2.0)

**请注意，Python 3 的 py2exe 仅支持 Python 3.3 及更高版本！**

**非常感谢 py2exe 开发团队！**

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2009-03-31T22:09:51.470

不回答原来的问题，但这个：

> 我实际上不确定如何获取我的程序将安装到的目录，以便子进程可以找到我正在使用的可执行程序。

你可以使用类似的东西

```
if hasattr(sys, 'frozen'): # this means we're installed using py2exe/pyinstaller
    INSTDIR = os.path.dirname(sys.executable)
else:
    ... 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2009-07-16T08:51:46.877

在搜索了很多天之后，我得出的结论是，目前没有任何方法可以为 python 3.0 脚本制作可执行文件。

我想出的一种解决方法是使用便携式 python： [http ://www.portablepython.com/releases/](http://www.portablepython.com/releases/)

这至少允许单独安装，您可以将其与脚本一起分发以帮助用户。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2009-11-26T01:14:42.527

我让它与[cx_freeze](http://cx-freeze.sourceforge.net/)一起工作。

有点麻烦，因为您必须添加一行代码来解决一些错误，但结果证明它在 Python 3.1.1 和 PyQt4 上运行良好。

另请参阅[此处](https://stackoverflow.com/questions/1737375/building-executables-for-python-3-and-pyqt)以检查额外的代码行等。

# c - 如何在 C 中制作 AJAX 服务器端脚本？

> ID：702403
> 
> 赞同：3
> 
> 时间：2009-03-31T18:22:48.753
> 
> 标签：c, ajax, cgi, server-side

我第一次研究 AJAX，我想知道是否可以从用 C 编写的服务器端 CGI 应用程序发出请求？

C 应用程序是否只`printf`用于数据，类似于[这个](http://www.w3schools.com/ajax/ajax_serverscript.asp).asp 示例？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2009-03-31T18:26:24.767

如果我是你，我会远离 C 来处理服务器端的东西。还有很多其他语言更适合这个，但如果你坚持，你可以使用像[cgic](http://www.boutell.com/cgic/)这样的库。基本上，您只需使用来自 Apache 等服务器的 CGI 处理程序，但请使用 C 以外的其他内容。如果使用不当，尤其是通过 CGI 时，这是非常危险的。

使用 PHP 或 Perl 之类的东西让自己保持清醒。PHP 非常适合刚起步的人，您不必费力编译并使您的 CGI 处理程序工作/安全。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-03-31T18:27:45.090

ASP 做了一些神奇的事情，比如输出适当的响应头，但除此之外，它真的很简单。AJAX 的服务器端只是响应请求。以预期的格式输出正确的数据，你就完成了。坚持 REST 原则，这变得很容易。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-03-31T20:07:45.490

您可以使用 C 编写脚本。

看看[http://bellard.org/tcc/](http://bellard.org/tcc/) - 这是一个用于 Windows 和 UNIX 的小型 C99 编译器。它有一个独特的功能：“-run”选项。使用此选项，tinycc 将代码编译到内存中并在不创建中间二进制文件的情况下执行它。因此，您需要做的就是创建您的 CGI 文件，如下所示：

* * *

#!path-to-tinycc-executable -run

// 你的 C 代码在下面

## ……

但是，我必须同意以前的评论者的观点，即 C 语言不适合服务器端 CGI。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-04-04T02:12:00.437

> 我第一次研究 AJAX，我想知道是否可以从用 C 编写的服务器端 CGI 应用程序发出请求？

我会跟上潮流，并说使用另一种语言通常更容易。但是，我也理解有时您必须使用 C - 即，用于资源有限的嵌入式服务器。如果那是强烈建议您使用[cgic](http://www.boutell.com/cgic/)或 heck，甚至可能是[klone](http://www.koanlogic.com/klone/)之类的框架。不过我有点偏向后者。它提供了一个很好的接口来获取请求对象，就像各种框架的脚本一样。

# iphone - 在运行时添加 cocos2d 菜单项

> ID：702405
> 
> 赞同：0
> 
> 时间：2009-03-31T18:23:01.983
> 
> 标签：iphone, cocoa, cocoa-touch, cocos2d-iphone

我正在尝试在运行时将可变数量的 MenuItem 对象添加到 Menu 对象。当我的游戏开始时，我真的不知道我的菜单是否有 2 个或例如 5 个项目。

```
for (MyItem* item in myItemCollection)
{
        MenuItemImage* menuItem = [MenuItemImage itemFromNormalImage:@"MenuItem.png" selectedImage:@"MenuItemSelected.png" target:self selector:@selector(options:)];
} 
```

我现在如何将 MenuItems 添加到 Menu 对象。通过使用 addChild 我得到一个例外，我真的无法在线找到解决方案。

另外，一个附带问题：我什么时候可以以这种方式添加我的 MenuItem。如何取回我的 MenuItem 并更改它们显示的图像？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2009-03-31T20:46:48.610

来自 NSMenu：

```
 `- (void)addItem:(NSMenuItem *)newItem` 
```

`假设您有一个 NSMenu 对象来发送此消息，并且 MenuItemImage 是 NSMenuItem 的子类。

取回菜单项，具体取决于您对所拥有项目的了解： – itemWithTag:
– itemWithTitle: – itemAtIndex:

或者您可以使用以下方法遍历项目：
– numberOfItems
– itemArray

查看 NSMenuItem 文档以获取/设置图像。

[http://developer.apple.com/documentation/Cocoa/Reference/ApplicationKit/Classes/NSMenu_Class/Reference/Reference.html](http://developer.apple.com/documentation/Cocoa/Reference/ApplicationKit/Classes/NSMenu_Class/Reference/Reference.html)

[http://developer.apple.com/documentation/Cocoa/Reference/ApplicationKit/Classes/NSMenuItem_Class/Reference/Reference.html](http://developer.apple.com/documentation/Cocoa/Reference/ApplicationKit/Classes/NSMenuItem_Class/Reference/Reference.html)

# python - 如何限制 Python 进程的 I/O 消耗（可能使用 ionice）？

> ID：702407
> 
> 赞同：15
> 
> 时间：2009-03-31T18:23:07.147
> 
> 标签：python, linux, performance, unix

我希望一组特定的 Python 子流程的影响尽可能低。我已经在使用[nice](http://www.manpagez.com/man/1/nice/)来帮助限制 CPU 消耗。但理想情况下，I/O 也会受到限制。（如果持怀疑态度，请取笑我并假设这样做是有价值的；无论他们运行多长时间，都可能有很多，并且（通常）有更高优先级的事情正在进行同一台机器等）

一种可能性似乎是`ionice`。是否有任何现有的 Python 包用于调用`ionice`（谷歌没有出现任何东西）？`ionice`编写代码来简单地运行命令并不难；但我宁愿避免编写其他人编写/测试过的代码；有时会出现微妙的边缘情况等。而且，是否有更好的方法来限制 I/O 消耗？

ionice的[手册页](http://linux.die.net/man/1/ionice)表明该`ionice`值可能会受到该`nice`值的影响，但运行此 Python 2.6 脚本似乎证明了这一点，即使对于`nice`继承该值的子进程也是如此：

```
#!/usr/bin/env python

import os
import multiprocessing

def print_ionice(name):
    print '*** ', name, ' ***'
    os.system("echo -n 'nice: '; nice")
    os.system("echo -n 'ionice: '; ionice -p%d" % os.getpid())

for niced in (None, 19):
    if niced: os.nice(niced)
    print '**** niced to: ', niced, ' ****'
    print_ionice('parent')
    subproc = multiprocessing.Process(target=print_ionice, args=['child'])
    subproc.start()
    subproc.join() 
```

具有以下输出：

```
$ unname -as
Linux x.fake.org 2.6.27-11-server #1 SMP Thu Jan 29 20:13:12 UTC 2009 x86_64 GNU/Linux
$ ./foo.py
**** 很高兴：无 ****
*** 家长 ***
不错：0
ionice：无：prio 4
*** 孩子 ***
不错：0
ionice：无：prio 4
**** 很高兴：19 ****
*** 家长 ***
不错：19
ionice：无：prio 4
*** 孩子 ***
不错：19
ionice：无：prio 4

```

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2011-06-05T19:04:18.557

[psutil](http://code.google.com/p/psutil/)公开了这个功能（python 2.4 -> 3.2）：

```
import psutil, os
p = psutil.Process(os.getpid())
p.ionice(psutil.IOPRIO_CLASS_IDLE) 
```

此外，从 Python 3.3 开始，这也将在 python stdlib 中可用：http: [//bugs.python.org/issue10784](http://bugs.python.org/issue10784)

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2009-04-01T03:19:38.933

嗯。

作为起始指针，您应该找到内核中的系统调用和系统调用的`syscall`编号。我建议您签入or ，具体取决于您的内核架构；如果不在那里，请从手册页的建议开始，这应该包括在内。`ioprio_set``ioprio_get``/usr/include/asm/unistd_32.h``/usr/include/asm/unistd_64.h``syscall(2)``/usr/include/sys/syscall.h`

鉴于此，您应该使用`ctypes`, à la：

```
def ioprio_set(which, who, ioprio):
    rc= ctypes.CDLL('libc.so.6').syscall(289, which, who, ioprio)
    # some error checking goes here, and possibly exception throwing 
```

就是这样，或多或少。玩得开心 ：）

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2009-03-31T18:29:21.327

为什么不让任何*启动*进程对它们进行离子处理（即，用离子运行它们）而不是让它们自己离子处理？看起来干净了很多。

# sharepoint - Sharepoint：如何在站点之间移动内容

> ID：702409
> 
> 赞同：2
> 
> 时间：2009-03-31T18:23:43.447
> 
> 标签：sharepoint

将列表和 wiki 页面从一台 SharePoint 服务器移动到另一台服务器的最佳方式是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-03-31T18:28:11.877

如果保留项目级权限不是太重要，您可以从列表中创建一个列表模板，导出该模板，然后将其导入新服务器。

# tfs - TFS：从一台服务器移动到另一台服务器

> ID：702413
> 
> 赞同：5
> 
> 时间：2009-03-31T18:24:46.113
> 
> 标签：tfs

如何将我的代码和更改历史从一台 TFS 服务器移动到另一台？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2009-03-31T18:27:04.813

使用这个：**[TFS to TFS Migration Tool](http://www.codeplex.com/tfstotfsmigration)** from CodePlex

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2011-12-20T03:05:42.363

现在您可以使用 CodePlex 上的“ [TFS 集成平台”项目。](http://tfsintegration.codeplex.com/)它使迁移变得非常容易，并且可以保留您的历史记录。

# java - 如何知道其他线程是否已经完成？

> ID：702415
> 
> 赞同：135
> 
> 时间：2009-03-31T18:25:10.357
> 
> 标签：java, multithreading

我有一个带有名为 的方法的对象`StartDownload()`，它启动三个线程。

当每个线程完成执行时如何获得通知？

有没有办法知道一个（或全部）线程是否已完成或仍在执行？

* * *

## 回答 #1

> 赞同：240
> 
> 时间：2009-03-31T18:34:32.360

有多种方法可以做到这一点：

1.  在主线程中使用[Thread.join()](http://java.sun.com/javase/6/docs/api/java/lang/Thread.html#join())以阻塞方式等待每个线程完成，或者
2.  以轮询方式检查[Thread.isAlive()](http://java.sun.com/javase/6/docs/api/java/lang/Thread.html#isAlive()) - 通常不鼓励 - 等待每个线程完成，或者
3.  非正统的，对于每个有问题的线程，调用[setUncaughtExceptionHandler](http://java.sun.com/javase/6/docs/api/java/lang/Thread.html#setUncaughtExceptionHandler(java.lang.Thread.UncaughtExceptionHandler))来调用对象中的一个方法，并对每个线程进行编程以在它完成时抛出一个未捕获的异常，或者
4.  [使用来自java.util.concurrent](http://java.sun.com/javase/6/docs/api/java/util/concurrent/package-summary.html)的锁或同步器或机制，或
5.  更正统的是，在你的主线程中创建一个监听器，然后对你的每个线程进行编程以告诉监听器它们已经完成。

如何实现想法#5？好吧，一种方法是首先创建一个接口：

```
public interface ThreadCompleteListener {
    void notifyOfThreadComplete(final Thread thread);
} 
```

然后创建以下类：

```
public abstract class NotifyingThread extends Thread {
  private final Set<ThreadCompleteListener> listeners
                   = new CopyOnWriteArraySet<ThreadCompleteListener>();
  public final void addListener(final ThreadCompleteListener listener) {
    listeners.add(listener);
  }
  public final void removeListener(final ThreadCompleteListener listener) {
    listeners.remove(listener);
  }
  private final void notifyListeners() {
    for (ThreadCompleteListener listener : listeners) {
      listener.notifyOfThreadComplete(this);
    }
  }
  @Override
  public final void run() {
    try {
      doRun();
    } finally {
      notifyListeners();
    }
  }
  public abstract void doRun();
} 
```

然后你的每个线程都会扩展`NotifyingThread`，而不是实现`run()`它会实现`doRun()`. 因此，当他们完成时，他们会自动通知任何等待通知的人。

最后，在您的主类中——启动所有线程（或至少是等待通知的对象）的主类——修改该类，`implement ThreadCompleteListener`并在创建每个线程后立即将其自身添加到侦听器列表中：

```
NotifyingThread thread1 = new OneOfYourThreads();
thread1.addListener(this); // add ourselves as a listener
thread1.start();           // Start the Thread 
```

然后，当每个 Thread 退出时，您的`notifyOfThreadComplete`方法将使用刚刚完成（或崩溃）的 Thread 实例调用。

请注意，最好是 to`implements Runnable`而不是`extends Thread`for `NotifyingThread`，因为在新代码中通常不鼓励扩展 Thread。但我正在为你的问题编码。如果您更改`NotifyingThread`要实现的类，`Runnable`那么您必须更改一些管理线程的代码，这很容易做到。

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2009-06-23T11:02:39.613

**使用[CyclicBarrier的解决方案](http://docs.oracle.com/javase/8/docs/api/java/util/concurrent/CyclicBarrier.html)**

```
public class Downloader {
  private CyclicBarrier barrier;
  private final static int NUMBER_OF_DOWNLOADING_THREADS;

  private DownloadingThread extends Thread {
    private final String url;
    public DownloadingThread(String url) {
      super();
      this.url = url;
    }
    @Override
    public void run() {
      barrier.await(); // label1
      download(url);
      barrier.await(); // label2
    }
  }
  public void startDownload() {
    // plus one for the main thread of execution
    barrier = new CyclicBarrier(NUMBER_OF_DOWNLOADING_THREADS + 1); // label0
    for (int i = 0; i < NUMBER_OF_DOWNLOADING_THREADS; i++) {
      new DownloadingThread("http://www.flickr.com/someUser/pic" + i + ".jpg").start();
    }
    barrier.await(); // label3
    displayMessage("Please wait...");
    barrier.await(); // label4
    displayMessage("Finished");
  }
} 
```

**label0** - 循环屏障的创建方数量等于执行线程的数量加上主执行线程的数量（其中正在执行 startDownload()）

**标签 1** - 第 n 个 DownloadingThread 进入等候室

**标签 3** - NUMBER_OF_DOWNLOADING_THREADS 个已进入等候室。执行的主线程释放它们以或多或少同时开始执行下载工作

**标签 4** - 执行的主线程进入等候室。这是要理解的代码中“最棘手”的部分。哪个线程第二次进入等候室并不重要。重要的是，无论哪个线程最后进入房间，都可以确保所有其他下载线程都完成了他们的下载工作。

**标签 2** - 第 n 个 DownloadingThread 已完成其下载工作并进入等候室。如果是最后一个，即已经有NUMBER_OF_DOWNLOADING_THREADS个进入，包括执行的主线程，只有在所有其他线程都完成下载后，主线程才会继续执行。

* * *

## 回答 #3

> 赞同：9
> 
> 时间：2013-02-26T18:14:04.237

您*真的*应该更喜欢使用`java.util.concurrent`. 查找并阅读有关该主题的 Josh Bloch 和/或 Brian Goetz。

如果您不使用`java.util.concurrent.*`并负责直接使用线程，那么您可能应该使用`join()`来知道线程何时完成。这是一个超级简单的回调机制。首先扩展`Runnable`接口以具有回调：

```
public interface CallbackRunnable extends Runnable {
    public void callback();
} 
```

然后创建一个 Executor 来执行你的 runnable 并在它完成后给你回电。

```
public class CallbackExecutor implements Executor {

    @Override
    public void execute(final Runnable r) {
        final Thread runner = new Thread(r);
        runner.start();
        if ( r instanceof CallbackRunnable ) {
            // create a thread to perform the callback
            Thread callerbacker = new Thread(new Runnable() {
                @Override
                public void run() {
                    try {
                        // block until the running thread is done
                        runner.join();
                        ((CallbackRunnable)r).callback();
                    }
                    catch ( InterruptedException e ) {
                        // someone doesn't want us running. ok, maybe we give up.
                    }
                }
            });
            callerbacker.start();
        }
    }

} 
```

要添加到您的`CallbackRunnable`界面中的另一种显而易见的事情是处理任何异常的方法，因此可以`public void uncaughtException(Throwable e);`在其中放置一行并在您的执行程序中安装一个 Thread.UncaughtExceptionHandler 以将您发送到该接口方法。

但是做这一切真的开始闻起来像`java.util.concurrent.Callable`。`java.util.concurrent`如果您的项目允许，您应该真正考虑使用它。

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2009-03-31T18:27:40.037

你想等他们完成吗？如果是这样，请使用 Join 方法。

如果您只想检查它，还有 isAlive 属性。

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2009-03-31T18:32:15.953

您可以使用 getState() 查询线程实例，它返回具有以下值之一的 Thread.State 枚举实例：

```
*  NEW
  A thread that has not yet started is in this state.
* RUNNABLE
  A thread executing in the Java virtual machine is in this state.
* BLOCKED
  A thread that is blocked waiting for a monitor lock is in this state.
* WAITING
  A thread that is waiting indefinitely for another thread to perform a particular action is in this state.
* TIMED_WAITING
  A thread that is waiting for another thread to perform an action for up to a specified waiting time is in this state.
* TERMINATED
  A thread that has exited is in this state. 
```

但是我认为拥有一个等待 3 个子进程完成的主线程会是一个更好的设计，当其他 3 个子进程完成时，主线程将继续执行。

* * *

## 回答 #6

> 赞同：4
> 
> 时间：2011-02-21T15:32:38.317

您还可以使用该`Executors`对象创建一个 [ExecutorService](https://docs.oracle.com/javase/8/docs/api/java/util/concurrent/ExecutorService.html)线程池。然后使用该`invokeAll`方法运行每个线程并检索 Futures。这将阻塞，直到所有都完成执行。您的另一个选择是使用池执行每个，然后调用`awaitTermination`阻塞直到池完成执行。`shutdown`完成添加任务后，请务必调用()。

* * *

## 回答 #7

> 赞同：3
> 
> 时间：2016-02-21T18:36:46.833

在过去的 6 年中，多线程方面发生了许多变化。

您可以使用而不是使用`join()`和锁定 API

1\. [ExecutorService](https://docs.oracle.com/javase/8/docs/api/java/util/concurrent/ExecutorService.html) `invokeAll()` API

> 执行给定的任务，返回一个 Futures 列表，在所有完成时保存它们的状态和结果。

2.[倒计时锁存器](https://docs.oracle.com/javase/8/docs/api/java/util/concurrent/CountDownLatch.html)

> 一种同步辅助，允许一个或多个线程等待，直到在其他线程中执行的一组操作完成。
> 
> A`CountDownLatch`用给定的计数初始化。await 方法会阻塞，直到当前计数由于调用该`countDown()`方法而达到零，之后所有等待的线程都被释放并且任何后续的 await 调用立即返回。这是一次性现象——计数无法重置。如果您需要重置计数的版本，请考虑使用 CyclicBarrier。

3\. [ForkJoinPool](https://docs.oracle.com/javase/8/docs/api/java/util/concurrent/ForkJoinPool.html)或者 [Executors](https://docs.oracle.com/javase/8/docs/api/java/util/concurrent/Executors.html)`newWorkStealingPool()`是其他方式

`Future`4.从提交开始遍历所有任务，`ExecutorService`并通过阻塞调用`get()`对象`Future`检查状态

查看相关的 SE 问题：

[如何等待产生它自己的线程的线程？](https://stackoverflow.com/questions/35075886/how-to-wait-for-a-thread-that-spawns-its-own-thread/35076391#35076391)

[Executors：如果任务是递归创建的，如何同步等待所有任务完成？](https://stackoverflow.com/questions/14535770/executors-how-to-synchronously-wait-until-all-tasks-have-finished-if-tasks-are)

* * *

## 回答 #8

> 赞同：2
> 
> 时间：2009-03-31T18:34:32.737

我建议查看[Thread](http://docs.oracle.com/javase/8/docs/api/java/lang/Thread.html) 类的 javadoc。

您有多种线程操作机制。

*   您的主线程可以`join()`连续三个线程，然后在所有三个线程都完成之前不会继续。

*   每隔一段时间轮询生成线程的线程状态。

*   将所有产生的线程放入一个单独的线程中并`ThreadGroup`轮询线程并等待它变为 0。`activeCount()``ThreadGroup`

*   为线程间通信设置自定义回调或侦听器类型的接口。

我敢肯定还有很多其他方法我仍然想念。

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2016-10-06T02:32:08.970

这是一个简单、简短、易于理解且非常适合我的解决方案。当另一个线程结束时，我需要绘制到屏幕上；但不能，因为主线程可以控制屏幕。所以：

（1）我创建了全局变量：`boolean end1 = false;`线程结束时将其设置为true。这是由“postDelayed”循环在主线程中拾取的，并在其中得到响应。

(2) 我的主题包含：

```
void myThread() {
    end1 = false;
    new CountDownTimer(((60000, 1000) { // milliseconds for onFinish, onTick
        public void onFinish()
        {
            // do stuff here once at end of time.
            end1 = true; // signal that the thread has ended.
        }
        public void onTick(long millisUntilFinished)
        {
          // do stuff here repeatedly.
        }
    }.start();

} 
```

(3) 幸运的是，“postDelayed”在主线程中运行，因此每秒检查一次另一个线程。当另一个线程结束时，这可以开始我们接下来想做的任何事情。

```
Handler h1 = new Handler();

private void checkThread() {
   h1.postDelayed(new Runnable() {
      public void run() {
         if (end1)
            // resond to the second thread ending here.
         else
            h1.postDelayed(this, 1000);
      }
   }, 1000);
} 
```

(4) 最后，通过调用以下命令开始在代码中某处运行整个事情：

```
void startThread()
{
   myThread();
   checkThread();
} 
```

* * *

## 回答 #10

> 赞同：1
> 
> 时间：2019-02-28T17:46:14.747

我想最简单的方法是使用`ThreadPoolExecutor`类。

1.  它有一个队列，您可以设置应该并行工作的线程数。
2.  它有很好的回调方法：

> **挂钩方法**
> 
> 此类提供受保护的可重写`beforeExecute(java.lang.Thread, java.lang.Runnable)`和`afterExecute(java.lang.Runnable, java.lang.Throwable)`在执行每个任务之前和之后调用的方法。这些可用于操纵执行环境；例如，重新初始化 ThreadLocals、收集统计信息或添加日志条目。此外，`terminated()`可以重写方法以执行任何需要在 Executor 完全终止后完成的特殊处理。

这正是我们所需要的。我们将覆盖 `afterExecute()`以在每个线程完成后获取回调，并将覆盖`terminated()`以了解所有线程何时完成。

所以这是你应该做的

1.  创建执行器：

    ```
    private ThreadPoolExecutor executor;
    private int NUMBER_OF_CORES = Runtime.getRuntime().availableProcessors();    

    private void initExecutor() {

    executor = new ThreadPoolExecutor(
            NUMBER_OF_CORES * 2,  //core pool size
            NUMBER_OF_CORES * 2, //max pool size
            60L, //keep aive time
            TimeUnit.SECONDS,
            new LinkedBlockingQueue<Runnable>()
    ) {

        @Override
        protected void afterExecute(Runnable r, Throwable t) {
            super.afterExecute(r, t);
                //Yet another thread is finished:
                informUiAboutProgress(executor.getCompletedTaskCount(), listOfUrisToProcess.size());
            }
        }

    };

        @Override
        protected void terminated() {
            super.terminated();
            informUiThatWeAreDone();
        }

    } 
    ```

2.  并开始你的线程：

    ```
    private void startTheWork(){
        for (Uri uri : listOfUrisToProcess) {
            executor.execute(new Runnable() {
                @Override
                public void run() {
                    doSomeHeavyWork(uri);
                }
            });
        }
        executor.shutdown(); //call it when you won't add jobs anymore 
    } 
    ```

当所有线程都完成后， Inside 方法`informUiThatWeAreDone();`会做任何你需要做的事情，例如，更新 UI。

*注意：*不要忘记使用`synchronized`方法，因为您是并行工作的，如果您决定`synchronized`从另一个`synchronized`方法调用方法，请务必小心！这通常会导致死锁

希望这可以帮助！

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2009-03-31T18:28:49.457

查看 Thread 类的 Java 文档。您可以检查线程的状态。如果将三个线程放在成员变量中，那么三个线程都可以读取彼此的状态。

但是，您必须小心一点，因为您可能会导致线程之间出现竞争条件。尽量避免基于其他线程状态的复杂逻辑。绝对避免多个线程写入相同的变量。

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2009-06-23T11:11:26.880

您还可以使用具有内置属性更改支持的 SwingWorker。有关状态更改侦听器示例，请参阅[addPropertyChangeListener()](http://java.sun.com/javase/6/docs/api/javax/swing/SwingWorker.html#addPropertyChangeListener(java.beans.PropertyChangeListener))或[get()](http://java.sun.com/javase/6/docs/api/javax/swing/SwingWorker.html#get())方法。

# testng - 可以使用 TestNG DataProvider 和测试套件参数吗？

> ID：702416
> 
> 赞同：13
> 
> 时间：2009-03-31T18:25:21.057
> 
> 标签：testng, data-driven-tests

有谁知道是否有办法在使用**@Parameter**注释的同时使用 TestNG **DataProvider**和测试？我们的测试套件有一些常量配置信息，这些信息通过@Parameter 注解传递给测试方法。我们现在想使用 DataProvider 对一组数据值运行这些测试。

 **我理解确定结果参数的顺序的内部问题，但如果可能的话，我们需要这个特性。

有什么想法吗？

在理想的世界中，我可以这样做：

```
@Test(dataprovider = "dataLoader")
@Parameters("suiteParam")
public void testMethod(String suiteParam, String fromDataParam) {
...
} 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2009-06-14T08:25:39.097

嘿，这可能有点笨拙，但你为什么不使用@BeforeClass 方法将suiteParam 本地存储在测试类的字段中，就像这样。

```
private String suiteParam;

@BeforeClass
@Parameter("suiteParam")
public void init(String suiteParam) {
  this.suiteParam = suiteParam;
} 
```

这样，您可以以通常的方式使用您的数据提供者，并且仍然可以访问您的套件参数。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2011-01-17T16:05:57.663

是的，使用[TestNG 的依赖注入功能](http://testng.org/doc/documentation-main.html#dependency-injection)。您可以访问 DataProvider 中所有已定义的参数。这是一些需要 test_param 参数的示例 DataProvider：

```
@DataProvider(name = "usesParameter")
public Object[][] provideTestParam(ITestContext context) {
    String testParam = context.getCurrentXmlTest().getParameter("test_param");
    return new Object[][] {{ testParam }};
} 
```

这样，您可以在 DataProvider 中收集配置和生成的参数，然后将其用于您的测试。有关 ITestContext 类的详细信息，请参阅[TestNG JavaDoc](http://testng.org/javadocs/org/testng/ITestContext.html)。

# flash - 具有嵌入类的 AS2 FLA 组件

> ID：702420
> 
> 赞同：1
> 
> 时间：2009-03-31T18:26:45.953
> 
> 标签：flash, actionscript, actionscript-2, components

我正在尝试创建一个易于换肤的 AS2 组件。

我通过创建带有一些资产的 mc > 组件定义 > 将其链接到 MyClass 来创建 FLA 组件，然后将 fla 放入 Components 目录。如果我然后将组件拖到一个新的fla中并尝试渲染，它显然会抛出找不到MyClass的错误。我宁愿不单独提供 src 文件。

我尝试过一些使用 componentShim 描述的演练，但似乎这仅适用于 AS3。

有什么建议么 ？

蒂亚！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-03-31T22:07:54.190

在我看来，您正在尝试创建编译剪辑（SWC）。[您可以在此处](http://livedocs.adobe.com/flash/mx2004/main_7_2/wwhelp/wwhimpl/common/html/wwhelp.htm?context=Flash_MX_2004&file=00003108.html#1140637)找到一些 Adob​​e 文档，但我更愿意[阅读本教程](http://www.communitymx.com/content/article.cfm?page=1&cid=DC2C0)。似乎更直接，更容易理解。

# database - 为什么要限制密码的长度？

> ID：702421
> 
> 赞同：52
> 
> 时间：2009-03-31T18:26:52.987
> 
> 标签：database, security, web-applications, passwords

我刚刚注册了一个网站来购买一些商品，当我尝试输入我的（相当安全的）密码时，我被告知它太长了，我应该输入一个 5 到 10 个字符之间的密码！那有什么意义呢？谁做出这样的决定？当然，理想的密码会是一个非常长且复杂的密码吗？为什么人们坚持试图限制您可以使用的密码类型？

您是否必须实现对网站的登录？是否出于安全目的登录（例如购买商品）。您对用户密码设置了哪些（如果有）限制？你做出这个决定的原因是什么？

* * *

## 回答 #1

> 赞同：104
> 
> 时间：2009-03-31T18:29:19.813

限制密码的大小是为了节省存储空间。这几乎表明您的密码被简单地存储在他们的数据库中，因此他们想要限制其大小。否则这只是一个限制，因为实施者不知道更好。无论哪种方式，这都是一个不好的迹象。

您可能想联系该网站的管理员并询问他们。他们应该存储哈希值，而不是密码，无论密码有多大，它们总是相同的大小。您输入的密码大小以及您被允许输入的字符域确实应该没有限制。

* * *

## 回答 #2

> 赞同：29
> 
> 时间：2009-03-31T18:32:29.887

最常见的原因是前端集成了一些*旧的*遗留系统，这些系统不能处理超过给定数量的字符。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2009-03-31T18:33:44.110

似乎特别愚蠢，因为任何半体面的网站都不在其数据库中存储明文密码，它们存储该密码的单向哈希（根据所使用的算法，它始终是一个设定的长度，例如 sha1 是 160 位摘要) 然后在登录时重新散列该密码，以确保新散列的密码与存储的密码匹配。

除了前端设计美学 - 我同意，强制执行最大密码长度没有任何意义。尽管出于显而易见的原因，最小长度完全不同。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2009-03-31T18:38:44.707

长度限制*可能是*由于存储空间问题，但它*可能*是一个非常糟糕的反脚本措施。如果我的银行告诉我我的密码太短而不是太长，我会更有信心。每当我被告知我的密码太短，或者不允许使用“特殊”字符时，我都会想，“哦，他们一定没有在他们的字典中找到我的密码...... *facepalm*。”

应该允许任何字符。应该鼓励而不是劝阻密码**短语。**它们比神秘的密码更容易记住，也更难破解，因为它们不会出现在查找表中。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2009-03-31T18:30:31.030

一些（设计不佳的）网站有最大的密码长度，原因很简单：这是他们在数据库中存储密码的所有空间。他们很有可能根本没有散列或处理它，这意味着它以纯文本形式存储。像这样的网站，我每次都使用一次性密码。这是一个糟糕的设计，不幸的是人们仍在使用它。

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2009-03-31T18:31:20.043

可能是他们用于加密的算法不适用于大密码，或者他们只有有限的存储空间来存储它。我知道，两者都是非常糟糕的原因，但这是可能的。

如果我要制定密码规则，那只是为了保护用户，比如强制他们使用至少一个特殊字符和数字或混合大小写。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2009-03-31T19:42:15.427

这可能是因为他们将您的密码存储为纯文本并试图节省空间，但也可能是因为他们试图阻止人们将密码设置得太长然后忘记它们，这意味着公司必须发送一封电子邮件你的密码，这有点麻烦。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2009-03-31T18:29:56.367

以这种方式限制密码的唯一可能原因是简化数据库表，这是一个不好的原因。应该允许使用长而复杂的密码！

此外，该站点根本不应该存储密码，而是存储加密哈希。由于哈希是固定大小的，这使得数据库非常简单并且存储需求很小。

# apache-flex - Flex：如何避免在鼠标按下时自定义光标的闪烁光标

> ID：702433
> 
> 赞同：2
> 
> 时间：2009-03-31T18:28:26.527
> 
> 标签：apache-flex

我使用`CursorManager`精灵的鼠标按下事件设置了一个自定义光标。

显示自定义光标。但是，当我按住鼠标时，系统光标也会显示并闪烁。

知道如何防止这种情况吗？

我试过： - 更高的光标优先级 - 防止鼠标按下事件中的默认值

似乎没有任何效果。

仅在鼠标悬停时更改光标效果很好。

谢谢斯特凡

PS: - Mac 上的 Safari - Flash 调试播放器 10.0.2.54

# iphone - iPhone应用程序可以在模拟器上运行，并且在导出到设备时可以使用，但不能通过cydia

> ID：702437
> 
> 赞同：0
> 
> 时间：2009-03-31T18:28:49.643
> 
> 标签：iphone

我想做的事：在没有开发许可证的情况下使用 SCP 将应用程序部署到我的手机上。

发生了什么：我可以在模拟器和设备上进行测试，并且应用程序可以 100% 运行。当我将应用程序 scp 到手机上的 Applications 文件夹时，图标会显示，并且应用程序会打开大约几秒钟然后关闭（除了黑色背景，您什么都看不到）。

我尝试使用 ldid 对其进行签名，主二进制文件设置为 0755 并 chown'd 为 root:wheel。我尝试了各种许可情况，无论如何，该应用程序几乎都做同样的事情。

是什么导致这种情况发生？我知道这是可能的，因为每个将应用程序上传到 cydia 的人都遵循相同的过程。

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-06-28T21:12:25.823

设备上编译的二进制文件是 x86 二进制文件，您需要为 iPhone 使用不同的版本。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2010-02-09T23:35:31.103

检查系统日志，并在您点击应用程序图标时查看它的内容。如果它显示“已终止”，请从 Cydia 下载 ldid 包并 cd 到您的应用程序文件夹并使用 ldid -S binaryname 对其进行签名。

另外，您是使用 Open Toolchain 还是 Apple 的？

# php - 时区函数帮助

> ID：702448
> 
> 赞同：1
> 
> 时间：2009-03-31T18:31:21.260
> 
> 标签：php, mysql

这可能是一个太大的要求，但在我外包之前，我想先尝试了解它，然后为自己做。

我正在从事一个涉及现有数据库的项目。我正在围绕现有数据构建站点，但遇到了时间戳问题。基本上，我希望有人能给我一个片段示例，说明我需要什么（函数或类）来实现这一点：

1.  数据库中的每个用户都有数据表，其中包括博客、文章和其他包含日期时间戳的输入等内容。
2.  每个用户还有一个他们在注册时手动选择的时区代码（即：10+、12-、1+ 等等），以使任何时间戳适用于他们的时区。
3.  我需要创建一个函数（或类），使我能够收集用户时区，并将任何时间戳转换为适用于用户时区代码。

例子：

```
$timestamp = $rows[blogentry_date]; //Just an example of a query result
$users_timeszone_code = TheFunctionI_NeedHelpCreating() // Hopefully collects users 
// timezone code, and converts it to a supported 
// timezone using date_default_timezone_set()??(just a guess)
CreateDate($users_timeszone_code, $timestamp); 
```

示例输出：

```
12, Monday 2007\. 5:00am // Just as an example 
```

这有意义吗？我希望我的例子没有让事情变得更糟，但我发现用小代码片段解释我的想法比用文字更容易......哈哈。任何帮助将不胜感激。

干杯，谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-03-31T18:43:00.640

使用时区代码不是一个好主意。不同的时区会更改不同日期的夏令时。理想情况下（IMO），如果您使用的相关平台可以处理它们，您应该使用诸如“欧洲/伦敦”之类的[奥尔森代码。](http://en.wikipedia.org/wiki/Zoneinfo)这些应该允许您预测用户时区的任何特定时刻何时发生。

很抱歉，这实际上对您需要编写的功能没有帮助，但它应该可以帮助您避免走错方向。

（我是从痛苦的经历中说出来的——时区让人头疼。）

# visual-studio-2008 - 我可以在 32 位机器上构建 x64 应用程序吗？

> ID：702449
> 
> 赞同：7
> 
> 时间：2009-03-31T18:31:46.470
> 
> 标签：visual-studio-2008, 64-bit

如何在 32 位 PC 上开发 64 位应用程序？

我在 WinXP 32 位上使用 VS 2008。我将 Visual Studio 链接器设置为 /machine:x64 并创建了 x64 配置。一切都将编译并链接正常，但是当我在 exe 上运行依赖项walker 时，我看到 64 位 mscvr90.dll 等指向所有 Win32 dll、Kernel32.dll、Advapi32、Comdlg32、Gdi32 等。

当我将 exe 复制到 Win64 系统上运行时，它被拒绝“...应用程序配置不正确”。我如何告诉视觉工作室远离 32 位领域？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2009-03-31T18:33:17.543

是的，它被称为交叉编译。

[http://blogs.msdn.com/windowssdk/archive/2007/09/08/updated-windows-sdk-visual-c-cross-compilers.aspx](http://blogs.msdn.com/windowssdk/archive/2007/09/08/updated-windows-sdk-visual-c-cross-compilers.aspx)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2009-03-31T18:32:48.870

你当然可以。更多信息：

*   [Microsoft Visual C++ 2008 Redistributable Package (x64)](http://www.microsoft.com/downloads/details.aspx?familyid=bd2a6171-e2d6-4230-b809-9a8d7548c1b6&displaylang=en) - 确保你拥有它
*   在 MSDN 上[安装 Visual Studio 64 位组件](http://msdn.microsoft.com/en-us/library/ms246588.aspx)
*   MSDN 上[的 64 位应用程序](http://msdn.microsoft.com/en-us/library/ms241064.aspx)
*   [在 Visual Studio 2005 中编译 64 位应用程序](http://winprogger.com/blog/?p=17)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-03-31T18:35:08.910

由于您使用的是 VS2008，因此您必须将 redist 包与您的应用程序一起复制到测试机器上，或者将运行时编译为代码中的静态库。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-03-31T18:34:28.337

您的“被拒绝”可执行文件的问题可能是您缺少正确的清单文件，和/或 vc2008 运行时尚未（正确）安装在系统上。如果不使用基于 .msi 的安装，您可能需要在目标系统上使用[此运行时包](http://www.microsoft.com/downloads/details.aspx?familyid=bd2a6171-e2d6-4230-b809-9a8d7548c1b6&displaylang=en)（VS2008**本机可再发行组件，x64 版本）。**

即使在 64 位窗口中，DLL 仍然有它们的 32 位名称（恕我直言，这是一个糟糕的选择，因为它显然会让人们感到困惑）。默认情况下，32 位应用程序会将 %systemroot%\system32 重定向到 %systemroot%\syswow64（32 位 DLL 所在的位置），而 64 位应用程序不会被重定向。32 位应用程序的注册表访问也涉及一些重定向。两者都可以使用 Wow64DisableWow64FsRedirection() 禁用每个线程，但显然不允许 32 位应用程序加载 64 位 DLL。

# c - 如何在 C 中获取发件人的 UDP 端口？

> ID：702451
> 
> 赞同：5
> 
> 时间：2009-03-31T18:31:56.533
> 
> 标签：c, udp

我在Linux下的C中有以下典型代码来获取UDP数据：

```
sock = socket(PF_INET, SOCK_DGRAM, IPPROTO_UDP);
mysock.sin_family = AF_INET;
mysock.sin_addr.s_addr = INADDR_ANY;
mysock.sin_port = my_port;
bind(sock, &mysock, sizeof(mysock);
recvfrom(sock, buf, PKTSZ, 0, &client, len); 
```

以上所有代码都有效，但现在我需要找出发件人的 udp 端口​​，当我收到 udp 数据包时，是否有可以用来检索此类信息的结构或系统调用？

谢谢

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2009-03-31T19:16:29.263

> recvfrom(sock, buf, PKTSZ, 0, &client, len);

发件人套接字地址存储在代码的**客户端**变量中。要访问发件人端口，请使用**sockaddr_in**而不是**sockaddr**。例子：

```
sockaddr_in client;
int len = sizeof(client);
recvfrom(sock, buf, PKTSZ, 0, (struct sockaddr *)&client, (socklen_t *)&len);
int port = ntohs(client.sin_port); 
```

参考： [Beej 的网络编程指南](http://beej.us/guide/bgnet/output/html/multipage/syscalls.html#sendtorecv)和[MSDN](http://msdn.microsoft.com/en-us/library/ms740120(VS.85).aspx)

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2009-03-31T18:38:30.667

recvfrom() 应该在第五个参数（struct sockaddr*）中返回给你。

**编辑：** 使用这样的东西

```
struct sockaddr_in client;

recvfrom(... (struct sockaddr*)&client ...); 
```

`client.sin_port`应该是发件人的端口。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-03-31T18:42:42.403

UDP 发送方端口将是瞬态的。我认为您不能将其用于报告以外的任何其他用途。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-03-31T19:21:07.147

第五个参数可以强制转换为`struct sockaddr_in`，并且有`sin_port`远程端口号。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2009-03-31T19:43:52.133

将客户端投射到 sockaddr_in 解决了我的问题。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2019-10-24T16:17:23.770

是的！首先记住 ntohs() ！直到我使用程序员的计算器，我才意识到它被存储为 BigEndian 15B3，而不是可能的临时端口 B315！

# sql-server - 组合索引与多个单索引与全文索引的查询性能

> ID：702469
> 
> 赞同：3
> 
> 时间：2009-03-31T18:35:47.583
> 
> 标签：sql-server, performance, indexing, sql-server-2000, query-optimization

**背景：**我有一个包含 500 万个地址条目的表格，我想搜索不同的字段（客户姓名、联系人姓名、邮编、城市、电话...），最多 8 个字段。数据相当稳定，一天最多修改50次，所以几乎只有读权限。

用户不应该提前告诉我他在搜索什么，我还希望支持组合搜索（搜索词的 AND 连接）。例如，“lincoln+lond”应在任何搜索字段中搜索包含两个搜索词的所有记录，以及以任何词开头的条目（如本例中的“London”）。

**问题：**现在我需要为这个搜索表选择一个索引策略。（附带说明：我正在尝试实现亚秒级响应时间，最差响应时间应该是 2 秒。）在性能方面更好的是：

1.  从所有可查询的列中做一个组合索引（需要 2 个，因为达到了 900 字节的索引限制）
2.  在每个可查询列上放置单个索引
3.  在可查询列上建立全文索引并使用全文查询

我放弃了第 1 点，因为它似乎没有任何优势（索引使用会受到限制，并且不会有“索引搜索”，因为并非所有字段都适合一个索引）。

**问题：**现在，我应该使用**多个单索引**变体还是应该使用**全文索引**？有**没有其他方法**可以实现上述功能？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-03-31T18:42:47.130

两者都试一下，看看哪个在您的系统上更快。数据库优化几乎没有硬性规定，这实际上取决于您的环境。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-05-04T11:58:05.320

最初，我正要建议使用**FTS**，因为它具有许多强大的性能特性。尤其是在处理各种查询时。（例如 x AND y。x NEAR y 等）。

但在开始讨论 FTS 的专业人士之前，我刚刚检查了您的服务器版本 -> sql2000。

可怜的东西。FTS 那时非常简单，所以坚持使用*多个单一索引*。

我们使用 Sql2008 并且......它摇滚。

哦，顺便说一句。你知道Sql2008（免费版）里面有FTS吗？是否可以升级？

如果可以的话，从 sql2000 -> sql2008 开始是非常值得的。

但是，是的，坚持使用您的 MSI 选项。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-04-15T13:24:46.597

我同意 Grauenwolf 的观点，我想添加一个关于索引的注释。请记住，如果您使用如下语法：

```
SELECT field1, field2, field3
FROM table
WHERE field1 LIKE '%value% 
```

*然后在field1*上搜索时无论如何都不会使用任何索引，您必须求助于全文索引。为了完整起见，上述语法返回*field1*包含*值*的所有行（不一定在开头）。如果您必须搜索“包含”，则全文索引可能更合适。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2009-05-04T11:39:18.953

回答我自己的问题：

我选择了“多个单一索引”选项。我最终为每个查询的列建立了一个索引，每个索引只包含列本身。搜索效果非常好，响应时间大多为亚秒级。有时它需要 2-3 秒，但我将其归因于我的数据库服务器（具有 3GB 内存和慢速磁盘的几年前的笔记本电脑）。

我没有测试全文选项，因为它不再需要（而且我没有时间去做。）

# wpf - 找到窗口的 zorder

> ID：702474
> 
> 赞同：1
> 
> 时间：2009-03-31T18:37:11.980
> 
> 标签：wpf, winforms

我有一个 wpf 应用程序，我需要确定是否有任何其他窗口位于当前窗口之上。我不能使用 IsActive，因为你可以有 2 个并排的窗口（例如 IE 和 wpf 应用程序）并让另一个应用程序处于活动状态，但不能超过 wpf 应用程序。

本质上，我想知道是否有任何东西在物理上结束并掩盖了 wpf 窗口的一部分，而无需激活。

我尝试了以下 GetWindowRect GetTopWindow

并将 topwindow 进程与当前进程进行比较，这有效，但似乎只有效一次。

有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2009-04-07T18:37:36.470

我以前做过类似的事情，但我没有找到任何管理的方式来做到这一点。因此，这并不是真正的 WPF 问题，而是“回到非托管”或“旧 PInvoke”之类的问题。这是适合您的任务的摘录：

XAML 定义。

```
<Window x:Class="WpfApplication1.Window1"
xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
Title="Window1" Height="300" Width="300">
<Grid>
    <Label Name="IsSomethingOverLabel">Label</Label>
</Grid>
</Window> 
```

后面的 CS 代码。

```
using System;
using System.Windows;
using System.Windows.Interop;
using System.Runtime.InteropServices;
using System.Windows.Threading;

namespace WpfApplication1 {
using LONG = System.Int32;
using UINT = System.UInt32;    

public partial class Window1: Window {
    DispatcherTimer tmr;

    public Window1() {
        InitializeComponent();

        tmr = new DispatcherTimer();
        tmr.Tick += new EventHandler(tmr_Tick);
        tmr.Start();
    }

    void tmr_Tick(object sender, EventArgs e) {
        RECT Rect2 = GetWindowRect(Handle);
        IntPtr h = GetWindow(Handle, GW_HWNDPREV);
        while(h != IntPtr.Zero) {
            if(IsWindowShown(h))//This is to check that the window found is not minimized etc.
            {
                RECT Rect1 = GetWindowRect(h);
                if(Rect1OverlapsRect2(Rect1, Rect2)) {
                    IsSomethingOverLabel.Content = GetWindowText(h);
                    return;
                }
            }
            h = GetWindow(h, GW_HWNDPREV);
        }
        IsSomethingOverLabel.Content = "Nothing over";
    }

    bool Rect1OverlapsRect2(RECT Rect1, RECT Rect2) {
        return Rect1.left < Rect2.right && Rect1.right > Rect2.left &&
            Rect1.top < Rect2.bottom && Rect1.bottom > Rect2.top;
    }

    private IntPtr Handle {
        get { return new WindowInteropHelper(this).Handle; }
    }

    public const uint GW_HWNDFIRST = 0,
        GW_HWNDLAST = 1,
        GW_HWNDNEXT = 2,
        GW_HWNDPREV = 3,
        GW_OWNER = 4,
        GW_CHILD = 5,
        GW_MAX = 5;
    [DllImport("user32.dll", CharSet = CharSet.Auto)]
    public static extern IntPtr GetWindow(IntPtr hWnd, uint wCmd);

    [StructLayout(LayoutKind.Sequential)]
    public struct RECT {
        public LONG left;
        public LONG top;
        public LONG right;
        public LONG bottom;
    }

    [DllImport("user32.dll", CharSet = CharSet.Auto)]
    public static extern bool GetWindowRect(IntPtr hWnd, ref RECT lpRect);
    public static RECT GetWindowRect(IntPtr hWnd) {
        RECT lpRect = new RECT();
        if(!GetWindowRect(hWnd, ref lpRect)) {
            lpRect.top = lpRect.left = lpRect.bottom = lpRect.right = -1;
        }
        return lpRect;
    }

    [DllImport("user32.dll", CharSet = CharSet.Auto)]
    public static extern int GetWindowTextLength(IntPtr hWnd);
    [DllImport("user32.dll", CharSet = CharSet.Auto)]
    public static extern int GetWindowText(IntPtr hWnd, string lpString, int nMaxCount);
    public static string GetWindowText(IntPtr hWnd) {
        int len = GetWindowTextLength(hWnd) + 1;
        string s = new string(' ', len);
        if(GetWindowText(hWnd, s, len) != 0) {
            return s.Substring(0, len - 1);
        } else {
            return "";
        }
    }

    [DllImport("user32.dll", CharSet = CharSet.Auto)]
    public static extern bool IsWindowVisible(IntPtr hWnd);
    public const int SW_HIDE = 0,
        SW_SHOWNORMAL = 1,
        SW_NORMAL = 1,
        SW_SHOWMINIMIZED = 2,
        SW_SHOWMAXIMIZED = 3,
        SW_MAXIMIZE = 3,
        SW_SHOWNOACTIVATE = 4,
        SW_SHOW = 5,
        SW_MINIMIZE = 6,
        SW_SHOWMINNOACTIVE = 7,
        SW_SHOWNA = 8,
        SW_RESTORE = 9,
        SW_SHOWDEFAULT = 10,
        SW_MAX = 10;
    [DllImport("user32.dll", CharSet = CharSet.Auto)]
    public static extern bool GetWindowPlacement(IntPtr hWnd, ref WINDOWPLACEMENT lpwndpl);
    [StructLayout(LayoutKind.Sequential)]
    public struct POINT {
        public LONG x;
        public LONG y;
    }

    [StructLayout(LayoutKind.Sequential)]
    public struct WINDOWPLACEMENT {
        public UINT length;
        public UINT flags;
        public UINT showCmd;
        public POINT ptMinPosition;
        public POINT ptMaxPosition;
        public RECT rcNormalPosition;
    }

    public static bool IsWindowShown(IntPtr hWnd) {
        bool res = IsWindowVisible(hWnd);
        WINDOWPLACEMENT placement = new WINDOWPLACEMENT();
        if(res && GetWindowPlacement(hWnd, ref placement)) {
            switch(placement.showCmd) {
                case SW_RESTORE:
                case SW_SHOW:
                case SW_SHOWMAXIMIZED:
                case SW_SHOWNA:
                case SW_SHOWNORMAL:
                    res = true;
                    break;
                default:
                    res = false;
                    break;
            }
        }
        return res;
    }
}
} 
```

重新审视代码，GetWindowPlacement 本身可能就足够了，消除了 GetWindowRect 调用，您也可以尝试一下。

# jquery - 在 jquery 重定向后在 asp.net mvc 中找到引用页面

> ID：702476
> 
> 赞同：2
> 
> 时间：2009-03-31T18:37:35.833
> 
> 标签：jquery, asp.net-mvc, redirect, referrer

我正在使用 jquery 伪造自动回发，因为我使用的是 asp.net mvc。它在一个选择列表（下拉列表）中执行，如下所示：

```
$(document).ready(function() {
    // autopostback for character drop down list
    $('#playerCharacters').change(function() {
        var charId = $('#playerCharacters option:selected').val();
        window.location = "/Character/SetDefault/" + charId;
    });
}); 
```

现在在 /Character/SetDefault/[charID] (controller, action, ID) 我试图使用这个访问引用 URL：

```
Request.UrlReferrer 
```

但它即将为空。关于为什么会这样的任何想法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-04-06T03:03:08.050

我认为直接设置 window.location 被浏览器对待与对待用户直接在地址栏中输入新 URL 相同。这意味着没有引荐来源网址，因为引荐来源网址是关于一个页面直接引用另一个页面（例如，通过链接）而不是浏览器只是转到另一个页面......

我认为解决您的问题的最简单方法是确保您的下拉列表采用发布（或获取）到 /Character/SetDefault 的表单，然后让您的 javascript 提交如下表单：

```
$('#playerCharacters').change(function() {
    this.form.submit();
}); 
```

然后，您只需将控制器中的 SetDefault 操作更改为具有 playerCharacters 参数，以便 MVC 将表单的请求值正确绑定到您的方法。

# objective-c - 获取字符的字母数字

> ID：702478
> 
> 赞同：1
> 
> 时间：2009-03-31T18:38:06.830
> 
> 标签：objective-c

我正在用目标 c 编程，我想得到字符的字母顺序。例如：A、a - 1、B、b - 2、... Z、z - 26

Objective C 中是否有一个函数可以让我实现这个目标？

提前谢谢你，伊利亚。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2009-03-31T18:40:50.020

好吧，如果你能**保证字符集是 ASCII**，那么你可以从 'A' 中减去 char 然后加 1（如果你想从 1 而不是 0 开始计数，只加一个）。

前任：

```
char ch = 'E';
int num = toupper(ch) - 'A' + 1; // to upper since 'A' and 'a' are not the same character.
// num now is 5 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-03-31T18:51:48.170

只保留字符代码的低五位：

```
int n = ch & 0x1F; 
```

'A'的字符码是0x41，'a'是0x61，所以去掉前三位后都是0x01。（当然，其他角色也一样。）

# caching - 域别名与边缘端包括 CDN

> ID：702486
> 
> 赞同：2
> 
> 时间：2009-03-31T18:39:54.203
> 
> 标签：caching, cdn, domain-aliasing

我正在设计一个 Web 应用程序以支持将来使用 CDN。

我考虑过的两个选项：

1.  对站点上的静态内容使用域别名，包括 CSS、JS 和一些图像。
2.  使用“边缘包含”来指定静态内容区域。

(1) 更简单，我之前已经实现过。例如，我们会为每个 IMG src 加上[http://images1.mysite.com/](http://images1.mysite.com/)前缀，然后更新相应的 DNS 以使用 CDN。我从我们内部“预生产”网站的用户那里听到的缺点是，他们必须将图像推送到 images1.mysite.com 以在内部预览他们的更改——理想情况下，文件不会被推送到 images1.mysite .com 直到他们准备好投入生产。（注意 - 主机文件更改和 DNS 技巧在这里不是一个选项。）

相反，他们只想对静态内容使用相对或绝对路径。例如 /images/myimage.gif

(2) 我不太熟悉，我想了解更多信息。这是否允许我们的“预生产”团队在“预生产环境”中引用具有相对路径的静态内容，而无需修改 HTML 就可以在生产中与 CDN 一起使用？

有人可以比较这两种选择，在易于开发、灵活性和成本方面吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-04-11T00:08:54.907

这是要考虑的第二个选项的变体。

在 HTML 中单独保留相对图像 URL。在您的生产服务器上，让图像请求将服务器端重定向返回到 CDN 上的图像位置。这比其他技术产生的流量略多，但它会为每个图像命中生成一个访问日志条目，使您的 HTML 和站点结构保持简单，将特定的 CDN 依赖项排除在您的站点源之外，并允许您启用、禁用或切换 CDN-基于动态的图像服务。

如果您使用的是需求拉动式 CDN，例如 Coral，您还需要确保直接从您​​的生产服务器提供由 CDN 发出或拒绝的请求。有关此技术的更多信息，请参阅[使用 CoralCDN 作为服务器操作员。](http://wiki.coralcdn.org/wiki.php?n=Main.Servers)

# asp.net - 用户编辑自己的 Active Directory 数据

> ID：702493
> 
> 赞同：0
> 
> 时间：2009-03-31T18:42:43.307
> 
> 标签：asp.net, python, active-directory

如何构建一个网页，允许 Windows 2003 域的登录用户更改其帐户的详细信息（可能只是名字、姓氏和电话号码）？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2009-03-31T20:58:13.623

查看[Python-AD](http://code.google.com/p/python-ad/) (Python Active Directory)，它提供了与 AD 服务器通信所需的绑定。

至于您的请求中非常广泛的“我如何构建网页”部分，SO 有很多关于 python 中好的 Web 框架的问题/答案 :-)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-03-31T21:03:11.847

看看这个[http://www.novell.com/coolsolutions/feature/11204.html](http://www.novell.com/coolsolutions/feature/11204.html)

# asp.net - 是否可以在“ASP.NET Web 应用程序”中进行动态编译？

> ID：702498
> 
> 赞同：2
> 
> 时间：2009-03-31T18:43:42.790
> 
> 标签：asp.net, asp.net-mvc, dynamic

我可以以某种方式利用`App_code`Web 应用程序项目中的文件夹来即时编译代码吗？这对插件来说很棒。最近，Rob Conery 在 MIX 09 的演讲中展示了它在 ASP.NET MVC 应用程序中的用途。我试图在网络应用程序中做同样的事情，但我无法`App_Code`从其他任何地方访问下面的类。但是，如果 Rob 能够在 MVC 应用程序中做到这一点，那么它在 Web 应用程序中也应该是可行的。毕竟 ASP.NET MVC 是一个 ASP.NET Web 应用程序。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-03-31T18:52:59.650

如果您将代码文件添加到 App_Code 文件夹，它应该被编译并可从控件的代码隐藏文件或 App_Code 文件中的另一个代码文件中获得。

我认为您不能直接从已编译的程序集中访问它，因为编译器将无法在编译时找到该引用。

您还需要注意 App_Code 与代码隐藏代码编译成不同的程序集，因此您无法访问[`internal`](http://msdn.microsoft.com/en-us/library/7c5ka91b.aspx)不同程序集的代码。

# sql - 按日期范围折叠重复值的 SQL 查询

> ID：702500
> 
> 赞同：8
> 
> 时间：2009-03-31T18:44:01.463
> 
> 标签：sql, oracle

我有一个具有以下结构的表：ID、月、年、值，每个月每个 id 一个条目的值，大多数月份具有相同的值。

我想为该表创建一个视图，该视图折叠相同的值，如下所示：ID、开始月份、结束月份、开始年份、结束年份、值，每个值每个 ID 一行。

问题是，如果一个值发生变化然后又回到原来的值，它应该在表中有两行

所以：

*   100 1 2008 80
*   100 2 2008 80
*   100 3 2008 90
*   100 4 2008 80

应该产生

*   100 1 2008 2 2008 80
*   100 3 2008 3 2008 90
*   100 4 2008 4 2008 80

当值返回原始值时，以下查询适用于除此特殊情况之外的所有内容。

```
select distinct id, min(month) keep (dense_rank first order by month) 
over (partition   by id, value) startMonth, 
max(month) keep (dense_rank first order by month desc) over (partition
by id, value) endMonth, 
value 
```

数据库是甲骨文

* * *

## 回答 #1

> 赞同：58
> 
> 时间：2009-04-03T02:01:11.347

我将逐步开发我的解决方案，将每个转换分解为一个视图。这既有助于解释正在做什么，也有助于调试和测试。它本质上是将功能分解的原理应用于数据库查询。

我还将在不使用 Oracle 扩展的情况下使用应该在任何现代 RBDMS 上运行的 SQL 来做到这一点。所以没有保留，过度，分区，只有子查询和分组。（如果它不适用于您的 RDBMS，请在评论中通知我。）

首先是表格，由于我没有创意，我将其称为month_value。由于 id 实际上不是唯一的 id，我将其称为“eid”。其他列是“m”onth、“y”ear 和“v”值：

```
create table month_value( 
   eid int not null, m int, y int,  v int ); 
```

插入数据后，对于两个 eid，我有：

```
> select * from month_value;
+-----+------+------+------+
| eid | m    | y    | v    |
+-----+------+------+------+
| 100 |    1 | 2008 |   80 |
| 100 |    2 | 2008 |   80 |
| 100 |    3 | 2008 |   90 |
| 100 |    4 | 2008 |   80 |
| 200 |    1 | 2008 |   80 |
| 200 |    2 | 2008 |   80 |
| 200 |    3 | 2008 |   90 |
| 200 |    4 | 2008 |   80 |
+-----+------+------+------+
8 rows in set (0.00 sec) 
```

接下来，我们有一个实体，即月份，它表示为两个变量。那应该是一列（日期或日期时间，或者甚至可能是日期表的外键），所以我们将其设为一列。我们将其作为线性变换进行，使其排序与 (y, m) 相同，并且对于任何 (y,m) 元组都有一个且唯一的值，并且所有值都是连续的：

```
> create view cm_abs_month as 
select *, y * 12 + m as am from month_value; 
```

这给了我们：

```
> select * from cm_abs_month;
+-----+------+------+------+-------+
| eid | m    | y    | v    | am    |
+-----+------+------+------+-------+
| 100 |    1 | 2008 |   80 | 24097 |
| 100 |    2 | 2008 |   80 | 24098 |
| 100 |    3 | 2008 |   90 | 24099 |
| 100 |    4 | 2008 |   80 | 24100 |
| 200 |    1 | 2008 |   80 | 24097 |
| 200 |    2 | 2008 |   80 | 24098 |
| 200 |    3 | 2008 |   90 | 24099 |
| 200 |    4 | 2008 |   80 | 24100 |
+-----+------+------+------+-------+
8 rows in set (0.00 sec) 
```

现在我们将在相关子查询中使用自联接来为每一行查找值发生变化的最早的后继月份。我们将这个视图基于我们创建的前一个视图：

```
> create view cm_last_am as 
   select a.*, 
    ( select min(b.am) from cm_abs_month b 
      where b.eid = a.eid and b.am > a.am and b.v <> a.v) 
   as last_am 
   from cm_abs_month a;

> select * from cm_last_am;
+-----+------+------+------+-------+---------+
| eid | m    | y    | v    | am    | last_am |
+-----+------+------+------+-------+---------+
| 100 |    1 | 2008 |   80 | 24097 |   24099 |
| 100 |    2 | 2008 |   80 | 24098 |   24099 |
| 100 |    3 | 2008 |   90 | 24099 |   24100 |
| 100 |    4 | 2008 |   80 | 24100 |    NULL |
| 200 |    1 | 2008 |   80 | 24097 |   24099 |
| 200 |    2 | 2008 |   80 | 24098 |   24099 |
| 200 |    3 | 2008 |   90 | 24099 |   24100 |
| 200 |    4 | 2008 |   80 | 24100 |    NULL |
+-----+------+------+------+-------+---------+
8 rows in set (0.01 sec) 
```

last_am 现在是值 v 发生变化的第一个（最早）月份（当前行的月份之后）的“绝对月份”。在表中没有针对该 eid 的较晚月份的情况下，它为 null。

由于在 v 发生变化（发生在 last_am）之前的所有月份中 last_am 都是相同的，我们可以对 last_am 和 v（当然还有 eid）进行分组，并且在任何组中，min(am) 都是绝对值具有该值的连续*第一个*月份的月份：

```
> create view cm_result_data as 
  select eid, min(am) as am , last_am, v 
  from cm_last_am group by eid, last_am, v;

> select * from cm_result_data;
+-----+-------+---------+------+
| eid | am    | last_am | v    |
+-----+-------+---------+------+
| 100 | 24100 |    NULL |   80 |
| 100 | 24097 |   24099 |   80 |
| 100 | 24099 |   24100 |   90 |
| 200 | 24100 |    NULL |   80 |
| 200 | 24097 |   24099 |   80 |
| 200 | 24099 |   24100 |   90 |
+-----+-------+---------+------+
6 rows in set (0.00 sec) 
```

现在这是我们想要的结果集，这就是为什么这个视图被称为 cm_result_data。所缺少的只是将绝对月份转换回 (y,m) 元组。

为此，我们只需加入表month_value。

只有两个问题：1）我们希望输出中的 last_am*前*一个月，以及 2）我们的数据中没有下个月的地方有空值；为了满足 OP 的规范，这些应该是单月范围。

编辑：这些实际上可能比一个月更长，但在每种情况下，它们都意味着我们需要找到开斋节的最新月份，即：

```
(select max(am) from cm_abs_month d where d.eid = a.eid ) 
```

因为视图分解了问题，我们可以在一个月前通过添加另一个视图来添加这个“结束上限”，但我只是将它插入到合并中。哪个最有效取决于您的 RDBMS 如何优化查询。

要获得前一个月，我们将加入 (cm_result_data.last_am - 1 = cm_abs_month.am)

无论我们有一个空值，OP都希望“to”月份与“from”月份相同，所以我们将只使用coalesce：coalesce（last_am，am）。由于 last 消除了任何空值，我们的连接不需要是外连接。

```
> select a.eid, b.m, b.y, c.m, c.y, a.v 
   from cm_result_data a 
    join cm_abs_month b 
      on ( a.eid = b.eid and a.am = b.am)  
    join cm_abs_month c 
      on ( a.eid = c.eid and 
      coalesce( a.last_am - 1, 
              (select max(am) from cm_abs_month d where d.eid = a.eid )
      ) = c.am)
    order by 1, 3, 2, 5, 4;
+-----+------+------+------+------+------+
| eid | m    | y    | m    | y    | v    |
+-----+------+------+------+------+------+
| 100 |    1 | 2008 |    2 | 2008 |   80 |
| 100 |    3 | 2008 |    3 | 2008 |   90 |
| 100 |    4 | 2008 |    4 | 2008 |   80 |
| 200 |    1 | 2008 |    2 | 2008 |   80 |
| 200 |    3 | 2008 |    3 | 2008 |   90 |
| 200 |    4 | 2008 |    4 | 2008 |   80 |
+-----+------+------+------+------+------+ 
```

通过加入，我们得到了 OP 想要的输出。

并不是说我们必须重新加入。碰巧的是，absolute_month 函数是双向的，所以我们可以重新计算年份并从中偏移月份。

首先，让我们注意添加“结束上限”月份：

```
> create or replace view cm_capped_result as 
select eid, am, 
  coalesce( 
   last_am - 1, 
   (select max(b.am) from cm_abs_month b where b.eid = a.eid)
  ) as last_am, v  
 from cm_result_data a; 
```

现在我们得到了按照 OP 格式化的数据：

```
select eid, 
 ( (am - 1) % 12 ) + 1 as sm, 
 floor( ( am - 1 ) / 12 ) as sy, 
 ( (last_am - 1) % 12 ) + 1 as em, 
 floor( ( last_am - 1 ) / 12 ) as ey, v    
from cm_capped_result 
order by 1, 3, 2, 5, 4;

+-----+------+------+------+------+------+
| eid | sm   | sy   | em   | ey   | v    |
+-----+------+------+------+------+------+
| 100 |    1 | 2008 |    2 | 2008 |   80 |
| 100 |    3 | 2008 |    3 | 2008 |   90 |
| 100 |    4 | 2008 |    4 | 2008 |   80 |
| 200 |    1 | 2008 |    2 | 2008 |   80 |
| 200 |    3 | 2008 |    3 | 2008 |   90 |
| 200 |    4 | 2008 |    4 | 2008 |   80 |
+-----+------+------+------+------+------+ 
```

还有OP想要的数据。一切都在 SQL 中，应该在任何 RDBMS 上运行，并被分解为简单、易于理解和易于测试的视图。

重新加入还是重新计算更好？我会把这个（这是一个棘手的问题）留给读者。

（如果您的 RDBMS 不允许在视图中进行分组，则您必须先加入，然后再分组，或者先加入分组，然后使用相关的子查询提取月份和年份。这留给读者作为练习。）

* * *

Jonathan Leffler 在评论中问道，

> 如果数据中存在空白，您的查询会发生什么情况（例如，2007-12 有一个条目，值为 80，2007-10 有一个条目，但 2007-11 没有一个条目？问题不清楚那里应该发生什么.

好吧，您完全正确，OP没有指定。也许有一个（未提及的）前提条件是没有差距。在没有要求的情况下，我们不应该尝试围绕可能不存在的东西进行编码。但事实是，差距导致“回归”战略失败；在这些条件下，“重新计算”策略不会失败。我会说更多，但这会揭示我上面提到的技巧问题中的技巧。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-03-31T21:34:25.783

我让它按如下方式工作。它在分析功能上很重，并且是特定于 Oracle 的。

```
select distinct id, value,
decode(startMonth, null,
  lag(startMonth) over(partition by id, value order by startMonth, endMonth),  --if start is null, it's an end so take from the row before
startMonth) startMonth,

  decode(endMonth, null,
  lead(endMonth) over(partition by id, value order by startMonth, endMonth),  --if end is null, it's an start so take from the row after
endMonth) endMonth    

from (
select id, value, startMonth, endMonth from(
select id, value, 
decode(month+1, lead(month) over(partition by id,value order by month), null, month)     
startMonth, --get the beginning month for each interval
decode(month-1, lag(month) over(partition by id,value order by month), null, month)     
endMonth --get the end month for each interval from Tbl
) a 
where startMonth is not null or endMonth is not null --remain with start and ends only
)b 
```

可以稍微简化一些内部查询

内部查询检查月份是否是间隔的第一个月/最后一个月，如下所示：如果月份 + 1 == 该分组的下个月（滞后），那么由于有下个月，这个月显然不是月底。否则，它*是*间隔的最后一个月。相同的概念用于检查第一个月。

外部查询首先过滤掉所有不是开始月或结束月 ( `where startMonth is not null or endMonth is not null`) 的行。然后，每一行是开始月份或结束月份（或两者），由 start 或 end 是否不为空来确定）。如果月份是开始月份，则通过获取该 id 的下一个（领先）endMonth 来获取相应的结束月份，值按 endMonth 排序，如果是 endMonth，则通过查找上一个 startMonth（滞后）来获取 startMonth

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-05-02T13:18:29.420

这个只使用一次表扫描，并且可以跨年工作。最好将您的月份和年份列建模为只有一个日期数据类型列：

```
SQL> create table tbl (id,month,year,value)
  2  as
  3  select 100,12,2007,80 from dual union all
  4  select 100,1,2008,80 from dual union all
  5  select 100,2,2008,80 from dual union all
  6  select 100,3,2008,90 from dual union all
  7  select 100,4,2008,80 from dual union all
  8  select 200,12,2007,50 from dual union all
  9  select 200,1,2008,50 from dual union all
 10  select 200,2,2008,40 from dual union all
 11  select 200,3,2008,50 from dual union all
 12  select 200,4,2008,50 from dual union all
 13  select 200,5,2008,50 from dual
 14  /

Tabel is aangemaakt.

SQL> select id
  2       , mod(min(year*12+month-1),12)+1 startmonth
  3       , trunc(min(year*12+month-1)/12) startyear
  4       , mod(max(year*12+month-1),12)+1 endmonth
  5       , trunc(max(year*12+month-1)/12) endyear
  6       , value
  7    from ( select id
  8                , month
  9                , year
 10                , value
 11                , max(rn) over (partition by id order by year,month) maxrn
 12             from ( select id
 13                         , month
 14                         , year
 15                         , value
 16                         , case lag(value) over (partition by id order by year,month)
 17                           when value then null
 18                           else rownum
 19                           end rn
 20                      from tbl
 21                  ) inner
 22         )
 23   group by id
 24       , maxrn
 25       , value
 26   order by id
 27       , startyear
 28       , startmonth
 29  /

        ID STARTMONTH  STARTYEAR   ENDMONTH    ENDYEAR      VALUE
---------- ---------- ---------- ---------- ---------- ----------
       100         12       2007          2       2008         80
       100          3       2008          3       2008         90
       100          4       2008          4       2008         80
       200         12       2007          1       2008         50
       200          2       2008          2       2008         40
       200          3       2008          5       2008         50

6 rijen zijn geselecteerd. 
```

问候，罗布。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-03-31T23:08:33.217

当输入表包含跨越数年的多个 ID 和日期范围时，我无法从 ngz 获得响应。我有一个可行的解决方案，但有资格。如果您知道该范围内的每个月/年/id 组合都有一行，它只会给您正确的答案。如果有“洞”，它就行不通。如果您有漏洞，我知道除了编写一些 PL/SQL 并使用游标循环以您想要的格式创建一个新表之外的好方法。

顺便说一句，这就是为什么以这种方式建模的数据令人讨厌的原因。您应该始终将内容存储为开始/从范围记录，而不是离散时间段记录。用“乘数”表将前者转换为后者是微不足道的，但几乎不可能（如您所见）朝另一个方向发展。

```
SELECT ID
     , VALUE
     , start_date
     , end_date
  FROM (SELECT ID
             , VALUE
             , start_date
             , CASE
                  WHEN is_last = 0
                     THEN LEAD(end_date) OVER(PARTITION BY ID ORDER BY start_date)
                  ELSE end_date
               END end_date
             , is_first
          FROM (SELECT ID
                     , VALUE
                     , TO_CHAR(the_date, 'YYYY.MM') start_date
                     , TO_CHAR(NVL(LEAD(the_date - 31) OVER(PARTITION BY ID ORDER BY YEAR
                                  , MONTH), the_date), 'YYYY.MM') end_date
                     , is_first
                     , is_last
                  FROM (SELECT ID
                             , YEAR
                             , MONTH
                             , TO_DATE(TO_CHAR(YEAR) || '.' || TO_CHAR(MONTH) || '.' || '15', 'YYYY.MM.DD') the_date
                             , VALUE
                             , ABS(SIGN(VALUE -(NVL(LAG(VALUE) OVER(PARTITION BY ID ORDER BY YEAR
                                                   , MONTH), VALUE - 1)))) is_first
                             , ABS(SIGN(VALUE -(NVL(LEAD(VALUE) OVER(PARTITION BY ID ORDER BY YEAR
                                                   , MONTH), VALUE - 1)))) is_last
                          FROM test_table)
                 WHERE is_first = 1
                    OR is_last = 1))
 WHERE is_first = 1 
```

# networking - 在 Windows Vista 中以编程方式禁用网络自动调整

> ID：702502
> 
> 赞同：3
> 
> 时间：2009-03-31T18:45:45.437
> 
> 标签：networking, windows-vista

由于新的网络堆栈的自动调整功能，我们的一个应用程序在 Vista 上表现出较差的网络行为。我正在努力追查问题发生的原因，但与此同时，如果我们可以暂时禁用应用程序的自动调整，那就太好了。有没有办法以编程方式执行此操作，理想情况下只是基于每个应用程序？我发现的唯一解决方案是使用提升的命令提示符，这对我们的用户来说不是一个可接受的解决方案。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-09-02T20:45:48.833

尝试在您的应用程序 TCP 套接字上设置[SO_RCVBUF](http://msdn.microsoft.com/en-us/library/cc526885.aspx)套接字选项。这应该使用您提供的值覆盖自动调整的接收窗口（[请参阅](http://smallvoid.com/article/vista-tcpip-auto-rwin.html)）。

# .net - 是否有需要评论的 TFS 2008 内置签入策略？

> ID：702503
> 
> 赞同：1
> 
> 时间：2009-03-31T18:46:56.777
> 
> 标签：.net, tfs

我试图强制用户在将代码检查到 TFS 2008 时输入注释。我发现Jeff Atwood[的这篇文章](http://blogs.vertigosoftware.com/teamsystem/archive/2006/02/27/2302.aspx)解释了如何添加一个新的政策来强制执行这种行为，但这篇文章已经过时了。这是否已添加到 TFS？

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2009-03-31T18:49:56.490

您需要[TFS 电动工具](http://msdn.microsoft.com/en-us/teamsystem/bb980963.aspx#checkin)。查看底部的签入策略包。

# vb.net - 如何部署没有制造商设置的 VB.Net 1.1 应用程序

> ID：702504
> 
> 赞同：1
> 
> 时间：2009-03-31T18:47:01.287
> 
> 标签：vb.net, deployment, .net-1.1

我需要部署这个应用程序，目前安装程序的路径类似于“C:\Program Files\Manufacturer\App”。我只希望它默认为“C:\Program Files\App”。

我知道我可以从项目的属性中更改此制造商，但我希望它完全消失。安装项目不会随着它的消失而构建。有什么办法绕过它？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2009-03-31T19:02:45.960

假设一个 VS 部署，在你的安装项目中：

1.  转到“文件系统”选项卡
2.  选择`Application Folder`
3.  在属性窗格中，更改`[ProgramFilesFolder][Manufacturer]\[ProductName]`为`[ProgramFilesFolder]\[ProductName]`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-03-31T18:50:19.000

只需将其设置为空字符串。

# sql - 监控 Delphi 应用程序执行的 SQL 查询

> ID：702508
> 
> 赞同：4
> 
> 时间：2009-03-31T18:47:13.953
> 
> 标签：sql, oracle, delphi, debugging, dbexpress

我想监视我的应用程序在运行时执行的 SQL 查询。

我在 Delphi 2007 下使用 dbExpress 连接到 Oracle 11g 数据库。

这曾经可以在 BDE 下使用 sqlmon.exe 实用程序实现。

dbExpress 是否有类似的实用程序？

我尝试过 Toad SQL Monitor，它记录了两个或三个查询，然后立即挂起应用程序。我可以设置一个完整的 Oracle 跟踪，但这对于日常调试来说太过分了。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2009-03-31T21:04:33.687

为了能够监控查询，您必须使用委托跟踪驱动程序。

阅读[此链接](http://www.drbob42.com/examines/examin91.htm)，它提供了有关 dbexpress 4 和 delphi 2007 的更多信息。 D2009 用户注意事项：使用 D2009，您不必再调整 ini 文件，只需使用对象检查器，它可以直接堆叠委托驱动程序在 IDE 中。

# jquery - jQuery 对话框主题和样式

> ID：702510
> 
> 赞同：14
> 
> 时间：2009-03-31T18:48:02.967
> 
> 标签：jquery, dialog, themes, titlebar, background-color

如何更改 jQuery 对话框标题栏的背景颜色？

我看过themeroller，但它似乎对我不起作用。

谢谢

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2009-03-31T18:55:23.573

您可以通过修改 ui-dialog-titlebar CSS 类来更改它，但我强烈建议您使用[ThemeRoller 工具](http://jqueryui.com/themeroller/)。

也可以看看：

*   [UI/对话框/主题](http://docs.jquery.com/UI/Dialog/Theming)
*   [UI/主题/API](http://docs.jquery.com/UI/Theming/API)

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2009-12-02T14:17:29.483

我这样做（为标题添加“ui-state-error”样式）：

```
<script type="text/javascript">
            $(function () {
                $("#msg").dialog({
                    open: function () {
                        $(this).parents(".ui-dialog:first").find(".ui-dialog-titlebar").addClass("ui-state-error");
                    }

                });

            });
        </script> 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2009-03-31T18:54:23.797

对话框中的每个元素都有相关的类。

使用 Firebug 检查元素并使用 CSS 设置样式。例如，标题栏具有类“ui-dialog-titlebar”。

（这假设您使用的是 jQuery UI 对话框）

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-08-16T13:16:44.383

使用该`dialogClass`物业。您可以应用于 jquery 对话框中的任何 css。下面我们正在格式化标题和内容块。

```
<head>
<style>
.main-dialog-class .ui-widget-header{background: url("/Images/your-background.png") repeat-x scroll 34px 42px #a4cf50;font-size:16px;border:0;text-transform:uppercase}
.main-dialog-class .ui-widget-content{background-image:none;background-color:#fff}
</style>
<script>
        $('#jq_dialog').dialog({
            title: 'Detalhes do produto',
            modal: true,
            resizable: false,
            width: 500,
            maxHeight: 400,
            closeText: 'fechar',
            draggable: true,
            show: 'fade',
            hide: 'fade',
            dialogClass: 'main-dialog-class'
        });
</script>
</head>
<body>
<div id="jq_dialog">Hello StackOverflow!</div>
</body> 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2011-07-14T18:39:05.367

前面的示例运行良好，但错误主题只有红色。

这是一个简单的解决方案，只需更改 css 中的标题图像：

CSS：

```
.ui-widget-header-custom{ 
    background: #f6a828 url(../images/ui-bg_flat_95_0a43ac_40x100.png) 50% 50% repeat-x;      
} 
```

javascript:

```
$('#my_dialog').dialog({ 
    open: function(event, ui){ 
        $(this).parents(".ui-dialog:first").find(".ui-widget-header")
            .removeClass("ui-widget-header").addClass("ui-widget-header-custom");
    }
}); 
```

请注意，与前面的示例相反，我删除了：

```
removeClass("ui-widget-header") 
```

而不仅仅是在以下位置添加类：

```
find(".ui-dialog-titlebar") 
```

必须注意，此示例适用于没有链接的对话框标题。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2014-04-07T09:56:33.043

有时您无法编辑 css 文件。所以你可以试试这个：

```
dialog = $('<div/>').dialog({
  title: 'Dialog with css for title bar',
  open: function() {
    $(this).parents(".ui-dialog:first").find('.ui-dialog-titlebar').css('background-color','#275D9E');
  } 
}); 
```

# java - 比较同一数组的元素

> ID：702513
> 
> 赞同：0
> 
> 时间：2009-03-31T18:49:00.953
> 
> 标签：java, arrays, comparison

我在比较数组元素的值时遇到问题。例如，我想比较索引 0 和索引 2 的值，以及索引 1 和索引 3 的值，依此类推。使用下面的代码，我想得到 numOfdifferentShape 的结果是 2，但我得到 3。我该如何解决这个问题？:-(

```
int numOfdifferentShape=0;

myArray = {40.0, 40.0, 40.0, 40.0, 80.0, 40.0, 40.0, 40.0}

for (int a=0; int a<myArray.size(); a=a+2)
{
   for (int b=a+2; b<myArray.size; b=b+2)
   {
      if (!(myArray.get(a).equals(myArray.get(b) && myArray.get(a+1).equals(b+1)))
         numOfdifferentShape++;  
      break;
   }
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2009-03-31T20:01:39.610

这段代码有几个语法错误，但由于 TofuBeer 已经在评论中指出了它们，我将继续进行设计和逻辑。

从代码来看，我假设您对 Java 没有太多经验，也许根本没有编程经验。所以我要慢慢来这里。我希望你不会被我的解释侮辱。

你说你试图找出你在数组中存储的对象（作为两个整数）有多少是相等的。为此，您必须跟踪您已经看到的独特对象。然后将每个对象与唯一对象列表进行比较，如果不匹配，则将其添加到列表中。这是基本算法。

现在，你注意到我在描述中一直使用“对象”这个词吗？发生这种情况时，通常意味着您应该上课。我会做一个这样的简单的，持有两个整数：

```
class Box { // or whatever the objects are called
    private final int height;
    private final int width;
    public Box(int h, int w) {
        height = h;
        width = w;
    }
    public int getHeight() {
        return height;
    }
    public int getWidth() {
        return width;
    }
    @Override
    public boolean equals(Object other) {
        if (!(other instanceof Box))
            return false;
        Box b = (Box) other;
        return b.height == height && b.width == width;
    }
    @Override
    public int hashCode() {
        int hash = 7;
        hash = 97 * hash + this.height;
        hash = 97 * hash + this.width;
        return hash;
    }
} 
```

试着理解这段代码的每一部分是做什么的（特别是如果这实际上是你的作业）。一旦你得到它，继续下一部分：做你想做的计算。

假设您有一个 Box 数组，如下所示：

```
Box[] boxes = {
    new Box(40, 40), new Box(40, 40), new Box(80, 40), new Box(40, 40)
}; 
```

（我不知道你使用的是数组还是列表，所以我只是选择一个来演示。）

我已经给出了查找唯一项目数量的算法，所以我将向您展示我将如何编写它：

```
List<Box> unique = new ArrayList<Box>();
for (Box box : boxes) {
    if (!unique.contains(box)) { // this is why I implemented equals() and hashCode()!
        unique.add(box);
    }
}
int numOfDifferentShape = unique.size(); 
```

这比尝试跟踪每个对象的两个整数要容易得多，而且它的优点是您不会混淆数组索引。

您可以使用[`Set`](http://java.sun.com/javase/6/docs/api/java/util/Set.html). 它看起来像这样：

```
Set<Box> boxSet = new HashSet<Box>();
for (Box b : boxes)
    boxSet.add(b);
int numOfDifferentShape = boxSet.size(); 
```

请注意，最后两个片段使用[Java 1.5](http://java.sun.com/j2se/1.5.0/docs/relnotes/features.html#lang)的功能，所以我不知道您之前是否遇到过它们。

这会让事情变得更清楚吗？

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2009-03-31T18:56:39.577

```
for (int i = 0; i < (myArray.size() - 2); ++i)
{
    if (myArray[i] != myArray[i + 2])
        ++numOfdifferentShapes;
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2009-03-31T18:57:56.890

1.  你有两个循环，你的描述表明你只想要一个。
2.  您需要进行边界检查 - 当它超过长度时，您是否希望 n+2 环绕到数组的开头到开头？

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2009-03-31T18:57:58.343

我认为你有一个括号问题。你写了：

```
if (!(myArray.get(a).equals(myArray.get(b) && myArray.get(a+1).equals(b+1))) 
```

当我认为你的意思是：

```
if (!(myArray.get(a).equals(myArray.get(b)) && myArray.get(a+1).equals(b+1)) 
```

此外，在同一行，而不是：

```
equals(b+1) 
```

你不是说

```
myArray.get(b+1) 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2009-03-31T20:03:55.437

> 我有数组列表，例如 {40,40,80,20,40,40} 我想比较元素。偶数索引（例如索引 0、索引 2、索引 4 等）表示对象的高度，奇数索引（例如索引 1、索引 3 ec）表示对象的宽度。因此，使用上面的代码，对象 1（索引 0 和 1）。

为什么不创建一个 Dimension 类的数组，如下所示：

```
public class Dimension
{
    private final int width;
    private final int height;

    public Dimension(final int w, 
                     final int h)
    {
        width  = w;
        height = h;
    }

    public int getWidth()
    {
        return (width);
    }

    public int getHeight()
    {
        return (height);
    }
} 
```

然后做一个这样的for循环：

```
for(int i = 0; i < array.length; i += 2)
{
    final Dimension a;
    final Dimension b;

    a = array[i];
    b = array[i + 1];

    // compare a.getLength() to b.getLength() 
    // or 
    // compare a.getWidth() to b.getWidth() 
} 
```

尝试变得“棘手”通常是一个坏主意 - 说偶数和奇数长度是棘手的......IMO坏主意。

# linq-to-xml - 帮助退回 EDMX 元素

> ID：702514
> 
> 赞同：0
> 
> 时间：2009-03-31T18:49:30.077
> 
> 标签：linq-to-xml

我有一个 Entity Framework EDMX 文件，我想遍历 EntityType 元素以及子 Property 元素，但我不知道该怎么做。它总是返回一组空的后代。

任何帮助表示赞赏

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-05-11T17:52:30.880

在不确切知道 edmx 文件的外观的情况下，我猜您需要在 Descendants 问题中包含 XNamespace，例如：

```
XNamespace xmlns = "http://blablabla.lala.com"

var results = from x in XElement.Load("location of edmx file")
                         .Descendants(xmlns.GetName("EntityType")) 
```

就像我说的......像这样......

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2011-08-14T20:56:53.917

另一种选择是使用[元数据工作区](http://msdn.microsoft.com/en-us/library/bb387116%28v=vs.90%29.aspx)。如果您在运行时执行此操作，您可以从 ObjectContext (context.MetadataWorkspace) 中访问 MW。然后您可以执行以下操作：

```
metadataWorkspace.GetItems<EntityType>(DataSpace.CSpace); 
```

否则，您可以从 EDMX 中的底层架构加载 MetadataWorkspace，即此处的“架构”节点：

```
<edmx:StorageModels>
    <Schema ...> 
```

使用[MetadataItemCollectionFactory](http://msdn.microsoft.com/en-us/library/system.data.entity.design.metadataitemcollectionfactory_methods.aspx)

# .net - 何时为嵌套命名空间添加新项目？

> ID：702519
> 
> 赞同：1
> 
> 时间：2009-03-31T18:50:06.847
> 
> 标签：.net, project-management, namespaces

我有许多以命名空间类型命名的项目

![替代文字](https://farm4.static.flickr.com/3635/3401652745_4d942700e0_o.png)

添加新的子命名空间时，您如何决定是
• 在项目中创建新文件夹
-- 还是 --
• 在解决方案中创建新项目？

对于每种情况，我应该考虑哪些缺点/优点？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2009-03-31T18:52:33.830

您必须问自己的问题是：这两段代码在逻辑上是否适合作为一个部署单元？如果是这样，请将它们放在同一个项目中。如果没有，请将它们分开。

老实说，我*很少会*为“嵌套”命名空间创建一个新项目——它似乎通常不会那样工作。特别是，考虑您是否想从“外部”命名空间访问“嵌套”命名空间，反之亦然——如果它们可以合理地相互引用，那么它们应该在同一个项目中。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-03-31T21:01:52.817

只需在这个问题上加上我的 2 美分，就可以通过一些“去过那里 - 做过”的经验来扩展 Jon 的答案：

在几个解决方案中，我确实使用了至少两个由命名空间命名的项目（嗯，有点）。例如，在开发 MyApp 解决方案时，我将拥有`MyApp.Web`和`MyApp.Web.Controls`.

或：`MyApp.Service`、`MyApp.Core`等`MyApp.Core.Entities`。众所周知的命名约定，根命名空间的位置如下`MyCompany.MyApp.Service etc...`

**优点**： - 在团队中工作时发现它非常有用，可以突出应用程序模块之间的依赖关系。如果您的`Web.Controls`模块（这只是一个示例，请不要选择它：）在 Web UI 中共享，您通常不希望在自定义控件中使用特定于应用程序的代码。保持“子/嵌套”模块分离（由主项目引用）强制执行此操作。- 至少考虑一下它可能会帮助您创建更好的项目结构。哪个命名空间在一个单独的项目中，哪个没有？单独回答这个问题就足够了。

**缺点**： - 很容易“触发快乐”并创建一百个项目，而不是制作适当的文件夹/命名空间。

也就是说，通常倾向于创建文件夹而不是单独的项目，除非它真的是一个“子模块”。

# sql - 利用多核执行 SQL 语句

> ID：702521
> 
> 赞同：1
> 
> 时间：2009-03-31T18:51:08.187
> 
> 标签：sql, insert, parallel-processing

我有一个小型应用程序，它读取 XML 文件并将信息插入 SQL DB。

有 ~ 300 000 个文件要导入，每个文件有 ~ 1000 条记录。

我在 20% 的文件上启动了应用程序，现在它已经运行了 18 个小时，我希望我可以改进其余文件的时间。

我没有使用多线程方法，但由于我正在运行该进程的计算机有 4 个内核，我正在考虑这样做以提高性能（尽管我猜主要问题是 I/O不仅是处理）。

我正在考虑在为每次插入创建的 SqlCommand 对象上使用 BeginExecutingNonQuery() 方法，但我不知道是否应该限制同时线程的最大数量（我也不知道该怎么做）。

对于获得最佳 CPU 利用率，您有什么建议？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-03-31T19:01:37.193

如果我理解正确，您正在运行数据库的同一台机器上读取这些文件。虽然我对你的机器了解不多，但我敢打赌你的瓶颈是磁盘 IO。对我来说，这听起来并不十分计算密集。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-03-31T18:55:14.947

查看[批量插入](http://msdn.microsoft.com/en-us/library/ms188365.aspx)。

> 以用户指定的格式将数据文件导入数据库表或视图。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-03-31T18:59:44.297

您是否尝试过使用[SqlBulkCopy](http://msdn.microsoft.com/en-us/library/system.data.sqlclient.sqlbulkcopy.aspx)？基本上，您将数据加载到 DataTable 实例中，然后使用 SqlBulkCopy 类将其加载到 SQL Server。应该提供巨大的性能提升，而无需像使用 bcp 或其他实用程序那样对当前进程进行太多更改。

# c# - HttpHandler 实例和 HttpApplication 对象 - 后者...？

> ID：702522
> 
> 赞同：3
> 
> 时间：2009-03-31T18:51:24.847
> 
> 标签：c#, asp.net, httphandler, ihttphandler

一本书显示了一个示例，其中（使用 IIS7 时）配置了以下模块，以便它可以被运行在网站上的任何 Web 应用程序（甚至非 asp.net 应用程序）使用。但：

1.  如果为非 asp.net 应用程序调用此模块，那么如何或为什么仍会创建 HttpApplication 对象，因为非 asp.net 应用程序不在 CLR 的上下文中运行（因此 Asp.Net 运行时也不会）不跑）？

2.  假设`HttpApplication`对象也是为非 asp.net 应用程序创建的，那么为什么 Init() 事件处理程序中的代码必须检查`HttpApplication`对象是否实际存在？为什么它不存在？这不是 `HttpApplication`实际实例化 Http 模块实例的对象吗？

这是Http处理程序：

```
public class SimpleSqlLogging : IHttpModule
{
  private HttpApplication _CurrentApplication;

  public void Dispose()
  {
      _CurrentApplication = null;
  }

  public void Init(HttpApplication context)
  {
      // Attach to the incoming request event
      _CurrentApplication = context;

      if (context != null)
      {
          context.BeginRequest += new EventHandler(context_BeginRequest);
      }
  }

  void context_BeginRequest(object sender, EventArgs e)
  { ... }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-03-31T19:06:02.020

在 IIS7 中，使用集成管道运行的应用程序池中的应用程序始终是 .NET 应用程序。代码只是防御性的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2010-03-23T04:37:21.183

关于 HttpHander 的链接：http: [//msdn.microsoft.com/en-us/magazine/cc188942.aspx](http://msdn.microsoft.com/en-us/magazine/cc188942.aspx)

# c# - 如果之前接收到数据，SerialPort.Open() 会冻结系统（Compact Framework）

> ID：702524
> 
> 赞同：2
> 
> 时间：2009-03-31T18:51:53.303
> 
> 标签：c#, compact-framework, serial-port

我有一个非常奇怪的问题，也许你们可以帮助我。我有一个使用通过串行端口连接的条形码读卡器的 Windows CE 6 设备。我正在使用 Compact Framework 的 (v2.0)`SerialPort`类来处理这个问题，并且一切正常。

然而，有一个问题。如果在打开串行端口之前的任何时候刷卡，整个系统都会在`Open()`调用时冻结。没有例外，没有警告，只是无缘无故地完全冻结了系统。我尝试在打开端口之前清除缓冲区，但显然该方法只能在端口打开后使用，因为我有一个`InvalidOperationException`.

我制作了代码的简化版本，以查看复杂性是否与它有关，但是带有打开端口的按钮的简单表单将以相同的方式冻结。这是简化的代码：

```
private void btConnect_Click(object sender, EventArgs e)
{
        try
        {
            this.serialPort = new SerialPort(this.txName.Text, Convert.ToInt32(this.txBaud.Text));
            this.serialPort.RtsEnable = this.chRTS.Checked;

            this.serialPort.Open(); //it freezes here
            this.btConnect.Text = "Disconnect";

            this.txName.Enabled = false;
            this.txBaud.Enabled = false;
            this.chRTS.Enabled = false;
        }
        catch
        {
            MessageBox.Show("Failed to open port. Please check your settings and try again.", "Operation failed", MessageBoxButtons.OK, MessageBoxIcon.Hand, MessageBoxDefaultButton.Button1);
        }
} 
```

我看不出我做错了什么，我开始认为这是紧凑框架中的一个错误。读卡器发送数据包，例如`F03030DKD03003\r\n`. 有任何想法吗？提前致谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-03-31T22:23:34.057

MS 提供的 SerialPort 类还有很多不足之处。您真正需要知道的是，在本机调用中，事情被卡住了。我的猜测是内部缓冲区中有数据，或者甚至可能设置了溢出，并且托管包装器正在对此进行处理。

我的建议是获取[OpenNETCF 串行库](http://www.opennetcf.com/FreeSoftware/OpenNETCFIOSerial/tabid/252/Default.aspx)，它是免费的，并且带有完整的源代码。它与 MS 提供的类接口兼容，它允许您将代码一直遍历到驱动程序调用以查看发生了什么。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-03-31T19:20:05.013

早在我做串行驱动程序时，我在 16550 UART（至少其中不少）中遇到了一个错误，如果启用 FIFO 时接收数据寄存器中有数据，芯片会锁定。

我通过让驱动程序在启用 FIFO 之前清除芯片来修复该错误。但是，如果最近的 WinCE 6 没有解决此错误，我会感到惊讶，但我认为这是可能的（也许当前最新的 16550 实现不再有此错误）。我对 WinCE 不是特别熟悉 - 某些 DDK 中是否提供串行驱动程序的源代码？您正在使用的串行驱动程序是否有支持/更新选项？

# apache - 将 Apache .htaccess 文件转换为 IIS web.config

> ID：702526
> 
> 赞同：7
> 
> 时间：2009-03-31T18:52:23.520
> 
> 标签：apache, iis, .htaccess, web-config, webserver

我使用 PHP、MySQL 和 Apache 在本地开发了一个应用程序，它有一个包含以下内容的 .htaccess 文件：

```
#Setting the default handler.
  DirectoryIndex home.do

<IfModule mod_mime.c>
  #Supporting .do extensions    
     AddType application/x-httpd-php .do
</IfModule>

<IfModule mod_rewrite.c>
  #Removing .do file extension if necessary
     RewriteEngine on
     RewriteCond %{REQUEST_FILENAME} !-d
     RewriteCond %{REQUEST_FILENAME}\.do -f
     RewriteRule ^(.*)$ $1.do
</IfModule> 
```

但我告知我客户的 Web 服务器是 IIS，我必须使用 web.config 文件而不是 .htaccess。请问有人可以指导我吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2009-04-16T14:41:13.997

这可能被视为作弊，但我们使用[ISAPI_Rewrite](http://www.helicontech.com/isapi_rewrite/)，它让您只需将 .htaccess 文件用于 IIS。如果你能让他们把它放在服务器上，你就不需要翻译任何东西。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2009-04-14T01:59:39.017

请注意，这仅适用于 IIS7**而不适用**于 IIS6。这也[需要设置 FastCGI](http://learn.iis.net/page.aspx/246/using-fastcgi-to-host-php-applications-on-iis-70/)并安装和启用[URL 重写模块。](http://learn.iis.net/page.aspx/460/using-url-rewrite-module/)这些是您的托管人能够为您验证的内容。如果以上所有情况都成立，那么以下文件应该可以解决问题（您可能需要调整路径，但我认为如果您向主机提供此示例文件，您的主机将能够为您执行此操作。

```
<?xml version="1.0" encoding="UTF-8"?>
<configuration>
    <configSections>
        <sectionGroup name="system.webServer">
            <sectionGroup name="rewrite">
                <section name="rewriteMaps" overrideModeDefault="Allow" />
                <section name="rules" overrideModeDefault="Allow" />
        </sectionGroup>
    </sectionGroup>
</configSections>

<system.webServer>
    <!-- Mapping the .do extension to the PHP ISAPI module -->
    <handlers>
        <!-- the following line is very specific to your host
             please check the module name and the scriptProcessor 
             path with the system administrator! basically this is 
             the same as
             http://learn.iis.net/page.aspx/246/using-fastcgi-to-host-php-applications-on-iis-70/#EnableFastCGI
             only in .config format. -->
        <add name="MaskDoAsPHP" path=".do" verb="GET,HEAD,POST,DEBUG" modules="FastCgiModule" scriptProcessor="C:\PHP\php-cgi.exe" />
    </handlers>

    <!-- Setting the default handler. -->
    <defaultDocument>
        <files>
            <clear />
            <add value="home.do" />
        </files>
    </defaultDocument>

    <rewrite>
        <rules>
            <rule name="Removing do extension" stopProcessing="true">
                <match url="^(.*)$" ignoreCase="false" />
                <conditions>
                    <add input="{REQUEST_FILENAME}" matchType="IsFile" ignoreCase="false" negate="true" />
                    <add input="{REQUEST_FILENAME}" matchType="IsDirectory" ignoreCase="false" negate="true" />
                </conditions>
                <action type="Rewrite" url="{R1}.do" appendQueryString="true" />
            </rule>
        </rules>
    </rewrite>
</system.webServer> 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-28T08:38:31.093

**IIS7 及以上可以使用URL Rewrite 模块**导入 Apache .htaccess 规则。

1.  通过*Microsoft Web 平台安装程序*安装[URL 重写模块](http://www.iis.net/downloads?tabid=34&g=6&i=1691)
**   启动 IIS 管理器，然后在左侧的“连接”窗格中，选择您需要的站点（例如，默认网站）*   在中心（功能视图）双击**URL Rewrite**。*   在右侧面板中单击**Import Rules...**然后将 .htaccess 文件中的规则粘贴到**Rewrite rules**框中*   单击右栏中的应用。*

 *# asp.net - 如何提示用户打开或保存由 .aspx 文件返回的 PDF 文件？

> ID：702532
> 
> 赞同：1
> 
> 时间：2009-03-31T18:53:40.613
> 
> 标签：asp.net, apache-flex, actionscript-3, urlrequest, urlloader

我有一个 Flex 应用程序，它在我们的网络服务器上调用一个 .aspx 页面，该页面构建一个 PDF 或 Excel 文件。现在，我正在使用 navigateToURL() 来调用该文件，并且在成功构建输出文件时可以正常工作。但是，如果出现错误或超时，则无法在 Flash 影片中知道这一点。

我正在尝试使用 URLLoader，以便我可以侦听 HTTP 状态代码，并知道加载何时完成，但是，URLLoader 只是返回位图数据，没有任何提示用户打开或保存输出文件。有没有办法做到这一点？

这是我的 ActionScript 代码的两个版本：

```
private function buildFile():void
{
    var variables:URLVariables = new URLVariables();

    variables.rptName = "report1";

    variables.rptFormat = "PDF";

    var request:URLRequest = new URLRequest();

    request.url = "/buildFile.aspx";

    request.method = URLRequestMethod.POST;

    request.data = variables;

    var loader:URLLoader = new URLLoader();

    loader.addEventListener(HTTPStatusEvent.HTTP_STATUS, 
                                        httpStatusHandler);

    loader.load(request);
}

private function buildFile():void
{
    var variables:URLVariables = new URLVariables();

    variables.rptName = "report1";

    variables.rptFormat = "PDF";

    var request:URLRequest = new URLRequest();

    request.url = "/buildFile.aspx";

    request.method = URLRequestMethod.POST;

    request.data = variables;

    navigateToURL(request, "_self");
} 
```

仅供参考，这是当前输出 PDF 或 Excel 文件的代码块：

```
System.Web.HttpContext httpC;
httpC = System.Web.HttpContext.Current;
httpC.Response.Clear();
httpC.Response.ClearHeaders();
httpC.Response.Expires = 0;
switch (ReportFormat)
{
    case "Excel": Response.ContentType = "application/vnd.ms-excel";  break;

    case "PDF": Response.ContentType = "application/pdf"; ; break;

}

Response.AddHeader("Content-disposition", "attachment;filename=" + fileName);    

BinaryWriter binaryWriter = new BinaryWriter(httpC.Response.OutputStream);

binaryWriter.Write(result); 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2009-03-31T18:55:38.597

当用户请求该 PSD 文件时，您的服务器应发送“application/octet-stream”标头。

使用 ASP.NET，它可能看起来像这样：

```
Response.ClearContent();
Response.ClearHeaders();
// with this header user will be promted to open or download file
Response.ContentType = "application/octet-stream";
// with this header, you will suggest to save file with "test.pdf" name
Response.AddHeader("Content-Disposition", "attachment; filename=test.pdf");
Response.WriteFile(Server.MapPath("~/test.pdf"));
Response.Flush();
Response.Close(); 
```

还可以在这里查看：[使用 FileReference 类在 Flex 中下载文件](http://blog.flexexamples.com/2007/07/28/downloading-files-in-flex-using-the-filereference-class/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-03-31T18:56:54.367

还要在 aspx 页面中将 content-disposition 设置为“附件”。

# maven-2 - 使用 Ant 的 Maven

> ID：702535
> 
> 赞同：18
> 
> 时间：2009-03-31T18:54:57.240
> 
> 标签：maven-2, ant

是否有包装 maven 的 ant 插件，以便我可以利用其依赖项管理功能为我下载 jar 并将它们放在我的 ant 构建的 lib 文件夹中？

我的具体问题是我正在为 Hudson 使用 Crap4j 插件，但它目前还不支持 Maven。由于是一个小项目，maven 是矫枉过正，但`mvn dependency:copy-dependcies`如果我不必，我不想没有。

有什么建议么？（除了吸它）

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2009-03-31T22:27:09.057

有一组使用 Mercury 的新 Ant 任务。Mercury 是重构代码，它将成为 Maven 3 与 Oleg Gusakov 正在实施的 Maven（和 OSGi）存储库交互方式的基础。Mercury 已经过很好的测试，您现在就可以在 Ant 项目中使用它。看看 Oleg 编写的一些 How-to 文档：

[http://people.apache.org/~ogusakov/sites/mercury-ant/mercury-ant-tasks/howto.html](http://people.apache.org/~ogusakov/sites/mercury-ant/mercury-ant-tasks/howto.html)

这是一个在 Ant build.xml 文件中使用 Mercury 的简单示例。以下构建文件创建了一个依赖于 asm 工件的 3.0 版本的类路径：

```
<javac srcdir="src/main/java"
       destdir="target/classes">
  <classpath> 
    <deps>
      <dependency name="asm:asm:3.0"/>
    </deps>
  </classpath>
</javac> 
```

有许多高级功能，例如支持验证 PGP 签名或 MD5 摘要。您还可以开始定义 Mercury 所依赖的不同存储库。除了使用本地目录作为存储库之外，此 XML 还允许您定义对存储库（例如[Nexus ）的引用：](http://nexus.sonatype.org)

```
<repo id="myCentral" 
 url="http://localhost:8081/nexus/contengs/groups/public"/>
<repository dir="/my/local/repo"/>

<javac srcdir="src/main/java"
       destdir="target/classes">
  <classpath> 
    <deps>
      <dependency name="asm:asm:3.0"/>
    </deps>
  </classpath>
</javac> 
```

如果您需要引用需要身份验证的存储库，Mercury 支持存储用户名和密码：

```
<repo id="myCentral" 
 url="http://localhost:8081/nexus/contengs/groups/public">
  <auth name="foo" pass="bar"/>
</repo>

<javac srcdir="src/main/java"
       destdir="target/classes">
  <classpath> 
    <deps>
      <dependency name="asm:asm:3.0"/>
    </deps>
  </classpath>
</javac> 
```

最引人注目的是能够从 Ant 构建文件将工件发布到存储库。如果您在任何规模的组织中工作，您将开始考虑将工件部署到像[Nexus](http://nexus.sonatype.org)这样的存储库管理器。使用 Mercury，您可以开始将工件部署到存储库管理器，而无需采用 Maven。这是一个构建文件，它定义了一个经过身份验证的存储库并编写了一个工件：

```
<repo id="myCentral" 
 url="http://localhost:8081/nexus/contengs/groups/public">
  <auth name="foo" pass="bar"/>
</repo>

<write repoid="myCentral"
       name="t:t:1.0"
       file="${basedir}/target/t.jar"/> 
```

Mercury 已准备好使用，您可以期待 Oleg 未来的许多发展。如果您想开始使用它，最好的地方是[Oleg 的 How-to Page](http://people.apache.org/~ogusakov/sites/mercury-ant/mercury-ant-tasks/howto.html)。（注：此信息将很快整合到[权威指南](http://books.sonatype.org)中）

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2009-04-01T09:20:29.283

虽然水星任务有效，但我没有使用它们。我在他们的前辈[maven-ant-tasks](http://maven.apache.org/ant-tasks/index.html)上取得了很好的成功。如果您手边已经有 POM，那么它们上手相当简单。

```
<project name="blah" xmlns:artifact="antlib:org.apache.maven.artifact.ant">
  <!-- If you drop the maven-ant-tasks in ~/.ant/lib, you don't need these two bits. -->
  <taskdef uri="antlib:org.apache.maven.artifact.ant"
           resource="org/apache/maven/artifact/ant/antlib.xml"
           classpathref="ant.classpath" />
  <path id="ant.classpath">
    <fileset dir="${ant.tasks.dir}">
      <include name="*.jar" />
    </fileset>
  </path>
  <target name="resolve" description="--> retrieve dependencies with maven">
      <!-- Resolve dependencies -->
      <artifact:dependencies filesetId="dependency.fileset">
          <pom file="pom.xml" />
      </artifact:dependencies>
      <!-- Copy all dependencies to the correct location. -->
      <copy todir="${web.dir}/WEB-INF/lib">
          <fileset refid="dependency.fileset" />
          <!-- This mapper strips off all leading directory information -->
          <mapper type="flatten" />
      </copy>
  </target>
</project> 
```

我喜欢将我的 ant 任务 jar 保存在项目中，所以我添加了 taskdef 和路径。但是如果你想放入`maven-ant-tasks-2.0.9.jar`，`~/.ant/lib`那么你不需要声明这些东西。我认为。

* * *

## 回答 #3

> 赞同：10
> 
> 时间：2009-03-31T20:01:53.167

如果您认为 Maven 在您的项目中过于矫枉过正，您可以/应该尝试[Apache Ivy](http://ant.apache.org/ivy/)：它是一个非常强大的依赖管理库，类似于 Maven。

如果您在 Web 上托管项目，还请查看[Ivy Roundup](http://code.google.com/p/ivyroundup)，它是各种库的 Ivy 定义存储库。

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2009-04-01T17:14:10.957

只需使用[Maven Ant Tasks](http://maven.apache.org/ant-tasks/index.html)。它们可以在[普通的 maven 下载页面下载](http://maven.apache.org/download.html)。

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2010-01-15T17:17:15.673

参考这个：[为什么你应该使用 Maven Ant Tasks 而不是 Maven 或 Ivy](http://ptrthomas.wordpress.com/2009/03/08/why-you-should-use-the-maven-ant-tasks-instead-of-maven-or-ivy/)

由于上面链接中给出的原因，我不会真正推荐 Ivy。

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2011-07-11T09:15:34.890

从 Ant 运行 Maven 目标非常简单

```
<target name="buildProject" description="Builds the individual project">
    <exec dir="${source.dir}\${projectName}" executable="cmd">
        <arg value="/c"/>
        <arg value="${env.MAVEN_HOME}\bin\mvn.bat"/>
        <arg line="clean install" />
    </exec>
</target> 
```

使用它，您可以从 Ant 运行任何类型的 Maven 目标...

享受....

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2012-03-09T20:02:04.127

在我的情况下，我只希望在存储库中有一个 ejb jar，这样我就可以在另一个以 maven 作为依赖项的项目中使用它，所以：

```
<target name="runMaven" depends="deploy" description="LLama al maven.">
    <exec executable="cmd">
        <arg value="/c"/>
        <arg value="mvn.bat install:install-file -DgroupId=com.advance.fisa.prototipo.camel -DartifactId=batch-process -Dversion=1.0 -Dpackaging=jar  -Dfile=${jarDirectory}\batch-process.jar"/>
    </exec>
</target> 
```

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2013-04-18T13:24:40.947

下载[Maven Ant Tasks](http://maven.apache.org/ant-tasks/)然后使用它：

```
<target name="getDependencies">
        <path id="maven-ant-tasks.classpath" path="${basedir}${file.separator}maven${file.separator}lib${file.separator}maven-ant-tasks.jar" />
        <typedef resource="org/apache/maven/artifact/ant/antlib.xml" uri="antlib:org.apache.maven.artifact.ant" classpathref="maven-ant-tasks.classpath" />

        <artifact:dependencies filesetId="dependency.fileset" type="jar">
            <pom file="pom.xml" />
        </artifact:dependencies>

        <!--TODO take care of existing duplicates in the case of changed/upgraded dependencies-->
        <copy todir="lib">
            <fileset refid="dependency.fileset" />
            <mapper type="flatten" from="${dependency.versions}" />
        </copy>
    </target> 
```

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2009-07-10T21:07:02.067

我现在正在解决同样的问题。我在本地 Maven 存储库中安装了所有必要的库，并从那里将其放入我们的公司 Maven 存储库中。它还不能很好地工作。一些测试失败，在我的 Maven 测试运行中运行良好，但由于测试结果对覆盖数据并不重要，我很满意。

这是我的`Maven`片段。我希望这会有所帮助。

```
<plugin>
    <groupId>org.apache.maven.plugins</groupId>
    <artifactId>maven-antrun-plugin</artifactId>
    <version>1.1</version>
    <inherited>false</inherited>
    <executions>
        <execution>
            <phase>site</phase>
            <configuration>
                <tasks>
                    <property name="compile_classpath" refid="maven.compile.classpath"/>
                    <property name="runtime_classpath" refid="maven.runtime.classpath"/>
                    <property name="test_classpath" refid="maven.test.classpath"/>
                    <property name="plugin_classpath" refid="maven.plugin.classpath"/>
                    <property name="CRAP4J_HOME" value="${user.home}/Projects/crap4j"/>
                    <taskdef name="crap4j" classname="org.crap4j.anttask.Crap4jAntTask">
                        <classpath>
                            <fileset dir="${CRAP4J_HOME}/lib">
                                <include name="**/*.jar"/>
                            </fileset>
                        </classpath>
                    </taskdef>
                    <crap4j projectdir="${project.basedir}/alm-jar-server"
                            outputDir="${project.basedir}/crap4jReports"
                            dontTest="false"
                            debug="true">
                        <classes>
                            <pathElement location="${project.basedir}/target/classes"/>
                        </classes>
                        <srces>
                            <pathElement location="${project.basedir}/src/main/java"/>
                        </srces>
                        <testClasses>
                            <pathElement location="${project.basedir}/target/test-classes"/>
                        </testClasses>
                        <libClasspath>
                            <fileset dir="${user.home}/.m2/repository">
                                <include name="**/*.jar"/>
                            </fileset>
                        </libClasspath>
                    </crap4j>

                   </tasks>
            </configuration>
            <goals>
                <goal>run</goal>
            </goals>
        </execution>
    </executions>
    <dependencies>
        <dependency>
            <groupId>org.crap4j</groupId>
            <artifactId>crap4j</artifactId>
            <version>1.1.6</version>
        </dependency>
        <dependency>
            <groupId>org.kohsuke</groupId>
            <artifactId>args4j</artifactId>
            <version>2.0.1</version>
        </dependency>
        <dependency>
            <groupId>com.agitar</groupId>
            <artifactId>asmlib</artifactId>
            <version>1.0</version>
        </dependency>
        <dependency>
            <groupId>commons-httpclient</groupId>
            <artifactId>commons-httpclient</artifactId>
            <version>3.0</version>
        </dependency>
        <dependency>
            <groupId>com.agitar</groupId>
            <artifactId>coverage</artifactId>
            <version>1.0</version>
        </dependency>
    </dependencies>
</plugin> 
```

# asp.net - 使用 SPAN 文本而不是输入或选择控件的表单样式

> ID：702540
> 
> 赞同：0
> 
> 时间：2009-03-31T18:55:23.480
> 
> 标签：asp.net, css, forms, styling

我有 CSS 可以格式化表单输入元素上方的标签，如果我只是显示只读数据，我想用数据库中的文本替换输入元素。

无论我做什么，将输入字段更改为 span 或 asp:label 都不会正确呈现文本上方的标签。

我正在使用这个 CSS：

```
div.formRow {
   padding: 2px 0px;
}

span.formItem {
    display: inline-block;
    position: relative;
    padding: 0px 5px;
}
span.formItem label {
    position: absolute;
    left: 5px;
    top: 0px;
}
span.formItem input, span.formItem select {
    margin-top: 20px;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-03-31T22:02:21.067

我猜你需要添加`display: block`到输入字段替换跨度。

# javascript - 使用 Dojo Grid HELP 模仿 excel 表？

> ID：702543
> 
> 赞同：0
> 
> 时间：2009-03-31T18:55:59.923
> 
> 标签：javascript, dojo, grid

我有一个基本网页，我试图在按下时捕获输入键。我将有一个包含许多行的页面（取决于数据库提取的内容），其中每个字段都是可编辑的。我想要做的是当用户专注于某一行的某一列时，我希望他们能够按下回车键，他们的焦点将转到下一行但保持在同一列中。我正在使用 Dojo Grid 创建我的网格。

第一部分是弄清楚如何捕获回车键。下一部分是弄清楚如何将 javascript 函数绑定到特定字段。然后最后我需要能够将我的行增加 1，保持在同一列并保持我的字段可编辑。

那么，关于输入键捕获的任何建议？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-04-03T12:14:10.373

这够了吗？[1.3 DataGrid 的可访问性改进](http://dojotoolkit.org/2009/03/31/accessibility-improvements-1-3-datagrid)：

*   现在支持使用键盘滚动。
*   Enter 按键现在将调用 onrowclick 事件
*   在编辑模式下，按 Tab 和 shift/tab 会将焦点移到/移到同一行上处于编辑模式的其他可编辑单元格
*   ...

# ruby-on-rails - 如何设置和使用 RoR 复杂连接？

> ID：702544
> 
> 赞同：0
> 
> 时间：2009-03-31T18:56:01.280
> 
> 标签：ruby-on-rails, ruby

这段代码取自上一个问题，但我的问题与它直接相关，所以我在这里复制了它：

```
class User < ActiveRecord::Base
  has_many :group_memberships
  has_many :groups, :through => :group_memberships
end

class GroupMembership < ActiveRecord::Base
  belongs_to :user
  belongs_to :role
  belongs_to :group
end

class Role < ActiveRecord::Base
  has_many :group_memberships
end

class Group < ActiveRecord::Base
  has_many :group_memberships
  has_many :users, :through > :group_memberships
end 
```

**下面的新问题**

您如何将上述代码更进一步并添加朋友并与朋友一起工作？

```
class User < ActiveRecord::Base
  has_many :group_memberships
  has_many :groups, :through => :group_memberships
  has_many :friends # what comes here?
  has_many :actions
end 
```

在上面的代码中，我还添加了操作。假设系统跟踪每个用户在网站上的操作。您将如何编写代码以使每个操作都是唯一的，并且对于所有用户的朋友来说，最近的操作在顶部进行排序？

```
<% for action in @user.friends.actions %>
 <%= action.whatever %>
<% end %> 
```

上面的代码可能无效，您可以执行下面的操作，但不会对操作进行排序。

```
<% for friend in @user.friends %>
 <% for action in friend.actions %>
  <%= action.whatever %>
 <% end %>
<% end %> 
```

**更新**

我想这里真正的问题是如何定义朋友？我是否要创建将用户链接到其他用户的新模型或连接表？理想情况下，我想通过其他用户的公共组成员资格来定义朋友，但我不知道如何去定义它。

```
has_many :friends, :through => :group_memberships, :source => :user 
```

但这不起作用。有什么想法或最佳实践建议吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2009-03-31T19:15:38.283

我使用 Rails 已经有一段时间了（想想 Rails 1.x），但我认为您可以执行以下操作：

```
Action.find(:all, :conditions => ['user_id in (?)', @user.friends.map(&:id)], :order => 'actions.date DESC') 
```

然后在你看来：

```
<% @actions.each do |action| %>
  <%= action.whatever -%>
<% end %> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-03-31T19:16:50.683

要添加朋友，您可以使用 has_and_belongs_to_many 或 has_many :through。[这](http://guides.rubyonrails.org/association_basics.html#has-and-belongs-to-many-association-reference)是如何做到这一点的示例。您应该自加入用户表。

要列出最近的操作，请使用 :order => :created_at（或 :updated_at）从 db 获取它们。您可以过滤掉不属于用户的操作。

```
@actions = Action.all(:order => :created_at).select {|a| a.user.friends.include?(@user)} 
```

可能您也可以编写 sql 查询来执行此操作。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-03-31T20:13:51.497

您可以创建一个使用“用户”表的“朋友”对象并从那里开始，或者您可以将朋友定义为部分实体（朋友名称和 user_id 引用）并将用户对象拉入朋友对象。

我更喜欢最后一个模型，因为它可以让您更轻松地代表“已删除”的朋友。您仍然会有朋友姓名的副本（即使它是用户名的副本）和 ID 以识别用户是否离开。使“朋友”概念远离“用户”概念和任何安全隐患。我认为复制“名称”字段是适当的反规范化，因为它增加了过去存在的用户的灵活性和“影子”信息。

不过，我对此的看法。您最终仍将不得不自联接回用户表，但可能不会那么多。如果你真的不想去规范化任何东西，你可以拥有一个 Friend 和 User 都参考的 Person 对象以获取信息。就个人而言，我认为这是一个很好的理论结构，但不值得将其引入大部分代码中（其中 80% 是在谈论用户，20% 是在谈论朋友）。我会让用户容易谈论而朋友有点难……不是两者兼而有之。:)

希望这可以帮助。我喜欢在精神上玩弄这个。:)

# asp.net - CLR 调试器，ASP.NET——如何增加超时？

> ID：702545
> 
> 赞同：5
> 
> 时间：2009-03-31T18:56:19.610
> 
> 标签：asp.net, exception, clr, timeout, debugging

我正在尝试使用 Microsoft CLR 调试器在 ASP.NET MVC 程序中调试问题（引发异常）。它工作得很好，除了一两分钟后，调试器被分离（网络请求超时或什么？）我不能再检查它的状态。

这非常令人沮丧。我怎样才能让服务器/调试器（不确定谁是这里的错误）保持打开状态，直到我告诉它停止？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2009-03-31T19:03:55.723

它在 IIS 端，检查如何配置/修复：http: [//vaultofthoughts.net/ASPNETDebuggerTimeoutInWindowsVista.aspx](http://vaultofthoughts.net/ASPNETDebuggerTimeoutInWindowsVista.aspx)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2009-08-07T15:33:27.767

从链接：

在 IIS 7 中，转到 Application Pools 并为您处理运行的池选择 Advanced Settings。在 Process Model 部分中，您可以执行以下两项操作之一；

*   将 Ping 启用属性设置为 False。这将停止 IIS 检查以查看工作进程是否仍在运行并使您的进程永久保持活动状态（或直到您停止调试的进程）
*   如果您希望允许 IIS 继续监视过程，请将 Ping 最大响应超时值更改为大于 90 秒（默认值）的值。

# jquery - 使用 Jquery 将表行从一个表移动到另一个表

> ID：702551
> 
> 赞同：2
> 
> 时间：2009-03-31T18:57:04.287
> 
> 标签：jquery, jquery-ui

我有以下 HTML

```
<table id="tbl1">
  <!-- Table row trHeader should be here based on a flag //-->  
</table>
<table id="tbl2">
  <tr id="trHeader">
     <td>test</td>
  </tr>
</table> 
```

我有一个标志（本质上是一个按钮），我可以使用它来移动 id="tbl2" 的表格行。我将如何根据此标志将其切换回相同的位置。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2009-03-31T19:04:34.537

尝试这样的事情

```
$('#tbl1').append($('#trHeader').remove()); 
```

更新，我不确定您的按钮在哪里进行切换，我将假设您在单击标题行时进行切换。如果不是，请告诉我。

```
$('#trHeader').toggle(function() {
  $('#tbl1').append($(this).remove());
}, function() {
  $('#tbl2').append($(this).remove());
}); 
```

# sharepoint - Sharepoint：计算列替换所有空格

> ID：702556
> 
> 赞同：2
> 
> 时间：2009-03-31T18:58:53.957
> 
> 标签：sharepoint, formatting, sharepoint-2007, calculated-columns

看起来这确实是一件简单的事情（它可能是），但我试图获取列的字符串数据，然后通过计算列，用 %20 替换所有空格，以便 HTML 链接在工作流产生的电子邮件实际上不会在第一个空格处中断。

例如，我们在源列中有这个：

**file:///Z:/data/这是我们的report.rpt**

并希望在计算列中结束：

**file:///Z:/data/This%20is%20our%20report.rpt**

已经用过REPLACE了，编了一个可怕的超级嵌套的REPLACE/SEARCH版本，但问题是你必须为每个潜在空间嵌套，如果你不知道前面有多少，那就不行了，或者会错过一些。

你们中有人遇到过这种情况吗？你们是如何处理的？

提前致谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2009-03-31T19:09:13.260

据我所知，没有使用计算列语法的通用解决方案。这种情况的标准解决方案是使用 ItemAdded (/ItemUpdated) 事件并从代码初始化字段值。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2017-04-02T14:30:56.947

通过使用一系列计算列，我能够根据我的情况解决这个问题。

在第一个计算列 (C1) 中，我输入了一个公式来删除第一个空格，如下所示：

```
=IF(ISNUMBER(FIND(" ",[Title])),REPLACE([Title],FIND(" ",[Title]),1,"%20"),[Title]) 
```

在第二个计算列 (C2) 中，我使用了：

```
=IF(ISNUMBER(FIND(" ",[C1])),REPLACE([C1],FIND(" ",[C1]),1,"%20"),[C1]). 
```

就我而言，我想编码最多四个空格，所以我以相同的方式使用了 3 个计算列（C1、C2、C3）并得到了所需的结果。

这不如使用单个计算列高效，但如果`SUBSTITUTE`在您的 SharePoint 环境中不起作用，并且您不能使用事件处理程序或工作流，它可能会提供一个可行的替代方案。

我实际上使用了一个稍微不同的公式，但它是在我目前无法访问的工作机器上，所以我只是从一个类似的 SO 问题中获取了这个公式。任何将第一次出现的空格替换为 "%20" 的公式都可以使用，诀窍是 a) 如果公式中没有更多空格，请确保公式返回原始字符串不变，并且 b) 测试，测试， 测试。创建一个列表视图，其中包含您尝试编码的字段以及计算的字段，并查看您是否获得了所需的结果。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-05-13T09:18:40.463

> 这样工作流中生成的电子邮件中的 HTML 链接实际上不会在第一个空格处中断。

**仅当您没有**将链接括在引号中时，浏览器才会执行此操作

如果将链接用引号括起来，它不会**在**第一个空格处被切断

在 SharePoint 公式中，它将是：

```
="""file:///Z:/data/This is our report.rpt""" 
```

因为两个引号是输出引号的 SP 转义符号

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2019-05-22T14:06:48.693

您可以使用此公式（开始修剪为 1，在我的情况下为 4）：

```
=IF(ISBLANK([EUR Amount]),"",(TRIM(MID([EUR Amount],4,2))&TRIM(MID([EUR Amount],6,2))&TRIM(MID([EUR Amount],8,2))&TRIM(MID([EUR Amount],10,2))&TRIM(MID([EUR Amount],12,2))&TRIM(MID([EUR Amount],14,2)))*1) 
```

# apache-flex - 有 SVG 到 MXML 转换器吗？

> ID：702557
> 
> 赞同：1
> 
> 时间：2009-03-31T18:58:54.207
> 
> 标签：apache-flex, flash, flex3, svg, converter

我正在尝试在我的 Flex 应用程序中使用 SVG 文件 - 但似乎最好的方法是将其转换为 MXML。但是，我找不到 SVG 到 MXML 的转换器。似乎有许多 SVG 到 XAML 转换器（用于 Silverlight/C#），但我找不到任何与 Flash/Flex 类似的东西。

任何帮助，将不胜感激。

谢谢， 卡提克

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2009-03-31T19:08:59.097

您应该能够[直接嵌入 SVG](http://www.adobe.com/devnet/flex/quickstart/embedding_assets/#EmbeddingSvgFiles)，无需转换器。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-04-06T13:29:49.340

是的，有几个库，但我还没有遇到任何成熟的 - [http://code.google.com/p/as3svgrendererlib/](http://code.google.com/p/as3svgrendererlib/) - [http://www.degrafa.org/](http://www.degrafa.org/) - [http://code。 google.com/p/svg-viewer/](http://code.google.com/p/svg-viewer/) - [http://labs.zavoo.com/?p=65](http://labs.zavoo.com/?p=65)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-03-31T22:15:35.730

嗯，SVG 基本上是一个 XML 文件。因此，如果您想在运行时导入它，您可以将其读取为 XML 文件，然后使用 AS3 绘图 API 来呈现它。在 Google 代码上查看[此 ActionScript 3 SVG 渲染器](http://code.google.com/p/as3svgrendererlib/)！

# jquery - 如何更改多选框中所选项目的背景颜色？

> ID：702558
> 
> 赞同：0
> 
> 时间：2009-03-31T18:59:12.613
> 
> 标签：jquery, css

我有一个常规的 html 选择字段。当用户从列表中选择一个项目时，它会被添加到一个多选字段并标记为选中。如果用户单击多选字段中的一项，则会将其删除。我想要做的是覆盖多选字段的默认颜色，以便所选项目具有黑色背景。

我尝试使用 css 和 option[selected] 标签，但这似乎不起作用。我可以轻松更改选择框的背景颜色，但不能更改单独选择的项目。我需要什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-03-31T19:11:53.223

只有部分浏览器支持 [selected] 规则，您可以使用一些插件来模拟行为，例如[这个组合框插件](http://jquery.sanchezsalvador.com/samples/example.htm)

# c# - 最佳实践：在 C#.net 中存储异常/错误或信息性消息以实现国际化的最佳方式是什么？

> ID：702559
> 
> 赞同：4
> 
> 时间：2009-03-31T18:59:12.987
> 
> 标签：c#, .net, database, resources

当抛出自定义异常或向最终用户发出消息时，可以使用硬编码字符串（包括字符串常量）、使用纯资源程序集或从数据库中的表中获取字符串。

我希望我的应用程序能够轻松切换到不同的语言，而无需重新编译。虽然将字符串资源存储在程序集或数据库中可以实现此目的，但它增加了程序逻辑的复杂性，进而增加了产品的成本。

我的问题是：在不忽略每个选项带来的成本的情况下，实现目标的最佳方式是什么？如果您有比列出的更好的做法，我很乐意听到。

技术：操作系统：Windows 系列平台：.NET Frame 2 及更高版本语言：C# 数据库：MS SQL 2005 及更高版本

多谢你们！

卡伦

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2009-03-31T19:03:50.497

使用资源：

这如何增加程序逻辑的复杂性？

```
try
{
   //do something with System.Net.Mail with invalid email..
}
catch (FormatException fex)
{
    throw new Exception(Resources.ErrorMsg.Invalid_Email, fex);
} 
```

# 编辑

在 VS2008 中，当你创建一个资源时，你可以定义它是内部的还是公共的。因此，假设我们将其设置为 public，在一个名为 ClassLibrary1 的程序集中，我们可以访问如下属性：

ClassLibrary1.Properties.Resources.InvalidError

其中 InvalidError 是错误的名称。同样，我认为这不会给逻辑增加任何复杂性。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2010-01-15T22:48:14.973

.NET 已经使用命名约定支持多种文化的多种资源：

```
 <default resource file name>.<culture>.resx 
```

本质上，正如 Josh 指出的那样，VS2008 创建了一个很好的类型安全包装器来访问这些资源。

然而，VS UI 暴露了你能做的最少的事情。

如果您创建一个与默认名称完全相同的新资源文件，则在 resx 之前添加文化信息。（注意：您需要在其他地方创建它，然后将其复制到魔法属性文件夹中。）

然后，如果您已将区域性应用于访问资源的线程，您的应用程序将从特定资源中提取正确的字符串。

例如：

```
 // Using the default culture
    string s = Resources.Error1Msg;

    Thread.CurrentThread.CurrentUICulture = new CultureInfo("es-CO");

    // Using the specific culture specified as above:
    s = Resources.Error1Msg; 
```

如果您需要参数化消息，请使用 string.Format 参数化输出。

需要注意的一点是，尝试以这样一种方式构建应用程序层，使您的异常携带丰富的有效负载（用于描述错误），而不仅仅是依赖于文本。

这样，您的表示层可以呈现可能利用有效负载的最佳 UI 体验。

高温高压

菲利普

# java - 复杂的泛型组合

> ID：702571
> 
> 赞同：0
> 
> 时间：2009-03-31T19:01:51.703
> 
> 标签：java, generics

想象一个通用类 MySet，它维护一个父 MySet 实例和一个子 MySet 实例。这个想法是，父母应该能够持有 T 的超集，而孩子应该能够持有 T 的子集。因此，给定以下示例，请考虑以下问题：

```
class MySet<T> {

  MySet<? extends T> child; 

  void doStuff (Collection<? extends T> args) {
    child.doStuff(this, args);
  }

} 
```

编辑：固定问题和示例代码以反映实际问题

现在，子泛型`<T`> 可能比父级的`<T`> 更具限制性，因此父级必须传入一个 Collection `<X`>，其中`<X`> 符合子级的`<T`>。请记住，这个父->子链可以任意延长。有没有办法安排泛型，以便 parent.doStuff(...) 编译，即，它只能用它最严格的孩子的参数来调用？

这将意味着 java 编译器将在 parent->child 链上一直传递通用信息，以确定 doStuff 的允许参数可能是什么，我不知道它是否具有这种能力。

唯一的解决方案是确保孩子不能比使用泛型的父母更严格（即，MySet `<T`> child；而不是 MySet `<? extends T`>）并且让孩子在代码中的其他地方比他们的父母更严格吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-03-31T23:48:13.590

我可以立即对该问题的一部分给出否定的答案：

> 有没有办法安排泛型，以便 parent.doStuff(...) 编译，即，它只能用它最严格的孩子的参数来调用？
> 
> 这将意味着 java 编译器将在 parent->child 链上一直传递通用信息，以确定 doStuff 的允许参数可能是什么，我不知道它是否具有这种能力。

简单的答案是否定的，因为该链的实际扩展（和类型要求）仅在运行时才知道，到那时有关泛型的任何信息都已通过擦除丢失。

更进一步，如果你有一个检查类型而不是普通泛型，并且有一个方法可以在链中向上传递（最严格的）实际类型接受，你可以在运行时进行检查，并引发运行时错误，但它永远不会是编译错误。

所以不，除非事先知道实际的最终类型（并且可能通过第二种类型 arg 指定），否则编译器将无法在那里为您提供帮助。

您可以（并且应该做 imo）保留您刚刚编写的内容（应该可以正常编译），并传递给它一个可能不安全的参数。无论您是自己进行类型检查，还是让 JVM 引发 ClassCastException 是必需的，仍然是一个选择问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-03-31T20:25:30.923

呈现的代码似乎没有任何意义。

考虑

```
 MySet<String> c = ...;
 MySet<Object> p = new MySet<Object>(c);
 Collections<Integer> ints = ...;
 p.doStuff(ints); 
```

那会打电话`c.doStuff(???, ints)`。`ints`是类型`Collection<Integer>`，但被调用者需要`doStuff(Collection<? extends String>)`.

# c# - IIS7 文件映射 - .asax、.ashx、.asap

> ID：702572
> 
> 赞同：4
> 
> 时间：2009-03-31T19:01:56.897
> 
> 标签：c#, asp.net, iis, iis-7, httphandler

IIS 使我们还可以配置 Asp.Net 文件映射。因此，除了 aspx 之外，当请求具有以下文件扩展名时，IIS 也会调用 Asp.Net 运行时：

a) .ascx --> .asmx 扩​​展名用于请求用户控制。

*   由于无法直接访问用户控件，那么任何人如何以及为什么会向用户控件发送请求？

b) .ashx --> 此扩展名用于 HTTP 处理程序。

• 但是为什么要直接请求 .ashx 页面而不是在配置文件中注册此处理程序并在请求具有某些（非 ashx）扩展名的文件时调用它？

• 此外，由于可以注册多个 Http 处理程序，如果它们都使用 ashx 扩展，Asp.Net 将如何知道调用哪个处理程序？

• 请求的ashx 文件包含什么？也许是 Http 处理程序类的定义？

• 我知道当请求非ashx 页面时我们如何注册要调用的Http 处理程序，但是我们如何为ashx 页面注册Http 处理程序？

c) .asax --> 此扩展名用于请求全局应用程序文件

• 我们为什么要直接调用 Global.asax？

• 我假设当对 Global.asax 发出请求时，会创建一个从 HTtpApplication 类派生的对象，但这次没有进行网页处理？

谢谢

* * *

问 - 除了 Asp.Net 能够请求 global.asax 进行编译之外，还有什么其他原因让我选择直接请求扩展名为 .asax 的文件？

> • ashx 文件不必注册。它们基本上是一个更简单的 aspx，当您不需要整个页面生命周期时。一个常见的用途是从数据库中检索动态图像。

因此，如果我编写一个 Http 处理程序，我应该将它放在一个扩展名为 .ashx 的文件中，并且 Asp.Net 将构建一个 HttpHandler 对象，类似于它从 .aspx 文件构建页面实例的方式？

> • 如果黑客确实尝试请求这些文件之一，您希望发生什么？您当然不希望 IIS 将其视为文本文件并将您的应用程序的源代码发送到浏览器。

Asp.Net 可以对 .cs、.csproj、.config、.resx、.licx、.webinfo 文件类型做同样的事情。即，它向 IIS 注册这些文件类型，以便它可以显式阻止用户访问这些文件

> • 仅仅因为您不希望浏览器请求资源，并不意味着您不希望asp.net 引擎处理该资源。这些扩展也是 ASP.Net 为网站模型站点挑选文件以编译的方式。

但是为什么 Asp.Net 也不允许直接请求 .cs、.csproj、.config、.resx、.licx、.webinfo 文件呢？

> a) 和 c) - 据我所知，这些不用于处理任何外部请求

我的书声称这两者在 IIS 中映射

我感谢您的帮助

编辑：

> b) .ashx 扩展名是在配置文件中定义的，它不是 web.config，而是在 machine.config 中
> 
> `<add path="*.ashx" verb="*" type="System.Web.UI.SimpleHandlerFactory" validate="True" />`
> [http://msdn.microsoft.com/en-us/library/bya7fh0a.aspx](http://msdn.microsoft.com/en-us/library/bya7fh0a.aspx)
> 
> 为什么使用 .ashx：不同之处在于处理 .ashx 的 .NET 类读取 .ashx 文件中的 Page 指令以将请求映射到该指令中指定的类。这使您不必为您拥有的每个处理程序在 web.config 中放置一个显式路径，这可能导致 web.config 非常长。

我认为 Http 处理程序类是在 .ashx 文件中定义的，但扩展名为 .ashx 的文件只包含 Page 指令？

因为我不能 100% 确定我是否理解正确：假设我们有十个 Http 处理程序，我们想通过向 IIS7 发出请求来调用。我假设每个 Http 处理程序都会有特定的 .ashx 文件 --> 因此，如果请求 FirstHandler.asxh，那么将调用该文件中指定的处理程序？

**另一个编辑：**

我必须承认我仍然对 ashx 扩展有点不确定。

我意识到通过使用它，我们可以例如创建“hey.ashx”页面，其中 Page 指令将告诉在对“hey.ashx”发出请求时调用哪个类（Http 处理程序）——因此无需在其中注册 Http 处理程序网络配置。

但是，如果您以这种方式使用 Http 处理程序，那么它们只会在对具有 .ashx 扩展名的文件发出请求时被调用。因此，如果我希望为具有其他扩展名的文件（例如 .sourceC）调用 Http 处理程序，那么我仍然需要在 web.config 中注册 Http 处理程序？！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2009-03-31T19:17:59.543

几点：

*   asmx 文件与 ascx 文件不同。您将它们用于 Web 服务 (soap) 而不是 Web 控件。
*   ashx 文件不必*注册*。它们基本上是一个*更简单*的aspx，当您不需要整个页面生命周期时。一个常见的用途是从数据库中检索动态图像。
*   如果黑客*确实*尝试请求这些文件之一，您希望发生什么？您当然不希望 IIS 将其视为文本文件并将您的应用程序的源代码发送到浏览器。
*   仅仅因为您不期望来自浏览器的资源请求，并不意味着您不希望 asp.net 引擎处理该资源。这些扩展也是 ASP.Net 为网站模型站点挑选文件以编译的方式。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2009-03-31T19:08:24.713

a) 和 c) - 据我所知，这些不用于处理任何外部请求

b) 默认情况下，它将查找具有请求的路径/名称的 .ashx 文件。这使得将处理程序添加到网站变得非常容易，而无需进行任何配置。

**更新：**在你还提到 asmx. 我的看法是这本书解释了一些与 ajax 相关的特性，并附有一些评论：

*   Asp.net 不允许发出指向 .ascx 的请求。
*   您可以向 Web 服务 (.asmx) 发出请求以获取信息。
*   有一些内置功能可以帮助您完成上述操作。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2009-03-31T20:01:45.613

**a)** .ascx 不能直接访问，因为默认处理程序是类 System.Web.HttpForbiddenHandler

```
<add path="*.ascx" verb="*" type="System.Web.HttpForbiddenHandler" validate="True" /> 
```

.asmx 文件可以直接调用，它们是 web 方法（尽管您通常必须发出 POST 请求，除非您在 web.config 中指定允许 GET

**b)** .ashx 扩展名*是*在配置文件中定义的，它不是 web.config，而是在 machine.config 中

```
<add path="*.ashx" verb="*" type="System.Web.UI.SimpleHandlerFactory" validate="True" /> 
```

[http://msdn.microsoft.com/en-us/library/bya7fh0a.aspx](http://msdn.microsoft.com/en-us/library/bya7fh0a.aspx)

**为什么使用 .ashx：**不同之处在于处理 .ashx 的 .NET 类读取 .ashx 文件中的 Page 指令以将请求映射到该指令中指定的类。这使您不必为您拥有的每个处理程序在 web.config 中放置一个显式路径，这可能导致 web.config 非常长。

--

**c)** Global.asax：我不使用 gloabl.asax，我宁愿使用非常优雅的 HttpModule 解决方案，但它可能是为具有 global.asax 文件的旧站点设置的。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2009-03-31T21:22:36.043

为了明确清除您可能对 asp.net 对这些请求所做的任何混淆，请检查以下 web.config：

`%systemroot%\Microsoft.NET\Framework\v2.0.50727\CONFIG`

正如您所看到的（在下面发布了我的），asp.net 排除了几乎所有您不确定它们是否正在接受特殊处理的文件。注意有 *.cs、*.acsx、*.asax。

```
<add path="*.asax" verb="*" type="System.Web.HttpForbiddenHandler" validate="True"/>
<add path="*.ascx" verb="*" type="System.Web.HttpForbiddenHandler" validate="True"/>
<add path="*.master" verb="*" type="System.Web.HttpForbiddenHandler" validate="True"/>
<add path="*.skin" verb="*" type="System.Web.HttpForbiddenHandler" validate="True"/>
<add path="*.browser" verb="*" type="System.Web.HttpForbiddenHandler" validate="True"/>
<add path="*.sitemap" verb="*" type="System.Web.HttpForbiddenHandler" validate="True"/>
<add path="*.dll.config" verb="GET,HEAD" type="System.Web.StaticFileHandler" validate="True"/>
<add path="*.exe.config" verb="GET,HEAD" type="System.Web.StaticFileHandler" validate="True"/>
<add path="*.config" verb="*" type="System.Web.HttpForbiddenHandler" validate="True"/>
<add path="*.cs" verb="*" type="System.Web.HttpForbiddenHandler" validate="True"/>
<add path="*.csproj" verb="*" type="System.Web.HttpForbiddenHandler" validate="True"/>
<add path="*.vb" verb="*" type="System.Web.HttpForbiddenHandler" validate="True"/>
<add path="*.vbproj" verb="*" type="System.Web.HttpForbiddenHandler" validate="True"/>
<add path="*.webinfo" verb="*" type="System.Web.HttpForbiddenHandler" validate="True"/>
<add path="*.licx" verb="*" type="System.Web.HttpForbiddenHandler" validate="True"/>
<add path="*.resx" verb="*" type="System.Web.HttpForbiddenHandler" validate="True"/>
<add path="*.resources" verb="*" type="System.Web.HttpForbiddenHandler" validate="True"/>
<add path="*.mdb" verb="*" type="System.Web.HttpForbiddenHandler" validate="True"/>
<add path="*.vjsproj" verb="*" type="System.Web.HttpForbiddenHandler" validate="True"/>
<add path="*.java" verb="*" type="System.Web.HttpForbiddenHandler" validate="True"/>
<add path="*.jsl" verb="*" type="System.Web.HttpForbiddenHandler" validate="True"/>
<add path="*.ldb" verb="*" type="System.Web.HttpForbiddenHandler" validate="True"/>
<add path="*.ad" verb="*" type="System.Web.HttpForbiddenHandler" validate="True"/>
<add path="*.dd" verb="*" type="System.Web.HttpForbiddenHandler" validate="True"/>
<add path="*.ldd" verb="*" type="System.Web.HttpForbiddenHandler" validate="True"/>
<add path="*.sd" verb="*" type="System.Web.HttpForbiddenHandler" validate="True"/>
<add path="*.cd" verb="*" type="System.Web.HttpForbiddenHandler" validate="True"/>
<add path="*.adprototype" verb="*" type="System.Web.HttpForbiddenHandler" validate="True"/>
<add path="*.lddprototype" verb="*" type="System.Web.HttpForbiddenHandler" validate="True"/>
<add path="*.sdm" verb="*" type="System.Web.HttpForbiddenHandler" validate="True"/>
<add path="*.sdmDocument" verb="*" type="System.Web.HttpForbiddenHandler" validate="True"/>
<add path="*.mdf" verb="*" type="System.Web.HttpForbiddenHandler" validate="True"/>
<add path="*.ldf" verb="*" type="System.Web.HttpForbiddenHandler" validate="True"/>
<add path="*.exclude" verb="*" type="System.Web.HttpForbiddenHandler" validate="True"/>
<add path="*.refresh" verb="*" type="System.Web.HttpForbiddenHandler" validate="True"/> 
```

此外，请记住，IIS 可能未配置为将某些请求（MIME 类型）映射到 ASP.NET 管道。

# ruby - 根据单词文件验证输入的最简单方法？

> ID：702579
> 
> 赞同：1
> 
> 时间：2009-03-31T19:05:33.923
> 
> 标签：ruby

`gets`根据很长的单词列表（所有可用英语单词的列表） 验证输入的最佳方法是什么？

我目前正在`readlines`处理文本，但在进行任何操作之前，我想先根据列表验证条目。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-03-31T19:43:17.437

最简单但绝不是最快的方法是每次都简单地搜索单词列表。如果单词列表在数组中：

```
if word_list.index word
    #manipulate word
end 
```

但是，如果您将单词列表作为单独的文件（每个单词位于单独的行），那么我们将使用[`File#foreach`](http://www.ruby-doc.org/core/classes/IO.html#M002268)它来查找它：

```
if File.foreach("word.list") {|x| break x if x.chomp == word}
   #manipulate word
end 
```

请注意，`foreach`它不会去掉尾随的换行符，所以我们用[`String#chomp`](http://www.ruby-doc.org/core-1.8.7/classes/String.html#M000751).

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-03-31T19:51:09.947

这是一个使用 的简单示例`Set`，尽管 Mark Johnson 是对的，但布隆过滤器会更有效。

```
require 'set'

WORD_RE = /\w+/

# Read in the default dictionary (from /usr/share/dict/words),
# and put all the words into a set
WORDS = Set.new(File.read('/usr/share/dict/words').scan(WORD_RE))

# read the input line by line
STDIN.each_line do |line|
  # find all the words in the line that aren't contained in our dictionary
  unrecognized = line.scan(WORD_RE).find_all { |term| not WORDS.include? term }

  # if none were found, the line is valid
  if unrecognized.empty?
    puts "line is valid"
  else # otherwise, the line contains some words not in our dictionary
    puts "line is invalid, could not recognize #{unrecognized.inspect}"
  end
end 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-03-31T19:38:44.593

你是从文件中读取列表吗？你不能把这一切都记在心里吗？如果没有，也许[手指树可能会对您有所帮助，只不过是“从文件中读取一大块数据并 grep 进入”](http://en.wikipedia.org/wiki/Finger_tree)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-04-01T02:13:07.500

将单词列表读入内存，并为每个单词在哈希表中创建一个条目：

```
def init_word_tester
    @words = {}

    File.foreach("word.list") {|word| 
        @words[word.chomp] = 1
    }
end 
```

现在您可以根据哈希值检查每个单词：

```
def test_word word
    return @words[word]
end 
```

# windows - Zend Framework 在 WAMP 上的性能非常差

> ID：702581
> 
> 赞同：2
> 
> 时间：2009-03-31T19:06:03.720
> 
> 标签：windows, performance, zend-framework, wamp

我正在使用 zend 框架安装 wamp 在 Windows 上开发一个项目。不幸的是，它的性能非常慢，尽管我做了手册中提到的事情：

*   删除一次要求
*   添加了apc

我最近安装了 Scienta ZF Debug Bar v1.3，下面是我得到的结果示例：

> 查询：48 在 53.01 毫秒
> 内存：9188 KB
> 控制器时间：8335.74 毫秒

我不明白为什么它工作得这么慢。非常感谢任何帮助。

编辑：

最终让 xdebug 分析器工作，这很奇怪，因为我看到页面加载而且很多...... 6-7 秒，就像酒吧告诉我的那样......但在 wincachegrid 我看到总运行时间为 641 毫秒...我是：|

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-03-31T19:57:54.517

还有一些建议：

*   检查您的错误日志，因为大部分运行时都在您的控制器中，它可能会转储大量错误。
*   考虑使用[xcache](http://xcache.lighttpd.net/)或[eaccelerator](http://eaccelerator.net/)操作码缓存而不是 APC（我相信已过时）。
*   将一些时序代码放入控制器中，看看您是否可以识别出最慢的代码部分。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-03-31T19:27:35.963

您是否尝试过分析应用程序？Zend Studio 和[Xdebug](http://www.xdebug.org/)都能够分析您的应用程序并查看究竟是什么花费了这么长时间。

# sql - 如何轻松将此 Sql Server 层次结构展平为继承的包含列表？

> ID：702584
> 
> 赞同：0
> 
> 时间：2009-03-31T19:07:14.730
> 
> 标签：sql, sql-server, sql-server-2005

我有如下表（为简单起见）：

```
Category
--------------------
CategoryId (0 for root nodes)
ParentCategoryId

ProductCategory
--------------------
ProductId
CategoryId 
```

我希望能够检索所有类别及其继承产品的不同列表（一直回到类别 0）。类别 0 应包括所有产品，所有其他类别应沿层次结构无限深。

示例表内容：

```
CategoryId, ParentCategoryId
---------------------
1, 0
2, 0
3, 0
10, 1
20, 2

ProductId, CategoryId
---------------------
1, 10
2, 1
3, 2
4, 20
5, 3 
```

我希望输出沿着层次结构向上传播，并告诉我产品可能属于的每个类别。所以想要的结果看起来像这样：

```
ProductId, CategoryId
---------------------
1, 0
2, 0
3, 0
4, 0
5, 0
1, 1
2, 1
3, 2
4, 2
5, 3
1, 10
4, 20 
```

在 SQL Server 2005 中是否有一种简单的方法可以做到这一点？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2009-03-31T19:20:02.250

您可以使用递归公用表表达式 (cte) 来执行此操作。

```
WITH X (ProductId, CategoryId) AS (
    SELECT ProductId, CategoryId FROM #ProductCategory
    UNION ALL
    SELECT X.ProductId, C.ParentCategoryId FROM X
    INNER JOIN #Category C ON X.CategoryId = C.CategoryId
)
SELECT ProductId, CategoryId FROM X ORDER BY CategoryId, ProductId 
```

更多信息，请访问[http://msdn.microsoft.com/en-us/library/ms186243.aspx](http://msdn.microsoft.com/en-us/library/ms186243.aspx)

# javascript - 使用 JavaScript 模拟 tab 按键

> ID：702585
> 
> 赞同：21
> 
> 时间：2009-03-31T19:07:50.330
> 
> 标签：javascript, jquery, html, events, keyboard

我想让浏览器表现得好像用户在点击某物时按下了 Tab 键。在点击处理程序中，我尝试了以下方法：

```
var event = document.createEvent('KeyboardEvent');
event.initKeyEvent("keypress", true, true, null, false, false, false, false, 9, 0);
this.input.focus()[0].dispatchEvent(event); 
```

和 jQuery：

```
this.input.focus().trigger({ type : 'keypress', which : 9 }); 
```

...我从[这里](https://stackoverflow.com/questions/596481/simulate-javascript-key-events)拿走了。

第一种方法似乎是最好的选择，但并不完全奏效。如果我将最后两个参数更改为 98、98，实际上，在输入框中输入了一个“b”。但是 9, 0 和 9, 9（我直接从 MDC 网站获取的前者）在 FF3 下的 firebug 中都给了我这些错误：

```
Permission denied to get property XULElement.popupOpen
[Break on this error] this.input.focus()[0].dispatchEvent(event);

Permission denied to get property XULElement.overrideValue
[Break on this error] this.input.focus()[0].dispatchEvent(event);

Permission denied to get property XULElement.selectedIndex
[Break on this error] this.input.focus()[0].dispatchEvent(event);

Permission denied to set property XULElement.selectedIndex
[Break on this error] this.input.focus()[0].dispatchEvent(event); 
```

我听说此类（没有明确定义“此类”）事件是“不受信任的”，这可能解释了这些错误。

第二种方法会导致我作为 event.which 输入的任何值作为 event.which 传递，但没有效果（即使我使用 98 而不是 9，也不会在框中输入“b”。）如果我尝试设置事件.data 在我传递的对象中，当事件被触发时它最终是未定义的。以下是我用来查看的代码：

```
$('#hi').keypress(function(e) {
  console.log(e);
}); 
```

还有其他想法吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2009-07-07T18:17:59.803

我最终采用的解决方案是在我想要手动管理的区域的任一侧创建一个“焦点窃取器”div（tabindex = -1 - 可以有焦点但最初不能被选项卡标记）焦点。然后我放置了一个冒泡的真实事件监听器，用于对整个区域进行聚焦和模糊处理。当任何焦点出现在该区域上时，tabindex 值将更改为 -1，当出现任何模糊时，它们将更改为 0。这意味着当焦点在该区域时，您可以使用 tab 或 shift-tab 离开该区域并且正确地结束在其他页面元素或浏览器 UI 元素上，但是一旦您离开那里，焦点窃取器就会变成可选项卡，并且在焦点上它们正确设置手动区域并将焦点转移到最后的元素上，就好像您单击了手动区域的一端或另一端。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2009-06-25T22:10:53.740

这是我在我们的 webapp 上为两个自定义控件使用的解决方案，一个弹出日历和一个弹出单元/值权重选择器（单击文本框会弹出一个带有两个选择的 div）

```
function tab_focus(elem)
  var fields = elem.form.getElements()
  for(var i=0;i<fields.length;i++) {
    if(fields[i].id == elem.id){
      for(i=i+1;i<fields.length;i++){
        if(fields[i].type != 'hidden'){
          fields[i].focus()
          return    
        }
      }
      break;
    }
  }
  elem.form.focusFirstElement();
} 
```

这是使用 Prototype 框架并期望扩展元素（即 $('thing_id')）作为其参数。

它获取元素所属的表单，并遍历表单的元素，直到找到它自己。

然后它会查找它之后的第一个未隐藏的元素，并将焦点传递给它。

如果表单中没有元素，它将焦点移回表单中的第一个元素。我可以通过 document.forms 在页面上找到下一个表单，但我们的大多数页面都使用一个表单。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-04-01T18:02:06.863

实际上，我想有一种方法，即使它是一个主要的 PITA。我可以确保每个元素，即使自然是一个制表位，都有一个 Xtabindex，以某种方式以正确的顺序排列，即使我将放入其他人的小部件，因此使用 jQuery 在事后添加这些，而不是能够在 HTML 或其他初始构建代码中指定它。然后，我的整个表单将有一个真正的 tabindex。虽然它有焦点，但它会吸收按键，如果它们是 tab 或 shift+tab，则根据 Xtabindex 移动假焦点。如果在表单中的最后一个元素（或第一个元素上的 shift+tab）上按下 tab，它不会吞噬击键，从而允许浏览器使用键盘正确地关注其他页面或表单之外的浏览器 UI 元素。

我只能猜测这种方法会引入什么样的意外副作用。

实际上，它甚至不是一个解决方案，因为我仍然无法在使用它的最后一个元素上伪造标签。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-09-11T12:10:17.837

我创建了一个[简单的 jQuery 插件](https://github.com/marklagendijk/jQuery.tabbable)来解决这个问题。它使用 jQuery UI 的 ':tabbable' 选择器来查找下一个 'tabbable' 元素并选择它。

示例用法：

```
// Simulate tab key when element is clicked 
$('.myElement').bind('click', function(event){
    $.tabNext();
    return false;
}); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2009-08-23T07:13:00.653

我认为这些错误来自自动完成。您可以通过在调度事件之前将自动完成属性设置为“关闭”来关闭它们

```
setAttribute('autocomplete','off') 
```

# ruby-on-rails - Rails Active Record 实例变量

> ID：702587
> 
> 赞同：7
> 
> 时间：2009-03-31T19:08:33.013
> 
> 标签：ruby-on-rails, activerecord, instance-variables

我的问题是关于这个 AR 及其实例变量 @saved

```
 class PhoneNumber < ActiveRecord::Base
has_one :user
validates_presence_of :number

def self.create_phone_number( user, phone_hash )
    @new_phone = PhoneNumber.new(phone_hash)
    @user = user
    PhoneNumber.transaction do
        @user.phone_numbers << @new_phone
        @new_phone.save!
        @user.save!
    end
    @saved = true
    return  @new_phone
rescue ActiveRecord::RecordInvalid => invalid
    @saved = false
    return  @new_phone
end

def saved?
    @saved ||= false
end
 end 
```

据我了解，实例变量将通过实例的存在保持其值。

在我的控制器中使用此 AR 时，保存了吗？总是返回假..

```
@phone_number = PhoneNumber.create_phone_number(@active_user, params[:phone_number])
puts "add_phone_number"
if @phone_number.saved? => always false 
```

关于这些实例变量，我缺少什么？谢谢

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2009-03-31T19:18:56.047

您在类方法中使用实例变量@saved，然后@saved var 属于该类，而不是它的实例，因此您不能从#saved 之类的实例方法调用它？

你可以做的是，在类的顶部添加：

```
 attr_accessor :saved
```

在 create_phone_number 方法中，替换：

```
 @saved = true
```

和：

```
 @new_phone.saved = true
```

那么它应该工作

# c# - 将通用字典转换为不同的类型

> ID：702588
> 
> 赞同：13
> 
> 时间：2009-03-31T19:08:49.533
> 
> 标签：c#, .net, generics, collections

有没有一种快速的方法可以将通用字典从一种类型转换为另一种类型

我有这个

```
IDictionary<string, string> _commands; 
```

并需要将其传递给一个函数，该函数采用稍微不同的类型字典

```
public void Handle(IDictionary<string, Object> _commands); 
```

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2009-03-31T19:13:05.980

我想我会写

```
Handle(_commands.ToDictionary(p => p.Key, p => (object)p.Value)); 
```

这不是世界上最有效的事情，但在协方差出现之前，这就是休息时间。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-03-31T19:11:57.577

也许这个功能对你有用

```
IEnumerable<KeyValuePair<string, object>> Convert(IDictionary<string, string> dic) {
    foreach(var item in dic) {
        yield return new KeyValuePair<string, object>(item.Key, item.Value);
    }
} 
```

你会这样称呼它：

```
Handle(Convert(_commands)); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2011-03-07T08:10:10.157

这样的事情可以吗？

```
Dictionary<int, string> dict = new Dictionary<int, string>();

dict.Add(1, "One");
dict.Add(2, "Two");
dict.Add(3, "Three");
dict.Add(4, "Four");
dict.Add(5, "Five");

object dictObj = (object)dict;

IDictionary temp = (IDictionary)dictObj;

Dictionary<int, object> objs = new Dictionary<int, object>();

foreach (DictionaryEntry de in temp)
{
    objs.Add((int)de.Key, (object)de.Value);
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-15T22:35:36.973

你不能用

```
Dim myDictionary AS New Dictionary(Of Object, Object) 
```

这将能够接受任何类型

# internet-explorer-6 - 为什么我的网站不能在 IE6 或 IE7 中运行？

> ID：702590
> 
> 赞同：1
> 
> 时间：2009-03-31T19:09:02.513
> 
> 标签：internet-explorer-6, internet-explorer-7

由于某种原因，我的网站在 Firefox、Opera、Safari 和 IE8 中正常工作时在这些浏览器中显示“无法显示此消息”错误。

它看起来像这样：[http ://www.reviewsaurus.com/images/pagedisplay.png](http://www.reviewsaurus.com/images/pagedisplay.png)

此文档已成功检查为 XHTML 1.0 过渡版！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-03-31T19:34:52.357

它与 HTML 错误没有任何关系。最糟糕的是显示乱码或空白页面。

`gzip`WordPress 和Content-Encoding存在某种服务器配置错误。

您的网站在 IE 中无法运行，但 /index.php 加载正常。检查原始 HTTP 响应（使用[Fiddler2](http://www.fiddler2.com/fiddler2/)），两个响应之间的区别在于，在对 的请求上`/`，WordPress（可能）将以下文本添加到压缩后的 HTTP 响应正文中：

```
<!-- Page not cached by WP Super Cache. No closing HTML tag. Check your theme. --> 
```

由于 gzip 压缩内容的添加，它不再是正确的 gzip 流，并且 IE6/7 无法解压缩它。

其他浏览器可能具有更好的错误处理能力，因此它们可以很好地处理错误。

我不知道你怎么能解决这个问题，但[谷歌搜索那段文字至少在 wordpress.org 上出现了一些点击](http://www.google.com/search?q=site:wordpress.org+%22Page+not+cached+by+WP+Super+Cache.+No+closing+HTML+tag.+Check+your+theme.%22)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-03-31T19:16:54.037

它[不是有效的 XHTML](http://validator.w3.org/check?uri=http%3A%2F%2Ftom.hsc.be%2F)。如果 IE6/7 实际上将其解释为 XML，这将导致它停止解析。你能给出一个截图来显示失败的样子吗？

更新：现在它是 XHTML 过渡，它正在验证，我没有建议，直到我找到可以运行 IE 的地方。

更新 2： 刚刚对站点运行 IE7，页面加载正常。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-03-31T19:26:51.330

**此文档已成功检查为 XHTML 1.0 过渡版！**

*虽然还是不行……*

**发现问题：**

正在使用以下程序删除不必要的字符，但似乎是错误的。

```
<?php   
function callback($buffer) 
{ 
    $holdit=$buffer;
    $holdit=str_replace("   ", " ", $holdit); // tab
    $holdit=str_replace("  ", " ", $holdit); // double space
    $holdit=str_replace("\n", " ", $holdit); // new line
    $holdit=str_replace("\r", " ", $holdit); // new line
    $holdit = eregi_replace("<!--[^>]*-->"," ",$holdit); // comment
    return $holdit; 
}
ob_start("ob_gzhandler"); 
ob_start("callback");
?> 
```

似乎我也不需要那个功能，没有它会更快。
（我可能也应该选择单个 eregi_replace）

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-03-31T19:33:57.820

对我来说，它在 IE7 中显示得很好，尽管速度很慢。我仍然建议修复这两个错误并验证为 Strict，但在我看来，它们并不是您问题的原因。IE6 和 IE7 将它们解释为 text/html。

# django - 模板中的django请求

> ID：702592
> 
> 赞同：21
> 
> 时间：2009-03-31T19:09:26.987
> 
> 标签：django, request, processor

我已经启用了 django 请求处理器

```
TEMPLATE_PROCESSORS = (
"django.core.context_processors.auth",
"django.core.context_processors.debug",
"django.core.context_processors.i18n",
"django.core.context_processors.media",
"django.core.context_processors.request",
) 
```

我仍然不必请求模板中可用的变量。我必须手动传递它。在网络上使用 django 1.0.2 Everywhere 似乎它只是关于启用的请求处理器..

我也使用 RequestContext 作为：

```
 return render_to_response(
    'profile.html',
    {
        'persons':Person.objects.all(),
        'person':Person.objects.get(id=id),
         'request':request,
    },
    context_instance=RequestContext(request)
) 
```

没运气

哦，该死的新名字是**`TEMPLATE_CONTEXT_PROCESSORS`**

* * *

## 回答 #1

> 赞同：43
> 
> 时间：2010-04-02T14:43:41.223

设置.py：

```
TEMPLATE_CONTEXT_PROCESSORS = (
  # ...
  'django.core.context_processors.request',
  # ...
) 
```

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2009-03-31T19:24:35.190

TEMPLATE_CONTEXT_PROCESSORS 而不是 TEMPLATE_PROCESSORS

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2016-02-04T20:11:31.120

请注意，从 Django 1.8 开始，这已更改为“模板”设置，并且在默认配置中，不包括请求处理器。

```
TEMPLATES = [
{
    'BACKEND': 'django.template.backends.django.DjangoTemplates',
    'DIRS': [
        # insert your TEMPLATE_DIRS here
    ],
    'APP_DIRS': True,
    'OPTIONS': {
        'context_processors': [
            # Insert your TEMPLATE_CONTEXT_PROCESSORS here or use this
            # list if you haven't customized them:
            'django.contrib.auth.context_processors.auth',
            'django.template.context_processors.debug',
            'django.template.context_processors.i18n',
            'django.template.context_processors.media',
            'django.template.context_processors.static',
            'django.template.context_processors.tz',
            'django.contrib.messages.context_processors.messages',
        ],
    },
},] 
```

只需重新添加请求处理器即可解决问题：

```
'django.core.context_processors.request', 
```

有关更多信息，请参阅[Django 升级文档](https://docs.djangoproject.com/en/1.8/ref/templates/upgrading)。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2009-03-31T21:06:31.060

您确定没有`request`可用于模板的变量吗？删除线后会发生什么

```
'request':request, 
```

这与该行存在时不同。如果您的模板以任何一种方式加载，则问题出在您的模板上。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-11-17T14:13:22.697

MIDDLEWARE_CLASSES=( ... 'yourfolder.yourfile.yourclass', ... yourclass:

类 AddRequestToTemplate: process_templaet_response(self, request, response): response.context_data['request']=request

# vb.net - 在使用 VB.NET 进行序列化/反序列化期间添加 XML 注释

> ID：702595
> 
> 赞同：3
> 
> 时间：2009-03-31T19:10:20.247
> 
> 标签：vb.net

我有一个要反序列化的 XML 文档（VB .NET 3.5 Framework），更改了一些值，然后再次进行序列化。原始文档中有几个 XML 注释。当我完成所有反序列化/序列化时，所有评论都丢失了。有没有办法保留评论？如果没有，有没有办法添加关于序列化的评论，而无需与作者一起完成并手动将所有评论添加回适当的位置？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-03-31T19:28:55.477

不，没有。如果要序列化内容，则必须使用自定义序列化（我假设您指的是实现[`IXmlSerializable`接口](http://msdn.microsoft.com/en-us/library/system.xml.serialization.ixmlserializable.aspx)）并将注释存储在类的实例中，并在序列化回 XML 时重新序列化它们。

运行时不可能知道评论应该被序列化并为你存储，所以你必须自己做。

# asp.net - 使用 gridview asp.net 进行排序和分页

> ID：702600
> 
> 赞同：34
> 
> 时间：2009-03-31T19:11:58.480
> 
> 标签：asp.net, gridview, sorting, paging

我试图让 gridview 手动排序和分页，但没有成功。

问题是当用户单击他们想要排序的列时，它会对该页面进行排序，但不会对 gridview 后面的数据源（数据视图）进行排序。因此，当他们前进到不同的页面时，他们的排序就会丢失。几乎我正在寻找一种实际上会对gridview后面的数据源进行排序的排序。这是我到目前为止所拥有的：

```
protected void GridView_OnSort(object sender, GridViewSortEventArgs e)
    {
        String sortExpression = e.SortExpression;

        if (GridViewSortDirection == SortDirection.Ascending)
        {
            DataView myDataView = new DataView(mybll.GetItemsOrdered());
            myDataView.Sort = sortExpression + " DESC";
            GridView.DataSource = myDataView;
            GridView.DataBind();
        }
        else
        {
            DataView myDataView = new DataView(mybll.GetItemsOrdered());
            myDataView.Sort = sortExpression + " ASC";
            GridView.DataSource = myDataView;
            GridView.DataBind();
        }
    } 
```

任何帮助，将不胜感激。谢谢。

* * *

## 回答 #1

> 赞同：56
> 
> 时间：2009-03-31T19:13:55.167

将排序顺序保存在 ViewState 中。

```
private const string ASCENDING = " ASC";
private const string DESCENDING = " DESC";

public SortDirection GridViewSortDirection
{
    get
    {
        if (ViewState["sortDirection"] == null)
            ViewState["sortDirection"] = SortDirection.Ascending;

        return (SortDirection) ViewState["sortDirection"];                
    }
    set { ViewState["sortDirection"] = value; } 
}

protected void GridView_Sorting(object sender, GridViewSortEventArgs e)
{
    string sortExpression = e.SortExpression;

    if (GridViewSortDirection == SortDirection.Ascending)
    {
        GridViewSortDirection = SortDirection.Descending;
        SortGridView(sortExpression, DESCENDING);
    }
    else
    {
        GridViewSortDirection = SortDirection.Ascending;
        SortGridView(sortExpression, ASCENDING); 
    }   

}

private void SortGridView(string sortExpression,string direction)
{
    //  You can cache the DataTable for improving performance
    DataTable dt = GetData().Tables[0]; 

    DataView dv = new DataView(dt); 
    dv.Sort = sortExpression + direction;         

    GridView1.DataSource = dv;
    GridView1.DataBind();         
} 
```

为什么不想使用现有的排序功能？您可以随时自定义它。

在 MSDN[的 GridView Web 服务器控件中对数据进行排序](http://msdn.microsoft.com/en-us/library/hwf94875.aspx)

这是一个自定义示例：

[http://www.netomatix.com/development/GridViewSorting.aspx](http://www.netomatix.com/development/GridViewSorting.aspx)

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-05-08T11:49:46.787

```
<asp:GridView 
    ID="GridView1" runat="server" AutoGenerateColumns="false" AllowSorting="True" onsorting="GridView1_Sorting" EnableViewState="true"> 
    <Columns>
        <asp:BoundField DataField="bookid" HeaderText="BOOK ID"SortExpression="bookid"  />
        <asp:BoundField DataField="bookname" HeaderText="BOOK NAME" />
        <asp:BoundField DataField="writer" HeaderText="WRITER" />
        <asp:BoundField DataField="totalbook" HeaderText="TOTALBOOK" SortExpression="totalbook"  />
        <asp:BoundField DataField="availablebook" HeaderText="AVAILABLE BOOK" />
    </Columns>
</asp:GridView> 
```

后面的代码：

```
protected void Page_Load(object sender, EventArgs e) {
        if (!IsPostBack) {
            string query = "SELECT * FROM book";
            DataTable DT = new DataTable();
            SqlDataAdapter DA = new SqlDataAdapter(query, sqlCon);
            DA.Fill(DT);

            GridView1.DataSource = DT;
            GridView1.DataBind();
        }
    }

    protected void GridView1_Sorting(object sender, GridViewSortEventArgs e) {

        string query = "SELECT * FROM book";
        DataTable DT = new DataTable();
        SqlDataAdapter DA = new SqlDataAdapter(query, sqlCon);
        DA.Fill(DT);

        GridView1.DataSource = DT;
        GridView1.DataBind();

        if (DT != null) {
            DataView dataView = new DataView(DT);
            dataView.Sort = e.SortExpression + " " + ConvertSortDirectionToSql(e.SortDirection);

            GridView1.DataSource = dataView;
            GridView1.DataBind();
        }
    }

    private string GridViewSortDirection {
        get { return ViewState["SortDirection"] as string ?? "DESC"; }
        set { ViewState["SortDirection"] = value; }
    }

    private string ConvertSortDirectionToSql(SortDirection sortDirection) {
        switch (GridViewSortDirection) {
            case "ASC":
                GridViewSortDirection = "DESC";
                break;

            case "DESC":
                GridViewSortDirection = "ASC";
                break;
        }

        return GridViewSortDirection;
    }
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2016-05-02T03:42:50.243

Tarkus 的回答效果很好。但是，我建议将 VIEWSTATE 替换为 SESSION。

当前页面的 VIEWSTATE 仅在当前页面回发到自身时起作用，并且在用户被重定向到另一个页面时消失。SESSION 不仅在当前页面的回发上保持排序顺序。它在整个会话期间持续存在。这意味着用户可以浏览其他页面，当他返回给定页面时，他上次使用的排序顺序仍然存在。这通常更方便。

还有其他方法，例如持久化用户配置文件。

我推荐这篇文章来很好地解释 ViewState 以及它如何与网页的生命周期一起工作： [https ://msdn.microsoft.com/en-us/library/ms972976.aspx](https://msdn.microsoft.com/en-us/library/ms972976.aspx)

要了解 VIEWSTATE、SESSION 和其他持久化变量方式的区别，推荐这篇文章： [https ://msdn.microsoft.com/en-us/library/75x4ha6s.aspx](https://msdn.microsoft.com/en-us/library/75x4ha6s.aspx)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-10-22T18:52:22.630

我找到了一种更简单的方法，它允许您仍然使用标准gridview的内置排序/分页......

创建 2 个标签。将它们设置为可见 = false。我打电话给我的 lblSort1 和 lblSortDirection1

然后编写 2 个简单事件……页面排序，写入不可见标签的文本，页面索引更改，使用它们……

```
Private Sub gridview_Sorting(sender As Object, e As GridViewSortEventArgs) Handles gridview.Sorting
lblSort1.Text = e.SortExpression
lblSortDirection1.Text = e.SortDirection
End Sub

Private Sub gridview_PageIndexChanging(sender As Object, e As GridViewPageEventArgs) Handles gridview.PageIndexChanging
    gridview.Sort(lblSort1.Text, CInt(lblSortDirection1.Text))
End Sub 
```

这比使用全局变量有点草率，但我发现使用 asp 尤其是全局变量是不可靠的......

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2016-03-14T00:49:52.400

更简单的方法...：

```
 Dim dt As DataTable = DirectCast(GridView1.DataSource, DataTable)
    Dim dv As New DataView(dt)

    If GridView1.Attributes("dir") = SortDirection.Ascending Then
        dv.Sort = e.SortExpression & " DESC" 
        GridView1.Attributes("dir") = SortDirection.Descending

    Else
        GridView1.Attributes("dir") = SortDirection.Ascending
        dv.Sort = e.SortExpression & " ASC"

    End If

    GridView1.DataSource = dv
    GridView1.DataBind() 
```

# asp.net - 我什么时候应该使用 session-per-request 模式

> ID：702605
> 
> 赞同：3
> 
> 时间：2009-03-31T19:14:15.247
> 
> 标签：asp.net, database, design-patterns, orm

我到处都能看到这种模式，但 Linq to SQL 并没有实现它。如果 Session/Unit-of-Work 对象是轻量级的（可以在没有性能损失的情况下创建和销毁），并且连接池使数据库连接保持活动状态，为什么以及何时需要 session-per-request 模式？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-04-03T21:58:13.027

我相信每个请求会话的想法更多的是关于您何时打开和关闭会话，而不是提高性能。

这个想法是

1.  打开会话将在您的代码被调用之前启动事务
2.  您的业​​务逻辑*和*框架可以完全访问数据库，直到*最后*一刻
3.  您的交易是为您承诺的，而不是每次都必须自己做

#2 的想法很重要，这样您就可以混合使用 Web 框架和延迟加载数据；如果在执行代码后渲染数据时调用了 getter 方法，并且您关闭了会话，则无法延迟加载该 getter 的结果。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-02-13T15:15:06.803

这实际上是一个几乎所有教程似乎都避免的好问题。

如果您不使用延迟加载，则不需要它。

# .net - WPF：“'String' 类型的值无法转换为 'System.Windows.Media.ImageSource'。”

> ID：702606
> 
> 赞同：6
> 
> 时间：2009-03-31T19:14:24.777
> 
> 标签：.net, wpf, image, data-binding

我正在尝试设置 WPF Image 的源。

**XAML**工作：

```
<Image Name="ImageThing"
       Source="images/Thing.png"/> 
```

**Visual Basic**失败：

```
ImageThing.Source = "images/Thing.png" 
```

…除了这个**例外**：

> “String”类型的值无法转换为“System.Windows.Media.ImageSource”。

如何创建我需要的 System.Windows.Media.ImageSource？

* * *

## 更新

此代码改编自[MSDN 示例](http://msdn.microsoft.com/en-us/library/system.windows.controls.image.aspx)有效：

```
Dim bmp As New BitmapImage()
bmp.BeginInit()
bmp.UriSource = New Uri("images/Thing.png", UriKind.Relative)
bmp.EndInit()
ImageThing.Source = bmp 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2009-03-31T19:18:35.750

WPF 使用隐式类型转换器将 xaml 字符串转换为预期的类型。在代码中，您被对象类型静态绑定...如果您查看[此处的示例，](http://msdn.microsoft.com/en-us/library/system.windows.controls.image.aspx)它将显示如何将源属性设置为从本地 uri 以编程方式生成的 BitmapImage。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2009-03-31T19:42:30.357

你可能需要做这样的事情

```
Uri i = new Uri("images\\Thing.png"); 
```

请记住，对于 Windows 文件系统，您需要使用 \ 而不是 /

看看[这里](http://msdn.microsoft.com/en-us/library/system.windows.controls.image.source.aspx)

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2011-04-04T15:32:01.267

它甚至可以比上面更容易：

`ImageThing.Source = New BitmapImage(New Uri("images/Thing.png", UriKind.Relative))`

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2011-08-18T04:30:42.483

只需像这样更改 xaml 文件。

```
<Image Name="ImageThing">
    <Image.Source>
       <BitmapImage UriSource="images/Thing.png" />
    </Image.Source>
</Image> 
```

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2015-11-02T04:36:38.593

关于什么

```
Private Sub Google_Click(sender As Object, e As RoutedEventArgs)
    Mainbrowser.Navigate("http://www.contoso.com") 
```

# java - 在 Java 中，当使用位移时，为什么 1 << 32 != 1 << 31 << 1？

> ID：702607
> 
> 赞同：15
> 
> 时间：2009-03-31T19:14:33.870
> 
> 标签：java, bit-manipulation

```
int a = 1 << 32;
int b = 1 << 31 << 1; 
```

为什么`a == 1`呢？`b`正如我所料，是 0。

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2009-03-31T19:14:56.367

对于整数，所有班次都是 mod 32，对于 long 是 mod 64。

从[规范的第 15.19 节](http://docs.oracle.com/javase/specs/jls/se7/html/jls-15.html#jls-15.19)：

> 如果左侧操作数的提升类型是`int`，则仅将右侧操作数的五个最低位用作移位距离。就好像右手操作数经过位逻辑与运算符 & (§15.22.1) 与掩码值 0x1f。因此，实际使用的移位距离始终在 0 到 31 的范围内，包括 0 到 31。
> 
> 如果左侧操作数的提升类型是`long`，则仅将右侧操作数的最低六位用作移位距离。就好像右手操作数经过位逻辑与运算符 & (§15.22.1) 与掩码值 0x3f。因此，实际使用的移位距离总是在 0 到 63 的范围内，包括 0 到 63。

至于*为什么*语言是这样设计的——我不知道，但 C# 有相同的设计决定。这是带注释的 ECMA C# 规范所说的：

> C# 故意将实现定义的行为保持在最低限度。仅当强制统一行为的性能影响过大（例如某些浮点精度问题）时，才接受它们。因此，每个整数类型的大小都被精确指定，并且字符集被固定为 Unicode。
> 
> 对于移位操作，也指定了统一的行为。它可以使用一条额外指令（& 0x1F 或 & 0x3F）来实现，这在现代处理器上只产生很小的成本，特别是因为它不引用内存。与浮点运算不同，如果任由处理器随心所欲，移位行为的差异将是巨大的。将产生完全不同的积分结果，而不是精度上的微小差异。
> 
> 在做出这个决定时，委员会研究了许多不同处理器架构的参考资料。对于 32 位操作数，超出范围 -32..+32 和 64 位操作数分别为 -64..+64 的移位计数的行为几乎没有一致性。

（然后是一些示例的列表。）

这对我来说似乎是一个完全合理的解释。一致性绝对重要，如果无法在某些系统上以高性能的方式实现*不同*的一致性行为，我认为这是一个合理的解决方案。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-03-31T20:16:34.690

处理器实现移位指令的方式存在一些差异。

例如，IIRC、ARM 处理器（32 位 ISA）占用移位寄存器的最低有效字节。（移位实际上不是 ARM 上的独立指令）。

只要底层处理器有一种模糊合理的移位方式，清除除最低有效位之外的所有位（通常是一条指令）比检查移位是否大和分支（实际上在 ARM 上通常只添加一条指令）更容易因为所有指令都是有条件的）。

# algorithm - 如何表示隐含关系？

> ID：702608
> 
> 赞同：2
> 
> 时间：2009-03-31T19:14:51.623
> 
> 标签：algorithm, database-design, search

我正在开发一个应用程序，我必须处理一个名为“技能”的实体。现在的问题是“技能 A”可以与“技能 B”具有一定的相关性（相关性用于搜索目的）。同样，“技能 B”也可以与“技能 C”相关。我们目前有以下数据模型来表示这种场景

技能 {SkillId, SkillName}

RelevantSkill {SkillId, RelevantSkillId, RelevanceLevel}

现在鉴于上述情况，我们在“技能 A”和“技能 C”之间存在隐式关系。这种情况下的最佳数据模型是什么？在执行搜索时，我们还必须遍历这个层次结构。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-03-31T19:22:56.613

你最好的选择是：

1.  `ImplicitRelevance`用一个布尔列增加 RelevantSkill ：

    > `RelevantSkill {SkillId, RelevantSkillId, RelevanceLevel, ImplicitRelevance}`

2.  *当且仅当计算**值高于设定的阈值*时，插入（到`RelevantSkill`表中）对应于所有隐式（间接）相关关系（例如“技能 A”->“技能 C”）的行及其对应的*计算* 值。这些行应该设置为`RelevanceLevel`*`RelevanceLevel`*`ImplicitRelevance``true`

    > `skill_a_id, skill_b_id, computed_level, 'T'`

如果对显式相关级别（指标）进行了任何更改，请删除 ImplicitRelevance=true 的所有行并重新计算（重新插入）它们。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-03-31T21:30:14.387

您的解释留下的一些问题是在间接（“隐式”）关系的情况下如何组合相关级别。例如，如果技能 A 与等级 3 的 B 相关，技能 B 与等级 5 的技能 C 相关，那么技能 A 与技能 C 的间接关联程度（作为数字）是多少？

正确的数据模型取决于两件事：您拥有多少技能，以及关系结构的密集程度（密集 = 许多技能与其他技能相关）。如果关系结构密集并且您的技能很少（< 1000），则最好将整个事物表示为矩阵。

但是如果你有很多技能但是一个稀疏的关系结构你可以将它表示为三个表：

```
Skill {SkillId, SkillName}

RelevantSkill {SkillId, RelevantSkillId, RelevanceLevel}

IndirectRelevance { SkillId, RelevantSkillId, RelevanceLevel} 
```

第三张表（IndirectRelevance）是根据两张主表计算得出的；每当您更改 Skill 或 RelevantSkill 表时，您都需要更新 IndirectRelevance 表。

我认为三张桌子比两张好；这使得实现更简洁、更直接。RelevantSkill 包含明确陈述的关系；IndirectRelevance 所有*派生的*事实。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-04-10T20:13:21.370

您所要求的似乎基本上是从一组成对距离计算的图形距离算法（斜线数据结构）。一个合理（并且可以很好地计算）的指标是[通勤时间](http://www.isys.ucl.ac.be/staff/francois/articles/pakddlyen.pdf)。

可以这样想：构建一个图，其中每个节点都是一个技能，每条边代表它连接的节点的相关性。现在想象一下，您从图中的某个节点（某种技能）开始，沿着定义的边随机跳转到其他节点。假设从技能 A 跳到技能 B 的概率与这些技能彼此之间的相关性成正比（通过这些技能与其他技能的相关性来归一化......）。现在通勤时间表示从技能 A 到技能 C 所需的平均步数。

这有一个非常好的特性，即在两个节点之间添加更多路径可以缩短通勤时间：如果技能 A 和 B、B 和 C、C 和 D、D 和 A 相关，那么 A 和 C 之间的通勤时间将得到更短。此外，使用稀疏连接的技能图的特征值分解可以很容易地计算通勤时间（我认为我给你的参考资料显示了这一点，但如果没有很多可用的）。

如果您想实际存储任何技能对之间的通勤时间，您将需要一个全连接图或 NxN 矩阵（N 是技能的数量）。然而，一个更好的变体是，如上所述，丢弃所有弱于某个阈值的连接，然后将稀疏连接的图作为行存储在数据库中。

祝你好运，我希望这会有所帮助！

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-04-09T09:15:46.460

在选择最佳选项之前，需要考虑一些因素：

*   有多少技能？
*   关系是稀疏的还是密集的（即技能是否与许多其他技能相关）？
*   他们多久改变一次？
*   是否有相关性阈值（您感兴趣的最小相关性）？
*   如何计算多路径相关性？

结构显然会像antti.huima 提出的那样。不同之处在于如何实现 IndirectRelevance。如果有很多变化，很多关系和关系密集，那么最好的方法可能是存储过程（可能通过视图访问）。如果关系稀疏且存在阈值，则最佳选择可能是物化视图或通过触发器更新的表。

# vba - VBA 不是 IsNull

> ID：702614
> 
> 赞同：5
> 
> 时间：2009-03-31T19:16:27.300
> 
> 标签：vba, ms-access, conditional

在 Access 中使用一些 VBA 代码，当满足一组非常特定的条件时，它将弹出一个 InputBox，要求输入一个整数。到现在为止还挺好。

```
Private Sub Command10_Click()

    If Not IsNull(mrf) Then
        If min <> max Then
            If qty <= min Then
                mrf = GetParamValue
            End If
        End If
    End If
    End Sub 
```

问题是 Not IsNull 似乎被忽略了。我希望它要求输入一个值，除非一个值已经存在。只要满足 min <> max 和 qty <= min 条件，这就会一直触发 InputBox。我在这里想念什么？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2009-03-31T19:28:11.890

如果`mrf`是 Variant，那么它最初是`Empty`，而不是`Null`。因此，您必须使用`IsEmpty()`函数。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2009-03-31T19:23:45.660

不，**Not IsNull**运行良好。

请记住，**IsNull**是一个函数，如果传递给它的参数为 null，则返回 TRUE，否则返回 false。

您的“If Not IsNull(mrf) Then”语句翻译成英文为“If mrf is not null then”

这意味着当 mrf 有一个值时，您正在处理 if 语句中的代码。如果您希望在 mrf 为空时触发内部代码，那么您需要从语句中删除*NOT 。*

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-03-31T19:27:00.050

我的猜测是 mrf 不是空的，即使它是空的或其他东西。它也可能是 Nothing，这与 VBA 领域中的 null 不同（我认为）。尝试在调试器中运行代码并查看 mrf 的值。根据 mrf 是什么，您可以进行不同的测试（例如检查 len(mrf) 与否 isNothing(mrf) 或者如果它是一个整数，并且它的 init 为零，那么 mrf <> 0 .... 你明白了. 希望有帮助！

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2009-03-31T20:18:02.300

您可能对 VB6/VBA null/nothing/empty 上的这篇文章感兴趣：

[http://blogs.msdn.com/ericlippert/archive/2003/09/30/53120.aspx](http://blogs.msdn.com/ericlippert/archive/2003/09/30/53120.aspx)

# firefox - 我应该如何以及通过什么创建 Firefox 插件？

> ID：702619
> 
> 赞同：5
> 
> 时间：2009-03-31T19:17:16.173
> 
> 标签：firefox, plugins

我想为 Firefox 编写一个插件，其想法是让 HTML 代码用户当前进入，处理它并将其发送到外部 php 脚本。

你将如何进行？我可以使用哪些编程语言？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2009-03-31T19:21:14.603

有大量在线信息可帮助您创建 Firefox 扩展。

这里有一些不错的：

> [Firefox 扩展开发教程 :: 概述](http://www.rietta.com/firefox/Tutorial/overview.html)
> [如何开发 Firefox 扩展](http://www.robertnyman.com/2009/01/24/how-to-develop-a-firefox-extension/)
> [扩展开发入门](http://kb.mozillazine.org/Getting_started_with_extension_development)

# asp.net - .Net 会员资格的替代品

> ID：702625
> 
> 赞同：19
> 
> 时间：2009-03-31T19:18:53.830
> 
> 标签：asp.net, asp.net-membership

.net 会员资格有任何替代\mods 吗？

我觉得它非常严格；

*   不能轻易更改用户名。您必须创建一个新用户并复制字段，但随后您会丢失主键，或者您必须自己直接编辑用户表。

*   其他配置文件字段作为一个 blob 一起存储。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2009-03-31T19:24:04.440

ASP.Net 成员使用提供者模型。这意味着您可以完全自由地实现自己的会员提供者，甚至可以继承和扩展现有的提供者，只要您遵循[提供者合同](http://msdn.microsoft.com/en-us/library/aa479021.aspx)。

不过，另外一个是询问现有的替代方案，而不是尝试自己构建新的东西。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2011-07-05T21:07:51.543

我会继续在这里列出我的替代方案。我推出了自己的身份验证库，我认为公开发布它已经足够棒了……所以我做到了。它的设计目的是不妨碍您，总体而言，它非常简约。我没有提供很多开箱即用的用户控件，但在大多数网站上，我看到从未使用过那些内置的用户控件。因此，我没有尝试制作更灵活的用户控件，而是决定让创建自己的登录控件等变得非常简单。

该项目称为快速、安全和简洁的身份验证，简称 FSCAuth。它是 BSD 许可的。你可以在[Binpress](http://www.binpress.com/app/fscauth/231)或[Bitbucket上下载它](https://bitbucket.org/earlz/fscauth)

它灵活的“UserStore”模型（Form 相当于提供者）使您能够以任何方式构建数据库。它可以支持纯文本文件、XML、[MongoDB](http://lastyearswishes.com/blog/view/4db256c04aa5d8071307ef7a)、[Sql Server](http://lastyearswishes.com/blog/view/4df536514aa5d847bb0e89ad)以及介于两者之间的任何地方。

以下是我认为它特别优于表单身份验证的内容列表：

*   无状态认证系统。无需在数据库或内存中跟踪用户会话。这使得扩展到多个服务器变得微不足道，需要对您的身份验证代码进行少量（如果有的话）更改
*   使用任何东西作为每个用户的唯一 ID。没错，没有更多的 GUID！任何适合字符串的东西都是公平的游戏
*   内置 HTTP 基本身份验证。您可以仅在您想要（或全局）的页面上启用基本身份验证，并且您可以像使用典型的基于 cookie 的身份验证一样进行相同的调用
*   很难让人不安全。由于它是如何工作的，并且我尽可能少地将核心代码留给最终用户进行实际身份验证，它非常安全，除非你真的试图破坏它，否则它将保持这种状态。我处理 cookie、HTTP Basic Auth 和所有散列。您只需给 FSCAuth 一个数据库以将其放入。
*   BCrypt 对哈希的支持是微不足道的。[怎么做。](http://lastyearswishes.com/blog/view/4e2c779d4aa5d80931d7cb94). 在表单身份验证中[几乎不可能](https://stackoverflow.com/questions/6460711/adding-a-custom-hashalgorithmtype-in-c-asp-net)
*   我喜欢 ：）

当然它也缺少，公平地说，我将包括一些缺少的东西

*   在 IIS 6 中验证静态文件是不可能的（还）
*   没有暴力预防（还）。这意味着您需要确保同一个人不会在 2 秒内尝试访问您的登录页面 200 次。
*   它没有内置在 ASP.Net 中
*   没有 Windows 或 Passport 身份验证（没有计划添加）

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2009-03-31T19:27:14.917

由于 ASP.NET 成员模型是围绕提供者构建的，因此有许多可用的替代方案。

默认情况下，用户有一个 ProviderUserKey，它是一个 GUID，它是数据库的主键，所以如果你愿意，你应该可以写一些东西来改变他们的用户名。

就配置文件而言，是的，默认 blob 相当烦人。您可以查看将配置文件映射到表的[SQL 表配置文件提供程序](http://www.asp.net/downloads/sandbox/table-profile-provider-samples/)，或者相当快地[推出您自己的](http://odetocode.com/Articles/440.aspx).

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-03-31T19:25:25.750

至于更改用户名，可以通过使用 CreateNewUser() 方法并根据当前用户填写适当的字段，然后删除当前用户来轻松完成。

Profile 字段不是 .NET Membership Provider 模型的一部分，而是 Profile Provider 的一部分。这是一个备受争议的话题，对于大多数生产机器来说，正确的方法是使用更好的配置文件提供程序解决方案，例如这个[Table Profile Provider](http://community.rainbowportal.net/blogs/barry_wadsworths_blog/archive/2006/02/17/654.aspx)，它按照您的期望存储配置文件字段，而不是作为内存 -占用 blob。或者，您可以轻松推出自己的个人资料提供程序，请在[此处查看说明](http://searchwindevelopment.techtarget.com/tip/0,289483,sid8_gci1270321,00.html)。

当然有 .NET Membership 替代方案，但大多数都是错误的或具有小功能集。在一个之上开发两个月然后意识到它不会支持你需要的所有功能真的很糟糕。.NET Membership 是一个经过验证的解决方案，这就是它经常使用的原因。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2009-03-31T19:26:46.090

至于 Profile 有几个[选择](http://weblogs.asp.net/scottgu/archive/2006/01/10/435038.aspx)。这两个使用表或让您调用存储过程。当然你也可以实现你自己的。我个人厌倦了使用 Profile Providers，并发现在我的代码中处理配置文件更容易控制和包含。

至于其他问题，您也可以实现自己的提供程序。Microsoft 向 SQL Providers 发布了源代码，以便为您提供一个起点。

# ruby-on-rails - HTTP Basic Auth 用户名中的 UTF-8 字符损坏

> ID：702629
> 
> 赞同：30
> 
> 时间：2009-03-31T19:19:15.170
> 
> 标签：ruby-on-rails, http, utf-8, http-headers

我正在尝试使用 Ruby on Rails 构建 Web 服务。用户通过 HTTP Basic Auth 进行身份验证。我想在用户名和密码中允许任何有效的 UTF-8 字符。

问题是浏览器在将基本身份验证凭据中的字符发送到我的服务之前会对其进行处理。为了测试，我使用“カタカナカタカナカタカナカタカナカタカナカタカナカタカナカタカナカタカカナカタカナカタカナ”作为我的用户名（不知道这是什么意思 - AFAIK，如果它是我们的随机角色的话，请原谅我。

如果我把它看作一个字符串，并做username.unpack（“H *”）将其转换为十六进制，我得到：“3e28ba3e28fb3e28ba3e38a83e28ba3e28fb3e28ba3e38a83e28ba3e28fb3e28ba3e38a83e28ba3e28fb3e28ba3e38a83e28ba3e28fb3e28ba3e38a83e28ba3e28fb3e28ba3e38a83e28ba3e28fb3e28ba3e38a83e28ba3e28fb3e28ba3e38a8”这似乎是对适合32个汉字字符（每3个字节/ 6个十六进制数字）。

如果我对通过 HTTP 基本身份验证传入的用户名执行相同操作，我会得到：'bafbbaacbafbbaacbafbbaacbafbbaacbafbbaacbafbbaacbafbbaacbafbbaac'。显然要短得多。使用 Firefox Live HTTP Headers 插件，这是发送的实际标头：

```
Authorization: Basic q7+ryqu/q8qrv6vKq7+ryqu/q8qrv6vKq7+ryqu/q8o6q7+ryqu/q8qrv6vKq7+ryqu/q8qrv6vKq7+ryqu/q8o= 
```

这看起来像那个'bafbba ...'字符串，高半字节和低半字节交换了（至少当我将它粘贴到Emacs，base 64解码，然后切换到hexl模式时）。这可能是用户名的 UTF16 表示形式，但除了胡言乱语之外，我没有得到任何东西来显示它。

Rails 将 content-type 标头设置为 UTF-8，因此浏览器应该以该编码发送。我得到了正确的表单提交数据。

该问题发生在 Firefox 3.0.8 和 IE 7 中。

那么......是否有一些神奇的方法可以让 Web 浏览器通过 HTTP Basic Auth 发送 UTF-8 字符？我在接收端处理错误吗？HTTP Basic Auth 是否不适用于非 ASCII 字符？

* * *

## 回答 #1

> 赞同：60
> 
> 时间：2009-03-31T22:33:56.810

> 我想在用户名和密码中允许任何有效的 UTF-8 字符。

放弃所有希望。基本身份验证和 Unicode 不能混用。

对于如何将非 ASCII 字符编码为基本身份验证用户名：密码令牌之前，没有标准 (*)。因此，每个浏览器都会做一些不同的事情：

*   Opera 使用 UTF-8；
*   IE 使用系统的默认代码页（您无法知道，除了它从不使用 UTF-8），并使用 Windows 默默地破坏不适合它的字符“猜一个看起来有点像的随机字符”一个你想要的或者可能不是'秘方;
*   Mozilla 仅使用字符代码点的低字节，它具有编码为 ISO-8859-1 的效果，并且不可挽回地破坏非 8859-1 字符......*除非*在执行 XMLHttpRequests 时，在这种情况下它使用 UTF-8；
*   Safari 和 Chrome 编码为 ISO-8859-1，并且在使用非 8859-1 字符时根本无法发送授权标头。

*：有些人将标准解释为：

*   它应该始终为 ISO-8859-1，因为它是包含直接包含在标头中的原始 8 位字符的默认编码；
*   它应该以某种方式使用 RFC2047 规则进行编码。

但是这些提议都不是包含在 base64 编码的身份验证令牌中的主题，而且 HTTP 规范中的 RFC2047 参考实际上根本不起作用，因为它可能被使用的所有地方都被“原子上下文”明确禁止' RFC2047 本身的规则，即使 HTTP 标头遵守 RFC822 系列的规则和扩展，但它们不遵守。

总结：嗯。几乎没有希望在标准或 Opera 以外的浏览器中修复此问题。这只是促使人们远离 HTTP 基本身份验证，转而采用非标准和不易访问的基于 cookie 的身份验证方案的另一个因素。真是惭愧。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2009-03-31T20:19:20.563

一个已知的缺点是基本身份验证不支持非 ISO-8859-1 字符。

众所周知，一些 UA 使用 UTF-8（想到 Opera），但也没有互操作性。

据我所知，没有办法解决这个问题，除非定义一个处理所有 Unicode 的新身份验证方案。并部署它。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2010-08-20T20:16:57.793

HTTP Digest 身份验证也不能解决这个问题。它遇到同样的问题，即客户端无法告诉服务器它正在使用什么字符集，并且服务器无法正确假设客户端使用了什么。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-03-31T19:41:36.787

您是否使用过类似的方法进行测试`curl`以确保它不是 Firefox 问题？[HTTP Auth RFC](http://www.ietf.org/rfc/rfc2617.txt)对ASCII 与非 ASCII 保持沉默，但它确实表示标头中传递的值是用户名和密码，由冒号分隔，我在 Firefox 报告的字符串中找不到冒号发送。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-10-23T17:30:57.817

如果您正在为 Windows 8.1 编码，请注意文档中的示例`HttpCredentialsHeaderValue`（错误地）使用 UTF-16 编码。相当好的解决方法是切换到 UTF-8（因为 ISO-8859-1 不受支持`CryptographicBuffer.ConvertStringToBinary`）。

请参阅[http://msdn.microsoft.com/en-us/library/windows/apps/windows.web.http.headers.httpcredentialsheadervalue.aspx](http://msdn.microsoft.com/en-us/library/windows/apps/windows.web.http.headers.httpcredentialsheadervalue.aspx)。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2021-11-19T09:28:55.223

这是我们今天用来规避同事密码中非 ASCII 字符问题的解决方法：

```
curl -u "USERNAME:`echo -n 'PASSWORT' | iconv -f ISO-8859-1 -t UTF-8`" 'URL' 
```

替换`USERNAME`,`PASSWORD`和`URL`你的价值观。此示例在执行命令之前使用[shell 命令替换](https://tldp.org/LDP/Bash-Beginners-Guide/html/sect_03_04.html)将密码字符编码转换为 UTF-8 `curl`。

注意：我在这里使用了`` ... ``评估而不是`${ ... }`因为如果密码包含字符，它不会失败`!`... [shells love `!`characters ;-)]

[非 ASCII](https://de.wikipedia.org/wiki/American_Standard_Code_for_Information_Interchange)字符的情况说明：

```
echo -n 'zz<zz§zz$zz-zzäzzözzüzzßzz' | iconv -f ISO-8859-1 -t UTF-8 
```

* * *

## 回答 #7

> 赞同：-2
> 
> 时间：2011-09-29T03:01:03.970

我可能完全无知，但是我在寻找问题时来到这篇文章，同时在 ajax 调用中发送 UTF8 字符串作为标头。

我可以通过在发送之前在 Base64 中编码字符串来解决我的问题。这意味着您可以在提交之前使用一些简单的 JS 将表单转换为 base64，这样就可以将其转换回服务器端。

这个简单的工具让我可以将 utf8 字符串作为简单的 ASCII 发送。我发现这要归功于这个简单的句子：

> base64（这种编码旨在使二进制数据能够通过非 8 位干净的传输层进行传输）。[http://www.webtoolkit.info/javascript-base64.html](http://www.webtoolkit.info/javascript-base64.html)

我希望这会有所帮助。只是想回馈社会一点点！

# c# - 是因为 CLR 或 GetHashCode() 方法的字符串池？

> ID：702634
> 
> 赞同：1
> 
> 时间：2009-03-31T19:20:26.620
> 
> 标签：c#, string

是因为 CLR 的字符串池还是两个字符串的 GetHashCode() 方法返回相同的值？

```
string s1 = "xyz";
string s2 = "xyz";
Console.WriteLine(" s1 reference equals s2 : {0}", object.ReferenceEquals(s1, s2)); 
```

控制台写道：**“s1 引用等于 s2：真”**

我相信，这不是因为 GetHashCode() 为两个字符串实例返回相同的值。因为，我使用自定义对象进行了测试，并重写了 GetHasCode() 方法以每次都返回一个常量。此对象的两个单独实例在引用中不相等。

请让我知道，幕后发生了什么。

感谢 123 开发者

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2009-03-31T19:21:51.653

这听起来像[字符串实习](http://en.wikipedia.org/wiki/String_intern_pool)——一种只存储一个字符串副本的方法。它要求字符串是您正在处理的语言中的不可变类型，而 .Net 满足这一要求并使用字符串实习。

在字符串实习中，字符串“xyz”存储在实习池中，每当您在内部说“xyz”时，它都会引用池中的条目。这可以通过只存储一次字符串来节省空间。因此，“xyz”==“xyz”的比较将被解释为 [pointer to 34576] == [pointer to 34576] 这是真的。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2009-03-31T19:29:53.367

这肯定是由于字符串实习。将引用与 进行比较时，*永远不会*计算哈希码`object.ReferenceEquals`。

从 C# 规范，第 2.4.4.5 节：

> 每个字符串文字不一定会产生一个新的字符串实例。当根据字符串相等运算符（第 7.9.7 节）等效的两个或多个字符串文字出现在同一程序中时，这些字符串文字引用相同的字符串实例。

请注意，在这种情况下，字符串*常量表达式*算作文字，因此：

```
string x = "a" + "b";
string y = "ab"; 
```

可以保证`x`and 也`y`引用相同的对象（即它们是相同的引用）。

顺便说一句，当规范说“程序”时，它实际上意味着“组装”。不同程序集中相同字符串的行为取决于诸如`CompilationRelaxations.NoStringInterning`精确的 CLR 实现和执行时间情况（例如程序集是否为 ngen'd）。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2009-03-31T19:31:34.533

它类似于字符串池，但它不是在运行时完成，而是在编译时完成。

程序集中的任何字符串文字只存在一次。编译器对字符串文字“xyz”的所有出现使用相同的常量字符串。由于字符串是不可变的（您永远不能更改字符串实例的值），编译器可以安全地使用相同的字符串实例来进行单独的字符串引用。

如果您改为在运行时创建一个字符串，您将获得一个单独的实例：

```
string s1 = "xyz";

string s2 = "xy";
s2 += "z";

Console.WriteLine("s1 ref = s2 : {0}", object.ReferenceEquals(s1, s2)); 
```

输出：

```
s1 ref = s2 : False 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-03-31T19:31:29.807

完全同意[汤姆的回答](https://stackoverflow.com/questions/702634/is-it-because-of-string-pooling-by-clr-or-by-the-gethashcode-method/702643#702643)...

摘自[CIL 规范](http://download.microsoft.com/download/D/C/1/DC1B219F-3B11-4A05-9DA3-2D0F98B20917/Partition%20III%20CIL.doc) *（第 126 页）*：

> CLI 保证两个 ldstr 指令的结果引用两个具有相同字符序列的元数据标记，返回完全相同的字符串对象（称为“字符串实习”的过程）。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2009-03-31T19:37:33.707

字符串实习与它无关。

我会非常惊讶地发现 .NET/C# 编译器隐式调用 Intern，在运行时检查匹配字符串对 CPU 的压力太大。

# python - Django admin - 内联内联（或一次编辑三个模型）

> ID：702637
> 
> 赞同：53
> 
> 时间：2009-03-31T19:20:51.750
> 
> 标签：python, django, django-models, django-admin, inlines

我有一组看起来像这样的模型：

```
class Page(models.Model):
    title = models.CharField(max_length=255)

class LinkSection(models.Model):
    page = models.ForeignKey(Page)
    title = models.CharField(max_length=255)

class Link(models.Model):
    linksection = models.ForeignKey(LinkSection)
    text = models.CharField(max_length=255)
    url = models.URLField() 
```

和一个看起来像这样的 admin.py：

```
class LinkInline(admin.TabularInline):
    model = Link
class LinkSectionInline(admin.TabularInline):
    model = LinkSection
    inlines = [ LinkInline, ]
class PageAdmin(admin.ModelAdmin):
    inlines = [ LinkSectionInline, ] 
```

我的目标是获得一个管理界面，让我可以在一页上编辑所有内容。这种模型结构的最终结果是，事物被生成为一个看起来或多或少类似于的视图+模板：

```
<h1>{{page.title}}</h1>
{% for ls in page.linksection_set.objects.all %}
<div>
    <h2>{{ls.title}}</h2>
    <ul>
         {% for l in ls.link_set.objects.all %}
        <li><a href="{{l.url}}">{{l.title}}</a></li>
         {% endfor %}
    </ul>
</div>
{% endfor %} 
```

正如我所料，我知道 Django 管理员中的 inline-in-an-inline 技巧失败了。有谁知道允许这种三级模型编辑的方法？提前致谢。

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2009-08-26T05:18:15.580

您[需要](http://docs.djangoproject.com/en/dev/ref/contrib/admin/#template)为. [_](http://docs.djangoproject.com/en/dev/ref/contrib/admin/#form) _`LinkSectionInline`

像这样的东西应该适用于表格：

```
LinkFormset = forms.modelformset_factory(Link)
class LinkSectionForm(forms.ModelForm):
    def __init__(self, **kwargs):
        super(LinkSectionForm, self).__init__(**kwargs)
        self.link_formset = LinkFormset(instance=self.instance, 
                                        data=self.data or None,
                                        prefix=self.prefix)

    def is_valid(self):
        return (super(LinkSectionForm, self).is_valid() and 
                    self.link_formset.is_valid())

    def save(self, commit=True):
        # Supporting commit=False is another can of worms.  No use dealing
        # it before it's needed. (YAGNI)
        assert commit == True 
        res = super(LinkSectionForm, self).save(commit=commit)
        self.link_formset.save()
        return res 
```

（这只是从我的脑海中浮现出来，没有经过测试，但它应该让你朝着正确的方向前进。）

您的模板只需要适当地呈现表单和 form.link_formset。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2014-09-28T18:02:17.497

[Django-nested-inlines](https://pypi.python.org/pypi/django-nested-inlines/0.1)就是为此而构建的。用法很简单。

```
from django.contrib import admin
from nested_inlines.admin import NestedModelAdmin, NestedStackedInline, NestedTabularInline
from models import A, B, C

class MyNestedInline(NestedTabularInline):
    model = C

class MyInline(NestedStackedInline):
    model = B
    inlines = [MyNestedInline,]

class MyAdmin(NestedModelAdmin):
    pass

admin.site.register(A, MyAdmin) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-04-04T14:05:51.500

我的建议实际上是改变你的模型。为什么不`ForeignKey`参加`Link`？`LinkSection`或者，如果它不是 OneToMany，也许是一个`ManyToMany`字段？管理界面将免费生成。当然，如果链接在逻辑上与链接部分没有任何关系，我不建议这样做，但也许它们有关系？如果他们不这样做，请解释预期的组织是什么。（例如，每个部分 3 个链接是固定的还是任意的？）

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-08-25T17:29:16.367

您可以创建一个类似于 TabularInline 或 StackedInline 的新类，该类本身能够使用内联字段。

或者，您可以专门为您的模型创建新的管理模板。但这当然推翻了管理界面的漂亮功能。

# c - 需要在 C 中使用自定义 Linux/UNIX 命令行实用程序“cal”提示

> ID：702639
> 
> 赞同：0
> 
> 时间：2009-03-31T19:21:09.067
> 
> 标签：c, linux, operating-system, system

好的，我需要让这个程序`cal`并排显示“” 3 个月（前一个月和后一个月），而不是在任何 Linux/UNIX 中仅显示一个月。我通过使用 " `system(customCommand)`" 三次来显示 3 个日历；但它不是并排的。

我得到了一些使用以下系统调用的提示：

```
close(..) pipe(..) dup2(..) read(..) and write(..) 
```

我的问题是我应该从什么开始？我需要创建子进程而不是捕获它`pipe(..)`吗？

如何并排显示三个日历。

前任。

```
 February 2009          March 2009             April 2009
 S  M Tu  W Th  F  S    S  M Tu  W Th  F  S    S  M Tu  W Th  F  S
 1  2  3  4  5  6  7    1  2  3  4  5  6  7             1  2  3  4
 8  9 10 11 12 13 14    8  9 10 11 12 13 14    5  6  7  8  9 10 11
15 16 17 18 19 20 21   15 16 17 18 19 20 21   12 13 14 15 16 17 18
22 23 24 25 26 27 28   22 23 24 25 26 27 28   19 20 21 22 23 24 25
                       29 30 31               26 27 28 29 30 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2009-03-31T19:38:36.730

假设您想自己编写而不是使用“cal -3”，我会做什么（在伪代码中）：

```
popen three calls to "cal" with the appropriate args

while (at least one of the three pipes hasn't hit EOF yet)
{
  read a line from the first if it isn't at EOF
  pad the results out to a width W, print it
  read a line from the second if it isn't at EOF
  pad the results out to a width W, print it
  read a line from the third if it isn't at EOF
  print it
  print "\n"
}

pclose all three. 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2009-03-31T19:45:35.387

如果“cal -3”不起作用，只需使用粘贴 :)

```
$ TERM=linux setterm -regtabs 24
$ paste <(cal 2 2009) <(cal 3 2009) <(cal 4 2009)
    febbraio 2009            marzo 2009              aprile 2009
do lu ma me gi ve sa    do lu ma me gi ve sa    do lu ma me gi ve sa
 1  2  3  4  5  6  7     1  2  3  4  5  6  7              1  2  3  4
 8  9 10 11 12 13 14     8  9 10 11 12 13 14     5  6  7  8  9 10 11
15 16 17 18 19 20 21    15 16 17 18 19 20 21    12 13 14 15 16 17 18
22 23 24 25 26 27 28    22 23 24 25 26 27 28    19 20 21 22 23 24 25
                        29 30 31                26 27 28 29 30

$ 
```

（`setterm` [忽略](http://git.kernel.org/?p=utils/util-linux-ng/util-linux-ng.git;a=blob;f=misc-utils/setterm.c;hb=HEAD#l1273) `-regtabs`除非`TERM=linux`或`TERM=con`。）

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2009-03-31T19:32:11.613

做就是了

```
cal -3 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2009-03-31T19:33:27.697

这不起作用吗？

`cal -3`

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2009-03-31T19:33:28.427

好的，怎么样`cal -3`？

`cal -3 12 2120`使它成为一个特殊的月份和年份，一个之前和一个之后。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2009-03-31T19:32:49.287

我将为此使用的方法是捕获输出，将其分成几行，然后将这些行彼此相邻打印出来。不过，我可能会用 Perl 而不是 C 来做。

或者只使用 cal -3，如果你的 cal 有的话。

# c++ - 不同类型的 C++ 对称二元运算符

> ID：702647
> 
> 赞同：6
> 
> 时间：2009-03-31T19:22:32.247
> 
> 标签：c++, operator-overloading, symmetric

我正在学习 C++，我想知道是否可以深入了解创建适用于两种不同类型实例的二元运算符的首选方法。这是我为说明我的担忧而做的一个例子：

```
class A;
class B;

class A
{
    private:
        int x;

    public:
        A(int x);

        int getX() const;

        int operator + (const B& b);
};

class B
{
    private:
        int x;

    public:
        B(int x);

        int getX() const;

        int operator + (const A& A);
};

A::A(int x) : x(x) {}

int A::getX() const { return x; }

// Method 1
int A::operator + (const B& b) { return getX() + b.getX(); }

B::B(int x) : x(x) {}

int B::getX() const { return x; }

// Method 1
int B::operator + (const A& a) { return getX() + a.getX(); }

// Method 2
int operator + (const A& a, const B& b) { return a.getX() + b.getX(); }

int operator + (const B& b, const A& a) { return a.getX() + b.getX(); }

#include <iostream>

using namespace std;

int main()
{
    A a(2);
    B b(2);

    cout << a + b << endl;

    return 0;
}; 
```

如果我想在这两种类型之间具有对称性，那么在上面的代码中哪种方法是最好的方法。选择一种方法而不是另一种方法是否有任何可能的危险？这是否因返回类型而异？请解释！谢谢！

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2009-03-31T19:28:10.470

最好的方法是定义（在任一类之外）`int operator+ (const A& a, const B& b)`，并在需要时使其成为两个类的友元函数。此外，定义

```
int operator+(const B& b, const A& a) {return a + b;} 
```

使其对称。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2009-03-31T19:26:31.020

这种方法的最大风险是人们倾向于将 + 视为对称运算符。这是写的方式，它不是（除非你的实现是相同的）。

至少，您应该将 + 作为外部二元运算符（而不是成员）重载，然后多次重载它。

但是，您必须小心，以确保没有任何事情变得模棱两可。

你能解释一下你想做什么吗？我想不出有很多不同类型的情况下，拥有对称异构运算符是有意义的。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-03-31T19:38:57.183

方法 2 的主要论点是您可以在两个操作数上进行隐式类型转换，而不仅仅是第二个。这可能会在某个地方避免混乱。

说到这一点，您的示例代码通过两个类上的 1-arg 构造函数定义了从 int 到 A 和从 int 到 B 的隐式转换。这可能会导致以后产生歧义。但是，如果您为了简洁而省略了“显式”，那就足够了。

不过，我同意 Uri 的警告：如果您发现自己这样做，您可能正在编写一个其他人会感到困惑的 API。为什么 A 加 B 是 int ？添加 a 和 b，而不是自己调用 getX 并添加结果，真的让用户更容易吗？

是因为用户非常清楚 A 和 B 是整数的包装器吗？如果是这样，那么另一种选择是通过运算符 int() 公开从 A 到 int 和从 B 到 int 的转换。然后 a+b 将出于合理的原因返回一个 int ，并且您还将获得所有其他算术运算符：

```
#include <iostream>

struct A {
    int x;
    explicit A(int _x) : x(_x) {}
    operator int() {
        return x;
    }
};

struct B {
    int x;
    explicit B(int _x) : x(_x) {}
    operator int() {
        return x;
    }
};

int main() {
    A a(2);
    B b(2);
    std::cout << a + b << "\n";
    std::cout << a - b << "\n";
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2009-04-01T06:23:39.147

我在评论中读到您的预期用途是添加向量和矩阵。也许你应该考虑只使用向量是一维矩阵的矩阵。然后你只剩下一种类型和一组运算符：

```
matrix operator*( matrix const& a, matrix const& b );
matrix operator+( matrix const& a, matrix const& b ); // and so on 
```

如果要保留向量类，则应考虑是否还需要转置向量（也许转置只是向量的内部属性）。

这组操作并不是真正对称的：

> ```
> vector * matrix = vector
> matrix * vector_t = vector_t
> matrix * matrix = matrix
> vector_t * vector = matrix
> vector * vector_t = int 
> ```

并且您应该提供这三个操作（假设转置是向量的属性）：

```
vector operator*( vector const& v, matrix const& m );
vector operator*( matrix const& m, vector const& v );
matrix operator*( matrix const& m1, matrix const& m2 );
matrix operator*( vector const& v1, vector const& v2 ); // possibly 1x1 matrix, you cannot overload changing only return value 
```

如果可能，所有功能都是免费的。即使上面的集合不是对称的，现实世界也不是对称的，你的用户会期望它。

# c# - 如何从 Outlook.Application.ActiveExplorer.CurrentFolder 创建 Outlook.Folder 对象

> ID：702648
> 
> 赞同：1
> 
> 时间：2009-03-31T19:22:49.920
> 
> 标签：c#, outlook, vsto, mapi

我有这个“简单”的 Outlook 对象：

```
Outlook.Explorer olExplorer = this.Application.ActiveExplorer(); 
```

在“ThisAddin_StartUp”中，我将*olExplorer.FolderSwitch*事件注册到函数 olExplorer_FolderSwitch()。我必须从当前文件夹创建一个 Outlook 文件夹对象：

```
Outlook.Folder f = olExplorer.CurrentFolder as Outlook.Folder; 
```

但是：属性 "CurrentFolder" 属于 MAPIFolder 类型，不能用作*Outlook.Folder*。如何将 CurrentFolder-Property“投射”到 Outlook.Folder？- 不丢失事件处理程序？如果我做这个简单的转换，对象*f*将不会触发事件 BeforeItemMove - 因为*f*是 NULL 而 olExplorer.CurrentFolder 不是

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-05-21T14:33:01.050

我还没有找到一个简单的方法。您可以从文件夹会话中找到 Outlook.Folder。

如果您比较 EntryID，您将获得正确的文件夹。

```
Outlook.Folders olFolders = OutlookApp.Session.Folders;

for (int i = 1; i <= olFolders.Count; i++)
{
   if (olFolders[i].EntryID == olExplorer.CurrentFolder.EntryID)
   {
      // folder found assign and use it.
   }
} 
```

注意从 1 开始并计数等于或小于以获取所有文件夹。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-01-04T15:01:10.823

有简单的方法将 MAPIFolder 转换为 Outlook.Folder 尝试显式转换：

```
Outlook.Explorer olExplorer = this.Application.ActiveExplorer();
Outlook.Folder f = (Outlook.Folder)olExplorer.CurrentFolder; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-04-07T18:47:00.130

我真的不*明白*这个问题，因为根据文档 Explorer.CurrentFolder 返回 Outlook.Folder 类型的对象，而不是 MAPIFolder。我个人没有做过任何 VSTO（也没有特定于 2007）的开发，但你确定你没有混淆不同版本的对象模型吗？

无论如何，Outlook.Folder 和 MAPIFolder 共享 EntryID 和 StoreID 属性。[您可以使用它们来使用NameSpace.GetFolderFromID](http://msdn.microsoft.com/en-us/library/bb219901.aspx)查找相应的 Outlook.Folder 。有问题的命名空间是通过 Application.GetNamespace("MAPI") 获取的。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-01-05T06:41:48.150

Outlook.Folder 与 Outlook.MAPIFolder 相同。

# c++ - 让模板参数成为朋友？

> ID：702650
> 
> 赞同：47
> 
> 时间：2009-03-31T19:23:02.510
> 
> 标签：c++, templates, friend

例子：

```
template<class T>
class Base {
public:
    Base();
    friend class T;
}; 
```

现在这不起作用......有没有办法做到这一点？

我实际上正在尝试制作这样的普通类封口机：

```
class ClassSealer {
private:
   friend class Sealed;
   ClassSealer() {}
};
class Sealed : private virtual ClassSealer
{ 
   // ...
};
class FailsToDerive : public Sealed
{
   // Cannot be instantiated
}; 
```

我在这个网站的某个地方找到了这个例子，但我找不到它......（[在这里](https://stackoverflow.com/questions/656224/when-should-i-use-c-private-inheritance/656523#656523)）

我知道还有[其他方法](http://www.gamedev.net/reference/programming/features/cppseal/)可以做到这一点，但现在我很好奇你是否真的可以做这样的事情。

* * *

## 回答 #1

> 赞同：48
> 
> 时间：2009-03-31T19:35:43.820

它在标准中被明确禁止，即使某些版本的 VisualStudio 确实允许它。

C++ 标准 7.1.5.3 详细类型说明符，第 2 段

> 3.4.4 描述了如何在详细类型说明符中对标识符进行名称查找。如果标识符解析为类名或枚举名，则详细类型说明符将其引入声明中，就像简单类型说明符引入其类型名一样。如果标识符解析为 typedef-name 或模板类型参数，则详细说明的类型说明符格式错误。[注意：这意味着，在具有模板类型参数 T 的类模板中，声明 *朋友类 T*；格式不正确。]

我认为上面的代码是一种密封（禁止扩展）类的模式。还有另一种解决方案，它不会真正阻止扩展，但会标记无意中从类扩展。如[ADOBE 源库](http://stlab.adobe.com/group__adobe__final.html)中所示：

```
namespace adobe { namespace implementation {
template <class T>
class final
{
protected:
   final() {}
};
}}
#define ADOBE_FINAL( X ) private virtual adobe::implementation::final<T> 
```

用法：

```
class Sealed : ADOBE_FINAL( Sealed )
{//...
}; 
```

如果你真的强迫它，它允许扩展：

```
class SealBreaker : public Sealed, ADOBE_FINAL( Sealed )
{
public:
   SealBreaker() : adobe::implementation::final<Sealed>(), Sealed() {}
}; 
```

它将限制用户错误地这样做。

**编辑**：

即将推出的 C++11 标准确实允许您使用稍微不同的语法来处理类型参数：

```
template <typename T>
class A {
   // friend class T; // still incorrect: elaborate type specifier
   friend T;          // correct: simple specifier, note lack of "class"
}; 
```

* * *

## 回答 #2

> 赞同：22
> 
> 时间：2011-04-09T23:04:48.823

我发现了一个将模板参数声明为朋友的简单技巧：

```
template < typename T>
struct type_wrapper 
{ 
   typedef T type; 
}; 

template < typename T> class foo 
{ 
  friend class type_wrapper < T>::type 
};   // type_wrapper< T>::type == T 
```

但是我不知道这如何有助于定义类密封器的替代版本。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2009-03-31T19:30:22.617

你真的需要这样做吗？如果您想阻止某人从您的类派生，只需添加注释并使析构函数成为非虚拟的。

# c++ - C++联合数组和变量？

> ID：702658
> 
> 赞同：13
> 
> 时间：2009-03-31T19:25:05.250
> 
> 标签：c++, unions

没有办法做这样的事情，在 C++ 中有吗？

```
union {
    {
        Scalar x, y;
    }
    Scalar v[2];
}; 
```

哪里`x == v[0]`和`y == v[1]`？

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2009-03-31T19:30:09.763

既然您使用的是 C++ 而不是 C，而且它们属于相同类型，为什么不直接将 xa 引用到 v[0] 并将 ya 引用到 v[1]

* * *

## 回答 #2

> 赞同：16
> 
> 时间：2009-03-31T19:29:47.517

怎么样

```
union {
    struct {
        int x;
        int y;
    };
    int v[2];
}; 
```

编辑：

```
union a {
    struct b { int first, second; } bee;
    int v[2];
}; 
```

丑陋，但这样更准确

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2009-03-31T20:57:30.927

试试这个：

```
template<class T>
struct U1
{
    U1();
    T   v[2];
    T&  x;
    T&  y;
};

template<class T>
U1<T>::U1()
    :x(v[0])
    ,y(v[1])
{}

int main()
{
    U1<int>   data;

    data.x  = 1;
    data.y  = 2;
} 
```

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2010-09-27T08:01:07.030

我以前用过这样的东西。我不确定它是否 100% 符合标准，但对于我需要使用它的任何编译器来说似乎都可以。

```
struct Vec2
{
  float x;
  float y;
  float& operator[](int i) { return *(&x+i); }
}; 
```

如果需要（您可能应该想要），您可以向 operator[] 添加边界检查等，并且您也可以提供 operator[] 的 const 版本。

如果您担心填充（并且不想添加适当的平台特定位来强制取消填充结构），那么您可以使用：

```
struct Vec2
{
  float x;
  float y;
  float& operator[](int i) {
    assert(i>=0);
    assert(i<2);
    return (i==0)?x:y;
  }
  const float& operator[](int i) const {
    assert(i>=0);
    assert(i<2);
    return (i==0)?x:y;
  }
}; 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2020-03-18T18:01:54.813

我一直在寻找类似的东西，最终想出了一个解决方案。

我一直在寻找一个数据存储对象，我可以将其用作值数组和单个值（用于最终用户编写 Arduino 库的灵活性）。

这是我想出的：

```
class data{
    float _array[3];

    public:
    float& X = _array[0];
    float& Y = _array[1];
    float& Z = _array[2];

    float& operator[](int index){
        if (index >= 3) return _array[0]; //Make this action whatever you want...
        return _array[index];
    }
    float* operator&(){return _array;}
};

int main(){
    data Test_Vector;
    Test_Vector[0] = 1.23; Test_Vector[1] = 2.34; Test_Vector[2] = 3.45;

    cout<<"Member X = "<<Test_Vector.X;
    cout<<"Member Y = "<<Test_Vector.Y;
    cout<<"Member Z = "<<Test_Vector.Z;

    float* vector_array = &Test_Vector;

    cout<<"Array = {"<<vector_array[0]<<", "<<vector_array[1]<<", "<<vector_array[2]<<"}";
} 
```

由于运算符重载，我们可以像使用数组一样使用数据对象，并且可以在函数调用中使用它来传递引用（就像数组一样）！

*如果有更多 C++ 经验的人有更好的方法来应用这个最终产品，我很乐意看到它！*

编辑：将代码更改为更加跨平台友好

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2020-04-29T19:12:06.280

鉴于你的例子：

```
union
{
    struct
    {
        Scalar x, y;
    };

    Scalar v[2];
}; 
```

正如其他人所指出的，一般来说，该标准不保证 x 和 y 之间没有填充，实际上编译器在结构中插入填充是非常常见的行为。

另一方面，使用以下解决方案：

```
struct U
{
    int   v[2];
    int&  x;
    int&  y;
};

U::U()
    : x(v[0])
    , y(v[1])
{} 
```

我不喜欢的主要是我不得不提到 x, y*两次*。对于我有不止几个元素（比如 10 个）的情况，这变得更不可读并且更难维护 - 例如，如果你想更改 x,y 的顺序，那么你也必须更改下面的索引（当然不是强制性的，但内存中的顺序与字段顺序不匹配，不建议这样做）。此外，U 不能再是*POD*，因为它需要用户定义的构造函数。最后，x & y 引用会消耗额外的内存。

因此，我提出的（我可以接受的）折衷方案是：

```
struct Point
{
    enum CoordType
    {
        X,
        Y,
        COUNT
    };

    int coords[CoordType::COUNT];
};

typedef Point::CoordType PtCoord; 
```

有了这个，你可以这样做：

```
Point p;
for ( int i = 0; i < PtCoord::COUNT; i++ )
    p.coords[i] = 100;
std::cout << p.coords[PtCoord::X] << " " << p.coords[PtCoord::Y] << std::endl;

// 100 100 
```

有点复杂，但我更喜欢这个而不是参考建议。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2009-03-31T19:29:39.437

根据“标量”是什么，是的，您可以在 C++ 中做到这一点。语法几乎与您在示例中所写的完全一致（甚至可能完全正确，但我对联合感到生疏）。它与 C 相同，除了对可以在联合中的类型有限制（IIRC 它们必须具有默认构造函数）。这是相关的[维基百科文章](http://en.wikipedia.org/wiki/Union_(computer_science))。

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2020-12-01T15:38:48.033

使用 C++11，你有匿名联合和结构，它们只是将它们的定义导出到封闭范围，所以你可以这样做：

```
typedef int Scalar;
struct Vector
{
    union
    {
        struct
        {
            Scalar x, y;
        };
        Scalar v[2];
    };
}; 
```

# c# - HttpContext 的服务器端等价物？

> ID：702676
> 
> 赞同：2
> 
> 时间：2009-03-31T19:28:44.977
> 
> 标签：c#, asp.net, linq, linq-to-entities, httpcontext

我有一个当前使用当前 HttpContext 来存储 LINQ 数据上下文的 Web 应用程序。[根据Rick Strahl 的博客](http://www.west-wind.com/weblog/posts/246222.aspx)，基于每个用户的当前请求的上下文是持久的：

```
string ocKey = "ocm_" + HttpContext.Current.GetHashCode().ToString("x")  
Thread.CurrentContext.ContextID.ToString();

if (!HttpContext.Current.Items.Contains(ocKey))
{
    // Get new Data Context and store it in the HTTP Context
} 
```

但是，我有一些从 global.asax 文件执行的脚本，它们**没有**HttpContext。 **HttpContext.Current 是 NULL**，因为服务器是发出“请求”的服务器。

是否有可用于存储数据上下文的等效对象？所以我不必担心重新创建它和附加/分离对象？我只想在我的流程的整个生命周期中保留上下文。

**更新：**

我目前正在尝试在我的 DAL 助手类中使用静态变量。在第一次调用类中的一个方法时，DataContext 被实例化，并存储在静态变量中。在我的过程结束时，我调用另一个在 DataContext 上调用 Dispose 的方法，并将静态变量设置为 NULL。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2009-03-31T19:37:48.760

你能不能只为那些脚本专门使用一个静态变量？这将具有与`AppDomain`. 您可能应该仔细考虑任何并发问题，但这听起来像是保持价值的最简单方法。

（我刚刚检查过，虽然一个实例`HttpApplication`可用于服务多个请求，但每个实例一次只处理一个请求 - 这表明为并发请求处理创建了多个实例。我尚未对此进行验证，但是听起来确实将其保存在实例变量中并不安全。）

编辑：乔希的回答表明你希望这是每个线程。这对我来说听起来有点奇怪，因为除非您发生了*很多*这样的事件，否则您很可能只会看到它们在不同的线程上执行，从而使整个共享业务毫无意义。如果你真的想要那种东西，我建议只在`HttpApplication`-derived 类中使用一个实例变量 - 正是上面段落中描述的原因:)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-03-31T19:39:28.320

Why not use the current HttpContext? The scripts in your global.asax file are all the result of a request coming into the server, so there should be a context associated with that request which you can grab.

I don't understand the need for generating the key based on the hashcode or the thread. There is going to be a separate instance of HttpContext for each request that comes in, and that instance is going to be specific to the thread that is processing the request. Because of that, the key is pretty much worthless when it's based on the instance of HttpContext and the thread.

Also, how do you dispose of the DataContext when you are done? It implements IDisposable for a reason, so I would recommend against a shared instance like this.

* * *

**UPDATE**

In the comments, it indicates that there is a timer that is running that is executing the scripts. Instead of the timer, I would recommend setting up a Scheduled Task which will call a webservice or predetermined page on the site which will perform the task. Then you will always have an HttpContext to work with.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-03-31T19:40:45.417

HttpContext.Current is a static method and should be available from anywhere as long as the code is executing within the context of a request.

In your case your not executing within the context of a request, You could look at using Application.Cache but I would caution against holding a DataContext open. I am not very famillar with linq to entities, so I could be wrong, but generally caching data base related items such as connections is bad.

I would also recommend that you consider moving the logic out of your global.asax and to a windows service. This would let you have more control over these tasks, for example you can shut them down seperatley of the web site.

# Edit

As JS points out you could use a static variable. You could also define an instance variable marked with ThreadLocal attribute. This will give each thread its own copy of the variable, and can eliminate contention. Since you want each thread to have its own copy anyways.

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-03-31T19:45:24.763

Is there a reason why these need to be handled the same way as the other DataContexts? It seems to me that if the context is only needed inside the event handling routine, you shouldn't need to keep it around. Especially if it is in Application_Start (as per your comment), I wouldn't bother caching it anywhere -- just use it locally and pass it to the other methods as needed.

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2009-04-01T00:27:38.347

Set the DataContext as the state parameter when creating the timer. Based on the info you posted on the comments, it seems to me that your DataContext is more related to the timers than anything else.

Also avoid using the same DataContext for different timers, because you would end up with mixed modifications from the different timers. Also make sure your same timer logic isn't run twice, since it would cause the same i.e. too short period with no control.

# c# - 斑马条纹内置到字符串模板？

> ID：702719
> 
> 赞同：1
> 
> 时间：2009-03-31T19:41:42.947
> 
> 标签：c#, stringtemplate

在这个例子中，我在传入模板之前对代码进行了条带化​​，我只是想确保我没有错过一些已经内置的 stringtemplate 功能。

```
使用系统；
使用 System.Linq；
使用 Antlr.StringTemplate；
使用 Microsoft.VisualStudio.TestTools.UnitTesting；

命名空间测试
{
    [测试类]
    公共类 RandomTests
    {
        [测试方法]
        公共无效 has_a_table()
        {
            var 用户 = 新 [] {
                新{姓氏=“Doe”，名字=“约翰”，年龄=30}，
                新{姓=“史密斯”，名字=“鲍勃”，年龄=28}
            };

            var 列 = 新 [] {
                新{模板=“$it.LastName$”，头=“姓氏”}，
                新{模板=“$it.FirstName$”，头部=“名字”}
            };

            var tableTemplate = @"
<表格>
    <头>
        <tr>
            <th scope=""col"">索引</th>
            $columns: { column |<th scope=""col"">$colum n.Head$</th>}$
        </tr>
    </thead>
    <tbody>
        $items:{ item |<tr$if(item.Stripe)$ class=""alt""$endif$><td>$i$</td>$item.Item:row()$</tr> }$
    </tbody>
</table>
";
            var rowTemplate = string.Join
            (
                "",
                （从列中的列
                 选择
                    "<td>" + 列.模板 + "</td>"
                ).ToArray()
            );

            var templates = new StringTemplateGroup("table-template");

            templates.DefineTemplate("table", tableTemplate);
            模板.DefineTemplate("行", rowTemplate);

            var template = templates.GetInstanceOf("table");

            *var items = 用户
                .Select((item, index) => new { Stripe = index % 2 == 0, Item = item })
                .ToArray();*

            template.SetAttribute("columns", columns);
            template.SetAttribute("items", items);

            var 实际 = template.ToString();

            Assert.IsNotNull(实际);
        }

```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-03-31T21:50:59.253

我不是 StringTemplate 方面的专家，但我[在邮件列表中发现了一个线程，](http://www.antlr.org/pipermail/stringtemplate-interest/2008-May/001471.html)它似乎提供了一个比您现在拥有的更简单的解决方案。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-23T14:21:59.467

有一个不错的帖子，也许你可以找到最简单的解决方案：

[使用 StringTemplate 4 的可本地化文本模板引擎](http://netmvc.blogspot.com/2012/04/localizable-text-template-engine-using_23.html)

# ruby-on-rails - 获取 Rails 中 STI 类的基类的路由

> ID：702728
> 
> 赞同：8
> 
> 时间：2009-03-31T19:44:26.357
> 
> 标签：ruby-on-rails, ruby

假设我有一个带有 3 个模型的 Rails 应用程序，Person、Place 和 Thing。假设 Thing 使用单表继承，因此有 FancyThing 和 ScaryThing 子类。然后是用 定义的路线`map.resources :people, :places, :things`。所以 FancyThings 和 ScaryThings 没有控制器，ThingsController 可以处理这两种类型。

现在说我需要有代码来显示任何有链接的列表。如果我认为我有此代码：

```
<% @items.each do |item| %>
  <%= link_to item.name, item %>
<% end %> 
```

如果 item 是 Person 或 Place，这可以正常工作，`polymorphic_path`负责生成正确的路线。但是如果 item 是 FancyThing 或 ScaryThing，这会爆炸，因为它会尝试使用`fancy_thing_path`，而没有路由。我想以某种方式使用它`thing_path`。理想情况下，Thing 和/或其子类上会有一个方法，以某种方式指示子类应该使用基类来生成路由。有一个优雅的解决方案吗？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2009-09-21T10:56:11.327

这可以解决问题：

```
<% @items.map {|i| if i.class < Thing then i.becomes(Thing) else i end}.each do |item| %>
  <%= link_to item.name, item %>
<% end %> 
```

这使用 ActiveRecord 函数“成为”将 Thing 的所有子类“向上转换”到 Thing 基类。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2009-04-12T23:27:59.060

尝试使用

```
map.resources :things
map.resources :fancy_things, :controller => 'things'
map.resources :scary_things, :controller => 'things' 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-05-13T15:19:57.163

没有正确答案，但至少我可以使用非 DRY 代码处理这个问题：

map.resources :things, :has_many => :stuffs map.resources :fancy_things, :controller => 'things', :has_many => :stuffs map.resources :scary_things, :controller => 'things', :has_many => :东西

希望这个问题能很快得到纠正，因为我想看到 fancy_things 只由 :things 控制器管理。使用这些路由，您将以以下网址结尾： /fancy_things/1 而您可能想要 /things/1

# php - 会话对象、用户对象和登录控制器之间的分界线

> ID：702730
> 
> 赞同：0
> 
> 时间：2009-03-31T19:44:56.637
> 
> 标签：php, oop, authentication, session

我正在开发自己的 PHP 框架，并且正在尝试更多地“按部就班”地做事。

我想建立登录系统。我已经做过很多次了，但现在我只想确认/获得一些关于系统的反馈。

我知道我们需要...

*   会话对象
*   用户对象
*   登录控制器

我的问题是，谁拥有什么权力？

这是我的想法——当你提交你的 un/pw 时，它显然会转到登录控制器。我们需要在用户数据库中查找 un/pw 组合，因此我觉得这应该在用户对象中完成... $User->authenticate($un, $pw)。

我应该做的所有事情都返回真或假。然后 LoginController 应该告诉 Session 对象创建一个会话 ... $session->create()。但除了我之外，我想知道用户和会话对象是否应该更紧密地结合在一起，而不是依赖于控制器。

求意见，先谢谢了。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-03-31T22:35:44.090

在我看来，用户对象不应该知道持久性（会话）或应用程序（控制器）。它应该关心的只是代表一个用户并处理与用户相关的功能，如身份验证。

控制器是关于应用程序逻辑的，会话是应用程序的一部分。我觉得一旦通过身份验证，打开会话并存储用户对象以供以后使用是控制器的任务。

Ps 你发布了你的框架吗？Github吧！:-D

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-03-31T20:43:19.197

我对这样一个框架的想法：

在页面加载时初始化会话对象，并将其设置为默认为“访客帐户”。

在此初始化后，让您的会话对象查找会话标识符（来自 cookie？）并根据您的会话跟踪后端验证该 ID，无论是数据库还是您正在使用的任何东西。

如果会话 ID 有效，您将获得相关的用户 ID，然后您可以使用它来填充用户对象。

登录控件应该只对登录用户进行身份验证，并通过在后端绑定会话 ID 和用户 ID 并将会话 ID 写入 cookie 来初始化会话。

...然而，更有效的方法是对用户进行一次身份验证并将用户 ID 写入服务器设置的数字签名 cookie，并信任客户端返回的所有有效 cookie。这将使会话管理变得如此轻松，并节省往返数据库。

# sharepoint - 如何在 SharePoint 中安排报表在当月的最后一天运行？

> ID：702734
> 
> 赞同：1
> 
> 时间：2009-03-31T19:45:38.290
> 
> 标签：sharepoint, reporting-services, scheduled-tasks

我在 SharePoint 中有几个由 SQL Server Reporting Services 在 SharePoint 集成模式下提供的报表。其中一些报告需要在当月的最后一天自动生成。虽然 SSRS 本身具有“一个月的最后一天”选项，但 SharePoint 在其计划选项中没有此功能。

添加此功能的最佳方法是什么？我不介意编写代码、安装某些东西或启用我不知道的东西。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-04-01T02:22:43.903

IMO，我会考虑写一个 Timer Job。我为每两周一次的数据导入编写了一个。我相信你可以用它来生成 EOM 报告。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-04-01T12:21:39.847

在Google 上搜索**SPMonthlySchedule**（SharePoint 对象模型中的计时器作业类）。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-04-13T10:26:43.267

SPMonthlySchedule 只能在特定日期运行。Afaik 您无法将其配置为在该月的最后一天运行。

我会创建一个每天运行的计时器作业，如果今天是本月的最后一天，我会做报告。[使用SPDailySchedule](http://msdn.microsoft.com/en-us/library/microsoft.sharepoint.spdailyschedule.aspx)创建一个SPJobDefinition[来](http://msdn.microsoft.com/en-us/library/microsoft.sharepoint.administration.spjobdefinition.aspx)实现此目的。

[这](http://saftsack.fs.uni-bayreuth.de/~dun3/archives/visual-studio-2005-project-template-for-sharepoint-2007-timer-jobs/142.html)是一个方法。

```
if(DateTime.Now.Month != DateTime.Now.AddDays(1).Month)
{
 //Do report
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2011-08-30T22:37:27.867

这已经很老了，但我也遇到了同样的问题。

一个简单的方法是为报告设置 3 个订阅。

1 月 31 日通过电子邮件发送报告 1 月 3 日 5 月 7 月 8 月 10 月 12 月 4 月 30 日通过电子邮件发送报告 6 月 9 日 11 月通过电子邮件发送报告 28 日通过电子邮件发送报告二月

请注意，这没有考虑闰年。

# iphone - 你能告诉 UIWebView 使用白色指示器样式吗？

> ID：702737
> 
> 赞同：8
> 
> 时间：2009-03-31T19:46:44.137
> 
> 标签：iphone, cocoa-touch

我遇到了这样一种情况，即我有使用深色背景的应用程序内 HTML 文档，但 UIWebView 的默认滚动指示器在该背景中丢失了。下面是一个例子：

[![UIWebView 深色滚动条的图像](https://i.stack.imgur.com/SLzQ4.jpg)](https://i.stack.imgur.com/SLzQ4.jpg)
[（来源：[sunsetlakesoftware.com](http://www.sunsetlakesoftware.com/sites/default/files/so-webview.jpg)）]

使用 UIScrollView（其行为类似于 UIWebView），您可以将 indicatorStyle 属性设置为 UIScrollViewIndicatorStyleWhite，这会产生所需的行为：

[![替代文字](https://i.stack.imgur.com/DV5RJ.jpg)](https://i.stack.imgur.com/DV5RJ.jpg)
[（来源：[sunsetlakesoftware.com](http://www.sunsetlakesoftware.com/sites/default/files/so-scrollview.jpg)）]

我似乎在 UIWebView 的公开界面中找不到类似的属性。是否有 CSS 技巧或其他方式将滚动指示器强制为更轻的样式？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-01-08T06:11:29.533

从 iOS 5.0 开始，现在可以通过访问 'scrollview' 属性来自定义 Web 视图的滚动行为以实现所需的功能：

```
webView.scrollView.indicatorStyle = UIScrollViewIndicatorStyleWhite; 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2011-07-14T19:57:18.677

如果您确实想扫描子视图并在将来发生某些变化时尝试优雅地失败，这当前有效：

```
 //set a white scroll bar
    for (UIView *subview in [webView subviews]) {
        if ([subview isKindOfClass:NSClassFromString(@"UIScroller")] || [subview isKindOfClass:NSClassFromString(@"UIScrollView")]) {
            if ([subview respondsToSelector:@selector(setIndicatorStyle:)]) {
                [(UIScrollView *)subview setIndicatorStyle:UIScrollViewIndicatorStyleWhite];
            }
            break;
        }
    } 
```

尽管如果 setIndicatorStyle: 更改为期望非枚举值，将来事情仍然可能会中断......但我怀疑这会发生*。*

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-03-31T22:01:40.477

扫描子视图并测试 UIScrollView。然后，您可以以编程方式设置指标。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2009-04-01T09:29:26.907

2.x SDK 中没有用于此的公共 API。在 3.0 中提交一个错误/案例/雷达要求它。

# apache-flex - 在 Adob e AIR 中将图像序列显示为电影的最佳方式

> ID：702743
> 
> 赞同：0
> 
> 时间：2009-03-31T19:49:49.467
> 
> 标签：apache-flex, flash, video, air

我需要在 Adob​​e AIR 应用程序中将图像序列显示为电影 - 即将大量图像视为视频帧并显示结果。现在我将尝试简单地加载它们并在影片剪辑中显示，但这可能太慢了。任何先进的想法如何使它工作？图像位于硬盘驱动器或非常快的网络共享上，因此带宽应该足够了。它们可能有数千个，因此将所有内容预加载到内存中似乎不可行。

Adobe AIR 不是 100% 决定的，我愿意接受其他想法，如何足够快地为此目的创建跨平台桌面应用程序。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2009-04-01T01:10:32.737

如果图像不大但您有很多图像，则将序列分组在单个位图上可能会很有趣（à la [mipmap](http://en.wikipedia.org/wiki/Mipmap)）。通过这种方式，您可以加载一个位图，其中包含 50 个图像，形成 2 秒的 25 fps 视频播放。

这种方法在网上特别有用，因为您想限制导致缓慢的 ping 和握手的数量，但我认为它也可以用于优化加载、卸载和内存访问。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-03-31T19:57:02.663

您可以将图像控件作为电影帧，然后加载 BitmapData 对象的缓冲区。用进来的图像填充 BitmapData 对象，然后调用图像加载函数来加载缓冲区中的下一个图像。

```
private drawNextImage(bitmapData:BitmapData):void {
movieFrame.load(new Bitmap(bitmmapData));
} 
```

# sql-server - SQL Server如何从列中删除标识

> ID：702745
> 
> 赞同：20
> 
> 时间：2009-03-31T19:50:03.677
> 
> 标签：sql-server, sql-server-2005

有没有一种简单的方法可以从 SQL Server 2005 中的表中删除标识？

当我使用 Management Studio 时，它会生成一个脚本，该脚本创建一个没有身份的镜像表，复制数据，删除表，然后重命名镜像表等。这个脚本中有 5231 行，因为这个表/列有很多 FK关系。

运行一个简单的改变/丢弃我会感觉更舒服。有任何想法吗？

**编辑**
我想我将使用企业管理器中的 5,231 行脚本。但是，我将把它分解成更小的部分，我可以更好地运行和控制。该表“表现”很奇怪，如果您尝试删除 1 行（即使是您刚刚插入的行，它不在任何其他 FK 表中），您会收到以下错误：

```
delete MyTable where MyPrimaryKey=1234  

Msg 8621, Level 17, State 2, Line 1
    The query processor ran out of stack space during query optimization. Please simplify the query. 
```

毫无疑问，所有的FK。当我们进行这些模式和相关的应用程序更改时，我们将停止对我们的应用程序的所有访问并以单用户模式运行。但是，我们需要它快速运行，我需要知道它需要多长时间。我想我只需要测试，测试，测试。

* * *

## 回答 #1

> 赞同：33
> 
> 时间：2011-09-06T22:48:57.190

如果您使用的是 SQL Server 2005 或更高版本，则可以将其作为简单的元数据更改来执行（注意：**不需要**像我最初所说的那样支持分区的版本）。

示例代码无耻地从 Paul White 在[此 Microsoft Connect Item](http://connect.microsoft.com/SQLServer/feedback/details/252226/allow-enabling-and-disabling-of-a-columns-identity-property)上的解决方法中窃取。

```
USE tempdb;
GO
-- A table with an identity column
CREATE TABLE dbo.Source 
(row_id INTEGER IDENTITY PRIMARY KEY NOT NULL, data SQL_VARIANT NULL);
GO
-- Some sample data
INSERT dbo.Source (data)
VALUES (CONVERT(SQL_VARIANT, 4)),
        (CONVERT(SQL_VARIANT, 'X')),
        (CONVERT(SQL_VARIANT, {d '2009-11-07'})),
        (CONVERT(SQL_VARIANT, N'áéíóú'));
GO
-- Remove the identity property
BEGIN TRY;
    -- All or nothing
    BEGIN TRANSACTION;

    -- A table with the same structure as the one with the identity column,
    -- but without the identity property
    CREATE TABLE dbo.Destination 
    (row_id INTEGER PRIMARY KEY NOT NULL, data SQL_VARIANT NULL);

    -- Metadata switch
    ALTER TABLE dbo.Source SWITCH TO dbo.Destination;

    -- Drop the old object, which now contains no data
    DROP TABLE dbo.Source;

    -- Rename the new object to make it look like the old one
    EXECUTE sp_rename N'dbo.Destination', N'Source', 'OBJECT';

    -- Success
    COMMIT TRANSACTION;
END TRY
BEGIN CATCH
    -- Bugger!
    IF XACT_STATE() <> 0 ROLLBACK TRANSACTION;
    PRINT ERROR_MESSAGE();
END CATCH;
GO

-- Test the the identity property has indeed gone
INSERT dbo.Source (row_id, data)
VALUES (5, CONVERT(SQL_VARIANT, N'This works!'))

SELECT row_id,
        data
FROM    dbo.Source;
GO

-- Tidy up
DROP TABLE dbo.Source; 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2009-03-31T20:11:21.550

我不相信您可以直接删除该列的 IDENTITY 部分。您最好的选择可能是：

*   向表中添加另一个非标识列
*   将标识值复制到该列
*   删除原始身份列
*   重命名新列以替换原始列

如果标识列是键或其他约束的一部分，则需要删除这些约束并在上述操作完成后重新创建它们。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2009-03-31T20:10:56.280

您可以向表中添加一个不是标识列的列，复制数据，删除原始列，并将新列重命名为旧列并重新创建索引。

[这](http://www.sqlmag.com/Files/23/22081/Listing_03.txt)是一个显示示例的链接。仍然不是一个简单的改动，但它肯定比 5231 行要好。

# asp.net - 如何在 web 表单中包含部分视图

> ID：702746
> 
> 赞同：82
> 
> 时间：2009-03-31T19:50:12.023
> 
> 标签：asp.net, asp.net-mvc, webforms, partial-views

我正在编程的某些站点同时使用 ASP.NET MVC 和 WebForms。

我有一个部分视图，我想将其包含在网络表单中。部分视图有一些必须在服务器中处理的代码，因此使用 Response.WriteFile 不起作用。它应该在禁用 javascript 的情况下工作。

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：101
> 
> 时间：2009-07-02T12:26:18.443

我查看了 MVC 源代码，看看我是否可以弄清楚如何做到这一点。控制器上下文、视图、视图数据、路由数据和 html 渲染方法之间似乎存在非常紧密的耦合。

基本上为了实现这一点，您需要创建所有这些额外的元素。其中一些相对简单（例如视图数据），但有些更复杂 - 例如路由数据将考虑忽略当前的 WebForms 页面。

最大的问题似乎是 HttpContext - MVC 页面依赖于 HttpContextBase（而不是像 WebForms 那样的 HttpContext），虽然两者都实现了 IServiceProvider，但它们并不相关。MVC 的设计者经过深思熟虑决定不更改传统的 WebForms 以使用新的上下文库，但是他们确实提供了一个包装器。

这有效，并允许您将部分视图添加到 WebForm：

```
public class WebFormController : Controller { }

public static class WebFormMVCUtil
{

    public static void RenderPartial( string partialName, object model )
    {
        //get a wrapper for the legacy WebForm context
        var httpCtx = new HttpContextWrapper( System.Web.HttpContext.Current );

        //create a mock route that points to the empty controller
        var rt = new RouteData();
        rt.Values.Add( "controller", "WebFormController" );

        //create a controller context for the route and http context
        var ctx = new ControllerContext( 
            new RequestContext( httpCtx, rt ), new WebFormController() );

        //find the partial view using the viewengine
        var view = ViewEngines.Engines.FindPartialView( ctx, partialName ).View;

        //create a view context and assign the model
        var vctx = new ViewContext( ctx, view, 
            new ViewDataDictionary { Model = model }, 
            new TempDataDictionary() );

        //render the partial view
        view.Render( vctx, System.Web.HttpContext.Current.Response.Output );
    }

} 
```

然后在您的 WebForm 中，您可以执行以下操作：

```
<% WebFormMVCUtil.RenderPartial( "ViewName", this.GetModel() ); %> 
```

* * *

## 回答 #2

> 赞同：41
> 
> 时间：2014-07-21T14:06:52.303

花了一段时间，但我找到了一个很好的解决方案。Keith 的解决方案适用于很多人，但在某些情况下它并不是最好的，因为有时您希望您的应用程序**通过控制器**渲染视图的过程，而**Keith 的解决方案只是使用给定模型渲染视图**我'我在这里提出一个新的解决方案，它将运行正常的过程。

一般步骤：

1.  创建一个实用程序类
2.  使用虚拟视图创建虚拟控制器
3.  在您的`aspx`or`master page`中，调用实用程序方法来渲染部分传递控制器、视图以及要渲染的模型（作为对象），如果需要，

让我们在这个例子中仔细检查一下

1）创建一个名为的类`MVCUtility`并创建以下方法：

```
 //Render a partial view, like Keith's solution
    private static void RenderPartial(string partialViewName, object model)
    {
        HttpContextBase httpContextBase = new HttpContextWrapper(HttpContext.Current);
        RouteData routeData = new RouteData();
        routeData.Values.Add("controller", "Dummy");
        ControllerContext controllerContext = new ControllerContext(new RequestContext(httpContextBase, routeData), new DummyController());
        IView view = FindPartialView(controllerContext, partialViewName);
        ViewContext viewContext = new ViewContext(controllerContext, view, new ViewDataDictionary { Model = model }, new TempDataDictionary(), httpContextBase.Response.Output);
        view.Render(viewContext, httpContextBase.Response.Output);
    }

    //Find the view, if not throw an exception
    private static IView FindPartialView(ControllerContext controllerContext, string partialViewName)
    {
        ViewEngineResult result = ViewEngines.Engines.FindPartialView(controllerContext, partialViewName);
        if (result.View != null)
        {
            return result.View;
        }
        StringBuilder locationsText = new StringBuilder();
        foreach (string location in result.SearchedLocations)
        {
            locationsText.AppendLine();
            locationsText.Append(location);
        }
        throw new InvalidOperationException(String.Format("Partial view {0} not found. Locations Searched: {1}", partialViewName, locationsText));
    }       

    //Here the method that will be called from MasterPage or Aspx
    public static void RenderAction(string controllerName, string actionName, object routeValues)
    {
        RenderPartial("PartialRender", new RenderActionViewModel() { ControllerName = controllerName, ActionName = actionName, RouteValues = routeValues });
    } 
```

创建一个传递参数的类，我这里调用RendeActionViewModel（你可以在MvcUtility Class的同一个文件中创建）

```
 public class RenderActionViewModel
    {
        public string ControllerName { get; set; }
        public string ActionName { get; set; }
        public object RouteValues { get; set; }
    } 
```

2) 现在创建一个名为`DummyController`

```
 //Here the Dummy controller with Dummy view
    public class DummyController : Controller
    {
      public ActionResult PartialRender()
      {
          return PartialView();
      }
    } 
```

使用以下内容创建一个名为`PartialRender.cshtml`(razor view)的虚拟视图`DummyController`，注意它将使用 Html 帮助器执行另一个渲染操作。

```
@model Portal.MVC.MvcUtility.RenderActionViewModel
@{Html.RenderAction(Model.ActionName, Model.ControllerName, Model.RouteValues);} 
```

3）现在只需将其放在您的`MasterPage`or`aspx`文件中，以部分呈现您想要的视图。请注意，当您有多个要与您的`MasterPage`或`aspx`页面混合的剃刀视图时，这是一个很好的答案。（假设我们有一个名为 Login 的 PartialView 用于 Controller Home）。

```
 <% MyApplication.MvcUtility.RenderAction("Home", "Login", new { }); %> 
```

或者如果你有一个传递给 Action 的模型

```
 <% MyApplication.MvcUtility.RenderAction("Home", "Login", new { Name="Daniel", Age = 30 }); %> 
```

这个解决方案很棒，**不使用ajax调用**，不会导致嵌套视图**延迟渲染**，它**不会发出新的WebRequest**，因此**不会给你带来新的会话**，它**会处理检索方法**您想要的视图**的 ActionResult ，****它可以在不传递任何模型的情况下工作**

**感谢在** [Web 表单中使用 MVC RenderAction](http://blog.clicktricity.com/2010/06/using-mvc-renderaction-within-a-webform/)

* * *

## 回答 #3

> 赞同：20
> 
> 时间：2009-03-31T20:22:15.737

最明显的方法是通过 AJAX

像这样的东西（使用jQuery）

```
<div id="mvcpartial"></div>

<script type="text/javascript">
$(document).load(function () {
    $.ajax(
    {    
        type: "GET",
        url : "urltoyourmvcaction",
        success : function (msg) { $("#mvcpartial").html(msg); }
    });
});
</script> 
```

* * *

## 回答 #4

> 赞同：11
> 
> 时间：2011-09-12T21:11:56.110

这太好了，谢谢！

我在 .NET 4 上使用 MVC 2，这需要将 TextWriter 传递到 ViewContext，因此您必须传递 httpContextWrapper.Response.Output，如下所示。

```
 public static void RenderPartial(String partialName, Object model)
    {
        // get a wrapper for the legacy WebForm context
        var httpContextWrapper = new HttpContextWrapper(HttpContext.Current);

        // create a mock route that points to the empty controller
        var routeData = new RouteData();
        routeData.Values.Add(_controller, _webFormController);

        // create a controller context for the route and http context
        var controllerContext = new ControllerContext(new RequestContext(httpContextWrapper, routeData), new WebFormController());

        // find the partial view using the viewengine
        var view = ViewEngines.Engines.FindPartialView(controllerContext, partialName).View as WebFormView;

        // create a view context and assign the model
        var viewContext = new ViewContext(controllerContext, view, new ViewDataDictionary { Model = model }, new TempDataDictionary(), httpContextWrapper.Response.Output);

        // render the partial view
        view.Render(viewContext, httpContextWrapper.Response.Output);
    } 
```

* * *

## 回答 #5

> 赞同：6
> 
> 时间：2011-08-14T07:04:19.317

这是一种对我有用的类似方法。策略是将部分视图呈现为字符串，然后在 WebForm 页面中输出。

```
 public class TemplateHelper
{
    /// <summary>
    /// Render a Partial View (MVC User Control, .ascx) to a string using the given ViewData.
    /// http://www.joeyb.org/blog/2010/01/23/aspnet-mvc-2-render-template-to-string
    /// </summary>
    /// <param name="controlName"></param>
    /// <param name="viewData"></param>
    /// <returns></returns>
    public static string RenderPartialToString(string controlName, object viewData)
    {
        ViewDataDictionary vd = new ViewDataDictionary(viewData);
        ViewPage vp = new ViewPage { ViewData = vd};
        Control control = vp.LoadControl(controlName);

        vp.Controls.Add(control);

        StringBuilder sb = new StringBuilder();
        using (StringWriter sw = new StringWriter(sb))
        {
            using (HtmlTextWriter tw = new HtmlTextWriter(sw))
            {
                vp.RenderControl(tw);
            }
        }

        return sb.ToString();
    }
} 
```

在页面代码隐藏中，您可以执行

```
public partial class TestPartial : System.Web.UI.Page
{
    public string NavigationBarContent
    {
        get;
        set;
    }

    protected void Page_Load(object sender, EventArgs e)
    {
        NavigationVM oVM = new NavigationVM();

        NavigationBarContent = TemplateHelper.RenderPartialToString("~/Views/Shared/NavigationBar.ascx", oVM);

    }
} 
```

在页面中，您将可以访问呈现的内容

```
<%= NavigationBarContent %> 
```

希望有帮助！

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2014-06-10T23:05:05.463

该解决方案采用不同的方法。它定义了一个`System.Web.UI.UserControl`可以放置在任何 Web 窗体上并被配置为显示来自任何 URL 的内容……包括 MVC 部分视图。这种方法类似于对 HTML 的 AJAX 调用，因为参数（如果有）是通过 URL 查询字符串给出的。

首先，在 2 个文件中定义一个用户控件：

/controls/PartialViewControl.ascx 文件

```
<%@ Control Language="C#" 
AutoEventWireup="true" 
CodeFile="PartialViewControl.ascx.cs" 
Inherits="PartialViewControl" %> 
```

/controls/PartialViewControl.ascx.cs：

```
public partial class PartialViewControl : System.Web.UI.UserControl {
    [Browsable(true),
    Category("Configutation"),
    Description("Specifies an absolute or relative path to the content to display.")]
    public string contentUrl { get; set; }

    protected override void Render(HtmlTextWriter writer) {
        string requestPath = (contentUrl.StartsWith("http") ? contentUrl : "http://" + Request.Url.DnsSafeHost + Page.ResolveUrl(contentUrl));
        WebRequest request = WebRequest.Create(requestPath);
        WebResponse response = request.GetResponse();
        Stream responseStream = response.GetResponseStream();
        var responseStreamReader = new StreamReader(responseStream);
        var buffer = new char[32768];
        int read;
        while ((read = responseStreamReader.Read(buffer, 0, buffer.Length)) > 0) {
            writer.Write(buffer, 0, read);
        }
    }
} 
```

然后将用户控件添加到您的 Web 表单页面：

```
<%@ Page Language="C#" %>
<%@ Register Src="~/controls/PartialViewControl.ascx" TagPrefix="mcs" TagName="PartialViewControl" %>
<h1>My MVC Partial View</h1>
<p>Below is the content from by MVC partial view (or any other URL).</p>
<mcs:PartialViewControl runat="server" contentUrl="/MyMVCView/"  /> 
```

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2019-03-07T12:19:10.140

FWIW，我需要能够从现有的 webforms 代码动态呈现部分视图，并将其插入给定控件的顶部。我发现 Keith 的回答会导致部分视图在`<html />`标签外渲染。

使用 Keith 和 Hilarius 的答案作为灵感，我没有直接渲染到 HttpContext.Current.Response.Output，而是渲染了 html 字符串并将其作为 LiteralControl 添加到相关控件中。

在静态助手类中：

```
 public static string RenderPartial(string partialName, object model)
    {
        //get a wrapper for the legacy WebForm context
        var httpCtx = new HttpContextWrapper(HttpContext.Current);

        //create a mock route that points to the empty controller
        var rt = new RouteData();
        rt.Values.Add("controller", "WebFormController");

        //create a controller context for the route and http context
        var ctx = new ControllerContext(new RequestContext(httpCtx, rt), new WebFormController());

        //find the partial view using the viewengine
        var view = ViewEngines.Engines.FindPartialView(ctx, partialName).View;

        //create a view context and assign the model
        var vctx = new ViewContext(ctx, view, new ViewDataDictionary { Model = model }, new TempDataDictionary(), new StringWriter());

        // This will render the partial view direct to the output, but be careful as it may end up outside of the <html /> tag
        //view.Render(vctx, HttpContext.Current.Response.Output);

        // Better to render like this and create a literal control to add to the parent
        var html = new StringWriter();
        view.Render(vctx, html);
        return html.GetStringBuilder().ToString();
    } 
```

在调用类中：

```
 internal void AddPartialViewToControl(HtmlGenericControl ctrl, int? insertAt = null, object model)
    {
        var lit = new LiteralControl { Text = MvcHelper.RenderPartial("~/Views/Shared/_MySharedView.cshtml", model};
        if (insertAt == null)
        {
            ctrl.Controls.Add(lit);
            return;
        }
        ctrl.Controls.AddAt(insertAt.Value, lit);
    } 
```

# xml - 当 XML 文档中的内容子集可以以任何顺序出现时，如何验证它？

> ID：702748
> 
> 赞同：1
> 
> 时间：2009-03-31T19:50:57.653
> 
> 标签：xml, xsd

我有一个文档，其中包含一个根元素下的一堆元素，其中有一些我关心的元素，并且想要验证；但这些元素可能出现在文档中的任何位置。

还有其他一些我不想验证的元素；我不在乎他们是否在那里或里面有什么。

我尝试了显而易见的事情，一个 XSD，其中包含我在“all”元素中关心的元素，然后是“any”元素，但这是不允许的。

我考虑过：

*   包括我的架构中的其他元素 - yuk。
*   转换文档以摆脱其他元素 - 哇，矫枉过正。

一定有办法做到这一点，对吧？

如果我们需要一个例子：

```
<book>
  <title/>
  <author/>
  <editor/>
  <pubdate/>
</book> 
```

例如，我想检查标题和编辑是否存在，并忽略作者和发布日期。请注意，元素的顺序可能不一样。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-04-09T09:55:46.023

我最终使用 XSLT 转换来消除我不感兴趣的字段。

然后，我的 XMLSchema 不需要包含元素，而只需在 ... 元素中包含我感兴趣的元素。

XSL 转换似乎没有为该过程增加任何可察觉的时间。如果将来我发现任何性能问题，我可能会将感兴趣的元素过滤器合并到我正在调用的 API 中。

工作一种享受。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-04-01T00:38:59.410

您必须创建一个模式来验证您认为应该有效的所有实例文档。例如，您可能需要使用一个`<choice>`元素来指示必须存在几个元素之一。您可能希望在架构中包含作者和发布日期，但表明您不关心它们的内容或属性，并且它们应该是可选的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-04-01T14:54:38.390

根据您的要求（“我关心并想要验证的一些元素；但这些元素可能出现在文档中的任何地方”）[Schematron](http://www.schematron.com/)可能比 XSD 更好。

# asp.net - 找不到用户控件的类型或命名空间

> ID：702749
> 
> 赞同：0
> 
> 时间：2009-03-31T19:51:06.687
> 
> 标签：asp.net, iis

今晚我将一个 ASP 2.0 网站复制到了一个客户的机器上，瞧！它不起作用。它在我的、内置调试器和 IIS 7 下完美运行，两周前，它在他的机器上完美运行，在 IIS 6 下运行。

我所做的唯一更改是将 Telerik RadGrid 等升级到 2009 年第一季度，并进行了一些重构。应用程序在两个入口点 Web 表单上失败。两者都有一个 RadGrid，它使用用户控件进行编辑弹出窗口。两种形式都无法编译，出现“`JobEditControl`找不到类型或命名空间”错误，如下所示：

```
var editControl = e.Item.FindControl(GridEditFormItem.EditFormUserControlID) as JobEditControl; 
```

该控件未在标记中引用，因为它从未出现在那里，并且据我所知，它应该被编译到与第一次热时编译到的页面相同的默认命名空间中。

机器仍在正常地为用户控件提供服务，即 .ascx 处理程序看起来很健康，并且包含我添加的快速测试控件的快速测试页面运行良好。

另一位开发人员正忙着在我之前的机器上安装一个 ASP.NET 应用程序，但我想不出他会改变什么。即使是我的竞争对手...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-03-31T19:55:48.267

检查 web.config 是否引用了 Telerik 控件的当前版本。

# php - 大型 MySQL 更新查询

> ID：702752
> 
> 赞同：1
> 
> 时间：2009-03-31T19:52:21.020
> 
> 标签：php, mysql

从这个线程得到答案后，如果任何读者可以参考它，它将为我节省很多重新输入：[link text](https://stackoverflow.com/questions/702448/timezone-functions-help) I find that I need to update(within a mysql db) a timezone code, singlely (eg 10+, 1-等）根据 user_timezone 列中已经存在的内容转换为 olsen 代码（例如“欧洲/伦敦”等）。最简单的方法是什么？

任何想法将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-03-31T20:05:30.083

不幸的是，您无法从 UTC 偏移量中知道用户所在的区域。如果您查看[Wikipedia 的时区列表](http://en.wikipedia.org/wiki/List_of_zoneinfo_time_zones)，您会注意到许多区域共享相同的时间偏移，例如 Europe/Sarajevo 和 Europe/Brussels

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-03-31T20:09:15.720

鉴于时区偏移（例如 UTC+2）可能对应于 Olson 数据库中的许多条目（例如 Europe/Sofia、Europe/Riga、Africa/Cairo 等），您必须事先选择 offset-to-Olson-code一致。创建一个描述这些对应关系的表，然后使用它来构建您的更新语句。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-03-31T19:55:44.957

您可以使用[DateTimeZone](http://is.php.net/manual/en/class.datetimezone.php)类，但您得到的不是以小时为单位的偏移量，而是以分钟为单位的偏移量 (IIRC)。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-03-31T20:07:29.750

在 mysql 中重新映射值的方法如下所示：

```
UPDATE `sometable`
SET `somecolumn` = IFNULL(ELT(FIELD(`somecolumn`,
    'oldval1', 'oldval2', 'oldval3'),
    'newval1', 'newval2', 'newval3'),
    `somecolumn`
); 
```

这会将 'oldval1' 的出现更改为 'newval1' 等等，同时留下任何未出现在 'oldval' 列表中的内容。

# c# - 突出显示标签 Windows 窗体

> ID：702754
> 
> 赞同：8
> 
> 时间：2009-03-31T19:52:54.513
> 
> 标签：c#, .net, windows, winforms, user-interface

有什么方法可以使.NET Windows 表单上的**标签****突出显示**以允许复制文本。我试图用一个看起来像标签的文本框来做到这一点，但这会导致光标闪烁。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2009-03-31T20:08:06.287

我认为这非常接近：

```
textBox.BackColor = System.Drawing.SystemColors.Control;
textBox.BorderStyle = System.Windows.Forms.BorderStyle.None;
textBox.ReadOnly = true;
textBox.Text = "This is selectable text";
textBox.MouseUp += new MouseEventHandler(
                          delegate(object sender, MouseEventArgs e)
                             { HideCaret((sender as Control).Handle); });

[DllImport("User32.dll")]
static extern Boolean HideCaret(IntPtr hWnd); 
```

如果您需要它跨越多行：

```
textBox.Multiline = true; 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2009-03-31T22:09:32.407

如果您希望它是一个可预测的、行为良好的标准控件，并具有所有键盘和快捷键支持，您只需要一个文本框。然后闪烁的光标是一个正常的有用功能，为什么要反对它？

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-03-31T19:55:54.443

可选择的静态文本显示闪烁的光标并不罕见。如果您在 Windows 资源管理器中获取任何文件的属性并在该窗口中选择任何数据，您还会看到一个闪烁的光标。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-03-31T20:00:42.403

几年前我已经这样做了，我想我使用了这个 Win API 调用（但使用常规文本框）：[http ://www.dreamincode.net/forums/showtopic35107.htm](http://www.dreamincode.net/forums/showtopic35107.htm)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2009-03-31T20:10:43.393

您在 User32.dll 中有 HideCaret 函数。像这样使用它：

```
[DllImport("User32.dll")]
static extern bool HideCaret(IntPtr hWnd);

private void textBox_Enter(object sender, EventArgs e)
{
    HideCaret(textBox.Handle);
} 
```

这将防止插入符号在文本框具有焦点时显示。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2009-03-31T20:13:07.570

要考虑的一件事是继续使用标签，然后使用以下方式以编程方式将内容（标签的文本）复制到剪贴板：

```
Clipboard.SetText(yourLabel.Text); 
```

# uri - 如何将构造函数中传递的字符串转换为 Uri？

> ID：702757
> 
> 赞同：1
> 
> 时间：2009-03-31T19:53:53.857
> 
> 标签：uri

我有一段 C# 代码。我在构造函数中使用字符串作为参数来提供文件路径，然后我想将其转换为 Uri 以与不同类中的其余代码进行交互。我怎样才能做到这一点？谁能告诉语法？

```
 public string m_DTBook_FilePath;
    public DTBooktoXukConversion(string bookfile)
    {
        m_DTBook_FilePath = bookfile;
        Uri uri = new Uri(m_DTBook_FilePath);
    } 
```

这种语法有什么问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-03-31T19:58:00.913

这种语法没有错。当你尝试时出了什么问题？

请注意，在您提供的代码段中，您在构建 Uri 后不会对它*做*任何事情 - 如果问题是稍后您尝试将其`m_DTBook_FilePath`用作 a `Uri`，那么您实际上应该拥有：

```
public Uri m_DTBook_FilePath;
public DTBooktoXukConversion(string bookfile)
{
    m_DTBook_FilePath = new Uri(bookfile);
} 
```

（顺便说一句，我*强烈*建议不要在你的真实代码中使用公共字段。）

# python - 如何递归生成多字词？

> ID：702760
> 
> 赞同：6
> 
> 时间：2009-03-31T19:54:20.423
> 
> 标签：python, recursion

假设我有一串单词：`'a b c d e f'`. 我想从这个字符串中生成一个多字词列表。

词序很重要。`'f e d'`不应从上面的示例中生成该术语。

**编辑：**此外，不应跳过单词。 `'a c'`，或者`'b d f'`不应该生成。

**我现在拥有的：**

```
doc = 'a b c d e f'
terms= []
one_before = None
two_before = None
for word in doc.split(None):
    terms.append(word)
    if one_before:
        terms.append(' '.join([one_before, word]))
    if two_before:
        terms.append(' '.join([two_before, one_before, word]))
    two_before = one_before
    one_before = word

for term in terms:
    print term 
```

**印刷：**

```
a
b
a b
c
b c
a b c
d
c d
b c d
e
d e
c d e
f
e f
d e f 
```

我如何使它成为一个递归函数，以便我可以将每个术语的最大单词数传递给它？

**应用：**

我将使用它从 HTML 文档中的可读文本生成多字词。总体目标是对大型语料库（约 200 万份文档）进行潜在语义分析。这就是为什么保持词序很重要（自然语言处理等等）。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2009-03-31T20:07:02.873

这不是递归的，但我认为它可以满足您的需求。

```
doc = 'a b c d e f'
words = doc.split(None)
max = 3          

for index in xrange(len(words)):    
    for n in xrange(max):
        if index + n < len(words):           
            print ' '.join(words[index:index+n+1]) 
```

这是一个递归解决方案：

```
def find_terms(words, max_words_per_term):       
    if len(words) == 0: return []
    return [" ".join(words[:i+1]) for i in xrange(min(len(words), max_words_per_term))] + find_terms(words[1:], max_words_per_term)

doc = 'a b c d e f'
words = doc.split(None) 
for term in find_terms(words, 3):
    print term 
```

这里又是递归函数，带有一些解释变量和注释。

```
def find_terms(words, max_words_per_term):   

    # If there are no words, you've reached the end. Stop.    
    if len(words) == 0:
        return []      

    # What's the max term length you could generate from the remaining 
    # words? It's the lesser of max_words_per_term and how many words 
    # you have left.                                                         
    max_term_len = min(len(words), max_words_per_term)       

    # Find all the terms that start with the first word.
    initial_terms = [" ".join(words[:i+1]) for i in xrange(max_term_len)]

    # Here's the recursion. Find all of the terms in the list 
    # of all but the first word.
    other_terms = find_terms(words[1:], max_words_per_term)

    # Now put the two lists of terms together to get the answer.
    return initial_terms + other_terms 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2009-03-31T20:00:08.007

我建议您应该使您的函数成为生成器，然后生成所需数量的术语。您需要更改`print`为`yield`（并且显然使整个块功能）。

您也可以查看[itertools](http://docs.python.org/library/itertools.html?highlight=itertools#module-itertools)模块，它对您所做的工作非常有用。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2009-03-31T20:01:14.227

你为什么做这个？您可以改为使用 for 循环和[`itertools.combinations()`](http://docs.python.org/library/itertools.html#itertools.combinations).

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2009-12-19T13:59:57.453

您正在寻找的是 N-gram 算法。这会给你 [a,ab,b,bc,c,cd,...]。

# mysql - 如何在单个查询中获取最大值和最小值？

> ID：702763
> 
> 赞同：5
> 
> 时间：2009-03-31T19:54:39.547
> 
> 标签：mysql

我正在使用 MySQL，我正在寻找一种仅使用一个查询从两列（例如`posx`和）获取全局最大值和最小值（对于整个表）的方法。`posy`

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2009-03-31T19:57:02.757

简单的：

```
SELECT MIN(posx), MIN(posy), MAX(posx), MAX(posy) FROM table 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2009-03-31T19:57:02.163

```
SELECT
    MIN(colx) AS minimum,
    MAX(colx) AS maximum,
    MIN(coly) AS minimum,
    MAX(coly) AS maximum
FROM table 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2009-03-31T19:57:25.343

它实际上并不比听起来更复杂。

```
SELECT MIN(posx), MAX(posx), MIN(posy), MAX(posy)
FROM yourtable 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2009-03-31T19:56:44.923

```
 select max(posx), min(posy) from table 
```

# .net - 当嵌入对象无法显示时，如何显示一些文本？

> ID：702764
> 
> 赞同：2
> 
> 时间：2009-03-31T19:55:16.597
> 
> 标签：.net, javascript, html, user-controls, embedded-object

我们有一些看起来像这样的 html：

```
<form id="MyUserControl" runat="server" method="post">
   <script language="javascript" src="javascript.js"></script> 
```

javascript 文件包含如下内容：

```
document.write('<object id="MyUserControl" ');
document.write('classid="MyUserControl.dll#MyNamespace.MyUserControl"');
document.write('height="611" width="951" >');
document.write('<param name="Parm1" value="' + parm1 + '" />');
document.write('</object>'); 
```

本质上，如果对象未正确加载，我希望能够显示一些文本或保留备用文本。

所有这一切的原因是我们正在尝试将一个仍在使用的旧应用程序从 FoxPro 迁移到 .Net。这是一个相当大的应用程序，我们一次转换一个屏幕。我们正在构建.Net 用户控件，它们显示在 FoxPro 内的浏览器对象中。上面的 html 和 js 允许我们在网页中嵌入 winforms 用户控件。

如果特定用户没有为我们的应用程序服务器设置代码访问组，则不会呈现用户控件，并且屏幕仅显示左上角的小图标，看起来像是在尝试加载某些东西。它永远不会加载，但我想通知用户给我们的团队发送电子邮件，以理顺他们的访问权限。

我尝试使用待机和 alt，但都没有显示文本。我们所有的用户都有 IE7，这只是一个临时解决方案（< 6 个月）。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2009-03-31T19:59:23.310

您可以在对象标签内放置任何内联元素，如果加载失败，它们将呈现给用户。

```
<object>
  This object failed to load,
  try to install <a href="http://plugin-site/">here</a>
</object> 
```

[MSDN：对象元素 | 对象对象](http://msdn.microsoft.com/en-us/library/ms535859(VS.85).aspx)

想添加一些关于奇怪的 IE 行为的注释。(IE < 8) 当使用上述代码显示失败内容时，您将无法访问 DOM 中的对象。因此，您可能希望将其保留为空并执行一些额外的代码来确定加载成功。

```
<!DOCTYPE html>
<html>
<head>
  <title>so-objects</title>
  <script type="text/javascript">

    function add(text) {
      document.body.appendChild(document.createElement("div"))
                   .appendChild(document.createTextNode(text));
    };

    function each(o, f, c) {
      for (var i=0, l=o.length; i<l; i++) f.call(c, o[i], i, o);
    };

    onload = function() {

      // IE returns null and has mysteriously removed the object from DOM
      add("byId = "+ document.getElementById("no-access") );

      // IE returns 2 instead of 3
      add("byTags = "+ document.getElementsByTagName("object").length );

      // verify successful load if the object property is available
      each(document.getElementsByTagName("object"), function(node) {
        add(node.id +" = "+ !!node.object);
      });

    };

  </script>
  <style type="text/css">
    object, span { position: absolute; left:-10000px; }
  </style>
</head>
<body>

  <object id="access">
  </object>

  <object id="no-access">
    <span>failed</span>
  </object>

  <object id="supported"
     classid="clsid:6bf52a52-394a-11d3-b153-00c04f79faa6">
  </object>

</body>
</html> 
```

**IE < 8**的返回值

 **```
byId = null
byTags = 2
access = false
supported = true 
```

**符合 W3C 标准**的返回值

 **```
byId = [object HTMLObjectElement]
byTags = 3
access = false
no-access = false
supported = false 
```

[自己试试](http://myschemas.com/pub/so/so-objects.htm)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-04-01T17:39:21.550

根据您的情况添加另一个更具体的答案。

将您的 javascript 更改为此可能会产生所需的结果（如果只有该对象的一个​​实例应用于页面）。

```
function onchange(o) {
  if (o.readyState == 4) {
    if (o.object == null) {
      alert("UserControl is not installed, please email your administrator.");
      // or, toggle display of a message dialog in HTML
      //document.getElementById("not-installed").style.display = "block";
    }
  }
};

document.write('<object id="MyUserControl"');
document.write(' classid="MyUserControl.dll#MyNamespace.MyUserControl"');
document.write(' height="611" width="951" onreadystatechange="onchange(this)">');
document.write(' <param name="Parm1" value="' + parm1 + '" />');
document.write('</object>'); 
```

# c# - 使用 C# 格式化 Excel 图表背景

> ID：702765
> 
> 赞同：1
> 
> 时间：2009-03-31T19:55:24.040
> 
> 标签：c#, excel, excel-2007, office-automation

我已经可以将数据填充到电子表格中，根据我选择的范围创建图表。然而，当谈到格式化实际图表时，我感到有点失落，因为它们有很多选择！

它是一个 xlCylinderBarStacked 类型的图表。我只需要将条形的颜色设置为漂亮的浅橙色，然后将背景设置为淡蓝色，并在底部逐渐变为白色。

任何想法如何做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-04-08T16:34:55.370

只是为了结束这个问题。我对属性进行了一些操作，以下实现了图表背景的渐变效果。

```
xlChart.Interior.Color = ColorTranslator.ToOle(Color.LightSkyBlue);
chart.ChartArea.Fill.TwoColorGradient(
       Microsoft.Office.Core.MsoGradientStyle.msoGradientHorizontal, 
       1); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-03-31T19:59:24.887

Excel 和其他支持 VBA 的应用程序的一个好技巧是使用 Excel GUI 手动创建所需的格式/内容，同时记录“宏”。完成此操作后，您可以检查生成的 VBA 以了解如何使用 API 以编程方式获得相同的结果。您当然必须从 VBA 到 C# 进行一些翻译，但基本上相同的方法应该可以工作。

# python - 有没有比这更好的简单的 Python WebDAV 服务器代码片段？

> ID：702780
> 
> 赞同：1
> 
> 时间：2009-03-31T19:58:46.107
> 
> 标签：python, webdav

有没有人为简单的 Python [WebDAV](http://en.wikipedia.org/wiki/WebDAV)服务器提供更好的代码片段？下面的代码（从一些谷歌搜索结果拼凑而成）似乎在 Python 2.6 下工作，但我想知道是否有人有他们以前使用过的东西，经过*更多*测试和完整。我更喜欢仅 stdlib 的片段而不是第三方包。这是一些测试代码的命中，因此不必具有生产价值。

```
import httplib
import BaseHTTPServer

class WebDAV(BaseHTTPServer.BaseHTTPRequestHandler):
    """
    Ultra-simplistic WebDAV server.
    """
    def do_PUT(self):
        path = os.path.normpath(self.path)
        if os.path.isabs(path):
            path = path[1:]    # safe assumption due to normpath above
        directory = os.path.dirname(path)
        if not os.path.isdir(directory):
            os.makedirs(directory)
        content_length = int(self.headers['Content-Length'])
        with open(path, "w") as f:
            f.write(self.rfile.read(content_length))

        self.send_response(httplib.OK)

def server_main(server_class=BaseHTTPServer.HTTPServer, 
                handler_class=WebDAV):
    server_class(('', 9231), handler_class).serve_forever() 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2009-07-14T16:05:47.493

或者试试[**WsgiDAV**](https://github.com/mar10/wsgidav)，它是 PyFileServer 的重构版本。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-04-01T08:32:31.367

你可以试试[**akaDAV**](http://akadav.sourceforge.net/)。它是 Twisted 的 WebDAV 模块。

我认为它不再被维护，但我已经让它工作并且它支持大多数操作（除了锁）。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2010-08-24T07:22:30.467

[WsgiDAV](http://code.google.com/p/wsgidav/)

# vb.net - 从一个窗口获取信息并将其放入另一个窗口

> ID：702781
> 
> 赞同：1
> 
> 时间：2009-03-31T19:58:56.650
> 
> 标签：vb.net, forms

我正在开发一个游戏，我希望使用一个选项窗口，以便用户在其中输入数据并将其带到主窗口而不是丢失......

我用我最近的程序试了一下，猜猜颜色，但它并没有像我想象的那样工作。我以为我可以将它分配给文本框中的字符串到变量，然后它会进入主窗口......

我希望发生这种情况：

1.  用户通过单击快捷方式启动程序
2.  用户单击工具栏中的选项
3.  一个新窗口出现在屏幕上
4.  在此窗口中，用户将选择地图大小，然后单击确定，此示例中使用的验证、单选按钮...
5.  单击确定后返回主屏幕
6.  用户单击工具栏上的新按钮开始游戏
7.  然后游戏开始了...

编辑：

```
Form1          <<<   Form 2 
game screen          3x3 button
end turn 
```

*   表格 1
*   新游戏开始
*   表格 2 出现
*   3x3 按钮被按下*
*   变量用于更改地图（目前只有一张地图）*
*   form2 关闭，form1 显示
*   结束回合被点击

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-03-31T20:15:34.723

通常，您要做的是在创建新表单/窗口时，保留该表单窗口的引用直到它关闭。

然后，当它关闭时，您可以将刚刚关闭的表单/窗口中的信息复制回您的主窗口（或您希望的任何其他内容）。

这里的关键是在表示输入的子窗口上公开属性。因此，如果打开的子窗口具有已选择的颜色，请创建一个公开该颜色的属性，以便父窗口可以在子窗口上访问它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-03-31T20:36:50.740

**编辑：为什么我认为这是一个 VB6 问题？这是否被重新标记？如果 OP 可以澄清哪个版本的 VB，我将更新我的示例。**

OOP 甚至适用于 VB6。创建一个类来保存共享数据。在应用程序启动时，将对象创建为全局对象（变量）。我和下一个家伙一样讨厌全局变量，但是在整个应用程序（例如登录的用户对象或日志记录对象）需要查看此数据的情况下，它是合适的。您可以将值分配给第一种形式的类对象，然后从第二种或任何其他形式的类对象中读取它们。

示例类：

```
Option Explicit

Private m_firstName As String
Private m_lastName As String

Public Property Get FirstName() As String
    FirstName = m_firstName
End Property
Public Property Let FirstName(ByVal value As String)
    m_firstName = value
End Property

Public Property Get LastName() As String
    LastName = m_lastName
End Property
Public Property Let LastName(ByVal value As String)
    m_lastName = value
End Property

Public Function FullName() As String
    FullName = m_firstName & " " & m_lastName
End Function 
```

我在这台机器上没有 VB6，或者我可以给你一个更好的例子。我认为这些天在 .NET 中；）

这可能会解释更多 - [http://www.vbforums.com/showthread.php?t=374132](http://www.vbforums.com/showthread.php?t=374132)

# jquery - Jquery 文件上传器和导航器

> ID：702794
> 
> 赞同：0
> 
> 时间：2009-03-31T20:02:08.377
> 
> 标签：jquery, asp.net-mvc

我正在寻找一个 jQuery 插件，它允许我上传文件和/或导航到文件系统上的文件。

它将用于允许访问者将多个图像添加到新闻文章中。

我正在使用 ASP.NET MVC，所以它必须与之兼容。

编辑：这样的东西会很好用 - [KFM Demo](http://kfm.verens.com/demo/1.3.1/?lang=en)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2009-03-31T20:12:49.520

在 jQuery 上快速搜索会返回几个您可以使用的结果：

[jQuery 搜索：文件上传](http://plugins.jquery.com/search/node/file+upload)

所有这些都将增加选择文件并将它们上传到服务器的能力。这里的问题是**jQuery 是一个 javascript 库并且只在客户端运行**。您将需要在 .NET MVC 应用程序中编写服务器端代码，以便在从客户端获取文件上传时对其进行处理。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-03-31T20:16:05.457

好吧，没有插件可以做你想做的所有事情，但是你可以混合一个 JavaScript/Flash 文件上传库（我喜欢[SWFUpload](http://swfupload.org/)）和 jQuery UI 来制作一个简单的照片管理器。

检查这个[jQuery UI droppable 演示](http://jqueryui.com/demos/droppable/photo-manager.html)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2011-10-22T07:27:31.970

我过去使用过[uploadify](http://www.uploadify.com/)，只要您没有对身份验证（Windows）做任何疯狂的事情，它就非常有效。允许多次上传，如果您习惯在 jQuery 和 MVC 中使用 ajax，那么设置和开始工作相当容易。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-08-27T18:55:21.223

JsonResult[类](http://msdn.microsoft.com/en-us/library/system.web.mvc.jsonresult.aspx)就像一个魅力。

从文档：

> 表示用于将 JSON 格式的内容发送到响应的类。

## 句法

```
public class JsonResult : ActionResult 
```

# language-agnostic - 哪些优化可以立即进行？

> ID：702797
> 
> 赞同：10
> 
> 时间：2009-03-31T20:02:55.580
> 
> 标签：language-agnostic, optimization

计算机科学和编程中最常见的口头禅之一是永远不要过早优化，这意味着在确定问题之前不应该优化任何东西，因为代码的可读性/可维护性可能会受到影响。

但是，有时您可能知道某种特定的做事方式会表现不佳。什么时候可以在发现问题之前进行优化？从一开始就允许进行哪些类型的优化？

比如尽可能少的使用DB连接，在开发的时候要密切注意，而不是按需使用新的连接，以后再担心性能开销

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2009-03-31T20:08:27.487

我认为你错过了那句格言的重点。从一开始就以最有效的方式做某事并没有错，*只要*它也清晰、直接等。

关键是您不应该将自己（更糟糕的是，您的代码）束缚在试图解决甚至可能不存在的问题的结中。*保存那种级别的极端优化，在您真正*需要的情况下，这在开发、维护、技术债务、错误滋生地、可移植性等方面通常是昂贵的。

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2009-03-31T20:07:04.230

我认为您以错误的方式看待这个问题。避免过早优化的重点不是避免优化，而是避免您可能陷入的心态。

首先以最清晰的方式编写算法。然后确保它是正确的。然后（并且只有那时）担心性能。但也要考虑维护等。

如果您遵循这种方法，那么您的问题就会自行回答。从一开始就允许的唯一“优化”是那些至少与直接方法一样清晰的优化。

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2009-03-31T20:15:00.870

您可以随时进行的最佳优化*是*为问题选择正确的算法。令人惊讶的是，一个小小的想法经常会产生一种更好的方法，可以节省数量级，而不是几个百分点。这是一场彻底的胜利。

要寻找的东西：

*   数学公式而不是迭代。
*   众所周知并记录在案的模式。
*   现有代码/组件

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2009-03-31T20:08:01.777

恕我直言，没有。无需考虑“优化”即可编写代码。相反，请考虑“清晰性”、“正确性”、“可维护性”和“可测试性”。

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2009-03-31T20:34:58.750

来自维基百科：

> 我们应该忘记小的效率，比如大约 97% 的时间：过早优化是万恶之源。然而，我们不应该放弃那关键的 3% 的机会。——唐纳德·克努斯

我想总结一下。问题是知道你是否在 3% 中，以及采取什么路线。就我个人而言，我忽略了大多数优化，直到我至少让我的代码工作。通常作为与分析器的单独传递，因此我可以确保我正在优化真正重要的事情。很多时候，代码只是运行得足够快，以至于你所做的任何事情都几乎没有效果。

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2009-03-31T20:06:10.860

如果您没有性能问题，那么您不应该为了性能而牺牲可读性。但是，在选择实现某些功能的方法时，您应该避免使用从性能角度来看有问题的代码。因此，如果有 2 种方法来实现一个功能，请选择一种可能表现更好的方法，但如果它不是最直观的解决方案，请确保您在注释中说明为什么要这样编码。

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2009-03-31T20:15:34.800

随着您作为开发人员的职业发展，您只会越来越意识到解决各种问题的更好、更合理的方法。在我能想到的大多数情况下，性能增强工作导致的代码实际上比从解决问题演变而来的一些复杂的纠结更小更简单。随着你变得更好，这种更简单、更快的解决方案会变得更容易、更自然地生成。

更新：到目前为止，我为线程上的每个人投票 +1，因为答案非常好。特别是，DWC 用一些精彩的例子抓住了我的立场的精髓。

* * *

## 回答 #8

> 赞同：2
> 
> 时间：2009-03-31T20:16:48.823

**文档**

记录您的代码是（开发过程的）#1 优化，您可以从一开始就进行。随着项目的发展，与您互动的人越多，需要了解您所写内容的人越多，您花费的时间就越多

**工具包**

确保您的工具包适合您正在开发的应用程序。如果您正在制作一个小型应用程序，那么没有理由调用基于 Eclipse 的 GUI 系统的强大功能。

**编译器**

让编译器完成艰巨的工作。大多数时候，编译器上的优化开关将完成您需要的大部分重要事情。

**系统特定优化**

尤其是在嵌入式世界中，了解与您交互的 CPU 和系统的底层架构。例如，在 Coldfire CPU 上，您可以通过确保您的数据位于正确的字节边界上来大幅提高性能。

**算法**

努力使访问算法 O(1) 或 O(Log N)。力争在不超过 O(N) 的列表上进行迭代。如果您正在处理大量数据，请尽可能避免超过 O(N^2) 的任何内容。

**代码技巧**

尽可能避免。这本身就是一种优化——一种使您的应用程序从长远来看更易于维护的优化。

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2009-03-31T21:06:21.607

如果您唯一相信您正在优化的代码会很慢，那么您应该避免所有优化。您应该优化的唯一代码是当您知道它很慢时（最好通过分析器）。

如果您编写清晰、易于理解的代码，那么它可能会足够快，如果不是，那么当您加快速度时，它应该更容易做到。

话虽如此，常识应该适用（！）。您应该一遍又一遍地阅读文件还是应该缓存结果？可能会缓存结果。因此，从高级架构的角度来看，您应该考虑优化。

优化的“邪恶”部分是以使某些东西更快的名义犯下的“罪恶”——这些罪恶通常会导致代码非常难以理解。我不是 100% 肯定这是其中之一.. 但看看[这个问题在这里](https://stackoverflow.com/questions/702513/how-do-i-compare-multiple-array-entries-simultaneously-in-java/)，这可能是也可能不是优化的一个例子（可能是人们认为这样做的方式），但有更明显的方法可以解决问题比选择什么。

我最近做过的另一件事是，当您编写代码时，您需要决定如何以两种方式编写代码并通过分析器运行它。然后选择最清晰的编码方式，除非速度/内存有很大差异（取决于你所追求的）。这样你就不会猜测什么是“更好”，你可以记录你为什么这样做，这样以后就不会有人改变它了。

我正在做的情况是使用内存映射文件 -vs- 流 I/O ......内存映射文件比其他方式快得多，所以我不担心代码是否更难遵循（它不是t) 因为加速很显着。

我遇到的另一个案例是决定是否在 Java 中“实习”String。这样做应该可以节省空间，但要花费时间。就我而言，节省的空间并不大，而且时间是双倍的，所以我没有实习。记录它可以让其他人知道不要打扰它（或者如果他们想看看更新版本的 Java 是否使它更快，那么他们可以尝试）。

* * *

## 回答 #10

> 赞同：1
> 
> 时间：2009-04-01T00:36:32.287

除了清晰明了之外，您还必须花费合理的时间来正确实现代码。如果你需要一天的时间才能让代码正常工作，而不是如果你刚刚编写它会花费两个小时，那么你很可能浪费了你本可以花在解决*真正的*性能问题上的时间（高德纳的 3%）。

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2009-03-31T20:33:02.590

同意[Neil 的观点](https://stackoverflow.com/questions/702797/what-optimizations-are-ok-to-do-right-away/702813#702813)，立即在代码中进行性能优化是一种不好的开发实践。

恕我直言，**性能优化取决于您的系统设计**。如果你的系统设计得不好，从性能的角度来看，再多的代码优化也不会让你得到“好的”性能——你可能会得到相对更好的性能，但不是很好的性能。

例如，如果一个人打算构建一个访问数据库的应用程序，一个设计良好的数据模型，它已经被反规范化得恰到好处，如果可能产生比它相反的更好的性能特征 - 一个设计不良的数据模型已经优化/tuned 以获得相对更好的性能。

当然，不能忘记这种组合中的要求。在设计过程中必须考虑隐含的性能要求——设计一个面向公众的网站通常需要减少服务器端的访问，以确保最终用户有“高性能”的感觉。这并不意味着您在每次操作时都在浏览器上重建 DOM 并重新绘制相同的内容（我在现实中看到过），而是您重建 DOM 的一部分并让浏览器完成其余的工作（这将有由理解隐含要求的明智设计师处理）。

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2009-03-31T20:38:45.167

选择合适的数据结构。我什至不确定它是否算作优化，但它会影响您的应用程序的结构（因此尽早做好）并大大提高性能。

* * *

## 回答 #13

> 赞同：-2
> 
> 时间：2009-03-31T20:12:09.240

如果您确定每次传递都会计算此值，请不要在循环检查表达式中直接调用 Collection.ElementCount。

代替：

```
for (int i = 0; i < myArray.Count; ++i)
{
    // Do something
} 
```

做：

```
int elementCount = myArray.Count;
for (int i = 0; i < elementCount ; ++i)
{
    // Do something
} 
```

一个经典案例。

当然，你必须知道它是一个什么样的集合（实际上是如何实现 Count 属性/方法）。不一定是昂贵的。

# c# - 泛型类的静态方法？

> ID：702801
> 
> 赞同：8
> 
> 时间：2009-03-31T20:05:50.427
> 
> 标签：c#, generics, static-methods

好的，情况就是这样：

我有一个通用的基类，我需要用一些静态值来初始化它。这些值与我的泛型基类加载的类型无关。

我希望能够做这样的事情：

```
GenericBaseclass.Initialize(AssociatedObject); 
```

同时还有这样的课程：

```
public class DerivedClass : GenericBaseclass<int>
{
   ...
} 
```

有没有办法做到这一点？我可以创建一个非泛型基类并将静态方法放在那里，但我不喜欢那个“hack”:)

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2009-03-31T20:08:38.063

如果这些值与泛型基类的类型无关，那么它们不应该在泛型基类中。它们应该在一个完全独立的类中，或者在泛型类的非泛型基类中。

请记住，对于静态变量，每个类型参数组合都会获得不同的静态变量：

```
using System;

public class GenericType<TFirst, TSecond>
{
    // Never use a public mutable field normally, of course.
    public static string Foo;
}

public class Test
{    
    static void Main()
    {
        // Assign to different combination
        GenericType<string,int>.Foo = "string,int";
        GenericType<int,Guid>.Foo = "int,Guid";
        GenericType<int,int>.Foo = "int,int";
        GenericType<string,string>.Foo = "string,string";

        // Verify that they really are different variables
        Console.WriteLine(GenericType<string,int>.Foo);
        Console.WriteLine(GenericType<int,Guid>.Foo);
        Console.WriteLine(GenericType<int,int>.Foo);
        Console.WriteLine(GenericType<string,string>.Foo);

    }
} 
```

听起来您并不*真正*想要每个`T`通用基类有一个不同的静态变量 - 所以您不能*在*通用基类中使用它。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2009-03-31T20:09:36.173

这正是你必须做的。当您有一个类型参数时，该类型的每个不同实例化都是一个*单独*的类型。这导致单独的静态变量。

唯一的解决方法是拥有一个泛型类派生自的基类。

# asp.net - SharePoint 中的页面重定向

> ID：702816
> 
> 赞同：1
> 
> 时间：2009-03-31T20:08:31.807
> 
> 标签：asp.net, sharepoint, redirect

我如何能够根据他们的用户个人资料信息（例如他们所在的部门）将某人重定向到特定页面？

我想出了2个选项：

1.  有一个“我的部门”链接到一个使用 SharePoint 对象模型的 aspx 页面来确定他们是哪个部门，然后根据他们的部门重定向。

2.  在执行用户配置文件检查后，让 HTTPModule 重定向用户。

数字 2 似乎很愚蠢，因为这意味着我们将检查我们点击的每个链接。

1号似乎是可能的。

有没有更好的方法可以根据用户的个人资料数据将用户重定向到页面？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-03-31T20:42:37.450

我会选择 1。您甚至可以制作一个用户控件，提前计算链接并为每个用户缓存它以减少负载。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-04-01T18:39:06.570

查看 Liam Cleary 的博客，他编写并发布了一个非常复杂的 Web 部件，其中包括： [http ://www.helloitsliam.com/archive/2008/07/15/redirect-web-part-update.aspx](http://www.helloitsliam.com/archive/2008/07/15/redirect-web-part-update.aspx)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-04-01T00:09:22.837

您的目标是展示个性化内容吗？如果是这样并且您正在使用 MOSS，您是否考虑过使用 Audiences？

# asp.net - GridView ButtonField 回发在 IE7 中不起作用？

> ID：702827
> 
> 赞同：0
> 
> 时间：2009-03-31T20:11:24.093
> 
> 标签：asp.net, visual-studio-2008, gridview, internet-explorer-7, buttonfield

我有一个带有 GridView 控件的 ASP.Net 网站，该控件又包含一个 ButtonField 列。它应该在单击此 ButtonField 时进行回发，但如果我在调试时 Visual Studio 打开的 Internet Explorer 窗口中单击该按钮，则不会发生这种情况。当我从外部调用的 Internet Explorer 窗口或 Firefox 窗口调出并单击 ButtonField 时，我可以让它成功回发，但永远不会从 Visual Studio 生成的窗口中获得。

我正在使用：

*   Windows Vista 家庭高级版
*   Visual Studio 2008，以管理员身份运行
*   Internet Explorer 7.0.6000.16809
*   火狐 3.0.6

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2009-04-01T16:00:10.430

您是否在该按钮中添加了任何 javascript？如果 javascript onclick 失败，它可能会在通过 VS 运行时调出调试器，但任何其他浏览器可能只是在吃错误。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-04-02T18:23:37.733

我已经确定问题是由于在 Windows Vista 下以管理员身份运行 Visual Studio 2008。这样做会导致 Javascript 出现某种问题，从而阻止 GridView ButtonFields 发出回发。与 Microsoft 对以前版本的 Visual Studio (2005) 的建议相反，使用在 Windows Vista 下运行的 Visual Studio 2008 进行调试要求**不要**使用“*以管理员身份运行”运行*IDE 。

# cocoa - 将 NSStepper 与 NSTextField 集成

> ID：702829
> 
> 赞同：19
> 
> 时间：2009-03-31T20:12:06.993
> 
> 标签：cocoa, user-interface

我需要一个与 NSStepper 一起使用的 NSTextField 作为一个控件，这样我就可以通过直接在文本字段上更改整数值或使用步进器上/下箭头来编辑整数值。

在 IB 中，我添加了这两个控件，然后将 NSStepper 的 takeIntValueFrom 连接到 NSTextField，这样每当我单击步进箭头时，文本值就会发生变化。问题是，如果我编辑文本字段然后再次单击步进器，它将忘记我手动编辑的值并使用步进器的内部值。

每当更改文本字段值时，更新步进器值的最佳/最简单方法是什么？

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2009-03-31T20:30:34.000

跳过`takeIntValueFrom:`方法。相反，将两个视图绑定到控制器中的相同属性。您可能还想创建一个格式化程序并将文本字段的`formatter`出口连接到它。

* * *

## 回答 #2

> 赞同：18
> 
> 时间：2009-03-31T21:07:37.187

我会有一个带有一个整数变量的模型，它代表两个控件的值。

在我的控制器中，我将使用一个连接到两个控件的 IBAction 和两个 IBOutlets，每个控件一个。那么我会有一种从模型值更新网点的方法。

```
IBOutlet NSStepper * stepper;
IBOutlet NSTextField * textField;

- (IBAction) controlDidChange: (id) sender
{
    [model setValue:[sender integerValue]];
    [self updateControls];
}

- (void) updateControls
{
    [stepper setIntegerValue:[model value]];
    [textField setIntegerValue:[model value]];
} 
```

这是原则。正如[Peter Hosey](https://stackoverflow.com/questions/702829/integrate-nsstepper-with-nstextfield/702904#702904)所说，格式化程序可能对您的文本字段有用，至少要考虑步进器的最小值和最大值。

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2014-06-06T23:41:54.510

我发现简单的方法是将步进器值绑定到输入并将输入值绑定到步进器

```
@property (strong) IBOutlet NSTextField *timeInput;
@property (strong) IBOutlet NSStepper *timeStepper; 
```

![绑定输入值](https://i.stack.imgur.com/nqLCw.png)

![绑定步进值](https://i.stack.imgur.com/VFPMo.png)

* * *

## 回答 #4

> 赞同：7
> 
> 时间：2016-04-11T16:02:20.207

如果您正在跟踪模型中某个字段的值，例如当前页码，则无需在步进器控件中保留另一个副本。我只是将控件配置为具有初始值 0，范围从 -1 到 1。在步进器控件的 IBAction 方法中，该控件上的任何单击（或自动重复）都会调用该方法，要求它的当前值，如果单击向上箭头则为 1，或向下箭头为 -1。立即将控件的当前值重置为 0，然后使用基于方向 1 或 -1 的新值更新模型和其他任何内容（关联的文本字段或新的页面视图等）。例如，

```
- (IBAction) bumpPageNum:(id)sender
{
    int whichWay = [sender intValue];   // Either 1 or -1
    [sender setIntValue:0];             // Same behavior next time
    [model changePageBy:whichWay];
} 
```

这样，步进控件根本不必链接到模型中的任何值。

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2009-03-31T21:36:51.970

我按照[Peter Hosey](https://stackoverflow.com/questions/702829/integrate-nsstepper-with-nstextfield/702904#702904)的建议做了，因为在我看来这是最干净的方法。在我的控制器中创建了一个属性：

```
int editValue_;
...
@property (nonatomic, readwrite) int editValue;
...
@synthesize editValue = editValue_; 
```

然后在 IB 中为 Bindings 选项卡中的两个控件设置了“绑定到：”复选框并选择了我的控制器，然后在“模型键路径”字段设置“editValue”，瞧，它起作用了！只需 3 行代码和一些 IB 编辑。如果我需要更改控制器上的值，我会使用 setEditValue: 并且文本字段会更新。

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2019-02-26T19:06:32.083

这是为关心可可的人准备的。

[![NSSteppers 在行动](https://i.stack.imgur.com/eimxq.png)](https://i.stack.imgur.com/eimxq.png)

`NSStepper`与 with 一起使用的唯一原因`NSTextField`是文本字段中有一些数字。

完整的高级 Cocoa 解决方案的步骤（遗憾的是这里没有）：

第 1 步：将数字格式化程序添加到您的文本字段并根据需要进行格式化。

[![数字格式化程序](https://i.stack.imgur.com/BbMCT.png)](https://i.stack.imgur.com/BbMCT.png)

第 2 步：添加`NSObjectController`并粘贴您的文本字段/步进器。当人们进行直接绑定时，这是一个常见的错误。嗯。在模型中添加相应的 keyPaths。

[![绑定](https://i.stack.imgur.com/11vrT.png)](https://i.stack.imgur.com/11vrT.png)

第 3 步：确保您的文本字段对关键事件做出反应。新手总是错过。将文本字段委托连接到我们的控制器并添加代码。

```
- (BOOL)control:(NSControl *)control textView:(NSTextView *)textView doCommandBySelector:(SEL)commandSelector
{
    if (commandSelector == @selector(moveUp:) || commandSelector == @selector(moveDown:)) {
        if (control == [self minAgeTextField]) {
            return [[self minAgeStepper] sendAction:commandSelector to:[self minAgeStepper]];
        }
        if (control == [self maxAgeTextField]) {
            return [[self maxAgeStepper] sendAction:commandSelector to:[self maxAgeStepper]];
        }
    }
    return NO;
} 
```

第4步：一些胶水代码。这也是我们设置objectController内容的地方。

```
@property (weak) IBOutlet NSObjectController *profilesFilterObjectController;

@property (weak) IBOutlet NSTextField *minAgeTextField;
@property (weak) IBOutlet NSTextField *maxAgeTextField;
@property (weak) IBOutlet NSStepper *minAgeStepper;
@property (weak) IBOutlet NSStepper *maxAgeStepper;

@property (nonatomic) ProfilesFilter *filter;

- (void)awakeFromNib //or viewDidLoad...
{
    [self setFilter:[ProfilesFilter new]];
    [[self profilesFilterObjectController] setContent:[self filter]];
} 
```

第 5 步：验证您的值（KVC 验证）

```
@implementation ProfilesFilter

- (BOOL)validateValue:(inout id  _Nullable __autoreleasing *)ioValue forKey:(NSString *)inKey error:(out NSError * _Nullable __autoreleasing *)outError
{
    if ([inKey isEqualToString:@"minAge"] || [inKey isEqualToString:@"maxAge"]) {

        if (*ioValue == nil) {
            return YES;
        }

        NSInteger minAge = [[self minAge] integerValue];
        NSInteger maxAge = [[self maxAge] integerValue];
        if ([inKey isEqualToString:@"minAge"]) {
            if (maxAge != 0) {
                *ioValue = @(MAX(18, MIN([*ioValue integerValue], maxAge)));
            }
        }
        if ([inKey isEqualToString:@"maxAge"]) {
            if (minAge != 0) {
                *ioValue = @(MIN(99, MAX([*ioValue integerValue], minAge)));
            }

        }
    }
    return YES;
}

@end 
```

注释：错误的值？NSNumberFormatter 将显示错误。最大年龄低于最小年龄？我们使用 KVC 验证（步骤 5）。尤里卡！

奖励：如果用户按住 CTRL 或 SHIFT 或同时按住两者（用户想要更慢或更快的增量）怎么办？我们可以根据按下的键修改增量（子类`NSStepper`和覆盖`increment`getter 并检查例如`NSEvent.modifierFlags.contains(.shift))`.

```
- (double)increment
{
    BOOL isShiftDown = ([NSEvent modifierFlags] & NSEventModifierFlagShift) ? YES : NO;
    //BOOL isOptionDown = ([NSEvent modifierFlags] & NSEventModifierFlagOption) ? YES : NO;

    double increment = ([self defaultIncrement] - 0.001 > 0) ? [self defaultIncrement] : 1.0;
    if (isShiftDown) {
        increment = increment * 5;
    }
    return increment;
} 
```

将此添加到`- (BOOL)control:(NSControl *)control textView:(NSTextView *)textView doCommandBySelector:(SEL)commandSelector`

```
//JUST AN ILLUSTRATION, holding shift + key up doesn't send moveUp but moveUpAndModifySelection (be careful of crash, just modify the command to moveUp; if not `NSStepper` doesn't know `moveUpAndModifySelection`)
if (commandSelector == @selector(moveUpAndModifySelection:)) {
    commandSelector = @selector(moveUp:);
}
if (commandSelector == @selector(moveToEndOfDocument:) || commandSelector == @selector(moveDownAndModifySelection:)) {
    commandSelector = @selector(moveDown:);
} 
```

PS：最好的解决方案是使用`NSTextField`具有并绘制步进器并控制所有事件的自定义。你最终会得到一个更小的控制器！

# python - Python中枚举的常见做法是什么？

> ID：702834
> 
> 赞同：152
> 
> 时间：2009-03-31T20:14:17.970
> 
> 标签：python, enums

> **可能重复：**
> [如何在 Python 中表示“枚举”？](https://stackoverflow.com/questions/36932/how-can-i-represent-an-enum-in-python)

Python中枚举的常见做法是什么？即它们是如何在 Python 中复制的？

```
public enum Materials
{
    Shaded,
    Shiny,
    Transparent,
    Matte
} 
```

* * *

## 回答 #1

> 赞同：374
> 
> 时间：2009-03-31T20:30:32.003

```
class Materials:
    Shaded, Shiny, Transparent, Matte = range(4)

>>> print Materials.Matte
3 
```

* * *

## 回答 #2

> 赞同：20
> 
> 时间：2009-03-31T20:21:51.667

我已经多次看到这种模式：

```
>>> class Enumeration(object):
        def __init__(self, names):  # or *names, with no .split()
            for number, name in enumerate(names.split()):
                setattr(self, name, number)

>>> foo = Enumeration("bar baz quux")
>>> foo.quux
2 
```

您也可以只使用班级成员，但您必须提供自己的编号：

```
>>> class Foo(object):
        bar  = 0
        baz  = 1
        quux = 2

>>> Foo.quux
2 
```

如果您正在寻找更健壮的东西（稀疏值、特定于枚举的异常等），请[尝试这个秘诀](http://code.activestate.com/recipes/67107/)。

* * *

## 回答 #3

> 赞同：10
> 
> 时间：2009-03-31T20:29:02.727

我不知道为什么 Enums 不被 Python 原生支持。我发现模拟它们的最好方法是覆盖 _ str _ 和 _ eq _ 以便您可以比较它们，当您使用 print() 时，您会得到字符串而不是数值。

```
class enumSeason():
    Spring = 0
    Summer = 1
    Fall = 2
    Winter = 3
    def __init__(self, Type):
        self.value = Type
    def __str__(self):
        if self.value == enumSeason.Spring:
            return 'Spring'
        if self.value == enumSeason.Summer:
            return 'Summer'
        if self.value == enumSeason.Fall:
            return 'Fall'
        if self.value == enumSeason.Winter:
            return 'Winter'
    def __eq__(self,y):
       return self.value==y.value 
```

用法：

```
>>> s = enumSeason(enumSeason.Spring)

>>> print(s)

Spring 
```

* * *

## 回答 #4

> 赞同：7
> 
> 时间：2009-03-31T20:39:07.240

您可能可以使用继承结构，尽管我玩得越多，我就觉得越脏。

```
class AnimalEnum:
  @classmethod
  def verify(cls, other):
    return issubclass(other.__class__, cls)

class Dog(AnimalEnum):
  pass

def do_something(thing_that_should_be_an_enum):
  if not AnimalEnum.verify(thing_that_should_be_an_enum):
    raise OhGodWhy 
```

# fpga - 过时的赛灵思芯片

> ID：702838
> 
> 赞同：1
> 
> 时间：2009-03-31T20:15:21.637
> 
> 标签：fpga, xilinx

我的公司正在尝试使用属于 XC3000 系列芯片的过时 xilinx fpga (XC3042A) 构建 pcb。有没有人有将数据编程到芯片上的经验？我正在寻找人们使用过的软件、硬件等。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-04-15T05:07:52.470

我使用定制的 ISA 总线接口对旧的 Xilinx 芯片 (XC4010XL) 进行了编程。我在 DOS 机器上使用 Turbo-C，在从属并行配置上使用带有 '245（双向收发器）和 74LS74（双触发器 D）的自制 ISA 卡用于选通信号。

例如，使用并行端口实现同样的功能并不困难。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-04-01T23:51:31.797

您应该能够从 Xilinx 网站找到编程规范。他们提供了有关在 FPGA 编程中使用的不同方法的文档。它应该在他们的 AppNotes 中。它们有几种模式——通常是从属串行或选择映射（并行）。这意味着某种 SPI 闪存、并行闪存或 JTAG。

如果您环顾四周，您可能还会发现 DIY 编程电缆的原理图！您还可以连接一个小型微型计算机，比如一个 8 位 PIC 来处理编程规范，同时您设计自己的自定义接口或将其连接到 SD 卡或其他东西。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-10-29T14:47:19.590

当前的赛灵思工具和电缆将对旧零件进行编程。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-01-16T17:00:21.277

XC3000 系列不使用 JTAG 接口，因此您不能使用 Xilinx 编程器下载您的配置。

您可以使用外部 EPROM 或嵌入式处理器来下载代码。

查看 Xilinx 的应用说明： [http](http://www.xilinx.com/support/documentation/application_notes/xapp090.pdf) ://www.xilinx.com/support/documentation/application_notes/xapp090.pdf 对于菊花链： [http ://www.xilinx.com/support/documentation/application_notes/xapp091 .pdf](http://www.xilinx.com/support/documentation/application_notes/xapp091.pdf)

它描述了将配置文件下载到 FPGA 的数据格式和信号信息。

您可以从他们的网站使用旧版本的 Xilinx 编程器并配置设备，我相信支持 3000 系列的最后一个 xilinx 版本是第 8 版，但我不确定。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2009-10-29T14:51:17.737

查看[FTDI](http://www.ftdichip.com/Products/EvaluationKits/FPGA.htm)。您也许可以说服他们使用一些更新的硬件。目前 USB + FPGA 的价格为 150 加元，如果您将其与手册捆绑在一起，则需额外支付 80 加元。加上运费。

它甚至支持赛灵思网站提供的免费网络套件。

# midi - 虚拟 MIDI 和 VST

> ID：702842
> 
> 赞同：2
> 
> 时间：2009-03-31T20:16:14.050
> 
> 标签：midi, vst

我想做一个简单的 VST 插件来做到这一点：

1.  分析音频流（音量、节拍等...）
2.  在分析仪的输出上有触发器（例如，当音量 > 阈值时执行某些操作）
3.  根据触发器生成 MIDI 事件

这是为了能够链接插件，即使它们不是为它设计的。例如，我可以使用音频流的包络控制压缩器的增益，只需将插件的 MIDI OUT 连接到压缩器增益按钮的 MIDI IN 即可。

问题是我不知道该怎么做。VST 中是否支持这样的直接 MIDI 连接？或者，也许我需要某种“虚拟 MIDI 设备”来进行互连？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2009-04-01T05:58:52.420

您在这里的预感可能是正确的；通过编写虚拟 MIDI 设备而不是 VST 插件，这个任务将更容易完成。可以使用 sendVstEventsToHost() 调用将 MIDI 事件发送到音序器，但问题是文档从未指定*主机*如何对这些事件做出反应。许多主机只是忽略它们，我当然想不出一个可以轻松从插件路由到 MIDI 通道（也许是 plogue bidule？）。

您可能可以使用具有 kAudioUnitType_Generator 插件类型的音频单元来完成此操作...虽然我从未编写过这样的插件，但我的印象是您将使用它来为主机生成 MIDI。但同样，这里的问题是我不确定主机如何允许您将音频路由到插件并接受来自它的 MIDI。

无论如何，当你想为最广泛使用的音序器标准化它的行为时，你作为插件实现的想法将是最难实现的。我认为完成您想要的更简单的方法是创建一个虚拟 MIDI 设备，正如您已经想到的那样，然后使用 rewire 将输入信号路由到您的程序。

**编辑**：以下是为各种系统编写 MIDI 驱动程序的一些资源：

*   [OS X 中的音频设备驱动程序编程](http://developer.apple.com/documentation/DeviceDrivers/Conceptual/WritingAudioDrivers/About/About.html)
*   [Windows MIDI 驱动程序 API 指南](http://www.blitter.com/~russtopia/MIDI/~jglatt/tech/winapi.htm)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-09-16T05:27:18.130

VST 插件不支持直接 MIDI 连接，它们只能有 MIDI 输入/输出端口。

仍然可以这样做，您只需要一台支持将 midi 从一个插件路由到另一个插件的主机。EnergyXT、Bidule、AudioMulch 和 Console 等模块化主机在这里表现出色。它们都允许自由路由音频和 MIDI 信号（没有反馈路径除外）。但它也可能在具有更“传统”混音器风格的 vst 机架的主机中实现。（例如，AFAIK Reaper 会将任何 midi 从一个插件转发到下一个插件。）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2010-02-03T11:59:39.353

如果您想在 .NET 中构建插件，请查看[VST.NET](http://vstnet.codeplex.com)

# c# - 如何在 C# 中解决车辆跟踪 GPS 收集数据的最佳解决方案？

> ID：702843
> 
> 赞同：3
> 
> 时间：2009-03-31T20:16:21.023
> 
> 标签：c#, multithreading, gps

我有几辆车每分钟向服务器发送数据。服务器应该监听并解码数据以存储在数据库中。每分钟将有数千个条目。解决该问题的最佳方法是什么？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2009-03-31T20:22:44.347

我个人最喜欢的 WCF 或 WebService 场将数据泵送到 Microsoft 消息队列 (MSMQ) 并让应用程序服务器（1 个或多个）转换数据并将其放入数据库。

随着您的深入（如果需要），您可以使用 MSMQ 的功能来处理超时、负载缓冲、“死信”、服务器故障等。 [考虑这篇文章](http://www.csharphelp.com/archives3/archive581.html)。

在面向 Web 的一面，因为它是无状态的且很薄，您可以轻松地扩展这一层，而无需考虑复杂的负载平衡。您可以使用 DNS 负载平衡来启动，然后在需要时转向更好的解决方案。

进一步说明，通过使用 MSMQ，您还可以通过查看队列中有多少消息来了解系统“落后”多远。如果这个数字接近 0，那么你很好。如果该数字不断上升，则您需要更高的性能（添加另一个应用程序服务器）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-03-31T23:01:02.500

我们正在按照 Jason 所说的做，除了使用带有自定义负载的直接 TCP/UDP 套接字侦听器以获得更高的性能。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-03-31T20:19:21.017

您预计每次手术需要多长时间？从您所说的看来，您似乎可以在处理后直接将数据写入数据库，因此您根本不必同步线程（数据库应该为您处理好）。

# java - 网站为未找到页面（404）页面返回 HTTP 代码 200 是否正常？

> ID：702854
> 
> 赞同：3
> 
> 时间：2009-03-31T20:18:52.750
> 
> 标签：java, standards

我正在对一些网站进行一些测试（我不会提及），当它们是找不到页面的页面时，它们会返回 200 个代码。这是否违反任何 Web 开发标准？

这是我用来查看 URL 的返回码的代码：

```
System.out.println(new String("getRespCode=" + urlConnection.getResponseCode() + ", HttpURLConnection=" + HttpURLConnection.HTTP_OK + "\n")); 
```

有任何想法吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2009-03-31T20:22:03.023

这称为 a`Soft 404`或`False 404`。维基百科有[详细的讨论](http://en.wikipedia.org/wiki/Soft_404#Soft_404_errors)。任何网络标准都不允许这样做（而且我不知道有任何*支持*的论点），但无效的 HTML 也是如此。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-03-31T20:20:49.360

听起来像是他们这边的错误。也有可能，404 错误被重定向到另一个页面以显示更好的响应，并且该页面正在发送 200。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-03-31T20:23:07.420

这很常见，虽然不正确。例如，搜索引擎会认为他们正在访问一个有效的页面

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-03-31T20:26:53.510

是的，这绝对违反标准。这就像当你用完汽油时你的油灯亮了。

不幸的是，这很常见；然而，这并不意味着它是可以接受的。

phihag 留下了很好的链接，值得一读。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2009-03-31T21:01:49.807

请注意，对于真正的 404，您的代码（据我所知）不会执行，但会产生 FileNotFoundException。

# java - 通过 Python 执行 Java 程序

> ID：702861
> 
> 赞同：15
> 
> 时间：2009-03-31T20:20:32.043
> 
> 标签：java, python

我该怎么做呢？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2009-03-31T20:25:59.457

[`os.system()`](http://docs.python.org/library/os.html#os.system)您可以使用该函数从 Python 执行任何您想要的操作。

> **os.system(command)**
> 在子shell 中执行命令（字符串）。这是通过调用标准C函数系统来实现的，具有相同的限制。os.environ、sys.stdin 等的更改不会反映在执行命令的环境中。

要获得更多功能和灵活性，您将需要查看该[`subprocess`](http://docs.python.org/library/subprocess.html#module-subprocess)模块：

> subprocess 模块允许您生成新进程，连接到它们的输入/输出/错误管道，并获取它们的返回码。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2009-03-31T21:52:05.927

当然，Jython 允许您在 Python 中使用 Java 类。这是另一种看待它的方式，可以更紧密地集成 Java 代码。

# java - 从 .NET 切换到 Java？

> ID：702864
> 
> 赞同：6
> 
> 时间：2009-03-31T20:20:51.420
> 
> 标签：java, .net

在过去的几年里，我一直在一个开发 .NET 和 SQL Server 的团队中工作。我很快就会加入一个由 Java 和 Oracle 组成的团队。我可以阅读/做什么来跟上进度。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2009-03-31T20:31:50.580

从这里开始：http: [//java.sun.com/javase/6/docs/](http://java.sun.com/javase/6/docs/)

Sun 的文档非常好。

也可以看看：

*   [Java的隐藏特性](https://stackoverflow.com/questions/15496/hidden-features-of-java)
*   [迄今为止你读过的最好的 Java 书籍](https://stackoverflow.com/questions/75102/best-java-book-you-have-read-so-far)
*   [在 Java 中覆盖 Equals 和 Hashcode](https://stackoverflow.com/questions/27581/overriding-equals-and-hashcode-in-java)
*   [你在 Java 中遇到的最常见的并发问题是什么](https://stackoverflow.com/questions/461896/what-is-the-most-frequent-concurrency-problem-youve-encountered-in-java)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2009-03-31T20:29:23.363

[Javapassion](http://www.javapassion.com/)是一个提供 Java 免费课程的网站。如果你赶时间，有 1 到 5 天的课程可供选择。如果你有 Java 方面的经验，你应该没有问题。

Java 有很多好书，但[Thinking in Java](http://www.mindview.net/Books/TIJ/)是免费的，无论是入门还是作为参考都很好。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2009-03-31T22:05:49.390

如果您需要将事物从一种语言转换为另一种语言，这里是一个很棒的网站：

[http://www.25hoursaday.com/CsharpVsJava.html](http://www.25hoursaday.com/CsharpVsJava.html)

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2009-03-31T21:53:47.903

Josh Bloch 的 Effective Java 是一本很棒的书。如果您想学习现代 Java 习语，没有比这更好的地方了。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2009-04-01T02:54:24.873

这个类似的[SO Thread](https://stackoverflow.com/questions/471448/tips-for-moving-from-c-to-java/471739)可能会有所帮助。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2009-04-01T06:31:57.673

Be prepared to do a lot of reading. C# (assuming this was the language you have been using)is generally regarded as an improved Java, so the Java basics will not be hard to grasp. Java development tools are generally not as tightly integrated as the Microsoft stack, thus allowing for choices to be made. Lots of discussions in Javaland revolve around choosing tools.

Get to know something about the way Java packages things (jar, war, ear). Learn about the classpath (an endless source of joy and grief). Build a mental picture of how things work at compile time and run time (generics and type erasure, for instance).

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2009-04-01T05:44:57.490

访问 JavaRanch ( [http://www.javaranch.com/](http://www.javaranch.com/) ) 并使用规则综述测试您的 Java 知识！将其视为认证模拟考试，但与奶牛有关。（“在制作规则综述时没有奶牛受到伤害。”）

# java - Castor 解组异常要求提供的字段

> ID：702865
> 
> 赞同：2
> 
> 时间：2009-03-31T20:21:03.900
> 
> 标签：java, castor

我有这个架构：

```
<?xml version="1.0" encoding="utf-8" ?>
<xs:schema elementFormDefault="qualified" xmlns:xs="http://www.w3.org/2001/XMLSchema">
  <xs:element block="" final="" name="mensaje">
    <xs:complexType>
      <xs:all>
        <xs:element minOccurs="1" maxOccurs="1" name="identificacion" type="Head" />
        <xs:element minOccurs="1" maxOccurs="1" name="consulta">
          <xs:complexType>
            <xs:all>
              <xs:element minOccurs="1" maxOccurs="1" name="cuit" type="xs:string" />
            </xs:all>
          </xs:complexType>
        </xs:element>
      </xs:all>
    </xs:complexType>
  </xs:element>
  <xs:complexType name="Head">
    <!-- etc etc -->
  </xs:complexType>
</xs:schema> 
```

如您所见，元素“cuit”是必需的。我已经使用 Castor 创建了映射到模式的类。但我正在尝试以这种方式测试解组：

```
public void testCastorUnmarshalling()
{
    String xml = new StringBuffer("<?xml version=\"1.0\" encoding=\"utf-8\"?>")
    .append("<mensaje>")
    .append("  <identificacion>")
     // etc 
    .append("  </identificacion>")
    .append("  <consulta>")
    .append("    <cuit>35890</cuit>")
    .append("  </consulta>")
    .append("</mensaje>")
    .toString();

    StringReader xmlReader = new StringReader(xml);

    Consulta con = null;
    try {
      con = (Consulta) Unmarshaller.unmarshal(Consulta.class, xmlReader);
      con.validate();
    } catch (ValidationException ex) {
      fail("Validacion: " + ex.getMessage());
    } catch (MarshalException ex) {
      fail("Exception: " + ex.getMessage());
     }
  } 
```

cuit 字段在那里，但我得到：

例外：字段“_cuit”（其 xml 名称为“cuit”）是类“XML.entities.Consulta”的必填字段

任何想法为什么？

这是为 Consulta 生成的类（已删除评论...）

```
package XML.entities;

import org.exolab.castor.xml.Marshaller;
import org.exolab.castor.xml.Unmarshaller;

public class Consulta implements java.io.Serializable {

    private java.lang.String _cuit;

    public Consulta() {
        super();
    }

    public java.lang.String getCuit(
    ) {
        return this._cuit;
    }

    public boolean isValid(
    ) {
        try {
            validate();
        } catch (org.exolab.castor.xml.ValidationException vex) {
            return false;
        }
        return true;
    }

    public void marshal(
            final java.io.Writer out)
    throws org.exolab.castor.xml.MarshalException, org.exolab.castor.xml.ValidationException {
        Marshaller.marshal(this, out);
    }

    public void marshal(
            final org.xml.sax.ContentHandler handler)
    throws java.io.IOException, org.exolab.castor.xml.MarshalException, org.exolab.castor.xml.ValidationException {
        Marshaller.marshal(this, handler);
    }

    public void setCuit(
            final java.lang.String cuit) {
        this._cuit = cuit;
    }
    public static XML.entities.Consulta unmarshal(
            final java.io.Reader reader)
    throws org.exolab.castor.xml.MarshalException, org.exolab.castor.xml.ValidationException {
        return (XML.entities.Consulta) Unmarshaller.unmarshal(XML.entities.Consulta.class, reader);
    }

    public void validate(
    )
    throws org.exolab.castor.xml.ValidationException {
        org.exolab.castor.xml.Validator validator = new org.exolab.castor.xml.Validator();
        validator.validate(this);
    }

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2009-03-31T20:31:13.000

如果您没有展示您的 Java 类，我猜您没有 setter 方法`setCuit(String)`，而只有一个声明为的属性`public String _cuit`？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-03-31T21:12:05.260

我不知道这是否是您的确切问题，但您可能不想要`<xs:all>`，而是`<xs:sequence>`. 也就是说，您的架构应该是：

```
<?xml version="1.0" encoding="utf-8" ?>
<xs:schema elementFormDefault="qualified" xmlns:xs="http://www.w3.org/2001/XMLSchema">
  <xs:element block="" final="" name="mensaje">
    <xs:complexType>
      <xs:sequence>
        <xs:element minOccurs="1" maxOccurs="1" name="identificacion" type="Head" />
        <xs:element minOccurs="1" maxOccurs="1" name="consulta">
          <xs:complexType>
            <xs:sequence>
              <xs:element minOccurs="1" maxOccurs="1" name="cuit" type="xs:string" />
            </xs:sequence>
          </xs:complexType>
        </xs:element>
      </xs:sequence>
    </xs:complexType>
  </xs:element>
  <xs:complexType name="Head">
    <!-- etc etc -->
  </xs:complexType>
</xs:schema> 
```

# c# - 使用 WPF 构建高度模块化的业务应用程序？

> ID：702870
> 
> 赞同：10
> 
> 时间：2009-03-31T20:21:31.230
> 
> 标签：c#, wpf, module, add-in

我在脑海中充实了一个 WPF 业务应用程序，而引起我兴趣的一件事是我应该如何处理使它变得难以置信的模块化。例如，我的主应用程序将简单地包含启动界面、加载模块、连接到服务器等的基础知识。这些模块以类库的形式包含它们自己的逻辑和 WPF 窗口。模块可以定义自己的资源字典，并从主应用程序的资源字典中提取常用画笔等。

实施这种性质的系统的最佳方法是什么？应该如何构建主界面，以便它加载的模块几乎可以改变其用户界面和逻辑的任何方面？

我意识到这是一个相当模糊的问题，但我只是在寻找一般输入和头脑风暴。

谢谢！

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2009-03-31T20:24:25.107

查看[复合客户端应用程序指南](http://msdn.microsoft.com/en-us/library/cc707819.aspx)

复合应用程序库旨在帮助架构师和开发人员实现以下目标：

从可以由独立团队使用 WPF 或 Silverlight 构建、组装和部署的模块创建复杂的应用程序。

最大限度地减少跨团队依赖，并允许团队专注于不同领域，例如用户界面 (UI) 设计、业务逻辑实现和基础架构代码开发。

使用可促进独立团队之间可重用性的架构。

通过抽象所有团队可用的公共服务来提高应用程序的质量。

逐步集成新功能。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-04-03T06:56:53.663

首先，您可能对[SharpDevelop](http://www.icsharpcode.net/OpenSource/SD/)实现感兴趣。它基于它自己的插件系统，称为 AddInTree。它是一个单独的项目，可以在您自己的解决方案中免费使用。一切都在不同的插件中拆分，插件可以通过 xml 文件轻松添加/删除/配置。SharpDevelop 是一个开源项目，因此您将有机会研究如何引入基础架构以及服务总线和跨插件集成。核心插件树可以很容易地移动到 WPF 项目中而不会产生影响。

下一个选项是采用前面已经提到的“[复合客户端应用程序指南](http://msdn.microsoft.com/en-us/library/cc707819.aspx)”（又名[Prism](http://www.codeplex.com/prism)，又名[CompositeWPF ）。](http://www.codeplex.com/CompositeWPF)您将获得开箱即用的 Unity（对象构建器）支持、事件聚合以及实现的一组有价值的设计模式。

如果您想自己执行一些低级设计和架构，[MEF](http://www.codeplex.com/mef)将是最好的选择（尽管我个人喜欢这三个一起工作）。这是 VS 2010 的基础，因此您可以确定该项目将来不会失去支持。

我的建议是详细说明这些方法，并选择最适合您的需求和项目需求的最佳和有效的方法。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-03-31T20:25:47.430

看看[棱镜](http://www.codeplex.com/CompositeWPF)

# javascript - 如何将 javascript 函数更改为 ActionScript 3？

> ID：702880
> 
> 赞同：-1
> 
> 时间：2009-03-31T20:23:38.993
> 
> 标签：javascript, actionscript-3, actionscript

任何人都可以帮我将该javascript函数更改为AS3吗？

谢谢 ：）

```
 function parseURLtoVars(strLocation){
        var rArray = new Array();
        var key;
        var urlString = new String(strLocation);

        if (urlString.search(/\?/)>-1){
            var qArray = urlString.split('?')[1].split('&');

            if (qArray.length > 0){
                for (key in qArray){
                    var arVal = qArray[key].split('=');
                    if (arVal.length ==2){
                        rArray[arVal[0]] = arVal[1];
                    } else {
                        continue;
                    }
                }
                return rArray;
            } else {
                return false;
            }
        }
        return false;
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-03-31T20:30:52.923

这将参数作为对象返回，返回布尔值应该是一个简单的编辑。

```
function getParams(documentRoot):Object
{
 try {
  var params:Object = LoaderInfo(documentRoot.loaderInfo).parameters;
  var pairs:Object = {};
  var key:String;
  for(key in params) {
  pairs.key = String(params.key);
 }
 } catch(e:Error) {
  return {};
 }
  return params;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-03-31T20:32:33.543

我相信您只需将类型定义添加到您的函数和变量中。

所以：

```
function parseURLtoVars(strLocation):Array
{
    var rArray:Array = new Array();
    var urlString:String = new String(strLocation);
    ...
            for(var key:String in qArray) 
        ...
        return rArray;
        } else {
        return null;
        }
    }
    return null;
} 
```

我将 false 的返回设置为空值，但您可以将函数返回类型更改为 Object，这样您就可以从中返回任何内容，但我假设您希望返回一个数组。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-03-31T20:34:21.947

怎么样

```
 private function parseURLtoVars(strLocation:String):*
    {
            var rArray:Array = new Array();
            var key:String;
            var urlString:String = new String(strLocation);

            if (urlString.search(/\?/)>-1){
                    var qArray:Array = urlString.split('?')[1].split('&');

                    if (qArray.length > 0){
                            for (key in qArray){
                                var arVal:Array = qArray[key].split('=');
                            if (arVal.length ==2){
                                    rArray[arVal[0]] = arVal[1];
                            } else {
                                    continue;
                            }
                    }
                    return rArray;
                    } else {
                    return false;
                    }
            }
            return false;
    } 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2009-04-01T03:40:41.347

这不完全是您所要求的，但在 AS 3 中，我认为有一种更简单的方法：

```
import flash.net.URLVariables;

private function parseURLtoVars(strLocation:String):URLVariables {
    strLocation = strLocation.indexOf("?") != -1 ? strLocation.split("?")[1] : strLocation;
    return new URLVariables(strLocation);   
} 
```

你可以像这样使用它：

```
var testUrl:String = "test.php?key=value&key2=another_value";
var urlVars:URLVariables = parseURLtoVars(testUrl);

for(var k:String in urlVars) {
    trace(k + " = " + urlVars[k]);
} 
```

# wpf - 试图了解应用程序资源分配的细节

> ID：702883
> 
> 赞同：1
> 
> 时间：2009-03-31T20:24:44.233
> 
> 标签：wpf, dynamicresource

我有一个 ItemsSource="{DynamicResource testResource}" 的组合框。testResource 是我在 C# 代码中设置的 Application 资源。

我注意到的是，如果我在创建应用程序之前加载 Window，则 ComboBox 不会加载资源：

```
Window window = (Window)LoadXaml("Window1.xaml");
Application app = new Application(); 
```

此代码有效

```
Application app = new Application();
Window window = (Window)LoadXaml("Window1.xaml"); 
```

此外，即使我在应用程序之前创建了窗口，我也可以稍后在按钮单击处理程序中加载资源。

有人可以解释一下，会发生什么？为什么顺序很重要？

Window1.xaml：

```
<Window 
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    Title="Window1" Height="300" Width="300">
    <StackPanel>
        <ComboBox ItemsSource="{DynamicResource testResource}" SelectedIndex="0"></ComboBox>
        <Button x:Name='testButton'>Test</Button>
    </StackPanel>
</Window> 
```

C＃

```
class Program
{
    [STAThread]
    public static void Main()
    {
        Window window = (Window)LoadXaml("Window1.xaml");
        Application app = new Application();
        SetupResource();

        (window.FindName("testButton") as Button).Click += new RoutedEventHandler(testButton_Click);
        window.Show();
        app.Run(window);
    }

    static void testButton_Click(object sender, RoutedEventArgs e)
    {
        SetupResource();
    }

    static void SetupResource()
    {
        List<string> list = new List<string>();
        list.Add("Hola");
        list.Add("Mundo");
        Application.Current.Resources["testResource"] = list;
    }

    static object LoadXaml(string fileName)
    {
        return XamlReader.Load(File.Open(fileName, FileMode.Open));
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2009-04-30T17:37:35.930

不确定，但我猜是因为`Application`'s Resources 仅在`Application`创建对象时加载。所以如果你想访问`testResource`，你需要在调用后进行`new Application()`。

# git - 为什么企业要使用分布式版本控制？

> ID：702892
> 
> 赞同：10
> 
> 时间：2009-03-31T20:27:11.920
> 
> 标签：git, dvcs

似乎很多人阅读了分布式版本控制并隐含地理解为什么它对开源开发是一件好事，因为许多分布式开发人员都独立地根据自己的选择而不是管理层的要求行事。但是从这种印象中，很多人形成了 DVCS*仅*在开源环境中有用的想法。他们看不到这将如何帮助发布专有产品并且不使其版本控制系统可从外部访问的组织，或者它将如何帮助单个开发人员。

如果企业选择使用分布式版本控制（如 git、darcs 或 Mercurial）而不是集中式版本控制（如 CVS 或 Subversion），企业可以看到哪些好处？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2009-03-31T23:10:24.787

这个论点在我看来似乎倒退了。

鉴于集中式修订控制系统只是分布式系统的众多用例之一，应用这样的限制对公司有何好处？

我从经验中知道，当 p4 服务器变慢或中断或您离它太远时，使用它的*每个*人都必须停止工作。

人们喜欢将“平面”论点视为有点像稻草人，但我去过那里真正重要的地方。在互操作事件或客户演示的现场，我们*现在*必须在网络支持有限的环境中构建一些东西，所有工作都必须回来*，*我希望能够在我犯错时恢复。

我听到的两个论点对我来说不是很好：

1.  无法获取所有代码并运行。
2.  锁定

1号只是愚蠢的。也许获得完整的历史记录*稍微困难*一些（如果我不能，反正没有修订控制系统），但是当谈到我们在这里谈论的那种恐惧时，我可以抓住最新的修订版然后它同样危险。

2 号似乎真的试图使用错误的工具来完成这项工作。我曾经从 RCS 用户那里得到反 CVS 参数，因为他们真的认为你应该每次都锁定*每个**文件*，以防止两个人，我不知道，工作。

 *通信是带外的。如果你有大的、不可合并的文件，我认为可以讨论它们。IMO，许多有这个问题的人不想要一个版本控制系统，而是一个快照文件系统（zfs、9fs、Drop Box 等）。

不过，总的来说，我不明白为什么人们甚至会问“我为什么要给我的开发人员提供更便宜、更快、更可靠、更健壮并提高生产力的工具？” 各种问题。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2009-03-31T20:36:34.393

首先，DVCS 不会阻止集中式代码管理：您仍然可以将一个存储库设置为“参考”存储库，所有开发人员都可以从中提取。
所以这里的好处（实际上是一个副作用）是通过数据复制进行自然备份，同时维护一个中央代码库。

但真正的好处来自项目间的交叉开发：即当您需要“来自另一个团队，来自另一个项目”的开发时，以便您的工作继续进行：您可以轻松地将一个他们的工作分支拉入您的存储库（通过跟踪它），而不必等待他们在中央存储库中正式发布它。

这意味着即使存储库仅在*内部*（公司内部）复制，您仍然可以获得 DVCS 的主要优势，即易于跟踪、拉取和合并来自本地和不同存储库的分支，同时拥有发布代码的主要基地在开发生命周期的其余部分。
（每个集成、认证、预生产测试都只能从发布到该中央存储库的代码运行）。

人们还可以看到以这种方式管理的 DVCS 是一个自然的“清理”过程（只有“有效”的内容——例如至少经过单元测试的内容——才能发布到中央存储库中），具有更清晰的历史记录（所有中间提交可以留在本地存储库的主题分支中）。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2009-03-31T23:34:40.110

我同意 VonC，但想补充一点（至少在 git 中）创建新分支很简单，我可以轻松地处理我不一定想与其他存储库用户共享的实验代码或原型。这有助于保持中央存储库的清洁（如果您使用中央存储库），我认为让开发人员可以尝试他们可能不会在系统中尝试的事情，在这个系统中，您可能会将实验代码放入中央存储库。

我还注意到，使用 git 在多个分支中工作效率更高，因为分支之间的交换速度很快，而且我不必同时在单独的目录中检出多个分支。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2009-04-01T03:22:02.017

使用 git 可以连接到传统的基于中央存储库的系统。

例如，我发现 git 比 svn 本身更适合 svn。因此，如果公司坚持使用中央存储库系统，您仍然可以获得 git 的个人利益，同时仍然维护中央存储库。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2009-03-31T20:41:53.693

我注意到使用 Mercurial 的一件事是它改变了我的工作方式，甚至在我的工作站本地。每个副本都是一个完整的、独立的 repo 的想法有助于将不同的副本保存在不同的工作中，并将它们合并在一起或合并到“common”repo 中。这很好，因为不同事物的补丁集保持在一起，并且使工作本身保持独立。这些事情可以在传统系统中以某种方式完成，但在 Mercurial 中这是很自然的。在组织工作流程方面提供更大的灵活性还有其他不错的回报。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2009-03-31T20:41:30.933

我不明白为什么它对开源开发更好。商业项目也有许多开发人员同时从事不同的工作。您的“管理层授权”是否告诉您要编辑哪些文件以及何时编辑？

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-10-03T04:08:03.343

检查这里的优势......

```
http://blog.teamtreehouse.com/why-you-should-switch-from-subversion-to-git

http://www.ehow.com/info_12217814_git-commit-vs-push.html 
```

# c# - 闯入 C# 调试器以除以零

> ID：702895
> 
> 赞同：3
> 
> 时间：2009-03-31T20:27:44.537
> 
> 标签：c#, exception, debugging, nan, divide-by-zero

我将 C# 与 XNA 库一起使用，并且我的 Vector3 对象中出现了 NaN。当有问题的计算发生时（例如除以零），有没有办法闯入调试器？目前该程序只是继续运行。我正在使用 VS2008 专业版。在“用户未处理”列中选择了“异常”对话框中的所有异常。

编辑：为了澄清，我无法弄清楚错误的计算在哪里。这就是我希望调试器自动中断的原因。设置断点不是解决方案。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2009-03-31T20:30:40.163

听起来您正在以某种方式处理异常（例如捕获通用异常）您可以做的是按 Ctrl+alt+E 调出异常对话框——确保选中异常的“抛出时”复选框（ s) 你感兴趣

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2009-03-31T20:36:41.583

首先将 double/float 除以零会得到 Infinity/-Infinity，具体取决于 double 是正数还是负数。只有零双精度/浮点数除以零给出 NaN。无论哪种情况，都不会抛出异常。

您应该能够使用条件断点来检测特定变量何时设置为这些值之一。但在检查 NaN 时要小心，因为 NaN != NaN。

```
double a = double.NaN;
Console.Out.WriteLine(a == double.NaN); // false
Console.Out.WriteLine(a == a); // false
Console.Out.WriteLine(double.IsNaN(a)); // true 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2009-03-31T20:32:09.457

您可以设置一个仅在表达式的除数为 0 时才中断的[条件断点。](http://support.microsoft.com/kb/308469)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2011-04-17T01:48:17.667

我知道这是一个旧帖子，但是......

从经验来看，它几乎总是我错误使用的 Vector3.Normalize。

当我不确定它是否会是零长度时，我现在总是这样做

浮动 L = V.Length(); 如果（L！= 0.0）V /= L；

Normalize 中除以零应该给出异常，但事实并非如此。让我很头疼。

# design-patterns - 如何记录流入会计系统的资金交易？

> ID：702897
> 
> 赞同：2
> 
> 时间：2009-03-31T20:28:46.237
> 
> 标签：design-patterns, accounting

我一直在阅读 Martin Fowler 在他的“分析模式 - 可重用对象模型”一书中描述的会计模式。我了解了基本概念：账户、条目、交易等；但是当外部资金流入系统时，我不太清楚资金流向。为了确保没有钱被创建或销毁，我使用交易（2条腿），以便交易中的每个条目都与另一个相反。假设我是承包商，当客户付给我 1000 美元时，我应该如何记录这笔交易？

我现在能想到的是，我给客户设置了收入账户：一个客户会有一个收入账户；我会有我的余额账户。当客户付给我 1000 美元时，交易将有两个条目：一个在客户收入帐户中显示 -$1000，另一个在我的余额帐户中显示 +$1000。通过这种方式，它模拟了从客户到我（承包商）的现金流。随着客户支付的金额增加，客户收入账户将减少，例如 -$1000、-$2000、-$3000 等。这有意义吗？有没有更好的方法来模拟这种现金流？

提前感谢您的帮助/建议。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2009-03-31T21:30:45.540

您基本上是在询问双重会计。你的描述是正确的。并按客户收入计。你的意思是应收账款（客户收入账户）。

# unicode - 需要 ASCII 编码完全支持的语言列表

> ID：702899
> 
> 赞同：9
> 
> 时间：2009-03-31T20:29:03.707
> 
> 标签：unicode, ascii

我正在写一篇关于 Unicode 的文章，并讨论这种编码方案相对于 ASCII 等过时方法的优势。

作为我研究的一部分，我正在寻找一个参考，列出可以仅使用 ASCII 支持的字符完全表示的语言。用谷歌追踪它的运气不太好，我想我会利用 SO 的集体知识来看看是否有人有一个合理的列表。

## 关键点：

*   列出的所有语言都必须能够使用 ASCII 中可用的字符集**完全表示。**
*   我知道这不会是全面的，但我最感兴趣的是最常见的书面语言。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2009-03-31T21:05:31.810

据我所知，没有一种自然语言可以完全用 ASCII 表示。即使是发明 ASCII 的语言美式英语也不起作用：一方面，有很多外来词已融入美式英语语言中，无法用 ASCII 表示，例如*resumé*、*naïve*或一个词可能每个程序员都会经常使用*schönfinkeln*。

第二，ASCII 缺少几乎所有印刷字符，如“引号”、各种长度的破折号（- 和 -）、省略号（...）、细空格和宽空格等，所有这些都在美式英语中使用。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2009-03-31T22:00:59.150

来自我的拉丁语课的 IIRC，拉丁语中的长音符号是后来学习拉丁诗歌中的米的人添加的；它们不会被用于日常写作。所以你有拉丁语。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2009-03-31T20:33:53.620

鉴于借词，我认为没有*任何*这样的语言。即使是丑陋的美国人也知道“简历”和“简历”之间的区别。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2009-03-31T20:33:23.713

我假设您的意思是自然语言，只有 7 位 ASCII？

在这种情况下，列表非常小。主要是英文。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2009-03-31T21:53:28.107

一些[构建的语言](http://en.wikipedia.org/wiki/List_of_constructed_languages)（例如[Interlingua](http://en.wikipedia.org/wiki/Interlingua)和[Ido](http://en.wikipedia.org/wiki/Ido)）被设计为仅使用 ASCII 字符。日常使用的“真实”语言倾向于使用 ASCII 范围之外的字符，至少对于借词。

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2010-11-24T23:46:06.507

不是一种广泛使用的语言，但 Rotokas 只能使用 ASCII 字母编写。见[http://en.wikipedia.org/wiki/Rotokas_alphabet](http://en.wikipedia.org/wiki/Rotokas_alphabet)

# javascript - 生产代码有哪些好的 css 和 js 最小化器？

> ID：702907
> 
> 赞同：38
> 
> 时间：2009-03-31T20:30:49.553
> 
> 标签：javascript, css, optimization, jscompress

我正在寻找一些最小化 css 和 js 文件的应用程序或网站。理想情况下，他们可以将它们全部批处理，或者如果没有，一次一个。

* * *

## 回答 #1

> 赞同：36
> 
> 时间：2009-03-31T20:33:22.387

[YUI Compressor](http://yui.github.io/yuicompressor/)同时处理 JavaScript 和 CSS。我不确定你是否可以向它发送一批文件。

您*可以*在[YUI Compressor Online (yui.2clis.net)](http://yui.2clics.net/)上进行批处理，但该版本仅接受 JavaScript。另一个[在线 YUI 压缩器 (refresh-sf.com)](http://www.refresh-sf.com/yui/)也接受 CSS，但不批处理。

在比较各种缩小器方面，请参阅[jQuery：常见问题（FAQ）：如何压缩我的代码？](http://docs.jquery.com/Frequently_Asked_Questions#How_do_I_compress_my_code.3F)另外，请查看[Microsoft Ajax Minifier](http://ajaxmin.codeplex.com)。

jQuery 已从 YUI Compressor 切换到[Google 的 Closure Compiler](https://developers.google.com/closure/compiler/)，用于他们分发的缩小版本。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2009-03-31T20:34:08.080

[YUI Compressor](http://developer.yahoo.com/yui/compressor/)非常酷。您可以从命令行将其作为构建过程的一部分运行

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2009-03-31T20:39:50.767

看看[JavaScript CompressorRater](http://compressorrater.thruhere.net/)。它会为您提供的任何 JavaScript 实时比较各种压缩器（使用和不使用 gzip 压缩）。

它也（大部分）与 CSS 一起工作，虽然不是所有的缩小器都支持它，甚至不是所有的缩小器都支持它（例如 YUI）在比较表中正确显示。

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2009-10-16T22:19:02.453

微软今天在 codeplex 上发布了他们的[Microsoft Ajax Minifier 。](http://aspnet.codeplex.com/Release/ProjectReleases.aspx?ReleaseId=34488)包括 MS 构建任务和 VS 2005/2008 中的所有内容

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2009-03-31T20:34:40.107

我喜欢雅虎的这个：http: [//developer.yahoo.com/yui/compressor/](http://developer.yahoo.com/yui/compressor/)

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2009-03-31T20:33:09.550

我将Dean Edwards 的[Packer](http://dean.edwards.name/packer/)用于 javascript。

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2009-07-07T00:21:36.800

YUI Compressor还有[一个 .NET 端口，](http://yuicompressor.codeplex.com/)可让您：-

*   将缩小/文件合并到 Visual Studio 构建后事件中
*   集成到 TFS 构建（包括 CI）
*   如果您只想在自己的代码中使用 dll（例如即时缩小）。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2009-03-31T20:41:52.493

基本上，您正在寻找的是通过减少响应的大小来加速您的网站。

除了缩小的 js 和 css 文件之外，另一件事是您可以进行 http 压缩。请通过[这个](https://stackoverflow.com/questions/47827/html-compression-and-seo)和[这个](http://betterexplained.com/articles/how-to-optimize-your-site-with-gzip-compression/)。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2009-03-31T21:03:32.097

如果您不介意在构建过程中使用 Perl，那么[JavaScript::](http://search.cpan.org/~herrera/JavaScript-Minifier-0.01/lib/JavaScript/Minifier.pm)和[CSS::Minifier](http://search.cpan.org/~pmichaux/CSS-Minifier-0.01/lib/CSS/Minifier.pm)可以很好地工作。

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2009-06-17T14:29:34.563

你可以试试Boryi的[免费工具](http://www.boryi.com/html/free-tools.html)

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2010-11-11T03:35:23.523

或者试试这个： http: [//www.codeproject.com/KB/aspnet/CombineAndMinify.aspx](http://www.codeproject.com/KB/aspnet/CombineAndMinify.aspx)

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2011-03-24T23:24:44.197

YUI 压缩器很棒。

另一个工具（也是我选择的武器，因为它具有 PHP 特性）是托管在 Google 代码上的基于 PHP5 的 Minify 项目。如果您在 PHP 平台上，请考虑它。与其在事后通过服务运行你的东西，不如在你的网络服务器上安装和配置一次，然后根据需要进行编码和评论，minify 将即时重建（重新缩小）你的 CSS 和/或 Javascript。是的。我用过，很好用！！

[http://code.google.com/p/minify/](http://code.google.com/p/minify/)

# iphone - 使用 Core Graphics/Cocoa，您可以从后台线程绘制位图上下文吗？

> ID：702914
> 
> 赞同：9
> 
> 时间：2009-03-31T20:31:19.193
> 
> 标签：iphone, cocoa, multithreading, core-graphics, buffering

我在屏幕外绘制到一个`CGContext`创建的 using `CGBitmapContextCreate`，然后`CGImage`从中生成一个 with`CGBitmapContextCreateImage`并将其绘制到我的视图中`drawRect`（我还在上面绘制了一些其他的东西 - 这是一个隔离不同级别的可变性和复杂性的练习）。

当它全部在主线程上运行时，这一切都很好。然而，以这种方式拆分的动机之一是让屏幕外部分可以在后台线程上运行（我认为这应该没问题，因为它没有渲染到屏幕上下文）。

但是，当我这样做时，结果图像是空的！我检查了代码，并放置了明智的 NSLog 以验证一切都以正确的顺序发生。

我的下一步是将其归结为重现问题的最简单的代码（或找到我遗漏的一些愚蠢的东西并修复它）——如果有必要，我会在此处发布一些代码。但我首先想在这里检查一下我不会走错路。我在 googlesphere 的旅行中找不到任何可以说明问题的东西——但一位朋友确实提到他在尝试在后台线程中调整图像大小时遇到​​了类似的问题——这表明这里可能存在一些一般限制。

[编辑]

感谢您到目前为止的回复。如果没有别的，他们告诉我，至少我不是唯一一个对此没有答案的人——这是我想知道的一部分。在这一点上，我将把额外的工作放在尽可能简单的示例上，并且可能会返回一些代码或更多信息。同时保持任何想法:-)

需要提出的一点：有几个人在API 方面使用了术语*线程安全。*应该注意的是，在这种情况下有两种类型的线程安全：

1.  API 本身的线程性——即它是否可以在多个线程中使用（全局状态和其他重入问题，例如 C 的 strtok 是 API 可能不是线程安全的常见原因）。
2.  单个操作的原子性 - 多个线程是否可以通过 API 与相同的对象和资源进行交互，而无需应用程序级锁定？

我怀疑到目前为止提到的是第一种类型，但如果你能澄清一下，我将不胜感激。

[edit2 - 解决了！]

好的，我得到了一切工作。执行摘要是问题出在我身上，而不是位图上下文本身。

在我的后台线程中，就在我进入位图上下文之前，我正在对其他一些对象进行一些准备。事实证明，间接地，对导致 setNeedsDisplay 在某些视图上调用的其他对象的调用！通过将执行此操作的部分分离到主线程，它现在一切正常。

因此，对于遇到这个问题的人想知道他们是否可以在后台线程上绘制位图上下文，答案是可以（这里和答案中已经提出了警告）。

谢谢大家

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-04-01T08:30:00.980

只是一个猜测，但如果您尝试从另一个线程调用 setNeedsDisplay，则需要改为通过 performSelectorOnMainThread 调用它。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-04-01T01:46:20.700

如果您在一个且只有一个线程中使用 CGContextRef，那么您所做的应该可以工作。我之前用 8 个内核处理图像的 8 个不同部分，然后将不同的结果 CGImageRef 合成在一起并在屏幕上绘制它们。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-04-01T08:16:23.697

Apple 没有提及 iPhone 上的线程安全，但 Cocoa（相对于 UIKit）[通常对于绘图来说是线程安全的](http://developer.apple.com/iphone/library/documentation/Cocoa/Conceptual/Multithreading/ThreadSafetySummary/ThreadSafetySummary.html "通常是线程安全的")。由于他们共享大量绘图代码，我认为在 iPhone 上绘图是线程安全的。

也就是说，您的经验表明存在问题。可能是您在渲染之前使用了图像吗？

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-03-31T21:59:27.250

并非所有 API 都是线程安全的。有些需要锁定或要求它们在主线程上运行。您可能需要搜索文档。我相信有一个页面总结了 SDK 的哪些部分是线程安全的，哪些不是。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2010-12-16T09:30:11.533

万一有人正在/正在寻找如何做到这一点，我写了[一篇博客文章](http://rssv2.blogspot.com/2010/12/offscreen-drawing-on-iphone-using.html)，描述了如何做到这一点，并将整个事情包装在一个 NSOperation 子类中。

# url - 创建 Tinyurl 风格的哈希

> ID：702916
> 
> 赞同：5
> 
> 时间：2009-03-31T20:31:25.247
> 
> 标签：url

有谁知道从字符串（url）生成看起来像 tinyurl 哈希的算法

我认为要求是

区分大小写的短数字和字母只有其他吗？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2009-03-31T20:34:05.380

我不认为 tinyurl 会对字符串进行散列；他们有一个数据库 ID (1, 2, 3)，它被转换为 base 36 (0-9A-Z)：[http ://en.wikipedia.org/wiki/Base_36](http://en.wikipedia.org/wiki/Base_36)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-03-31T20:35:59.010

散列不保证不会发生冲突（假设您要散列的项目多于散列的可能值），相反，一个好的散列算法将使它不会经常发生冲突。

这对于 URL 生成很重要，因为存在的 URL 总数大于可以存储在固定字符串哈希中的值。

相反，我相信您会看到一个递增的计数器，并使用具有大基数的数字系统（例如 62，对于数字 0-9，字符 az 和 AZ）来表示唯一的计数器值。

# javascript - 使用 JQuery 创建动态单选按钮

> ID：702925
> 
> 赞同：0
> 
> 时间：2009-03-31T20:33:09.347
> 
> 标签：javascript, jquery

我有一个项目，我需要根据用户在下拉菜单中选择的给定值，为用户提供几组不同的单选按钮选项。

例如..

```
<select id="aaa">
<option>red</option>
<option>blue</option>
<option>other</option>
</select>

<div id="abc">
Input<BR>
option 1 <input type="radio" name="colorinput" value="1" />
option 2 <input type="radio" name="colorinput" value="2"  />
</div>
<BR>
<div id="def">
Description<BR>
option 1 <input type="radio" name="colordesc" value="1" />
option 2 <input type="radio" name="colordesc" value="2" />
</div>
<BR> 
```

每次他们做出不同的选择时，我只想从一个（或两个）单选选项列表中添加/删除选项。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-03-31T20:37:48.990

你可以这样做：

```
$(document).ready(function() {
    // add a new input when a new color is chosen, for example
    $('#aaa').change(function() {
        var radio = $('<input>').attr({
            type: 'radio', name: 'colorinput', value: '3'
        });
        $(':radio:last-child', '#abc').after(radio).after('option 3 ');
    });
}); 
```

它[动态地创建](http://docs.jquery.com/Core/jQuery#htmlownerDocument)一个新输入并将其插入到元素内的[最后一个无线电](http://docs.jquery.com/Selectors/lastChild)[之后。](http://docs.jquery.com/Manipulation/after#content)`#abc`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-06-08T19:33:35.820

从 Paolo Bergantino 的帖子中尝试代替：

```
$(':radio:last-child', '#abc').after(radio).after('option 3 '); 
```

这：

```
$(':radio:last-child', '#abc').after(radio).after('option:eq(2)'); 
```

# sql-server - SQL Server 日志记录/用户跟踪功能

> ID：702937
> 
> 赞同：1
> 
> 时间：2009-03-31T20:34:23.680
> 
> 标签：sql-server, sql-server-2005, sql-server-2008, logging, tracking

我们最近转换了一个 Access 应用程序以将日期存储在 SQL 服务器上。表单仍驻留在 MS Access 中，但通过文件 DSN 链接到 SQL 服务器。

出现了一个关于在 SQL Server 中跟踪用户活动的功能的问题。

我推测如果我们在 SQL Server 中设置个人用户并在用户计算机上设置 DSN 时使用这些个人帐户，那么我们可能可以使用 SQL Server 来跟踪用户活动。这是真的？

我们目前有 SQL Server 2005 标准，但很快就会升级到 2008。

感谢您的任何建议！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-03-31T20:42:07.780

当您升级到 SQL 2008 时，您就有了[Change Data Capture](http://msdn.microsoft.com/en-us/library/bb522489.aspx)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-04-14T12:55:22.527

我目前正在跟踪 DDL 更改，所以这里有一个 DDL 触发器，它具有所需的 2 个函数和表结构......在为您的数据库运行“DbVersion”（例如 2.3.4）和“DbType”的代码集 ext props 之前（例如 dev ， test ， prod ）并用您选择的命名空间替换 [ga] 命名空间或创建一个...编辑：如果对象是新的，则使用 null 版本修复错误...

```
USE [GA_DEV]
GO

/****** Object:  DdlTrigger [TraceDbChanges]    Script Date: 05/07/2009 11:15:57 ******/
SET ANSI_NULLS ON
GO

SET QUOTED_IDENTIFIER ON
GO

create trigger [TraceDbChanges]
on database
for create_procedure, alter_procedure, drop_procedure,
create_table, alter_table, drop_table,
create_function, alter_function, drop_function , 
create_trigger , alter_trigger , drop_trigger 
as

set nocount on

declare @data xml
set @data = EVENTDATA()
declare @DbVersion varchar(20)
set @DbVersion =(select ga.GetDbVersion())
declare @DbType varchar(20)
set @DbType =(select ga.GetDbType())
declare @DbName varchar(256)
set @DbName =@data.value('(/EVENT_INSTANCE/DatabaseName)[1]', 'varchar(256)')
declare @EventType varchar(256)
set @EventType =@data.value('(/EVENT_INSTANCE/EventType)[1]', 'varchar(50)')
declare @ObjectName varchar(256)
set @ObjectName  = @data.value('(/EVENT_INSTANCE/ObjectName)[1]', 'varchar(256)')
declare @ObjectType varchar(25)
set @ObjectType = @data.value('(/EVENT_INSTANCE/ObjectType)[1]', 'varchar(25)')
declare @TSQLCommand varchar(max)
set @TSQLCommand = @data.value('(/EVENT_INSTANCE/TSQLCommand)[1]', 'varchar(max)')
declare @opentag varchar(4)
set @opentag= '&lt;'
declare @closetag varchar(4) 
set @closetag= '&gt;'
declare @newDataTxt varchar(max) 
set @newDataTxt= cast(@data as varchar(max))
set @newDataTxt = REPLACE ( REPLACE(@newDataTxt , @opentag , '<') , @closetag , '>')
-- print @newDataTxt
declare @newDataXml xml 
set @newDataXml = CONVERT ( xml , @newDataTxt)

declare @Version varchar(50)
set @Version = @newDataXml.value('(/EVENT_INSTANCE/TSQLCommand/CommandText/Version)[1]', 'varchar(50)')

-- if we are dropping take the version from the existing object 
if  ( SUBSTRING(@EventType , 0 , 5)) = 'DROP'
set @Version =( select top 1 [Version]  from ga.DbObjChangeLog where ObjectName=@ObjectName order by [LogId] desc)
if ( @Version is null)
set @Version = '1.0.0'

declare @Description varchar(max)
set @Description = @newDataXml.value('(/EVENT_INSTANCE/TSQLCommand/CommandText/Description)[1]', 'varchar(max)')

declare @ChangeDescription varchar(max)
set @ChangeDescription = @newDataXml.value('(/EVENT_INSTANCE/TSQLCommand/CommandText/ChangeDescription)[1]', 'varchar(max)')

declare @LoginName varchar(256) 
set @LoginName = @data.value('(/EVENT_INSTANCE/LoginName)[1]', 'varchar(256)')
declare @FirstName varchar(50)
set @FirstName= (select [FirstName] from [ga].[LoginsForUsers] where [LoginName] = @LoginName)
declare @LastName varchar(50)
set @LastName  = (select [LastName] from [ga].[LoginsForUsers] where [LoginName] = @LoginName)
declare @SchemaName sysname 
set @SchemaName = @data.value('(/EVENT_INSTANCE/SchemaName)[1]', 'sysname');
--declare @Description xml 
--set @Description = @data.query('(/EVENT_INSTANCE/TSQLCommand/text())')

print 'VERSION IS ' + @Version
print @newDataTxt
print cast(@data as varchar(max))

-- select column_name from information_schema.columns where table_name ='DbObjChangeLog'
insert into [ga].[DbObjChangeLog]
(
[DatabaseName] ,
[SchemaName],
[DbVersion] ,
[DbType],
[EventType],
[ObjectName],
[ObjectType] ,
[Version],
[Description],
[ChangeDescription],
[SqlCommand] ,
[LoginName] ,
[FirstName],
[LastName] 
)

values(

@DbName,
@SchemaName,
@DbVersion,
@DbType,
@EventType, 
@ObjectName, 
@ObjectType , 
@Version,
@Description,
@ChangeDescription,
@newDataTxt, 
@LoginName , 
@FirstName , 
@LastName
)

GO

SET ANSI_NULLS OFF
GO

SET QUOTED_IDENTIFIER OFF
GO

DISABLE TRIGGER [TraceDbChanges] ON DATABASE
GO

ENABLE TRIGGER [TraceDbChanges] ON DATABASE
GO 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-04-01T00:10:29.790

> 这是真的？

是的，表上的触发器以捕获更改会起作用。如果您需要此类信息，您还可以设置服务器端跟踪以将登录事件记录到表中。更具体一些更多的答案。

# c# - 使用 GNU Gettext 本地化 ASP.NET MVC 网站？

> ID：702941
> 
> 赞同：12
> 
> 时间：2009-03-31T20:35:58.607
> 
> 标签：c#, asp.net-mvc, localization, gettext

这可能是一个不寻常的问题，但是否有任何框架或至少一些帮助类可以帮助我使用 GNU Gettext 本地化 C# ASP.NET MVC 网站？我一直在以前的（托管代码）项目中使用 Gettext，并且非常感谢使用 PoEdit 翻译资源的可能性。

我想这意味着编写一些可以从 Gettext 中提取资源字符串的 HtmlHelper 扩展方法。甚至似乎有某种 C# gettext 包装器，但我找不到手册或教程。任何指针将不胜感激。

谢谢，

阿德里安

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2011-06-19T16:45:54.200

FairlyLocal 也不错。我根据自己的需要对其进行了修改，并且对它提供的功能非常满意：

[http://www.fairtutor.com/fairlylocal/](http://www.fairtutor.com/fairlylocal/)

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2009-05-14T18:55:02.353

Mono Project 网站上有一个关于如何在 C# 应用程序中使用 gettext的[教程。](http://www.mono-project.com/I18nGettext)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2010-03-03T12:29:41.617

这篇文章也涵盖了这个问题的具体主题，尽管它没有明确说明它是如何在托管土地上获取目录的：[http ://weblogs.manas.com.ar/spalladino/2009/10/01/using- gnu-gettext-for-i18n-in-c-and-asp-net/](http://weblogs.manas.com.ar/spalladino/2009/10/01/using-gnu-gettext-for-i18n-in-c-and-asp-net/)

# vb.net - 如何加快 CSV 文件处理速度？（500 万条或更多记录）

> ID：702944
> 
> 赞同：0
> 
> 时间：2009-03-31T20:36:28.277
> 
> 标签：vb.net, csv

我编写了一个 VB.net 控制台程序来处理文本文件中的 CSV 记录。我正在使用[FileHelpers 库](http://filehelpers.sourceforge.net/)

连同 MSFT 企业库 4\. 读取记录之一并插入到数据库中。

处理文本文件上的 5+ 百万条记录大约需要 3 - 4 个小时。

有没有办法加快这个过程？以前有没有人处理过如此大量的记录，如果有新数据要更新，您将如何更新这些记录？

编辑：有人可以推荐一个分析器吗？更喜欢开源或免费。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-03-31T20:40:01.637

> 一次读取第一条记录并插入数据库

分批读取，分批插入。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-03-31T20:39:37.427

使用分析器 - 找出时间的去向。

缺少真正的分析器，请尝试以下操作：

*   计算仅逐行读取文件而不对它们做任何事情需要多长时间
*   取一条样本线，计算解析它并执行您需要的任何处理所需的时间，5+ 百万次
*   生成随机数据并将其插入数据库，并计时

我的猜测是数据库将成为瓶颈。您应该考虑进行批量插入 - 如果您一次只插入一条记录，那可能比批量插入要慢很多。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2009-03-31T20:39:53.230

我过去做过很多这样的应用程序，您可以通过多种方式进行优化。

1.  确保您正在编写的代码正确地管理内存，像这样的一个小错误可能会减慢进程。

2.  考虑将数据库调用编写为异步，因为它可能是瓶颈，所以有点排队可能没问题

3.  考虑删除索引，进行导入然后重新进行导入。

4.  考虑使用 SSIS 进行导入，它已经过优化，并且可以立即执行此类操作。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2009-03-31T20:42:59.103

为什么不直接使用 Microsoft SQL Server Management Studio 或命令行 - SQLCMD 将该数据插入 SQL Server 数据库？它确实知道如何处理 CVC 文件。

BulkInsert 属性应在您的数据库上设置为 True。

如果必须修改，您可以将其插入到临时表中，然后使用 T-SQL 应用您的修改。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2009-03-31T20:39:58.113

最好的办法是尝试使用样本相对较小的分析器——这可以确定实际的滞留点在哪里。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2009-03-31T20:38:30.347

我会像加速任何事情一样加速它：通过分析器运行它并找出耗时最长的东西。

绝对没有办法猜测这里的瓶颈是什么——也许解析​​ CSV 文件的代码中存在错误，导致多项式运行时？也许有一些非常复杂的逻辑用于处理每一行？谁知道！

此外，对于“记录”，500 万行并不是那么重——一个不经意间的猜测说，一个合理的程序应该能够在半小时内完成它，一个一个好的程序少得多。

最后，如果您发现数据库是您的瓶颈，请检查每次插入后是否正在提交事务。这可能会导致一些非平凡的放缓......

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2009-03-31T20:45:07.507

将其加载到内存中，然后插入到数据库中。500 万行不应占用您的内存。问题是您实际上是在搅动您的磁盘——读取 CSV 和写入数据库。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2009-03-31T20:48:22.913

不确定你在用它们做什么，但你考虑过 perl 吗？我最近重新编写了一个 vb 脚本，它正在做类似的事情——处理数千条记录——时间从 vb 脚本的大约一个小时到 perl 的大约 15 秒。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2009-03-31T20:48:40.587

从文件中读取所有记录后（我会一次性读取整个文件，或者以块的形式读取整个文件），然后使用 SqlBulkCopy 类将您的记录导入数据库。据我所知，SqlBulkCopy 是导入记录块的最快方法。网上有很多教程。

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2009-03-31T20:52:58.440

正如其他人建议的那样，首先分析应用程序。

也就是说，您可能会从批量插入中受益。我使用的一个应用程序就是这种情况，而且影响很大。

考虑到 500 万次往返很多，特别是如果每​​个往返都是为了一个简单的插入。

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2009-03-31T20:54:04.913

在类似的情况下，通过从一次一行插入切换到使用[SqlBulkCopy](http://msdn.microsoft.com/en-us/library/system.data.sqlclient.sqlbulkcopy.aspx) API，我们看到了显着的性能改进。

[这里](http://www.sqlteam.com/article/use-sqlbulkcopy-to-quickly-load-data-from-your-client-to-sql-server)有一篇好文章。

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2009-03-31T21:12:25.897

您需要将数据批量加载到数据库中，假设它具有该功能。在 Sql Server 中，您会看到 BCP、DTS 或 SSIS - BCP 是最古老的，但可能是最快的。OTOH，如果在您的数据库中无法做到这一点，请在运行之前关闭所有索引，我猜是导致问题的数据库，而不是 .Net 代码。

# c# - 将单词添加到 SQL Server 全文词干分析器

> ID：702949
> 
> 赞同：2
> 
> 时间：2009-03-31T20:36:54.017
> 
> 标签：c#, sql-server, full-text-search

我现在已经挖了几个小时，找不到这样做的选项。我想做的是将单词添加到 SQL Server 中全文使用的词干分析器中。我在一家希望搜索名称变体的机构工作。换句话说，如果一名警官输入“Bill”的名字，我也会在“Will”或“William”上得到点击。有谁知道这是否可能？

我确实看过实现一个自定义的 IStemmable 接口，但这似乎有点过分解决这个问题。有谁知道更简单的方法或有现成的解决方案可以做到这一点？

谢谢...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-03-31T20:57:27.697

在 SQL Server 2K5 或 2K8 中，它被称为“词库”。在 MSDN 等方面做得很好

它处理这样的事情

```
 <expansion>
        <sub>Internet Explorer</sub>
        <sub>IE</sub>
        <sub>IE5</sub>
    </expansion>
    <replacement>
        <pat>NT5</pat>
        <pat>W2K</pat>
        <sub>Windows 2000</sub>
    </replacement>
    <expansion>
        <sub>run</sub>
        <sub>jog</sub>
    </expansion> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-04-01T12:45:58.573

叹....

谢谢。有一次，我肯定试图让它变得更加困难，而不是它需要的。我想我很早就找到了词干分析器，并在我的搜索中继续使用它。

再次感谢。

# vba - 如何在 VBA for Word 中使用 COM？

> ID：702962
> 
> 赞同：2
> 
> 时间：2009-03-31T20:40:18.970
> 
> 标签：vba, com, ms-word, ms-office

我正在使用 Microsoft Office 2007 和 2003（特别是 Word）中的 VBA。

我需要的是使用[VBA中的自定义](http://en.wikipedia.org/wiki/Visual_Basic_for_Applications)[COM](http://en.wikipedia.org/wiki/Component_Object_Model)对象并使用它的方法。我已经在 Word 2007 中这样做了，但它在 Word 2003 中崩溃了。

这是我正在使用的命令：

```
 Dim oCOM as Object.

    Set oCOM = CreateObject("COMDLL.COMObj") 
```

我收到了这个错误：

> 找不到文件或程序集名称 COMDLL 或其依赖项之一。

如何使其适用于 Office 2003？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-03-31T20:50:25.327

如果您刚刚将文件复制到 Word 2003 机器，您可能需要使用[regsvr32来注册 COM 组件。](http://en.wikipedia.org/wiki/Regsvr32)

例如：

```
 regsvr32 yourcomfilesname.dll 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-06-18T23:27:35.097

问题不是创建 COM 对象，而是 Office 错误，因此我使用 Microsoft 更新 Office 2003 修复了它。

以下是更新网址：

[Office 2003 更新 (KB907417)](http://www.microsoft.com/downloads/details.aspx?familyid=1B0BFB35-C252-43CC-8A2A-6A64D6AC4670&displaylang=en)

# .net - 寻找有关 Windows Forms .Net 调整大小组件的建议

> ID：702967
> 
> 赞同：2
> 
> 时间：2009-03-31T20:42:11.477
> 
> 标签：.net, winforms, resize, screen-resolution

默认情况下，windows 窗体调整大小的逻辑是有限的——锚定和停靠。过去，我在需要时推出了自己的自定义调整大小逻辑。但是，我开始着手一个项目，该项目具有大量非常复杂的表单，必须自动调整大小以适应不同的分辨率。我不在乎在调整大小逻辑上投入大量时间。

我看到有些公司在销售宣传统一调整大小的组件。有没有人有任何调整组件大小的经验/有任何建议？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-03-31T22:45:20.137

你看过[TableLayoutPanel](http://msdn.microsoft.com/en-us/library/system.windows.forms.tablelayoutpanel.aspx)吗？它应该允许您拥有不同的“单元格”，每个单元格都包含一个 UI 元素，并且所有单元格都以相同的速度增长。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2009-04-01T13:40:20.750

我发现一个组件[.net resize](http://www.soft-group.it/net/index.php?c=3a&id=11&pagina=3)似乎工作得很好。只需将其放在表单上，​​它就会使表单完全可调整大小。不幸的是，一个座位 178 美元有点贵。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2009-04-01T02:29:32.827

是的，TableLayoutPanel 并在表单上将 AutoSize 设置为 True 可能非常强大，但需要一点时间来理解发生了什么，但如果你有几个小时来习惯它，你可以制作一些很棒的对话框而不必做很多工作。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2009-04-01T13:50:09.900

如果您不想购买任何东西并且 TableLayoutPanel 不足以满足您的需求（这意味着您有一些非常特殊的需求），您始终可以自己创建一个组件来管理调整大小，这适用于您的所有表单. （有点像你上面描述的.net resize）

您还可以计算创建与 .net 调整大小相同的工作所需的时间。如果时间与成本看起来相似，则取决于您的截止日期，您可能更愿意自己编写代码，以便完全控制。

# sql - 如何使用 SQL Server 2005 将逗号分隔值展开为单独的行？

> ID：702968
> 
> 赞同：2
> 
> 时间：2009-03-31T20:42:14.627
> 
> 标签：sql, sql-server, sql-server-2005

我有一个看起来像这样的表：

```
ProductId, Color
"1", "red, blue, green"
"2", null
"3", "purple, green" 
```

我想将其扩展到：

```
ProductId, Color
1, red
1, blue
1, green
2, null
3, purple
3, green 
```

完成此任务的最简单方法是什么？proc中没有循环是否可能？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2009-03-31T20:49:20.413

看看这个功能。我已经完成了类似的技巧来拆分和转置 Oracle 中的数据。循环数据，将解码后的值插入到临时表中。修道院的事情是 MS 会让你在运行中执行此操作，而 Oracle 需要一个显式的临时表。

[MS SQL 拆分函数](http://www.sqlteam.com/forums/topic.asp?TOPIC_ID=50648)
[更好的拆分函数](http://www.devx.com/tips/Tip/20009)

**作者编辑：** 效果很好。最终代码如下所示（在创建 split 函数之后）：

```
select pv.productid, colortable.items as color
from product p 
    cross apply split(p.color, ',') as colortable 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2009-03-31T21:25:37.223

根据您的表格：

```
create table test_table
(
     ProductId  int
    ,Color      varchar(100)
)

insert into test_table values (1, 'red, blue, green')
insert into test_table values (2, null)
insert into test_table values (3, 'purple, green') 
```

像这样创建一个新表：

```
CREATE TABLE Numbers
(
    Number  int   not null primary key
) 
```

具有包含值 1 到 8000 左右的行。

这将返回你想要的：

**这里的编辑**
是一个更好的查询，根据@Christopher Klein 的出色回答稍作修改：

我添加了“LTRIM()”，因此颜色列表中的空格将被正确处理：“红、蓝、绿”。他的解决方案不需要空格“红、蓝、绿”。此外，我更喜欢使用我自己的 Number 表，而不是使用 master.dbo.spt_values，这也允许删除一个派生表。

```
SELECT
    ProductId, LEFT(PartialColor, CHARINDEX(',', PartialColor + ',')-1) as SplitColor
    FROM (SELECT 
              t.ProductId, LTRIM(SUBSTRING(t.Color, n.Number, 200)) AS PartialColor
              FROM test_table             t
                  LEFT OUTER JOIN Numbers n ON n.Number<=LEN(t.Color) AND SUBSTRING(',' + t.Color, n.Number, 1) = ','
         ) t 
```

**编辑结束**

```
SELECT
    ProductId, Color --,number
    FROM (SELECT
              ProductId
                  ,CASE
                       WHEN LEN(List2)>0 THEN LTRIM(RTRIM(SUBSTRING(List2, number+1, CHARINDEX(',', List2, number+1)-number - 1)))
                       ELSE NULL
                   END AS Color
                  ,Number
              FROM (
                       SELECT ProductId,',' + Color + ',' AS List2
                           FROM test_table
                   ) AS dt
                  LEFT OUTER JOIN Numbers n ON (n.Number < LEN(dt.List2)) OR (n.Number=1 AND dt.List2 IS NULL)
              WHERE SUBSTRING(List2, number, 1) = ',' OR List2 IS NULL
         ) dt2
    ORDER BY ProductId, Number, Color 
```

这是我的结果集：

```
ProductId   Color
----------- --------------
1           red
1           blue
1           green
2           NULL
3           purple
3           green

(6 row(s) affected) 
```

这与您想要的顺序相同...

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2009-03-31T21:15:19.837

你可以试试这个，不需要任何额外的功能：

```
声明@t 表 (col1 varchar(10), col2 varchar(200))
插入@t
          选择“1”、“红、蓝、绿”
联合所有选择'2'，NULL
union all select '3', 'green,purple'

选择 col1, left(d, charindex(',', d + ',')-1) as e from (
    select *, substring(col2, number, 200) as d from @t col1 left join
        （从 master.dbo.spt_values 中选择不同的数字，其中数字在 1 到 200 之间） col2
        在 substring(',' + col2, number, 1) = ',') t

```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-03-31T20:53:16.910

如果可能的话，修复你的数据库。数据库单元格中的逗号分隔列表在 99% 或更多的情况下表示存在缺陷的架构。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2009-03-31T20:53:45.787

我会为此创建一个 CLR 表定义的函数：

[http://msdn.microsoft.com/en-us/library/ms254508(VS.80).aspx](http://msdn.microsoft.com/en-us/library/ms254508(VS.80).aspx)

这样做的原因是 CLR 代码在解析字符串（计算工作）方面会做得更好，并且可以将该信息作为一个集合传回，而这正是 SQL Server 真正擅长的（集合管理）。

CLR 函数将根据解析的值（和输入的 id 值）返回一系列记录。

然后，您将对表中的每个元素使用 CROSS APPLY。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2017-10-09T12:21:10.207

只需将您的列转换为 xml 并查询它。这是一个例子。

```
select 
    a.value('.', 'varchar(42)') c
from (select cast('<r><a>' + replace(@CSV, ',', '</a><a>') + '</a></r>' as xml) x) t1
cross apply x.nodes('//r/a') t2(a) 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2019-09-28T06:36:51.883

我在帖子发布 10 年后提出了这个问题。SQL server 2016 添加了 STRING_SPLIT 函数。通过使用它，这可以写成如下。

```
declare @product table
(
    ProductId int,
    Color     varchar(max)
);
insert into @product values (1, 'red, blue, green');
insert into @product values (2, null);
insert into @product values (3, 'purple, green');

select
    p.ProductId as ProductId,
    ltrim(split_table.value) as Color
from @product p
outer apply string_split(p.Color, ',') as split_table; 
```

# sql - 如果 2^32 还不够怎么办？

> ID：702975
> 
> 赞同：10
> 
> 时间：2009-03-31T20:43:53.563
> 
> 标签：sql, mysql, database, primary-key, large-data-volumes

如果表中有这么多条目，那么 2^32 不足以满足给定时间段（日、周、月……）内的 auto_increment ID 怎么办？
如果 MySQL 提供的最大数据类型不够用怎么办？

我想知道我应该如何解决这样一种情况：我的表中添加了这么多需要唯一 ID 的条目，但我在一个时期内填写了我的数据类型？

我怎样才能在 MySQL（或任何其他系统）内实现无限数量的唯一 ID 或至少成倍增加？

理想情况下，我希望像

```
> SELECT * FROM table;

+---+------+
| a |  b   |
+---+------+
| 1 |  1   |
| 1 |  2   |
| 1 |  3   |
|...| .... |
|...| .... |
| 1 | 2^32 |
| 2 |  1   |
| 2 |  2   |
+---+------+ 
```

这成倍地增加了条目的数量。

你如何应对这种情况？
请记住 - 要求是任何条目都有唯一的 ID。

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2009-03-31T22:20:36.937

你不觉得一个`BIGINT UNSIGNED`就足够了吗？这是 0 - 18.446.744.073.709.551.615 的范围，或一年每天有 50.539.024.859.478.223 条目（365 天/年），每小时 2.105.792.702.478.259 条目，每分钟 35.096.545.041.304 条目或每秒 584.942.417.355。

[假设每秒写入 600 次（没有任何读取）](http://dev.mysql.com/doc/refman/5.1/en/replication-faq.html#qandaitem-17-3-4-1-8)，您可以以全速写入 974.904.028 年的条目。这应该足够了。

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2009-03-31T20:49:33.283

您可以使用 BIGINT 作为主键。默认情况下，这是一个 64 位数字。

编辑#2：显然我之前所说的关于改变 BIGINT 字节长度的内容是不正确的。BIGINT固定*为*8 字节限制。

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2009-03-31T20:47:13.710

只需使用 128 位密钥。不需要无限数量的键，因为您很快就会允许比宇宙中的原子数量更多的行。（大约 256 位）。

* * *

## 回答 #4

> 赞同：7
> 
> 时间：2009-03-31T22:13:30.010

如果您有太多数据而遇到此问题，那么选择主键可能是您最不关心的问题。

如果您使用的是 InnoDB 引擎，则选择您将经常搜索的主键（尤其是在搜索返回许多行的情况下）可能有助于提高性能，因为它会聚集主键，从而更好地进行范围扫描.

* * *

## 回答 #5

> 赞同：5
> 
> 时间：2009-03-31T20:51:53.123

我会先转移到 BIGINT 2 ^ 64。GUID 将是另一种选择，但您需要自己以“某种形式”存储这些

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2009-03-31T20:48:30.527

不要使用自动递增的主键 - 使用[GUID](http://en.wikipedia.org/wiki/GUID)或类似的 - 来自维基百科文章：

> 虽然不能保证每个生成的 GUID 都是唯一的，但唯一键的总数（2^128 或 3.4×10^38）是如此之大，以至于生成两次相同数字的概率非常小。例如，考虑可观测宇宙，它包含大约 5×1022 颗恒星；然后，每颗星都可以有 6.8×1015 个普遍唯一的 GUID。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2009-03-31T22:05:18.250

当您将另一列添加到您的键时，您实际上将需要执行的索引扫描次数加倍（尽管第二列的索引要小得多）。

如前所述，VAST 数据集的最佳选择是 GUID（如果您的 RDBMS 本身支持它）或 varchar(16)。

使用 varchar / varbinary 的好处是，如果需要，您可以在将来自动扩展列。不好的部分是 varchar / varbinary 与整数相比是性能较差的键。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2009-03-31T20:48:39.263

我不确定如何在 MySQL 中自动生成它们，然后它们不一定是连续的，但我很确定您可以使用 GUID 而不必担心它们会被填满。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2009-03-31T20:52:17.350

您还可以使用 chars/varchars 作为键列，并使用 GUID 作为键。不过，与整数主键相比，我不知道这是否会导致性能损失。

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2020-02-04T12:53:42.777

如果 BIGINT 对您来说不够用，请在表中使用它，当条目数量达到 BIGINT 边界时，创建另一个表并从 0 重新开始。现在您将有 2 个表来存储相同类型的数据。

# javascript - 如何使用 Javascript 实现动态翻页/卷曲？

> ID：702976
> 
> 赞同：11
> 
> 时间：2009-03-31T20:44:50.503
> 
> 标签：javascript, jquery

我怀疑大多数 Web 开发人员都熟悉基于 Flash 的页面卷曲过渡到翻页？（[比如这里](http://www.cluttermagazine.com/shop/magazines/issue13/index.php)）

这可以用简单的 HTML+CSS+JS 以一种好的方式实现吗？
（或任何其他“本机”浏览器语言，如 SVG？）

我首选的库是 jQuery，但任何有效的 JavaScript 解决方案都是可以接受的。

# git - 为什么 git-cvsimport 缺少一个主要补丁集？

> ID：702980
> 
> 赞同：5
> 
> 时间：2009-03-31T20:45:34.120
> 
> 标签：git, git-cvs

[这是我之前的问题的](https://stackoverflow.com/questions/683091/how-do-i-debug-git-cvsimport-cant-see-complicated-commit)后续。

我可以查看 cvsps 的输出（保存在我的 ~/.cvsps 目录中），并查看一个主要复杂提交的补丁集。但是当我执行 cvsimport 来更新我现有的 git 存储库时，这个提交没有出现。我知道 git-cvsimport 会忽略 10 分钟以上的补丁集，以避免导入不完整的 CVS 提交。我想我也听说它会跳过无法识别相关分支的补丁集。还有哪些其他原因可能导致 git-cvsimport 忽略我的提交？我该如何调试呢？

这是 cvsps 输出的一点点：

```
patchset: 50064
date: 1238445635
author: skiphoppy
tag: 
tag_flags: 0
branch: HEAD 
branch_add: 1
descr:
My log message

-=-END CVSPS DESCR-=-
members:
file:ordinaryChangedFile; pre_rev:1.44; post_rev:1.45; dead:0; branch_point:0
file:newFileRenamedAndModifiedFromOldFile; pre_rev:INITIAL; post_rev:1.1; dead:0; branch_point:0
file:deletedFileGoneBecauseRenamed; pre_rev:1.2; post_rev:1.3; dead:1; branch_point:0
... 
```

那 branch_add: 1 行与它有什么关系吗？整个仓库中只有 9 个这样的提交；其他 50090 个提交说 branch_add: 0。除此之外，我不知道从 cvsps 或 git-cvsimport 的角度来看有什么区别。提交很复杂，涉及重命名几个文件并进行相关的内容修改。CVS 绝对难以处理。当然，对于 git 来说是一个快照，但是当真正的后端是 CVS 时，git 很难处理。

我必须再执行 3 次相同类型的复杂提交，而且由于 cvsimport 无法看到我的提交，我无法每次花费 4 1/2 小时从 CVS 重新导入一个全新的 git 存储库.

更重要的是，我担心我每天运行的 git-cvsimport（我打算将其放入 cron，或者甚至编写一个守护进程每五分钟左右运行一次）可能会在未来***错过提交！***我没有找到 git 现有存储库来获取这些提交的方法；我只能在一个全新的存储库中运行 git-cvsimport 并永远等待，而我在使用它时会失去对许多其他分支的使用。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2009-04-02T14:16:35.057

好吧，这可能是问题所在。我的 git-cvsimport 行如下所示：

```
git cvsimport -p x ... 
```

-px 应该将 -x 选项传递给 cvsps 以告诉它忽略之前运行时留下的缓存输出。我认为这样做的主要原因是最后几个可能不完整的补丁集将在您下次运行时被丢弃并完成。事实证明，它可能修复了更多问题，这可能就是其中之一。

[我从这篇博客文章中](http://issaris.blogspot.com/2005/11/cvs-to-git-and-back.html)学会了以这种方式运行 git cvsimport ，它目前是 Google 上“git cvs”的最高点击率之一。只是在上面的过程中，我试图通过 Perl 调试器对 cvsps 的输出运行 git-cvsimport，我必须检查并查看哪些参数真正进入 cvsps。我了解到 cvsps 是这样运行的：

```
cvsps --norc x --cvs-direct ... 
```

代替：

```
cvsps --norc -x --cvs-direct ... 
```

而且我通过实验验证，当传递 x 而不是 -x 时，我从 cvsps 得到不同的输出，缺少一些补丁集（我不知道模式是什么）。由于墨菲定律，cvsps 似乎没有报告这是一个问题，而且 git-cvsimport 从来没有看到它。

所以无论如何， git cvsimport 需要像这样运行：

```
git cvsimport -p -x ... 
```

在这一点上，我以前版本的这个存储库完全被淹没了，但我已经能够强制将最后一个问题提交到它们中（不过，一些早期的提交丢失了）。所以我又经历了四个小时的导入过程，我希望就是这样！

最后一个提示：Windows 上的 git-cvsimport 似乎根本不起作用。我得到的提交数量不到 10%，尽管我最终得到了一棵类似于我们项目当前状态的树。它似乎缺少几乎所有的历史......

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2010-03-17T13:40:40.820

非常感谢！我有同样的问题，可以在你的帮助下解决它！

我什至找到了一种避免从头开始重新运行 cvsimport 的方法。只需将“master”和“origin”分支设置为较旧的 git 提交，就可以让 cvsimport 重新导入补丁，因为包括缺失的补丁：

查找比丢失的提交更早的提交 ID：

> 混帐日志

使“原点”指向该提交

> git 分支 -f 起源

切换到原点（这样 'master' 不是当前的 HEAD）

> git结帐来源

现在让'master'指向旧的提交

> git 分支 -f 主原点

切换回主人

> git结账大师

现在，时间完全倒退了，您可以再次执行 cvsimport，这次是正确的

> git cvs 导入...

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-03-31T21:27:53.800

我最近遇到了这样的事情 - CVS 中有一个提交在 git cvsimport 之后没有出现在 git 中；后来的提交确实做到了（这让我很难受，因为我之后制作了非工作补丁。

然而，修复简单而愚蠢——我只是在丢失提交之前重置了 cvs/master 分支，重新运行 git cvsimport，它就在那里。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2009-03-31T21:38:37.207

嗯，好消息是 git-cvsimport 似乎是用 Perl 编写的，而我恰好是一名 Perl 程序员，所以也许我至少可以使用 Perl 调试器逐步了解该提交期间发生的情况。

对于任何想尝试这个的人，您必须找到 git-cvsimport 的完整路径并使用 -d 开关将其提供给 perl（Perl 解释器）：

```
perl -d /usr/local/libexec/git-core/git-cvsimport 
```

我还没有找到所有其他选项来解决这个问题，但是......我需要直接将 git-cvsimport 提供 cvsps 的输出，我想......

# python - 在 Python 中 URL 编码一个非值对

> ID：702986
> 
> 赞同：16
> 
> 时间：2009-03-31T20:48:16.953
> 
> 标签：python, json, urlencode

我正在尝试在 Python 中使用 Google 的 AJAX (JSON) Web Search API。我被困住了，因为 Python 的 urllib.urlencode() 只接受值对，而不是字符串本身来编码。在 Google 的 API 中，查询字符串是搜索词，它不与变量关联。

```
query = "string that needs to be encoded"
params = urllib.urlencode(query) # THIS FAILS
# http://code.google.com/apis/ajaxsearch/documentation/reference.html
url = "http://ajax.googleapis.com/ajax/services/search/web?v=1.0&rsz=large&%s&%s" % (params, GOOGLE_API_KEY)

request = urllib2.Request(url)
request.add_header('Referer', GOOGLE_REFERER)

search_results = urllib2.urlopen(request)
raw_results = search_results.read()
json = simplejson.loads(raw_results)
estimatedResultCount = json['responseData']['cursor']['estimatedResultCount']

if estimatedResultCount != 0:
    print "Google: %s hits" % estimatedResultCount 
```

如何对我的搜索词进行urlencode？

* * *

## 回答 #1

> 赞同：37
> 
> 时间：2009-03-31T20:52:33.887

我想你正在寻找[`urllib.quote`](http://docs.python.org/library/urllib.html#urllib.quote)。

# wpf - DataTemplate WPF 中的外部属性

> ID：702987
> 
> 赞同：4
> 
> 时间：2009-03-31T20:48:19.653
> 
> 标签：wpf, .net-3.5, properties, datatemplate

场景：我有一个 ListBox，而 ListBoxItems 有一个 DataTemplate。我想要做的是在 DataTemplate 中放置一个 ContextMenu。问题是我希望这个 ContextMenu ItemsSource 根据窗口中的某些属性而有所不同。我最初的想法是我可以将 ItemsSource 绑定到窗口中的一个属性，然后返回一个 ItemsSource；但是，我似乎无法正确绑定到此属性。我相信这是因为我在 DataTemplate 中，因此 DataContext（我相信这是正确的词）属于那个 ListBoxItem 而不是窗口。如何让 DataTemplate 中的 ContextMenu 绑定到 DataTemplate 之外的属性。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2009-03-31T21:52:41.527

您可以使用 RelativeSource FindAncestor 语法从窗口中获取 DataContext

```
<DataTemplate>
  <TextBlock Text="{Binding MyInfo}">
    <TextBlock.ContextMenu>
      <Menu ItemsSource="{Binding RelativeSource={RelativeSource FindAncestor, AncestorType={x:Type Window}}, Path=DataContext.MyContextMenuItems}"/>
    </TextBlock.ContextMenu>
  </TextBlock>
</DataTemplate> 
```

不完全确定，但绑定是正确的......如果您的 DataContext 是另一个对象类型，您只需要更改 AncestorType（例如通过 UserControl）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-03-31T21:22:50.210

[这可能是AttachedProperty](http://msdn.microsoft.com/en-us/library/ms749011.aspx)的一个很好的候选者。基本上，您要做的是将 ContextMenu 包装在 UserControl 中，然后将 Dependency Property 添加到 UserControl。例如：

## MyContextMenu.xaml

```
<UserControl x:Class="MyContextMenu" ...>
  <UserControl.Template>
    <ContextMenu ItemSource="{Binding}" />
  </UserControl.Template>
</UserControl> 
```

## MyContextMenu.xaml.cs

```
public static readonly DependencyProperty MenuItemsSourceProperty = DependencyProperty.RegisterAttached(
  "MenuItemsSource",
  typeof(Object),
  typeof(MyContextMenu),
  new FrameworkPropertyMetadata(false, FrameworkPropertyMetadataOptions.AffectsRender)
);
public static void SetMenuItemsSource(UIElement element, Boolean value)
{
  element.SetValue(MenuItemsSourceProperty, value);
  // assuming you want to change the context menu when the mouse is over an element.
  // use can use other events.  ie right mouse button down if its a right click menu.
  // you may see a perf hit as your changing the datacontext on every mousenter.
  element.MouseEnter += (s, e) => {
    // find your ContextMenu and set the DataContext to value
    var window = element.GetRoot();
    var menu = window.GetVisuals().OfType<MyContextMenu>().FirstOrDefault();
    if (menu != null)
      menu.DataContext = value;
  }
}
public static Object GetMenuItemsSource(UIElement element)
{
  return element.GetValue(MenuItemsSourceProperty);
} 
```

## Window1.xaml

```
<Window ...>
  <Window.Resources>
    <DataTemplate TargetType="ListViewItem">
      <Border MyContextMenu.MenuItemsSource="{Binding Orders}">
        <!-- Others -->
      <Border>
    </DataTemplate>
  </Window.Resources>
  <local:MyContextMenu />
  <Button MyContextMenu.MenuItemsSource="{StaticResource buttonItems}" />
  <ListView ... />
</Window> 
```

## 可视化树助手

```
public static IEnumerable<DependencyObject> GetVisuals(this DependencyObject root)
{
    int count = VisualTreeHelper.GetChildrenCount(root);
    for (int i = 0; i < count; i++)
    {
        var child = VisualTreeHelper.GetChild(root, i);
        yield return child;
        foreach (var descendants in child.GetVisuals())
        {
            yield return descendants;
        }
    }
}

public static DependencyObject GetRoot(this DependencyObject child)
{
    var parent = VisualTreeHelper.GetParent(child)
    if (parent == null)
      return child;
    return parent.GetRoot();
} 
```

*这个例子是未经测试的，今晚晚些时候我会看看并确保它是准确的。*

# java - 对于初学者的单人编程团队来说，Java 是一种过于复杂的编程语言吗？

> ID：702996
> 
> 赞同：1
> 
> 时间：2009-03-31T20:50:42.347
> 
> 标签：java

我正在尝试学习 Java，但似乎有太多的部分要放在一起。你有 JSP、Java EE、Java SE、Java ME 等......配置 。

我想进入网络编程，也许是移动。

有什么建议吗？

另一种编程语言？

java是这么复杂还是变得更容易了？

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2009-03-31T20:53:27.020

Java 作为一门语言当然不会太复杂。*整个*J2EE仅对单人团队几乎是可行的 - 但您很少需要整个 J2EE。

一个人的团队实现一个中型 Web 应用程序是完全合理的。我并不是说一个人可以自己编写 GMail，但你不应该太害怕技术堆栈——找到你真正*需要*的部分并专注于那些。另一方面，这本身就需要相当多的经验——作为Java的*新手，我真的不希望自己开始开发企业应用程序（即使是小型应用程序）。*

从小处着手。学习核心（语言、IO、集合）——然后从小项目开始。确定您是否想使用移动设备、桌面设备、服务器或其他设备 - 不要同时尝试所有这些设备。你会逐渐积累你的经验。

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2009-03-31T20:53:30.373

并不是说 Java 语言很复杂，而是存在可以帮助您完成工作的大量库和框架。这适用于许多编程语言。例如，查看 Perl 的 CPAN。使用什么语言很大程度上取决于你的目标是什么。

您可以从简单的开始，逐步发展到越来越大的项目。

Java 对于单人操作来说绝不是太复杂，但是学习任何形式的完整 Web 编程都是新的，需要学习很多东西。如果您出于同样的目的查看 .NET，那里也有很多。

除非您正在处理大型企业应用程序，否则请忽略除 JSP 和 JMS 以及极少数其他组件之外的所有 J2EE。J2EE 的最大份额仅在需要扩展的企业应用程序的上下文中有用，实际上在较小的应用程序中使用时可能是有害的。

Spring、Hibernate、Apache-*、Web Services 等框架可以帮助您完成工作，但在完成工作时还需要学习更多的东西。有很多东西要学。

你应该使用Java吗？好吧，很多开发都是用 LAMP（或 WAMP）完成的：Linux（或 Windows）+ Apache-HTTPD + MySQL + PHP。有了这个，您就不必担心 Java 或 .NET 或任何这些框架。LAMP/WAMP 适用于广泛的应用程序。

服务器上的 Java 和 .NET（有点）更适合大型服务，但是一旦您熟悉了它们，它们也适用于小型服务。

你必须决定你的确切目标是什么，然后看看人们是如何实施你正在做的事情的。这将帮助您确定哪些技术对于您正在寻找的利基市场是最必要的。

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2009-03-31T22:00:44.347

Java——语言——是现存最简单的强类型语言之一。我认为比 C++ 甚至它的近亲 C# 要简单得多。

标准的 API / 库确实很大，但没有人了解全部内容。当所有初学者看到大而新的东西时，你会感到害怕，但是当你只是做一些事情时，这一切都会过去。首先，您需要学习标准实用程序的东西——主要是 java.util 中的集合——然后，对于基本的 Web 开发，可能接下来是 JDBC 库和 Java Servlet 和 JSP。就是这样。

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2009-03-31T22:43:27.690

作为这里的另一种策略......

您在 Java 中会遇到的另一个问题是选择。在框架和技术等方面你有很多。

我最好的建议是搜索大约一天的时间，如果你很想发现什么技术吸引了你，或者谁的论点影响了你。然后，挑一个。任何人。真的，这并不重要，尤其是对于第一个项目。他们都有学习曲线，他们都有长处和短处，他们都有粉丝和敌人。

但关键是，一旦你选择了，坚持下去。你不可避免地会遇到一些问题，你会向其他人、其他地方提出这个问题，他们会说“哦，你应该使用 QED 而不是 KnifeForkSpoon”。你会再次猜测自己，去听听 QED 的奇迹，以及在它下出生的所有小猫和由它喂养的饥饿儿童。如果您屈服于“更绿的草”的警笛之歌，您的项目将会失败。（不失败，连枷。）

不要被追求，不要上当。只需解决您的问题并继续前进。最后，你在一个新项目上，然后去寻找最伟大的银弹。

顺便说一句，如果我今天刚开始使用 Java 进行 Web 编程，我会谦虚地提供这个简单的秘诀：

*   带有 JSTL 的 JSP 2.0 用于标记和表示
*   Stripes 或 Struts 2 用于逻辑（注意 Struts 2 (TWO)，Struts 1 是纯邪恶的）
*   “原始” JDBC，带有用于持久性的数据库池
*   Tomcat 或 Glassfish 用于容器（tomcat 更流行，GF 更易于开箱即用）
*   Netbeans 或 Eclipse（NB 更容易开箱即用）

这使用了当今 Java 中 Web 应用程序最基本但功能最强大的设施，具有很多适用性，并解决了 Web 应用程序的主要问题，而无需用厚厚的、不可穿透的层覆盖它们。

使用这些“粗略”的工具，您将学到很多东西。

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2009-03-31T20:57:07.727

你需要学会选择你的战斗。涵盖整个 J2EE 是一项艰巨的任务，对大多数人来说，一开始是不必要的。我认为初学者程序员的一个常见错误是他们认为他们需要学习所有东西。如果您从一开始就专注于核心语言结构，然后专注于 Web 或移动编程，您会发现您的时间会更有效率。

你会为你可以从一个区域转移到下一个区域的数量感到非常惊讶（和高兴）。一旦你了解了这门语言，不同平台的不同库就只是工具……坚持使用 Java。是一门很好学的语言。

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2009-04-06T15:21:29.133

我可以将“进入网络编程”理解为您只是在学习一般的网络编程吗？如果这是真的，如果您有时间，您可能会考虑暂时搁置 Java，并按照 Eddie 的建议仔细研究 LAMP/WAMP。（虽然我个人会使用 Perl 而不是 PHP。PHP 是更性感的简历素材，可以让你在前端做一些非常酷的事情，但根据我的经验，当涉及到编写服务器端代码时，Perl 只会让 PHP 大吃一惊. 而且我听说 HTML::Mason 扩展使 Perl 与 PHP 的前端漂亮相提并论，但我自己没有使用过。）

我以用 Java 编写 Web 应用程序和用 Perl 编写 Web 应用程序为生。我喜欢这两种语言，但作为一种学习工具，我将 Perl 置于 Java 之前。正如您所发现的，Java 是一个笨重的混蛋。正如其他人所提到的，其中一部分原因是，Java 是一种成熟的语言，具有多种扩展，不太可能满足您的当前需求。但是，即使进行了精简，您仍然需要处理相当多的开销，然后才能运行您的第一个“Hello World”网络应用程序。相比之下，使用 Perl 会更快。

（事实上​​，与其他语言相比，Java 总体上往往相当冗长。这不一定是坏事；我对 Perl 的一大抱怨是，您经常会遇到利用各种快捷方式和副作用来完成大量工作的代码。只需几行。这段代码通常非常出色、优雅、紧凑，而且对于非专家来说完全无法理解。对于那些在编写代码六个月后必须修改代码的可怜的白痴来说，简洁并不是一种美德——尤其是当你最终成为有问题的可怜的白痴。）

作为学习 Web 编程的一种方式，Java 的复杂性实际上可以与之抗衡。作为一名专业人士，我很高兴 Java 的基于 Web 的工具自动为我处理了很多繁重的工作，比如会话管理。但是直到我被扔进一个只有 Perl 的环境并且不得不自己处理所有这些东西时，我才完全*理解它在做什么。*

我想这取决于您为什么要这样做以及您可以投入多少时间。如果时间有限，并且您正在寻找能够吸引潜在雇主的东西，那么是的，Java 是一个很好的选择，并且您已经在此线程中获得了一些关于如何开始使用它的可靠建议。

但如果您有时间，我强烈建议您试一试老式 Perl/CGI 编程。它不再是一个特别有市场的技能，但你会学到一些值得了解的东西。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2009-03-31T21:00:53.087

您不必学习所有 Java 及其库。只需了解您手头的工作需要什么。您会发现有很多选择，但您不必每次都获得最佳选择。

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2009-03-31T21:42:17.743

如果您的基本编程概念很清楚，那么任何语言对您来说都不应该是困难的。我现在已经从 vb 6 切换到 java 到 c# 到 Objective c。真正让程序员的生活变得轻松的是 IDE、调试工具、文档和谷歌可以搜索的大量博客文章谷歌和堆栈溢出ofcourse :-) 所以我确实认为在编程大型团队经常导致更多的错误而不是结果

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2009-04-06T23:51:07.397

Java 不是一门复杂的语言，尽管乍一看很吓人。

我从 15 岁开始在家而不是在学校学习 Java（是的，是的，我知道这没什么好吹嘘的），通过一本书。这是一本挪威书，所以我不会链接到亚马逊；）

在阅读/破解了一半的书之后，我发现我最好放弃这本书并在网上寻找更多的东西。谷歌真的很棒！

我经常阅读有关 JVM、框架、第三方库、JSR 等所有花哨的功能，以及我的生活会变得多么美好，但我只是忽略了它们。是的，我试过了，但发现同时学习 Java 和一个并非真正必要的框架太令人困惑了。

有些人因为我不使用 insertRandomLibraryName() 或 insertFancyFrameworkName() 而大骂我一顿，并告诉我我会节省多少时间和精力，但我很高兴我没有听。

现在时代变了，我仍然每天都在学习新事物，或者更容易做旧事情的方法。我很高兴我在所有花哨的东西之前花时间学习语言本身。

另外，不要使用记事本编写代码，从一开始就使用 IDE。我唯一真正使用过的是 NetBeans，所以这是我唯一可以推荐的，但我确实对它非常满意！

至于Java SE、ME和EE，先从SE开始，你大概会发现现在已经够用了。你不必用EE写web，SE完全可以做webernet的东西；D

# actionscript-3 - 使用 Flex 调试消息？

> ID：702997
> 
> 赞同：3
> 
> 时间：2009-03-31T20:50:45.887
> 
> 标签：actionscript-3, apache-flex

从 Flex 打印“调试”消息的最快方法是什么？您知道，诸如“在 ($x, $y) 上单击鼠标”或“从 $sender 接收和事件”之类的内容。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2009-03-31T20:54:24.507

```
trace(mouseEvent.x + ", " + mouseEvent.y); 
```

如果您使用的是 Eclipse/Flex Builder，则将其打印到控制台。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2009-03-31T21:13:46.877

使用 trace() 是一种在 Flex Builder 控制台中查看消息的简单方法。但是您必须在调试模式下运行才能看到它们。您还可以获得要打印到本地文件的跟踪语句。对于更复杂的日志记录，Flex SDK 中有一个类似 Log4J 的框架。有关所有这些的更多信息，请参见 Flex 文档：
[http ://livedocs.adobe.com/flex/3/html/help.html?content=logging_07.html](http://livedocs.adobe.com/flex/3/html/help.html?content=logging_07.html)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-03-31T20:53:49.047

跟踪（`somestring`）

# vbscript - 通过 openDSObject 在 vbScript 中连接到 OpenLDAP 服务器

> ID：702998
> 
> 赞同：3
> 
> 时间：2009-03-31T20:50:51.783
> 
> 标签：vbscript, ldap, openldap

我的代码可以正常连接到 Active Directory 服务器：

```
Dim oDSObj: Set oDSObj = GetObject("LDAP:")
Dim oAuth: Set oAuth = oDSObj.OpenDSObject("LDAP://ldap.domain.com", "DOMAIN\username", "password", 1) 
```

但是，我似乎无法弄清楚使其对 OpenLDAP 服务器起作用的语法：

```
Dim oDSObj: Set oDSObj = GetObject("LDAP:")
Dim oAuth: Set oAuth = oDSObj.OpenDSObject("LDAP://ldap.domain.com/ou=Users", "username", "password", 1) 
```

老实说，在 LDAP 方面我有点不习惯，所以我不明白 dc vs cn vs ou 是什么意思（我知道它们代表组织单位、通用名称等）但我不明白当您需要将其附加到查询时。

连接到 Active Directory 服务器后，以下代码会对其进行查询：

```
dc = ""
Set oConn = Server.CreateObject("ADODB.Connection")
oConn.Provider = "ADSDSOObject"
oConn.Open "Ads Provider", "DOMAIN\username", "password"            '
Dim rs: Set rs = oConn.Execute("<LDAP://ldap.domain.com" & dc & ">;(& (objectCategory=person)(objectClass=user)(sAMAccountName=" & GetLDAPUserName(sPerson) & "));name,mail,telephoneNumber;subtree") 
```

但我意识到 sAMAccountName 是特定于 AD 的东西，因此 openLDAP 代码将需要不同的语法。

用户是“ldapuser”，密码为“password”，存储在此处：ou=Users,dc=domain,dc=com

连接到该 LDAP 服务器并查询帐户信息的代码是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-04-03T13:39:57.907

我终于想通了：

```
sUser = "myusername"
sDN = "cn=" & sUser & ",ou=people,dc=company,dc=com"
sRoot = "LDAP://ldapservername.com/dc=company,dc=com"

Dim oDS: Set oDS = GetObject("LDAP:")
Dim oAuth: Set oAuth = oDS.OpenDSObject(sRoot, sDN, "password", &H0200)

Dim oConn: Set oConn = CreateObject("ADODB.Connection")
oConn.Provider = "ADSDSOObject"
oConn.Open "Ads Provider", sDN, "password"

Dim rs
Set rs = oConn.Execute("<" & sRoot & ">;(uid=" & sUser & ");cn,mail,telephoneNumber;subtree")

wscript.echo rs("cn").value
wscript.echo rs("mail").value
wscript.echo rs("telephoneNumber").value 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-13T15:07:30.683

非常感谢您的代码 Michael。
我已将其修改为使用中央 OpenLDAP 服务器简单地验证用户（用户密码）。这是对我有用的代码（MSAccess 2003）：

```
sUser = "TheUserName"
sDN = "uid=" & sUser & ",o=users,dc=MyDomain,dc=it"
sRoot = "LDAP://MyLDAPServer/o=users,dc=MyDomain,dc=it"

Dim oDS: Set oDS = GetObject("LDAP:")

On Error GoTo AuthError
Dim oAuth: Set oAuth = oDS.OpenDSObject(sRoot, sDN, "ThePassword", &H200)
On Error GoTo 0

MsgBox "Login Successful"
Exit Sub

AuthError:
If Err.Number = -2147023570 Then
    MsgBox "Wrong Username or password !!!"
End If
On Error GoTo 0 
```********`****