# StackOverflow 问答 10083000-10083999

# python - 使用来自另一个文件的数据来编辑 xml 文件的脚本

> ID：10083001
> 
> 赞同：0
> 
> 时间：2012-04-10T04:08:10.217
> 
> 标签：python, xml, perl, scripting

我对脚本非常缺乏经验，所以我真的需要你的帮助。我有一个 xml 文件，其中每条奇数行都有：

```
<![CDATA[<head>Wallpaper</head><body>1328758083110.jpg</body>]]></photo> 
```

我希望能够编辑头部标签之间的每个“壁纸”部分，而不是说从文本文件中提取的内容，其中每个元素由换行符分隔。

这是一个相当广泛的问题，所以我很感激任何意见。我应该从哪里开始？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-10T04:24:54.227

如果我正确理解了您的问题，则此 python 片段应该可以工作...我假设您的文本文件中的行数与您要在 XML 文件中编辑的行数相同，并且字符串“Wallpaper”不是t 在您不想编辑的任何行中。否则你可能需要一些不同的东西：

```
inFile = open('mytextfile.txt','r')

myTextData = []
for line in inFile:
    myTextData.append(line.strip())
inFile.close()

inFile = open('myXMLfile.xml','r')
outFile = open('myFinishedXMLfile.xml','w')
currentItem = 0
for line in inFile:
    if 'Wallpaper' not in line:
        outFile.write(line)
    else:
        left = line.find('Wallpaper')
        right = left + 9    # Wallpaper is 9 characters
        outFile.write(line[:left])
        outFile.write(myTextData[currentItem])
        outFile.write(line[right:])
        currentItem += 1
inFile.close()
outFile.close() 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-10T08:37:55.410

```
perl -i.bak -lpe'
    BEGIN { open $file, "<", "text-file-with-substitutions"; }
    if (/Wallpaper/) {
        chomp(my $subst = readline $file);
        s/Wallpaper/$subst/
    }
' xml-file-with-cdata 
```

# django - 我是否需要将 Dajaxice 完全配置为在 Django 中使用 Dajax？

> ID：10083008
> 
> 赞同：0
> 
> 时间：2012-04-10T04:09:40.760
> 
> 标签：django, dajaxice

这可能是一个愚蠢的问题，但我是否需要完全配置 Dajaxice 才能运行 Dajax？

我想使用 Dajax，因为我需要一些繁重的 jQuery DOM 操作。Dajax[安装文档](https://github.com/jorgebastida/django-dajax/wiki/installation)说需要安装 Dajaxice 才能运行 Dajax。

但是如果我只使用 Dajax ，我是否需要指定`{% load dajaxice_templatetags %}`and `{% dajaxice_js_import %}`(inside )？`<head>`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-10T06:58:20.747

是的你是。但是为什么不先尝试再问呢？

# javascript - 使用用户脚本记录网页的动态创建的 DOM 元素

> ID：10083010
> 
> 赞同：2
> 
> 时间：2012-04-10T04:10:02.540
> 
> 标签：javascript, dom, userscripts

我想使用用户脚本从网页中提取所有动态 javascript 函数。

有人建议对 DOM 对象使用钩子。他们还提供了这个例子：

```
var f = document.createElement;document.createElement = function(tagName){ 
console.log(tagName); 
f.apply(document, arguments); } 
```

我认为这个函数记录了所有的`document.createElement()`调用，但是我在我的用户脚本中在哪里添加这个函数呢？
我尝试创建一个仅包含此功能的用户脚本，但它不起作用。

加载页面后执行用户脚本。如何更改此功能以便事先跟踪动态功能？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-10T06:14:38.300

要“事先”跟踪所有动态加载的参数，请使用[`// @run-at document-start`](http://wiki.greasespot.net/Metadata_Block#.40run-at).

此外，您必须将代码注入目标页面，因为您要跟踪页面的 javascript。

这是一个记录所有`createElement()`调用的完整脚本。它适用于 Greasemonkey (Firefox) 和 Chrome 用户脚本：

```
// ==UserScript==
// @name        _Track dynamically added elements
// @namespace   Your PC
// @include     http://YOUR_SERVER/YOUR_PATH/*
// @run-at      document-start
// ==/UserScript==

//--- Intercept and log document.createElement().
function LogNewTagCreations () {
    var oldDocumentCreateElement    = document.createElement;

    document.createElement          = function (tagName) {
        var elem = oldDocumentCreateElement.apply (document, arguments);
        console.log ("Dynamically created a(n)", tagName, " tag.  Link: ", elem);
        return elem;
    }
}

/*--- The userscript or GM script will start running before the DOM is available.
    Therefore, we wait...
*/
var waitForDomInterval = setInterval (
    function () {
        var domPresentNode;
        if (typeof document.head == "undefined")
            domPresentNode = document.querySelector ("head, body");
        else
            domPresentNode = document.head;
        if (domPresentNode) {
            clearInterval (waitForDomInterval);
            addJS_Node (null, null, LogNewTagCreations);
        }
    },
    1
);

//--- Handy injection function.
function addJS_Node (text, s_URL, funcToRun) {
    var D                                   = document;
    var scriptNode                          = D.createElement ('script');
    scriptNode.type                         = "text/javascript";
    if (text)       scriptNode.textContent  = text;
    if (s_URL)      scriptNode.src          = s_URL;
    if (funcToRun)  scriptNode.textContent  = '(' + funcToRun.toString() + ')()';

    var targ = D.getElementsByTagName ('head')[0] || D.body || D.documentElement;
    targ.appendChild (scriptNode);
} 
```

# javascript - Marker 的 Z-index 高于 Infobox

> ID：10083013
> 
> 赞同：4
> 
> 时间：2012-04-10T04:10:17.790
> 
> 标签：javascript, jquery, css, google-maps, google-maps-api-3

我正在使用 Google Maps API V3 创建标记和 Infobox 库来创建自定义信息窗口。

**问题：**我希望在信息框上方显示一个特定的标记。但是，当我将标记的 Z-index 设置为大于信息框的 z-index 时，堆叠顺序保持不变，其中信息框仍位于标记的顶部。

我是否错过了使 Z-index 订单正常工作所需的东西？

**JS代码**

```
// Create InfoBox               
var infoboxOptions = {
    disableAutoPan: true,
    maxWidth: 0,
    pixelOffset: new google.maps.Size(infobox_offsets[0], infobox_offsets[1]),
    zIndex: 100,
    infoBoxClearance: new google.maps.Size(5, 5),
    contextmenu: true,
    closeBoxURL: '',
    isHidden: true,
    pane: "floatPane",
    enableEventPropagation: false
};

var infobox = new InfoBox(infoboxOptions);

// Create the marker
var marker = new google.maps.Marker({
    position: latLng,
    icon: markerImage,
    zIndex: 200,
    map: map
}); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-10T04:29:28.853

Infowindow 的 z-index 集仅设置 Infowindows 的相对顺序。正如文档中提到的那样，默认的 InfoWindows 总是显示在标记的前面。

# python - PYTHON：简单的随机生成驱动 if/else

> ID：10083017
> 
> 赞同：4
> 
> 时间：2012-04-10T04:10:49.840
> 
> 标签：python, if-statement, xrange

编程新手，我正在学习，这对你们来说可能是一个非常简单的问题。

```
import random

def run_stair_yes():
    print "\nRunning in stairs is very dangerous!"
    print "Statistique shows that you have 70% chance of falling"
    print "\nroll the dice!"

    for i in xrange(1):
        print random.randint(1, 100)

    if i <= 70 :
        print "\nWell, gravity is a bitch. You fell and die."

    elif i >= 71 :
        athlethic()

    else: 
            print "im boned!"
            exit(0) 
```

我的问题是，无论生成什么数字，它总是给我同样的“重力是个婊子。你摔倒了就死了”。

我哪里错了？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-10T04:13:21.830

你从来没有真正将 i 设置为`random.randint()`

你说

```
for i in xrange(1): 
```

`0`当您迭代时i 取 的值，`xrange(1)`然后您只需打印出 的结果`random.randint(1, 100)`，而不是将其分配给 i。

试试这个

```
i = random.randint(1, 100) 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-04-10T04:24:15.997

除了 jamylak 的建议之外，还有一些改进代码的一般性建议：

*   多行提示最好使用三引号字符串语法而不是多个`print`语句来编写。这样你只需要写`print`一次，你不需要所有那些额外的换行符 ( `\n`)

例子：

```
print """
Running on the stairs is dangerous!

You have a 70% chance to fall.

Run on the stairs anyway?
""" 
```

*   您的概率计算使用 [1-100] 范围内的随机整数，但使用浮点数可能更自然。（无论哪种方式都可以。）

*   您无需检查号码是否为`<= 70`，然后检查是否为`>= 71`. 根据定义（对于整数！）只有其中一个条件为真，因此您实际上不需要同时检查它们。

例子：

```
random_value = random.random() # random number in range [0.0,1.0)
if random_value < 0.7:
    pass #something happens 70% of the time
else:
    pass #something happens the other 30% of the time 
```

或者更简洁：

```
if (random.random() < 0.7):
    pass #something happens 70% of the time
else:
    pass #something happens 30% of the time 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-10T04:14:32.077

也许如果你真的分配了一些东西给`i`......

```
i = random.randint(1, 100) 
```

还有一件事：这`else`部分永远不会被执行。每个整数要么 <= 70 要么 >= 71，所以`else`永远不会达到。

# wpf - 滚动时Datagrid挂起/冻结

> ID：10083022
> 
> 赞同：1
> 
> 时间：2012-04-10T04:11:17.033
> 
> 标签：wpf, mvvm, datagrid

我对 WPF 中的数据网格有一个奇怪的问题。我正在为我的应用程序使用 MVVM 模式，并且我的视图模型实现了 idataerrorinfo 接口。每当我在添加新行后在我的数据网格中上下滚动时，所有单元格都会混杂在一起，整个数据网格都会冻结。如果我删除 idataerrorinfo 接口实现，它工作正常。有人有同样的问题吗？

。任何帮助将不胜感激...

更新：只有在我向 dataGrid 添加新行后才会出现奇怪的行为。如果我正在修改现有行并上下滚动不会导致任何问题。将新视图模型添加到我的可观察集合时发生了一些事情。不知道是什么。需要一些帮助..

**更新：** 这是项目 XAML 的一个小版本

```
<Window x:Class="testWPF.MainWindow"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:dg="http://schemas.microsoft.com/wpf/2008/toolkit"
    Title="MainWindow" Height="350" Width="525">
<Window.Resources>

    <!-- style to apply to DataGridTextColumn in edit mode  -->
    <Style x:Key="CellEditStyle" TargetType="{x:Type TextBox}">
        <Setter Property="BorderThickness" Value="0"/>
        <Setter Property="Padding" Value="0"/>
        <Style.Triggers>
            <Trigger Property="Validation.HasError" Value="true">
                <Setter Property="ToolTip"
                        Value="{Binding RelativeSource={RelativeSource Self}, Path=(Validation.Errors)[0].ErrorContent}"/>
            </Trigger>
        </Style.Triggers>
    </Style>

    <!-- A Row Style which renders a different validation error indicator -->
    <Style x:Key="RowStyle" TargetType="{x:Type dg:DataGridRow}">
        <Setter Property="ValidationErrorTemplate">
            <Setter.Value>
                <ControlTemplate>
                    <Grid>
                        <Ellipse Width="12" Height="12" Fill="Red" Stroke="Black" StrokeThickness="0.5"/>
                        <TextBlock FontWeight="Bold" Padding="4,0,0,0" Margin="0" VerticalAlignment="Top" Foreground="White" Text="!"
                                   ToolTip="{Binding RelativeSource={RelativeSource FindAncestor, AncestorType={x:Type dg:DataGridRow}},
                                                     Path=(Validation.Errors)[0].ErrorContent}"/>
                    </Grid>
                </ControlTemplate>
            </Setter.Value>
        </Setter>
    </Style>
</Window.Resources>

<!-- a simple details view which is synchronised with the selected item in the data grid -->

<Grid>
    <Grid.RowDefinitions>
        <RowDefinition Height="265*" />
        <RowDefinition Height="46*" />
    </Grid.RowDefinitions>
    <DataGrid Name="dataGrid" AutoGenerateColumns="False" IsSynchronizedWithCurrentItem="True"
              ItemsSource="{Binding GetPeople}" Height="204" Margin="0,54,0,8">
        <!--<dg:DataGrid.RowValidationRules>
            <local:RowDummyValidation/>
        </dg:DataGrid.RowValidationRules>-->
        <DataGrid.Columns>
            <DataGridTextColumn Header="Name" EditingElementStyle="{StaticResource CellEditStyle}"
                                Binding="{Binding Path=Name, ValidatesOnDataErrors=True,UpdateSourceTrigger=PropertyChanged}"/>
            <DataGridTextColumn Header="Age" EditingElementStyle="{StaticResource CellEditStyle}"
                                Binding="{Binding Path=Age, ValidatesOnExceptions=True}"/>
        </DataGrid.Columns>
    </DataGrid>
    <Button Content="Button" Command="{Binding AddNewConfigProperty}"
            Grid.Row="1" Height="23" HorizontalAlignment="Left" Margin="194,11,0,0"
            Name="button1" VerticalAlignment="Top" Width="75" />
</Grid> 
```

人员列表视图模型

```
namespace testWPF
{
    class PersonListViewModel: ViewModelBase
    {
        private ObservableCollection<Person> personCollection;

        //private PartNumbersEntities dbCOntext = new PartNumbersEntities();
        public ObservableCollection<Person> GetPeople
        {
            get
            {
                if (personCollection == null)
                {
                    personCollection = new ObservableCollection<Person>();
                    for(int i= 0; i<100;i++)
                    {
                        personCollection.Add(new Person()
                        {
                            Name = "Frank Grimmes",
                            Age = 25,
                            DateOfBirth = new DateTime(1975, 2, 19)
                        });
                    }
                }                  
                return personCollection;
            }             
        }

        public ICommand AddNewConfigProperty { get { return new RelayCommand(AddNewConfigPropertyExecute, CanAddNewConfigPropertyExecute); } }

        bool CanAddNewConfigPropertyExecute()
        {
            return true;
        }

        void AddNewConfigPropertyExecute()
        {
            personCollection.Add(new Person()
                    {
                        Name = "Some Name",
                        Age = 25,
                        DateOfBirth = new DateTime(1924, 9, 1)
                    });
            OnPropertyChanged("GetPeople");
        }  
    }
} 
```

人物类

```
namespace testWPF
{
    public class Person : ViewModelBase, IDataErrorInfo
    {
        //private readonly Regex nameEx = new Regex(@"^[A-Za-z ]+$");

        private string name;

        public string Name
        {
            get { return name; }
            set
            { 
                name = value;
            }
        }

        private int age;

        public int Age
        {
            get { return age; }
            set
            {
                age = value;
            }
        }

        public DateTime DateOfBirth { get; set; }

        public string Error
        {
            get { return ""; }
        }

        public string this[string columnName]
        {
            get
            {
                string result = null;
                if (columnName == "Name")
                {
                    if (string.IsNullOrEmpty(Name))
                        result = "Please enter a name";
                }
                return result;
            }
        } 
    } 
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-10T08:28:38.277

不要在 IDataErrorInfo this[string columnName] Getter 中进行耗时的 IO 操作。制作

```
System.IO.File.AppendAllText("C:\\temp\\log.txt", "PartConfigName: " + PartConfigName + "\r\n"); 
```

[异步](http://msdn.microsoft.com/en-us/library/kztecsys%28v=vs.100%29.aspx)或[以调试方式为条件](http://msdn.microsoft.com/en-us/library/system.diagnostics.conditionalattribute.conditionalattribute.aspx) `[Conditional("DEBUG")]`。

# sql-server-2005 - 出现错误 430：自动化错误

> ID：10083025
> 
> 赞同：2
> 
> 时间：2012-04-10T04:11:45.800
> 
> 标签：sql-server-2005, excel, vba

我正在使用带有以下脚本的 vba 将 SQL 导入 Excel（审查以保护一些数据库信息，但是脚本的部分工作）当我去编译时，我得到运行时错误 430：类不支持自动化或不支持预期的接口

我正在使用 Excel 2007、VBA 6.5 和 SQL 2005

这是脚本

```
Sub GetDataFromADO()

    Dim objMyConn As ADODB.Connection
    Dim objMyCmd As ADODB.Command
    Dim objMyRecordset As ADODB.Recordset

    Set objMyConn = New ADODB.Connection
    Set objMyCmd = New ADODB.Command
    Set objMyRecordset = New Recordset

    objMyConn.ConnectionString = "Provider=SQLOLEDB;SERVER=M$#$%#@@$1;DATABASE=i*&^*;Trusted_Connection=yes;HDR=yes"
    objMyConn.Open

    Set objMyCmd.ActiveConnection = objMyConn
    objMyCmd.CommandText = "use i*&^* select * from $#%.^&_d**^%_p**^^l where year(d****_date) = 2012 and month(d***_date)= 03 and deal_id < 5*******0 order by d***_id"
    objMyCmd.CommandType = adCmdText
    objMyCmd.Execute

    ActiveSheet.Range("A2").CopyFromRecordset (objMyRecordset)

End Sub 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-10T10:15:52.897

您已初始化 objMyRecordset 但从未向其中填充数据。然后您尝试将数据从 objMyRecordset 导入您的 excel 文件，这将不起作用。

首先确保您已经填写了记录集，然后才让 CopyFromRecordset 被调用。

# ruby-on-rails - 使用 authlogic 登录时调用 current_user 的方法

> ID：10083027
> 
> 赞同：4
> 
> 时间：2012-04-10T04:12:20.790
> 
> 标签：ruby-on-rails, ruby-on-rails-3, authlogic

我`authlogic`在我的 Rails 应用程序中使用身份验证。我需要能够在 current_user 登录时调用他们的方法，但它返回 nil。

在我的 user_sessions_controller.rb

```
def create
  @user_session = UserSession.new(params[:user_session])

  if @user_session.save
    current_user.increment_login_count_for_current_memberships!
    flash[:notice] = 'Sign in successful.'
    redirect_to root_path
  else
    render action: "new"
  end
end 
```

而且它回来了……

```
Failure/Error: click_button "Sign in"
     NoMethodError:
       undefined method `increment_login_count_for_current_memberships!' for nil:NilClass 
```

我在这里看到了一个类似的问题[Not able to set a current_user using Authlogic on Rails 3.0.1](https://stackoverflow.com/questions/4067641/not-able-to-set-a-current-user-using-authlogic-on-rails-3-0-1)答案是 disable `basic_auth`，但我正在使用`basic_auth`我的应用程序的管理端，所以我不能简单地禁用它。

*   为什么我不能打电话给`current_user`这里？

*   如果我不能`current_user`在这里打电话，有没有办法设置它？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-18T11:54:48.183

在我自己的应用程序中，我定义了这两种方法（以及其他方法）`lib/authlogic_helper.rb`（我假设你也这样做）：

```
module AuthlogicHelper
  def current_user_session
    return @current_user_session if defined?(@current_user_session)
    @current_user_session = UserSession.find
  end

  def current_user
    return @current_user if defined?(@current_user)
    @current_user = current_user_session && current_user_session.user
  end
end 
```

这些方法似乎与您的答案中的代码完全一样，只是调用了用户会话实例变量，`@current_user_session`而不是`@user_session`像您的控制器代码中那样。

如果您`@current_user_session`在控制器操作中将用户会话变量重命名为，则该`current_user_session`方法将短路并返回您刚刚创建的会话，这应该允许该`current_user`方法返回正确的用户。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-13T07:12:24.647

我仍然不知道为什么我不能打电话`current_user`或`@current_user`在这里。但是我在控制器代码中找到了两种调用 current_user 的方法......

```
UserSession.find.user.increment_login_count_for_current_memberships! 
```

和

```
@user_session.user.increment_login_count_for_current_memberships! 
```

如果有人想弄清楚为什么我不能`current_user`在这里打电话，我会很高兴地奖励你赏金:)

# sql-server-ce - 无法将 SQL Server CE 3.5 数据库附加到 LLBLGen Pro

> ID：10083029
> 
> 赞同：0
> 
> 时间：2012-04-10T04:12:40.277
> 
> 标签：sql-server-ce, ssms, llblgenpro, llblgen

我有`.sdf`Northwind 的 SQL Server Compact Edition 数据库，我正在尝试将其附加到 llblgen pro 但它拒绝连接，在“数据库驱动程序”下拉列表中我选择了 SQL Server 2000/etc 等（有下拉列表中没有 SQL Server CE），在“服务器名称”中，我已将完整路径放入数据库：

> C:\Program Files (x86)\Microsoft SQL Server Compact Edition\v3.5\Samples\Northwind.sdf

我尝试测试连接时遇到的错误是：

> 建立与 SQL Server 的连接时发生与网络相关或特定于实例的错误。服务器未找到或无法访问。验证实例名称是否正确以及 SQL Server 是否配置为允许远程连接。（提供者：SQL 网络接口，错误：26 - 错误定位服务器/指定的实例）
> 
> LLBLGen Pro 3.5 版。构建 2012 年 3 月 23 日 -----[核心异常]-------- 在 System.Data.SqlClient.SqlInternalConnection.OnError(SqlException 异常，布尔 breakConnection ) 在 System.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj) 在 System.Data.SqlClient.TdsParser.Connect(ServerInfo serverInfo, SqlInternalConnectionTds connHandler, Boolean ignoreSniOpenTimeout, Int64 timerExpire, Boolean encrypt, Boolean trustServerCert, Boolean IntegratedSecurity, SqlConnection owningObject)在 System.Data.SqlClient.SqlInternalConnectionTds.AttemptOneLogin（ServerInfo serverInfo，字符串 newPassword，布尔 ignoreSniOpenTimeout，Int64 timerExpire，SqlConnection owningObject）在 System.Data.SqlClient.SqlInternalConnectionTds.LoginNoFailover（字符串主机，

我也尝试将 sdf 添加到 sql server management studio，然后将其添加到 llblgen 但仍然没有运气......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-17T14:23:37.093

LLBLGen 支持 SQL CE 数据库。请在 .config 文件中指定正确的兼容级别：

<add key="SqlServerDQECompatibilityLevel" value="4" />

请阅读文档中的“DQE 兼容模式”部分： [http ://www.llblgen.com/documentation/3.5/LLBLGen%20Pro%20RTF/Using%20the%20generated%20code/gencode_applicationconfiguration.htm#compatibilitymodesqlserver](http://www.llblgen.com/documentation/3.5/LLBLGen%20Pro%20RTF/Using%20the%20generated%20code/gencode_applicationconfiguration.htm#compatibilitymodesqlserver)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-10T23:49:38.077

原来我使用的 LLBLGen Pro 版本不支持 .Net Compact Framework（从 V3.0 开始停止支持它）。

# css - 在底部添加填充

> ID：10083030
> 
> 赞同：1
> 
> 时间：2012-04-10T04:12:51.327
> 
> 标签：css

我正在尝试使[网站](http://www.apptec.net)**底部**的广告与内容保持一致（即与帖子具有相同的内容。）但即使将其添加到相同的内容中，我也无法这样做，在这里是我的代码，`padding-right``div`

```
<script class="mcolumn-pad" type="text/javascript"><!--
//ad goes here
</script> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-10T04:41:36.957

将您的广告 div 放入

```
<div id="dynamic-content" class="outline fix"> 
```

现在它不在同一个div中，这就是为什么工作/显示异常。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-10T04:21:28.167

`script`定义了一个用于运行嵌入式 JavaScript 代码的脚本块。您无法设置脚本块的样式。但是，您可以使用 Firebug 或 Chrome 之类的调试器来**检查该脚本块生成的 HTML。**

看起来您的脚本块生成了一些带有`ins`元素的 HTML：

```
<div id="page-main">
    ...
    <ins style="left:180px;display:inline-table;border:none;height:90px;margin:0;padding:0;position:relative;visibility:visible;width:728px"> 
```

ins 元素没有 class 或 id 属性，但它是具有 id 属性的 div 的子元素，因此使用 CSS 规则定位它的简单方法如下：

```
div#page-main ins {
    left:180px;
} 
```

我将由您来调整像素值以根据您的喜好对其进行对齐。您可以通过增加像素值向右移动，通过减少像素值向左移动。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-10T04:42:26.660

它有内联 CSS 将高度设置为 90px，但外部 CSS 可能会弄乱字体/行高，以至于它对于 90px 来说太高了。

```
#header .outline {
  margin: 0 auto;
  position: relative;
  width: 960px;
  zoom: 1;
  z-index: 15;
  height: auto !important; /* <-- add this */
} 
```

!important 是覆盖内联样式的唯一方法。

# lambda - 如何过滤属性

> ID：10083033
> 
> 赞同：1
> 
> 时间：2012-04-10T04:13:37.867
> 
> 标签：lambda

我有具有列表作为属性`Institution`的实体。`Fund`

我有一个单独的允许资金清单。

我想从`allowedFunds`可以轻松完成的列表中选择拥有任何基金的机构。但是，当我得到机构时，我希望`Funds`列表也被过滤。

换句话说，我有`Institution1`with`Fund1`和`Fund2`。`Fund1`也在 allowedFunds 列表中。我想用`Funds`只有 Fund1 的列表返回机构 1。是否可以使用 EF 4.1 的 lambda 表达式为此编写查询？

```
 // I have allowed funds in a separate list
    IEnumerable<Fund> allowedFunds;

    public partial class Institution
    {
        public int Id { get; set; }
        public virtual ICollection<Fund> Funds { get; set; }
    }

    public partial class Fund
    {
        public int Id { get; set; }
        public virtual Institution Institution { get; set; }
    } 
```

编辑; Oki，问题已编辑，这里还有另一种解释。如果您在我的第二条评论下方看到代码（//从机构中删除不允许的资金），这就是我想要做的。但在那里我返回研究所设置并添加逻辑。而不是这样做，我想在删除不允许的资金后返回机构。以下是我的方法。谢谢。

```
 public IEnumerable<Institution> FindInstitutionsForExternalUser(IEnumerable<Fund> allowedFunds)
    {
        IQueryable<Institution> query = GetObjectSet();
        //Institutions which are connected to allowedFunds
        if (allowedFunds != null)
        {
            IEnumerable<int> fundIds = allowedFunds.Select(fund => fund.Id);
            query = query.Where(i => i.Funds.Any(o => fundIds.Any(id => id == o.Id))); ;
        }
        IEnumerable<Institution> list = query.ToList().OrderBy(a => a.Name); 
        //remove not allowed Funds from institutions
        foreach (var institution in list)
        {
            IEnumerable<Fund> filterdFunds =
                institution.Funds.Where(fund => allowedFunds.Any(allowedFund => allowedFund.Id == fund.Id));
            institution.Funds = filterdFunds.ToList();
        }
        return list; 
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-10T04:56:32.230

尝试如下

```
from i in Institutes from f1 in i.Funds join f2 in AllowedFunds on f1.Id equals f2.Id select f1 
```

# java - 我们可以为一个应用程序使用两个单独的 log4j

> ID：10083034
> 
> 赞同：0
> 
> 时间：2012-04-10T04:13:43.440
> 
> 标签：java, log4j, jboss6.x

> **可能重复：**
> [使用 log4j 创建多个不同内容的日志文件](https://stackoverflow.com/questions/728295/creating-multiple-log-files-of-different-content-with-log4j)

我正在使用 jboss 服务器。是否可以使用 log4j 使用两个日志？我可以成功地使用一个，因为写入文件和写入数据库应该是不同的。我们能否在类中创建两个日志实例以写入文件和另一个在 jdbcadapter 中

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-10T05:23:32.737

这就是 log4j 的重点。多个附加程序可以附加到顶部记录器

```
log4j.categry.com.mypackage=INFO, file, database

log4j.appender.file=org.apache.log4j.RollingFileAppender
log4j.appender.file.##OtherProperies##=##OtherValues##

log4j.appender.database=org.apache.log4j.JDBCAppender
log4j.appender.databse.##OtherProperies##=##OtherValues## 
```

或者也可以使用[DatabaseAppender](http://code.google.com/p/log4j-databaseappender/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-10T04:23:58.413

是的。使用 .创建多个 Appender 并将给定消息分配给`<category>`一个或另一个`<appender-ref>`。

# java - 浮动与双倍

> ID：10083039
> 
> 赞同：9
> 
> 时间：2012-04-10T04:16:15.517
> 
> 标签：java, c, floating-point

是否存在这样的情况：如果将它们比较为 FLOAT，则`equals()`两个浮点值之间的比较 () 会返回`false`，`DOUBLE`但`true`如果将它们比较为 FLOAT 则返回？

作为我的小组项目的一部分，我正在编写一些程序来比较任何给定类型的两个数值。我必须总共处理 4 种类型：`double`、`float`和. 所以我想将and组合成一个函数，也就是说，我只需将 any转换为并进行比较。`int``long``double``float``float``double`

这会导致任何不正确的结果吗？

谢谢。

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-04-10T04:22:17.993

如果您将双精度数转换为浮点数并且它们之间的差异超出了浮点类型的精度，您可能会遇到麻烦。

例如，假设您有两个双精度值：

```
9.876543210
9.876543211 
```

并且浮点数的精度只有六位十进制数字。这意味着两个`float`值都是`9.87654`，因此相等，即使双精度值本身不相等。

但是，如果您正在谈论将浮点数转换为双精度数，那么相同的浮点数应该给您相同的双精度数。如果浮点数不同，则额外的精度将确保双精度数也不同。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-04-10T05:54:40.467

只要您没有在比较中混合提升的浮点数和本机计算的双精度数，您应该没问题，但要小心：

**比较浮点数（或双精度数）的相等性很困难** -[请参阅这个冗长但出色的讨论](http://randomascii.wordpress.com/2012/02/25/comparing-floating-point-numbers-2012-edition/)。

以下是一些亮点：

1.  `==`由于浮点格式精度有限的问题，您不能使用

2.  float(0.1) 和 double(0.1) 分别是不同的值（0.100000001490116119384765625 和 0.1000000000000000055511151231257827021181583404541015625）。在您的情况下，这意味着比较两个浮点数（通过转换为双精度数）可能没问题，但是如果要将浮点数与双精度数进行比较，请小心。

3.  通常使用 epsilon 或较小的值来进行相对比较（如果浮点数 a 和 b 被认为相等`a - b < epsilon`）。在 C 中，float.h`FLT_EPSILON`正是为此目的而定义的。`a`但是，这种类型的比较在两者都非常小或`b`都非常大的情况下不起作用。

4.  您可以通过使用相对于大小的 a-and-b epsilon 来解决此问题，但在某些情况下（例如与零的比较），这会失效。

5.  您可以比较浮点数的[整数表示](http://www.altdevblogaday.com/2012/01/05/tricks-with-the-floating-point-format/)，以找出它们之间有多少可表示的浮点数。这就是 Java[`Float.equals()`](http://docs.oracle.com/javase/6/docs/api/java/lang/Float.html#equals(java.lang.Object))所做的。这称为 ULP 差异，即“最后位置的单位”差异。它通常很好，但在与零比较时也会崩溃。

文章总结：

> **知道你在做什么**
> 
> 没有银弹。你必须明智地选择。
> 
> *   如果您要与零进行比较，那么基于相对 epsilon 和 ULP 的比较通常是没有意义的。您需要使用绝对 epsilon，其值可能是 FLT_EPSILON 的一些小倍数以及计算的输入。也许。
> *   如果您要与非零数进行比较，那么基于相对 epsilon 或 ULP 的比较可能是您想要的。您可能需要一些小的 FLT_EPSILON 倍数作为您的相对 epsilon，或者一些少量的 ULP。如果您确切知道要比较的数字，则可以使用绝对 epsilon。
> *   如果您要比较两个可能为零或非零的任意数字，那么您需要厨房水槽。祝你好运和上帝的速度。

所以，回答你的问题：

*   如果您将 s 降级`double`为`float`s，那么您可能会失去精度，并错误地将两个不同`double`的 s 报告为相等（正如[paxdiablo](https://stackoverflow.com/a/10083070/790070)指出的那样。）
*   如果您将相同`float`的 s 升级为，那么*除非*您将 a与 a进行比较，否则`double`增加的精度不会成为问题（假设您的浮点数为 1.234，并且您只有 4 位小数的精度，那么双精度 1.2345 MIGHT表示与浮点数相同的值。在这种情况下，您最好以 的精度进行比较，或者更一般地，在比较中最不准确的表示的错误级别进行比较）。*`float``double``float`*
**   如果您知道要与之比较的数字，则可以遵循上面引用的建议。*   如果您要比较任意数字（可能为零或非零），则无法在所有情况下都正确比较它们 - 选择一个比较并了解其局限性。*

 *一些实际的考虑（因为这听起来像是一个任务）：

*   大多数人提到的 epsilon 比较可能很好（但在文章中包括对局限性的讨论）。如果您打算将双精度数与浮点数进行比较，请尝试在浮点数中进行，但如果没有，请尝试在双精度中进行所有比较。更好的是，在`double`任何地方都使用 s。

*   如果您想完全完成作业，请在比较浮点数时记录问题以及您选择任何特定比较方法的理由。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-04-10T04:20:44.163

我完全不明白你为什么要这样做。`==`运营商已经满足了双方所有可能的类型，在相关语言标准中已经规定了类型强制和扩大的广泛规则。您所要做的就是使用它。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-04-13T20:19:17.190

我可能不是在回答 OP 的问题，而是在回答一些或多或少需要澄清的模糊建议。

比较两个浮点值是否相等是绝对可能的，并且可以做到。如果类型是单精度或双精度通常不太重要。

话虽如此，导致比较本身的步骤需要非常小心并彻底理解浮点的注意事项、为什么和为什么不。

考虑以下 C 语句：

```
result = a * b / c;
result = (a * b) / c;
result = a * (b / c); 
```

在大多数幼稚的浮点编程中，它们被视为“等效”，即产生“相同”的结果。在浮点的现实世界中，它们可能是。或者实际上，前两个是等价的（因为第二个遵循 C 评估规则，即从左到右具有相同优先级的运算符）。第三个可能等同于也可能不等同于第一个twp。

为什么是这样？

“a * b / c”或“b / c * a”可能导致“不精确”异常，即中间或最终结果（或两者）不精确（以浮点格式表示）。如果是这种情况，结果将或多或少有些微妙的不同。这可能会或可能不会导致最终结果适合进行相等比较。意识到这一点并一次单步地执行一个操作——注意中间结果——将允许耐心的程序员“击败系统”，即为几乎任何情况构建一个高质量的浮点比较。

对于其他人来说，忽略浮点数的相等比较是很好的、可靠的建议。

这真的有点讽刺，因为大多数程序员都知道整数数学在各种情况下会导致可预测的截断。当谈到浮点时，几乎每个人都或多或少地对结果不准确感到震惊。去搞清楚。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-04-10T04:21:30.063

只要相等性测试涉及增量，您就应该可以进行该转换。

例如：`abs((double) floatVal1 - (double) floatVal2) < .000001`应该工作。

***针对问题更改进行编辑***

不，你不会。以上依然成立。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-04-10T04:57:48.897

对于float f和double d的比较，可以计算f和d的差值。如果 abs(fd) 小于某个阈值，您可以认为等式成立。根据您的应用要求，这些阈值可以是绝对的或相对的。[这里](http://randomascii.wordpress.com/2012/02/25/comparing-floating-point-numbers-2012-edition/)有一些很好的解决方案。我希望它有帮助。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2016-02-19T17:00:49.863

> 如果我将 2 个浮点数提升为双倍并进行 64 位比较而不是 32 位比较，我会得到不正确的结果吗？

不。

如果您从两个浮点数开始，可以是浮点变量 (float x = foo();) 或浮点常量 (1.234234234f)，那么您当然可以直接比较它们。如果将它们转换为 double 然后比较它们，那么结果将是相同的。

这是有效的，因为 double 是浮点数的超集。也就是说，可以存储在 float 中的每个值都可以存储在 double 中。指数和尾数的范围都增加了。有数十亿个值可以存储在双精度型但不能存储在浮点型中，但有零个值可以存储在浮点型中但不能存储在双精度型中。

正如我在[float 比较文章](https://randomascii.wordpress.com/2012/02/25/comparing-floating-point-numbers-2012-edition/)中所讨论的，在 float 或 double 值之间进行有意义的比较可能会很棘手，因为可能会出现舍入错误。但是，将两个数字从 float 转换为 double 并不会改变这一点。所有对 epsilon 的提及（通常但并非总是需要）都与问题完全正交。

另一方面，[将 float 与 double 进行比较是疯狂的](https://randomascii.wordpress.com/2012/06/26/doubles-are-not-floats-so-dont-compare-them/)。1.1（双精度型）不等于 1.1f（浮点型），因为 1.1 都不能精确表示。*

# javascript - jquery append 不适用于重复的图像对象引用

> ID：10083042
> 
> 赞同：0
> 
> 时间：2012-04-10T04:17:56.040
> 
> 标签：javascript, jquery, html, image, dom

我有 10 张图片，每张图片以特殊字体表示数字 0-9（因此是图片）

为了提高性能和延迟，我预加载了以下图像，如下所示：

```
 function createDigit() {
     for (var i = 0; i < 10; i++) {
         var obj = new Image;
         obj.src = 'digit' + i + '.png';
         digitHash[i] = obj;
     }
  } 
```

所以在数字哈希中，我有从 0 到 9 索引的键，每个对应的值是图像对象引用，它 src 映射到图像文件位置。

现在在我的 html 中，我有一个 div 标签

```
<div id='digits'></div> 
```

现在说我想显示'2000'所以我有以下jquery

```
$('#digits').append(dightHash[2], dightHash[0], dightHash[0], dightHash[0]); 
```

它只显示 '20' 在 Firefox 控制台中进行一些调试和打印后，我注意到当您多次附加相同的图像引用时会发生这种情况！换句话说，'2000' 中的第二个零和第三个零没有附加，因此我们只有 '20'

如果我附加以下内容：

```
$('#digits').append(dightHash[2], dightHash[3], dightHash[4], dightHash[5]); 
```

我得到了“2345”的完整显示，因为附加没有重复的图像参考

我该如何解决这个问题？除了我可以使用的jquery的附加方法之外，还有其他方法吗？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-10T04:39:42.020

正如已经解释过的，`.append()`将对象从它所在的任何地方移动到指定的位置。它不会复制对象。

因此，我建议您像这样创建所需的对象，然后您不必担心重复的数字，因为它们每个都会以这种方式获得自己的图像对象：

```
// create an individual image
function makeDigit(n) {
    var img = new Image();
    img.src = 'digit' + n + '.png';
    return(img);
}
// Force all images into browser memory cache for fast loading:
function cacheDigits() {
     for (var i = 0; i < 10; i++) {
         digitHash.push(makeDigit(i));
     }
}

$('#digits').append(makeDigit(2), makeDigit(0), makeDigit(0), makeDigit(0)); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-10T04:21:12.937

是的，append 实际上在你的 DOM 中移动，而不是自动复制你正在附加的对象。

您可以调用`.clone()`，以便附加获取图像的副本并附加它，而不是在 ref 周围移动

```
$('#digits').append(dightHash[2], $(dightHash[0]).clone(), $(dightHash[0]).clone(), $(dightHash[0]).clone()); 
```

# php - 将 MySQL 应用程序移植到 MongoDB 并容纳 _id 字段

> ID：10083049
> 
> 赞同：0
> 
> 时间：2012-04-10T04:20:02.327
> 
> 标签：php, mongodb, mongodb-php, schema-design

我有一个 PHP 应用程序，它可以连接到多个后端（目前是 MySQL 或 XML），并且我也在尝试使用 MongoDB。我显然在努力解决的一个看似次要的问题是 Mongo 要求 '_id' 是主键的名称。后端通常由应用程序很好地抽象，但应用程序确实需要定期使用 id，所以我使用类似的代码访问它，`$result['id']`到目前为止，它已经很好地抽象了。

但是现在我面临着试图（有效地！）处理一个不允许我使用 'id' 作为其主键的数据库，而且我不确定最好的选择是什么。到目前为止，这是我的想法：

1.  只需保留 Mongo 的 '_id' 值，并将应用程序变量设置`$id`为`"id"`或`"_id"`取决于后端。应用程序应该使用`$id`ID 字段来访问，而不是硬编码的`"id"`. 请注意，所有其他字段都通过其字符串名称访问，例如，`$result['user']`这将违反应用程序中的规范。

    优点：允许在可能的情况下直接返回 MongoCursor 对象，确保最小的内存使用和快速访问数据。

    缺点：不向后兼容，需要（相当繁琐）重构使用此应用程序的任何代码。

2.  将返回的 MongoCursor 对象包装在一个新的迭代器类中，该迭代器类返回具有适当`"_id"`映射到的每个项目`"id"`。当与 Mongo 通信时，应用程序会将入站调用映射`"id"`回。`"_id"`

    优点：保留 1\. 的大部分内存效率，同时防止大多数向后兼容问题。

    缺点：不完全确定如何实现这样的对象，不相信它可以干净地完成，或者它实际上会像我想象的那样工作。为了做到这一点，我还想为其他后端实现类似的迭代器包装器。

3.  使用 中所述将结果加载到内存`iterator_to_array()`中[`MongoCollection.find()`](http://www.php.net/manual/en/mongocollection.find.php)，进行适当的转换，然后返回数组。

    优点：概念上比 2\. 简单，可以很好地与我的应用程序的其余部分配合使用。

    缺点：在内存方面显然是一个糟糕的选择。鉴于该应用程序不是世界末日，但仍然不理想。

这些选项中的任何一个是否作为该问题的特别合理和强大的解决方案脱颖而出？任何人都可以建议以与后端无关的方式处理主键的其他替代方案吗？未来可能会出现额外的后端，因此也欢迎与其他数据存储系统相关的给定方法的问题或好处。

我目前倾向于 2.，但我欢迎你的想法。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-28T23:18:11.050

我最终选择了选项 2，包装了迭代器并隐藏了现有的 '_id' 字段。不干净，也不优雅，但我能用我所拥有的做最好的。在这方面工作真的让我很喜欢 Python。

# android - videoview中的视频格式使用

> ID：10083050
> 
> 赞同：1
> 
> 时间：2012-04-10T04:20:31.370
> 
> 标签：android, eclipse, android-videoview, 3gp

我正在构建一个处理数千个视频的应用程序，并且想知道 Android eclipse 最快的视频格式是什么。我目前使用 .3gp。另外我把我的代码放上去，所以如果有人对此有任何建议，请随时发表评论。

非常感谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-10T04:43:19.613

**从文件**

作为应用程序开发人员，您可以自由使用任何支持 Android 的设备上可用的任何媒体编解码器，包括 Android 平台提供的那些和特定于设备的那些。然而，`it is a best practice to use media encoding profiles that are device-agnostic.`

[视频编码建议](http://developer.android.com/guide/appendix/media-formats.html#recommendations)

# c - 使用睡眠定期间隔后无法显示输出

> ID：10083051
> 
> 赞同：1
> 
> 时间：2012-04-10T04:20:33.103
> 
> 标签：c, unix, gcc, sleep

以下是代码片段。

```
int main()
{
int i =0;
    while (i++ < 5)
    {
        // Do some heavy processing
        printf("i = %d\n", i);
        sleep(1);
    }
} 
```

繁重的处理部分每 1 秒完成一次。我也想在 1 秒后显示“i”，但它在完成后显示整个输出。我知道使用一段时间并不是一种非常优雅的方式来做到这一点，但它似乎更容易。实现这一目标的最佳方式是什么？

我在 unix、gcc 编译器中运行代码

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-10T04:41:01.183

您需要刷新标准输出；您可以使用 fflush(3) 这样做：

```
fflush(stdout); 
```

您还可以在标准输出上完全禁用缓冲：

```
setbuf(stdout, NULL); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-10T04:29:02.180

在窗口中：

```
 #include <windows.h>

    Sleep(number of milliseconds); 
```

或在基本 C 中使用它：

```
 #include <unistd.h>

    unsigned sleep(unsigned seconds); 
```

对于 unix：

```
sleep n  //n is the number of sec 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-10T04:23:37.390

sleep 以毫秒为单位获取其参数，因此您必须通过 sleep(10000);

如果其他一些代码正在处理并且在处理完成后您必须显示该值，而不是每隔一秒您可以保留一个由该代码更新的监视器，然后相应地显示。听起来像生产者消费者问题，如果你看一下可能会有所帮助

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-10T04:32:25.807

您需要打印无缓冲，简单的方法是在 printf 之后 fflush stdout

```
fflush(stdout); 
```

或打印到标准错误。

```
fprintf(stderr, "i = %d\n", i); 
```

同样重要的是要注意，这不是每 1 秒打印一次，而是每 1 秒打印一次 + 可能因循环而异的繁重处理持续时间。为了改善这一点，你应该（伪代码不是真正的代码）。

```
int i = 0;
for(i=0; i < 5; i++)
{
    measure before time
    do stuff
    measure after time 
    sleep( 1 - (after -before in seconds)) or better usleep( 1000000 - (after - before in microseconds))
    print something
} 
```

此方法允许您大约每 1 秒打印一次（只要做的东西花费的时间少于 1 秒）

如果这是特定于 linux 的，我建议使用[clock_gettime](http://linux.die.net/man/3/clock_gettime)和 CLOCK_MONOTONIC 来测量时间。

# android - 由于 javadoc 和源附件已损坏，有没有办法将 eclipse android ADT 从 r17 恢复到 r16？

> ID：10083054
> 
> 赞同：1
> 
> 时间：2012-04-10T04:20:56.340
> 
> 标签：android, eclipse, javadoc, libraries, adt

在 ADT r17 中，ADT 发生了一些变化，其中库应该放在“libs”中，并以某种方式自动检测以在项目中使用。不幸的是，我找不到在自动导入的 jar 上设置 javadoc 和源附件的方法。[有人建议将 jar 移回 lib](https://stackoverflow.com/questions/9873152/how-to-add-javadoc-to-libraries-with-adt-r17)并导出它们，但这会在我的 .classpath 中创建本地文件夹引用，我们希望签入此文件。

我还没有找到恢复到早期 ADT 的方法。我很高兴使用 r16。有没有办法恢复到这个早期版本？

编辑：正如答案中所建议的，我试图通过 Eclipse 安装历史来恢复。我懂了：

```
An error occurred while collecting items to be installed
session context was:(profile=epp.package.java, phase=org.eclipse.equinox.internal.p2.engine.phases.Collect, operand=, action=).
No repository found containing: org.eclipse.update.feature,com.android.ide.eclipse.adt,16.0.1.v201112150204-238534
No repository found containing: org.eclipse.update.feature,com.android.ide.eclipse.ddms,16.0.1.v201112150204-238534 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-10T04:32:34.640

不确定，因为我没试过，Goto

`Help->About Eclipse SDK->Insallation Details->Installation History tab`.

从那里您可以获取安装历史记录，尝试选择以前的安装并还原。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-15T13:56:13.230

如果您只想要 ADT 本身（而不是推荐的一对匹配的 ADT 和 SDK 工具），那么我相信此链接将为您提供一个 zip 文件：

[ADT-16.0.0.zip](http://dl.google.com/android/ADT-16.0.0.zip)

因此，如果您卸载 ADT r17（或 18）项目，然后从存档安装，您将恢复。由于推荐使用配套的Tools和ADT，我自己没有试过，风险自负！

# java - 休眠，强制从数据库中获取对象

> ID：10083055
> 
> 赞同：0
> 
> 时间：2012-04-10T04:21:02.200
> 
> 标签：java, hibernate

如果我添加一个新对象并 go .save() 然后运行一个选择，则创建的最后一个对象是从类中检索的，而不是从数据库中检索，这意味着日期属性尚未转换为 SQL 格式并且它被搞砸了我的一些前端代码。

例如

`Tue Feb 06, 2012`代替`2012-02-06 00:00:00`

有没有办法确保我所有的对象都从数据库中提取出来？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-10T04:28:24.797

Hibernate 有几级缓存。您正在经历的是会话/一级缓存。没有办法禁用它。但是，如果您坚持做这样的事情，您可以考虑使用 StatelessSession [http://docs.jboss.org/hibernate/core/3.6/reference/en-US/html/batch.html第 15.3 节。](http://docs.jboss.org/hibernate/core/3.6/reference/en-US/html/batch.html)

如果您依赖数据库向用户返回格式正确的日期字符串，我建议您重新考虑用户界面、业务逻辑和持久层的分离。你不应该关心数据库或休眠如何格式化字符串，只要你能理解你正在存储/检索的数据。查看 MVC、MVVM 或任何其他分离模式。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-10T05:12:40.423

by default your get() or load will read from Cache first and then go to database if not found in database. On which it also get added to cache. You will need session.get() with appropraite LockMode. Not the default LockMode.NONE.

Plus I believe it requires flush() also in between save() and get() to gaurantee that save operation has been synchronized to database.

# flash - 如何以编程方式删除在 Flash Professional 中定义的掩码？

> ID：10083057
> 
> 赞同：2
> 
> 时间：2012-04-10T04:21:18.147
> 
> 标签：flash, actionscript, flash-cs5, mask

我意识到这完全是一个新手问题，但它让我发疯......

在 Flash Professional 中，我有一个影片剪辑，例如 1000 像素高和 50 像素宽。我将它包含在（下方）一个遮罩层中，该遮罩层的高度为 100 像素，宽度为 50 像素。在我的程序中，我垂直移动了影片剪辑，并且正如预期的那样，它被蒙版，因此我只能垂直看到 100 像素。

我的问题是：如何从我的电影剪辑中删除蒙版？当我在 Flash Builder 中调试检查影片剪辑时，它的 .mask 属性为空。不过*是*蒙面的...

我错过了什么？

提前致谢，

格雷格

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-19T07:38:21.053

格雷格是对的。您会认为您可以通过 DisplayObject 的 mask 属性访问在 Flash IDE 中设置的掩码，但您不能。在 flash 中设置的掩码在 actionscript 中始终为空。

去除面具的hacky版本是你可以尝试

```
displayObjectWithMaskOnIt.parent.removeChild(displayObjectWithMaskOnIt) 
```

接着

```
displayObjectWithMaskOnIt.parent.addChild(displayObjectWithMaskOnIt). 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-05-19T18:15:48.167

来自[http://forum.starling-framework.org/topic/weird-how-to-read-mask-info-from-an-swf-file](http://forum.starling-framework.org/topic/weird-how-to-read-mask-info-from-an-swf-file)

> 很简单：遮罩属性是与时间线遮罩完全不同的遮罩。
> 
> mask 属性允许您将任何对象用作任何其他对象的掩码（只要记住将它们放在同一个显示树上，否则事情会变得毫无意义）。
> 
> 时间线遮罩将给定的深度范围指定为被特定对象遮罩。
> 
> 这两个系统根本不通信，但它们做同样的工作。
> 
> 如果您想访问时间线掩码，最好带出您的 swf 解析器或 jsfl。

所以时间线掩码使用不同的机制，与掩码属性分开。这就是您无法访问它们的原因。正如其他人所提到的，您可以通过删除和添加子项来间接停用时间线蒙版，但是缺少解析 SWF 文件，我认为没有任何方法可以检测对象是否在第一个时间线蒙版中被蒙版地方。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-10T05:05:57.027

通过动作脚本检查蒙版是否适用于您的 MovieClip 的父级：

```
MovieClip(movicClipInstanceName_mc.parent).mask 
```

如果它被设置为`... .mask = null;`

通常，我在时间线中声明的任何掩码都不会在我的 AS 代码中弄乱，因为对我来说，我认为它是一个永久条件。如果您想稍后以编程方式更改它，我建议您在 AS 代码中设置 mask 属性。

```
movicClipInstanceName_mc.mask = someOtherMovieClipInstanceThatIsMyMask_mc; 
```

对我来说，这样做感觉更干净，我觉得我对它有更多的控制权。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-10T14:34:51.603

给大电影剪辑一个实例名称（比如 big_mc），然后

```
big_mc.mask = null; 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2016-11-07T00:59:10.030

我知道这不是您要寻找的答案，但这会去掉面具。如果您创建一个单独的剪辑将遮罩推到它上面，则会从之前遮罩的对象中移除遮罩，

例如...

object1.mask = mask1;

然后将您的代码添加到新对象 object2.mask = mask1;

因为一个对象一次只能遮盖 1 个对象，它现在将遮盖新对象，有效地从旧对象中移除遮罩

# php - Magento 静态块在 Internet Explorer 上的位置与在 Chrome、Firefox 上的位置不同

> ID：10083059
> 
> 赞同：0
> 
> 时间：2012-04-10T04:21:21.530
> 
> 标签：php, internet-explorer, magento, static-block

我在一个 magento 网站上创建了 3 个静态块（'vert_nav_link'、'social_network' 和 'vert_goto_hapi'），并将它们放在左列（侧边栏）上。在 Chrome、Firefox 和 Safari 上，它们都显示在左侧边栏上。在 IE 8 上，最后一个静态块位于主列。不知道为什么，因为我在所有三个上都使用了相同的编码。这是php代码，

```
<div class="main-container col2-left-layout">
   <div class="main">
       <div class="col-main">
            <?php echo $this->getChildHtml('content') ?>
       </div>
       <div class="col-left sidebar">
            <?php echo $this->getChildHtml('breadcrumbs') ?>
            <?php echo $this->getLayout()->createBlock('cms/block')->setBlockId('vert_nav_link')->toHtml(); ?>
            <?php echo $this->getChildHtml('left') ?>
            <?php echo $this->getChildHtml('right') ?>
            <?php echo $this->getLayout()->createBlock('cms/block')->setBlockId('social_network')->toHtml(); ?>
            <?php echo $this->getLayout()->createBlock('cms/block')->setBlockId('vert_goto_hapi')->toHtml(); ?>     
       </div>
    </div>
</div> 
```

任何见解都会有所帮助。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-10T05:21:44.863

检查那些：

*最后一个块的 HTML 是有效的。意味着没有这样的事情：

```
 <span</span> 
```

*更改左块高度。这可能只是css问题。所以试着增加左边的块高度，可能会在这个块上浮动，但我不确定，因为我不是 CSS 大师。另外 display:inline-block 或 inline 可能会解决您的问题。

# java - 在文件开头附加文本

> ID：10083060
> 
> 赞同：-2
> 
> 时间：2012-04-10T04:21:27.263
> 
> 标签：java, file, csv, utf-8

> **可能重复：**
> [在 Java 中将行添加到文件中](https://stackoverflow.com/questions/2537944/prepend-lines-to-file-in-java)

我有一个支持 UTF-8 编码的 CSV 文件。我想在这个文件的起点使用 java 插入一些文本。我怎样才能做到这一点？我不想创建另一个文件并将该文本和该文件的内容写入新文件。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-10T04:26:38.703

最简单的方法是创建另一个文件并写入该文本，然后将现有文件包含到新文件中。然后将新文件复制到旧文件名替换它。这具有额外的优势，您可以选择直到最后才更换。

适合内存的文件的另一种选择是将其吞入内存并将其写入相同的文件名。

# apache-flex - 是否需要 Flex API 才能将 Haxe 与 FDT5 结合使用

> ID：10083061
> 
> 赞同：1
> 
> 时间：2012-04-10T04:21:27.310
> 
> 标签：apache-flex, haxe, fdt

我安装了 FDT5，它给了我一个关于缺少 API 的警告。但[在常见问题解答中](http://fdt.powerflasher.com/docs/FAQ#Do_I_need_The_Flex_SDKs_to_use_haXe)，它说 API 不需要使用 Haxe。然而，在尝试遵循 Haxe FDT5 教程时，它说要创建一个新的 FDT 项目。但 FDT5 不会让我这样做。它给出了一个错误，即未安装所需的 SDK。那么我还需要安装 Flex 吗？还是我做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-10T20:46:49.043

要解决您的问题，请将 3.6 和 4.5 Flex SDK 添加到 FDT 或等到本月到期的 5.5 版本。

虽然您不需要 Flex SDK 来使用 Haxe 和 FDT，但当有人只想将 FDT 用于 Haxe、不设置 Flex SDK 并尝试创建新项目时，存在一个错误。

错误在于，当您尝试创建新项目时，FDT 的新项目向导将检查以确保 Flex SDK 已链接到 FDT。这是为了防止客户创建损坏的 ActionScript 项目。这对 AS 开发人员来说是好事，但对仅 Haxe 的开发人员来说是一件痛苦的事情——他们不需要 Flex SDK。

添加 Flex SDK 后，当您尝试创建 Haxe 项目时，FDT 不会警告您缺少 SDK。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-10T09:52:48.983

我建议使用外部类。在 mxml 或 as 上写下你想要的。将其编译成 swf（或 swc）。您可以在外部类的帮助下使用它。看[这里](http://haxe.org/doc/js/extern_libraries)了解详情。

# actionscript-3 - 当我在 AS3 中使用 for(i in object) 时会发生什么？

> ID：10083064
> 
> 赞同：10
> 
> 时间：2012-04-10T04:21:32.143
> 
> 标签：actionscript-3

要遍历`Object`AS3 中的属性，您可以`for(var i:String in object)`这样使用：

**目的：**

```
var object:Object = {

    thing: 1,
    stuff: "hats",
    another: new Sprite()

}; 
```

**环形：**

```
for(var i:String in object)
{
    trace(i + ": " + object[i]);
} 
```

**结果：**

```
东西：帽子
事情：1
另一个：[对象精灵]

```

然而，选择属性的顺序似乎有所不同，并且与我能想到的任何东西都不匹配，例如按字母顺序排列的属性名称、它们的创建顺序等。事实上，如果我在不同的地方尝试了几次不同的时间，顺序完全不同。

是否可以按给定顺序访问属性？这里发生了什么？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-04-10T06:40:36.840

我将其发布为答案只是为了通过直接查看 Flash 播放器源代码来补充[BoltClock 的答案，并提供一些额外的见解。](https://stackoverflow.com/a/10083707/562566)我们实际上可以看到专门提供此功能的 AVM 代码，它是用 C++ 编写的。我们可以在 ArrayObject.cpp 中看到以下代码：

```
// Iterator support - for in, for each
Atom ArrayObject::nextName(int index)
{
    AvmAssert(index > 0);

    int denseLength = (int)getDenseLength();
    if (index <= denseLength)
    {
        AvmCore *core = this->core();
        return core->intToAtom(index-1);
    }
    else
    {
        return ScriptObject::nextName (index - denseLength);
    }
} 
```

正如你所看到的，当有一个合法的属性（对象）要返回时，它是从类中查找的`ScriptObject`，特别是`nextName()`方法。如果我们查看 ScriptObject.cpp 中的这些方法：

```
Atom ScriptObject::nextName(int index)
{
    AvmAssert(traits()->needsHashtable());
    AvmAssert(index > 0);

    InlineHashtable *ht = getTable();
    if (uint32_t(index)-1 >= ht->getCapacity()/2)
        return nullStringAtom;
    const Atom* atoms = ht->getAtoms();
    Atom m = ht->removeDontEnumMask(atoms[(index-1)<<1]);
    if (AvmCore::isNullOrUndefined(m))
        return nullStringAtom;
    return m;
} 
```

我们确实可以看到，正如人们在这里指出的那样，VM 正在使用哈希表。然而，在这些函数中，提供了一个特定的索引，乍一看，这表明必须有特定的排序。

如果您深入挖掘（我不会在此处发布所有代码），那么 for in/for 每个功能中涉及到来自不同类的大量方法，其中一个是`ScriptObject::nextNameIndex()`基本上提取整个哈希表的方法和只要下一个值指向有效对象，就开始为表中的有效对象提供索引并递增参数中提供的原始索引。如果我的解释是正确的，这将是您随机查找背后的原因，我不相信这里有任何方法可以在这些操作中强制使用标准化/有序映射。

**来源**
对于那些可能想要获取 Flash 播放器的开源部分的源代码的人，您可以从以下 mercurial 存储库中获取它（您可以像 github 一样下载 zip 中的 snapshop，这样您就不必安装水银）：

[http://hg.mozilla.org/tamarin-central](http://hg.mozilla.org/tamarin-central) - 这是“稳定”或“发布”存储库

[http://hg.mozilla.org/tamarin-redux](http://hg.mozilla.org/tamarin-redux) - 这是开发分支。可以在此处找到对 AVM 的最新更改。这包括对 Android 等的支持。Adobe 仍在更新和开源 Flash 播放器的这些部分，所以它是很好的当前和官方的东西。

当我在这里时，这可能也很有趣：[http](http://code.google.com/p/redtamarin/) ://code.google.com/p/redtamarin/ 。它是 AVM 的一个分支（并且相当成熟）版本，可用于编写服务器端动作脚本。整洁的东西，并且有大量的信息可以让我们深入了解 AVM 的工作原理，所以我想我也会包括它。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-04-10T05:48:41.150

这种行为已[记录在案](http://help.adobe.com/en_US/ActionScript/3.0_ProgrammingAS3/WS5b3ccc516d4fbf351e63e3d118a9b90204-7fcf.html#WS5b3ccc516d4fbf351e63e3d118a9b90204-7f5b)（强调我的）：

> 循环遍历对象的`for..in`属性或数组的元素。例如，您可以使用`for..in`循环来遍历通用对象的属性**（对象属性不按任何特定顺序保存，因此属性可能以看似随机的顺序出现）**

如何存储和检索属性似乎是一个实现细节，文档中没有涉及。不过，正如 ToddBFisher 在评论中提到的，通常用于实现关联数组的数据结构是[哈希表](https://en.wikipedia.org/wiki/Hash_table)。[本页中](http://help.adobe.com/en_US/ActionScript/3.0_ProgrammingAS3/WS5b3ccc516d4fbf351e63e3d118a9b90204-7eea.html)甚至提到了AS3 中的关联数组，如果您[检查 Ascension Systems 所示的 AVM 代码](https://stackoverflow.com/a/10084227/106224)，您会发现正是这样的实现。如前所述，在典型的哈希表中没有顺序或排序的概念。

我不相信有办法以特定顺序访问属性，除非您以某种方式存储该顺序。

# facebook - 在 Facebook 页面选项卡应用程序（时间轴）上覆盖 facebook 元素（导航、聊天）的 Flash 对象

> ID：10083065
> 
> 赞同：0
> 
> 时间：2012-04-10T04:21:33.220
> 
> 标签：facebook, facebook-apps, facebook-timeline

我有一个我正在为客户开发的小型 facebook 欢迎页面，当我在页面上嵌入了一个 youtube 播放器并且滚动内容时，flash 对象覆盖了顶部导航栏以及聊天。

[示例 http://www.selecsosi.com/files/test.png](http://www.selecsosi.com/files/test.png)

非常感谢有关纠正此问题的方法的任何帮助，以便将其呈现在包装器元素后面。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-10T14:06:08.883

解决了我自己的问题，我完全愚蠢。我正在使用 swfobject 库嵌入播放器，我需要在属性参数中包含一个 wmode ：播放器的“透明”。

# eclipse - Ctrl-S 在 Eclipse 中将光标移动到文档顶部附近

> ID：10083077
> 
> 赞同：1
> 
> 时间：2012-04-10T04:23:21.360
> 
> 标签：eclipse, keyboard-shortcuts

为什么每次我使用 Ctrl-S 在 Eclipse 中保存文件时，它都会将光标移动到我正在处理的页面的顶部？巧合的是，它会将光标移动到我正在编辑的 HTML 页面的 JavaScript 部分的顶部。这真的很烦人。我该如何阻止它？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-28T13:38:55.853

是的，被同样的烦恼所困扰。在 Eclipse 首选项中，选择 javascript 然后编辑器。在编辑器首选项页面上有一个默认选中的框，称为“JavaScript 名称中的智能插入符号定位（覆盖平台行为）”。取消选中它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-07T11:24:48.150

我养成了在 ctrl+S 之后立即按 ctrl+Q 的习惯，这会将您带回到上次编辑的位置。

与其说是一种解决方案，不如说是一种解决方法，但它仍然阻止了我把头发拉出来。

S。

# eclipse - 创建一个依赖于 Maven 项目的 Eclipse 插件

> ID：10083082
> 
> 赞同：2
> 
> 时间：2012-04-10T04:24:09.350
> 
> 标签：eclipse, maven, eclipse-plugin

我有一个 maven 项目，其中包含我需要在 eclipse 插件中使用的某个 api。这个 eclipse 插件目前不是一个 maven 项目，而是一个带有清单的普通 eclipse 插件项目。我将此插件项目转换为 maven 项目（使用 m2e 菜单命令将项目更改为 maven）我从该项目中添加了对 maven 项目的依赖项。我为这个项目构建的 Maven 从命令行运行良好。现在，当我启动 eclipse 应用程序时，我从插件项目中得到了我所指的 api 的 ClassNotFoundException。请帮忙。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-26T15:29:14.270

这可以通过将 tyco 配置添加到 maven 项目来完成。这使您能够拥有一个带有 Manifest 的 maven 项目，从而使其他插件能够依赖它。更多信息： http: [//www.eclipse.org/tycho/](http://www.eclipse.org/tycho/)

# actionscript-3 - 声音一次播放多次

> ID：10083084
> 
> 赞同：0
> 
> 时间：2012-04-10T04:24:18.607
> 
> 标签：actionscript-3, flash-cs5

我在 Flash 中遇到声音问题。我可能以错误的方式进行编码，因为我的大部分代码都在框架上。

所以，我有这两个变量

```
var outsideDay:Sound = new daysong();
var outsideNight:Sound = new nightsong(); 
```

我想在特定的帧上播放这些歌曲。然而，这些声音偶尔会播放，就像一次播放 50 次一样。我认为这是因为我有其他代码通过 Enter_Frame 函数链接到框架。如何让声音循环播放而不是一次播放多次？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-10T05:23:53.227

您是否在任何帧的时间轴上的任何位置放置了声音？如果是这样，请删除该框架。

此外，如果您在没有`stop();`调用它的关键帧上声明了代码，那么当它“进入”它时，它可能会一遍又一遍地击中该帧。尝试`stop();`在代码的开头或结尾的关键帧处添加，只要它对您的项目最有意义。

在尝试了这两件事之后，我学会的另一种可能派上用场的爱方法是：

```
flash.media.SoundMixer.stopAll(); 
```

这将停止所有声音，以便您在拨打此电话后开始播放的任何声音都不会与其他先前开始的声音抗衡。

[这个声音教程](http://www.republicofcode.com/tutorials/flash/as3sound/)也可能对你有用。

让我们知道进展如何，或者这些东西是否有帮助。

# php - 登录时的 MYSQL/PHP 更新字段

> ID：10083085
> 
> 赞同：0
> 
> 时间：2012-04-10T04:24:18.767
> 
> 标签：php, mysql

我创建了一个登录页面，在 db 表中我有一个名为 last_access 的字段来存储上次登录日期和时间，数据类型是时间戳

以下是select语句；

```
$sql="SELECT * FROM $tbl_name WHERE $db_usercol='$myusername' and $db_passcol='$mypassword'";
$result=mysql_query($sql); 
```

每次用户登录时如何更新字段“last_access”？并将值设置为 NOW()。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-10T04:35:19.673

```
UPDATE $tbl_name set last_access = NOW() WHERE $db_usercol='$myusername' 
```

或者你可以使用

```
UPDATE $tbl_name set last_access = NOW() WHERE 
               $db_usercol='$myusername' AND $db_passcol='$mypassword' 
```

而不是您的选择，并检查有多少行受到影响。如果没有 -> 登录不成功。如果 1 -> 登录成功。如果更多，你有一个问题......

但首先应该删除那个 SQL 注入漏洞！

检查[http://php.net/manual/en/book.pdo.php](http://php.net/manual/en/book.pdo.php)，您的 SQL 函数需要进行一些更改，但它实际上很容易使用，例如：

```
$pdo = new PDO("mysql:host=localhost;dbname=yourdbname", 'dbuser', 'dbpass');
$stmt = $pdo->prepare('SELECT * from table where column = :column');
$stmt->bindParam(':column', $column);
$stmt->execute();
$result = $stmt->fetchAll(); 
```

很简单，SQL注入攻击不会成功

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-10T04:31:47.653

在登录脚本/函数中添加：

```
$sql = sprintf("UPDATE %s SET last_access = NOW() WHERE id = %d", $tbl_name, $user_id);
$result = mysql_query($sql); 
```

希望有帮助。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-10T04:35:07.387

身份验证成功后，您可以执行以下操作：

```
 //get the id after user has logged in then run the update query
mysql_query("UPDATE your_table SET `last_access` = NOW() WHERE id =".$id); 
```

# jquery - Fancybox - 从启动幻灯片中取消绑定缩略图

> ID：10083086
> 
> 赞同：0
> 
> 时间：2012-04-10T04:24:19.427
> 
> 标签：jquery, fancybox

好的，这是两难的。有一个滑块，当您单击缩略图时，较大的图像会出现在上面的 div 中。很直接。现在我已经成功地为更大的图像分配了一个点击功能，这样 Fancybox 就会弹出。

```
$('#launchImg').click(function(){
    $('.room-thumbnail').fancybox({
            'transitionIn'      : 'elastic',
            'transitionOut'     : 'elastic',
            'titlePosition'     : 'over'
            }).trigger('click');
            return false;
}); 
```

唯一的问题是，当单击较大的图像时，它会从缩略图中获取图像（这不是真正的缩略图，而只是调整大小的全尺寸图像）并且已经分配了一个单击功能。

```
$('.room-thumbnail').click(function() {
    var img = new Image();

    $(img)
        .load(function () {
            $('#room-ajax-loader').css('display', 'none');
            $(this).hide();

            $('#room-big-image a').attr('href', $(this).attr('src'));

            $('#room-big-image a').append(img);

            $(this).fadeIn(function() {
                $('#room-big-image img:first-child').remove();
            });
        })
        .attr('src', $(this).attr('href'));
    if (!$(this).hasClass('thumbnail-current')) {
        grayscale($('.thumbnail-current'));
    }

    $('.room-thumbnail').removeClass('thumbnail-current');
    $(this).addClass('thumbnail-current');
    $('#room-ajax-loader').css('display', 'block');
    return false;
}); 
```

所以我遇到的问题是，一旦我点击了打开fancybox的大图像，一切都按预期工作，但是在我关闭fancybox后，缩略图不再改变它们上方的大图像，而是从滑块启动fancybox，我不这样做想要发生。

所以基本上，我如何从我的缩略图中解开fancybox？

这是html：

```
<div id="slider0" class="des-row">

        <div class="des-container">
              <div class="des-container-left">
                <div id="room-big-image">
                            <a id="launchImg" title="" href="images/produits/t-shirts/fresh_tf84_kaki/fresh_tf84_kaki.jpg" >
                    <img src="images/produits/t-shirts/fresh_tf84_kaki/fresh_tf84_kaki.jpg" alt="fresh_tf84_kaki.jpg" style="width:350px; height:auto;" /></a>
                </div>
            </div>

        <div class="des-container-right">
            <div id="room-slider-first-container">

              <a id="room-slider-button-left" class="button-left-orange" href="#"></a>
              <a id="room-slider-button-right" class="button-right-orange" href="#"></a>
              <div id="room-slider-button-left-disabled" class="button-left-disabled"></div>
              <div id="room-slider-button-right-disabled" class="button-right-disabled"></div>
              <div id="room-ajax-loader"></div>
              <!-- begin room-slider-second-container -->
              <div id="room-slider-second-container"><!-- begin room-slider-slide -->
                <div id="room-slider-slide">

                   <a rel="group1" href="images/produits/t-shirts/fresh_tf84_kaki/fresh_tf84_kaki.jpg" class="room-thumbnail"><img src="images/produits/t-shirts/fresh_tf84_kaki/fresh_tf84_kaki.jpg" alt="fresh_tf84_kaki.jpg" /></a>

                   <a rel="group1" href="images/produits/t-shirts/fresh_tf84_kaki/fresh_tf84_kaki_closeup.jpg" class="room-thumbnail"><img src="images/produits/t-shirts/fresh_tf84_kaki/fresh_tf84_kaki_closeup.jpg" alt="fresh_tf84_kaki_closeup.jpg" /></a>

                 </div><!-- end room-slider-slide -->
              </div><!-- end room-slider-second-container -->
            </div><!-- end room-slider-first-container -->
        </div><!-- end des-container-right -->
    </div><!-- end des-container -->
  </div><!-- end slider0 - des-row --> 
```

谢谢，如果你已经读到这里了！和平。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-10T07:19:58.943

如果点击大图会触发fancybox，那你为什么不这样做呢？

```
$('#launchImg').fancybox({
 'transitionIn'      : 'elastic',
 'transitionOut'     : 'elastic',
 'titlePosition'     : 'over'
}); 
```

# jquery - addClass 到 ui-dialog 按钮的问题

> ID：10083087
> 
> 赞同：0
> 
> 时间：2012-04-10T04:24:41.270
> 
> 标签：jquery, jquery-ui-dialog

有人可以帮我向 ui-dialog-buttonset 添加一个类。我有 2 个按钮“添加”和“删除”，并希望适当地设置每个按钮。

如何向“添加此项目”的按钮添加一个类

```
$dialogContent.dialog({
            modal: true,
            resizable: false,
            title: "New thing",
            close: function() {
                $dialogContent.dialog("destroy");
                $dialogContent.hide();
                $('#other').stuff("removeUnsavedEvents");
            },

            buttons: {
                'Add this item' : function() {

                    if(client_url.val() == '')
                    {
                        alert('client not selected');
                        $other.stuff("removeUnsavedEvents");
                        $dialogContent.dialog("close");
                        return;
                    }

                            $dialogContent.dialog("close");
                        },
                    });

                    update_stuff_overview();
                }
            }

        } 
```

谢谢

编辑从 ui-dialog 插件添加 html..

```
<div class="ui-dialog-buttonset">
    <button type="button" class="ui-button ui-widget ui-state-default ui-corner-all ui-button-text-only" role="button">
        <span class="ui-button-text">Add this item</span>
    </button>
</div> 
```

我正在尝试将“new_class”添加到上面的按钮。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-10T05:44:02.833

这是答案

```
var button_text = $('#button-id').attr('value');
if(button_text == 'Add this item'){
    $('#button-id').addClass('class_name');
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-12T01:15:08.983

在对话框的打开事件中添加：

```
$(this).parent().find('button:nth-child(1)').addClass('your-class-name'); 
```

它只会设置第一个按钮的样式。如果您想设置其他按钮的样式，请以相同的方式应用，但更改子编号（例如，'button:nth-child(2)'）。这就是我在 jQuery 1.9 中设置按钮样式的方式

# asp.net - Sql Query 对两个表中的数据进行分组

> ID：10083089
> 
> 赞同：0
> 
> 时间：2012-04-10T04:24:54.250
> 
> 标签：asp.net, sql-server-2008

我有两张桌子`Department`和`Employee`.

**部门**表如下所示：

```
 ID     DeptName
   1      IT
   2      CSE
   3      ECE 
```

**员工**表：

```
 ID     DeptID     EmployeeName    Salary
   1       1         John            10000
   2       1         Bob             15000
   3       2         Akon            12000
   4       2         Smith           20000 
```

现在我想以这样一种方式对数据进行分组，以便得到以下结果，其中包括这些列：

```
 ID      DeptName      Employee 
   1       IT            John,10000
                         Bob,15000

   2       CSE           Akon,12000
                         Smith,20000 
```

我们可以使用 SQL 组函数或任何其他方式做这样的事情吗？

请帮我。

谢谢，拉杰比尔

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-10T04:47:03.050

这个：

```
select final.deptId, d.deptName,
  e3.employeename + ',' + cast(e3.salary as varchar) employee
from employee e3
left join (
  select e1.id, e1.deptId from employee e1
  left join employee e2
  on e1.deptId = e2.deptId and e1.id > e2.id
  where e2.id is null
) final on e3.id = final.id
left join department d on d.id = final.deptId 
```

结果是：

```
+--------+----------+-------------+
| 部门 | 部门名称 | 员工 |
+--------+----------+-------------+
| 1 | 资讯科技 | 约翰,10000 |
| | | 鲍勃,15000 |
| 2 | CSE | 阿康,12000 |
| | | 史密斯,20000 |
+--------+----------+-------------+

```

请注意，“空白”值实际上是用`null`值填充的。

如果您有任何问题，请告诉我。

# wpf - 使用 ContentPresenter 在 wpf 的不同窗口中托管相同的控件实例

> ID：10083090
> 
> 赞同：1
> 
> 时间：2012-04-10T04:24:55.083
> 
> 标签：wpf, windows, instance, contentpresenter, frameworkelement

*   我有三个窗口 - Main、sub1 和 sub2。
*   一个名为 Context 的类（这是我的模型）。
*   上下文具有*FrameworkElement*类型的属性，并在 Main 中实例化。
*   从 Main，我正在实例化 sub1 和 sub2。
*   sub1 的数据上下文设置为 Main 的上下文。
*   sub2 的数据上下文也设置为 Main 的 Context。
*   sub1 和 sub2 具有相似的 xaml。xaml 只是在**ContentPresenter**中托管Context的*FrameworkElement*。
***   当我运行应用程序时，*FrameworkElement*仅托管在 sub2 中。**

 **我知道不可能在两个地方托管相同的实例，但是，当 sub1 和 sub2 被激活时，有没有办法分离和附加内容？**

# iphone - 推送到导航栏的问题

> ID：10083092
> 
> 赞同：0
> 
> 时间：2012-04-10T04:25:05.753
> 
> 标签：iphone, objective-c, ipad, uinavigationcontroller

我有以下代码：

```
- (void)setupBook
{
    if (self.bookNavigationController) {
        BookViewController *bookVC = [[BookViewController alloc] initWithTemplate:x];
        self.myBookVC = bookVC;
        [bookVC release];    
        myBookVC.pageTitle = @"My Book";
        UINavigationController *nController = [[UINavigationController alloc] initWithRootViewController:myBookVC];
        self.bookNavigationController = nController;
        [nController release];
    }
} 
```

然后在我拥有的代码的其他部分：

```
[self.someOtherNavigationController pushViewController:self.bookVC]; 
```

但是现在当我尝试将 self.bookNavigationController 呈现为模态视图控制器时，这是因为 myBookVC 不存在。为什么是这样？它只是显示一个带有导航栏的空视图。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-10T05:19:00.533

何时首先创建视图控制器，您将其分配给属性，但是当分配为导航控制器的 rootViewController 时，您将引用 ivar。在分配 rootViewController 时使用该属性。

```
BookViewController *bookVC = [[BookViewController alloc] initWithTemplate:x];
bookVC.pageTitle = @"My Book";
self.myBookVC = bookVC;
[bookVC release];
UINavigationController *nController = [[UINavigationController alloc] initWithRootViewController:self.myBookVC];
self.bookNavigationController = nController;
[nController release]; 
```

# android - NodeJS + SocketIO 推送到移动应用

> ID：10083093
> 
> 赞同：5
> 
> 时间：2012-04-10T04:25:08.757
> 
> 标签：android, ios, node.js, websocket, socket.io

我在 SocketIO 的网站上看到可以将 SocketIO 用于移动设备。我试图在其网站上找到有关如何执行此操作的文档，但找不到任何文档。

有没有人想出如何使用 SocketIO 向移动设备发送消息？我的猜测是它必须存在于 WebView 或可以运行 javascript 的东西中？

**编辑** 如果我不打算使用 Sencha 或 PhoneGap 怎么办。我想去本土。目标-C/Java。这可能吗？

**添加到所选答案中** ，我发现了一个 java socket.io 客户端 [https://github.com/benkay/java-socket.io.client](https://github.com/benkay/java-socket.io.client)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-10T04:47:24.363

Socket.io 利用 Web 套接字协议（客户端通过 HTTP 发送到服务器的升级请求）提供全双工通信通道。正如您所提到的，移动领域的许多网络浏览器都支持它。

为了实现这一点，其中一个用例是，例如，您要开发一个基于 phonegap 的应用程序，该应用程序基本上是 HTML、CSS 和 JS。因此，要拥有专用的全双工通信通道，您可以使用[socket.io](http://socket.io/#home)。

当您编写 Node JS 服务器时：参考 Socket.io[网站](http://socket.io/#home)

```
var io = require('socket.io').listen(80); // beauty is web socket still runs in 80/443(WSS) and leverages TCP's capabilities.

io.sockets.on('connection', function (socket) {
  socket.emit('news', { hello: 'world' });
  socket.on('my other event', function (data) {
    console.log(data);
  });
}); 
```

但是在您的移动开发方面，您必须在您想要利用 Web 套接字功能的 HTML 中包含 JS。

```
<script src="/socket.io/socket.io.js"></script>
<script>
  var socket = io.connect('http://localhost');
  socket.on('news', function (data) {
    console.log(data);
    socket.emit('my other event', { my: 'data' });
  });
</script> 
```

socket.io 网站上有一个可下载的客户端 JS。

希望这可以帮助。

# windows-phone-7 - 在代码隐藏中设计列表框

> ID：10083094
> 
> 赞同：0
> 
> 时间：2012-04-10T04:25:10.777
> 
> 标签：windows-phone-7

我在后面的代码中设计了 Listbox。我想设置方向为水平的列表框。但我不知道在代码中设置 ItemsPanel。你能帮助我吗 ？谢谢。在 xaml 设计中，我使用：

```
 <ListBox.ItemsPanel>
                        <ItemsPanelTemplate>

                            <StackPanel Orientation="Horizontal"/>

                        </ItemsPanelTemplate>
       </ListBox.ItemsPanel> 
```

除此之外，我想在列表框中添加另一个不存在的属性。例如：在 xaml 中，我可以在 Listbox 中添加 Grid.column = 1，但我不知道在后面的代码中使用它。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-10T06:35:43.317

您可以直接添加堆栈面板而不添加项目面板。

```
listBox1 = new ListBox();  
  stackpanel stk = new stackpanel();  
  listbox1.items.add(stk); 
```

用于设置网格：

```
 var textBlock = new TextBlock { Text="mytext" };  
   Grid.SetColumn(textBlock, 1);  
   Grid.SetRow(textBlock, 1);  
   Grid.Children.Add(textBlock); 
```

# c++ - 我正在尝试用二进制文件编写一些文件，我需要在其中覆盖文件内容，如何覆盖而不是插入

> ID：10083097
> 
> 赞同：0
> 
> 时间：2012-04-10T04:25:53.850
> 
> 标签：c++, file, binaryfiles, ofstream

我正在用 C++ 编写一个二进制文件，在那里我遍历到一个特定的位置，需要用新的位置覆盖内容。我知道整数大小的内容，所以我跟踪位置并重写它。似乎，ofstream 写入函数插入或附加变量。有没有一种方法，我可以重写，而不是在文件中追加或插入

```
 long word = sizeof(int) + sizeof(long) + sizeof(long);

 std::ofstream file_write(filename, std::ios::out|std::ios::binary);

 file_write.seekp(word);      
 long pos = file_write.tellp();
 file_write.write((char *)&some_integer,sizeof(int));
 file_write.close()

 //some other location

 file_write.seekp(pos);
 file_write.write((char *)&some_other_integer,sizeof(int)); 
```

//这里 some_integer 应该被 some_other_integer 覆盖。有没有办法做到这一点？

那会像

值1，值2，值3

我也许可以用值 5 替换值 2。

那么它应该看起来像

值1，值5，值3

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-10T04:27:48.890

相关标志被截断

> （截断）任何当前内容都被丢弃，假设打开时长度为零。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-10T04:28:20.073

您需要添加`std::ios::trunc`到您的开放参数，如：

```
std::ofstream file_write(filename, std::ios::out|std::ios::binary|std::ios::trunc); 
```

这将截断文件，丢弃任何现有内容。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-15T21:50:59.667

我整理了一下。我们需要使用 fstream 而不是 ofstream。谢谢大家帮助

# javascript - 循环和搜索 localStorage 中的所有项目

> ID：10083098
> 
> 赞同：14
> 
> 时间：2012-04-10T04:26:02.533
> 
> 标签：javascript, arrays, for-loop, local-storage

我正在尝试遍历 localStorage 以通过`localStorage.length`与我的搜索算法一起使用的所有项目。如果我将：`i < localStorage.length`在 for 循环中更改为简单的数字，即：`for (i=0; i<100; i++)`而不是：`(i=0; i<=localStorage.length-1; i++)`，**一切**都有效。但是，我确实意识到问题可能出在搜索算法上。

获取所有项目的代码：

```
 var name = new Array();

   for (var i = 0; i <= localStorage.length - 1; i++) { // i < 100 works perfectly
   key = localStorage.key(i);
   val = localStorage.getItem(key); 
   value = val.split(","); //splitting string inside array to get name
   name[i] = value[1]; // getting name from split string
   } 
```

我的工作（！？）搜索算法：

```
 if (str.length == 0) { 
  document.getElementById("searchResult").innerHTML = "";
  }   
  else {          
      if(str.length > 0) {
          var hint = "";
          for(var i=0; i < name.length; i++) {                
                if(str.toLowerCase() == (name[i].substr(0, str.length)).toLowerCase()) { //not sure about this line
                    if(hint == "") {                            
                            hint = name[i];                         
                        } else {                            
                            hint = hint + " <br /> " + name[i];                                 
                        }                 
                   }                      
             }            
       }          
}

 if(hint == "") {   
document.getElementById("searchResult").innerHTML=str + " står inte på listan";     
} else {        
    document.getElementById("searchResult").innerHTML = hint;       
    }
 } 
```

my 有`localStorage.length`什么问题，或者搜索算法有什么问题？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-05-26T17:17:28.317

localStorage 是一个`object`，而不是一个`array`. 尝试`for(var i in window.localStorage)`：

```
for(var i in window.localStorage){
   val = localStorage.getItem(i); 
   value = val.split(","); //splitting string inside array to get name
   name[i] = value[1]; // getting name from split string
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-18T03:02:51.827

现在问题已解决。问题是每次将数据保存到 localStorage 时，由于错误编写的 for 循环（在 setItem 部分中），一个额外的空项目存储在本地数据库的底部。arrayIndex < guestData.length 应该是 arrayIndex <guestData.length-1。arrayIndex < guestData.length-1 存储所有项目，而不会在数据库底部创建一个空项目，这后来弄乱了搜索算法，因为要搜索的最后一个值是未定义的（空项目）。

# python - '[A' 在打印命令中有什么作用？

> ID：10083101
> 
> 赞同：1
> 
> 时间：2012-04-10T04:26:21.057
> 
> 标签：python, printing

我`'[A'`在进度条模块中看到了这一点，但我不知道它是做什么的。

如：

```
print '[]', chr(27) + '[A' 
```

你知道它是做什么的吗？？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-10T04:28:31.490

这是一个[VT100 Escape 序列](http://www.termsys.demon.co.uk/vtansi.htm)；它向上移动光标。

请注意，`chr(27)`启动序列。通常，这可能会被写入`"\033[A"`（因为`33oct == 27dec`）。如果您曾经在 bash 提示符中添加过颜色，那么您已经看到了这一点。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-10T04:32:12.630

VT100 转义序列。

`ESC[<value>A`将光标向上移动几`<value>`行。看起来如果`<value>`省略它默认为一行。

# iphone - didReceiveData 在子类中重写

> ID：10083106
> 
> 赞同：0
> 
> 时间：2012-04-10T04:27:13.247
> 
> 标签：iphone, objective-c, xcode, subclass

在 Xcode 项目中，我有 2 个类`ParentViewController`，另一个类`ChildViewController`是`ParentViewController`. 在`ParentViewController`课堂上，我们使用`NSURLConnection`,`didReceiveData`并`connectionDidFinishLoading`从后端服务器获取一些数据。它工作得很好。现在`ChildViewController`我需要建立连接并从后端获取数据。但是如果我添加`didReceiveData`and `connectionDidFinishLoading`in `ChildViewController`，那么`didReceiveData`in`ParentViewController`似乎不再起作用了。我想知道为什么？

似乎我有很多不同的请求发送到后端，所以我的`didReceiveData`和`connectionDidFinishLoading`被声明压倒了`(connect == someConnection)`。我想知道处理这种情况的任何巧妙方法？谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-10T04:41:14.733

您的问题是您试图在视图控制器中获取数据，这不是您应该获取数据的地方。

将所有数据提取移动到模型对象。当视图控制器需要某些东西时，他们可以请求模型加载它。然后，即使视图控制器离开屏幕，模型仍然可以正确更新并让视图控制器知道何时完成。

通常，每个连接都可以有一个模型对象。例如，如果我正在从服务器数据库更新个人记录，那么 Person 对象将请求其自己的数据。然后它的 connectionDidFinishLoading 只需要处理那个连接。

您仍然可能希望通过中央队列（`NSOperationQueue`例如）放置您的连接，这样您就可以避免请求使您的网络连接不堪重负。但是每个连接的委托将是相关的模型对象，而不是视图控制器。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-10T04:53:26.233

ObjectiveC 中的网络代码会很快变得不堪重负。我建议使用库来简化流程。结帐[https://github.com/AFNetworking/AFNetworking](https://github.com/AFNetworking/AFNetworking)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-10T04:56:22.513

子类将继承 ParentViewController 的连接委托方法。如果您希望在子类中具有相同的行为，请不要在那里实现委托方法。

另一个想法是完全避免使用委托方法。在 iOS5 中，NSURLConnection 提供了一种更好的方法来使用完成块来启动连接，因此您的每个连接的代码都可以位于上下文中，如下所示：

```
NSURLRequest *requestA = [NSURLRequest requestWithURL:[NSURL URLWithString:@"http..."]];
[NSURLConnection sendAsynchronousRequest:requestA queue:[NSOperationQueue currentQueue] completionHandler:^(NSURLResponse *response, NSData *data, NSError *error) {
    // do what you need to do when requestA completes
}];

NSURLRequest *requestB = [NSURLRequest requestWithURL:[NSURL URLWithString:@"http..."]];
[NSURLConnection sendAsynchronousRequest:requestA queue:[NSOperationQueue currentQueue] completionHandler:^(NSURLResponse *response, NSData *data, NSError *error) {
    // do what you need to do when requestB completes
}]; 
```

如果应用程序正在执行大量远程请求，我同意您可能想要重新考虑设计的其他答案。

# visual-studio-2010 - 无法通过向导创建 ADO.NET 实体数据模型

> ID：10083107
> 
> 赞同：2
> 
> 时间：2012-04-10T04:27:31.213
> 
> 标签：visual-studio-2010, entity-framework-4.1

我有一个问题，我无法找出问题所在。在 Visual Studio 2010 中，我试图通过向导添加一个新的 ADO.NET 实体数据模型（我使用的是 Entity Framework 4.1）。在第二个向导步骤（即“选择您的数据连接”）之后，我按下一步，向导立即关闭，根本没有后续步骤。这是我的实体连接字符串：

```
metadata=res://*/DAL.Model1.csdl|res://*/DAL.Model1.ssdl|res://*/DAL.Model1.msl;provider=System.Data.SqlClient;provider connection string="Data Source=DMITRIY-TOSH\SQLEXPRESS;AttachDbFilename=|DataDirectory|\ASPNETDB.MDF;Integrated Security=True" 
```

那个连接字符串有什么问题吗？我应该改变什么以及如何改变？或者还有什么可能是问题的原因？请帮帮我。我什至不知道如何使它工作以查看可以选择表的下一个向导步骤。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-10T18:03:45.253

找到了解决方案。文件夹“App_Data”（其中包含数据库）未包含在项目中。只是因为那个向导没有工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-01-13T12:49:35.067

我也遇到了这个问题，以上所有方法都不适合我。对我有帮助的是以下内容。

当您尝试与数据库连接时，该数据库可以拥有具有不同凭据的不同用户，它可以接受。假设用户 A 到 D。

如果您尝试与用户连接，请确保该用户启用了正确的凭据，在这种情况下，启用读取和写入选项。

为此，请启动 MS SQL Server Managment Studio，与您的 SQL 服务器连接，然后在 Visual Studio 中选择您尝试与之建立连接的数据库。在 'your_dbname' --> Security --> Users 下，您可以找到用户列表。右键单击您尝试登录的用户名并选择属性。一个窗口打开。选择“常规”（默认选择）页面并在“数据库角色成员资格”选项卡下**确保选择“db_datareader”和“db_datawrite”。**

注意：当您登录 MS SQL Server Managment Studio 时，请确保您使用可以启用/禁用这些选项的用户登录...

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-03-21T16:01:49.887

我创建了一个空模型，然后在“模型浏览器”中选择它，右键单击它并选择“从数据库更新模型”。然后我可以向它添加一个表......

# tridion - 当我们直接组件源 XML 时如何获取模式名称

> ID：10083109
> 
> 赞同：1
> 
> 时间：2012-04-10T04:27:32.190
> 
> 标签：tridion

我正在使用 SDL Tridion 2011 SP1 中的核心服务 2011 创建组件。

我只想知道，当我在本地机器上直接拥有组件源 XML 时，是否可以获取架构名称。

考虑我有 ABCD.xml 存储在我的本地机器中。我想给这个 ABCD.xml 作为输入来获取它正在使用的架构。

是否有可能通过核心服务 2011，如果可以，请分享您的看法。

只是为了在我的本地机器上有一个示例内容 xml 文件。是这里。

```
 <Content xmlns="uuid:someUUID">
                 <first>first filed</first>
                 <second>second field</second>
            </Content> 
```

谢谢你。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-10T05:34:21.240

通常，组件的 XML 包含对 Schema TcmUri 和标题（在 node 下`tcm:Component/tcm:Data/tcm:Schema`）的引用。

但是，如果您`ComponentData`在核心服务中加载，您将看不到通过`ComponentData`API 公开的完整组件 XML。

有一种方法可以`TcmUri`从`ComponentData`. 只需使用`ComponentData.Schema`属性`IdRef`或`Title`.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-17T08:11:54.730

您可以使用以下代码： XmlDocument componentXml = new XmlDocment();

```
XmlDocument componentXml = new XmlDocument();
componentXml.Load("Your Xml File Path");
XmlNameTable nameTable = new NameTable();
XmlNamespaceManager nsmgr = new XmlNamespaceManager(nameTable);
nsmgr.AddNamespace("tcm", "http://www.tridion.com/ContentManager/5.0");

XmlNode schemaNode = componentXml.SelectSingleNode("/tcm:Component/tcm:Data/tcm:Schema", nsmgr);
string schemaTitle = schemaNode.Attributes["xlink:title"].Value; 
```

# android - 数据没有插入sqlite中的数据库？

> ID：10083111
> 
> 赞同：0
> 
> 时间：2012-04-10T04:27:52.593
> 
> 标签：android, sqlite

尝试从android中的edittext将数据插入数据库，但数据未插入。

我的代码——

```
ContentValues values= new ContentValues();
values.put(KEY_EMAIL, GlobalVar.email);
values.put(KEY_NAME, GlobalVar.name);
myDataBase.insert(MY_EMP, null,values); 
```

我的日志猫

```
04-10 09:50:20.121: E/running(280): create database called
04-10 09:50:20.121: E/running(280): chek database called
04-10 09:50:20.121: E/running(280): chek database try block called
04-10 09:50:20.171: E/running(280): create database called try block
04-10 09:50:20.191: E/running(280): copy database called
04-10 09:50:20.211: E/running(280): open data successfull
04-10 09:50:50.720: W/KeyCharacterMap(280): No keyboard for id 0
04-10 09:50:50.720: W/KeyCharacterMap(280): Using default keymap: /system/usr/keychars/qwerty.kcm.bin 
```

`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-10T06:32:16.670

如果您不提供所有必需的列数据（即所有没有默认值、接受空值或自动递增的列的数据），则插入命令将失败。

但是，如果`insert`失败，它不会抛出异常。它只返回-1。

检查您的`insert`通话结果，或者更好的是，将通话更改为

```
myDataBase.insertOrThrow(MY_EMP, null,values); 
```

然后检查日志中是否存在异常消息（假设有异常消息）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-10T04:48:12.733

您似乎缺少 myDataBase.insert(MY_EMP, null,values); 中所需的参数。它应该是 myDataBase.insert("Table Name", "First column name",cv);

尝试这个

# google-maps-api-3 - where 的 fusiontable 查询

> ID：10083120
> 
> 赞同：0
> 
> 时间：2012-04-10T04:29:39.287
> 
> 标签：google-maps-api-3, google-fusion-tables

有没有办法根据用户输入动态生成 where 条件。我有一个带有选项 '>'、'<'、'equals'、'starts with'、'ends with' 的选择框。基于此条件 where 子句应该生成并且应该执行查询。请帮助我。我需要示例。因为我的表中有大约 80 列我不能使用 if else 循环。

```
function querymap()

{
var querypass=document.getElementById('query-pass').value.replace(/'/g, "\\'");
 if(querypass=='hhSanitHouseType')
   {
     var operator=document.getElementById('operatorstring').value.replace(/'/g, "\\'");
     if(operator=='>')
        { 
          var textvalue=document.getElementById("text-value").value.replace(/'/g, "\\'");
          layer.setQuery("SELECT 'geometry',hhSanitHouseType FROM " + tableid + " WHERE 'hhSanitHouseType' > '" + textvalue + "'");

        }
     }
   else
   {
   alert("false");
   }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-10T15:54:15.313

也许你可以[看看这个例子](https://developers.google.com/fusiontables/docs/samples/dynamic_styling_template)，尤其是函数`generateWhere(columnName, low, high)`。

您不必为您的运算符使用 if/else，只需检查有效输入（即运算符是 '>'、'<'、'equals'、'starts with'、'ends with'之一）然后将其直接传递给您的查询，就像这样

```
 var operator = ...;
 var textvalue = ...;
 layer.setQuery("SELECT 'geometry',hhSanitHouseType FROM " + tableid + " WHERE 'hhSanitHouseType'" + operator + " '" + textvalue + "'"); 
```

# opengl - 将 OpenGL ES 2 移植到 OpenGL

> ID：10083122
> 
> 赞同：1
> 
> 时间：2012-04-10T04:29:49.333
> 
> 标签：opengl, opengl-es-2.0

我有一个要移植到 PC 的 iPhone 游戏。游戏使用 OpenGL ES 2（着色器），我将决定使用哪个版本的 OpenGL。

我应该将所有着色器移植到 OpenGL 2（并支持旧硬件）吗？或者我应该移植到 OpenGL 3（我还不太了解，但着色器似乎更兼容）？哪个更容易移植？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-10T07:51:08.867

由于 OpenGL ES 2 是桌面 OpenGL 2 的子集，如果您不需要游戏在 PC 上使用更高级的技术（如实例化、纹理数组、几何着色器......您的 ES 设备从未听说过的事情）。

请记住，您可以在桌面 GL 2 中使用即时模式和固定功能管道这一事实并不意味着您应该这样做。您可以在 OpenGL 2.0 中编写完全向前兼容的现代 GL（VBO、着色器等）。另一方面，GL 3.x 与以前的版本并没有什么不同，它只是带来了一些额外的功能，如果需要，可以在以后包含这些功能。GL 2 或 3 之间没有真正的决定，只有现代基于 VBO 着色器的 GL 和旧的基于即时模式固定功能的 GL 之间，并且您的游戏已经使用 GL ES 2.0，您已经做出了正确的决定。

实际上，您的着色器与 GL 2 比 3 更兼容，因为 ES 2 使用旧的属性/可变语法。但作为旁注，没有什么可以真正推动你的决定，因为你可能不得不稍微改变你的着色器，无论如何（例如处理/删除精度限定符）。

# ruby-on-rails - jquery mobile、pgaechange 和 pageload 不起作用

> ID：10083123
> 
> 赞同：1
> 
> 时间：2012-04-10T04:29:50.663
> 
> 标签：ruby-on-rails, ruby-on-rails-3, jquery-mobile

我正在尝试使用 ajax 加载 sometag ，但 JQM 没有增强我的附加代码。我试过了`$(this).trigger('create')`，`$(this).trigger('updatelayout')`但它仍然无法正常工作。

然后我尝试通过函数 jquery mobile support 调用 ajax：$.mobile.changePage()

我的代码：

```
$.mobile.changePage({url:'/', data:'add_new_tag=true', type:'GET'}, 'slide', false, true) 
```

在行动索引：我呈现'index.html'我已经在萤火虫中检查过它，看到响应是正确的（预期的）。但我的浏览器没有任何变化。

我错过了什么 ？我希望能得到你的帮助。谢谢 :D

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-10T04:56:08.040

我也无法让 trigger('create') 方法为我工作。也许其他人 *cough (Jasper) 可以帮助我解决这部分答案。不过，我也许可以帮助您处理 changPage 代码。

试试这个 changePage 代替：

```
$.mobile.changePage( '/',{ 
    data: "add_new-tag=true",
    type: "get",
    transition: "slide"
}); 
```

# java - 以下代码的 java 等效代码是什么？

> ID：10083127
> 
> 赞同：1
> 
> 时间：2012-04-10T04:30:14.233
> 
> 标签：java, c, assembly, jna, equivalent

我正在使用 JNA 调用 user32.dll 和 kernel32.dll 的方法。到目前为止，它工作正常。我遇到了一些问题，我知道我必须调用这个方法。

```
void SendCommandToConsole( char* Cmd )
{
    DWORD dwCall = 0x004C1030;
    __asm
    {
        push Cmd;
        push 0;
        call dwCall;
    }
}

SendCommandToConsole ( "rp 2000" ); 
```

但我什至不明白它是什么？这个 __asm 在做什么？

如果我使用的标签不正确，请添加适当的标签。:)

*编辑* 按照建议添加了 .Net 和 C# 标签。上面的代码是 C# 或 .NET，可能有这种语言知识的人可以告诉我们它实际上是什么，以及我们如何在 java 中做到这一点。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-26T07:20:40.803

只是为了展示幕后发生的事情：

你的来电：

SendCommandToConsole（“rp 2000”）；

正在使用 (char* Cmd) 类型的参数调用函数 (SendCommandToConsole)。

在上述情况下，(char* Cmd) 等同于“rp 2000”的字符串 (sic)。

现在幕后发生的事情是高级语言（在您的示例中为 Java）需要告诉低级语言如何用他们理解的语言解释它们的指令。

所以拿上面的例子（“我想调用函数“SendCommandToConsole”，字符串参数为“rp 2000”），意味着我们需要与低级语言进行通信：

*   “uppity-ups 希望我们运行命令”。“哦，对了，哪一个？”
*   “他们告诉我‘SendCommandToConsole’”
*   “哦，那个家伙？他住在下面的地址‘0x004C1030’。”
*   “哦，你知道那哥们的地址吗？你能把这个自大要送的包裹送到吗？”
*   “当然可以，但他只接受特定顺序的包裹，而且只接收特定类型的包裹。”
*   “没问题，我这里有他们的清单……让我们看看它是否符合这家伙的要求。”

“首先，那个地址的家伙只想知道两件事，他们必须有条不紊：

*   你要我做什么，
*   我应该向谁报告结果？”

“好吧，这很容易”

我会断言我想让他做什么：

*   “命令”
*   现在我将断言我希望他向谁报告结果：“没有人 (0)”

好吧，我给他打电话……你可以继续你的一天了。

（因为是“无效”的回报，也就是说你不关心交易的结果）

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-10T04:35:25.090

这意味着后面有一个汇编代码块。

dwCall 是指向带有一个参数的汇编过程的指针 -> 指向堆栈上以零结尾的字节数组的指针。为了正确调用它，您必须将指针压入堆栈，您只能通过汇编程序来执行此操作。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-04-30T15:42:20.003

在 JNA 中，您可以使用`Function.getFunction(Pointer)`来获取可用于控制对特定地址的调用的对象。

```
Function dwCall = Function.getFunction(new Pointer(0x12345678));
String CMD = "SomeCommand";
Integer ARG = new Integer(0);
dwCall.invoke(void.class, new Object[CMD, ARG]); 
```

假设函数使用 C 调用约定，上面的代码可以工作。最终，您可能希望动态查找函数地址而不是对其进行硬编码，并且您可能希望使用 JNA 回调而不是直接调用 Function 对象，但上面的代码提供了您所要求的基本功能for（你应该改写你原来的问题；你不想执行汇编代码，你想在给定的地址调用一个函数）。

使用 JNA 回调映射将允许您更自然地调用函数。

```
// Use StdCallCallback if the function called uses stdcall rather than cdecl
public class MyCallback extends Callback {
    void invoke(String cmd, int arg);
}

Pointer addr = new Pointer(0x1235678);
MyCallback cb = (MyCallback)CallbackReference.getCallback(MyCallback.class, addr);
cb.invoke("SomeCommand", 0); 
```

请注意，这两个示例都假定您已经使用 JNA 加载了相关的 DLL，通常是通过`Native.loadLibrary()`.

另请注意，签名实际上可能是`void dwCall(int arg, String cmd)`; cdecl 和 stdcall 约定从右到左将参数推送到堆栈上，目前我的想法还不够清晰，无法正确映射...

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-04-30T15:11:49.733

没有 Java 等价物，Java 不允许这种低级控制。您需要将 C 代码编译为 DLL 并使用 JNA/JNI 调用它。

*编辑1：以上仅适用于一般的汇编代码。有关使用 JNA 在地址处调用 stdcall 或 cdecl 函数的信息，请参阅 techmage 的回复。*

__asm 块允许您在 C 源文件中使用汇编。汇编代码调用地址为 0x004C1030 的函数（可能是任何函数），通过指针和零作为参数传递字符串。

直接调用地址是个坏主意。除非您非常了解程序和操作系统的底层内部结构，否则您可能不会得到您期望的结果。调用它很可能会使您的程序崩溃。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-04-25T23:24:19.633

你为什么不只是调用`SendCommandToConsole()`函数？该函数所做的是进行 Windows 系统调用，您不应该编写执行此操作的函数，您应该调用执行此操作的函数。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-04-28T20:30:46.160

我想真正的问题是“rp 2000”是做什么的？如果它使用参数 2000 运行 rp.exe，那么您可以使用 java.lang.Runtime 来做同样的事情。如果我们知道它做了什么，那么在 java 中可能会有一些东西可以做到这一点。

# django - 使用 South、Django 和 Git 时处理数据库迁移的正确方法是什么？

> ID：10083130
> 
> 赞同：12
> 
> 时间：2012-04-10T04:30:43.720
> 
> 标签：django, git, django-models, database-migration, django-south

背景 ：-

我正在使用 Django 1.3。我们使用 South 作为数据库迁移和 Git SCM 的模块。

问题：-

处理形成的迁移文件夹的正确方法是什么？

主要问题是我在开发机器中对数​​据库模式进行了更改，当我将其上传到生产服务器时，我必须迁移现有模式。这样做时，迁移文件总是存在一些问题。

我应该将迁移文件夹添加到 gitignore 吗？或者有更好的方法吗？

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2012-04-10T08:39:24.990

您应该将迁移文件夹添加到版本控制系统中，并将相同的文件用于生产和开发。如果您不是从一开始就引入了迁移并且您已经拥有现有的表，那么您可能会在生产系统上遇到一些问题。

因此，您必须*伪造*`syncdb`第一次迁移，这通常与您第一次创建数据库时所做的相同。因此，当您第一次尝试在生产机器上为您的应用应用迁移时，请执行`manage.py migrate app_name 0001 --fake`. 这让 South 知道，第一次迁移已经被应用（这已经发生在 syncdb 中），当您`migrate`再次运行时，它将继续执行以下迁移。

# java - 信号量：具有优先级的关键部分

> ID：10083131
> 
> 赞同：1
> 
> 时间：2012-04-10T04:31:06.883
> 
> 标签：java, synchronization, semaphore, critical-section

我正在用 Java 编写一个程序来处理信号量的任务。我对信号量和并发性的想法仍然很陌生。问题描述如下：

1.  布尔值向量 V[]。如果 Pi 需要使用临界区，则 V[i] 为“真”。
2.  用于阻止进程进入其临界区的二进制信号量 B[] 向量：B[i] 将是信号量阻塞进程 Pi。
3.  每当需要唤醒阻塞的进程以使用临界区时，都会使用特殊的调度程序进程 SCHED。
4.  SCHED 因等待特殊信号量 S 而被阻塞
5.  当进程 Pi 需要进入临界区时，它将 V[i] 设置为“True”，向信号量 S 发出信号，然后等待信号量 B[i]。
6.  每当 SCHED 被解除阻塞时，它会选择具有最小索引 i 且 V[i] 为“True”的进程 Pi。然后进程 Pi 通过信号 B[i] 被唤醒，并且 SCHED 通过阻塞信号量 S 重新进入睡眠状态。
7.  当进程 Pi 离开临界区时，它会向 S 发出信号。

这是我的代码：

```
import java.util.concurrent.Semaphore;

public class Process extends Thread {
    static boolean V[];
    int i;
    static Semaphore B[]; //blocking semaphore
    static Semaphore S;
    private static int id;
    static int N;
    static int insist = 0;

    public static void process (int i, int n) {
       id = i;
       N = n;
       V = new boolean[N];
    }

    private void delay () {
       try {
        sleep (random(500));
        }
        catch (InterruptedException p) {
        }
    }

    private static int random(int n) {
        return (int) Math.round(n * Math.random() - 0.5);
    }

    private void entryprotocol(int i) {
         V[Process.id] = true;
         int turn = N;
         while (V[Process.id] == true && turn == N) {
           System.out.println("P" + Process.id + " is requesting critical section");
           signal(S);
         }
        critical(Process.id);
        wait(B[Process.id]);
        V[Process.id] = false;
        }

   private void wait(Semaphore S) {
       if (Process.id > 0) {
        Process.id--;
      } else {
        //add Process.id to id.queue and block
        wait(B[Process.id]);
       }
   }

     private void signal(Semaphore S) {
         if (B[Process.id] != null) {
          Sched(Process.id);
        } else {
          Process.id++; //remove process from queue
          critical(Process.id); //wakes up current process
         }
     }

    private void critical(int i) {
        System.out.println("P" + Process.id + " is in the critical section");
        delay();
        exitprotocol(i);
     }

    private void exitprotocol(int i) {
        System.out.println("P" + Process.id + " is leaving the critical section");
        V[id] = false;
        signal(S);
    }

     public void Sched(int i) {
         if (B[Process.id] == null) {
        signal(B[Process.id]);
        }
        wait(S);
     }

     public void run() {
         for (int i = 0; i < 5; i++) {
            Sched(i);
           entryprotocol(Process.id);
           try {
              wait(Process.id);
          }
           catch (InterruptedException p) {
            }
          signal(S);
        }
         }

    public static void main (String[] args) {
        int N = 5;

        Process p[] = new Process[N];

        for (int i = 0; i < N; i++) {
        p[i] = new Process();
        p[i].start();
        }
        }
   } 
```

我相信我的逻辑是正确的，但是我遇到了很多错误（例如线程“Thread-1”java.lang.NullPointerException 中的异常）。任何人都可以阐明我做错了什么并为我提供一些帮助。非常感谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-10T05:10:39.100

您`NPE`可能是因为您从未初始化信号量数组 - 但如果没有适当的堆栈跟踪，很难说。

两条忠告：

1）您可能希望给您的类变量起比：B N S V 更有意义的名称。想象一下离开这个项目并在 4 个月内重新访问它，并且必须通读它。

2) 在编写任何代码之前，在白板上找出你的类模型。您的方法采用与某些静态字段同名的信号量。你的程序中对象的关系是什么？如果你不知道，很可能你的程序也不知道。

# c - 我可以使用 C 获取给定 PID 的 UID

> ID：10083140
> 
> 赞同：-1
> 
> 时间：2012-04-10T04:33:03.540
> 
> 标签：c, process, pid, uid

我想使用 C 获取给定进程 ID 的用户 ID

我该怎么做？

任何见解表示赞赏;）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-10T04:39:23.540

如果你有`procfs`文件系统，那么文件的有效用户ID就是`/proc/<pid>`用户的。

# sugarcrm - 自定义字段未出现在 SugarCRM 中

> ID：10083142
> 
> 赞同：2
> 
> 时间：2012-04-10T04:33:55.143
> 
> 标签：sugarcrm, custom-fields

我在**custom/Extension/modules/Calls/Ext/Vardefs中创建了一个自定义字段****Sugarfield_ast_rec_link_c.php** ，其中包含以下内容：`

 **```
<?php
$dictionary['Calls']['fields']['ast_rec_link_c'] = array
('name' => 'ast_rec_link_c',
 'vname' => 'LBL_AST_REC_LINK_C',
 'type' => 'varchar',
 'len' => '255',
 'source' => 'non-db',
 'function' => array('name'=>'getRecordLink',
                     'returns'=>'html',
                     'include'=>'custom/modules/Calls/CustomLogic.php')
);

?> 
```

` 还在**custom/Extension/modules/Calls/Ext/Language**中添加了语言文件。快速修复后，我的自定义字段没有出现在 Studio -> Calls -> Fields 中。所以我不能把它放在视图上。任何人都可以帮忙吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-10T11:08:01.350

你应该改变

```
<?php
$dictionary['Calls']['fields']['ast_rec_link_c'] = array(...); 
```

至

```
<?php
$dictionary['Call']['fields']['ast_rec_link_c'] = array(...); 
```

请记住，在定义新的自定义字段时，您应该始终使用 bean 名称（而不是模块一！）作为 $dictionary 数组键。在我看来，检查您的自定义 vardef 是否一切正常的最佳方法是将您自己的与现有的进行比较`cache/modules/<module_name>/BEAN_NAMEvardefs.php`**

# c++ - C++ 字数转 int

> ID：10083143
> 
> 赞同：1
> 
> 时间：2012-04-10T04:34:01.240
> 
> 标签：c++

我正在开发一个使用单词而不是数字进行基本计算的程序。例如，5 + 2 将输出 7。

程序变得更加复杂，接受诸如 two_hundred_one + Five_thousand_six (201 + 5006) 之类的输入

通过运算符重载方法，我拆分每个数字并将其分配给它自己的数组索引。

两个是 [0]，一百是 [1]，一个是 [2]。然后阵列回收 5006。

我的问题是，要执行实际计算，我需要将存储在数组中的单词转换为实际整数。

我有这样的 const 字符串数组作为单词库：

```
const string units[] = { "", "one", "two", "three", "four", "five", "six", "seven", "eight", "nine" };

const string teens[] = { "ten", "eleven", "twelve", "thirteen", "fourteen", "fifteen", "sixteen", "seventeen", "eighteen", "nineteen" };

const string tens[] = { "", "", "twenty", "thirty", "forty", "fifty", "sixty", "seventy", "eighty", "ninety" }; 
```

如果我的“令牌”数组在索引 0、1 和 2 中存储了 201 个，我不确定将这些转换为整数的最佳方法是什么。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-10T06:27:47.367

对我来说，部分技巧是向后而不是向前解析标记。并在您通过令牌返回时保持比例因子。对于每个标记，您可以添加到当前值（按比例因子的当前值缩放）或调整比例因子，具体取决于您遇到的标记。

这是我的实现（不包括一些位，您需要添加一些逻辑来处理数百万）。

```
#include <vector>
#include <string>

#include <assert.h>

int tokens_to_int( const std::vector<std::string> &s )
{
  int scale = 1;
  int rv=0;
  for(
      std::vector<std::string>::const_reverse_iterator it = s.rbegin();
      it!=s.rend();
      ++it
     )
  {
    std::string cw = *it;
    //Things that add to the current value
    if( cw == "one" )   { rv += 1 * scale; }
    if( cw == "two" )   { rv += 2 * scale; }
    if( cw == "three" ) { rv += 3 * scale; }
    if( cw == "four" )  { rv += 4 * scale; }
    // ...
    if( cw == "nine" )   { rv += 9 * scale; }
    if( cw == "ten" )    { rv += 10 * scale; }

    // Teens
    if( cw == "eleven" )  { rv += 11 * scale; }
    if( cw == "twelve" )  { rv += 12 * scale; }
    // ...
    if( cw == "nineteen" )  { rv += 19 * scale; }

    // Multiples of 10
    if( cw == "twenty" )    { rv += 20 * scale; }
    if( cw == "thirty" )    { rv += 30 * scale; }
    if( cw == "fourty" )    { rv += 40 * scale; }
    // ...
    if( cw == "ninety" )    { rv += 90 * scale; }

    //Things that effect scale for following entries
    if( cw == "hundred" ) { scale *= 100; }
    if( cw == "thousand" ) { if( scale==100) { scale=1000; } else { scale*=1000; } }
  }

  return rv;
}

template<typename T>
struct as_vec
{
  as_vec<T>& operator()(const T & t )
  {
    v.push_back(t);
    return *this;
  }

  std::vector<T> build() { return v; }

  std::vector<T> v;
};

int main()
{
  assert(421 == tokens_to_int( as_vec<std::string>()("four")("hundred")("twenty")("one").build() ) );
  assert(422 == tokens_to_int( as_vec<std::string>()("four")("hundred")("twenty")("two").build() ) );
  assert(11000 == tokens_to_int( as_vec<std::string>()("eleven")("thousand").build() ) );
  assert(21201 == tokens_to_int( as_vec<std::string>()("twenty")("one")("thousand")("two")("hundred")("one").build() ) );
  assert(100001 == tokens_to_int( as_vec<std::string>()("one")("hundred")("thousand")("one").build() ) );
  assert(101000 == tokens_to_int( as_vec<std::string>()("one")("hundred")("one")("thousand").build() ) );
  assert(411201 == tokens_to_int( as_vec<std::string>()("four")("hundred")("eleven")("thousand")("two")("hundred")("one").build() ) );
  assert(999999 == tokens_to_int( as_vec<std::string>()("nine")("hundred")("ninety")("nine")("thousand")("nine")("hundred")("ninety")("nine").build() ) );
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-10T05:24:26.583

我同意 Jesse 关于使用映射将值映射到您的数组的观点，从那时起，您将能够执行以下操作：

```
mymap["two"] * mymap["hundred"] + mymap["one"] 
```

当然，您必须小心“52,57”之类的情况，在这种情况下，您必须检查除青少年以外的特殊情况：

```
const string temp[] = {"five","hundred","two","thousand","fifty","seven"};

int handleThree(int start)  {
    if( mymap[temp[start+ 3]] > 100) //check for special case, in which case you handle 4 words instead of three
       return (myap[temp[start]] * mymap[temp[start+1]] + mymap[temp[start+2]]) * mymap[temp[start+3]];
    else
       return mymap[temp[start]] * mymap[temp[start+1]] + handleTwo(start+2)
}

int handleTwo(int start) {
    if(mymap[temp[start]] / 10 == 1) //check if it's a teen, return teen value
       return mymap[temp[start]]
    if(mymap[temp[start+1]] > 90) //check for another special case, "five thousand one hundred and fifty seven", for example should use this case
       return mymap[temp[start]] * mymap[temp[start+1]]
    else
       return mymap[temp[start]] + mymap[temp[start+1]];
} 
```

当然，还有一些你需要注意的情况（例如“562013”​​），但它会窃取你的乐趣和学习经验来帮助你处理这些情况，但我相信这一点应该足以让你开始。

另外，我在 C++ 方面不是最好的，所以如果你发现我的代码有任何问题，我深表歉意，但从我的测试来看，这适用于我编写的主循环（如有必要，我会提供它，但我认为它你自己写那对你有好处）

# wolfram-mathematica - WishartDistribution 的 Inverse[_] 和 (_)^(-1) 之间的数学差异

> ID：10083144
> 
> 赞同：1
> 
> 时间：2012-04-10T04:34:45.930
> 
> 标签：wolfram-mathematica, mathematica-8

有谁知道为什么以下矩阵的随机分布会生成不同的图？（这是从一组使用逆 Wishart 分布采样的 10x10 矩阵中为第一个单元格生成 PDF 图的代码；令人惊讶的是，根据执行矩阵求逆的方式，这些图是不同的 - 似乎正确的图是由 Inverse[_] 得到，为什么？）

基本代码：

```
 << MultivariateStatistics`;
   Module[{dist, p, k, data, samples, scale, graphics, distribution},
     p = 10;
     k = 13;
     samples = 500;
     dist = WishartDistribution[IdentityMatrix[p], k];
     (* a samples x p x p array *)
     data = Inverse[#] & /@ RandomVariate[dist, samples];
     (* distribution graphics *)
     distribution[i_, j_] := Module[{fiber, f, mean, rangeAll, colorHue},
       fiber = data[[All, i, j]];
       dist = SmoothKernelDistribution[fiber];
       f = PDF[dist];
       Plot[f[z], {z, -2, 2}, 
        PlotLabel -> ("Mean=" <> ToString[Mean[fiber]]), 
        PlotRange -> All]
       ];
     Grid @ Table[distribution[i, j], {i, 1, 3}, {j, 1, 5}]
     ] 
```

代码变体：上面，换行

```
data = Inverse[#] & /@ RandomVariate[dist, samples]; 
```

这样

```
data = #^(-1) & /@ RandomVariate[dist, samples]; 
```

你会看到绘制的分布是不同的。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-10T07:42:43.817

`Inverse`计算矩阵逆，即如果`a`是方阵，`Inverse[a].a`则将是单位矩阵。

`a^(-1)`与 相同`1/a`，即它为您提供每个矩阵元素的倒数。`^`运算符按元素赋予权力。如果您想要矩阵电源，请使用`MatrixPower`.

# r - R语言：read.table中的错误（file.path（data.dir，file_name1））：输入中没有可用的行

> ID：10083150
> 
> 赞同：4
> 
> 时间：2012-04-10T04:35:36.013
> 
> 标签：r, import

我很难用 R 语言编码。我要做的是将大量数据读入一个数据帧，并制作漂亮的图片。

这就是我所拥有的：

```
# assign data
file_name1<-"data1_txt"
file_name2<-"data2_txt"

data.dir<-"/...../Documents/R programing Language/"

for(i in 1:length(1)){
    newData1<-read.table(file.path(data.dir, file_name1))

    #Replace negative numbers with NA
    xx <- which(datavalues<0)
    datavalues[xx] <- NA    

    newData2<-read.table(file.path(data.dir,file_name2))

} 
```

我的错误是：

> read.table(file.path(data.dir, file_name1)) 中的错误：输入中没有可用的行

我试图自己弄清楚，但我对 R 语言很陌生，而且我对 R 中的函数没有足够的了解。请解释这个错误的含义以及对我的编码的建议。

非常感谢，乌卡

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-08-23T19:43:20.513

类似的情况在[这里](https://stackoverflow.com/questions/13613270/how-to-fix-the-error-in-r-of-no-lines-available-in-input/13613372#13613372)用类似的问题解决了（我知道这篇文章很老了）。最近我在解析几个文件时遇到这样的错误......原因是一些文件是空的，这使得错误消息有意义。

无论如何，只要按照提到的[链接](https://stackoverflow.com/questions/13613270/how-to-fix-the-error-in-r-of-no-lines-available-in-input/13613372#13613372)`try`上的建议使用ou确保您的输入不会为空。`trycatch`

# javascript - Switch 语句不适用于 Click 事件

> ID：10083151
> 
> 赞同：1
> 
> 时间：2012-04-10T04:35:39.070
> 
> 标签：javascript, jquery, click, switch-statement

我真的试图通过使用 switch 语句来保持我的代码干净，但它似乎无法正常工作。我已经制作了一组具有该类的对象，`.ClientButtonPic`如果我写

```
var clientButtonNumber = $(".ClientButtonPic");     
$(clientButtonNumber[0]).click(function(){ $(".ClientImages:eq(0)").fadeIn(300); 
$(".ClientImages:eq(1)").fadeOut(300); }); 
```

它工作正常，但由于我有 6 个可以单击的实例，所以我想使用 switch 语句。这是我的代码：

```
var clientButtonNumber = $(".ClientButtonPic");
$(clientButtonNumber).click(function(){
    switch(this)
     {
case 0:
$(".ClientImages:eq(0)").fadeIn(300);
$(".ClientImages:eq(1)").fadeOut(300);
  break;
case 1:
$(".ClientImages:eq(1)").fadeIn(300);
$(".ClientImages:eq(0)").fadeOut(300);
  break;
default:
  break;
         }
     }); 
```

任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-10T04:37:28.120

您需要使用 的索引`this`。

```
switch( $(this).index(".ClientButtonPic") ) 
```

# ios - Clojure iOS 开发

> ID：10083154
> 
> 赞同：29
> 
> 时间：2012-04-10T04:36:08.240
> 
> 标签：ios, clojure, cross-compiling

在过去的几个月里，我几乎爱上了 Clojure 并且拒绝使用其他任何东西。

我知道有 ClojureScript，它使用 Google Closure 将 Clojure 的一个子集编译为 JavaScript。

Objective-C/Cocoa 的作品中是否有类似的东西？

我希望能够在 Clojure 中制作应用程序原型，然后从中获得一个 iOS 应用程序。

[如果这阻止了我了解 iOS 的所有低级细节，我就很好了——我不需要访问我在 Java 中无法做到的任何低级细节（比如指针算术）——我只想能够轻松地将我的 Clojure 应用程序转换到 iOS 上]

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-04-10T05:58:28.480

您可以通过将 clojure 编译为方案来在 iOS 上运行 clojure，[https://github.com/takeoutweight/clojure-scheme](https://github.com/takeoutweight/clojure-scheme)

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2013-11-17T23:36:38.020

还有一个选项（警告：尚未尝试过）：
[https](https://github.com/oakes/lein-fruit)
://github.com/oakes/lein-fruit 这个 Leiningen 插件将 Java 字节码转换为 iOS 的本机代码。甚至还有内置的 IDE：
[https ://github.com/oakes/Nightcode](https://github.com/oakes/Nightcode)

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-10-17T02:44:35.150

我刚刚发现了[las3r](https://github.com/aemoncannon/las3r/wiki)，它是 ActionScript（Flash 背后的语言）运行时的 Clojure 端口。由于 Flash/ActionScript 现在可以为 iOS 开发（我现在正在编写一个游戏。它不是很好，但它非常有用），这可能会为为 iOS 编写 Clojure 应用程序提供一条途径。

免责声明：我没有尝试过这个。我刚刚发现 las3r，甚至还没有下载它。并且不知道它是好是坏。不知道速度会有多可怕。我什么*都不*知道。

仍然 - 这是一个有趣的想法，不是吗？

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2019-04-13T11:17:10.853

[Re-Natal](https://github.com/drapanjanas/re-natal)是一个简单的命令行实用程序，它可以自动执行设置在 ClojureScript 上运行的 React Native 应用程序的大部分过程。

# android - 如何实现过度滚动

> ID：10083155
> 
> 赞同：-1
> 
> 时间：2012-04-10T04:36:08.697
> 
> 标签：android

我想在下拉时刷新我的视图，比如 facebook 应用程序（滚动）。我有一个包含 webviews 列表的相对布局。我怎样才能拖动这个视图？请帮助我...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-10T04:40:03.937

你可以看看这个实现过度滚动刷新的[库](https://github.com/johannilsson/android-pulltorefresh)`ListView`。如果 a`ListView`不适合您，您可以查看它的源代码以了解它是如何实现的并根据您的需要进行调整。

# php - 如何合并两个 php Doctrine 2 ArrayCollection()

> ID：10083158
> 
> 赞同：88
> 
> 时间：2012-04-10T04:37:31.507
> 
> 标签：php, symfony, doctrine-orm, arraycollection

有什么方便的方法可以让我连接两个 Doctrine`ArrayCollection()`吗？就像是：

```
$collection1 = new ArrayCollection();
$collection2 = new ArrayCollection();

$collection1->add($obj1);
$collection1->add($obj2);
$collection1->add($obj3);

$collection2->add($obj4);
$collection2->add($obj5);
$collection2->add($obj6);

$collection1->concat($collection2);

// $collection1 now contains {$obj1, $obj2, $obj3, $obj4, $obj5, $obj6 } 
```

我只是想知道是否可以节省我对第二个集合的迭代并将每个元素一一添加到第一个集合中。

谢谢！

* * *

## 回答 #1

> 赞同：182
> 
> 时间：2013-06-01T10:09:41.847

对我来说更好（和工作）的变体：

```
$collection3 = new ArrayCollection(
    array_merge($collection1->toArray(), $collection2->toArray())
); 
```

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2012-04-10T14:16:23.823

你可以简单地做：

```
$a = new ArrayCollection();
$b = new ArrayCollection();
...
$c = new ArrayCollection(array_merge((array) $a, (array) $b)); 
```

* * *

## 回答 #3

> 赞同：11
> 
> 时间：2015-09-06T21:12:13.963

如果您需要防止任何重复，此代码段可能会有所帮助。它使用可变参数函数参数与 PHP5.6 一起使用。

```
/**
 * @param array... $arrayCollections
 * @return ArrayCollection
 */
public function merge(...$arrayCollections)
{
    $returnCollection = new ArrayCollection();

    /**
     * @var ArrayCollection $arrayCollection
     */
    foreach ($arrayCollections as $arrayCollection) {
        if ($returnCollection->count() === 0) {
            $returnCollection = $arrayCollection;
        } else {
            $arrayCollection->map(function ($element) use (&$returnCollection) {
                if (!$returnCollection->contains($element)) {
                    $returnCollection->add($element);
                }
            });
        }
    }

    return $returnCollection;
} 
```

在某些情况下可能很方便。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2014-12-10T10:53:28.290

```
$newCollection = new ArrayCollection((array)$collection1->toArray() + $collection2->toArray()); 
```

这应该比`array_merge`. `$collection1`当 中存在相同的键名时，将保留重复的键名`$collection2`。不管实际值是多少

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-04-10T05:25:25.470

您仍然需要遍历 Collections 以将一个数组的内容添加到另一个数组。由于 ArrayCollection 是一个包装类，您可以尝试在维护键的同时合并元素数组，$collection2 中的数组键使用下面的辅助函数覆盖 $collection1 中的任何现有键：

```
$combined = new ArrayCollection(array_merge_maintain_keys($collection1->toArray(), $collection2->toArray())); 

/**
 *  Merge the arrays passed to the function and keep the keys intact.
 *  If two keys overlap then it is the last added key that takes precedence.
 * 
 * @return Array the merged array
 */
function array_merge_maintain_keys() {
    $args = func_get_args();
    $result = array();
    foreach ( $args as &$array ) {
        foreach ( $array as $key => &$value ) {
            $result[$key] = $value;
        }
    }
    return $result;
} 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2014-08-28T23:51:50.263

[根据Yury Pliashkou](https://stackoverflow.com/a/16871539/1489912)的评论将 Collection 添加到数组中（我知道它没有直接回答原始问题，但已经回答了，这可以帮助其他人登陆这里）：

```
function addCollectionToArray( $array , $collection ) {
    $temp = $collection->toArray();
    if ( count( $array ) > 0 ) {
        if ( count( $temp ) > 0 ) {
            $result = array_merge( $array , $temp );
        } else {
            $result = $array;
        }
    } else {
        if ( count( $temp ) > 0 ) {
            $result = $temp;
        } else {
            $result = array();
        }
    }
    return $result;
} 
```

也许你喜欢它......也许不......我只是想把它扔在那里以防万一有人需要它。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2019-11-08T08:11:36.560

注意力！避免递归元素的大量嵌套。**array_unique** **-**具有递归嵌入限制并导致`PHP error Fatal error: Nesting level too deep - recursive dependency?`

```
/**
 * @param ArrayCollection[] $arrayCollections
 *
 * @return ArrayCollection
 */
function merge(...$arrayCollections) {
    $listCollections = [];
    foreach ($arrayCollections as $arrayCollection) {
        $listCollections = array_merge($listCollections, $arrayCollection->toArray());
    }

    return new ArrayCollection(array_unique($listCollections, SORT_REGULAR));
}

// using
$a = new ArrayCollection([1,2,3,4,5,6]);
$b = new ArrayCollection([7,8]);
$c = new ArrayCollection([9,10]);

$result = merge($a, $b, $c); 
```

* * *

## 回答 #8

> 赞同：-1
> 
> 时间：2015-10-20T15:14:27.663

使用 Closures PHP5 > 5.3.0

```
$a = ArrayCollection(array(1,2,3));
$b = ArrayCollection(array(4,5,6));

$b->forAll(function($key,$value) use ($a){ $a[]=$value;return true;});

echo $a.toArray();

array (size=6) 0 => int 1 1 => int 2 2 => int 3 3 => int 4 4 => int 5 5 => int 6 
```

# asp.net - 如何在 asp.net 应用程序中发布附件之前进行病毒扫描

> ID：10083162
> 
> 赞同：0
> 
> 时间：2012-04-10T04:38:44.807
> 
> 标签：asp.net, virus-scanning

如何在**asp.net应用程序**中发布附件之前进行病毒扫描，当他们发现病毒时放弃发布附件，否则继续上传。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-10T04:45:18.130

你没有。

你在服务器上扫描它，如果它没有通过就删除它。没有办法知道客户端是否安装了任何 AV 软件，而且你得到的任何结果都可能是伪造的。在服务器端进行检查，而不是在您可以控制的地方进行检查。

# objective-c - 添加子视图到 NSView 显示，但不能删除

> ID：10083170
> 
> 赞同：0
> 
> 时间：2012-04-10T04:40:03.003
> 
> 标签：objective-c, cocoa, nsview, addsubview, nsviewcontroller

在我的应用程序窗口中，我有两个 NSView。左侧的 NSView（“菜单”）包含几个按钮。单击其中一个按钮时，它应该更改右侧 NSView 的内容（“内容”）。

对于右侧的每个视图，我都有一个单独的 NSViewControllers 被加载，它们的视图被添加为子视图。当在左侧按下另一个按钮时，应删除右侧添加的子视图，并且应将新视图作为子视图加载。

为此，我在 AppDelegate 中加载了我的菜单，其中包含以下内容：

```
 MenuVC *menuSubView = [[MenuVC alloc] initWithNibName:@"MenuVC" bundle: nil];
    menuSubView.contentView = (NSView*)[self contentView];
    [[self menuView] addSubview:[menuSubView view]]; 
```

这工作正常。如您所见，我在 Menu VC 中有一个 NSView 指针，它指向 contentView，以便我可以用子视图填充它。

现在，作为其中一个按钮按下的方法，我执行以下操作：

```
SomeContentVC *subView = [[SomeContentVC alloc] initWithNibName:@"SomeContentVC" bundle:nil];
    [self.contentView addSubview:[subView view]]; 
```

这不起作用。

但是，如果我从 MenuViewController 实现的 awakeFromNib 方法添加一个子视图（在应用程序打开时的默认内容的情况下）它可以工作。但是，当我尝试使用删除该子视图时

```
[[self.contentView setSubviews:[NSArray array]]; 
```

我不能。有趣的是，如果我尝试计算子视图的数量（即使在 awakeFromNib 方法中添加了一个），它也会为 self.contentView 返回 0 个子视图。为什么？我怎样才能让它正常工作？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-10T05:46:15.543

消息传递 self.contentView 的事实除了对于某些事情，返回 0 可能意味着 self.contentView 为零。

您是否偶然有两个 MenuVC 实例？也许一个在 NIB 中实例化，一个在代码中实例化？

如有疑问，请记录所有内容。登录`self`各种方法。创建后立即记录`menuSubView`。`menuSubView.contentView`分配后立即记录。等等。最终，您可能会发现您正在与与您想象的不同的对象进行交互。

# android - 启动完成时未收到警报

> ID：10083173
> 
> 赞同：0
> 
> 时间：2012-04-10T04:40:13.650
> 
> 标签：android, alarmmanager

在我的代码中，我在 Android 清单文件上添加了 Boot Completed 的所有权限。我登录了我的广播接收器，重新启动后控件将进入广播接收器但警报没有触发。实际上我想要的是一个活动在之后启动触发警报..在正常情况下（关闭前）我收到警报并启动了活动..重新启动后它没有发生......

这是我的广播接收器

```
public class AlarmReceiver extends BroadcastReceiver {

@Override
public void onReceive(Context context, Intent intent) {
    Log.d("hai", "inside onreceive");
    try {
        if (intent.getAction().equals("android.intent.action.BOOT_COMPLETED")) {

                    Calendar cal = new GregorianCalendar();
                    cal.setTimeInMillis(System.currentTimeMillis());

                    cal.set(Calendar.HOUR_OF_DAY,9);
                    cal.set(Calendar.MINUTE,49);
                    cal.set(Calendar.SECOND, 0);
                    cal.set(Calendar.MILLISECOND, 0);

                    Intent intent1 = new Intent(context,
                            AlarmLauncher.class);
                    intent1.addFlags(Intent.FLAG_ACTIVITY_NEW_TASK);
                    intent1.putExtra("alarm_message", "feathersoft Rules!");
                    // In reality, you would want to have a static variable
                    // for the request code instead of 192837
                    PendingIntent sender = PendingIntent.getBroadcast(context, 0, intent1,PendingIntent.FLAG_CANCEL_CURRENT);
                    Log.d("hai",
                            "alarm set");

                    // Get the AlarmManager service
                    AlarmManager am = (AlarmManager) context
                            .getSystemService(context.ALARM_SERVICE);
                    // am.set(AlarmManager.RTC_WAKEUP,
                    // cal.getTimeInMillis(), sender);
                    am.set(AlarmManager.RTC_WAKEUP, cal.getTimeInMillis(),
                            sender);
                    Log.d("hai",
                            "Alarm Alert:Inside the boot completed broadcast receiver......");

                Log.d("hai",
                        "Alarm Alert:Inside the boot completed broadcast receiver......");
            }
        } 

    }catch (Exception e) {
            Toast.makeText(
                    context,
                    "There was an error somewhere, but we still received an alarm",
                    Toast.LENGTH_SHORT).show();
            e.printStackTrace();

        }
    try {

    if(intent.getAction().equals(null))
        {

                SharedPreferences sp = context
                        .getSharedPreferences(
                                BigBirdConstants.nameOfPreference,
                                context.MODE_PRIVATE);
                String alrm = sp.getString(
                        BigBirdConstants.pref_myflight_alarm_time, "hello");
                Log.d("hai", alrm);
                Intent newIntent = new Intent(context, AlarmLauncher.class);
                newIntent.addFlags(Intent.FLAG_ACTIVITY_NEW_TASK);
                System.out.println("boot completed");
                // newIntent.addFlags(Intent.FLAG_ACTIVITY_NEW_TASK);
                context.startActivity(newIntent);
            } 
        }catch (Exception e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        }

} 
```

这是我重启后的警报 dumpsys

```
$ dumpsys alarm
 dumpsys alarm
  Current Alarm Manager state:

  Realtime wakeup (now=1334031884759):
 RTC_WAKEUP #2: Alarm{460a6c88 type 0 com.android.providers.calendar}
  type=0 when=1334110692157 repeatInterval=0 count=0
  operation=PendingIntent{45dea300: PendingIntentRecord{460a6c10 com.android.p
roviders.calendar broadcastIntent}}
RTC_WAKEUP #1: Alarm{460eb1d0 type 0 com.google.android.gsf}
  type=0 when=1334073656706 repeatInterval=566387000 count=0
operation=PendingIntent{45d0d9c8: PendingIntentRecord{4606f3c0 com.google.an
droid.gsf broadcastIntent}}
  RTC_WAKEUP #0: Alarm{4610cd88 type 0 com.google.android.gsf}
    type=0 when=1334032080140 repeatInterval=1800000 count=0
    operation=PendingIntent{46057dc0: PendingIntentRecord{4610cd10 com.google.an
droid.gsf broadcastIntent}}
  RTC #1: Alarm{45ed7b10 type 1 android}
    type=1 when=1334082600000 repeatInterval=0 count=0
    operation=PendingIntent{45dd2c10: PendingIntentRecord{45e81c08 android broad
castIntent}}
  RTC #0: Alarm{461bf460 type 1 android}
    type=1 when=1334031900000 repeatInterval=0 count=0
    operation=PendingIntent{45cceb98: PendingIntentRecord{45f2b3e0 android broad
castIntent}}

  Elapsed realtime wakeup (now=527752):
  ELAPSED_WAKEUP #2: Alarm{46169c28 type 2 android}
    type=2 when=25881048 repeatInterval=0 count=0
    operation=PendingIntent{45d0c358: PendingIntentRecord{45cc99b0 android broad
castIntent}}
  ELAPSED_WAKEUP #1: Alarm{4610dc40 type 2 com.google.android.gsf}
    type=2 when=995077 repeatInterval=0 count=0
    operation=PendingIntent{460dd5c8: PendingIntentRecord{4610dbc8 com.google.an
droid.gsf broadcastIntent}}
  ELAPSED_WAKEUP #0: Alarm{46011b68 type 2 com.google.android.apps.maps}
    type=2 when=970384 repeatInterval=900000 count=0
    operation=PendingIntent{45f9f478: PendingIntentRecord{45fea1d0 com.google.an
droid.apps.maps startService}}
  ELAPSED #1: Alarm{460da648 type 3 android}
    type=3 when=2557073343 repeatInterval=0 count=0
    operation=PendingIntent{45f84d38: PendingIntentRecord{45e34428 android broad
castIntent}}
  ELAPSED #0: Alarm{4609a418 type 3 android}
    type=3 when=727667 repeatInterval=0 count=0
    operation=PendingIntent{45f7da98: PendingIntentRecord{45e39420 android broad
castIntent}}

  Broadcast ref count: 0

  Alarm Stats:
  com.bigbird.Activity
    20ms running, 1 wakeups
    1 alarms: flg=0x10000004 cmp=com.bigbird.Activity/.AlarmLauncher
  com.google.android.gsf
    47ms running, 1 wakeups
    1 alarms: act=com.google.android.intent.action.GTALK_RECONNECT flg=0x4
  android
    22819ms running, 3 wakeups
    1 alarms: act=com.android.internal.policy.impl.PhoneWindowManager.DELAYED_KE
YGUARD flg=0x4
    8 alarms: act=android.intent.action.TIME_TICK flg=0x40000004
    2 alarms: act=android.content.syncmanager.SYNC_ALARM flg=0x4
$ 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-10T06:12:45.290

我有问题

在未决意图中，我使用了要启动的活动..那是错误..在未决意图中，您应该使用广播接收器作为意图...

```
if (sp.getBoolean(BigBirdConstants.pref_alarm_set, false)) {
                String alrm = sp.getString(
                        BigBirdConstants.pref_myflight_alarm_time, "hello");
                String alrmtime[] = new String[2];

                    alrmtime = alrm.split(":");

                    Calendar cal = new GregorianCalendar();
                    cal.setTimeInMillis(System.currentTimeMillis());
                    /*
                     * Integer.parseInt(alrmtime[
                     * 0])
                     */
                    /* Integer.parseInt(alrmtime[1]) */
                    cal.set(Calendar.HOUR_OF_DAY,11);
                    cal.set(Calendar.MINUTE,13);
                    cal.set(Calendar.SECOND, 0);
                    cal.set(Calendar.MILLISECOND, 0);

                    Intent intent1 = new Intent(context,
                            AlarmReceiver.class);
                    intent1.addFlags(Intent.FLAG_ACTIVITY_NEW_TASK);
                    intent1.putExtra("alarm_message", "feathersoft Rules!");
                    // In reality, you would want to have a static variable
                    // for the request code instead of 192837
                    PendingIntent sender = PendingIntent.getBroadcast(context, 192837, intent1,PendingIntent.FLAG_UPDATE_CURRENT);
                    Log.d("hai",
                            "alarm set"); 
```

# c# - 如何将列表中的列表绑定到 ASP.NET 中的 GridView

> ID：10083177
> 
> 赞同：0
> 
> 时间：2012-04-10T04:40:54.383
> 
> 标签：c#, asp.net

我有一个名为 Student 的班级

```
public class Student
{
    public string Name { get; set; }
    public List<int> Marks { get; set; }
    public Student()
    {
    }
} 
```

我需要将学生列表绑定到 GridView

```
 List<Student> StudentList = new List<Student>();

        Student stud = new Student();
        stud.Name = "Scott";
        List<int> marks = new List<int>();
        marks.Add(10); 
        marks.Add(20); 
        marks.Add(30);
        stud.Marks = marks;

        StudentList.Add(stud);

        Student stud1 = new Student();
        stud1.Name = "Jon";
        List<int> marks1 = new List<int>();
        marks1.Add(10);
        marks1.Add(20);
        marks1.Add(30);
        stud1.Marks = marks1;

        StudentList.Add(stud1);

        GridView1.DataSource = StudentList;
        GridView1.DataBind(); 
```

网格视图仅显示名称字段。我如何也可以使用名称字段显示标记列表。（在此所有学生的分数相同，有时是 3，有时是 5。等等。）

我需要像这样显示gridview

```
Name    Mark1  Mark2 Mark3 
Scott   10     20    30
Jon     10     20    30 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-10T04:48:39.827

添加一个自定义容器作为`TemplateField`字段（如果标记数量不同。例如：另一个`GridView`，`Repeater`或`ListView`）或一些`Label`或`TextBox`作为模板字段（如果标记数量是固定的）。覆盖 GridView1_RowDataBound 并设置容器`DataSource`或标签的值以显示标记。

在 aspx 中：-

```
<asp:GridView ID="GridView1" runat="server" 
        onselectedindexchanged="GridView1_SelectedIndexChanged" 
        onrowdatabound="GridView1_RowDataBound">
        <Columns>
         <asp:BoundField DataField="Name" HeaderText="Name" />
          <asp:TemplateField HeaderText="Marks">
                   <ItemTemplate>
                       <asp:DataList runat="server" ID="DataList1"    RepeatDirection="Horizontal" >
                       <ItemTemplate>
                       <%# Container.DataItem.ToString() %>

                       </ItemTemplate>
                       </asp:DataList>
                   </ItemTemplate>
               </asp:TemplateField>
        </Columns>
    </asp:GridView> 
```

在cs中：-

```
protected void GridView1_RowDataBound(object sender, GridViewRowEventArgs e)
    {
        if (e.Row.RowIndex != -1)
        {
            var student = e.Row.DataItem as Student;
            var dataList = e.Row.FindControl("DataList1") as DataList;
            dataList.DataSource = student.Marks;

            dataList.DataBind();
        }
    } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-10T05:04:37.583

例子：

```
<asp:GridView ID="grid1" runat="server" AutoGenerateColumns="false" Width="100%">
    <Columns>
        <asp:BoundField DataField="Name" HeaderText="Name" />
        <asp:TemplateField>
            <ItemTemplate>
                <asp:GridView ID="grid2" runat="server" AutoGenerateColumns="False" Width="100%">
                <Columns>
                    <asp:BoundField DataField="Mark" HeaderText="Mark" />
                </Columns>
            </asp:GridView>
            </ItemTemplate>
        </asp:TemplateField>
    </Columns>
</asp:GridView> 
```

代码：

```
protected override void OnInit(EventArgs e)
{
  grid1.RowDataBound += grid1_RowDataBound;
}

void grid1_RowDataBound(object sender, GridViewRowEventArgs e)
{
  var grid2 = (GridView)e.Item.FindControl("grid2");
  grid2.DataSource = StudentList.Where(w => w.Name = (e.Item.DataItem as Student).Name);
  grid2.Bind();
} 
```

我不测试它

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-10T05:19:30.033

试试下面的代码：

```
protected void gridStudentDetails_RowDataBound(object sender, GridViewRowEventArgs e)
{
 Student studentObj = (Student)StudentList[e.Row.RowIndex];
 if (studentObj != null)
  {
   DropDownList ddlMarks = (DropDownList)e.Row.FindControl("ddlMarks");
   if(ddlMarks != null)
   {
    ddlMarks.DataSource = studentObj.Marks;
    ddlMarks.DataBind();
   }
  }
 } 
```

# c# - 无效的授权规范和无效的连接字符串属性

> ID：10083182
> 
> 赞同：1
> 
> 时间：2012-04-10T04:41:07.290
> 
> 标签：c#, winforms

我收到以下错误“无效的授权规范，无效的连接字符串属性”

```
 //namespaces
  using System;
  using System.Collections.Generic;
   using System.ComponentModel;
  using System.Data;
 using System.Drawing;
  using System.Linq;
  using System.Text;
 using System.Windows.Forms;
 using System.Data.SqlClient;
 using System.Configuration;
 using System.IO;
 using System.Data.OleDb;

  namespace Database1
 {
   public partial class Form1 : Form
  {
    public Form1()
    {
        InitializeComponent();
    }
    public bool IsValidConnectionForPrinting()
    {
      //string declaration  
        string str = @" Provider = SQLOLEDB; Data Source = sekhar; Database = DMS; UserId = sa; Password = 123";

         //Oledbconnection to database           
        OleDbConnection oleDbcon = new OleDbConnection(str);

         try
        {
            oleDbcon.Open();
            MessageBox.Show("hai");
            oleDbcon.Close();
        }
       //Exception 
     catch (Exception ex) 

        {
            if (ex.Message.StartsWith("Invalid object name"))
            {
                MessageBox.Show(ex.Message.Replace("Invalid object name", "Table or view not found"), "Connection Test");
            }
//Connection 
  private void btnConnTest_Click(object sender, EventArgs e)
    {
        if (IsValidConnectionForPrinting())
        {
            MessageBox.Show("Connection succeeded", "Connection Test");
        }
       }
        }
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2019-05-06T12:52:21.623

我遇到了这个错误，结果发现代码路径没有连接到数据库。

值得检查。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-11-12T12:22:57.847

我建议使用不包含`Database`or的连接字符串，`Initial Catalog`然后调用类似：

```
oleDbcon.ChangeDatabase("DMS"); 
```

这是因为，正如您已经体验过的那样，不同的数据库驱动程序使用不同的语法来引用连接字符串中的数据库。

# iphone - copyWithZone 问题

> ID：10083184
> 
> 赞同：2
> 
> 时间：2012-04-10T04:41:13.903
> 
> 标签：iphone, objective-c, ipad, nscopying

我正在尝试通过执行以下操作来复制我的 UIViewController 子类：

```
BookViewController *bookVC = [catalogFlatViewController copy]; 
```

我有以下错误：

```
'-[BookViewController copyWithZone:]: unrecognized selector sent to instance 0x8e5f00' 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-10T04:48:27.617

`UIViewController`不符合`NSCopying`。如果要制作副本，则必须使用`NSCoding`：

```
NSData *archive = [NSKeyedArchiver archivedDataWithRootObject:controller];
UIViewController *newController = [NSKeyedUnarchiver unarchiveObjectWithData:archive]; 
```

如果您向视图控制器添加了新的 ivars，则必须重写`NSCoding`方法 (`encodeWithCoder:`和`initWithCoder:`) 才能正确序列化和反序列化这些。请参阅[档案和序列化编程指南](https://developer.apple.com/library/mac/#documentation/Cocoa/Conceptual/Archiving/Archiving.html)。

顺便说一句，这基本上是 nib 文件的工作方式。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-10T05:05:12.803

请参阅以下帖子中的@Caleb 答案：

[iOS copyWithZone 仅在使用设备时无法识别选择器](https://stackoverflow.com/questions/8539522/ios-copywithzone-unrecognized-selector-only-when-using-device)

**Caleb**的回答如下

> UIViewController 没有实现 NSCopying 协议。除非您在自己的 UIViewController 子类中实现了 NSCopying，否则您的视图控制器不会响应`-copyWithZone:`.

有关更多信息：您可能需要参考[UIViewController 类参考](http://developer.apple.com/library/ios/#DOCUMENTATION/UIKit/Reference/UIViewController_Class/Reference/Reference.html)。

但我建议您不要实施 NSCopying 协议参考，因为@RobNapier 在[实施 NSCopying （或 NSCopyObject() 被认为有害）中给出了一篇非常不错且内容丰富的文章](http://robnapier.net/blog/implementing-nscopying-439)

希望这可以帮助。

# python - Python普通字典到有序字典的转换

> ID：10083188
> 
> 赞同：2
> 
> 时间：2012-04-10T04:41:34.357
> 
> 标签：python, python-2.7, dictionary, ordereddictionary

我有python普通字典。在这种情况下，不保留插入顺序。我需要保持元素的插入顺序。我知道[`OrderedDict`](https://docs.python.org/2/library/collections.html#collections.OrderedDict)可以完成这项工作。但是，我的问题是我需要从已经存在的普通字典中获取有序字典。无法更改此词典。以下是我的普通字典：

```
d = {'tag': {'a': 1, 'c': {'k': 8}, 'b': 7, 'n': 6}} 
```

python中有什么方法可以保持现有字典中元素的顺序吗？任何帮助表示赞赏。使用 python 2.7

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-04-10T04:51:33.870

简短回答：这是不可能的，一旦你创建了字典，它就没有顺序了。

项目是根据它们的哈希而不是它们的插入顺序存储的，您需要`OrderedDict`在开始时创建它，以便它可以在插入项目时记录插入顺序。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-07-05T14:33:18.800

好的，让我们直截了当..理论上这是不可能的。

但只是为了笑..

由于您自己正在查看 shell 输出并确定顺序（我假设是这样，因为您自己怎么知道顺序？）所以我们开始吧..

```
import re

d = {'tag': {'a': 1, 'b': 7, 'c': {'k': 8}, 'n': 6}}
tags = d['tag']
sorted_keys = set(re.findall(r"'(\w)':", str(tags))).intersection(tags.keys())

print sorted_keys  # You can form your OrderedDict 
```

# java - 二分搜索运行时的某些异常

> ID：10083200
> 
> 赞同：1
> 
> 时间：2012-04-10T04:43:20.783
> 
> 标签：java, algorithm, big-o, analysis, binary-search

我有一个二进制搜索的修改版本，它以排序顺序和一个值接收数组，并返回等于或大于给定值的元素的最小可能索引（如果值大于最大限度）

运行上述算法后，一切正常，并且该方法按预期工作。但是，我在不同的输入大小上运行它来测量运行时间。

```
 for(int i=1;i<=20;i++){  
  int size=10*(i*i*i*i);
 int[] array=createRandomSortedArray(size);
 long startTime=System.nanoTime();
 int index=findSmallestIndex(array, needle);
 long et=System.nanoTime()-startTime;
 System.out.println("To find "+needle+" in "+size+" inputs "+" execution time is "+et+" nanoseconds");
} 
```

以下是观察结果：-

```
To find 50 in 10 inputs  execution time is 5775 nanoseconds
To find 50 in 160 inputs  execution time is 1925 nanoseconds  
To find 50 in 810 inputs  execution time is 4330 nanoseconds
To find 50 in 2560 inputs  execution time is 5293 nanoseconds
To find 50 in 6250 inputs  execution time is 3849 nanoseconds
To find 50 in 12960 inputs  execution time is 3368 nanoseconds
To find 50 in 24010 inputs  execution time is 3849 nanoseconds
To find 50 in 40960 inputs  execution time is 11548 nanoseconds
To find 50 in 65610 inputs  execution time is 9143 nanoseconds
To find 50 in 100000 inputs  execution time is 4812 nanoseconds
To find 50 in 146410 inputs  execution time is 4812 nanoseconds
To find 50 in 207360 inputs  execution time is 11549 nanoseconds  
To find 50 in 285610 inputs  execution time is 8661 nanoseconds
To find 50 in 384160 inputs  execution time is 8661 nanoseconds
To find 50 in 506250 inputs  execution time is 11549 nanoseconds 
To find 50 in 655360 inputs  execution time is 11067 nanoseconds 
To find 50 in 835210 inputs  execution time is 11549 nanoseconds
To find 50 in 1049760 inputs  execution time is 11549 nanoseconds 
To find 50 in 1303210 inputs  execution time is 11067 nanoseconds
To find 50 in 1600000 inputs  execution time is 12030 nanoseconds 
```

我看到 10 个输入的执行时间明显高于其连续的 160 个输入大小。为了验证事情，我在循环外单独运行了 10 个输入的执行，结果如下

```
To find 50 in 10 inputs  execution time is 962 nanoseconds 
```

为什么呢？为什么会存在这种异常？还有其他几个步骤，运行时间比之前的较低输入大小慢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-10T04:49:48.050

在运行微基准测试之前，您是否让虚拟机“预热”？在实际记录任何结果之前尝试运行此代码数千次，看看是否有区别。您可以添加以下命令行参数以查看 JIT 编译的内容：

```
-XX:+PrintCompilation 
```

你也可以运行你的程序

```
-Xint 
```

关闭所有热点优化并尝试获取苹果进行苹果比较。

如果这不是问题 - 我怀疑简单地调用您的方法会产生一些恒定的成本。尝试线性增加输入大小，看看是否可以通过这种方式绘制任何相关性。很难说你什么时候从 10 跳到 160。

最后，您可能希望包含一个标志，启用后将记录代码正在执行的行为（例如比较次数等），以查看您是否做了任何不必要的工作。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-10T04:47:18.173

可能是热点在发挥它的魔力。颠倒运行顺序（先大）以验证这一点。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-10T04:49:32.193

为了分析这一点，我将输出算法正在搜索的实际数组。由于看起来每次运行的数组并不相同，因此很难比较，因为访问的索引数量完全取决于数组的内容和搜索项。

# c++ - D 编程：组件边界处的接口

> ID：10083203
> 
> 赞同：6
> 
> 时间：2012-04-10T04:44:18.170
> 
> 标签：c++, interface, d

C++ 严重依赖 C 风格来导出和导入函数（如果有的话，不是类/接口），因此失去了面向对象的风格，这在许多方面使导出的接口变得晦涩难懂。

D 编程语言可以用于导出面向对象风格的接口吗？我可以用 D 接口包装 C++（纯）类吗？有哪些可能的考虑因素？这种方法是否可行。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-10T07:20:38.773

[您可以在此处](http://dlang.org/cpp_interface.html)找到有关 D 的 C++ 互操作性范围的概述。

面向对象风格的互操作性是通过 D 的`interface`构造提供的：

C++ 端

```
#include<iostream>

class I // Our interface-by-convention
{
public:
    virtual void foo() = 0;

    void bar() // OK, non-virtual members do not affect binary compatibility
    {
        /* ... */
    }
};

class C : public I
{
private:
    int a;

public:
    C(int a) : a(a) {}

    void foo()
    {
        std::cout << a << std::endl;
    }
};

// This function will be used from the D side
I* createC(int a)
{
    return new C(a);
} 
```

D面

```
extern(C++) interface I
{
    void foo();

    final void bar() // OK, non-virtual members do not affect binary compatibility
    {
        /+ ... +/
    }
}

// Link `createC` from the C++ side
extern(C++) I createC(int a);

void main()
{
    I i = createC(2);
    i.foo(); // Write '2' to stdout
} 
```

D's `extern(C++)` on the interface `I` causes the interface layout to replicate the layout of a single-inheritance C++ class with virtual functions in the companion C++ compiler.

The same attribute on the function declaration `createC` causes the function to replicate the mangling and calling convention of an equivalent function in the companion C++ compiler.

Companion compiler pairs: DMD/DMC++, GDC/g++, LDC/Clang. It's often possible to interoperate with a non-companion compiler by sticking to virtual functions and the C ABI for direct function calls.

Note that the `createC` function returns `I*` in C++ and just `I` in D. This is because D interfaces and classes are implicitly reference types.

In more typical real-world use, the `createC` function is more likely to be `extern(C)` than `extern(C++)` (and then `extern "C"` on the C++ side), for greater interoperability between compilers, or more straight-forward runtime linking when using DLLs.

`extern(C++)` currently has some limitations; it's currently not possible to tell D which namespace an `extern(C++)` declaration is in, limiting D to only being able to link to C++ symbols in the global namespace.

# c - C语言中的寻路算法

> ID：10083213
> 
> 赞同：1
> 
> 时间：2012-04-10T04:46:32.377
> 
> 标签：c, algorithm, graph

好的，所以我有一块板，我需要找到它所有可能的解决方案。它**从板的左上角开始，**仅**水平或垂直移动**，它必须访问板的每个元素。为了成功移动到另一个元素，**第一个字母或第二个字母必须**与前一个字母匹配。它只能**访问每个元素一次且只能访问一次，**但它可以跳过它。因此，如果我有这样的板：

XY YX XX

XX YY XY

YX XY XX

示例解决方案路径为：XY->XX->YX->XX->XY->YY->YX->XX->XY

我正在考虑使用 BFS，但我还没有了解队列，所以我可以在没有它们的情况下使用它吗？顺便说一句，这是在 C 中，原因是我正在学习的编程课程只涉及 C。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-10T04:52:24.100

您可以尝试回溯和修剪。它使用递归而不是队列。

[http://en.wikipedia.org/wiki/Backtracking](http://en.wikipedia.org/wiki/Backtracking)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-10T06:27:31.503

请注意，即使找到一种解决方案，但并非所有解决方案都是[NP-Hard](http://en.wikipedia.org/wiki/NP-hard)问题，因为存在`visit each element once and only once`约束。您的问题实际上是网格上[哈密顿路径问题的变体。](http://en.wikipedia.org/wiki/Hamiltonian_path_problem)

因此，**没有已知的多项式解决方案可以确定这样的路径是否存在**，更不用说找到所有路径了。

@Doct0rz 建议使用**回溯**可能是解决此问题的最佳方法。具体来说，我会选择只为相关分支维护设置的[**DFS的一些变体。**](http://en.wikipedia.org/wiki/Depth-first_search)`visited`

**伪代码：**

```
specialDFS(v,visited):
  if (visited.size == |V|):
      print this path by following the "father" field up to the root.
  for each edge (v,u):
     if (u is in visited): //do not check vertices that are already on the path
          continue
     visited.add(u)
     u.father <- v
     specialDFS(u,visited) //recursive call
     visited.remove(u) //clean the work environment, we maintain visited set only for the same path 
```

调用：

```
visited <- {source} //add the single source here
source.father <- null //source is the root of all paths
specialDFS(source,visited) 
```

注意：这是高级 OOP 风格的伪代码。由于问题被标记为作业 - 我将实际实施留给您。
祝你好运！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-10T18:02:56.407

```
#include <stdio.h>

typedef struct data {
  const char *element;
  int  visited;
} Data;

#define Size 3

Data Board[Size][Size] = {
    {{ "XY", 0 }, { "YX", 0 },{ "XX", 0 }},
    {{ "XX", 0 }, { "YY", 0 },{ "XY", 0 }},
    {{ "YX", 0 }, { "XY", 0 },{ "XX", 0 }}
};

#define PathLen (Size*Size)

int Path[PathLen];

Data *pos(int *x, int *y){
    if(*x < 0)     *x += Size;
    if(*x >= Size) *x -= Size;
    if(*y < 0)     *y += Size;
    if(*y >= Size) *y -= Size;
    return &Board[*y][*x];
}

void neighbor(int x, int y, int wx, int wy, int level);

void search_path(int x, int y, int level){
    Path[level] = Size * y + x;
    if(level == PathLen - 1){
        int i;
        for(i=0;i<PathLen;++i){
            int x = Path[i] % Size;
            int y = Path[i] / Size;
            if(i == PathLen - 1)
                printf("%s\n", Board[y][x].element);
            else
                printf("%s->", Board[y][x].element);
        }
    } else {
        neighbor(x, y, x - 1, y, level);//origin -> left
        neighbor(x, y, x + 1, y, level);//origin -> right
        neighbor(x, y, x, y - 1, level);//origin -> up
        neighbor(x, y, x, y + 1, level);//origin -> down
    }
}
//subroutine
//origin(x,y) -> neighbor(wx,wy)
void neighbor(int x, int y, int wx, int wy, int level){
    Data *wk;
    wk = pos(&wx,&wy);
    if(wk->visited == 0 &&
       (Board[y][x].element[0] == Board[wy][wx].element[0] ||
        Board[y][x].element[1] == Board[wy][wx].element[1])){
        wk->visited = 1;
        search_path(wx, wy, level + 1);
        wk->visited = 0;
    }
}

int main(void){
    int x = 0, y = 0, level = 0;
    Board[0][0].visited = 1;
    search_path(x, y, level);
    return 0;
}
/*
XY->XX->YX->YY->XY->XX->YX->XX->XY
XY->XX->YX->YY->XY->XX->YX->XX->XY
XY->XX->YX->YY->XY->XX->XY->XX->YX
XY->XX->XY->XX->YX->XX->XY->YY->YX
XY->XX->XY->XX->YX->YY->XY->XX->YX
XY->XX->YX->XX->XY->YY->XY->XX->YX
XY->XX->YX->XX->XY->YY->YX->XX->XY
XY->XX->YX->XX->XY->XX->YX->YY->XY
*/ 
```

# javascript - 试图 JSON.parse 一个文件

> ID：10083220
> 
> 赞同：0
> 
> 时间：2012-04-10T04:47:14.613
> 
> 标签：javascript, json, node.js

我正在下载一个文件并尝试使用 JSON.parse，它应该返回`{ dateTime: "2012-04-07T17:15:00.000-05:00", value: "1065.91" }`我是否通过 JSON.parse 传递了正确的对象并正确地构造它？

代码：

```
var http = require("http");
var fs = require('fs');

var options = {
 host: 'waterdata.usgs.gov',
 port: 80,
 path: '/nwis/iv/?sites=02334400&period=P7D&format=json'
};

http.get(options, function(res) {
 var responseText = '';
 res.on('data', function(chunk) {
    responseText += chunk;
 });
 res.on('end', function() {
    fs.writeFile('response.txt', responseText.toString(), function(err) {
        if (err) throw err;
         console.log('It\'s saved!');
        var d = JSON.parse(responseText);
        for (var i = 0; i < d.value.timeSeries.length; i++) {
            if (d.value.timeSeries[i].variable.variableName == 'Elevation of reservoir      water surface above datum, ft') {
                var result = d.value.timeSeries[i].values[0].value[d.value.timeSeries[i].values[0].value.length - 1];
                console.log(result);
            }
        }
    });
});
}).on('error', function(e) {
console.log('problem with request: ' + e.message);
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-10T05:12:43.710

只需替换`waterdata.usgs.gov`为`waterservices.usgs.gov`

# python - Python 和 git，了解文件何时从同步更改的最佳方法

> ID：10083223
> 
> 赞同：0
> 
> 时间：2012-04-10T04:47:25.217
> 
> 标签：python, git

我正在使用 chef 每分钟一次在我的生产服务器上获取更改，并且在 github 存储库中，我有 6 个 spawn-fcgi 脚本在 runit 的控制下。如果只有一个文件更改，我需要重新启动 runit 以获取更改。我的伪代码如下所示。

```
git fetch
for each file:
    if file changed from last sync:
       sv start myrunit
    else:
        pass 
```

我愿意接受最佳实践方法。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-10T05:13:09.737

```
git diff --name-only HEAD@{1}..HEAD 
```

will list files changed between the previous and current checked-out commit.

# jquery - jquery ajax cakephp：输入文本框的更改事件显示除城市下拉框以外的所有字段

> ID：10083226
> 
> 赞同：0
> 
> 时间：2012-04-10T04:48:19.720
> 
> 标签：jquery, ajax, cakephp, onchange, dropdownbox

当用户输入电子邮件时，输入文本框的 onchange 事件会触发并显示除城市下拉框之外的所有其他字段。我注意到 $("#MerryParentCityId").val(result_array[5]); 的值为 81，但用户未在 MerryParentCityId 下拉框中显示相应的城市名称。状态下拉框的值显示正常。有人可以告诉我我要去哪里错了吗？

我感觉问题出在 html 表单的 MerryParentCityId 下拉框中。但我不知道要在那里进行哪些更改。

谢谢你。

add.ctp（城市和州下拉框所在的部分表格）

```
<div class="input text required">
<label for="MerryParentEmail">Email</label><input name="data[MerryParent][email]" type="text" maxlength="30" id="MerryParentEmail" /></div>
<div class="input text required"><label for="MerryParentName">Parent/Guardian Name</label>
<input name="data[MerryParent][name]" type="text" maxlength="30" id="MerryParentName" /></div>
<div class="input text"><label for="MerryParentLandline">Landline</label><input name="data[MerryParent][landline]" type="text" maxlength="12" id="MerryParentLandline" /></div>
<div class="input text required"><label for="MerryParentMobile">Mobile</label><input name="data[MerryParent][mobile]" type="text" maxlength="10" id="MerryParentMobile" /></div>
<div class="input text required"><label for="MerryParentAddress">Address</label><input name="data[MerryParent][address]" type="text" maxlength="40" id="MerryParentAddress" /></div>
<div class="input select required"><label for="MerryParentStateId">State</label><select name="data[MerryParent][state_id]" id="MerryParentStateId">

<option value="">Choose one</option>
<option value="31">Andaman &amp; Nicobar</option>
<option value="4">Andra Pradesh</option>
<option value="25">Arunachal Pradesh</option>
<option value="13">Assam</option>
<option value="2">Bihar</option>
<option value="30">Chandigarh</option>
<option value="16">Chhattisgarh</option>
<option value="32">Dadra &amp; Nagar Haveli</option>
<option value="33">Daman &amp; Diu</option>
<option value="27">Delhi</option>
<option value="24">Goa</option>
<option value="7">Gujarat</option>
<option value="15">Haryana</option>
<option value="19">Himachal Pradesh</option>
<option value="17">Jammu and Kashmir</option>
<option value="12">Jharkhand</option>
<option value="8">Karnataka</option>
<option value="11">Kerala</option>
<option value="34">Lakshadweep</option>
<option value="5">Madhya Pradesh</option>
<option value="1">Maharashtra</option>
<option value="22">Manipur</option>
<option value="21">Meghalaya</option>
<option value="28">Mizoram</option>
<option value="23">Nagaland</option>
<option value="10">Orissa</option>
<option value="29">Puducherry</option>
<option value="14">Punjab</option>
<option value="9">Rajasthan</option>
<option value="26">Sikkim</option>
<option value="6">Tamil Nadu</option>
<option value="20">Tripura</option>
<option value="35">Uttar Pradesh</option>
<option value="18">Uttaranchal</option>
<option value="3">West Bengal</option>
</select></div>
<div class="input select required"><label for="MerryParentCityId">City</label>
<select name="data[MerryParent][city_id]" id="MerryParentCityId">
</select></div>
<div class="input text required"><label for="MerryParentPostalCode">Postal Code</label>
<input name="data[MerryParent][postal_code]" type="text" maxlength="6" id="MerryParentPostalCode" /></div></fieldset><div class="submit"><input type="submit" value="Submit" /></div><div style="display:none;"><input type="hidden" name="data[_Token][fields]" value="d2ad0fe88cfdc6c730e0a5b8d95d84db40a24543%3A" id="TokenFields273660451" /></div></form> 
```

jQuery代码

```
<script type="text/javascript">
  $(document).ready(function(){

      $("#MerryParentEmail").change(function(){
        //txt=$("#MerryParentEmail").val();
        email_id=$("#MerryParentEmail").serialize();
        //alert(txt);
        $.post("../students/get_parent_info",email_id,function(result_str){
        result_array=result_str.split('<br>');
          $("#MerryParentName").val(result_array[0]); 
          $("#MerryParentLandline").val(result_array[1]);
          $("#MerryParentMobile").val(result_array[2]); 
          $("#MerryParentAddress").val(result_array[3]);
          $("#MerryParentStateId").val(result_array[4]);
          $("#MerryParentCityId").val(result_array[5]);
          $("#MerryParentPostalCode").val(result_array[6]);
        });
      });

           $("#MerryParentStateId").change(function(){
        state=$(this).val();
        txt_str="state_id="+state;
        $.get("../students/getcities",txt_str,function(result){
            $("#MerryParentCityId").html(result).show();
        });
       });

 });

</script> 
```

student_controller.php

```
function get_parent_info(){
//$this->layout=false;
 if (!empty($this->data)){

    $merryparent_info=$this->Student->MerryParent->getMerryParents($this->data['MerryParent']['email']);

    echo $merryparent_info['MerryParent']['name'].'<br>';
    echo $merryparent_info['MerryParent']['landline'].'<br>';
    echo $merryparent_info['MerryParent']['mobile'].'<br>';
    echo $merryparent_info['MerryParent']['address'].'<br>';
    echo $merryparent_info['MerryParent']['state_id'].'<br>';
    echo $merryparent_info['MerryParent']['city_id'].'<br>';
    echo $merryparent_info['MerryParent']['postal_code'].'<br>';
    }
}

function getcities(){
    $this->data['MerryParent']['state_id']=$_GET['state_id'];
    if (!empty($this->data['MerryParent']['state_id'])){
       $cities = $this->Student->MerryParent->City->getCities($this->data['MerryParent']['state_id']);
    //print_r($cities);
    foreach ($cities as $k=>$v){
        echo '<option value="'.$k.'">'.$v.'</option>';
    }

        /* foreach($cities as $optionValue){
            echo '<option>' . $optionValue . '</option>';
        }*/
    }else{
        $this->Session->setFlash('You didn\'t select a state!');
    }

}

function add(){
        //saves a new students information to db
        $states=$this->Student->MerryParent->State->getStates();
    $this->set('states',$states);

    //$cities=array();  
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-11T09:11:04.537

一旦我将以下代码添加到 $("#MerryParentEmail").change 事件处理程序，

```
 $("#MerryParentStateId").val(result_array[4]);
          state=result_array[4];
          txt_str="state_id="+state;
          $.get("../students/getcities",txt_str,function(result){
            $("#MerryParentCityId").html(result).show();
            $("#MerryParentCityId").val(result_array[5]);
          }); 
```

城市下拉框正在填充，并显示用户的相应城市。谢谢你。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-10T05:56:51.247

看起来它应该工作。

我只能认为返回的值与select 元素`city_id`中的任何 id 都不匹配。`#MerryParentCityId`

检查页面的 HTML 和`result_str`; 寻找不匹配。

或者也许`#MerryParentCityId`是不正确的。

# events - jQuery fullCalendar 事件源

> ID：10083227
> 
> 赞同：1
> 
> 时间：2012-04-10T04:48:26.577
> 
> 标签：events, fullcalendar

我正在使用带有月视图选项的 jQuery FullCalendar 1.5 版。我的任务是从存储在客户端数据库中的 xml 类型数据中填充事件。我已经使用了该示例，并且效果很好。现在谁能告诉我如何创建事件数组并将其分配给日历事件？它很紧急，我必须尽快交付。

# cordova - 如果没有使用 Phonegap 的互联网连接，如何显示警报框？

> ID：10083230
> 
> 赞同：1
> 
> 时间：2012-04-10T04:48:57.250
> 
> 标签：cordova, internet-connection, network-state

```
function checkConnection() {
                            var networkState = navigator.network.connection.type;

                        var states = {};

                        states[Connection.UNKNOWN]  = 'Unknown connection';
                        states[Connection.ETHERNET] = 'Ethernet connection';
                        states[Connection.WIFI]     = 'WiFi connection';
                        states[Connection.CELL_2G]  = 'Cell 2G connection';
                        states[Connection.CELL_3G]  = 'Cell 3G connection';
                        states[Connection.CELL_4G]  = 'Cell 4G connection';
                        states[Connection.NONE]     = 'No network connection';

                    alert('Connection type: ' + states[networkState]);

                } 
```

在这里，如果只有互联网连接不可用，我想显示警报？我正在使用 if 语句`if(statusValue == 'none'){ alert }`但这里在我的移动应用程序中不起作用。这里我使用的是**Phonegap-1.3.0.js**

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-10T05:20:23.267

做就是了

```
networkState = navigator.network.connection.type; 
if (networkState == Connection.NONE)
{
  alert('No internet connection ');
}; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-10-04T05:39:03.163

尝试这个：

```
function checkConnection() {
    network = navigator.network.connection.type;

    states[Connection.UNKNOWN] = 'Unknown connection';
    states[Connection.ETHERNET] = 'Ethernet connection';
    states[Connection.WIFI] = 'WiFi connection';
    states[Connection.CELL_2G] = 'Cell 2G connection';
    states[Connection.CELL_3G] = 'Cell 3G connection';
    states[Connection.CELL_4G] = 'Cell 4G connection';
    states[Connection.NONE] = 'No network connection';
    // alert('Connection type: ' + states[network]);
    return states[network];
}
     if (states[network] == 'No network connection')
{
    alert('Connection type: ' + states[network]);
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-07-16T06:49:39.940

试试下面的代码。

```
var networkState = navigator.network.connection.type;
var states = {};
states[Connection.UNKNOWN]  = 'Unknown connection';
states[Connection.ETHERNET] = 'Ethernet connection';
states[Connection.WIFI]     = 'WiFi connection';
states[Connection.CELL_2G]  = 'Cell 2G connection';
states[Connection.CELL_3G]  = 'Cell 3G connection';
states[Connection.CELL_4G]  = 'Cell 4G connection';
states[Connection.NONE]     = 'No network connection';

if ((states[networkState]) == states[Connection.NONE])
{
alert("Please check your internet connectivity and try again"); 
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-04-10T04:57:05.753

您还可以使用 navigator.network.isReachable 以几乎 100% 的正常运行时间来 ping 一些网站，例如 google。在所有移动操作系统或某些特定版本的 Android 中它不是都可以工作吗？

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-08-01T19:33:48.633

这应该可以帮助您：

```
// Wait for Cordova to load
document.addEventListener("deviceready", onDeviceReady, false);
// Cordova is ready
function onDeviceReady() {
document.addEventListener("offline", whenOffline, false);
return false;
}

function whenOffline() {
navigator.notification.alert(
'Sorry your internet connection is not working, please enable it !', // message
alertDismissed, // callback
'Settings', // title
'Done' // buttonName
);
return false;
} 
```

# java - 如何在 UserType nullSafeGet 中获取对象的类型

> ID：10083231
> 
> 赞同：2
> 
> 时间：2012-04-10T04:49:02.240
> 
> 标签：java, hibernate

我正在编写以下自定义可序列化 UserType：

```
public class SerUserType extends MutableUserType {
    protected Class klass;
    protected SerA ser=F.g(SerA.class);
    public Class returnedClass() {
        return klass;
    }
    public int[] sqlTypes() {
        return new int[] {Types.BLOB};
    }
    public boolean equals(Object x, Object y) throws HibernateException {
        return ObjectUtils.equals(x, y);
    }
    public Object deepCopy(Object value) {
        klass=value.getClass();
        Copyable copyable=(Copyable)value;
        Object copy=copyable.copy();
        return copy;
    }
    public Object nullSafeGet(ResultSet resultSet,String[] names,SessionImplementor session,Object owner) 
        throws HibernateException,SQLException {
        byte[] b=(byte[])BlobType.INSTANCE.nullSafeGet(resultSet,names,session,owner);
        return ser.deser(b,klass);
    }
    public void nullSafeSet(PreparedStatement preparedStatement,Object value,int index,SessionImplementor session) 
        throws HibernateException,SQLException {
        BlobType.INSTANCE.nullSafeSet(preparedStatement,ser.ser(value),index,session);
    }
} 
```

我什至可以用它覆盖已注册的可序列化类。如果您有兴趣，SerA 的实现是 protostuff 序列化程序。

无论如何，在此接口中提供对象的任何方法似乎都没有在 nullSafeGet 之前调用，因此无法确定我们正在使用的对象的类，从而无法获取用于序列化调用的类.

因此，似乎唯一的解决方案是制作一个 ParameterizedType 并将对象的类作为属性传递。:(

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-10T04:55:40.787

不幸的是，我认为唯一的解决方案是使用 ParameterizedType，然后每次您想将它与不同的类一起使用时创建一个类型定义。

如果您需要示例，请参阅此问题中的代码： [Hibernate Entities from Multiple Databases](https://stackoverflow.com/questions/8980857/hibernate-entities-from-multiple-databases)

# php - Wordpress 内容根据内容类型进行自我调整

> ID：10083232
> 
> 赞同：0
> 
> 时间：2012-04-10T04:49:04.253
> 
> 标签：php, wordpress, plugins, themes

我不知道如何搜索它，但我正在寻找一种插件或主题来调整主页内容列表，类似于 Facebook 时间线调整它的方式。

调整基于您拥有的内容类型（即，一张照片，或三张相关照片，或视频，或只是普通文本/博客）。

非常感谢您的帮助。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-10T05:22:15.727

如果您正在寻找此 [http://wordpress.org/extend/plugins/wp-facebook-timeline-mf-timeline/ ，我可以理解您](http://wordpress.org/extend/plugins/wp-facebook-timeline-mf-timeline/)

从您的 WordPress 帖子和其他媒体源以 Facebook 个人资料时间线的样式创建视觉线性时间线表示。

# c# - nHibernate 存储过程调用

> ID：10083239
> 
> 赞同：3
> 
> 时间：2012-04-10T04:50:10.313
> 
> 标签：c#, nhibernate, stored-procedures

我对 nHibernate ORM 很陌生。有人可以帮我理解/解决我下面的场景吗？

我有一个称为参数的存储`getSummaryReport`过程`@productID`。此存储过程连接多个表并提供汇总数据。

我需要使用 nhibernate 加载从上述存储过程返回的数据。有人可以帮我如何通过 nHibernate 调用存储过程吗？

现在我脑海中的一些问题是：

1.  我需要映射xml吗？如果是的话，据我所知，映射 xml 应该有每个属性的物理表。在上述情况下，存储过程正在生成全新的对象。

2.  如何从 C# 中调用上述存储过程？

再次感谢你。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-10T06:37:10.447

试试这个，你的映射： -

```
<?xml version="1.0" encoding="utf-8" ?>
<hibernate-mapping xmlns="urn:nhibernate-mapping-2.2">
  <sql-query name="SummaryReport">
    exec getSummaryReport  :productId
  </sql-query>
</hibernate-mapping> 
```

然后使用 SetResultTransformer...

```
var results = Session
      .GetNamedQuery("SummaryReport")
      .SetInt32("productId", productId);
      .SetResultTransformer(new AliasToBeanResultTransformer(typeof(YOURCLASS)));
return results.List<YOURCLASS>(); 
```

你的班级是：-

```
public class YOURCLASS 
{
    public virtual int ProductId { get; set; }
    public virtual string Column1Returned { get; set; }
    public virtual int Column2Returned { get; set; }
            etc..
} 
```

确保从您的 SP 返回的内容定义为`YOURCLASS`记住您的列名和属性名必须完全匹配，因为它们是`CASE`敏感的。

# c++ - 在 C++ 中有 2 个类时如何知道使用哪个类？

> ID：10083242
> 
> 赞同：0
> 
> 时间：2012-04-10T04:50:59.763
> 
> 标签：c++, constructor

我正在为明天早上的考试做准备。我正在为下面的 C++ 演练而苦苦挣扎。我已经运行了代码并使用 cout 来检查程序的执行情况。我注意到的第一件事是程序只为 main 中的第一个对象调用了类“one”中的默认构造函数 3 次。我真的对代码的执行感到困惑。

```
 #include <iostream>
    using namespace std;

    class one {
    int n;
    int m;
      public:
    one() { n = 5; m = 6; cout << "one one made\n"; }
    one(int a, int b) {
      n = a;
      m = b;
      cout << "made one one\n";
    }
    friend ostream &operator<<(ostream &, one);
    };

    ostream &operator<<(ostream &os, one a) {
    return os << a.n << '/' << a.m << '=' <<
     (a.n/a.m) << '\n';
    }

    class two {
    one x;
    one y;
      public:
    two() { cout << "one two made\n"; }
    two(int a, int b, int c, int d) {
      x = one(a, b);
      y = one(c, d);
      cout << "made one two\n";
    }
    friend ostream &operator<<(ostream &, two);
    };

    ostream &operator<<(ostream &os, two a) {
    return os << a.x << a.y;
    }

    int main() {
    two t1, t2(4, 2, 8, 3);
    cout << t1 << t2;
    one t3(5, 10), t4;
    cout << t3 << t4;
    return 0;
    } 
```

我不明白第一件事。当 main 调用第一个默认构造函数时`two t1,`，为什么它会连续调用 3 次然后它会调用`t2(4, 2, 8, 3);`？

如果代码太长，我很抱歉，但我真的需要帮助才能理解它。

请指教。谢谢你。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-10T05:21:25.720

当我运行代码时，我得到了这个结果：

```
one one made
one one made
one two made
one one made
one one made
made one one
made one one
made one two 
```

这是因为：

```
two t1;
one one made //t1.x; parameterless 'one' constructor called by default
one one made //t1.y; parameterless 'one' constructor called by default
one two made //t1; parameterless 'two' constructor

t2(4, 2, 8, 3)
one one made //t2.x; default constructor as variable not present in initialization list

one one made //t2.y; default constructor as variable not present in initialization list

made one one //x = one(a, b) executed now
made one one //y = one(c, d) executed now
made one two //t2(int..) constructer called 
```

请注意，在 t2 的情况下，x 和 y 被构造了两次，因为没有初始化列表。为避免这种情况，您可以使用：

```
two(int a, int b, int c, int d): x(a,b), y(c,d)
{
cout << "made one two\n";
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-10T05:08:13.123

您将看到类“one”和类“two”的构造函数都出现了 3 次，因为这两个对象的三个实例都被创建了。

如果你仔细看一下插入器友元函数，第一类和第二类都是按值传递的，而不是按引用传递的。必须通过默认复制构造函数（您尚未实现）创建临时实例。如果您想取消额外的实例化，请将您的插入器函数更改为：

```
friend ostream &operator<<(ostream &, one &obj); 
friend ostream &operator<<(ostream &, two &obj); 
```

当我进一步看时，两个有 2 个类型为 1 的成员变量，所以你会看到我认为的更多构造函数。

最后，像这样的测试类应该命名为 foo 和 bar。一和二连自己都难以沟通。（恕我直言）

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-10T05:27:20.070

从 main 中的第一个对象开始。调用“one”的两个默认构造函数，因为“two”类有两个“one”类的对象，并且正常调用“Two”的一个默认构造函数。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-04-10T05:31:39.600

这是我看到的输出：

`one one made`
`one one made`
`one two made`
`one one made`
`one one made`
`made one one`
`made one one`
`made one two`
`5/6=0`
`5/6=0`
`4/2=2`
`8/3=2`
`made one one`
`one one made`
`5/10=0`
`5/6=0`

这对我来说很有意义。我没有看到第一个对象的默认构造函数被调用 3 次。

就输出而言，这里会发生什么：

`two t1, t2(4, 2, 8, 3);`

对于 t1，它为类中定义的两个对象调用一个的默认构造函数

`two (one x and one y)`

所以输出是“一做”和“一做”接下来它执行两个的默认构造函数所以输出是“一二做”下一个对于t2，它再次为x和y调用默认构造函数一所以输出是“一个制造”和“一个制造”接下来它执行

`x = one(a,b) and y =one(c,d)`

所以现在它在 two() 的构造函数中打印“做了一个”和“做了一个”，因为我们已经“做了一个两个”，同样被打印了......

```
cout << t1 << t2;

one t3(5, 10), t4; 
```

再次对于此语句，对于 t3，它调用 one 的构造函数并打印“make one one” 对于 t4，它执行默认构造函数并打印“one one made”

```
cout << t3 << t4; 
```

# php - 为什么 PHP 一直在重置数组指针？

> ID：10083246
> 
> 赞同：3
> 
> 时间：2012-04-10T04:51:58.017
> 
> 标签：php, arrays

所以我花了 2 个小时试图解决这个问题，尽可能减少代码以隔离问题，但我无法解决这个问题。

所以我有这个代码：

```
$arr['key']['name'] = array("one", "two", "three");

$counter = 0;
do
{
    $cur = current($arr);

    $k = key($arr['key']['name']);
    next($arr['key']['name']);
}while($k !== null); 
```

这是一个永无止境的循环。出于某种原因，在遍历了所有 $arr['key']['name'] 值之后，key() 不再返回 NULL，而是再次返回 0。删除 $cur = current($arr); 然而解决了这个问题。[根据php手册](http://www.php.net/manual/en/function.current.php)，`current()`根本不影响数组指针。现在我知道复制一个数组会重置它的指针，但是没有复制，如果有 $k 会一直为零，而不是从 0 到 2 然后重置回 0。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-10T04:55:38.610

`current()` *不会*移动您使用它的数组的数组指针，但您在*不同的数组*上使用它。它正在重置*嵌套*数组的指针。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-10T04:54:01.570

你为什么不这样做呢？

**代码 ：**

```
foreach ($arr['key']['name'] as $k)
{
    // do something with $k

} 
```

# ruby - 如何在Ruby中打印带有反斜杠的字符串

> ID：10083251
> 
> 赞同：6
> 
> 时间：2012-04-10T04:53:22.633
> 
> 标签：ruby, string, irb, ruby-1.9.2, backslash

我有一个字符串`str = "xyz\123"`，我想按原样打印它。

IRB 给了我一个意想不到的输出。请在下面找到相同的内容：-

```
1.9.2p290 :003 > str = "xyz\123"
 => "xyzS" 
1.9.2p290 :004 > 
```

关于如何让 IRB 打印原始字符串的任何想法，即“xyz\123”。

谢谢..

**更新**：

我试图逃避它，但由于某种原因它似乎并不那么简单。请在下面找到我的试验：

```
1.9.2p290 :004 > str = "xyz'\'123"
 => "xyz''123" 
1.9.2p290 :005 > str = "xyz'\\'123"
 => "xyz'\\'123" 
1.9.2p290 :006 > str = "xyz'\\\'123"
 => "xyz'\\'123" 
1.9.2p290 :007 > 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-10T04:57:07.697

更新答案：

转义令牌 '\' 总是在普通的 ruby​​ 代码中工作，但并不总是在“ruby 控制台”中工作。所以我建议你写一个单元测试：

```
# escape_token_test.rb 
require 'test/unit'
class EscapeTokenTest < Test::Unit::TestCase
  def test_how_to_escape
    hi = "hi\\backslash"
    puts hi
  end 
end 
```

你会得到如下结果：

```
hi\backslash 
```

并查看@pst 的评论。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-10T04:57:42.080

反斜杠字符是转义字符。您可能已经看到 "\n" 用于显示新行，这就是原因。"\123" 评估 83 的 ASCII 码，即 "S"。要打印反斜杠，请使用 2 个反斜杠。所以你可以使用`str = "xyz\\123"`.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-07-20T02:30:23.347

**如何打印反斜杠？**

使用 2 个反斜杠，例如`"xyz\\123"`

**为什么`"xyz\123"`评价为`"xyzS"`？**

在双引号字符串中，`\nnn`是**八进制转义**。

![表 22.2。 双引号字符串中的替换](../Images/6e41bc24f73045698dfe94035b40c00b.png)

Thomas, D. (2009) Ruby 编程，第 329 页

所以，八进制 123
= (64 * 1) + (8 * 2) + 3
= 十进制 83
= ASCII`S`

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2016-11-08T18:48:38.883

很简单……试试转储功能：

```
mystring = %Q{"Double Quotes"}
p mystring.dump
=> "\"\\\"Double Quotes\\\"\""
p mystring
=>"\"Double Quotes\"" 
```

# java - Android-Installing to device using eclipse 一次安装同一应用程序的两个实例-错误

> ID：10083258
> 
> 赞同：0
> 
> 时间：2012-04-10T04:54:07.620
> 
> 标签：java, android, apk

Android-Installing to device using eclipse 一次安装同一应用程序的两个实例-错误

它在使用 eclipse 安装后运行，但是当我触摸图标的一次时它没有启动它向我显示 android 常见错误 syaing 意外停止！请帮我？？

这是我正在使用的清单（活动）

```
<?xml version="1.0" encoding="utf-8"?>
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
      package="com.hunter99x"

      android:icon="@drawable/icon"
      android:versionCode="1"
      android:versionName="1.0">
    <uses-sdk android:minSdkVersion="8" />

    <application android:icon="@drawable/icon" android:label="@string/app_name">
        <activity android:name=".main" android:configChanges="orientation|keyboardHidden" android:theme="@android:style/Theme.NoTitleBar"
                  android:label="@string/app_name" android:screenOrientation="portrait" >
            <intent-filter>
                <action android:name="android.intent.action.MAIN" />
                <category android:name="android.intent.category.LAUNCHER" />
            </intent-filter>
        </activity>

                <activity android:name=".origine" android:configChanges="orientation|keyboardHidden" android:theme="@android:style/Theme.NoTitleBar"
                  android:label="@string/app_name" android:screenOrientation="portrait">
            <intent-filter>
                <action android:name="android.intent.action.origine" />
                <category android:name="android.intent.category.LAUNCHER" />
            </intent-filter>
        </activity>

                        <activity `enter code here`android:name=".Gameover" android:configChanges="orientation|keyboardHidden" android:theme="@android:style/Theme.NoTitleBar"
                  android:label="@string/app_name" android:screenOrientation="portrait">
            <intent-filter>
                <action android:name="android.intent.action.MAIN" />
                <category android:name="android.intent.category.LAUNCHER" />
            </intent-filter>
        </activity>

                                                <activity android:name=".LandingScreen" android:configChanges="orientation|keyboardHidden" android:theme="@android:style/Theme.NoTitleBar"
                  android:label="@string/app_name" android:screenOrientation="portrait">
            <intent-filter>
                <action android:name="android.intent.action.MAIN" />
                <category android:name="android.intent.category.LAUNCHER" />
            </intent-filter>
        </activity>

    </application>
    <uses-permission android:name="android.permission.VIBRATE"/>

</manifest> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-10T07:02:29.140

我认为问题是因为你重复了

```
 <intent-filter>
            <action android:name="android.intent.action.MAIN" />
            <category android:name="android.intent.category.LAUNCHER" />
        </intent-filter> 
```

这是 2 项活动。尝试删除它并仅声明 1 个活动作为您的主要活动。Tjis 可能会解决您的问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-10T09:42:23.667

在活动中尝试此代码并检查它是否有效：

```
@Override
public void onBackPressed() {
      finish();
      System.exit(0);
} 
```

# javascript - 在单个网页上显示多个 pdf

> ID：10083265
> 
> 赞同：0
> 
> 时间：2012-04-10T04:55:46.550
> 
> 标签：javascript, ajax, pdf, jquery

我正在构建一个网页，在该网页中我使用了 Mozilla 的 pdf.js 项目，并且它运行良好。但是我需要在单个页面上显示多个 pdf，它们将被放置在不同的分区中。有人认为我使用 iframe，但我只需要在 div 中显示它们，或者我可以使用按钮切换到同一页面上的其他 pdf

使用按钮切换到其他 pdf 的方式是完美的解决方案，可以通过 AJAX 完成，但我不知道如何使用 AJAX 实现此功能。有没有人可以为我提供实现它的方法？

当用户从选择文件工具框中选择一个 pdf 文件时，Mozilla 开发人员已经实现了以下代码来更改查看器中的 pdf：

```
window.addEventListener('change', function webViewerChange(evt) {
  var files = evt.target.files;
  if (!files || files.length == 0)
    return;

  // Read the local file into a Uint8Array.
  var fileReader = new FileReader();
  fileReader.onload = function webViewerChangeFileReaderOnload(evt) {
    var data = evt.target.result;
    var buffer = new ArrayBuffer(data.length);
    var uint8Array = new Uint8Array(buffer);

    for (var i = 0; i < data.length; i++)
      uint8Array[i] = data.charCodeAt(i);
    PDFView.load(uint8Array);
  }; 
```

但我想在按钮单击事件上使用此代码，它应该在查看器上加载预先指定的 pfd。

# android - 不搜索任何可发现的设备

> ID：10083266
> 
> 赞同：0
> 
> 时间：2012-04-10T04:55:48.900
> 
> 标签：android

任何人都可以描述这段代码有什么问题。它没有搜索设备，而是显示了一些配对的设备。

项目托管[在](https://github.com/luugiathuy/Remote-Bluetooth-Android/tree/master/RemoteBluetooth)Github 上。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-13T02:34:30.590

将 UUID 视为您的设备正在宣传或接受的特定类型服务的一个标识符。它可以为它可以提供或使用的许多不同服务提供许多这样的标识符。它不是实际设备的标识符。

您引用的 UUID 与我在这里找到并使用的 UUID 相同。它似乎是通用蓝牙 SPP 服务的 UUID。（但还没有找到像官方发布的文件引用这个数字的实际证据，只是在这里发布，没有参考）这个 UUID 将允许你的 android 设备连接到蓝牙串口适配器等东西，或者任何期望通用串口的东西设备......所以这是一个很好的开始。

如果您计划创建一个与蓝牙 SPP 不同的特殊服务，或者有不同的存在理由，就像 android chat 那样，那么创建自己的 UUID 是个好主意。当然，连接您的服务的所有设备都必须理解这个相同的特殊号码。

# java - 显示 toast 消息

> ID：10083271
> 
> 赞同：2
> 
> 时间：2012-04-10T04:56:28.397
> 
> 标签：java, android, toast

我正在开发一个基于测验的应用程序，当用户单击任何选项时，它应该出现合适的消息，例如“你的答案是正确的”、“你的答案是错误的”。我想要的是

```
 1\. how to display that sort of messages ?or is it the only way to display such msgs ?
 2\. If the user clicks wrong option the it should show the correct answer as well as the msg

here is what i have done so far but its not working giving force close!!!

public void onClick(View v) 
    {
        // TODO Auto-generated method stub
        switch (v.getId()) 
        {
        case R.id.button1:
            Log.d("ERR", v.getTag().toString());
            if (v.getTag().toString().equalsIgnoreCase("right")) 
            {
                displayAnswer();

            }
            else
            {
                errorAnswer();

            }

            break;
        case R.id.button2:
            Log.d("ERR", v.getTag().toString());
            if (v.getTag().toString().equalsIgnoreCase("right")) 
            {
                displayAnswer();
            }
            else
            {
                errorAnswer();

            }
            break;

        case R.id.button3:
            Log.d("ERR", v.getTag().toString());
            if (v.getTag().toString().equalsIgnoreCase("right")) 
            {
                displayAnswer();
            }
            else
            {
                errorAnswer();

            }
            break;

        case R.id.button4:
            Log.d("ERR", v.getTag().toString());
            if (v.getTag().toString().equalsIgnoreCase("right")) 
            {
                displayAnswer();
            }
            else
            {
                errorAnswer();

            }
            break;

        case R.id.btn_next:
//          lyt_ans.setVisibility(View.GONE);
//          lyt_quest.setVisibility(View.VISIBLE);
            prev = counter;
            counter += 1;

            if (counter >= SIZE) 
            {
                Collections.shuffle(quizIndexList);
                counter = 0;
            }
            getInfoFromDB(quizIndexList.get(counter));
            reLoad();

            break;

        case R.id.btn_bck:
                getInfoFromDB(quizIndexList.get(prev));
                    reLoad();
//          counter --;

        }
    }

    private void errorAnswer() 
    {
        Toast toast = new Toast(getApplicationContext());
        toast.setDuration(SIZE);
        toast.setGravity(Gravity.CENTER, 0, 0);
        toast.setText("your answer is wrong");
        // TODO Auto-generated method stub

    }

    private void displayAnswer() {

        // TODO Auto-generated method stub
        lyt_quest = (LinearLayout) findViewById(R.id.lyt_quest);
        lyt_ans = (LinearLayout) findViewById(R.id.lyt_ans);
        lyt_quest.setVisibility(View.VISIBLE);
        lyt_ans.setVisibility(View.VISIBLE);
//      TextView txt1 = null;
        Toast toast = new Toast(getApplicationContext());
        toast.setDuration(SIZE);
        toast.setGravity(Gravity.CENTER, 0, 0);
        toast.setText("Your answer is correct!!");
    } 
```

任何帮助都是可观的。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-10T05:01:15.543

你为什么不使用

```
Toast.makeText(getApplicationContext(), "Your message", Toast.LENGTH_SHORT).show(); 
```

您在代码中编写的内容会给您一个错误，**提示 This toast is never created using Toast.makeText()**。所以你最好使用这种方法。

如果您想使用自定义 toast 消息，那么您在代码中没有做的一件事是强制性的。创建**toast 对象后，您必须使用****setView(your inflated layout object)**将视图设置为该 toast 。然后你必须最后调用**toast.show()**。但请记住，您必须获取膨胀的布局并将其传递给**setView()**。

有关自定义吐司的更多信息，请参阅[此链接](http://developer.android.com/guide/topics/ui/notifiers/toasts.html)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-04-10T04:59:08.140

```
v.getTag() 
```

我`setTag(object)`在您的代码中找不到任何内容。

一旦你 setTag() 到视图，然后只有你可以 getTag() 相同的视图。

```
Log.d("ERR", v.getTag().toString()); 
```

`if (v.getTag().toString().equalsIgnoreCase("right"))`

错误会在你展示之前出现`Toast`

你也错过了，查看吐司`toast.show()`

# xml - 如何使用 jquery/ajax 转换/读取 word 文件

> ID：10083277
> 
> 赞同：0
> 
> 时间：2012-04-10T04:57:57.000
> 
> 标签：xml, jquery

我想将 word 文件转换为 XML 并使用 jquery/ajax 读取特定数据。

下面是我的代码：

```
function getFile(){   
   $.post("word.doc", function(data){
   $("#divFile").html("Data Loaded: " + data);
 }); 
```

使用此功能，我可以加载数据但无法将其加载到 XML 文件中。

请帮忙。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-10T23:56:18.833

文档规范在[此处](http://msdn.microsoft.com/en-us/library/ff381461.aspx) 查看**Office 文件格式**部分（但@corbin 是对的——它并非微不足道）

# sql-server-2008 - SQL Server 中的 DATEDIFF 函数 - 在不同情况下执行不同

> ID：10083279
> 
> 赞同：0
> 
> 时间：2012-04-10T04:58:34.330
> 
> 标签：sql-server-2008

我正在使用 SQL Server，只是在我的案例中发现了一个问题。我已将 DATEDIFF 函数用作：

```
select datediff(dd,'1935-12-07','2010-03-02')/365.00  ---> 74.28
select datediff(dd,'1935-12-07','2010-03-02')/365     ---> 74
select datediff(yy,'1935-12-07','2010-03-02')         ---> 75 
```

如果您可以观察到，如果我尝试使用 'dd' 进行 DATEDIFF，那么我会得到 74/74.28 的差异。但如果我将它与 'yy' 一起使用，我会得到 75 的差异。

为什么会这样？意味着为什么差值是 75，因为它几乎接近 74。

我需要这两种功能在不同的情况下。但由于它的行为不同，我面临着很多问题。

建议我解决这个问题。

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-10T05:03:44.067

第一种情况=您隐式转换为浮点数，显示正确的结果

第二种情况=您隐式转换为一个 int，它作为转换的一部分向下舍入（Floor 值）

第三种情况 = 你根本没有投射任何东西，并`DATEDIFF()`返回一个带符号的 int，它向上取整（上限值）

解决方案：随心所欲，但在整个代码中保持一致。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-10T05:03:57.737

该`datediff`函数检查*您指定的日期部分*的差异，因此说两个日期的年份部分的差异为 75 是正确的。

或者像 microsoft 的人们所说的那样，它计算跨越该日期部分的边界数。在您的示例中，两个日期之间有 75 年的界限。

看看[这个](http://msdn.microsoft.com/en-US/library/ms189794%28v=SQL.105%29.aspx)msdn 页面，它解释了它应该如何工作。

# c++ - 类和成员函数（初学者）

> ID：10083283
> 
> 赞同：0
> 
> 时间：2012-04-10T04:58:47.883
> 
> 标签：c++, class, object, member-functions

我目前正在阅读一本 c++ 书籍，我有几个问题。

1) 在这个例子中，void 只用于声明返回类型吗？

2) 如果 void 导致它不向调用函数返回数据，为什么它仍然显示消息“欢迎来到成绩册！”？

3）创建一个简单的函数而不是创建一个对象不是更容易吗？

```
#include <iostream>
using namespace std;

class GradeBook
{
public:
    void displayMessage()
    {
        cout << "Welcome to the Grade Book!" << endl;
    }
};

int main()
{
    GradeBook myGradeBook;
    myGradeBook.displayMessage();
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-10T05:00:30.037

1.  这是本例中的唯一用途。您还可以拥有指向 void ( `void *`) 的指针。
2.  您没有返回该消息。你正在打印它。在 C++ 中，方法和函数可能有副作用。一种可能的副作用是输出。
3.  是的，在这种情况下。然而，这并不是一个对象的好处的现实例子。为此，请参阅[如何向初学者描述面向对象编程？有一个很好的现实世界类比吗？](https://stackoverflow.com/questions/4804911/how-do-i-describe-object-oriented-programing-to-a-beginner-is-there-a-good-real)很多地方之间。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-10T05:02:42.550

> **`void`在这个例子中只用于声明一个返回类型？**

是的，它表示`displayMessage()`不会向调用者返回任何内容。
它也可以用作`void *`，即：可以指向任何东西的通用指针，但在您的示例中没有以这种方式使用。

> **如果 void 导致它不向调用函数返回数据，为什么它仍然显示消息“欢迎使用成绩簿！”？**

消息不会返回给函数的调用者，当控件在函数中并执行该特定语句时，消息会被定向到标准输出。

> **创建一个简单的函数而不是创建一个对象不是更容易吗？**

这不是一件容易的事。这更多是面向对象设计原则的问题。
拥有类和成员函数的目的是将数据和在单个单元中对该数据进行操作的方法绑定在一起。您可能想拿起一本好书并阅读**Encapsulation & Abstraction**。

**[The Definitive C++ Book Guide and List](https://stackoverflow.com/questions/388242/the-definitive-c-book-guide-and-list)**

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-10T05:06:03.467

1.  在您的情况下，函数“displayMeassage”没有返回字符串，它只是打印您的消息。

2.  返回意味着，假设一个例子：

    A级

    {

    ```
     int num=0;

      int getNum()

      {

         return num;

      } 
    ```

    };

    无效的主要（）

    {

    ```
     A a;

       int no=a.getNum();

       cout<<"no : "<<no; 
    ```

    }

    在上面的例子中，getNum 方法返回的是返回被
    调用的数字。

3.  无论您以什么为例，都不好理解回报的概念。

谢谢

# coldfusion - 使用 cfhttp 检索公共电子表格文档

> ID：10083286
> 
> 赞同：2
> 
> 时间：2012-04-10T04:59:08.533
> 
> 标签：coldfusion, google-docs, google-docs-api

我有一个应用程序，它当前检索 excel 格式的谷歌电子表格并将 xls 文件保存到文件系统。它在 riaforge 上使用 ColdFusion google Api 包装器，[http:](http://cfgoogle.riaforge.org/) //cfgoogle.riaforge.org/ 。

包装器使用 google 帐户进行身份验证，然后使用 cfhttp 以二进制格式下载文件。检索文档的 url 如下所示。 [https://spreadsheets.google.com/feeds/download/spreadsheets/Export?key=#urlEncodedFormat(arguments.id)#&fmcmd=#spreadSheetFormat(arguments.format)#](https://spreadsheets.google.com/feeds/download/spreadsheets/Export?key=#urlEncodedFormat(arguments.id)#&fmcmd=#spreadSheetFormat(arguments.format)#)

我想更改应用程序的行为，以便它直接从公开共享的文档 url 下载文档，但是如果我使用公共文档 url，我最终会得到一个 xls 文件，告诉我我的浏览器不符合最低要求要求，所以我正在接受基于网络的视图。如果我使用 google docs api 包装器使用的相同 url 格式，那么即使我传递了公共文档的 id，我也需要进行身份验证。

我已经搜索了 Google api 文档，但我一直无法找到正确的 url 格式来请求公共文档，以便我可以使用 cfhttp 直接下载二进制格式的电子表格？我需要下载 xls 格式的公共电子表格而不使用 cffhttp 进行身份验证的格式是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-13T04:41:34.983

我最终不得不在 riaforge 上使用 Ray 的 Google API cfc 进行身份验证。使用我自己的帐户进行身份验证后，我可以将公共电子表格的 ID 传递给 google cfc 的下载功能，并且可以将电子表格下载为 xls 文件。我无法找到一种不经过身份验证就可以下载它的方法，但是这种方法将使最终用户不必使用他们的帐户进行身份验证。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-10T15:50:40.827

Google 很可能会读取请求的“user_agent”变量。在 CF 中，默认情况下这个变量是带有 Coldfusion 或 java 的。尝试将“useragent”属性添加到 cfhttp 请求并使用常见的东西 - 例如“Mozilla/5.0 (Windows NT 6.1; WOW64)”。

# jquery - 如何在 jQuery Mobile 中选择所有列表图标？

> ID：10083288
> 
> 赞同：0
> 
> 时间：2012-04-10T04:59:24.940
> 
> 标签：jquery, jquery-mobile

选择图标后，我想删除当前图标类并添加删除图标

[http://jsfiddle.net/4Bgx7/383/](http://jsfiddle.net/4Bgx7/383/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-10T05:03:12.073

你需要 do `removeClass`() 而不是使用`addClass()`will do 来完成这个任务。

此处 removeClass 删除您当前的类并 addClass 添加一个应用删除图标的类。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-10T08:27:40.977

你可以设置 data-icon=delete

```
<li data-icon="delete"><a href="#">Delete</a></li> 
```

# python - 在 Python 中加密数据 -

> ID：10083291
> 
> 赞同：1
> 
> 时间：2012-04-10T05:00:05.387
> 
> 标签：python, encryption, pycrypto

我正在编写一个客户端 - 服务器模型（客户端是服务器上的一个脚本，它收集数据并通过 REST 将其发送到服务器）并且想要加密发送的数据。

目前我有一个生成随机密钥的函数，它从特定时区添加时间 - IP-HOSTNAME-YEAR-MONTH-DAY-HOUR-(MINUTE/2)

密钥的每个部分通过 SHA256 运行 3,000 - 10,000 次，最后生成 128 位密钥。脚本总共需要大约 0.8 - 1 秒才能完成。

数据通过 AES 加密，使用部分 128 位密钥作为密钥和 iv。

服务器脚本，侦听任何连接，验证是否列出了 IP 地址，然后继续解密数据（使用相同的方法生成密钥和 iv ）

我的问题是： - 我在重新发明轮子吗？- 是否有更好的做法来生成用于数据加密的动态、限时密钥？

我的目标是拥有一个限制为 60-120 秒的密钥，然后将其丢弃，使用多个周期来生成密钥（感谢阅读 Truecrypt 的 Python 方式），因此如果捕获到任何数据，它就不会被解密“容易地” 。此外，服务器模型将有一个 SSL 证书，它将用于加密加密。

我正在考虑为每个客户端脚本（生成 RSA）提供一个静态密钥，用于 AES 加密。

感谢您的诚实回答和任何改进这一点的新想法。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-10T05:45:48.753

是的，不要！密码技术需要数年的时间来开发和测试是有原因的，它们极难做到正确。听起来您可能想看看使用 RSA 或其他一些 PKI 基础设施。如果我是你，我会研究 PyCrypto [https://www.dlitz.net/software/pycrypto/](https://www.dlitz.net/software/pycrypto/)。不管怎样，不要实现你自己的制图系统，它会被破坏和不安全！

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-10T07:16:28.680

使用最简单的 SSL/TLS（没有 PKI）作为 REST 的传输保护可能是最有效的方法来让轮子第一次就正确。

除此之外，您应该澄清一些主题。例如：

1.  *客户端不被可能冒充服务器的攻击者欺骗是否重要？*如果是，那么您必须正确设置 PKI，以便客户端可以使用证书对服务器进行身份验证。或者，您可以使用 TLS-SRP。
2.  *服务器不被可能冒充真实用户的攻击者欺骗是否重要？*如果是，那么您必须设置一个身份验证方案：例如 HTTP Digest、SSL 客户端证书、TLS-SRP 等。
3.  *客户端或服务器的妥协不会危及先前会话中交换的数据是否重要？*如果是，那么您必须将密码套件限制为提供完美前向保密 (DHE) 的密码。

只有当您在设置 SSL 时遇到问题时，您才应该考虑使用您自己的协议。

# iphone - Objective-c：AppDelegate NSString

> ID：10083292
> 
> 赞同：1
> 
> 时间：2012-04-10T05:00:22.627
> 
> 标签：iphone, objective-c, ios, cocoa

我有一个 NSString 作为我的 appdelegate 中的实例变量，如下所示：

分布式LCAAppDelegate.h：

```
@class distributedLCAViewController;

@interface distributedLCAAppDelegate : NSObject <UIApplicationDelegate> {
UIWindow *window;
distributedLCAViewController *viewController;
NSString *token;
}

@property (nonatomic, retain) IBOutlet UIWindow *window;
@property (nonatomic, retain) IBOutlet distributedLCAViewController *viewController;
@property (nonatomic, copy) NSString *token;

@end 
```

来自distributedLCAAppDelegate.m 的部分：

```
@implementation distributedLCAAppDelegate

@synthesize window;
@synthesize viewController;
@synthesize token;

- (void)application:(UIApplication *)app didRegisterForRemoteNotificationsWithDeviceToken:(NSData *)deviceToken 
{ 
token = [NSString stringWithFormat:@"%@",deviceToken];
token = [token stringByReplacingOccurrencesOfString:@" " withString:@""];
token = [token substringWithRange:NSMakeRange(1, [token length]-2)];
} 
```

我需要能够在视图控制器中使用这个令牌变量。目前这就是我所拥有的：

DistributedLCAViewController.m 中的部分：

```
- (IBAction)switchWasActivated:(id)sender
{
    NSString *token2 = [[[distributedLCAAppDelegate alloc] token] autorelease];
} 
```

但是，token2 =“无效的 cfstringref”。

我最初尝试声明一个名为 getToken 的公共方法，它只返回令牌。但在那种情况下我也遇到了同样的问题。

任何帮助，将不胜感激！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-10T05:05:56.103

**试试这个：（**更新）（固定）

```
NSString* token2 = ((distributedLCAAppDelegate*)[[UIApplication sharedApplication] delegate]).token; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-10T05:06:58.520

尝试以下 -

```
- (IBAction)switchWasActivated:(id)sender {
    distributedLCAAppDelegate *delegate = (distributedLCAAppDelegate *) [[UIApplication sharedApplication] delegate];
    NSString *token2 = delegate.token; 
```

}

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-10T05:16:45.817

```
distributedLCAAppDelegate* delegateobj = [(distributedLCAAppDelegate*)[UIApplication sharedApplication] delegate];
NSString *token_ = delegateobj.token;
NSLog(@"token_ :%@",token_); 
```

试试这个，它应该工作

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-10T06:12:47.707

如果其委托出口设置为您的分布式LCAAppDelegate，您能否检查“MainWindow.xib”中的文件所有者？只需按住 Ctrl 键单击 Interface Builder 中的黄色框图标。

# ios - iOS 动画徽标——低内存替代品

> ID：10083295
> 
> 赞同：0
> 
> 时间：2012-04-10T05:00:32.367
> 
> 标签：ios, animation, memory-management

我有一个三秒的 PNG 序列（徽标动画），我想在我的 iOS 应用程序启动后立即显示。由于这是应用程序中唯一的动画序列，我不想使用 Cocos2D。

但是使用 UIImageView`animationImages`时，应用程序在 iPod Touch 设备上会耗尽内存。

是否有更多的记忆意识/有效的方式来显示这个动画？也许是一个不涉及 Cocos2D 的精灵表类？或者是其他东西？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-10T05:50:04.520

如果这是一个动画闪屏或类似画面，请注意 HIG 不赞成这种行为（至少在全屏游戏之外）。

如果您没有被这些论点吓倒（或制作游戏），您可能会考虑将动画保存为 MPEG-4 视频并`MPMoviePlayerController`用于呈现它。使用一个好的压缩器，应该可以将大小和内存使用量降低很多，并且仍然具有高质量的徽标动画。

我怀疑你会以任何其他方式找到很大的改进——例如，精灵表仍然会做与 PNG 序列相同的工作。问题是，对于大多数动画来说，很多像素在帧与帧之间都没有被触及……如果你只是将它呈现为一系列图像，那么你会在时间上重复的像素上浪费大量时间和空间。这就是我们有视频编解码器的原因。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-10T05:07:44.610

您可以根据需要尝试手动加载/卸载 png 图像。不知道你的帧率要求是多少。另外，考虑一个质量不错的 jpg 或动画 gif。而且您始终可以使图像更小，这样它就不会占据整个屏幕。只是一些想法。

# javascript - Javascript数字如何存储在内存中

> ID：10083297
> 
> 赞同：1
> 
> 时间：2012-04-10T05:00:47.967
> 
> 标签：javascript, numbers

首先，我们看下面的代码：

```
result = 0.1 + 0.2;     
alert(result===0.3);// false
result=100.1+100.2;
alert(result===200.3);//true 
```

我相信`0.1`和`100.1`(100+0.1) 类似地存储在内存中，因为小数点`.1`在它们两者中。

那么，为什么加法的结果不同呢？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-10T05:02:36.653

它们在内存中的存储方式不同：http: [//steve.hollasch.net/cgindex/coding/ieeefloat.html](http://steve.hollasch.net/cgindex/coding/ieeefloat.html)

0.1 二进制：

0.1 * 2 = **0** + 0.2
0.2 * 2 = **0** + 0.4
0.4 * 2 = **0** + 0.8
0.8 * 2 = **1** + 0.6
0.6 * 2 = **1** + 0.2
0.2 * 2 = **0** + 0.4
0.4 * 2 = **0** + 0.8
0.8 * 2 = **1** + 0.6
0.6 * 2 = **1** + 0.2

如您所见，在 0.2 重复后，整个模式 (0011) 将继续重复，`0.1`因此`0.0001100110011001100110011..`. 永远重复

为了在 23 位尾数中表示这一点，我们必须将其左移直到小数点前有 1（在将位左移 4 位并删除小数点前的 1 之后`100110011...`），然后在第 23 位四舍五入，并且我们得到：`10011001100110011001101`。

因为我们移动了 4 个位置，所以我们的指数是`127-4`（127 是 32 位偏差）。8 位二进制中的 123 是`01111011`，剩下的就是符号位，我们知道它是 0，因为 0.1 是一个正数。所以 32 位二进制数的每个分量是：

符号：0
指数：01111011
尾数：10011001100110011001101

0.1 表示为`00111101110011001100110011001101`浮点数。

转换回来，我们必须将其分解，然后将指数转换回十进制整数 (123)。我们将尾数（前面假设为 1）向右移动（127 - 123 = 4）次并得到 :`0.00011001100110011001101101`然后我们将其转换回十进制：

```
0*1/2 + 0*1/4 + 0*1/8 + 1/16 + 1/32 + 0*1/64 + 0*1/128 + 1/256 + 1/512 + 
0 + 1/4096 + 1/8192 + 0 + 1/65536 + 1/131072 + 0 + 1/1048576 + 1/2097152 + 
0 + 1/16777216 + 1/33554432 + 0 + 1/134217728 
```

如果你做数学计算，你会得到更接近 0.100000001 的值，而不是 0.1。那是因为我们在第 23 位四舍五入。0.1 不能以二进制存储，因为它永远重复，所以在第 23 位之后我们有不准确之处。当你对一个数字进行算术运算时，这些不准确的地方就会出现，而且误差会变得更大。

如果你对 100.1 做同样的事情，你会得到：

1100100.0001100110011001100... 永远重复：

右移 6 次，去掉小数点前的 1 到第 23 位：10010000011001100110011

指数为 127+6 = 133 (1000 0101)

符号再次为 0，因此您有：

```
01000010110010000011001100110011 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-10T05:59:16.407

这是 IEEE 754[^(维基百科)](http://en.wikipedia.org/wiki/IEEE_754-2008)的实现结果。没有办法呈现每个浮点数，并且它存在于遵循 IEEE 754 标准**的每种语言中。**此代码段在任何语言中都将具有相同的结果：

```
var sum = 0.0;
for (var i = 0; i < 10; i++ )
{
    sum += 0.1;
}
// sum = 0.9999999999999999 
```

0.1 正是没有确切表示[^(wikipedia)](http://en.wikipedia.org/wiki/Floating_point#Some_other_computer_representations_for_non-integral_numbers)的数字之一。

C# 有一个特殊的 Decimal [^(MSDN)](http://msdn.microsoft.com/en-us/library/364x0z75%28v=vs.110%29.aspx)类型，适用于金融和货币计算，内部是一个结构。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-10T05:20:42.227

除了 Paul PRO 的回答

这不仅仅是 javascript 的问题。在 C# 中 double 表现出相同的行为

```
double a = 0.1, b = 0.2;
Console.WriteLine((a + b)==0.3); //Prints False 
```

因此，建议在 c# 中使用小数来提高精度。对于 javascript，您应该使用 .toFixed 来处理货币操作。有关 javascript 中数字的更多信息，请查看[http://www.hunlock.com/blogs/The_Complete_Javascript_Number_Reference#quickIDX0](http://www.hunlock.com/blogs/The_Complete_Javascript_Number_Reference#quickIDX0)

# c# - 检测点击了前台窗口的哪个子窗口？

> ID：10083299
> 
> 赞同：3
> 
> 时间：2012-04-10T05:00:49.407
> 
> 标签：c#, winapi, childwindow

我的任务是找到前景窗口（使用 GetForegroundWindow API 完成），然后我必须预先填充一个列表，其中包含前景窗口的所有子窗口（使用 EnumChildWindows API 完成）。现在我需要检测鼠标光标在哪个子窗口上，即我需要找出哪个子窗口（可能是前台窗口中的按钮或文本框）处于活动状态。是否有一些 API 可以用来获取已单击的 ChildWindows 的句柄？即使我只得到焦点所在的 ChildWindow（活动前景窗口的）的名称，对我来说也足够了。提前致谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-11T12:06:08.810

```
 InPtr hwnd = GetForegroundWindow();

      public static void GetAppActiveWindow(IntPtr hwnd)
    {
        uint remoteThreadId = GetWindowThreadProcessId(hwnd, IntPtr.Zero);
        uint currentThreadId = GetCurrentThreadId();
        //AttachTrheadInput is needed so we can get the handle of a focused window in another app
        AttachThreadInput(remoteThreadId, currentThreadId, true);
        //Get the handle of a focused window
        IntPtr focussed = GetFocus();

        StringBuilder activechild = new StringBuilder(256);
        GetWindowText(focussed, activechild, 256);
        string textchld = activechild.ToString();
        if (textchld.Length > 0)
        {
            Console.WriteLine("The active Child window is " + textchld + " .");

        }
        //Now detach since we got the focused handle
        AttachThreadInput(remoteThreadId, currentThreadId, false);
    } 
```

这就是最终解决问题的方法:)

# c# - 为什么我的选中列表框排序代码不起作用？

> ID：10083300
> 
> 赞同：0
> 
> 时间：2012-04-10T05:00:51.440
> 
> 标签：c#, arrays, winforms, debugging, checkedlistbox

我有一个选中的列表框，我正在为两个按钮编写代码，一个向上移动所有选定的项目，一个向下移动每个项目。向上移动的一个工作，但我不能让另一个工作：

```
//Move up
        private void button2_Click(object sender, EventArgs e)
        {
            for (int i = 1; i < checkedListBox1.Items.Count; i++ ) {
                if (checkedListBox1.GetItemChecked(i)) {
                    checkedListBox1.Items.Insert(i - 1, checkedListBox1.Items[i]);
                    checkedListBox1.SetItemChecked(i - 1, true);
                    checkedListBox1.Items.RemoveAt(i + 1);
                }
            }
        }
//Move Down
        private void button3_Click(object sender, EventArgs e)
        {
            for (int i = checkedListBox1.Items.Count - 2; i >= 0; i--)
            {
                if (checkedListBox1.GetItemChecked(i))
                {
                    checkedListBox1.Items.Insert(i + 1, checkedListBox1.Items[i]);
                    checkedListBox1.SetItemChecked(i + 1, true);
                    checkedListBox1.Items.RemoveAt(i);
                }
            }
        } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-10T05:04:41.303

我认为您在第二种方法中需要这个：

```
checkedListBox1.Items.Insert(i + 2, checkedListBox1.Items[i]);
checkedListBox1.SetItemChecked(i + 2, true); 
```

您当前的方法是在以下元素之前插入当前元素的副本，这基本上只是将其放在同一位置。

# android - Android：构建路径中的错误

> ID：10083301
> 
> 赞同：20
> 
> 时间：2012-04-10T05:00:55.567
> 
> 标签：android, eclipse, adt

当我更新 eclipse 软件并运行应用程序时，错误显示如下：

> “容器‘Android Dependencies’引用了不存在的库‘C:\Project\android-sdk-windows\tools\support\annotations.jar’。

请帮助我清除此错误并运行应用程序。

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2012-04-22T07:40:59.240

您需要做的就是通过 android sdk manager 更新您的 sdk

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-09-13T10:34:02.640

更新 SDK 管理器后，转到*Eclipse* -> *Help* -> *Check update* -> *Install*。这将更新对应于 SDK 更新的 ADT。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-06-05T09:07:42.427

我遇到了同样的问题，我尝试了建议的解决方案，但什么也没发生，然后我关闭了工作区中所有打开的项目并再次重新打开它们。然后所有的消息都消失了。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-07-08T14:57:40.820

我遇到了同样的问题，因为我更新了 ADT 但没有更新 SDK 管理器。- 更新 SDK 管理器， - 然后关闭所有内容并重新启动 Eclipse， - 构建干净的 Android 项目，这应该可以解决您的问题。

# .net - 防止 Windows 应用程序 (VB.Net) 终止

> ID：10083302
> 
> 赞同：1
> 
> 时间：2012-04-10T05:01:03.103
> 
> 标签：.net, vb.net, windows-7

我需要阻止或限制终止 VB.Net 应用程序。我对管理员杀死应用程序没有问题，但对用户没有问题。我一直无法为此提出解决方案。甚至有没有办法设置本地策略以防止非管理员终止？

注意：我以前看过这个问题，人们问“为什么”，假设这是出于恶意目的。这是一个 GUI 应用程序，必须根据策略保留在用户窗口的顶部。

更新：我知道这是可能的......我已经看到应用程序，当我尝试通过任务管理器终止它们时，我得到一个权限被拒绝。这就是我正在尝试做的...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-10T05:16:07.053

If you handle formclosing event and say e.cancel if it is a normal user then it will be handled in your boundary. But you cannot enforce policy until and unless there is physical restriction applies in windows. I feel if you can remove the .NET keyword and put the question to IT specific guys it will help. In .NET you can do other than what I have explained in the initial statement.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-10T08:07:37.377

当用户点击角落中的红色 X 时，以下代码将阻止您的表单关闭（因此应该停止您的应用程序关闭）：

```
Private Sub Form1_FormClosing(sender As Object, e As System.Windows.Forms.FormClosingEventArgs) Handles Me.FormClosing
    If e.CloseReason = CloseReason.UserClosing Then e.Cancel = True
End Sub 
```

您无法阻止某人运行任务管理器并终止该进程，但您可以使用[组策略阻止他们运行任务管理器](http://en.wikipedia.org/wiki/Group_Policy)

# extjs - 未捕获的类型错误：无法调用未定义的方法“格式”

> ID：10083306
> 
> 赞同：0
> 
> 时间：2012-04-10T05:01:17.483
> 
> 标签：extjs, extjs3

我正在使用 extjs 3.4 版，但在这一行中出现一个错误：

```
var query = new RegExp(Ext.String.format('field1', e.query.replace(/\?/g, '[A-Za-z0-9]'))); 
like--Uncaught    TypeError: Cannot call method 'format' of undefined 
```

我添加了这样的听众，如果有任何问题，请告诉我。

```
this.findById('field1').addListener({
    beforequery: function (e) {
        if (e.query && e.query.indexOf('?') != -1) {
            e.cancel = true;
            var query = new RegExp(Ext.String.format('field1', e.query.replace(/\?/g, '[A-Za-z0-9]')));
            this.expand();
            this.store.clearFilter(true);
            this.store.filter(this.displayField, query);
        }
    }
}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-10T19:36:53.240

以防万一您想知道为什么它使用 String 而不是 Ext.String 是因为 Ext 正在将方法添加到 JavaScript String 对象。

[http://docs.sencha.com/ext-js/3-4/#!/api/String](http://docs.sencha.com/ext-js/3-4/#!/api/String)

> 这些函数可用作 JavaScript String 对象的静态方法。

因此，Ext 定义的所有其他 String 函数（切换、修剪等）也将在 String 对象上而不是 Ext.String 上。

希望这有助于为什么它不工作和未来。

# php - PHP 通过控制器在服务器上创建文件

> ID：10083308
> 
> 赞同：0
> 
> 时间：2012-04-10T05:01:39.623
> 
> 标签：php, codeigniter, mkdir

我有以下代码，但它似乎根本没有创建文件夹。

我应该使用`is_dir`而不是`file_exists`吗？

```
 $location = $_SERVER['DOCUMENT_ROOT'].'/_assets/quote/uploads/';

        $folderName = $this->quote->getCompanyDetails()->companyName;
        $folderName = str_replace(" ", "_", $folderName);
        $folderName = strtolower($folderName);

        if(!file_exists($folderName))
        {   
            mkdir($location.$folderName, 0777);

        }else{ 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-10T05:08:28.993

利用

```
if (!file_exists($dir) && !is_dir($dir)) {
    mkdir($location.$folderName, 0777);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-10T05:17:55.913

is_dir 函数仅检测定义的路径是否为文件夹。可能您没有足够的权限来创建文件夹。尝试使用

```
<?php
if (is_writable($dir)) {
echo "Path is writable";
}
?> 
```

检测你的路径是否真的是可写的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-10T05:17:59.397

好像是权限问题。检查您在使用 mkdir 的目录中是否具有写权限。

也使用

```
echo $location.$folderName ; 
```

检查它是否在正确的地方发生。

希望这有帮助。

# windows-phone-7 - 启动画面不来

> ID：10083310
> 
> 赞同：0
> 
> 时间：2012-04-10T05:02:00.497
> 
> 标签：windows-phone-7

我正在 Windows 手机中编写一个以 Silverlight+XNA 模板开头的应用程序。我的项目根文件夹中有一个名为“Splashscreenimage.jpg”的图像。但是启动画面没有出现。可能是什么原因？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-10T07:26:31.597

您是否将此图像设置为构建操作属性中的内容？回想一下，尺寸应该是480X800

问候，

[更多信息](http://msdn.microsoft.com/en-us/library/ff769511%28v=vs.92%29.aspx)

约塞米格尔

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-10T10:40:24.427

尝试 splashscreenimage.jpg 并检查 Build Action

# javascript - 从生成的 HTML 将参数传递给 JavaScript 函数

> ID：10083314
> 
> 赞同：3
> 
> 时间：2012-04-10T05:02:28.887
> 
> 标签：javascript

我有一个 AJAX 程序，它从网站获取数据并将信息发布到 Facebook。我的问题很简单。我需要在回调函数中生成 HTML。这是一个按钮：

```
var city = "Beijing";
html+= "<td><input type=button value=FACEBOOK onclick=\"fb("+city+")\"></td>";
document.getElementById("myDiv").innerHTML = html; 
```

假设我有变量“city”，它具有一定的价值。通过生成上面的按钮，我无法将城市传递给函数 fb(city)。它甚至不会调用该函数。但是，如果我删除参数，它会起作用。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-10T05:05:24.463

```
var city = "Beijing";
html+= "<td><input type=button value=FACEBOOK onclick=\"fb('"+city+"')\"></td>";
document.getElementById("myDiv").innerHTML = html; 
```

你忘了单引号:)。

**NOT fb("+city+") 比生成 fb(Beijing)**

**但是 fb('"+city+"') 比生成 fb('Beijing')。**

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-10T05:10:50.157

当您处理函数时，由于城市将被替换为“北京”，因此将生成 html 片段，如下所示：

```
<td><input type=button value=FACEBOOK onclick="fb(Beijing)"></td> 
```

正如你在这里看到的，北京周围没有“”。所以它将被视为一个变量并且实际上并不存在。

最简单的解决方法可能是：

```
html+= "<td><input type=button value=FACEBOOK onclick=\"fb('" + city + "')\"></td>"; 
```

实际上，还有许多其他更好的方法可以实现您的目的。您应该从 javascript 代码中绑定“click”事件，而不是在 html 中内联添加它。通过从 javascript 函数绑定它，实际上您可以将值嵌入到闭包中。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-10T05:10:03.290

字符串技术中的字符串中的字符串是您最终会超越的东西。更好的技术是使用 onclick 属性来分配点击事件：

```
var city = "Beijing";
var td = document.createElement("td");
var input = document.createElement("input");
input.setAttribute("type","button");
input.setAttribute("value","FACEBOOK");
input.onclick = function() {
    fb(city);
};

td.appendChild(input);
document.getElementById("myDiv").appendChild(td); 
```

这不仅消除了字符串中字符串的不可读性，而且还确保了您添加到 #myDiv 元素的 DOM 节点将被 DOM 中的 JavaScript 识别。某些浏览器无法以编程方式识别使用 innerHTML 添加的 DOM 元素。我在 Firefox 和基于 XUL 的浏览器中体验过这种行为。

顺便说一句，jQuery 可以更流畅地执行此操作并保证跨浏览器兼容性，但这是`jQuery`标签的问题。

# facebook - 脸书 OpenID

> ID：10083319
> 
> 赞同：0
> 
> 时间：2012-04-10T05:03:06.733
> 
> 标签：facebook, openid, facebook-c#-sdk, facebook-login

通过单击我页面的按钮，应重定向到 facebook 登录页面。我会给我的用户名和密码登录，它应该在认证后返回我的主页。我搜索了很多来做到这一点，无法得到任何改进。请帮助我到达目的地。

我的代码：

```
DotNetOpenAuth.OpenId.RelyingParty;
using DotNetOpenAuth.OpenId.Extensions.SimpleRegistration; 
protected void OpenLogin_Click(object src, CommandEventArgs e) { 
OpenIdTextBox1.Text = e.CommandArgument.ToString();
OpenIdTextBox1.LogOn();
} 
protected void OpenIdTextBox1_LoggedIn(object sender, OpenIdEventArgs e){
var sreg = e.Response.GetExtension<ClaimsResponse>();
if (sreg != null){
var email = sreg.Email;var postalCode = sreg.PostalCode;
}
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-10T07:18:30.410

请参阅此程序链接。我无法配置您的问题。

1.  [facebook c# sdk 入门](https://stackoverflow.com/questions/8720023/facebook-c-sharp-sdk-getting-started)
2.  [逐步开始使用面向初学者的 facebook c# SDK](https://stackoverflow.com/questions/6136693/step-by-step-getting-start-with-facebook-c-sharp-sdk-for-beginners)
3.  [http://multitiered.wordpress.com/2010/08/05/getting-started-with-the-facebook-c-sharp-sdk/](http://multitiered.wordpress.com/2010/08/05/getting-started-with-the-facebook-c-sharp-sdk/)
4.  [集成 facebook 登录和 facebook c# SDK - 不是 facebook 应用程序](https://stackoverflow.com/questions/5047743/integrating-facebook-login-and-facebook-c-sharp-sdk-not-a-facebook-app)
5.  [http://weblogs.asp.net/kon/archive/2010/11/15/getting-started-with-facebook-c-sdk.aspx](http://weblogs.asp.net/kon/archive/2010/11/15/getting-started-with-facebook-c-sdk.aspx)

如果您没有收到任何内容，请评论您使用了哪个链接（您的程序）。

# 更新：

Facebook 不是 openid 提供商。您可以使用 facebook-connect 进行相同的操作。

请参阅以下链接：

1.  [Facebook 是 OpenID 提供商吗？](https://stackoverflow.com/questions/1827997/is-facebook-an-openid-provider)
2.  [facebook 是 openid 提供者吗？](https://stackoverflow.com/questions/6045296/is-facebook-an-openid-provider)
3.  [facebook的“openid”网址是什么？](https://stackoverflow.com/questions/2264266/what-is-the-openid-url-of-facebook)
4.  [带有openid的脸书](https://stackoverflow.com/questions/2593620/facebook-with-openid)

# ruby-on-rails - Rails 路线映射

> ID：10083325
> 
> 赞同：0
> 
> 时间：2012-04-10T05:04:07.850
> 
> 标签：ruby-on-rails, routes

我是一个 Rails 新手，我有一个控制器`resource_links`，我已经映射到`resources`：

```
resources :resources, :as => :resource_links, :controller => :resource_links 
```

这有效（基本上`/resources`作为`/resource_links`）。然而，试图去`/resources/tags`是行不通的。为了解决这个问题，我添加了更多映射：

```
 match 'resource_links/tag/:tag(.:format)' => 'resource_links#tag', :via => :get, :as => 'resource_links_tagged', :constraints => {:tag => /.*/}
  match 'resource_links/tags' => 'resource_links#tags', :via => :get, :as => 'resource_links_tags' 
```

有什么办法可以`/resources/tags`映射到`/resource_links/tag`吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-10T05:19:25.847

只需尝试：

```
 match 'resource/tag/:tag(.:format)' => 'resource_links#tag', :via => :get, :as => 'resource_links_tagged'
  match 'resource/tags' => 'resource_links#tags', :via => :get, :as => 'resource_links_tags' 
```

或使用 LIKE（更具可读性）：

```
 match 'resource/tag/:tag(.:format)', :controller => 'resource_links', :action => 'tag', :via => :get, :as => 'resource_links_tagged'
  match 'resource/tags', :controller => 'resource_links', :action => 'tags', :via => :get, :as => 'resource_links_tags' 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-10T05:24:52.070

是的，您可以通过这种方式扩展默认的 restful 路由

```
resources :resources, :as => :resource_links, :controller => :resource_links do
  collection do
    get :tags
    get 'tag/:tag', :action => :tag, :as => :tagged
  end
end 
```

接下来，查看输出`rake routes`以检查路由助手的命名方式。

```
 tags_resource_links GET    /resources/tags(.:format)     resource_links#tags
tagged_resource_links GET    /resources/tag/:tag(.:format) resource_links#tag
       resource_links GET    /resources(.:format)          resource_links#index
                      POST   /resources(.:format)          resource_links#create
    new_resource_link GET    /resources/new(.:format)      resource_links#new
   edit_resource_link GET    /resources/:id/edit(.:format) resource_links#edit
        resource_link GET    /resources/:id(.:format)      resource_links#show
                      PUT    /resources/:id(.:format)      resource_links#update
                      DELETE /resources/:id(.:format)      resource_links#destroy 
```

# java - Java Applet AccessControlException：访问被拒绝（SocketPermission）-我在哪里修复？

> ID：10083332
> 
> 赞同：0
> 
> 时间：2012-04-10T05:04:50.190
> 
> 标签：java, security, permissions, applet, accesscontrolexception

好的，所以我有一个小程序，我正试图嵌入到 HTML 页面中，它正在抛出：

```
AccessControlException: access denied (java.net.SocketPermission someTarget connect, resolve) 
```

这可以; 我知道解决这个问题的方法是：

```
grant {
   permission java.net.SocketPermission "someTarget", "connect, resolve";
}; 
```

或者

```
SocketPermission p1= new SocketPermission("someTarget", "connect,resolve"); 
```

我想知道的是：我需要这两件事中的哪一个，我应该把它放在我的代码中的什么地方？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-10T06:30:02.677

我建议连接回下载小程序的同一主机，这是 Java 安全管理器允许的。主机应该完全一样。编辑权限策略文件会让您无处可去，因为您必须在每台您希望运行小程序的计算机上执行此操作

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-10T05:22:17.520

最简单的解决方法是签署小程序。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-10T06:32:45.403

正如 EJP 所提到的，获得信任的方法是对代码进行数字签名。有关更多详细信息，请参阅[签署和验证 JAR 文件](http://docs.oracle.com/javase/tutorial/deployment/jar/signindex.html)。

将策略文件部署到最终用户机器上，以便从 Internet 上下载一个小程序是不切实际的。当涉及到一个由你控制的机器网络时，问题就变成了——为什么不直接使用 JWS 应用程序。？JWS 应用程序。仍然需要进行数字签名（或使用策略文件），但也更容易开发和部署。

请注意，“获得信任”不需要对代码进行任何更改。相反，代码需要由您签名，并在出现提示时得到最终用户的信任。唯一想到的“问题”是，如果使用 JS 调用 applet 方法，那么除非您对代码进行一些调整，否则它将变得不受信任。

# django - 为什么 Dajaxice 和 Dajax 使用 MEDIAL_URL？

> ID：10083334
> 
> 赞同：2
> 
> 时间：2012-04-10T05:05:10.853
> 
> 标签：django, django-staticfiles, django-media, dajaxice

在 Dajaxice 的[安装文档](http://docs.dajaxproject.com/dajaxice/installation.html)中，它说要设置`DAJAXICE_MEDIA_PREFIX`. `settings.py`稍后该值在`urls.py`.

在 Dajax 的[安装文档](https://github.com/jorgebastida/django-dajax/wiki/installation)（已有 2 年历史）中，它说要像这样加载*静态*文件：

```
<script src="{{ MEDIA_URL }}/js/prototype.dajax.core.js.js" type="text/javascript" charset="utf-8"></script> 
```

为什么使用它`MEDIA_URL`？它不应该使用`STATIC_URL`since `js`,`css`和`img`files 应该是`STATIC`吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-10T05:47:48.160

你是对的，我相信他们的文档对于 Django > 1.3 已经过时了。只需替换`MEDIA_URL`为`STATIC_URL`您已经提到的，例如，

```
 <script type='text/javascript' src='{{STATIC_URL}}js/dajaxice.core.js' 
  charset='utf-8'></script> 
```

# java - 区分水陆的算法

> ID：10083343
> 
> 赞同：2
> 
> 时间：2012-04-10T05:06:34.127
> 
> 标签：java, arrays, algorithm, terrain

我正在尝试提出一种算法来区分水和陆地。我有一个 2D 数组，它只包含 0（黑色方块）和 1（灰色方块），这会产生这个图像。我将其中一个水域涂成蓝色，这样你就可以看到应该是水的地方。水是大而圆形的区域。我将一些土地区域涂成绿色。所有的黑色直线都应该是陆地以及一些较小的圆形。

现在，所有的黑色区域都表示为 0，所有的灰色区域都表示为 1。所以在图片中，绿色和蓝色的点都表示为同一个东西。我需要将一些黑色区域（水）表示为 2。有什么好方法可以做到这一点？到目前为止，我想出的最好的办法是计算每个黑点的面积，并且只允许高于某个阈值的区域是水。我认为有更好的方法，我想知道你们的想法。

![在此处输入图像描述](../Images/5d8e0d8c3238b189c98264140cec37e4.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-10T06:47:00.520

也许将面积与边缘的长度进行比较，这可以衡量圆度，因为完美的圆将具有最高的面积与边缘的比率，而街道（我假设它们是街道）的比率很小。

也许这两项措施也是门槛。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-10T07:01:06.270

通过结合前两个建议，我能够找到解决方案。我首先寻找被任意数量的水瓦（即每个方向 4 个）包围的水瓦，然后使用洪水填充算法将整个水体设置为实际上是水。这是结果的图片。我还添加了一条海岸线以供外观。如您所见，较小的圆形物体仍然是陆地，这正是我想要的。 ![在此处输入图像描述](../Images/fa9175317688a0ee56faec9958c9ffc7.png)

# ajax - 如何简单地将动画 GIF 转换为画布？

> ID：10083344
> 
> 赞同：2
> 
> 时间：2012-04-10T05:06:37.957
> 
> 标签：ajax, animation, canvas, gif, loader

我的 webkit 浏览器有问题 - 它们不会在[Preloaders.net](http://preloaders.net)上显示生成动画的预览。我听说过canvas库，通过网络搜索，但不太明白我是否可以简单地将动画GIF转换为canvas，以便正确显示。有谁知道我如何获取下载的动画 GIF 图像并使画布显示它而不会丢失参数（动画速度、透明度等）？

提前致谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-10T11:31:28.867

我认为没有简单的方法可以做到这一点。您需要获取 GIF 的每张图片，然后将其绘制到画布上。我推荐这两个链接 

[http://blog.somepixels.net/2010/01/gif2tileset-extract-gif-frames-into-a-tile-set/](http://blog.somepixels.net/2010/01/gif2tileset-extract-gif-frames-into-a-tile-set/)（代码在github上）

[http://www.brighthub.com/internet/web-development/articles/40515.aspx](http://www.brighthub.com/internet/web-development/articles/40515.aspx)

祝你好运

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-04-10T05:50:10.717

您不能在画布上显示 GIF 图像。

# ios - UITapGestureRecognizer 在缩放 UIView 后识别点击

> ID：10083347
> 
> 赞同：0
> 
> 时间：2012-04-10T05:07:02.887
> 
> 标签：ios, uigesturerecognizer

我有一个`UIView`在点击它后缩放到 4 倍的。它工作正常。在下一次点击时，我想将其恢复为原始大小。问题是它只`UIView`在缩放之前的较小矩形中识别水龙头。我想在缩放的任何地方识别水龙头`UIView`。我怎样才能实现它？

```
//Tapping code
titleCard = [[UIView alloc] initWithFrame: myrect];
[self addSubview:titleCard];
[titleCard release];

UITapGestureRecognizer *tapRecognizer = [[UITapGestureRecognizer alloc] initWithTarget:self action:@selector(changeSize:)];
[tapRecognizer setNumberOfTouchesRequired:1];
[tapRecognizer setNumberOfTapsRequired:1];
[titleCard addGestureRecognizer:tapRecognizer];
[tapRecognizer release];

//Scaling code
CABasicAnimation *scale = [CABasicAnimation animationWithKeyPath:@"transform.scale"];
[scale setBeginTime:CACurrentMediaTime()+0.75];
[scale setDuration:0.5];
[scale setToValue: [NSNumber numberWithFloat:4.0f]];
[scale setRemovedOnCompletion:NO];
[scale setFillMode:kCAFillModeForwards]; 
```

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-16T04:53:59.350

我不确定什么在这里不起作用，我替换了下面的代码。

```
//Scaling code 
CABasicAnimation *scale = [CABasicAnimation animationWithKeyPath:@"transform.scale"]; 
[scale setBeginTime:CACurrentMediaTime()+0.75]; 
[scale setDuration:0.5]; 
[scale setToValue: [NSNumber numberWithFloat:4.0f]]; 
[scale setRemovedOnCompletion:NO]; 
[scale setFillMode:kCAFillModeForwards];
[titleCard.layer addAnimation:scale forKey:@"Scale"]; 
```

和

```
[UIView beginAnimations:@"Scale" context:nil];
[UIView setAnimationDelay:0.75];
[UIView setAnimationDuration:0.5];

[titleCard setTransform:CGAffineTransformMakeScale(4.0f, 4.0f);

[UIView commitAnimations]; 
```

现在，点击在整个区域都得到了识别`UIView`，而不仅仅是在缩放发生之前的较小的矩形。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-04-10T07:16:08.930

它总是将所有水龙头识别为相似的，您可以输入任何计数器值，例如

静态 NSInteger *counter=0;

现在如果 count 等于 0 则设为 1，如果 count 等于 1 则设为 0

现在根据计数值，您可以放大和缩小。

# python - Python Matplotlib pyplot 颜色条索引

> ID：10083353
> 
> 赞同：1
> 
> 时间：2012-04-10T05:07:56.153
> 
> 标签：python, matplotlib, indices, colorbar

我想绘制一个双变量正态分布，并一直在查看 Matplotlib 的 pylab 示例以获取指导。但是，由于某种原因，我无法重现其中一张图： http: [//matplotlib.sourceforge.net/examples/pylab_examples/contourf_log.html](http://matplotlib.sourceforge.net/examples/pylab_examples/contourf_log.html)

代码看起来很简单，但是当我复制/粘贴/运行它时，它会生成一个缺少大部分颜色条显示值的图。

![在此处输入图像描述](../Images/eb899077292e5d81844458e9577bdfb7.png)

此外，与示例相比，我的范围也更大，低至 1e-6（而不是 1e-5）。所以现在我想知道我的 matplotlib 包是否有问题并需要重新安装/更新。请让我知道错误可能在哪里。谢谢！

**附加信息**

Python 版本：'2.7.1 |EPD 7.0-2（32 位）| （r271:86832，2010 年 12 月 3 日，15:41:32）\n[GCC 4.0.1（Apple Inc. build 5488）]'

操作系统：Mac OS X：10.6.8

Matplotlib 版本：1.0.1

另外，我的 Matplotlib 后端设置为 TKAgg。

我对重新安装 Matplotlib 有点警惕，因为我目前主要在 FiPy 下运行 Python，并且需要很长时间才能让一切运行相对顺利。

# python - Python PDF缩略图预览生成

> ID：10083355
> 
> 赞同：11
> 
> 时间：2012-04-10T05:08:10.033
> 
> 标签：python, linux, macos, pdf-generation

我正在寻找生成 pdf 文件的 jpeg 缩略图的方法。我想在 Python 中做到这一点。是否有任何图书馆或任何人都可以指导我如何做到这一点？

谢谢

我正在开发 MacOS X Lion。但我想在 Ubuntu 或 CentOS 上运行它。

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-05-28T08:21:35.827

您可以使用**ImageMagick** {apt-get install imagemagick on Ubuntu}（它也有 Python lib **PythonMagick**）将 pdf 转换为图像

```
import subprocess
params = ['convert', 'pdf_file', 'thumb.jpg']
subprocess.check_call(params) 
```

您还可以提供图像必须从 pdf 中生成的参数，例如

```
params = ['convert', '-density 300 -resize 220x205', 'pdf_file', 'thumb.jpg']
subprocess.check_call(params) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-10T06:40:35.593

如果您只需要在语法上这样做，为什么不使用这样的[外部 CLI](http://www.softinterface.com/Convert-PDF-to-Image/Command-Line.ASP)工具：

```
os.system(r"ConvertPDFtoImage.EXE /S "C:\Input\Coffee.pdf" /T "C:\Output\Coffee.JPG" /C1  /1 * /5 200 /V") 
```

例如在窗口中

# php - PHP中的MySQL语法错误

> ID：10083360
> 
> 赞同：2
> 
> 时间：2012-04-10T05:08:36.803
> 
> 标签：php, mysql

```
$query = "INSERT INTO textbooks (uid, title, edition, author, isbn, condition, description, photo) VALUES (9, 'q', 'a', 'b', 'c', 'd', 'e', '$extension')";

$result = mysql_query($query) or die('Could not connect: ' . mysql_error());

Could not connect: You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'condition, description, photo) VALUES (9, 'q', 'a', 'b', 'c', 'd', 'e', '.jpg')' at line 1 
```

我一直收到 MySQL 语法错误，但我终其一生都无法弄清楚出了什么问题。我放入随机变量、字符串和 int 只是为了测试，但它不起作用。

> 1.  title, edition, author, isbn, condition, description, photo 都是 varchars
> 2.  uid 是一个整数
> 3.  描述是文字

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-10T05:12:50.247

`condition` is reserved word in mysql. Use `condition`

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-04-10T05:11:12.140

**condition** is a [MySQL reserved word](http://dev.mysql.com/doc/refman/5.0/en/reserved-words.html).

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-10T05:11:26.320

**Try this :**

```
$query = "INSERT INTO `textbooks` (`uid`, `title`, `edition`, `author`, `isbn`, `condition`, `description`, `photo`) VALUES (9, 'q', 'a', 'b', 'c', 'd', 'e', '$extension')"; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-10T05:12:52.720

The phrase "condition" is a reserved word in MySQL. Just change that to something else, or use "`condition`", and you should be good to go.

See here for more of the words: [http://dev.mysql.com/doc/mysqld-version-reference/en/mysqld-version-reference-reservedwords-5-5.html](http://dev.mysql.com/doc/mysqld-version-reference/en/mysqld-version-reference-reservedwords-5-5.html)

Also, is there a particular reason why you are specifying the UID manually? Auto incrementing is suitable for the majority of applications, so be sure you are utilizing that properly.

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-04-10T05:15:31.613

condition is mySql reserved keyword so you might not use this as field name, we can use but give `condition` like this in query.

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-04-10T05:17:21.073

Use another word instead of condition. Or use `condition`.

# python - 满足此标准的语言？

> ID：10083362
> 
> 赞同：2
> 
> 时间：2012-04-10T05:09:12.420
> 
> 标签：python, programming-languages, ocaml, interpreter, static-typing

我也做过一些 Java 编程和很少的 C 和 PHP 编程。最近我开始学习 Python，因为这门语言看起来很有趣。

但是关于 SO 的几篇文章似乎指出 Python 不适合并发编程。并且与那些具有编译器的语言相比也更慢。我也喜欢静态类型语言的优点，但 Python 是动态类型的。所以我的问题是，是否有一种语言满足以下标准。

1）有口译员（为了更快的开发）

2）有一个编译器（因为编译后的代码会运行得更快）

3）具有OO能力

4) 静态类型

我遇到了满足上述标准的 OCaml。但是 SO 上的帖子让我相信 OCaml 不适合并发编程。所以第五个标准是

5) 适合并发编程。

PS :- 我不是编程语言方面的专家，所以如果我的上述任何观察结果有误，请多多包涵。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-10T19:49:38.327

是的，OCaml 适合并发编程。它确实有一个`Thread`模块，允许您像在 Java 中那样编写网络应用程序。

请注意，它目前不支持真正的并行性（您不会有两个线程并行运行 OCaml 代码），但这并不重要，因为 OCaml 比许多其他语言快得多（例如，在 QuadCore 上，Language Shootout表明 OCaml 的性能甚至优于具有多核功能的 Haskell）。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-04-10T21:55:54.413

OCaml 适用于并发编程。标准库支持两种[并发](http://caml.inria.fr/pub/docs/manual-ocaml/manual038.html)模型：具有共享内存的线程（具有用于同步的[互斥锁](http://caml.inria.fr/pub/docs/manual-ocaml/libref/Mutex.html)和[条件变量](http://caml.inria.fr/pub/docs/manual-ocaml/libref/Condition.html)），以及基于[John Reppy 的 Concurrent ML 的](http://people.cs.uchicago.edu/~jhr/papers/cml.html)[事件](http://caml.inria.fr/pub/docs/manual-ocaml/libref/Event.html)。

OCaml 不包括对对称多处理器并行性的支持。运行时在单个处理器上执行。如果您想利用多核机器，您需要为每个处理器运行至少一个运行时，并在运行时之间使用消息传递。消息传递具有更高的延迟，但比共享内存更难正确传递。作为奖励，程序可以分布在网络上的多台机器上，而无需更改任何内容，除了运行时启动时相互查找的方式。

[JoCaml](http://jocaml.inria.fr/)是 OCaml 的扩展，具有更好的并发和分布模型（[连接演算](http://moscova.inria.fr/join/index.shtml)）。它不像官方 OCaml 发行版那样精致，但具有提供透明通信（在通道上发送消息而不必担心对方是否在同一运行时甚至在同一台机器上）和主要类型化框架进行通信的优势多个程序之间。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-04-12T08:20:24.437

根据您对*适合并发编程的*含义，我会推荐 OCaml 或 SML（标准 ML）：

1.  无需等待 I/O 的多个线程（网络/文件系统/..）；以 OCaml 为例——它的编译器生成非常快的代码并且有很多优秀的库
2.  如果并发意味着允许您在同一共享内存段内的一台机器上使用多个内核的本机线程；以 SML ( [polyml](http://www.polyml.org/) ) -- 它有一个不错的编译器并支持本机线程

请注意，无论使用哪种解决方案，您都将开始使用类型推断！一旦你习惯了，用任何语言编程都会让你哭泣！;)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-04-10T05:56:20.017

除了静态类型之外，Python 可以满足您的大部分需求，但是，由于它的设计，它具有称为 GIL 或 Global Interpreter Lock 的东西。这意味着 python 线程并没有真正单独执行。这可能解释了您谈到的关于 python 和并发编程的批评。但是，python 有一个`multiprocessing`模块，它提供了一个 api 来使用像线程这样的进程。同样，在不同 vm 下运行的 python 实现也没有 GIL，如果您已经熟悉 Java，也许您应该研究一下 Jython，它是一个在 JVM 上运行的 python 实现。

此外，Python 确实编译为字节码并不明显，但值得注意的是。它在第一次导入任何脚本时执行此操作，这意味着如果编辑并导入 python 源文件，它会编译一次，所有进一步尝试导入同一模块的尝试都使用字节编译版本，并且不会重新执行脚本。这种行为更像是 java 而不是 PHP，它在每次运行时都会重新解释源代码。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-04-10T06:26:25.173

我想介绍三种语言，它们可能在很大程度上满足您正在寻找的所有功能

1.  哈斯克尔

    *   有一个解释器（用于更快的开发）：Ghci 和 Hugs 解释器
    *   有一个编译器（因为编译后的代码会运行得更快）：The Glasgow Haskel Compiler
    *   具有 OO 能力：在一定程度上，请阅读文章[Haskell vs OOP](http://www.haskell.org/haskellwiki/Why_Haskell_matters#Haskell_vs_OOP)
    *   静态类型：是的，不需要类型声明
    *   适合并发编程。：[是的，当然](http://www.haskell.org/haskellwiki/GHC/Concurrency)
2.  二郎

    *   有解释器（为了更快的开发）：按照 Erlang 的工作方式，你可能没有 REPL，但解释器并不总是可以帮助更快的开发。但在某种程度上你可以`erl`用于目的。
    *   有编译器（因为编译后的代码会运行得更快）：是
    *   具有 OO 功能：不，但有可用的实验性扩展。但是如果你是在 Erlang 中开发，你最好坚持使用函数式编程
    *   静态类型：否
    *   适合并发编程：是的，这就是 Erlang 的著名之处。
3.  时髦的

    *   有口译员（为了更快的开发）：是的
    *   有编译器（因为编译后的代码会运行得更快）：是
    *   具有 OO 功能：是的，毕竟它基于 Java
    *   静态类型：否
    *   适合并发编程：是的，它继承自Java。

最后

*   Java 有一个叫做[BeanShell](http://www.beanshell.org/)的东西，它可以作为 Java 解释器工作，如果这就是阻止你使用 Java 的原因。

*   您已经在 Python 中进行了[扭曲](http://twistedmatrix.com/trac/)以向该语言添加并发性。

如果您想进一步研究，请使用以下 wiki 链接

*   [类型系统](http://en.wikipedia.org/wiki/Type_system)
*   [并发编程语言](http://en.wikipedia.org/wiki/Concurrent_computing#Concurrent_programming_languages)
*   [编程语言比较](http://en.wikipedia.org/wiki/Comparison_of_programming_languages)
*   [REPL](http://en.wikipedia.org/wiki/Read%E2%80%93eval%E2%80%93print_loop)

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-04-14T19:31:32.370

首先，考虑其他资源更为重要。

1）有一个解释器（为了更快的开发） - imo un true

2) 有编译器（因为编译后的代码会运行得更快）——真的吗？开发和服务器机器和部署上的不同拱门呢？

3) 有面向对象的能力——为什么？函数式语言更适合并行编程

4）静态类型 - 为什么？如果它在类型系统中具有“null”值，那么这与非静态类型的 imo 之间没有区别。

更好的标准是

1.  有多少优质的库和框架供您使用。
2.  您将如何部署此解决方案
3.  将新开发人员带入您的项目是多么容易
4.  社区的质量是什么:)

    *   Ocaml 是一门很棒的语言，使用 Lwt 库，即使只有一个进程很容易，您也可以编写异步代码。Ocaml 也非常快！这似乎是不错的解决方案，但您没有很多生产就绪的框架。

    *   Erlang 有库，它很酷，速度很快，似乎是满足您需求的最佳解决方案。

    *   Ruby 和 Ruby On Rails 不会让您轻松编写并发代码，但您将能够快速构建解决方案并开始从中赚钱 :) 我的意思是比其他语言快 10 倍，因为您有现成的块。在这种情况下，部署也是最简单的。

    *   Node.js 速度快，易于上手的语言 (javascript)，但处于开发的早期阶段，所以没有多少生产就绪的东西。

现在这就是我处理解决方案的方式：

在性能方面，你有一个交易

1.  记忆帽
2.  CPU 上限

    *   内存上限（ ram ）意味着用这种语言编写的解决方案将消耗越来越多的 ram，最终您将不得不快速购买新盒子，并且要扩展的盒子必须“胖”:)
    *   CPU 上限意味着该解决方案具有真正积极的垃圾收集器并分配大量经常清理的小对象。

在这种情况下，Node.js 和 Rails 是内存上限的，Rails 将在生产中消耗每个工人平均约 250mb 的内存。Ocaml / Oscigen ， Erlang / Webmachine 是 CPU 上限的，大多数函数式语言都会走这条路。

我使用 i5 CPU 在我的 macbook pro 上对 webmachine 进行了小测试[https://gist.github.com/1996858](https://gist.github.com/1996858) 这个资源每次都提供从 redis 中提取的简单 json 而没有缓存。

100 万个请求总计：连接 1000 个请求 1000000 个回复 1000000 个测试持续时间 463.413 s

```
Connection rate: 2.2 conn/s (463.4 ms/conn, <=1 concurrent connections)
Connection time [ms]: min 390.6 avg 463.4 max 3245.7 median 453.5 stddev 101.6
Connection time [ms]: connect 0.1
Connection length [replies/conn]: 1000.000

Request rate: 2157.9 req/s (0.5 ms/req) 
```

现在最好的部分是监控内存使用情况。它大约是 19.3 mb 内存。

如果你问我，我会在 Rails 中构建应用程序原型，然后提取 json api 并使用 webmachine 在 Erlang 中构建它们。或者只是使用 webmachine 在 Erlang 中构建应用程序，然后使用一些 ruby​​ 库的一些不错的功能，比如 capistrano 进行部署:)

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-04-10T15:19:04.880

1.  学习斯卡拉。
2.  如果不满意并且您愿意使用 MS Visual Studio，请学习 F#。
3.  如果不满意并且您可以重新考虑您的观点 (3)，请学习 Haskell。
4.  如果不满意并且您可以重新考虑您的观点 (5)，请学习 OCaml。

请注意，OCaml 程序可以相对轻松地跨单独的进程工作，因为它甚至可以编组闭包。

# json - 如何使用 struts 2 json 插件在 json 响应中包含父类字段

> ID：10083363
> 
> 赞同：6
> 
> 时间：2012-04-10T05:09:13.277
> 
> 标签：json, struts2

我有以下实现

```
public abstract class BaseAcion extends ActionSupport {
    private String result;
    private String message;

    //getters, setters
}

public class MyAction extends BaseAction {
    private String myFirstField;
    private String mySecondField;

    public String execute() {
         ...
         myFirstField = "someValue";
         mySecondField = "someOtherValue";
         ...
         result = SUCCESS;
         message = "Some message here";
         ...
         return result;
    }

    //methods, getters, setters
} 
```

我用过struts2-json插件，动作映射是

```
<package name="my-package" namespace="/" extends="json-default" >
    <action name="myAction" class="MyAction">
        <result type="json"></result>
    </action> 
</package> 
```

我收到的回复是这样的。

```
{
    "myFirstField":"someValue",
    "mySecondField":"someOtherValue"
} 
```

我也想得到“结果”和“消息”字段作为响应。

如何在 json 响应中包含 BaseAction 字段？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-04-10T06:16:01.093

默认情况下，在“根”对象的基类上定义的属性不会被序列化，要序列化所有基类（直到 Object）中的属性，请将 JSON 结果中的“ignoreHierarchy”设置为 false：

就像是

```
<result type="json">
  <param name="ignoreHierarchy">false</param>
</result> 
```

有关详细信息，请参阅 JSON 插件文档

*   [JSONPlugin-BaseClasses](http://struts.apache.org/2.2.3/docs/json-plugin.html#JSONPlugin-BaseClasses)

# android - 在设计 Android 应用程序的 UI 时是否有任何颜色规范要遵循

> ID：10083364
> 
> 赞同：0
> 
> 时间：2012-04-10T05:09:38.127
> 
> 标签：android, user-interface

我正在开发一个 android 应用程序并使用“AAA logomaker”软件创建了一些图像按钮（绿色）。但问题是在不同设备上安装我的应用程序时，图像按钮的颜色强度显示不同。

是否有任何颜色规范要遵循，以使图像颜色在所有设备中看起来都相同？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-10T05:13:40.990

每当您为控件之类的按钮创建图像时，我建议您使用[**9-patch**](http://developer.android.com/guide/developing/tools/draw9patch.html)工具创建它，该工具允许您实际创建[NinePatch](http://developer.android.com/reference/android/graphics/NinePatch.html)图像。

![在此处输入图像描述](../Images/a57d1f3dd8a97c8c00914bc243747db5.png)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-10T05:15:45.913

您必须为不同尺寸的设备制作不同的按钮图像，例如

```
36x36 for low-density
48x48 for medium-density
72x72 for high-density
96x96 for extra high-density 
```

也可以为按钮制作 9 个补丁图像..

有关更多信息，请查看[图标设计指南](http://developer.android.com/guide/practices/ui_guidelines/icon_design.html)

# ruby-on-rails - Rails 3.2 中的 Backbone.js 模板文件

> ID：10083369
> 
> 赞同：1
> 
> 时间：2012-04-10T05:10:11.733
> 
> 标签：ruby-on-rails, ruby-on-rails-3, backbone.js

我有一个带有 Rails 3.2.3 项目的 Backbone.js，它正在工作，但我想清理它并将模板放入单独的 JST 文件中。

我首先创建了一个目录来保存我的模板

```
<project>/app/assets/templates/appointments 
```

然后我在那里创建了一个名为“show.jst”的文件。

根据我的阅读，我不需要在 Rails 3.2.x 下安装 Jammit，所以我继续尝试将以下代码转换为使用外部模板文件：

```
window.AppointmentView = Backbone.View.extend({
    template: _.template('<h3><%= topic %></h3>'),

    render: function(){
        var attributes = this.model.toJSON();
        this.$el.html(this.template(attributes));
        return this;
    }
}); 
```

到目前为止，这是我的尝试：

```
window.AppointmentView = Backbone.View.extend({
    render: function(){
        var attributes = this.model.toJSON();
        var html = JST['appointments/show'](attributes);
        this.$el.html(html);
        return this;
    }
}); 
```

在我的 show.jst 文件中，我有以下内容：

```
<h3><%= topic %></h3> 
```

（主题是我的“约会”模型中的一个字段）

这不会在屏幕上显示任何错误，也不会在屏幕上打印任何内容。

我该如何解决这个问题，以便我可以使用外部模板文件？

**更新**

我已经确保在所有其他 require 语句之前我有 required_tree ./templates 或 ../templates （取决于我正在测试的位置），如下所示：

```
#= require jquery
#= require jquery_ujs
#= require backbone-rails
#= require_tree ../templates
#= require_tree ./models
#= require_tree ./collections
#= require_tree ./views
#= require_tree ./routers 
```

我试过把我的 show.jst 模板文件放在下面

应用程序/资产/javascripts/模板/约会/show.jst

应用程序/资产/模板/约会/show.jst

我尝试将文件命名为 show.jst.ejs 并在我的 Gemfile 中包含 gem 'ejs'。

这些都没有加载模板。将我的模板存储在 app/assets 下时，我确保它在我的路径中，并带有以下内容：

```
config.assets.paths << "#{ Rails.root }/app/assets/templates" 
```

这也无济于事，但确实消除了 Sprockets 错误。

我仍然无法加载模板 jst 文件，并且我阅读的所有内容都暗示了不同的方式。我已经尝试了很多，也许它们与 Rails 3.2.3 不兼容。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-11T01:43:38.250

我发现这很好用。在我的约会_show.js 中，我这样称呼我的模板：

```
window.AppointmentView = Backbone.View.extend({
    template: JST["appointments/show"],

    render: function(){
        this.$el.html(this.template(this.model.toJSON()));
        return this;
    }
}); 
```

我确保在 application.js 中包含模板目录：

```
#= require jquery
#= require jquery_ujs
#= require backbone-rails
#= require_tree ../templates
#= require_tree ./models
#= require_tree ./collections
#= require_tree ./views
#= require_tree ./routers 
```

在您的 Gemfile 中包含这些 gem

```
gem 'backbone-rails'
gem 'ejs' 
```

将 app/assets/templates 目录添加到 environment.rb 中的路径：

```
AppointmentsBackboneJs::Application.configure do  
  config.assets.paths << "#{ Rails.root }/app/assets/templates"
end 
```

不要忘记运行捆绑并重新启动服务器

# java - Double.POSITIVE_INFINITY == Float.POSITIVE_INFINITY

> ID：10083370
> 
> 赞同：9
> 
> 时间：2012-04-10T05:10:20.780
> 
> 标签：java, floating-point

我试过了

```
System.out.println(Double.isInfinite(Float.POSITIVE_INFINITY))
System.out.println(Double.isInfinite(Float.NEGATIVE_INFINITY)); 
```

输出是

```
true
true 
```

所以这意味着两种数据类型的“无穷大”是一样的吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-10T05:13:12.733

Yes and no. Yes, because in an abstract sense infinity is infinity (and, as I explain below, for the purposes of most code floats are converted to doubles anyway).

No, however, because at the bit level the two infinities are different. A double is 64 bits in Java, and a float is 32 bits in Java, so trivially they are different at the representation level.

In Java, floating-point numbers (floats and doubles) are represented using [IEEE 754](http://en.wikipedia.org/wiki/IEEE_754) floating-point format, which is the standard pretty much everyone uses nowadays. Each number is represented in binary as a sign bit, plus a certain number of exponent bits, plus a certain number of mantissa (significand) bits. In either a float or a double, positive infinity is represented with a sign bit of 0, exponent bits all 1, and mantissa bits all 0\. Negative infinity is represented the same way, except the sign bit is 1\. So infinity is represented in two very similar ways, but because of the differing counts of exponent and mantissa bits between floats and doubles, the bit-level patterns are different.

For the purposes of writing code, you can treat them as the same. Whenever you use doubles and floats together, unless you explicitly say otherwise the float will automatically be cast to a double and the expression will result in a double, so a float infinity "acts like" a double infinity for most practical purposes.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-10T05:13:20.153

It depends on what you mean by "same". The bit patterns are different because the sign is different, but they're *still* both infinite.

In addition, the promotion rules for floats will preserve the infinite nature when converting to a double.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-10T08:19:22.143

在 Java 中没有办法与 a 进行比较`float`。`double`您可能使用的所有操作都`double`在`double`隐式向上转换`float`为 a`double`

```
 float f= 
 double d =
 Double.compare(f, d);
 // equivelent to
 Double.compare((double) f, d); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-04-10T06:35:16.573

在 Java 中，您不能直接将 a`double`与 a进行比较`float`。相反，当您尝试执行此操作时，`float`会自动转换为`double`第一个。当您将 a 传递`float`给带有`double`参数的方法时，也会发生同样的事情。当你`Float.POSITIVE_INFINITY`（例如）转换为 a时`double`，你会得到`Double.POSITIVE_INFINITY`.

因此，您的问题的答案是`Double.POSITIVE_INFINITY`并且`Float.POSITIVE_INFINITY`并不完全相同，但它们都表示“一个太大而无法表示的数字”，因此`==`给您的答案在逻辑上是一致的。

# zend-framework - 改变 php.ini 包含路径，Zend 框架

> ID：10083371
> 
> 赞同：2
> 
> 时间：2012-04-10T05:10:29.627
> 
> 标签：zend-framework, command-line, php

到目前为止，我已经查看了有关此问题的所有问题，但没有任何帮助。部分原因是这些年来，我一直避免深入学习 php.ini 操作的操作方法。（错误和其他基本更改除外）。

我正在运行 Windows 7，并将 Zend Framework 安装到 c:\wamp。到目前为止，我已经打开了我的 php.ini 文件，并将其更改为以下内容：

```
;;;;;;;;;;;;;;;;;;;;;;;;;
; Paths and Directories ;
;;;;;;;;;;;;;;;;;;;;;;;;;

; UNIX: "/path1:/path2"
;include_path = ".:/php/includes"
;
; Windows: "\path1;\path2"
;include_path = ".;c:\php\includes;C:\wamp\ZendFramework-1.11.11\library" 
```

当我尝试在命令行中运行 zf 时，我收到一个错误，“为了运行 zf 命令，您需要确保 Zend Framework 在您的包含路径中”。

我还在我的环境变量中添加了一个用户变量

```
ZEND_TOOL_INCLUDE_PATH  set to C:\wamp\ZendFramework-1.11.11\library 
```

在这一点上，我基本上被卡住了。任何帮助将不胜感激。我是否在 php.ini 文件中包含错误的路径？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-10T05:12:11.450

You need to uncomment the include line. (Remove semi-colon at the start of the line)

`include_path = ".;c:\php\includes;C:\wamp\ZendFramework-1.11.11\library"`

instead of

`;include_path = ".;c:\php\includes;C:\wamp\ZendFramework-1.11.11\library"`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-10T05:16:27.867

When a line in an INI file begins with ";", it denotes a comment and is not parsed. Simply remove that, and you should be good to go!

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-04-10T05:54:38.420

您也可以在环境变量中添加 zend 路径和 php 路径

步骤：转到我的电脑->右键单击->选择属性->单击更改设置->单击高级->单击环境变量->转到系统变量-。编辑路径-> 在此处添加您的 php 和 zend 路径

# c++ - C++ Dynamic object construction

> ID：10083391
> 
> 赞同：0
> 
> 时间：2012-04-10T05:12:55.073
> 
> 标签：c++, inheritance

I have a base class,

```
class Msg
{
   public:

     ParseMsg()
     {
         ParseMsgData();
         ParseTrailer();
     }
     virtual void ParseMsgData() = 0;
     ParseTrailer();

}; 
```

and derived classes,

```
class InitiateMsg : public Msg
{
    public:
    void ParseMsgData() { ... }
};

class ReadOperationMsg  public Msg
{
   public:
    void ParseMsgData() { ... }
};

class WriteOperationMsg  public Msg
{ 
   public:

    void ParseMsgData() { ... }
}; 
```

and the scenario is below,

```
 void UsageFunction(string data)
    {
      Msg* msg = ParseHeader(data);
      ParseMsg
    }

   Msg* ParseHeader(string data)
   {

        Msg *msg = NULL;
           ....
         switch() 
         {

            case 1: 

                 msg = new InitiateMsg();
                 break;
            case 2:
                 msg = new ReadOperationMsg{();
                 break;
             case 3:
                 msg = new WriteOperationMsg{();
                 break;
               ....

         }

          return msg;           
    } 
```

based on the data ParseHeader method will decide which object has to be created, So I have implemented ParseHeader function outside the class where I am using. How can I make the ParseHeader function inside the Msg class and then use it?

In C# the same is achieved by defining ParseHeader method as static with in class and use it from outside,

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-10T05:15:27.050

You are in need of **[Abstract Factory](http://en.wikipedia.org/wiki/Abstract_factory_pattern#C.2B.2B)** Design pattern. It is custom made for a scenario like yours.
The inline link explains in much more in detail with an simple example than I could here.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-10T11:41:58.747

好吧，在任何有用的注释之前，您忘记将它们声明为公共并且忘记在您的类定义中声明继承关系。

对于你的问题，为什么不直接将 ParseHeader 函数声明为基类 Msg 的公共成员方法。如果你这样做，我看不出任何问题。

可能存在一些依赖性问题。您需要将该方法作为声明放在 Msg 中，并在 cpp 文件中定义主体。就像是：

```
// in Msg.h
// all other lines are omitted
public:
  Msg* ParseHeader(string data);

// in Msg.cpp
#include "Msg.h"
#include "InitiateMsg.h"
#include "ReadOperationMsg.h"
#include "WriteOperationMsg.h"

Msg* Msg::ParseHeader(string data) {
// .....
} 
```

另外，如果您想在拥有基指针时准确区分它是哪个类。如果我这样做，我会在基类中声明一个 emun 来记住它。就像是：

```
// Msg.h
class Msg{
public:
    enum type_t {
      TBase,
      TInit,
      TRead,
      TWrite
    } type; 
```

然后在每种不同的构造方法中，给类型变量定义不同的type_t。因此，您始终可以知道指针指向哪个类，并进行动态类转换而不会错过试验。

# c++ - 指针、数组和结构（以及分配内存）？

> ID：10083395
> 
> 赞同：1
> 
> 时间：2012-04-10T05:13:23.607
> 
> 标签：c++, arrays, pointers, struct

好吧，这可能真的很简单，但是我查看了有关指针、数组和内存分配的整个网站，但有些解释对我来说有点太复杂了。那么......有人可以向我解释为什么 d[i] 在下面的代码中指向不同的东西吗？

```
typedef struct data_t {
    int ival;
    char *sval;
} data_t;

void f1(data_t **d);
int main()
{
data_t *d; 
    d = new data_t[500];
    for (int i=0; i<500; i++)
    {
        d[i].ival= i+1;
        d[i].sval="$";
    }

    f1(&d); 
}

void f1(data_t **d)
{
    for (int i=0; i<500; i++)
    {
        d[i]->ival=i+1;
        d[i]->sval="$";
    }
} 
```

虽然我需要做的是填充数组的 500 个元素中的每一个，以便整数字段“ival”的值 1-500 用于数组索引 0-499，而字符串字段“sval”包含字符串“$1 ” – 数组索引 0-499 的“$500”。在函数调用中。

也是

```
d = new data_t[500] 
```

我只需要为 500 个元素的结构数组分配内存吗？

只是想弄清楚为什么它在 main 的 for 循环中起作用，但在函数调用中不起作用……查看调试器，指针指向错误的地方……

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-10T05:19:21.077

“它有效”，`main`因为`d[i]`与`*(d + i)`. 在你的函数`f1`中，`d`是一个指向指针的指针，所以你需要说`(*d)[i].ival`等等。（你写的`d[i]`，是逐步推进指向指针的指针`i`，然后尝试取消引用*它*，这是错误的方式。）

再说一次，既然你在 C++ 中，你可能应该只是将指针作为引用传递：

```
 void f2(data_t * & d)  // <--- reference to the original pointer
 {
     // ...
     d[i].ival = i + 1;
 } 
```

或者实际上，由于您永远不会更改原始`d`本身，只有它*指向*的内容，您甚至可以按*值*传递它：

```
void f3(data_t * d)     // <--- pointer passed by value
{
     // as before, d[i].ival etc.
} 
```

或者更确切地说，您可能应该使用 a`std::vector<data_t>`而根本不使用*任何*指针。（另外，你不应该 typedef 你的类定义`data_t`。）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-10T05:36:54.720

您的函数`f1`等待 ** 类型的参数（即数组数组，或只是一个矩阵）。因此，当您编写 d[i] 时，它不是单个元素，而是一个数组（矩阵的行）。这就是为什么两者`d[i].ival`都`d[i] -> ival`不起作用的原因。我认为对您来说最好的解决方案是使用`std::vector`STL。

# javascript - 使用 jquery 更改 iframe 属性

> ID：10083399
> 
> 赞同：13
> 
> 时间：2012-04-10T05:14:52.157
> 
> 标签：javascript, jquery

我有这样的事情：

```
 <iframe id="frame" width="200" height="150" 
    src="http://www.youtube.com/embed/GiZGEFBGgKU?rel=0&
amp&iv_load_policy=3;autoplay=1" frameborder="0" allowfullscreen></iframe> 
```

我想使用 jquery 更改宽度和高度，我尝试：

```
$("#frame").setAttribute("width", "50");
$("iframe").setAttribute("width", "31"); 
```

他们都没有工作

* * *

## 回答 #1

> 赞同：29
> 
> 时间：2012-04-10T05:51:23.117

正如 Sarfraz 已经指出的那样，为 jquery 选择器对象设置属性的正确方法是使用`attr("attrName", "attrVal")`. 不起作用的原因`setAttribute`是值得解释的，因为我不止一次地反对这一点：

当您使用 jquery 的选择器语法时，它会返回一个对象——在 jquery 中定义——它本质上是选择器匹配的所有元素的列表。无论它匹配一个元素（应该总是使用 id 选择器）还是多个，返回的对象都是元素列表，而不是单个 DOM 对象（例如单个元素）。 `setAttribute`是实际`HTMLElement`对象的方法。

这就是为什么

```
$("#frame")[0].setAttribute("width", "200"); 
```

有效，但是

```
$("#frame").setAttribute("width", "200"); 
```

才不是。jquery 元素没有那个方法，即使`HTMLElement`它的列表中的对象有。

如果您想（无论出于何种原因）使用本机`HTMLElement`方法（或选择器返回的元素通用的方法，例如输入等），您可以使用 jquery 的`each()`方法，如下所示：

```
 // Set all iframes to width of 250
 $("iframe").each(
     function(index, elem) {
         elem.setAttribute("width","250");
     }
 ); 
```

该`each()`方法的回调可以传递两个可选参数，第一个是选择器列表中元素的索引，第二个是实际的 DOM 元素，您可以在其上调用原生 DOM 方法。

就像我说的，我非常沮丧地试图弄清楚如何不止一次地使用 jquery 的选择器结果和本地方法，所以我希望这不仅有助于弄清楚为什么`setAttribute()`不起作用，而且通常的本地方法，以及如何当你找不到对应的 jquery 时，让它们真正工作。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-10T05:18:01.773

关于什么：

```
$('#frame').width(x) 
```

或者

```
$('#frame').attr("width","50"); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-04-10T05:16:38.923

1）使用[`attr`](http://api.jquery.com/attr/)：

```
$("#frame").attr("width", "31"); 
```

2) 使用 DOM 对象：

```
$("#frame")[0].setAttribute("width", "50"); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2015-11-01T11:00:43.523

```
$(document).ready( function() {
var ysr = $('iframe').attr('src');
var nysr = ysr + "HD=1;rel=0;showinfo=0";
$('iframe').attr('src', nysr);}); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-04-10T05:18:32.337

编辑：看到你确实有身份证。你能看看代码是否真的在运行吗？好像被触发了？另外，尝试更改`allowfullscreen`为`allowfullscreen="true"`

# mysql - mysql，查询从第一个返回id的两个链接表，基于满足这个但不是这个条件的秒详细信息

> ID：10083401
> 
> 赞同：1
> 
> 时间：2012-04-10T05:14:59.643
> 
> 标签：mysql, inner-join

我正在尝试编写一个 MySQL 查询，该查询将返回其详细信息符合此但不符合此条件的元素。

例如，考虑一个办公用品的库存管理系统。所有类型的供应都将包含在这个数据库中，而不是创建一个包含无数列的表，产品描述的每个属性我都这样做了。

```
CREATE TABLE `inventory`(
id INTEGER AUTO_INCREMENT PRIMARY KEY,
element_name VARCHAR(255) NOT NULL
);

CREATE TABLE `inventory_detail`(
id INTEGER AUTO_INCREMENT PRIMARY KEY,
element_id INTEGER NOT NULL,
label VARCHAR(255) NOT NULL,
attribute_string VARCHAR(255) NULL,
attribute_integer INTEGER NULL
); 
```

使用这些表格可以将每个产品添加为库存，并且可以将其属性添加为库存详细信息。（即标签=颜色，属性字符串=红色或标签=颜色，属性字符串！=蓝色）不要批评这种方法，这不是我的问题所在。此外，这种方法允许我不断更改存储的产品详细信息的数量，而无需以任何方式更改数据库。

我的问题是，如果我想获得所有计数为正的绿色产品的列表，我的查询应该是什么样子。基本上，我正在寻找一个返回 element.id 的查询，并且这些元素必须按排除的细节和没有的细节进行排序。例如：

```
SELECT element.id
FROM element
INNER JOIN element_detail ON element.id = element_detail.id
WHERE (element_detail.label = 'color'
AND element_detail.attribute_string = 'green')
AND (element_detail.label = 'count'
AND element_detail.attribute_integer <> 0);

####################################
#             INVENTORY            #
####################################
# id #           label             #
####################################
#  1 #   multi color pen pack      #
#  2 #   single pen pack (red)     #
#  3 #   single pen pack (green)   #
#  4 #   single pen pack (black)   #
#  5 #   single pen pack (blue)    #
#  6 #   single pen pack (purple)  #
####################################

########################################################
#                  INVENTORY_DETAILS                   #
########################################################
# id # element_id #    label   #    attribute_string   #
########################################################
#  1 #     1      #    color   #          red          #
#  2 #     1      #    color   #          blue         #
#  3 #     1      #    color   #          black        #
#  4 #     1      #    color   #          green        #
#  5 #     1      #    color   #          red          #
#  6 #     1      #    count   #          100          #
#  7 #     2      #    color   #          red          #
#  8 #     2      #    count   #          50           #
#  9 #     3      #    color   #          green        #
# 10 #     3      #    count   #          50           #
# 11 #     4      #    color   #          black        #
# 12 #     4      #    count   #          50           #
# 13 #     5      #    color   #          blue         #
# 14 #     5      #    count   #          0            #
# 15 #     5      #    color   #          purple       #
# 16 #     5      #    count   #          50           #
######################################################## 
```

一个查询将返回库存中所有红色但不绿色的产品及其数量。

```
########################################
#              RESULT                  #
########################################
#       PRODUCT             #   COUNT  #
#  single pen pack (red)    #     50   #
#  single pen pack (black)  #     50   #
#  single pen pack (blue)   #     0    #
#  single pen pack (purple) #     50   #
######################################## 
```

虽然多色笔包有一支红色笔，但它也有一支绿色笔，不应包含在结果中。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-10T06:07:50.253

如果您想要所有具有正数的“绿色”产品，那么您需要在明细表上加入两次

```
SELECT element.id
FROM element
INNER JOIN element_detail e1 ON element.id = e1.id
INNER JOIN element_detail e2 ON element.id = e2.id
WHERE (
      e1.label = 'color'
  AND e1.attribute_string = 'green'
) AND (
      e2.label = 'count'
  AND e2.attribute_integer > 0
); 
```

# delphi - 有没有办法从 Delphi XE2 链接到 VSTS 2010？

> ID：10083402
> 
> 赞同：2
> 
> 时间：2012-04-10T05:15:14.227
> 
> 标签：delphi, delphi-xe2, team-explorer

我正在开发 Delphi XE2 版本。我们计划将我们的代码库从 JEDI 移动到 VSTS 2010。有没有办法添加插件（如 JEDI）或将 VSTS 2010 链接到 Delphi XE2？

Delphi XE2 是否支持这种功能或任何插件？

**更新：**据我所知，目前 JEDI 没有与 Delphi XE2 集成，这就是我们正在寻找与 Delphi XE2 集成的其他版本控制实用程序的原因

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-10T10:47:15.260

您可以尝试本月发布[的 RAD Studio\Delphi XE2 的 SourceConneXion 。](http://www.epocalipse.com/downloads.htm)它是将您的 Delphi IDE 链接到 Team Foundation Server 的好产品。

有一个警告：[Epocalipse 在采用新的 Delphi 版本方面非常缓慢](http://www.epocalipse.com/index.htm)。

其他两条路径也是可能的：

*   使用[SvnBridge （在您的工作站或 TFS 服务器上）通过 SVN（](http://svnbridge.codeplex.com/) [Subversion](http://subversion.apache.org/)）使用的协议访问 TFS 。您松散了一些集成（SVN 公开的内容少于 TFS 可以做的），但效果很好，您可以使用 Delphi XE2 SVN 集成。[CodePlex 使用这种方法](http://codeplex.codeplex.com/wikipage?title=Using%20TortoiseSVN%20with%20CodePlex)。
*   使用 Visual Studio Team Explorer（[2010 版](http://www.microsoft.com/download/en/details.aspx?id=329)），这意味着在 Delphi IDE 之外进行版本控制。我过去做过这个，实际上还不错。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-12-29T18:13:00.443

另一种选择是使用 MSSCCI 提供程序，它允许您使用内置于旧 IDE 中的旧 SourceSafe 集成

# msbuild - Add AfterBuild target on multiple projects in a solution

> ID：10083406
> 
> 赞同：1
> 
> 时间：2012-04-10T05:15:45.160
> 
> 标签：msbuild, dynamics-crm-2011, ilmerge

I use ILMerge to merge all binaries in to one due to an MS Dynamics limitation.

It use to be a manual process specifying all the binaries to merge but I found this article to automatically find the dependencies for a project and merge them in to the assembly using the AfterBuild target - [instructions here](http://blogs.clariusconsulting.net/kzu/leveraging-ilmerge-to-simplify-deployment-and-your-users-experience/).

The downside here is that I need to edit the csproj file and add the [`<import>`](http://msdn.microsoft.com/en-us/library/92x05xfs.aspx) element in for every project I want to ILMerge. Is there a way I can do it for every project in a solution (preferably every project in a solution folder)?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-24T04:26:41.193

项目文件只是 XML。没有什么能阻止您创建自己的文件编辑器实用程序来搜索所需的 xml 元素并将其注入项目文件中。

# c - 带有随机字符的随机长度字符串

> ID：10083408
> 
> 赞同：0
> 
> 时间：2012-04-10T05:15:52.620
> 
> 标签：c, string, random, struct, int

嘿，所以我在努力奋斗。我需要创建一个随机字符串（长度为 2 到 6）并为每个“A”到“Z”生成一个随机字符。问题是我正在尝试使用一个带有 char* 的结构。然后当我尝试生成随机数据时动态分配每个结构。

```
struct TStruct 
{ 
int ID; 
float Value; 
int a[4]; 
char *Name; 
};

//create pointer to TSruct
typedef struct TStruct *ptrStruct;

//have ptrStruct point to 10 structs
ptrStruct structs[NUM_STRUCTS];

void genStruct(ptrStruct *alpha, int countID){
//declare variables
//ID counter
countID+=1;
int i;
int temp;
int tempChar;
int nameSize;
*alpha = (ptrStruct)malloc(sizeof(struct TStruct)); 
srand(time(0));
//put the ID in
(*alpha)->ID=countID;
//random number 0 to 999.99 
(*alpha)->Value= (float)rand()/((float)(RAND_MAX)+1000)/100;
//store 4 ints 0 to 100 into array a
for (i = 0; i < 4; i++) {
    //generate random number
    temp = rand() % 100;
    //put into the array
    (*alpha)->a[i] = temp;
}
//generate a random length for the name 2 to 6
nameSize = rand() % 4 + 2;
char buffer[2];
//run a for loop based on the size of nameSize
//THIS IS THE PROBLEM CODE!!!
for (i = 0; i < nameSize; i++) {
    snprintf(buffer,2, "%d",(rand() % 25)+65);
    strcat((*alpha)->Name,buffer);
}
} 
```

任何帮助将不胜感激。谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-10T05:31:07.697

一个主要问题是您没有为字符串分配空间。您在结构中有一个未初始化`char *Name`的。

坦率地说，对于 6 个（甚至 8 个）字符，您应该简单地将数组分配为结构的一部分。在 64 位机器上，指针会比数组大；在 32 位机器上，与指针加数据相比，您仍然会使用更多的空间。

你的角色生成循环也很不稳定。该`rand()`表达式或多或少是合理的（它不会生成“Z”并且会偏向字母表的开头），但是您应该使用`'A'`而不是 65，并且您应该简单地将字符分配到名称中的相关位置. 像这样使用`snprintf()`将为您提供每个字母的 10 位代码，这根本不是您想要的。

不要忘记空终止字符串。并且不要忘记`strcat()`仅当字符串已经为空终止时才有效；你也没有解决这个问题。

* * *

[Joachim Pileborg](https://stackoverflow.com/users/440558/joachim-pileborg)在现已删除的评论中做出了准确的评论，您应该确保只调用`srand()`一次，通常是在程序启动时。如果您`genStruct()`在一秒钟内多次调用该函数（并且如果您调用它两次以上，您几乎可以保证——即使在 4 MHz 的原始 IBM PC 上——您将至少有三个调用中的两个同一秒）然后您将获得每次`srand()`以相同数字（时间）调用时生成的相同数据。

# php - 将远程 HTTP 资源抓取到字符串中的最简单方法（在 PHP 中）是什么？

> ID：10083414
> 
> 赞同：0
> 
> 时间：2012-04-10T05:16:47.503
> 
> 标签：php, curl

我不想将其下载到文件中。

另请注意，我无法使用`file_get_contents`，因为我的网络主机禁用了该选项。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-10T05:22:17.437

**尝试使用`cURL`：**

```
function curlFile($url,$proxy_ip="",$proxy_port="",$loginpassw="")
{
    //$loginpassw = 'username:password';
    //$proxy_ip = '192.168.1.1';
    //$proxy_port = '12345';
    //$url = 'http://www.domain.com';

    $ch = curl_init();
    curl_setopt($ch, CURLOPT_URL, $url);
    curl_setopt($ch, CURLOPT_HEADER, 0);
    curl_setopt($ch, CURLOPT_RETURNTRANSFER, 1);
    curl_setopt($ch, CURLOPT_PROXYPORT, $proxy_port);
    curl_setopt($ch, CURLOPT_PROXYTYPE, 'HTTP');
    curl_setopt($ch, CURLOPT_PROXY, $proxy_ip);
    curl_setopt($ch, CURLOPT_PROXYUSERPWD, $loginpassw);
    $data = curl_exec($ch);
    curl_close($ch);

    return $data;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-10T05:23:57.810

您可以使用 CURL。

[PHP 卷曲](http://www.php.net/manual/en/book.curl.php)

# magento - 如何让 Magento 根据用户组获取价格？

> ID：10083418
> 
> 赞同：0
> 
> 时间：2012-04-10T05:17:39.950
> 
> 标签：magento

需要 3 个定价级别。一个是公开的，另外两个分配给用户并在登录后显示。

我怎样才能在 Magento 中做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-10T20:39:27.213

您可以将定价级别分配给用户组。我们有正常的定价、经销商和分销商。在管理菜单中查找：目录（单击产品）然后在左侧列中，价格。在主窗口中是橙色的“+ 添加层”按钮。您可以使用它来规定数量折扣（对于任何客户组），并为客户组应用折扣定价。

我使用的是 1.4.2 版本，所有这些都是项目创建过程的一部分。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-10T06:53:51.873

这是 magento 1.7 中的一个功能，很快就会发布，所以我猜要么使用候选发布版，要么等待发布

# qt - 用于在 Qt 中打印的工作表

> ID：10083419
> 
> 赞同：0
> 
> 时间：2012-04-10T05:17:50.030
> 
> 标签：qt, qt4

是否可以从某些 QLineEdits 中插入值以填充工作表中的字段？

![在此处输入图像描述](../Images/a40f5a6cad6bf53c9dc2d964e617c70f.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-10T05:33:06.643

我认为使用 a 的渲染工具`QGraphicsView/Scene`会是一种更好的方法。这需要一些调整，但显示扫描的图像或表单的照片并允许用户单击他们想要添加文本的位置会很好用。然后，您可以将场景的文本部分渲染到已加载其中一种表单的打印机。

# svn - 如何检索将代码提交到 SVN 存储库的人员的信息？

> ID：10083426
> 
> 赞同：0
> 
> 时间：2012-04-10T05:18:13.950
> 
> 标签：svn, tortoisesvn, cruisecontrol

我实际上计划检索最近将代码提交到 SVN 存储库的人的用户 ID。这将帮助我向所有最近提交代码的用户发送电子邮件，以防构建失败。

我们使用 CruiseControl 进行构建，使用 Tortoise SVN 提交代码。

谢谢，

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-10T09:09:48.377

Cruisecontrol 会自动为您执行此操作。

您必须使用[`<svn>`定义](http://cruisecontrol.sourceforge.net/main/configxml.html#svn)和[`<email>`](http://cruisecontrol.sourceforge.net/main/configxml.html#email).

查看电子邮件的`<map>`属性以设置用户的电子邮件地址。

> 将源代码控制用户 ID 映射到电子邮件地址。

# c++ - Cmake能否生成一个同时支持debug和release的makefile

> ID：10083427
> 
> 赞同：15
> 
> 时间：2012-04-10T05:18:22.917
> 
> 标签：c++, c, cmake

似乎我们需要为每种构建类型（调试/发布）创建单独的文件夹，在每个构建类型上运行 cmake，并为调试/发布配置生成单独的 makefile。是否可以使用同时支持调试/发布配置的 cmake 创建一个单一的 makefile，并且当我们实际运行“make”时，它将为中间产品和最终产品（如 dll、exe）创建单独的文件夹。

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-04-10T05:21:25.693

据我所知，这不能使用一组构建脚本来实现。但是，您可以做的是在您的工作区有两个子目录：

```
build/
build/debug
build/release 
```

然后做：

```
$ cd build
$
$ cd build/debug
$ cmake -DCMAKE_BUILD_TYPE=Debug ../..
$ make
$
$ cd ../release
$ cmake -DCMAKE_BUILD_TYPE=Release ../..
$ make 
```

`build`如有必要，您可以在目录中添加另一个构建脚本，如下所示：

```
#!/bin/sh
cd debug   && make && cd ..
cd release && make && cd .. 
```

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2018-01-24T00:20:31.237

这可以使用`ADD_CUSTOM_TARGET`命令来实现。例如，如果您想在您的 makefile 中添加调试和发布目标，请将以下内容添加到您的 CMakeLists.txt 文件中：

```
ADD_CUSTOM_TARGET(debug
  COMMAND ${CMAKE_COMMAND} -DCMAKE_BUILD_TYPE=Debug ${CMAKE_SOURCE_DIR}
  COMMAND ${CMAKE_COMMAND} --build ${CMAKE_BINARY_DIR} --target all
  COMMENT "Creating the executable in the debug mode.")

ADD_CUSTOM_TARGET(release
  COMMAND ${CMAKE_COMMAND} -DCMAKE_BUILD_TYPE=Release ${CMAKE_SOURCE_DIR}
  COMMAND ${CMAKE_COMMAND} --build ${CMAKE_BINARY_DIR} --target all
  COMMENT "Creating the executable in the release mode.") 
```

然后，用cmake配置好后，就可以运行`make debug`make debug target和run `make release`make release target在同一个目录下。

# gwt - GWT：RequestFactory 和 ListDataProvider 类型错误

> ID：10083431
> 
> 赞同：0
> 
> 时间：2012-04-10T05:19:13.217
> 
> 标签：gwt, requestfactory

我正在尝试制作一个通用方法来使用 RequestFactory 获取一些数据。我有一个方法 getData 对请求执行 fire 以获取项目列表（泛型）问题是当我尝试将返回的 List arg0 分配给我的 ListDataProvider 时出现类型错误。

```
private ListDataProvider<T> dataProvider; 
. 
. 
. 
. 
public <T> void getData(Request<List<T>> specificRequest) { 
                specificRequest.fire(new Receiver<List<T>>() { 
                        @Override 
                        public void onSuccess(List<T> arg0) { 
                                assignDataProvider(arg0); 
                        } 
                }); 
                return ; 
} 

public <T> void assignDataProvider(List<T> arg0) { 
                this.dataProvider.setList(arg0); 
                //The method setList(List<T>) in the type ListDataProvider<T> is not 
applicable for the arguments (List<T>) 
                this.dataProvider= new ListDataProvider<T>(arg0); 
                //Type mismatch: cannot convert from 
com.google.gwt.view.client.ListDataProvider<T> to 
com.google.gwt.view.client.ListDataProvider<T> 
} 
```

如何使用从 arg0 获得的数据，以便将其分配给我的 ListDataProvider？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-10T06:29:53.243

如果您在声明 dataProvider 时没有出错，则类型 T 被定义为类声明中的参数。
如果是这样，您应该从方法声明中删除。

祝你好运！

# redis - 将两个 Redis 实例合并为一个具有两个 dbs 的实例

> ID：10083432
> 
> 赞同：2
> 
> 时间：2012-04-10T05:19:13.560
> 
> 标签：redis

我有两个 Redis 实例（或两个各自的 dump.rdb 文件），我想将它们组合成一个带有两个 dbs 的实例，一个用于每个各自的初始实例。

我可以使用 MIGRATE 来做到这一点，但它仅在 Redis 2.6.0 中可用，我当前的 Redis 服务器不支持它。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-04-10T10:18:42.050

## 编辑

对于较新版本的 redis，此答案不再准确。由于历史原因留下了答案。

* * *

如果您愿意尝试一下二进制文件，您可以轻松地将两个 dump.rdb 文件合并为一个。

假设：

1.  每个转储只有一个数据库 - 默认数据库
2.  您使用的是 Redis 2.4.x，因此转储版本为 2 或 3

如果您在十六进制编辑器中打开文件，这是 RDB 文件的格式 -

`REDIS000x FE 00 <actual data > FF`

这里 -

*   `000x`是 rdb 版本号。在您的情况下，它很可能是 0002 或 0003
*   `FE`是数据库选择器，`00`是数据库编号
*   `<actual data>`是当前数据库中的键值对。您可以将其视为当前目的的二进制 blob。
*   `FF`是文件中的最后一个字节，表示 rdb 文件的结尾

因此，要合并两个 rdb 文件，请执行以下操作 -

1.  创建一个新的目标文件
2.  复制除最后一个文件之外的第一个文件中的所有内容`FF`
3.  复制两个字节`FE 01`以指示第二个数据库的开始
4.  注意：如果您确定两个数据库没有重复的键，并且您想将它们组合成一个数据库，只需跳过`FE 01`上面提到的两个字节。
5.  从第二个文件中，跳过前 11 个字节 - 即跳过`REDIS000x FE 00`
6.  复制第二个文件的其余部分，包括最后一个字节`FF`

您现在可以将这个新的 dump.rdb 复制到 redis 中的相应目录并重新启动。

如果您有兴趣，[这里是 redis 转储文件格式的完整文档](https://github.com/sripathikrishnan/redis-rdb-tools/wiki/Redis-RDB-Dump-File-Format)，但是对于这个简单的用例，您不需要了解所有内容。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-28T18:33:10.107

这是我用来将 4 个 Redis 服务器（运行 2.4.x）合并为 2 个的技术（我，两次，将 2 个单独的 Redis 实例（每个在 db0 中的数据）合并为 1 个包含两个单独的 dbs）：

1.  使新实例 Foo 成为您的实例 A 的从属（即编辑`redis.conf`和使用`slaveof`）。
2.  一旦 Foo 从 A 完成同步，删除 slaveof 使其成为 master。所有数据都将在 db0 中。
3.  使用[redis-dump](https://github.com/delano/redis-dump)（Ruby 库，但具有命令行实用程序）导出或转储实例 B 中的所有数据。这将创建一个 JSON 文件。
4.  如果数据在实例 B 的 db0 中，您现在需要编辑第 3 步生成的 JSON 文件。这是 b/c，您不想将 B 的数据导入 Foo 的 db0，它现在包含 A 的数据。
    *   redis-dump 的格式包含每个键的源数据库；因此，您需要编辑文档以将 db 从 0 更改为其他值 - 1、2 等。
    *   我的 JSON 文件很大，所以我使用了 sed：`sed -e 's/\"db\":0/\"db\":3/' orig.json > db_3.json`
5.  使用 redis-dump 的`redis-load`命令将包含实例 B 中数据的 JSON 文件导入到 Foo 中。
    *   如果您编辑了 JSON 文件并将数据库更改为不同的内容，例如 3，那么您需要将数据导入该数据库，即`<new.json redis-load -u host:port -d 3`
    *   如果您有足够的数据（我正在导入 GB），则*可能*需要数小时。您可以通过在与目标 Redis 实例 (Foo) 相同的框上运行此过程来加快速度。

现在您有一个 Redis 实例 (Foo)，其中 A 的数据在 db0 中，B 的数据在 db1 中。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-03-20T14:04:52.253

我遇到了很多麻烦，所以我创建了一个使用转储和恢复的 python 脚本。它将一个数据库序列化为一个字典对象并对其进行图片化。使用不同的开关加载 picled 文件并将数据上传到其他 redis 实例。

[https://gist.github.com/romanmah/9664407](https://gist.github.com/romanmah/9664407)

# java - java - 如何使用JAX - RS和tomcat在Eclipse中使用Java中的Web服务插入和检索数据库中的数据

> ID：10083434
> 
> 赞同：0
> 
> 时间：2012-04-10T05:19:22.780
> 
> 标签：java, mysql, eclipse, tomcat, jersey

> **可能重复：**
> [如何使用 JAX 在 Java 中使用 Web 服务从数据库中插入数据 - RS](https://stackoverflow.com/questions/10069901/how-to-insert-data-from-database-with-web-service-in-java-using-jax-rs)

如何使用 JAX 从数据库中插入和检索数据 - RS(Jersey) 和 java 中使用 eclipse 的 tomcat？请给出解决方案。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-10T05:38:03.677

您可以为数据库使用休眠或 Spring 配置。您可以轻松地将 jersey 与 spring 集成。为 Jersey 和数据库创建 Common POJO 类。

这里有一些链接 -

[http://www.mkyong.com/webservices/jax-rs/jersey-spring-integration-example/](http://www.mkyong.com/webservices/jax-rs/jersey-spring-integration-example/)

[http://www.mkyong.com/spring/maven-spring-jdbc-example/](http://www.mkyong.com/spring/maven-spring-jdbc-example/)

# url - 使用 web.config 从 Windows 主机帐户的 URL 中删除 php 扩展

> ID：10083435
> 
> 赞同：2
> 
> 时间：2012-04-10T05:19:24.310
> 
> 标签：url, iis, web-config, seo

在问这个问题之前我已经搜索过了。回答的与 Linux 主机帐户有关，而具有 Windows 主机帐户的那些与我正在寻找的不匹配。

您可能已经猜到了，我有一个与 godaddy 共享的 Windows 主机帐户。我的目标是从 url 中删除“.php”扩展名。经过研究，我发现 .htaccess 完全符合我的要求。但我也发现 .htaccess 在 Windows 环境中不起作用，我需要一个 web.config 文件来执行相同的任务。

现在我知道有可以生成代码的模块，但问题是我不知道如何将它们安装在我的主机帐户上。我不想通过与 godaddy 的人联系的过程，因此我希望自己解决这个问题。我正在寻找的是与 .htaccess 等效的 web.config

这就是我想要实现的目标：

**当前网址：www.abcdef.com/contact.php**

**所需网址：www.abcdef.com/contact**

任何帮助将不胜感激。

谢谢，尼萨尔。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-10T05:24:37.817

尼萨尔，

本教程很好地解释了您需要使用 IIS 做什么。

[http://atlantawebsites.blogspot.com/2010/06/vanity-urls-with-godaddy-hosting-using.html](http://atlantawebsites.blogspot.com/2010/06/vanity-urls-with-godaddy-hosting-using.html)

这是你的样子：

```
<system.webServer> 
<rewrite> 
    <rules> 
        <rule name="contact"> 
            <match url="http://www.abcdef.com/contact.php" /> 
            <action type="Rewrite" url="http://www.abcdef.com/contact" /> 
        </rule> 
    </rules> 
</rewrite> 
```

# python - （Python）将字典转换为列表？

> ID：10083438
> 
> 赞同：0
> 
> 时间：2012-04-10T05:19:39.390
> 
> 标签：python

所以我有这本字典：

```
ScoreDict = {"Blue": {'R1': 89, 'R2': 80},
            "Brown": {'R1': 61, 'R2': 77},
            "Purple": {'R1': 60, 'R2': 98},
            "Green": {'R1': 74, 'R2': 91},
            "Red": {'R1': 87, 'Lon': 74}} 
```

有什么办法可以将这本字典转换成这样的列表：

```
ScoreList = [['Blue', 89, 80], ['Brown', 61, 77], 
['Purple', 60, 98], ['Green', 74, 91], ['Red', 87, 74]] 
```

我对字典不太熟悉，所以在这里我真的需要一些帮助。提前致谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-10T05:24:03.603

不按原始顺序保留数字，因为我在那里看不到任何逻辑顺序。

```
>>> ScoreDict = {"Blue": {'R1': 89, 'R2': 80},
            "Brown": {'R1': 61, 'R2': 77},
            "Purple": {'R1': 60, 'R2': 98},
            "Green": {'R1': 74, 'R2': 91},
            "Red": {'R1': 87, 'Lon': 74}}
>>> [[k]+i.values() for k,i in ScoreDict.iteritems()]
[['Blue', 89, 80], ['Brown', 61, 77], ['Green', 74, 91], ['Red', 74, 87], ['Purple', 60, 98]] 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-10T05:21:34.593

不可靠。没有理由将键保留在该顺序中，因此无法确保您可以从该字典中获取该列表。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-10T05:25:49.053

您可以尝试这样做：

```
ScoreList = [[key] + value.values() for key, value in ScoreDict.iteritems()] 
```

在循环形式中，它可能更有意义：

```
ScoreList = []

for key, value in ScoreDict.iteritems():
  temp = []

  temp.append(key)
  temp.extend(value.values())

  ScoreList.append(temp) 
```

您将面临的主要问题是字典没有排序。元素由它们的哈希索引，这意味着`value.values()`不会以任何特定顺序返回字典的值。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-04-10T06:04:34.217

一般来说，如果您使用的是普通字典，则不会保留顺序。如果您希望保留订单，最好使用 Ordered Dict。

首先假设，您不需要保留订单，然后，您可以执行以下操作来获得所需的输出

```
>>> [([k]+v.values()) for k,v in ScoreDict.items()]
[['Blue', 89, 80], ['Brown', 61, 77], ['Green', 74, 91], ['Red', 74, 87], ['Purple', 60, 98]]
>>> 
```

但是如果你对订单很认真，你的原始数据应该被组织成 OrderedDict。这是一个例子

```
>>> ScoreDict
OrderedDict([('Blue', OrderedDict([('R1', 89), ('R2', 80)])), ('Brown', OrderedDict([('R1', 61), ('R2', 77)])), ('Purple', OrderedDict([('R1', 60), ('R2', 98)])), ('Green', OrderedDict([('R1', 74), ('R2', 91)])), ('Red', OrderedDict([('R1', 87), ('R2', 74)]))]) 
```

您可以很容易地看到，应用上述解决方案如何产生相同的结果但保留顺序

```
>>> [([k]+v.values()) for k,v in ScoreDict.items()]
[['Blue', 89, 80], ['Brown', 61, 77], ['Purple', 60, 98], ['Green', 74, 91], ['Red', 87, 74]] 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-04-10T05:26:40.350

（这***非常***脆弱！）

```
ScoreList = [[colour, rs["R1"], rs["R2" if "R2" in rs else "Lon"]] for colour, rs in ScoreDict.items()] 
```

这会遍历每个键值对`ScoreDict`并从中创建列表。这里的重要功能是`.items()`（[文档](http://docs.python.org/library/stdtypes.html#dict.items)）。

（注意，在 Python 2.x 中`.iteritems`应该使用而不是`.items`避免构造中间列表。）

# php - 通配符虚拟主机的 Apache 通配符 SSL 证书，特别命名为虚拟主机

> ID：10083441
> 
> 赞同：1
> 
> 时间：2012-04-10T05:20:18.407
> 
> 标签：php, python, ssl, apache

我们正在运行一个为我们的客户使用自定义子域的 PHP 站点，因此我们在 Apache（版本 2.2.3）中实现了一个带有通配符 VHost 的通配符 SSL 证书。这些子域 PHP Web 应用程序还利用我们的 REST 和 RPC API 的两个 URL 前缀后面的 Pyramid Web 应用程序的反向代理。

我们还有一个在 Pyramid 上运行的管理界面。我们通常会简单地将代理反向代理到管理界面，但我似乎无法为这两个虚拟主机使用通配符 SSL 证书。我究竟做错了什么？

这是我们的虚拟主机配置：

```
NameVirtualHost *:443

<VirtualHost *:443>
    ServerName example.com
    ServerAlias *.example.com
    DocumentRoot /var/www/html/example/current/www
    ErrorLog logs/wild-example.com-SSL-error_log
    CustomLog logs/wild-example.com-SSL-access_log combined
    SSLEngine On
    SSLCertificateFile /etc/pki/tls/certs/star_example.com.2012.crt
    SSLCertificateKeyFile /etc/pki/tls/private/star_example.com.key
    SSLCACertificateFile /etc/pki/tls/certs/NetworkSolutions_CA.2012.crt
    <Directory /var/www/html/example/current/www>
        DirectoryIndex index.php
        Options FollowSymLinks
        AllowOverride All
    </Directory>
    ProxyRequests On
    ProxyPreserveHost On
    <Proxy *>
        Order deny,allow
        Allow from all
    </Proxy>
    ProxyPass /restapi/ http://127.0.0.1:6543/restapi/
    ProxyPassReverse /restapi/ http://127.0.0.1:6543/restapi/
    ProxyPass /rpcapi/ http://127.0.0.1:6543/rpcapi/
    ProxyPassReverse /rpcapi/ http://127.0.0.1:6543/rpcapi/
</VirtualHost>

<VirtualHost *:443>
    ServerName example.com
    ServerAlias admin.example.com
    DocumentRoot /var/www/html/example/current/www
    ErrorLog logs/admin-example.com-SSL-error_log
    CustomLog logs/admin-example.com-SSL-access_log combined
    SSLEngine On
    SSLCertificateFile /etc/pki/tls/certs/star_example.com.2012.crt
    SSLCertificateKeyFile /etc/pki/tls/private/star_example.com.key
    SSLCACertificateFile /etc/pki/tls/certs/NetworkSolutions_CA.2012.crt
    <Directory /var/www/html/example/current/www>
        DirectoryIndex index.php
        Options FollowSymLinks
        AllowOverride All
    </Directory>

    ProxyRequests On
    ProxyPreserveHost On
    <Proxy *>
        Order deny,allow
        Allow from all
    </Proxy>
    ProxyPass / http://127.0.0.1:6542/
    ProxyPassReverse / http://127.0.0.1:6542/
</VirtualHost> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-10T17:58:38.067

您是否在我们可以看到的 ssl_error 日志中收到错误消息？您应该能够只复制主虚拟主机并将其设置为特定的子域虚拟主机。

事实上，你原来的 *.example.com 应该只覆盖任何子域。我认为如果您只是将新子域指定为常规端口 80 虚拟主机，然后访问[https://admin.example.com](https://admin.example.com)的站点，它应该受到保护。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-09-10T10:45:31.373

删除以下行：

```
 ServerAlias *.example.com 
```

并在第二个 VirtualHost 部分中，更改 ServerName：

```
 ServerName admin.example.com 
```

拳头*。在第一个 VirtualHost 部分中捕获 admin.example.com。您也不希望它们都定义相同的 VirtualHost (example.com)。每个子域的 ServerName 需要不同。

# java - 如何使用java在文本文件中搜索特定段落

> ID：10083442
> 
> 赞同：0
> 
> 时间：2012-04-10T05:20:19.377
> 
> 标签：java

我有一个包含很多内容的文本文件。我找到了如何在文本文件中搜索单词的方法。但是我有一个地址需要搜索，你们都知道一个地址有多行（可以认为是一个段落），问题就来了。

如何将整个地址作为搜索输入？当我只给出一行地址时，我能够在文本文件中找到字符串，因为我使用 nextLine() 逐行读取。有没有办法可以将整个地址作为输入并在文本文件中搜索。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-10T05:33:17.067

您可以将整个文件读入一个字符串，然后尝试在该文件字符串中找到您的多行地址字符串。这是有效的，因为您不必执行许多文件 I/O 操作，并且它会起作用，因为[String.indexOf(String)](http://docs.oracle.com/javase/1.4.2/docs/api/java/lang/String.html#indexOf%28java.lang.String%29)可以找到其中包含换行符的字符串。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-10T05:45:07.443

是的，你可以试试@Oleksi 所说的！但是我建议使用 a`StringBuffer`而不是`String`.

像下面这样的东西应该工作......

```
BufferedReader br = new BufferedReader(new FileReader(new File("D:/Shashank/random.txt")));
        StringBuffer sb = new StringBuffer("");
        String address =  "line1\nline2\nline3";

        while(br.ready())
        {
            sb.append(br.readLine());
            sb.append("\n");
        }
        if(sb.indexOf(address)>=0)
        {
            System.out.println("Address found");
        } 
```

# android-emulator - 为公司内部用户部署 Android 应用程序

> ID：10083444
> 
> 赞同：0
> 
> 时间：2012-04-10T05:20:23.633
> 
> 标签：android-emulator, android

我开发了Android应用程序。现在我想把它交付给我们公司的用户。在不发布 Android Market 的情况下将其交付给用户的最佳方式是什么？

我可以将 APK 存储在服务器中并将链接发送给用户。用户可以从
他们的手机访问该链接并将APK下载到SD卡，然后安装到他们的手机上。那可能吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-10T05:21:28.677

如果您不想公开分发它，那么您所说的将起作用。您可以提供一个 APK，用户可以将其下载到他们的设备并直接从 APK 安装。或者，您可以通过 ADB 安装。

然而，这使得升级有点棘手。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-10T06:10:14.150

我之前所做的是在 Dropbox 上托管 APK，并提供一个公共 URL 供用户下载。一旦他们下载了它，一个弹出窗口会询问用户是否要安装它。这很容易设置。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-10T06:21:59.437

是的，您尝试做的是正确的，但请确保您还为用户提供 API 级别，因为您的应用程序可能无法在早期的 API 级别上运行。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-04-10T05:29:01.647

你的方法肯定会奏效。另一种方法是通过邮件作为附件发送。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2015-07-13T08:33:12.237

简单地将 .apk 分发给您的内部用户可能是最简单的设置方法，但是您不会从 Google Play 提供的自动应用更新中受益。

到目前为止，还有更多可用的解决方案，例如[私有渠道](https://support.google.com/a/answer/2494992)（适用于 Google Apps 用户）、用于内部分发的 Alpha/Beta 阶段（更像是 hack..）或复杂的[MDM](https://en.wikipedia.org/wiki/Mobile_device_management)解决方案。

请参阅我在[Google Play 部署中为内部公司用户提供](https://stackoverflow.com/questions/29371812/google-play-deployment-for-internal-company-user-only)[的答案](https://stackoverflow.com/a/31378605/1024108)，仅供参考。

# c# - 使用 C# 正则表达式替换字符串中的字符

> ID：10083446
> 
> 赞同：3
> 
> 时间：2012-04-10T05:20:27.167
> 
> 标签：c#, regex, string

我想知道如何用另一个字符替换`,`数组括号内`[]`的字符，比如`.`. 我的字符串表达式如下：

> 属性["412324 - PENNDOT I-95", "Category"].Value, Attributes["412324 - PENNDOT I-95", "Category"].Code

预期的输出应该是：

> 属性[“412324 - PENNDOT I-95”。“类别”].值，属性 [“412324 - PENNDOT I-95”。“类别”].代码

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-10T05:29:16.433

```
var regex = new Regex(@"(?<=\[[^\[\]]*),(?=[^\[\]]*\])");
return regex.Replace(<your sample string>, "."); 
```

在正则表达式模式中，左边`,`是一个积极的后向零宽度断言，这意味着必须有一个`[`，然后是零个或多个既不是逗号`[`也不`]`是逗号的字符。

在逗号之后，一个正向前瞻零宽度断言，这意味着可以有零个或多个字符既不是`[`也不是`]`必须有一个结束`]`。

零宽度断言意味着模式必须在匹配的文本之前或之后，但不是匹配的一部分。由于我们只匹配`,`我们的替换只是`.`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-10T05:29:02.253

如果它总是在这个 sheme 中，那么 String.Replace 会更快：

```
string sin = "Attributes["412324 - PENNDOT I-95", "Category"].Value, Attributes["412324 - PENNDOT I-95", "Category"].Code";
string sout = sin.Replace("\", \"","\". \""); 
```

你可以用 RegEx 做同样的事情，但它会更慢，如果输入字符串改变它的结构，它仍然会中断

# java - 在Java中选择文件夹目标？

> ID：10083447
> 
> 赞同：46
> 
> 时间：2012-04-10T05:20:27.627
> 
> 标签：java, directory

我是Java的新手。我正在尝试动态选择文件位置以保存我的项目的结果（在我的项目开始时启动）。我使用了几个 FileDialog 示例，但每个示例都允许我选择一个文件而不是文件夹。

任何人都可以帮我提供一个示例（或）链接吗？

* * *

## 回答 #1

> 赞同：84
> 
> 时间：2012-04-10T05:27:38.197

您可以尝试这样的事情（如此处所示：[使用 JFileChooser 选择目录](http://www.rgagnon.com/javadetails/java-0370.html)）：

```
import javax.swing.*;
import java.awt.event.*;
import java.awt.*;
import java.util.*;

public class DemoJFileChooser extends JPanel
   implements ActionListener {
   JButton go;

   JFileChooser chooser;
   String choosertitle;

  public DemoJFileChooser() {
    go = new JButton("Do it");
    go.addActionListener(this);
    add(go);
   }

  public void actionPerformed(ActionEvent e) {            
    chooser = new JFileChooser(); 
    chooser.setCurrentDirectory(new java.io.File("."));
    chooser.setDialogTitle(choosertitle);
    chooser.setFileSelectionMode(JFileChooser.DIRECTORIES_ONLY);
    //
    // disable the "All files" option.
    //
    chooser.setAcceptAllFileFilterUsed(false);
    //    
    if (chooser.showOpenDialog(this) == JFileChooser.APPROVE_OPTION) { 
      System.out.println("getCurrentDirectory(): " 
         +  chooser.getCurrentDirectory());
      System.out.println("getSelectedFile() : " 
         +  chooser.getSelectedFile());
      }
    else {
      System.out.println("No Selection ");
      }
     }

  public Dimension getPreferredSize(){
    return new Dimension(200, 200);
    }

  public static void main(String s[]) {
    JFrame frame = new JFrame("");
    DemoJFileChooser panel = new DemoJFileChooser();
    frame.addWindowListener(
      new WindowAdapter() {
        public void windowClosing(WindowEvent e) {
          System.exit(0);
          }
        }
      );
    frame.getContentPane().add(panel,"Center");
    frame.setSize(panel.getPreferredSize());
    frame.setVisible(true);
    }
} 
```

* * *

## 回答 #2

> 赞同：37
> 
> 时间：2013-01-16T23:46:12.830

Oracles Java 文件选择器教程：http: [//docs.oracle.com/javase/tutorial/uiswing/components/filechooser.html](http://docs.oracle.com/javase/tutorial/uiswing/components/filechooser.html)

注意`getSelectedFile()`返回选定的文件夹，尽管名称。 `getCurrentDirectory()`返回所选文件夹的目录。

```
import javax.swing.*;

public class Example
{
    public static void main(String[] args)
    {
        JFileChooser f = new JFileChooser();
        f.setFileSelectionMode(JFileChooser.DIRECTORIES_ONLY); 
        f.showSaveDialog(null);

        System.out.println(f.getCurrentDirectory());
        System.out.println(f.getSelectedFile());
    }      
} 
```

* * *

## 回答 #3

> 赞同：15
> 
> 时间：2012-04-10T05:26:16.037

尝试这样的事情

```
JFileChooser chooser = new JFileChooser();
chooser.setCurrentDirectory(new java.io.File("."));
chooser.setDialogTitle("select folder");
chooser.setFileSelectionMode(JFileChooser.DIRECTORIES_ONLY);
chooser.setAcceptAllFileFilterUsed(false); 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2017-03-31T10:46:01.687

与 JFileChooser 一起可以使用这个：

```
UIManager.setLookAndFeel("com.sun.java.swing.plaf.windows.WindowsLookAndFeel"); 
```

有一个像 Windows 一样的外观和感觉。

对于其他设置，请在此处查看： [https ://docs.oracle.com/javase/tutorial/uiswing/lookandfeel/plaf.html#available](https://docs.oracle.com/javase/tutorial/uiswing/lookandfeel/plaf.html#available)

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2018-02-26T17:48:37.220

[我在这个链接](http://www.java2s.com/Code/Java/Swing-JFC/SelectadirectorywithaJFileChooser.htm)中找到了你需要的一个很好的例子。

```
import javax.swing.JFileChooser;

public class Main {
  public static void main(String s[]) {
    JFileChooser chooser = new JFileChooser();
    chooser.setCurrentDirectory(new java.io.File("."));
    chooser.setDialogTitle("choosertitle");
    chooser.setFileSelectionMode(JFileChooser.DIRECTORIES_ONLY);
    chooser.setAcceptAllFileFilterUsed(false);

    if (chooser.showOpenDialog(null) == JFileChooser.APPROVE_OPTION) {
      System.out.println("getCurrentDirectory(): " + chooser.getCurrentDirectory());
      System.out.println("getSelectedFile() : " + chooser.getSelectedFile());
    } else {
      System.out.println("No Selection ");
    }
  }
} 
```

# delphi - TRttiMethod.Invoke 函数在重载方法中不起作用？

> ID：10083448
> 
> 赞同：6
> 
> 时间：2012-04-10T05:20:38.800
> 
> 标签：delphi, delphi-xe2, rtti

[我正在使用TRttiMethod.Invoke](http://docwiki.embarcadero.com/Libraries/en/System.Rtti.TRttiMethod.Invoke)函数创建一个类的实例，但是当构造函数或方法被重载时，rtti 不会调用正确的方法。

我写了一个示例应用程序来说明我的问题。

```
program ProjectFoo;

{$APPTYPE CONSOLE}

{$R *.res}

uses
  Rtti,
  System.SysUtils;

type
  TFoo=class
  public
    constructor Create(Value :  Integer);overload;
    constructor Create(const Value :  string);overload;
    function Bar(value : integer) : Integer; overload;
    function Bar(const value : string) : string; overload;
  end;

{ TFoo }

constructor TFoo.Create(Value: Integer);
begin
   Writeln(Value);
end;

function TFoo.Bar(value: integer): Integer;
begin
   Writeln(Value);
   Result:=value;
end;

function TFoo.Bar(const value: string): string;
begin
   Writeln(Value);
   Result:=value;
end;

constructor TFoo.Create(const Value: string);
begin
   Writeln(Value);
end;

var
 c : TRttiContext;
 t : TRttiInstanceType;
 r : TValue;
begin
  try
   c := TRttiContext.Create;
   t := (c.GetType(TFoo) as TRttiInstanceType);
   r := t.GetMethod('Create').Invoke(t.MetaclassType,[444]);//this works 
   //r := t.GetMethod('Create').Invoke(t.MetaclassType,['hello from constructor string']);//this fails : EInvalidCast: Invalid class typecast
   t.GetMethod('Bar').Invoke(r,[1]);// this works
   //t.GetMethod('Bar').Invoke(r,['Hello from bar']); //this fails : EInvalidCast: Invalid class typecast
  except
    on E: Exception do
      Writeln(E.ClassName, ': ', E.Message);
  end;
   readln;
end. 
```

这是一个 RTTI 错误？还是存在另一种使用 RTTI 调用类的重载方法的方法？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-04-10T05:44:46.223

该`TRttiMethod.Invoke`方法没有任何问题，您的问题位于[`GetMethod`](http://docwiki.embarcadero.com/Libraries/en/System.Rtti.TRttiType.GetMethod). 此函数在内部调用[`TRttiType.GetMethods`](http://docwiki.embarcadero.com/Libraries/en/System.Rtti.TRttiType.GetMethods)并检索指向与作为参数传递的名称匹配的第一个方法的指针。因此，当您执行此代码时，`t.GetMethod('Create')`您总是会获得指向同一方法的指针。

要执行构造函数或其他方法的重载版本，您必须根据参数解析要执行的方法地址，然后调用该`TRttiMethod.Invoke`函数。

检查此示例功能。

```
function RttiMethodInvokeEx(const MethodName:string; RttiType : TRttiType; Instance: TValue; const Args: array of TValue): TValue;
var
 Found   : Boolean;
 LMethod : TRttiMethod;
 LIndex  : Integer;
 LParams : TArray<TRttiParameter>;
begin
  Result:=nil;
  LMethod:=nil;
  Found:=False;
  for LMethod in RttiType.GetMethods do
   if SameText(LMethod.Name, MethodName) then
   begin
     LParams:=LMethod.GetParameters;
     if Length(Args)=Length(LParams) then
     begin
       Found:=True;
       for LIndex:=0 to Length(LParams)-1 do
       if LParams[LIndex].ParamType.Handle<>Args[LIndex].TypeInfo then
       begin
         Found:=False;
         Break;
       end;
     end;

     if Found then Break;
   end;

   if (LMethod<>nil) and Found then
     Result:=LMethod.Invoke(Instance, Args)
   else
     raise Exception.CreateFmt('method %s not found',[MethodName]);
end; 
```

现在您可以通过以下方式之一调用类的构造函数或方法

```
 r := RttiMethodInvokeEx('Create', t, t.MetaclassType, [444]);
   r := RttiMethodInvokeEx('Create', t, t.MetaclassType, ['hello from constructor string']);
   r := RttiMethodInvokeEx('Create', t, t.MetaclassType, []);
   RttiMethodInvokeEx('Bar', t, r.AsObject , ['this is a string']);
   RttiMethodInvokeEx('Bar', t, r.AsObject , [9999]); 
```

# c - 将指向指针变量的指针从 Fortran 77 传递到 C

> ID：10083449
> 
> 赞同：2
> 
> 时间：2012-04-10T05:20:39.407
> 
> 标签：c, pointers, fortran77, mixed

我必须编写一些将 Fortran 77 与 C 混合的代码。假设我有一个带有签名的 C 函数

```
void foo(int ** x); 
```

因此，如果我在 C 中调用**foo**，我可能会有

```
int x_val = 42;
int * x_ptr = &x_val;
foo(&x_ptr); 
```

现在假设我在 Fortran 77 中有这个：

```
integer x
x = 42 
```

如果我将***x***传递给***foo***，那将相当于在 C 代码中将 "&x" 传递给***foo***，但这不起作用。我是否需要创建***x***的 Cray 指针，然后将 Cray 指针传递给***foo***？那行得通吗？没有 Cray 指针有没有办法做到这一点？谢谢！

# mysql - 一对多关系

> ID：10083450
> 
> 赞同：0
> 
> 时间：2012-04-10T05:20:41.433
> 
> 标签：mysql, database, relational-database, constraints, entity-relationship

我想在以下两个表之间创建一对可选的多关系。

```
'FK_transactionmember' FOREGIN KEY ('MemberID') REFERENCES 'member' ('ID') 
```

我创建外键约束女巫是**一对多的**关系（上图）。在这种情况下，交易必须需要成员 ID，但成员是可选的。

**如何控制这种可选情况？**

**会员：**

```
CREATE TABLE `member` (
`ID` int(11) NOT NULL AUTO_INCREMENT,
`FirstName` varchar(30) DEFAULT NULL,
`LastName` varchar(30) DEFAULT NULL,
`PermanentAddress` varchar(100) DEFAULT NULL,
`TemporaryAddress` varchar(100) DEFAULT NULL,
`Zip` varchar(30) DEFAULT NULL,
`City` varchar(30) DEFAULT NULL,
`LastVisit` datetime DEFAULT NULL,
`TotalVisit` datetime DEFAULT NULL,
`Active` tinyint(1) DEFAULT NULL,
 PRIMARY KEY (`ID`)
 ) ENGINE=InnoDB DEFAULT CHARSET=latin1 
```

**交易**

```
CREATE TABLE `transaction` (
`ID` int(11) NOT NULL AUTO_INCREMENT,
`MemberID` int(11) DEFAULT '0',
`UserID` int(11) DEFAULT NULL,
`Total` float DEFAULT NULL,
PRIMARY KEY (`ID`)
) ENGINE=InnoDB DEFAULT CHARSET=latin1 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-10T05:52:49.653

如果 MemberID 是可选的，则其默认值必须为空，而不是零。因此，如果不存在数据，则将允许 null 值。

```
CREATE TABLE `transaction` (
    `ID` int(11) NOT NULL AUTO_INCREMENT,
    `MemberID` int(11) DEFAULT NULL,
    `UserID` int(11) DEFAULT NULL,
    `Total` float DEFAULT NULL,
    PRIMARY KEY (`ID`),
    KEY `FK_transactionmember` (`MemberID`),
    CONSTRAINT `FK_transactionmember` FOREGIN KEY (`MemberID`) REFERENCES `member` (`ID`) ON DELETE CASCADE ON UPDATE CASCADE,
) ENGINE=InnoDB DEFAULT CHARSET=latin1 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-10T05:55:12.493

（最后）有两种创建表的方法，如下所示：

```
CREATE TABLE `transaction` (
`ID` int(11) NOT NULL AUTO_INCREMENT,
`MemberID` int(11) NULL,
`UserID` int(11) DEFAULT NULL,
`Total` float DEFAULT NULL,
PRIMARY KEY (`ID`),
CONSTRAINT 'FK_transactionmember' 
    FOREGIN KEY ('MemberID') 
    REFERENCES 'member' ('ID')
    ON DELETE NO ACTION
    ON UPDATE NO ACTION
) 
```

并在您无法将其与成员连接时设置`MemberID`为。`null`我认为这很好，但它不符合[BNF](http://en.wikipedia.org/wiki/Boyce%E2%80%93Codd_normal_form)要求或使用不同的表来链接两个表，如下所示：

```
CREATE TABLE `MemberTransactions` (
`MemberID` int(11) NULL,
`TransactionID` int(11) DEFAULT NULL,

CONSTRAINT 'FK_member' 
    FOREGIN KEY ('MemberID') 
    REFERENCES 'member' ('ID')
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
CONSTRAINT 'FK_transaction' 
    FOREGIN KEY ('TransactionID') 
    REFERENCES 'transaction' ('ID')
    ON DELETE NO ACTION
    ON UPDATE NO ACTION
) 
```

然后`transaction`是没有`MemberID`列的表。

**添加**了类似的问题：[Nullable Foreign Key bad practice?](https://stackoverflow.com/questions/1723808/nullable-foreign-key-bad-practice) .

# java - Restlet 框架。序列化。不明白如何发送和接收对象

> ID：10083466
> 
> 赞同：1
> 
> 时间：2012-04-10T05:22:12.740
> 
> 标签：java, rest, restlet, restlet-2.0

我正在使用 RESTlet 框架。

我不明白服务器如何获取客户端发送的对象。例如。我在客户端有这样一个界面：

```
public interface AuthorizationResource {
    @Post
    public void login(Authentication auth);
} 
```

然后我将 Authentication 类的对象发送到服务器：

```
Authentication auth = new Authentication ("login", "password");

resource.login(auth); 
```

Authentication 类（这两个类在服务器和客户端上也都可用）：

```
public class Authentication implements Serializable{

    private static final long serialVersionUID = 1L;

    public String login;
    public String password; 

    public Authentication() {}

    public Authentication(String login, String password) {
        super();
        this.login = login;
        this.password = password;
    }

    public String getLogin() {
        return login;
    }

    public String getPassword() {
        return password;
    }

    public void setLogin(String login) {
        this.login = login;

    }

    public void setPassword(String password) {
        this.password = password;
    }
} 
```

然后在服务器端，我想获取 Authentication 类的对象：

```
public class AuthenticationServerResource extends ServerResource {

    Authentication auth = new Authentication("defaultLogin", "defaultPassword");

    @Post
    public void login (Authentication auth) {
        this.auth = auth;
                System.out.println(auth.getLogin());
    }
} 
```

但什么也没发生。控制台不输出任何东西。

我的问题，这是序列化对象的最佳方式？我的方法对吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-03T19:43:56.650

您需要为此使用 ClientResource。它应该类似于以下内容：

```
ClientResource cr = new ClientResource(PATH_TO_URL);
AuthorizationResource proxy = cr.wrap(AuthorizationResource.class)
proxy.login(auth); 
```

# salesforce - 文本区域上的换行符

> ID：10083472
> 
> 赞同：7
> 
> 时间：2012-04-10T05:22:51.570
> 
> 标签：salesforce, apex-code, visualforce

我有一个名为 Current_Address__c 的自定义字段，其数据类型为 textarea。

我需要按以下格式填充此字段。即街道后的换行符和zip后的另一个换行符。

街道 城市 国家 邮编 国家

城市国家邮政编码国家等的值取自联系对象。我不想将其用作公式字段。所以我需要在我的控制器中填充它并在我的 VF 页面上显示它。

我正在尝试使用下面的代码添加换行符

```
this.customobj.Current_Address__c = currentStreet + '\\n ' + currentCity + ' ' + currentState  + ' ' + currentZIP  + '\\n ' + currentCountry ; 
```

我也使用了 \n 而不是 \n。

它仍然以一行而不是 3 行显示该字段

编辑

我使用以下代码完成了这项工作。我会接受 mathews 的答案，因为它可以与 outputfield 一起使用。

```
 currentAddress = currentStreet;
            currentAddress += '\r\n';
            currentAddress += currentCity + + ' ' + currentState  + ' ' + currentZIP ;
            currentAddress += '\r\n';
            currentAddress += currentCountry; 
```

这仅在您使用 += 时有效。不知道为什么会这样

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-04-10T14:01:04.293

我想我找到了问题，你有两个转义字符斜杠（`\\n`），但只需要一个，因为`\n`在这种情况下不需要转义斜杠。

此外，Salesforce 将新行另存为`\r\n`. 试试这个：

```
this.customobj.Current_Address__c 
    = currentStreet + ' \r\n' 
    + currentCity + ' ' + currentState  + ' ' + currentZIP  + ' \r\n' 
    + currentCountry; 
```

此方法在使用**`<apex:outputfield>`**带有 sObject 字段的 an 时有效。

```
<apex:outputtext value="{!myCustomSObject__c.Address__c}"/> 
```

如果您使用不同的 Visualforce 组件，它将不起作用。使用`<apex:outputtext>`组件时，Visualforce 会在 HTML 中呈现新行，但 HTML 会忽略新行。如果您使用`<br/>`标签，Visualforce 会将其呈现为`&lt;br/&gt;`.

对于呈现包含新行的变量（而不是 sObject 字段），我能想出的最佳解决方案是使用 disabled `<apex:inputtextarea>`.

```
<apex:inputtextarea value="{!myAddress}" disabled="true" readonly="true">
</apex:inputtextarea> 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-08-21T15:09:15.503

最近我遇到了同样的问题，我想在我找到的解决方案中重新添加新行，这有点棘手，但它有效：

```
<apex:outputText value="{!SUBSTITUTE(JSENCODE(textVariableThanContainsNewLines), '\\n', '<br/>')}" escape="false"/> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-08-19T09:07:10.477

试试这个：

控制器

```
public List<String> getLetterLines() {
    if (letterBody == null) {
        return new List<String>();
    }
    return letterBody.split('\n');
} 
```

VF 页面：

```
<apex:repeat value="{!letterLines}" var="letterLine">
    <apex:outputText value="{!letterLine}" /><br />
</apex:repeat> 
```

玩得开心！

* * *

## 回答 #4

> 赞同：-3
> 
> 时间：2015-01-21T21:50:34.057

value="备注: {!SUBSTITUTE(JSENCODE(textVariableThanContainsNewLines), '\r\n', '
')}"

# android - 如何在android中自定义listview中从第一个到最后一个更改editext值

> ID：10083475
> 
> 赞同：0
> 
> 时间：2012-04-10T05:23:26.853
> 
> 标签：android, android-listview

我从数据库中获取菜单名称，然后附加到自定义列表视图编辑文本。现在我正在更改 edittext 中的一些值。我希望将 edittext 值更改的所有值放入数组中

```
 Example :x,y,z menunames comes from database i append editext(Custom listview)
           now i am changed y to b 
           now i want x,b,z in arraylist 
```

我试试这个代码（基本适配器类）

```
 public View getView(int position, View convertView, ViewGroup parent) {
    final ViewHolder holder;

    if (convertView == null) {
        holder = new ViewHolder();
        convertView = inflater.inflate(R.layout.editmainmenulist, null);
        holder.caption = (EditText) convertView
                .findViewById(R.id.editmaimenu);
        holder.caption1=(ImageView) convertView.findViewById(R.id.menuimage);
        convertView.setTag(holder);
    } else {
        holder = (ViewHolder) convertView.getTag();
    }
    //Fill EditText with the value you have in data source
    holder.caption.setText(itemnames[position]);
    holder.caption.setId(position);
    holder.caption1.setImageBitmap(bmps[position]);

    arr.add(holder.caption.getText().toString());//here i get menunames data only not changed edittext values

    return convertView;
}
  }

 class ViewHolder {
EditText caption;
ImageView caption1;
}

 class ListItem {
String caption;
 } 
```

请帮我

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-10T06:15:10.020

如果新数据来自数据库，那么您必须再次调用游标并再次 setAdapter 到 listView..

或者如果数据已经在数组列表中，那么您只是用来使 listView 无效。n 再次设置适配器......你会得到你想要的......

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-10T05:32:13.467

将数据保留在arraylist中，并在更改arraylist中的文本后，使用适配器再次调用listview，如下所示

```
 lv.invalidate(); // it will rebuilt all the views in listview
      adapter=new adapterclass(this);
      lv.setAdapter(adapter); 
```

它会改变listview的值并调用listview的invalidateview方法，它会改变listview的数据。试试看。它可能会帮助你。

# java - 我是否需要为测试用例使用的 util 类编写测试用例

> ID：10083477
> 
> 赞同：1
> 
> 时间：2012-04-10T05:23:37.483
> 
> 标签：java, file-io, junit, junit4

我有多个使用通用方法的测试用例的情况。因此，为了避免 DRY（不要重复自己），我将它们放入 util 类中。所以现在我需要为 util 类编写一个测试用例。util 类包含的所有内容都是读取特定文件并返回其内容。

谢谢，斯里拉姆

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-10T05:33:18.067

一般规则是：尽可能多地测试，直到您对程序正确感到满意为止。

用于测试的不正确的实用程序类将如何影响程序的行为？我不知道您的具体程序，但不正确的测试实用程序类不会影响您程序的正确性。相反，它可以让你认为你的程序是正确的，而实际上它是不正确的，或者认为它是不正确的，而实际上它是正确的。所以我对实用程序类进行测试的本能*不是*直接测试类，而是通过心理证明过程并确定实用程序方法是正确的，因此不会欺骗我对程序正确性的错误信念。

特别是在您的情况下，实用程序类仅读取文件并返回其内容，您可能不需要编写测试用例。这么简单的代码应该很容易验证是否正确，因此在心理上证明正确性将比编写测试用例更便宜。

NB 对所有代码进行心理验证过程非常有帮助。一些流行的调试“技巧”，例如[橡皮鸭调试](http://en.wikipedia.org/wiki/Rubber_duck_debugging)，实际上只是强迫自己证明（至少在您的脑海中）您的代码片段是正确的，或者至少不是明显不正确的方法。

# html - 如何使用 CSS 为标题的父 li 元素设置样式？

> ID：10083479
> 
> 赞同：2
> 
> 时间：2012-04-10T05:23:54.237
> 
> 标签：html, css, html-lists, html-heading

我希望能够在包含主要标题（和）的所有元素上设置属性`list-style-type: none;`。`li``<h1>``<h2>``<h3>`

起初我试过这个 -

```
li h1,
li h2,
li h3 {
    list-style-type: none;
} 
```

但后来我意识到它不起作用，因为它是在标题上设置属性，而不是列表元素。

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-10T05:31:48.850

您可以为包含标题元素的 li 项目分配一个类，并将列表样式设置为无。

例如：

```
li.header {list-style:none;} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-10T09:49:19.703

尝试以下操作：

**CSS：**

```
 li {
        list-style-type: none;
    } 
```

**HTML：**

```
 <ul>
       <li><h1>test1</h1></li>
       <li><h1>Test2</h1></li>
   </ul> 
```

# java - commons-logging-1.1.jar；无法读取 zip 文件条目

> ID：10083482
> 
> 赞同：0
> 
> 时间：2012-04-10T05:24:13.567
> 
> 标签：java, gwt, maven

我从 GIT 导入了一个 GWT 项目，但是当我运行 maven Install 时，它说

```
.m2\repository\commons-logging\commons-logging\1.1\commons-logging-1.1.jar; cannot read zip file entry 
```

如果我只是运行我的应用程序，我会得到这个

```
\git\my-Search-Engine\qsse\war}: java.lang.NoClassDefFoundError: com/google/inject/servlet/GuiceServletContextListener 
```

我试图找出方法，我找到的一个解决方案是将 guice-servlet-3.0 从构建路径移动到 \qsse\war\webinf\lib

但如果我这样做，我开始得到这个异常

```
 ava.lang.NoClassDefFoundError: com/google/inject/Injector 
```

知道我该如何解决这个问题

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-10T06:52:04.927

对于第一个问题：

你能用 WinZip 或其他压缩工具打开它吗？

尝试删除它`jar`并重新构建。让 Maven 重新下载它。

对于第二个任务：

您使用的是哪个 GWT 版本？

1.  验证所需的 JAR 是否在您的`classpath`包含`guice.jar`和`guice-servlet-3.0.jar`

而且，`guice-servlet-3.0.jar` **不应该在你启动配置**类路径中。它必须在您的项目类路径中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-10T07:50:45.793

对于第二个问题，您也可以将其他 guice jar 移动到 webinf\lib 吗？（guice-3.0.jar 应该没有了）

# php - JQuery Ajax 更新 MySQL 数据库，但没有运行成功函数

> ID：10083483
> 
> 赞同：2
> 
> 时间：2012-04-10T05:24:16.730
> 
> 标签：php, javascript, jquery, mysql, ajax

我目前正在使用 JQuery ajax 函数来调用外部 PHP 文件，我在其中选择并在数据库中添加数据。完成后，我在 JavaScript 中运行一个成功函数。奇怪的是，调用ajax时数据库正在成功更新，但是成功函数没有运行。这是我的代码：

```
<!DOCTYPE html>
<head>
<script type="text/javascript" src="jquery-1.6.4.js"></script>
</head>
<body>
<div onclick="addtask();" style="width:400px; height:200px; background:#000000;"></div>
<script>
function addtask() {
var tid = (Math.floor(Math.random() * 3)) + 1;
var tsk = (Math.floor(Math.random() * 10)) + 1;

if(tsk !== 1) {
    $.ajax({
    type: "POST",
    url: "taskcheck.php",
    dataType: "json",
    data: {taskid:tid},
    success: function(task) {alert(task.name);}
    });
}
}

</script>
</body>
</html> 
```

和 PHP 文件：

```
session_start(); 

$connect = mysql_connect('x', 'x', 'x') or die('Not Connecting'); 
mysql_select_db('x') or die ('No Database Selected'); 

$task = $_REQUEST['taskid']; 
$uid = $_SESSION['user_id']; 

$q = "SELECT task_id, taskname FROM tasks WHERE task_id=" .$task. " LIMIT 1"; 
$gettask = mysql_fetch_assoc(mysql_query($q)); 

$q = "INSERT INTO user_tasks (ut_id, user_id, task_id, taskstatus, taskactive) VALUES (null, " .$uid. ", '{$gettask['task_id']}', 0, 1)"; 
$puttask = mysql_fetch_assoc(mysql_query($q)); 

$json = array( 
    "name" => $gettask['taskname'] 
); 

$output = json_encode($json); 
echo $output; 
```

如果您有任何问题或意见，请告诉我，谢谢。

![在此处输入图像描述](../Images/0962310490008db20414ddf885f44241.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-10T05:30:39.100

我相信它会运行，但由于错误而不会显示警报-

```
success: function(task) {alert(task.name);} 
```

您必须先用 解码 JSON `jQuery.parseJSON()`，任务只是一个字符串，它应该看起来像这样

```
function(m)
        {
            var task = jQuery.parseJSON( m );
            alert(task['name']);
        } 
```

编辑：好的......尝试在您的浏览器中使用开发人员工具并在您的成功函数上放置断点，如果它甚至没有午餐尝试为您的ajax调用添加错误回调

```
error: function(xhr, exc)
{
   alert(xhr.status);
   alert(exc);
} 
```

Edit2：还有你的问题 - 你的 ajax 不仅返回 json 数据，而且还返回 php 警告，现在我知道你的问题在哪里 - 你在插入、删除后获取数据

```
$puttask = mysql_fetch_assoc(mysql_query($q)); 
```

现在我为没有早点注意到它而感到难过...

# php - 在 Jquery 自动完成中的通知

> ID：10083488
> 
> 赞同：1
> 
> 时间：2012-04-10T05:24:50.757
> 
> 标签：php, javascript, jquery

如果我收到此通知，有什么问题：

**注意**：未定义索引：第 80行**C:\xampp\htdocs\projects\wesm\intranet\plugins\survey_manager\index.php**中的**8**

我正在使用jquery自动完成..

这是我发生错误的一些javascript代码：

```
<script type='text/javascript'>
    var intranetUsers = ["<?php echo $content[0].' ", "';
        $num = 1;
        while($num != $getInranetUserCount['num']){
            echo $content[$num].'" , "';
            $num = $num + 1;
        }
            echo $content[$getInranetUserCount['num']];
    ?>"];

</script> 
```

我已经在某个模块中使用了该代码并且它有效我不知道为什么这次它不起作用。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-10T05:33:05.350

```
var intranetUsers = ["<?php echo $content[0].' ", "'; 
```

肯定会出错。在不知道 $content 或 $getInranetUserCount 的值的情况下，我不确定您要在这里做什么。也许一个更好的问题是解释你想要做什么，而不是仅仅给出一个没有上下文我们都不会理解的小片段。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-10T05:39:09.840

您的`$content`数组很可能缺少`$num == 8`. 您会在应用程序的其他地方找到问题的根源。

一般来说，以这种方式将 PHP 与 Javascript 内联是一个坏主意。至少考虑将其分解：

```
<?php
// Start capturing output to buffer
ob_start();
// Create string
echo $content[0].' ", "';
$num = 1;
while($num != $getInranetUserCount['num']){
    echo $content[$num].'" , "';
    $num = $num + 1;
}
echo $content[$getInranetUserCount['num']];
// Get output from buffer
$out = ob_get_contents();
// End buffering
ob_end_clean();
?>

<script type='text/javascript'>
    var intranetUsers = ["<?php echo $out ?>"];
</script> 
```

# java - 如何在休眠中将两个类字段（不引用任何其他表）作为复合键？

> ID：10083491
> 
> 赞同：0
> 
> 时间：2012-04-10T05:25:05.997
> 
> 标签：java, hibernate

我想让 pgId 和 pgName 都作为复合键，其中 pgId 和 pgName 都是分配的值。我不知道我应该怎么做？在网上我得到了复合键列引用其他表的列但不是这种情况的例子？

```
@Entity
@Table(name = "PersonDetails")
public class PersonDetailsData implements Serializable {
  private static final long serialVersionUID    = 1L;

  @Id
  @Basic
  private int               pgId;

  @Basic(optional = true)
  @Column(nullable = true)
  private int               orgId;

  @Basic(optional = true)
  @Column(nullable = true)
  private String            pgName;

   public PersonWikiDetailsData() {
  }

  public int getPpId() {
    return ppId;
  }

  public void setPpId(int ppId) {
this.ppId = ppId;
  }

  public String getSpaceName() {
return spaceName;
  }

  public void setSpaceName(String spaceName) {
this.spaceName = spaceName;
  }

  } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-10T05:39:30.733

在我们的项目中，我们有一个 Form 实体，它像您的项目一样具有 2 部分主键。

这是复合键类：

```
@Embeddable
public class FormId implements java.io.Serializable
{
    /** Generated <code>serialVersionUID</code>. */
    private static final long serialVersionUID = 906178514456716120L;

    /** The code of the form. */
    @Column(name = "FRM_CD", nullable = false, length = 80)
    private String formCode;
    /** The version of the form. */
    @Column(name = "FRM_VR", nullable = false, precision = 2, scale = 2)
    private BigDecimal formVersion;

    ...
} 
```

这就是它在 Form 实体中的使用方式：

```
/** The primary key of the form. */
@EmbeddedId
private FormId formId; 
```

# php - Wordpress SQL_CALC 修复导致 PHP 错误

> ID：10083495
> 
> 赞同：0
> 
> 时间：2012-04-10T05:25:26.497
> 
> 标签：php, mysql, wordpress

我正在寻找有关 Wordpress 的旧主题的后续内容，当您在 Wordpress 中拥有大型数据库时，发现 SQL_CALC 会减慢速度。我一直在使用这篇文章底部的代码来解决它，但它确实在我的错误日志中生成了一个错误。我将如何防止此错误？

```
 PHP Warning:  Division by zero in /var/www/vhosts/domain.com/httpdocs/wp-content/themes/greatTheme/functions.php on line 19 
```

原帖： [http ://wordpress.org/support/topic/slow-queries-sql_calc_found_rows-bringing-down-site?replies=25](http://wordpress.org/support/topic/slow-queries-sql_calc_found_rows-bringing-down-site?replies=25)

我的functions.php中的代码：

```
 add_filter('pre_get_posts', 'optimized_get_posts', 100);
 function optimized_get_posts() {
    global $wp_query, $wpdb;

    $wp_query->query_vars['no_found_rows'] = 1;
    $wp_query->found_posts = $wpdb->get_var( "SELECT COUNT(*) FROM wp_posts WHERE 1=1 AND wp_posts.post_type = 'post' AND (wp_posts.post_status = 'publish' OR wp_posts.post_status = 'private')" );
    $wp_query->found_posts = apply_filters_ref_array( 'found_posts', array( $wp_query->found_posts, &$wp_query ) );
    $wp_query->max_num_pages = ceil($wp_query->found_posts / $wp_query->query_vars['posts_per_page']);

    return $wp_query;
 } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-10T06:58:31.467

大概`$wp_query->query_vars['posts_per_page']`设置为 0，这意味着您要求 PHP 除以`$wp_query->found_posts`零。当然，这是做不到的。我不知道在你的代码中哪里设置了这个变量（WP 处理这个吗？）但很容易通过`print_r $wp_query->query_vars['posts_per_page'];`在该行之前添加一个来确认这一点。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-16T21:39:24.390

根据@Daan 的建议，我尝试了以下方法，但没有产生任何错误：

```
add_filter('pre_get_posts', 'optimized_get_posts', 100);
function optimized_get_posts() {
    global $wp_query, $wpdb;
    $wp_query->query_vars['no_found_rows'] = 1;
    $wp_query->found_posts = $wpdb->get_var( "SELECT COUNT(*) FROM wp_posts WHERE 1=1 AND wp_posts.post_type = 'post' AND (wp_posts.post_status = 'publish' OR wp_posts.post_status = 'private')" );
    $wp_query->found_posts = apply_filters_ref_array( 'found_posts', array( $wp_query->found_posts, &$wp_query ) );
    if($wp_query->query_vars['posts_per_page'] <= 0) {
        $wp_query->max_num_pages = 0;
    } else {
        $wp_query->max_num_pages = ceil($wp_query->found_posts / $wp_query->query_vars['posts_per_page']);
    }
    return $wp_query;
} 
```

基本上，代码检查是否`$wp_query->query_vars['posts_per_page']`有一个正值，因此能够`$wp_query->found_posts`适当地划分。

# bash - Bash脚本将目录中的所有flv文件转换为mp3

> ID：10083498
> 
> 赞同：2
> 
> 时间：2012-04-10T05:26:16.410
> 
> 标签：bash, ffmpeg, whitespace

到目前为止，这是我的代码。

```
#!/bin/bash
#James Kenaley
#Flv to Mp3 directory converter

find /home/downloads -iname "*.flv" | \
while read I;
do
    `ffmpeg -i ${I} -acodec copy  ${I/%.flv/.mp3}`
    echo "$I has been converted"
done 
```

但它会在 flv 文件的名称中提取空格并引发错误，指出它不在目录中。如何让它使用整个文件名而不是空格前的第一个单词？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-01-26T12:07:17.953

ffmpeg 在分叉线程中运行，因此简单的批处理可能会产生奇怪的行为。如果你在建议的批处理循环中运行 ffmpeg，你应该控制你的命令和命令错误输出，这样它就不会干扰。

如果您运行此程序并正确转换所有其他项目，但其余项目出错，请尝试在循环中使用此 ffmpeg 调用：

```
ffmpeg -y -i "${I}" -acodec mp3 -ar 22050 -f wav "${I/%.3gp/.mp3}" > /dev/null & 2> /dev/null 
```

注意最后的 > dev/null & 2> /dev/null 。这会将命令输出和命令错误输出通过管道传输到遗忘中。然后脚本工作。

还应注意，程序输出看起来异常混乱，同时压缩了多个文件。结果将是正确的。

[编辑：注意我拥有的 -y，这会使 FFMPEG 覆盖现有的 MP3 文件]

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-10T05:28:04.390

尝试这个：

```
`ffmpeg -i "${I}" -acodec copy  "${I/%.flv/.mp3}"` 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-10T05:28:39.010

使用引号。并且不要使用反引号。

```
ffmpeg -i "${I}" -acodec copy  "${I%.flv}".mp3 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-10T05:50:02.757

调用一个简短的脚本，一次完成转换和重命名：

adhoc.sh：

```
$file="$1"
ffmpeg -i "$file" -acodec copy "${file/%.flv/.mp3}" 
```

叫它：

```
find /home/downloads -iname "*.flv" -exec ./adhoc.sh {} ";" -ls 
```

或转换：

```
find /home/downloads -iname "*.flv" -exec ffmpeg -i {} -acodec copy {}.mp3 ";" -ls 
```

并稍后重命名：

```
rename 's/.flv.mp3/.mp3/' /home/downloads/*.flv.mp3 
```

重命名是可能需要安装的 perl 包的一部分。

# php - php中的多维数组

> ID：10083502
> 
> 赞同：-1
> 
> 时间：2012-04-10T05:26:53.550
> 
> 标签：php, arrays, multidimensional-array

这是我的输出

```
Array
(
    [0] => Array
        (
            [count] => 3
            [TYPE] => 1
        )

    [1] => Array
        (
            [count] => 9
            [TYPE] => 2
        )

    [2] => Array
        (
            [count] => 0
            [TYPE] => 3
        )

    [3] => Array
        (
            [count] => 0
            [TYPE] => 4
        )

) 
```

我现在得到了上面的数组，我像这样调用这个函数

```
$totalJobsCount = $model->GetStatus($data->id); 
```

现在我想要 [0][count],[1][count],[2][count],[3][count] 的值，所以我这样写

```
$a = $totalJobsCount[0]['count'];

$a1 = $totalJobsCount[1]['count'];

$a2 = $totalJobsCount[2]['count'];

$a3 = $totalJobsCount[3]['count']; 
```

但我得到了错误，未定义的偏移量 0 问题在哪里，请尽快帮助我提前谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-10T06:04:10.790

我怀疑如果您提出更明确的答案并发布演示您的问题的可执行代码，您会得到更好的答案。

`Array(...)`您问题顶部的转储不是可执行代码。如果您将其替换为运行并生成该数据结构的代码，将会有所帮助。我在下面给出了一个例子。

仔细阅读有关[数组的 PHP 文档。](http://php.net/manual/en/language.types.array.php)您是否遵循那里所说的内容？

究竟是哪一行导致了错误？您能否简化代码以不涉及函数调用，并且正是触发错误的最后一行？做这个练习可能会帮助你找到答案。

其他人已经指出，您在数组转储和数组查找表达式中都使用了不带引号的字符串。问题在于名称[`count`](http://ca.php.net/manual/en/function.count.php)指的是一个函数，所以在某些情况下 PHP 可以这样解释它。我怀疑您`count`在构建数组时在某处使用了未加引号的字符串，这就是问题所在。

下面的代码示例（我在[codepad](http://codepad.org/TOr9s2AQ)上测试过）演示了 PHP 中的多维数组在引用字符串时，甚至有时在不引用字符串时，其行为确实符合预期。

```
<? $totalJobsCount = Array
(Array(
            'count' => 3,
            'TYPE' => 1
        ),
 Array(
            count => 9,
            TYPE => 2
        ),
Array(
            'count' => 0,
            'TYPE' => 3
        ),
Array(
            'count' => 0,
            'TYPE' => 4
        )

); 
var_dump( $totalJobsCount );

print '$totalJobsCount[0][\'count\'] = '.$totalJobsCount[0]['count']."\n";
print '$totalJobsCount[1][count] = '.$totalJobsCount[1][count]."\n";
?> 
```

上面的代码产生以下结果：

```
array(4) {
  [0]=>
  array(2) {
    ["count"]=>
    int(3)
    ["TYPE"]=>
    int(1)
  }
  [1]=>
  array(2) {
    ["count"]=>
    int(9)
    ["TYPE"]=>
    int(2)
  }
  [2]=>
  array(2) {
    ["count"]=>
    int(0)
    ["TYPE"]=>
    int(3)
  }
  [3]=>
  array(2) {
    ["count"]=>
    int(0)
    ["TYPE"]=>
    int(4)
  }
}
$totalJobsCount[0]['count'] = 3
$totalJobsCount[1][count] = 9 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-10T05:38:59.557

```
 $det = array( array( Title => "rose", 
                  Price => 1.25
                ),
           array( Title => "daisy", 
                  Price => 0.75
                ),
           array( Title => "orchid", 
                  Price => 1.15
                )
         );

         print_r($det);

          echo $det[0]['Title']; 
```

$det[0]['Title'] 中的“玫瑰”

# class - 对象、类和成员函数的概念

> ID：10083503
> 
> 赞同：0
> 
> 时间：2012-04-10T05:27:01.520
> 
> 标签：class, object, member-functions

到目前为止，这就是我所理解的对象，我需要反馈来知道我是否正确。

一个*类*是由*成员函数*组成的。一个*类也像**int*一样定义类型。一个*对象*由*该类*定义，然后该*对象*调用该类中的*成员**函数*（仅在它定义的类*中*）。

 **需要知道我是否遗漏了任何东西，或者我是否错了。谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-10T05:43:49.683

类由成员函数组成。不一定，类也可以包含数据成员。

一个类也像 int 一样定义类型。真的

然后对象调用该类中的成员函数一旦了解了继承的概念，您就会明白，对象可以调用其基类的方法**

# ruby-on-rails - 如何使用 ruby 获取 facebook 的 oauth 访问令牌

> ID：10083504
> 
> 赞同：5
> 
> 时间：2012-04-10T05:27:16.157
> 
> 标签：ruby-on-rails, oauth-2.0, facebook-access-token

我试图在 ruby​​ 中以编程方式获取 facebook 的 oauth 访问令牌。

我的代码如下：

```
client = OAuth2::Client.new(
  APP_ID,
  SECRET_ID,
  :authorize_url => "/dialog/oauth",
  :token_url => "/oauth/access_token",
  :site => "https://www.facebook.com/"
)

code = client.auth_code.authorize_url(:redirect_uri => "http://www.facebook.com/")
token = client.auth_code.get_token(code, :redirect_uri => "https://graph.facebook.com/")
OAuth2::AccessToken.new(client, token.token, {:mode => :query, :param_name =>"oauth_token"}) 
```

当我尝试运行上述 ruby​​ 代码时，出现以下异常

```
https://www.facebook.com/dialog/oauth?response_type=code&client_id=APP_ID
51&redirect_uri=http%3A%2F%2Fwww.facebook.com%2F

/home/ec2-user/.rvm/gems/ruby-1.9.3-p0@samples/gems/oauth2-0.5.2/lib/oauth2/clie
nt.rb:129:in `get_token': OAuth2::Error (OAuth2::Error)
        from /home/ec2-user/.rvm/gems/ruby-1.9.3-p0@samples/gems/oauth2-0.5.2/li
b/oauth2/strategy/auth_code.rb:29:in `get_token'
        from oauth.rb:16:in `<main>' 
```

非常感谢任何帮助，因为我花了一天多的时间试图解决这个问题。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-19T16:03:18.910

您是否尝试将其设置为 redirect_uri 而不是`localhost:3000`您的真实 IP 地址`ex. 231.61.233.57:3000`？此外，您可以尝试使用 ssh 隧道进行测试，这样您的 localhost 应用程序将在全球范围内可用。看看这个[http://progrium.com/localtunnel/](http://progrium.com/localtunnel/)。当您将从该工具中获取 IP 地址时，请尝试将 redirect_uri 参数设置为它。

# awk - awk 中的“查找”命令不起作用

> ID：10083506
> 
> 赞同：0
> 
> 时间：2012-04-10T05:27:26.310
> 
> 标签：awk

寻找隐藏文件：

```
$ find . -type f -not -name "."

./.kjj.jpg
./2.jpg.~1~ 
```

现在，使用相同的命令，但在 awk 中：

```
$ awk 'BEGIN{ system(find . -type f -not -name ".") }'

awk: 1: unexpected character '.' 
```

为什么它不起作用？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-10T05:29:30.833

```
$ awk 'BEGIN{ system("find . -type f -not -name \".\"") }' 
```

该`system()`函数接受一个字符串；`find . -type...`没有引号只是无效的 AWK 语法。

# macos - GLSL “出” 4.2 到 1.2

> ID：10083509
> 
> 赞同：1
> 
> 时间：2012-04-10T05:27:40.530
> 
> 标签：macos, opengl, glsl

我正在尝试将 GLSL 4.2 移植到 1.2（因为我使用的是 mac），但是，我不确定如何将 out 参数转换为 1.2（因为它会产生错误）。

```
out vec3 vNormal;
out vec2 texcoord; 
out vec3 vPosition;
```

编译器错误如下。

```
 Invalid qualifiers 'out' in global variable context
ERROR: 0:13: Invalid qualifiers 'out' in global variable context
ERROR: 0:14: Invalid qualifiers 'out' in global variable context
ERROR: 0:19: Use of undeclared identifier 'texcoord'
ERROR: 0:20: Use of undeclared identifier 'vNormal'
ERROR: 0:21: Use of undeclared identifier 'vPosition'
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-10T06:16:40.277

GLSL 1.30 及以上`out`限定符表示着色器阶段输出。这对 1.20 及以下版本意味着什么取决于您正在谈论*的着色器阶段。*

由于您使用的是 and 之类的标识符`texcoord`，`vNormal`我猜您正在编写一个顶点着色器。那么您应该使用的关键字是`varying`. 与这些对应的片段着色器输入也应该是`varying`。

# log4j - 日志文件名称 (Log4j) 中的 Websphere AS 服务器名称 WAS_SERVER_NAME

> ID：10083514
> 
> 赞同：0
> 
> 时间：2012-04-10T05:28:23.160
> 
> 标签：log4j, websphere

在服务器控制台中`WAS 7`有类似的变量`WAS_SERVER_NAME`，但是每当我通过`${WAS_SERVER_NAME}`（在日志文件名中或作为日志文件中的一行）引用它们时，它们都会返回`null`. 尽管它们包含一个值。我错过了什么？

使用`RollingFileAppender`.

谢谢你的帮助！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-10T16:28:32.930

这些是内部 WebSphere 变量。它们与 log4j 无关。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-10T23:28:13.997

正如 dbreaux 所提到的，WebSphere 变量不能作为系统属性使用。标准技巧是为 JVM 创建一个自定义属性，例如 WAS_SERVER_NAME，它被分配了值 ${WAS_SERVER_NAME}。

WAS 运行时会将值分配给 JVM 属性，然后它可用于 log4j。

高温高压

芒鲁

# c# - 在 C# 中将透明 Gif 图像添加到列表视图

> ID：10083517
> 
> 赞同：0
> 
> 时间：2012-04-10T05:28:49.910
> 
> 标签：c#, listview, transparency, gif

我正在尝试将透明 Gif 图像添加到列表视图，我使用以下代码片段添加 gif 图像。

```
// control as ListView 
void AddGiftoListView(Control parent)
{
    Bitmap img = (Bitmap)Properties.Resources.madLoader; // Transparent gif image
    Size sz = img.Size;
    PictureBox pbGif = new PictureBox();
    pbGif.Size = img.Size;
    pbGif.Image = img;

    parent.Controls.Add(pbGif);
    Point p = new Point(1, 1);
    pbGif.Location = p;
    pbGif.Show();
} 
```

但是 gif 不是透明的，当列表视图充满文本时，我们可以在白色背景的顶部看到 gif。有什么办法可以解决这个问题吗？

谢谢，石菊PK

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-18T12:32:59.930

尝试将表单的**TransparencyKey 设置**为白色

```
this.TransparencyKey = Color.White; 
```

# c# - Windows 服务根据机器有两种不同的行为方式

> ID：10083520
> 
> 赞同：0
> 
> 时间：2012-04-10T05:29:08.400
> 
> 标签：c#

我写了一个 Windows 服务，我的类库每隔 15 分钟就会执行一次。

当我在我的机器上部署 Windows 服务时它工作正常，计时器运行良好，每 15 分钟它调用我的类库，但是当我部署在我的服务器中时，它只在 onstart 之后工作正常，它不会提高计时器或每 15分钟假设调用我的类库没有发生，请有人指导我应该在这里查看什么以识别问题

这是我的代码

```
 public partial class Service1 : ServiceBase
{
    private Timer _timer;
    private DateTime _lastRun = DateTime.Now;

    public Service1()
    {
        InitializeComponent();
    }

    protected override void OnStart(string[] args)
    {
        log4net.Config.XmlConfigurator.Configure();

        _timer = new Timer(10 * 60 * 1000); // every 10 minutes
        _timer.Elapsed += new System.Timers.ElapsedEventHandler(timer_Elapsed);
        Shell Distribute= new Shell();
        Distribute.Distribute();
_timer.start();//this line was missed in my original code
    }

    protected override void OnStop()
    {
        this.ExitCode = 0;
        base.OnStop();

    }
    private void timer_Elapsed(object sender, System.Timers.ElapsedEventArgs e)
    {
       //if (_lastRun.Date < DateTime.Now.Date)
        //{

try
{
_timer.Stop();
Shell Distribute= new Shell();
Distribute.Distribute();
}
catch(exception ex)
{}
finally
{

            _timer.Start();
}
         //}
        }

    }
} 
```

我坚信登录问题，但不确定有两个原因，如果我在我的测试服务器中使用相同的帐户启动或重新启动此服务效果很好，但只有计时器不起作用。代码完全相同，所以我不太担心我的代码，因为它使用相同帐户在我的本地机器上工作计时器。提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-13T04:58:19.540

我不确定为什么我的服务现在基于计时器工作，我所做的只是在下面的代码中添加日志以了解发生了什么，但幸运的是它就像一个魅力。

```
 protected override void OnStart(string[] args)
    {

        log4net.Config.XmlConfigurator.Configure();
        log.Debug("Service Called when Onstart");
        _timer = new Timer(10 * 60 * 1000); // every 10 minutes
        log.Debug("calling Distributor Method");
        Shell Distributor = new Shell();
        Distributor.Distribute();

        log.Debug("calling timer Elapsed");
       _timer.Elapsed += new System.Timers.ElapsedEventHandler(timer_Elapsed);
       log.Debug("start the timer");
       _timer.Start();

    }

    protected override void OnStop()
    {
        log.Debug("stop the timer in OnStop method");
        this.ExitCode = 0;
        base.OnStop();

    }
    private void timer_Elapsed(object sender, System.Timers.ElapsedEventArgs e)
    {

        log.Debug("IN Timer Elapsed method");
        try
        {
            log.Debug("IN try block and calling timer stop function");
            _timer.Stop();
            log.Debug("Distributor Method Called from try block");
            Shell Distributor = new Shell();
            Distributor.Distribute();

        }
        catch (Exception ex)
        {
            log.Debug("IN Catch Block");
            log.Debug(ex.Message); 
        }
        finally
        {
            _lastRun = DateTime.Now;
            log.Debug("IN Final Block");
            log.Debug("start the timer");
            _timer.Start();
            log.Debug("Exit the Timer Elapsed Method");
        } 
```

# java - 找不到 google checkout 的 maven 依赖项

> ID：10083523
> 
> 赞同：1
> 
> 时间：2012-04-10T05:29:18.740
> 
> 标签：java, maven, google-checkout

我有一个示例 POM，它显示下面的代码是一个工作的 Maven 依赖描述符，但是，这并没有解决。我完全没有发现为什么这可能不起作用。我发现一个问题与我的相同，但没有答案。

我是否应该构建它并将其托管在我自己的存储库中？我找不到这个存储库存在的任何地方。有人有一些答案吗？

```
 <dependency>
        <groupId>com.google.checkout</groupId>
        <artifactId>checkout-sdk</artifactId>
        <version>2.5.1</version>
    </dependency> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-10T07:48:41.353

假设这 - [http://code.google.com/p/google-checkout-java-sdk](http://code.google.com/p/google-checkout-java-sdk) - 是您正在谈论的项目，它看起来很长一段时间没有更新（最后2010 年 9 月）。Subversion 存储库中的最新版本看起来像是 2.5.0 版本。[不过，这里](http://code.google.com/p/google-checkout-java-sdk/downloads/list)似乎确实有可用的二进制 2.5.1 版本。

不过，您真正需要的是 Maven 存储库。不幸的是，谷歌在将他们的工件发布到 Maven 中心（更不用说任何公开的 Maven 存储库）方面并不是很好。我在搜索中找不到任何东西。（为了将来参考，[http](http://search.maven.org) ://search.maven.org是一个很棒的资源，但请记住，这只是通过 Maven Central 进行的搜索。）

我建议你也许可以[下载源代码](http://code.google.com/p/google-checkout-java-sdk/source/checkout)并自己编译，但我试过了，项目甚至没有正确设置。构建在当前所处的状态下失败。

如果您查看问题部分，有一个[问题（#67）](http://code.google.com/p/google-checkout-java-sdk/issues/detail?id=67)引用了我上面列出的问题。该问题的日期为 2010 年 6 月，因此问题已经存在了一段时间。最近（几周前）有人好心地附上了一个补丁文件。我确实尝试对 Subversion 存储库中的最新代码使用该补丁，然后构建确实有效。如果您可以访问 Artifactory 或 Nexus 等工件存储库，并且您想自己构建 jar，那么这是一个潜在的选择。

# android - qHD Android App 屏幕兼容性

> ID：10083526
> 
> 赞同：0
> 
> 时间：2012-04-10T05:29:32.487
> 
> 标签：android, android-layout, screen

我的应用在 qHD 屏幕上看起来很糟糕，但在我尝试过的所有其他设备上看起来都很完美。

![qHD 设备示例](../Images/0df3f1d904ad5853bc32e64e3d54475f.png)

![银河连结](../Images/3eed70a81aa9f9a4674d0f866217b2aa.png)

![极好的](../Images/8a558a35436e1f43855f1a5df9b4542b.png)

我的布局如下。我使用 dp，因为我被认为应该与密度无关，但老实说，我不确定 dip、dp、px、sp 等之间有什么区别。我读过文档，他们只是不要说得很清楚。

```
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent" >

    <RelativeLayout
        android:id="@+id/header"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:layout_alignParentTop="true"
        android:background="@drawable/dialog_full_holo_dark"
        android:orientation="horizontal" >

        <ImageView
            android:id="@+id/userP"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:padding="5dp"
            android:src="@drawable/acct_sel" />

        <TextView
            android:id="@+id/userN"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_alignBottom="@+id/userP"
            android:layout_toRightOf="@+id/userP"
            android:padding="5dp"
            android:text="Name"
            android:textAppearance="?android:attr/textAppearanceLarge"
            android:textColor="@color/ics" />

        <TextView
            android:id="@+id/countTotal"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_alignBottom="@+id/userP"
            android:layout_alignParentRight="true"
            android:paddingBottom="5dp"
            android:paddingRight="5dp"
            android:text="/140"
            android:textAppearance="?android:attr/textAppearanceLarge"
            android:textColor="@color/ics" />

        <TextView
            android:id="@+id/myCount"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_alignBottom="@+id/userP"
            android:layout_toLeftOf="@+id/countTotal"
            android:paddingBottom="5dp"
            android:textAppearance="?android:attr/textAppearanceLarge"
            android:textColor="@color/ics" />

    </RelativeLayout>

    <EditText
        android:id="@+id/editMessage"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_below="@+id/header"
        android:hint="Message" >
    </EditText>

    <LinearLayout
        android:id="@+id/linearLayout1"
        style="?android:attr/buttonBarStyle"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:layout_alignParentBottom="true"
        android:orientation="horizontal" >

        <Button
            android:id="@+id/save_b"
            style="?android:attr/buttonBarButtonStyle"
            android:layout_width="0dp"
            android:layout_height="wrap_content"
            android:layout_weight="1"
            android:text="Save" />

        <Button
            android:id="@+id/cancel_b"
            style="?android:attr/buttonBarButtonStyle"
            android:layout_width="0dp"
            android:layout_height="wrap_content"
            android:layout_weight="1"
            android:text="Cancel" />
    </LinearLayout>

    <ImageView
        android:id="@+id/div5"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:layout_alignBottom="@+id/editMessage"
        android:layout_alignParentLeft="true"
        android:paddingTop="3dp"
        android:scaleType="fitXY"
        android:src="@drawable/test" />

    <TextView
        android:id="@+id/mentionsTv"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignParentLeft="true"
        android:layout_below="@+id/editMessage"
        android:paddingLeft="10dp"
        android:paddingTop="3dp"
        android:text="Add Mentions"
        android:textAppearance="?android:attr/textAppearanceMedium" />

    <ImageView
        android:id="@+id/div4"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:layout_alignParentLeft="true"
        android:layout_below="@+id/mentionsTv"
        android:paddingTop="3dp"
        android:scaleType="fitXY"
        android:src="@drawable/test" />

    <TextView
        android:id="@+id/dayTv"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignParentLeft="true"
        android:layout_below="@+id/div4"
        android:paddingLeft="10dp"
        android:paddingTop="3dp"
        android:text="Day Picker"
        android:textAppearance="?android:attr/textAppearanceMedium" />

    <ImageView
        android:id="@+id/div2"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:layout_alignParentLeft="true"
        android:layout_below="@+id/dayTv"
        android:paddingTop="3dp"
        android:scaleType="fitXY"
        android:src="@drawable/test" />

    <EditText
        android:id="@+id/editInterval"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignParentLeft="true"
        android:layout_below="@+id/div2"
        android:hint="Interval (in minutes) between sends."
        android:inputType="number"
        android:paddingTop="3dp" />

    <ImageView
        android:id="@+id/div3"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:layout_alignParentLeft="true"
        android:layout_below="@+id/editInterval"
        android:paddingTop="3dp"
        android:scaleType="fitXY"
        android:src="@drawable/test" />

    <EditText
        android:id="@+id/editAmount"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignParentLeft="true"
        android:layout_below="@+id/div3"
        android:hint="Number of sends per day."
        android:inputType="number"
        android:paddingTop="3dp" />

    <ImageView
        android:id="@+id/div1"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:layout_alignParentLeft="true"
        android:layout_below="@+id/editAmount"
        android:paddingTop="3dp"
        android:scaleType="fitXY"
        android:src="@drawable/test" />

</RelativeLayout> 
```

我需要做什么才能使其在 qhd 设备上正确显示？

# c# - jQuery图像上传，如何在上传前验证图像尺寸

> ID：10083527
> 
> 赞同：0
> 
> 时间：2012-04-10T05:29:40.647
> 
> 标签：c#, jquery, asp.net, jquery-ui

上传之前，如何使用 jQuery验证**宽度和高度**

```
<form id="form1" runat="server">
    <asp:FileUpload id="FileUploadControl" runat="server" />
    <asp:Button runat="server" id="UploadButton" text="Upload" onclick="UploadButton_Click" />
    <br /><br />
    <asp:Label runat="server" id="StatusLabel" text="Upload status: " />
</form> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-10T05:58:14.460

您可以使用 jquery uploadify 插件。

这是我为 asp.net 提供的示例代码

```
<script type="text/javascript">
   // <![CDATA[
   var id = "55";
   var theString = "asdf";
   $(document).ready(function() {
   $('#fileInput').uploadify({
   'uploader': 'uploadify/uploadify.swf',
   'script': 'Upload.ashx',
   'scriptData': { 'id': id, 'foo': theString},
   'cancelImg': 'uploadify/cancel.png',
   'auto': true,
   'multi': true,
   'fileDesc': 'Image Files',
   'fileExt': '*.jpg;*.png;*.gif;*.bmp;*.jpeg',
   'queueSizeLimit': 90,
   'sizeLimit': 4000000,
   'buttonText': 'Choose Images',
   'folder': '/uploads',
   'onAllComplete': function(event, queueID, fileObj, response, data) {

   }
 }); 
```

});

然后你想做一个处理程序（.ashx）：

```
public class Upload : IHttpHandler, IRequiresSessionState
{

    public void ProcessRequest(HttpContext context)
    {
        try
        {
            HttpPostedFile file= context.Request.Files["Filedata"];

            int id = (Int32.Parse(context.Request["id"]));
            string foo = context.Request["foo"];
            file.SaveAs("C:\\" + id.ToString() + foo + file.FileName);

            context.Response.Write("1");
        }
        catch(Exception ex)
        {
            context.Response.Write("0");
        }
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-10T05:58:32.197

在客户端无法验证要上传的图像的宽度和高度。

但是上传后，您可以在此获取图像的宽度和高度：

```
var height = $("#Image").height()
var width = $("#Image").width() 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-10T08:33:36.813

你可以这样尝试：

```
private void ButtonUpload_Click(object sender, System.EventArgs e)  {

    //Determine type and filename of uploaded image
    string UploadedImageType = UploadedPicture.PostedFile.ContentType.ToString().ToLower();
    string UploadedImageFileName = UploadedPicture.PostedFile.FileName;

    //Create an image object from the uploaded file
    System.Drawing.Image UploadedImage = System.Drawing.Image.FromStream(UploadedPicture.PostedFile.InputStream);

    //Determine width and height of uploaded image
    float UploadedImageWidth = UploadedImage.PhysicalDimension.Width;
    float UploadedImageHeight = UploadedImage.PhysicalDimension.Height;

    //Check that image does not exceed maximum dimension settings
    if (UploadedImageWidth > 600 || UploadedImageHeight > 400) {
            Response.Write("This image is too big - please resize it!");
    } 
```

}

（或者）您可以尝试使用此[上传](http://www.plupload.com/)器，您可以在用户上传之前确定常见的宽度和高度，这适用于 Chrome、Firefox 和 IE

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-11T04:33:42.027

服务器端（C#）；

```
using (System.Drawing.Image myImage = System.Drawing.Image.FromStream(FileUploadJcrop.PostedFile.InputStream))
{
    if (myImage.Width > 500)
    {
        Double d = (myImage.Height * 500) / myImage.Width;
        Int32 myH = (Int32)Math.Round(d, 0);
        Bitmap src = Bitmap.FromStream(FileUploadJcrop.PostedFile.InputStream) as Bitmap;
        Bitmap result = new Bitmap(500, myH);
        using (Graphics myg = Graphics.FromImage((System.Drawing.Image)result))
        {
            myg.DrawImage(src, 0, 0, 500, myH);
        }
        result.Save(savePath);
        FileSaved = true;
    }
} 
```

# c# - 将 xmlstring 转换为 XmlNode

> ID：10083532
> 
> 赞同：7
> 
> 时间：2012-04-10T05:30:39.577
> 
> 标签：c#, .net, xml

我有一个这样的 xml 字符串

```
string stxml="<Status>Success</Status>"; 
```

我还创建了一个 xml 文档

```
 XmlDocument doc = new XmlDocument();
  XmlNode docNode = doc.CreateXmlDeclaration("1.0", "UTF-8", null);
  doc.AppendChild(docNode);
  XmlNode rootNode = doc.CreateElement("StatusList");
  doc.AppendChild(rootNode); 
```

我需要这样的输出。

```
 <StatusList>
  <Status>Success</Status>
  </StatusList> 
```

我怎样才能做到这一点。如果我们使用innerhtml，它将插入。但我想将xml字符串作为xmlnode本身插入

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-04-10T07:31:06.907

实现您所追求的一个非常简单的方法是使用经常被忽视的[XmlDocumentFragment](http://msdn.microsoft.com/en-us/library/system.xml.xmldocumentfragment.aspx)类：

```
 XmlDocument doc = new XmlDocument();
  XmlNode docNode = doc.CreateXmlDeclaration("1.0", "UTF-8", null);
  doc.AppendChild(docNode);
  XmlNode rootNode = doc.CreateElement("StatusList");
  doc.AppendChild(rootNode);

  //Create a document fragment and load the xml into it
  XmlDocumentFragment fragment = doc.CreateDocumentFragment();
  fragment.InnerXml = stxml;
  rootNode.AppendChild(fragment); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-10T05:34:10.993

使用`Linq to XML`：

```
string stxml = "<Status>Success</Status>";
XDocument doc = new XDocument(new XDeclaration("1.0", "utf-8", "yes"),
             new XElement("StatusList", XElement.Parse(stxml))); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-10T05:34:27.443

您可以改为使用[`XElement`](http://msdn.microsoft.com/en-us/library/system.xml.linq.xelement.aspx)该类：

```
string stxml = "<Status>Success</Status>";
var status = XElement.Parse(stxml);
var statusList = new XElement("StatusList", status);

var output = statusList.ToString(); // looks as you'd like 
```

如果要将新`statusList`内容写入文件：

```
statusList.Save(@"C:\yourFile.xml", SaveOptions.None); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-10T05:37:57.393

你可以用 xmlwriter 试试

```
using (XmlWriter writer = XmlWriter.Create("new.xml"))
{
        writer.WriteStartDocument();
        writer.WriteStartElement("StatusList");
        writer.WriteElementString("Status", "Success");   // <-- These are new
        writer.WriteEndDocument();
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-08-08T11:48:44.153

```
using System;
using System.Collections.Generic;
using System.Xml;
using System.Xml.Serialization;
using System.IO;
using System.Reflection;
using System.ComponentModel;

public class MyClass
{
    public static void RunSnippet()
    {
        XmlNode node = default(XmlNode);
        if(node == null)
            Console.WriteLine(bool.TrueString);
        if(node != null)
            Console.WriteLine(bool.FalseString);

        XmlDocument doc = new  XmlDocument();

        node = doc.CreateNode (XmlNodeType.Element,"Query", string.Empty);

        node.InnerXml=@"<Where><Eq><FieldRef Name=""{0}"" /><Value Type=""{1}"">{2}</Value></Eq></Where>";

        string xmlData = ToXml<XmlNode>(node);

        Console.WriteLine(xmlData);

        XmlNode node1 = ConvertFromString(typeof(XmlNode), @"<Query><Where><Eq><FieldRef Name=""{0}"" /><Value Type=""{1}"">{2}</Value></Eq></Where></Query>") as XmlNode;
        if(node1 == null)
            Console.WriteLine(bool.FalseString);
        if(node1 != null)
            Console.WriteLine(bool.TrueString);

        string xmlData1 = ToXml<XmlNode>(node1);
        Console.WriteLine(xmlData1);
    }
    public static string ToXml<T>(T t)
    {
        string Ret = string.Empty;
        XmlSerializer s = new XmlSerializer(typeof(T));
        using (StringWriter Output = new StringWriter(new System.Text.StringBuilder()))
        {
            s.Serialize(Output, t);
            Ret = Output.ToString();
        }
        return Ret;
    }
        public static object ConvertFromString(Type t, string sourceValue)
        {
            object convertedVal = null;

            Type parameterType = t;
            if (parameterType == null) parameterType = typeof(string);
            try
            {

                // Type t = Type.GetType(sourceType, true);
                TypeConverter converter = TypeDescriptor.GetConverter(parameterType);
                if (converter != null && converter.CanConvertFrom(typeof(string)))
                {
                    convertedVal = converter.ConvertFromString(sourceValue);
                }
                else
                {
                    convertedVal = FromXml(sourceValue, parameterType);
                }
            }
            catch { }
            return convertedVal;
        }
              public static object FromXml(string Xml, Type t)
        {
            object obj;
            XmlSerializer ser = new XmlSerializer(t);
            using (StringReader stringReader = new StringReader(Xml))
            {
                using (System.Xml.XmlTextReader xmlReader = new System.Xml.XmlTextReader(stringReader))
                {
                    obj = ser.Deserialize(xmlReader);
                }
            }
            return obj;
        }

    #region Helper methods

    public static void Main()
    {
        try
        {
            RunSnippet();
        }
        catch (Exception e)
        {
            string error = string.Format("---\nThe following error occurred while executing the snippet:\n{0}\n---", e.ToString());
            Console.WriteLine(error);
        }
        finally
        {
            Console.Write("Press any key to continue...");
            Console.ReadKey();
        }
    }

    private static void WL(object text, params object[] args)
    {
        Console.WriteLine(text.ToString(), args);   
    }

    private static void RL()
    {
        Console.ReadLine(); 
    }

    private static void Break() 
    {
        System.Diagnostics.Debugger.Break();
    }

    #endregion
} 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2017-06-18T00:22:05.330

根据我的经验，使用唯一 ID 总是更好，我建议您先查看这种情况，然后返回此页面，如果您还没有解决方案，请研究/定位我的代码以进行尝试。我刚刚为我自己的项目完成了它，我已经修改了 abit 以使其看起来更适合您的项目。祝你好运。回复晚了非常抱歉 ;-）

```
 XmlDocument xDoc = new XmlDocument();
                string Bingo = "Identification code";
                xDoc.Load(pathFile);
                XmlNodeList idList = xDoc.GetElementsByTagName("id");
                XmlNodeList statusList = xDoc.GetElementsByTagName("Status");         

                for (int i = 0; i < idList.Count; i++)
                {
                    StatusNode = "<Status>fail</Status>";
                    XmlDocumentFragment fragment = xDoc.CreateDocumentFragment();
                    fragment.InnerXml = StatusNode;
                    statusList[i].InnerXml = "";
                    statusList[i].AppendChild(fragment);
                    if (statusList[i].InnerText == Bingo)
                    {
                    StatusNode = "<Status>Succes!</Status>";
                    fragment.InnerXml = Status;
                    statusList[i].InnerXml = "";
                    statusList[i].AppendChild(fragment);

                    }

                }
                xDoc.Save(pathFile); 
```

# php - 如何让 PHP 显示错误？（我添加了 ini_set 和 error_reporting，但只给出 500 的错误）

> ID：10083533
> 
> 赞同：33
> 
> 时间：2012-04-10T05:30:47.670
> 
> 标签：php, html, debugging

所以，我当前的网页实际上并没有任何错误，但我希望能够在它们弹出时看到错误，而不是 HTTP 500 错误页面。我用谷歌搜索了一下，并认为添加这两行可以解决所有问题。

```
ini_set('display_errors', 'On');
error_reporting(E_ALL); 
```

注意：我无权访问 php.ini 文件，因为我使用的是学校帐户的服务器。

所以我在我的页面顶部引入了一个错误（$buggy 后面没有分号）：

```
<?php 
ini_set('display_errors', 'On');
error_reporting(E_ALL);
$buggy

$x = 4 + 2;
... 
```

但是，我只是收到一个服务器错误：

[“该网站在检索http://mywebpage.com/](http://mywebpage.com/)时遇到错误。它可能因维护而关闭或配置不正确。”

有任何想法吗？

编辑：

我重新配置了我的代码：

```
<?php 
include_once 'database/errorSettings.php';
?>
<?php 

$buggy // whoops
$x = 4 + 2;
... 
```

errorSettings.php 如下：

```
<?php
    ini_set('display_errors', 'On');
    error_reporting(E_ALL);
?> 
```

但它仍然不起作用......重新配置的错误方式？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-04-10T05:37:43.613

你所拥有的是一个解析错误。这些是在执行任何代码之前抛出的。PHP 文件需要完整解析，然后才能执行其中的任何代码。如果您设置错误级别的文件中存在解析错误，则在引发错误时它们不会生效。

要么将你的文件分成更小的部分，比如在一个文件中设置错误级别，然后`include`ing 另一个包含实际代码（和错误）的文件，或者使用 php.ini 或 .htaccess 指令在 PHP 之外设置错误级别。

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2012-04-10T05:34:38.543

您需要在 .htaccess 文件中设置 error_reporting 值。由于存在解析错误，因此它永远不会在您的 PHP 代码中运行 error_reporting() 函数。

在 .htaccess 文件中试试这个（假设你可以使用一个）：

```
php_flag display_errors 1
php_value error_reporting 30719 
```

我认为 30719 对应于 E_ALL 但我可能错了。

**编辑更新： http:** [//php.net/manual/en/errorfunc.constants.php](http://php.net/manual/en/errorfunc.constants.php)

```
int error_reporting ([ int $level ] )
---
32767   E_ALL (integer)     
All errors and warnings, as supported, except of   level E_STRICT prior to PHP 5.4.0\.   32767 in PHP 5.4.x, 30719 in PHP 5.3.x, 6143 in PHP   5.2.x, 2047 previously 
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2016-08-10T21:19:06.583

添加到上面deceze所说的内容。这是一个解析错误，因此为了调试解析错误，请在根目录中创建一个名为 debugSyntax.php 的新文件。把这个放进去：

```
<?php

///////    SYNTAX ERROR CHECK    ////////////
error_reporting(E_ALL);
ini_set('display_errors','On');

//replace "pageToTest.php" with the file path that you want to test. 
include('pageToTest.php'); 

?> 
```

运行 debugSyntax.php 页面，它将显示来自您选择测试的页面的解析错误。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2015-01-03T08:28:59.823

只需在 PHP 文件上编写以下代码：

```
ini_set('display_errors','on'); 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2018-02-10T00:07:30.617

在外部服务器中不容易检查语法错误，只是运行时错误。

我做什么？和你一样，我用

```
ini_set('display_errors', 'On');
error_reporting(E_ALL); 
```

但是，在运行之前，我使用在线 PHP 语法检查器检查 PHP 文件中的语法错误。

最好的，恕我直言是[PHP 代码检查器](https://phpcodechecker.com/index.htm)

我复制所有源代码，粘贴到主框中，然后单击`Analyze`按钮。

这不是最实用的方法，但两个程序相辅相成，完全解决了问题

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2014-08-08T14:07:43.120

我在使用 PHP5.4 和 Plesk 11.5 时遇到了这个问题

不知何故，Plesk 域配置页面中的错误报告和显示错误设置完全覆盖了 .htaccess 或 PHP 脚本中的任何本地设置。我还没有找到防止这种情况发生的方法，因此请使用 Plesk 设置来打开和关闭错误报告。

您可能在您的 php.ini 中设置了阻止本地站点覆盖这些设置的设置，这可能是由您服务器上使用的控制面板强制执行的。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2017-03-20T03:01:04.767

对于使用 Codeigniter 的人（我在 C3 上）：

index.php 文件覆盖 php.ini 配置，以此类推 index.php 文件第 68 行：

```
case 'development':
        error_reporting(-1);
        ini_set('display_errors', 1);
    break; 
```

您可以更改此选项以设置您需要的内容。以下是完整列表：

```
1   E_ERROR
2   E_WARNING
4   E_PARSE
8   E_NOTICE
16  E_CORE_ERROR
32  E_CORE_WARNING
64  E_COMPILE_ERROR
128 E_COMPILE_WARNING
256 E_USER_ERROR
512 E_USER_WARNING
1024    E_USER_NOTICE
6143    E_ALL
2048    E_STRICT
4096    E_RECOVERABLE_ERROR 
```

希望能帮助到你。

# regex - 是否可以使用 POSIX 基本正则表达式匹配和否定单个控制字符？

> ID：10083535
> 
> 赞同：0
> 
> 时间：2012-04-10T05:31:04.740
> 
> 标签：regex, posix

我知道您可以通过使用转义字符（如 \t\n 等），使用某些形式的正则表达式来做到这一点，但我认为这些对 BRE 无效。那么这对于 BRE 是不可能的，还是有一些我不知道的指定这些字符的方法？

干杯

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-10T06:31:14.087

AFAIK \t\n 是 POSIX BRE 中的有效控制字符

# birt - 报告每一页的摘要

> ID：10083537
> 
> 赞同：0
> 
> 时间：2012-04-10T05:31:07.883
> 
> 标签：birt

我可以通过分页符将分页应用于我的表格内容，

但我的问题是我无法显示报告的每一页的摘要。

请建议我，以实现这一目标

高级感谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-19T16:40:13.690

我发现很难想象一份报告适合按页汇总。但是，如果您有组，则可以将聚合添加到页脚并聚合表中的组。

因此，如果您的组是星期一、星期二、星期三，并且报告运行三页。

如果星期一和星期二适合放在第一页上，您将有每个摘要

如果星期三有两页，你只会在第 3 页有一个总结

# javascript - 如何在 javascript 中覆盖 navigator.plugins 或如何将其设置为 null？

> ID：10083542
> 
> 赞同：4
> 
> 时间：2012-04-10T05:31:56.697
> 
> 标签：javascript, javascript-framework

`navigator.plugins`在 javascript 中为浏览器提供了 plugins-array。是否可以将此数组设置为空？我试过那个（`navigator.plugins = null;`）但它没有设置为空。另外，我尝试将其设置为空数组（`navigator.plugins = new Array();`）

另外，如果这是可能的，这是一个好习惯吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-10T05:37:13.170

`window.navigator`在 Chrome 中，可以通过设置为 null来做到这一点。但是，我不确定您为什么要这样做。由于您正在处理 JavaScript，因此有人可能会使用调试器来阻止您的代码运行并在您将其设置为 null 之前拦截此代码。

此外，导航器对象通常包含有关客户端计算机的信息，如果我是用户，我很可能比您的服务器更了解我的计算机，因此禁用它实际上不会有任何我可以看到的可衡量的优势。

此外，这必须在每次页面加载时发生。

最后，我不知道其他浏览器会如何处理这个问题，但是你在其他浏览器中尝试这样做很可能会遇到麻烦。

简而言之，我认为这不是一个好习惯。但是，您没有提供有关为什么要这样做的详细信息。没有这些信息，我不能给你一个公平的答案，除非这不是一个好主意。所以你当然需要检查你为什么要这样做，并确定它是否真的值得麻烦。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-03-03T07:23:00.330

有一些 Web 应用程序首先检索浏览器名称。UIWebView 的导航器对象没有返回足够的信息。例如 navigator.userAgent 返回

> Mozilla/5.0（iPad；CPU OS 9_2，如 Mac OS X）AppleWebKit/601.1.46（KHTML，如 Gecko）Mobile/13C75

这些 Web 应用程序无法从上述信息中检测到浏览器名称，并抛出*不支持的浏览器异常。*

为了处理这种情况，我重写了下面给出的导航器对象，是的，Web 应用程序能够完美运行。这在 Firefox 中失败，但我的要求是仅支持 UIWebView

```
var __originalNavigator = navigator;
navigator = new Object();
navigator.__proto__ = __originalNavigator;
navigator.__defineGetter__('userAgent', function () { return "Mozilla/5.0 (Windows NT 6.1; WOW64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/48.0.2564.103 Safari/537.36"; });
navigator.__defineGetter__('plugins', function () { return []; }); 
```

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2012-04-10T05:40:29.950

我从来没有听说过有人想将插件数组设置为空，坦率地说，我不明白如果你这样做会产生什么好处。就像 jmort253 说的那样，可以在 chrome 中将其设置为 null，但在其他浏览器中您可能无法做到。请记住，尽管 navigator.plugin 不是 JavaScript 数组，而是 pluginArray

# c# - 如果 C# 中不知道文件位置，如何从文本文件中读取数据？

> ID：10083543
> 
> 赞同：3
> 
> 时间：2012-04-10T05:31:57.057
> 
> 标签：c#, file

这个问题之前在 StackOverFlow 中已经被问过，并且答案也在那个帖子中被标记。但遗憾的 [是从未知位置读取文件中提供的解决方案？](https://stackoverflow.com/questions/8861854/read-a-file-from-an-unknown-location)不能解决我的问题。
我正在建立一个网站，需要从文本文件中读取数据。该文件在我的电脑中的实际位置是：`C:\Developments\TestProject\PettyCashSolution\PettyCashWeb\DataFile.txt`我已经从上面的链接尝试了以下解决方案，但没有运气。

```
string sString = string.Empty;
string sStr = "";
StreamReader oStreamReader;
try
{ 
```

**尝试1**

```
sStr = Path.Combine(Path.GetDirectoryName(System.Reflection.Assembly.GetExecutingAssembly().Location), "DataFile.txt"); 
```

**这将在下面返回：**
`C:\WINDOWS\Microsoft.NET\Framework\v2.0.50727\Temporary ASP.NET Files\pettycashweb\af7f0870\c5ac294a\DataFile.txt`

**尝试2**

```
sStr = Path.Combine(Application.StartupPath, "DataFile.txt"); 
```

**这将返回如下：**
编译错误：当前上下文中不存在名称“应用程序”

**尝试3**

```
oStreamReader = new StreamReader(File.OpenRead(Directory.GetCurrentDirectory().ToString() + "\\DataFile.txt")); 
```

**这将返回如下：**
异常：找不到文件 'C:\Program Files\Microsoft Visual Studio 8\Common7\IDE\DataFile.txt'

```
oStreamReader = new StreamReader(sStr);
sString = oStreamReader.ReadLine();

}
catch (Exception ex)
{
} 
```

还请建议我应该怎么做，以便在服务器（iis）中发布网络后，从文本文件中读取的数据将正常工作。谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-10T05:37:10.837

您可以通过以下方式获取应用程序路径`AppDomain.CurrentDomain.BaseDirectory`

您的代码必须是这样的

`sStr = Path.Combine(AppDomain.CurrentDomain.BaseDirectory, "DataFile.txt");`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-10T05:41:38.383

您可以使用

```
HttpContext.Current.Request.ApplicationPath 
```

然后根据它附加字符串。

# android - 使用带有 smtp 但没有 SSL 的 JavaMail API 在 android 中发送电子邮件

> ID：10083547
> 
> 赞同：6
> 
> 时间：2012-04-10T05:32:20.753
> 
> 标签：android, smtp, jakarta-mail

我已经解决了[这个](https://stackoverflow.com/questions/2020088/sending-email-in-android-using-javamail-api-without-using-the-default-android-a)问题，它适用于使用 SSL 的自己的案例

我也试过[这个](https://stackoverflow.com/questions/9461223/sending-email-in-android-using-javamail-api)，它在某种程度上适合我的需要，但在我的情况下不起作用。

我也阅读[了这个](http://support.google.com/a/bin/answer.py?hl=en&answer=176600)主题，但仍然无法在我的代码中不使用 SSL 的情况下发送电子邮件。

每次我发送邮件时，它都会显示**“异常 554，邮件被拒绝”**

我真正需要的是使用::

邮件主机：**“smtpout.secureserver.net”**

端口号：**25**

谢谢，

哈普斯。

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-04-10T05:46:59.890

首先使用Mail.jar、activation.jar、Additional.jar文件上传到你的项目中

使用此邮件类别

```
package com.technosoft.AkashEmailAddress;

import java.io.ByteArrayInputStream;
import java.io.IOException;
import java.io.InputStream;
import java.io.OutputStream;
import java.util.Date;
import java.util.Properties;
import javax.activation.CommandMap;
import javax.activation.DataHandler;
import javax.activation.DataSource;
import javax.activation.MailcapCommandMap;
import javax.mail.BodyPart;
import javax.mail.Multipart;
import javax.mail.PasswordAuthentication;
import javax.mail.Session;
import javax.mail.Transport;
import javax.mail.internet.InternetAddress;
import javax.mail.internet.MimeBodyPart;
import javax.mail.internet.MimeMessage;
import javax.mail.internet.MimeMultipart;

import android.util.Log;

public class Mail extends javax.mail.Authenticator { 
  private String _user; 
  private String _pass; 

  private String[] _to; 
  private String _from; 

  private String _port; 
  private String _sport; 

  private String _host; 

  private String _subject; 
  private String _body; 

  private boolean _auth; 

  private boolean _debuggable; 

  private Multipart _multipart; 

  public Mail() { 
    _host = "smtp.gmail.com"; // default smtp server 
    _port = "465"; // default smtp port 
    _sport = "465"; // default socketfactory port 

    _user = ""; // username 
    _pass = ""; // password 
  _from = ""; // email sent from 
    _subject = ""; // email subject 
    _body = ""; // email body 

    _debuggable = false; // debug mode on or off - default off 
    _auth = true; // smtp authentication - default on 

    _multipart = new MimeMultipart(); 

    // There is something wrong with MailCap, javamail can not find a handler for the multipart/mixed part, so this bit needs to be added. 
    MailcapCommandMap mc = (MailcapCommandMap) CommandMap.getDefaultCommandMap(); 
    mc.addMailcap("text/html;; x-java-content-handler=com.sun.mail.handlers.text_html"); 
    mc.addMailcap("text/xml;; x-java-content-handler=com.sun.mail.handlers.text_xml"); 
    mc.addMailcap("text/plain;; x-java-content-handler=com.sun.mail.handlers.text_plain"); 
    mc.addMailcap("multipart/*;; x-java-content-handler=com.sun.mail.handlers.multipart_mixed"); 
    mc.addMailcap("message/rfc822;; x-java-content-handler=com.sun.mail.handlers.message_rfc822"); 
    CommandMap.setDefaultCommandMap(mc); 
  } 

  public Mail(String user, String pass) { 
    this(); 

    _user = user; 
    _pass = pass; 
  } 

  public boolean send() throws Exception { 
    Properties props = _setProperties(); 

    if(!_user.equals("") && !_pass.equals("") && _to.length > 0 && !_from.equals("") && !_subject.equals("") && !_body.equals("")) { 

        Session session = Session.getInstance(props, this); 
     DataHandler handler = new DataHandler(new ByteArrayDataSource(_body.getBytes(), "text/plain")); 
      MimeMessage msg = new MimeMessage(session); 

      msg.setFrom(new InternetAddress(_from)); 
      msg.setDataHandler(handler);
      InternetAddress[] addressTo = new InternetAddress[_to.length]; 
      for (int i = 0; i < _to.length; i++) { 
        addressTo[i] = new InternetAddress(_to[i]); 
      } 
        msg.setRecipients(MimeMessage.RecipientType.TO, addressTo); 

      msg.setSubject(_subject); 
      msg.setSentDate(new Date()); 

      // setup message body 
      BodyPart messageBodyPart = new MimeBodyPart(); 
      messageBodyPart.setText(_body); 
    _multipart.addBodyPart(messageBodyPart); 

      // Put parts in message 
    msg.setContent(_multipart); 

      // send email 
      Transport.send(msg); 
      Log.v("mas", "Email was  send");
      return true; 
    } else { 
         Log.v("mas", "Email was  not send");
      return false; 

    } 
  } 
  public class ByteArrayDataSource implements DataSource {   
      private byte[] data;   
      private String type;   

      public ByteArrayDataSource(byte[] data, String type) {   
          super();   
          this.data = data;   
          this.type = type;   
      }   

      public ByteArrayDataSource(byte[] data) {   
          super();   
          this.data = data;   
      }   

      public void setType(String type) {   
          this.type = type;   
      }   

      public String getContentType() {   
          if (type == null)   
              return "application/octet-stream";   
          else  
              return type;   
      }   

      public InputStream getInputStream() throws IOException {   
          return new ByteArrayInputStream(data);   
      }   

      public String getName() {   
          return "ByteArrayDataSource";   
      }   

      public OutputStream getOutputStream() throws IOException {   
          throw new IOException("Not Supported");   
      }   
  }   

  @Override 
  public PasswordAuthentication getPasswordAuthentication() { 
    return new PasswordAuthentication(_user, _pass); 
  } 

  private Properties _setProperties() { 
    Properties props = new Properties(); 

    props.put("mail.smtp.host", _host); 

    if(_debuggable) { 
      props.put("mail.debug", "true"); 
    } 

    if(_auth) { 
      props.put("mail.smtp.auth", "true"); 
    } 

    props.put("mail.smtp.port", _port); 
    props.put("mail.smtp.socketFactory.port", _sport); 
    props.put("mail.smtp.socketFactory.class", "javax.net.ssl.SSLSocketFactory"); 
    props.put("mail.smtp.socketFactory.fallback", "false"); 

    return props; 
  } 

  // the getters and setters 
  public String getBody() { 
    return _body; 
  } 

  public void setBody(String _body) { 
    this._body = _body; 
  }

public void setTo(String[] toArr) {
    // TODO Auto-generated method stub
    this._to=toArr;
}

public void setFrom(String string) {
    // TODO Auto-generated method stub
    this._from=string;
}

public void setSubject(String string) {
    // TODO Auto-generated method stub
    this._subject=string;
} 

  // more of the getters and setters ….. 
} 
```

Mail 类在 Your Main 类中使用了 send() 方法

```
Main class extends Activity{
    Mail m=new Mail("DefultUserID@gmail.com","XXXXXXX");
    @SuppressWarnings("static-access")
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.email);
 String[] toArr = {"UserEmailID_1@gmail.com","UserEmail_ID@Yahoo.co.in"}; 
        m.setTo(toArr);
        m.setFrom("AKASH"); 
        m.setSubject("Your Subject"); 
        m.setBody("Your Message body");

        try {
            boolean i= m.send();
            if(i==true){
                Toast.makeText(getApplicationContext(),"Email was sent successfully ",2000).show();

            }
            else
            {
                Toast.makeText(getApplicationContext(),"Email was not sent successfully ",2000).show();

            }

        } catch (Exception e2) {
            // TODO Auto-generated catch block
            e2.printStackTrace();
        }

}
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-10T05:48:50.607

这是我为您的错误得到的，这意味着从您的 ip 发送邮件被阻止。以下答案来自此链接 [http://postmaster.bluetie.com/subcontent/smtpCodes.php](http://postmaster.bluetie.com/subcontent/smtpCodes.php)

554 - BL0002: Mail Refused - IP Address xxx.xxx.xxx.xxx Blacklisted - Please see [http://www.spamcop.net/w3m?action=checkblock&ip=xxx.xxx.xxx.xxx](http://www.spamcop.net/w3m?action=checkblock&ip=xxx.xxx.xxx.xxx) 此错误信息表示发送 IP在 SpamCop 黑名单中找到地址。发送方必须发出删除/重置请求。BlueTie 无法从黑名单中删除发送 IP 地址。对于此类错误，您可能希望联系您的 ISP 以获得进一步的帮助。

# ruby-on-rails - Rails 控制器忽略查询

> ID：10083548
> 
> 赞同：0
> 
> 时间：2012-04-10T05:32:22.957
> 
> 标签：ruby-on-rails, ruby, ajax

我正在创建一个类似于 reddit 的简单的赞成/反对票系统，用户可以在其中赞成/反对某些内容，并在需要时改变主意。

我有一个页面对我的控制器的“创建”操作进行 AJAX 调用。控制器创建记录并返回正确的 js.erb 没有问题。但是，我想看看是否存在现有帖子，如果存在，我想销毁它。我的控制器如下所示：

```
def create
    @vote = GameVote.new
    @vote.game_id = params[:game_id]
    @vote.vote = params[:vote]
    @vote.user_id = session[:user_id]

    existing_vote = GameVote.where(whatever)

 respond_to do |format|
   if @vote.save
    format.js
   end
  end
end 
```

它似乎只是忽略了中间查询，防止我在尝试保存新条目之前将其销毁（如果它存在）。有任何想法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-10T06:11:35.467

更新现有的 GameVote（如果存在）似乎更自然，而不是对 delete+create。

为此，只需更换：

```
@vote = GameVote.new
@vote.game_id = params[:game_id]
@vote.vote = params[:vote]
@vote.user_id = session[:user_id]

existing_vote = GameVote.where(whatever) 
```

和：

```
@vote = GameVote.where(game_id: params[:game_id], user_id: session[:user_id]).first_or_initialize
@vote.vote = params[:vote] 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-10T06:24:01.790

尝试 ：

```
@vote = GameVote.find_or_create_by_game_id_and_user_id(params[:game_id], session[:user_id])
OR
@vote = GameVote.find_or_create(:game_id => params[:game_id], :user_id => session[:user_id])

@vote.vote = params[:vote] 
```

# java - 使用 AKKA Java API 启动 ActorSystem 的正确方法

> ID：10083549
> 
> 赞同：3
> 
> 时间：2012-04-10T05:32:25.390
> 
> 标签：java, akka, typedactor

我正在使用适用于 Akka 2.0 的 Java API，并且有一种下沉的感觉，即我没有正确使用 ActorSystem 来启动和/或/xor 停止 TypedActors。当应用程序关闭时，java 进程不会终止。经过调试，我看到默认调度程序仍然有多个正在运行的线程，并且调度程序仍在运行。在下面的示例中，有什么明显的我做错了吗？

```
Config akkaConf = ConfigFactory.load();
ActorSystem actorSystem = ActorSystem.create("myApp", akkaConf);

TypedProps<Actor1Impl> actor1TypedProps = new TypedProps<Actor1Impl>(Actor1Interface.class, new Creator<Actor1Impl>(
    public Actor1Impl create() {
        return new Actor1Impl(nonDefault, constructor, scalaIsSo, muchMoreElegant);
    }
);
Actor1Interface a1 = TypedActor.get(actorSystem).typedActorOf(actor1TypedProps, "anA1Actor"); 
```

读者不知道（为了简洁起见），Actor1Impl 类实现了 TypedActor.PreStart 和 .PostStop。在 PreStart 中，它会安排一个 Runnable 任务定期执行。我认为这可以保持调度程序处于活动状态，但我还保存了返回的 Cancellable，我相信我应该在 PostStop 块中取消它。这无助于终止调度程序线程。无论如何，回到故事...

还有许多其他的actor类型，每一个都有一个非标准的构造函数。其中一些向调度程序注册定期 Runnable，就像上面的 Actor1Impl 一样。为了更有趣，有些甚至需要其他 Actor 作为构造函数参数，以便让 Actor 注册回调，如下所示：

```
public Actor2Impl(Actor1Interface a1) {
    a1.registerCallback(TypedActor.<Actor2Interface>self());
} 
```

在确定应用程序已过期后，将执行以下操作：

```
TypedActor.get(actorSystem).stop(a1);
TypedActor.get(actorSystem).stop(a2);
...
TypedActor.get(actorSystem).stop(aN);
actorSystem.shutdown(); 
```

有什么我正在做的明显错误的事情会阻止java进程终止吗？具体来说，有什么会导致调度程序和默认调度程序关闭？

# javascript - 在哪里编码以覆盖backbone.sync

> ID：10083550
> 
> 赞同：7
> 
> 时间：2012-04-10T05:32:26.150
> 
> 标签：javascript, backbone.js, underscore.js

我想覆盖backbone.sync 我已经问过了，但问题是我不太明白。如果我要覆盖同步功能，我需要知道将代码放在哪里。

如果我把它放在这样的模型上

```
model = Backbone.Model.extend({ sync:"" }); 
```

那我该怎么称呼它？如果我要使用保存方法。我还需要将创建的方法映射从 POST 更改为 PUT。暂时我求助于`'create': 'PUT',`实际编辑backbone.js文件（知道它不好）。在我忘记之前我还需要添加这个

```
sendAuthentication = function (xhr) {
          xhr.setRequestHeader('Authorization', auth)
}; 
```

作为 beforeSend 参数，因为我的服务器具有身份验证。我应该在哪里做呢？我应该去哪里放置代码？在我的模型中？在我的收藏中？还是在我看来？有什么帮助吗？谢谢你。

# 更新

我也可以覆盖我收藏的同步吗？我的意思是我可以有这样的东西吗？

```
collection = Backbone.Collection.extend({ sync:""}); 
```

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-04-10T11:47:03.830

Backbone 框架背后的策略是使其易于编辑并灵活地满足各种需求。因此，如果您查看源代码，您会发现调用 Backbone.sync 的每个方法实际上都首先调用“this.sync”。

从 Backbone 手册中，您可以阅读：

> 通过将同步函数添加到 Backbone 集合或单个模型，可以将同步函数作为 Backbone.sync 全局覆盖，或者在更细粒度的级别上覆盖。

所以你有两个选择

### 选项一 - 替换全局 Backbone.sync 函数

如果您覆盖全局 Backbone.sync 您应该将代码放在全局应用程序文件中（实际上是您想要的任何位置，但必须在初始 javascript 加载时对其进行评估（执行），才能按预期工作

```
// Anywhere you want

Backbone.sync = function(method, collection, options) {
        console.log(method, collection options)
} 
```

这将覆盖 Backbone.sync 并且实际上将在您的控制台上显示每次调用 collection.fetch、保存、删除等时调用的内容。

在这里你没有默认的 Methodmap，事实上你除了参数之外什么都没有：

*   方法 - 这是一个字符串 - 'read', 'create', 'delete', 'update'
*   集合 - 这是您调用该方法的集合实例
*   选项 - 具有一些成功、错误功能，您可能会保留也可能不会保留。

在你的浏览器中调试这个，在阅读 Backbone 源代码的同时，它很容易理解。

### 选项二 - 添加到您的模型/集合同步方法

如果您希望对所有其他模型/集合使用默认 Backbone.sync 方法，则使用此方法，除了您专门定义的模型/集合：

```
mySocketModel = Backbone.Model.extend({ 
     sync : function(method, collection, options) {
            console.log('socket collection '+this.name+' sync called');
     }
});

Partners = new mySocketModel({ name : 'partners' });
Users = new mySocketModel({ name : 'users' });
Log = new Backbone.Collection; 
```

因此，如果您调用 Partners.fetch() 或 Users.fetch()，它们将不再调用 Backbone.sync，但您的 Log.fetch() 方法会。

# iphone - 我的应用程序因“程序收到 EXC_BAD_ACCESS”错误 iphone 而崩溃

> ID：10083554
> 
> 赞同：2
> 
> 时间：2012-04-10T05:32:47.133
> 
> 标签：iphone, exc-bad-access, addressbook, abrecordcopyvalue

当我的应用程序从背景启动时，我正在运行一个新线程以使用通知中心获取 AddresssBook 数据。这是我的代码，它显示了我如何调用该方法

```
 -(void)appLaunchedFromBackground:(NSNotification *) notification  {

    // NSThread *backgroundThread; is my ivar
    backgroundThread = [[NSThread alloc]initWithTarget:self selector:@selector(getUpdatedAddressBookData) object:nil];
    [backgroundThread start];
}

-(void)getUpdatedAddressBookData {

    NSAutoreleasePool *pool = [[NSAutoreleasePool alloc] init];
    AddressBook *addBook = [[AddressBook alloc]init];
    [addBook fetchAddressBookDataInBackground];
    [addBook release];
    [pool drain];
} 
```

这是我的 fetchAddressBookDataInBackground 方法的代码

```
 -(void)fetchAddressBookDataInBackground {

    if (self.tempArray == nil) {
        NSMutableArray *temp = [[NSMutableArray alloc]init];
        self.tempArray = temp;
        [temp release];
    }

    ABAddressBookRef addressBook = ABAddressBookCreate();

    NSArray *tempPeople = [[NSArray alloc]init];

    tempPeople = (NSArray*)ABAddressBookCopyArrayOfAllPeople(addressBook); 
    APP_DELGATE.people = [NSArray arrayWithArray:tempPeople];

    int peoCount = [APP_DELGATE.people count];

    for (int i=0; i<peoCount; i++) {

        ABRecordRef record = [APP_DELGATE.people objectAtIndex:i];

        NSNumber *recordId = [NSNumber numberWithInteger:ABRecordGetRecordID(record)];

        // Get fname, lname, company
        NSString *fnm = (NSString *)ABRecordCopyValue(record, kABPersonFirstNameProperty) ;

        NSString *lnm = (NSString *)ABRecordCopyValue(record, kABPersonLastNameProperty) ;

        NSString *comp = (NSString*)ABRecordCopyValue(record,kABPersonOrganizationProperty);

        // Get Ph no
        ABMultiValueRef phoneNumberProperty = ABRecordCopyValue(record, kABPersonPhoneProperty);
        NSArray *tempPhNos = (NSArray*)ABMultiValueCopyArrayOfAllValues(phoneNumberProperty);

        NSArray* phoneNumbers = [self getPhoneNoWithoutSymbols:tempPhNos];

        NSString *strPhoneNos = [self getStringRepresentaionFromArray:phoneNumbers];

        // Get emails
        ABMultiValueRef emailProperty = ABRecordCopyValue(record, kABPersonEmailProperty);
        NSArray* emails = (NSArray*)ABMultiValueCopyArrayOfAllValues(emailProperty);
        NSString *strEmails = [self getStringRepresentaionFromArray:emails];

        // Get URL
        ABMultiValueRef urlProperty = ABRecordCopyValue(record, kABPersonURLProperty);
        NSArray* urls = (NSArray*)ABMultiValueCopyArrayOfAllValues(urlProperty);
        NSString *strURLs = [self getStringRepresentaionFromArray:urls];

        // Get Address
        ABMultiValueRef address=ABRecordCopyValue(record, kABPersonAddressProperty);
        CFDictionaryRef dic=nil;
        NSMutableArray *addressArray = [[NSMutableArray alloc]init];
        for (int index=0; index<ABMultiValueGetCount(address); index++) {

            dic=ABMultiValueCopyValueAtIndex(address, index);
            NSString* labelName=(NSString*)ABMultiValueCopyLabelAtIndex(address, index);

            if (labelName) {

                NSString *street =(NSString*) CFDictionaryGetValue(dic, kABPersonAddressStreetKey);
                NSString  *city= (NSString*)CFDictionaryGetValue(dic, kABPersonAddressCityKey) ;
                NSString  *state= CFDictionaryGetValue(dic, kABPersonAddressStateKey);
                NSString *country=CFDictionaryGetValue(dic, kABPersonAddressCountryKey);
                NSString *zipcode=CFDictionaryGetValue(dic, kABPersonAddressZIPKey);

                NSString *addressDetails=@"";
                if (street) {
                    addressDetails=[NSString stringWithFormat:@"%@ ",street];
                }
                if (city) {
                    addressDetails=[NSString stringWithFormat:@"%@ %@ ",addressDetails,city];
                }
                if (state) {
                    addressDetails=[NSString stringWithFormat:@"%@ %@ ",addressDetails,state];
                }                    
                if (country) {
                    addressDetails=[NSString stringWithFormat:@"%@ %@ ",addressDetails,country];
                }
                if (zipcode) {
                    addressDetails=[NSString stringWithFormat:@"%@ %@ ",addressDetails,zipcode];
                }

                [addressArray addObject:addressDetails];

            }
            [labelName release];
            CFRelease(dic);
        }

        NSString *strAddress = [self getStringRepresentaionFromArray:addressArray];

        // Get Notes
        NSString *noteString=(NSString *)ABRecordCopyValue(record, kABPersonNoteProperty);

        // Get Birthdate
        NSDate *birthDate=(NSDate*)ABRecordCopyValue(record, kABPersonBirthdayProperty) ;
        NSDateFormatter *formatter = [[NSDateFormatter alloc] init];
        [formatter setDateFormat:@"MMMM dd yyyy"];
        NSString *birthdateString = [formatter stringFromDate:birthDate];
        [formatter release];

        // Get user image
        UIImage *image = nil;
        if( ABPersonHasImageData( record ) ) {
            NSData *imageData = (NSData*)ABPersonCopyImageData(record);
            image = [UIImage imageWithData:imageData];
            [imageData release];
        }

        NSString *fullName = [NSString stringWithFormat:@"%@ %@",fnm,lnm];

        // Create User object & add it to array

        User *user = [[User alloc]initUserWithUniqID:recordId.intValue FirstName:fnm lastName:lnm compositeName:fullName company:comp phoneNumbers:strPhoneNos emails:strEmails urls:strURLs address:strAddress notes:noteString dob:birthdateString userImage:image];

        [self.tempArray addObject:user];

        CFRelease(phoneNumberProperty);
        [tempPhNos release];
        CFRelease(emailProperty);
        [emails release];
        CFRelease(urlProperty);
        [urls release];
        CFRelease(address);
        [addressArray release];
        [birthDate release];
        [comp release];
        [noteString release];
        [lnm release];
        [fnm release];

        [user release];
    }

    [tempPeople release];
    CFRelease(addressBook);
    addressBook = nil;
    self.tempArray = [NSMutableArray arrayWithArray:[self.tempArray sortedArrayUsingSelector:@selector(compare:)]];

    APP_DELGATE.allUsersArray = self.tempArray;

    NSDictionary *dic = [NSDictionary dictionaryWithObject:self.tempArray forKey:BATCH_DONE_KEY];
    [[NSNotificationCenter defaultCenter] postNotificationName:BACKGROUND_WORK_DONE_NOTIFICATION object:self userInfo:dic];

}

-(NSMutableArray*)getPhoneNoWithoutSymbols:(NSArray*)array {

    if (self.phNoArray == nil) {
        NSMutableArray *temp = [[NSMutableArray alloc]init];
        self.phNoArray = temp;
        [temp release];
    }

    [self.phNoArray removeAllObjects];

    for (NSString *str in array) {
        [self.phNoArray addObject:[self getPhNo:str]];
    }
    return self.phNoArray;
}

-(NSString*)getPhNo:(NSString*)str {

    NSString *str0 = [str stringByReplacingOccurrencesOfString:@" " withString:@""];
    NSString *str1 = [str0 stringByReplacingOccurrencesOfString:@"(" withString:@""];
    NSString *str2 = [str1 stringByReplacingOccurrencesOfString:@")" withString:@""];
    NSString *str3 = [str2 stringByReplacingOccurrencesOfString:@"-" withString:@""];
    return str3;

}

-(NSString*)getStringRepresentaionFromArray:(NSArray*)array {

    return [array componentsJoinedByString:DELIMITER_SYMBOL];
} 
```

但是我的应用程序在我使用**“ABRecordCopyValue”**函数的任何行都因“程序收到 EXC_BAD_ACCESS”错误而崩溃。我错过了什么？我的代码没有什么问题？

我尝试设置 NSZombieEnabled = YES ，但它没有显示任何消息。只需使用 ABRecordCopyValue 函数在任何行中说“程序收到 EXC_BAD_ACCESS”，在控制台中我看到（gdb）就是这样。

非常感谢任何帮助。谢谢。

# vb6 - 如何解决 MSAccess 2007 报告 (VB6) 中出现的名称冲突错误

> ID：10083557
> 
> 赞同：1
> 
> 时间：2012-04-10T05:33:01.120
> 
> 标签：vb6

我有一个 MSAccess2003 数据库，其中几乎没有报告（报告在 VB 6.0 代码中），我使用 2007 年的选项从 2003 年迁移到 2007 年，现在我在 2003 年版本中提到的文件很少在 2007 年不存在版本（存储库），如果我添加对 2003 年引用的组件的引用，则会出现类似“名称与现有模块、项目或对象库冲突”的错误。谁能帮我解决这个问题

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-10T06:17:46.087

请检查下面的链接，它将解决此错误

[http://kalidadiz.wordpress.com/2010/07/16/access-2007-recordset2/](http://kalidadiz.wordpress.com/2010/07/16/access-2007-recordset2/)

**编辑：**链接中的信息...

> 但是当我尝试编译它时，当出现此编译错误消息时，我刚刚所做的声明被突出显示：

未定义用户定义类型

> 事实证明，Recordset2 对象需要名为 Microsoft Office 12.0 Access Database Engine Object Library 的对象库的支持。考虑到我很快找到了解决方案，我继续前进并通过 VBA 编辑器中的工具引用添加了这个库......并且出现了这个错误：

名称与现有模块、项目或对象库冲突

> 我想这毕竟不是那么快解决！我必须做的下一步是弄清楚如何摆脱第二个错误，并再次使用互联网进行救援！事实证明，冲突与参考部分中已经存在的现有库有关。冲突的库是： Microsoft DAO 3.6 对象库 Microsoft Office 12.0 Access 数据库引擎对象库 第一个是引用中已经存在的库，并且似乎不允许添加第二个库，因此，冲突。我在网上找到了一个解释：Microsoft DAO 3.6 Object Library 仅在您使用 .mdb 格式时才有用，虽然这仍然适用于新的 .accdb 格式，但更好的选择是 Microsoft Office 12.0 Access Database Engine对象库，它处理 Microsoft DAO 3.6 对象库所做的一切，并为新的 2007 版本提供支持。有了这个解释，我从参考资料中删除了 Microsoft DAO 3.6 对象库，然后添加了 Microsoft Office 12.0 Access 数据库引擎对象库……问题解决了！

# iphone - 当应用程序在后台时调用函数

> ID：10083562
> 
> 赞同：0
> 
> 时间：2012-04-10T05:33:11.860
> 
> 标签：iphone, ios, xcode, multitasking

在我的项目中，我创建了一个方法来下载文件。当应用程序在前台时，我可以使用计时器调用该下载方法

```
timer = [NSTimer scheduledTimerWithTimeInterval:10 target:self selector:@selector(download:) userInfo:nil repeats:YES]; 
```

但是现在我想从 applicationDidEnterBackground 调用这个函数。如果应用程序在后台如何每 10 或 15 分钟调用一次该下载方法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-10T05:50:55.863

您可以使用[KeepAliveTimeout](http://developer.apple.com/library/ios/#documentation/UIKit/Reference/UIApplication_Class/Reference/Reference.html#//apple_ref/occ/instm/UIApplication/setKeepAliveTimeout%3ahandler%3a)在 BG 中每 10 分钟获取一次 CPU 时间。

CPU 只用了几秒钟，不能保证精确到 10 分钟。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-13T07:19:31.740

您不能简单地在 iPhone 的后台运行应用程序。您的应用程序应该属于音频、voip、位置、外部附件等类别。请参考此[链接](http://developer.apple.com/library/ios/#documentation/iPhone/Conceptual/iPhoneOSProgrammingGuide/ManagingYourApplicationsFlow/ManagingYourApplicationsFlow.html#//apple_ref/doc/uid/TP40007072-CH4-SW3)。

或者您必须使应用程序出现在前台以完成您的任务。

浏览苹果文档并发布您的问题

# android - Android ICS 相机行为

> ID：10083566
> 
> 赞同：0
> 
> 时间：2012-04-10T05:33:19.260
> 
> 标签：android, camera, android-4.0-ice-cream-sandwich

在 ICS 的情况下，如果我们在启动动画发生时继续滑动，我们是否希望相机在启动到主屏幕期间或之后打开？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-10T05:49:26.010

只有在出现主屏幕后，相机才会打开。

# string - 链表 MutableString 作业继承 vs 委托

> ID：10083567
> 
> 赞同：0
> 
> 时间：2012-04-10T05:33:21.373
> 
> 标签：string, inheritance, linked-list, mutable, delegation

我有一个链表问题源于我即将发布的这个作业提示。它可能有助于回答：

细节

Java String 类是不可变的（您不能更改内容）。这有时会妨碍您对字符串执行的操作（即更改现有字符串）。因此，对于这个作业，您将创建一个名为 MutableString 的类。注意/免责声明：Java API 确实有一个 StringBuffer 类，它是可变的，但是出于本作业的意图和目的，我们会假装我们不知道它;-)

```
An object of the MutableString class contains the following operations/behaviors -- which means the class itself must contain the following methods:

Character charAt(int index): returns the Character at the specified index in the string -- if the index lies outside the string, throw a MutableStringIndexOutOfBoundsException (you must write this class)

void set(int index, Character ch): replaces the existing Character at the specified location -- if the index lies outside the string throw a MutableStringIndexOutOfBoundsException

void add(int index, Character ch): creates a new spot in the list for the Character at the index specified -- if the index lies outside the string throw a MutableStringIndexOutOfBoundsException

Character remove(int index): removes the Character at specified index -- if the index lies outside the string, throw a MutableStringIndexOutOfBoundsException

boolean remove(Character ch): removes the first occurrence (starting from the beginning of the MutableString) of the Character -- if the Character is not found, return false

boolean removeAll(Character ch): removes all occurrences of the specified Character -- if Character is not found, return false

void toUpper(): converts the current string to all upper case

void toLower(): converts the current string to all lower case

MutableString substring(int start, int finish): returns a string starting at the Character specified by start and concluding with the Character specified by finish -- if start or finish is outside the the string, throw a MutableStringIndexOutOfBoundsException

char [] toCharArray(): returns a char array containing all the characters in the string -- be sure and handle all cases

int length(): reports/returns the length of the string

String toString(): returns a String containing all the Characters

String toReverseString(): returns a String containing all the Characters in reverse order -- you must utilize recursion to accomplish this task

int compareTo(MutableString that): allows comparison of two MutableString objects -- this implies you will implement the Comparable interface for your MutableString class

void sort(): alphabetizes the letters in case-insensitive fashion in ascending order -- you must write the code for this sort (no API calls are allowed) 
```

您必须使用链表来表示字符串的字符（您必须编写 LinkeList 类）。您的 LinkedList 类应包含用于更新和修改列表的基本操作。考虑到这一点，在 Java API 中实现 List 接口。对于您认为对 LinkedList 的功能而言不必要的方法，将这些方法存根并抛出一个异常，其中包含有关调用了什么方法以及尚未实现的信息的异常。注意：确保你的 LinkedList 类没有做任何 MutableString 特定的事情。随意使用以下已删除的 LinkedList 类来完成您的作业。它可能不包含您需要的所有方法，但它确实包含来自 Java API 的 List 接口的方法。

MutableString 必须尽可能利用 LinkedList 行为（方法）（不要在 MutableString 中编写与 LinkedList 类中的内容相同的代码）。因此，您的 MutableString 将包含一个引用 LinkedList 对象的字段。顺便说一句，这个概念被称为委托，这是软件工程和设计中非常重要的概念。不要将 MutableString 设计为继承自 LinkedList。

MutableString 的每个节点都应该包含一个字符——请注意，这并不意味着对节点类中数据的引用应该/必须是字符类型——这会使你的 LinkedList 类特定于 MutableString，我们不希望在这种情况下。

**我不明白的部分是上面的第 2 段，它谈到了从链表类继承。我一直习惯于编写诸如 public class MutableString extends LinkedList 之类的东西，但我们不能这样做，而且我真的不知道如何在不从类继承的情况下开始编写这个 mutablestring 类。帮助解释如何做到这一点，差异会很棒。谢谢。

我不太擅长链表，所以这个问题很简单:) **

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-22T08:31:08.670

它说你应该使用委托而不是继承。

有关委托和继承之间的区别，请查看[此](http://www.java-forums.org/advanced-java/4441-delegation-vs-inheritance.html)内容。它用一个例子来解释。

# c# - 使用 c# 和 add-in Express 在 IE 中禁用特定的 IE9 插件

> ID：10083568
> 
> 赞同：0
> 
> 时间：2012-04-10T05:33:22.250
> 
> 标签：c#, internet-explorer-9

我为 IE9 创建了一个应用程序。当那个应用程序在 IE9 上启动时，我想使用 c# 或使用 Add-in Express 禁用 IE9 的特定插件。我怎样才能控制它？

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-11T14:49:37.460

IE 对象模型不提供这种可能性。此外，当您在 IE 中禁用加载项时，您需要重新启动浏览器。**否则**，加载项仍在运行。

# database - 设计数据库表结构

> ID：10083571
> 
> 赞同：0
> 
> 时间：2012-04-10T05:33:56.280
> 
> 标签：database, logging, database-design

我是这方面的新手，试图在网上找到信息并没有取得任何成功。我需要创建一些日志表，但不知道该表应包含哪些信息以及如何组织它们。

例如：LogErrorTabble、LogChangesTable 等。

谁能给我一些关于此的文章或链接到他使用的示例解决方案的站点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-10T07:04:02.433

首先，您使用什么日志库？如果您使用的是 java，请使用 log4j，如果您使用的是 .NET，请使用 log4net。这两个框架都提供了开箱即用的数据库日志附加程序。

如果您不使用日志库：使用日志库:)

如果您真的想自己做，我可以推荐我在项目中使用的布局，其中日志消息存储在表*日志中，与**日志*表中的条目关联的异常存储在*异常*表中，但这高度依赖在您的平台上。

您可以在 log4net 和 log4j 文档中找到很多关于如何设计日志表的有用信息。例如看看 log4net [AdoNetAppender Class](https://logging.apache.org/log4net/release/sdk/log4net.Appender.AdoNetAppender.html)。

# asp.net - asp.net 重定向缺陷

> ID：10083577
> 
> 赞同：0
> 
> 时间：2012-04-10T05:34:40.427
> 
> 标签：asp.net

我正在处理 asp.net 应用程序。用户单击网格项模板字段内的某个链接。如果他没有登录，那么他会重定向到登录页面。登录后，他正确返回到同一页面；问题是**“我已将查询字符串中的值传递给他单击链接的页面，并且在登录后网格显示为空白，因为该网格未获取查询字符串值“**我想你理解我的问题。请分享你的有用意见。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-10T05:56:14.570

[http://www.aspdotnetfaq.com/Faq/what-is-the-difference-between-server-transfer-and-response-redirect-methods.aspx](http://www.aspdotnetfaq.com/Faq/what-is-the-difference-between-server-transfer-and-response-redirect-methods.aspx)

这不是缺陷，而是 Response.Redirect 的期望行为。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-10T05:58:46.620

在会话中存储值并在他从登录页面成功返回后检索它。

# function - 有人能解释一下这个简单的功能是如何工作的吗

> ID：10083579
> 
> 赞同：2
> 
> 时间：2012-04-10T05:34:43.417
> 
> 标签：function, parameters, closures, dart

来自[http://www.dartlang.org/language-tour/#functions](http://www.dartlang.org/language-tour/#functions)：

```
Function makeAdder(num n) {
  return (num i) => n + i;
}

main() {
  var add2 = makeAdder(2);
  print(add2(3)); // 5
} 
```

能不能把这个翻译成英文。。。。

困扰我的是不理解它是如何工作的，它是如何工作的..

应该是这样`var add2 = makeAdder;`然后在`print(add2(3));`但它不会工作......

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-10T07:00:47.710

将其转换为 JavaScript 语法——希望这会有所帮助：

```
function makeAdder(n) {
  // Returns a new function (closure) that captures the local variable `n`, as
  // it was passed to this function. So if `n` is 10, this function essentially
  // becomes function(i) { return 10 + i; };.
  return function(i) { return n + i; };
}

function main() {
  // add2 is now a function that adds 2 to its given argument.
  var add2 = makeAdder(2); 
  print(add2(3)); // 5 is passed to add2 -- the result is 2 + 3 = 5.
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-10T07:45:17.497

每次调用`makeAdder(num n)`都会创建并返回一个由 lambda 表达式定义的新函数 -- `(num i) => n + i`。`n`用`madeAdder`, 而用`i`lambda 表达式声明。

有了这个，`makeAdder(2)`基本上返回了新函数`(num i) => 2 + i`，它被设置为 的值`add2`。

然后将其称为 as `add2(3)`，计算结果`n + i`为`2 + 3`，结果为`5`。

* * *

这也是[柯里](http://en.wikipedia.org/wiki/Currying)化的一个例子：

```
madeAdder(2)(3); // 5 
```

# dictionary - 枚举字典中的键？

> ID：10083580
> 
> 赞同：14
> 
> 时间：2012-04-10T05:34:45.560
> 
> 标签：dictionary, python-2.7

我有一本字典

```
Dict = {'ALice':1, 'in':2, 'Wonderland':3} 
```

我可以找到返回键值的方法，但无法返回键名。

我希望 Python 逐步返回字典键名（for 循环），例如：

```
Alice
in
Wonderland 
```

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-04-10T05:36:01.197

您可以使用`.keys()`：

```
for key in your_dict.keys():
  print key 
```

或者只是遍历字典：

```
for key in your_dict:
  print key 
```

请注意，字典没有排序。您生成的密钥将以某种随机顺序出现：

```
['Wonderland', 'ALice', 'in'] 
```

* * *

如果您关心订单，一个解决方案是使用*排序*的列表：

```
sort_of_dict = [('ALice', 1), ('in', 2), ('Wonderland', 3)]

for key, value in sort_of_dict:
  print key 
```

现在你得到你想要的结果：

```
>>> sort_of_dict = [('ALice', 1), ('in', 2), ('Wonderland', 3)]
>>> 
>>> for key, value in sort_of_dict:
...   print key
... 
ALice
in
Wonderland 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-19T09:10:23.590

```
def enumdict(listed):
    myDict = {}
    for i, x in enumerate(listed):
        myDict[x] = i

    return myDict

indexes = ['alpha', 'beta', 'zeta']

print enumdict(indexes) 
```

> 打印：{'alpha': 0, 'beta': 1, 'zeta': 2}

**编辑：如果您希望对字典进行排序，请使用ordereddict。**

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-10T05:37:44.113

dict 有一个 keys() 方法。

Dict.keys() 将返回一个键列表，或者使用迭代器方法 iterkeys()。

# android - 如何将图像设置为图形的背景？

> ID：10083587
> 
> 赞同：0
> 
> 时间：2012-04-10T05:35:25.297
> 
> 标签：android

> **可能重复：**
> [如何在图表中设置背景图像？](https://stackoverflow.com/questions/10054202/how-to-set-a-background-image-in-graph)

我正在实现一个与图表相关的应用程序。

我正在使用 Achartengine.jar 来实现图形。

我的问题是当我将背景颜色设置为图形时，它应用得很好。

我想将图像设置为图形的背景。

但它没有正确设置。

当我将图像设置为背景时，图像显示在 x、y 轴内。

X、Y 轴边缘不显示。

我的代码如下

[如何在图形中设置背景图像？](https://stackoverflow.com/questions/10054202/how-to-set-a-background-image-in-graph)

如果有人知道如何解决这个问题，请帮助我。

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-10T06:00:18.697

我已经像这样将背景应用于我的图表

```
renderer.setApplyBackgroundColor(true);
renderer.setBackgroundColor(Color.WHITE);
renderer.setMarginsColor(Color.WHITE); 
```

# wcf - MSMQ WCF，接收时间

> ID：10083589
> 
> 赞同：0
> 
> 时间：2012-04-10T05:35:41.340
> 
> 标签：wcf, error-handling, msmq

使用 MSMQ WCF 客户端和服务器时如何设置消息 timeToBeRecieved？

我正在使用 msmq 服务来管理到不可靠目标系统的消息传递。消息可能会持续数天未送达。

大多数无效消息使用服务器绑定中的以下设置进入毒队列。

```
receiveErrorHandling="Move" 
```

一些消息最终进入系统死信队列而不是毒队列。有没有办法配置死信消息进入与上述相同的队列？队列是实际消息队列的子队列，称为 queue;poison。

如何将 timeToBeReceived 设置为足够大的值以使消息最终进入毒队列？我希望每种消息类型都有一个失败的队列，我也不想处理死信。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-10T14:18:12.687

您可以在绑定的配置文件中设置值：

```
<bindings>
  <netMsmqBinding>
    <binding timeToLive="[define your timespan here]" />
    <!-- more configuration -->
  </netMsmqBinding>
</bindings>
... 
```

# java - LinkedList：java.lang.OutOfMemoryError：Java 堆空间

> ID：10083590
> 
> 赞同：2
> 
> 时间：2012-04-10T05:35:41.513
> 
> 标签：java, arraylist, linked-list, heap-memory

我正在尝试为具有 Graph(GraphImp) 对象和 Node(NodeImp) 对象的分配创建图形实现。

节点对象包含对其 Graph、x & y 坐标和名称的引用。

Graph 对象包含其节点的链表。

当我尝试将节点添加到节点列表的中间时会出现问题（附加到末尾可以正常工作）。程序用完了堆空间。我不确定为什么会发生这种情况，因为插入 LinkedList 的复杂性应该是 O(1)，并且 Java（我相信）使用指针，而不是对象本身。我也试过一个数组列表

在这种情况下，使堆变大不是一种选择，并且（据我所知）不应该是问题的根源。

提前致谢。

这是错误：

```
Exception in thread "main" java.lang.OutOfMemoryError: Java heap space
    at java.util.LinkedList.addBefore(LinkedList.java:795)
    at java.util.LinkedList.add(LinkedList.java:361)
    at pt.graph.GraphImp.addNode(GraphImp.java:79)
    at pt.graph.NodeImp.<init>(NodeImp.java:25)
    at pt.graph.Graphs.newNode(Solution.java:68) 
```

这是代码：

```
class Graphs
{

    static Node newNode(Graph g, double xpos, double ypos, String name) throws InvalidGraphException,InvalidLabelException
    {
        if(g==null || !(g instanceof GraphImp)){   //Checking validity of inputs
            throw new InvalidGraphException();
        }
        if(name==null){
            throw new InvalidLabelException();
        }

        NodeImp[] existNodes = ((GraphImp)g).getNodes(); //Get all Nodes already present in the Graph
        for(int i=0;i<existNodes.length;i++){
            if(existNodes[i].getXPos() == xpos && existNodes[i].getYPos() == ypos){ //If node already present at this position, throw InvalidLabelException()
                throw new InvalidLabelException();
            }
        }

        Node n = new NodeImp((GraphImp)g, xpos, ypos, name); //If all inputs are valid, create new node

        return n;
    }

}

class NodeImp extends Node //Node Class
{

    private Object flags = null;
    private GraphImp g = null;
    private double xpos = 0.0;
    private double ypos = 0.0;
    private String name = "";

    NodeImp(GraphImp g, double xpos, double ypos, String name){
        this.g = g;
        this.xpos = xpos;
        this.ypos = ypos;
        this.name = name;
        g.addNode(this); // Add Node to the Graph
    }
}

class GraphImp extends Graph
{
    private LinkedList<NodeImp> nodes = new LinkedList<NodeImp>(); //LinkedList of all Nodes in the Graph

    GraphImp(){

    }

    NodeImp[] getNodes(){ //Returns an array of all Nodes
        NodeImp[] nArr = new NodeImp[nodes.size()];
        return nodes.toArray(nArr);
    }

    int countNodes(){ //Returns number of Nodes
        return nodes.size();
    }

    void addNode(NodeImp n){ //Add a Node to the LinkedList in order
        boolean added = false;
        for(int i = 0;i<nodes.size();i++){
            if(n.compareTo(nodes.get(i))<=0 ){
                nodes.add(i,n);         //fails here
            }
        }
        if(!added){
            nodes.add(n);
        }
        return;
    }

} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-10T05:57:33.187

问题是在列表中间插入新节点后，您没有退出循环。您的代码将尝试无限次插入同一个节点，因此会出现 OOM。

试试这个：

```
for(int i = 0;i<nodes.size();i++){
    if(n.compareTo(nodes.get(i))<=0 ){
        nodes.add(i,n);
        added = true;
        break;
    }
} 
```

顺便说一句，您的插入效率很低。由于您知道列表已经排序，您可以使用二进制搜索来查找插入点，而不是对列表进行 O(n) 扫描。您当前的实现是 O(n^2) 来插入 n 个项目，但它可能是 O(n log n)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-10T05:51:55.913

`OOM`如果没有整个程序，很难诊断出你的确切原因，但这里有一个观察结果：

`getNodes()`

效率很低。您只需遍历它`toArray`并`LinkedList`查找特定实例。为什么不直接使用 . `contains()`适当地？无需复制所有元素。或者只是做你之前做的事情，但在`List`而不是数组副本上做：

```
 for(NodeImp n : existingNodes){
     if(n.getXPos() == xpos && n.getYPos() == ypos){
         throw new InvalidLabelException();
     }
 } 
```

我的猜测是，添加到末尾的“旧”方法也可能会遇到 OOM，但由于某些 heisenbug 原因，它并没有表现出来。您是否使用分析器运行过？

# javascript - UIWebView verticalAlign = 'middle' 不起作用

> ID：10083597
> 
> 赞同：0
> 
> 时间：2012-04-10T05:36:25.607
> 
> 标签：javascript, ios, uiwebview

我想让的内容`UIWebView`对齐中心和中间，我使用这个：

```
 NSString *bodyStyle = @"document.getElementsByTagName('body')[0].style.verticalAlign = 'middle';";

[imageAttDetailsWebView stringByEvaluatingJavaScriptFromString:bodyStyle]; 
```

但它不起作用，请帮助我！谢谢你 ！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-10T05:43:37.520

我认为它不取决于 UIWebView 而是取决于您的代码是如何构建的。

你到底把什么放在你的身体里？

您不一定需要将verticalAlign设置为middle，它不会像您编写的那样工作。即使在普通网页上。

但是，您可以将其设置为内部元素的 margin-top: ( 50% - ( size of your element / 2 ))。说你有

```
<body>
    <div id="wrapper" style="margin-top: ( 50% - ( size of your element / 2 ))">
        My stuff here
    </div>
</body> 
```

显然，您需要有一个逻辑才能使此规则起作用：( 50% - ( 元素的大小 / 2 )) 因为它不是 CSS 有效的。（但是，您可以使用 LESS 或 SASS 之类的库来使其更强大）

# java - 如何修复错误 UnsatisfiedLinkError: C:\Program Files\dtSearch Developer\bin\dtsjava.dll: 操作系统无法运行 %1

> ID：10083603
> 
> 赞同：0
> 
> 时间：2012-04-10T05:37:11.047
> 
> 标签：java, windows-xp, java-native-interface, dtsearch

我正在使用 J2EE。我已经在我的 windows xp 上安装了 dtSearch 引擎工具，我已经为此设置了所有环境变量，但我的控制台上仍然出现上述错误。

有谁知道发生了什么？请告诉我？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-10T05:43:06.850

您的 Windows\System 目录中有“msvcr71.dll”吗？你有带 32 位 JRE 的 64 位操作系统吗？

# wpf - 尝试从 app.config 文件、WPF、c# 获取值时获取 NULL

> ID：10083605
> 
> 赞同：0
> 
> 时间：2012-04-10T05:37:17.700
> 
> 标签：wpf, c#-4.0, app-config

我有一个 WPF 应用程序。我向它添加了如下所示的 app.config 文件：

```
 <?xml version="1.0" encoding="utf-8" ?>
   <configuration>
    <appSettings>
     <add key="DataBaseName" value="MY_DB"/>
    </appSettings>
   <connectionStrings>
     <add name="MY_DB_ConnectionString"
         <connectionString="Data Source=myComputerName\sqlexpress;Initial Catalog=MY_DB;User ID=user;Password=password"
  providerName="System.Data.SqlClient" />
   </connectionStrings>
 </configuration> 
```

在我的代码中，我像这样使用它：

```
 string connString = ConfigurationManager.ConnectionStrings["MY_DB_ConnectionString"].ConnectionString;
   string dbName = ConfigurationManager.AppSettings.Get("DataBaseName").ToString(); 
```

当我运行应用程序时出现异常：“对象引用未设置为对象的实例”

我已将 System.Configuration 程序集包含到我的项目中。

另一件事是 - 当我写

```
System.Configuration.ConfigurationManager. 
```

之后 。我没有选择任何东西的选项 - 在我写下点后什么都没有出现......

我已经尝试了针对该问题提出的所有解决方案……但对我没有任何帮助……

# android - 从 SD 卡播放视频

> ID：10083609
> 
> 赞同：1
> 
> 时间：2012-04-10T05:37:52.393
> 
> 标签：android, android-videoview

我已经构建了一个应用程序，其中包含从 Internet 流式传输的视频，我对它们的性能印象不深。有人愿意分享从 SD 卡加载视频的代码吗？

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-10T05:55:13.490

我希望这段代码能帮助你

```
public class video extends Activity{

    VideoView video_view;
    String ex_name;

    @Override
    protected void onCreate(Bundle savedInstanceState) {

        super.onCreate(savedInstanceState);
        setContentView(R.layout.eccryption);
        video_view = (VideoView) findViewById(R.id.videoView1);

        ex_name = getIntent().getExtras().getString("video_name");

        MediaController mediaController = new MediaController(this);
        mediaController.setAnchorView(video_view);
        video_view.setMediaController(new MediaController(this));
        handler.sendEmptyMessage(1);

    }

    Handler handler = new Handler(){

        public void handleMessage(Message msg){

            int pos=msg.what;
            if (pos == 1){

                video_view.setVideoPath(Environment.getExternalStorageDirectory()+"/"+ex_name+".mp4");
                video_view.requestFocus();
                video_view.start();

                Log.d("Before Video Finish", "i m in before video finish");
                video_view.setOnCompletionListener(new OnCompletionListener() {
                    @Override
                    public void onCompletion(MediaPlayer mp) {
                        finish();
                    }
                });
            }
        }
    }; 
```

使用这个代码这个代码，我亲爱的朋友们！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-10T05:49:51.853

创建一个活动并在需要播放视频时调用它。您可以在 Intent 中捆绑视频路径（无论是 url、sdcard 还是资源）。然后在你的活动中，它应该只包含一个`FrameLayout`和一个`VideoView`做类似的事情：

```
 Intent intent = getIntent();
    Bundle extras = intent.getExtras();
    if (extras != null) {
        mVideoPath = extras.getString(INTENT_EXTRA_URI);
        int resId = getResId(mVideoPath, R.raw.class);
                    String uriPath = null;
        if (mVideoPath.startsWith("http://") || mVideoPath.startsWith("https://")) {
            uriPath = mVideoPath;
        } else if (mVideoPatah.startsWith("/mnt/sdcard/")) {
            uriPath = mVideoPath;
        } else {
            int resId = getResId(mVideoPath, R.raw.class);
            uriPath = "android.resource://" + getResources().getResourcePackageName(resId) + "/" + resId;
        }
        mVideoView.setVideoURI(Uri.parse(uriPath));
        MediaController mediaController = new MediaController(this);
        mVideoView.setMediaController(mediaController);
        mVideoView.requestFocus();
        mVideoView.start();         
    } 
```

# java - 无法使用 HttpServletResponse 下载文件

> ID：10083611
> 
> 赞同：3
> 
> 时间：2012-04-10T05:38:01.850
> 
> 标签：java, file-io, ms-word, nullpointerexception

我想下载我正在使用其中的内容创建的 MS Word 2003 文档`myString`。我使用了以下代码：

```
BufferedReader reader = new BufferedReader(new FileReader(templatePathFilename));
HttpServletResponse response = new MyHttpServletResponse();
response.setContentType ("application/msword"); 
response.setHeader ("Content-Disposition", "attachment; filename=\""+outgoingFileName); 
ServletOutputStream myOut = response.getOutputStream();
myOut.write(myString.getBytes());
myOut.flush();
myOut.close(); 
```

但是该行`myOut.write(myString.getBytes())`给出了 NullPointerException。 `MyHttpServletResponse`是eclipse在我快速修复生成的错误时默认生成的一个类。我需要修改那个类吗？任何人都可以请帮助！

编辑：我正在处理的实际代码如下：

```
BufferedReader reader = new BufferedReader(new FileReader(templatePathFilename));
String outgoingFileName = outputPathFilename;
response.setContentType("application/msword"); 
response.setHeader("Content-Disposition", "attachment; filename="+outgoingFileName);
OutputStream myOut = response.getOutputStream();
try {
String thisLine;
while ((thisLine = reader.readLine()) != null) {
    if(thisLine.contains("##"))
    {
    for (java.util.Enumeration e = FrontSheetMap.keys(); e.hasMoreElements();{
     String name = (String) e.nextElement();
     String value = FrontSheetMap.get(name).toString();
     thisLine= thisLine.replaceAll("##" + name.toUpperCase() + "##", value);
    }
   }
   myOut.write(thisLine);
   myOut.write("\n");
  }
  myOut.flush();
}catch(Exception e){} 
```

while 循环将输入文件中的占位符替换为所需的值，并将其中的新内容`thisLine`写入输出文件。我需要一个下载选项，单击执行此代码的链接会弹出该选项。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-10T06:40:19.707

如果您使用 Java EE 平台来执行下载操作，那么最安全的方法是通过 servlet 来完成。示例下载 servlet 应如下所示，

```
import java.io.IOException;
import java.io.PrintWriter;
import javax.servlet.ServletException;
import javax.servlet.http.HttpServlet;
import javax.servlet.http.HttpServletRequest;
import javax.servlet.http.HttpServletResponse;

import java.io.*; 
import java.sql.*;
import javax.servlet.*;
import javax.servlet.http.*;

public class DownloadFile extends HttpServlet{
    private static final long serialVersionUID = 1L;

    public void doGet(HttpServletRequest request, HttpServletResponse response) throws ServletException, IOException {
        PrintWriter out = response.getWriter();

        // Prepare the File Read.
        String fileName = request.getParameter("fileName");
        fileName = fileName.substring(fileName.lastIndexOf("\\") + 1, fileName.length());
        String extension = fileName.substring(fileName.lastIndexOf(".") + 1, fileName.length());
        String filePath = "C:/temp/" + fileName;
        FileInputStream fileToDownload = new FileInputStream(filePath);

        // Prepare the Headers.
        if (extension.equalsIgnoreCase("txt")) {
            response.setContentType("text/html");
        } else if (extension.equalsIgnoreCase("doc")) {
            response.setContentType("application/msword");
        } else if (extension.equalsIgnoreCase("pdf")) {
            response.setContentType("application/pdf");
        } else if (extension.equalsIgnoreCase("jpg")) {
            response.setContentType("image/jpeg");
        } else if (extension.equalsIgnoreCase("jpeg")) {
            response.setContentType("image/jpeg");
        }
        response.setHeader("Content-Disposition", "attachment; filename=" + fileName);
        response.setContentLength(fileToDownload.available());

        // Download the file.
        int c;
        while ((c = fileToDownload.read()) != -1) {
            out.write(c);
        }
        out.flush();
        out.close();
        fileToDownload.close();
    }
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-10T06:08:33.920

正如您所提到`MyHttpServletResponse` *的，当我快速修复生成的错误时，eclipse 默认生成的一个类*，这似乎是问题所在。

您的代码**应该在某个 servlet/JSP**中，并且 HttpServletResponse 对象应该从容器中获取（它被传递给 service/doGet/doPost 方法）。

您**正在使用的是默认/虚拟实现**，`HttpServletResponse`其给出`response.getOutputStream();`为 null。如果您使用容器提供的对象，您的问题将得到解决。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-06T08:03:53.203

将您的文件名添加到标题中，如下所示（文件名应包括扩展名，如果您有一个名为 abc 的 word 文档，文件名应为 abc.doc“即带扩展名”），无需检查扩展名然后设置内容类型

httpServletResponse.addHeader("Content-Disposition", "attachment; filename=" + fileName);

其余代码保持不变并立即尝试，您应该能够看到一个弹出窗口，询问您是否允许打开这个 word 文档。

下面是一个对我有用的代码片段

```
 OutputStream outputStream=httpServletResponse.getOutputStream();
        httpServletResponse.addHeader("Content-Disposition", "attachment; filename="
                  + fileName);

        //**Take the data from input stream and write it on outputstream
        try{
            IOUtils.copy(documentumClientSession.getFile(fileName,dbpNum), outputStream);
        }catch(Exception exp){
            exp.printStackTrace();
        } 
```

我正在使用 apache commons api，这就是为什么您可以看到 org.apache.commons.io.IOUtils 正在使用的类，但您可以在代码中用自己的循环替换它。

# php - 使用表单提交 CGridView 检查值

> ID：10083616
> 
> 赞同：3
> 
> 时间：2012-04-10T05:38:12.700
> 
> 标签：php, forms, yii

我有一个带有 CCheckBoxColumn 的 CGridView wigdet，如下所示：

```
$this->widget('zii.widgets.grid.CGridView', array(
    'dataProvider'=>$dataProvider,
    'columns'=>array(
        array(
            'class'=>'CCheckBoxColumn',
        ),
        'title',
        ....
    ),
)); 
```

问题：如何将检查的值提交给控制器操作？我知道我需要一个表单，提交按钮，但我需要一个清楚的说明在哪里放置东西，以便顶部的搜索框出现。

提前致谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-10T17:50:00.593

你并不绝对需要另一种形式。您可以只使用附加了附加 javascript 的链接。

要获取检查的值，您可以调用 javascript 函数`$.fn.yiiGridView.getChecked(containerID,columnID)`，请参见[此处](http://www.yiiframework.com/doc/api/1.1/CCheckBoxColumn#selectableRows-detail "http://www.yiiframework.com/doc/api/1.1/CCheckBoxColumn#selectableRows-detail")，它返回一个包含 id 的数组。

### 完整示例（使用 ajax）：

在您看来：

```
<?php
$this->widget('zii.widgets.grid.CGridView', array(
   'id'=>'example-grid-view-id', // the containerID for getChecked
   'dataProvider'=>$dataProvider,
   'columns'=>array(
       array(
           'class'=>'CCheckBoxColumn',
           'id'=>'example-check-boxes' // the columnID for getChecked
       ),
       'title',
       ....
   ),
));
?>
<div id="for-link">
<?php
   echo CHtml::ajaxLink('SomeLink',Yii::app->createUrl('somecontroller/someaction'),
        array(
           'type'=>'POST',
           'data'=>'js:{theIds : $.fn.yiiGridView.getChecked("example-grid-view-id","example-check-boxes").toString()}'
           // pay special attention to how the data is passed here
        )
   );
?>
<div> 
```

在您的控制器中：

```
...
public function actionSomeaction(){
    if(isset($_POST['theIds'])){
          $arra=explode(',', $_POST['theIds']);
          // now do something with the ids in $arra
          ...
    }
    ...
}
... 
```

您也可以在我们通过 ajax 传递的数据中（从视图中）使用 json 字符串，而不是简单的字符串，但是`explode()`您将使用`json_decode()`（在控制器中）而不是 . 此外，最好在使用前验证/清理 id。

查看[CHtml::ajaxLink](http://www.yiiframework.com/doc/api/1.1/CHtml#ajaxLink-detail "http://www.yiiframework.com/doc/api/1.1/CHtml#ajaxLink-detail")的文档以了解有关 ajax 链接的更多信息。

请注意，该示例有点粗略，因为我没有检查已检查 id 的空数组。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-18T16:07:26.457

这个与 CSRF 保护一起使用并更新 GridView。

```
<?php
echo CHtml::ajaxLink('ClickMe',Yii::app()->createUrl('controller/action'),
array(
'type'=>'POST',
'data'=>'js:{"ids" : $.fn.yiiGridView.getChecked("grid_view_id","check_box_id").toString(),"YII_CSRF_TOKEN" : "'.Yii::app()->request->csrfToken.'"}',
'success'=>"$('#grid_view_id').yiiGridView.update('grid_view_id')"
));
?> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-04-15T23:14:55.343

如果您将 Gridview 包装成一个简单的表单，您可以将选中的复选框发送到该值，

一个例子：

**看法**

```
<form id="frmSubmit">
<?php
echo CHtml::dropDownList('user_id'
        , null
        , CHtml::listData(User::model()->findAll(), 'USER_ID', 'FULLNAME')
);

echo CHtml::ajaxSubmitButton('Save'
                            , Yii::app()->createUrl('query/ajaxUpdate')
                            , array('success' => 'js:reloadGrid', )
                            , array('class' => 'btn btn-success'));

$this->widget('zii.widgets.grid.CGridView', array(
    'id'=>'query-grid',
    'dataProvider'=>$model->search(),
    'filter'=>$model,
    'columns'=>array(
        array(
            'id' => 'query',
            'class'=>'CCheckBoxColumn',
            'selectableRows' => '2',
        ),
        'Contact',
        'Email',
        'Company',
    ),
)); ?>
</form>

<script type="text/javascript">
function reloadGrid(data) {
    $.fn.yiiGridView.update('query-grid');
}
</script> 
```

**控制器**

```
public function actionAjaxUpdate()
{
    var_dump($_POST);
} 
```

# actionscript-3 - Flex 多个火花列表，滚动同步

> ID：10083617
> 
> 赞同：0
> 
> 时间：2012-04-10T05:38:14.210
> 
> 标签：actionscript-3, apache-flex, list, flash-builder

我有几个不同项目宽度的水平滚动列表堆叠在一个垂直组内。在一个项目上单击其他列表中的所有任何选定项目都将被清除。当滚动任何列表时，所有其他列表应在同一方向滚动完全相同的量，类似于[http://www.foxsports.com.au/tvguide](http://www.foxsports.com.au/tvguide)。

同步滚动引发了一个未定义的错误，并且有一次使 adl（它是一个移动应用程序）崩溃。仅当我通过事件侦听器添加超过 2 个同步滚动列表时才会发生这种情况。

所以我的问题是：谁能看到为什么会出现这个错误，或者有没有更好的方法来实现这种类型的水平滚动多列表，可能是一个非常宽的数据网格或滚动器内的一组按钮？

```
<?xml version="1.0" encoding="utf-8"?>
<s:View xmlns:fx="http://ns.adobe.com/mxml/2009" 
    xmlns:s="library://ns.adobe.com/flex/spark" creationComplete="view1_creationCompleteHandler(event)">

<fx:Script>
    <![CDATA[
        import mx.events.FlexEvent;
        import mx.events.PropertyChangeEvent;

        // listen for scroll event
        protected function view1_creationCompleteHandler(event:FlexEvent):void
        {
            list1.scroller.viewport.addEventListener(PropertyChangeEvent.PROPERTY_CHANGE, propertyChangeHandler1);              
            list2.scroller.viewport.addEventListener(PropertyChangeEvent.PROPERTY_CHANGE, propertyChangeHandler2);              
            list3.scroller.viewport.addEventListener(PropertyChangeEvent.PROPERTY_CHANGE, propertyChangeHandler3);              
        }

        // scroll all lists together
        private function propertyChangeHandler1(evt:PropertyChangeEvent):void
        {
            var n:Number = Number(evt.newValue);
            list2.dataGroup.horizontalScrollPosition  = n;
            list3.dataGroup.horizontalScrollPosition  = n;
        }
        private function propertyChangeHandler2(evt:PropertyChangeEvent):void
        {
            var n:Number = Number(evt.newValue);
            list1.dataGroup.horizontalScrollPosition  = n;
            list3.dataGroup.horizontalScrollPosition  = n;
        }
        private function propertyChangeHandler3(evt:PropertyChangeEvent):void
        {
            var n:Number = Number(evt.newValue);
            list2.dataGroup.horizontalScrollPosition  = n;
            list1.dataGroup.horizontalScrollPosition  = n;
        }

        // on click clear currently selected
        protected function listClickHandler(_iList:int, _index:int):void
        {
            switch(_iList)
            {
                case 1:
                {
                    list2.selectedIndex = -1;
                    list3.selectedIndex = -1;
                    break;
                }
                case 2:
                {
                    list1.selectedIndex = -1;
                    list3.selectedIndex = -1;
                    break;
                }
                case 3:
                {
                    list2.selectedIndex = -1;
                    list1.selectedIndex = -1;
                    break;
                }
            }
        }

    ]]>
</fx:Script>

<fx:Declarations>
    <s:ArrayCollection id="myArrayCollection">
        <fx:Object label="FIRST" message="54.99"/>
        <fx:Object label="Stapler" message="3.59"/>
        <fx:Object label="Printer" message="129.99"/>
        <fx:Object label="Notepad" message="2.49"/>
        <fx:Object label="Mouse" message="21.79"/>
        <fx:Object label="Keyboard" message="32.99"/>
        <fx:Object label="Ink" message="54.99"/>
        <fx:Object label="Stapler" message="3.59"/>
        <fx:Object label="Printer" message="129.99"/>
        <fx:Object label="Notepad" message="2.49"/>
        <fx:Object label="Mouse" message="21.79"/>
        <fx:Object label="Keyboard" message="32.99"/>
        <fx:Object label="Ink" message="54.99"/>
        <fx:Object label="Stapler" message="3.59"/>
        <fx:Object label="Printer" message="129.99"/>
        <fx:Object label="Notepad" message="2.49"/>
        <fx:Object label="Mouse" message="21.79"/>
        <fx:Object label="Keyboard" message="32.99"/>
        <fx:Object label="Ink" message="54.99"/>
        <fx:Object label="Stapler" message="3.59"/>
        <fx:Object label="LAST" message="32.99"/>
    </s:ArrayCollection>
</fx:Declarations>

<s:VGroup id="lists" gap="0" left="0" right="0" top="0" bottom="0" width="180%" height="100%" >

    <s:List id="list1" width="100%" click="listClickHandler(1, list1.selectedIndex)" horizontalScrollPolicy="on" verticalScrollPolicy="off" selectedIndex="0" dataProvider="{myArrayCollection}">
        <s:layout>
            <s:HorizontalLayout gap="0" />
        </s:layout>
    </s:List>  
    <s:List id="list2" width="100%" click="listClickHandler(2, list2.selectedIndex)" horizontalScrollPolicy="on" verticalScrollPolicy="off" selectedIndex="0" dataProvider="{myArrayCollection}">
        <s:layout>
            <s:HorizontalLayout gap="0" />
        </s:layout>
    </s:List> 
    <s:List id="list3" width="100%" click="listClickHandler(3, list3.selectedIndex)" horizontalScrollPolicy="on" verticalScrollPolicy="off" selectedIndex="0" dataProvider="{myArrayCollection}">
        <s:layout>
            <s:HorizontalLayout gap="0" />
        </s:layout>
    </s:List>

</s:VGroup>

</s:View> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-11T03:03:39.020

这是执行此操作的简单方法，显然列表需要比舞台更宽才能滚动。

```
<s:Scroller id="sc" horizontalScrollPolicy="on" verticalScrollPolicy="off" width="100%">
    <s:VGroup id="lists" gap="0" left="0" right="0" top="0" bottom="0">
        <s:List id="list1" horizontalScrollPolicy="off" verticalScrollPolicy="off" dataProvider="{data}">
            <s:layout>
                <s:HorizontalLayout gap="0" />
            </s:layout>
        </s:List>  

        <s:List id="list2" horizontalScrollPolicy="off" verticalScrollPolicy="off" dataProvider="{data}">
            <s:layout>
                <s:HorizontalLayout gap="0" />
            </s:layout>
        </s:List> 

        <s:List id="list3" horizontalScrollPolicy="off" verticalScrollPolicy="off" dataProvider="{data}">
            <s:layout>
                <s:HorizontalLayout gap="0" />
            </s:layout>
        </s:List>
    </s:VGroup>
</s:Scroller> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-11-07T09:59:02.427

**不要使用长代码，您可以将两个列表框放在两个滚动查看器中，并在滚动查看器的 viewChanged 事件中在代码隐藏中编写您的代码。**

```
 private void ScrollViewer1_ViewChanged(object sender, ScrollViewerViewChangedEventArgs e)
    {
        ScrollViewer2.ScrollToHorizontalOffset(double.Parse(ScrollViewer1.HorizontalOffset.ToString()));
    } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-10T06:29:37.837

在具有 4.6 sdk 的计算机上测试了您的示例，但我没有看到任何错误。您的代码仍然无法在不同大小的列表上工作（在这种情况下，您的列表将仅滚动到最小的列表大小）。

也不要在视口上使用 PropertyChangeEvent 尝试在滚动条上使用 Event.CHANGE：

```
protected function view1_creationCompleteHandler(event:FlexEvent):void
    {
        list1.scroller.horizontalScrollBar.addEventListener(Event.CHANGE, propertyChangeHandler1);
        list2.scroller.horizontalScrollBar.addEventListener(Event.CHANGE, propertyChangeHandler2);
        list3.scroller.horizontalScrollBar.addEventListener(Event.CHANGE, propertyChangeHandler3);
    }

    // scroll all lists together
    private function propertyChangeHandler1(evt:Event):void
    {
        var source = evt.currentTarget as Scroller;
        var n:Number = list1.scroller.viewport.horizontalScrollPosition;
        list2.dataGroup.horizontalScrollPosition  = n;
        list3.dataGroup.horizontalScrollPosition  = n;
    }
    private function propertyChangeHandler2(evt:Event):void
    {
        var n:Number = list2.scroller.viewport.horizontalScrollPosition;
        list1.dataGroup.horizontalScrollPosition  = n;
        list3.dataGroup.horizontalScrollPosition  = n;
    }
    private function propertyChangeHandler3(evt:Event):void
    {
        var n:Number = list3.scroller.viewport.horizontalScrollPosition;
        list2.dataGroup.horizontalScrollPosition  = n;
        list1.dataGroup.horizontalScrollPosition  = n;
    } 
```

如果您需要以编程方式更改滚动，还可以使用 FlexEvent.VALUE_COMMIT

# web - 在 Hibernate 3.0 中 8 小时后无法连接

> ID：10083619
> 
> 赞同：0
> 
> 时间：2012-04-10T05:38:31.913
> 
> 标签：web, database-connection, hibernate3

我已经像这样配置了我的 hibenate.config.xml ......但是几个小时后没有得到数据库连接......在 MYSQL 中，等待超时是默认的 28800 或 8 小时......这里它比那个少。没有任何线索。

```
 <property name="connection.url">jdbc:mysql://11.243.188.53/XXX</property>
    <property name="connection.driver_class">com.mysql.jdbc.Driver</property>
    <property name="connection.username">admin</property>
    <property name="connection.password">password1$</property>
    <!-- Set AutoCommit to true -->
    <property name="connection.autocommit"> false </property>
    <property name="show_sql">true</property>

    <!-- SQL Dialect to use. Dialects are database specific -->
    <property name="dialect"> org.hibernate.dialect.MySQLDialect</property>
     <property name="hibernate.hbm2ddl.auto">update</property>

      <property name="hibernate.dbcp.maxActive">20</property>
        <property name="hibernate.dbcp.maxIdle">10</property>
        <property name="hibernate.dbcp.maxWait">-1</property>
        <property name="hibernate.dbcp.whenExhaustedAction">2</property>
        <property name="hibernate.dbcp.testOnBorrow">true</property>
        <property name="hibernate.dbcp.testOnReturn">true</property>
         <property name="hibernate.dbcp.validationQuery">SELECT 1</property>
        <property name="hibernate.dbcp.testWhileIdle">true</property>
        <property name="hibernate.dbcp.ps.maxActive">8</property>
        <property name="hibernate.dbcp.ps.maxIdle">8</property>
        <property name="hibernate.dbcp.ps.maxWait">60</property>
        <property name="hibernate.dbcp.ps.whenExhaustedAction">1</property>

       <!-- Disable second-level cache. -->
    <property name="cache.provider_class">org.hibernate.cache.NoCacheProvider</property>
    <property name="cache.use_query_cache">false</property>
    <property name="cache.use_minimal_puts">false</property>
    <property name="max_fetch_depth">3</property> 
```

几个小时后，我仍然无法获得数据库连接。

请帮帮我..

找到错误日志..

```
 org.hibernate.exception.JDBCConnectionException: could not execute query
        at org.hibernate.exception.SQLStateConverter.convert(SQLStateConverter.java:74)
        at org.hibernate.exception.JDBCExceptionHelper.convert(JDBCExceptionHelper.java:43)
        at org.hibernate.loader.Loader.doList(Loader.java:2214)
        at org.hibernate.loader.Loader.listIgnoreQueryCache(Loader.java:2095)
        at org.hibernate.loader.Loader.list(Loader.java:2090)
        at org.hibernate.loader.hql.QueryLoader.list(QueryLoader.java:388)
        at org.hibernate.hql.ast.QueryTranslatorImpl.list(QueryTranslatorImpl.java:338)
        at org.hibernate.engine.query.HQLQueryPlan.performList(HQLQueryPlan.java:172)
        at org.hibernate.impl.SessionImpl.list(SessionImpl.java:1121)
        at org.hibernate.impl.QueryImpl.list(QueryImpl.java:79)
        at com.cts.bfstools.batch.admin.LoginAction.getUserData(LoginAction.java:365)
        at com.cts.bfstools.batch.admin.LoginAction.getTenantList(LoginAction.java:168)
        at com.cts.bfstools.batch.admin.LoginAction.populate(LoginAction.java:156)
        at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
        at sun.reflect.NativeMethodAccessorImpl.invoke(Unknown Source)
        at sun.reflect.DelegatingMethodAccessorImpl.invoke(Unknown Source)
        at java.lang.reflect.Method.invoke(Unknown Source)
        at  com.opensymphony.xwork2.DefaultActionInvocation.invokeAction(DefaultActionInvocation.java:452)
    at com.opensymphony.xwork2.DefaultActionInvocation.invokeActionOnly(DefaultActionInvocation.java:291)
    at com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:254)
    at com.opensymphony.xwork2.interceptor.DefaultWorkflowInterceptor.doIntercept(DefaultWorkflowInterceptor.java:176)
    at com.opensymphony.xwork2.interceptor.MethodFilterInterceptor.intercept(MethodFilterInterceptor.java:98)
    at com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:248)
    at com.opensymphony.xwork2.validator.ValidationInterceptor.doIntercept(ValidationInterceptor.java:263)
    at org.apache.struts2.interceptor.validation.AnnotationValidationInterceptor.doIntercept(AnnotationValidationInterceptor.java:68)
    at com.opensymphony.xwork2.interceptor.MethodFilterInterceptor.intercept(MethodFilterInterceptor.java:98)
    at com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:248)
    at com.opensymphony.xwork2.interceptor.ConversionErrorInterceptor.intercept(ConversionErrorInterceptor.java:133)
    at com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:248)
    at com.opensymphony.xwork2.interceptor.ParametersInterceptor.doIntercept(ParametersInterceptor.java:207)
    at com.opensymphony.xwork2.interceptor.MethodFilterInterceptor.intercept(MethodFilterInterceptor.java:98)
    at com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:248)
    at com.opensymphony.xwork2.interceptor.ParametersInterceptor.doIntercept(ParametersInterceptor.java:207)
    at com.opensymphony.xwork2.interceptor.MethodFilterInterceptor.intercept(MethodFilterInterceptor.java:98)
    at com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:248)
    at com.opensymphony.xwork2.interceptor.StaticParametersInterceptor.intercept(StaticParametersInterceptor.java:190)
    at com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:248)
    at org.apache.struts2.interceptor.MultiselectInterceptor.intercept(MultiselectInterceptor.java:75)
    at com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:248)
    at org.apache.struts2.interceptor.CheckboxInterceptor.intercept(CheckboxInterceptor.java:94)
    at com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:248)
    at org.apache.struts2.interceptor.FileUploadInterceptor.intercept(FileUploadInterceptor.java:243)
    at com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:248)
    at com.opensymphony.xwork2.interceptor.ModelDrivenInterceptor.intercept(ModelDrivenInterceptor.java:100)
    at com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:248)
    at com.opensymphony.xwork2.interceptor.ScopedModelDrivenInterceptor.intercept(ScopedModelDrivenInterceptor.java:141)
    at com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:248)
    at org.apache.struts2.interceptor.debugging.DebuggingInterceptor.intercept(DebuggingInterceptor.java:270)
    at com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:248)
    at com.opensymphony.xwork2.interceptor.ChainingInterceptor.intercept(ChainingInterceptor.java:145)
    at com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:248)
    at com.opensymphony.xwork2.interceptor.PrepareInterceptor.doIntercept(PrepareInterceptor.java:171)
    at com.opensymphony.xwork2.interceptor.MethodFilterInterceptor.intercept(MethodFilterInterceptor.java:98)
    at com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:248)
    at com.opensymphony.xwork2.interceptor.I18nInterceptor.intercept(I18nInterceptor.java:176)
    at com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:248)
    at org.apache.struts2.interceptor.ServletConfigInterceptor.intercept(ServletConfigInterceptor.java:164)
    at com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:248)
    at com.opensymphony.xwork2.interceptor.AliasInterceptor.intercept(AliasInterceptor.java:190)
    at com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:248)
    at com.opensymphony.xwork2.interceptor.ExceptionMappingInterceptor.intercept(ExceptionMappingInterceptor.java:187)
    at com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:248)
    at com.cts.bfsibp.twalk.action.CustomInterceptor.intercept(CustomInterceptor.java:38)
    at com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:248)
    at org.apache.struts2.impl.StrutsActionProxy.execute(StrutsActionProxy.java:52)
    at org.apache.struts2.dispatcher.Dispatcher.serviceAction(Dispatcher.java:498)
    at org.apache.struts2.dispatcher.FilterDispatcher.doFilter(FilterDispatcher.java:434)
    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:235)
    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206)
    at com.cts.bfsibp.twalk.action.TwalkFilter.doFilter(TwalkFilter.java:76)
    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:235)
    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206)
    at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:233)
    at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:191)
    at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:127)
    at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:102)
    at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:109)
    at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:298)
    at org.apache.coyote.http11.Http11Processor.process(Http11Processor.java:859)
    at org.apache.coyote.http11.Http11Protocol$Http11ConnectionHandler.process(Http11Protocol.java:588)
    at org.apache.tomcat.util.net.JIoEndpoint$Worker.run(JIoEndpoint.java:489)
    at java.lang.Thread.run(Unknown Source)
Caused by: com.mysql.jdbc.exceptions.jdbc4.CommunicationsException: Communications link failure

The last packet successfully received from the server was 250,154 milliseconds ago.  The last packet sent successfully to the server was 0 milliseconds ago.
    at sun.reflect.NativeConstructorAccessorImpl.newInstance0(Native Method)
    at sun.reflect.NativeConstructorAccessorImpl.newInstance(Unknown Source)
    at sun.reflect.DelegatingConstructorAccessorImpl.newInstance(Unknown Source)
    at java.lang.reflect.Constructor.newInstance(Unknown Source)
    at com.mysql.jdbc.Util.handleNewInstance(Util.java:406)
    at com.mysql.jdbc.SQLError.createCommunicationsException(SQLError.java:1074)
    at com.mysql.jdbc.MysqlIO.reuseAndReadPacket(MysqlIO.java:3030)
    at com.mysql.jdbc.MysqlIO.reuseAndReadPacket(MysqlIO.java:2916)
    at com.mysql.jdbc.MysqlIO.checkErrorPacket(MysqlIO.java:3459)
    at com.mysql.jdbc.MysqlIO.sendCommand(MysqlIO.java:1957)
    at com.mysql.jdbc.MysqlIO.sqlQueryDirect(MysqlIO.java:2107)
    at com.mysql.jdbc.ConnectionImpl.execSQL(ConnectionImpl.java:2648)
    at com.mysql.jdbc.PreparedStatement.executeInternal(PreparedStatement.java:2086)
    at com.mysql.jdbc.PreparedStatement.executeQuery(PreparedStatement.java:2237)
    at org.hibernate.jdbc.AbstractBatcher.getResultSet(AbstractBatcher.java:186)
    at org.hibernate.loader.Loader.getResultSet(Loader.java:1778)
    at org.hibernate.loader.Loader.doQuery(Loader.java:662)
    at org.hibernate.loader.Loader.doQueryAndInitializeNonLazyCollections(Loader.java:224)
    at org.hibernate.loader.Loader.doList(Loader.java:2211)
    ... 79 more
Caused by: java.io.EOFException: Can not read response from server. Expected to read 4 bytes, read 0 bytes before connection was unexpectedly lost.
    at com.mysql.jdbc.MysqlIO.readFully(MysqlIO.java:2475)
    at com.mysql.jdbc.MysqlIO.reuseAndReadPacket(MysqlIO.java:2927)
    ... 91 more 
```

另一个日志：

原因：java.net.SocketException：软件导致连接中止：在 java.net.SocketOutputStream.socketWrite(Unknown Source) 在 java.net.SocketOutputStream.write( Unknown Source) at java.io.BufferedOutputStream.flushBuffer(Unknown Source) at java.io.BufferedOutputStream.flush(Unknown Source) at com.mysql.jdbc.MysqlIO.send(MysqlIO.java:3272) ... 89 更多

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-10T08:56:21.677

完成后您可能不会释放休眠会话..尝试使用`OpenSessionInViewFilter`，避免使用`factory.openSession()`

我在我正在从事的一个项目中遇到了类似的问题。如果您可以在我确定原因之前发布堆栈跟踪，那将非常有帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-01-20T07:18:49.450

```
 <property name="testOnBorrow" value="true"/> 
```

或者

```
 <prop key="hibernate.dbcp.validationQuery">select 1</prop> 
            <prop key="hibernate.dbcp.testOnReturn">true</prop> 
```

在 xml 中的数据库连接 bean 中添加属性

每次从池中借用时，上述内容都会测试连接。

# javascript - 匹配单词的正则表达式

> ID：10083622
> 
> 赞同：0
> 
> 时间：2012-04-10T05:38:44.557
> 
> 标签：javascript, regex

我想在 javascript 中获取变量名，它为我写了一个正则表达式定义了一个字符串

```
var x = "sdfsfsdf";

((\w.*?)(\s*=\s*)(['"]*)(.+?)(['"]*)\1) 
```

这个表达式的问题是，当我使用上面的代码时，`RegExp.$2`我应该得到变量名。`x`它适用于某些表达式，但如果有类似的代码

```
function(a) {var b = document.createElement("script");} 
```

那么结果是`function(a){var b`。

请帮助我更改我的正则表达式，使其适用于两种情况。

注意：javascript 变量也可以在没有`var`ie的情况下声明`x = "sdfsfsf";`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-10T06:19:57.470

```
/(^|;|{)\s*(var\s+)?(\S+)\s*=\s*['"][^'"]*['"]\s*(}|;|$)/i

(^|;|{)          at the beginning, after a semicolon or the bracket
\s*              0-n whitespace characters
(var\s+)?        could be followed by "var" with at least one whitespace
(\S+)            at least one none whitespace character
\s*=\s*          equal sign with possibly surrounded whitespaces
['"][^'"]*['"]   a 'string'
\s*(}|;|$)       have to end with the bracket or a semicolon or the end of the variable has been reached 
```

另请参阅[此示例](http://jsfiddle.net/mX5ER/2/)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-10T05:57:07.303

如果你的琴弦不会太疯狂，你可以试试这个：

```
/[a-z_$][a-z0-9$_]*\s*=\s*.*?(;|$)/gi 
```

测试：

```
> var r = /[a-z_$][a-z0-9$_]*\s*=\s*.*?(;|$)/gi;
  undefined
> 'var x = "sdfsfsdf";'.match(r);
  ["x = "sdfsfsdf";"]
> 'function(a) {var b = document.createElement("script");}'.match(r);
  ["b = document.createElement("script");"] 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-04-10T05:46:14.047

试试这个正则表达式：`([^\w]?(\w.*?)(\s*=\s*)(['"]*)(.+?)(['"]*)\1)`

# php - preg_match_all 用于从 url 获取图像（具有特定扩展和宽度高度）的函数

> ID：10083623
> 
> 赞同：1
> 
> 时间：2012-04-10T05:38:56.773
> 
> 标签：php, html, regex, image, preg-match-all

首先，我对 PHP 比较陌生。我正在使用以下 PHP 表达式从给定的 url 获取所有图像。

```
@preg_match_all("<img.+?src=[\"'](.+?)[\"'].+?>", $homepage, $matches, PREG_SET_ORDER); 
```

但是这个表达式也会获取所有带有 gif 图像和 1KB 大小的图像的图像。

我想获取最小宽度为 100 像素的图像，扩展名应为 .png/.jpg

如果有人有，请给我一个解决方案。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-10T06:55:06.470

未经测试使用[array_map](http://php.net/manual/en/function.array-map.php)和[getimagesize](http://php.net/getimagesize)：

```
// the domain is needed to get the width of the image
define('DOMAIN', 'http://test.com');

function checkSize($imagename) {
    $info = getimagesize(DOMAIN . $imagename[1]);
    if ($info[0] >= 100000) {
        return $imagename;
    }
}

$homepage = '<img src="test1.png"><img src="test2.gif"><img src="test3.jpg">';
// get all img-tags ending with "jpg" or "png"
preg_match_all("<img.+?src=[\"']([^\"]*\.(jpg|png))[\"'].+?>", $homepage, $matches, PREG_SET_ORDER);
// filter only images with width greater or equal 100k
$images = array_map('checkSize', $matches); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-10T07:14:33.967

```
preg_match_all('~<img(.*?)((src=("|\')(.*?)(jpg|png)("|\'))(.*?)(width=("|\')[0-9]{3,}("|\'))|(width=("|\')[0-9]{3,}("|\'))(.*?)(src=("|\')(.*?)(jpg|png)("|\')))(.*?)>~i',trim($string),$matches);

$yourImagesArray = $matches[0]; 
```

我认为这应该有效=）至少它适用于我用于测试的每个img标签，这些标签在宽度属性中都有一个数字作为值。

/编辑：这是更好的阅读：

```
$src = '(src=("|\')(.*?)(jpg|png)("|\'))';
$width = '(width=("|\')[0-9]{3,}("|\'))';

preg_match_all('~<img(.*?)('.$src.'(.*?)'.$width.'|'.$width.'(.*?)'.$src.')(.*?)>~i',trim($string),$matches);

$yourImagesArray = $matches[0]; 
```

# javascript - jquery.masonry。imagesLoaded 插件未在其中运行

> ID：10083628
> 
> 赞同：2
> 
> 时间：2012-04-10T05:39:12.350
> 
> 标签：javascript, jquery, image, jquery-plugins

我应该添加到这个脚本中以便在头部运行。当我把它放在身体的末端时，它运行良好。我认为这是由于脚本在加载图像之前启动的事实。示例[http://masonry.desandro.com/docs/intro.html](http://masonry.desandro.com/docs/intro.html)

```
<script>var $container = $('#container');
$container.imagesLoaded(function(){
$container.masonry({
itemSelector : '.item',
columnWidth : 300 
 });
});
</script> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-10T07:02:52.863

（`body`也是`container`）在执行代码时不存在。在`head`你应该将你的代码包装在一个`$(document).ready(function() { ... });`：

```
<script>
$(document).ready(function() {
    var $container = $('#container');
    $container.imagesLoaded(function(){
        $container.masonry({
            itemSelector : '.item',
            columnWidth : 300 
        });
    });
});
</script> 
```

# asp-classic - 从 JScript 代码调用用 VB 编写的函数（经典 ASP）

> ID：10083632
> 
> 赞同：7
> 
> 时间：2012-04-10T05:39:40.860
> 
> 标签：asp-classic, vbscript, jscript

目前我必须处理用 VB 编写的遗留系统。我不擅长 VB 和 ASP，所以我决定这个系统的新代码将用 JScript 编写。

但是，两种语言之间的互操作性存在一些问题：即，当我尝试调用`<script language="vbscript">`标记中声明的某个函数时，它会失败并出现“**预期对象**”错误（如果页面语言是 VBScript），反之亦然。

即，以下代码：

*inc.asp*

```
<script language="vbscript" runat="server">
Sub VBTestFunction(Message)
    Response.Write "VBTestFunction: " & Message
End Sub
</script>
<script language="javascript" runat="server">
function JSTestFunction(Message) {
    Response.Write("JSTestFunction: " + Message);
}
</script> 
```

*测试js.asp*

```
<%@ Language="JavaScript" %>
<!-- #include file="inc.asp"-->
<script language="javascript" runat="server">
    VBTestFunction("from javascript");
    JSTestFunction("from javascript");
</script>
<script language="vbscript" runat="server">
    Call VBTestFunction("from vbscript")
    Call JSTestFunction("from vbscript")
</script> 
```

失败并出现以下错误：

```
VBTestFunction: from vbscript
Microsoft VBScript runtime error '800a000d'
Type mismatch: 'JSTestFunction'
/test.asp, line 9 
```

（如果我将评论特定行，其他三个语句将正常工作）；将页面语言设置为 VBScript

```
<%@ Language="VBScript" %>
<!-- #include file="inc.asp"-->
<script language="javascript" runat="server">
    VBTestFunction("from javascript");
    JSTestFunction("from javascript");
</script>
<script language="vbscript" runat="server">
    Call VBTestFunction("from vbscript")
    Call JSTestFunction("from vbscript")
</script> 
```

失败并出现以下错误：

```
Microsoft JScript runtime error '800a138f'
Object expected
/test.asp, line 4 
```

（再次，如果我将注释掉特定行，其他三个语句将正常工作）。

有一篇关于在同一个应用程序中混合 VB 和 JS 的[MSDN 文章](http://msdn.microsoft.com/en-us/library/Aa260861)，但从文章看来，示例代码应该可以工作，正如`TestFunction`在另一个文件中声明的那样，毕竟是一个函数。

有什么方法可以让这一切工作，并同时调用`VBTestFunction`VB`JSTestFunction`和 JS 代码？我想应该有一个，否则混合JS和VB就没有意义了。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-10T19:32:10.573

我一直在关注这个问题，萨尔曼已经回答了很多，但有些事情可以澄清。首先，被引用的文章存在关键问题。它说执行顺序是这样的：-

> 1.非默认语言的元素中的脚本 2.内
> 联脚本
> 3.默认语言的元素中的脚本

它是错误的，或者至少是过时的（毕竟它确实引用了 IIS4）。“内联脚本”（即默认语言的脚本）的处理方式与相同语言的脚本元素没有任何不同。

以下是如何通过正在发生的事情进行推理。

*   在任何解析开始之前，所有的包含点都被解析并被包含文件中的内容替换，以创建一个单一的词法“文件”。这是在任何解析发生之前创建的。

*   从这个“文件”中收集每种语言的脚本代码。您可以想象在找到每个块时附加多个文件（每种语言一个）。请注意，这就是为什么`<% %>`和`<script runat="server"`默认语言实际上无法区分的原因。

*   任何静态内容（即`runat="server"`脚本标记或之外的内容`<% %>`）都被视为默认语言代码的一部分。创建了一种将静态内容字节逐字发送到响应的特殊形式`Response.Write`，并将其附加到在原始文件中找到的默认语言代码中。

*   现在我们有一个或多个脚本准备好由它们各自的脚本引擎处理。非默认语言脚本首先被**解析**和**执行**。为函数或变量创建的任何全局标识符都将添加到脚本环境中。但是，由于此时根本没有处理默认语言脚本，因此它可能随后添加到全局脚本环境中的任何内容都还没有可用。

*   到解析和执行默认语言脚本时，由先前语言脚本创建的所有全局标识符都将被添加到脚本环境中，因此可以从内联代码中使用。

您应该*仔细注意*，默认语言函数**可以由非默认语言的***函数*中的代码调用，条件是调用非默认函数可以追溯到默认语言的内联执行。

例如，如果默认语言是`JScript`您可以让`VBScript`函数 (fnA) 调用在`JScript`(fnB) 中声明的函数，只要调用`fnA`是作为**JScript**内联执行的一部分进行的。IOW JScript 可以调用 VBScript，VBScript 又可以调用 VBScript 等等，限制因素是在这种情况下这个链的顶部必须是 JScript 的引擎。

在您的示例代码中，您的 VBScript 全局（内联）级别的代码试图调用以默认 JScript 语言声明的函数。如果您按照上面的项目符号进行操作，您将看到在执行时被调用的函数不存在。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-10T09:13:12.047

我鼓励您不要混合使用脚本语言。在[您提到的文章中](http://msdn.microsoft.com/en-us/library/Aa260861#vbnjscrpt_working)，有一个标题为“服务器脚本执行顺序”的标题，其中写道：

> ...但是，您将受到 IIS ASP 处理器的执行顺序的支配。例如，如果您创建服务器脚本并在 IIS 4.0 中运行它，您会发现以下执行顺序：
> 
> 1.  非默认语言的 <SCRIPT> 元素中的脚本
> 2.  内联脚本
> 3.  默认语言的 <SCRIPT> 元素中的脚本

请记住，以下是 testjs.asp 脚本的执行方式，注释指示执行顺序：

```
<%@ Language="JavaScript" %>
<script language="vbscript" runat="server">
    '' #1
    Sub VBTestFunction(Message)
        Response.Write "VBTestFunction: " & Message
    End Sub
</script>
<script language="javascript" runat="server">
    // #3
    function JSTestFunction(Message) {
        Response.Write("JSTestFunction: " + Message);
    }
</script>
<script language="javascript" runat="server">
    // #4
    VBTestFunction("from javascript");
    JSTestFunction("from javascript");
</script>
<script language="vbscript" runat="server">
    '' #2
    Call VBTestFunction("from vbscript")
    Call JSTestFunction("from vbscript")
</script> 
```

注意导致错误的行：

```
Call JSTestFunction("from vbscript") 
```

它的执行顺序是#2；此时该函数`JSTestFunction`尚未定义（它在执行顺序的后面定义）。

现在为 testvbs.asp 文件：

```
<%@ Language="VBScript" %>
<script language="vbscript" runat="server">
    '' 3
    Sub VBTestFunction(Message)
        Response.Write "VBTestFunction: " & Message
    End Sub
</script>
<script language="javascript" runat="server">
    // 1 
    function JSTestFunction(Message) {
        Response.Write("JSTestFunction: " + Message);
    }
</script>
<script language="javascript" runat="server">
    // 2
    VBTestFunction("from javascript");
    JSTestFunction("from javascript");
</script>
<script language="vbscript" runat="server">
    '' 4
    Call VBTestFunction("from vbscript")
    Call JSTestFunction("from vbscript")
</script> 
```

导致错误的行：

```
VBTestFunction("from javascript"); 
```

同样，`VBTestFunction`在定义之前调用。解决方案是尽量不要混合脚本语言。如果绝对有必要，请修改脚本的顺序。

# 编辑——示例

如果您已设置`@ Language="JavaScript"`，则此代码应按预期工作：

```
<!-- inc.asp-->
<script language="vbscript" runat="server">
    Sub VBTestFunction(Message)
        Response.Write "VBTestFunction: " & Message
    End Sub
</script>
<%
    function JSTestFunction(Message) {
        Response.Write("JSTestFunction: " + Message);
    }
%>

<!-- testjs.asp -->
<%@ Language="JavaScript" %>
<!-- #include file="inc.asp"-->
<%
    // at this point, both functions are available
    VBTestFunction("from inline JavaScript");
    JSTestFunction("from inline JavaScript");
%> 
```

如果要使用，`@ Language="VBScript"`则必须重新排列所有代码：

```
<!-- inc.asp-->
<script language="javascript" runat="server">
    function JSTestFunction(Message) {
        Response.Write("JSTestFunction: " + Message);
    }
</script>
<%
    Sub VBTestFunction(Message)
        Response.Write "VBTestFunction: " & Message
    End Sub
%>

<!-- testvbs.asp -->
<%@ Language="VBScript" %>
<!-- #include file="inc.asp"-->
<%
    ' at this point, both functions are available
    VBTestFunction("from inline VBScript")
    JSTestFunction("from inline VBScript")
%> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-10T06:34:35.347

我不知道所有规则，但这对我有用：

测试.asp：

```
<%@ language="JavaScript" %>

<script language="VBScript" runat="server" src="mix2.vbs"></script>

<script language="JavaScript" runat="server">
    TestFunction("from javascript");
</script> 
```

mix2.vbs：

```
Sub TestFunction (message)
    Response.Write message
End Sub 
```

注意：

*   `<script>`vbs 文件中没有包含的标签。
*   `<%@ language="..." %>`顶部的标签应指明“主要”语言。然后`<script>`，使用辅助语言（在您的情况下为 VBScript）的块将被解释并可用于主要语言的任何代码。

* * *

也许相关：[如何在 ASP-Classic 或 WSH 环境中使用 VBScript 中的 Javascript OO 类？](https://stackoverflow.com/questions/10080262/how-can-i-use-javascript-oo-classes-from-vbscript-in-an-asp-classic-or-wsh-envi)

# c++ - 使用姐妹继承

> ID：10083635
> 
> 赞同：7
> 
> 时间：2012-04-10T05:39:50.487
> 
> 标签：c++, inheritance, multiple-inheritance, virtual-inheritance

让我们假设一些无法触及的（遗留）代码声明

```
struct B{
 public:
  void f(){}
}; 
```

让我们假设有

```
struct A{
 public:
  virtual void f()=0;
}; 
```

是否可以在不显式调用 f() 的情况下进行 A 子类调用 B::f，即代替

```
 struct C: public A, public B{
   void f(){
   B::f();
  }
 }; 
```

有类似的东西

```
 struct C:virtual public A,virtual public B{

 }; 
```

（注意最后一个类是抽象的，因为编译器 A::f 没有定义）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-10T06:57:04.723

直接在 C++ 中，不可能基于 B 的函数与 A 的某些隐式匹配进行多态分派。您可以使用 gccxml 或其他类似产品进行某种代码生成，但如果只有一百个函数，那么宏无论如何都可以减少转发到单行 - 除非您有成千上万的工具，否则不值得引入额外的工具这些要做。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-10T08:00:46.413

执行`A`哪些委托`B`：

```
class A_Impl : public A
{
public:
    virtual void f()
    {
        b.f();
    }
private:
    B b;
} 
```

`C`通过派生来实现`A_Impl`：

```
class C: public A_Impl
{
}; 
```

或者，如果您只想`A`在继承层次结构中显示，请从以下公开`A`和私下派生`A_Impl`：

```
class C: public A, private virtual A_Impl
{
}; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-10T05:52:51.297

您可以执行以下操作：

```
void C::f() {
    B* b = this;
    b->f();
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-10T06:27:19.557

不，你不能那样做。从您向我们展示的片段来看，它看起来`B`应该是`C`按组合而不是继承的成员。您只需要编写一些转发功能（或自动为您生成它们的脚本）。

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2012-04-10T08:25:35.463

因此，您在 A 中有 100 个纯虚函数，在 B 中实现了这些函数，并且您希望避免在 C 中编写重新实现所有这些函数来调用 B。没有办法让编译器自动使用 B 的实现。与其与编译器抗争（每次都会输！），**不如重新考虑继承图**。也许让 B 成为 A 的子类，然后从 B 派生出 C。或者将 100 个方法从 B 中分解到 A 的具体子类中。

编程是在工具提供的约束内解决问题的艺术。当您发现自己与工具不一致时，您需要重新考虑解决问题的方法或使用不同的工具。

# ruby-on-rails - 如何使用 ROR+omniauth 在linkedin 中获取用户配置文件？

> ID：10083637
> 
> 赞同：1
> 
> 时间：2012-04-10T05:39:56.220
> 
> 标签：ruby-on-rails, omniauth, linkedin

我已经使用omniauth成功验证了linkedin凭据，它还使用验证器和令牌重定向到我的应用程序，使用这个如何从linkedin获取用户配置文件信息以及我们可以从中获得哪些信息？

请帮忙，因为我是 ROR 的新手。

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-10T07:24:52.060

LinkedIn 有一个*REST api*，所以你有两个解决方案：

*   [根据文档](http://developer.linkedin.com/apis)自己构建您需要的请求（在那里您将找到您可以获得的所有信息）。

    为了发出 HTTP 请求，我向您推荐 gem [HTTParty](http://httparty.rubyforge.org/)，它允许您自动解析 XML 或 JSON 响应。

*   使用像[linkedin gem](https://github.com/pengwynn/linkedin)这样的已经制作好的包装器。

# ios - 以编程方式在我的 iOS 设备中导入 Wifi 设置

> ID：10083640
> 
> 赞同：-1
> 
> 时间：2012-04-10T05:40:33.957
> 
> 标签：ios, settings, wifi

我的要求是：我希望应用程序用户能够扫描条形码，其中将包含 wifi 配置信息，这些信息会自动保存在他的设备设置应用程序中[当然具有适当的安全性]，并且他的设备连接到非常网络。

有什么方法可以以编程方式将 wifi 详细信息输入设备设置应用程序并设置网络？

我知道我们可以使用 iPhone 配置实用程序来做到这一点。但是，我不拿用户的设备安装证书等，我希望它自动发生。

可能吗？

提前谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-10T08:09:45.770

这听起来是个好主意，但在未越狱的手机上你不能这样做；每个应用程序都有自己的沙箱，并且无法访问网络设置等系统级功能。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-30T15:34:40.533

也许您可以以编程方式生成包含 wifi 配置信息的 xxxx.mobileconfig 文件，然后以编程方式导航到该文件的本地 url。

像... file://configs/xxxx.mobileconfig

然后 iOS 会提示用户查看他们是否要安装此移动配置文件。如果他们说是，则将安装配置文件。

一个可能的问题是提供本地 xxxx.mobileconfig 文件可能没有适当的 mime 类型并且它可能不会提示用户。

我知道你说过你知道 iPhone 配置实用程序。这是一种采用这种方法，但在设备中以编程方式完成所有操作。我不确定这是否可行。

祝你好运

# clojure - 使用 Lein 安装 ClojureScript

> ID：10083641
> 
> 赞同：3
> 
> 时间：2012-04-10T05:40:52.710
> 
> 标签：clojure, clojurescript

有没有办法通过安装 ClojureScript

“lein安装……”？

我在谷歌上搜索 clojurescript 时发现的两个来源似乎都来自 git：

[https://github.com/clojure/clojurescript/wiki/Quick-Start](https://github.com/clojure/clojurescript/wiki/Quick-Start)

[http://clojurescriptone.com/getting-started.html](http://clojurescriptone.com/getting-started.html)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-10T07:16:31.030

[在https://github.com/emezeske/lein-cljsbuild](https://github.com/emezeske/lein-cljsbuild)有一个名为 lein-cljsbuild 的 leiningen 插件。

请参阅链接中的文档，但本质上，您会将其添加为插件，然后在 project.clj 中添加一些配置，让它知道您的源和构建目录在哪里。

# html - 有没有办法快速/轻松地创建指向现有网站文件夹的符号链接？

> ID：10083642
> 
> 赞同：0
> 
> 时间：2012-04-10T05:40:56.260
> 
> 标签：html, apache, symlink

# 描述：

`/var/www/`当我有一个位于其中的网站变得太大时，我经常遇到这个问题，并决定将其基本上全部迁移到`/var/www/main_files`. `/var/www/index.html`简单地放置一个指向的符号链接`/var/www/main_files/index.html`是行不通的。我相信它不起作用的原因是`index.html`文件仍然在符号链接（`/var/www`）的目录中“执行”。因此，任何需要包含/获取的文件将不再具有正确的路径。

可以将 VHost 目录更改为`/var/www/main_files`，但这太永久了。我可能还想在`/var/www`. 我还可以手动更改实际 html/php/js 文件中的任何文件路径，但这不仅过于永久，而且速度非常慢。

# 问题：

有没有办法，除了使用 mod_rewrite （同样，它太永久了），来指示 Apache 遵循符号链接（假设符号链接都在 docroot 中），并且当用户访问**www.example.com/index.html**，加载网页，就好像用户访问了**www.example.com/main_files/index.html**一样？如果不是，那么我应该考虑哪些其他选择？

# 动机：

当我想调试一个站点时，我最常遇到这个问题，我快速下载了一个免费模板（即[下载这个](http://www.quackit.com/goto/?t=/html/templates/download/bryantsmith/anoceanofsky.zip)）。这些模板中的大多数都将所有文件都放在顶层文件夹中，因此将它们全部转储到 . 时非常混乱`/var/www`，尤其是使用多个模板时。我想要的是为模板创建一个子文件夹，但仍然可以从**www.example.com/index.html**加载它，而不是明确地从**www.example.com/template1/index.html**

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-10T05:45:58.410

遵循符号链接的指令不是 mod_rewrite 的一部分，而是在 Apache 的核心

要启用该功能，您必须将**FollowSymLinks**添加到**Options**指令：

```
 <Directory /usr/local/httpd/htdocs>
    Options Indexes FollowSymLinks
  </Directory> 
```

请参阅[http://httpd.apache.org/docs/2.2/mod/core.html](http://httpd.apache.org/docs/2.2/mod/core.html) 指令。

# c++ - 在 qt 中通过鼠标单击选择 QAbstractGraphicsShapeItem

> ID：10083647
> 
> 赞同：0
> 
> 时间：2012-04-10T05:41:38.160
> 
> 标签：c++, qt

Helo，在我当前的项目中，我遇到了在 QGraphicsScene 中选择 QAbstractGraphicsShapeItem 的问题，我执行以下操作：

```
QAbstractGraphicsShapeItem* i = canvas.addEllipse(QRectF(-radius,-radius,radius,radius));
i->setFlag(QGraphicsItem::ItemIsMovable);
i->setPen(Qt::NoPen);
i->setBrush( QColor(red, green , blue) );
i->setPos(x,y);
i->setZValue(qrand()%256); 
```

画布在哪里 QGraphicsScene，因为我添加了标志 ItemIsMovable ，这允许拖动项目，但是当用户双击它们时我需要更改项目的颜色，有什么建议吗？

现在以下

```
class MyRectItem : public QObject, public QAbstractGraphicsShapeItem
{
    Q_OBJECT

public:

    MyRectItem(qreal x, qreal y, qreal w, qreal h) : QGraphicsRectItem(x,y,w,h)
    {}
signals:
    void selectionChanged(bool newState);
protected:
    QVariant itemChange(GraphicsItemChange change, const QVariant &value)
    {
        if (change == QGraphicsItem::ItemSelectedChange)
        {
            bool newState = value.toBool();
            emit selectionChanged(newState);
        }
        return QGraphicsItem::itemChange(change, value);
    }
}; 
```

并尝试从这里调用它

```
void Main::addCircle(int x, int y,int radius,int red, int green, int blue)
{
    MyRectItem *i = new MyRectItem(-50, -50, 50, 50);
    canvas.addItem(i);
    i->setFlag(QGraphicsItem::ItemIsSelectable);
    i->setPen(QPen(Qt::darkBlue));
} 
```

并得到以下错误
`../portedcanvas/canvas.cpp: In member function 'void Main::addCircle(int, int, int, int, int, int)': ../portedcanvas/canvas.cpp:233: error: cannot allocate an object of abstract type 'MyRectItem' ../portedcanvas/canvas.cpp:68: note: because the following virtual functions are pure within 'MyRectItem': ../../../../Desktop/Qt/4.8.0/gcc/lib/QtGui.framework/Versions/4/Headers/qgraphicsitem.h:331: note: virtual QRectF QGraphicsItem::boundingRect() const ../../../../Desktop/Qt/4.8.0/gcc/lib/QtGui.framework/Versions/4/Headers/qgraphicsitem.h:352: note: virtual void QGraphicsItem::paint(QPainter*, const QStyleOptionGraphicsItem*, QWidget*)`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-10T12:14:16.720

您需要实现[`boundingRect()`](http://qt-project.org/doc/qt-4.8/qgraphicsitem.html#boundingRect)并[`paint()`](http://qt-project.org/doc/qt-4.8/qgraphicsitem.html#paint)在您的类中继承自`QGraphicsItem`（并且`QAbstractGraphicsShapeItem`因为它没有实现它们）

但是你应该只从一个具体的子类中继承你的类，`QGraphicsRectItem`因为那是你真正希望你的项目表现出来的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-10T05:53:45.190

不要使用 QGraphicsScene 的`addEllipse`便捷方法，而是将自己的 QGraphicsEllipseItem 子类化，然后重载[`mouseDoubleClickEvent`](http://doc.trolltech.com/4.7/qgraphicsitem.html#mouseDoubleClickEvent)以做任何你想做的事情。

所做`addEllipse`的只是为您创建对象并将其添加到场景中，然后将指针返回给您。当您创建 QGraphicsEllipseItem 子类的新实例时，您可以将场景作为父级传递给构造函数，或者`addItem`在场景中调用您的实例。

**更新**

我不是 C++ 专家，但似乎在您更新的代码示例中，您将抽象类子类化`QAbstractGraphicsShapeItem`只是为了添加一个重载。那个类是抽象的是有原因的。当您对它进行子类化时，您应该提供各种虚函数的实现，而您不是。我认为你应该做的是`QGraphicsEllipseItem`像我已经建议的那样直接子类化。

# php - 如何获取我的 facebook 应用程序用户的其他应用程序列表？

> ID：10083649
> 
> 赞同：0
> 
> 时间：2012-04-10T05:41:41.657
> 
> 标签：php, javascript, facebook

我正在创建一个 facebook 应用程序，它需要知道我们的应用程序用户正在使用哪个其他应用程序..

我在谷歌上搜索这种类型的东西但失败了..

如果有人知道，请告诉我，首先让我知道是否可能。

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-10T05:45:43.820

据我所知，由于隐私原因，这不能直接通过他们的 API 完成。您是否还控制其他应用程序？如果是这样，当他们授权那个时，我会将用户的信息存储在数据库中。然后，其他应用程序可以查询该数据库并确定用户是否正在使用您的其他应用程序。

# .net - X509Certificate2.Verify() 方法，验证吊销列表及其对性能的影响

> ID：10083650
> 
> 赞同：6
> 
> 时间：2012-04-10T05:41:47.630
> 
> 标签：.net, x509certificate, x509certificate2, certificate-revocation

我想验证 X509 证书。我想去[X509Certificate2.Verify()](http://msdn.microsoft.com/en-us/library/system.security.cryptography.x509certificates.x509certificate2.verify.aspx)方法。

但是，该文档没有说明它验证的所有内容。

1.  请指导我查看一些提供此方法详细信息的文档。
2.  Verify() 方法是否根据吊销列表验证证书？如果是，如果在线列表不可用或网络不可用怎么办？
3.  根据吊销列表验证证书时是否会影响性能？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-11T12:45:02.887

1.  通过[这个](https://stackoverflow.com/questions/10100403/do-we-need-root-certificate-installed-on-the-machine-always)问题来更多地了解验证方法。
2.  是的，Verify() 方法检查调用它的证书是否被撤销。
3.  没有大的性能影响，但是是的，验证证书是否被吊销需要更长的时间。

# c# - 在 C# 中给出文件的路径

> ID：10083651
> 
> 赞同：3
> 
> 时间：2012-04-10T05:41:49.487
> 
> 标签：c#, file-handling

我想打开***保存在我电脑桌面上的 xxx.txt 文件***，但程序给出了一个

错误**解析器错误无法识别转义序列 '\D'**。我试图给出的路径

文件为**"C:\Documents and Settings\user\Desktop\xxx.txt"**。

*我是以正确的方式给出路径还是有任何其他方式给出它*

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2012-04-10T05:44:07.550

`\`是 C# 字符串中的转义字符。它用于特殊字符，例如换行符 ( `\n`)。要写一个文字`\`，你必须用另一个引用`\`：

```
string myFileName = "C:\\Documents and Settings\\user\\Desktop\\xxx.txt"; 
```

另一种方法是禁用对带有字符的字符串的引用`@`：

```
string myFileName = @"C:\Documents and Settings\user\Desktop\xxx.txt"; 
```

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2012-04-10T05:44:46.017

使用此路径：

```
string path = Path.Combine(Environment.GetFolderPath(Environment.SpecialFolder.Desktop), "xxx.txt"); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2017-08-29T06:35:33.613

我必须访问我项目中的一个文件，所以包含我需要的所有文件的文件夹'lib'，我把这个文件夹放在我项目的'bin'文件夹中，现在我可以从 lib 文件夹访问我需要的任何文件. 在我使用的代码路径中如下：

```
StreamReader sr = new StreamReader("..\\lib\\myFile.src"); 
```

效果很好！:)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-04-10T05:44:24.493

将路径更改为`C:\\Documents and Settings\\user\\Desktop\\xxx.txt`.

* * *

## 回答 #5

> 赞同：-6
> 
> 时间：2012-04-10T05:45:46.803

尝试使用**C:\Documents and Settings\user\Desktop/xxx.txt**

而不是 C:\Documents and Settings\user\Desktop\xxx.txt

# java - 什么是 android ActionBar 的合适替代品？

> ID：10083652
> 
> 赞同：4
> 
> 时间：2012-04-10T05:41:50.180
> 
> 标签：java, android

我开发了一个使用 actionBar 的应用程序，但显然 actionBar 仅适用于 SDK 3.0 或更高版本。我希望我的应用程序能够在早期的 SDK 上运行，什么是 actionBar 的合适替代品？

*   弹出菜单
*   上下文菜单等。

请建议您认为合适的替代品或类似于操作栏的任何内容。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-04-10T05:44:03.333

不，您也可以使用支持低于 Verion 3.0 的 Actionbar Sherlock，它也很好。这是一个库项目，您只需添加对项目的引用。

[http://actionbarsherlock.com/](http://actionbarsherlock.com/)

[https://github.com/JakeWharton/ActionBarSherlock](https://github.com/JakeWharton/ActionBarSherlock)

![在此处输入图像描述](../Images/c1c03d57d13f539444c4809e775d0f30.png)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-10T05:58:56.497

使用支持库中的原生 google ActionBarCompat 怎么样：http: [//developer.android.com/resources/samples/ActionBarCompat/index.html](http://developer.android.com/resources/samples/ActionBarCompat/index.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-10T06:05:42.100

一些错误仍然存​​在，但这取决于您如何使用该库。库肯定更稳定

# r - 使用 for 循环

> ID：10083653
> 
> 赞同：1
> 
> 时间：2012-04-10T05:41:56.210
> 
> 标签：r

```
df1 <- data.frame(chrom = c("chr1","chr2", "chr5"), start=c(10,20,30), end = c(100,200,300), stringsAsFactors=FALSE)

df2 <- data.frame(chrom = c("chr1", "chr4", "chr2"),start=c(15,500,150), end = c(75,1000,300), stringsAsFactors=FALSE) 
```

我的回答应该是：

```
chrom start  end
1  chr1    15   75

3  chr2   150  300 
```

当我执行以下操作时：

```
for(i in 1:length(df2)){

for(j in 1:length(df1)){

if(df2$chrom[i] == df1$chrom[j])

    x <- df2[which(df1$chrom[j] == df2$chrom[i]),]

}
} 
```

我得到：

```
chrom start end
1  chr1    15  75 
```

显然我的逻辑是错误的。它只进行一次迭代。有人可以帮我理解吗？也许我不适合这种东西……无论如何，提前感谢您的帮助

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-10T06:01:54.673

不确定 for 循环的用途，但也许这就是您所追求的？

```
df2[df2$chrom %in% df1$chrom, ] 
```

编辑：进一步海报的理解：

```
> df2$chrom 
[1] "chr1" "chr4" "chr2"
> df2$chrom %in% df1$chrom
[1]  TRUE FALSE  TRUE
> df1$chrom
[1] "chr1" "chr2" "chr5" 
```

# jquery - Android WebView注入元素并不总是出现

> ID：10083654
> 
> 赞同：2
> 
> 时间：2012-04-10T05:42:15.807
> 
> 标签：jquery, android, html, web-applications

我正在使用 Android 开发网络应用程序。这是我的问题：

`append`在我通过 JQuery 的函数将一些 HTML 附加到 DOM 之后：

```
$sectionList.append(options.$html); 
```

新元素在某些情况下会显示在页面上，但有时不会！我已确保元素已附加到 DOM，但它们并不总是出现。

有人遇到同样的问题吗？

我怎么解决这个问题？

# objective-c - (BOOL)windowShouldClose:(id)sender 在我设置为主菜单窗口的内容视图时不起作用

> ID：10083656
> 
> 赞同：0
> 
> 时间：2012-04-10T05:43:02.793
> 
> 标签：objective-c, cocoa, nsevent

我将 NSViewController 的视图设置为主菜单窗口的内容视图，现在我应该如何使用 - (BOOL)windowShouldClose:(id)sender ？

我`<NSWindowDelegate>`在@interface 中使用并穿上`- (BOOL)windowShouldClose:(id)sender`.m 但不起作用

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-10T16:49:23.630

`-(BOOL)windowShouldClose:(id)sender`只会发送给将要发送消息的窗口的委托。（如果您不清楚代表是什么，他们有点像每个人都向其报告的军队指挥官）

在这里，为了能够`-windowShouldClose:`在你的中使用`NSViewController`，你需要将 设置`NSViewController`为窗口的`delegate`. 有两个步骤：

1.  使“NSViewController”成为窗口委托成为可能。通常窗口的委托是`NSWindowController` （它被命名是有原因的），但是如果你想让'NSViewController'成为你需要使用 `<NSWindowDelegate>`你已经完成的协议的委托。

2.  实际上将视图控制器设置为委托。正如 Ken Thomases 在他的评论中指出的那样，您可以在 Interface Builder 中通过拖动窗口的`delegate`出口并将其连接到您的 NSViewController 来执行此操作。或者您可以以编程方式执行此操作： `[self.view.window setDelegate:self]`正如您提到的那样应该可以工作。

# iphone - 如何在目标c中对齐左UIImage

> ID：10083663
> 
> 赞同：0
> 
> 时间：2012-04-10T05:43:35.237
> 
> 标签：iphone, xcode

```
- (void)viewDidLoad
{
   [super viewDidLoad];
   [self setTitle:@"myTitle"];
   UIImageView *titleLabel = [[UIImageView alloc] initWithImage:[UIImage imageNamed:@"myImage.PNG"]];
   titleLabel.frame = CGRectMake(0, 0, 120, 40);
   self.navigationItem.titleView = titleLabel;
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-10T06:03:45.173

```
UIImageView *titleLabel = [[UIImageView alloc] initWithImage:[UIImage imageNamed:@"nature.jpeg"]];
titleLabel.frame = CGRectMake(0, 0, 120, 40);
titleLabel.contentMode = UIViewContentModeRight;
self.navigationItem.titleView = titleLabel; 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-10T05:49:28.880

我认为最好的方法是使用 UIImageView contentMode 属性。

你可以这样使用：

```
UIImageView *imageView = [[UIImageView alloc] initWithFrame:CGRectMake(0,0,320,480)];
imageView.contentMode = UIViewContentModeLeft; 
```

应该没问题。

# ruby-on-rails - ruby on rails, has_many, 为多态关系定义类名

> ID：10083667
> 
> 赞同：5
> 
> 时间：2012-04-10T05:43:54.583
> 
> 标签：ruby-on-rails, class, polymorphism, has-many

这是我从旧数据库中移动数据的代码：

```
class Old < ActiveRecord::Base
  establish_connection :old_version
  self.abstract_class = true

  class Recipe < self
    set_table_name :recipes
    has_many :uploaded_files, :as => :storage
  end

  class UploadedFile < self
    set_table_name :uploaded_files
    belongs_to :storage, :polymorphic => true
  end
end 
```

当我运行以下代码时

```
Old::Recipe.all.each do |recipe|
  puts recipe.uploaded_files.to_sql
end 
```

它执行这个 SQL

```
SELECT `uploaded_files`.* FROM `uploaded_files`  WHERE `uploaded_files`.`storage_id` = 38 AND `uploaded_files`.`storage_type` = 'Old::Recipe' 
```

问题是我得到：

```
`storage_type` = 'Old::Recipe' 
```

但是我需要：

```
`storage_type` = 'Recipe' 
```

如何更改多态关系的类？

的文档[`has_many`](http://api.rubyonrails.org/classes/ActiveRecord/Associations/ClassMethods.html)没有给我答案。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2015-05-20T11:42:51.140

最近我遇到了类似的问题，这是一个在 rails 4.2 中对我有用的解决方案：

```
class Recipe < self
  set_table_name :recipes
  has_many :old_files, -> (object) { unscope(where: :storage_type).where(storage_type: 'Recipe') }, class_name: 'UploadedFile'
end 
```

您必须添加以从查询`unscope(:where)`中删除条件。`uploaded_files.storage_type = 'Old::Recipe'`

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2019-03-26T10:00:43.433

上面 santuxus 的答案适用于 rails 4.2+

但是，对于较低版本，您可以尝试像这样覆盖关联：

```
class Recipe
  has_many :uploaded_files, conditions: { storage_type: 'Recipe' }, foreign_key: :storage_id
end 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-10T16:43:08.247

不幸的是，目前我只找到了一种方法：

```
class Old < ActiveRecord::Base
  establish_connection :old_version
  self.abstract_class = true

  class Recipe < self
    set_table_name :recipes
    has_many :old_files,
             :class_name => 'UploadedFile',
             :finder_sql => Proc.new {
                %Q{
                  SELECT uploaded_files.*
                  FROM   uploaded_files
                  WHERE  uploaded_files.storage_id = #{id} AND
                         uploaded_files.storage_type = 'Recipe'
                }
              }
  end

  class UploadedFile < self
    set_table_name :uploaded_files
    belongs_to :storage, :polymorphic => true
  end
end

namespace :old do
  task :menu => :environment do
    Old::Recipe.all.each do |recipe|
      puts '~' * 50
      puts recipe.id
      recipe.old_files.to_a.each do |file|
        puts file.storage_id, file.storage_type
      end
    end
  end
end 
```

非常非常难过

# algorithm - 外部排序和内部排序有什么区别？

> ID：10083677
> 
> 赞同：9
> 
> 时间：2012-04-10T05:44:54.400
> 
> 标签：algorithm, sorting

外部排序和内部排序有什么区别？我不知道输入数据如何存储在 RAM 中或与算法无关。

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-04-10T05:47:10.987

在内部排序中，所有要排序的数据在排序过程中始终存储在内存中。在外部排序中，数据存储在内存外部（如磁盘上），并且仅以小块的形式加载到内存中。外部排序通常用于数据无法完全放入内存的情况。

因此，在内部排序中，您可以执行 shell 排序之类的操作 - 只需在您想要的任何时刻访问您想要的任何数组元素。你不能在外部排序中这样做——数组并不完全在内存中，所以你不能随机访问内存中的任何元素，并且在磁盘上随机访问它通常非常慢。外部排序算法必须以最佳方式处理加载和卸载数据块。

# c# - 如何从 Windows（如 dxdiag）获取软件和硬件信息？

> ID：10083681
> 
> 赞同：2
> 
> 时间：2012-04-10T05:45:20.907
> 
> 标签：c#, system-information

我需要获取 Windows 的硬件和软件信息，就像我们从**dxdiag获得的信息一样**

*   **电脑模块** ：东芝l775*   **处理器** ：Intel(R) i5 CPU M480 @2.67Ghz ..*   **内存** ：4.00 GB*   **显卡** ：ATI Mobility Radion HD 5650 - 2746MB*   **直接绘制** ：启用*   **DirectX** ：已启用 DirectX 11*   **AGP 纹理** ：已启用

    我需要这个，因为我正在开发一个服务器客户端应用程序，这样我就可以获得远程 PC 的详细信息。

    我已经用谷歌搜索了其中一些，但看起来每一个都明显不同于另一个。我也不确定它是否可以在 Windows 上的任何计算机上运行。

    那么有没有办法从任何使用 Windows 的计算机上获取这些信息呢？

    我正在使用 [.NET 4.0]

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-10T05:51:11.527

我认为这会对你有更多帮助，我不想解释试试这个[http://www.codeproject.com/Articles/17973/How-To-Get-Hardware-Information-CPU-ID-MainBoard-I](http://www.codeproject.com/Articles/17973/How-To-Get-Hardware-Information-CPU-ID-MainBoard-I)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-10T06:02:42.817

只是想在 las 的答案中添加一点点。你想要使用的是一种叫做 Windows Management Instrumentation 的东西。实施的完整细节位于[此处](http://msdn.microsoft.com/en-us/library/windows/desktop/aa394582%28v=vs.85%29.aspx)。

基本上，WMI 是一种类似于 SQL 的查询语言，它允许您查询计算机基础结构的各个方面。las 提供的链接似乎提供了一个不错的示例。

[这](http://msdn.microsoft.com/en-us/library/aa719643%28v=vs.71%29.aspx)是一个示例代码的链接，它允许您浏览 WMI 中提供的所有架构。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-06-28T19:10:59.677

很简单，您可以轻松地从注册表中获取此类信息，或者使用 System.Management 库。这在很大程度上取决于您愿意获得什么信息。我做了一个详细的帖子，解释了你如何做到这[一点](https://doumer.me/access-a-pcs-hardware-and-serial-ports-with-c-sharp-management-object-searcher/)

# javascript - Safari/IE 中的错误错误 x[i].getElementsByTagName("image")[1] 未定义

> ID：10083682
> 
> 赞同：-1
> 
> 时间：2012-04-10T05:45:21.107
> 
> 标签：javascript, html, rss

我正在尝试以 HTML 格式显示 RSS 提要。它适用于 iPad、iPhone 和 chrome，但不适用于 Internet Explorer 或 safari。我收到一条错误消息说

```
x[i].getElementsByTagName("image")[1] is undefined 
```

有谁知道我怎样才能让它工作？它使用 Apple RSS 提要来显示来自 App Store 的应用程序。错误发生在第一个 document.write 处。我也在尝试在表格中显示返回的结果。

```
 <html>
<head>
<title>RSS Apps</title>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">

</head>
<body bgcolor="#FFFFFF" leftmargin="0" topmargin="0" marginwidth="0" marginheight="0">
<script type="text/javascript">
var xmlhttp;
if (window.XMLHttpRequest)
  {// code for IE7+, Firefox, Chrome, Opera, Safari
  xmlhttp=new XMLHttpRequest();
  }
else
  {// code for IE6, IE5
  xmlhttp=new ActiveXObject("Microsoft.XMLHTTP");
  }
xmlhttp.open("GET","http://itunes.apple.com/au/rss/topfreeapplications/limit=10/xml?partnerId=1002&partnerUrl=http%3A%2F%2Fwww.s2d6.com%2Fx%2F%3Fx%3Dc%26z%3Ds%26v%3D3868801%26t%3D",false);
xmlhttp.send();
xmlDoc=xmlhttp.responseXML; 

var x=xmlDoc.getElementsByTagName("feed");
for (i=0;i<x.length;i++)

  { 
  document.write("<a href="+x[i].getElementsByTagName("id")[1].childNodes[0].nodeValue+"><img src=" + x[i].getElementsByTagName("im:image")[1].childNodes[0].nodeValue +"></a>");
  document.write("</td><td>");
  document.write("<a href="+x[i].getElementsByTagName("id")[2].childNodes[0].nodeValue+"><img src=" + x[i].getElementsByTagName("im:image")[4].childNodes[0].nodeValue +"></a>");
  document.write("</td><td>"); 
  document.write("<a href="+x[i].getElementsByTagName("id")[3].childNodes[0].nodeValue+"><img src=" + x[i].getElementsByTagName("im:image")[7].childNodes[0].nodeValue +"></a>");
  document.write("</td></tr><tr><td>");

  document.write("<font size=\"1\"><a href="+x[i].getElementsByTagName("id")[1].childNodes[0].nodeValue+">" + x[i].getElementsByTagName("name")[1].childNodes[0].nodeValue+"</a>");
  document.write("</td><td>");
  document.write("<font size=\"1\"><a href="+x[i].getElementsByTagName("id")[1].childNodes[0].nodeValue+">" + x[i].getElementsByTagName("name")[2].childNodes[0].nodeValue+"</a>");
  document.write("</td><td>");
  document.write("<font size=\"1\"><a href="+x[i].getElementsByTagName("id")[1].childNodes[0].nodeValue+">" + x[i].getElementsByTagName("name")[3].childNodes[0].nodeValue+"</a>");
  }
</script>
</td></tr>
</table>
</div>
</body>
</html> 
```

更新了处理“im:image”的代码，该代码现在可以在 Internet Explorer 和 safari 中运行，但不能在 chrome 中运行。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-10T06:15:33.390

这将给出一个结果。[演示](http://plungjan.name/test/xmlhttp.html)

请注意，我访问`entry`元素并在条目中访问 im:image 标签

**更新**这适用于 XP 上的 IE8、Fx Safari 和 Chrome

```
<html>
<head>
<title>RSS Apps</title>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">

<script type="text/javascript">
var isIE = navigator.userAgent.indexOf('MSIE')!=-1;
var ns = {im:"http://itunes.apple.com/rss"}; // could be extracted from the root element's attributes

function getElems(obj,tagName) {
  if (!obj.getElementsByTagNameNS) return obj.getElementsByTagName(tagName);

  var prefix = "";
  if (tagName.indexOf(":") !=-1) {
    var parts = tagName.split(":")
    prefix = parts[0];
    tagName = parts[1];    
  }

  if (prefix == "") return obj.getElementsByTagName(tagName); 

  return obj.getElementsByTagNameNS(ns[prefix], tagName);
}
window.onload=function() {
  var xmlhttp;
  if (window.XMLHttpRequest) {// code for IE7+, Firefox, Chrome, Opera, Safari
    xmlhttp=new XMLHttpRequest();
  }
  else   {// code for IE6, IE5
    xmlhttp=new ActiveXObject("Microsoft.XMLHTTP");
  }
  xmlhttp.open("GET","http://itunes.apple.com/au/rss/topfreeapplications/limit=10/xml?partnerId=1002&partnerUrl=http%3A%2F%2Fwww.s2d6.com%2Fx%2F%3Fx%3Dc%26z%3Ds%26v%3D3868801%26t%3D",false);
  xmlhttp.send();
  xmlDoc=xmlhttp.responseXML; 
  var x=xmlDoc.getElementsByTagName("entry");
  var html = "";
  for (var i=0;i<x.length;i++) {
    var entry = x[i];
    var id =getElems(entry,"id")[0].textContent;
    var nameTag = getElems(entry,"im:name");
    var name = isIE?nameTag[0].text:nameTag[0].textContent;
    html += '<a href="'+id+'">'+name+'<br/>';
    var images = getElems(entry,'im:image');
    for (var j=0;j<images.length;j++) {
      html += '<img src="'+(isIE?images[j].text:images[j].textContent)+'"/>';
    }
    html+='</a><hr/>';
  }
  document.getElementById('content').innerHTML=html;
}  
</script>

</head>
<body bgcolor="#FFFFFF" leftmargin="0" topmargin="0" marginwidth="0" marginheight="0">
<div id="content"></div>
</div>
</body>
</html> 
```

**更新 2**

jQuery版[DEMO](http://plungjan.name/test/xmlhttpjq.html)

```
$(document).ready(function() {
  jQuery.support.cors = true; // IMPERATIVE for IE(8) support
  $.ajax({
    type: "GET",
    url: "http://itunes.apple.com/au/rss/topfreeapplications/limit=10/xml?partnerId=1002&partnerUrl=http%3A%2F%2Fwww.s2d6.com%2Fx%2F%3Fx%3Dc%26z%3Ds%26v%3D3868801%26t%3D",
    dataType: "xml",
    success: function(xml) {
      $(xml).find('entry').each(function(){
        var id = $(this).find("id").text();
        var title = $(this).find("title").text();
        $("#content").append('<hr/>'+title+'<br/>'); 
        var images = $(this).find("image");
        if (images.length ==0) images = $(this).find("im\\:image");
        $.each(images,function(){
          $("#content").append('<a href="'+id+'"><img src="'+$(this).text()+'"/></a>');
        });
      });
    }
  });
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-10T06:06:44.437

您的代码基础肯定存在一些问题。例如，如果您不对图像的索引号进行硬编码，例如：

```
x[i].getElementsByTagName("id")[2] 
```

但实际上证实了它们的存在，这将彻底避免错误。

如果我不得不猜测（并且我确实）关于您的特定错误的问题，我会假设这是因为`image`元素具有`im:`名称空间前缀，并且可能引发错误的浏览器没有将其识别`getElementByTagName`为名称空间之后的标记名。

当然，这只是一个猜测。我建议对您尝试输出的每个项目使用嵌套循环，因为这将隔离问题，防止致命错误，并且以后更易于维护和扩展。

### 编辑：

以下工作是否有效：

```
var xmlhttp;
           if (window.XMLHttpRequest)
              {// code for IE7+, Firefox, Chrome, Opera, Safari
                  xmlhttp=new XMLHttpRequest();
              }
           else
              {// code for IE6, IE5
                  xmlhttp=new ActiveXObject("Microsoft.XMLHTTP");
               }
        xmlhttp.open("GET","http://itunes.apple.com/au/rss/topfreeapplications/limit=10/xml?partnerId=1002&partnerUrl=http%3A%2F%2Fwww.s2d6.com%2Fx%2F%3Fx%3Dc%26z%3Ds%26v%3D3868801%26t%3D",false);
        xmlhttp.send();

var feed = xmlhttp.responseXML; 
var entries = feed.getElementsByTagName("entry");
for (i = 0; i < entries.length; i++) 
    {

    entry_id = entries[i].getElementsByTagName("id")[0];
    entry_image = entries[i].getElementsByTagName("image")[0];
    entry_name = entries[i].getElementsByTagName("name")[0];
    entry_item = document.createElement("li");

    entry_figure = document.createElement("figure");
    entry_figure_img = document.createElement("img");
    entry_figure_img.setAttribute("src", entry_image.firstChild.nodeValue);
    entry_image_figcap = document.createElement("figcaption");
    entry_figure.appendChild(entry_figure_img);

    entry_link = document.createElement("a");
    entry_link.setAttribute("href", entry_id);
    entry_link_name = document.createTextNode(entry_name.firstChild.nodeValue );
    entry_link.appendChild(entry_link_name);
    entry_image_figcap.appendChild(entry_link);
    entry_figure.appendChild(entry_image_figcap);
    entry_item.appendChild(entry_figure);
    document.body.appendChild(entry_item);
} 
```

# iphone - 如何缩放并排放置的两个图像？

> ID：10083683
> 
> 赞同：2
> 
> 时间：2012-04-10T05:45:27.053
> 
> 标签：iphone, ios, ipad, uiscrollview, zooming

我有两个并排放置的滚动视图，它们可以单独缩放。我通过将视图放在滚动视图中并设置滚动视图的缩放比例来完成此操作。到目前为止，它工作正常！现在，有一个新的要求，将两张图像缩放在一起，这样如果我缩放一张图像，**另一张图像会自动以相同的缩放比例缩放**。我得到了[roambi 应用程序](http://itunes.apple.com/app/roambi-analytics-visualizer/id315020789?mt=8)作为参考，在比较过程中，为了方便起见，可以通过滚动其中一个滚动视图将两个滚动视图一起滚动。基本上，我正在做的也是两种观点之间的比较。我已经完成了滚动视图委托方法，但无法获得所需的结果。我该怎么做呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-10T07:22:53.327

我从来没有这样做过，但是在我的脑海中，我会说首先你需要让它们的缩放相同（如上所述），然后你必须使用委托方法来确保您的两个滚动视图都具有相同的 contentOffset 值。即，当一个通过手动滚动或通过编程滚动进行更改时，您必须（使用委托回调）将另一个设置为相同的 contentOffset 值。

编辑：根据要求，添加一些（未测试）代码：

```
- (void)scrollViewDidScroll:(UIScrollView*)scrollView
{
  if(scrollView == self.myFirstScroller)
  {
    self.mySecondScroller.contentOffset = self.myFirstScroller.contentOffset;
  } 
  else {
    self.myFirstScroller.contentOffset = self.mySecondScroller.contentOffset;
  }
} 
```

和上面类似的缩放。

但是，如果您正在寻找一些复制粘贴解决方案，您可以直接进入您的项目，恐怕您必须自学更多关于滚动视图的知识。您应该阅读 Apple 编程指南，因为滚动视图可能有点棘手，而且您通常必须使用相当多的委托方法才能使事情正常工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-10T05:54:42.183

不久前我实现了类似的东西（我为按钮做了）。我是这样做的：

取两个`UIScrollView`s 并引用它们（我用过`firstScrollView`and `secondScrollView`）

取两个`UIButton`s 并引用它们（我用过`firstImgBtn`and `secondImgBtn`）。将委托设置为滚动视图并使用以下委托方法：

```
- (UIView *)viewForZoomingInScrollView:(UIScrollView *)scrollView{
    //return the respective button in the scrollview to be zoomed
    if(scrollView==firstScrollView){
        return firstImgBtn;
    }
    else{
        return secondImgBtn;
    }
}

- (void)scrollViewDidZoom:(UIScrollView *)scrollView{
    // zoom in the other scrollview when one has zoomed
    if(zoomTogether){//a bool to decide whether to zoom the two together or not
        if(scrollView==firstScrollView){
            secondScrollView.zoomScale = firstScrollView.zoomScale;
        }
        else{
            firstScrollView.zoomScale = secondScrollView.zoomScale;
        }
    }
} 
```

这可以应用于任何子类`UIView`- 在您的情况下，它将是`UIImageView`s

# java - eclipse中的Tomcat7作为WTP项目未启动

> ID：10083696
> 
> 赞同：0
> 
> 时间：2012-04-10T05:46:54.573
> 
> 标签：java, spring, hibernate, tomcat7, eclipse-wtp

我在 Eclipse 中有一个 WTP 项目，它使用 Tomcat7 作为服务器，一切都很好 - 当我启动服务器时，日志中没有错误，但 tomcat 没有出现 - 点击 localhost:8080 显示 404 页面，我已经检查过端口也有冲突，下面是tomcat启动时的日志。

```
 Apr 10, 2012 11:07:36 AM org.apache.catalina.core.AprLifecycleListener init
INFO: The APR based Apache Tomcat Native library which allows optimal performance in production environments was not found on the java.library.path: C:\Users\ashishs\Downloads
Apr 10, 2012 11:07:36 AM org.apache.tomcat.util.digester.SetPropertiesRule begin
WARNING: [SetPropertiesRule]{Server/Service/Engine/Host/Context} Setting property 'source' to 'org.eclipse.jst.jee.server:SK' did not find a matching property.
Apr 10, 2012 11:07:36 AM org.apache.coyote.AbstractProtocol init
INFO: Initializing ProtocolHandler ["http-bio-8081"]
Apr 10, 2012 11:07:36 AM org.apache.coyote.AbstractProtocol init
INFO: Initializing ProtocolHandler ["ajp-bio-8010"]
Apr 10, 2012 11:07:36 AM org.apache.catalina.startup.Catalina load
INFO: Initialization processed in 517 ms
Apr 10, 2012 11:07:36 AM org.apache.catalina.core.StandardService startInternal
INFO: Starting service Catalina
Apr 10, 2012 11:07:36 AM org.apache.catalina.core.StandardEngine startInternal
INFO: Starting Servlet Engine: Apache Tomcat/7.0.23
Apr 10, 2012 11:07:37 AM org.apache.catalina.core.ApplicationContext log
INFO: Initializing Spring root WebApplicationContext
Apr 10, 2012 11:07:37 AM org.springframework.web.context.ContextLoader initWebApplicationContext
INFO: Root WebApplicationContext: initialization started
Apr 10, 2012 11:07:37 AM org.springframework.context.support.AbstractApplicationContext prepareRefresh
INFO: Refreshing Root WebApplicationContext: startup date [Tue Apr 10 11:07:37 IST 2012]; root of context hierarchy
Apr 10, 2012 11:07:37 AM org.springframework.beans.factory.xml.XmlBeanDefinitionReader loadBeanDefinitions
INFO: Loading XML bean definitions from ServletContext resource [/WEB-INF/spring/spring-security.xml]
Apr 10, 2012 11:07:37 AM org.springframework.security.core.SpringSecurityCoreVersion <clinit>
INFO: You are running with Spring Security Core 3.0.6.RELEASE
Apr 10, 2012 11:07:37 AM org.springframework.security.config.SecurityNamespaceHandler <init>
INFO: Spring Security 'config' module version is 3.0.6.RELEASE
Apr 10, 2012 11:07:37 AM org.springframework.security.config.http.HttpSecurityBeanDefinitionParser checkFilterChainOrder
INFO: Checking sorted filter chain: [Root bean: class [org.springframework.security.web.context.SecurityContextPersistenceFilter]; scope=; abstract=false; lazyInit=false; autowireMode=0; dependencyCheck=0; autowireCandidate=true; primary=false; factoryBeanName=null; factoryMethodName=null; initMethodName=null; destroyMethodName=null, order = 300, Root bean: class [org.springframework.security.web.authentication.logout.LogoutFilter]; scope=; abstract=false; lazyInit=false; autowireMode=0; dependencyCheck=0; autowireCandidate=true; primary=false; factoryBeanName=null; factoryMethodName=null; initMethodName=null; destroyMethodName=null, order = 400, <org.springframework.security.web.authentication.UsernamePasswordAuthenticationFilter#0>, order = 800, Root bean: class [org.springframework.security.web.authentication.www.BasicAuthenticationFilter]; scope=; abstract=false; lazyInit=false; autowireMode=0; dependencyCheck=0; autowireCandidate=true; primary=false; factoryBeanName=null; factoryMethodName=null; initMethodName=null; destroyMethodName=null, order = 1200, Root bean: class [org.springframework.security.web.savedrequest.RequestCacheAwareFilter]; scope=; abstract=false; lazyInit=false; autowireMode=0; dependencyCheck=0; autowireCandidate=true; primary=false; factoryBeanName=null; factoryMethodName=null; initMethodName=null; destroyMethodName=null, order = 1300, Root bean: class [org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter]; scope=; abstract=false; lazyInit=false; autowireMode=0; dependencyCheck=0; autowireCandidate=true; primary=false; factoryBeanName=null; factoryMethodName=null; initMethodName=null; destroyMethodName=null, order = 1400, Root bean: class [org.springframework.security.web.authentication.AnonymousAuthenticationFilter]; scope=; abstract=false; lazyInit=false; autowireMode=0; dependencyCheck=0; autowireCandidate=true; primary=false; factoryBeanName=null; factoryMethodName=null; initMethodName=null; destroyMethodName=null, order = 1600, Root bean: class [org.springframework.security.web.session.SessionManagementFilter]; scope=; abstract=false; lazyInit=false; autowireMode=0; dependencyCheck=0; autowireCandidate=true; primary=false; factoryBeanName=null; factoryMethodName=null; initMethodName=null; destroyMethodName=null, order = 1700, Root bean: class [org.springframework.security.web.access.ExceptionTranslationFilter]; scope=; abstract=false; lazyInit=false; autowireMode=0; dependencyCheck=0; autowireCandidate=true; primary=false; factoryBeanName=null; factoryMethodName=null; initMethodName=null; destroyMethodName=null, order = 1800, <org.springframework.security.web.access.intercept.FilterSecurityInterceptor#0>, order = 1900]
Apr 10, 2012 11:07:37 AM org.springframework.beans.factory.xml.XmlBeanDefinitionReader loadBeanDefinitions
INFO: Loading XML bean definitions from ServletContext resource [/WEB-INF/spring/spring-hibernate.xml]
Apr 10, 2012 11:07:38 AM org.springframework.beans.factory.xml.XmlBeanDefinitionReader loadBeanDefinitions
INFO: Loading XML bean definitions from ServletContext resource [/WEB-INF/spring/spring-context.xml]
Apr 10, 2012 11:07:38 AM org.springframework.beans.factory.xml.XmlBeanDefinitionReader loadBeanDefinitions
INFO: Loading XML bean definitions from ServletContext resource [/WEB-INF/spring/spring-mvc.xml]
Apr 10, 2012 11:07:38 AM org.springframework.beans.factory.xml.XmlBeanDefinitionReader loadBeanDefinitions
INFO: Loading XML bean definitions from ServletContext resource [/WEB-INF/spring/spring-beans.xml]
Apr 10, 2012 11:07:38 AM org.springframework.core.io.support.PropertiesLoaderSupport loadProperties
INFO: Loading properties file from ServletContext resource [/WEB-INF/database.properties]
Apr 10, 2012 11:07:38 AM org.springframework.core.io.support.PropertiesLoaderSupport loadProperties
INFO: Loading properties file from ServletContext resource [/WEB-INF/yelp.properties]
Apr 10, 2012 11:07:38 AM org.springframework.context.support.AbstractApplicationContext$BeanPostProcessorChecker postProcessAfterInitialization
INFO: Bean 'org.springframework.transaction.annotation.AnnotationTransactionAttributeSource#0' of type [class org.springframework.transaction.annotation.AnnotationTransactionAttributeSource] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
Apr 10, 2012 11:07:38 AM org.springframework.context.support.AbstractApplicationContext$BeanPostProcessorChecker postProcessAfterInitialization
INFO: Bean 'org.springframework.transaction.config.internalTransactionAdvisor' of type [class org.springframework.transaction.interceptor.BeanFactoryTransactionAttributeSourceAdvisor] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
Apr 10, 2012 11:07:38 AM org.springframework.beans.factory.support.DefaultListableBeanFactory preInstantiateSingletons
INFO: Pre-instantiating singletons in org.springframework.beans.factory.support.DefaultListableBeanFactory@1bc1fb9: defining beans [org.springframework.security.web.PortMapperImpl#0,org.springframework.security.web.context.HttpSessionSecurityContextRepository#0,org.springframework.security.web.authentication.session.SessionFixationProtectionStrategy#0,org.springframework.security.authentication.ProviderManager#0,org.springframework.security.access.vote.AffirmativeBased#0,org.springframework.security.web.access.intercept.FilterSecurityInterceptor#0,org.springframework.security.web.access.DefaultWebInvocationPrivilegeEvaluator#0,org.springframework.security.authentication.AnonymousAuthenticationProvider#0,org.springframework.security.web.savedrequest.HttpSessionRequestCache#0,org.springframework.security.web.authentication.www.BasicAuthenticationEntryPoint#0,org.springframework.security.web.authentication.UsernamePasswordAuthenticationFilter#0,org.springframework.security.config.http.UserDetailsServiceInjectionBeanPostProcessor#0,org.springframework.security.filterChainProxy,authenticationSuccessHandler,userDAO,userDetailsService,org.springframework.security.authentication.dao.DaoAuthenticationProvider#0,org.springframework.security.authentication.DefaultAuthenticationEventPublisher#0,org.springframework.security.authenticationManager,passwordEncoder,slingDataSource,sessionFactory,transactionManager,org.springframework.aop.config.internalAutoProxyCreator,org.springframework.transaction.annotation.AnnotationTransactionAttributeSource#0,org.springframework.transaction.interceptor.TransactionInterceptor#0,org.springframework.transaction.config.internalTransactionAdvisor,org.springframework.context.annotation.internalConfigurationAnnotationProcessor,org.springframework.context.annotation.internalAutowiredAnnotationProcessor,org.springframework.context.annotation.internalRequiredAnnotationProcessor,org.springframework.context.annotation.internalCommonAnnotationProcessor,org.springframework.context.annotation.internalPersistenceAnnotationProcessor,dashboardController,loginController,staticContentController,userController,yelpController,campaignDAOHibernateImpl,userHibernateDAOImpl,campaignManagerImpl,encryptionManagerImpl,userManagerImpl,yelpManagerImpl,propertyConfigurer,jspViewResolver,org.springframework.web.servlet.view.XmlViewResolver#0,jsonNames,org.springframework.web.servlet.mvc.annotation.DefaultAnnotationHandlerMapping#0,org.springframework.format.support.FormattingConversionServiceFactoryBean#0,org.springframework.web.servlet.mvc.annotation.AnnotationMethodHandlerAdapter#0,org.springframework.web.servlet.handler.MappedInterceptor#0]; root of factory hierarchy
SLF4J: Failed to load class "org.slf4j.impl.StaticLoggerBinder".
SLF4J: Defaulting to no-operation (NOP) logger implementation
SLF4J: See http://www.slf4j.org/codes.html#StaticLoggerBinder for further details.
Apr 10, 2012 11:07:39 AM org.springframework.orm.hibernate3.LocalSessionFactoryBean buildSessionFactory
INFO: Building new Hibernate SessionFactory
Apr 10, 2012 11:07:40 AM org.springframework.security.access.intercept.AbstractSecurityInterceptor afterPropertiesSet
INFO: Validated configuration attributes
Apr 10, 2012 11:07:40 AM org.springframework.orm.hibernate3.HibernateTransactionManager afterPropertiesSet
INFO: Using DataSource [org.apache.commons.dbcp.BasicDataSource@158497c] of Hibernate SessionFactory for HibernateTransactionManager
Apr 10, 2012 11:07:40 AM org.springframework.beans.factory.xml.XmlBeanDefinitionReader loadBeanDefinitions
INFO: Loading XML bean definitions from ServletContext resource [/WEB-INF/spring/view.xml]
Apr 10, 2012 11:07:40 AM org.springframework.context.support.AbstractApplicationContext prepareRefresh
INFO: Refreshing org.springframework.web.context.support.GenericWebApplicationContext@1b4cd65: startup date [Tue Apr 10 11:07:40 IST 2012]; parent: Root WebApplicationContext
Apr 10, 2012 11:07:40 AM org.springframework.beans.factory.support.DefaultListableBeanFactory preInstantiateSingletons
INFO: Pre-instantiating singletons in org.springframework.beans.factory.support.DefaultListableBeanFactory@9d22fc: defining beans [jsonNames]; parent: org.springframework.beans.factory.support.DefaultListableBeanFactory@1bc1fb9
Apr 10, 2012 11:07:40 AM org.springframework.web.servlet.handler.AbstractUrlHandlerMapping registerHandler
INFO: Mapped URL path [/dashboard.htm] onto handler 'dashboardController'
Apr 10, 2012 11:07:40 AM org.springframework.web.servlet.handler.AbstractUrlHandlerMapping registerHandler
INFO: Mapped URL path [/addSlingwallet.htm] onto handler 'dashboardController'
Apr 10, 2012 11:07:40 AM org.springframework.web.servlet.handler.AbstractUrlHandlerMapping registerHandler
INFO: Mapped URL path [/login.htm] onto handler 'loginController'
Apr 10, 2012 11:07:40 AM org.springframework.web.servlet.handler.AbstractUrlHandlerMapping registerHandler
INFO: Mapped URL path [/static-about-us.htm] onto handler 'staticContentController'
Apr 10, 2012 11:07:40 AM org.springframework.web.servlet.handler.AbstractUrlHandlerMapping registerHandler
INFO: Mapped URL path [/signup-user.htm] onto handler 'userController'
Apr 10, 2012 11:07:40 AM org.springframework.web.servlet.handler.AbstractUrlHandlerMapping registerHandler
INFO: Mapped URL path [/signup-page.htm] onto handler 'userController'
Apr 10, 2012 11:07:40 AM org.springframework.web.servlet.handler.AbstractUrlHandlerMapping registerHandler
INFO: Mapped URL path [/testYelp.htm] onto handler 'yelpController'
Apr 10, 2012 11:07:40 AM org.springframework.web.servlet.handler.AbstractUrlHandlerMapping registerHandler
INFO: Mapped URL path [/searchyelp.htm] onto handler 'yelpController'
Apr 10, 2012 11:07:40 AM org.springframework.web.context.ContextLoader initWebApplicationContext
INFO: Root WebApplicationContext: initialization completed in 3731 ms
Apr 10, 2012 11:07:41 AM org.apache.catalina.core.ApplicationContext log
INFO: Initializing Spring FrameworkServlet 'myappConsumer'
Apr 10, 2012 11:07:41 AM org.springframework.web.servlet.FrameworkServlet initServletBean
INFO: FrameworkServlet 'myappConsumer': initialization started
Apr 10, 2012 11:07:41 AM org.springframework.context.support.AbstractApplicationContext prepareRefresh
INFO: Refreshing WebApplicationContext for namespace 'myappConsumer-servlet': startup date [Tue Apr 10 11:07:41 IST 2012]; parent: Root WebApplicationContext
Apr 10, 2012 11:07:41 AM org.springframework.beans.factory.xml.XmlBeanDefinitionReader loadBeanDefinitions
INFO: Loading XML bean definitions from ServletContext resource [/WEB-INF/spring/spring-mvc.xml]
Apr 10, 2012 11:07:41 AM org.springframework.beans.factory.xml.XmlBeanDefinitionReader loadBeanDefinitions
INFO: Loading XML bean definitions from ServletContext resource [/WEB-INF/spring/spring-beans.xml]
Apr 10, 2012 11:07:41 AM org.springframework.beans.factory.support.DefaultListableBeanFactory preInstantiateSingletons
INFO: Pre-instantiating singletons in org.springframework.beans.factory.support.DefaultListableBeanFactory@1031310: defining beans [jspViewResolver,org.springframework.web.servlet.view.XmlViewResolver#0,jsonNames,dashboardController,loginController,staticContentController,userController,yelpController,org.springframework.context.annotation.internalConfigurationAnnotationProcessor,org.springframework.context.annotation.internalAutowiredAnnotationProcessor,org.springframework.context.annotation.internalRequiredAnnotationProcessor,org.springframework.context.annotation.internalCommonAnnotationProcessor,org.springframework.context.annotation.internalPersistenceAnnotationProcessor,org.springframework.web.servlet.mvc.annotation.DefaultAnnotationHandlerMapping#0,org.springframework.format.support.FormattingConversionServiceFactoryBean#0,org.springframework.web.servlet.mvc.annotation.AnnotationMethodHandlerAdapter#0,org.springframework.web.servlet.handler.MappedInterceptor#0]; parent: org.springframework.beans.factory.support.DefaultListableBeanFactory@1bc1fb9
Apr 10, 2012 11:07:41 AM org.springframework.beans.factory.xml.XmlBeanDefinitionReader loadBeanDefinitions
INFO: Loading XML bean definitions from ServletContext resource [/WEB-INF/spring/view.xml]
Apr 10, 2012 11:07:41 AM org.springframework.context.support.AbstractApplicationContext prepareRefresh
INFO: Refreshing org.springframework.web.context.support.GenericWebApplicationContext@16b69d7: startup date [Tue Apr 10 11:07:41 IST 2012]; parent: WebApplicationContext for namespace 'myappConsumer-servlet'
Apr 10, 2012 11:07:41 AM org.springframework.beans.factory.support.DefaultListableBeanFactory preInstantiateSingletons
INFO: Pre-instantiating singletons in org.springframework.beans.factory.support.DefaultListableBeanFactory@25b64d: defining beans [jsonNames]; parent: org.springframework.beans.factory.support.DefaultListableBeanFactory@1031310
Apr 10, 2012 11:07:41 AM org.springframework.web.servlet.handler.AbstractUrlHandlerMapping registerHandler
INFO: Mapped URL path [/dashboard.htm] onto handler 'dashboardController'
Apr 10, 2012 11:07:41 AM org.springframework.web.servlet.handler.AbstractUrlHandlerMapping registerHandler
INFO: Mapped URL path [/addSlingwallet.htm] onto handler 'dashboardController'
Apr 10, 2012 11:07:41 AM org.springframework.web.servlet.handler.AbstractUrlHandlerMapping registerHandler
INFO: Mapped URL path [/login.htm] onto handler 'loginController'
Apr 10, 2012 11:07:41 AM org.springframework.web.servlet.handler.AbstractUrlHandlerMapping registerHandler
INFO: Mapped URL path [/static-about-us.htm] onto handler 'staticContentController'
Apr 10, 2012 11:07:41 AM org.springframework.web.servlet.handler.AbstractUrlHandlerMapping registerHandler
INFO: Mapped URL path [/signup-user.htm] onto handler 'userController'
Apr 10, 2012 11:07:41 AM org.springframework.web.servlet.handler.AbstractUrlHandlerMapping registerHandler
INFO: Mapped URL path [/signup-page.htm] onto handler 'userController'
Apr 10, 2012 11:07:41 AM org.springframework.web.servlet.handler.AbstractUrlHandlerMapping registerHandler
INFO: Mapped URL path [/testYelp.htm] onto handler 'yelpController'
Apr 10, 2012 11:07:41 AM org.springframework.web.servlet.handler.AbstractUrlHandlerMapping registerHandler
INFO: Mapped URL path [/searchyelp.htm] onto handler 'yelpController'
Apr 10, 2012 11:07:41 AM org.springframework.web.servlet.FrameworkServlet initServletBean
INFO: FrameworkServlet 'myappConsumer': initialization completed in 133 ms
Apr 10, 2012 11:07:41 AM org.apache.coyote.AbstractProtocol start
INFO: Starting ProtocolHandler ["http-bio-8081"]
Apr 10, 2012 11:07:41 AM org.apache.coyote.AbstractProtocol start
INFO: Starting ProtocolHandler ["ajp-bio-8010"]
Apr 10, 2012 11:07:41 AM org.apache.catalina.startup.Catalina start
INFO: Server startup in 4398 ms 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-10T06:22:43.033

一般在Eclipse中部署一个web项目的时候不会映射到根路径，而是用一个与项目同名的上下文路径。

也就是说，如果您的项目名称是“WebTest”，请尝试点击

```
http://localhost:8080/WebTest 
```

但是要确保在您的 server.xml 配置文件中验证：

*   Tomcat 端口为 8080
*   您的上下文名称与项目名称映射

# internet-explorer - IE 8,9 中的 jsTree 问题

> ID：10083697
> 
> 赞同：0
> 
> 时间：2012-04-10T05:46:57.603
> 
> 标签：internet-explorer, jstree

我们正在使用 jstree jQuery 插件以分层格式显示角色列表。它在 Firefox 浏览器中运行良好，但我在 IE 浏览器中看不到树。在 IE 8 和 9 中支持/显示树是否需要任何特殊的样式更改？

在此先感谢，普里扬克

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-12-11T08:11:00.477

你是`jstree`从 html 构建你的吗？
删除您对 的调用`jstree`，有效地将您的列表保留为纯文本；它渲染吗？

如果不是，你有更大的问题，但如果是这样，我愿意打赌标签只是有点无效。

我有同样的问题，树可以在 Chrome、Firefox 甚至 IE11/10 中工作，但不是 9。
我通过[验证器](http://validator.w3.org/check)传递了我的 html ，发现我的列表的某些部分格式错误（即使浏览器显示它们很好，如果`jstree`没有被调用）。

`jstree`喜欢删除不适合的元素。

* * *

由于您的问题对您的设置含糊不清，因此可能值得注意的是您必须使用 jQuery 版本 1.11.1 或更低版本，因为 >=2 甚至无法在 8 中使用。

* * *

另一个问题可能是它以 IE7 模式呈现或出现怪癖（您可以通过开发人员工具检查这一点）。
尝试在标签`<meta http-equiv="X-UA-Compatible" content="IE=edge"/>`顶部添加。`<head>`

如果它仍然停留在文档模式 <8，那么您很可能在 Intranet 设置中运行该页面；您需要让服务器发送`X-UA-Compatible: IE=edge`标头，或[更改浏览器的设置](https://stackoverflow.com/questions/6156639/x-ua-compatible-is-set-to-ie-edge-but-it-still-doesnt-stop-compatibility-mode#9624500)以使其正常运行。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-11T21:55:34.603

IE 比其他浏览器更需要的唯一一件事就是正确定义 DOCTYPE。

解决方法见下： [jsTree display bug in IE8](https://stackoverflow.com/questions/10091914/jstree-display-flaw-in-ie8)

# php - PHP MySQL数据库查询错误

> ID：10083701
> 
> 赞同：0
> 
> 时间：2012-04-10T05:47:35.960
> 
> 标签：php, mysql

我正在尝试从表中获取前 10 项：

```
<?php
  include DBConnect.php;
  $dbname = 'Telejoke';
  mysql_select_db($dbname);
  $query = "SELECT * FROM jokes LIMIT 10";
  $data = mysql_query($query) or die('Error, insert query failed');
  mysql_close($conn);
  $info = mysql_fetch_array( $data );
?> 
```

PHP 脚本继续执行 die 部分，说我的查询插入失败。

更新：

错误是`No connection could be made because the target machine actively refused it.`

更新 2：

我认为我连接到数据库的用户无权使用 SELECT 命令。这会导致前面的错误吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-10T06:16:31.720

在 db connection.php 中，您必须使用允许对 db 进行操作的用户名和密码。

# zend-framework - 如何在 zend 框架中使用命令提示符创建控制器

> ID：10083705
> 
> 赞同：0
> 
> 时间：2012-04-10T05:48:39.093
> 
> 标签：zend-framework

我是 zend 框架的新手。我已将 bin 和 library 文件夹放在：

`C:\xampp\htdocs\zend`

并使用命令提示符创建了项目。

```
C:\xampp\htdocs\zend\bin> zf create project zendtest 
```

它在文件夹中创建项目zendtest - >`C:\xampp\htdocs\zend\bin\`

```
C:\xampp\htdocs\zend\bin>cd zendtest 
```

但是当我尝试创建模块时

```
C:\xampp\htdocs\zend\bin\zendtest> zf create module testmodule 
```

它的说法`'zf' is not recognised as internal or external command .`

在创建控制器时也会给出同样的错误。

如何解决这个问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-10T05:52:35.863

您需要将其添加到系统的 PATH 中。看看这里：

[http://framework.zend.com/manual/en/zend.tool.extending.html#zend.tool.extending.zend-tool-framework.cli-client.setup-windows](http://framework.zend.com/manual/en/zend.tool.extending.html#zend.tool.extending.zend-tool-framework.cli-client.setup-windows)

应该像将 Zend Framework 的 bin 文件夹的路径添加到 PATH 一样简单，并且应该进行设置。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-07-07T10:53:28.820

首先你必须去你的项目路径，然后移动到你的命令将运行的路径

> c:\xampp\htdocs\project_name>..\Zend\bin\zf.bat 创建模块 module_name

# iphone - 为 iPhone 编译时出现 Obj-class-ref 错误

> ID：10083713
> 
> 赞同：0
> 
> 时间：2012-04-10T05:49:02.010
> 
> 标签：iphone, ios5

```
Ld /Users/rajeshmedampudi/Library/Developer/Xcode/DerivedData/sampleResource-flngddqnaawregcrrshzpianssjc/Build/Products/Debug-iphonesimulator/sampleResource.app/sampleResource normal i386
    cd /Users/rajeshmedampudi/Dropbox/Work/iphone/sampleResource
    setenv MACOSX_DEPLOYMENT_TARGET 10.6
    setenv PATH "/Applications/Xcode.app/Contents/Developer/Platforms/iPhoneSimulator.platform/Developer/usr/bin:/Applications/Xcode.app/Contents/Developer/usr/bin:/usr/bin:/bin:/usr/sbin:/sbin"
    /Applications/Xcode.app/Contents/Developer/Toolchains/XcodeDefault.xctoolchain/usr/bin/clang -arch i386 -isysroot /Applications/Xcode.app/Contents/Developer/Platforms/iPhoneSimulator.platform/Developer/SDKs/iPhoneSimulator5.1.sdk -L/Users/rajeshmedampudi/Library/Developer/Xcode/DerivedData/sampleResource-flngddqnaawregcrrshzpianssjc/Build/Products/Debug-iphonesimulator -F/Users/rajeshmedampudi/Library/Developer/Xcode/DerivedData/sampleResource-flngddqnaawregcrrshzpianssjc/Build/Products/Debug-iphonesimulator -filelist /Users/rajeshmedampudi/Library/Developer/Xcode/DerivedData/sampleResource-flngddqnaawregcrrshzpianssjc/Build/Intermediates/sampleResource.build/Debug-iphonesimulator/sampleResource.build/Objects-normal/i386/sampleResource.LinkFileList -mmacosx-version-min=10.6 -Xlinker -objc_abi_version -Xlinker 2 -fobjc-arc -Xlinker -no_implicit_dylibs -D__IPHONE_OS_VERSION_MIN_REQUIRED=50100 -framework UIKit -framework Foundation -framework CoreGraphics -o /Users/rajeshmedampudi/Library/Developer/Xcode/DerivedData/sampleResource-flngddqnaawregcrrshzpianssjc/Build/Products/Debug-iphonesimulator/sampleResource.app/sampleResource

Undefined symbols for architecture i386:
  "_OBJC_CLASS_$_User", referenced from:
      objc-class-ref in AppDelegate.o
  "_OBJC_CLASS_$_AuthenticationViewController", referenced from:
      objc-class-ref in AppDelegate.o
  "_OBJC_CLASS_$_AppHelpers", referenced from:
      objc-class-ref in AppDelegate.o
ld: symbol(s) not found for architecture i386
clang: error: linker command failed with exit code 1 (use -v to see invocation) 
```

这是我在尝试运行文件时遇到的错误......我已将这些类从另一个项目导入到这个非基于弧并转换为 ARC 的项目中。在成功删除所有对自动释放的引用并从中保留后，我收到了这个错误。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-10T05:57:32.567

您是否尝试过产品->清洁？还是重新启动 XCode？您是否确保已将所有内容都包含在 Targets->Build Phases->Compile Sources 中？Xcode 会为你做这件事，但有时它会遗漏一些东西。

# sqlite - 插入大量记录时的 SQLite 问题

> ID：10083719
> 
> 赞同：9
> 
> 时间：2012-04-10T05:49:29.723
> 
> 标签：sqlite

我正在尝试使用 SQLite3 shell 在某个表中插入 15530 记录，但我得到了那个错误，我搜索了默认为 500 的解决方案 SQLITE_MAX_COMPOUND_SELECT 是原因，但我不知道如何使用 Shell 更改它。

“错误：复合 SELECT 中的术语太多”

[http://desmond.imageshack.us/Himg861/scaled.php?server=861&filename=sqlite.jpg&res=landing](http://desmond.imageshack.us/Himg861/scaled.php?server=861&filename=sqlite.jpg&res=landing)

```
INSERT INTO table_name (my_id, my_name) VALUES
(1, 'Aaliyah'),
(2, 'Alvar Aalto'),
(3, 'Willie Aames'),
...
(15530, 'name'); 
```

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-01-10T17:36:00.027

多值 INSERT INTO 语法是[在 SQLite 3.7.11 中引入的](https://www.sqlite.org/changes.html)，因此原始语法在最新版本的 SQLite 上很好。在旧版本上，您可以使用[另一种语法](https://stackoverflow.com/questions/1609637/is-it-possible-to-insert-multiple-rows-at-a-time-in-an-sqlite-database)。

但是，`SQLITE_MAX_COMPOUND_SELECT` [在运行时不能提高](https://www.sqlite.org/limits.html)限制，因此您需要将插入分成每批 500 行。这将比每个查询插入一行更有效。例如

```
BEGIN;
INSERT INTO table_name (id, name) VALUES (1, 'foo'), ..., (500, 'bar');
INSERT INTO table_name (id, name) VALUES (501, 'baz'), ..., (1000, 'zzz');
...
COMMIT; 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-04-10T06:03:24.457

`INSERT INTO`不能那样工作。

尝试这个：

```
BEGIN TRANSACTION
INSERT INTO author (author_id, author_name) VALUES (1, 'Aaliyah')
INSERT INTO author (author_id, author_name) VALUES (2, 'Alvar Aalto')
INSERT INTO author (author_id, author_name) VALUES (3, 'Willie Aames')
...
END TRANSACTION 
```

[http://www.sqlite.org/lang_insert.html](http://www.sqlite.org/lang_insert.html)

# c# - Windows 服务安装错误上的 wcf 服务托管

> ID：10083721
> 
> 赞同：2
> 
> 时间：2012-04-10T05:49:43.183
> 
> 标签：c#, wcf, windows-services

当我使用 InstallUtil 在 Windows 服务上安装 wcf 服务托管时，我收到以下错误消息。

System.ServiceProcess.ServiceProcessInstaller 安装程序的回滚阶段发生异常。System.NullReferenceException：对象引用未设置为对象的实例。在安装的回滚阶段发生异常。这个 except ion 将被忽略，并且回滚将继续。但是，回滚完成后，机器可能不会完全恢复到其初始状态。

回滚阶段成功完成。

事务安装已完成。安装失败，已回滚。

你能告诉我如何克服这个问题吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-10T18:42:34.147

以管理员身份进行。我的意思是说以管理员身份运行命令提示符并尝试。我有同样的错误并使用这种技术解决了。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-10T06:05:16.277

assemblyname.InstallLog 文件中应该有更多信息。首先检查那里的错误。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-10T06:39:58.353

检查应用程序事件日志，运行：

```
eventvwr.msc 
```

你可以在那里看到你得到的*真正*异常的细节。

如果您的`System.ServiceModel`设置在配置文件中，则您收到的错误可能是由于配置设置无效。

如果您在安装过程中遇到困难，可以按照[本教程安装*托管 Windows 服务。*](http://msdn.microsoft.com/en-us/library/ms733069.aspx)

# ruby - 为什么分配给变量常量被更新

> ID：10083723
> 
> 赞同：3
> 
> 时间：2012-04-10T05:49:54.413
> 
> 标签：ruby, constants

为什么当我将常量分配给变量并对其进行更新时，常量被更新为？是预期的行为还是错误？

```
ruby-1.9.3-p0 :001 > A = { :test => '123' }
 => {:test=>"123"} 
ruby-1.9.3-p0 :002 > b = A
 => {:test=>"123"} 
ruby-1.9.3-p0 :003 > b[:test] = '456'
 => "456" 
ruby-1.9.3-p0 :004 > A
 => {:test=>"456"} 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-10T06:06:33.127

这是预期的行为，但*为什么*并不总是很明显。这是 Ruby 等语言的一个非常重要的区别。这里有三件事在起作用：

1.  常数`A`

2.  变量`b`

3.  哈希`{ :test => '123' }`

前两种都是*变量*。第三个是*对象*。变量和对象之间的区别至关重要。变量只是*指*对象。当您将同一个对象分配给两个变量时，它们都引用同一个对象。只创建了一个对象，因此当您更改它时，两个变量都引用更改后的对象。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-10T05:53:03.240

这是因为浅拷贝机制。在您的示例中， A 和 b 实际上是对同一对象的引用。为了避免这种使用：

```
b = A.dup 
```

这将使用 A 的副本初始化 b 而不是将其指向相同的哈希（即，这使用深拷贝）。

有关更多信息，请参见[此处](http://en.wikipedia.org/wiki/Object_copy)的浅拷贝和深拷贝。

# java - 如何保护 servlet 免受外部用户的攻击？

> ID：10083725
> 
> 赞同：1
> 
> 时间：2012-04-10T05:50:01.950
> 
> 标签：java, security, google-app-engine

我尝试在 web.xml 中使用安全约束。我使用角色授予管理员权限。如何测试 servlet 是否安全且只能由管理员访问？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-04-10T06:14:55.087

要测试 servlet，您至少需要两个 Google 帐户。在您的 Google App Engine 管理控制台上，必须至少将一个 Google 帐户添加为查看者，而不得添加另一个 Google 帐户。未在管理控制台中添加的 Google 帐户应该无法访问角色定义为 admin 的任何 servlet。

如果由于某种原因测试失败，您需要确保您已遵循文档中的所有步骤来保护 servlet 并实现身份验证模式。下面以 Google OAuth 和 UserService 为例进行了概述。

开箱即用，Google App Engine 为您提供了两个可在应用程序中使用的角色：用户和管理员。

管理员用户被定义为在 Google App Engine 项目中被列为[三个角色之一的](https://developers.google.com/appengine/docs/adminconsole/roles)任何用户，因此如果您想授予某人管理员访问您的 servlet 的权限，您可以将他们添加为[http://中的查看器appengine.google.com](http://appengine.google.com)面板。

[UserService](https://developers.google.com/appengine/docs/java/javadoc/com/google/appengine/api/users/UserService)类使您可以访问已登录的用户。您需要使用它为您的用户创建一个登录 URL，使用他或她的 Google 帐户通过 Google 登录，将他或她重定向到您的应用程序，然后用于`UserService.isUserAdmin()`确定该用户是否确实是管理员用户。

[使用用户服务](https://developers.google.com/appengine/docs/java/gettingstarted/usingusers)详细描述了如何开始使用用户服务类。

```
package guestbook;

import java.io.IOException;
import javax.servlet.http.*;
import com.google.appengine.api.users.User;
import com.google.appengine.api.users.UserService;
import com.google.appengine.api.users.UserServiceFactory;

public class GuestbookServlet extends HttpServlet {
    public void doGet(HttpServletRequest req, HttpServletResponse resp)
          throws IOException {
        UserService userService = UserServiceFactory.getUserService();
        User user = userService.getCurrentUser();

        if (user != null) {
            resp.setContentType("text/plain");
            if(userService.isUserAdmin()) {
                resp.getWriter().println("Hello, " + user.getNickname() + ", you are logged in as an admin");
            } else {
                resp.getWriter().println("Hello, " + user.getNickname());
            }
        } else {
            resp.sendRedirect(userService.createLoginURL(req.getRequestURI()));
        }
    }
} 
```

[Google App Engine 用户 Java API 概述](https://developers.google.com/appengine/docs/java/users/overview)演示了如何在 Google App Engine 上处理用户登录：

```
import java.io.IOException;
import javax.servlet.http.HttpServlet;
import javax.servlet.http.HttpServletRequest;
import javax.servlet.http.HttpServletResponse;
import com.google.appengine.api.users.UserService;
import com.google.appengine.api.users.UserServiceFactory;

public class MyServlet extends HttpServlet {
    public void doGet(HttpServletRequest req, HttpServletResponse resp)
            throws IOException {
        UserService userService = UserServiceFactory.getUserService();

        String thisURL = req.getRequestURI();

        resp.setContentType("text/html");
        if (req.getUserPrincipal() != null) {
            resp.getWriter().println("<p>Hello, " +
                                 req.getUserPrincipal().getName() +
                                 "!  You can <a href=\"" +
                                 userService.createLogoutURL(thisURL) +
                                 "\">sign out</a>.</p>");
        } else {
            resp.getWriter().println("<p>Please <a href=\"" +
                                 userService.createLoginURL(thisURL) +
                                 "\">sign in</a>.</p>");
        } 
    }
} 
```

**保护 Servlet：**

> 如果您有页面，除非登录，否则用户应该无法访问，您可以在部署描述符中为这些页面建立安全约束（web.xml

[部署描述符：安全和身份验证](https://developers.google.com/appengine/docs/java/config/webxml#Security_and_Authentication)页面演示了如何修改 web.xml，以便只有管理员可以访问某些 servlet。

```
<security-constraint>
    <web-resource-collection>
        <url-pattern>/profile/*</url-pattern>
    </web-resource-collection>
    <auth-constraint>
        <role-name>*</role-name>
    </auth-constraint>
</security-constraint>

<security-constraint>
    <web-resource-collection>
        <url-pattern>/admin/*</url-pattern>
    </web-resource-collection>
    <auth-constraint>
        <role-name>admin</role-name>
    </auth-constraint>
</security-constraint> 
```

在此示例中，`/profile`具有任何角色的用户都可以访问 servlet，由 表示`*`，并且该`/admin`servlet 只能由具有角色的用户访问`admin`。

虽然 Google App Engine Java 确实具有内置的安全性，但角色有些受限。如果您需要对用户角色进行更精细的控制，请参阅[Luke Taylor 在 Google App Engine 中的 Spring Security 上的帖子](http://blog.springsource.org/2010/08/02/spring-security-in-google-app-engine/)。该示例很旧，但如果您将日志记录级别提高到 TRACE，则可以使其在最新版本的 Spring 和最新的 GAE SDK 上运行。

# symfony - 在我的表单 Symfony2 中创建重复字段

> ID：10083730
> 
> 赞同：6
> 
> 时间：2012-04-10T05:50:06.940
> 
> 标签：symfony

我正在做一个大学项目，我想参加所有学生的出勤。我创建了一个包含 3 个字段的模型，即日期、当前（布尔值）和 student_id。现在，当我尝试从中生成表单时，它只会显示这 3 个字段。但是我想要班里的所有学生。所以我为学生创建了一个循环并创建了一个出勤对象数组。现在我被卡住了，我不知道如何将它们传递给我的 TWIG 文件，而且我也很困惑这是否是正确的方法。这是我的模型和控制器代码

## 形式

```
namespace College\StudentBundle\Form;

use Symfony\Component\Form\AbstractType;
use Symfony\Component\Form\FormBuilder;

class StudentAttendanceType extends AbstractType
{
   public function buildForm(FormBuilder $builder, array $options)
   {
     $builder
        ->add('date')
        ->add('present')
    ;
   }

   public function getName()
   {
     return 'college_studentbundle_studentattendancetype';
   }
} 
```

## 控制器

```
public function takeAttendanceAction($Department_Id)
{
    $students = $this->getDoctrine()
    ->getRepository('CollegeStudentBundle:Student')
    ->findAll($Department_Id);

    foreach($students as $key => $student){

        $attendance[$key] = new StudentAttendance();
        $form[$key] = $this->createForm(new StudentAttendanceType(), $attendance[$key]);
    }

    $request = $this->getRequest();
    if ($request->getMethod() == 'POST') {

        $form->bindRequest($request);
        if ($form->isValid()) {

            $em = $this->getDoctrine()
            ->getEntityManager();
            $em->persist($attendance);
            $em->flush();
            return $this->redirect($this->generateUrl('CollegeStudentBundle_index', array('id' => $Department_Id)));
        }
    }
    return $this->render('CollegeStudentBundle:StudentAttendance:take-attendance.html.twig', array(
            'form' => $form->createView(), 'department' => $Department_Id, 'students' => $students,
    ));
} 
```

我怎样才能呈现表单，它会用一个单独的复选框向我显示所有学生？

## HTML.TWIG

```
{% block body  %}
<form  action="{{ path('CollegeStudentBundle_take_attendance',{'id':department} ) }}" method="post" {{ form_enctype(form) }} name="acadimics-form" id="acadimics-form" >

{{ form_errors(form) }}
{{ form_row(forms[0].date) }}

<table id="mytabs" border="1" cellpadding="5" cellspacing="2" width="100%" >
   <tr>
    <th> Enrolment No. </th>
    <th> Student's Name </th>
    <th> Present </th>
   </tr>
  {% for student in students %}
    <tr>
       <td> {{ student.enrolmentNo }} </td>
       <td> {{ student.firstname }} {{ student.lastname }} </td>
       <td> {{ form_row(form.present) }} </td>
        </tr>
  {% endfor %}
  {{ form_rest(form) }}
</table>

<input type="submit" value="Take Attendance"  />
</form>
  </div>

{% endblock %} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-10T06:51:26.867

未测试。但是应该有一点修改。控制器中的循环：

```
foreach($students as $key => $student){

    $attendance[$key] = new StudentAttendance();
    $form[$key] = $this->createForm(new StudentAttendanceType(), $attendance[$key])->createView();
} 
```

返回数组：

```
return $this->render('CollegeStudentBundle:StudentAttendance:take-attendance.html.twig', array(
    'form' => $form, 'department' => $Department_Id, 'students' => $students,
)); 
```

在模板中：

```
{% for sform in form %}
    {{ form_widget(sform) }}
{% endfor %} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-10T19:07:46.523

我想你可能走错了路。S2 已经处理了开箱即用的数组。

通读：

[http://symfony.com/doc/current/cookbook/form/form_collections.html](http://symfony.com/doc/current/cookbook/form/form_collections.html)

[http://symfony.com/doc/current/reference/forms/types/collection.html](http://symfony.com/doc/current/reference/forms/types/collection.html)

您基本上想要创建一个主 ListofStudents 表单，然后嵌入一个 StudentAttendence 表单。然后，您可以将您的学生数组传递给主表单，所有数组处理都会神奇地发生。

在您的 ListOfStudents 表格中，您将拥有如下内容：

```
public function buildForm(FormBuilder $builder, array $options)
{
    $builder->add('students', 'collection', array('type' => new StudentAttendenceType())); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-10T08:19:46.073

您将变量返回`students`到模板并`student.firstname`在树枝中调用，它应该是`students.firstname`并且您应该将您的变量保留`'form' => $form->createView()`在控制器的返回中。

我认为它应该工作得更好，希望这有帮助！

# php - 仅使用 mongodb 和 php 中的关联键提取数据

> ID：10083734
> 
> 赞同：0
> 
> 时间：2012-04-10T05:50:29.670
> 
> 标签：php, mongodb

如何拉出有键的内部数组`address1`

```
"_id": 2,
"info": {
    "address1": {
        "city": {
            "0": "Indore"
        },
        "state": {
            "0": "MP"
        }
    },
    "address2": {
        "city": {
            "0": "Mhow"
        },
        "state": {
            "0": "MP"
        }
    }
} 
```

删除数据后应该是：

```
"_id": 2,
"info": {
    "address1": {
        "city": {
            "0": "Indore"
        },
        "state": {
            "0": "MP"
        }
    }
} 
```

我用过这个`db.info.update({"_id":2},{'$pull':{"info":{"address1":{'$exists':true}}}})` 但它给出了错误`Cannot apply $pull/$pullAll modifier to non-array`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-10T06:36:47.013

在我看来，您真正想要的是一组地址，对吧？所以你的用户可以拥有无​​限的地址？如果是这样，您应该有一个数组，如下所示：

```
"_id": 2,
"info": {
    "address": [{
        "city": {
            "0": "Indore"
        },
        "state": {
            "0": "MP"
        }
    },
     {
        "city": {
            "0": "Mhow"
        },
        "state": {
            "0": "MP"
        }
    }]
} 
```

现在将地址作为数组使用，您可以使用 $push 和 $pull

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-10T06:07:17.793

从 mongo 控制台：

```
> db.tester.find()
{ "_id" : 2, "info" : { "address1" : { "city" : { "0" : "Indore" }, "state" : { "0" : "MP" } }, "address2" : { "city" : { "0" : "Mhow" }, "state" : { "0" : "MP" } } } }
> db.tester.findAndModify({query: {"_id":2}, update : {$unset: {"info.address2":1}}, new:true})
{
    "_id" : 2,
    "info" : {
        "address1" : {
            "city" : {
                "0" : "Indore"
            },
            "state" : {
                "0" : "MP"
            }
        }
    }
}
> db.tester.find()
{ "_id" : 2, "info" : { "address1" : { "city" : { "0" : "Indore" }, "state" : { "0" : "MP" } } } } 
```

这能满足您的需要吗？

# validation - 证明电子邮件来自网站所有者 - 如何？PGP 密钥？

> ID：10083741
> 
> 赞同：0
> 
> 时间：2012-04-10T05:51:45.913
> 
> 标签：validation, privacy, web-applications, pgp

有没有办法证明通过电子邮件或其他方式发送的通信来自控制网站的人？

我说的是相当简单的事情。例如，在验证网站管理员工具的网站或 Google Apps 的域时，Google 会要求您将他们提供给您的代码放入位于网站根目录的文本文件中。但我感兴趣的是一个普通的、普通的计算机用户在收到来自网站运营商的电子邮件以验证其出处时可以做的事情。网站所有者可能无法控制域本身或从域地址发送电子邮件的权力。

我一直在阅读有关 PGP 的信息，但我头晕目眩。但例如，这种情况可能吗？：

1.  网站上公布了一个长密钥代码。
2.  在另一封电子邮件中，包含不同的长密钥代码。
3.  好的，现在我开始感到困惑。

我想我在想的是，可读的纯文本消息的接收者可以以某种方式检查消息中包含的内容与网站上的内容（可能通过在线网络应用程序，而不是他们必须安装的任何复杂软件） ，并且他们可以确信该消息来自控制该网站的人。

理想情况下，该解决方案将像啤酒一样免费，并且不会要求网站所有者损害其隐私或匿名性。

Web 应用程序或 Macintosh（或 Windows）应用程序或开源网站开发工具的具体建议将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-10T06:09:42.800

听起来您正在使用数字签名方法：[http](http://en.wikipedia.org/wiki/Digital_signature) ://en.wikipedia.org/wiki/Digital_signature 。在您控制的网站上发布公钥并使用相应的私钥签署电子邮件是您控制该网站的证明。

请注意，如果网站以某种方式受到损害，则可以通过黑客发布不同的密钥来绕过数字签名。最好从可靠的证书颁发机构购买证书，该证书颁发机构作为受信任的第三方来保证您的身份。

# autohotkey - Autohotkey 条件事件消耗

> ID：10083742
> 
> 赞同：2
> 
> 时间：2012-04-10T05:51:49.340
> 
> 标签：autohotkey

我正在尝试构建以下手势：单击并按住鼠标右键，单击鼠标左键 => 触发浏览器返回键

```
RButton & LButton Up::
    Send {Browser_Back}
return

~RButton::return 
```

问题是我想在按下此热键后释放右键时消耗最后一个“右键向上”。实际上，我不想看到弹出的上下文菜单。

有什么帮助吗？

编辑：如果我们能保留右拖拽就好了。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-10T10:02:41.697

我假设您不想一直阻止右键菜单。

```
rbutton & lbutton::Send, {Browser_Back}

rbutton::click r 
```

否则排除第二行。

更新：由于您现在已经指定使用“右拖动”
，这是另一个想法（注意：我不使用右拖动，所以我无法确认任何内容）：

```
rbutton::
Keywait, rbutton, T0.5
If (ErrorLevel) {
    Click r d
    Keywait, rbutton
    Click r u
} Return

lbutton::
if GetKeyState("rbutton", "P")
    Send, {Browser_Back}
Else {
    Click d
    Keywait, lbutton
    Click u
} Return 
```

您必须按住 rbutton 并单击鼠标左键，然后在 0.5 秒内释放 rbutton，或者提高时间。
据我所知，基本版本根本行不通。这是因为 using`&`将使 rbutton 仅在释放时触发。

如果这仍然不起作用，您可以尝试更复杂的方法：[链接](http://www.autohotkey.com/community/viewtopic.php?p=50600#p50600)
更新：我只是想到了另一种变体：

```
Lbutton::
if GetKeyState("rbutton", "P")
    Send, {Browser_Back}
Else {
    Click d
    Keywait, lbutton
    Click u
} Return

rbutton up::
If (a_priorhotkey != "Lbutton" or a_timeSincePriorHotkey > 500)
    Click r
Return 
```

# haskell - 在 Haskell 中使用 Data.Map 进行动态编程？

> ID：10083743
> 
> 赞同：5
> 
> 时间：2012-04-10T05:51:50.310
> 
> 标签：haskell, dynamic-programming, collatz

我正在尝试在 Haskell 中实现一个简单的 dp 算法（这是针对 Project Euler 的 Collat​​z 猜想问题）；这是等效的c ++：

```
map<int,int> a;
int solve(int x) {
  if (a.find(x) != a.end()) return a[x];
  return a[x] = 1 + /* recursive call */;
} 
```

所以我在 Haskell 中编写的代码最终看起来像这样：

```
solve :: (Memo, Int) -> (Memo, Int)
solve (mem, x) =
 case Map.lookup x mem of
  Just l -> (mem, l)
  Nothing -> let (mem', l') = {- recursive call -}
                 mem'' = Map.insert x (1+l') mem'
             in (mem'', 1+l') 
```

（我认为我只是在这里重新实现了一个状态单子，但暂时不要介意。）调用solve的代码试图找到它可以为最多K = 1e6的参数提供的最大值：

```
foldl'
 (\(mem,ss) k ->
   let (mem',x') = solve (mem, k)
   in (mem', (x', k):ss))
 (Map.singleton 1 1, [(1,1)]) [2..100000] 
```

上面编写的代码因堆栈溢出而失败。这是意料之中的，我理解，因为它建立了一个非常大的未评估的重击。所以我尝试使用

```
x' `seq` (mem', (x',k):ss) 
```

在 foldl' 中，它计算 K=1e5 的正确答案。但这对于 K=1e6 失败（12 秒内堆栈溢出）。然后我尝试使用

```
mem'' `seq` l' `seq` (mem'', 1+l') 
```

在求解的最后一行，但这没有任何区别（仍然是堆栈溢出）。然后我尝试使用

```
mem'' `deepseq` l' `seq` (mem'', 1+l') 
```

这非常慢，大概是因为 deepseq 遍历了整个 map mem''，使得算法的时间复杂度是二次的，而不是 n*log(n)。

实现这一点的正确方法是什么？我被卡住了，因为我无法弄清楚如何使整个计算变得严格，而且我不太确定计算的哪一部分导致堆栈溢出，但我怀疑它是地图。我可以使用例如数组，但我想了解我在这里做错了什么。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-10T06:18:16.633

当您使用 32 位有符号整数类型时，堆栈溢出不会消失。对于某些起始值，链离开 32 位范围并进入负数的无限循环。使用`Integer`或`Int64`或`Word64`。

# c - 如何在 64 位应用程序中使用 32 位指针？

> ID：10083744
> 
> 赞同：9
> 
> 时间：2012-04-10T05:51:51.450
> 
> 标签：c, pointers, 32bit-64bit

我们学校的项目只允许我们将 c 程序编译成 64 位应用程序，他们测试我们的程序的速度和内存使用情况。但是，如果我能够使用 32 位指针，那么我的程序将消耗比 64 位更少的内存，也可能它运行得更快（比 malloc 更快？）

我想知道是否可以在 64 位应用程序中使用 32 位指针？

谢谢您的帮助

* * *

## 回答 #1

> 赞同：35
> 
> 时间：2012-04-10T06:22:57.597

使用 GCC？

-mx32 选项将 int、long 和指针类型设置为 32 位，并为 x86-64 体系结构生成代码。（英特尔 386 和 AMD x86-64 选项）：

*   [i386 和 x86_64 选项](http://gcc.gnu.org/onlinedocs/gcc/i386-and-x86_002d64-Options.html)

*   [其他目标，海湾合作委员会](http://gcc.gnu.org/onlinedocs/gcc/Submodel-Options.html#Submodel-Options)

然后进行基准测试:)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-10T06:10:53.043

你可以“滚动你自己”。以下内容可能会减少内存使用量 - 略微减少 - 但它可能不会提高速度，因为您必须将短指针转换为绝对指针，这会增加开销，而且您也会失去类型检查的大部分好处。

它看起来像这样：

```
typedef unsigned short ptr;
...

// pre-allocate all memory you'd ever need
char* offset = malloc(256); // make sure this size is less than max unsigned int

// these "pointers" are 16-bit short integer, assuming sizeof(int) == 4
ptr var1 = 0, var2 = 4, var3 = 8;

// how to read and write to those "pointer", you can hide these with macros
*((int*) &offset[var1]) = ((int) 1) << 16;
printf("%i", *((int*) &offset[var1])); 
```

通过更多技巧，您可以发明自己的 brk() 来帮助从偏移量分配内存。

这值得么？国际海事组织编号

# sql - PostgreSQL：在单列上选择不同的值，同时在另一列上排序

> ID：10083757
> 
> 赞同：0
> 
> 时间：2012-04-10T05:53:07.890
> 
> 标签：sql, postgresql, distinct

我正在处理一个简单的消息数据库。

```
编号 | 整数                     
 parent_id | 整数                     
 味精 | 性格变化(140)       
 创建_dte | 数字（10,0）

```

消息的 parent_id 为 -1（顶级）或另一条消息的 id。我想返回最近的顶级消息——最近定义为父级或其任何子级的最近 create_dte。

这是我的查询：

```
select (case when parent_id != -1 then parent_id else id end) as mid, create_dte
from messages
order by create_dte desc 
```

我的结果是这样的：

```
中 | create_dte
------+----------------------
 5655 | 1333906651
 5462 | 1333816235
 5496 | 1333686356
 5157 | 1333685638
  第676章 1333648764
 5493 | 1333648630
  第724章 1333641318
 5402 | 1333470056
 5397 | 1333468897
 5396 | 1333468378
 3640 | 1333304212
 3434 | 1333300366
 2890 | 1333293369
 4958 | 1333288239
 4899 | 1333287641
 5203 | 1333287298
 4899 | 1333287275
 4899 | 1333285593

```

如何在保持 create_dte 类型的同时消除结果中的重复项？我已经尝试过不同的和不同的，但总是失去排序。

这是我需要的：

```
中 | create_dte
------+----------------------
 5655 | 1333906651
 5462 | 1333816235
 5496 | 1333686356
 5157 | 1333685638
  第676章 1333648764
 5493 | 1333648630
  第724章 1333641318
 5402 | 1333470056
 5397 | 1333468897
 5396 | 1333468378
 3640 | 1333304212
 3434 | 1333300366
 2890 | 1333293369
 4958 | 1333288239
 4899 | 1333287641
 5203 | 1333287298

```

（最后两行未作为 4899 返回的结果中已经出现了更新的 create_dte。）

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-10T06:00:42.130

尝试以下操作：

```
select (case when parent_id != -1 then parent_id else id end) as mid, max(create_dte )
from messages 
group by case when parent_id != -1 then parent_id else id end
order by max(create_dte) desc; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-10T07:14:22.407

除非我误解了您的问题，否则您需要遍历任何消息的整个层次结构，您将需要一个递归查询来获取一个“根”消息 ID 的所有消息。一旦你有了它，它就是 create_dte 上的一个简单的 max()：

```
with msg_tree as (
    select id as root_id,
           id, 
           parent_id,
           create_dte
    from messages
    where parent_id = -1

    union all 

    select p.root_id,
           c.id,
           c.parent_id,
           c.create_dte
    from messages m 
        join msg_tree p on p.id = m.parent_id
)             
select root_id, 
       max(create_dte)
from msg_tree
group by root_id
order by 2; 
```

# sql-server-2008-r2 - 我该怎么做这样的选择

> ID：10083758
> 
> 赞同：0
> 
> 时间：2012-04-10T05:53:10.560
> 
> 标签：sql-server-2008-r2

```
 Declare @Result as varchar(max)='';
SELECT DISTINCT @Result =  dbo.MaterialTypes.Title + ', '+ @Result
FROM         dbo.TempId LEFT OUTER JOIN
                      dbo.ProductMaterials ON dbo.ProductMaterials.Product = dbo.TempId.Id LEFT OUTER JOIN
                      dbo.MaterialTypes ON dbo.ProductMaterials.MaterialType = dbo.MaterialTypes.Id LEFT OUTER JOIN
                      dbo.Products ON dbo.Products.Id = dbo.TempId.Id
WHERE     (dbo.Products.IsCollection = 1)

SELECT DISTINCT dbo.TempId.Id AS MaterialCollection_id, @Result
FROM         dbo.TempId LEFT OUTER JOIN
                      dbo.ProductMaterials ON dbo.ProductMaterials.Product = dbo.TempId.Id LEFT OUTER JOIN
                      dbo.MaterialTypes ON dbo.ProductMaterials.MaterialType = dbo.MaterialTypes.Id LEFT OUTER JOIN
                      dbo.Products ON dbo.Products.Id = dbo.TempId.Id
WHERE     (dbo.Products.IsCollection = 1) 
```

此查询有效，但我无法根据此查询创建视图。请帮忙！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-10T06:03:46.517

正如 murtaza 所说，您可以为此创建一个**存储过程**，或者如果您想将其用作视图，您可以创建一个**表值函数**，您可以使用其他视图和连接。

[http://msdn.microsoft.com/en-us/library/ms191165.aspx](http://msdn.microsoft.com/en-us/library/ms191165.aspx)

# vb.net - 获取 RichTextBox 中的插入符号位置

> ID：10083761
> 
> 赞同：0
> 
> 时间：2012-04-10T05:53:59.953
> 
> 标签：vb.net, richtextbox, caret

在 .NET 3.5 应用程序中，我想在`RichTextBox`控件中获得插入符号的位置。RTB 不是 XAML。此外，RTB 没有`CaretPosition`此处所述的属性：http: [//msdn.microsoft.com/en-us/library/system.windows.controls.richtextbox.caretposition.aspx](http://msdn.microsoft.com/en-us/library/system.windows.controls.richtextbox.caretposition.aspx) 我可以获得的最简单的方法是什么插入符号位置？

编辑：更具体地说，我想从插入符号所在行的开头找出插入符号的位置。我可以通过使用`GetLineFromCharIndex(rtb.SelectionStart)`但不是从行首的偏移量来获取行号。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-10T08:22:11.017

要从当前行的开头获取插入符号的位置，我将尝试以下操作：

```
Dim posInLine as Integer = rtb.SelectionStart - rtb.GetFirstCharIndexOfCurrentLine() 
```

# ubuntu - 无法运行 wkhtmltoimage，共享库缺少 libXrender.so.1

> ID：10083762
> 
> 赞同：1
> 
> 时间：2012-04-10T05:54:02.057
> 
> 标签：ubuntu, 64-bit, wkhtmltopdf, wkhtmltoimage

当我运行 i386 版本的 wkhtmlimage （如果重要的话，在 Ubuntu 64 位上），我收到以下错误，

> ./wkhtmltoimage-i386 [http://www.google.com](http://www.google.com) google.jpg ./wkhtmltoimage-i386：加载共享库时出错：libXrender.so.1：无法打开共享对象文件：没有这样的文件或目录

问题是我已经安装了 libxrender-dev 软件包，并且 libXrender.so.1 可以在 /usr/lib/libXrender.so.1 中找到。

我看不出有什么问题，所以如果有人之前遇到过这个问题，请告诉我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-10-01T03:01:48.173

权限问题。为您的 wkhtml 所在的文件夹或放置图像的位置分配更高的权限

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-09T01:33:08.257

可能是 wkhtmltoimage-i386 不是 64 位的？

# blackberry - 以编程方式增加或减少黑莓的音量

> ID：10083763
> 
> 赞同：0
> 
> 时间：2012-04-10T05:54:03.787
> 
> 标签：blackberry, java-me

在我的应用程序中，我在设备上播放视频，当我在播放视频时点击屏幕时，会在屏幕中央打开一个弹出窗口，该弹出屏幕上有一个音量按钮。当我单击该按钮时，音量应该会增加，并且在达到最大音量后应该会减小。我不知道如何在 BlackBerry 中以编程方式进行操作。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-10T06:17:22.420

> 查看有关视频播放的文章，在 [BlackBerry 设备应用程序](http://docs.blackberry.com/en/developers/deliverables/17968/Create_BB_app_that_plays_a_video_in_a_UI_field_739692_11.jsp)[的 UI 字段中播放视频](http://docs.blackberry.com/en/developers/deliverables/17968/Create_BB_app_that_plays_a_video_in_a_UI_field_739692_11.jsp) ，*第 8 节*，文章
> 介绍了如何控制音量。

要控制音量，您需要`javax.microedition.media.control.VolumeControl`从对象中获取`javax.microedition.media.Player`对象。

调用`Player.getControl()`，使用带有控件名称的 String 参数将返回控件对象。示例代码：

```
private VolumeControl getVolumeControl(Player player) 
{
    return (VolumeControl) player.getControl("VolumeControl");
} 
```

拥有`VolumeControl`对象后，您可以使用它`int setLevel(int level)`来设置音量级别。API 链接[在这里](http://www.blackberry.com/developers/docs/6.0.0api/javax/microedition/media/control/VolumeControl.html#setLevel%28int%29)。

[您可以查看BlackBerry Java Application - Fundamental Guilds](http://docs.blackberry.com/en/developers/deliverables/9091/JDE_5.0_FundamentalsGuide_Beta.pdf)的视频支持部分。

# c# - Random.Next() 给了我相同的值

> ID：10083764
> 
> 赞同：1
> 
> 时间：2012-04-10T05:54:25.890
> 
> 标签：c#, random

我们这里有这个类：

```
public static class Helper
{
    private static readonly Random Random = new Random();
    public static int GetRandomId()
    {
        return Random.Next(int.MinValue, 0);
    }
} 
```

在某些时候调用`.GetRandomId`给`Helper`我们相同的整数 - 为什么以及如何避免/解决这个问题？

注意：
该字段`Random`是一个单例实例，并且此行为不会在循环中发生（实际上，调用之间的时间甚至无关紧要）。

更具体地说：
在某些时候，随机机器只返回一个值，而不管调用的数量是多少！这与可能性、唯一性无关...... - 我认为我（通过这个实现）破坏了我的随机实例......怎么会？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-10T06:04:39.997

Next 方法返回一个介于 int.MinValue 和 0 之间的伪随机数。它不保证这些数字是唯一的。如果您调用 Random.Next(0,10) 11 次，您认为会发生什么？

为防止重复，您需要跟踪已发布的 ID。

或者，是否需要以随机顺序排列 ID？您可以只使用递增的 int 来生成 Id 吗？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-10T05:58:54.487

好吧，它是随机的，它不记得过去做了什么。

保留一份已经给出的数字列表，并在返回之前检查它是否还没有给出。

更多关于为什么它比你想象的更频繁地重复的细节可以在这里找到：[http ://csharpindepth.com/Articles/Chapter12/Random.aspx](http://csharpindepth.com/Articles/Chapter12/Random.aspx)

# css - CSS：溢出-y：滚动；溢出-x：可见

> ID：10083765
> 
> 赞同：17
> 
> 时间：2012-04-10T05:54:28.003
> 
> 标签：css, overflow

请参阅以下帖子以获取突出显示我的问题和潜在解决方案的图片：

[CSS 溢出-y：可见，溢出-x：滚动](https://stackoverflow.com/questions/5209545/css-overflow-yvisible-overflow-xscroll)

但是，当您实际移动滚动条时，此策略会中断。在建议的实现 ( `position: fixed;`) 中，工具提示显示在其预滚动位置的子 div 旁边。因此，当您将新的子 div 滚动到视图中时，工具提示开始从页面底部脱落。

请参阅此处以获取该错误的演示：http: [//jsfiddle.net/narcV/4/](http://jsfiddle.net/narcV/4/)

有什么想法可以让工具提示始终显示在子 div 旁边吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-11T18:19:41.123

我最终使用 javascript 实现了这个，使用了[这个问题](https://stackoverflow.com/questions/288699/get-the-position-of-a-div-span-tag)`getPos`中的函数。

最终产品如下所示：

```
var scrollPanel = ...;
var tooltip = ...;
function nodeHovered(e) {
   var hovered = e.srcElement;
   var pos = getPos(hovered);
   pos.x += hovered.offsetWidth;
   pos.y -= scrollPanel.scrollTop;
   tooltip.style.setProperty('left', pos.x);
   tooltip.style.setProperty('top', pos.y);
} 
```

基本上，我计算节点当前在页面上的显示位置（考虑到滚动条的位置），然后手动将工具提示放置在页面上的正确位置。

太糟糕了，没有优雅的/CSS方式来做到这一点，但至少这是可行的。

# c# - 如何通过c#获取工作表中某一列的数据

> ID：10083766
> 
> 赞同：0
> 
> 时间：2012-04-10T05:54:35.953
> 
> 标签：c#, winforms, excel, oledbdataadapter

我写了一个winform应用程序，可以打开一张excel文件并从中读取。我使用OleDbDataAdapter读取数据，然后将数据设置为数据表。但我的问题是，在这个数据表中，第一行数据用作列的名称，但是我想使用 excel 为每列定义的基本名称（我的意思是“ABC ... AA AB ...”和很快）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-10T07:45:02.363

看看这个答案[Importing Excel data into C# without first row become column names?](https://stackoverflow.com/questions/4435276/importing-excel-data-into-c-sharp-without-first-row-becoming-column-names)

看来您需要更改连接字符串`Extended Properties=\"Excel 8.0;HDR=No;IMEX=1;\"`并确保`HDR=No`已设置。

# python - python numpy排序特征值

> ID：10083772
> 
> 赞同：5
> 
> 时间：2012-04-10T05:54:43.223
> 
> 标签：python, numpy

我正在使用 linalg.eig(A) 来获取矩阵的特征值和特征向量。有没有一种简单的方法可以按顺序对这些特征值（和相关向量）进行排序？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-10T06:09:02.393

你想使用 NumPy`sort()`和`argsort()`函数。`argsort()`返回对数组进行排序所需的索引排列，因此如果您想按特征值大小排序（NumPy 数组的标准排序似乎是从最小到最大），您可以执行以下操作：

```
import numpy as np

A = np.asarray([[1,2,3],[4,5,6],[7,8,9]])
eig_vals, eig_vecs = np.linalg.eig(A)

eig_vals_sorted = np.sort(eig_vals)
eig_vecs_sorted = eig_vecs[:, eig_vals.argsort()]

# Alternatively, to avoid making new arrays
# do this:

sort_perm = eig_vals.argsort()

eig_vals.sort()     # <-- This sorts the list in place.
eig_vecs = eig_vecs[:, sort_perm] 
```

* * *

## 回答 #2

> 赞同：-3
> 
> 时间：2016-09-07T04:06:40.100

`np.linalg.eig`通常会返回复杂的值。您可能要考虑使用`np.sort_complex(eig_vals)`.

# python - Python 脚本与 Cron 作业

> ID：10083775
> 
> 赞同：2
> 
> 时间：2012-04-10T05:55:38.423
> 
> 标签：python, cron, archlinux

我需要运行一个**cron 作业**，以每周一早上准确地在“00:00:00”UTC 生成用户排名列表。有没有人有这方面的例子，这真的让我很头疼……我查看了“crontab -e”并立即迷失了方向。

```
Basics:
 - Run the script, eg: /srv/django/get_rankings.py
 - Run the script at "00:00:00" and "00:05:00" every Monday.
 - Run the same script the next Monday ... and repeat 
```

我在**Linux Arch**上，任何提醒都会很棒。

非常感谢，希望一切都好

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-10T06:03:46.517

crontab 输入类似，

```
00,05 0 * * 1 /srv/django/get_rankings.py 
```

每个月的每周一在 00.00 和 00.05 运行脚本

```
*     *     *   *    *        command to be executed
-     -     -   -    -
|     |     |   |    |
|     |     |   |    +----- day of week (0 - 6) (Sunday=0)
|     |     |   +------- month (1 - 12)
|     |     +--------- day of        month (1 - 31)
|     +----------- hour (0 - 23)
+------------- min (0 - 59) 
```

`*`在上面的值字段中表示该列的大括号中的所有合法值。value 列可以有一个`*`或一个由逗号分隔的元素列表。

一个元素可以是上面显示的范围内的数字，也可以是由连字符分隔的范围内的两个数字（表示包含范围）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-10T06:01:49.603

`crontab -e`，并插入这些：

```
0 0 * * 1 /srv/django/get_rankings.py
0 5 * * 1 /srv/django/get_rankings.py 
```

`0 0`是午夜；`0 5`是早上 05:00。`1`是星期一。两颗星的意思是“我不在乎日期”。[这](http://www.adminschoice.com/crontab-quick-reference)是一个很好的参考。

您可以通过说“0 点钟或 5 点钟”将所有内容放在一行中：

```
0,5 0 * * 1 /srv/django/get_rankings.py 
```

# android - 幻灯片展开动画

> ID：10083777
> 
> 赞同：1
> 
> 时间：2012-04-10T05:55:55.143
> 
> 标签：android, android-animation

我在 android 中有一个简单的列表视图列出结果标题。单击每个项目后，我希望它向下滑动展开并显示内容。有没有简单的方法在android中做到这一点？

任何帮助将不胜感激。提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-10T05:58:41.480

您可以实现[ExpandableListView](http://developer.android.com/reference/android/widget/ExpandableListView.html)

例子：

1.  [在android中实现ExpandableListView的步骤](http://about-android.blogspot.in/2010/04/steps-to-implement-expandablelistview.html)
2.  [Android 上的 ExpandableListView](http://techdroid.kbeanie.com/2010/09/expandablelistview-on-android.html)

# visual-studio-2010 - 在 T4 文本模板中使用 ObjectContext / DbContext

> ID：10083778
> 
> 赞同：-1
> 
> 时间：2012-04-10T05:56:00.517
> 
> 标签：visual-studio-2010, .net-4.0, entity-framework-4, entity-framework-4.1, t4

我一直在寻找有关如何在 T4 模板中使用实体框架 (ObjectContext/DbContext) 的示例。我怎样才能做到这一点？目前在我的 T4 中，我需要从数据库表中获取值来生成文件。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-10T07:48:29.450

T4 模板只是一些标记中的 C# 或 VB.NET 代码，因此您将以与在任何其他代码文件中完全相同的方式使用它。

# iphone - 可以提交以下问题的申请吗？

> ID：10083783
> 
> 赞同：0
> 
> 时间：2012-04-10T05:56:16.533
> 
> 标签：iphone, memory-management, app-store, submit, instruments

我已经开发了应用程序，一切都很好。同样，我还将内存占用量保持在非常低的水平。在应用程序运行期间不会显示泄漏。我测试了应用程序两个多小时，没有崩溃报告。但是当我当时检查仪器上的应用程序时，它显示我正在跟踪泄漏。我检查了我的应用程序，但没有这样的泄漏对象。“**即使我使用的应用程序持续 12 小时，它也没有崩溃或停止”。**

//这里是仪器的屏幕截图。

![在此处输入图像描述](../Images/899bedcdcfe0ea62a3d2716f24993372.png)

///>>>>>>在这里，我上传了最新的泄漏截图。它可以帮助人们了解泄漏在哪里。// 我认为是库文件泄漏（CoreFoundation）...请建议做什么..

![在此处输入图像描述](../Images/343946e0ce542668edf536b7399f424f.png)

请帮帮我，这真的把我搞砸了。

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-10T06:11:31.530

并非所有的“内存泄漏”都是实际泄漏。并且报告的一些问题可能是由 Apple 库本身引起的。通常，所有的单例、静态变量和一些 c 级别的变量都被“泄露”，但只有一次并且不被视为对内存的威胁。

NSString、NSArray 等基础类经过优化以处理繁重的工作量。并且一些对象可能会保留在内存中以供以后重用。如 @””。

因此，除非问题随着时间的推移而累积，否则就去做吧，按原样提交您的应用程序。如有必要，您仍然可以稍后修复它。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-10T06:15:33.290

嘿，使用“ **command+shift+b** ”分析您的代码并修复分析后出现的所有泄漏，将其提交到应用商店。我认为我们无法修复仪器显示的所有泄漏，所以最好使用**command+shift+b**。我认为我们应该只在收到内存警告和由于内存不足而崩溃时才使用仪器。

# javascript - 单击图像时播放声音文件

> ID：10083788
> 
> 赞同：8
> 
> 时间：2012-04-10T05:56:56.270
> 
> 标签：javascript, html, playback, background-music

我不是本地`HTML`程序员，所以请不要为这个简单的问题跳来跳去。

我有一张图片，我正在使用以下代码显示：

```
 <img name="track1" src="images/track1.png" width="180" height="180" border="0" id="track1" alt="" /> 
```

我希望在单击该图像时播放声音文件。我可以使图像成为按钮，但由于某种原因，这会弄乱页面的布局。

我可以使用任何播放器，但唯一的问题是我不想显示侵入性播放器。我只希望用户按下图像并听到音乐。如果他按下另一个图像，当前的音乐需要停止播放，并且必须播放不同的声音。

请帮忙！谢谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-10T07:10:51.257

首先你必须使用[jQuery](http://jquery.com/)。例如，您可以在您的页面中创建一些`<div>`具有某些 id 的内容；

`<div id="wrap">&nbsp;</div>`.

然后，在你的 JavaScript 中，当你想播放文件时，只需添加

```
$('#wrap').append('<embed id="embed_player" src="audio.wav" autostart="true" hidden="true"></embed>'); 
```

整个代码看起来像这样；

```
<script type="text/javascript" src="jquery-1.7.1.js"></script>
<script type="text/javascript">
$(document).ready( function() {
$('#track1').click(function(){
   $('#wrap').append('<embed id="embed_player" src="audio.wav" autostart="true" hidden="true"></embed>');
});
});
</script>
<img name="track1" src="images/track1.png" width="180" height="180" border="0" id="track1" alt="" />
<div id="wrap">&nbsp;</div> 
```

希望这可以帮助。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2015-09-26T18:24:07.400

@ [klaustopher的](https://stackoverflow.com/users/767272/klaustopher)[这个回答](https://stackoverflow.com/a/7620930/1459653)帮助了我。他写了：

> HTML5 有新的 -Tag 可以用来播放声音。它甚至有一个非常简单的 JavaScript 接口：
> 
> ```
>  <audio id="sound1" src="yoursound.mp3" preload="auto"></audio>
>   <button onclick="document.getElementById('sound1').play();">Play
>   it</button> 
> ```

以下是我如何实施他的建议，以便单击 Font Awesome 图标“fa-volume-up”（位于网页上“mule”之后）会播放“donkey2.mp3”声音（注意：mp3 不播放在所有浏览器中）：

```
<p>In short, you're treated like a whole person, instead of a rented mule. 
<audio id="sound1" src="assets/donkey2.mp3" preload="auto"></audio>
<a class="icon fa-volume-up" onclick="document.getElementById('sound1').play();"></a></p> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-11-05T04:44:38.223

```
<html>    
    <body>
        <div id="container">
             <img name="track1" src="images/track1.png" width="180" height="180" border="0" id="track1" alt="" class="play" />
        </div>
    </body>
</html> 
```

```
<script>
        $(document).ready(function() {
            var audioElement = document.createElement('audio');
            audioElement.setAttribute('src', 'audio.mp3');
            audioElement.setAttribute('autoplay', 'autoplay');
            //audioElement.load()

            $.get();

            audioElement.addEventListener("load", function() {
                audioElement.play();
            }, true);

            $('.play').click(function() {
                audioElement.play();
            });

            $('.pause').click(function() {
                audioElement.pause();
            });
        });
    </script> 
```

# android - Google Nexus One Macbook Pro 不匹配

> ID：10083792
> 
> 赞同：0
> 
> 时间：2012-04-10T05:57:31.057
> 
> 标签：android

我有一个烦人的问题，我的 android google nexus 无法使用 eclipse 从 macbook pro 运行我的应用程序。它说“找不到设备”。

最糟糕的是，它曾经在我使用 2.3.3 android 版本时大部分时间都可以工作，但现在我得到了最后一个版本（我认为是冰淇淋三明治 - 4.0.3），它仍然随机工作但 3 次超时一百个。

这是一个著名的问题，但到目前为止我还没有找到解决方案。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-10T07:02:04.003

我也有类似的问题，它似乎与 USB 集线器无法正常工作有关。尝试[重置您的 PRAM](http://support.apple.com/kb/ht1379)，看看是否有帮助。

# iphone - 为 Xcode 4.3 创建通用应用程序？

> ID：10083795
> 
> 赞同：0
> 
> 时间：2012-04-10T05:57:37.360
> 
> 标签：iphone, ios5, xcode4.2, ios-universal-app

我对使用 Xcode 4.3 为 iOS 设备创建通用应用程序有点困惑，更高版本（Xcode 4）为此具有单独的文件夹类，但是我们将如何使用最新版本的 Xcode 来实现呢？

提前致谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-10T06:00:14.893

只需在创建项目时选择设备系列作为通用设备，

观看此屏幕截图![在此处输入图像描述](../Images/8922a89e13b3d46c0a6062dcdedf1c40.png)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-10T06:07:33.300

与以前版本的 Xcode 4.* 相比，我认为 Xcode 4.3 中的这一点没有改变，但是尽管您有疑问，请参阅下面的答案。

如果要创建一个新项目，请在下图中`Universal App`选择 Universal ：`Device Family`

![在此处输入图像描述](../Images/8e52f7553b85f7398b316f0337d119a4.png)

或者，如果您尝试将现有的 iPhone 或 iPad 应用程序转换为通用应用程序`Devices`，则从`Target Settings`->`Summary`选项卡中选择通用，设置`Devices`为通用：

![在此处输入图像描述](../Images/2da3633450baba574e0aebb562bec0fa.png)

希望这对您有所帮助。

**编辑：**

让我们假设视图控制器名称是`YourViewController`

让我们假设 iPad XIB 的名称是`YourViewController-iPad.xib`并且 iPhone xib 名称是`YourViewController.xib`

```
YourViewController *yourViewController;
if (UI_USER_INTERFACE_IDIOM() == UIUserInterfaceIdiomPad) //This is iPad 
{
    // iPad-specific interface here
    yourViewController = [[YourViewController alloc] initWithNibName:@"YourViewController-iPad"  bundle:nil];
}
else // This is iPhone or iPod
{
    // iPhone and iPod touch interface here
    yourViewController = [[YourViewController alloc] initWithNibName:@"YourViewController"  bundle:nil];
} 
```

如果您需要更多帮助，请告诉我。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-11T08:09:19.770

那么你需要创建两个xib，一个用于iPhone，一个用于iPad，然后使用

```
if(UI_USER_INTERFACE_IDIOM() == UIUserInterfaceIdiomPad){ 
```

在这里打开你的 iPad xib

```
} else { 
```

在这里打开你的 iPhone xib

```
{ 
```

# sql - 在 SQL 中生成汇总表的有效方法。请看说明

> ID：10083796
> 
> 赞同：0
> 
> 时间：2012-04-10T05:57:43.903
> 
> 标签：sql, sql-server-2005

我对 sql 很陌生。我需要一些帮助来生成摘要信息

**成员表**

```
MonthID  | UserID  | TeamID
-----------------------------
  1      |  1       | 1
  1      |  2       | 1
  1      |  3       | 1
  1      |  4       | 1
  1      |  5       | 2
  1      |  6       | 2
  1      |  7       | 2 
```

和

**报告表**

```
ID* |  MonthID  | UserID  | IsSend
-----------------------------------
 1  |    1      |    2     | False
 2  |    1      |    3     | True
 3  |    1      |    5     | True 
```

我想生成一个像下面这样的总结

```
TeamID     |  Total Count  |  Send Count | Not Send Count
-----------------------------------------------------------
 1         |      4        |      1      |     3
 2         |      3        |      1      |     2 
```

> **总数** ：团队中的用户数
> 
> **发送计数** ：IsSend = True 的团队中的总用户
> 
> **未发送计数**：总计数 - 发送计数

什么是有效的方法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-10T06:02:32.177

试试这个：

```
select mt.teamId, count(*) totalCount,
    count(case when rt.isSend = 'True' then 1 end) sendCount,
    count(case when rt.isSend != 'True' then 1 end) notSendCount
from memberTable mt
join reportTable rt on mt.userId = rt.userId
group by mt.teamId 
```

请注意，您的预期结果并不反映您的数据。根据您的数据得出的结果应该是：

```
+--------+------------+------------+--------------+
| 团队 | 总数 | 发送计数 | 未发送计数 |
+--------+------------+------------+--------------+
| 1 | 2 | 1 | 1 |
| 2 | 1 | 1 | 0 |
+--------+------------+------------+--------------+

```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-10T06:06:18.210

如果没有桌子来尝试这个，我无法检查这是否可行，但这应该能让你大部分时间：

```
SELECT TeamID, count(userID) as "Total count", Sum(IsSend) as "Send Count" FROM MemberTable JOIN ReportTable ON UserID GROUP BY TeamID; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-10T06:16:47.133

```
select MT.TeamID,
       count(distinct MT.UserID) as "Total Count",
       count(distinct case when RT.IsSend = 1 then MT.UserID end) as "Send Count",
       count(distinct MT.UserID) - count(distinct case when RT.IsSend = 1 then MT.UserID end) as "Not Send Count"
from MemberTable as MT
  left outer join ReportTable as RT
    on MT.MonthID = RT.MonthID and
       MT.UserID = RT.UserID
group by MT.TeamID 
```

结果：

```
TeamID      Total Count Send Count  Not Send Count
----------- ----------- ----------- --------------
1           4           1           3
2           3           1           2 
```

在这里尝试：[https ://data.stackexchange.com/stackoverflow/query/66347](https://data.stackexchange.com/stackoverflow/query/66347)

# css - 使用 jquery mobile 进行 youtube 移动式导航

> ID：10083805
> 
> 赞同：0
> 
> 时间：2012-04-10T05:58:46.267
> 
> 标签：css, jquery-mobile, navigation

我目前使用jquery mobile并希望在右侧有2个图标的youtube mobile实现顶部导航（下图）

![在此处输入图像描述](../Images/f9f37991a3c06084ab2d5f699e13ff3a.png)

所以我尝试使用下面的代码，但只出现了一个图标。

```
<h1>Youtube Mobile</h1>
<a href="index.html" data-icon="grid" data-iconpos="notext" data-direction="reverse" class="ui-btn-right jqm-home">Menu</a>
<a href="search.html" data-icon="search" data-iconpos="notext" data-direction="reverse" class="ui-btn-right jqm-home">Search</a> 
```

任何人都可以帮我解决这个问题吗？谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-10T08:09:22.310

两个按钮都在那里。他们只是被绝对定位在另一个之上。将类“网格”添加到网格按钮。然后使用`.grid.ui-btn-right{right:30px;}`将您的网格定位在搜索按钮的左侧。这是一个演示这个[http://jsfiddle.net/codaniel/JMKss/1/的小提琴](http://jsfiddle.net/codaniel/JMKss/1/)

# c++ - netbeans ide 7.1.1 中是否支持 c++11

> ID：10083809
> 
> 赞同：0
> 
> 时间：2012-04-10T05:59:07.703
> 
> 标签：c++, multithreading, netbeans, scheduler

我需要问一下 netbeans 7.1.1 中是否支持 c++11（将库用作线程，chrono）。

我有这个代码： -

```
#include<thread>
#include<chrono>
while(true)
{
std::this_thread::sleep_for(std::chrono::seconds(1));   <- there is an error at 
"this_thread" 

test4();
} 
```

实际上我正在做一些在每分钟之后调用这个函数的东西（我的意思是当系统时间改变一分钟时）

谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-10T06:50:36.680

三件事（编译器、IDE 和操作系统）在这里都很重要。

1) 编译器：GCC 4.6 已经有很好的 C++11 支持并且有`<thread>`和`<chrono>`头文件。但是你必须用`-std=c++0x`. 如果您使用 IDE，则必须将其配置为生成这样的 make（因此请检查编译器选项）

2) 操作系统也很重要：`<thread>`标头本质上是一组围绕 POSIX 概念的 ptherad、mutex 和 condition_variable 的包装器。在 Windows 上，condition_variable 仅从 0x600 (Vista) 本地存在，直到 0x505 (XP) 您必须处理本地“同步事件对象”，它们可以等效，但具有不同的语义（`boost::thread`实现适配器，但 GCC**只是跳过整个线程实现**：因此...如果您正在为更多操作系统编写代码，请检查您是否正在使用所有操作系统上都存在的库实现！）

3) IDE 也有它的重要性：编辑器解析文本和显示完成信息的方式，以及“键入时语法错误”等不取决于编译器，而是取决于他们使用的解析器。特别是，当 GCC 配置为 -std=c++0X 时，它假定`__GXX_EXPERIMENTAL_CXX0X__`符号的隐式定义，这不是 IDE 自动假定的（错误地解析标头）您还必须配置 IDE 以考虑`__GXX_EXPERIMENTAL_CXX0X__`解析时符号为“已定义”。

您的问题很可能与第 3 点有关

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-04-10T06:03:53.847

您必须询问您的编译器是否支持 C++11，而不是您的 IDE。

好吧，对于 g++，它支持 4.7 版本中的大部分 c++11 功能。

# php - 如何使用 WAMP 使应用程序在另一台计算机上看起来相同

> ID：10083810
> 
> 赞同：0
> 
> 时间：2012-04-10T05:59:09.693
> 
> 标签：php, css, wamp, wampserver, remote-server

我在 wamp 服务器上部署了一个 php 应用程序。它在同一台机器上看起来不错，但是当我尝试从另一台机器上访问它时，外观和感觉看起来很混乱。以前它甚至无法访问，但我通过更改允许、拒绝权限以某种方式使其工作。但是现在 css 在另一台机器上有点不一样。
请提出建议。

谢谢你
桑迪普

**知道了！**
在应用程序的 config.php 文件中，我将主机设置为 localhost，因为远程机器无法找到 css 文件。
感谢@nomaD 和@tcole 的帮助

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-10T06:04:59.833

我建议使用[Wireshark](http://www.wireshark.org/)或[Charles](http://www.charlesproxy.com/)之类的东西来查找两台计算机上 HTTP 请求/响应的差异，以查看问题出在哪里，这可能是权限问题或元素`src`属性的问题`<link />`。你可能还想要查看浏览器的控制台日志（在 Chrome 的 Inspector 或 Firebug 等中）

# c# - 如何获取年份信息作为字符串值？

> ID：10083811
> 
> 赞同：-1
> 
> 时间：2012-04-10T05:59:09.820
> 
> 标签：c#

我有如下内容，我只想选择年份信息作为字符串值。

给定这个输入字符串：

> 例如，主要问题之一是假设观察者动力学比状态反馈控制器更快，这将导致数值困难（Astrom 和 Wittenmark，1997）。更重要的是，当过程约束被激活时，闭环控制性能的显着恶化将清楚地看到，因为一种非线性在控制系统中占主导地位（Tenny、Rawlings 和 Wright，2004 年）。因此，有必要开发能够解决上述问题的方法。

我想提取`1997`和`2004`.

笔记：

1.  年份信息仅以四位数字出现
2.  很可能它以句号（句号）或右括号结束
3.  它可能出现在段落内的任何地方

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-10T06:06:44.967

```
var years = Regex.Matches(input, @"\D(\d{4})\D")
    .Cast<Match>()
    .Select(m => m.Groups[1].Value)
    .ToArray(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-10T06:05:19.307

好吧，我建议您使用以下正则表达式。

```
 ((19|20)\d{2}) 
```

或者

```
 \b((19|20)\d{2})\b 
```

在 .NET 中还支持命名组，因此以下也是匹配模式的便捷方法。

```
\b(?<Years>(19|20)\d{2})\b 
```

注意：此正则表达式搜索四位数字，前两位必须是`19`或`20`。如果可以有更早的年份，您可以包括它们

```
\b(?<Years>(17|18|19|20)\d{2})\b 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-10T06:06:58.970

你的岁月真的有限吗？意思是，没有什么比 1900 年更早的了？还是1800？这将使您更加精确。

```
Regex regex = new Regex(@" (19|20)\d\d\))") 

MatchCollection years = regex.Matches(your_input); 
```

我*认为*正则表达式将匹配 1900 年代或 2000 年代中的任何日期，这些日期前面有空格，并以 ) 结尾。

然后，您可以遍历 MatchCollection 以获取所有匹配的实例。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-10T06:07:25.130

试试这个`\d\d\d\d[\)\]\.]`正则表达式。

`)`这将搜索以or`]`或结尾的所有 4 位数字`.`。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-04-10T06:11:22.347

您可以使用正则表达式。类似的东西`^[12][0-9]{3}$` 会验证你的年份。

```
Match match = Regex.Match(input, "^[12][0-9]{3}$"); 
```

# windows-phone-7 - 截取windows phone 7.5的截图并通过TCP发送

> ID：10083818
> 
> 赞同：0
> 
> 时间：2012-04-10T05:59:48.527
> 
> 标签：windows-phone-7, windows-phone-7.1

我被困在如何截取我的 Windows Phone 7.5 的屏幕截图并通过 TCP 发送它。我没有做套接字程序和 I/O 的经验，我正在通过互联网上的教程做我能做的事情。这就是我所做的。

从下面的代码中，我被困在如何通过 TCP 发送 writeableBitMap 编码为在 WP7.5 背景中定期运行的 Jpeg，从而桌面上的程序将其作为 jpeg 图像接收，因此它可以显示创建一个窗口手机到桌面的流媒体效果。

我的 windows phone 7.5 应用程序的主页使用了一个库，该库是我从教程中创建的，用于处理套接字连接。

```
 using System;
using System.Collections.Generic;
using System.Linq;
using System.Net;
using System.Windows;
using System.Windows.Controls;
using System.Windows.Documents;
using System.Windows.Input;
using System.Windows.Media.Imaging;
using System.Windows.Media.Animation;
using System.Windows.Shapes;
using Microsoft.Phone.Controls;
using Microsoft.Phone;
using System.Windows.Media;
using System.IO;

namespace helloworld
{
    public partial class MainPage : PhoneApplicationPage
    {
        // Constructor
        SocketLibrary.socketLib sl = new SocketLibrary.socketLib();
        private string hostIP = "127.0.0.1";
        public MainPage()
        {
            InitializeComponent();
        }

        private void btnConnect_Click(object sender, RoutedEventArgs e)
        {
            bool retVal;

            retVal = sl.EstablishTCPConnection(hostIP);

            WriteableBitmap bmpCurrentScreenImage = new WriteableBitmap((int)this.ActualWidth, (int)this.ActualHeight);

            var ms = new MemoryStream();
            // Send the picture.
            bmpCurrentScreenImage.SaveJpeg(ms, bmpCurrentScreenImage.PixelWidth, bmpCurrentScreenImage.PixelHeight, 0, 90);
            ms.Seek(0, SeekOrigin.Begin);
            retVal = sl.Send(ms);

            sl.CloseSocket();
        }

    }
} 
```

套接字库

```
 namespace SocketLibrary
{
    public class socketLib
    {
        Socket s = null;
        static ManualResetEvent done = new ManualResetEvent(false);
        private Int16 portNo = 3334;

        public socketLib()
        {

        }
        public bool EstablishTCPConnection(string host)
        {
            s = new Socket(AddressFamily.InterNetwork, SocketType.Stream,
            ProtocolType.Tcp);
            SocketAsyncEventArgs socketEventArg = new SocketAsyncEventArgs();
            socketEventArg.RemoteEndPoint = new DnsEndPoint(host, portNo);
            socketEventArg.Completed += new
            EventHandler<SocketAsyncEventArgs>(delegate(object o, SocketAsyncEventArgs e)
            {
                done.Set();
            });
            done.Reset();
            s.ConnectAsync(socketEventArg);
            return done.WaitOne(10000);
        }

        public bool Send(MemoryStream data)
        {
            byte[] msData = data.ToArray();
            if (s != null)
            {
                SocketAsyncEventArgs socketEventArg = new SocketAsyncEventArgs();
                socketEventArg.RemoteEndPoint = s.RemoteEndPoint;
                socketEventArg.UserToken = null;

                socketEventArg.Completed += new
                EventHandler<SocketAsyncEventArgs>(delegate(object o, SocketAsyncEventArgs e)
                {
                    done.Set();
                });

                socketEventArg.SetBuffer(msData, 0, msData.Length);
                done.Reset();
                s.SendAsync(socketEventArg);
                return done.WaitOne(10000);
            }
            return false;
        }

        public void CloseSocket()
        {
            if (s != null)
            {
                s.Close();
            }
        }
    }

} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-10T06:16:10.970

检查这个

[http://www.charlespetzold.com/blog/2011/05/Windows-Phone-Screen-Shots.html](http://www.charlespetzold.com/blog/2011/05/Windows-Phone-Screen-Shots.html)

[http://blog.galasoft.ch/archive/2010/12/28/taking-a-screenshot-from-within-a-silverlight-wp7-application.aspx](http://blog.galasoft.ch/archive/2010/12/28/taking-a-screenshot-from-within-a-silverlight-wp7-application.aspx)

# c# - 如何将 .NET 4.0 图表控件添加到 XBAP/WPF 应用程序

> ID：10083819
> 
> 赞同：0
> 
> 时间：2012-04-10T05:59:57.860
> 
> 标签：c#, wpf, charts, xbap

有没有办法在 WPF 应用程序中添加 .NET 4.0 图表控件？

我读了这个线程： [WPF 图表控件](https://stackoverflow.com/questions/577278/wpf-chart-controls)

但是从上面的线程中，我无法收集 WPF 工具包是否稳定。

但我想知道这方面是否还有其他意见？请帮忙。谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-10T16:56:15.633

我相信 WPF Toolkit 已经被微软抛弃了，最新的版本充满了 bug。您链接到的线程似乎非常明确。

# graphviz - 是否有任何使用 graphviz c++ 库的开源项目？

> ID：10083822
> 
> 赞同：0
> 
> 时间：2012-04-10T06:00:26.013
> 
> 标签：graphviz

我已经下载了一个使用 graphviz c++ 库的开源项目，它可以可视化点文件或从点文件中绘制图表。但不幸的是，我把它从我的电脑上删除了。我真的很期待找到它，因为它正是我所需要的。记得有GVGraph、GVNode、GVEdge等做得很好的封装类。谁能告诉我它在哪里？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-10T09:01:37.593

也许您可以在[graphviz 的资源页面上](http://www.graphviz.org/Resources.php)找到它。

# ajax - struts2中的ajax结果div刷新

> ID：10083825
> 
> 赞同：0
> 
> 时间：2012-04-10T06:00:48.280
> 
> 标签：ajax, jquery, struts2

我有一个用例

```
<html>
<head>
    <s:head />
    <sj:head jqueryui="true" />
     <script type="text/javascript">
              $.subscribe('hideTarget', function(event, data) {
                $('#'+event.originalEvent.targets).hide("blind");
                });
     </script>
</head>

<body>
    <div align="left" >
        <div class="demo" align="center"><a href="#" id="button">Run Effect</a></div>
        <div id="effect" style="display:none;">
            Upload Photos Here
            <s:form action="AjaxTest" method="post" theme="xhtml" enctype="multipart/form-data" >
                <s:file name="userImage" label="User Image" />
                <sj:submit targets="result" effect="blind" effectMode="show" onEffectCompleteTopics="hideTarget" value="Upload" button="true" />
            </s:form>
            <br/>
            <img id="indicator" src="progressbar.gif" style="display:none" alt="loading"/> 
        </div>
        <sj:div  effect="pulsate" effectDuration="1500" onEffectCompleteTopics="hideTarget" cssClass="welcome" id="result"></sj:div>
    </div>
    <!-- End demo -->
</body> 
```

如您所见，我正在使用 ajax 调用上传单个文件。当您单击“运行效果”链接时，一个 div 将在该文件标签中向下切换，选择文件，上传它，它将显示成功上传的消息，并在隐藏该成功消息后显示该消息。 **直到它工作正常但我的问题是当你想上传另一个文件时它会显示文件标签你也可以选择但是当你提交表单时它没有显示成功的消息但是文件被上传到服务器和文件标签中以前上传的文件名是他们的**

**注意：我的要求是每次用户使用 ajax 调用提交表单时都应该显示成功上传的消息**

我的成功.jsp 是

```
<body>
   <s:if test="hasActionMessages()">
       <s:actionmessage/>
    </s:if>
    <s:if test="hasActionErrors()">
            <s:actionerror/>
    </s:if>
</body> 
```

Struts.xml

```
 <action name="AjaxTest" class="AjaxCallAction">
        <result name="success">/success.jsp</result>
    </action> 
```

就像下面这个 [http://www.weinfreund.de/struts2-jquery-showcase/index.action的链接](http://www.weinfreund.de/struts2-jquery-showcase/index.action)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-12-14T01:03:04.697

不要使用 id="result" in ，使用 name="result" 并使用 formIds in

# c++ - int 到字符串，char* itoa

> ID：10083830
> 
> 赞同：0
> 
> 时间：2012-04-10T06:01:16.700
> 
> 标签：c++, string, char, int

试图让 'sval' 包含数组索引 0-499 的字符串“$1” - “$500”。在下面的代码中，但是 itoa 在下面的代码中给了我奇怪的字符串：

```
 #include<iostream>
    #include <stdio.h>
    #include <stdlib.h>
    using namespace std;

    typedef struct data_t {
        int ival;
        char *sval;
    } data_t;

    void f1(data_t **d);
    int main()
    {
    data_t *d;

        d=static_cast<data_t*>(malloc(500));  //is this even needed?
        d = new data_t[500];
        f1(&d);
    }

    /* code for function f1 to fill in array begins */
    void f1(data_t **d)
    {
        int i;
        char str[5];
        for (int i=0; i<500; i++)
        {
            (*d)[i].ival=i+1;
            itoa (i,str,10);
            (*d)[i].sval= str;
        }
    } 
```

itoa 似乎也被贬值了，但这就是我用谷歌搜索 int 到字符串时得到的

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-10T06:06:55.810

不需要`ltoa`，`cout`应该没问题。为什么需要将数字及其字符串表示形式保留在数组中？当你`cout << 10`在输出中得到“10”时，你不需要任何你自己的转换

另一方面，您`ltoa`没有为字符串分配任何内存，您可能已经注意到这并不健康。您使用一个局部变量（对于所有 500 个数组成员都相同），您在退出函数后尝试访问该变量 - 一个很大的禁忌，它的未定义行为。

和：

```
 d=static_cast<data_t*>(malloc(500));  //is this even needed?
    d = new data_t[500]; 
```

不。不仅不需要 - 根本不应该在那里！在 C++ 中 - 使用`new`and `delete`， never `malloc`，这是一个 C 函数。

# sql - Sql 选择分组依据和字符串连接

> ID：10083836
> 
> 赞同：8
> 
> 时间：2012-04-10T06:01:58.637
> 
> 标签：sql, sql-server, sql-server-2008, tsql

我有一张这样的桌子

```
ID  NAME    Amount
1   cal     100
2   cal     200
3   cal     300
4   cal     400
1   ser     500
2   ser     600
5   ser     700 
```

我想写一个选择查询，这样我就能得到这样的结果

```
ID  NAME            Amount
1   cal and ser     600
2   cal and ser     800
3   cal             300
4   cal             400
5   ser             700 
```

在这里，我需要按 id 和金额总和进行分组，并连接具有相同 id 和不同名称的字符串名称

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-04-10T06:13:16.770

这将适用于 sql-server 2008

```
SELECT p1.ID,
       ( SELECT NAME + ' and ' 
           FROM YourTable  p2
          WHERE p2.ID = p1.ID
          ORDER BY NAME
            FOR XML PATH('') ) AS Name,
        sum(Amount)
      FROM YourTable p1
      GROUP BY ID ; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-30T02:54:19.817

```
SELECT p1.ID,  
   STUFF(( SELECT ' and ' + NAME  
       FROM YourTable  p2  
      WHERE p2.ID = p1.ID  
      ORDER BY NAME  
        FOR XML PATH('') )  
    , 1, 5, '' ) AS Name,  
    sum(Amount)  
  FROM YourTable p1  
  GROUP BY ID 
```

从维克拉姆的回答中，我为我的结果
添加了[一些东西](http://msdn.microsoft.com/en-us/library/ms188043(v=sql.105).aspx)。

# android - 如何在 TextView 中显示查询

> ID：10083837
> 
> 赞同：0
> 
> 时间：2012-04-10T06:02:07.123
> 
> 标签：android, sqlite

我有一种显示查询的方法：

```
public Cursor getQuery() {

    String Fav="SELECT score, difficulty, date FROM score LIMIT 15'";
    Cursor c=db.rawQuery(Fav,null);
    return c;
    } 
```

我将如何在我的 OnCreate() 的文本视图中使用它？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-10T06:12:07.690

我假设，您想显示通过查询获得的结果数据。

现在，要将数据显示到 TextView 中，您必须编写代码来**遍历 cursor**。

例如：

```
String strData = "";
if (c!= null) {
    if (c.moveToFirst()) {
        do {
         strData += cursor.getString(Fieldindex));            
        } while (c.moveToNext());
    }
}

textview.setText(strData); 
```

# c++ - 将 NON-POD 类型传递给 Variadic 函数是未定义的行为吗？

> ID：10083844
> 
> 赞同：15
> 
> 时间：2012-04-10T06:02:49.180
> 
> 标签：c++, c, variadic-functions

[在这份文件](http://www.viva64.com/en/b/0073/print/)中，作者说

> 只有 POD 类型可以作为省略号“...”的参数，而 std::string 不是 POD 类型。

我将其理解为`Passing NON-POD type to Variadic function is undefined behavior`. 这样对吗？
不过，他是在说 C/C++ 标准吗？我试图在 n3242 C++ 规范中找到它。但是找不到。

我想知道我的理解是正确的，这是一个标准。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-04-10T06:10:09.660

它在 C++11 5.2.2/7 中指定：

> 传递具有非平凡复制构造函数、非平凡移动构造函数或非平凡析构函数的类类型的潜在评估参数，没有相应的参数，由实现定义的语义有条件地支持。

因此，是否支持它取决于每个编译器；可移植代码不能依赖于任何实现定义的行为。在旧标准中，它只是未定义。

# c - 将所有进程列表存储到具有 UID 的文件中

> ID：10083847
> 
> 赞同：0
> 
> 时间：2012-04-10T06:03:23.503
> 
> 标签：c

我的朋友有一个以下任务，任何人都可以在“C”中指导如何做到这一点，只要指导就足够了。

编写一个程序，将所有进程列表存储到一个文件中，并使用 UID 对所有进程进行排序。

例如：

```
./a.out processidlist.txt 
```

它必须将信息保存到 processidlist.txt。

在这个 processidlist.txt 中，它必须使用 UID 对进程进行排序。

他尝试了以下

```
ps –A –o UID > outputfile 
```

谢谢

```
#include <stdio.h>
#include <stdlib.h>

int main( int argc, char *argv[] )
{
  FILE *fp1, *fp2;
  FILE *fp;
  int status;
  char path[1035];

   fp1 = fopen( argv[1], "w" );
   if ( ! fp1 )
   {
      printf("Error opening file %s\n", argv[1]);
   }

  /* Open the command for reading. */
  fp = popen("ps -Af | sort -k1", "r");
  if (fp == NULL) {
    printf("Failed to run command\n" );
    exit;
  }

  /* Read the output a line at a time - output it. */
  while (fgets(path, sizeof(path)-1, fp) != NULL) {
    printf("%s", path);
    fputs( path, fp1 );
  }

  /* close */
  pclose(fp);
  fclose(fp1);
  return 0;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-10T06:20:07.050

这些线上的东西应该可以工作

```
system("ps -Af | sort -k1");

A indicates all processes
f generates full listing
k denotes sort by column
1 denotes first column which is UID of the processes 
```

如果你不想要烦人的标题

```
UID        PID  PPID  C STIME TTY          TIME CMD 
```

连同您的进程列表，然后用于`sed`删除第一行`ps`输出

```
system("ps -Af | sed "1 d" | sort -k1"); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-10T06:29:39.720

您需要提供问题的上下文。即试图教你的家庭作业是什么？

是否有您一直在学习的特定 API 来检查所有流程？（因此人们可以明智地假设您应该使用它）。

如果没有，类似 Pavan 的`system()`电话可能会起作用。（但是，如果它是由 1 行 shell 脚本解决的，为什么要你写一个 C 程序呢？）

另外：关于问题的评论中的“ps” - 它专门说写一个程序，那么为什么“他”认为 ps 命令行就足够了？

# sql - SQL 按数据分组

> ID：10083849
> 
> 赞同：0
> 
> 时间：2012-04-10T06:03:27.577
> 
> 标签：sql

再会，

我有一个返回以下数据的 sql 查询：

```
EmployeeID...Employee
555..........John Doe
666..........Jane Doe
777..........Bob Smith
888..........Jane Smith
999..........Fred Jones
000..........Freda Jones 
```

我希望我的查询按三个项目分组：

```
Item.........EmployeeId........Employee
1............555...............John Doe
1............666...............Jane Doe
1............777...............Bob Smith
2............888...............Jane Smith
2............999...............Fred Jones
2............000...............Freda Jones 
```

换句话说，对于每条超过 3 条记录的记录，我想每 3 条记录将 Item 增加一个。

我确信我可以使用某种行插入到表中并跟踪插入到表中的行数。但我想看看我是否可以在 SQL 本身中实现这一点。

这可能吗？

TIA,

科森

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-10T06:32:08.293

好吧，这应该适用于大多数 DBMS：

```
select floor((count(*) + 2) / 3) item, t1.employeeId, t1.employee
from t t1
join t t2 on t1.employeeId >= t2.employeeId
group by t1.employeeId, t1.employee 
order by t1.employeeId 
```

[你可以在这里](http://sqlfiddle.com/#!1/40c39/1)玩小提琴。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-10T13:56:10.243

如果您的数据库的 SQL 品种支持排名功能，您可以尝试这样的事情：

```
SELECT
  FLOOR((ROW_NUMBER() OVER (ORDER BY EmployeeID) + 2) / 3) AS Item,
  EmployeeID,
  Employee
FROM Employees
ORDER BY EmployeeID 
```

当两个操作数都是整数时，一些数据库系统会自动执行整数除法，而其他数据库系统则支持专用运算符（如`DIV`）来进行整数除法而不是`/`。当然，在这两种情况下`FLOOR()`都是不必要的。

# java - 通知管理器在android中的倒数计时器类中不起作用

> ID：10083857
> 
> 赞同：0
> 
> 时间：2012-04-10T06:04:12.990
> 
> 标签：java, android, notifications

我正在使用倒数计时器类，并且在该类的 onfinish() 状态下，我正在创建一个通知。这是 Onfinish 方法的代码：

```
public void onFinish() {
            notificate();
            Log.i("Aler Resume", "Finished");
            remtime.setText("0 : 00 : 00");
            textCondition.setText(getString(R.string.BuddyAlertExpired));
              } 
```

在我写的 notify() 方法中：

```
private void notificate() {
        NotificationManager notifManager = (NotificationManager) getSystemService(NOTIFICATION_SERVICE);  

        Notification note = new Notification(R.drawable.ic_launcher, "New E-mail", System.currentTimeMillis());  

         PendingIntent intent = PendingIntent.getActivity(this, 0, new Intent(this, AlertResume.class), 0); 
         note.setLatestEventInfo(this, "Buddy Alert", getString(R.string.BuddyAlertExpired), intent); 
         note.defaults= Notification.DEFAULT_VIBRATE;
         note.defaults=Notification.DEFAULT_SOUND;
         notifManager.notify(NOTIF_ID, note); 

    } 
```

当我保持我的应用程序打开时它工作正常。但是当我从应用程序返回时，正在调用 onfinish 方法，我可以正确查看日志，但 notofication 方法不起作用并且不显示任何通知。有什么错误吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-10T06:20:54.323

当您离开应用程序时，Android 可能会认为您运行倒计时计时器的进程是垃圾邮件或额外邮件，而不是有意的。并完成它......（就像它认为你忘记关闭让我关闭）

所以最好将 AlarmManager 用于上述内容，例如设置 PendingIntent - 通知，在您启动倒数计时器的时间还使用警报管理器设置带有未决意图的通知。

```
 nm = (NotificationManager) context.getSystemService(Context.NOTIFICATION_SERVICE);
        Notification notification = new Notification(R.drawable.icon, "Test", System.currentTimeMillis());

        Intent intentTL = new Intent(context, MainActivity.class);
        notification.setLatestEventInfo(context, "Test", "Do something!",
                PendingIntent.getActivity(context, 0, intentTL,
                PendingIntent.FLAG_CANCEL_CURRENT));
        notification.flags = Notification.DEFAULT_LIGHTS | Notification.FLAG_AUTO_CANCEL;
        nm.notify(1, notification);

        AlarmManager am = (AlarmManager) context.getSystemService(Context.ALARM_SERVICE);
        PendingIntent pendingIntent = PendingIntent.getBroadcast(context, 0,
                intent, PendingIntent.FLAG_CANCEL_CURRENT);
        am.set(AlarmManager.RTC_WAKEUP, System.currentTimeMillis() + 10000, pendingIntent); 
```

# php - 在不同的表中创建搜索引擎

> ID：10083858
> 
> 赞同：-1
> 
> 时间：2012-04-10T06:04:17.000
> 
> 标签：php, mysql

您对我有什么建议，用于在搜索引擎的不同表格中进行搜索？

每个表都不同，列不同，行数不同。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-10T06:06:50.010

在相应的表上创建触发器以将不同表中的内容提取到单个表中。在该表上应用全文搜索索引。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-10T06:16:33.933

确保`FULL-TEXT`在这种情况下您已经考虑过索引机制。 表类型`FULL-TEXT`支持索引。`MyISAM``ENGINE`

`Full-text`使用 MATCH() ... AGAINST 语法执行搜索。MATCH() 采用逗号分隔的列表来命名要搜索的列。AGAINST 接受一个要搜索的字符串和一个可选的修饰符，指示要执行的搜索类型。搜索字符串必须是文字字符串，而不是变量或列名。全文搜索分为三种类型：

*   自然语言搜索将搜索字符串解释为自然人类语言中的短语（自由文本中的短语）。没有特殊的运算符。停用词列表适用。此外，出现在 50% 或更多行中的单词被认为是常见的并且不匹配。

    如果给出了 IN NATURAL LANGUAGE MODE 修饰符或没有给出修饰符，则全文搜索是自然语言搜索。

*   布尔搜索使用特殊查询语言的规则解释搜索字符串。该字符串包含要搜索的单词。它还可以包含指定要求的运算符，例如匹配行中必须存在或不存在单词，或者它的权重应该高于或低于通常。诸如“some”或“then”之类的常用词是停用词，如果出现在搜索字符串中，则不匹配。IN BOOLEAN MODE 修饰符指定布尔搜索。有关更多信息，请参阅第 12.9.2 节，“布尔全文搜索”。

*   查询扩展搜索是对自然语言搜索的修改。搜索字符串用于执行自然语言搜索。然后将搜索返回的最相关行中的单词添加到搜索字符串中，然后再次进行搜索。查询返回第二次搜索的行。

有关更多信息，请参阅：

[http://devzone.zend.com/26/using-mysql-full-text-searching/](http://devzone.zend.com/26/using-mysql-full-text-searching/)

[http://www.iamcal.com/publish/articles/php/search/](http://www.iamcal.com/publish/articles/php/search/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-10T06:14:11.767

创建您的函数，该函数将动态输入列名和表名。出于搜索目的，您必须知道哪个列与哪个表相关，然后始终将这 2 个参数 1) table_name 2) column_names 数组传递给它。使用这些参数适合的条件创建 sql 查询，并动态开发查询。然后查询将返回结果。

# javascript - 防止 Webapp 中的其他触摸

> ID：10083859
> 
> 赞同：3
> 
> 时间：2012-04-10T06:04:22.910
> 
> 标签：javascript, jquery, ipad, html, web-applications

我的 webapp 上的刷卡代码有问题。使用单根手指，页面之间的滑动完美无缺，但是，当我用第二根手指触摸并与第一根手指同时移动时，应用程序会混淆要听哪个手指。这通常会导致事情变得非常错误。我如何才能确保应用程序尊重的唯一触摸事件是由第一根手指触摸触发的事件？

我的 swipe 插件的代码如下所示：

```
(function($) {

        $.fn.movement = function(options) {

    var defaults = {
        threshold: { x: 150, y: 15 },
        mouseUp: function() {},
        mouseMove: function() { },
        mouseDown: function() { },
        scrollStart: function() { },
        scrollStop: function() { },
        scrollMove: function() { }
    };

    var options = $.extend(defaults, options);

    if (!this) return false;

    //alert(this.attr("id"));
    return this.each(function() {

        var me = $(this)

        // Private variables for each element
        var originalCoord = { x: 0, y: 0 }
        var lastCoord = {x: 0, y: 0 }
        var finalCoord = { x: 0, y: 0 }
        var velocity = { x: 0, y: 0 }
       function touchMove(event) {
                event.preventDefault();
                finalCoord.x = event.targetTouches[0].pageX // Updated X,Y coordinates
                finalCoord.y = event.targetTouches[0].pageY
                defaults.scrollMove(finalCoord);
                defaults.mouseMove(finalCoord,activeDirection());
        }

        function touchEnd(event) {
            var direction = stoppedDirection();
            defaults.scrollStop(finalCoord);
            defaults.mouseUp(velocity,direction);           
        }

        function touchStart(event) {
            originalCoord.x = event.targetTouches[0].pageX
            originalCoord.y = event.targetTouches[0].pageY
            lastCoord.x = originalCoord.x
            lastCoord.y = originalCoord.y
            finalCoord.x = originalCoord.x
            finalCoord.y = originalCoord.y
            defaults.scrollStart(originalCoord);
        }
        function activeDirection() {
            var direction = [];
            var vx = lastCoord.x - finalCoord.x;
            var vy = lastCoord.y - finalCoord.y;
            if (vy < 0 && (Math.abs(vy) > defaults.threshold.y))
                direction.push('down');
            else if (vy > 0 && (Math.abs(vy) > defaults.threshold.y))
                direction.push('up');
            if (vx < 0 && (Math.abs(vx) > defaults.threshold.x))
                direction.push('right');
            else if (vx > 0 && (Math.abs(vx) > defaults.threshold.x))
                direction.push('left');
            return direction;
        }

        function stoppedDirection() {
            var direction = [];
            velocity.x = originalCoord.x - finalCoord.x;
            velocity.y = originalCoord.y - finalCoord.y;
            if (velocity.y < 0 && (Math.abs(velocity.y) > defaults.threshold.y))
                direction.push('down');
            else if (velocity.y > 0 && (Math.abs(velocity.y) > defaults.threshold.y))
                direction.push('up');
            if (velocity.x < 0 && (Math.abs(velocity.x) > defaults.threshold.x))
                direction.push('right');
            else if (velocity.x > 0 && (Math.abs(velocity.x) > defaults.threshold.x))
                direction.push('left');
            return direction;
        }
        this.addEventListener("touchstart", touchStart, false);
        this.addEventListener("touchmove", touchMove, false);
        this.addEventListener("touchend", touchEnd, false);
        this.addEventListener("touchcancel", touchCancel, false);
       });
  };

})(jQuery); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-10T06:13:07.190

为了更好地控制触摸事件，jQuery Mobile 可能是一个不错的选择。

[http://jquerymobile.com/](http://jquerymobile.com/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-07-06T00:53:59.340

每个手指触发自己的触摸事件。所以：

```
// put first finger down
touchstart,
// move that finger
touchmove, touchmove, touchmove, ...
// put second finger down
touchstart,
// move both fingers
touchmove, touchmove, touchmove, ...
// lift either finger
touchend,
// lift last finger
touchend. 
```

我猜你现在开始了解如何追踪第一根手指了。问题是：当两个手指在移动时，如何分辨哪个`touchmove`是哪个手指？答案是对象`identifier`下的`Touch`属性（用于获取`pageX`和的对象`pageY`）。

所以当第一根手指向下时，记录它`identifier`。对于即将到来的触摸事件，遍历`targetTouches`（或只是`changeTouches`）并找到`Touch`具有相同 的对象`identifier`。如果这样`Touch`的对象在 中不存在`changeTouches`，我们什么也不做。我们不关心其他`Touch`对象。

最后，您需要考虑如何处理第一根手指。当屏幕上还有其他手指时第一根手指抬起，第二根手指是否会接管第一根手指的滚动权限？我们是否需要将所有手指从屏幕上抬起才能重置第一根手指的电量？由你决定。

# iphone - 强制应用启动 Safari

> ID：10083866
> 
> 赞同：2
> 
> 时间：2012-04-10T06:05:08.663
> 
> 标签：iphone

当用户点击网页视图上显示的网页的 URL 链接时，我使用下面的代码启动 safari：

```
- (BOOL)webView:(UIWebView *)webView shouldStartLoadWithRequest:(NSURLRequest *)request 
        navigationType:(UIWebViewNavigationType)navigationType
{
    if (navigationType == UIWebViewNavigationTypeLinkClicked)
    {
        if (![[UIApplication sharedApplication] openURL:[request URL]])
            return NO;
    }
    else
    {
        return YES;
    }
} 
```

它适用于 iOS 4 和 iOS 5。

但是，在 iOS4 上，它启动了 safari，但是当我关闭浏览器并返回应用程序时，web 视图继续转到我发送给 safari 的 url。

如何避免这种情况？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-10T10:33:57.410

删除后试试！来自 if (![[UIApplication sharedApplication] openURL:[request URL]])，如下 -

```
 - (BOOL)webView:(UIWebView *)webView shouldStartLoadWithRequest:(NSURLRequest *)request 
    navigationType:(UIWebViewNavigationType)navigationType
    {
        if (navigationType == UIWebViewNavigationTypeLinkClicked)
        {
            if ([[UIApplication sharedApplication] openURL:[request URL]])
                return NO;
        }
        else
        {
            return YES;
        }
    } 
```

它可以帮助你......

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-10T07:23:20.083

```
- (BOOL)webView:(UIWebView *)webView shouldStartLoadWithRequest:(NSURLRequest *)request 
        navigationType:(UIWebViewNavigationType)navigationType
{
    if (navigationType == UIWebViewNavigationTypeLinkClicked)
    { 
        if ([[UIApplication sharedApplication] openURL:[request URL]])
            return NO;
    }
    else
    {
        return YES;
    }
} 
```

# java - 使用 Selenium RC + Java 进行动态字段处理

> ID：10083872
> 
> 赞同：0
> 
> 时间：2012-04-10T06:06:06.950
> 
> 标签：java, selenium

如何处理 Selenium RC 中的动态场？我正在使用完全 Java 代码。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-10T07:14:30.613

关于一般问题，一般答案 - 尝试通过[XPath](http://zvon.org/xxl/XPathTutorial/Output/example1.html)搜索- 在大多数情况下，动态字段位于 DOM 中的同一位置。因此，虽然 ID 可以更改，但相对路径不会。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-01T09:27:59.547

见此一次。它可能会帮助你。

您需要对其进行编程。所以使用 Selenium IDE 是不可能的，但是你可以使用 Selenium Webdriver。请参阅此问题的 java 代码。

[具有动态值的硒](https://stackoverflow.com/questions/10027786/using-selenium-with-dynamic-values)。

# android - android应用程序午餐时间问题

> ID：10083873
> 
> 赞同：0
> 
> 时间：2012-04-10T06:06:16.527
> 
> 标签：android, android-layout, android-emulator

我有一个朋友的项目。问题是，如果我在我的 PC 上运行它，我会收到以下错误：

```
[2012-04-10 11:19:28 - myapp] Installation error: INSTALL_FAILED_MISSING_SHARED_LIBRARY
[2012-04-10 11:19:28 - myapp] Please check logcat output for more details.
[2012-04-10 11:19:28 - muapp] Launch canceled! 
```

这可能是什么原因？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-10T06:08:25.310

我确信您已经在您的项目中包含了**地图**功能。因此，要运行这个项目，您必须通过 SDK 管理器安装 Google API 并使用该 api 创建 AVD，或者您可以直接在您的设备上运行。

![在此处输入图像描述](../Images/9250ab01dc993d603fe1f4bce1036ef5.png)

# iphone - 将文档同步到 iCloud

> ID：10083876
> 
> 赞同：1
> 
> 时间：2012-04-10T06:06:21.230
> 
> 标签：iphone, objective-c, ios, icloud

我有一个关于`iCloud`同步问题的问题要问。我有一个安装在两个设备中的应用程序`iPhone`和`iPad`. 在`iPhone`我正在更新`iCloud`应该反映在 中的文档`iPad`但发生的情况是，当我在 中更新文档时`iPhone`，`iPad`应用程序停止工作，说：`"The existing document failed to open"`. 会有什么问题？我正在关注这个`iCloud`存储链接：

[http://www.raywenderlich.com/6015/beginning-icloud-in-ios-5-tutorial-part-1](http://www.raywenderlich.com/6015/beginning-icloud-in-ios-5-tutorial-part-1)

和

[http://www.raywenderlich.com/6031/beginning-icloud-in-ios-5-tutorial-part-2](http://www.raywenderlich.com/6031/beginning-icloud-in-ios-5-tutorial-part-2)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-25T00:04:31.860

首先，您需要使用`setUbiquitous`的功能`NSFileManager`将文档移入/移出 iCloud。我假设你这样做。

通常，如果您从一台设备将文档移动到本地沙箱，则另一台设备将无法使用仍指向 iCloud 的 URL 打开它。

本地与 iCloud 首选项应该预先呈现给用户，用户应该能够在之后更改它。

但是，当您的应用程序从一台设备（在同一个苹果 ID 上）拉入本地存储时，您的应用程序需要处理这种情况。在另一台设备上，当注意到文档从 iCloud 中移出时，您需要向用户提供合理的提示/指示，而不是将其报告为错误。

还有关于如何解决合并冲突的详细记录方案。

如果您想跨 iCloud 管理文档，则需要遵循某些 Apple 要求和准则。

[请在此处](http://developer.apple.com/library/ios/#DOCUMENTATION/DataManagement/Conceptual/DocumentBasedAppPGiOS/Introduction/Introduction.html)阅读有关 IOS 上基于文档的应用程序的权威指南。

# iphone - 如何取消 touchesMoved:withEvent:

> ID：10083894
> 
> 赞同：0
> 
> 时间：2012-04-10T06:07:35.740
> 
> 标签：iphone, objective-c, ios, uiview

我对视图的触摸有疑问：

我有一个父视图（框架是（0,0,768,1024）），其中包含两个子视图（A 和 B），一个带有标签 100 的框架（0,0,512,768）和带有标签 200 的 B 框架（512,0,512,768）。

我实现了触摸方法`touchesBegan:withEvent:` `touchesMoved:withEvent:` `touchesEnded:withEvent:`。

当我开始从 A 触摸到 B`touchesBegan`并且`touchesMoved`方法按预期触发时

**我需要实现：**当触摸从 A 到达 B 时，A 的 touchesEnded 应该被触发，B 的触摸开始被触发，反之亦然。我在各自的方法中有自己的逻辑。有人可以建议如何实现相同的目标。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-10T07:59:45.290

这是故意行为。通常，如果您触摸“**取消**”按钮，并且当您抬起它时手指滑到“**删除**”按钮上，您不想意外删除某些内容。

但是，我遇到过我确实希望像这样传递触摸的情况。就像@ejazz 一样，我将工作移到同时包含 A 和 B 的视图中。这启用了用户交互，并`touchesBegan`实现`touchesMoved`了`touchesEnded`.

当触摸移动到子视图上时，它会发送适当的消息。我刚刚打开和关闭了子视图，但您应该可以调用`touchesBegan`,`touchesMoved`并`touchesEnded`在必要时打开相应的子视图。如果您需要知道触摸何时开始和结束，您将需要跟踪与每次触摸关联的上一个视图 - 或者只调用其`previousLocationInView:`方法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-10T07:45:31.413

我建议使用该`UIPanGestureRecognizer`课程。将其附加到父视图，设置委托。

您现在可以关注状态和位置。所以当状态是`UIGestureRecognizerStateBegan`检查位置是在A还是B，当状态是`UIGestureRecognizerStateEnded`检查位置是在B还是A。

您可以检查点击视图是否包含 A 或 B 视图

```
CGRectContainsRect(<#CGRect rect1#>, <#CGRect rect2#>) 
```

然后使用 view.frame

# jquery-ui - 如何为 jquery 文件上传插件添加进度条？

> ID：10083897
> 
> 赞同：2
> 
> 时间：2012-04-10T06:07:57.473
> 
> 标签：jquery-ui, progress-bar

我正在使用插件[https://github.com/blueimp/jQuery-File-Upload](https://github.com/blueimp/jQuery-File-Upload)

我已经完成了[https://github.com/blueimp/jQuery-File-Upload/wiki/Basic-plugin上给出的基本设置](https://github.com/blueimp/jQuery-File-Upload/wiki/Basic-plugin)

我已经使用[https://github.com/blueimp/jQuery-File-Upload/wiki/Drop-zone-effects上的说明添加了一个下拉框](https://github.com/blueimp/jQuery-File-Upload/wiki/Drop-zone-effects)

所有这些都在起作用。现在我需要实现进度条。我可以使用[https://github.com/blueimp/jQuery-File-Upload/wiki/Extended-progress-information](https://github.com/blueimp/jQuery-File-Upload/wiki/Extended-progress-information)显示进度信息。但我不知道如何实现进度条

我不想使用闪光灯

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-04T08:15:22.140

为此，我使用了 jquery-UI 进度条。它使用简单，对我有用

# javascript - javascript中的“函数（）”是什么？

> ID：10083901
> 
> 赞同：-4
> 
> 时间：2012-04-10T06:08:27.950
> 
> 标签：javascript

此代码示例与与事件触发器的 if 语句配对的普通函数声明有何不同？简洁是唯一的优势吗？

```
xmlhttp.onreadystatechange=function()
{
  if (xmlhttp.readyState==4 && xmlhttp.status==200)
    {
    document.getElementById("myDiv").innerHTML=xmlhttp.responseText;
    }
  } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-10T06:17:04.637

在 Javascript 中，您可能拥有所谓的匿名函数。在上面的代码中，匿名函数将在 xmlhttp.onreadystatechange 事件被触发时执行。其他例子是：

```
window.onkeypress = function(e) {
    alert(String.fromCharCode(e.which));
} 
```

或者你可以创建一个匿名变量函数......

```
var myFunc = function(msg) {    // Create function and assign to var
    alert(msg);
}
myFunc("Hello World");          // Call new 'function' 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-10T06:18:29.143

标识符*函数*是一个保留字，它是*FunctionDeclaration*或*FunctionExpression*的开始。如果它在语句的开头（或更准确地说，在语句可以出现的地方），它被解释为*FunctionDeclaration*并且必须是以下形式：

```
function <name> (<parameter list>) { <function body> } 
```

*FunctionDeclaration*中的名称是必需的。

如果它不在语句的开头，则它是一个*FunctionExpression*并且名称是可选的，例如它可以是：

```
(function () {…})

var a = function () {…};

someFunction(function () {…}) 
```

等等。在所有情况下，它都会返回对可以分配（例如，变量）、调用、传递给其他函数或忽略的函数的引用。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-10T06:09:33.530

它表示将要为给定事件发生调用的函数。

在您的上下文中，当`xmlhttp.onreadystatechange=`事件发生时，`function()`块被执行。

你也可以这样写

```
xmlhttp.onreadystatechange=myfunction;

function myfunction()
{
 //code to execute
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-04-10T06:11:31.747

这是分配给对象`onreadystatechange`属性的正常功能，`xmlhttp`可以通过以下方式触发：

```
xmlhttp.onreadystatechange(); 
```

看教程：

*   [函数：声明和表达式](http://javascript.info/tutorial/functions-declarations-and-expressions)

了解更多。

*你真的应该先学习基础知识:)*

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-04-10T06:13:28.443

Javascript 支持匿名函数对象。当您想要执行与事件相关的代码块时，您必须将您的代码包装到一个函数中。如果您不需要特定的功能（您不想重用代码），您可以让您的功能匿名。

```
xmlhttp.onreadystatechange = function () { ... } 
```

这与这样做类似：

```
function foo() { ... }
xmlhttp.onreadystatechange = foo; 
```

但在这种情况下，您可以在任何需要的地方重用 foo。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-04-10T06:09:42.890

它是一个函数。将其视为可以在以后执行的代码块。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-04-10T06:16:23.773

`function(){...}`是一个无名（“匿名”）[函数表达式](http://kangax.github.com/nfe/)。如果将其分配给变量或将其用作参数，则不需要名称。在您的示例中，您将该函数对象分配给 xhr 对象的处理程序属性，它将被用作回调。

# ios - 缓存策略的 NSURLConnection sendSynchronousRequest 设置委托

> ID：10083905
> 
> 赞同：0
> 
> 时间：2012-04-10T06:08:47.643
> 
> 标签：ios

对于 iOS 5.0 和 arc，我需要确保 NSURLConnection sendSynchronousRequest 不缓存响应数据。我将如何设置委托以便我可以实现以下方法

```
- (NSCachedURLResponse *)connection:(NSURLConnection *)connection willCacheResponse:(NSCachedURLResponse *)cachedResponse 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-09T13:13:41.870

尝试

```
 [[NSURLRequest alloc] initWithURL:[NSURL URLWithString:URL]
                          cachePolicy:NSURLRequestReloadIgnoringLocalAndRemoteCacheData
                      timeoutInterval:60.0]; 
```

# iphone - iphone不显示指南针

> ID：10083909
> 
> 赞同：1
> 
> 时间：2012-04-10T06:09:02.530
> 
> 标签：iphone, ipad

我创建了一个应用程序，我想在其中显示指南针。但我的应用程序显示空白页..我还添加了 CoreLocation 框架..请帮我显示指南针。

# .h 文件代码：

```
import "UIKit/UIKit.h"
import "CoreLocation/CoreLocation.h"

@interface Compass_VIew : UIViewController<CLLocationManagerDelegate> 
    {

IBOutlet UIImageView *arrow;

 IBOutlet UIImageView *arrowC;

 CLLocationManager *locManager;

}

@property (nonatomic, retain) CLLocationManager *locManager;

@property(readonly, nonatomic) BOOL headingAvailable;

@end 
```

# .m 文件代码

didUpdateHeading 方法代码：

```
NSLog(@"New magnetic heading: %f", newHeading.magneticHeading);
NSLog(@"New true heading: %f", newHeading.trueHeading); 
```

viewDidLoad 方法代码：

```
[super viewDidLoad];
// Do any additional setup after loading the view from its nib.
[[self navigationController] setNavigationBarHidden:NO animated:NO];
locManager = [[[CLLocationManager alloc] init] autorelease];
locManager.desiredAccuracy= kCLLocationAccuracyBest;
locManager.delegate = self;
[self.locManager startUpdatingHeading]; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-10T06:45:45.173

你需要为指南针的针提供变换

应该是这样的

```
- (void)viewDidLoad {
    [super viewDidLoad];

    self.view.backgroundColor = [UIColor clearColor];

    locationManager = [[CLLocationManager alloc] init];
    locationManager.delegate = self; 
    locationManager.desiredAccuracy = kCLLocationAccuracyBest; 
    locationManager.distanceFilter = kCLDistanceFilterNone; 
    [locationManager startUpdatingLocation];
    [locationManager startUpdatingHeading];

    CLLocation *location = [locationManager location];
    CLLocationCoordinate2D user = [location coordinate];

}

-(void)locationManager:(CLLocationManager *)manager didUpdateToLocation:(CLLocation *)newLocation fromLocation:(CLLocation *)oldLocation {
    CLLocationCoordinate2D here =  newLocation.coordinate;

}

- (void)locationManager:(CLLocationManager *)manager didUpdateHeading:(CLHeading *)newHeading {

    double trueheading = newHeading.magneticHeading;
    double northangle = (trueheading*M_PI/180);
    redPin.transform = CGAffineTransformMakeRotation(northangle); 
} 
```

这里 redPin 是我的针视图，顺便别忘了导入 CoreLocation 框架

# facebook-graph-api - 如何为不同性别显示某些图像

> ID：10083910
> 
> 赞同：0
> 
> 时间：2012-04-10T06:09:06.090
> 
> 标签：facebook-graph-api

我确定是简单的脚本，但似乎找不到关于它的文章。如果有的话，我很赞同。

我想要实现的目标很简单。

> 如果`$user_gender = male`则显示男性符号图像
> 
> 如果`$user_gender = female`则显示女性符号图像

我只是不知道如何将其放入编码中。我不是`PHP`那种人。

使用`php sdk 3.1.1`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-10T06:12:52.043

像这样的事情应该可以做到……但是还有很多其他的方法可以做到！

```
if ($user_gender == "male") {
    echo '<img src="/maleimage.png" />';
}
else if ($user_gender == "female") {
    echo '<img src="/femaleimage.png" />';
}
else {
    echo '<img src="/genderneutralimage.png" />';
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-10T06:13:05.387

看看这个问题 -[获取应用程序用户的信息 - Facebook-GRAPH API-PHP SDK](https://stackoverflow.com/questions/5623806/get-application-users-info-facebook-graph-api-php-sdk)并在此处查看：[https ://developers.facebook.com/docs/reference/rest/users.getInfo/](https://developers.facebook.com/docs/reference/rest/users.getInfo/)

如果您可以提供您所在位置的确切代码，我们可以提供更多帮助。在那之前，我们只能是一般的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-10T06:16:27.803

用那边的条件语句就可以查出性别，

```
if($user_gender == "male")
{
$image = "/images/male.jpg";
}
else if($user_gender == "female")
{
$image = "/images/female.jpg";
}
else
{
// For default image display
$image = "/images/default.jpg";
} 
```

# java - 如何在 Java 中使用 Graphics2D 旋转文本？

> ID：10083913
> 
> 赞同：23
> 
> 时间：2012-04-10T06:09:27.320
> 
> 标签：java, awt, graphics2d

我想使用 Graphics2D 旋转 JPanel 上的文本。

我的代码是这样的：

```
double paso=d.width/numeroBarras;
        double alto=datos[i].valor;
        Font fBarras=new Font("Serif", Font.PLAIN, 15);
        g2.setFont(fBarras);
        Rectangle2D barra=new Rectangle2D.Double(x,d.height-alto,paso,alto);
        //g2.fill(barra);
        x+=paso;
        g2.draw(barra);
        g2.rotate(-Math.PI/2);
        g2.setColor(Color.BLACK);
        g2.drawString(datos[i].titulo,(float)alto,(float)paso) 
```

此方法必须在矩形上绘制一个矩形和一个文本，但是当我运行此方法时，所有图形都被旋转了，我只想旋转文本..

谢谢 ：）

* * *

## 回答 #1

> 赞同：30
> 
> 时间：2014-03-30T15:37:30.493

此方法将旋转文本并将所有其他形状呈现相同。

```
Graphics2D g2 = (Graphics2D) g;
Font font = new Font(null, Font.PLAIN, 10);    
AffineTransform affineTransform = new AffineTransform();
affineTransform.rotate(Math.toRadians(45), 0, 0);
Font rotatedFont = font.deriveFont(affineTransform);
g2.setFont(rotatedFont);
g2.drawString("A String",0,0);
g2.dispose(); 
```

* * *

## 回答 #2

> 赞同：28
> 
> 时间：2012-04-10T06:26:18.250

该方法[`Graphics2D.rotate`](http://docs.oracle.com/javase/7/docs/api/java/awt/Graphics2D.html#rotate%28double%29)将变换应用于所有后续渲染操作。您可以在应用旋转之前保留变换的副本（使用[`getTransform()`](http://docs.oracle.com/javase/7/docs/api/java/awt/Graphics2D.html#getTransform%28%29)），然后恢复原件。

```
g2.draw(barra);
AffineTransform orig = g2.getTransform();
g2.rotate(-Math.PI/2);
g2.setColor(Color.BLACK);
g2.drawString(datos[i].titulo,(float)alto,(float)paso);
g2.setTransform(orig); 
```

* * *

## 回答 #3

> 赞同：22
> 
> 时间：2014-11-02T23:44:04.227

此代码更好，如果您不想使用`AffineTransform`.

```
public static void drawRotate(Graphics2D g2d, double x, double y, int angle, String text) 
{    
    g2d.translate((float)x,(float)y);
    g2d.rotate(Math.toRadians(angle));
    g2d.drawString(text,0,0);
    g2d.rotate(-Math.toRadians(angle));
    g2d.translate(-(float)x,-(float)y);
} 
```

用法：

```
drawRotate(g2d, 100, 100, 45, "hello world");    // 100x100px, 45 degree, 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-04-10T06:26:29.963

我有一段代码，其中包含 Rectangle 对象。我可以看到我的文本在旋转，而不是矩形。

```
Graphics2D g2d = (Graphics2D) g;
g2d.setRenderingHint(RenderingHints.KEY_ANTIALIASING, RenderingHints.VALUE_ANTIALIAS_ON);

String s = "dasdasdasd1";

Font font = new Font("Courier", Font.PLAIN, 12);
g2d.translate(20, 20);

FontRenderContext frc = g2d.getFontRenderContext();

GlyphVector gv = font.createGlyphVector(frc, s);
int length = gv.getNumGlyphs();
Rectangle2D barra=new Rectangle2D.Double(0, 0, 700, 500);
g2d.draw(barra);
for (int i = 0; i < length; i++) {
  Point2D p = gv.getGlyphPosition(i);
  AffineTransform at = AffineTransform.getTranslateInstance(p.getX(), p.getY());
  at.rotate((double) i / (double) (length - 1) * Math.PI / 3);

  Shape glyph = gv.getGlyphOutline(i);
  Shape transformedGlyph = at.createTransformedShape(glyph);
  g2d.fill(transformedGlyph);
} 
```

也许你可以试试这个。

# python - 为什么 wordnet 中基于路径的相似性或任何相似性会在某些意义上给出 nan？

> ID：10083914
> 
> 赞同：0
> 
> 时间：2012-04-10T06:09:29.143
> 
> 标签：python, nltk, wordnet

例如，采用两种感觉`Synset('mile.n.03')`，`Synset('support.v.09)`当我计算这两种感觉之间基于路径的相似性时，如下所示

```
from nltk.corpus import wordnet as wn  
mile = wn.synset('mile.n.03')  
support = wn.synset('support.v.09')
support2 = wn.synset('documentation.n.03')
wn.path_similarity(mile,support)    #no output
wn.path_similarity(mile,support2)   #get an output 0.08333 
```

知道为什么会这样吗？还是我犯了一些根本性的错误？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-10T07:54:53.980

查看[path_similarity](http://nltk.googlecode.com/svn/trunk/doc/api/nltk.corpus.reader.wordnet-module.html#path_similarity)的文档：

> 表示两个 Synset 相似性的分数，通常介于 0 和 1 之间。如果找不到连接路径，则返回**None ...（仅适用于动词，因为有许多不同的动词分类法）。**

因此，似乎没有找到连接路径，就像`support`动词一样。

# c# - 为什么我第二次访问用户控件时表单不加载

> ID：10083923
> 
> 赞同：0
> 
> 时间：2012-04-10T06:10:10.953
> 
> 标签：c#, winforms, user-controls

我有一个表单，在表单中我根据选择的内容添加和删除用户控件。有一个表单有两个标签，标签信息应该在用户控件加载时改变，但它永远不会改变，它保持相同的值。现在，我在用户控件的加载上添加了一个断点。它只被点击一次，其他时候它只是导航到那里，但再也不会加载了。

```
private void SummaryScreen_OnLoad(object sender, EventArgs e)
{
    lblSavingsBalance.Text = Global.Instance.Accounts[1].AccountBalace.ToString();
    lblCheckingBalance.Text = Global.Instance.Accounts[0].AccountBalace.ToString();
} 
```

我怎样才能让它在我调用这个用户控件时一直加载？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-10T06:22:16.973

`UserControl.Load`仅在构造后第一次添加到表单时调用。

您将需要：

*   每次重新创建控件（因此强制调用 Load）
*   在 UserControl 上添加一个新方法（如 Initialize）并在添加后调用它

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-10T06:14:22.563

可能是缓存使用：-

```
 Response.Cache.SetCacheability(HttpCacheability.NoCache);
        Response.ExpiresAbsolute = DateTime.Now.AddMonths(-1); 
```

在您的加载功能中

# devexpress - 如何在使用 devexpress xtrascheduler 启动日历同步之前检查用户是否安装了 MS Outlook

> ID：10083925
> 
> 赞同：0
> 
> 时间：2012-04-10T06:10:26.900
> 
> 标签：devexpress

我有一个使用 DevExpress XtraScheduler 技术的应用程序，onLoad 与桌面上的应用程序日历和本地 MS Outlook 同步。该应用程序运行良好，但是我想知道用户是否在他们的机器上没有 MS Outlook，并且应用程序第一次在没有 MS Outlook 的特定用户桌面上加载，可能（或应该）发生一些讨厌的错误我会想象。

在您看来，如何才能真正提供检查或错误处理来满足这种情况 - 通知用户没有检测到 MS Outlook？

在此先感谢您并问候 geoNeo

PS-我正在使用 VS 2010，用 C# 编程

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-10T06:45:30.367

请参阅文档的此页面。

[http://documentation.devexpress.com/#WindowsForms/CustomDocument3937](http://documentation.devexpress.com/#WindowsForms/CustomDocument3937)

特别是，`OutlookExchangeHelper`课程应该为您提供所需的一切。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-06-25T19:46:48.203

这里有一些代码可以做两件事：1）检查它是否已安装 2）获取已安装的版本号

希望这可以帮助

```
Imports Microsoft.Win32
Module Outlook

    Public Class Outlook
        Public Shared Function isInstalled() As Boolean
            Dim regClasses As RegistryKey = Registry.ClassesRoot
            Dim rtn As Boolean

            Dim reg As RegistryKey = regClasses.OpenSubKey("Outlook.Application")
            If reg Is Nothing Then
                rtn = False
            Else
                rtn = True
            End If
            reg.Close()

            Return rtn
        End Function

        Public Shared Function version() As String
            Dim rtn As String = ""
            Dim objApp As Object

            If isInstalled() Then
                objApp = CreateObject("Outlook.Application")
                rtn = objApp.Version
            End If

            Return rtn
        End Function
    End Class
End Module 
```

# iphone - 位置服务问题 iPhone。？

> ID：10083927
> 
> 赞同：0
> 
> 时间：2012-04-10T06:10:34.853
> 
> 标签：iphone, cocoa, core-location

我正在开发一个 iPhone 应用程序。我面临的问题是，在应用程序启动时，我必须根据用户启用或禁用位置服务来呈现两个不同的视图，但是位置服务警报会在几秒钟后出现。我该如何管理它。？流程应该是这样的

应用程序启动 -> 位置警报显示 -> 用户按下允许 -> 显示交易视图

应用程序启动 -> 位置警报显示 -> 用户不允许 -> 显示选择位置视图。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-10T08:24:51.833

使用 CLLocationManager 和委托来获取位置。如果失败，请检查错误代码以查看用户是否在应用程序中拒绝了位置访问：

```
- (void)locationManager:(CLLocationManager *)manager didFailWithError:(NSError *)error {

    UIAlertView *alert;
    //denied?
    if(error.code == kCLErrorDenied) alert = [[UIAlertView alloc] initWithTitle:NSLocalizedString(@"Error",@"Error title header") message:NSLocalizedString(@"Turn on Location Services in Settings to use your location",@"Turn on Location Services in Settings to use your location") delegate:nil cancelButtonTitle:@"OK" otherButtonTitles:nil];
    else alert = [[UIAlertView alloc] initWithTitle:NSLocalizedString(@"Error",@"Error title header") message:NSLocalizedString(@"At the moment it is not possible to retreive your location",@"At the moment it is not possible to retreive your location") delegate:nil cancelButtonTitle:@"OK" otherButtonTitles:nil];
    [alert show];
    [alert release];
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-10T06:18:18.037

在 appDelegate 中使用 CLLocationManager 来获取仅在启动时显示的位置警报可能会有所帮助。

# php - 如果仅使用一个函数 codeigniter/php 加载模型的开销

> ID：10083928
> 
> 赞同：0
> 
> 时间：2012-04-10T06:10:43.703
> 
> 标签：php, model-view-controller, codeigniter, model, load

假设有一个控制器（我们称之为“主”）和一个执行一堆（10）功能的关联模型。

我想知道在加载第二个模型以执行主模型中不存在的一个功能与仅在主模型中添加该功能（复制代码）时相关的开销。

加载第二个模型的优点是代码更少/更容易维护。

缺点是加载第二个模型的开销。

我对开销的恐惧是否有效？我是非 CS 人员，只是想知道这里的最佳做法是什么。

谢谢，蒂姆

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-10T06:20:17.597

[不要重复自己](http://en.wikipedia.org/wiki/Don%27t_repeat_yourself)。如果你这样做，你只会让你的生活变得比在维护你的代码时更难。良好 OOP 的原则鼓励您创建具有特定职责范围的类，并使用该类来处理它所构建的情况。将 X 类中的功能复制到 Y 类中违反了这一原则。如果 Y 类需要 X 类做某事，那么这意味着 Y 类需要与 X 类的实例对话，或者 Y 类应该从 X 类继承。

充其量也将是一个[微优化。](/questions/tagged/micro-optimization "显示标记为“微优化”的问题")加载其他类对性能的影响应该可以忽略不计，当然没有什么值得担心的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-10T06:16:40.393

这取决于您如何实例化您的对象。对于 PHP 类，您可以定义创建对象时要加载的内容（请参阅构造函数）。大多数时候，是的，最好有一个干净清晰的代码进行维护，但有时出于业务原因，最好复制一些代码，即使它很难维护。我在这里只阅读了开发人员的观点（我是……），但根据我的观点，一个好的开发人员应该始终首先考虑功能/业务，即使这意味着他需要生成更多代码以获得更好的用户体验或有时他需要编写一些肮脏/快速/难以维护的代码，但它适用于用户！

# sed - 改进 sed 中的正则表达式以替换匹配 string=value 的值

> ID：10083930
> 
> 赞同：2
> 
> 时间：2012-04-10T06:10:53.827
> 
> 标签：sed

我需要替换一个与 string=value 匹配的值，所以这就是我想出的：

```
echo "some string=oldvalue" | sed 's/\(some string\=\)(.*)/\1newvalue/' 
```

它工作正常，我只是想知道是否有更好，更短的方法来完成同样的事情

TIA

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-10T06:16:15.820

如果`some_string`是一个常数值，只需使用：

```
sed 's/some string=.*/some string=newvalue/' 
```

根据以下成绩单：

```
pax> echo "some string=oldvalue" | sed 's/some string=.*/some string=newvalue/'
some string=newvalue 
```

但是您可能需要考虑使用开始标记，这样您就不会拿起其他键：

```
sed 's/^some string=.*/some string=newvalue/' 
```

如果您想保留该行的其余部分（例如，在空格之后），请使用：

```
pax> echo "string=old # comment" | sed 's/string=[^ ]*/string=newvalue/'
string=newvalue # comment 
```

这通过将项目限制`=`为非空格字符来工作。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-10T06:18:13.420

如果该值不能包含任何`=`s，那么它会更短：

```
sed 's/=.*/=NEW VALUE/' 
```

# python - 带有 tweepy 的流 api 只返回倒数第二条推文，而不是最后一条推文

> ID：10083936
> 
> 赞同：3
> 
> 时间：2012-04-10T06:11:28.243
> 
> 标签：python, twitter, streaming, tweepy

我不仅是 python 的新手，而且是完全编程的新手，所以我非常感谢你的帮助！

我正在尝试使用 Tweepy 过滤检测来自 twitter 流 API 的所有推文。

我已按用户 ID 过滤并确认正在实时收集推文。

**但是**，似乎只有**倒数第二**条推文被实时收集，而不是最新的推文。

你们能帮忙吗？

```
import tweepy
import webbrowser
import time
import sys

consumer_key = 'xyz'
consumer_secret = 'zyx'

## Getting access key and secret
auth = tweepy.OAuthHandler(consumer_key, consumer_secret)
auth_url = auth.get_authorization_url()
print 'From your browser, please click AUTHORIZE APP and then copy the unique PIN: ' 
webbrowser.open(auth_url)
verifier = raw_input('PIN: ').strip()
auth.get_access_token(verifier)
access_key = auth.access_token.key
access_secret = auth.access_token.secret

## Authorizing account privileges
auth.set_access_token(access_key, access_secret)

## Get the local time
localtime = time.asctime( time.localtime(time.time()) )

## Status changes
api = tweepy.API(auth)
api.update_status('It worked - Current time is %s' % localtime)
print 'It worked - now go check your status!'

## Filtering the firehose
user = []
print 'Follow tweets from which user ID?'
handle = raw_input(">")
user.append(handle)

keywords = []
print 'What keywords do you want to track? Separate with commas.'
key = raw_input(">")
keywords.append(key)

class CustomStreamListener(tweepy.StreamListener):

    def on_status(self, status):

        # We'll simply print some values in a tab-delimited format
        # suitable for capturing to a flat file but you could opt 
        # store them elsewhere, retweet select statuses, etc.

        try:
            print "%s\t%s\t%s\t%s" % (status.text, 
                                      status.author.screen_name, 
                                      status.created_at, 
                                      status.source,)
        except Exception, e:
            print >> sys.stderr, 'Encountered Exception:', e
            pass

    def on_error(self, status_code):
        print >> sys.stderr, 'Encountered error with status code:', status_code
        return True # Don't kill the stream

    def on_timeout(self):
        print >> sys.stderr, 'Timeout...'
        return True # Don't kill the stream

# Create a streaming API and set a timeout value of ??? seconds.

streaming_api = tweepy.streaming.Stream(auth, CustomStreamListener(), timeout=None)

# Optionally filter the statuses you want to track by providing a list
# of users to "follow".

print >> sys.stderr, "Filtering public timeline for %s" % keywords

streaming_api.filter(follow=handle, track=keywords) 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-29T00:21:54.353

我有同样的问题。在我的情况下，答案并不像运行无缓冲的 python 那样简单，而且我认为它也没有解决原始海报的问题。问题实际上出在名为 streaming.py 和函数 _read_loop() 的文件中的 tweepy 包的代码中，我认为需要对其进行更新以反映 twitter 从其流 api 输出数据的格式的更改。

我的解决方案是从 github 下载 tweepy 的最新代码，[https://github.com/tweepy/tweepy](https://github.com/tweepy/tweepy) 特别是 streaming.py 文件。您可以查看最近所做的更改以尝试在此文件的提交历史记录中解决此问题。

我查看了 tweepy 类的详细信息，发现 streaming.py 类在 json 推文流中读取的方式存在问题。我认为这与 twitter 更新他们的流 api 以包含传入状态的位数有关。长话短说，这是我在 streaming.py 中替换的函数来解决这个问题。

```
def _read_loop(self, resp):

    while self.running and not resp.isclosed():

        # Note: keep-alive newlines might be inserted before each length value.
        # read until we get a digit...
        c = '\n'
        while c == '\n' and self.running and not resp.isclosed():
            c = resp.read(1)
        delimited_string = c

        # read rest of delimiter length..
        d = ''
        while d != '\n' and self.running and not resp.isclosed():
            d = resp.read(1)
            delimited_string += d

        try:
            int_to_read = int(delimited_string)
            next_status_obj = resp.read( int_to_read )
            # print 'status_object = %s' % next_status_obj
            self._data(next_status_obj)
        except ValueError:
            pass 

    if resp.isclosed():
        self.on_closed(resp) 
```

该解决方案还需要学习如何下载 tweepy 包的源代码，对其进行修改，然后将修改后的库安装到 python 中。这是通过进入您的顶级 tweepy 目录并根据您的系统键入类似 sudo setup.py install 的内容来完成的。

我还在 github 上对这个包的编码人员发表了评论，让他们知道发生了什么。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-10T07:06:45.860

这是输出缓冲的情况。使用（无缓冲）运行 python`-u`以防止这种情况发生。

`sys.stdout.flush()`或者，您可以通过在 print 语句之后执行来强制刷新缓冲区。

有关更多想法，请参阅[此答案](https://stackoverflow.com/questions/107705/python-output-buffering)。

# javascript - Javascript变量/'NaN'行为怪异

> ID：10083937
> 
> 赞同：1
> 
> 时间：2012-04-10T06:11:28.113
> 
> 标签：javascript, nan

我有几个文本框，`Number`如果文本框中有有效数据，则返回 javascript 值，否则返回`NaN`. 我得到了这种奇怪的行为。当我签`firebug`入时（两个文本框都是空白的）：

```
>>> hours
NaN
>>> minutes
NaN
>>> minutes == NaN
false
>>> hours == NaN
false
>>> hours == minutes
false 
```

为什么会这样？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-10T07:20:17.883

`NaN`不等于任何东西，甚至不等于`NaN`。

[参考 MDN](https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/isNaN)

[更详细的SO问答](https://stackoverflow.com/questions/559792/what-is-the-reserved-keyword-for-nan-in-javascript)

有关权威来源，请参阅[ECMAScript 5 官方规范](http://www.ecmascript.org/docs/tc39-2009-043.pdf)，第[11.9.1](http://www.ecma-international.org/ecma-262/5.1/#sec-11.9.1)和[11.9.3](http://www.ecma-international.org/ecma-262/5.1/#sec-11.9.3)节：

```
1\. If Type(x) is the same as Type(y), then
     [...]
  c. If Type(x) is Number, then
     i. If x is NaN, return false.
    ii. If y is NaN, return false.
        [...] 
```

# sql-server-2008 - 跟踪数据库架构中所做的更改

> ID：10083950
> 
> 赞同：1
> 
> 时间：2012-04-10T06:12:08.583
> 
> 标签：sql-server-2008

我有一个包含 100 多个表和 50 多个视图的数据库。每个表都有多个具有不同类型可能约束的列。我有一个 build x.1 作为上述数据库的基线。我需要知道在文本文件中生成当前数据库结构的方式，以便我可以将其与未来的数据库结构进行比较以跟踪更改。

DB 是 SQL Server 2008 R2 我有 SQL Server Management Studio 来分析它。我曾尝试使用选项 Task --> Generate Script，它为我提供了生成数据库的 sql 脚本，但我希望输出所有表名，然后以文本格式输出每个表结构，以便我可以使用 winmerge 等工具进行比较。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-10T06:26:57.960

如果要跟踪数据库中的更改。我会考虑更换工具。以下是真正优秀的数据库比较工具列表：

*   [dbForge 模式比较](http://www.devart.com/dbforge/sql/schemacompare/)
*   [SQLDB工具](http://sqldbtools.com/)
*   [Redgate SQL 比较](http://www.red-gate.com/products/sql-development/sql-compare/)
*   [顶点 sql](http://www.apexsql.com/default.aspx)

我个人最喜欢的是 Apex sql。一个非常好的工具，您可以在其中对其他版本进行很好的差异和脚本数据库。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-11T23:02:54.160

也许值得考虑使用模式比较工具检查源代码控制中的快照或脚本文件夹的计划过程。Grant Fritchey 写了一篇文章，您可以将其用作实现此功能的基础：

[http://www.simple-talk.com/sql/database-administration/auditing-ddl-changes-in-sql-server-databases/](http://www.simple-talk.com/sql/database-administration/auditing-ddl-changes-in-sql-server-databases/)

# c# - 如何使用此代码执行@Html.DropDownListFor？

> ID：10083951
> 
> 赞同：1
> 
> 时间：2012-04-10T06:12:12.963
> 
> 标签：c#, asp.net-mvc, asp.net-mvc-3, razor, drop-down-menu

我正在学习 MVC3，我希望我的下拉列表`colors`用作此处的数据。我该怎么做？

我知道我可以做到这一点，`@Html.DropDownList("colors")`但我想知道如何做到这一点`@Html.DropDownListFor(....)`？我有点难过，任何帮助和解释将不胜感激。

为了方便起见，我将所有内容放在一页中，所以这不是真实世界的应用程序。

```
@functions {

    private class Colors
    {
        public int ColorsId { get; set; }
        public string ColorsName { get; set; }
    }

}

@{
    var list = new List<Colors>()
                {
                    new Colors() {ColorsId = 1, ColorsName = "Red"},
                    new Colors() {ColorsId = 2, ColorsName = "Blue"},
                    new Colors() {ColorsId = 3, ColorsName = "White"}
                };
    var colors = new SelectList(list, "ColorsId", "ColorsName", 3);
}

@Html.DropDownListFor( ??? ) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-10T06:23:08.957

```
@Html.DropDownListFor(model => colors, colors) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-10T06:16:37.673

您需要在页面顶部定义模型的类型。使用 lambda 表达式指定模型的哪个属性绑定到 Drop Down。

```
@model MyModel

@functions {

    private class Colors
    {
        public int ColorsId { get; set; }
        public string ColorsName { get; set; }
    }

}

@{
    var list = new List<Colors>()
                {
                    new Colors() {ColorsId = 1, ColorsName = "Red"},
                    new Colors() {ColorsId = 2, ColorsName = "Blue"},
                    new Colors() {ColorsId = 3, ColorsName = "White"}
                };
    var colors = new SelectList(list, "ColorsId", "ColorsName", 3);
}

@Html.DropDownListFor(model => model.colors, colors) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-10T06:23:09.643

```
<%= Html.DropDownListFor(x => x.ColorsId, new SelectList(list, "ColorsId", "ColorsName")) %> 
```

# google-calendar-api - 将活动添加到 Google 日历

> ID：10083956
> 
> 赞同：0
> 
> 时间：2012-04-10T06:13:04.310
> 
> 标签：google-calendar-api

我们正在使用 API Google 开发应用程序。在这个过程中，我们遇到了一些困难。

我们使用了此页面“code.google.com/p/google-api-php-client/”上的 php-sdk 我们使用了 Google 日历服务。我们遵循位于此处的文档：“developers.google.com/google-apps/calendar/v3/reference/”部分日历和事件。

源数据： - 允许访问位于此处的 Google 日历服务“code.google.com/apis/console/” - 请求所需的用户授权（基于此处的文档：“developers.google.com/google-apps/calendar/” v3/参考/事件/插入）”

任务：将事件添加到日历。行动：我们将 Post-Request 发送到[https://www.googleapis.com/calendar/v3/calendars/](https://www.googleapis.com/calendar/v3/calendars/) {calendarId}/events?calendarId={calendarId}&alt=json&key={API Key}

请求正文：

```
{

"\u0000*\u0000__creatorType":"EventCreator",

"\u0000*\u0000__creatorDataType":"",

"\u0000*\u0000__organizerType":"EventOrganizer",

"\u0000*\u0000__organizerDataType":"",

"\u0000*\u0000__attendeesType":"EventAttendee",

"\u0000*\u0000__attendeesDataType":"array",

"\u0000*\u0000__startType":"EventDateTime",

"\u0000*\u0000__startDataType":"",

"start":{

"date":"",

"timeZone":"Europe\/Moscow",

"dateTime":"2012-0408T12:00:00+04:00"

},

"location":"sdasdwqwqesaddsa",

"\u0000*\u0000__originalStartTimeType":"EventDateTime",

"\u0000*\u0000__originalStartTimeDataType":"",

"\u0000*\u0000__gadgetType":"EventGadget",

"\u0000*\u0000__gadgetDataType":"",

"description":"sadasdzxczxcasdsaweqqwasd",

"\u0000*\u0000__extendedPropertiesType":"EventExtendedProperties",

"\u0000*\u0000__extendedPropertiesDataType":"",

"\u0000*\u0000__endType":"EventDateTime",

"\u0000*\u0000__endDataType":"",

"end":{

"date":"",

"timeZone":"Europe\/Moscow",

"dateTime":"2012-04-08T19:00:00+04:00"

},

"\u0000*\u0000__remindersType":"EventReminders",

"\u0000*\u0000__remindersDataType":"",

"summary":"wqeqwesadasewqe"

} 
```

注意：为了形成事件对象，我们使用了代码（与这里的示例开发者.google.com/google-apps/calendar/v3/reference/events/insert 部分示例中的示例相同）

```
Result: API returns an error with code 400 (Bad Request) 
```

**来自 API 的回答（带有标题）**

```
HTTP/1.1 400 Bad Request Content-Type: application/json; charset=UTF-8 Date: Fri, 06 Apr 2012 05:53:55 GMT Expires: Fri, 06 Apr 2012 05:53:55 GMT Cache-Control: private, max-age=0 X-Content-Type-Options: nosniff X-Frame-Options: SAMEORIGIN X-XSS-Protection: 1; mode=block Server: GSE Transfer-Encoding: chunked 

{ "error": {

 "errors": [

 { "domain": "global",

 "reason": "badRequest",

 "message": "Bad Request" } 

],

 "code": 400, 

"message": "Bad Request"

 } 

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-24T23:38:06.797

玩这个工具。我有同样的问题。它适用于资源管理器，但不适用于我的 Rails 服务器。

[https://developers.google.com/google-apps/calendar/v3/reference/events/insert#try-it](https://developers.google.com/google-apps/calendar/v3/reference/events/insert#try-it)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-08-07T14:35:49.557

您提到的文档（在[http://developers.google.com/google-apps/calendar/v3/reference](http://developers.google.com/google-apps/calendar/v3/reference)上）记录了 Google 日历 API 的 REST 接口。然而，PHP 客户端库的工作方式不同，遗憾的是几乎没有文档记录。

[我使用了 Google PHP API 客户端（ https://code.google.com/p/google-api-php-client/source/browse/trunk/examples/calendar/simple.php](https://code.google.com/p/google-api-php-client/source/browse/trunk/examples/calendar/simple.php) ）附带的示例。您需要在 Google 的 API 控制台中生成一个 oAuth 客户端 ID、密码等（其工作原理在 API 客户端的文档中有说明）。

有关日历 PHP API 的所有其他文档（AFAIK）只能在`Google_CalendarService`课程的评论中找到：[https ://code.google.com/p/google-api-php-client/source/browse/trunk/src /contrib/Google_CalendarService.php](https://code.google.com/p/google-api-php-client/source/browse/trunk/src/contrib/Google_CalendarService.php)

您可以使用以下代码向 Google 日历添加新活动：

```
$event = new Google_Event();

// Event title and location
$event->setSummary('Event title');
$event->setLocation('Some location');

// Start and end time of the event
$start = new Google_EventDateTime();
$start->setDateTime('2013-08-08T14:00:00+02:00');
$event->setStart($start);

$stop = new Google_EventDateTime();
$stop->setDateTime('2013-08-08T16:00:00+02:00');
$event->setEnd($stop);

// Insert event in calendar.
// 'primary' may be replaced with a full @group.calendar.google.com calendar ID.
$createdEvent = $cal->events->insert('primary', $event); 
```

# java - Apache Aries Managed JPA 能否与 iPOJO 一起使用而不是 Blueprint？

> ID：10083962
> 
> 赞同：1
> 
> 时间：2012-04-10T06:13:59.630
> 
> 标签：java, jpa, osgi, aries, ipojo

如果是，有人举个例子吗？

# javascript - 带有 CSS 的 Onclick 功能

> ID：10083966
> 
> 赞同：1
> 
> 时间：2012-04-10T06:14:26.487
> 
> 标签：javascript, jquery, html, css

我正在尝试使用 CSS 设计公共汽车座位安排，并使用 CSS 完成了悬停部分，但下一部分是选择单击后应该在背景图像中更改**的座位。**我为每个座位使用不同的 ID。使用以下代码

```
.myClass {
    background:url('images/transparent-backgro-seatlayout.gif') 0 -60px;
}

document.getElementById("w1").className += " myClass"; 
```

但这不起作用。由于我对java脚本不太了解，我无法解决我的问题。请帮忙。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-10T06:27:26.003

如果您使用 jQuery，这可能很简单：

```
$("#w1").click(function() {
  $(this).addClass('myClass');
}); 
```

请注意，通过使用 $(this) 您会自动引用被单击的元素。这很方便，因为您提到有许多可点击的座位，每个座位都有一个唯一的 ID。与为每个可点击座位（“w1”、“w2”等）手动创建事件处理程序不同，使用匹配任何座位的选择器更简单。假设所有座位都在一个 ID 为“seats”的标签内，并且每个座位都用一个“a”标签表示：

```
$("#seats a").click(function() {
  $(this).addClass('myClass');
}); 
```

所以你的标记会是这样的：

```
<div id="seats">
  <a id="w1">seat 1</a>
  <a id="w2">seat 2</a>
  ....
</div> 
```

此外，如果您希望用户能够再次单击座位以取消选择它，请使用 toggleClass 而不是 addClass：

```
$("#seats a").click(function() {
  $(this).toggleClass('myClass');
}); 
```

请注意，您不必使用 jquery 来实现所有这些。您可以使用原始 javascript 来完成，也可以使用不同的 javascript 框架。但是，如果您有选择，jquery 会使编码变得容易得多。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-10T06:27:04.927

我建议你使用[jQuery，它可以轻松实现这种事情](http://api.jquery.com/addClass/)。在你的情况下，你会有

```
 $("#w1").addClass("myClass"); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-10T12:24:55.407

```
function changeImage(this){
   var el;
   el.classname = 'updatedImgClass';
} 
```

当我们通过传递它的对象点击特定座位时触发上述函数

# delphi - 如何在 DataSnap 中的 JSON 编组中跳过字段序列化？

> ID：10083967
> 
> 赞同：6
> 
> 时间：2012-04-10T06:14:26.627
> 
> 标签：delphi, delphi-xe2, datasnap

在 Delphi XE2 DataSnap 的 JSON 编组中是否有一种通用的方法来跳过字段序列化？

```
TBizObjects = class
  DataObject: TDataObject; -- skip this field on serializaing descendants
end;

Model = class(TBizObject); 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-04-11T11:57:26.990

解决方案非常简单，但隐藏得非常好。[`JSONMarshalled`](http://docwiki.embarcadero.com/Libraries/en/Data.DBXJSONReflect.JSONMarshalled)对于不想序列化或反序列化的字段，您应该将class 属性设置为 False。

假设您已声明要编组的以下类：

```
type
  TPerson = class
  private
    FName: string;
    FSurname: string;
    FHeight: Integer;
  public
    constructor Create;
    destructor Destroy; override;
  end; 
```

在这个声明中，只有`FName`and`FHeight`会被序列化和反序列化，`FSurname`会被省略：

```
type
  TPerson = class
  private
    FName: string;
    [JSONMarshalled(False)]
    FSurname: string;
    FHeight: Integer;
  public
    constructor Create;
    destructor Destroy; override;
  end; 
```

在这里，您可以使用一些代码：

```
unit Unit1;

interface

uses
  Winapi.Windows, Winapi.Messages, System.SysUtils, System.Variants,
  System.Classes, Vcl.Graphics, Vcl.Controls, Vcl.Forms, Vcl.Dialogs,
  Vcl.StdCtrls, Data.DBXJSON, Data.DBXJSONReflect;

type
  TPerson = class
  private
    FName: string;
    // try to comment and uncomment the following line and see the result
    [JSONMarshalled(False)]
    FSurname: string;
    FHeight: Integer;
  end;

type
  TForm1 = class(TForm)
    Memo1: TMemo;
    Button1: TButton;
    procedure Button1Click(Sender: TObject);
  private
    { Private declarations }
  public
    { Public declarations }
  end;

var
  Form1: TForm1;

implementation

{$R *.dfm}

procedure TForm1.Button1Click(Sender: TObject);
var
  Person: TPerson;
  JSONString: string;
  JSONMarshal: TJSONMarshal;
  JSONUnMarshal: TJSONUnMarshal;
begin
  JSONMarshal := TJSONMarshal.Create(TJSONConverter.Create);
  try
    Person := TPerson.Create;
    try
      Person.FName := 'Petra';
      Person.FSurname := 'Kvitova';
      Person.FHeight := 183;

      JSONString := JSONMarshal.Marshal(Person).ToString;
      Memo1.Text := JSONString;
    finally
      FreeAndNil(Person);
    end;
  finally
    JSONMarshal.Free;
  end;

  JSONUnMarshal := TJSONUnMarshal.Create;
  try
    Person := JSONUnMarshal.Unmarshal(TJSONObject.ParseJSONValue(JSONString)) as TPerson;
    try
      ShowMessage(
        'Name: ' + Person.FName + sLineBreak +
        'Surname: ' + Person.FSurname + sLineBreak +
        'Height: ' + IntToStr(Person.FHeight) + ' cm'
      );
    finally
      Person.Free;
    end;
  finally
    JSONUnMarshal.Free;
  end;
end;

end. 
```

# android - 基于 GPS 的应用程序设计

> ID：10083973
> 
> 赞同：0
> 
> 时间：2012-04-10T06:15:14.010
> 
> 标签：android, locationlistener

我的困境是关于如何设计具有以下功能的应用程序：

1.  相机预览。（必须在 ui 线程上）
2.  应要求进行大量图像处理（考虑可能在使用 AIDL 的远程服务上，甚至考虑使用 asyncTask 进行处理，以免保留用户界面）
3.  更新全局变量的位置监听器（在应用层）

我真的不知道让主要活动来实现 LocationListener 是否明智——这对 ui 不是很糟糕吗？还有其他方法可以实现吗？

10 倍。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-10T06:28:50.497

我看不出在活动中收听位置更新对 UI 有何不利影响。

对 UI 不利的是 UI 线程上的重量级进程，因为当 UI 线程超过几秒钟没有响应时，Android 会显示 Application Not Responding 对话框。

但是在收听位置更新的情况下，即使您将活动设置为侦听器，UI 线程也不会发生这种情况。

# javascript - 防止覆盖提供的内部函数的方法

> ID：10083977
> 
> 赞同：2
> 
> 时间：2012-04-10T06:15:37.923
> 
> 标签：javascript, plugins, interface

我有一个迷你框架的以下代码。我如何“防弹”我的代码，以便可能的拖欠开发人员不会破坏它？我在评论中总结了代码的作用，这里[有一个演示以供澄清](http://jsfiddle.net/sTjqR/1/)

```
var kit = (function() {
    'use strict';

    //internal cache
    var internal = {
        core: {}
    }

    //external interface for extensions
    //let's say we provide a hook for error handling from the core
    var external = {
        core: {
            error: {
                addListener: function(callback) {
                    callback();
                }
            }
        }
    }

    //externally available options
    var core = {
        //build extension by creating an instance of the passed function
        //providing it the core interface, and 
        //then store the instance in the cache
        extend: function(extensionName, extensionDefinition) {
            var newExtension = new extensionDefinition(external.core)
            internal.core[extensionName] = newExtension;
        }
    };

    //expose
    return {
        core: {
            extend: core.extend
        },
        _internal: internal,
        _external: external
    }

}());

//let's say two developers built these extensions

//developer1 builds his code
kit.core.extend('extension1', function(core) {
    core.error.addListener(function() {
        alert('test');
    })

    //developer1 intentionally kills the whole error interface
    core.error = null;

});

//now, the other scripts cannot use the error interface
//because some delinquent developer killed it
kit.core.extend('extension2', function(core) {

    //core.error is no more!

    core.error.addListener(function() {
        alert('test');
    })
}); 
```

我该如何做到这一点，以便每个扩展都有一个独立的`core`外部函数“副本”，所以无论它们对它做什么，它都不会影响其他扩展？

一个附带的问题，如果我可以补充的话：有没有更好的方法/方法来构建这个代码？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-10T06:28:43.007

如果您试图使您的代码免受意外干扰，那么：

```
(function(window, undefined) { 
  …
}(window)); 
```

不是怎么做的。您不知道全局上下文中的*窗口*引用（它可能根本不存在），您知道**唯一**安全的引用是*this*，它必须引用全局对象，所以：

```
(function(global, undefined) { 
  …
}(this)); 
```

更安全。

在 IIFE 中没有任何东西可以访问您的代码，因此它和 javascript 一样安全，但它肯定不安全。任何将其源提供给客户端的系统本质上都是不安全的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-10T06:21:26.747

研究使用 defineProperty 及其表兄弟。有了这个，您可以微调公共对象中属性的功能，并防止任何人更改它们。有关完整的详细信息，请参阅[http://ecma262-5.com/ELS5_HTML.htm#Section_8.6](http://ecma262-5.com/ELS5_HTML.htm#Section_8.6)

# php - 单击提交按钮后重定向到另一个页面并传递变量

> ID：10083998
> 
> 赞同：0
> 
> 时间：2012-04-10T06:17:05.893
> 
> 标签：php, javascript, mysql, forms, reload

我有一个具有自提交表单的脚本。在那个 php 脚本上，我将数据插入到数据库中。我想使用 mysql_insert_id() 存储最后插入的 id 并以另一种也是自我提交的形式使用它。

我想要做的是在提交表单 1 之后，存储最后插入的 id，重新加载页面并在 url 中传递最后插入的 id（使用 javascript 重新加载）。www.web.com?inserted_id=12312

并获取该 ID 并以另一种形式使用它。

我要怎么做？

我无法使用 jquery 加载，这是我重新加载页面的代码：

```
window.location = '<?php echo $_SERVER["REQUEST_URI"]?>' 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-10T06:21:14.807

我想要做的是在提交表单 1 之后，存储最后插入的 id，重新加载页面并在 url 中传递最后插入的 id。

--- 使用 PHP 会话保存最后插入的 id。然后你可以在任何你想要的地方使用它。