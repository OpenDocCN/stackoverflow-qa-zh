# StackOverflow 问答 11430000-11430999

# javascript - 乘法表？

> ID：11430000
> 
> 赞同：0
> 
> 时间：2012-07-11T09:53:02.307
> 
> 标签：javascript, html, jsp

我需要编写 2 个具有以下属性的网页：

*   表单（决定这应该是 html 还是 jsp 文件）。
    表单包含一个带有两个字段的 HTML 表单：一个文本输入（称为“大小”）和一个按钮。

单击按钮时，会出现另一个页面。

*   表（决定这是 HTML 还是 JSP）
    表显示了乘法表，直到上一页中的“大小”。

示例：
如果单击 3，则输出将是：

```
1 2 3
2 4 6
3 6 9 
```

此外，向表格添加一个按钮，以便按下此按钮将使表格消失。

这是我的表单代码

```
<%@page contentType="text/html" pageEncoding="UTF-8"%>
<!DOCTYPE html>
<html>
<body>
    <h1>multiplication table</h1>
    <form action="form_action.jsp" method="get">
        Size: <input type="size" name="size" size="35" /><br /> 
        <input type="submit" value="Submit" />
    </form>
    <p>Click on the submit button, and the input will be sent to a page
        on the server called "form_action.jsp".</p>
</body>
</html> 
```

和我的页面生成乘法表

```
<%@ page language="java" contentType="text/html; charset=UTF-8"
    pageEncoding="UTF-8"%>
<head>
<title>Calculation from a form</title>
</head>
<body>
    <div>Calculation</div>
    <table border="Calculation">
        <%
            String temp = request.getParameter("number");
            int x = Integer.parseInt(temp);
            String table = "<table border='1' id='mytable'>";
            for (int row = 1; row < 11; row++) {
        %>
        <tr>
            <%
                for (int column = 1; column < 11; column++) {
            %>
            <td><tt><%=row * column%></tt></td>
            <%
                }
            %>
        </tr>
        <%
            }
        %>
    </table>
</body> 
```

谁能帮我开始这个？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-11T10:17:33.297

在您的第一页中，您输入了名为 size`<input type="size" name="size" size="35" />`的内容，但`form_action.jsp`您试图从中获取价值`number`

```
String temp = request.getParameter("number"); 
```

将其更改为`size`

```
String temp = request.getParameter("size"); 
```

您正在将此值解析为，`int x`但您从未在`for`s 中使用它。纠正它，它会没事的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-11T10:23:55.060

这就是你想要的：form_action.jsp

```
<%@page contentType="text/html" pageEncoding="UTF-8"%>
<!DOCTYPE html>
<html>
<body>
    <h1>multiplication table</h1>
    <table border="1">
        <%
            int size = Integer.valueOf(request.getParameter("size"));
            for (int row = 1; row <= size; row++) {
            %>
            <tr>
            <%
                for (int column = 1; column <= size; column++) {
                    %>
                    <td><%=row*column %></td>
                    <%
                }
            %>
            </tr>
            <%
            }
        %>
    </table>
</body>
</html> 
```

# android - 在 Acer Iconia 7" 平板电脑上收听音量增大和减小键事件具有相反的效果

> ID：11430001
> 
> 赞同：0
> 
> 时间：2012-07-11T09:53:12.900
> 
> 标签：android, volume, keyevent

我正在捕获 VOLUME_UP 和 VOLUME_DOWN 键以分别增加减少我的应用程序中的值。我使用以下代码：

```
@Override
public boolean dispatchKeyEvent(KeyEvent event) {
    int action = event.getAction();
    int keyCode = event.getKeyCode();
    switch (keyCode) {
    case KeyEvent.KEYCODE_VOLUME_UP:
        if (action == KeyEvent.ACTION_UP) {
            // Do something to increase a value
        }
        return true;
    case KeyEvent.KEYCODE_VOLUME_DOWN:
        if (action == KeyEvent.ACTION_DOWN) {
            // Do something to decrease a value
        }
        return true;
    default:
        return super.dispatchKeyEvent(event);
    }
} 
```

这在大多数设备上都可以正常工作，但是，我们的一位用户报告说，在 Acer Iconia 7" 平板电脑上，按钮有相反的效果？！即音量增大会减小值，而音量减小会增大它。应用程序固定为纵向，所以没有方向变化。什么可能导致这种效果？我如何在没有实际设备的情况下进行测试？我可以为此设备以通用（首选）或特定方式解决这个问题吗？

感谢您分享您的想法，

干杯，

约翰

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-11T11:42:55.873

我怀疑它认为设备的自然方向是纵向的，并且不补偿方向变化（其他一些设备会这样做）。

当您以纵向握持设备时，下方的按钮是否会降低音量？

当您将设备旋转到横向时，同一个按钮是否仍然会降低音量，即使直观上它应该是提高音量？

我在另一台 Acer 制造的 7 英寸平板电脑上注意到了这种行为，并将所述行为报告为错误（或至少是功能请求）。

# javascript - 使用jquery循环超时时如何更新寻呼机图标

> ID：11430002
> 
> 赞同：1
> 
> 时间：2012-07-11T09:53:13.437
> 
> 标签：javascript, jquery, timeout, cycle

基本上我已经创建了一个带有 jquery 循环的幻灯片，它具有按钮和寻呼机导航 - 每次按下“下一个”或“上一个”按钮时，寻呼机都会更新以表示正在显示哪张幻灯片。现在我想在幻灯片中添加一个计时器并再次更新寻呼机导航图像以表示正在显示哪张幻灯片。我试过使用 timeoutFn，但我无法让它工作。这是目前的一些代码-我正在使用全局变量'currentBut'，所以我知道我当前在哪张幻灯片上。

```
$(document).ready(function() {

    var currentBut = "";
    var lastButIndex = 0;

    $('#slide').cycle({ 
    fx:     'scrollHorz',
    speed:  'slow', 
    timeout: 0, 
    next:   '#next', 
    prev:   '#previous',
    pager:  '#pager',
    pagerAnchorBuilder: function(idx, el) {

         lastButIndex = idx;
         return '<a src="" class="test" id="but'+idx+'"  href="#"><img src="gfx/slideshowBut.jpg"></a>';
     }
    });
    currentBut = $("#but0");
    currentBut.children(1).attr("src","gfx/slideshowButPressed.jpg"); 

    $("#next").click(function(){    

        $(currentBut).children(1).attr("src","gfx/slideshowBut.jpg");
        $(currentBut).next().children(1).attr("src","gfx/slideshowButPressed.jpg");

        if($(currentBut).is(':last-child'))
        {
            $("#but0").children(1).attr("src","gfx/slideshowButPressed.jpg");
            currentBut = $("#but0");

        }
        else{
            currentBut = $(currentBut).next();
        }

    });

    $("#previous").click(function(){        
        $(currentBut).children(1).attr("src","gfx/slideshowBut.jpg");
        $(currentBut).prev().children(1).attr("src","gfx/slideshowButPressed.jpg"); 

        if($(currentBut).is(':first-child'))
        {               
            $("#but"+lastButIndex).children(1).attr("src","gfx/slideshowButPressed.jpg");
            currentBut = $("#but"+lastButIndex);
        }
        else{
            currentBut = $(currentBut).prev();
        }

    }); 
```

但是我现在对如何适应它有点困惑——任何想法都将不胜感激！谢谢。

# python - 在单个 POST 请求中创建相关记录

> ID：11430003
> 
> 赞同：0
> 
> 时间：2012-07-11T09:53:14.103
> 
> 标签：python, django, tastypie

使用 sweetpie，我将如何在单个 POST 请求中创建一条记录和几条相关记录？

例如，我有这两个资源：

```
class SongResource(ModelResource):
    playlists = fields.ToManyField('playlists.api.resources.PlaylistResource', 'playlist_set', related_name = "song", full=True)

    class Meta:
        queryset = Song.objects.all();
        resource_name = 'song'
        authorization = Authorization()

class PlaylistResource(ModelResource):
    song = fields.ToOneField(SongResource, 'song', full=True)

    class Meta:
        queryset = Playlist.objects.all()
        resource_name = 'playlist'
        authorization = Authorization() 
```

我想使用带有数据的发布请求一次性创建一个新的播放列表及其歌曲，如下所示：

```
 var data = JSON.stringify({
        'name': 'My playlist.',
        'songs': [{'title': 'Song 1'}, {'title': 'Song 2'}, {'title': 'Song 3'}]
    }); 
```

那是行不通的。有人告诉我，“'song' 字段的数据不是 URI，不是字典，也没有 'pk' 属性”。是否可以像这样一举插入唱片，还是我需要为播放列表和每首歌曲发送单独的请求？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-11T22:22:17.267

只是从非常非常快地玩弄它（而且我是新来的美味派，所以带着一粒盐） - 我认为你可以通过覆盖资源中的 obj_create() 方法来做到这一点。像这样的东西：

```
class SomeResource(ModelResource):
    class Meta:
        # yadda yadda

    def obj_create(self, bundle, request, **kwargs):
        print "hey we're in object create"
        # do something with bundle.data, this will have your songs in it
        return super(SomeResource, self).obj_create(bundle, request, **kwargs) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-11T22:56:43.637

You want to do something like this:

```
curl --dump-header - -H "Content-Type: application/json" -X POST --data '{"name":"playlist_name", "field2":"value2", "song": ["/api/v1/song/1/"]}' http://localhost:8000/api/v1/playlist/ 
```

Good luck!

# c# - 使用 ConfigurationManager 无法读取配置

> ID：11430004
> 
> 赞同：1
> 
> 时间：2012-07-11T09:53:14.377
> 
> 标签：c#, .net, xml, configuration, configurationmanager

我第一次尝试使用 ConfigurationManager，这就是我所做的：

**1.)**创建了一个新项目 (TestProject) **2.)**右键单击​​ TestProject -> 添加 -> 新项目 -> 应用程序配置文件（名称：Conf.config） **3.)**我编辑了文件，使其看起来像这样：

```
<?xml version="1.0" encoding="utf-8" ?>
<configuration>
  <appSettings>
    <add key="key1" value="output1"/>
    <add key="key2" value="output2"/>
    <add key="key3" value="output3"/>
  </appSettings>
</configuration> 
```

现在，如果我尝试阅读配置，我的代码告诉我它是空的：/

```
 NameValueCollection appSettings = ConfigurationManager.AppSettings;

    if (appSettings.Count == 0) //always true
        Console.WriteLine("something is wrong"); 
```

即使我尝试`ConfigurationManager.AppSettings["key1"]`我也没有得到任何输出。嗯我做错了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-11T10:01:31.293

如果您正在进行测试，请尝试模拟您的环境，而不是访问配置文件、数据库等。

```
public interface IFooConfiguration
{
    public string Key1 { get; }
    public string Key2 { get; }
    public string Key3 { get; }
} 
```

像这样实现这个接口：

```
public class FooConfiguration
{
   public string Key1
   {
      get { return ConfigurationManager.AppSettings["key1"]; }
   }
} 
```

但是对于您的测试，请使用模拟配置（例如，我使用了 Moq）：

```
Mock<IFooConfiguration> mock = new Mock<IFooConfiguration>();
mock.Setup(foo => foo.Key1).Returns("output1");
var sut = new Sut(mock.Object); 
```

BTW 应用程序配置文件应该有 name `App.config`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-11T10:30:44.380

您应该重新构建项目，因为应该将新配置复制到构建目录。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-09-13T10:15:56.127

在控制台应用程序中使用 App.config 而不是 .config。尝试在控制台项目中使用 EF6 时遇到了同样的问题 - 它只是不起作用。经过一堆试验和错误，将设置移动到 app.config 为我做到了:)

# c# - 从 ASP.NET C# 中的推送 URL 中获取参数

> ID：11430007
> 
> 赞同：0
> 
> 时间：2012-07-11T09:53:24.137
> 
> 标签：c#, asp.net, rest, webforms

我正在尝试使用第 3 方 REST API 的服务，他们将参数推送到我的 URL 上。就像是：

```
http://domainname/location.aspx?information=MM/DD/YY HH:MM:SS AM/PM 
```

其中 domainname 是我的网站，而 location.aspx 是我的页面，它将读取正在推送的参数。如何在 ASP.NET Web Forms C# 中获取“信息”参数？谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-11T09:55:35.857

```
string information = Request["information"]; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-11T10:01:56.733

```
string information = Request.QueryString["information"] 
```

还有 jquery/javascript 方法。[参考这篇文章](https://stackoverflow.com/questions/901115/get-query-string-values-in-javascript)

# javascript - getJSON Uncaught SyntaxError: Unexpected token :

> ID：11430009
> 
> 赞同：1
> 
> 时间：2012-07-11T09:53:29.887
> 
> 标签：javascript, jquery, ajax, json

我知道有很多相同的问题都有答案，但我似乎无法解决我的问题。

我使用的代码：

```
$.getJSON("http://maps.googleapis.com/maps/api/geocode/json?latlng=" + results[0].geometry.location.lat() + "," + results[0].geometry.location.lng() + "&sensor=false&callback=?", function (data) {
    if (data[0]) {
        alert(data[0].formatted_address);
    }
}); 
```

当我转到 url 但不在我的应用程序中时，我可以获得 json 结果。如果我删除了`&callback=?`我会收到 XmlHttpRequest 错误，但如果我删除了，我会收到标题错误。我从一些答案中读到，我实际上应该期待一个格式像 ({json-content}) 而不是我得到的 {json-content} 的 json。如果是这样，我如何获得正确的格式？

**编辑**

JSON输出：

```
{
   "results" : [
     Uncaught SyntaxError: Unexpected token :
  {
     "address_components" : [
        {
           "long_name" : "81",
           "short_name" : "81",
           "types" : [ "street_number" ]
        },
        {
           "long_name" : "Grange Rd",
           "short_name" : "Grange Rd",
           "types" : [ "route" ]
        },
        {
           "long_name" : "Tanglin",
           "short_name" : "Tanglin",
           "types" : [ "sublocality", "political" ]
        },
        {
           "long_name" : "Singapore",
           "short_name" : "Singapore",
           "types" : [ "locality", "political" ]
        },
        {
           "long_name" : "Singapore",
           "short_name" : "SG",
           "types" : [ "country", "political" ]
        },
        {
           "long_name" : "249586",
           "short_name" : "249586",
           "types" : [ "postal_code" ]
        }
     ],
     "formatted_address" : "81 Grange Rd, Singapore 249586",
     "geometry" : {
        "location" : {
           "lat" : 1.3029390,
           "lng" : 103.8230960
        },
        "location_type" : "ROOFTOP",
        "viewport" : {
           "northeast" : {
              "lat" : 1.304287980291502,
              "lng" : 103.8244449802915
           },
           "southwest" : {
              "lat" : 1.301590019708498,
              "lng" : 103.8217470197085
           }
        }
     },
     "types" : [ "street_address" ]
  },
  {
     "address_components" : [
        {
           "long_name" : "249586",
           "short_name" : "249586",
           "types" : [ "postal_code" ]
        },
        {
           "long_name" : "Tanglin",
           "short_name" : "Tanglin",
           "types" : [ "sublocality", "political" ]
        },
        {
           "long_name" : "Singapore",
           "short_name" : "Singapore",
           "types" : [ "locality", "political" ]
        },
        {
           "long_name" : "Singapore",
           "short_name" : "SG",
           "types" : [ "country", "political" ]
        }
     ],
     "formatted_address" : "Singapore 249586",
     "geometry" : {
        "location" : {
           "lat" : 1.3029390,
           "lng" : 103.8230960
        },
        "location_type" : "APPROXIMATE",
        "viewport" : {
           "northeast" : {
              "lat" : 1.304287980291502,
              "lng" : 103.8244449802915
           },
           "southwest" : {
              "lat" : 1.301590019708498,
              "lng" : 103.8217470197085
           }
        }
     },
     "types" : [ "postal_code" ]
  },
  {
     "address_components" : [
        {
           "long_name" : "248649",
           "short_name" : "248649",
           "types" : [ "postal_code" ]
        },
        {
           "long_name" : "Orchard",
           "short_name" : "Orchard",
           "types" : [ "sublocality", "political" ]
        },
        {
           "long_name" : "Singapore",
           "short_name" : "Singapore",
           "types" : [ "locality", "political" ]
        },
        {
           "long_name" : "Singapore",
           "short_name" : "SG",
           "types" : [ "country", "political" ]
        }
     ],
     "formatted_address" : "Singapore 248649",
     "geometry" : {
        "bounds" : {
           "northeast" : {
              "lat" : 1.30441750,
              "lng" : 103.82452430
           },
           "southwest" : {
              "lat" : 1.30206850,
              "lng" : 103.82307520
           }
        },
        "location" : {
           "lat" : 1.3030750,
           "lng" : 103.8242460
        },
        "location_type" : "APPROXIMATE",
        "viewport" : {
           "northeast" : {
              "lat" : 1.304591980291502,
              "lng" : 103.8251487302915
           },
           "southwest" : {
              "lat" : 1.301894019708498,
              "lng" : 103.8224507697085
           }
        }
     },
     "types" : [ "postal_code" ]
  },
  {
     "address_components" : [
        {
           "long_name" : "248643",
           "short_name" : "248643",
           "types" : [ "postal_code" ]
        },
        {
           "long_name" : "River Valley",
           "short_name" : "River Valley",
           "types" : [ "sublocality", "political" ]
        },
        {
           "long_name" : "Singapore",
           "short_name" : "Singapore",
           "types" : [ "locality", "political" ]
        },
        {
           "long_name" : "Singapore",
           "short_name" : "SG",
           "types" : [ "country", "political" ]
        }
     ],
     "formatted_address" : "Singapore 248643",
     "geometry" : {
        "bounds" : {
           "northeast" : {
              "lat" : 1.3032470,
              "lng" : 103.82452430
           },
           "southwest" : {
              "lat" : 1.30206850,
              "lng" : 103.82307520
           }
        },
        "location" : {
           "lat" : 1.3021720,
           "lng" : 103.8244280
        },
        "location_type" : "APPROXIMATE",
        "viewport" : {
           "northeast" : {
              "lat" : 1.304006730291502,
              "lng" : 103.8251487302915
           },
           "southwest" : {
              "lat" : 1.301308769708498,
              "lng" : 103.8224507697085
           }
        }
     },
     "types" : [ "postal_code" ]
  },
  {
     "address_components" : [
        {
           "long_name" : "Tanglin",
           "short_name" : "Tanglin",
           "types" : [ "sublocality", "political" ]
        },
        {
           "long_name" : "Singapore",
           "short_name" : "Singapore",
           "types" : [ "locality", "political" ]
        },
        {
           "long_name" : "Singapore",
           "short_name" : "SG",
           "types" : [ "country", "political" ]
        }
     ],
     "formatted_address" : "Tanglin, Singapore",
     "geometry" : {
        "bounds" : {
           "northeast" : {
              "lat" : 1.32350930,
              "lng" : 103.83548650
           },
           "southwest" : {
              "lat" : 1.2919460,
              "lng" : 103.80224340
           }
        },
        "location" : {
           "lat" : 1.29907550,
           "lng" : 103.8164260
        },
        "location_type" : "APPROXIMATE",
        "viewport" : {
           "northeast" : {
              "lat" : 1.32350930,
              "lng" : 103.83548650
           },
           "southwest" : {
              "lat" : 1.2919460,
              "lng" : 103.80224340
           }
        }
     },
     "types" : [ "sublocality", "political" ]
  },
  {
     "address_components" : [
        {
           "long_name" : "Singapore",
           "short_name" : "SG",
           "types" : [ "country", "political" ]
        }
     ],
     "formatted_address" : "Singapore",
     "geometry" : {
        "bounds" : {
           "northeast" : {
              "lat" : 1.47077350,
              "lng" : 104.0843810
           },
           "southwest" : {
              "lat" : 1.19737070,
              "lng" : 103.61036090
           }
        },
        "location" : {
           "lat" : 1.3520830,
           "lng" : 103.8198360
        },
        "location_type" : "APPROXIMATE",
        "viewport" : {
           "northeast" : {
              "lat" : 1.47077350,
              "lng" : 104.0843810
           },
           "southwest" : {
              "lat" : 1.19737070,
              "lng" : 103.61036090
           }
        }
     },
     "types" : [ "country", "political" ]
  },
  {
     "address_components" : [
        {
           "long_name" : "Singapore",
           "short_name" : "Singapore",
           "types" : [ "locality", "political" ]
        },
        {
           "long_name" : "Singapore",
           "short_name" : "SG",
           "types" : [ "country", "political" ]
        }
     ],
     "formatted_address" : "Singapore",
     "geometry" : {
        "bounds" : {
           "northeast" : {
              "lat" : 1.47077350,
              "lng" : 104.0843810
           },
           "southwest" : {
              "lat" : 1.19737070,
              "lng" : 103.61036090
           }
        },
        "location" : {
           "lat" : 1.28943650,
           "lng" : 103.84998020
        },
        "location_type" : "APPROXIMATE",
        "viewport" : {
           "northeast" : {
              "lat" : 1.47077350,
              "lng" : 104.0843810
           },
           "southwest" : {
              "lat" : 1.19737070,
              "lng" : 103.61036090
           }
        }
     },
     "types" : [ "locality", "political" ]
  }
   ],
   "status" : "OK"
} 
```

JSON链接地址：

`http://maps.googleapis.com/maps/api/geocode/json?latlng=1.302939,103.82309600000008&sensor=false&callback=jQuery17208982370237354189_1341999317106&_=1341999317754`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-11T10:03:01.553

对此 api的支持`JSONP`已被删除-意味着它`JSON`不会返回`JSONP`-这就是您收到该错误的原因

[重复的答案在这里提供了一个很好的选择](https://stackoverflow.com/questions/5659663/jquery-and-google-maps-json-response)或类似的东西：

```
<script type="text/javascript" src="http://maps.google.com/maps/api/js?sensor=false"></script>
<script type="text/javascript">

var geocoder = new google.maps.Geocoder();
var latlong = new google.maps.LatLng("37.5097258429375","-122.27783203125");

geocoder.geocode({
    'latLng': latlong
}, function(results, status) {

    if (status == google.maps.GeocoderStatus.OK) {
        alert(results[0].formatted_address);
    }
});​
</script> 
```

[这里的工作示例](http://jsfiddle.net/manseuk/GxN2Q/)

[API 文档在这里](https://developers.google.com/maps/documentation/geocoding/)

# linux - 如何从 Google Chrome for Linux（Fedora）上的代理中排除某些域或 IP 地址？

> ID：11430011
> 
> 赞同：1
> 
> 时间：2012-07-11T09:53:32.887
> 
> 标签：linux, google-chrome, proxy, fedora

我将代理服务器设置为 Fedora。

当通过 Google Chrome for Linux（Fedora）访问某些 IP 地址时，我不想使用代理。

我应该怎么办 ？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-26T14:01:44.437

Fedora 网络代理窗口不包含忽略列表。相反，访问

> 应用程序 > 系统工具 > dconf 编辑器。

在编辑器中，转到

> 系统 > 代理

`ignore-hosts`并通过添加相对 IP/域来编辑值

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-11T10:02:15.190

转到 chrome 设置 [或在地址栏上键入 chrome://settings/] 点击底部的显示高级设置链接。

单击网络部分下的更改代理设置按钮。它将弹出一个窗口（它是系统的“网络代理首选项”窗口）。单击忽略的主机选项卡并添加 IP 地址

# c++ - 如何保证函数在 C++ 中是内联的

> ID：11430015
> 
> 赞同：1
> 
> 时间：2012-07-11T09:53:39.083
> 
> 标签：c++, inline-functions

在 C++ 中，可以使用`inline`关键字将函数定义为内联。就像程序员要求编译器在每个调用函数的地方插入完整的函数体一样。

但据我所知，编译器没有义务尊重这一要求。那么有没有办法保证一个函数是内联的呢？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-07-11T09:57:38.343

没有。实际上内联一个函数是一个完整的实现细节，很多函数*是不能*内联的。这使得内联强制机制的存在成为不可能。在某些情况下，即使提供诸如`__forceinline`(VC++)之类的关键字的编译器*也不会*使用该限定符内联函数。该页面对滥用此限定词进行了非常恰当的警告。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-07-11T10:00:18.657

`__forceinline`在 VC++ 和`__attribute__((always_inline))`g++ 中使用

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-07-11T09:56:56.047

由于标准未涵盖此内容，因此取决于您使用的编译器。编译器的文档将告诉您是否有强制内联函数的功能，以及如何使用它。文档还应该告诉您该功能的限制，例如非尾部位置的递归调用。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-11T09:57:17.690

如果您使用的是 Microsoft 编译器，则可以使用 __forceinline，如下所述：http: [//msdn.microsoft.com/en-us/library/z8y1yy88%28v=vs.71%29.aspx](http://msdn.microsoft.com/en-us/library/z8y1yy88%28v=vs.71%29.aspx)

我不知道在 g++ 或其他编译器中强制内联的方法。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-07-11T10:00:31.367

通过将函数的定义直接放入头文件中的声明中，该函数获得内联的机会最高。

```
class TheClass
{
public:
    static void DoSomething () // declaration
    {
        // the function's code (definition) goes here
    };
};

// in the same header..

void DoOtherThings () // declaration
{
    // the function's code (definition) goes here
} 
```

在任何情况下，都*没有*强有力的保证，即使您使用编译器特定的关键字进行内联强制也是如此。

100% 的保证是将您的函数转换为 C++ 宏并使用宏而不是引用该函数。如果您的函数有多行，`\`请在“宏函数”中要换行的位置放置一个（空格后跟反斜杠）。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-07-11T10:01:08.637

我无法想象有办法做到这一点。它主要依赖于编译器。另一种解决方案是使用#define 宏来定义您的函数

# ruby-on-rails - Rails - 检索未来关联的最佳方式

> ID：11430017
> 
> 赞同：0
> 
> 时间：2012-07-11T09:53:47.780
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3

我有以下情况。

我有一个有很多会议的项目模型，其中有一个日期。

```
class Project < ActiveRecord::Model
    has_many :meetings
end

class Meeting < ActiveRecord::Model
    belongs_to :project

    validates_presence_of :meeting_date
end 
```

**检索未来**会议（即 meeting.meeting_date > Time.now）的清洁和最有效的方法是什么？

非常感谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-11T09:56:19.233

在你的会议模型中试试这个：

```
scope :future_meetings, lambda{where(["meetings.meeting_date > ?",Time.now])} 
```

参考它：

```
@project.meetings.future_meetings 
```

# java - 最佳数据库迁移方法？

> ID：11430018
> 
> 赞同：2
> 
> 时间：2012-07-11T09:53:49.867
> 
> 标签：java, database, oracle, hibernate, jpa

我想知道将大量旧数据迁移到新系统数据库的方法是什么（表名和列与旧系统不同 - 需要映射表和列）？

1）是否应该是数据库到数据库（意味着编写脚本从旧数据库中提取数据并仔细映射并将其放入新数据库）？在上面写单元测试来检查完整性。

（或者）

2）我应该使用新的系统模型（使用Java Persistence API）程序从旧数据库中提取数据，然后将其放入对象（Hibernate 或JPA Entity 对象）并持久化它们吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-11T10:02:11.727

和第一个一起去。这就是 ETL 工具的诞生。

我不建议编写 Java 程序。开发和测试一次性使用需要付出很大的努力。为工作使用正确的工具。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-11T10:03:26.547

我目前正在进行从 MySQL 到 Oracle 的数据迁移，我发现最好遵循这个过程。

1.  转储旧的数据库结构并在新的数据库系统上重新创建它
2.  为两个系统指定数据映射
3.  使用旧结构将旧数据导入新系统。
4.  创建新的数据库结构。
5.  编写 SQL 语句，将数据从旧结构导入新结构。

这将最大限度地减少您可能遇到的任何数据完整性问题和数据映射问题。

# c# - Document.NewPage() 不添加新页面

> ID：11430019
> 
> 赞同：1
> 
> 时间：2012-07-11T09:53:50.267
> 
> 标签：c#, pdf, report, itextsharp, itext

我正在尝试向 pdf 文档添加一个新页面，但是由于某种原因这没有发生。也许我的另一个问题[https://stackoverflow.com/questions/11428878/itextsharp-splitlate-not-working](https://stackoverflow.com/questions/11428878/itextsharp-splitlate-not-working)与此有关，因为此问题中的表格没有中断，也没有创建新页面。这是我用于添加新页面的代码：

```
Document doc = new iTextSharp.text.Document(iTextSharp.text.PageSize.A4.Rotate(),20,20,20,40);
string rep1Name;                 // variable to hold the file name of the first part of the report
rep1Name = Guid.NewGuid().ToString() + ".pdf";

FileStream output = new FileStream(System.Web.HttpContext.Current.Server.MapPath("~/ReportGeneratedFiles/reports/" + rep1Name), FileMode.Create);
PdfWriter pdfWriter = PdfWriter.GetInstance(doc, output);

doc.Open();
doc.NewPage();
doc.NewPage();
doc.Close(); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-12T17:43:56.407

只是调用 a`newPage()`不会添加任何空白页。
您需要让作者知道该页面是空的。

**示例**：请参阅使用 Java的[NewPage 示例。](http://itextpdf.com/examples/iia.php?id=99)希望同样的方法也适用于 C#。

```
public class PdfNewPageExample
{
    // throws DocumentException, FileNotFoundException
    public static void main( String ... a ) throws Exception
    {
        String fileHome = System.getProperty( "user.home" ) + "/Desktop/";
        String pdfFileName = "Pdf-NewPage-Example.pdf";

        // step 1
        Document document = new Document();
        // step 2
        FileOutputStream fos = new FileOutputStream( fileHome + pdfFileName );
        PdfWriter writer = PdfWriter.getInstance( document, FileOutputStream );
        // step 3
        document.open();

        // step 4
        document.add( new Paragraph( "This page will NOT be followed by a blank page!" ) );

        document.newPage();
        // we don't add anything to this page: newPage() will be ignored

        document.newPage();
        document.add( new Paragraph( "This page will be followed by a blank page!" ) );

        document.newPage();

        writer.setPageEmpty( false );
        document.newPage();
        document.add( new Paragraph( "The previous page was a blank page!" ) );
        // step 5
        document.close();

        System.out.println( "Done ..." );
    } // psvm( .. )
} // class PdfNewPageExample 
```

# javascript - 如何等到显示回调（qtip2）中的ajax函数完成？

> ID：11430020
> 
> 赞同：1
> 
> 时间：2012-07-11T09:53:52.687
> 
> 标签：javascript, jquery, ajax, qtip2

我正在使用`qtip2`收费提示：

```
function setupTolltip() {
    $("g path").each(function () {
        var path = $(this);
        var sessionId = $("#rsr").attr("data-session");
        var clientId = $("#rsr").attr("data-client");
        $(this).qtip(
            {
                content: {
                    text: function () {
                        var allPlaces = $(this).attr("data-all");
                        var freePlaces = $(this).attr("data-free");
                        var price = $(this).attr("data-price");
                        var tooltipText = "<div>All: " + allPlaces + "<br/>Free: " + freePlaces + "<br/> Price: " + price + "</div>";
                        return tooltipText;
                    }
                },
                events: {
                    show: function () {
                        var levelId = path.attr("level");
                        updateLevelInfo(path, levelId, sessionId, clientId);

                    }
                },
                position: {
                    target: 'mouse',
                    adjust: {
                        x: 10
                    }
                },
                style: {
                    classes: 'ui-tooltip-tipsy ui-tooltip-shadow',
                    tip: true
                }
            });
    });
} 
```

当工具提示显示我拨打电话`updateLevelInfo`功能。此函数发出 ajax 请求并更新使用`qtip`. 问题在于这是 ajax 请求（我不能使用`$.get`）并且工具提示在函数完成执行之前显示。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-11T20:12:54.760

为什么不使用这个官方演示中使用的[AJAX](http://craigsworks.com/projects/qtip2/demos/#ajax)[对象](http://craigsworks.com/projects/qtip2/docs/plugins/ajax/)？

您应该始终显示“正在加载”的信息或图像，因此如果在加载内容之前显示工具提示就没有问题。（再次参见[Ajax 演示](http://craigsworks.com/projects/qtip2/demos/#ajax)）

如果您想使用`show`功能，请使用`show: function(event, api)`（请参阅[此示例](http://craigsworks.com/projects/qtip2/docs/api/events/#show)）。然后使用 var`api`并将其放入您的函数中：

`updateLevelInfo(path, levelId, sessionId, clientId, api);`

然后你就可以在你的函数中完成你的工作后操纵工具提示！

# python - 为什么编码并不总是有效？

> ID：11430021
> 
> 赞同：2
> 
> 时间：2012-07-11T09:53:52.913
> 
> 标签：python, unicode, encoding, utf-8

我有一个 Python 代码，它试图读取用西里尔字母（例如俄语）编写的 RSS 源。这是我使用的代码：

```
import feedparser
from urllib2 import Request, urlopen

d=feedparser.parse(source_url)

# Make a loop over the entries of the RSS feed.
for e in d.entries:
    # Get the title of the news.
    title = e.title
    title = title.replace(' ','%20')
    title = title.encode('utf-8')

    # Get the URL of the entry.
    url = e.link
    url = url.encode('utf-8')

    # Make the request. 
    address = 'http://example.org/save_link.php?title=' + title + '&source=' + source_name + '&url=' + url

    # Submit the link.
    req = Request(address)
    f = urlopen(req) 
```

我使用`encode('utf-8')`的是因为标题是用西里尔字母给出的，而且效果很好。[这里](http://k.img.com.ua/rss/ua/news.xml)是 RSS 源的一个示例。当我尝试从另一个 URL 读取 RSS 源列表时出现问题。更详细地说，有一个网页包含 RSS 源列表（源的 URL 以及以西里尔字母给出的名称）。列表示例如下：

```
<!DOCTYPE HTML PUBLIC '-//W3C//DTD HTML 4.01 Transitional//EN' 'http://www.w3.org/TR/html4/loose.dtd'>
<html>
<head>
<title></title>
<meta http-equiv='Content-Type' content='text/html;charset=utf-8'>

ua, Корреспондент, http://k.img.com.ua/rss/ua/news.xml
ua, Українська Правда, http://www.pravda.com.ua/rss/

</body>
</html> 
```

当我尝试将 encode('utf-8') 应用于本文档中给出的西里尔字母时，就会出现问题。我得到一个`UnicodeDecodeError`. 有人知道为什么吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-11T10:03:17.747

`encode`仅`UnicodeDecodeError`当您向它提供一个`str`对象，然后它会尝试解码为它时才会给出`unicode`；见[http://wiki.python.org/moin/UnicodeDecodeError](http://wiki.python.org/moin/UnicodeDecodeError)。

您需要先将`str`对象解码为`unicode`：

```
name = name.decode('utf-8') 
```

这将采用`str`UTF-8 编码并为您提供一个`unicode`对象。

它适用于您发布的代码，因为`feedparser`返回的提要数据已经解码为`unicode`.

# java - 为什么 JAX-WS 导出的对象需要默认构造函数？

> ID：11430022
> 
> 赞同：5
> 
> 时间：2012-07-11T09:53:55.100
> 
> 标签：java, xml, jaxb, jax-ws, jax-ws-customization

JAX-WS 要求传输的所有类都具有默认构造函数（无参数构造函数）。我不理解这个要求，因为客户基于 WSDL 创建自己的类。IMO 此要求仅对用作 Web 服务输入参数的类有意义。

有谁知道如何规避这个要求？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-12T15:06:21.300

当您使用*JAX-WS*时，您正在使用*JAXB*实现将您的 java 对象序列化为*XML*。

**因此，“问题”是 JAXB 的工作方式。**

要使用*JAXB*，您需要创建一个*JAXBContext*，将所有可以编组/解组的类传递给它。创建上下文时，*JAXB*将检查所有给定类是否具有无参数构造函数。如果这些类中至少有一个没有这种构造函数，则不会创建上下文。

为什么*JAXB*这样做？它仅在从 XML 转换为 Object（解组）时才需要此无参数构造函数，但问题是当您创建上下文时，JAXB 不知道您想要做什么（编组或解组）！

*结论：* JAXB 将只接受它可以编组和解组的类。更多信息[在这里](https://stackoverflow.com/questions/4155361/what-jaxb-needs-a-public-no-arg-constructor-for)

**知道了这一点，在 JAX-WS 中会发生什么？**

当您声明*参数*和*返回值*`@WebMethod`类时，将添加到 JAXB 上下文中。正因为如此，所有与 Web 服务输入和输出相关的类都需要一个无参数构造函数。

 ***结论：*是 JAXB 故障 ;-)

**但是如果我需要使用一个没有无参数构造函数的类呢？**

您可以使用*XMLAdapter*！检查[此帖子](https://stackoverflow.com/questions/4387296/jaxb-and-constructors)以获取更多信息...

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2012-07-11T09:57:21.043

> 有谁知道如何规避这个要求？

是的 - 重写 JAX-WS。

它可能使用默认 ctor 和反射来填充对象，因为它不能轻易知道像您这样的人可能编写的每个可能的 ctor。

这是使用别人的框架的一个缺点：你必须遵守他们的规则。

> 客户端基于 WSDL 创建自己的类

我认为这就是图书馆帮助客户做的事情。您没有编写代码来解析和解释 WSDL，是吗？**

# jquery - 查找项目是否存在于列表中

> ID：11430025
> 
> 赞同：0
> 
> 时间：2012-07-11T09:54:18.967
> 
> 标签：jquery, jquery-ui

我有一个清单：

```
<ul id="coll-selected-list" class="droptrue sort-drop ui-sortable">
              <li class="sortedli" style="">blah</li>
              <li class="sortedli" style="">blee</li>
              <li class="sortedli" style="">blu</li>
              <li class="sortedli" style="">blum</li>
</ul> 
```

我想检查它是否存在于上面的列表中。但是我的代码不起作用，有什么想法吗？

```
var itemName = "blah";
           if ($("#coll-selected-list li:contains(" + itemName + ")").length) {
               alert("exists");
           } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-11T09:57:48.233

[您可以通过根据元素内部文本](http://api.jquery.com/text/)[过滤](http://api.jquery.com/filter/)元素并查看有多少元素与过滤器匹配来确定元素是否存在：

```
var exists = $("#coll-selected-list > li")
                 .filter(function() { return $(this).text() == "blah" })
                 .length
             != 0; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-11T09:58:57.827

添加引号：

```
if ($('#coll-selected-list li:contains("' + itemName + '")').length) { 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-11T09:59:46.883

```
var itemName = "blah";
           if ($("#coll-selected-list li:contains('" + itemName + "')").length>0) {
               alert("exists");
           }​ 
```

您缺少包含的引号

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-11T10:01:00.203

缺少来自包含的引号

```
var itemName = "blah";
if ($('#coll-selected-list li:contains("' + itemName + '")').length) {
    alert("exists");
} 
```

[**演示。**](http://jsbin.com/unakag/edit#preview)

# c# - 如何将光标移动到 C# 富文本框中的下一个单词

> ID：11430028
> 
> 赞同：1
> 
> 时间：2012-07-11T09:54:31.363
> 
> 标签：c#

在 C# 中，如何将光标移动到富文本框中的下一个单词？例如

给定句子

“他是个男孩”

假设当前光标位于“is”之前，即“He”之后，我想将其移动到“a”之前的位置，即“is”之后。

可以`richtextbox.SelectionStart`用来执行这样的动作吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-11T10:06:07.250

您应该尝试使用 .Find(Char) 方法查找下一个空格的位置。

```
int x = richtextbox.Find(' ');
richtextbox.SelectionStart = x;
richtextbox.Focus(); 
```

没有可能测试它，但我应该工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-11T10:08:00.340

如果您不介意使用 SendKeys，那么下面的示例将满足您的要求

```
public partial class Form1 : Form
{
    public Form1()
    {
        InitializeComponent();
    }

    private void button1_Click(object sender, EventArgs e)
    {
        richTextBox1.Focus();
        SendKeys.SendWait("^{LEFT}");
    }

    private void button2_Click(object sender, EventArgs e)
    {
        richTextBox1.Focus();
        SendKeys.SendWait("^{RIGHT}");
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-11T10:13:55.703

这应该有效：

```
int curr = richTextBox1.SelectionStart;

int x = Regex.Match(richTextBox1.Text.Substring(curr), @"\s[^\s]").Index;

if (x != 0)
    richTextBox1.SelectionStart = x + curr + 1;

richTextBox1.Focus(); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-02-05T16:55:21.407

如果您的意图是搜索一个词；突出显示它并将光标移动到找到的单词： 注意：搜索按钮的工作方式为“每次点击”；所以每次点击；它将在richtextBox 文本文档中搜索下一个匹配的单词。

```
 // Search text and Highlight it (Per Click)
    // Manually add the "FindText"
    public int FindText(string txtToSearch, int searchStart, int searchEnd)
    {
        // Unselect the previously searched string
        if (searchStart > 0 && searchEnd > 0 && IndexOfSearchText >= 0)
        { rtb.Undo(); }

        // Set the return value to -1 by default.
        int retVal = -1;

        // A valid starting index should be specified.
        // if indexOfSearchText = -1, the end of search
        if (searchStart >= 0 && IndexOfSearchText >= 0)
        {
            // A valid ending index
            if (searchEnd > searchStart || searchEnd == -1)
            {
                // Find the position of search string in RichTextBox
                IndexOfSearchText = rtb.Find(txtToSearch, searchStart, searchEnd, RichTextBoxFinds.None);
                // Determine whether the text was found in richTextBox1.
                if (IndexOfSearchText != -1)
                {
                    // Return the index to the specified search text.
                    retVal = IndexOfSearchText;
                }
            }
        }
        return retVal;
    }

    // Button to Perform the Search (By Click)
    private void btn_Search_Click(object sender, EventArgs e)
    {
        int startIndex = 0;

        if (txt_Search.Text.Length > 0) startIndex = FindText(txt_Search.Text.Trim(), start, rtb.Text.Length);

        // If string was found in the RichTextBox, highlight it
        if (startIndex >= 0)
        {
            int x = rtb.Find(txt_Search.Text);
            rtb.SelectionStart = x;
            rtb.Focus();
            // Set the highlight color as red
            rtb.SelectionBackColor = Color.LightYellow;  // Remove to avoid minor Bug
            rtb.SelectionColor = Color.Black;            // Remove to avoid Minor Bug
            // Find the end index. End Index = number of characters in textbox
            int endindex = txt_Search.Text.Length;
            // Highlight the search string
            rtb.Select(startIndex, endindex);
            // mark the start position after the position of
            // last search string
            start = startIndex + endindex;
        }

    }

    // TextBox to Search
    private void txt_Search_TextChanged(object sender, EventArgs e)
    {
        start = 0;
        IndexOfSearchText = 0;
    }
} 
```

}

希望这可以帮助。

# xml - 从 excel 导出 xml 文件时，日期变为 5 位数字

> ID：11430032
> 
> 赞同：1
> 
> 时间：2012-07-11T09:55:05.283
> 
> 标签：xml, excel

从 excel 导出 xml 文件时，日期变为 5 位数字。07/01/2010 变为 40185。当我将单元格的格式从日期更改为一般时，也会发生同样的事情。有什么方法可以将 5 位数字与日期匹配？或者以某种方式将日期字段保留在 xml 文件中？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-11T10:05:22.690

Excel 将日期存储为浮点数。在 Windows 上，整数部分是自 1900 年 1 月 1 日（午夜）以来的天数，小数部分显示时间。`.0`午夜也是如此，`.5`中午`.99999`也是如此`11.59.59 PM`。

另请参阅[http://support.microsoft.com/kb/214094](http://support.microsoft.com/kb/214094)

注意：在 Mac 上，Excel 使用 1904 年 1 月 2 日作为开始日期（如果您对此感到好奇，请阅读Joel Spolsky 的[My First BillG Review](http://www.joelonsoftware.com/items/2006/06/16.html)，它并不能完全解释这里发生了什么，但读起来很棒） ，但您仍然可以在 Mac 和 PC 之间传输文件，因为日期格式存储在 Excel 文件中。

# android - Android 测试存储模拟

> ID：11430033
> 
> 赞同：5
> 
> 时间：2012-07-11T09:55:05.480
> 
> 标签：android, unit-testing, mocking, tdd, storage

我的应用程序使用存储，但为了测试，我想用模拟对象或类似的东西**代替它。**这在Android中可能吗？如果是，您能否提供一个示例链接，如何做到这一点？谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-19T21:03:27.610

您可以使用模拟框架来执行此操作。查看[这个问题和答案](https://stackoverflow.com/questions/3337505/mocking-library-framework-that-works-best-in-android)，了解可与 Android 完美配合的模拟框架列表。我个人推荐 Mockito，它最近得到了 Android 的支持。

现在的问题是要模拟什么。您可以尝试直接模拟数据存储机制，但我建议将数据存储包装在另一层抽象中。这将为您提供一个干净的接缝，以便在测试时注入模拟。这种设计总体上还为您提供了更大的灵活性（例如，您可以更改特定类型的数据存储而不影响应用程序的业务逻辑）。

让我知道这是否是您正在寻找的信息。

# android - android中的clickale表布局

> ID：11430044
> 
> 赞同：1
> 
> 时间：2012-07-11T09:55:39.377
> 
> 标签：android, tablelayout

在我的应用程序中，我有一个包含 4 行的表格布局。在 1 行中，我显示了 2 个数据，它们之间有一些空间，看起来像有 2 列。现在我想要的是我必须通过单击这些数据来开始不同的意图。当我单击第一列时，它应该启动一个意图，单击第二列应该启动另一个意图。是否可以在表格布局中定义区域。请帮助我。

这是我的表格布局代码：

```
<LinearLayout
     xmlns:android="http://schemas.android.com/apk/res/android"
     android:paddingTop="4dip"
     android:paddingBottom="6dip"
     android:layout_width="fill_parent"
     android:layout_height="fill_parent"
     android:orientation="vertical">    
<TableLayout 
        android:id="@+id/tablelayout"
        android:layout_height="wrap_content"
        android:layout_width="fill_parent"
        android:paddingRight="2dip"
        android:stretchColumns="0,1">

    <TableRow  >
 <TextView android:layout_width="wrap_content" android:layout_height="wrap_content" android:text="Income">
     </TextView>      

        <TextView             
            android:layout_width="wrap_content" android:layout_height="wrap_content" android:text="Expense" android:layout_marginLeft="-150dp">
     </TextView>                     

    </TableRow>    
        <TableRow
            android:layout_width="wrap_content"
            android:layout_height="wrap_content" >

            <View
                android:id="@+id/line1"
                android:layout_width="wrap_content"
                android:layout_height="1dip"
                android:layout_weight="1"
                android:background="#FF909090"
                android:padding="2dip" />
        </TableRow>

    <TableRow android:id="@+id/tablerowhouse"   android:layout_marginTop="30px">
 <TextView android:layout_width="wrap_content" android:layout_height="wrap_content" android:text="Household:" >
     </TextView>            
        <TextView             
            android:id="@+id/text50" android:layout_width="wrap_content" android:layout_height="wrap_content" android:text="Household:" android:layout_marginLeft="-250dp" >
     </TextView>   

          <TextView android:layout_width="wrap_content" android:layout_height="wrap_content" android:text="Household:" android:layout_marginLeft="-150dp" >
     </TextView>            
        <TextView             
            android:id="@+id/text53" android:layout_width="wrap_content" android:layout_height="wrap_content" android:text="Household:" android:layout_marginLeft="-70dp" >
     </TextView>    

    </TableRow>

        <TableRow
            android:layout_width="wrap_content"
            android:layout_height="wrap_content" >

            <View
                android:id="@+id/line1"
                android:layout_width="wrap_content"
                android:layout_height="1dip"
                android:layout_weight="1"
                android:background="#FF909090"
                android:padding="2dip" />
        </TableRow>

 <TableRow  android:layout_marginTop="40px">
 <TextView android:layout_width="wrap_content" android:layout_height="wrap_content" android:text="Travel:" android:layout_span="3">
     </TextView>     
      <TextView
           android:id="@+id/text51"
           android:layout_width="wrap_content" android:layout_height="wrap_content" android:text="Travel" android:layout_marginLeft="-250dp">
     </TextView>     

           <TextView android:layout_width="wrap_content" android:layout_height="wrap_content" android:text="Travel:" android:layout_marginLeft="-150dp" >
     </TextView>            
        <TextView             
            android:id="@+id/text54" android:layout_width="wrap_content" android:layout_height="wrap_content" android:text="Travel:" android:layout_marginLeft="-70dp">
     </TextView>    
 </TableRow>

     <TableRow
            android:layout_width="wrap_content"
            android:layout_height="wrap_content" >

            <View
                android:id="@+id/line1"
                android:layout_width="wrap_content"
                android:layout_height="1dip"
                android:layout_weight="1"
                android:background="#FF909090"
                android:padding="2dip" />
        </TableRow>

     <TableRow  android:layout_marginTop="40px">
 <TextView android:layout_width="wrap_content" android:layout_height="wrap_content" android:text="Education:" android:layout_span="4">
     </TextView>     
      <TextView
           android:id="@+id/text52"
           android:layout_width="wrap_content" android:layout_height="wrap_content" android:text="Education" android:layout_marginLeft="-250dp">
     </TextView>  

           <TextView android:layout_width="wrap_content" android:layout_height="wrap_content" android:text="Education:" android:layout_marginLeft="-150dp" >
     </TextView>            
        <TextView             
            android:id="@+id/text55" android:layout_width="wrap_content" android:layout_height="wrap_content" android:text="Education:"  android:layout_marginLeft="-70dp">
     </TextView>    
 </TableRow>

          <TableRow
            android:layout_width="wrap_content"
            android:layout_height="wrap_content" >

            <View
                android:id="@+id/line1"
                android:layout_width="wrap_content"
                android:layout_height="1dip"
                android:layout_weight="1"
                android:background="#FF909090"
                android:padding="2dip" />
        </TableRow>

          <TableRow  android:layout_marginTop="40px">
 <TextView android:layout_width="wrap_content" android:layout_height="wrap_content" android:text="Total:" android:layout_span="5">
     </TextView>     
      <TextView
           android:id="@+id/totincome" 
           android:layout_width="wrap_content" android:layout_height="wrap_content" android:text="Total" android:layout_marginLeft="-250dp">
     </TextView>  

           <TextView android:layout_width="wrap_content" android:layout_height="wrap_content" android:text="Total:" android:layout_marginLeft="-150dp" >
     </TextView>            
        <TextView             
            android:id="@+id/totexpense" android:layout_width="wrap_content" android:layout_height="wrap_content" android:text="Total:"  android:layout_marginLeft="-10dp">
     </TextView>    
 </TableRow>

               <TableRow  android:layout_marginTop="40px">
 <TextView android:layout_width="wrap_content" android:layout_height="wrap_content" android:text="Balance:" android:layout_span="6"  android:layout_marginLeft="100dp" >
     </TextView>     
      <TextView
           android:id="@+id/balance"
           android:layout_width="wrap_content" android:layout_height="wrap_content" android:text="balance" android:layout_marginLeft="-150dp" >
     </TextView>  

 </TableRow>

</TableLayout>
</LinearLayout> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-11T10:24:13.767

初始化后只需将点击事件添加到单个文本

```
 Text1.setOnClickListener(new View.OnClickListener() {

                @Override
                public void onClick(View v) {
                    // TODO Auto-generated method stub

  Intent  i = new Intent(this, MainMenu.class);
        startActivity(i);
                }
            }); 
```

# php - 我是否在我的服务器上禁用了输出缓冲

> ID：11430049
> 
> 赞同：0
> 
> 时间：2012-07-11T09:56:01.823
> 
> 标签：php, buffering

我已经尝试了该站点上帖子中的各种方法来检查输出缓冲是否已打开并正常工作。

这是我的源代码

```
 <?php 
    ob_start();
    if(ini_get('output_buffering')) { echo 'it is on'; } else { echo 'dosent seem to be  working';}
  ?> 
```

“剂量似乎有效”的结果

我已经尝试使用 phpinfo 函数来检查我的服务器详细信息

output_buffering 无值 无值

我只是检查不正确还是很可能禁用了输出缓冲？如果它被禁用，为什么会这样？Do It 公司有充分的理由禁用 OB。

谢谢

# java - 发送电子邮件 (Java)

> ID：11430050
> 
> 赞同：1
> 
> 时间：2012-07-11T09:56:02.213
> 
> 标签：java

只要按下按钮，下面的代码就会打开 Outlook 电子邮件。有没有办法自动将文件连同主题一起附加到邮件中？

```
public void onSubmit() {
            try {
                Desktop.getDesktop().browse(new URI("mailto:username@domain.com"));
            } catch (IOException e) {
                // TODO Auto-generated catch block
                e.printStackTrace();
            } catch (URISyntaxException e) {
                // TODO Auto-generated catch block
                e.printStackTrace();
            }       
    } 
```

我尝试将桌面行更改为此。这应该工作吗？它没有编译：

```
 Desktop.getDesktop().browse(new URI('mailto:username@domain.com?subject=New_Profile&body=see attachment&attachment="xyz.xml"')); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-11T13:41:04.227

```
Desktop desktop = Desktop.getDesktop(); 
    String message = "mailto:username@domain.com?subject=New_Profile&body=seeAttachment&attachment=c:/Update8.txt"; 
    URI uri = URI.create(message); 
    desktop.mail(uri); 
```

但是，您不能自动将任何内容附加到电子邮件中，只能手动附加。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-11T09:59:36.537

不，没有办法附加文件。您可以指定主题和正文。

[http://skm.zoomquiet.org/data/20100419224556/index.html](http://skm.zoomquiet.org/data/20100419224556/index.html)

顺便说一句，您不是通过这种方式通过 Java 发送邮件。标签和问题不是关于同一个主题。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-11T09:59:37.317

您可以通过执行以下操作指定主题：

```
Desktop.getDesktop().browse(new URI("mailto:username@domain.com?subject=My+subject")); 
```

请注意，主题需要进行 URL 编码。

据我所知，没有通用的方法来添加附件，尽管一些邮件客户端可能有特定于供应商的方法来做到这一点。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-11T10:00:21.607

简短的回答是否定的。Jave 不支持通过这种方式连接附件，这已经让我烦恼了 2 年。

长答案是，您可以使用 mapi 和 jni 让它工作，但要为受伤的世界做好准备，因为并非所有邮件客户端都是平等的

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-11T10:00:23.007

[如何使用 Java 发送带有附件的电子邮件。](http://www.java-tips.org/other-api-tips/javamail/how-to-send-an-email-with-a-file-attachment.html)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2016-09-20T22:29:23.393

是的，你可以做到。我下面的代码完美无缺。用它

只需调用此函数即可向客户发送自动电子邮件。在参数中“to”是您要发送电子邮件的电子邮件地址。

附加pdf参考**[https://www.tutorialspoint.com/java/java_sending_email.htm](https://www.tutorialspoint.com/java/java_sending_email.htm)**

我通常在 Maven 项目中这样做。如果您使用的是 maven 项目，则导入以下依赖项。 **[https://mvnrepository.com/artifact/javax.mail/mail/1.4](https://mvnrepository.com/artifact/javax.mail/mail/1.4)**

```
private void sendMail(String to, String subject, String emailBody) throws MessagingException{
    final String username = "youremail@gmail.com";
    final String password = "emailPassword";

    Properties props = new Properties();
    props.put("mail.smtp.auth", "true");
    props.put("mail.smtp.starttls.enable", "true");
    props.put("mail.smtp.host", "smtp.gmail.com");
    props.put("mail.smtp.port", "587");

    Session session = Session.getInstance(props,
            new javax.mail.Authenticator() {
        protected PasswordAuthentication getPasswordAuthentication() {
            return new PasswordAuthentication(username, password);
        }
    });

    try {

        Message message = new MimeMessage(session);
        message.setFrom(new InternetAddress("shubham20.yeole@gmail.com"));
        message.setRecipients(Message.RecipientType.TO,
                InternetAddress.parse(to));
        message.setSubject(subject);
        message.setContent(emailBody, "text/html; charset=utf-8");

        Transport.send(message);

        System.out.println("Done");

    } catch (MessagingException e) {
        throw new RuntimeException(e);
    }
} 
```

}

# c - 无法使用 c 的 fopen() 打开放置在工作目录中的现有文件

> ID：11430051
> 
> 赞同：0
> 
> 时间：2012-07-11T09:56:03.567
> 
> 标签：c, gps, fopen

我正在开发基于开源库的 gps 处理软件。这个库为我提供了一个 RINEX 文件阅读器，它可以打开包含 gps 导航消息或观测数据以及许多数据处理功能的现有文件。上面引用的 gps 数据文件的内容用于填充结构成员，这些成员由执行数据处理的算法使用。

我的问题是 RINEX 阅读器功能可以正确读取包含观测数据的文件（文件类型：yyO，其中 yy 是观测年份的最右边的两个数字）但它无法打开我作为输入提供的任何导航消息文件（文件类型：yyN)。

在调试会话之后，我意识到 reader 的函数为这种类型的文件返回了一个**NULL**文件指针。奇怪的是，这些文件存在于程序的工作目录中并且没有损坏。

我进一步提供了相关的**代码**块：

我的主要来电代码：

```
int main(){
int stat; //Identifier of RINEX file status.

//Memory allocation for a "stat_t" variable (initialization of its members will be done when the program flow passes into the "rinex.c" file functions):
sta_t *st = (sta_t *) malloc(sizeof(sta_t));
//Get current working directory (for debugging):
char directory[_MAX_PATH];
_getcwd(directory, sizeof(directory));
printf("Current working directory: %s \n", directory);
//Initialize options structure members:
init_opt_members();
//Initialize processing options structure members:
init_prcopt_members();
//Initialization of observation data structure members (NULL: obs data not available):
init_obs_members();
//Initialization of navigation data structure members (NULL: nav data not available):
init_nav_members();
//Initialization of solution parameters data structure members (NULL: ...):
init_sol_members();

//Read configuration file and update the values of processing options struct:
loadopts("prcopt.txt", opt);
getsysopts(op, NULL, NULL);

//Read RINEX nav file:
stat = readrnx("IOAN.12N", 1, NULL, na, st); //ob = NULL
printf("Reader status = %d \n", stat);

//Read RINEX obs file:
stat = readrnx("IOAN.12O", 1, ob, NULL, st); //na = NULL, st members values will be updated by obs file header data.
printf("Reader status = %d \n", stat);

//Call the single-point positioning function:
stat = pntpos(ob->data, ob->n, na, op, so, NULL, NULL, "Error!");
printf("Single point pos status = %d \n", stat);

system("PAUSE");
return 0;
} 
```

其中 readrnx() 函数（由库提供）是：

```
extern int readrnx(const char *file, int rcv, obs_t *obs, nav_t *nav, sta_t *sta)
{
gtime_t t={0};

trace(3,"readrnx : file=%s rcv=%d\n",file,rcv);

return readrnxt(file,rcv,t,t,0.0,obs,nav,sta);
} 
```

readrnxt() 有时会调用文件解压缩和打开函数 readrnxfile()。这是（从那里的标准库实现略微修改）：

```
static int readrnxfile(const char *file, gtime_t ts, gtime_t te, double tint,
                   int flag, int index, char *type, obs_t *obs, nav_t *nav,
                   sta_t *sta)
{
FILE *fp = NULL;
int cstat,stat;
char tmpfile[1024];

trace(3,"readrnxfile: file=%s flag=%d index=%d\n",file,flag,index);

if (sta) init_sta(sta);

/* uncompress file */
/*if ((cstat=uncompress(file,tmpfile))<0) {
    trace(2,"rinex file uncompact error: %s\n",file);
    return 0;
}*/
/*if (!(fp=fopen(cstat?tmpfile:file,"r"))) {
    trace(2,"rinex file open error: %s\n",cstat?tmpfile:file);
    return 0;
}*/
//It can't open nav files!
if (!(fp=fopen(file,"r"))) {
    trace(2,"rinex file open error: %s\n",file);
    printf("opening file failed: %s\n", strerror(errno)); //For debugging.
    return 0;
}
/* read rinex file */
stat=readrnxfp(fp,ts,te,tint,flag,index,type,obs,nav,sta);

fclose(fp);

/* delete temporary file */
//if (cstat) remove(tmpfile);

return stat;
} 
```

通过打印**errno**，我发现上述引用的文件打开错误，仅在上述函数尝试打开导航消息文件时发生。

**编辑**：忘了说我已经检查了文件权限（我使用的是 Windows 7）并且我使用的是 Microsoft Visual Studio 2008 专业版。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-11T11:07:13.307

您可以尝试打印出完整的文件名，并检查它是否可用。此外，您可能需要检查文件是否可以打开。是不是被别的东西打开了？

# json - 无法解析字典值

> ID：11430054
> 
> 赞同：0
> 
> 时间：2012-07-11T09:56:16.813
> 
> 标签：json, windows-phone-7

我正在尝试从 json 文件中解析字典，如下所示

```
{
    "appname":"App Name",
    "taborder":[
                "Street",
                "Country"
                ],
    "home":{
        "type":"grid",
        "items":[
                 "Street",
                 "Country"
                 ]
        }
} 
```

起初，我无法获得有关它的详细信息，`appname`我`taborder`的问题就在[这里](https://stackoverflow.com/questions/11406881/retrieve-dictionary-values-from-json-file/11407593#comment15072881_11407593)。我在那里找到了一个解决方案，通过实施它，我得到了`taborder and appname`

以同样的方式，我试图检索字典的值，如下所示

“家”：{“类型”：“网格”，“项目”：[“约会”，“到达”，]}

以下是我的一段代码

```
public class JavaScriptRequest
    {
        public string appname { get; set; }
        public List<string> taborder { get; set; }
        public Dictionary<string, string> home { get; set; }
    }

    JavaScriptRequest obj = DeserializeJavaScriptRequest(typeof(JavaScriptRequest), contents) as JavaScriptRequest;
    MessageBox.Show(obj.appname+obj.home); 
```

如何从字典中获取值，请帮助我

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-11T10:39:40.747

试试这个类结构

```
 public class JavaScriptRequest
    {
        public string appname { get; set; }
        public string[] taborder { get; set; }
        public JavaScriptRequest1 home { get; set; }

    }
    public class JavaScriptRequest1
    {
        public string type{get;set;}
        public string[] items{get;set;}
    } 
```

# linq - Linq 将列表拆分为子列表然后迭代

> ID：11430056
> 
> 赞同：0
> 
> 时间：2012-07-11T09:56:20.457
> 
> 标签：linq

我有一个`list: User{name, groupname}`，我有一个函数`AddGroupMemberstip`，它需要一个用户列表和一个组名。我需要根据用户的组名拆分用户，然后将其输入此函数。

例如，我理想地想做

```
var groups = users.<SOME LINQ FUNCTION>(u => u.groupname);

foreach(var group in groups)
{
   AddGroupMembership(users.value, users.key);
} 
```

where`users.value`将是 a`IEnumerable<User>`并且`users.key`将是他们都共享的组名（对于该子组）。

请有人可以提出一些建议。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-11T10:01:13.303

您正在寻找[`GroupBy`](http://msdn.microsoft.com/en-us/library/system.linq.enumerable.groupby.aspx)：

```
foreach (var g in users.GroupBy(u => u.groupname))
{
    AddGroupMembership(g, g.Key);
} 
```

每个组`g`本身就是一个`IEnumerable<User>`，因此在将第一个参数传递给 时没有`.value`属性访问`AddGroupMembership`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-11T10:03:19.487

你可能会做这样的事情：

```
var grouped = from user in users
              group user by user.groupname into groupedUsers
              select new {
                  users = groupedUsers,
                  groupName = groupedUsers.FirstOrDefault().groupName
              }; 
```

这将为您提供用户组列表，然后您可以对其进行迭代：

```
foreach (var group in grouped) {
    AddGroupMembership(group.users, group.groupName);
} 
```

这比 Jons 的回答要冗长一些，而且我不能 100% 确定我的语法是正确的，但这是相同的基本思想。

# iphone - UIWebView 未检测到电话号码链接

> ID：11430058
> 
> 赞同：3
> 
> 时间：2012-07-11T09:56:36.487
> 
> 标签：iphone, uiwebview, tel

我正在构建一个带有 UIWebView 的应用程序。

webView 应该加载包含 tel: 链接的 html：

```
<a href="tel:123456789">call me</a> 
```

webView 不会使“呼叫我”链接成为可点击的。

我试过了

```
webView.dataDetectorTypes = UIDataDetectorTypePhoneNumber 
```

但不起作用。

我查看了所有的 stackOverflow Q&A，并没有找到特定于这个问题的答案。

谢谢你的帮助，努尔

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-11T10:31:54.077

代替

```
<a href="tel:123456789"> call me </a> 
```

和

```
<a href="tel://123456789">call me</a> 
```

希望对你有效。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-05-14T10:51:31.213

下面的代码对我有用

添加网页视图

```
web = [[UIWebView alloc] initWithFrame:WEBVIEW_FRAME];
web.dataDetectorTypes = UIDataDetectorTypeLink | UIDataDetectorTypePhoneNumber;
NSURLRequest *req = [NSURLRequest requestWithURL:[NSURL fileURLWithPath:[[NSBundle mainBundle] pathForResource:@"new" ofType:@"html"] isDirectory:NO]];
web.delegate  =self;
[self.view addSubview:web]; 
```

和委托方法

```
-(BOOL)webView:(UIWebView *)webView shouldStartLoadWithRequest:(NSURLRequest *)request
                                            navigationType:(UIWebViewNavigationType)navigationType
{
     if ([url.scheme isEqualToString:@"tel"])
     {
         [[UIApplication sharedApplication] openURL:url];
     }
} 
```

和我的 html 文件

```
 <html>
  <head>
  <h1>HTML PAGE</h1>
  </head>
  <a href="tel:123456789"> call me </a>
  </html> 
```

# iphone - 如何使用核心图形绘制图形

> ID：11430060
> 
> 赞同：1
> 
> 时间：2012-07-11T09:56:38.750
> 
> 标签：iphone

我希望能够仅使用 Apple 框架来绘制图表。

![在此处输入图像描述](../Images/e83b0dffd8e5d098812699568bd28308.png)

这可能只使用CoreGraphics，还是我需要使用任何其他框架？

我不想使用任何第三方框架来绘制图表。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-11T10:14:51.830

是的，当然有可能。像这样的图表只是一条线。您可以使用 UIBezierPath 或 CGPath 来绘制它。通常，您的图表上有一个点数组，然后在构建路径时只需向每个点添加线。

[WWDC 2011 会议 129](https://developer.apple.com/videos/wwdc/2011/?id=129)介绍了如何绘制 Stocks 应用程序中的图形并使其“花哨”，所有这些都使用核心图形。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-11T10:13:06.460

这将是使用 CoreGraphics 执行某些操作的示例代码

```
CGContextBeginPath(context);
CGContextMoveToPoint(context, startX, startY);
CGContextAddLineToPoint(context, nextX, nextY);
// [...] and so on, for all line segments
CGContextSetLineWidth(context, 2);
CGContextSetStrokeColorWithColor(context, [[UIColor blackColor] cgColor]);
CGContextStrokePath(context); 
```

如果你想画轴、标签，我建议使用 CorePlot [http://code.google.com/p/core-plot/](http://code.google.com/p/core-plot/)

# 3d - 在 jmonkeyengine 中为 OGre 3D 模型启用材质和纹理？

> ID：11430062
> 
> 赞同：0
> 
> 时间：2012-07-11T09:56:45.760
> 
> 标签：3d, textures, ogre, jmonkeyengine

我从 WorldForge 下载了模型，我可以将地精的网格引入我的场景，但纹理和材质不会渲染：

![在此处输入图像描述](../Images/375ba0533aa4c3622dc5607427979c28.png)

我使用eclipse，添加的文件如下所示：

![在此处输入图像描述](../Images/b8f0b6a65e107d1051517e089ba25270.png)

我在代码中添加妖精的方式是这样的

```
Spatial model3 = assetManager.loadModel("objects/creatures/goblin/goblin.mesh.xml");
model3.setLocalTranslation(-30.0f, 4.5f, 0.0f);
rootNode.attachChild(model3); 
```

你能帮我如何改进地精吗？文件中有几个纹理和材质定义，但我的场景似乎只加载了 goblin.mesh.xml。

任何帮助是极大的赞赏。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-11T11:52:39.150

我不确定这是否会有所帮助，但请看这里：http: [//jmonkeyengine.org/wiki/doku.php/jme3](http://jmonkeyengine.org/wiki/doku.php/jme3:external:blender) :external:blender ，尤其是在将士兵添加到场景的代码示例中。

我认为您必须在代码中明确声明材料，然后将其附加到代表您的地精的空间。到目前为止，您只导入了网格，在我看来，您还必须以某种方式导入材料。

# linq - 向 LINQ 查询添加方法

> ID：11430065
> 
> 赞同：0
> 
> 时间：2012-07-11T09:56:52.103
> 
> 标签：linq, entity-framework

我正在尝试创建一个简单的 LINQ 查询，如下所示：

```
var query = from o in entities.Orders   
        select new Order
        {
            Firstname = o.FirstName,
            Lastname = GetName()
        }; 
```

在这里，我希望从数据库中获取 FirstName，并且我想从另一个来源提供 Lastname。当我运行它时，我得到一个异常：“LINQ to Entities 无法识别方法 'System.String GetName()' 方法，并且此方法无法转换为存储表达式。”

如何将自己的方法添加到 LINQ 查询？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-11T10:09:02.407

您不能，您必须以其他方式解决您遇到的问题，通常通过拆分为两个投影，一个可能会被转换为 SQL 并在数据库服务器上运行，一个在客户端上运行。

```
var query =
    from o in
        (from o in entities.Orders
         select new
         {
             o.FirstName,
         }).AsEnumerable()
    select new Order
    {
        Firstname = o.FirstName,
        Lastname = GetName()
    }; 
```

注意：结果不是`IQueryable`，您可能添加的任何过滤或排序也将在客户端上运行。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-11T10:08:36.177

您不能将自己的方法添加到 Linq 到实体查询，因为该查询已转换为 SQL 并在 SQL 服务器上执行。唯一允许的自定义方法必须是映射的 SQL 函数或模型定义的函数（在 EDMX 中定义的 ESQL 函数）。

如果您想在 Linq 查询中执行 .NET 方法，您必须首先从 Linq-to-entities 查询中具体化结果（执行 SQL），然后继续在您的应用程序中执行 Linq-to-objects 查询。

# linq - 在不触及值的情况下更新项目

> ID：11430067
> 
> 赞同：1
> 
> 时间：2012-07-11T09:56:57.237
> 
> 标签：linq, linq-to-sql

我正在使用 Linq to SQL 从数据库中查询对象。我通过 wcf 将它传递给客户端应用程序，客户端应用程序对值进行一些更改并将对象发回。我现在要做的是更新数据库的项目以采用新的值。不幸的是，很难先通过查询语句选择对象，修改大约 100 个值，然后再提交更改。

有没有更聪明的方法来使用 linq-to-sql 更新记录而不触及值？我的想法是，如果我仍然有 linq 能够插入的现成对象，是否有办法覆盖数据库中现有的对象？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-12T20:20:47.803

当然，使用[附加](http://msdn.microsoft.com/en-us/library/bb548978)方法。在您的情况下[，这种重载](http://msdn.microsoft.com/en-us/library/bb548778)可能是合适的。

[这个链接](http://blogs.msdn.com/b/dinesh.kulkarni/archive/2007/10/08/attach-if-you-have-something-detached.aspx)提供了一些简洁的信息。

# flash - Spark DropDownList 下拉列表错误地定位在 SWFLoader 中

> ID：11430074
> 
> 赞同：0
> 
> 时间：2012-07-11T09:57:19.123
> 
> 标签：flash, apache-flex, drop-down-menu, offset, swfloader

今天我遇到了这个错误：

[http://bugs.adobe.com/jira/browse/SDK-26147](http://bugs.adobe.com/jira/browse/SDK-26147)

我正在通过 SWFLoader 将另一个团队的应用程序加载到我自己的应用程序中。由于各种原因，我***必须***使用标志 loadForCompatibility 并将其设置为 true。我注意到加载的子应用程序中的所有 spark DropDownList 实例都错误地偏移了它们的下拉列表。由于我的应用程序有一个标题，因此下拉列表垂直偏移标题的高度。MX 版本的 ComboBox 在测试子应用程序中没有这个问题。

我尝试添加该行：

-includes=mx.managers.systemClasses.MarshallingSupport

和

-includes+=mx.managers.systemClasses.MarshallingSupport

到我的应用程序的编译器选项，但它没有效果。

我还注意到，在尝试编写导入语句时，MarshallingSupport 甚至不存在。我使用的是 FlashBuilder 4。我使用的是默认的 SDK (4.1)。子应用程序是相同的。

有什么解决方法吗？难道我做错了什么？为什么必须这样？告诉其他团队将他们所有的 s:DropDownList 切换到 mx:ComboBox 至少可以说是很麻烦的。由于 API 不同，这也将非常耗时。我真的希望我能做些什么来解决这个问题。请告诉我我做错了。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-03T07:36:15.177

好的，所以一种选择是制作一个新的 DropdownListSkin 来修改 AnchorPopUp 的行为。这是一个好的解决方案。但事实证明，有些挣扎，我得到了“-includes+=mx.managers.systemClasses.MarshallingSupport”最终在编译器中工作。通过在 MatrixUtil.getConcatenatedMatrixHelper() 的第 1432 行放置一个断点，我能够确认编组支持是打开还是关闭。或者，您也可以通过以下方式进行检查：

```
 ApplicationDomain.currentDomain.hasDefinition("mx.managers.systemClasses.MarshallingSupport"); 
```

因此，如果您像我一样认为您的编译器选项设置正确，请使用上面的代码来确认您真的对上帝诚实并正确。只要 MatrixUtil 可以访问 MarshallingSupport，那么您的 spark pulldown 等就可以正常工作。

此外，我还从 Adob​​e 论坛获得了一些帮助： [http ://forums.adobe.com/thread/1034957](http://forums.adobe.com/thread/1034957)

编辑：我将此标记为答案，因此 SO 将停止要求我接受答案。

# sql-server - 数据库邮件 SQLServer 2008 和 Outlook 已发送邮件文件夹

> ID：11430076
> 
> 赞同：0
> 
> 时间：2012-07-11T09:57:19.723
> 
> 标签：sql-server, exchange-server, database-mail

我已经为 SQLServer 2008 配置了数据库邮件，我可以通过我们使用 Exchange 的 SMTP 服务器发送电子邮件。问题是我想将发送的消息存储在相应用户的已发送邮件文件夹中，但系统没有这样做。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-11T11:01:58.273

您需要在 Exchange 服务器上启用[消息日志。](http://technet.microsoft.com/en-us/library/aa998649.aspx)

# linq - 遇到关于 LINQ 和 Lambda 的问题

> ID：11430082
> 
> 赞同：0
> 
> 时间：2012-07-11T09:57:40.573
> 
> 标签：linq, lambda, linqpad

根据我的要求，我设法从这个站点获得了一个 linq 查询，但是当我将整个内容粘贴到 linq pad 时它会出错。在这里，我将粘贴完整的 linq 查询，其中出现错误消息，例如**“名称 'grp' 在当前上下文中不存在”**

```
void Main()
{
    List<SearchResult> list = new List<SearchResult>() {
    new SearchResult(){ID=4,Title="Wie man BBA reman erreicht"},
    new SearchResult(){ID=5,Title="Ersatz Airbags, Gurtstrammer und Auto Körper Teile "},
    new SearchResult(){ID=6,Title="JCB Excavator - ECU P/N: 728/35700"},
    new SearchResult(){ID=2,Title="Geo Prism 1995 GEO - ABS #16213899"},
    new SearchResult(){ID=3,Title="Geo Prism 1995 - ABS #16213899"},
    new SearchResult(){ID=1,Title="Geo Prism 1995 GEO GEO- ABS #16213899"},
    };

var to_search = new[] { "Geo", "JCB" };
var result = (from searchResult in list
             let title = searchResult.Title.ToLower()
             let key_string = to_search.FirstOrDefault(ts => title.Contains(ts))
             orderby key_string == null ? -1 : title.Split(new[] { key_string }, StringSplitOptions.None).Length descending
             group searchResult by key_string into Group
             select Group).OrderByDescending(grp => grp.Count()).ThenByDescending(CountStringOccurrences(**grp.Key**, to_search));
}

public int CountStringOccurrences(string text, string[] pattern)
{
// Loop through all instances of the string 'text'.
int count = 0;
foreach (string itm in pattern)
{ 
   int i = 0;
   while ((i = text.IndexOf(itm, i)) != -1)
   {
      i += itm.Length;
      count++;
    }
}
return count;
 }

public class SearchResult{
    public int ID { get; set; }
    public string Title { get; set; }
} 
```

粗体区域抛出错误。谢谢请看。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-11T10:06:10.967

将查询的结尾从

```
ThenByDescending(CountStringOccurrences(grp.Key, to_search)); 
```

至

```
ThenByDescending(grp => CountStringOccurrences(grp.Key, to_search)); 
```

因为[`Enumerable.ThenByDescending`](http://msdn.microsoft.com/en-us/library/bb534736.aspx)需要 keySelector 函数并且您想要传递`searchresult`-Group。

# ruby - Cucumber/Ruby：是否可以拦截来自浏览器的 HTTP 请求/响应？

> ID：11430083
> 
> 赞同：2
> 
> 时间：2012-07-11T09:57:43.600
> 
> 标签：ruby, http, browser, automation, cucumber

我从 Cucumber & Ruby 开始，想知道以下是否可行。

我在一个页面上，我知道当我点击链接时，它会发送一个如下所示的请求： [http ://example.com?param1=value1¶m2=value2](http://example.com?param1=value1&param2=value2)

那么是否可以使用 Ruby 拦截该调用并检索其参数？或者如果没有，关于如何通过自动化测试获得这些值的任何其他想法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-11T11:06:13.533

您要做的就是所谓的测试录音。测试录音有很多缺点，使用它不是一个好主意，请参阅：

*   [使用记录和回放进行回归测试有哪些优点/缺点？](https://softwareengineering.stackexchange.com/questions/128267/what-are-the-advantages-disadvantages-of-using-record-and-playback-for-regression)
*   [黄瓜/水豚与硒？](https://stackoverflow.com/questions/11349369/cucumber-capybara-vs-selenium)

我怀疑有没有可以自动生成 Cucumber 特征的工具。Cucumber 特性旨在用作需求存储、与利益相关者协作的机制和活文档。如果您不需要任何这些方面，则使用 Cucumber 会产生开销。我无法想象测试记录工具会生成看起来足以用于这些目的的功能。

也许有一个工具可以生成特性或纯 Ruby（例如 Capybara）测试。但我怀疑它是否需要，因为 Capybara 测试很容易编写，使用测试记录工具创建的测试很难维护。

# html - 跨页面包装器的 100% 宽度导航

> ID：11430088
> 
> 赞同：2
> 
> 时间：2012-07-11T09:57:53.333
> 
> 标签：html, css, navigation, markup

我在站点包装器中有一个导航，

```
<div id="wrapper">
  <nav>
    <ul>
      <li></li>
      <li></li>
    </ul>
  </nav>
...
</div> 
```

包装器的定义宽度为 960px + margin: 0 auto。我希望导航在整个 100% 身体宽度上延伸，跨越包装器的 960 像素，而不修改标记。

有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-11T09:59:43.480

nav 元素默认内联显示，这就是为什么：

CSS：

```
nav {
   display: block;
} 
```

你去吧：http: [//jsfiddle.net/meo/TBqrA/](http://jsfiddle.net/meo/TBqrA/)

*在你澄清你的问题后*编辑：http:* [//jsfiddle.net/meo/TBqrA/2/](http://jsfiddle.net/meo/TBqrA/2/)你可以使用绝对位置...*

 *绝对定位元素相对于下一个相对位置、固定或绝对位置（或简称为主体）的元素定位。只要确保你的包装是位置：静态...*

# asp.net - 从浏览器到 IIS 的并发连接

> ID：11430090
> 
> 赞同：2
> 
> 时间：2012-07-11T09:58:04.740
> 
> 标签：asp.net, iis

我正在运行一个 ASP.NET/JQuery 和 IIS 7.0 的网站。我创建了一个包含 10 个工作线程和一个进程外 (Sql Server) 的网络花园来处理会话。我听说很多人建议 Web Gardens 只解决某些问题，即 CPU 瓶颈和其他并发性。

该网站是一个具有动态选项卡的网站，因此尝试允许用户执行多项任务。

Web Gardens 是否允许来自一个浏览器的多个连接（单个用户）？也就是说，如果我打开两个选项卡并发出一组工作（使用服务器端）代码，两个请求会被提交还是只有一个阻塞连接，直到第一个请求完成。

当然，在现实生活中，我看到的是“阻塞”，据我所知，Web Garden 太支持并发连接。

谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-15T12:17:15.810

ASP.NET 会话是您的争论点 - 在进程内会话中，两个浏览器选项卡有单独的会话（这可能是一件坏事），但在进程外会话中，它们试图访问同一个会话.

从标题为“并发请求和会话状态”部分的[此 MSDN 页面：](http://msdn.microsoft.com/en-us/library/ms178581%28v=vs.100%29.aspx)

> 如果对同一会话发出两个并发请求（通过使用相同的 SessionID 值），则第一个请求获得对会话信息的独占访问权。第二个请求仅在第一个请求完成后执行

# android - 我需要通过 Intent 从谷歌地图的地方搜索餐厅吗？

> ID：11430091
> 
> 赞同：0
> 
> 时间：2012-07-11T09:58:08.047
> 
> 标签：android, google-maps, android-mapview, android-maps

如何通过调用 Intents 让我所在位置附近的餐厅，如何做到这一点，我通过 Intent 做了谷歌地图，

```
Intent intent = new Intent(android.content.Intent.ACTION_VIEW, 
                Uri.parse("http://maps.google.com/maps?saddr=&daddr="));
                startActivity(intent); 
```

类似的方式是有任何直接的http链接来获得餐厅。任何人都帮我..

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-11T10:14:08.840

您可以使用[google places api](https://developers.google.com/places/documentation/#PlaceSearches)搜索附近的地点，例如特定位置附近的案例餐厅。

# java - 提升和重新排序是同一件事吗？

> ID：11430095
> 
> 赞同：15
> 
> 时间：2012-07-11T09:58:22.633
> 
> 标签：java, java-memory-model

我从[Effective Java](http://books.google.co.in/books/about/Effective_Java.html?id=Ft8t0S4VjmwC&redir_esc=y)中读到，在没有同步的情况下，下面的序列 A 可以被虚拟机转换为序列 B，这被称为`hoisting`. 我还在某处读到，如果变量未声明为涉及变量的易失性指令，则可以重新排序。提升和重新排序是同一件事吗？

```
 while (!done)    sequence A     
    i++;

  if (!done)
     while (true)    sequence B
        i++; 
```

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2012-07-11T10:06:58.183

它们略有不同。

**提升**意味着你已经从循环中拉出一些操作，因为循环本身不会影响操作的结果。在您的情况下，您将条件测试提升到 while 循环之外。

**重新排序**意味着以不影响结果的方式更改指令序列。通常，这将是没有数据依赖关系的相邻指令，例如，执行以下两个语句的顺序无关紧要：

```
int a = x;
int b = y; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-11T10:11:54.260

Java 内存模型中使用的术语“重新排序”是指所有可能的优化，这些优化可能会影响不正确同步程序的正确性。

因此，从这个意义上说，重新排序是一个通用术语，包括诸如提升、乱序执行的影响、内存层次结构（即缓存）引起的不一致等优化。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-11T10:10:03.037

**重新排序**与执行性能有关，因为重新排序不会影响性能。

**提升**是为了重新排序内存屏障指令。

# asp.net-mvc-3 - 如何填充 CreatedOn 和 ModifedOn？

> ID：11430096
> 
> 赞同：-1
> 
> 时间：2012-07-11T09:58:24.183
> 
> 标签：asp.net-mvc-3

我创建了模型类并添加了记录器字段`CreatedOn`和`ModifiedOn`. 我为同一个模型创建了一个 crud 类。我想在没有任何表单输入文件的情况下处理这个记录器，并想自动添加到 db 表中。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-11T10:23:35.417

这取决于您的偏好/持久性模型。

您可以在构造函数中填充 CreatedOn 属性，并在每次保存时填充 ModifiedOn 属性。

如果您使用的是实体框架，您可以挂接到 DataContext 上的 SaveChanges() 方法并在那里填充您的 CreatedOn 和 ModifiedOn 属性。确保您的属性是（IAuditable）之类的基类/接口的一部分，然后您可以执行类似的操作

```
public class YourContext : DbContext
{
    public override int SaveChanges()
    {
       ChangeTracker.DetectChanges();

        ObjectContext ctx = ((IObjectContextAdapter)this).ObjectContext;

        List<ObjectStateEntry> objectStateEntryList =
            ctx.ObjectStateManager.GetObjectStateEntries(EntityState.Added
                                                       | EntityState.Modified
                                                       | EntityState.Deleted)
            .ToList();

        foreach (ObjectStateEntry entry in objectStateEntryList)
        {
            var auditObject = entry.Entity as IAuditable;
            if(auditObject.CreatedOn != DateTime.MinValue)
            {
                auditObject.CreatedOn = DateTime.Now;
            }

            auditObject.ModifiedOn = DateTime.Now;
        }

        return base.SaveChanges();
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-11T10:07:20.103

对不起，我不确定你的意思是什么。难道你不只是在你的控制器中填充这些记录器字段吗？

（对不起，如果我误解了）

# c# - 为什么无法在 GridView 中使用 DropDownList 更新此列？

> ID：11430097
> 
> 赞同：0
> 
> 时间：2012-07-11T09:58:24.713
> 
> 标签：c#, asp.net, sql, gridview, sql-server-2008-r2

我有以下数据库设计：

```
Employee Table: Username, Name, JobTitle, BadgeNo, IsActive, DivisionCode
Divisions Table: SapCode, DivisionShortcut 
```

***（DivisionCode 是 Divisions 表中 SapCode 的外键）***

我有一个 GridView，我用它来添加、删除和更新/编辑员工信息。此信息是员工用户名、姓名、徽章编号、职位名称、IsActive 和部门快捷方式。部门将列在 DropDownList 中。现在的问题是：更新员工的部门。我编写了代码，但出现以下错误：*

> 列名“DivisionShortcut”无效。

*   ASP.NET 代码：

    ```
     <asp:TemplateField HeaderText="Division">
            <ItemTemplate>
                <%# Eval("DivisionShortcut")%>
            </ItemTemplate>
            <EditItemTemplate>
                <asp:DropDownList ID="DivisionsList" runat="server" DataSourceID="DivisionsListDataSource"
                                    DataTextField="DivisionShortcut" DataValueField="SapCode">
                </asp:DropDownList>
            </EditItemTemplate>
        </asp:TemplateField>

        <asp:BoundField DataField="Username" HeaderText="Network ID" ReadOnly="True" 
            SortExpression="Username" />

        <asp:TemplateField HeaderText="Name">
            <ItemTemplate>
                <%# Eval("Name")%>
            </ItemTemplate>
            <EditItemTemplate>
                <asp:TextBox ID="txtEmployeeName" runat="server" Text='<%# Bind("Name")%>' />
            </EditItemTemplate>
        </asp:TemplateField>

        <asp:TemplateField HeaderText="Job Title">
            <ItemTemplate>
                <%# Eval("JobTitle")%>
            </ItemTemplate>
            <EditItemTemplate>
                <asp:TextBox ID="txtJobTitle" runat="server" Text='<%# Bind("JobTitle")%>' />
            </EditItemTemplate>
        </asp:TemplateField>

        <asp:TemplateField HeaderText="Badge No.">
            <ItemTemplate>
                <%# Eval("BadgeNo")%>
            </ItemTemplate>
            <EditItemTemplate>
                <asp:TextBox ID="txtBadgeNo" runat="server" Text='<%# Bind("BadgeNo")%>' />
            </EditItemTemplate>
        </asp:TemplateField>

        <asp:TemplateField HeaderText="Is Active?">
            <ItemTemplate>
                <%# Eval("IsActive")%>
            </ItemTemplate>
            <EditItemTemplate>
                <asp:CheckBox ID="isActive" runat="server" 
                              Checked='<%# Eval("IsActive").ToString().Equals("True") %>'/>
            </EditItemTemplate>
        </asp:TemplateField>

        <asp:TemplateField HeaderText="Delete?">
            <ItemTemplate>
                <span onclick="return confirm('Are you sure to Delete the record?')">
                    <asp:ImageButton ID="lnkB" runat="server" ImageUrl="Images/icons/delete24.png" CommandName="Delete" />
                </span>
            </ItemTemplate>
        </asp:TemplateField>
    </Columns> 
    ```

    "

    ```
    SelectCommand="SELECT     dbo.Divisions.DivisionShortcut, dbo.employee.Username, dbo.employee.Name, dbo.employee.JobTitle, dbo.employee.BadgeNo, dbo.employee.IsActive
                    FROM         dbo.Divisions INNER JOIN
                                dbo.employee ON dbo.Divisions.SapCode = dbo.employee.DivisionCode"
    UpdateCommand="UPDATE [employee] SET [Name] = @Name, [JobTitle] = @JobTitle, 
                                        [BadgeNo] = @BadgeNo WHERE [Username] = @Username"
    DeleteCommand="DELETE FROM [employee] WHERE [Username] = @Username">
    <UpdateParameters>
        <asp:Parameter Name="Name" Type="String"  />
        <asp:Parameter Name="JobTitle" Type="String" />
        <asp:Parameter Name="BadgeNo" Type="String" />
        <asp:Parameter Name="Username" Type="String" />
    </UpdateParameters>
    <DeleteParameters>
        <asp:Parameter Name="Username" Type="String" />
    </DeleteParameters> 
    ```

    " SelectCommand="SELECT * FROM Divisions">

Code-Behind: //用于编辑 GridView 中的任何行 protected void GridView1_RowEditing(object sender, GridViewEditEventArgs e) { GridView1.EditIndex = e.NewEditIndex; }

```
//For canceling any editng in any row in the GridView
protected void GridView1_RowCancelingEdit(object sender, GridViewCancelEditEventArgs e)
{
    e.Cancel = true;
    GridView1.EditIndex = -1;
}

//For updating the information in any row in the GridView
protected void GridView1_RowUpdating(object sender, GridViewUpdateEventArgs e)
{
    GridViewRow gvrow = GridView1.Rows[e.RowIndex];

    DropDownList DivisionsList = (DropDownList)gvrow.FindControl("DivisionsList"); 

    TextBox txtEmployeeName = (TextBox)gvrow.FindControl("txtEmployeeName");
    TextBox txtJobTitle = (TextBox)gvrow.FindControl("txtJobTitle");
    TextBox txtBadgeNo = (TextBox)gvrow.FindControl("txtBadgeNo");

    CheckBox isActive = (CheckBox)gvrow.FindControl("isActive");

    //For getting the ID (primary key) of that row
    string username = GridView1.DataKeys[e.RowIndex].Value.ToString();

    string name = txtEmployeeName.Text;
    string jobTitle = txtJobTitle.Text;
    string badgeNo = txtBadgeNo.Text;
    string division = DivisionsList.SelectedValue.ToString();

    UpdateEmployeeInfo(username, name, jobTitle, badgeNo, division);
}

private void UpdateEmployeeInfo(string username, string name, string jobTitle, string badgeNo, string division)
{
    string connString = ConfigurationManager.ConnectionStrings["UsersInfoDBConnectionString"].ConnectionString;
    SqlConnection conn = new SqlConnection(connString);
    string update = @"UPDATE Employee SET Name = @Name, JobTitle = @JobTitle, 
                        BadgeNo = @BadgeNo, DivisionShortcut = @division WHERE Username = @Username; 
                        UPDATE Divisions SET [DivisionShortcut] = @division WHERE SapCode = @SapCode;";

    SqlCommand cmd = new SqlCommand(update, conn);

    cmd.Parameters.AddWithValue("@Name", name);
    cmd.Parameters.AddWithValue("@JobTitle", jobTitle);
    cmd.Parameters.AddWithValue("@BadgeNo", badgeNo);
    cmd.Parameters.AddWithValue("@division", division);
    cmd.Parameters.AddWithValue("@Username", username);
    //cmd.Parameters.AddWithValue("@IsActive", isActive.checked);

    try
    {
        conn.Open();
        cmd.ExecuteNonQuery();
        conn.Close();

        GridView1.EditIndex = -1;
    }
    catch (Exception ex)
    {
        throw ex;
    }
    finally
    {
        cmd.Dispose();
        conn.Close();
        conn.Dispose();
    }
    GridView1.DataBind();
} 
```

**那么我如何能够使用 GridView 中的 DropDownList 更新员工的 Divivsion 字段？**

**更新：**

这是我更新的代码，但仍然没有什么对我有用： ASP.NET 代码：

```
<asp:GridView ID="GridView1" runat="server" AllowSorting="True" 
            AutoGenerateColumns="False" DataKeyNames="Username" 
            DataSourceID="SqlDataSource1" BorderWidth="1px" BackColor="#DEBA84" 
             CellPadding="3" CellSpacing="2" BorderStyle="None" 
             BorderColor="#DEBA84">
            <FooterStyle ForeColor="#8C4510" 
              BackColor="#F7DFB5"></FooterStyle>
            <PagerStyle ForeColor="#8C4510" 
              HorizontalAlign="Center"></PagerStyle>
            <HeaderStyle ForeColor="White" Font-Bold="True" 
              BackColor="#A55129"></HeaderStyle>
            <Columns>
                <asp:CommandField ButtonType="Image" ShowEditButton="true" ShowCancelButton="true"
                                EditImageUrl="Images/icons/edit24.png" UpdateImageUrl="Images/icons/update24.png" 
                                CancelImageUrl="Images/icons/cancel324.png" />

                <asp:TemplateField HeaderText="Division">
                    <ItemTemplate>
                        <%# Eval("DivisionShortcut")%>
                        <asp:HiddenField ID="divisioncode" value='<%#Eval("divisioncode")%>' runat="server" />
                    </ItemTemplate>
                    <EditItemTemplate>
                        <asp:DropDownList ID="DivisionsList" runat="server" DataSourceID="DivisionsListDataSource"
                                          DataTextField="DivisionShortcut" DataValueField="SapCode">
                        </asp:DropDownList>
                    </EditItemTemplate>
                </asp:TemplateField>

                <asp:BoundField DataField="Username" HeaderText="Network ID" ReadOnly="True" 
                    SortExpression="Username" />

                <asp:TemplateField HeaderText="Name">
                    <ItemTemplate>
                        <%# Eval("Name")%>
                    </ItemTemplate>
                    <EditItemTemplate>
                        <asp:TextBox ID="txtEmployeeName" runat="server" Text='<%# Bind("Name")%>' />
                    </EditItemTemplate>
                </asp:TemplateField>

                <asp:TemplateField HeaderText="Job Title">
                    <ItemTemplate>
                        <%# Eval("JobTitle")%>
                    </ItemTemplate>
                    <EditItemTemplate>
                        <asp:TextBox ID="txtJobTitle" runat="server" Text='<%# Bind("JobTitle")%>' />
                    </EditItemTemplate>
                </asp:TemplateField>

                <asp:TemplateField HeaderText="Badge No.">
                    <ItemTemplate>
                        <%# Eval("BadgeNo")%>
                    </ItemTemplate>
                    <EditItemTemplate>
                        <asp:TextBox ID="txtBadgeNo" runat="server" Text='<%# Bind("BadgeNo")%>' />
                    </EditItemTemplate>
                </asp:TemplateField>

                <asp:TemplateField HeaderText="Is Active?">
                    <ItemTemplate>
                        <%# Eval("IsActive")%>
                    </ItemTemplate>
                    <EditItemTemplate>
                        <asp:CheckBox ID="isActive" runat="server" 
                                      Checked='<%# Eval("IsActive").ToString().Equals("True") %>'/>
                    </EditItemTemplate>
                </asp:TemplateField>

                <asp:TemplateField HeaderText="Delete?">
                    <ItemTemplate>
                        <span onclick="return confirm('Are you sure to Delete the record?')">
                            <asp:ImageButton ID="lnkB" runat="server" ImageUrl="Images/icons/delete24.png" CommandName="Delete" />
                        </span>
                    </ItemTemplate>
                </asp:TemplateField>
            </Columns>
        </asp:GridView>
        <asp:SqlDataSource ID="SqlDataSource1" runat="server" 
            ConnectionString="<%$ ConnectionStrings:UsersInfoDBConnectionString %>" 

            SelectCommand="SELECT     dbo.Divisions.DivisionShortcut,dbo.employee.DivisionCode, dbo.employee.Username, dbo.employee.Name, dbo.employee.JobTitle, dbo.employee.BadgeNo, dbo.employee.IsActive
                    FROM         dbo.Divisions INNER JOIN
                                dbo.employee ON dbo.Divisions.SapCode = dbo.employee.DivisionCode"
            UpdateCommand="UPDATE [employee] SET [Name] = @Name, [JobTitle] = @JobTitle, 
                                                [BadgeNo] = @BadgeNo WHERE [Username] = @Username"
            DeleteCommand="DELETE FROM [employee] WHERE [Username] = @Username">
            <UpdateParameters>
                <asp:Parameter Name="Name" Type="String"  />
                <asp:Parameter Name="JobTitle" Type="String" />
                <asp:Parameter Name="BadgeNo" Type="String" />
                <asp:Parameter Name="Username" Type="String" />
            </UpdateParameters>
            <DeleteParameters>
                <asp:Parameter Name="Username" Type="String" />
            </DeleteParameters>
        </asp:SqlDataSource>

        <asp:SqlDataSource ID="DivisionsListDataSource" runat="server" 
            ConnectionString="<%$ ConnectionStrings:UsersInfoDBConnectionString %>" 
            SelectCommand="SELECT * FROM Divisions">
        </asp:SqlDataSource> 
```

代码隐藏：

```
//For editing any row in the GridView
    protected void GridView1_RowEditing(object sender, GridViewEditEventArgs e) 
    {
        GridView1.EditIndex = e.NewEditIndex;
    }

    //For canceling any editng in any row in the GridView
    protected void GridView1_RowCancelingEdit(object sender, GridViewCancelEditEventArgs e)
    {
        e.Cancel = true;
        GridView1.EditIndex = -1;
    }

    //For updating the information in any row in the GridView
    protected void GridView1_RowUpdating(object sender, GridViewUpdateEventArgs e)
    {
        GridViewRow gvrow = GridView1.Rows[e.RowIndex];

        DropDownList DivisionsList = (DropDownList)gvrow.FindControl("DivisionsList");
        HiddenField hidden = (HiddenField)gvrow.FindControl("divisioncode");
        string division_code = hidden.Value.ToString();

        TextBox txtEmployeeName = (TextBox)gvrow.FindControl("txtEmployeeName");
        TextBox txtJobTitle = (TextBox)gvrow.FindControl("txtJobTitle");
        TextBox txtBadgeNo = (TextBox)gvrow.FindControl("txtBadgeNo");

        CheckBox isActive = (CheckBox)gvrow.FindControl("isActive");

        //For getting the ID (primary key) of that row
        string username = GridView1.DataKeys[e.RowIndex].Value.ToString();

        string name = txtEmployeeName.Text;
        string jobTitle = txtJobTitle.Text;
        string badgeNo = txtBadgeNo.Text;
        string division = DivisionsList.SelectedValue.ToString();

        //string divisioncode = DivisionsList.SelectedValue;

        UpdateEmployeeInfo(username, name, jobTitle, badgeNo, division, division_code);
    }

    private void UpdateEmployeeInfo(string username, string name, string jobTitle, string badgeNo, string division, string divisioncode)
    {
        string connString = ConfigurationManager.ConnectionStrings["UsersInfoDBConnectionString"].ConnectionString;
        SqlConnection conn = new SqlConnection(connString);
        string update = @"UPDATE Employee SET Name = @Name, JobTitle = @JobTitle, 
                            BadgeNo = @BadgeNo WHERE Username = @Username; 
                            UPDATE Divisions SET [DivisionShortcut] = @division WHERE SapCode = @SapCode;";

        SqlCommand cmd = new SqlCommand(update, conn);

        cmd.Parameters.AddWithValue("@Name", name);
        cmd.Parameters.AddWithValue("@JobTitle", jobTitle);
        cmd.Parameters.AddWithValue("@BadgeNo", badgeNo);
        cmd.Parameters.AddWithValue("@division", division);
        cmd.Parameters.AddWithValue("@Username", username);
        cmd.Parameters.AddWithValue("@SapCode", divisioncode);
        //cmd.Parameters.AddWithValue("@IsActive", isActive.checked);

        try
        {
            conn.Open();
            cmd.ExecuteNonQuery();
            conn.Close();

            GridView1.EditIndex = -1;
        }
        catch (Exception ex)
        {
            throw ex;
        }
        finally
        {
            cmd.Dispose();
            conn.Close();
            conn.Dispose();
        }
        GridView1.DataBind();
    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-11T11:11:52.810

您在以下行代码部分有错误：

```
string update = @"UPDATE Employee SET Name = @Name, JobTitle = @JobTitle, 
                        BadgeNo = @BadgeNo, DivisionShortcut = @division WHERE Username = @Username;
                                                     ^^
                        UPDATE Divisions SET [DivisionShortcut] = @division WHERE SapCode = @SapCode;"; 
```

dividionshortcut 不是员工表的成员。只需将其从标记位置删除并再次运行它，我相信这将消除您的错误。

要使用的代码。在您的网格视图中添加以下字段：

```
 <asp:TemplateField HeaderText="Division">
            <ItemTemplate>
                <%# Eval("DivisionShortcut")%>
<asp:HiddenField ID="divisioncode" value='<%#Eval("divisioncode")%>' runat="server" />
            </ItemTemplate>
            <EditItemTemplate>
                <asp:DropDownList ID="DivisionsList" runat="server" DataSourceID="DivisionsListDataSource"
                                    DataTextField="DivisionShortcut" DataValueField="SapCode">
                </asp:DropDownList>
            </EditItemTemplate>
        </asp:TemplateField> 
```

首先使用以下选择命令

```
 SelectCommand="SELECT     dbo.Divisions.DivisionShortcut,dbo.employee.DivisionCode, dbo.employee.Username, dbo.employee.Name, dbo.employee.JobTitle, dbo.employee.BadgeNo, dbo.employee.IsActive
                    FROM         dbo.Divisions INNER JOIN
                                dbo.employee ON dbo.Divisions.SapCode = dbo.employee.DivisionCode"
    UpdateCommand="UPDATE [employee] SET [Name] = @Name, [JobTitle] = @JobTitle, 
                                        [BadgeNo] = @BadgeNo WHERE [Username] = @Username"
    DeleteCommand="DELETE FROM [employee] WHERE [Username] = @Username">
    <UpdateParameters>
        <asp:Parameter Name="Name" Type="String"  />
        <asp:Parameter Name="JobTitle" Type="String" />
        <asp:Parameter Name="BadgeNo" Type="String" />
        <asp:Parameter Name="Username" Type="String" />
    </UpdateParameters>
    <DeleteParameters>
        <asp:Parameter Name="Username" Type="String" />
    </DeleteParameters> 
```

其次，当调用行更新事件时，使用以下内容：

```
protected void GridView1_RowUpdating(object sender, GridViewUpdateEventArgs e)
{
    GridViewRow gvrow = GridView1.Rows[e.RowIndex];

    DropDownList DivisionsList = (DropDownList)gvrow.FindControl("DivisionsList"); 
    HiddenField hidden = (HiddenField)gvrow.FindControl("divisioncode");
    string division_code=hidden.value.ToString();
    TextBox txtEmployeeName = (TextBox)gvrow.FindControl("txtEmployeeName");
    TextBox txtJobTitle = (TextBox)gvrow.FindControl("txtJobTitle");
    TextBox txtBadgeNo = (TextBox)gvrow.FindControl("txtBadgeNo");

    CheckBox isActive = (CheckBox)gvrow.FindControl("isActive");

    //For getting the ID (primary key) of that row
    string username = GridView1.DataKeys[e.RowIndex].Value.ToString();

    string name = txtEmployeeName.Text;
    string jobTitle = txtJobTitle.Text;
    string badgeNo = txtBadgeNo.Text;
    string division = DivisionsList.SelectedValue.ToString();

    UpdateEmployeeInfo(username, name, jobTitle, badgeNo, division,division_code);
} 
```

现在在后面的代码中为您的函数中的除法代码添加一个参数并调用以下更新函数：

```
 private void UpdateEmployeeInfo(string username, string name, string jobTitle, string badgeNo, string division,string divisioncode)
    {
        string connString = ConfigurationManager.ConnectionStrings["UsersInfoDBConnectionString"].ConnectionString;
        SqlConnection conn = new SqlConnection(connString);
        string update = @"UPDATE Employee SET Name = @Name, JobTitle = @JobTitle, 
                            BadgeNo = @BadgeNo WHERE Username = @Username; 
                            UPDATE Divisions SET [DivisionShortcut] = @division WHERE SapCode = @SapCode;";

        SqlCommand cmd = new SqlCommand(update, conn);

        cmd.Parameters.AddWithValue("@Name", name);
        cmd.Parameters.AddWithValue("@JobTitle", jobTitle);
        cmd.Parameters.AddWithValue("@BadgeNo", badgeNo);
        cmd.Parameters.AddWithValue("@division", division);
        cmd.Parameters.AddWithValue("@Username", username);
        cmd.Parameters.AddWithValue("@DapCode", divisioncode);

        try
        {
            conn.Open();
            cmd.ExecuteNonQuery();
            conn.Close();

            GridView1.EditIndex = -1;
        }
        catch (Exception ex)
        {
            throw ex;
        }
        finally
        {
            cmd.Dispose();
            conn.Close();
            conn.Dispose();
        }
        GridView1.DataBind();
    } 
```

我希望这能解决你的问题

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-11T10:02:13.557

这是你的代码

```
UPDATE Employee SET Name = @Name, JobTitle = @JobTitle, 
                    BadgeNo = @BadgeNo, DivisionShortcut = @division WHERE Username =     @Username; 
```

DivisionShortcut 不是 Employee 表的成员。你有一个更新声明，所以我认为你只是不小心把它留在了那里，从这个更新行中删除它会解决这个问题。

# tomcat - Jenkins：当 jenkins 作为 Tomcat 服务运行时，SafeRestart 插件是否工作？

> ID：11430101
> 
> 赞同：0
> 
> 时间：2012-07-11T09:58:38.817
> 
> 标签：tomcat, jenkins

当 jenkins 在 Windows 机器上作为 Tomcat 服务运行时，SafeRestart 插件是否有效？我收到“http 状态 500”错误。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-11T11:40:05.557

没有 SafeRestart 插件不适用于 Windows 服务（这包括 Tomcat 或嵌入的 winston 服务器）

# php - 尝试连接 phpMyAdmin 时出错

> ID：11430105
> 
> 赞同：0
> 
> 时间：2012-07-11T09:59:06.970
> 
> 标签：php, mysql, phpmyadmin

在我的本地主机中尝试连接 phpmyadmin 时出现如下错误：

> phpMyAdmin 尝试连接 MySQL 服务器，但服务器拒绝连接。您应该检查配置中的主机、用户名和密码，并确保它们与 MySQL 服务器管理员提供的信息相对应。

如何纠正问题？请帮我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-11T12:12:57.193

尝试删除所有关于 phpmhadmin 的 cookie。我安装它时总是遇到这个问题，这是第一步......你是否从另一个程序更改了用户名/密码？即 mySQL 工作台？

# android - 从 onitemclicklistener 的列表视图中检索特定的文本视图 ID

> ID：11430108
> 
> 赞同：0
> 
> 时间：2012-07-11T09:59:18.380
> 
> 标签：android, textview

我在我的代码中使用它，但是如果我打印“文本”，我会得到“作为 xmldocument parsedchild 节点没有 1child 节点没有 1child 节点没有 1child 节点没有 1child 节点没有 1child 节点没有 11034_HAR 收集的 Http 响应”当我应该得到只有 11034_HAR 。有人可以向我解释为什么会这样。

```
myList.setOnItemClickListener(new OnItemClickListener() {

    public void onItemClick(AdapterView<?> arg0, View arg1, int arg2, long arg3) {
        TextView textView = (TextView) arg1.findViewById(R.id.siteid);
        String text = textView.getText().toString(); 
        System.out.println(text);                               
        Intent intnt = new Intent(getApplicationContext(), SelectedSiteActivity.class);
        startActivity(intnt);
    }
}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-11T14:11:18.970

您可以访问您的`Adapter`使用

```
Adapter adapter = arg0.getAdapter(); 
```

并从适配器中，您可以使用

```
MyItem item = adapter.getItem(arg2); 
```

我认为 MyItem 是您与适配器一起使用的实体类。

然后在 item 中打印值存储

```
item.getSiteID(); 
```

> 供参考：
> 
> arg2= 位置
> 
> arg3=标识

# scala - 更新 Scala 案例类

> ID：11430109
> 
> 赞同：0
> 
> 时间：2012-07-11T09:59:19.800
> 
> 标签：scala, scalaz

> **可能重复：**
> [Scala 案例类上的更新操作](https://stackoverflow.com/questions/11438277/update-operations-on-a-scala-case-class)

这个问题今天晚上来找我。

我有两个相同类型的实例化案例类。

```
case class Foo(a : Option[String], b : Option[String], c : Option[String]) 
```

让我们调用实例化的类 A 和 B。

```
val a = Foo(a=Some("foo"), b=Some("bar"), c=Some("baz"))
val b = Foo(a=None, b=Some("etch"), c=None) 
```

我想知道是否有可能以通用方式在单个操作中用 B 更新案例类 A。

```
val c = b *oper* a // Foo(a=Some("foo"), b=Some("etch"), c=Some("baz")) 
```

忽略设置为 None 的参数。理想情况下，操作也应该是通用的，因此它可以作用于任何类型的案例类。

我有一些直觉，可以通过首先将类转换为元组/列表并在操作完成后转换回类来使用 Scalaz 执行此操作 - 也许使用 ApplicativeBuilder？有任何想法吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-11T10:10:02.157

```
case class Foo(a:Option[String], b:Option[String], c:Option[String])

val a = Foo(a=Some("foo"), b=Some("bar"), c=Some("baz"))
val b = Foo(a=None, b=Some("etch"), c=None)

def op(a:Foo, b:Foo) = Foo(b.a.orElse(a.a), b.b.orElse(a.b), b.c.orElse(a.c))

op(a,b) 
```

如果我理解正确的话......

# html - 为什么这个父元素不完全包含它的子元素？

> ID：11430110
> 
> 赞同：1
> 
> 时间：2012-07-11T09:59:20.937
> 
> 标签：html, css

当我的浏览器窗口最大化时，此代码工作正常，子级包含在父级中，父级跨越浏览器的宽度。但是，当浏览器窗口小于子元素宽度时，父元素无法包含它（在chrome 20和firefox 13中测试）

[http://jsfiddle.net/x9duU/](http://jsfiddle.net/x9duU/)

```
<!doctype html>
<html lang="en">
    <head>
        <meta charset="utf-8">
        <title>Example</title>

        <style type="text/css">
            #toolbar {
                background-color:#cccccc;
                padding:10px 0;
            }

            #nav {
                background-color:#00cccc;
                margin:0 auto;
                width:1000px;
            }
        </style>
    </head>
    <body>

        <div id="toolbar">
            <div id="nav">NAVIGATION</div>
        </div>

    </body>
</html> 
```

我可以通过浮动父级并给它至少 100% 来解决问题，但这似乎是错误的。我能做些什么来解决这个问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-11T10:06:32.323

`#toolbar`是一个块级元素，默认为`width:100%`- 关于父元素的 100% 宽度。这是它遵守的规则，让孩子在宽度超过时溢出。您可以通过设置溢出属性来调整它。

但是，如果您希望父 div 考虑它的孩子的宽度，请设置一个最小宽度（等于孩子的宽度）重要：您必须考虑可能的边距和填充考虑（或将框模型更改为边框-盒子）。

```
#toolbar {
   min-width:1000px;
}​ 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-11T10:06:23.510

```
 #toolbar {
            background-color:#cccccc;
            padding:10px 0;

            overflow: hidden;
        } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-11T10:04:40.807

解决这个问题的最简单和最合适的方法是从[1000px 中删除`width`（`#nav`](http://jsfiddle.net/6jUKJ/)它在那里真正做了什么？）。

或者，给予`#toolbar` `overflow: hidden`也会[达到同样的视觉效果](http://jsfiddle.net/kSmEw/)。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-11T10:05:38.523

在您的导航上尝试 min-width:1000px

```
 #nav {
        background-color:#00cccc;
        margin:0 auto;
        min-width:1000px;/*New style*/
    }​ 
```

# php - 作为参数传递时的撇号问题

> ID：11430111
> 
> 赞同：1
> 
> 时间：2012-07-11T09:59:22.150
> 
> 标签：php, javascript, mysql, apostrophe, htmlspecialchars

我试图解决撇号的问题，但没有成功。请看看这个并建议我需要的。

我正在从带有撇号的数据库中获取一个值。我正在使用变量将值传递给另一个 javascript 函数。但是由于撇号，函数没有执行。请查看下面提到的代码。

**PHP代码：**

```
<?php
$Id = $abc->id;
$str = $abc->street; // output: 111 O'CG street
?> 
```

**HTML：**

```
<a href="javascript:void(0)" onclick="show_details(<?php echo $Id1;?>,'<?php echo $str;?>')"> 
Display
</a> 
```

我也尝试使用反斜杠来使用 HTML 代码。但没有克服这个问题。

**带反斜杠的代码：**

```
<a href="javascript:void(0)" onclick="show_details(<?php echo $Id1;?>,\"<?php echo $str;?>\")"> 
Display
</a> 
```

请给我建议。提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-11T10:00:54.510

您必须使用 addlashes() 函数。

喜欢：

```
<?php echo addslashes($str);?> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-11T10:04:19.420

只需将单引号更改为双引号

```
onclick="show_details(<?php echo $Id1;?>,\"<?php echo $str;?>\")" 
```

# design-patterns - 域模型对象访问另一个域模型对象

> ID：11430115
> 
> 赞同：0
> 
> 时间：2012-07-11T09:59:27.733
> 
> 标签：design-patterns, domain-driven-design

服务具有 dal 和域模型层。域模型可以访问 dal 以通过它操作 db。现在需要从域模型中的另一个对象获得一些属性（这将显着简化客户端的使用）。但是我很困惑将这些属性（从“外星人”）对象填充到给定对象的位置。我可以在域模型中做到这一点吗？还是在服务本身？

由于我是 DDD 的新手，我会用我自己的话来解释它。项目结构如下： DAL（了解 DTO） DTO DomainModel（了解 DAL 和 DTO） Service（了解 DomainModel 和 DTO）

服务返回 DTO 并假设我需要向 dto1 添加一些属性（由 domainModel1 类操作），这些属性可以由 domainModel2 类自然检索。那么，问题是哪一层最适合这个？

PSSince 模型是一个系统的投影，即它的元素之间的关系，没有理由不从 domainModel1 调用 daominModel2，是吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-11T14:31:24.833

> 我需要向 dto1 添加一些属性（由 domainModel1 类操作）

这里的问题似乎是您的域对象操纵 DTO。您的域层应该与 DTO 和 DAL 无关。

DTO 是特定应用程序如何需要其数据呈现​​的详细信息。DAL 是特定应用程序如何需要存储其数据的详细信息。这些需要与域分开。

您的域不应该依赖于细节。详细信息应取决于域。

您提到需要将某些属性从另一个对象添加到 DTO 是出于客户端使用目的。*因此*，不要在域中处理它。在 Application 层创建一个 Service，它将 Entity1 和 Entity2 中的一些数据聚合到 DTO 中，然后将 DTO 传递给客户端。

# php - Codeigniter + HMVC + REST

> ID：11430118
> 
> 赞同：2
> 
> 时间：2012-07-11T09:59:33.997
> 
> 标签：php, api, codeigniter, rest, hmvc

我正在开发基于 Codeigniter + HMVC 的应用程序，并且正在尝试添加一个新模块。我使用 Phil Sturgeon 的**REST_Controller 2.6.0**和**Format**库来创建一个 REST API 作为一个模块。

当我尝试获取例如[http://api.example.com/user/id/1/](http://api.example.com/user/id/1/)或[http://api.example.com/user/id/1/format/json](http://api.example.com/user/id/1/format/json)时，我得到以下错误：

```
 A PHP Error was encountered
 Severity: Notice
 Message: Undefined property: Api::$format
 Filename: libraries/REST_Controller.php
 Line Number: 380 
```

在我的**routes.php**我有这个：

```
 $route['user/id/(:num)/format/(:any)'] = "api/user/$1/format/$2";
 $route['user/id/(:num)'] = "api/user/$1"; 
```

应用程序的目录结构为：

```
application
--modules
----api
------config
------controller 
```

Finlay，我使用默认配置，我没有更改任何内容。格式库在**autoload.php**中自动加载。有任何想法吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-11T10:20:54.007

您需要更改 Rest_Controller 以扩展 HMVC 的 MX_Controller 而不是 CI_Controller。

# php - WordPress 子页面

> ID：11430123
> 
> 赞同：0
> 
> 时间：2012-07-11T09:59:53.600
> 
> 标签：php, css, wordpress

我被要求在 Wordpress 中设计一个网站。只是一个粗略的设计如下所示：

![在此处输入图像描述](../Images/180aacbb4be68ed08917f08a70936648.png)

所以我想要的是当我点击 **关于** 它应该展开并显示页面内容。有点像这样：

![在此处输入图像描述](../Images/52a77b57ffb7b694d95f3446f8784554.png)

有人对在同一位置显示页面内容而不是在新页面或窗口中打开有任何想法吗？

提前致谢.. ：）

**编辑1**

下面是page.php的php代码

```
 <?php get_header(); ?>
 <div id="content" class="page">

 <div id="box">
  <h3><?php the_title(); ?></h3>

<?php if (have_posts()) : ?>
<?php while (have_posts()) : the_post(); ?>
    <div class="post" id="post-<?php the_ID(); ?>">
        <?php the_content(); ?><br /><div style="clear:both;"></div>
    </div>
<?php endwhile; ?>
<?php endif; ?> 
```

我希望菜单如图所示显示。因此，根据**Arconix Shortcode Collection**的教程，它说我必须编写代码，例如

```
 [accordions]
  [accordion title="About"]
  About Content here
  [/accordion]
  [accordion title="Results"]
  Results Content here
  [/accordion]
  [accordion title="People" last="last"]
  People Content here
  [/accordion]
  [/accordions] 
```

现在在这里，而不仅仅是我们写的内容，我希望它是

1）来自页面的内容，例如关于它的页面内容**（**因为页面可以在wordpress页面中创建--->新页面。所以如果我想编辑这个我只是去页面并编辑关于页面）。

2）只有在鼠标点击后才会显示内容。

**编辑 2**

在我想包含**手风琴**的页面中，我从页面中选择给定的选项

![在此处输入图像描述](../Images/2bf81aca664723f3ccb82ed39d60a7e7.png)

一旦我点击它。没有选择页面的选项，如下所示：

所以有人对此有任何想法..？

![在此处输入图像描述](../Images/7f1aae8048b4058b5f6325207709bad3.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-12T08:46:01.257

有一个 WordPress 插件可以轻松完成此操作 - [http://wordpress.org/extend/plugins/arconix-shortcodes/](http://wordpress.org/extend/plugins/arconix-shortcodes/)

带有此插件的手风琴文档[https://arconixpc.fogbugz.com/default.asp?W4](https://arconixpc.fogbugz.com/default.asp?W4)

（该插件还可以做更多的事情。）

# python - 如何检查用户单击关闭按钮是否退出了框架？

> ID：11430125
> 
> 赞同：0
> 
> 时间：2012-07-11T09:59:58.393
> 
> 标签：python, user-interface, wxpython

如何检查用户单击关闭按钮是否退出了框架。我需要知道，因为我有两个 wx.frames，一个孩子和一个父母。当父框架关闭时，如何关闭子框架？我正在使用 wxpython

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-11T11:05:39.877

可以说主要的父框架是父框架。

```
class parent(wx.Frame):
      def __init__(self, parent):
            ## Ur GUI's code ##

            self.Bind( wx.EVT_CLOSE, self.ParentFrameOnClose )
      def ParentFrameOnClose(self, event):
            self.DestroyChildren()  ## Destroy the children first
            self.Destroy()    ## Destroy the parent then. 
```

# javascript - Play 2.0.2中javascript路由器的使用

> ID：11430138
> 
> 赞同：0
> 
> 时间：2012-07-11T10:00:36.223
> 
> 标签：javascript, scala, playframework, playframework-2.0

我有一个应用程序，我正在尝试升级到 Play 2.0.2（从 Play 2.0.1）。我有这段代码可以在 Play 2.0.1 上运行，但现在不再可用

```
@javascriptRouter("jsRoutes")(
 routes.javascript.Contacts.invite,
 routes.javascript.Contacts.remove
) 
```

编译器抱怨：

```
[error] /myprojectdir/target/scala-2.9.1/src_managed/main/views/html/Contacts/list.template.scala:75: Cannot find any HTTP Request Header here
[error] """),_display_(Seq[Any](/*41.2*/javascriptRouter("jsRoutes")(
[error]                                                             ^
[error] one error found
[error] {file:/myprojectdir/}projectname/compile:compile: Compilation failed
[error] Total time: 9 s, completed 11.07.2012 11:38:51 
```

这已在邮件列表中注意到，一位用户已[解决此问题](https://groups.google.com/d/msg/play-framework/Z97GQ2VnR5M/XLzkcRykTrUJ)。我知道有一些隐式参数需要传递，但我不知道该怎么做。我尝试根据提到的[示例文件](https://github.com/playframework/Play20/blob/db5d40b81f3599ebb6f31e63fbba03d480c0d62c/samples/workinprogress/akka-chat/app/views/room.scala.html)将（？）这个添加到我的模板中，基本上将我的模板第一行从

```
@(currentUser: User, inviteForm: Form[controllers.Contacts.InviteForm]) 
```

至

```
@(currentUser: User, inviteForm: Form[controllers.Contacts.InviteForm])(implicit request: RequestHeader) 
```

但这似乎改变了模板的类型签名（？），这不是我想要发生的。

有什么建议么？带有 (?) 的所有内容都是我不完全确定的。我以前在 Scala 中使用过一些隐式转换，但我不确定 Play 在这里对我的期望是什么，以及我是否犯了 scala 或 play 错误。

编辑：[bugtracker](https://play.lighthouseapp.com/projects/82401/tickets/581-21-snapshot-jsroutes-missing-implicit-http-request-headers)中有相应的票证。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-03T15:59:20.847

这是你应该做的。请注意，在您的控制器中，您可以简单地从

```
def foo() = Action {
    ...
    Ok(views.html.contact.list())
} 
```

至

```
def foo() = Action { implicit request =>
    ...
    Ok(views.html.contact.list())
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-26T09:05:29.753

如果您使用的是 Java 控制器，则应使用 java javascript 路由方法。请参阅[java 指南的这一部分](http://www.playframework.com/documentation/2.1.1/JavaGuide6)

混合两种语言很好，但对于路由，您应该坚持控制器的语言风格。另一种选择是编写一个单独的 scala 控制器并调用这些方法。

# android - android : 有没有像隐藏值这样的视图？

> ID：11430139
> 
> 赞同：0
> 
> 时间：2012-07-11T10:00:39.513
> 
> 标签：android, view, hidden

我想知道，是否有任何标准视图（imageview、imagebutton、textview、button 等）类似于隐藏值？所以我需要为每个项目设置这个值，然后，例如，在 onclick 事件中从视图中获取它。

错误日志

```
07-11 13:06:23.263: ERROR/AndroidRuntime(989): Uncaught handler: thread main exiting due to uncaught exception
07-11 13:06:23.273: ERROR/AndroidRuntime(989): java.lang.NullPointerException
07-11 13:06:23.273: ERROR/AndroidRuntime(989):     at com.artox.relax.inf.RestaurantListBaseActivity$RestaurantListAdapter.getView(RestaurantListBaseActivity.java:95)
07-11 13:06:23.273: ERROR/AndroidRuntime(989):     at android.widget.AbsListView.obtainView(AbsListView.java:1274)
07-11 13:06:23.273: ERROR/AndroidRuntime(989):     at android.widget.ListView.makeAndAddView(ListView.java:1668)
07-11 13:06:23.273: ERROR/AndroidRuntime(989):     at android.widget.ListView.fillDown(ListView.java:637)
07-11 13:06:23.273: ERROR/AndroidRuntime(989):     at android.widget.ListView.fillFromTop(ListView.java:694)
07-11 13:06:23.273: ERROR/AndroidRuntime(989):     at android.widget.ListView.layoutChildren(ListView.java:1521)
07-11 13:06:23.273: ERROR/AndroidRuntime(989):     at android.widget.AbsListView.onLayout(AbsListView.java:1113)
07-11 13:06:23.273: ERROR/AndroidRuntime(989):     at android.view.View.layout(View.java:6830)
07-11 13:06:23.273: ERROR/AndroidRuntime(989):     at android.widget.FrameLayout.onLayout(FrameLayout.java:333)
07-11 13:06:23.273: ERROR/AndroidRuntime(989):     at android.view.View.layout(View.java:6830)
07-11 13:06:23.273: ERROR/AndroidRuntime(989):     at android.widget.LinearLayout.setChildFrame(LinearLayout.java:1119)
07-11 13:06:23.273: ERROR/AndroidRuntime(989):     at android.widget.LinearLayout.layoutVertical(LinearLayout.java:998)
07-11 13:06:23.273: ERROR/AndroidRuntime(989):     at android.widget.LinearLayout.onLayout(LinearLayout.java:918)
07-11 13:06:23.273: ERROR/AndroidRuntime(989):     at android.view.View.layout(View.java:6830)
07-11 13:06:23.273: ERROR/AndroidRuntime(989):     at android.widget.RelativeLayout.onLayout(RelativeLayout.java:900)
07-11 13:06:23.273: ERROR/AndroidRuntime(989):     at android.view.View.layout(View.java:6830)
07-11 13:06:23.273: ERROR/AndroidRuntime(989):     at android.widget.FrameLayout.onLayout(FrameLayout.java:333)
07-11 13:06:23.273: ERROR/AndroidRuntime(989):     at android.view.View.layout(View.java:6830)
07-11 13:06:23.273: ERROR/AndroidRuntime(989):     at android.widget.FrameLayout.onLayout(FrameLayout.java:333)
07-11 13:06:23.273: ERROR/AndroidRuntime(989):     at android.view.View.layout(View.java:6830)
07-11 13:06:23.273: ERROR/AndroidRuntime(989):     at android.view.ViewRoot.performTraversals(ViewRoot.java:996)
07-11 13:06:23.273: ERROR/AndroidRuntime(989):     at android.view.ViewRoot.handleMessage(ViewRoot.java:1633)
07-11 13:06:23.273: ERROR/AndroidRuntime(989):     at android.os.Handler.dispatchMessage(Handler.java:99)
07-11 13:06:23.273: ERROR/AndroidRuntime(989):     at android.os.Looper.loop(Looper.java:123)
07-11 13:06:23.273: ERROR/AndroidRuntime(989):     at android.app.ActivityThread.main(ActivityThread.java:4363)
07-11 13:06:23.273: ERROR/AndroidRuntime(989):     at java.lang.reflect.Method.invokeNative(Native Method)
07-11 13:06:23.273: ERROR/AndroidRuntime(989):     at java.lang.reflect.Method.invoke(Method.java:521)
07-11 13:06:23.273: ERROR/AndroidRuntime(989):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:860)
07-11 13:06:23.273: ERROR/AndroidRuntime(989):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:618)
07-11 13:06:23.273: ERROR/AndroidRuntime(989):     at dalvik.system.NativeStart.main(Native Method) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-11T10:05:51.133

为了设置任何 View 实例的可见性，您可以执行以下操作：

```
View myView = (View)findViewById(R.id.myview);
myView.setVisibility(View.GONE);
//or
myView.setVisibility(View.VISIBLE);
//or
myView.setVisibility(View.HIDDEN); 
```

您可以在此处查看文档：http: [//developer.android.com/reference/android/view/View.html#setVisibility%28int%29](http://developer.android.com/reference/android/view/View.html#setVisibility%28int%29)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-11T10:51:01.440

您可以将 setContentDescription(String str) 和 getContentDescription() 与您提到的所有视图一起使用。

但

那不是处理此事的正确方法。您应该扩展视图类或 onclicklistener

例如：

```
 public class myClickListener implements View.OnClickListener{

        private int hiddenValue;
        public myClickListener(int hiddenValue){
            this.hiddenValue=hiddenValue;
        }

        @Override
        public void onClick(View v) {
            hiddenValue++;
        }

    } 
```

然后你用 .setonlicklistener(new myClickListener(5)); 调用它

# java - 部署不是 .wars 的 Java 服务器应用程序

> ID：11430142
> 
> 赞同：7
> 
> 时间：2012-07-11T10:00:45.510
> 
> 标签：java, deployment, automation, build-automation, executable-jar

是否有任何集成良好的应用程序管理堆栈允许构建、部署和更新`.war`作为服务器运行的非 Java 应用程序？例如消息消费者是服务器（但不是网络服务器并且没有 Servlet），还是`.jar`嵌入了 Jetty 的可执行文件？

构建和部署`.war`s 非常简单：Maven 具有战争原型，Jenkins 有大量插件用于将`.war`文件部署到各种应用程序服务器，其中大多数接受在运行时上传新的 Web 应用程序。像 Elastic Beanstalk 这样的工具使这个过程更加容易，与服务器环境的管理联系在一起。

相比之下，部署 executable `.jar`s 似乎是在重新发明轮子。需要找出遮蔽依赖关系并使用大量 Maven 插件创建可执行工件的最佳方法，将该工件存放在某处，然后找到一种将其安装在目标服务器上的方法，并在必要时替换/升级它（Debian 软件包将是这样做的一种方式）。

这一切对我来说似乎都是“手动的”，以至于将应用程序部署为`.war`应用程序服务器似乎是有利的，即使它们不适合这样的环境，只是为了让您获得工具支持的好处。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-14T11:11:44.620

您可以通过将应用程序部署到 osgi 容器来实现这一点。

当 osgi 包启动时，您可以挂钩到 osgi 生命周期以运行您的应用程序。然后您可以远程启动和停止容器（如果容器支持）。

您的应用程序可以将它们的依赖项定义为 osgi 清单的一部分 - 但是在使用 maven 时使用 shade 插件着色 jar 并不困难，我认为管理而不是处理容器中的数百个 jar 会更容易。

[这个问题](https://stackoverflow.com/questions/10865515/continuous-deployment-of-osgi-based-application-on-jenkins)讨论了使用 jenkins 持续部署 osgi 包。

另一种（也是更标准的）方法是编写自动化部署的脚本 - 可能使用专门构建的工具，如[puppet](http://puppetlabs.com/)或[chef](http://www.opscode.com/chef/)。有一个用于 puppet 的[maven 插件](http://blog.akquinet.de/2011/11/01/provisioning-maven-artifacts-with-puppet/)，它允许您从 maven 存储库中提取工件以用于您的 puppet 脚本。

从 jenkins 运行 puppet 或 Chef 很简单，如果需要，您可以向非技术人员提供对部署构建的访问权限，以允许他们通过单击按钮将新构建部署到环境中。

像@bagheera 建议构建应用程序的 rpm 并将它们作为服务启动是一种很好的方法，可以降低部署脚本的复杂性。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-12T05:28:18.963

似乎您正在寻找用于构建自包含可执行 jar 的依赖管理器和用于部署的包管理器。除了您提到的工具之外，您还可以查看[ant+ivy](http://ant.apache.org/ivy/features.html)的 build+dependency mgmt 和[rpmbuild](http://www.rpm-based.org/how-to-create-rpm-package) +rpm+yum 的 linux 包管理。

# android - 在 x,y 图像内设置图像

> ID：11430151
> 
> 赞同：1
> 
> 时间：2012-07-11T10:01:02.617
> 
> 标签：android, image, canvas, imageview

可以在像素中的其他图像中设置任何图像来协调我想要的吗？

第一个图像是一个大图像，第二个图像是一个用户的标志。

我认为女巫帆布这是可能的，但我不确定。

有人有这方面的例子吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-11T10:05:17.400

您可以使用`FrameLayout`，将大图像作为背景，将小图像作为前景。`android:layout_gravity`您可以使用该属性更改其重力。`FrameLayout`文档[在这里](http://developer.android.com/reference/android/widget/FrameLayout.html)。希望这可以帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-11T10:05:57.920

您可以使第一个图像成为从 ImageView 扩展的类的内容。然后在这个类中，覆盖 onDraw(Canvas canvas)，在您指定的坐标处将第二个图像绘制为位图。

例如

```
public class DoubleImage extends ImageView
{
    private Bitmap mSecondBitmap;
    public DoubleImage(Context context, AttributeSet attrs)
    {
         super(context, attrs);

         // load the second image into mSecondBitmap
         mSecondBitmap = BitmapFactory.decodeResource(context, R.drawable.my_second_image);
    }

    @Override
    protected void onDraw(Canvas canvas)
    {
        super.onDraw(canvas);

        canvas.drawBitmap(mSecondImage, x, y, null);
    }
} 
```

# twitter-bootstrap - Twitter bootstrap popover：同时显示所有内容

> ID：11430169
> 
> 赞同：2
> 
> 时间：2012-07-11T10:02:02.557
> 
> 标签：twitter-bootstrap, twitter-bootstrap-rails

如何同时显示页面上的所有弹出框？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-11T11:58:29.843

假设您的 HTML 如下所示：

```
<a href="#" rel="popover" title="My nicer popover text">hover over me</a> 
```

您应该将`trigger`选项设置为`manual`并无条件地显示您的弹出框：

```
$('[rel=popover]').popover({'trigger': 'manual'});
$('[rel=popover]').popover('show'); 
```

# jsf-2 - 关闭浏览器后让我登录 JSF

> ID：11430172
> 
> 赞同：1
> 
> 时间：2012-07-11T10:02:07.393
> 
> 标签：jsf-2, session-state

我有一个带有许多参数（用户、登录、密码......等）的会话 bean......当用户在其他浏览器中再次访问网络时，我如何才能只保存这个 bean，他可以保持登录状态？

¿ 是否可以只保存整个 bean 中的一些变量？

谢谢

# mysql - 如何为每个分组的选定值选择数据并只执行一次函数

> ID：11430173
> 
> 赞同：0
> 
> 时间：2012-07-11T10:02:10.963
> 
> 标签：mysql, sql, ado.net

我有一张桌子：

组织机构 | 邮政编码 | 代码 | 价格

我想从该表中选择所有数据，并计算每个 PONumber 的代码价格总和，例如：

```
SELECT 
tt1.ORG as 'Organization', 
tt1.PONumber as 'PO Number',
tt1.Code as 'Code',
tt1.Price as 'Price',
'SumPrice' = FUNC001(tt1.PONumber)
FROM My_table as tt1 
```

在此过程中，我使用函数 FUNC001(tt1.PONumber)：

```
ALTER FUNCTION [dbo].[FUNC001] (@ponumber VARCHAR(MAX))
RETURNS DECIMAL AS BEGIN
DECLARE @p1 DECIMAL ;
SET @p1 = 0.0 ;
SELECT @p1 = @p1 + tt1.Price    
FROM My_table as tt1
WHERE tt1.[PO number] = @ponumber
RETURN ROUND(@p1,2,1)
END 
```

问题是：由于我的 SELECT 查询执行，此函数每次返回相同 PONumber 的价格总和，这需要很多时间。有没有办法为查询中的每个 PONumber 只执行一次此函数并为相同的 PONumber 应用返回值？我可以使用一些@parameter，并检查：如果 PONumber 更改 -> 执行函数，否则选择以前的值？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-11T10:04:38.953

试试这个::

```
 SELECT 
    tt1.ORG as 'Organization', 
    tt1.PONumber as 'PO Number',
    tt1.Code as 'Code',
    tt1.Price as 'Price',
SUM(ROUND(tt1.PricePrice,2,1) as 'SumPrice'

    FROM My_table as tt1 group by tt1.PONumber 
```

# c# - 如何将 protobuf-net 与通过 ASP.NET Web Reference 生成的类一起使用，同时避免代码重复？

> ID：11430181
> 
> 赞同：2
> 
> 时间：2012-07-11T10:02:31.180
> 
> 标签：c#, asp.net, .net, protocol-buffers, protobuf-net

我有一个服务器-客户端应用程序，我可以在其中修改两个代码库。客户端通过众多的Web服务与服务器通信，我通过Web引用系统分享了一些在服务器端定义的类。在网络上，数据是使用 XML (SOAP) 发送的。另外，我使用`XmlSerializer`.

由于不断上升的性能问题，我想迁移到更复杂的序列化程序，并着眼于 Protocol Buffers 和 protobuf-net。我目前使用 protobuf-net v2 (r480, .NET 3.5)

我似乎遇到的问题是通过 Web 参考系统共享的类不保留自定义类/成员属性，如`ProtoContract`和`ProtoMember`.
（但是序列化器系统并**没有**像往常一样抛出`System.InvalidOperationException: Type is not expected, and no contract can be inferred`，给我留下了一个空流。是不是因为在客户端生成的类被标记为`partial`？）

示例，服务器端：

```
[ProtoContract]
public class CommentStruct
{
    [ProtoMember(1)] public int id;
    [ProtoMember(2)] public DateTime time;
    [ProtoMember(3)] public string comment;
    [ProtoMember(4)] public int session;
} 
```

客户端（生成的代码）：

```
/// <remarks/>
[System.CodeDom.Compiler.GeneratedCodeAttribute("wsdl", "2.0.50727.1432")]
[System.SerializableAttribute()]
[System.Diagnostics.DebuggerStepThroughAttribute()]
[System.ComponentModel.DesignerCategoryAttribute("code")]
[System.Xml.Serialization.XmlTypeAttribute(Namespace="http://example.org")]
public partial class CommentStruct {
    private int idField;
    private System.DateTime timeField;
    private string commentField;
    private int sessionField;

    /// <remarks/>
    public int id {
        get {
            return this.idField;
        }
        set {
            this.idField = value;
        }
    }
    [...] 
```

我设法`ProtoPartialMember`在客户端使用一个额外的类文件来解决这个问题：

```
[ProtoContract,
ProtoPartialMember(1, "id"),
ProtoPartialMember(2, "time"),
ProtoPartialMember(3, "comment"),
ProtoPartialMember(4, "session")]
public partial class CommentStruct
{
} 
```

这里的主要问题是：我可以用不同的方式来避免代码重复吗？
另一个是：我会错过一些 protobuf-net 的好东西，比如继承支持吗？

我找到了一些关于 protobuf-net Visual Studio 插件的信息。但正如 Marc Gravell 将其描述为“事后的想法”，我不愿意使用它。此外，我的一些合作开发人员正在使用不支持加载项的 VS Express 版本。

**编辑**：我的主要重复问题是必须两次指定类成员和protobuf-net属性-在服务器端的类定义和客户端的部分类属性中。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-11T10:15:32.167

作为术语的一个小点，我会在这里避免使用“共享”这个词，因为“共享”通常意味着：作为一个库（可以工作）。

它不抛出错误的原因与`partial`; 只是 protobuf-net 很乐意使用其他库的属性......在合理范围内。例如，它将与`[XmlType]`/`[XmlElement(Order=n)]`和`[DataContract]`/一起使用`[DataMember(Order=n)]`。但是，这里从 WSDL 生成的代码不包含 Order=n，因此它不会将那些视为需要序列化的成员（它确实需要数字）。

`[ProtoPartialMember(...)]`用法（正如您提到的）是解决此问题的一种方法。它不会限制您使用其他 protobuf-net。`[ProtoInclude(...)]`仍然可以工作（因为你提到了继承）。事实上， protobuf-net 中的**所有内容**也可以在运行时完全配置，具有零属性（通过`RuntimeTypeMode`）。重复：除了类名，我看不到任何*重复的内容。*可以说，`[ProtoInclude(...)]`与*有点*重复`[XmlInclude(...)]`，但不多。

我很高兴相信我顺便使用了这个短语，但我不确定“事后诸葛亮”是否*真的*是我描述插件用法的主要方式。澄清一下：protobuf-net 主要是为了适应代码优先的常见 .NET 习惯用法（可能带有属性），而不是从工具生成。它**仍然适用**于任何一个。

当然，可能最简单的选项（如果可用）是简单地共享 .dll 或 .cs。这与 WCF / 一起工作毫不费力`DataContractSerializer`，但我不确定旧的“网络参考”网络服务是否非常喜欢这个。当然，也没有插件支持使用 protobuf-net 作为旧式“网络参考”（“asmx”）的一部分，所以你可能已经需要在那里改变一些东西......

# android - Android：在 Android 2.2 上查看带有 webview 的 IP 摄像机的图像

> ID：11430182
> 
> 赞同：1
> 
> 时间：2012-07-11T10:02:31.617
> 
> 标签：android, android-webview

我正在尝试为我有一个 ip 摄像头的 Android 应用程序，我想实时查看摄像头捕获的内容。我使用一个名为 Motion 的程序来捕捉照片。Jpg 然后从浏览器（例如 Firefox）输入“ **http://ip:port** ”可能是相机正在捕捉的实时视图。对于android，我写了这段代码：

```
public class WebviewpfcActivity extends Activity {

public WebView wv;
Uri uri;
ContentValues values;
Bitmap bitmap;
Canvas mCanvas;

public void onCreate(Bundle icicle){
    super.onCreate(icicle);

    Bundle extras=getIntent().getExtras();

    setContentView(R.layout.main);

    wv=(WebView) findViewById(R.id.webview);

    wv.getSettings().setJavaScriptEnabled(true);
    wv.getSettings().setPluginsEnabled(true);

    wv.loadUrl("http://myIP:myPort");

}
} 
```

它不起作用，屏幕变黑，而不是你做错了什么，因为使用一个名为“tinycam Monitor”的程序会引入相同的 IP 和相同的端口，如果它看起来像图片！

请帮忙，非常感谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-11T10:12:56.037

您的清单中缺少以下行：

```
<uses-permission android:name="android.permission.INTERNET"> 
```

并尝试将 main.xml 中的 webview 更改为：

```
<WebView

    xmlns:android="http://schemas.android.com/apk/res/android"

    android:id="@+id/webview"

    android:layout_width="fill_parent"

    android:layout_height="fill_parent" /> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-03-16T21:03:48.920

如果您的 manifest.xml 和 layout.xml 编码正确。在您的活动中，您可以使用如下代码：

```
 WebView webView = (WebView) findViewById(R.id.web_view);
 String html = "<!DOCTYPE html>\n" +
            "<html>\n" +
            "<head>\n" +
            "\t<title></title>\n" +
            "</head>\n" +
            "<body>\n" +
            "<img src=\"http://192.168.1.7:8081/\">\n" +
            "</body>\n" +
            "</html>";
    String mime = "text/html";
    String encoding = "utf-8";

    webView.getSettings().setJavaScriptEnabled(true);
    webView.loadDataWithBaseURL(null, html, mime, encoding, null); 
```

如您所见，我像这样在html中使用了我的本地IP，并且运行良好。我在 linux 操作系统中使用了运动 ip 摄像头，没有问题。

# php - 使用 $_GET 检索我的自定义变量

> ID：11430183
> 
> 赞同：1
> 
> 时间：2012-07-11T10:02:36.053
> 
> 标签：php, facebook

我正在尝试使用 php 中的 $_GET 运算符从 fb 应用程序 url 获取 mycusomvariable 以尝试附加用户名，并发现这似乎没有返回任何详细信息？

例如，这里是我发布到 Facebook 的网址：

**http://apps.facebook.com/my-app-namespace?username=Test**

这是应该检索字符串'Test'的php代码

```
 <?php

      $username = $_GET ['username'];
      echo $username;

    ?> 
```

这应该在浏览器中显示为测试，但什么也不显示。

有人对我要去哪里有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-11T10:06:23.273

您是否可能运行*旧*版本的 PHP，该`$_GET`命令是在 PHP 4.1.0 中添加的。尝试`<?php phpinfo(); ?>`获取您当前的版本。

查看显示版本号的[PHP 文档。](http://www.php.net/manual/en/reserved.variables.get.php)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-11T10:25:36.390

据我所知，facebook 应用程序在`<iframe>`. 如果为真，那么您将无法访问应用程序中的全局 $_GET 数组。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-11T10:06:55.220

```
if(isset($_GET['username'])){
echo " fine" ;
else { 
echo "not set" ; 
```

并在谷歌搜索 url 变量

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-11T10:07:54.113

尝试将变量重命名`username`为其他名称。也许 Facebook 已经屏蔽了这个变量名。
例子： `http://apps.facebook.com/my-app-namespace?qwerty=Test`

```
<?php
  $username = $_GET ['qwerty'];
  echo $username;
?> 
```

# android - 无法关闭android eclipse上的所有活动

> ID：11430184
> 
> 赞同：1
> 
> 时间：2012-07-11T10:02:36.203
> 
> 标签：android, eclipse

假设我有四个班级。每个班级都有一个按钮可以从一个页面切换到另一个页面，它工作正常。但现在我试图通过单击最后一页的按钮来关闭所有活动。我试过了也是，但它只是关闭了最后一页。如何实现这个概念？

请找到我的代码以供参考

**Xit_demoActivity.java**

```
public class Xit_demoActivity extends Activity {
/** Called when the activity is first created. */

Button btn1; 

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);

    btn1 = (Button)findViewById(R.id.button_1);
    btn1.setOnClickListener(new View.OnClickListener() {

    public void onClick(View v) {
    Intent myIntent = new Intent(v.getContext(), Class1.class);
    startActivity(myIntent);
        }
    }); 
```

**Class1.java**

```
public class Class1 extends Activity 
{

Button btn1;

@Override
protected void onCreate(Bundle savedInstanceState) {

    super.onCreate(savedInstanceState);
    setContentView(R.layout.main1);

    btn1 = (Button)findViewById(R.id.button_2);
    btn1.setOnClickListener(new View.OnClickListener() {

    public void onClick(View v) {
    Intent myIntent = new Intent(v.getContext(), Class2.class);
    startActivity(myIntent);
        }
    }); 
```

**Class2.java**

```
public class Class2 extends Activity 
{

Button btn1;

@Override
protected void onCreate(Bundle savedInstanceState) {

    super.onCreate(savedInstanceState);
    setContentView(R.layout.main2);

    btn1 = (Button)findViewById(R.id.button_3);
    btn1.setOnClickListener(new View.OnClickListener() {

    public void onClick(View v) {
    Intent myIntent = new Intent(v.getContext(), Class3.class);
    startActivity(myIntent);
        }
    }); 
```

**Class3.java**

```
public class Class3 extends Activity 
{
@Override
protected void onCreate(Bundle savedInstanceState) {

    super.onCreate(savedInstanceState);
    setContentView(R.layout.main3);

    Button next = (Button) findViewById(R.id.button_4);
    next.setOnClickListener(new View.OnClickListener() {

    public void onClick(View v) 
    {
        Intent intent = new Intent();
        setResult(RESULT_OK, intent);
        finish();
        }
    }); 
```

**清单.xml**

```
<?xml version="1.0" encoding="utf-8"?>
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
package="com.and.roidu.xit"
android:versionCode="1"
android:versionName="1.0" >

<uses-sdk android:minSdkVersion="8" android:targetSdkVersion="8" />

<application
    android:icon="@drawable/ic_launcher"
    android:label="@string/app_name" >
    <activity
        android:name=".Xit_demoActivity"
        android:label="@string/app_name" >
        <intent-filter>
            <action android:name="android.intent.action.MAIN" />
            <category android:name="android.intent.category.LAUNCHER" />
        </intent-filter>
    </activity><activity android:name=".Class1"></activity>

    <activity
        android:name=".Class1"
        android:label="@string/app_name" >
        <intent-filter>
            <action android:name="android.intent.action.MAIN1" />
            <category android:name="android.intent.category.LAUNCHER" />
        </intent-filter>
    </activity><activity android:name=".Class2"></activity>

    <activity
        android:name=".Class2"
        android:label="@string/app_name" >
        <intent-filter>
            <action android:name="android.intent.action.MAIN2" />
            <category android:name="android.intent.category.LAUNCHER" />
        </intent-filter>
    </activity><activity android:name=".Class3"></activity>

    <activity
        android:name=".Class3"
        android:label="@string/app_name" >
        <intent-filter>
            <action android:name="android.intent.action.MAIN3" />
            <category android:name="android.intent.category.LAUNCHER" />
        </intent-filter>
    </activity>

 </application>

</manifest> 
```

谢谢你的时间！..

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-11T10:06:31.777

简单地试试这个。考虑你`Class3.java`是你的最后一个`Activitiy`并且，在下面的代码`Button`中使用 -`next`

```
Intent intent = new Intent(currentActivity.this, XitActivity.class); // instead of XitActivity use your first activity
intent.setFlags(Intent.FLAG_ACTIVITY_CLEAR_TOP);
intent.putExtra("EXIT", true);
startActivity(intent); 
```

并且，在您使用下面`Xit_demoActivity`的`onCreate()`代码中 -

```
if (getIntent().getBooleanExtra("EXIT", false)) {
    finish();
} 
```

希望这将帮助您退出所有活动。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-11T10:19:57.263

我会坚持创建一个带有 BroadCastReceiver 的 BaseActivity，它会在您想要完成所有活动并使用此 BaseActivity 扩展所有 Activity 类时发出通知，

```
public static final String ACTION_FINISH = "ACTION_FINISH";
public class BaseActivity extends Activity {

public void onCreate(Bundle bundle, int resourceId) {
    super.onCreate(bundle);
    registerReceiver(finishActivitiesReceiver, 
                                          new IntentFilter(ACTION_FINISH));
}

protected void onDestroy() {
    super.onDestroy();
    unregisterReceiver(finishActivitiesReceiver);
}

BroadcastReceiver finishActivitiesReceiver = new BroadcastReceiver() {

        @Override
        public void onReceive(Context context, Intent intent) {
            finish();
        }
    };
} 
```

然后，当您想使用关闭所有活动时，您可以发送广播

```
sendBroadcast(new Intent(BaseActivity.ACTION_FINISH)); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-11T10:09:15.030

你不应该这样做。如果要打开主屏幕或上一个应用程序屏幕。你可以简单地打电话

```
moveTaskToBack(boolean bool); 
```

它会将您的应用程序发送到后台。或者，如果您不想在堆栈中包含 class1 2 和 3，您可以在清单 decl 的活动中使用 excludeFromRecent 标志。

**对于同一个问题，该线程获得了数千次浏览。看看它并做出理解。**

[退出应用程序不受欢迎吗？](https://stackoverflow.com/questions/2033914/quitting-an-application-is-that-frowned-upon)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-11T10:14:47.023

在第 3 类中单击按钮时，请写下：

```
Intent intent=new Intent(Class3.this,Class1.class);
intent.setFlags(Intent.FLAG_ACTIVITY_CLEAR_TOP);
startActivity(intent); 
```

# django - nginx + uwsgi +django 出现 502 错误

> ID：11430185
> 
> 赞同：8
> 
> 时间：2012-07-11T10:02:44.260
> 
> 标签：django, nginx, uwsgi

我尝试在 nginx 和 uwsgi 上配置 django，尝试访问 localhost 时遇到 502 bad gateway 错误

这是我的 /etc/ngingx/sites-available/default 文件

```
server {
    server_name testapp1.com www.testapp1.com;
    access_log /var/log/nginx/testapp1.com.access.log;

    location / {
        uwsgi_pass unix:///var/run/uwsgi/app/testapp1/socket;
        include uwsgi_params;
    }
} 
```

这是我在 /etc/nginx/apps-available/ 中的 testapp1.ini 文件

```
[uwsgi]  
    thread=3  
    master=1  
    env = DJANGO_SETTINGS_MODULE=testapp1.settings  
    module = django.core.handlers.wsgi:WSGIHandler()  
    chdir = /home/paul/apps/testapp1  
    socket = /run/uwsgi/testapp1/socket  
    logto = /var/log/uwsgi/testapp1.log 
```

这是 uwsgi.log 文件

> 2012 年 7 月 10 日星期二 21:49:38 - *** 在 [2012 年 7 月 10 日星期二 21:49:38] 开始 uWSGI 1.0.3-debian（32 位） *** 2012 年
> 7 月 10 日星期二 21:49:38 - 编译
> 版本：2012 年 2 月 20 日 10:06:16
> 2012 年 7 月 10 日星期二 21:49:38 的 4.6.2 - 当前工作目录：/ 2012 年 7 月 10 日星期二 21:49:38 - 将
> pidfile 写入 /run/uwsgi/app/testapp1 /pid 2012 年 7 月 10 日星期二 21:49:38 -
> 检测到二进制路径：/usr/bin/uwsgi-core 2012 年 7 月 10 日星期二 21:49:38 -
> setgid() 到 2012 年 7 月 10 日星期二 21:49:38 至 33 - setuid () 到
> 2012 年 7 月 10 日星期二 21:49:38 33 - 您的内存页面大小为 4096 字节 2012 年 7 月 10 日星期二
> 21:49:38 - uwsgi 套接字 0 绑定到 UNIX 地址
> /run/uwsgi/app/testapp1/socket fd 5 2012 年 7 月 10 日星期二 21:49:38 - 绑定（）：
> 没有这样的文件或目录 [socket.c 第 107 行]

我没有更改 nginx.conf 文件。

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2012-10-23T16:10:49.353

其他情况是这是一个权限问题（不是像您的情况那样的套接字路径拼写错误）。在这种情况下，您可以将其添加到 uwsgi ini 文件中

```
[uwsgi]                                                                                                          
uid = www-data
gid = www-data
chmod-socket = 664
chown-socket = www-data 
```

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2012-07-11T12:36:56.163

错误信息很清楚：

```
Tue Jul 10 21:49:38 2012 - uwsgi socket 0 bound to UNIX address
/run/uwsgi/app/testapp1/socket fd 5
Tue Jul 10 21:49:38 2012 - bind():
No such file or directory [socket.c line 107] 
```

您是否看到以下之间的区别：

```
 socket = /run/uwsgi/testapp1/socket 
```

和：

```
 uwsgi_pass unix:///var/run/uwsgi/app/testapp1/socket; 
```

?

*提示：* / **var** /run/uwsgi/ **app** /testapp1/socket

# git - 内部存储库设置

> ID：11430186
> 
> 赞同：0
> 
> 时间：2012-07-11T10:02:59.260
> 
> 标签：git, dvcs

我最近加入了 GIT 的潮流。我对使用哪个 DVCS 主机感到困惑。我的想法是我可以在专用/vps 服务器上设置自己的东西。

所以，我的问题是，如何在我拥有的专用服务器上设置我自己的内部远程存储库管理系统？

请指导。

问候

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-11T10:07:13.260

在服务器上，在您要使用的目录中运行以下命令...

```
git init --bare 
```

这会在服务器上创建一个空/裸存储库。

在客户端上，在现有的 git 存储库中运行以下命令（假设您知道如何执行此操作）...

```
git remote add myserver <url/path> 
```

这会为您的服务器添加一个远程/链接。路径可以是本地的、远程的（http、ssh 等）。

*   在本地文件系统上使用：~/myrepo/example.git
*   使用 ssh：ssh://username@example.org/~/myrepo/example.git
*   使用 http：[http://username@example.org/myrepo/example.git](http://username@example.org/myrepo/example.git)

有关通过 ssh 设置 git 的更多信息，请参阅以下[文章](http://fclose.com/b/linux/366/set-up-git-server-through-ssh-connection/)。

要将代码推送到您的服务器，请执行以下操作...

```
git push myserver master 
```

这会将您的提交推送到远程服务器。其中“myserver”是您为远程位置提供的别名

```
git pull myserver master 
```

使用 git pull 您可以从服务器下载/拉取所有提交。

**编辑**Github 很棒，并且有很多附加功能，但最好知道如何自己设置一个 git 存储库。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-11T10:14:45.837

我喜欢[Gitosis](https://github.com/res0nat0r/gitosis)，它使设置存储库变得非常容易。你可以在他们的 github 页面上找到一个快速教程（见链接）。

# xml - TSQL where on xml 数据类型

> ID：11430187
> 
> 赞同：0
> 
> 时间：2012-07-11T10:03:00.763
> 
> 标签：xml, tsql, where-clause

如何在 Sql Server 2005 中对 xml 数据类型执行 where 子句命令？

### xml结构

```
<User UserId="1" UserName="x">
<User UserId="2" UserName="y"> 
```

### 询问

```
SELECT XmlColumn from Table where XmlColumn.query('/User[@UserId'+ @dynamicValue +']') 
```

### 预期输出

获取属性 UserId = 输入变量的所有用户标签

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-11T10:10:22.587

```
declare @T table
(
  XMLColumn xml
)

insert into @T values ('<User UserId="1" UserName="x"/>')
insert into @T values ('<User UserId="2" UserName="y"/>')

declare @UserID int
set @UserID = 1

select XMLColumn
from @T
where XMLColumn.exist('/User[@UserId = sql:variable("@UserID")]') = 1 
```

结果：

```
XMLColumn
---------------------------------
<User UserId="1" UserName="x" /> 
```

# php - iconv 和希腊文文件名

> ID：11430189
> 
> 赞同：0
> 
> 时间：2012-07-11T10:03:05.890
> 
> 标签：php, unicode, iconv

我在浏览器中显示带有希腊文件名（例如“φωτογραφία.jpg”）的图像时遇到问题。使用这个脚本，我发现了我需要与 iconv() 一起使用的 2 种编码，这样我就可以让文件名在浏览器中正确显示。图像本身虽然无法渲染。

```
<? 
$file = 'φωτογραφία.jpg';
$encodings = array("UTF-8", "ASCII", "Windows-1253", "ISO-8859-1", "UTF-16");
$iconv = "";
foreach ($encodings as $i) {
  foreach ($encodings as $j) {
    if($j!==$i) $iconv .= "<br /> $i -> $j: ".iconv($i, $j, $file);
  }
}
echo $iconv;
?> 
```

[此处](http://www.ht-webcreations.com/test/)的工作链接，从 UTF-8 -> Windows-1253 转换时返回正确的文件名。

环境是 Apache/2.2.22 (Unix) 上的 PHP 5.2.17，文件已从 Windows 机器上载。目前，我只测试了 2-3 个图像，将它们硬编码到一个测试 PHP 文件中。如果从数据库查询中提取文件名，您认为会有所不同吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-11T10:21:35.430

URL 不太可能在其中使用文字多字节字符。您需要通过它们`urlencode()`才能获得合理的结果。

例如

```
$file = 'φωτογραφία.jpg';
echo '<p><a href="'.urlencode($file).'" target="_self"><img src="'.urlencode($file).'" width="100" height="100" border="1"></a></p>'; 
```

这会生成类似于以下内容的 HTML：

```
<p><a href="%CF%86%CF%89%CF%84%CE%BF%CE%B3%CF%81%CE%B1%CF%86%CE%AF%CE%B1.jpg" target="_self"><img src="%CF%86%CF%89%CF%84%CE%BF%CE%B3%CF%81%CE%B1%CF%86%CE%AF%CE%B1.jpg" width="100" height="100" border="1"></a></p> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-11T21:29:59.217

> 环境是 Apache/2.2.22 (Unix) 上的 PHP 5.2.17，文件是从 Windows 机器上传的。

啊，但是你用什么编码上传它们？因为 WinNT 文件名是原生 unicode，而 Unix 文件名是原生字节，所以文件上传过程必须选择一种编码来在它们之间进行转换。

大多数 Linux 机器在 shell 或本地桌面中显示时将它们的文件名解释为 UTF-8，所以这是一个合理的选择，而且 IRI 始终是 UTF-8，所以如果你希望文件名显示为 φωτογραφία.jpg 在浏览器地址栏，这就是您要使用的编码。在这种情况下，您的 URI 编码版本将是`%cf%86%cf%89%cf%84%ce%bf%ce%b3%cf%81%ce%b1%cf%86%ce%af%ce%b1.jpg`.

然而，一些 Windows 工具将改为默认使用“ANSI 代码页”，这是一种特定于语言环境的编码。所以如果你在希腊版本的 Windows 上使用这样的工具，你会得到 cp1253；如果您在西欧安装中使用它，您会得到 cp1252 并且它会中断，因为希腊字母在该编码中不可用。如果您的上传工具不允许您指定编码，请获取更好的上传工具。（例如 WinSCP）

正如 Dave 提到的 (+1)，无论您使用哪种编码，您都需要对非 ASCII 字节进行 URI 编码。

# .net - 与分页相关的哪些 LINQ 操作可能会减慢我的查询速度？

> ID：11430190
> 
> 赞同：2
> 
> 时间：2012-07-11T10:03:15.907
> 
> 标签：.net, linq, sql-server-2008, linq-to-entities

我编写了一个非常通用的 LINQ 查询，该查询在我的整个应用程序中都使用，并且在除一种情况之外的所有情况下都能很好地工作。我目前只运行 SQL Express，所以在我的下载完成之前无法跳转到 sql profiler，所以在此之前，我的以下 LINQ 中是否有一些突出的东西会导致大幅减速？

以下是执行内容的摘要。延迟当然是在 ToList 调用上，需要 30 秒。我将这段代码用于我所有的网格视图，只有一个可以保留它。MyGridView 是一个 sql 视图，在问题数据中只需 2 秒即可通过 Sql Management Studio 执行并返回所有 16417 条记录。最后，当我请求接近数据末尾的页面时，它只需要这么长时间，所以我假设它与 Take and Skip 实现有一些关系。

```
private void Demo()
{
    // using LINQ To Entity...
    using (var entities = new MyEntities())
    {
        int page = 1641;
        int pageSize = 10;

        IQueryable<MyGridView> results = entities.MyGridView;

        results = results.Where(r => r.DeletedDate == null);

        var resultCount = results.Count();

        results = ApplyPaging(results, page, pageSize);

        // On the problem data, ToList takes a good 30 seconds to return just 10 records
        var resultList = results.ToList();
    }
}

private IQueryable<T> ApplyPaging<T>(IQueryable<T> data, int currentPage, int pageSize)
{
    if (pageSize > 0 && currentPage > 0)
    {
        data = data.Skip((currentPage - 1) * pageSize);
    }
    data = data.Take(pageSize);
    return data;
} 
```

有什么东西会被认为是坏的、错误的、危险的吗？当我安装了探查器的副本时，我会尝试通过生成的 sql 并在我发现任何提示时发布。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-11T10:13:09.657

请参阅[http://msdn.microsoft.com/en-us/library/bb357513.aspx#1](http://msdn.microsoft.com/en-us/library/bb357513.aspx#1)

> Skip 方法对 LINQ to SQL 组织服务器端结果分页和其他一些东西非常有用。但是在某些情况下存在性能问题，因为 LINQ 可以从指定的 LINQ 表达式构建过于困难的 SQL 查询。我在 MS SQL Server 2008 中遇到了这个问题。（...）
> 
> (...) 如果 Orgs 表中有 1000000 条记录，则此查询将执行很长时间，因为数据库服务器将对内存中的记录进行排序（不太可能您有一个所有列排序的适当索引）。甚至如此简单的查询
> 
> orgs.Skip(10).Count() 需要大量时间，而
> 
> orgs.Count()-10 执行得更快:)

也许这就是问题的根源。

# ios - 在 UIDocument 中存储音频文件

> ID：11430203
> 
> 赞同：2
> 
> 时间：2012-07-11T10:04:13.113
> 
> 标签：ios, avaudioplayer, icloud, uidocument

我有一个适用于 iCloud 的小应用程序。它将音频文件存储到云中。我注意到从第二台设备加载音频文件并不能立即工作。所以我实施

```
- (BOOL)downloadFileIfNotAvailable:(NSURL*)file 
```

这有帮助，但它仍然运行缓慢。我想通过将音频文件包装在 UIDocument 中来加快其他 iCloud 设备上的下载过程。这甚至可能吗？我可以将文件内容存储在 NSData 中，但是有一点（看看 AVAudioPlayer 如何想要一个 URL）？我还有其他方法可以加快同步速度吗？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-11T10:40:22.940

您可以为此使用 NSFileCoordinator 的 coordinateReadingItemAtURL 方法。看看这个[SO](https://stackoverflow.com/questions/9675303/icloud-callback-for-nsfilemanagers-startdownloadingubiquitousitematurl)的答案？

# mysql - 恢复 mysqldump 文件而不写入 general_log

> ID：11430204
> 
> 赞同：0
> 
> 时间：2012-07-11T10:04:18.043
> 
> 标签：mysql, mysqldump, diskspace

这基本上就是主题所说的。我已经阅读了有关在恢复数据库转储时禁用二进制日志的信息，但我找不到如何使用常规日志执行此操作（所有 INSERT 语句都在那里结束并且它们占用大量空间）。是否可以仅为还原操作禁用这种日志记录？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-11T10:14:53.713

读[这个](http://dev.mysql.com/doc/refman/5.1/en/query-log.html)。

设置全球 general_log = 'OFF'; 并重新启动服务器。

# java - Oracle classes12 驱动程序是单线程的吗？

> ID：11430209
> 
> 赞同：0
> 
> 时间：2012-07-11T10:04:33.883
> 
> 标签：java, multithreading, oracle, jdbc, driver

我使用带有 2 个使用相同类的 bean 的 java spring 应用程序。仅在指向 Oracle 数据库的 url 上有所不同。我的本地计算机上的一个 oracle 服务器，另一个在远程计算机上。所以有 2 个线程，每个线程连接到不同的 Oracle 主机。但是我发现，当我在本地终止会话时 - 要在客户端接收有关它的错误消息，应该等到远程执行完查询。它是否特定于 Oracle classes12 驱动程序？或者我应该检查我使用的代码？

# java - 当用户未使用 Servlet 登录时如何重定向到索引页面？

> ID：11430216
> 
> 赞同：1
> 
> 时间：2012-07-11T10:04:50.837
> 
> 标签：java, session, servlets

如果用户未使用 servlet 登录，如何重定向到登录页面。

我有一个登录页面，用户使用它登录并进入主页，导航后用户点击注销并在浏览器中点击后退按钮现在页面转到以前访问过的页面，使用时如何将用户重定向到登录页面小服务程序？

感谢您的帮助和持续的支持

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-11T10:14:19.287

在页面顶部的 jsp 中使用以下代码

```
if(userName.length()==0 || userType.length()==0 ){
        session.setAttribute("message", "Please Login");
         response.sendRedirect(response.encodeRedirectURL(path+"/"+destination));
    } 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-11T10:25:45.207

使用小服务程序，

在 web.xml 中

```
 <filter>
    <filter-name>AuthenticationFilter</filter-name>
    <filter-class>com.java.web.authentication.AuthenticationFilter</filter-class>
 </filter>
 <filter-mapping>
    <filter-name>AuthenticationFilter</filter-name>
    <url-pattern>/faces/manage/*</url-pattern>
  </filter-mapping> 
```

在身份验证过滤器中，

```
 if (visit == null) {
            servletContext.log("Redirecting to the login page.");
            session.setAttribute(Constants.ORIGINAL_VIEW_KEY, requestPath);
            String loginView = httpRequest.getContextPath() +  
            httpRequest.getServletPath() +Constants.LOGIN_PAGE;
            httpResponse.sendRedirect(loginView);
    } else {
            filterChain.doFilter(servletRequest, servletResponse);
    } 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-11T10:13:54.233

在您的 servlet doGet 或 doPost （无论哪个被调用）中，您需要检查用户是否已登录（我猜您有会话检查机制），如果您看到用户未登录，只需使用：

```
response.sendRedirect("/login.jsp"); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-11T10:15:48.637

您可以验证用户会话`Servlet`，如果会话无效或会话不包含 userId（如果在会话创建时您在会话属性中设置），则将其重定向到`login`页面。要禁用，您需要使用以下代码清除缓存`jsp/servlet`。

```
response.setHeader("Cache-Control","no-cache");
response.setHeader("Cache-Control","no-store"); 
response.setHeader("Pragma","no-cache"); 
response.setDateHeader ("Expires", 0); 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-07-11T13:05:59.407

理想情况下，您应该在 Filter 中执行此操作。

```
public void doFilter(.......){
      if(user logged in){
          filterChain.doFilter(...);
      } else {
        response.sendRedirect("/login.jsp");
      }
} 
```

我建议您使用`Servlet Security Feature`允许容器照顾的`Web Application Security`.

# javascript - Jquery 仅在图像加载后才能使用 fadeIn

> ID：11430217
> 
> 赞同：1
> 
> 时间：2012-07-11T10:04:51.837
> 
> 标签：javascript, jquery, fadein

在fadeOut 中的所有内容都已完全加载并准备好显示后，如何让下面的内容仅淡入？发生的事情是文本框右上角的图像在您第一次加载页面时跳跃并且不平滑淡入，这很烦人。

ps不要问我刚建的网页设计lol

[http://goodeggsafety.com/dev/](http://goodeggsafety.com/dev/)

//车内儿童安全苏格兰

```
 $("#link_1").click(function(e) {

         e.preventDefault();

         var img = $("#childbig2").attr('src');//Get current image

         if(img != 'images/childbig.png'){ //Check if current image is the clicked image if not carry on..
            //Variables
             var imgurl = 'images/childbig.png';
             var flag = 'images/scotland.png';
             var html = 'Visit the Scottish<br /> In-Car child safety<br /> campaign website. <br /><br /> Expert advice on seat and stage selection for your child. <br /><br />';
                 html = html + 'Car seat checking clinics - check<br /> when and where they are in your<br /> area for you to attend and have<br /> your seat checked by a Good Egg<br /> In-Car Expert. <br /><br /> News updates, competitions and much much more.';

             var linkurl = 'http://www.protectchild.co.uk/';//Link url 

              $("#content_1").fadeOut(600, function(){//fade out
                  $("#childbig2").attr('src', imgurl);//change image
                  $("#childbig2").attr('alt', 'In-Car Child Safety');//change image alt tag
                  $("#title_img").attr('src', flag);//change flag
                  $("#title_h2").html('Scotland');//change title
                  $("#text_title").html('In-Car Child Safety'); //Change second title
                  $("#text_content").html(html);//Change main text content
                  $("#weblink").attr('href', linkurl);//Change link url
                  $("#weblink").attr('title', linkurl);//Change link title
                  $("#arrowlink").attr('href', linkurl);//Change link on arrow url
                  $("#arrowlink").attr('title', linkurl);//change link on arrow title    
              }).fadeIn(600);//fade in speed, miliseconds   
          }
        }); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-11T10:11:52.653

您`fadeIn`目前没有被告知等待淡出回调完成。只需将您的回调移动`fadeIn()`到内部即可。`fadeOut`

```
$('#something').fadeOut(600, function() {
    //fadeOut callback operations here
    $(this).fadeIn(600); //now we're ready to fade in
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-11T11:15:33.253

您必须将"*content_1*"的**.fadeIn**函数绑定到img 节点 ( **childbig2 ) 上的***.load*：

```
$("#content_1").fadeOut(600, function(){
  var $content = $(this);
  var $childbig2 = $("#childbig2");

 $childbig2  
    .load(function() {
        $childbig2.off('load');
        $content.fadeIn(600); //fade in speed, miliseconds 
    })
    .attr('src', imgurl)
    .attr('alt', 'In-Car Child Safety') //change image alt tag

  $("#title_img").attr('src', flag);
  $("#title_h2").html('UK');
  $("#text_title").html('In-Car Child Safety'); 
  $("#text_content").html(html);
  $("#weblink").attr('href', linkurl);
  $("#weblink").attr('title', linkurl);
  $("#arrowlink").attr('href', linkurl); 
  $("#arrowlink").attr('title', linkurl);  
}); 
```

你可以在 jQuery 1.7.x 上使用 .off 全新的特性。

请注意，绑定 .load() 意味着：“加载图像时执行 XX”。在这种情况下“*做你父母的fadeIn()”。*

也为了 IExplorer 缓存兼容性：首先使用 .load() 然后 .attr()

请记住**取消绑定**（**off()**函数），否则每次应用 load() 函数时都会排队（调用）。

问候

# google-app-engine - 在 Google App Engine 中使用 Channel API 时的压缩

> ID：11430219
> 
> 赞同：2
> 
> 时间：2012-07-11T10:04:58.370
> 
> 标签：google-app-engine, compression, http-compression, channel-api

在[这个常见问题解答](https://developers.google.com/appengine/kb/general#compression)中，它说当浏览器支持压缩时会自动使用压缩，并且我不需要以任何方式修改我的应用程序。

我的问题是，**这也适用于 Channel API 消息吗？**

我有一个应用程序需要通过持久连接发送相对较大的 JSON（文本）数据，我希望如果它们被压缩，我可以更快地完成。

如果不是，我可以考虑一种解决方法，让服务器在大负载通过时仅通过通道发送一个 ping，然后让浏览器发出 GET 请求来获取它（这将“自动”压缩它），但是这会增加另一个请求的延迟。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-11T13:28:42.977

通过 Channel API 使用的连接发送的数据是 gzip 压缩的。

但是，Channel API 消息被限制为 32K 未压缩，因此对于任何大于此的内容，无论如何您都需要使用 ping/GET 方法。

# mysql - 使用 phpMyAdmin 导入大型 csv 文件

> ID：11430223
> 
> 赞同：7
> 
> 时间：2012-07-11T10:05:23.923
> 
> 标签：mysql, csv, import, phpmyadmin, mysql-error-1064

我有一个 csv 文件，一个很大的，30 000 行。正如我在谷歌上发现的那样，我尝试使用 LOAD 文件等从终端导入它，但它没有用。它正在进行导入，但我的表有 30 000 行 NULL 单元格。

之后我尝试了 phpMyAdmin，发现我的 csv 太大了。我使用 CSV Splitter 将其分成 5 份。我已经为第一个文件进行了导入。一切都很顺利。比我尝试导入第二个，但我得到了错误：

> 致命错误：第 370 行 C:\xampp\phpMyAdmin\libraries\import\csv.php 中允许的内存大小为 134217728 字节已用尽（试图分配 35 个字节）

或有时出现 1064 错误。

你知道为什么以及如何解决它吗？谢谢你。

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2012-07-11T10:19:02.763

增加 php 的内存限制和脚本时间，这是因为您通过 php 服务器执行 mysql 指令。

检查你的 php.ini 文件中的这个变量：

```
memory_limit
max_execution_time 
```

但无论如何我都会通过mysql客户端（终端）来做，检查mysql doc

```
LOAD DATA LOCAL INFILE '/path/to/your/csv/file/csv_file.csv' INTO TABLE database_name.table_name FIELDS TERMINATED BY ',' ENCLOSED BY '"' LINES TERMINATED BY '\n'; 
```

[Mysql 文档 - 加载数据 Infile 语法](http://dev.mysql.com/doc/refman/5.1/en/load-data.html) [PHP 文档 - Ini 核心设置](http://php.net/manual/en/ini.core.php)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-03T23:21:29.937

我在尝试使用 phpMyAdmin 导入大文件时遇到了这个问题，并且我也无法在我正在使用的版本中使用该命令。为了解决这个问题，我使用[了这个 CSV 编辑器](http://csved.sjfrancke.nl/)并将文件拆分为更小的文件。当我分别导入每个块时工作正常。

# jquery - jQuery - 获取文本文件，读取它，然后将结果作为类添加到倍数 div

> ID：11430225
> 
> 赞同：3
> 
> 时间：2012-07-11T10:05:26.963
> 
> 标签：jquery, filter, each, addclass

我有一些从 file.txt 提供的数据，显示如下：

```
<div class="nbvote">465</div>
<div class="nbvote">12</div>
<div class="nbvote">1862</div>
[...]
<div class="nbvote">3</div> 
```

我在同一页面中有多个 div (90)，如下所示：

```
<div class="grid_4">
<div class="grid_4">
<div class="grid_4">
[...]
<div class="grid_4"> 
```

现在我想将每个数据 (465,12,1862,...,3) 作为类添加到每个 div class="grid_4" 中，如下所示：

```
<div class="grid_4 465">
<div class="grid_4 12">
<div class="grid_4 1862">
[...]
<div class="grid_4 3"> 
```

我怎样才能做到这一点 ？我正在考虑使用长度，但我无法做到这一点。

顺便说一句，数据是投票数，我想将它们作为类添加到每个 div grid_4 然后升序排序。

对不起我的英语，不是我的第一语言。

泰

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-11T10:09:15.157

试试这个：

```
$('.nbvote').each(function(i, v){
   var cls = $(this).text();
   $('.grid_4:eq('+i+')').addClass(cls)
}) 
```

[演示](http://jsfiddle.net/MYCP3/1/)

注意：类名必须以字母 AZ 或 az 开头

# regex - Notepad++ 正则表达式搜索和替换空格最多

> ID：11430232
> 
> 赞同：-1
> 
> 时间：2012-07-11T10:05:47.620
> 
> 标签：regex, notepad++

如何在 Notepad++ 中编写正则表达式来搜索并用逗号替换所有空格（直到某一点）？

原文

```
468620438 [2012-07-07 00:00:00,307] [Thread-20] INFO  BIZ,Handler,getJobs():Retrieving messages from A...
468620438 [2012-07-07 00:00:00,307] [Thread-20] INFO  BIZ,InterfaceAdaptor,getMessages : Retrieving messages from B
468620453 [2012-07-07 00:00:00,322] [Thread-20] INFO  BIZ,Handler,_getNextMessage():Retrieving messages from B 
```

修订案文

```
468620438,[2012-07-07 00:00:00,307],[Thread-20],INFO,BIZ,Handler,getJobs():Retrieving messages from A...
468620438,[2012-07-07 00:00:00,307],[Thread-20],INFO,BIZ,InterfaceAdaptor,getMessages : Retrieving messages from B
468620453,[2012-07-07 00:00:00,322],[Thread-20],INFO,BIZ,Handler,_getNextMessage():Retrieving messages from B 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-11T10:10:46.720

最简单的方法是准确说明您要替换的内容：

代替

```
^(\S+)\s+(\S+\s+\S+)\s+(\S+)\s+(\S+)\s+ 
```

经过

```
\1,\2,\3,\4 
```

这是最简单的，因为您需要包含字段外观的知识，从而使事情复杂化，例如，第二列包含不应替换的*空格*。

# xml - 如何在 XSLT 中求和（）正/负数？

> ID：11430236
> 
> 赞同：0
> 
> 时间：2012-07-11T10:05:53.707
> 
> 标签：xml, xslt, xpath, sum, value-of

要对一系列值（正或负）求和，请使用 XPath 中的 sum() 函数。

在此示例中，我们从 XML 源获取事务并将其放入变量中。然后我们最后总结一下。

XML 源：

```
<month month="04">
 <balance in="987000,00" acnt="1100"/>
 <balance in="167440,00" acnt="1280"/>
 <balance in="1098000,00" acnt="1380"/>
 <balance in="575000,00" acnt="1460"/>
 <balance in="-75000,00" acnt="1469"/>
 ...
</month> 
```

XSLT：

这导致以下结构：

```
<account>
 <month month="name">
  <in>987000.00</in>
 </month>
 ...
</account> 
```

为了总结这些值，我们使用以下 XSLT 片段：

```
<xsl:value-of select="sum(ext:node-set($sumSet)//in)"/> 
```

此示例在 Visual Studio 中运行。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-11T11:15:15.573

这个问题有点偏离，所以我编辑了整个事情并提供了答案。:)

# c# - OleDbDataReader 看不到单元格中的数据 (.xlsx)

> ID：11430239
> 
> 赞同：2
> 
> 时间：2012-07-11T10:06:00.963
> 
> 标签：c#, excel, datareader, xlsx, oledbdatareader

读取 xlsx 文件时遇到一个非常奇怪的问题（我正在使用 OleDbDataReader）。

我在那里有一列包含以下数据：

*   50595855
*   59528522
*   C_213154
*   23141411

问题是当我读到这个专栏时，读者告诉我第三行是空的。Excel 中的列格式设置为“常规”。但是当我将格式设置为“文本”时，一切正常，读者可以看到该行中的数据。

所以只是为了实验，我在前两行前面加上字母，让它看起来像下面这样：

*   C_50595855
*   C_59528522
*   C_213154
*   23141411

即使列格式设置为“常规”，读者也可以毫无问题地阅读所有内容。

因此，Excel 显然会在加载列之前以某种方式分析列中的数据，当列的第一个单元格看起来像数字而其余一些单元格是文本时，它会感到困惑。

这对我来说真的很奇怪，因为单元格中有数据或没有数据。

有人知道为什么会这样吗？

任何帮助都感激不尽。

问候，伊戈尔

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-11T14:12:59.203

正如您推测的那样，这是由混合数据类型引起的问题。如果您搜索“OleDBDataReader 混合类型”，您会得到一些答案。这是描述该问题的[MSDN 页面](http://support.microsoft.com/kb/194124)：

“这个问题是由 Excel ISAM 驱动程序的限制引起的，一旦它确定了 Excel 列的数据类型，它将为任何不是 ISAM 驱动程序默认为该 Excel 列的数据类型的值返回 Null。 Excel ISAM 驱动程序通过检查前几行中的实际值来确定 Excel 列的数据类型，然后选择代表其采样中大多数值的数据类型。”

...以及解决方案：

“确保 Excel 中的数据是以文本形式输入的。仅将 Excel 列重新格式化为 Text 不会完成此操作。您必须在重新格式化 Excel 列后重新输入现有值。在 Excel 中，您可以使用 F5 重新输入现有值选定单元格中的值。

您可以添加选项 IMEX=1; 到 OpenDatabase 方法中的 Excel 连接字符串。例如：

```
Set Db = OpenDatabase("C:\Temp\Book1.xls", False, True, "Excel 8.0; HDR=NO; IMEX=1;") 
```

"

# javascript - Web 应用程序是用什么语言编写的？

> ID：11430242
> 
> 赞同：0
> 
> 时间：2012-07-11T10:06:07.043
> 
> 标签：javascript, html, css, web-applications

我已经自学了 HTML 和 CSS，并且正在学习 Javascript。我看到很多关于网络应用程序的东西（猜测它们是您在 Chrome 商店中获得的东西的类型等），但我找不到关于它们用什么语言编写的明确指南。我知道扩展程序是编写的在 javascript 中，但是 Web 应用程序呢？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-11T10:23:43.267

Web 应用程序是使用 Web 浏览器作为客户端的任何应用程序。该应用程序可以像留言板或网站上的访客登录簿一样简单，也可以像文字处理器或电子表格一样复杂。

“客户端”在客户端-服务器环境中用于指代人们用来运行应用程序的程序。客户端-服务器环境是多台计算机共享信息的环境，例如将信息输入数据库。***“客户端”是用于输入信息的应用程序，“服务器”是用于存储信息的应用程序，***

Web 应用程序通常使用服务器端脚本（ASP、PHP 等）和客户端脚本（HTML、Javascript 等）的组合来开发应用程序。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-11T10:17:17.637

Web 应用程序由服务器端和客户端组成。服务器端可以用任何编程语言编写。如果语言和库支持 Web 开发会很方便。在客户端，标准是 JavaScript、html 和 css 等 Web 标准。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-11T10:12:39.193

服务器端 Web 应用程序可以用任何可以输出文本的语言编写。所需要的只是 Web 服务器（如在服务器软件中，例如 Apache）有某种方式来运行脚本，以便它可以将输出发送到请求浏览器。如果该输出是有效的 HTML，那么就可以呈现一个网页

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-11T10:12:30.093

Web 应用程序是在 Web 的任何或许多语言中编码的应用程序，即 html、css、javascript、php、asp.net 等。Web 应用程序可以在常规浏览器、移动浏览器中运行或可以被包装作为要从 Android Market、AppStore 等下载的应用程序。

# java - 两个完全不同的 JAXB 注释类，相同的 @XmlElement 名称。可能的？

> ID：11430244
> 
> 赞同：1
> 
> 时间：2012-07-11T10:06:09.047
> 
> 标签：java, xml, jaxb

我们有一个现有的文档树。我们想将这棵树中的一些元素包装在一个元素中。

根据我们在树中的位置，元素将包含非常不同的内容。

所以我有一个 DocumentPromptLanguage 类和一个 DocumentRouterLanguage 类。它们有不同的父母和不同的孩子，但在 XML 中它们都被称为`<language>`.

这在没有适配器的情况下是否可行，或者 XML 表示必须通过元素名称来消除歧义？

样本：

```
<?xml version="1.0" encoding="utf-8"?>
<doc>
    <info>
        <language>
            <iso639>en</iso639>
            <value>This is a sample document</value>
        </language>
        <language>
            <iso639>es</iso639>
            <value>Se trata de un documento de muestra</value>
        </language>
    </info>
    <someElement>
        <route>
            <language>
                <iso639>en</iso639>
                <possibleValues>Yes|No|Maybe</possibleValues>
                <prefix>For</prefix>
            </language>
            <language>
                <iso639>es</iso639>
                <possibleValues>sí|not|tal vez</possibleValues>
                <prefix>para</prefix>
            </language>
            <when>Tuesday</when>
            <afterTime>17.30</afterTime>
            <goto></goto>
        </route>
    </someElement>
</doc> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-11T11:05:26.407

是的，映射到`route`元素的类可以具有映射到的属性`@XmlElement(name="language")`，映射到元素的类也可以`info`。这是因为映射是按类划分的。

# linux - Gnome - 确定键盘布局

> ID：11430247
> 
> 赞同：1
> 
> 时间：2012-07-11T10:06:15.410
> 
> 标签：linux, keyboard, gnome

我想知道当用户通过小程序切换键盘布局时，如何在 gnome 会话中确定当前使用的键盘布局。到目前为止，我不在乎我必须使用什么编程语言或库（gtk、x、...）。

我之前问过一个类似的问题： [https ://askubuntu.com/questions/155879/how-to-get-current-gnome-keyboard-layout-from-terminal](https://askubuntu.com/questions/155879/how-to-get-current-gnome-keyboard-layout-from-terminal)

不幸的是，没有人能解决这个问题，这就是我想问你的原因。您如何确定程序/脚本中的当前键盘布局。

谢谢

铁龙塞

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-10-15T08:50:14.603

在命令行或脚本中，您可以使用 setxkbmap：

```
$ setxkbmap -print | awk -F"+" '/xkb_symbols/ {print $2}'
gb 
```

或 -query 选项：

```
$ setxkbmap -query
rules:      evdev
model:      pc105
layout:     gb 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-11T10:18:46.483

键盘布局存储在 X 的设置中。 (/etc/X11/xorg.conf)

就个人而言，我会尝试解析该文件（或为其查找解析器）并尝试以这种方式确定布局。

由于我对 X11 没有那么丰富的经验，我不知道是否有 API 可以查询这些设置。

我必须说，我不知道这是否是唯一可以配置的地方。其他人也许能够证实这一点。

# java - 从 servlet 获取响应。ExtJs

> ID：11430248
> 
> 赞同：0
> 
> 时间：2012-07-11T10:06:17.363
> 
> 标签：java, javascript, servlets, extjs

我有一个带有文件上传和 servlet 的 extJs 表单。上传文件后，我想从 servlet 获得响应。

我这样做`System.out.println("{success:true, error:'error'}");` 但是在 POST 的萤火虫中我什么也没看到。此代码适用于 jsp 但不适用于 servlet。那么如何从 servlet 发送参数呢？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-11T10:31:44.640

`System.out`PrintStream 不是您的 servlet 响应的输出流。它仍然是“标准”系统输出。大多数应用程序服务器将其重定向到日志文件。

Servlet 的`service()`方法，以及`do*()`HttpServlet 的方法，都以[ServletResponse](http://docs.oracle.com/javaee/5/api/javax/servlet/ServletResponse.html)和[HttpServletResponse](http://docs.oracle.com/javaee/5/api/javax/servlet/http/HttpServletResponse.html)为参数。在实现 servlet 时，可以调用`getWriter()`该参数以`PrintWriter`打开响应的输出流。这可以用来在响应中打印一些东西。

所以，你的代码应该是这样的：

`response.getWriter().println("{success:true, error:'error'}");`

# css - 改变手写笔css中部分文本的颜色？

> ID：11430252
> 
> 赞同：7
> 
> 时间：2012-07-11T10:06:25.877
> 
> 标签：css, stylus

我想使用手写笔更改文本字符串中只有一个单词的颜色，即

```
#copy
   h1 Our new site will be ready soon.. 
```

手写笔代码是

```
 h1
   font-weight bold
   color white 
```

我只想将 h1 短语“我们”中第一个字母的颜色更改为黄色，我怎么能在手写笔中实现这一点，谢谢 :)

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-07-11T10:11:38.727

css 选择器“首字母”选择器是一个不错的选择。

如果您想根据您的示例更改其他字母或部分文本，请使用具有自己风格的跨度，例如

```
<h1><span style="color:yellow">O</span>ur <span style="color:blue">new</span> website</h1> 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-07-11T10:09:34.160

您可以尝试[:first-letter](http://reference.sitepoint.com/css/pseudoelement-firstletter)选择器：

```
h1:first-letter
    color: yellow 
```

[这是](http://jsfiddle.net/scumah/7x9VU/)一个例子。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-11T10:22:26.520

这可以通过使用[伪元素来完成](http://www.w3schools.com/css/css_pseudo_elements.asp)

[小提琴](http://jsfiddle.net/7x9VU/1/)

# android - 如何在Android中为对话框设置图标

> ID：11430253
> 
> 赞同：10
> 
> 时间：2012-07-11T10:06:26.890
> 
> 标签：android

我想在 Android 中自定义一个对话框。我知道如何设置对话框的标题：

```
dialog.setTitle("O message"); 
```

现在我想在标题前面设置图标。我怎样才能做到这一点？

```
Dialog dialog;
dialog = new Dialog(this);
dialog.setContentView(R.layout.layouterror22);      
dialog.setTitle("O message"); 
```

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2012-07-12T02:40:56.760

您可以使用以下代码添加图标：

```
Dialog dialog = new Dialog(context);

dialog.requestWindowFeature(Window.FEATURE_LEFT_ICON);
dialog.setFeatureDrawableResource(Window.FEATURE_LEFT_ICON, R.drawable.your_icon); 
dialog.setContentView(R.layout.custom_dialog);
dialog.setTitle("Dialog Title");

dialog.show(); 
```

请参阅[“自定义对话框 android 中的图标”](https://stackoverflow.com/q/4388674/1430996)。

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2012-07-11T10:09:23.950

用这个，

```
dialog.setIcon(R.drawable.ic_launcher) 
```

您需要更多自定义方式，请参阅此站点[http://www.androidhive.info/2011/09/how-to-show-alert-dialog-in-android/](http://www.androidhive.info/2011/09/how-to-show-alert-dialog-in-android/)

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-07-11T10:09:05.697

```
dialog.setIcon(Drawable icon); 
```

或者

```
dialog.setIcon(int resId); 
```

希望这可以帮助。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-07-11T10:11:13.900

可能你应该使用 AlertDialog。如果你这样做，只是

```
AlertDialog.Builder b = new AlertDialog.Builder(yourContext);
b.setIcon(yourIcon);
/* add other properties thanks to b.set... */
b.create().show(); 
```

希望这对您有所帮助。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2021-01-01T13:42:36.233

要将图标添加到警报对话框，您需要向其中添加以下代码。

```
AlertDialog.Builder builder = new AlertDialog.Builder(this);
      /*  builder.setMessage("Visit Be Developers.tech");
        builder.setTitle("Alert");
    builder.setIcon(R.drawable.ic_baseline_call_24);//This line should be added

        builder.setPositiveButton("Visit", new DialogInterface.OnClickListener() {
            @Override
            public void onClick(DialogInterface dialogInterface, int i) {

            }
        });
        builder.setNegativeButton("Cancel", new DialogInterface.OnClickListener() {
            @Override
            public void onClick(DialogInterface dialogInterface, int i) {

            }
        });
        AlertDialog dialog = builder.create();
        dialog.show(); 
```

有关添加列表等更多自定义，请查看 [https://bedevelopers.tech/alert-dialog-in-android-show-alert-using-the-builder/](https://bedevelopers.tech/alert-dialog-in-android-show-alert-using-the-builder/)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2017-05-15T21:19:27.680

如果您使用的是`viewPager`带有片段的 a，您可以`safeExit()`从 的`onBackPressed()`中调用 a `MainActivity`。这就是我所做的，我从来没有遇到任何问题：

```
 @Override
    public void onBackPressed() {

        try {
            if (getFragmentManager().getBackStackEntryCount() > 1) {
                FragmentManager.BackStackEntry first = getFragmentManager().getBackStackEntryAt(0);
                getFragmentManager().popBackStack(first.getId(), FragmentManager.POP_BACK_STACK_INCLUSIVE);
            } else
                safeExit();

        } catch (Exception e) {
            e.printStackTrace();
        }
    }

    private void safeExit() {
        new Builder(this).setIcon(R.drawable.ic_launcher).setTitle("Exit!").setMessage(
                "Close Application?").setPositiveButton("Yes", new DialogInterface.OnClickListener() {
            public void onClick(DialogInterface dialog, int which) {
                MainActivity.this.finish();
            }
        }).setNegativeButton("No", null).show();
   } 
```

# c# - iTextSharp：在表格前放置空格

> ID：11430254
> 
> 赞同：2
> 
> 时间：2012-07-11T10:06:30.867
> 
> 标签：c#, itextsharp

我正在使用 iTextSharp 在 PDF 文件中呈现 html 页面。

渲染没问题，但我找不到在每张桌子前放一些空白的方法。

现在表格前面的文字太近了。

有没有可以添加到样式表的属性？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-17T07:01:29.257

你在使用 iTextSharp 的 XMLWorker 吗？在这种情况下，CSS 属性“margin-top”应该可以帮助您。

如果您指的是 HTMLWorker：它已被弃用，取而代之的是 XMLWorker，因此您可以考虑迁移。

# iphone - 2.1 版的 Titanium tableview scrollend 事件返回 contentOffset 位置 y 为 0？

> ID：11430265
> 
> 赞同：0
> 
> 时间：2012-07-11T10:07:09.507
> 
> 标签：iphone, events, titanium, listener, tableview

我正在为 iPhone 创建一个带有拉动刷新的表格视图。我为“scrollEnd”添加了一个事件监听器来获取 contentOffset.y。它工作正常并返回钛 sdk 版本 1.8.0 的点值，但在拉下 tableview 时总是返回 0，而在版本 2.1.0 中拉起 tableview 时总是返回正值

如何在钛 sdk 版本 2.1.0 中拉下 tableview 的负值？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-19T13:33:55.313

定义`offset`变量 out of scroll 事件。
替换`scrollEnd`为`dragEnd`。
在事件中使用`offset`变量`dragEnd`而不是`e.contentOffset.y`.

# jquery - jquery 验证器插件忽略标题属性以显示错误消息

> ID：11430273
> 
> 赞同：2
> 
> 时间：2012-07-11T10:07:35.053
> 
> 标签：jquery, jquery-validate

如何忽略标题属性以在 jquery 验证器插件中显示错误消息。因为我使用该标题来显示工具提示而不是错误消息。

插件初始化

```
$('#participantform').validate(); 
```

要验证的表单元素

```
<input name="o_phone_cnt" class="inputtextie required digits" title="Country Code" style="width:25px" type="text" minlength="1" size="3" maxlength="3"/> 
```

点击按钮

```
$('#sendmail_ppnt').button().click(function(){
      $('#participantform').submit();
}); 
```

在验证时它根据***需要***显示错误消息，但在将标题添加到 input:text 元素后，它将***国家代码***显示为错误消息。

如何配置验证器插件以忽略标题属性以显示错误消息。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-11T10:13:07.857

您可以将[ignoreTitle](http://docs.jquery.com/Plugins/Validation/validate#toptions)选项传递给`validate()`：

```
$("#participantform").validate({
    ignoreTitle: true
}); 
```

顺便说一句，请注意文档说（强调我的）：

> 设置从标题属性跳过阅读消息，有助于避免谷歌工具栏出现问题；为了兼容性，默认为 false，*message-from-title 很可能在未来的版本中被完全删除*。

因此，您可能无需任何操作即可通过插件的未来版本获得您想要的行为。

# python - 使用python在sqlite数据库上并发

> ID：11430276
> 
> 赞同：0
> 
> 时间：2012-07-11T10:07:51.043
> 
> 标签：python, database, sqlite, concurrency, locking

有一个我要处理的数据列表。但是我需要用多个实例处理数据以提高效率。

每次每个实例要取出一个项目，从列表中删除，并通过一些程序进行处理。

首先，我尝试将列表存储在 sqlite 数据库中，但 sqlite 允许多个读锁，这意味着多个实例可能从数据库中获取相同的项目。

有什么方法可以让每个实例都获得一个独特的项目来处理？如果需要，我可以使用其他数据结构（其他数据库或只是文件）。

顺便说一句，在执行 cursor.execute(delete_query) 之后，有没有办法检查 DELETE 操作是否成功？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-11T10:17:25.410

据我所知，您需要启动 python 解释器的多个实例才能获得与 python 的真正并发（或至少多个执行进程，以便您可以：

*   制作 1 个代理进程，告诉其他人他们可以获取哪些记录（例如通过[0mq 之](http://www.zeromq.org/bindings%3apython/)类的东西），但这可能会有效地使您的代理成为瓶颈。
*   如果您的数据很容易整除（例如，主键的升序数字），则按进程划分部分数据库。

像[greenlets](http://greenlet.readthedocs.org/en/latest/index.html)和[tasklet](http://www.stackless.com/wiki/Tasklets)这样的东西真的是一个接一个地执行，它们切换得非常快，因为它们没有真正的线程/进程开销，但它们并没有真正并发执行。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-11T10:17:37.663

db 中的另一个字段作为标志（例如 PROCESSING、UNPROCESSED、PROCESSED）怎么样？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-01-03T16:40:30.303

为什么不从数据库中读取所有项目并将它们放入队列中？您可以让工作线程获取项目，对其进行处理并继续进行下一个。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-11T14:32:55.240

最简单的方法是在单个进程中生成项目并将它们传递给多个工作进程进行处理，例如：

```
from multiprocessing import Pool

def process(item):
    pass # executed in worker processes

def main():
    p = Pool() # use all available CPUs
    for result in p.imap_unordered(process, open('items.txt')):
        pass

if __name__=='__main__':
   main() 
```

# php - 在 symfony 1.4 中访问扩展类

> ID：11430277
> 
> 赞同：0
> 
> 时间：2012-07-11T10:07:52.050
> 
> 标签：php, symfony-1.4, propel, sfguard

所以...我基本上遵循[实用的 symfony 书](http://www.symfony-project.org/jobeet/1_4/Propel/en/13)，遇到了以下问题。我已经正确（我猜）安装了 sfGuardPlugin，构建了模型、sqls 等，创建了用户并尝试使用输入的用户名和密码登录。

我收到以下错误消息：

> `Fatal error: Call to undefined method sfGuardUserPeer::retrieveByUsername() in /***/plugins/sfGuardPlugin/lib/validator/sfGuardValidatorUser.class.php on line 53`

这对我来说看起来很奇怪，因为 sfGuardValidatorUser 类的问题部分如下所示：

```
// user exists?
if ($user = sfGuardUserPeer::retrieveByUsername($username))
{
  // password is ok?
  if ($user->getIsActive() && $user->checkPassword($password))
  {
    return array_merge($values, array('user' => $user));
  }
} 
```

而 sfGuardUserPeer 只有空类：

```
class sfGuardUserPeer extends PluginsfGuardUserPeer
{
} 
```

它扩展了 PluginsfGuardUserPeer，所以我也检查了它：

```
class PluginsfGuardUserPeer extends BasesfGuardUserPeer
{
  public static function retrieveByUsername($username, $isActive = true)
  {
    $c = new Criteria();
    $c->add(self::USERNAME, $username);
    $c->add(self::IS_ACTIVE, $isActive);

    return self::doSelectOne($c);
  }

} 
```

那是缺少的功能！

所以 - 怎么了？为什么它不起作用？我已经尝试过用谷歌找到的所有解决方案，但它们都不起作用：/

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-12T10:46:05.537

终于找到了！

这

```
symfony propel:build-model 
```

任务不必要地从位于插件目录中的模式文件中生成模型目录中的 sfGuard 类，而所有类都已存在于 sfGuard 文件夹中。

哎呀，在如此完善的框架和插件中不应该发生这种情况......

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-02-20T08:44:35.627

简单地说

```
public static function retrieveByUsername($username, $isActive = true)
  {
    $c = new Criteria();
    $c->add(self::USERNAME, $username);
    $c->add(self::IS_ACTIVE, $isActive);

    return self::doSelectOne($c);
  } 
```

将代码写入您的`sfGuardUserPeer`课程，这将解决问题，当我收到此错误时我做了同样的事情，它对我有用..

# xcode4 - 防止 XCode 4 启用助手进行调试？

> ID：11430279
> 
> 赞同：2
> 
> 时间：2012-07-11T10:07:59.010
> 
> 标签：xcode4

每次我在 XCode 4 中调试我的代码并且我有几个断点时，XCode 4 最终都会打开助手并开始在第二个拆分面板中显示断点。

我觉得它很烦人，真的很想禁用它。有可能吗？有什么想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-17T13:15:30.930

似乎问题在 XCode 4.4.1 的最新版本中消失了

# tridion - Tridion Broker 数据库和 IIS

> ID：11430281
> 
> 赞同：-2
> 
> 时间：2012-07-11T10:08:14.693
> 
> 标签：tridion, tridion-content-delivery

我目前正在使用 Tridion 5.3。页面从 Tridion CM 端发布到 Broker db 之后。应该如何将 IIS 配置为指向数据库中的页面，就像我们对文件系统所做的那样。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-11T10:16:51.110

您可能想从文档开始这个主题（需要登录）： [http ://sdllivecontent.sdl.com/LiveContent/content/en-US/SDL_Tridion_2011_SPONE/concept_72627979491D47A78F1735CB76DF7AA4](http://sdllivecontent.sdl.com/LiveContent/content/en-US/SDL_Tridion_2011_SPONE/concept_72627979491D47A78F1735CB76DF7AA4)

该文档适用于 Tridion 2011 SP1，但同样的高级概念适用于 Tridion 5.3。但如果可以的话，一定要考虑在 Tridion 安装随附的 PDF 中查找相应的主题。

# html - 如何使文本在输入的文件类型中右对齐？

> ID：11430288
> 
> 赞同：2
> 
> 时间：2012-07-11T10:08:37.000
> 
> 标签：html

在 HTML 输入文件类型属性中，如何使文件路径右对齐，这是我通过浏览获得的？

```
<input type=file id='id' class='file' />
    $('#id').css('text-align','right') 
```

不管用。

我试过

```
$('#id').attr('style','text-align:right'); 
```

但是没有用。如果我使用 class 而不是 id 那么它也不起作用

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-11T10:12:43.530

您不能修改输入文件的样式，但您可以使用其他方法来间接设置它的样式。

试试这个。

[http://www.quirksmode.org/dom/inputfile.html](http://www.quirksmode.org/dom/inputfile.html)

[http://www.kavoir.com/2009/02/styling-file-upload-select-input-control-input-typefile.html](http://www.kavoir.com/2009/02/styling-file-upload-select-input-control-input-typefile.html)

# java - 如何在读取属性文件时关闭 fileInputStream

> ID：11430289
> 
> 赞同：10
> 
> 时间：2012-07-11T10:08:40.290
> 
> 标签：java

我有以下代码：

```
 // Read properties file.
     Properties properties = new Properties();
     try {
     properties.load(new FileInputStream("filename.properties"));
     } catch (FileNotFoundException e) {
     system.out.println("FileNotFound");
     }catch (IOException e) {
     system.out.println("IOEXCeption");
     } 
```

是否需要关闭 FileInputStream？如果是，我该怎么做？我的代码清单中出现了错误的做法。要求它放置 finally 块。

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-07-11T10:12:21.717

您必须关闭`FileInputStream`，因为`Properties`实例不会。从`Properties.load()`javadoc：

> 此方法返回后，指定的流保持打开状态。

将 存储`FileInputStream`在一个单独的变量中，在外部声明`try`并添加一个`finally`块，`FileInputStream`如果它被打开则关闭：

```
Properties properties = new Properties();
FileInputStream fis = null;
try {
    fis = new FileInputStream("filename.properties");
    properties.load(fis);
} catch (FileNotFoundException e) {
    system.out.println("FileNotFound");
} catch (IOException e) {
    system.out.println("IOEXCeption");
} finally {
    if (null != fis)
    {
        try
        {
            fis.close();
        }
        catch (Exception e)
        {
            e.printStackTrace();
        }
    }
} 
```

* * *

从 Java 7 开始使用[try-with-resources ：](https://docs.oracle.com/javase/tutorial/essential/exceptions/tryResourceClose.html)

```
final Properties properties = new Properties();
try (final FileInputStream fis =
         new FileInputStream("filename.properties"))
{
    properties.load(fis);
} catch (FileNotFoundException e) {
    system.out.println("FileNotFound");
} catch (IOException e) {
    system.out.println("IOEXCeption");
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-11T10:14:31.780

您应该始终关闭您的流，并且在`finally`块中执行此操作是一个好习惯。这样做的原因是`finally`块总是被执行，并且你想确保流总是关闭，即使发生了一些坏事。

```
 FileInputStream inStream = null;
    try {
        inStream = new FileInputStream("filename.properties");
        properties.load(inStream);
    } catch (FileNotFoundException e) {
        System.out.println("FileNotFound");
    } catch (IOException e) {
        System.out.println("IOEXCeption");
    } finally {
        try {
            inStream.close();
        } catch (IOException e) {
            e.printStackTrace();
        }
    } 
```

如果您使用的是 Java 7，这会变得容易得多，因为[`try-with`](http://docs.oracle.com/javase/7/docs/technotes/guides/language/try-with-resources.html)引入了新的语法。然后你可以这样写：

```
try(FileInputStream inStream = new FileInputStream("filename.properties")){
       properties.load(inStream);
   } catch (FileNotFoundException e) {
        System.out.println("FileNotFound");
   } catch (IOException e) {
        System.out.println("IOEXCeption");
} 
```

并且流自动关闭。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-11T10:14:49.163

这是一个例子：

```
 public class PropertiesHelper {
    public static Properties loadFromFile(String file) throws IOException {
        Properties properties = new Properties();
        FileInputStream stream = new FileInputStream(file);
        try {
            properties.load(stream);
        } finally {
            stream.close();
        }
        return properties;
    }
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-11T10:24:29.413

您可以使用 Lombok @Cleanup 来简单地做到这一点。 [http://projectlombok.org/features/Cleanup.html](http://projectlombok.org/features/Cleanup.html)

```
 Properties properties = new Properties();
 try {
   @Cleanup FileInputStream myFis = new FileInputStream("filename.properties");
   properties.load(myFis);
 } catch (FileNotFoundException e) {
   System.out.println("FileNotFound");
 }catch (IOException e) {
   System.out.println("IOEXCeption");
 } 
```

或者，仅当您使用 Java 7 时，才有“使用资源尝试”新功能。 [http://docs.oracle.com/javase/tutorial/essential/exceptions/tryResourceClose.html](http://docs.oracle.com/javase/tutorial/essential/exceptions/tryResourceClose.html)

```
 Properties properties = new Properties();
 try (FileInputStream myFis = new FileInputStream("filename.properties")) {
   properties.load(myFis);
 } catch (FileNotFoundException e) {
   System.out.println("FileNotFound");
 }catch (IOException e) {
   System.out.println("IOEXCeption");
 } 
```

# java - Java 和 MySQL 插入

> ID：11430290
> 
> 赞同：0
> 
> 时间：2012-07-11T10:08:44.170
> 
> 标签：java, mysql

我已经为一家企业建立了一个程序来处理他们的小册子（西班牙语目录）。我通过 Swings 向用户询问数据，然后使用它生成查询并将其插入到我的数据库中。这是代码：

```
 Class.forName(driver);
                con = DriverManager.getConnection(url + db, user, pass);
                con.setAutoCommit(false);
                st = con.createStatement();

                String sql = "INSERT INTO `catalogos` (`id`, `name`, `keywords`) VALUES(" + catNumIn.getText() + ", '" + catNameIn.getText() + "', '" + catKeyIn.getText() +  "');";
                st.executeUpdate(sql); 
```

所以我想知道我的错误是什么。谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-11T10:15:24.923

你在提交你的交易吗？`setAutoCommit(false)`毕竟你说过。你能试试：

```
setAutoCommit(true); 
```

而不是您当前拥有的线路，或者：

```
con.commit(); 
```

你的数据库更新后？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-11T10:14:54.513

当你在前端构造sql语句并出现错误时，最好的方法是打印变量，看看单引号、缺少逗号等值是否有问题

# ios - 在 UITextfield 中使用逗号分隔自动建议

> ID：11430293
> 
> 赞同：1
> 
> 时间：2012-07-11T10:08:53.390
> 
> 标签：ios, nsstring, uitextfield

下面的代码让我自动建议输入到 UITextfield 中的值，方法是将其与先前添加的字符串对象数组进行比较，并将其显示在 UITableview 中。这很好用，但只适用于一个单词。

那么现在，我可以修改代码，在用户输入逗号后，然后再次开始输入，我可以再次在相同的字符串数组中搜索逗号后输入的字符的建议吗？

```
- (BOOL)textField:(UITextField *)textField shouldChangeCharactersInRange:(NSRange)range replacementString:(NSString *)string 
{

if (textField.tag == tagTextFieldTag)    //The text field where user types
{
    textField.autocorrectionType = UITextAutocorrectionTypeNo;
    autocompleteTableView.hidden = NO;   //The table which displays the autosuggest

        NSString *substring = [NSString stringWithString:textField.text];

        substring = [substring stringByReplacingCharactersInRange:range withString:string]; 

if ([substring isEqualToString:@""]) 
    {
        autocompleteTableView.hidden = YES; //hide the autosuggest table if textfield is empty
    }
        [self searchAutocompleteEntriesWithSubstring:substring];  //The method that compares the typed values with the pre-loaded string array

    }

return YES;
}

 - (void)searchAutocompleteEntriesWithSubstring:(NSString *)substring {

[autoCompleteTags removeAllObjects];

for(Tag *tag3 in tagListArray)   //tagListArray contains the array of strings

 //tag3 is an object of Tag class, which has a single attribute called 'text'

{
    NSString *currentString = tag3.text;
    NSRange substringRange = [currentString rangeOfString:substring];
    if(substringRange.location ==0)
    {
        [autoCompleteTags addObject:currentString];
    }
}

[autocompleteTableView reloadData];
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-11T12:49:51.010

你可以这样做，

```
- (BOOL)textField:(UITextField *)textField shouldChangeCharactersInRange:(NSRange)range replacementString:(NSString *)string 
{

  if (textField.tag == tagTextFieldTag)    //The text field where user types
  {
    textField.autocorrectionType = UITextAutocorrectionTypeNo;
    autocompleteTableView.hidden = NO;   //The table which displays the autosuggest
    NSArray *autoComplete = [textField.text componentsSeparatedByString:@","];
    NSString *substring = [NSString stringWithString:[autoComplete lastObject]];
   if ([substring isEqualToString:@""]) 
    {
        autocompleteTableView.hidden = YES; //hide the autosuggest table if textfield is empty
    }
        [self searchAutocompleteEntriesWithSubstring:substring];

    }

 return YES;
} 
```

这种方法的工作原理是，

*   `componentsSeparatedByString`用 分隔 textFields 文本**，**并将其作为`NSArray`
*   `lastObject`从该数组中获取最后一个对象。如果是@"" 则不搜索，否则搜索匹配元素。

希望这会帮助你。

# c# - C# 添加方法并检查是否添加了数字

> ID：11430301
> 
> 赞同：0
> 
> 时间：2012-07-11T10:09:07.230
> 
> 标签：c#, methods, int

有一个我正在玩的小程序。需要确保它检查是否数字，如果不是循环，直到它们是每个输入上的数字并创建一个主要方法和计算器方法有什么帮助吗？

代码在这里 /////////////////////////////////////// //////

```
 int num1;
        int num2;
        string operand;
        float answer;
        string text1;

        ////enter first number ////
        Console.Write("Please enter a number: ");
        text1 = Console.ReadLine();

        // if number not integer then fail ////
        bool res = int.TryParse(text1, out num1);
        if (!res)
        {
            Console.WriteLine(" FAIL");
            ////enter first number ////
            Console.Write("Please enter a number: ");
            text1 = Console.ReadLine();
        }
        else
        {

        }

        //// enter operand ////
        Console.Write("Please enter an operand (+, -, /, *): ");
        operand = Console.ReadLine();

        // enter second number //
        Console.Write("Please enter the second number: ");
        text1 = Console.ReadLine();

        // if number not integer then fail //
        bool eff = int.TryParse(text1, out num2);
        if (!eff)
            do
            {
                Console.WriteLine(" FAIL");
                // enter second number //
                Console.Write("Please enter the second number: ");
                text1 = Console.ReadLine();
            }
            while (eff == true);
        {

        }
        // converts number to integer ///

        // makes operand answers from each number ////
        switch (operand)
        {
            case "-":
                answer = num1 - num2;
                break;
            case "+":
                answer = num1 + num2;
                break;
            case "/":
                answer = num1 / num2;
                break;
            case "*":
                answer = num1 * num2;
                break;
            default:
                answer = 0;
                break;
        }

        /// converts numbers to string using operand and writes final line ///
        Console.WriteLine(num1.ToString() + " " + operand + " " + num2.ToString() + " =                   
        "+ answer.ToString());
        Console.ReadLine();
        }

        }

        }

        }

        /// converts numbers to string using operand and writes final line ///
        Console.WriteLine(num1.ToString() + " " + operand + " " + num2.ToString() + " = 
        " + answer.ToString());
        Console.ReadLine(); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-11T11:11:08.490

问题似乎与“eff”和“res”的处理有关。如果用户在第一次被询问时键入一个非整数值，那么他们第二次回答什么并不重要，因为 num1 和 num2 没有填充该值。修复它，代码似乎可以工作。

由于输入值似乎在做同样的事情，但提示略有不同，您应该将其移动到一个单独的函数中，如下所示：

```
 static int GetNumberFromUser(string order)
    {
        string userText = String.Empty;
        int result;

        Console.Write("Please enter {0} number: ", order);
        userText = Console.ReadLine();

        while (!int.TryParse(userText, out result))
        {
            Console.WriteLine("FAILED");
            Console.Write("Please enter {0} number: ", order);
            userText = Console.ReadLine();
        }
        return result;
    } 
```

然后你会打电话给它

```
 num1 = GetNumberFromUser("first");
    num2 = GetNumberFromUser("second"); 
```

此函数负责转换为数字并不断询问，直到用户键入有效值。

“计算器”方法将被复制并将您拥有的开关粘贴到单独的方法中：

```
 static float Calculator(int num1, string operand, int num2)
    {
        switch (operand)
        {
            case "-":
                return num1 - num2;
            case "+":
                return num1 + num2;
            case "/":
                return num1 / num2;
            case "*":
                return num1 * num2;
            default:
                return 0;
        }
    } 
```

调用使用

```
 answer = Calculator(num1, operand, num2); 
```

虽然我在做，但结果行很难阅读，我会选择这样的东西

```
 Console.WriteLine("{0} {1} {2} = {3}", num1, operand, num2, answer); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-11T11:10:41.787

如果这就是您所需要的并且您正在使用控制台应用程序，您可以使用：

```
 int num1;
        int num2;
        string operand = string.Empty;
        float answer;
        string text1;

        ////enter first number ////
        Console.Write("Please enter a number: ");
        text1 = Console.ReadLine();

        // if number not integer then fail ////
        bool res = int.TryParse(text1, out num1);
        while (!res)
        {
            Console.WriteLine(" FAIL");
            ////enter first number ////
            Console.Write("Please enter a number: ");
            text1 = Console.ReadLine();
            res = int.TryParse(text1, out num1);
        }

        //// enter operand ////
        while (operand == string.Empty || operand.Length > 1 || !(new char[] { '+', '-', '*', '/' }).Contains(char.Parse(operand)))
        {
            Console.Write("Please enter an operand (+, -, /, *): ");
            operand = Console.ReadLine();
        }

        // enter second number //
        Console.Write("Please enter the second number: ");
        text1 = Console.ReadLine();

        // if number not integer then fail //
        bool eff = int.TryParse(text1, out num2);
        while (!eff)
        {
            Console.WriteLine(" FAIL");
            // enter second number //
            Console.Write("Please enter the second number: ");
            text1 = Console.ReadLine();
            eff = int.TryParse(text1, out num2);

        }
        // converts number to integer ///

        // makes operand answers from each number ////
        switch (operand)
        {
            case "-":
                answer = num1 - num2;
                break;
            case "+":
                answer = num1 + num2;
                break;
            case "/":
                if (num2 == 0)
                {
                    Console.WriteLine("Divide By Zero Error");
                    return;
                }
                answer = num1 / num2;
                break;
            case "*":
                answer = num1 * num2;
                break;
            default:
                answer = 0;
                break;
        }

        /// converts numbers to string using operand and writes final line ///
        Console.WriteLine(num1.ToString() + " " + operand + " " + num2.ToString() + " =  "+ answer.ToString());
        Console.ReadLine(); 
```

为什么你需要为这么简单的事情创建一个单独的方法。我发现这个问题太简单了，所以只问这是否是必需的？你本可以再努力一点，然后自己写这个。这没有什么微不足道的。我只是假设您是编程新手。

# sql-server-2008 - 使 in 子句匹配所有项目或任何替代项？

> ID：11430310
> 
> 赞同：3
> 
> 时间：2012-07-11T10:09:32.693
> 
> 标签：sql-server-2008, join, in-clause

我有一张桌子`hotel [hotelid,hotelname,etc]`

和另一张桌子`facilities[facilityid,facilityname]`

这两个表是通过表链接的`hotel_to_facilities_map[hotelid,facility_id]`

因此该表`hotel_to_facilities_map`可能包含以下值

```
hotelid facility_id
-------------------
1         3
1         5
1         6
2         6
2         2
2         5 
```

现在我想检索所有符合所有设施要求的酒店

```
select * from hotel_to_facilities_map where facility_id IN (3,5,2) 
```

但这会`OR`在我需要时导致匹配为表达式`AND`。

有什么解决方法或解决方案吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-11T10:19:42.630

```
select hotelid
from hotel_to_facilities_map
where facility_id in (3,5,2)
group by hotelid
having count(*) = 3 
```

# javascript - 在javascript中组合2个数组

> ID：11430312
> 
> 赞同：1
> 
> 时间：2012-07-11T10:09:37.370
> 
> 标签：javascript, jquery

我在 javascript 中有 2 个数组。

```
 var A = ['c++', 'java', 'c', 'c#', ...];
            var B = [12, 3, 4, 25, ...]; 
```

现在从这两个数组中，我想创建另一个数组，例如：

```
 [['c++',12], ['java',3], ['c',4], ['c#', 25] ...]; 
```

`A`和数组在我的情况下都是`B`可变长度的，所以我该怎么做？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-11T10:11:35.950

[Underscore.js](http://underscorejs.org/#zip)擅长于此：

> `_.zip(*arrays)`
> 
> 将每个数组的值与相应位置的值合并在一起。当您有通过匹配数组索引进行协调的单独数据源时很有用。如果您正在使用嵌套数组的矩阵，则 zip.apply 可以以类似的方式转置矩阵。
> 
> ```
> _.zip(['moe', 'larry', 'curly'], [30, 40, 50], [true, false, false]);
> => [["moe", 30, true], ["larry", 40, false], ["curly", 50, false]] 
> ```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-11T10:13:43.497

如果您不使用任何第三方库，则可以使用此代码段：

```
var i = 0
  , n = A.length
  , C = [];

for (; i < n; i++) {
    C.push([A[i], B[i]]);
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-11T10:15:02.497

```
function Merge(A,B){
    var length = Math.min(A.length,B.length);
    var result = [];
    for(var i=0;i<length;i++){
     result.push([ A[i], B[i] ]) 
    }

    return result;
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-11T10:18:16.263

我认为使用 hashMap 而不是 2 个数组可能是一个很好的解决方案。

例如，您可以执行以下操作：

```
var h = new Object(); // or just {}
h['c++'] = 12;
h['java'] = 3;
h['c'] = 4; 
```

看一眼：

[http://www.mojavelinux.com/articles/javascript_hashes.html](http://www.mojavelinux.com/articles/javascript_hashes.html)

# python - QTreeWidget 中的 Python 父级

> ID：11430331
> 
> 赞同：0
> 
> 时间：2012-07-11T10:10:36.077
> 
> 标签：python, pyqt4, addchild, qtreewidget

我正在研究 python 插件。我使用 QTreeWidget 列出项目。[在 qtreewidget 中列出][1] 这个链接对我帮助很大。

我的代码是：

```
valestimate=QTreeWidgetItem(str(parent_name))
for row in c.fetchall():
         strval=QTreeWidgetItem(unicode(row[0])) 
         valestimate.addChild(strval)
         self.treeWidget.addTopLevelItem((valestimate)) 
```

**parent_name**是**QTreeWidget**中我父母的名字。EX：**'ACO_233'** 但输出是：

![在此处输入图像描述][2]

如果我将 columncount 设置为大于 1，则显示为：

![在此处输入图像描述][3]

如何在 Qtreewidget 中将完整字符串列为父级？按照此链接 [qtreewidget 中的单个字符] [4] ..inserttoplevelitem 将列表作为参数..但是如果我想将任何项目作为父项，我们无法将列表添加到 qtreewidget 类型的项目。我该怎么做？？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-11T10:40:23.407

检查[文档](http://www.riverbankcomputing.co.uk/static/Docs/PyQt4/html/qtreewidgetitem.html#QTreeWidgetItem-2)：

```
 QTreeWidgetItem.__init__ (self, QStringList strings, int type = TreeWidgetItem.Type) 
```

> 构造指定类型的树小部件项。该项目必须插入到树小部件中。给定的字符串列表将被设置为项目中每一列的项目文本。

`QTreeWidgetItem`需要一个字符串*列表*来填充列。当您这样做时`QTreeWidgetItem(str(parent_name))`，它将字符串解释为字符`parent_name`列表（这就是字符串）并将每个字符放在一列中。相反，您应该这样做：

```
valestimate = QTreeWidgetItem([parent_name]) 
```

这将为您提供一个列项，其中`parent_name`包含该列中的值。

（顺便说一句，`str()`or`unicode()`不是转换事物的好方法。您应该使用`.encode`转换`unicode`为`str`或`.decode`反之亦然。）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-11T10:50:17.600

我得到了答案。

```
 valestimate=QTreeWidgetItem()
        valestimate.setText(0,str(parent_name)) 
```

我们可以使用 settext 属性，而不是直接将父名称转换为 qtreewidget 类型。

# php - 尝试遍历节点时PHP SimpleXML中断

> ID：11430335
> 
> 赞同：0
> 
> 时间：2012-07-11T10:10:49.890
> 
> 标签：php, xml, simplexml

我正在尝试阅读 tumblr 提供的 xml 信息，以从 tumblr 创建一种新闻提要，但我非常卡住。

```
<?php
    $request_url = 'http://candybrie.tumblr.com/api/read?type=post&start=0&num=5&type=text';
    $xml = simplexml_load_file($request_url);

    if (!$xml) 
    {
        exit('Failed to retrieve data.');
    }
    else 
    {
        foreach ($xml->posts[0] AS $post) 
        {
            $title = $post->{'regular-title'};
            $post = $post->{'regular-body'};
            $small_post = substr($post,0,320);

            echo .$title.;
            echo '<p>'.$small_post.'</p>';
        }
    }
?> 
```

一旦它试图通过节点，它总是会中断。所以基本上“tumblr->posts;....ect”显示在我的 html 页面上。

我尝试将信息保存为本地 xml 文件。我尝试使用不同的方法来创建 simplexml 对象，例如将其加载为字符串（可能是一个愚蠢的想法）。我仔细检查了我的虚拟主机正在运行 PHP5。所以基本上，我坚持为什么这不起作用。

编辑：好的，我尝试从开始的位置更改（回到原来的方式，从 tumblr 开始只是尝试修复它的另一种（实际上很愚蠢）方式。它仍然在第一个 -> 之后立即中断，因此显示“帖子[0] AS $post....ect”在屏幕上。

这是我在 PHP 中做过的第一件事，所以可能有一些我应该事先设置的明显的东西。我不知道也找不到类似的东西。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-11T12:22:14.530

```
First thing in you code is that you used root element that should not be used.

    <?php
        $request_url = 'http://candybrie.tumblr.com/api/read?type=post&start=0&num=5&type=text';
        $xml = simplexml_load_file($request_url);

        if (!$xml) 
        {
            exit('Failed to retrieve data.');
        }
        else 
        {

           foreach ($xml->posts->post as $post) 
            {
                $title = $post->{'regular-title'};
                $post = $post->{'regular-body'};
                $small_post = substr($post,0,320);
                echo .$title.;
                echo '<p>'.$small_post.'</p>';
            }
        }
    ?> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-11T12:12:39.183

`$xml->posts`返回您的*帖子*节点，因此如果您想迭代您应该尝试的*帖子*`$xml->posts->post`节点，这使您能够遍历第一个*帖子*节点内的*帖子*节点。

此外，正如 Needhi 指出的那样，您不应该通过根节点（*tumblr*），因为`$xml`它本身就是根节点。（所以我修正了我的答案）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-11T11:19:10.723

这应该工作：

```
<?php
$request_url = 'http://candybrie.tumblr.com/api/read?type=post&start=0&num=5&type=text';
$xml = simplexml_load_file($request_url);

if ( !$xml ){
    exit('Failed to retrieve data.');
}else{
    foreach ( $xml->posts[0] AS $post){
        $title = $post->{'regular-title'};
        $post  = $post->{'regular-body'};
        $small_post = substr($post,0,320);

        echo $title;
        echo '<p>'.$small_post.'</p>';
        echo '<hr>';
    }
} 
```

# fft - FFT 的频率显示它不应该显示的值

> ID：11430340
> 
> 赞同：1
> 
> 时间：2012-07-11T10:11:00.757
> 
> 标签：fft

我正在开发一个软件来输入一个单调的 .wav 剪辑（钢琴）并显示在该剪辑中播放的钢琴音符。我正在使用 FFT 来计算频率，但它们给了我一些值，比如`22360 Hz`我想要绕过的地方`260 to 600 Hz`。

有人可以帮我吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-11T16:44:36.003

钢琴会发出许多强大的高次谐波或泛音，因此 FFT**应该**在许多高频区间中显示幅度。也许您应该使用音高检测或估计算法而不仅仅是 FFT？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-28T21:38:08.823

Hotpaw2 对泛音内容提出了重要的一点。

但是，您需要的另一件事是窗口函数，以防止采样间隔的频域伪影污染您的结果。在 FFT 之前应用于数据的窗口函数基本上可以平滑地淡入和淡出信号以避免这种情况。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-11T15:16:15.253

我认为你的问题是你没有足够的样本，所以频率分辨率很差。您需要做的就是拥有更多样本或仅填充零。见[这里](https://dsp.stackexchange.com/questions/2818/extracting-frequencies-from-fft)和[这里](https://dsp.stackexchange.com/questions/741/why-should-i-zero-pad-a-signal-before-taking-the-fourier-transform)。这可能会有所帮助。

# php - 在 PNG 中运行 PHP

> ID：11430342
> 
> 赞同：0
> 
> 时间：2012-07-11T10:11:06.250
> 
> 标签：php, image, header, png, gd

我只是想知道..
我已经看到一些图片可以在这样的 url 中有“参数”：

```
http://example.com/images/picture.png?width=120 
```

但是当我用谷歌搜索它时，我得到的结果是这样的：

```
http://example.com/images/picture.php?width=120
(with header("Content-type: image/png") and so on) 
```

（如何）我可以让一段 php 代码在“图片”中运行吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-11T10:14:13.230

事实上，*没有人*关心文件扩展名，它通常只是桌面应用程序的一个提示，只有当你双击它时如何处理文件。但是，在 URL 后面是任何语言的普通脚本，它`Content-Type: image/png`以二进制形式返回标头和图像。

例如在 PHP

```
// do something
header('Content-Type: image/png');
readfile('/local/path/to/a/prepared/image.png'); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-11T10:12:58.527

你不能。但是，您可以将您的网络服务器配置为在有人请求 url A（可能是任何东西，包括看起来像指向图片的东西）时检索 url B（这是一个 PHP 脚本）。事实上，这就是这里的关键点：URL 仅表示负责满足请求的实体希望它们表示的意思。

有关于如何为所有流行的 Web 服务器（例如[Apache](http://httpd.apache.org/docs/2.4/rewrite/)）进行 url 重写的官方文档。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-11T10:14:16.027

看看这个：[http](http://www.les-stooges.org/pascal/webdesign/vignettes/index.php?la=en)
://www.les-stooges.org/pascal/webdesign/vignettes/index.php?la=en 这正是你问的;）

添加：

```
<img src='vignette.php?f=example1.jpg'> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-11T10:14:28.253

正如其他人所提到的，url 重写负责将 url a 转换为 url b 允许用户使用 .png .jpg .whatever 并将其转换为 .php

php 文件本身输出原始图像数据并设置其标题，以便浏览器知道如何处理返回的数据。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-11T10:14:34.530

您需要做的就是让*Web 服务器*执行一个脚本来响应这个 URL。

URL 不是文件，URL 只是一个*请求*，Web 服务器可以对它执行任何操作并返回*响应*。您可以配置您的 Web 服务器以将任何以 .png 结尾的文件作为 PHP 文件执行，或者您可以使用 URL 重写规则告诉服务器 URL 应该由常规 .php 文件处理，而不是在某个目录中提供文件.

Web 服务器是一个黑盒子。他们接受来自客户端的*请求*，并以一些数据作为回报。中间发生的任何事情完全取决于服务器，仅仅因为请求包含字符串“.png”并不意味着服务器*必须*直接从硬盘提供 PNG 图像。

```
 +-------------------+
---- request ---->  |     Web Server    |
                    |  Here be dragons! |
<--- response ----  |  Or PHP scripts.  |
                    +-------------------+ 
```

# macos - 在osx的沙盒中制作文件夹

> ID：11430346
> 
> 赞同：1
> 
> 时间：2012-07-11T10:11:11.587
> 
> 标签：macos, cocoa, sandbox

使用以下代码获取文件路径：

```
NSString *executableName = [[[NSBundle mainBundle] infoDictionary] objectForKey:@"CFBundleExecutable"];
NSArray *paths = NSSearchPathForDirectoriesInDomains(NSApplicationSupportDirectory, NSUserDomainMask, YES);
NSString *path = [paths objectAtIndex:0];
path = [path stringByAppendingPathComponent:executableName]; 
```

然后我想将数据保存到文件（settings.bundle）

```
NSString *filePath = [path stringByAppendingPathComponent:@"settings.bundle"];
[someString writeToFile:settingsPath atomically:YES encoding:NSUTF8StringEncoding error:&error]; 
```

错误：

```
Error Domain=NSCocoaErrorDomain Code=4 "The folder “settings.bundle” doesn’t exist." UserInfo=0x7ff8894cecc0 {NSFilePath=/Users/xxxx/Library/Application Support/AppName/settings.bundle, NSUserStringVariant=Folder, NSUnderlyingError=0x7ff8894a1750 "The operation couldn’t be completed. No such file or directory"} 
```

但如果我 mkdir AppName 手册没有错误：

```
 mkdir /Users/xxxx/Library/Application Support/AppName 
```

所以我的问题是：Cocoa 不能在 osx 中自动创建文件夹？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-12T05:47:24.213

试一试：`[[NSFileManager defaultManager] createDirectoryAtPath:filePath withIntermediateDirectories:YES attributes:nil error:&error];`

该方法不仅会创建指定路径的目录，还会创建任何可能不存在的中间目录。

# jquery - 使用包含查找文本

> ID：11430349
> 
> 赞同：1
> 
> 时间：2012-07-11T10:11:18.493
> 
> 标签：jquery, jquery-selectors

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-11T10:24:36.900

Use this:

```
$(".price:contains(\xA34.99)").html("From \xA34.99") 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-11T10:15:22.417

Even `text` would do your job

```
$('.price:contains("£4.99")').text('From: £4.99'); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-11T10:27:53.097

Before adding the word `From`, try this:

```
alert($('.price:contains("£4.99")').html()); 
```

What does it print? If the alert does prints nothing, it means the selector isn't working for some reason.

# c# - 在 c# asp.net 和不明确的列名中使用来自外部 SQL 过程的变量

> ID：11430351
> 
> 赞同：1
> 
> 时间：2012-07-11T10:11:28.713
> 
> 标签：c#, sql, stored-procedures, declare

我在 sql 编码方面很新，我无法在互联网上找到解决方案，这是我的代码：

```
CREATE PROCEDURE GET_SAMEDATE (@FileName VARCHAR(50))
AS
    /* SET NOCOUNT ON */
    SELECT Hash
    FROM   Beamer.PackageDetailFile A(NOLOCK)
           INNER JOIN(SELECT FileName,
                             MAX(Date) MaxDate
                      FROM   Beamer.PackageDetailFile(NOLOCK)
                      GROUP  BY FileName)B
             ON B.FileName = A.FileName
                AND A.Date = B.MaxDate
    WHERE  FileName = @FileName 
```

我想要做的是将文件名与我从 ac# 类获得的文件名进行比较

而且我也得到“不明确的列名'FileName'”

***模棱两可的列名已解决，但我仍然无法从其他类获取 FileName 来比较它们是否具有相同的文件名

c#代码

```
SqlConnection myConnection = new SqlConnection(myConnectionString);

 SqlCommand myCommand = new SqlCommand("dbo.GET_SAMEDATE", myConnection );
 myCommand.CommandType = CommandType.StoredProcedure;
 try
 {
    myConnection.Open();
    SqlDataReader sdr = myCommand.ExecuteReader();

    while (sdr.Read())       
    {                   
        string h = (string)sdr.GetString(0);                     

        if (hash != h)
        {
           exists = true;
        }

       sdr.Read();
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-11T10:31:44.193

您需要在`WHERE`子句中指定表前缀。`GROUP BY`无论如何，您不需要在子查询上加入。它可以做得更简单。

```
CREATE PROCEDURE GET_SAMEDATE (@FileName VARCHAR(50))
AS
    SET NOCOUNT ON;

    SELECT TOP 1 WITH TIES Hash
    FROM   Beamer.PackageDetailFile
    WHERE  FileName = @FileName
    ORDER  BY Date DESC 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-11T10:32:07.097

在您的`WHERE`子句中，您应该指定`FileName`来自 A 或 B 的表：

```
WHERE  FileName = @FileName 
```

所以要么：

```
WHERE  A.FileName = @FileName 
```

或者

```
WHERE  B.FileName = @FileName 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-11T14:25:17.593

您需要在执行存储过程之前指定参数值。

```
myCommand.Parameters.AddWithValue("@FileName", hash) 
```

您还可以按照 Martin Smith 在他的回答中建议的那样简化您的存储过程。

您尚未包含所有代码，但请确保您处置了 sqlConnection、sqlDataReader 和 sqlCommand 对象。您可以使用“Using”语句来完成此操作。

# asp.net - JSF 中 ASP.Net 母版页的替代

> ID：11430354
> 
> 赞同：1
> 
> 时间：2012-07-11T10:11:38.727
> 
> 标签：asp.net, jsp, jakarta-ee, jsf-2, facelets

我一直在寻找 JSF 中母版页的替代品。我想将在 ASP.Net 中开发的 Web 应用程序转换为 JSF。现在当我与该应用程序的母版页发生冲突时，我认为它可以由 facelets 处理但仍然我不知道这是正确的方法吗？
事情是这样的，我发现 facelets 是 ASP.net 用户控件的替代品，所以我可以将它们用于母版页吗？
即使这件事让我觉得我出错了
谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-13T03:19:04.693

确实是Facelets。您唯一的其他选择是 JSP，但它不提供任何模板功能，如 ASP.NET MasterPages 和 Facelets。更重要的是，自 JSF 2.0 起，JSP 已被弃用。

### 也可以看看：

*   [Java EE 6 教程 - Facelets](http://docs.oracle.com/javaee/6/tutorial/doc/giepx.html)
*   [Facelets 1.x 开发者指南](http://facelets.java.net/nonav/docs/dev/docbook.html)（Facelets 2.x 跳过章节 1.1-1.4）
*   [如何使用 JSF 2.0 Facelets 在 XHTML 中包含另一个 XHTML？](https://stackoverflow.com/questions/4792862/how-to-include-another-xhtml-in-xhtml-using-jsf-2-0-facelets)
*   [何时使用 <ui:include>、标记文件、复合组件和/或自定义组件？](https://stackoverflow.com/questions/6822000/when-to-use-uiinclude-tag-files-composite-components-and-or-custom-componen)

# c# - 从返回的 JSON 对象中过滤掉字符

> ID：11430355
> 
> 赞同：0
> 
> 时间：2012-07-11T10:11:41.287
> 
> 标签：c#, regex, json, windows-phone-7, json.net

我正忙于为 Windows Phone 7 开发一个应用程序。该应用程序基本上调用一个 Web 服务，然后返回 JSON 内容。我使用[Json.NET 库](http://james.newtonking.com/projects/json-net.aspx)来获取该 JSON 对象，然后将其转换为 C# 对象。例如，如果 JSON 内容如下所示：

```
 {
           "FirstName" : "",
           "LastName" : "",
           "Gender" : ""
      } 
```

将创建一个如下所示的类：

```
class person{
   public string FirstName {get;set;}
   public string LastName {get;set;}
   public string Gender {get;set;}
} 
```

如您所见，生成的类中的变量与 JSON 内容中的变量名称完全匹配。例如，名字 → 名字。

但是现在我已经到了这样一个阶段，返回的 JSON 内容有一个名为“ **ID#** ”的变量，如果你是一个思维敏捷的人，你会看到一个 C# 变量将被生成，它将是命名为“ID#”，但显然在 C# 中您不能在变量名中使用井号。

我怎样才能克服这个障碍？我正在考虑过滤掉`#`返回的 JSON 内容中的符号，但我究竟该如何去做，这甚至是正确的做法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-11T10:14:48.543

使用`DateMember`命名空间的属性，`System.Runtime.Serialization`您的值`"ID#"`将转换为`ID`，它也支持`Newtonsoft`

```
[DateMember(Name = "ID#")]  
public string ID { get; set; } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-11T10:20:01.670

试着写：

```
class person{
   [JsonProperty("ID#")]
   public string ID { get; set;}
   public string FirstName {get;set;}
   public string LastName {get;set;}
   public string Gender {get;set;}
} 
```

# jwplayer - Jwplayer 插件 gapro-2 在关闭/刷新窗口时在 IE-7/8 中引发 Object Expected 问题

> ID：11430357
> 
> 赞同：2
> 
> 时间：2012-07-11T10:11:46.177
> 
> 标签：jwplayer

下一行的 Gapro2 问题。

函数 g(){try{window.attachEvent("onbeforeunload",function(u){i()})}catch(t){}

当触发上述事件时，它会在以下代码片段的最后一行给出问题

//jwplayer.js

```
if(typeof jwplayer=="undefined"){var jwplayer=function(a){if(jwplayer.api){return        jwplayer.api.selectPlayer(a)}};var $jw=jwplayer;jwplayer.version="5.10.2295";jwplayer.vid=document.createElement("video");jwplayer.audio=document.createElement("audio");jwplayer.source=document.createElement("source");(function(b){b.utils=function(){};b.utils.typeOf=function(d){var c=typeof d;if(c==="object"){if(d){if(d instanceof Array){c="array"}}else{c="null"}}return c};b.utils.extend=function(){var c=b.utils.extend["arguments"];if(c.length>1){for(var e=1;e<c.length;e++){for(var d in c[e]){c[0][d]=c[e][d] 
```

当我在 IE-8 或 ie-7 中按刷新/关闭时会发生这种情况。

如果我先播放视频然后按刷新，则不会发生这种情况。

确切错误：“预期对象”

堆栈跟踪：

JScript 匿名函数

> m //gapro

我//加普罗

JScript 匿名函数

m 方法调用 n.currentItem.. 如果未单击视频播放按钮，则它始终为 null。

它的任何解决方法？

谢谢

# java - 如何从日期选择器中获取毫秒？

> ID：11430358
> 
> 赞同：3
> 
> 时间：2012-07-11T10:11:47.047
> 
> 标签：java, android

在我的项目中，我在 sqllite 数据库中保存毫秒，默认情况下我正在保存

```
System.currentTimeMillis() 
```

在数据库中，但有一个选项供用户从日期选择器中选择上一个日期？但是，当用户从日期选择器中选择前几天或未来几天时，我会保存什么？我怎样才能以长（毫秒）格式获得这一天？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-07-11T10:15:46.680

创建一个`Calender`实例并设置您想要的日期。然后调用`calendar.getTimeInMillis();`。[有关更多信息，请参阅上一个 SO 问题](https://stackoverflow.com/questions/4431172/can-i-get-miliseconds-date-value-from-a-datepicker-the-miliseconds-since-1970)的答案。

**编辑**要设置日历日期，您可以使用以下内容：

```
//Lets suppose you have a DatePicker instance called datePicker
Calendar cal = Calendar.getInstance();
cal.set(Calendar.DAY_OF_MONTH, datePicker.getDayOfMonth());
cal.set(Calendar.MONTH, datePicker.getMonth());
cal.set(Calendar.YEAR, datePicker.getYear()); 
```

有关详细信息，请参阅[日历](http://developer.android.com/reference/java/util/Calendar.html)类。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-08-04T17:16:26.330

当我遇到这个答案时，我正在为 javase 场景寻找类似的解决方案。**我对安吉洛的回答**做了一些修改，以使我自己的案例工作，它给了我我想要的东西。为了让事情变得更有趣，我创建了一个可以重用的方法。

```
class Controller {

    public static Calendar cal = Calendar.getInstance();

    public static long getEpoch_fromDatePicker( DatePicker datePicker ) {

        Controller.cal.set(Calendar.DAY_OF_MONTH, datePicker.getValue().getDayOfMonth() );
        Controller.cal.set(Calendar.MONTH, datePicker.getValue().getMonthValue() );
        Controller.cal.set(Calendar.YEAR, datePicker.getValue().getYear() );

        return Controller.cal.getTimeInMillis() /1000;
    }
} 
```

有人可能会觉得这很有用

# vim - 使用 VIM 在新选项卡中打开多个文件

> ID：11430361
> 
> 赞同：29
> 
> 时间：2012-07-11T10:11:53.083
> 
> 标签：vim

如何使用 VIM 在每个文件的新选项卡中使用通配符打开多个文件？

类似于[如何在 Vim 中一次打开多个文件？](https://stackoverflow.com/questions/2023191/how-can-i-open-several-files-at-once-in-vim)但在新标签而不是缓冲区中。

* * *

## 回答 #1

> 赞同：35
> 
> 时间：2012-07-11T10:16:01.430

使用`-p`标志：

```
vim -p *.c 
```

以上将打开所有匹配的文件`*.c`。

您也可以为此创建一个别名（我有`alias vip='vim -p'`并且我只`vip *.c`为上面的示例键入）

* * *

## 回答 #2

> 赞同：25
> 
> 时间：2012-07-11T10:25:20.633

如果您在 Vim 中，此命令将在其自己的选项卡中打开当前目录中的每个 html 文件并恢复语法支持（由 禁用`:argdo`）：

```
:args *.html | argdo tabe | tabdo syntax on 
```

如果您在外壳中，请寻求其他答案。

* * *

## 回答 #3

> 赞同：16
> 
> 时间：2014-01-13T11:50:21.490

如果您只想打开 .md。

```
vim -p *.md 
```

或者打开vim后，`:args`用来指定md文件。

```
:args *.md
:tab all 
```

* * *

## 回答 #4

> 赞同：8
> 
> 时间：2012-07-11T10:15:52.343

使用以下`p`选项：`vim -p file1.cc file2.cc file3.cc`

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2020-02-21T18:30:24.133

要在新选项卡中打开文件而不替换已打开的参数或选项卡：

```
:argadd *.c | tab all 
```

此外，要搜索子目录中的文件：

```
:argadd code/**/*.c | tab all 
```

# mysql - 从大型 mysql 数据库中的另一个表更新列（700 万行）

> ID：11430362
> 
> 赞同：3
> 
> 时间：2012-07-11T10:11:54.157
> 
> 标签：mysql, large-data-volumes

## 描述

我有 2 个具有以下结构的表（删除了不相关的列）：

```
mysql> explain parts;
+-------------+--------------+------+-----+---------+-------+
| Field       | Type         | Null | Key | Default | Extra |
+-------------+--------------+------+-----+---------+-------+
| code        | varchar(32)  | NO   | PRI | NULL    |       |
| slug        | varchar(255) | YES  |     | NULL    |       |
| title       | varchar(64)  | YES  |     | NULL    |       |
+-------------+--------------+------+-----+---------+-------+
4 rows in set (0.00 sec) 
```

和

```
mysql> explain details;
+-------------------+--------------+------+-----+---------+-------+
| Field             | Type         | Null | Key | Default | Extra |
+-------------------+--------------+------+-----+---------+-------+
| sku               | varchar(32)  | NO   | PRI | NULL    |       |
| description       | varchar(700) | YES  |     | NULL    |       |
| part_code         | varchar(32)  | NO   | PRI |         |       |
+-------------------+--------------+------+-----+---------+-------+
3 rows in set (0.00 sec) 
```

表`parts`包含 184147 行，`details`包含 7278870 行。来自的`part_code`列`details`表示表中的`code`列`parts`。由于这些列是`varchar`，我想将列添加`id int(11)`到`parts`和。我试过这个：`part_id int(11)``details`

```
mysql> alter table parts drop primary key;
Query OK, 184147 rows affected (0.66 sec)
Records: 184147  Duplicates: 0  Warnings: 0

mysql> alter table parts add column
       id int(11) not null auto_increment primary key first;
Query OK, 184147 rows affected (0.55 sec)
Records: 184147  Duplicates: 0  Warnings: 0

mysql> select id, code from parts limit 5;
+----+-------------------------+
| id | code                    |
+----+-------------------------+
|  1 | Yhk0KqSMeLcfH1KEfykihQ2 |
|  2 | IMl4iweZdmrBGvSUCtMCJA2 |
|  3 | rAKZUDj1WOnbkX_8S8mNbw2 |
|  4 | rV09rJ3X33-MPiNRcPTAwA2 |
|  5 | LPyIa_M_TOZ8655u1Ls5mA2 |
+----+-------------------------+
5 rows in set (0.00 sec) 
```

所以现在我在表中有正确数据的 id 列`parts`。将`part_id`列添加到`details`表后：

```
mysql> alter table details add column part_id int(11) not null after part_code;
Query OK, 7278870 rows affected (1 min 17.74 sec)
Records: 7278870  Duplicates: 0  Warnings: 0 
```

现在最大的问题是如何`part_id`相应地更新？以下查询：

```
mysql> update details d
       join parts p on d.part_code = p.code
       set d.part_id = p.id; 
```

运行了大约 30 个小时，直到我杀死它。

请注意，这两个表都是 MyISAM：

```
mysql> select engine from information_schema.tables where table_schema = 'db_name' and (table_name = 'parts' or table_name = 'details');
+--------+
| ENGINE |
+--------+
| MyISAM |
| MyISAM |
+--------+
2 rows in set (0.01 sec) 
```

我刚刚意识到问题之一是删除表上的键我删除了列`parts`上的索引。`code`另一方面，我在`details`表上有以下索引（省略了一些不相关的列）：

```
mysql> show indexes from details;
+---------+------------+----------+--------------+-------------+-----------+-------------+------------+
| Table   | Non_unique | Key_name | Seq_in_index | Column_name | Collation | Cardinality | Index_type |
+---------+------------+----------+--------------+-------------+-----------+-------------+------------+
| details |          0 | PRIMARY  |            1 | sku         | A         |        NULL | BTREE      |
| details |          0 | PRIMARY  |            3 | part_code   | A         |     7278870 | BTREE      |
+---------+------------+----------+--------------+-------------+-----------+-------------+------------+
2 rows in set (0.00 sec) 
```

## 我的问题是：

1.  更新查询是否正常或者可以以某种方式进行优化？
2.  `code`我将在表中的列上添加索引`parts`，查询会在合理的时间内运行，还是会再次运行几天？
3.  如何制作 (sql/bash/php) 脚本以便查看查询执行的进度？

非常感谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-13T00:41:44.827

正如我在问题中提到的，我忘记了`parts`表中删除的索引，所以我添加了它们：

```
alter table parts add key code (code); 
```

受 Puggan Se 的回答启发，我尝试在 PHP 脚本中使用 a `LIMIT`on ，但不能在 MySQL 中与with 一起使用。为了限制查询，我在表中添加了一个新列：`UPDATE``LIMIT``UPDATE``JOIN``details`

```
# drop the primary key,
alter table details drop primary key;
# so I can create an auto_increment column
alter table details add id int not null auto_increment primary key;
# alter the id column and remove the auto_increment
alter table details change id id int not null;
# drop again the primary key
alter table details drop primary key;
# add new indexes
alter table details add primary key ( id, sku, num, part_code ); 
```

现在我可以使用“限制”：

```
update details d
join parts p on d.part_code = p.code
set d.part_id = p.id
where d.id between 1 and 5000; 
```

所以这里是完整的 PHP 脚本：

```
$started = time();
$i = 0;
$total = 7278870;

echo "Started at " . date('H:i:s', $started) . PHP_EOL;

function timef($s){
    $h = round($s / 3600);
    $h = str_pad($h, 2, '0', STR_PAD_LEFT);
    $s = $s % 3600;
    $m = round( $s / 60);
    $m = str_pad($m, 2, '0', STR_PAD_LEFT);
    $s = $s % 60;
    $s = str_pad($s, 2, '0', STR_PAD_LEFT);
    return "$h:$m:$s";
}

while (1){
    $i++;
    $j = $i * 5000;
    $k = $j + 4999;
    $result = mysql_query("
        update details d
        join parts p on d.part_code = p.code
        set d.part_id = p.id
        where d.id between $j and $k
    ");
    if(!$result) die(mysql_error());
    if(mysql_affected_rows() == 0) die(PHP_EOL . 'Done!');
    $p = round(($i * 5000) / $total, 4) * 100;
    $s = time() - $started;
    $ela = timef($s);
    $eta = timef( (( $s / $p ) * 100) - $s );
    $eq = floor($p/10);
    $show_gt = ($p == 100);
    $spaces = $show_gt ? 9 - $eq : 10 - $eq;
    echo "\r {$p}% | [" . str_repeat('=', $eq) . ( $show_gt ? '' : '>' ) . str_repeat(' ', $spaces) . "] | Elapsed: ${ela} | ETA: ${eta}";
} 
```

这是一个屏幕截图：

![工作脚本截图](../Images/bc5749edda3e264c0e36106e6ab83ba4.png)

如您所见，整个过程不到 5 分钟 :) 谢谢大家！

PS：还有一个错误，因为我后来发现剩下 4999 行`part_id = 0`，但我已经手动完成了。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-11T10:24:16.000

1.  您可能想要添加位置和限制，以便您可以分块更新它

    ```
    update details d
    join parts p on d.part_code = p.code
    set d.part_id = p.id
    WHERE d.part_id =0
    LIMIT 5000; 
    ```

2.  whit index会快很多，如果你在上面的'1'中做一个查询，你可以确定5000行需要多长时间来处理

3.  循环上面的查询

    ```
    while(TRUE)
    {
        $result = mysql_query($query);
        if(!$result) die('Failed: ' . mysql_error());
        if(mysql_affected_rows() == 0) die('Done');
        echo '.';
    } 
    ```

**编辑 1** 重写查询做以限制连接错误

您可以使用子查询来避免多个表更新：

```
UPDATE details
SET part_id = (SELECT id FROM parts WHERE parts.code = details.part_code)
WHERE part_id = 0
LIMIT 5000; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-11T14:55:47.633

您可以尝试从您要更新的表中删除索引。MySQL 在每行更新时重新创建索引。对于 700 万条记录，它不会很快。

# c# - 使用 C# 获取注册表值

> ID：11430365
> 
> 赞同：0
> 
> 时间：2012-07-11T10:11:57.847
> 
> 标签：c#, registry

我想使用 C# 读取注册表中的值，如果值不在我创建的注册表中。我有一个阅读问题：

```
 RegistryKey regKey1 = Registry.CurrentUser;
 regKey1 = regKey1.CreateSubKey(@"SOFTWARE\PNMDISPATCHER");

 if (regKey1 != null)
 {
  textBoxTaux1.Text = regKey1.GetValue("Taux1").ToString();
 } 
```

我有`NullReferenceException`执行该`GetValue`功能的时间。我的值在注册表中，为什么会出现此错误？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-11T10:16:41.187

好吧，显然你没有找到正确的路径..

`GetValue``Null`未找到密钥时返回 a 。还要检查[http://msdn.microsoft.com/en-us/library/fdf576x1](http://msdn.microsoft.com/en-us/library/fdf576x1)

您可以通过它进行调试并仔细检查您想要查看的路径是否确实在文本框行的 regKey1 变量中？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-11T10:16:45.050

看起来 RegistryKey.GetValue 正在返回 null 并且不能执行 .ToString()

**取自 MSDN 的 RegistryKey.GetValue：**

> 检索与指定名称关联的值。如果注册表中不存在名称/值对，则返回 null。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-11T10:26:21.173

也许 NullReferenceException 是针对 textBoxTaux1 的？请发布异常的调用堆栈，这应该清楚。您可以使用 Exception.ToString() 来获取它。

# java - 如何检查 HTTP 响应中的 HTML？

> ID：11430366
> 
> 赞同：1
> 
> 时间：2012-07-11T10:11:58.710
> 
> 标签：java, httpresponse, httpurlconnection

如何在 Java 中有效地检查 HTTP 响应是否包含 HTML？我正在建立一个如下所示的 HTTP 连接：

```
URL url =  new URL(inputURL);
con = (HttpsURLConnection)url.openConnection(proxy);
con.setRequestMethod(request.getMethod());
con.connect();
con.getResponseCode(); 
```

有没有办法有效地检查响应是否包含 HTML（而不是其他资源，如图像、.css 或 .js 文件）。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-11T10:16:14.947

如果您信任 Web 服务器返回正确的内容类型标头，您可以检查这些标头 - 对于 HTML，它应该是：

```
Content-type:text/html 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-11T10:15:14.747

您有一个专门用于此的方法：[getContentType](http://docs.oracle.com/javase/1.5.0/docs/api/java/net/URLConnection.html#getContentType%28%29)

在您的 HttpsURLConnection 上，它返回接收到的文件的 mime 类型。

对于 HTML 文件，它将是“text/html”。

所以你可以检查：

```
boolean isHTML = "text/html".equalsIgnoreCase(con.getContentType()); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-11T10:18:22.777

您可以从响应中检查内容类型。

```
 System.out.println(con.getContentType().equals("text/html")); 
```

# android - 隐藏评分栏的阴影

> ID：11430367
> 
> 赞同：6
> 
> 时间：2012-07-11T10:12:18.510
> 
> 标签：android, ratingbar

自定义`RatingBar`显示我的影子

**如何隐藏这个影子？**

![在此处输入图像描述](../Images/0a9e26d586ce35b850d706474ec373e5.png)

```
 <RatingBar
            android:id="@+id/ratingBarMain"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_below="@+id/textView6"
            android:layout_toRightOf="@+id/imgThumbFix"
            android:clickable="false"
            android:progressDrawable="@drawable/ratingbar_red_small"
            android:stepSize="1" /> 
```

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-07-11T10:55:18.253

放

```
android:layout_height="EQUAL_TO_IMAGE_HEIGHT" 
```

例子

```
android:layout_height="35dp" 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-07-11T10:56:06.960

这里的问题是：

如果您的视图的高度是 50 px 并且图像的高度是 40 px，它将重复图像的最后一位线，那么对于 10 px 的其余部分，它将通过重复图像的最后一位来填充。

您必须为 RatingBar 提供与您的图像高度相同的确切高度。

```
android:layout_height="40dp" 
```

同样的问题在[这里解决了](https://stackoverflow.com/a/9356898/593709)

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-07-09T19:41:54.340

另一个简单的解决方案是使用 Photoshop 之类的图像编辑器在星形图像中留下一行空像素。然后评级栏中重复或拉伸的像素行将是空的。这种方法解决了我的问题。

# macos - 用于磁盘空间使用细分的 Cocoa API

> ID：11430368
> 
> 赞同：1
> 
> 时间：2012-07-11T10:12:18.757
> 
> 标签：macos, cocoa, diskspace

我希望能够显示类似于 Mac OS X 中内置的系统信息应用程序中使用的磁盘空间使用细分图表（见下图）。我已经搜索过，但找不到返回任何详细故障的 API。我能找到的最好的是使用的总磁盘空间。

据我所知，屏幕截图中的数据（在此示例中实际上看起来不正确）不是通过调整默认音乐、电影、照片和应用程序文件夹的大小来计算的。它似乎确实将特定文件类型使用的数据相加。

![磁盘空间使用情况 Mac OS X](../Images/4df915539ef23c1e3d73e0011414bb65.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-12-11T20:22:19.703

也许他们正在使用元数据 API 并稍微自定义搜索？这就是我过去用来分解某些类型的方法......

[https://developer.apple.com/library/mac/documentation/Carbon/Conceptual/SpotlightQuery/Concepts/Introduction.html](https://developer.apple.com/library/mac/documentation/Carbon/Conceptual/SpotlightQuery/Concepts/Introduction.html)

# uml - 类和用例之间的关联或使用箭头？

> ID：11430374
> 
> 赞同：0
> 
> 时间：2012-07-11T10:12:23.390
> 
> 标签：uml, diagram, use-case, modeling

我有以下用例图：

![在此处输入图像描述](../Images/a991e91f69cf3e7d1796bd18c8f74780.png)

我想说，演员可以执行一个用例调用“添加两个数字”。执行此用例时，涉及“Number”类的两个实例。这在上图中有表示吗？

当我在这里使用用法箭头时有什么区别：

![在此处输入图像描述](../Images/1dfc5ea1c5d6276ffd76027487728fbe.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-11T17:37:12.180

应该使用用例来展示用户如何与系统交互。

使用序列图显示用例的作用，您可以在其中放置在用例中起作用的类

# php - SonataUser - 扩展管理员

> ID：11430375
> 
> 赞同：6
> 
> 时间：2012-07-11T10:12:28.297
> 
> 标签：php, symfony, symfony-sonata, sonata-admin

我正在尝试修改`User`实体的默认管理员。
实际上只需要从表单中删除某些字段。

我想[这个文档](http://sonata-project.org/bundles/admin/master/doc/reference/advance.html#admin-extension)在可用时会对我有用。
现在我已经创建了这个管理员并尝试覆盖默认管理员`User`。

**应用程序/应用程序/奏鸣曲/UserBundle/Admin/Model/UserAdmin.php**

```
namespace Application\Sonata\UserBundle\Admin\Model;

use Sonata\AdminBundle\Form\FormMapper;
use Sonata\AdminBundle\Datagrid\DatagridMapper;
use Sonata\AdminBundle\Datagrid\ListMapper;
use Sonata\AdminBundle\Show\ShowMapper;
use Sonata\UserBundle\Admin\Model\UserAdmin as BaseType;

class UserAdmin extends BaseType
{
    /**
     * {@inheritdoc}
     */
    protected function configureListFields(ListMapper $listMapper)
    {
        $listMapper
            ->addIdentifier('username')
            ->add('groups')
            ->add('enabled')
        ;
    }

    /**
     * {@inheritdoc}
     */
    protected function configureFormFields(FormMapper $formMapper)
    {
        $formMapper
            ->with('General')
                ->add('username')
                ->add('email')
                ->add('plainPassword', 'text', array('required' => false))
            ->end()
            ->with('Groups')
                ->add('groups', 'sonata_type_model', array('required' => false))
            ->end()
            ->with('Profile')
                ->add('firstname', null, array('required' => false))
                ->add('lastname', null, array('required' => false))
            ->end()
        ;
    }

    /**
     * {@inheritdoc}
     */
    public function preUpdate($user)
    {
        $this->getUserManager()->updateCanonicalFields($user);
        $this->getUserManager()->updatePassword($user);
    }

    /**
     * @return UserManagerInterface
     */
    public function getUserManager()
    {
        return $this->userManager;
    }

} 
```

**应用程序/配置/config.yml**

```
services:
    sonata.admin.extension:
        class: Application\Sonata\UserBundle\Admin\Model\UserAdmin
        tags:
            - { name: sonata.admin.extension, target: sonata.user.admin.user }
        arguments: [null, Sonata\UserBundle\Entity\User, SonataUserBundle:UserAdmin] 
```

但我越来越

> 无法导入资源“/var/www/Symfony/app/config/。” 来自“/var/www/Symfony/app/config/routing.yml”。
> ...
> ErrorException：可捕获的致命错误：传递给 Sonata\AdminBundle\Admin\Admin::addExtension() 的参数 1 必须是 Sonata\AdminBundle\Admin\AdminExtensionInterface 的实例，Application\Sonata\UserBundle\Admin\Model\ 的实例给定的 UserAdmin，在第 3139 行的 /var/www/Symfony/app/cache/dev/appDevDebugProjectContainer.php 中调用，并在第 2359 行的 /var/www/Symfony/vendor/bundles/Sonata/AdminBundle/Admin/Admin.php 中定义

我究竟做错了什么 ？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2015-01-06T15:04:31.753

万一有一天有人会查到这个，我通过覆盖 UserAdmin.php 来完成这个工作

将以下行添加到 app/AppKernel.php 的 registerBundle 方法中

```
// app/AppKernel.php
public function registerBundles()
{
    $bundles = array(
        // other bundle declarations
        new Sonata\UserBundle\SonataUserBundle(),
    );
} 
```

现在将 sonata.user.admin.user.class 参数的值设置为在 FOSUserBundle 设置期间创建的用户实体的 FQCN。

```
//app/config/config.yml
parameters:
    #....
    sonata.user.admin.user.entity: YourVendor\YourBundle\Entity\User 
```

现在创建一个扩展默认 UserAdmin 类并覆盖 configureShowFields、configureFormFields、configureDatagridFilters 和 configureListFields 方法的类，以添加所需的用户管理字段。以下是示例扩展 UserAdmin 类，它基于 FOSUserBundle 文档中创建的基本用户实体。

```
<?php
//src/YourVendor/YourBundle/Admin/UserAdmin.php

namespace YourVendor\YourBundle\Admin;

use Sonata\UserBundle\Admin\Model\UserAdmin as BaseUserAdmin;

use Sonata\AdminBundle\Form\FormMapper;
use Sonata\AdminBundle\Datagrid\DatagridMapper;
use Sonata\AdminBundle\Datagrid\ListMapper;
use Sonata\AdminBundle\Show\ShowMapper;

use FOS\UserBundle\Model\UserManagerInterface;
use Sonata\AdminBundle\Route\RouteCollection;

class UserAdmin extends BaseUserAdmin
{
    /**
     * {@inheritdoc}
     */
    protected function configureShowFields(ShowMapper $showMapper)
    {
        $showMapper
            ->with('General')
                ->add('username')
                ->add('email')
            ->end()
            // .. more info
        ;
    }

    /**
     * {@inheritdoc}
     */
    protected function configureFormFields(FormMapper $formMapper)
    {

        $formMapper
            ->with('General')
                ->add('username')
                ->add('email')
                ->add('plainPassword', 'text', array('required' => false))
            ->end()
            // .. more info
            ;

        if (!$this->getSubject()->hasRole('ROLE_SUPER_ADMIN')) {
            $formMapper
                ->with('Management')
                    ->add('roles', 'sonata_security_roles', array(
                        'expanded' => true,
                        'multiple' => true,
                        'required' => false
                    ))
                    ->add('locked', null, array('required' => false))
                    ->add('expired', null, array('required' => false))
                    ->add('enabled', null, array('required' => false))
                    ->add('credentialsExpired', null, array('required' => false))
                ->end()
            ;
        }
    }

    /**
     * {@inheritdoc}
     */
    protected function configureDatagridFilters(DatagridMapper $filterMapper)
    {
        $filterMapper
            ->add('id')
            ->add('username')
            ->add('locked')
            ->add('email')
        ;
    }
    /**
     * {@inheritdoc}
     */
    protected function configureListFields(ListMapper $listMapper)
    {
        $listMapper
            ->addIdentifier('username')
            ->add('email')
            ->add('enabled', null, array('editable' => true))
            ->add('locked', null, array('editable' => true))
            ->add('createdAt')
        ;

        if ($this->isGranted('ROLE_ALLOWED_TO_SWITCH')) {
            $listMapper
                ->add('impersonating', 'string', array('template' => 'SonataUserBundle:Admin:Field/impersonating.html.twig'))
            ;
        }
    }
} 
```

现在将 sonata.user.admin.user.class 的值设置为 app/config/config.yml 中创建的 UserAdmin 类的 FQCN，例如

```
parameters:
    sonata.user.admin.user.class: YourVendor\YourBundle\Admin\UserAdmin 
```

如果一切设置正确，您将在管理/仪表板页面中看到一个新用户行。所有用户操作都应按预期工作。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-31T20:00:00.567

在您的 config.yml 中，添加以下内容：

```
parameters:
    sonata.user.admin.user.class: Application\Sonata\UserBundle\Admin\Model\UserAdmin 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-14T14:29:59.543

Symfony 2.1 的相同修复，您需要像这样为 Sonata 捆绑包指定自定义 UserAdmin 类

```
sonata_user:
    admin:                  # Admin Classes
        user:
            class:          Application\Sonata\UserBundle\Admin\Entity\UserAdmin
            controller:     SonataAdminBundle:CRUD
            translation:    SonataUserBundle 
```

另请查看 Sonata UserBundle[文档](http://sonata-project.org/bundles/user/master/doc/reference/advanced_configuration.html)以获取更多选项

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-11T13:57:26.837

更改服务定义中的标签

```
tags:
    - { name: sonata.admin, manager_type: orm, group: some.menu, label: User } 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2015-01-02T21:18:12.360

您收到此错误，因为您正在尝试创建管理扩展并且您的类没有实现 AdminExtensionInterface。您还可以扩展实现接口的抽象 AdminExtension 类。

这在 Sonata Admin Bundle - Extensions 的文档中有明确定义：http: [//sonata-project.org/bundles/admin/master/doc/reference/extensions.html](http://sonata-project.org/bundles/admin/master/doc/reference/extensions.html)

# asp.net - 使用 Windows Azure 创建数据库创建可部署包的最佳方法是什么？

> ID：11430378
> 
> 赞同：0
> 
> 时间：2012-07-11T10:12:38.753
> 
> 标签：asp.net, .net, azure, cloud, webdeploy

我正在开发一个 ASP.NET Web 应用程序。我们的想法是，它将作为“包”出售以进行简单部署。我制作了基于 webdeploy 的 ZIP 包，用于直接从 IIS 部署（导入应用程序功能）。它允许用户在文本字段中指定所有设置（名称、用户、密码）。然后一切（甚至数据库）都被部署、配置并准备好使用，而无需任何深入的知识或手动配置。

当有人想将我的应用程序部署到 Azure 时，我希望有同样的体验。我的意思是一切都应该放在一个包中，负责部署的人应该只填写几个文本框来配置和部署整个应用程序（包括数据库、其结构和初始数据）

问题是：有可能吗？如果是，我在哪里可以找到任何信息？

谢谢，马辛

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-11T19:52:26.570

出色地，

对于可能 - 这是可能的。但是，是否有开箱即用的工具可以提供您正在寻找的东西？我不认为，但坦率地说，我没有搜索过。

可能的事情 - 您必须自己提供一个“应用程序安装程序”（如 Umbraco 安装程序、WordPress 安装程序等），并以“云方式”的方式进行操作。因此，您提供包，您的客户将其上传到他们的云服务，然后运行一个询问用户/密码问题的 UI。

[Azure 的另一个选择是使用Azure App MarketPlace](https://datamarket.azure.com/browse/Applications)（[介绍实验室](http://msdn.microsoft.com/en-us/wazplatformtrainingcourse_introtowazmarketplace.aspx)）采用多租户方式，您将在其中向客户提供完整的 SaaS。

我正在考虑您的最后机会 - 使用 Windows Azure 网站作为您的应用程序的目标平台。但是，坦率地说，我不确定您是否可以直接提供 web-deploy 包。有网络部署代理，您可以从 Visual Studio 直接网络部署到 WAWS（Windows Azure 网站），但我认为它不适用于 SQL 服务器数据库生成等。

# javascript - 使用javascript点击按钮后，提交按钮不回发

> ID：11430383
> 
> 赞同：1
> 
> 时间：2012-07-11T10:12:54.213
> 
> 标签：javascript, asp.net

遇到了一个非常奇怪的问题，似乎是特定于 IE 的。

我有一个带有 FileUpload 控件的表单。但是，它不可能（据我所知）单独设置此控件的按钮和文本框的样式，所以我所做的是向页面添加第二个按钮，按照我的需要设置样式。在此按钮的 OnClientClick 事件中，它只需单击 FileUpload 控件的“浏览”按钮并选择文件。然后我有一个“导入”按钮，可以回发并导入文件。

在 Chrome 和 Firefox 中，这一切都很好。但是，我刚刚在 IE 中测试过，第一次点击“导入”按钮时，除了清除 FileUpload 控件外，没有任何反应。再次单击该按钮，它会回发，但现在没有要上传的文件。我已经在客户端点击按钮上发出警报，这会触发，但它不会回发。

但是，如果我直接使用“浏览”按钮，一切正常，所以这似乎与 Javascript 单击按钮有关，但是我不明白为什么会这样，而且它似乎是 IE 特定的。(IE9)。

有谁知道可能是什么原因造成的，以及我如何解决它（没有希望回到只使用不太时尚的 FileUpload 控件）？

代码如下：

```
<script>
    function SelectFile() {
        $("#<%= uplFile.ClientID %>").click();
    }
</script>

<asp:Button runat="server" ID="btnSelectFile" OnClientClick="SelectFile();return false;" Text="Select File" />

<asp:FileUpload runat="server" ID="uplFile" Width="250" CssClass="FileUpload" OnChange="ShowSelectedFilename(this.value)" /> 

<asp:Button runat="server" ID="btnImport" Text="Import" OnClick="btnImport_Click" /> 
```

注意：我也试过没有“return false;” 在 btnSelectFile 按钮上的 OnClientClick 事件中。我也尝试过使用 document.getElementById 而不是 JQuery 来进行点击，但遇到了同样的问题。

任何帮助将非常感激。

更新：

通过在 Google 上搜索更多我遇到的其他错误（例如，尝试以编程方式提交表单或单击导入按钮时“访问被拒绝”），看起来这可能归结为 IE 中的安全功能，尽管我'我仍然不完全相信。

基本上，并且有充分的理由，微软不希望开发人员（或黑客）能够弄乱上传控制。例如，他们不希望使用 javascript 的开发人员在提交表单时能够将用户选择的文件的名称更改为“c:\mysecretfile.txt”，因此只能从客户上传他们喜欢的任何文件。但是，我实际上并没有更改文件名，我所做的只是以编程方式单击“浏览”按钮，然后从那里它就像用户自己单击它一样工作，但我希望这一切都与同一件事有关.

除非有人知道不同？

# wordpress - 简码中的 Wordpress 分页

> ID：11430392
> 
> 赞同：5
> 
> 时间：2012-07-11T10:13:32.740
> 
> 标签：wordpress, custom-post-type

一个关于 Wordpress 大脑的快速问题......

我有一个简码，它目前从某个帖子类型导入所有帖子。但是我无法将分页添加到 wp_query。

为了解释此代码的功能，我将 [feed type="attractions" limit="2"] 放在页面上，它会根据景点显示 2 个帖子，但它不会分页。只是想知道我到底做错了什么......

这是代码！--- >

```
 function section_feed_shortcode( $atts ) {
    extract( shortcode_atts( array( 'limit' => -1, 'type' => 'post'), $atts ) );

    $q = new WP_Query(  array ( 'posts_per_page' => $limit, 'post_type' => $type, order => 'ASC', orderby =>'menu_order', 'paged' => get_query_var('page')  ) );

    $list = ' ';

    while ( $q->have_posts() ) { $q->the_post();

        $list .= '<article class="listing-view clearfix">' 
        . '<div class="listing-content">' 
        . '<h3>' . get_the_title() . '</h3>' 
        .'<p>' . get_the_excerpt() . '</p>'
        . '<a href="' . get_permalink() . '">' . 'View &raquo;' . '</a>'
        . '</div>'
        . '<a class="listing-thumb" href="' . get_permalink() . '">' . get_the_post_thumbnail($page->ID, 'listing-thumb')  . '<span></span></a>'
        . '</article>';
    }

    wp_reset_query();

    return 
    '<div class="listings clearfix">' 
    . $list 
    . '<div class="nav-previous">' . next_posts_link( __( '<span class="meta-nav">&larr;</span> Older posts', 'stratford_wp' ) ) . '</div>'
    . '<div class="nav-next">' . previous_posts_link( __( 'Newer posts <span class="meta-nav">&rarr;</span>', 'stratford_wp' ) ) . '</div>'
    . '</div>';
}
add_shortcode( 'feed', 'section_feed_shortcode' ); 
```

感谢您的高级答案！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2014-03-10T22:28:30.370

今天遇到了这个问题并得到了解决方案：

```
global $paged
$q = new WP_Query(  array ( 'posts_per_page' => $limit, 'post_type' => $type, order => 'ASC', orderby =>'menu_order', 'paged' => $paged  ) ); 
```

然后您必须更改`paginate_links`自定义帖子的查询。请参阅[wp 法典](http://codex.wordpress.org/Function_Reference/paginate_links#Example_With_a_Custom_Query)示例。更好的是，您可以添加一个函数并`wp_reset_query()`在函数使用之前和内部调用它

```
$big = 999999999; // need an unlikely integer
echo paginate_links( array(
   'base' => str_replace( $big, '%#%', esc_url( get_pagenum_link( $big ) ) ),
   'format' => '?paged=%#%',
   'current' => max( 1, get_query_var('paged') ),
   'total' => $q->max_num_pages //$q is your custom query
 ) ); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-18T13:24:53.690

在访问下一个/上一个链接之前，您正在重置您的查询。如果将 wp_reset_query() 函数进一步向下移动会发生什么？

[此外，您可能会在http://wordpress.stackexchange.com](http://wordpress.stackexchange.com)上获得更多运气

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-07-11T14:31:50.393

您需要添加全局 $paged ，然后在传递给 WP_Query 的数组中添加 'paged' => $paged

您的查询应该是这样的。

```
global $paged
$q = new WP_Query(  array ( 'posts_per_page' => $limit, 'post_type' => $type, order => 'ASC', orderby =>'menu_order', 'paged' => $paged  ) ); 
```

# asp.net-mvc - 引用不同版本的 Json.NET dll

> ID：11430396
> 
> 赞同：5
> 
> 时间：2012-07-11T10:13:52.787
> 
> 标签：asp.net-mvc, json.net

我正在玩我的 mvc 项目。

1.  我在项目中添加了一个名为 SocialAuth.Net 的包，该包又使用 Newtonsoft.Json.dll 4.0.0.0（旧）作为其依赖项之一。

2.  然后因为我自己也需要 Json.Net，所以我想要一个更新的版本，所以我 Nugeted Json.NET，它有一个更新的版本 4.5.0.0（更新）。

然后问题发生了。在我的剃刀视图“ViewBag.Title = ....”它有红色下划线说：

> 警告 1 c:\users\admin\documents\visual studio 2010\Projects\WebApp\WebApp\Views\Home\Index.cshtml：ASP.NET 运行时错误：无法加载文件或程序集 'Newtonsoft.Json，版本 = 4.5。 0.0，Culture=neutral，PublicKeyToken=30ad4fe6b2a6aeed' 或其依赖项之一。找到的程序集的清单定义与程序集引用不匹配。（来自 HRESULT 的异常：0x80131040）

这是我的 web.config 的 Json 部分：

```
 <dependentAssembly>
    <assemblyIdentity name="Newtonsoft.Json" publicKeyToken="30ad4fe6b2a6aeed" culture="neutral" />
    <bindingRedirect oldVersion="0.0.0.0-4.5.0.0" newVersion="4.5.0.0" />
  </dependentAssembly> 
```

所以，

1.  我去参考，检查并发现 Newtonsoft.Json 是 4.0.0.0（可能是 SocialAuth.Net 附带的），我删除了它，并添加了我从 Nuget 获得的 4.5.0.0 参考。

2.  我进入 WebApp/bin/debug/ 文件夹并删除了所有内容，然后重建了项目。

但是，一旦我重建了 webapp，Newton.Json 4.0.0.0 就会回到 bin/debug/ 中，无论我如何手动将它引用到新的 Nuget 4.5.0.0。同样的错误又回来了。我被困住了。

您是否知道如何处理此 dll 问题？谢谢你。

编辑 - - - - - - - - - - - - - - - - - -

经过一番思考，我明白这是因为首先链接了 Json.Net（较新的 4.5），然后在构建时较旧的链接在它之后。所以旧的会覆盖新的。

我不熟悉 GAC 安装，但知道我可以打开那个蠕虫罐并在那里安装 2 个版本，这是我不想这样做的，因为这意味着我必须对部署 Web 应用程序的每台机器都这样做。有没有办法使用 web.config 来解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-11T10:46:57.070

您可以尝试安装带有[`‑IgnoreDependencies`](http://docs.nuget.org/docs/reference/package-manager-console-powershell-reference)标志的 SocialAuth.Net 包，然后手动安装依赖项并确保只安装最新版本的 Json.Net 库。

然后在运行时 SocialAuth.Net 包将尊重程序集重定向并加载 Json.Net (v4.5) 而不是旧版本。

# calendar - 如何在不刷新页面的情况下在日历中链接上个月和下个月

> ID：11430401
> 
> 赞同：-1
> 
> 时间：2012-07-11T10:14:06.240
> 
> 标签：calendar

对于我的网站，我用 events.it 制作了一个日历。它在本月运行良好。但我对如何在不刷新页面的情况下将上个月和下个月的事件链接起来感到困惑。我想使用ajax，但我不知道。欢迎任何帮助。提前致谢。我的代码：

```
<h1><?php echo "<strong>".$current_month_text."</strong>";?></h1>
<a href="javascript:;" onclick="newCalender(<?php echo $previous_month;?>)">Previous</a>

<table cellspacing="0">
        <thead>
        <tr>
            <th>Sun</th>
            <th>Mon</th>
            <th>Tue</th>
            <th>Wed</th>
            <th>Thu</th>
            <th>Fri</th>
            <th>Sat</th>
        </tr>
        </thead>
        <tr>
            <?php

            for($i=0; $i< $total_rows; $i++)
            {
                for($j=0; $j<7;$j++)
                {
                    $day++;                 

                    if($day>0 && $day<=$total_days_of_current_month)
                    {
                        //YYYY-MM-DD date format
                        $date_form = "$current_year/$current_month/$day";

                        echo '<td';

                        //check if the date is today
                        if($date_form == $today)
                        {
                            echo ' id="today"';
                        }

                        //check if any event stored for the date
                        if(array_key_exists($day,$events))
                        {
                            //adding the date_has_event class to the <td> and close it
                            echo ' class="date_has_event"> '.$day;

                            //adding the eventTitle and eventContent wrapped inside <span> & <li> to <ul>
                            echo '<div class="events"><ul>';

                            foreach ($events as $key=>$event){
                                if ($key == $day){
                                foreach ($event as $single){ 
                                    echo '<li>';                    
                                    echo anchor("events_detail/$single->url",'<span class="title">'.$single->event_title.'</span><span class="desc">'.character_limiter(strip_tags(stripslashes($single->description)),100).'</span>');                     
                                    echo '</li>'; 
                                } // end of for each $event
                                }

                            } // end of foreach $events

                            echo '</ul></div>';
                        } // end of if(array_key_exists...)

                        else 
                        {
                            //if there is not event on that date then just close the <td> tag
                            echo '> '.$day;
                        }
                        echo "</td>";
                    }
                    else 
                    {
                        //showing empty cells in the first and last row
                        echo '<td class="padding">&nbsp;</td>';
                    }
                }
                echo "</tr><tr>";
            }

            ?>
        </tr>

    </table> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-18T09:15:49.817

在日历的查看页面中：

```
<div class="calender">    
<span class="detail_button_left">&nbsp;</span>
    <a class="detail_bg" id="prev_button" href="<?php echo base_url() . "calender/". $previous_month;?>" >Previous</a>
<span class="detail_button_right">&nbsp;</span>
<div class="calender_next_btn">
    <span class="detail_button_left">&nbsp;</span>
        <a class="detail_bg" id="next_button" href="<?php echo base_url() . "calender/". $next_month; ?>" >Next</a>
    <span class="detail_button_right">&nbsp;</span>
</div> 
<h1><?php echo "<strong>".$current_month_text."</strong>";?></h1>
<div class="layout-grid">
    <table cellspacing="0">
        <thead>
            <tr>
                <th>Sun</th>
                <th>Mon</th>
                <th>Tue</th>
                <th>Wed</th>
                <th>Thu</th>
                <th>Fri</th>
                <th>Sat</th>
            </tr>
    </thead>
            <tr>
                <?php
                    for($i=0; $i< $total_rows; $i++)
                        {
                            for($j=0; $j<7;$j++)
                                {
                                    $day++;                 
                                    if($day>0 && $day<=$total_days_of_current_month)
                                    {
                                        //YYYY-MM-DD date format
                    $date_form = "$current_year/$current_month/$day";
                    echo '<td';
                    //check if the date is today
                    if($date_form == $today)
                    {
                                            echo ' id="today"';
                    }
                    //check if any event stored for the date
                    if(array_key_exists($day,$events))
                    {
                                            //adding the date_has_event class to the <td> and close it
                                            echo ' class="date_has_event"> '.$day;
                        //adding the eventTitle and eventContent wrapped inside <span> & <li> to <ul>
                                            echo '<div class="events"><ul>';
                       foreach ($events as $key=>$event)
                                            {
                                                if ($key == $day)
                                                {
                                                    foreach ($event as $single)
                                                    { 
                                                        echo '<li>';                    
                            echo anchor("events_detail/$single->url",
                                                                '<span class="title">'.$single->event_title.
                                                                '</span><span class="desc">'.character_limiter(strip_tags(stripslashes($single->description)),100).
                                                                '</span>');                     
                            echo '</li>'; 
                                                    } // end of for each $event
                        }
                                            } // end of foreach $events
                                            echo '</ul></div>';
                    } // end of if(array_key_exists...)
                    else 
                    {
                                            //if there is not event on that date then just close the <td> tag
                                            echo '> '.$day;
                    }
                    echo "</td>";
                                    }else{
                    //showing empty cells in the first and last row
                    echo '<td class="padding">&nbsp;</td>';
                                    }
                }
                echo "</tr><tr>";
                            }

            ?>
          </tr>
    </table>
</div>
</div> 
```

在模型页面中：

```
function calender($slug=0)
    {
        $timeid = $this->uri->segment(3);
       if($timeid==0)
       {
           $time = time();
       }else{
           $time = $timeid;
       }
       if(!empty($slug)){
        $data['events']=$this->user_model->getEvents($slug);
        $today = date("Y/n/j", time());
    $data['today']= $today;
    $current_month = date("n", $slug);
    $data['current_month'] = $current_month;
    $current_year = date("Y", $slug);
    $data['current_year'] = $current_year;
    $current_month_text = date("F Y", $slug);
    $data['current_month_text'] = $current_month_text;
    $total_days_of_current_month = date("t", $slug);
    $data['total_days_of_current_month']= $total_days_of_current_month;
    $first_day_of_month = mktime(0,0,0,$current_month,1,$current_year);
    $data['first_day_of_month'] = $first_day_of_month;
    //geting Numeric representation of the day of the week for first day of the month. 0 (for Sunday) through 6 (for Saturday).
    $first_w_of_month = date("w", $first_day_of_month);
    $data['first_w_of_month'] = $first_w_of_month;
    //how many rows will be in the calendar to show the dates
    $total_rows = ceil(($total_days_of_current_month + $first_w_of_month)/7);
    $data['total_rows']= $total_rows;
    //trick to show empty cell in the first row if the month doesn't start from Sunday
    $day = -$first_w_of_month;
    $data['day']= $day;
    $next_month = mktime(0,0,0,$current_month+1,1,$current_year);
    $data['next_month']= $next_month;
    $next_month_text = date("F \'y", $next_month);
    $data['next_month_text']= $next_month_text;
    $previous_month = mktime(0,0,0,$current_month-1,1,$current_year);
    $data['previous_month']= $previous_month;
    $previous_month_text = date("F \'y", $previous_month);
    $data['previous_month_text']= $previous_month_text;
    $next_year = mktime(0,0,0,$current_month,1,$current_year+1);
    $data['next_year']= $next_year;
    $next_year_text = date("F \'y", $next_year);
    $data['next_year_text']= $next_year_text;
    $previous_year = mktime(0,0,0,$current_month,1,$current_year-1);
    $data['previous_year']=$previous_year;
    $previous_year_text = date("F \'y", $previous_year);
    $data['previous_year_text']= $previous_year_text;
       }
       else{
        $data['events']=$this->user_model->getEvents($time);
        $today = date("Y/n/j", time());
    $data['today']= $today;
    $current_month = date("n", $time);
    $data['current_month'] = $current_month;
    $current_year = date("Y", $time);
    $data['current_year'] = $current_year;
    $current_month_text = date("F Y", $time);
    $data['current_month_text'] = $current_month_text;
    $total_days_of_current_month = date("t", $time);
    $data['total_days_of_current_month']= $total_days_of_current_month;
    $first_day_of_month = mktime(0,0,0,$current_month,1,$current_year);
    $data['first_day_of_month'] = $first_day_of_month;
    //geting Numeric representation of the day of the week for first day of the month. 0 (for Sunday) through 6 (for Saturday).
    $first_w_of_month = date("w", $first_day_of_month);
    $data['first_w_of_month'] = $first_w_of_month;
    //how many rows will be in the calendar to show the dates
    $total_rows = ceil(($total_days_of_current_month + $first_w_of_month)/7);
    $data['total_rows']= $total_rows;
    //trick to show empty cell in the first row if the month doesn't start from Sunday
    $day = -$first_w_of_month;
    $data['day']= $day;
    $next_month = mktime(0,0,0,$current_month+1,1,$current_year);
    $data['next_month']= $next_month;
    $next_month_text = date("F \'y", $next_month);
    $data['next_month_text']= $next_month_text;
    $previous_month = mktime(0,0,0,$current_month-1,1,$current_year);
    $data['previous_month']= $previous_month;
    $previous_month_text = date("F \'y", $previous_month);
    $data['previous_month_text']= $previous_month_text;
    $next_year = mktime(0,0,0,$current_month,1,$current_year+1);
    $data['next_year']= $next_year;
    $next_year_text = date("F \'y", $next_year);
    $data['next_year_text']= $next_year_text;
    $previous_year = mktime(0,0,0,$current_month,1,$current_year-1);
    $data['previous_year']=$previous_year;
    $previous_year_text = date("F \'y", $previous_year);
    $data['previous_year_text']= $previous_year_text;
       }

        $this->load->view('calender', $data);
    } 
```

其中 $slug 返回下一个/上一个的月份

# c# - WebMatrix - 数据库 ane umbraco 错误

> ID：11430405
> 
> 赞同：1
> 
> 时间：2012-07-11T10:14:19.220
> 
> 标签：c#, database, web, umbraco, webmatrix

我在 WebMatrix 中使用 Umbraco 时遇到问题。我安装了 Umbraco 并想使用，但是当我尝试打开 webside 时出现错误（它生成了我推送到我的保管箱中的 webside）：

[http://dl.dropbox.com/u/45759281/Odwo%C5%82anie%20do%20obiektu%20nie%20zosta%C5%82o%20ustawione%20na%20wyst%C4%85pienie%20obiektu.htm](http://dl.dropbox.com/u/45759281/Odwo%C5%82anie%20do%20obiektu%20nie%20zosta%C5%82o%20ustawione%20na%20wyst%C4%85pienie%20obiektu.htm)

我知道这是数据库（Microsoft 服务器 CE）的问题，但我不知道该怎么做。你能帮我吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-17T22:13:31.500

我问了团队里的几个人，他们有一些建议。

“因此，Umbraco 在保留数据库方面存在问题。不过，您可以做的一件事是让网站脱机并重新启动应用程序池，作为发布的一部分。不幸的是，这将意味着网站在发布期间会停机，您将还需要执行几次传球。”

解决此问题的步骤： 1\. 将名为 app_offline.html 的文件添加到站点的根目录。这将防止人们在更新站点时 ping 站点并导致 Umbraco 获取数据库。2\. 更改您的 web.config（不确定这是否有必要，但这会强制您的应用程序池重新启动……这会强制它释放您的 sdf 文件） 3\. 发布所有内容 4\. 从中删除 app_offline.html您的网站

希望这会有所帮助 - 让我们知道！

# javascript - 将 Javascript 数组值传递给 HTML

> ID：11430409
> 
> 赞同：-1
> 
> 时间：2012-07-11T10:14:32.697
> 
> 标签：javascript

我的 Javascript 数组内容如下所示

```
Order[0] = Order ID
Order[1] = Unused
Order[2] = Payment Amount 
```

我想将以下参数 oid=Order[0] & amt=Order[2] 传递给以下

```
<img src="https://gan.doubleclick.net/gan_conversion?advid=K123456&oid=12345&amt=123.45" width=1 height=1> 
```

我已经写了这段代码，但它不起作用

```
<script>    document.write('<img src="https://gan.doubleclick.net/gan_conversion?advid=K539002&oid=+%Order[0]%+&amt=+%Order[2]%" width=1 height=1>')</script> 
```

不知道有什么问题

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-11T10:24:53.530

您需要正确连接值：

```
<script>
    document.write('<img src="https://gan.doubleclick.net/gan_conversion?advid=K539002&oid=' + Order[0] + ' &amt=' + Order[2] + "' width="1" height="1" />')
</script> 
```

# java - 使用 Java 代码在 Android 上捕获屏幕截图

> ID：11430418
> 
> 赞同：2
> 
> 时间：2012-07-11T10:14:49.573
> 
> 标签：java, android, screenshot

> **可能重复：**
> [屏幕截图 Android](https://stackoverflow.com/questions/2661536/screenshot-android)

我想以编程方式捕获屏幕截图（不是我的视图的屏幕截图），并创建了一个应用程序来截取我的视图的屏幕截图。

我正在尝试使用 Java 代码捕获设备屏幕截图（例如，如果用户打开任何图像文件）（我想创建服务并从服务中我们可以拍照，但我不知道如何实现这一点）。

我发现了一些使用帧缓冲区 fb0 的本机代码，但我对此非常了解，不知道如何使用它。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-07-11T10:21:16.433

这是截取屏幕截图并将其写入sd卡的解决方案

设置你的根布局：

```
View content = findViewById(R.id.layoutroot);
content.setDrawingCacheEnabled(true); 
```

获取渲染视图的函数：

```
private void getScreen()
{
    View content = findViewById(R.id.layoutroot);
    Bitmap bitmap = content.getDrawingCache();
    File file = new File( Environment.getExternalStorageDirectory() + "/test.png");
    try 
    {
        file.createNewFile();
        FileOutputStream ostream = new FileOutputStream(file);
        bitmap.compress(CompressFormat.PNG, 100, ostream);
        ostream.close();
    } 
    catch (Exception e) 
    {
        e.printStackTrace();
    }
} 
```

记得添加

```
 <uses-permission android:name="android.permission.WRITE_EXTERNAL_STORAGE" /> 
```

到您的 AndroidManifest。

# c# - 我需要一个可以从一种行格式转换为另一种行格式的 C# 函数？

> ID：11430420
> 
> 赞同：1
> 
> 时间：2012-07-11T10:14:52.590
> 
> 标签：c#

我必须进行以下类型的转换，其中我的源字符串可以有一个或两个句点，并且每个数字都由两位数表示。所以“1”变成“01”，“90”变成“90”。这是之前 -> 之后的示例

```
0.0 -> 0000
1.1 -> 0101
10.10 -> 1010
1.88 -> 0188
1.11.22 -> 011122
33.44.5 -> 334405 
```

我有以下功能，但它确实适用于不同的组合。谁能建议我如何使它适用于我的输入中有**1 或 2 个**句点的情况：

```
 public string DotFormatToRowKey(string tempRowKey) {
        return string.Join("", from s in id.Split('.')
                               select s.PadLeft(2, '0')).PadRight(4, '0'));
    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-11T10:20:59.807

我想你只需要`PadLeft(2,'0')`一部分

```
Console.WriteLine(string.Join("", "1.33.45".Split('.').Select(ech => ech.PadLeft(2, '0')).ToArray())); 
 //Outputs: 334405
Console.WriteLine(string.Join("", "1.1".Split('.').Select(ech => ech.PadLeft(2, '0')).ToArray()));
//Outputs: 0101 
```

拆分将为您提供零件，如果需要，用零填充它，您的长度`2`如示例所示

```
return (string.Join("", tempRowKey.Split('.').Select(ech => ech.PadLeft(2, '0')).ToArray()) ; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-11T10:21:52.187

这应该有效：

```
public string DotFormatToRowKey(string tempRowKey) {
        var splits = tempRowKey.Split('.') // Split string at "."
                     .Select(x => String.Format("{0:d2}", Int32.Parse(x))) // Specify string format
                     .ToList();
        return String.Join(String.Empty, splits.ToArray()); // Join array and return
} 
```

参考：http: [//msdn.microsoft.com/en-us/library/dd260048.aspx](http://msdn.microsoft.com/en-us/library/dd260048.aspx)

# sql-server - 如何为事实表建模

> ID：11430423
> 
> 赞同：4
> 
> 时间：2012-07-11T10:14:55.330
> 
> 标签：sql-server, database-design, data-warehouse

我即将在星型模式中创建一个包含事实和维度的数据仓库。

我想回答的业务问题通常是：

*   我们在第一季度卖了多少钱？
*   我们在第一季度卖给了女性多少钱？
*   我们在第一季度向 30-35 岁的女性卖了多少钱？
*   我们在第一季度向居住在纽约的 30-35 岁女性卖了多少钱？
*   我们在第一季度向居住在纽约的 30-35 岁女性卖了多少钱？

*   去年我们在服装类别中卖了多少钱？

*   去年我们的蓝色牛仔裤产品卖了多少钱？
*   去年，我们向居住在澳大利亚的 40 至 42 岁的男性销售了蓝色牛仔裤产品多少钱？

我正在考虑一个小时粒度的日期维度（指定年、月、日、小时、季度、日名称、月名称等）。我也在考虑产品维度和用户维度。

我想知道这些问题是否可以使用单个事实表来回答，或者是否适合创建多个事实表？我正在考虑一个表格，例如：

**事实销售**

DimDate - 转至包含日期信息的表格（例如季度、星期几、年、月、日）

DimProduct - 指向包含产品信息的表，例如（产品名称）

DimUser - fk 到包含用户信息的表，例如（年龄，性别）

TotalSales - 那些特定日期、产品和用户的所有销售额的总和。

另外，如果我想测量展位的总销售额（金钱）和总销售额？创建一个具有相同维度但使用 TotalNumberOfSales 作为事实的新事实表是否合适？

感谢我能得到的所有输入。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-11T11:01:38.997

我认为你在正确的轨道上。上述所有问题都应该可以仅使用一个涵盖销售额的事实表来回答。

我认为应该从不聚合开始，如果需要，以后再聚合。考虑到一个销售可以包含多个产品和多个项目，我将其组织如下......销售中每个产品的一个事实行（通常是发票上的行，所以我称之为“订单行”或“销售线”），也许还有三个柜台属性：

*   `NumItems`- 商品数量，即如果客户购买了三个相同的产品，则为 3。
*   `NumLines`- “订单行”的数量 - 应始终为 1。在稍后聚合数据时可能很有用（已经拥有`sum(NumLines)`而不是`count(*)`在 SQL 中），或者在添加更正项时 ( `NumLines = -1`)。
*   `NumSales`- 一个小数，因此可以将其相加得出销售数量（即，如果销售涉及三种不同的产品并因此包含三个订单行，则为 0.333）。

现在，人们会遇到一个问题来获得正确的计数，即“涉及黑色衣服的销售数量”。我们在我以前的工作场所遇到过这个问题——我确信为此必须存在一些“最佳实践”，我们或多或少地通过`SaleID`在事实表（或`TransactionID`）中引入 a 和 do 来结束`count(distinct SaleID)`。这缺乏优雅，但有效。

在我们的设置中，我们有几个货币属性 - 最重要的，一个是收入（在支付与所售商品相关的直接成本后剩下的收入），另一个是营业额（客户为商品支付的价格）。销售税或增值税可能会增加更多的复杂性。可以只使用一个货币属性，然后在事实表中将销售额拆分为多行，但我认为我更愿意在销售行事实表中推荐多个货币列。事实表中的所有内容都以“基础货币”（在我们的例子中为欧元）计算，然后我们有一个汇率维度来跟踪确切的金额。

我认为包含一天中的小时的日期维度没有意义。在我以前的工作中，我将仓库保存在 postgres 中，实际上我在没有日期维度的情况下管理得很好——尽管日期维度被认为是“最佳业务实践”，但我发现从性能方面来说，就我们所有的目的而言，我们得到了更好的性能通过使用标准的 postgres 日期函数而不是在日期维度中拖动。我用它玩了很多，我认为最后我发现最优化的是将日期和时间分成两个不同的属性。（时区和夏令时让我非常头疼......）

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-11T14:07:21.820

我同意 tobixen - 你走在正确的轨道上。

我建议您阅读 Ralph Kimball 的书“The Data Warehouse Toolkit”，尤其是关于零售的一章——它深入探讨了销售事实。

日期维度就像有一个日历表 - 您可以根据季度、会计月份和其他特定于日期的业务进行拆分。我通常同时保留日期键和时间戳数据类型，因此我们可以使用财政日历来做事。如果您需要将表格的粒度保持在该级别，我实际上会有一个单独的时间维度，一天中的几个小时或几分钟等都有桶。我怀疑您是否需要每小时。

这是我要做的：

声明事实表的粒度：

每个订单行 1 行

请注意，grain 如何不包含任何不能唯一标识行的内容。

订单行的维度属性：

```
Date
Time (if needed, and bucketed by hour/minute etc)
Product
Customer 
```

订单行的退化维度（这些是与交易相关的代码）：

```
Order Number
Order Line Number 
```

一些示例措施：

```
Item Price at time of Sale (optional, may be useful in some situations)
Discount Amount
Sale Dollars 
```

这应该回答所有这些问题。

对于总计，过滤维度属性后的简单 COUNT / SUM 应该可以正常工作。

您应该考虑到客户维度是最难建模的维度之一，Kimball 在他的书中用了整整一章来讨论客户维度。

# c# - 如何允许用户在每个单词后只输入一个空格？

> ID：11430426
> 
> 赞同：0
> 
> 时间：2012-07-11T10:15:08.460
> 
> 标签：c#, asp.net, textbox, removing-whitespace

> **可能重复：**
> [如何在 C# 中用单个空格替换多个空格？](https://stackoverflow.com/questions/206717/how-do-i-replace-multiple-spaces-with-a-single-space-in-c)

我有一个文本框，用户将在其中输入文本框的搜索条件。现在，我想阻止用户在 TEXTBOX 中的*每个单词后输入***不** 超过一个空格。如何在 C# 中做到这一点。

 *提前致谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-11T10:16:04.177

如果您希望通过服务器端执行此操作，您可以执行一个简单的正则表达式，将任何双空格替换为单数空格

```
RegexOptions options = RegexOptions.None;
Regex regex = new Regex(@"[ ]{2,}", options);     
MyTextBox.Text= regex.Replace(MyTextBox.Text, @" "); 
```

如果您想在客户端执行此操作，您仍然可以使用相同的正则表达式，但在 JavaScript 上执行并在 onBlur 事件上触发它*

# jquery - jQuery 多个隐藏和显示面板

> ID：11430428
> 
> 赞同：2
> 
> 时间：2012-07-11T10:15:15.963
> 
> 标签：jquery, html, hide, toggle, show

这个想法是在右侧有一个类似于这个的过滤器： - [过滤器切换示例](http://www.airbnb.co.uk/s/leeds?room_types%5B%5D=Entire%20home/apt&room_types%5B%5D=Private%20room&room_types%5B%5D=Shared%20room&price_min=111&price_max=200)

所以基本上我希望能够像示例一样拥有多个展开和折叠的 div。我发现的插件只允许在任何给定时间扩展一个 div。

任何帮助都会很棒，

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-11T10:22:23.533

您可以使用[jQuery UI Accordion](http://jqueryui.com/demos/accordion/)，但是您可以使用一个部分创建多个手风琴，而不是使用带有多个部分的手风琴。

不确定您使用的是什么插件，但也许您可以使用相同的技巧。

或者自己写...

```
<div class="panel collapsed">
    <h2 class="header">header1</h2>
    <div class="content">This is content</div>
</div>
<div class="panel">
    <h2 class="header">header2</h2>
    <div class="content">This is content</div>
</div>​​​​​​​​​​​​​​ 
```

CSS...

```
.panel {
    margin-bottom: 10px;
    background-color: silver;
    width: 200px;
}
.panel .header {
}
.panel.collapsed .content {
    display: none;
} 
```

​还有 JavaScript（使用 jQuery）... [JSFiddle](http://jsfiddle.net/yRCFa/2/) here

```
$(".panel .header").click(function() {
    $(this).parent().toggleClass("collapsed")
}) 
```

​或者如果你喜欢褪色...... [JSFiddle](http://jsfiddle.net/yRCFa/3/) here

```
​$(".panel .header").click(function() {
    $(this).next().fadeToggle();
}) 
```

​</p>

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-11T10:22:50.873

您可以使用此敲击显示和隐藏多个面板；

[这是演示](http://jsfiddle.net/gWcFD/8/)

jQuery

```
$('.content').slideUp(1000);

$('.panel').click(function() {//open
   var takeID = $(this).attr('id');//takes id from clicked ele
   $('#'+takeID+'C').slideDown(1000);//show's clicked ele's id macthed div = 1second
});
$('span').click(function() {//close
   var takeID = $(this).attr('id').replace('Close','');//strip close from id = 1second
    $('#'+takeID+'C').slideUp(1000);//hide clicked close button's panel
});​ 
```

html:

```
<div class="panel" id="panel1">panel1</div>
<div id="panel1C">content1
  <span id="panel1Close">X</span>
</div>

<div class="panel" id="panel2">panel2</div>
<div id="panel2C">content2
  <span id="panel2Close">X</span>
</div>

<div class="panel" id="panel3">panel3</div>
<div id="panel3C">content3
  <span id="panel3Close">X</span>
</div> 
```

​</p>

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-11T10:25:24.810

看看这个[问题/答案](https://stackoverflow.com/questions/1628006/looking-for-a-jquery-plug-in-similar-to-accordian-but-that-allows-multiple-sect)。

```
jQuery(document).ready(function(){
    $('.accordion .head').click(function() {
        $(this).next().toggle();
        return false;
    }).next().hide();
}); 
```

# ios - 带有 https 的 NSMutableURLRequest 会导致身份验证失败

> ID：11430432
> 
> 赞同：0
> 
> 时间：2012-07-11T10:15:27.577
> 
> 标签：ios, xcode

到url的连接请求方式(https://xxxx.xxxx.xx/MobileService/Service.svc/login:)，

编辑：

看来我无法使用 https 连接进行身份验证。http 工作正常。你知道为什么吗？

编码：

```
NSString *postData = @"{}";
NSData *requestData = [postData dataUsingEncoding:NSUTF8StringEncoding];

NSMutableURLRequest *request = [NSMutableURLRequest requestWithURL:[NSURL URLWithString:allAppsURL] cachePolicy:NSURLRequestUseProtocolCachePolicy timeoutInterval:20];

[request setHTTPMethod:@"POST"];
[request setValue:@"application/json" forHTTPHeaderField:@"Accept"];
[request setValue:@"application/json" forHTTPHeaderField:@"Content-Type"];
[request setValue:[NSString stringWithFormat:@"%d", [requestData length]] forHTTPHeaderField:@"Content-Length"];
[request setHTTPBody: requestData];

NSURLConnection *connection = [[NSURLConnection alloc] initWithRequest:request delegate:self];
[connectionDict setObject:connection forKey:@"all"]; 
```

身份验证方法：

```
// If the application needs to authenthicate
- (void)connection:(NSURLConnection *)connection didReceiveAuthenticationChallenge:(NSURLAuthenticationChallenge *)challenge {
if ([challenge previousFailureCount] == 0) {
    NSLog(@"received authentication challenge");

    KeychainItemWrapper *keychainItem = [[KeychainItemWrapper alloc] initWithIdentifier:@"TamTam" accessGroup:nil];
    NSString *password = [keychainItem objectForKey:kSecValueData];
    NSString *username = [keychainItem objectForKey:kSecAttrAccount];
    username = [@"\\" stringByAppendingString:username];

    NSURLCredential *newCredential = [[[NSURLCredential alloc] initWithUser:username password:password
                                                                persistence:NSURLCredentialPersistenceForSession] autorelease];

    NSLog(@"credential created");
    [[challenge sender] useCredential:newCredential forAuthenticationChallenge:challenge];
    NSLog(@"responded to authentication challenge");   

}
else {

    // pull from server is always two connections, all and sub. To prevent multiple messages from pull do not check sub
    if(!(connection == [connectionDict objectForKey:@"sub"])){
        [[self delegate] serverConnection:NO process:@"login"];
    }
    NSLog(@"previous authentication failure");
}
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-11T13:58:55.250

您可能还需要添加 -(BOOL)connection:(NSURLConnection *)connection canAuthenticateAgainstProtectionSpace:(NSURLProtectionSpace *)protectionSpace

# ios - 在 SoundCloud iOS 应用中打开曲目的 URL

> ID：11430436
> 
> 赞同：4
> 
> 时间：2012-07-11T10:15:42.080
> 
> 标签：ios, soundcloud

我想在 SoundCloud iOS 应用程序中打开 SoundCloud 曲目。我的印象是要使用的正确 url 方案是`soundcloud:track:[track_id]`.

这会打开 SoundCloud 应用程序，但不会选择正确的曲目。

任何人都可以阐明如何使其正常运行

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-11T11:32:39.297

曲目应该是复数形式，如下所示：

```
soundcloud:tracks:[track_id] 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-12-22T11:30:31.633

该方案是正确的，但符号有点奇怪。其中有一个文字冒号。以下链接格式正确，目前适用于 iOS。

```
soundcloud://tracks:125636702 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-28T15:49:04.897

不确定是否/何时更改，但当前 URL 是 soundcloud:sounds:[track_id]

# c++ - 将 int 放入字符串流时，它会插入奇怪的字符

> ID：11430442
> 
> 赞同：1
> 
> 时间：2012-07-11T10:15:49.690
> 
> 标签：c++, stl, stringstream

我正在尝试使用 stringstreams 将整数转换为字符串。我这样做：

```
std::string const DilbertImage::startUrl = "http://tjanster.idg.se/dilbertimages/dil";
std::string const DilbertImage::endUrl = ".gif";

 DilbertImage::DilbertImage(int d)
{
    cal.setDate(d);

    int year, month, date;

    year = cal.getYear();
    month = cal.getMonth();
    date = cal.getNumDate();

    std::stringstream ss;

    ss << year << "/";

    if(month < 10)
    {
        ss << 0;
    }

    ss << month << "/" << "Dilbert - " << cal.getNumDate() << ".gif";

    filePath = ss.str();

    ss.str("");
    ss.clear();

    ss << startUrl << date << endUrl;

    url = ss.str();

    std::cout << url << '\t' << filePath << std::endl;
} 
```

我希望得到两个看起来像这样的漂亮字符串：

```
url: http://tjanster.idg.se/dilbertimages/dil20060720.gif
filePath: /2006/07/Dilbert - 20060720.gif 
```

但是，当我将整数放入字符串流中时，它们以某种方式最终得到空格（或在它们中间插入的其他空白字符）当我从控制台窗口粘贴它时，字符显示为 *.

他们最终看起来像这样：

```
url: http://tjanster.idg.se/dilbertimages/dil20*060*720.gif 
filepath: /2*006/07/Dilbert - 20*060*720.gif 
```

为什么会这样？

这是整个项目： http: [//pastebin.com/20KF2dNL](http://pastebin.com/20KF2dNL)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-11T10:29:42.690

该`"*"`字符是[千位分隔符](https://stackoverflow.com/questions/2648364/how-to-print-a-number-with-a-space-as-thousand-separator)。有人一直在弄乱你的[语言环境](http://en.cppreference.com/w/cpp/locale/locale)。

这可能会解决它：

```
std::locale::global(std::locale::classic()); 
```

如果您只想覆盖`numpunct`方面（确定数字的格式）：

```
std::locale::global(std::locale().combine<std::numpunct<char>>(std::locale::classic())); 
```

在您的情况下，当您设置瑞典语言环境时：

```
std::locale swedish("swedish");
std::locale swedish_with_classic_numpunct = swedish.combine<std::numpunct<char>>(std::locale::classic());
std::locale::global(swedish_with_classic_numpunct); 
```

# java - 如何在java中生成主机的随机DNS名称

> ID：11430443
> 
> 赞同：0
> 
> 时间：2012-07-11T10:15:51.763
> 
> 标签：java

这可能是以下形式：

aaa1.bbb2.ccc3.ddd4

也许从[http://www.dnsjava.org/download/](http://www.dnsjava.org/download/)得到提示 ，首先生成单独的字符串 aaaa1 ， bbb2 等，然后使用 join()

或者

```
String validCharacters = $('a', 'z').join() + $('A', 'Z').join();

String randomString(int length) {
    return $(validCharacters).shuffle().slice(length).toString();
}

@Test
public void buildFiveRandomStrings() {
    for (int i : $(5)) {
        System.out.println(randomString(12));
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-11T10:26:50.660

只需生成 2、3 个或更多表示子域和域的有效随机字符串。也许然后随机选择一个 tld (.com,.net,.gov....)，然后用“.”将它们全部加入。分隔器。应该不会太难。

# javascript - 'v !== v' 表达式检查什么？

> ID：11430444
> 
> 赞同：5
> 
> 时间：2012-07-11T10:15:52.000
> 
> 标签：javascript

我在一个库的来源中看到了这一点，并且感到困惑。我认为，它总是评估为' `false`'。使用它有什么意义？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-11T10:16:59.840

它检查是否`v`是`NaN`：

```
if( v !== v ){
    //'v' is NaN   here
} 
```

从[标准](http://ecma-international.org/ecma-262/5.1/#sec-15.1.2.4)：

> ECMAScript 代码测试值 X 是否为 NaN 的可靠方法是 X !== X 形式的表达式。当且仅当 X 为 NaN 时结果才为真。

**为什么不直接使用内置`isNaN()`？**

答案很简单：“**`isNaN()`不够可靠。** ”。以下是`isNaN()`失败的情况：

```
isNaN("NaN")         //true
isNaN(undefined)     //true 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-11T10:16:54.497

它测试“非数字”：`NaN !== NaN`等于`true`

来自[MDN](https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/NaN)：

> NaN 的初始值为 Not-A-Number — 与 Number.NaN 的值相同。在现代浏览器中，NaN 是不可配置、不可写的属性。即使不是这种情况，也要避免覆盖它。
> 
> 在程序中很少使用 NaN。它是数学函数失败`(Math.sqrt(-1))`或试图解析数字的函数失败时的返回值`(parseInt("blabla"))`。

# android - 不使用第三方 jars 的 2.3 中的 Actionbar 实现

> ID：11430446
> 
> 赞同：1
> 
> 时间：2012-07-11T10:15:57.413
> 
> 标签：android, android-actionbar

我必须`ActionBar`在我的应用程序中使用，但我正在使用 Android 2.3。**是否有可能在不使用诸如“actionbarsherlock.com”之**类的第三方 jar 的情况下完成，即 Android 本身是否有任何支持？

我从以前的帖子中尝试了下面的链接，但由于 Android 开发者网站已被修改，我无法在那里找到任何[东西](http://developer.android.com/tools/samples/index.html)。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-11T10:23:56.840

您确实回答了您自己的问题 - Actionbarsherlock（和其他人）的存在是为了为较旧的 android 版本（2.x 及以下）提供向后兼容性，因为本机操作栏不适用于所有 Android 版本。如果是这样，可能没有人会构建实现基本功能的第三方库（尽管他们可能会扩展它）。

如果您不想使用第三方库，那么您将不得不实现自己的或仅支持 Android 3.0 及更高版本，这可能不是最好的想法。

在我*看来*，实现你自己的将是缓慢且不必要的，因为 ABS 是一个很好的实现，并且允许本机操作栏在支持它的 Android 版本上完成它的工作，从而为所有 Android 用户提供相同的用户体验（以及 - 2.2 及更高版本）。Jake Warton 试图确保 ABS 只实现本机功能——不多也不少。

# c++ - C++ 显式字符/短？

> ID：11430449
> 
> 赞同：2
> 
> 时间：2012-07-11T10:16:02.197
> 
> 标签：c++

我想将一个字符传递给我的函数（fn）。我不希望将整数和短裤类型转换到其中。所以我认为我应该将值隐式转换为 MyInt（仅支持 char）然后传递给 fn。这应该可以工作 bc IIRC 在传递给函数时只允许一个 typcast（所以 char->MyInt 可以，而 int->char->MyInt 不应该）。

然而，它似乎 int 和 char 都可以工作，所以我认为另一层间接（MyInt2）可以解决它。现在它们都不能传递给 fn ... 有没有办法让我可以传递字符但不能传递 int？

```
#include <cstdio>
struct MyInt2{
    int v;
    MyInt2(char vv){v=vv;}
    MyInt2(){}
};
struct MyInt{
    MyInt2 v;
    MyInt(MyInt2 vv){v=vv;}
};
void fn(MyInt a){
    printf("%d", a.v);
}
int main() {
    fn(1);       //should cause error
    fn((char)2); //should NOT cause error
} 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-07-11T10:21:05.767

[功能模板救援](http://ideone.com/TLw7F)：

```
template<typename T> void fn(T t);

void fn (char a){
    printf("%c", a);
} 
```

如果有人尝试使用除参数`fn`以外的任何内容进行调用，`char`则函数模板将被选为匹配项，并且链接器将抱怨它找不到适当的特化。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-07-11T10:18:43.167

您可以使用多态性并定义多个版本，一个接受`int`一个`short`并抛出异常或导致断言失败，或隐藏构造函数：

```
struct MyInt2{
    int v;
    MyInt2(char vv){v=vv;}
    MyInt2(short s) { throw "short"; } /* exception, runtime error */
    MyInt2(){}
    private:
    MyInt2(int v) { } /* hidden, compile time error */
}; 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-07-11T10:42:01.833

您想`char`隐式转换为`MyInt2`which then to `MyInt`。但是语言规范不允许二级转换。

如果您想进行一级*隐式*转换，那么 C++11 可以帮助您。

在 C++11 中，您可以使用`delete`构造函数`int`，允许使用的构造函数`char`为：

```
struct MyInt{
    int v;

    MyInt(char vv) : v(vv) {} //use mem-initialization list

    MyInt(int) = delete;  //VALID only in C++11
}; 
```

注意*删除*的构造函数`int`，它的意思是：

```
MyInt m1(10); //error - can't accept int!

MyInt m2((char)10); //okay - can accept char! 
```

见[在线演示](http://ideone.com/8OYfj)

实际上，您可以使用`delete`所有构造函数，但其​​中一个`char`为：

```
struct MyInt{
    //..
    MyInt(char vv); //ALLOW

    template<typename T>
    MyInt(T) = delete;  //DELETED the rest!
}; 
```

[演示](http://ideone.com/OykxF)

学习更多关于 ：

*   [显式删除特殊成员函数](http://en.wikipedia.org/wiki/C%2B%2B11#Explicitly_defaulted_and_deleted_special_member_functions)

希望有帮助。

# c# - 如何删除包含在 C# 中括号内的字符串的一部分？

> ID：11430456
> 
> 赞同：0
> 
> 时间：2012-07-11T10:16:26.790
> 
> 标签：c#, string

> **可能重复：**
> [如何使用 .NET 提取位于两个（括号）之间的文本字符串？](https://stackoverflow.com/questions/378415/how-do-i-extract-a-string-of-text-that-lies-between-two-brackets-using-net)

任何人都可以帮助删除括在括号中的字符串的一部分吗？

例如，我有一个从 html/xml 解析出来的字符串，所以一些注释保留在字符串中，如下所示，

```
"hello <!-- this is not meant to be here --> world, please help me" 
```

我想删除整个评论包括`<!--, words, and -->`，并留下“你好世界，请帮助我”

谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-11T10:21:14.793

使用正则表达式；

```
 string x ="hello <!-- this is not meant to be here --> world, please help me";
 string y = Regex.Replace(x, "<!--.*?-->", ""); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-11T10:26:35.527

```
string text = "hello <!-- this is not meant to be here --> world, please help me";

int start = text.IndexOf("<!--");
int end = text.IndexOf("-->") - "-->".Length;

string cleanText = text.Remove(start, end); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-11T10:20:08.753

使用正则表达式。

```
using System;
using System.Text.RegularExpressions;

namespace ConsoleApplication1
{
    class Program
    {
        static void Main(string[] args)
        {
            var regex = new Regex("[<][^<]*[>]"); // or "[<]!--[^<]*--[>]"
            var input = "hello <!-- this is not meant to be here --> world, please help me";
            var output = regex.Replace(input, String.Empty); // hello  world, please help me
        }
    }
} 
```

这个正则表达式模式 - `[<][^<]*[>]`- 意味着：

*   开方括号 - [<]

*   然后任何数量 (*) 的字符不是左方括号 - [^<]

*   最后，结束方括号 - [>]

`regex.Replace(input, String.Empty);`- 这意味着：用空字符串替换与上述模式匹配的所有子字符串。

# javascript - 覆盖 hashchange 事件，有可能吗？

> ID：11430459
> 
> 赞同：1
> 
> 时间：2012-07-11T10:16:34.993
> 
> 标签：javascript

我有一个包含 3 个部分的网络应用程序。每当用户完成一个部分时，下一个部分就会滑入（而不是简单地出现）到视图中。我用backbone.js 的路由来做这个，所以散列片段。我想要的是启用历史记录，因此如果用户按下后退按钮，它将滑回上一部分。我尝试覆盖 jQuery [hashchange plugin](http://benalman.com/projects/jquery-hashchange-plugin/)中的 hashchange 事件，但没有奏效。有任何想法吗？

```
$(window).hashchange(function(e) {  
    e.preventDefault();             
    router.navigate(window.location.hash); // The router invokes the function that slides the appropriate section into view
}); 
```

# svn - 颠覆验证

> ID：11430463
> 
> 赞同：0
> 
> 时间：2012-07-11T10:16:49.557
> 
> 标签：svn, svn-hooks

我们使用颠覆作为源代码控制解决方案；但是，在签入文件时提供评论时，我的几个队友并不是很忠实。

我想进行一些验证，例如...

A. 注释必须包含至少指定数量的字符。B. 签入评论中必须有几个字。C. 文件名中的空格被拒绝。

有没有办法这样做？我尝试寻找解决方案，但似乎进展不顺利......

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-11T10:20:03.403

您可以使用[**预提交挂钩**](http://svnbook.red-bean.com/en/1.1/ch05s02.html)来检查提交是否附带评论以及更改或添加了哪些文件。

预提交挂钩脚本获取要更改的存储库和*事务*标识符。这两个都可以用于[`svnlook`](http://svnbook.red-bean.com/en/1.1/ch09s03.html)：

```
svnlook log /path/to/repo --transaction <txid> 
```

这将回显提交消息。

# macos - 在 Mac 上安装 Silverlight OOB，下载最新的 XAP

> ID：11430471
> 
> 赞同：1
> 
> 时间：2012-07-11T10:17:22.553
> 
> 标签：macos, installation, silverlight-oob

我按照本指南在 Mac 上为 OOB Silverlight 应用程序创建了离线安装：http: [//sharppdf-sl.sourceforge.net/offlineoob.html](http://sharppdf-sl.sourceforge.net/offlineoob.html)

它使用苹果`Package Manager`。在这里，您必须安装 Silverlight OOB 应用程序，然后使用一些已安装的数据来创建一个包。

我想知道，是否可以创建一个在安装时下载最新xap 的安装程序，即通过指定可以下载最新xap 的URL。

有没有人已经对这种方法有任何经验，或者有什么想法可以引导我走向正确的方向？

提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-16T06:42:24.570

好吧，我现在的方法是在 silverlight 应用程序中包含一个自动更新程序，然后使用问题中提到的指南创建一个安装包，并将更新留给应用程序本身。所以，我的 Mac-Installation 很可能不会安装最新的 xap，但会立即更新。

据我所知，如果不编写自定义安装程序，就无法在安装过程中自动下载最新的 xap。在安装 OOB Silverlight 应用程序的“标准”方式期间，会自动生成一些其他文件，这些文件必须包含在包管理器中。这整个事情不是它的预期方式，但它现在有效。

我只会在（或即使）我迁移到较新的 Silverlight 版本时更新我的​​安装包，因为我的安装包本身也包含 Silverlight。

长话短说：将更新留给应用程序本身，并使用可以自行更新的应用程序创建一个安装包。

# c# - C#等价的java代码

> ID：11430476
> 
> 赞同：1
> 
> 时间：2012-07-11T10:17:30.323
> 
> 标签：c#, java

这个 C# 代码在 Java 中的等价物是什么？

```
string receivedData = …;
string splittedValues = receivedData.Split("&", StringSplitOptions.RemoveEmptyEntries); 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-11T10:18:34.183

`final String[] splittedValues = receivedData.replaceFirst("^&+","").split("&+");`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-11T10:32:12.663

对于上面的特定代码，您可以先：

*   删除分隔符的前导/尾随标记：`.replaceAll("(^&+|&+$)", "")`
*   根据分隔符拆分字符串：`.split("&+")`

如果没有第一步清理，空字符串将成为拆分字符串的结果`"&&sdfds"`（前导分隔符）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-11T10:36:51.607

与[番石榴](https://code.google.com/p/guava-libraries/)：

```
Iterable<String> splitStrings = 
  Splitter.on('&').omitEmptyStrings().split(string); 
```

（披露：我为 Guava 做出了贡献。）

# data-distribution-service - 在开放拼接 DDS 中发布文件

> ID：11430482
> 
> 赞同：2
> 
> 时间：2012-07-11T10:17:55.360
> 
> 标签：data-distribution-service

我已经成功地创建了具有原始类型的发布者和订阅者。现在我在尝试将文件（如 xml、txt、视频、音频等）发布到 DDS 时遇到问题。我不知道如何指定 IDL 文件中的类型以及如何将整个文件发布到 DDS（以及如何在订阅者端接收文件）。

还有一个问题：“在 DDS 中发布是否有任何内存限制？”

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-12T01:37:11.597

您可以通过多种途径使用 DDS 分发文件。最直接（但不一定是最好的）是使用八位字节（字节）序列来捕获文件的内容。这可以通过这样的 IDL 定义来实现：

```
const long MAX_NAME_LEN = 128;
const long MAX_FILE_SIZE = 100000;

typedef string<MAX_NAME_LEN> NameType;
typedef sequence<octet,MAX_FILE_SIZE> BinaryContentsType;

struct BinaryFile {
    NameType name; //@key
    BinaryContentsType contents;
};
#pragma keylist BinaryFile name 
```

由于您的问题不是特定于 OpenSplice DDS，而是可以应用于任何 DDS 实现，因此我包含了用于定义 key 属性的语法，以便它可以与多个实现一起使用。

在您的应用程序中，您必须实例化类型并填充成员的值。这看起来像

```
BinaryFile instance = new BinaryFile();
instance.name = "SomeFileName";
// fill instance.contents by reading file into array of bytes. 
```

该`contents`属性将是一个字节数组。内容填写完毕后，只需调用`write`a 上的方法`BinaryFileDataWriter`，与其他示例类似。

除了配置的共享内存的限制之外，以这种方式分发的文件的大小没有真正的限制。但是，最好对大小施加限制，这就是`BinaryContentsType`类型中的序列有界的原因。

你没有提到你使用的是什么编程语言，所以很难给出任何编码细节。但是由于您提到您确实开始使用基本类型，因此应该很容易弄清楚如何发布该`BinaryFileType`类型，特别是如果您查看提供的文档和示例并将其应用于您自己的类型。

作为旁注，您确定要分发完整的文件吗？根据情况，更好的方法可能是分析文件内容的结构并创建与之匹配的数据模型。您将在发布者端读取文件并将其转换为有意义的数据项，而不是 blob。这样，订阅者可以利用更高级的数据管理功能，例如通过仅订阅可用主题的子集或使用基于内容的过滤器来订阅内容的子集。不过，这是否有意义完全取决于您的用例。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-13T01:41:52.347

但真正的问题是——为什么？通过 DCPS 传输不透明数据是一回事，但整个文件呢？不是有几个更适合这个的协议吗？您是否将大量文件保存在内存中，以至于您认为文件传输类似于 IPC？我的回答是寻找 FTP、NFS、SSHFS、SMB 或 HTTP。所有这些都可以与您的 DDS 流量和平共存，您可能会发现使用 DDS 进行文件传输没有任何**净收益。**

根据问题，Reinier 的回答是正确的。（顺便说一句，您真的应该考虑接受一些答案——您有两个出色的答案！您可能不会让任何人回答您的下一个问题）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-11-12T16:35:32.273

One benefit that DDS can bring to sending files is for the case where you want to send a file to multiple recipients. Through the use of a reliable protocol built on top of UDP with Multicast enabled, you can then send the file to several recipients at the same time without incurring the bandwidth usage to perform multiple file transfers.

# php - 在 PHP 中解码来自数据库的简单文本

> ID：11430485
> 
> 赞同：0
> 
> 时间：2012-07-11T10:18:09.870
> 
> 标签：php, decode

我在我的数据库中有一个简单的文本，带有这样的字符串：“Online il nuovo sito web di QINT'X: rinnovato nella grafica presenta una struttura più lineare e facilmente fruibile rispetto al prente, a tutto vantaggio della navigazione”

我已经在 PHP 中进行了查询以检索数据，但是当我获取字符串时不会解码字符'ù'。为什么？这是我的代码（我隐藏了查询的一部分，因为我认为问题出在 utf8_decode 中）：

```
echo'<span class="txt_page" style="text-align:justify">'.utf8_decode(htmlentities(substr($news['descrizione_it'],0,200))).'</span><br />'; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-11T10:20:58.993

您应该在连接数据库时设置编码。

```
SET NAMES 'utf8' 
```

# javascript - 转换为 CoffeeScript 后调用普通的 JS 函数

> ID：11430492
> 
> 赞同：3
> 
> 时间：2012-07-11T10:18:37.247
> 
> 标签：javascript, coffeescript

在我的 Rails 应用程序中，我有一些普通的旧 JS：

```
 function reorder(divid,url) {
        jQuery(divid).sortable({
          axis: 'y',
          dropOnEmpty: false,
          handle: '.drag',
          cursor: 'crosshair',
          items: 'li',
          opacity: 0.4,
          scroll: true,
          update: function(){
            jQuery.ajax({
              type: 'post',
              data: jQuery(divid).sortable('serialize'),
              dataType: 'script',
              url: url)
          }
        });
    } 
```

当我打电话时它有效：

```
 reorder("#pages","<%= changeorder_pages_path %>"); 
```

所以我决定将我的函数转换为 CoffeeScript，它给了我这个：

```
(function() {
  var reorder;

  reorder = function(divid, url) {
    return jQuery("#pages").sortable({
      axis: "y",
      dropOnEmpty: false,
      handle: ".drag",
      cursor: "crosshair",
      items: "li",
      opacity: 0.4,
      scroll: true,
      update: function() {
        return jQuery.ajax({
          type: "post",
          data: jQuery("#pages").sortable("serialize"),
          dataType: "script",
          complete: function(request) {
            return jQuery("#pGESs").effect("highlight");
          },
          url: "/pages/changeorder"
        });
      }
    });
  };

}).call(this); 
```

但我的电话不再起作用 - 我收到 Firebug 错误：

```
reorder is not defined 
```

所以对于我的问题 - 我现在如何调用该函数，它是 CoffeeScripted？

我读过这个：[Calling a function by its name](https://stackoverflow.com/questions/6506112/coffeescript-call-a-function-by-its-name)

但我不知道他们在说什么。我从未使用过 global=this，也不知道它的作用或为什么要使用它。

我也读过这个：[http ://elegantcode.com/2011/06/30/exploring-coffeescript-part-2-variables-and-functions/](http://elegantcode.com/2011/06/30/exploring-coffeescript-part-2-variables-and-functions/)

还有这个：[http ://www.informit.com/articles/article.aspx?p=1834699](http://www.informit.com/articles/article.aspx?p=1834699)

我意识到 CoffeeScript 正在保护我免受全局变量的影响并使我的代码变得更好——但我找不到关于如何调用函数的解释。

我玩过 CoffeeScript 网站并玩过 cube 函数——所以我应该能够调用我认为的函数名称。

我问这个问题是因为我的知识存在差距 - 任何填补这一差距的帮助将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-11T10:23:31.493

CoffeeScript 默认情况下不创建全局变量，看起来好像您正在尝试访问`reorder`定义它的文件之外的文件。

但是，您可以通过编写显式地将某些内容放入全局命名空间中

```
window.reorder = reorder 
```

# php - 将 MySQL 表中的数据保存到另一个表中

> ID：11430497
> 
> 赞同：1
> 
> 时间：2012-07-11T10:18:59.263
> 
> 标签：php, mysql

我在这里有一个查询，从 MySQL 数据库中提取数据。它工作得很好。但是我想做的是将所有从模块表中提取的数据保存到另一个表中。请问我该怎么办？任何帮助，将不胜感激。谢谢。

```
$coremoduleY1Query = "SELECT ID,title,credits FROM module WHERE ID = 'CS1101'
            UNION SELECT ID,title,credits FROM module WHERE ID = 'CS1105'
            UNION SELECT ID,title,credits FROM module WHERE ID = 'CS1106'
            UNION SELECT ID,title,credits FROM module WHERE ID = 'CS1107'
            UNION SELECT ID,title,credits FROM module WHERE ID = 'CS1108'
            UNION SELECT ID,title,credits FROM module WHERE ID = 'CS1109'";                                                                           

        $coremoduleY1Result = mysql_query($coremoduleY1Query);
        echo "<B> Core Modules </B>";                      
        while ($coremoduleRow = mysql_fetch_array($coremoduleY1Result)) {

                 $id = htmlentities($coremoduleRow['ID']);
                 $title = htmlentities($coremoduleRow['title']);
                 $credits = $coremoduleRow['credits'];

                 echo "<ul>" . $id . " " . $title .  " " . $credits . "</ul>";
       }   
       echo "<br />"; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-11T10:21:55.060

一方面，您为什么不这样查询：

```
SELECT ID,title,credits FROM module WHERE ID IN ('CS1101','CS1105','CS1106','CS1107','CS1108','CS1109') 
```

其次，您可以在 MySQL 中完全做您想做的事情：

```
INSERT INTO other_table (ID,title,credits)
SELECT ID,title,credits FROM module WHERE ID IN ('CS1101','CS1105','CS1106','CS1107','CS1108','CS1109') 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-11T10:22:54.640

这个问题在我眼里有点奇怪。如果我没有完全弄错，您所要求的只是：“使用 INSERT 语句”。

您可能希望将其缩短为一条语句： INSERT INTO ... (col1,col2,...) (SELECT ... FROM module);

# mysql - mysql远程连接问题

> ID：11430499
> 
> 赞同：0
> 
> 时间：2012-07-11T10:19:11.483
> 
> 标签：mysql, database, localhost, remote-access

我在 linux 系统上安装了 MySQL。我正在运行 Debian。我可以通过本地系统上的命令以及远程访问具有本地 IP 地址的 mysql

```
./mysql -h 192.168.1.151 -u root -pabcd 
```

. 现在我添加了一个主机（192.168.1.152），我无法使用AddedHost从其他机器远程连接，我已将所有权限授予此主机

```
grant all on *.* to 'root'@'192.168.1.152' identified by 'abcd'; 
```

但我无法在本地和远程连接。执行命令时出现错误

```
./mysql -h 192.168.1.152 -u root -pabcd 
```

错误 2003 (hy000) 无法连接到 '192.168.1.152' 上的 mysql 服务器 (111)

请帮我解决这个问题。谢谢拉胡尔

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-11T10:24:02.017

这个错误意味着，[从这里（FAQ）-](http://www.webyog.com/faq/content/23/15/en/error-no-2003-can_t-connect.html)

> *   指定主机上没有运行 MySQL 服务器
>     
>     
> *   不允许使用 TCP-IP 连接到 MySQL 服务器。检查 MySQL 配置文件中的“skip-networking”设置（Windows 上的 my.ini，Unix/Linux 上的 my.cnf）。它应该像“#skip-networking”一样被注释掉。如果没有注释掉，则执行此操作并重新启动 MySQL 服务器以使更改生效。SQLyog 需要使用 TCP-IP 进行连接。
>     
>     
> *   一些网络问题会阻止连接。这可能是网络配置错误或防火墙问题。我们有时会遇到一些防火墙（尤其是 ZoneAlarm）会阻止 TCP-IP 连接，即使它声称已禁用。大多数情况下，卸载和重新安装防火墙会有所帮助。
>     
>     
> *   当尝试连接到 ISP 的 MySQL 服务器时，此错误消息通常表明与 MySQL 的直接连接已被阻止。然后，您必须使用 HTTP 隧道或 SSH 隧道进行连接。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-11T17:55:04.327

您可能没有在您的 IP 上为您的用户授予权限。本地主机通常是唯一被授予权限的登录名。

# node.js - SignalR 还是 NodeJS/Socket.IO？

> ID：11430500
> 
> 赞同：6
> 
> 时间：2012-07-11T10:19:27.620
> 
> 标签：node.js, compare, socket.io, signalr

我想用 C# 和 MVC3 开发一个实时应用程序。我在几个项目中使用了 Socket.IO，但现在，我看到了一些关于 SignalR 的好消息，有些人说 SignalR 可能是 Socket.IO 的一个很好的替代品......

我想知道 SingalR 是否有任何问题或错误，这是从 Socket.IO 迁移到 SignalR 的好选择吗？

提前致谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-11T10:24:37.527

在您的情况下使用 SignalR 的好处是它是一个完整的客户端和服务器端解决方案，客户端上有 JS，后端有 ASP.NET。

但是您可以看到它们是一些未解决的问题：[https ://github.com/SignalR/SignalR/issues](https://github.com/SignalR/SignalR/issues)

# c++ - 以十六进制打印数据结构值

> ID：11430502
> 
> 赞同：0
> 
> 时间：2012-07-11T10:19:37.303
> 
> 标签：c++

```
typedef struct AbcStruct{

   short        LD;
   short        EL;
   short        CL;        
   AbcStruct( short b, short res = 0, short lr = 1000): LD( b ), EL(res), CL( lr ) { }
};

int main () 
{

    struct AbcStruct A2(200, 100, 100);

    char *string_ptr = (char *)&A2;
    kk = sizeof(AbcStruct);

    while(kk--)
        printf(" %x ", *string_ptr++);
} 
```

输出（十六进制的 AbcStruct）：

```
ffffffc8  0  64  0  64  0 
```

我想知道为什么第一个元素的输出包含 4 个字节：`ffffffc8`当我期待它只会 print `c8`。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-11T10:37:04.047

这样做是因为您打印的 char 的第一位是`1`，因此 char 被解释为负数。当您使用默认`%x`格式打印时，要打印的值被解释为`int`（远大于`char`）。因此，符号[被复制](http://en.wikipedia.org/wiki/Sign_extension)到所有其他位置，让您在输出中看到那些`f`s。

一种解决方法是使用打印`%hhx`（您告诉`printf`您正在打印`unsigned char`值）。

```
printf(" %hhx ", *string_ptr++); 
```

另一个解决方法是更改​​要成为的`string_ptr`类型`unsigned char`

```
unsigned char *string_ptr = (char *)&A2; 
```

或者，您可以将它们组合起来。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-11T10:27:48.943

您是在告诉`printf()`将从指向的地址返回的内容`string_ptr`视为一个`unsigned int`（我猜在您的系统上是 32 位长）而不是一个`unsigned char`.

尝试这个：

```
unsigned char *string_ptr = (unsigned char *)&A2;
kk = sizeof(AbcStruct);
while(kk--)
{
    unsigned char c = *string_ptr++;
    printf(" %x ", (unsigned)c);
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-11T10:33:55.483

使用 printf 格式说明符中的宽度选项来打印任意数量的地址字符。例如，在这里您可以使用 %2X 作为格式说明符。

# android - 从类名获取实例

> ID：11430504
> 
> 赞同：0
> 
> 时间：2012-07-11T10:19:41.827
> 
> 标签：android, class, instance

我正在尝试达到当前的活动。下面的代码来自其他示例，编辑后具有当前活动的正确名称。但是我如何从那里得到实际的实例呢？

```
 ActivityManager am = (ActivityManager) this.getSystemService(ACTIVITY_SERVICE);

     // get the info from the currently running task
     List< ActivityManager.RunningTaskInfo > taskInfo = am.getRunningTasks(1); 

     ComponentName componentInfo = taskInfo.get(0).topActivity;

         // this is the class-name
     componentInfo.getClassName(); 
```

谢谢，马库斯

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-02T07:21:32.537

您可能希望将 Activity 的实例存储在 myApplication 中。然后，您可以在每次 Activity 到达 onResume() 时更新当前活动的 Activity。但正如 Rupert Rawnsley 所说，最好将您的方法放在其他地方（服务、单例、应用程序）。

此外，如果您计划在帮助类中使用 Activity，您可能只需要一个上下文。在这种情况下，您也可以在许多情况下使用 Applications 上下文。否则，您可能需要考虑重组代码。

# php - round() 返回不同的值

> ID：11430506
> 
> 赞同：1
> 
> 时间：2012-07-11T10:19:53.357
> 
> 标签：php, mysql, postgresql

我在 mysql DB 中有一个`rating`数据类型为 的字段`float(2,1)`。一行包含一个值`0.5`，但是当我使用

`SELECT round(rating) FROM table WHERE ...`给出值 0 而不是 1。

但`SELECT round(0.5)`给出了价值`1`（对于 Postgresql 也是）。

此外，PHP 总是`1`为`echo round(0.5);`

我真的很困惑。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-11T10:35:44.813

将您的数据类型从 float(2,1) 更改为 decimal(2,1) 它可能对您有用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-11T10:22:20.040

尝试`SELECT ROUND(rating)`代替`SELECT ROUND('rating')`.

对字符串进行四舍五入可能会给您带来奇怪的结果。您可能在列值之后，它不应该用`'`.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-11T10:24:01.557

和

```
SELECT round('rating') FROM table WHERE ... 
```

你正在四舍五入字符串 'rating' ，这就是为什么它给你零

试试这个

```
SELECT round(rating) FROM table WHERE ... 
```

# android - 使用 Scala 合并 dex 文件时运行 Android APK 文件的问题

> ID：11430515
> 
> 赞同：5
> 
> 时间：2012-07-11T10:20:10.593
> 
> 标签：android, scala, merge, apk, dex

我一直在尝试使用 Scala 2.9.1 和 SBT 0.13 以及 Android-Plugin 创建 Android 应用程序。
但是，运行 ProGuard 可能会非常缓慢。
因此，相反，当我自上次构建以来没有使用任何新的类/方法时，我只是试图将 classes.dex 与我自己的 dexed android-app 类（诸如此类`MainActivity.scala`）合并。

我得到的问题（在 Android 4.0.x 上）是合并没有任何错误，但是当我尝试运行应用程序时，我得到了这个`"Unfortunately, MyAndroidApp has stopped"`.

这是 logcat 日志：

```
 EmbeddedLogger  E  App crashed! Package: com.my.app v0 (0.1)
  300         EmbeddedLogger  E  Application Label: MyAndroidApp
 24137        AndroidRuntime  E  FATAL EXCEPTION: main
 24137        AndroidRuntime  E  java.lang.RuntimeException: Unable to instantiate activity ComponentInfo{com.my.app/com.my.app.MainActivity}: java.lang.ClassNotFoundException: com.my.app.MainActivity
 24137        AndroidRuntime  E   at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2118)
 24137        AndroidRuntime  E   at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2237)
 24137        AndroidRuntime  E   at android.app.ActivityThread.access$600(ActivityThread.java:139)
 24137        AndroidRuntime  E   at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1262)
 24137        AndroidRuntime  E   at android.os.Handler.dispatchMessage(Handler.java:99)
 24137        AndroidRuntime  E   at android.os.Looper.loop(Looper.java:156)
 24137        AndroidRuntime  E   at android.app.ActivityThread.main(ActivityThread.java:5005)
 24137        AndroidRuntime  E   at java.lang.reflect.Method.invokeNative(Native Method)
 24137        AndroidRuntime  E   at java.lang.reflect.Method.invoke(Method.java:511)
 24137        AndroidRuntime  E   at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:784)
 24137        AndroidRuntime  E   at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:551)
 24137        AndroidRuntime  E   at dalvik.system.NativeStart.main(Native Method)
 24137        AndroidRuntime  E  Caused by: java.lang.ClassNotFoundException: com.my.app.MainActivity
 24137        AndroidRuntime  E   at dalvik.system.BaseDexClassLoader.findClass(BaseDexClassLoader.java:61)
 24137        AndroidRuntime  E   at java.lang.ClassLoader.loadClass(ClassLoader.java:501)
 24137        AndroidRuntime  E   at java.lang.ClassLoader.loadClass(ClassLoader.java:461)
 24137        AndroidRuntime  E   at android.app.Instrumentation.newActivity(Instrumentation.java:1039)
 24137        AndroidRuntime  E   at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2109)
 24137        AndroidRuntime  E   ... 11 more
  300        ActivityManager  W    Force finishing activity com.my.app/.MainActivity
  5864        OpenGLRenderer  D  Flushing caches (mode 1)
  300           ViewRootImpl  D  @@@- disable SystemServer HW acceleration 
```

我已经手动打开了生成的 apk 和其中的 classes.dex，通过包导航并在那里找到了 MainActivity。

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-12T14:13:47.977

好的，我想出了什么问题。

根据定义，每个 Scala 类都实现`scala.ScalaObject`.
我的 dexed`com.my.app.MainActivity`也实现了`scala.ScalaObject`.

但是，由于我没有将它`scala.ScalaObject`作为我以前`classes.dex`文件的一部分，并且我没有将它包含在新文件中，因此 DVM 找不到带有`public class com.my.app.MyAndroidApp extends android.app.Activity implements com.my.app.TypedActivity with scala.ScalaObject`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-11T17:35:01.020

我最好的猜测是 dalvik 出于某种原因拒绝了这门课。您想在安装应用程序时查看 logcat，并查找来自 dalvik 的任何消息。它将打印一个关于它拒绝什么类以及为什么拒绝的简短说明。

# c# - 从查询字符串分配 Xsl 值

> ID：11430516
> 
> 赞同：-1
> 
> 时间：2012-07-11T10:20:33.727
> 
> 标签：c#, asp.net, visual-studio-2010, xslt

如何从查询字符串中分配值。

```
 <xsl:param name="EntityName"><xsl:value-of select="/root/Runtime/EntityName" /></xsl:param>

       <xsl:param name="FilterRk"><xsl:value-of select="/root/Runtime/EntityName" /></xsl:param> 
```

第一个代码有效，但第二个无效

我能为这种情况做些什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-11T10:29:57.963

XSLT 不能直接与查询字符串对话，因为它不知道运行它的 URL。任何参数都必须显式输入。

如何做到这一点取决于您的环境。在您的情况下，C#/ASP。例如，在 PHP 中，这是通过[`XSLTProcessor::setParameter()`](http://www.nusphere.com/kb/phpmanual/function.xsl-xsltprocessor-set-parameter.htm). 请注意，您的 XSL 必须准备好接收该变量。

顺便说一句，使用您当前的代码，不需要`value-of`inside `xsl:param`，您只需使用`xsl:param`'s`select`属性：

```
<xsl:param name='EntityName' select='/root/Runtime/EntityName' /> 
```

# timer - 信号R开销

> ID：11430517
> 
> 赞同：3
> 
> 时间：2012-07-11T10:20:34.933
> 
> 标签：timer, signalr

我有一个客户端，它通过定期（每 4 秒）发送它的新位置来更新它在服务器上的位置。我还有一个客户端，它通过定期轮询服务器（每 5 秒）并获取最新位置来跟踪以前的移动设备。

这种通信应该通过 SignalR（用于发送最新位置）还是使用计时器进行？我这么说是因为 SignalR 有一些开销，会产生更大的请求大小，这可能会非常昂贵。

谢谢你，瑞安

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-07-17T22:47:16.610

# HTTP communication win

Right now, based on what I understand of your description, you're doing multiple update POSTs and then listeners are using polling GET requests. These have the overhead of separate HTTP requests with headers and, if not using keep-alive or exceeding the keep-alive timeout, [re-]establishing a TCP connection.

Using SignalR you will instead be able to, *at bare minimum*, improve the polling GET side of things because SignalR can use *long* polling which will funnel back multiple responses over a single HTTP GET request and do it in "real-time" rather than always having a hard 4sec lag time. From there you can work your way up through Server Sent Events (SSE) to full blown web sockets depending on the client and server capabilities. Any of these approaches should be more efficient than your currently described implementation.

# Request size win

There's only a small "envelope" around each SignalR message. Compared to HTTP headers your browser clients are most certainly having to send with each update POST and polling GET right now I think SignalR will win this easily. Obviously the payload of the message would be the same JSON in either case, so that's a wash.

# Programming model win

Most importantly, I think, using SignalR gives you a programming model that abstracts you from what exact underlying techniques end up being used and presents you with a consistent real-time communication API rather than having to ultimately worry about thunking down to a disconnected request/response model.

# java - Spring WS 网络服务。使用 SAAJ 向响应添加附件 - 端点没有适配器

> ID：11430527
> 
> 赞同：3
> 
> 时间：2012-07-11T10:21:07.403
> 
> 标签：java, web-services, spring, soap, spring-ws

我真的很难让 Spring-WS 返回带有附件的响应。我已经设法让 MTOM 版本正常工作，但这对客户端有一些先决条件，因为我认为客户端也必须启用 MTOM（如果这不正确，请纠正我）。

我现在要做的是使用标准 SOAP 和使用 SAAJ 和 Spring-WS 的附件实现。

为此，我实现了一个端点，它只是将来自本地文件系统的图像附加到响应中。

```
@Endpoint
public class TestEndPoint {

private SaajSoapMessageFactory saajMessageFactory;

@PayloadRoot(namespace="http://ws.mypackage.com", localPart="downloadMessageRequestSaaj")
    @ResponsePayload
    public JAXBElement<DownloadResponseSaajType> invoke(@RequestPayload DownloadMessageRequestSaaj req, MessageContext context ) throws Exception  {

        DownloadResponseSaajType response = new DownloadResponseSaajType();
        DownloadResponseSaajType.PayLoad payload = new DownloadResponseSaajType.PayLoad();  

        DataHandler handler = new javax.activation.DataHandler(new FileDataSource("c:\\temp\\maven-feather.png"));

            SaajSoapMessage message = saajMessageFactory.createWebServiceMessage();
            message.addAttachment("picture", handler);

            context.setResponse(message);

            payload.setMessagePayLoad(handler);

            return objectFactory.createDownloadMessageResponseSaaj(response);  

    }

    public void setSaajMessageFactory(SaajSoapMessageFactory saajMessageFactory){
        this.saajMessageFactory = saajMessageFactory;
    }

    public SaajSoapMessageFactory getSaajMessageFactory(){
        return saajMessageFactory;
    }
} 
```

Saaj 属性是依赖注入的，如下所示：

```
<sws:annotation-driven/>

<bean id="soapMessageFactory" class="javax.xml.soap.MessageFactory" factory-method="newInstance" />
<bean id="saajMessageFactory" class="org.springframework.ws.soap.saaj.SaajSoapMessageFactory">
        <constructor-arg ref="soapMessageFactory" />
</bean>

<bean id="myService" class="com.mypackage.TestEndPoint">
    <property name="saajMessageFactory" ref="saajMessageFactory" />
</bean> 
```

当我尝试调用上述服务时，出现以下错误：

```
<SOAP-ENV:Envelope xmlns:SOAP-ENV="http://schemas.xmlsoap.org/soap/envelope/">
   <SOAP-ENV:Header/>
   <SOAP-ENV:Body>
      <SOAP-ENV:Fault>
         <faultcode>SOAP-ENV:Server</faultcode>
         <faultstring xml:lang="en">No adapter for endpoint [public javax.xml.bind.JAXBElement&lt;com.mypackage.ws.DownloadResponseSaajType> com.mypackage.TestEndPoint.invoke(com.mypackage.ws.DownloadMessageRequestSaaj,org.springframework.ws.context.MessageContext) throws java.lang.Exception]: Is your endpoint annotated with @Endpoint, or does it implement a supported interface like MessageHandler or PayloadEndpoint?</faultstring>
      </SOAP-ENV:Fault>
   </SOAP-ENV:Body>
</SOAP-ENV:Envelope> 
```

## 7月13日编辑

我今天注意到我更改了方法签名以删除 MessageContext 参数，如下所示然后我没有收到该错误：

```
public JAXBElement<DownloadResponseSaajType> invoke(@RequestPayload DownloadMessageRequestSaaj req) 
```

然而问题是我需要访问 MessageContext 才能添加附件。可能是我的配置在某个地方有问题吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-13T18:56:26.013

我相信无论哪种情况，您的客户都需要了解附件，因此我建议坚持使用 mtom（因为它正在成为标准）

检查您正在使用哪个版本的 spring-ws 以及您正在使用哪个 maven group-id。我遇到了同样的错误，因为最近添加了这个功能（我认为？）。

尝试此条目并删除您制作的任何其他 spring-ws 导入

```
 <dependency>
        <groupId>org.springframework.ws</groupId>
        <artifactId>spring-ws-core</artifactId>
        <version>2.0.2.RELEASE</version>
    </dependency> 
```

# chat - 在cloudfoundry中延长连接超过30秒

> ID：11430528
> 
> 赞同：0
> 
> 时间：2012-07-11T10:21:11.100
> 
> 标签：chat, cloud-foundry

我正在尝试用 java 开发一个聊天应用程序，并部署了一个使用 RabbitMQ 和 Comet 的示例应用程序。我已经能够从有界的 RabbitMQ 服务发送和接收消息。

当我在没有待传递的消息时尝试将消息汇集到队列中时，就会出现问题。

我没有等待新消息并保持连接打开，而是收到 504 错误代码。

我认为这是由于 Cloud Foundry 条件要求必须在 30 秒内响应请求。

由于我想保持连接打开，直到我有消息要传递给客户端，有什么办法可以克服这个问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-11T17:55:40.373

CloudFoundry.com 路由器有 30 秒超时，这会导致 504 错误。长连接可能会在 30 秒的滚动窗口中保持打开状态，这意味着应用程序必须每 30 秒发送一次数据以防止发生 504 错误。例如，这是一个简单的 node.js 应用程序，它每 25 秒向客户端发送一次响应，总共 75 秒：

```
var http = require('http');
var host = process.env.VCAP_APP_HOST || "127.0.0.1";
var port = process.env.VCAP_APP_PORT || 4567;

http.createServer(function (req, res) {
  setTimeout(function() {
    res.write('1');
    setTimeout(function() {
      res.write('2');
      setTimeout(function() {
        res.write('3');
        res.end();
      }, 25000);
    }, 25000);
  }, 25000);

}).listen(port,host)

console.log('Server running at http://' + host + ':' + port); 
```

# asp.net - 网格视图内容点击和选择

> ID：11430533
> 
> 赞同：0
> 
> 时间：2012-07-11T10:21:22.213
> 
> 标签：asp.net

我已经做了一个`GridView`并启用了`selection`它的属性。现在`select`出现在 gridview 中的每一行旁边。我想删除`select text/tag`和选择应该在点击内容时完成。我怎样才能做到这一点？:)

# javascript - 在 JTemplate 中转义字符串

> ID：11430534
> 
> 赞同：1
> 
> 时间：2012-07-11T10:21:35.180
> 
> 标签：javascript, jquery, jtemplates

我有一个看起来像这样的 JTemplate 字符串

```
<a class="add"  href="#" onclick="javascript:myfunction('{$T.Properties.Title}')" > 
```

当我的参数 $T.Properties.Title 是一个包含单引号字符的字符串时，此代码会中断。

我可以在传递参数值时使用双引号字符，但是我的代码会因双引号而中断。

如何转义输入字符串，以便我的代码适用于同时包含单引号和双引号的字符串？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-11T10:39:47.423

创建对象时，您需要使用反斜杠转义引号：

```
Properties = {Title: 'I\'m lovin\' my quotes'}; 
```

**编辑 ：**

根据您的评论：

> 可悲的是，无法控制来源。:( JSON 来自第三方网站

您可以尝试使用`setTemplate(s, [], {filter_params: true});`

根据[文档](http://jtemplates.tpython.com/doc/symbols/Template.html)，它正在使用 escapeHTML - 但我没有尝试过，我不确定它是如何工作的。

看到这个关于转义 HTML 的问题`filter_data`：[jtemplates-html-in-variables](https://stackoverflow.com/questions/1721603/jtemplates-html-in-variables)

或者在收到 JSON 对象后尝试转义引号。我相信您可以使用 PHP `json_encode`- 请参见此处：[json-parse-error-with-double-quotes](https://stackoverflow.com/questions/949604/json-parse-error-with-double-quotes)

此处描述的其他解决方案：[javascript-how-escape-quotes-in-a-var-to-pass-data-through-json](https://stackoverflow.com/questions/4031324/javascript-how-escape-quotes-in-a-var-to-pass-data-through-json)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-22T19:51:49.627

我遇到了同样的问题，最后我所做的是转义了 java 脚本中的引号。

以下是我的代码。

在模板中：

```
$('#content').setParam('getUrl', getUrl); 
```

在 HTML 中；内模板。

```
href="{$P.getUrl($T.RESULTS.URL)}" 
```

JS方法：

```
function(theLink){
  return theLink.replace(/\"/g, "%22");

  //If you want to escape all the characters use the following
  return escape((theLink))
} 
```

干杯..：）

# jquery - 字符限制在更新面板中不起作用

> ID：11430541
> 
> 赞同：1
> 
> 时间：2012-07-11T10:21:49.117
> 
> 标签：jquery, asp.net, updatepanel, limit

我正在使用名为[Limit](http://unwrongest.com/projects/limit/)的 Jquery 插件，如下所示

```
 $(document).ready(
    function () {
        $('[id$=Textarea1]').limit('150', '#charsLeft');
    }); 
```

相关的 ASPX 部分，

```
<td align="left" valign="top">
    <textarea id="Textarea1" class ="limit" runat="server" rows="4" cols="30" style="resize: none;
        background-color: #F9E8EC; font-family: 'Times New Roman', Times, serif;" ></textarea>
    <br />
    You have <span id="charsLeft">160</span> chars left.
</td> 
```

以上两个控件都在更新面板内。第一次我可以看到这个限制函数工作正常。但是当更新面板更新跨度显示 160 个字符并且在文本区域上键入时不更新。如何解决这个问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-11T10:43:59.810

问题是更新面板，`document` `ready`玩得不好。更新面板实质上会替换页面上的所有内容，但由于`document`已经存在`ready`，因此永远不会重新触发该事件。

您要做的是将您的`document` `ready`事件移动到一个单独的函数中，然后在文档准备期间以及在更新面板中发生更新时调用它，如下所示：

```
function onDocumentReady()
{
    $('[id$=Textarea1]').limit('150', '#charsLeft');
}

// this will get called on the first load
$(function()
{
    onDocumentReady();
});

// this will get called when an update panel request finishes
var pageRequestManager = Sys.WebForms.PageRequestManager.getInstance(); 
pageRequestManager.add_endRequest(onDocumentReady); 
```

## 或者（未测试）

您可以做的是在更新面板重新加载时触发`ready`事件，您可以尝试以下操作：`document`

```
// this will get called on the first load
$(function()
{
    $('[id$=Textarea1]').limit('150', '#charsLeft');
});

// this will get called when an update panel request finishes, triggering the dom ready
var pageRequestManager = Sys.WebForms.PageRequestManager.getInstance(); 
pageRequestManager.add_endRequest(function()
{
    $(document).trigger('ready');
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-11T10:27:48.547

我认为您必须将跨度留空。jQuery 插件会自己填充它。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-11T10:34:45.910

Damith 我试过你的代码，它对我来说完全没问题。你有什么错误吗？

以下是我正在使用的 HTML 代码，JavaScript 与您所拥有的相同。

```
<form id="form1" runat="server">
 <asp:ScriptManager runat="server" />
 <asp:UpdatePanel ID="upd1" runat="server">
   <ContentTemplate>    
     <textarea id="Textarea1" class ="limit" runat="server" rows="4" cols="30"      style="resize: none; background-color: #F9E8EC; font-family: 'Times New Roman', Times, serif;" ></textarea>
<br />
 You have <span id="charsLeft">160</span> chars left.
<asp:Button ID="btnTest" runat="server" Text="Test" />
</ContentTemplate> 
```

我希望它有帮助！

# java - Java，“指针”相等和字符串比较

> ID：11430543
> 
> 赞同：4
> 
> 时间：2012-07-11T10:21:53.527
> 
> 标签：java, string, pointers, reference, equality

我的 C 代码使用了大量由静态字符串常量标识的命令。

```
static char* KCmdA = "commandA"
static char* KCmdB = "commandB"
static char* KCmdC = "commandC" 
```

例如，在 CI 中，可以将两个字符串与 strcmp(A, B) 进行比较，但由于我只通过它们的静态字符串标识符引用这些命令，因此只检查指针不等性会更快，因为我知道我的 unknowCMD 只能是指向我的静态字符串之一的指针字符串。

```
switch(unknowCMD)
{
    case KCmdA:
    ...
    case KCmdB:
    ...
} 
```

我猜在Java中相当于strcmp的方法是：

```
unknowCMD.equals(KCmdA) 
```

Java中是否有等效的指针相等？我知道 Java 只使用引用。是否可以在不实际比较字符串的情况下将这些引用用于相等测试？

抱歉，如果这很明显，我已经检查了文档，但没有找到任何明确的答案。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-11T10:24:11.323

如果你比较字符串引用的相等性使用`==`

```
if(str1==str2){

} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-07-11T10:24:33.707

您可以使用`==`，但它既危险又脆弱。

请注意，对于`String`s，首先要做的`equals()`是测试引用的相等性，所以这样做不会买太多。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-07-11T10:31:22.063

我认为您在这里使用静态字符串的方式最好使用枚举。您可以使用 .equals 和 == 来比较它们。你也可以在 switch case 中使用枚举。

# java - 如何找到一个月的第一个和最后一个日期

> ID：11430546
> 
> 赞同：0
> 
> 时间：2012-07-11T10:22:09.867
> 
> 标签：java, php, mysql, sql

如何找到前 2 年一个月中的第一个和最后一个日期。例如，今天是 07-01-2012(mm-dd-yyyy)；我想查找 2011 年 ... 01-01-2011 01-31-2011 02-01-2011 02-28-2011 的数据。类似的东西谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-11T10:29:58.233

您可以使用 php 日期函数来执行此操作。

```
$first = date('Y-m-d', mktime(0, 0, 0, $month, 1, $year));
$last = date('Y-m-t', mktime(0, 0, 0, $month, 1, $year));

$Startyear=2010;
$Endyear=2012;
$monthstart=array();
$monthend=array();
for($i=$Startyear;$i<=$Endyear;$i++){
for($j=1;$j<=12;$j++){
$monthstart[$i][$j]=date('Y-m-d', mktime(0, 0, 0, $j, 1, $i));
$monthend[$i][$j]=date('Y-m-t', mktime(0, 0, 0, $j, 1, $i));
}
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-11T10:24:27.183

```
 select LAST_DAY('2011-01-01') from dual; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-11T10:25:02.690

PHP 的函数`date('t')`可以返回一个月的天数：

```
echo date('t', mktime(1, 1, 1, 2, 1, 1970));
// outputs 28 
```

其次，这个月的第一天永远是`1`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-11T10:56:32.313

我的算法是找出当月的天数。基于此，我可以找到第一天和最后一天。要查找一个月中的天数，我们可以使用拳头法则。仅在 2 月份，我们必须检查闰年

31 天月 (month seq no > 7 ) ?(month seq no + 1)%2 : (month seq no) % 2\. 如果上述等式的结果为真，则为 31 天月，否则为 30 天月。仅对于月份 seqno 2（2 月），我们必须考虑闰年计算。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-11T10:49:42.717

以下是您指定的问题的 java 实现

```
 List<Date> months = new ArrayList<Date>();
    Calendar currentDate = GregorianCalendar.getInstance();
    Calendar today = GregorianCalendar.getInstance();
    int currentYear = currentDate.get(Calendar.YEAR) - 2;
    int noOfMonths = 11 - today.get(Calendar.MONTH);
    SimpleDateFormat format = new SimpleDateFormat("MM-dd-yyyy");
    currentDate.set(Calendar.DATE, 1);
    currentDate.set(Calendar.YEAR, currentYear);

    while (currentYear <= today.get(Calendar.YEAR)) {

        for (int monthCount = 0; monthCount <= noOfMonths; monthCount++) {

            currentDate.set(Calendar.DATE, 1);
            // adding start date
            months.add(currentDate.getTime());
            // processing end date
            currentDate.set(Calendar.DATE,
                    currentDate.getActualMaximum(Calendar.DATE));
            // adding end date
            months.add(currentDate.getTime());

            // goes to next month
            currentDate.set(Calendar.MONTH,
                    currentDate.get(Calendar.MONTH) + 1);
        }

        if (currentDate.get(Calendar.MONTH) == today.get(Calendar.MONTH)) {
            if (today.get(Calendar.DATE) != 1) {
                currentDate.set(Calendar.DATE, 1);
                // adding start date
                months.add(currentDate.getTime());
            }
            months.add(today.getTime());
            break;
        }
        currentYear++;

        if (currentYear == today.get(Calendar.YEAR)) {
            noOfMonths = today.get(Calendar.MONTH) - 1;
        } else {
            noOfMonths = 11;
        }
        currentDate.set(Calendar.YEAR, currentYear);

    }

    for (Date date : months) {
        System.out.println(format.format(date));
    } 
```

该程序从今天开始打印前 2 年的所有月份开始和结束日期。最后日期将是当天！

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-07-11T10:35:15.047

Try this

```
DECLARE @mydate DATETIME

SELECT @mydate = GETDATE()

SELECT CONVERT(VARCHAR(25),DATEADD(dd,-(DAY(@mydate)),@mydate),101) ,
'Last Day of Previous Month'

UNION

SELECT CONVERT(VARCHAR(25),DATEADD(dd,-(DAY(@mydate)-1),@mydate),101) AS Date_Value,
'First Day of Current Month' AS Date_Type

UNION

SELECT CONVERT(VARCHAR(25),@mydate,101) AS Date_Value, 'Today' AS Date_Type

UNION

SELECT CONVERT(VARCHAR(25),DATEADD(dd,-(DAY(DATEADD(mm,1,@mydate))),DATEADD(mm,1,@mydate)),101) ,
'Last Day of Current Month'

UNION

SELECT CONVERT(VARCHAR(25),DATEADD(dd,-(DAY(DATEADD(mm,1,@mydate))-1),DATEADD(mm,1,@mydate)),101) ,
'First Day of Next Month' 
```

# c# - 考虑数字的字符串比较

> ID：11430553
> 
> 赞同：7
> 
> 时间：2012-07-11T10:22:27.323
> 
> 标签：c#, winforms, sorting, treeview

当然，我正在尝试根据它们的文本属性对树视图的节点进行排序。问题是我的比较班不关心数字。这是代码：

```
public class TreeNodeSorter : IComparer
{
    public int Compare(object x, object y)
    {
        var tx = x as TreeNode;
        var ty = y as TreeNode;

        return string.Compare(tx.Text, ty.Text);
    }
} 
```

结果如下：

![在此处输入图像描述](../Images/10a1a8ad1af1c6e842b52c829f4dd0ef.png)

第一个子节点（调试...）是好的，但我的问题是为什么地球上“HBM\D10”排在“HBM\D7”之前等等......

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-11T10:28:25.153

如果可移植性不是问题，您可以 p/调用[StrCmpLogicalW()](http://msdn.microsoft.com/en-us/library/bb759947.aspx)。Windows shell 使用此函数对其显示的文件名进行排序：

```
public class TreeNodeSorter : IComparer
{
    [DllImport("shlwapi.dll", CharSet = CharSet.Unicode, ExactSpelling = true)]
    static extern int StrCmpLogicalW(string x, string y);

    public int Compare(object x, object y)
    {
        var tx = x as TreeNode;
        var ty = y as TreeNode;

        return StrCmpLogicalW(tx.Text, ty.Text);
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-11T10:29:00.090

阅读[http://www.dotnetperls.com/alphanumeric-sorting](http://www.dotnetperls.com/alphanumeric-sorting)。您可能需要去掉其他所有内容才能使他们的解决方案发挥作用——因为它们是按数字或字母顺序排序的。

如果它是动态文件名，您最好使用正则表达式来匹配您想要排序的部分。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-11T10:29:31.720

这是因为 char '1' 小于 char '7。这是因为字符串一次比较一个字符。

一个简单的解决方法是在字符串的开头包含填充的 0，例如：

```
D04
D07
D10
D11 
```

ETC...

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-11T10:32:23.667

如果您有一个合理的模式来提取数字（我猜类似 @"\D\d+" ）使用它从标签中删除数字，那么如果标签相等，则返回两个数字差作为比较。

# ruby - Ruby 有 this.var = "somevalue" 功能吗？

> ID：11430554
> 
> 赞同：0
> 
> 时间：2012-07-11T10:22:31.143
> 
> 标签：ruby

我正在用 Ruby 编写我的第一个应用程序，我有一个问题。

这是一个示例：

```
 class SomeClass
    def initialize(host)
       @host = host
    end
end 
```

如何在另一种方法中更改 @host 的值？我尝试过使用 `self.host = "somenewvalue"`，但这不起作用。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-11T10:24:45.870

使用 attr_accessor：

```
 class SomeClass
    attr_accessor :host
    def initialize(host)
       @host = host
    end
    end 
```

或 attr_reader 和 attr_writer 分别定义方法 host(getter) 和 host=(setter)。

**UPD**：弄错了。您可以通过在变量名称前添加 @ 来访问实例变量。因此，实例方法中的 @host="someothervalue" 可以正常工作。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-11T11:43:55.420

那是因为`self.host = 'somenewvalue'`实际上是`host=`用`self`作为`'somenewvalue'`参数调用方法。由于未定义方法，因此将引发错误。

要解决这个问题，只需定义方法：

```
def host=(new_host)
  @host = new_host.to_s
end 
```

你也可以写`attr_writer :host`，它定义了一个类似上面的方法。`attr_accessor`定义了 reader 和 writer 方法。

# sql - 我的 SQL Server 2008 实例在哪里？

> ID：11430562
> 
> 赞同：1
> 
> 时间：2012-07-11T10:23:01.280
> 
> 标签：sql, sql-server-2008, sql-server-2005

我的机器上安装了 SQL Server 2005 和 SQL 2008 R2。

每当我`SQL Server Management Studio`从 Server 2008 R2 菜单开始。服务器名称是`.\SqlExpress`or`mymachine\SqlExpress`并运行

```
select @@version 
```

我总是看到`Microsoft SQL Server 2005 - 9.00.5057.00 (Intel X86)`

如何访问我的 SQL Server 2008 实例？阅读关于 SO 的所有现有问题，我认为我在默认实例和命名实例之间搞砸了。

您能否建议在这种情况下可以做些什么。

我不想重新安装 SQL Server 2008 或删除 SQL Server 2005 实例。

[![在此处输入图像描述](../Images/3294009430ca5584ab3c5445334b1d0f.png)](https://i.stack.imgur.com/VKKk2.png) [![在此处输入图像描述](../Images/6c3d86b5549460413e3533f422d60e75.png)](https://i.stack.imgur.com/J7flt.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-11T13:42:28.350

从您的控制面板屏幕截图来看，您似乎没有安装两个 SQL Server 实例，因此无论出于何种原因，看起来 SQL 2008 R2 数据库引擎都没有正确安装。您应该重新运行 2008R2 安装程序并确保它已安装或重新安装。

# c# - Cookie 构造函数 C# 中的路径无效

> ID：11430563
> 
> 赞同：2
> 
> 时间：2012-07-11T10:23:06.470
> 
> 标签：c#, exception, cookies, restsharp

从 RestResponse 添加新获取的 cookie 时，我对来自 wiedzmin.wikia.com 的 cookie 有奇怪的问题。

异常消息是

" cookie 的 'Path'='/wiki/Specjalna:Nowe_pliki' 部分无效。"

```
foreach (RestSharp.RestResponseCookie buiscuit in responce.Cookies)
{
    cookies.Add(new Uri(pageURL), new Cookie(buiscuit.Name, buiscuit.Value,
    buiscuit.Path, buiscuit.Domain));
} 
```

buiscuit 的值是：

```
Name = loadtime
Value = S1342001743.657154083
Path = /wiki/Specjalna:Nowe_pliki
Domain = wiedzmin.wikia.com 
```

MS VS 10 说它可能是一个 cookie 大小的东西。这是真的吗？

# javascript - 立方体 3D 旋转 - 方向错误 (Javascript - CSS3)

> ID：11430564
> 
> 赞同：2
> 
> 时间：2012-07-11T10:23:14.073
> 
> 标签：javascript, css, cube

我正在使用带有触摸事件的 CSS3 动画制作一个 3D 立方体。这是链接（您可以在 Chrome 中激活“触摸事件”）：[http](http://adevby.me/cube/) ://adevby.me/cube/ 。

我做了两个不同的函数（cube1 & cube2）。唯一的变化是第二个立方体的第 254 行。

**第一个立方体：** 当您在 Y 轴（底部的红色面）上旋转 180 度，然后在 X 轴上旋转时，方向反转（相对于光标/手指移动）。

**第二个立方体：** 所以我试图在 Y 轴上小于 -90 度 && 大于 90 度时创建一个条件，但是我们看到了一个糟糕的过渡......

**第二个问题** 当你面前有红色的脸，并且你在 X 轴上移动时，立方体在 Z 轴上转动，而不是 Y 轴上。

我希望我清楚...

# c# - 为什么 OfType<> 比 Cast<> 快？

> ID：11430570
> 
> 赞同：30
> 
> 时间：2012-07-11T10:23:30.520
> 
> 标签：c#, linq

回答以下问题： [如何将 MatchCollection 转换为字符串数组](https://stackoverflow.com/questions/11416191/how-to-convert-matchcollection-to-string-array/11416739#comment15078364_11416739)

给定两个 Linq 表达式：

```
var arr = Regex.Matches(strText, @"\b[A-Za-z-']+\b")
    .OfType<Match>() //OfType
    .Select(m => m.Groups[0].Value)
    .ToArray(); 
```

和

```
var arr = Regex.Matches(strText, @"\b[A-Za-z-']+\b")
    .Cast<Match>() //Cast
    .Select(m => m.Groups[0].Value)
    .ToArray(); 
```

OfType<> 由用户[Alex](https://stackoverflow.com/users/999042/alex)进行了基准测试，速度稍快（并由我本人确认）。

这对我来说似乎违反直觉，因为我认为 OfType<> 必须同时进行“是”比较*和*强制转换(T)。

任何启示都将不胜感激为什么会这样:)

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-07-11T12:04:34.047

我的基准测试与您的基准测试不一致。

我运行了与 Alex 相同的基准测试，得到了相反的结果。然后我稍微调整了基准，并再次观察到`Cast`比`OfType`.

~~它没有太多内容，但我相信它`Cast`确实有优势，因为它的迭代器更简单。（不`is`检查。）~~

~~编辑：实际上经过一些进一步的调整，我设法`Cast`比`OfType`.~~

~~以下是迄今为止我发现的最大差异的基准代码：~~

```
Stopwatch sw1 = new Stopwatch();
Stopwatch sw2 = new Stopwatch();

var ma = Enumerable.Range(1, 100000).Select(i => i.ToString()).ToArray();

var x = ma.OfType<string>().ToArray();
var y = ma.Cast<string>().ToArray();

for (int i = 0; i < 1000; i++)
{
    if (i%2 == 0)
    {
        sw1.Start();
        var arr = ma.OfType<string>().ToArray();
        sw1.Stop();
        sw2.Start();
        var arr2 = ma.Cast<string>().ToArray();
        sw2.Stop();
    }
    else
    {
        sw2.Start();
        var arr2 = ma.Cast<string>().ToArray();
        sw2.Stop();
        sw1.Start();
        var arr = ma.OfType<string>().ToArray();
        sw1.Stop();
    }
}
Console.WriteLine("OfType: " + sw1.ElapsedMilliseconds.ToString());
Console.WriteLine("Cast: " + sw2.ElapsedMilliseconds.ToString());
Console.ReadLine(); 
```

我所做的调整：

*   *在开始时执行一次*“生成字符串列表”工作，然后“结晶”它。
*   在开始计时之前执行每个操作之一 - 我不确定这是否有必要，但我认为这意味着 JITter 预先生成代码而不是在我们计时时生成代码？
*   多次执行每个操作，而不仅仅是一次。
*   更改顺序以防万一。

*在我的机器上*，这导致 ~350ms`Cast`和 ~18000ms `OfType`。

~~我认为最大的不同是我们不再`MatchCollection`计算找到下一场比赛需要多长时间。（或者，在我的代码中，需要多长时间`int.ToString()`。）这大大降低了信噪比。~~

编辑：正如sixlettervariables 指出的那样，造成这种巨大差异的原因是，`Cast`如果它可以投射整个`IEnumerable`. 当我从使用切换`Regex.Matches`到数组以避免测量正则表达式处理时间时，我也切换到使用可转换的东西`IEnumerable<string>`，从而激活了这种短路。当我改变我的基准以禁用这种短路时，我获得了***一点***优势，`Cast`而不是一个***巨大***的优势。

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2012-07-11T12:12:49.327

`OfType()`应该更慢，因为在`is`实际显式转换操作之前进行安全类型检查，同时`Cast()`只进行显式转换。

从理论上讲`OfType`，如果许多元素具有“错误类型”，那么循环会更快，因此循环会在`is`检查后进一步枚举，如果`Cast()`在同一个集合上，您最终会得到一个`InvalidCastException`“错误类型”的每个元素，所以这会相对较慢.

**使用 ILSpy 提取的源代码：**

```
// System.Linq.Enumerable
private static IEnumerable<TResult> OfType<TResult>(IEnumerable source)
{
    if (source == null)
    {
        throw Error.ArgumentNull("source");
    }

    foreach (object current in source)
    {
        // **Type check**
        if (current is TResult)
        {
            // **Explicit cast**
            yield return (TResult)current;
        }
    }
    yield break;
}

// System.Linq.Enumerable
public static IEnumerable<TResult> Cast<TResult>(this IEnumerable source)
{
    IEnumerable<TResult> enumerable = source as IEnumerable<TResult>;
    if (enumerable != null)
    {
        return enumerable;
    }
    if (source == null)
    {
        throw Error.ArgumentNull("source");
    }

    foreach (object current in source)
    {
        // **Explicit cast only**
        yield return (TResult)current;
    }
    yield break;
} 
```

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2012-07-11T13:17:50.767

`OfType`只需在您的方法中颠倒and的顺序，`Cast`您就会注意到没有区别。第一个总是比第二个跑得快。**这是一个糟糕的微基准测试案例。**

将您的代码包装在一个循环中以随机顺序运行它们：

```
OfType: 1224
Cast: 2815
Cast: 2961
OfType: 3010
OfType: 3027
Cast: 2987
... 
```

然后再一次：

```
Cast: 1207
OfType: 2781
Cast: 2930
OfType: 2964
OfType: 2964
OfType: 2987
... 
```

取出`Regex.Matches`，这似乎会导致问题：

```
Cast: 1247
OfType: 210
OfType: 170
Cast: 171
... 
```

和

```
OfType: 1225
Cast: 202
OfType: 171
Cast: 192
Cast: 415 
```

所以不行。`OfType`不比 快`Cast`。不，`Cast`不比`OfType`.

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-11T12:04:21.907

实际上 isof() 首先检查类型然后转换它，而 cast() 只是做第二部分。所以显然 isof() 会比直接投射慢

[http://codenets.blogspot.in/2010/06/cast-vs-oftype.html](http://codenets.blogspot.in/2010/06/cast-vs-oftype.html)

# vb.net - 复制目录，但仅在需要时更新文件

> ID：11430571
> 
> 赞同：0
> 
> 时间：2012-07-11T10:23:31.440
> 
> 标签：vb.net

我正在使用以下代码：

```
my.Computer.FileSystem.CopyDirectory(path, path, true) 
```

但是，我认为即使在目录中更改了一个文件，这也会复制整个目录。这是真的？

如果是这样，是否有任何验证我可以说只更新文件而不是整个文件夹？我的应用程序将在大约 300 台计算机的网络上运行，每台计算机复制超过 300 MB，因此如果它每次都尝试复制任何目录，即使只有一个文件被更改，它也可能导致网络崩溃或变慢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-11T10:46:23.567

您可以尝试在隐藏的命令提示符下执行命令 XCOPY。

例如：

```
xcopy d:\temp d:\temp2 /D /Y 
```

将每个修改过的文件从源目录复制到目标目录，而不要求覆盖确认

你可以写这样的东西

```
 Dim startInfo As New ProcessStartInfo("cmd.exe")
        startInfo.WindowStyle = ProcessWindowStyle.Hidden
        startInfo.Arguments = "/C xcopy d:\temp d:\temp2 /D /Y"
        Dim proc = new Process()
        proc.StartInfo = startInfo
        proc.Start() 
```

# java - 如何让固定数量的线程使用未绑定的可排序队列？

> ID：11430574
> 
> 赞同：2
> 
> 时间：2012-07-11T10:23:35.703
> 
> 标签：java, threadpool, priority-queue

请假设以下情况：

```
public static void main(String[] args) {
    ThreadPoolExecutor pool = new ThreadPoolExecutor(0, 5, 1L, TimeUnit.SECONDS, new PriorityBlockingQueue<Runnable>());
    DashboardHtmlExport d = new DashboardHtmlExport();
    for (int i = 0; i < 40; i++) {
        System.out.println("Submitting: " + i);
        try {
            Thread.sleep(cooldown);
        } catch (InterruptedException e) {
            e.printStackTrace();
        }
        pool.submit(d.new A(i));
    }
}

private class A implements Runnable, Comparable<A> {
    private int order;

    public A(int order) {
        this.order = order;
    }

    public void run() {
        try {
            Thread.sleep(busyTime);
        } catch (InterruptedException e) {
            System.out.println(e.getMessage());
        }
        System.out.println(new Date());
    }

    public int compareTo(A o) {
        return Integer.valueOf(o.order).compareTo(Integer.valueOf(order));
    }
} 
```

这产生了以下错误：

```
Submitting: 0
Submitting: 1
Exception in thread "main" java.lang.ClassCastException: java.util.concurrent.FutureTask cannot be cast to java.lang.Comparable
    at java.util.PriorityQueue.siftUpComparable(PriorityQueue.java:578)
    at java.util.PriorityQueue.siftUp(PriorityQueue.java:574)
    at java.util.PriorityQueue.offer(PriorityQueue.java:274)
    at java.util.concurrent.PriorityBlockingQueue.offer(PriorityBlockingQueue.java:164)
    at java.util.concurrent.ThreadPoolExecutor.execute(ThreadPoolExecutor.java:653)
    at java.util.concurrent.AbstractExecutorService.submit(AbstractExecutorService.java:78)
    at com.skycomm.cth.pages.test.DashboardHtmlExport.main(DashboardHtmlExport.java:133)
Tue Jul 10 23:48:45 GMT+02:00 2012 
```

为什么会这样？！

这仅在`busyTime`时间**少于**该`cooldown`时间时才有效。这意味着队列不能处理超过 2 个提交的任务！

基本上，我想要做的是拥有一个**UNBOUND**大小的池，并且可以通过可比较或比较器进行排序。我只能使用 a 来实现**UNBOUND**队列，`LinkedBlockingQueue`但这当然是不可排序的！

谢谢你。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-07-11T10:34:45.967

`RunnableFuture`ThreadPoolExecutor使用[newTaskFor()](http://docs.oracle.com/javase/6/docs/api/java/util/concurrent/AbstractExecutorService.html#newTaskFor%28java.lang.Runnable,%20T%29)方法将您提交的 Runnable 转换为一个，并将这个 RunnableFuture 添加到队列中。因此，如果您想使用 PriorityQueue，您应该重写该`newTaskFor()`方法以确保`RunnableFuture`它创建的实例具有可比性。

或者您也可以使用`execute()`方法而不是`submit()`方法来绕过任务创建。

# jquery - jQuery 如何选择不是 .first() 或 .last() 的元素

> ID：11430575
> 
> 赞同：1
> 
> 时间：2012-07-11T10:23:38.527
> 
> 标签：jquery, jquery-selectors, dom-traversal

我有这个代码

```
 <ul>
            <li><a href="index.php">Web Development</a></li>
                <span data-landing_count="1">
                    <li class="subli"><a href="1.html">E-shop</a></li>
                    <li class="subli"><a href="2.html">Prezentations</a></li>
                    <li class="subli"><a href="3.html">Custom CMS</a></li>
                    <li class="subli"><a href="4.html">WordPress & Joomla!</a></li>
                    <li class="subli"><a href="5.html">Web apps</a></li>
                    <li class="subli lastsl"><a href="index-b.html">Design</a></li>
                </span>
            <li><a href="6.html">E-courses</a></li>
                <span data-landing_count="2">
                    <li class="subli"><a href="7.html">Design & Graphics</a></li>
                    <li class="subli lastsl"><a href="8.html">Web Development</a></li>
                </span>
            <li><a href="9.html">SEO</a></li>
                <span data-landing_count="3">
                    <li class="subli"><a href="91.html">On-page SEO</a></li>
                    <li class="subli"><a href="92.html">W3C validation</a></li>
                    <li class="subli"><a href="93.html">Linking</a></li>
                    <li class="subli lastsl"><a href="94.html"><img src="img/star.png" alt="star" width="12" class="star">Copywriting</a></li>
                </span>
            <li data-landing_count="4"><a href="95.html">Web hosting</a></li>
            <li data-landing_count="5"><a href="96.html"><img src="img/star.png" alt="star" width="12" class="star">Pricing</a></li>
            <li data-landing_count="6"><a href="97.html">Contact us</a></li>
        </ul> 
```

有 3 个跨度，我现在可以使用 .first() 定位第一个跨度，使用 .last() 定位最后一个跨度。但是我如何瞄准中间的呢？

谢谢您的回复

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-11T10:26:06.417

你可以使用：

```
$('span').eq(1); 
```

使用`eq()`方法或选择器：

```
$('span:eq(1)'); 
```

或者：

```
$('span').slice(1,-1); 
```

但是请注意，您的 HTML 是无效的：*唯一*可以包装`li`元素的元素是 a`ul`或 an `ol`。

参考：

*   [`eq()`](http://api.jquery.com/eq/).
*   [`:eq`选择器](http://api.jquery.com/eq-selector/)。
*   [`slice()`](http://api.jquery.com/slice/).

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-11T10:26:36.603

```
$('ul span').not(':first,:last'); 
```

[jsFiddle 演示](http://jsfiddle.net/7Mc6Z/)

请注意，**您的 HTML 完全损坏**。你*应该先学习 HTML*，因为这只会导致神秘的问题和被低估的 StackOverflow 问题。

`li`只能是`ul`or的孩子`ol`。而且，`ul`并且`ol`只能有`li`s 作为他们的孩子。您不能`span`按照您的方式将 s 放在 HTML 中。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-11T10:25:49.787

您可以使用以下方法修复它：

```
.eq(1) 
```

它应该工作。

如果您想获取`for`从第二个元素迭代到前结束元素时可以使用的所有元素；

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-11T10:27:10.097

首先，您的 HTML 是**BAD**。不要在`<span>`标签之间放置`<li>`标签。只会以灾难收场。

其次，您是否以这些为目标以提供不同的风格？如果是这样，那么为什么不使用 css`:first-child`和`:last-child`选择器。这样您就可以设计第一个和最后一个而不是介于两者之间的样式。

# blackberry - 如何在列表字段中设置不同的行高？

> ID：11430576
> 
> 赞同：1
> 
> 时间：2012-07-11T10:23:41.037
> 
> 标签：blackberry, listfield

关闭。请参考[这里](https://stackoverflow.com/questions/11573850/how-to-set-different-row-height-in-listfield-with-implementing-listfieldcallback/11644420#11644420)。谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-11T13:07:48.893

有无证方法`setRowHeight(int row, int height)`。但是没有人保证它会在下一次操作系统更新时出现。更多细节[在这里](http://supportforums.blackberry.com/t5/Java-Development/ListFields-setRowHeight-int-int-Method/td-p/558556)。

像这样修改你的 TableRowManager：

```
private class TableRowManager extends Manager {
    private int row;

    public TableRowManager(int row) {
        super(0);
        setRow(row);
    }

    public void setRow(int row) {
        this.row = row;
    }

    ...
    ...

    public int getPreferredHeight() {
        return getRowHeight(row);
    }
} 
```

# date - 响应标头日期，总是在那里？

> ID：11430578
> 
> 赞同：0
> 
> 时间：2012-07-11T10:23:46.417
> 
> 标签：date, header, response

我编写了一个可以与服务器通信的客户端应用程序，我需要知道当前的服务器时间（查看客户端时间是否不同）。

我在想。响应标头“日期”是否始终可用？

# mod-rewrite - 将 www 重定向到非 www 是重定向到脚本而不是漂亮的 URL

> ID：11430579
> 
> 赞同：0
> 
> 时间：2012-07-11T10:23:47.823
> 
> 标签：mod-rewrite

我的域**domain.com 被重定向到 www.domain.com**但由于内部重定向，它仅在某些情况下有效：

*   ***domain.com/folder/***应该重定向**到 www.domain.com/folder/**但它被重定向到***www.domain.com/blog/index.php***

这里的问题是，在内部，***www.domain.com*** /folder/通过 RewriteRule使用了**blog/index.php ：**

```
RewriteRule ^$          ../blog/index.php 
```

我不知道为什么，但是您被重定向到脚本而不是漂亮的 URL。

**它在这里工作（从domain.com/folder/**重定向到**www.domain.com/folder**，当所有代码都在同一个“目录”条目中时）：

```
<Directory /var/www/vhosts/domain.com/httpdocs/>
    Options -All +FollowSymLinks
    RewriteEngine on

    # redirect non-www to www
    RewriteCond %{HTTP_HOST}        ^domain\.com
    RewriteRule ^(.*)$          http://www.domain.com/$1 [R=301,L] 

    RewriteRule ^folder/$           ../blog/index.php                       
</Directory> 
```

它在这里不起作用（从**domain.com/folder/**重定向到**www.domain.com/blog/index.php**，当使用 2 个“目录”条目时）：

```
<Directory /var/www/vhosts/domain.com/httpdocs/>
    Options -All +FollowSymLinks
    RewriteEngine on

    # redirect non-www to www
    RewriteCond %{HTTP_HOST}        ^domain\.com
    RewriteRule ^(.*)$          http://www.domain.com/$1 [R=301,L]                      
</Directory>
<Directory /var/www/vhosts/sonidon.com/httpdocs/folder/>
    RewriteEngine on
    RewriteRule ^$          ../blog/index.php
</Directory> 
```

在两个目录中也使用**Options +FollowSymLinks +SymLinksIfOwnerMatch**进行了测试，但没有运气:(

我在这里看到了一个使用 VirtualHosts 而不是 Directory 的解决方案： [通用 htaccess 将 www 重定向到非 www](https://stackoverflow.com/questions/234723/generic-htaccess-redirect-www-to-non-www) 但认为它应该是一种方法，因为这个问题不仅与“非 www 到 www”有关，而且与任何重定向有关。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-11T12:35:08.450

```
<Directory /var/www/vhosts/domain.com/httpdocs/>
    Options -All +FollowSymLinks
    RewriteEngine on

    # redirect non-www to www
    RewriteCond %{HTTP_HOST}        ^domain\.com
    RewriteRule ^(.*)$          http://www.domain.com/$1 [R=301,L]                      
</Directory>
<Directory /var/www/vhosts/sonidon.com/httpdocs/folder/>
    RewriteEngine on
    RewriteRule ^$          ../blog/index.php
    #ADDED LINE BELOW
    RewriteRule ^/$          ../blog/index.php
</Directory> 
```

试试我上面添加的行。我认为问题在于“http://domain.com”被重定向到“http://www.domain.com/”（注意尾部斜杠）。然后，如果没有 uri ^$，您将在第二组中重定向，但实际上 uri 是“/”。

# gmail - 未找到应用程序脚本错误

> ID：11430580
> 
> 赞同：0
> 
> 时间：2012-07-11T10:23:52.020
> 
> 标签：gmail, google-apps-script

我的贪睡应用程序脚本在 gmail 上工作了一段时间，但似乎在转换为谷歌驱动器后，电子表格消失了（不在垃圾箱中），我每天晚上都会收到电子邮件，告诉我我的脚本“未找到”未能成功完成等等等

错误消息是发生了服务器错误 - 不是特别提供信息，并且任何查看触发器的尝试都会导致相同的错误。

除了设置某种与直觉相反的过滤器之外，还有什么方法可以摆脱这些消息，就好像我决定运行我可能想查看输出的其他脚本一样。

谢谢

达伦

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-13T14:59:50.220

Darren，您能否在 Apps 脚本问题跟踪器上提出此问题：[http](http://code.google.com/p/google-apps-script-issues/issues/list) ://code.google.com/p/google-apps-script-issues/issues/list ？如果可能，请在问题跟踪器请求中告知我们您收到失败通知电子邮件的电子邮件地址。

# eigen - 在 Eigen 中找到 rowwise maxCoeff 和 Index of maxCoeff

> ID：11430588
> 
> 赞同：13
> 
> 时间：2012-07-11T10:24:11.003
> 
> 标签：eigen

我想按矩阵的行查找最大值和索引。我基于[eigen 网站](http://eigen.tuxfamily.org/dox/TutorialReductionsVisitorsBroadcasting.html)上的一个示例（示例 7）。

```
#include <iostream>
#include <Eigen/Dense>

using namespace std;
using namespace Eigen;
int main()
{
    MatrixXf mat(2,4);
    mat << 1, 2, 6, 9,
           3, 1, 7, 2;

    MatrixXf::Index   maxIndex;

    VectorXf maxVal = mat.rowwise().maxCoeff(&maxIndex);

    std::cout << "Maxima at positions " << endl;
    std::cout << maxIndex << std::endl;
    std::cout << "maxVal " << maxVal << endl;
} 
```

这里的问题是我的线

```
 VectorXf maxVal = mat.rowwise().maxCoeff(&maxIndex); 
```

是错的。原来的例子有

```
 float maxNorm = mat.rowwise().sum().maxCoeff(&maxIndex); 
```

即有一个额外的减少 .sum() 涉及。有什么建议么？我想我只想要与我在matlab中写的相同的特征

```
[maxval maxind] = max(mymatrix,[],2) 
```

即找到最大值和它在 mymatrix 的第二维上的索引并返回 (nrow(mymatrix),2) 矩阵。谢谢！

（也发送到特征列表，抱歉交叉发布。）

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-07-18T09:25:07.817

我的猜测是，如果不使用当前 api 的 for 循环，这是不可能的。正如您自己所说，您可以使用获取最大行值的向量

```
VectorXf maxVal = mat.rowwise().maxCoeff(); 
```

据我从[maxCoeff()](http://eigen.tuxfamily.org/dox/classEigen_1_1DenseBase.html#a0b381dbcb0435c3a34a78abad4726cc3)的 API 文档中可以看出，它只会写回一个索引值。以下代码（未经测试）应该给你你想要的：

```
MatrixXf::Index   maxIndex[2];
VectorXf maxVal(2);
for(int i=0;i<2;++i)
    maxVal(i) = mat.row(i).maxCoeff( &maxIndex[i] ); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2016-12-29T17:33:50.590

[除了Jakob](https://stackoverflow.com/a/11538208/148668)的“for loop”解决方案外，您还可以使用[libigl](https://github.com/libigl/libigl)的`igl::mat_max`功能，如 MATLAB 的 row-/column-wise max

```
Eigen::MatrixXf mat(2,4);
mat << 1, 2, 6, 9,
       3, 1, 7, 2;
Eigen::VectorXi maxIndices;
Eigen::VectorXf maxVals;
igl::mat_max(mat,2,maxVals,maxIndices); 
```

然后`maxVals`将包含`[9;7]`并且`maxIndices`将包含`[3;2]`.

# java - 如何验证 UI 上的文字

> ID：11430590
> 
> 赞同：0
> 
> 时间：2012-07-11T10:24:12.987
> 
> 标签：java, selenium, selenium-firefoxdriver

这是 UI 的一部分，其中我有一些文字文本，例如

```
Opportunity Name    Momentum Test (ID=AANA-19KVBE)
Account             Account Internal
Owner               Christopher Braden
Sales Order Region  North America
Locale English      United States
Currency            US Dollar 
```

上面这段代码如下

```
<table class="datatable" width="100%">
    <tbody>
    <tr class="oddrow">
        <td>Opportunity Name</td>
        <td class="wrap_content">
            Momentum Test (ID=AANA-19KVBE)
            <br>
            <a target="_blank" href="http://www.example.com">View in Salesforce</a>
        </td>
    </tr>
    <tr class="evenrow">
        <td>Account</td>
        <td class="wrap_content">
            Akamai Internal
            <br>
            <a target="_blank" href="http://www.example.com">View in Salesforce</a>
        </td>
    </tr>
    <tr class="oddrow">
        <td>Owner</td>
        <td>Christopher Braden</td>
    </tr>
    <tr class="evenrow">
        <td>Sales Order Region</td>
        <td>North America</td>
    </tr>
    <tr class="oddrow">
        <td>Locale</td>
        <td>English - United States</td>
    </tr>
    <tr class="evenrow">
        <td>Currency</td>
        <td>US Dollar</td>
    </tr>
</tbody> 
```

我需要单独检索这些值，将其存储在不同的页面中进行比较。

例如：我需要知道“美国”存储在“位置”下

请帮我

感谢和问候基兰

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-11T10:42:23.640

您可以在地图中读取和存储所有这些信息 -

```
Map<String,String> map = new Map<String,String>;

List<WebElement> list = driver.findElements(By.xpath("//*[@class='datatable']/tbody/tr")); 

for(int i=1;i<=list.size();i++){

  String key = driver.findElement(By.xpath("//*[@class='datatable']/tbody/tr["+i+"]/td[1]")).getText();
  String value = driver.findElement(By.xpath("//*[@class='datatable']/tbody/tr["+i+"]/td[2]")).getText(); 

   map.put(key,value);
 } 
```

通过这种方式，您可以读取表中的所有信息并将其存储在 Map 中以供以后使用。让我知道这是否适合您。

# mysql - 在另一个查询中查询以连接两个表

> ID：11430594
> 
> 赞同：0
> 
> 时间：2012-07-11T10:24:27.070
> 
> 标签：mysql, sql

我有 2 张表**mstEmp**和**dailyattendance**。现在我想运行一个查询

```
SELECT 
  mstEmp.empname, 
  dailyattendance.InTime, 
  dailyattendance.OutTime, 
  mstEmp.teamtype 
FROM 
  dailyattendance ,
  mstEmp mstEmp 
where 
  dailyattendance.HolderName IN (
    select mstEmp.empname from mstEmp where mstEmp.teamtype='$chk' ) 
```

这里匹配了**teamtype ，从****mstEmp**中获取对应的名称，然后与**dailyattendance.HolderName**匹配以显示结果。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-11T10:27:47.883

这个怎么样：：

```
 SELECT 
    mstEmp.empname, 
    dailyattendance.InTime, 
    dailyattendance.OutTime, 
    mstEmp.teamtype 

    FROM dailyattendance inner join mstEmp  on (dailyattendance.HolderName = mstEmp.empname)

    where mstEmp.teamtype='$chk'
   group by mstEmp.empname 
```

# machine-learning - 是否可以将支持向量机与凝聚聚类器结合使用？

> ID：11430597
> 
> 赞同：0
> 
> 时间：2012-07-11T10:24:31.633
> 
> 标签：machine-learning, data-mining, svm, hierarchical-clustering

是否可以以某种方式将支持向量机与聚类算法结合使用？什么是他们都需要相互通信的示例用例？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-11T14:58:50.607

您始终可以使用聚类来划分数据集并学习多个分类器，然后使用集成方法来组合分类结果。

如果一个类由多个集群组成，这可以提高学习两个子类并在分类后合并它们的准确性。

# android - 如何在 android 中捕获 H.264 编码帧？

> ID：11430603
> 
> 赞同：2
> 
> 时间：2012-07-11T10:24:50.443
> 
> 标签：android, video, native, h.264, codec

我明白，在 android 中有两种捕获视频的方法。
1) 使用 SurfaceView API
2) 使用 MediaRecorder API

我想使用 Android (3.0+) 的默认编码器捕获 H.264 编码帧，以使用 RTP 通过网络发送。

在使用 SurfaceView 和 SurfaceHolder 类的预览回调时，我们能够将原始帧作为预览显示给用户。我们在“PreviewCallback”类的“onPreviewFrame”方法中获取帧。但是，这些帧是 H.264 编码的。因此，我尝试使用“MediaRecorder”API 设置 H.264 编码和“SurfaceView”来获取预览帧。在这种情况下，不会调用 previewcallbacks。

您能否让我知道如何实现这一目标。我们的主要目标是获取 H.264 编码帧（已使用 android 的默认编解码器进行编码）。参考：1）[https://stackoverflow.com/a/8655244/698316](https://stackoverflow.com/a/8655244/698316) 2）类似问题： http: [//permalink.gmane.org/gmane.comp.handhelds.android.devel/214422](http://permalink.gmane.org/gmane.comp.handhelds.android.devel/214422)

您能否建议一种使用 android 的默认 H.264 编解码器支持来捕获 H.264 编码帧的方法。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-29T15:38:36.867

请参阅 Spydroid [http://code.google.com/p/spydroid-ipcamera/](http://code.google.com/p/spydroid-ipcamera/)

基本上，您让视频编码器将带有 H.264 的 .mp4 写入一个特殊的文件描述符，该文件描述符在写入时调用您的代码。然后剥离 MP4 标头并将 H.264 NALU 转换为 RTP 数据包。

# c# - WCF 通信异常

> ID：11430607
> 
> 赞同：-1
> 
> 时间：2012-07-11T10:24:59.333
> 
> 标签：c#, wcf, exception

我在 Web 应用程序中使用 WCF 服务。有两个服务，一个方法`which returns string` 在第一个，然后在我通过服务调用时返回`DataTable`一个 `First one is working properly`。但`while calling second one`我得到以下`exception` ![在此处输入图像描述](../Images/9af544624f844d6333018e1499aa17c6.png)

这是服务器中的配置

> ```
>  <service behaviorConfiguration="ServiceBehavior" name="RmtUsers.Menu">
>     <endpoint address="" binding="wsHttpBinding" contract="IRmtUsers.IMenu">
>       <identity>
>         <dns value="192.168.50.35"/>
>       </identity>
>     </endpoint>
>     <endpoint address="mex" binding="mexHttpBinding" contract="IMetadataExchange" />
>   </service>
> 
>   <service behaviorConfiguration="ServiceBehavior" name="RmtUsers.Product">
>     <endpoint address="" binding="wsHttpBinding" contract="IRmtUsers.IProduct">
>       <identity>
>         <dns value="192.168.50.35"/>
>       </identity>
>     </endpoint>
>     <endpoint address="mex" binding="mexHttpBinding" contract="IMetadataExchange" />
>   </service>
>           </services>
>       <behaviors>             <serviceBehaviors>
>           <behavior name="ServiceBehavior">
>               <serviceMetadata httpGetEnabled="true"/>
>               <serviceDebug includeExceptionDetailInFaults="true"/>
>           </behavior>             </serviceBehaviors>         </behaviors>    </system.serviceModel> 
> ```

在客户端

> ```
>  <bindings>
>   <wsHttpBinding>
>     <binding name="WSHttpBinding_IMenu" closeTimeout="00:01:00" openTimeout="00:01:00"
>       receiveTimeout="00:10:00" sendTimeout="00:01:00" bypassProxyOnLocal="false"
>       transactionFlow="false" hostNameComparisonMode="StrongWildcard"
>       maxBufferPoolSize="524288" maxReceivedMessageSize="65536" messageEncoding="Text"
>       textEncoding="utf-8" useDefaultWebProxy="true" allowCookies="false">
>       <readerQuotas maxDepth="32" maxStringContentLength="2147483647"
>         maxArrayLength="16384" maxBytesPerRead="4096" maxNameTableCharCount="16384" />
>       <reliableSession ordered="true" inactivityTimeout="00:10:00"
>         enabled="false" />
>       <security mode="Message">
>         <transport clientCredentialType="Windows" proxyCredentialType="None"
>           realm="" />
>         <message clientCredentialType="Windows" negotiateServiceCredential="true"
>           algorithmSuite="Default" />
>       </security>
>     </binding>
>     <binding name="WSHttpBinding_IProduct" closeTimeout="00:10:00"
>       openTimeout="00:01:00" receiveTimeout="00:10:00" sendTimeout="00:01:00"
>     bypassProxyOnLocal="false" transactionFlow="falsehostNameComparisonMode="StrongWildcard"
>       maxBufferPoolSize="524288" maxReceivedMessageSize="65536" messageEncoding="Text"
>       textEncoding="utf-8" useDefaultWebProxy="true" allowCookies="false">
>       <readerQuotas maxDepth="32" maxStringContentLength="8192" maxArrayLength="16384"
>         maxBytesPerRead="4096" maxNameTableCharCount="16384" />
>       <reliableSession ordered="true" inactivityTimeout="00:10:00"
>         enabled="false" />
>       <security mode="Message">
>         <transport clientCredentialType="Windows" proxyCredentialType="None"
>           realm="" />
>         <message clientCredentialType="Windows" negotiateServiceCredential="true"
>           algorithmSuite="Default" />
>       </security>
>     </binding> 
> ```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-11T10:47:50.037

尝试跟随。

1 - 使用 SvcTraceViewer 实用程序来跟踪问题的原因。2 - 为您从 WCF 返回的数据表命名，如下所示。

```
new DataTable("someName"); 
```

WCF：DataTable 未使用名称初始化。注意确定为什么..

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-12T05:56:53.113

我尝试使用以下代码。现在它工作正常

```
 DataTable dt = new DataTable("products");
     dt= getData();  
     DataSet ds = new DataSet();
     ds.Tables.Add(dt);
     return ds.Tables[0]; 
```

我从[Jani5e得到这个答案](https://stackoverflow.com/questions/12702/net-returning-datatables-in-wcf)

# php - 将 sheet1(excel) 转换为标准 sheet2(excel) 的程序

> ID：11430611
> 
> 赞同：4
> 
> 时间：2012-07-11T10:25:16.620
> 
> 标签：php, c++, excel

是否可以编写一个程序来根据标准*sheet2(excel)中的表格更改**sheet1(excel)*中的列顺序？

 *Sheet1 的每列标题与 sheet2 相同，但列的位置不同，并且 sheet(1) 中可能存在更多列。最后，我必须将标准工作表存储到数据库中。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-06T10:44:49.893

是的，可以更改列的顺序。

脚步：

1.  将excel表格格式文件更改为`csv`文件。
2.  编写`PHP`代码以按照标准表排列随机列。
3.  编写代码将此数据输入数据库。每次收到新列时，将其附加到标准列的最后。
4.  `PHP`对相同的代码进行相应的更改。

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2013-03-12T20:16:57.217

这可能是一个愚蠢的答案，但在过去，我在 Excel 工作簿中使用 VB 代码来操作数据，包括从一个工作表中剔除信息并根据内容创建另一个。

尝试[http://msdn.microsoft.com/en-us/library/office/ee814737(v=office.14).aspx](http://msdn.microsoft.com/en-us/library/office/ee814737(v=office.14).aspx)了解更多信息。*

# php - Active Record WHERE 查询未获取字段

> ID：11430617
> 
> 赞同：0
> 
> 时间：2012-07-11T10:25:27.390
> 
> 标签：php, codeigniter, activerecord

我正在尝试“关键字”搜索。我正在查看 ARTWORK_title 和 ARTWORK_keywords 字段。ARTWORK_keywords 字段是用户可以输入多个标签进行搜索的地方。

我已经建立了一个查询，觉得这是正确的方法，但我只是没有让 ARTWORK_title 在数据库查询中传回。

我的PHP函数如下......

```
$my_keywords = explode(",", $search_string);

    $searchfields = array('ARTWORK_title', 'ARTWORK_keywords');

    $this->db->select('*');
    $this->db->from('artwork');
    $this->db->where('ARTWORK_status', '1');

    //$where_string = '(';

    foreach($my_keywords as $keyword)
    {
        foreach($searchfields as $field)
        {
            $where_string = $field . ' LIKE \'%' . $keyword . '%\' ';
        }

        //$where_string .= substr($where_string, 4) . ')';

        $this->db->where($where_string);
} 
```

但是，在分析 SQL 查询时，我得到以下 MySQL 查询......

> SELECT * FROM ( `artwork`) WHERE `ARTWORK_status`= '1' AND `ARTWORK_keywords`LIKE '%Blue%' AND `ARTWORK_keywords`LIKE '%Orange%'

它根本没有在查询中获得 ARTWORK_title 字段。

有什么想法我哪里出错了吗？

提前谢谢了。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-11T10:28:40.300

您正在擦除`$where_string`每次迭代的值。

像这样修改它：

```
$where_string = '';    
$counter = 0;
foreach($my_keywords as $keyword)
{
    foreach($searchfields as $field)
    {
        if ($counter > 0) {
           $where_string .= ' AND ';    
        }
        $where_string .= $field . ' LIKE \'%' . $keyword . '%\' ';
        $counter++;
    }
} 
```

# c# - 除了超链接和换行符之外，从字符串中删除 HTML 标记？

> ID：11430618
> 
> 赞同：1
> 
> 时间：2012-07-11T10:25:35.397
> 
> 标签：c#, html, regex, text

我有 HTML 标记字符串以及在它之间写入的普通文本，我想做的是删除除超链接和换行符之外的所有 HTML 标记，以便它看起来像普通的记事本样式文本但已格式化（即带有换行符，所以它仍然存在可读）和超链接，以确保所有外部链接仍然可见，供用户点击。

我尝试了一些正则表达式解决方案，但它们完全消除了我不想要的所有 HTML 标记。

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-11T10:30:15.307

使用[Html 敏捷包](http://htmlagilitypack.codeplex.com/)。它似乎对您的问题有用。

# android - 是否有任何 API 支持在 Android 中以编程方式进行电话会议？

> ID：11430620
> 
> 赞同：4
> 
> 时间：2012-07-11T10:25:41.597
> 
> 标签：android, telephony, telephonymanager

我想通过从我的应用程序中选择一些联系人来进行电话会议，可以吗？电话会议中的设备数量也有限制吗？是否有任何 Android SDK 支持，任何版本都适合我？请提供一些输入.. 提前致谢。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-11T12:56:15.740

您无法使用智能手机管理会议。您需要一个可以为您执行此操作的中间服务。您可以使用[CCXML](http://www.w3.org/TR/ccxml/)对会议管理器进行编程。Voxeo 为 CCXML 实现提供了一个很好的托管平台，您可以查看他们关于如何设置会议的[文档。](http://docs.voxeo.com/ccxml/1.0-final/)在“学习CCXML 1.0\CCXML 1.0 中的多方会议”中有示例。您可以在 Voxeo 上免费开发和测试，并且只有在您将其投入生产时才会开始向您收费。另一种选择是[Twillio](https://www.twilio.com/docs/client/android)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-11T11:54:06.540

为了进行电话会议，您需要有特定的 API 用于 HOLD、SWITCH 和 JOIN 等功能。

我认为目前不可能。参考这个[线程](https://groups.google.com/forum/?fromgroups#!topic/android-beginners/ti1GGnL26Fg)。

另请参阅[如何召开两个电话会议](https://stackoverflow.com/questions/3942075/how-to-make-call-conferencing-of-two-calls)。

# graphiti-js - 我是否可以直接在 Raphael.js 矩形对象上使用输入和输出端口？

> ID：11430622
> 
> 赞同：0
> 
> 时间：2012-07-11T10:25:46.893
> 
> 标签：graphiti-js

我想知道你可以在 Raphael.js 矩形对象上使用 Graphiti.js 输入/输出端口吗？这样我就很容易获得设置操作的功能。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-11T12:52:28.137

我认为你应该使用 Graphiti，因为它是建立在 Raphael 之上的。

# regex - 用于查找所有 href 和 src 并用完全 quilizes url 替换它们的正则表达式

> ID：11430626
> 
> 赞同：0
> 
> 时间：2012-07-11T10:25:59.070
> 
> 标签：regex

我需要在一个字符串中找到所有 src 和 href 并用完全 quilizes url 替换它们。

例如： src="/test/style.css?somethinghere" 变为 src="http://www.mydomain.com/test/style.css?somethinghere"

href 也是如此。

我将在 Web 中继服务器中使用它们。

我将使用正则表达式替换，但正则表达式是什么样的？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-11T10:34:31.427

您缺少重要信息，例如：您感兴趣的正则表达式类型。我假设您指的是与 perl 兼容的正则表达式。

无论如何，这将有助于指导、理论和回答，如果您让我知道使用的引擎/语言，我可能会帮助您适应您的需求。

我使用类似的东西来收集、预处理、过滤和转发来自不同地方的相关新闻提要。MSDN 有这个相对 URI 的问题，这是我的配置：

```
'msdn' => {
             'action' => [
                         {
                           'tag' => 'get_url_as_content'
                         },
...
...
                         {
                           'regex' => 's/<img( [^\\/>]*)src="\\//<img$1src="http:\\/\\/blogs.msdn.com\\//gsi',
                           'tag' => 'mod_content'
                         },
                         {
                           'regex' => 's/<a( [^\\/>]*)href="\\//<a$1href="http:\\/\\/blogs.msdn.com\\//gsi',
                           'tag' => 'mod_content'
                         }
...
...
                       ]
           }, 
```

在这里，您可以看到我正在使用的两个正则表达式。

这个恢复了 img 和 src 单词之间的内容，然后使 URL 成为绝对的。

```
s/<img( [^\/>]*)src="\//<img$1src="http:\/\/blogs.msdn.com\//gsi 
```

同样对于锚标签...

```
s/<a( [^\/>]*)href="\//<a$1href="http:\/\/blogs.msdn.com\//gsi 
```

这些已经工作了很长一段时间，超过 3 年没有问题:-)

希望这可以帮助。

# javascript - 首次使用 DOM 更改表单 onSubmit 中未回答问题的颜色

> ID：11430628
> 
> 赞同：2
> 
> 时间：2012-07-11T10:26:08.490
> 
> 标签：javascript, dom, getelementbyid

这是我的表格：

```
<form id="Test" action="index.php?course=4" method="post" name="Test" onSubmit="IsFormComplete(12)"> 
```

表格内部是一个动态生成的表格，其中 id=Qx class=Qx 其中 x 是 1 到 12：

```
 <tr id="Q2" class="Q2">  
            <td width="5%">2) </td>  
            <td colspan="2">According to the Institute of Medicine study the number of deaths from medical errors per year is between</td> 
```

这是我的javascript函数：

```
function IsFormComplete(iQuestions) {  
var questionNum = iQuestions;  
    itemOkay=true;  
    for (var i=1;i<questionNum;i++) {  
        for (var j=0;j<4;j++) {  
            var thisItem = eval("document.Test.Q" + i + "[" + j + "].checked");  
            if (!thisItem)  {  
                itemOkay = false;  
                document.getElementById(eval("Q" + i)).style.color = "red";  
            }  
        }  
    }  
    alert("item okay = " + itemOkay);  
    if (itemOkay) {  
        return true;  
    } else {  
        return false;  
    } 
```

}

不工作请帮助。DOM 新手，尝试过各种标签：

```
document.getElementById(eval("Q" + i)).style.color = "red";  
document.Test.getElementById(eval("Q" + i)).style.color = "red";  
document.getElementById("Q1").style.color = "red";  //To try literal instead of variable 
```

等等

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-11T10:58:02.883

你不需要评估。getElementById 使用字符串。尝试这个：

```
document.getElementById("Q"+i).style.color = "red"; 
```

# ruby-on-rails - 使用它包含的 Post 对象对 Ruby 数组进行排序

> ID：11430629
> 
> 赞同：-1
> 
> 时间：2012-07-11T10:26:08.673
> 
> 标签：ruby-on-rails, ruby, arrays, sorting, mongoid

我有一个 Ruby 数组，其中包含 Post 对象（一个 Mongoid 模型）和一个`created_at`返回`Time`对象的方法。我想要的是使用该方法（存在于数组上的每个元素上）对该数组进行排序。我试过`@posts.sort_by {|post| post.created_at}`了，但没有用。我怎么能做到这一点？谢谢！

## 编辑：数组示例：

`[#<Post _id: 4ffd5184e47512e60b000003, _type: nil, created_at: 2012-07-11 10:12:20 UTC, title: "TestSecond", description: "TestSecond", slug: "assa", user_id: 4ffc4fd8e47512aa14000003>, #<Post _id: 4ffd518ee47512e60b000004, _type: nil, created_at: 2012-07-11 10:12:30 UTC, title: "TestFirst", description: "TestFirst", slug: "assadd", user_id: 4ffc4fd8e47512aa14000003>]`.

# 编辑#2：我得到了@posts arra：

```
@posts = Array.new

@user.following.each do |user|
   user.posts.each do |p|
    @posts << p
   end
end 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-11T10:36:25.833

我不确定你为什么在这里有一个数组。通常，使用 Mongoid 查询时，您应该有一个`Mongoid::Criteria`实例，您可以`desc(:created_by)`或`asc(:created_by)`在该实例上进行排序。

尽管如此，还是想不出任何原因`sort_by`对您不起作用，在我的应用程序上运行良好（只是在控制台上尝试过）。

**升级版：**

```
@user.following.each do |user|
   user.posts.each do |p|
    @posts << p
   end
end 
```

好吧，要在那里仍然有一个 mongoid 集合，可以这样做：

```
@posts = @user.following.map(&:posts).inject { |posts, post| posts.concat post } 
```

现在，您可以`@posts.desc(:created_at)`.

**UPD2：**

此外，为了获得更简洁的代码，您可以定义`posts_from_following`on `User`：

```
class User
  def posts_from_following
    following.map(&:posts).inject { |posts, post| posts.concat post }
  end
end 
```

然后，就做

```
@posts = @user.posts_from_following.desc(:created_at) 
```

在您的控制器中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-11T10:36:51.177

```
@posts.sort_by &:created_at

@posts.sort {|a, b| a.created_at <=> b.created_at } 
```

# c# - 如何将值动态设置为下拉列表？

> ID：11430630
> 
> 赞同：-1
> 
> 时间：2012-07-11T10:26:14.283
> 
> 标签：c#

让我们考虑一下我有两个日期字段。

```
DateTime dt1 = "01/04/2012"
DateTime dt2 = "31/08/2012" 
```

这里我的日期是“DD/MM/YYYY”格式。这里 dt1 是开始日期，dt2 是结束日期。从两个日期字段中，我可以知道它位于 04,05,06,07,08 月份。

所以我想在我的下拉列表中显示月份和年份的组合。

```
04/2012
05/2012
06/2012
07/2012
08/2012 
```

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-11T11:53:40.343

如果 Asp.net：

```
 DateTime dt1 = new DateTime();
    dt1 = DateTime.ParseExact("01/04/2012", "dd/MM/yyyy", CultureInfo.InvariantCulture);
    DateTime dt2 = new DateTime();
    dt2 = DateTime.ParseExact("31/08/2012", "dd/M/yyyy", CultureInfo.InvariantCulture);
    while (dt2 > dt1)
    {
        dt1 = dt1.AddMonths(1);
        this.dateDropDownList.Items.Add(dt1.ToString("MM / yyyy", CultureInfo.InvariantCulture));
    } 
```

如果窗口形式：

```
 DateTime dt1 = new DateTime();
    dt1 = DateTime.ParseExact("01/04/2012", "dd/MM/yyyy", CultureInfo.InvariantCulture);
    DateTime dt2 = new DateTime();
    dt2 = DateTime.ParseExact("31/08/2012", "dd/M/yyyy", CultureInfo.InvariantCulture);
    while (dt2 > dt1)
    {
        dt1 = dt1.AddMonths(1);
        this.dateComboBox.Items.Add(dt1.ToString("MM / yyyy", CultureInfo.InvariantCulture));
    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-11T10:35:28.263

```
 DateTime dt1 = new DateTime(2012,04,01);
        DateTime dt2 = new DateTime(2012,08,30);

        int firstMonth = dt1.Month;
        int lastMonth =dt2.Month;
        //Then you can compare the two numbers as you like 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-11T10:35:37.370

Something like below will give you a list of string, that you can use to bind to the drop down.

```
 DateTime dt1 = DateTime.ParseExact("01/04/2012", "d/M/yyyy", CultureInfo.InvariantCulture);
 DateTime dt2 = DateTime.ParseExact("31/08/2012", "d/M/yyyy", CultureInfo.InvariantCulture);
List<string> list = new List<string>();
while (dt2 > dt1)
     {
      list.Add(dt1.Month + "/" + dt1.Year);
      dt1 = dt1.AddMonths(1);
      } 
```

If you output it using foreach you will get:

```
 foreach (string str in list)
    {
        Console.WriteLine(str);
    }

4/2012
5/2012
6/2012
7/2012
8/2012 
```

Later if its ASP.Net (because you used dropdownlist), you can do

```
 DropDownList1.DataSource = list;
    DropDownList1.DataBind(); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-11T10:36:28.027

你可以这样做：

```
int firstMonth = Int32.Parse(dt1.Month);
int secondMonth = Int32.Parse(dt2.Month);
int year = Int32.Parse(dt1.Year);
// You could do some checking if the year is different or something.
for(int month = firstMonth; month <= secondMonth; month++)
    // Add the date to the drop down list by using (month + year).ToString() 
```

希望这可以帮助！

# c# - 如果 keySelector 很慢，如何优化 LINQ OrderBy？

> ID：11430631
> 
> 赞同：2
> 
> 时间：2012-07-11T10:26:19.053
> 
> 标签：c#, .net, linq, sorting, sql-order-by

我想使用可能需要一些时间来计算的值对对象列表进行排序。现在我有这样的代码：

```
public IEnumerable<Foo> SortFoo(IEnumerable<Foo> original)
{
    return foos.OrderByDescending(foo => CalculateBar(foo));
}

private int CalculateBar(Foo foo)
{
    //some slow process here
} 
```

上面代码的问题是它会为每个项目调用多次计算值，这不好。可能的优化是使用缓存值（可能是字典），但这意味着 SortFoo 必须在每次排序后清除缓存（以避免内存泄漏，我确实希望在每次`SortFoo`调用时重新计算该值）。

有没有更干净、更优雅的解决方案来解决这个问题？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2014-06-18T16:53:34.543

似乎`.OrderBy()`已经针对慢速进行了优化`keySelector`。

基于以下内容，`.OrderBy()`似乎缓存了`keySelector`您提供的委托的结果。

```
var random = new Random(0);
var ordered = Enumerable
    .Range(0, 10)
    .OrderBy(x => {
        var result = random.Next(20);
        Console.WriteLine("keySelector({0}) => {1}", x, result);
        return result;
    });
Console.WriteLine(String.Join(", ", ordered)); 
```

这是输出：

```
keySelector(0) => 14
keySelector(1) => 16
keySelector(2) => 15
keySelector(3) => 11
keySelector(4) => 4
keySelector(5) => 11
keySelector(6) => 18
keySelector(7) => 8
keySelector(8) => 19
keySelector(9) => 5
4, 9, 7, 3, 5, 0, 2, 1, 6, 8 
```

如果每次比较都运行一次委托，我会看到每个项目不止一次调用我的`keySelector`委托。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-07-11T10:56:17.220

因为在一个排序中每个项目都与其他项目进行了多次比较，所以您可以便宜地缓存每个项目至少一个计算。如果您经常针对相同的值运行计算，那么记忆函数将是您最好的选择，

```
public IEnumerable<Foo> SortFoo(IEnumerable<Foo> original)
{
    return foos
        .Select(f => new { Foo = f, SortBy = CalculateBar(f) })
        .OrderByDescending(f=> f.SortBy)
        .Select(f => f.Foo);
} 
```

这会将计算减少到每个项目一次

# android - 部署后缺少应用程序启动器

> ID：11430632
> 
> 赞同：3
> 
> 时间：2012-07-11T10:26:20.763
> 
> 标签：android, android-manifest

本周我得到了我的新三星 S3，并想在我的手机上部署一个项目。使用 Eclipse 部署它后，它可以正常启动并正常工作。

但是我在主菜单中找不到启动器。：-/（上次我重新启动设备然后它就在那里，但我认为这不是解决方案）

在设置 - 应用程序管理器 - 已安装的应用程序中，我可以找到该应用程序。

操作系统：Ubuntu 12.04 LTS Android 4.0.4 Eclipse Indigo 已安装最新 SDK

这是我的 android 清单文件。

```
<?xml version="1.0" encoding="utf-8"?>
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
    package="de.uniba.wiai.ktr"
    android:versionCode="1"
    android:versionName="1.0" >

    <uses-sdk android:minSdkVersion="15" />
    <uses-permission android:name="android.permission.WRITE_EXTERNAL_STORAGE"/>
    <uses-permission android:name="android.permission.ACCESS_FINE_LOCATION"/>
    <uses-permission android:name="android.permission.ACCESS_COARSE_LOCATION"/>
    <uses-permission android:name="android.permission.ACCESS_NETWORK_STATE"/>
    <uses-permission android:name="android.permission.CHANGE_NETWORK_STATE"/>
    <uses-permission android:name="android.permission.BATTERY_STATS"/>
    <uses-permission android:name="android.permission.WAKE_LOCK"/>
    <uses-permission android:name="android.permission.GET_TASKS"/>

    <application
        android:icon="@drawable/ktr"
        android:label="@string/app_name" android:logo="@drawable/ktr" android:debuggable="true">
        <activity
            android:name=".KTRStreamServiceActivity"
            android:label="@string/app_name" >
            <intent-filter>
                <action android:name="android.intent.action.MAIN" />

                <category android:name="android.intent.category.LAUNCHER" />
            </intent-filter>
        </activity>
        <activity android:name="KTRStreamConfiguration"></activity>
        <service android:name="KTRStreamService" android:icon="@drawable/ic_launcher" android:logo="@drawable/ic_launcher" android:exported="false">
        </service>
    </application>

</manifest>

Thanks 
```

添加：

使用 Nexus（也是 Android 4.0.4）测试了该工具，并且可以正常工作。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-11T14:29:42.783

过去我也遇到过同样的问题，问题在于`Application Icon Size`尝试使其更小并按正方形比例（遵循 android 网站中的图标设计指南）。

* * *

一些第三方启动器会忽略图标大小错误的应用程序。

# php - PHP 与 Python

> ID：11430635
> 
> 赞同：1
> 
> 时间：2012-07-11T10:26:26.967
> 
> 标签：php, python

这是我的 Python 代码：

```
import threading
import time
import MySQLdb
import sys

conn=MySQLdb.connect (host = "localhost",
        user = "root",
        passwd = "",
        db = "profiles_sheduleit")
cur = conn.cursor()

def activation():       
    while True:
        time.sleep(1)
        print time.time()

t = threading.Thread(name='activation', target=activation)
t.start() 
```

我通过以下方式从我的 php 页面调用此页面：

```
$result = exec("c:/python27/python f:/python/hello.py"); 
```

当单击此按钮时，我在 php 中有几个按钮，我应该创建一个新线程并且该线程应该运行 10 秒。

但是当我单击按钮时 m 无法单击另一个按钮，因为 python 脚本进入睡眠模式thanx

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-11T10:51:51.527

您的 python 脚本永远不会终止，因为您的线程由于您的`while True:`语句而永远运行。这会导致`exec`函数无限期地等待。所有 PHP 的类似 exec 的函数都是阻塞的，这意味着它们会等到它们调用的进程返回。

如果您想创建工作队列，请查看类似[gearman的内容。](http://gearman.org/)它本质上是一个允许异步执行的作业服务器。

# postgresql - 使用更改的权限恢复数据库

> ID：11430637
> 
> 赞同：0
> 
> 时间：2012-07-11T10:26:34.730
> 
> 标签：postgresql, privileges, grant, postgresql-9.0, pg-restore

我们有两个 PostgreSQL 服务器。在 web server1`pguser1`上，关联用户创建了使用 web 应用程序所需的所有数据库对象。假设所有对象都在`schema1`.
同样，在 server2 上`pguser2`为 Web 服务器 2 创建数据。

我从 server1 获取了模式备份（pgadmin 的备份窗口中的自定义选项）。当我恢复到 server2 时，我希望对象的所有权限和所有权`pguser2`都与`pguser1`.

如何做到这一点？如果可能，在还原期间的选项（pg_restore 命令）将是首选。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-11T20:33:12.240

`GRANT`如果您对非登录角色（又名组）具有特权和所有权，这将大大简化您的任务。让我们命名它`foo_admin`。在 server1 上，你

```
GRANT foo_admin TO pguser1; 
```

在 server2 上，你

```
REVOKE foo_admin FROM pguser1;
GRANT foo_admin TO pguser2; 
```

全部完成。或者更好：破解转储文件并`1`替换`2`为

```
GRANT foo_admin TO pguser1; 
```

..在你恢复之前。`pguser2`当然，必须先创建。

现在，只需确保，当您在 server1 上创建任何内容时

```
ALTER TABLE wuchtel12.game OWNER TO foo_admin; 
```

并设置权限。您可以为每个架构预设权限。就像是：

```
ALTER DEFAULT PRIVILEGES IN SCHEMA schema1
GRANT INSERT, SELECT, UPDATE, DELETE, TRUNCATE, REFERENCES, TRIGGER ON TABLES
TO foo_admin;

ALTER DEFAULT PRIVILEGES IN SCHEMA schema1
GRANT SELECT, UPDATE, USAGE ON SEQUENCES
TO foo_admin; 
```

这在 server1 和 server2 上同样有效。
[此相关答案中的更多详细信息和链接](https://stackoverflow.com/questions/10352695/grant-all-on-a-specific-schema-in-the-db-to-a-group-role-in-postgresql/10353730#10353730)。

* * *

您可能还对 pgAdmin 的 Grant Wizard 感兴趣。[此相关答案](https://stackoverflow.com/questions/10491208/how-to-grant-all-privileges-on-views-to-arbitrary-user/10491275#10491275)中的详细信息

# java - 使用 Ajax 发送的非 ASCII 字符无法在 Java 中正确解码

> ID：11430639
> 
> 赞同：0
> 
> 时间：2012-07-11T10:26:35.917
> 
> 标签：java, javascript, jquery, ajax, character-encoding

我正在使用 jQuery post() 发送 AJAX 请求并进行序列化。那使用UTF-8。例如，当 'ś' 是名称输入值时，JavaScript 显示`name=%C5%9B`. 我尝试设置表单编码但没有成功。

```
<form id="dyn_form" action="dyn_ajax.xml" style="display:none;" accept-charset="UTF-8"> 
```

同样的情况也发生在`encodeURI(document.getElementById("name_id").value)`. 我在 Tomcat 5.5 上使用 Servlet。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-18T14:30:47.990

我总是很难说服请求对象正确解码 URIEncoded 字符串。

我终于做了以下黑客攻击。

```
 try {
        String pvalue = req.getParameter(name);
        if (null != pvalue) {
            byte[] pbytes = pvalue.getBytes("ISO-8859-1");
            res = new String(pbytes, "UTF-8");
        }
    } catch (java.io.UnsupportedEncodingException e) {
        // This should never happen as ISO latin 1 and UTF-8 are always included in jvms.
    } 
```

我不是很喜欢这个，我停止开发servlet已经有一段时间了，但它已经在tomcat 5.5上，所以值得一试。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-11T10:29:52.063

我多次遇到这种问题。
验证您的页面是否以 UTF-8 编码保存。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-11T10:36:40.763

如果它真的是 UTF-8，请尝试`decodeURIComponent`.

# php - 如何将带有对象的php数组转换为简单数组？

> ID：11430645
> 
> 赞同：-4
> 
> 时间：2012-07-11T10:26:49.460
> 
> 标签：php, drupal

我有一个返回这样一个数组的函数

```
Array
(
    [0] => stdClass Object
        (
            [tid] => 1
            [vid] => 2
            [name] => About Us
            [description] => 
            [format] => wysiwyg_editor
            [weight] => 0
            [depth] => 0
            [parents] => Array
                (
                    [0] => 0
                )

        )

[1] => stdClass Object
    (
        [tid] => 200
        [vid] => 2
        [name] => Stories
        [description] => 
        [format] => wysiwyg_editor
        [weight] => 0
        [depth] => 0
        [parents] => Array
            (
                [0] => 0
            )

    ) 
```

)

为了简化它以供进一步使用，我想将此数组转换为简单的数组，其中键为 [tid]，值为 [name] 所以它会是这样的：

```
Array
(
    [1] => About Us
    [200] => Stories 
```

)

任何有关正确代码语法的提示或帮助都会很棒。谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-11T10:29:25.883

试试这个：

```
$result = array();
foreach ($data as $row) {
    $result[$row->tid] = $row->name;
}
var_dump($result); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-11T10:30:57.870

使用这个片段：

```
function transform($arr){
   $result = array();

   foreach($arr as $obj){
     $result[$obj->tid] = $obj->name;
   }

   return $result;
} 
```

# linq - 如何将此 LINQ 查询与 let 一起使用？

> ID：11430648
> 
> 赞同：0
> 
> 时间：2012-07-11T10:26:51.913
> 
> 标签：linq, entity-framework, linq-to-sql, c#-4.0

这是我的带有多个连接的 LINQ 查询：

它工作得很好，但我需要加强它的工作。

```
 var selectedResults=
    from InvoiceSet in Invoices
    join BookedAreaSet in BookedAreas on InvoiceSet.InvoiceID equals BookedAreaSet.InvoiceID
    join AreaSet in Areas on BookedAreaSet.AreaID equals AreaSet.AreaID
    join ContactSet in Contacts on InvoiceSet.ContactID equals ContactSet.ContactID
    join Contacts_ObjectsSet in Contacts_Objects on ContactSet.ContactID  equals Contacts_ObjectsSet.ContactID
    join CompanySet in Companies on Contacts_ObjectsSet.ObjectReferenceID  equals  CompanySet.CompanyID
    join Customer_CustomerGroupSet in Customer_CustomerGroup on Contacts_ObjectsSet.ObjectReferenceID equals Customer_CustomerGroupSet.CustomerID
    join CustomerGroupDiscountsSet in CustomerGroupDiscounts on Customer_CustomerGroupSet.CustomerGroupID equals CustomerGroupDiscountsSet.ID
    join InvoiceStatusSet in InvoiceStatus on InvoiceSet.InvoiceStatusID equals InvoiceStatusSet.ID
    where Contacts_ObjectsSet.ObjectReference=="Company" 
//let minDate=(BookedAreaSet.LeasedDate).Min() where BookedAreaSet.InvoiceID=InvoiceSet.InvoiceID
    select new {licensee=(CompanySet.CompanyName),CustomerGroupDiscountsSet.CustomerGroup,AreaSet.Location,InvoiceSet.InvoiceNumber,InvoiceSet.Amount,InvoiceSet.TotalDiscount,InvoiceSet.GST,
    Paid=(InvoiceSet.InvoiceStatusID==2 ? "Paid":"UnPaid"), 
    datePaid=(InvoiceSet.PaymentDate),InvoiceSet.PaymentDate//,miDate

    }; 
```

在查询中，我已经评论了我想要添加的内容以及在 Select 中评论的内容。从 BookedArea 表中，我想获取每个 invoiceID 的最小租赁日期。

我刚开始使用 LINQ，所以不知道该怎么做。

请指导我。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-20T04:39:48.583

尝试这个：

```
var selectedResults=
    from InvoiceSet in Invoices
    join BookedAreaSet in BookedAreas on InvoiceSet.InvoiceID equals BookedAreaSet.InvoiceID
    join AreaSet in Areas on BookedAreaSet.AreaID equals AreaSet.AreaID
    join ContactSet in Contacts on InvoiceSet.ContactID equals ContactSet.ContactID
    join Contacts_ObjectsSet in Contacts_Objects on ContactSet.ContactID  equals Contacts_ObjectsSet.ContactID
    join CompanySet in Companies on Contacts_ObjectsSet.ObjectReferenceID  equals  CompanySet.CompanyID
    join Customer_CustomerGroupSet in Customer_CustomerGroup on Contacts_ObjectsSet.ObjectReferenceID equals Customer_CustomerGroupSet.CustomerID
    join CustomerGroupDiscountsSet in CustomerGroupDiscounts on Customer_CustomerGroupSet.CustomerGroupID equals CustomerGroupDiscountsSet.ID
    join InvoiceStatusSet in InvoiceStatus on InvoiceSet.InvoiceStatusID equals InvoiceStatusSet.ID
    where Contacts_ObjectsSet.ObjectReference == "Company"
    join BookedAreaSet2 in BookedAreas on InvoiceSet.InvoiceID equals BookedAreaSet.InvoiceID into BookedAreas2
    let minDate = BookedAreas2.Select(ba2 => ba2.LeasedDate).Min()
    select new
    {
        licensee = CompanySet.CompanyName,
        CustomerGroupDiscountsSet.CustomerGroup,
        AreaSet.Location,
        InvoiceSet.InvoiceNumber,
        InvoiceSet.Amount,
        InvoiceSet.TotalDiscount,
        InvoiceSet.GST,
        Paid = InvoiceSet.InvoiceStatusID == 2 ? "Paid" : "UnPaid", 
        datePaid = InvoiceSet.PaymentDate,
        InvoiceSet.PaymentDate,
        minDate,
    }; 
```

# c# - 在面板中调整表格大小不起作用

> ID：11430651
> 
> 赞同：0
> 
> 时间：2012-07-11T10:27:13.517
> 
> 标签：c#, winforms, panel

我正在使用以下代码将表单加载到面板中，问题是如果主窗口调整大小，则表单不会随之调整大小。

```
frm = new frmShopFloorMonitor();
            frm.TopLevel = false;
            frm.Dock = DockStyle.Fill;
            frm.AutoSize = true;
            pnlMain.Controls.Add(frm);
            pnlMain.Dock = DockStyle.Fill; 
            frm.Show();
            frm.BringToFront(); 
```

有什么建议么？

功能区控件是在这里找到的：http: [//officeribbon.codeplex.com/](http://officeribbon.codeplex.com/)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-11T12:42:25.740

相反，我选择了不同的技巧，坚持使用 MDIParent 和子关系并执行以下操作：

1) 在 MDIParent 窗体上添加一个菜单条并将其 Visible 值更改为 false 2) 将 MDIChild 窗体上的以下内容更改为 false：ControlBox、MaximizeBox、MinimizeBox、ShowIcon、ShowInTaskBar 3) 将 MDIChild 窗体框架边框更改为无。

这使我可以创建一个最大化的子窗口而不显示标题栏！

# mysql - 显示每周每天的员工工作状态

> ID：11430652
> 
> 赞同：0
> 
> 时间：2012-07-11T10:27:21.973
> 
> 标签：mysql

我有一个查询：

```
SELECT 
    users.name AS USER, 
    TIMESHEET.timesheet_date AS DAY, 
    TIMESHEET.STATUS AS STATUS
FROM TIMESHEET
JOIN users ON TIMESHEET.`rep_id` = users.`id`
WHERE WEEK(TIMESHEET.timesheet_date) = WEEK(CURDATE()) - 1 
```

返回以下内容：每位员工，上周每个日期的工作状态：

（样本）

```
USER                DAY         STATUS
Lee Fenelon         2012-07-02  Working
Tom Price           2012-07-02  Working
Kevin Duffy         2012-07-02  Working
Keith Donnelly      2012-07-02  Working
Graham Foley        2012-07-02  Sick Leave - No Medical Cert
Dominic Mallinson   2012-07-04  1/2 Day Sick Leave - No Medical Cert 
```

我想做的是修改上述内容，以便我每周为每位员工获得 5 个状态，`STATUS_MONDAY = Working`即`STATUS_TUESDAY=Sick leave`等

所需的总体输出将是一份报告，该报告显示每个员工每天一栏及其当天的工作状态。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-11T10:50:24.687

可能是适合您的数据透视表。如果有效，您可以参考此[链接](http://en.wikibooks.org/wiki/MySQL/Pivot_table)

# actionscript-3 - 在贝塞尔曲线上创建动态文本字段 - AS3

> ID：11430653
> 
> 赞同：0
> 
> 时间：2012-07-11T10:27:26.497
> 
> 标签：actionscript-3, flash, textfield, bezier

我正在尝试将动态生成的文本放在贝塞尔曲线上 - 文本最长可达 12 个字符，因此需要调整到中心。

我在谷歌上找不到任何尝试这样做。

我唯一的猜测是读取贝塞尔曲线 xy，然后将文本字段放在上面，但我如何让文本字段适合曲线？

谢谢！

马库斯

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-11T13:45:53.907

如果你的曲线是圆弧或圆，我有适合你的东西：p 前段时间我做了两个类来处理这个问题，它们来了：

```
 package com.display{

    import flash.display.Sprite;

    import utils.Utils;

    public class PathText extends Sprite
    {
        private var _text:String;
        private var _chars:Array;
        private var _startAngle:Number;
        private var _stopAngle:Number;
        private var _radius:Number;

        public function PathText(__text:String, __radius:Number)
        {
            super();

            this.mouseChildren = false;
            this.mouseEnabled = false;
            _text = __text;

            _startAngle = 0;
            _radius = __radius;
            _chars = new Array();

            init();

        }

        private function init():void
        {
            for(var i:int = 0; i < _text.length; i++)
            {
                var char:Char = new Char(_text.charAt(i));
                _chars.push(char);
            }
            drawArc(_radius);
        }

        public function drawArc(rad:Number):void
        {
            var lastAngle:Number = 0;
            for(var i:int = 0; i < _chars.length; i++)
            {
                var angle:Number = 2 * Math.sin((_chars[i].width/2)/rad);

                _chars[i].rotation = radiansToDegrees(lastAngle) + 90;
                _chars[i].x = rad * Math.cos(lastAngle);
                _chars[i].y = rad * Math.sin(lastAngle);
                lastAngle += angle;
                addChild(_chars[i]);
            }

            _stopAngle = radiansToDegrees(lastAngle);
        }

        public function destroy():void
        {
            for(var i:int = _chars.length; i >= 0; i--) 
            {
                removeChild(_chars[i]);
                _chars.pop().destroy();
            }
        }

        public function get startAngle():Number
        {
            return _startAngle;
        }

        public function set startAngle(value:Number):void
        {
            _startAngle = value;
        }

        public function get stopAngle():Number
        {
            return _stopAngle;
        }

        public function set stopAngle(value:Number):void
        {
            _stopAngle = value;
        }

        private function radiansToDegrees(radians:Number):Number
        {
            return radians * 180 / Math.PI;
        }

    }
} 
```

和 Char 类：

```
package com.display
{
    import flash.display.Sprite;
    import flash.text.TextField;
    import flash.text.TextFieldAutoSize;
    import flash.text.TextFormat;

    public class Char extends Sprite
    {
        private var _str:String;

        public function Char(__str:String)
        {
            super();

            _str = __str;
            this.mouseChildren = false;
            this.mouseEnabled = false;
            init();
        }

        private function init():void
        {
            var _tf:TextField       = new TextField();
            _tf.defaultTextFormat   = new TextFormat("Some Font here", 15, 0xffffff);
            _tf.embedFonts          = true;
            _tf.mouseEnabled        = false;
            _tf.selectable          = false;
            _tf.text                = _str;
            _tf.autoSize            = TextFieldAutoSize.LEFT;
            _tf.width               = _tf.textWidth;
            addChild(_tf);
        }

        public function destroy():void
        {
            this.removeChildAt(0);
        }

        public function get str():String
        {
            return _str;
        }

        public function set str(value:String):void
        {
            _str = value;
        }

    }
} 
```

告诉我它是否适合你……干杯！

# c# - 是否可以将 Type.GetType 与动态加载的程序集一起使用？

> ID：11430654
> 
> 赞同：16
> 
> 时间：2012-07-11T10:27:31.113
> 
> 标签：c#, .net

假设我有一点代码：

```
public static void LoadSomething(Type t)
{            
    var t1 = Type.GetType(t.AssemblyQualifiedName);

    var t2 = t
        .Assembly
        .GetTypes()
        .First(ta => ta.AssemblyQualifiedName == t.AssemblyQualifiedName);
} 
```

发生的情况是 t1 为**null**而 t2**不是 null**。我很困惑，因为如果我这样称呼它......

```
LoadSomething(typeof(SomeObject)); 
```

那么**两者都不**是空的，但我实际上正在做的更像是这样的（不是真的，这被大大简化了，但它说明了我的观点）：

```
LoadSomething(Assembly.LoadFile(@"C:\....dll").GetTypes().First()); 
```

所以我的问题的第一部分（供我参考）是......

在第二种情况下，既然必须加载程序集并且我从中找到了类型，为什么`Type.GetType`返回 null？

其次（实际解决我的问题）......

当我只有程序集限定名称作为字符串时（我知道之前已使用 Assembly.Load 方法加载），是否有其他方法可以加载类型？

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2012-07-11T12:28:34.240

> 当我只有程序集限定名称作为字符串时（我知道之前已使用 Assembly.Load 方法加载），是否有其他方法可以加载类型？

是的。有一个[`GetType`过载](https://docs.microsoft.com/en-us/dotnet/api/system.type.gettype?view=netframework-4.8#System_Type_GetType_System_String_System_Func_System_Reflection_AssemblyName_System_Reflection_Assembly__System_Func_System_Reflection_Assembly_System_String_System_Boolean_System_Type__System_Boolean_)允许这样做。它需要一个“程序集解析器”函数作为参数：

```
public static Type LoadSomething(string assemblyQualifiedName)
{
    // This will return null
    // Just here to test that the simple GetType overload can't return the actual type
    var t0 = Type.GetType(assemblyQualifiedName);

    // Throws exception is type was not found
    return Type.GetType(
        assemblyQualifiedName,
        (name) =>
        {
            // Returns the assembly of the type by enumerating loaded assemblies
            // in the app domain            
            return AppDomain.CurrentDomain.GetAssemblies().Where(z => z.FullName == name.FullName).FirstOrDefault();
        },
        null,
        true);
}

private static void Main(string[] args)
{
    // Dynamically loads an assembly
    var assembly = Assembly.LoadFrom(@"C:\...\ClassLibrary1.dll");

    // Load the types using its assembly qualified name
    var loadedType = LoadSomething("ClassLibrary1.Class1, ClassLibrary1, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null");

    Console.ReadKey();
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2021-01-29T14:07:50.630

我遇到了同样的问题，我将程序集动态加载到当前的 appdomain 中，但`Type.GetType`不会从这些程序集中获取公共类型。不过，我不必提供组装解析器。我的程序集位于一个子目录中，并且在我将子目录添加到`app.config`文件中应用程序的探测路径后它开始工作。

```
<?xml version="1.0" encoding="utf-8"?>
<configuration>
    <startup> 
        <supportedRuntime version="v4.0" sku=".NETFramework,Version=v4.7.2"/>
    </startup>
    <runtime>
        <assemblyBinding xmlns="urn:schemas-microsoft-com:asm.v1">
            <probing privatePath="Modules;"/>
        </assemblyBinding>
    </runtime>
</configuration> 
```

**注意：**探测路径仅适用于应用程序目录分支内的路径。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-07-11T11:49:27.190

来自[http://msdn.microsoft.com/en-us/library/system.type.assemblyqualifiedname.aspx](http://msdn.microsoft.com/en-us/library/system.type.assemblyqualifiedname.aspx)

Type.AssemblyQualifiedName 属性

类型：System.String 类型的程序集限定名称，其中包括从中加载类型的程序集的名称，**如果当前实例表示泛型类型参数，则为 null。**

我认为这是因为方法签名将 t 作为类型。

# jquery - 按钮无法正常工作

> ID：11430666
> 
> 赞同：0
> 
> 时间：2012-07-11T10:28:03.247
> 
> 标签：jquery

我有 2 个按钮，我试图说明如果“1”按钮打开，则关闭“2”按钮，否则如果“2”按钮打开，则关闭“1”按钮。

但目前发生的情况是，如果我打开“2”按钮，然后打开“1”按钮，那么当“1”按钮打开而“2”按钮关闭时，这可以正常工作。但是，如果我然后尝试再次打开“2”按钮，它不会打开它，它保持关闭状态并且按钮“1”保持打开状态。有谁知道为什么会这样？

下面是代码：

```
function btnclick(btn)
{

$(btn).toggleClass("answerBtnsOff");
$(btn).toggleClass("answerBtnsOn");

    if ($("#answer1").hasClass('answerBtnsOn')) {
        $("#answer2").removeClass('answerBtnsOn').addClass('answerBtnsOff');
    }

    else if ($("#answer2").hasClass('answerBtnsOn')) {
        $("#answer1").removeClass('answerBtnsOn').addClass('answerBtnsOff');
    }

    return false;
} 
```

下面是 1 和 2 按钮的 html：

1 个按钮：

```
<input class="answerBtns answers answerBtnsOff"   id="answer1"  type="button"   value="1"   onclick="btnclick(this);"/> 
```

2 按钮：

```
<input class="answerBtns answers answerBtnsOff"    id="answer2"         type="button"   value="2"       onclick="btnclick(this);"/> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-11T10:49:32.953

您没有检查正在单击哪个按钮。

像这样的东西应该工作：

```
function btnclick(btn)
{
    var $btn = $(btn);
    var id = btn.id;
    var $otherBtn = id === "answer1" ? $("#answer2") : $("#answer1");

    $btn.toggleClass("answerBtnsOff");
    $btn.toggleClass("answerBtnsOn");

    if (btn.hasClass('answerBtnsOn') ) {
        $otherBtn.removeClass('answerBtnsOn').addClass('answerBtnsOff');
    }

    else if (btn.hasClass('answerBtnsOff')) {
        $otherBtn.removeClass('answerBtnsOn').addClass('answerBtnsOff');
    }

    return false;
} 
```

# image - Symfony 1.4 sfWidgetFormInputFileEditable 自定义

> ID：11430667
> 
> 赞同：3
> 
> 时间：2012-07-11T10:28:08.553
> 
> 标签：image, file, generics, symfony1, upload

我正在为我的用户使用 sfWidgetFormInputFileEditable 小部件来上传图像。

我想看看是否有办法改变它的默认工作方式。当用户添加“新”对象时，我希望它显示通用图片，当它是“编辑”时，它可以显示现有图片。我尝试编写一个 PHP 条件语句，但这对我不起作用，因为当它是一个“新”项目时，我无法提取参数“getPicture1”，因为它不存在。

我的小部件目前：

```
$this->widgetSchema['picture1'] = new sfWidgetFormInputFileEditable(array(
    'label' => ' ',
    'file_src' => '/uploads/car/'.$this->getObject()->getPicture1(),
    'is_image' => true,
    'edit_mode' => true,
    'template' => '<div>%file%<br />%input%</div>',
)); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-11T10:41:47.987

你有两个选择（第二个更容易）。

**第一种选择：**创建自己的`sfWidgetFormInputFileEditable`并扩展原始版本。

在一个文件中`lib/widget/myWidgetFormInputFileEditable.class.php`：

```
class myWidgetFormInputFileEditable extends sfWidgetFormInputFileEditable
{
  protected function getFileAsTag($attributes)
  {
    if ($this->getOption('is_image'))
    {
      if (false !== $src = $this->getOption('file_src'))
      {
        // check if the given src is empty of image (like check if it has a .jpg at the end)
        if ('/uploads/car/' === $src)
        {
          $src = '/uploads/car/default_image.jpg';
        }
        $this->renderTag('img', array_merge(array('src' => $src), $attributes))
      }
    }
    else
    {
      return $this->getOption('file_src');
    }
  }
} 
```

然后你需要调用它：

```
$this->widgetSchema['picture1'] = new myWidgetFormInputFileEditable(array(
  'label'     => ' ',
  'file_src'  => '/uploads/car/'.$this->getObject()->getPicture1(),
  'is_image'  => true,
  'edit_mode' => true,
  'template'  => '<div>%file%<br />%input%</div>',
)); 
```

**第二个选项：**检查对象是否是新的，然后使用默认图像。

```
$file_src = $this->getObject()->getPicture1();
if ($this->getObject()->isNew())
{
  $file_src = 'default_image.jpg';
}

$this->widgetSchema['picture1'] = new sfWidgetFormInputFileEditable(array(
  'label'     => ' ',
  'file_src'  => '/uploads/car/'.$file_src,
  'is_image'  => true,
  'edit_mode' => true,
  'template'  => '<div>%file%<br />%input%</div>',
)); 
```

# jquery - 在 jQuery 小部件中存储私有数据，真的是私有的吗？

> ID：11430668
> 
> 赞同：1
> 
> 时间：2012-07-11T10:28:11.690
> 
> 标签：jquery, jquery-widgets

我在网上搜索了一些时间，以找到一种将数据存储在我的小部件中的方法，该方法不会被损坏或滥用。

大多数我发现在小部件中使用它的建议。

```
_init: function() {
  this._internalData = {};
}, 
```

但是这个数据不是内部的:(

```
console.log($("#View1").JSTreeTable("").data().JSTreeTable._internalData); 
```

上面的代码提供了对内部数据的完全访问权限。

还有其他方法吗？

问候

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-11T10:56:39.693

使用`var`, 而不是`this`会使数据无法从“外部”获得：

```
_init: function() {
  var _internalData = {};
} 
```

# ios - iOS – UILocalNotification 触发两次相同的通知

> ID：11430669
> 
> 赞同：3
> 
> 时间：2012-07-11T10:28:13.757
> 
> 标签：ios, uilocalnotification

如果我安排两个`UILocalNotification`s 并将它们都设置为在完全相同的 fireDate 触发。然后在设备上（这不是模拟器错误）上的 fireDate`application:didReceiveLocalNotification:`将触发 4 次（每个通知 2 次）。这是一个已知的错误？因为我一直无法找到有关它的任何信息。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-11T11:09:29.017

请向[http://bugreport.apple.com](http://bugreport.apple.com)报告错误。

话虽如此，之前已经注意到虽然模拟器中存在错误，但设备上似乎也存在错误。

请参阅有关此 SO 问题的评论和答案：[本地通知“didReceiveLocalNotification”调用两次](https://stackoverflow.com/q/3227080/558933)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-11T11:13:17.013

试试这个它在我的应用程序中工作：

```
-(IBAction)setRemind:(id)sender{

NSCalendar *calendar = [NSCalendar autoupdatingCurrentCalendar];

NSDateFormatter *dateFormatter2 = [[NSDateFormatter alloc] init];

[dateFormatter2 setDateFormat:@"YYYY-MM-dd HH:mm:ss"];

//Gets our picker
NSDate *selectedTime = [datePicker date];
strDate2 = [dateFormatter2 stringFromDate:selectedTime];
NSDate *Date=[dateFormatter2 dateFromString:strDate2];

NSDateComponents *dateComponents = [calendar components:(NSYearCalendarUnit | NSMonthCalendarUnit | NSDayCalendarUnit ) fromDate:Date];

// Set up the fire time
NSDateComponents *dateComp = [[NSDateComponents alloc] init];
[dateComp setDay:[dateComponents day]];
[dateComp setMonth:[dateComponents month]];
[dateComp setYear:[dateComponents year]];
[dateComp setHour:9];
[dateComp setMinute:00];
[dateComp setSecond:00];
[dateComp release];

NSDate *date = [calendar dateFromComponents:dateComp];
[self scheduleAlarmForDate:date message:txtDescri.text];

}

-(IBAction)scheduleAlarmForDate:(NSDate*)date message:(NSString*)msg
{

//====== TO SEE OLD NOTIFI=======
UIApplication *Ap = [UIApplication sharedApplication];
NSArray *arr = [Ap scheduledLocalNotifications];
NSLog(@"Old Notifications :>> %@",arr);

UIApplication* app = [UIApplication sharedApplication];
UILocalNotification *alarm = [[UILocalNotification alloc] init];

// Create a new notification
alarm.fireDate = date;
NSLog(@"fireDate IS >> %@", alarm.fireDate);
alarm.timeZone = [NSTimeZone localTimeZone];
alarm.alertBody = msg;
NSLog(@"msg IS >> %@",msg);
alarm.alertAction = @"Show";
alarm.repeatInterval = 0;
alarm.soundName = UILocalNotificationDefaultSoundName;
alarm.applicationIconBadgeNumber = 1;
[app scheduleLocalNotification:alarm];
 [alarm release];
} 
```

我希望它对你有帮助。

# java - ListView 包含复选框滚动问题

> ID：11430670
> 
> 赞同：2
> 
> 时间：2012-07-11T10:28:22.577
> 
> 标签：java, android, android-listview, android-checkbox

我正在尝试创建一个`ListView`包含目录名称。`ListView`包含一个用于显示`TextView`文件夹名称和一个`checkbox`. 列表已成功创建，但是当我向上/向下滚动列表时，我遇到了复选框状态的问题。复选框的状态随机变化。为了保存复选框的状态，我使用了一个`HashMap<String, Boolean>,`字符串来连接目录的名称和布尔值 - 复选框状态。

下面是代码（对不起，长度）： MainActivity.java

```
public class MainActivity extends ListActivity implements OnClickListener {

    Button done, cancel, selectAll;

    ArrayList<String> m_list;
    HashMap<String, Boolean> m_checkedMap;

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);
        m_checkedMap = new HashMap<String, Boolean>();

        done = (Button) findViewById(R.id.bDone);
        cancel = (Button) findViewById(R.id.bCancel);
        selectAll = (Button) findViewById(R.id.bSelAll);
        done.setOnClickListener(this);
        cancel.setOnClickListener(this);

        new AsyncHandler(this).execute();
    }

    @Override
    protected void onListItemClick(ListView l, View v, int position, long id) {
        super.onListItemClick(l, v, position, id);
        Toast.makeText(this, m_list.get(position), Toast.LENGTH_SHORT).show();
    }

    @Override
    public void onClick(View view) {
        switch (view.getId()) {
        case R.id.bDone:
            //Update CheckedMap in DB
            Toast.makeText(this, m_checkedMap.values().toString(),
                    Toast.LENGTH_LONG).show();
            break;
        case R.id.bCancel:
            this.finish();
            break;
        }
    }

    public class AsyncHandler extends AsyncTask {

        Context context;
        public AsyncHandler(Context c) {
            context = c;
        }

        @Override
        protected void onPreExecute() {
            super.onPreExecute();
            Toast.makeText(context, "In onPreExecute()", Toast.LENGTH_SHORT)
                    .show();
        }

        @Override
        protected Object doInBackground(Object... arg0) {
            getList();
            return null;
        }

        @Override
        protected void onPostExecute(Object result) {
            // super.onPostExecute(result);
            setListAdapter(new ElementAdapter(context, m_list, m_checkedMap));
        }

        private void getList() {
            m_list = new ArrayList<String>();
            File root = new File("/");
            File[] files = root.listFiles();
            for (File f : files) {
                if (f.isDirectory() && !f.isHidden()) {
                    m_list.add(f.getName());
                    m_checkedMap.put(f.getName(), false);
                }
            }
            Collections.sort(m_list);
        }
    }
} 
```

适配器类

```
public class ElementAdapter extends ArrayAdapter {

    LinearLayout rowLayout;
    ArrayList<String> items = new ArrayList<String>();
    TextView tvElement;
    HashMap<String, Boolean> checkedMap;
    CheckBox cBox; 
    Context context;

    public ElementAdapter(Context c, ArrayList<String> elements,
            HashMap<String, Boolean> m_checkedMap) {
        super(c, R.layout.row, elements);
        this.items = elements;
        this.checkedMap = m_checkedMap;
        this.context = c;
    }

    @Override
    public View getView(final int position, View convertView, ViewGroup parent) {
        View view = convertView;
        if (view == null) {
            LayoutInflater vi = (LayoutInflater) context
                    .getSystemService(Context.LAYOUT_INFLATER_SERVICE);
            view = vi.inflate(R.layout.row, null);
        }

        rowLayout = (LinearLayout) view.findViewById(R.id.row);
        tvElement = (TextView) view.findViewById(R.id.tvElement);
        tvElement.setText(items.get(position));
        cBox = (CheckBox) view.findViewById(R.id.checkBox1);
        cBox.setOnClickListener(new OnClickListener() {
            public void onClick(View paramView) {
                if (cBox.isChecked()) {
                    //checkedMap.put(tvElement.getText().toString(), false);
                    checkedMap.put(items.get(position), false);
                } else if (!cBox.isChecked()) {
                    //checkedMap.put(tvElement.getText().toString(), true);
                    checkedMap.put(items.get(position), true);
                }
            }
        });
        cBox.setChecked(checkedMap.get(items.get(position)));
        return view;
    }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-11T10:30:12.247

出于与 ListView 滚动 CheckBox 问题相同的原因，我创建了一篇博客文章， [`ListView with CheckBox Scrolling Issue`](http://www.lalit3686.blogspot.in/2012/06/today-i-am-going-to-show-how-to-deal.html)

# javascript - JavaScript - 如何检查是否已添加事件

> ID：11430672
> 
> 赞同：28
> 
> 时间：2012-07-11T10:28:26.587
> 
> 标签：javascript, event-listener

我想为`beforeunload`. 这是我的伪代码：

```
if(window.hasEventListener('beforeunload') === false) {
     window.addEventListener('beforeunload', function() { ... }, false);
} 
```

但`hasEventListener`显然不存在。我怎样才能做到这一点？谢谢。

* * *

## 回答 #1

> 赞同：36
> 
> 时间：2015-02-19T13:22:51.833

事实上，无需检查是否将侦听器添加到目标：

> 如果多个相同的 EventListener 在同一个 EventTarget 上注册了相同的参数，则重复的实例将被丢弃。它们不会导致 EventListener 被调用两次，并且由于重复项被丢弃，因此不需要使用 removeEventListener 方法手动删除它们。

来源：[https ://developer.mozilla.org/en-US/docs/Web/API/EventTarget.addEventListener#Multiple_identical_event_listeners](https://developer.mozilla.org/en-US/docs/Web/API/EventTarget.addEventListener#Multiple_identical_event_listeners)

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2012-07-11T10:32:13.460

使用 jquery，您可以`data("events")`在任何对象（此处为窗口）上使用：

```
var hasbeforeunload = $(window).data("events") && $(window).data("events").['beforeunload']; 
```

但这仅适用于 jquery 添加的事件。

在更一般的情况下，您应该简单地将添加侦听器的信息存储在某处：

```
 var addedListeners = {};
   function addWindowListenerIfNone(eventType, fun) {
      if (addedListeners[eventType]) return;
      addedListeners[eventType] = fun;
      window.addEventListener(eventType, fun);
   } 
```

我认为 javascript 中没有标准的方法来获取现有的事件处理程序。充其量你可以附加 Node 的 addEventListener 函数来拦截和存储监听器，但我不推荐它......

**编辑 ：**

从 jQuery 1.8 开始，事件数据以`$._data(element, "events")`. 更改日志有一个应考虑的警告：

> 请注意，这不是受支持的公共接口；实际数据结构可能因版本而异。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2018-07-04T14:04:40.500

在 Chrome 开发工具中，您可以检查附加到元素的所有事件（用于调试）-

```
// print all events attached to document
var eventObjectAttachedToDocument = getEventListeners(document);

for (var event in eventObjectAttachedToDocument) {
    console.log(event);
} 
```

[![在此处输入图像描述](../Images/0d105f8040dc833baecc299680d279f3.png)](https://i.stack.imgur.com/xOhxn.png)

# php - 发布数组空提交

> ID：11430676
> 
> 赞同：1
> 
> 时间：2012-07-11T10:28:32.280
> 
> 标签：php, mysql, html, submit

嗨，我正在尝试提交表单，但是当我这样做时：

```
 var_dump($_POST); 
```

我得到：数组（0）{}

```
 <form action="avvikelse.php" method="POST" />
    <p>Operation step: <input type="int" name"operation_step" /></p>
    <p>Problem detail: <input type="text" name"problem_detail" /></p>
    <input type="submit" value="Submit" />
    </form> 
```

为什么？

谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-11T10:33:32.660

您表单中的 HTML 格式不正确。

```
<form action="avvikelse.php" method="post">
<p>Operation step: <input type="text" name="operation_step" /></p>
<p>Problem detail: <input type="text" name="problem_detail" /></p>
<input type="submit" value="Submit" />
</form> 
```

# jquery - ASP.Net MVC 使用 JQuery 获取 QueryString 值

> ID：11430678
> 
> 赞同：0
> 
> 时间：2012-07-11T10:28:36.387
> 
> 标签：jquery, asp.net-mvc-3, query-string

我正在开发一个 ASP.Net MVC 3 Web 应用程序。我有一个 Razor 视图，它使用户能够在数据库中创建一个新条目。在此创建视图中，有一个下拉列表，当用户选择一个选项时，将触发以下 JQuery 代码

```
$(document).ready(function () {

$("#gradeID").change(ChangeEventOfDDL);

function ChangeEventOfDDL() {
    var dropDownValue = $('#gradeID').val();
    //alert(dropDownValue);
    $.ajax({ type: "POST",
        url: '/FormEmployment/CreateSpecialtiesPartialView/' + dropDownValue,
        success: function (data) {
            $('#SpecialtiesContent').html(data);
        }
    });
}

}); 
```

正如您在此代码中看到的，我使用以下方法检索选定的下拉列表值

```
var dropDownValue = $('#gradeID').val(); 
```

当用户正在编辑条目时，我希望触发一段类似的代码，只是这次我想检索 QueryString 中的条目 ID，它看起来像这样

```
http://localhost:56354/FormEmployment/Edit/41 
```

有谁知道我如何使用 JQuery 获得值 41 或者这是否可能？

谢谢你的帮助。

托尼。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-11T10:44:54.700

如果您可以假设您想要获取的值始终在 url 中的最后一个斜杠之后，您可以尝试：

```
location.pathname.substring(location.pathname.lastIndexOf("/") + 1) 
```

通过使用 location.pathname，您不必担心查询字符串参数，因此 url 可以是`http://localhost:56354/FormEmployment/Edit/41?foo=bar`并且它仍然可以按预期工作。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-11T10:50:56.620

您在示例中所追求的值实际上是路径的一部分，而不是查询字符串的一部分。

如果您确实想从查询字符串中获取值，则可以执行以下操作：

```
getParameterByName: function (name) {
    name = name.replace(/[\[]/, "\\\[").replace(/[\]]/, "\\\]");
    var regexS = "[\\?&]" + name + "=([^&#]*)";
    var regex = new RegExp(regexS);
    var results = regex.exec(window.location.href);
    if (results == null)
        return "";
    else
        return decodeURIComponent(results[1].replace(/\+/g, " "));
} 
```

# javascript - 脚本冲突

> ID：11430680
> 
> 赞同：0
> 
> 时间：2012-07-11T10:28:49.150
> 
> 标签：javascript, jquery

我的页面上有 5 个脚本，我想总共添加它们，但不太确定如何添加。第一个是

```
<script type="text/javascript"><!--//--><![CDATA[//><!--
sfHover = function() {
var sfEls = document.getElementById("nav").getElementsByTagName("LI");
for (var i=0; i<sfEls.length; i++) {
    sfEls[i].onmouseover=function() {
        this.className+=" sfhover";
    }
    sfEls[i].onmouseout=function() {
        this.className=this.className.replace(new RegExp(" sfhover\\b"), "");
    }
}
}
if (window.attachEvent) window.attachEvent("onload", sfHover);
//--><!]]>
</script> 
```

由于我添加了库存控制消息更改，因此使用以下内容，重新加载不起作用。我添加了一个无冲突脚本，但我认为我没有正确添加它。我想将所有 5 个脚本（上方和下方）放在一个有效的标签中 - 任何人都可以帮忙吗？

```
<script language="JavaScript">
 // 
  function ImageLoadFailed() {
      window.event.srcElement.style.display = "None";
 }
 // reload after adding product  
 function AddProductExtras(){
     document.location.reload(true);
 }
 // for stock control - change message  
 function AddProductExtras(catalogId,productId,ret) {
     var td = document.getElementById('catProdTd_'+productId);
     if (td.innerHTML == 'This product is unavailable or out of stock.')
     td.innerHTML = 'Product added successfully.';
}
jQuery.noConflict();
</script> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-11T10:42:23.063

创建一个 js 文件并在其中粘贴所有 5 个脚本代码。并将此 javascript 文件包含在您的索引页面上：

```
<script type="text/javascript" src="name.js"></script> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-11T10:32:25.950

尝试在新的 js 页面中调用它并将其链接到您的主页。

```
 <script type="text/javascript" src="file.js"></script> 
```

# ruby - main 的未定义局部变量或方法“ie1”

> ID：11430681
> 
> 赞同：0
> 
> 时间：2012-07-11T10:28:54.123
> 
> 标签：ruby, internet-explorer, class, watir

我在 Radrails 中使用 watir 来测试我的应用程序。我在测试中使用了两个类，其中我还使用了变量@ie。下面是这两个类的代码：

一级：

```
class Title
def initialize(title,url,ie)
@title = title
@url=url
@ie=ie
@ie=Watir::IE.attach(:title, @title)  
rescue Watir::Exception::NoMatchingWindowFoundException
puts ("could not find browser")
$r.addtoReport(testReport, "check page element", "FAILED", "Page title " + @title +"   not found") 
else
@ie=Watir::IE.attach(:url, @url)
end
end 
```

二等：

```
class Text_pos
def initialize(text, object,ie)
@text=text
@object=object
@ie=ie
if @ie.contains_text(@text)
puts("Test for " + @object + " passed")
$r.addtoReport($testReport, "check " + @object, "PASSED", "Test for " + @object + " passed" )
else
puts("Test for " + @object + " failed")
puts (@ie.link(:text => /Exception:/))
h= @ie.link(:text => /Exception:/)
$r.addtoReport($testReport, "check " + @object, "FAILED", h.text) 
end
end
end 
```

稍后在测试主体中，我执行如下命令：

```
Text_pos.new("Glossary Of Terms", "login",ie)
Title.new("Company","http://ec2-50-16-62-110.compute-1.amazonaws.com:9100/bobsworld/BPM/Mtebpm000p0001Form.do?resetFilter_action=", ie1)
Text_pos.new("Title", "if page is loaded", ie1) 
```

但我得到错误 - `Test for login passed BPM/try.rb:106:in`'：未定义的局部变量或方法`ie1' for main:Object (NameError)`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-11T10:55:03.257

详细阐述 Željko Filipin 的评论：

```
Text_pos.new("Glossary Of Terms", "login",ie)
Title.new("Company","http://ec2-50-16-62-110.compute-1.amazonaws.com:9100/bobsworld/BPM/Mtebpm000p0001Form.do?resetFilter_action=", ie1)
Text_pos.new("Title", "if page is loaded", ie1) 
```

您在第一行使用 ie，但在第二行和第三行使用 ie1，这可能是一个错字。

# c# - 保存生成的随机数供以后使用

> ID：11430683
> 
> 赞同：-1
> 
> 时间：2012-07-11T10:29:01.753
> 
> 标签：c#, random

下面的代码会给我一个随机数：

```
Random r = new Random();
int srandom = r.Next(2147483647); 
```

我想将它保存到字符串/int/long 或其他方式，这样我就可以使用相同的数字。因此，例如，如果我现在调用 srandom，我会得到随机数，但过一会儿它会改变。我希望它保持不变。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-11T10:52:33.830

您可以在您的类中创建一个静态字段，并在程序生命周期中通过从静态构造函数设置它来初始化它：

```
public class YourClass{

    private static readonly int g_RandomInt;

    static YourClass(){
        g_RandomInt = new Random().Next();    
    }

    public void InstanceMethod()
    {
        Console.WriteLine(g_RandomInt);
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-11T10:36:10.867

您可以执行以下操作：

```
Globals8.GlobalInt8 = Globals8.GlobalInt8.HasValue ? Globals8.GlobalInt8 : srandom; 
```

并且您将变量 GlobalInt8 声明为可以为空的 int，如下所示：

```
public static class Globals8
{
    private static int? globalInt8 = default(int?);
    public static int? GlobalInt8 
    {
         get { return globalInt8;}
         set { globalInt8 = value;}
    }
} 
```

同样的事情也可以应用于 long 变量。这里发生了什么，您将值初始化为默认值，类似于引用对象中的 null 。之后，您检查变量是否具有值，然后忽略它。否则你设置它的值。

希望这很有用。

# actionscript-3 - 在 as3 中缩放对象

> ID：11430693
> 
> 赞同：1
> 
> 时间：2012-07-11T10:29:44.443
> 
> 标签：actionscript-3, object, scale

我在网上找到了这个功能，用于缩放对象并将它们保持在原始位置：

```
function scaleAroundPoint(target:DisplayObject, point:Point, scaleFactor:Number):void 
{ 
      var m:Matrix = target.transform.matrix; 
      m.translate( -point.x, -point.y ); 
      m.scale( scaleFactor, scaleFactor); 
      m.translate( point.x, point.y ); 
      target.transform.matrix = m; 

} 
```

当我一开始这样称呼它时：

```
 scaleArountPoint(obj, p, 0.9); 
```

该对象确实按比例缩小，但是，当我想将其恢复为原始大小时，显然这不起作用：

```
scaleArountPoint(obj, p, 1); 
```

因为 1 是对象的当前缩放比例。

那么我如何将它缩小到原来的比例呢？谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-11T12:41:52.857

您可以做到这一点的一种方法是存储目标的原始矩阵并始终将 scaleFactor 应用于此。

唯一的问题是这仅适用于一个对象，因为当对该函数进行一次调用时，将存储原点。

如果您想将此函数与任意数量的对象一起使用，则需要多考虑一下，但对于您开始使用它应该足够了。

```
import flash.display.Sprite;
import flash.geom.Point;
import flash.geom.Matrix;

var currentScaleFactor:int = 1;
var orig:Matrix;

function scaleAroundPoint(target:DisplayObject, point:Point, scaleFactor:Number):void 
{ 
  if(orig == null)
    orig = target.transform.matrix;

  var m:Matrix = orig.clone();
      m.translate( -point.x, -point.y ); 
      m.scale( scaleFactor, scaleFactor); 
      m.translate( point.x, point.y ); 
      target.transform.matrix = m; 
}

var spr:Sprite = new Sprite();
spr.graphics.beginFill(0x660000);
spr.graphics.drawCircle(100,100,100);
spr.graphics.endFill();

addChild(spr);

// set identity scale
scaleAroundPoint(spr, new Point(50,50), 1);

// try an arbitrary scale
scaleAroundPoint(spr, new Point(50,50), 0.2);

// revert to original scale
scaleAroundPoint(spr, new Point(50,50), 1); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-11T10:38:29.683

保存更改的比例。因此，当您这样做时`scaleAroundPoint(obj, p, 0.9)`，请将 0.9 保存在某处。

然后当你想缩放到原始尺寸时，缩放到`1 / currentScale`

请注意，当您多次调用 scaleAroundPoint（对于同一对象）时，您需要将新比例与当前比例相乘 ( `currentScale *= scaleFactor`)，因此如果您按 50% 比例缩放两次，它将理解新比例为 25原始比例的 %。

# design-patterns - 什么设计模式可用于更改？

> ID：11430694
> 
> 赞同：0
> 
> 时间：2012-07-11T10:29:50.143
> 
> 标签：design-patterns, uml

我正在为无线服务的应用程序建模。他们每年都会更改计划优惠。那么在类图中可以使用什么样的设计模式，使其可以每 1 年更改一次呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-11T12:11:58.287

这取决于细节，但这里会想到一些模式。如果计划的某些方面需要使用多种算法，您可以考虑使用策略。如果有适用于一般计划的高级算法，其中不同类型的计划的详细信息会有所不同，则模板方法可能会很有用。

然而，你需要仔细研究这个问题，看看模式是否真的能帮助你。您的问题的语气表明您可能对“模式感到满意”——寻找应用模式的地方，而不是受设计需求的驱动。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-11T11:37:09.693

我认为您不需要任何设计模式来模拟这种情况。

挑战在于确定所有计划的共同点——“核心计划”，如果你愿意的话。所有其他方面应该是子类的一部分，例如 PlanActivePerJune7th2012，或者存储为某种属性或键/值对。第一种方法的优点是您将拥有类型安全的方法和属性。另一个的优点是灵活性。

# c# - 更改绑定列表框中项目的选定状态

> ID：11430696
> 
> 赞同：0
> 
> 时间：2012-07-11T10:29:57.863
> 
> 标签：c#, windows-phone-7, binding, listbox, listboxitem

我正在尝试根据是否在项目绑定到的类中使用对象来更改绑定列表框中项目的选定状态，我似乎找不到这样做的方法，它必须保留动态的，因为对象可能会改变并因此在类的不同实例中使用：

```
 <Popup x:Name="ContextMenuPopup" Height="250" Width="300" Margin="1" VerticalAlignment="Stretch" HorizontalAlignment="Stretch">
            <Canvas Name="popupholder" Background="DarkSeaGreen" Height="250" Width="300" HorizontalAlignment="Center">
                <StackPanel Orientation="Vertical">
                <TextBlock Name="popupTitle" Text="Select Investments" Margin="20,0,0,0" FontFamily="Courier New" FontSize="22" HorizontalAlignment="Center" Foreground="Black" />
                <ListBox x:Name="investPicker" SelectionChanged="ListBox_SelectionChanged" LayoutUpdated="investPicker_LayoutUpdated" HorizontalContentAlignment="Center" VerticalContentAlignment="Center" Margin="10,20,0,0" SelectionMode="Multiple">
                    <ListBox.ItemTemplate>
                        <DataTemplate>
                            <StackPanel Orientation="Horizontal">
                                <TextBlock Text="{Binding Name}" Width="100"/>
                            </StackPanel>
                        </DataTemplate>
                    </ListBox.ItemTemplate>
                </ListBox> 
                    <Button Name="executeSelection" Content="Ok" Click="executeSelection_Click" Margin="40,5,0,0" VerticalAlignment="Bottom"/>
                </StackPanel>           
            </Canvas>
        </Popup> 
```

后面的代码是：

```
 private void ApplicationBarIconButton_Click_1(object sender, EventArgs e)
    {
        this.investPicker.ItemsSource = storedInvestments;

        foreach (Investment investment in investPicker.Items)
        {
            foreach (CardDataSet card in investment.attachedCards)
                if (card.ID == activeCard.ID)
                    VisualStateManager.GoToState((ListBoxItem) investPicker.Items[investment.ID -1], "Selected", true);
        }

        ContextMenuPopup.IsOpen = true;

    } 
```

现在显然代码不起作用，因为它是从我的类到 ListBoxItem 的无效转换，有人知道我该怎么做吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-11T10:39:19.430

看起来你只会有一个选定的项目，那么这个怎么样：

```
investPicker.SelectedItem = storedInvestments
    .FirstOrDefault(i => i.attachedCards.Any(c => c.Id == activeCard.ID)); 
```

或者，如果您有多个：

```
var matchingItems = storedInvestments
    .Where(i => i.attachedCards.Any(c => c.Id == activeCard.ID));

foreach (var i in matchingItems)
    investPicker.SelectedItems.Add(i); 
```

[编辑]

OP 不知道箭头运算符是什么`=>`意思，所以让我们澄清一下。它称为*lambda 表达式*，出于本次讨论的目的，您可以将其视为一个小的内联方法。

这个表达式：

```
i.attachedCards.Any(c => c.Id == activeCard.ID); 
```

可以理解为“i.attachedCards 是否包含 c.Id 等于 activeCard.ID 的任何卡片 c”。

所说的位`c => c.Id == activeCard.ID`表示一种方法，也可以写成：

```
static bool IsActiveCard(Card c) { return c.Id == activeCard.ID; } 
```

事实上，如果你要这样写，你可以将表达式更改为：

```
i.attachedCards.Any(IsActiveCard); 
```

表达式的其余部分是对`IEnumerable<T>`扩展方法的调用，该方法`Any`评估`attachedCards`序列中每个元素的方法，直到找到方法返回 true 的元素，或者序列结束。如果找到元素，则返回 true，否则返回 false。

那么这一点：

```
storedInvestments
    .FirstOrDefault(i => i.attachedCards.Any(c => c.Id == activeCard.ID)); 
```

可以读作“给我第一个匹配的投资 i 在存储投资中，其中 i.attachedCards 包含卡 c ...”等等。

它查找`storedInvestments`序列中内部表达式返回 true 的第一个元素。如果它没有找到任何东西，它会返回类型的默认值（很可能是`null`，除非`storedInvestments`是 a `struct`）。

我不会继续讨论技术细节，但如果你真的对这一切的工作原理感兴趣，Jon Skeet 写了[一系列](https://msmvps.com/blogs/jon_skeet/archive/tags/LINQ/default.aspx)关于它如何实际实现的精彩文章。强烈推荐。:)

# mysql - 我想添加一列，这个 MySQL 查询有什么问题？

> ID：11430699
> 
> 赞同：-1
> 
> 时间：2012-07-11T10:29:59.960
> 
> 标签：mysql, alter-table

这个查询有什么问题？

```
ALTER TABLE KARGO ADD COLUMN test VARCHAR(100) NOT NULL DEFAULT t 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-11T10:31:19.440

`DEFAULT t`位是错误的。

您需要引用默认值`DEFAULT 't'`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-11T10:33:27.740

默认值应该被引用，因为该字段是 varchar ，正确的语法：

```
ALTER TABLE KARGO ADD COLUMN testt VARCHAR (100) NOT NULL DEFAULT 't' 
```

# eclipse - Eclipse Juno：缺少“经典更新”

> ID：11430702
> 
> 赞同：0
> 
> 时间：2012-07-11T10:30:08.967
> 
> 标签：eclipse, eclipse-plugin, eclipse-juno

在我的项目中，我们通过“管理配置”的可能性来控制插件。下载的插件等通过文件位置的扩展点加载（由 SVN 管理）

事实证明，这是确保团队中所有开发人员共享相同配置的可靠方法。

我现在正在将我们的项目更新到 Juno，即使在首选项中启用“经典更新”后，菜单项“帮助”->“软件更新”->“管理配置”也丢失了。

[在http://help.eclipse.org/juno/index.jsp](http://help.eclipse.org/juno/index.jsp)的 juno 文档中似乎也缺少它

有什么帮助吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-16T19:17:35.010

更新管理器不久前被弃用，最终在 Juno (4.2) 中被删除。您可以使用[p2 director](http://help.eclipse.org/juno/index.jsp?topic=/org.eclipse.platform.doc.isv/guide/p2_director.html&cp=2_0_20_2)执行基于命令行的安装。

还有其他命令行应用程序可以帮助将现有更新站点中的功能镜像到可以在公司内部共享的本地目录或创建指向多个单独更新站点的复合存储库（有点像一站式购物），甚至可以在没有元数据的情况下获取功能和插件并准备它们以与 p2 导演一起使用的发布者。

编辑：此处提供了选项的快速浏览：http: [//pweclipse.blogspot.ca/2011/06/p2-cheatsheet.html](http://pweclipse.blogspot.ca/2011/06/p2-cheatsheet.html)

# wpf - TextBlock TextWrapping 没有包裹在 StackPanel 中

> ID：11430705
> 
> 赞同：22
> 
> 时间：2012-07-11T10:30:27.237
> 
> 标签：wpf, xaml

我有一个 StackPanel，但下面一行：

```
<TextBlock Grid.Row="1" Grid.Column="0" Text="{Binding Notes}" TextWrapping="Wrap"  /> 
```

不是包装文本。

```
<StackPanel Orientation="Vertical">
    <Grid>
        <Grid.ColumnDefinitions>
            <ColumnDefinition Width="auto" />
            <ColumnDefinition Width="auto" />
            <ColumnDefinition Width="auto" />
            <ColumnDefinition Width="*" />
            <ColumnDefinition Width="auto" />
            <ColumnDefinition Width="5" />
            <ColumnDefinition Width="15" />
        </Grid.ColumnDefinitions>
        <Grid.RowDefinitions>
            <RowDefinition />
            <RowDefinition />
        </Grid.RowDefinitions>

        <DockPanel Grid.Row="0" Grid.Column="0">
            <TextBlock FontWeight="Bold" Padding="0,0,5,0" Text="{Binding Path=Id, StringFormat='#\{0\}'}" />
            <TextBlock FontWeight="Bold" Padding="0,0,5,0" Text="{Binding Path=Name}" />
        </DockPanel>
        <TextBlock Grid.Row="0" Grid.Column="4" FontWeight="Bold" Text="{Binding Path=Time, StringFormat={}{0:HH:mm}}" />
        <Image
            Grid.Row="0"
            Grid.Column="6"
            HorizontalAlignment="Center"
            VerticalAlignment="Center"
            Source="{Binding Path=Image, Mode=OneWay, Converter={StaticResource ImageConverter}}" />

        <TextBlock Grid.Row="1" Grid.Column="0" Text="{Binding Notes}" TextWrapping="Wrap" />

        <Image
            Grid.Row="1"
            Grid.Column="4"
            HorizontalAlignment="Center"
            VerticalAlignment="Top"
            Source="{Binding Path=Picture, Mode=OneWay, Converter={StaticResource PictureConverter}}" />
    </Grid>
</StackPanel> 
```

`StackPanel`方向设置为“垂直”，但没有`TextBlock`继承它。

我哪里错了？

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2012-07-11T11:53:19.780

您的问题是使用`StackPanel`允许其子级填充所有可用空间的 —— 相应`StackPanel`地拉伸其内容的大小。尝试删除`StackPanel`并保留`Grid`- 这样您将限制其子项的大小，以限制网格使用的可用空间。

如果在您构建的布局中这还不够，请尝试在`TextBox`需要换行的地方设置 MaxWidth。

现在您的问题的根源还在于您被插入到具有无限大小（Width =“Auto”）`TextBox`的第一列中。`Grid`因此，将 Grid.Column="7" 设置为`TextBox`您想要的技巧（包装文本）。这是修改后的代码：

```
<Grid>
    <Grid.ColumnDefinitions>
        <ColumnDefinition Width="Auto" />
        <ColumnDefinition Width="Auto" />
        <ColumnDefinition Width="Auto" />
        <ColumnDefinition Width="*" />
        <ColumnDefinition Width="Auto" />
        <ColumnDefinition Width="5" />
        <ColumnDefinition Width="15" />
    </Grid.ColumnDefinitions>
    <Grid.RowDefinitions>
        <RowDefinition />
        <RowDefinition />
    </Grid.RowDefinitions>

    <DockPanel Grid.Row="0" Grid.Column="0">
        <TextBlock FontWeight="Bold" Padding="0,0,5,0" Text="{Binding Path=Id, StringFormat='#\{0\}'}" />
        <TextBlock FontWeight="Bold" Padding="0,0,5,0" Text="{Binding Path=Name}" />
    </DockPanel>
    <TextBlock Grid.Row="0" Grid.Column="4" FontWeight="Bold" Text="{Binding Path=Time, StringFormat={}{0:HH:mm}}" />
    <Image
        Grid.Row="0"
        Grid.Column="6"
        HorizontalAlignment="Center"
        VerticalAlignment="Center"
        Source="{Binding Path=Image, Mode=OneWay, Converter={StaticResource ImageConverter}}" />

    <TextBlock Grid.Row="1" Grid.Column="0" Grid.ColumnSpan="7" Text="{Binding Notes}" TextWrapping="Wrap" />

    <Image
        Grid.Row="1"
        Grid.Column="4"
        HorizontalAlignment="Center"
        VerticalAlignment="Top"
        Source="{Binding Path=Picture, Mode=OneWay, Converter={StaticResource PictureConverter}}" />
</Grid> 
```

# security - 如何在端口 80 上保护 Tomcat？

> ID：11430706
> 
> 赞同：0
> 
> 时间：2012-07-11T10:30:27.493
> 
> 标签：security, tomcat, web-applications

我对如何在我的 Web 应用程序中配置 Tomcat 5.0.30 以保护端口 80 有疑问。

我在 server.xml 文件中的当前配置是：

```
<Connector port="8443" 
           maxThreads="150" minSpareThreads="25" maxSpareThreads="75"
           enableLookups="false" disableUploadTimeout="true"
           acceptCount="100" debug="0" scheme="https" secure="true"
           clientAuth="false" sslProtocol="TLS" 
       keystoreFile="C:/Data/easyapIP/leaseplan/keystore/.keystore"
           keystorePass="aaassdddd" 
/> 
```

在 web.xml 文件中：

```
<context-param>
    <param-name>listenPort_https</param-name>
    <param-value>8443</param-value>
</context-param> 
```

这个配置的问题是我们的客户端不能再访问这里，因为 8443 端口被他们的防火墙阻止了。

似乎 80 是他们允许使用的唯一端口，所以我试图进行要求更改以保护该端口。

明显的变化是：

```
<Connector port="80" 
           maxThreads="150" minSpareThreads="25" maxSpareThreads="75"
           enableLookups="false" disableUploadTimeout="true"
           acceptCount="100" debug="0" scheme="https" secure="true"
           clientAuth="false" sslProtocol="TLS" 
       keystoreFile="C:/Data/easyapIP/leaseplan/keystore/.keystore"
           keystorePass="aaassdddd" 
/>

<context-param>
    <param-name>listenPort_https</param-name>
    <param-value>80</param-value>
</context-param> 
```

但我无法让它工作，我收到一个 SSL 错误连接。

我究竟做错了什么？

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-11T10:41:55.563

HTTPS 通信的标准端口是 443，您的用户很可能也可以使用它——只需点击`https://`未指定端口的 URL。在防火墙上阻止 443 是非常罕见的。

要进行测试，请将 server.xml 更改为：

```
<Connector port="443" 
           ...
/>

<context-param>
    <param-name>listenPort_https</param-name>
    <param-value>443</param-value>
</context-param> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-13T12:53:25.070

好吧，问题是防火墙阻止了端口 80。我们打开了该端口，并且在 Tomcat 中将端口 80 配置为 HTTPS 没有问题。

谢谢您的帮助！

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-11T18:28:30.863

您无法拥有安全的 Tomcat 5.0.30：该版本的 Tomcat (5.0) 已经有 8 年没有更新了。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-11T10:36:01.583

Your customer must access it through [https://somewhere.com](https://somewhere.com)**:80**/something

# iphone - [UIImage size]：消息发送到已释放实例 0x8452560

> ID：11430708
> 
> 赞同：0
> 
> 时间：2012-07-11T10:30:34.797
> 
> 标签：iphone, objective-c, rotation

我不知道为什么我的应用程序在第二次尝试旋转图像时出现错误

```
-(UIImage *)rotateImage:(UIImage *)image{
    // calculate the size of the rotated view's containing box for our drawing space
    CGSize rotatedSize = image.size;

    // Create the bitmap context
    UIGraphicsBeginImageContext(rotatedSize);
    CGContextRef bitmap = UIGraphicsGetCurrentContext();

    // Move the origin to the middle of the image so we will rotate and scale around the center.
    CGContextTranslateCTM(bitmap, rotatedSize.width/2, rotatedSize.height/2);

    //   // Rotate the image context
    CGContextRotateCTM(bitmap, DegreesToRadians(90));

    // Now, draw the rotated/scaled image into the context
    CGContextScaleCTM(bitmap, 1.0, -1.0);
    CGContextDrawImage(bitmap, CGRectMake(-image.size.width / 2, -image.size.height / 2, image.size.width, image.size.height), image.CGImage);

    UIImage *newImage = UIGraphicsGetImageFromCurrentImageContext();
    UIGraphicsEndImageContext();
    return newImage;

} 
```

我通过以下方式调用此函数：

```
 NSLog(@"%f %f",rotatedOriginImage.size.width,rotatedOriginImage.size.height);
    rotatedOriginImage = [self rotateImage:rotatedOriginImage]; 
```

在第一次登录时：

```
2012-07-11 17:22:50.825 meshtiles[3330:707] 600.000000 600.000000 
```

但在第二次：

```
2012-07-11 17:22:55.253 meshtiles[3330:707] *** -[UIImage size]: message sent to deallocated instance 0x8452560 
```

对此案有任何支持，请帮助我

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-11T10:46:05.860

如果您不使用 ARC，那么您`newImage`将从您的方法中返回一个自动释放的对象。当你拿回来时，你需要保留它。

`rotatedOriginImage = [[self rotateImage:rotatedOriginImage] retain];`

但是你必须记住在调用 rotateImage 之后也要释放它。所以你需要改变你的代码来做到这一点

# java - 当活动在android中启动时隐藏标题栏中的应用程序启动器图标

> ID：11430712
> 
> 赞同：7
> 
> 时间：2012-07-11T10:30:46.013
> 
> 标签：java, android, icons, android-actionbar, actionbarsherlock

我搜索了 SO 但没有找到类似的问题，因为我不确定如何在一个句子中分阶段。我正在使用 ActionBarSherlock，它带有一个徽标而不是启动器图标（即 72x72 图标），并且在活动的上角带有文本。

当活动第一次加载时，只有几分之一秒。在带有徽标的操作栏出现之前，我看到了清单中定义的启动器图标和标签（如下所示）。这个家庭活动非常简单，因此它不会进行任何可能导致延迟的额外加载。

```
<application
    android:hardwareAccelerated="true"
    android:icon="@drawable/launcher_icon"
    android:label="@string/app_name"
    android:screenOrientation="portrait" >

    <activity
        android:name=".SplashScreenActivity"
        android:label="@string/app_name"
        android:logo="@drawable/ab_logo"
        android:theme="@android:style/Theme.Light.NoTitleBar" >
        <intent-filter>
            <action android:name="android.intent.action.MAIN" />

            <category android:name="android.intent.category.LAUNCHER" />
        </intent-filter>
    </activity>

    <activity
        android:name=".HomeActivity"
        android:label="@string/homeitle"
        android:logo="@drawable/ab_logo"
        android:theme="@style/MyTheme" >
    </activity>

 </application> 
```

我可以通过将文本设置为与背景相同的颜色来使文本“消失”，但我找不到从活动中删除/隐藏启动器图标的方法。

我已经设置了一个启动屏幕活动（如上面的清单所示），它只是在出现问题的地方加载我的家庭活动。这确实有帮助，但有时在加载活动时问题仍然存在。

```
public class SplashScreenActivity extends Activity
{
   @Override
   public void onCreate(Bundle savedInstanceState)
   {
        super.onCreate(savedInstanceState);
   }

   @Override
   public void onResume()
   {
       super.onResume();
       Intent i = new Intent(getBaseContext(), HomeActivity.class);
       startActivity(i);
       finish();
   }
} 
```

有谁知道隐藏启动器图标和标题标签的方法，以便在显示 ActionBarSherlock 之前它不会出现？理想情况下，不需要启动画面，因为有多种访问活动的方法可以避免上面显示的启动画面。

--- 更新我的主题文件 ----

```
 <style name="MyTheme" parent="Theme.Sherlock.ForceOverflow">
    <item name="android:windowBackground">@color/white</item>
    <item name="android:actionBarStyle">@style/MyTheme.ActionBar</item>
    <item name="android:actionMenuTextColor">@color/white</item>
    <item name="actionBarStyle">@style/MyTheme.ActionBar</item>
    <item name="actionMenuTextColor">@color/white</item>
</style>

<style name="MyTheme.ActionBar" parent="Widget.Sherlock.Light.ActionBar.Solid.Inverse">
    <item name="android:background">@color/blue</item>
    <item name="android:titleTextStyle">@style/MyTheme.ActionBar.TitleTextStyle</item>
    <item name="android:displayOptions">showHome|useLogo</item>
    <item name="displayOptions">showHome|useLogo</item>
    <item name="background">@color/blue</item>
    <item name="titleTextStyle"> @style/MyTheme.ActionBar.TitleTextStyle</item>
</style>

<style name="MyTheme.ActionBar.TitleTextStyle" parent="@android:style/TextAppearance">
    <item name="android:textColor">@color/blue</item>
</style> 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-07-11T11:21:05.230

通过在样式中添加图标来修复它，与徽标相同。这会覆盖启动器图标。

```
 <style name="MyTheme.ActionBar" parent="Widget.Sherlock.Light.ActionBar.Solid.Inverse">
      <item name="android:background">@color/infostop_blue</item>
      <item name="android:titleTextStyle">@style/MyTheme.ActionBar.TitleTextStyle</item>
      <item name="android:displayOptions">showHome|useLogo</item>
      <item name="displayOptions">showHome|useLogo</item>
      <item name="android:icon">@drawable/ab_logo</item>
      <item name="icon">@drawable/ab_logo</item>
      <item name="background">@color/blue</item>
      <item name="titleTextStyle"> @style/MyTheme.ActionBar.TitleTextStyle</item>
    </style> 
```

# php - php数组在两个数组上唯一

> ID：11430718
> 
> 赞同：0
> 
> 时间：2012-07-11T10:31:12.113
> 
> 标签：php

两个 PHP 数组：

```
$array1 = array(1,2,3,4,5);
$array2 = array(1,2,3,4,5,6,7,8,9,10); 
```

现在我怎么能得到这样的数组：

```
$array3 = array(6,7,8,9,10); 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-11T10:32:23.173

与[`array_diff`](http://php.net/manual/en/function.array-diff.php)：

```
$array3 = array_diff($array2, $array1); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-11T10:33:57.033

使用 array_diff

```
$array3 = array_diff($array2, $array1) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-11T10:46:42.757

作为`array_diff`返回[相对补码](http://en.wikipedia.org/wiki/Complement_%28set_theory%29#Relative_complement)，您可以将此代码用于完整差异，其中差异应该在哪一侧进行并不重要：

```
$array3 = array_diff(array_merge($array1, $array2), array_intersect($array1, $array2)); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-11T10:51:36.700

```
$array1 = array(1,2,3,4,5);
$array2 = array(1,2,3,4,5,6,7,8,9,10);

$output = array_merge(array_diff($array1, $array2), array_diff($array2, $array1));
print_r($output); 
```

输出：

```
Array ( [0] => 6 [1] => 7 [2] => 8 [3] => 9 [4] => 10 ) 
```

# android - 如何在 Eclipse 上清理项目后重新生成 R.java？

> ID：11430721
> 
> 赞同：1
> 
> 时间：2012-07-11T10:31:22.700
> 
> 标签：android, eclipse

我正在使用 android 2.3.3 ，当我在 eclipse 上清理我的项目时，生成的类 R.java 被删除，我试图通过右键单击并选择 Android 工具来修复项目属性，但它不起作用。
如何重新生成 R.java ？
谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-05T04:02:24.190

在 Eclipse 中：选择 Help > check Updates... 选择 Installed Software 选项卡。单击更新... 如果有可用的 ADT 更新，选择它并单击完成。重新启动 Eclipse。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-11T10:35:29.797

If there are any errors in the layout or any resource files there will be no build happening and the `R.java` file will not be created.

Please solve the errors and then try to clean the project.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-08-07T21:54:50.207

此外，如果您尝试加速 eclipse 并且未选中 **Preferences -> General -> Startup and Shutdown -> Android Development Toolkit** 检查它并重新启动 eclipse，然后 R 将自动生成

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-26T15:31:21.107

每次清理项目并重建时，它都会导入

> 导入.android.R

因此，删除此导入并从 xml 文件中删除所有错误。它会起作用的。

# jsp - 可以将来自一个 servlet 的请求分派到 2 个或超过 2 个 jsp 页面

> ID：11430723
> 
> 赞同：1
> 
> 时间：2012-07-11T10:31:29.083
> 
> 标签：jsp, servlets, requestdispatcher

**我可以使用RequestDispatcher**将请求从一个 Servlet 分派到两个或两个以上的 jsp 页面吗？有没有可能？如果没有，是否有任何解决方案可以将请求从一个 servlet 分派到多个 jsp 页面？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-11T10:43:47.607

是的，您可以`any number of JSP'`使用`RequestDispatcher.include(..)`.

但是，您可以转发`only one JSP`使用`RequestDispatcher.forward(..)`.

您不能使用多次分派，`Forward`因为执行`RequestDispatcher.forward(..)`将提交并关闭和响应。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-11T10:43:44.547

您不能从单个 RequestDispatcher 调用中访问两个 jsp。您可以做的是将请求传播到使用 RequestDispatcher 将请求传播到另一个 jsp 的 jsp 等等....但是所有这些都是顺序 y 完成的，而不是同时完成的。

# c# - c# 在运行时编译

> ID：11430724
> 
> 赞同：0
> 
> 时间：2012-07-11T10:31:36.370
> 
> 标签：c#, asp.net

我正在开发一个 C# Web 应用程序，实际上用户将通过这个应用程序构建一个符合他要求的新 Web 应用程序。它将像一个对象关系映射在线平台。为此，我需要一个运行时编译器。我找到了一些 winforms 项目的示例，但没有找到用于 Web 应用程序运行时编译的示例。我可以从哪里开始有任何帮助或示例？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-11T10:34:53.927

There is no difference when compiling from a winform app or from a webform app ( a part from some trust issue you can have in a web application ). Just use [CodeDom](http://msdn.microsoft.com/en-us/library/y2k85ax6.aspx) features of the .NET framework.

# javascript - 如何从 div 元素中删除 data- 属性？

> ID：11430725
> 
> 赞同：3
> 
> 时间：2012-07-11T10:31:39.187
> 
> 标签：javascript, jquery

我有一个 html`div`元素，其中包含许多 HTML-5`data-`属性来存储额外的

数据与元素。我知道我们可以使用`removeAttr`jquery 来删除特定的属性，

但我想知道有什么方法可以一次性删除`data-`吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-11T10:33:28.073

不，您必须遍历它们并单独删除它们。例如：

```
var $div = $("selector for the div"),
    attrs = $div[0].attributes,
    name,
    index;
for (index = attrs.length - 1; index >= 0; --index) {
    name = attrs[index].nodeName;
    if (name.substring(0, 5) === "data-") {
        $div.removeAttr(name);
    }
} 
```

[现场复制](http://jsbin.com/abukon)| [资源](http://jsbin.com/abukon/edit)

...或类似的规定。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-07-11T10:40:08.683

不知道这样做的任何批发方式。你必须用类似的东西循环元素的属性

```
var el = document.querySelector('p');
for (var i=0; i<el.attributes.length; i++)
    if (/^data-/i.test(el.attributes[i].name))
        el.removeAttribute(el.attributes[i].name); 
```

# android - 地理编码示例不起作用

> ID：11430726
> 
> 赞同：0
> 
> 时间：2012-07-11T10:31:40.467
> 
> 标签：android, geocoding

我编写了一个简单的地理编码应用程序，但它不起作用。我已授予所有必要的权限。请有人告诉我哪里出错了。提前谢谢。

```
public class ForgeocdingActivity extends Activity {
    Geocoder gc;
    /** Called when the activity is first created. */
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);
        final EditText ed=(EditText)findViewById(R.id.editText1);
        Button b1=(Button)findViewById(R.id.button1);
        final String  to_add = ed.getText().toString();    
        b1.setOnClickListener(new OnClickListener() {

            @Override
            public void onClick(View arg0) 
            {
                try
                {
                List<Address> address2 = gc.getFromLocationName(to_add,3);

                if(address2 != null && address2.size() > 0)
                {
                         double lat1 = address2.get(0).getLatitude();
                         double lng1 = address2.get(0).getLongitude();
                         Toast.makeText(getBaseContext(), "Lat:"+lat1+"Lon:"+lng1, Toast.LENGTH_SHORT).show();
                }      
                }
                catch(Exception e)
                {
                    e.printStackTrace();
                }
            }
        });

    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-11T10:58:26.870

请为此编写以下代码

```
Geocoder geocoder = new Geocoder(this, Locale.getDefault());
List<Address> addresses = geocoder.getFromLocation(currentlat, currentlng, 1); 
```

现在地址列表包含最近的已知区域，并将此代码测试到真实设备中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-11T10:43:17.697

这是地理编码的工作示例：

```
Geocoder geocoder = new Geocoder(this, Locale.getDefault());
  try {
        List<Address> list = geocoder.getFromLocation(lat,long, 1);
        String address = list.get(0).getAddressLine(0) + ", " + list.get(0).getAddressLine(1) + ", " + list.get(0).getAddressLine(2);               
  } catch (IOException e) {
     e.printStackTrace();
  } 
```

其中“this”= 活动上下文，“long”= 经度，“lat”= 纬度

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-11T11:30:10.267

我认为您可以尝试从 address1 获取纬度和经度。然后您将从以下代码中获取纬度和经度 Listaddress = geocoder.getFromLocation(LATITUDE, LONGITUDE, 1);

# c++ - 使用 fork() 为每个孩子输出 1 个数组元素，C++

> ID：11430736
> 
> 赞同：1
> 
> 时间：2012-07-11T10:32:13.053
> 
> 标签：c++, fork

我有一个任务是从命令行获取一个字符串，将其反转并使用 fork() 在单独的子进程中输出每个字符。我只是没有从 fork() 调用中获得正确的输出。问题是索引在输出时会变得混乱，比如 3, 1, 2, 0 当它应该只是 3,2,1,0 ......等等......更令人困惑的是它随机成功时word 长度为 3 个字符（但并非总是如此），但通常对于 4 个以上字符的单词是不正确的。在没有 fork() 调用的情况下，循环可以正常工作。

这是我的主要功能，问题存在于for循环中。

```
int main(int argc, char **argv){
    pid_t childpid = 0;
    int i;
    char* invert = new char[strlen(argv[1])+1];
    int invert_length = strlen(argv[1]);
    strcpy(invert, argv[1]);
    for(i=invert_length-1; i>=0; i--){
        childpid = fork();
        if(childpid==(pid_t) 0){
            //I am the child            
            cout<<"Child ["<< i <<"] = "  << invert[i] <<"."<<endl;
            break;
        }
    }   
    return 0;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-11T10:53:20.713

对您的程序进行简单修改即可使其工作。让孩子做下一个叉子。每个进程都等待它产生的那个。

```
int main(int argc, char **argv){
    pid_t childpid = 0;
    int i;
    char* invert = new char[strlen(argv[1])+1];
    int invert_length = strlen(argv[1]);
    strcpy(invert, argv[1]);
    for(i=invert_length-1; i>=0; i--){
        childpid = fork();
        if(childpid==(pid_t) 0){
            //I am the child
            cout<<"Child ["<< i <<"] = "  << invert[i] <<"."<<endl;
            continue;
        }
        break;
    }
    wait(0);
    return 0;
} 
```

**编辑：** Skizz 反对每个进程在启动下一个进程之前执行其工作。问题中没有要求首先启动所有进程，但下面的版本会这样做。

```
int main(int argc, char **argv){
    pid_t childpid = 0;
    int i;
    char* invert = new char[strlen(argv[1])+1];
    int invert_length = strlen(argv[1]);
    strcpy(invert, argv[1]);
    for(i=0; i<invert_length; ++i){
        childpid = fork();
        if(childpid!=(pid_t) 0){
            wait(0);
            break;
        }
    }
    if (i-->0) cout<<"Child ["<< i <<"] = "  << invert[i] <<"." <<endl;
    return 0;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-11T10:39:46.840

问题是 fork 调用产生了一个新进程，复制了调用进程。当您在循环中执行此操作时，您现在有很多进程都希望同时执行。它们执行的顺序（因为 CPU 一次只能执行一个进程*）取决于操作系统，因为这是选择执行哪个进程的东西，因此输出变得不确定。

为了解决这个问题，每个生成的进程都需要知道何时输出，这意味着在进程之间使用某种同步。

笔记：

*   为简单起见，我忽略了超线程/多核。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-11T10:40:28.793

**编辑：**

您可以分叉，然后调用`wait`，从而满足硬件要求。我在下面的原始答案是如何在更复杂的环境（真正的应用程序）中运行它，以及如何利用在单独的进程中运行一些代码

`wait`如上所述添加

```
int main(int argc, char **argv){
    pid_t childpid = 0;
    int i;
    char* invert = new char[strlen(argv[1])+1];
    int invert_length = strlen(argv[1]);
    strcpy(invert, argv[1]);
    for(i=invert_length-1; i>=0; i--){
        childpid = fork();
        if(childpid==(pid_t) 0){
            //I am the child            
            cout<<"Child ["<< i <<"] = "  << invert[i] <<"."<<endl;
            break;
        }
        else {
          int stat;
              wait(&stat);
        }
    }   
    return 0;
} 
```

* * *

我同意@illusionoflife，但如果它的功课那么它一定是可能的

您可以为 SIGCHLD 设置一个事件处理程序（例如使用 libevent），然后在收到第一个 SIGGCHLD 等后启动下一个子进程

本练习的重点可能不是跨多个 CPU 的负载平衡，而是展示您可以使用[Copy On Write](http://en.wikipedia.org/wiki/Copy-on-write)执行的操作。

[这](https://stackoverflow.com/questions/10434218/libevent-signal-handling-sigchld-specifically)是我几个月前问的一个问题，让你开始

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-11T10:34:35.940

情况与 pthread 相同。不保证，孩子将按生成顺序执行。注意 SIGCHLD。

# ios - 如何将数据从 NSMutableArray 传递到 PowerPlot

> ID：11430738
> 
> 赞同：1
> 
> 时间：2012-07-11T10:32:13.923
> 
> 标签：ios, cocoa-touch, charts, nsmutablearray, plot

我有两个`NSMutableArrays`，一个是用`NSNumber`值填充的，另一个是用值填充的`NSDate`。有没有人可以帮助传递这个值来`PowerPlot`绘制一个线图，其中的`NSDate`值应该是 x 轴

我尝试了以下但没有奏效：

```
WSPlotAxis *axis = (WSPlotAxis *)[self.aView lastPlot].view;
[self.aView generateControllerWithData:[WSData dataWithValues:aTimeValues] plotClass:[WSPlotData class] frame:self.aView.frame]; 
```

# c# - 阻塞任务直到前一个任务完成

> ID：11430745
> 
> 赞同：0
> 
> 时间：2012-07-11T10:32:42.080
> 
> 标签：c#, c#-4.0

我有一个程序正在监视文件的更改，然后在发生更改时处理更新。

我需要能够同时处理不同文件的更改，但只能按顺序处理同一文件中的更改。

每个文件都有一个唯一的 id，所以目前我正在使用 ConcurrentDictionary 来监视当前正在处理和阻塞的任务，直到可以处理第二次更新：

```
private ConcurrentDictionary<int, ITask> activeTasks = 
    new ConcurrentDictionary<int, ITask>();

public bool TryProcessTask(ITask task)
{
    while(activeTasks.ContainsKey(task.Id))
    {
        Thread.Sleep(50);
    }

    activeTasks.TryAdd(task.Id, task);
    bool isProcessed = task.TryProcess();

    ITask t;

    activeTasks.TryRemove(task.Id, out t);

    return isProcessed;
} 
```

我想知道是否有人能告诉我一个更好的方法来做到这一点？

我会假设会有一个特定的 .NET 对象来满足这种情况？

谢谢，

**编辑**

为了澄清，我正在寻找类似于队列的东西，我可以将项目传递给它，如果没有其他具有相同 id 的项目将处理，否则它将阻塞，直到具有相同 id 的现有进程完成。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-11T10:36:55.017

使用任务并行库..

Task.Factory.StartNew(METHOD).ContinueWith(task => DispatcherHelper.Dispatch(() => { Mouse.OverrideCursor = null; }));

它将首先完成第一个任务，然后仅使用**continuewith启动新任务**

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-11T10:49:08.740

如果您想要异步调用，您可以使用 Task.Factory.Startnew() 否则使用 Parallel.ForEach() 。希望这会有所帮助..[这里](http://www.blackwasp.co.uk/ParallelForEach.aspx)和[这里](https://stackoverflow.com/questions/7887072/how-i-can-wait-till-the-parallel-foreach-completes)

# scala - 如何在 Scala 的 Play!2 中的表单中包含图片类型？

> ID：11430749
> 
> 赞同：4
> 
> 时间：2012-07-11T10:32:57.473
> 
> 标签：scala, playframework, playframework-2.0

根据[本指南](http://www.playframework.org/documentation/2.0.2/ScalaFileUpload)，可以通过手动编写 html 表单来上传文件。我想将文件上传作为包含文本字段（例如姓名和电子邮件）的更大表单的一部分来处理。这是我必须要做的（非常丑陋）：

```
def newUser = Action(parse.multipartFormData) { implicit request =>{   
    //handle file
    import play.api.mvc.MultipartFormData.FilePart
    import play.api.libs.Files.TemporaryFile

    var uploadSuccessful = true 
    var localPicture: FilePart[TemporaryFile] = null

    request.body.file("picture").map { picture =>
    localPicture = picture   }.getOrElse {
    uploadSuccessful = false   }

    //process the rest of the form
    signupForm.bindFromRequest.fold(
      errors => BadRequest(views.html.signup(errors)),
      label => {
        //file uploading code here(see guide), including error checking for the file.

        if(uploadSuccesful){
        User.create(label._1, label._2, label._3._1, 0, "NO PHOTO", label._4)
        Redirect(routes.Application.homepage).withSession("email" -> label._2)
        } else {
        Redirect(routes.Application.index).flashing(
        "error" -> "Missing file"
        }
      })
     }   } 
```

这对我来说看起来非常丑陋。请注意，我在某处定义了一个注册表格，其中包括所有字段（除了文件上传一个）。我的问题是：有没有更漂亮的方法来解决这个问题？也许通过在 signupForm 中包含文件字段，然后统一处理错误。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-12T12:52:17.783

到目前为止，我认为不可能直接将二进制数据绑定到表单，您只能绑定引用（例如图片的 ID 或名称）。但是，您可以重新编写代码：

```
def newUser() = Action(parse.multipartFormData) { implicit request => 
  import play.api.mvc.MultipartFormData.FilePart
  import play.api.libs.Files.TemporaryFile

  request.body.file("picture").map { picture =>
    signupForm.bindFromRequest.fold(
      errors => BadRequest(views.html.signup(errors)),
      label => {
        User.create(label._1, label._2, label._3._1, 0, picture.absolutePath(), label._4)
        Redirect(routes.Application.homepage).withSession("email" -> label._2)
      }
    )
  }.getOrElse(Redirect(routes.Application.index).flashing("error" -> "Missing file"))
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-04T17:34:13.657

您可以使用`asFormUlrEncoded`，如下所示：

```
def upload = Action(parse.multipartFormData) { request =>
  val formField1 = request.body.asFormUrlEncoded("formField1").head;
  val someOtherField = request.body.asFormUrlEncoded("someOtherField").head;
  request.body.file("photo").map { picture =>
    ...
  }
} 
```

# javascript - ExtJS 3 DataGrid：如何使标题菜单中的最后一个检查项处于非活动状态

> ID：11430751
> 
> 赞同：1
> 
> 时间：2012-07-11T10:33:02.027
> 
> 标签：javascript, extjs, extjs3

主题。

就我而言，我可以删除所有复选框 - 这是错误的。它应该像 Sencha GXT CheckBox Grid：http: [//i.stack.imgur.com/rhRCr.png](http://i.stack.imgur.com/rhRCr.png)

描述： 1）数据网格被渲染 2）点击排序菜单，选择“列” 3）以任何顺序隐藏一些列（例如 5 个中的 4 个） 4）最后一个菜单项应该像屏幕截图一样变为非活动状态。

最后一个 - 我的意思是它不是 id = (colCount - 1) 的项目。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-12T14:54:43.700

*GridView*负责处理*标题*菜单，这包括*列*菜单。但是 GridView 没有您要求的行为。

要完成此行为，您应该实现它。

正如我上面提到的，由视图控制的菜单，如果你检查文档和源代码，你会注意到视图有一个名为 colMenu 的属性，它指向列显示/隐藏菜单。你可以监听它的事件来实现行为。

这里我是如何完成这种行为的：

```
...
// we need to wait until the grid is rendered, because colMenu doesn't exist
// until the grid and its view is rendered.
grid.on( 'afterrender', function() {

    this.view.colMenu.on( 'itemclick', function( item, e ){

        // active will contain visible columns
        var active = [], i;

        // iterate through all menu items to find checked ones
        for ( i = 0; i < this.items.items.length, i++ ) {
            if ( this.items.items[ i ].checked ) active.push( this.items.items[ i ] );
        };

        // if there is only one active one, disable it
        if ( active.length == 1 ) {
            active[ 0 ].disable();

        // if there is more then one, enable the disabled ones
        } else if ( active.length > 0 ) {
            for( i = 0; i < active.length; i++ ) {
                if ( active[ i ].disabled ) active[ i ].enable();
            }
        }

    // buffer is important for our itemclick event listener.
    // it'll wait 100ms after default itemclick event to finish its job.
    }, this.view.colMenu, { buffer : 100 } );
} ); 
```

# google-maps-api-3 - Google Places API 自动完成功能不起作用

> ID：11430753
> 
> 赞同：1
> 
> 时间：2012-07-11T10:33:05.263
> 
> 标签：google-maps-api-3

现在，当我单击该位置时，自动完成框工作得很好，但是当我按下时，突出显示我想去的位置，然后按 Enter，它只是回到地图的主位置。对此有何见解？我在initialize()中调用了这个函数。我不知道我可能做错了什么。这只是一个谷歌api错误吗？如果是这样，关于如何解决它的任何见解？

```
function setupAutoComplete() {
    var defaultBounds = new google.maps.LatLngBounds(
        new google.maps.LatLng(-90, -180),
        new google.maps.LatLng(90, 180));

    var input = document.getElementById('placeSearch');
    var options = {
        bounds: defaultBounds,
        types: ['(regions)']
    };
    autocomplete = new google.maps.places.Autocomplete(input, options);

    google.maps.event.addListener(autocomplete, 'place_changed', function() {
        alert('hi'); 
        removeAllOverlays();
        var place = autocomplete.getPlace();
        var mapCenter = place.geometry.location;
        var colLat = mapCenter.lat() - (halfPoints)*latSeparation;
        var colLng = mapCenter.lng() - (halfPoints)*lngSeparation;
        var tempStart = new google.maps.LatLng(colLat, colLng);
        map.setCenter(mapCenter);
        pointArray[0][0] = tempStart;
        reService();
        mapSearch();
        drawBounds();
    });
} 
```

非常感谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-11T11:18:05.997

我猜`input#placeSearch`是放在一个`<form>`.

当您按 [ENTER] 时提交表单。

您可以删除周围的表单或通过添加以下内容取消提交：

```
onsubmit="return false" 
```

...到表单元素。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-23T12:16:51.303

我刚刚遇到了这个问题并进行了以下操作，因为我确实想在稍后阶段提交表单。此代码来自[谷歌群组](https://groups.google.com/forum/?fromgroups=#!topic/google-maps-js-api-v3/9v29754Vg0o)。

```
var input = document.getElementById('create-location');
var options = {
    //types: ['(cities)'],
};

autocomplete = new google.maps.places.Autocomplete(input, options);
google.maps.event.addDomListener(input, 'keydown', function(e) { 
    if (e.keyCode == 13) 
    { 
        if (e.preventDefault) 
        { 
            e.preventDefault(); 
        } 
        else 
        { 
            // Since the google event handler framework does not handle  early IE versions, we have to do it by our self. :-( 
            e.cancelBubble = true; 
            e.returnValue = false; 
        } 
    } 
}); 
```

# mysql - MySQL 在使用 IN(SUBQUERY) 时忽略索引？

> ID：11430754
> 
> 赞同：1
> 
> 时间：2012-07-11T10:33:06.777
> 
> 标签：mysql, in-subquery

我有以下查询。

```
SELECT MIN(col1) FROM table1 WHERE id1 IN (SELECT id2 FROM table2) 
```

这会产生大约需要 5 秒的输出。

但是，如果我将查询更改为作为两个单独的查询运行，例如：

```
SELECT id2 FROM table2
SELECT MIN(col1) FROM table1 WHERE id1 IN (_results_from_first_query_) 
```

然后这会产生大约 0.05 秒的输出。

EXPLAIN 显示以下内容（为可怕的缩进道歉）：

```
id  select_type     table   type    possible_keys   key     key_len     ref     rows    Extra
1   PRIMARY     table1 ALL  NULL    NULL    NULL    NULL    1107294     Using where
2   DEPENDENT SUBQUERY  table2 eq_ref   PRIMARY     PRIMARY     16  const,func  1   Using index 
```

对比

```
id  select_type     table   type    possible_keys   key     key_len     ref     rows    Extra
1   SIMPLE  table1  range   PRIMARY,id1     id1     8   NULL    12068   Using where 
```

为什么我使用子查询的查询不使用索引？

此外，如果 table2 中我的一组 ID 的大小超过 650，则在执行 IN(_results_from_first_query_) 示例时，索引也会由于某种原因被删除。为什么是这样？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-11T10:34:40.453

怎么样 ：：

在 table1 上为 id1 和 table2 为 id2 创建一个索引，查询应该是::

```
SELECT MIN(col1) FROM table1 

inner join table2 on id1=id2 
```

# java - 方向不变（操作栏和 ICS）

> ID：11430757
> 
> 赞同：0
> 
> 时间：2012-07-11T10:33:25.283
> 
> 标签：java, android, orientation, android-4.0-ice-cream-sandwich

我对 ICS 和操作栏有疑问。一开始，当我改变方向时，它起作用了，但是现在当我改变方向时，我有这个错误：

```
Caused by: android.support.v4.app.Fragment$InstantiationException: Unable to instantiate fragment 
com.descartes.application.MainActivity$DummySectionFragment: 
make sure class name exists, is public, and has an empty constructor that is public

Caused by: java.lang.InstantiationException: 
can't instantiate class com.descartes.application.MainActivity$DummySectionFragment; 
no empty constructor 
```

这是主要代码：

```
public class MainActivity extends FragmentActivity implements ActionBar.TabListener {

/**
 * The {@link android.support.v4.view.PagerAdapter} that will provide fragments for each of the
 * sections. We use a {@link android.support.v4.app.FragmentPagerAdapter} derivative, which will
 * keep every loaded fragment in memory. If this becomes too memory intensive, it may be best
 * to switch to a {@link android.support.v4.app.FragmentStatePagerAdapter}.
 */
SectionsPagerAdapter mSectionsPagerAdapter;

/**
 * The {@link ViewPager} that will host the section contents.
 */
ViewPager mViewPager;
private static int SCAN = 1;

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);

    Loc lc = new LocImpl(this);
    Localisation loc = lc.localiser();
    System.out.println(loc.toString());
    // Create the adapter that will return a fragment for each of the three primary sections
    // of the app.
    mSectionsPagerAdapter = new SectionsPagerAdapter(getSupportFragmentManager());

    // Set up the action bar.
    final ActionBar actionBar = getActionBar();
    actionBar.setNavigationMode(ActionBar.NAVIGATION_MODE_TABS);

    // Set up the ViewPager with the sections adapter.
    mViewPager = (ViewPager) findViewById(R.id.pager);
    mViewPager.setAdapter(mSectionsPagerAdapter);

    // When swiping between different sections, select the corresponding tab.
    // We can also use ActionBar.Tab#select() to do this if we have a reference to the
    // Tab.
    mViewPager.setOnPageChangeListener(new ViewPager.SimpleOnPageChangeListener() {
        @Override
        public void onPageSelected(int position) {
            actionBar.setSelectedNavigationItem(position);
        }
    });

    // For each of the sections in the app, add a tab to the action bar.
    for (int i = 0; i < mSectionsPagerAdapter.getCount(); i++) {
        // Create a tab with text corresponding to the page title defined by the adapter.
        // Also specify this Activity object, which implements the TabListener interface, as the
        // listener for when this tab is selected.
        actionBar.addTab(
                actionBar.newTab()
                        .setText(mSectionsPagerAdapter.getPageTitle(i))
                        .setTabListener(this));
    }
}

@Override
public boolean onCreateOptionsMenu(Menu menu) {
    getMenuInflater().inflate(R.menu.activity_main, menu);
    return true;
}

// Ecouteurs qui correspondent à chaque bouton présent dans la page
public boolean onOptionsItemSelected(MenuItem item) {
    switch (item.getItemId()) {
        case R.id.menu_camera:

            // app icon in action bar clicked; go home
            Intent intent = new Intent(this, ScanBarActivity.class);
            intent.putExtra("METHODE", "SCAN");
            startActivityForResult(intent, SCAN);
            return true;
        default:
            return super.onOptionsItemSelected(item);
    }
}

public void onTabUnselected(ActionBar.Tab tab, FragmentTransaction fragmentTransaction) {
}

public void onTabSelected(ActionBar.Tab tab, FragmentTransaction fragmentTransaction) {
    // When the given tab is selected, switch to the corresponding page in the ViewPager.
    mViewPager.setCurrentItem(tab.getPosition());
}

public void onTabReselected(ActionBar.Tab tab, FragmentTransaction fragmentTransaction) {
}

/**
 * A {@link FragmentPagerAdapter} that returns a fragment corresponding to one of the primary
 * sections of the app.
 */
public class SectionsPagerAdapter extends FragmentPagerAdapter {

    public SectionsPagerAdapter(FragmentManager fm) {
        super(fm);
    }

    @Override
    public Fragment getItem(int i) {
        Fragment fragment = new DummySectionFragment();
        Bundle args = new Bundle();
        args.putInt(DummySectionFragment.ARG_SECTION_NUMBER, i + 1);
        fragment.setArguments(args);
        return fragment;
    }

    @Override
    public int getCount() {
        return 4;
    }

    @Override
    public CharSequence getPageTitle(int position) {
        switch (position) {
            case 0: return getString(R.string.title_section1).toUpperCase();
            case 1: return getString(R.string.title_section2).toUpperCase();
            case 2: return getString(R.string.title_section3).toUpperCase();
            case 3: return getString(R.string.title_section4).toUpperCase();
        }
        return null;
    }
}

/**
 * A dummy fragment representing a section of the app, but that simply displays dummy text.
 */
public class DummySectionFragment extends Fragment {
    public DummySectionFragment() {
    }

    public static final String ARG_SECTION_NUMBER = "section_number";

    @Override
    public View onCreateView(LayoutInflater inflater, ViewGroup container,
            Bundle savedInstanceState) {

        Bundle args = getArguments();
        switch (args.getInt(ARG_SECTION_NUMBER)){
        case 1: 
             return inflater.inflate(R.layout.page_accueil, container, false);
        case 2:

            break;
        case 3:

            break;
        case 4:

            break;
        }
        TextView textView = new TextView(getActivity());
        textView.setGravity(Gravity.CENTER);
        textView.setText(Integer.toString(args.getInt(ARG_SECTION_NUMBER)));
        return textView;

    }
}

} 
```

我不明白错误在哪里，所以我问你，你能帮我吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-24T14:41:37.773

改变

```
public class DummySectionFragment extends Fragment 
```

至

```
public static class DummySectionFragment extends Fragment 
```

（或移动`DummySectionFragment`到单独的类文件）。

# tridion - Tridion 2011 SP1 中的复合模板基本设置

> ID：11430760
> 
> 赞同：-2
> 
> 时间：2012-07-11T10:33:29.753
> 
> 标签：tridion, tridion-2011

有人可以告诉我复合模板的基本设置吗？是否有 Tridion 提供的参考文件。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-11T10:48:26.917

您可以在本文档主题中找到有关 Tridion 模板模型的所有信息（需要登录）：

[http://sdllivecontent.sdl.com/LiveContent/content/en-US/SDL_Tridion_2011_SPONE/concept_1C08142900B34C21AC8A86DE54C9EECC](http://sdllivecontent.sdl.com/LiveContent/content/en-US/SDL_Tridion_2011_SPONE/concept_1C08142900B34C21AC8A86DE54C9EECC)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-07-11T10:48:35.993

有一个很好的培训可供使用，请参阅：

[http://www.sdl.com/services/education-certification/training-product/web-content-management/index-tab3.html](http://www.sdl.com/services/education-certification/training-product/web-content-management/index-tab3.html)

模块化模板和 Dreamweaver 以及 MS.NET 模板培训是您正在寻找的培训。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-08-29T17:55:22.687

需要记住的一些共同点，当然非常通用但仍然很重要。

1.  在模式命名中，在元素名称上使用小写字母，并用下划线 (_) 替换空格。

2.  将通用文本与编辑器一起使用 描述文本的术语

3.  要显示具有特定模式字段的约束，可以考虑模式方面

4.  始终以可重用性为目的创建 TBB。

5.  在 Dreamweaver 中，模板始终使用 RenderField 而不是`@@Component.FieldName@@`语法，以确保 SiteEdit 功能始终有效。

6.  在链接期间不要忘记使用“textonfail”属性。

7.  确保参数名称不与项目冲突。

8.  您可以借助不同的参数模式将 TBB 重新用于不同的目的。

可以记住许多更通用的点，并始终遵循最佳实践以避免返工。我希望社区可以扩展列表。

# zend-framework - 提供者“项目”不是有效的提供者

> ID：11430765
> 
> 赞同：1
> 
> 时间：2012-07-11T10:33:44.510
> 
> 标签：zend-framework, xampp, zend-tool

当我在命令控制台上创建一个项目时，我在 zend Framework 1.11 中遇到了一些错误，我还设置了我的环境变量流动方式。

下载 zendframe 工作提取并粘贴到 D:\xampp\php\

```
1st->  enviernment valriable set -> name: Path : .;D:\xampp\php\ZendFramework\bin;D:\xampp\php\ZendFramework\library\;D:\xampp\php\ZendFramework\bin\zf.bat

2nd-> System Path D:\xampp\php\

3rd->Copy zend folder from D:\xampp\php\ZendFramework\library into paste D:\xampp\php\PEAR
Php.ini

4th -> include_path = ".;D:\xampp\htdocs\ZendFramework\library;D:\xampp\php\PEAR"

5th -> then create project on command-> D:\xampp\htdocs->zf create project ProjectName 
```

请给我回应以显示错误 ASASP。谢谢比卡什·拉纳金

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-12T08:42:09.777

在为您进行一些研究之后，我确实发现了 Zend Tool 与 XAMPP 结合的问题。

请复制`zf.bat`到`zf.php`文件夹`D:\xampp\php`中。之后，它应该可以解决问题。

祝你好运！

# ruby-on-rails - Rails，将邮件发送到带有重音字符的地址

> ID：11430766
> 
> 赞同：2
> 
> 时间：2012-07-11T10:33:50.787
> 
> 标签：ruby-on-rails, utf-8, actionmailer, street-address

我通过 Rails、ActionMailer、1.9 Ruby 和 rails 3.0 发送电子邮件

一切都很好，我正在发送主题行和正文中带有重音字符的电子邮件，没有问题。我的字符集默认是 UTF-8。

但是，当我尝试向包含重音字符的地址发送电子邮件时，它失败了。我首先遇到了关于电子邮件地址无效并且需要完全限定的错误。

为了解决这个问题，我需要以 '"" ' 格式指定电子邮件地址。

但是它现在正在发送，但是邮件客户端地址中的字符显示为 =?UTF-8?Q?.... 这是正确的，Rails 正确地将我的 UTF8 地址编码到我的标题中。

但

我的邮件客户端在其显示中无法识别这一点，因此它在屏幕上呈现所有乱码。像实际文本一样乱码 =?UTF-8?Q?.... 出现在客户端的“收件人”字段中。

编码为 UTF8 等。字符集为 UTF8，传输编码可引用打印。

我错过了什么？它让我头疼！

此外，作为测试，我从我的 mac 邮件客户端向带有重音字符的地址发送了一封电子邮件。这在我的客户端中渲染得很好，但是标题完全不同......因为字符集是iso，传输编码是base64......所以我想我需要以某种方式更改actionmailer以不同方式编码我的邮件？即使用iso 和base64 编码让它玩得很好？

我试过这个但无济于事。我要么做错了，要么完全错过了这里的重点？从阅读各种论坛和网站，我需要以某种方式对标头字段进行编码，但我找不到我需要的答案，我需要确切地告诉我该编码是什么，更具体地说，我如何在 Rails 中做到这一点?

请帮忙！:-)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-18T13:00:23.273

终于解决了这个问题，如果您将电子邮件的本地部分用引号括起来，而将域部分不加引号，它会很有效。如果您不使用引号括起来，似乎 Mailer 正在对完整的电子邮件地址进行编码，因此会将编码中断到服务器。

例如 someébody@here.com 不会工作

“somébody”@here.com 将在哪里工作

路线通过罚款并在所有客户端显示正常。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-11T10:39:48.143

目前并不是所有的邮件服务器都支持`UTF-8`电子邮件地址（aka `SMTPUTF8` ），其中很多会做一些疯狂的事情（甚至是标题的内容格式错误）。您能否检查以确保您的编码标头一直通过邮件服务器并且没有被撕掉？

MTA 必须支持[RFC6530](https://www.rfc-editor.org/rfc/rfc6530)才能支持 UTF-8 地址，因此这可能不是您的应用程序的错误。

# java - 如何将 JavaScript 与 Selenium WebDriver Java 一起使用

> ID：11430773
> 
> 赞同：54
> 
> 时间：2012-07-11T10:34:25.650
> 
> 标签：java, javascript, selenium-webdriver

我想使用 Java 将 JavaScript 与 WebDriver (Selenium 2) 一起使用。

我遵循了一些指南和[*入门*页面](http://code.google.com/p/selenium/wiki/WebDriverJs#Getting_Started)：第一行有一条指令运行为：

```
$ ./go webdriverjs 
```

我的问题：上述命令将从哪个文件夹/位置运行/执行？

* * *

## 回答 #1

> 赞同：130
> 
> 时间：2012-07-11T19:24:51.643

根据您之前的问题，我想您想从 Java 的`WebDriver`. 如果我错了，请纠正我。

这`WebDriverJs`实际上“只是”另一种`WebDriver`语言绑定（到目前为止，您可以使用 Java、C#、Ruby、Python、JS 甚至更多语言编写测试）。这个尤其是 JavaScript，因此您可以使用 JavaScript 编写测试。

如果您想在 Java 中运行 JavaScript 代码`WebDriver`，请改为执行以下操作：

```
WebDriver driver = new AnyDriverYouWant();
if (driver instanceof JavascriptExecutor) {
    ((JavascriptExecutor)driver).executeScript("yourScript();");
} else {
    throw new IllegalStateException("This driver does not support JavaScript!");
} 
```

我也喜欢这样做：

```
WebDriver driver = new AnyDriverYouWant();
JavascriptExecutor js;
if (driver instanceof JavascriptExecutor) {
    js = (JavascriptExecutor)driver;
} // else throw...

// later on...
js.executeScript("return document.getElementById('someId');"); 
```

[您可以在此处、](https://www.selenium.dev/documentation/en/webdriver/browser_manipulation/#execute-script)文档中找到更多相关文档，或者最好[在`JavascriptExecutor`](https://www.selenium.dev/selenium/docs/api/java/org/openqa/selenium/JavascriptExecutor.html).

`executeScript()`也接受函数调用和原始 JS 。您可以从中`return`获取一个值，并且可以向它传递许多复杂的参数，一些随机示例：

1.

```
 // returns the right WebElement
    // it's the same as driver.findElement(By.id("someId"))
    js.executeScript("return document.getElementById('someId');"); 
```

2.  ```
     // draws a border around WebElement
     WebElement element = driver.findElement(By.anything("tada"));
     js.executeScript("arguments[0].style.border='3px solid red'", element); 
    ```

3.  ```
     // changes all input elements on the page to radio buttons
     js.executeScript(
             "var inputs = document.getElementsByTagName('input');" +
             "for(var i = 0; i < inputs.length; i++) { " +
             "    inputs[i].type = 'radio';" +
             "}" ); 
    ```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2015-07-08T13:04:24.937

**带有 Selenium WebDriver 的 JavaScript**

*Selenium 是最流行的自动化测试套件之一。Selenium 旨在支持和鼓励对基于 Web 的应用程序以及各种浏览器和平台的功能方面进行自动化测试。*

```
 public static WebDriver driver;
    public static void main(String[] args) {
        driver = new FirefoxDriver(); // This opens a window    
        String url = "----";

        /*driver.findElement(By.id("username")).sendKeys("yashwanth.m");
        driver.findElement(By.name("j_password")).sendKeys("yashwanth@123");*/

        JavascriptExecutor jse = (JavascriptExecutor) driver;       
        if (jse instanceof WebDriver) {
            //Launching the browser application
            jse.executeScript("window.location = \'"+url+"\'");
jse.executeScript("document.getElementById('username').value = \"yash\";");
// Tag having name then
driver.findElement(By.xpath(".//input[@name='j_password']")).sendKeys("admin");

//Opend Site and click on some links. then you can apply go(-1)--> back  forword(-1)--> front.
//Refresheing the web-site. driver.navigate().refresh();            
jse.executeScript("window.history.go(0)");
            jse.executeScript("window.history.go(-2)");
            jse.executeScript("window.history.forward(-2)");

            String title = (String)jse.executeScript("return document.title");
            System.out.println(" Title Of site : "+title);

            String domain = (String)jse.executeScript("return document.domain");
            System.out.println("Web Site Domain-Name : "+domain);

            // To get all NodeList[1052] document.querySelectorAll('*');  or document.all
            jse.executeAsyncScript("document.getElementsByTagName('*')");

            String error=(String) jse.executeScript("return window.jsErrors");
            System.out.println("Windowerrors  :   "+error);

            System.out.println("To Find the input tag position from top"); 
            ArrayList<?> al =  (ArrayList<?>) jse.executeScript(
                    "var source = [];"+
                    "var inputs = document.getElementsByTagName('input');"+
                    "for(var i = 0; i < inputs.length; i++) { " +
                       "   source[i] = inputs[i].offsetParent.offsetTop" +      //"    inputs[i].type = 'radio';"
                    "}"+
                    "return source"                 
                    );//inputs[i].offsetParent.offsetTop     inputs[i].type

            System.out.println("next");
            System.out.println("array : "+al);

            // (CTRL + a) to access keyboard keys. org.openqa.selenium.Keys 
            Keys k = null;
            String selectAll = Keys.chord(Keys.CONTROL, "a");
            WebElement body = driver.findElement(By.tagName("body"));
            body.sendKeys(selectAll);

            // Search for text in Site. Gets all ViewSource content and checks their.
            if (driver.getPageSource().contains("login")) {
                System.out.println("Text present in Web Site");
            }

        Long clent_height = (Long) jse.executeScript("return document.body.clientHeight");
        System.out.println("Client Body Height : "+clent_height);

        // using selenium we con only execute script but not JS-functions.

    }
    driver.quit(); // to close browser
} 
```

*要执行用户函数，将 JS 写入文件并读取为字符串并执行它以轻松使用。*

```
Scanner sc = new Scanner(new FileInputStream(new File("JsFile.txt")));
        String js_TxtFile = ""; 
            while (sc.hasNext()) {          
                String[] s = sc.next().split("\r\n");   
                for (int i = 0; i < s.length; i++) {
                    js_TxtFile += s[i];
                    js_TxtFile += " ";
                }           
            }
        String title =  (String) jse.executeScript(js_TxtFile);
        System.out.println("Title  : "+title); 
```

*document.title & document.getElementById() 是浏览器中可用的属性/方法。*

*JsFile.txt*

```
var title = getTitle();
return title;

function getTitle() {
    return document.title;
} 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2015-12-18T11:23:47.123

您也可以尝试通过 JavaScript 点击：

```
WebElement button = driver.findElement(By.id("someid"));
JavascriptExecutor jse = (JavascriptExecutor)driver;
jse.executeScript("arguments[0].click();", button); 
```

你也可以使用jquery。在最坏的情况下，对于顽固的页面，可能需要通过自定义 EXE 应用程序进行点击。但首先尝试明显的解决方案。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2018-09-05T14:19:40.320

没看到怎么给方法调用加参数，找了好久才找到，就在这里加了。如何将参数传入（到javascript函数），使用“arguments[0]”作为参数位置，然后在executeScript函数中将参数设置为输入参数。

```
 driver.executeScript("function(arguments[0]);","parameter to send in"); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2016-06-03T18:31:57.043

如果您想使用 javascript 执行器读取任何元素的文本，您可以执行以下代码：

```
WebElement ele = driver.findElement(By.xpath("//div[@class='infaCompositeViewTitle']"));
String assets = (String) js.executeScript("return arguments[0].getElementsByTagName('span')[1].textContent;", ele); 
```

在这个例子中，我有以下 HTML 片段，我正在阅读“156”。

```
<div class="infaCompositeViewTitle">
   <span>All Assets</span>
   <span>156</span>
</div> 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2020-03-10T11:58:16.433

以下代码对我有用：

```
import org.openqa.selenium.JavascriptExecutor;
import org.openqa.selenium.WebDriver;
import org.springframework.beans.factory.annotation.Autowired;

public class SomeClass {

    @Autowired
    private WebDriver driver;

     public void LogInSuperAdmin() {
        ((JavascriptExecutor) driver).executeScript("console.log('Test test');");
     }
} 
```

* * *

## 回答 #7

> 赞同：-1
> 
> 时间：2018-07-31T20:17:22.017

我有类似的情况并像这样解决它：

```
WebElement webElement = driver.findElement(By.xpath(""));
webElement.sendKeys(Keys.TAB);
webElement.sendKeys(Keys.ENTER); 
```

* * *

## 回答 #8

> 赞同：-3
> 
> 时间：2012-07-12T14:12:47.523

您需要在 Selenium SVN 存储库签出的顶级目录中运行此命令。

# php - 这是什么格式[类似于json]？

> ID：11430775
> 
> 赞同：1
> 
> 时间：2012-07-11T10:34:31.567
> 
> 标签：php, javascript, arrays, json

我想开发从广播时间 api 读取一些数据的网站。

它生成如下内容：

```
({"env":"production","schedulerTime":"2012-07-11 14:44:34","previous":{"name":"作者：Jalale Ale Ahmad - Modire Madrese [www.audiolib .ir]","starts":"2012-07-11 09:30:48.228571","ends":"2012-07-11 10:01:00.087571","type":"track"},"current ":{"name":"作者：Jalale Ale Ahmad - Modire Madrese [www.audiolib.ir]","starts":"2012-07-11 10:01:00.087571","ends":"2012- 07-11 10:31:11.217571","media_item_played":true,"record":0,"type":"track"},"next":{"name":"作者：Jalale Ale Ahmad - Modire Madrese [www.audiolib.ir]","开始":"2012-07-11 10:31:11.217571","结束":"2012-07-11 11:01:17.567071","type":"track"},"currentShow":[{"start_timestamp":"2012-07-11 13:58:00","end_timestamp ":"2012-07-11 16:00:00","name":"Untitled Show","id":36,"instance_id":36,"record":0,"url":"","开始":"2012-07-11 13:58:00","结束":"2012-07-11 16:00:00"}],"nextShow":[],"timezone":"IRDT", "timezoneOffset":"16200","AIRTIME_API_VERSION":"1.0"})"name":"Untitled Show","id":36,"instance_id":36,"record":0,"url":"","starts":"2012-07-11 13:58:00" ,"ends":"2012-07-11 16:00:00"}],"nextShow":[],"timezone":"IRDT","timezoneOffset":"16200","AIRTIME_API_VERSION":"1.0" })"name":"Untitled Show","id":36,"instance_id":36,"record":0,"url":"","starts":"2012-07-11 13:58:00" ,"ends":"2012-07-11 16:00:00"}],"nextShow":[],"timezone":"IRDT","timezoneOffset":"16200","AIRTIME_API_VERSION":"1.0" })
```

它不是 JSON，那是什么？以及我应该如何将其转换为 php 或 javascript 数组？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-11T10:38:31.327

它似乎是有效的 JSON ..在[http://jsonlint.com/](http://jsonlint.com/)中检查它...

您可以使用将其转换为数组`json_decode($output, true);`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-11T10:39:26.170

这绝对是 JSON。您只需跳过数据开头和结尾的圆括号。json_decode PHP 函数应该能够为您解码它。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-11T10:37:39.167

它似乎是 json（只需去掉第一个圆括号）。

您可以使用下面的免费在线工具来验证它

[http://jsonlint.com/](http://jsonlint.com/)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-11T10:56:25.380

虽然它不是有效的 JSON，但它看起来像带有额外括号的 JSON。正如 Felix 所提到的，它可能是一个没有函数名的 JSON-P 打包响应。请查看 API 文档以了解如何提供它，或者，如果您可以在接收后和传递给 JSON.parse 之前对数据进行后处理，则只需`()`手动删除。

# rest - 找不到时如何处理 Web API（“REST”）中的嵌套资源？

> ID：11430778
> 
> 赞同：5
> 
> 时间：2012-07-11T10:34:38.770
> 
> 标签：rest, web, asp.net-web-api

假设我有一个资源`Person`，而在一个人身上我有一个嵌套的资源`SomeResource`。在以下情况下应该返回哪个状态码以及为什么？

```
/Person/1/SomeResource (SomeResource does not exist)
/Person/1/SomeResource (Person does not exist) 
```

我认为在这两种情况下都应该使用 404，但不是每个人都同意，我想知道为什么。您可能会争辩说这`Person`是基础资源，`SomeResource`只是该资源的“属性”，`SomeResource`因此在第一种情况下的请求应该不返回任何内容，但在第二种情况下返回 404。我认为这可能是一个选择，但我仍然更喜欢 404。我根本不喜欢的另一种情况是返回 500 并带有错误描述，这也是我在讨论中听到的另一种选择，但这会迫使消费者针对我不喜欢的异常进行编程。500 对我来说意味着出了点问题，你真的无能为力。

问题是争论是你不知道为什么你得到一个 404 如果你得到它，是因为`Person`不存在还是因为`SomeResource`不存在。

**更新1：** 也许我应该突破`SomeResource`到一个单独的资源，比如

```
/SomeResource/1 
```

它返回类似的响应`{data: {the data}, person: {person data}}`，并且仅在两者都丢失时返回 404，但如果数据丢失，则返回 200 并返回空数据。

**更新 2：** 我想我知道要使用哪个状态码，当这个人不存在时它是 400，因为我当时认为这是一个你不应该做的请求，也就是说，一个错误的请求。什么时候`SomeResource`丢失，我会选择 404，因为它`Person`确实存在，但嵌套资源丢失了。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-11T13:35:10.543

记住给定的 URI 旨在识别*单个*“资源”可能会有所帮助。从语义上讲，URI 结构不支持“嵌套”资源的概念。似乎您有两个资源：`Person`&`SomeResource`在您的场景中与 .`SomeResource`有某种关系`Person`。您可以尝试这样的结构来表示这种关系：

```
GET /person/1

{
    name: "Some Value",
    someResource: {
        "Href": "http://yourSite.com/someresource/123",
        "Title": "Get some resource for this specific person"
    },

    // other key/value pairs as appropriate...
} 
```

这样，您就不会使 400 和 404 具有应用程序特定的含义。如果客户端收到了一个有效的 Person 结果，它会简单地调用`SomeResource`href 并且会收到适当的 404 或不取决于`SomeResource 123`现有的。如果`Person`URI 不存在，调用它会适当地返回 404，因为它不存在。

# html - 角色的角色实体

> ID：11430780
> 
> 赞同：0
> 
> 时间：2012-07-11T10:34:41.233
> 
> 标签：html, character-entities

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-11T10:39:07.903

它叫 *大向下箭头* ▼ `&#9660;`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-11T14:07:15.993

如果您知道如何键入字符本身或将其保存在文件中，那么您可以找到 Unicode 编号，例如通过在 Word 中打开文件，将光标放在字符后面并输入 Alt X。这会将字符更改为数字。或者您可以在 BabelPad 编辑器中打开文件并将光标移动到字符之前；BabelPad 在其窗口的底部显示数字。

如果您只从印刷品中认识一个字符，或者需要从其图形形状中识别一个字符，您可以使用[http://shapecatcher.com/](http://shapecatcher.com/)（对于像这样的“填充”字符有点笨拙，但对于更正常的人物）。

一旦您知道 Unicode 编号，在本例中为 25BC，您就可以构造一个字符引用：`&#x25bc;`. 如果您更喜欢十进制数字，您可以使用计算器，然后使用`&#9660;`. 但是十六进制数字通常更利于代码的可读性，因为字符数字通常是用十六进制编写的。（这个字符的 Unicode 名称是 BLACK DOWN-POINTING TRIANGLE。）

[在HTML 4.01 实体](http://www.w3.org/TR/html401/sgml/entities.html)中，甚至在提议的[HTML5 实体](http://www.whatwg.org/specs/web-apps/current-work/multipage/named-character-references.html#named-character-references)中（称为“命名字符引用”），都没有为这个字符定义实体。但是一个实体不会特别有用；实体名称不是很容易记忆，并且（数字）字符引用可用于任何字符。

# xml - 使用 Ant 将 pmd 任务添加到 build.xml

> ID：11430788
> 
> 赞同：0
> 
> 时间：2012-07-11T10:34:57.223
> 
> 标签：xml, ant, pmd

我是 Ant 的新手。我已经创建了一个基于 ruleset.xml 生成 pmd 的 ant 任务。当我执行 ant pmd 时，下面的代码不起作用。我想知道这段代码是否有任何问题。

*   toFile 应该是整个路径（D:\Jenkins）还是根目录本身的基础之一？
*   我可以在不依赖任何其他任务的情况下运行 pmd 任务吗？会不会有问题？
*   显示规则集标记时出现问题，例如应该跟随 > 或 /> 或属性元素？：

    ```
    <path id="pmd.classpath">
    <fileset dir="/lib/runtime">
     <include name="**/*.jar"/>
     </fileset>
        </path>

    <target name="pmd" depends="init">
    <taskdef name="pmd" classname="net.sourceforge.pmd.ant.PMDTask" classpathref="pmd.classpath"/>
    <pmd shortFilenames="true">
    <ruleset="/build/ruleset.xml"/>
    <formatter type="xml" toFile="/build/pmd.xml"/>
    <fileset dir="/src">
    <include name="**/*.java"/>
    </fileset>
    </pmd>
    </target> 
    ```

请有人帮我解决这个问题？..我才刚开始..

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-11T16:31:39.590

你所有的路径都是绝对的：`/lib`, `/build`, `/src`. 我怀疑实际上，所有这些路径都应该与您的项目相关：`lib`, `build`, `src`.

确保 PMD jar 确实位于您在路径文件集中使用的绝对或相对路径。

# html - anchor tag inside ul before li

> ID：11430791
> 
> 赞同：12
> 
> 时间：2012-07-11T10:35:09.003
> 
> 标签：html

I am adding an anchor tag inside ul and inside anchor tag I am adding li. But when I tested this on html validator it gives me error. Is there a proper way to achieve this?

```
<!DOCTYPE html>
<html>
<head>
<title>Title</title>
</head>
<body>
<ul>
<a href="#"><li>Click one</li></a>
<a href="#"><li>Click one</li></a>
<a href="#"><li>Click one</li></a>
</ul>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2012-07-11T10:36:59.837

将其转换为这些：

```
<ul>
    <li><a href="#">Click one</a></li>
    <li><a href="#">Click one</a></li>
    <li><a href="#">Click one</a></li>
</ul> 
```

因为`li`应该总是有一个父级`ul`，这就是你的错误的原因。但我认为你希望你的整体`li`是可点击的，所以这个 CSS 样式会修复它。

```
ul li a { display:block; } 
```

那将显示它。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2018-01-11T17:30:24.637

这个问题很老了，但我想添加一些东西：

这个 CSS 还应该强制锚元素与父 li 的宽度和高度相同，这也将达到预期的效果。

```
ul li a {
    width:inherit;
    height:inherit;
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-11T11:27:43.017

如果您对 进行样式化，整个`li`将是可点击的`li a`，如下所示：

```
ul li a {
    float: left;
    margin: 5px;
    padding: 5px;
    background: red;
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-11T10:36:56.403

您应该将标签放在`<li>`标签之外，`<a>`而不是相反。

# iphone - UITableView with pop cannot view data issue

> ID：11430797
> 
> 赞同：1
> 
> 时间：2012-07-11T10:35:23.097
> 
> 标签：iphone, ios, xcode, uitableview

I am sending my text from a view-1 to another view-2 which has a UITableView. When I push my data I to the other view-2 I can't see the data until I close the application and open it again I can see that data in the table view.

I have used `[self.navigationController popToRootViewControllerAnimated:YES];` and then reload the the table view but it doesn't work.

More details; A(Add person button with UITableView)-> B(text field with submit button) -> A(Data shown on the table view). This is what I wanna do.

Could anybody help me please?

Here is my full code [My Sample Code](https://docs.google.com/document/d/1AqveinRStVTcTrWYvzeA0GTUWBEEzr2c2-PlA0NzxWw/edit)

Thanks from now.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-11T12:18:51.653

我看过你的代码，发现了一个问题。只需将下面的代码从`viewDidLoad`to`viewWillAppear`方法

```
self.dataArray = [[NSUserDefaults standardUserDefaults] objectForKey:@"myTxtList"];
self.dateArray = [[NSUserDefaults standardUserDefaults] objectForKey:@"myDateList"]; 
```

愿这能解决你的问题。

快乐编码:)

**编辑 1**

好的，新的原因可能是我在您的代码中发现的`submit`方法（IBAction）。

您创建了新的视图控制器并刚刚进入导航控制器的根视图，因此更改第一行功能

```
ViewController *push = [[ViewController alloc] initWithNibName:@"ViewController" bundle:nil]; 
```

至

```
viewController *push = [self.navigationController.viewControllers objectAtIndex:0]; 
```

随着上面的变化，即我的原始答案也添加了编辑后的答案并查看。

愿这能解决你的问题。

快乐编码:)

**最终编辑**

我遇到了问题，并在您的代码中进行了如下更改

在 ViewController.h 文件中，而不是

```
@property (nonatomic, strong) NSArray *dateArray; 
```

利用

```
@property (nonatomic, strong) NSMutableArray *dateArray; 
```

下一个更改是在`viewWillAppear:animated`方法中的 ViewController.m 文件中，而不是

```
self.dataArray = [[NSUserDefaults standardUserDefaults] objectForKey:@"myTxtList"];
self.dateArray = [[NSUserDefaults standardUserDefaults] objectForKey:@"myDateList"]; 
```

利用

```
[self.dataArray setArray:[[NSUserDefaults standardUserDefaults] objectForKey:@"myTxtList"]];
[self.dateArray setArray:[[NSUserDefaults standardUserDefaults] objectForKey:@"myDateList"]]; 
```

您的应用程序将按预期运行，没有错误或崩溃。

快乐编码:)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-11T10:41:57.097

尝试使用`[self.navigationController PopViewControllerAnimated: YES];` 可能对您有帮助。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-11T11:15:52.093

如果您尝试将数据从一个屏幕推送到另一个屏幕，请尝试：

```
[self.navigationController pushViewController:push Animation:YES];
```

如果您想返回以前的视图，那么以下内容将为您提供帮助：

```
[self.navigationController popViewControllerAnimated:YES];
```

如果您想进入导航控制器的根视图，请尝试以下操作：

```
[self.navigationController popToRootViewControllerAnimated:YES];
```

# plugins - Is there a procedure to be followed to add external jars to a custom confluence plugin development environment

> ID：11430798
> 
> 赞同：0
> 
> 时间：2012-07-11T10:35:26.823
> 
> 标签：plugins, jar, dependencies, confluence

I added this dependency chunk in my pom.xml

```
 <dependency>
        <groupId>freeway</groupId>
        <artifactId>axis</artifactId>
        <version>1.0</version>
    </dependency> 
```

I have placed my jar file in the folder C:\jarhost\axis-1.0.jar And i ran the command

```
 mvn install:install-file -Dfile= "C:/jarhost/axis-1.0.jar" -DgroupId=freeway -DartifactId=axis -Dversion=1.0 -Dpackaging=jar 
```

And this is the error i get is this

[http://imageshack.us/f/580/cmdimage.png](http://imageshack.us/f/580/cmdimage.png)

I also stumbled upon this [https://confluence.sakaiproject.org/display/DOC/Adding+JARs+to+an+Application](https://confluence.sakaiproject.org/display/DOC/Adding+JARs+to+an+Application) and tried it too. But it was unable to 'download' dependencies.

What am i missing ?Looking for your help on this.

Thanks A

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-11T14:09:19.483

Angela,

maybe you run into this bug:

> Unfortunately there's a bug in the Atlassian Plugin SDK that prevents the atlas-* batch files from correctly interpreting command-line parameters that contain an equals sign
> 
> The workaround is to call "%ATLAS_HOME%\apache-maven\bin\mvn" instead of "atlas-mvn".

*   [https://studio.atlassian.com/browse/AMPS-197](https://studio.atlassian.com/browse/AMPS-197)
*   [https://ecosystem.atlassian.net/browse/AMPS-353](https://ecosystem.atlassian.net/browse/AMPS-353)
*   [https://answers.atlassian.com/questions/20341/configuring-eclipse-to-use-the-atlassian-plugin-sdk](https://answers.atlassian.com/questions/20341/configuring-eclipse-to-use-the-atlassian-plugin-sdk)

My solution was the following:

*   edit `%ATLAS_HOME%\bin\atlas-mvn.bat`

*   locate the line `if "%1"=="" goto loopend` (in my case it was line 69)

*   change it to:

    ```
     if `%1`==`` goto loopend 
    ```

Hope this solves your problem!

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-11T11:56:02.890

您可以通过在您的 pom.xml 中添加依赖项来安装您的 jar，在您的情况下，我认为您需要添加范围编译，例如。

```
 <dependency>
        <groupId>org.apache.axis</groupId>
        <artifactId>axis</artifactId>
        <version>1.4</version>
        <scope>compile</scope>
    </dependency> 
```

你可以[在这里阅读](http://maven.apache.org/guides/introduction/introduction-to-dependency-mechanism.html)

如果你开始创建插件，另一个建议是最好的做法是使用 Confluence `atlas-cli`，
`mvn-instal`而不是以这种方式帮助你。

我还建议你在这里阅读这个非常有用的[文档](https://developer.atlassian.com/display/CONFDEV/Writing+Confluence+Plugins)，你可以找到很多很好的文档，它们可以帮助你更轻松地开发插件以实现融合。

# sql - Update each row in a table with existing values but capitalized

> ID：11430806
> 
> 赞同：1
> 
> 时间：2012-07-11T10:35:56.193
> 
> 标签：sql, sql-server-2008-r2, sql-update

I have a table that has the following structure

```
LanguageName    |Code 
----------------|----
Abkhaz          |ab
Afar            |aa
Afrikaans       |af
Akan            |ak 
```

I have about 190 similar rows.

And,

> I need to update each row as Capitalizing the first letter of the Column Code for each row.

So, that the result would be:

```
LanguageName    |Code 
----------------|----
Abkhaz          |Ab
Afar            |Aa
Afrikaans       |Af
Akan            |Ak 
```

How can I achieve this in SQL-Server?

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-11T10:39:59.353

```
update your_table
set Code = UPPER(substring(code, 1, 1)) + substring(code, 2, 1) 
```

## 编辑

单步：

```
substring(code, 1, 1)   -> extracts the 1st character from code column
substring(code, 2, 1)   -> extracts the 2nd character from code column
UPPER()                 -> uppers the 1st substring
substring1 + substring2 -> puts them together
set code =              -> the result of the above for every row 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-11T10:40:15.287

```
update YourTable set
  LanguageName = stuff(LanguageName, 1, 1, upper(left(LanguageName,1))),
  Code = stuff(Code, 1, 1, upper(left(Code,1))) 
```

[SE-数据](https://data.stackexchange.com/stackoverflow/query/75099)

# html - how to resolve cross-browser(mozilla firefox vs chrome) issues in printing page?

> ID：11430807
> 
> 赞同：1
> 
> 时间：2012-07-11T10:35:59.297
> 
> 标签：html, css, firefox, google-chrome, cross-browser

The print preview produced for the same HTML code have completely different output in chrome and firefox for the same A4 size..please help

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-11T10:38:58.250

大多数 Chrome hand firefox 具有相同的 HTML 输出。如果您遇到问题，您可以为不同的浏览器使用不同的样式表。[尝试这个](http://www.catswhocode.com/blog/15-techniques-and-tools-for-cross-browser-css-coding)

# android - 使用共享首选项在服务中存储数据？

> ID：11430810
> 
> 赞同：-1
> 
> 时间：2012-07-11T10:36:11.257
> 
> 标签：android, service, sharedpreferences

我尝试使用以下代码，但出现错误。getSharedPreferences 未定义。是否有其他方法可以在 Intent 服务中存储字符串值并在活动中访问它。

```
 SharedPreferences prefs = this.getSharedPreferences(
  "com.example.app", Context.MODE_PRIVATE); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-11T10:40:03.970

试试这个 ：

```
SharedPreferences prefs = getApplicationContext().getSharedPreferences(
  "com.example.app", Context.MODE_PRIVATE); 
```

代替

```
SharedPreferences prefs = this.getSharedPreferences(
  "com.example.app", Context.MODE_PRIVATE); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-11T10:40:16.453

getSharedPreferences() 是 Context 对象的方法。这意味着您必须在 Acitivity 中调用它。如果您从 View 子类中调用它，则必须执行以下操作：

```
context.getSharedPreferences(PREFS_NAME, 0); 
```

# html - HTML 和 XAML 的主要区别是什么？

> ID：11430811
> 
> 赞同：-1
> 
> 时间：2012-07-11T10:36:15.833
> 
> 标签：html, xaml

`HTML`我在 Google 上搜索和之间的区别`XAML`，但没有得到相关结果。

所以我想知道为什么我们使用`XAML(WPF)`而不是`HTM`L 以及它的区别。

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-07-11T10:39:01.730

看看[这个](http://www.freewebs.com/mono4mano/apps/blog/show/1194442-difference-between-xml-and-xaml)。你可以知道它们的区别。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2015-11-22T22:09:59.857

XAML 是您在 Microsoft Expression Blend 中开发的应用程序的视觉呈现背后的语言，就像 HTML 是网页视觉呈现背后的语言一样。

# c# - 当 ObservableCollection 与中间层绑定时更新列表

> ID：11430813
> 
> 赞同：1
> 
> 时间：2012-07-11T10:36:19.940
> 
> 标签：c#, binding, listbox, ienumerable, observablecollection

一个 ObservableCollection

```
private ObservableCollection<string> _items = new ObservableCollection<string>();

public ObservableCollection<string> Items { get { return _items; } } 
```

在用户交互（文本框事件）时更新。

在 ListBox 中，我将显示当前值

```
Binding listBinding = new Binding {Source = Items};
listbox.SetBinding(ListBox.ItemsSourceProperty, listBinding); 
```

到目前为止有效：添加新值时，列表会立即更新。

但现在我必须要求：

*   对值进行排序
*   在列表开头添加一项

我解决如下：

```
public IEnumerable<string> ItemsExtended
{
  get
  {
    return new[] { "first value" }.Concat(Items.OrderBy(x => x));
  }
} 
```

我将绑定更改为该 IEnumerable，并且该列表包含一个排序列表，其中“第一个值”位于位置一。

不幸的是，当列表应该在用户交互时更新时，它不再起作用。即使再次将 IEnumerable 更改为 ObservableCollection 并直接引用私有 ObservableCollection 也不能解决问题：

```
return new ObservableCollection<string> (new[] { "bla" }.Concat(_items.OrderBy(x => x))); 
```

_items 更改时如何更新列表？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-11T11:28:22.533

从我头上掉下来。您可以为您的集合所属的类实现[INotifyPropertyChanged 。](http://msdn.microsoft.com/en-us/library/system.componentmodel.inotifypropertychanged.aspx)之后为您的 _items 集合添加一个[CollectionChanged](http://msdn.microsoft.com/en-us/library/ms653375.aspx)处理程序并在该处理程序中触发 PropertyChanged("ItemsExtended")。同样在 getter 中使用[yield return](http://msdn.microsoft.com/en-us/library/9k7k7cf0.aspx)将避免创建一个新集合只是为了在顶部添加项目。

它应该看起来像这样

```
public partial class MyClass : INotifyPropertyChanged
{

    ObservableCollection<string> _items;
    public MyClass()
    {
        _items = new ObservableCollection<string>();
        _items.CollectionChanged += (s, e) => { OnPropertyChanged("Items"); };
    }

    public IEnumerable<string> Items 
    { 
        get 
        {
            yield return "first value";
            foreach (var item in _items.OrderBy(x=>x))
                yield return item;

        } 
    }

    public event PropertyChangedEventHandler PropertyChanged;

    private void OnPropertyChanged(string property)
    {
        if (PropertyChanged != null)
            PropertyChanged(this, new PropertyChangedEventArgs(property));
    }
} 
```

# arrays - 在silverlight中初始化多维线阵列

> ID：11430820
> 
> 赞同：0
> 
> 时间：2012-07-11T10:36:35.033
> 
> 标签：arrays, silverlight, initialization, line

我正在银光中申请。在那个应用程序中，我使用的是三维线阵列，但我不知道如何初始化它？我有数组作为

```
Line[,,] line = new Line[10,20,30]; 
```

我如何用新行初始化每个值？请帮助我。提前致谢，

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-12T04:20:15.667

这将`line.Initialize()`使用 Line 的默认构造函数初始化数组中的每个元素。

干杯! 维诺德

# arrays - 在 F# 中获取二维数组的一列或一行

> ID：11430833
> 
> 赞同：3
> 
> 时间：2012-07-11T10:37:09.120
> 
> 标签：arrays, f#, multidimensional-array

如何在 F# 中获取 2D 数组的列或行（理想情况下作为 1D 数组，但 Seq 也会很好）。显然我可以自己写，但你会认为它必须已经提供......

例如，我在内置等效项之后：

```
let row i array = seq { for j in 0 .. (Array2D.length2 array)-1 do yield array.[i,j]} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-11T10:51:48.790

我不认为有一个内置的功能。

您可以使用[Seq.cast](http://msdn.microsoft.com/en-us/library/ee370344.aspx)对数组进行切片并展平切片：

```
let row i (arr: 'T[,]) = arr.[i..i, *] |> Seq.cast<'T> 
```

# javascript - jQuery：jqPlot 函数调用将无法正常工作

> ID：11430834
> 
> 赞同：1
> 
> 时间：2012-07-11T10:37:20.843
> 
> 标签：javascript, html, function, jquery-mobile, jqplot

我基本上想知道为什么第一个代码有效但第二个无效。

```
<a data-role="button" href="#page2" type="button" onClick="drawChart([[["Test1",6],["Test2",5],["Test3",2]]])">
 <img src="icons/page2.png" inline style="height:80px"/><br/>Tilbakemelding
</a> 
```

上面的代码不起作用。

在 page2 中，我使用以下代码制作了一个按钮：

```
<div data-role="content">
<a type="button" onClick=drawChart([[["Test1",6],["Test2",5],["Test3",2]]])>Show Chart</a>
</div> 
```

此代码有效，但我真的更希望无需额外点击即可显示图表。这是在 jQueryMobile 中编码的，因此第一个按钮不仅会加载图表，还会导航到 page2。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-11T15:09:35.933

这是一个语法错误；你`"`的s都关闭了。尝试：

```
onClick="drawChart([[['Test1',6],['Test2',5],['Test3',2]]])" 
```

# java - 使用 Digester 解析 XML

> ID：11430839
> 
> 赞同：0
> 
> 时间：2012-07-11T10:37:42.660
> 
> 标签：java, xml, apache-commons-digester

我有一个 xml，它有一个包含项目数的列表标签。

例子：

```
 <param>
       <id>12345</id>
       <date>2012/07/10</date>
       <list>
         <item>
           <name>Test1</name>
           <code>C1</code>
         </item>
         <item>
           <name>Test2</name>
           <code>C2</code>
         </item>
       </list>
    </param> 
```

我想使用 Jakarta Digester 框架将其映射到 Java 对象。

我的计划是这样的。

1.  创建一个主 ResponseDTO
2.  创建一个 ItemDTO
3.  将 ItemDTO 数组列表添加到 ResponseDTO

因此，在将此 xml 解析为 Jakarta Digester 引擎后，我期望 ResponseDTO 与 ItemDTO 列表具有实际值。

有人可以让我知道如何使用 Digester 框架来做到这一点。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-11T14:02:21.830

看看这篇文章： http: [//www.devx.com/Java/Article/21832](http://www.devx.com/Java/Article/21832)

但是有许多 XML 反序列化框架对用户更加友好......（[http://x-stream.github.io/tutorial.html#init](http://x-stream.github.io/tutorial.html#init)）。

M。

# http - 自动重新建立长轮询请求的最佳方法是什么？

> ID：11430841
> 
> 赞同：0
> 
> 时间：2012-07-11T10:37:47.467
> 
> 标签：http, web, tornado, long-polling

我正在做一个使用**长轮询**的项目，因为 nginx 服务器会在连接建立 1 分钟左右后响应 504 Gateway Timeout，我在 $.ajax 中编写了错误处理函数，以便它可以自动重新连接到服务器。收到 504 错误。但是虽然我做了这个，但不知道这是否是长轮询机制的最佳实践，这样会在日志中产生大量的504。好像还不够好，那我该怎么做呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-11T21:23:07.567

您应该在长轮询响应中设置更短的超时时间。通常 30 秒或更短的时间就能解决问题。如果您的服务器在 30 秒内没有要发送的数据，它必须发送一个空响应。然后客户端将发出一个新请求（立即或在暂停后，取决于您希望减少多少延迟；例如，在 Lightstreamer 中，默认情况下我们不会在长轮询周期之间使用任何暂停）。

# qt - 链接器无法打开 libboost_signals-vc100-mt-gd-1_48.lib

> ID：11430842
> 
> 赞同：0
> 
> 时间：2012-07-11T10:37:49.493
> 
> 标签：qt, boost, shared-libraries

我正在尝试构建一个使用 boost 库的项目。尝试编译它时，我得到了一些我无法解决的链接器错误。我明白了

```
:-1: error: LNK1104: cannot open file 'libboost_signals-vc100-mt-gd-1_48.lib' 
```

为了解决这个错误，我将这些行放在我的 .pro 文件中

```
win32: LIBS += -L$$PWD/../../../../../../../boost_1_48_0/stage/lib/ -lboost_signals-vc100-mt-gd-1_48

INCLUDEPATH += $$PWD/../../../../../../../boost_1_48_0/stage
DEPENDPATH += $$PWD/../../../../../../../boost_1_48_0/stage 
```

我正在使用动态库，但 qmake 会自动搜索静态库。添加上面的行并没有解决问题。知道有什么问题吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-11T11:11:03.137

如果您与 CRT 静态链接（/MT 或 /MTd），则会自动选择静态增强库。如果要强制链接动态 boost 库，请定义 BOOST_ALL_DYN_LINK，但链接静态 CRT 和动态 boost 不是一个好主意。

# unit-testing - 单元测试，使用属性传入接口

> ID：11430848
> 
> 赞同：1
> 
> 时间：2012-07-11T10:38:15.203
> 
> 标签：unit-testing, c#-4.0

我正在阅读“单元测试的艺术”atm，并且在使用属性传递接口时遇到了一些问题。该书指出：“如果您希望参数是可选的，请使用属性 getter/setter，这是定义可选参数的更好方法，而不是为每个依赖项向类添加不同的构造函数。”

属性示例的代码如下：

```
public class LogAnalyzer
{
    private IExtensionManager manager;
    public LogAnalyzer ()
    {
        manager = new FileExtensionManager();
    }

    public IExtensionManager ExtensionManager
    {
        get { return manager; }
        set { manager = value; }
    }

    public bool IsValidLogFileName(string fileName)
    {
        return manager.IsValid(fileName);
    }
}

[Test]
Public void
IsValidFileName_NameShorterThan6CharsButSupportedExtension_ReturnsFalse()
{
    //set up the stub to use, make sure it returns true
    ...
    //create analyzer and inject stub
    LogAnalyzer log = new LogAnalyzer ();
    log.ExtensionManager=someFakeManagerCreatedEarlier;

    //Assert logic assuming extension is supported
    ...
} 
```

我何时/如何使用此功能？我能想到的唯一场景（这可能是错误的！）是如果我在一个类中有两种方法，

Method1() 从配置文件中检索数据库连接字符串，并包含对检索到的字符串的某种形式的检查。

Method2() 然后连接到数据库并返回一些数据。这里的检查可能是返回的数据不为空？

在这种情况下，为了测试 Method1()，我可以声明一个实现 IExtensionManager 接口的存根，其中存根有一个字符串，它应该通过我在 method1() 中的任何错误检查。

对于 Method2()，我声明了一个实现接口的存根，并在存根类中声明了一个包含一些数据的数据表。id 然后使用属性将其分配给私有管理器变量，然后调用 Method2?

**以上可能是完整的 BS**，所以如果是的话，如果有人让我知道并删除它，我将不胜感激。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-11T10:47:05.953

属性注入用于在创建对象后更改其行为。

顺便说一句，您的代码与 . 紧密耦合`FileExtensionManager`，这是`IExtensionManager`. 您将如何`LogAnalyzer`使用默认管理器进行测试？使用构造函数注入为您的对象提供依赖项 - 这将使它们可测试：

```
public LogAnalyzer (IExtensionManager manager)
{
    this.manager = manager();
} 
```

# java - 手动添加活动

> ID：11430849
> 
> 赞同：-2
> 
> 时间：2012-07-11T10:38:20.273
> 
> 标签：java, android, android-activity, adt

嗨，我正在使用 Java 在 android 中开发一个应用程序。我在我的项目中添加了一个新的 java 类，它扩展了 ListActivity。但是我是手动完成的，所以没有生成 .xml 文件。有没有办法可以创建一个新的 .xml 文件。 xml 文件并以某种方式将其与新创建的类连接起来？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-11T10:41:11.507

layout xml只是一个标准的xml文件，在layout目录下新建一个layout xml文件。在您创建的新 Activity 类中，您可以使用 setContentView 方法引用它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-11T10:46:30.760

是的。转到您的**项目-> res（文件夹）->布局->右键单击以创建新的xml文件**并将其链接到您的类。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-11T10:48:21.253

[假设您使用的是 eclipse]

**创建布局文件 (XML)：**

*   从导航器中，转到-> res--> 右键单击​​布局-> 新建-> Android xml 文件
*   您可以使用 Eclipse 中集成的 xml 编辑器根据需要编辑此 xml acc。

**在您的活动中使用此 xml：**

*   使用`setContentView()`方法来引用创建的xml文件
*   例如：如果您的新 xml 的名称是`new.xml`并且您按照我上面提到的方式创建了它，您会说`setContentView(R.layout.new);`

# python - 在python中比较两个数组的值

> ID：11430850
> 
> 赞同：5
> 
> 时间：2012-07-11T10:38:21.573
> 
> 标签：python

如何检查项目`b`是否在中，`a`并且找到的匹配项目`a`不应在下一次匹配中使用？

目前，此代码将匹配 2 中的`b`.

```
a = [3,2,5,4]
b = [2,4,2]

for i in b:
  if i in a:
    print "%d is in a" % i 
```

这是所需的输出：

```
2 => 2 is in a
4 => 4 is in a
2 => 
```

**编辑：示例 2：**

```
a = [3,2,2,4]
b = [2,4,2] 
```

输出应该是

```
2 => 2 is in a
4 => 4 is in a
2 => 2 is in a 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-07-11T10:47:12.423

（长篇但完整阅读，解决方案在最后）。

删除找到的值或将其注册到另一个字典中。

更好的方法是计算每个数组中的幻影数量并测试有多少是常见的。

对于第二种情况，你会有

*   对于`a`：

    3 出现 1 次 2 出现 1 次 5 出现 1 次 4 出现 1 次

*   对于`b`：

    2 出现 2 次 4 出现 1 次

将这些值保存在字典中：

```
a_app = {3:1, 2:1, 5:1, 4:1}
b_app = {2:2, 4:1} 
```

现在，很简单：

```
for i in b:
    if a_app.has_key(i) and a_app[i] > 0:
        a_app[i] -= 1 
```

字典将`b_app`在其他情况下使用。

这是我编写的测试脚本（测试此处发布的所有测试用例）：

```
def f(a, b):
    a_app = {}
    for i in a:
        if not a_app.has_key(i):
            a_app[i] = 0
        a_app[i] += 1
    print a_app
    for i in b:
        print i, '=>',
        if a_app.has_key(i) and a_app[i] > 0:
            a_app[i] -= 1
            print i, ' is in a',
        print '.'

f([1,1,2],[1,1])
f([3,2,5,4],[2,4,2])
f([3,2,2,4],[2,4,2])
f([3,2,5,4],[2,3,2]) 
```

这是输出：

```
$ python 1.py
{1: 2, 2: 1}
1 => 1  is in a .
1 => 1  is in a .
{2: 1, 3: 1, 4: 1, 5: 1}
2 => 2  is in a .
4 => 4  is in a .
2 => .
{2: 2, 3: 1, 4: 1}
2 => 2  is in a .
4 => 4  is in a .
2 => 2  is in a .
{2: 1, 3: 1, 4: 1, 5: 1}
2 => 2  is in a .
3 => 3  is in a .
2 => . 
```

一切都很完美，没有订单丢失:)

编辑：用@Avaris 的建议更新，这个脚本看起来像：

```
import collections

def f(a, b):
    a_app = collections.Counter(a)
    for i in b:
        print i, '=>',
        if i in a_app and a_app[i] > 0:
            a_app[i] -= 1
            print i, ' is in a',
        print '.'
    print ''

f([1,1,2],[1,1])
f([3,2,5,4],[2,4,2])
f([3,2,2,4],[2,4,2])
f([3,2,5,4],[2,3,2]) 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-11T10:42:53.827

我会这样做：

```
a = [3,2,5,4]
b = [2,4,2]
temp = set(a)
for item in b:
    if item in temp:
        print "{0} is in a".format(item)
        temp.remove(item) 
```

该设置使`x in y`检查更快（`O(1)`而不是（最坏情况）`O(n)`），并且还可以安全地修改它而不会破坏我原来`a`的 .

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-07-11T10:45:51.910

递归解决方案：

```
a = [3,2,5,4]
b = [2,4,2]

def find_matches(x, y):
    if y == []:            # nothing more to find
        return
    n = y.pop()
    if n in x:
        print n, "matches"
        x.remove(n)
    find_matches(x, y)

find_matches(list(a), list(b))      # copy the list as they get consumed in process 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-11T10:44:10.353

这可能不是最好的方法，但您可以列出所有匹配的项目并使用它进行检查。

 ~~~~```
a= [3, 2, 5, 4]
b= [2, 4, 2]
c= []

for i in b:
    if i in a and i not in c:
        print '%d is in a' % i
        c.append(i) 
```~~  ~~我认为循环 a 而不是 b 应该可以解决问题。

```
a= [3, 2, 2, 4]
b= [2, 4, 2]

for i in a:
    if i in b:
        print i, 'is in a' 
```

显然`i`是 in `a`，但它确实解决了问题，不是吗？

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-11T10:44:50.120

```
a = [3,2,5,4]
b = [2,4,2]

hadAlready = {}
for i in b:
    if i in a:
        if not (i in hadAlready):
            print "%d is in a" % i
            hadAlready[i] = 1 
```~~~~

# php - CakePHP 使用正则表达式验证蒙面信用卡

> ID：11430851
> 
> 赞同：0
> 
> 时间：2012-07-11T10:38:25.110
> 
> 标签：php, regex, cakephp, credit-card

我正在为我的用户创建更新计费信息部分。我目前正在向表单传递一个蒙面的信用卡号。如果他们只想更新他们的帐单地址，我不希望用户必须更新他们的信用卡信息。

我正在尝试使用正则表达式来匹配被屏蔽的信用卡，但我无法获得任何正则表达式模式来匹配......即使是 100% 通配符......

以下是我尝试过的几个例子......

==================================================== ===============

被屏蔽的信用卡值是 XXXXXXXXXXXX0012

==================================================== ===============

```
'creditcard' => array(
         'creditcard' => array(
            'rule' => array('cc', 'all', false, '^[.]+$'),
            'message' => 'Required',
            'allowEmpty' => false,
            'required' => true,
            ),
    ), 
```

==================================================== ===============

```
 'creditcard' => array(
        'creditcard' => array(
            'rule' => array('cc', 'all', false, '/^[X]+[0-9](4,)$/'),
            'message' => 'Required',
            'allowEmpty' => false,
            'required' => true,
            ),
    ), 
```

==================================================== ===============

```
 'creditcard' => array(
        'creditcard' => array(
            'rule' => array('cc', 'all', false, '/^[x]+[0-9]+$/i'),
            'message' => 'Required',
            'allowEmpty' => false,
            'required' => true,
            ),
    ), 
```

非常感谢任何想法！

谢谢你！！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-11T16:41:19.373

不是一个完整的答案，但在您的第一个示例中， [ ] 中的句点实际上与字符 匹配。没有什么。因此，如果您将其更改为：

```
/^.+$/ 
```

它可能会更好。

在第二个示例中，您应该使用花括号 { } 而不是括号来指定长度。像这样：

```
/^[X]+[0-9]{4,}$/ 
```

不过最后一张看起来不错。但是通过修复前两个，您至少可以开始找到问题的根源！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-11T10:42:04.577

`^`和分别匹配整个字符串的`$`开头和结尾，而不仅仅是单行。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-11T11:11:52.157

不明白为什么你需要正则表达式，除非我遗漏了一些东西。

可能的一种方法是将被屏蔽的卡号作为纯文本输出，并为新卡号提供一个文本框。

当表单提交时，如果该字段为空，则只是`unset`保存前的数组键，所以现有的卡值保持不变。

如果有新号码，您可以根据需要进行更新。

# android - 从android中的给定日期获取日期格式

> ID：11430852
> 
> 赞同：0
> 
> 时间：2012-07-11T10:38:26.920
> 
> 标签：android, date, android-date

你好，我是安卓新手。谁能帮我找到从 2012 年 7 月 15 日到 7 月 15 日的日期格式？我找到了示例，但每个示例都适用于各种不同的日期格式。请帮我找到这个。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-11T10:53:49.067

尝试从我在 [Convert Date time in “April 6th, 2012” 格式][1] 中的另一个答案中获得灵感

[1]：[将日期时间转换为“2012 年 4 月 6 日”格式](https://stackoverflow.com/questions/10316827/convert-date-time-in-april-6th-2012-format/10317196#10317196)，此处只能将 4 月更改为星期日，2012 年更改为月份。

像：-

```
DateFormatSymbols symbols = new DateFormatSymbols();
symbols.setShortWeekdays(new String[]{"Sun","Mon"....});
SimpleDateFormat format = new SimpleDateFormat("EE", symbols); 
```

从此代码中，您将获得“Sun,Mon,Tue...”短格式的 Days

所以在你的 SimpleDateFormat 类中传递这个符号。

# java - @parameters 方法在@beforeclass 方法之前执行

> ID：11430859
> 
> 赞同：10
> 
> 时间：2012-07-11T10:39:05.920
> 
> 标签：java, junit, junit4

我正在使用 junit 4 的“参数化”功能，我注意到 @parameters 方法在 @beforeclass 方法之前执行。这给我带来了一个问题，因为我通过@parameters 传递给测试用例的参数取决于@beforeclass 方法中的代码初始化。例如

```
@RunWith(Parameterized.class)
public class TestOtherClass {

    String argument;
    private static boolean initializeThis;

    public TestOtherClass(String parameter) throws Exception {
        argument=parameter;
    }

    @BeforeClass
    public static void doSetup() {
        System.out.println("Doing setup before class...");
        initializeThis=true; // true or false, based on some condition
    }

    @Test
    public void otherTest() {
        System.out.println("Other test: " + argument);
    }

    @Parameters
    public static Collection<Object[]> getData(){
        System.out.println("Inside parameter");
        String addThis;
        if(initializeThis)
            addThis="adding true";
        else
            addThis="adding false";

        Object[] para1 = new Object[]{"First parameter :: " + addThis};
        Object[] para2 = new Object[]{"Second parameter :: " + addThis};

        Collection<Object[]> classNames = new ArrayList<Object[]>();
        classNames.add(para1);
        classNames.add(para2);
        return classNames;
    }
} 
```

现在，我在@beforeclass 方法中将变量“initializeThis”初始化为true，但是（令人惊讶的是）当我执行它打印的测试用例时

```
Other test: First parameter :: adding false
Other test: Second parameter :: adding false 
```

这是意料之外的事情。
我的问题是；有没有办法在@parameters 之前执行@beforeclass 方法，我们可以在junit 4 中执行此操作吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-20T14:40:54.407

我会使用普通的旧 java static {..} 初始化程序而不是 @BeforeClass，例如：

```
@RunWith(Parameterized.class)
public class TestOtherClass {

    String argument;
    private static boolean initializeThis;

    public TestOtherClass(String parameter) throws Exception {
        argument=parameter;
    }

    static {
        doSetup();
    }

    // @BeforeClass
    public static void doSetup() {
        System.out.println("Doing setup before class...");
        initializeThis=true; // true or false, based on some condition
    }

    @Test
    public void otherTest() {
        System.out.println("Other test: " + argument);
    }

    @Parameters
    public static Collection<Object[]> getData(){
        System.out.println("Inside parameter");
        String addThis;
        if(initializeThis)
            addThis="adding true";
        else
            addThis="adding false";

        Object[] para1 = new Object[]{"First parameter :: " + addThis};
        Object[] para2 = new Object[]{"Second parameter :: " + addThis};

        Collection<Object[]> classNames = new ArrayList<Object[]>();
        classNames.add(para1);
        classNames.add(para2);
        return classNames;
    }
} 
```

我知道的唯一缺点是从这里继承的类将无法覆盖静态初始化程序，而 @BeforeClass 在这方面提供了一些自由；

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-12-28T22:15:17.167

这是一个老问题，但我最近遇到了同样的问题。令我震惊的是，似乎没有一个解决方案适用于最明显的解决方法——在 @Parameters 方法中调用 @BeforeClass 方法。后者是静态的并且只执行一次——在任何测试运行之前。因此，从所有意图和目的来看，它都是 @BeforeClass 方法，即使它没有被这样注释。更多细节可以在这里找到：http: [//feraldeveloper.blogspot.co.uk/2013/12/beforeclass-and-parametrized-junit-tests.html](http://feraldeveloper.blogspot.co.uk/2013/12/beforeclass-and-parametrized-junit-tests.html)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-11T13:46:47.327

`Runner`JUnit为参数列表中的每一项创建一个，一个`Runner`是封装测试方法的东西。所以`@Parameters`总是会在@BeforeClass 之前执行。

但是，您可以将 @Parameterized 与[Assume](http://junit.sourceforge.net/javadoc/org/junit/Assume.html)结合使用。无论您是否打算执行它，您总是在列表中包含所有参数。然后在测试方法中，针对该值添加`assumeTrue()`which 测试。`initializeThis`

```
@RunWith(Parameterized.class)
public class TestOtherClassAssume {
  private final String argument;
  private final boolean initializeThisTest;
  private static boolean initializeThis;

  @Parameters
  public static Collection<Object[]> getData(){
    System.out.println("Inside parameter");

    return Arrays.asList(new Object[][] {
      { false, "First" },
      { true, "Second" },
    });
  }

  public TestOtherClassAssume(boolean initializeThisTest, String argument) {
    this.initializeThisTest = initializeThisTest;
    this.argument = argument;
  }

  @BeforeClass
  public static void doSetup() {
    System.out.println("Doing setup before class...");
    initializeThis = true; // true or false, based on some condition
  }

  @Test
  public void otherTest() {
    Assume.assumeTrue(initializeThis == initializeThisTest);
    System.out.println("Other test: " + argument);
  }
} 
```

输出是：

```
Inside parameter
Doing setup before class...
Other test: Second 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-05-03T01:07:10.910

但是，这不适用于 TestSuites。给定

```
@RunWith(Parameterized.class)
public class TogglableParameterizedTest {
    static boolean useAllParameters = false;

    int parameter;

    public TogglableParameterizedTest(int parameter) {
        super();
        this.parameter = parameter;
    }
    @Parameters
    public static Collection<Object[]> getTestParameters() {
        List<Object[]> parameters = new ArrayList<Object[]>();
        if(useAllParameters) {
            parameters.add(new Object[] { 1 });
            parameters.add(new Object[] { 2 });
            parameters.add(new Object[] { 3 });
        }
        else {
            parameters.add(new Object[] { 1 });
        }
        return parameters;
    }
    @Test
    public void test() {
        System.out.println("parameter=" + parameter);
    }
} 
```

这不起作用：

```
@RunWith(Suite.class)
@SuiteClasses({ TogglableParameterizedTest.class })
public class NonWorkingTestSuite1 {

    @BeforeClass
    public static void toggle() {
        System.out.println("sets flag to late!");
    }

} 
```

输出是

```
sets flag to late!
parameter=1 
```

也不是：

```
@RunWith(Suite.class)
@SuiteClasses({ TogglableParameterizedTest.class }) 
public class NonWorkingTestSuite2 {
    static {
        System.out.println("sets flag still to late");
        TogglableParameterizedTest.useAllParameters = true;
    }
} 
```

输出为“参数=1”。所以静态初始化程序根本没有执行。我找到了以下解决方法。扩展“Suite”并在那里插入静态初始化器：

```
public class TogglingSuite extends Suite {

    static {
        System.out.println("sets flag early enough!");
        TogglableParameterizedTest.useAllParameters = true;
    }

    public TogglingSuite(Class<?> klass, Class<?>[] suiteClasses)
        throws InitializationError {
        super(klass, suiteClasses);
    }

    public TogglingSuite(Class<?> klass, List<Runner> runners)
        throws InitializationError {
        super(klass, runners);
    }

    public TogglingSuite(Class<?> klass, RunnerBuilder builder)
            throws InitializationError {
        super(klass, builder);
    }

    public TogglingSuite(RunnerBuilder builder, Class<?> klass,
            Class<?>[] suiteClasses) throws InitializationError {
        super(builder, klass, suiteClasses);
    }

    public TogglingSuite(RunnerBuilder builder, Class<?>[] classes)
            throws InitializationError {
        super(builder, classes);
    }
} 
```

并在您的测试套件中使用它：

```
@RunWith(TogglingSuite.class)
@SuiteClasses({ TogglableParameterizedTest.class })
public class WorkingTestSuite {

} 
```

输出是

```
sets flag early enough!
parameter=1
parameter=2
parameter=3 
```

现在它起作用了。

# javascript - 将大量记录从 XML 加载到 HTML 表

> ID：11430861
> 
> 赞同：0
> 
> 时间：2012-07-11T10:39:08.153
> 
> 标签：javascript, xml, html, records

我正在从 XML 文件中读取记录，并使用 push 方法使用 javascript 在动态创建的 HTML 表（在 id ="content" 的 div 内）中显示它。当记录数低于 1000 时，脚本正常执行并显示内容。但是当记录数超过 100 万时，浏览器（当前使用 Firefox）警告我为无响应脚本（此页面上的脚本可能正忙，或者它可能已停止响应。您可以立即停止脚本，也可以继续看看脚本是否会完成）。我知道我们可以拆分记录并通过页面导航显示，但我需要在当前视图中显示所有记录，就像在 Yahoo!Mail 的滚动选项中一样。或者在显示所有记录之前，我想在“内容”中显示加载图像 div 之后必须显示带有 xml 内容的 HTML 表。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-11T12:11:46.843

您可以在滚动到达最终加载更多记录等后最初加载一些记录。您可以使用以下javascript代码检查滚动结束并加载更多记录：

```
$('#id').bind('scroll', function(){
            if($(this).scrollTop() + $(this).innerHeight() >= $(this)[0].scrollHeight){
                //load more records
            }
        }); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-11T10:54:25.513

这是有充分理由的。将数百万条记录加载到网页中并不是一个好主意，因为它会消耗您的 PC 内存。就像人们为此做了很多解决方法一样简单，您可以使用分页来来回移动。你也可以使用延迟加载。就像您一次只能看到 10 条记录一样，因此在向下滚动页面时会动态加载记录许多 js 库对于分页和延迟加载有不同的实现。这是来自 Extjs 的分页示例 在 [此处输入链接描述](http://dev.sencha.com/deploy/ext-4.0.0/examples/grid/paging.html)

分页和延迟加载。使用其中一种技术

# python - 如何使用正则表达式查找重叠匹配？

> ID：11430863
> 
> 赞同：89
> 
> 时间：2012-07-11T10:39:16.550
> 
> 标签：python, regex, overlapping

```
>>> match = re.findall(r'\w\w', 'hello')
>>> print match
['he', 'll'] 
```

由于 \w\w 表示两个字符，因此需要 'he' 和 'll'。但是为什么 'el' 和 'lo'与正则表达式**不**匹配？

```
>>> match1 = re.findall(r'el', 'hello')
>>> print match1
['el']
>>> 
```

* * *

## 回答 #1

> 赞同：132
> 
> 时间：2012-07-11T10:44:05.500

`findall`默认情况下不会产生重叠匹配。然而，这个表达式确实：

```
>>> re.findall(r'(?=(\w\w))', 'hello')
['he', 'el', 'll', 'lo'] 
```

这`(?=...)`是一个[**前瞻断言**](http://docs.python.org/library/re.html)：

> `(?=...)`如果下一个匹配，则`...`匹配，但不消耗任何字符串。这称为前瞻断言。例如， 仅当它后面跟着. 时`Isaac (?=Asimov)`才会匹配。`'Isaac '``'Asimov'`

* * *

## 回答 #2

> 赞同：46
> 
> 时间：2013-09-23T18:54:12.637

您可以使用支持重叠匹配的[新 Python 正则表达式模块](https://pypi.python.org/pypi/regex)。

```
>>> import regex as re
>>> match = re.findall(r'\w\w', 'hello', overlapped=True)
>>> print match
['he', 'el', 'll', 'lo'] 
```

* * *

## 回答 #3

> 赞同：11
> 
> 时间：2012-07-11T10:51:52.560

除了零长度断言外，输入中的字符将始终在匹配中被消耗。如果您曾经想在输入字符串中多次捕获某些字符，则需要在正则表达式中进行零长度断言。

有几个零长度断言（例如`^`（输入/行的开头）、`$`（输入/行的结尾）、`\b`（字边界）），但环顾四周（`(?<=)`正向后视和`(?=)`正向前瞻）是唯一的方法您可以从输入中捕获重叠的文本。否定的环视（`(?<!)`negative look-behind，`(?!)`negative look-ahead）在这里不是很有用：如果它们断言为真，则内部捕获失败；如果他们断言为假，则匹配失败。这些断言是零长度的（如前所述），这意味着它们将断言而不消耗输入字符串中的字符。如果断言通过，它们实际上将匹配空字符串。

应用上述知识，适用于您的案例的正则表达式将是：

```
(?=(\w\w)) 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2019-02-04T15:41:01.263

我不是正则表达式专家，但我想回答我的类似[问题](https://stackoverflow.com/q/54516251/3557761)。

如果要使用具有前瞻功能的捕获组：

正则表达式示例：`(\d)(?=.\1)`

细绳：`5252`

这将匹配前 5 个和前 2 个

`(\d)`就是做一个捕获组，`(?=\d\1)`就是匹配捕获组1后面的任何数字而不消耗字符串，因此允许重叠

# machine-learning - 来自 UFLDL 的具有 Tanh 激活的稀疏自动编码器

> ID：11430870
> 
> 赞同：1
> 
> 时间：2012-07-11T10:39:43.167
> 
> 标签：machine-learning, neural-network, pattern-recognition, sparse-matrix

我一直在研究 UFLDL 教程（在 matlab/octave 中）：

[http://deeplearning.stanford.edu/wiki/index.php/UFLDL_Tutorial](http://deeplearning.stanford.edu/wiki/index.php/UFLDL_Tutorial)

并且一直在不同的数据集上尝试稀疏自动编码器。我尝试在时间序列数据上运行它并遇到了问题。由于输入数据有负值，sigmoid 激活函数 (1/1 + exp(-x)) 是不合适的。当替换为 tanh 时，优化程序 minfunc (L-BFGS) 失败（步长低于 TolX）。我大幅降低了 TolX 常数，没有任何变化。我将输出层更改为线性，保留输入层 sigmoid，但这不是一个可取的解决方案。自动编码器的输出按常数 (0.5) 放大，这会增加成本函数。所以....简而言之：

为什么 Tanh 激活函数不适用于 L-BFGS？（或者还有什么问题）？

..我错过了什么？到处都读到它说激活函数是可以互换的。我知道有解决方法（重新调整数据，使用 FFT 系数等），但我不明白为什么这不起作用。

无论如何，提前感谢任何回答的人！第一次在这里发帖，我越来越多地阅读这些类型的论坛，并且发现它们越来越有用..

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-12T04:36:22.403

我想我可能已经想通了。谢谢两位的回答！稀疏惩罚使用 Kullback Leibler Divergence。看到这个链接，比页面的一半多一点。（你能在这里输入 Latex 吗？）无论如何它可能有点长..

[http://deeplearning.stanford.edu/wiki/index.php/Autoencoders_and_Sparsity](http://deeplearning.stanford.edu/wiki/index.php/Autoencoders_and_Sparsity)

英文：稀疏惩罚试图最小化隐藏单元的激活，但它假设输出范围在 0 和 1 之间的 sigmoid，因为 KL div 仅在 0 和 1 之间为实数。如果 tanh 的平均激活为 0（其中是我们想要的稀疏自动编码器）然后该页面上给出的 KL div 不满意。我环顾四周，没有运气；

是否有一种形式的 KL div 具有适当的 tanh 激活范围？有人可以指出我的任何参考吗？在上面链接的那个网站上，作者说许多稀疏惩罚的选择是可以的，但没有进一步详细说明其他选择可能是什么。只是编造一些东西是谨慎的..？或者寻找被接受的东西。再次感谢！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-24T17:34:52.390

我已经尝试了 UFLDL 之后的稀疏自动编码器算法。我正在使用fortran90。

在我的代码中，我使用了 tanh 激活函数。该`p_hat`术语已修改为范围 [0,1] 使用，

```
p_hat = (p_hat+1.0)/2.0 
```

因此，稀疏惩罚不会变得不可行。我的成本函数平滑收敛，但隐藏层中的激活节点不会变为非活动状态（-1）。我无法理解这种现象。这无助于我减少输入向量维度的目的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-10T02:30:05.443

我有点松散地遵循 UFLDL，我遇到了同样的问题。

我正在尝试 (beta/2*m)*mean(mean(abs(a2))) 来规范稀疏性的成本，认为随着一个神经元激活的增加将与激活其他神经元。我希望这会导致比 KL 更好的稀疏性；KL 在 p 附近的低导数意味着随着 a2_j 越来越接近 p，a2_j 的进一步减小导致成本的较小下降，使得 a2_j 到达 p 的可能性越来越小；线性成本没有这个问题。

但是，我在弄清楚如何修改 d2 以在反向传播期间获得正确的梯度时遇到了一些麻烦。您现在可能已经找到了其他解决方案，但如果没有，这可能值得弄清楚。如果您（或其他任何人！）弄清楚，我很想得到答案=）

编辑：d2 = d2 + ( (network.beta / (2 * network.examples)) * exp(-a2); ) .* z2_grad; 似乎给出了好的结果。

编辑2：不，它没有。对不起'回合

# php - 有没有其他方法可以在远程服务器上包含一个 php 文件？以外

> ID：11430874
> 
> 赞同：1
> 
> 时间：2012-07-11T10:39:52.100
> 
> 标签：php, javascript, jquery, html, scripting

我已经构建了一个从 MySQL 数据库中提取信息的 php 脚本，并且我想在一些远程服务器上包含该脚本（它是从数据库中提取的内容）。这些客户的网站是用 joomla/wordpress 构建的，并使用简单的 php include(); 在文章/帖子中不起作用。我需要一些易于使用的东西，如果你愿意的话，一个“即用即用”的解决方案。

无论如何，我不关心脚本语言，只要有办法嵌入该页面即可。

有人告诉我，它可以通过 javascript 来完成，其中一个文件将在本地调用该页面，然后另一段代码将远程调用该脚本。对不起，如果这令人困惑......

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-11T10:45:02.740

看到这个： http: [//php.net/manual/en/features.remote-files.php](http://php.net/manual/en/features.remote-files.php)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-11T10:55:01.090

对于 php 方面的事情......

**包括/要求/include_once...**

```
include 'http://www.example.com/yourfile.php'; 
```

实际上应该可以工作，除非您的服务提供商在安全方面投入了一些脑细胞。

**文件获取内容**

```
$homepage = file_get_contents('http://www.example.com/yourfile.php');
echo $homepage; 
```

**开放**

```
$file = fopen ("http://www.example.com/yourfile.php", "r");
if (!$file) {
    echo "<p>Unable to open remote file.\n";
    exit;
}
while (!feof ($file)) {
    $line = fgets ($file, 1024);
    echo $line;
}
fclose($file); 
```

**卷曲**

```
$url  = 'http://www.example.com/yourfile.php';
$path = '/yourfile.php';

$ch = curl_init($url);
curl_setopt($ch, CURLOPT_RETURNTRANSFER, true);
echo $data; 
curl_close($ch); 
```

**wget/curl 通过 shell 调用...**

```
exec('wget http://example.com/yourpage.php', $array);

echo implode('<br />', $array); 
```

有无数种方法..-很确定我忘记了一些-通过javascript（ajax / xhr），html5，iframe来做到这一点...

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-11T10:50:06.030

您可以使用 JSONP 之类的东西作为纯 jevascript 解决方案。或者使用例如 xml-rpc、json-rpc、soap 等定义一个 rpc 接口，并按照您的描述通过 php 脚本获取数据。仅为此使用包含不是一个好主意，因为该功能不是为此而设计的。

我喜欢在服务器端使用简单的 json_encode 并通过 curl 获取数据并通过 json_decode 将它们解码回来，因为大多数时候不需要完整的 rpc 实现。

您可以为您的客户编写一个他们可以轻松使用的课程，您还可以确保他们以正确的方式获取信息。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-11T10:52:53.880

听起来您需要一个 AJAX 请求才能从 PHP 脚本中提取结果集。由于 PHP 脚本需要查看“外部”网址，请查看[curl](http://ca.php.net/curl)的 PHP 文档。

对于 WordPress 客户端，您的 paste-n-go 功能可能采用[shortcode](http://codex.wordpress.org/Shortcode_API)的形式。您将编写一个 WordPress 插件来封装以上所有内容。

我假设 Joomla 会允许类似的东西。

# mysql - Mysql查询（where和group）

> ID：11430878
> 
> 赞同：0
> 
> 时间：2012-07-11T10:40:10.197
> 
> 标签：mysql, sql

我有两张桌子

**tbl_activities**

```
 id | activity 
 1  | activity1
 2  | activity2 
```

**tbl_sub_activities**

```
id |activityId   | subActivity   | status 
 1 |  1          | subActivity1  | done
 2 |  1          | subActivity2  | done
 3 |  1          | subActivity3  | ongoing
 4 |  2          | subActivity4  | done
 5 |  2          | subActivity5  | done 
```

场景：
一个活动可以有很多子活动。

如果子活动的状态都已完成，则活动已完成，
如果子活动的状态仍处于进行中，则活动正在进行。

问题：
如何查询 tbl_activities 以获得这样的输出。

```
 id | activity  | status
 1  | activity1 | ongoing
 2  | activity2 | done 
```

我已经使用 PHP 完成了这项工作，但我想知道如何使用 SQL 查询来完成这项工作。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-11T10:45:41.503

**根据您的模型**，您可以使用这个非常高效的查询：

```
SELECT
    a.id,
    a.activity,
    MAX(s.status) as status
FROM tbl_activities a
INNER JOIN tbl_sub_activities s ON s.activityId = a.id
GROUP BY a.id; 
```

但请注意，它**依赖于模型**：除非所有子活动都是;-)否则`MAX(statuts)`将始终给出`ongoing``done`

对于较少依赖模型的查询，您可以考虑以下模式：

```
SELECT
    a.id,
    a.activity,
    SUM(s.status = "ongoing") as NB_ONGOING,
    SUM(s.status = "done") as NB_DONE
FROM tbl_activities a
INNER JOIN tbl_sub_activities s ON s.activityId = a.id
GROUP BY a.id; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-11T10:57:47.900

如果您只有两个状态已完成和正在进行，那么此查询可能对您有用

```
 Select a.id,a.activityid,b.status 
   from tbl_activities a 
   inner join tbl_sub_activities b on a.id=b.activityid 
   Group by a.id order by b.status DESC 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-11T11:01:54.400

为了更好：

```
SELECT
    a.id,
    a.activity,
    case when SUM(s.status = "done") = count(s.status)
         then "DONE" else "ONGOING" 
    END
FROM tbl_activities a
INNER JOIN tbl_sub_activities s ON s.activityId = a.id
GROUP BY a.id; 
```

# memory-management - 将 cclayer 传递给我的对象时的内存问题

> ID：11430890
> 
> 赞同：0
> 
> 时间：2012-07-11T10:40:36.550
> 
> 标签：memory-management, cocos2d-iphone, dealloc, cclayer, ccmenuitem

我有一个 CCLayer，我想在其中添加许多按钮。我用这个初始化函数创建了 MyButton 类：

```
-(id) initWithLayer:(MyLayer *)theLayer andDictionary:(NSDictionary *)data {
  self = [super init];
  if (self != nil)
  {
    self.layer = theLayer;

    self.tag = [[data objectForKey:@"day"] intValue];
    _layerZ = [[data objectForKey:@"z"] intValue];
    _closedCard = [[CCSprite alloc] initWithFile:[data objectForKey:@"file"]];
    _openedCardFile = [[NSString alloc] initWithString:[data objectForKey:@"open_card"]];

    CCMenuItemImage *itemImage = [CCMenuItemImage
                                        itemFromNormalSprite:_closedCard
                                        selectedSprite:nil
                                        target:self
                                        selector:@selector(displayCard:)];

    CGPoint position = CGPointFromString([data objectForKey:@"position"]);
    _position = ccp(position.x, position.y);
    itemImage.position = _position;
    itemImage.tag = self.tag;

    _theCardButton = [CCMenu menuWithItems:itemImage, nil];
    _theCardButton.position = CGPointZero;
    [self.layer addChild:_theCardButton z:_layerZ];
} 
return self; 
```

}

这个初始化函数会将按钮添加到图层中，并且我正在管理 MyButton 类中的所有行为（移动、图像更改）。

所以图层被发送到所有 MyButton 实例。在释放每个按钮之前，该层不会调用 dealloc 方法。

这些按钮通过数组添加到图层中：

```
_buttons = [[NSMutableArray alloc] init];
for (NSDictionary *buttonData in buttonsArray) {
   MyButton *btn = [[MyButton alloc] initWithLayer:self andDictionary:buttonData];
   [_buttons addObject:btn];
   [btn release];
} 
```

我的问题是当我替换这个场景时，没有调用MyButton的dealloc方法，也没有释放内存，导致[_buttons release]在图层的dealloc方法中，也没有被调用，导致该层已传递给每个按钮。

一团糟。谁能告诉我解决此内存问题的最佳方法？

- 编辑

如果我在调用 replaceScene 之前尝试手动释放按钮数组，每个按钮都会调用 dealloc，但随后我收到以下错误消息：

```
[CCMenu pauseSchedulerAndActions]: message sent to deallocated instance 0x131a0670 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-11T11:20:15.340

不要在按钮中保留您的 CCLayer。这将防止它在所描述的情况下泄漏。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-11T11:32:29.833

您是否在`initWithLayer:andDictionary:`方法中保留该层？然后你有一个保留周期。

当你向`retain`一个对象发送消息时，它的保留计数增加 1。当你发送`release`消息时，你的保留计数减少 1。`dealloc`当它的保留计数达到 0 时，消息被发送到对象。

当`release`消息发送到您的层时，它的保留计数不会达到 0，因为每个都`_buttons`为自己保留它。因为层的保留计数永远不会达到 0，所以它`dealloc`永远不会被调用，按钮永远不会收到释放消息，永远不会被`dealloc`调用，永远不会释放层等等。循环。

为避免保留循环，子对象绝不能保留其任何父对象或任何父对象的父对象。

# jsp - 如何检测jsp中的变量是什么类型？

> ID：11430891
> 
> 赞同：2
> 
> 时间：2012-07-11T10:40:36.887
> 
> 标签：jsp, jstl

正在设置一个参数，我需要检查它是否是一个数字。如果不是，我需要将其值更改为 1。

```
<c:if test="${param.pageOffset TEST HERE}">
    <c:set target="param" property="pageOffset" value="1" />
</c:if> 
```

我对jsp很陌生，所以我可能完全走错了路。任何帮助将非常感激！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-11T10:51:13.203

如果可能，最好在您的 Java 代码中进行这种类型的处理，并将现成的结果发送到 JSP。

我不确定是否有办法使用纯 JSTL 来执行此操作，但如果您决定将此操作保留在 JSP 中，您可以只使用[scriptlet](http://docs.oracle.com/javaee/5/tutorial/doc/bnaou.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-11T11:01:28.397

自动类型*强制*是. *_* `EL/JSTL`这意味着它们定义了适当的转换和默认值。

您可以尝试`<c:catch>`使用 JSTL 标签来测试一个值是否为*数字*。

```
<c:set var="num" value="1"/>
<c:catch var="coerError">
   <c:set value="num" value="${num*1}" />
</c:catch>
<c:if test="${not empty coerError}">

</c:if> 
```

# html - 三个 div 在一行中

> ID：11430895
> 
> 赞同：0
> 
> 时间：2012-07-11T10:40:50.210
> 
> 标签：html, css

我想将三个 div 对齐在一行中，因为我已将左侧和中心 div 设置为 float:left 属性，将右侧 div 设置为 float right 属性

但我的右侧 div 显示在屏幕左侧

我的代码如下

```
<div style="width:100%; height:100%;">
<div align="center" id="left_portion" style="display:none; position:absolute; float:left; width:10%; height:10%;"></div>
<div id="scroller" align="center" style="width:100%; height:100%; overflow:hidden; position:absolute; float:left;">
    <img src="" id="img_main" style="width:100%; height:100%; overflow:hidden;" onClick="scaleImage(event)">
</div>
<div id="right_portion" align="center" style="display:none; float:right; position:absolute;  width:10%; height:10%;"></div>
</div> 
```

我想将左右 div 用作掩蔽 div，即当我单击中心 div 时，第二个 div 将缩放，我想显示 div 的特定部分，其余部分将从左右 div 中屏蔽

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-11T15:57:30.763

如果您希望它们连续显示，为什么不使用`display: inline-block`？这是一个例子：http: [//jsfiddle.net/5y2WK/](http://jsfiddle.net/5y2WK/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-11T10:45:04.973

Position:Absolute 和 Float 相互覆盖。你不能两者兼得。Position:Absolute 表示它会被锁定到一个位置，float 表示它会自动适应，不可能同时做到这两个。

```
<div style="width:100%; height:100%;">
 <div id="left_portion" align="center"  style="float:left; width:10%; height:10%;     background-color:#CCCCCC">

 </div>
 <div id="scroller" align="center" style="width:80%; height:100%; float:left; background-color:#444444">

 </div>
 <div id="right_portion" align="center" style="float:right; width:10%; height:10%; background-color:#CCCCCC">

 </div>
</div> 
```

这至少对我有用。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-11T11:04:44.990

首先移除绝对定位并使用浮动技术，并将第二个 div 的宽度设置为 80% 而不是 100%，以便有一个空间供第一个和第三个 div 加载。

```
<div style="width:100%; height:100%;">
  <div align="center" id="left_portion" style="display:none;  float:left; width:10%; height:10%;">asdasdad</div>
  <div id="scroller" align="center" style="width:80%; height:100%; overflow:hidden; float:left;">   sdfsd
    <img src="" id="img_main" style="width:80%; height:100%; overflow:hidden;" onClick="scaleImage(event)">
  </div>
  <div id="right_portion" align="center" style="display:none; float:right;   width:10%; height:10%;">sdfsdd </div>
</div> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-07-22T08:26:38.320

这可以通过 CSS3 更简单地完成：

样式.css：

```
div.main_div {
        display: flex;
        justify-content: space-between;
        display: -webkit-flex; /* for Safari */
        -webkit-justify-content: space-between; /* for Safari 6.1+ */ 
    }

div.inside_div_left, .inside_div_center, .inside_div_right {;
    } 
```

索引.html：

```
<div class="main_div">
    <div class="inside_div_left"></div>
    <div class="inside_div_center"></div>
    <div class="inside_div_right"></div>
</div> 
```

这将使内部 div 成行并响应地更改它们之间的空间。欲了解更多信息：[http ://www.w3schools.com/cssref/css3_pr_justify-content.asp](http://www.w3schools.com/cssref/css3_pr_justify-content.asp)

# mysql - 如何从带有 JOIN 的日期中选择 DISTINCT 日期

> ID：11430902
> 
> 赞同：1
> 
> 时间：2012-07-11T10:41:32.113
> 
> 标签：mysql, sql, database, join, distinct

我希望只返回一天 - 所以如果同一天有 2 个事件，它只会返回其中一个事件。选择哪个事件是任意的。我认为可行的查询是：

```
SELECT DISTINCT day(events.event_start_date),events.event_id
FROM scheduled_events
JOIN events ON (
scheduled_events.event_id = events.event_id
)
WHERE scheduled_events.user_id = 123
AND MONTH( events.event_start_date ) = 06
AND YEAR( events.event_start_date ) = 2012 
```

**表：事件**

```
+------------+--------------------+
|  event_id  |  event_start_date  |
+------------+--------------------+
|     1      |     2012-06-06     |
|     2      |     2012-06-06     |
|     3      |     2012-06-07     |
+------------|--------------------| 
```

**表：scheduled_events**

```
+------------+-----------+
|  event_id  |  user_id  |
+------------+-----------+
|     1      |    123    |
|     2      |    123    |
|     3      |    123    |
+------------|-----------| 
```

我希望查询返回 id 为 3 和（1**或**2）的事件。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-11T10:44:54.810

您使用的`DISTINCT`关键字指的是整行，即您的所有列。因此，您每天会获得多个结果。要每天只给出一个结果，你应该`GROUP BY`重视这个值。

```
SELECT day(events.event_start_date),events.event_id
FROM scheduled_events
JOIN events ON (
scheduled_events.event_id = events.event_id
)
WHERE scheduled_events.user_id = 123
AND MONTH( events.event_start_date ) = 06
AND YEAR( events.event_start_date ) = 2012
GROUP BY day(events.event_start_date) 
```

这将在 mysql 中工作，并且列出的事件将是您要求的任意事件。但是其他一些 SQL 方言会禁止这样做，即使使用 mysql 也可能存在您想要可重现行为的情况。在这些情况下，您也应该使用[聚合函数](http://dev.mysql.com/doc/refman/5.6/en/group-by-functions.html)，`event_id`例如`MIN(event_id)`.

# facebook-graph-api - fb-login-button 使页面上下跳转直到它加载

> ID：11430903
> 
> 赞同：3
> 
> 时间：2012-07-11T10:41:42.333
> 
> 标签：facebook-graph-api, facebook-javascript-sdk, facebook-login

我将 Facebook 登录添加到我的一个网站。但是，在 Facebook 按钮从文本切换到实际的 fb-login-button 之前，我的网站的高度大于应有的高度，并且一旦 facebook 按钮出现，它就会恢复正常。有谁知道这是为什么？我应该修改什么吗？这是它的代码：

```
<div class="fb-login-button" style="float: left; overflow:hidden;" size="large" scope="user_about_me, email">Use Facebook Account to Login</div> 
```

我认为这是因为 xfbml，但我真的很想使用它，所以我不明白为什么它在显示正确的配色方案之前会上下跳跃。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-01T14:56:30.110

您可以在 CSS 中添加一个 max-height:50px 或接近该值的值。这将强制 fb 按钮暂时不扩展并增加高度以加载 iframe。

你可以尝试这样的事情： **HTML**

```
<div class="fb-login-button fb-no-jump" size="large" scope="user_about_me, email">
Use Facebook Account to Login</div> 
```

和**CSS**：

```
.fb-no-jump {
    display:block;
    max-height:50px /*change as per requirement*/
    overflow:hidden;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-08-28T10:35:21.480

基于 Yohann 的回答，我发现“溢出”和“显示”（带有 !important）是必不可少的。下面的代码对我有用。没有按钮的跳跃，也没有它下面的内容。

```
.fb-login-button-no-jump {
    width: 123px;
    height: 39px;
    overflow: hidden;
    display: block !important;
} 
```

# html - IE9 res://ieframe.dll 错误

> ID：11430904
> 
> 赞同：26
> 
> 时间：2012-07-11T10:41:42.957
> 
> 标签：html, facebook, internet-explorer, iframe

我有一个网站，允许用户将图像发布到 Facebook 页面。我使用表单并将其发布到隐藏的 IFRAME，以防止用户在发布图像后被重定向。

表格定义：

```
<form name="myform" id="myform" enctype="multipart/form-data" action="" method="POST" onsubmit="getAction(this);" target="uploader">
//....form code....// 
```

框架：

```
<iframe name="uploader" width=2px height=2px style="visibility: hidden"></iframe> 
```

我的问题是，在**我自己的**Internet Explorer 9 中，当我尝试上传图像时，出现以下错误：

```
SEC7111: HTTPS security is compromised by res://ieframe.dll/dnserrordiagoff.htm 
SEC7111: HTTPS security is compromised by res://ieframe.dll/ErrorPageTemplate.css 
SEC7111: HTTPS security is compromised by res://ieframe.dll/errorPageStrings.js 
SEC7111: HTTPS security is compromised by res://ieframe.dll/httpErrorPagesScripts.js 
SEC7111: HTTPS security is compromised by res://ieframe.dll/noConnect.png 
SEC7111: HTTPS security is compromised by res://ieframe.dll/bullet.png 
SEC7111: HTTPS security is compromised by res://ieframe.dll/bullet.png 
SEC7111: HTTPS security is compromised by res://ieframe.dll/bullet.png 
SEC7111: HTTPS security is compromised by res://ieframe.dll/down.png 
SEC7111: HTTPS security is compromised by res://ieframe.dll/favcenter.png 
SEC7111: HTTPS security is compromised by res://ieframe.dll/favcenter.png 
SEC7111: HTTPS security is compromised by res://ieframe.dll/background_gradient.jpg 
```

它变得更奇怪了，就像我朋友的电脑一样，它有相同的 IE9 版本，并且连接到同一个网络，帖子工作得很好（它也在我家的另一台电脑上工作，我家的另一台电脑上也工作哥哥的电脑）。**我可以说这只是一个本地问题，但是由于这个站点涉及许多客户，我不能不理解这个错误，如果它发生在我自己的操作系统上，它也可能发生在其他机器上。**

我还要注意，这**在 Chrome 和 FireFox 上运行没有问题**。

我不确定这是与代码相关的问题，我尝试谷歌搜索并找到[Microsoft Article](http://support.microsoft.com/kb/2601307/en-us?sd=rss&spid=15672)和[This article](http://pcsupport.about.com/od/findbyerrormessage/a/ieframedll.htm)。但是我删除了任何第三方 IE 插件，我们和我的朋友连接到同一个路由器（所以这不是路由器问题）并且我已经安装了最新的 Windows 更新。

我目前不知道如何解决这个问题，所以我想问一下你们中是否有人遇到过类似/相同的错误？也许对解决方案有一些想法......

如果需要，我很乐意提供更多代码，但我不想从一开始就用代码填充问题，因为在大多数情况下它都可以正常工作。

谢谢。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2014-04-25T07:19:11.317

最好在**服务器**级别而不是**客户**端解决此问题，因为我们不能指望所有其他网站访问者更改他们的 IE 设置，以便他们可以使用您的网站。

正如您所提到的，它确实是由您在**https**环境中的 iframe 引起的。**IE9**对此特别严格，因此您需要在 x-frame-options 中定义它：

## 对于 Apache，HTTP 服务器

在 Apache Web Server 的 httpd.conf 文件中添加/更改以下行

```
Header always append X-Frame-Options SAMEORIGIN 
```

确保它没有设置为`DENY`. 重启网络服务器

让我知道这是否有帮助

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-07-13T17:41:52.467

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-02-11T09:17:10.220

我们昨天在 IE11 控制台中遇到了这些确切的错误。对我们来说，在 IIS 中将 iframed 内容（将成为 iframe 的 src 的页面）的请求标头设置为 P3P=NOI 会有所帮助。我们通过根据上面的 Georges 回答检查请求标头到达那里。

该方案的不同之处在于我们通过查询参数将门户生成的数字传递给 iframed 内容。门户和 iframed 站点都运行 https。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2018-09-18T08:46:09.700

对我来说，这是由于我连接的站点没有有效的 HTTPS 证书造成的。我为开发创建了一个 Windows 不认为是受信任证书的证书。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2021-04-21T10:50:48.963

感谢[@George Answer](https://stackoverflow.com/a/23286597/2950458)，我们能够查明问题 -

我们最近在项目中启用 Spring Security 时遇到了这个问题。在知道问题是由于 X-Frame-Options=DENY （在开发人员工具中作为响应标头获得）后，我们意识到默认情况下 Spring Security 会附加带有默认值的标头 -

[安全标头](https://docs.spring.io/autorepo/docs/spring-security/3.2.0.CI-SNAPSHOT/reference/html/headers.html)

删除它解决了我们的问题 -

```
@EnableWebSecurity
@Configuration
public class WebSecurityConfig extends
   WebSecurityConfigurerAdapter {

  @Override
  protected void configure(HttpSecurity http) throws Exception {
    http
      // ...
      .headers().disable();
  }
} 
```

* * *

## 回答 #6

> 赞同：-2
> 
> 时间：2013-10-25T12:02:05.553

'res://ieframe.dll/dnserrordiagoff.htm#' 的解决方案：
1\. 打开控制面板-Internet 选项
2\. 隐私选项卡
3\. 设置为低
4\. 应用并确定。

# c# - 为每个异常获取 IIS 7.5 和 C# 的堆栈跟踪

> ID：11430908
> 
> 赞同：1
> 
> 时间：2012-07-11T10:41:58.603
> 
> 标签：c#, iis, iis-7.5, stack-trace

我有一个在 IIS 7.5 上运行的 C# WCF 应用程序。

如果抛出异常，我会得到通用请求失败页面。为了找到有罪的代码，我想获得一个完整的堆栈跟踪，包括行号和文件名。我怎样才能做到这一点？

堆栈是直接返回还是内部记录在服务器上并不重要，只要我能看到导致错误的原因。

**更新**：感谢到目前为止的答案。不幸的是，我是 IIS/c# 新手。有教程或分步说明吗？到目前为止，我不知道如何处理这些答案。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-11T10:46:25.550

您可以在代码中使用几个事件处理程序来调用一些日志记录功能

```
AppDomain.CurrentDomain.UnhandledException += new UnhandledExceptionEventHandler(CurrentDomain_UnhandledException); 
```

和

```
Application.ThreadException += new ThreadExceptionEventHandler(Application_ThreadException); 
```

此外，您应该`includeExceptionDetailInFaults=true`在服务行为配置中进行设置

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-11T10:47:19.770

您可以提供更多信息`FaultExceptions`

[http://msdn.microsoft.com/en-us/library/ms576199.aspx](http://msdn.microsoft.com/en-us/library/ms576199.aspx)

一些例子：

[http://www.c-sharpcorner.com/uploadfile/afenster/wcf-error-handling-and-faultexceptions/](http://www.c-sharpcorner.com/uploadfile/afenster/wcf-error-handling-and-faultexceptions/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-23T13:27:45.853

我在版本 4 的[http://stackdump.codeplex.com/](http://stackdump.codeplex.com/)项目中添加了一个名为 ExceptionTrace 的程序。1 Beta 版将跟踪所有生成的异常，而无需对代码进行任何更改。它仅将自己附加为调试器并侦听所有生成的异常。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-11T11:13:08.940

*   在 Try-Catch 语句中调用以记录错误。[ASP.Net Tracing](http://msdn.microsoft.com/en-us/library/bb386420.aspx)功能非常适合这项任务。

*   或者将异常冒泡到传入并记录`Exception.StackTrace`.

*   `AppDomain.CurrentDomain.UnhandledException`使用@paul 提及的方式一举搞定。

# ruby-on-rails - Rspec Cucumber 避免重复测试

> ID：11430920
> 
> 赞同：0
> 
> 时间：2012-07-11T10:42:37.220
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3, rspec, cucumber

我经常看到人们在 capybara 和 rspec 中编写测试（规范）。默认情况下，RSpec 会生成各种规格，实际上我只是禁用了这些规格：

```
config.generators do |g|
  g.test_framework :rspec,
    :view_specs    => false,
    :request_specs => false,
    :routing_specs => false
  end
end 
```

我这样做是因为我想用 Cucumber 测试视图，对吗？也许我应该禁用其他一些规范以避免两个框架之间的重复测试？

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-11T14:48:41.030

您会看到人们在 Cucumber 和 RSpec 中编写规范，因为它们是两个做同样事情的框架（行为驱动开发）。Cucumber 只是提供了一个业务可读的规范文档，该文档被翻译成代码，而 RSpec 将业务规范混合到描述的代码中，它和上下文块。

一般来说，如果你同时使用两者，你​​可能只是将 RSpec 用于 UNIT 测试功能（模型、控制器、视图和路由规范，尽管有一个强有力的论点是你只需要做模型规范）。然后，您将在 Cucumber 中或通过 RSpec 中的 Request Specs 进行验收测试，没有理由同时使用两者。

我的一般经验法则是，如果只有技术人员使用规范，则使用 RSpec，因为我发现它更易于使用，如果您的产品所有者有足够的动手能力想要查看规范，则使用 Cucumber。

Request Specs 和 Cucumber Features 都是集成测试的一种形式，这意味着您将使用应用程序的所有方面，而不仅仅是孤立的一部分。人们普遍认为您可以将测试控制器、路由和视图的责任推到集成测试中，因此如果您同意不需要它们，您可以在 RSpec 中禁用它们是正确的。

我自己仍然喜欢编写奇怪的控制器测试，通常是为了确保如果我发布带有额外参数的应用程序不会让用户让自己成为管理员或类似的东西。

# perl - Perl WWW::Mechanize::Firefox 和输入类型文件

> ID：11430931
> 
> 赞同：1
> 
> 时间：2012-07-11T10:43:40.510
> 
> 标签：perl, mechanize, www-mechanize

交叉发布[http://perlmonks.org/?node_id=981067](http://perlmonks.org/?node_id=981067)

我在使用 WWW::Mechanize::Firefox 使用输入类型文件将文件上传到带有表单的站点时遇到问题，如下所示：

```
<form enctype="multipart/form-data" action="uploader.php" method="POST" id="formular">
<input type="hidden" name="MAX_FILE_SIZE" value="100000" />
Choose a file to upload: <input name="image0" type="file" id="image0"/><br />
<input type="submit" value="Upload File" /> 
```

uploader.php 的内容如下：

```
<?php
$target_path = "uploads/";

$target_path = $target_path . basename( $_FILES['image0']['name']); 

if(move_uploaded_file($_FILES['image0']['tmp_name'], $target_path)) {
    echo "The file ".  basename( $_FILES['image0']['name']). 
    " has been uploaded";
} else{
    echo "There was an error uploading the file,".  basename( $_FILES['image0']['name'])." please try again!";
}
?> 
```

我用于上传文件的代码如下：

```
#!/usr/bin/perl
use strict;
use warnings;
use WWW::Mechanize::Firefox;

my $bot = WWW::Mechanize::Firefox->new( autoclose => 0,activate =>1);

$bot->get('http://127.0.0.1/file/index.html');
$bot->form_id('formular');
$bot->field('image0','IMAGE.JPG');
$bot->submit; 
```

执行时没有错误，提交了表单但image0中没有任何内容。

我使用的 WWW::Mechanize::Firefox 版本是 0.66 我的 perl 版本是：v5.10.0 为 MSWin32-x86-multi-thread 构建

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-13T21:59:37.817

为什么不尝试在方法中添加图像文件的整个路径和键/值对，`field()`例如

```
my $image_path = "/home/images/IMAGE.JPG";
$bot->field(image0=>$image_path);
$bot->submit(); 
```

此外，假设`WWW::Mechanize::Firefox`继承了所有`LWP::UserAgents`方法，请在`$bot->submit();`

```
$bot->add_handler("request_send",  sub { shift->dump; return });
$bot->add_handler("response_done", sub { shift->dump; return }); 
```

这将启用登录您的代码。注意日志文件中的请求和响应代码，例如“HTTP 200 OK”或“HTTP 302 Found”。这些是标准的 HTTP 响应代码，因此您会知道您得到了正确的响应。

# css - 浏览器宽度的 100% 宽度 div

> ID：11430938
> 
> 赞同：1
> 
> 时间：2012-07-11T10:44:08.123
> 
> 标签：css, html, alignment

我正在尝试在父 div 中添加两个 div，每个 div 中都有一个按钮。我只需要为第二个 div 固定宽度（以像素为单位），并且第一个 div 的宽度应该以 % 为单位，以便第一个 div 内的按钮应该覆盖浏览器的整个空间。

我需要 % 中的所有宽度，而且我不想更改 html 结构和 css，因为它已经实现，所以我只需要更改 css 属性。

这是我的演示 [http://jsfiddle.net/zuyyT/2/](http://jsfiddle.net/zuyyT/2/)

PS：当我缩放浏览器时，第二个 div 出现在下一行。请缩放并检查一次。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-11T11:12:21.047

小提琴正在工作和关闭......您可以采用两种方式之一；使用浮动（需要更改标记的顺序）或定位 - 像这样......

```
<div class="block">
    <div class="block_right"><a href=""> <span>last button</span></a> </div>
    <div class="block_left"><a href="" class="scButton score" > <span>Lorem ipsum</span></a></div>
</div> 
```

和你的 CSS ...

```
.block {
    display:block; background-color:#FFC; width:100%; float:left; height:30px
}
.block_left{
    background-color:#C93; margin-right: 150px;  
}
.block_left a{
    background-color:#CCC; border-radius:4px; padding:4px; width:100%; display:block
}
.block_right{
    float:right; width:130px; background-color:#CC9
} 
```

...使用位置，您需要添加`position:relative`到 .block 然后`right:0`到 .block_right; 保持 .block_left 的边距

使用定位，您无需更改标记中元素的顺序（如果这是一个问题）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-11T11:16:37.793

这可能是您需要的。:-)

```
.block_right{
    position :absolute;
    right:0;
    top:0;
    float:right; width:130px; background-color:#CC9
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-11T11:25:49.210

如果你给你`block_left`的 a`width:100%`然后使用`margin-right:-130px;`你可以让你的 html 保持原样。

即使元素具有 100% 的宽度，负右边距也会在右侧留出空间以供其他元素适应。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-11T11:26:44.680

这是因为右侧 div 的宽度..u 将 100% 分配给父级，将 80% 分配给第一个子级..所以，当浏览器大小为 500 像素（例如）时，第一个子级将占用 400 像素（80%）它......当你给第二个孩子 130 像素时，它会来到下一行......这很明显，因为它在第一行没有足够的空间......所以它应该是 <= 100px（对于这个例子）...

# asp.net-mvc - ASP.NET URL 包含多个“点”符号

> ID：11430939
> 
> 赞同：3
> 
> 时间：2012-07-11T10:44:08.617
> 
> 标签：asp.net-mvc, url-rewriting, web-config, url-routing, system.web.routing

我在 global.asax 中写的代码包含这个

```
oRoutes.MapPageRoute("test-route", "home/{cURL}", "~/test.aspx"); 
```

一切正常，但当 URL 包含“。”时出错 象征。我添加下面的代码只能修复 URL 中的一个点。

```
<httpRuntime relaxedUrlToFileSystemMapping="true" /> 
```

例如，当我调用[http://foo.com/home/open.door.foo/](http://foo.com/home/open.door.foo/)时，路由失败。

有什么简单的方法可以解决这个问题吗？谢谢。

PS 1：请不要提供删除“.foo”之类的最后一个词的方法，因为我的 URL 中可能会出现[http://foo.com/hey.john.open.the.book.volume.1 -胸罩](http://foo.com/hey.john.open.the.book.volume.1-brabra):-)

PS 2：出于某种原因，我必须使用“。” URL 中的符号。:'(

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-11T10:51:36.830

我想根据这里的几篇文章，你应该编码你的价值观

[ASP.NET MVC：如何使用 . （期间）结束](https://stackoverflow.com/questions/332757/asp-net-mvc-how-to-route-search-term-with-period-at-the-end)

[.net 中带点的语义 url](https://stackoverflow.com/questions/294495/semantic-urls-with-dots-in-net#328873)

# android - 如何使用最新的 sdk 并支持旧的

> ID：11430941
> 
> 赞同：0
> 
> 时间：2012-07-11T10:44:17.167
> 
> 标签：android

我需要支持 api 级别 10，并使用最新的 sdk 来提供新的设备功能（仅当设备的 sdk 是新的时）。在清单上，我选择最低版本 10。

问题是应用程序没有成功安装在旧的 sdk 设备上。当我在它工作的那些设备上调试时，签名 aok 的安装失败。

有什么建议么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-17T14:57:01.140

在清单文件中使用它

```
<uses-sdk
        android:minSdkVersion="8"
        android:targetSdkVersion="17" /> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-11T10:47:07.037

如果您的应用程序使用旧 Android 版本上不可用的任何 API，那么您应该尝试使用支持库或放弃这些设备。如果应用程序确实在调试模式下在较旧的模拟器上运行，那么您只需`minSdkVersion`将清单中的更改为较低的。希望这可以帮助。

# javascript - javascript和css样式

> ID：11430944
> 
> 赞同：1
> 
> 时间：2012-07-11T10:44:41.690
> 
> 标签：javascript, css

基本上我只想在左边有**填充**，而不是在这段代码周围：

```
if (xmlhttp.readyState==4 && xmlhttp.status==200)
{
  document.getElementById("livesearch").innerHTML=xmlhttp.responseText;
  document.getElementById("livesearch").style.border="1px solid #000";
  document.getElementById("livesearch").style.background="#FFF";
  document.getElementById("livesearch").style.padding-left="10px";    
} 
```

但我不知道 padding-left 的语法打破了这个论点。有没有更好的方法可以在不使用 CSS 的情况下做到这一点，因为根据 if/else 语句有不同的样式？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-11T10:46:51.360

在本机 js 中，您希望 paddingLeft 不向左填充

```
document.getElementById("livesearch").style.paddingLeft="10px"; 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-11T10:48:34.157

试试这个： `document.getElementById("livesearch").style.paddingLeft="10px";`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2018-03-15T12:55:52.747

把你的变量放在首位总是好的，

```
var liveSearch = document.getElementById("livesearch")
liveSearch.style.paddingLeft = "10px"; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-11T10:50:16.107

有一个参考解释了哪个 javascript 术语对应于哪个 css。喜欢这个 [这个页面](http://www.ajaymatharu.com/css-properties-to-javascript-reference-conversion/)

但通常尽可能使用 css 是一个好习惯。建议将 javascript 和 css 分开。

# jquery - 每次调用滚动事件调用的函数后给予延迟

> ID：11430947
> 
> 赞同：0
> 
> 时间：2012-07-11T10:44:48.997
> 
> 标签：jquery, ajax, ruby-on-rails-3

我在滚动事件上调用 checkscroll()，它不断地发出 Ajax 请求。我想在调用 checkscroll() 之间提供一些延迟，以便在第二次调用 checkscroll() 并发出 ajax 请求之前完成我的第一个 Ajax 请求。这是我的代码：

```
function scroll(){ $(window).bind('scroll',checkScroll);}
        // calling checkScroll()   on scroll
function refresh(){flag = 1;}

function checkScroll() {

if (flag==1){ $(window).unbind('scroll');}

if(nearBottomOfPage() == 0)
{

  currentPage ++;

  xhr = $.ajax(
    {
        url : '/ideabank?page=' + currentPage,
        beforeSend: function() {
                $('#loading').show()
            },
            complete: function(){
                $('#loading').hide()
            },

        success : function(){ "can I do something here"}

    } );
}

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-11T13:31:09.990

试试这个代码：

```
function scroll(){ 
 $(window).bind('scroll',function(){
  setTimeOut(checkScroll,1000);
});
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-12T06:18:44.733

谢谢大家，我已经给 ajax.Posting 代码片段提供了 setTimeout 以便更好地理解。

```
 setTimeout( function() {
        $.ajax({
            type: "GET",

            url: '/ideabank?page=' + currentPage,

            beforeSend: function() {
                $('#loading').show()
            },

            success: function(html) {
                $('#loading').hide()
            }
        });
    }, 500 ); 
```

# spring - 我应该责怪 PostgreSQL - 事务因 DDL 失败

> ID：11430952
> 
> 赞同：1
> 
> 时间：2012-07-11T10:44:59.100
> 
> 标签：spring, postgresql, transactions, ddl

一些背景：

我有一个工作流应用程序（java ee.），其中有要执行的节点。PostgreSQL 9.1.2 与 Spring TX 管理一起使用。

节点在自己的事务中执行（必需，已提交读）。node-1(TX1) 将创建一个表 TB_NODE_1 将数据传递给下一个节点——node2。这是在 TX1 中完成的。

TX1 提交后，节点 2 将被触发执行（在 TX2 中）。node2 做的第一件事是读取 TB_NODE_1 作为其输入。

问题：

它发生了，主要是在重负载下（真正的 LARGE 查询同时命中 PostgreSQL），node2 抱怨：**关系 TB_NODE_1 不存在**。

一些细节：

1.  我使用“create table tb_node_1 as select * from table_foobar where ...”创建 TB_NODE_1。
2.  TX1 保证由 Spring TX 提交。
3.  如果 TX1 回滚，PostgreSQL 将**不会保留在 TX1 中创建的表。**
4.  TX1 没有回滚（TX1 没有异常）。

似乎 PostgreSQL 给了我一个 TX1 已提交的假结果，但实际上它没有。

有人有同样的问题吗？

# php - 使用 jQuery 隐藏 html 表中的空列 .. 不起作用：\

> ID：11430956
> 
> 赞同：0
> 
> 时间：2012-07-11T10:45:08.867
> 
> 标签：php, javascript, jquery, html

```
<html>
<head>
    <script  src="jquery-1.4.4.js"></script>
    <script>

        $('table').each(function(a, tbl) {
            var currentTableRows = $(tbl).attr('rows').length - 1;
            $(tbl).find('th').each(function(i) {
                var remove = 0;
                var currentTable = $(this).parents('table');

                var tds = currentTable.find('tr td:nth-child(' + (i + 1) + ')');
                tds.each(function(j) { if (this.innerHTML == '') remove++; });

                if (remove == currentTableRows) {
                    $(this).hide();
                    tds.hide();
                }
            });
        });

    </script>
</head>
<body>
    <table  border="1" >  
        <tr><td colspan="4" > alaa </td></tr>
        <tr><th>Column1</th><th>Column2</th><th>Column3</th><th>Column4</th></tr>
        <tr ><td>1st</td><td>1.1</td><td></td><td></td></tr>
        <tr class="data"><td>2nd</td><td>2.1</td><td></td><td></td></tr>  
        <tr class="data"><td>3rd</td><td>3.1</td><td></td><td>1</td></tr>  
        <tr class="data"><td>4th</td><td></td><td></td><td></td></tr>
        <tr ><td></td><td></td><td></td><td></td></tr>
        <tr class="data"><td></td><td></td><td></td><td></td></tr>  
    </table>

</body> 
```

这是我的代码...我认为是库的问题，所以我尝试了很多库，例如 jQuery 1.4.4 、 1.5.2 等

这是测试，它在那里工作正常[http://jsfiddle.net/nlovatt/JsLn8/](http://jsfiddle.net/nlovatt/JsLn8/)

但在我的文件中..它不起作用..

问候，

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-11T10:59:00.653

您的代码不起作用有两个原因。

1）您在加载后立即执行脚本`HEAD`，在这个阶段，您的表不存在，因此它什么也不做。要解决此问题，请确保在页面加载时执行它。

2）当您将列中的空白单元格的数量与*表格中*的总行数进行比较时，您错过了这样一个事实，即您的大多数列与表格的行数不同（您的第一行只有一列宽）。您需要与实际列中的行数进行比较，或者更好的是，只需执行相反的操作并检查非空列。

完整的代码就变成了：

```
$(document).ready(function() {
    $('table').each(function(a, tbl) {
        $(tbl).find('th').each(function(i) {
            var remove = true;
            var currentTable = $(this).parents('table');
            var tds = currentTable.find('tr td:nth-child(' + (i + 1) + ')');
            tds.each(function(j) { if (this.innerHTML != '') remove = false; });
            if (remove) {
                $(this).hide();
                tds.hide();
            }
        });
    });
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-11T10:49:49.867

像这样试试

```
 $('#mytable tr th').each(function(i) {
   //select all td in this column
    var tds = $(this).parents('table')
          .find('tr td:nth-child(' + (i + 1) + ')');
    //check if all the cells in this column are empty
    if(tds.length == tds.filter(':empty').length) { 
        //hide header
        $(this).hide();
        //hide cells
        tds.hide();
    } 
    }); 
```

如果列中的所有单元格都为空，则隐藏表中的列

# android - 在android中访问websql/sqlite的后台服务？

> ID：11430957
> 
> 赞同：2
> 
> 时间：2012-07-11T10:45:18.903
> 
> 标签：android, html, sqlite, jquery-mobile, web-sql

我正在使用 html5 为 android 做 jquery 移动应用程序。我们使用 websql 进行本地数据存储。是否可以在后台运行可以访问此数据库并将一些数据从本地数据库上传到服务器 SQL 数据库的服务？我真的对此一无所知。请建议。

听说在浏览器中我们不能做这样的后台服务。如果我将数据从 websql 移动到支持 android 的 SQLite，是否可以运行服务来上传这些数据？

我想拥有，

1.  即使应用程序关闭，也可以运行服务并上传数据。
2.  如果我通过我的应用程序页面重定向，请发送并完成请求

# c++ - 从现有代码中创建 .dll

> ID：11430960
> 
> 赞同：5
> 
> 时间：2012-07-11T10:45:29.550
> 
> 标签：c++, dll

这是新手要求。我正在寻找有关 .dll 创建的材料。具体来说，我想用一个简单的 3D 引擎创建一个 .dll，以了解该过程。我需要比维基百科页面更深入的动态链接库的信息，它们是如何创建的，有什么必要，如何为“调试”和“发布”创建不同的 .dll 文件，如何为其创建 PDB 文件以及如何创建一个头文件，以便轻松使用来自 a、fe、C++ 程序的库。具有强大理论方面的材料（不是那么多，“如何在 Visual Studio 中创建动态链接库”）会很棒。

请分享有关该主题的好材料，我只能在这里和那里找到一些信息，它并没有为我描绘图片。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-11T12:25:28.777

在字里行间阅读，我认为您真的想了解一般的库而不是具体的 dll。**库**只是一个方便的对象（编译）代码包，以及一些关于如何调用它的信息。在 C++ 中，这通常采用 .h 文件的形式。

使用**静态库**(.lib)，链接器以与处理所有其他类完全相同的方式提取所需的代码。一个普通的类将被编译为目标代码（MyClass.obj），当它们都完成后，链接器将它们全部粘在一起，并用适当的地址连接任何对象间调用。这与 .lib 库文件的过程相同。您最终会得到一大堆可执行代码，其中包括您的类和其中的库函数。

对于**动态库**(.dll)，唯一的区别是链接（连接）发生在运行时而不是编译时，并且库对象代码保留在一个单独的球 - dll 文件中。编译 exe 时，所有使用库中函数的调用都映射到存根函数。当 Windows 为您加载 dll 时，它会将 dll 代码粘贴到与您的进程相同的内存区域中，并将存根函数连接到现在可用的实际函数。

唯一的其他区别是 dll 必须公开 Windows 在加载或卸载 dll 时可以调用的函数，以防 dll 想要进行任何初始设置/清除。这通常称为 DllMain()。

如果您想了解库，我会先专注于创建静态 .lib，然后再担心 dll。这是大部分工作的地方。一旦你有了一个库，把它变成一个 dll 就是小菜一碟。

创建库时需要考虑的主要问题是如何公开**API**（应用程序编程接口）。这就是您将向使用您的库的人公开的函数/类。您不必将它们全部公开，但您必须决定要公开什么。您是要公开一些 C 风格的函数，还是要公开整个对象？这是设计图书馆时的真正挑战。如果人们（和您！）会发现您的库有用，您应该尝试使您的 API 易于使用，并且尽可能明显。

As for pdb files, differently named release/debug modules, and creating .h files. These are identical to when doing so in an exe.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-11T12:23:50.783

1) 使用 VS 向导创建一个新的 DLL 项目。

2）将您现有的源文件添加到其中。

3) 将要从 DLL 导出的函数的名称放入 *.def 文件（应由向导创建），如此处[所述](http://msdn.microsoft.com/en-us/library/hyx1zcd3%28v=vs.100%29.aspx)。

基本上，就是这样。调试和发布配置由向导自动创建，但如果您希望 2 个变体以不同的方式命名，您可以更改它们的输出名称：转到项目属性 -> 配置属性 -> 常规 -> 目标名称。

# php - 如何处理禁用准备好的语句

> ID：11430962
> 
> 赞同：2
> 
> 时间：2012-07-11T10:45:33.240
> 
> 标签：php, pdo

我有一个用户可以实例化的数据库类。

```
class Foo extends PDO
{
    public function __construct($dsn, $username, $password)
    {
        parent::__construct($dsn, $username, $password);

        $this->setAttribute(PDO::ATTR_ERRMODE, PDO::ERRMODE_EXCEPTION);
    }
}

$dsn = 'mysql:host=127.0.0.1;dbname=dbdatabase;charset=utf8';
$dbConnection = new Foo($dsn, 'root', 'password'); 
```

但是，当使用的驱动程序为`mysql`：

```
$this->setAttribute(PDO::ATTR_EMULATE_PREPARES, false); 
```

对于其他驱动程序（据我所知），默认情况下禁用预准备语句的模拟（应该如此）。在我的课堂上禁用模拟准备好的语句的正确方法是什么。

*   总是添加行来禁用模拟的准备好的语句？这会有什么副作用吗？
*   做一个`stripos($dsn, 'mysql:')`在dsn里找mysql？
*   通过使用`PDO::getAttribute('PDO::ATTR_DRIVER_NAME')`？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-11T10:54:16.087

我会避免在全球范围内这样做，因为您无法确定此类参数的副作用，因此您不应该这样做。

顺便说一句，你试图只为 mysql 禁用它们，所以只为 mysql 禁用它们。

我确实认为使用`PDO::ATTR_DRIVER_NAME`是一个不错的选择。

我记得`Doctrine\DBAL`使用这些东西加上 driverMap 来确定这些东西*（需要源）*

它看起来也比使用 DSN 更好，因为您可以使用带有 的 DSN 别名`PDO`，因此`mysql`部分可能不存在。

# gwt - 更改画布的线宽 (gwt)

> ID：11430963
> 
> 赞同：2
> 
> 时间：2012-07-11T10:45:35.027
> 
> 标签：gwt, canvas

我有一种方法可以在我的画布中绘制一个六边形。

```
 context.beginPath();
    context.moveTo(points.get(0).X(), points.get(0).Y());
    context.lineTo(points.get(1).X(), points.get(1).Y());
    context.lineTo(points.get(2).X(), points.get(2).Y());
    context.lineTo(points.get(3).X(), points.get(3).Y());
    context.lineTo(points.get(4).X(), points.get(4).Y());
    context.lineTo(points.get(5).X(), points.get(5).Y());
    context.lineTo(points.get(0).X(), points.get(0).Y());
    context.stroke(); 
```

我怎么能控制我画的线的宽度？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-11T10:47:31.610

您正在寻找：

```
context.setLineWidth(10); 
```

# .net - System.Security.Cryptography.CryptographicException - 对象已经存在

> ID：11430966
> 
> 赞同：9
> 
> 时间：2012-07-11T10:45:44.660
> 
> 标签：.net, c#-4.0, encryption, rsa

```
public RSAKeyPair()
    {
        string keyContainerName="pEncKey"
        CspParameters cspp = new CspParameters();
        cspp.Flags = CspProviderFlags.UseMachineKeyStore;
        cspp.KeyContainerName = keyContainerName;
        try
        {
            m_RSA = new RSACryptoServiceProvider(1024, cspp);
        }
        catch(Exception e){}
    } 
```

抛出以下异常的原因是什么：

```
 System.Security.Cryptography.CryptographicException - object already exist 
```

堆栈跟踪如下：

```
 at System.Security.Cryptography.CryptographicException.ThrowCryptographicException(Int32 hr)
   at System.Security.Cryptography.Utils._CreateCSP(CspParameters param, Boolean randomKeyContainer, SafeProvHandle& hProv)
   at System.Security.Cryptography.Utils.CreateProvHandle(CspParameters parameters, Boolean randomKeyContainer)
   at System.Security.Cryptography.Utils.GetKeyPairHelper(CspAlgorithmType keyType, CspParameters parameters, Boolean randomKeyContainer, Int32 dwKeySize, SafeProvHandle& safeProvHandle, SafeKeyHandle& safeKeyHandle)
   at System.Security.Cryptography.RSACryptoServiceProvider.GetKeyPair()
   at System.Security.Cryptography.RSACryptoServiceProvider..ctor(Int32 dwKeySize, CspParameters parameters, Boolean useDefaultKeySize)
   at System.Security.Cryptography.RSACryptoServiceProvider..ctor(Int32 dwKeySize, CspParameters parameters)
   at XXXXXXXX.Core.RSAKeyPair..ctor(String keyContainerName) 
```

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-07-12T04:30:57.043

发生这种情况是因为程序与不同的用户一起运行。一个是普通用户，另一个是启动用户。

创建密钥时，其权限仅授予创建者。

因此，您需要更改密钥的权限，以便所有人都可以使用它。

```
CspParameters cspParams;
cspParams = new CspParameters(PROVIDER_RSA_FULL);
cspParams.KeyContainerName = CONTAINER_NAME;
cspParams.Flags = CspProviderFlags.UseMachineKeyStore;
cspParams.ProviderName = "Microsoft Strong Cryptographic Provider";

CryptoKeyAccessRule rule = new CryptoKeyAccessRule("everyone", CryptoKeyRights.FullControl, AccessControlType.Allow);

cspParams.CryptoKeySecurity = new CryptoKeySecurity();
cspParams.CryptoKeySecurity.SetAccessRule(rule); 
```

更多细节 ，

[http://whowish-programming.blogspot.com/2010/10/systemsecuritycryptographycryptographic.html](http://whowish-programming.blogspot.com/2010/10/systemsecuritycryptographycryptographic.html)

# javascript - 奇怪的 Javascript 功能：(5,2) == 2

> ID：11430967
> 
> 赞同：0
> 
> 时间：2012-07-11T10:45:50.963
> 
> 标签：javascript

> **可能重复：**
> [javascript中逗号运算符的用途（x，x1，x2，...，xn）](https://stackoverflow.com/questions/6927685/the-purpose-of-the-comma-operator-in-javascript-x-x1-x2-xn)

在 Javascript`(5, 2)`中给出`2`，`('a', 'b', 'c')`给出`'c'`等（只需在控制台中尝试）。

我对此的问题：

*   有这个“功能”的原因吗？
*   在哪些情况下可能有用？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-07-11T10:47:24.470

您正在查看[逗号运算符](https://developer.mozilla.org/en/JavaScript/Reference/Operators/Comma_Operator)。

> 逗号运算符计算其两个操作数（从左到右）并返回第二个操作数的值。
> 
> 当您想在需要单个表达式的位置包含多个表达式时，可以使用逗号运算符。此运算符最常见的用法是在 for 循环中提供多个参数。

# ruby-on-rails - 将选择表单中的选项与布尔值匹配

> ID：11430969
> 
> 赞同：21
> 
> 时间：2012-07-11T10:46:03.607
> 
> 标签：ruby-on-rails, haml

我有以下一段代码

```
%br
= f.label :active, 'Status'
= f.select :active, ['Active','Inactive'] 
```

符号 :active 是一个布尔类型的 var。我如何匹配 Active => 1/True 和 Inactive => 0/False 来添加数据库。

对不起新手问题，但我无法弄清楚。

* * *

## 回答 #1

> 赞同：55
> 
> 时间：2012-07-11T10:57:43.213

您可以为每个选项提供一对值：第一个将用作标签（标签的内部文本`<option>`），第二个将用作`value`属性：

```
= f.select :active, [['Active', true], ['Inactive', false]] 
```

它会呈现如下内容：

```
<select name="model[active]">
  <option value="true">Active</option>
  <option value="false">Inactive</option>
</select> 
```

查看 和 的[`select`](http://apidock.com/rails/ActionView/Helpers/FormOptionsHelper/select)文档[`options_for_select`](http://apidock.com/rails/v3.2.1/ActionView/Helpers/FormOptionsHelper/options_for_select)。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2017-03-05T04:23:54.083

如果您使用的是下拉菜单，则为早期答案的一个小扩展。

我需要使用“options_for_select”。此外，":selected" 存储下次返回表单时的值。

```
<%= f.select(:active, options_for_select([['Active', true], ['Inactive', false]], {:selected => @symbol.active}),:prompt => "Select") %> 
```

# c# - 在同一个类上多次使用泛型接口

> ID：11430976
> 
> 赞同：8
> 
> 时间：2012-07-11T10:46:28.523
> 
> 标签：c#, generics, multiple-inheritance

我有一个界面

```
interface IInterface<E>{
    E Foo();
} 
```

然后我创建一个这样的类

```
class Bar : IInterface<String>, IInterface<Int32> {
} 
```

这实际上效果很好，除了我需要使用显式接口定义两个函数之一，如下所示：

```
class Bar : IInterface<String>, IInterface<Int32> {
    String Foo();
    Int32 IInterface<Int32>.Foo();
} 
```

缺点是每次我想到达具有显式接口的 Foo() 时都必须进行强制转换。

处理此问题时的最佳做法是什么？

我正在做一个非常依赖性能的应用程序，所以我真的不想每秒进行一百万次投射。这是 JIT 会解决的问题，还是我应该自己存储实例的铸造版本？

*我没有尝试过这个特定的代码，但它看起来非常接近我正在做的事情。*

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-07-11T11:40:24.597

您不能通过返回类型覆盖，但如果您想避免强制转换，您可以将返回类型转换为 out 参数：

```
interface IInterface<E> {
    void Foo(out E result);
}

class Bar : IInterface<string>, IInterface<int> {
    public void Foo(out string result) {
        result = "x";
    }
    public void Foo(out int result) {
        result = 0;
    }
}

static void Main(string[] args) {
    Bar b = new Bar();
    int i;
    b.Foo(out i);
    string s;
    b.Foo(out s);
} 
```

# javascript - jQuery 会覆盖事件监听器吗？

> ID：11430981
> 
> 赞同：3
> 
> 时间：2012-07-11T10:46:49.087
> 
> 标签：javascript, jquery, jquery-events, jquery-click-event

我有一堆 div，每个 div 都包含一个带有以下点击事件的删除链接：

```
 var observeRemoveRoom = function
    $('.remove_room').click(function(){     
      $(this).parent().removeClass('active');
    });
  } 
```

单击它会删除父级（div）的“活动”类。`observeRemoveRoom`我在窗口加载时调用这个函数，它工作正常。

问题是，我有另一个函数可以添加更多相同的 div。由于`a.remove_room`新 div 中包含的链接不在`window.load`我需要调用的地方`observeRemoveRoom`。

我是否以某种方式复制了事件处理程序？jQuery 会覆盖它们吗？如果是这样，我应该取消绑定处理程序吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-11T10:50:56.767

每次调用`observeRemoveRoom`jQuery 都会为单击事件添加一个新的唯一事件处理函数。

所以是的，您需要`.unbind()`通过不带参数调用来绑定*所有*当前绑定的处理程序`.unbind()`，或者具体并传入函数引用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-11T10:52:38.650

是的，如果您再次调用，您将复制事件处理程序`observeRemoveRoom`，但这可能不会引起注意，因为您只是调用在`removeClass`找不到类时不执行任何操作的方法，这将是第一个侦听器被触发后的情况。

相反，您可以每次取消绑定并重新绑定点击事件，例如：

```
 var observeRemoveRoom = function(){
    var remove_class = function(){     
      $(this).parent().removeClass('active');
    };
    $('.remove_room').off('click', remove_class).on('click', remove_class);
  } 
```

但是就是说，建议您在此函数之外执行此操作，而不是每次都绑定和取消绑定事件，例如：

```
$(document).ready(function(){
    var remove_class = function(){     
      $(this).parent().removeClass('active');
    };
    // If the element exists at dom ready, you can bind the event directly
    $('.remove_room').on("click", remove_class);
    // If the element is added in dynamically, you can [delegate][1] the event
    $('body').on("click", '.remove_room', remove_class);
    // Note: Although I've delegated the event to the body tag in this case
    // I recommend that you use the closest available parent instead
}); 
```

[http://api.jquery.com/on/#direct-and-delegated-events：[1](http://api.jquery.com/on/#direct-and-delegated-events) ]

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-11T10:52:43.043

您可以尝试实时查询以保持更新：[http ://docs.jquery.com/Plugins/livequery](http://docs.jquery.com/Plugins/livequery)

# c# - 使用 ref 从外部方法更改类属性

> ID：11430984
> 
> 赞同：0
> 
> 时间：2012-07-11T10:46:54.233
> 
> 标签：c#

尝试更改类内的字符串属性时发生错误，但如果将（'f.StartTime' 分配给字符串变量它可以工作但不会更改'StartTime' 属性）

喜欢：

```
string x = f.StartTime;
ChangeText(ref x);  // There's no error, but f.StartTime didn't change.
//Unless:
f.StartTime = x; 
```

当然是假方法...

所以我想执行以下代码。

```
public class MainClass
{
    public class Foo
    {
        public string StartTime { get; set; }
        public string ToTime { get; set; }
    }

    private void ChangeText(ref string Time)
    {
        Time = DateTime.Now.ToString();
    }

    public void SetClassObjects()
    {
        Foo f = new Foo()
        {
            StartTime = "Any Text",
            ToTime = "Any Text"
        };

        ChangeText(ref f.StartTime);

        // An error: A property, indexer or dynamic member access may not be passed as an out or ref parameter
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-11T10:51:19.837

字符串是不可变的，分配`f.StartTime`给`x`创建的是*值*的副本而不是引用的副本。因此，您需要重新分配`f.StartTime`. 包含将`ref`正确地重新分配引用`x`（实际上指向 下的新字符串`x`），但由于字符串的值类型语义，引用`f.StartTime`丢失。请注意，字符串是引用类型，它们只是遵循值类型的语义。

在这种情况下，我会回避提供`string`as a `ref`，而是执行以下操作：

```
f.StartTime = GetText();

private string GetText()
{
    return DateTime.Now.ToString();
} 
```

或者传递`Foo`给`ChangeText`方法：

```
private void ChangeText(Foo fooItem)
{
    fooItem.Time = DateTime.Now.ToString();
} 
```

那么就`ChangeText(f);`.

如果你想提供一个通用机制来改变属性字符串，你可以有一个接口：

```
public interface ICanHaveMyTextChanged 
{
    void ChangeText(string newText);
} 
```

哪个`Foo`实现：

```
class Foo : ICanHaveMyTextChanged 
{
    public string StartTime { get; private set; }

    public void ChangeText(string newText)
    {
        StartTime = newText;
    }
} 
```

然后将接口指定为参数，而不是`Foo`：

```
private void ChangeText(ICanHaveMyTextChanged item)
{
    item.ChangeText(DateTime.Now.ToString());
} 
```

并这样称呼：

```
var f = new Foo();
ChangeText(f); 
```

现在任何实现这个接口的类都可以改变它的文本。

# asp.net-mvc-3 - MVC3 - 如何获取控制器的物理路径？

> ID：11430986
> 
> 赞同：1
> 
> 时间：2012-07-11T10:47:02.097
> 
> 标签：asp.net-mvc-3, path, controller

有谁知道如何获取控制器内部的物理路径（例如 HomeController.cs）？

`HttpContext.Request.PhysicalPath`我在 Index() 中尝试过，但它返回

```
"C:\My Projects\MyMVCProject\MvcApplication1" 
```

而不是以下（这是我需要的）：

```
"C:\My Projects\MyMVCProject\MvcApplication1\Controllers\HomeController.cs" 
```

谢谢。

# android - 本地部署安卓应用更新

> ID：11430989
> 
> 赞同：0
> 
> 时间：2012-07-11T10:47:07.307
> 
> 标签：android, local

我想要创建一个只能在内部使用的 Android 应用程序。该应用程序需要与本地托管的服务器通信以检查和下载更新。实现这一目标的最佳方法是什么，是否有任何预先存在的解决方案？

# java - 活动堆栈问题

> ID：11430993
> 
> 赞同：4
> 
> 时间：2012-07-11T10:47:10.350
> 
> 标签：java, android, stack, android-activity

我有两组活动，假设每组有 3 个活动，(A1,B1,C1 || A2,B2,C2) 我从 A1 启动我的应用程序然后 -> B1 -> C1 在这里我想从 C1 跳转到 -> A2在A2，如果我按下它应该存在应用程序而不是让我回到C1，然后从A2我导航到-> B2-> C2。

所以基本上我想改变开始的活动，就像我在一个应用程序中有两个应用程序，当我翻转到第二个应用程序时，我必须清除活动堆栈。那可能吗？有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-11T14:52:18.230

在我看来，您已经回答了自己的问题。你写了：

> 所以基本上我想改变开始的活动，就像我在一个应用程序中有两个应用程序，当我翻转到第二个应用程序时，我必须清除活动堆栈。

我会这样做：

创建一个`DispatcherActivity`在应用程序启动时启动的活动。此活动是您的任务的根活动，负责根据...启动 A1 或 A2 并且不调用`finish()`自身（即：它将被 A1 或 A2 覆盖，但仍位于活动堆栈的根部）。

在`A1`中，捕获“返回”键并告诉 DispatcherActivity 退出，如下所示：

```
@Override
public void onBackPressed() {
    Intent intent = new Intent(this, DispatcherActivity.class);
    intent.addFlags(Intent.FLAG_ACTIVITY_CLEAR_TOP);
    intent.addExtra("exit", "true");
    startActivity(intent);
} 
```

这会将任务堆栈清除到根活动 ( `DispatcherActivity`)，然后`DispatcherActivity`以此意图重新开始。

在`C1`, 要启动`A2`，请执行以下操作：

```
Intent intent = new Intent(this, DispatcherActivity.class);
intent.addFlags(Intent.FLAG_ACTIVITY_CLEAR_TOP);
intent.addExtra("A2", "true");
startActivity(intent); 
```

这会将任务堆栈清除到根活动 ( `DispatcherActivity`)，然后`DispatcherActivity`以此意图重新开始。

in `DispatcherActivity`, in`onCreate()`你需要根据 Intent 中的 extras 来决定要做什么，像这样：

```
Intent intent = getIntent();
if (intent.hasExtra("exit")) {
    // User wants to exit
    finish();
} else if (intent.hasExtra("A2")) {
    // User wants to launch A2
    Intent a2Intent = new Intent(this, A2.class);
    startActivity(a2Intent);
} else {
    // Default behaviour is to launch A1
    Intent a1Intent = new Intent(this, A1.class);
    startActivity(a1Intent);
} 
```

在`A2`中，捕获“返回”键并告诉 DispatcherActivity 使用与中相同的覆盖`onBackPressed()`退出`A1`。

注意：我只是输入了这段代码，所以我没有编译它，它可能并不完美。你的旅费可能会改变 ;-）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-11T10:55:05.540

如果您想在按下后退按钮而不是返回上一个活动时关闭您的应用程序，您应该覆盖后退按钮。在关闭活动后在覆盖方法中调用finish() 方法。我希望这可以帮助你。

编辑：

检查以下链接：这是用于关闭视图堆栈中的所有活动。在关闭您的应用程序之前关闭所有活动。

[http://www.coderzheaven.com/2011/08/27/how-to-close-all-activities-in-your-view-stack-in-android/](http://www.coderzheaven.com/2011/08/27/how-to-close-all-activities-in-your-view-stack-in-android/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-11T10:55:29.587

您可以检查在 Activity A2 中按下按钮的时间，然后如果它是返回按钮，您可以关闭应用程序。您可以在A2中使用以下方法

```
@Override
    public boolean onKeyDown(int keyCode, KeyEvent event) {
        if (keyCode == KeyEvent.KEYCODE_BACK) {
            this.finish();
        }
        return super.onKeyDown(keyCode, event);
    } 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-11T10:58:23.453

尝试以此意图启动活动 A2 -`intent.setFlags(Intent.FLAG_ACTIVITY_CLEAR_TOP);`

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-11T11:00:53.960

使用 onBackPressed 和 finish 方法处理这个问题。

在启动其他活动之前，最好使用 finish() 方法关闭当前活动。

如果您想在后按时转到上一个活动，请覆盖 onBackPressed 方法并调用特定意图。

在 A2 活动中，在 onBackPressed 方法中添加完成方法（此处不要调用之前的活动）。这是方法之一。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-07-11T11:02:59.953

在将 Intent 从 Activity C1 传递到 A2 时用作

```
Intent intent=new Intent(C1.this,A2.class);
intent.setFlags(Intent.FLAG_ACTIVITY_CLEAR_TOP);
startActivity(intent); 
```

并在您的活动 A2 中覆盖后退按钮

```
 @Override
public boolean onKeyDown(int keyCode, KeyEvent event) {
    if (keyCode == KeyEvent.KEYCODE_BACK) {
        A2.this.finish();
    }
    return super.onKeyDown(keyCode, event);
} 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2014-01-29T23:36:22.043

`FLAG_ACTIVITY_CLEAR_TOP`不是你要找的。我想你正在寻找：

```
intent.addFlags(Intent.FLAG_ACTIVITY_CLEAR_TASK | Intent.FLAG_ACTIVITY_NEW_TASK); 
```

# php - PHPstorm中的交互式shell

> ID：11430996
> 
> 赞同：8
> 
> 时间：2012-07-11T10:47:13.910
> 
> 标签：php, phpstorm

是否可以像 PyCharm 一样在 PHPstorm中使用[Interactive shell ？](http://www.php.net/manual/en/features.commandline.interactive.php)

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2015-09-10T15:41:31.360

PhpStorm 10 于 2015 年 11 月 2 日发布，[具有交互式 shell（或 PHP“REPL”）](https://confluence.jetbrains.com/display/PhpStorm/PhpStorm+Development+Roadmap)。要查看它的实际效果，您可以尝试其中一个[Early Access Program (EAP) 版本](https://confluence.jetbrains.com/display/PhpStorm/PhpStorm+Early+Access+Program)。

由于人们似乎无法弄清楚如何使用新功能，我附上截图：

[![在此处输入图像描述](../Images/f43709e08ccb07d28e64cf4c90597da4.png)](https://i.stack.imgur.com/9hHM6.png)

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-07-11T10:49:04.157

不，但是您可以跟踪它的[功能请求](http://youtrack.jetbrains.com/issue/WI-12069)。

# git - CVS SVN Git，我应该为项目使用什么？

> ID：11430998
> 
> 赞同：-2
> 
> 时间：2012-07-11T10:47:20.650
> 
> 标签：git, svn, cvs

我从来没有使用这些创建过项目，我曾经在一个项目中使用过 CVS，它非常简单，只需更改或添加内容并提交它们。现在我已经编写了一些项目，我希望通过我上面提到的方式来发布和更改这些资源。我创建了一个 github 帐户，但 Git 对我来说似乎太复杂了，创建了一个 sourceforge 帐户，但我找不到如何创建 CVS 项目。所以我真的被困住了。所以我需要帮助。正如我所说，CVS 真的很简单，你能解释一下如何创建一个 CVS 项目并将我的整个项目上传到上面吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-11T13:02:00.757

使用分布式版本控制系统 (DVCS)。我不是特别在意哪一个。我更喜欢 Git；其他人更喜欢 Mercurial；还有一些人更喜欢集市；还有其他选择。

DVCS 系统相对于集中式版本控制系统（la CVS 或 SVN）的优势已被[详尽](https://softwareengineering.stackexchange.com/questions/35074/im-a-subversion-geek-why-i-should-consider-or-not-consider-mercurial-or-git-or)[地记录在案。](http://git-scm.com/about)实际上很难避免[偶然发现](https://stackoverflow.com/a/2344280/877115)这些帖子，其中许多都说[“使用分布式版本控制系统比使用集中式版本控制系统几乎没有缺点”。](http://blogs.atlassian.com/2012/02/version-control-centralized-dvcs/)

当然，“几乎没有”并不意味着“精确为零”。如果您使用[大型二进制文件](https://stackoverflow.com/a/1127623/877115)或具有[极长的提交历史，则存在缺点。](https://stackoverflow.com/a/3055693/877115)尽管如此，这听起来不像是在为企业写作，而且很可能不会遇到这些问题。

个人项目是 DVCS 的完美尝试。[文档](http://git-scm.com/book)丰富[。](http://hginit.com/00.html)用户[社区](https://stackoverflow.com/questions/tagged/git)很[强大。](https://stackoverflow.com/questions/tagged/mercurial)许多[开源项目的作者站在你这边。](http://en.wikipedia.org/wiki/Comparison_of_open_source_software_hosting_facilities#Popularity)

总之：跳进去。水很好。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-11T11:02:37.447

您忽略了另一种可能性，即 Mercurial。它是一个类似于 Git 的分布式版本控制系统，但使用起来更简单。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-06-03T17:59:01.247

像 git / mercurial (hg) / bazaar (bzr) 这样的 DVCS 可能是要走的路。

但是，它们相对于 CVS 和 SVN 有一个很大的缺点：截至 2013 年，大多数 DVCS 并不真正支持签入和签出。许多人正在进行部分代表工作，但有时会有诸如复制整个历史记录然后只检查子树的问题。（而您想要的是克隆部分历史记录和部分工作树。）

使用 CVS，您只需签出子目录即可进行部分签入和签出。

可以说，SVN 使它变得更加容易。

使用 CVS，您可以通过将符号链接安排到不同的文件系统存储库和/或签出网络存储库，从多个存储库中创建单个工作区，以便您可以将所有更改签入到它们所属的任何位置作为一个命令。

SVN 导入使这更加容易。

同样，DVCS 开始这样做，但至少可以说支持很笨拙。

总体而言，我建议使用现代 DVCS，但值得注意的是，截至 2013 年，现代 DVCS 尚不了解某些使用模型。

更糟糕的是，许多 DVCS 开发人员根本不了解这些使用模型——尽管我会注意到我曾经向 Linus 提到过我的问题，在他问了几个问题后，他说“是的，我明白你想要什么；git 不那个；你应该把它加成瓷器。”

主要使用模型：当你的项目边界是流动的。您正在开始编写很可能最终会进入库以在其他项目中重用的代码——并且您不断地移动文件。并且您不希望那些其他项目必须获得完整的历史记录。

我的主目录是这样的：许多我部分重用的库。但我很少希望我的整个主目录树克隆到一个新站点，只是一个取决于我正在处理的内容的子集。