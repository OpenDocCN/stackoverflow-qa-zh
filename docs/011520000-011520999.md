# StackOverflow 问答 11520000-11520999

# c++ - 嵌套结构构造函数和联合的问题

> ID：11520000
> 
> 赞同：1
> 
> 时间：2012-07-17T09:49:20.343
> 
> 标签：c++, struct, nested, unions

我有一个嵌套在一个类中的结构和该结构的一个联合。如果我有一个带参数的结构构造函数，那么联合将不会编译。

我还想使用参数创建结构的实例。那条线也失败了。

```
class test
{
public:
test(void);
~test(void);

struct dtType {
    // inline constructors with initialisation lists
    dtType() : mins(0), hrs(0),day(0),mnth(0),year(0),DPOffset(0),DTType(0) {}
    dtType(byte z) : mins(z), hrs(z),day(z),mnth(z),year(z),DPOffset(0),DTType(0) {}
    dtType(byte n,byte h, byte d, byte m, byte y, byte o, byte t) : mins(n), hrs(h),day(d),mnth(m),year(y),DPOffset(o),DTType(t) {}

    // overloaded operator functions
    bool operator< (dtType date){return true;};
    bool operator<= (dtType date){return true;};
    bool operator> (dtType date){return true;};
    bool operator>= (dtType date){return true;};
    bool operator== (dtType date){return true;};

    // data members
    unsigned mins: 3;
    unsigned hrs: 5; // 8 bits
    unsigned day: 5; 
    unsigned mnth: 4;
    unsigned year: 7; // 16 bits
    unsigned DPOffset: 6; 
    unsigned DTType  : 2;
};

// if I comment out the union it compiles, otherwise I get:
// error C2620: member 'test::dtUnion::dt' of union 'test::dtUnion' has user-defined  constructor or non-trivial default constructor

union dtUnion { 
    dtType dt;
    unsigned long dtLong; // 32 bits
} dtU;

// if I call dtType judgement_day(); it compiles. Otherwise I get:
dtType judgement_day(1); // error C2059: syntax error : 'constant'

}; 
```

按照下面的答案，我现在尝试了以下方法，但出现错误 C2438：judgement_day,dateMask,timeMask : cannot initialize static class data via constructor

```
class test
{
public:
    test(): judgement_day(1),dateMask(1,1,1,1,1,0,0),timeMask(1,1,0,0,0,0,0){}
~test();
public:
struct dtType {
    // inline constructors with initialisation lists
    dtType() : mins(0), hrs(0),day(0),mnth(0),year(0),DPOffset(0),DTType(0) {}
    dtType(byte z) : mins(z), hrs(z),day(z),mnth(z),year(z),DPOffset(0),DTType(0) {}
    dtType(byte n,byte h, byte d, byte m, byte y, byte o, byte t) : mins(n), hrs(h),day(d),mnth(m),year(y),DPOffset(o),DTType(t) {}
    // overloaded operator functions
    bool operator< (dtType date){return true;};
    bool operator<= (dtType date){return true;};
    bool operator> (dtType date){return true;};
    bool operator>= (dtType date){return true;};
    bool operator== (dtType date){return true;};
    // data members
    unsigned mins: 3;
    unsigned hrs: 5; // 8 bits
    unsigned day: 5; 
    unsigned mnth: 4;
    unsigned year: 7; // 16 bits
    unsigned DPOffset: 6; 
    unsigned DTType  : 2;
};
const static dtType judgement_day;
const static dtType dateMask;
const static dtType timeMask;
}; 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-17T09:55:23.663

标准不允许使用具有显式构造函数的成员，这与成员或嵌套类型`union`无关。`union`

以下内容也将无法编译：

```
struct X
{
    X() {};
};
union Y
{
    X k;
}; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-17T10:21:41.640

其他人已经回答了关于工会的问题；它不能包含具有非平凡默认构造函数的成员。要回答第二个问题，关于成员初始化：

不能在类定义中初始化非静态成员；它们必须在构造函数的初始化列表中初始化：

```
class test {
    // stuff
    dtType judgement_day;
};

test::test() : judgement_day(1) {} 
```

编译的原因`dtType judgement_day();`是它声明了一个函数，而不是一个变量。

更新：由于您实际上希望这些成员是静态的，因此它们在源文件中被初始化，类似于全局变量：

```
// in the header
class test {
    // stuff
    const static dtType judgement_day;
};

// in exactly one source file
const test::dtType dtType::judgement_day(1); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-17T09:56:12.833

联合不能包含类实例。考虑一个包含两个对象的联合，在创建联合时应该调用哪个构造函数？编译器不能同时调用这两个构造函数，因为这可能会导致一个对象包含错误值。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-17T10:11:56.580

只要联合包含一个`dtType`成员，`dtType`就不能有构造函数。

但是，您可以将构造`void Set()`函数更改为函数，以便在构造后隐式调用。

例如：

```
int main()
{
    test::dtType judgement_day;
    judgement_day.Set(1);

    test::dtUnion x;
    x.dt.Set(1);

    assert(judgement_day == x.dt);
    return 0;
} 
```

# java - 自定义 JButton：setText 没有效果

> ID：11520003
> 
> 赞同：1
> 
> 时间：2012-07-17T09:49:27.427
> 
> 标签：java, swing, jbutton, paintcomponent, settext

我有带有渐变背景和圆角的自定义 JButton 类。我应该覆盖 setText() 还是应该怎么做才能在上面显示文本？setText("text") 没有效果。

UPD：我已经尝试过 setContentAreaFilled(false)，就像 MadProgrammer 建议的那样，它解决了这个问题，但又出现了另一个问题。我在不同的选项卡上有这样的按钮，当它们被重新绘制时，它们会出现几毫秒，就像它们都在同一个选项卡上一样。更新的代码在这里：

```
public class DarkGradientButton extends JButton {
private Color startColor = new Color(178, 178, 178);
private Color endColor = new Color(131, 131, 131);

private Color disstartColor = new Color(252, 252, 252);
private Color disendColor = new Color(221, 221, 221);

private Color enstartColor = new Color(178, 178, 178);
private Color enendColor = new Color(131, 131, 131);

public DarkGradientButton(String text, ImageIcon ii) {
    super(text, ii);
    this.setContentAreaFilled(false);
}

public DarkGradientButton() {
    super();
    this.setContentAreaFilled(false);
}

@Override
protected void paintComponent( Graphics g )
{
    g.setColor(new Color(246,250,245));        
    int h = getHeight();
    int w = getWidth();
    GradientPaint gradientPaint = new GradientPaint( 0 , 0 , startColor , 0 , h , endColor );
    int[] x = {0, 1, w-1, w, w,   w-1, w-2, 2,   1, 0};
    int[] y = {1, 0, 0,   1, h-3, h-2, h-1, h-1, h-2, h-3};
    Graphics2D graphics2D = (Graphics2D)g;
    graphics2D.setPaint( gradientPaint );
    graphics2D.fillPolygon(x, y, x.length);    
    graphics2D.setColor(this.getForeground());
    super.paintComponent( g );
}

public void makeDisable() {
    startColor = disstartColor;
    endColor = disendColor;        
    Graphics g = this.getGraphics();
    paintComponent(g);
    this.repaint();
}

public void makeEnable() {
    startColor = enstartColor;
    endColor = enendColor;        
    Graphics g = this.getGraphics();
    paintComponent(g);
    this.repaint();
}
} 
```

选项卡上的按钮（这是 Netbeans 为我生成的）：

```
callStartButton = new gui.DarkGradientButton(language[25], new ImageIcon("pic\\call-start.png"));

callStartButton.setBorder(null);
    callStartButton.setForeground(new java.awt.Color(255, 255, 255));
    callStartButton.setFont(new java.awt.Font("Arial", 1, 12)); // NOI18N
    callStartButton.setPreferredSize(new java.awt.Dimension(95, 23));
    callStartButton.addActionListener(new java.awt.event.ActionListener() {
        public void actionPerformed(java.awt.event.ActionEvent evt) {
            callStartButtonActionPerformed(evt);
        }
    });

org.jdesktop.layout.GroupLayout callPanelLayout = new org.jdesktop.layout.GroupLayout(callPanel);
    callPanel.setLayout(callPanelLayout);
    callPanelLayout.setHorizontalGroup(
        callPanelLayout.createParallelGroup(org.jdesktop.layout.GroupLayout.LEADING)
        .add(callPanelLayout.createSequentialGroup()
            .add(callPanelLayout.createParallelGroup(org.jdesktop.layout.GroupLayout.LEADING)
                .add(callPanelLayout.createSequentialGroup()
                    .add(19, 19, 19)
                    .add(callStartButton, org.jdesktop.layout.GroupLayout.PREFERRED_SIZE, org.jdesktop.layout.GroupLayout.DEFAULT_SIZE, org.jdesktop.layout.GroupLayout.PREFERRED_SIZE)
                    .addPreferredGap(org.jdesktop.layout.LayoutStyle.UNRELATED)
                    .add(callStopButton, org.jdesktop.layout.GroupLayout.PREFERRED_SIZE, org.jdesktop.layout.GroupLayout.DEFAULT_SIZE, org.jdesktop.layout.GroupLayout.PREFERRED_SIZE))
                .add(callPanelLayout.createSequentialGroup()
                    .addContainerGap()
                    .add(numberLabel, org.jdesktop.layout.GroupLayout.PREFERRED_SIZE, 63, org.jdesktop.layout.GroupLayout.PREFERRED_SIZE)
                    .addPreferredGap(org.jdesktop.layout.LayoutStyle.UNRELATED)
                    .add(callPanelLayout.createParallelGroup(org.jdesktop.layout.GroupLayout.LEADING)
                        .add(numberExampleLabel, org.jdesktop.layout.GroupLayout.PREFERRED_SIZE, 128, org.jdesktop.layout.GroupLayout.PREFERRED_SIZE)
                        .add(callPanelLayout.createSequentialGroup()
                            .add(codeField, org.jdesktop.layout.GroupLayout.PREFERRED_SIZE, 47, org.jdesktop.layout.GroupLayout.PREFERRED_SIZE)
                            .addPreferredGap(org.jdesktop.layout.LayoutStyle.RELATED)
                            .add(numberField, org.jdesktop.layout.GroupLayout.PREFERRED_SIZE, 89, org.jdesktop.layout.GroupLayout.PREFERRED_SIZE))))
                .add(callPanelLayout.createSequentialGroup()
                    .add(25, 25, 25)
                    .add(callProgressBar, org.jdesktop.layout.GroupLayout.PREFERRED_SIZE, 190, org.jdesktop.layout.GroupLayout.PREFERRED_SIZE)))
            .addContainerGap(14, Short.MAX_VALUE))
    );

callPanelLayout.setVerticalGroup(
        callPanelLayout.createParallelGroup(org.jdesktop.layout.GroupLayout.LEADING)
        .add(callPanelLayout.createSequentialGroup()
            .addContainerGap()
            .add(callPanelLayout.createParallelGroup(org.jdesktop.layout.GroupLayout.BASELINE)
                .add(numberField, org.jdesktop.layout.GroupLayout.PREFERRED_SIZE, org.jdesktop.layout.GroupLayout.DEFAULT_SIZE, org.jdesktop.layout.GroupLayout.PREFERRED_SIZE)
                .add(codeField, org.jdesktop.layout.GroupLayout.PREFERRED_SIZE, org.jdesktop.layout.GroupLayout.DEFAULT_SIZE, org.jdesktop.layout.GroupLayout.PREFERRED_SIZE)
                .add(numberLabel))
            .addPreferredGap(org.jdesktop.layout.LayoutStyle.RELATED)
            .add(numberExampleLabel, org.jdesktop.layout.GroupLayout.PREFERRED_SIZE, 14, org.jdesktop.layout.GroupLayout.PREFERRED_SIZE)
            .add(18, 18, 18)
            .add(callPanelLayout.createParallelGroup(org.jdesktop.layout.GroupLayout.BASELINE)
                .add(callStartButton, org.jdesktop.layout.GroupLayout.PREFERRED_SIZE, org.jdesktop.layout.GroupLayout.DEFAULT_SIZE, org.jdesktop.layout.GroupLayout.PREFERRED_SIZE)
                .add(callStopButton, org.jdesktop.layout.GroupLayout.PREFERRED_SIZE, org.jdesktop.layout.GroupLayout.DEFAULT_SIZE, org.jdesktop.layout.GroupLayout.PREFERRED_SIZE))
            .addPreferredGap(org.jdesktop.layout.LayoutStyle.RELATED, 8, Short.MAX_VALUE)
            .add(callProgressBar, org.jdesktop.layout.GroupLayout.PREFERRED_SIZE, org.jdesktop.layout.GroupLayout.DEFAULT_SIZE, org.jdesktop.layout.GroupLayout.PREFERRED_SIZE)
            .add(13, 13, 13))
    );

org.jdesktop.layout.GroupLayout testPanelLayout = new org.jdesktop.layout.GroupLayout(testPanel);
    testPanel.setLayout(testPanelLayout);
    testPanelLayout.setHorizontalGroup(
        testPanelLayout.createParallelGroup(org.jdesktop.layout.GroupLayout.LEADING)
        .add(testPanelLayout.createSequentialGroup()
            .add(8, 8, 8)
            .add(testPanelLayout.createParallelGroup(org.jdesktop.layout.GroupLayout.LEADING)
                .add(testPanelLayout.createSequentialGroup()
                    .add(testPanelLayout.createParallelGroup(org.jdesktop.layout.GroupLayout.LEADING, false)
                        .add(ascii, org.jdesktop.layout.GroupLayout.DEFAULT_SIZE, org.jdesktop.layout.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE)
                        .add(jScrollPane2, org.jdesktop.layout.GroupLayout.DEFAULT_SIZE, org.jdesktop.layout.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE))
                    .add(0, 0, 0)
                    .add(testPanelLayout.createParallelGroup(org.jdesktop.layout.GroupLayout.LEADING, false)
                        .add(hex, org.jdesktop.layout.GroupLayout.DEFAULT_SIZE, org.jdesktop.layout.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE)
                        .add(jScrollPane9)))
                .add(lightGradientPanel1, org.jdesktop.layout.GroupLayout.PREFERRED_SIZE, org.jdesktop.layout.GroupLayout.DEFAULT_SIZE, org.jdesktop.layout.GroupLayout.PREFERRED_SIZE)
                .add(testPanelLayout.createSequentialGroup()
                    .add(testPanelLayout.createParallelGroup(org.jdesktop.layout.GroupLayout.LEADING)
                        .add(testPanelLayout.createSequentialGroup()
                            .add(testManagementPanel, org.jdesktop.layout.GroupLayout.PREFERRED_SIZE, org.jdesktop.layout.GroupLayout.DEFAULT_SIZE, org.jdesktop.layout.GroupLayout.PREFERRED_SIZE)
                            .add(0, 0, 0)
                            .add(testResultPanel, org.jdesktop.layout.GroupLayout.PREFERRED_SIZE, org.jdesktop.layout.GroupLayout.DEFAULT_SIZE, org.jdesktop.layout.GroupLayout.PREFERRED_SIZE))
                        .add(testPanelLayout.createSequentialGroup()
                            .add(testModemHeaderPanel, org.jdesktop.layout.GroupLayout.PREFERRED_SIZE, org.jdesktop.layout.GroupLayout.DEFAULT_SIZE, org.jdesktop.layout.GroupLayout.PREFERRED_SIZE)
                            .add(0, 0, 0)
                            .add(testResultHeaderPanel1, org.jdesktop.layout.GroupLayout.PREFERRED_SIZE, org.jdesktop.layout.GroupLayout.DEFAULT_SIZE, org.jdesktop.layout.GroupLayout.PREFERRED_SIZE)))
                    .add(0, 0, 0)
                    .add(testPanelLayout.createParallelGroup(org.jdesktop.layout.GroupLayout.LEADING)
                        .add(callHeaderPanel, org.jdesktop.layout.GroupLayout.PREFERRED_SIZE, org.jdesktop.layout.GroupLayout.DEFAULT_SIZE, org.jdesktop.layout.GroupLayout.PREFERRED_SIZE)
                        .add(callPanel, org.jdesktop.layout.GroupLayout.PREFERRED_SIZE, org.jdesktop.layout.GroupLayout.DEFAULT_SIZE, org.jdesktop.layout.GroupLayout.PREFERRED_SIZE))))
            .addPreferredGap(org.jdesktop.layout.LayoutStyle.UNRELATED)
            .add(testPanelLayout.createParallelGroup(org.jdesktop.layout.GroupLayout.LEADING)
                .add(testPanelLayout.createParallelGroup(org.jdesktop.layout.GroupLayout.LEADING, false)
                    .add(modemModelPanel, org.jdesktop.layout.GroupLayout.DEFAULT_SIZE, org.jdesktop.layout.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE)
                    .add(modemHeaderPanel, org.jdesktop.layout.GroupLayout.DEFAULT_SIZE, org.jdesktop.layout.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE)
                    .add(modemModelHeaderPanel, org.jdesktop.layout.GroupLayout.DEFAULT_SIZE, org.jdesktop.layout.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE)
                    .add(modemParamsPanel, org.jdesktop.layout.GroupLayout.DEFAULT_SIZE, org.jdesktop.layout.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE))
                .add(simPanel, org.jdesktop.layout.GroupLayout.PREFERRED_SIZE, 240, org.jdesktop.layout.GroupLayout.PREFERRED_SIZE)
                .add(testModemHeaderPanel1, org.jdesktop.layout.GroupLayout.PREFERRED_SIZE, 240, org.jdesktop.layout.GroupLayout.PREFERRED_SIZE))
            .add(17, 17, Short.MAX_VALUE))
        .add(testPanelLayout.createSequentialGroup()
            .add(testPanelLayout.createParallelGroup(org.jdesktop.layout.GroupLayout.LEADING)
                .add(org.jdesktop.layout.GroupLayout.TRAILING, testPanelLayout.createSequentialGroup()
                    .add(10, 10, 10)
                    .add(userGuideButton5, org.jdesktop.layout.GroupLayout.PREFERRED_SIZE, org.jdesktop.layout.GroupLayout.DEFAULT_SIZE, org.jdesktop.layout.GroupLayout.PREFERRED_SIZE)
                    .addPreferredGap(org.jdesktop.layout.LayoutStyle.RELATED, org.jdesktop.layout.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE)
                    .add(irzLabel1, org.jdesktop.layout.GroupLayout.PREFERRED_SIZE, 117, org.jdesktop.layout.GroupLayout.PREFERRED_SIZE))
                .add(testPanelLayout.createSequentialGroup()
                    .add(309, 309, 309)
                    .add(saveASCIILogButton, org.jdesktop.layout.GroupLayout.PREFERRED_SIZE, org.jdesktop.layout.GroupLayout.DEFAULT_SIZE, org.jdesktop.layout.GroupLayout.PREFERRED_SIZE)
                    .add(0, 0, Short.MAX_VALUE)))
            .addContainerGap())
    );
    testPanelLayout.setVerticalGroup(
        testPanelLayout.createParallelGroup(org.jdesktop.layout.GroupLayout.LEADING)
        .add(testPanelLayout.createSequentialGroup()
            .add(15, 15, 15)
            .add(testPanelLayout.createParallelGroup(org.jdesktop.layout.GroupLayout.LEADING, false)
                .add(testPanelLayout.createSequentialGroup()
                    .add(testPanelLayout.createParallelGroup(org.jdesktop.layout.GroupLayout.LEADING)
                        .add(testModemHeaderPanel, org.jdesktop.layout.GroupLayout.PREFERRED_SIZE, org.jdesktop.layout.GroupLayout.DEFAULT_SIZE, org.jdesktop.layout.GroupLayout.PREFERRED_SIZE)
                        .add(testResultHeaderPanel1, org.jdesktop.layout.GroupLayout.PREFERRED_SIZE, org.jdesktop.layout.GroupLayout.DEFAULT_SIZE, org.jdesktop.layout.GroupLayout.PREFERRED_SIZE)
                        .add(callHeaderPanel, org.jdesktop.layout.GroupLayout.PREFERRED_SIZE, org.jdesktop.layout.GroupLayout.DEFAULT_SIZE, org.jdesktop.layout.GroupLayout.PREFERRED_SIZE))
                    .add(testPanelLayout.createParallelGroup(org.jdesktop.layout.GroupLayout.TRAILING)
                        .add(testResultPanel, org.jdesktop.layout.GroupLayout.PREFERRED_SIZE, org.jdesktop.layout.GroupLayout.DEFAULT_SIZE, org.jdesktop.layout.GroupLayout.PREFERRED_SIZE)
                        .add(testManagementPanel, org.jdesktop.layout.GroupLayout.PREFERRED_SIZE, org.jdesktop.layout.GroupLayout.DEFAULT_SIZE, org.jdesktop.layout.GroupLayout.PREFERRED_SIZE)
                        .add(callPanel, org.jdesktop.layout.GroupLayout.PREFERRED_SIZE, org.jdesktop.layout.GroupLayout.DEFAULT_SIZE, org.jdesktop.layout.GroupLayout.PREFERRED_SIZE))
                    .add(22, 22, 22)
                    .add(lightGradientPanel1, org.jdesktop.layout.GroupLayout.PREFERRED_SIZE, org.jdesktop.layout.GroupLayout.DEFAULT_SIZE, org.jdesktop.layout.GroupLayout.PREFERRED_SIZE)
                    .add(0, 0, 0)
                    .add(testPanelLayout.createParallelGroup(org.jdesktop.layout.GroupLayout.TRAILING)
                        .add(jScrollPane2, org.jdesktop.layout.GroupLayout.PREFERRED_SIZE, 271, org.jdesktop.layout.GroupLayout.PREFERRED_SIZE)
                        .add(jScrollPane9, org.jdesktop.layout.GroupLayout.PREFERRED_SIZE, 271, org.jdesktop.layout.GroupLayout.PREFERRED_SIZE))
                    .add(testPanelLayout.createParallelGroup(org.jdesktop.layout.GroupLayout.LEADING)
                        .add(hex, org.jdesktop.layout.GroupLayout.PREFERRED_SIZE, org.jdesktop.layout.GroupLayout.DEFAULT_SIZE, org.jdesktop.layout.GroupLayout.PREFERRED_SIZE)
                        .add(org.jdesktop.layout.GroupLayout.TRAILING, ascii, org.jdesktop.layout.GroupLayout.PREFERRED_SIZE, org.jdesktop.layout.GroupLayout.DEFAULT_SIZE, org.jdesktop.layout.GroupLayout.PREFERRED_SIZE)))
                .add(testPanelLayout.createSequentialGroup()
                    .add(modemModelHeaderPanel, org.jdesktop.layout.GroupLayout.PREFERRED_SIZE, org.jdesktop.layout.GroupLayout.DEFAULT_SIZE, org.jdesktop.layout.GroupLayout.PREFERRED_SIZE)
                    .add(0, 0, 0)
                    .add(modemModelPanel, org.jdesktop.layout.GroupLayout.PREFERRED_SIZE, org.jdesktop.layout.GroupLayout.DEFAULT_SIZE, org.jdesktop.layout.GroupLayout.PREFERRED_SIZE)
                    .add(0, 0, 0)
                    .add(modemHeaderPanel, org.jdesktop.layout.GroupLayout.PREFERRED_SIZE, org.jdesktop.layout.GroupLayout.DEFAULT_SIZE, org.jdesktop.layout.GroupLayout.PREFERRED_SIZE)
                    .add(0, 0, 0)
                    .add(modemParamsPanel, org.jdesktop.layout.GroupLayout.PREFERRED_SIZE, org.jdesktop.layout.GroupLayout.DEFAULT_SIZE, org.jdesktop.layout.GroupLayout.PREFERRED_SIZE)
                    .addPreferredGap(org.jdesktop.layout.LayoutStyle.RELATED, org.jdesktop.layout.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE)
                    .add(testModemHeaderPanel1, org.jdesktop.layout.GroupLayout.PREFERRED_SIZE, org.jdesktop.layout.GroupLayout.DEFAULT_SIZE, org.jdesktop.layout.GroupLayout.PREFERRED_SIZE)
                    .add(0, 0, 0)
                    .add(simPanel, org.jdesktop.layout.GroupLayout.PREFERRED_SIZE, org.jdesktop.layout.GroupLayout.DEFAULT_SIZE, org.jdesktop.layout.GroupLayout.PREFERRED_SIZE)))
            .addPreferredGap(org.jdesktop.layout.LayoutStyle.RELATED)
            .add(testPanelLayout.createParallelGroup(org.jdesktop.layout.GroupLayout.LEADING)
                .add(testPanelLayout.createSequentialGroup()
                    .add(saveASCIILogButton, org.jdesktop.layout.GroupLayout.PREFERRED_SIZE, org.jdesktop.layout.GroupLayout.DEFAULT_SIZE, org.jdesktop.layout.GroupLayout.PREFERRED_SIZE)
                    .addPreferredGap(org.jdesktop.layout.LayoutStyle.RELATED, org.jdesktop.layout.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE)
                    .add(userGuideButton5, org.jdesktop.layout.GroupLayout.PREFERRED_SIZE, org.jdesktop.layout.GroupLayout.DEFAULT_SIZE, org.jdesktop.layout.GroupLayout.PREFERRED_SIZE))
                .add(org.jdesktop.layout.GroupLayout.TRAILING, testPanelLayout.createSequentialGroup()
                    .add(0, 34, Short.MAX_VALUE)
                    .add(irzLabel1, org.jdesktop.layout.GroupLayout.PREFERRED_SIZE, 61, org.jdesktop.layout.GroupLayout.PREFERRED_SIZE)
                    .addContainerGap())))
    );

    jTabbedPane1.addTab("tab1", testPanel);

jLayeredPane1.add(jTabbedPane1, javax.swing.JLayeredPane.DEFAULT_LAYER);
    jTabbedPane1.getAccessibleContext().setAccessibleName("");

    getContentPane().add(jLayeredPane1, new org.netbeans.lib.awtextra.AbsoluteConstraints(0, 5, -1, 660)); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-17T10:29:46.733

setText 不起作用的主要原因是因为你在它上面画了

```
g.fillRect(0, 0, w, h); 
```

您会发现他的 ui 正在渲染`super.paintComponent(g)`调用中的文本，然后您正在对其进行绘画

**更新**

我使用以下代码显示一些选项卡，但找不到任何错误...

包装测试；

导入 java.awt.BorderLayout；导入 java.awt.GridBagLayout；导入 java.util.List；导入 javax.swing.*；导入 javax.swing.plaf.ColorUIResource；

公共类TestButton {

```
public static void main(String[] args) {
    Object grad = UIManager.get("Button.gradient");
    List gradient;
    if (grad instanceof List) {
        gradient = (List) grad;
        System.out.println(gradient.get(0));
        System.out.println(gradient.get(1));
        System.out.println(gradient.get(2));
        System.out.println(gradient.get(3));
        System.out.println(gradient.get(4));
        //gradient.set(2, new ColorUIResource(221, 232, 243));//origal Color
        //gradient.set(2, new ColorUIResource(255, 255, 255));//origal Color
        //gradient.set(2, new ColorUIResource(184, 207, 229));//origal Color
        gradient.set(2, new ColorUIResource(190, 230, 240));
        gradient.set(3, new ColorUIResource(240, 240, 240));
        gradient.set(4, new ColorUIResource(180, 200, 220));
        //UIManager.put("Button.background", Color.pink);
    }
    SwingUtilities.invokeLater(new Runnable() {

        @Override
        public void run() {
            new TestButton().makeUI();
        }
    });
}

public void makeUI() {
    JButton button = new JButton("Click");
    JFrame frame = new JFrame();
    frame.setLayout(new BorderLayout());

    JTabbedPane tab = new JTabbedPane();
    tab.add("Help", createPane(1));
    tab.add("Help", createPane(2));
    tab.add("Help", createPane(3));
    tab.add("Help", createPane(4));
    tab.add("Help", createPane(5));

    frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
    frame.add(tab);
    frame.pack();
    frame.setLocationRelativeTo(null);
    frame.setVisible(true);
}

protected JPanel createPane(int index) {

    JPanel panel = new JPanel(new GridBagLayout());
    panel.add(new JButton("Hello " + index));

    return panel;

}

} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-17T09:59:02.587

*   您可以更改 中的 vlaues，`UIManager`以防每个`JButtons`人都有相同的颜色主题

*   那么API中实现的其他方法就没有问题了

*   您可以覆盖`BasicButtonUI`，例如[MetalButtonUI](https://stackoverflow.com/a/5755124/714968)

代码`UIManager`

```
import java.util.List;
import javax.swing.*;
import javax.swing.plaf.ColorUIResource;

public class GradieltButton {

    public static void main(String[] args) {
        Object grad = UIManager.get("Button.gradient");
        List gradient;
        if (grad instanceof List) {
            gradient = (List) grad;
            System.out.println(gradient.get(0));
            System.out.println(gradient.get(1));
            System.out.println(gradient.get(2));
            System.out.println(gradient.get(3));
            System.out.println(gradient.get(4));
            //gradient.set(2, new ColorUIResource(221, 232, 243));//origal Color
            //gradient.set(2, new ColorUIResource(255, 255, 255));//origal Color
            //gradient.set(2, new ColorUIResource(184, 207, 229));//origal Color
            gradient.set(2, new ColorUIResource(190, 230, 240));
            gradient.set(3, new ColorUIResource(240, 240, 240));
            gradient.set(4, new ColorUIResource(180, 200, 220));
            //UIManager.put("Button.background", Color.pink);
        }
        SwingUtilities.invokeLater(new Runnable() {

            @Override
            public void run() {
                new GradieltButton().makeUI();
            }
        });
    }

    public void makeUI() {
        JButton button = new JButton("Click");
        JFrame frame = new JFrame();
        frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
        frame.add(button);
        frame.pack();
        frame.setLocationRelativeTo(null);
        frame.setVisible(true);
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-17T09:52:23.027

在逻辑情况下，您不需要覆盖，`setText()`但您可以尝试一下。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-17T09:53:45.117

我看不到您在哪里调用 setText()，如果您在绘制组件后尝试这样做，那么您将需要调用 rePaint() 以使任何图形更改具有可见效果。不，你不需要重写 setText()，这有什么意义呢？

# php - PHP fputcsv() 无法正常工作

> ID：11520006
> 
> 赞同：0
> 
> 时间：2012-07-17T09:49:54.017
> 
> 标签：php, csv, xls, forms, http-post

我想将 HTML 表单的输出放入具有标题名称的 csv 文件中：“NAME”、“EMAIL”、“WEB”。但是下面的 PHP 代码不起作用。任何机构都可以帮忙吗？

```
<?php
$fp = fopen("my_file.xls", "a");

$name = $_POST['name'];
$email = $_POST['email'];
$web   = $_POST['web'];

if (!$fp) {
    print("Could not open to file");
    exit;
}

fput($fp, "NAME", "EMAIL",'WEB");
fputcsv($fp, $name, $email, $web);

print("Thanks you ");

fclose($fp);
?> 
```

我试过`my_file.xls`用`my-file.csv`. 提交 HTML 表单后，输出为空白 CSV 文件。

预期：逗号分隔的值`form`与标头。

请帮我定位问题。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-17T09:53:57.363

尝试这个 ：

```
$fp = fopen("my_file.xls", "a");

$name = $_POST['name'];
$email = $_POST['email'];
$web   = $_POST['web'];

if (!$fp) {
    print("Could not open to file");
    exit;
}
fputs($fp, "NAME,EMAIL,WEB");        
fputcsv($fp,array($name, $email, $web));

print("Thanks you ");

fclose($fp); 
```

[`fputcsv`](http://php.net/manual/en/function.fputcsv.php)期望一个值数组作为第二个参数，`fput`应该是[`fputs`](http://www.php.net/manual/en/function.fputs.php)并且期望一个字符串作为第二个参数

# jquery - 保留来自可观察对象的原始数据

> ID：11520008
> 
> 赞同：1
> 
> 时间：2012-07-17T09:49:57.257
> 
> 标签：jquery, knockout.js

这很难用任何示例来解释，因为我正在为一家公司开发应用程序并且无法粘贴源代码。我会尽量简单地解释。

除其他外，该应用程序正在使用带有 require.js 的 knockout.js 用于模块加载，以及 jquery。我已经定义了一个自定义的 bindingHandler，我们称之为 rows，它定义了许多 Jquery 函数，这些函数基于列表中名称的编辑、删除、更新、取消行为归因于链接。

1.  用户在绑定到淘汰 AppViewModel 的输入中键入他们的姓名。他们单击添加按钮将其添加到 observableArray，然后在浏览器中输出。

2.  完成此操作后，他们可以通过单击编辑来编辑名称，或使用删除链接将其删除。

3.  如果他们点击编辑，他们会看到一个新的 div（以前是隐藏的），让他们能够在文本框中编辑他们的名字并选择更新，将新名字添加到列表中，或者他们可以取消，这会将他们带回非可编辑列表。

但是，我的问题是，如果用户更改了他们的名称，在编辑过程中的输入框中，然后选择取消，仍然会添加新名称而不是原来的名称。

我确信问题只是在这个 jQuery 函数中：

```
 $(element).find('.cancelBtn').on('click', function() {      
              $(element).find('.editRow, .detailRow').toggle();
          }); 
```

但是我不相信，切换或隐藏功能是否提交输入框中的值？

输入标签本身绑定到一个名称：

对应于 appViewModel: ... self.name = ko.observable('');

只是想知道可观察绑定是否是两种方式，是否阻止任何返回名称的原始状态，并且只是继续观察输入框中的更新名称，在单击任何链接之前对其进行更改？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-17T15:06:11.640

如果您`input`使用绑定将可观察对象绑定到可观察对象`value`，则默认情况下，它将在更改事件触发时更新可观察对象。您可以使用“valueUpdate”附加绑定来添加附加事件以触发更新（如 keyup），但始终添加更改事件。因此，如果用户对您的输入进行编辑然后离开该字段，它将更新可观察对象。

如果您希望能够更新/取消对 observable 的写入，那么您可能希望查看我在这篇文章中描述的技术：[http ://www.knockmeout.net/2011/03/guard-你的模型接受或取消edits.html](http://www.knockmeout.net/2011/03/guard-your-model-accept-or-cancel-edits.html)

# java - Logback 成熟到可以替代 log4j 了吗？

> ID：11520010
> 
> 赞同：6
> 
> 时间：2012-07-17T09:50:16.367
> 
> 标签：java, log4j, slf4j, logback

我已经阅读了关于 SO like [this](https://stackoverflow.com/questions/178215/log4j-vs-logback)和[this](https://stackoverflow.com/questions/178836/should-new-projects-use-logback-instead-of-log4j)的类似问题。但是他们大约四岁！

我还阅读[了这个](http://logback.qos.ch/reasonsToSwitch.html)logback 页面，其中有一些关于为什么选择 Logback 而不是 log4j 的非常好的信息。

我希望为具有以下技术堆栈的项目实现日志记录框架-

*   春天
*   休眠
*   马文
*   雄猫
*   休息

我已经决定使用 slf4j 作为门面，所以这个问题是关于是使用 slf4j + log4j 还是 slf4j + logback（我知道 logback 原生使用 slf4j）。

我正在寻找的是以下 -

*   有没有人有过使用 Logback 的经验证明它不如 log4j 成熟或高效？
*   与多线程环境中的 log4j 相比，它如何公平？
*   能够用 logback/log4j 日志记录替换 tomcat-default jul 日志记录
*   能够将日志记录配置整合到 Maven 多模块项目的通用文件中
*   Logback 声称它比 log4j 快 10 倍，有人验证过这个说法吗？（作为我研究的一部分，我确实计划进行一些测试来衡量性能并将回传我的结果）

**编辑**：我在很多地方都读过（下面的答案之一也说明了这一点）log4j 已死/已弃用。与此相反，log4j 刚刚发布了其 2.0 版本的[alpha 版本](http://logging.apache.org/log4j/2.0/index.html)。所以我不认同这种说法。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-07-17T10:00:36.970

LogBack 是 Log4J 的成功之作，它来自于制作 Log4J 的作者。Log4J 目前已弃用。

这是 SLF4J / LogBack 质数的示例：

Log4J（当前）

```
Object entry = new SomeObject();
logger.debug("The new entry is "+entry+"."); 
```

以下是执行的任务：

1.  Java 调用变量条目上的 toString 方法来获取字符串文字表示。Java 初始化堆中的空间以保存 String 对象。
2.  Java 根据上面的 String 创建了一个新的 String，带有“The new entry is”和“.”。Java 初始化空间以保存更新的字符串字面量。
3.  Java 将新构造的 String 对象作为输入参数传递给 Log4J。Log4J 检查当前的日志记录级别是否为 DEBUG 及以上。（假设它在 logging.xml 描述符中设置为 INFO）
4.  Log4J 不会将字符串文字打印到日志中，因为日志记录级别设置为 INFO。（因此 1 – 2 的所有工作都被浪费了）

SLF4J / LogBack（新）

```
Object entry = new SomeObject();
logger.debug("The new entry is {}.", entry); 
```

以下是执行的任务：

1.  Java 传递字符串对象“新条目是 {}”。和对象条目作为 SLF4J 的输入参数。SLF4J 检查当前日志级别是否为 DEBUG 及以上。（假设它在 logging.xml 描述符中设置为 INFO）
2.  Log4J 不会将字符串文字打印到日志中，因为日志记录级别设置为 INFO。

[http://www.slf4j.org/faq.html#logging_performance](http://www.slf4j.org/faq.html#logging_performance)

能够用 logback/log4j loggin 替换 tomcat-default jul 日志吗？

> 是的，与 SLF4J 一起使用。

# python - python ctypes如何映射int**

> ID：11520012
> 
> 赞同：0
> 
> 时间：2012-07-17T09:50:21.920
> 
> 标签：python, ctypes

有c结构定义

```
struct Matrix {
    int width;
    int height;
    int** data;
}; 
```

如何使用python的ctypes.Struct来定义它？

```
class Matrix( ctypes.Structure ):
    _fields_ = [
        ( "width", ctypes.c_int ),
        ( "height", ctypes.c_int ),
        ( "data", ??? ),
    ] 
```

我不知道如何定义“数据”的类型。这里有人帮忙吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-17T10:00:13.630

最直接的翻译`int**`是：

```
ctypes.POINTER(ctypes.POINTER(ctypes.c_int)) 
```

也就是说，它是一个指向 int 的指针。

一种可能更惯用的方式是二维数组：

```
ctypes.c_int * width * height 
```

*，但要做到这一点，您需要知道数组中*有多少元素- 大小是 ctypes 中类型的一部分。如果您似乎事先不知道该大小（并且它可以更改每个结构实例），那么指向指针的指针是最佳选择。

实例化它需要更少的间接性 - 当您想要创建数组时，根据定义，您*将*知道它需要多大。所以，你可以这样做：

```
m.data = (ctypes.c_int * width * height)() 
```

这将为您提供一个`height`-length 数组的`width`-length 数组`c_int`。也就是说，它（大体上）与 C++ 代码做同样的事情：

```
m.data = new int[width][height]; 
```

或者，如果您愿意：

```
m.data = (int**) malloc(sizeof(int) * width * height) 
```

# cookies - 将列宽存储在 cookie 中

> ID：11520018
> 
> 赞同：0
> 
> 时间：2012-07-17T09:50:47.887
> 
> 标签：cookies, extjs, grid

我正在使用 extjs 网格并希望为用户存储列的顺序和宽度。我已经添加了：

```
var dateExpires = new Date().getTime()+(1000*60*60*24*300);
Ext.state.Manager.setProvider(new Ext.state.CookieProvider({
expires: new Date(dateExpires) //300 days from now
})); 
```

现在是存储的列的顺序，但仍然缺少列的大小。我不使用 forcefit，因为我看到这可能是一个问题。

这就是列的样子

```
{
 xtype: 'gridpanel',
 id: 'GridPanel',
 titleCollapse: false,
 store: 'gridStore',
 stateId: 'gridPanelState',
 region: 'center',
 viewConfig: {},
 columns: [
                    {
                        xtype: 'gridcolumn',
                        dataIndex: 'vehicle',
                        text: 'Vehicle'
                    },

                    {
                        xtype: 'gridcolumn',
                        dataIndex: 'speed',
                        text: 'Speed'
                    },
                    {
                        xtype: 'gridcolumn',
                        dataIndex: 'routeId',
                        text: 'RouteId'
                    },
                    {
                        xtype: 'gridcolumn',
                        dataIndex: 'direction',
                        text: 'Direction'
                    },
                    {
                        xtype: 'gridcolumn',
                        dataIndex: 'description',
                        text: 'Description'
                    }
                ], 
```

# java - 如何将javascript数组传递给java applet方法？

> ID：11520022
> 
> 赞同：1
> 
> 时间：2012-07-17T09:51:08.487
> 
> 标签：java, javascript, applet, illegalargumentexception

我有包含方法的小程序：

```
public void send(byte[] arr) {
   ... //some code
} 
```

但是当我从 JS 调用这个方法时，我得到了错误：

*java.lang.IllegalArgumentException：找不到匹配名称发送和参数的方法 [sun.plugin2.main.client.MessagePassingJSObject]*

如果我将*send*方法参数设置为 String，然后将字符串参数从 JS 传递给小程序，那就没问题了。没有警告。

**如何正确地将数组从 JS 传递给 java 方法？**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-17T13:53:05.983

[http://docs.oracle.com/javase/tutorial/deployment/applet/invokingAppletMethodsFromJavaScript.html](http://docs.oracle.com/javase/tutorial/deployment/applet/invokingAppletMethodsFromJavaScript.html) 包含一些示例。

Javascript 没有字节类型，至少在浏览器中没有。尝试将参数作为 int[] 或 String[] 传递，然后在您的小程序中将其转换/转换为字节数组。

# asp.net - 这个 ScriptResource.axd 和 WebResource.axd 文件是什么，为什么它在我的页面中加载了 10 次

> ID：11520025
> 
> 赞同：0
> 
> 时间：2012-07-17T09:51:23.590
> 
> 标签：asp.net, asp.net-ajax

我对这两个文件很困惑。当我去 chrome`=>`开发者工具`=>` 资源时

我看到这 2 个文件加载了 8-9 次，特别是 ScriptResource.axd 文件 6 次。

当我打开这些文件时，它们里面有 javascript，每个文件都有一个差异代码。

我从这个 SO [Post](https://stackoverflow.com/questions/5879824/what-is-axd-file)了解到，每当您在应用程序中使用 Ajax 时，这些都是 ScriptManager 文件。它还说它是在您部署时生成的。但是我在本地和服务器上总共看到了 9 次。每个文件加载大约需要 32 毫秒，这就是我在开发人员工具中看到的。

请帮我解决这个问题，让我知道如何解决这些文件只加载一次。

感谢您的时间。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-27T16:08:50.683

这是不同的脚本。如果您使用 AJAX 控件工具包或其他 ASP.NET AJAX 框架，其中有嵌入到 DLL 中的脚本文件，则所有这些脚本都单独加载并由 ScriptResource 或 WebResource 表示。它们不会全部自动组合成一个参考。

打开 IE 的调试器工具、带有 FireBug 的 FireFox 或 Chrome 开发工具并查看每个脚本。有 2 个用于 ASP.NET AJAX 的脚本，1 个用于验证器控件等。

# environment-variables - 在 NSIS 中设置 env var，在从安装程序启动的程序中不可见

> ID：11520033
> 
> 赞同：1
> 
> 时间：2012-07-17T09:51:50.967
> 
> 标签：environment-variables, nsis

我正在从 NSIS 安装程序中设置永久环境变量，如[NSIS wiki](http://nsis.sourceforge.net/Setting_Environment_Variables)中所述。这按预期工作，安装后该变量可用于*新进程*。

但是，当使用选项在安装结束时启动已安装程序时，环境变量**对于从安装程序启动的程序不可用**。我认为这是因为从那里启动的程序将安装程序进程作为父进程并获得相同的环境块（请参阅[createProcess](http://msdn.microsoft.com/en-us/library/windows/desktop/ms682425%28v=vs.85%29.aspx)函数的 lpEnvironment 参数）。

如何让从安装程序最后一页启动的程序看到新设置的环境变量？而是编写自定义启动功能？该文档没有说明该`Exec`函数的环境块。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-17T14:18:02.883

如果您希望子进程继承（更新的）环境，您还需要使用临时设置环境变量代码，因为只有 explorer.exe 响应 WM_WININICHANGE 通知。

```
outfile "test.exe"
name "run env test"
requestexecutionlevel user
!define MUI_FINISHPAGE_RUN "cmd.exe"
!define MUI_FINISHPAGE_RUN_PARAMETERS  "/k set foobar"
!include MUI2.nsh
!insertmacro MUI_PAGE_INSTFILES
!insertmacro MUI_PAGE_FINISH
!insertmacro MUI_LANGUAGE "English"

Section
System::Call 'Kernel32::SetEnvironmentVariable(t "FooBar",t "BazBlargh")i'
SectionEnd 
```

# .net - SymbolSource 获取源代码

> ID：11520035
> 
> 赞同：0
> 
> 时间：2012-07-17T09:52:08.603
> 
> 标签：.net, nuget, symbols

有什么方法可以从 SymbolSource 获取包源代码。我只想下载源代码 zip（如在 GitHub 上）或至少浏览源代码，但我不知道该怎么做。

我已经集成了 SymbolSource+NuGet+VisualStudio，我可以通过单击“转到定义”来查看一些类源代码，但现在我想服务整个项目。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-17T10:15:51.927

这不是符号服务器的工作方式，但存在一种解决方案来获得[本文](http://www.wintellect.com/cs/blogs/jrobbins/archive/2010/06/06/getting-pdbs-and-source-when-you-can-t-access-your-symbol-server.aspx)中所解释的内容。

它归结为：

您需要首先在您想要符号的所有目录上运行 SYMCHK.EXE（ [windows 调试工具的一部分）。](http://msdn.microsoft.com/en-us/windows/hardware/gg463009.aspx)

然后使用带有-x 开关的SRCTOOL.EXE 和您想要的PDB 文件，SRCTOOL.EXE 将执行嵌入在PDB 文件中的所有版本控制命令并为您获取源代码。

# android - Android zxing - 人像相机预览/surfaceview 被拉伸/扭曲

> ID：11520038
> 
> 赞同：18
> 
> 时间：2012-07-17T09:52:16.113
> 
> 标签：android, surfaceview, zxing, portrait, stretching

我已设法使用此处的答案将相机预览旋转为纵向： [http ://code.google.com/p/zxing/issues/detail?id=178#c46](http://code.google.com/p/zxing/issues/detail?id=178#c46)

但是预览本身被拉伸/扭曲 - 高度似乎正在拉伸以填充框（但可能是宽度对于屏幕来说太大并且它被挤压以适应）

有什么方法可以“包装”内容而不是使其拉伸以适应表面视图？

编辑：我通过更改“CameraConfigurationManager”中的“findBestPreviewSizeValue”方法并反转 X 和 Y 点（感谢 sean owen 提供下面的指针！）对其进行排序，这是代码：

```
private static Point findBestPreviewSizeValue(CharSequence previewSizeValueString,
  Point screenResolution) {
int bestX = 0;
int bestY = 0;
int diff = Integer.MAX_VALUE;
for (String previewSize : COMMA_PATTERN.split(previewSizeValueString)) {

  previewSize = previewSize.trim();
  int dimPosition = previewSize.indexOf('x');
  if (dimPosition < 0) {
    Log.w(TAG, "Bad preview-size: " + previewSize);
    continue;
  }

  int newX;
  int newY;
  try {
    newY = Integer.parseInt(previewSize.substring(0, dimPosition));
    newX = Integer.parseInt(previewSize.substring(dimPosition + 1));
    //original:
    //newX = Integer.parseInt(previewSize.substring(0, dimPosition));
    //newY = Integer.parseInt(previewSize.substring(dimPosition + 1));
  } catch (NumberFormatException nfe) {
    Log.w(TAG, "Bad preview-size: " + previewSize);
    continue;
  }

  int newDiff = Math.abs(newX - screenResolution.x) + Math.abs(newY - screenResolution.y);
  if (newDiff == 0) {
    bestX = newY;
    bestY = newX;
    //original:
    //bestX = newX;
    //bestY = newY;
    break;
  } else if (newDiff < diff) {
    bestX = newY;
    bestY = newX;
    //original:
    //bestX = newX;
    //bestY = newY;
    diff = newDiff;
  }

}

if (bestX > 0 && bestY > 0) {
  return new Point(bestX, bestY);
}
return null;
} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-17T10:34:12.307

除了将预览设置为纵向模式外，您还需要做更多的工作才能使其正常工作。例如，您需要选择合适的预览尺寸，因为它是纵向的，而不是横向的。

包装肯定是不可取的？不，你不能让它包装；它总是将整个预览图像扔到 上`SurfaceView`，如果需要，可以拉伸。我想你可以重新实现很多代码来做一些不同的事情，但这会很困难。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-05-29T15:56:21.883

我有同样的问题，但我可以通过反转 findBestPreviewSizeValue 内的 CameraConfigurationManager.java 文件的纵横比来解决这个问题

```
 float screenAspectRatio = (float) screenResolution.x / (float) screenResolution.y; 
```

对此

```
 float screenAspectRatio = (float) screenResolution.y / (float) screenResolution.x; 
```

我在这里找到了解决方案。

[http://bighow.net/4660010-Android_zxing___portrait_camera_preview_surfaceview_is_stretched_warped.html](http://bighow.net/4660010-Android_zxing___portrait_camera_preview_surfaceview_is_stretched_warped.html)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2016-05-18T10:52:55.783

您可以通过此函数获取 Priview 大小：

*私有列表 mSupportedPreviewSizes = parameters.getSupportedPreviewSizes();*

```
if (mSupportedPreviewSizes != null) {
                mPreviewSize = getOptimalPreviewSize(mSupportedPreviewSizes, width, height);
            }

private Camera.Size getOptimalPreviewSize(List<Camera.Size> sizes, int w, int h) {
            final double ASPECT_TOLERANCE = 0.1;
            double targetRatio = (double) h / w;

            if (sizes == null)
                return null;

            Camera.Size optimalSize = null;
            double minDiff = Double.MAX_VALUE;

            int targetHeight = h;

            for (Camera.Size size : sizes) {
                double ratio = (double) size.height / size.width;
                if (Math.abs(ratio - targetRatio) > ASPECT_TOLERANCE)
                    continue;

                if (Math.abs(size.height - targetHeight) < minDiff) {
                    optimalSize = size;
                    minDiff = Math.abs(size.height - targetHeight);
                }
            }

            if (optimalSize == null) {
                minDiff = Double.MAX_VALUE;
                for (Camera.Size size : sizes) {
                    if (Math.abs(size.height - targetHeight) < minDiff) {
                        optimalSize = size;
                        minDiff = Math.abs(size.height - targetHeight);
                    }
                }
            }

            return optimalSize;
        }

            float ratio;
            if (mPreviewSize.height >= mPreviewSize.width)
                ratio = (float) mPreviewSize.height / (float) mPreviewSize.width;
            else
                ratio = (float) mPreviewSize.width / (float) mPreviewSize.height;

            after getting ratio set your size in 

            protected void onMeasure(int widthMeasureSpec, int                              heightMeasureSpec) {

            setMeasuredDimension((int) (width * ratio), height);
            } 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-11-03T12:46:48.730

我设法通过更改以下代码来使其工作`CameraConfigurationManager.java`：

`float screenAspectRatio = (float) screenResolution.x / (float) screenResolution.y;`

到：

```
float screenAspectRatio = (float) screenResolution.y / (float) screenResolution.x; 
```

和

```
float aspectRatio = (float) maybeFlippedWidth / (float) maybeFlippedHeight; 
```

到：

```
float aspectRatio = (float) maybeFlippedHeight / (float) maybeFlippedWidth; 
```

我在这篇文章旁边做了这个：[Android 上的人像模式下的 Zxing 相机](https://stackoverflow.com/questions/16252791/zxing-camera-in-portrait-mode-on-android)

希望这对其他人有帮助。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2017-03-10T10:23:10.667

变形的原因可能是相机的预览纵横比与显示器的纵横比不匹配。

大多数手机屏幕的长宽比是4:3，如2560x1440、1920x1080等。当您使用 parameter.setPreviewSize(width,height) 设置相机预览尺寸时，如果 height : width 的值不等于您手机屏幕的纵横比，相机的图片将变形以填满整个屏幕。

# spring - 找不到元素 'beans:beans 的声明

> ID：11520041
> 
> 赞同：2
> 
> 时间：2012-07-17T09:52:17.843
> 
> 标签：spring, spring-security

我尝试在春季进行基于角色的访问，但出现以下错误：-

```
Caused by: org.xml.sax.SAXParseException: cvc-complex-type.2.4.c: The matching wildcard is strict, but no declaration can be found for element 'http'.
at com.sun.org.apache.xerces.internal.util.ErrorHandlerWrapper.createSAXParseException(ErrorHandlerWrapper.java:195)
at com.sun.org.apache.xerces.internal.util.ErrorHandlerWrapper.error(ErrorHandlerWrapper.java:131)
at com.sun.org.apache.xerces.internal.impl.XMLErrorReporter.reportError(XMLErrorReporter.java:384)
at com.sun.org.apache.xerces.internal.impl.XMLErrorReporter.reportError(XMLErrorReporter.java:318)
at com.sun.org.apache.xerces.internal.impl.xs.XMLSchemaValidator$XSIErrorReporter.reportError(XMLSchemaValidator.java:410)
at com.sun.org.apache.xerces.internal.impl.xs.XMLSchemaValidator.reportSchemaError(XMLSchemaValidator.java:3165)
at com.sun.org.apache.xerces.internal.impl.xs.XMLSchemaValidator.handleStartElement(XMLSchemaValidator.java:1898)
at com.sun.org.apache.xerces.internal.impl.xs.XMLSchemaValidator.startElement(XMLSchemaValidator.java:685)
at com.sun.org.apache.xerces.internal.impl.XMLNSDocumentScannerImpl.scanStartElement(XMLNSDocumentScannerImpl.java:400)
at com.sun.org.apache.xerces.internal.impl.XMLDocumentFragmentScannerImpl$FragmentContentDriver.next(XMLDocumentFragmentScannerImpl.java:2740)
at com.sun.org.apache.xerces.internal.impl.XMLDocumentScannerImpl.next(XMLDocumentScannerImpl.java:647)
at com.sun.org.apache.xerces.internal.impl.XMLNSDocumentScannerImpl.next(XMLNSDocumentScannerImpl.java:140)
at com.sun.org.apache.xerces.internal.impl.XMLDocumentFragmentScannerImpl.scanDocument(XMLDocumentFragmentScannerImpl.java:508)
at com.sun.org.apache.xerces.internal.parsers.XML11Configuration.parse(XML11Configuration.java:807)
at com.sun.org.apache.xerces.internal.parsers.XML11Configuration.parse(XML11Configuration.java:737)
at com.sun.org.apache.xerces.internal.parsers.XMLParser.parse(XMLParser.java:107) 
```

这是我的spring-security.xml：

```
<beans:beans xmlns="http://www.springframework.org/schema/security"
xmlns:beans="http://www.springframework.org/schema/beans" 
xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
xsi:schemaLocation="http://www.springframework.org/schema/beans
http://www.springframework.org/schema/beans/spring-beans-3.1.xsd
http://www.springframework.org/schema/security
http://www.springframework.org/schema/security/spring-security-3.1.xsd">

<http auto-config="true">
    <intercept-url pattern="/welcome*" access="ROLE_USER" />
    <form-login login-page="/login" default-target-url="/welcome"
        authentication-failure-url="/loginfailed" />
    <logout logout-success-url="/logout" />
</http>

<authentication-manager>
    <authentication-provider>
        <user-service>
            <user name="a" password="1" authorities="ROLE_USER" />
        </user-service>
    </authentication-provider>
</authentication-manager>

</beans:beans> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-04T06:30:54.287

似乎，Spring Security 所需的库文件不在正确的位置。您是否使用**Maven**并在您的文件中具有 Spring Security 库文件的 Maven 依赖项`pom.xml`？

如果是，那么做一个`maven clean-up`并再试一次。否则，您可以直接将 Spring 安全库文件放在类路径中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-02T14:49:18.243

请检查应用程序在类路径中是否有必要的 spring 安全库文件（如果您使用的是 Maven，请检查 pom.xml 文件）。此外，检查其他与 Spring 相关的 xml 文件是否存在语法错误（或者也请发布它们）。

# mercurial - 如何在处理其他事情时将一堆未提交的更改放在一边

> ID：11520047
> 
> 赞同：102
> 
> 时间：2012-07-17T09:52:24.530
> 
> 标签：mercurial

如果我有一堆未提交的更改并想在处理其他事情时将其搁置一边，然后稍后（几天后）再回来继续工作。完成此任务的最简单工作流程是什么？（到目前为止，我只体验过 Mercurial 的基本功能）。我通常的方法是使用克隆创建一个新分支，但可能有更好的方法。

* * *

## 回答 #1

> 赞同：138
> 
> 时间：2012-07-17T09:57:05.457

你有几个选择：

1.  [搁置](https://www.mercurial-scm.org/wiki/ShelveExtension)物品。这会保存更改并将它们从工作目录中删除，以便分支可以继续。它不会创建变更集。

    ```
    hg shelve --all --name "UnfinishedChanges"

    hg unshelve --name "UnfinishedChanges" 
    ```

    **更新/编辑**：可能需要使用较新版本的 mercurial

    ```
    hg shelve -n "UnfinishedChanges"
    hg unshelve "UnfinishedChanges" 
    ```

    您仍然可以`--name`用作 的替代品`-n`，但 mercurial 似乎不再喜欢`--name`了。此外，`--all`不再需要它，而 mercurial 实际上会吓坏它。

2.  使用 对项目进行[修补排队](https://www.mercurial-scm.org/wiki/MqExtension/)`mq`。这在某些方面与搁置并没有太大的不同，但表现不同。最终结果是相同的，更改被删除，并且可以选择在以后重新应用。推送时，补丁是逻辑变更集，弹出时它们保存在其他地方并且不是变更集历史记录的一部分。

    ```
    hg qnew "UnfinishedWork"
    hg qrefresh
    hg qpop

    hg qpush "UnfinishedWork" 
    ```

3.  在本地提交它们，更新到以前的变更集并继续工作并使用匿名分支（或多个头）。如果您想要更改，您可以合并磁头。如果您不想要更改，可以[剥离](https://www.mercurial-scm.org/wiki/StripExtension)更改集。

    ```
    hg commit -m"Commiting unfinished work in-line."
    hg update -r<previous revision>

    hg strip -r<revision of temporary commit> 
    ```

4.  将它们提交到指定的分支。然后，工作流程与选项 3 相同 - 准备好后合并或剥离。

    ```
    hg branch "NewBranch"
    hg commit -m"Commiting unfinished work to temporary named branch."
    hg update <previous branch name> 
    ```

我个人使用选项 3 或 4，因为我不介意剥离变更集或签入部分代码（只要最终不会被推送）。如果需要，这可以与新的[Phase](https://www.mercurial-scm.org/wiki/Phases)内容结合使用，以向其他用户隐藏您的本地变更集。

我还使用该`rebase`命令来移动变更集，以避免合并不会向代码历史添加任何内容。合并我倾向于保存重要分支（例如发布分支）之间的活动，或来自寿命较长的功能分支的活动。还有一个`histedit`我用来压缩变更集的命令，其中它们的“闲聊”会降低价值。

补丁队列也是执行此操作的常用机制，但它们具有堆栈语义。您推送和弹出补丁，但是堆栈中另一个补丁“下方”的补丁要求也推送它上面的补丁。

**警告**，与所有这些选项一样，如果文件在您搁置/排队/分支的临时更改之后有更多更改，则在取消搁置/推送/合并时将需要合并解决方案。

* * *

## 回答 #2

> 赞同：23
> 
> 时间：2012-07-25T18:09:35.293

就个人而言，我不喜欢到目前为止发布的任何答案：

1.  我不喜欢克隆分支，因为我喜欢每个项目只有*一个*目录。同时处理不同的目录完全弄乱了我的编辑最近文件的历史。我总是最终更改错误的文件。所以我不再那样做了。
2.  我`shelve`用于快速修复（如果我意识到我在错误的分支上，只是将我未提交的更改移动到另一个分支）。你说的是几天，我不会搁置几天的东西。
3.  我认为`mq`对于这样一个普通的情况来说太复杂了

我认为最好的方法是简单地提交更改，而不是在开始这些更改并从那里开始工作之前返回更改集。有一些小问题，我来说明一下：

假设您有变更集 A。然后开始您的更改。在这一点上，你想把它放在一边。首先，提交你的工作：

```
hg ci -m "Working on new stuff" 
```

如果需要，您可以添加书签，以便以后更轻松地返回。我总是为我的匿名分支创建书签。

```
hg bookmark new-stuff 
```

回到这些修改之前的变更集

```
hg update A 
```

从这里开始，您开始工作并生成变更集 C。现在您有 2 个头（B 和 C），当您尝试推送时会收到警告。您可以通过指定该分支的头来仅推送一个分支：

```
hg push -r C 
```

或者您可以将`new-stuff`分支的阶段更改为秘密。不会推送秘密变更集。

```
hg phase -r new-stuff --secret --force 
```

* * *

## 回答 #3

> 赞同：13
> 
> 时间：2014-06-20T16:04:07.273

为了保持本地未提交的更改，对我来说最简单的方法就是将它们保存为补丁文件。

```
hg diff > /tmp/`hg id -i`.patch 
```

当您需要返回之前的状态时：

```
hg up <REV_WHERE_SAVED>
hg patch --no-commit /tmp/<REV_WHERE_SAVED>.patch 
```

* * *

## 回答 #4

> 赞同：6
> 
> 时间：2012-07-17T10:24:48.317

您可以多次克隆您的存储库。我倾向于有一个根克隆，然后从那里有多个孩子。例子：

*   我的项目根
*   MyProject.BugFix1
*   我的项目.BugFix2
*   MyProject.FeatureChange1
*   MyProject.FeatureChange2

4 个孩子都是从根目录克隆的，并从根目录推/拉。然后根从网络/互联网某处的主存储库推/拉。根充当您的个人登台区域。

因此，在您的情况下，您只需克隆一个新的存储库并开始工作。将“搁置”的工作单独留在另一个仓库中。就是这么简单。

唯一的缺点是磁盘空间的使用，但如果这是一个问题，那么你根本就不会使用 DVCS ;) 哦，它确实会污染你的 Visual Studio“最近的项目”列表，但是嘿嘿。

[编辑以下评论]：-

总结一下……你正在做的事情是完全正常和正常的。我认为当以下情况属实时，这是最好的工作方式：1）它是短暂的 2）您不需要与其他开发人员合作 3）更改不需要离开您的 PC 直到提交/推时间。

# mysql - 最多返回数据库表中每个“post_type”的 5 个

> ID：11520048
> 
> 赞同：0
> 
> 时间：2012-07-17T09:52:36.030
> 
> 标签：mysql

我有一个查询，它返回一个数据库表中与给定条件匹配的所有帖子，但我正在寻找一种方法，可以从每个`'post_type'`. 目前，查询正在选择每个匹配的帖子，我不得不限制`'post_type'`PHP 中每个帖子的数量，这不是特别有效。

这可以做到吗？谢谢。

```
SELECT ID, post_title, post_type
FROM wp_posts
WHERE 1=1
AND post_status = "publish"
AND (
    post_type IN (
        "staff"
    )
    AND post_name LIKE "%The%"
)
OR (
    post_type NOT IN (
        "staff",
        "Attachment"
    )
    AND (
        post_name LIKE "%The%"
        OR post_title LIKE "%The%"
    )
)
ORDER BY post_type, post_name ASC 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-17T10:13:17.250

此解决方案将选择五个最近（基于`id`）的帖子`post_type`：

```
SELECT     a.id, a.post_title, a.post_type
FROM       wp_posts a
INNER JOIN wp_posts b ON a.post_type = b.post_type AND a.id <= b.id
WHERE      a.post_status = 'publish' AND
           (a.post_type = 'staff' AND a.post_name LIKE '%The%') OR
           (a.post_type NOT IN ('staff', 'Attachment') AND (a.post_name LIKE '%The%' OR a.post_title LIKE '%The%'))
GROUP BY   a.id, a.post_title, a.post_type
ORDER BY   a.post_type, a.post_name
HAVING     COUNT(1) <= 5 
```

# linkedin - 在 Linkedin 上“附加”链接时会显示哪个图像？

> ID：11520055
> 
> 赞同：22
> 
> 时间：2012-07-17T09:53:01.013
> 
> 标签：linkedin

当我尝试通过“附加链接”在linkedin 上分享“讨论”（这只是我们网站上的一个链接）时，它以前会拉出漂亮的图像，但现在它不再这样做了。

是否有元属性 =“og：我们应该专门用于linkedin 共享以显示图像？

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2012-07-18T16:51:04.087

LinkedIn 共享功能支持一小部分开放图形标签，如下所述： [https ://developer.linkedin.com/documents/setting-display-tags-shares](https://developer.linkedin.com/documents/setting-display-tags-shares)

请注意，至少直到最近（并且可能仍然）重新抓取现有共享页面已被破坏，因此如果您已经共享了一个页面并且它得到了错误的图像，除非您与其他 URL 共享它，否则您将被卡住。

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2018-02-01T20:33:59.117

将这些元数据添加到您的网页头部标签中。

```
<meta property='og:title' content='title'/>
<meta property='og:image' content='image/path'/>
<meta property='og:description' content='description'/>
<meta property='og:url' content='your url'/> 
```

在 Linkedin 上发帖时，有一个linkedin 缓存，因此如果您要再次重新发布相同的 url，可能不会拾取元数据。要解决此问题，您可以在链接到发布时在 url 的末尾添加一个参数

例如原始网址 www.example.com 然后您可以使用 www.example.com?1 重新发布

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2016-02-18T17:45:13.270

LinkedIn 帖子也可以使用 jssdk 从头开始​​设计。我创建了一个工具，允许我在共享链接时选择显示的图像以及设置的标题。

如果你想开发自己的，请 fork 我的 repo：

[https://github.com/kaburkett/LinkedIn-Advanced-Share](https://github.com/kaburkett/LinkedIn-Advanced-Share)

# iphone - iPhone应用程序随机崩溃，信号9

> ID：11520056
> 
> 赞同：2
> 
> 时间：2012-07-17T09:53:01.317
> 
> 标签：iphone, crash

我有一个应用程序在不同的情况下随机崩溃，日志如下

```
Mon Jul 16 22:00:39 unknown com.apple.launchd[1] <Notice>: (UIKitApplication:com.apple.mobilemail[0x55fb]) Exited: Killed
Mon Jul 16 22:00:39 unknown com.apple.launchd[1] <Notice>: (UIKitApplication:com.apple.mobilephone[0xa13c]) Exited: Killed
Mon Jul 16 22:00:39 unknown com.apple.launchd[1] <Notice>: (UIKitApplication:com.MyApp.app[0x137]) Exited: Killed
Mon Jul 16 22:00:39 unknown com.apple.launchd[1] <Notice>: (com.apple.accessoryd) Exited: Killed
Mon Jul 16 22:00:41 unknown SpringBoard[29] <Warning>: Application 'Mail' exited abnormally with signal 9: Killed
Mon Jul 16 22:00:41 unknown SpringBoard[29] <Warning>: Memory level is not normal (15%). Delaying auto-relaunch of 'Mail' for 30 seconds.
Mon Jul 16 22:00:41 unknown SpringBoard[29] <Warning>: Application 'app' exited abnormally with signal 9: Killed
Mon Jul 16 22:00:42 unknown SpringBoard[29] <Warning>: Application 'Phone' exited abnormally with signal 9: Killed 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-03T11:19:28.120

Your app crash because of low memory.You can try [this](https://stackoverflow.com/questions/5980636/ios-low-memory-crash-but-very-low-memory-usage) to calculate memory use :)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-17T09:59:53.750

你得到低内存崩溃。使用 Instrument 评估您的内存使用情况。

# jquery - 无法在 jquery post 方法中通过变量引用文本输入值

> ID：11520058
> 
> 赞同：0
> 
> 时间：2012-07-17T09:53:11.233
> 
> 标签：jquery

我想通过 jquery ajax post 方法发送数据。我试图通过变量引用表单的输入。但不成功。这是代码..

```
 <script type="text/javascript">
  function abc(parameter)
{  
 $.post('test1.php',{id:parameter.parameter.value},
      function(output)
      {
         $('div').html(output).show();            

         })
}
</script>
<?php
for ($i=1;$i<=3;$i++)
{   $j=$i+1;
echo "<form name='$i'><div>$i</div><input name='$i' type='hidden' value='$j'/><input type='button'value='Accept' onclick='abc($i)'></form>";
}
?> 
```

当我按下第二个按钮时，我想获得输出 3。我的萤火虫控制台说“未定义的参数。参数”我该怎么办？请告诉我。提前谢谢..这是我的test1.php代码..

```
 if (isset($_POST['id']))
 {     $id=$_POST['id'];
   echo "Got $id";
  } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-17T10:03:24.053

在您的评论中，您说您想发送文本框的值。由于文本框是通过这样的 onclick 呈现的：`onclick='abc($i)'`例如`onclick='abc(2)'`when `$i=2`，您需要在`abc`函数中找到正确的文本框，即名称为 的文本框`2`：

```
function abc(parameter) {
    var textboxValue = $("input[name='" + parameter + "']").val();
    $.post('test1.php',{id: textboxValue}, function(output) {
        $('div').html(output).show();
    });
} 
```

# asp.net - ASP.NET 内存泄漏 - OracleConnection/OracleCommand

> ID：11520059
> 
> 赞同：0
> 
> 时间：2012-07-17T09:53:22.090
> 
> 标签：asp.net, windbg

我遵循了以下教程中的建议：http: [//humblecoder.co.uk/tag/windbg](http://humblecoder.co.uk/tag/windbg)。我不得不说，运行这个命令：！dumpheap。我在第三列中添加了总字节数，然后再除以 1024 和 1024。这相当于 42MB。有问题的 ASP.NET 进程的大小超过 1.5GB。

这是在 Windows 2003 服务器上完成的，如果没有在任务管理器中创建转储文件的选项。因此我必须运行以下命令：.dump /ma w3wpdump.dmp。由于这是一个小型转储，是否缺少可以提供帮助的东西？

我昨天确实问了另一个问题，它概述了问题：[ASP.NET Memory Leak - OracleCommand Object](https://stackoverflow.com/questions/11506807/asp-net-memory-leak-oraclecommand-object)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-18T02:05:31.140

看看你的另一个问题，你的大部分内存使用似乎都被字符串使用了。我会转储其中一些字符串以查看其中的内容。`dd`您可以使用或`db`或查看字符串的内容，`du`并为其提供字符串实例之一的内存地址。即`dd 0x12345678`，它将转储位于那里的内存的原始内容。您可以查看 windbg 帮助以获取有关`d*`命令的更多信息。

但是，如果您确定托管堆似乎没有消耗内存，那么我会查看非托管堆。`!heap -s`将为您提供非托管堆的摘要，这可能是您使用过多内存的地方。

# performance - j2me：“g.clipRect()”对速度有什么影响？

> ID：11520060
> 
> 赞同：2
> 
> 时间：2012-07-17T09:53:27.583
> 
> 标签：performance, java-me, midp, lcdui, clip

我正在开发 j2me 并使用画布绘制一些图像。

现在，我的问题是：下面的示例代码在绘图速度上有什么区别？

裁剪区域矩形后绘制：

```
g.clipRect(x, y, myImage.getWidth(), myImage.getHeight());

g.drawImage(myImage, x , y, Graphics.TOP | Graphics.LEFT);

g.setClip(0, 0, screenWidth, screenHeight); 
```

无夹绘图：

```
g.drawImage(myImage, x, y, Graphics.TOP | Graphics.LEFT); 
```

第一个更快吗？我经常在屏幕上画画。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-17T19:55:47.703

好吧，恐怕你的问题的直接答案是[穆- 因为你似乎从错误的方向来解决这个问题。](http://en.wikipedia.org/wiki/Mu_%28negative%29#Signifying_.22unasking.22_the_question_or_similar "在提供的条款中“不问”问题/没有答案")

问题是，裁剪 API**并非**用于性能考虑/优化。您可以在 API 文档（[在线提供](http://docs.oracle.com/javame/config/cldc/ref-impl/midp2.0/jsr118/javax/microedition/lcdui/Graphics.html#clip "API 文档")）中找到其用途的完整介绍，它没有说明与性能影响相关的任何内容：

> ## 剪裁
> 
> 剪辑是图形对象目标中的一组像素，可以通过图形渲染操作进行修改。
> 
> `Graphics`每个对象有一个剪辑。由图形操作修改的唯一像素是位于剪辑内的像素。剪辑之外的像素不会被任何图形操作修改。
> 
> 提供了用于将当前剪辑与给定矩形相交以及完全设置当前剪辑的操作...

尝试使用裁剪 API 来考虑想象中的性能问题将使您的代码成为未来维护者理解的噩梦。请注意，这个*未来的维护者*可能就是你自己，就在几周/几个月/几年之后——我曾经对我自己的代码感到头疼别人写的。

* * *

不要误会我的意思——在特定设备上的某些特定情况下，剪辑可能会对性能产生重大影响——为什么不呢，鉴于 MIDP 实现的多样性，一切皆有可能。知道什么？它甚至有可能对其他设备产生*相反的影响，为什么不呢。*

如果（**如果**）发生这种情况，如果（**如果**）你会以某种方式得到一个明确、可靠、经过测试和证明的特定性能影响的理由——那么（**那么**），继续实施任何必要的技巧来达到所需的性能，无论如何他们可能是反常的（[BTDTGTTS](https://stackoverflow.com/questions/926266/performance-optimization-strategies-of-last-resort/6868327#6868327 "不得已的性能优化策略？")）。不过，在那之前，请放弃您可能想到的任何毫无根据的假设。

在那之前……只是。降低。它。

> 开发人员喜欢优化代码并且有充分的理由。它是如此令人满意和有趣。但知道何时优化更为重要。不幸的是，**开发人员通常对**应用程序中的性能问题实际上会出现在哪里有可怕的直觉……大多数性能调整让我想起了一个老笑话，关于一个人在厨房里寻找他的钥匙，即使他在街上丢了钥匙，因为厨房里的光线更好……（[布赖恩·戈茨](http://java.sun.com/developer/technicalArticles/Interviews/goetz_qa.html#PerformanceProblems "报价来源")）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-17T11:03:15.990

这几乎肯定会因平台而异，并且取决于您实际绘制的数量。

我建议您通过记录每秒绘制的次数或绘制方法的平均持续时间来衡量性能，然后在屏幕上绘制它。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-17T12:10:21.220

没有剪辑的绘图在任何平台上都应该更快，原因很简单，因为您没有调用两个剪辑方法。但我可能会问，你为什么要使用剪辑开始？

当您在同一文件中有动画精灵或图标变体时，通常会使用剪辑。在这种情况下，您可以为每个框架/图标创建一个文件。它会增加你的 jar 文件大小，并会使用更多的堆空间来将这些图像保存在内存中，但绘制速度会更快。

# android - Android：确定 GPS 信号强度

> ID：11520063
> 
> 赞同：0
> 
> 时间：2012-07-17T09:53:44.273
> 
> 标签：android, gps

我的应用程序将使用或准确地确定当前位置`GPS`。如果信号强度很差或很低，那么精度会很差，所以我必须关闭并切换或。我的挑战是`Cellular network``WiFi``GPS``GPS``cellular network``WiFi`

1.如何判断`GPS`信号的强弱。如果穷，我需要停下来`GPS`切换到`cellular network`或`WiFi`？

2.如果`GPS`信号强，我如何确认位置准确并`locationManager.removeUpdates(locationListener);`停止更新？

3.电池消耗应该是最小的。

感谢您提前提供任何建议或代码。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-17T22:05:49.710

您可以一次向所有提供商（GPS、蜂窝网络和 Wifi）请求位置。交付的位置提供有关修复类型的信息以及有关修复的估计准确性的信息。

因此，您可以在检查已收到的结果后关闭进一步的更新。

获得蜂窝和 WiFi 修复的电池电量非常低，所以如果你完全打开 GPS，我不会担心同时打开蜂窝和 WiFi 来修复。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-05-06T05:33:55.690

我想我可以回答你的第一个问题。要确定 GPS 信号强度，请使用以下代码：

> getGsmSignalStrength();

```
private class MyPhoneStateListener extends PhoneStateListener
{
    /* Get the Signal strength from the provider, each time there is an update */
    @Override
    public void onSignalStrengthsChanged(SignalStrength signalStrength)
    {
        super.onSignalStrengthsChanged(signalStrength);
        Toast.makeText(getApplicationContext(), "Go to Firstdroid!!! GSM Cinr = "
                + String.valueOf(signalStrength.getGsmSignalStrength()), Toast.LENGTH_SHORT).show();
    }

}; 
```

我希望这有帮助。

# linux - python3 PyQt / PySide Linux 安装

> ID：11520066
> 
> 赞同：2
> 
> 时间：2012-07-17T09:53:49.797
> 
> 标签：linux, python-3.x, installation, pyqt4, pyside

我已经从 Linux Mint 上的源代码重新安装了 python3.2.2 解释器，以在 curses 中添加 unicode 支持，并发现 PyQt4 库没有导入。我尝试重新安装它，但遇到了与此处相同的问题：[PyQt4 for Python 3.2.2 failed to install on Linux Mint 12](https://stackoverflow.com/questions/9864906/pyqt4-for-python-3-2-2-failing-to-install-on-linux-mint-12)。所以我遵循了**BlaXpirit**的答案并安装了 PySide，但它也没有导入。然后我在 未添加到 PYTHONPATH 变量的***/usr/lib/python3/dist-packages中找到了它们。***我添加了该目录并收到了下一个：

```
In [1]: import PySide 
```

没关系，但是：

```
In [2]: import PySide.QtCore
---------------------------------------------------------------------------
ImportError                               Traceback (most recent call last)
<ipython-input-3-1c10ffe6e7d7> in <module>()
----> 1 import PySide.QtCore

ImportError: No module named QtCore 
```

和 PyQt4：

```
In [3]: import PyQt4
In [4]: import PyQt4.QtCore
---------------------------------------------------------------------------
ImportError                               Traceback (most recent call last)
<ipython-input-5-e7e95ffb1113> in <module>()
----> 1 import PyQt4.QtCore

ImportError: /usr/lib/python3/dist-packages/PyQt4/QtCore.so: undefined symbol:       PyUnicodeUCS4_AsLatin1String 
```

在 PySide 目录中的内容是：

```
-rw-r--r-- 1 root root      181 2012-04-23 23:58 __init__.py
-rw-r--r-- 1 root root   783048 2012-04-24 02:16 phonon.cpython-32mu.so
drwxr-xr-x 2 root root     4096 2012-07-17 09:34 __pycache__
-rw-r--r-- 1 root root  2606568 2012-04-24 02:16 QtCore.cpython-32mu.so
-rw-r--r-- 1 root root   379188 2012-04-24 02:16 QtDeclarative.cpython-32mu.so
-rw-r--r-- 1 root root 11298296 2012-04-24 02:16 QtGui.cpython-32mu.so
-rw-r--r-- 1 root root   377804 2012-04-24 02:16 QtHelp.cpython-32mu.so
-rw-r--r-- 1 root root   921720 2012-04-24 02:16 QtNetwork.cpython-32mu.so
-rw-r--r-- 1 root root   370024 2012-04-24 02:16 QtOpenGL.cpython-32mu.so
-rw-r--r-- 1 root root   266296 2012-04-24 02:16 QtScript.cpython-32mu.so
-rw-r--r-- 1 root root    47608 2012-04-24 02:16 QtScriptTools.cpython-32mu.so
-rw-r--r-- 1 root root   481964 2012-04-24 02:16 QtSql.cpython-32mu.so
-rw-r--r-- 1 root root   152524 2012-04-24 02:16 QtSvg.cpython-32mu.so
-rw-r--r-- 1 root root    93592 2012-04-24 02:16 QtTest.cpython-32mu.so
-rw-r--r-- 1 root root   770644 2012-04-24 02:16 QtUiTools.cpython-32mu.so
-rw-r--r-- 1 root root   570536 2012-04-24 02:16 QtWebKit.cpython-32mu.so
-rw-r--r-- 1 root root   443944 2012-04-24 02:16 QtXml.cpython-32mu.so
-rw-r--r-- 1 root root   236552 2012-04-24 02:16 QtXmlPatterns.cpython-32mu.so 
```

在 PyQt4 中：

```
-rw-r--r-- 1 root root    1111 2012-07-02 13:39 __init__.py
-rw-r--r-- 1 root root   13369 2012-07-02 13:39 pyqtconfig.py
-rwxr-xr-x 1 root root 2267672 2012-07-02 13:39 QtCore.so
-rwxr-xr-x 1 root root  226468 2012-07-02 13:39 QtDeclarative.so
-rwxr-xr-x 1 root root  302208 2012-07-02 13:39 QtDesigner.so
-rwxr-xr-x 1 root root 7362040 2012-07-02 13:39 QtGui.so
-rwxr-xr-x 1 root root  639832 2012-07-02 13:39 QtNetwork.so
-rwxr-xr-x 1 root root  248712 2012-07-02 13:39 QtOpenGL.so
-rwxr-xr-x 1 root root  187824 2012-07-02 13:39 QtScript.so
-rwxr-xr-x 1 root root   19964 2012-07-02 13:39 QtScriptTools.so
-rwxr-xr-x 1 root root    5508 2012-07-02 13:39 Qt.so
-rwxr-xr-x 1 root root  300872 2012-07-02 13:39 QtSql.so
-rwxr-xr-x 1 root root   85296 2012-07-02 13:39 QtSvg.so
-rwxr-xr-x 1 root root   28932 2012-07-02 13:39 QtTest.so
-rwxr-xr-x 1 root root  404432 2012-07-02 13:39 QtWebKit.so
-rwxr-xr-x 1 root root  158112 2012-07-02 13:39 QtXmlPatterns.so
-rwxr-xr-x 1 root root  301924 2012-07-02 13:39 QtXml.so
drwxr-xr-x 7 root root    4096 2012-07-02 13:39 uic 
```

我已经从存储库和 python.org、源代码和二进制文件重新安装了 python3 几次，现在我在***/usr/bin中有 1 个可执行 python3.2mu，在******/*** usr/ 中有 3 个（python3、python3.2、python3.2m）***本地/bin***。
请帮帮我！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-21T13:46:27.900

通过更改 pyatomic.h 中的 65 行解决了 PyQt4 的问题：

从

```
 _Py_ANNOTATE_HAPPENS_BEFORE(address); 
```

到

```
_Py_ANNOTATE_HAPPENS_BEFORE(address) (void)address; 
```

# android - 拇指与进度不匹配（搜索栏）

> ID：11520078
> 
> 赞同：3
> 
> 时间：2012-07-17T09:54:56.703
> 
> 标签：android, scrollbar, match, seekbar

加载搜索栏后出现错误。拇指与进度值不匹配。第一次点击进度条后，拇指移动正确。这个问题有什么解决办法吗？感谢帮助！

截屏：

![](../Images/c4d4fc7c9fd5c7c717c0e8f6e8daee77.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-29T12:20:25.183

检查您的拇指偏移是否未设置

```
android:thumbOffset="-10dp" 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-07T00:17:38.410

您没有提供太多详细信息。

我在 Android 2.3 及更早版本中发现，如果我在代码中修改拇指，则需要以下序列：

```
int progress = getProgress();
setProgress(0);
setProgress(progress); 
```

否则，拇指将不会处于正确的位置。您必须首先调用 setProgress(0)，因为使用当前位置调用 setProgress() 不会执行任何有用的代码。

# html - 水平菜单被砍掉

> ID：11520083
> 
> 赞同：0
> 
> 时间：2012-07-17T09:55:30.587
> 
> 标签：html, css, joomla, styles

谁能告诉我为什么标题菜单被切断了？

这是我正在谈论的粉红色菜单。我正在使用 Joomla 1.7 和 IceMenu 扩展，但由于某种原因，菜单被砍掉了。此外，粉红色菜单的实际悬停颜色。有谁知道如何改变它？

[http://ream.wsidwdev.com/our-work](http://ream.wsidwdev.com/our-work)

任何帮助是极大的赞赏。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-17T13:45:51.357

For the positioning of your pink menu, you've declared the position with the `top` and `left` properties, but you don't have the position property.

Wherever you want that menu to be positioned it has to be `relative` to the parent element it is inside of, unless you `absolute`ly position it to another place altogether. I don't see how it's being chopped off. There are 4 list items in code and they all display on the screen.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-17T10:04:20.277

您可以在此文件的第 82 行更改粉红色菜单的悬停颜色：

[http://ream.wsidwdev.com/modules/mod_icemegamenu/themes/default/css/default_icemegamenu.css](http://ream.wsidwdev.com/modules/mod_icemegamenu/themes/default/css/default_icemegamenu.css)

关于粉红色菜单被切断，我不确定你的意思。我可以在您的代码中看到 ID 为“icemegamenu”的 Ul 正在尝试绝对定位，但您实际上并未将其设置为“位置：绝对”。

# linux - 更新linux中的包含路径

> ID：11520084
> 
> 赞同：3
> 
> 时间：2012-07-17T09:55:34.117
> 
> 标签：linux

/my/path/to/file 文件夹中的头文件很少。我知道如何将这些文件包含在新的 C 程序中，但每次我需要在包含头文件之前键入头文件的完整路径。我可以在 linux 中设置一些路径变量，以便它自动查找头文件吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-17T10:03:14.347

你可以创建一个makefile。一个最小的例子是：

```
INC_PATH=/my/path/to/file
CFLAGS=-I$(INC_PATH)

all:
    gcc $(CFLAGS) -o prog src1.c src2.c 
```

从这里您可以通过多种方式改进此 makefile。最重要的可能是声明编译依赖项（因此只重新编译修改过的文件）。

作为参考，这里有一个指向[GNU make 文档](http://www.gnu.org/software/make/manual/make.html)的链接。

如果不想使用 makefile，可以随时设置环境变量，以便更轻松地键入编译命令：

```
export MY_INC_PATH=/my/path/to/file 
```

然后你可以编译你的程序，如：

```
gcc -I${MY_INC_PATH} -o prog src1.c src2.c ... 
```

您可能想`MY_INC_PATH`在文件中定义变量`.bashrc`，或者更好的是，在包含变量定义的方便位置创建一个文件。然后，您可以使用`source`在当前 shell 中设置该变量：

```
source env.sh 
```

但是，我认为使用 makefile 是一种更可取的方法。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2014-11-26T17:48:48.030

有一个类似的问题，可能会更好地解决（如果您对永久解决方案感兴趣）：[https ://stackoverflow.com/a/558819/1408096](https://stackoverflow.com/a/558819/1408096)

尝试设置**C_INCLUDE_PATH**（对于 C 头文件）或**CPLUS_INCLUDE_PATH**（对于 C++ 头文件）。

荣誉：jcrossley3

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-17T10:08:13.647

我现在不在 Linux 中，我懒得重新启动以检查一切是否正确，但是您是否尝试过创建符号链接？例如，如果您在 Ubuntu 上：

```
$ cd /usr/include
$ sudo ln -s /my/path/to/file mystuff 
```

因此，当您想包含 stuf 时，可以使用：

```
#include <mystuff/SpamFlavours.h> 
```

# php - PHP：对象中的对象调用函数

> ID：11520086
> 
> 赞同：-1
> 
> 时间：2012-07-17T09:55:43.130
> 
> 标签：php, oop

我是 PHP OOP 的新手，但对 PHP 不是很熟悉，想开始学习.. 并且碰到了几堵砖墙，但这让我很难过.. 但是因为我在网络上的任何地方都找不到任何问题..我也找不到答案。。

所以..代码..我把它简化为它的核心问题，如果我能理解的话..

```
 <?php

class wallet {
    public $Money = 5;

    public function Add($mMoney) {
        $this->Money += $mMoney;
        echo "added $mMoney to Wallet";
        }
    public function take($mMoney) {
        $this->Money -= $nMoney;
        }
    public function check() {
        echo $this->Money;
        echo "Check?";
    } 

    public function __get($var) {
      echo "trying to get $var and Failing";

    }       

}

class person {
    public $Name;
    public $Wallet;
    public $Purse;
    public $Cash;

    public function __construct($name, $cash) {

        $this->Wallet = new wallet();
        $this->Purse = new wallet();
        $this->Name = $name;
        $this->Cash = $cash;
    }

    public function status() {
       echo "<br><table border = 1><tr><td>".$this->Name."</td><td> Wallet?</td><td> Purse </td></tr>
       <tr><td> $ ".$this->Cash."</td><td>".$this->checkWallet()."<td>22</td></tr></table>";

    }

    public function toWallet($toAdd)  {
       $this->Wallet->add($toAdd);

    }

    public function checkWallet() {
       echo $this->Wallet->check();

    }

}

$bob = new person ("Bob", 10);
$sarah = new person ("Sarah", 20);

$bob->status();
$sarah->status();

$bob->toWallet(10);

$bob->status();
$sarah->status();

?> 
```

为什么 toWallet 不工作？为什么我不能访问 $this->checkWallet()..

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-17T19:29:49.847

ToWallet 不起作用的原因是该函数认为来自 Add 的 echo 是返回值。（这显然是一个字符串，在计算中没有用处）。mMoney 变量需要有一个返回命令。尝试在 Add 函数中输入类似这样的内容

```
public function Add($mMoney) {
        $this->Money += $mMoney;
        echo "added $mMoney to Wallet";
        return $mMoney;
        } 
```

我不知道其他人是怎么发现的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-18T14:33:43.370

对于将来遇到此问题的任何人..解决方案如下：

第一：当您有一个对象时，不要将数据回显或打印到屏幕上，将其返回给父对象为您执行此操作，

第二：仔细检查所有变量要么只是函数，即$wallet，要么是对象变量$this->wallet，因为即使我盯着代码看了好几个小时，我也看不出这不是同一个变量。 .

OOP 的新手，真是一团糟

# python - 如何在 max(x, key=custom_function) 函数中使用自定义函数？

> ID：11520087
> 
> 赞同：1
> 
> 时间：2012-07-17T09:55:46.660
> 
> 标签：python, max, built-in

我有一个自定义数据类型，比如说：`mytime`，它代表小时和分钟，例如 29:45，它是 29 小时 45 分钟。

我想使用`max`内置函数在列表列表中查找项目，其元素总和最大，其中所有列表都包含`mytime`类型值。

```
x = [[a, b], [c, d]] 
```

a,b,c,d 是`mytime`类型。

```
max(x, key=sum) 
```

在这里不起作用，因为 a,b,c,d 不是整数。

如果我`a + b`在 python 命令行输入，我得到这两个时间值的总和，结果是`mytime`类型，没有任何错误。

我如何`max`在这里使用函数？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-17T11:56:35.593

假设您的课程如下所示：

```
class mytime(object):

    def __init__(self, h, m):
        self.h = h
        self.m = m

    def __add__(self, other):
        return mytime(self.h + other.h, self.m + other.m)

    def __repr__(self):
        return '%i:%i' % (self.h, self.m) 
```

你像这样使用它：

```
a = mytime(10, 10)        
b = mytime(2, 22)
print a + b 
```

它将按预期工作：

> 12:32

* * *

**问题：**

你想做的是：

```
l = [a, b]
print sum(l) 
```

但它会失败：

> 类型错误：+ 不支持的操作数类型：“int”和“mytime”

问题是该`sum`函数将开始`0`并将列表的所有值相加。它将尝试评估

```
0 + mytime(10, 10) 
```

这将失败。

* * *

**解决方案：**

您的问题的解决方案是实现该`__radd__`函数，该函数表示“反向添加”，并且在无法在“正向”方向上解析参数时调用。例如，尽可能`x + y`评估`x.__add__(y)`，但如果不存在，那么 Python 会尝试`y.__radd__(x)`.

因此，您可以将以下方法添加到您的类中：

```
def __radd__(self, other):
    return mytime(self.h, self.m) 
```

并且该`sum`功能将为您工作（在此实现中忽略该`other`值，这在您的情况下可能很好）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-17T10:02:25.817

你确定使用`a + b`作品吗？所做的一切`sum`都是重复应用于相邻元素（这与打破字符串的特殊情况`+`相同）......所以如果它确实有效 - 那么应该只是工作 -**只要****支持比较运算符 -****例如****，，**`reduce(operator.add, sequence)``max(x, key=sum)`**`mydate``__gt__``__eq__``__lt__`**

**例子**

您需要`__gt__`定义 max 才能工作...

```
class mydate(object):
    def __init__(self, num):
        self.num = num
    def __add__(self, other): # make sure sum works
        return self.num + other.num
    def __gt__(self, other): # make sure max can do > comparison
        return self.num > other.num
    def __repr__(self):
        return 'date: {}'.format(self.num)

x = mydate(3)
y = mydate(5)
z = mydate(2)

print max([x,y,z], key=sum) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-17T10:12:27.913

您可以编写自己的 sum 函数：

```
def my_sum(item):
    return sum(60 * e[0] + e[1] for e in item)

x = [[(2,0), (3,0)], [(9, 0), (4, 0)]]
print max(x, key=my_sum) 
```

我已将您的`mytime`数据结构表示为元组（带有小时和分钟），因此您可能需要调整`my_sum`您的数据结构。唯一的要求是a的小时和分钟`mytime`可以分别填入for`e[0]`和`e[1]`。

上面的代码返回最大的元素（在这种情况下`[(9, 0), (4, 0)]`）。

# ios - 从 nib 加载 UITableViewCell 的特殊方法

> ID：11520093
> 
> 赞同：2
> 
> 时间：2012-07-17T09:56:34.880
> 
> 标签：ios, objective-c, uitableview, cocoa-touch, uikit

这是我发明的加载自定义单元格的方法

1）我使用我的 UITableViewCell 类扩展

```
//.h

@interface UITableViewCell (Extended)

+ (id) cellWithClass:(Class)class;

+ (id) cellWithClass:(Class)class fromNibNamed:(NSString *)nibName;

@end

//.m

+ (id) cellWithClass:(Class)class
{
    return [UITableViewCell cellWithClass:class fromNibNamed:NSStringFromClass(class)];
}

+ (id) cellWithClass:(Class)class fromNibNamed:(NSString *)nibName {

    NSArray * nibContents = [[NSBundle mainBundle] loadNibNamed:nibName owner:self options:NULL];

    NSEnumerator * nibEnumerator = [nibContents objectEnumerator];
    NSObject * nibItem = nil;

    while ((nibItem = [nibEnumerator nextObject]) != nil) {

        if ([nibItem isKindOfClass:class]) {
            return nibItem;
        }

    }

    return nil;
} 
```

2) 创建自定义 UITableViewCell 子类，使用同名的 .nib (CustomCell.xib) 我连接了所有插座

```
@interface CustomCell : UITableViewCell

@property (weak, nonatomic) IBOutlet UILabel * labelSmth;

- (void) setupWithTitle:(NSString *)title;

@end 
```

2）在使用界面生成器的CustomCell.xib中，我拖动一个UITableViewCell并使其成为CustomCell类（具有重用标识符CustomCell）（我没有设置文件所有者）......而不是UI样式，连接插座等......

3）比像这样加载它

```
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{
    static NSString * identifier = @"CustomCell";

    CustomCell * cell = [self.tableView dequeueReusableCellWithIdentifier:identifier];

    if (cell == nil) {

        cell = [UITableViewCell cellWithClass:[CustomCell class]];

    }

    [CustomCell setupWithTitle:[self.titles objectAtIndex:[indexPath row]]];

    return cell;
} 
```

**这种方法可以吗？这适用于许多项目，但我不确定重用标识符以及单元格是否被正确重用的事实...... **

我也不确定

```
NSArray * nibContents = [[NSBundle mainBundle] loadNibNamed:nibName owner:self options:NULL]; 
```

当我在类方法中传递所有者自我时......

苹果也想出了

```
- (void) registerNib:(UINib *)nib forCellReuseIdentifier:(NSString *)reuse; 
```

这怎么可能适合我的方法？

以及如何使用自定义重用标识符，就像我想要一个方法一样

```
+ (id) cellWithClass:(Class)class fromNibNamed:(NSString *)nibName reuseIdentifier:(NSString *)reuseIdentifier; 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-21T20:25:28.327

你不需要为此发明新的东西。它已经为你发明了。您发明的是一种用于加载自定义单元格的常见反模式。

枚举笔尖内容以获取笔尖中的 UITableViewCell 不是正确的方法。

您应该在您创建 UITableViewCell（通常是 UIViewController）的 nib 的文件所有者中定义和输出您的 UITableViewCell。

然后您可以使用以下模式访问该单元格：

```
- (UITableViewCell *) tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath {    
    static NSString *cellIdentifier = @"MyCustomCell"; //this should also be specified in the properties of the UITableViewCell in the nib file
    MyCustomCell *cell = [tableView dequeueReusableCellWithIdentifier:cellIdentifier];
    if(!cell) {
        [[NSBundle mainBundle] loadNibNamed:cellIdentifier owner:self options:nil];
        cell = self.myCustomCellOutlet;
        self.myCustomCellOutlet = nil;
    }   

    return cell;
} 
```

# jquery - jQuery hasClass 实现

> ID：11520094
> 
> 赞同：-1
> 
> 时间：2012-07-17T09:56:36.850
> 
> 标签：jquery

我正在检查表 tr 元素中是否存在类，例如： `<tr class="row1 head4"></tr>`

通过声明：
`if (that.next().hasClass('.head'+nextRow)){} else if (that.next().hasClass('.head'+(nextRow+1))){}`

`nextRow`具有从 1 到 5 的值。但它不起作用。语法错了吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-17T09:58:06.870

You don't need a fullstop prepending class name. The full stop is only required when using a "normal" jquery selector.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-17T10:08:42.930

我不确定是否是您想要的，但是您可以在 tr 上进行迭代：

```
<table>
    <tr class="row1"><td></td></tr>
    <tr class="row2 head1"><td></td></tr>
    <tr class="row3"><td></td></tr>
    <tr class="row4 head3"><td></td></tr>
</table>

$('table tr').each(function(i){
    if($(this).hasClass('head'+i)) alert($(this).attr('class'));
}); 
```

请参阅[示例](http://jsfiddle.net/CuNzD/)。

# android - 如何在android中保持会话？

> ID：11520099
> 
> 赞同：1
> 
> 时间：2012-07-17T09:56:44.960
> 
> 标签：android, web-services, android-service, android-ksoap2

我的应用程序 android 已使用 ksoap2 连接到 web 服务 (.asmx)。但它有会话。当我登录服务将保持会话来管理用户 - 客户端。但是当我登录成功时，网络服务中的会话保持为空？有人能告诉我为什么吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-17T10:00:22.960

Android 无法定义会话，因为它是 Web 浏览器的一项功能。我们想出的最简单的解决方案是将 Web 会话的 sessionID 与 URL 一起发送，例如：`http://your.required.url/your.context/your.action;jsessionid=<the_current_session_id>?GET=PARAMETERS`

# html - 标题中的单选按钮

> ID：11520102
> 
> 赞同：0
> 
> 时间：2012-07-17T09:56:48.963
> 
> 标签：html, jquery-mobile

我有一个带有几个单选按钮的标题，可让用户在不同的列表视图之间进行选择。我无法更改它，因此它排成一行。四个按钮的宽度大于屏幕尺寸，我无法限制每个输入的宽度。

这是该部分的代码：

```
<div data-role="header" data-theme="b" data-position="fixed" style="height:45px;width:100%;">
<div class="centerFieldset">

    <fieldset class="radioBtn" data-role="controlgroup" data-type="horizontal" style="margin-top:1px;">
        <label for="flow" >Rivers</label> 
        <input class="type" type="radio" name="radio" id="flow" value="flow"
            onClick="javascript:changeFlow()" <?php print $flow_selected;?> />
        <label for="lake" >Lakes</label> 
        <input class="type" type="radio" name="radio" id="lake" value="lake"
            onClick="javascript:changeLakes()" <?php print $lake_selected;?> />
        <label for="meteo" >Meteo</label>
        <input class="type" type="radio" name="radio" id="meteo" value="meteo"
            onClick="javascript:changeMeteo()" <?php print $meteo_selected;?>/>
        <label for="tableau" >Tableau</label>
        <input class="type" type="radio" name="radio" id="tableau" value="tableau"
            onClick="javascript:changeMeteo()" />
    </fieldset>
</div>
</div> 
```

CSS文件是：

.centerFieldset { 文本对齐：中心；}

.centerFieldset 字段集 { 显示：内联；左边距：自动；边距右：自动；宽度：100%；}

这是它的样子：

![在此处输入图像描述](../Images/f464e46350ad6561b3de701b8f5acf1b.png)

当我尝试将标签宽度限制为 20% 时，我得到了这个：

![在此处输入图像描述](../Images/e1b5351d507f441e588232f781e589eb.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-17T11:24:00.553

.centerFieldset { 文本对齐：中心；显示：块；向左飘浮 }

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-17T11:40:32.460

此布局中的问题是您在标题上使用单选按钮...我认为两个或多个 css 包含在单选按钮中的 jquery 生成的 div 中...要么使用导航栏，要么实现自定义 css 以禁用第二个单选按钮中包含的 CSS 类...

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-17T11:39:08.680

你能试试这个吗

.centerFieldset { 文本对齐：中心；显示：块；向左飘浮 }}

.centerFieldset 字段集 { 宽度：100% }

它应该有效

# php - PHP - 搜索特定文件的目录和子目录？

> ID：11520109
> 
> 赞同：3
> 
> 时间：2012-07-17T09:56:56.190
> 
> 标签：php

如何在特定目录及其子目录中搜索特定文件？

我尝试过的是以下两个功能：

```
function getImageDirectory($ipaPath) {
    $oDirectory = new RecursiveDirectoryIterator($ipaPath);
    $oIterator = new RecursiveIteratorIterator($oDirectory);
    foreach($oIterator as $oFile) {
        if ($oFile->getFilename() == 'info.plist') {
           return $oFile->getPath();
        }
    }
} 
```

编辑：这个有效，就像下面的答案一样！我上面的示例返回您要查找的文件的目录，在本例中为“info.plist”。

EDIT2：感谢反对票！如果有人会问类似的问题，它会在我写标题时显示出来。但是对于 PHP 来说没有任何意义。因此，如果我搜索错误的东西，而不是使用开发人员语言，它不应该被否决！现在，我的 php 技能较低的人可能会找到这个问题的答案！stackoverflow 是否仅适用于专业人士或任何需要帮助的人？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-17T10:11:36.893

正如@diEcho 建议的那样，使用`glob`. 像这样获取文件列表：

```
<?php
foreach( glob( "*.*" ) as $filename ) {
  echo "$filename size " . filesize( $filename ) . "\n";
}
?> 
```

之后，只需查看结果。您可能需要一个递归函数来访问子文件夹。

# ios - iOS-是否有任何方法可用于从 Mailcore 库中的 CTCoreAccount 或 CTCoreFolder 获取具有特定关键字的 CTCoreMessage？

> ID：11520111
> 
> 赞同：0
> 
> 时间：2012-07-17T09:57:00.040
> 
> 标签：ios, search, gmail, inbox, mailcore

我正在开发一个 IOS 应用程序，其中我通过 Mailcore 库集成了 Gmail，现在我想为收件箱添加搜索功能，用户可以搜索他们的电子邮件主题和正文。但我不知道如何实现它。谁能帮我吗？Mailcore 中是否有任何示例源代码？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-17T10:16:08.303

使用它具有搜索功能

[http://code.google.com/p/remail-iphone/](http://code.google.com/p/remail-iphone/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-14T05:11:42.863

MailCore api 我开发了相同类型的应用程序并使用它。它们提供对 IMAP 和 SMTP 服务器的访问。从这里下载

[https://github.com/mronge/MailCore/](https://github.com/mronge/MailCore/)

# c# - Windows 服务停止工作

> ID：11520114
> 
> 赞同：0
> 
> 时间：2012-07-17T09:57:05.547
> 
> 标签：c#, windows-services

我在服务器上有 2 个 Windows 服务，它们只是停止工作。它们在我的本地系统上运行良好，直到昨天下午 2 点左右，它们运行良好。我不知道他们发生了什么事。它们在 Windows 服务窗口中显示为已启动，但它们不起作用。

我已经检查并尝试了以下

1.  我已经重新启动了它们
2.  我已经用相同的代码卸载并重新安装了它们
3.  我已经用我机器上的代码卸载并重新安装了它们（这与服务器上的代码相同，因为没有对它们进行任何更改）
4.  我知道代码中没有错误，因为其中一个是电子邮件发送服务，如果出现错误，它将写入数据库 - 这不会发生。
5.  我知道数据库连接字符串是正确的，因为它之前一直在工作，而且我无法使用不正确的连接字符串启动服务
6.  我知道该服务甚至没有尝试发送电子邮件，因为如果出现问题，比如说与邮件服务器的连接，它会向数据库写入一些内容。
7.  我已经重启了服务器

没有任何工作。我不明白为什么运行良好的 Windows 服务会停止做任何事情。

请你帮忙。

谢谢，

萨钦

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-17T10:01:17.360

我不能给你一个肯定的答案，但是在处理Windows服务问题时，这个小技巧对我帮助很大：

简单的说

```
System.Diagnostics.Debugger.Launch() 
```

在您的代码中，它将启动 VS 并作为断点工作。从这里你可能会思考你的代码，看看出了什么问题。但是，只有在您的生产机器上可以使用 VS 时，这才会对您有所帮助..

# java - 可导航集 不匹配集合 in method argument I have a method which takes a Collection where the Object can be a String or CustomClass. It then takes each element of the co 问问题 问问题 2012-07-17T09:57:10.990 143 次 This question shows research effort; it is useful and clear 0 This question does not show any research effort; it is unclear or not useful Bookmark this question. Show activity on this post. I have a method which takes a Collection where the Object can be a String or CustomClass. It then takes each element of the collection and passes it to a method with an argument of Object like so: public void foo(Collection c) { for(Object o : c) bar(o); } public void bar(Object o) { if(o instanceof String || o instanceof CustomClass) { ... } } bar works fine when I pass it a String or CustomClass, but when I try to pass a NavigableSet <string>to foo I get cannot find symbol; symbol : method foo(java.util.NavigableSet<java.lang.string>). However if I change the the argument type in foo to Collection <string>it works fine, but this means I need to make a new foo(Collection<customclass>) method which will involve repeating code. Is there a way around this? Comparing two rows in SQL Server Scenario A very large size query returns a lot of fields from multiple joined tables. Some records seem to be duplicated. You accomplish some checks, some grouping. You focus on a couple of records for further investigation. Still, there are too much fields to check each value. Question Is there any built-in function that compares two records, returning TRUE if the records match, otherwise FALSE and the set of not matching fields? javaoverloading 4 2 回答 2 This answer is useful 5 Collection<string>不是 的子类型Collection，因此编译器找不到任何兼容的方法。放 public <t>void foo(Collection <t>c) { for (T o : c) bar(o); } 于 2012-07-17T10:00:39.223 回答 This answer is useful 0 T和之间的继承关系T**称为“泛型协方差”。它不是简单的，如果A从 继承B，然后T****从 继承T**，因为类型参数可能是“in”或“out”（就像 C# 所说的那样）。 参见例如http://www.ibm.com/developerworks/java/library/j-jtp01255/index.html 或java generics covariance 或http://etymon.blogspot.co.uk/2007/02/java-generics -and-covariance-and.html Marko 的建议是解决您问题的最简单方法。 于 2012-07-17T10:04:11.087 回答 Related 0 php - 在 PHP 中是否可以抓取一个 PDF 的一部分并将其与另一个合并？ 1 php - 如何在 phpMyFAQ 中设置数据库信息？ 1 c# - 如何使用 Resharper 修复所有类似的警告？ 5 java - Set 类型不是通用的；它不能用参数参数化 1 android - 如何保存片段的状态以供进一步使用（并避免重建）？ 0 android - 在不影响滚动位置的情况下动态更改 Android 中的代码文本 2 c++ - C++ 结构测试 1 rest - 如何在 neo4j FT 索引查询中仅获取前 100 个匹配结果 2 android - 如何在不同的机器上使用一个 google mav v2 密钥 1 c - 如何在 C 中序列化和反序列化 Hessian 调用 Reference php × 1429865 c/c++ × 756500 nginx × 49975 mongodb × 159057 mybatis × 3233 anaconda × 13410 pycharm × 14671 python × 1902243 vscode × 56040 docker × 110988 github × 49000 flask × 49129 ffmpeg × 24037 jmeter × 16910 matplotlib × 63493 bootstrap × 54641

> ID：11520115
> 
> 赞同：0
> 
> 时间：
> 
> 标签：java, overloading

I have a method which takes a `Collection<Object>` where the `Object` can be a `String` or `CustomClass`. It then takes each element of the collection and passes it to a method with an argument of `Object` like so:

```
public void foo(Collection<Object> c) {
    for(Object o : c)
        bar(o);
}

public void bar(Object o) {
    if(o instanceof String || o instanceof CustomClass) {
        ...
    }
} 
```

`bar` works fine when I pass it a `String` or `CustomClass`, but when I try to pass a `NavigableSet<String>` to `foo` I get `cannot find symbol; symbol : method foo(java.util.NavigableSet<java.lang.String>)`.

However if I change the the argument type in `foo` to `Collection<String>` it works fine, but this means I need to make a new `foo(Collection<CustomClass>)` method which will involve repeating code. Is there a way around this?

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-17T10:00:39.223

`Collection<String>`不是 的子类型`Collection<Object>`，因此编译器找不到任何兼容的方法。放

```
public <T> void foo(Collection<T> c) {
  for (T o : c) bar(o);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-17T10:04:11.087

`T<A>`和之间的继承关系`T<B>`称为“泛型协方差”。它不是简单的，如果`A`从 继承`B`，然后`T<A>`从 继承`T<B>`，因为类型参数可能是“in”或“out”（就像 C# 所说的那样）。**  **参见例如[http://www.ibm.com/developerworks/java/library/j-jtp01255/index.html](http://www.ibm.com/developerworks/java/library/j-jtp01255/index.html) 或[java generics covariance](https://stackoverflow.com/questions/2660827/java-generics-covariance) 或[http://etymon.blogspot.co.uk/2007/02/java-generics -and-covariance-and.html](http://etymon.blogspot.co.uk/2007/02/java-generics-and-covariance-and.html)

Marko 的建议是解决您问题的最简单方法。****</t></t></string></customclass></string></java.lang.string></string>

# coffeescript - 调用咖啡脚本超级方法

> ID：11520116
> 
> 赞同：34
> 
> 时间：2012-07-17T09:57:16.843
> 
> 标签：coffeescript

我有以下代码：

```
 class Animal
        constructor: (@name) -> 
        say: () -> console.log "Hello from animal called #{ @name }"

    class Dog extends Animal

        say: () ->
            super.say()
            console.log "Hello from dog called #{ @name }"

    a = new Animal('Bobby')
    a.say()

    d = new Dog("Duffy")
    d.say() 
```

结果不是

```
Hello from animal called Bobby
Hello from animal called Duffy
Hello from dog called Duffy 
```

但我收到以下错误：

```
Hello from animal called Bobby
Hello from animal called Duffy
Uncaught TypeError: Cannot call method 'say' of undefined 
```

为什么 super 是未定义的？如何调用父方法以扩展它？谢谢

* * *

## 回答 #1

> 赞同：69
> 
> 时间：2012-07-17T10:08:24.473

我自己找到了答案，应该是：

```
class Dog extends Animal

    say: () ->
        super
        console.log "Hello from dog called #{ @name }" 
```

# sql-server - 比较 SQL Server 中的两行

> ID：11520117
> 
> 赞同：5
> 
> 时间：2012-07-17T09:57:22.940
> 
> 标签：sql-server, tsql, comparison

**设想**

一个非常大的查询会返回来自多个连接表的大量字段。有些记录似乎是重复的。你完成一些检查，一些分组。您专注于几条记录以进行进一步调查。尽管如此，仍有太多字段无法检查每个值。

**问题**

是否有任何内置函数可以比较两条记录，如果记录匹配则返回 TRUE，否则返回 FALSE 和不匹配的字段集？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-17T09:59:40.480

该[`CHECKSUM`](http://msdn.microsoft.com/en-us/library/ms189788.aspx)功能应有助于识别匹配的行

```
 SELECT CHECKSUM(*) FROM table 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-17T11:06:51.460

我建议使用该[`hashbytes`](http://msdn.microsoft.com/en-us/library/ms174415.aspx)函数来比较行。它比校验和更好。

如何按所有列创建 row_number 和分区，然后选择所有 rn 为 2 及以上的行？这不是慢的方法，它会给你完美的数据，并会给出被复制的整行数据。我会用这种方法而不是依赖所有的散列技术。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-17T10:46:06.760

可能这就是您正在寻找的：

```
SELECT * FROM YourTable 
GROUP BY <<ColumnList>>
HAVING COUNT(*) > 1 
```

只是根据 Podiluska 提供的建议来查找重复的记录

```
SELECT CHECKSUM(*) 
FROM YourTable 
GROUP BY CHECKSUM(*) 
HAVING COUNT(*) > 1 
```

# button - FX 2.x : How do I remove SplitPane?

> ID：11520120
> 
> 赞同：1
> 
> 时间：2012-07-17T09:57:33.633
> 
> 标签：button, javafx-2, multisplitpane

I can add SplitPane in a XYChart by clicking the "Add Pane" button, and it works fine.

Now I would like to remove SplitPane by clicking the "Remove pane" button.

Here is full code

```
public class SplitPaneFxTest extends Application {

SplitPane splitPane = new SplitPane();
double    percSplit = 0.50;
int       idxSplit  = 0;
/**
 * @param args the command line arguments
 */
public static void main(String[] args) {
    launch(SplitPaneFxTest.class, args);
}

@Override
public void start(Stage primaryStage) {
    primaryStage.setTitle("SplitPane Test");

    Group root = new Group();
    Scene scene = new Scene(root, 800, 650, Color.WHITE);

    //CREATE THE SPLITPANE        
    splitPane.setPrefSize(scene.getWidth(), scene.getHeight());
    splitPane.setOrientation(Orientation.VERTICAL);        

    //ADD LAYOUTS AND ASSIGN CONTAINED CONTROLS
    BorderPane upperPane = new BorderPane();
    HBox hbox = new HBox();

    Button button1 = new Button("Add Pane");
    hbox.getChildren().addAll(button1);
    upperPane.setTop(hbox);

    Button button2 = new Button("Remove Pane");
    hbox.getChildren().addAll(button2);
    upperPane.setTop(hbox);

    BorderPane lowerPane = new BorderPane();

    splitPane.getItems().addAll(upperPane);
    splitPane.setDividerPosition(idxSplit, 0.70);
    idxSplit++;

    splitPane.getItems().addAll(lowerPane);        
    idxSplit++;

    root.getChildren().add(splitPane);

    primaryStage.setScene(scene);
    primaryStage.show();

    button1.setOnAction(new EventHandler<ActionEvent>() {
    @Override public void handle(ActionEvent e) {

        BorderPane myborderpane = new BorderPane();            
        splitPane.getItems().addAll(myborderpane);

        ObservableList<SplitPane.Divider> splitDiv =  splitPane.getDividers();

        System.out.println("splitDiv.size() "+splitDiv.size());

        percSplit = 1/(double)(splitDiv.size()+1);
        for (int i = 0; i< splitDiv.size(); i++) {                
            System.out.println("i "+i+" percSplit "+percSplit);
            splitPane.setDividerPosition(i, percSplit);
            percSplit += 1/(double)(splitDiv.size()+1);
        }
      }
    });
}
} 
```

Any help really appreciated.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-17T10:38:30.103

您可以存储内部窗格列表并根据此列表将其删除：

```
 final List<Pane> panes = new ArrayList<Pane>();

    button1.setOnAction(new EventHandler<ActionEvent>() {
        @Override
        public void handle(ActionEvent e) {

            BorderPane myborderpane = new BorderPane();

            //adding
            panes.add(myborderpane);

            splitPane.getItems().addAll(myborderpane);

            ObservableList<SplitPane.Divider> splitDiv = splitPane.getDividers();

            System.out.println("splitDiv.size() " + splitDiv.size());

            percSplit = 1 / (double) (splitDiv.size() + 1);
            for (int i = 0; i < splitDiv.size(); i++) {
                System.out.println("i " + i + " percSplit " + percSplit);
                splitPane.setDividerPosition(i, percSplit);
                percSplit += 1 / (double) (splitDiv.size() + 1);
            }
        }
    });

    button2.setOnAction(new EventHandler<ActionEvent>() {
        @Override
        public void handle(ActionEvent t) {
            if (panes.size() > 0) {
                // removing from both list and splitPane childs
                Pane toDelete = panes.remove(0);
                splitPane.getItems().remove(toDelete);
            }
        }
    }); 
```

您也可以直接从中删除窗格，`ScrollPane.getChildren()`但它可能涉及棘手且不可靠的代码来确定要删除的窗格。

# php - How to parse JSON string in php

> ID：11520125
> 
> 赞同：1
> 
> 时间：2012-07-17T09:57:57.963
> 
> 标签：php, json

I'm getting below JSON response:

```
[{"startDate":"2012-07-12 11:21:38 +0530","totalTime":0},{"startDate":"2012-07-11 11:27:33 +0530","totalTime":0},{"startDate":"2012-07-16 18:38:37 +0530","totalTime":0},{"startDate":"2012-07-17 14:18:32 +0530","totalTime":0}] 
```

i want make array of start date and totalTime, i have used these two lines but it wont work $obj, please suggest..

```
 $obj  = json_decode($dateTimeArr); 
        $dateAr = $obj->{'startDate'}; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-17T12:08:11.307

正如每个人所说，你也这样做了 - 使用`json_decode`.

```
 $dateArrays  = json_decode($dateTimeArr, true); // decode JSON to associative array
    foreach($dateArrays as $dateArr){
        echo $dateArr['startDate']; 
        echo $dateArr['totalTime']; 
    } 
```

将来，如果您不确定变量中的数据类型或结构，请执行此操作`var_dump($var)`，它将打印变量的类型及其内容。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-17T10:00:02.413

这很容易：

```
$Arr = json_decode($JSON, true); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-17T10:04:20.430

使用**json_decode($json_response,true)**将 json 转换为 Array

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-17T09:59:47.717

[`json_decode()`](http://php.net/manual/en/function.json-decode.php)将为您提供嵌套的 PHP 类型，然后您可以下降以检索数据。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-17T10:00:15.907

猜猜你要找的是`json_decode()`

查看[http://php.net/manual/en/function.json-decode.php](http://php.net/manual/en/function.json-decode.php)了解内部工作原理

# javascript - How to create random-salt-hash with crypto

> ID：11520126
> 
> 赞同：21
> 
> 时间：2012-07-17T09:58:00.490
> 
> 标签：javascript, node.js, cryptography, node-crypto

I want to create a salt-hash using node.js crypto lib without having to parse any hardcoded data.

What do I mean with hardcoded?

```
var salt, hardcodedString = "8397dhdjhjh";
crypto.createHmac('sha512', hardcodedString).update(salt).digest("base64"); 
```

Isn't there any other way how I can create a random string without using raw javascript, random functions or hardcoding something?

Regards

**UPDATE**

```
var Crypto = require('crypto')
    , mongoose = require('mongoose');

module.exports = mongoose.model('User', new mongoose.Schema({
    username: {
        type: String
        , required: true
        , index: { unique: true, sparse: true }
        , set: toLower
    },
    email: {
        type: String
        , required: true
        , index: { unique: true, sparse: true }
        , set: toLower
    },
    salt: {
        type: String
        , set: generateSalt
    },
    password: {
        type: String
        , set: encodePassword
    }
}),'Users');

function toLower(string) {
    return string.toLowerCase();
}

function generateSalt() {
    //return Math.round((new Date().valueOf() * Math.random())) + '';
    Crypto.randomBytes('256', function(err, buf) {
        if (err) throw err;
        return buf;
    });
    // return Crypto.randomBytes('256'); // fails to
}

function encodePassword(password) {
    return password;
    // TODO: setter has no access to this.salt
    //return Crypto.createHmac('sha512', salt).update(password).digest("base64");
}

function authenticate(plainPassword) {
    return encodePassword(plainPassword) === this.password;
} 
```

* * *

## 回答 #1

> 赞同：41
> 
> 时间：2012-07-17T11:21:25.857

快速浏览一下文档就会发现这个[`crypto.randomBytes`](http://nodejs.org/api/crypto.html#crypto_crypto_randombytes_size_callback)功能。

```
var buf = crypto.randomBytes(16); 
```

这将返回一个包含原始字节的缓冲区。如果你想要一个字符串，你可以使用`toString('base64')`or `toString('hex')`。

# jquery - combobox.ui Jquery start autocomplete on focus

> ID：11520127
> 
> 赞同：1
> 
> 时间：2012-07-17T09:58:04.567
> 
> 标签：jquery, jquery-ui, jquery-plugins

i'm working on combox.ui which was earlier changed by one of my senior. He changed js file according to our project's needs.But my need is now whenever someone focus on dropdown --Select -- should be removed from list and autocomplete search should start and whenever focus is out of dropdown or input --Select-- should be added at its place. Please tell me where i'm doing wrong and where this function should be written. I've no idea where to write this function in this plugin code..

```
(function ($) {
$.widget("ui.combobox", {
    options: {
        maxOptionSize: 20,
        maxOptionText: "... type to filter"
    },
    _create: function () {
        var self = this,
            select = this.element.hide(),
            selected = select.children(":selected"),
            maxOptionValue = select.children().eq(0).val(),
            value = selected.val() ? selected.text() : "";

        select.wrap("<div style='float:left;'></div>");

        var width = $(select).width();
        if (width == 0)
            width = 100;

        if (this.element.attr('disabled') == 'disabled') {/*To handle disabled case */
            input = this.input = $("<input type='textbox'>").addClass("textbox").attr("disabled", "disabled").insertAfter(select).val(value).attr("title", value);
            return; /*Do not render autocomplete*/
        }
        var input = this.input = $("<input>").insertAfter(select).val(value).attr("title", value).autocomplete({
            delay: 0,
            minLength: 0,
            source: function (request, response) {
                var matcher = new RegExp($.ui.autocomplete.escapeRegex(request.term), "i");
                var select_el = select.get(0); // get dom element
                var rep = new Array(); // response array
                input.data("autocomplete").showMaxOption = false;
                // simple loop for the options
                for (var i = 0; i < select_el.length; i++) {
                    var text = select_el.options[i].text;
                    // add element to result array
                    if (select_el.options[i].value && (!request.term || matcher.test(text))) {
                        rep.push({
                            label: text, //.replace(new RegExp("(?![^&;]+;)(?!<[^<>]*)(" + $.ui.autocomplete.escapeRegex(request.term) + ")(?![^<>]*>)(?![^&;]+;)", "gi"), "<strong>$1</strong>"),
                            value: text,
                            option: select_el.options[i],
                            number: i + 1
                        });
                    }
                    if (rep.length == self.options.maxOptionSize) {
                        input.data("autocomplete").showMaxOption = true;
                        input.data("autocomplete").maxOptionText = self.options.maxOptionText;
                        break;
                    }
                }
                // send response
                response(rep);
            },
            select: function (event, ui) {

                if (ui.item.value == maxOptionValue) {
                    input.data("autocomplete").term = "";
                    var selValue = select.find("option:selected").text();
                    $(this).val(selValue).attr("title", selValue);

                    return false;
                } else {
                    ui.item.option.selected = true;
                    self._trigger("selected", event, {
                        item: ui.item.option
                    });
                }
            },
            focus: function (event, ui) {

                if (ui.item.value == maxOptionValue) {
                    return false;
                }
            },
            change: function (event, ui) {

                if (!ui.item) {
                    var matcher = new RegExp("^" + $.ui.autocomplete.escapeRegex($(this).val()) + "$", "i"),
                        valid = false;
                    select.children("option").each(function () {
                        if ($(this).text().match(matcher)) {
                            this.selected = valid = true;
                            select.change();
                            return false;
                        }
                    });
                    if (!valid) {
                        input.data("autocomplete").term = "";
                        var selValue = select.find("option:selected").text();
                        $(this).val(selValue).attr("title", selValue);
                        return false;
                    }
                } else {
                    var selValue = select.find("option:selected").text();
                    $(this).attr("title", selValue);
                }
            },
            close: function (event, ui) {
                if (event.originalEvent && event.originalEvent.type === "menuselected") {
                    $(select).change();
                }
            }
        }).addClass("ui-widget ui-widget-content ui-corner-left").width(width);

        input.data("autocomplete")._renderItem = function (ul, item) {
            return $("<li></li>").data("item.autocomplete", item).append("<a>" + item.label + "</a>").appendTo(ul);
        };

        this.button = $("<button type='button'>&nbsp;</button>").attr("tabIndex", -1).attr("title", "Show Items").insertAfter(input).button({
            icons: {
                primary: "ui-icon-triangle-1-s"
            },
            text: false
        }).removeClass("ui-corner-all").addClass("ui-corner-right ui-button-icon").click(function () {
            // close if already visible                
            if (input.autocomplete("widget").is(":visible")) {
                input.autocomplete("close");
                return;
            }

            // work around a bug (likely same cause as #5265)
            $(this).blur();

            // pass empty string as value to search for, displaying all results
            input.autocomplete("search", "");
            input.focus();
        });

        var iw = input.outerWidth(true);
        var bw = this.button.outerWidth(true);
        select.parent().width(iw + bw + 1);
    },
    destroy: function () {
        this.input.remove();
        this.button.remove();
        this.element.show();
        $.Widget.prototype.destroy.call(this);
    }
});
})(jQuery);
(function ($) {
$.extend($.ui.autocomplete.prototype, {
    _renderMenu: function (ul, items) {
        var self = this;
        $.each(items, function (index, item) {
            if (index < items.length)
                self._renderItem(ul, item);
        });
        if (self.element.data("autocomplete").showMaxOption) {
            ul.append("<li class='ui-autocomplete-max-option'>" +       self.element.data("autocomplete").maxOptionText + "</li>");
        }
    }
});
})(jQuery); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-07T15:57:01.753

I think this is what you were asking for, --SELECT-- is removed on focus, and added back on blur.

[http://jsfiddle.net/nickaknudson/fsRn4/](http://jsfiddle.net/nickaknudson/fsRn4/)

**UPDATE:**

Show search on focus, and adds --SELECT-- only if another option is not selected.

[http://jsfiddle.net/nickaknudson/fsRn4/4/](http://jsfiddle.net/nickaknudson/fsRn4/4/)

**Resources:**

*   [http://jqueryui.com/demos/autocomplete/combobox.html](http://jqueryui.com/demos/autocomplete/combobox.html)
*   [https://stackoverflow.com/a/11859219/922168](https://stackoverflow.com/a/11859219/922168)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-08T06:57:50.210

只需`$(input).autocomplete('search','');`在输入的 onfocus() 事件中添加，只要输入处于焦点，这将打开组合框。所以基于尼克的小提琴，它会像`input.focus(function(event) { $(this).val(''); $(input).autocomplete('search',''); });`

这是工作示例：http: [//jsfiddle.net/fsRn4/3/](http://jsfiddle.net/fsRn4/3/)

# jquery - 生成 CSS 切换到下拉菜单？

> ID：11520130
> 
> 赞同：0
> 
> 时间：2012-07-17T09:58:10.980
> 
> 标签：jquery, css

我目前正在使用此代码为我的网站生成 CSS 切换。我想知道是否有办法修改它以生成下拉菜单，而不是为想要在较小窗口中查看页面或屏幕分辨率较小的人节省空间。

```
 function buildCssToggles() {
            $.each($("[rel=stylesheet]"), function(index, value) { $("#css-display").append($("<input type='button' value='"+value.title+"' onclick='setCss(\""+value.title+"\");'></input>")); });
        } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-17T10:08:35.787

```
function buildCssToggles() {
  var dropdown = $( "<select>" );
  dropdown.change( function () {
    setCss( $(this).children( ":selected" ).val() );
  });
  $( "[rel=stylesheet]" ).each( function ( i, value ) {
    dropdown.append( "<option value='" + value.title + "'>" + value.title + "</option>" );
  });
  $( "#css-display" ).append( dropdown );
} 
```

# node.js - 错误：禁止 SendStream.error

> ID：11520133
> 
> 赞同：3
> 
> 时间：2012-07-17T09:58:25.927
> 
> 标签：node.js, static, express

添加静态文件夹时 app.use(express.static(__dirname + '/static')); 我收到错误错误：Forbiddenat SendStream.error

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-17T09:59:39.233

已知问题[https://github.com/visionmedia/express/issues/1229](https://github.com/visionmedia/express/issues/1229)。

快速修复是使用 app.use(express.static( __dirname + '\\static'));

# php - PHP > MySQL 浮点分隔符本地化问题

> ID：11520134
> 
> 赞同：-2
> 
> 时间：2012-07-17T09:58:27.937
> 
> 标签：php, mysql, floating-point, locale, decimal-point

我已经看到一些关于人们试图让 MySQL 使用“，”作为浮点分隔符的问题——我想要做的是**阻止**PHP 在运行在“nl_NL”语言环境下的网站上使用它。

所以在代码中 PHP 正在编写一个 SQL 查询，结尾如下：

```
" ... HAVING `relevance` >= {$fFloatingPointNumber}"; 
```

问题是，因为 PHP 的语言环境在将浮点数转换为使用 ',' 作为分隔符（例如 1,5）的字符串时以 'nl_NL' 运行。

我目前正在做的是防止这种情况：

```
" ... HAVING `relevance` >= " . number_format($fFloatingPointNumber, 2, '.', ''); 
```

有没有更好的方法来做到这一点 - 或者这是我最好的选择？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-17T10:11:06.807

你能试试这个或类似的东西吗？归功于卢多维科·格罗西

```
<?php
setlocale(LC_ALL, 'nl_NL');
setlocale(LC_NUMERIC, 'en_GB'); //overwrite the decimal separator
?> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-17T10:18:57.643

**解决方案 1**

我会发布我的答案，以防它是除@Pete 之外的唯一解决方案。

我建议在每次查询之前将语言环境切换为 GB 或其他一些以句点分隔的浮点/双语言环境，然后在之后切换回正确的语言环境。我想不出任何其他方式来解决这个问题。

**解决方案 2（最佳选择）**

您始终可以使用以下`number_format`方法

```
$stringversion = number_format($theFloat, 2, ".",""); 
```

很确定这会起作用，文档在这里[http://php.net/manual/en/function.number-format.php](http://php.net/manual/en/function.number-format.php)

# python - Recursive solution to 8 queens

> ID：11520137
> 
> 赞同：-1
> 
> 时间：2012-07-17T09:58:35.017
> 
> 标签：python, algorithm, recursion

I am learning recursion coding, and I tried a test for myself- the 8-queen puzzle. I check if there is conflict at each step, and backtrack if there is a conflict. But it seems that my code stops backtracking prematurely.

* * *

First, I have:

```
0000
0000
0000
0000 
```

then it changes to:

```
1000
0000
0000
0000 
```

and then it changes to:

```
1100
0000
0000
0000 
```

Now the conflict function returns True, and the function stops. Why isn't it calling `solve_queen(grid)` with:

```
1010
0000
0000
0000 
```

I think there is something wrong with the two `for` loops in `solve_queen(grid)` but I can't get exactly where it went wrong.

My code follows.

* * *

```
import copy

q4_zero = [[0,0,0,0],
           [0,0,0,0],
           [0,0,0,0],
           [0,0,0,0]]

def format_failed(grid):
    if len(grid) != len(grid[0]):
        return True
    elif len(grid) < 4:
        return True
    return False

def row_conflict(grid):
    for row in grid:
        if row.count(1) > 1:
            return True
    return False 

def col_conflict(grid):
    new_grid = [[r[col] for r in grid] for col in range(len(grid[0]))]
    return row_conflict(grid)

def oblique_conflict(grid):
    i_lst = []
    j_lst = []
    row_count = len(grid)
    for i in xrange(row_count):
        if grid[i].count(1) > 0:
            j = grid[i].index(1)
            i_lst.append(i)
            j_lst.append(j)

    for k in xrange(len(i_lst)):
        for m in xrange(len(i_lst) - 1):
            if abs(i_lst[m] - i_lst[m + 1]) == abs(j_lst[m] - j_lst[m + 1]):
                return True

    return False

def conflict(grid):
    if format_failed(grid):
        return True
    elif row_conflict(grid):
        return True
    elif col_conflict(grid):
        return True
    elif oblique_conflict(grid):
        return True
    return False

def solve_queen(__grid):

    res = conflict(__grid)

    if res is True:
        return res

    grid = copy.deepcopy(__grid)
    N = len(grid)

    for i in xrange(N):
        for j in xrange(N):
            if grid[i][j] == 0:
                grid[i][j] = 1
                final_answer = solve_queen(grid)
                if final_answer is not True:
                    return final_answer

                return True

    return grid

print solve_queen(q4_zero) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-17T10:49:40.660

您永远不会将网格单元设置回零。那么回溯应该如何工作呢？

此外，您有一个嵌套循环`solve_queen()`，但`solve_queen()`应该是一个递归函数。使用循环或使用递归。

此外，您在`solve_queen()`. 除了`conflict()`，您还需要一个`is_solved()`告诉您何时停止的函数：

```
if not is_solved(grid):
    return solve_queen(grid)
else return grid 
```

在旁注中，皇后问题更有效地表示为整数数组，其中索引表示行，值表示列。例如，grid[3] 将告诉您第 4 行中皇后的相关列。

使用这种表示，检查冲突要容易得多。此外，您节省了空间，如果您从 4 个皇后增加到 100 亿个，这可能会派上用场。;-)

最后，您绝对应该阅读有关递归和回溯的内容。我怀疑你是否真的理解这些概念中的任何一个。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-17T10:47:50.457

```
for i in xrange(N):
        for j in xrange(N):
            if grid[i][j] == 0:
                grid[i][j] = 1
                final_answer = solve_queen(grid)
                if final_answer is not True:
                    return final_answer

                return True 
```

假设在以下情况下`solve_queen(grid)`返回`True`（确实如此）`grid`：

```
1100
0000
0000
0000 
```

所以，你设置`final_answer = True`.
既然`final_answer is not True`不满足，就跳过这一行，直接下一行：

```
return True 
```

因此，由于这条线，您的回溯解决方案实际上是在第一次失败后停止递归。

**该怎么办？**
提示：您应该预先定义一个基本子句 - 递归何时成立（提示：在您放置 n 个皇后后 - 并在这种情况下返回答案。
如果您发现解决方案错误 - 不要破坏它，只需继续迭代。`True`如果您仅用尽了所有可能性，则应返回a （因此该`return True`语句应超出`for`循环范围）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-17T10:14:15.843

我不知道这是否会有所帮助，但是...您是否尝试过使用不同的数据表示？

8-queen 问题不需要整个 8x8 网格。由于每个皇后将排在不同的行中，因此您只需要一个带有皇后列的 8 数组。

我不了解 Python，所以在这一点上我无法为您提供帮助，但是更改数据格式可能会解决您的问题。

# dependency-injection - Guice 注入器中的多个单例实例

> ID：11520140
> 
> 赞同：0
> 
> 时间：2012-07-17T09:58:44.273
> 
> 标签：dependency-injection, guice

我们有一个 Jetty/Jersey 应用程序。我们正在将其转换为使用 Guice for DI。问题：我们需要多个 Singleton 类的实例。问题：实例的数量是从配置文件中动态确定的。因此我们不能对不同的实例使用注解。

```
 final InjectedClass instance = injector.getInstance(InjectedClass.class); 
```

这是注入器的标准语法。我需要类似的东西

```
 final String key = getKey();
 final InjectedClass instance = injector.getInstance(InjectedClass.class, key); 
```

有一种方法可以从 Guice 获取实例`Key.class`

```
 final InjectedClass instance = injector.getInstance(Key.get(InjectedClass.class, <Annotation>); 
```

但问题是我需要一些动态注释，而不是预定义的。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-17T11:20:55.760

您可以尝试使用 Provider 或 @Provides 方法来创建所有实例的映射。当实例数量达到配置文件中定义的数量时，您将不会创建任何新实例，而是从地图返回旧实例。

例如，这样的事情可以帮助你。

```
public class MyObjectProvider implements Provider<MyObject> {
  private final Injector inj;
  private int counter;
  private final int maxNum = 5;
  private List<MyObject> myObjPool = new ArrayList<MyObject>();

  @Inject
  public MyObjectProvider(Injector inj) {
    this.connection = connection;
  }

  public MyObject get() {
    counter = counter+1%maxNum;
    if(myObjPool.size()=<maxNum) {
      MyObject myobj = inj.getInstance(MyObject.class);
      myObjPool.add(myobj);
      return myobj;
    } else {
       return myObjPool.get(counter);
    }
  }
} 
```

PS我从头上写了这个，所以它可能无法编译，这只是一个想法。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-17T14:35:22.343

您可以通过创建工厂来解决此问题。在我的示例中，我使用了名为[multibindings的 guice 扩展](http://code.google.com/p/google-guice/wiki/Multibindings)

```
interface InjectedClassFactory {
    public InjectedClass get(String key);
}

class InjectedClass {}

class InjectedClassFactoryImpl implements InjectedClassFactory{
    private final Map<String, InjectedClass> instances;

    @Inject
    InjectedClassFactoryImpl(Map<String, InjectedClass> instances) {
        this.instances = instances;
    }

    @Override
    public InjectedClass get(String key) {
        return instances.get(key);
    }
}

class MyModule extends AbstractModule {

    @Override
    protected void configure() {
        MapBinder<String, InjectedClass> mapBinder =
                MapBinder.newMapBinder(binder(), String.class, InjectedClass.class);

        //read you config file and retrieve the keys
        mapBinder.addBinding("key1").to(InjectedClass.class).in(Singleton.class);
        mapBinder.addBinding("key2").to(InjectedClass.class).in(Singleton.class);
    }
} 
```

# c++ - 当 CPU 负载为 100%（主要使用 C++ 和 Qt）时，如何保持 UI 响应？

> ID：11520141
> 
> 赞同：10
> 
> 时间：2012-07-17T09:58:47.640
> 
> 标签：c++, qt, user-interface, freeze

我在需要在多线程应用程序中保持 UI（和完整操作系统）响应之间存在问题。

我正在开发一个应用程序（基于 c++ 和 Qt），它同时接收和转换来自多个流的大量视频帧。

每个流都在其自己的单独工作线程中检索、转换和渲染（使用 DirectX）。这意味着我没有使用默认的 GUI 线程来渲染框架。

在功能强大的计算机上我没有问题，因为 cpu 可以处理所有数据并为 GUI 线程处理用户请求留出时间。但在一台旧电脑上，它不起作用，CPU 100% 用于处理我的数据，并且 UI 滞后，可能需要 10 秒才能处理按钮单击。

我想保持我的 UI 响应。事实上，我希望我的工作线程只有在没有其他操作可做的情况下才能工作。我试图将工作线程优先级更改为低，但它不起作用。我还在工作线程中尝试了 sleep(10)，但是因为我可以有很多线程，它们不会同时进入睡眠状态，所以它也不起作用。

在这种情况下保持 UI 响应的最佳方法是什么（无论工具包使用什么）？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-17T12:38:47.643

无法在上面的列表中添加我的评论，所以我必须在这里添加我的几分钱：

*   如果您希望操作系统更具响应性，请确保您不会消耗太多 RAM 并以较低优先级启动进程 - 仅当操作系统必须决定应该运行进程中的哪个线程时才考虑 afaik 线程优先级，但整个进程仍然有效考虑到系统中的其他进程时，在 100% cpu 上
*   确保不要运行太多线程，好的解决方案是创建尽可能多的使用 100% cpu 的线程，如果你想要更多，那么使用多任务技术

要检查的一件事-您如何进行视频显示？您是否确保您的显示速率（来自流的数据）与显示卡的刷新率相匹配？当您有数据要显示时，您是通知主线程需要更新屏幕（更好的解决方案）还是强制每个线程显示框架（错误的解决方案）？

# objective-c - 如何翻转 iPad 应用程序中的按钮

> ID：11520144
> 
> 赞同：-1
> 
> 时间：2012-07-17T09:59:02.423
> 
> 标签：objective-c, ipad, ios5, uiviewanimation

我的 iPad 应用程序中有十个小的矩形按钮。

当我触摸任何按钮时，它应该进行翻转动画（翻转**180 度**），还有一个名为**rotateAll**的按钮，单击此所有按钮应翻转 2 秒并再次回到初始状态，我该如何实现？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-17T11:30:18.477

您可以使用从一个视图到另一个视图的过渡来创建翻转效果，如下所示

```
[UIView transitionFromView:buttonViewYouAreFlippingAwayFrom 
                    toView:backgroundViewYouAreFlippingTo
                  duration:0.5 // How long the flip should take
                   options:UIViewAnimationOptionTransitionFlipFromLeft |
                           UIViewAnimationOptionShowHideTransitionViews
                completion:^(BOOL finished){
                    // you could do the reverse here after two seconds 
                    // or maybe something else ...
                  }]; 
```

默认情况下，from 视图将被添加，to 视图将从超级视图中删除，但如果您知道它们会翻转，您可以添加`UIViewAnimationOptionShowHideTransitionViews`to，而不是让视图仅在转换时显示和隐藏。

翻转所有按钮最简单的方法是遍历所有按钮并对它们进行相同的转换。

# tcl - 搜索非常量正则表达式

> ID：11520145
> 
> 赞同：1
> 
> 时间：2012-07-17T09:59:05.317
> 
> 标签：tcl

我想在文件中查找模式，但模式可以有多种形式。这是代码：

```
while {[gets $thefile line] >= 0} {
     for {set nb_table 1} {$nb_table<$count_table} {incr nb_table} {
          if { [regexp {pattern_$nb_table} $line] } {
          puts "I found one !"
          }
     }
} 
```

var`$count_table`是已知的，之前在其他过程中被捕获。

如果我`pattern_$nb_table`在 for 循环中执行 put，我会得到所有表的名称，这很好，但我从来没有`I found one!`打印出来（确定我想成为另一个进程，但它不是主题）。为什么我从来不进去`if`？我的文件包含模式：`pattern_1 pattern_2 .....`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-17T10:12:06.873

问题是变量没有被替换到正则表达式中（`{`…<code>} 禁用所有立即替换）。这是您将使用的情况（为了清楚起见，将变量名称放在大括号中，并将模式放在双引号中*仅*用于突出显示）：

```
if {[regexp "pattern_${nb_table}" $line]} { ... } 
```

除了如果我正在寻找一个简单的字符串，我会尝试使用`string first`or `string match`：

```
if {[string first "pattern_${nb_table}" $line] >= 0} { ... } 
```

```
if {[string match "*pattern_${nb_table}*" $line]} { ... } 
```

只要您做一些简单的事情，这两者都比正则表达式匹配更快。如果其余的*真正* `pattern`是一个正则表达式，只有`regexp`会做。当然。

# javascript - 在悬停时交换图像时如何淡化“this.src.replace”（jQuery）

> ID：11520150
> 
> 赞同：0
> 
> 时间：2012-07-17T09:59:32.237
> 
> 标签：javascript, jquery, image

> **可能重复：**
> [jQuery 淡入淡出到新图像](https://stackoverflow.com/questions/1977557/jquery-fade-to-new-image)

我有以下代码可以在悬停时交换（预加载）图像：

```
$(document).ready(function() { 
$(".pf-item img").hover(
      function(){this.src = this.src.replace(".jpg","-h.jpg");},
      function(){this.src = this.src.replace("-h.jpg",".jpg");
 });
 var imgSwap = [];
 $(".img-swap").each(function(){
    imgUrl = this.src.replace(".jpg","-h.jpg");
    imgSwap.push(imgUrl);
});
$(imgSwap).preload();
});
$.fn.preload = function() {
this.each(function(){
    $('<img/>')[0].src = this;
});
} 
```

它工作得非常好，但是我希望能够在图像 .jpg 和 -h.jpg 之间淡化。

有谁知道如何做到这一点/有更好的方法来解决这个问题？我尝试了很多不同的 fadeIn() 方法，但似乎都不起作用，或者工作了几次悬停，然后替换空白图像。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-17T10:05:09.607

我建议使用 mouseover/mouseout 方法。

我的 HTML 是这样设置的。

```
<div class="imageWrap">
    <img class="shown" src="image-1.jpg" width="300" height="300" />
    <img class="hidden" src="image-2.jpg" width="300" height="300" />
</div> 
```

然后使用 jQuery 你可以像这样在它们之间交换

```
$(".imageWrap").mouseover(function() {
    $(this).children(".shown").fadeOut("fast");
    $(this).children(".hidden").fadeIn("fast");
});

$(".imageWrap").mouseout(function() {
    $(this).children(".shown").fadeIn("fast");
    $(this).children(".hidden").fadeOut("fast");
}); 
```

不要忘记你的CSS

```
.imageWrap {width:300px; height:300px;}
.imageWrap > img {position:absolute;}
.imageWrap > .hidden {display:none;} 
```

# java - 我们可以在没有 Try and Catch 的情况下只使用 finally 块吗？

> ID：11520162
> 
> 赞同：-3
> 
> 时间：2012-07-17T10:00:11.087
> 
> 标签：java

我们可以只使用 finally 块而不添加 Try 和 Catch 块吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-17T10:01:39.793

不，我们不可以。肯定是：

```
try {}
catch {}
finally {} 
```

或者

```
try {}
finally {} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-17T10:03:00.423

该`try`块定义了后续`finally`应用的代码区域。您的建议只会相当于一些薄的语法糖，其中前面的整个代码块`finally`将隐式包装在`try`.

该`catch`块是可选的。

# android - 为什么 apk 与 Gigabyte GSmart G1345 的 Google Play 不兼容

> ID：11520168
> 
> 赞同：0
> 
> 时间：2012-07-17T10:00:22.647
> 
> 标签：android, android-manifest, google-play

除了**活动**之外的**AndroidManifest**是：

 **```
<manifest android:installLocation="auto"
      android:versionCode="1"
android:versionName="1.1"
package="..."
xmlns:android="http://schemas.android.com/apk/res/android">
<uses-sdk android:minSdkVersion="7"
          android:targetSdkVersion="8"/>

<uses-permission android:name="android.permission.ACCESS_FINE_LOCATION"/>
<uses-permission android:name="android.permission.ACCESS_COARSE_LOCATION"/>
<uses-permission android:name="android.permission.ACCESS_NETWORK_STATE"/>
<uses-permission android:name="android.permission.INTERNET"/>
<uses-permission android:name="android.permission.GET_TASKS"/>
<uses-permission android:name="android.permission.READ_PHONE_STATE"/>
<uses-permission android:name="android.permission.CALL_PHONE"/>
<uses-feature android:name="android.hardware.telephony" android:required="false" />

<application android:hardwareAccelerated="true"
    android:icon="@drawable/ic_launcher"
    android:label="@string/app_name"
    android:name=".MyApp"
    android:theme="@style/app_theme">
    <uses-library android:name="com.google.android.maps"
                  android:required="true"/>
    <activity android:label="@string/app_name"
        android:name=".general.StartActivity"
        android:noHistory="true"
        android:configChanges="orientation|keyboardHidden"
        android:theme="@android:style/Theme.NoTitleBar.Fullscreen">
        <intent-filter>
            <action android:name="android.intent.action.MAIN"/>
            <category android:name="android.intent.category.LAUNCHER"/>
        </intent-filter>
    </activity>
... 
```

![在此处输入图像描述](../Images/c38d8582cff29ae5b3eca2f517add820.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-17T10:07:38.497

在开发者控制台中，关闭选项复制保护。对我来说，它正在工作，Acer Iconita Tab a500，愚蠢地没有应用在市场上，浏览器的链接说“不兼容”。谷歌支持建议禁用复制保护（此选项不显示适用于 root 设备的应用程序）。**

# ruby - 有没有办法在葡萄上修改或发送自定义标题？

> ID：11520169
> 
> 赞同：2
> 
> 时间：2012-07-17T10:00:32.297
> 
> 标签：ruby, goliath, grape-api

我正在使用歌利亚和葡萄。在我的 goliath 服务器上，它像这样调用葡萄 api：

```
when '/posts' then FrameworksAPI::API.call(env) 
```

在我的葡萄 api 类上，我的方法很简单：

```
get '/:id' do
 Post.find(params[:id])
end 
```

我想修改标题 - 特别是“内容长度”，但不确定如何修改。

另外我想问一个额外的问题。如何在方法 GET 返回我想修改结果的结果之前专门创建回调/过滤器。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-13T18:52:33.560

Grape 现在`header`有几个版本的助手。

```
header 'Content-Length`, 42.to_s 
```

关于修改正文的第二个问题，请尝试`after do ...`在 API 级别使用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-07T05:40:43.307

FrameworksAPI::API.call(env) 方法的返回值将是三元组 [status_code, headers, body]。因此，您不仅可以从您的案例中返回它，还可以执行以下操作：

```
when '/posts' then
  status, headers, body = FrameworksAPI::API.call(env)
  headers['whatever'] = blah
  [status, headers, body] 
```

您也可以更改主体，只是要小心，因为主体可能是一个数组。

Goliath 还提供了一个 Content-Length 中间件。默认情况下会加载 Content-Length，但如果您设置自定义 Content-Length 它将优先。请注意，在您设置内容长度后，其他中间件（如格式）不会更改正文。

# google-app-engine - 使用 Mocha 对 OAuth JS 进行单元测试

> ID：11520170
> 
> 赞同：1
> 
> 时间：2012-07-17T10:00:34.133
> 
> 标签：google-app-engine, node.js, mocha.js

我正在开发一个基于 JS 的项目，该项目在 GAE 上运行，部分代码使用 Facebook、Twitter 或 Google 的 OAuth 获取用户的头像。我正在尝试在 Mocha 中编写测试以对此进行测试，但我遇到了一些问题。

当我在前端测试代码时，代码可以工作，我设想它的工作方式是使用 ZombieJS 在 GAE 上运行应用程序`dev_appserver.py`，触发 OAuth 函数，填写适当的身份验证内容，然后通过返回完成测试图片网址。

然而，我遇到的第一个障碍是NodeJS 的服务器*似乎*不允许 GAE 的服务器在相同的 IP 地址上运行。例如：

```
exec 'dev_appserver.py .', ->
    console.log arguments 
```

这将返回错误“地址已在使用中”。除了在不同的机器上运行它之外，我怎样才能解决这个问题？是否可以告诉 NodeJS 不保留整个 IP 而只保留一个端口？我正在运行 GAE，`8080`当它不被 NodeJS 调用时它工作正常。

第二个问题是 ZombieJS。我试图找出一种可以在打开新窗口时*收听*的方法，本质`tail`上是浏览器的控制台。我已经在 Google 群组上发起了两次讨论，但尚未有人回复（https://groups.google.com/forum/?hl=en#!topic/zombie-js/cJklyMbwxRE 和[https://groups.google .com/forum/?hl=en#!topic/zombie-js/tOhk_lZv5eA](https://groups.google.com/forum/?hl=en#!topic/zombie-js/tOhk_lZv5eA) )

虽然后者并不像我能找到解决它的方法那么*重要*（我希望），但前者是主要问题，所以我非常感谢任何关于如何解决这个地址冲突的方向。

这是我的 NodeJS 脚本：

```
exec = ( require 'child_process' ).exec
fs = require 'fs'
should = require 'should'
yaml = require 'yaml'
Zombie = require 'zombie'

common  = require '../../static/assets/js/common'

url = 'ahmeds.local'

browser = new Zombie()
config = null
consoleCb = 'function consoleSuccess(){console.log("success",arguments)}function consoleFailure(){console.log("failure",arguments)}'

browser.debug = true
browser.silent = false

fs.readFile '../../config.yaml', (error, data) ->
    config = yaml.eval data.toString 'ascii'

    exec 'cd ../../ && dev_appserver.py -a ' + url + ' .', ->
        console.log arguments

        # browser.visit config.local.url, ->
        browser.visit 'http://' + url + ':8080', ->
            browser.evaluate consoleCb

            browser.evaluate 'profileImage("facebook",consoleSuccess,consoleFailure)'

            console.log browser.window.console.output 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-19T18:21:01.550

我对 NodeJS 的熟悉程度有限，但我只是测试了在同一台机器上运行 NodeJS 服务器和 App Engine 本地开发服务器——它工作得很好。在没有看到您的 NodeJS 代码的情况下，我猜您也在尝试在端口 8080 上运行 NodeJS，因此 App Engine 服务器在启动时会抱怨（8080 是默认值，并且您注意到它是您正在使用的端口）。

尝试将`--port=8081`（或其他端口）传递给您对 dev_appserver.py 的调用，它应该可以解决冲突。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-20T01:00:33.477

您显示的代码中的任何内容（除了 的调用`dev_appserver`）甚至都不应该在任何端口上侦听（除非僵尸实现了用于远程调试的“服务器”或类似的东西）。看起来端口冲突来自其他地方。

请注意，zombie 自己的 Mocha 测试框架确实设置了一个快速服务器，所以如果你正在使用它或从它提取的代码，那可能就是这样做的。

关于谁绑定到哪个端口，netstat 有什么要说的？

# objective-c - 如何在目标 c 中解析 asp.net webservice 返回的 xml 字符串？

> ID：11520171
> 
> 赞同：0
> 
> 时间：2012-07-17T10:00:33.697
> 
> 标签：objective-c, xml-parsing

嘿，任何人都可以请帮帮我。我是 xcode 的新手（目标 c），我正在使用 asp.net Web 服务，我只是将该服务中的 3 个文件名返回到我的 xcode 项目中。现在我想做的是解析生成的 Web 服务数据以 XML 格式转换为 xcode 中的简单字符串。

我的 xml 字符串是

```
<?xml version="1.0" encoding="utf-8"?>
<ArrayOfString xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns="http://tempuri.org/">
  <string>Desert.jpg</string>
  <string>Koala.jpg</string>
  <string>Tulips.jpg</string>
</ArrayOfString> 
```

我在 ma xcode 项目中有四个类文件，如下所示

**图像保存测试视图控制器.m 文件**

```
//
//  ImageSaveTestViewController.m
//  ImageSaveTest
//
//  Created by Kiichi Takeuchi on 4/4/10.
//  Copyright ObjectGraph LLC 2010\. All rights reserved.
//

#import "ImageSaveTestViewController.h"

@implementation ImageSaveTestViewController

- (void)viewDidLoad {
    [super viewDidLoad];

    NSString *urlString = @"http://192.168.3.106/local_storage/Webservice1.asmx/HelloWorld";
    NSURL *url = [NSURL URLWithString:urlString];
    NSMutableURLRequest *request = [NSMutableURLRequest requestWithURL:url];
    [request setHTTPMethod: @"POST"];
    [request setValue:@"application/json" forHTTPHeaderField:@"Accept"];
    [request setValue:@"application/x-www-form-urlencoded" forHTTPHeaderField:@"Content-Type"];

    NSError *errorReturned = nil;
    NSURLResponse *theResponse =[[NSURLResponse alloc]init];
    NSData *data = [NSURLConnection sendSynchronousRequest:request returningResponse:&theResponse error:&errorReturned];

    if (errorReturned) 
    {
        //...handle the error
    }

        NSString *retVal = [[NSString alloc] initWithData:data encoding:NSUTF8StringEncoding];
        **NSLog(@"%@", retVal);**
//this is the retval which i want to convert in simple string.its containig that above xml file

        //...do something with the returned value        

    NSLog(@"Downloading...");
    // Get an image from the URL below

    id path = @"http://192.168.3.106/chmall/images/1.jpg";
    NSURL *url1 = [NSURL URLWithString:path];
    NSData *data11=[NSData dataWithContentsOfURL:url1];
    UIImage *img1=[[UIImage alloc] initWithData:data11];    

    //UIImage *image = [[UIImage alloc] initWithData:[NSData dataWithContentsOfURL:[NSURL URLWithString:@"192.168.3.106/chmall/images/1.jpg"]]];

    NSLog(@"%f,%f",img1.size.width,img1.size.height);

    // Let's save the file into Document folder. 
    // You can also change this to your desktop for testing. (e.g. /Users/kiichi/Desktop/)
     NSString *docDir = @"/Users/niketkapadia/Desktop";

    //NSString *docDir = [NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES) objectAtIndex:0];

    // If you go to the folder below, you will find those pictures
    NSLog(@"%@",docDir);

    NSLog(@"saving png");
    NSString *pngFilePath = [NSString stringWithFormat:@"%@/test.png",docDir];
    NSData *data1 = [NSData dataWithData:UIImagePNGRepresentation(img1)];
    [data1 writeToFile:pngFilePath atomically:YES];

    NSLog(@"saving jpeg");
    NSString *jpegFilePath = [NSString stringWithFormat:@"%@/test.jpeg",docDir];
    NSData *data2 = [NSData dataWithData:UIImageJPEGRepresentation(img1, 1.0f)];//1.0f = 100% quality
    [data2 writeToFile:jpegFilePath atomically:YES];

    NSLog(@"saving image done");

    [img1 release];
}

@end 
```

**appdeleget.m 文件**

```
//  ImageSaveTestAppDelegate.m
//  ImageSaveTest
//
//  Created by Kiichi Takeuchi on 4/4/10.
//  Copyright ObjectGraph LLC 2010\. All rights reserved.
//

#import "ImageSaveTestAppDelegate.h"
#import "ImageSaveTestViewController.h"

@implementation ImageSaveTestAppDelegate

@synthesize window;
@synthesize viewController;

- (void)applicationDidFinishLaunching:(UIApplication *)application {    

    // Override point for customization after app launch    
    [window addSubview:viewController.view];
    [window makeKeyAndVisible];
}

- (void)dealloc {
    [viewController release];
    [window release];
    [super dealloc];
}

@end 
```

**delagte.h 文件**

```
//
//  ImageSaveTestAppDelegate.h
//  ImageSaveTest
//
//  Created by Kiichi Takeuchi on 4/4/10.
//  Copyright ObjectGraph LLC 2010\. All rights reserved.
//

#import <UIKit/UIKit.h>

@class ImageSaveTestViewController;

@interface ImageSaveTestAppDelegate : NSObject <UIApplicationDelegate> {
    UIWindow *window;
    ImageSaveTestViewController *viewController;
}

@property (nonatomic, retain) IBOutlet UIWindow *window;
@property (nonatomic, retain) IBOutlet ImageSaveTestViewController *viewController;

@end 
```

**视图控制器.h**

```
//
//  ImageSaveTestViewController.h
//  ImageSaveTest
//
//  Created by Kiichi Takeuchi on 4/4/10.
//  Copyright ObjectGraph LLC 2010\. All rights reserved.
//

#import <UIKit/UIKit.h>

@interface ImageSaveTestViewController : UIViewController {

}

@end 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-17T11:21:39.507

[SudzC](http://sudzc.com/)能够从 WSDL 文件生成 Objective C 代码。它是一项在线服务，因此您可以上传或链接您的 WSDL 文件，并且您会获得一个带有可运行代码的 zip，以便与您的 Web 服务进行通信。

还有[很多](https://stackoverflow.com/questions/tagged/sudzc?sort=votes)标记为“sudzc”的问题。

* * *

您还可以使用`NSXMLParser`读取 XML：

[（演示）](http://ideone.com/Qor41)

```
#import <Cocoa/Cocoa.h>

@interface AOSParser : NSObject {
    NSMutableString *capturedCharacters;
    BOOL captureCharacters;

    NSString *text;
    NSMutableArray *items;
}

- (NSMutableArray *)parseXMLData:(NSData *)data parseError:(NSError **)error;

// NSXMLParserDelegate methods (NSXMLParser doesn't need an explicit protocol implementation)
- (void)parser:(NSXMLParser *)parser didStartElement:(NSString *)elementName namespaceURI:(NSString *)namespaceURI qualifiedName:(NSString *)qName attributes:(NSDictionary *)attributeDict;
- (void)parser:(NSXMLParser *)parser didEndElement:(NSString *)elementName namespaceURI:(NSString *)namespaceURI qualifiedName:(NSString *)qName;
- (void)parser:(NSXMLParser *)parser foundCharacters:(NSString *)string;
@end

@implementation AOSParser

- (NSMutableArray *)parseXMLData:(NSData *)data parseError:(NSError **)error {
    items = [NSMutableArray array];

    NSXMLParser *parser = [[NSXMLParser alloc] initWithData:data];
    [parser setDelegate:self];
    [parser setShouldProcessNamespaces:NO];
    [parser setShouldReportNamespacePrefixes:NO];
    [parser setShouldResolveExternalEntities:NO];

    [parser parse];

    if (error && [parser parserError]) {
        *error = [parser parserError];
    }

    //[parser release]; // Seems to be auto-released

    return [items retain];
}

// Called when a start-tag is found
- (void)parser:(NSXMLParser *)parser
        didStartElement:(NSString *)elementName
        namespaceURI:(NSString *)namespaceURI
        qualifiedName:(NSString *)qualifiedName
        attributes:(NSDictionary *)attributeDict {

    //NSLog(@"<%@>", elementName);

    if ([elementName isEqual:@"string"]) {
        captureCharacters = YES;
        capturedCharacters = [NSMutableString string];
    }

}

// Called when plain text is found
- (void)parser:(NSXMLParser *)parser
        foundCharacters:(NSString *)string {

    //NSLog(@"Text: %@", string);

    if (captureCharacters) {
        [capturedCharacters appendString:string];
    }
}

// Called when an end tag is found
- (void)parser:(NSXMLParser *)parser
        didEndElement:(NSString *)elementName
        namespaceURI:(NSString *)namespaceURI
        qualifiedName:(NSString *)qName {

    //NSLog(@"</%@>", elementName);

    if (captureCharacters) {
        captureCharacters = NO;
        text = [NSString stringWithString:capturedCharacters];
        [capturedCharacters release];
    }

    if ([elementName isEqual:@"string"]) {
        [items addObject:text];
    }
}

int main()
{
    NSAutoreleasePool *myPool = [[NSAutoreleasePool alloc] init];

    // Load the XML into a NSData
    NSString *xmlString = @"<?xml version=\"1.0\" encoding=\"utf-8\"?><ArrayOfString xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\" xmlns:xsd=\"http://www.w3.org/2001/XMLSchema\" xmlns=\"http://tempuri.org/\"><string>Desert.jpg</string><string>Koala.jpg</string><string>Tulips.jpg</string></ArrayOfString>";
    NSData *xmlData = [xmlString dataUsingEncoding:NSUTF8StringEncoding];

    AOSParser *parser = [[AOSParser alloc] init];

    NSError *error = nil;
    NSMutableArray *items = [parser parseXMLData:xmlData parseError:&error];

    if (error) {
        NSLog(@"Error: %@", [error localizedDescription]);
    }
    else {
        NSLog(@"Items: %@", items);
    }

    [parser release];
    [items release];

    [myPool drain];
    return 0;
}
@end 
```

**输出：**

> `Items: (Desert.jpg, Koala.jpg, Tulips.jpg)`

我的第一个 Objective C 程序。

# javascript - 1 页上的多个 Ajax 加载指示器

> ID：11520175
> 
> 赞同：3
> 
> 时间：2012-07-17T10:00:55.423
> 
> 标签：javascript, jquery

我有一个包含 2 个单独表单的页面，可以通过 Ajax (jQuery) 提交。对于这些表单中的每一个，我想向用户显示一个加载指示器。我找到了一段很好的代码，可以很容易地显示这些图标，但它只在有 1 个表单时才有效。

```
$('.ajaxloader').hide().ajaxStart(function () { 
    $(this).show(); 
}).ajaxStop(function () {
    $(this).hide(); 
}); 
```

ajaxloader 是一个将加载图像显示为 CSS 背景图像的类。要使用它，我只需要添加如下内容：`<span class="ajaxLoader">Busy ...</span>`

当我用我的页面（有 2 个表单）进行测试并提交其中一个时，两个加载指示器都会出现（这很明显）。现在我的问题是，如何显示需要显示的指标？我正在考虑给 span-tag 一个 id 属性，但后来我不知道如何继续。我希望它尽可能通用，因此我不必大量硬编码和重复代码。

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-17T10:17:36.993

您可以将“显示加载指示器”回调附加到 Ajax 查询本身，而不是像您当前的解决方案那样做“包罗万象”。

在你的`$.ajax()`电话中是这样的：

```
$.ajax("/form1/target", {
    beforeSend: function() {
        $(".ajax-loader-1").show();
    },
    complete: function() {
        $(".ajax-loader-1").hide();
    }
}); 
```

（对于您的第二种形式也是类似的，只要定义了 Ajax 调用）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-17T10:16:28.023

您是否考虑过在提交表单并隐藏另一个表单时启动它。

```
$('.yourSubmitButton').click(function () {
    $(this).parent().find('.ajaxLoader').show();
});

$('.ajaxloader').hide().ajaxStop(function () {
    $(this).hide(); 
}); 
```

因此加载器将显示在刚刚提交的表单中（我假设您正在使用按钮或链接进行提交？）然后当 ajax 请求停止时，两者都将再次隐藏。

# asp.net - 会话超时时注销用户

> ID：11520180
> 
> 赞同：1
> 
> 时间：2012-07-17T10:01:34.973
> 
> 标签：asp.net

这是否是会话超时时注销用户的正确方法。这是我在母版页的 Page_init 中编写的代码。而且，
会话状态和表单身份验证就像，

```
<sessionState mode="InProc" timeout="1" cookieless="false">
    </sessionState>

      <authentication mode="Forms">
          <forms loginUrl="Default.aspx" timeout="2880"/>
        </authentication>

    if (userToLogin != null)
                {
                    if (Context.Session != null)
                    {
                        if (Session.IsNewSession)
                        {
                          HttpCookie newSessionIdCookie = Request.Cookies["ASP.NET_SessionId"];
                            if (newSessionIdCookie != null)
                            {
                                string newSessionIdCookieValue = newSessionIdCookie.Value;

                                if (newSessionIdCookieValue != string.Empty)
                                {
                                    **System.Web.Security.FormsAuthentication.SignOut();**                                
                                    Response.Redirect("SessionTimeOutPage.htm");
                                }
                            }
                        }
                    }

                } 
```

请建议我这是正确的方法，或者某些东西可以作为最佳解决方案。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-17T10:33:22.227

将您的代码放入 Global.asax.cs

```
protected void Session_End(Object sender, EventArgs e)
{               

  HttpCookie authenticationCookie = Request.Cookies[FormsAuthentication.FormsCookieName];
  if (authenticationCookie != null)
  {
    FormsAuthenticationTicket authenticationTicket = FormsAuthentication.Decrypt(authenticationCookie.Value);
    if (!authenticationTicket.Expired)
    {
       // log-out the user...                  
    }
  }

} 
```

# java - 无法从另一个目录运行 ant

> ID：11520182
> 
> 赞同：0
> 
> 时间：2012-07-17T10:01:43.507
> 
> 标签：java, windows, ant, path, environment-variables

我正在使用 jboss 服务器制作一个小型 java 项目，并使用 ant 构建项目。我已经正确设置了环境变量 ANT_HOME、JAVA_HOME 和 JBOSS_HOME 并在 cmd 提示符下检查了它们。PATH 也已设置。唯一的问题是我无法从除 ant\bin 之外的任何其他目录运行 ant。我在命令提示符下收到以下消息：

“'ant' 不是内部或外部命令、可运行程序或批处理文件。”

但是，如果我尝试从 ant\bin 目录运行它，我会收到以下消息：

“构建文件：build.xml 不存在！构建失败”

这是正确的，因为我没有制作 build.xml 文件。thanx .. 任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-17T10:14:03.157

尝试这样的事情。您需要将 bin 目录从 ant 添加到 PATH。

```
export ANT_HOME="/usr/share/java/ant-1.8.2"
if [ -e $ANT_HOME ]; then
    export PATH=${ANT_HOME}/bin:$PATH
fi 
```

# ipad - 可编辑的 webView 自行滚动到顶部

> ID：11520184
> 
> 赞同：3
> 
> 时间：2012-07-17T10:01:50.013
> 
> 标签：ipad, ios5, uiwebview, contenteditable

我在可编辑的 web 视图中显示了一些文本。一旦我向下滚动并触摸某处以编辑呈现的文本，它就会滚动到顶部并出现键盘，因此我必须再次向下滚动以进行编辑。有没有办法阻止 webView 这样做？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-18T17:00:18.370

遇到同样的问题，仍在寻找这种奇怪行为的正常解决方案。我们仍然无法阻止 UIWebView 这样做，如果你在 iPad 上查看 Evernote 应用程序，你会在那里看到同样的问题，不幸的是:( 我们唯一能做的就是在显示键盘时保存 UIWebView 的 contentOffset 和如果在打开键盘后恢复。

这看起来像：

```
//register your controller for keyboard notifications
[[NSNotificationCenter defaultCenter] addObserver:self selector:@selector(keyboardWillShow:) name:UIKeyboardWillShowNotification object:nil];
[[NSNotificationCenter defaultCenter] addObserver:self selector:@selector(keyboardWasShown:) UIKeyboardDidShowNotification object:nil]; 
```

然后您将需要处理键盘通知，例如：

```
- (void)keyboardWillShow:(NSNotification *)aNotification {

// scroll view will scroll to beginning, but we save current offset
[_yourViewWithWebView saveOffset];
    ...
} 
```

之后，您将需要在显示键盘时处理事件：

```
- (void)keyboardWasShown:(NSNotification*)aNotification{
...
// scroll view scrolled to beginning, but we restore previous offset
[_yourViewWithWebView restoreOffset];
} 
```

因此，在包含 UIWebView 的视图中，您需要实现：

```
static CGPoint editableWebViewOffsetPoint;

- (void) saveOffset{
    editableWebViewOffsetPoint = yourWebView.scrollView.contentOffset;
}

- (void) restoreOffset{
    //just use animation block to have scroll animated after jumping to top and back to old position
    [UIView animateWithDuration:.2
            delay:0
            options:UIViewAnimationOptionCurveEaseIn
            animations:^{
                yourWebView.scrollView.contentOffset = editableWebViewOffsetPoint;
            }
            completion:nil];

} 
```

* * *

希望总的来说，这将帮助您至少部分解决您的问题。

如果有人能帮助我们防止每次显示键盘时 UIWebView 滚动到顶部，我将不胜感激。

`UIWebView.scrollView.scrollsToTop = NO;`没有帮助。

在显示键盘之前禁用滚动并在显示键盘后启用它也不起作用。

同样在将来，当光标不在 UIWebView 的可见区域时，您将面临编辑文本的问题 - 它不会自动滚动以使光标可见。我们已经解决了这个问题，但我正在创建详细且易读的教程，说明我们如何做到这一点。如果您已经解决了这个问题，我很乐意看看您的解决方案:)

PS： http: [//www.cocoanetics.com/2011/01/uiwebview-must-die/](http://www.cocoanetics.com/2011/01/uiwebview-must-die/)

谢谢你，谢尔盖 N。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-01-27T12:06:21.143

一种效果很好的方法是在显示键盘时暂时`setContentOffset:`禁用`UIScrollView`。不过，这有点骇人听闻，因此在某些情况下，它可能会导致其他问题。

在**@Sergey N. 的**回复中，注册键盘通知，但不要存储/恢复 contentOffset，而是使用这些：

```
- (void)keyboardWillShow:(NSNotification *)aNotification {
    [self disableMethod:@selector(setContentOffset:) onClass:[UIScrollView class]];
}
- (void)keyboardWasShown:(NSNotification *)aNotification {
    [self enableMethod:@selector(setContentOffset:) onClass:[UIScrollView class]];
} 
```

在类的其他地方（或在另一个类中，只要你`self`在上面的调用中替换），放置这些：

```
-(void)swizzleMethod:(SEL)origSel from:(Class)origClass toMethod:(SEL)toSel from:(Class)toClass{
    Method origMethod = class_getInstanceMethod(origClass, origSel);
    Method newMethod = class_getInstanceMethod(toClass, toSel);
    method_exchangeImplementations(origMethod, newMethod);
}
-(void)disableMethod:(SEL)sel onClass:(Class)cl{
    [self swizzleMethod:sel from:cl toMethod:@selector(doNothing) from:[self class]];
}
-(void)enableMethod:(SEL)method onClass:(Class)cl{
    [self swizzleMethod:@selector(doNothing) from:[self class] toMethod:method from:cl];
}
-(void)doNothing{

} 
```

这首先防止了 webview 滚动到顶部，因此它不会显示糟糕的动画，但是，在某些情况下它可能会导致一些问题（例如，在持有 webview 的视图中有更多的输入控件）。在 iOS 5.0+ 中成功测试了这个。在 iOS 6.0 中，滚动到顶部似乎是固定的，因此不需要解决方法。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-19T05:05:48.567

“当光标不在可见区域时编辑文本”问题的功能。

```
- (void)keyboardWasShown:(NSNotification *)aNotification {

//if(self.navigationController.viewControllers objectAtIndex:([self.navigationController.viewControllers count]-1)==self.)
NSLog(@"keyboardshown");
if (keyboardshown)
    return;
keyboardshown=YES;
NSDictionary* userInfo = [aNotification userInfo];

CGRect keyboardEndFrame;
[[userInfo objectForKey:UIKeyboardFrameEndUserInfoKey] getValue:&keyboardEndFrame];

CGRect newFrame = self.textView.frame;
CGRect keyboardFrame = [self.textView convertRect:keyboardEndFrame toView:nil];

newFrame.size.height -= keyboardFrame.size.height;    
[UIView beginAnimations:@"ResizeForKeyboard" context:nil];
[UIView setAnimationBeginsFromCurrentState:YES];

[UIView setAnimationDuration:0.3];
[self.textView setFrame:newFrame];
[UIView commitAnimations];

}

- (void)keyboardWasHidden:(NSNotification *)aNotification {

if (!keyboardshown)
    return;
keyboardshown=NO;

NSDictionary* userInfo = [aNotification userInfo];

CGRect keyboardEndFrame;
[[userInfo objectForKey:UIKeyboardFrameEndUserInfoKey] getValue:&keyboardEndFrame];

CGRect newFrame = self.textView.frame;
CGRect keyboardFrame = [self.textView convertRect:keyboardEndFrame toView:nil];

newFrame.size.height += keyboardFrame.size.height;
[UIView beginAnimations:@"ResizeForKeyboard" context:nil];
[UIView setAnimationDuration:0.3];
self.textView.frame = newFrame;
[UIView commitAnimations];

} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-08T13:55:55.623

实际上，keyboardWasShown 并不总是被调用，尤其是当用户连接了 BT 键盘并且可以通过 Eject 键隐藏/显示虚拟键盘时。我们已经实现了自己的类，例如：

```
 @implementation KeyboardUtils

+ (CGRect) convertRect:(CGRect)rect toView:(UIView *)view {
    UIWindow *window = [view isKindOfClass:[UIWindow class]] ? (UIWindow *) view : [view window];
    return [view convertRect:[window convertRect:rect fromWindow:nil] fromView:nil];
}

/**
 * This is working but deprecated solution
 * Based on UIKeyboardCenterBeginUserInfoKey and UIKeyboardCenterEndUserInfoKey which are deprecated since iOS 3.2
 */
+ (BOOL)checkKeyboardOnDisplayCenterBegin:(CGRect)centerBegin centerEnd:(CGRect)centerEnd{

    CGRect mainScreen = [UIApplication currentBounds];

    BOOL isKeyboardOnDisplay = CGRectContainsPoint(mainScreen, centerEnd.origin);

    [[NSUserDefaults standardUserDefaults] setValue:[NSNumber numberWithBool:isKeyboardOnDisplay] forKey:@"isKeyboardOnDisplay"];
    [[NSUserDefaults standardUserDefaults] synchronize];

    return isKeyboardOnDisplay;
}

/**
 * This method allows to verify if software keyboard is currently present on screen for the application
 * Allows to handle undocked, split states of keyboard, as well as connected Bluetooth keyboard.
 * Needed to adjust UI - scrolling and insets for editable parts of the app, as well as avoid application be beneath open keyboard
 */
+ (BOOL)checkKeyboardOnDisplayBeginFrame:(CGRect)frameBegin endFrame:(CGRect)frameEnd{
    CGRect mainScreen = [UIApplication currentBounds];
    UIView *firstView = [[(AppDelegate *)[[UIApplication sharedApplication] delegate] window].subviews objectAtIndex:0];

    CGRect convertedEndFrame = [KeyboardUtils convertRect:frameEnd toView:firstView];

    BOOL isKeyboardOnDisplay = CGRectContainsRect(mainScreen, convertedEndFrame);

    [[NSUserDefaults standardUserDefaults] setValue:[NSNumber numberWithBool:isKeyboardOnDisplay] forKey:@"isKeyboardOnDisplay"];
    [[NSUserDefaults standardUserDefaults] synchronize];

    return isKeyboardOnDisplay;
}

+ (BOOL)checkKeyboardOnDisplayFromNotification:(NSNotification *)aNotification{
    BOOL isKeyboardOnDisplay = [KeyboardUtils checkKeyboardOnDisplayBeginFrame:[[aNotification.userInfo valueForKey:UIKeyboardFrameBeginUserInfoKey] CGRectValue] 
                                                                      endFrame:[[aNotification.userInfo valueForKey:UIKeyboardFrameEndUserInfoKey] CGRectValue]];    
    return isKeyboardOnDisplay;
} 
```

然后你可以像这样使用它：

```
- (void)keyboardWillChangeFrame:(NSNotification*)aNotification{
    [KeyboardUtils checkKeyboardOnDisplayFromNotification:aNotification];
} 
```

其中keyboardWillChangeFrame 是选择器观察者：

```
[[NSNotificationCenter defaultCenter] addObserver:self selector:@selector(keyboardWillChangeFrame:) name:UIKeyboardWillChangeFrameNotification object:nil]; 
```

通过这种方式，您将键盘的状态（如果它显示为停靠的一个并且确实出现在显示器上，并且未使用 BT 键盘）到 NSUserDefaultSettings。在侦听键盘通知或方向更改的处理程序中，您应该从默认值中检查此键值。

另外一种方法是 [UIApplication currentBounds]; 它通过使用以下类别扩展它存在于应用程序中：（.h 文件）

```
#import <UIKit/UIKit.h>

@interface UIApplication (AppDimensions)
+(CGSize) currentSize;
+(CGRect) currentBounds;
+(CGSize) sizeInOrientation:(UIInterfaceOrientation)orientation;
@end 
```

.m 文件：

```
#import "UIApplication+AppDimensions.h"

@implementation UIApplication (AppDimensions)

+(CGSize) currentSize
{
    return [UIApplication sizeInOrientation:[UIApplication sharedApplication].statusBarOrientation];
}

+(CGRect) currentBounds{
    CGRect bounds = [UIScreen mainScreen].bounds;
    bounds.size = [UIApplication currentSize];
    return bounds;
}

+(CGSize) sizeInOrientation:(UIInterfaceOrientation)orientation
{
    CGSize size = [UIScreen mainScreen].bounds.size;
    UIApplication *application = [UIApplication sharedApplication];
    if (UIInterfaceOrientationIsLandscape(orientation))
    {
        size = CGSizeMake(size.height, size.width);
    }
    if (application.statusBarHidden == NO)
    {
        size.height -= MIN(application.statusBarFrame.size.width, application.statusBarFrame.size.height);
    }
    return size;
}

@end 
```

希望这将帮助任何关心处理屏幕上键盘存在的人。

# java - Executor Service的shutdown和shutdownNow的区别

> ID：11520189
> 
> 赞同：78
> 
> 时间：2012-07-17T10:02:09.293
> 
> 标签：java, java.util.concurrent

`shutdown()`我想知道关闭和`shutdownNow()`关闭的基本区别`Executor Service`？

***据我了解：***

`shutdown()`应该用于**正常**关闭，这意味着所有正在运行并排队等待处理但未启动的任务应该被允许完成

`shutdownNow()`突然关闭意味着一些未完成的任务被取消，未启动的任务也被取消**。**还有什么我遗漏的隐式/显式的吗？

PS：我发现了另一个关于[如何关闭](https://stackoverflow.com/questions/10504172/how-to-shutdown-an-executor-service)与此相关的执行程序服务的问题，但不完全是我想知道的。

* * *

## 回答 #1

> 赞同：145
> 
> 时间：2012-07-17T10:05:14.240

总之，你可以这样想：

*   `shutdown()`只会告诉执行器服务它不能接受新任务，但是已经提交的任务会继续运行
*   `shutdownNow()`会做同样的事情并且会**尝试**通过中断相关线程来取消已经提交的任务。请注意，如果您的任务忽略中断，其`shutdownNow`行为方式将与`shutdown`.

您可以尝试下面的示例并替换`shutdown`为`shutdownNow`以更好地了解不同的执行路径：

*   ，`shutdown`输出是`Still waiting after 100ms: calling System.exit(0)...`因为正在运行的任务**没有**中断，继续运行。
*   with `shutdownNow`，输出是`interrupted`and`Exiting normally...`因为正在运行的任务被中断，捕获中断然后停止它正在做的事情（打破 while 循环）。
*   ，`shutdownNow`如果你注释掉while循环中的行，你会得到`Still waiting after 100ms: calling System.exit(0)...`，因为中断不再由正在运行的任务处理。

```
public static void main(String[] args) throws InterruptedException {
    ExecutorService executor = Executors.newFixedThreadPool(1);
    executor.submit(new Runnable() {

        @Override
        public void run() {
            while (true) {
                if (Thread.currentThread().isInterrupted()) {
                    System.out.println("interrupted");
                    break;
                }
            }
        }
    });

    executor.shutdown();
    if (!executor.awaitTermination(100, TimeUnit.MICROSECONDS)) {
        System.out.println("Still waiting after 100ms: calling System.exit(0)...");
        System.exit(0);
    }
    System.out.println("Exiting normally...");
} 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2015-09-15T10:00:33.873

*   `shutdown()`：

要终止 ExecutorService 中的线程，您可以调用它的`shutdown()`方法。ExecutorService 不会立即关闭，但不会再接受新任务，一旦所有线程完成当前任务，ExecutorService 就会关闭。在调用 shutdown() 之前提交给 ExecutorService 的所有任务都会被执行。

*   `shutdownNow()`：

如果要立即关闭ExecutorService，可以调用该`shutdownNow()`方法。这将尝试立即停止所有正在执行的任务，并跳过所有已提交但未处理的任务。对执行任务没有任何保证。也许他们会停下来，也许会执行到最后。这是一个尽力而为的尝试。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-17T10:06:04.237

从[javadocs](http://docs.oracle.com/javase/6/docs/api/java/util/concurrent/ExecutorService.html)：

> `void shutdown`
> 
> 启动有序关闭，其中执行先前提交的任务，但不会接受新任务。
> 
> `List<Runnable> shutdownNow()`
> 
> 尝试停止所有正在执行的任务，停止等待任务的处理，并返回等待执行的任务列表。
> 
> ***除了尽最大努力停止处理正在***执行的任务之外，没有任何保证。
> 
> 例如，典型的实现将通过 Thread.interrupt() 取消，因此任何未能响应中断的任务可能永远不会终止。
> 
> 返回：从未开始执行的任务列表

# ruby-on-rails - Mongoid default_scope

> ID：11520194
> 
> 赞同：1
> 
> 时间：2012-07-17T10:02:31.057
> 
> 标签：ruby-on-rails, mongoid, default-scope

我在 mongoid 驱动的模型上设置了 default_scope。

```
default_scope -> {where(tenant_id: Tenant.current.id)} 
```

当我发现没有问题时：

```
Student.all 
```

返回当前租户的学生

当我创建一个学生时：

```
Student.new.tenant 
```

返回零

```
Student.create 
```

不分配当前租户

但如果我这样做：

```
Student.all.new.tenant 
```

有用

也：

```
Student.scoped.new.tenant 
```

这是正常行为吗？

谢谢队友

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-14T17:42:18.390

正如我们所说，这是有意的。[GitHub 上有关于此 API 更改请求](https://github.com/mongoid/mongoid/issues/2218)的问题。

# c++ - 派生类 需要重新定义变量 哪些有纯抽象基类？

> ID：11520195
> 
> 赞同：0
> 
> 时间：2012-07-17T10:02:41.947
> 
> 标签：c++, oop

我有一个关于纯抽象基类的问题。假设我有一个带有一些函数和变量的抽象纯基类。如果我从基础创建 2 个派生类，这两个派生类是否都有自己的一组变量？

例如：

```
#include <iostream>
using namespace std;

class base
{
public: 
virtual void display() = 0;
protected: 
static input;
static output;
}

class Derived1:public base
{
public:
virtual void display();
void readInput();
}

class Derived2:public base
{
public:
virtual void display();
void readInput();
}
class Derived1:public base
{
virtual void display();
}
int main()
{
 Derived1 obj1;
 Derived2 obj2;

return 0;
} 
```

所以这里 obj1 和 obj2 分别得到 2 组变量“输入”和“输出”？还是只有1套？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-17T10:05:37.983

它们将只有一组用于所有派生类的静态变量。很容易测试：

```
class Base
{
public:
    static int k;
};
int Base::k;

class Derived1: public Base
{

};
class Derived2: public Base
{

};

int main(){
    Derived1::k = 5;
    Derived2::k = 10;

    std::cout << Derived1::k << "   " << Derived2::k;
} 
```

输出：`10 10`

原因是所有静态内容仅适用于基类（请注意，它们绑定到*class*，而不是*object*，因此它也与创建的每个类的对象数量无关）。由于您只有一个基类，因此无论您将拥有多少个派生类，变量集仍将绑定到该单个基类。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-17T10:05:28.937

尽管您可以轻松地对此进行测试，但这里有一个提示：考虑您如何**定义**成员：

```
int base::input; 
```

现在认为只有一个`base`类，并且`static`绑定到该类。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-17T10:21:30.017

`static`变量在类实例（包括派生类实例）之间共享。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-17T10:07:15.547

There are two sets of variables; one for `obj 1` and one for `obj 2`.

# ios - 如何在 iOS 中使用 Storyboards 在下一个视图中显示图像数据

> ID：11520200
> 
> 赞同：0
> 
> 时间：2012-07-17T10:03:09.497
> 
> 标签：ios, uiviewcontroller, uikit, uistoryboard

> **可能重复：**
> [如何在 iOS 中使用 Storyboards 将图像 ID 传递到下一个视图](https://stackoverflow.com/questions/11516734/how-can-i-pass-image-id-to-next-view-by-using-storyboards-in-ios)

我的代码是：

```
- (IBAction) buttonPressed:(id)sender
{
    UIStoryboard *storyboard = [UIStoryboard storyboardWithName:@"MainStoryboard" bundle: nil]; 
    DestinationViewController *destinationViewController = [storyboard instantiateViewControllerWithIdentifier:@"Destination"];

    destinationViewController.title = @"image property";

    [self.navigationController pushViewController:destinationViewController animated:YES];

    [destinationViewController release];    
} 
```

但我得到的错误是：

```
Terminating app due to uncaught exception 'NSInvalidArgumentException', reason: 'Storyboard (<UIStoryboard: 0x68a0840>) doesn't contain a view controller with identifier 'Destination''
 First throw call stack:
(0x13d4022 0x1565cd6 0x448fef 0x39f6 0x13d5e99 0x2114e 0x210e6 0xc7ade 0xc7fa7 0xc7266 0x463c0 0x465e6 0x2cdc4 0x20634 0x12beef5 0x13a8195 0x130cff2 0x130b8da 0x130ad84 0x130ac9b 0x12bd7d8 0x12bd88a 0x1e626 0x2902 0x2875)
terminate called throwing an exception(lldb) 
```

有什么想法吗？

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-17T10:28:59.677

您需要在 IB 中将视图控制器的标识符设置为“Destination”。以下内容摘自 Apple 在 UIStoryBoard 上的文档。

在故事板文件中唯一标识视图控制器的标识符字符串。在配置故事板文件时，您可以在 Interface Builder 中设置给定视图控制器的标识符。此标识符不是视图控制器对象本身的属性，仅由情节提要文件用于定位视图控制器。

![在此处输入图像描述](../Images/eb92216873e773249fea1a665663396c.png)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-17T10:35:19.060

您可以使用

```
(void)prepareForSegue:(UIStoryboardSegue *)segue sender:(id)sender 
```

在视图控制器之间传递数据的方法使用

```
myViewController *viewController = [segue destinationViewController]; 
```

指定您的目的地。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-17T10:41:47.667

涉及正确设置标识符的答案可能是您的问题。但是，通过获取对故事板的引用并让它实例化控制器，您似乎正在以一种 hacky 的方式执行此操作。

`DestinationViewController`相反，尝试在视图控制器和情节提要编辑器中创建推送转场并执行以下操作：

```
- (IBAction)buttonPressed:(id)sender {
    [self performSegueWithIdentifier:@"yourSegueIdentifierHere"];
}

- (void)prepareForSegue:(UIStoryboardSegue *)segue sender:(id)sender {
    DestinationViewController *controller = [segue destinationViewController];
    [controller setImage: ... ];
} 
```

# android - 将视图添加到 ViewGroup 直到它们适合

> ID：11520208
> 
> 赞同：0
> 
> 时间：2012-07-17T10:03:34.083
> 
> 标签：android, android-layout, android-adapter

我正在使用自定义`Adapter`来填充`ListView`. `ListView`项目包含一种图标条 - 与项目相关的各种数量的图标。我的图标条是水平的`LinearLayout`。我想做的是`LinearLayout`在它们不再适合它时停止添加图标，并创建一个新的`LinearLayout`图标和图标。所以基本上它是一个多行的图标网格。我正在使用 API 8 级。

问题是在我`Adapter`的`bindView`函数中，所有布局都没有被测量，并且报告零为`width`、和。`height``measuredWidth``measuredHeight`

我不知道如何进行，所以欢迎任何帮助。

# ios - 如何在不更改图像的情况下更新 ALAsset 的 exif？

> ID：11520209
> 
> 赞同：4
> 
> 时间：2012-07-17T10:03:36.330
> 
> 标签：ios, metadata, photo, exif, alasset

我使用`setImageData:metadata:completionBlock:`来`ALAsset`更新资产的 exif（元数据）。

我只想更新元数据，但是这个方法需要一个`imageData`作为第一个参数。我使用下面的代码生成`imageData`，但它修改了我的图像（我检查了文件大小和文件哈希）。

```
ALAssetRepresentation *dr = asset.defaultRepresentation;
UIImage *image = [UIImage imageWithCGImage:dr.fullResolutionImage scale:dr.scale orientation:dr.orientation];
NSData *data = UIImageJPEGRepresentation(image, 1); 
```

有没有其他方法可以用来只更新 an 的 exif `ALAsset`？或者有什么方法可以生成正确`imageData`的方法`setImageData:metadata:completionBlock:`？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-20T10:34:31.463

我找到了一种生成`imageData`. 下面的代码：

```
Byte *buffer = (Byte *)malloc(dr.size);
NSUInteger k = [dr getBytes:buffer fromOffset:0.0 length:dr.size error:nil];
NSData *data = [NSData dataWithBytesNoCopy:buffer length:k freeWhenDone:YES]; 
```

所以我可以使用上面的数据`setImageData:metadata:completionBlock:`来只更新`ALAsset`.

# java - 从 Spinner 中选择项目时刷新 TableView 项目，而不是仅仅连接它

> ID：11520212
> 
> 赞同：0
> 
> 时间：2012-07-17T10:03:52.117
> 
> 标签：java, android

我在我的 tableView 中显示 th JSON 结果时遇到问题，其中不是在插入获取的数据之前清除 tablerows，它只是将旧数据中的新数据连接起来，我不知道为什么。这是我的代码：

首先，我有一个 JSON 解析器，它根据所选城市和日期获取所有信息，我认为不需要显示该部分，但我只需将数据添加到列表数组中，然后执行此部分。

```
public void showinfo(){
    // Get the TableLayout
    TableLayout tl = (TableLayout) findViewById(R.id.maintable);
    tl.removeAllViews();

    Log.v(KahelTag, "eventsCleared");

    // Go through each item in the array
    for (int current = 0; current < infoID.size(); current++)
    {

        TableRow tr = new TableRow(this);
        tr.setId(100+current);
        tr.setLayoutParams(new LayoutParams(
                LayoutParams.FILL_PARENT,
                LayoutParams.WRAP_CONTENT));   

       //CREATE TEXT VIEW FOR INFO1
        final TextView info1 = new TextView(this);
        clubName.setId(200+current);
        clubName.setText(info1.get(current));
        clubName.setTextColor(Color.WHITE);
        clubName.setTextSize(12);
        clubName.setTypeface(null, Typeface.BOLD);
        clubName.setTag(infoID.get(current));
        clubName.setGravity(Gravity.CENTER_VERTICAL);
        clubName.setLayoutParams(new LayoutParams(
                (int) TypedValue.applyDimension(TypedValue.COMPLEX_UNIT_DIP, 65, getResources().getDisplayMetrics()),
                LayoutParams.WRAP_CONTENT));
        tr.addView(info1);

        //CREATE TEXT VIEW FOR info2
        TextView info2 = new TextView(this);
        eventName.setId(current);
        eventName.setText(info2.get(current));
        eventName.setGravity(Gravity.CENTER_VERTICAL);
        eventName.setTextSize(12);
        eventName.setTextColor(Color.WHITE);
        eventName.setLayoutParams(new LayoutParams(
                (int) TypedValue.applyDimension(TypedValue.COMPLEX_UNIT_DIP, 120, getResources().getDisplayMetrics()),
                LayoutParams.WRAP_CONTENT));
        tr.addView(info2);

      //CREATE TEXT VIEW FOR INFO3
        TextView info3 = new TextView(this);
        eventDate.setId(current);
        eventDate.setText(info3.get(current));
        eventDate.setGravity(Gravity.CENTER_VERTICAL);
        eventDate.setTextSize(12);
        eventDate.setTextColor(Color.WHITE);
        eventDate.setLayoutParams(new LayoutParams(
                (int) TypedValue.applyDimension(TypedValue.COMPLEX_UNIT_DIP, 80, getResources().getDisplayMetrics()),
                LayoutParams.WRAP_CONTENT));
        tr.addView(info3);

        // Add the TableRow to the TableLayout
        tl.addView(tr, new TableLayout.LayoutParams(
                LayoutParams.FILL_PARENT,
                LayoutParams.WRAP_CONTENT));

    }
} 
```

现在我在使用 showinfo(); 设置内容视图后显示该信息；现在是微调器部分。它只是再次调用 JSON 代码来更改参数，然后再次在表格中显示信息。但它不像我想要的那样工作，因为正如我上面所说的，它只是连接数据。顺便说一句，我有两个为我的 JSON 文本传递的参数。这是微调器的代码：

```
 Spinner spinParam1 = (Spinner) findViewById(R.id.spinner1);
    Spinner spinParam2 = (Spinner) findViewById(R.id.spinner2);

    spinParam1.setOnItemSelectedListener(new OnItemSelectedListener() {
        public void onItemSelected(AdapterView<?> parentView, View selectedItemView, int position, long id) {
            Object specify_param1 = parentView.getItemAtPosition(position);
            if(specify_param1.toString() != "All"){
                getEvents(specify_param1.toString(),null);
                showinfo();
                Log.v(KahelTag, "showinfo");
            }
            else
            {
                getEvents(null,null);
                showinfo();
                Log.v(KahelTag, "elseshowinfo");
            }
        }
        public void onNothingSelected(AdapterView<?> parentView) {
            getEvents(null,null);
            showinfo();
            Log.v(KahelTag, "nothingshowinfo");
        }

    });

    spinParam2.setOnItemSelectedListener(new OnItemSelectedListener() {
        public void onItemSelected(AdapterView<?> parentView, View selectedItemView, int position, long id) {
            Object specify_param2 = parentView.getItemAtPosition(position);
            if(specify_param2.toString() != "Any"){
                getEvents(specify_param2.toString(),null);
                showinfo();
                Log.v(KahelTag, "showinfo");
            }
            else
            {
                getEvents(null,null);
                showinfo();
                Log.v(KahelTag, "elseshowinfo");
            }
        }

        public void onNothingSelected(AdapterView<?> parentView) {
            getEvents(null,null);
            showinfo();
            Log.v(KahelTag, "nothingshowinfo");
        }

    }); 
```

我需要进行任何修改才能按我想要的方式工作吗？谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-17T10:20:34.590

如果你这样做，我会这样做

```
tl = new TableLayout(); 
```

但是你为什么不使用带有自定义适配器的 listview 呢，它听起来更像你需要的东西。然后你不需要创建 x100 tablerows 等。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-18T06:18:51.513

没有注意到它，但问题的主要原因是我存储所有数据的 JSON 字符串数组，这就是它连接上一个输出中的数据的原因。通过在解析 JSON 字符串之前先清除数组来解决问题。:)

# html - 如何调整 ul 宽度属性？

> ID：11520214
> 
> 赞同：8
> 
> 时间：2012-07-17T10:04:04.273
> 
> 标签：html, css

```
<ul id='ul01'>
    <li><a href='#'><img src='img01.png' width="700" height="590" /></a></li>
    <li><a href='#'><img src='img02.png' width="700" height="590" /></a></li>
    <li><a href='#'><img src='img03.png' width="700" height="590" /></a></li>
</ul> 
```

CSS：

```
#ul01{list-style:none;width:??;}
#ul01 li{float:left;} 
```

这是图像的水平阵列。list.items.count 可以变化。
适合所有图像的宽度属性应该是什么。
我尝试了 - 自动 - 并预期可调整宽度 - 但事实并非如此。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-07-17T10:23:33.887

制作`li`元素`inline-block`s 并将`white-space`属性设置`ul`为`nowrap`。

```
li {
    display: inline-block;
}
ul {
    white-space: nowrap;
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-17T10:13:57.480

做出这些改变，我认为这些对你有用......

```
#ul01{list-style:none;width:100%;}
#ul01 li{float:left; width:33%; }
#ul01 li a { display:block; }
#ul01 li a img { width:100%; height:auto; }

<ul id='ul01'>
    <li><a href='#'><img src='img01.png' /></a></li>
    <li><a href='#'><img src='img02.png' /></a></li>
    <li><a href='#'><img src='img03.png' /></a></li>
</ul> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-17T10:24:18.610

如果您的图像必须保留您指定的大小，则知道您的页面将具有水平滚动条。如果您愿意，这将起作用

```
#ul01{list-style:none;width:2100px;}
#ul01 li{float:left; width:700px} 
```

`ul`宽度必须是`(width X 3) + (2 X image-border-if-any} + padding`=`2100px + n`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-17T10:13:25.200

试试jquery，所以在css文件中你可以放0，值会在以后改变。

```
<script type="text/javascript">
  $(document).ready(function () {
    var sum = 0;
    $('#ul01 li img').each(function() {
      sum += parseInt($(this).attr("width"), 10);
    });
    $('#ul01').css({ 'width': sum+'px' });
  });
</script> 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-10T23:31:01.370

您只需将 width 属性放入 ul 元素。

# java - 任何框架来处理 REST 客户端服务器列表？

> ID：11520217
> 
> 赞同：5
> 
> 时间：2012-07-17T10:04:10.557
> 
> 标签：java, rest, restlet, rest-client

这个想法是可以使用 REST 服务器列表配置 REST 客户端。因此服务器列表将以循环方式在 REST 客户端上轮换。

例如 REST 客户端应用程序。我将配置服务器列表（REST_SERVER1、REST_SERVER2、REST_SERVER3）

```
1 request -> REST_SERVER1
2 request -> REST_SERVER2
3 request  -> REST_SERVER3
4 request -> REST_SERVER1 
```

我搜索了很多，找不到支持此功能的合适框架。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-26T17:00:33.370

我只是包装你的客户，然后重复请求，直到它成功。这样，您就可以巧妙地跟踪哪些服务器正在工作。这是我从我们的系统改编的一些代码......

```
import java.io.IOException;
import java.net.URL;
import java.util.Calendar;

import com.sun.jersey.api.client.Client;
import com.sun.jersey.api.client.ClientResponse;
import com.sun.jersey.api.client.WebResource;

public class RestClient {

    private final String mediaType = "application/json";
    private RestServer[] servers = new RestServer[] {new RestServer("server1", 8080), new RestServer("server2", 8080)};

    protected RestClient() {
    }

    protected ClientResponse post(String methodUrl, Object postData) throws IOException {
        return doRequest(methodUrl, postData, true);
    }

    protected ClientResponse get(String methodUrl) throws IOException {
        return doRequest(methodUrl, null, false);
    }

    private ClientResponse doRequest(String methodUrl, Object postData, boolean isPost) throws IOException {

        Client client = Client.create();

        for (RestServer restServer : servers) {

            if (!restServer.shouldTry()) {
                System.out.println(restServer + " not ready");
                continue;
            }

            System.out.println("Trying with " + restServer);

            try {
                URL url = new URL("http", restServer.getHost(), restServer.getPort(), '/' + methodUrl);
                WebResource webResource = client.resource(url.toString());

                System.out.println("Calling " + url);
                ClientResponse response = isPost
                    ? webResource.type(mediaType).post(ClientResponse.class, postData)
                    : webResource.type(mediaType).get(ClientResponse.class);

                if (response.getStatus() < 300) {
                    restServer.succeeded();
                    return response;
                }

                restServer.failed();

            } catch (Exception ex) {
                System.out.println(restServer + " failed with exception " + ex.getMessage());
                restServer.failed();
            }
        }

        // No servers worked
        return null;
    }
}

class RestServer {

    private final int TIME_TO_WAIT_BEFORE_TRYING_AGAIN = 1000 * 30; // 30 seconds
    private String host;
    private int port;
    private Calendar lastAttempted;
    private boolean lastCallFailed;

    public RestServer(String host, int port) {
        this.host = host;
        this.port = port;
        lastAttempted = Calendar.getInstance();
    }

    public String getHost() {
        return host;
    }

    public int getPort() {
        return port;
    }

    public void failed() {
        lastCallFailed = true;
        lastAttempted = Calendar.getInstance();
    }

    public void succeeded() {
        lastCallFailed = false;
        lastAttempted = Calendar.getInstance();
    }

    public boolean shouldTry() {
        if (!lastCallFailed)
            return true;

        return Calendar.getInstance().compareTo(lastAttempted) > TIME_TO_WAIT_BEFORE_TRYING_AGAIN;
    }

    @Override
    public String toString() {
        return new StringBuilder(host).append(':').append(port).toString();
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-26T02:44:49.763

由于担心添加一堆组件会使您的应用程序设置复杂化，我可能会考虑一个快速而肮脏的纯 Java 解决方案。

这是我使用 Spring 的 RestTemplate 想出的一些有趣的东西。如果您对可以封装方法调用的拦截器、方面和其他事物感到满意，则可以应用这些原则来封装所有各种 RestTemplate REST 调用。请参阅[RestTemplate javadoc](http://static.springsource.org/spring/docs/3.0.x/javadoc-api/org/springframework/web/client/RestTemplate.html)

```
import org.junit.Test;
import org.springframework.http.HttpMethod;
import org.springframework.web.client.*;
import org.springframework.web.util.UriTemplate;
import org.springframework.web.util.UriUtils;

import java.io.UnsupportedEncodingException;
import java.net.URI;
import java.net.URISyntaxException;
import java.util.Arrays;
import java.util.Collection;
import java.util.Iterator;
import java.util.Map;

public class Stuff {

    // Make this configurable.
    Collection<String> serverList;
    // or do something a little smarter, like this interface. I'll use this in this example.
    ServerLookup serverLookup;

    interface ServerLookup {
        Iterator<String> getValidServerListIterator();
        void markUnreachableServer(String url);
    }

    // Do it externally around RestTemplate...
    @Test
    public void testNormalRestTemplate() throws Exception {
        RestTemplate restTemplate = new RestTemplate();
        Iterator<String> serverIterator = serverLookup.getValidServerListIterator();
        while (serverIterator.hasNext()) {
            String server = serverIterator.next();
            try {
                Object obj = restTemplate.getForObject(server + "/objectIdentifier/511", Object.class);
                break;
            } catch (ResourceAccessException e) {
                serverLookup.markUnreachableServer(server);
            }
        }
    }

    // or you can try to 'enhance' RestTemplate to contain the retry logic within. It's a bit hacky, but more fun.
    @Test
    public void testMyRestTemplate() {
        RestTemplate rt = new MyRestTemplate();
        Object obj = rt.getForObject("/objectIdentifier/511", Object.class);
        rt.delete("/objectIdentifier/511");
    }

    // Here's a way to (hackily) augment RestTemplate with retry functionality
    class MyRestTemplate extends RestTemplate {

        // Unfortunately RestTemplate probably wasn't designed for much extensibility. URI objects can't be made from
        // URL fragments, so these two methods are the 'furthest in' that we can override and cover all RestTemplate
        // REST methods.
        @Override
        public <T> T execute(String url, HttpMethod method, RequestCallback requestCallback,
                             ResponseExtractor<T> responseExtractor, Object... urlVariables) throws RestClientException {

            Iterator<String> serverIterator = serverLookup.getValidServerListIterator();
            while (serverIterator.hasNext()) {
                String server = serverIterator.next();
                // prefix the URL fragment passed in with a server
                String fullUrl = server + url;
                UriTemplate uriTemplate = new HttpUrlTemplate(fullUrl);
                URI expanded = uriTemplate.expand(urlVariables);
                try {
                    return doExecute(expanded, method, requestCallback, responseExtractor);
                } catch (ResourceAccessException e) {
                    serverLookup.markUnreachableServer(server);
                }
            }
            throw new RuntimeException("Unable to reach any servers in the server list for " + url);
        }

        @Override
        public <T> T execute(String url, HttpMethod method, RequestCallback requestCallback,
                             ResponseExtractor<T> responseExtractor, Map<String, ?> urlVariables) throws RestClientException {

            Iterator<String> serverIterator = serverLookup.getValidServerListIterator();
            while (serverIterator.hasNext()) {
                String server = serverIterator.next();
                // prefix the URL fragment passed in with a server
                String fullUrl = server + url;
                UriTemplate uriTemplate = new HttpUrlTemplate(fullUrl);
                URI expanded = uriTemplate.expand(urlVariables);
                try {
                    return doExecute(expanded, method, requestCallback, responseExtractor);
                } catch (ResourceAccessException e) {
                    serverLookup.markUnreachableServer(server);
                }
            }
            throw new RuntimeException("Unable to reach any servers in the server list for " + url);
        }

        /** Exact duplicate of the inner class of RestTemplate. Can not touch privates. */
        class HttpUrlTemplate extends UriTemplate {
            public HttpUrlTemplate(String uriTemplate) {
                super(uriTemplate);
            }

            @Override
            protected URI encodeUri(String uri) {
                try {
                    String encoded = UriUtils.encodeHttpUrl(uri, "UTF-8");
                    return new URI(encoded);
                }
                catch (UnsupportedEncodingException ex) {
                    // should not happen, UTF-8 is always supported
                    throw new IllegalStateException(ex);
                }
                catch (URISyntaxException ex) {
                    throw new IllegalArgumentException("Could not create HTTP URL from [" + uri + "]: " + ex, ex);
                }
            }
        }
    }
} 
```

# android - 将 cwac-endless 适配器与现有/自定义 AsyncTask 一起使用

> ID：11520225
> 
> 赞同：0
> 
> 时间：2012-07-17T10:04:37.580
> 
> 标签：android, android-asynctask, adapter, commonsware-cwac

我目前正在使用我认为是 Android 中的一种常见模式，即使用各种 AsyncTask 从网络获取数据，并使用接口回调机制在完成时更新一个简单的 ArrayAdapter。

cwac-endless 很容易插入以添加分页类型滚动，除了它假设它将为您处理运行后台任务的基本问题。这是否意味着我基本上必须撕掉我所有的 AsyncTask 类和关联的接口，并将所有代码从 doInBackground 移动到我的 EndlessAdapter 的 cacheInBackground 中？

我尝试过的大多数解决方案似乎最终都会复制 cwac-endless 中已经存在的大部分代码，所以我觉得必须有更清洁的解决方案来将此适配器与现有的 AsyncTask 一起使用？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-17T10:22:27.333

> cwac-endless 相当容易插入以添加分页类型滚动，除了它假设它将为您处理运行后台任务的基本问题

处理“为您运行后台任务”是适配器背后的大部分内容。

> 这是否意味着我基本上必须撕掉我所有的 AsyncTask 类和关联的接口，并将所有代码从 doInBackground 移动到我的 EndlessAdapter 的 cacheInBackground 中？

如果您想按原样使用`EndlessAdapter`，是的。

当然欢迎您获取代码，修改`getView()`为不使用它自己的代码`executeAsyncTask`并`AppendTask`用您自己的逻辑替换该逻辑。然而，几乎每一行代码都是工作`AppendTask`所必需的`EndlessAdapter`。而且我不知道任何无休止的构造如何与“custom AsyncTasks”*复数*一起工作，因为工作必须有一个明确的结束，以便我们知道在列表中显示新行并摆脱pending `View`。因此，您仍然需要指定`AsyncTask`您的一些角色扮演角色`AppendTask`，做您目前正在做的所有事情*以及*`AppendTask`. 这是否比仅使用现有`EndlessAdapter`代码库更简单，我不能说，因为我不知道您的代码。

> 我觉得必须有更清洁的解决方案才能将此适配器与自定义 AsyncTasks 一起使用？

你是第一个提出这个问题的人，因此在输入这个答案之前我从未考虑过它。我会考虑一下，并[可能会尝试进行一些重构](https://github.com/commonsguy/cwac-endless/issues/14)以帮助您解决方案。

# sql - 如何在存储过程中获取受影响的行

> ID：11520226
> 
> 赞同：1
> 
> 时间：2012-07-17T10:04:39.027
> 
> 标签：sql, stored-procedures, informix

如果我有一个存储过程，我做一个插入。

我想`0 or 1`根据插入操作是否成功返回。`informix`我想知道`@@rowcount`在 sql server 中是否有类似的东西？

如果可能，请举例。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-17T10:07:16.770

It seems you can use the following in a stored procedure to extract the rowcount.

```
if dbinfo('sqlca.sqlerrd2') = 0 then
   return 0;
else
   return 1;
end if; 
```

(The syntax might be off; it's been years since I used Informix.)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-17T10:11:04.373

在 Sql Server 中，当您实例化一个新的 SQlCommand 时，SqlCommand 对象的 ExecuteNonQuery() 方法返回受该命令影响的行数。我不知道在 informix 中是否也可以这样做，但您应该尝试使用 InformixCommand 而不是 SQlCommand 并进行验证。

# c# - 指定 ZIndex 的根

> ID：11520227
> 
> 赞同：0
> 
> 时间：2012-07-17T10:04:45.273
> 
> 标签：c#, wpf, xaml

这是我的 xaml 代码（简化）

```
<Canvas Name="c1">
   <misc controls Canvas.ZIndex="1">
   <Canvas Name="c2">
      <Button Canvas.ZIndex="2" Name="b1" />
      <misc>
   </Canvas>
</Canvas> 
```

我希望该按钮位于 Canvas c1 中的其他控件上方。所以我使用 Canvas.ZIndex 属性。但它与 Canvas c2 相关，我希望它与 Canvas c1 相关。我怎么能那样做？有没有办法指定 zindex 属性的根画布？谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-17T10:08:58.517

Canvas 2上的按钮对Canvas 1一无所知。而是将Canvas 2的z索引设置为一个整体。

```
<Canvas Name="c1">
   <misc controls Canvas.ZIndex="1">
   <Canvas ZIndex="2" Name="c2">
      <Button Name="b1" />
      <misc>
   </Canvas>
</Canvas> 
```

（或者只是重新订购您的标签）

# gtk - Suppress signal on Gtk.ToggleButton.set_active

> ID：11520234
> 
> 赞同：5
> 
> 时间：2012-07-17T10:05:24.503
> 
> 标签：gtk, signals, pygtk, state, togglebutton

Is there a way to suppress the "toggled" signals that is emitted when you set the state of a ToggleButton with set_active()?

I want to represent a connection state with a GtkToggleButton. Since the state can change from other events than just clicking the button, I want to update the button on state-change signals, but I would like the signal not to be emitted (I don't need to run a disconnection procedure when it is already disconnected). I could just check the connection state, but it seems to be inconsistent around the time of the signal.

Other solutions than ToggleButtons are also welcome.

Thanks

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-17T13:56:43.097

See [`object.handler_block()`](http://www.pygtk.org/pygtk2reference/class-gobject.html#method-gobject--handler-block) and friends.

# python - 如何编写一个添加所有参数的python函数？

> ID：11520236
> 
> 赞同：7
> 
> 时间：2012-07-17T10:05:29.713
> 
> 标签：python, function, arguments, add

我想编写一个 python 函数，它使用`+`运算符添加所有参数。未指定参数数量：

```
def my_func(*args):
    return arg1 + arg2 + arg3 + ... 
```

我该怎么做？

最好的祝福

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-07-17T10:06:58.167

只需使用[sum](http://docs.python.org/library/functions.html#sum)内置函数

```
>>> def my_func(*args):
...     return sum(args)
...
>>> my_func(1,2,3,4)
10
>>> 
```

* * *

**编辑：**

我不知道你为什么要避免 sum，但[我们开始吧](http://docs.python.org/library/functions.html#reduce)：

```
>>> def my_func(*args):
...   return reduce((lambda x, y: x + y), args)
...
>>> my_func(1,2,3,4)
10
>>> 
```

`lambda`您也可以使用[operator.add](http://docs.python.org/library/operator.html#operator.add)代替。

* * *

**编辑2：**

我查看了您的[其他](https://stackoverflow.com/questions/11519787/how-to-find-the-list-in-a-list-of-lists-whose-sum-of-elements-is-the-greatest) [问题](https://stackoverflow.com/questions/11520087/how-to-use-a-custom-function-in-maxx-key-custom-function-function/)，看来您的问题是用作使用自定义类时`sum`的`key`参数。`max`我[回答](https://stackoverflow.com/a/11521976/142637)了您的问题，并在我的回答中提供了一种使用您的课程的方法`sum`。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-07-17T10:15:35.420

这个怎么样：

```
def my_func(*args):
    my_sum = 0
    for i in args:
        my_sum += i
    return my_sum 
```

如果您不想使用`+=`运算符，那么

```
my_sum = my_sum + i 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-17T10:56:59.590

如果您绝对不会使用`sum`，那么类似：

```
def func(*args, default=None):
    from operator import add
    try:
        return reduce(add, args)
    except TypeError as e:
        return default 
```

或`functools.reduce`在 Py3 中

# php - php如果表存在删除mysql

> ID：11520238
> 
> 赞同：0
> 
> 时间：2012-07-17T10:05:37.670
> 
> 标签：php, mysql, if-statement

我正在考虑在 php mysql 中使用一个小脚本来删除一行，如果它存在于数据库中但不存在于更新中。如果我朝着正确的方向前进，请告诉我。

这是发生了什么...

一个上传的文件，我从中获取所有数据的信息，然后将其插入 mysql 数据库，或者如果已经存在则更新。我想要做的是，如果上传的文件在数据库中没有什么（因为它已经更新），那么删除该行有什么。

数据库中的 AGENT_REF 是主键

```
$sql_archeck = mysql_query ("SELECT AGENT_REF FROM epsales");
while($check = mysql_fetch_array($sql_archeck) {
    if ($check["AGENT_REF"] == $agentref) {

    }
} 
```

我希望我已经解释清楚了，今天我的头不对了..lol 感谢您抽出宝贵的时间，非常感谢您的帮助！

更新

例如，假设上传的文件包含以下信息：

```
AGENT_REF = 1
AGENT_REF = 2
AGENT_REF = 3
AGENT_REF = 5 
```

但在数据库中：

```
AGENT_REF = 1
AGENT_REF = 2
AGENT_REF = 3
AGENT_REF = 4
AGENT_REF = 5 
```

我想从数据库中删除 AGENT_REF 4 :) 希望此更新对您有所帮助 谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-17T10:10:55.520

如果我理解正确，你想做的是使用 REPLACE INTO 功能，她先删除，然后插入......？？

[http://dev.mysql.com/doc/refman/5.0/en/replace.html](http://dev.mysql.com/doc/refman/5.0/en/replace.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-17T10:17:13.760

array_diff() 是你的朋友。

[http://php.net/manual/en/function.array-diff.php](http://php.net/manual/en/function.array-diff.php)

```
<?php

  $new_refs = array(
    /* load your new references into this array - you haven't said how you're managing them in your original post */
  );

$sql_archeck = mysql_query ("SELECT AGENT_REF FROM epsales");
  $check = mysql_fetch_array($sql_archeck);

  $dead_keys = array_diff($check, $new_refs);

/* $dead_keys now holds a list of keys which don't exist in the new data and you can delete them */

?> 
```

编辑：在阅读其他解释完整要求的帖子的评论后，将帖子从 MYSQL 的 ON DUPLICATE KEY UPDATE 答案更改为 PHP array_diff() 解决方案......

# iphone - 体系结构 i386 的未定义符号

> ID：11520240
> 
> 赞同：0
> 
> 时间：2012-07-17T10:05:46.237
> 
> 标签：iphone, xcode, ios5, xcode4

我收到这个错误很难解释这就是为什么我要附加图像 ![在此处输入图像描述](../Images/8a81961d02f1b8b840407c9997c05c29.png)

当我添加 I 类 Base64.h 时出现此错误

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-17T10:44:03.563

最有可能的是，该文件`Base64.m`未正确添加到您的项目中。它不会被编译，因此在链接最终图像时它会丢失。

确保文件`Base64.m`与项目成员的类型相同`FirstViewController.m`（相似的位置、相似的设置等）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-17T12:37:50.467

我找到了解决方案，这只是一个技巧，但我再次使用不同的名称创建了 base64 h 和 m 文件，然后在它工作的时候使用它，谢谢你

# mysql - Ruby mysql gem“重新连接”对象变量

> ID：11520245
> 
> 赞同：0
> 
> 时间：2012-07-17T10:06:00.857
> 
> 标签：mysql, ruby, reconnect

在脚本运行一段时间后，我在 Ruby 中遇到了“mysql has gone away”错误。

我想尝试告诉 mysql gem 在连接丢失时自动重新连接。

我当前的代码如下所示：

```
def self.connect()
  begin
    if !@@dbh.nil?
      self.disconnect
    end
    @@dbh = Mysql.real_connect(@@server, @@user, @@pass, @@db)
    puts "[+] Connected to the " + @@db + " database with user '" + @@user + "'"
  rescue Mysql::Error => e
    # log error
  end
end 
```

以下指南 [0] 说 mysql gem 有一个“重新连接”对象变量，但是，我不确定如何在我的代码中使用它。

如何在上面的代码中实现这个选项？

在此先感谢，瑞安

[0] [http://www.tmtm.org/en/mysql/ruby/](http://www.tmtm.org/en/mysql/ruby/)

**编辑 - -**

好的。我想我已经想通了。

我需要在行`@@dbh.reconnect = true`后添加`@@dbh = Mysql.real_connect(@@server, @@user, @@pass, @@db)`。

注意：根据 IRC 上的 'nice' chapy，mysql gem 可能不是最好的 Ruby gem。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-17T17:55:03.507

如果您开始一个新项目，[mysql2](https://github.com/brianmario/mysql2/) gem 是您的最佳选择。这是对旧版本的巨大改进。

对您的示例进行 Ruby 化的尝试是：

```
def connect
  begin
    if (@dbh)
      self.disconnect
    end

    @dbh = Mysql.real_connect(@server, @user, @pass, @db)
    puts "[+] Connected to the #{@db} database with user '#{@user}'"
  rescue Mysql::Error => e
    # log error
  end
end 
```

`@`使用传统变量的原因是`attr_accessor`如果您正确设计了界面，您就可以使用。

使用单例实例比使用单例类更好。例如：

```
class MyApp
  def self.db
    @db ||= Database.new
  end

  class Database
    # Instance methods like initialize, connect, disconnect, etc.
  end
 end 
```

您可以像这样使用它：

```
MyApp.db.connect 
```

使用类的实例而不是直接使用类的优点是您可以一次支持多个连接。

# rest - 从spring3 mvc rest xml响应中隐藏xml字段

> ID：11520249
> 
> 赞同：1
> 
> 时间：2012-07-17T10:06:13.550
> 
> 标签：rest, spring-mvc

我正在研究spring3 mvc rest原型如何根据用户的角色动态隐藏pojo的xml字段。

# sql - Where 语句中的 SQL 布尔变量

> ID：11520251
> 
> 赞同：1
> 
> 时间：2012-07-17T10:06:18.543
> 
> 标签：sql, where, rdl

我正在制作一个 rdl 报告，并且我有三个复选框，如果选中，则需要更改我的 WHERE 语句。如果未选中，则结果应仅按日期范围匹配。如果选中一个或多个，则需要返回与变量对应的字符串匹配的字段。

```
WHERE 
(EffectiveDate BETWEEN @StartDate AND @EndDate) 
AND (((@IncludeSEWPrefix = 1 AND PrefixId = 'SEW') OR @IncludeSEWPrefix = 0)
AND ((@IncludePAWPrefix = 1 AND PrefixId = 'PAW') OR @IncludePAWPrefix = 0)
AND ((@IncludeRPLPrefix = 1 AND PrefixId = 'RPL') OR @IncludeRPLPrefix = 0)) 
```

到目前为止，我的代码在没有选中和选中一个时有效，但在选中多个复选框时不返回任何内容。所以为了尝试解决这个问题，我将代码更改为

```
WHERE 
(EffectiveDate BETWEEN @StartDate AND @EndDate) 
AND ((((@IncludeSEWPrefix = 1 AND PrefixId = 'SEW') OR @IncludeSEWPrefix = 0)
OR ((@IncludePAWPrefix = 1 AND PrefixId = 'PAW') OR @IncludePAWPrefix = 0)
OR ((@IncludeRPLPrefix = 1 AND PrefixId = 'RPL') OR @IncludeRPLPrefix = 0))) 
```

这导致无论选择什么都会返回所有行。有人可以告诉我哪里出错了吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-17T12:38:52.707

我相信这是正确的重新排列。比最初出现的更棘手的问题。`((@IncludeSEWPrefix = 1 AND PrefixId = 'SEW') OR @IncludeSEWPrefix = 0)`问题是像with这样的分隔线`AND`意味着如果两个包含为真，则一行需要同时包含两个`PrefixId`'，这是不可能的。如果你用 分隔它们`OR`，那么只有一个包含 false，意味着每一行都会通过。因此，请检查一行是否包含任何包含的前缀，否则所有包含都必须关闭。

```
WHERE EffectiveDate BETWEEN @StartDate AND @EndDate
AND 
(
    (@IncludeSEWPrefix = 1 AND PrefixId = 'SEW') OR
    (@IncludePAWPrefix = 1 AND PrefixId = 'PAW') OR 
    (@IncludeRPLPrefix = 1 AND PrefixId = 'RPL') OR
    (@IncludeSEWPrefix = 0 AND @IncludePAWPrefix = 0 AND @IncludeRPLPrefix = 0)
) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-17T10:23:34.307

试试这个

```
WHERE  
(EffectiveDate BETWEEN @StartDate AND @EndDate)  
AND 
(
(@IncludeSEWPrefix = 1 AND PrefixId = 'SEW' OR @IncludeSEWPrefix = 0) AND 
(@IncludePAWPrefix = 1 AND PrefixId = 'PAW' OR @IncludePAWPrefix = 0) AND 
(@IncludeRPLPrefix = 1 AND PrefixId = 'RPL' OR @IncludeRPLPrefix = 0)
) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-17T10:35:22.117

你有比需要更多的括号，它不会伤害，只是要注意。也许这可以帮助：

```
WHERE (EffectiveDate BETWEEN @StartDate AND @EndDate) 
    AND (   ((@IncludeSEWPrefix = 1 AND PrefixId = 'SEW') OR (@IncludeSEWPrefix = 0 AND @PrefixId <> 'SEW'))
        OR ((@IncludePAWPrefix = 1 AND PrefixId = 'PAW') OR (@IncludePAWPrefix = 0 AND @PrefixId <> 'PAW'))
        OR ((@IncludeRPLPrefix = 1 AND PrefixId = 'RPL') OR (@IncludeRPLPrefix = 0 AND @PrefixId <> 'RPL'))
        ) 
```

# iphone - 如何修复消息表达式中的接收器是未初始化值警告

> ID：11520253
> 
> 赞同：0
> 
> 时间：2012-07-17T10:06:21.840
> 
> 标签：iphone, objective-c, ios, analyzer

我收到以下有关创建 UIButton 的代码的错误消息。我将如何初始化它以修复 Analyzer 警告我的这个错误：

**逻辑错误：消息表达式中的接收者是一个未初始化的值**

错误出现在粗体行上

```
// Customize the appearance of table view cells.
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath {
    UILabel *textLabel;
    UILabel *detailTextLabel;
    UIButton *button;

    UIFont *cellFont = [UIFont boldSystemFontOfSize:10.0];
    UIFont *detailCellFont = [UIFont fontWithName:@"Helvetica" size:8.0];

    static NSString *CellIdentifier = @"Cell";
    UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier];
    if (cell == nil) {
        cell = [[[UITableViewCell alloc] initWithStyle:UITableViewCellStyleDefault reuseIdentifier:CellIdentifier] autorelease];
        cell.selectionStyle = UITableViewCellSelectionStyleNone;

        // Initialize API title UILabel
        textLabel = [[[UILabel alloc] initWithFrame:CGRectZero] autorelease];
        textLabel.autoresizingMask = UIViewAutoresizingFlexibleWidth | UIViewAutoresizingFlexibleRightMargin;
        textLabel.tag = TITLE_TAG;
        textLabel.font = cellFont;
        [cell.contentView addSubview:textLabel];

        // Initialize API description UILabel
        detailTextLabel = [[[UILabel alloc] initWithFrame:CGRectZero] autorelease];
        detailTextLabel.autoresizingMask = UIViewAutoresizingFlexibleWidth | UIViewAutoresizingFlexibleRightMargin;
        detailTextLabel.tag = DESCRIPTION_TAG;
        detailTextLabel.font = detailCellFont;
        detailTextLabel.textColor = [UIColor blackColor];
        detailTextLabel.lineBreakMode = UILineBreakModeWordWrap;
        detailTextLabel.numberOfLines = 0;
        [cell.contentView addSubview:detailTextLabel];

        // Initialize API button UIButton
        button = [UIButton buttonWithType:UIButtonTypeRoundedRect];
        button.autoresizingMask = UIViewAutoresizingFlexibleWidth | UIViewAutoresizingFlexibleRightMargin;
        [button setBackgroundImage:[[UIImage imageNamed:@"blueButton.png"]
                                    stretchableImageWithLeftCapWidth:9 topCapHeight:9]
                          forState:UIControlStateNormal];
        [button setTitleColor:[UIColor blackColor] forState:UIControlStateNormal];
        [button addTarget:self action:@selector(apiButtonClicked:) forControlEvents:UIControlEventTouchUpInside];
        [cell.contentView addSubview:button];
    } else {
        textLabel = (UILabel *)[cell.contentView viewWithTag:TITLE_TAG];
        detailTextLabel = (UILabel *)[cell.contentView viewWithTag:DESCRIPTION_TAG];
        // For the button cannot search by tag since it is not constant
        // and is dynamically used figure out which button is clicked.
        // So instead we loop through subviews of the cell to find the button.
        for (UIView *subview in cell.contentView.subviews) {
            if([subview isKindOfClass:[UIButton class]]) {
                button = (UIButton *)subview;
            }
        }
    }

    CGSize constraintSize = CGSizeMake(280.0f, MAXFLOAT);

    // The API title
    NSString *cellText = [[apiMenuItems objectAtIndex:indexPath.row] objectForKey:@"title"];
    CGSize labelSize = [cellText sizeWithFont:cellFont
                            constrainedToSize:constraintSize
                                lineBreakMode:UILineBreakModeWordWrap];
    textLabel.frame = CGRectMake(20, 2,
                                 (cell.contentView.frame.size.width-40),
                                 labelSize.height);
    textLabel.text = cellText;

    // The API description
    NSString *detailCellText = [[apiMenuItems objectAtIndex:indexPath.row] objectForKey:@"description"];
    CGSize detailLabelSize = [detailCellText sizeWithFont:detailCellFont
                                        constrainedToSize:constraintSize
                                            lineBreakMode:UILineBreakModeWordWrap];
    detailTextLabel.frame = CGRectMake(20, (labelSize.height + 4),
                                       (cell.contentView.frame.size.width-40),
                                       detailLabelSize.height);
    detailTextLabel.text = detailCellText;

    // The API button
    CGFloat yButtonOffset = labelSize.height + detailLabelSize.height + 15;
    **button.frame = CGRectMake(20, yButtonOffset, (cell.contentView.frame.size.width-40), 44);**
    [button setTitle:[[apiMenuItems objectAtIndex:indexPath.row] objectForKey:@"button"]
            forState:UIControlStateNormal];
    // Set the tag that will later identify the button that is clicked.
    button.tag = indexPath.row;

    return cell;
} 
```

谢谢你的帮助

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-17T10:14:58.237

你在代码中的任何地方都做过类似的事情吗？

```
UIButton* button = [UIButton buttonWithType:UIButtonTypeCustom]; 
```

（类型也可能是`UIButtonRoundRect`）

...或这个：

```
UIButton* button = [[UIButton alloc] initWithType:UIButtonTypeCustom]; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-17T10:43:19.230

该错误告诉您该按钮尚未初始化。
尝试更改此行

```
UIButton *button; 
```

到

```
UIButton *button = [[UIButton alloc] init]Autorelease];  //remove Autorelease if using ARC 
```

# php - 我怎样才能通过 PHP 和 Web 语言显示这个相当不寻常的日程安排是一种易于消化的方式？

> ID：11520257
> 
> 赞同：2
> 
> 时间：2012-07-17T10:06:38.873
> 
> 标签：php, css, html

我会尽力解释这一点，但请根据需要提出澄清问题：

我基本上有一个时间表，试图绘制一个事件的七个阶段，这些阶段发生在大约一周的时间里。这些数据目前采用难以阅读且难以得出结论的时间戳，我想以视觉方式呈现它。

每个阶段都有可能发生的估计时间段，这些时间可能与其他阶段重叠，因为它们是估计值（实际上通常会）。

除了估计之外，在某些阶段，我有时会知道该阶段的一部分何时会发生，并且可以肯定地知道。

该地图/时间表的目的是允许用户查看时间表并立即识别可能发生的时间段以及肯定发生的时间段。

如何将我的时间戳转换成某种视觉效果来传达这些信息？HTML 5 会是一条路吗？如果是的话，以什么方式？

谢谢您的意见

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-17T10:28:41.513

这个问题很难回答 - 所以我只会尝试您询问如何可视化信息的部分。

我可以推荐使用 highchart 库进行任何类型的统计可视化。

[http://www.highcharts.com/](http://www.highcharts.com/)

你可以在这里找到一些演示：

[http://www.highcharts.com/demo/](http://www.highcharts.com/demo/)

这一切都适用于 Javascript，甚至在旧的浏览器中也很好。

# actionscript-3 - 是否有 TweenMax 的类似物

> ID：11520258
> 
> 赞同：0
> 
> 时间：2012-07-17T10:06:43.273
> 
> 标签：actionscript-3, flash

as3 有没有 Tweenmax 的替代品？

还是更适合创建动画？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-17T12:43:01.587

在我看来，TweenLite 和 TweenMax 是目前最好的补间库。他们有一些惊人的功能，和一个非常好的插件结构。您可以补间属性和过滤器、构建序列、反向补间、操作缓动、将回调附加到 onInit、onUpdate、onFinished 以及更多功能。我已经使用它们很多年了，我很高兴我购买了 Greensock 会员资格！

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-18T00:43:21.917

有很多 AS3 Tween 引擎：Tweener、gTween、Tweensy、eaze-tween……别忘了古老的原生 fl.transitions.Tween ！

每个引擎都有它自己的特殊性，Greensock 补间引擎（TweenMax）是最流行的......它非常易于使用并且就像 Sr.Richie 所说的非常强大。他们有一个 ASDoc、非常好的示例和一个所见即所得的补间编辑器。

如果您想测试一些替代方案，[这里是](http://blog.stroep.nl/2010/11/comparing-tween-engines/)最常用的 AS3 补间引擎之间的一个小比较。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-17T10:56:28.467

如果你的意思是你想要一个替代品，还有 gtween：[http ://gskinner.com/libraries/gtween/](http://gskinner.com/libraries/gtween/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-17T11:39:26.197

检查[Tweensy](http://code.google.com/p/tweensy/) - 它运行良好，非常先进，并且没有像 TweenMax 这样的许可证限制。

# objective-c - Objective-C中的插入排序算法在iphone中实现

> ID：11520260
> 
> 赞同：3
> 
> 时间：2012-07-17T10:06:48.730
> 
> 标签：objective-c, nsarray

我正在尝试在下面显示的代码中使用 Objective-C 对 15 个随机数进行排序。代码没有按计划工作。我从插入排序 C 代码中获取了这个概念。15 个随机数生成正确，但排序不起作用。

**C代码：**

```
int i, j, index;
for (i = 1; i < array_size; ++i)
{
  index = a[i];
  for (j = i; j > 0 && a[j-1] > index; j--)
    a[j] = a[j-1];

  a[j] = index;
} 
```

**Objective-C 代码：**

```
-(IBAction)clicked_insertsort:(id)sender
{
  NSMutableArray *array = [NSMutableArray array];
  for (int x = 0; x < 15; x++) 
  {
    [array addObject: [NSNumber numberWithInt: arc4random()%200]];
  }
  NSLog(@"%@",array);
  {
    int i, j;
    id index;
    for (i = 1; i < 15; ++i)
    {
      index = [array objectAtIndex:(NSUInteger)i]; //   a[i];
      for (j = i; j > 0 && [array objectAtIndex:(NSUInteger)j-1] > index; j--)
        [array replaceObjectAtIndex: (j) withObject: [array objectAtIndex: (j-1)]];

      [array objectAtIndex:(NSUInteger)j] == index ;
    }
  }
  NSLog(@"%@",array);   
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-17T12:22:32.300

您正在比较指针，这只是按对象的内存地址对数组进行排序，而不是它们的实际值。

```
index = [array objectAtIndex:(NSUInteger)i]; //   a[i];
[array objectAtIndex:(NSUInteger)j-1] > index 
```

您需要获取 NSNumber 的原始整数值：

```
[NSNumber numberWithInt:20] != 20; // This is wrong.
[[NSNumber numberWithInt:20] intValue] == 20; // This is correct. 
```

这是您的代码，有修订：

```
-(IBAction)clicked_insertsort:(id)sender
{
  NSMutableArray *array = [NSMutableArray array];
  for (int x = 0; x < 15; x++) 
  {
    [array addObject: [NSNumber numberWithInt: arc4random()%200]];
  }
  NSLog(@"%@",array);
  {
    int i, j;
    id index;
    for (i = 1; i < 15; ++i)
    {
      index = [[array objectAtIndex:(NSUInteger)i] intValue]; //   a[i];
      for (j = i; j > 0 && [[array objectAtIndex:(NSUInteger)j-1] intValue] > index; j--)
        [array replaceObjectAtIndex: (j) withObject: [array objectAtIndex: (j-1)]];

      [[array objectAtIndex:(NSUInteger)j] intValue] == index ;
    }
  }
  NSLog(@"%@",array);   
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-02-18T15:38:31.167

实际上问题在于算法本身没有多大意义。

这一行：

```
[array objectAtIndex:(NSUInteger)j] == index ; 
```

应该：

```
[array replaceObjectAtIndex:j withObject:index]; //yes again 
```

尝试这种方式，使用现代语法：

```
-(IBAction)clicked_insertsort:(id)sender
{
    NSMutableArray *array = [NSMutableArray array];
    for (int x = 0; x < 15; x++)
    {
        [array addObject: @(arc4random()%200)];
    }
    NSLog(@"%@",array);

    NSUInteger i, j;
    for (i = 1; i < 15; ++i)
    {
        NSNumber *current = array[i];
        for (j = i; j > 0 && [array[j-1] unsignedIntegerValue] > [current unsignedIntegerValue]; j--)
            array[j] = array[j-1];

        array[j] = current;
    }
    NSLog(@"%@",array);
} 
```

运行代码并查看结果。

# webkit - 如何从中心点进行 webkit 转换高度和宽度转换？

> ID：11520266
> 
> 赞同：1
> 
> 时间：2012-07-17T10:06:57.983
> 
> 标签：webkit

是否可以从中心点缩放（转换）div的大小？我试过了，但我无法得到结果。

这是代码：

```
div {
    height: 100px;
    width: 100px;
    -webkit-transition: height, width,left,top, 1s;
    -webkit-transform-origin: 50% 50%;
    background: red;
    position:absolute;
    left:30%; top:30%;
}

div:hover {
    width: 150px;
    height:150px;
    -webkit-transition: height, width, 1s;
    background: red;
}​ 
```

[jsfiddle](http://jsfiddle.net/8ydzc/2/)

# c# - 正则表达式以避免 HTML 标记和空值

> ID：11520269
> 
> 赞同：0
> 
> 时间：2012-07-17T10:07:12.643
> 
> 标签：c#, javascript, asp.net, regex

我已经应用了文本框单击验证，并希望避免文本框中的任何 html 标记以及简单的 <（打开标记）和 >（关闭标记）。下面的代码正在工作，但我想为空字符串和 html 中的其他标签添加额外的验证。有人可以帮助修改需求的正则表达式。

```
function htmlValidation() 
 {
   var re = /(<([^>]+)>)/gi;

   if (document.getElementById(’&lt;%=TextBox2.ClientID%>’).value.match(re)){ document.getElementById(’&lt;%=TextBox2.ClientID%>’).value = “”;
          return false;
        }
   return true;
 } 
```

**更正了上面的代码**

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-17T10:28:08.420

在我看来，如果你想验证这些事情，我相信你会努力工作。

除了阻止文本框中的 HTML 内容，其他解决方案可能只是 html 实体编码 Text 属性，因此`<p>a</p>`将转换为`&gt;p&lt;a&gt;p&lt;`.

结果是您将把 HTML 呈现为“文本”，而不是让 Web 浏览器对其进行解释。

检查此 MSDN 文章：

*   [http://msdn.microsoft.com/en-us/library/73z22y6h(v=vs.110).aspx](http://msdn.microsoft.com/en-us/library/73z22y6h(v=vs.110).aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-19T11:05:37.140

```
$("#<%= btnAdd.ClientID %>").click(function () {
            var txt = $("#<%= txtBox1.ClientID %>");
            var svc = $(txt).val();  //Its Let you know the textbox's value 
            var re = /(<([^>]+)>)/gi;
            if(txt.val()!=""){
            if (!txt.val().match(re)) {
               //my Operations 
               //goes here
                });
                return false;
            }
            else {
                alert("Invalid Content");
            }
            }
            else {
            alert("Blank value selected");
            } 
```

我使用 Jquery 函数来检查正则表达式。此问题是与 [Using Jquery to add items in Listbox from Textbox的链接问题](https://stackoverflow.com/questions/11358807/using-jquery-to-add-items-in-listbox-from-textbox)

现在我可以将此标记为我的最终答案。

# android - android中的数据库更新

> ID：11520272
> 
> 赞同：0
> 
> 时间：2012-07-17T10:07:18.260
> 
> 标签：android, database

在我的应用程序中，我有一个数据库，其中有 2 个表。我有 2 个以下查询：

1.是否可以创建具有某些默认值的数据库？2.我有 1 个屏幕，其中有 5 个编辑框，1 个保存按钮。当用户按下保存按钮时，应该更新数据库中的 5 个编辑框值（替换旧的）？

请帮我。

这是用于创建数据库：

```
private static final String DATABASE_SPIN=
"create table spinner(_id integer primary key autoincrement,"+" spin text not null);"; 
```

这是exesql：

```
public void onCreate(SQLiteDatabase db)
{
db.execSQL(DATABASE_SPIN);
} 
```

我的填充代码是：

```
Cursor c=db.getAllTitlesSpin();
           startManagingCursor(c);
           int spinColumnIndex = c.getColumnIndexOrThrow("spin"); 

//          String group[]=getResources().getStringArray(R.array.group_array);

            ArrayAdapter<String> adapter1 = new ArrayAdapter<String>(
                    this, android.R.layout.simple_spinner_item);
            adapter1.setDropDownViewResource(android.R.layout.simple_spinner_dropdown_item);
            s2.setAdapter(adapter1);    

            if (c.moveToFirst()) { 
                do { 
                    adapter1.add(c.getString(spinColumnIndex)); 
                } 
                while (c.moveToNext()); 
                if (db != null) { 
                db.close(); 
            } 
            } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-17T10:18:09.450

*   您可以在列中创建具有默认值的表

> 每次通过不为所有表列提供显式值的 INSERT 语句将行插入表时，存储在新行中的值由它们的默认值确定，如下所示：
> 
> 如果列的默认值是常量 NULL、文本、blob 或有符号数字值，则该值直接用于新行。
> 
> 如果列的默认值是括号中的表达式，则表达式会为插入的每一行计算一次，并将结果用于新行。
> 
> 如果列的默认值为 CURRENT_TIME、CURRENT_DATE 或 CURRENT_TIMESTAMP，则新行中使用的值是当前 UTC 日期和/或时间的文本表示。对于 CURRENT_TIME，值的格式为“HH:MM:SS”。对于 CURRENT_DATE，“YYYY-MM-DD”。CURRENT_TIMESTAMP 的格式为“YYYY-MM-DD HH:MM:SS”。

*   您可以使用查询的输出创建和填充表`Select`（[CREATE TABLE ... AS SELECT 语句](http://www.sqlite.org/lang_createtable.html)）
*   您可以复制一个表的内容并使用它来填充另一个表，只要表的结构相同。`INSERT INTO Destination SELECT * FROM Source;`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-17T10:35:30.340

1.  如果您使用 SQLiteOpenHelper 创建数据库，请使用 onCreate 方法创建数据库，然后使用另一个 db.execSQL() 调用输入要存储的默认值
2.  您可以像在任何其他数据库中一样更新 sqlitedb 中的值 - 使用 _id 字段来标识要更新的行

如果您只存储 5 个值，[SharedPreferences](http://developer.android.com/reference/android/content/SharedPreferences.html)是一种更好的方法。

# php - 按 id 列表过滤的 Sphinx 全文搜索

> ID：11520274
> 
> 赞同：1
> 
> 时间：2012-07-17T10:07:34.367
> 
> 标签：php, full-text-search, sphinx

我正在考虑在项目中实施[Sphinx](http://www.sphinxsearch.com)。

但是我找不到它是否可以在一个大的预定义范围内搜索。

假设用户过滤各种过滤器参数（返回 10.000 条记录/ID），还有文本搜索。我可以让 Sphinx 进行（完整）文本搜索，将其限制为之前 mysql 搜索的记录。

我知道您可以给 Sphinx 提供[过滤条件](http://www.ibm.com/developerworks/library/os-php-sphinxsearch/)（例如 $sphinx->SetFilter( 'model', array( 3 ) );)。但是是否可以提供一个巨大的数组作为过滤器（不让它变慢）？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-17T11:13:52.440

在 SphinxQL 中可能更容易，但也可以在 API 中使用，例如

```
$sphinx->setSelect("*,IN(id,2,3,4,5,6,7,8) as myint");
$sphinx->setFilter('myint',array(1)); 
```

不确定性能，不会很好。

# jquery-mobile - jQuery mobile：“swipeleft”和“swiperight”只工作一次

> ID：11520276
> 
> 赞同：3
> 
> 时间：2012-07-17T10:07:37.300
> 
> 标签：jquery-mobile, jquery-events

我有一个页面，向左滑动会调出下一页（不同的 url），在下一页上，向右滑动会调出上一页。该代码第一次运行良好。但是，下一次就不行了！如果我手动刷新页面，它会再次开始工作......所以它一定是初始化问题。

我相信你们中的一些人一定在某个时候遇到过这个问题。对于那些有的人，我想问你 - 实现这样一个功能的正确方法是什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-18T14:05:02.713

这是我最终使用的：

```
$(document).bind("pageinit", function(event) {
    var count = 1;
    var nextPage;
    var prevPage;

    //build 1st page of results
    nextPage = "page-"+count+".html";
    $("#showList").load(nextPage,function(){
        $('#showList').trigger('create');
    });

    //detect swipeleft
    $("#showList").bind("swipeleft",function(event) {
        //verify if there is next page
        if(count < 3) {
            // go to next page
            count++;
            nextPage = "page-"+count+".html";
            $("#showList").load(nextPage,function(){
                alert(nextPage+" loaded");
                $('#resultList').trigger('create');
            });
        } else {
            //else notify user he has reached end of results
            alert("Reached end of results");
        }
    });
    //detect swiperight
    $("#showList").bind("swiperight",function(event) {
        //verify it's not 1st page
        if(count > 1) {
            count--;
            prevPage = "page-"+count+".html";
            //go to previous results page
            $("#showList").load(prevPage,function(){
                alert(prevPage+" loaded");
                $('#showList').trigger('create');
            });
        } else {
            //else notify user he's on 1st page
            alert("You are on the 1st page");
        }
    });
}); 
```

它本质上使用 2 个滑动事件 - swipeleft 和 swiperight - 仅更新列表中出现单个项目的部分，即介于`<ul id ="showList">`和之间`</ul>`。滑动现在每次都有效。

部分解决方案来自这里：http: [//blog.stikki.me/2011/08/18/loading-dynamic-content-in-jquery-mobile-with-jquerys-load-function/](http://blog.stikki.me/2011/08/18/loading-dynamic-content-in-jquery-mobile-with-jquerys-load-function/)

这适合我的实现，但另一方面是 URL 在页面中保持不变。

我仍然对任何其他解决方案持开放态度。

# integration-testing - 所有测试都通过了，但竹子构建失败并显示“没有找到失败的测试，可能发生了编译错误”。

> ID：11520282
> 
> 赞同：7
> 
> 时间：2012-07-17T10:08:12.597
> 
> 标签：integration-testing, bamboo, jbehave

我应该在竹子中运行一些 jbehave（自动化）测试。一旦测试运行，我将生成一些与 junit 兼容的 xml 文件，以便竹子可以理解相同的内容。所有的 jbehave 测试都作为脚本的一部分运行，因为我需要在单独的显示屏中运行 jbehave 测试（记住这些是自动浏览器测试）。示例脚本如下。

前任：

```
export DISPLAY=:0 && xvfb-run --server-args="-screen 0, 1024x768x24" 
mvn clean integration-test -DskipTests -P integration-test -Dtest=* 
```

我还有一个 junit 解析器任务，它指向生成的 junit 兼容 xml 文件。因此，一旦竹子构建运行并且即使所有测试都通过了，我也会得到红色构建，并显示消息“没有找到失败的测试，可能发生了编译错误”。

有人可以在这方面帮助我吗？

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-07-17T22:19:20.853

您的构建脚本可能会生成成功的测试报告，但您的一项（或两项，可能）任务失败了。这意味着失败可能发生在您的测试完成后。检查您的构建日志是否有错误。您也可以尝试登录到您的 Bamboo 服务器（作为竹用户）并手动运行命令。

过去，当我们的测试任务在测试运行中途崩溃时，我曾看到此消息，导致 Bamboo 忽略了一个格式错误的报告和一堆成功的报告。

*检查构建日志以确保您的测试确实在运行。如果 mvn clean 没有清除测试报告目录，Bamboo 可能只是在解析陈旧的测试报告。

* * *

编辑：（响应 Kishore 的链接）

看起来你杀死 Xvfb 的任务是导致构建失败的原因。

```
18-Jul-2012 09:50:18    Starting task 'Kill Xvfb' of type 'com.atlassian.bamboo.plugins.scripttask:task.builder.script'

18-Jul-2012 09:50:18    
Beginning to execute external process for build 'Functional Tests - Application Release Test - Default Job'
 ... running command line: 
/bin/sh
  /tmp/FUNC-APPTEST-JOB1-91-ScriptBuildTask-4153769009554485085.sh
 ... in: /opt/bamboo-home/xml-data/build-dir/FUNC-APPTEST-JOB1
 ... using extra environment variables: 

<..snip (no meaningful output)..>

18-Jul-2012 09:50:18    Failing task since return code was 1 while expected 0

18-Jul-2012 09:50:18    Finished task 'Kill Xvfb' 
```

你的“Kill Xvfb”脚本是做什么的？你在尝试像 pkill -f "[x]vfb" 这样的东西吗？如果 pkill -f 无法将表达式与任何进程匹配，则它会静默返回非零值。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-03-19T08:07:18.183

我的解决方案是制作一个“脚本”任务：

```
#!/bin/bash
/usr/local/bin/phpcs --report=checkstyle --report-file=build/logs/checkstyle.xml --standard=PSR2 ./lib | exit 0 
```

它总是以状态 0 退出。

这是因为 PHP 代码嗅探器在仅发现 1 个导致构建失败的编码违规（警告/错误）时返回退出状态 1。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-19T19:04:34.090

原来是一个简单的修复。

一般竹子行为是扫描整个日志并查看任何故障代码（1）。对于这个特定的配置，我有一些 6 个脚本，其中一个是杀死 xvfb（帧缓冲区）。由于某种原因，服务器无法杀死 xvfb，并且该任务返回了失败代码。因此，尽管所有测试都通过了，但竹子从以前的任务中得到了一个错误代码，并且构建失败了。

当前的修复是删除杀死 xvfb 并且构建变绿的任务！\o/。

# ruby - Apache 上的 Ruby、Sinatra 和 Passenger 配置

> ID：11520284
> 
> 赞同：1
> 
> 时间：2012-07-17T10:08:13.803
> 
> 标签：ruby, sinatra, passenger

这可能是一个简单的问题，但我想问的是避免绕圈子跑。

我已经在 Ubuntu 上安装了 ruby​​ 1.9.2 并设置了乘客以在机器上运行 Apache 2.2。查看网站时出现以下错误：

```
Permission denied - log/sinatra.log 
```

我已经更改了日志目录的权限，但仍然没有运气。乘客的完整跟踪可以在网站页面上看到：http: [//monkeh.me/](http://monkeh.me/)

有谁知道我是否/我做错了什么或发生了什么？

非常感谢

**编辑**

我发现该站点在生产服务器上的端口 4567 上使用 WEBrick 运行良好，但使用Passenger 时出现相同的代码错误。我添加了显示错误异常，所以现在得到以下信息：

```
NoMethodError at /
undefined method `include?' for nil:NilClass
file: resource.rb location: block in attributes= line: 332 
```

你可以在这里看到：[http ://www.monkeh.me/?url=http://www.google.co.uk](http://www.monkeh.me/?url=http://www.google.co.uk)

有任何想法吗？请帮忙 ：）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-17T15:48:31.367

nil 类的新问题是由于没有正确确定类。加载模型后，我需要添加以下内容：

```
DataMapper.finalize 
```

感谢@Frost 在评论中的持续帮助。

# ruby-on-rails-3 - 验证包含_of 接受字符串作为假值

> ID：11520288
> 
> 赞同：1
> 
> 时间：2012-07-17T10:08:27.360
> 
> 标签：ruby-on-rails-3, mongoid

我正在使用 MonogID 创建一些模型，其中一个是可以接受 nil 值的布尔值。这是我定义模型的方式。

```
class Status
  include Mongoid::Document
  field :pending, type: Boolean
  validates :pending, inclusion: { in: [true, false], allow_nil: true }
  #...
end 
```

如您所见，我将接受的值设置为布尔值和 nil。问题是当我分配一个字符串时，它被转换为 false 并被接受。这样，验证不起作用。在这种情况下，第二个测试失败了。

```
it { [true, false, nil].each { |value| should allow_value(value).for(:pending) } }
it { ['not_valid', ''].each { |value| should_not allow_value(value).for(:pending) } } 
```

现在，我提出的唯一解决方案是制作一个自定义验证器来检查 TrueClass、FalseClass 或 NilClass 的值，但似乎我失去了一个更简单的解决方案。我在网上查了一下，但没有找到解决办法。

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-17T14:29:20.273

您无法找到解决方案，因为当您将值分配给布尔字段时，它会将该值解释为 true、false 或 nil，并且当您尝试保存它时，它将具有其中一个值（true、false、nil）将通过验证。

# c# - 模拟索引属性

> ID：11520291
> 
> 赞同：11
> 
> 时间：2012-07-17T10:08:38.453
> 
> 标签：c#, unit-testing, moq

我正在使用 Moq 编写单元测试。我创建了一个模拟对象。现在，当我尝试模拟它的属性时，我收到错误“表达式树可能不包含索引属性”

这是我的代码。

```
public Node GetNode(IMyInterface interface, string itemName)
{
    return interface.Items[itemName];
} 
```

这是单元测试

```
var expected = new Node();
var itemName = "TestName";
var mock = new Mock<IMyInterface>();
mock.Setup(f => f.Items[itemName]).Returns(expected);
var target = new MyClass();

var actual = target.GetNode(mock.Object, itemName);
Assert.AreEqual(expected, actual); 
```

这条线给了我错误。

```
mock.Setup(f => f.Items[itemName]).Returns(expected); 
```

我怎样才能起订量这个功能。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-07-17T11:23:34.987

接口是一个 COM 对象，并且有 get 函数，所以不要使用索引器直接访问属性，而是使用 get 函数，

```
mock.Setup(f => f.get_Items(itemName)).Returns(expected); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2019-03-15T11:02:50.993

在 ASP.NET Core 2.2 中使用 Moq，get_Items 设置不起作用。但这确实：

```
Mock<IConfiguration> configuration = new Mock<IConfiguration>();
configuration.Setup(x => x[key]).Returns(value); 
```

# javascript - 自动生成的 jQuery ajax 响应不会捕获已经加载的 jquery API 脚本效果？

> ID：11520293
> 
> 赞同：1
> 
> 时间：2012-07-17T10:08:42.510
> 
> 标签：javascript, jquery-ui, jquery, multi-select

我正在为[jQuery UI MultiSelect-dropdown Widget](http://www.erichynds.com/jquery/jquery-ui-multiselect-widget/)

使用 Eric Hynds jquery API 我有一个下拉菜单，可以选择工作类别（多选）它会影响包含的 api 脚本。

在每次从下拉列表中选择时，我都会发出一个 jQuery ajax 请求来查找特定类别的工作卷。并再次在下拉列表中显示这些作业卷，以提供 jquery API 的多选效果。但是生成的下拉菜单不会将多个下拉菜单作为第一个下拉菜单生效。我已经完成了所有必要的事情，比如为生成的下拉菜单初始化 API 调用。

这是代码：

```
$(function(){
    $("#job_locations, #industries, #job_functions, #roll_list").multiselect({
        noneSelectedText: "Select an Option",
            selectedText: "# of # checked"
        }).multiselectfilter();
     }); 
```

`#job_locations, #industries, #job_functions`采用 API 的效果，但生成的下拉列表 #roll_list 不会产生这种效果。这个 ids 被赋予`<select>`标签

![在此处输入图像描述](../Images/773b365e03cf3c4db78420deb5c570fd.png)

第三个下拉菜单没有显示效果

是否有类似生成的结果不会捕捉已加载脚本的效果？

**编辑：** 我用来打印 ajax 响应的 php 代码

```
$select=' <select id="roll_list" name="roll_list[]"   multiple="multiple">';
    foreach($array as $function_name=>$roll_array){
        $select.="<optgroup label='".$function_name."'>";
        foreach($roll_array as $index=>$roll_info){
            $select.="<option value='".$roll_info['role_id']."'>".$roll_info['role_name']."</option>";
                        }
        $select.="</optgroup>";
        }
    $select.="</select>";

    echo $select; 
```

HTML 代码：

```
<select id="roll_list" name="roll_list[]" class="multi_select_dropdown" multiple="multiple" onchange="dispInventry();" style="width: 400px;">
<optgroup label="Customer Service/ Call Centre/ BPO">
<option value="14">Fresher</option>
<option value="15">Trainee/ Management Trainee</option>
<option value="16">Technical Support Executive ( voice)</option>
<option value="17">Technical Support Representative (Non- v)</option>
<option value="46">External Consultant</option>
</optgroup>
</select> 
```

我做错了什么？如何解决这个问题？如果需要，我可以提供所有必要的代码。
提前感谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-17T10:24:20.343

制作

```
function create_mutisilect() {

    $("#job_locations, #industries, #job_functions, #roll_list").multiselect({
        noneSelectedText: "Select an Option",
            selectedText: "# of # checked"
        }).multiselectfilter();

} 
```

它是一个单独的函数，位于 document.ready 之外，并且

> 1.在document.ready中调用它
> 
> 2.在你的ajax调用之后调用它

```
$(document).ready(function(){

create_mutisilect();//1

$.ajax({
  url: 'ajax/test.html',
  success: function(data) {
    $('.result').html(data);

ceate_mutisilect();//2

  }
});

}); 
```

# iphone - startMonitoringForRegion 的最小精度（以米为单位）

> ID：11520296
> 
> 赞同：1
> 
> 时间：2012-07-17T10:08:57.703
> 
> 标签：iphone, ios, core-location, cllocationmanager

我在 iOS 5 中遇到了 startMonitoringForRegion 方法的问题。文档说该方法采用参数“准确度”：

```
- (void)startMonitoringForRegion:(CLRegion *)region desiredAccuracy:(CLLocationAccuracy)accuracy 
```

我目前正在开发一个应用程序，当他在距离监控点 25 米半径内时应该通知用户。应用程序使用具有 kCLLocationAccuracyBestForNavigation 设置的 GPS。我正在创建 (CLRegion *) 区域，如下所示：

```
CLRegion *pointRegion = [[CLRegion alloc] initCircularRegionWithCenter:pointLocation radius:25.0 identifier:identifier]; 
```

并在 startMonitoringForRegion 中为 kCLLocationAccuracyBestForNavigation 设置精度参数。

区域监控在我的应用程序中运行良好，但是当用户距离监控区域大约 100 米而不是 25 米时，didEnterRegion 方法会触发。

startMonitoringForRegion 中是否存在 Apple 文档中未描述的半径最小值，或者我做错了什么？是否可以将区域监控设置为相对较小的值（如 5-25 米）？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-18T00:37:24.380

除非打开显着位置更改，否则您无法将 iOS 区域监控设置为较低的值。它只在美国的大城市工作，因为区域监控是基于蜂窝网络的。

# logging - Symfony2：在登录不同文件时使用处理器

> ID：11520298
> 
> 赞同：2
> 
> 时间：2012-07-17T10:09:01.370
> 
> 标签：logging, symfony, processor, formatter

我想将我的应用程序日志写入另一个文件，而不是 Symfony2 写入自己的日志和系统日志。我知道我需要像这样创建自己的服务：

```
services:
    actionslogger:
        class: Symfony\Bridge\Monolog\Logger
        arguments: [app]
        calls:
             - [pushHandler, [@actionslogger_handler]]
    actionslogger_handler:
        class: Monolog\Handler\StreamHandler       
        arguments: [%kernel.logs_dir%/actions_%kernel.environment%.log, 200] 
```

当我使用*$logger = $this->get('actionslogger');时效果很好* 在我的应用程序中，没关系。但我也想使用格式化程序和处理器来管理我的日志写入方式。为此，我使用以下配置：

```
services:
    actionslogger.formatter.session_request:
        class: Monolog\Formatter\LineFormatter
        arguments:
            - "[%%datetime%%] [%%extra.token%%] %%channel%%.%%level_name%%: %%message%%\n"

    actionslogger.processor.session_request:
        class: My\Bundle\LogProcessor
        arguments:  [ @session ]
        tags:
            - { name: actionslogger.processor, method: processRecord } 
```

我可以将此格式化程序和处理器与 Symfony2 默认记录器与此配置一起使用：

```
monolog:
    handlers:
        main:
            type:  stream
            path:  %kernel.logs_dir%/%kernel.environment%.log
            level: debug
            formatter: actionslogger.formatter.session_request 
```

但是如果我可以将格式化程序与我自己的记录器一起使用，我就不能使用处理器。这是我的配置：

```
services:
    actionslogger.formatter.session_request:
        class: Monolog\Formatter\LineFormatter
        arguments:
            - "[%%datetime%%] [%%extra.token%%] %%channel%%.%%level_name%%: %%message%%\n"

    actionslogger.processor.session_request:
        class: My\Bundle\LogProcessor
        arguments:  [ @session ]
        tags:
            - { name: actionslogger.processor, channel: app, method: processRecord, handler: @actionslogger_handler }

    actionslogger:
        class: Symfony\Bridge\Monolog\Logger
        arguments: [app]
        calls:
             - [pushHandler, [@actionslogger_handler]]
    actionslogger_handler:
        class: Monolog\Handler\StreamHandler       
        arguments: [%kernel.logs_dir%/actions_%kernel.environment%.log, 200]
        calls:
             #- [pushProcessor, [???]]
             - [setFormatter, [@actionslogger.formatter.session_request]] 
```

处理器配置中的标签通道和处理程序似乎没用。

我该怎么做才能使处理器与我的记录器一起工作？我应该在注释行中将什么传递给 pushProcessor 方法（如果这可能是一个有效选项）？

谢谢您的帮助。

注意：使用 Symfony 2.0.0

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-10-15T15:59:15.500

将您的`processRecord`方法重命名为`__invoke`. 这使得 LogProcessor 实例可调用，并且您将能够将相应的服务作为处理器传递。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-18T12:33:46.573

回答我自己：

好吧，我找不到如何设置它，所以我最终得到了这个不太重的解决方案：

我创建了一个非常简单的新记录器，并在构造函数中影响了我全新的处理器，因此文件位于 My/Bundle 中，如下所示：

```
#LogProcessor.php

use Symfony\Component\HttpFoundation\Session;
class LogProcessor
{
    private $session;
    private $token;
    public function __construct(Session $session)
    {
        $this->session = $session;
    }
    public function processRecord(array $record)
    {
        if (null === $this->token) {
            try {
                $this->token = ($this->session->getId());
            } catch (\RuntimeException $e) {
                $this->token = '????????';
            }
            $this->token .= '#' . substr(uniqid(), -8);
        }
        $record['extra']['token'] = $this->token;
        $record['extra']['context'] = "";
        foreach($record['context'] as $key=>$value) {
            $key=str_replace(array("=","#","|"),"",$key);
            $value=str_replace(array("=","#","|"),"",$value);
            $record['extra']['context'].=$key."=".$value."#";
        }
        return $record;
    }
}

#MyLogger.php

use Symfony\Bridge\Monolog\Logger;
use Symfony\Component\HttpFoundation\Session;
use My\Bundle\LogProcessor;

class MyLogger extends Logger {
    private $session;
    private $processor;

    public function __construct($name, Session $session)
    {
        parent::__construct($name);
        $this->session= $session;
        $this->processor= new LogProcessor($session);
        $this->pushProcessor((array($this->processor, 'processRecord')));
    }   
} 
```

（如果我以后想修改 Logger 的 addRecord 方法，这甚至会派上用场）

然后我创建一个这样的新服务：

```
#app/config/config.yml or src/My/Bundle/Resources/config/services.yml (if imported in app/config/config.yml)

services:
    mylogger:
        class: My\Bundle\MyLogger
        arguments: [app, @session]
        calls:
             - [pushHandler, [@mylogger.handler]]
    mylogger.handler:
        class: Monolog\Handler\StreamHandler       
        arguments: [%kernel.logs_dir%/actions_%kernel.environment%.log, 200] # 200 means "INFO"
        calls:
             - [setFormatter, [@monolog.formatter.compactformat]]
    monolog.formatter.compactformat:
        class: Monolog\Formatter\LineFormatter
        arguments:
            - "%%datetime%%|%%channel%%|%%level_name%%|%%extra.token%%|%%message%%|%%extra.context%%\n" 
```

我来了。我现在可以使用我的新日志服务和我的格式化程序/和/我的处理器，并用它们做我想做的事情（这里：以易于使用的格式添加会话 ID 和日志上下文信息）。

```
#MyController.php
public function myMethod() {
    ...
    $logger = $this->get('mylogger');
    $logger->info('ACCESS PAGE', array('user'=>$userName, 'IP'=>$userIP, 'section'=>$section));
    ...
} 
```

无论如何，**如果有人回答了我的第一个问题**（关于如何直接在配置中链接个人日志服务上的处理器），请在此处发布。

# android - 将价值从一项活动传递到另一项活动

> ID：11520299
> 
> 赞同：0
> 
> 时间：2012-07-17T10:09:02.323
> 
> 标签：android, mysql, soap, android-intent

我使用soap webservices 开发了一个登录表单示例。

在我的应用程序中，我有一个开始活动 HomePage.HomePage 并且我有一个按钮（我的帐户）。当我单击`myaccount`按钮时，它会成功重定向`androidloginexampleactivity`。

在这里我输入详细信息`username`和`password`. 细节是正确的，这意味着它被重定向到主页并通过`username`. 我登录成功，但之后它被强制关闭。

这些是我的编码部分：

Homepage.java 是

```
public class HomePage extends Activity {
private Button account; 
private TextView tv; 
/** Called when the activity is first created. */
@Override
public void onCreate(Bundle savedInstanceState) {
super.onCreate(savedInstanceState);
setContentView(R.layout.home);

Button account = (Button) findViewById(R.id.account);
TextView tv = (TextView) findViewById(R.id.textView1);
       tv.setText("Welcome ,"+getIntent().getExtras().getString("username"));

// Listening to register new account link
account.setOnClickListener(new View.OnClickListener() {
   public void onClick(View v) {
       Intent i = new Intent(getApplicationContext() , AndroidLoginExampleActivity.class);
       startActivity(i);
   }
}); 

  }

  } 
```

AndroidLoginExampleActivity.java

```
 public class AndroidLoginExampleActivity extends Activity {
  private final String NAMESPACE = "http://ws.userlogin.com";
  private final String URL = "http://192.168.1.168:8085/Login/services/Login?wsdl";
  private final String SOAP_ACTION = "http://ws.userlogin.com/authentication";
  private final String METHOD_NAME = "authentication";
  /** Called when the activity is first created. */
   @Override
   public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);
    Button login = (Button) findViewById(R.id.btn_login);
    login.setOnClickListener(new View.OnClickListener() {

    public void onClick(View arg0) {
    loginAction();

    }
   });
  }

  private void loginAction(){
   SoapObject request = new SoapObject(NAMESPACE, METHOD_NAME);

    EditText userName = (EditText) findViewById(R.id.tf_userName);
    String user_Name = userName.getText().toString();
    EditText userPassword = (EditText) findViewById(R.id.tf_password);
    String user_Password = userPassword.getText().toString();

  //Pass value for userName variable of the web service
    PropertyInfo unameProp =new PropertyInfo();
    unameProp.setName("userName");//Define the variable name in the web service method
    unameProp.setValue(user_Name);//set value for userName variable
    unameProp.setType(String.class);//Define the type of the variable
    request.addProperty(unameProp);//Pass properties to the variable

  //Pass value for Password variable of the web service
    PropertyInfo passwordProp =new PropertyInfo();
    passwordProp.setName("password");
    passwordProp.setValue(user_Password);
    passwordProp.setType(String.class);
    request.addProperty(passwordProp);

    SoapSerializationEnvelope envelope = new SoapSerializationEnvelope(SoapEnvelope.VER11);
    envelope.setOutputSoapObject(request);
    HttpTransportSE androidHttpTransport = new HttpTransportSE(URL);

    try{
        androidHttpTransport.call(SOAP_ACTION, envelope);
           SoapPrimitive response = (SoapPrimitive)envelope.getResponse();
           String status = response.toString();
           TextView result = (TextView) findViewById(R.id.tv_status);
           result.setText(response.toString());

           if(status.equals("Success!"))
            {
               Intent intent = new    Intent(AndroidLoginExampleActivity.this,HomePage.class);
               intent.putExtra("username",userName.getText().toString());
               startActivity(intent);

            }
           else
            {
                // Code for Login failure 
            }
           }

    catch(Exception e){

      }

      }

      } 
```

我该如何解决dis错误？

这是我的 logcat 窗口：

```
07-17 15:52:00.997: E/AndroidRuntime(1798): FATAL EXCEPTION: main
07-17 15:52:00.997: E/AndroidRuntime(1798): java.lang.RuntimeException: Unable to start activity ComponentInfo{com.androidlogin.ws/com.androidlogin.ws.HomePage}: java.lang.NullPointerException
.
.
.
dalvik.system.NativeStart.main(Native Method)
 07-17 15:52:00.997: E/AndroidRuntime(1798): Caused by: java.lang.NullPointerException
 07-17 15:52:00.997: E/AndroidRuntime(1798):    at com.androidlogin.ws.HomePage.onCreate(HomePage.java:30) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-17T11:20:19.987

只需检查您的额外内容是否为空：

```
if(getIntent().getExtras() != null) {
    tv.setText("Welcome ," + getIntent().getExtras().getString("username"));
} 
```

只需添加我在**HomePage.Java中所述的 if() 条件**

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-17T10:19:02.923

您必须`AndroidLoginExampleActivity`通过调用 `startActivityForResult(Intent, int)`而不是`startActivity()`. 这样您就可以向被调用的活动发送数据*并从被**调用*的活动接收数据。

供您参考阅读 -[活动。](http://developer.android.com/reference/android/app/Activity.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-04-28T09:24:19.607

您的问题：将价值从一项活动传递到另一项活动 + ？

我的回答：您可以使用 SharedPreferences 将值从一个活动传递到另一个活动。

要设置一个值：

```
String inputName = "Peter";
String inputPassword = "I love Stackoverflow";
SharedPreferences prefs = getSharedPreferences("myPrefs", 0);
SharedPreferences editor = prefs.edit();
editor.putString("accountName", inputName);
editor.putString("accountPassword", inputPassword);
editor.commit(); 
```

要在您的其他活动中获取 inputName 和 inputPassword：

```
String prefOutputAccountName = "no name";
String prefOutputAccountPassword = "no password";
SharedPreferences prefs = getSharedPreferences("myPrefs", 0);
prefOutputAccountName = prefs.getString("accountName", prefOutputAccountName);
prefOutputAccountPassword = prefs.getString("accountPassword", prefOutputAccountPassword); 
```

我希望你的问题是正确的。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-17T10:46:19.867

您的问题：**将价值从一项活动传递到另一项活动**+ ？

我的回答：您可以使用`SharedPreferences`将值从一个活动传递到另一个活动。

要设置一个值：

```
String inputName = "Peter";
String inputPassword = "I love Stackoverflow";
SharedPreferences prefs = getSharedPreferences("myPrefs", 0);
SharedPreferences editor = prefs.edit();
editor.putString("accountName", inputName);
editor.putString("accountPassword", inputPassword);
editor.commit(); 
```

要在您的其他活动中获取 inputName 和 inputPassword：

```
String prefOutputAccountName = "no name";
String prefOutputAccountPassword = "no password";
SharedPreferences prefs = getSharedPreferences("myPrefs", 0);
prefOutputAccountName = prefs.getString("accountName", prefOutputAccountName);
prefOutputAccountPassword = prefs.getString("accountPassword", prefOutputAccountPassword); 
```

我希望你的问题是正确的。

# wpf - 如何使 DevExpress 网格行闪烁？

> ID：11520301
> 
> 赞同：0
> 
> 时间：2012-07-17T10:09:07.777
> 
> 标签：wpf, devexpress

尝试对 DevExpress 网格中的单行执行简单的红色闪烁效果。

我在网格的行上应用了以下样式：

```
<Style x:Key="AlertedRowStyle" TargetType="{x:Type dxg:GridRowContent}">
    <Style.Triggers>
        <DataTrigger Binding="{Binding Path=Row.IsAlerted}" Value="False">
            <DataTrigger.EnterActions>
                <BeginStoryboard>
                    <Storyboard>
                        <ColorAnimation
                                    Storyboard.TargetProperty="Background"
                                    To="Red"
                                    Duration="0:0:0.500"
                                    AutoReverse="True"
                                    RepeatBehavior="Forever">
                            <ColorAnimation.EasingFunction>
                                <CircleEase EasingMode="EaseOut" />
                            </ColorAnimation.EasingFunction>
                        </ColorAnimation>
                    </Storyboard>
                </BeginStoryboard>
            </DataTrigger.EnterActions>
            <DataTrigger.ExitActions>
                <BeginStoryboard>
                    <Storyboard>
                        <ColorAnimation
                                    Storyboard.TargetProperty="Background"
                                    To="White"
                                    Duration="0:0:0.500" />
                    </Storyboard>
                </BeginStoryboard>
            </DataTrigger.ExitActions>
        </DataTrigger>
    </Style.Triggers>
</Style> 
```

它会导致以下异常：

***“System.Windows.Media.Animation.ColorAnimation”动画对象不能用于动画属性“背景”，因为它的类型不兼容“System.Windows.Media.Brush”。***

还尝试更改`Storyboard.TargetProperty`为`Background.Color`并得到：

***无法解析属性路径“Background.Color”中的所有属性引用。验证适用的对象是否支持这些属性。***

我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-17T10:20:02.390

`Storyboard.TargetProperty="Background.Color"`是正确的。尝试

```
<Style x:Key="AlertedRowStyle" TargetType="{x:Type dxg:GridRowContent}">
    <Setter Property="Background" Value="Transparent" />
    <Style.Triggers>
        ... 
```

我猜背景是空的，所以故事板找不到动画的东西。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-17T10:22:19.393

尝试

```
Storyboard.TargetProperty="Background.(SolidColorBrush.Color)" 
```

为我工作。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-17T14:07:38.897

你可以打开一个新线程。在此线程中，您使用循环。在此循环中，您可以更改行的背景颜色。在循环中，您将线程休眠 0.3 秒或其他时间。所以它应该看起来像闪烁。

问候

# mysql - Mysql 多对多关系日志

> ID：11520302
> 
> 赞同：0
> 
> 时间：2012-07-17T10:09:09.883
> 
> 标签：mysql, logging, many-to-many, relation

我有一个表，例如`orders`(id, name, product, ... )，我有它的日志表，触发器在其中写入：`orders_log(id, ts, order_id, name, product, ...)

表与表（id，名称，价格，...）通过表（order_id，service_id）`orders`具有ManyToMany关系`service``orders_services`

用户通过网络表单可以添加或删除订单服务，我必须存储有关此操作的日志并在用户编辑订单时将其显示给用户。

解决此问题的最佳方法是什么？我有不止一个 manyToMany 关系，还有一些`orders`表的一对一关系。我正在使用mysql。谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-17T10:20:19.720

我试图实现一个基于触发器的系统，但我发现它很麻烦并放弃了它。

我在基于存储过程的系统上取得了部分成功，该存储过程复制了包含原始字段 + 事务 ID 的影子表中的行。我保留了一个单独的表，其中包含与日期/用户等信息相关联的事务 ID。这个系统允许我们为一组操作分配一个唯一的事务 id，然后根据这些查询这些影子表。

我目前正在使用 Java，我的审计日志是通过使用 XStream 在包含类名的表中序列化我的对象来实现的，一些标识对象 id 的 locums，日期 + xml 文本。我认为这是审计日志的一个很好的解决方案，因为记录的信息会随着您的对象模型而增长。根据后续 xml 之间的差异创建包含更改的报告也很容易。

# javascript - jQuery 中的正确语法是什么

> ID：11520305
> 
> 赞同：0
> 
> 时间：2012-07-17T10:09:15.703
> 
> 标签：javascript, jquery

我有一个 jquery 函数，它在提交事件时生成一个 url。如果未定义一个参数，则应跳过添加到 url

```
 var category        =$("#prod_category").val();
        var group           =$("#prod_group")
        window.location.href = "/page/" +
            **//add to url if category is definned**
        encodeURI(category) + "/" +
            **//add to url if group is definned**       
        encodeURI(group) + "/" + 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-17T10:11:31.597

你可以简单地陈述`if (category)`。如果`category`有一个长度大于零的值，这将返回`true`。

```
var url = "/page/";
if (category){
  url = url + encodeURI(category) + "/";
}
if (group){
  url = url + encodeURI(group) + "/";
} 
```

**编辑：**将值设置为`category`并`group`确保修剪元素可能包含的任何空白时。例如：

```
var category = $.trim($("#prod_category").val()); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-17T10:46:15.783

您可以使用 $.grep 来执行此操作：

```
var category = $.trim($("#prod_category").val());
var group = $.trim($("#prod_group").val());
window.location.href = '/page/' + $.grep([category, group], function(s) { return s != null && s.length }).join('/'); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-17T10:14:46.053

尝试：

```
var category =$.trim( $("#prod_category").val() );
var group    =$.trim( $("#prod_group").val() );
var urlVal = "/page/";
if( category !== "") {
  urlVal += encodeURI(category);
}
if( group !== "") {
 urlVal += encodeURI(group);
}
window.location.href = urlVal; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-17T10:12:08.543

利用

```
if($.trim(category) != ''){
}
if($.trim(group) != ''){
} 
```

# ruby-on-rails - 更改多态关联中的类型标识符

> ID：11520311
> 
> 赞同：3
> 
> 时间：2012-07-17T10:09:40.527
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3, activerecord, polymorphism

我正在尝试以一种有点奇怪的方式使用 Rails 的多态关联，但遇到了问题。

多态表是`Address`

```
class Address < ActiveRecord::Base
  belongs_to :addressable, polymorphic: true
end 
```

我的数据库有唯一性约束，因此不能将相同的地址地址关联添加两次。

我还有一个`Trip`需要两个地址的模型。一个是旅行的起点，另一个是目的地。

```
class Trip < ActiveRecord::Base
  has_one :origin, as: :addressable, class_name: 'Address'
  has_one :destination, as: :addressable, class_name: 'Address'
end 
```

问题在于，当 Rails 创建与行程相关联的地址时，它使用类名（即“Trip”）来填充该`addressable_type`列。这意味着，如果我尝试使用起点和终点进行旅行，rails 会尝试添加两行具有相同的`addressable_type`和`addressable_id`。这显然在唯一性约束上失败了。

我可以删除唯一性约束，但最终会得到重复的记录，这会使 Rails 感到困惑，因为它不知道哪条记录是起点，哪条记录是终点。

我真正想做的是指定要用于的字符串`addressable_type`：

```
class Trip < ActiveRecord::Base
  has_one :origin, as: :addressable, class_name: 'Address', type: 'Trip Origin'
  has_one :destination, as: :addressable, class_name: 'Address', type: 'Trip Destination'
end 
```

那可能吗？是否有其他解决方案或者我需要重新考虑我的数据库架构？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-17T12:44:00.323

我会认为这`address`不应该`belongs_to`是一次旅行，因为一个地址可能是多次旅行的起点和/或目的地。如果您有唯一性约束，则尤其如此。外键应该存储在行程中：

```
class Address < ActiveRecord::Base
  has_many :trips_as_origin, class_name: "Trip", foreign_key: "origin_id"
  has_many :trips_as_destination, class_name: "Trip", foreign_key: "destination_id"
end

class Trip < ActiveRecord::Base
  belongs_to :origin, class_name: "Address"
  belongs_to :destination, class_name "Address"
end 
```

您需要创建一个迁移，将`origin_id`和添加`destination_id`到`Trip`.

# wpf - WPF 使用 PRISM 和 WCF - 如何实现连接到 WCF 服务的多个视图？

> ID：11520313
> 
> 赞同：1
> 
> 时间：2012-07-17T10:09:47.377
> 
> 标签：wpf, wcf, mvvm, prism

我正在使用 PRISM 在 MVVM 架构中实现 WPF 客户端应用程序（我是 PRISM 新手）。

WPF 应用程序有 3 个主要区域：

*   左区
*   右区
*   边区

左侧区域有一个带有“获取按钮”的视图，按下该按钮时应连接到“获取”WCF 服务、获取项目、断开与服务的连接并在视图中显示项目。

右侧区域有一个没有按钮的视图。此视图应每 10 分钟连接到“POLL”WCF 服务、获取项目、断开与服务的连接并在视图中显示项目。

侧面区域有一个没有按钮的视图。此视图应连接到“通知”WCF 服务，**并在整个应用程序生命周期中保持与它的连接**。它应该接收来自服务的回调，这些回调应该显示在侧视图中。

这是一张显示它应该是什么样子的[图像：](http://s11.postimage.org/xfjheqc0h/SO_Question_4.png)

[![图片](../Images/e2e9ccc3ec6732a3d89aaad17a1457e4.png)](https://i.stack.imgur.com/0BEIA.png)

**问题 ：**

1.  我应该将什么传递给包含“Fetch View”的“FETCH MODULE”的构造函数？它应该是服务本身还是应该是某个渠道工厂？我认为它应该是某种通道工厂，因为每次用户按下“获取”按钮时都需要启动与“获取 WCF 服务”的连接。

2.  同样的问题也适用于“轮询模块”。

3.  关于“通知模块”-我应该传递“通知服务客户端”的单例实例吗？（因为应用程序只需要打开一个客户端到服务，它应该一直保持连接）

4.  为了避免“通知”客户端由于超时而出现故障，我需要实现某种“心跳”，它将调用“通知”WCFservice 上的存根方法，这样它就不会超时。我应该在哪里放置心跳的代码？它应该在“通知模块”中吗？谁应该发起它？（我相信它应该在某种后台线程中运行）

5.  我目前正在使用 MEF，但我真的不知道自己在做什么（我用 [Export] 和 [ViewModel] setter 用 [Import] 等装饰了视图，但我仍然不明白我如何控制谁得到加载和何时）。另外 - 我不明白依赖注入在 MEF 中是如何工作的。使用“MEF Bootstrapper”和“Unity Bootstrapper”有什么区别？

6.  我见过一些人使用 MEF 并且只使用 [Import] 和 [Export] 属性，还有一些人从“IModule”继承他们的模块并使用 EventAggreagator、Container 和 RegionManager 实现“InitializeModule”。这些方法之间有什么区别，什么时候应该使用每种方法？

7.  您建议使用“添加服务参考...”还是手动创建“IChannelFactory”？（优点缺点）

8.  服务客户端应该是模块的一部分还是基础结构的一部分？

9.  我在互联网上搜索了很多 WPF+PRISM+WCF 的示例，但找不到任何可以使用的好示例，因此我可以了解如何将服务注入到我的视图模型中。谁能提供任何示例\示例链接？

以下 4 个问题是一个**棘手的问题：**

1.  我提到的所有 3 个 WCF 服务都使用相同的“用户名+密码”身份验证方法，这意味着我需要在应用程序加载时弹出一个“登录”窗口。在 PRISM 和 MVVM 中做这样的事情的最佳实践是什么？“登录”窗口应该取代“外壳”窗口吗？（我不这么认为，那应该是什么？）

2.  当用户输入用户名+密码时 - 我是否应该尝试仅连接到第一个服务，如果成功 - 断开连接并关闭“登录”视图（意思是，我假设与其他服务的连接将成功） .

3.  我可以在哪里存储用户输入的用户名+密码，以便应用程序可以继续重新连接到服务，而无需每次都要求用户提供凭据？

4.  如果出于某种原因，您建议我应该采取什么方法 - 其中一个模块尝试连接到 WCF 服务之一，但由于凭据而没有成功？我是否应该引发一个事件，迫使所有其他模块断开其服务，然后弹出“登录”视图？

**对不起，很长的帖子...**

# python - 解析包含 &entities; 的 xml 极简主义

> ID：11520316
> 
> 赞同：1
> 
> 时间：2012-07-17T10:10:20.027
> 
> 标签：python, xml, parsing, entities, minidom

我正在尝试使用 minidom 解析 XML 文件。这在简单的情况下很简单（`doc = xml.dom.minidom.parse(fileName)`）。但是我有包含命名实体的 XML（例如`&uuml;`，`&agrave;`和类似的，有些是特殊的和非标准的）。

`xml.dom.minidom.parse(source, parser)`我认为我仍然可以使用 minidom，但在作为第二个参数调用时必须传递一个专有解析器（包含一个实体解析器） 。我找不到任何例子。有没有人有我的链接或一个小例子可以做到这一点？

# asp.net - .Net：BtnLock_Click 的代码

> ID：11520325
> 
> 赞同：0
> 
> 时间：2012-07-17T10:11:10.230
> 
> 标签：asp.net, .net, vb.net, asp.net-controls

我一直在尝试将解决方案应用于用户在其系统上需要的某些功能。

一个用户要求我在他们的系统上实现一个锁定系统。他们有多个用户可能需要访问该站点，但用户希望他们能够独立锁定网站中的记录，以便他们添加注释然后解锁，以便其他用户能够这样做相同。

我的网页上有一个简单命名为 btnLock 的按钮，我在我的数据库中添加了一个名为 LockedBy 的附加列，并具有以下存储过程...

```
ALTER PROCEDURE LockWeeklyTest
(     
   @AgendaID BIGINT,     
   @LockingUser VARCHAR(20) 
) 
AS
BEGIN    
    SET NOCOUNT ON      
    UPDATE        
        WeeklyAgenda     
    SET        
        LockedBy = @LockingUser 
    WHERE
        AgendaID = @AgendaID    
    AND 
        LockedBy IS NULL      
END 
```

我有一个名为 Weekly Class 的课程，并有以下代码......

```
 Public Shared Sub LockWeeklyAgenda(ByVal WeeklyClass As WeeklyClass)

    Using dbConnection As New SqlConnection(ConfigurationManager.AppSettings("dbConnection"))
        dbConnection.Open()

        Dim dbTrans As SqlTransaction
        dbTrans = dbConnection.BeginTransaction()

        Using dbCommand As SqlCommand = dbConnection.CreateCommand

            With dbCommand
                .Transaction = dbTrans
                .CommandType = CommandType.StoredProcedure
                .CommandText = "LockWeeklyTest"

                'Add Parameters for Update
                .Parameters.AddWithValue("@AgendaID", WeeklyClass.AgendaID)
                .Parameters.AddWithValue("@LockingUser", WeeklyClass.LockedBy)

                dbCommand.ExecuteNonQuery()

            End With
        End Using 'dbCommand
        dbTrans.Commit()
    End Using

End Sub 
```

我在想下面的 butlock 代码会用用户名填充我的 Loggedby 字段，但事实并非如此。

```
 Protected Sub btnLock_Click(sender As Object, e As System.EventArgs) Handles btnLock.Click

    Dim lock As New WeeklyClass
    If lock.LockedBy = "Null" Then
        lock.LockedBy = System.Environment.UserName
        'lock.AgendaID = AgendaID
    End If

    ' save to the database using the Class DAL
    WeeklyClassDAL.LockWeeklyAgenda(lock)

End Sub 
```

我知道存储过程的工作原理就像我用以下语句作为示例测试过的那样......

```
EXEC LockWeeklyTest 11, 'Betty' 
```

我确定它与 btnlock_click 有关，但我不是 100% 确定这是什么。任何帮助都是非常重要的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-17T11:17:42.487

你的问题是这一行：

```
If lock.LockedBy = "Null" Then 
```

“Null”实际上是一个包含单词 Null 的字符串。你追求的是：

```
If String.IsNullOrEmpty(lock.LockedBy) Then 
```

这样，如果它实际上为 null 或为空，您的 LockedBy 将被设置。目前，它仅在 LockedBy 已经等于字符串值“Null”时才设置 LockedBy，它不会在声明后直接设置。考虑到 LockedBy 在您声明 WeeklyClass 后总是直接为空，这个逻辑真的有必要吗？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-17T11:39:33.487

AgendaID 看起来不太对劲：

在按钮单击事件期间，该值已被注释掉，但仍传递到数据层的“LockWeeklyAgenda”方法内的存储过程。

它也没有在存储过程本身中定义为可为空的参数，因此发送的值将取决于 WeeklyClass 类的构造函数。

您能否还展示一下 WeeklyClass 代码的外观？

# wcf - WCF OData 服务是否支持投影？

> ID：11520327
> 
> 赞同：0
> 
> 时间：2012-07-17T10:11:22.913
> 
> 标签：wcf, odata, projection

我使用 WCF OData 服务作为我的应用程序数据提供程序。OData 服务公开了一个我不想获取整个实体的实体，我创建 LINQ 查询以从该实体获取投影。但我在 OData 服务中有错误。这是我的代码：

```
from n in NewsInfos
select new NewsInfos
{
    n.NewsId,
    n.NewsTitle,
    n.NewsLead,
    n.NewsDate
}; 
```

这是完整的代码：

```
[System.ServiceModel.ServiceBehavior(IncludeExceptionDetailInFaults = true)]
    public class NewsDataService : DataService<NewsODataModel>
    {
        public static void InitializeService(DataServiceConfiguration config)
        {
            config.SetEntitySetAccessRule("*", EntitySetRights.AllRead);
            config.DataServiceBehavior.MaxProtocolVersion = DataServiceProtocolVersion.V2;
            config.DataServiceBehavior.AcceptProjectionRequests = true;
        }
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-17T15:32:22.753

是的，WCF 数据服务和 OData 支持投影。投影在带有`$select`系统查询选项的 URL 中编码，例如：[http://services.odata.org/Experimental/OData/OData.svc/Products?$select=Name&$format=json](http://services.odata.org/Experimental/OData/OData.svc/Products?%24select=Name&%24format=json)。客户端位中的 LINQ 提供程序启用此功能，类似于您在示例中显示的内容。这是一个这样的例子：

```
using System;
using System.Data.Services.Client;
using System.Linq;

namespace Scratch
{
    public class Program
    {
        public static void Main()
        {
            var context = new DataServiceContext(new Uri("http://services.odata.org/OData/OData.svc/"));
            var categories = context.CreateQuery<Category>("Categories").Select(c => new { c.Name });
            Console.WriteLine("context.Categories.Where(...): {0}", categories);
            foreach (var category in categories)
            {
                Console.WriteLine(category.Name);
            }
        }
    }

    public class Category
    {
        public int ID { get; set; }
        public string Name { get; set; }
    }
} 
```

投影需要考虑的一件事是，我们客户端位的魔力经常需要您使用匿名对象（因此使用`new { c.Name }`.

您的错误可能无关紧要；如果您在阅读本文后仍然收到错误，您可以根据[http://blogs.msdn.com/b/phaniraj/archive/2008/06/18/debugging-ado-net更新您的服务以返回详细错误数据服务.aspx](http://blogs.msdn.com/b/phaniraj/archive/2008/06/18/debugging-ado-net-data-services.aspx) ? `[DataServiceKey]`我的猜测是您可能缺少`NewsInfos`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-08-12T19:03:10.430

只需从您的选择中返回一个匿名对象，它应该可以工作。

```
from n in NewsInfos
select new
{
    n.NewsId,
    n.NewsTitle,
    n.NewsLead,
    n.NewsDate
}; 
```

# java - Spring AOP 生成的代理类的位置

> ID：11520330
> 
> 赞同：2
> 
> 时间：2012-07-17T10:11:32.407
> 
> 标签：java, spring, proxy, aop, generated

只是为了学习和理解代理，想看看Spring AOP生成的代理类。它不存在于 Eclipse 生成的类文件夹中。

谁能告诉我它的位置？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-17T10:20:51.733

如果您使用基于接口的代理（默认），Spring 使用[`Proxy`](http://docs.oracle.com/javase/7/docs/api/java/lang/reflect/Proxy.html)类在内存中动态创建代理。没有`.class`与该类关联的文件。

当使用基于类的代理（通过[cglib](/questions/tagged/cglib "显示标记为“cglib”的问题")）时，Spring 会创建类的具体子类。在调试器中，您会注意到它们的名称类似于`YourRealService$$EnhancerByCGLIB$$...`但是同样，这些类仅在内存中生成，而不是存储在磁盘上。

如果你真的想深入了解 AOP，你将不得不使用[aspectj](/questions/tagged/aspectj "显示标记为“aspectj”的问题")和编译时编织。工作量太大了。所以底线是：相信他们的工作。如果他们不这样做：检查堆栈跟踪。

# linq - 如何使用 GetEnumerator()

> ID：11520331
> 
> 赞同：-5
> 
> 时间：2012-07-17T10:11:33.773
> 
> 标签：linq

**linq**有什么`GetEnumerator()`用。

 **谁能用一个基本的例子向我解释它是如何工作的。

提前致谢。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-07-17T13:54:15.023

[GetEnumerator()](http://msdn.microsoft.com/en-us/library/system.collections.ienumerable.getenumerator.aspx#Y600)返回可用于遍历集合的对象。

假设您有以下数字列表：

```
var numbers = new List<Int32>() {1, 2, 3, 4, 5}; 
```

并希望将所有偶数转换为字符串，您可以编写以下方法：

```
IEnumerable<string> GetEvenStrings(IEnumerable<Int32> source)
{
    using (var enumerator = source.GetEnumerator())
        while (enumerator.MoveNext())
            if (enumerator.Current % 2 == 0)
                yield return enumerator.Current.ToString();
} 
```

[MoveNext](http://msdn.microsoft.com/en-us/library/system.collections.ienumerator.movenext.aspx)方法将具有指向集合中下一个元素的Current属性[，](http://msdn.microsoft.com/en-us/library/system.collections.ienumerator.current.aspx)如果没有剩余元素（否则）将返回。`Enumerator``false``true`

这是一个如何使用枚举器的非常基本的示例。更复杂和实际的用途是例如该方法的这种[实现](http://msmvps.com/blogs/jon_skeet/archive/2011/01/14/reimplementing-linq-to-objects-part-35-zip.aspx)`Zip`：

```
private static IEnumerable<TResult> ZipImpl<TFirst, TSecond, TResult>( 
    IEnumerable<TFirst> first, 
    IEnumerable<TSecond> second, 
    Func<TFirst, TSecond, TResult> resultSelector) 
{ 
    using (IEnumerator<TFirst> iterator1 = first.GetEnumerator()) 
    using (IEnumerator<TSecond> iterator2 = second.GetEnumerator()) 
    { 
        while (iterator1.MoveNext() && iterator2.MoveNext()) 
        { 
            yield return resultSelector(iterator1.Current, iterator2.Current); 
        } 
    } 
} 
```

（这段代码来自 Jon Skeet 的[Edulinq 项目](http://msmvps.com/blogs/jon_skeet/archive/tags/Edulinq/default.aspx)，我强烈推荐）

在此示例中，`Enumerator`用于同时迭代两个集合，从而产生一个集合。

* * *

通常，`Enumerator`如果您想逐步迭代集合以应用一些逻辑，并且您不想先使用整个集合，则可能需要使用 an，因为集合可能正在使用[延迟执行](http://msdn.microsoft.com/en-us/library/bb943859.aspx)。**

# javascript - 重置时输入字段文本css

> ID：11520333
> 
> 赞同：0
> 
> 时间：2012-07-17T10:11:45.560
> 
> 标签：javascript, html, css

请参考小提琴[http://jsfiddle.net/a765q/1/](http://jsfiddle.net/a765q/1/)。

如果我单击重置按钮，文本颜色将变为灰色。怎么做？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-17T10:16:47.677

我建议`placeholder`为此使用更新的属性，而不是您要使用的方法。

从你的小提琴修改！：

`<input name="address" id="address" type="text" placeholder="Address" />`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-17T10:22:02.530

这是工作小提琴：http: [//jsfiddle.net/surendraVsingh/a765q/13/](http://jsfiddle.net/surendraVsingh/a765q/13/)

**HTML**

```
<form action="">
    <input name="address" id="address" type="text" value="Address" />
    <input name="reset" type="reset" value="Reset Form">
</form>​ 
```

**jQuery**

```
 $('#address').focus(function(){
    $(this).val(''); 
    $(this).css('color', '#000'); 

});
$('input[type="reset"]').click(function(){

       $('#address').css('color', '#999'); 
}); 
```

​</p>

# selenium - 如何使用 Selenium 2 发送键盘快捷键 Alt + Shift + Z（热键）？

> ID：11520341
> 
> 赞同：13
> 
> 时间：2012-07-17T10:12:19.047
> 
> 标签：selenium, shortcut, hotkeys

我正在尝试使用 Actions.sendKeys 发送快捷方式，但它不起作用。

```
(New Actions(driver)).SendKeys(Keys.ALT, Keys.SHIFT, "z"); 
```

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-07-17T11:02:22.630

你可以检查这个问题来参考这个 - *[Pressing Ctrl+A in Selenium WebDriver](https://stackoverflow.com/questions/11503736/key-press-in-selenium-webdriver)*

检查使用**和弦方法**的答案。在你的情况下，你可以这样做 -

```
String selectAll = Keys.chord(Keys.ALT, Keys.SHIFT,"z");
driver.findElement(By.tagName("html")).sendKeys(selectAll); 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2016-01-07T20:45:13.843

这也可以使用**Actions 的 keyUp 和 keyDown**函数来完成。

```
WebDriver driver = new FirefoxDriver();
Actions keyAction = new Actions(driver);
keyAction.keyDown(Keys.ALT).keyDown(Keys.SHIFT).sendKeys("z").keyUp(Keys.ALT).keyUp(Keys.SHIFT).perform(); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-08-08T09:32:29.697

尝试一下：

```
SendKeys.SendWait("%+z") 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2021-02-07T01:05:37.767

假设您使用的是 JavaScript，

```
Keys.chord(keys) 
```

此外，文档位于[https://www.selenium.dev/documentation/en/](https://www.selenium.dev/documentation/en/)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2021-12-07T04:54:40.510

除了`Keys.chord(Keys.ALT, Keys.SHIFT,"z");`其他/接受的答案中建议的方法外，我建议您尝试使用机器人框架来使用键盘快捷键。

你可以做类似的事情；

```
Robot robot = new Robot();
Thread.sleep(1000);
robot.delay(3000);

robot.keyPress(KeyEvent.VK_CONTROL);
robot.keyPress(KeyEvent.VK_Y);
robot.keyRelease(KeyEvent.VK_CONTROL);
robot.keyRelease(KeyEvent.VK_Y); 
```

我想这将有助于解决您的问题。

# windows-phone-7 - 如何创建关于对话框或关于页面？

> ID：11520343
> 
> 赞同：0
> 
> 时间：2012-07-17T10:12:25.987
> 
> 标签：windows-phone-7, windows-phone

我刚刚完成我的最新应用程序，但我对“关于”页面的实现感到困惑。

我应该如何在 Windows Phone 中创建关于对话框或关于页面？

我不想只使用带有文本的普通页面，因为它看起来不专业。有这样做的标准方法吗？例如，框架内提供的关于页面/对话框？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-17T10:18:47.960

有很多方法可以做到这一点。最好的办法是您可以下载一些流行的免费应用程序，看看它们是如何实现的，以获得一些想法。

我更喜欢以下两个方向之一：

1.  自定义样式的页面，包括图标、开发人员详细信息、一些法律详细信息（您使用了哪些控件、根据哪些许可证等）您甚至可以使用数据透视页面，然后拆分关于您的详细信息和法律详细信息（以及任何其他详细信息）到多个枢轴项目。

2.  使用[Coding4Fun 工具包](http://coding4fun.codeplex.com/)中的弹出窗口。向下滚动查看它的外观示例。

# html - 在正确的位置显示图像，中间对齐

> ID：11520346
> 
> 赞同：0
> 
> 时间：2012-07-17T10:12:39.267
> 
> 标签：html

```
img {
vertical-align: middle;
}

.right
{
???
}

<img align='right' class='right' src='images/online_icon.png' border="0" width=8/> 
```

我想要做的是：在正确的位置显示图像，中间对齐。

我已经测试图像居中对齐，但是当我尝试将位置放在右侧时，它会稍微向上改变位置。

有什么建议么 ？

我有一个解决方案。那是：在下面的类.right中添加填充：

```
.right
{
    float: right;
    padding: 12px;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-17T10:21:55.120

将图像包装在 div 中并将 div 向右对齐。

```
<div align="right">
   <img src='images/online_icon.png' border="0" width=8/>
</div> 
```

希望这可以帮助你！耶什万特

# iphone - iOS 4.3 中的 UITextView beginOfDocument 问题

> ID：11520348
> 
> 赞同：2
> 
> 时间：2012-07-17T10:13:08.187
> 
> 标签：iphone, ios, uitextview

下面是我在模拟器 iOS 5+ 中使用和工作正常的代码，但在模拟器 4.3 中出现问题

```
UITextPosition *begin = [self.tvQuestion positionFromPosition:self.tvQuestion.beginningOfDocument offset:nrange.location]; 
```

以下是错误声明：

> 由于未捕获的异常“NSInvalidArgumentException”而终止应用程序，原因：“-[UITextView beginOfDocument]：无法识别的选择器发送到实例 0x5586050”

有人可以就此提出建议吗？提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-17T10:24:53.557

自 iOS 3.2 起，该`UITextInput`协议包含一个选择器。 但仅从iOS 5.0 开始采用。它以前符合协议。`beginningOfDocument`
`UITextView``UITextInput``UITextInputTraits`

来源：在这里搜索 UITextView [http://developer.apple.com/library/ios/#releasenotes/General/iOS50APIDiff/index.html](http://developer.apple.com/library/ios/#releasenotes/General/iOS50APIDiff/index.html)

如果您希望它在 iOS 4.x 及更高版本上运行，您必须在 iOS 4 上执行检查并自己进行计算：

```
CGRect newRect = CGRectZero;

if ([UITextView conformsToProtocol:@protocol(UITextInput)]) {

    // iOS 5 and later
    UITextPosition *begin = [self.tvQuestion positionFromPosition:self.tvQuestion.beginningOfDocument offset:nrange.location]; 
    UITextPosition *end = [self.tvQuestion positionFromPosition:begin offset:nrange.length]; 
    UITextRange *textRange = [self.tvQuestion textRangeFromPosition:begin toPosition:end]; 
    newRect = [self.tvQuestion firstRectForRange:textRange];

} else {

    // iOS 3.2 to 4.3
    // Compute text position manually

#define TEXT_VIEW_PADDING 8.f

    NSString *textContent = [self.tvQuestion.text substringToIndex:NSMaxRange(nrange)];

    NSDictionary *ctFontDescriptorAttributes = [NSDictionary dictionaryWithObjectsAndKeys:
                                                self.tvQuestion.font.familyName, kCTFontFamilyNameAttribute,
                                                // Uncomment for bold fonts
                                                // [NSDictionary dictionaryWithObjectsAndKeys:
                                                // [NSNumber numberWithInt:kCTFontBoldTrait], kCTFontSymbolicTrait,
                                                // nil], kCTFontTraitsAttribute,
                                                nil];

    CTFontDescriptorRef ctFontDescriptor = CTFontDescriptorCreateWithAttributes((CFDictionaryRef)ctFontDescriptorAttributes);
    CTFontRef ctFont = CTFontCreateWithFontDescriptor(ctFontDescriptor, self.tvQuestion.font.pointSize, NULL);

    NSAttributedString *attributedText = [[NSAttributedString alloc] initWithString:textContent
                                                                         attributes:[NSDictionary dictionaryWithObjectsAndKeys:
                                                                                 (id)ctFont, kCTFontAttributeName,
                                                                                 nil]];

    CTFramesetterRef framesetter = CTFramesetterCreateWithAttributedString((CFAttributedStringRef)attributedText);
    CFRange globalRange = CFRangeMake(0, [attributedText length]);

    CGRect textRect = CGRectInset((CGRect){CGPointZero, self.tvQuestion.contentSize}, TEXT_VIEW_PADDING, TEXT_VIEW_PADDING);
    CTFrameRef frame = CTFramesetterCreateFrame(framesetter, globalRange, CGPathCreateWithRect((CGRect){CGPointZero, textRect.size}, NULL), NULL);

    CFArrayRef lines = CTFrameGetLines(frame);
    NSInteger nbLines = CFArrayGetCount(lines);
    CGPoint *lineOrigins = calloc(sizeof(CGPoint), nbLines);
    CTFrameGetLineOrigins(frame, CFRangeMake(0, 0), lineOrigins);

    CGFloat ascent = CTFontGetAscent(ctFont);
    CGFloat descent = CTFontGetDescent(ctFont);
    CGFloat leading = CTFontGetLeading(ctFont);

    if (leading < 0) {
        leading = 0;
    }
    leading = floor(leading + 0.5);

    CGFloat lineHeight = floor(ascent + 0.5) + floor(descent + 0.5) + leading;
    CGFloat firstLineYOffset = 0.f;

    for (NSInteger i = 0; i < nbLines; i++) {

        CTLineRef line = CFArrayGetValueAtIndex(lines, i);
        CFRange lineRange = CTLineGetStringRange(line);
        CGPoint lineOrigin = lineOrigins[i];
        CGFloat ascent, descent, leading, width;
        width = CTLineGetTypographicBounds(line, &ascent,  &descent, &leading);

        if (i == 0) {
            firstLineYOffset = lineOrigin.y;
        }
        lineOrigin.y = (lineOrigin.y - firstLineYOffset) * -1.f;

        if (nrange.location >= lineRange.location && nrange.location < lineRange.location + lineRange.length) {

            CGFloat secOffset;
            CGFloat startOffset = CTLineGetOffsetForStringIndex(line, nrange.location, &secOffset);

            CGFloat rectWidth;
            if (nrange.location + nrange.length <= lineRange.location + lineRange.length) {
                CGFloat endOffset = CTLineGetOffsetForStringIndex(line, nrange.location + nrange.length, &secOffset);
                rectWidth = endOffset - startOffset;
            } else {
                rectWidth = width - 5 - startOffset;
            }

            newRect = (CGRect)
            {
                {
                    lineOrigin.x + TEXT_VIEW_PADDING + startOffset,
                    lineOrigin.y + TEXT_VIEW_PADDING + i
                }, {
                    rectWidth,
                    lineHeight
                }
            };

            break;
        }
    }

    free(lineOrigins);
    CFRelease(frame);
    CFRelease(framesetter);
    CFRelease(ctFont);
    CFRelease(ctFontDescriptor);

} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-26T06:13:00.863

虽然 UITextView 不符合 iOS 4.x 上的 UITextInput 协议，但它的子视图却符合。以下代码适用于 iOS 4.x 及更高版本。

```
UIView<UITextInput> *t = [textView.subviews objectAtIndex:0];
assert([t conformsToProtocol:@protocol(UITextInput)]);
// use t for the view conforming to UITextInput
UITextPosition *beginning = t.beginningOfDocument; // OK 
```

# php - 比较字符串并在 PHP 中生成建议

> ID：11520354
> 
> 赞同：0
> 
> 时间：2012-07-17T10:13:29.027
> 
> 标签：php, mysql

我有一个字符串（名称）列表，我想将其与包含这些名称相同或不同的数据库匹配。对于我想匹配的每个字符串，我都可以查询数据库，但这似乎效率不高，因为数据库是一组固定的名称。

我想知道是否有可能在 PHP 中完成这个匹配。我可以在 PHP 中使用 levenshtein 函数，但我想知道是否有更有效的方法。

我想得到的例子。左边是我想查看的所有字符串，如果我在数据库中有这个（或一个小的差异）。在每个旁边，我希望有一个下拉列表，其中包含密切匹配的选项。

*   字符串 1 – 下拉
*   字符串 2 – 下拉
*   字符串 3 - 下拉

最好的方法是什么？我有大约 500-1000 个字符串，我想获得建议/下拉菜单。

亲切的问候

拉尔夫

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-19T10:58:02.087

如果你想在客户端做，jQuery UI Autocomplete 就是你想要的。这不仅很容易根据您的需要进行配置，而且您只需 1 个查询即可完成此操作，该查询将获取所有字符串并将其保存到本地列表中，即 jQuery 自动完成数据源。

然后，您可以为输入注册一个 onkeyup 事件，jQuery 插件将查询现有的缓存数据源（对您的服务器没有更多压力）。

看看：http: [//jqueryui.com/autocomplete/](http://jqueryui.com/autocomplete/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-17T10:26:02.187

也许看看 MySQL 的全文搜索功能。我在 DevZone 上找到了这篇文章：http: [//devzone.zend.com/26/using-mysql-full-text-searching/](http://devzone.zend.com/26/using-mysql-full-text-searching/)

# python - 如何让 web2py 开发服务器跟踪文件更改并自动重启？

> ID：11520355
> 
> 赞同：2
> 
> 时间：2012-07-17T10:13:29.037
> 
> 标签：python, web2py

我曾经使用 Django，并且`runserver`每当更改某些 python 文件时它会自动重新启动。这真的很方便，让我的开发更容易。

有没有办法告诉`web2py`开发服务器跟踪python文件的变化并自动重启？

任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-17T10:58:25.010

这在 web2py 中要容易得多，并且会自动发生。web2py 模型、控制器和视图文件在每次请求时都在准备好的环境中执行，因此对这些文件的任何更新都会立即反映，而无需重新启动任何东西。对于您导入的模块，您可以执行以下操作（通常在模型文件中）：

```
from gluon.custom_import import track_changes
track_changes(True) 
```

自上次导入以来发生更改的任何模块都将被重新加载。

# charts - 当使用 WithWindow = false 打开演示文稿时，AddChart() 抛出

> ID：11520356
> 
> 赞同：2
> 
> 时间：2012-07-17T10:13:32.753
> 
> 标签：charts, powerpoint, office-interop

我不确定这是否是“有意的”，或者是否存在解决方法（除了显示演示文稿）。

```
#if DEBUG
    var withWindow = Microsoft.Office.Core.MsoTriState.msoTrue;
#else
    // using msoTrue fixes the error
    var withWindow = Microsoft.Office.Core.MsoTriState.msoFalse;
#endif

    presentation = app.Presentations.Open(templateFileName,
        Microsoft.Office.Core.MsoTriState.msoTrue, // readonly
        Microsoft.Office.Core.MsoTriState.msoFalse, // untitled (?)
        withWindow // with window: visible or not
        );

// some time later...
slide.Shapes.AddChart(); // Error HRESULT E_FAIL has been returned from a call to a COM component. ErrorCode: -214747259 
```

自动化时无法隐藏 PowerPoint 演示文稿非常烦人。有没有解决这个问题的方法？

# php - PHP 数组随机播放 HTML 链接

> ID：11520357
> 
> 赞同：2
> 
> 时间：2012-07-17T10:13:37.307
> 
> 标签：php, arrays, shuffle

好的，我将尽力解释这一点，我有 25 个这种格式的链接：

```
<a href="http://blabla.com" title="bla bla">bla bla</a> 
```

首先，我需要将这 25 个链接添加到一个数组中，由于它的 html，我有点不确定该怎么做，其次我需要对数组进行洗牌以随机选择其中的 7 个，然后显示这 7 个。

希望有人可以提供帮助，这超出了我的范围，在此先感谢。

* * *

好的，稍微更新一下，我找到了一种随机显示 1 个 html 链接的方法，有人可以帮我弄出 7 个吗？

```
<?php
// Create the array
$links = array();

$links[0] = '<a href="http://bla1.co.uk" title="bla1">bla1</a>';
$links[1] = '<a href="http://bla2.co.uk" title="bla2">bla2</a>';
$links[2] = '<a href="http://bla3.co.uk" title="bla3">bla3</a>';
// Count links
$num = count($links);
// Randomize order
$random = rand(0, $num-1);
// Print random link
echo $links[$random];
?> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-17T10:17:11.167

对于您的第二个任务：

检查 array_rand() 以检索数组中的 X 个随机值。

[http://www.php.net/manual/en/function.array-rand.php](http://www.php.net/manual/en/function.array-rand.php)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-17T10:34:13.127

如果您只关心向用户随机显示这些链接，那么您可以使用 JavaScript，例如[http://jsfiddle.net/hVZL2/](http://jsfiddle.net/hVZL2/)。

如果您想将这些链接加载到 PHP 数组中并在您仍然必须使用 JavaScript 之后对它们进行处理。将我创建的数组转换为 JSON，通过 POST 将其发送到一些将解析 JSON 的脚本，您将获得链接数组。

* * *

如我所见，您的链接在服务器上。

```
<?php
// Create the array
$links = array();

$links[0] = '<a href="http://bla1.co.uk" title="bla1">bla1</a>';
$links[1] = '<a href="http://bla2.co.uk" title="bla2">bla2</a>';
$links[2] = '<a href="http://bla3.co.uk" title="bla3">bla3</a>';
$links[3] = '<a href="http://bla3.co.uk" title="bla3">bla3</a>';
$links[4] = '<a href="http://bla3.co.uk" title="bla3">bla3</a>';
$links[5] = '<a href="http://bla3.co.uk" title="bla3">bla3</a>';
$links[6] = '<a href="http://bla3.co.uk" title="bla3">bla3</a>';

// Shuffle the array
shuffle($links);

// Display your links, note that we will display five links out of seven
for ($i = 0; $i < 5; $i++){
   echo $links[$i];
} 
```

# sql - 建立数据库系统中不同表之间的连接

> ID：11520359
> 
> 赞同：0
> 
> 时间：2012-07-17T10:13:50.940
> 
> 标签：sql, database, database-design, create-table

我在数据库系统中创建不同的表..现在我需要在它们之间建立关系我的意思是一个表中的主键应该连接到另一个表中的外键..我应该在创建表本身时这样做还是当我插入数据时它们会连接在一起并且它们是相同的吗？

例如，我在创建两个表时执行以下操作：

```
CREATE TABLE employee (
  fname    varchar(15),
  minit    varchar(1),
  lname    varchar(15),
  ssn      char(9),
  bdate    date,
  address  varchar(50),
  sex      char,
  salary   decimal(10,2),
  superssn char(9),
  dno      number(4)
);

CREATE TABLE department (
  dname        varchar(25),
  dnumber      number(4),
  mgrssn       char(9), 
  mgrstartdate date
); 
```

这里 dno 应该连接到 dnumber，而 ssn 应该连接到 mgrssn。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-17T10:21:31.370

添加数据对表上的约束没有任何特殊作用，您的数据库如何知道这些值是相同的？它们可能看起来相同，但在不同的地方有不同的含义。

如果您的表声明包含对其他表的外键引用，那么这就是它的全部内容。

如果不是（并且我在您的示例中没有看到），那么您应该添加一个以保持引用完整性。

您可以在添加数据后添加约束，但如果任何数据无效（例如外键字段中的空值），则您将无法添加约束。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-17T10:21:51.267

数据库表关系是需要创建的约束。你不应该只依赖数据。

> 数据库约束是用户定义的结构，可让您限制列的行为。

**主键约束**

> PRIMARY KEY 约束检查列值在表的所有行中是否唯一并且不允许空值。因此，PRIMARY KEY 具有 NOT NULL 和 UNIQUE 约束的行为。PRIMARY KEY 可以跨越两列或多列。多列 PRIMARY KEY 称为复合键或复合键，这可能会令人困惑，但本质上这些术语仅表示键跨列。

**外键约束**

> FOREIGN KEY 约束将列或列组中可接受的值限制为在用于定义主键的列或列组的列表中找到的值。取决于实现，这可能会或可能不会对外键的所有成员施加 NOT NULL 列约束。如果实现使列或列集是强制性的，那么它使 FOREIGN KEY 中的列的基数成为强制性的，或者 1..1 到 PRIMARY KEY。但是，默认情况下 FOREIGN KEY 是 PRIMARY KEY 的 0..1，这意味着可以在具有 FOREIGN KEY 列的表中插入一行。至少，如果受约束的列或列集是空值，则可以这样做。

这是使用 SQL Server 2008 创建这些约束的[有用链接](http://blog.sqlauthority.com/2008/09/08/sql-server-%E2%80%93-2008-creating-primary-key-foreign-key-and-default-constraint/)。

# javascript - 如何在 CKEditor 中选择当前元素..？

> ID：11520360
> 
> 赞同：1
> 
> 时间：2012-07-17T10:13:52.543
> 
> 标签：javascript, ckeditor

我想使用 java 脚本在 CKEditor 中选择当前（光标位置）元素。

当右键单击事件发生时，我必须选择我右键单击的元素。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-17T21:55:28.207

这是您正在寻找的解决方案：

```
var editor = CKEDITOR.instances.editor1,
    sel = editor.getSelection();

sel.selectElement(sel.getStartElement()); 
```

# asp.net-mvc - MVC 计算 Webgrid 中选定值的总和

> ID：11520369
> 
> 赞同：0
> 
> 时间：2012-07-17T10:14:35.307
> 
> 标签：asp.net-mvc, webgrid

我有一个带有 EF 的 ASP.NET MVC 4 应用程序。在我的索引视图中，我有一个带有项目列表的 webgrid。在页面底部，我计算了我的 webgrid 项目的总和（总值）。我在每一行的末尾都有一个复选框。

```
@helper SumFunc()
{
    decimal sum = ((IEnumerable<itemstable>)Model).Sum(i => i.value);
    @sum
} 
@grid.GetHtml(columns: grid.Columns(
    grid.Column(columnName: "name", header: "Name", format: @<text>@item.name</text>, canSort: true),
    grid.Column(columnName: "value", header: "Value", format: @<text>@item.value</text>, canSort: true),
    grid.Column(" ", " ", //@Html.CheckBox() or <input type="checkbox" />
    grid.Column(" ", " ", format: @<a href="@Url.Action("SomeMethod", "Home", new { id = item.id_comanda })">Proiectare</a>)))
<p> Total value : @SumFunc(something)    Selected value sum: @SumSelFunc(somethingelse) </p> 
```

我想计算页面底部所有选中行的总和（我在每一行的末尾都有一个复选框。）

1.  如何计算所有选定行的总和？

2.  如何编辑所有选定的行？假设复选框显示已发货，如果我选择一些项目，我只想修改一个字段（布尔已发货 = true）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-17T12:15:46.663

您可以通过使用 jquery 甚至纯 js 的 dom 操作来做到这一点。找到选中复选框的行，找到相关的数字字段并添加它们。你会得到结果。Jquery 选择器是执行此任务的理想选择。

# symfony - Symfony 2.0 中缓存和日志文件夹中的权限问题

> ID：11520370
> 
> 赞同：9
> 
> 时间：2012-07-17T10:14:35.837
> 
> 标签：symfony

我尝试了一些方法来授予`cache`&`logs`文件夹的权限，但是每当我清除缓存时，就会出现问题，例如无法写入目录。

我试过这两种方法：

1.  通过具有权限的`root`用户完全访问缓存。`777`
2.  `www-data`像Symfony2 文档中所说的那样更改所有者。

但这对我不起作用。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2015-07-22T08:17:58.187

# 解决方案：

如果站点面向全球，如果您关心安全性，请不要禁用 SELinux。在这种情况下，你会想要“使用”SELinux，而不是禁用它，它的存在是有原因的。

我这样做；

```
# chcon -R -t httpd_sys_script_rw_t /var/www/symfonyapp/app/cache
# chcon -R -t httpd_sys_script_rw_t /var/www/symfonyapp/app/logs
# apachectl restart #(or systemctl restart httpd) or (service restart httpd) to restart your server, a reboot will suffice as well. 
```

是的，@Viataley 有一个好处，现在您需要检查以确保您的 Web 服务器用户`httpd`,`apache`或`wwwdata`添加到您的用户组中，无论您的用户所在的组是什么。这样，当 apache 写入您的 symfony 目录时当您运行缓存清除时，用户已通过资产重新编译，例如，您的用户组的`g`部分`ugo`将允许`apache`用户对这些目录内容的权限。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-05-22T14:43:52.767

如果您不想关闭 SElinux，这里有一个解决方案：

```
cd your/symfo/app
chcon -R -t public_content_rw_t app/cache
chcon -R -t public_content_rw_t app/logs
setsebool -P allow_httpd_anon_write 1 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-07-24T13:19:41.530

## 为什么会发生

发生此类问题的最常见情况是当您的 Web 服务器用户无权写入项目所属的文件夹时。实际上，更改 app/cache 和 app/logs 的所有者并不总是有帮助，因为您可能想要运行一些测试或控制台命令，这些是从您的用户 (php-cli/php-fpm) 执行的。因此，缓存或日志文件夹将从您的当前用户创建，并且 Web 服务器用户将无权访问它。

## 解决方案

我的建议是**将**网络服务器用户（可能是 www-data）添加到您的用户组**或**从您的用户运行网络服务器 - 您将永远忘记此类问题；）

类似的问题，解释清楚的答案： [Symfony2 上的权限问题](https://stackoverflow.com/questions/11475794/permissions-issues-on-symfony2)

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-07-17T10:29:03.327

请参阅*[配置和设置](http://symfony.com/doc/current/book/installation.html#configuration-and-setup)*部分中的*设置权限*旁注。我建议使用该方法。`setfacl`

* * *

## 回答 #5

> 赞同：-2
> 
> 时间：2012-07-28T05:39:59.047

**临时解决方案：**

永久禁用 SElinux

要永久禁用 SElinux，您需要编辑 SElinux 的配​​置文件 /etc/selinux/config 并添加/更改行禁用它：SELINUX=disabled

**注意：**禁用 SElinux 是不安全的，但对于开发环境来说没关系。

**永久解决方案：**

处理权限问题的好方法是按照[官方指南](https://symfony.com/doc/2.7/setup/file_permissions.html)设置权限。

* * *

## 回答 #6

> 赞同：-3
> 
> 时间：2012-07-28T05:34:24.063

以 su 用户身份使用以下命令关闭 SELinux 安全性。

```
echo 0 > /selinux/enforce 
```

# c# - 使用 Newtonsoft 和 C# 反序列化嵌套的 JSON

> ID：11520378
> 
> 赞同：2
> 
> 时间：2012-07-17T10:15:01.730
> 
> 标签：c#, json, asp.net-mvc-3, json.net

我正在尝试从 Rest API 解析 Json 响应。我可以得到很好的响应并创建了一些类模型。我正在使用 Newtonsoft 的 Json.Net。

我在回复中不断收到空值，并且不确定我的模型设置是否正确或遗漏了什么？

例如，我想要得到的是 Data\Items\Employee 中的 Firstname 和 ReferenceNumber

我的 Json 响应的一个示例是：

```
{
"Data": {
    "Links": [
  {
    "Rel": "parent",
    "Href": "http://Api/url/",
    "Title": "Api",
  }
],
    "Items": [
  {
    "Employee": {
  "ReferenceNumber": "0078952",
  "EmployeeStatus": {
    "Name": "Active",
    "Value": 2
  },
  "ContactByPost": true,
  "ContactByMarketingEmails": true,
  "ClientDetails": [
    {
      "LimitedCompany": {
        "Id": "809f4455-673d-df11-9849-00155d072900",
        "Name": "Company"
      },
      "ClientCompany": {
        "Id": "62494f0c-617d-412f-81a3-ca40ef80f774",
        "Name": "Company 2"
      },
      "Code": "G67D",
      "RefCode": "1271",
      "Date": "\/Date(1333456265000+0100)\/",
      "Id": "009ea227-887d-e111-96ec-000c29128cee",
      "CreatedOn": "\/Date(1333455954000+0100)\/",
      "CreatedBy": {
        "Id": "5c2cb5eb-7368-e111-96eb-000c29128cee",
        "Name": "System Administrator"
      },
      "Archived": false
    }
  ],
  "Title": {
    "Name": "Mr",
    "Value": 1
  },
  "FirstName": "Fred",
  "MiddleName": null,
  "LastName": "Flintstone",
  "KnownAs": null,
  "DateOfBirth": "\/Date(315576000000+0000)\/",
  "Gender": {
    "Name": "Male",
    "Value": 1
  },
  "HomePhoneNumber": "55555555555",
  "MobilePhoneNumber": null,
  "Addresses": null,
  "EmailAddresses": null,
  "Id": "009ea227-887d-e111-96ec-000c29128cee",
  "CreatedOn": "\/Date(1333455954000+0100)\/",
  "CreatedBy": {
    "Id": "5c2cb5eb-7368-e111-96eb-000c29128cee",
    "Name": "System Administrator"
  },
  "Archived": false
},
    "Links": [
      {
        "Rel": "list",
        "Href": "http://Api/Addresses",
        "Title": "Addresses",
        "Description": "Get a list of addresses for this Employee."
      }
    ]
  }
]
}
} 
```

我的模型设置如下所示：

```
public class Data
{
    public Collection<Links> Links { get; set; }
    public Collection<Items> Items { get; set; }
}
public class Items
{
    public Employee Employee { get; set; }
}
public class Employee
{
    public string ReferenceNumber { get; set; }
    public string FirstName { get; set; }
    public string MiddleName { get; set; }
    public string LastName { get; set; }
    public string Id { get; set; }
}
public class Links
{
    public string Rel { get; set; }
    public string Href { get; set; }
    public string Title { get; set; }
    public string Description { get; set; }
} 
```

在我的控制器中，我正在执行以下操作：

```
Data data = Newtonsoft.Json.JsonConvert.DeserializeObject<Data>(APIResponse); 
```

我在调试时看到的只是项目和链接，它们都是空的。我不确定我做错了什么或如何让它工作，以便我可以访问我的 C# 代码中的值？任何帮助，将不胜感激。该应用程序是 MVC3。我见过的例子是使用简单的 json 结构。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-17T10:42:22.473

从反序列化器的角度来看，JSON 字符串不适合 Data 类。它看到一个具有名为“Data”的单个属性的根对象，而它希望看到一个具有“Items”和“links”属性的对象。所以它只是构造一个 Data 实例，并将其属性保留为空。

要修复它，请删除包装对象，因此您会得到以下内容： { "Items" : [..], "Links" : [...] }

并再次尝试反序列化。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-17T11:39:18.933

我设法解决了这个问题。正如@Jake 也提到的，我所做的是首先创建父类来处理 Data 对象。我在 Employee 类中创建了一个 ClientDetails 类型的类，如下所示：

```
public ClientDetails clientDetails {get; set;} 
```

这会导致错误，因为 ClientDetails 是一个数组。我将其更改为以下内容：

```
public List<ClientDetails> clientDetails {get; set;} 
```

这解决了问题，现在我的整个 Data 对象都填充了来自 API 的响应。

@Jake，感谢您的意见...

# c - 安卓在线c编译器

> ID：11520380
> 
> 赞同：1
> 
> 时间：2012-07-17T10:15:06.043
> 
> 标签：c, compiler-construction

嗨朋友们，我是一名学位学生，正在考虑将在线 c 编译器作为我的最后一年项目，就像 codepad 和 ideone 一样。

所以这就是想法：

1.  我将有一个带有编译器的服务器，它将接受来自客户端的代码，编译它然后执行它。结果将被发送回客户端。

2.  客户端可以使用我的 android 应用程序或桌面浏览器输入代码并将其发送到服务器。

3.  当然会有安全问题可以通过沙盒和 chrootjail 和其他技术来处理。

我的问题是我想将正在运行的程序的输入流连接到用户输入（浏览器或 android 应用程序界面）。这样他就可以在程序执行时输入输入。

例子 ：

```
void main()
{
int i;
printf("\n\n\t Enter  i's value : ");
scanf("%d",&i); 
// Here the program should wait till the user type input in browser or app. and then it should proceed.   
} 
```

我的问题是我怎样才能做到这一点。？我将不得不让程序在服务器上执行并通过编码将其输入流连接到客户端。

用户可以键入输入，就像他可以键入在他的本地机器上执行的程序一样。

那么有什么想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-17T10:22:03.787

对于您正在运行的每个用户程序，还有一个管理器程序可以启动它并处理它与用户的通信。让管理程序创建两个管道，一个是程序的输入，另一个是程序的输出。（如果您想单独处理错误输出，则为三个。）

当你从用户那里得到需要去用户正在运行的程序的信息时，通过你喜欢的任何机制将它交给管理器进程。然后，管理器进程可以在连接到用户进程的标准输入的管道上发送它。当管理器在管道上看到与用户进程的标准输出挂钩的数据时，将其放在与用户通信的代码可以将其发送给用户的某个地方。

# uitableview - UITableView 点击拖拽性能问题

> ID：11520382
> 
> 赞同：0
> 
> 时间：2012-07-17T10:15:23.893
> 
> 标签：uitableview

我试图在 UITableView 单元格上手动实现单击和拖动行为（即，不进入编辑模式）。

为此，通过根据需要删除和插入行并将单元格移动到新位置，将单元格滑出移动单元格。

然而，事实证明，当数据由 NSFetchedResultsController 备份时，单元格移动会变得不稳定，因为每行删除/插入都会导致 NSFetchedResultsController 做很多工作。

我将此与标准 UITableView 单元格移动进行了比较，当然我的委托仅在拖动结束时被回调一次。结果，它又好又光滑。

有没有人有可以帮助解决这个问题的建议？是否有 UIViewController 的完整重新实现允许拖放？

蒂姆

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-17T11:13:25.527

我已经解决了这个问题。在拖动开始之前，复制数据模型的当前状态。这是我在拖动过程中操作的模型，因此对托管上下文没有任何修改。拖动完成后，我只更新一次数据模式。

# php - 如何获取 URL 数据

> ID：11520383
> 
> 赞同：0
> 
> 时间：2012-07-17T10:15:33.773
> 
> 标签：php

我已经创建了我通过 POST ajax 发送的自定义查询，但问题是如何检索该数据

我正在发送此查询 =`rep_id=4&filter=&filter_val=&rep_id=5&filter=&filter_val=&rep_id=6&filter=&filter_val=&from=p_employee_mst`

这是在 PHP 中获取该查询的函数

```
$rep="";
foreach ($_POST["rep_id"] as $k => $v) {
    $rep[]=$v;
}
print_r($rep); 
```

我收到以下错误

**为 foreach() 提供的参数无效**

如果 print_r($_POST); 我得到这个

```
Array
(
    [rep_id] => 6
    [filter] => 
    [filter_val] => 
    [from] => p_employee_mst
) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-17T10:19:30.967

问题在于你是查询字符串

`rep_id`应该表示为`rep_id[]`，并且您应该在链接中将其替换为 URL 编码，例如：`rep_id%5B%5D`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-17T10:22:20.870

在您的示例中**rep_id**是一个简单的整数值。当您将多个参数放入变量时，您将获得最后一个参数。在您的情况下，它的**rep_id=6**。

如果你想要一个数组，那么在你的请求中创建一个数组。

```
rep_id[]=5&rep_id[]=6 
```

然后你得到结果：

```
array (size=2)
  0 => string '5' (length=1)
  1 => string '6' (length=1) 
```

然后你可以遍历数组。否则你会得到以下结果：

```
rep_id=5&rep_id=6

string '6' (length=1) 
```

因为最后一个值/参数获胜。

# objective-c - 在两个（或更多）视图控制器之间传递的对象是副本而不是指针

> ID：11520387
> 
> 赞同：0
> 
> 时间：2012-07-17T10:15:40.677
> 
> 标签：objective-c, xcode, object

我有许多视图控制器，我通过子视图上定义的属性传递对象并在推送之前分配。我期望后续视图上对象的任何更改都会反映在父视图上，并最终反映在我的主视图控制器上，从链开始。因此，该对象必须作为新实例在视图控制器之间复制，而不是通过引用（指针）传递。

**代码示例...** [为清楚起见，此代码使用 UIPopoverController]

```
SurveyListTableViewController *surveyList = [[SurveyListTableViewController alloc] init];
surveyList.surveys = self.surveys;
UINavigationController *navController = [[UINavigationController alloc] initWithRootViewController:surveyList];
surveyPopoverController = [[UIPopoverController alloc] initWithContentViewController:navController]; 
```

另一个代码示例... [此示例有一个核心数据托管对象“计划”正在传递]

```
UIStoryboard *storyboard = mainCanvasViewController.storyboard;
AddPlanViewController *addPlanViewController = [storyboard instantiateViewControllerWithIdentifier:@"AddPlanViewController"];
addPlanViewController.plan = [NSEntityDescription insertNewObjectForEntityForName:@"Plan" inManagedObjectContext:self.managedObjectContext];
[self.navigationController pushViewController:addPlanViewController animated:YES]; 
```

无论如何我可以强制通过引用/指针而不是值/副本传递吗？还是我需要完全不同的方法？...

提前谢谢了。迈克尔。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-17T18:51:35.007

如果你传递一个对象，你几乎总是传递一个对它的引用（而不是一个副本）。通过副本实际上并不是很容易。

如果您认为它是副本，因为更改未反映在原始文件中，请确保您实际存储了更改。您可能正在为您的对象重新分配值（也就是说，您每次都在调用初始化并重置对象）确保您只声明和初始化一次对象。

老实说，最好的策略是只传递对包含您要编辑的对象的原始类的引用，然后使用这些对象。因此，使用您的弹出框控制器添加一个名为`parentVC`. 然后在弹出框内你可以做`parentVC.nameOfObject`（​​假设对象是视图控制器的属性。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-17T19:48:31.297

查看您正在设置的属性的语义。一些属性被设置为复制他们设置的东西，其他的只是保留这个东西。例如，字符串属性几乎总是设置为`copy`，原因有两个：1) 像 NSString 这样的不可变类型无论如何都会保留而不是复制，2) 如果有人碰巧传入了一个可变字符串，您通常不想更改它就在他们的鼻子底下。

无论如何，您可能会发现自己处理副本而不是原始对象的最可能原因是属性语义是这样设置的。如果这是问题所在并且属性是代码的一部分，那么您显然可以更改属性声明以满足您的需要。否则，解决方案是让有问题的视图控制器做他们的事情，然后在关闭它们之前检索属性。

# objective-c - 如何通过应用程序自动拨打电话？

> ID：11520389
> 
> 赞同：0
> 
> 时间：2012-07-17T10:15:43.360
> 
> 标签：objective-c

嗨，任何人都可以建议我如何自动通过应用程序调用我的意思是我在我的应用程序中使用了以下代码。

```
NSURL *url = [NSURL URLWithString:@"telprompt://123-4567-890"];
[[UIApplication sharedApplication] openURL:url]; 
```

它工作正常，通话结束后它也返回到应用程序，但问题是它不会自动接受通话事件，我们必须点击通话按钮。所以有没有办法在不给任何用户交互的情况下拨打电话？提前谢谢...

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-17T10:22:44.293

尝试

```
NSURL *url = [NSURL URLWithString:@"tel:123-4567-890"];
[[UIApplication sharedApplication] openURL:url]; 
```

`telprompt`URL 方案旨在要求用户确认呼叫。如果您只使用`tel`，呼叫将立即启动。

# c# - select r.Field 和 select new {r.Field} 的区别

> ID：11520391
> 
> 赞同：1
> 
> 时间：2012-07-17T10:15:57.770
> 
> 标签：c#, linq, entity-framework, linq-to-sql, c#-4.0

链接到这两个主题：

[将查询的 Lambda 表达式转换为 linq 版本](https://stackoverflow.com/questions/11518108/convert-lambda-expression-of-a-query-to-linq-version)

和

[返回与该项目相关的所有记录都具有特定条件的项目](https://stackoverflow.com/questions/11516387/return-items-that-all-records-related-to-that-items-have-specific-conditions)

在第一个主题@xanatos 评论说：

> @Kerezo 请注意，新的 { r.City } 错误出现两次（每个查询一次）。new { r.City } 创建一个匿名对象，它有一个名为 City 的属性，其中包含 City 对象（因此您将 City 包装在一个对象中）没有 new 您直接拥有 City

考虑这段代码：

```
var citiesToExclude = from r in ent.TestAllStatusEqualsOnes
                              where r.Status != 1
                              select r.City;

GridView1.DataSource = citiesToExclude;
GridView1.DataBind(); 
```

如果我以这种方式编写此代码：

```
var citiesToExclude = from r in ent.TestAllStatusEqualsOnes
                              where r.Status != 1
                              select new { r.City };

GridView1.DataSource = citiesToExclude;
GridView1.DataBind(); 
```

每件事都是平等的。

`select r.Field`我不明白和之间有什么区别`select new {r.Field}`。谁能解释更多？

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-17T10:22:36.023

匿名类型与任何其他类型*几乎*相同。所以：

```
select new { r.City } 
```

几乎等同于：

```
select new SomeType { City = r.City} 
```

和：

```
class SomeType { public string City {get;set;} } 
```

那么，这也许使区分变得简单；它与以下之间的区别相同：

```
string x = obj.City; 
```

和

```
SomeType y = new SomeType { City = obj.City }; 
```

在一种情况下，您获得*的是 city name*。在另一种情况下，您将获得一个对象，该对象具有*称为**城市*名称的属性（尽管在一般情况下，它也可以具有其他属性）。`City`

 *相同的逻辑适用于 LINQ。

两者之间的一个方便的区别是考虑`null`，例如：

```
var city = {some query}.FirstOrDefault(); 
```

如果您选择的是实际城市名称，则很难区分“无行”与“一行，城市名称为空”之间的区别。如果您正在选择一个*对象*`obj == null`，您可以在vs之间进行区分`obj.City == null`。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-17T10:18:47.583

1 - 选择 r.Field - 返回现有类型（例如 r.Field = 字符串）

2 - 选择新的 {r.Field} - 返回新的匿名类型对象。

希望它能消除疑虑。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-17T10:22:14.463

该`new { Property = value }`语法用于创建[匿名类型](http://msdn.microsoft.com/en-us/library/bb397696.aspx)（具有只读属性的引用类型以及对相等和类型重用的支持）。

不同之处在于您的第一条语句返回`IEnumerable<City Type>`第二条语句返回`IEnumerable<anonymous type>`。匿名类型有一个名为`City`type的属性`City Type`。如果未指定属性名称，如下所示：

```
new { City = r.City }; // Explicitly-named property called City. 
```

匿名类型采用如下所示的属性名称：

```
new { r.City }; // Property called City. 
```

如果匿名类型无法解析名称：

```
new { "a string" }; 
```

你得到一个编译错误。

匿名类型对于构造内联容器以传播到另一个扩展方法或 linq 语句的另一部分很有用。

匿名类型不能声明为类成员，您需要使用`var`它们才能充分利用它们。有 IntelliSense 支持。它们也不满足接口定义，只能包含属性。*

# android - 如何使用 jQuery-mobile 开发看起来适合 Android 的 UI？

> ID：11520393
> 
> 赞同：9
> 
> 时间：2012-07-17T10:16:02.517
> 
> 标签：android, jquery-mobile, cordova, themeroller

我正在尝试使用 Phonegap 和 jQuery Mobile 构建一个 Android 应用程序。为了自定义 UI，我使用 ThemeRoller。在使用 ThemeRoller 时，我注意到默认情况下控件具有原生 iPhone 控件的外观和感觉。例如 ON-OFF 拨动开关

有没有办法指定控件应该具有原生 Android 控件的外观？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-08-12T12:09:08.633

这个叫做[nativeDroid](http://flypixel.com/nativedroid-a-theme-for-jquery-mobile/7892175001166318)。这是新的，它是真正的 Holo，而不是“Holo-like”。

我一直在尝试它，我必须说它确实名副其实，但它仍然有很多问题，主要是使用图标和按钮，因为这是修改过的 jQM。话虽如此，我认为这是您或其他任何人目前可以得到的最好的。

![截屏](../Images/075c16ef0d9c73efd7de9fd50e0c2446.png)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-08-13T19:37:35.813

另一个不错的是[薯条](https://github.com/jaunesarmiento/fries)。它不是使用 jQuery Mobile 构建的，但我认为如果您正在寻找性能，最好不要使用 jQuery Mobile。

> Fries 让您可以使用 HTML、CSS 和 JavaScript 创建性感的类似 Android 的 UI。

![在此处输入图像描述](../Images/f553b80c488d8b4c9e6165b6abf1af9f.png)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-09-07T22:04:37.640

这里是[温泉 ui](https://onsen.io/)试试看；它干净又快速。

# clojure - 为什么取消的 Clojure 期货继续使用 CPU？

> ID：11520394
> 
> 赞同：18
> 
> 时间：2012-07-17T10:16:06.337
> 
> 标签：clojure, timeout, profiling, cpu, future

我有很多 Java 字节码示例，我想从 Clojure 执行所有这些示例。每个字节码序列都可能包含一个无限循环，在这种情况下，我想在几秒钟后停止运行它。我一直将期货视为这样做的一种手段。在寻找了几个实现之后，我尝试了这两个代码：

```
(deref (future (loop[a 1] (recur a)) :done!) 1000 :impatient!) 
```

...以及[https://gist.github.com/3124000上的代码](https://gist.github.com/3124000)

在这两种情况下，循环似乎都适当地超时（在后一种情况下，据报道未来已经完成并取消），但我看到我的 CPU 使用率上升到 99% 左右并保持在那里。我还看到每次运行此代码时，我的 Java 进程都会获得一个额外的线程。

在我看来，未来正在被取消，但代码仍在运行。在我的程序中，我需要运行并超时，一些非常紧凑的无限循环（例如，Java 字节码相当于“20 PRINT GOTO 10”），并且我没有修改我正在运行的代码的选项。

为什么我看到这种行为的任何想法；我能做些什么来防止它；或替代方法来实现我运行和超时此类代码的目标？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-26T19:46:56.870

Java 支持的线程取消机制是[中断](http://docs.oracle.com/javase/tutorial/essential/concurrency/interrupt.html)。该`.stop()`方法因某种原因而被弃用 - 请参阅[文档](http://docs.oracle.com/javase/1.5.0/docs/guide/misc/threadPrimitiveDeprecation.html)、Effective Java、Java Concurrency in Practice 等。

事实上，`FutureTask`(which backs `future-cancel`) 的实现是基于中断的。

到今天为止，每个 Clojure 未来都由一个无界线程池支持（就像`send-off`操作一样）。因此，您可以利用线程中断原语：

```
(def worker
  (let [p (promise)]
    {:future (future
               (let [t (Thread/currentThread)]
                 (deliver p t)
                 (while (not (Thread/interrupted))
                   (println 42)
                   (Thread/sleep 400))))
     :thread @p})) 
```

现在可以成功执行`(.interrupt (:thread worker))`或`(future-cancel (:future worker))`。

尽管这将线程取消机制与 Futures 结合在一起，但可用的 Executor 实现足够智能，可以清除上一个任务可能已设置的中断状态，因此对一个任务的中断永远不会影响其他任务——即使它们在相同的线程。

关键是抢先杀死线程通常是一个坏主意——如果你想取消任务，你必须以某种或其他方式使它们显式地可取消。OTOH，在您的特定情况下，您正在执行不透明的字节码，因此除了诉诸`.stop()`.

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-07-17T10:37:49.370

我发现实际杀死线程内执行的代码的唯一方法是使用不推荐使用的`.stop`方法。在很多情况下，它被弃用的原因并不重要。

我在[clojail](https://github.com/flatland/clojail/blob/master/src/clojail/core.clj#L40)中有一个功能可以做到这一点。随意抢夺功能或只是拉入库。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-17T11:19:31.283

根据Java API doc，`cancel`不能立即停止任务。

> 尝试取消此任务的执行。如果任务已完成、已被取消或由于某些其他原因无法取消，则此尝试将失败。如果成功，并且在调用取消时此任务尚未启动，则此任务不应该运行。如果任务已经开始，则 mayInterruptIfRunning 参数确定是否应该中断执行该任务的线程以尝试停止该任务。

# php - CakePHP 2.2 中的连接被重置问题

> ID：11520404
> 
> 赞同：0
> 
> 时间：2012-07-17T10:16:33.303
> 
> 标签：php, cakephp, cakephp-2.1

当我尝试根据州制作动态城市下拉列表时，我是 cakephp 新手，然后我收到此错误

```
The connection was reset. 
```

我的js代码是

```
$(document).ready(function(){
$('#UserState').change(function(){
  var stateid=$(this).val();
  $.ajax({
  type: "POST",
  url: "checkcity",
  data:'stateid='+stateid+'&part=checkcity',
  success: function(data) {
  $("#city_div").html(data);
  }
  });
});
}); 
```

为此，我在用户控制器上使用功能 checkcity。这是我的用户控制器文件。

```
 class UsersController extends AppController {
 public $uses=array('User', 'City','State');
 function index(){

  }
  public function add() {

    $this->set('states_options', $this->State->find('list', array('fields' =>array('id','name') )));
$this->set('cities_options', array());
    if ($this->request->is('post')) {
        $this->User->create();
        if ($this->User->save($this->request->data)) {
            $this->Session->setFlash(__('The user has been saved'));
            $this->redirect(array('action' => 'index'));
        } else {
            $this->Session->setFlash(__('The user could not be saved. Please, try again.'));
        }
    }
}

public function checkcity(){
$this->layout=false;
$stateid=$this->request->data['stateid'];
$this->set('cities_value',$this->City->find('list', array('conditions' =>    array('state_id' => $stateid), 'fields' => array('id', 'name')));
}
} 
```

现在当我把这一行放在我的控制器文件中

```
 $this->set('cities_value',$this->City->find('list', array('conditions' =>    array('state_id' => $stateid), 'fields' => array('id', 'name'))); 
```

然后我得到这个错误。谁能告诉我其中有什么问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-17T10:44:22.193

我认为，您错过了一个右括号。请检查它是否不适合您。它应该是：

```
$this->set('cities_value',$this->City->find('list', array('conditions' =>    array('state_id' => $stateid), 'fields' => array('id', 'name')))); 
```

# objective-c - 托管对象上下文仅保存托管对象循环的最后一条记录

> ID：11520405
> 
> 赞同：0
> 
> 时间：2012-07-17T10:16:37.477
> 
> 标签：objective-c, ios, core-data, nsmanagedobject, nsmanagedobjectcontext

我正在使用`NSOperation`子类导入大量数据并将其保存如下：

```
 - (void)main
{

NSAutoreleasePool *pool = [[NSAutoreleasePool alloc] init];
[[NSRunLoop currentRunLoop] addPort:[NSPort port] forMode:NSRunLoopCommonModes];
NSManagedObjectContext *moc = [[NSManagedObjectContext alloc] init];
[moc setPersistentStoreCoordinator:[self persistentStoreCoordinator]];
[moc setUndoManager:nil]; //to make the import more effecient
NSError *error; 

for (NSManagedObject *taskInfo in self.tasks) { //self.tasks are the xml returned from a web service

 Task *taskDB  = [NSEntityDescription insertNewObjectForEntityForName:@"Task"inManagedObjectContext:moc];
        taskDB.taskID = [taskInfo valueForKey:@"TaskID"];
        taskDB.taskAssignedDate = [taskInfo valueForKey:@"TaskAssignDate"];
        taskDB.corporate = [self getCorporate:moc :[[taskInfo valueForKey:@"FacilityInfo"] valueForKey:@"ID"] ]; 
        taskDB.dateTime = [[NSDate date]retain];
        taskDB.requestNumber = [taskInfo valueForKey:@"RequestNumber"];

 ... //there are a lot of other properties for the task table
 } //for
 [moc save:&error];

 [moc reset];
 [pool drain], pool = nil;

 } 
```

但是`managedObjectContext`唯一保存循环中的最后一条记录并且不保存所有记录，但是，如果我将保存代码放入循环中，`managedObjectContext`它将按预期保存所有记录。我还尝试通过在循环中设置一个计数器在（10）条记录后进行保存，在一定数量的记录后进行保存，但同样的问题发生了，`moc`每 10 次循环运行后保存一条记录。我怎么解决这个问题 ？我希望一次或每 10 次循环运行`moc`保存**所有记录。**

非常感谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-17T11:40:27.093

您需要做的是将上下文合并到您的 appdelegate 中。首先注册`NSManagedObjectContextDidSaveNotification`：

```
[[NSNotificationCenter defaultCenter] addObserver:self selector:@selector(contextChanged:) name:NSManagedObjectContextDidSaveNotification object:nil]; 
```

将其放置在`- (BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:(NSDictionary *)launchOptions`方法中的某个位置。

并添加此方法：

```
- (void) contextChanged:(NSNotification *)notification {

    if( [notification object] == [self managedObjectContext] ){
        return;
    }

    if( ! [NSThread isMainThread] ){
        [self performSelectorOnMainThread:@selector(contextChanged:) withObject:notification waitUntilDone:YES];
        return;
    }

    [[self managedObjectContext] mergeChangesFromContextDidSaveNotification:notification];      

    //You could save here:
    NSError *error = nil;
    if(! [[self managedObjectContext] save:&error] ) {
        NSLog(@"Error saving context: %@", error);
    }

} 
```

现在会发生什么，当您从另一个线程保存 ObjectContext 时，您 appdelegate 将收到通知，告知对象上下文已保存。接下来，检查它是否不是 appdelegate 中的某个上下文，然后确保在主线程中运行并合并通知中的上下文。

* * *

其他小人认为您的代码很奇怪：`taskDB.dateTime = [[NSDate date]retain];`. 无需保留日期，物业应为您复制或保留日期。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-17T11:26:06.493

在每个“[NSEntityDescription insertNewObjectForEntityForName”之后检查 [moc insertedObjects] 的大小是否正在变化。

并检查在调用保存上下文之前是否内存不足。

# c# - C#表单，调整表单大小后，图像无法超出原始表单大小

> ID：11520410
> 
> 赞同：-2
> 
> 时间：2012-07-17T10:16:54.840
> 
> 标签：c#, forms, resize, crop

摘要：它只是不会超出初始表单大小。我可以按比例缩小，但不能按比例放大，它会被裁掉。

如果摘要不够清晰，则说明：因此，如果我的表单最初大小为 1000,800。缩放后我绘制的图像永远不会大于 1000,800。

如果我将表格缩放到 2000,1600，它将被裁剪掉。图像将被裁剪到下方和右侧的一半，因此只绘制左上角部分。

我确信我的缩放工作正确，因为只要我在创建时将表单设置为 2000,1600，它就可以工作。

. . 按要求编写代码，但我不确定它是否重要。.

```
mapDrawer.DrawImage( map1,
    new RectangleF(0, 0, ImageSizeX * scale, ImageSizeY * scale),
    new RectangleF(0, 0, ImageSizeX, ImageSizeY),
    GraphicsUnit.Pixel); 
```

其中 scale 是 form.size/map_size。我采用了较小的 x 或 y 比例。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-17T11:23:37.850

您的*mapDrawer*对象是问题所在，尽管无法从不充分的代码段中看到。毫无疑问，这是您早期创建的 Graphics 对象，可能是在表单的 Load 事件中。它有一个基于当时表单大小的剪辑区域。如果您随后通过调整大小使表单变大，您会发现这个复制的 Graphics 对象无法绘制超出其原始边界。它不能。

永远不要复制 Graphics 对象，始终在 Paint 事件处理程序中进行绘画并使用传递的 e.Graphics 对象。这也确保了双缓冲正常工作，您可能想要打开它。如果发生应该重绘图像的事情，请使用 Invalidate() 方法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-17T11:13:20.350

我最好的猜测是，当重新绘制表单时，您需要重新绘制图像：

```
private void Form1_Paint(object sender, PaintEventArgs e)
{
    Graphics g = e.Graphics;

    g.DrawImage(map1,
        new RectangleF(0, 0, ImageSizeX * scale, ImageSizeY * scale),
        new RectangleF(0, 0, ImageSizeX, ImageSizeY),
        GraphicsUnit.Pixel);
} 
```

要在调整窗体大小（或任何其他强制它重绘）时调用此方法，您应该在窗体的构造函数中添加 Paint 事件的句柄：

```
Paint += new EventHandler(Form1_Paint); 
```

# c# - 正则表达式捕获文本

> ID：11520413
> 
> 赞同：1
> 
> 时间：2012-07-17T10:17:01.907
> 
> 标签：c#, .net, regex, linq

我有一个日志文件，内容如下：

> ```
> 2012-07-16 03:20:41,23796160897,Text,id:SAR-23796160897-c0-2-1 sub:000 dlvrd:001 提交日期:120715220216 完成日期:120716032038 stat:DELIVRD err:000 text:,FOTSO TOKAM，SMSCReceiptMsgId=SAR-23796160897-c0-2-1
> 2012-07-16 03:20:48,23796160897,Text,id:SAR-23796160897-c0-2-2 sub:000 dlvrd:001 提交日期:120715220216 完成日期:120716032045 stat:DELIVRD err:000 text:,FOTSO TOKAM,SMSCReceiptMsgId=SAR-23796160897-c0-2-2
> 2012-05-04 00:07:46,23777603300,Text,id:4FA23EB0 sub:000 dlvrd:001 提交日期:120503225018 完成日期:120504000744 stat:DELIVRD err:000 文本:,FLP,SMSCReceiptMsgId=4FA23EB0
> 2012-05-04 01:50:18,23796726987,Text,id:4FA23E95 sub:000 dlvrd:001 提交日期:120503225014 完成日期:120504015016 stat:DELIVRD err:000 text:,FLP,SMSCReeptMsgId=4FA23E95
> 2012-05-04 01:50:22,23799757015,Text,id:4FA23EB2 sub:000 dlvrd:001 提交日期:120503225018 完成日期:120504015021 stat:DELIVRD err:000 text:,FLP,SMSCReeptMsgId=4FA23EB2
> 2012-05-04 01:50:48,23799907239,Text,id:4FA23F38 sub:000 dlvrd:001 提交日期:120503225042 完成日期:120504015046 stat:DELIVRD err:000 文本:,FLP,SMSCReeptMsgId=4FA23F38
> 2012-05-04 01:50:48,23799896455,Text,id:4FA23D1C sub:000 dlvrd:001 提交日期:120503175232 完成日期:120504015046 stat:DELIVRD err:000 text:,FLP,SMSCReeptMsgId=4FA23D1C
> 2012-05-04 01:50:48,23799896455,Text,id:4FA23F04 sub:000 dlvrd:001 提交日期:120503225031 完成日期:120504015046 stat:DELIVRD err:000 text:,FLP,SMSCReeptMsgId=4FA23F04
> 2012-05-04 01:50:50,23794105044,Text,id:4FA23F55 sub:000 dlvrd:001 提交日期:120503225046 完成日期:120504015048 stat:DELIVRD err:000 text:,FLP,SMSCReeptMsgId=4FA23F55
> 2012-05-04 01:51:19,23796029764,Text,id:4FA23FEE sub:000 dlvrd:001 提交日期:120503225114 完成日期:120504015117 stat:DELIVRD err:000 text:,FLP,SMSCreceiptMsgId=4FA23FEE
> 2012-05-04 02:17:51,23775461594,Text,id:4FA24025 sub:000 dlvrd:001 提交日期:120503225125 完成日期:120504021749 stat:DELIVRD err:000 text:,FLP,SMSCReceiptMsgId=4FA24025
> 2012-05-04 04:08:02,23777437781,Text,id:4FA23F23 sub:000 dlvrd:001 提交日期:120503225037 完成日期:120504040800 stat:DELIVRD err:000 text:,FLP,SMSCReeptMsgId=4FA23F23
> 2012-05-04 04:50:12,23777970013,Text,id:4FA23E70 sub:000 dlvrd:000 提交日期:120503225005 完成日期:120504045011 stat:EXPIRED err:027 text:,FLP,SMSCreceiptMsgId=4FA23E70
> 2012-05-04 04:50:15,23775182832,Text,id:4FA23E7E sub:000 dlvrd:000 提交日期:120503225008 完成日期:120504045014 stat:EXPIRED err:027 text:,FLP,SMSCreceiptMsgId=4FA23E7E
> 2012-05-04 04:50:17,23777789644,Text,id:4FA23E80 sub:000 dlvrd:000 提交日期:120503225010 完成日期:120504045016 stat:EXPIRED err:027 text:,FLP,SMSCreceiptMsgId=4FA23E80
> 2012-05-04 04:50:21,23777529371,Text,id:4FA23E8F sub:000 dlvrd:000 提交日期:120503225013 完成日期:120504045019 stat:EXPIRED err:027 text:,FLP,SMSCreceiptMsgId=4FA23E8F
> 2012-05-04 04:50:21,23777613852,Text,id:4FA23E97 sub:000 dlvrd:000 提交日期:120503225014 完成日期:120504045020 stat:EXPIRED err:027 text:,FLP,SMSCreceiptMsgId=4FA23E97
> 2012-05-04 04:50:24,23777407598,Text,id:4FA23EAE sub:000 dlvrd:000 提交日期:120503225017 完成日期:120504045023 stat:EXPIRED err:032 text:,FLP,SMSCReceiptMsgId=4FA23EAAE
> 2012-05-04 04:50:26,23777736950,Text,id:4FA23EAF sub:000 dlvrd:000 提交日期:120503225018 完成日期:120504045024 stat:EXPIRED err:027 text:,FLP,SMSCreceiptMsgId=4FA23EAF
> 2012-05-04 04:50:31,23775834128,Text,id:4FA23ED6 sub:000 dlvrd:000 提交日期:120503225024 完成日期:120504045030 stat:EXPIRED err:027 text:,FLP,SMSCreceiptMsgId=4FA23ED6
> 2012-05-04 04:50:36,23777486441,Text,id:4FA23EF3 sub:000 dlvrd:000 提交日期:120503225029 完成日期:120504045035 stat:EXPIRED err:027 text:,FLP,SMSCreceiptMsgId=4FA23EF3
> 
> ```

现在，我想通过使用带有 c#.net 和 LINQ 的正则表达式从该内容中捕获几个特定字段的值，例如“id、done date、stat”。

如果有人有任何想法，请帮助我。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-17T10:50:47.787

我不认为你的正则表达式会在这里帮助你很多。相反，您应该将行分成行然后分成列，因为我可以看到数据可以分割成一个矩阵，您可以从中轻松提取您正在寻找的信息......即使您可以在 JavaScript/C#/Java 中执行此操作或任何语言。

在我的实践中这样做：

*   将数据分成几行
*   将行拆分为列
*   然后遍历每一行并指向您要查找的列。

    ```
    var content = data.split('\n');
    foreach(var line in content) 
    {
         var cols = line.split(',');
         var c1 = cols[0];
         var c2 = cols[1];
         var c3 = cols[2];
    } 
    ```

您可以根据您的需要改进上述摘录......这是最好的方法。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-17T11:14:54.883

目前尚不清楚所有字段的含义，或者分隔符是否为常量。使用您提供的测试数据，这会将大部分信息放入命名组中。

```
/// <summary>
///  Regular expression built for C# on: Tue, Jul 17, 2012, 12:08:12 PM
///  Using Expresso Version: 3.0.4334, http://www.ultrapico.com
///  
///  A description of the regular expression:
///  
///  Beginning of line or string
///  [Date]: A named capture group. [[^,]+]
///      Any character that is NOT in this class: [,], one or more repetitions
///  ,
///  [Number]: A named capture group. [[^,]+]
///      Any character that is NOT in this class: [,], one or more repetitions
///  ,
///  [Text1]: A named capture group. [[^,]+]
///      Any character that is NOT in this class: [,], one or more repetitions
///  ,
///  id:
///      id:
///  [ID]: A named capture group. [[^\s]+]
///      Any character that is NOT in this class: [\s], one or more repetitions
///  Whitespace
///  sub:
///      sub:
///  [Sub]: A named capture group. [\w+]
///      Alphanumeric, one or more repetitions
///  Whitespace
///  dlvrd:
///      dlvrd:
///  [Dlvrd]: A named capture group. [\w+]
///      Alphanumeric, one or more repetitions
///  Whitespace
///  submit\sdate:
///      submit
///      Whitespace
///      date:
///  [SubmitDate]: A named capture group. [\w+]
///      Alphanumeric, one or more repetitions
///  Whitespace
///  done\sdate:
///      done
///      Whitespace
///      date:
///  [DoneDate]: A named capture group. [\w+]
///      Alphanumeric, one or more repetitions
///  Whitespace
///  stat:
///      stat:
///  [Status]: A named capture group. [\w+]
///      Alphanumeric, one or more repetitions
///  Whitespace
///  err:
///      err:
///  [Error]: A named capture group. [\d+]
///      Any digit, one or more repetitions
///  Whitespace
///  
///
/// </summary>
public static Regex regex = new Regex(
      "^(?<Date>[^,]+),\r\n(?<Number>[^,]+),\r\n(?<Text1>[^,]+),\r\nid:(?"+
      "<ID>[^\\s]+)\\s\r\nsub:(?<Sub>\\w+)\\s\r\ndlvrd:(?<Dlvrd>\\w+)\\s"+
      "\r\nsubmit\\sdate:(?<SubmitDate>\\w+)\\s\r\ndone\\sdate:(?<DoneD"+
      "ate>\\w+)\\s\r\nstat:(?<Status>\\w+)\\s\r\nerr:(?<Error>\\d+)\\s",
    RegexOptions.Multiline
    | RegexOptions.ExplicitCapture
    | RegexOptions.CultureInvariant
    | RegexOptions.IgnorePatternWhitespace
    | RegexOptions.Compiled
    ); 
```

因此，您可以调用：

```
var matches = regex.Matches(inputData); 
```

我个人建议您将测试限制为单行数据并改为调用它：

```
var match = regex.Match(inputLineOfData); 
```

这意味着您可以：

```
if ( match.Success )
{
   var id = match.Groups["ID"].Value;
   var submitDate = match.Groups["SubmitDate"].Value;  // Parse to DateTime
   var doneDate = match.Groups["DoneDate"].Value;  // Parse to DateTime

   // etc for 'sub', 'dlvrd', 'Status', 'Error'..
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-17T10:44:35.840

可能 csv 解析器会更好，但您可以使用此正则表达式并将 id: 替换为您想要的其他字段。前任`done date:(?<done date>.*?)\s`

```
string strRegex = @"id:(?<id>.*?)\s.*?done date:(?<donedate>.*?)\s.*?stat:(?<stat>.*?)\s";
RegexOptions myRegexOptions = RegexOptions.IgnoreCase | RegexOptions.Multiline;
Regex myRegex = new Regex(strRegex, myRegexOptions);
string strTargetString = @"2012-07-16 03:20:41,23796160897,Text,id:SAR-23796160897-c0-2-1 sub:000 dlvrd:001 submit date:120715220216 done date:120716032038 stat:DELIVRD err:000 text:,FOTSO TOKAM,SMSCReceiptMsgId=SAR-23796160897-c0-2-1"
foreach (Match myMatch in myRegex.Matches(strTargetString))
{
  if (myMatch.Success)
  {
    // Add your code here 
    //myMatch.Groups["id"].Value;
    //myMatch.Groups["donedate"].Value;
    //myMatch.Groups["stat"].Value;
  }
} 
```

您可以使用一个正则表达式`id:(?<id>.*?)\s.*?done date:(?<donedate>.*?)\s.*?stat:(?<stat>.*?)\s`，然后使用像这样的组访问`myMatch.Groups["id"].Value`

# c++ - 固定更新速度

> ID：11520414
> 
> 赞同：0
> 
> 时间：2012-07-17T10:17:04.913
> 
> 标签：c++, loops, time.h

我已经在互联网上寻找了很长一段时间来寻找一个简单的解决方案来解决一个相当简单的问题。

我有这个函数作为一个线程运行，我想要的很简单。周围有很多伪代码解释了它是如何完成的，但是我在 C/C++ 中实现它时遇到了麻烦。

我想要什么：我有一个循环，我想每秒运行 20 次。我以前做过，但我一生都记不起来了。

这是我的代码。

```
void* Tick::startBeating() {
    mNext = clock();
    mRunning = 1;

    // Loop dat
    while (mRunning) {
        mT = clock();
        while ((mT) >= mNext) {
            // do updates here
            std::cout << "Tick." << std::endl;

            mNext = mT + SKIP_TICKS;
        }

        sleep(1);
    }

    return NULL;
} 
```

这不起作用，似乎没有任何工作。C 语言中的简单解决方案在 Internet 上找不到，这让我感到惊讶。

是的，我知道 CLOCKS_PER_SEC，但我只是不知道了。

有什么帮助吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-17T10:19:37.267

1.  在你工作之前，检查时间。

2.  计算你应该运行下一个循环的时间。

3.  做任何你需要做的事情。

4.  计算距离您在步骤 2 中计算的时间还剩多少时间。

5.  睡那么久。

6.  转到步骤 1。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-17T10:31:33.317

答案取决于所需的准确性。您提到您将函数作为单独的线程运行

1.  你的线程除了检查时间和通知其他子系统关于滴答声外什么都不做（这意味着没有睡眠）`while(1) if (elapsed_time >= target_time) flag=1`
2.  另一个功能（也许`main()`）必须检查标志并做出响应`while(1) if (thread.flag) {std::cout << "beat\n"; thread.flag=0;}`
3.  如果您的应用程序相当复杂，那么您应该实现信号/槽机制

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-17T10:33:26.533

我不确定您是否不知道如何在 C++ 中获得时间，或者您不知道步骤。

如果您在窗口中，要获得 MS 的时间。您可以使用 GetTickCount() 。资料如下。 [http://msdn.microsoft.com/en-us/library/ms724408%28v=vs.85%29.aspx](http://msdn.microsoft.com/en-us/library/ms724408%28v=vs.85%29.aspx)

.

.

如果您已经有时间但需要算法来完成它。对于如何以每秒 20 帧的速度执行的算法，我有一个准确但稍微难以理解的方法。

这是一个简短的伪代码。

`CurrentTickCount = GetTickCount();`

//CurrentTime 减去此循环结束时的上一个时间，得出到目前为止所用的时间

`timeTakenSoFar += CurrentTickCount - PreviousTickCount;`

//TickCount 是整数，毫秒值，因此这些毫秒中的 20 相当于 20/1000 秒，如果我记得或在这里做错了，这对你来说很容易解决:) `while(timeTakenSoFar < 20)`

`{`

`PreviousTickCount = CurrentTickCount;`

`CurrentTickCount = GetTickCount();`

`timeTakenSoFar += CurrentTickCount - PreviousTickCount;`

`}`

`timeTakenSoFar -= 20;`

// 基本上，PreviousTickCount 跟踪上次时间；

`PreviousTickCount = CurrentTickCount;`

//comment // 我没有将timeTakenSoFar 重置为0，因为肯定会有一点多余的时间，系统不能给你准确的20/1000，所以这会比等待解决方案更准确。在运行 10000000000 个周期后，这仍然会给你准确的时间，但不是等待方法。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-17T10:40:22.093

我这样做

```
float mAccumulatedTime;
int mLastTime;

void Init()
{
  mAccumulatedTime = 0.f;
  mLastTime=clock();
}

void Tick(float DeltaTime)
{
  mAccumulatedTime += DeltaTime;
  while (mAccumulatedTime > FixedTimeStep)
  {
    DoFixedTimeStepStuff();
    mAccumulatedTime -= FixedTimeStep;
  }
}

void Update()
{
  int CurrentTime=clock();
  float DeltaTime=(CurrentTime-mLastTime)/(float)CLOCKS_PER_SEC;
  Tick(DeltaTime);
  mLastTime=CurrentTime;
} 
```

您需要注意适当地处理 NaN 和“死亡螺旋”，但这足以让您开始。

# objective-c - 在多维 NSMutableArray 中添加对象

> ID：11520415
> 
> 赞同：2
> 
> 时间：2012-07-17T10:17:05.460
> 
> 标签：objective-c, xcode, nsmutablearray

我对如何在多维数组中添加对象感到很困惑。

初始化多维数组是否与仅一个简单数组相同？

这是我的初始化。

```
testList = [[NSMutableArray alloc] init]; 
```

我需要做类似的事情

```
testList[i][j] = item; 
```

我试过了

```
[[[testList objectAtIndex:i]objectAtIndex:j] addObject:item]; 
```

但它似乎不起作用:(

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-17T10:27:25.413

你要添加很多 C 来做到这一点。了解 NSMutableArray 的工作原理以及与 C/C++ 中已知的 2D 数组相比有何不同，这一点很重要。

在可变数组中，您可以存储另一个数组。例如：

```
NSMutableArray *first = [[NSMutableArray alloc] init];
NSMutableArray *second = [[NSMutableArray alloc] init];

[first addObject:second]; 
```

现在你在第一个数组的第一行有数组！这很像 C/C++ 2D 数组。

因此，如果您想向*“0,0”*添加一些对象，请执行以下操作：

```
NSString *mytest = [[NSString alloc] initWithString:@"test"];
[second addObject:mytest];
[first addObject:second]; 
```

所以现在你的*second*包含*NSStrings*并且*first*包含*second*。**现在你可以像你想要的那样循环它。**

***----编辑：****如果你想要 1,0，你只需要第二个*NSMutableArray 的另一个实例例如你有这个数组：

![arr](../Images/06a2213b3549963f08e44e0b9662ef8b.png)

所以在这里你将在*第二个*数组中有 3 个元素。

```
NSMutableArray *first = [[NSMutableArray alloc] init];
for(int i =0 ; i < your_size_condition ; i++) {//if you have size, if don't not a problem, you could use while!
   NSArray *second = [[NSArray alloc] initWithObjects:"@something",@"somethingelse",@"more",nil];
   [first addObject:second];
} 
```

您可能需要实现[NSCopying 协议](https://developer.apple.com/library/ios/#documentation/Cocoa/Reference/Foundation/Protocols/NSCopying_Protocol/Reference/Reference.html)来执行此操作。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-07-17T10:27:42.790

如果你需要一个固定大小的数组，那么使用普通的 C 数组。在使用动态 ObjC 数组之前，它需要创建它：

```
NSMutableArray* array = [NSMutableArray arrayWithCapacity:N];
for(int i=0; i<N; i++) {
    [array addObject:[NSMutableArray arrayWithCapacity:M]];
} 
```

UPD：以下方法可能有助于使用此类数组：

```
[[array objectAtIndex:i] addObject:obj];
[[array objectAtIndex:i] insertObject:obj atIndex:j];
[[array objectAtIndex:i] replaceObjectAtIndex:j withObject:obj]; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-17T15:36:13.050

要扩展@onegray 的答案，您可以设置一些类别方法以使软多维数组更易于处理。

MultiMutableArray.h

```
@interface NSMutableArray(MultiMutableArray)
  -(id)objectAtIndex:(int)i subIndex:(int)s;
  -(void)addObject:(id)o toIndex:(int)i;
@end

@implementation NSMutableArray(MultiMutableArray) 
```

MultiMutableArray.m

```
#import "MultiMutableArray.h"

-(id)objectAtIndex:(int)i subIndex:(int)s
{
    id subArray = [self objectAtIndex:i];
    return [subArray isKindOfClass:NSArray.class] ? [subArray objectAtIndex:s] : nil;
}

-(void)addObject:(id)o toIndex:(int)i
{
    while(self.count <= i)
        [self addObject:NSMutableArray.new];
    NSMutableArray* subArray = [self objectAtIndex:i];
    [subArray addObject: o];
}

@end 
```

例如，MultiArrayTests.m

```
#import <SenTestingKit/SenTestingKit.h>

#import "MultiMutableArray.h"

@interface MultiArrayTests : SenTestCase
@end

@implementation MultiArrayTests

-(void)testMultiArray
{
    NSMutableArray* a = NSMutableArray.new;
    [a addObject:@"0a" toIndex:0];
    [a addObject:@"0b" toIndex:0];
    [a addObject:@"0c" toIndex:0];
    [a addObject:@"1a" toIndex:1];
    [a addObject:@"1b" toIndex:1];
    [a addObject:@"2a" toIndex:2];
    STAssertEquals(a.count, 3U, nil);
    NSMutableArray* a1 = [a objectAtIndex:0];
    NSMutableArray* a2 = [a objectAtIndex:1];
    NSMutableArray* a3 = [a objectAtIndex:2];
    STAssertEquals(a1.count, 3U, nil);
    STAssertEquals(a2.count, 2U, nil);
    STAssertEquals(a3.count, 1U, nil);
}

@end 
```

我已经在[http://peterdeweese.tumblr.com/post/27411932460/soft-multi-dimensional-arrays-in-objective-c写了更多细节](http://peterdeweese.tumblr.com/post/27411932460/soft-multi-dimensional-arrays-in-objective-c)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-17T10:46:48.070

```
[[testList objectAtIndex:i] insertObject:item atIndex:j]; 
```

# c++ - BitBlt 在特定条件下仅复制部分数据

> ID：11520419
> 
> 赞同：0
> 
> 时间：2012-07-17T10:17:09.427
> 
> 标签：c++, winapi, gdi, bitblt

这是一个奇怪的问题，我已经阅读了 BitBlt 函数的文档，它在大多数情况下都可以正常工作，但是如果我尝试从偏移量很大的源矩形复制数据，它就会开始失败（只复制一部分甚至没有复制）比目的地大...奇怪？？以下是几个示例：

这是我使用的代码，结果取决于我传递的参数。位图的宽度`m_iTileAreaWidth + 2 * m_iTileAreaMargin`和高度分别为`m_iTileAreaHeight + 2 * m_iTileAreaMargin`

```
BOOL bBltOk = ::BitBlt(_hdcDest, 0, 0, m_iTileAreaWidth, m_iTileAreaHeight,
                       hdcSource, m_iTileAreaMargin, m_iTileAreaMargin, SRCCOPY); 
```

如果`m_iTileAreaMargin`是**600**并且都是**200**`m_iTileAreaWidth`则**复制 130px**的源区域`m_iTileAreaHeight`

 ****如果`m_iTileAreaMargin`是**500**并且都是**200**`m_iTileAreaWidth`则复制**完整**的源`m_iTileAreaHeight`

 ****如果`m_iTileAreaMargin`是**800**并且都是**200**则不**复制**`m_iTileAreaWidth`任何源区域`m_iTileAreaHeight`

 ****好吧，我确定整个区域都已生成 - 当我使用此代码时：

```
bBltOk = ::BitBlt(_hdcDest, 0, 0, rcScreen.Widht(), rcScreen.Height(),
                  _hdcSource, 0, 0,SRCCOPY); 
```

然后我看到整个区域生成

有谁知道为什么我对这么简单的功能有这样的问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-17T15:22:37.440

problem solved - yet some mistery remains. Problem was that source bitmap (or hdc, don't have access to some of internals) was not configured to hold all required data (size too small).

Mistery is that I was able to copy whole area and get valid data, but when tried to copy only some parts (even one that was already in whole area) I got empty data.************

# nhibernate - 在类级别上休眠懒惰

> ID：11520422
> 
> 赞同：0
> 
> 时间：2012-07-17T10:17:16.743
> 
> 标签：nhibernate, lazy-loading

只是为了咨询那里的 NHibernate 大师，我知道（并广泛使用）延迟加载的集合。

然而，迄今为止，我一直无法确定在类级别上设置惰性属性意味着什么。

在我们现有的 hbm 文件中，它们都具有将惰性设置为 false 的类节点。例如

```
<class name="Decision" lazy="false" ...> 
```

我已经通过删除此属性进行了实验（默认情况下为 true），结果是我得到了一个*InvalidProxyTypeException*。

我认为这是因为它将所有属性（即引用类型）和集合设置为lazy="true"，无论它们是否是数据对象。

所以我的问题是，这个假设是否正确？在 NHibernate 配置的类节点级别设置lazy="true" 是否默认将所有引用类型和集合类型设置为lazy="true"？lazy="true" 在课堂上还有什么其他作用吗？

如果我上面说的是真的，那么这也意味着不可能将普通属性与域对象中的数据属性混合在一起，除非您还将这些属性设置为虚拟，即使没有必要，例如

```
public virtual FirstName {get; set;}
public virtual LastName {get; set;}
public FullName {get{ return FirstName + " " + LastName;}} // InvalidProxyTypeException thrown! 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-17T10:17:16.743

在写下这个问题之后，看起来它已经被问到并得到了回答。

[NHibernate 中的延迟加载](https://stackoverflow.com/questions/652305/lazy-loading-in-nhibernate)

我想这证实了我的猜想是对的。

# video - wxmediactrl 产生较差的视频质量

> ID：11520431
> 
> 赞同：0
> 
> 时间：2012-07-17T10:17:51.947
> 
> 标签：video, windows-7, media-player, wxwidgets

我有一些 mpg 视频需要分析并在 gui 中显示。我遇到的问题是 wxwidgets 在播放这些视频时会产生故障。

wxwidgets 默认使用我系统的 WMP，当我使用 WMP 本身加载相同的文件时，我不会遇到这些故障。当文件在 OpenCV 中加载时，我也没有这些故障，只有在 wxwidgets 中。使用我生成的代码和 wxwidgets 库提供的示例媒体播放器代码，结果是相同的。

此外，我尝试打开 mp4 格式的文件，并且不再出现故障。

mpg 文件具有：数据速率 - 1150kbps，总比特率 - 1406kbps 和帧速率 25 帧/秒

任何有关为什么会发生这种情况的见解将不胜感激。

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-25T13:34:04.297

好吧，我没有得到答案，但是设法解决了。在这种情况下，您所要做的就是使用简单的渲染而不是使用预构建的媒体播放器来构建自己的媒体播放器，然后在继续下一个之前给 gui 足够的时间来绘制帧，就不会再出现故障了。

谢谢。

# c++ - 为什么这个“if”语句不起作用？

> ID：11520432
> 
> 赞同：1
> 
> 时间：2012-07-17T10:17:51.933
> 
> 标签：c++, pointers, if-statement

```
bool foo( int* p )
{
  return false;
}

int* bar (  )
{
  int* p;
  return p;
}

int main() {

  if ( int* p = bar() && foo( p ) )
  //if ( ((int* p = bar()) != NULL ) && (foo( p )) ) // another variant
  {

  }

  return 0;
} 
```

我`error: cannot convert ‘bool’ to ‘int*’ in initialization`使用 GCC 4.3.4 和 VS 2008。如果只有`if ( int* p = bar())`一切正常。

我知道我可以在 -statement`p`之前初始化`if`，但我对我展示的变体感兴趣。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-17T10:20:37.787

```
int* p = bar() && foo( p ) 
```

首先计算逻辑表达式，然后赋值

与写作相同：

```
int *p = ( bar() && foo(p) ); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-17T10:20:44.893

赋值运算符`=`的优先级低于布尔值，`&&`因此您拥有的是：

```
int* p = ( bar () && foo(p) ) 
```

这是尝试将 a 分配`bool`给`int*`变量。

**编辑**：虽然在循环块中声明和初始化变量通常是一种公认​​的做法（如`for(int i = 0; i < n; ++i)`），但我强烈建议不要为条件语句使用这种结构，`if()`因为它可能会导致一些非常迷人的副作用，而你真的不会想要处理以及降低代码的可读性。

您的其他变体应该可以工作（除非我不确定您是否要将声明的结果与`int*...`NULL 进行比较 - 语言可能不喜欢这），但请参阅我上面关于**代码清晰度的评论**

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-17T10:24:07.070

```
#include <iostream>
bool foo( int* p )
{
  return false;
}

int* bar (  )
{
  int* p;
  return p;
}

int main() {
  int* p;
  if ( (p = bar()) && foo( p ) )
  //if ( ((int* p = bar()) != NULL ) && (foo( p )) ) // another variant
  {

  }

  return 0;
} 
```

或者

```
int main() {

  if ( int* p = bar()){
      if ( foo( p ) ){ /*do something*/ }
  }
  return 0;
} 
```

它运行

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-07-17T10:44:21.287

语句的条件`if`可以是*声明*或*表达式*。声明不是表达式，因此您不能将它与另一个表达式结合起来，就像您尝试做的那样。换句话说，当你希望

```
(int* p = bar()) && foo(p) 
```

这是无效的，因为`int* p = bar()`它不是表达式。相反，它被解读为声明

```
int* p = (bar() && foo(p)) 
```

这是无效的，因为初始化程序的类型错误。

在这种情况下，您将不得不在语句之前声明指针`if`；几个选项是：

```
int* p = bar(); // pollutes surrounding scope; maybe wrap in another block
if (p && foo(p)) {}

if (int* p = bar()) {
    if (foo(p)) {  // extra nesting
    }
} 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-07-17T10:46:22.267

an 的语法`if`需要括号中的*条件*。条件可以是表达式，也可以是声明（隐式转换为 的类型`bool`）；它不能是这些的组合。如果是

```
if ( int* p = bar() && foo( p ) ) 
```

，*条件*是“ ”，这是一个用;初始化`int* p = bar() && foo( p )`的类型的简单声明。由于is not的类型，并且不能隐式转换为 an ，因此您有一个错误。`int*``bar() && foo( p )``bar() && foo( p )``int*``int*`

如果你写：

```
if ( (int* p = bar()) != NULL ) 
```

，左括号意味着这不能是一个声明（简单或否），`int* p = bar()`也不是一个合法的（子）表达式。

要记住的关键点是你可以有一个声明，*或者* 你可以有一个表达式，但你不能将它们组合起来，C++ 不允许声明作为表达式的一部分。（另外：声明必须具有复制初始化：

```
if ( int* p = bar() ) 
```

，不允许直接初始化。）

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-07-17T10:21:22.187

我相信这是运算符优先级。您实际上执行：

```
if ( int* p = (bar() && foo( p )) ) 
```

但我相信你的意思是：

```
if ( (int* p = bar()) && foo( p ) ) 
```

这不完全相同。

* * *

## 回答 #7

> 赞同：-1
> 
> 时间：2012-07-17T10:19:55.527

事实是，您正在进行赋值，`int* p = bar()`并且该语句试图比较两种类型：`int`and `bool`，这是不可能的。

您应该在 IF 语句之前分配它。

希望这可以帮助

# java - ZK - 数据更改后树不刷新

> ID：11520433
> 
> 赞同：2
> 
> 时间：2012-07-17T10:17:53.733
> 
> 标签：java, zk

我在使用 ZK6 的新树绑定机制进行模型绑定时遇到问题。首先，这是我的代码：

祖尔：

```
<div id="win" apply="org.zkoss.bind.BindComposer"
viewModel="@id('vm') @init('mira.web.composer.PermissionDesignerModel')"
style="width:98%; text-align:center;" vflex="1">

<tree id="permissionTree" width="100%" model="@bind(vm.treeModel)"
    style="text-align:left;" vflex="2">
    <treecols>
        <treecol label="Item" width="400px" />
        <treecol label="Typ" />
        <treecol label="Ausgabe" />
        <treecol label="Einfügen" width="100px" />
    </treecols>
    <template name="model" var="node">
        <treeitem open="@bind(node.open)">
            <treerow>
                <treecell>
                    <textbox value="@bind(node.data.name)" />
                </treecell>
                <treecell>
                    <combobox mold="rounded" readonly="true"
                        model="@load(vm.allAttributeTypes)"
                        selectedIndex="@bind(node.data.attType)">
                        <template name="model">
                            <comboitem label="@load(each.name)"
                                value="@load(each.id)" />
                        </template>
                    </combobox>
                </treecell>
                <treecell>
                    <checkbox label="Ausgabe"
                        checked="@bind(node.data.isOutput)" />
                </treecell>
                <treecell>
                    <button label="Einfügen"
                        onClick="@command('insertNode', node=node)" />
                </treecell>
            </treerow>
        </treeitem>
    </template>
</tree> 
```

该模型：

```
public class PermissionDesignerModel {

ClassPathResource res = new ClassPathResource("/beans.xml");
BeanFactory beanFactory = new XmlBeanFactory(res);
private PermissionTreeModel treeModel;

@Command
public void insertNode(@BindingParam("node") PermissionTreeNode node) {
    node.setOpen(false);
}

public PermissionTreeModel getTreeModel() throws ParseException {
    if (treeModel == null) {
        PermissiontreeBuilder builder = new PermissiontreeBuilder(Container
                .getCurrentProduct().getProductId());
        PermissionTreeNode root = builder.getRoot();
        setTreeModel(new PermissionTreeModel(root));
    }
    return treeModel;
}

public void setTreeModel(PermissionTreeModel treeModel) {
    this.treeModel = treeModel;
} 
```

}

正确调用了 insertNode() 方法，并且我得到了包含内容的适当节点，但是当我更改节点的数据（或打开属性）时，UI 中没有任何反应。我是否必须调用一些特殊的 bind() 方法或其他东西才能使模型更改在树中生效？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-17T19:58:27.840

好吧，我找到了答案：您必须手动通知 UI 进行更改（对于每个变量）。

```
@NotifyChange({ "treeModel" })
@Command
public void insertNode(@BindingParam("node") PermissionTreeNode node) {
    PermissionTreeNode addNode = node;
    if(node.getChildren() == null) {
        PermissionItem item = node.getData();
        PermissionTreeNode parent = (PermissionTreeNode) node.getParent();
        int index = parent.getIndex(node);
        parent.remove(node);
        addNode = new PermissionTreeNode(item, new ArrayList<PermissionTreeNode>());
        parent.insert(addNode, index);
    }
    addNode.add(new PermissionTreeNode(new PermissionItem()));
} 
```

在 NotifyChange 中，您可以在方法中添加正在更改的变量。

# android - 无法使用 ActionBarSherlock 更改选项卡的背景

> ID：11520436
> 
> 赞同：2
> 
> 时间：2012-07-17T10:18:08.737
> 
> 标签：android, tabs, android-fragments, android-actionbar, actionbarsherlock

我想更改标签的背景。在过去的两天里，我尝试了一切，所以我决定在这里发布我的代码。ActionBar 的背景设置正确，但 TABS 保持黑色。

```
 <style name="CustomActivityTheme" parent="Theme.Sherlock">
    <item name="android:actionBarStyle">@style/MyActionBar</item>
    <item name="android:actionBarTabStyle">@style/MyActionBarTabStyle</item>
    <!-- other activity and action bar styles here -->
</style>

<!-- style for the action bar backgrounds -->
<style name="MyActionBar" parent="Widget.Sherlock.ActionBar">
    <item name="android:background">@drawable/backgroundactionbar</item>
</style>

<style name="MyActionBarTabStyle" parent="Widget.Sherlock.ActionBar.TabView">
<item name="android:background">@drawable/backgroundactionbar</item>
</style> 
```

在清单上：

```
 <activity android:name=".FragmentActivityDashboard"
              android:label="@string/app_name"
              android:configChanges="keyboardHidden|orientation|screenLayout"
              android:theme="@style/CustomActivityTheme"
              > 
    </activity> 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-10T07:20:28.073

您需要声明要更改的两件事。android:actionBarStyle 和 actionBarStyle

```
<!-- Theme For Tabs and ActionBar Background -->
<style name="Theme.Tabs" parent="Theme.Sherlock">
    <item name="android:actionBarTabStyle">@style/ActionBarTab</item>
    <item name="actionBarTabStyle">@style/ActionBarTab</item>

    <item name="android:actionBarStyle">@style/ActionBarBlank</item>
    <item name="actionBarStyle">@style/ActionBarBlank</item>
</style>

<!-- Styles for the above theme -->
<style name="ActionBarBlank" parent="Widget.Sherlock.ActionBar">
    <item name="android:background">@drawable/tab_bg</item>
    <item name="background">@drawable/tab_bg</item>
</style>

<style name="ActionBarTab" parent="Widget.Sherlock.ActionBar.TabView">
    <item name="android:background">@drawable/bg_tab</item>
    <item name="background">@drawable/bg_tab</item>
</style> 
```

请注意，选项卡的可绘制对象在 xml 文件中声明，以指示选定选项卡的单独可绘制对象。

这是 bg_tab：

```
<selector xmlns:android="http://schemas.android.com/apk/res/android">

<!-- Selected -->
<item android:state_selected="true" android:drawable="@drawable/tab_bg" />

<!-- Normal -->
<item android:drawable="@drawable/transparent" />

</selector> 
```

# mysql - 忘记添加主键

> ID：11520440
> 
> 赞同：1
> 
> 时间：2012-07-17T10:18:36.493
> 
> 标签：mysql, database, primary-key

我已经复制（复制）了一个表，并且由于某种原因没有添加主键。现在我最近添加了很多新记录，`id`字段中的值为 0。之前的所有记录都有唯一的 ID（从 1 到 302979）。

如何解决这个问题？

```
#1062 - Duplicate entry '0' for key 'PRIMARY' 
```

`AUTO_INCREMENT`也没有添加。

```
CREATE TABLE `result` (
  `id` int(11) NOT NULL DEFAULT '0',
  `status` varchar(50) NOT NULL,
  `status_date` datetime NOT NULL,
  `member_id` int(11) NOT NULL
) ENGINE=MyISAM DEFAULT CHARSET=latin1 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-17T10:23:23.060

尝试

```
update result
inner join (select @row := (select max(id) from result)) r
set id = (@row := @row + 1)
where id = 0 
```

纠正错误`id`s.

然后添加`auto_increment`到您的表中

```
ALTER TABLE `result` CHANGE COLUMN `id` `id` INT(11) NOT NULL AUTO_INCREMENT,
ADD PRIMARY KEY (`id`) ; 
```

然后使用

```
ALTER TABLE result AUTO_INCREMENT = 1234; 
```

在其中替换`1234`为要开始增量值的数字。例如，它可以是最高的 id + 1。你可以得到那个号码

```
select max(id)+1 from result; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-17T10:43:33.057

创建表的空副本：

```
CREATE TABLE `result_copy` (
  `id` int(11) NOT NULL DEFAULT '0',
  `status` varchar(50) NOT NULL,
  `status_date` datetime NOT NULL,
  `member_id` int(11) NOT NULL
) ENGINE=MyISAM DEFAULT CHARSET=latin1; 
```

向这个新表添加索引和自动增量： ALTER TABLE `result_copy`CHANGE COLUMN `id` `id`INT(11) NOT NULL AUTO_INCREMENT, ADD PRIMARY KEY ( `id`) ;

插入数据：（必要时更改顺序）

```
INSERT INTO `result_copy`(status, status_date, member_id)
SELECT status, status_date, member_id FROM `result`
ORDER BY `id` ASC, `status_date` ASC 
```

检查中的数据`result_copy`。如果一切正常，删除原始表并重命名新表：

```
DROP TABLE `result`;
RENAME TABLE `result_copy` TO `result`; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-17T10:26:45.850

您可以将表导出到 SQL 脚本文件。比你必须用键创建表。然后再次运行 import。您应该将自动增量属性设置为 true。不确定这是否是最简单的方法，但做到这一点并不难。

# hibernate - sqlserver 上的“org.hibernate.exception.SQLGrammarException：无法执行查询”但在 Oracle 上可以吗？

> ID：11520445
> 
> 赞同：0
> 
> 时间：2012-07-17T10:19:01.687
> 
> 标签：hibernate

将应用程序从 Oracle 导入 SQLServer。首次尝试访问数据库时会发生此错误（org.hibernate.exception.SQLGrammarException：无法执行查询）。

这是（省略的）访问代码：-

```
Session session = serviceLocator.getSessionFactory().openSession();

List<BaseTemplate> baseTemplateList = null;
Query query = null;
try
{       
   query = session.createQuery("from BaseTemplate");
   baseTemplateList = query.list();                   <<<<< Exception thrown here
}
etc 
```

豆代码： -

```
import javax.persistence.Column;
import javax.persistence.Entity;
import javax.persistence.GeneratedValue;
import javax.persistence.Id;
import javax.persistence.Table;

import com.iontrading.reportserver.database.model.IBaseTemplate;

@Entity
@Table(name = "BASETEMPLATE")
public class BaseTemplate implements IBaseTemplate{

    private Integer id;

    @Column(name="TEMPLATENAME")    
    private String templateName;

@Id 
@GeneratedValue 
@Column(name = "TEMPLATEID")
@Override
/** {@inheritDoc} */
public Integer getId() { return id; }

@Override
/** {@inheritDoc} */
public void setId(Integer id) { this.id = id; } 
```

...snip<> } 表创建 DDL CREATE TABLE "dbo"."BASETEMPLATE" ( TEMPLATEID INT PRIMARY KEY NOT NULL, ... TEMPLATENAME VARCHAR(255) )

可能相关或不相关的要点：-

1.  如果数据库是 Oracle，这可以正常工作。
2.  表名和bean类名不匹配但使用@Table
3.  列名与 bean 字段名不匹配，但使用 @Column
4.  主键是生成的值。
5.  bean 导入是 JPA 不是休眠的。

? 为什么我得到这个异常或者我如何从休眠中获取更多信息的任何想法都会非常有用。谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-17T13:52:10.273

当您使用 JPA 时，查询样式会发生一些变化，例如

```
query = session.createQuery("select b from BaseTemplate"); 
```

您使用的数据库架构是什么？ `dbo`是 sql server 的默认架构。因此，最好自己定义一个模式并将其用于 oracle 和 sql server。

# php - 了解用户权限以及如何应用它

> ID：11520448
> 
> 赞同：5
> 
> 时间：2012-07-17T10:19:09.880
> 
> 标签：php, zend-framework, permissions, user-permissions, socialengine

我正在使用使用 Zend 框架的[Social Engine为网站开发一个模块。](http://www.socialengine.com/)我是 Zend Framework 和 Social Engine 的新手，但在 OOP 和 MVC 架构方面有经验，因此可以相对较快地掌握基础知识。

它是我正在开发的一个测试模块，所以刚刚构建了一个简单的模块，用户可以在其中创建、编辑或删除 CD 信息。然后有一个小部件可以显示在他们喜欢的地方，其中显示了 CD 信息。

我现在需要设置人们可以看到的 CD 的权限等。所以我研究了其他模块，发现 Poll 模块就是一个具体的例子。

查看其他模块，我意识到当您创建某些内容时，它们会让用户手动设置权限。

所以将此代码添加到我的表单中以创建具有相关权限的选择框：

```
$auth = Engine_Api::_()->authorization()->context;
$user = Engine_Api::_()->user()->getViewer();
$viewOptions = (array) Engine_Api::_()->authorization()->getAdapter('levels')->getAllowed('ryan', $user, 'auth_view');
$viewOptions = array_intersect_key($availableLabels, array_flip($viewOptions));

$privacy = null;

if( !empty($viewOptions) && count($viewOptions) >= 1 ) {
    // Make a hidden field
    if(count($viewOptions) == 1) {
        //$this->addElement('hidden', 'auth_view', array('value' => key($viewOptions)));
        $privacy  = new Zend_Form_Element_Hidden('auth_view');
        $privacy->setValue(key($viewOptions));
        // Make select box
    } else {
        $privacy = new Zend_Form_Element_Select('auth_view');
        $privacy->setLabel('Privacy')
                ->setDescription('Who may see this CD?')
                ->setMultiOptions($viewOptions)
                ->setValue(key($viewOptions));
        /*$this->addElement('Select', 'auth_view', array(
            'label' => 'Privacy',
            'description' => 'Who may see this CD?',
            'multiOptions' => $viewOptions,
            'value' => key($viewOptions),
        ));*/
    }
}

$this->addElements(array($artist, $title, $privacy, $submit)); 
```

老实说，除了明显地创建一个选择框并用指定的值填充它之外，我并不完全确定这段代码的作用。

因此，如果用户选择“所有人”，每个人都应该能够删除和编辑该 cd，依此类推。

显然，我认为控制器必须有一些代码可以处理确定用户是否有权查看每个 cd 等。

所以扫描 Poll 控制器我发现这是在控制器的 init 函数中：

```
public function init() {
    // Get subject
    $poll = null;
    if( null !== ($pollIdentity = $this->_getParam('poll_id')) ) {
        $poll = Engine_Api::_()->getItem('poll', $pollIdentity);
        if( null !== $poll ) {
            Engine_Api::_()->core()->setSubject($poll);
        }
    }

    // Get viewer
    $this->view->viewer = $viewer = Engine_Api::_()->user()->getViewer();
    $this->view->viewer_id = Engine_Api::_()->user()->getViewer()->getIdentity();

    // only show polls if authorized
    $resource = ( $poll ? $poll : 'poll' );
    $viewer = ( $viewer && $viewer->getIdentity() ? $viewer : null );
    if( !$this->_helper->requireAuth()->setAuthParams($resource, $viewer, 'view')->isValid() ) {
        return;
    }
} 
```

在顶部的每个操作中，它们都有一些不同的授权代码，一个这样的例子就是`editAction`顶部有这个代码：

```
// Check auth
if( !$this->_helper->requireUser()->isValid() ) {
    return;
}
if( !$this->_helper->requireSubject()->isValid() ) {
    return;
}
if( !$this->_helper->requireAuth()->setAuthParams(null, null, 'edit')->isValid() ) {
    return;
} 
```

同样在同一个动作中还有其他几个我不明白他们在做什么的位，下面是`editAction`Poll 控制器中的随机片段：

```
$auth = Engine_Api::_()->authorization()->context;
$roles = array('owner', 'owner_member', 'owner_member_member', 'owner_network', 'registered', 'everyone');

// Populate form with current settings
$form->search->setValue($poll->search);
foreach( $roles as $role ) {
    if( 1 === $auth->isAllowed($poll, $role, 'view') ) {
        $form->auth_view->setValue($role);
    }
    if( 1 === $auth->isAllowed($poll, $role, 'comment') ) {
        $form->auth_comment->setValue($role);
    }
}

// CREATE AUTH STUFF HERE
if( empty($values['auth_view']) ) {
    $values['auth_view'] = array('everyone');
}
if( empty($values['auth_comment']) ) {
    $values['auth_comment'] = array('everyone');
}

$viewMax = array_search($values['auth_view'], $roles);
$commentMax = array_search($values['auth_comment'], $roles); 
```

我的问题是我真的不太了解上述任何一个，并且在坐了几天并且用谷歌搜索我的手指受伤之后，我仍然不知道我是否 100% 诚实。可以为我清除以上任何内容，帮助向我解释事情，如果可能的话，我如何将我想要的权限应用于我的模块。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-31T18:29:30.983

我将简要介绍如何使用授权，但是需要通过查看 SocialEngine 的代码来推断出更详细的信息。请注意，虽然我们不为 SocialEngine 编译文档，但我们的开发人员在我们的代码中使用了 PHPDocumentor 样式语法，您可以使用像 Neatbeans (http://netbeans.org/) 这样的 IDE 来快速访问该信息。

SocialEngine 有一些控制器动作助手类，用于在动作控制器中进行查询授权：

*   application/modules/Authorization/Controller/Action/Helper/RequireAuth.php
*   应用程序/模块/Core/Controller/Action/Helper/RequireAbstract.php
*   应用程序/模块/Core/Controller/Action/Helper/RequireAdmin.php
*   应用程序/模块/Core/Controller/Action/Helper/RequireSubject.php
*   应用程序/模块/Core/Controller/Action/Helper/RequireUser.php

在大多数情况下，您唯一关心的是这些：

*   application/modules/Authorization/Controller/Action/Helper/RequireAuth.php
*   应用程序/模块/Core/Controller/Action/Helper/RequireSubject.php
*   应用程序/模块/Core/Controller/Action/Helper/RequireUser.php

可以在 Album_AlbumController 类中找到如何使用这些帮助程序的一个很好的示例：application/modules/Album/controllers/AlbumController.php

```
public function init()
{
if( !$this->_helper->requireAuth()->setAuthParams('album', null, 'view')->isValid() ) return;

if( 0 !== ($photo_id = (int) $this->_getParam('photo_id')) &&
null !== ($photo = Engine_Api::_()->getItem('album_photo', $photo_id)) )
{
Engine_Api::_()->core()->setSubject($photo);
}

else if( 0 !== ($album_id = (int) $this->_getParam('album_id')) &&
null !== ($album = Engine_Api::_()->getItem('album', $album_id)) )
{
Engine_Api::_()->core()->setSubject($album);
}
}

public function editAction()
{
if( !$this->_helper->requireUser()->isValid() ) return;
if( !$this->_helper->requireSubject('album')->isValid() ) return;
if( !$this->_helper->requireAuth()->setAuthParams(null, null, 'edit')->isValid() ) return; 
```

init 函数中的代码简单地设置访问页面的要求，然后在 editAction 函数中对授权数据进行检查。requireSubject 和 requireUser 助手非常简单：

1.  requireSubject 期望页面的主题被设置，在上面的例子中是在 init 函数中完成的
2.  requireUser 检查查看者是否是登录用户

requireAuth 帮助器不太直接。为简洁起见，我将省略大部分抽象的内部工作。最后，helper 指向 Authorization_Api_Core::isAllowed 函数：application/modules/Authorization/Core/Api.php

```
/**
* Gets the specified permission for the context
*
* @param Core_Model_Item_Abstract|string $resource The resource type or object that is being accessed
* @param Core_Model_Item_Abstract $role The item (user) performing the action
* @param string $action The name of the action being performed
* @return mixed 0/1 for allowed, or data for settings
*/
public function isAllowed($resource, $role, $action = 'view') 
```

函数期望的 $resource 和 $role 对象是 Zend_Db_Table_Row 的实例，在 SocialEngine 中被称为模型，并且期望位于模块的模型目录中。当 isAllowed 函数被调用时，授权 api 将针对 engine4_authorization_allow、engine4_authorization_levels 和 engine4_authorization_permissions 表查询数据库。

1.  engine4_authorization_levels 表包含由 SocialEngine 开箱即用创建的成员级别，以及从管理面板中的“管理”>“成员级别”部分创建的自定义成员级别。
2.  engine4_authorization_permissions 表包含所有默认和管理员指定的权限处理，例如成员级别设置。
3.  engine4_authorization_allow 包含单个对象的权限数据。例如，关于谁能够查看相册的信息将被放置在那里。是否允许 engine4_authorization_allow.role_id（映射到模型的项目 ID）访问 engine4_authorization_allow.resource_id（映射到模型的项目 ID）由 engine4_authorization_allow.value 列确定，该列应包含数字 0-5。

应用程序/模块/授权/Api/Core.php

```
class Authorization_Api_Core extends Core_Api_Abstract
{
/**
* Constants
*/
const LEVEL_DISALLOW = 0;
const LEVEL_ALLOW = 1;
const LEVEL_MODERATE = 2;
const LEVEL_NONBOOLEAN = 3;
const LEVEL_IGNORE = 4;
const LEVEL_SERIALIZED = 5; 
```

0) 不允许访问链接的资源。这与允许表中不存在的行相同

1) 也允许访问链接的资源

2) 允许访问和管理资源（即超级管理员、管理员和版主成员级别）

3-5) 被忽略为不允许。这些期望一些自定义逻辑以便适当地处理授权。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-17T21:14:00.557

我也不熟悉 SocialEngine，但经常使用 Zend Framework。我会尽量给你一些提示，如果需要的话，希望其他人可以为你补充更多。

看起来 SE在您刚刚展示的大部分代码中都使用了[Zend_Auth](http://framework.zend.com/manual/en/zend.auth.introduction.html)和[Zend_Acl 。](http://framework.zend.com/manual/en/zend.acl.html)

理解`Zend_Auth`是有帮助的，但所有这部分都已经完成，超出了你想要做的大部分事情。 `Zend_Acl`是您可能会花费大量时间阅读的内容。

`Zend_Auth`理解和之间区别的关键概念`Zend_Acl`是对`Zend_Auth`用户进行身份验证。也就是说，它根据某处的数据库检查提供的凭据，并说这个人就是他们所说的人，因为他们提供了正确的身份（例如，用户名和密码匹配）。 `Zend_Acl`另一方面，用于根据角色允许或拒绝对给定资源的访问。

简而言之，与允许用户`Zend_Auth`做*什么*无关，只是他们是他们所说的那个人。 `Zend_Acl`表示用户有权或无权访问特定特性或功能（资源）。

我没有查看他们的代码来确认这一点，但`Engine_Api::_()->user()->getViewer()->getIdentity();`似乎正在提取用户的身份，乍一看似乎是数据库`null`中的用户或用户的身份`id`。他们可以使用它来判断一个人是否登录。

接下来，他们似乎正在调用一个名为的[操作助手](http://framework.zend.com/manual/en/zend.controller.actionhelpers.html)`requireAuth`，它可以设置身份验证参数或检查用户是否具有访问权限。这是基于 ZF 构建的 Social Engine 的一部分，不是 ZF 特定的，因此您可能需要阅读更多关于该助手如何工作的文档。

我认为这个助手只是一种间接的调用方式`Zend_Acl::isValid()`来确定用户的角色是否可以访问特定的资源。 `Zend_Acl`工作很简单。`resources`您可以根据`role`尝试访问它们来授予或拒绝对某些的访问。默认情况下，除非特别允许，否则拒绝访问所有资源。

这个插件可能做的是创建一些新资源，`poll`然后控制用户可以做什么`view`，或者`edit`一个特定的投票。

如果您继续阅读`Zend_Acl`，应该会清楚地了解更多代码。然后你所要做的就是弄清楚插件是如何存储角色和资源的。我猜有一种标准方法可以将其存储在社交引擎中，并且 ACL 规则会在给定用户的每个请求上自动设置。

希望对一些人有所帮助。

# mysql - 在 MySQL 中自动增长 ENUM

> ID：11520449
> 
> 赞同：5
> 
> 时间：2012-07-17T10:19:11.453
> 
> 标签：mysql, sql, dynamic, enums

我想优化具有`VARCHAR`仅计数的列的表 - 大多数时间少于十个，有时是数百个 - 不同的值。所以我希望将列转换为`ENUM`s，关键是我无法预测值本身，所以我希望在必要时即时构建它们。

不幸的是，似乎 MySQL 在插入不存在的值时不会抛出错误，而是会存储`NULL`.

例如：

```
CREATE TABLE `enumed` (
  `col` ENUM( 'a', 'b' )
);

INSERT INTO `enumed` ( `col`) VALUES ('b');
INSERT INTO `enumed` ( `col`) VALUES ('z'); 
```

将存储一行`'b'`和一行`NULL`没有错误。很明显，我负担不起另一个查询来获取值的无效性，但更愿意出现错误，在这种情况下，我会`ENUM`像下面这样扩展定义并重复查询。

```
ALTER TABLE `enumed` CHANGE `col` `col` ENUM( 'a', 'b', 'z' );
INSERT INTO `enumed` ( `col`) VALUES ('b'); 
```

有什么方法可以实现这一点，还是只是一种痛苦的方式来处理需要一张桌子的外国收藏？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-18T02:35:40.730

如果启用严格的 SQL 模式，尝试存储无效的 ENUM 值会报错。您可以检查此错误，扩展 ENUM，然后重试 INSERT。

# android - 当我单击注销按钮时如何从 Facebook 注销

> ID：11520450
> 
> 赞同：-1
> 
> 时间：2012-07-17T10:19:11.077
> 
> 标签：android, facebook, logout

我的应用程序中有 android 应用程序正在使用 facebook 登录，并且也在我的墙上共享消息，但我的问题是当我单击注销按钮时，我必须删除 facebook 的所有详细信息，因为当我单击登录按钮时，它必须询问用户名和密码。我该怎么做请提供任何代码。提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-17T10:29:22.627

使用此代码：

```
fb_logout.setOnClickListener(new OnClickListener() {

            public void onClick(View v) {
                // TODO Auto-generated method stub

                    fb_Logout();

            }
        });
        public boolean fb_Logout() {
        Toast.makeText(getApplicationContext(),
                "You are logged out from Facebook.", Toast.LENGTH_LONG).show();

        try {
            Log.d("Tests", "Testing logout");
            String response = authenticatedFacebook.logout(this);
            if (!response.equals("true")) {
                return false;
            }
            Log.d("Tests", "Testing logout on logged out facebook session");
            try {
                Util.parseJson(authenticatedFacebook.logout(this));
                return false;
            } catch (FacebookError e) {
                if (e.getErrorCode() != 101
                        || !e.getMessage().equals("Invalid API key")) {
                    return false;
                }
            }
            try {
                Util.parseJson(new Facebook(APP_ID).logout(this));
                return false;
            } catch (FacebookError e) {
                if (e.getErrorCode() != 101
                        || !e.getMessage().equals("Invalid API key")) {
                    return false;
                }
            }
            return true;
        } catch (Throwable e) {
            e.printStackTrace();
            return false;
        }

    } 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-07-17T10:23:15.803

所以你必须清除 cookie 和 sharedPrefrence 值。所以你可以通过以下方式做到这一点

```
Util.clearCookies(youractivity.this);
SessionStore.clear(youractivity.this); 
```

# jquery - 使用 knockoutjs 在视图中显示对象

> ID：11520457
> 
> 赞同：0
> 
> 时间：2012-07-17T10:19:35.457
> 
> 标签：jquery, json, asp.net-mvc-3, knockout.js

我需要帮助，我有返回对象的操作（JSON 格式，我使用这个方法：“http://code.msdn.microsoft.com/Build-truly-RESTful-API-194a6253”），这是我的对象从操作返回（DashboardController 的索引）：

```
 var model = new DashboardHomeModel()
        {                
            CurrentCompaigns = .....................,
            BuzzLeaderCompaigns = ..................,            
            BuzzCompaignByInterest =  ..................
        };
    return View(model); 
```

首先我想显示我的模型的 BuzzLeaderCompaigns（它是 Compaign 的 ICollection），这是我的观点：

```
 <h3>My Compaign</h3>
       <table>
            <thead>
                  <tr>
                   <th>Compaign Name</th><th>Compaign Description</th><th>End Date</th>
                 </tr>
            </thead>
           <tbody data-bind="foreach: BuzzLeaderCompaigns">
             <tr>
               <td data-bind="text: Name" ></td>            
                <td data-bind="text: Description"></td>
                <td data-bind="text: EndDate"></td>
              </tr>       
          </tbody>
       </table>

 <script type="text/javascript">
      function Compaign(data) {
           this.BuzzCompaignId = ko.observable(data.BuzzCompaignId);
           this.Name = ko.observable(data.Name);
           this.Description = ko.observable(data.Description);
           this.EndDate = ko.observable(data.EndDate);
      }

      function DashboardViewModel() {
           var self = this;
           self.BuzzLeaderCompaigns = ko.observableArray([]);      
           self.CurrentCompaigns = ko.observableArray([]);
           self.BuzzCompaignByInterest = ko.observableArray([]);
        // Load initial state from server, convert it to Task instances, then populate self.tasks
        $.getJSON("/Dashboard/Index", function (Data) {
              var mappedData = $.map(Data, function() { return   } ) ;
      });

      } 
     ko.applyBindings(new DashboardViewModel());

    </script> 
```

如何将我的数据绑定到我的视图模型（当我使用 $.getJSON 获取数据时）然后我的视图

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-27T17:01:48.280

假设 /Dashboard/Index 返回 CurrentCompaigns，请更改：

```
$.getJSON("/Dashboard/Index", function (Data) {
    var mappedData = $.map(Data, function() { return   } ) ;
}); 
```

对此：

```
$.getJSON("/Dashboard/Index", function (Data) {
    var mappedData = $.map(Data, function(item) { return new Compaign(item) });
    self.CurrentCompaigns(mappedData);
}); 
```

但是，您应该考虑 Arbiter 的建议；/Dashboard/Index 听起来像是应该返回视图的操作方法，而不是 JSON 操作方法。您可以为您的三个 observableArrays 使用三个单独的 JSON 方法，或者您可以使用一个方法返回所有“Compaigns”，然后使用 ko.utils.arrayFilter 过滤并为您的三个数组分配值。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-17T12:57:39.460

A couple of things that will put you on the right track:

*   If your view (cshtml) is called "Index" then you should create a different action on your controller to return your json.
*   Instead of returning `View(model);` you should have your new action return `Json(model, JsonRequestBehavior.AllowGet);` to have the action return JSON (instead of HTML). Your existing action (Index) should return a model-less view, i.e. `return View();`
*   Change the path of your `getJSON` to use the new path, i.e.:

    $.getJSON("/Dashboard/GetCampaign", function (Data) { *Code which populates your viewmodel* );

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-17T13:18:27.137

您也可以使用一些服务器端代码将您的视图模型直接转换为 Json 字符串：

```
 <script type="text/javascript">    
        // this example is using Json.Net  
        var model = @Html.Raw(Newtonsoft.Json.JsonConvert.SerializeObject(Model, new Newtonsoft.Json.Converters.IsoDateTimeConverter()));
        // wrapper contains additional methods and logic 
        // knockout mapping plugin is used to convert json objects to observable objects
        var wrapper = new ViewModelWrapper(ko.mapping.fromJS(model));           
        ko.applyBindings(wrapper);
  </script> 
```

# android - Android：状态栏通知上的监听器

> ID：11520465
> 
> 赞同：3
> 
> 时间：2012-07-17T10:20:17.080
> 
> 标签：android, listener, statusbar

有没有办法在下拉状态栏通知时收听它？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2018-06-02T23:25:52.180

**1.检测状态栏变化：可以注册一个监听器来获取系统UI可见性变化的通知**

因此，要在您的活动中注册监听器：

```
// Detecting if the user swipe from the top down to the phone 
// screen to show up the status bar (without showing the notification area)

View decorView = getWindow().getDecorView();
decorView.setOnSystemUiVisibilityChangeListener
        (new View.OnSystemUiVisibilityChangeListener() {
            @Override
            public void onSystemUiVisibilityChange(int visibility) {
                // Note that system bars will only be "visible" if none of the
                // LOW_PROFILE, HIDE_NAVIGATION, or FULLSCREEN flags are set.
                if ((visibility & View.SYSTEM_UI_FLAG_FULLSCREEN) == 0) {
                    // The system bars are visible.

                } else {
                    // The system bars are NOT visible.

                }
            }
        }); 
```

[从文档](https://developer.android.com/training/system-ui/visibility)中查看更多详细信息

**2\. 检测用户是否下拉状态栏通知区域：`onWindowFocusChanged()`在你的activity中覆盖**

```
@Override
public void onWindowFocusChanged(boolean hasFocus) {

    if (hasFocus) { // hasFocus is true
        // the user pushed the notification bar back to the top
        Log.i("Tag", "Notification bar is pushed up");

    } else { // hasFocus is false
        // the user pulls down the notification bar
        Log.i("Tag", "Notification bar is pulled down");
    }
    super.onWindowFocusChanged(hasFocus);

} 
```

[在此链接](https://stackoverflow.com/questions/12689497/how-to-tell-the-activity-has-been-covered-by-the-notification-area)中查看 Stephan Palmer 的解决方案

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-07-17T10:28:48.407

看看[Notification.Builder setDeleteIntent](http://developer.android.com/reference/android/app/Notification.Builder.html#setDeleteIntent%28android.app.PendingIntent%29)（从 api 级别 11 开始）。

还有[Notification deleteIntent](http://developer.android.com/reference/android/app/Notification.html#deleteIntent)（从api级别1开始）

# c# - 未报告 RunWorkerCompleted 异常

> ID：11520475
> 
> 赞同：1
> 
> 时间：2012-07-17T10:20:56.163
> 
> 标签：c#, multithreading, exception-handling, backgroundworker, file-handling

## 背景：

我正在开发一项处理“信号量”文件的服务。这些是放置在单个目录中的 txt 文件，其中包含需要读入数据库的 xml 文件的链接。有一个以前的版本，但它对数据丢失很粗心，所以我的新服务在任何情况下都非常小心地处理文件。

## 规格：

我有一个 BackgroundWorker 池，用于 a) 将找到的新文件复制到“处理”文件夹（因为它在 unix 机器上，所以复制更改文件权限以便我可以使用它）并将其添加到队列和 b ) 处理文件内容。

我不想让文件保持打开状态，因此 SemaphoreFile 类包含对其位置的引用并管理文件的读取和写入。它甚至在其析构函数中处理文件清理，因此即使是可怕的崩溃也应该保留数据。

## 预期的：

在处理文件时的 RunWorkerCompleted 方法中，我希望返回 semaphoreFile 以便我可以调用 dispose 方法。如果一切成功，则文件将被删除并且 semaphoreFile 实例离开范围。如果进程出错（在许多情况下应该这样做），那么我处理错误，将文件标记为有问题（它将错误写入该数据下的文件并将其移动到新的“Prolematic”文件夹），然后再次处理()。

我添加了 throw new NotImplementedException("No error or results"); 因为我需要确保它永远不会被击中，所以我可以在我的调试器中查找它。我需要参考信号量文件以便整理它。如果我不能做到这一点，那么它将丢失。

## 问题：

当前的问题是后台工作人员运行'GetResult'，它会出错，但e.Error为null。这意味着 e.Result 也是空的，我遇到了这个我从来不想看到的错误。

SemaphoreFile.GetResults 中出现异常时，为什么 e.Error 为 null？

## 代码片段

执行：

```
public static void Execute()
{
    while (_isActive)
    {
        SemaphoreFile semaphoreFile;
        lock (ThreadLock)
        {
            int threadIndex;
            bool hasFreeThread = TryGetFreeThread(out threadIndex);
            bool hasSemaphore = SemaphoreQueue.HasNext;
            if (hasFreeThread && hasSemaphore)
            {
                semaphoreFile = SemaphoreQueue.Next;
                _threads[threadIndex].DoWork += delegate(object sender, DoWorkEventArgs args)
                {
                    try
                    {
                        BackgroundWorker bw = (BackgroundWorker)sender;
                        if (bw.CancellationPending)
                            args.Cancel = true;
                        args.Result = semaphoreFile.GetResults(bw);
                        if (bw.CancellationPending)
                            args.Cancel = true;
                    }
                    catch (Exception e)
                    {
                        Writelog.Write("An error occured processing file " + semaphoreFile + ":" + e.Message);
                        Writelog.WriteException(e);
                    }
                }
                ;
                _threads[threadIndex].RunWorkerCompleted += ThreadRunWorkerCompleted;
                Debug.Print("Starting Thread @ index " + threadIndex);
                _threads[threadIndex].RunWorkerAsync();
            }
        }
    }
} 
```

RunWorker 已完成：

```
private static void ThreadRunWorkerCompleted(object sender, RunWorkerCompletedEventArgs e)
{
    if (e.Error != null)
    {
        if (e.Error.GetType() == typeof(SemaphoreFileException))
        {
            SemaphoreFileException semaphoreFileException = (SemaphoreFileException)e.Error;
            semaphoreFileException.SemaphoreFile.MarkAsProblematic(e.Error);
            semaphoreFileException.SemaphoreFile.Dispose();
        }
        else
        {
            if (!(e.Error.GetType() == typeof(SemaphoreResultFileException)))
            {
                throw e.Error;
            }
            SemaphoreResultFileException semaphoreResultFileException = (SemaphoreResultFileException)e.Error;
            semaphoreResultFileException.SemaphoreFile.MarkAsProblematic(e.Error);
            semaphoreResultFileException.SemaphoreFile.Dispose();
        }
    }
    else
    {
        if (!e.Cancelled)
        {
            if (e.Result == null)
            {
                throw new NotImplementedException("No error or results");
            }
            if (e.Result.GetType() == typeof(SemaphoreFile))
            {
                SemaphoreFile semaphoreFile = (SemaphoreFile)e.Result;
                semaphoreFile.Dispose();
            }
        }
    }
} 
```

信号量文件.GetResults

```
public SemaphoreFile GetResults(BackgroundWorker backgroundWorker)
{
    if (!File.Exists(_fileInfo.FullName))
        throw new SemaphoreFileException(this, string.Format("Semaphore {0} is missing", _fileInfo.FullName));
    if (!Parse())
        throw new SemaphoreFileException(this, string.Format("Semaphore {0} failed to parse correctly.", _fileInfo.FullName));
    if (!_resultFiles.Any())
        throw new SemaphoreFileException(this, string.Format("Semaphore {0} contains no Results.", _fileInfo.FullName));

    List<Exception> resultFileExceptions = new List<Exception>();
    foreach (ResultFile resultFile in _resultFiles)
    {
        if (backgroundWorker.CancellationPending)
        {
            IsFinished = false;
            return this;
        }
        try
        {
            resultFile.Process();
            string line = resultFile.ToString();
            if (_lines.Contains(resultFile.ToString()))
            {
                _lines.Remove(line);
                if (!_lines.Contains("Lines done in last run:"))
                {
                    _lines.Add("Run @ " + DateTime.Now.ToLongDateString() + " " + DateTime.Now.ToLongTimeString());
                    _lines.Add("Lines done in last run:");
                }
                _lines.Add(resultFile.ToString());
            }
        }
        catch (Exception exception)
        {
            resultFileExceptions.Add(exception);
        }
    }
    if (resultFileExceptions.Count > 0)
    {
        _fileInfo = MoveFile(SemaphoreSubFoldersEnum.Problematic);
        throw new SemaphoreResultFileException(this, resultFileExceptions, string.Format("Results in Semaphore {0} contained errors:", _fileInfo.FullName));
    }
    return this;
} 
```

非常感谢您的宝贵时间^_^

# php - 替换数组中的字符串

> ID：11520477
> 
> 赞同：0
> 
> 时间：2012-07-17T10:21:01.063
> 
> 标签：php, str-replace

我有一个长字符串，其中包含一个样式标记，我想将其删除并替换为其他字符串。但是我尝试了 str_replace 函数，但它失败了。知道我该怎么做吗？我的代码在这里。

```
$primaryNav = '<li id="menu-item-1178" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-1178 sf-ul">
                <a href="http://mysite.com/join/" class="sf-with-ul">
                    <cufon class="cufon cufon-canvas" alt="Get " style="width: 30px; height: 15px; ">
                        <canvas width="45" height="16" style="width: 45px; height: 16px; top: -1px; left: -2px; "></canvas>
                        <cufontext>Get </cufontext>
                    </cufon>
                    <cufon class="cufon cufon-canvas" alt="in" style="width: 15px; height: 15px; ">
                        <canvas width="24" height="16" style="width: 24px; height: 16px; top: -1px; left: -2px; "></canvas>
                        <cufontext>in</cufontext>
                    </cufon>
                    <span class="sf-sub-indicator"><cufon class="cufon cufon-canvas" alt="»" style="width: 6px; height: 15px; "><canvas width="20" height="16" style="width: 20px; height: 16px; top: -1px; left: -2px; "></canvas><cufontext>»</cufontext></cufon></span></a>
                        <ul class="sub-menu" style="visibility: hidden; display: none; "> </ul>
                </li>';

$primaryNav = str_replace('<span class="sf-sub-indicator"><cufon class="cufon cufon-canvas" alt="»" style="width: 6px; height: 15px; "><canvas width="20" height="16" style="width: 20px; height: 16px; top: -1px; left: -2px; "></canvas><cufontext>»</cufontext></cufon></span>', ' It works!', $primaryNav); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-17T10:24:13.760

您需要考虑标签之间的空格。这是正则表达式可能是一个不错的解决方案的一种情况：

```
$primaryNav = preg_replace('#<span class="sf-sub-indicator">\s*<cufon class="cufon cufon-canvas" alt="»" style="width: 6px; height: 15px; ">\s*<canvas width="20" height="16" style="width: 20px; height: 16px; top: -1px; left: -2px; ">\s*</canvas>\s*<cufontext>»</cufontext>\s*</cufon>\s*</span>#', 'It works!', $primaryNav); 
```

`#`用于开始/结束正则表达式，因此您可以忽略它。方法匹配任意数量的`\s*`空格，尽可能多地匹配。这将涵盖空格、制表符、换行符等。

请注意，如果您不需要太多细节，您也可以使用正则表达式来减少匹配：

```
$primaryNav = preg_replace('#<span class="sf-sub-indicator">.*?</span>#', 'It works!', $primaryNav); 
```

请注意，最后一个将在*第* `</span>`一个停止匹配，因此如果您有多个，则需要小心 - 正则表达式不支持这种“平衡”。

# html - bgcolor 到表格中可能宽度为 70% 的表格的第 th

> ID：11520479
> 
> 赞同：0
> 
> 时间：2012-07-17T10:21:05.243
> 
> 标签：html, css

我只想将 bgcolor 赋予 th 属性，宽度为 70%。
标题就像“大型活动优惠”。我只想给它背景颜色。但它的宽度很大。所以它也超出了标题..我们能做到吗？我用谷歌搜索了..但没用..有
什么想法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-17T10:24:27.393

不确定我是否完全理解这里的问题，但是鉴于您只想在文本后面而不是在整个 th 元素上应用背景，我想您可以将文本包装在`span`-element 中并将背景颜色应用于该元素而不是整个-`th`元素。

像这样的东西：

**标记**

```
..
  <th>
     <span class="mega-event">Mega Event Offer</span>
  </th>
.. 
```

**CSS**

```
.mega-event {
   background-color: #888;
} 
```

# objective-c - 如何从 iOS 中的网站获取 json 文件？

> ID：11520482
> 
> 赞同：1
> 
> 时间：2012-07-17T10:21:11.370
> 
> 标签：objective-c

使用浏览器打开以下链接时：

[https://maps.google.co.kr/?q=seoul&output=json](https://maps.google.co.kr/?q=seoul&output=json)

它将开始下载一个 json 文件。

如何在 iOS 中获取此文件？

在 android 中，它似乎使用 inputStreamReader 来获取内容。

请给我一些建议或示例代码。

谢谢你的帮助~~

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-17T10:25:34.040

您可以下载它，例如我的课程[https://github.com/sakrist/ASyncURLConnection](https://github.com/sakrist/ASyncURLConnection)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-18T06:39:49.413

我解决了。

这是一个非常简单的方法...

```
NSString *urlString = [NSString stringWithFormat:@"http://maps.google.co.kr?q=%@&output=json", 
                       [address stringByAddingPercentEscapesUsingEncoding:NSUTF8StringEncoding]];

NSString *content = [NSString stringWithContentsOfURL:[NSURL URLWithString:urlString]
                                                        encoding:NSKoreanEncoding  

                                                     error:&error]; 
```

它返回一个包含完整信息（地址、内容、纬度、经度等）的谷歌搜索结果。

但我不知道为什么人们不使用这种方式......

有知道的请告诉我~~谢谢~~

# python - Python：类型错误、非整数数字和变量问题

> ID：11520484
> 
> 赞同：0
> 
> 时间：2012-07-17T10:21:15.087
> 
> 标签：python, string, variables, int

所以我试图制作一个程序，要求 3 个数字，然后返回这些数字的乘积（确定长方体的体积）

```
def cuboid ():
    A = input('Height '),
    B = input('Width '),
    C = input('Depth '), 
```

到目前为止，这使得 PYthon 要求三个值，但我不知道告诉 python 它们不是字符串，而是整数。即我不知道如何使用该`int()`命令。所以如果在那之后我输入：`Volume = A*B*C`它会给出一个 TypeError 因为他认为 1,2 和 3 不是整数。

我不知道为什么它不能那样工作，因为粗糙

```
def o3 (x,y,z):
    print x*y*z 
```

确实有效。提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-17T10:38:17.127

```
def input_int(text):
    while True:
        x = raw_input('%s: ' % text) 
        try:
            return int(x)
        except Exception, e:
            print 'Please enter a correct integer'

h = input_int('Height')
l = input_int('Length')
w = input_int('Width')

print 'Result is', h * l * w 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-17T10:25:54.970

你正在使用 `input()`你应该使用的地方`raw_input()`。输入后，您只需要说`a = int(a)`a 将是一个整数，您可以对其进行普通算术运算。

**例子：**

```
def get_cube_dims():
    x = int( raw_input('Enter x:') )
    y = int( raw_input('Enter y:') )
    z = int( raw_input('Enter z:') )
    print 'The volume is: {}'.format(x*y*z) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-17T10:31:04.630

这是你想要的吗？

```
def cuboidv ():
    h=input('enter hieght')
    l=input('enter length')
    w=input('enter width')
    ans=l*w*h
    print ans 
```

# android - 片段中的布局充气器错误

> ID：11520485
> 
> 赞同：1
> 
> 时间：2012-07-17T10:21:17.360
> 
> 标签：android, json, android-fragments

我正在使用片段创建 UI。在 onCreate(Bundle savedInstanceState) 中，我正在解析 JSON 数据。我收到以下错误：

> 07-17 15:23:18.089: W/System.err(1368): 在 android.os.Looper.loop(Looper.java:132) 07-17 15:23:18.129: E/AndroidRuntime(1368): 致命例外：主要 07-17 15:23:18.129：E/AndroidRuntime(1368)：java.lang.RuntimeException：无法启动活动 ComponentInfo{com.afghanread.android/com.afghanread.android.AfghanMagActivity}：android.view。 InflateException: Binary XML file line #8: Error inflating class fragment 07-17 15:23:18.129: E/AndroidRuntime(1368): at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1748) 07-17 15:23 :18.129: E/AndroidRuntime(1368): 在 android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:1764) 07-17 15:23:18.129: E/AndroidRuntime(1368): 在 android.app.ActivityThread.access$1500 (ActivityThread.java:122) 07-17 15:23:18.129: E/AndroidRuntime(1368):在 android.app.ActivityThread$H.handleMessage(ActivityThread.java:1002) 07-17 15:23:18.129: E/AndroidRuntime(1368): 在 android.os.Handler.dispatchMessage(Handler.java:99) 07- 17 15:23:18.129: E/AndroidRuntime(1368): 在 android.os.Looper.loop(Looper.java:132) 07-17 15:23:18.129: E/AndroidRuntime(1368): 在 android.app。 ActivityThread.main(ActivityThread.java:4025) 07-17 15:23:18.129: E/AndroidRuntime(1368): 在 java.lang.reflect.Method.invokeNative(Native Method) 07-17 15:23:18.129: E /AndroidRuntime(1368): at java.lang.reflect.Method.invoke(Method.java:491) 07-17 15:23:18.129: E/AndroidRuntime(1368): at com.android.internal.os.ZygoteInit$ MethodAndArgsCaller.run(ZygoteInit.java:841) 07-17 15:23:18.129: E/AndroidRuntime(1368): at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:599) 07-17 15:23：18.129：E/AndroidRuntime（1368）：在 dalvik.system.NativeStart.main（本机方法）07-17 15：23：18.129：E/AndroidRuntime（1368）：引起：android.view.InflateException：二进制 XML文件第 8 行：膨胀类片段时出错 07-17 15:23:18.129: E/AndroidRuntime(1368): at android.view.LayoutInflater.createViewFromTag(LayoutInflater.java:688) 07-17 15:23:18.129: E /AndroidRuntime(1368): 在 android.view.LayoutInflater.rInflate(LayoutInflater.java:724) 07-17 15:23:18.129: E/AndroidRuntime(1368): 在 android.view.LayoutInflater.inflate(LayoutInflater.java: 479) 07-17 15:23:18.129: E/AndroidRuntime(1368): 在 android.view.LayoutInflater.inflate(LayoutInflater.java:391) 07-17 15:23:18.129: E/AndroidRuntime(1368): 在android.view.LayoutInflater.inflate(LayoutInflater.java:347) 07-17 15:23:18.129:E/AndroidRuntime(1368): 在 com.android.internal.policy.impl.PhoneWindow.setContentView(PhoneWindow.java:223) 07-17 15:23:18.129: E/AndroidRuntime(1368): 在 android.app.Activity .setContentView(Activity.java:1780) 07-17 15:23:18.129: E/AndroidRuntime(1368): 在 com.afghanread.android.AfghanMagActivity.onCreate(AfghanMagActivity.java:26) 07-17 15:23:18.129 : E/AndroidRuntime(1368): 在 android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1048) 07-17 15:23:18.129: E/AndroidRuntime(1368): 在 android.app.ActivityThread.performLaunchActivity(ActivityThread. java:1712) 07-17 15:23:18.129: E/AndroidRuntime(1368): ... 11 更多 07-17 15:23:18.129: E/AndroidRuntime(1368): 引起：java.lang.NullPointerException 07 -17 15:23:18.129：E/AndroidRuntime(1368)：在 org.json.JSONTokener。nextCleanInternal(JSONTokener.java:112) 07-17 15:23:18.129: E/AndroidRuntime(1368): 在 org.json.JSONTokener.nextValue(JSONTokener.java:90) 07-17 15:23:18.129: E/ AndroidRuntime(1368): 在 org.json.JSONObject.(JSONObject.java:154) 07-17 15:23:18.129: E/AndroidRuntime(1368): 在 org.json.JSONObject.(JSONObject.java:171) 07 -17 15:23:18.129: E/AndroidRuntime(1368): 在 com.afghanread.android.CategoryFragment.parseJSON(CategoryFragment.java:72) 07-17 15:23:18.129: E/AndroidRuntime(1368): 在 com .afghanread.android.CategoryFragment.onCreateView(CategoryFragment.java:161) 07-17 15:23:18.129: E/AndroidRuntime(1368): 在 android.app.FragmentManagerImpl.moveToState(FragmentManager.java:713) 07-17 15 :23:18.129: E/AndroidRuntime(1368): 在 android.app.FragmentManagerImpl.moveToState(FragmentManager.java:905) 07-17 15:23:18.129: E/AndroidRuntime(1368): 在 android.app.FragmentManagerImpl.addFragment(FragmentManager.java:983) 07-17 15:23:18.129: E/AndroidRuntime(1368): 在 android.app.Activity.onCreateView (活动.java:4141)

我的代码是：

```
public class CategoryFragment extends Fragment implements OnItemClickListener {

ArrayList<String> cat = new ArrayList<String>();
ListView list;
DatabaseManager manager;
static String DATABASE_NAME = "afghanread.sqlite";
static Integer DATABASE_VERSION = 1;
TextView text;
TextView cat_name;
int length;
String[] values = new String[] { "Android", "iPhone", "WindowsMobile",
        "Blackberry", "WebOS", "Ubuntu", "Windows7", "Max OS X", "Linux",
        "OS/2" };

@Override
public void onActivityCreated(Bundle savedInstanceState) {
    // TODO Auto-generated method stub
    super.onActivityCreated(savedInstanceState);

}

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    parseJSON();
    manager = new DatabaseManager(null, DATABASE_NAME, null,
            DATABASE_VERSION);

}

private void parseJSON() {
    try {
        JSONObject jObject = new JSONObject(getJSONData());
        JSONArray jArray = jObject.getJSONArray("data");
        length = jArray.length();
        for (int i = 0; i < length; i++) {
            JSONObject tmpJson = jArray.getJSONObject(i);
            Category category = new Category();

            category.setCategotyId(tmpJson.getInt("category_id"));
            category.setCategoryName(tmpJson.getString("category_name"));

            // manager.insertCategoryDetails(category);

        }
        System.out.println("Jason parsing successful.......");
    } catch (JSONException e) {

        e.printStackTrace();
    }
}

private String getJSONData() {
    HttpPost httpPost = null;
    HttpClient httpClient = null;
    HttpResponse httpResponse = null;
    HttpEntity entity = null;
    InputStream in = null;
    BufferedReader reader = null;
    StringBuilder sb = null;
    String line = null;
    String result = null;
    try {
        httpPost = new HttpPost(
                "http://183.182.84.197:88/Sayyed_fahim/mobile/category.php");
        httpClient = new DefaultHttpClient();
        httpResponse = httpClient.execute(httpPost);
        int statusCode = httpResponse.getStatusLine().getStatusCode();
        if (statusCode == 200) {
            entity = httpResponse.getEntity();
            in = entity.getContent();
            reader = new BufferedReader(new InputStreamReader(in));
            sb = new StringBuilder();
            while ((line = reader.readLine()) != null)
                sb.append(line);

            result = sb.toString();
            result = result.trim();
            result = result.substring(1, result.length());
            Log.i("RESULT", result);
        } else
            Log.e("Error", "" + statusCode);
    } catch (Exception e) {
        e.printStackTrace();
    } finally {
        try {
            if (in != null) {
                in.close();
                in = null;
            }

            httpPost = null;
            httpClient = null;
            httpResponse = null;
            entity = null;
            in = null;
            reader = null;
            sb = null;
            line = null;

        } catch (IOException e) {
            e.printStackTrace();
        }
    }

    return result;
}

@Override
public View onCreateView(LayoutInflater inflater, ViewGroup container,
        Bundle savedInstanceState) {

    System.out.println("Inside the afghan Read category");
    View view = (View) inflater.inflate(R.layout.categoryfragment, null);
    list = (ListView) view.findViewById(R.id.cat_list);

    /*
     * ArrayAdapter<String> adapter = new
     * ArrayAdapter<String>(getActivity(),
     * android.R.layout.simple_list_item_1, values);
     */
    parseJSON();
    list.setAdapter(new CustomAdapter(getActivity(), R.layout.categoryitem,
            values));

    list.setOnItemClickListener(this);
    return view;
}

@Override
public void onItemClick(AdapterView<?> arg0, View arg1, int arg2, long arg3) {
    String item = (String) values[arg2];
    LibraryFragment fragment = (LibraryFragment) getFragmentManager()
            .findFragmentById(R.id.library);
    if (fragment != null && fragment.isInLayout()) {
        fragment.setText(item);
    } else {
        Intent intent = new Intent(getActivity().getApplicationContext(),
                LibraryActivity.class);
        intent.putExtra("value", item);
        startActivity(intent);
    }

}

public class CustomAdapter extends BaseAdapter {
    String names[];
    Context mCtx;
    int item;
    LayoutInflater inflater;

    public CustomAdapter(Context ctx, int categoryitem, String[] values) {

        this.names = values;
        this.mCtx = ctx;
        this.item = categoryitem;
        inflater = (LayoutInflater) ctx
                .getSystemService(getActivity().LAYOUT_INFLATER_SERVICE);
    }

    @Override
    public int getCount() {
        // TODO Auto-generated method stub
        return names.length;
    }

    @Override
    public Object getItem(int position) {
        // TODO Auto-generated method stub
        return null;
    }

    @Override
    public long getItemId(int position) {
        // TODO Auto-generated method stub
        return 0;
    }

    @Override
    public View getView(int position, View convertView, ViewGroup parent) {
        if (convertView == null) {

            convertView = inflater.inflate(item, null);
            cat_name = (TextView) convertView.findViewById(R.id.cat_name);

        }

        cat_name.setText(names[position]);

        return convertView;

    }

} 
```

}

如何解决问题？？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-17T10:41:49.790

我猜网络调用失败，你将 null 传递给`new JSONObject(getJSONData())`.
是 JSONObject jObject = new JSONObject(getJSONData()); 第 72 行，作为 logcat 输出中空指针的来源：com.afghanread.android.CategoryFragment.parseJSON(CategoryFragment.java:72)？

与错误不完全相关，但也是代码中的一个大问题。您正在 UI 线程内进行网络通话。这将冻结手机，直到从您的服务器加载 json 数据。您至少应该将所有数据加载代码放在[AsyncTask](http://developer.android.com/reference/android/os/AsyncTask.html)中，并在 onPostExecute 方法中更新您的 UI。

# c# - Nuget 包在 Visual Studio 中无法正常工作

> ID：11520489
> 
> 赞同：3
> 
> 时间：2012-07-17T10:21:28.410
> 
> 标签：c#, .net, visual-studio-2010, windows-phone-7

我正在编写一个 Windows Phone 应用程序，开始使用 VS 2010 Express for windows phone。然后我安装了 VS 2012 并制作了一个桌面应用程序，它使用 RestSharp 使用 JSON/REST 服务。由于 Express 版本不支持插件，我得到了完整的 VS 2010 Ultimate 并安装了 Nuget。当我创建一个 win 手机库项目并添加一个 RestSharp 包时，它会显示在 References 中，但我无法访问它的任何类（并且使用 RestSharp 以红色下划线显示）。此外，当我删除它并从添加引用再次添加时，我得到一个不兼容的引用错误窗口：

```
RestSharp.WindowsPhone, Version=103.2.0.0, Culture=neutral, PublicKeyToken=null" is incompatible with 
Windows Phone 7.1
In order to add it yourself you should to change the project's terget to a compatible framework first. 
```

如果我将目标更改为 WP 7.0，它也会出现。

有没有人解决过类似的问题？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-31T09:25:49.327

在我的情况下，这是因为项目文件夹中有一个 packages.config 文件，*但解决方案中没有*。这就是我无法再次正确添加引用的原因。从物理磁盘中删除此文件，然后重新运行 Install-Package 命令。它现在应该正确添加它。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-17T15:20:01.170

你在使用源代码控制吗？

您可能尚未设置解决方案以[启用包还原](http://docs.nuget.org/docs/workflows/using-nuget-without-committing-packages)（NuGet 文档）。

> 右键单击解决方案资源管理器中的解决方案节点，然后选择启用 NuGet 包还原。

之后，解决方案资源管理器将包含更多项目，并且将有一个新文件夹**`packages`**自动添加到您的解决方案文件夹中。您将需要将此文件夹添加到您的**版本控制**中，因为它将**包含您已安装的 NuGet 包**。

而已。

如果您想了解更多信息，以下是有关它（自动）为您做什么的更多详细信息：

> 它添加了一个名为 .nuget 的解决方案文件夹，其中包含 NuGet.exe 和 NuGet.targets MsBuild 文件。它还更改了解决方案中的每个项目以导入 NuGet.targets MsBuild 任务。
> 
> 有了这个，任何时候编译项目，构建任务都会查看每个项目的 packages.config 文件，并且对于该文件中的每个包，确保相应的包存在于 packages 文件夹中。对于任何丢失的包，构建任务将下载并解包该包。
> 
> 在还原方案中，NuGet 将在还原包时获取确切的版本。它不会执行任何升级。

此外，如果您安装了最新的 NuGet 版本，现在将在*工具 -> 选项... -> 包管理器 -> 常规 ->**允许 NuGet 在构建期间下载丢失的包下***找到一个新选项，我也建议使用该选项。

这个名字说明了一切。如果解决方案配置为使用某个 NuGet 包，但该包尚未安装在您的开发计算机上，NuGet 将在您执行下一个`build`.

# python - 列表中删除、删除和弹出的区别

> ID：11520492
> 
> 赞同：1143
> 
> 时间：2012-07-17T10:21:41.260
> 
> 标签：python, list

```
>>> a=[1,2,3]
>>> a.remove(2)
>>> a
[1, 3]
>>> a=[1,2,3]
>>> del a[1]
>>> a
[1, 3]
>>> a= [1,2,3]
>>> a.pop(1)
2
>>> a
[1, 3]
>>> 
```

上述三种从列表中删除元素的方法有什么区别吗？

* * *

## 回答 #1

> 赞同：1616
> 
> 时间：2012-07-17T10:24:09.450

从列表中删除元素的三种不同方法的效果：

`remove`删除第*一个*匹配*值*，而不是特定索引：

```
>>> a = [0, 2, 3, 2]
>>> a.remove(2)
>>> a
[0, 3, 2] 
```

`del`删除特定索引处的项目：

```
>>> a = [9, 8, 7, 6]
>>> del a[1]
>>> a
[9, 7, 6] 
```

并`pop`删除特定索引处的项目并返回它。

```
>>> a = [4, 3, 5]
>>> a.pop(1)
3
>>> a
[4, 5] 
```

它们的错误模式也不同：

```
>>> a = [4, 5, 6]
>>> a.remove(7)
Traceback (most recent call last):
  File "<stdin>", line 1, in <module>
ValueError: list.remove(x): x not in list
>>> del a[7]
Traceback (most recent call last):
  File "<stdin>", line 1, in <module>
IndexError: list assignment index out of range
>>> a.pop(7)
Traceback (most recent call last):
  File "<stdin>", line 1, in <module>
IndexError: pop index out of range 
```

* * *

## 回答 #2

> 赞同：252
> 
> 时间：2012-07-17T10:25:04.817

用于`del`按索引删除元素，`pop()`如果需要返回值则按索引`remove()`删除，按值删除元素。最后一个需要搜索列表，`ValueError`如果列表中没有出现这样的值，则引发。

`i`从元素列表中删除索引时`n`，这些方法的计算复杂度为

```
del     O(n - i)
pop     O(n - i)
remove  O(n) 
```

* * *

## 回答 #3

> 赞同：115
> 
> 时间：2017-01-16T10:27:18.193

由于没有其他人提到它，请注意`del`（不像`pop`）由于列表切片而允许删除一系列索引：

```
>>> lst = [3, 2, 2, 1]
>>> del lst[1:]
>>> lst
[3] 
```

`IndexError`如果索引不在列表中，这也可以避免：

```
>>> lst = [3, 2, 2, 1]
>>> del lst[10:]
>>> lst
[3, 2, 2, 1] 
```

* * *

## 回答 #4

> 赞同：67
> 
> 时间：2017-08-08T15:33:26.607

其他人已经回答得很好。这是我的最后一个:)

[![删除 vs 流行 vs 删除](../Images/cc8fc9f8c21d9e75a84bd0e4e60f1b10.png)](https://i.stack.imgur.com/9Yzgv.png)

显然，`pop`是唯一一个返回值的，并且`remove`是唯一一个搜索对象的，同时`del`将自己限制为简单的删除。

* * *

## 回答 #5

> 赞同：26
> 
> 时间：2018-08-26T15:34:04.240

这里有很多很好的解释，但我会尽力简化更多。

在所有这些方法中，`remove`&`pop`是**后缀**，而 delete 是**前缀**。

**`remove()`：**用于删除第一次出现的元素。
`remove(n)`=> 列表中的第一次出现`n`。

```
>>> a = [0, 2, 3, 2, 1, 4, 6, 5, 7]
>>> a.remove(2)   # where i = 2
>>> a
[0, 3, 2, 1, 4, 6, 5, 7] 
```

**`pop()`:**用于移除元素...

*   如果没有指定索引：
    `pop()`=> 从列表末尾

```
>>> a.pop()
>>> a
[0, 3, 2, 1, 4, 6, 5] 
```

*   如果指定了索引：
    `pop(index)`=> of index

```
>>> a.pop(2)
>>> a
[0, 3, 1, 4, 6, 5] 
```

### 警告：前面有危险的方法

**`del()`**: 这是一个前缀方法。

注意同一方法的两种不同语法：有`[]`和无。它拥有以下权力：

*   删除索引
    `del a[index]`=> 用于按索引及其关联值删除，就像`pop`.

```
>>> del a[1]
>>> a
[0, 1, 4, 6, 5] 
```

*   删除范围内的值`[index_1:index_N]`：
    `del a[0:3]`=> 范围内的多个值。

```
>>> del a[0:3]
>>> a
[6, 5] 
```

*   最后但并非最不重要的一点是，一次删除整个列表。
    `del (a)`=> 如上所述。

```
>>> del (a)
>>> a
Traceback (most recent call last):
  File "<stdin>", line 1, in <module>
NameError: name 'a' is not defined 
```

希望这能澄清困惑。

* * *

## 回答 #6

> 赞同：22
> 
> 时间：2015-02-07T06:51:53.363

**流行音乐**

> 获取索引（给定时，否则最后获取），删除该索引处的值，并返回值

**消除**

> 取值，删除第一次出现，不返回任何内容

**删除**

> 获取索引，删除该索引处的值，并且不返回任何内容

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2020-10-09T13:17:30.103

这是一个详细的答案。

del 可用于任何类对象，而 pop 和 remove 并绑定到特定类。

**为了`del`**

这里有些例子

```
>>> a = 5
>>> b = "this is string"
>>> c = 1.432
>>> d = myClass()

>>> del c
>>> del a, b, d   # we can use comma separated objects 
```

我们可以覆盖`__del__`用户创建的类中的方法。

列表的具体用途

```
>>> a = [1, 4, 2, 4, 12, 3, 0]
>>> del a[4]
>>> a
[1, 4, 2, 4, 3, 0]

>>> del a[1: 3]   # we can also use slicing for deleting range of indices
>>> a
[1, 4, 3, 0] 
```

**为了`pop`**

`pop`将索引作为参数并删除该索引处的元素

与 不同`del`，`pop`当在列表对象上调用时返回该索引处的值

```
>>> a = [1, 5, 3, 4, 7, 8]
>>> a.pop(3)  # Will return the value at index 3
4
>>> a
[1, 5, 3, 7, 8] 
```

**为了`remove`**

remove 获取参数值并从列表中删除该值。

如果存在多个值将删除第一次出现

`Note`：如果该值不存在，将抛出 ValueError

```
>>> a = [1, 5, 3, 4, 2, 7, 5]
>>> a.remove(5)  # removes first occurence of 5
>>> a
[1, 3, 4, 2, 7, 5]
>>> a.remove(5)
>>> a
[1, 3, 4, 2, 7] 
```

希望这个答案是有帮助的。

* * *

## 回答 #8

> 赞同：2
> 
> 时间：2017-07-10T17:29:41.893

不同数据结构上的任何操作/功能都是为特定操作定义的。在您的情况下，即删除元素、删除、弹出和删除。（如果您考虑集合，请添加另一个操作 - 丢弃）其他令人困惑的情况是在添加时。插入/追加。为了演示，让我们实现双端队列。deque 是一种混合线性数据结构，您可以在其中添加元素/从两端删除元素。（后端和前端）

```
class Deque(object):

  def __init__(self):

    self.items=[]

  def addFront(self,item):

    return self.items.insert(0,item)
  def addRear(self,item):

    return self.items.append(item)
  def deleteFront(self):

    return self.items.pop(0)
  def deleteRear(self):
    return self.items.pop()
  def returnAll(self):

    return self.items[:] 
```

在这里，查看操作：

```
def deleteFront(self):

    return self.items.pop(0)
def deleteRear(self):
    return self.items.pop() 
```

操作必须返回一些东西。所以，pop - 有和没有索引。如果我不想返回值：del self.items[0]

按值而不是索引删除：

*   消除 ：

    ```
    list_ez=[1,2,3,4,5,6,7,8]
    for i in list_ez:
        if i%2==0:
            list_ez.remove(i)
    print list_ez 
    ```

# 返回 [1,3,5,7]

让我们考虑集合的情况。

```
set_ez=set_ez=set(range(10))

set_ez.remove(11)

# Gives Key Value Error. 
##KeyError: 11

set_ez.discard(11)

# Does Not return any errors. 
```

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2018-08-09T17:13:30.230

列表上的[删除](https://docs.python.org/3/library/collections.html#collections.deque.remove)操作被赋予一个要删除的值。它搜索列表以查找具有该值的项目并删除它找到的第一个匹配项目。如果没有匹配的项目，这是一个错误，引发一个[ValueError](https://docs.python.org/3/library/exceptions.html#ValueError)。

```
>>> x = [1, 0, 0, 0, 3, 4, 5]
>>> x.remove(4)
>>> x
[1, 0, 0, 0, 3, 5]
>>> del x[7]
Traceback (most recent call last):
  File "<pyshell#1>", line 1, in <module>
    del x[7]
IndexError: list assignment index out of range 
```

[del](https://docs.python.org/3/tutorial/datastructures.html#the-del-statement)语句可用于删除整个列表。如果您有一个特定的列表项作为 del 的参数（例如 listname[7] 专门引用列表中的第 8 项），它只会删除该项。甚至可以从列表中删除“切片”。如果索引超出范围，则会引发错误[IndexError](https://docs.python.org/3/library/exceptions.html#IndexError)。

```
>>> x = [1, 2, 3, 4]
>>> del x[3]
>>> x
[1, 2, 3]
>>> del x[4]
Traceback (most recent call last):
  File "<pyshell#1>", line 1, in <module>
    del x[4]
IndexError: list assignment index out of range 
```

[pop](https://docs.python.org/3/library/collections.html#collections.deque.pop)的通常用法是从列表中删除最后一项，因为您将列表用作堆栈。与 del 不同，pop 返回它从列表中弹出的值。您可以选择为 pop 和 pop 指定一个索引值，并从列表末尾以外的地方弹出（例如 listname.pop(0) 将删除列表中的第一项并将第一项作为结果返回）。您可以使用它来使列表表现得像一个队列，但是有一些可用的库例程可以提供比 pop(0) 更好的性能的队列操作。如果索引超出范围，则会引发错误[IndexError](https://docs.python.org/3/library/exceptions.html#IndexError)。

```
>>> x = [1, 2, 3] 
>>> x.pop(2) 
3 
>>> x 
[1, 2]
>>> x.pop(4)
Traceback (most recent call last):
  File "<pyshell#1>", line 1, in <module>
    x.pop(4)
IndexError: pop index out of range 
```

有关更多详细信息，请参阅[collections.deque](https://docs.python.org/3/library/collections.html#collections.deque)。

* * *

## 回答 #10

> 赞同：1
> 
> 时间：2016-09-04T20:22:11.320

虽然 pop 和 delete 都使用索引来删除上面评论中所述的元素。一个关键的区别是它们的时间复杂度。没有索引的 pop() 的时间复杂度为 O(1)，但删除最后一个元素的情况不同。

如果您的用例总是要删除最后一个元素，则最好使用 pop() 而不是 delete()。关于时间复杂度的更多解释，可以参考[https://www.ics.uci.edu/~pattis/ICS-33/lectures/complexitypython.txt](https://www.ics.uci.edu/~pattis/ICS-33/lectures/complexitypython.txt)

* * *

## 回答 #11

> 赞同：-1
> 
> 时间：2019-11-28T11:03:40.437

Remove 基本上适用于 value 。删除和弹出索引上的工作

删除基本上删除了第一个匹配值。Delete 从特定索引中删除项目 Pop 基本上采用索引并返回该索引处的值。下次打印列表时，该值不会出现。

[![例子：](../Images/aa1efb634683a3bdca87171719f9ff2b.png)](https://i.stack.imgur.com/ExsEy.png)

* * *

## 回答 #12

> 赞同：-4
> 
> 时间：2012-10-16T00:41:36.737

您也可以使用 remove 按索引删除值。

```
n = [1, 3, 5]

n.remove(n[1]) 
```

然后 n 将引用 [1, 5]

# arrays - 改变数组的形状

> ID：11520496
> 
> 赞同：0
> 
> 时间：2012-07-17T10:21:53.507
> 
> 标签：arrays, matlab, export-to-excel

我正在运行一个实验，并将我需要的所有变量保存在一个名为`name.mat`. 我通过将它们分配给变量结果来保存它们。

所以响应被编码为`results.response`

然后我键入 save name results 并将所有分配的变量与前缀结果保存到一个数组中。

然后我想把它写成excel。但是 xlswrite 似乎不起作用，除非所有变量都在同一张表上，而我的变量在数组结果中保存为不同的变量。

所以我需要将数据保存在彼此相邻的列中，而不是每次都使用新变量启动新页面。然后我可以将它发送到 xls 没有问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-17T12:14:23.590

我想你正在使用matlab？尝试 struct2cell(results)，然后使用 xlswrite 将生成的单元格数组写入 excel。

或者，使用 names = fieldnames(results) 获取结构数组（结果）的字段名，并遍历数组名称以访问结果中的每个字段并将其写入 Excel。

# magento - Magento 结帐页面上的 Google Checkout

> ID：11520499
> 
> 赞同：1
> 
> 时间：2012-07-17T10:21:54.510
> 
> 标签：magento, google-checkout

我想在 magento 的一页结帐页面上显示 google checkout，以便客户选择付款方式，要么选择 google checkout，要么选择其他类似 paypal。

我正在使用 magento 1.7.0.2

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-10T14:20:26.533

您需要从管理员启用谷歌结帐。

转到系统-> 配置-> 在左侧选择销售-> 谷歌 API 比选择谷歌结帐。

您还需要在 google 上为 google checkout 创建沙盒帐户。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-07T01:02:53.440

在您的结帐页面上添加这段代码：

> php echo $this->getLayout()->createBlock('googlecheckout/link')->setTemplate('googlecheckout/link.phtml')->toHtml(); ?>

将'<'添加到代码的开头，stackoverflow 将其删除

# c++ - 如何为工会成员定义 typedef

> ID：11520502
> 
> 赞同：-2
> 
> 时间：2012-07-17T10:22:01.857
> 
> 标签：c++, typedef

为方便起见，我想在此 GVEvent 联合中为内部 GVResponseEvent 使用 typedef。

我的尝试给了我编译错误：

```
warning C4091: 'typedef ' : ignored on left of '_GVEvent' when no variable is declared
error C2143: syntax error : missing ';' before '.'
error C2059: syntax error : '.' 
```

我究竟做错了什么？

```
typedef struct {
int                 type ;
int                 status ;
} GVResponseEvent ;

typedef union _GVEvent {
   int                         type ;
   GVResponseEvent          gvresponseevent;
} GVEvent ;

typedef GVEvent.GVResponseEvent resp_evt;

int main(int argc, char* argv[])
{
   resp_evt.status = 9; *** not working

   GVEvent myevt;
   myevt.type = 2;
   myevt.gvresponseevent.status = 9;
   myevt.gvresponseevent.type = 8;

   int gvresptype = myevt.gvresponseevent.type;

   return 0;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-17T10:53:07.347

> typedef GVEvent.GVResponseEvent

GVResponseEvent 不是在 GVEvent 范围内定义的类型。因此，您的代码对编译器或我都没有意义。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-17T10:37:43.973

`GVResponseEvent`本身就是一种类型。它*没有*定义在`union _GVEvent`.

你可以`typedef`这样：

```
typedef GVResponseEvent resp_evt; 
```

*如果它在联合中*定义，这就是它的样子：

```
typedef union _GVEvent {
   int                         type ;
   typedef struct whatever{ int x; } GVResponseEvent;
   GVResponseEvent          gvresponseevent;
} GVEvent ; 
```

如果是这种情况，这就是您将如何`typedef`编辑它：

```
typedef GVEvent::GVResponseEvent resp_evt; 
```

注意`::`.

* * *

在另一个主题上，您可以访问变量而不是类型中的数据。

如果你有

```
typedef whatever your_custom_type; 
```

以与没有意义`your_custom_type.field`的方式相同的方式写作是没有意义的`int += 10;`

由于您正在制作`resp_evt`一个类型（通过使用`typedef`），`resp_evt.status`所以没有意义。正如[enobayram](https://stackoverflow.com/a/11520737/912144)提到的，也许您正在寻找指针/参考？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-17T10:40:01.093

你的代码行

```
typedef GVEvent.GVResponseEvent resp_evt; 
```

在语法上是错误的。struct 的字段不能用作源类型。typedef 的语法是：

`typedef old_type new_type;`

预计新类型将具有修饰符，例如`*`, `[25]`,`(int x, long y)`等。

它的目的是什么？你已经有了 type `GVResponseEvent`。就用它吧。

# java - java中的查询与mysql中的不同

> ID：11520504
> 
> 赞同：0
> 
> 时间：2012-07-17T10:22:03.387
> 
> 标签：java, mysql, jdbc

> **可能重复：**
> [MySql 日期时间不返回时间](https://stackoverflow.com/questions/7875196/mysql-datetime-not-returning-time)

如果我从 consele mysql 执行此操作：

```
SELECT CREATION from MYDATABASE WHERE NAME='MyData'; 
```

我明白了`2012-07-12 13:42:55`

但如果从 Java 执行此操作：

```
 String sql = "SELECT CREATION from MYDATABASE WHERE NAME=?";
  PreparedStatement ps = null;
  String creationQuery;
  ResultSet rs = null;
  try 
  {
      ps = conn.prepareStatement(sql);
      ps.setString(1, "MyData");
      rs = ps.executeQuery();

      creationQuery = rs.next() ? rs.getString(1) : null;
  } 
```

我明白了`2012-07-12 13:42:55.0`

为什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-17T10:34:44.873

这与您从 Java 查询中收到的是 a 的事实有关，它是对也持有纳秒[`java.sql.Timestamp`](http://docs.oracle.com/javase/6/docs/api/java/sql/Timestamp.html)的正则的包装器。 如果您查看该类的方法，您会发现它被覆盖以使用格式 `util.Date`
[`toString()`](http://grepcode.com/file/repository.grepcode.com/java/root/jdk/openjdk/6-b14/java/sql/Timestamp.java#Timestamp.toString%28%29)

> yyyy-mm-dd hh:mm:ss.ffffffffff

在哪里

> 呸呸呸

代表纳秒。

虽然这两个结果代表相同的时间，但这只是表示方式的不同。

# telerik-grid - 如何在 Telerik 的 RadGrid 中重新选择项目？

> ID：11520506
> 
> 赞同：0
> 
> 时间：2012-07-17T10:22:12.257
> 
> 标签：telerik-grid

我有 2 个 Telerik 的 rad 网格。第一个是大师，第二个是细节。我可以通过按每个网格上方工具栏上的“删除”按钮来独立地从两个网格中删除行。我在两个网格的工具栏中也有“刷新”按钮。

问题在于细节网格。当我删除项目时，网格不会刷新。调用 Rebind 方法没有帮助。唯一有帮助的是按主网格工具栏中的“刷新”按钮，然后用鼠标在主网格中选择先前选择的行。之后，我可以看到刷新的详细信息网格。

所以，我不需要按主网格工具栏中的“刷新”按钮并通过鼠标选择主网格中的行。我可以以编程方式刷新主网格，并且只想以编程方式重新选择最初选择的项目。我试过这个：

item.Selected = true;

但是，它只会在主网格中直观地选择项目，而不会刷新详细网格。

那么，如何以编程方式选择主网格中的项目以获得与鼠标选择相同的效果？

先感谢您。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-18T07:39:55.813

我刚刚意识到您可能对两个网格使用不同的 DataSource，但指向同一个数据库，对吗？我下面的示例对两个网格使用相同的数据源。但是，我通过使某些列不可见来制作详细视图与普通视图。也许这个策略可以解决你的问题？

我的第一个想法是尝试实现 SelectionChanged 事件，或者如果不是，则实现 SelectionChanging 事件。在那里刷新一下。但我最终并没有那样做。

我写了一个小程序如下。只要它不是删除，它就会将编辑保存到磁盘并进行任何行更改（单击按钮时我无法保存删除编辑，它在删除命令上给出了空指针异常）。它还在关闭程序之前保存更改（以便随后也保存任何删除行）。我确实发现 deleteOne 和 deleteTwo 按钮（分别从第一个或第二个网格中删除）确实会导致两个网格中都发生删除。因此，如果适用于您的情况，您可以使用 radGridView1.Rows.Remove(row) 或 RemoveAt(i) 命令吗？

另一种可能性是，如果刷新不起作用，您可以将 DataSource 设置为 null，然后在删除该行后再次将其设置为数据源。这有点激烈，但如果这是唯一有效的方法？我说的是两个网格的数据源。

我的代码如下：

```
using System;
using System.Collections.Generic;
using System.ComponentModel;
using System.Data;
using System.Drawing;
using System.Text;
using System.Windows.Forms;
using Telerik.WinControls;
using Telerik.WinControls.Data;
using Telerik.WinControls.UI;

namespace RadControlsWinFormsApp1
{
public partial class RadForm1 : Telerik.WinControls.UI.RadForm
{
    public RadForm1()
    {
        InitializeComponent();
    }

    private void RadForm1_Load(object sender, EventArgs e)
    {
        // TODO: This line of code loads data into the 'testdbDataSet.Customers' table. You can move, or remove it, as needed.
        this.customersTableAdapter.Fill(this.testdbDataSet.Customers);
        radGridView1.Columns["Address"].IsVisible = false;
    }

    private void radGridView1_RowsChanged(object sender, Telerik.WinControls.UI.GridViewCollectionChangedEventArgs e)
    {
        // if removing don't update, because if my delete button is pressed this
        // will otherwise cause all sorts of problems and freezes the grid
        if (e.Action != NotifyCollectionChangedAction.Remove)
        {
            try
            {
                customersTableAdapter.Update(testdbDataSet);
            }
            catch (DBConcurrencyException ex)
            {
                // unable to save right now, don't worry about it
            }
        }
        radGridView2.Refresh();
    }

    private void butDeleteOne_Click(object sender, EventArgs e)
    {
        bool haveRemoved = false;
        for (int i = 0; i < radGridView1.Rows.Count && !haveRemoved; ++i)
        {
            GridViewRowInfo row = radGridView1.Rows[i];
            if (row.IsSelected)
            {
                haveRemoved = true;
                radGridView1.Rows.RemoveAt(i);
            }
        }
    }
    private void butDeleteTwo_Click(object sender, EventArgs e)
    {
        bool haveRemoved = false;
        for (int i = 0; i < radGridView2.Rows.Count && !haveRemoved; ++i)
        {
            GridViewRowInfo row = radGridView2.Rows[i];
            if (row.IsSelected)
            {
                haveRemoved = true;
                radGridView2.Rows.RemoveAt(i);
            }
        }
    }

    private void radGridView2_RowsChanged(object sender, GridViewCollectionChangedEventArgs e)
    {
        // if removing don't update, because if my delete button is pressed this
        // will otherwise cause all sorts of problems and freezes the grid
        if (e.Action != NotifyCollectionChangedAction.Remove)
        {
            try
            {
                customersTableAdapter.Update(testdbDataSet);
            }
            catch (DBConcurrencyException ex)
            {
                // unable to save right now, don't worry about it
            }
        }
        radGridView1.Refresh();
    }

    private void RadForm1_FormClosing(object sender, FormClosingEventArgs e)
    {
        // ensure all data is saved back into database on close
        customersTableAdapter.Update(testdbDataSet);
    }
    //private void radGridView1_CellEndEdit(object sender, Telerik.WinControls.UI.GridViewCellEventArgs e)
    //{
    //}
}
} 
```

# wpf - 在 Windows 8 上构建的 Metro 风格应用程序（Elysium）不适用于 Windows 7

> ID：11520508
> 
> 赞同：0
> 
> 时间：2012-07-17T10:22:16.100
> 
> 标签：wpf, microsoft-metro

我用 1 种形式构建了一些 Metro 风格的应用程序。我的操作系统——Windows 8，我使用 Visual Studio 2010。如果我使用 MahApps.Metro 创建 Metro 风格的应用程序——一切都很好——它们可以在 Windows 7 上运行。但是如果我使用 Elysium.theme——我的应用程序不能在 Windows 7 上运行.

有人可以帮我解决这个问题吗？

Ps 来自[http://elysium.codeplex.com/](http://elysium.codeplex.com/)的示例在 win 7 和 win 8 中都可以正常工作。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-19T19:29:02.780

Elysium 同时使用了 .Net 的 4.0 和 4.5，请找到您在项目中添加的作为参考。最好使用 4.0，这样它可以在两个操作系统上运行。

# selenium - selenium.start() 的运行时异常 - 无法启动 Selenium 会话：无法启动新的浏览器会话：启动浏览器时出错

> ID：11520511
> 
> 赞同：1
> 
> 时间：2012-07-17T10:22:21.703
> 
> 标签：selenium

关注这篇文章 - [Selenium - 无法启动 Selenium 会话：无法启动新的浏览器会话：启动浏览器时出错](https://stackoverflow.com/questions/1414934/selenium-could-not-start-selenium-session-failed-to-start-new-browser-session)

selenium.start() 出现错误。我在 eclipse ide 中使用 selenium rc(2.16) ， junit(4.5) 。

解决此问题的唯一方法是在 tomcat 服务器中重新部署我们的框架，只需重新启动所有内容。

这是启动 selenium 的一段代码

```
private static HttpCommandProcessor proc;
    public static DefaultSelenium selenium;

    if (selenium == null) {

        proc = new HttpCommandProcessor("localhost", 4444, browserName,
                urlName);
        selenium = new DefaultSelenium(proc);
        **selenium.start();**
        selenium.setTimeout(String.valueOf(PAGE_TIMEOUT_TIME));
        selenium.useXpathLibrary("javascript-xpath");
        selenium.deleteAllVisibleCookies();             
    } 
```

当执行到上述代码时，硒服务器已经启动。

以下是执行测试时出现的异常 -

```
java.lang.RuntimeException: Could not start Selenium session: Failed to start new browser session: Error while launching browser
  at com.thoughtworks.selenium.DefaultSelenium.start(DefaultSelenium.java:107)
  at <package>.SuperClass.connectToUrl(SuperClass.java:340) 
```

任何解决此问题的帮助或线索将不胜感激！

# c++ - void* 和 void * 有什么区别

> ID：11520515
> 
> 赞同：0
> 
> 时间：2012-07-17T10:22:36.927
> 
> 标签：c++, pointers

> **可能重复：**
> [在 C 中，为什么星号在变量名之前，而不是在类型之后？](https://stackoverflow.com/questions/398395/in-c-why-is-the-asterisk-before-the-variable-name-rather-than-after-the-type)
> [声明指针；类型和名称之间空格的左侧或右侧的星号？](https://stackoverflow.com/questions/2660633/declaring-pointers-asterisk-on-the-left-or-right-of-the-space-between-the-type)

我使用指针已经有一段时间了，用来声明像这样的指针

```
int *x; 
```

但是通过一些代码注意到， * 在某些情况下似乎在数据类型之后，比如

```
void* setValue(){
 /*          */
} 
```

有什么区别以及为什么这样使用

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-07-17T10:23:20.297

语义上没有。这是风格。

将星号放在变量旁边的好处是可以防止这种常见错误：

```
char* str1, str2;
/* str2 is a char, not char* ! */

char *str1, *str2;
/* ok */ 
```

这个问题在返回类型中不存在，所以它在那里更不重要。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-17T10:27:12.550

没有区别，在某些情况下最好保持在右侧：

```
int* p1,p2; 
```

看起来像 p1 和 p2 ara 指针，而只有 p1 是，

```
int *p1,p2; 
```

现在它看起来好多了，但好的风格是将它分成单独的行：

```
int *p1;
int p2; 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-17T10:28:49.550

`a+b`它与和之间的区别完全相同`a + b`- 即没有区别。空格根本没有任何意义，除非需要分隔标记。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-17T10:27:06.697

没有语义差异。

通常建议保留`*`类型旁边的，因为真正的类型`x`是`void *`. 然而，这在语法上是错误的，因为 C/C++ 将星号绑定到变量名。

```
int *x, y; // declare one pointer to int x and one int y 
```

就我个人而言，我尽量保持`*`在中间

```
int * x; 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-17T10:24:41.437

指向 的指针`void`，注意为`void*`通用不透明指针。您可以传递它（作为参数、结果、通过变量、字段......）并进行比较，但获取指向数据的唯一方法是适当地转换它。不适当的强制转换是未定义的行为，可能会使您的程序崩溃。

至于`*`类型中表示指针之前或之后的空格，它是一种样式。空格不是很重要，除了作为标记分隔符（并且`*`本身就是一个标记）。

我强烈建议与间距保持一致。您可以使用诸如`indent`缩进您的源代码之类的工具（并将`-T`选项传递给它有助于很好地缩进类型名称）。GNU`indent`工具正在对空间进行规范化，并且有许多选项可以调整其行为（您可以将它们放在一个`.indent.pro`文件中）。对于 C++ 代码，请考虑使用`astyle`而不是`indent`.

# software-design - 如何为游戏进行 0 级 DFD？

> ID：11520519
> 
> 赞同：2
> 
> 时间：2012-07-17T10:22:47.937
> 
> 标签：software-design, dataflow-diagram

我正在为我正在创建的游戏创建数据流图，我在想 0 级 dfd 会是什么样子。到目前为止，我得出的结论是输入将是鼠标点击和键盘输入。这个过程就是游戏。但是我不知道输出会是什么，因为游戏是连续的，直到它结束然后没有输出。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-16T14:03:29.173

基本上你想做一个游戏，但你不知道要做什么......

好吧，这是我能为你做的最好的事情[https://obviam.net/posts/2010/05.basic-game-loop/](https://obviam.net/posts/2010/05.basic-game-loop/)它将帮助你理解和组织你的游戏循环。

别担心它上面写着android，基本概念是一样的，这是我手头上的一个链接......

# wcf - 是否可以将多个 web 服务消费到一个主要的 web 服务中？

> ID：11520520
> 
> 赞同：0
> 
> 时间：2012-07-17T10:22:48.237
> 
> 标签：wcf, web-services, web

我有几个 web 服务，我想将它们放入一个主要服务中，而不必引用多个 web 服务，我可以只引用一个主要 web 服务。这甚至是可能的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-17T12:31:41.420

是的。只要您遵循将合同与实施分开的标准做法，这不仅是可能的，而且也很容易。

只需将它们全部放入同一个类中，该类将实现您的所有合同。

这显然需要引用所有的合同，但是你只需要在其他地方使用这个服务引用

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-17T13:08:27.457

组合是一种常见的模式。

是的，这是可能的，但不确定从您的架构/产品的角度来看是否可以。如果您的服务必须在单个“事务”中运行，那么您可能必须检查补偿机制是否仍然存在，以防某些步骤失败。

# java - 不可变的 java 对象

> ID：11520528
> 
> 赞同：1
> 
> 时间：2012-07-17T10:23:32.933
> 
> 标签：java, design-patterns, bigdecimal

今天，当我阅读有关 BigDecimal 类的一些文档时，我偶然发现了一个基本属性，BigDecimal 类是不可变的。

我如何向祖母解释不变性概念？

类的不变性的优缺点是什么？

扩展类可以变得可变吗？

考虑到我想用我的班级扩展 BigDecimal：

```
`MyBigDecimal extends BigDecimal` 
```

扩展是否违反了基本的面向对象设计原则？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-07-17T10:30:17.220

> 我如何向祖母解释不变性概念？

检查这个问题：[什么是不可变的意思](https://stackoverflow.com/questions/279507/what-is-meant-by-immutable)

或来自有效的 Java：

> 不可变类是不能修改其实例的类。每个实例中包含的所有信息都是在创建时提供的，并且在对象的生命周期内是固定的。

* * *

> 类的不变性的优缺点是什么？

优点：

*   更容易推断对象的状态，因为只有一个，即在初始化时建立的状态
*   推论：不可变对象在并发编程中更容易使用，其中状态就是一切

缺点：

*   当您想更改对象的属性时，您需要创建一个新的 = 昂贵
*   构造可能更复杂（cf builder 模式）

* * *

> 扩展类可以变得可变吗？

是的 - 这就是为什么不可变类应该成为最终类的原因（或者，将所有构造函数设为私有并提供工厂来创建新对象）。

**BigDecimal 是创建不可变类时不应**做的一个很好的例子（它可以扩展，这可能会导致您在问题中提到的问题）。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-17T10:32:02.500

一个实例永远不会改变的不可变类。对象的状态是在构造时定义的，之后永远不会改变。

为了正确地不可变，该类不提供任何方式（除了反射）来改变其状态：没有设置方法，没有改变其内部状态的方法，没有允许访问它持有的可变字段的方法。它也应该是最终的（BigDecimal 应该是），以防止任何其他类扩展它，从而通过添加可变字段使其可变。

优点很多：

*   类很容易理解
*   实例本质上是线程安全的
*   可以缓存实例而不需要从缓存中返回副本
*   实例可以用作 Map 中的键，而不必担心之后被更改

它不违反 OO 原则：相反，状态完全封装在对象中。

注意：一些不可变对象在内部改变它们的状态（例如一些字段的延迟初始化），而不影响对象的外部可见状态。如果处理得当，它不会改变不可变对象的线程安全性。如果操作不正确，可能会使它们成为非线程安全的。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-07-17T10:32:52.413

BigDecimal 是一个值类。它代表了来自“现实世界”的价值。让我们以整数为例。42 的值始终为 42。它的状态不能更改。如果我想要 43，它不是 42 的更改值，而是 43 的值。这个抽象的值概念通过使用不可变类在面向对象的世界中传递。如果您想向现有的数字添加一个数字，它不会更改，但会创建一个包含结果的新不可变对象。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-17T10:29:21.860

> 类的不变性意味着如果创建了对象，则无法更改其内容。

考虑例如

```
String str = "Hello"; // you can not change content Hello to any other string 
```

优点和缺点 `immutability of a class`-[优点。/缺点。不变性与可变性](https://stackoverflow.com/questions/1863515/pros-cons-of-immutability-vs-mutability)

> 扩展类可以变得可变吗？

是的，你可以做到。

> `MyBigDecimal extends BigDecimal`

你能做到`BigDecimal`的不是最终的。

# jquery - jQuery 可排序，包含父级和不同的项目高度

> ID：11520532
> 
> 赞同：3
> 
> 时间：2012-07-17T10:23:42.530
> 
> 标签：jquery, jquery-ui, jquery-ui-sortable

*[请与此jsFiddle](http://jsfiddle.net/b2Q9b/12/)一起阅读此问题。*

我有一个 jQuery 可排序列表，我想在拖动时包含父容器中的项目 - 没问题 - 我使用该`containment:'parent'`选项。

**但是，当第二个项目的高度大于第一个项目的高度时，我无法将第二个项目拖到第一个位置。**

我尝试使用附加选项`tolerance:'pointer'`（我的偏好）但未成功，它也不适用于默认的`tolerance:'intersect'`.

我从[文档](http://docs.jquery.com/UI/Sortable#option-tolerance)中了解到，这是预期的行为，`tolerance`并且在项目具有相同高度时工作得非常好。

**对于第二个项目的高度大于第一个项目的情况，是否有解决方法？**

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-18T08:42:43.010

添加选项`cursorAt: { top:1 }`可以解决问题。链接到[文档](http://jqueryui.com/demos/sortable/#option-cursorAt)。

不幸的是，我随后发现在尝试将高项目拖到列表底部时存在同样的问题。

`_intersectsWithPointer`最后我的解决方案是破解`jquery.ui.sortable.js`.

我已更换：

`var c = this.options.axis === "x" || a.ui.isOverAxis(this.positionAbs.top + this.offset.click.top, b.top, b.height),`

和：

`var c = this.options.axis === "x" || a.ui.isOverAxis(this.positionAbs.top + (this._getDragVerticalDirection() == "up" ? 0 : this.helperProportions.height), b.top, b.height),`

现在向上或向下拖动任何高度的任何项目都可以正常工作。

# parent - visualforce 从子级重新渲染父页表

> ID：11520533
> 
> 赞同：0
> 
> 时间：2012-07-17T10:23:42.327
> 
> 标签：parent, visualforce, rerender

我想通过单击子窗口上的按钮来刷新父窗口的一部分（不是整个页面）。

就像 action="action name" rerender="id" 只在一页上。

但是从子窗口，是否可以重新渲染父页面部分（在我的情况下是表格）？

请帮忙。

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-19T16:20:48.610

是的。简单地：

```
rerender="ioOfParentComponent" 
```

但是，这仅适用于同一页面。如果您在谈论 IFrame，那么这将不起作用。但是在同一个`<apex:page > </apex:page>`块内，这将起作用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-08T15:42:35.813

如果您想从子级刷新父窗口，并且子级是一个弹出窗口，并且两个页面都是自定义的 visualforce 页面 - 根据 javascript 回调执行此操作：

父窗口：

```
<apex:actionFunction name="callBackFunction" reRender="refreshMe" action=""/>

<apex:outputPanel id="refreshMe">
    Some text here...
</apex:outputPanel> 
```

子窗口（弹出）：

```
<apex:commandButton onClick="javascript:parent.window.opener.callBackFunction(); return false;" value="Refresh parent" /> 
```

# windows - 在调度程序中自动运行时，PowerShell 脚本无法正确通过电子邮件发送 Excel 报告文件

> ID：11520534
> 
> 赞同：0
> 
> 时间：2012-07-17T10:23:45.477
> 
> 标签：windows, excel, powershell, scheduled-tasks, task

当我手动运行 PowerSheel 脚本时 - 通过使用 PowerShell 解释器执行它的 .bat 文件 - 它正确执行 SQL 查询并创建一个 Excel 文件并通过电子邮件发送它。

如果我将其自动化 - 每晚通过 Windows 作业调度程序运行 .bat 文件，该文件使用解释器运行 PowerShell 文件 - 然后发送的电子邮件没有文件。

在这里复制代码很困难，因为我制作了一个很好的框架，其中包含许多具有 lambda 函数和所有功能的深度，但通常：

$ExcelWorkBook.SaveAs($文件名)

$ExcelWorkBook.Close()

$ExcelApp.Quit()

(...)

睡眠 - 秒 500

(...)

$MailMessage.Attachments.Add($Filename)

$SMTP.Send($MailMessage)

我听说 Excel 实际上并不支持无 GUI 自动化（Windows 任务调度程序），但实际上通过不同的框架对我有用。

如果不能以其他方式从 PowerShell 生成 Excel 文件，或者如何在 PowerShell 中轻松生成并通过电子邮件发送报告，我该怎么做才能使其工作？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-30T09:33:41.767

@Dan 是的，我愿意。CSV 对于企业报告来说是一种非常糟糕的报告格式，没有颜色，没有格式，什么都没有。经理在他的收件箱中发现它会受到侮辱。

@VonPryz - 但手动它可以工作！所以你说调试调度？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-28T22:30:13.957

如果您运行的是 Windows 2008 或更高版本，那么该作业可能在 session0 中执行（请参阅 microsoft 中的 session0 隔离）。

您必须为 session0 创建桌面文件夹，在此处阅读更多信息：http: [//social.msdn.microsoft.com/Forums/en/innovateonoffice/thread/b81a3c4e-62db-488b-af06-44421818ef91](http://social.msdn.microsoft.com/Forums/en/innovateonoffice/thread/b81a3c4e-62db-488b-af06-44421818ef91)

Windows 2008 Server x64 请将此文件夹设为 C:\Windows\SysWOW64\config\systemprofile\Desktop

Windows 2008 Server x86 请将此文件夹设为 C:\Windows\System32\config\systemprofile\Desktop

然后重新启动机器并重试。我通过任务计划程序和 powershell 使用无 GUI 的 Excel 自动化，通过创建这些文件夹来完成。

# objective-c - UIImagePicker 前置摄像头在 iPad 方向上的奇怪行为

> ID：11520541
> 
> 赞同：1
> 
> 时间：2012-07-17T10:24:09.417
> 
> 标签：objective-c, ipad, camera

**设想**

`Front camera`倒计时 3 秒后自动捕捉图像的应用程序。一切都按预期工作。

**代码**

//在`viewDidLoad`

```
 if ([UIImagePickerController isSourceTypeAvailable:UIImagePickerControllerSourceTypeCamera]){
    imagePicker = [[UIImagePickerController alloc] init];
        self.imagePicker.sourceType =  UIImagePickerControllerSourceTypeCamera;
self.imagePicker.cameraDevice = UIImagePickerControllerCameraDeviceFront;
self.imagePicker.delegate = self;
self.imagePicker.showsCameraControls = NO;
[self.imagePicker.view setFrame:kAppFrame];
[self.view addSubview:self.imagePicker.view];
[self.view bringSubviewToFront:self.imagePicker.view];
} 
```

**问题** 我从未告诉 ipad 使用其后置设备 在某些情况下，后置摄像头仍会启动。

**重现步骤**

1.  拿着相机进去`Landscape orientation`
2.  单击一张照片（将带您到下一个屏幕，在导航控制器中推送）
3.  在下一个屏幕中，将 ipad 倾斜一半`face up orientation`
4.  回到摄像头屏幕，您可以使用后置摄像头看到它。

这是一种非常奇怪的行为，我什至无法理解其原因。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-18T06:46:01.657

检查您的代码，该行`self.imagePicker.cameraDevice = UIImagePickerControllerCameraDeviceFront;` 定义您打开设备的前面板。

现在您的第二个问题：我不确定，但您必须将图像旋转 90 度。可能是当您获得图像时，它会处于纵向模式。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-23T19:07:59.017

看起来我已经找到了解决方案。只是将整个代码移动到`viewWillAppear`from`viewDidLoad`方法。

在它以特定方向出现之前，我似乎非常依赖视图。将代码放入`viewWillAppear`可以保证视图实际上已准备好其方向设置。我现在可以在上面放任何东西。

我知道这不是正确的答案，但这是我从场景中得出的。欢迎任何修改/更正。

# android - 如何在 ViewPager 中正确更新/重新加载更改的框架？

> ID：11520546
> 
> 赞同：1
> 
> 时间：2012-07-17T10:24:20.780
> 
> 标签：android, android-layout, android-viewpager

我遵循教程并设法构建了一个具有三个框架的 ViewPager。我还注册了一个按钮的点击次数（使用 xml onClick），并且每次都将按钮的文本更改为“点击次数：1”、“点击次数：2”等......我唯一没有成功的是立即更新 ViewPager 以显示按钮的新文本（按钮永远不会更新）。

我的主要灵感来源： http:
[//thepseudocoder.wordpress.com/2011/10/05/android-page-swiping-using-viewpager/](http://thepseudocoder.wordpress.com/2011/10/05/android-page-swiping-using-viewpager/)

这是我的片段活动：

```
package com.fragmentviewpager;

import java.util.List;
import java.util.Vector;

import android.os.Bundle;
import android.support.v4.app.Fragment;
import android.support.v4.app.FragmentActivity;
import android.support.v4.view.ViewPager;
import android.util.Log;
import android.view.View;
import android.view.View.OnClickListener;
import android.view.ViewGroup;
import android.widget.Button;

public class MainActivity extends FragmentActivity {

    private PagerAdapter pagerAdapter;

    ViewPager pager;

    Button buttonLeft;
    int clickCounter = 0;

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.viewpager_layout);

        pager = (ViewPager) findViewById(R.id.viewpager);

        buttonLeft = (Button) findViewById(R.id.buttonLeft);

        //initialise the viewpager
        initialisePaging();
    }

    private void initialisePaging() {

        List<Fragment> fragments = new Vector<Fragment>();
        fragments.add(Fragment.instantiate(this, FragmentLeft.class.getName()));
        fragments.add(Fragment.instantiate(this, FragmentMiddle.class.getName()));
        fragments.add(Fragment.instantiate(this, FragmentRight.class.getName()));

        pagerAdapter = new PagerAdapter(getSupportFragmentManager(), fragments);

        pager.setAdapter(this.pagerAdapter);
        pager.setCurrentItem(1);
    }

    // THIS IS THE PLACE WHERE I NEED TO ADD SOMETHING FOR WANTED RESULT
    public void buttonClick(View v) {
        ++clickCounter;
        buttonLeft.setText("Clicks: " + clickCounter);
    }

    @Override
    public void onClick(View arg0) {
        // TODO Auto-generated method stub

    }

} 
```

这是我的 FragmentPageAdapter：

```
package com.fragmentviewpager;

import java.util.List;

import android.support.v4.app.Fragment;
import android.support.v4.app.FragmentManager;
import android.support.v4.app.FragmentPagerAdapter;
import android.view.ViewGroup;

public class PagerAdapter extends FragmentPagerAdapter {

    private List<Fragment> fragments;

    public PagerAdapter(FragmentManager fm, List<Fragment> frags) {
        super(fm);
        fragments = frags;
    }

    @Override
    public Fragment getItem(int position) {
        return fragments.get(position);
    }

    @Override
    public int getCount() {
        return fragments.size();
    }
} 
```

我试过做类似的事情

```
pagerAdapter.notifyDataSetChanged(); 
```

和

```
pagerAdapter.startUpdate((ViewGroup)findViewById(R.layout.viewpager_layout));
pagerAdapter.instantiateItem((ViewGroup)findViewById(R.layout.viewpager_layout), 0);
pagerAdapter.finishUpdate((ViewGroup)findViewById(R.layout.viewpager_layout)); 
```

但似乎没有任何效果，我怀疑我误解了 ViewPager 或 Fragments 本质上的一些重要内容。

我读过这个问题[ViewPager PagerAdapter not updates the View](https://stackoverflow.com/questions/7263291/viewpager-pageradapter-not-updating-the-view)但这只会让我更加困惑。我猜 alvarolb 可能正在做某事，但我无法在我的代码中实施他的建议。

# c# - 使用 MiniProfiler.Current.AddProfilerResults 版本 2 及更高版本进行异步分析

> ID：11520547
> 
> 赞同：1
> 
> 时间：2012-07-17T10:24:24.353
> 
> 标签：c#, asynchronous, mvc-mini-profiler

在迷你探查器 1.9 版中，[我找到了一种将异步 DB 调用的 SQL 计时纳入探查器结果的方法](https://stackoverflow.com/a/8574227/905)。基本上，我在`ContinueWith`异步任务中添加了一个，然后将所有 SQL 计时添加到启动异步操作的步骤中：

```
foreach (var sqlTiming in completedResult.SqlTimings)
{
    currentStep.AddSqlTiming(sqlTiming);
} 
```

但是，这在 2.0.2 中不再有效——那些 SQL 计时就消失了。似乎有一种新方法可以完全满足我的要求（[source](https://github.com/SamSaffron/MiniProfiler/blob/master/StackExchange.Profiling/MiniProfiler.cs)，第 487 行）：

```
/// <summary>
/// Adds <paramref name="externalProfiler"/>'s <see cref="Timing"/> hierarchy to this profiler's current Timing step,
/// allowing other threads, remote calls, etc. to be profiled and joined into this profiling session.
/// </summary>
public static void AddProfilerResults(this MiniProfiler profiler, MiniProfiler externalProfiler)
{
    ... 
```

所以看起来这就是我现在应该做的：

```
MiniProfiler.Current.AddProfilerResults(profilerFromAsyncTask); 
```

但是，虽然这不会引发错误，但它似乎根本没有给结果添加任何东西。我可以通过以下方式获得出现在步骤中的步骤：

```
currentStep.AddChild(profilerFromAsyncTask.Root) 
```

但是，这仍然会丢弃 SQL 计时，并导致启动异步任务的步骤出现负数。

我需要做些什么来让 AddProfilerResults 的结果与 SQL 计时一起出现吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-17T10:30:17.143

异步*当前*不是mini-profiler 积极支持或测试的场景。在有一个*支持*的机制来做到这一点之前，我不愿意深入挖掘以找到一种方法来破解它，只是为了让这种破解随着下一次变化而消失。从长远来看，异步是我们*应该*处理的事情——到目前为止，它还不是必需的。

我怀疑您最好的选择是在项目站点上创建一个建议（或对现有建议添加评论）。或者甚至更好：找出一种机制来做到这一点（它可以在不破坏任何东西或有风险的情况下工作）并提交一个变更集。

# windows-7 - sharepoint server 2010 配置错误

> ID：11520560
> 
> 赞同：0
> 
> 时间：2012-07-17T10:24:49.673
> 
> 标签：windows-7, sharepoint-2010, installation

我需要在具有 64 位 Windows 7 操作系统的开发人员电脑上安装 sharepoint server 2010。[我遵循了http://msdn.microsoft.com/en-us/library/ee554869.aspx](http://msdn.microsoft.com/en-us/library/ee554869.aspx)上的微软说明 让我来描述一下。我将所有文件从 CD 复制到我的 D: 驱动器。更改了 D:\SharePoint Server 2010\Files\Setup 中的配置并添加了标记“”。手动安装了先决条件。对 Windows 功能进行了指定的更改，并运行 setup.exe 文件。选择“独立”作为安装类型。安装成功完成。

运行配置向导时，我收到消息“配置失败”，提示“无法创建配置数据库”。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-24T18:55:29.757

在为 SharePoint 安装本地开发时，我遇到了这种情况。此链接可能会有所帮助。[http://myspexp.com/2010/05/31/configuration-failed-when-installing-sp-2010-on-windows-7-failed-big-time-3](http://myspexp.com/2010/05/31/configuration-failed-when-installing-sp-2010-on-windows-7-failed-big-time-3)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-07-25T07:00:11.917

运行配置向导时，我收到消息“配置失败”，提示“无法创建配置数据库”。

请关注 [http://www.microsoft.com/downloads/details.aspx?FamilyID=eb9c345f-e830-40b8-a5fe-ae7a864c4d76&displaylang=en#filelist](http://www.microsoft.com/downloads/details.aspx?FamilyID=eb9c345f-e830-40b8-a5fe-ae7a864c4d76&displaylang=en#filelist)

安装 Windows 更新，安装将正常工作

在 Windows 7 上安装 sharepoint

请关注 [http://msdn.microsoft.com/en-us/library/ee554869(office.14)](http://msdn.microsoft.com/en-us/library/ee554869(office.14))

# css - 谷歌 Chrome 开发者工具没有显示检查的元素样式？

> ID：11520563
> 
> 赞同：8
> 
> 时间：2012-07-17T10:24:56.583
> 
> 标签：css, google-chrome, google-chrome-devtools, web-inspector

我正在使用 google chrome 开发者工具来测试我的网站；

它对某些元素工作正常，但对于其他元素，它显示选择器但显示它没有样式；该元素确实具有样式，并且样式应用于该元素。但检查员没有显示任何样式。

如果我单击该检查器的 css 文件行的链接，我可以在那里看到样式。

我看到一个谷歌小组主题，指出[删除任何空`url()`声明](https://groups.google.com/forum/?fromgroups#!topic/google-chrome-developer-tools/Z_TLvpOXrMg)修复了该错误。但是我没有空的`url()`声明。

我还发现[了这个有点相似的错误](http://code.google.com/p/chromium/issues/detail?id=136648)；但不完全相同。我确实注意到的一件事是这个错误提供的用例和我的设置都使用了 twitter-bootstrap。我正在使用 .less 版本的引导程序，其中包括引导程序到单个 css 文件中作为复制 > 粘贴方法，所以我的 css 文件有**3740 行**。这可能是问题的一部分吗？

元素没有深度嵌套 ( `body > div#container > inspected element`)。
没有过多的样式应用于元素（<= 10）。

* * *

[点击放大![开发工具示例](../Images/09a476dec2c735520aae06093152b232.png)](https://i.stack.imgur.com/H6lEM.png)

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-17T10:59:35.193

好的，所以我也发现[了这个错误](http://code.google.com/p/chromium/issues/detail?id=136901)，看起来它与错误更匹配。
它指出

> 当 CSS 中存在无法识别的伪类时，DevTools 会中断

twitter-bootstrap 可以做到的！因此，如果您使用 twitter 引导程序（或任何尝试使用特定于供应商的伪类），那么开发工具似乎已损坏。afaik 解决此问题的唯一方法是等待开发人员解决此错误。

如果有人可以为此发布修复程序，我会接受他们的回答！

# php - php中的json解析有问题

> ID：11520565
> 
> 赞同：3
> 
> 时间：2012-07-17T10:25:01.060
> 
> 标签：php, json

我收到以下 JSON 响应：

```
[
    {
        "startDate": "2012-07-12 11:21:38 +0530",
        "totalTime": 0
    },
    {
        "startDate": "2012-07-11 11:27:33 +0530",
        "totalTime": 0
    },
    {
        "startDate": "2012-07-16 18:38:37 +0530",
        "totalTime": 0
    },
    {
        "startDate": "2012-07-17 14:18:32 +0530",
        "totalTime": 0
    }
] 
```

我想制作startDate和totalTime的数组，我已经使用了这两行但它不起作用，请建议..

```
 $obj  = json_decode($dateTimeArr); 
    $dateAr = $obj->{'startDate'}; 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-17T10:28:04.683

您的 JSON 字符串代表一个数组或对象。数组的每一项都是一个对象，例如`{"startDate":"2012-07-12 11:21:38 +0530","totalTime":0}`.

所以`json_decode($dateTimeArr);`返回数组。如果要访问第一个元素，可以使用`$obj[0]`语法。然后要获取 startDate 属性，请使用`$obj[0]->startDate`.

您可以使用以下方法迭代所有数组的项目`foreach`：

```
foreach ($obj as $item) {
    echo $item->startDate, "\n";
} 
```

# python - 使用inspect将参数传递给Python中的函数

> ID：11520567
> 
> 赞同：1
> 
> 时间：2012-07-17T10:25:09.937
> 
> 标签：python, reflection, introspection, inspect

我有一个 Python 脚本，它创建一个包含自己函数的字典，我希望它通过使用 YARP 读取函数名称和参数来执行它们（尽管 YARP 的知识与这个问题无关）。

我创建了一个名为“inc”的字符串列表，该列表由进入程序的值填充。第一项是函数名，列表中的任何其他字符串都是参数。我创建了一个名为“methods”的字典，其中键是函数名，值是对函数对象的引用（使用检查模块）。我将函数的返回值存储在变量“结果”中。

下面的代码片段显示了我目前使用的简化版本，它运行良好，但无法处理具有多个参数的函数。为了避免这种情况，如果函数需要更多参数，我会使用列表：

```
if len(inc) == 1:
    result = methods[inc[0]]()   # call method with 0 arguments

elif len(inc) == 2:
    result = methods[inc[0]](inc[1])    # call method passing a string

else:
    args = []
    result = methods(inc[0])(inc[1:])    # call method passing a list 
```

理想情况下，我想改变它，以便我的函数可以有任意数量的参数，但我不知道如何做到这一点。我是 Python 新手，我查看了文档和各种网站 - 我只是找不到解决方案。我尝试过创建参数元组之类的方法，但这也不起作用，因为它最终将整个元组作为一个参数传入。

这个问题有没有更好的解决方案，比如创建某种代表一组参数的对象并将其传递给函数？任何建议将不胜感激！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-17T10:32:45.107

您应该查看[https://stackoverflow.com/a/3394898/1395668](https://stackoverflow.com/a/3394898/1395668)。

您正在寻找的魔法是 *. 将此应用于您的列表，并将项目解压缩到函数的参数字段中：

```
a = [ 1, 2, 3]
def myfunc(a, b, c):
    return a + b + c

print myfunc(*a) 
```

查看 ** 以获取与 dict 相同的方法

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-17T10:32:00.340

有这种混合结构有点奇怪：

```
inc = [func_name, arg1, arg2, ...] 
```

*拥有两个*独立的信息不是更自然吗？

```
func_name = ...
args = [arg1, arg2, ...] 
```

你可以做的

```
methods[func_name](*args) 
```

（通常，我不会将函数名称绑定到变量，但最好是函数本身。）

# php - 如何匹配未引用的东西？

> ID：11520568
> 
> 赞同：1
> 
> 时间：2012-07-17T10:25:10.653
> 
> 标签：php, regex, regex-negation

我有以下 RegEx 从 PHP 文件中删除评论： `%/\*.*?\*/%s`

副作用是，使用`glob`like`glob($basedir . '/*')`它开始删除所有中间代码......

那么，当正则表达式前面或后面有引号时，我如何告诉它不匹配呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-19T08:02:39.233

尝试这个 ：

```
%[^'"]{1}/\*.*?\*/[^'"]{1}%s 
```

它包括在 /* 之前和 */ 之后的非单引号或双引号

# google-app-engine - GoogleAppEngine 错误：rdbms_mysqldb.py:74

> ID：11520573
> 
> 赞同：3
> 
> 时间：2012-07-17T10:25:31.017
> 
> 标签：google-app-engine, python-2.7

尝试在 GoogleAppEngine 上执行 HelloWorld，但出现以下错误。

`C:\LearningGoogleAppEngine\HelloWorld>dev_appserver.py helloworld WARNING 2012-07-17 10:21:37,250 rdbms_mysqldb.py:74] **The rdbms API is not available because the MySQLdb library could not be loaded.** Traceback (most recent call last):`

`File "C:\Program Files (x86)\Google\google_appengine\dev_appserver.py", line 133, in run_file(**file**, globals())`

`File "C:\Program Files (x86)\Google\google_appengine\dev_appserver.py", line 129, in run_file execfile(script_path, globals_)`

`File "C:\Program Files (x86)\Google\google_appengine\google\appengine\tools\dev_appserver_main.py", line 694, in sys.exit(main(sys.argv))`

`File "C:\Program Files (x86)\Google\google_appengine\google\appengine\tools\dev_appserver_main.py", line 582, in main root_path, {}, default_partition=default_partition)`

`File "C:\Program Files (x86)\Google\google_appengine\google\appengine\tools\dev_appserver.py", line 3217, in LoadAppConfig raise AppConfigNotFoundError google.appengine.tools.dev_appserver.AppConfigNotFoundError`

我在 GoogleCode、StackO 上找到了关于这个问题的帖子。但无论我尝试什么，我仍然无法克服这个错误。
Windows 7 机器上安装的 Python 版本为：2.7.3
GAE Launcher 启动画面显示如下：
Release 1.7.0
Api 版本：['1']
Python：2.5.2
wxPython：2.8.8.1(msw-unicode)

有人可以帮忙吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-18T03:00:23.230

已经有一段时间了，但我相信我之前已经通过添加`import rdbms`到 dev_appserver.py 来解决这个问题

嗯..还是那样`import MySQLdb`？（更倾向于）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-18T09:41:27.023

运行时需要设置为“Python27”，而不仅仅是“Python”，并且需要将线程安全设置为 false，这是我的**app.yaml**

```
application: helloworld
version: 1
runtime: python27
api_version: 1
threadsafe: false

handlers:
- url: /.*  
  script: helloworld.py 
```

这是我的**helloworld.py**

```
print 'Content-Type: text/plain'
print ''
print 'Hello, world!' 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-20T13:43:53.107

只是有完全相同的错误消息：我发现重新启动 Windows 修复了所有问题，而且我不必偏离 google helloworld python 教程中给出的 YAML 或 py 文件。

# php - Woocommerce / Wordpress 将按钮添加到页面

> ID：11520576
> 
> 赞同：0
> 
> 时间：2012-07-17T10:25:37.130
> 
> 标签：php, wordpress, woocommerce

我正在将 woocommerce 用于 wordpress 主题，除了一件事，我可以弄清楚所有事情

我如何添加此按钮（网站上的手册）

[http://www.fashiolista.com/content/fashiolista-button/](http://www.fashiolista.com/content/fashiolista-button/)

到 woocommerce 中的产品页面（添加到购物车按钮旁边）？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-03T11:09:30.750

您需要在您的主题模板中编辑 share.php。如果您的主题没有它，那么您必须创建它，您可以在那里添加自定义按钮。

# c# - 将 C# DateTime 值传递到 SQL Server 存储过程时出错

> ID：11520577
> 
> 赞同：0
> 
> 时间：2012-07-17T10:25:38.537
> 
> 标签：c#, sql-server

我在将 C# DateTime 值传递给 SQL Server 2005 存储过程时遇到问题。

存储过程接受类型参数`DateTime`并使用传递的值更新数据库列（列也是`datetime`类型）：

```
ALTER PROCEDURE [dbo].[ProcedureName]
    @id int,
    @eta datetime
AS
BEGIN
    -- SET NOCOUNT ON added to prevent extra result sets from
    -- interfering with SELECT statements.
    SET NOCOUNT ON;

    BEGIN TRANSACTION

    UPDATE
            TrackingTable
    set 
        ETA = @eta
    where 
        ID = @id

    COMMIT TRANSACTION
END 
```

`datetime`我通过创建`SqlParameter`并执行参数化非查询将 C#值传递给存储过程。

我可以通过分析器看到执行的 SQL 是：

```
exec ProcedureName @id=19020, @eta='2012-07-17 10:29:34:000' 
```

如果我直接在数据库上执行此更新工作正常，但通过我的 C# 程序失败并出现错误：

> 将 char 数据类型转换为 datetime 数据类型会导致 datetime 值超出范围。该语句已终止。

我确定我很愚蠢，但我一辈子都看不出有什么问题。PS 我是 SQL Server 的新手！

任何帮助表示赞赏！谢谢。

对不起c#代码：

```
dbWrapper.ExecuteProcWithParams("ProcedureName", 
                dbWrapper.CreateParameter("id", Header.VoyageID),
                dbWrapper.CreateParameter("eta", ETA) 
```

ETA 是一个日期时间值。

```
public void ExecuteProcWithParams(string procName, params DbParameter[] parameters)
{
    try
    {
            using (DbCommand cmd = db.CreateCommand())
            {
                cmd.Transaction = trans;
                cmd.CommandText = procName;
                cmd.CommandType = CommandType.StoredProcedure;

                foreach (DbParameter param in parameters)
                {
                    cmd.Parameters.Add(param);
                }

                cmd.ExecuteNonQuery();
            }
    }

    catch (Exception)
    {
        throw;
    }
}

public DbParameter CreateParameter(string name, object value)
 {
        DbParameter result = null;

        switch (databaseType)
        {
            case DatabaseType.SqlServer:
                // Sql Server: NULL parameters have to initialised with DBNull rather than NULL
                result = new SqlParameter(name, value ?? DBNull.Value);                   
                break;
            default:
                throw new Exception(String.Format("Unknown database type {0}", databaseType));
        }

        return result;
 } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-17T10:36:08.060

尝试在 web.config 中设置 uiculture 和culture。

```
<globalization uiCulture="en-GB" culture="en-GB"/> 
```

您的传递日期格式和 sql 日期可以不同。因此，根据您的文化设置文化。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-07-24T20:03:29.670

我刚遇到类似的问题哥们！

这是因为`C#`转换`date time`为`MM-DD-YYY`SQL server 生成`date time`基于`DD-MM-YYYY`.

这就是为什么您会在您的月份出现越界错误。

# zend-framework - 谷歌配置文件的 Zend oauth 范围

> ID：11520578
> 
> 赞同：0
> 
> 时间：2012-07-17T10:25:46.310
> 
> 标签：zend-framework, oauth

有人可以告诉我使用zend oauth php获取谷歌用户帐户的个人资料图片的范围是什么

```
require_once 'Zend/Oauth/Consumer.php';
        $SCOPES = array(
            'https://www.googleapis.com/auth/userinfo#email',
            'https://mail.google.com/',
            'http://www.google.com/calendar/feeds/',
            'https://www.google.com/m8/feeds/'
        ); 
```

当我给[https://www.googleapis.com/auth/userinfo#profile](https://www.googleapis.com/auth/userinfo#profile)时，它​​抛出错误

任何帮助将非常感激

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-18T09:07:04.360

范围的正确名称`userinfo`是：

```
https://www.googleapis.com/auth/userinfo.email
https://www.googleapis.com/auth/userinfo.profile 
```

我认为[OAuth 2.0 Playground](https://code.google.com/oauthplayground/)提供了最完整的 Google OAuth 范围概述。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-18T10:05:24.630

尝试使用句号而不是井号。我能够在[http://googlecodesamples.com/oauth_playground/的 OAuth 1 操场上成功地验证](http://googlecodesamples.com/oauth_playground/)[https://www.googleapis.com/auth/userinfo.profile](https://www.googleapis.com/auth/userinfo.profile)。如果这不起作用，请将您的请求与游乐场中的等效请求进行比较。

# c# - 用户控件的动态填充

> ID：11520579
> 
> 赞同：0
> 
> 时间：2012-07-17T10:25:48.283
> 
> 标签：c#, asp.net

我有一个自定义用户控件，它是一个下拉框，旁边有一个按钮。

```
<asp:Panel ID="pnlSelect" runat="server">        
        <asp:Label ID="lblNameSelect" runat="server" Text="Name"></asp:Label>:&nbsp;
        <asp:DropDownList ID="ddlDivision" runat="server"></asp:DropDownList>&nbsp;
        <asp:Button ID="btnSubmit" runat="server" Text="Submit" onclick="btnSubmit_Click" />
</asp:Panel> 
```

我需要在运行时创建它。

```
 UserControl.UCDropDownBox drpDivision = LoadControl("~/UserControl/UCDropDownBox.ascx") as UserControl.UCDropDownBox;
        drpDivision.ID = "drp1";
        drpDivision.LabelText = "Division";
        drpDivision.DataSource = dt;
        drpDivision.DataTextField = "colDescription";
        drpDivision.DataValueField = "colValue";
        phFormContent.Controls.Add(drpDivision); 
```

现在我想在单击第一个用户控件的按钮时生成下一个用户控件（相同的用户控件），以便我可以从第一个用户控件中获取 selectedvalue。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-17T10:34:25.033

如果您将 UserControl 放在中继器中，这会不会容易很多？

```
<asp:Repeater ID="multiControls" runat="server">
<ItemTemplate>
  <asp:Panel ID="pnlSelect" runat="server">        
        <asp:Label ID="lblNameSelect" runat="server" Text="Name"></asp:Label>:&nbsp;
        <asp:DropDownList ID="ddlDivision" runat="server"></asp:DropDownList>&nbsp;
        <asp:Button ID="btnSubmit" runat="server" Text="Submit" onclick="btnSubmit_Click" />
  </asp:Panel>
</ItemTemplate>
</asp:Repeater> 
```

然后，您可以将对象集合绑定到中继器。采用这种方法，要解决您的问题，您需要做的就是：-

1.  将新项目添加到集合
2.  重新绑定中继器

这不仅极大地简化了新用户控件对象的创建，而且还使加载以前保存的数据变得更加容易。

# plc - 通过 CAN/CANopen 从 PC 连接到 PLC

> ID：11520583
> 
> 赞同：0
> 
> 时间：2012-07-17T10:25:54.543
> 
> 标签：plc, canopen

首先，我不得不说我对 Linux 和 CAN/CANopen 都不是很有经验，所以如果这里有什么不清楚或遗漏任何关键的东西，请告诉我。

我有一个项目需要通过 CAN/CANopen 将 PC 连接到 PLC。我有一个 CAN-USB 转换器 (canusb.com) 和 Festo 的 PLC。

我已经编译了 CANopen 堆栈（CanFestival），但我该从哪里开始呢？它看起来非常复杂，我真的完全不明白。

（我的第一个目标是通过 CAN 适配器与 PLC 建立联系，并以某种方式验证它们是否能够通话。主要目标是能够通过设置一些寄存器来打开和关闭 PLC 上的一些阀门。 )

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-18T10:15:33.590

I'm familiar with CANopen, having written a stack and designed devices for it. In my opinion, this is going to be a major learning curve for you and will most likely take weeks of work. Most PLCs support most, if not all, fieldbus protocols. Does yours support [Modbus](https://en.wikipedia.org/wiki/Modbus)? If it does, then you'll be up and running in a day or two: Modbus is simple to program.

I was in the same situation as you last year, and keeping in mind my deep understanding of CANopen, that's how I handled it. That said, I don't work by the hour, and it was a fixed price job, so I was after the overall cheapest solution, and this required buying a PLC module that supported Modbus.

# c# - 事件/委托订阅的同步/阻塞程度如何？

> ID：11520587
> 
> 赞同：1
> 
> 时间：2012-07-17T10:26:28.177
> 
> 标签：c#, .net, multithreading

这段代码在处理时间内将如何表现？（即，它有多同步？）

```
public delegate void FooDelegate(bytes[] data);
public event FooDelegate FooEvent;

FooEvent += new FooDelegate(Process_X);
FooEvent += new FooDelegate(Process_Y);
FooEvent += new FooDelegate(Process_Z);

while (receiving)
{     
   byte[] data = getRealTimeData();

   StopWatch.Start();

   FooEvent(data);

   StopWatch.Stop();

   Console.Write(StopWatch.Elapsed.Millisec));
   StopWatch.Reset();
} 
```

我有一些问题 ：

1.  对 FooEvent 的调用会导致顺序/同步调用每个订阅过程吗？（大概是...）
2.  假设每个 Process_N 需要很长时间才能完成，对每个 Process_N 的调用是否会阻塞链（即对下一个的调用）直到它完成？如果这是真的，如何使事件以并行方式调用 Processes X、Y、Z 然后等待它们全部完成，而不是一个一个地调用它们并依次等待每个完成？

一些确认：

1.  如果订阅者数量非常多，我猜秒表打印的时间会变高
2.  如果 Process_N 中的处理逻辑变重，也会影响 StopWatch 打印的 Time

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-17T10:39:09.257

1：是 2：是 它必须事件可能返回结果。

但是：你应该以某种方式实现你的事件处理程序，这样它们就不会花很长时间运行！如果他们必须做繁重的工作，请考虑在事件处理程序中启动的任务中运行计算。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-17T12:00:19.127

看起来您将从事件处理程序的并行化中受益，因为它们确实会按顺序和同步执行。

要创建自定义事件处理程序，您可以编写：

```
public event FooDelegate FooEvent
{
    add
    {
        // code to add an event handler
    }
    remove
    {
        // code to remove an event handler
    }
} 
```

有关如何使用自定义事件处理程序的更多信息，请参阅以下问题：

*   带有.NET 4+[的任务并行库的事件](https://stackoverflow.com/questions/7834130/events-with-task-parallel-library)
*   [如何并行处理事件](https://stackoverflow.com/questions/1516119/c-sharp-events-how-to-process-event-in-a-parallel-manner)
*   [C# 中的并行事件处理](https://stackoverflow.com/questions/6453655/parallel-event-handling-in-c-sharp)
*   等等

和 Jon Skeet 关于[代表和活动](http://www.yoda.arachsys.com/csharp/events.html)的页面。

# html - 在幻灯片中使用 onclick 覆盖 div -> onclick 不会改变

> ID：11520588
> 
> 赞同：1
> 
> 时间：2012-07-17T10:26:30.393
> 
> 标签：html, css

我在标题中的意思是，无论在淡入淡出风格的动画中哪个容器位于顶部（可见），“onclick”中的 href 总是相同的。

这是html

```
<div id="teaserslider">
                <ul>
                    <li>
                        <section id="container_1">
                            <div class="head gradient-top loading" onclick="document.location.href='container1_detail.html'">
                                <div>
                                  <!-- Content -->
                                </div>
                            </div>

                        </section>
                    </li>
                    <li class="animation">
                        <section id="container_2">
                            <div class="head gradient-top loading" onclick="document.location.href='container2_detail.html'">
                                <div>
                                  <!-- Content -->
                                </div>
                            </div>

                        </section>
                    </li>
                </ul>
            </div> 
```

这是CSS

```
#teaserslider{
   height: 100px;
   margin-bottom: 6px;
}

#teaserslider li {

   position: absolute;

   list-style: none;
   -webkit-transition: opacity 1s ease-in-out; 
}

@-webkit-keyframes fadeout{

0% {
    opacity:1;
}
45% {
    opacity:1;
}
55% {
    opacity:0;
}
100% {
    opacity:0;
}
}

#teaserslider li.animation {
   -webkit-animation-name: fadeout;
   -webkit-animation-timing-function: ease-in-out;
   -webkit-animation-iteration-count: infinite;
   -webkit-animation-duration: 5s;
   -webkit-animation-direction: alternate;
   -webkit-transform: translateZ(0);//hardware acceleration

} 
```

您可能已经注意到，我只使用 webkit 引擎，因为这段代码在 iOS 的 Phonegap 应用程序中运行。无论当前显示哪个容器，当我单击容器时，我总是会进入“container2_detail.html”。有谁知道如何解决这个问题？谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-17T10:37:18.243

可能您必须为其定义**z-index**。像这样写：

```
@-webkit-keyframes fadeout{

0% {
    opacity:1;
    z-index:1;
}
45% {
    opacity:1;
    z-index:1;
}
55% {
    opacity:0;
    z-index:-1;
}
100% {
    opacity:0;
    z-index:-1;
}
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-17T12:47:10.310

我试过这个，它似乎工作

```
@-webkit-keyframes fadeout{

0% {
    opacity:1;
    z-index: 1;
    display: block;
}
45% {
    z-index: 1;
    display: block;
    opacity:1;
}
55% {
    z-index: -1;
    display: none;
    opacity:0;
}
100% {
    z-index: -1;
    display: none;
    opacity:0;
} 
```

}

# android - 如何知道被叫方是否接听了电话（他拿起电话时的电话状态是什么）

> ID：11520590
> 
> 赞同：20
> 
> 时间：2012-07-17T10:26:33.447
> 
> 标签：android, telephonymanager, phone-call

我想知道如何在被叫方拨打电话时发出警报。我`PhoneStateListener` 和`BroadcastReceiver`.

一般有三种状态`CALL_STATE_IDLE , CALL_STATE_OFFHOOK, CALL_STATE_RINGING`。

`CALL_STATE_OFFHOOK`通话接通时状态为通话状态，被叫接听后未调用上述三种状态。

这是我的广播接收器。

```
public class PhoneStateBroadcastReceiver extends BroadcastReceiver
{

   @Override
    public void onReceive(Context context, Intent intent)
    {

        TelephonyManager telephonyManager = (TelephonyManager) context.getSystemService(Context.TELEPHONY_SERVICE);
        telephonyManager.listen(new CustomPhoneStateListener(context), PhoneStateListener.LISTEN_CALL_STATE);

    }

    public class CustomPhoneStateListener  extends PhoneStateListener
    {

        Context context; //Context to make Toast if required 
        ActivityManager activityManager;

        public CustomPhoneStateListener(Context context)
        {
            super();
            this.context = context;
        }

        @Override
        public void onCallStateChanged(int state, String incomingNumber) 
        {
            super.onCallStateChanged(state, incomingNumber);
            Log.v("PhoneStateBroadcastReceiver", "onCallStateChanged state"+state);

            switch (state) 
            {
            case TelephonyManager.CALL_STATE_IDLE:
               Toast.makeText(context, "=CALL_STATE_IDLE==", Toast.LENGTH_LONG).show();
             break;
            case TelephonyManager.CALL_STATE_OFFHOOK:
                Toast.makeText(context, "CALL_STATE_OFFHOOK", Toast.LENGTH_LONG).show();

                break;
            case TelephonyManager.CALL_STATE_RINGING:
                Toast.makeText(context, "CALL_STATE_RINGING", Toast.LENGTH_LONG).show();

                break;
            default:
                break;
            }
        }
      }
 } 
```

我已经看到一些应用程序在接听电话时会录制语音。我想知道接听电话的状态。

是否有任何其他状态或侦听器知道被叫方何时接听电话？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-18T07:52:00.607

状态将为**OFF_HOOK**

**设备通话状态：摘机。至少存在一个正在拨号、活动或保持的呼叫，并且没有呼叫正在振铃或等待。**

您可以在此链接上看到：http:
[//developer.android.com/reference/android/telephony/TelephonyManager.html](http://developer.android.com/reference/android/telephony/TelephonyManager.html)

# asp.net - 将 ASP.NET 移植到 MVC 3 Razor

> ID：11520601
> 
> 赞同：1
> 
> 时间：2012-07-17T10:27:23.007
> 
> 标签：asp.net, asp.net-mvc-3, visual-studio-2010, razor

我正在将一个经典的 ASP.NET 应用程序（ASPX 页面）移植到 ASP.NET MVC 3。目前我使用 ContentPlaceHolder 将内容动态添加到特定的 ASP.NET ASPX 页面。考虑以下：

```
<!DOCTYPE html>
<html>
    <head>
        <link href="MyStyleSheet.css" rel="Stylesheet" type="text/css" />
        <asp:ContentPlaceHolder ID="Styles">
        </asp:ContentPlaceHolder>
        <script type="text/javascript" src="jQueryAndOtherScripts.js"></script>
        <asp:ContentPlaceHolder ID="Scripts">
        </asp:ContentPlaceHolder>
    </head>
    <body>
        <div id="Container">
            <asp:ContentPlaceHolder ID="Content">
            </asp:ContentPlaceHolder>
        </div>
    </body>
</html> 
```

因此，在上面的片段中，我有 3 个内容占位符，因此我可以添加基于单个页面的附加样式、脚本和内容。我这样做的原因是每个页面只加载与页面内容相关的样式、脚本（例如，如果它是登录页面，我可能会添加一个脚本来检查登录详细信息是否有效）

考虑以下 MVC 3 Razor View 片段：

```
<!DOCTYPE html>
<html>
    <head>
        <link href="MyStyleSheet.css" rel="Stylesheet" type="text/css" />
        <script type="text/javascript" src="jQueryAndOtherScripts.js"></script>
    </head>
    <body>
        <div id="Container">
            @RenderBody()
        </div>
    </body>
</html> 
```

现在的问题... RenderBody() 替换`<asp:ContentPlaceHolder ID="Content"></asp:ContentPlaceHolder>`，但我用什么来代替`<asp:ContentPlaceHolder ID="Styles"></asp:ContentPlaceHolder>`and `<asp:ContentPlaceHolder ID="Scripts"></asp:ContentPlaceHolder>`？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-17T10:48:49.090

为此目的有一些[部分。](http://weblogs.asp.net/scottgu/archive/2010/12/30/asp-net-mvc-3-layouts-and-sections-with-razor.aspx)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-17T10:53:48.057

`Sections`是实现这一目标的方法。查看 ScottGu 关于该主题的这篇出色的帖子。

[http://weblogs.asp.net/scottgu/archive/2010/12/30/asp-net-mvc-3-layouts-and-sections-with-razor.aspx](http://weblogs.asp.net/scottgu/archive/2010/12/30/asp-net-mvc-3-layouts-and-sections-with-razor.aspx)

# drupal - Drupal：用户名显示为匿名

> ID：11520603
> 
> 赞同：1
> 
> 时间：2012-07-17T10:27:30.240
> 
> 标签：drupal, drupal-6, views

我想知道为什么我的 Drupal 视图字段“用户：名称”为我的所有用户输出“匿名”，除了输出“管理员”的管理员。我想显示他们的用户名。有人知道吗？

谢谢！

更新：所以，我发现这是因为创建节点时创作信息字段为空。如果我编辑一个节点并在此字段中添加一个用户名，则输出符合预期。有没有办法让这个字段预先填写用户名？在任何地方都找不到有关此的任何信息。

（使用 Drupal 6）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-17T16:46:35.423

默认情况下应填写当前用户名。您是否隐藏/禁用非管理员用户的“创作信息”字段？这似乎是最可能的原因。

# c# - 如何使用正则表达式获取内部 html 内容

> ID：11520607
> 
> 赞同：0
> 
> 时间：2012-07-17T10:27:47.990
> 
> 标签：c#, html, regex

```
<div class="colmask">
  <h1 class="continent_header"><a name="US"></a>US</h1>
    <div class="colmid">
        <div class="colin">
          <div class="colleft">
          .......
          ....... 
          </div>
         </div>
    </div>
   </h1>
 </div> 
```

如何使用正则表达式获取标签的内部 html？这意味着结果将是

```
 <h1 class="continent_header"><a name="US"></a>US</h1>
    <div class="colmid">
        <div class="colin">
          <div class="colleft">
          .......
          ....... 
          </div>
         </div>
    </div>
   </h1> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-17T10:31:19.457

请不要使用[正则表达式来解析 HTML](https://stackoverflow.com/a/1732454/1226652)，而是使用[HTML Agility Pack](http://htmlagilitypack.codeplex.com/)。

您可以通过以下方式实现您想要的：

```
string elementText = doc.GetElementbyId("ELEMENTID").InnerHtml; 
```

# java - REST - 从响应中获取资源 URI（不是 ClientResponse）

> ID：11520609
> 
> 赞同：1
> 
> 时间：2012-07-17T10:28:02.960
> 
> 标签：java, rest, jersey, cxf, resteasy

如何从 Response.class 中获取资源 URI 路径/位置？当我像这样使用 Apache CXF 客户端 API 调用我的宁静服务时：

```
 Response res = resource.post(object); 
```

我找回了 JAX-RS 响应类型。CXF 不像 Jersey 或 RestEasy 那样有自己的 Response 实现。那么如何从 Response.class 中获取创建对象的 URI？

在泽西岛，我正在处理一个 ClientResponse.class。在那里我可以处理这个：

```
 res.getLocation(); 
```

RestEasy 也有一个 ClientResponse.class，我可以像 jersey 一样处理这个问题。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-17T11:01:12.737

Jersey ClientResponse`Location`从标题中获取：

```
/**
 * Get the location.
 *
 * @return the location, otherwise <code>null</code> if not present.
 */
public URI getLocation() {
    String l = getHeaders().getFirst("Location");
    return (l != null) ? URI.create(l) : null;
} 
```

JAX-RS 响应通过以下方式提供标头信息`getMetadata()`：

```
public MultivaluedMap<String, Object> getMetadata() {
    if (headers != null)
        return headers;

    headers = new OutBoundHeaders();

    for (int i = 0; i < values.length; i++)
        if (values[i] != null)
            headers.putSingle(ResponseBuilderHeaders.getNameFromId(i), values[i]);

    Iterator i = nameValuePairs.iterator();
    while (i.hasNext()) {
        headers.add((String)i.next(), i.next());
    }

    return headers;
} 
```

所以我会尝试的是：

```
response.getMetadata().getFirst("Location"); 
```

（如果这不起作用打印元数据内容。也许密钥有另一个名称。）

# android - 带有指示器的 ViewPager 没有 Android 的支持库

> ID：11520617
> 
> 赞同：9
> 
> 时间：2012-07-17T10:28:32.070
> 
> 标签：android, android-fragments, android-viewpager, viewpagerindicator, viewpage

现在我在我的程序中使用[ViewPagerIndicator](http://viewpagerindicator.com/)用于带有指示器的可滑动片段，它的工作原理就像一个魅力。[但由于谷歌在不使用Android 支持库](http://developer.android.com/tools/extras/support-library.html)的情况下越来越多地向 Fragments 方向推进，例如支持库中没有 PreferenceFragments，我想知道是否有类似于使用标准 Android 库的 ViewPagerIndicator 的东西。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-17T10:34:44.207

> Google 在不使用 Android 支持库的情况下越来越多地向 Fragments 方向推进

而你的证明是……究竟是什么？

> 例如 PreferenceFragments 在支持库中不可用

不可能`PreferenceFragment`很容易地向后移植，因为还有许多其他要求才能使它有用（例如，向后移植新的`PreferenceActvity`. 我个人研究过反向移植偏好片段系统并得出结论，这对我来说将比它的价值更痛苦。

> 我想知道是否有类似于使用标准 Android 库的 ViewPageIndicator 的东西

根据定义，这是不可能的，就像`ViewPager`在 Android Support 包中一样，这意味着任何指标都`ViewPager`必须使用 Android Support 包。

但是，没有什么`ViewPager`需要您使用片段。如果您愿意，欢迎您创建自己的`PagerAdapter`不使用任何片段或使用原生 API 级别 11 片段的实现。

# upgrade - 将magento升级到最新版本

> ID：11520618
> 
> 赞同：2
> 
> 时间：2012-07-17T10:28:34.170
> 
> 标签：upgrade, magento

我目前正在使用 Magento 社区版，版本 1.7.0.0，并且根据 Magento 的建议，由于主要的安全漏洞修复，我想升级我的应用程序以使用最新版本，1.7.0.2。

升级magento版本的最佳方法是什么？

我知道有命令行升级和使用 Magento Connect Manager 之类的方法，但不确定使用哪种以及如何使用。

谢谢

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-07-17T10:33:18.097

最简单的方法是转到**Magento Connect Manager**并按**检查升级**按钮。

然后您可以看到所有版本的更新。

如果要更新所有软件包，请使用**Mage_All_Latest**

我认为当您在同一个主要版本中时，更新应该可以正常工作。

如果你遇到依赖问题。您可以使用控制台进行升级：

```
./mage upgrade-all --force 
```

使用武力后，您应该检查所有功能。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-07-22T05:16:06.830

请按照以下步骤操作：

1.  [从http://www.magentocommerce.com/download](http://www.magentocommerce.com/download)下载最新的 magento 版本（比如 1.9）
2.  备份一切
3.  现在从您的站点代码中删除所有文件和文件夹（我的说 1.7）并放入一个新文件夹中，例如“x”文件夹。放置维护标志并放置最新的 magento 下载文件夹中的所有 magento 文件。
4.  现在从magento 1.7（'x'文件夹）将以下自定义文件夹合并到1.9

    ```
    app/code/local
    app/code/community
    Media
    Your theme or package (app/design/frontend/default/<your theme> or app/design/frontend/<your package>)
    Folders from Skin (both for adminhtml and frontend).
    Copy app/etc/modules/ to current app/etc/modules/ from ‘x’ folder
    Custom admin theme folder from adminhtml/default/yourtheme.
    copy your custom folders from adminhtml/default/default/ (‘x’ folder) to adminhtml/default/default/ (1.9).
    Custom js files from app/js/. from ‘x’ folder 
    ```

5.  现在转到 1.9 的 app/etc/local.xml 并输入您的数据库和密码详细信息

6.  删除maintenance.flag文件并在浏览器上运行你的站点，你就完成了

# list - 如何获得序言中给定数字的总和？

> ID：11520621
> 
> 赞同：10
> 
> 时间：2012-07-17T10:28:35.193
> 
> 标签：list, prolog, sum, clpfd

我是 prolog 的新手，我正在做一些练习。所以我试图得到一个列表中给定数字的总和。我正在尝试使用这个：

```
my_last(X, [X]).  
my_last(X, [_|L]) :- my_last(X, L). 
```

（从[这里](https://sites.google.com/site/prologsite/prolog-problems/1)）

作为我的向导。所以这是我得到总和的代码：

```
listsum(X, []).                  
listsum(X, [H|L]):-
    X is H + listsum(X, L). 
```

当我编译它时，它说

> practice.pl:3：可评估`listsum(_G139,_G140)`的不存在
> practice.pl:2：单例变量：`[X]`

然后当我尝试`listsum(0, [1,2,3]).`它返回时`false`。

我仍然不太了解prolog，以及prolog中的列表和递归。

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2012-07-17T11:01:42.940

## 算术

正如您已经发现的那样，算术可以在 Prolog 中使用`(is)/2`运算符进行处理。这是因为在Prolog中，一切都只是符号演算：事物默认没有意义，所以统一`(=)/2`不会知道`(+)/2`例如指加法。

现在，您的问题是您在内部使用了常规谓词`(is)/2`（这里是您的递归调用）。由于`(is)/2`只执行算术，它不评估谓词调用。它甚至无法识别它，因为它不是算术函数。

这里的解决方法是影响对变量的递归调用的结果，然后在`(is)/2`调用中使用它：

```
listsum(X,[]).
listsum(Result, [Head|Tail]) :-
    listsum(SumOfTail, Tail),
    Result is Head + SumOfTail. 
```

## 基本情况正确性

但是，如果您测试该代码，您将不会得到想要的结果。原因是在您的基本情况下，您还有另一个问题。正如您所写的那样，空列表的总和不是“任何东西”

```
listsum(X,[]). 
```

(`X`是一个自由变量，因此可以是任何东西)。

相反，它是`0`：

```
listsum(0, []). 
```

结果代码是：

```
listsum(0, []).
listsum(Result, [Head|Tail]) :-
    listsum(SumOfTail, Tail),
    Result is Head + SumOfTail. 
```

## 参数顺序

现在，作为旁注，在 Prolog 中，一个约定是输出变量应该放在谓词的末尾，而输入变量应该放在谓词的开头，因此我们可以按照需要进行重构，如下所示：

```
listsum([], 0).
listsum([Head|Tail], Result) :-
    listsum(Tail, SumOfTail),
    Result is Head + SumOfTail. 
```

## 尾调用优化

现在，我们仍然可以使用更先进的技术来改进这个谓词。例如，我们可以引入尾调用，以便可以执行尾调用优化（可搜索），这要归功于称为累加器的声明式编程习语：

```
listsum(List, Sum) :-
    listsum(List, 0, Sum).

listsum([], Accumulator, Accumulator).

listsum([Head|Tail], Accumulator, Result) :-
    NewAccumulator is Accumulator + Head,
    listsum(Tail, NewAccumulator, Result). 
```

其背后的想法是在递归的每一步更新一个中间结果（通过将列表的当前头部的值添加到它），然后只声明当列表为空时，这个中间值就是最终值。

## 获取更多通用程序

正如您在 Prolog 中可能注意到的那样，谓词通常可以以多种方式使用。例如，`length/2`可用于发现列表的长度：

```
?- length([1, 2, 3], Length).
Length = 3. 
```

或使用所需长度的自由变量构建骨架列表：

```
?- length(List, 3).
List = [_G519, _G522, _G525]. 
```

不过，您可能已经注意到，您不能问 Prolog 哪些列表的总和为`6`：

```
?- listsum(L, 6).
ERROR: is/2: Arguments are not sufficiently instantiated 
```

这是因为，为了“倒退”，Prolog 必须在调用`(is)/2`操作员时求解一个方程。虽然你的很简单（只有加法），但在一般情况下，算术不能以这种方式解决。

为了克服这个问题，可以使用约束规划。一个非常好的库可用于 SWI，clpfd。

这里的语法是：

```
:- use_module(library(clpfd)).

listsum(List, Sum) :-
    listsum(List, 0, Sum).

listsum([], Accumulator, Accumulator).

listsum([Head|Tail], Accumulator, Result) :-
    NewAccumulator #= Accumulator + Head,
    listsum(Tail, NewAccumulator, Result). 
```

现在我们可以以我们希望使用它的其他方式使用我们的谓词：

```
?- listsum(L, 6).
L = [6] ;
L = [_G1598, _G1601],
_G1598+_G1601#=6 ;
L = [_G1712, _G1715, _G1718],
_G1712+_G1715#=_G1728,
_G1728+_G1718#=6 . % Here I interrupted the answer but it would not terminate. 
```

我们甚至可以要求问题的所有解决方案：

```
?- listsum(L, X).
L = [],
X = 0 ;
L = [X],
X in inf..sup ;
L = [_G2649, _G2652],
_G2649+_G2652#=X . % Here I interrupted the answer but it would not terminate 
```

我刚刚提到这一点，以便您意识到`(is)/2`应该避免使用 ，并且应该首选使用约束编程来获得最通用的程序。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2015-05-05T13:27:20.430

如果可能，请使用[clpfd](/questions/tagged/clpfd "显示标记为“clpfd”的问题")而不是普通的旧`(is)/2`（和朋友）。

[clpfd](http://www.swi-prolog.org/man/clpfd.html)`sum/3`提供了一个符合您需求的逻辑纯谓词！

# git - git svn - 克隆所有外部的 repo

> ID：11520623
> 
> 赞同：13
> 
> 时间：2012-07-17T10:28:37.960
> 
> 标签：git, svn, git-svn, svn-externals

我想使用 git 克隆一个 svn 存储库，但不幸的是，在哪里`svn checkout`获取所有外部`git svn clone`的存储库，只获取没有外部的存储库。如何通过 svn 存储库获取外部文件`git svn`？我不想做任何花哨的事情，只需获取带有外部组件的完整存储库即可。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-07-17T10:38:57.070

git-svn 不支持外部，但你可以尝试[SmartGit](http://www.syntevo.com/smartgit/index.html)代替 git-svn。它支持 svn:externals，将它们转换为 .gitsvnextmodules 文件并显示为模块。唯一的限制：您应该使用 SmartGit 克隆存储库，而不是打开已经存在的 git-svn 存储库。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-24T00:33:13.930

我一直使用 git 作为前端来访问 SVN 存储库。SVN 中的结构通常非常简单，即有一个顶级目录，其中包含外部目录，而子目录中没有外部目录。此外，一旦添加外部元素，它们并不会真正发生太大变化。所以假设如下：

```
git svn clone X
cd X 
```

我已经使用以下命令成功获取了所有外部文件：

```
git svn show-externals | \
 perl -ne 'if (/^\/(.*) (.*)/) { print "git svn clone $1 $2\n"; }' | \
 bash 
```

我想一个更复杂的外部结构需要一个更复杂的 perl 脚本。此外，如果您的外部环境发生变化，您将需要再次执行类似的操作。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2014-08-29T13:58:39.450

我在这里发布适用于我的解决方案

```
git svn show-externals | \
  awk '/^\// { print "git svn clone "$3" ."$1" "$2":HEAD"  }' | \
  bash 
```

# jquery - 在 setInterval 中停止执行函数

> ID：11520630
> 
> 赞同：1
> 
> 时间：2012-07-17T10:28:58.617
> 
> 标签：jquery, ajax, callback, setinterval

假设我有一些文件：server.php、client.php 和一个表：user[id, name, status]

server.php 将处理诸如：更新用户状态等...

在 client.php 中，我对 server.php 进行了 ajax 调用，以检查状态是否已激活（每 10 秒）：

```
$(document).ready(function(){
    setInterval(function(){
        check_user_status(user_id)
    },10000);
});

check_user_status = function (user_id) {
    $.ajax({
        type: "post",
        data: "user_id="+user_id,
        url : "server.php",
        success: function(data){
             // do something with the response
             // I want to exit the checking operation if user is already activated
        },
        error: function(e){
            alert("Error occurred");
        }
    });
} 
```

怎么可能做到？

谢谢你的时间！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-17T10:31:45.127

记住已为您的计时器提供的 ID：

```
var timer = setInterval( ... ); 
```

然后在满足条件时取消它：

```
clearInterval(timer); 
```

该`timer`变量需要在“范围”内 - 最简单的解决方案是将*所有*代码放入`document.ready`处理程序中。

FWIW，实际上最好使用`setTimeout`而不是`setInterval`，然后每次重新启动计时器。

`setInterval`如果您的服务器无响应，则会导致问题，因为它会尽职尽责地每 10 秒排队回调一次。一旦服务器响应，它会突然尝试立即运行所有这些回调。

使用`setTimeout`代替将确保在前一个检查实际完成之前没有新检查排队。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-17T10:33:44.623

尝试：

```
var intrvl = setInterval(function(){
        check_user_status(user_id)
    },10000);

....
success: function(data){
 clearInterval(intrvl);

} 
```

# php - 如何在php中包含页面

> ID：11520634
> 
> 赞同：0
> 
> 时间：2012-07-17T10:29:03.590
> 
> 标签：php, include

我通常使用下面的代码将我需要的页面包含到我的网站正文中，以便在单击链接时包含该页面。

```
<?php
        switch($_GET['page']){

            case '1':
            if(file_exists('main.php'))
            {
        include_once('main.php');
            break;
            }

            default:
        include_once('main.php');
            break;
            }
?> 
```

但是每次我添加一个菜单项时我都必须通过添加一个案例'2'......等等来更改这个，现在我的问题可以写得更短/动态，这样我就可以添加一个链接而不必更改到处都是代码？

ps：我确实把它缩短了一点..但我认为它仍然不够好..

我还想补充一点：我从一个 ini 文件中获取我的链接。我把它放在那里：

[导航] main.php = "主页"

```
if (!isset($_GET['page'])) {
      $_GET['page'] = 'main.php';

    }
    switch ($_GET['page']){
      case 'main.php':
      case 'about.php':
      case 'portfolio.php':
      case 'tips.php':
        $file = $_GET['page'];
        break;
      default:
        $file = '404.html';
    }
    include_once $file; 
```

是否也可以从ini文件中获取它？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-23T16:39:45.513

试试这个：

```
$page = isset($_GET['page']) ? $_GET['page'] : "main.php";
if( file_exists($page)) include($page);
else include("404.html"); 
```

# php - WCF - 参考另一个 WSDL 的“不完整”WSDL

> ID：11520637
> 
> 赞同：0
> 
> 时间：2012-07-17T10:29:35.753
> 
> 标签：php, .net, wcf, web-services, wsdl

我正在使用 SoapClient 将一些数据从 PHP 站点发送到 .Net WCF 服务。
这是我的（为清楚起见而缩短）代码：

```
$wsdl = '/var/www/libraries/MyWsdl.xml';
$myClient = new SoapClient($wsdl); 
```

后来，实际的电话：

```
try {           
    $res = $myClient->Foo($someParameter);
}
catch(SoapFault $e){
    //...
}
catch(Exception $e){
    //...
} 
```

当一切都在线时，这很有效，并且如果目标服务器按时关闭，错误处理就会起作用`Foo`。
问题是`SoapClient`构造函数失败，如果目标服务器关闭，即使我已经为它提供了一个带有 WSDL 的静态 XML 文件（与像“ `http://www.destination.com/MyService?wsdl`”这样的 URL 相对）。

我相信这是因为 WSDL 包含对另一个 WSDL 的引用：

```
<wsdl:import namespace="http://MyCompany.Services" location="http://www.destination.com/MyService?wsdl=wsdl0"/> 
```

这个其他 WSDL 包含调用参数的定义。

**那么，我怎样才能将第二个“子 WSDL”“内联”到原来的“子 WSDL”中呢？
这是否允许我在`SoapClient`不启动与目标服务器的连接的情况下创建一个？**

* * *

这是我的服务定义：

```
[ServiceContract(Namespace = "http://MyCompany.Services")]
public interface IMyService
{
    [OperationContract]
    [XmlSerializerFormat(Style = OperationFormatStyle.Rpc, Use = OperationFormatUse.Literal)]
    string Foo(string myParameter);
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-17T10:37:10.290

您可以从此处使用单个 WSDL 文件扩展名：[http ://wcfextras.codeplex.com/](http://wcfextras.codeplex.com/)

请注意，使用 .net4.5 时应该不需要它，因为除了链接版本之外，默认元数据端点现在还生成单个 WSDL 文件。为此，只需将“?singleWSDL”添加到 URI（来源： http: [//msdn.microsoft.com/en-us/library/dd456789](http://msdn.microsoft.com/en-us/library/dd456789(v=vs.110).aspx) (v=vs.110).aspx ）

# c# - 设计一个指定的构造函数

> ID：11520638
> 
> 赞同：2
> 
> 时间：2012-07-17T10:29:39.797
> 
> 标签：c#, constructor, initialization

以下模式在我的代码中很常见：一个类有多个构造函数。一个是“指定构造函数”，其他是为了方便。代码可能如下所示：

```
class Foo 
{
  Foo(int bar, string baz) 
  {
    this.Bar = bar;
    this.Baz = baz;
  }

  Foo()
    : this(0, "Empty baz")
  {
  }

  Foo(Foo f)
    : this(f.Bar, f.Baz)
  {
  }

  int Bar {get;set;}
  string Baz {get;set;}
} 
```

在无参数构造函数调用的情况下`this(...)`，这工作正常。但是，如果有人将`null`作为参数传递给复制构造函数`Foo(Foo)`，则结果将是由于表达式而导致的空引用异常`f.Bar`。因为我希望看到 ArgumentNullException，所以在这种情况下我通常会偏离模式并“手动”实现构造函数，这会导致重复代码。有没有一种优雅的方法来避免这种情况，即拥有一个指定的构造函数并仍然为其他构造函数执行参数验证？

**编辑：**这个例子只是为了描述这个问题。在现实世界的例子中，会有更复杂的参数验证逻辑和初始化代码。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-17T10:41:02.677

您可以按如下方式检查：

```
class Foo
{
    private static Foo ThrowIfNull(Foo foo)
    {
        if (foo == null) throw new ArgumentNullException("foo");
        return foo;
    }

    ...

    Foo(Foo f) : this (ThrowIfNull(f).Bar, f.Baz)
    {
    }
} 
```

它会稍微丢掉你的堆栈跟踪，但不会太多。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-17T10:34:01.087

您应该始终检查从类范围之外获得的参数。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-17T10:41:21.483

您确定此代码无法转换为：（？）

```
 Foo(Foo f)
  {
       if(f != null) 
       {
            Bar = f.Bar;
            Baz = f.Baz;
       }
       else
       {
           throw new ArgumentNullException("f");
       }
  } 
```

老实说，我相信这是您的情况。为什么要把事情复杂化？

您希望在构建时设置一些属性，您可以在构造函数本身中实现它。因为您想避免 1、2 或 3 行，所以您正在尝试发明一个轮子！;)

**选项 B··· 更新！！**

还有另一种方法。覆盖您的用例但使用*可选参数*的*单个*构造函数怎么样？

 *您的构造函数将是这样的：

```
Foo(int bar = -1, string baz = null, Foo f = null) 
  {
    if(bar >= 0 && !string.IsNullOrEmpty(baz)) 
    {
       Bar = bar;
       Baz = baz;
    }
    else if(f != null) 
    {
       Bar = f.Bar;
       Baz = f.Baz;
    }
    else
    {
        Bar = 0;
        Baz = "Empty baz";
    }
  } 
```

根据您调用此构造函数的方式，它会做某事或其他事情。*

# terminal - 在会话中查看更多终端（终结者）历史记录

> ID：11520642
> 
> 赞同：0
> 
> 时间：2012-07-17T10:29:57.173
> 
> 标签：terminal, octave, terminator

我犯了一个愚蠢的错误，并在夜间运行 Octave 会话以向终端生成结果，目的是手动将终端输出复制并粘贴到文件中。但是，我现在发现我无法向后滚动足够远来复制所有会话输出。如何访问在终端窗口中不可观察的当前会话历史记录？一个额外的复杂性是我使用的终端是终结器，似乎没有编辑选项，所以编辑->全选->复制对我来说不可用。在我写这篇文章时，终端和 Octave 会话仍处于打开状态，我需要查看之前的历史记录*，而无需*退出 Octave 或关闭终端。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-06T16:10:35.643

建议你看看[我在stackoverflow上的另一篇文章](https://stackoverflow.com/questions/6346765/help-with-terminator-config-or-any-tool-that-can-do-the-same-functionality)

此工具可让您自动连接，但作为全局配置的一部分，它将历史设置为无限制。

一旦你第一次运行它，你的配置文件就会生成并将它们放入

```
 cat  ~/.config/terminator/config|head -15
[global_config]
  enabled_plugins = LaunchpadCodeURLHandler, APTURLHandler, LaunchpadBugURLHandler
  title_transmit_bg_color = "#ef191d"
[keybindings]
[profiles]
  [[default]]
    scrollback_infinite = True
    split_to_group = True
    foreground_color = "#ffffff"
[layouts] 
```

如您所见，默认配置为 scrll back infinite true

# iphone - 更改预填电子邮件地址的显示方式（XCode）

> ID：11520644
> 
> 赞同：1
> 
> 时间：2012-07-17T10:30:14.427
> 
> 标签：iphone, objective-c, xcode, mfmailcomposeviewcontroller, mfmailcomposer

在我的应用程序中，当用户想要向某人发送电子邮件时，我会预先填写电子邮件地址。我这样做：

```
NSArray *toRecipients = [NSArray arrayWithObject:@"sales@microsmith.com"];
NSString *subjectStr = [[NSString alloc] initWithFormat:@"test subject"];

MFMailComposeViewController *mailController = [[MFMailComposeViewController alloc] init];
mailController.mailComposeDelegate = self;
[mailController setToRecipients:toRecipients];
[mailController setSubject:subjectStr];
[self presentModalViewController:mailController animated:YES];
[mailController release];

[subjectStr release]; 
```

这一切都很好，没有问题。但是，我想知道是否有办法在电子邮件打开后更改“收件人：”字段中显示的内容。

例如，我希望它显示“Microsmith Sales”，而不是显示 - sales@microsmith.com。

那可能吗？

提前致谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-17T10:35:10.120

是的，只需更改收件人字符串的格式：

```
NSArray* recipients = [NSArray arrayWithObject: @"Sales Dept <sales@example.com>"]; 
```

# visual-studio-2010 - 在 Visual Studio 中如何创建包含数据库数据的 PDF？

> ID：11520651
> 
> 赞同：0
> 
> 时间：2012-07-17T10:30:40.997
> 
> 标签：visual-studio-2010, pdf-generation

在 VS 2010 中，我需要从数据库中挑选一些数据并将其添加到 pdf 中。这怎么可能？请有人详细说明。

# iphone - 自定义标签栏调整大小

> ID：11520652
> 
> 赞同：0
> 
> 时间：2012-07-17T10:30:46.680
> 
> 标签：iphone, xcode, uitabbaritem

我的自定义标签栏出现问题，同时选择按钮的大小显示小于旧状态

```
btnImage =[UIImage imageNamed:@"menu_2_89x46"];  
btnImageSelected = [UIImage imageNamed:@"menu_2h_209x109"];
btn2 =[UIButton buttonWithType:UIButtonTypeCustom];
btn2.frame=CGRectMake(66, 274, 89, 46);
[btn2 setBackgroundImage:btnImage forState:UIControlStateNormal];
[btn2 setBackgroundImage:btnImageSelected forState:UIControlStateSelected]; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-17T14:43:20.127

您必须为标签栏提供适当的框架。如果在视图底部给出了标签栏，则将其向上移动。您可以使用预定义的 uitabbaritems。

# javascript - javascript-未捕获的类型错误没有方法

> ID：11520654
> 
> 赞同：0
> 
> 时间：2012-07-17T10:31:15.490
> 
> 标签：javascript, object, methods, typeerror

只有以下页面，我在照片库中收到以下错误：

```
Uncaught TypeError: Object [object Object] has no method 'tmpl' 
```

[http://www.joostrap.com/hints-tips](http://www.joostrap.com/hints-tips)

任何想法这是什么以及如何解决？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-17T10:36:28.950

> .ready() 方法通常与属性不兼容。如果必须使用 load，请不要使用 .ready() 或使用 jQuery 的 .load() 方法将 load 事件处理程序附加到窗口或更具体的项目，如图像。

从[文档](http://api.jquery.com/ready/)。你有`window.addEvent('load'...`冲突`.ready()`

# javascript - 用于在 HTML 表格或 div 网格中将列转换为行并将行转换为列的 JavaScript 代码或框架

> ID：11520655
> 
> 赞同：2
> 
> 时间：2012-07-17T10:31:16.720
> 
> 标签：javascript, jquery, mootools, pivot-table

我正在寻找可以帮助我操作 HTML 网格的脚本或 JavaScript 框架插件。在某些事件调用中，列和行应该互换。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-17T10:44:17.807

像这样的东西？

```
var arr = [];

//Convert to multi array.
$("tr").each(function() {
  var r = arr.push([]);
  $(this).children("td").each(function() {
    arr[r - 1].push($(this).text())
  })
});

//Flip array.
var table = "<table>";
for(r=0;r<arr.length;r++) {
 table += "<tr>";
 for(c=0;c<arr[r].length;c++) {
   table += "<td>" + arr[r][c] + "</td>"; //Flipped indexes.
 }
 table += "</tr>";
}
table += "</table>"; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-17T10:59:14.103

这是一个简单的函数，假设恰好有 n*m 个单元格（没有 colspans/rowspans，没有变化的行宽）：

```
function translate(tableel) {
    var rows = tableel.rows,
        m = rows.length,
        n = rows[0].cells.length;
    for (var i=0; i<n; i++) {
        var r = tableel.insertRow(-1);
        for (var j=0; j<m; j++)
            r.appendChild(rows[j].cells[0]);
    }
    for (var i=0; i<m; i++)
        tableel.deleteRow(0);
} 
```

使用 jQuery 会复杂得多:-)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-21T12:17:12.737

```
 <script src="./mootools-core-1.4.5-full-compat.js" ></script>
    <script src="./mootools-more-1.4.0.1.js" ></script>
    <style>
        #container{
            background-color: #330;
            min-height: 100px;
            min-width: 100px;
            position:relative;
            top:10px;
            left:15px;
        }
        #container .elerc {
            border: 1px solid black;
            overflow: hidden;
        }
        .inncell {
            display: inline-block;
            height: auto;
            width: auto;

        }
    </style>
    <script>

        window.addEvent('domready',function(){

            var r= $$('.c1').length;
            var c=$$('.r1').length;
            var mx_last_w = 0, mx_last_h = 0;

            for(var i=1; i<=r; i++){

                var  mx_h = 0;

                $$('.r'+i+' .inncell').each(function(el){
                    var cur_h = el.getComputedSize();
                    if(cur_h.totalHeight > mx_h){
                        mx_h = cur_h.totalHeight;
                    }
                });

                console.log(mx_h);

                $$('.r'+i).each(function(el){
                    //el.set('tween', {transition: Fx.Transitions.Elastic.easeOut});
                    //el.tween('height', mx_h);
                    //el.tween('top', mx_last_h);

                    el.setStyle('height', mx_h);
                    el.setStyle('top', mx_last_h);
                    el.setStyle('position', 'absolute');
                });
                mx_last_h += mx_h;
            }

            for(var j=1; j<=c; j++){

                var  mx_w = 0;

                $$('.c'+j+' .inncell').each(function(el){
                    var cur_w = el.getComputedSize();
                    if(cur_w.totalWidth > mx_w){
                        mx_w = cur_w.totalWidth;
                    }
                });

                console.log(mx_w);

                $$('.c'+j).each(function(el){

                    el.set('tween', {transition: Fx.Transitions.Elastic.easeOut});
                    //el.tween('width', mx_w);
                    el.tween('left', mx_last_w);

                    el.setStyle('width', mx_w);
                    //el.setStyle('left', mx_last_w);
                    el.setStyle('position', 'absolute');
                });
                mx_last_w += mx_w;
            }

            document.id('container').addEvent('click',function(){

                $$('elerc').each(function(el){
                    el.setStyle('height','auto');
                    el.setStyle('width','auto');
                    el.setStyle('display','inline-block');
                });

                var r= $$('.c1').length;
                var c=$$('.r1').length;

                var mx_last_w = 0, mx_last_h = 0;

                for(var i = 1; i<=r; i++){
                    $$('.r'+i).each(function(el){
                        el.addClass('tr'+i);
                        el.removeClass('r'+i);
                    });
                }
                for(var j=1; j<=c; j++){
                    $$('.c'+j).each(function(el){
                        el.addClass('r'+j);
                        el.removeClass('c'+j);
                    });
                }

                for(var k = 1; k<=r; k++){
                    $$('.tr'+k).each(function(el){
                        el.addClass('c'+k);
                        el.removeClass('tr'+k);
                    });
                }

                for(var i=1; i<=c; i++){

                    var  mx_h = 0;

                    $$('.r'+i+' .inncell').each(function(el){

                        var cur_h = el.getComputedSize();
                        if(cur_h.totalHeight > mx_h){
                            mx_h = cur_h.totalHeight;
                        }
                    });

                    console.log(mx_h);

                    $$('.r'+i).each(function(el){

                        //el.set('tween', {transition: Fx.Transitions.Elastic.easeOut});
                        //el.tween('height', mx_h);
                        //el.tween('top', mx_last_h);

                        el.setStyle('height', mx_h);
                        el.setStyle('top', mx_last_h);
                        el.setStyle('position', 'absolute');
                    });
                    mx_last_h += mx_h;
                }

                for(var j=1; j<=r; j++){

                    var  mx_w = 0;

                    $$('.c'+j+' .inncell').each(function(el){
                        var cur_w = el.getComputedSize();
                        if(cur_w.totalWidth > mx_w){
                            mx_w = cur_w.totalWidth;
                        }
                    });

                    console.log(mx_w);

                    $$('.c'+j).each(function(el){

                        el.set('tween', {transition: Fx.Transitions.Elastic.easeOut});
                        //el.tween('width', mx_w);
                        el.tween('left', mx_last_w);

                        el.setStyle('width', mx_w);
                        //el.setStyle('left', mx_last_w);
                        el.setStyle('position', 'absolute');
                    });
                    mx_last_w += mx_w;
                }
            });
        });
    </script>

    <div id="container">
        <div class="elerc r1 c1"><div class="inncell">name1</div></div> <div class="elerc r1 c2"><div class="inncell"><div style="">12<br/>34</div></div></div> <div class="elerc r1 c3"><div class="inncell"><img src="img02-hover.jpg" style="height: 100px;width: 100px;"/></div></div>
        <div class="elerc r2 c1"><div class="inncell">name2</div></div> <div class="elerc r2 c2"><div class="inncell">22</div></div> <div class="elerc r2 c3"><div class="inncell"><img src="img01-hover.jpg" style="height: 50px;width: 70px;" /></div></div>
    </div> 
```

# jquery - 页面加载时的 jquery 弹出窗口不会被蜘蛛索引

> ID：11520662
> 
> 赞同：2
> 
> 时间：2012-07-17T10:31:58.700
> 
> 标签：jquery, jquery-ui

我即将完成网站重新设计，我正在寻找一种解决方案来通知网站的常规访问者刷新页面以更新网站，因为它仍将显示旧设计（我们正在使用浏览器杠杆缓存）。我有一个简单的 php 脚本，它在页面顶部显示一个消息框，但内容已被搜索引擎索引并影响列表。从我到目前为止所阅读的内容来看，您无法从搜索引擎中隐藏文本，如果是他们的，他们会将其包含在他们的爬网中吗？

我可以做一个简单的图像，但这并不理想。

有谁知道第一页加载时的 jquery 弹出窗口可以显示消息并且不会被索引？一些非常简单和轻便的东西，不会让游客失望。抱歉，之前有人问过这个问题，或者有现成的解决方案，我找不到任何解决方案，可能是我问错了问题吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-17T10:36:06.613

您可以尝试使用 base64 对其进行编码，然后在客户端进行解码。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-17T10:47:26.377

这可能有效 - 为消息和以下内容创建一个新页面`<head>`：

```
<meta name="robots" content="NOINDEX"> 
```

并将其加载到`iframe`灯箱中。

[使用机器人元标记](http://googlewebmastercentral.blogspot.co.uk/2007/03/using-robots-meta-tag.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-17T10:47:55.263

我的一个朋友曾经告诉我，AJAX 内容是不可抓取的，相反，主要的搜索引擎都有特定的抓取机制来抓取 AJAX 内容。（[谷歌的 AJAX 抓取](https://developers.google.com/webmasters/ajax-crawling/docs/getting-started)

正如 Marcus Johansson 建议的那样，我建议对您的文档进行 base64 编码，或者在我看来，您可以尝试以下方法。

顶部的消息可以使用 iframe（我个人讨厌这些），其中的文档将包含[nofollow 和 noindex 元标记](http://support.google.com/webmasters/bin/answer.py?hl=en&answer=93710)。这些将阻止对包含这些标签的文档的抓取访问。

另一个不推荐的解决方案（如图片）是使用 Flash，但提到 Flash，我必须告诉你，一些主要的搜索引擎也在努力[在 Flash 内容中进行抓取](http://googleblog.blogspot.com/2008/06/google-learns-to-crawl-flash.html)。

让我知道你将如何解决你的问题:)

祝你有美好的一天！

# hibernate - ElementCollection：未能延迟初始化集合，没有会话或

> ID：11520664
> 
> 赞同：3
> 
> 时间：2012-07-17T10:32:01.100
> 
> 标签：hibernate, jsf, uielementcollection

我有一个带有一组字符串的字段来保存和编辑 selectManyCheckbox 的值。[我使用http://docs.oracle.com/javaee/6/tutorial/doc/bnbqa.html](http://docs.oracle.com/javaee/6/tutorial/doc/bnbqa.html)中描述的注释@ElementCollection 我可以在第一次保存但通过第二次保存我得到以下异常：

> 原因：javax.servlet.ServletException：未能延迟初始化集合，在 javax.faces.webapp.FacesServlet.service(FacesServlet.java:606) [jboss-jsf-api_2.1_spec-2.0\. 0.Final.jar:2.0.0.Final] 在 org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:329) [jbossweb-7.0.10.Final.jar:] 在 org.apache.catalina。 core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:248) [jbossweb-7.0.10.Final.jar:] at org.primefaces.webapp.filter.FileUploadFilter.doFilter(FileUploadFilter.java:79) [primefaces-3.3.jar: ] 在 org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:280) [jbossweb-7.0.10.Final.jar:] 在 org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:248) [jbossweb-7.0.10.Final.jar:] 在 org.jboss.weld.servlet.ConversationPropagationFilter.doFilter(ConversationPropagationFilter.java:62) [weld-core-1.1.5.AS71.Final.jar:2012- 02-10 15:31] at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:280) [jbossweb-7.0.10.Final.jar:] at org.apache.catalina.core.ApplicationFilterChain.doFilter (ApplicationFilterChain.java:248) [jbossweb-7.0.10.Final.jar:] at org.jboss.solder.servlet.exception.CatchExceptionFilter.doFilter(CatchExceptionFilter.java:65) [solder-impl-3.1.0.Final .jar:3.1.0.Final] ... 29 更多原因：org.hibernate.LazyInitializationException：未能延迟初始化集合，在 org.hibernate.collection.internal.AbstractPersistentCollection 没有关闭会话或会话。throwLazyInitializationException(AbstractPersistentCollection.java:393) [hibernate-core-4.0.1.Final.jar:4.0.1.Final] at org.hibernate.collection.internal.AbstractPersistentCollection.throwLazyInitializationExceptionIfNotConnected(AbstractPersistentCollection.java:385) [hibernate-core -4.0.1.Final.jar:4.0.1.Final] 在 org.hibernate.collection.internal.AbstractPersistentCollection.initialize(AbstractPersistentCollection.java:378) [hibernate-core-4.0.1.Final.jar:4.0.1 .Final] 在 org.hibernate.collection.internal.PersistentSet.add(PersistentSet.java:206) [hibernate-core-4.0.1.Final.jar:4.0.1.Final] 在 com.sun.faces.renderkit。 html_basic.MenuRenderer.convertSelectManyValuesForModel(MenuRenderer.java:382) [jsf-impl-2.1.5-jbossorg-1.jar:2.1.5-SNAPSHOT] 在 com.sun.faces.renderkit.html_basic.MenuRenderer。convertSelectManyValue(MenuRenderer.java:129) [jsf-impl-2.1.5-jbossorg-1.jar:2.1.5-SNAPSHOT] 在 com.sun.faces.renderkit.html_basic.MenuRenderer.getConvertedValue(MenuRenderer.java:315) [jsf-impl-2.1.5-jbossorg-1.jar:2.1.5-SNAPSHOT] 在 javax.faces.component.UIInput.getConvertedValue(UIInput.java:1030) [jboss-jsf-api_2.1_spec-2.0.0 .Final.jar:2.0.0.Final] 在 javax.faces.component.UIInput.validate(UIInput.java:960) [jboss-jsf-api_2.1_spec-2.0.0.Final.jar:2.0.0.Final ] 在 javax.faces.component.UIInput.executeValidate(UIInput.java:1233) [jboss-jsf-api_2.1_spec-2.0.0.Final.jar:2.0.0.Final] 在 javax.faces.component.UIInput。 processValidators(UIInput.java:698) [jboss-jsf-api_2.1_spec-2.0.0.Final.jar:2.0.0.Final] 在 javax.faces.component.UIForm.processValidators(UIForm.java:253) [jboss -jsf-api_2.1_spec-2.0.0.Final.jar:2.0.0。最终] 在 javax.faces.component.UIComponentBase.processValidators(UIComponentBase.java:1214) [jboss-jsf-api_2.1_spec-2.0.0.Final.jar:2.0.0.Final] 在 javax.faces.component.UIViewRoot .processValidators(UIViewRoot.java:1172) [jboss-jsf-api_2.1_spec-2.0.0.Final.jar:2.0.0.Final] 在 com.sun.faces.lifecycle.ProcessValidationsPhase.execute(ProcessValidationsPhase.java:76 ) [jsf-impl-2.1.5-jbossorg-1.jar:2.1.5-SNAPSHOT] 在 com.sun.faces.lifecycle.Phase.doPhase(Phase.java:101) [jsf-impl-2.1.5- jbossorg-1.jar:2.1.5-SNAPSHOT] 在 com.sun.faces.lifecycle.LifecycleImpl.execute(LifecycleImpl.java:118) [jsf-impl-2.1.5-jbossorg-1.jar:2.1.5-快照] 在 org.apache.myfaces.extensions.cdi.jsf2.impl.listener.phase.CodiLifecycleWrapper.execute(CodiLifecycleWrapper.java:95) [myfaces-extcdi-jsf20-module-impl-1.0.5.jar:1.0。 5] 在 javax.faces.webapp.FacesServlet.service(FacesServlet.java:593) [jboss-jsf-api_2.1_spec-2.0.0.Final.jar:2.0.0.Final] ... 还有 38 个

我使用 JBOSS 7.1.0-Final、Hibernate 4.0.1.Final 和 JSF 2.0

以下是我的代码：

**测试.java**

```
@Entity
@Table(name = "TEST")
@NamedQueries({
    @NamedQuery(name = Test.FIND_BY_ID, query = "select test from Test test where test.id = :id")
})
public class Test implements Serializable {

    private static final long serialVersionUID = -7294677843656741933L;

    public static final String FIND_BY_ID = "test.by.id";

    @Id
    @GeneratedValue(strategy = GenerationType.AUTO)
    private Long id;

    @ElementCollection(fetch=FetchType.EAGER)
    private Set<String> textes;

    public Test() {
    }

    public Long getId() {
        return id;
    }

    public void setId(Long id) {
        this.id = id;
    }

    public Set<String> getTextes() {
        return textes;
    }

    public void setTextes(Set<String> textes) {
        this.textes = textes;
    }
} 
```

**测试.xhtml**

```
<?xml version='1.0' encoding='UTF-8' ?>
<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"
    xmlns:ui="http://java.sun.com/jsf/facelets"
    xmlns:h="http://java.sun.com/jsf/html"
    xmlns:f="http://java.sun.com/jsf/core"
    xmlns:c="http://java.sun.com/jsp/jstl/core">

<body>
    <h:form id="form">
        <h:selectManyCheckbox value="#{formBean.test.textes}">
            <f:selectItem itemLabel="Option 1" itemValue="Option 1" />  
            <f:selectItem itemLabel="Option 2" itemValue="Option 2" />  
            <f:selectItem itemLabel="Option 3" itemValue="Option 3" />  
        </h:selectManyCheckbox>

        <h:commandButton value="Save" action="#{formBean.saveTest}" />
    </h:form>
</body>
</html> 
```

以下是相关来源：

**FormBean.java**

```
@Named
@SessionScoped
public class FormBean implements Serializable {

    private static final long serialVersionUID = 6484233109393875203L;

    @EJB
    private ServiceBean serviceBean;

    private Test test;

    public String saveTest() {
        serviceBean.save(test);
        return "test";
    }

    public String createTest() {
        test = new Test();
        return "test";
    }

    public Test getTest() {
        return test;
    }

    public void setTest(Test test) {
        this.test = test;
    }

} 
```

**ServiceBean.java**

```
@Stateless
@LocalBean
public class ServiceBean {

    @PersistenceContext
    private EntityManager entityManager;

    public boolean save(Test test) {
        Test dbTest = findTestById(test.getId());
        if (dbTest == null) {
            entityManager.persist(test);
        }
        else {
            entityManager.merge(test);
        }

        return true;
    }

    public Test findTestById(Long id) {
        if (id == null)
            return null;

        TypedQuery<Test> query = entityManager.createNamedQuery(Test.FIND_BY_ID, Test.class);
        query.setParameter("id", id);
        List<Test> results = query.getResultList();

        if (results.isEmpty())
            return null;

        return results.get(0);
    }
} 
```

**test_index.xhtml**

```
<?xml version='1.0' encoding='UTF-8' ?>
<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"
    xmlns:ui="http://java.sun.com/jsf/facelets"
    xmlns:h="http://java.sun.com/jsf/html"
    xmlns:f="http://java.sun.com/jsf/core"
    xmlns:c="http://java.sun.com/jsp/jstl/core">

<body>
    <h:form>
        <h:commandLink value="Test" action="#{formBean.createTest()}" />
    </h:form>
</body>
</html> 
```

谢谢阮的帮助

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-19T10:10:04.550

我找到了这个问题的解决方案，已经在： [@ElementCollection](http://en.wikibooks.org/wiki/Java_Persistence/ElementCollection)

以下是我的解决方案：

**测试.java**

```
@Entity
@Table(name = "TEST")
@NamedQueries({
    @NamedQuery(name = Test.FIND_BY_ID, query = "select test from Test test where test.id = :id")
})
public class Test implements Serializable {

    private static final long serialVersionUID = -7294677843656741933L;

    public static final String FIND_BY_ID = "test.by.id";

    @Id
    @GeneratedValue(strategy = GenerationType.AUTO)
    private Long id;

    @ElementCollection
    private Set<String> textes;

    public Test() {
    }

    public Long getId() {
        return id;
    }

    public void setId(Long id) {
        this.id = id;
    }

    public Set<String> getTextes() {
        return textes;
    }

    public void setTextes(Set<String> textes) {
        this.textes = textes;
    }
} 
```

**测试.xhtml**

```
<?xml version='1.0' encoding='UTF-8' ?>
<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"
    xmlns:ui="http://java.sun.com/jsf/facelets"
    xmlns:h="http://java.sun.com/jsf/html"
    xmlns:f="http://java.sun.com/jsf/core"
    xmlns:c="http://java.sun.com/jsp/jstl/core">

<body>
    <h:form id="form">
        <h:selectManyCheckbox value="#{formBean.selectedTextes}">
            <f:selectItem itemLabel="Option 1" itemValue="Option 1" />  
            <f:selectItem itemLabel="Option 2" itemValue="Option 2" />  
            <f:selectItem itemLabel="Option 3" itemValue="Option 3" />  
        </h:selectManyCheckbox>

        <h:commandButton value="Save" action="#{formBean.saveTest}" />
    </h:form>
</body>
</html> 
```

**FormBean.java**

```
@Named
@SessionScoped
public class FormBean implements Serializable {

    private static final long serialVersionUID = 6484233109393875203L;

    @EJB
    private ServiceBean serviceBean;

    private Test test;

    private Set<String> selectedTextes;

    public String saveTest() {
        serviceBean.save(test, selectedTextes);
        return "test";
    }

    public String createTest() {
        test = new Test();
        return "test";
    }

    // getters and setters
} 
```

**ServiceBean.java**

```
@Stateless
@LocalBean
public class ServiceBean {

    @PersistenceContext
    private EntityManager entityManager;

    public boolean save(Test test, Set<String> selectedTextes) {
        Test dbTest = findTestById(test.getId());
        if (dbTest == null) {
            if (selectedTextes != null) {
                test.setTextes(selectedTextes);
            }
            entityManager.persist(test);
        }
        else {
            if (selectedTextes != null) {
                dbTest.setTextes(selectedTextes);
            }
            entityManager.merge(dbTest);
        }

        return true;
    }

    public Test findTestById(Long id) {
        if (id == null)
            return null;

        TypedQuery<Test> query = entityManager.createNamedQuery(Test.FIND_BY_ID, Test.class);
        query.setParameter("id", id);
        List<Test> results = query.getResultList();

        if (results.isEmpty())
            return null;

        return results.get(0);
    }
} 
```

**test_index.xhtml**

```
<?xml version='1.0' encoding='UTF-8' ?>
<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"
    xmlns:ui="http://java.sun.com/jsf/facelets"
    xmlns:h="http://java.sun.com/jsf/html"
    xmlns:f="http://java.sun.com/jsf/core"
    xmlns:c="http://java.sun.com/jsp/jstl/core">

<body>
    <h:form>
        <h:commandLink value="Test" action="#{formBean.createTest()}" />
    </h:form>
</body>
</html> 
```

阮

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-06-25T12:15:06.617

从问题到答案的差异：

```
***************
*** 14,18 ****
        private Long id;

!       @ElementCollection(fetch=FetchType.EAGER)
        private Set<String> textes;

--- 14,18 ----
        private Long id;

!       @ElementCollection
        private Set<String> textes;

***************
*** 47,51 ****
      <body>
        <h:form id="form">
!           <h:selectManyCheckbox value="#{formBean.test.textes}">
                <f:selectItem itemLabel="Option 1" itemValue="Option 1" />
                  <f:selectItem itemLabel="Option 2" itemValue="Option 2" />
--- 47,51 ----
      <body>
        <h:form id="form">
!           <h:selectManyCheckbox value="#{formBean.selectedTextes}">
                <f:selectItem itemLabel="Option 1" itemValue="Option 1" />
                  <f:selectItem itemLabel="Option 2" itemValue="Option 2" />
***************
*** 70,75 ****
        private Test test;

        public String saveTest() {
!           serviceBean.save(test);
            return "test";
        }
--- 70,77 ----
        private Test test;

+       private Set<String> selectedTextes;
+ 
        public String saveTest() {
!           serviceBean.save(test, selectedTextes);
            return "test";
        }
***************
*** 97,107 ****
        private EntityManager entityManager;

!       public boolean save(Test test) {
            Test dbTest = findTestById(test.getId());
            if (dbTest == null) {
                entityManager.persist(test);
            }
            else {
!               entityManager.merge(test);
            }

--- 99,115 ----
        private EntityManager entityManager;

!       public boolean save(Test test, Set<String> selectedTextes) {
            Test dbTest = findTestById(test.getId());
            if (dbTest == null) {
+               if (selectedTextes != null) {
+                   test.setTextes(selectedTextes);
+               }
                entityManager.persist(test);
            }
            else {
!               if (selectedTextes != null) {
!                   dbTest.setTextes(selectedTextes);
!               }
!               entityManager.merge(dbTest);
            } 
```

# c# - 从列表中获取 具有特定属性最大值的记录

> ID：11520666
> 
> 赞同：4
> 
> 时间：2012-07-17T10:32:02.697
> 
> 标签：c#, linq, max

> **可能重复：**
> [LINQ：如何对集合中所有对象的属性执行 .Max() 并返回具有最大值的对象](https://stackoverflow.com/questions/1101841/linq-how-to-perform-max-on-a-property-of-all-objects-in-a-collection-and-ret)

我有以下课程：

```
class Product
{
    public string ProductName { get; set; }
    public DateTime ActivationDate { get; set; }
} 
```

然后我创建并填充一个 `List<Product>`，我想`ProductName`从`Product`最新的`ActivationDate`.

```
Product.Where(m => m.ActivationDate == Max(m.ActivationDate)).Select(n => n.ProductName)

Product.Max(m => m.ActivationDate).Select(n => n.ProductName) 
```

但机器人方法不起作用。有人知道完成这项任务的方法吗？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-07-17T10:35:11.247

您可以`OrderByDescending`在`List<Product>`ActivationDate 字段上，然后采取`FirstOrDefault()`

```
Product.OrderByDescending(p => p.ActivationDate).FirstOrDefault(); 
```

对于更简单的版本，有一个扩展方法

[`MaxBy`](http://code.google.com/p/morelinq/source/browse/MoreLinq/MaxBy.cs)

```
Product.MaxBy(p => p.ActivationDate); 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-07-17T10:44:16.473

如果你能做到这一点：

```
class Product : IComparable<Product>
{
    public string ProductName { get; set; }
    public DateTime ActivationDate { get; set; }

    public int CompareTo(Product other)
    {
        return this.ActivationDate.CompareTo(other.ActivationDate);
    }
} 
```

然后就是这样：

```
var max = products.Max(p => p).ProductName; 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-17T10:48:37.883

开始了; 单次通过列表：

```
public static TSource MaxBy<TSource,TValue>(
    this IEnumerable<TSource> source,
    Func<TSource,TValue> selector)
{
    using(var iter = source.GetEnumerator())
    {
        if (!iter.MoveNext())
            throw new InvalidOperationException("Empty sequence");
        var max = selector(iter.Current);
        var item = iter.Current;
        var comparer = Comparer<TValue>.Default;
        while(iter.MoveNext())
        {
            var tmp = selector(iter.Current);
            if(comparer.Compare(max, tmp) < 0)
            {
                item = iter.Current;
                max = tmp;
            }
        }
        return item;
    }
} 
```

然后：

```
var maxObj = list.MaxBy(x => x.SomeProp); 
```

这比做一个更有效`OrderBy`，例如，它需要对数据进行实际*排序*，而不是只扫描一次。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-17T12:42:34.773

如何编写一个名为 Max 的扩展函数，它在内部执行 Branko Dimitrijevic 提出的简单搜索逻辑。

```
/// <param name="comparer">Func<T current, T currentMax, long> </param>
    public static T Max<T>(this List<T> collection, Func<T, T, long> comparer) where T : class
    {
        T max_product = null;
        collection.ForEach(c =>
        {
            if (max_product == null || comparer(c, max_product) > 0)
                max_product = c;
        });

        return max_product;
    } 
```

将此函数称为：

```
string maxProductName = products.Max<Product>((currentProduct, currentMaxProduct) =>
        {
            // Basically any logic
            return currentMaxProduct.ActivationDate.CompareTo(currentProduct.ActivationDate);
        }).ProductName; 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-17T11:01:22.137

非 LINQ 解决方案很简单，如果您只需要在一个地方使用它，那么一般的[MaxBy](http://code.google.com/p/morelinq/source/browse/MoreLinq/MaxBy.cs)将是一种过度杀伤：

```
Product max_product = null;

foreach (var product in products) {
    if (max_product == null || max_product.ActivationDate < product.ActivationDate)
        max_product = product;
}

// Use `max_product`... 
```

* * *

## 回答 #6

> 赞同：-2
> 
> 时间：2012-07-17T10:37:54.443

试试这个

```
ProductList.Where(m => m.ActivationDate == ProductList.Max(pl => pl.ActivationDate)).FirstOrDefault().ProductName; 
```

# c# - 如何在 IDictionary 中存储相同的密钥？

> ID：11520667
> 
> 赞同：1
> 
> 时间：2012-07-17T10:32:09.043
> 
> 标签：c#, c#-4.0, idictionary

我正在使用 C# 4.0。我想使用 IDictionary 存储（字符串，字符串）对。如下所示：

```
Dictionary<string, string> _tempDicData = new Dictionary<string, string>();
      _tempDicData.Add("Hello", "xyz");
      _tempDicData.Add("Hello", "aaa");
      _tempDicData.Add("Hello", "qwert");
      _tempDicData.Add("Hello", "foo");
      _tempDicData.Add("Hello", "pqr");
      _tempDicData.Add("Hello", "abc"); 
```

但出现错误：

```
An item with the same key has already been added. 
```

那么如何在 IDictionary 中存储相同的密钥？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-17T10:33:57.723

您不能`IDictionary<K,T>`多次添加同一个项目 - 这是字典的全部意义，一个关联容器。但是您可以像这样替换现有的：

```
_tempDicData.Add("Hello", "xyz");
_tempDicData["Hello"] = "aaa"; 
```

如果每个键需要多个项目，您可以制作一个列表字典：

```
IDictionary<string,IList<string>> _tempDicData =
    new Dictionary<string,IList<string>>();
IList<string> lst = new List<string>();
lst.Add("xyz");
lst.Add("aaa");
_tempDicData.Add("Hello", lst); 
```

当您不确定某个键的列表是否存在时，您可以使用此模式添加新项目：

```
IList<string> lst;
if (!_tempDicData.TryGetValue("Hello", out lst)) {
    _tempDicData.Add("Hello", lst);
}
lst.Add("xyz");
lst.Add("aaa"); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-17T10:36:25.877

字典中不能有两个具有相同键的项目。但是，您可以拥有一个本身就是集合的项目：

```
Dictionary<string, List<string>> _tempDicData = new Dictionary<string, List<string>>
{
    { "Hello", new List<string> { "xyz", "aa", "foo" },
}; 
```

如果您采用这种方式，则在访问项目时必须小心，因为基础列表可能已经创建，也可能尚未创建：

```
// WRONG: _tempDicData["Hello"] might not exist!
_tempDicData["Hello"].Add("bar");

// CORRECT:
if (!_tempDicData.ContainsKey("Hello")) {
    _tempDicData["Hello"] = new List<string>();
}
_tempDicData["Hello"].Add("bar"); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-17T10:33:41.593

你不能。字典只能为每个键保存一项。字典可能不是您要查找的数据结构。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-07-17T10:34:56.310

创建`Dictionary<string,List<string>>`.

```
Dictionary<string,List<string>> dict=new Dictionary<string,List<string>>();
dict.Add("hello",new List<string>());
dict["hello"].Add("foo");
dict["hello"].Add("bar"); 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-07-17T10:36:28.543

你不能用字典来做到这一点。尝试使用 NameValueCollection。

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2012-07-17T10:58:20.680

您可以添加重复键的类可能如下所示：

```
class TDictionary<K, V>
{
    struct KeyValuePair
    {
        public K Key;
        public V Value;
    }

    private readonly List<KeyValuePair> fList = new List<KeyValuePair>();

    public void Add(K key, V value)
    {
        fList.Add(new KeyValuePair { Key = key, Value = value });
    }

    public List<V> this[K key]
    {
        get { return (from pair in fList where pair.Key.Equals(key) select pair.Value).ToList(); }
    }

    public List<K> Keys
    {
        get { return fList.Select(pair => pair.Key).ToList(); }
    }

    public List<V> Values
    {
        get { return fList.Select(pair => pair.Value).ToList(); }
    }
} 
```

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2012-07-17T10:34:30.593

不可能，`key` `value`为此目的创建带有字段的自己的类

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2012-07-17T10:35:02.117

你不能？

您可以使用一个`Dictionary<string, List<string>>`，或者，如果您想要一个只读解决方案，您可以使用`ToLookup`扩展方法。

```
var lp = new[]
{
    Tuple.Create("Hello", "xyz"),
    Tuple.Create("Hello", "aaa"),
    Tuple.Create("Hello", "qwert"),
    Tuple.Create("Hello", "foo"),
    Tuple.Create("Hello", "pqr"),
    Tuple.Create("Hello", "abc"),
}.ToLookup(p => p.Item1, p => p.Item2);

foreach (var key in lp)
{
    foreach (var value in key)
    {
        Console.WriteLine("{0}: {1}", key.Key, value);
    }
} 
```

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2012-07-17T10:35:17.170

键必须是唯一的才能搜索值。

* * *

## 回答 #10

> 赞同：1
> 
> 时间：2012-07-17T10:35:49.667

我认为您必须创建自己的类，您可以在其中多次添加相同的密钥。字典是这样做的错误方法。

* * *

## 回答 #11

> 赞同：1
> 
> 时间：2012-07-17T10:37:07.717

为什么你会想要这样做。字典的想法是按键项目，如果它出现的次数更多，那么它就不是关键。

您可以创建 > 的字典，但最好重新规划您的需求。

# objective-c - 按钮 setTitle 不起作用/不可见

> ID：11520670
> 
> 赞同：0
> 
> 时间：2012-07-17T10:32:40.167
> 
> 标签：objective-c, button

我的按钮有一个简单的问题。标题不可见。我的代码是：

```
 UIButton *button = [UIButton buttonWithType:UIButtonTypeCustom];
    [button setImage:[UIImage imageNamed:[NSString stringWithFormat:@"ikonki%d.png",i]] forState:UIControlStateNormal];
    [button setTitle:@"Normal" forState:UIControlStateNormal];
    [button setTitleColor: [UIColor whiteColor] forState: UIControlStateNormal];
    [button setEnabled:YES];

    [button addTarget:self
               action:@selector(buttonHandler:) 
     forControlEvents:UIControlEventTouchUpInside];

    button.tag = i;
    button.frame = CGRectMake(10\. + 77\. * i, 125., 68 , 68);

    [self.view addSubview:button]; 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-17T10:38:16.763

是的，当您使用该`image`属性时，这是正常行为。

**使用** `backgroundImage` **属性而不是属性** `image` **，如下所示：**

```
[button setBackgroundImage:[UIImage imageNamed:[NSString stringWithFormat:@"ikonki%d.png",i]] forState:UIControlStateNormal]; 
```

**更新＃1：**

要在按钮下重新定位按钮的标题，请使用以下方式：

```
[button setTitleEdgeInsets:UIEdgeInsetsMake(0.f, 0.f, -60.f, 0.f)]; // align the values for your specific button
[button setClipsToBounds:false]; 
```

**更新#2：**

要更改标题的字体，试试这个：

```
[button.titleLabel setFont:[UIFont systemFontOfSize:34.f]]; // set the font size what you desire 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-04T03:33:44.357

如果您忘记使用`@synthesize`按钮上的 或与之相关的变量，也会发生这种情况。

# shell - 用于 FFmpeg 视频转换的 php shell 脚本

> ID：11520675
> 
> 赞同：0
> 
> 时间：2012-07-17T10:32:51.650
> 
> 标签：shell, scripting, ffmpeg, php

我有一个用于将任何视频转换为 mp4 格式的 shell 脚本（使用 ffmpeg）。我想编写一个用于执行 ffmpeg 将任何视频格式转换为 mp4 视频格式的 php 脚本。

这是外壳脚本： http: [//pastebin.com/PH3QWFqQ](http://pastebin.com/PH3QWFqQ)

没有 shell_exec() 的 Shell 脚本运行良好。更新：

我曾尝试使用 shell_exec() 来执行此操作，但出现错误：

> PHP Parse 错误：语法错误，第 33 行 test1.php 中的意外 T_STRING

更新：

我试过 shell_exec() ：它执行但没有显示任何输出。但是 .sh 文件单独显示输出

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-17T10:36:04.970

您可以使用 exec 或 system 执行外部工具。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-17T10:47:47.710

最简单的方法可能是使用`shell_exec`，但您确实需要确保没有用户输入直接进入命令。您真的不希望您的用户在您的服务器外壳上执行命令。例子：`shell_exec("ffmpeg ...");`

如果您不想使用`shell_exec`，只需 google “ffmpeg php”，有一些 PHP 的 ffmpeg 扩展。我找到了这个，例如： http: [//ffmpeg-php.sourceforge.net/](http://ffmpeg-php.sourceforge.net/)

# asp.net-mvc - MVC 4\. Signalr/Hub 未在 IIS 7 中加载，但在 Visual Studio 中正常工作

> ID：11520679
> 
> 赞同：1
> 
> 时间：2012-07-17T10:33:21.283
> 
> 标签：asp.net-mvc, asp.net-mvc-4, signalr

我正在使用 SignalR 的 Asp .Net 4.0 框架上开发一个 Web 应用程序，并从 Nuget 包安装它。当我在没有本地调试的情况下调试或运行应用程序时，它可以正常工作。但是，当它部署到生产服务器时，它无法找到信号/集线器

web.config 中的以下标志无济于事。

```
<configuration>
    <system.webServer>
        <validation validateIntegratedModeConfiguration="false" />
        <modules runAllManagedModulesForAllRequests="true">
        </modules>
    </system.webServer>
</configuration> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-17T19:48:33.590

听起来需要使用 @Url.Content("~/Signalr/Hubs") ... Ref: [Signalr FAQ](https://github.com/SignalR/SignalR/wiki/Faq)

应该是评论，但没有足够的代表:-(。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-27T14:32:19.893

在我的情况下，我在新的 Windows 7 虚拟机中配置 SignalR，最后发现当我转到 Inetmgr 中的 .NET 编译功能时出现错误

执行此操作时出错。详细信息：文件名：\?\C:\Windows\Microsoft.NET\Framework\v4.0.30319\config\web.config 行号：137 错误：无法识别的元素“folderLevelBuildProviders”

所以，我所要做的就是运行“aspnet_regiis -iru”，它解决了 404 问题。

[http://www.hanselman.com/blog/ASPNET4BreakingChangesAndStuffToBeAwareOf.aspx](http://www.hanselman.com/blog/ASPNET4BreakingChangesAndStuffToBeAwareOf.aspx)

# java - 配置 GlassFish EJB 超时

> ID：11520681
> 
> 赞同：2
> 
> 时间：2012-07-17T10:33:23.263
> 
> 标签：java, glassfish, timeout, client, ejb

我正在网上寻找一种在 GlassFish 上设置超时的方法。我正在使用 EJB 和 SessionBean 为 GlassFish 开发一个独立的 Java 客户端。

我想在使用远程会话时设置一些超时，因为如果另一端的服务器完成，返回异常之前需要一段时间。

所以我的问题是：如何通过 Java 客户端中的远程会话超时后返回异常？我还可以为查找设置超时吗？

编辑：另外，有没有办法添加一种侦听器来检测远程服务器何时关闭？

# duplicates - MarkLogic 中的重复文档 URI

> ID：11520683
> 
> 赞同：1
> 
> 时间：2012-07-17T10:33:32.103
> 
> 标签：duplicates, document, marklogic

我的 MarkLogic 数据库中有一个重复的文档 URI，导致查询失败，所以我只想删除它。所以...

```
xquery version '1.0-ml';

xdmp:document-delete("the doc uri") 
```

但这给了

> [1.0-ml] XDMP-DBDUPURI: xdmp:document-delete(" *the doc uri* ") -- URI *the doc uri*在森林 forest01 和 forest02 中找到

有人对如何删除此文档有任何想法吗？

（我已经尝试禁用其中一个森林，但这不起作用）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-17T10:54:23.870

我很想知道您如何能够使用相同的 uri 创建两个文档，这不是您通常可以实现的。在过去的几年里，我只见过一次这样的事情。它可能仍然列在[http://marklogic.markmail.org/](http://marklogic.markmail.org/)虽然我自己找不到。

您可能应该断开它们，而不是禁用森林。首先forest01，重新连接它，然后断开forest02。转到管理界面中的森林概览页面，然后从相应的下拉列表中选择不同的数据库或不选择数据库。

！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-04-24T16:08:32.273

错误：XDMP-DBDUPURI: fn:doc("/test.xml") -- URI /test.xml 在森林 FOREST-1 和 FOREST-2 中找到，ts=14545

答：我们不能只使用 xdmp:document-delete() 直接删除它，这会再次引发此 XDMP-DBDUPURI 错误。要解决它，请使用以下查询从一个林中删除它。希望这可以帮助！ [![在此处输入图像描述](../Images/e89b5cb1a3020fe7a59f0500d0723cd7.png)](https://i.stack.imgur.com/B8ItN.png)

# c#-4.0 - 如何在控制台应用程序中从 tfs 获取路径

> ID：11520687
> 
> 赞同：1
> 
> 时间：2012-07-17T10:33:54.297
> 
> 标签：c#-4.0, code-metrics

我创建了一个控制台应用程序，它将两个参数一个作为输入 .xml 文件并将输出作为 .htm 文件

下面是访问 tfs 的代码

```
TfsTeamProjectCollection teamProjectCollection =
                TfsTeamProjectCollectionFactory.GetTeamProjectCollection
                (new Uri("http://myServer:8080/tfs/defaultcollection"));

            var buildService = (IBuildServer)teamProjectCollection.GetService(
                                                 typeof(IBuildServer));

IBuildDefinition myBuildDefination = buildService.GetBuildDefinition(
                   "MyProjectName", "MyBuildDefinationName");
            Uri lastKnownGoodBuild = myBuildDefination.LastGoodBuildUri;
            IBuildDetail myBuildDetail = buildService.GetBuild(lastKnownGoodBuild);
            string dropLocation = myBuildDetail.DropLocation; 
```

但上面似乎对我不起作用......所以我想手动通过路径。正如您在下面的代码片段中看到的

```
// i have just added blackslash at the start and my problem solved
    string xmlfile = "\\\\myTfsPath\\CodeMetricsResult.xml";
     if (File.Exists(xmlfile))
     {
          //do something
     } 
```

但出于某种原因......它总是去我的 else 块。

请让我做错了什么

注意.... tfs 路径在网络上，我可以访问它。

谢谢，

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-17T11:16:12.803

后一部分应该适用于指向现有文件的完整输入`@"C:\Folder\CodeMetricsResult.xml"`
即使对于网络中的文件也有效`@"\\netdrive\Folder\CodeMetricsResult.xml"`

我尝试了使用 TFS-SDK 的代码段，它运行良好。一些提示：

*   `http://myServer:8080/tfs/defaultcollection`在 Team Explorer 中右键单击 TeamCollection 的根目录，选择“属性”并检查“Url”下的条目是否匹配，以确保正确无误。
*   检查是否`MyProjectName`与您的 TeamProject 的确切名称和`MyBuildDefinationName`您的构建定义名称匹配。
*   在“构建”下右键单击`MyBuildDefinitionName`并选择“编辑构建定义”。在“BuildDefaults”下导航并检查“此构建将输出文件复制到放置文件夹”。
*   Check that the last succeeded build of `MyBuildDefinionName`is still persistent (= hasn't been deleted). In order to do this right-click it on TeamExplorer, select "ViewBuilds" and find it in the Build Explorer that pops up. Once you do find it, click "open drop folder" in the build summary, to ensure that TFS has kept it.

# java - POI removeRow 和 shiftRows 在工作表末尾留下空白行。如何删除它们？

> ID：11520696
> 
> 赞同：0
> 
> 时间：2012-07-17T10:34:15.620
> 
> 标签：java, apache, excel, apache-poi, delete-row

我正在使用 POI 来操作现有的 Excel 工作表。
我想在开头删除行并在末尾添加行。当我删除行时，我将所有行移到它们之后。

```
int numOfRows = sheet.getLastRowNum()+1;
int extraRows = numOfRows - maxAllowedRows;             
for(int i=1;i<=extraRows;i++){  //i intialized with 1 to ignore header row.
    sheet.removeRow(sheet.getRow(i));
}
sheet.shiftRows(extraRows+1,sheet.getLastRowNum(),-extraRows); 
```

在程序的当前运行中，它工作正常。但是当程序再次运行时，在第一次运行中删除和移动的行数相同的空白行出现在底部的工作表中，并且我尝试在工作表底部添加的任何新行都会在这些空白之后添加行。

有没有办法避免在删除和移位操作后出现空白行（即*有没有办法实际删除行？*）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-17T13:56:07.850

类似的问题[在这里](https://stackoverflow.com/questions/1834971/removing-a-row-from-an-excel-sheet-with-apache-poi-hssf)

我认为 shiftRows 方法调整了（区域？ - 抱歉，忘记电子表格术语）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-25T16:44:53.690

我不是 POI 方面的专家，这让我有些头疼，但我的理解是您可以在空白行上添加新行。您需要跟踪空白行的开始位置，然后使用 HSSFSheet.addRow(index) 添加行

# jquery - jquery.datepicker.js 正在工作，但它没有显示任何样式

> ID：11520697
> 
> 赞同：0
> 
> 时间：2012-07-17T10:34:21.353
> 
> 标签：jquery, calendar, datepicker

我必须使用日期选择器在输入文本中选择日期。所以我使用了 jquery.datepicker.js

现在，当我单击与输入框一起显示的日历图片时**，页面的最底部会**出现一个类似日历的东西，而且该日历没有使用我附加到我的 html 页面的**任何样式或任何 css 文件。**

请建议我一些可以提供帮助的东西。

除了我在网上找到的**datePicker.css**和**jquery.datePicker.js**的链接之外，我还在 head 标签中添加了这个脚本。

```
$(function() {
    $('.date-pick').datePicker({
        showOn: "button",
        buttonImage: "images/calendar.png",
    }); 
```

我正在使用的 datepicker 插件，我从 kelvinluck.com/assets/jquery/datePicker/v2/demo/index.html 获得的

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-17T23:26:24.843

啊，问题评论中的混乱 - 我也被抛出 - 是有一个名为 Datepicker 的标准 jQueryUI 插件，但这不是你使用的。

我会说您的代码缺少这些行或 kelvinluck 示例中的等效内容：

```
<!-- datePicker required styles -->
<link rel="stylesheet" type="text/css" media="screen" href="styles/datePicker.css"> 
```

或者服务器没有找到它，因为路径不正确或者它根本不在那个目录中。

# magento - 如何在 Magento 模块中使用 php 设置元标记？

> ID：11520702
> 
> 赞同：5
> 
> 时间：2012-07-17T10:34:35.440
> 
> 标签：magento

`.phtml`这在我的文件中不起作用。

```
$head = $this->getLayout()->getBlock('head');
$head->setTitle("title blah");
$head->setDescription("description goes here");
$head->setKeywords("apples bananas coconuts"); 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-17T11:08:42.857

我相信您会希望将该代码放入您的控制器，而不是您的视图文件中。

# sencha-touch - 如何使 sencha 应用程序的 phonegap 构建在黑莓设备上运行

> ID：11520703
> 
> 赞同：0
> 
> 时间：2012-07-17T10:34:42.227
> 
> 标签：sencha-touch, blackberry-webworks

我开发了一个煎茶触摸应用程序。它工作正常。现在我想在黑莓模拟器上部署/运行这个应用程序。我发现了很多与此相关的问题，但我不知道该怎么做。请有人帮我怎么做？如何使 sencha 应用程序的 phonegap 构建在黑莓模拟器上运行。

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-18T22:11:13.530

按照 phonegap 的说明设置黑莓环境。

构建您的项目并将构建目录的全部内容移动到 phonegap 通常放置其 index.html 的同一文件夹中。

按照 phonegap 的黑莓构建说明进行操作。

# javascript - 使画布内的线条闪烁

> ID：11520706
> 
> 赞同：1
> 
> 时间：2012-07-17T10:34:47.197
> 
> 标签：javascript, canvas, lines, kineticjs, blink

我目前正在使用[Kinetic Js](http://www.kineticjs.com/)和画布开发一个 HTML5 和 Javascript 项目。

我需要我的线条 ( `Kinetic.Line`) 闪烁。

我已经尝试过由内部带有函数的无限循环组成的东西`setTimeout`，但是那时我不能使用javascript（这样的缺点，因为那时我无法选择点！）。

有人有可以帮助我的想法吗？

```
while (1) {
setTimeout("stage.load(myjson[0])", 1000);
setTimeout("stage.load(myjson[1])", 1000);
} 
```

*（对不起我糟糕的英语）*

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-17T11:27:39.913

这是使用 KineticJS 使线条闪烁的一种方法。而不是使用 setTimeout，我认为最好使用内置在舞台对象中的 KineticJS onFrame 事件。然后您可以使用 setAlpha 设置线条的不透明度，并使用 getAlpha 获取线条的当前不透明度。setAlpha('0') 将使线条透明， setAlpha('1') 将使线条可见。

我在这里设置了一个小提琴： [JSFiddle](http://jsfiddle.net/QfEUP/1/)

这是实际闪烁该行的相关位：

```
var flashTime = 0;

stage.onFrame(function(frame){
    if(frame.time > (flashTime + 250)){;
        flashTime = frame.time;
        redLine.setAlpha(redLine.getAlpha() == 1 ? '0' : '1');
        layer.draw();                                
    };                                        
}); 
```

# javascript - JavaScript 中的数据污染

> ID：11520708
> 
> 赞同：16
> 
> 时间：2012-07-17T10:34:53.417
> 
> 标签：javascript

在阅读JavaScript 中的[navigator()](http://www.w3schools.com/jsref/obj_navigator.asp)对象时，我遇到了[taintEnabled()](http://www.w3schools.com/jsref/met_nav_taintenabled.asp)`taint()`函数描述，与类似的函数一样好`untaint()`，指的是所谓的“数据污染”。

谷歌搜索 net 和 StackOverflow 显示了对 Perl 语言的一些可能参考，但没有关于 JavaScript。我想知道，什么是数据处理以及如何使用这些功能？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2014-04-11T01:19:16.843

数据污染（或污染[检查](http://en.wikipedia.org/wiki/Taint_checking)）是一种语言功能，其中用户输入的数据被标记为被污染，该标记传播到从该输入派生的所有数据。因此，代码可以实现运行时断言，以确保不会使用受污染的数据调用安全关键代码（即防止 SQLi、XSS 类型的攻击）。

虽然 Netscape 在 v3 和 v4 的浏览器中实现了它，但遗憾的是，它的支持从未在其他地方实现，所以 @trejder 绝对正确，应该在 JavaScript 中避免它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-17T10:34:53.417

如前所述，互联网上关于数据污染的资源并不多，因为它似乎是一个早已被遗忘、弃用的技术和话题。但我在[findmeat.org](http://www.findmeat.org/tutorials/javascript/x361556.htm)上发现了一篇有趣的文章。对于`Navigator.taintEnabled()`它所说的方法（引用的各个部分，一些文本缩短了）：

> 数据污染支持是一种将数据发送回服务器的短暂手段。安全隐患变得不可行，整个数据污染的想法被弃用了。JavaScript 版本 1.2 中删除了该功能。仅支持此方法以防止脚本崩溃。此功能已被高度弃用，您可以预期它将来会导致运行时异常。您应该尝试将其删除以防止将来出现运行时错误。

似乎现在很少有浏览器支持这个功能（和类似的，提到的），并且在任何情况下都不应该使用它。即使浏览器完全实现了这一点，它也应该始终为此方法返回值 false。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2017-01-15T04:20:28.183

缺乏关于这个概念的信息会使新学习者付出更多的努力。这是我帮助他们的发现。

何时应启用污染，何时不启用，以下是值得考虑的两个要点：

1.  启用数据污染后，一个窗口中的 JavaScript 可以看到另一个窗口的属性，无论另一个窗口的文档是从哪个服务器加载的。但是，其他窗口的作者污染（标记）属性值或其他应该安全或私有的数据，并且 JavaScript 不能在未经用户许可的情况下将这些污染值传递给任何服务器。
2.  禁用数据污染时，脚本无法访问另一台服务器上窗口的任何属性。

一个有用的资源是[http://www.aisystech.com/resources/advtopic.htm#1009533](http://www.aisystech.com/resources/advtopic.htm#1009533)

# python - LINUX 行尾

> ID：11520713
> 
> 赞同：0
> 
> 时间：2012-07-17T10:34:58.477
> 
> 标签：python, linux, ascii, vi

我正在将 LINUX(Debian) 中的 ASCII 文件读入 Python CGI 脚本，在其中通过网页对其进行编辑然后保存，

如果我使用图形文本编辑器，则已编辑和未编辑的文件看起来相同并且格式正确。

使用 vi 编辑的文件包含`ctrl M`作为 EOL 标记，并且所有行合并为一个，但未编辑的文件格式正确。使用`:set List`在 vi 中查看控制字符，编辑后的文件仍然如前所述，但在未编辑的文件`$`中显示为 EOL 标记。我知道 LINUX EOL 是 ctrl 0x0D 但它是什么`$`？

为什么`$`格式正确`ctrl M`而不正确？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-17T10:36:48.867

`$`由`vi`（在某些模式下）显示。它不在文件内容中。你可以`od -cx yourfile`用来检查。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-17T14:45:32.343

在 vi 中，`$`匹配 EOL 字符。您可以更改 EOL 字符，`:set fileformat=XXX`如下[所示](http://www.jrwz.net/technical/vi/mytips.html#4)。我不能 100% 确定如果您更改文件类型，`$`它将与新的 EOL 匹配，因为我没有尝试过。但是该链接包含的信息将对其余答案很方便。

`^M`or`(CTRL-M)`字符大致[相当于回车](http://www.math.iitb.ac.in/~srg/LaTeX/howto.html)。

从您所说的来看，听起来图形文本编辑器正在使用类似 Mac 的 EOL，它只是一个没有换行符的回车 (CR)。因此，`^M`人物和所有的台词合二为一。如果它使用的是 Windows/DOS EOL，即回车加换行符 (CR+LF)，我会期望这些`^M`字符，但它的每一行都是单独的行。

[这个答案](https://stackoverflow.com/questions/5843495/what-does-m-character-mean-in-vim)解释了如何摆脱`^M`角色。我不会使用`dos2unix`，因为我不确定它会如何处理只有 CR 而不是 CR+LF。

# mysql - 由于 SQL 查询执行导致语法不正确

> ID：11520722
> 
> 赞同：0
> 
> 时间：2012-07-17T10:35:20.587
> 
> 标签：mysql, sql, ado.net

我正在尝试执行下一个查询

```
DECLARE @ponumber varchar(50)
DECLARE @gcas varchar(50)
SET @ponumber = '3864_ab03963'
SET @gcas = '81332119.'
EXEC(N'SELECT * FROM tCleanOrderTracking_prod 
       WHERE [PO number] = ' + @ponumber + ' AND [GCAS] = ' + @gcas) 
```

我收到一条错误消息

```
Msg 102, Level 15, State 1, Line 1
Incorrect syntax near '_ab03963'. 
```

我做错了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-17T10:38:09.880

您必须在 @gcas 参数后关闭单引号。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-17T10:40:59.553

您应该用引号将所有字符串参数括起来，例如：

`quote(@gcas)`而不是简单`@gcas`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-17T10:41:49.573

试试你`'`在@gcas 附近错过的这个。

```
DECLARE @ponumber varchar(50)
DECLARE @gcas varchar(50)
SET @ponumber = '3864_ab03963'
SET @gcas = '81332119.'
EXEC(N'SELECT * FROM tCleanOrderTracking_prod 
       WHERE [PO number] = ' + @ponumber + ' AND [GCAS] = ' + @gcas + ') 
```

# xml - @XMLRootElement 与 @XmlType

> ID：11520724
> 
> 赞同：42
> 
> 时间：2012-07-17T10:35:23.333
> 
> 标签：xml, jaxb, jax-ws

`@XMLRootElement`用和注释类有什么区别`@XMLType`。我一直在注释类，`@XMLType`何时该结构将在 XML 模式中多次使用以及`@XMLRootElement`何时仅使用一次 - 这是最好的方法吗？

我将在此处包括一个不同但相关的问题。注释有一个 propOrder 属性来指定它的元素出现的`@XMLType`顺序 - 是否有等效的`@XMLRootElement`？

我将这些注释与 JAX-WS 注释结合使用来创建 Web 服务，如果这有什么不同的话。

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2012-07-17T13:59:34.550

`XmlRootElement`和之间的区别`XmlType`是范围问题。请记住，此注释只是指示创建用于生成 XML 的模式。表示全局元素（`XmlRootElement`具有匿名或模式类型）：

```
<xs:element name=foo type="bar"> </xs:element> <-- schema type 
```

而 the`XmlType`用于表示本地元素（具有匿名或复杂类型）：

```
<xs:complexType name=bar> </xs:complexType> <-- complex type 
```

这里本地/全局的主要区别在于您的对象将出现的架构层次结构以及您是声明架构类型还是复杂类型。这两个注释的文档都写得很好，包括示例：

[`XmlRootElement`](http://docs.oracle.com/javase/6/docs/api/javax/xml/bind/annotation/XmlRootElement.html)

[`XmlType`](http://docs.oracle.com/javase/6/docs/api/javax/xml/bind/annotation/XmlType.html)

编辑：解决`propOrder`问题：如果您还声明了本地类型，则可以在全局元素上使用它：

```
@XmlRootElement (name="PersonElement")
@XmlType (propOrder={"firstname", "lastname"})
public class People{
    @XmlElement
    public String firstname;
    public String lastname;
} 
```

这将产生类似：

```
<xs:element name="PersonElement" type="People"/>
<xs:complexType name="People">
    <xs:sequence>
        <xs:element name="firstname" type="xs:string"/>
        <xs:element name="lastname" type="xs:string"/>
    </xs:sequence>
</xs:complexType> 
```

* * *

## 回答 #2

> 赞同：17
> 
> 时间：2012-07-17T15:57:28.590

> 当结构将在 XML 模式中多次使用时，我一直在使用 @XMLType 注释类，而在仅使用一次时使用 @XMLRootElement - 这是最好的方法吗？

要知道的一件事是，`@XmlRootElement`或`@XmlType`注释都不是必需的。它们不等同`@Entity`于 JPA。您可以使用没有任何注释的[**JAXB (JSR-222)实现：**](http://jcp.org/en/jsr/detail?id=222)

*   [http://wiki.eclipse.org/EclipseLink/Examples/MOXy/GettingStarted](http://wiki.eclipse.org/EclipseLink/Examples/MOXy/GettingStarted)

下面我将解释什么`@XmlRootElement`和`@XmlType`做什么。

* * *

**`@XmlRootElement`**

有时，您的 JAXB 实现需要仅基于正在处理的 XML 元素来实例化对象。`@XmlRootElement`注释是指定此关联的主要方式。请注意，如果一个类对应多个 XML 元素，`@XmlElementDecl`则应立即使用注释，

**角色 #1 - 指定根对象**

`@XmlRootElement`主要用于指定根对象。因此，当您的 JAXB 实现开始解组 XML 文档时，它知道要实例化什么对象。几乎所有后续注释都将基于从父类收集的信息。

***富***

```
@XmlRootElement(name="root")
public class Foo {

    private String name;

} 
```

***酒吧***

```
public class Bar {

    private String name;

} 
```

***XML***

```
<root>
    <name>Jane Doe</name>
</root> 
```

***演示***

```
Foo foo = (Foo) unmarshaller.unmarshal(xml);
Bar bar = unmarshaller.unmarshal(xml, Bar.class).getValue(); 
```

**角色 #2 - 替换组**

注释将`@XmlElementRef`实例化的对象类型委托给元素的名称/uri。这使得能够映射到用于表示继承的替换组的概念。

*   [http://blog.bdoughan.com/2010/11/jaxb-and-inheritance-using-substitution.html](http://blog.bdoughan.com/2010/11/jaxb-and-inheritance-using-substitution.html)

**角色 #3 - 任何内容**

`@XmlAnyElement`允许您映射 XML 文档的通配符部分。如果您指定`@XmlAnyElement(lax=true)`，则与域对象关联的元素将转换为相应的域对象。

*   [http://blog.bdoughan.com/2010/08/using-xmlanyelement-to-build-generic.html](http://blog.bdoughan.com/2010/08/using-xmlanyelement-to-build-generic.html)

* * *

**`@XmlType`**

**角色 #1 - 模式生成**

默认情况下，为 JAXB 上下文已知的每个 Java 类生成一个命名的复杂类型。您可以使用注解控制此类型的名称`@XmlType`，或者通过将名称指定为 来指定应生成匿名复杂类型`""`。

**角色 #2 - 继承和 xsi:type**

默认情况下，JAXB 利用`xsi:type`属性作为继承指示符。此属性的值对应于您在`@XmlType`注解上指定的名称和命名空间，或者是基于类的默认值。

*   [http://blog.bdoughan.com/2010/11/jaxb-and-inheritance-using-xsitype.html](http://blog.bdoughan.com/2010/11/jaxb-and-inheritance-using-xsitype.html)

**角色 #3 - 道具订单**

正如您提到的，您可以使用`@XmlType`来指定属性顺序。

*   [http://blog.bdoughan.com/2012/02/jaxbs-xmltype-and-proporder.html](http://blog.bdoughan.com/2012/02/jaxbs-xmltype-and-proporder.html)

**角色 #4 - 工厂方法**

`@XmlType`允许您指定可用于实例化域对象而不是默认构造函数的工厂类和/或方法。

*   [http://blog.bdoughan.com/2011/06/jaxb-and-factory-methods.html](http://blog.bdoughan.com/2011/06/jaxb-and-factory-methods.html)

* * *

> 我将在此处包括一个不同但相关的问题。@XMLType 注释有一个 propOrder 属性来指定它的元素出现的顺序 - @XMLRootElement 是否有等价物？

不，`propOrder`方面属于`@XmlType`注释。这是有道理的，因为复杂类型负责指定（或缺少）顺序。您当然可以同时使用这些注释。

```
@XmlRootElement
@XmlType(propOrder={"foo", "bar"}
public class Root {
    ...
} 
```

# ruby-on-rails - 如何使用 rspec 集成测试和工厂女孩测试 Rails 的 belongs_to 关系

> ID：11520726
> 
> 赞同：0
> 
> 时间：2012-07-17T10:35:29.730
> 
> 标签：ruby-on-rails, ruby-on-rails-3, rspec, capybara, factory-bot

仍在尝试了解关系并在 rails/rspec 中进行测试。

我有一个应用程序，它有一个模型测验，它属于一个图标模型，并且有很多测验。

我正在尝试测试是否使用 rspec/capybara 和 factory girl 在测验/新页面上创建了一个新测验，以在测试中创建我的数据。

这是我的测试，因为它是..

```
 describe "new quiz page" do

    let(:user) { FactoryGirl.create(:user) }
    let(:icon) { FactoryGirl.create(:icon) }

    before do
        sign_in user
        visit new_quiz_path
    end 

    ....

    describe "with valid info" do
      before do
        fill_in "Title",         with: "Example title"
        fill_in "Description",  with: "Example quiz description"
        select icon.title,              from: "quiz_icon_id"
      end

      it "should create new content" do
        expect { click_button submit }.to change(Quiz, :count).by(1)
      end
    end
end 
```

我得到的 rspec 错误是......

```
 Failure/Error: select icon.title,              from: "quiz_icon_id"
 Capybara::ElementNotFound:
   cannot select option, no option with text 'Icon 1' in select box 'quiz_icon_id' 
```

所以问题显然是没有可供选择的图标。一个肯定是用工厂女孩方法创建的，因为它可以找到标题，但不会在测试表中复制。我不知道如何让它发挥作用。

任何人都可以在这里提供一些指示吗？

谢谢，马克。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-17T21:40:52.637

感谢@Dty 提供 save_and_open_page 提示。这有助于我调试问题。

该图标未创建，或者至少在页面上运行测试时不存在。

为了解决这个问题，我做了这个而不是 let(:icon) 语句。

```
before(:all) { 1.times {  FactoryGirl.create(:icon) } }
after(:all) { Icon.delete_all } 
```

然后当我用 Icon.first.title 填写表格的测试。

```
before do
   fill_in "Title",         with: "Example title"
   fill_in "Description",  with: "Example quiz description"
   select Icon.first.title,         from: "quiz_icon_id"
end 
```

我真的不明白为什么我必须使用 before(:all) 语句来创建图标，而不是我之前使用的 'let' 语句。如果有人能提出为什么会这样，那将不胜感激。

# java - Java midlet 检测打印机

> ID：11520727
> 
> 赞同：1
> 
> 时间：2012-07-17T10:35:34.177
> 
> 标签：java, midlet, printers

我正在尝试将一个界面合并到我的 Midlet 应用程序中以检测打印机。可能是几种情况：- a。已添加到移动设备的打印机。湾。检测蓝牙打印机

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-15T05:29:42.067

场景 a) 您可能想查看黑莓 API（以防万一），但没有用于发现手机打印机的 JavaME 标准。

场景 b) JSR-82（参见 www.jcp.org）是 JavaME 蓝牙 API 的规范。大多数 JavaME SDK 都有蓝牙示例代码来帮助您入门。

但是，我从未听说有人尝试使用 JSR-82 将手机连接到打印机。如果我没记错的话，当 2 个设备具有匹配的配置文件（支持键盘配置文件的手机连接到物理键盘，耳机配置文件连接到实际耳机......）并且我从未听说过支持 JavaME 代码中的打印机配置文件的手机时（尽管，那部分，我可以相信，取决于电话）。这里的主要问题可能是 JSR-82 API 可能只允许您将未格式化的二进制数据发送到您连接的任何打印机，这意味着您必须在您的JavaME 代码让打印机了解您要打印的内容。

# html - 存在溢出-x：隐藏时溢出-y：可见不工作

> ID：11520728
> 
> 赞同：44
> 
> 时间：2012-07-17T10:35:45.700
> 
> 标签：html, css

在 Chrome 或 Firefox 中无法正常工作。有什么解决方法吗？

```
 <!DOCTYPE html>
   <html>
   <head></head>
   <body>
    <h3>overflow-y:visible</h3>

    with overflow-x:hidden
    <div style="overflow-x:hidden;overflow-y:visible;width:100px;height:100px;   position:relative;background:#666;">
        <div style="top:20px;left:20px;    width:420px;height:420px;position:absolute;background:#420;">
        </div>
    </div>

    without overflow-x:hidden
    <div style="overflow-y:visible;width:100px;height:100px;position:relative;background:#666;">
        <div style="top:20px;left:20px; width:420px;height:420px;position:absolute;background:#420;">
        </div>
    </div>

   </body>
   </html> 
```

[http://jsfiddle.net/sMNyK/](http://jsfiddle.net/sMNyK/)

现实生活场景涉及绝对必须具有overflow-x:hidden的组件，但这将触发需要能够在y方向上脱离元素的弹出菜单。我应该将这些菜单放在其父组件之外，还是有更好的解决方法？

* * *

## 回答 #1

> 赞同：42
> 
> 时间：2013-06-10T09:02:34.893

这可能与此处解决的问题有关：[CSS 溢出-x：可见；和溢出-y：隐藏；导致滚动条问题](https://stackoverflow.com/questions/6421966/css-overflow-x-visible-and-overflow-y-hidden-causes-scroll-bar)

简而言之，当使用`visible`for one `overflow-x`or `overflow-y`and something 而非`visible`for the other 时，该`visible`值被解释为`auto`。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-07-17T12:24:25.247

我认为你可以通过额外的包装来获得你想要的东西`div`，它可以隐藏但没有`position: relative`设置（[见小提琴](http://jsfiddle.net/sMNyK/3/)）：

```
<div style="overflow-y:visible;width:100px;height:100px;position:relative;background:#666;">
    <div style="overflow-x:hidden">
    ooooooooooooooooooooooooooooooooooooooooooooooo  
        <div style="top:20px;left:20px; width:420px;height:420px;position:absolute;background:#420;">
        </div>
    </div>
</div> 
```

# python - 过滤列表并按相关性排序项目

> ID：11520739
> 
> 赞同：2
> 
> 时间：2012-07-17T10:36:21.867
> 
> 标签：python, search, filtering

我有一个字符串列表：

```
my_list = ['Paul', 'Robinson', 'Hismith', 'Smith'] 
```

我需要对其进行过滤并按相关性对结果进行排序：

```
> filter_list(my_list, 'smith')
> ['Smith', 'Hismith']
> 
> filter_list(my_list, 'paul')
> ['Paul'] 
```

我的列表很小，如果我可以使用尽可能少的逻辑/库，那就太好了。

你会怎么做？

谢谢！

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-17T10:44:19.400

尝试以下操作（您可能需要调整`cutoff=`选项）：

```
import difflib

my_list = ['Paul', 'Robinson', 'Hismith', 'Smith']
print difflib.get_close_matches('Paul', my_list)
# ['Paul']
print difflib.get_close_matches('Smith', my_list)
# ['Hismith', 'Smith'] 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-07-17T10:38:07.557

很难说，什么是“相关性”。在我的回答中，我只接受`word`搜索在元素内并按其长度对结果进行排序（很有可能首先出现 100% 匹配）：

```
def filter_list(li, word):
    return sorted((elem for elem in li if word.lower() in elem.lower()), key=len) 
```

# php - 基于移动用户带宽的内容质量

> ID：11520742
> 
> 赞同：1
> 
> 时间：2012-07-17T10:36:25.617
> 
> 标签：php, apache, bandwidth

我想为高带宽的用户显示视频，为低带宽的用户显示静态图像。我可以向所有移动网络用户展示图像。

我找到了一个移动检测类[PHP Mobile Detect](http://code.google.com/p/php-mobile-detect/)。

解决此问题的最佳方法是什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-17T10:54:23.190

这对于 HTML/CSS/JS 来说是不可能的。您可以使用 Javascript 下载测试文件并测量时间，但这在我看来是浪费带宽。唯一能想到的简单机制是 Flash，它有一个内置功能（虽然我不知道它实际上是如何工作的）。

作为提示，我建议首先使用一个简洁的小按钮向所有用户显示静态图像，您可以在其中切换到视频（我自己 - 以及许多其他人 - 更喜欢这个，即使我有很好的连接）。

# c - 如何启动本身不是守护进程的守护进程的子进程

> ID：11520746
> 
> 赞同：1
> 
> 时间：2012-07-17T10:36:36.657
> 
> 标签：c, linux, unix, daemon

我在网上发现了一个[有趣的问题](http://www.cplusplus.com/forum/unices/20869/)。我在这里复制它以供参考。

> 我正在编写一个`daemon`执行程序的过程，然后如果它们以除 `EXIT_SUCCESS`;以外的状态退出，则重新启动它们。但是这些程序本身可能不想成为守护进程。如果我使用`fork()`然后调用`execv()`新的子进程也会是一个守护进程吗？
> 
> 我尝试运行firefox，但没有成功。那么，在这种情况下，如何将子进程作为正常进程启动？

该网站提供的解决方案不知何故无法说服我。有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-17T11:26:11.660

如果守护进程是指stdin、stdout 和stderr 的文件描述符没有连接到任何tty 或pts，那么是的。因此，只需为标准输入、标准输出和标准错误打开*一些东西就可以了。*

但是，您应该先自己尝试一下，firefox（此处）完美打开，stdin、stdout 和 stderr 重定向到`/dev/null`. 我认为主要是你调用`execv()`or`execve()`并保留`DISPLAY`变量。

*编辑*
如果您询问如何重新连接到原始描述符目的地，那么至少没有便携式解决方案。显然你不能重新连接到管道。但是，您可以（至少在 linux 下）重新连接到您来自的 tty/pts，甚至是文件（使用`/proc`文件系统和`readlink()`）。不过，您将不得不猜测“seek”（例如，如果原始命令是`foo 2>> bar`）。

# c - Windows：防止睡眠模式 - C 中的最小版本

> ID：11520750
> 
> 赞同：1
> 
> 时间：2012-07-17T10:36:57.510
> 
> 标签：c, windows, dev-c++

我想在 Windows 下拥有最简单的 C 程序版本，它可以防止操作系统在运行时进入睡眠模式或休眠模式。目前我有这个：

```
#include <windows.h>

int main(int argc, char **argv)
{
    while (1)
    {
        SetThreadExecutionState(ES_CONTINUOUS | ES_SYSTEM_REQUIRED);
        Sleep(300*1000); /* wait 300 seconds */
    }
    return 0;
} 
```

但是，这不起作用 - 如果我尝试使用 Orwell Dev-C++ 5.2.0.3 编译它，我会收到此错误：

[链接器错误] C:\Users\bachmann\AppData\Local\Temp\ccD8l1tp.o:disable_sleep.c:(.text+0x1e): undefined reference to `SetThreadExecutionState' collect2: ld returned 1 exit status

那么有什么问题呢？根据[MSDN](http://msdn.microsoft.com/en-us/library/windows/desktop/aa373208%28v=vs.85%29.aspx)，我认为这应该可行。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-17T10:39:53.927

那是一个链接器错误：您需要链接到`kernel32.lib`. 从问题中链接的页面：

```
要求

支持的最低客户端|Windows XP
支持的最低服务器|Windows Server 2003
标头|Winbase.h（包括 Windows.h）
库|Kernel32.lib <------
DLL|Kernel32.dll

```

# android - 是否有任何自动化工具可以让我轻松测试 Android UI？

> ID：11520752
> 
> 赞同：0
> 
> 时间：2012-07-17T10:37:02.877
> 
> 标签：android

我想避免 android 上不同版本的 UI 问题。这让我一团糟，因为我手上没有太多设备。但我仍然有模拟器，但我必须为所有操作系统版本重复。

我已经尝试过 MonkeyRunner，它需要很长时间才能编写脚本。我曾尝试过 Robotium，但由于我是一名测试人员，所以我不太了解该工具，但我已按照网站上的步骤操作，但大多数时候我都以失败告终。是否有任何自动化工具可以避免此 UI 问题并使我变得更简单。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-17T10:42:19.727

我知道的两个：

[https://github.com/calabash/calabash-android](https://github.com/calabash/calabash-android)

[http://www.gorillalogic.com/testing-tools/monkeytalk](http://www.gorillalogic.com/testing-tools/monkeytalk)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-05-21T14:04:31.490

对于 Android，它绝对[是 TestObject](http://www.testobject.com)。

“TestObjects 将移动应用程序 UI 测试作为软件即服务提供。我们的用户只需在几分钟内注册，即可通过浏览器访问真实和虚拟的移动设备和自动化工具。”

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-01T07:08:55.850

我最近回顾了一些 UI 测试框架：

Perfecto Mobile是一款基于云的测试系统，支持Android、iPhone、WinMo、BB。他们使用 OCR 来验证预期结果是否显示在屏幕上。

UI/应用程序练习器 Monkey 是一个基于 Python 的系统，适用于 Android（不是 iPhone）设备或模拟器，允许您将结果保存为屏幕截图并以编程方式与已知良好的屏幕截图进行比较。

如果您想运行快速运行的单元测试（可能不适合您），Robolectric 很好

我已经使用了基于 Robotium 的 calabash [-android ，但使用 Cucumber 将其包装在行为驱动开发语法中。](https://github.com/calabash/calabash-android)

*   您用简单的英语编写测试用例（提供了许多步骤来帮助您入门，但您可以根据需要自定义它）
*   您的测试用例可以在 Android 或 iPhone 上运行
*   您可以在模拟器、您的设备或[lesspainful.com上运行](http://www.lesspainful.com)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-11-20T14:39:17.507

有Testdroid Recorder [http://testdroid.com/product/testdroid-recorder](http://testdroid.com/product/testdroid-recorder)

它包装了 Robotium。

虽然不是免费的。12个月的费用为200美元。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-10-15T21:56:52.817

谷歌的新测试工具：uiautomator - [http://developer.android.com/tools/help/uiautomator/index.html](http://developer.android.com/tools/help/uiautomator/index.html)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-07-18T17:26:18.017

[http://dtmilano.blogspot.com/2012/02/monkeyrunner-interacting-with-views.html](http://dtmilano.blogspot.com/2012/02/monkeyrunner-interacting-with-views.html)上的指南可能有用。它讨论了使用修补版本的 ChimpChat（Java MonkeyRunner 实现）与 Android UI 交互。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-11-19T07:42:01.063

我建议使用以下测试自动化工具：ranorex 和 seeTest。

[http://www.ranorex.com/mobile-automation-testing/android-test-automation.html](http://www.ranorex.com/mobile-automation-testing/android-test-automation.html)

[http://expitest.com/](http://experitest.com/)

去看看是否满足你的要求

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2013-12-09T06:27:01.263

当需要测试不同的设备（不同的操作系统版本或分辨率）时，SeeTest（[http://expitest.com/ ）会很方便。](http://experitest.com/)您可以使用 Native/Web 属性，而不是使用图像来识别元素。因此，您可以依赖应用程序而不是依赖设备，这样就无需为每个设备创建新测试，而只需一个测试即可在所有设备上运行。

# symfony - Symfony2 i18n 路由 - 定义一系列需求

> ID：11520756
> 
> 赞同：0
> 
> 时间：2012-07-17T10:37:13.520
> 
> 标签：symfony

是否可以定义 Symfony2 路由规则中使用的语言环境数组，这样我就不必在每条路由中一遍又一遍地重复它，并为每条路由单独更改它，以防我更改支持的语言列表？

我知道在中进行快速*搜索和替换*很容易`routing.yml`，*但是*问题的范围可以很容易地扩大，因此它会引发这样的问题：是否可以在外部提供这个语言环境数组（即从数据库中读取它） ?

为了澄清 - 这是我现在拥有的一个例子：

```
page_show:
    pattern: /{_locale}/page/{slug}
    defaults: { _controller: myCompanymyBundle:Cms:pageShow }
    requirements:
        _locale: en|pl
        slug: "[^,]+"

news_archive:
    pattern: /{_locale}/news/archive
    defaults: { _controller: myCompanymyBundle:Cms:newsArchive }
    requirements:
        _locale: en|pl 
```

这是我想要的一个例子：

```
page_show:
    pattern: /{_locale}/page/{slug}
    defaults: { _controller: myCompanymyBundle:Cms:pageShow }
    requirements:
        _locale: languages
        slug: "[^,]+"

news_archive:
    pattern: /{_locale}/news/archive
    defaults: { _controller: myCompanymyBundle:Cms:newsArchive }
    requirements:
        _locale: languages 
```

数组在哪里`languages`，可以是 YAML 数组，也可以是外部提供的 PHP 数组；这不是很重要。

这对于进一步简化我正在编写的应用程序的配置非常有帮助。我想将尽可能多的配置提取到 config.yml 文件中。因此，如果我决定，例如，我想快速添加一种新语言并且我已经在业务逻辑和模板层中支持它，我只需要修改语言数组`config.yml`，瞧，它就完成了。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-08-21T18:06:28.397

那是每次都让我烦恼的事情。我唯一能提供的是将您的需求参数放入 app/config/parameters.yml

```
# src/App/Resources/config/routing.yml
sport:
    pattern: /{_locale}/{sport}
    defaults: { _controller: App:Vote:vote }
    requirements: { _locale: %routing_locales%, sport: %routing_sports% }

# app/config/parameters.yml
parameters:
    # routing requirement regex
    routing_sports:    'hockey|football' # available sports so far
    routing_locales:   'de|fr' # available locales so far 
```

# php - 在 symfony2 中使用资产提供 js 和 css 文件

> ID：11520758
> 
> 赞同：0
> 
> 时间：2012-07-17T10:37:19.090
> 
> 标签：php, symfony

下面是我的代码：

```
<head>
    {% stylesheets debug=true
           '@PractoPvrBundle/Resources/public/css/bootstrap.min.css'
           '@PractoPvrBundle/Resources/public/css/bootstrap-responsive.min.css'
    %}
    <link href="{{ asset_url }}" rel="stylesheet">
    {% endstylesheets %}
</head> 
```

我收到以下错误

```
An exception has been thrown during the rendering of a template (\"Route \"_assetic_4fec32d_0\" does not exist.\ 
```

需要帮助。我正在关注文档，但无法找出错误。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-08-07T17:02:22.013

此错误消息似乎是隐藏其出现的真正原因的消息之一。这意味着可能有多种解决方案可能有效，也可能无效。

对于那些和我一样遇到消息的人来说，这是原因和解决方案：

**原因：** 您的树枝文件使用“{{asset_url}}通过assetic调用js / css / image，但无论出于何种原因，该文件都不存在。你去确保火在那里。你重新加载页面，你会看到错误以上。

**解决方案：** php app/console cache:clear --env=dev

通常将其作为 www-data 运行是明智的。我在以任何其他用户身份运行时遇到问题。

这显然不是原始海报的原因或解决方案，但对于像我这样的人来说，发现这篇文章的错误信息相同，我希望这可以帮助某人。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-09-01T11:27:11.353

您可能忘记将捆绑包包含到资产配置中或忘记注释掉`bundles`设置：

```
assetic:
    debug:          "%kernel.debug%"
    use_controller: false
    #bundles:        [ ] 
```

# android - 避免片段重复（由于片段的 id 属性导致应用崩溃）

> ID：11520761
> 
> 赞同：1
> 
> 时间：2012-07-17T10:37:39.307
> 
> 标签：android

任务中可以有同一个 Activity 的多个实例。我的问题是，当我像这样声明 header-fragment 时：

```
 <fragment 
    android:name="fragments.TabletHeader"
    android:layout_width="match_parent"
    android:layout_height="56dp"
    android:id="@+id/header" /> 
```

它偶然发现了相同活动的第二次创建。我猜这是因为这个静态声明强制系统创建同一个片段的第二个实例，这是不允许的。我对吗 ？

解决这个问题的策略是什么。本质上我需要切换到动态方法，但我如何找出片段是否已经存在。请给我一些例子。

这是回溯：

```
07-17 14:34:34.593: E/AndroidRuntime(15546): android.view.InflateException: Binary XML file line #7: Error inflating class fragment
07-17 14:34:34.593: E/AndroidRuntime(15546):    at android.view.LayoutInflater.createViewFromTag(LayoutInflater.java:697)
07-17 14:34:34.593: E/AndroidRuntime(15546):    at android.view.LayoutInflater.rInflate(LayoutInflater.java:739)
07-17 14:34:34.593: E/AndroidRuntime(15546):    at android.view.LayoutInflater.inflate(LayoutInflater.java:489)
07-17 14:34:34.593: E/AndroidRuntime(15546):    at android.view.LayoutInflater.inflate(LayoutInflater.java:396)
07-17 14:34:34.593: E/AndroidRuntime(15546):    at android.view.LayoutInflater.inflate(LayoutInflater.java:352)
07-17 14:34:34.593: E/AndroidRuntime(15546):    at com.android.internal.policy.impl.PhoneWindow.setContentView(PhoneWindow.java:273)
07-17 14:34:34.593: E/AndroidRuntime(15546):    at android.app.Activity.setContentView(Activity.java:1835)
07-17 14:34:34.593: E/AndroidRuntime(15546):    at android.activity.MainActivity$1.dispatchMessage(MainActivity.java:112)
07-17 14:34:34.593: E/AndroidRuntime(15546):    at android.os.Looper.loop(Looper.java:137)
07-17 14:34:34.593: E/AndroidRuntime(15546):    at android.app.ActivityThread.main(ActivityThread.java:4514)
07-17 14:34:34.593: E/AndroidRuntime(15546):    at java.lang.reflect.Method.invokeNative(Native Method)
07-17 14:34:34.593: E/AndroidRuntime(15546):    at java.lang.reflect.Method.invoke(Method.java:511)
07-17 14:34:34.593: E/AndroidRuntime(15546):    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:790)
07-17 14:34:34.593: E/AndroidRuntime(15546):    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:557)
07-17 14:34:34.593: E/AndroidRuntime(15546):    at dalvik.system.NativeStart.main(Native Method)
07-17 14:34:34.593: E/AndroidRuntime(15546): Caused by: java.lang.IllegalArgumentException: Binary XML file line #7: Duplicate id 0x7f08000e, tag null, or parent id 0x0 with another fragment for android.fragments.TabletHeader
07-17 14:34:34.593: E/AndroidRuntime(15546):    at android.support.v4.app.FragmentActivity.onCreateView(FragmentActivity.java:275)
07-17 14:34:34.593: E/AndroidRuntime(15546):    at android.view.LayoutInflater.createViewFromTag(LayoutInflater.java:669)
07-17 14:34:34.593: E/AndroidRuntime(15546):    ... 14 more 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-17T11:41:21.773

我没有使用来自 XML 的片段，但使用 viewpager 足以看到一生的问题。我可以为您提供的一项建议是设置的标签。我知道使用 FrameAdapter 时标签的格式。使用事务添加时，您可以定义自己的标签。在xml的情况下，我怀疑Tag可能是Name参数。

因此，您可以使用 findFragmentByTag(String tag) 函数并尝试使用 Name 字段的值。如果这给了你一个有效的片段，你就准备好了。

希望这可以帮助。同样，答案是您可以尝试的假设。

编辑：另一种选择可能是查看 findFragmentById(R.id.header)

# sqlite - 如何为内存数据库中的 SQLite 分配名称

> ID：11520766
> 
> 赞同：2
> 
> 时间：2012-07-17T10:37:58.870
> 
> 标签：sqlite, in-memory-database

参考下面的代码

```
sqlite3 * db1;
sqlite3 * db2;
sqlite3_open("file:db1?mode=memory?cache=shared", &db1);
sqlite3_open("file:db2?mode=memory?cache=shared", &db2);
sqlite3_exec(db1, "create table t1 (a int)", NULL, NULL, NULL);
sqlite3_exec(db2, "create table t2 (a int)", NULL, NULL, NULL); 
```

是否可以为 db1 指定一个名称，例如“db1”，并为 db2 指定一个名称，例如“db2”，这样我就可以做到

```
sqlite3_exec(db1, "select * from db1.t1 inner join db2.t2 on db1.t1.a = db2.t2.a", NULL, NULL, NULL); 
```

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-12-04T09:11:33.283

您必须附加数据库，[请参阅](http://www.tutorialspoint.com/sqlite/sqlite_attach_database.htm)

# console - cygwin + console2 ctrl-c 键盘中断不起作用

> ID：11520767
> 
> 赞同：10
> 
> 时间：2012-07-17T10:38:04.020
> 
> 标签：console, cygwin, console2

我使用[console2](http://sourceforge.net/projects/console)作为 cygwin 的 shell，而 control-C 不起作用。

我已确保在我的 console2 设置中没有将 control-C 用作热键。

这就是我从 console2 运行 cygwin 的方式 `D:\Programs\Cygwin\bin\bash.exe --login -i`

要自己检查，请 `ping google.com -t`尝试使用控制 C 中断它。

这是我的 console2 console.xml 文件，[http ://pastebin.com/mZ3yHe6D](http://pastebin.com/mZ3yHe6D)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-26T16:01:02.553

这是 cygwin 中的一个错误，应该在即将发布的 cygwin 版本（1.7.17）中修复，请参见[此处](http://sourceforge.net/tracker/index.php?func=detail&aid=3553127&group_id=43764&atid=437332)

* * *

**更新：** 1.7.17 于 2012 年 10 月 20 日发布。问题现在确实修复了。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-10-30T11:10:08.493

所以我也通过 Windows 上的 Git Msys 安装（使用 MingW32）遇到了这个问题。

问题是 Ctrl + C 绑定到复制选择，这否定了将 Ctrl + C 中断传递到实际控制台的能力。重新分配该热键绑定允许您再次实际使用 Ctrl + C 来中断服务器任务等。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-06-04T15:47:23.407

在 Console2 中，将 Hotkey `Ctrl`+重新分配`C`给 other，然后终止将起作用。谢谢席尔瓦

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2017-08-18T08:10:57.557

除了重新分配热键，您还可以`Ctrl-Shift-C`在 Console2 中简单地按下键盘中断

# ios - IOS NSDateFormatter 问题

> ID：11520779
> 
> 赞同：1
> 
> 时间：2012-07-17T10:38:38.760
> 
> 标签：ios, datetime, date, nsdate, nsdateformatter

我们正在构建一个应用程序，该应用程序需要在设备上存储条目的日期，该应用程序将是国际化的，因此我们遇到了两个困境/挑战。

1.  用户偏好

    如果用户选择 12 小时而不是 24 小时格式，我们会从 [NSDate date] 返回一个像这样的日期 2012-07-17 11:26:03 AM 在 SQLite 数据库中排序不是最佳的，因为我们无法存储它作为一个日期。

2.  用户区域设置

    通常这是可以的，但是在这里我们有一个很棒的东西，叫做英国夏季。它在一个周期中每 10 月 25 日至 30 日增加一个小时，并在一个周期中每 3 月 25 日至 31 日删除一个小时，因此如果一年中的 8 个月没有进行调整，则时间落后一小时。

我需要实现的是一个一致的日期，格式如下：2012-07-17 11:26:03，无论设备位于何处，还要考虑 GMT+1 的位置。

任何帮助都是极好的。

***编辑********

```
NSDateFormatter *dateFormatter = [[NSDateFormatter alloc] init];
dateFormatter.dateFormat = @"yyyy-MM-dd'T'HH:mm";
NSTimeZone *gmt = [NSTimeZone timeZoneWithAbbreviation:@"GMT+01:00"];
[dateFormatter setTimeZone:gmt];
NSString *timeStamp = [dateFormatter stringFromDate:[NSDate date]];
NSDate *localDate = [dateFormatter dateFromString:timeStamp];

NSLocale* currentLocale = [NSLocale currentLocale]; 
NSString* countryCode = [currentLocale objectForKey:NSLocaleCountryCode];
NSLog(@"Country Code: %@", countryCode);
NSLog(@"Current Loacle: %@", currentLocale);
if(([countryCode isEqualToString: @"GB"])){
    NSDate *mydate = [NSDate date];
    NSDate *fiddlyFoo = [mydate dateByAddingTimeInterval:3600];
    NSLog(@"Print GMT +1 %@",fiddlyFoo); 
} else {
    NSLog(@"Print GMT Local   %@",localDate); 
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-17T11:44:23.927

我现在正在做这样的事情。请注意，NSDate“知道”当前时区和夏令时等。因此，您只需要以可排序的表示形式获取 GMT 版本的时间。我建议使用 RFC 3339，但您可以根据需要使用它的变体：

这段代码：

```
NSCalendar *gregorian = [[NSCalendar alloc]initWithCalendarIdentifier:NSGregorianCalendar];

// Create a local date for London, for testing purposes
NSDateComponents *comps = [NSDateComponents new];
[comps setTimeZone:[NSTimeZone timeZoneWithName:@"Europe/London"]];
[comps setDay:1];
[comps setMonth:7];
[comps setYear:2012];
[comps setHour:14];
NSDate *date = [gregorian dateFromComponents:comps];

// Just want to show this date is 2PM in London July 1st
NSDateFormatter *curFormat = [NSDateFormatter new];
[curFormat setDateStyle:NSDateFormatterFullStyle];
[curFormat setTimeStyle:NSDateFormatterFullStyle];
NSLog(@"Reference date is good no: %@", [curFormat stringFromDate:date]);

// So now we get the date as a rfc3339 string, referenced to GMT
NSString *timeString;
{
    NSDateFormatter *rfc3339 = [NSDateFormatter new];
    [rfc3339 setDateFormat:@"yyyy-MM-dd'T'HH:mm:ss'Z'"];
    rfc3339.timeZone = [NSTimeZone timeZoneWithName:@"UTC"];
    timeString = [rfc3339 stringFromDate:date];
}
// referenced to UTC (sortable with any other time), can save in SQL DB etc
NSLog(@"Date as rfc3339 string: %@", timeString);

// Now lets convert it back into a BST time
NSDate *newDate;
{
    NSDateFormatter *rfc3339 = [NSDateFormatter new];
    [rfc3339 setDateFormat:@"yyyy-MM-dd'T'HH:mm:ss'Z'"];
    rfc3339.timeZone = [NSTimeZone timeZoneWithName:@"UTC"];
    newDate = [rfc3339 dateFromString:timeString];

    // we want to show this as a string 2012-07-17 11:26:03
    NSDateFormatter *newFormatter = [NSDateFormatter new];
    [newFormatter setDateFormat:@"yyyy-MM-dd HH:mm:ss"]; // local time
    [newFormatter setTimeZone:[NSTimeZone timeZoneWithName:@"Europe/London"]];

    NSLog(@"Local string using 24 hour clock: %@", [newFormatter stringFromDate:newDate]);
} 
```

生成这个输出，我相信这是你想要的：

```
TimeTester[58558:f803] Reference date is good no: Sunday, July 1, 2012 9:00:00 AM Eastern Daylight Time
TimeTester[58558:f803] Date as rfc3339 string: 2012-07-01T13:00:00Z
TimeTester[58558:f803] Local string using 24 hour clock: 2012-07-01 14:00:00 
```

# android - Android 从 REST Web 服务解析 JSON

> ID：11520780
> 
> 赞同：0
> 
> 时间：2012-07-17T10:38:38.577
> 
> 标签：android, json, web-services, rest

我在[http://susana.iovanalex.ro/esculap/ws2.php?key=abc&action=getpatientlist](http://susana.iovanalex.ro/esculap/ws2.php?key=abc&action=getpatientlist)有一个 REST Web 服务，它返回类似于以下内容的 JSON 有效负载：

```
[{"id":"15","nume":"Suciu","prenume":"Monica","location":"Cardiologie, Salon 4, Pat 
   2","alarm_pulse_min":"60","alarm_pulse_max":"90","alarm_oxy_min":"90"},
 {"id":"101","nume":"Test Node","prenume":"Arduino","location":"UPT Electro, 
   B019","alarm_pulse_min":"50","alarm_pulse_max":"160","alarm_oxy_min":"93"},
 {"id":"160","nume":"Vasilescu","prenume":"Ion","location":"Cardiologie, Salon 4, Pat 
   2","alarm_pulse_min":"60","alarm_pulse_max":"120","alarm_oxy_min":"80"},
  {"id":"161","nume":"Lungescu","prenume":"Simion","location":"Pneumologie, Salon 5, Pat 
   5","alarm_pulse_min":"70","alarm_pulse_max":"110","alarm_oxy_min":"95"},
 {"id":"162","nume":"Paunescu","prenume":"Ramona","location":"Cardiologie, Salon 4, Pat 
   2","alarm_pulse_min":"0","alarm_pulse_max":"0","alarm_oxy_min":"0"}] 
```

在按照[http://www.androidcompetencycenter.com/2009/10/json-parsing-in-android/](http://www.androidcompetencycenter.com/2009/10/json-parsing-in-android/)的教程使用 Android 的解析器时，我想在 ArrayList 中返回处理后的数据。

我不断收到以下错误：

```
 org.json.JSONException: Value [{"prenume":"Monica", ... "nume":"Paunescu"}] of type         
 org.json.JSONArray cannot be converted to JSONObject. 
```

你能给我一个代码片段或一个关于我在哪里可以找到更多信息的指针吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-17T10:43:14.163

你的整个 Json 是 JSONObjects 的 JSONArray。

您尝试获取 JSONObject 即：

```
 JSONObject jObject = new JSONObject("[{"prenume":"Monica", ... "nume":"Paunescu"}]"); 
```

但那是一个数组！

尝试：

```
 JSONArray jArray = new JSONArray("[{"prenume":"Monica", ... "nume":"Paunescu"}]");

 for(int i=0; i < jArray.length(); i++){
      JSONObject jObject = jArray.getJSONObject(i);
      String prenume = jObject.getString("prenume");
      Log.i("TAG", "Prenume is: "+ prenume);
 } 
```

这一切都在这里解释：http: [//www.json.org/](http://www.json.org/)和这里[http://www.json.org/java/](http://www.json.org/java/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-17T10:59:34.330

最好的办法是使用 GSON 来解析您作为输出收到的 JSONAray 字符串。这有助于您将数据作为真实对象而不是字符串来管理。

请查看以下帖子以解析您的 JSON 数组

[如何使用 Gson 在 Android 中解析 JSON 数组](https://stackoverflow.com/questions/8371274/how-to-parse-json-array-in-android-with-gson)

您唯一需要做的就是使用 JSON 输出中的参数名称创建类

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-17T10:43:41.817

请参阅此处[http://www.json.org/](http://www.json.org/)您的 Web 服务包含一个 json 数组而不是 json 对象，因此解析为：

```
JSONArray JSONArrays = new JSONArray(jString); 

for(int n = 0; n < JSONArrays.length(); n++)
{
    JSONObject object = JSONArrays.getJSONObject(n);
    // do some stuff....
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-17T11:00:11.777

你可以参考这个链接

[https://stackoverflow.com/a/11446076/1441666](https://stackoverflow.com/a/11446076/1441666)

```
{
"result": "success",
"countryCodeList":
[
  {"countryCode":"00","countryName":"World Wide"},
  {"countryCode":"kr","countryName":"Korea"}
] 
} 
```

下面我正在获取国家/地区详细信息

```
JSONObject json = new JSONObject(jsonstring);
JSONArray nameArray = json.names();
JSONArray valArray = json.toJSONArray(nameArray);

JSONArray valArray1 = valArray.getJSONArray(1);

valArray1.toString().replace("[", "");
valArray1.toString().replace("]", "");

int len = valArray1.length();

for (int i = 0; i < valArray1.length(); i++) {

 Country country = new Country();
 JSONObject arr = valArray1.getJSONObject(i);
 country.setCountryCode(arr.getString("countryCode"));                        
 country.setCountryName(arr.getString("countryName"));
 arrCountries.add(country);
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-07-14T06:02:20.017

我认为您应该更好地使用可以为您处理 REST 请求和对象序列化/反序列化的库。看看[在 android 中使用 REST api 的推送消息](https://stackoverflow.com/questions/17289906/push-messages-using-rest-api-in-android/17636909#17636909)

# java - 使用 Jackson 将 Double 序列化到小数点后 2 位

> ID：11520781
> 
> 赞同：46
> 
> 时间：2012-07-17T10:38:50.647
> 
> 标签：java, jackson

我正在使用`Jackson`, with `Spring MVC`, 将一些简单的对象写成`JSON`. 其中一个对象具有`amount`类型的属性`Double`。（我知道不`Double`应该将其用作货币金额。但是，这不是我的代码。）

在`JSON`输出中，我想将金额限制为小数点后 2 位。目前显示为：

```
"amount":459.99999999999994 
```

我试过使用 Spring 3 的`@NumberFormat`注释，但在那个方向上没有成功。看起来其他人也有问题：[MappingJacksonHttpMessageConverter's ObjectMapper does not use ConversionService when binding JSON to JavaBean propertiesenter link description here](https://jira.springsource.org/browse/SPR-6731)。

此外，我尝试使用`@JsonSerialize`带有自定义序列化程序的注释。
在模型中：

```
@JsonSerialize(using = CustomDoubleSerializer.class)
public Double getAmount() 
```

和序列化器实现：

```
public class CustomDoubleSerializer extends JsonSerializer<Double> {
    @Override
    public void serialize(Double value, JsonGenerator jgen, SerializerProvider provider) throws IOException, JsonGenerationException {
        if (null == value) {
            //write the word 'null' if there's no value available
            jgen.writeNull();
        } else {
            final String pattern = ".##";
            //final String pattern = "###,###,##0.00";
            final DecimalFormat myFormatter = new DecimalFormat(pattern);
            final String output = myFormatter.format(value);
            jgen.writeNumber(output);
        }
    }
} 
```

“`CustomDoubleSerializer`似乎”工作。但是，任何人都可以建议任何其他更简单（或更标准）的方式来做到这一点。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2017-09-27T12:53:42.907

> *我知道不`Double`应该将其用作货币金额。但是，这不是我的代码。*

确实，不应该。`BigDecimal`是存储货币金额的更好选择，因为它是**无损的** *，并且*可以更好地控制小数位。

所以对于*确实可以控制代码*的人来说，它可以这样使用：

```
double amount = 111.222;
setAmount(new BigDecimal(amount).setScale(2, BigDecimal.ROUND_HALF_UP)); 
```

这将序列化为`111.22`. 不需要自定义序列化程序。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2015-08-06T22:31:14.923

我的项目中有类似的情况。我已将格式化代码添加到 POJO 的 setter 方法中。DecimalFormatter、Math 和其他类最终将值四舍五入，但是，我的要求不是四舍五入，而只是将显示限制为小数点后 2 位。

我重新创建了这个场景。Product 是一个 POJO，它有一个 member `Double amount`。JavaToJSON 是一个将创建 Product 实例并将其转换为 JSON 的类。设置器将处理格式到小数点后 2 位`setAmount`。`Product`

这是完整的代码。

产品.java

```
package com;

import java.math.BigDecimal;
import java.math.RoundingMode;

public class Product {

    private String name;
    private Double amount;
    public String getName() {
        return name;
    }
    public void setName(String name) {
        this.name = name;
    }
    public Double getAmount() {
        return amount;
    }
    public void setAmount(Double amount) {
        BigDecimal bd = new BigDecimal(amount).setScale(2, RoundingMode.FLOOR);
        this.amount = bd.doubleValue();
    }

    @Override
    public String toString() {
        return "Product [name=" + name + ", amount=" + amount + "]";
    }
} 
```

JavaToJSON.java

```
package com;

import java.io.File;
import java.io.IOException;

import org.codehaus.jackson.JsonGenerationException;
import org.codehaus.jackson.map.JsonMappingException;
import org.codehaus.jackson.map.ObjectMapper;

public class JavaToJSON {

    public static void main(String[] args){

        ObjectMapper mapper = new ObjectMapper();

        try {
            Product product = new Product();
            product.setName("TestProduct");
            product.setAmount(Double.valueOf("459.99999999999994"));

            // Convert product to JSON and write to file
            mapper.writeValue(new File("d:\\user.json"), product);

            // display to console
            System.out.println(product);

        } catch (JsonGenerationException e) {

            e.printStackTrace();

        } catch (JsonMappingException e) {

            e.printStackTrace();

        } catch (IOException e) {

            e.printStackTrace();

        }
    }

} 
```

我没有积累足够的积分，所以我无法上传截图给你看输出。

希望这可以帮助。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2018-06-01T14:03:00.970

关于上面所说的，我只是想修复一些东西，这样人们就不会像我一样浪费时间了。一个应该实际使用

```
BigDecimal.valueOf(amount).xxx 
```

代替

```
new BigDecimal(amount).xxx 
```

这实际上有点关键。因为如果你不这样做，你的十进制金额就会被搞砸。这是浮点表示的限制，如此处[所述](https://stackoverflow.com/a/16774279/2273551)。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2020-06-16T13:51:51.510

到目前为止我见过的最好的方法是创建一个自定义的序列化程序和`@JsonSerializer(using=NewClass.class)`. 想尝试一下`@JsonFormat(pattern=".##")`，但根据 OP 的一条评论它可能不起作用（我认为格式化程序不尊重这一点）

见这里：[https ://github.com/FasterXML/jackson-databind/issues/632](https://github.com/FasterXML/jackson-databind/issues/632)

```
public class MoneyDeserializer extends JsonDeserializer<BigDecimal> {

    private NumberDeserializers.BigDecimalDeserializer delegate = NumberDeserializers.BigDecimalDeserializer.instance;

    @Override
    public BigDecimal deserialize(JsonParser jp, DeserializationContext ctxt) throws IOException, JsonProcessingException {
        BigDecimal bd = delegate.deserialize(jp, ctxt);
        bd = bd.setScale(2, RoundingMode.HALF_UP);
        return bd;
    }    
} 
```

**但是**，虽然更方便且编写的代码更少，但通常，决定字段的规模是业务逻辑的关注点，而不是（反）序列化的一部分。要清楚这一点。杰克逊应该能够按原样传递数据。

* * *

## 回答 #5

> 赞同：-4
> 
> 时间：2014-03-21T19:07:17.790

请注意，459.99999999999994 实际上是 460，并且预计会以这种方式进行序列化。所以，你的逻辑应该比仅仅丢数字更棘手。我可能会提出类似的建议：

```
Math.round(value*10)/10.0 
```

您可能希望将其放入 setter 中，并摆脱自定义序列化。

# c++ - openGL 平滑线

> ID：11520784
> 
> 赞同：0
> 
> 时间：2012-07-17T10:39:10.023
> 
> 标签：c++, image, opengl, smoothing

我有以下图片

![在此处输入图像描述](../Images/b42257a8107b384cd4e12866e6bc1e10.png)

我希望线条流畅，我怎样才能做到这一点？我在桌面 Windows 应用程序上使用 openGL。我注意到 webGL 等价物被平滑了。我尝试使用搅拌机进行冲浪（增加多边形的数量），但没有奏效。

解决方案越简单，我就越能理解它

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-17T11:41:52.680

解决了这个问题：

[http://www.qtforum.org/article/22515/multisample-aa-in-a-qglwidget.html](http://www.qtforum.org/article/22515/multisample-aa-in-a-qglwidget.html)

# sql - IP 地址/主机名匹配正则表达式

> ID：11520786
> 
> 赞同：0
> 
> 时间：2012-07-17T10:39:16.330
> 
> 标签：sql, regex

我需要用**正则表达式**匹配两个 ipaddress/hostname ：像 20.20.20.20

```
should match with      20.20.20.20
should match with      [http://20.20.20.20/abcd]
should not match with  20.20.20.200
should not match with  [http://20.20.20.200/abcd]
should not match with  [http://120.20.20.20/abcd]
should match with      AB_20.20.20.20
should match with      20.20.20.20_AB 
```

目前我正在使用类似这样的正则表达式：`"(.*[^(\w)]|^)20.20.20.20([^(\w)].*|$)"` 但它不适用于最后两种情况。因为**"\w"**等于 [a-zA-Z0-9_]。这里我还要去掉**“_”**下划线。我尝试了不同的组合，但未能成功。请帮我解决这个正则表达式。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-17T13:02:03.913

```
(.*[_]|[^(\w)]|^)10.10.10.10([_]|[^(\w)].*|$) 
```

我在这上面花了一些时间。这个正则表达式似乎有效。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-18T08:58:55.500

我不知道您使用的是哪种语言，但使用类似 Perl 的正则表达式，您可以使用以下更短的表达式：

```
(?:\b|\D)20\.20\.20\.20(?:\b|\D)
```

这有效地说明了：

1.  匹配单词边界（`\b`，这里：单词的开头）或非数字（`\D`）。
2.  匹配 IP 地址。
3.  匹配单词边界（`\b`，这里：单词的结尾）或非数字（`\D`）。

**注1：** `?:`导致分组`(\b|\D)`不创建反向引用，即存储它找到的内容。您可能不需要存储单词边界/非数字。如果您确实需要存储它们，只需删除两个`?:`s.

**注意 2：**这可能是挑剔的，但您需要转义正则表达式的 IP 地址部分中的点，否则您还会匹配这些位置的任何其他字符。使用`20.20.20.20`而不是`20\.20\.20\.20`，例如，当您搜索日志文件时，您可能会匹配带有时间戳的行...

```
2012-07-18 20:20:20,20 INFO 应用启动成功，IP=20.20.20.200
```

`20.20.20.200`...根据您的问题，即使您正在寻找 IP 地址并且该特定的 ( ) 明确不应该匹配。诚然，这个例子是一个非常极端的例子。

# php - PHP 函数 fsockopen 永远不会返回 false

> ID：11520788
> 
> 赞同：3
> 
> 时间：2012-07-17T10:39:25.017
> 
> 标签：php, fsockopen

有人可以帮助我使用 php 函数 fsockopen 吗？

如果我这样调用函数：

```
$fp = fsockopen('xywqnda.com', 80, $errno, $errstr, 10); 
```

使用不可用的主机域，它永远不会返回 false，我不明白为什么！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-17T12:05:54.463

啊，你正在使用UDP。您的原始示例没有显示这一点。这改变了事情。来自 PHP 手册：

> **警告**
> 
> 即使远程主机无法访问，UDP 套接字有时也似乎已打开且没有错误。只有当您从套接字读取或写入数据时，该错误才会变得明显。这样做的原因是因为 UDP 是一种“无连接”协议，这意味着操作系统不会尝试为套接字建立链接，直到它真正需要发送或接收数据。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-17T11:10:35.687

```
// displays all warnings, notices and errors
ini_set('display_errors', 1); 
error_reporting(E_ALL);

$fp = fsockopen('xywqnda.com', 80, $errno, $errstr, 10); 
```

连接尝试将在 10 秒后超时。
由于域不可用，您将收到警告。
$errno 和 $errstr 将包含系统错误号和错误消息。
该函数将返回 false，因此 $fp 将等于 false。

文档：[fsockopen](http://php.net/fsockopen)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-17T10:47:27.653

尝试这个

```
ini_set("display_errors","on") 
```

如果域无效，它将显示警告，除了该函数将返回 TRUE 因为返回了文件指针，这意味着文件创建成功，只有当它无法创建文件时才会返回 FALSE。

# makefile - Eclipse CDT MinGW - 跳过规则，没有这样的文件或目录错误

> ID：11520789
> 
> 赞同：0
> 
> 时间：2012-07-17T10:39:41.173
> 
> 标签：makefile, mingw

我正在尝试为项目创建调试和发布配置，但我无法弄清楚出了什么问题。

出于某种原因，当我执行“make debug”时，make 会跳过“all”的依赖项，给我一堆来自 g++ 的错误（没有这样的文件或目录）。更奇怪的是，如果我“全力以赴”，一切都会很好。

这是生成文件：

```
SHELL=/bin/sh
CXX=g++
LIBS=-LE:\Software\StrategyEngine\Release -llibdebug
CFLAGS=-Wall -O3 -IE:\Software\StrategyEngine\include

BDIR=Build\Release

debug: CFLAGS+=-g -DDEBUG
debug: LIBS=-LE:\Software\StrategyEngine\Debug -llibdebug
debug: BDIR=Build\Debug

OBJS= $(BDIR)\blocksort.o  \
      #... more object files
      $(BDIR)\CompressionStream.o

debug: all

all: $(OBJS) 
    $(CXX) $(LIBS) -shared -o $(BDIR)\libbz2.dll $(OBJS)
    $(CXX) $(LIBS) $(CFLAGS) -o $(BDIR)\bzip2-shared bzip2.cpp $(BDIR)\libbz2.dll

$(BDIR)\blocksort.o: blocksort.cpp
    $(CXX) $(CFLAGS) -c blocksort.cpp -o $(BDIR)\blocksort.o
#.... more rules for each object file defined in OBJS

clean: 
    rm -f Build\debug\* Build\release\* 
```

为什么会这样？我在makefile中找不到任何错误。

我正在使用在 Windows 7 上运行的 mingw 编译器套件（make 版本 3.81）。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-17T10:56:17.690

makefile 中的目标文件位置`BDIR`不会根据构建模式而改变。

我建议重构脚本如下：

```
SHELL=/bin/sh
CXX=g++

BUILD := debug # default mode

CFLAGS.release := -Wall -O3 -IE:/Software/StrategyEngine/include -D_NDEBUG
CFLAGS.debug   := -Wall -g  -IE:/Software/StrategyEngine/include -DDEBUG
LIBS.release := -LE:/Software/StrategyEngine/Release -llibdebug
LIBS.debug   := -LE:/Software/StrategyEngine/Debug -llibdebug
BDIR.release := Build/Release
BDIR.debug   := Build/Debug

CFLAGS := ${CFLAGS.${BUILD}}
LIBS := ${LIBS.${BUILD}}
BDIR := ${BDIR.${BUILD}}

OBJS= $(BDIR)/blocksort.o  /
      #... more object files
      $(BDIR)/CompressionStream.o

all: $(OBJS)
    $(CXX) $(LIBS) -shared -o $(BDIR)/libbz2.dll $(OBJS)
    $(CXX) $(LIBS) $(CFLAGS) -o $(BDIR)/bzip2-shared bzip2.cpp $(BDIR)/libbz2.dll

$(BDIR)/blocksort.o: blocksort.cpp
    $(CXX) $(CFLAGS) -c blocksort.cpp -o $(BDIR)/blocksort.o
#.... more rules for each object file defined in OBJS

clean:
    rm -f Build/debug/* Build/release/*

.PHONY: all clean 
```

并像这样使用它：

```
make BUILD=debug
make BUILD=release 
```

# php - wordpress 在一页上多页

> ID：11520790
> 
> 赞同：0
> 
> 时间：2012-07-17T10:39:51.150
> 
> 标签：php, jquery, wordpress

我正在用 wordpress 开发一个 CMS 网站...

最终的网页应该是这样的：

[网站](https://stackoverflow.com/questions/11430123/wordpress-subpages)

我只想要一页（首页），并且我想在其中显示子页面标题。（关于，家，人）...

因此，当单击子页面标题时，它应该展开并在面板中、同一页面和同一位置显示页面内容。

关于相同的任何想法？提前致谢...：）

**编辑1**

[accordions] [accordion title="Accordion 1"] Accordion 1 内容 [/accordion] [accordion title="Accordion 2"] Accordion 2 内容 [/accordion] [accordion title="Accordion 3" last="last" ] Accordion 3 内容在这里 [/accordion] [/accordions]

将以上代码放入页面内容后如下所示：

![在此处输入图像描述](../Images/44d0e4d1a567c533ee274588721e9c89.png)

但是点击**ACCORDION 1**它没有得到扩展..

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-17T11:21:50.333

您可以编写自己的模板，该模板执行查询（检查子页面），并在 div 标签之间添加其内容。

完成后，就该 JS/jQuery 了。搜索选项卡 jQuery 脚本，以便获得一些信息。

无论如何，您主要需要使用 hide() / show() 函数来达到类似的效果。

另外，您是否制作了该模板，并且您熟悉 WP 中的编程吗？

```
<?php
$args = array(
    'numberposts' => -1,
    'post_parent' => $post->ID,
    'post_type' => 'page',
    'post_status' => 'publish',
    'orderby' => 'menu_order,title',
    'order' => 'ASC'
);
$my_pagelist = get_children($args);
?> 
```

上面是显示子页面内容的代码，下面是标签的jQuery教程。

[http://jqueryui.com/demos/tabs/](http://jqueryui.com/demos/tabs/)

**编辑：**

另外，请查看此站点 - [http://www.learningjquery.com/2006/09/slicker-show-and-hide](http://www.learningjquery.com/2006/09/slicker-show-and-hide)它会显示一些有关显示/隐藏功能的信息。有关 WP get_children 函数的更多信息，请参见此处 - [http://codex.wordpress.org/Function_Reference/get_children](http://codex.wordpress.org/Function_Reference/get_children)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-17T10:48:34.627

如果我正确理解您的问题，请使用最新版本的 WordPress。

登录到您的管理面板。

单击“设置”选项卡，然后单击“阅读”子选项卡。

将“首页显示”选项更改为“静态页面”。

# dns - 我可以购买顶级域名吗？

> ID：11520792
> 
> 赞同：1
> 
> 时间：2012-07-17T10:39:57.210
> 
> 标签：dns, domain-name

这是一个关于TLD（顶级域）的简单问题。有人可以购买顶级域并充当域根吗？如果是这样，那怎么办？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-17T10:46:10.770

你可以，但它会花费你……准确地说是 185,000 美元。今年的招生已经结束，但明年请再次访问[ICANN](https://gtldreg.icann.org)网站了解详细信息。查看一些[新闻文章](http://www.techspot.com/news/47031-icann-selling-custom-top-level-domains-for-185000.html)以获取更多详细信息

# php - 未定义变量：POST - PHP 和 MySQL

> ID：11520795
> 
> 赞同：3
> 
> 时间：2012-07-17T10:40:01.583
> 
> 标签：php, mysql

我有这样的表格：

```
<form name="htmlform" method="post" action="script/gen.php?postData">
            <table width="450px">
                </tr>
                <tr>
                    <td valign="top">
                        <label for="customer">Customer:</label>
                    </td>
                    <td valign="top">
                        <input  type="text" name="customer" maxlength="50" size="30">
                    </td>
                </tr>

                <tr>
                    <td valign="top"">
                        <label for="nol">Number of licences: </label>
                    </td>
                    <td valign="top">
                        <input type="text" name="nol" maxlength="50" size="30">
                    </td>
                </tr>

                <tr>
                    <td>
                        <form method="post" id="submit" action="script/gen.php">
                            <input type="button" onClick="getKey()"; value="Generate key"/>
                    </td>
                </tr>

                <div id="innhold">
                            <h4>Licence Key: </h>
                </div>

                <tr>
                    <td colspan="2" style="text-align:center">
                        <input type="submit" value="Submit"> 
                    </td>
                </tr>

                </table>
            </form> 
```

感兴趣的代码行是：

```
<input type="text" name="nol" maxlength="50" size="30"> 
```

和

```
<input  type="text" name="customer" maxlength="50" size="30"> 
```

我尝试将此信息写入这样的数据库：

```
function postData($key1) {
//just to check if the key is equal to the one thats posted to the user
//echo '<h5>From postData' . $key1 . '</h5>';
/*echo '<script type="text/javascript"> alert("The order has been submitted successfully");
location = "/Webpanel/index.html";
</script>';*/

$customerVar = $POST['customer'];
$nolVar = $POST['nol'];

mysql_connect("localhost","root","") or die(mysql_error());
mysql_select_db("licencedatabase");

$query_add = "INSERT INTO licence (`customer_name`,`licence_count`) VALUES ('$customerVar','$nolVar')";
$query_exec = mysql_query($query_add) or die(mysql_error()); 
mysql_close();
} 
```

但我不断收到错误：

```
Undefined variable: POST 
```

我怎样才能做到这一点？提前致谢。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-07-17T10:43:11.693

它的[$_POST](http://php.net/manual/en/reserved.variables.post.php)不是`$POST`。

```
$customerVar = $_POST['customer'];
$nolVar = $_POST['nol']; 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-17T10:44:31.597

尝试使用`$_POST`而不是`$POST`

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-07-17T10:43:10.667

那是因为它被称为`$_POST`.

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-07-17T10:42:59.480

访问超全局 POST 使用`$_POST`not`$POST`

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-07-17T10:45:28.773

所有 PHP 超全局变量（例如 GET 和 POST 的超全局变量）都带有下划线前缀，因此：`$POST`应该是`$_POST`.

在这里查看有关 PHP 中可用超全局变量的更多信息：http: [//php.net/manual/en/language.variables.superglobals.php](http://php.net/manual/en/language.variables.superglobals.php)

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-07-17T11:24:00.363

尝试使用`$_POST`而不是`$POST`

检查以下示例：

预定义`$_POST`变量用于从使用 发送的表单中收集值`method="post"`。

使用 POST 方法从表单发送的信息对其他人是不可见的，并且对发送的信息量没有限制。

**例子：**

```
<form action="submitform.php" method="post">
    Name: <input type="text" name="fname" />
    Age:  <input type="text" name="age" />
    <input type="submit" />
</form> 
```

当用户单击`"Submit"`按钮时，URL 将如下所示：[http://localhost/submitform.php](http://localhost/submitform.php)

该`"submitform.php"`文件现在可以使用该`$_POST`变量来收集表单数据（表单字段的名称将自动成为`$_POST`数组中的键）：

```
Welcome <?php echo $_POST["fname"]; ?>!<br />
You are <?php echo $_POST["age"]; ?>  years old. 
```

也许你会明白。

# facebook - 通过 Codeigniter 获取 Facebook 个人资料图片

> ID：11520799
> 
> 赞同：-2
> 
> 时间：2012-07-17T10:40:17.763
> 
> 标签：facebook, codeigniter

我是 codeigniter 的新手，我想从我的 facebook id 获取个人资料图片、朋友列表，因为我是新手，所以我希望逐步解释

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-17T10:43:10.617

*   第 1 步 - 获取用户 Facebook ID -**完成**
*   Step2 - 调用这个 URL -`https://graph.facebook.com/USER_FBID/picture`
*   第 3 步 - 你完成了 :)

通常我会简单地将该网址放在`<img>`标签中 -

`<img src="https://graph.facebook.com/4/picture" width="100">`

现场演示（[查看这篇文章的来源以获得证明](https://stackoverflow.com/revisions/d788ee5e-fd5d-4140-8fdd-2399ff1a611e/view-source)；） -

![](../Images/7b8e885789bda84bd43a236df816e801.png)

*是的，马克扎克伯格的 Facebook ID 是`4`*

# logging - 剥离 Android NDK 日志记录

> ID：11520801
> 
> 赞同：0
> 
> 时间：2012-07-17T10:40:29.493
> 
> 标签：logging, android-ndk

在发布模式下，是否有任何简单直接的方法可以删除 NDK 中的所有日志记录调用？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-17T11:02:52.727

有关如何在 iOS 上执行此操作，请参阅[https://stackoverflow.com/a/2025764/78496 。](https://stackoverflow.com/a/2025764/78496)原理是一样的。

您可以使用在 Makefile 中设置标志

```
LOCAL_CFLAGS += -DDEBUG_ON 
```

# javascript - 在表单上“合并”LiveValidation 与 Jquery

> ID：11520802
> 
> 赞同：0
> 
> 时间：2012-07-17T10:40:34.323
> 
> 标签：javascript, jquery, forms, livevalidation

这是我的 jquery 函数的一部分，它验证我在我的网站上拥有的表单：

```
 /*
    validates errors on all the fieldsets
    records if the Form has errors in $('#formElem').data()
    */
    function validateSteps(){
        var FormErrors = false;
        for(var i = 1; i < fieldsetCount; ++i){
            var error = validateStep(i);
            if(error == -1)
                FormErrors = true;
        }
        $('#formElem').data('errors',FormErrors);   
    }

    /*
    validates one fieldset
    and returns -1 if errors found, or 1 if not
    */
    function validateStep(step){
        if(step == fieldsetCount) return;

        var error = 1;
        var hasError = false;
        $('#formElem').children(':nth-child('+ parseInt(step) +')').find(':input:not(button)').each(function(){
            var $this       = $(this);
            var valueLength = jQuery.trim($this.val()).length;

            if(valueLength == ''){
                hasError = true;
                $this.css('background-color','#FFEDEF');
            }
            else
                $this.css('background-color','#A8FC9C');    /* Campo preenchido */
        });
        var $link = $('#navigation_form li:nth-child(' + parseInt(step) + ') a');
        $link.parent().find('.error,.checked').remove();

        var valclass = 'checked';
        if(hasError){
            error = -1;
            valclass = 'error';
        }
        $('<span class="'+valclass+'"></span>').insertAfter($link);

        return error;
    }

    /*
    if there are errors don't allow the user to submit
    */

    $('#enviar_candidatura').bind('click',function(){
        var preenchimentoForm=true;
        if($('#formElem').data('errors')){
            preenchimentoForm=false;

            dadosFormularios(preenchimentoForm);
            //return false;
        }
        else{
            dadosFormularios(preenchimentoForm);
        }
    });
}); 
```

但是，我也使用 LiveValidation (http://livevalidation.com/) 来验证客户端的字段。显然，如果 jquery 验证的部分是 Ok，那么 LiveValidation 部分是否存在错误并不重要，因为表单已提交。所以，我想要的是在这个 jquery 代码中添加一个 if 子句或类似的东西来验证是否有 LV_invalid_fields。如果“是”，则阻止表单提交，就像使用 jquery 验证部分完成的那样，但我不知道该怎么做，也不知道上面代码中放置此验证的正确位置。我会很感激一些帮助。谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-01T09:22:35.237

```
//... live validation codes here

$("#myform").submit( function (event) ) {
    event.preventDefault();
    if ($(".LV_invalid").length > 0) {
        //do not submit   
    }
    else {
        //do form submission here
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-01T10:05:55.270

首先，您必须将表单上的绑定更改为表单`click`上的操作绑定。`submit`并且您的函数必须返回`false`提交操作以停止提交操作。

因此，像这样更改您的代码：

```
$('#formElem').submit( function (event) ) {
    var preenchimentoForm = true;
    if ($('#formElem').data('errors')){
        preenchimentoForm = false;
    }
    return preenchimentoForm;
} 
```

[您可以在此处](http://blog.socialcast.com/unobtrusive-javascript-2/)阅读有关不显眼的 javascript 的一些说明。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-03-16T15:33:24.600

LiveValidation 库中有一个选项未在文档[http://livevalidation.com/documentation中解释](http://livevalidation.com/documentation)

为了防止 LiveValidation 的提交，同时仍保留其验证事件，您可以使用“afterValidation”选项。

例子：

```
var prevent = function (e) {
       e.preventDefault(); 
};

var yourValidation = new LiveValidation( 
    "inputID", { 
    //Your other options
    afterValidation: prevent
    } 
);
yourValidation.add( Validate.Presence, { your options } ); 
```

# php - jQuery从PHP预加载图像以防止闪烁

> ID：11520804
> 
> 赞同：0
> 
> 时间：2012-07-17T10:40:45.803
> 
> 标签：php, jquery, image, preload

页面每 5 秒刷新一次。从`.php`文件接收的图像附加到某些`<li >`元素。

这是代码：

```
function reloadImages(){
   for ( i = 0; i < ImgNum; i++) {
      var ts = Math.round((new Date()).getTime() / 1000);
      $('li#' + i).html('<img src="img.php?session=<?php echo $session; ?>&img=' + i + '&time='+ ts +'  " />')
   }
} 
```

一切都按预期工作。但是当`reloadImages()`被调用时，图像在重新加载期间闪烁。

如何防止这种闪烁？预加载图像？

帮我解决闪烁的问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-17T10:56:39.013

您可以使用以下预加载和回调机制（实际测试过）

```
function reloadImages(){
 for ( i = 0; i < ImgNum; i++) {
  var ts = Math.round((new Date()).getTime() / 1000);
     //this is old image        
     $('li#' + i).find('img').addClass('oldimage');   
     //adding and loading new image
     $('<img style="display:none;"/>').appendTo($('li#' + i))
                  .attr("src", "img.php?session=<?php echo $session; ?>&img=' + i + '&time='+ ts +'  ")
                  .load(function(){
                  //when it is loaded hide the old one
                   $(this).show();
                   $(this).parent().find('.oldimage').hide().remove();        
      })
 }
}​ 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-17T10:48:42.443

您可以使用[https://github.com/desandro/imagesloaded](https://github.com/desandro/imagesloaded)插件将图像加载到`display: none;`div 中，然后在回调时将它们移动到您的目标。

# java - OpenGL 应用程序中的 Java 线程

> ID：11520805
> 
> 赞同：2
> 
> 时间：2012-07-17T10:40:47.093
> 
> 标签：java, multithreading, opengl

我想知道是否可以在 Java 中执行以下操作。我正在使用[LWJGL 包装](http://www.lwjgl.org)器开发基于 Java 的 OpenGL 应用程序。在每个帧渲染完成的渲染循环中，我将 GL 帧中的像素保存到图像文件中。问题是帧的大小有时非常大，并且在将像素写入文件直到渲染循环的下一次开始期间它会产生明显的开销。我认为要做的是以下几点：

1.  在帧渲染完成时，从帧缓冲区读取像素。
2.  在一个负责图像文件写入的类上启动一个新线程。

我想知道这种技术是否有帮助？如果在单独的线程上完成，下一个渲染循环是否会在不等待图像文件保存的情况下开始？使用线程是否可行？我想要实现的是 GL 渲染循环不应该等待文件写入，而是继续渲染，同时在每个渲染循环结束时将新的像素数据提取到文件写入对象中。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-17T10:58:50.373

如下编写一个线程类来运行单个正在运行的线程。

```
public class WritePixelsToImageThread extends Thread { 

    public void run(){
        // place your code here for
        // read pixels from Frame and write that image.
        // this is an individual process
    }
} 
```

在启动该线程后

```
new WritePixelsToImageThread().start(); 
```

# asp.net - HttpFileCollection 总是返回 count > 0

> ID：11520807
> 
> 赞同：2
> 
> 时间：2012-07-17T10:40:54.203
> 
> 标签：asp.net

我有一个带有 1 个输入 type="file" 元素的表单。我希望当没有选择文件时，HttpFileCollection 集合后面的代码中的代码将为空。

然而，计数似乎总是大于零。

如以下代码所示：

```
Dim files As HttpFileCollection = Request.Files

        If files.Count > 0 Then
           'At least one file has been uploaded
        End if 
```

我是否遇到了一般的怪癖，或者这是预期的行为？

提前致谢。

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-07-17T12:01:18.737

在您的 .aspx 页面中：-

```
 <form id="form1" runat="server" enctype="multipart/form-data">
     <input type="file" id="myFile" name="myFile" />
     <asp:Button runat="server" ID="btnUpload" OnClick="btnUploadClick" Text="Upload" />
     </form> 
```

在您的代码隐藏文件中

```
 protected void btnUploadClick(object sender, EventArgs e)
        {
            HttpPostedFile file = Request.Files["myFile"];

            //check file was submitted
            if (file != null && file.ContentLength > 0)
               {
                   string fname = Path.GetFileName(file.FileName);
                   file.SaveAs(Server.MapPath(Path.Combine("~/App_Data/", fname)));
                }
         } 
```

# android - Android Button 停止执行新操作，直到 onClick() 块执行完成

> ID：11520808
> 
> 赞同：0
> 
> 时间：2012-07-17T10:40:58.140
> 
> 标签：android, button

```
 b.setOnClickListener(new OnClickListener()) {
    public void onClick(View arg0) {
        try{
         Thread.sleep(10000);
       }catch(Exception e){}
     }   
  }); 
```

在上面的代码中，在 Therad 工作之前，我不想再采取任何 Button 操作。目前，当我一次又一次按下时，应用程序要求强制关闭或等待。我不希望这样，我不想再对这个按钮采取任何行动。

需要帮忙。谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-17T10:47:17.187

添加一个全局布尔值，并在您单击它时将其设置为 true。在您的按钮单击中检查它。如果已设置则返回，否则运行线程。在线程结束时再次将其设置为 false。

布尔点击=假；

```
b.setOnClickListener(new OnClickListener()) {
    public void onClick(View arg0) {
        if( clicked )
            return;
        try{
         clicked = true;
         Thread.sleep(10000);
       }catch(Exception e){}
     }   
  }); 
```

当你从睡眠中返回时，设置 clicked = false。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-17T10:49:19.073

在处理前一种点击时，至少有两种方法可以阻止更多点击：

1）在开始时禁用按钮并在结束时重新启用`onClick`：

```
b.setOnClickListener(new OnClickListener()) {
    public void onClick(View arg0) {
        b.setEnabled(false);

        //do your stuff

        b.setEnabled(true);
    }   
}); 
```

2）在你的开头设置一个标志`onClick`并在最后清除它：

（班级级别）

```
boolean isInOnClick = false; 
```

接着

```
b.setOnClickListener(new OnClickListener()) {
    public void onClick(View arg0) {
        if(!isInOnClick) {
            isInOnClick = true;

            //do your stuff

            isInOnClick = false;
        }
    }   
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-17T10:49:06.593

最好将[AsyncTask](http://developer.android.com/reference/android/os/AsyncTask.html)用于您的工作。并使用适合您要求的`get()`方法。`AsyncTask`

`execute()` `AsyncTask`假设在等待之后按钮的单击和禁用按钮`get()`将在`AsyncTask`AsyncTask`Result`完成时返回，而在 Result 上再次启用您的按钮。所以你可以避免`ANR`在你的活动中。

# c# - 关于 c# if-else 语法

> ID：11520812
> 
> 赞同：0
> 
> 时间：2012-07-17T10:41:05.673
> 
> 标签：c#

在 c# 中，您可以在不使用大括号的情况下定义 if 语句，例如此示例

```
 if (GamePad.GetState(PlayerIndex.One).Buttons.Back == ButtonState.Pressed)
                this.Exit(); 
```

这里 this.Exit(); 是与 if 关联的语句。但它不在大括号中，所以我的问题是，它与 if 有什么关系？

我了解到编译器会忽略空格，在这种情况下这在逻辑上没有意义。答案仅仅是IDE找到缩进并在编译时自动将其放在大括号中吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-17T10:45:57.340

`;`结束声明。

[语句（C# 编程指南）](http://msdn.microsoft.com/en-us/library/ms173143.aspx)

> **语句可以由以分号**结尾的单行代码组成，也可以由 块中的一系列单行语句组成。**语句块括在 {}**括号 中，并且可以包含嵌套块。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-17T10:48:16.810

当您的代码被编译器解析时，它会将每个部分分成一个词法块。“if”语句的语法是：

```
if ( Expression ) Statement else Statement 
```

或者

```
if ( Expression ) Statement 
```

语句可以是语句块（即用大括号括起来）或单个语句。在您的代码中，th`is.Exit()`调用与 if 块相关联，因为表达式已关闭并且`'this.Exit()`' 符合语句的语法。

[http://ecma-international.org/ecma-262/5.1/](http://ecma-international.org/ecma-262/5.1/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-17T11:35:33.210

C# 和 Java 中的大括号基本上是使多个语句成为一个块集，基本上可以理解为特定情况下的范围。

*   您可以将 1 个或多个语句放在花括号中，或者将该区域留空，无论您是否有一些评论。

*   默认情况下，编译器会查找代码中编写的每个字符，因此它会逐个字符地查找，当它看到打开时，`{`它期望必须有一个关闭`}`。如果它找到更多的左大括号，它会继续计算代码块。

*   如果之后没有打开`{`，`if/else/foreach/for/do/while`则编译器将任何立即语句视为其块的一部分，如果由 a 终止`;`

*   `if/else/foreach/for/do/while`如果你立即放一个，你甚至可以在你之后没有声明`;`

我有我的发现，可能很多人已经知道或使用它，所以凭借这个问题我提出......

*   块可以有多种用途`{ }`。在所有循环、`if-else`语句中，甚至在`switch-case`您可以使用大括号将代码放入作用域中。对我来说，将案例语句放在块中真的很有帮助。如果您在一种情况下定义了一个变量，那么您不能在另一种情况下在同一开关下使用相同的名称定义它......所以我使用这种语法：

    ```
     int abc = 1;
            switch (abc)
            {
                case 1:
                    {
                        var x = 11;
                    }
                    break;
                case 2:
                    {
                        var x = 11; // its legal. 
                    }
                    break;
                case 3:
                    var x = 11; // its ilegal here too.. because we already have it in previous scope. 

                    break;
                case 4:
                    {
                        var x = 11; // its illegal here because we already have a in the parent/current scope. 
                    }
                    break;
            } 
    ```

*   您还可以使用相同的想法声明变量：

    ```
     ... some code above

            {
                var xx = 10;
            }

            // xx - is not available as it was declared in the inner-scope

            {
                var xx = 11; // Its legal, because its declared in inner-scope.
            }

            // xx - is again not available as it was declared in the inner-scope

            ... some code below 
    ```

### 概括：

*   如果后面没有左大括号`{`，`if/else/foreach/for/do/while`则下一个立即语句被认为是 `if/else/foreach/for/do/while`块的一部分。
*   您可以在顺序语句中创建尽可能多的范围以使用相同的变量名。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-17T10:44:04.780

它只适用于一行，所以如果你想要一个多行的 if 语句，你应该使用大括号。

所以，编译器知道，有一个没有大括号的 if 语句它应该在下一行使用（假设条件为真）。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-17T10:44:17.510

不，大括号用于多行语句。所以空格和缩进是无关紧要的。您可以在 if 语句所在的同一行调用 this.Exit() ，这仍然可以。为了可读性，有些人仍然更喜欢用大括号表示单行语句，这是一个选择问题。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-07-17T10:44:18.353

对于 if 中的单个 Line 语句，不需要将语句放在大括号中。

如果您需要执行多个语句，则需要大括号。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-07-17T10:48:14.153

在 C# 中，if 语句基于括号运行命令，就像我们使用带括号的 if 一样。如果没有给出括号，则如果语句为真，它将运行下一个命令，然后运行之后的命令。如果条件为假，则继续执行下一个命令。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2012-07-17T11:06:13.363

“ ;” 指向语句的结尾/终止点。因此，当编译器首先发现它时，它会将其包含在 IF 块中，而不是将其他包含在 IF 子句中。

# iphone - NSCache 不驱逐数据

> ID：11520815
> 
> 赞同：11
> 
> 时间：2012-07-17T10:41:23.160
> 
> 标签：iphone, objective-c, ios, nscache

[NSCache](http://developer.apple.com/library/mac/#documentation/Cocoa/Reference/NSCache_Class/Reference/Reference.html)是一个很少使用的工具，实际上看起来非常有用。我创建了一个简单的实验来看看它是如何工作的，看起来它不会在内存不足的情况下自动驱逐数据（或者我做错了什么！）

```
- (void)viewDidLoad
{
    _testCache = [[NSCache alloc] init];

    // Allocate 600 MB of zeros and save to NSCache
    NSMutableData* largeData = [[NSMutableData alloc] init];
    [largeData setLength:1024 * 1024 * 600]; 
    [_testCache setObject:largeData forKey:@"original_Data"];
}

- (IBAction)buttonWasTapped:(id)sender {

    // Allocate & save to cache 300 MB each time the button is pressed
    NSMutableData* largeData = [[NSMutableData alloc] init];
    [largeData setLength:1024 * 1024 * 300]; 
    static int count = 2;
    NSString* key = [NSString stringWithFormat:@"test_data_%d", count++];
    [_testCache setObject:largeData forKey:key];

    NSMutableData* dataRecoveredFromCache = [_testCache objectForKey:@"original_Data"];

    if (dataRecoveredFromCache) {
        NSLog(@"Original data is ok");
    } else {
        NSLog(@"Original data is missing (purged from cache)");
    }
} 
```

所以我在模拟器中运行了应用程序，并点击了几次按钮，但是没有任何项目被驱逐......应用程序最终崩溃了：

```
2012-07-17 14:19:36.877 NSCacheTest[15302:f803] Data is ok
2012-07-17 14:19:37.365 NSCacheTest[15302:f803] Data is ok
2012-07-17 14:19:37.861 NSCacheTest[15302:f803] Data is ok
2012-07-17 14:19:38.341 NSCacheTest[15302:f803] Data is ok
2012-07-17 14:19:38.821 NSCacheTest[15302:f803] Data is ok
NSCacheTest(15302,0xac0942c0) malloc: *** mmap(size=393216000) failed (error code=12)
*** error: can't allocate region 
```

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-07-17T11:25:26.697

来自文档（Emphasis mine）：*NSCache 类包含各种自动删除策略，确保它不会使用过多的系统内存。**如果其他应用程序**需要内存，系统会自动执行这些策略。调用时，这些策略会从缓存中删除一些项目，从而最大限度地减少其内存占用。*

Apple 并未声明内存警告将释放内存 - 根据我的经验，当应用程序进入后台或添加更多大型元素时，缓存最常被清除。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-07-17T11:21:38.337

这是引用的文档...

> NSCache 类包含各种自动删除策略，确保它不会使用过多的系统内存。如果其他应用程序需要内存，系统会自动执行这些策略。调用时，这些策略会从缓存中删除**一些**项目，从而最大限度地减少其内存占用。

...正如您所看到的，它声明它删除**了一些**项目，而不是所有项目。这取决于`NSCache`内部策略、可用内存、设备状态等。您不必担心这些策略。

`countLimit`您可以使用,属性来控制它们，`totalCostLimit`并且可以使用成本添加对象，请查看`setObject:forKey:cost:`.

您也可以自己驱逐对象。将`NSDiscardableContent`协议实现添加到您的对象和`setEvictsObjectsWithDiscardedContent`: 到`YES`.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-17T11:31:25.560

我也在使用那个类。请注意，文档指出 NSCache 与操作系统相关联，并且可能可以访问操作系统深处的内存信息。内存警告就是这样 - 它只是向 appDelegate/viewControllers 发送内存警告。

如果你真的想测试你的代码，你可能需要一个测试模式，你开始分配大量内存（可以说造成巨大的泄漏）。您可能需要在每个主运行循环期间将其分块打包，因此操作系统有机会看到他的内存下降（我有一个应用程序会占用大量内存，并且它在 3GS 上执行速度如此之快以至于被杀死从来没有收到内存警告。

# ruby-on-rails - 删除 caches_page 后缓存站点仍未更新

> ID：11520816
> 
> 赞同：1
> 
> 时间：2012-07-17T10:41:26.663
> 
> 标签：ruby-on-rails, caching, ruby-on-rails-3.2

我玩了一点缓存。我添加`caches_page :show`到我的`ArticlesController`，它给我带来了可怕的痛苦。我从控制器中删除了 caches_page 但什么也没发生。我重新启动了服务器（瘦 + nginx），但什么也没发生。

`Rails.cache.clear`我在生产模式下通过控制台清理了缓存并再次重新启动了服务器。现在它再次为我没有调用的文章工作，但缓存的文章仍未刷新。我已经清理了浏览器的缓存，但没有帮助。

我怎样才能摆脱这种越野车行为？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-17T11:27:18.540

页面缓存会生成一个 HTML 页面，并将其存储在您的公共目录中。即使您禁用了缓存，缓存的页面仍然存在。默认情况下，Rails 无需经过路由即可公开提供文件。

您需要删除此 html 页面才能让 rails 再次执行该操作。

# java - Java创建定期执行某些操作的后台线程

> ID：11520819
> 
> 赞同：10
> 
> 时间：2012-07-17T10:41:37.043
> 
> 标签：java, multithreading

是否可以创建一个单独的后台线程来单独做一些事情？我已经尝试了以下程序，但它没有按我的预期工作。

```
public class Test {

    private static class UpdaterThread extends Thread {
        private final int TIMEOUT = 3000;

        public void run() {
            while (true) {
                try {
                    Thread.sleep(TIMEOUT);
                    System.out.println("3 seconds passed");
                } catch (InterruptedException ex) {
                }
            }
        }
    }

    /**
     * @param args
     *            the command line arguments
     */
    public static void main(String[] args) {
        try {
            Thread u = new UpdaterThread();
            u.start();
            while (true) {
                System.out.println("--");
            }
        } catch (Exception ex) {
            ex.printStackTrace();
        }
    }
} 
```

我预计每 3 秒“经过 3 秒”将在多个“--”字符串流中打印。事实上，“3 秒过去”从未被打印出来。为什么？以及如何创建一个独立于主线程做某事的后台线程？

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-07-17T10:44:18.197

使用`java.util.TimerTask`和`java.util.Timer`：

```
Timer t = new Timer();

t.scheduleAtFixedRate(
    new TimerTask()
    {
        public void run()
        {
            System.out.println("3 seconds passed");
        }
    },
    0,      // run first occurrence immediately
    3000);  // run every three seconds 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-07-17T10:47:44.363

它确实打印“经过 3 秒”。删除`System.out.println("--")`，你会更容易看到它们;-)

现在您也可以使用 a `ScheduledExecutorService`，并使用 a`Runnable`而不是 a `Thread`：

```
public class Test {

    private static class Updater implements Runnable {

        @Override
        public void run() {
            System.out.println("3 seconds passed");
        }
    }

    public static void main(String[] args) throws InterruptedException {
        Runnable r = new Updater();
        ScheduledExecutorService service = Executors.newScheduledThreadPool(1);
        service.scheduleAtFixedRate(r, 0, 3, TimeUnit.SECONDS);

        Thread.sleep(10000);
        service.shutdown();

    }
} 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-07-17T10:43:56.597

您可以使用上述方法定期运行内容，尽管 a`TimerTask`可能更简单。

关于您的输出，我怀疑您的主线程不允许您`UpdaterThread`运行，因为它处于非常紧密的循环中。请注意，这将取决于可用的 CPU/内核等。

您是否考虑过在*主*线程中休眠或使用[Thread.yield()](http://www.javamex.com/tutorials/threads/yield.shtml)？请注意该链接页面中的附带条件：

> 何时使用 yield()？
> 
> 我会说几乎从不。它的行为没有标准定义，通常有更好的方法来执行您可能希望使用 yield() 执行的任务：如果您尝试仅使用一部分 CPU，您可以以更可控的方式执行此操作通过估计线程在其最后一个处理块中使用了多少 CPU，然后休眠一段时间来补偿：参见 sleep() 方法；

还要注意[这篇](http://www.javaspecialists.eu/archive/Issue056.html)关于处理线程中断的有趣文章。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-07-17T18:53:11.510

有很多答案，但没有人说为什么他的例子不起作用。`System.out`是输出流，因此在您开始写入此流之后，JAVA 会锁定它，并且所有其他线程将等待锁定应用于流。流解锁后，另一个线程将能够使用此流。

为了使您的示例正常工作，您应该在主线程中添加`Thread.sleep`循环`while`。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-07-17T10:47:57.093

我建议使用[`ScheduledExecutorService`](http://docs.oracle.com/javase/6/docs/api/java/util/concurrent/ScheduledExecutorService.html). 要`UpdaterThread()`每 3 秒运行一次，您可以这样做：

```
ScheduledExecutorService scheduler = Executors.newSingleThreadScheduledExecutor();
scheduler.scheduleAtFixedRate(new UpdaterThread(), 0, 3000, TimeUnit.MILLISECONDS); 
```

您可以在此处阅读更多内容：[Java 教程 - 执行器接口](http://docs.oracle.com/javase/tutorial/essential/concurrency/exinter.html)。

# c# - 无法使用附加属性自动调整 ListView/GridView 中的列大小

> ID：11520820
> 
> 赞同：0
> 
> 时间：2012-07-17T10:41:39.743
> 
> 标签：c#, wpf, listview, gridview, attached-properties

我有以下附加属性：-

```
public partial class GridViewProperties
{

    public static readonly DependencyProperty DoAutoSizeColumnsProperty =
                DependencyProperty.RegisterAttached("DoAutoSizeColumns", 
                typeof(bool), 
                typeof(GridViewProperties),
                new FrameworkPropertyMetadata(false, 
                                                FrameworkPropertyMetadataOptions.BindsTwoWayByDefault | 
                                                FrameworkPropertyMetadataOptions.AffectsMeasure |
                                                FrameworkPropertyMetadataOptions.AffectsArrange |
                                                FrameworkPropertyMetadataOptions.AffectsParentArrange |
                                                FrameworkPropertyMetadataOptions.AffectsParentMeasure |
                                                FrameworkPropertyMetadataOptions.AffectsRender,
                                                DoAutoSizeColumnsChanged));

    public static bool GetDoAutoSizeColumns(DependencyObject obj)
    {
        return (bool)obj.GetValue(DoAutoSizeColumnsProperty);
    }

    public static void SetDoAutoSizeColumns(DependencyObject obj, bool value)
    {
        obj.SetValue(DoAutoSizeColumnsProperty, value);
    }

    private static void DoAutoSizeColumnsChanged(DependencyObject obj, DependencyPropertyChangedEventArgs e)
    {
        var gv = obj as GridView;

        if (gv == null)
            return;

        if (e.NewValue != null && (bool)e.NewValue)
        {
            AutoSizeColumns(gv.Columns);
            SetDoAutoSizeColumns(gv, false);
            gv.InvalidateProperty(GridView.ColumnCollectionProperty);
        }
    }
    private static void AutoSizeColumns(GridViewColumnCollection gvcc)
    {

        // same code as double clicking column gripper
        foreach (var gvc in gvcc)
        {
            // if already set to auto, toggle it so that we can re-run width="auto"
            //if (double.IsNaN(gvc.Width))
            gvc.Width = gvc.ActualWidth;
            // now do it                
            gvc.Width = double.NaN;
            //gvc.InvalidateProperty(GridViewColumn.WidthProperty);
            //gvc.ClearValue(GridViewColumn.WidthProperty);
        }
    } 
} 
```

我以下列方式在 XAML 中使用它：

```
<Style x:Key="AutoColumnStyle" TargetType="ListView">
        <Setter Property="View">
            <Setter.Value>
                 <GridView infra:GridViewProperties.AutoSizeColumns="{Binding Path=DataContext.DoAutoSizeColumns, Source={x:Reference uc}}">
                    <GridViewColumn  Width="auto"   Header="Title"  CellTemplate="{StaticResource Name}" />
                     <GridViewColumn Width="auto"   Header="First" CellTemplate="{StaticResource First}"/>                         
                     <GridViewColumn Width="auto"   Header="Last" CellTemplate="{StaticResource Last}"/>                         
                 </GridView>
             </Setter.Value>
        </Setter> 
```

上面是在 UserControl.Resources 中。

XAML 的其余部分是：

```
<ListView ItemsSource="{Binding Names}" VerticalAlignment="Top" HorizontalAlignment="Left"
              ScrollViewer.VerticalScrollBarVisibility="Auto" 
              ScrollViewer.HorizontalScrollBarVisibility="Auto" 
              SelectionMode="Single"
              x:Name="ListViewContracts"
              KeyboardNavigation.TabNavigation="Continue"
              KeyboardNavigation.DirectionalNavigation="Cycle" 
              Style="{StaticResource AutoColumnStyle}" 
          >
    <ListView.ItemContainerStyle >
        <Style BasedOn="{StaticResource ListViewItemContainerStyle}" TargetType="ListViewItem">                
            <Setter Property="Focusable" Value="False" />
            <Setter Property="HorizontalContentAlignment" Value="Stretch"/>
        </Style>                
    </ListView.ItemContainerStyle>
</ListView> 
```

（我也尝试过没有 Width="auto" ）。

每当我在 ViewModel 中设置 DoAutoSizeColumns = true 时，我看到附加属性中的所有内容都按预期工作，除了它的设计目的是 gridview 列没有根据该列中的最大项目调整大小（即使我看到 gv.Width 切换from 和 to double.Nan 这就是调整大小的工作方式）。

如您所见，我在附加属性中尝试了许多变体，其中大部分都被注释掉了，包括添加所有 FrameworkPoprertyMetadataOptions 并尝试各种 InvalidatePoperty 尝试，以及 UIPropertyMetadata （以及 DynamicResource ）。

我错过了什么？

**更新**

这个附加属性在其他 GridViews 中工作，我在这里看到的唯一区别是 - 我需要在 ListView 中切换 GridViews，这没有在上面指出 - 但关键区​​别是我作为样式而不是直接注入。（再想一想，情况可能并非如此，因为这些其他 GridView 的列中的第一个项目始终是最大的项目）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-18T09:30:36.270

这与注入一种风格有关。

我有两个不同的 GridView 由布尔值切换，并使用 DataTrigger 注入备用的，AutoSizeColumns 在那个备用的 GridView 上运行良好！所以我让这两种样式都由 DataTrigger 注入，而不是像上面的 XAML 中那样由一个 setter 设置默认值。

至于为什么会出现这种情况，我有兴趣找出答案。至少我有一种完全 MVVM 方式来自动调整列大小，这是我在其他 SO 答案中没有看到的。

（顺便说一句，我还有其他附加属性不需要我手动触发自动调整大小，我只是写了这个版本来识别问题）。

# c# - Google 驱动器示例：未找到 oauth2callback

> ID：11520826
> 
> 赞同：2
> 
> 时间：2012-07-17T10:41:59.573
> 
> 标签：c#, asp.net-mvc-3, oauth-2.0, google-drive-api

我需要一些关于 Google-Drive 的 C# 示例程序的帮助...

我使用了这个**所谓的**“教程”/“示例”：
[https ://developers.google.com/drive/examples/dotnet](https://developers.google.com/drive/examples/dotnet)

以及来自这里的代码：
[https ://code.google.com/p/google-drive-sdk-samples/source/checkout](https://code.google.com/p/google-drive-sdk-samples/source/checkout)

我在这里上传了我的（仅稍作修改）源代码，以防有人没有 Mercurial（我没有 Mercurial，也没有安装它的管理员权限，而 Mercurial 是获取源代码的唯一方法......）：
[http ://verzend.be/elt0k13enraw/DrEdit.rar.html](http://verzend.be/elt0k13enraw/DrEdit.rar.html)

我总是得到

> “找不到资源”
> 
> 请求的 URL：/oauth2callback

我觉得这并不令人惊讶，因为没有实现 oauth2callback 控制器或处理程序......

我尝试添加一个名为 oauth2callbackController 的控制器并重定向到 oauth2callbackController.Index 中的另一个操作，执行

```
return new RedirectResult("/about/about"); 
```

但这只会创建一个 NULL 引用异常。

所以我想，也许是错误的控制器并重定向到

```
return new RedirectResult("/drive/Index"); 
```

但这只会创建一个无限循环的重定向 -> 允许 -> 重定向 - 允许 -> 等。

顺便说一句，更改 API 密钥 + REDIRECT_URI 的配置在

```
Models\ClientCredentials.cs 
```

**注意：**
问题不是我的修改。
该示例在未经修改的情况下也无法正常工作，错误完全相同。
我所做的只是删除 EntityFramwork 引用，并在调用使用实体的方法时抛出“未实现的异常”。

**编辑：**
附加信息：
首先我真正想做的是编写一个控制台服务来导出我的数据库，LZMA 压缩导出的内容，使用 OpenPGP 加密，然后每天将我服务器的数据库上传到 Google 驱动器在 24:00 点，没有任何用户输入。

我的导出工作没有问题，我的 LZMA 压缩工作没有问题，我使用 PGP 的加密工作没有问题。工作日结束后（grrrr），当我在家时，我什至可以在家里的 Linux 机器上下载安装了 mercurial 的示例代码，并使用 SMB 将其带到 windows 机器上。 .

但是现在我无法让 Google-drive SDK 工作的示例......
而且，我真正需要的是控制台服务/守护程序的示例，而不是 Web 应用程序。当我创建 API 密钥时，我看到可以为服务创建密钥，但是没有关于如何编写 Google-Drive 服务（控制台应用程序）的示例，也没有**有用**的文档（是的，有参考，但这只是一个参考，IntelliSense 提供的内容大致相同）...

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-17T16:39:13.750

在 API 控制台的 API 访问选项卡中配置应用程序时，您必须将 Web 服务器的根 (/) 设置为重定向 URI，而不是 /oauth2callback。

假设您的应用发布在 www.example.com，只需返回 API 控制台并将其设置为 www.example.com 而不是 www.example.com/oauth2callback

# google-maps - 谷歌静态地图不显示

> ID：11520828
> 
> 赞同：3
> 
> 时间：2012-07-17T10:42:05.313
> 
> 标签：google-maps, google-static-maps

我在我的页面中列出了许多企业及其静态谷歌地图（带有分页）。在浏览页面时，有时我会得到以下图像而不是地图。如果我再次刷新页面，我会得到正确的地图。

![在此处输入图像描述](../Images/3015868c7f1dbcea24965f6e06f6a32f.png)

我确信我**没有达到使用限制**（因为我在页面刷新时获得了相同的地图）。

我的示例请求如下。（注意：我没有传递任何 API 密钥。真的需要吗？）

```
<img src="//maps.googleapis.com/maps/api/staticmap?center=168 Palmers Lane Pokolbin,POKOLBIN,NSW,2320,Australia&zoom=11&size=240x180&maptype=roadmap&sensor=false" /> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-17T10:48:12.453

[将encodeURI](https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/encodeURI) -ed url传递给`src`：

```
<img src="//maps.googleapis.com/maps/api/staticmap?center=168%20Palmers%20Lane%20Pokolbin,POKOLBIN,NSW,2320,Australia&zoom=11&size=240x180&maptype=roadmap&sensor=false" /> 
```

# c# - 显式调用静态构造函数

> ID：11520829
> 
> 赞同：40
> 
> 时间：2012-07-17T10:42:06.390
> 
> 标签：c#, mstest, system.reflection, static-constructor

我想为下面的课程编写单元测试。
如果名称不是“MyEntity”，则 mgr 应为空白。
**负单元测试**
使用管理器私有访问器我想将名称更改为“测试”，以便管理器应该为空。然后将验证经理值。为此，我想显式调用静态构造函数，但是当我使用调用静态构造函数时

```
Manager_Accessor.name = "Test"
typeof(Manager).TypeInitializer.Invoke(null, null); 
```

name 始终设置为“MyEntity”如何将 name 设置为“Test”并调用静态构造函数。

```
public class Manager
{        
        private static string name= "MyEntity";

        private static object mgr;

        static Manager()
        {
            try
            {
                mgr = CreateMgr(name);
            }
            catch (Exception ex)
            {
                mgr=null;
            }
        }
} 
```

* * *

## 回答 #1

> 赞同：49
> 
> 时间：2015-04-08T09:51:11.777

正如我今天发现的，可以直接调用静态构造函数：

来自[另一个 Stackoverflow 帖子](https://stackoverflow.com/a/2654684/2505186)

> 其他答案非常好，但是如果您需要强制类构造函数在没有引用类型（即反射）的情况下运行，您可以使用：
> 
> ```
> Type type = ...;
> System.Runtime.CompilerServices.RuntimeHelpers.RunClassConstructor(type.TypeHandle); 
> ```

我不得不将此代码添加到我的应用程序[中以解决 .net 4.0 CLR 中可能存在的错误](https://stackoverflow.com/q/29493473/2505186)。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2017-06-15T00:18:25.640

对于任何发现此线程并想知道...我刚刚进行了测试的人。如果由于其他原因尚未运行**静态**构造函数，它似乎`System.Runtime.CompilerServices.RuntimeHelpers.RunClassConstructor()`只会运行它。

 **例如，如果您的代码不确定先前的代码是否已经访问了该类并触发了静态构造函数运行，那么这无关紧要。先前的访问将触发静态构造函数运行，但 RunClassConstructor() 也不会运行它。RunClassConstructor() 仅在静态构造函数尚未运行时才运行。

在 RunClassConstructor() 之后访问类也**不会**导致静态构造函数再次运行。

这是基于在 Win10 UWP 应用中的测试。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2019-06-01T13:53:33.343

只需将**public static void Initialize() { }**方法添加到您的静态类并在需要时调用它。这与调用构造函数非常相似，因为静态构造函数会被自动调用。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2016-09-14T19:55:29.030

如果你的类中有一个静态成员（必须有，否则静态构造函数不会做太多），那么不需要显式调用静态构造函数。

只需访问您想要调用其静态构造函数的类。例如：

```
public void MainMethod()
{
    // Here you would like to call the static constructor

    // The first access to the class forces the static constructor to be called.
    object temp1 = MyStaticClass.AnyField;

    // or
    object temp2 = MyClass.AnyStaticField;
} 
```**

# javascript - setTimeOut() 或 setInterval() 。4种方法来应用相同的东西。哪个最好？

> ID：11520834
> 
> 赞同：7
> 
> 时间：2012-07-17T10:42:34.470
> 
> 标签：javascript, jquery, settimeout, setinterval, anonymous-function

我正在显示关于给定结束时间的倒计时手表。

虽然它的工作完美，但我想知道哪个是最好的应用方法。

下面是我的倒计时功能。

```
 var timerId;
  var postData = {endDate : endDate, tz : tz};  
  var countdown = function()
    { 
      $.ajax({
               type : 'post',
               async : false,
               timeout : 1000,
               url : './ajax_countdown.php',
               data : $.param(postData),
               dataType : 'json',
               success : function (resp){
                  $('#currentTime').html(resp.remainingTime);
               }
            }); 
     } 
```

我想要的是该函数（倒计时）应该*在每 1 秒后自动*调用一次，如果它没有在 1 秒内执行/完成，则取消当前的 ajax 并开始一个新的 ajax 调用。

现在我发现有**4种工作方法**

### 方法 1：将*setInterval() 与窗口*对象一起使用

```
window.setInterval(countdown, 1000); 
```

### 方法 2：独立使用*setInterval()*

```
setInterval(function() {countdown()}, 1000); 
```

### 方法3：在函数内部使用*setTimeOut调用其他函数来初始化主函数*

```
var countdown = function() { 
     $.ajax({ //ajax code });
     timerId = setTimeout(countdown, 5000); // assign to a variable
 }

function clockStart() {  
        if (timerId) return
        countdown();
}
clockStart(); // calling this function 
```

### 方法4：使用*匿名函数调用*

```
var countdown = function() { 
     $.ajax({ //ajax code });
     timerId = setTimeout(countdown, 5000);
 }
  (function(){
         if (timerId) return;
         countdown();
})(); 
```

请告诉我

*   每种方法的优缺点是什么，哪一种是最好/正确的方法？
*   我应该使用`clearTimeOut()`or`clearInterval()`吗？

**参考**

### [http://javascript.info/tutorial/settimeout-setinterval](http://javascript.info/tutorial/settimeout-setinterval)

### [每 60 秒调用一次函数](https://stackoverflow.com/questions/3138756/jquery-repeat-function-every-60-seconds)

### [http://www.electrictoolbox.com/using-settimeout-javascript/](http://www.electrictoolbox.com/using-settimeout-javascript/)

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-07-17T11:18:41.923

我不会使用你的任何方法。原因是`setTimeout`并且`setInterval` [不保证您的代码将在指定的延迟后执行](http://ejohn.org/blog/how-javascript-timers-work/ "John Resig - JavaScript 计时器的工作原理")。这是因为 JavaScript 是单线程的。

如果我需要在指定的延迟后只调用一次函数，那么我使用`setTimeout`. 但是，如果我需要在固定的时间间隔后调用函数，那么我不使用`setInterval`. 相反，我使用[delta timing](http://en.wikipedia.org/wiki/Delta_timing "Delta 计时 - 维基百科，免费的百科全书")。这是[代码](https://gist.github.com/2056987 "JavaScript 的 Delta Timing — 要点")。

使用增量计时的优点是您的代码将更接近您指定的固定时间间隔执行。它会自我纠正。创建和使用增量计时器很简单。例如，您的代码将编写如下：

```
var timer = new DeltaTimer(function (time) {
    $.ajax({
        // properties
    });

    if (time - start >= 5000) timer.stop();
}, 1000);

var start = timer.start(); 
```

上面的delta timer优于`setInterval`（方法1），利用了`setTimeout`（方法2）但也能自我修正，使用函数启动定时器（方法3），并且不使用特殊`clockStart`函数污染作用域（方法4） .

此外，您可以轻松获得在计时器启动后调用函数的确切时间，因为调用函数的时间作为参数传递给函数。定时器也有一个`stop`停止定时器的方法。要再次启动它再次调用`start`。

**编辑：**

如果你想让它`DeltaTimer`看起来更像`setInterval`（自动启动计时器），你可以实现一个 spawn 函数，如下所示：

```
DeltaTimer.spawn = function (render, interval) {
    var timer = new DeltaTimer(render, interval);

    var start = timer.start = function (start) {
        return function () {
            render.start = start();
        };
    }(timer.start);

    start();

    return timer;
}; 
```

然后您可以自动创建并启动`DeltaTimer`如下：

```
var timer = DeltaTimer.spawn(function countdown(time) {
    $.ajax({
        // properties
    });

    if (time - countdown.start >= 5000) timer.stop();
}, 1000); 
```

因此`var timer = DeltaTimer.spawn(funct, delay);`等价于`var interval = setInterval(funct, delay);`和`timer.stop();`等价于`clearInterval(interval);`。我想这就是你可以自动化的程度。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-07-17T10:51:59.353

使用 #1 而不是 #2 的好处是`window`引用消除了范围变量覆盖的机会`setInterval`。

```
// When out of global scope...
function setInterval() {

}

window.setInterval(foo, 100); // still calls the "correct" setInterval 
```

`countdown`将调用包装在函数中（#1、#2）没有区别。#2 为您提供了更大的灵活性，因为您还可以调用其他函数/传递参数等（尽管如果出现这种情况，从 #1 交换到 #2 显然是微不足道的）。

#4 省去了你必须声明一个函数`clockStart`，除此之外，它与 #3 相同。

`clearTimeout`如果您使用过，请使用`setTimeout`，`clearInterval`如果您使用过`setInterval`...

您还应该了解如何以不同`setTimeout`的方式`setInterval`工作。[这里](https://stackoverflow.com/questions/729921/settimeout-or-setinterval/731625#731625)有一个惊人的答案，它解释了......

至于我会用什么？我会使用＃2。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-07-17T11:09:01.710

如果您正在创建倒计时，那么为什么您不使用 jquery 插件并根据您的要求对其进行自定义？在这里结帐

[http://www.tripwiremagazine.com/2012/05/jquery-countdown-scripts.html](http://www.tripwiremagazine.com/2012/05/jquery-countdown-scripts.html)

# jquery - jquery UI Combobox 跳转框

> ID：11520836
> 
> 赞同：1
> 
> 时间：2012-07-17T10:42:54.487
> 
> 标签：jquery, jquery-ui

我正在尝试获取选项 value="URL" 的值以制作 jumpbox ，但不知道如何继续我的代码：

```
<script>
(function( $ ) {
    $.widget( "ui.combobox", {
        _create: function() {
            var input,
                self = this,
                select = this.element.hide(),
                selected = select.children( ":selected" ),
                value = selected.val() ? selected.text() : "",
                wrapper = this.wrapper = $( "<span>" )
                    .addClass( "ui-combobox" )
                    .insertAfter( select );

            input = $( "<input>" )
                .appendTo( wrapper )
                .val( value )
                .addClass( "ui-state-default ui-combobox-input" )
                .autocomplete({
                    delay: 0,
                    minLength: 0,
                    source: function( request, response ) {
                        var matcher = new RegExp( $.ui.autocomplete.escapeRegex(request.term), "i" );
                        response( select.children( "option" ).map(function() {
                            var text = $( this ).text();
                            if ( this.value && ( !request.term || matcher.test(text) ) )
                                return {
                                    label: text.replace(
                                        new RegExp(
                                            "(?![^&;]+;)(?!<[^<>]*)(" +
                                            $.ui.autocomplete.escapeRegex(request.term) +
                                            ")(?![^<>]*>)(?![^&;]+;)", "gi"
                                        ), "<strong>$1</strong>" ),
                                    value: text,
                                    option: this
                                };
                        }) );
                    },
                    select: function( event, ui ) {
                        ui.item.option.selected = true;
                        self._trigger( "selected", event, {
                            item: ui.item.option
                        });
                    },
                    change: function( event, ui ) {
                        if ( !ui.item ) {
                            var matcher = new RegExp( "^" + $.ui.autocomplete.escapeRegex( $(this).val() ) + "$", "i" ),
                                valid = false;
                            select.children( "option" ).each(function() {
                                if ( $( this ).text().match( matcher ) ) {
                                    this.selected = valid = true;
                                    return false;
                                }
                            });
                            if ( !valid ) {
                                // remove invalid value, as it didn't match anything
                                $( this ).val( "" );
                                select.val( "" );
                                input.data( "autocomplete" ).term = "";
                                return false;
                            }
                        }
                    }
                })
                .addClass( "ui-widget ui-widget-content ui-corner-right" );

            input.data( "autocomplete" )._renderItem = function( ul, item ) {
                return $( "<li></li>" )
                    .data( "item.autocomplete", item )
                    .append( "<a>" + item.label + "</a>" )
                    .appendTo( ul );
            };

            $( "<a>" )
                .attr( "tabIndex", -1 )
                .attr( "title", "Show All Items" )
                .appendTo( wrapper )
                .button({
                    icons: {
                        primary: "ui-icon-triangle-1-s"
                    },
                    text: false
                })
                .removeClass( "ui-corner-all" )
                .addClass( "ui-corner-left ui-combobox-toggle" )
                .click(function() {
                    // close if already visible
                    if ( input.autocomplete( "widget" ).is( ":visible" ) ) {
                        input.autocomplete( "close" );
                        return;
                    }

                    // work around a bug (likely same cause as #5265)
                    $( this ).blur();

                    // pass empty string as value to search for, displaying all results
                    input.autocomplete( "search", "" );
                    input.focus();
                });
        },

    //allows programmatic selection of combo using the option value
    setValue: function (value) {
        var $input = this.input;
        $("option", this.element).each(function () {
            if ($(this).val() == value) {
                this.selected = true;
                $input.val(this.text);
                return false;
            }
        });
    },

        destroy: function() {
            this.wrapper.remove();
            this.element.show();
            $.Widget.prototype.destroy.call( this );
        }
    });
})( jQuery );

$(function() {
    $( "#combobox" ).combobox();
    $( "#toggle" ).click(function() {
        $( "#combobox" ).toggle();
    });

$(function() {
$("input").autocomplete({
/* DONT HAVE A CLUE HOW TO BRING THE URL */
select: function(event, ui) {
    window.location.href = ui.item.value;
}
 });
    });

});
</script> 
```

* * *

当然这`ui.item.value`是错误的 - 欢迎帮助

* * *

我错误地将其发布为另一个线程的答案，对此感到抱歉:-(

# html - 选框标签仍然有效，可以使用它吗？

> ID：11520840
> 
> 赞同：0
> 
> 时间：2012-07-17T10:43:02.550
> 
> 标签：html, marquee

> **可能重复：**
> [在 HTML 中使用 marquee 元素是否可以接受？](https://stackoverflow.com/questions/3964491/is-it-acceptable-to-use-the-marquee-element-in-html)

我试过了，旧的古老的字幕标签，它仍然有效。可以用吗？

```
<html>
<head>
<title>
</title>
</head>
<body>
    <marquee> 
        <h1>Hello</h1> 
    </marquee>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-07-17T10:49:48.603

[http://www.w3.org/wiki/HTML/Elements/marquee](http://www.w3.org/wiki/HTML/Elements/marquee)

“例如：不，真的。不要使用它。”

我认为这一切都说。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-07-17T10:46:57.200

不使用`<marquee>`

根据[维基百科](http://en.wikipedia.org/wiki/Marquee_element)

> marquee 标签是一种非标准的 HTML 元素，它可以使文本自动向上、向下、向左或向右滚动。该标签最初是在 Microsoft 的 Internet Explorer 的早期版本中引入的，并且与 Netscape 的 blink 元素进行了比较，作为 HTML 标准的专有非标准扩展，存在可用性问题。W3C 已弃用它，并且他们不建议在任何 HTML 文档中使用它。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-17T10:50:50.617

## 简短的回答

你应该问：“为什么不使用它？”

如果您需要滚动 *内容，请使用它。**所有*浏览器都支持它。

**但是**选框可能会分散注意力。人眼被运动所吸引，字幕文本不断地运动。*（通过维基）*

## 长答案

[http://webdesign.about.com/od/htmltags/p/bltags_marquee.htm](http://webdesign.about.com/od/htmltags/p/bltags_marquee.htm)

[http://reference.sitepoint.com/html/marquee](http://reference.sitepoint.com/html/marquee)

[http://en.wikipedia.org/wiki/Marquee_element](http://en.wikipedia.org/wiki/Marquee_element)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-17T10:52:31.983

这真的取决于你所说的“好的”是什么意思。

当然，它适用于大多数浏览器（即使并非所有浏览器的响应都相同 - 有些具有不同的默认设置，有些仅支持属性的子集；尽管您的示例在大多数浏览器中的工作方式大致相同）。

但是想想用户！可怜的用户！这样折磨他们真的好吗？如果您在网页中添加字幕，接下来会是什么？`<blink>`?

# android - ListFragment onListItemClick 不再适用于 Android 4.1 Jelly Bean

> ID：11520841
> 
> 赞同：2
> 
> 时间：2012-07-17T10:43:02.980
> 
> 标签：android, android-fragments, android-view, android-4.0-ice-cream-sandwich, android-fragmentactivity

我正在新的**Android 系统 4.1 Jelly Bean**中测试我的应用程序，但我的应用程序`ListFragment`不再正常工作。

当我单击列表的行时，`onListItemClick`不再调用该函数。它曾经在 Android 3.0 和 Android 2.x 上正常工作

Android 4.x 是否有任何关于`ListFragment`或 的变化`onListItemClick`？

一种精度，我正在使用**android-support-v4.jar 中的“ListFragment”**

```
 android.support.v4.app.ListFragment 
```

这是我的`ListFrangment`代码：

```
public class MessagesListFragment extends ListFragment {

    @Override
    public View onCreateView(LayoutInflater inflater, ViewGroup container, Bundle savedInstanceState) { 
        View view = inflater.inflate(R.layout.pull_to_refresh, null);
        return view;
    }

    @Override
    public void onActivityCreated(Bundle savedInstanceState) {
         /* some initialization, working fine */
         /* Settings of the list Adapter*/

    @Override
    public void onListItemClick(ListView l, View v, int position, long id) {
         int messagePosition = 0;
         if(position>0){
              messagePosition = position - 1;
          } else {
              Log.e("MessageListView", "[onListItemClick] position is inferior to zero,"
                + " message position is set to 0");
          }
          String expediteur = DomboxHome.messagesService.messagesArrayList.get(messagePosition).getExpediteur();
          String contenu = DomboxHome.messagesService.messagesArrayList.get(messagePosition).getContenu();
          Log.d("MessageListView","[onListItemClick] click on message position : "+messagePosition);

          ((MessagesActivity)getActivity()).onChooseMessageDetails(expediteur, contenu);

     } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-19T14:40:33.903

我找到了解决方案，

责任不在*android-support-v4.jar*上，而是在*android-pulltorefresh*上，它是一个实现 pull-to-refresh-list 的库。

[Android 拉取刷新列表](https://github.com/johannilsson/android-pulltorefresh)

该库与 Jelly Bean 不完全兼容，但已由团队修复（顺便感谢团队！）

[错误修复](https://github.com/johannilsson/android-pulltorefresh/pull/53)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-25T15:31:09.770

我在具有不支持新 Android 4.1 的 PullToRefresh 库的应用程序中发现了此错误

为了解决这个问题，我使用了库的一个分支

[https://github.com/chrisbanes/Android-PullToRefresh](https://github.com/chrisbanes/Android-PullToRefresh)

这个图书馆真棒。具有新的 PullToRefreshWebView 和 PullToRefreshGridView 以及其他功能，例如从底部拉取刷新（拉到列表底部）和其他类似新动画的想法。

# actionscript-3 - 想在弹出窗口之外听右键单击。？

> ID：11520847
> 
> 赞同：1
> 
> 时间：2012-07-17T10:43:14.207
> 
> 标签：actionscript-3, air, flex4.5

我有一个弹出窗口，我想在鼠标外部单击时将其关闭。所以我做了一个事件的监听器**`MouseDownOutside`**。但它只听左键。我也想通过右键单击将其关闭，但如果我右键单击弹出窗口，则应该将其打开。我在谷歌上搜索，但第二次没有任何解决方案。有人知道关闭弹出窗口的方法吗？

所以创建弹出窗口的代码看起来像

```
var myPopUp:CustomComponentClass = new CustomComponentClass();
PopUpManager.addPopUp(myPopUp, Parent, true);
PopUpManager.centerPopUp(myPopUp); 
```

关闭弹出窗口

```
PopUpManager.removePopUp(myPopUp); 
```

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-17T13:29:24.767

我会尝试这样的事情：

```
stage.addEventListener(MouseEvent.RIGHT_MOUSE_DOWN,onRightMouseDown);

function onRightMouseDown(e:MouseEvent):void
{
  var point:Point = popup.globalToLocal(new Point(stage.mouseX,stage.mouseY));

  if(!pointInside(popup,point))
  {
    PopUpManager.removePopUp(popup);
  }
} 
```

pointInside 函数只是检查点是否在弹出框的矩形内。

```
public function pointInside(obj:DisplayObject, point:Point):Boolean
{
    return (point.x >= 0 && point.y >= 0 && point.x <= obj.width && point.y <= obj.height);
} 
```

# css - 弹出问题 - 对齐中心

> ID：11520851
> 
> 赞同：0
> 
> 时间：2012-07-17T10:43:32.807
> 
> 标签：css, popup

我正在尝试将我的弹出窗口对齐在页面的中心。无论我单击哪个图像框，弹出窗口都应该出现在页面的中心，而无需向上或向下滚动

请帮助我实现它。测试链接网站：[http ://www.scs-qa.com/panamera/trading.html](http://www.scs-qa.com/panamera/trading.html)

```
 .white_content 
  {

-moz-border-radius: 5px 5px 5px 5px;
background-color: white;
border: 3px solid #000000;
display: none;
height: auto;
left: 30%;
overflow: auto;
padding: 16px;
position: absolute;
top: 10%;
width: 500px;
z-index: 1002;
border-radius: 15px 15px 15px 15px;
text-align: justify;
font-size: 10pt;
font-family: 'Tahoma' ; 
```

}

HTML

```
 <div class="trading-img-box">
 <a href = "javascript:void(0)" onclick = "document.getElementById('trading1').style.display='block';document.getElementById('body-below-otherpage-small-trading').style.display='none'">
 <img class="trading-img" src="img/trading1.png">
 </a>
<h1 class="trading-h1">Furniture</h1>
 <p style="height:0; clear:both;" class="trading-p">It 's pleasant to live spec..</p>
 </div>

<div id="trading1" class="white_content">
<a style="float:right" href = "javascript:void(0)" onclick = "document.getElementById('trading1').style.display='none';document.getElementById('body-below-otherpage-small-trading').style.display='block'">Close</a>
<br/><br/>
<img src="img/tradingb1.png" style="margin-top: 5px; margin-left: 25px; margin-right: 5px"><br/><br/>
<strong>Furniture</strong>
<p>some text
</p><br/>
<p>some text
</p>
</div> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-17T10:51:05.500

尝试这个：

.white_content { 左：50%; 左边距：-250px；}

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-17T10:56:16.960

如果您需要一个独立于 div 大小的解决方案，那么您需要使用 javascript 或 jquery。

[http://jsfiddle.net/DerekL/GbDw9/](http://jsfiddle.net/DerekL/GbDw9/)

# android - Android webapp :: 横向显示全屏

> ID：11520852
> 
> 赞同：0
> 
> 时间：2012-07-17T10:43:37.730
> 
> 标签：android, web-applications, fullscreen, android-mediaplayer

我有一个小问题。我正在为 android 开发一个 webapp，我一直在不知疲倦地寻找一种解决方案，以便在将设备变为横向时显示全屏媒体播放器（没有地址栏，只有媒体）。

那里的大部分内容都建议 VideoView 仅适用于本机 android 应用程序，但是 webapp 媒体播放器和切换到全屏的内容并不多。有谁知道解决方案，或者什么可能有效？

非常感谢发送的任何信息，如果围绕该主题的问题已经得到解答，我深表歉意。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-17T11:38:02.633

如果您正在开发专为 WebView 设计的 Web 应用程序，您可以在 JavaScript 代码和客户端 Android 代码之间创建接口。看到这个：

> [http://developer.android.com/guide/webapps/webview.html#BindingJavaScript](http://developer.android.com/guide/webapps/webview.html#BindingJavaScript)

您可以创建一个检测屏幕旋转的类，如果设备处于横向模式，则调用一个将媒体播放器更改为全屏的 javascript 函数。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-17T10:49:57.577

只需在应用程序标签的清单文件中写下

> android:theme="@android:style/Theme.NoTitleBar"

我想这对你会有帮助。

# jquery-plugins - jQuery Token Input（tokenize input）在模式弹出窗口上不起作用，列表隐藏在弹出窗口下

> ID：11520861
> 
> 赞同：9
> 
> 时间：2012-07-17T10:44:07.090
> 
> 标签：jquery-plugins, modal-dialog, jquery-tokeninput

我在 jQuery 中使用模式弹出窗口控件，弹出窗口有一个由 jQuery Tokenize 输入插件提供支持的输入文本。问题是当我在模态弹出文本框中输入内容时，tokenize 插件的搜索结果显示隐藏在弹出窗口下。实际上它们应该出现在所有控件之上。有人请帮助我，因为我是初学者。

尝试从下面的线程寻求帮助，zindex 不起作用。 [https://github.com/loopj/jquery-tokeninput/issues/190](https://github.com/loopj/jquery-tokeninput/issues/190)

这是我正在使用的输入控件。 [http://loopj.com/jquery-tokeninput/demo.html](http://loopj.com/jquery-tokeninput/demo.html)

谢谢你。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-07-23T13:20:13.333

它通过手动设置 z-index 来工作：

```
$(".token-input-dropdown").css("z-index","9999") 
```

[https://github.com/loopj/jquery-tokeninput/issues/190](https://github.com/loopj/jquery-tokeninput/issues/190)中给出的函数 在我的咖啡脚本中不起作用：

```
$('#book_author_tokens').tokenInput('/authors.json', { 
    zindex: 9999
  }); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-07-13T16:07:45.193

我认为更好的解决方案是将其添加到 css 文件中（而不是通过 js 进行）：

```
div.token-input-dropdown-facebook {           
   z-index: 11001 !important;
} 
```

当然，如果您使用默认主题，请删除“-facebook”后缀。

# c# - 禁用列表框中的特定项目

> ID：11520879
> 
> 赞同：0
> 
> 时间：2012-07-17T10:45:00.130
> 
> 标签：c#, xaml, windows-phone-7.1

我将对象列表绑定到 WindowsPhone 应用程序中的 ListBox。此业务对象具有一个布尔属性。基于布尔属性，我需要在 ListBoxItem 中设置 IsEnabled 属性。

有没有办法在 WindowsPhone ListBox 中实现这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-17T10:58:32.497

实现这一目标的方法很少：

1.  您可以通过 C# 代码添加 ListBoxItem 并正确设置属性。
2.  在 Xaml 中，在列表框中，放置以下内容：

`<ListBox.Resources>` `<Style TargetType="ListBoxItem">` `<Setter Property="IsEnabled" Value="{Binding Content.IsEnabled, RelativeSource={RelativeSource Self}}"/>` `</Style>` `</ListBox.Resources>`

这里我假设你的模型对象中的属性名称是IsEnabled，根据它的真实名称进行更改。

# android - 如何将 C2DM 更改为 GCM？

> ID：11520882
> 
> 赞同：1
> 
> 时间：2012-07-17T10:45:32.740
> 
> 标签：android, google-cloud-messaging

我正在从 C2DM 迁移到 GCM。我按照[迁移文档](http://developer.android.com/google/gcm/c2dm.html)中的步骤操作，但不确定如何在终端 shell 窗口中推送测试消息。它和 C2DM 方法一样吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-02T05:59:03.560

这是您可以使用的少量 php，只需将其放入 php 文件（“gcm-push.php”）然后运行如下：

```
php gcm-push.php 
```

您需要设置您的设备注册 ID 和 GCM API 密钥。

```
<?php
// Message to send
$message = "the test message";

// Put your device token here (without spaces):
$registrationId = "DEVICE_REG_ID";

// GCM API Key
$apiKey = "INSERT_YOUR_KEY";

$headers = array("Content-Type:" . "application/json", "Authorization:" . "key=" . $apiKey);
$data = array(
    'data' => $message,
    'registration_ids' => array($registrationId)
);

$ch = curl_init();

curl_setopt($ch, CURLOPT_HTTPHEADER, $headers); 
curl_setopt($ch, CURLOPT_URL, "https://android.googleapis.com/gcm/send");
curl_setopt ($ch, CURLOPT_SSL_VERIFYHOST, 0);
curl_setopt ($ch, CURLOPT_SSL_VERIFYPEER, 0);
curl_setopt($ch, CURLOPT_RETURNTRANSFER, true);
curl_setopt($ch, CURLOPT_POSTFIELDS, json_encode($data));
error_log(json_encode($data));
$response = curl_exec($ch);
curl_close($ch);
error_log($response); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-17T10:54:27.393

谷歌似乎还没有完全提供官方文档（见[这里](https://stackoverflow.com/questions/11276518/app-engine-connected-android-project-not-available/11493506#11493506)）。至少这是我在新版本的 GPE 中尝试创建新的“App Engine Connected Android Project”时发现的。然而，他们“计划在 7 月底发布下一个版本”。我认为，到那时，他们应该有一个完整的文档，说明如何进行您正在进行的迁移。

# iphone - iPhone应用程序：同一视图上两个文本字段的UIDatePicker

> ID：11520884
> 
> 赞同：0
> 
> 时间：2012-07-17T10:45:42.033
> 
> 标签：iphone, datepicker, uidatepicker

[UIPickerView 选择和隐藏](https://stackoverflow.com/questions/5347537/uipickerview-select-and-hide)

当我在文本字段上“触地”时，我用它来弹出一个日期选择器视图。也就是说，我需要文本字段来显示我在日期选择器视图上选择的任何内容作为其内容。

```
 - (IBAction)showPicker:(id)sender {

    // create a UIPicker view as a custom keyboard view
    UIDatePicker* pickerView = [[UIDatePicker alloc] init];
    [pickerView sizeToFit];
    pickerView.autoresizingMask = (UIViewAutoresizingFlexibleWidth | UIViewAutoresizingFlexibleHeight);
    //pickerView.delegate = self;
    //pickerView.dataSource = self;
    //pickerView.showsSelectionIndicator = YES;
    self.datePickerView = pickerView;  //UIDatePicker

    fromDate.inputView = pickerView;

    // create a done view + done button, attach to it a doneClicked action, and place it in a toolbar as an accessory input view...
    // Prepare done button
    UIToolbar* keyboardDoneButtonView = [[UIToolbar alloc] init];
    keyboardDoneButtonView.barStyle = UIBarStyleBlack;
    keyboardDoneButtonView.translucent = YES;
    keyboardDoneButtonView.tintColor = nil;
    [keyboardDoneButtonView sizeToFit];

    UIBarButtonItem* doneButton = [[[UIBarButtonItem alloc] initWithTitle:@"Done"
                                                                    style:UIBarButtonItemStyleBordered target:self
                                                                   action:@selector(pickerDoneClicked:)] autorelease];

    fromDate.text = (NSString *)datePickerView.date; // fromDate is the Text Field outlet, where I am trying to display the selection on the picker.

    [keyboardDoneButtonView setItems:[NSArray arrayWithObjects:doneButton, nil]];

    // Plug the keyboardDoneButtonView into the text field...
    fromDate.inputAccessoryView = keyboardDoneButtonView;  

    [pickerView release];
    [keyboardDoneButtonView release];
     }

    - (IBAction)pickerDoneClicked:(id)sender {

        [fromDate resignFirstResponder];
    } 
```

编辑：我可以为屏幕上的一个文本字段执行此操作。无论如何，第二个文本字段只会弹出一个键盘。

有什么想法可以为第二个文本字段执行此操作吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-17T10:49:06.017

```
fromDate.inputView = pickerView; 
```

这行代码使选取器视图成为 fromDate 字段的输入视图。您需要其他日期字段的类似代码。您还需要在其他字段上设置输入附件。

创建一种特殊的方法来执行此操作并在所有文本字段上执行操作是不必要的工作。只需在其中创建选择器视图和工具栏，`viewDidLoad`并将它们分配给您想要它们的任何字段的输入视图和附件视图。文本字段已经有一个触摸方法，它会调出键盘。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-17T11:50:49.567

只是您问题的替代解决方案。

1）`UIButton`在要显示的点击的文本字段上放置一个自定义`UIDatePickerView`

2) 将要在其上显示选取器视图的文本字段的委托设置为 nil。

```
fromDate.delegate = nil; 
```

3）在该`IBAction`自定义按钮的（“touch down”）上写下以下代码：-

```
- (IBAction) customButtonAction: (id) sender
{
    [_previousTextField resignFirstResponder]; // The instance of last textfield tapped.

    [self showDatePicker];
} 
```

4）点击选择器视图的“完成”按钮，将所选值设置为文本字段

```
- (IBAction)pickerDoneClicked:(id)sender 
   {
      fromDate.text = @"value from UIPickerView's selected row"
   } 
```

# jsf - PrimeFaces 编辑器值显示不带标签

> ID：11520885
> 
> 赞同：1
> 
> 时间：2012-07-17T10:45:45.813
> 
> 标签：jsf, primefaces

```
<p:editor id="message" value=" #{user.contact}" width="600" height="500" style="margin-left: 20px;"></p:editor> 
```

上面的代码帮助我保存带有样式的文本（因为编辑器具有控制属性）。但是当我将保存的文本显示为“h:outputtext”时，它会带有标签。就像是：

```
<br>asdasa</br>edw<b>sdcsdcsc</b> 
```

如果我在编辑器中显示保存文本，我无法隐藏控件属性。那么如何显示带有样式且不带标签的文本呢？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-17T11:14:33.747

如果要显示未转义的文本，请使用：

```
<h:outputText value="#{somebean.somevalue}" escape="false" /> 
```

# mfcc - 使用 mfcc 和动态时间规整 (dtw) 进行声音分类

> ID：11520901
> 
> 赞同：2
> 
> 时间：2012-07-17T10:46:50.800
> 
> 标签：mfcc

我的目标是对我在 java 中使用 mfcc 和 dtw 的非语音信号进行分类。但是我被困在中间。我将不胜感激任何帮助。我已经为每一帧评估了 13 个 mfcc 值，但是有些值是负数，我很困惑我所遵循的过程是对还是错。目前我正在使用 JAudio 提供的代码。我也尝试过其他代码，它们也给了我负值。

其次，我每帧得到 13 个系数，考虑到一定长度的样本有 157 帧，我得到 157 组 13 mfcc。我很难如何使用 DTW 中的所有系数，因为 dtw 只给出两个时间信号之间的最近距离。我确实有 DTW 代码来比较两个时间信号。我不确定如何将信号的所有 mfccs 值用作特征。

我缺少一些关键的分类步骤吗？请帮我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-26T11:08:41.430

查看：[http](http://code.google.com/p/aquila/) ://code.google.com/p/aquila/ 具体来说：[http](http://code.google.com/p/aquila/source/browse/trunk/examples/dtw_distance/main.cpp) ://code.google.com/p/aquila/source/browse/trunk/examples/dtw_distance/main.cpp其中有一个示例dtw 距离计算的代码。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-27T11:58:26.373

假设您有 N1 组 13 个 MFCC，每组用于第一个信号，N2 组 MFCC 用于第二个信号。您应该计算第一个信号中的每组*与第二个信号中的**每组*之间的距离（您可以使用[欧几里得距离](http://en.wikipedia.org/wiki/Euclidean_distance)来计算两个 13 大小的阵列之间的距离）

 *这将为您留下一个 N1xN2 二维数组，您现在应该在其上应用 DTW。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-07-09T09:45:08.630

DTW 的使用假设在您的情况下验证 2 个音频序列。因此，对于要验证的序列，您将有一个矩阵 M1xN 和查询 M2xN。这意味着您的成本矩阵将具有 M1xM2。

要构建成本矩阵，您必须在序列之间应用距离/成本度量，如 cost(i,j) = your_chosen_multidimension_metric(M1[i,:],M2[j,:])

结果成本矩阵将是 2D，您可以轻松应用 DTW。

我基于 MFCC 为 DTW 制作了类似的代码。下面是返回 DTW 分数的 Python 实现；x 和 y 是语音序列的 MFCC 矩阵，具有 M1xN 和 M2xN 维度：

```
def my_dtw (x, y):
    cost_matrix = cdist(x, y,metric='seuclidean')
    m,n = np.shape(cost_matrix)
    for i in range(m):
        for j in range(n):
            if ((i==0) & (j==0)):
                cost_matrix[i,j] = cost_matrix[i,j]

            elif (i==0):
                cost_matrix[i,j] = cost_matrix[i,j] + cost_matrix[i,j-1]

            elif (j==0):
                cost_matrix[i,j] = cost_matrix[i,j] + cost_matrix[i-1,j]

            else:
                min_local_dist = cost_matrix[i-1,j]

                if min_local_dist > cost_matrix[i,j-1]:
                    min_local_dist = cost_matrix[i,j-1]

                if min_local_dist > cost_matrix[i-1,j-1]:
                    min_local_dist = cost_matrix[i-1,j-1]

                cost_matrix[i,j] = cost_matrix[i,j] + min_local_dist
    return cost_matrix[m-1,n-1] 
```*

# xcode - 如何配置 iOS Simulator 应用程序目录？

> ID：11520902
> 
> 赞同：4
> 
> 时间：2012-07-17T10:46:54.967
> 
> 标签：xcode, ios-simulator, xcode4.3

有没有办法配置 iOS Simulator 应用程序目录？

我正在使用 Xcode 4.3，它目前在

```
/Users/<Username>/Library/Application Support/iPhone Simulator/5.1/Applications/ 
```

当我在 Xcode 中运行一个应用程序时，它会被复制到一个子目录中：

```
/Users/<Username>/Library/Application Support/iPhone Simulator/5.1/Applications/<APP-UUID>/<AppName>.app 
```

“文档”、“库”和“tmp”目录位于应用程序本身旁边。我在我的应用程序中执行的任何文件访问都使用此目录作为根目录。

问这个的原因是我想将文件保存在不是我的启动卷的 SSD 上。所以任何硬链接也不起作用。

我还没有看过 Xcode 4.4 或 4.5，但我也可以使用它们。

**更新：**

实际上软链接有效：

先删除

```
rm -R /Users/<Username>/Library/Application Support/iPhone Simulator/5.1/Applications/ 
```

然后创建软链接

```
ln -s /Volumes/<YourSSDVolume>/Applications/ /Users/<Username>/Library/Application Support/iPhone Simulator/5.1/Applications/ 
```

感谢 John.K.Doe 强迫我再试一次；）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-27T02:57:37.420

您可以使用软链接链接到其他卷，只要这些卷始终位于同一个位置，您还可以使用软链接链接到您在连接 SSD 时配置的某个位置。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-25T14:45:44.283

我认为您可以使用参数来启动模拟器。请参阅此 SO 答案：[https](https://stackoverflow.com/a/4894178/801466) ://stackoverflow.com/a/4894178/801466 。

# methods - 这些方法布局中哪一个是更好的实践？

> ID：11520905
> 
> 赞同：0
> 
> 时间：2012-07-17T10:47:03.660
> 
> 标签：methods, coding-style

我有两种风格：

```
public void methodA() {
     // do something
}

public void methodB()
{
     // do something
} 
```

在实践中哪个更好？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-17T10:52:46.640

使用团队其他成员制定的任何标准。

除非生产力不是优先事项，否则永远不要争论哪个*更好。*

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-18T06:40:24.260

有几个选项可供选择。

1.  使用您的团队正在使用的任何东西。这背后的原因是整个团队的一致性。

2.  如果您的团队中没有任何编码标准，请使用您的 IDE 默认使用的标准。这背后的原因是大多数人默认使用 IDE，它增加了与团队之外的其他程序员的一致性。另一个原因是任何新的团队成员都不必更改 IDE 中的格式化规则，并且可以使用自动格式化而不会意外地弄乱以前的格式。当您是团队中唯一的开发人员时，这是正确的。

3.  如果您的 IDE 没有自动格式化，请从 github 或其他源存储库中检查使用相同语言的其他程序，并为您的团队或您自己遵循该规则。再次，原因是一致性。

# iphone - XMPP Chat for iPhone 中的注册流程

> ID：11520907
> 
> 赞同：1
> 
> 时间：2012-07-17T10:47:17.560
> 
> 标签：iphone, objective-c, xmpp

我正在为我的 iPhone 应用程序实现一个 XMPP 客户端，我已经完成了所有的事情（与其他用户聊天，显示其他用户的存在等）

但是我被困的一件事是，我无法从我的应用程序中注册新用户。我正在使用以下代码段，

```
if ([appDelegate.xmppStream supportsInBandRegistration])
        [appDelegate.xmppStream registerWithPassword:txt_Password.text error:nil]; 
```

但是为此，**supportsInBandRegistration**方法总是返回**NO**并且永远不会调用**registerWithPassword:**方法。

请提供一些有关相同的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-17T22:11:22.910

你用的是什么服务器？一些服务器支持带内注册，即使它们没有根据[XEP-0077](http://xmpp.org/extensions/xep-0077.html)发送正确的流：功能。然而，他们中的大多数人应该在迪斯科结果中给出该功能。

换句话说，尝试注释掉你的`if ([appDelegate.xmppStream supportsInBandRegistration])`，看看它是否有效。如果是这样，您需要向您的库开发人员或服务器开发人员或两者投诉。

# php - PHP 在 str_replace() 之前使用 strpos()

> ID：11520908
> 
> 赞同：1
> 
> 时间：2012-07-17T10:47:23.023
> 
> 标签：php, loops, str-replace, strpos

我有一个循环，它在每次迭代中需要大量文本，并用其他一些内容替换特定的占位符（'token'），如下所示：

```
$string = $pageContent;
foreach($categories as $row) {
    $images = $mdlGallery->getByCategory($row['id']);
    if (!empty($images)) {
        $plug = Plugin::get('includes/gallery', array('rows' => $images));
        $string = str_replace($row['token'], $plug, $string);
    }
} 
```

Plugin 类及其 get() 方法只是从特定目录中获取正确的文件并将缓冲区作为字符串输出。

可能有大量类别，因此我想知道在使用 strpos() 函数填充给定类别中的所有图像之前，首先检查输入字符串是否出现特定“令牌”是否更好，如下所示：

```
foreach($categories as $row) {
    if (strpos($string, $row['token']) !== false) {
        $images = $mdlGallery->getByCategory($row['id']);
        if (!empty($images)) {
            $plug = Plugin::get('includes/gallery', array('rows' => $images));
            $string = str_replace($row['token'], $plug, $string);
        }
    }
} 
```

我关心的是性能——这有帮助吗？- 考虑 $string 可能包含大量字符（MySQL 中的 TEXT 字段类型）？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-17T11:07:33.520

## 解决您的问题

根据您的示例代码，其中使用的文件似乎`Plugin::get()`很小，这意味着包含它们或读取它们不应该产生很大的性能成本，但如果它们很多，您可能需要考虑由于操作系统排队机制而产生的这些成本即使它们包含的数据不大。

该`getByCategory`方法应该会产生很大的性能成本，因为它意味着与数据库的许多连接->查询->读取->关闭通信序列，并且每个都意味着传输大量数据（`TEXT`您提到的字段）。

您应该考虑使用单个 SQL 查询以批处理操作的形式获取数据，并将其存储在由行 id 索引的缓存变量中，以便`getByCategory`可以从缓存中获取数据。

您当前的问题不是简单的代码审查问题，而是方法问题。您已经使用了针对小型数据集的典型技术作为处理大型数据集的方法。如果您拥有中等数据集并且没有感觉到性能下降，则“在简单脚本上包装 foreach”的概念有效，如果您不需要单独的方法来处理大型数据集。

## 回答你的问题

using`strpos`意味着遍历整个 haystack 一次以检查它是否包含针，然后再次遍历它以进行替换`str_replace`。

如果干草堆不包含针，`strpos === str_replace`（在计算复杂性方面）因为它们都必须遍历整个字符串直到最后以确保没有针。

使用这两个函数会为任何不包含针的干草堆增加 100% 的计算复杂度，并为任何包含针的干草堆增加 1% 到 100% 的计算复杂度，因为`strpos`将在找到第一根针后立即返回可以在字符串的开头、中间或结尾找到。

简而言之，在这里**不要使用`strpos`它对您没有帮助**，如果您使用的是 RegEx 引擎，则可能会比不包含针头的干草堆`preg_replace`产生更多的计算复杂性。`strpos`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-17T11:45:44.827

谢谢 Mihai - 这很有意义，但是 - 在这种特殊情况下，即使我首先从数据库中获取所有记录 - 意味着所有具有相关类别的图像 - $string 很少会包含超过只有一两个“令牌”——这意味着如果有许多类别（“令牌”）可以比较，使用 strpos() 实际上可以节省时间。

想象一下，我们没有在每次迭代中调用**getByCategory**，因为我们已经将所有可能的记录存储在之前生成的数组中——我们仍然必须通过 Plugin::get() 方法和 str_replace() 内部的输出缓冲——这意味着如果我们说 20 个类别 - 这将发生 20 次，而 $string 中不一定包含“令牌”。

因此，如果假设在 $string 中发现大量“令牌”与我们循环遍历的类别数量相比，您的建议将起作用，但对于少数“令牌”，我认为 strpos() 会仍然是有益的，因为这将是每个类别中唯一执行的一个，而不是当 strpos() 返回 true 时执行的两个 - 在这种情况下，与 ob 和 str_replace 相比，每次都以 strpos() 的形式支付的代价很小在循环中 - 你不觉得吗？

我非常感谢你的解释。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-04-28T12:11:06.547

如果您正在寻找优化（尤其是微优化），我认为最好自己对东西进行基准测试。任何实现都有不止一个变体（通常），因此最好对您使用的变体进行基准测试。据此，您可以在这里看到基准测试结果：使用 strpos：http: [//3v4l.org/pb4hY#v533](http://3v4l.org/pb4hY#v533) 没有 strpos：http: [//3v4l.org/v35gT](http://3v4l.org/v35gT)

# c# - 即使光标在表单之外，C#也会更改光标

> ID：11520911
> 
> 赞同：1
> 
> 时间：2012-07-17T10:47:24.827
> 
> 标签：c#, cursor

即使光标位于表单之外，是否可以更改光标？

我通过使用 Win32 API 使用 MouseHook 来捕获光标在窗体外时的位置。但是，我无法更改光标...

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-17T11:39:49.730

程序决定光标应该是什么样子。大多数窗口要求默认箭头。但是，比如说，一个文本框控件要求一个 I-Beam。超链接控件请求手。等等。如果您将鼠标悬停在可调整大小窗口的窗口边缘，则程序会要求调整大小的光标之一。或者一个程序停止做某事一段时间并要求沙漏光标。等等。

因此，更换光标充满了麻烦，您无法为另一个您一无所知的程序做出正确的光标选择。

您可以从技术上调用 SetSystemCursor() 来替换系统光标之一。但这也*很*麻烦，当你的程序被炸毁时，你将无法正确恢复它。需要重新启动才能解决问题。对于有视觉障碍的用户也非常不利，您将用一个小光标替换她选择的超大光标。

这需要是用户选择，他们去控制面板+鼠标来选择光标。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-17T10:51:34.433

也许您应该尝试事件 MouseEnter 和 MouseLeave

# css - 设置输入元素的 SVG 填充颜色

> ID：11520915
> 
> 赞同：2
> 
> 时间：2012-07-17T10:47:39.387
> 
> 标签：css, svg

**当下面的输入元素处于 :hover 状态而不更改**源 svg 图像时，是否可以更改 SVG 内容的填充颜色？

```
<input type="image" src="images/toolbar/check.svg" /> 
```

最终奏效的解决方案基于 Erik 的建议：

首先需要将输入元素更改为带有内联 svg 内容的按钮元素：

```
<button type="button">
  <svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"     version="1.1" id="Layer_1" x="0px" y="0px" viewBox="0 0 95.453 100" enable-background="new 0 0 95.453 100" xml:space="preserve"><g><g><polygon points="94.587,27.48 31.657,86.15 31.217,85.68 18.847,72.41 0.566,52.81 14.106,40.19 32.387,59.79 81.776,13.74"/></g></g>
</svg>
</button> 
```

然后我们可以使用普通的 CSS 设置 svg 填充颜色的样式：

```
button:hover svg {
    fill: red;
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-17T11:28:40.063

为什么不为此使用内联 svg，然后添加一些 CSS 来设置填充颜色的样式。那应该更有效率。

# iphone - 从 Sqlite 数据库访问 Plist

> ID：11520916
> 
> 赞同：0
> 
> 时间：2012-07-17T10:47:40.587
> 
> 标签：iphone, sqlite, plist

我的目标是填充一个 Tableview。对于使用 Sqlite 数据库的那个 m，因为我需要使用数组添加、删除和更新该表。使用 Sqlite，我可以轻松实现这个目标。但是，一旦我们重新启动我们的应用程序，存储在该数组中的所有数据都会丢失。但是，表中的数据应该在安装了此应用程序的所有设备中都可用。为了实现这个目标，我想到了使用 Plist。有没有其他方法可以实现这个目标？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-17T10:59:26.707

您的问题措辞不是很清楚，但据我了解，您有一些已插入 sqlite 数据库的静态数据。如果您希望这些数据可用，您应该获取包含该数据的 sqlite 数据库并将其保存在应用程序的`Resources`文件夹中，以便它实际上被复制到应用程序中。然后，您可以使用方法获取数据库文件的路径`NSBundle`并从那里开始。

如果不是很多数据，您可以创建一个静态数组或其他东西并将其存储在那里。您也可以考虑研究 Core Data 而不是使用原始 sqlite。

您还可以将数据存储在属性列表或其他文件中并从中读取。但是不要`NSUserDefaults`用于此；该属性列表更适合用户偏好，而不是静态数据。

# java - 如何正确检查页面标题？

> ID：11520919
> 
> 赞同：0
> 
> 时间：2012-07-17T10:47:45.763
> 
> 标签：java, selenium, webdriver, title

我在 Eclipse 中使用 Selenium WebDriver。

我编写方法来检查标题是否正确显示。这是代码：

```
class Check {
    String text_to_found;
    String reason;

    Check (String t, String r) {
        text_to_found=t;
        reason=r;
    }

    public void check_title() {
        try {
            Assert.assertTrue("Title " + text_to_found + " not found", text_to_found.equals(reason));
        } catch (AssertionError e) {
            System.err.println("title not found: " + e.getMessage());
        }
} 
```

我用这样的命令调用它：

```
Check title1 = new Check ("Title", driver.getTitle());
title1.check_title(); 
```

第一次它工作正常。但是第二次（等等），如果我调用这个方法（对于新打开的窗口）它说找不到标题，但我知道它是正确的。建议，代码有什么问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-17T14:03:34.277

我刚刚使用您的代码检查了 google.com 的标题。如果标题不匹配，请在您的代码中 -

```
 Check title1 = new Check ("G3oogle", driver.getTitle());
  title1.check_title(); 
```

我们得到结果——`title not found: Title G3oogle not found`

但如果它匹配如下 -

```
Check title1 = new Check ("Google", driver.getTitle());
  title1.check_title(); 
```

您没有在控制台上打印任何内容。因此，如果您想在标题匹配的情况下将任何内容打印到控制台，那么您可以修改您的代码 -

```
 public void check_title() {    

     if(text_to_found.equals(reason)){
          System.out.println("title found: Title "+text_to_found+" found");
     }
     else{

         System.out.println("title not found: Title "+text_to_found+" not found");
     }
    } 
```

# javascript - 如何使用 DWR addRows 函数在顶部添加行

> ID：11520922
> 
> 赞同：0
> 
> 时间：2012-07-17T10:47:52.453
> 
> 标签：javascript, comet, dwr, reverse-ajax

我正在关注这个例子[http://directwebremoting.org-demo/reverseajax/peopleTable.html](http://directwebremoting.org/dwr-demo/reverseajax/peopleTable.html)

在这里，它将行添加到表的末尾。

但我的要求是我必须在顶部添加。每个新行都应该是第一行。

请帮助我，从 2 天以来我一直在努力把它拿出来。但没用。

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-04T20:29:23.817

似乎 addRows 只是在顶部添加。

最快的解决方案是在 [in Java] [在 Util.AddRow 之后] 调用 Util.setValue 并传递隐藏 HTML 元素的 id。我建议使用类似当前时间戳的东西，这样它就会改变自身。这是 Util.Java 中的方法 [查看 DWR 源代码]：

```
public static void setValue(String elementId, Object value) 
```

然后在 javascript 中，您可以“观察”隐藏字段的变化，以防将最后一行推到第一个位置。

否则，如果您想要一个没有隐藏字段的更清洁的解决方案，您将不得不覆盖 JS 中的 addRows 但有一天您还想在末尾添加行广告...

但我想隐藏字段的解决方案相当简单

# php - 如何让仅登录用户查看 MVC 模式中的某些页面？

> ID：11520927
> 
> 赞同：1
> 
> 时间：2012-07-17T10:48:06.903
> 
> 标签：php, oop, model-view-controller, authentication

我多年来一直在做 PHP，并且知道如何检查用户是否已登录以及所有这些，但我找不到如何以 MVC 方式执行此操作的好例子。

我在想，如果成员页面的控制器类似于成员/成员页面1、成员/成员页面2，那么我可以使用“成员”一词的正则表达式来检查控制器的开头，如果它返回 true，那么我可以检查一下查看用户是否已登录。它可能会起作用，但这是最好的方法吗？

此外，对于控制器文件夹中的成员页面，是否最好将它们放在控制器文件夹中名为“members”的子文件夹中？无论如何，我肯定会这样做。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-17T11:04:26.003

最好的选择是检查控制器之外的用户访问权限。授权不是控制器的责任。你会破坏[SRP](http://en.wikipedia.org/wiki/Single_responsibility_principle)。如果您想了解如何实现它，请阅读本主题：[ACL 实现](https://stackoverflow.com/questions/3430181/acl-implementation)。

至于站点*的仅限会员*区域，关于是否显示它们或显示错误的决定可以在访问控制器之前处理，或者由视图（如果您有活动视图而不是被动的）。

虽然更多时候你会涉及到这两个部分：授权服务更改[模型层](https://stackoverflow.com/a/5864000/727208)中的状态，然后视图通过选择在演示文稿中包含*错误消息模板*来对该更改做出反应。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-17T11:16:05.353

一切都以不同的方式进行。我尝试为 PHP 构建一个小型 MVC 框架，这就是我完成身份验证的方式（真的很像 rails 方式：）

有一个`'SessionsController'`

`SessionsController`包含一个调用的方法，该方法`'user_is_logged_in'`返回用户会话的当前状态。然后将此方法添加到`'_before'`我想要保护的任何类的特殊方法中。

主应用程序总是`_before`在任何其他方法之前运行控制器操作（如果存在）。您也可以传入`'except'`它以阻止它执行某些操作，因此这只是检查用户是否在该操作中登录的情况。

当然，正如@tereško 强烈建议的那样，可能有更合规的方法可以做到这一点，但它适用于我正在开发的小型应用程序。

# jquery - Ajax - 在获取之前修改数据字符串

> ID：11520931
> 
> 赞同：1
> 
> 时间：2012-07-17T10:48:14.933
> 
> 标签：jquery

```
$.ajax({
        type: 'GET',
        url: 'report.php',
        data: ({url: href})
 });

alert(href); 
```

href = [https://website.com](https://website.com)

如何从 url 中删除 https？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-17T10:50:55.610

只需在 href 上使用 Javascript 的替换功能。

```
href.replace('https://',''); 
```

# matrix - 非方阵 CUDA 的通用快速转置

> ID：11520933
> 
> 赞同：0
> 
> 时间：2012-07-17T10:48:22.827
> 
> 标签：matrix, cuda, transpose

SDK 提供了处理方阵转置的示例和策略，但是有没有在非方阵上执行转置的好方法？我目前有一个非常幼稚的实现，如下所示，这可能很糟糕：

```
template<class S>
__global__ void transpose(S *Source, S *Destination, int SizeX, int SizeY) {
    int tid = threadIdx.x + blockIdx.x * blockDim.x;

    if (tid<SizeX*SizeY) {
        int X = tid % SizeX;
        int Y = tid / SizeX;

        //(x,y) => (y,x)

        int newId = (SizeY*X) + Y;
        Destination[newId] = Source[tid];
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-09T03:50:14.843

在这里，我的想法是只用必要的线程/块来转置矩阵的正方形部分（每个线程交换正方形子矩阵的两个条目），然后遍历并转置剩余的条目。

```
__global__ void kernelTranspuesta(float *a, float *c, int m, int n) {
   int i = threadIdx.x + blockIdx.x*blockDim.x; 
   int j = threadIdx.y + blockIdx.y*blockDim.y; 
   int smallest = M < N ? M : N;

   while( j < smallest ){
      i = threadIdx.x + blockIdx.x*blockDim.x;
      while( i < j ){
         c[i*m+j] = a[j*n+i];
         c[j*m+i] = a[i*n+j];
         i+= blockDim.x*gridDim.x; 
      }
      if(i == j)
         c[j*m+i] = a[i*n+j];

     j+= blockDim.y*gridDim.y; 
   }  

   if( M > N ) {
      i = threadIdx.x + blockIdx.x*blockDim.x + N;
      j = threadIdx.y + blockIdx.y*blockDim.y; 

      while( i < M ){
         j = threadIdx.y + blockIdx.y*blockDim.y; 
         while( j < N){
           c[j*m+i] = a[i*n+j];
           j+= blockDim.y*gridDim.y; 
         }
         i+= blockDim.x*gridDim.x; 
      } 
   }else{
      i = threadIdx.x + blockIdx.x*blockDim.x;
      j = threadIdx.y + blockIdx.y*blockDim.y + M; 

     while( i < M ){
         j = threadIdx.y + blockIdx.y*blockDim.y + M; 
         while( j < N){
           c[j*m+i] = a[i*n+j];
           j+= blockDim.y*gridDim.y; 
         }
         i+= blockDim.x*gridDim.x; 
      } 
   }

} 
```

内核调用是

```
 dim3 hilos(16,16);   // hilos(blockDim.x, blockDim.y) 
   dim3 bloques(8,8); // bloques(gridDim.x, gridDim.y)

   kernelTranspuesta<<<bloques, hilos>>>(aD, cD, m, n); 
```

我在 512x256 和 256x512 矩阵上对其进行了测试，让我知道你的想法。

# windows - 单击时在树控件中显示节点名称（MFC/VC++）

> ID：11520937
> 
> 赞同：0
> 
> 时间：2012-07-17T10:48:33.923
> 
> 标签：windows, winapi, visual-c++, mfc

单击它时，我想在树视图结构中显示任何节点的名称。有什么想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-17T11:42:10.393

纯 Winapi：使用[TreeView_GetSelection](http://msdn.microsoft.com/en-us/library/windows/desktop/bb773891%28v=vs.85%29.aspx)一个[TreeView_GetItem](http://msdn.microsoft.com/en-us/library/windows/desktop/bb773841%28v=vs.85%29.aspx)宏。

```
 TVITEM tvitem = {0};
                HTREEITEM hSelected = NULL;

                WCHAR wText[MAX_PATH] = {0};

                hSelected = TreeView_GetSelection(g_hTree);

                if (hSelected)
                {
                    tvitem.mask = TVIF_TEXT;
                    tvitem.pszText = wText;
                    tvitem.cchTextMax = MAX_PATH;
                    tvitem.hItem = hSelected;

                    TreeView_GetItem(g_hTree, &tvitem);
                } 
```

现在*wText*保存点击项目的名称。

# sencha-touch - 如何让 Carousel 占据它需要的空间？

> ID：11520940
> 
> 赞同：0
> 
> 时间：2012-07-17T10:48:46.183
> 
> 标签：sencha-touch, extjs, sencha-touch-2

我不太清楚如何在容器内的其他两个项目之间设置轮播，轮播没有设定高度，而是根据活动项目内容的大小占用所需的空间。示例代码：

```
Ext.define('MyApp.view.MyContainer', {
    extend: 'Ext.Container',

    config: {
        items: [
            {
                xtype: 'container',
                items: [
                    {
                        xtype: 'label',
                        html: 'abc'
                    }
                ]
            },
            {
                xtype: 'carousel',
                items: [
                    {
                        xtype: 'container',
                        items: [
                            {
                                xtype: 'label',
                                html: 'just need space for one line'
                            }
                        ]
                    },
                    {
                        xtype: 'container',
                        items: [
                            {
                                xtype: 'label',
                                html: 'need<br/>space<br/>for<br/>more<br/>lines'
                            }
                        ]
                    }
                ]
            },
            {
                xtype: 'container',
                items: [
                    {
                        xtype: 'label',
                        html: 'def'
                    }
                ]
            }
        ]
    }

}); 
```

对我来说，如果没有指定高度，它只会崩溃（根本不占用任何空间）。使用煎茶触控 2。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-17T19:23:17.113

嘿@TragedyStruck 首先，您已经**了解了**显示 Web 应用程序的屏幕。好的，我们开始吧，我做了你的代码版本。该组件`Ext.Viewport.getSize().height`为您的元素占用必要的空间。如果您想要全屏元素，这适用于非全屏元素，因此您需要以编程方式制作`function`.

```
Ext.define('myapp.view.MyContainer', {
   extend: 'Ext.Container',
   xtype: 'mycontainer1',

   config: {
      scrollable: true,
      items: [
        {
            xtype: 'container',
            items: [
                {
                    xtype: 'label',
                    html: 'abc'
                }
            ]
        },
        {
            xtype: 'carousel',
            style: 'background-color: red',
            height: Ext.Viewport.getSize().height,
            renderTo: document.body,
            items: [
                {
                    xtype: 'container',
                    items: [
                        {
                            xtype: 'label',
                            html: 'just need space for one line'
                        }
                    ]
                },
                {
                    xtype: 'container',
                    items: [
                        {
                            xtype: 'label',
                            html: 'need<br/>space<br/>for<br/>more<br/>lines'
                        }
                    ]
                }
            ]
        },
        {
            xtype: 'container',
            items: [
                {
                    xtype: 'label',
                    html: 'def'
                }
            ]
        },
        {
            xtype: 'container',
            items: [
                {
                    xtype: 'label',
                    html: 'ghi'
                }
            ]
        }

     ]
  }
}); 
```

**我希望这有帮助。:)**

![在此处输入图像描述](../Images/f97613feb80529d76444b06a815d0c67.png)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-17T23:05:46.400

您需要为容器设置布局。您可以[在此处找到布局介绍](http://www.sencha.com/learn/intro-to-layouts-in-sencha-touch-2/)

基本上，您将其添加到您的配置中：

```
layout:'vbox', 
```

VBox 布局将项目水平放置在容器中。

然后，在您的轮播中，只需添加：

```
flex:1 
```

告诉它尽可能多地占用空间。

[这里的例子](http://www.senchafiddle.com/#EVqmR)

希望这可以帮助

# html - 为什么链接有不同的颜色？

> ID：11520945
> 
> 赞同：-1
> 
> 时间：2012-07-17T10:49:10.477
> 
> 标签：html

我很惊讶为什么这些链接有不同的颜色？这里是代码

```
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="ka-ge" lang="ka-ge" >
<head>
<meta http-equiv="content-type" content="text/html; charset=utf-8" />
</head>
<style>

#links { 
    margin: 0 auto; 
    width: 4800px; 
    font-size:70px;
    clear: both; 
    display: block;

}
#test a {
    float: right;
}
</style>
<body bgcolor="green" >
<a href="indexE.html"><img src ='english.gif' style="float:right"  width="88" height="88"> </a>
<a href="indexR.html"><img src ='russian.gif' alt="Russian flag" style="float:right"  width="88" height="88"/></a>
<a href="index.html"> <img src="georgian.jpg"  style="float:right" width="88" height="88"/></a>
<div id="links">
<a href=" index.html " >მთავარი </a>
&nbsp;
<a href=" ბაკურიანი.html ">ბაკურიანი </a>
&nbsp;
<a href=" გუდაური.html ">გუდაური </a>
&nbsp;
<a href=" ზღვა.html ">ზღვა </a>
&nbsp;
<a href=" კახეთი.html ">კახეთი </a>
&nbsp;
<a href=" სვანეთი.html ">სვანეთი </a>
&nbsp;
<a href=" ვარძია.html ">ვარძია </a>
&nbsp;
<a href=" ქართლი.html ">ქართლი </a>
&nbsp;
<a href=" ძველი_თბილისი.html ">ძველი_თბილისი </a>
</div>
</body>
</html> 
```

当我在谷歌浏览器中运行它时，所有东西都有相同的颜色，除了ზღვა(sea)、კახეთი(kakheti)、ვარძია(vardzia)、ქართლი(qartli)，所有这些名称都是蓝色的，而其他颜色的其他颜色，你能帮忙吗我为什么会这样？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-17T10:51:04.500

这些是`:visited`or的默认样式`:active`。

> :visited 选择器用于选择访问过的链接。
> 
> :active 选择器用于选择和设置活动链接的样式。
> 
> 单击链接时，链接将变为活动状态。

**编辑：**要使它们都具有相同的样式，您可以这样做：

```
a, a:active, a:visited {
    color: red;
} 
```

这将设置普通链接、活动链接和访问链接的样式。您也可以使用 a:hover 进行翻转。

# http - 哪种 HTTP 响应代码最适合这种情况？

> ID：11520947
> 
> 赞同：0
> 
> 时间：2012-07-17T10:49:14.033
> 
> 标签：http, rest, restful-architecture

我正在编写一个 API 以使用户可以订阅事物。用户可以通过提交如下内容订阅任何内容`POST`：

```
{
    "item_id": "c13",
    "requested_status": "subscriber",
    "sure": true,
} 
```

在这里你可以看到一个`sure`参数。我正在使用它来避免意外订阅。如果客户端在没有`sure`参数的情况下发送该信息，API 拒绝该请求以使 GUI 询问“确定要订阅这个吗？”。如果用户确认，同样的帖子会再次出现`sure`参数。并且订阅（或取消订阅）发生。

因此，当我因为没有`sure`参数而拒绝该请求时。我应该使用哪个响应代码？我认为可以使用 400（错误请求），但不确定。

谢谢你的回复。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-17T11:11:23.533

HTTP 代码是具有纯技术意义的代码。你要的不是技术问题，不应该用技术手段来处理。

由于收到响应并包含技术上正确的值（与功能有效值不同！），您应该发送 200 - OK 状态。您的响应内容应该是接下来要执行的操作。在这种情况下，询问用户是否确定。

如果您使用[Post-Redirect-Get](http://en.wikipedia.org/wiki/Post/Redirect/Get)，则 303 - See Other 状态是您的最佳选择。

# php - 如何在wordpress中写入文件

> ID：11520949
> 
> 赞同：4
> 
> 时间：2012-07-17T10:49:14.813
> 
> 标签：php, wordpress

我正在编写一个插件，并且可以选择从管理员端编写 css。这里我需要将 css 写入一个名为 style.css 的特定文件中。对于这些，我使用了 php 函数`<?php file_put_contents($file, $data, FILE_TEXT )?>`。但它显示错误

> file_put_contents（http://localhost/car/wp-content/plugins/networks-inv/tab/style.css）[function.file-put-contents]：无法打开流：HTTP 包装器不支持 C 中的可写连接:\wamp\www\car\wp-content\plugins\networks-inv\admin\templates.php 在第 49 行。我不明白为什么会显示这些错误？有什么方法可以在wordpress插件中写入文件

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2021-08-05T15:13:12.047

您可以使用以下 WP 函数动态获取插件目录路径，然后将其传递给`file_put_contents`函数。

```
$upload_dir = plugin_dir_path( __DIR__ ).'/networks-inv/tab/style.css';

file_put_contents($upload_dir, $data, FILE_TEXT ); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-17T10:50:40.220

您应该编写文件的系统路径，而不是 URL。

你应该 ：

```
$file = "car/wp-content/plugins/networks-inv/tab/style.css";
file_put_contents($file, $data, FILE_TEXT ); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-17T10:51:55.230

这可能是因为您尝试使用 http 方法编写尝试使用本地文件路径

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2020-11-08T03:27:43.707

我最初收到相同的警告，但确定将文件路径设置为：

```
$file = ".\wp-content\plugins\logging.txt"; 
```

代替

```
$file = ".\\\\wp-content\\\\plugins\\\\logging.txt"; 
```

文件路径应该有两个斜杠而不是一个。

我希望这可以解决路径名不正确的问题。

# javascript - 从父页面重新加载子页面

> ID：11520954
> 
> 赞同：0
> 
> 时间：2012-07-17T10:49:47.537
> 
> 标签：javascript, jquery, html, dom, web

我希望每次单击重新加载时都会从父页面重新加载子页面（从父页面的链接打开）。

我使用了这个，但是当我刷新父页面时这不起作用。

```
<li><a href="js.php" title="alert-tab"  onclick="myWindow=window.open('http://www.google.com','_blank');">New Window</a></li>

<li><a href="#" title="alert-tab"  onclick="myWindow.location.reload();">Reload</a></li> 
```

对这个问题有任何帮助吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-17T10:53:48.467

出于安全原因，您无法在现代浏览器中读取或更改（包括重新加载）使用另一个域的 URL 加载的窗口/iframe（例如`htt://google.com`，假设您不是 Google 编码员）。

所以你不能这样做，除非远程服务器[授权它](https://developer.mozilla.org/en/http_access_control)，这并不常见。

如果页面在同一个域上，这有效：

```
<li><a href="#" title="alert-tab"  onclick="myWindow=window.open('index2.html','_blank');">New Window</a></li>
<li><a href="#" title="alert-tab"  onclick="myWindow.location.reload();">Reload</a></li>​ 
```

在您的测试中要小心始终在`http://`（而不是`file://`）中打开，因为 2 个本地文件始终被视为单独的域。

请注意，如果您为窗口命名，则下次加载它将在同一个窗口中，即使您在两者之间重新加载了父页面：

```
<li><a href="#" title="alert-tab"  onclick="myWindow=window.open('index2.html','someName');">New Window</a></li> 
```

因此，如果您想在重新加载父页面时重新加载子页面，您可以执行以下操作：

```
<li><a href="#" title="alert-tab" id=mylink>New Window</a></li>
<script>
function openPage(){
    myWindow=window.open('index2.html','someName');
    localStorage['open'] = 'yes';
}
window.onload = function(){
    document.getElementById('mylink').onclick=openPage;
    if (localStorage['open']=='yes')  myWindow=window.open('index2.html','someName');
    localStorage['open'] = 'no';
};
</script> 
```

这个想法是在加载时检查子窗口上次是否打开，并在必要时强制重新加载。

当然，这仅适用于从同一域提供父级和子级的情况。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-17T10:56:36.163

您可以*重新打开*页面，这在大多数情况下与重新加载具有相同的效果。

```
<li><a href="js.php" title="alert-tab"  onclick="myWindow=window.open('http://www.google.com','_blank');">New Window</a></li>

<li><a href="#" title="alert-tab"  onclick="myWindow=window.open('http://www.google.com','_blank');">Reload</a></li> 
```

# sql-server - 执行存储过程 MS SQL 2008 时，看到字符串或二进制数据将被截断

> ID：11520958
> 
> 赞同：1
> 
> 时间：2012-07-17T10:49:56.920
> 
> 标签：sql-server, sql-server-2008, stored-procedures

我在 MS SQL 2008 中有一个存储过程，它编译时没有错误，但是当执行存储过程时，我收到错误消息“字符串或二进制数据将被截断”。不幸的是，我无法追踪发生这种情况的地方。

当我开发我的存储过程时，我首先测试了查询，并且它有效。

所以，如果有人能告诉我发生这种情况的地点和原因以及如何解决它，我将不胜感激：

```
ALTER PROCEDURE [dbo].[sp_Material_Validation]

@ValidType varchar(MAX),
@MaterialID varchar(MAX)
AS
BEGIN

DECLARE
@MessageReturn varchar(100);
SET @MessageReturn = NULL;

IF @ValidType = 'Primary'

Select TOP 1 Valid.StatusMessage
From
(Select MatID,'Property Not Completed' as StatusMessage
From dbo.Properties
WHERE DATALENGTH(ValueString)=0
UNION
Select PrpCount.MatID,'There not all Properties exist' as StatusMessage
From (Select Count(unkey) as unKeyCt, MatID
From Properties
Group By MatID
Having NOT Count(Cast(UnKey as Int)) = 19)AS PrpCount
UNION
SELECT Header,'Material does not exist' as StatusMessage
FROM Materials Item
Where NOT EXISTS (Select ID
FROM MatMaster Mat
WHERE MAT.ID= Item.HEAD)
UNION
SELECT Header,'Material(s) not Complete' as StatusMessage
FROM Materials
Where MatID IN (Select ID
FROM MatMaster
WHERE INC ='Y')) as Valid
Where Valid.MatID = @MaterialID;

IF @MessageReturn IS NOT NULL

UPDATE dbo.Mat_DEV
SET Inco ='Y',
User_Message = @MessageReturn
WHERE MatID = @MaterialID

ELSE
UPDATE dbo.Mat_DEV
SET User_Message = 'No Validation Errors'
WHERE MatID = @MaterialID 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-17T10:56:24.253

仅当您尝试将值放入不足以容纳该值的框中时，才会出现字符串或二进制数据。

现在，您实际上只是在两个地方写值，因此您的问题的候选者是：-

```
UPDATE dbo.Mat_DEV
SET Inco ='Y',
User_Message = @MessageReturn
WHERE MatID = @MaterialID 
```

..或者..

```
UPDATE dbo.Mat_DEV
SET User_Message = 'No Validation Errors'
WHERE MatID = @MaterialID 
```

检查这两个列（ Inco 和 User_Message ）的列定义。我的猜测是一个太小而无法容纳您要设置的值。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-08-07T06:53:11.567

我有同样的问题。

当我直接执行存储过程时，一切正常。当我从 ASP.NET 调用相同的过程时，我得到“字符串或二进制数据将被截断”...

最后我意识到罪魁祸首是一个 varchar(20) 字段，其默认值为 'suser_sname()'...在 SQL Management Studio 中，用户名很短，从 ASP.NET 来看它超过 20 个字符...一个简单的 CAST解决了这个问题。:)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-17T10:54:37.663

我的猜测是 User_Message 列没有足够的长度

# objective-c - cocoa：如何使用可可中的 drawlabel:inRect 方法向 NSTabViewItem 添加图标？

> ID：11520961
> 
> 赞同：1
> 
> 时间：2012-07-17T10:50:04.357
> 
> 标签：objective-c, cocoa, icons, image-resizing, nstabview

我想`NSTabViewItem`用一些文字添加一个图标。

请帮我解决`drawLabel:inRect:`方法中的代码。

```
- (id)initWithCoder:(NSCoder *)decoder
{
[super initWithCoder:decoder];

tabCell = [[NSBrowserCell alloc] initImageCell:[NSImage 
imageNamed:@"xyz"]];

[tabCell setLeaf:YES];
[tabCell setFont:[[self tabView] font]];
[tabCell setStringValue: [self label]];

return self;
}

- (void)drawLabel:(BOOL)shouldTruncateLabel inRect:(NSRect)tabRect
{
{ //  modify the rect a tad so the cell draws properly..
    tabRect.origin.y += 2;
    tabRect.size.width += 16;
}

[tabCell drawWithFrame:tabRect inView:[self tabView]];
}

- (NSSize)sizeOfLabel:(BOOL)shouldTruncateLabel
{
NSSize superSize = [super sizeOfLabel:shouldTruncateLabel];
NSImage *icon = [tabCell image];

superSize.width += [icon size].width-4;

return superSize;
} 
```

我可以向 中添加一个图标，`NSTabViewItem`但由于它的大尺寸，该图标从选项卡中出来。如何保持图标的大小保持在`TabViewItem`?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-10-29T10:31:49.130

不确定，如果您的问题得到解决，我有类似的用例，我正在使用 drawLabel 并在其中附加图像，

参考代码片段，

```
- (void)drawLabel:(BOOL)shouldTruncateLabel inRect:(NSRect)tabRect{

    NSImage *pImage = [self getImage];

    [[NSGraphicsContext currentContext] saveGraphicsState];
    NSAffineTransform* xform = [NSAffineTransform transform];
    [xform translateXBy:0.0 yBy: tabRect.size.height];
    [xform scaleXBy:1.0 yBy:-1.0];
    [xform concat]; 

    if(pImage){
        [pImage drawInRect:NSMakeRect(tabRect.origin.x-8,-6,16, 16)fromRect:NSZeroRect
                 operation:NSCompositeSourceOver
                  fraction:opacity];
    }
     [[NSGraphicsContext currentContext] restoreGraphicsState];
    [super drawLabel:shouldTruncateLabel inRect:tabRect];
    NSLog(@" Inside drawRect text (%@)",[self labeltitle]);

} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-02-04T08:15:50.573

基于 Amitg2k12 的示例并添加了一些内容：

```
 - (id)initWithCoder:(NSCoder *)decoder {
    self = [super initWithCoder:decoder];

    if (self) {
        [self setToolTip:[self label]];
        [self setLabel:@" "];
    }

    return self;
}

- (NSSize)sizeOfLabel:(BOOL)computeMin {
    return NSMakeSize(16, 18);
}

- (void)drawLabel:(BOOL)shouldTruncateLabel inRect:(NSRect)tabRect {
    NSImage *image = [self image];

    NSRect destRect = NSMakeRect(tabRect.origin.x, tabRect.origin.y + 2, 16, 16);

    [[NSGraphicsContext currentContext] saveGraphicsState];
    NSAffineTransform *affineTransform = [NSAffineTransform transform];
    [affineTransform translateXBy:NSMaxX(destRect) yBy:NSMinY(destRect)];
    [affineTransform scaleXBy:1.0 yBy:-1.0];
    [affineTransform concat];

    if(image) {
        [image drawInRect:NSMakeRect(-NSWidth(destRect), -NSHeight(destRect), 16, 16) fromRect:NSZeroRect
                operation:NSCompositeSourceOver
                 fraction:1.0f];
    }

    [[NSGraphicsContext currentContext] restoreGraphicsState];
    [super drawLabel:shouldTruncateLabel inRect:tabRect];
}

@end 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-10-01T19:24:23.837

此代码适用于我（Swift 3）：

```
import Foundation
import Cocoa

class MyTabViewItem : NSTabViewItem
{
    let iconWidth:CGFloat = 16

    override func sizeOfLabel(_ shouldTruncateLabel: Bool) -> NSSize
    {
        var superSize: NSSize = super.sizeOfLabel(shouldTruncateLabel)
        superSize.width += iconWidth
        return superSize
    }

    override func drawLabel(_ shouldTruncateLabel: Bool, in tabRect: NSRect)
    {
        let icon: NSImage? = NSImage(named:"Eye")
        if icon != nil
        {
            let opacity:CGFloat = 0.5
            icon?.draw(in: NSMakeRect(tabRect.origin.x + tabRect.width - iconWidth + 4, 8, iconWidth, iconWidth), from: NSZeroRect, operation: NSCompositeSourceOver, fraction: opacity)

        }
        super.drawLabel(shouldTruncateLabel, in: tabRect)  
    }

} 
```

未经过全面测试，如果 iconWidth 发生变化，您可能必须更改一些常量。

# sql - 使用 VBScript 将文本文件写入表

> ID：11520964
> 
> 赞同：0
> 
> 时间：2012-07-17T10:50:20.737
> 
> 标签：sql, vbscript, batch-file, sql-server-2008-r2

我有输入线，如 -

```
001-407600 12/26/2011 04:25:43.250 12/26/2011 04:25:43.156
001-338000 12/26/2011 04:22:49.250 12/26/2011 04:22:49.156
001-51600 12/26/2011 04:10:53.234 12/26/2011 04:10:53.140
001-351900 12/26/2011 04:23:24.000 12/26/2011 04:23:23.906 
```

我想通过使用VB脚本将这些数据分别写入`DATATABLE`具有列名的表中`jobid` `date1` `time1` `date2` `time2`

请建议我该怎么做。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-17T12:15:02.203

我不太确定文本文件的格式，因此您可能必须使用`FIELDTERMINATOR`and `ROWTERMINATOR`，但这种方法比尝试逐行执行此方法更容易、更有效。

```
set conn = createobject("ADODB.Connection")

connstr = "Provider=SQLNCLI;Data Source=server\instance;User ID=username;" & _
          "Password=password;Initial Catalog=database_name;"

conn.open connstr

filepath = "c:\wherever\whatever.txt"

sql = "BULK INSERT dbo.DATATABLE FROM '" & filepath & "'" & _
      " WITH (ROWTERMINATOR = '\r\n', FIELDTERMINATOR = ' ');"

conn.execute sql,,129

conn.close : set conn = nothing 
```

# selenium - 使用 testNG 在多个浏览器实例中并行运行一个类中的多个测试

> ID：11520965
> 
> 赞同：2
> 
> 时间：2012-07-17T10:50:29.930
> 
> 标签：selenium, webdriver, testng

请告诉我使用 Web-driver + TestNG 框架的休闲场景的示例代码。

一类有多项测试。在运行这些测试时，它应该同时在同一浏览器（例如：Firefox）的多个实例中并行运行所有测试。因此，对于每个测试，它都应该打开一个浏览器的新实例。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-24T17:49:10.843

到目前为止，我的解决方案是这样的：

```
public MyTestClass {
   SupportedBrowser browser;
   private static ThreadLocal<WebDriver> threadLocalDriver = new ThreadLocal<WebDriver>();

   @DataProvider (name = "getBrowsers")
   public Object[][] getBrowsers {
      return Object[][] {
          {
              SupportedBrowser.FIREFOX;
          },
          {
              SupportedBrowser.CHROME;
          }
      };
   }

   @Factory (dataProvider = "getBrowsers")
   public MyTestClass(SupportedBrowser browser) {
      this.browser = browser;
   }

   @BeforeMethod
   public void setup()
   {
      threadLocalDriver.set(browser.getDriver());
   }
   @Test
   public void test1()
   {
       WebDriver driver = threadLocalDriver.get();
       //do stuff
   }
   @AfterMethod
   public void tearDown()
   {
       WebDriver driver = threadLocalDriver.get();
       driver.quit();
   }
} 
```

这是我的枚举：

```
public enum SupportedBrowser {
    FIREFOX, CHROME;  //add more as needed

    public getDriver() {
       if(this == SupportedBrowser.FIREFOX) {
           return new RemoteDriver(hubAddress, DesiredCapabilities.firefox());  //alternatively could be new FirefoxDriver()
       }
       else {
           return new RemoteDriver(hubAddress, DesiredCapabilities.chrome());
       }

    }
} 
```

请原谅糟糕的代码约定，我不是在 IDE 中编写的（尽管我使用过类似的东西并且它可以工作）。该类针对每个不同的浏览器运行一次。每种方法都有自己独立的驱动程序，确保您的测试可以同时运行。它还允许每个方法采用自己的 DataProvider，以防您需要使用不同参数多次运行测试方法。还要确保在 testng.xml 文件中将并行属性设置为“方法”级别。

我的代码的唯一问题是确保在测试失败时驱动程序退出。目前，此方法将关闭失败的测试留给 selenium 网格（使用 -timeout）。请看我的问题：[在 TestNG 中 @BeforeMethod 和 @AfterMethod 之间共享驱动程序](https://stackoverflow.com/questions/11636044/sharing-driver-between-beforemethod-and-aftermethod-in-testng)。

编辑：我现在在整个线程中共享驱动程序的代码中添加了一个 ThreadLocal 变量，因此您可以在 @AfterMethod 中调用 driver.quit()。

# android - 在 Android 2.2 上未调用 SimpleCursorTreeAdapter 构造函数

> ID：11520966
> 
> 赞同：0
> 
> 时间：2012-07-17T10:50:38.590
> 
> 标签：android, simplecursoradapter

在 Android 2.2 mContext=context （或我放在那里的任何其他内容）上，永远不会被调用。它确实适用于2.3+。这是一个已知问题吗？有解决方法吗？

```
public class ExpListCursorAdapter extends SimpleCursorTreeAdapter {
    Context mContext;

    public ExpListCursorAdapter(Context context, Cursor cursor,
            int groupLayout, String[] groupFrom, int[] groupTo,
            int childLayout, String[] childFrom, int[] childTo) {
         super(context, cursor, groupLayout, groupFrom, groupTo, childLayout, childFrom,
            childTo);
        mContext=context;
}

    @Override
    protected Cursor getChildrenCursor(Cursor groupCursor) {
        int id=groupCursor.getInt(DatabasePazienti.ROWID);
        DatabaseTests mDbTests=new DatabaseTests(mContext);
        mDbTests.open();

        Cursor cursor=mDbTests.fetchPatientTests(id);
        return cursor;
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-17T17:05:44.320

我确认这是一个 Android 2.2 错误（即使我找不到任何参考）。我在我的包中包含了来自 Android 2.3.3 的 SimpleCursorTreeAdapter.java，现在它可以工作了。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-17T17:57:41.443

API 2.2 中的实现`SimpleCursorTreeAdapter`与 API 2.3 不同。正如你在这里看到的：

API 2.2

> [http://grepcode.com/file/repository.grepcode.com/java/ext/com.google.android/android/2.2_r1.1/android/widget/SimpleCursorTreeAdapter.java](http://grepcode.com/file/repository.grepcode.com/java/ext/com.google.android/android/2.2_r1.1/android/widget/SimpleCursorTreeAdapter.java)

API 2.3

> [http://grepcode.com/file/repository.grepcode.com/java/ext/com.google.android/android/2.3_r1/android/widget/SimpleCursorTreeAdapter.java](http://grepcode.com/file/repository.grepcode.com/java/ext/com.google.android/android/2.3_r1/android/widget/SimpleCursorTreeAdapter.java)

当您使用 API 2.2 时，`mContext = context`由于构造函数中调用的方法的顺序，它说永远不会被调用。

# c# - dapper.net 中的多映射

> ID：11520968
> 
> 赞同：3
> 
> 时间：2012-07-17T10:50:46.110
> 
> 标签：c#, dapper

我正在实施我的第一个[Dapper.Net](http://code.google.com/p/dapper-dot-net/)项目。现在我想知道初始化包含另一个对象（多映射）的对象的最简单方法是什么。

这是我的代码：

```
public static IEnumerable<ShopPrefix> GetShopPrefixes(short fiSL)
{
    using (var con = new SqlConnection(Properties.Settings.Default.RM2Con))
    {
        const String sql = @"
            SELECT  locShopPrefix.idShopPrefix,
                    locShopPrefix.fiSL,
                    locShopPrefix.fiShop,
                    locShopPrefix.Prefix,
                    locShopPrefix.Active,
                    locShop.idShop,
                    locShop.ShopName,
                    locShop.ContactPerson,
                    locShop.Street,
                    locShop.ZIP,
                    locShop.City,
                    locShop.Telephone,
                    locShop.Telefax,
                    locShop.Email,
                    locShop.ShopKey
            FROM    locShopPrefix
                    INNER JOIN locShop
                        ON locShopPrefix.fiShop = locShop.idShop
            WHERE   (locShopPrefix.fiSL = @fiSL);";
        con.Open();
        IEnumerable<Tuple<ShopPrefix,Shop>> shops =
            con.Query<ShopPrefix, Shop, Tuple<ShopPrefix, Shop>>(
            sql
            , (shopPrefix, shop) => Tuple.Create(shopPrefix, shop)
            , new { fiSL = fiSL }, splitOn: "idShop"
        );
        foreach (var shop in shops)
            shop.Item1.Shop = shop.Item2;
        return shops.Select(t => t.Item1);
    }
} 
```

所以每个都`shopPrefix`属于（拥有）一个`Shop`。

**问：**这是映射两个对象的正确方法吗，因为`Tuple`使用以下`foreach`初始化属性的方法`Shop`看起来很麻烦？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-17T16:45:17.777

我认为您不需要一个`IEnumerable<Tuple<>>`简单的一对一对象关系。以下代码段也应该足够了。

```
var shopsPrefixes = con.Query<ShopPrefix, Shop, ShopPrefix>(sql
    , (shopPrefix, shop) =>
    {
        shopPrefix.Shop = shop;
        return shopPrefix;
    }
    , new { fiSL = fiSL }
    , splitOn: "idShop"
);
return shopsPrefixes; 
```

# ruby-on-rails - 使用 MVC 时在 Model 中声明方法

> ID：11520971
> 
> 赞同：0
> 
> 时间：2012-07-17T10:50:53.533
> 
> 标签：ruby-on-rails, rails-activerecord

我对 MVC 框架有点陌生，需要知道使用 MVC 框架时的最佳实践是什么。

我有一个名为 NewsFeed 的模型类，其中包含 news_title、news_publish_date、news_url 等字段。

```
class NewsFeed < ActiveRecord::Base

  attr_accessible :description, :feed_id, :link, :publish_date, :title

  def save_news_info(feed_id, news_title, news_link, news_publish_date, news_description)
    self.feed_id = feed_id
    self.title = news_title
    self.link = news_link
    self.publish_date = news_publish_date
    self.description = news_description
  end
end 
```

任务是阅读 rss 提要并收集其中包含的所有新闻，因此我创建了一个名为 FeedReader 的类，在该类中我使用 gem feedzirra 来解析提要链接

```
class FeedReader

  attr_accessor :title, :url, :publish_date, :news_array

  def initialize(feed_url)
    @url=feed_url
  end

  def read
    feed = Feedzirra::Feed.fetch_and_parse(@url)
    @title = feed.title
    @url = feed.feed_url
    @publish_date = feed.last_modified
  end
end 
```

我的问题是，如果像模型（NewsFeed）类一样拥有一个单独的类并在那里有一个读取函数是一个好习惯，还是应该在我的模型类中声明读取函数并删除FeedReader？（因为我一直在读到在模型类中放置太多功能是不受欢迎的！！）并且将来所有的功能（如清理新闻描述、去除特定标签等）都会在模型类中编码，而模型类又会变得越来越大.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-17T11:00:21.263

对此有几种意见。这是我的：你做对了。有一种东西叫做“简单责任原则”，这在当今是一个流行词，但仍然有价值：你的对象应该做一件“事情”，并且把它做好。因此，拥有一个处理新闻提要的类，以及一个处理新闻检索的类，这对我来说完全有意义。

加分点：它（据说）更容易测试。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-17T11:11:04.577

该方法应保留在 中`FeedReader`，但您可能会受益于将`NewsFeed`实例（或可以处理实例列表的集合`NewsFeed`）传递给从提要中提取信息的方法（我不确定名称`read`在这种情况下是否如此好） .

请记住，Atom 和 RSS 提要都有。而且您不应该将您的代码焊接到其中一种格式。相反，您应该能够通过利用多态性同时使用两者（如果需要）。

至于SRP：实际上最好的解释是，我听到的是*跟班应该只有一个改变的理由*。

# iphone - 在 iPad 上禁用纵向模式到 Web 应用程序

> ID：11520980
> 
> 赞同：-1
> 
> 时间：2012-07-17T10:51:29.197
> 
> 标签：iphone, css, ipad

是否可以将 iPad 上的纵向模式禁用到 Web 应用程序？

我为 iPad 和 iPhone 开发了一个 web 应用程序来使用 css 媒体查询。但我只想在横向模式而不是纵向模式下运行这个应用程序。那么有什么解决方案如何禁用人像模式？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-17T12:59:01.487

简短的回答：没有。

长答案：您可以使用媒体查询定位 :landscape 和 :portrait 方向，并且可以针对每种情况更改您的设计。

# xcode - xcodebuild 和 C 标准库

> ID：11520985
> 
> 赞同：0
> 
> 时间：2012-07-17T10:52:00.830
> 
> 标签：xcode, macos, osx-snow-leopard

我有一个为 osx 雪豹创建的 xcode 项目。它所需要的只是运行

> xcodebuild

从命令提示符。我现在正在尝试在 OS X 10.7 上构建相同的项目，当我运行相同的命令时会发生以下错误

> /Users/repo/trunk/main.c:31:10：致命错误：找不到“stdlib.h”文件

到底发生了什么？我试图按照[这个](https://stackoverflow.com/questions/10116724/clang-os-x-lion-cannot-find-cstdint)问题的说明进行操作，但 stdlib.h 仍然丢失。

我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-17T11:37:10.790

从 Xcode 4.3 开始，您可能对 /Applications/Xcode.app 中所有内容的重新打包感到厌烦。在类 Unix 安装中，stdlib.h 通常位于 /usr/include 中，并且您的项目可能希望它像 Xcode 4.3 之前那样存在。您可以通过安装命令行工具来解决此问题，该工具在其标准位置包括工具和相关的头文件和库。

安装命令行工具的最简单方法是从 Xcode 内部。在 Xcode Preferences 中选择“Downloads”窗格，然后选择“Components”选项卡。按下“命令行工具”旁边的“安装”按钮。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-17T11:40:41.570

你需要运行来`xcode-select`告诉你想要使用哪个 Xcode。`xcodebuild``xcrun`

请参阅[此手册页](http://developer.apple.com/library/mac/#documentation/Darwin/Reference/ManPages/man1/xcode-select.1.html)。

# vb.net - Solidworks API and Winforms VB.NET swApp

> ID：11520986
> 
> 赞同：1
> 
> 时间：2012-07-17T10:52:03.530
> 
> 标签：vb.net, solidworksapi

Very similar to [Solidworks API and Winforms C# swApp (Standalone)](https://stackoverflow.com/questions/7420697/solidworks-api-and-winforms-c-sharp-swapp-standalone) however I cant seem to get the Solution on my application working. I have made a Macro that creates a new drawing which runs, however then you get a winform that has two buttons, one button does another macro while the other does a different one. I can't seem to get the buttons working.

```
Private Sub Button2_Click(ByVal sender As System.Object, ByVal e As System.EventArgs) Handles Button2.Click

    Dim swDoc As ModelDoc2 = Nothing
    Dim swPart As PartDoc = Nothing
    Dim swDrawing As DrawingDoc = Nothing
    Dim swAssembly As AssemblyDoc = Nothing
    Dim boolstatus As Boolean = False
    Dim longstatus As Integer = 0
    Dim longwarnings As Integer = 0
    swDoc = CType(swApp.ActiveDoc, ModelDoc2)
    swDoc.ClearSelection2(True)
    Dim skSegment As SketchSegment
    skSegment = CType(swDoc.SketchManager.CreateLine(-0.053838, 0.028482, 0, -0.003395, -0.060241, 0), SketchSegment)
    skSegment = CType(swDoc.SketchManager.CreateLine(-0.003395, -0.060241, 0, 0.012312, 0.028482, 0), SketchSegment)
    skSegment = CType(swDoc.SketchManager.CreateLine(0.012312, 0.028482, 0, 0.09885, -0.060241, 0), SketchSegment)
    swDoc.ClearSelection2(True)

End Sub
Public swApp As SldWorks 
```

I keep getting a null reference exception on the line swDoc= CType(swApp etc

Thanks in advance

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-17T13:27:56.403

```
 Dim swApp As SldWorks
    swApp = Nothing
    Try
        swApp = CType(System.Runtime.InteropServices.Marshal.GetActiveObject("SldWorks.Application"), SldWorks)
    Catch ex As Exception
        MsgBox(ex.Message)
        Exit Sub
    End Try 
```

# authentication - 在 ios 中使用 P12 证书对 WSDL Web 服务进行身份验证

> ID：11520988
> 
> 赞同：5
> 
> 时间：2012-07-17T10:52:15.760
> 
> 标签：authentication, wsdl

## 标题##我正在研究 WSDL Web 服务。客户端已提供证书 p12 用于对这些 Web 服务进行身份验证。

我已经为我在捆绑包中添加的单个证书实现了以下代码。

```
 (void)connection:(NSURLConnection *)connection
willSendRequestForAuthenticationChallenge:
(NSURLAuthenticationChallenge *)challenge

{
    if ([challenge previousFailureCount] == 0)
    {
        identity = [self getClientCertificate];
        CFArrayRef certs = [self getCertificate];
        NSArray *myArray = (__bridge NSArray *)certs;
        NSURLCredential *newCredential = [NSURLCredential credentialWithIdentity:identity
        certificates:myArray persistence:NSURLCredentialPersistenceNone];
        [challenge.sender useCredential:newCredential forAuthenticationChallenge:challenge];
    }
    else {
        [[challenge sender] cancelAuthenticationChallenge:challenge];
    }
}

(CFArrayRef)getCertificate
{
    SecCertificateRef certificate = nil;
    SecIdentityCopyCertificate(identity, &certificate);
    SecCertificateRef certs[1] = {certificate};
    CFArrayRef array = CFArrayCreate(NULL, (const void **) certs, 1, NULL);
    SecPolicyRef myPolicy = SecPolicyCreateBasicX509();
    SecTrustRef myTrust;

    OSStatus status = SecTrustCreateWithCertificates(array, myPolicy, &myTrust);
    if (status == noErr){
        NSLog(@"No Err creating certificate");
    }
    else{
        NSLog(@"Possible Err Creating certificate");
    }
    return array;
}

(SecIdentityRef)getClientCertificate
{
    SecIdentityRef identityApp = nil;
    NSString *thePath = [[NSBundle mainBundle] pathForResource:@"test" ofType:@"p12"];
    NSData *PKCS12Data = [[NSData alloc] initWithContentsOfFile:thePath];
    CFDataRef inPKCS12Data = (__bridge CFDataRef)PKCS12Data;
    CFStringRef password = CFSTR("Password1");
    const void *keys[] = {kSecImportExportPassphrase}; //kSecImportExportPassphrase };
    const void *values[] = {password};
    CFDictionaryRef options = CFDictionaryCreate(NULL, keys, values, 1, NULL, NULL);
    CFArrayRef items = CFArrayCreate(NULL, 0, 0, NULL);
    OSStatus securityError = SecPKCS12Import(inPKCS12Data, options, &items);
    CFRelease(options);
    CFRelease(password);
    if (securityError == errSecSuccess)
    {
        NSLog(@"Success opening p12 certificate. Items: %ld", CFArrayGetCount(items));
        CFDictionaryRef identityDict = CFArrayGetValueAtIndex(items, 0);
        identityApp = (SecIdentityRef)CFDictionaryGetValue(identityDict,
                kSecImportItemIdentity);
    }
    else{
        NSLog(@"Error opening Certificate.");
    }
    return identityApp;
} 
```

它适用于单个证书。但是现在客户有新的要求，证书不能是单一的。每个用户都会有所不同。用户将通过电子邮件收到证书 p12，用户可以从中下载。

**问题**：将安装证书的 iPhone 的配置文件位于不同的沙箱中，而应用程序位于另一个沙箱中。

如何在不知道凭据（用户名和密码）的情况下访问此类证书而不将其捆绑在一起。

提前致谢。

# python - 如何每 30 秒调用一次函数？

> ID：11520989
> 
> 赞同：0
> 
> 时间：2012-07-17T10:52:16.200
> 
> 标签：python, multithreading

> **可能重复：**
> [在 Python 中每 x 秒重复执行一个函数的最佳方法是什么？](https://stackoverflow.com/questions/474528/what-is-the-best-way-to-repeatedly-execute-a-function-every-x-seconds-in-python)

我想使用 SMNT 协议获取系统信息，并且我想每 30 秒刷新一次此数据。我的想法是运行一个线程并在获取数据后调用睡眠函数。有没有其他办法。例如，在后台每 30 秒运行给定函数的内置函数？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-17T11:26:05.543

查看[事件调度程序](http://docs.python.org/library/sched.html)。您可以安排一个函数每 30 秒调用一次，并且一旦调用，它可以将自己重新添加到提示中，以便在另外 30 秒内调用。

另外，[这篇文章](https://stackoverflow.com/questions/2398661/schedule-a-repeating-event-in-python-3)可能对你有用。

# c# - 用于分组选择的 Linq 等效项

> ID：11520991
> 
> 赞同：2
> 
> 时间：2012-07-17T10:52:30.643
> 
> 标签：c#, mysql, linq, entity-framework

从这样的传统 SQL 语句：

```
SELECT Id, Owner, MIN(CallTime) 
FROM traffic 
WHERE CallType = "IN" 
GROUP BY Owner; 
```

日期时间字段在哪里`CallTime`，我想要的是属于每个`Owner`.

如何使用 Linq 实现这一目标？

这是我的尝试（我正在使用实体框架并且`context`是实体实例）：

```
var query = context.traffic.Where(t => t.CallType == "IN");
var results = query
    .GroupBy(t => t.Owner)
    .Select(g => new { CallTime = g.Min(h => h.CallTime) }); 
```

但我还需要访问`Id`和`Owner`字段，而现在我只能访问`CallTime`.

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-17T11:32:37.943

您无法在给定代码中访问 Id，因为您按所有者分组，并且组的密钥将是所有者而不是“流量”对象。

如果您按流量对象分组，您需要某种方式告诉 groupBy 如何正确比较它们（即按所有者分组）这可以通过 IEqualityComparer 完成

例如

```
private class Traffic {
    public int Id { get; set; }
    public string Owner { get; set; }
    public DateTime CallTime { get; set; }
}

private class TrafficEquaityComparer : IEqualityComparer<Traffic> {
    public bool Equals(Traffic x, Traffic y) {
            return x.Owner == y.Owner;
    }

    public int GetHashCode(Traffic obj) {
        return obj.Owner.GetHashCode();
    }
}

private static TrafficEquaityComparer TrafficEqCmp = new TrafficEquaityComparer();

private Traffic[] src = new Traffic[]{
   new Traffic{Id = 1, Owner = "A", CallTime = new DateTime(2012,1,1)},  // oldest
   new Traffic{Id = 2, Owner = "A", CallTime = new DateTime(2012,2,1)},
   new Traffic{Id = 3, Owner = "A", CallTime = new DateTime(2012,3,1)},
   new Traffic{Id = 4, Owner = "B", CallTime = new DateTime(2011,3,1)},
   new Traffic{Id = 5, Owner = "B", CallTime = new DateTime(2011,1,1)},   //oldest
   new Traffic{Id = 6, Owner = "B", CallTime = new DateTime(2011,2,1)},
};

[TestMethod]
public void GetMinCalls() {
     var results = src.GroupBy(ts => ts, TrafficEqCmp)
                        .Select(grp => {
                            var oldest = grp.OrderBy(g => g.CallTime).First();
                            return new { Id = oldest.Id, 
                                         Owner = grp.Key.Owner, 
                                         CallTime = oldest.CallTime };

                        });    } 
```

这给了

```
ID : Owner : MinCallTime

1 :    A   :  (01/01/2012 00:00:00)
5 :    B   :  (01/01/2011 00:00:00) 
```

作为结果。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-17T10:58:17.887

您的 SQL 查询对我来说似乎无效：您正在使用`Id`但未按它分组。我假设您想按`Id`and分组`Owner`？

```
var results = query
     .GroupBy(t => new {Id = t.Id, Owner = t.Owner})
     .Select(g => new { Id = g.Key.Id, Owner = g.Key.Owner, CallTime = g.Min(h => h.CallTime) })
     .ToList(); 
```

如果您想获得最旧的（最小的）`ID`而不是按它分组：

```
var results = query
     .GroupBy(t => t.Owner)
     .Select(g => new { Id = g.Min(x => x.Id), Owner = g.Key, CallTime = g.Min(h => h.CallTime) })
     .ToList(); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-17T10:58:24.303

//`custQuery`是一个`IEnumerable<IGrouping<string, Customer>>`

```
var custQuery =  
    from cust in customers  
    group cust by cust.City into custGroup  
    where custGroup.Count() > 2  
    orderby custGroup.Key  
    select custGroup; 
```

在该示例中，您选择组

# c# - 城堡可以解决交叉依赖的属性吗？

> ID：11520993
> 
> 赞同：1
> 
> 时间：2012-07-17T10:52:33.347
> 
> 标签：c#, architecture, dependency-injection, castle-windsor

我的情况如下

```
public class FooService : IFooService
{
    public IBarService BarService { get; set; }
}

public class BarService : IBarService
{
    public IFooService FooService { get; set; }
} 
```

IFooService 和 IBarService 都继承自 IApplicationService 组件注册器看起来像这样

```
container.Register(
    AllTypes.FromAssemblyContaining<IApplicationService>()
        .BasedOn<IApplicationService>()
        .WithService.FromInterface()
        .LifestyleSingleton()); 
```

问题是属性为空。如果我添加任何其他不使用 foo 或 bar 服务的服务，则该服务将被正确解析。

看起来温莎城堡无法处理交叉引用。或者有什么我应该添加到组件注册器中的吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-27T15:54:22.607

我尝试了构造函数注入，似乎它正在工作。

# symfony-forms - 使用 Symfony2.1 表单时，我应该在什么时候将基于表单值的自定义数据（对象）绑定到我的表单对象？

> ID：11520994
> 
> 赞同：3
> 
> 时间：2012-07-17T10:52:42.467
> 
> 标签：symfony-forms, symfony-2.1

鉴于以下情况，我应该将逻辑绑定到 Review 的位置：

实体：

*   经销商（有很多部门）
*   部门（有一种）
*   部门类型
*   审查（有一个经销商和一个部门）

在我的 ReviewForm 上，我需要用户能够选择 Dealership 和 DepartmentType，然后以某种形式的回调或前/后绑定，从他们那里找出要绑定到评论的部门。

我还需要在验证之前进行此操作，以便我可以验证该部门是经销商的子级。

*注意：当审查可能*只与部门相关时，审查与经销商和部门有关，以简化我正在进行的遍历和其他逻辑。

* * *

到目前为止，我尝试了两种方法，但都遇到了死胡同/混乱。

*   表单上 DepartmentType 上的 DataTransformer，不确定我是否正确理解这一点，我的 transform / reverseTransform 方法在 Review 对象中传递，而不是在字段对象中传递。
*   PRE_BIND，在验证之前发生，但我只有原始数据可以使用，没有对象
*   POST_BIND，在验证后发生:(

对于关系验证的最后一步，我有一个相对简单的验证器来完成这项工作，但我不确定我应该在什么时候将数据绑定到这样的对象。任何指针？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-25T17:36:48.757

由于验证也在 POST_BIND 侦听器中完成，您可以简单地添加您的 POST_BIND 侦听器，其优先级高于验证侦听器（即任何 > 0）。

如果您正在编写侦听器：

```
$builder->addEventListener(FormEvents::POST_BIND, $myListener, 10); 
```

如果你正在写一个订阅者：

```
public static function getSubscribedEvents()
{
    return array(
        FormEvents::POST_BIND => array('postBind', 10),
    );
}

public function postBind(FormEvent $event)
{
    ...
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-26T12:41:36.927

我会选择一个标准（即：非 Doctrine）选择类型，其中包含一个代表每个 DepartmentType 的选择。

然后使用 DataTransformer 将所选选项转换为相关类型，反之亦然。

* * *

您的自定义 FormType 最终应该看起来像这样：

```
class Department extends AbstractType
{
    private $em;

    public function __construct(EntityManager $em) {
        $this->em = $em;
    }

    public function buildForm(FormBuilderInterface $builder, array $options)
    {
        $transformer = new DepartmentToTypeTransformer($this->em);
        $builder->addViewTransformer($transformer, true);

        $builder->getParent()->addEventListener(FormEvents::PRE_BIND, function($event) use ($transformer) {
            $data = (object) $event->getData();
            $transformer->setDealership($data->dealership);
        });
    }

    public function getParent()
    {
        return 'choice';
    }

    public function getName()
    {
        return 'department';
    }

    public function setDefaultOptions(OptionsResolverInterface $resolver)
    {
        $choices = array();

        foreach ($this->em->getRepository('AcmeDemoBundle:DepartmentType')->findAll() as $type) {
            $choices[$type->getId()] = (string) $type;
        }

        $resolver->setDefaults(array(
            'choices' => $choices,
            'expanded' => true
        ));
    }
} 
```

请注意将 Dealership 传递到 DataTransformer 以用于转换。

* * *

和 DataTransformer 是这样的：

```
class DepartmentToTypeTransformer implements DataTransformerInterface
{
    private $em;
    private $dealership;

    public function __construct($em)
    {
        $this->em = $em;
    }

    public function transform($department)
    {
        if (null === $department) {
            return $department;
        }

        return $department->getType()->getId();
    }

    public function reverseTransform($type)
    {
        if (null === $type) {
            return $type;
        }

        return $this->em->getRepository('AcmeDemoBundle:Department')->findOneBy(array(
            'dealership' => $this->getDealership(),
            'type' => $type
        ));
    }

    public function getDealership() {
        return $this->dealership;
    }

    public function setDealership($dealership) {
        $this->dealership = $dealership;
        return $this;
    }
} 
```

* * *

您对传递给转换器的内容的困惑很可能是由于您要绑定的转换器附加到预先存在的行为，请尝试将`true`其作为第二个参数添加到 addViewTransformer：

```
 $transformer = new DepartmentToTypeTransformer($this->em);
    $builder->addViewTransformer($transformer, true); 
```

从[文档](http://api.symfony.com/master/Symfony/Component/Form/FormBuilder.html)：

```
FormBuilder::addViewTransformer(
    DataTransformerInterface $viewTransformer,
    Boolean $forcePrepend = false
)

Appends / prepends a transformer to the view transformer chain. 
```

# google-maps-api-3 - 使用steal.js异步加载谷歌地图api

> ID：11520998
> 
> 赞同：1
> 
> 时间：2012-07-17T10:52:59.893
> 
> 标签：google-maps-api-3, javascriptmvc, stealjs

我正在尝试使用steal.js（来自javascriptmvc扩展）执行以下代码：

```
steal("http://maps.google.com/maps/api/js?sensor=true"); 
```

这适用于所有其他脚本。但是，如果是 google map api url，它会说“'sensor' parameter is not set”类型的错误消息。请问如何摆脱这个？

如果您可以展示一些其他方式来异步加载此脚本，那也可以。就像，我尝试使用[google js api loader](https://developers.google.com/loader/)，但是支持将 google map api 加载到版本 2，不支持 3。提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-18T01:04:46.787

您通常不会窃取外部脚本。窃取将无法将它们构建到您的生产文件中。

~~无论如何，当前的 Google Maps API 不打算异步加载。如果您检查源代码，您会看到它 uses ，在页面加载后如果没有[3rd 方库](https://github.com/iamnoah/writeCapture/tree/writeCapture2)`document.write`的帮助将无法正常工作。~~

根据下面的评论，我错了。您可以使用回调参数异步加载 Google 地图：

```
window.myCallback = function() {
  new google.maps.Map(...);
};

$.getScript('//maps.google.com/maps/api/js?sensor=false&callback=myCallback'); 
```