# StackOverflow 问答 11308000-11308999

# javascript - 在 HTML 中是否可以在没有 Ajax 和/或 Javascript 的情况下创建异步请求？

> ID：11308009
> 
> 赞同：1
> 
> 时间：2012-07-03T09:23:37.993
> 
> 标签：javascript, html, ajax

我想知道使用 HTML 是否可以在没有 Ajax 和/或 JavaScript 的情况下创建异步请求？我不知道是否存在其他方法来避免整页重新加载？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-03T09:26:14.307

要以任何方式与服务器通信，不，恐怕你需要 Javascript

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-03T09:26:53.240

iframe 允许您这样做。

```
<a href="foo" target="iframe_name">linky</a> 
```

见[规格](http://www.w3.org/TR/html4/present/frames.html#h-16.5)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-03T09:28:04.947

为避免整个页面重新加载，您可以使用框架或 iframe 以及针对这些 (i) 框架的链接。

```
<a href=somehref target=myiframe>my link</a>
<iframe name=myiframe></iframe> 
```

但是，如果您根本不使用 javascript，您将很快受到限制。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-03T09:29:42.250

`<frame>`您可以使用( [MDN docu](https://developer.mozilla.org/en/HTML/Element/frame) ) 和`<iframe>`( [MDN docu](https://developer.mozilla.org/de/HTML/Element/iframe) )以某种方式模拟 AJAX 行为。

You can then specify the `target` attribute of `<a>` links to result in a request within the (i)frame with the respective ID ([MDN docu](https://developer.mozilla.org/en/HTML/Element/a)).

This technique, however, is more or less abandoned in favor of using the usual JavaScript AJAX requests.

# django - django on_delete 不工作

> ID：11308018
> 
> 赞同：2
> 
> 时间：2012-07-03T09:24:11.080
> 
> 标签：django, django-models

我正在使用[django-threadedcomments](https://github.com/HonzaKral/django-threadedcomments/)应用程序，并且由于在下面给出的模型中 parent 是线程评论的外键，所以当我删除评论时它也会被删除。但是我不希望这种情况发生。所以我补充说`on_delete = models.SET_NULL`，但这似乎不起作用。当我删除评论时，父评论仍会被删除。

这是线程注释模型的一部分，其余的都只是方法，所以我跳过了它们

```
class ThreadedComment(Comment):
    title = models.TextField(_('Title'), blank=True)
    parent = models.ForeignKey('self', null=True, blank=True, default=None,
        related_name='children', verbose_name=_('Parent'), on_delete=models.SET_NULL)
    last_child = models.ForeignKey('self', null=True, blank=True,
        verbose_name=_('Last child'))
    tree_path = models.TextField(_('Tree path'), editable=False,
        db_index=True)

    objects = CommentManager() 
```

有什么我做错了吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-03T15:00:24.430

Threaded comments are a textbook example of DELETE CASCADE. You have a hierarchical structure, so if a parent of a comment is deleted, all the children need to be deleted as well. Otherwise, they're orphaned and your hierarchy is broken. In particular with comments, you can't just assign a child comment to a new parent, because they're often contextual and wouldn't make sense out of context from the comment the reply was posted for.

If you take a look at comment sections on websites across the Internet. When comments are threaded *and* commenters are allowed to delete their comments (in fact most websites *don't* let you delete your comments), they never *actually* delete the comment. Instead the content is simply changed to something like "*This comment has been deleted*". That way, the content is technically gone, satisfying either the user or the moderator, *but* it still hangs around for the sake of the hierarchy.

# mvvm - MVVM - PropertyChangedEventHandler

> ID：11308019
> 
> 赞同：1
> 
> 时间：2012-07-03T09:24:25.383
> 
> 标签：mvvm, inotifypropertychanged

我从 MVVM 开始。

我的应用程序使用这种“模式（PM 模式——我们不要在这里讨论这个：））”并且工作正常；该项目非常简单，据说对于初学者来说很容易掌握！如果只是... :)

有一件事让我感到困惑，这可能与 MVVM 本身无关；PropertyChangedEventHandler。

我正在逐行浏览我的代码，并且可以看到调用（下面的代码），但我不确定我为什么要调用这个处理程序或它在做什么！

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;
using System.ComponentModel;
using System.Windows.Input;

namespace drMVVM.Model
{
    public class TextContent : INotifyPropertyChanged
    {
        private string text;
        public string Text
        {
            get { return text; }
            set
            {
                if (text != value)
                {
                    text = value;
                    OnPropertyChanged("Text");
                }
            }
        }

        private void OnPropertyChanged(string propertyName)
        {
            if (PropertyChanged != null)
                PropertyChanged(this, new PropertyChangedEventArgs(propertyName));
        }

        #region INotifyPropertyChanged Members

        public event PropertyChangedEventHandler PropertyChanged;

        #endregion
    }
} 
```

我的视图模型也有类似的代码布局，但不是设置属性，而是创建对象的实例并应用任何其他逻辑。

PropertyChangedEventArgs 是否仅用于更新已更改的模型的属性？如果是这样，为什么它是在模型类中实现的，而不仅仅是 ModelView？是因为它可以本能地知道是只听变化还是提供细节通知发生变化？如果它是一个通知（我假设因此是接口的名称），那么我在我的 Model 类中通知什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-03T09:31:04.487

`INotifyPropertyChanged`每当您想通知某人有关您的属性的更改时，都需要。因此，如果您的 ViewModel 需要通知视图有关更改以便视图更新其数据绑定，那么您的 ViewModel 需要实现它并在每次属性更改时引发事件。

类似地，如果您的模型具有可以更改的属性并且您希望收到通知，那么也可以在您的模型中实现它。

除非有自动化的含义，否则它并不是真正*必要的；*一个是 WPF 中的数据绑定，它需要一个提示，所以它知道它必须更新。

# testing - 无法在 testNG 中运行 selenium2 套件

> ID：11308021
> 
> 赞同：0
> 
> 时间：2012-07-03T09:24:32.797
> 
> 标签：testing, selenium-webdriver, testng

我无法在 Eclipse 中使用 testNG for selenium2 运行测试套件。TestNG 似乎正在运行，但运行的总测试数始终为 0。我可以使用 selenium2 直接从 eclipse 运行此测试（运行为-> java 应用程序）。我可以使用@Test、@BeforeMethod、@AfterMethod 注释为一个小程序测试 testNG，请帮助我 xml 文件内容

```
<!DOCTYPE suite SYSTEM "http://testng.org/testng-1.0.dtd" >

<suite name="WikiPedia test" verbose="3" parallel="methods" >

<test name="wiki">
    <classes>
    <class name="com.programs.WebDriverTest" />
</classes>
</test>
</suite> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-03T19:06:48.220

您需要运行为...TestNG 测试，而不是作为 Java 应用程序。

# ruby-on-rails - Rails：通过ajax将现有子模型添加为父模型的新关联

> ID：11308023
> 
> 赞同：1
> 
> 时间：2012-07-03T09:24:40.643
> 
> 标签：ruby-on-rails, ajax, activerecord, parent-child

我尝试通过 ajax 将现有的子模型添加到父模型，只提供新的 id。

我的模型：

```
class User < ActiveRecord::Base
  has_many :books
  attr_accessible :books
end

class Book < ActiveRecord::Base
  belongs_to: :user
end 
```

在我的 html 表单中，用户正在查看用户，它可以选择要添加的现有图书。这将导致一个 Ajax 请求。我只想发送新书，而不是所有已分配的书。例如，用户模型已经有 Books 1 和 2，现在用户选择 Book 3 也被分配。

我找不到正确的参数结构。如果我使用以下内容，它会完全覆盖当前的关联。

```
// Ajax parameters
user[books] = [3] 
```

应该如何构建参数以使其仅添加新书？作为后续，我如何构建参数以仅删除单个关联？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-03T11:34:19.067

您只需在请求中发送一个“book_id”。
然后在控制器中：

```
# assuming params hash is { :book_id => 3 }

@book = Book.find params[:book_id]
@user.books << @book
...

# Removing
@user.books.delete(@book)

# In `update` action

params[:user][:book_ids] = (@user.book_ids + params[:user][:book_ids]).flatten
@user.update_attributes(params[:user]) 
```

# php - drupal 7自定义块改变了？

> ID：11308025
> 
> 赞同：0
> 
> 时间：2012-07-03T09:24:42.813
> 
> 标签：php, drupal-7

hook_block 是否已更改？以下是我在互联网上找到的 drupal 6 示例（http://eureka.ykyuen.info/2010/11/10/drupal-create-a-block/），admin/structure/block 中没有显示块，

```
 * Implementation of hook_block().

     */

    function custom_block($op = 'list', $delta = 0, $edit = array()) {

            switch ($op) {

                    //Define the block

                    case 'list':

                            $blocks[0]['info'] = t('Block Info');

                            $blocks[0]['cache'] = BLOCK_NO_CACHE;

                            return $blocks;

                    case 'configure':

                            //TODO: block configurable parameters

                            $form = array();

                            return $form;

                    case 'save':

                            //TODO: save new configuration

                            return;

                    //Display the block

                    case 'view':

                            $block['subject'] = t('Block Subject');

                            $block['content'] = 'Block Content';

                            return $block;

            }

    } 
```

看来，drupal 7 中的 hook_block 已更改，如何重写代码？任何人都可以向我提供提示/方向吗？非常感谢你。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-03T09:32:22.007

您的代码适用于 Drupal 6。在 Drupal 7 中更改了 hook_block 的实现。在 Drupal 7 中，应该使用不同的钩子来满足您的目的。

*   [hook_block_configure](http://api.drupal.org/api/drupal/modules!block!block.api.php/function/hook_block_configure/7)
*   [hook_block_info](http://api.drupal.org/api/drupal/modules!block!block.api.php/function/hook_block_info/7)
*   [hook_block_save](http://api.drupal.org/api/drupal/modules!block!block.api.php/function/hook_block_save/7)
*   [hook_block_view](http://api.drupal.org/api/drupal/modules!block!block.api.php/function/hook_block_view/7)

[在此处](http://api.drupal.org/api/search/7/hook_block)查看更多信息`hook_block`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-03T09:46:37.567

在 Drupal 7 中，您的 hook_block() 实现将更改为：

```
/**
 * Implements hook_block_info().
 */
function custom_block_info() {
  $blocks = array();

  $blocks['list'] = array(
    'info' => t('Block Info'),
    'cache' => DRUPAL_NO_CACHE,
  );

  return $blocks;
}

/**
 * Implements hook_block_view().
 */
function custom_block_view($delta = '') {
  $block = array();

  switch ($delta) {
    case 'list':
      if (user_access('access content')) {
        $block['subject'] = t('Block Subject');
        $block['content'] = 'Block Content';
      }
      break;
  }

  return $block;
} 
```

# django - 如何使用表单集在 django 模板中获取水平数据输入字段？

> ID：11308026
> 
> 赞同：1
> 
> 时间：2012-07-03T09:24:43.973
> 
> 标签：django, templates, formset

我有以下模板，它生成一个带有垂直数据输入字段的表单。请指导我实现“水平”数据输入字段。

```
<html>
<head>
<title>BUDGET</title>
</head>
<body>
<p>BUDGET MANAGEMENTS</p>
<p>Your Account Number is : {{ account_number }}.</p> <p>You Chose {{ period }} {{month}} as period<p>   
{% if form.errors %}
<p style="color: red;">
Please correct the error{{ form.errors|pluralize }} below.
</p>
{% endif %} 
<form action="." method="post">{% csrf_token %}
{{ formset.management_form }}
<table>
{% for form in formset.forms %}
{{ form }}
{% endfor %}
</table>    
<input type="submit" value="Submit">
</form>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-03T09:30:30.043

请参阅使用Django 文档[*中的模板显示表单。*](https://docs.djangoproject.com/en/dev/topics/forms/?from=olddocs#displaying-a-form-using-a-template)它包含如何控制表单呈现的确切指南。就像是：

```
<table>
{% for form in formset.forms %}
    <tr>
    {% for field in form %}
       <td>
         {{ field.errors }}
         {{ field.label_tag }}: {{ field }}
       </td>
    {% endfor %}
    </tr>
{% endfor %}
</table> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-03T10:28:57.080

你可以通过 CSS 而不仅仅是表单渲染来做到这一点。您需要创建内联表单元素。也许你可以看看[Twitter Bootstrap](http://twitter.github.com/bootstrap/base-css.html#forms) CSS 库或类似的库。

# c# - 错误 HTTP 401.2 - 未经授权，Windows 已授权

> ID：11308030
> 
> 赞同：1
> 
> 时间：2012-07-03T09:24:56.413
> 
> 标签：c#, asp.net-mvc-3, iis, iis-7, windows-authentication

我要做：

> 单击开始，指向管理工具，然后单击 Internet 信息服务 (IIS) 管理器。在“连接”窗格中，展开服务器名称，展开站点，然后选择要为其启用 Windows 身份验证扩展保护的站点、应用程序或 Web 服务。滚动到主页窗格中的安全部分，然后双击身份验证。在身份验证窗格中，选择 Windows 身份验证。在“操作”窗格中单击启用。单击操作窗格中的高级设置。

在 web.config 中设置后`<authentication mode="Windows" />`

如果我从 VS2010 启动应用程序 - 一切正常。如果否则我从 IIS 启动应用程序我有问题。请求的用户数据我输入 Computer\NameUser。然后是一个错误：

> 错误 HTTP 401.2 - 未经授权 由于身份验证标头的不可接受性，您无权查看此页面。

**更新：**

![在此处输入图像描述](../Images/f978580d39214eff27f50dc40d179011.png)

**update2：** 文件：C:\Windows\System32\inetsrv\config\applicationhost.config

```
<location path="windowsAuthTest">
    <system.webServer>
        <security>
            <authentication>
                <anonymousAuthentication enabled="false" userName="User" password="[enc:AesProvider:BZ7e2mkTjJL7Wo8xMm2PQKZ2biP1nKB2SjAfw9WmJoBhkMbl4DYqEJU0bzIj3CxF:enc]" />
                <windowsAuthentication enabled="true" useKernelMode="false">
                    <extendedProtection tokenChecking="None" />
                    <providers>
                        <clear />
                        <add value="NTLM" />
                        <add value="Negotiate" />
                    </providers>
                </windowsAuthentication>
            </authentication>
        </security>
    </system.webServer>
</location> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-03T09:28:53.437

之后，您访问网站的安全性，您必须为用户窗口添加权限。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-03T09:35:26.707

看看我[之前的回答](https://stackoverflow.com/a/5035520/588868)。

基本上，这意味着身份验证票与服务器的期望不匹配。

您应该强制服务器使用 NTML 或 Kerberos（取决于您的身份验证策略）。

**[编辑]**因为 appcmd 可能有点晦涩，这里是手动停止以强制 NTLM 身份验证。

1.  导航`C:\Windows\System32\inetsrv\config`
2.  备份、备份、备份和重新备份 applicationhost.config
3.  确保再次备份
4.  使用您喜欢的 xml 编辑器打开文件 applicationhost.config
5.  搜索节点`<location path="Your web site name/yourapplication">`
6.  设置正确的身份验证提供程序：

重要的部分是有`<clear />`节点。这将破坏从全局配置的继承。

这可以应用于整个 IIS 服务器，或特定的网站，或（如这里）特定的 Web 应用程序）。

我不确定，但我想知道这是否可以直接在应用程序的 web.config 中设置，而不是在 IIS 配置文件中设置。这个有待考证。

# scala - 新 Scala 项目的 NoSQL（例如 MongoDB）或 RDMS（例如 PostgreSQL）？

> ID：11308036
> 
> 赞同：7
> 
> 时间：2012-07-03T09:25:27.990
> 
> 标签：scala, mongodb, architecture, scalaquery, casbah

我正在 Scala 中开发一个全新的项目。它只是一堆 CRUD 操作的应用程序，但是，由于一些古怪的要求，Play2 或 Lift 不符合要求，所以我将从头开始开发应用程序。这意味着 Anorm 或 ScalaQuery 成为数据库集成的不那么明显的选择，这给我留下了一个问题：是时候尝试新的东西了吗？

我过去的技术堆栈主要包括 Java 和 PostgreSQL，并且我在 ORM 和普通 SQL 方面都有经验。像 MongoDB 这样的 NoSQL 数据库管理系统是典型 RDBMS 的良好替代品，还是特殊情况下的应用程序数据存储？此外，数据库的选择如何影响更大的 Scala 系统设计（如果有的话）？例如，您使用类似 JSON 的接口与数据库对话，以及 Web 和 REST 服务之间的 JSON，如果中间的所有内容都变成 Scala 对象，这并不意味着什么，或者是吗？

我基本上是在询问某人从关系数据库到对象/文档类型数据库的经验，特别是使用 Scala。我知道在即将发布的 SLICK 版本中承诺了良好的 RDBMS 集成。因此，如果像 TypeSafe 这样的公司决定将 RDBMS 集成作为 TypeSafe 堆栈的一部分，那么我是否会通过使用 Casbah 集成到 MongoDB 来逆流而上？

如果这个问题看起来有点含糊，请道歉。我确实希望有正确见解或经验的人能够提供帮助。

*更新：*

很抱歉没有添加到 SLICK 的链接（它是相当新的）。开始：

*   [快速概览](http://days2012.scala-lang.org/node/390)
*   [项目主页](https://github.com/slick/slick)

更新 2：

我个人对一项技术的第一次胜利通常是*开发人员的生产力*——这意味着轻量级和简单：快速学习、易于维护、没有魔法

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-03T10:01:06.383

我目前处于类似情况，由于我在 Web 开发和 SQL 数据库方面有一些经验，因此我借此机会与 MongoDB、Cashbah（和[Scalatra](http://www.scalatra.org/)）合作。我的经验仍然非常有限，我正在使用的项目和数据量非常小，但这里有一些我所做的观察。

*   对于我拥有的几组数据，性能似乎并不能激发 SQL 或 NoSQL 的动力。然而，存在大量数据时的性能通常被列为使用 NoSQL 的一个原因，例如，[维基百科](http://en.wikipedia.org/wiki/NoSQL)

*   我的文档（数据库中的条目）来自基准测试套件，主要具有静态结构，我很乐观可以将它们存储在固定模式的 SQL 数据库中。然而，一些子结构不是静态的，例如，添加了新的测试用例，跟踪了新的统计数据，删除了其他的。这是我尝试无模式 NoSQL 数据库的主要动机。另外，因为我觉得 MongoDB 的文档方法使得哪些数据属于一起（即，属于一个文档）更加明显，这与关系数据库中的条目相比，其中数据将分布在各种表和行中，并且需要通过连接重建完整的“文档”。

*   [Lift-Json](https://github.com/lift/lift/tree/master/framework/lift-base/lift-json/)或[Rogue](https://github.com/foursquare/rogue)等工具允许您在类型安全的情况下使用常规 Scala 对象，尽管数据经常（反）序列化为（来自）JSON。但是，如果您的数据结构主要是静态的，这自然最有效，否则，您只能使用字符串来访问您的数据（例如，使用 Cashbah 扩展查询的结果）。

如果您主要关心服务器端和客户端数据的一致表示，[Opa](http://www.opalang.org/)或[Haxe](http://haxe.org/)等语言可能会感兴趣，因为它们编译为可以在双方执行的代码。有关“多目标”或“无层”语言，请参阅[此页面。](https://github.com/jashkenas/coffee-script/wiki/List-of-languages-that-compile-to-JS)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-03T10:28:21.677

评论太久了。只是想把我对 Scala 的短暂体验联系起来（现在大约 6 个月，大约从 Play2 出来的时候开始——它很快就成为了我的首选语言）。

在我最近的几个项目中，我很喜欢在 MongoDB 中使用 Salat/Casbah；大多数都在 Play2 中，但最新的是没有 webapp 框架。绝对没有像逆流而上的感觉。

我会说有些特殊用例我不会使用 mongo，但它可以很好地用作通用对象数据存储，特别是如果您希望通过 id 或索引查询并且不需要事务（并且需要最小的临时聚合类型的东西）。

预计需要一组单独的专用于 mongodb 的服务器（或使用专用于 mongodb 的服务），但我想这对于大多数严肃的数据库应用程序来说是正常的。

我还使用了 Play2/Anorm，它用于一些临时查询仪表板样式的报告页面非常令人愉快。我开始尝试走 Squeryl 路线，但 Anorm 似乎更容易用于一次性聚合查询。没看过SLICK，但听起来很有趣。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-04T05:09:09.323

如果不知道您希望应用程序解决什么问题，真的很难说。

我个人发现通过 REST/JSON 使用 NoSQL DB 提高了我的工作效率。尽管请记住，大多数 NoSQL DB 都提供 REST 接口，这排除了对大量中间件、Scala 或其他方式的需求，除非您打算编写带有 UI 的 web 应用程序。

如果这是一个学习练习，我建议你尝试多种方法，因为每个 NoSQL DB 都可以为你的工具包提供不同的东西，并且我个人发现 CouchDB、Riak、Neo4j 和 MongoDb 都有不同的优点和缺点，并且适用于不同的目的。

希望这有帮助，祝你好运。

# apache-pig - PIG：从分组袋中取出所有元组

> ID：11308050
> 
> 赞同：5
> 
> 时间：2012-07-03T09:26:15.837
> 
> 标签：apache-pig

我正在使用 PIG 从元组生成组，如下所示：

```
a1, b1
a1, b2
a1, b3
...

->

a1, [b1, b2, b3]
... 
```

这既简单又有效。但我的问题是得到以下内容：从获得的组中，我想在组的包中生成一组所有元组：

```
a1, [b1, b2, b3]

->

b1,b2
b1,b3
b2,b3 
```

如果我可以嵌套“foreach”并首先遍历每个组，然后遍历其包，这将很容易。

我想我误解了这个概念，我会感谢你的解释。

谢谢。

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-07-03T12:28:48.817

看起来你需要在包和它本身之间有一个笛卡尔积。为此，您需要使用 FLATTEN(bag) 两次。

**代码：**

```
inpt = load '.../group.txt' using PigStorage(',') as (id, val);
grp = group inpt by (id);
id_grp = foreach grp generate group as id, inpt.val as value_bag;
result = foreach id_grp generate id, FLATTEN(value_bag) as v1, FLATTEN(value_bag) as v2; 
dump result; 
```

请注意，大袋子会产生很多行。为避免这种情况，您可以在 FLATTEN 之前使用 TOP(...)：

```
inpt = load '....group.txt' using PigStorage(',')  as (id, val);
grp = group inpt by (id);
id_grp = foreach grp generate group as id, inpt.val as values;
result = foreach id_grp {
    limited_bag = TOP(50, 0, values); -- all sorts of filtering could be done here
    generate id, FLATTEN(limited_bag) as v1, FLATTEN(limited_bag) as v2; 
};
dump result; 
```

对于您的特定输出，您可以在 FLATTEN 之前使用一些过滤：

```
inpt = load '..../group.txt' as (id, val);
grp = group inpt by (id);
id_grp = foreach grp generate group as id, inpt.val as values;
result = foreach id_grp {
    l = filter values by val == 'b1' or val == 'b2';
    generate id, FLATTEN(l) as v1, FLATTEN(values) as v2; 
};
result = filter result by v1 != v2; 
```

我希望它有所帮助。

干杯

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-01-24T09:02:47.827

同样相关的是[DataFu](http://datafu.org) UDF 库中的这个[UnorderedPairs函数。](http://datafu.incubator.apache.org/docs/datafu/1.2.0/datafu/pig/bags/UnorderedPairs.html)它会在一个包中生成成对的所有物品（在你的情况下是你的分组包）

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-06-25T14:29:36.783

可以使用`GROUP ALL`pig 语句生成

```
A  = -- Some bag
B  = -- Another bag

groupedB = group B ALL;
result   = foreach A GENERATE 
    TOTUPLE(*), groupedB.$1;

-- Will generate
((a1), {(b1, b2, b3)})
((a2), {(b1, b2, b3)})
((a3), {(b1, b2, b3)})
... 
```

# java - 如何将向量字符串转换为简单字符串

> ID：11308051
> 
> 赞同：1
> 
> 时间：2012-07-03T09:26:17.087
> 
> 标签：java, arrays, string

我需要将字符串向量转换为简单的字符串。我不知道该怎么做。我尝试了各种解决方案，例如

```
for(int i=1; i < easy.length; i++){

easyPuzzle = easy[i].toString();

}

System.out.println(" " + easyPuzzle); 
```

但是这个解决方案只打印第 i 个元素而不是整个字符串向量。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-07-03T09:28:57.410

[在Arrays](http://docs.oracle.com/javase/6/docs/api/java/util/Arrays.html#toString%28java.lang.Object%5B%5D%29)类中使用 toString

```
Arrays.toString(easy); 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-07-03T09:27:57.257

`easyPuzzle`当您真正想要连接时，您不断重新分配一个新值：

```
easyPuzzle += easy[i].toString(); 
```

如果`easy.length`很大，使用 StringBuilder 可能是有意义的，它在连接方面比 String 更有效：

```
StringBuilder builder = new StringBuilder();
for(int i=1; i < easy.length; i++){
    builder.append(easy[i].toString());
}
easyPuzzle = builder.toString(); 
```

`i=1`同样，通过在您排除第一项时开始您的 for 循环。不知道是不是故意的。如果没有，请从`i = 0`.

或者，为了避免自己编写循环的痛苦，您可以使用[@Manoj 的答案](https://stackoverflow.com/a/11308095/829571)，它将您的代码替换为一行。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-03T09:29:31.457

I recommend to you use `StringBuilder` with `append(<data>)` method and then convert it to `String`.

```
StringBuilder data = new StringBuilder();
for(int i = 1; i < easy.length; i++){
    data.append(easy[i].toString());
}
easyPuzzle = data.toString(); 
```

`String` is immutable so work with it is much more consume. When you work with `String`, i recommend to you use `StringBuilder`, is more effective and faster.

**Update:** @Manoj answer is very usefull.

# php - TYPO3 - 在扩展中包含内容元素

> ID：11308054
> 
> 赞同：0
> 
> 时间：2012-07-03T09:26:31.750
> 
> 标签：php, typo3

我正在构建一个新的 kickstarter 应用程序，我必须第一次在 PHP 中而**不是在 Typoscript**中编辑扩展，所以我不确定。

我使用“正常”列作为页面内容。在这我有我的新插件。在另一列中，我有一些我只想在特定条件下呈现的内容。如何使我的插件输出右列的内容？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-03T14:32:57.980

我不知道，如果我理解你的话。您想检查扩展程序中的条件吗？

```
# TypoScript:
# pass the configuration which content should be shown to your extension
plugin.tx_yourextension_pi1.contentToShow < styles.content.getRight

# in your extension:
if (some conditions) {
  $content = $this->cObj->cObjGetSingle($conf['contentToShow'], $conf['contentToShow.'], 'contentToShow');
} 
```

如果这不是您所需要的，请描述您需要扩展的原因。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-05T08:41:34.893

据我所知，在 BE 中没有简单的方法来以编程方式管理列的内容（如果您在谈论内容区域，正如我在您的问题中所理解的那样）。

但是您可以通过 Typoscript 映射您的插件。它在您的专栏的后端中不可见，但前端可以正常工作。

如果您的插件应该呈现一些内容元素，那么已经有很多示例如何通过 PHP 来实现：

*   [TYPO3：如何在我自己的扩展中呈现 tt_content 文本元素？](https://stackoverflow.com/questions/71223/typo3-how-do-i-render-tt-content-text-elements-in-my-own-extensions)

*   [使用 TypoScript 在 PHP 中渲染内容](https://stackoverflow.com/questions/8240625/render-content-in-php-with-typoscript)

# objective-c - ios 5 故事板问题

> ID：11308056
> 
> 赞同：0
> 
> 时间：2012-07-03T09:26:39.517
> 
> 标签：objective-c, storyboard, cs193p

在 iphone 故事板中，我创建了一个视图控制器，然后我向该控制器添加了一个通用视图，然后向通用视图添加了一个图像视图。然后我实现通用视图控制器代码。但是，它在图像视图矩形中不显示任何内容。

如果我没有先添加通用视图，只需将图像视图添加到通用控制器，它将显示我想要的图像。但是通过这种方式，我无法将滚动视图嵌入到该图像视图中，因为 Xcode 中的“嵌入”选项是灰色的。如果我添加通用视图然后图像视图，可以选择“嵌入”让我将滚动视图添加到图像视图中。

我很困惑为什么它有这个问题并且无法弄清楚。谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-04T10:11:40.593

其实由于没有人帮助我，所以我只是自己想通了。

```
- (void)viewDidLoad
{
    [super viewDidLoad];
    self.imageView = [self.imageView initWithImage:self.image];
    self.scrollView.delegate = self;
    self.imageView.image = self.image;
} 
```

问题是这个语句：self.imageView = [self.imageView initWithImage:self.image];，因为它默认禁用图像视图的用户交互。（来自文档）

# c# - 使用 MVC RadUpload 上传和更改文件名后显示图像

> ID：11308062
> 
> 赞同：-2
> 
> 时间：2012-07-03T09:26:52.410
> 
> 标签：c#, asp.net-mvc-3, telerik-mvc, radupload

我使用 RadUpload 控件上传图像，然后显示它们以用于 JCrop-ing 目的。由于这些只是临时文件上传，我将它们放在一个临时文件夹中。为了防止用户上传同名图片的可能性，我在保存时重命名了它们。

我的部分观点：

```
@(Html.Telerik().Upload()
        .Name("attachments")
        .Multiple((bool) false)
        .ClientEvents(events => events
        .OnSuccess(
                @<text>
            function(e) {
                displayTempUpload(e);
            }
        </text>)
        )
        .Async(async => async
                .Save("Add", "Image")
                .AutoUpload((bool)true)
        )
    ) 
```

我的控制器：

```
public ActionResult Add(IEnumerable<HttpPostedFileBase> attachments)
        {
            var fileName = "";
            foreach (var file in attachments)
            {
                fileName = Guid.NewGuid().ToString() + path.GetExtension(file.FileName);
                var physicalPath = Path.Combine(Server.MapPath("~/temp"), fileName);

                file.SaveAs(physicalPath);
            }
            return Content("");
        } 
```

如果我不更改文件名，我可以使用 JQuery 显示上传的图像：

```
function displayTempUpload(e) {
    var info = getFileInfo(e);
    var path = "/temp/" + info;

    $("#img").attr("src", path);
}

function getFileInfo(e) {

    return $.map(e.files, function (file) {
        var info = file.name;
        return info;
    }).join(", ");
} 
```

但是，传递给 onSuccess 函数的文件对象保留原始文件名。现在我已经更改了文件名，是否可以通过某种方式将新值传递给 onSuccess 函数？

我尝试更改控制器操作的返回值，`Add()`但这导致 RadUpload 控件认为在保存过程中发生了错误。我还查看`e`了 onSuccess 函数中的其他属性，但似乎没有任何帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-03T19:54:00.350

哟，伙计，

如果您尝试使用 Content 方法将其作为字符串返回，则响应很可能会被视为错误。但是，如果您返回 JSON，它应该可以正常工作。试试看。

# installation - SQL Server 2012 Enterprise - 没有关于“向现有 SQL Server 实例添加功能”的分析服务

> ID：11308064
> 
> 赞同：1
> 
> 时间：2012-07-03T09:26:53.870
> 
> 标签：installation, upgrade, ssas, missing-features, ssas-2012

我们将 SQL Server 2012 Express 高级版升级到企业版，在选择“向现有 SQL Server 实例添加功能”时发现无法选择 Analysis Services

我们使用这些查询来确认该版本是企业版。

```
--Version Number
select @@version

--Service Pack
select serverproperty('ProductLevel')

--Version Number
select serverproperty('ProductVersion')

--Edition
select serverproperty('Edition') 
```

查询返回：

```
Microsoft SQL Server 2012 - 11.0.2100.60 (Intel X86) 
Feb 10 2012 19:13:17 
Copyright (c) Microsoft Corporation
Enterprise Edition on Windows NT 6.1 <X64> (Build 7600: Service Pack 1) (WOW64) (Hypervisor)

RTM

11.0.2100.60

Enterprise Edition 
```

你能告诉我如何让安装程序允许我们安装分析服务吗？Reporting Services 在那里，但没有 Analysis Services。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-03T23:31:33.587

我在升级后遇到了同样的问题（即 2012 Express Advanced 到完整的企业版） - [MSDN 文档](http://msdn.microsoft.com/en-us/library/cc707783.aspx)说你可以这样做，但它对我来说也失败了，即根本无法安装 SSAS。作为参考，这是我的版本信息。

![在此处输入图像描述](../Images/7c5ef9273213e02c359d339f377660d3.png)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-25T02:51:25.363

我在尝试获取 SSDT（SQL Server 数据工具）版本以反映我安装的企业版时遇到了类似的情况。我在 Express 版旁边安装了企业版。即使卸载快递版也不起作用。

我必须运行安装程序并以这种方式删除“SSDT 功能”，然后通过 Enterprise 安装程序重新安装它，以便它识别安装它的正确版本。这不需要完全重新安装。让我知道这是否可行……不过，我假设您在这一点上找到了解决方法。

# android - Android 似乎将 box-shadow 渲染为 8 位 PNG，有人知道如何解决这个问题吗？

> ID：11308070
> 
> 赞同：0
> 
> 时间：2012-07-03T09:27:21.550
> 
> 标签：android, css, mobile

我试图给一个 div 一个深嵌入框阴影，`-webkit-box-shadow:inset 0px 0px 83px 4px rgba(0, 0, 0, 0.9);`但在 Android 中测试它似乎使这个效果看起来像一个 8 位 PNG。我在 2.3 上测试，iOS 显示完全正常。有人遇到过这个问题吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-13T18:49:46.547

Android 4.0 及更早版本不支持`inset`或模糊`box-shadow`. 请参阅[http://caniuse.com/css-boxshadow](http://caniuse.com/css-boxshadow)上的脚注。

# php - 递归 HTML ACL 保护菜单？

> ID：11308072
> 
> 赞同：1
> 
> 时间：2012-07-03T09:27:33.340
> 
> 标签：php, html, acl

有没有关于如何创建受 ACL 保护的递归菜单的示例？

想法是打印具有读取权限的最终文档的遍历路径，即使用户没有对父节点的读取权限。

这是它的外观的 HTML 代码示例：

```
<ul>
    <li><a href="some_url">I have read access here</a>
        <ul>
            <li>I don't have read access here - only print node name (traversal)
                <ul>
                    <li><a href="some_url">I have read access here</a>
                    </li>
                </ul>
            </li>
        </ul>
    </li>
</ul> 
```

Acl 有方法 has_read_permission( $node_id ) - 返回真/假

我已经设法生成完整的递归菜单，但不受 acl 保护。

PHP是服务器后端。

数据库表结构：

```
node_id | parent id | node_content 
```

谢谢

附言

我用来生成非 acl 保护的递归菜单的 PHP 代码（它被用于 codeigniter 框架）：

```
<?php
defined('BASEPATH') OR exit('No direct script access allowed');

class Menu extends MY_Controller {

    public static $menu = array();

    function index(){

        $permited_objects=$this->session->userdata('permited_objects');
        $session_email=$this->session->userdata('email');

        self::$menu[] = "<ul id=\"treemenu2\" class=\"treeview\">";

        $this -> _display_children(0, 0, $permited_objects);

        self::$menu[] = "</ul>";
        $menu_imploded = implode("", self::$menu);

        $menu_db = str_replace("<ul></ul>", " ", $menu_imploded);

        //write in db or return

        return $menu_db;

    }

    function _display_children($parent, $level) {

        $sql = "SELECT `title`, `doc_uid` 
                FROM `documents` 
                WHERE `parent_uid` = '" . $parent . "' 
                order by `title` 
                ASC";

        try {
            $this -> db -> trans_start();
            $query = $this -> db -> query($sql);
            $this -> db -> trans_complete();
        } catch (Exception $e) {
            $this -> _log_message('error', 'Model global\Generate_main_menu->execute() => ERROR=' . $e);
        }

        if ($level > 0)
            self::$menu[] = "<ul>";

        foreach ($query->result() as $row) {
                    self::$menu[] = '<li>';
                    self::$menu[] = '<a onclick="javascript: dms_display_document(\'' . $this->ec_crypt-> encode($row -> doc_uid) . '\');" href="#" >';
                    self::$menu[] = $row -> title;
                    self::$menu[] = '</a>';

                $this -> _display_children($row -> doc_uid, $level + 1);
            }

            if ($level > 0) {
                self::$menu[]='</ul>';
            }

            self::$menu[]='</li>';
        }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-03T09:38:47.453

您可以通过在表和表之间创建`m-to-n`关系并在数据透视表中保留权限来自己完成：`users``nodes`

**用户节点**

*   用户身份
*   node_id
*   可以阅读

# javascript - HTML5 缩略图滑块

> ID：11308074
> 
> 赞同：0
> 
> 时间：2012-07-03T09:27:43.420
> 
> 标签：javascript, asp.net-mvc-3, html

目前，每当我拖动 HTML5 滑块时，我都会卡在该部分，它会在滑块的顶部或底部显示缩略图/小图片。我的滑块是这样的......

```
 <input name="sliderStatus"  id="sliderStatus" type="range" min="0" max="100" value="0" step="1"/> 
```

但是如何做缩略图呢？有什么例子吗？谢谢 （：

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-03T09:32:31.953

据我了解，您想根据输入`range`值更改缩略图大小。

您需要将`onchange`事件侦听器添加到范围输入并将其附加到一些回调，`updateThumbnail`例如：

```
<input name="sliderStatus" onchange="updateThumbnail(this)"  id="sliderStatus" type="range" min="0" max="100" value="0" step="1"/> 
```

然后在您的回调中根据您的值更改缩略图宽度：

```
function updateThumbnail(rangeInput) {
    var myImage = document.getElementById('someImage');
    myImage.width = rangeInput.value;
    myImage.height = rangeInput.value;
} 
```

**更新：**

根据您的评论，您需要更改`step`范围输入中的属性：step="10"

例如，修改您的功能以显示您的图像：

```
function updateThumbnail(rangeInput) {
    var previousImage = document.getElementById('someImage' + (rangeInput.value - 10));
    if(previousImage) {
        previousImage.style.display = 'none';
    }
    var nextImage = document.getElementById('someImage' + rangeInput.value);
    nextImage.style.display = 'block';
} 
```

图像的 HTML 标记应为：

```
<img src="pathToThumbnail" id="someImage0" style="display: block;">
<img src="pathToThumbnail" id="someImage10" style="display: none;">
<img src="pathToThumbnail" id="someImage20" style="display: none;">
...
<img src="pathToThumbnail" id="someImage100" style="display: none;"> 
```

[在jsFiddle](http://jsfiddle.net/antyrat/CWd8S/)上查看演示

# ruby-on-rails - 将记录与显示操作中的嵌套路由匹配

> ID：11308075
> 
> 赞同：2
> 
> 时间：2012-07-03T09:27:47.083
> 
> 标签：ruby-on-rails, controller, routes, nested-resources

如何限制可用于显示操作的记录？我遇到的问题是您可以手动更改 URL 中的 ID 并查看不属于公司的项目。

我的路线如下所示：

/companies/:id/projects/:id

这是表演动作

项目控制器.rb

```
def show
    @project = Project.find(params[:id])
    @company = Company.find(params[:company_id])
    respond_to do |format|
      format.html # show.html.erb
      format.json { render json: @project }
    end
end 
```

路线.rb

```
resources :companies do
    resources :projects
    resources :employees
    resources :requests do
      put 'accept', :on => :member
    end
end 
```

项目.rb

```
class Project < ActiveRecord::Base
  attr_accessible :title

  belongs_to :company

 validates :title, presence: true
end 
```

公司.rb

类公司 < ActiveRecord::Base attr_accessible :name

```
has_many :projects 
```

结尾

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-03T09:58:47.600

假设您之间有`has_many`关系`Company`，`Project`我会将您的控制器代码更改为：

```
def show
  @company = Company.find(params[:company_id])
  @project = @company.projects.find(params[:id])
end 
```

Keep in mind though that this does not really solve your problem as people can still change the `company_id` and view other companies easily. What you need is a more solid authorization framework like [CanCan](https://github.com/ryanb/cancan/wiki/defining-abilities) that prevents unauthorized access to resources.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-03T09:59:29.970

May be, you should use smth like this:

> @project = @company.projects.find(params[:id])

Check [this](http://guides.rubyonrails.org/association_basics.html#has_many-association-reference) for details.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-03T10:14:05.787

Try to change the action to this

```
def show
    @company = Company.find(params[:company_id])
    @project = @company.projects.find(params[:id])
    respond_to do |format|
      format.html # show.html.erb
      format.json { render json: @project }
    end
end 
```

# security - 使用 keytool 生成密钥和证书

> ID：11308077
> 
> 赞同：6
> 
> 时间：2012-07-03T09:27:52.157
> 
> 标签：security, certificate, ssl-certificate, x509certificate, keytool

我想生成一个自签名的可信证书和一个 csr，并使用创建的可信证书对 csr 进行签名。我正在用 keytool 尝试它。在使用以下命令创建可信证书的第一步

keytool -genkey -alias mytrustCA -keyalg RSA -keystore keystore.jks -keysize 1024

它将证书放入密钥库的位置。如何将其存储到文件中？当我使用

keytool -list -v -keystore 证书/test.keystore

使用上述“genkey”命令创建的证书，其条目类型为“PrivateKeyEntry”，如何创建受信任的证书条目？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-07-03T16:18:34.083

在您的第一个命令中，您使用了`-genkey`生成名为`keystore.jks`.

要将证书导出为`.CER`格式文件，您需要使用`-export`keytool 的选项。

一个例子是：

```
keytool -v -export -file mytrustCA.cer -keystore keystore.jks -alias mytrustCA 
```

这将生成一个名为`mytrustCA.cer`

要生成证书请求以发送给 CA 以获取签名证书，您需要使用`-certreq`keytool 选项。

一个例子是：

```
keytool -v -certreq -keystore keystore.jks -alias mytrustCA 
```

这将要求输入密钥库密码，并且在成功验证后，它将显示证书请求，如下所示（示例）。

```
-----BEGIN NEW CERTIFICATE REQUEST-----
MIIBtDCCAR0CAQAwdDELMAkGA1UEBhMCSU4xFDASBgNVBAgTC01haGFyYXNodHJhMQ8wDQYDVQQH
EwZNdW1iYWkxEjAQBgNVBAoTCU1pbmRzdG9ybTEUMBIGA1UECxMLRW5naW5lZXJpbmcxFDASBgNV
BAMTC1JvbWluIElyYW5pMIGfMA0GCSqGSIb3DQEBAQUAA4GNADCBiQKBgQCqOLEumwLHlzIUAPD6
Ab1pVp84mhSNCCcUKInZbSdiDYnKSr46EjEw0PtZOVPJbM4ZG3bZsOboYr0YfViJi41o4yJICFAZ
8wCQQxPK/4N8MPV7C5WDH28kRKGH/Pc2e7CxV+as573I34QmkINk7fEyERMDwP/WgmrcKZgL0sfy
ewIDAQABoAAwDQYJKoZIhvcNAQEFBQADgYEAlcpjOUZFP9ixskXSA7HNlioWwjbL9f9rQskJ9rK8
kGLJ1td+mqqm20yo/JrKCzZjOMqr/aL6Zw2dkoyU34T9HnR2Bs3SgKn6wlYsYEVvVBk71Ec6PeTi
e+fhfNQEHsj4wuB4qixO3s1jtsLDy+DpTzYguszczwxXGFVNuk+y2VY=
-----END NEW CERTIFICATE REQUEST----- 
```

您需要发送此证书请求或将其粘贴到数字证书签名者网页中。或者，您甚至可以将此输出重定向到文件而不是控制台，如下所示：

```
keytool -v -certreq -keystore keystore.jks -alias mytrustCA > mycertreq.txt 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2020-05-08T07:35:46.057

这是一个没有任何交互式提示的命令行示例，可能更容易使用这种方式并将所有命令记录在文本文件中。

**创建 JavaKeyStore 文件和自签名证书密钥**

```
keytool -genkey -alias server -keyalg RSA -keysize 2048 -sigalg SHA256withRSA -storetype JKS \
  -keystore     my.server.com.jks -storepass mypwd -keypass mypwd \
  -dname    "CN=my.server.com, OU=EastCoast, O=MyComp Ltd, L=New York, ST=, C=US" \
  -ext "SAN=dns:my.server.com,dns:www.my.server.com,ip:11.22.33.44" \
  -validity 7200
keytool -keystore my.server.com.jks -storepass mypwd -list -v 
```

您可以在 Tomcat 中使用此密钥库 (.jks) 文件，但浏览器会发出自签名证书警告。`SubjectAlternativeName`使用一个或多个 dns 名称和可选的 ip 地址给出扩展参数。

**创建 CertificateSigningRequest 文件**

```
keytool -certreq -alias server -file my.server.com.csr \
  -keystore my.server.com.jks -storepass mypwd \
  -ext "SAN=dns:my.server.com,dns:www.my.server.com,ip:11.22.33.44" \
keytool -printcertreq -file my.server.com.csr 
```

将 .csr 文件发送给 CertificateAuthority(CA) 运营商进行签名，您稍后应该会收到一个证书(cer) 文件。您必须`SubjectAlternativeName`第二次在此处给出扩展参数。

**将证书文件导入密钥库**

```
keytool -import -trustcacerts -keystore my.server.com.jks -storepass mypwd \
  -alias server -file my.server.com.cer 
```

此命令将您的私钥和公共证书与受信任的有效 CA 机构配对。浏览器不应再发出证书警告。

**导入中间 CA 证书**

```
keytool.exe -importcert -trustcacerts -file SomeCA.cer -alias someca -keystore my.server.com.jks -storepass mypwd
keytool.exe -importcert -trustcacerts -file SomeCAIssuing.cer -alias somecaissuing -keystore my.server.com.jks -storepass mypwd 
```

这会导入 CA 颁发的证书，您可能需要在导入证书文件 (.cer) 之前执行此操作。

您的主机名证书可能有一个到期日期，因此一旦即将到期，从密钥库创建一个新的签名请求（.csr）文件，将新的 csr 文件发送给 CA 机构，导入新的证书（.cer）文件。

* * *

您很可能在 Tomcat Web 服务器中使用 jks 密钥库，因此这里是`tomcat/conf/server.xml`https 连接器示例。

**雄猫 9+**

```
<Connector port="443" protocol="org.apache.coyote.http11.Http11NioProtocol" 
connectionTimeout="20000" maxThreads="150" 
URIEncoding="UTF-8" useBodyEncodingForURI="true" maxHttpHeaderSize="65536"
compression="on" compressionMinSize="2048" noCompressionUserAgents="gozilla, traviata" 
compressableMimeType="text/html,text/xml,text/plain,text/css,text/javascript,text/json,application/json"
SSLEnabled="true" scheme="https" secure="true">
<SSLHostConfig protocols="all">
  <Certificate certificateKeystoreFile="my.server.com.jks" certificateKeystoreType="JKS"
   certificateKeystorePassword="mypwd" certificateKeyAlias="server" />
</SSLHostConfig>
</Connector> 
```

**Tomcat8.5，如果早于 8.0，您可能需要删除密码参数**

```
<Connector port="8443" protocol="org.apache.coyote.http11.Http11NioProtocol" 
            disableUploadTimeout="true" useBodyEncodingForURI="true"
            acceptCount="300" acceptorThreadCount="2" maxThreads="400"
            compressableMimeType="text/html,text/xml,text/plain,text/css,text/javascript,text/json,application/json"
            compression="off" compressionMinSize="2048"

            keystoreFile="my.server.com.jks" keystorePass="mypwd" keyAlias="server"
            SSLEnabled="true" scheme="https" secure="true" clientAuth="false"
            sslEnabledProtocols="+TLSv1,+TLSv1.1,+TLSv1.2"
            ciphers="
    TLS_ECDHE_ECDSA_WITH_AES_256_CBC_SHA384,
    TLS_ECDHE_RSA_WITH_AES_256_CBC_SHA384,
    TLS_ECDH_ECDSA_WITH_AES_256_CBC_SHA384,
    TLS_ECDH_RSA_WITH_AES_256_CBC_SHA384,
    TLS_DHE_DSS_WITH_AES_256_CBC_SHA256,
    TLS_ECDHE_ECDSA_WITH_AES_256_CBC_SHA,
    TLS_ECDHE_RSA_WITH_AES_256_CBC_SHA,
    TLS_ECDH_ECDSA_WITH_AES_256_CBC_SHA,
    TLS_ECDH_RSA_WITH_AES_256_CBC_SHA,
    TLS_DHE_DSS_WITH_AES_256_CBC_SHA,
    TLS_ECDHE_ECDSA_WITH_AES_128_CBC_SHA256,
    TLS_ECDHE_RSA_WITH_AES_128_CBC_SHA256,
    TLS_ECDH_ECDSA_WITH_AES_128_CBC_SHA256,
    TLS_ECDH_RSA_WITH_AES_128_CBC_SHA256,
    TLS_DHE_DSS_WITH_AES_128_CBC_SHA256,
    TLS_ECDHE_ECDSA_WITH_AES_128_CBC_SHA,
    TLS_ECDHE_RSA_WITH_AES_128_CBC_SHA,
    TLS_ECDH_ECDSA_WITH_AES_128_CBC_SHA,
    TLS_ECDH_RSA_WITH_AES_128_CBC_SHA,
    TLS_DHE_DSS_WITH_AES_128_CBC_SHA,
    TLS_ECDHE_ECDSA_WITH_RC4_128_SHA,
    TLS_ECDH_ECDSA_WITH_RC4_128_SHA,
    TLS_ECDH_RSA_WITH_RC4_128_SHA,
    TLS_ECDHE_ECDSA_WITH_AES_256_GCM_SHA384,
    TLS_ECDHE_ECDSA_WITH_AES_128_GCM_SHA256,
    TLS_ECDHE_RSA_WITH_AES_256_GCM_SHA384,
    TLS_RSA_WITH_AES_256_GCM_SHA384,
    TLS_ECDH_ECDSA_WITH_AES_256_GCM_SHA384,
    TLS_ECDH_RSA_WITH_AES_256_GCM_SHA384,
    TLS_DHE_DSS_WITH_AES_256_GCM_SHA384,
    TLS_ECDHE_RSA_WITH_AES_128_GCM_SHA256,
    TLS_RSA_WITH_AES_128_GCM_SHA256,
    TLS_ECDH_ECDSA_WITH_AES_128_GCM_SHA256,
    TLS_ECDH_RSA_WITH_AES_128_GCM_SHA256,
    TLS_DHE_DSS_WITH_AES_128_GCM_SHA256,
    TLS_ECDHE_ECDSA_WITH_3DES_EDE_CBC_SHA,
    TLS_ECDHE_RSA_WITH_3DES_EDE_CBC_SHA,
    TLS_ECDH_ECDSA_WITH_3DES_EDE_CBC_SHA,
    TLS_ECDH_RSA_WITH_3DES_EDE_CBC_SHA,
    SSL_RSA_WITH_RC4_128_MD5,
    SSL_RSA_WITH_RC4_128_SHA,
    TLS_EMPTY_RENEGOTIATION_INFO_SCSVF
            "
        /> 
```

# blackberry - 下一行时的自定义编辑字段错误

> ID：11308082
> 
> 赞同：1
> 
> 时间：2012-07-03T09:27:59.693
> 
> 标签：blackberry, blackberry-editfield

我正在尝试输入字符来填充编辑字段，如果文本仍在第一行我没有问题，但是当第一行已满时，它会转到下一行，我收到以下错误：

```
0:01:56.609: Uncaught: StackOverflowError 
```

这是我的custom_editfield：

```
public class Custom_EditField extends EditField {

int width, row;

Custom_EditField(long style, int width, int row) {
    super(style);
    this.width = width;
    this.row = row;
}

public int getPreferredHeight() {
    return Font.getDefault().getHeight() * row;
}

public int getPreferredWidth() {
    return width;
}

protected void layout(int maxWidth, int maxHeight) {
    super.layout(maxWidth,
            Math.min(maxHeight, Font.getDefault().getHeight() * row));
    super.setExtent(maxWidth,
            Math.min(maxHeight, Font.getDefault().getHeight() * row));
}

/*public int drawText(Graphics graphics, int offset, int length, int x,
        int y, DrawTextParam drawTextParam) {
    graphics.setBackgroundColor(Color.GRAY);
    graphics.clear();
    graphics.setColor(Color.BLACK);
    int labelWidth = getFont().getAdvance(getLabel());
    graphics.drawRect(labelWidth, 0, getWidth() - labelWidth, getHeight());
    return graphics.drawText(
            this.getText().substring(offset, offset + length), x, y);
}*/

protected void paint(Graphics graphics) {
    int rectHeight = getPreferredHeight();
    int rectWidth = getPreferredWidth();
    graphics.setBackgroundColor(Color.GRAY);
    graphics.clear();
    graphics.setColor(Color.BLACK);
    graphics.drawRect(0, 0, rectWidth, rectHeight);
    super.paint(graphics);
}
} 
```

我还注意到光标是透明的。你认为光标会导致这个问题吗？

这是我称之为编辑字段

`extends VerticalFIeldManager`

```
protected void sublayout(int width, int height) {

    comments = new Custom_EditField(Field.FIELD_HCENTER
            | Field.FIELD_VCENTER | Field.FOCUSABLE,
            getPreferredWidth() - 10, 3);
    add(comments);

    namelabel = new Custom_LabelField("姓名：", DrawStyle.ELLIPSIS
            | LabelField.USE_ALL_WIDTH | DrawStyle.LEFT | Field.FIELD_LEFT);
    namelabel.setFont(Font.getDefault().derive(Font.BOLD, 20));
    namelabel.setFontColor(Color.BLACK);
    add(namelabel);

    postbtn = new ButtonField("留言", DrawStyle.HCENTER | Field.FIELD_RIGHT);
    postbtn.setPadding(0, 20, 0, 20);
    postbtn.setChangeListener(this);
    add(postbtn);

    name = new Custom_EditField(Field.FIELD_HCENTER | Field.FIELD_VCENTER
            | Field.FOCUSABLE, getPreferredWidth()
            - namelabel.getPreferredWidth() - postbtn.getContentWidth() - 5
            * 4, 1);
    add(name);

    Field field = getField(0);
    layoutChild(field, getPreferredWidth() - 10,
            comments.getPreferredHeight());
    setPositionChild(field, 5, 5);

    field = getField(1);
    layoutChild(field, Font.getDefault().getAdvance(namelabel.getText()),
            namelabel.getContentHeight());
    setPositionChild(field, 5, comments.getPreferredHeight() + 5 * 2);

    field = getField(2);
    layoutChild(field, postbtn.getPreferredWidth() + postbtn.getWidth(),
            name.getPreferredHeight());
    setPositionChild(field, getPreferredWidth() - (postbtn.getWidth() + 5),
            comments.getPreferredHeight() + 5 * 2);

    field = getField(3);
    layoutChild(field, getPreferredWidth() * 2 / 3,
            name.getPreferredHeight());
    setPositionChild(field, namelabel.getWidth(),
            comments.getPreferredHeight() + 5 * 2);

    width = Math.min(width, getPreferredWidth());
    height = Math.min(height, getPreferredHeight());
    setExtent(width, height);
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-04T10:09:54.417

## 解决方案

我仍然无法构建您的代码，因为`Manager`发布的代码使用了`Custom_LabelField`您尚未显示的 class 。但是，我认为这`Custom_LabelField`有点像`LabelField`. 如果我指定`name`为 a `LabelField`，那么我会看到您的 StackOverflowError。

正如@EugenMartynov 所说，您在`sublayout()`. 这实际上导致`sublayout()`从自身内部再次被调用。这将导致`namelabel`再次创建，并且该过程无限重复，直到堆栈耗尽。

真的，该`sublayout()`方法应该只用于**布局**操作​​：定位和调整大小。您通常应该在此之前**创建**您的`Field`对象。通常，这发生在构造函数中。如果将`sublayout`方法的前半部分移至构造函数，您将解决此问题：

```
public class MyManager extends VerticalFieldManager {
   public MyManager() {
      super(Manager.VERTICAL_SCROLL | Manager.VERTICAL_SCROLLBAR);

      comments = new Custom_EditField(Field.FIELD_HCENTER 
        | Field.FIELD_VCENTER | Field.FOCUSABLE, 
        getPreferredWidth() - 10, 3); 
      add(comments); 

      namelabel = new Custom_LabelField("姓名：", DrawStyle.ELLIPSIS 
        | LabelField.USE_ALL_WIDTH | DrawStyle.LEFT | Field.FIELD_LEFT); 
      namelabel.setFont(Font.getDefault().derive(Font.BOLD, 20)); 
      namelabel.setFontColor(Color.BLACK); 
      add(namelabel); 

      postbtn = new ButtonField("留言", DrawStyle.HCENTER | Field.FIELD_RIGHT); 
      postbtn.setPadding(0, 20, 0, 20); 
      postbtn.setChangeListener(this); 
      add(postbtn); 

      name = new Custom_EditField(Field.FIELD_HCENTER | Field.FIELD_VCENTER 
        | Field.FOCUSABLE, getPreferredWidth() 
        - namelabel.getPreferredWidth() - postbtn.getContentWidth() - 5 
        * 4, 1); 
      add(name); 
   }
} 
```

然后`sublayout()`变得更简单：

```
protected void sublayout(int height, int width) {
   Field field = getField(0);    
   layoutChild(field, getPreferredWidth() - 10,    
        comments.getPreferredHeight());    
   setPositionChild(field, 5, 5);    

   field = getField(1);    
   layoutChild(field, Font.getDefault().getAdvance(namelabel.getText()),    
        namelabel.getContentHeight());    
   setPositionChild(field, 5, comments.getPreferredHeight() + 5 * 2);    

   field = getField(2);    
   layoutChild(field, postbtn.getPreferredWidth() + postbtn.getWidth(),    
        name.getPreferredHeight());    
   setPositionChild(field, getPreferredWidth() - (postbtn.getWidth() + 5),    
        comments.getPreferredHeight() + 5 * 2);    

   field = getField(3);    
   layoutChild(field, getPreferredWidth() * 2 / 3,    
        name.getPreferredHeight());    
   setPositionChild(field, namelabel.getWidth(),    
        comments.getPreferredHeight() + 5 * 2);    

   width = Math.min(width, getPreferredWidth());    
   height = Math.min(height, getPreferredHeight());    
   setExtent(width, height);    
} 
```

## 一般信息

如果您想知道如何捕获 StackOverflowError，请将此代码放在您的顶级`UiApplication`子类中（仅用于调试......在发布您的应用程序之前将其删除）：

```
 try {
     MyApp theApp = new MyApp();       
     theApp.enterEventDispatcher();
  } catch (Throwable e) {
     e.printStackTrace();
  } 
```

在它命中后`e.printStackTrace()`，您的 Eclipse**控制台**窗口将显示如下内容：

```
[375.664]  0x16 
[375.664] HelloBlackBerry(4FF4123E) 
[375.664]  MyManager 
[375.664]  sublayout 
[375.664]  0x16 
[375.664] HelloBlackBerry(4FF4123E) 
[375.664]  MyManager 
[375.664]  sublayout 
[375.664]  0x16 
[375.664] HelloBlackBerry(4FF4123E) 
[375.664]  MyManager 
[375.664]  sublayout 
[375.664]  0x16 
[375.664] HelloBlackBerry(4FF4123E) 
[375.664]  MyManager 
[375.664]  sublayout 
[375.664]  0x16 
[375.664] HelloBlackBerry(4FF4123E) 
```

您可以一遍又一遍地看到，使用几乎完全相同的时间戳 (375.664)，正在调用类中的`sublayout`方法。`MyManager`当您看到它时，您知道您需要查看该方法，因为它正在调用自己。

# objective-c - cocos2d - CCDirector，replaceScene 功能问题

> ID：11308088
> 
> 赞同：2
> 
> 时间：2012-07-03T09:28:27.030
> 
> 标签：objective-c, ios5, cocos2d-iphone

所以我目前正在开发一个在屏幕上绘制一些东西的应用程序，比如图表之类的东西。在测试它及其功能时，我遇到了这个问题。

我有一个按钮，按下时会进入设置场景。我像这样初始化场景

```
+(id) scenew
{
   CCScene *scene = [CCScene node];
   Settings *layer = [Settings node];    
   [scene addChild: layer]; 
   return scene; 
```

}

在那个场景中，我还有两个按钮，一个完成按钮和一个新增功能按钮。

```
done = [CCMenuItemImage itemFromNormalImage:@"done.png" selectedImage:@"done.png" target:self selector:@selector(done:)]; 
```

按下 what's new 按钮会立即生效，但完成按钮会有 2-3 秒的延迟。该应用程序出现了一些控制台消息，似乎按下它时它会重新计算整个图表，就像启动应用程序时一样。所有按钮都调用相同的 CCDirector 函数，即 replaceScene。

```
-(void) whatNew: (id)sender
{
[[CCDirector sharedDirector] replaceScene: [New scene]];
}

-(void) done: (id)sender
{
[[CCDirector sharedDirector] replaceScene: [Main scene]];
} 
```

有没有办法让我稍微优化一下……我的意思是……一种使用 replaceScene 的有效方法，或者其他不强制重新计算图形的方法？因为每当按下该按钮时，它实际上会跳到我的图形类实现的顶部，它有 4500 多行 Oo

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-03T13:04:07.967

我假设您上面提到的第一个按钮在`Main`场景内，进入`Setting`场景。

要`Main`在将应用程序流传输到场景时将场景保留在内存中`Setting`，您所要做的就是使用`pushScene:`而不是`replaceScene:`：

```
// in Main scene class
[[CCDirector sharedDirector] pushScene:[Setting scene]]; 
```

然后，从`Setting`场景内部，只需使用`popScene`返回`Main`场景：

```
-(void) done: (id)sender
{
    [[CCDirector sharedDirector] popScene];
} 
```

基本上`pushScene:`只需将新场景推到当前场景的顶部，同时`popScene`将其弹出，将应用程序流恢复到仍保留在设备内存中的前一个场景。

# python - Python代码中的十六进制模式解析（使用Bitstring）

> ID：11308091
> 
> 赞同：4
> 
> 时间：2012-07-03T09:28:45.540
> 
> 标签：python, parsing, hex, bitstring

我正在对特定文件编辑器进行原型设计，但无法解析我的 hex 文件并找到特定模式。这是我的代码（使用[Bitstring](http://code.google.com/p/python-bitstring/)库）：

```
from bitstring import BitArray, BitStream, Bit
f = open('d:\BB.bin', "rb")
s = BitArray(f)
f1 = s.find('0x000015354444444343434344444444434343434444444400F700F0')

>>> print(f1)
(15232,) 
```

这部分没问题——但我想知道输出`15232`指的是什么？（在我的文件中，实际模式位于`770h`）。

我的主要问题是寻找这种模式，但只有前 3 个字节（`0x000015`）和最后一个字节（ `0xf700f0`）：我只对中间部分感兴趣。

我尝试了不同的解决方案，但没有运气，有什么想法吗？

```
f1 = s.find('0x000001''(.*)''F700F0')  
f1 = s.find('0x000001''0x.''0xF700F0') 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-03T10:24:30.850

我假设您不需要位分辨率，`bytes`这就足够了。

```
import re
with open('d:\BB.bin', "rb") as f:
    f1 = re.findall( b'\x00\x00\x01(.*?)\xF7\x00\xF0', f.read() )

print f1 
```

# sql - SQL Server 自定义记录排序在表中，允许删除记录

> ID：11308096
> 
> 赞同：0
> 
> 时间：2012-07-03T09:29:08.217
> 
> 标签：sql, sql-server, tsql, sorting

具有自定义排序的 SQL Server 表具有列：**ID**（PK，自动增量）、**OrderNumber**、**Col1**、**Col2** ..

默认情况下，插入触发器会按照[此处](https://stackoverflow.com/a/848182/475861)的建议将值从 ID 复制到 OrderNumber 。使用一些可视化界面，用户可以通过递增或递减 OrderNumber 值对记录进行排序。

但是，如何处理同时被删除的记录呢？

**示例：** 假设您添加的记录具有 PK ID：1,2,3,4,5 - OrderNumber 接收相同的值。然后删除 ID=4,ID=5 的记录。下一条记录的 ID=6 并且 OrderNumber 将收到相同的值。**缺少 2 个 OrderNumbers 的跨度将迫使用户将 ID=6 的记录减少 3 次以更改其顺序**（即按下 3 次按钮）。

或者，可以插入`select count(*) from table`OrderNumber，但当删除一些旧行时，它允许在表中有几个相似的值。

如果一个人不删除记录，而只是“停用”它们，它们仍然包含在排序顺序中，只是对用户不可见。目前，需要 Java 中的解决方案，但我认为这个问题与语言无关。

在这方面有更好的方法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-04T13:46:37.770

我会简单地修改切换`OrderNumber`值的脚本，以便它正确地执行它*而不*依赖它们没有间隙。

我不知道您的脚本接受哪些参数以及如何使用它们，但我最终想出的那个接受要移动的项目的 ID 和要移动的位置数（负值表示“朝向较低的`OrderNumber`值”，正值表示相反的方向）。

思路如下：

1.  查找指定项目的`OrderNumber`.

2.  `OrderNumber`从第二个参数确定的方向开始对所有项目进行排名。指定项目因此获得 的排名`1`。

3.  选择排名从`1`到第二个参数的绝对值加一的项目。（即最后一项是指定项被移动到的项。）

4.  将结果集与自身连接，以便每一行与下一行连接，最后一行与第一行连接，从而使用一组行来更新另一行。

这是实现上述内容的查询，注释解释了一些棘手的部分：

[**已编辑：修复了错误重新排序的问题**]

```
/* these are the arguments of the query */
DECLARE @ID int, @JumpBy int;
SET @ID = ...
SET @JumpBy = ...

DECLARE @OrderNumber int;
/* Step #1: Get OrderNumber of the specified item */
SELECT @OrderNumber = OrderNumber FROM atable WHERE ID = @ID;

WITH ranked AS (
  /* Step #2: rank rows including the specified item and those that are sorted
     either before or after it (depending on the value of @JumpBy */
  SELECT
    *,
    rnk = ROW_NUMBER() OVER (
      ORDER BY OrderNumber * SIGN(@JumpBy)
      /* this little "* SIGN(@JumpBy)" trick ensures that the
         top-ranked item will always be the one specified by @ID:
         * if we are selecting rows where OrderNumber >= @OrderNumber,
           the order will be by OrderNumber and @OrderNumber will be
           the smallest item (thus #1);
         * if we are selecting rows where OrderNumber <= @OrderNumber,
           the order becomes by -OrderNumber and @OrderNumber again
           becomes the top ranked item, because its negative counterpart,
           -@OrderNumber, will again be the smallest one
      */
    )
  FROM atable
  WHERE OrderNumber >= @OrderNumber AND @JumpBy > 0
     OR OrderNumber <= @OrderNumber AND @JumpBy < 0
),
affected AS (
  /* Step #3: select only rows that need be affected */
  SELECT *
  FROM ranked
  WHERE rnk BETWEEN 1 AND ABS(@JumpBy) + 1
)
/* Step #4: self-join and update */
UPDATE old
SET OrderNumber = new.OrderNumber
FROM affected old
  INNER JOIN affected new ON old.rnk = new.rnk % (ABS(@JumpBy) + 1) + 1
            /* if old.rnk = 1, the corresponding new.rnk is N,
               because 1 = N MOD N + 1  (N is ABS(@JumpBy)+1),
               for old.rnk = 2 the matching new.rnk is 1: 2 = 1 MOD N + 1,
               for 3, it's 2 etc.
               this condition could alternatively be written like this:
               new.rnk = (old.rnk + ABS(@JumpBy) - 1) % (ABS(@JumpBy) + 1) + 1
             */ 
```

注意：这里假定 SQL Server 2005 或更高版本。

此解决方案的一个已知问题是，如果指定的 ID 不能精确地移动指定数量的位置（例如，如果您想将最上面的行向上移动任意数量的位置，或者第二行两个或多个位置等）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-03T09:35:05.233

好的 - 如果我没记错的话，你想对你的 OrderNumber 进行碎片整理。如果你用`ROW_NUMBER()`这个怎么办？

例子：

```
;WITH calc_cte AS (
  SELECT
    ID
    , OrderNumber
    , RowNo = ROW_NUMBER() OVER (ORDER BY ID)
  FROM
    dbo.Order    
)
UPDATE
  c
SET
  OrderNumber = c.RowNo
FROM
  calc_cte c
WHERE EXISTS (SELECT * FROM inserted i WHERE c.ID = i.ID) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-09T14:20:13.377

不想回答我自己的问题，但我相信我已经找到了解决方案。

**插入查询：**

```
INSERT INTO table (OrderNumber, col1, col2) 
VALUES ((select count(*)+1 from table),val1,val2) 
```

**删除触发器：**

```
CREATE TRIGGER Cleanup_After_Delete ON table
AFTER DELETE AS
BEGIN
  WITH rowtable AS (SELECT [ID], OrderNumber, rownum = ROW_NUMBER() 
                    OVER (ORDER BY OrderNumber ASC) FROM table)
  UPDATE rt SET OrderNumber = rt.rownum FROM rowtable rt 
  WHERE OrderNumber >= (SELECT OrderNumber FROM deleted)
END 
```

触发器在每次删除后触发，并更正已删除订单号之上的所有订单号（无间隙）。这意味着我可以通过切换它们的 OrderNumber 来简单地更改 2 条记录的顺序。

* * *

这是我的问题的一个有效解决方案，但是[这个](https://stackoverflow.com/a/11330364/475861)也是非常好的一个，也许对其他人更有用。

# php - 如何使用 php aws sdk 启动和停止 ec2 实例

> ID：11308099
> 
> 赞同：7
> 
> 时间：2012-07-03T09:29:14.353
> 
> 标签：php, amazon-ec2, amazon-web-services

aws sdk 很新，期待开始。我已经安装了 sdk 和所有东西，但是如何使用 php sdk 启动 ec2 实例？一些代码示例真的很有用。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-07-03T12:45:27.163

以下是从定义的 AMI 启动机器的基本示例：

```
$image_id  = 'ami-3d4ff254'; //Ubuntu 12.04
$min       = 1;              //the minimum number of instances to start
$max       = 1;              //the maximum number of instances to start
$options   = array(
    'SecurityGroupId' => 'default',  //replace with your security group id
    'InstanceType'    => 't1.micro',
    'KeyName'         => 'keypair',  //the name of your keypair for auth
    'InstanceInitiatedShutdownBehavior' => 'terminate' //terminate on shutdown
);

require_once('AWSSDKforPHP/sdk.class.php');

$ec2 = new AmazonEC2();

$response = $ec2->run_instances($image_id, $min, $max, $options);

if(!$response->isOK()){
    echo "Start failed\n";
} 
```

这是假设您正确设置了 AWS 凭证......希望这能让您指出正确的方向......

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-26T17:44:22.817

如果您有兴趣，这是一个更详细的脚本：

```
// Sleep time to allow EC2 instance to start up
$sleeptime = 15;
$username = "ec2-user";

// For AWS PHP SDK
putenv('HOME=/home/ec2-user/');
require_once 'AWSSDKforPHP/sdk.class.php';

// Get data from HTTP POST
$ami = $_POST['amis'];
$instancetype = $_POST['instancetype'];
$keyname = $_POST['key'];
$securitygroup = $_POST['securitygroups'];

// Instantiate the AmazonEC2 class
$ec2 = new AmazonEC2();

// Boot an instance of the image
$response = $ec2->run_instances($ami, 1, 1, array(
    'KeyName' => $keyname,
    'InstanceType' => $instancetype,
    'SecurityGroupId' => $securitygroup,
));
if (!($response->isOK())) {
    echo "<p class='error'>ERROR! Could not create new instance!</p>";
    return; 
}
$instance = $response->body->instancesSet->item->instanceId;
$message = "<p>Your instance has been successfully created.</p>";
$message .= ("<p>Instance ID is: <b>$instance</b></p>");

// Give instance some time to start up
sleep ($sleeptime);

// Get the hostname from a call to the DescribeImages operation.
$response = $ec2->describe_instances(array(
    'Filter' => array(
       array('Name' => 'instance-id', 'Value' => "$instance"),
    )
));
if (!($response->isOK())) {
    echo "<p class='error'>ERROR! Could not retrieve hostname for instance!</p>";
    return; 
}
$hostname = $response->body->reservationSet->item->instancesSet->item->dnsName;

// Output the message
$message .= "<p>Your instance hostname is: <b>$hostname</b></p>";
$message .= "<p>You can connect to your instance using this command:<br>" .
    "<b>ssh -i $keyname.pem $username@" . $hostname .  "</b></p>";

echo $message; 
```

与@dleiftah 的几乎相同，只是它在完成时输出新实例的主机名。

# ruby-on-rails - Ruby on Rails - 如何缓存 API 服务响应的结果？

> ID：11308101
> 
> 赞同：4
> 
> 时间：2012-07-03T09:29:29.033
> 
> 标签：ruby-on-rails, api, caching

我有一个`RoR 3.2.3`网站。它调用一个网络服务`flickr.com`来获取我的照片列表。但这并不重要。

最重要的是，它每次都会发出请求——每次访问者访问我的网站时，它都会调用一个网络服务`flickr.com`来获取照片列表。显然，我想将响应缓存`flickr`大约 5 个小时。就我而言，这就足够了。

那么我该怎么做呢？什么是好的或最好的方法，或者只是一般的方法？也许你有一个如何制作的链接？

PS我使用支持数据库的5Mb的**免费资费**计划。但是，如果有必要，我可以迁移到其他主机。`heroku.com``PostgreSQL`

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-07-03T09:53:46.210

Memcached 是一个不错的选择。Heroku[免费内置了它](https://addons.heroku.com/memcache)（5mb）。设置指南可以在[这里找到](https://devcenter.heroku.com/articles/memcache#using_memcache_from_ruby)

```
$ heroku addons:add memcache
$ vim Gemfile
  gem 'dalli'
$ vim config/environments/production.rb
  config.cache_store = :dalli_store
$ heroku console
  Rails.cache.stats 
```

然后您可以将昂贵的 API 请求包装到 Rails.cache 块中，请参见下面的代码：

```
class Flickr
  def self.cached_request
    Rails.cache.fetch "photos", :expires_in => 5.minutes do
      flickr.photos.getRecent
    end
  end
end 
```

然后要使用缓存，只需运行

```
Flickr.cached_request 
```

它将触发 API 请求并将它们缓存 5 分钟。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-03T09:33:34.637

这取决于您希望缓存如何工作。通常，您对 memcached 或 redis 存储很满意。两者都在heroku上运行。

查看缓存指南[http://guides.rubyonrails.org/caching_with_rails.html](http://guides.rubyonrails.org/caching_with_rails.html)

# google-apps-script - 执行脚本

> ID：11308103
> 
> 赞同：1
> 
> 时间：2012-07-03T09:29:35.723
> 
> 标签：google-apps-script

我有这种情况。几个月前我做了一个脚本，它仍在谷歌网站上运行。doGet 函数是：

```
 function doGet(e) {
  var myapp = UiApp.createApplication();

 var mygrid = myapp.createGrid(5, 2);
  var listboxAssociazione=myapp.createListBox().setId("listboxAssociazione").setName("listboxAssociazione");
  var labelAssociazione=myapp.createLabel("Associazione").setId("Associazione");
  var listboxMeseFatturato=myapp.createListBox().setId("listboxMeseFatturato").setName("listboxMeseFatturato");
  var labelMeseFatturato=myapp.createLabel("Mese da fatturare").setId("Mese da fatturare");
  var listboxAnnoFatturato=myapp.createListBox().setId("listboxAnnoFatturato").setName("listboxAnnoFatturato");
  var labelAnnoFatturato=myapp.createLabel("Anno").setId("Anno");
  var buttonCalcola=myapp.createButton().setText("Calcola").setId("CalcolaFattura");
  var labelLavoroInCorso=myapp.createLabel("").setId("labelLavoroInCorso").setStyleAttribute('color', 'blue');

  mygrid.setWidget(0, 0,labelAssociazione);
  mygrid.setWidget(0, 1, listboxAssociazione);
  mygrid.setWidget(1, 0, labelMeseFatturato);
  mygrid.setWidget(1, 1, listboxMeseFatturato);
  mygrid.setWidget(2, 0, labelAnnoFatturato);
  mygrid.setWidget(2, 1, listboxAnnoFatturato); 
  mygrid.setWidget(3, 1, buttonCalcola);
  mygrid.setWidget(4, 1, labelLavoroInCorso);

  var p=DocsList.getFolders();
  var totcartelle = p.length;
  var trovato= false;
  var cartellaAssociazioni;
  for(var j=0;j<totcartelle && trovato==false;j++){
    var prova=p[j].getId();
    if(p[j].getId()=="0B-H4Ioaio5w5YTg3MGFkOWQtMzYzNy00ZTFhLWEzY2YtZTVlNzIwYWJhMmJm"){
    trovato=true;
     cartellaAssociazioni=p[j]; 
    }

  }

  var cartelle =cartellaAssociazioni.getFolders();
   var lunghezza = cartelle.length;
  for(var i = 0; i < lunghezza; i++) //these arrays are zero based it looks like
   { var prova=cartelle[i].getName();
    listboxAssociazione.addItem(prova); 
   }

  //Aggiunta dei mesi alla listbox
  listboxMeseFatturato.addItem("Gennaio");
  listboxMeseFatturato.addItem("Febbraio");
  listboxMeseFatturato.addItem("Marzo");
  listboxMeseFatturato.addItem("Aprile");
  listboxMeseFatturato.addItem("Maggio");
  listboxMeseFatturato.addItem("Giugno");
  listboxMeseFatturato.addItem("Luglio");
  listboxMeseFatturato.addItem("Agosto");
  listboxMeseFatturato.addItem("Settembre");
  listboxMeseFatturato.addItem("Ottobre");
  listboxMeseFatturato.addItem("Novembre");
  listboxMeseFatturato.addItem("Dicembre");

  //Aggiunta dell'anno di fatturazione
  var d= new Date();
  var annoAttuale=parseInt(d.getFullYear());
  listboxAnnoFatturato.addItem(""+annoAttuale);
  listboxAnnoFatturato.addItem(""+(annoAttuale-1));

  var formpanel=myapp.createFormPanel().setId("form");

  var serverClickHandler = myapp.createServerClickHandler('GeneraFattura');
  serverClickHandler.addCallbackElement(formpanel);
  buttonCalcola.addClickHandler(serverClickHandler);

  var serverClickHandlerStatus = myapp.createServerClickHandler('ChangeStatus');
  serverClickHandlerStatus.addCallbackElement(formpanel);
  buttonCalcola.addClickHandler(serverClickHandlerStatus);

  formpanel.add(mygrid);
  myapp.add(formpanel);
  return myapp;
}

//Function to disable the button to avoid double click
function ChangeStatus(e){
  var app = UiApp.getActiveApplication();
  app.getElementById("labelLavoroInCorso").setText("Attendere! Calcolo della richiesta di pagamento in corso...");
  app.getElementById("CalcolaFattura").setEnabled(false);
  return app;
} 
```

现在我的问题是，当我单击站点中的“Calcola”按钮时，似乎“GeneraFattura”函数运行了许多随机次数而不是 1。

如果我使用我给出的相同 3 参数从 Google 站点中的脚本编辑器运行相同的函数

```
var valoreAssociazione = "Volley";
var valoreMese="May";
var valoreAnno = "2012"; 
```

而不是上面的表格，它可以正常工作。

当我说它工作正常时，我的意思是在“GeneraFattura”函数中，我只有一行复制电子表格。如果我从脚本编辑器运行脚本，则输出是电子表格的一份副本，如果我从站点运行脚本，我会得到电子表格的 5 6 份副本。

您认为问题出在哪里？为什么 google 站点脚本编辑器执行和嵌入在 google 站点中的脚本执行之间存在不同的行为？

先感谢您

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-03T15:16:02.187

这是我们正在积极处理的已知错误。运行超过 30 秒的处理程序最终可能会被调用多达 3 次。看到这个问题：

[http://code.google.com/p/google-apps-script-issues/issues/detail?id=1504](http://code.google.com/p/google-apps-script-issues/issues/detail?id=1504)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-03T09:43:53.497

不确定这是您问题的实际原因，但该方法`createServerClickHandler()` 在[已弃用的成员列表中，](https://developers.google.com/apps-script/class_uiinstance?hl=fr-FR#createServerClickHandler)因此我建议按照建议替换它。

应该是这样的：（ *当然，两个处理程序的修改相同；-）*

```
 var serverClickHandler = myapp.createServerHandler('GeneraFattura');
  buttonCalcola.addClickHandler(serverClickHandler);
  serverClickHandler.addCallbackElement(formpanel); 
```

注意：我还建议使用另一种方法来避免使用客户端处理程序多次单击您的按钮。它可以是这样的：

```
 //Client Handler to disable the button to avoid double click (insert in the UI definition function)
      var msg = app.getElementById("labelLavoroInCorso").setText("Attendere! Calcolo della richiesta di pagamento in corso...").setVisible(false);
      var Clienthandler = app.createClientHandler()
         .forEventSource().setEnabled(false);
         .forTargets(msg).setVisible(true);
         buttonCalcola.addClickHandler(Clienthandler)
    // then at the end of the serverhandler function you will have to re-enable the button and setVisible(false) the message 
```

编辑：客户端处理程序的兴趣在于它立即生效，当您使用 2 个服务器处理程序时，您无法确定哪个将首先执行。由于即时响应能力，它还提供了更好的用户体验（嗯，这是我的观点 ;-)

# c# - 在 C# 编辑器窗口中的当前位置查找项目的类型

> ID：11308106
> 
> 赞同：9
> 
> 时间：2012-07-03T09:29:44.433
> 
> 标签：c#, visual-studio, vs-extensibility, roslyn

我正在编写 Visual Studio intellisense 的扩展，并希望在 C# 编辑器中获取光标之前的项目类型。

我目前有一个`ITextBuffer`可以用来获取当前源文件的文件。

我还可以获得编辑器中的当前位置，如下所示：

```
var dte = Microsoft.VisualStudio.Shell.ServiceProvider.GlobalProvider.GetService(typeof(EnvDTE._DTE)) as EnvDTE.DTE;            
TextSelection sel = (TextSelection)dte.ActiveDocument.Selection; 
```

但是我不太确定如何检测编辑器中当前光标后面的项目的类型。我试过使用 Roslyn，但看起来这应该比这更简单。Roslyn 是执行此操作的最佳工具（通过编译文档并导航到文档中的正确位置）还是有更好的方法。

下面是我尝试使用 Roslyn 查找项目的类型：

```
ITextSnapshot snapshot = m_textBuffer.CurrentSnapshot;
SnapshotPoint? triggerPoint = session.GetTriggerPoint(snapshot);

var tree = SyntaxTree.ParseCompilationUnit(m_textBuffer.CurrentSnapshot.GetText());

var nodes = tree.GetRoot().DescendantNodes();

var element = nodes.Where(n => n.Span.End <= triggerPoint.Value.Position).Last();

var comp = Compilation.Create("test", syntaxTrees: new[] { tree });
var semModel = comp.GetSemanticModel(tree);

//I cant work out what to do here to get the type as the element doesnt seem to be of the required type
var s = semModel.GetTypeInfo((AttributeSyntax)element); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-03T18:54:52.917

编译器 API 是经过深思熟虑的，要求您提出正确的问题（没有模糊逻辑。）简单地在光标位置找到事物的类型需要一些上下文，而起初对您来说似乎很明显的答案可能不是其他用途的正确答案。

对于一般表达式，您可以执行以下操作：（注意它不是很健壮）

```
var root = tree.GetRoot();
var token = root.FindToken(pos);
var nearestExpr = token.Parent.AncestorsAndSelf().OfType<ExpressionSyntax>().First();
var type = semModel.GetTypeInfo(nearestExpr).Type; 
```

更全面的解决方案将检查令牌的父节点并从那里开始：

```
var node = token.Parent;
if (node is ExpressionSyntax)
{
    type = semModel.GetTypeInfo((ExpressionSyntax)node).Type;
}
else if (node is VariableDeclaratorSyntax && ((VariableDeclaratorSyntax)node).Identifier == token)
{
    type = (TypeSymbol)semModel.GetDeclaredSymbol((VariableDeclaratorSyntax)node);   
} 
```

...

有很多有趣的案例，您希望显示为与源文件中任何特定标识符或令牌对应的类型可能会因您要完成的工作而异。

# ios - 是否可以在 UIImage 的部分部分添加灰度效果？

> ID：11308111
> 
> 赞同：0
> 
> 时间：2012-07-03T09:30:13.043
> 
> 标签：ios, uiimage, effect, grayscale

谁能告诉我如何在图像矩形上添加灰度效果？我发现[Convert image to grayscale](https://stackoverflow.com/questions/1298867/convert-image-to-grayscale)，它可以将图像转换为灰度。但我只需要将 UIImage 的一部分转换为灰度。是否可以？

看看你的帮助 谢谢，Huy

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-03T12:37:05.303

我修改了另一个主题中的代码以应用于图像中的矩形。

```
typedef enum {
    ALPHA = 0,
    BLUE = 1,
    GREEN = 2,
    RED = 3
} PIXELS;

- (UIImage *)convertToGrayscale:(UIImage *) originalImage inRect: (CGRect) rect{
    CGSize size = [originalImage size];
    int width = size.width;
    int height = size.height;

    // the pixels will be painted to this array
    uint32_t *pixels = (uint32_t *) malloc(width * height * sizeof(uint32_t));

    // clear the pixels so any transparency is preserved
    memset(pixels, 0, width * height * sizeof(uint32_t));

    CGColorSpaceRef colorSpace = CGColorSpaceCreateDeviceRGB();

    // create a context with RGBA pixels
    CGContextRef context = CGBitmapContextCreate(pixels, width, height, 8, width * sizeof(uint32_t), colorSpace, 
                                                 kCGBitmapByteOrder32Little | kCGImageAlphaPremultipliedLast);

    // paint the bitmap to our context which will fill in the pixels array
    CGContextDrawImage(context, CGRectMake(0, 0, width, height), [originalImage CGImage]);

    for(int y = 0; y < height; y++) {
        for(int x = 0; x < width; x++) {
            uint8_t *rgbaPixel = (uint8_t *) &pixels[y * width + x];

            if(x > rect.origin.x && y > rect.origin.y && x < rect.origin.x + rect.size.width && y < rect.origin.y + rect.size.height) {

                // convert to grayscale using recommended method: http://en.wikipedia.org/wiki/Grayscale#Converting_color_to_grayscale

                uint32_t gray = 0.3 * rgbaPixel[RED] + 0.59 * rgbaPixel[GREEN] + 0.11 * rgbaPixel[BLUE];

                // set the pixels to gray in your rect

                rgbaPixel[RED] = gray;
                rgbaPixel[GREEN] = gray;
                rgbaPixel[BLUE] = gray;
            }
        }
    }

    // create a new CGImageRef from our context with the modified pixels
    CGImageRef image = CGBitmapContextCreateImage(context);

    // we're done with the context, color space, and pixels
    CGContextRelease(context);
    CGColorSpaceRelease(colorSpace);
    free(pixels);

    // make a new UIImage to return
    UIImage *resultUIImage = [UIImage imageWithCGImage:image];

    // we're done with image now too
    CGImageRelease(image);

    return resultUIImage;
} 
```

您可以在 UIImageView 中对其进行测试：

```
imageview.image = [self convertToGrayscale:imageview.image inRect:CGRectMake(50, 50, 100, 100)]; 
```

# xml - 去重 minidom xml 输出

> ID：11308112
> 
> 赞同：0
> 
> 时间：2012-07-03T09:30:14.603
> 
> 标签：xml, python-2.7, minidom

有没有办法在用 minidom 生成的 XML 树中删除重复项？我还没有尝试这样做，我只是在寻找已经存在的东西。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-06-20T21:58:18.067

我想这是因为这个[Python 错误 10131](http://bugs.python.org/issue10131)。[可以通过使用 3rd 方库lxml](http://lxml.de)来解决它。出于其他原因也推荐使用这个库：更简单的语法、速度等。

# objective-c - UINavigationController 到 UIViewController 的难度

> ID：11308113
> 
> 赞同：0
> 
> 时间：2012-07-03T09:30:21.780
> 
> 标签：objective-c, uiviewcontroller, uinavigationcontroller

如何将其转换为`UIViewController`可能：

```
for (UIViewController *tmpController  in [self.navigationController viewControllers]) 
{
    if ([tmpController isKindOfClass:[RootViewController class]])
    {
        [self.navigationController popToViewController:tmpController animated:YES];
        break;
    }
} 
```

`[self.navigationController viewControllers]`--> 如何将其转换为`UIViewController`，因为我有错误，

`[self.navigationController popToViewController:tmpController animated:YES];`--> 虽然这部分我把它转换成这个 -->`[self dismissModalViewControllerAnimated:YES];`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-03T09:53:32.713

如果您有 ViewController A 呈现 ViewController B 呈现 ViewController C

而你想回到 A，在 viewController C 中执行以下操作

```
[self dismissModalViewControllerAnimated:NO];
[[self presentingViewController] dismissModalViewControllerAnimated:NO]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-03T09:52:28.517

您可以按如下方式获取视图层次结构：

```
for(UIView *view in [self.view subviews]) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-03T09:53:01.217

从上面的评论中，我觉得您正在展示从 A 到 B 和从 B 到 C 之类的控制器。

现在你想从 C 到 A 使用以下代码来做到这一点

```
[self.navigationController popToRootViewControllerAnimated:YES]; 
```

**编辑**

```
//Try this.
[[[self parentViewController] parentViewController] dismissModalViewControllerAnimated:YES]; 
```

# loading - three.js - 无法调用未定义的方法“loadTexture”

> ID：11308117
> 
> 赞同：1
> 
> 时间：2012-07-03T09:30:37.083
> 
> 标签：loading, textures, three.js, repeat

对不起我的英语不好。我在使用 Three.js 时遇到了问题。在加载纹理的每个示例中，我都会看到以下代码：

```
var map = THREE.ImageUtils.loadTexture( "obj/textures/textures38.jpg" );
    map.wrapS   = map.wrapT = THREE.RepeatWrapping;
    map.repeat.set( 3, 3 ); 
```

你能告诉我，为什么我会收到这样的消息

```
Uncaught TypeError: Cannot call method 'loadTexture' of undefined 
```

* * *

这很好用：

```
var material=new THREE.MeshPhongMaterial({color:16777215,map:ImageUtils.loadTexture("obj/textures/textures38.jpg")}); 
```

我目前使用的 PS Three.js 版本不是最后一个

谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-03T10:32:11.353

> 我目前使用的 PS Three.js 版本不是最后一个

你刚刚回答了你自己的问题。可能那个版本还没有`ImageUtils`命名空间。始终建议使用最新版本。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2021-11-17T20:35:31.910

我用了

```
import { BasisTextureLoader } from './jsm/loaders.basisTexureLoader.js'; 
const loadersvariable = BasisTextureLoader.load("img.jpg"); 
```

您需要更改文件夹和文件的权限，否则会`403 forbidden`出错。将导入路径指向`three.js`加载程序文件夹的依赖项，但它们必须在一起，因为所有文件链接在一起，然后您必须从文件中调用变量才能使其生效，而无需从您获得的文件中调用变量`uncaught referenceError: BasisTextureLoader is not defined`

或者你可以做

```
<script type="module"> import { TextureLoader } from './src/loaders/TextureLoader.js';
const imagevariablename = new Textureloader.load("image.jpg");
also the displacementmap of examples folder in three.js has a working texture.loader already to copy 
```

# perl - 模板工具包包括钩子？

> ID：11308118
> 
> 赞同：4
> 
> 时间：2012-07-03T09:30:42.110
> 
> 标签：perl, hook, template-toolkit

当我包含一个模板并且我可以在其中更改模板的路径时，是否会执行某种类型的钩子？

例如

```
[% INCLUDE test %] 
```

我想将“测试”的路径更改为“AE/test.tt”或“FR/test.tt”。

* * *

这个想法是在不更改包含所在的模板的情况下更改模板的路径。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-03T11:13:04.687

这样做的正常方法是在构造对象`INCLUDE_PATH`时使用参数：`Template`

```
my $tt = Template->new({INCLUDE_PATH => 'AE'}); 
```

构建一个新`Template`实例并不是什么大不了的事，所以当您要处理模板时，没有充分的理由不即时创建一个新实例，但是，如果您处于持久环境中并且确实需要性能，总是可以选择创建多个：

```
my %tt;
$tt{ae} = Template->new({INCLUDE_PATH => 'AE'});
$tt{fr} = Template->new({INCLUDE_PATH => 'FR'});
# ... code ... code ... code ...
$lang = 'ae';
# ... code ... code ... code ...
$tt{$lang}->process($template_name); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-03T09:38:34.857

我认为这可能像这个`Template`例子：

```
[% mytest = 'AE/test.tt' %]
[% INCLUDE  $mytest  %]           # 'AE/test.tt' 
```

这里没有测试。

请参阅[http://template-toolkit.org/docs/manual/Directives.html#section_INCLUDE](http://template-toolkit.org/docs/manual/Directives.html#section_INCLUDE)

# c# - 将许多项目输出添加到安装项目

> ID：11308120
> 
> 赞同：0
> 
> 时间：2012-07-03T09:30:46.453
> 
> 标签：c#, .net, visual-studio-2010, visual-studio, setup-project

我的解决方案中有大约 60 个项目。我想将它们作为项目输出添加到安装项目。有没有什么办法可以在不将所有项目一一添加的情况下做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-03T12:34:28.963

您可以尝试查看一个添加项目的 vdproj 文件，并尝试将其复制到其他项目。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-03T10:15:22.930

你必须一一添加

# jquery - Http请求，提取数据

> ID：11308125
> 
> 赞同：1
> 
> 时间：2012-07-03T09:31:39.547
> 
> 标签：jquery, json, xmlhttprequest

我是 json、js 等的新手。所以我对这一切、httprequests 等有点困惑。我正在尝试从响应中提取数据。首先我做了 XMLHttpRequest，但我在 Stackoverflow 上阅读了这里，最好使用 jquery 或类似的框架，因为我已经使用 jquery mobile，所以感觉很自然。

现在的问题是如何从“响应”中获取数据。

XMLHttpRequest.response 文本如下所示：

```
{"list":null,"data":{"id":95,"picture":"/content/picture/icons/Rome","text":"En galning hældte forleden 1 ton sukker i Roms officielle vandforsyning","appId":1,"textHeader":"Rome sweet Rome!!","localAction":"url(http://www.b.dk)","sortOrder":0,"lastCheck":null},"expires":2592000000,"server":null} 
```

现在，当我想按照[jquery](http://jquerymobile.com/demos/1.0a1/experiments/api-viewer/docs/jQuery.getJSON/index.html)中的示例进行操作时，我得到了一个对象。但数据中没有任何内容。*

他们的代码：

```
var startUrl = "http://localhost:8080";
function httpGet(theUrl)
{
    $.getJSON(startUrl+theUrl, 
        function(data){
            alert(data);
            $.each(data.items, function(i,item){
                alert(i+item);
            });
        });
} 
```

如何从中取出我的代码？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-03T09:51:12.207

当您使用 getJSON 时，数据结果会自动转换为 Javascript 对象，其属性与 JSON 字符串中的键值匹配。所以你的对象属性将是“list”、“data”、“expires”和“server”。

“数据”属性将是另一个对象，其中包含“id”、“图片”、“文本”等属性。

因此，要访问您的数据，只需像对象一样引用它：

```
var picture = data.data.picture;
var text = data.data.text; 
```

当然，您不需要像这样将值放在 vars 中。我只是向您展示如何引用它们。

# php - 使用 UCS-2 Little Endian 编码写入文件

> ID：11308129
> 
> 赞同：0
> 
> 时间：2012-07-03T09:31:45.837
> 
> 标签：php, file, encoding, character-encoding

我需要使用 PHP 在 UCS-2 Little Endian 文件中写入一些信息，这样当我在编辑器中打开该文件时，编码设置为 UCS-2 Little Endian，如附图所示。

我该怎么办？

![在此处输入图像描述](../Images/6067a8bc415d191be0154418b4afb92d.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2016-02-03T16:47:23.763

您可以使用 iconv：`iconv('UTF-8', 'UCS-2LE', $string);` 此外，您需要将 BOM 附加到结果文件 ( `"\xFF\xFE"`)。

然后我的记事本++ 将编码设置为您的图片。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-03T09:37:38.893

您可以使用 iconv() 来转换字符集。检查命令行上的“iconv --list”以获取支持的编码列表。

# javascript - 复制stackoverflow标签系统的功能

> ID：11308130
> 
> 赞同：2
> 
> 时间：2012-07-03T09:31:51.327
> 
> 标签：javascript, jquery

在stackoverflow上，如果在标签输入框中按住左键按钮，它将一直向左移动并打开每个标签进行编辑，右键和退格键也是如此。
我正在尝试在我的身上复制相同的功能。

我有以下代码：[JSFiddle](http://jsfiddle.net/hAKMN/)

当前代码的问题是我不确定如何实现箭头键移动。

有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-03T09:48:32.880

看看这两个 jQuery 插件，也许其中一个会满足您的需求（尽管它们与 stackoverflow 标记功能不同）：

[http://webspirited.com/tagit/#demos](http://webspirited.com/tagit/#demos)

[http://aehlke.github.com/tag-it/](http://aehlke.github.com/tag-it/)

# c# - Visual Studio 2012 在 Web 应用程序中放置面板

> ID：11308131
> 
> 赞同：0
> 
> 时间：2012-07-03T09:31:53.683
> 
> 标签：c#, asp.net

我想水平放置面板，但是当我拖动面板时，它们会在前一个面板的下方或内部。

我怎样才能防止这种情况发生？我是 Visual Studio 的新手，所以我不知道该怎么做。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-03T09:45:46.147

在标记上，您可以这样做：

```
<div>
    <asp:Panel ID="leftPanel" runat="server" Style="float: left; width: 50%">
        Left Panel
    </asp:Panel>
    <asp:Panel ID="rightPanel" runat="server" Style="float: right; width: 50%">
        Right Panel
    </asp:Panel>
</div> 
```

这只是一个示例。将样式移动到单独的`css`文件总是好的。如果你用设计器设计东西，很难维护。

当您将样式移动到 css 时：

**CSS：**

```
.leftPanel
{
    float: left;
    width: 50%;
}
.rightPanel
{
    float: right;
    width: 50%;
} 
```

**标记：**

```
<div>
    <asp:Panel ID="leftPanel" runat="server" CssClass="leftPanel">
        Left Panel
    </asp:Panel>
    <asp:Panel ID="rightPanel" runat="server" CssClass="rightPanel">
        Right Panel
    </asp:Panel>
</div> 
```

以后如果你想改变一些东西，你可以改变css。

# android - 如何在 android web 视图中加载名称中带有空格的图像文件？

> ID：11308134
> 
> 赞同：0
> 
> 时间：2012-07-03T09:32:03.387
> 
> 标签：android

我在 Android webview 中加载图像资源文件时遇到问题。图像名称在单词中有空格，例如，

```
file:///android_asset/images/abc xyz.jpg 
```

所以问题是当空间出现时，webview 会考虑名称中的 %20，因此它无法与资产文件夹内的图像进行比较。

我不确定资产管理器是否有任何问题，它给出的名称就像我的意思是在空间名称之前的 abc 或它在 webview 中的问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-03T09:36:26.373

```
file:///android_asset/images/abc.html 
```

创建 abc.html 将此 abc.html 保存**到**您的资产文件夹

```
...
<body>
<img src="file:///android_asset/images/abc xyz.jpg"/>
</body>
....

String url = "file:///android_asset/images/abc.html" 
```

# javascript - Backbone.js 路由器/视图逻辑

> ID：11308138
> 
> 赞同：1
> 
> 时间：2012-07-03T09:32:16.787
> 
> 标签：javascript, backbone.js

我正在编写我的第一个 Backbone.js 应用程序，但在找出最佳编程方式时遇到了一些麻烦。我有两个主要观点：

1.  显示我所有模型的索引。
2.  显示用于编辑的特定模型。

但是＃2有许多不同的“模块”，比如我可以编辑“新闻”部分或“关于”部分等......所有这些模块都在导航栏中。

当我显示视图#1（所有模型的索引）时，该导航栏被隐藏。它在视图#2（特定模型）中可见，以便在不同模块之间导航。

我有这样的路线设置：

```
routes: {
    '', 'index',
    'communities': 'index',
    'communities/:id': 'main',
    'communities/:id/news', 'news',
    'communities/:id/about', 'about'
}, 
```

所以我的问题是，当调用“新闻”或“关于”操作时，我是否在每个方法中添加导航栏？这不是多余的吗？我将拥有 8-10 个不同的模块，每次添加导航栏似乎非常重复。有没有更好的办法？我唯一希望隐藏导航栏的时候是在显示索引时。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-03T14:04:42.257

*当我创建我的第一个有点*复杂的 Backbone 应用程序时，我遇到了同样的问题。除了您对冗余代码的关注之外，我还担心绑定到我的导航栏的事件可能不会随着导航栏的更改而解除绑定。为了解决这个问题，我最终创建了一个视图层次结构，一个**管理器**视图管理整个导航栏，并为我想要显示的每种类型的导航菜单提供单独的视图，这些视图将传递给管理器视图以呈现给页。

这是我的实现示例。

在我们开始之前，这是`close`我添加到 Backbone`View`原型中的一个函数，它取消绑定事件并删除视图

```
Backbone.View.prototype.close = function() {
    if(this.beforeClose) { this.beforeClose(); }
    this.remove();
    this.unbind();
} 
```

首先，这是我的**Manager View**。它的`render`功能会关闭当前显示的任何菜单，并将其替换为传递给它的菜单`view`。虽然有点多余，但我创建了一个显式`empty`函数以使我的路由器代码更易于理解。

```
var App.Views.SubNavBar = Backbone.View.extend({

    currentView: null,

    el: '#subnav-wrap',

    render: function(view) {
        if(this.currentView) { this.currentView.close(); }
        this.currentView = view;
        this.$el.html(view.el);
    },

    empty: function() {
        if(this.currentView) { this.currentView.close(); }
        this.currentView = null;
    }

}); 
```

其次，这是我所有特定导航菜单视图都扩展的*基本视图。*由于它们都将具有相同`tagName`的 , `className`,`id`和`initialize`and`render`功能，因此可以将重复降至最低

```
var App.Views.SubNavBase = Backbone.View.extend({

    tagName: 'ul',

    className: 'nav nav-pills',

    id: 'subnav',

    template: _.template($('#tmpl-subnav').html(),

    initialize: function() {
        if(this.setLinks) { this.setLinks(); }
        this.render();
    },

    render: function() {
        this.$el.html(this.template({links:this.links}));
        return this;
    }

}); 
```

以下是特定导航菜单的视图示例。您可以看到我需要做的就是定义我希望出现在菜单中的链接。当我实例化这个视图时，函数`SubNavBase`将处理用所需的 HTML 填充视图。请注意，我还附加了一些事件到此视图。

```
var App.Views.Projects.DisplayNav = App.Views.SubNavBase.extend({

    setLinks: function() {
        this.links = {
            'Edit Project': {
                icon: 'edit',
                class: 'menu-edit',
                href: '#projects/'+this.model.get('id')+'/edit'
            },
            'Add Group': {
                icon: 'plus',
                class: 'menu-add-group',
                href: '#projects/'+this.model.get('id')+'/groups/new'
            },
            'Delete Project': {
                icon: 'trash',
                class: 'menu-delete',
                href: '#'
            }
        }
    },

    events: {
        'click a.menu-delete' : 'delete'
    },

    delete: function(e) {
        e.preventDefault();
        // here goes my code to delete a project model
    }

}); 
```

现在，这是我用来将上面的链接对象转换为`<li>`元素列表的 underscore.js 模板。请注意，我使用`<@`而不是`<%`我的模板，因为这是一个 rails 应用程序并且 rails 已经使用`<%`

```
<script type="text/template" id="tmpl-subnav">
    <@ _.each(links,function(link, title) { @>
    <li>
        <a href="<@= link.href @>" class="<@= link.class @>">
            <i class="icon-<@= link.icon @>"></i>
            <@= link.title @>
        </a>
    </li>
    <@ }); @>
</script> 
```

最后，总而言之，这是一个`Router`创建和呈现导航菜单的示例函数。发生的步骤如下：

*   `App.Views.Projects.DisplayNav`传递一个模型并`this.el`用相应的 HTML 填充它，由 underscore.js 模板确定
*   `App.SubNavBar``render`使用新的菜单视图调用其函数
*   `App.SubNavBar`检查导航栏中当前是否有另一个菜单；如果是这样，它会调用其视图的`close()`函数
*   `App.SubNavBar`finally 将传递的视图的 HTML 附加到自身，维护对视图的引用以供以后使用

我只包含了路由器代码的相关部分

```
var App.Routers.Projects = Backbone.Router.extend({
    routes: {
        'projects/:id' : 'display'
    },

    display: function(id) {
        var p = projects.get(id);
        var subnav = new App.Views.Projects.DisplayNav({model:p})
        App.SubNavManager.render(subnav);  // App.SubNavManager is an instance of App.Views.SubNavBar
    }
}); 
```

所有这一切的好处是我现在可以将事件附加到我的菜单特定视图，如果用户导航到不同的内容并且菜单发生更改，管理器视图将负责解除它们的绑定。

当然，您可以使用许多其他模式来处理导航菜单，但希望这对您有所帮助。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-03T13:19:58.933

试试这个：

```
routes: {
    '', 'index',
    'communities': 'index',
    'communities/:id': 'main',
    'communities/:id/:section': 'openSection'
},
openSection : function(id, section){
    if( section ){
        this.addNavigationBar();
    }
    switch( section ){
        case 'news' :
             this.news();
             break;
        case 'about' :
             this.about();
             break;
        default: 
             this.main();
    }
} 
```

如果您的网址包含一个部分，您将添加导航栏，然后像您一样调用您的正常方法。

# objective-c - NSUrlConnection 不起作用。我没有得到任何回应

> ID：11308143
> 
> 赞同：1
> 
> 时间：2012-07-03T09:32:35.197
> 
> 标签：objective-c, ios

在我的课堂上，我创建了一个 CBUrlConnection：

```
urlConnection = [NSURLConnection connectionWithRequest:request delegate:self];
[urlConnection start]; 
```

但我没有得到任何回应，这些委托方法永远不会被调用：

```
- (void)connection:(NSURLConnection *)connection didFinishLoadingData:(NSData *)data error:(NSError *)error
- (void)connection:(NSURLConnection *)connection didUpdateProgress:(CGFloat)percent
- (void)connection:(NSURLConnection *)connection didReceiveResponse:(NSURLResponse *)response 
```

请求似乎是正确的，服务器 url 肯定是正确的，并且服务器工作正常。有什么问题？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-03T10:00:51.087

我刚刚修复它......这是因为代码没有在主线程上运行。

对于可能感兴趣的人，我已经解决了：

```
dispatch_sync(dispatch_get_main_queue(), ^{

}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-03T10:39:02.583

您绝对可以`NSURLConnection`从`NSOperation`. 实际的技巧是`NSURLConnection`需要一个运行循环。请参阅[http://www.cocoaintheshell.com/2011/04/nsurlconnection-synchronous-asynchronous/](http://www.cocoaintheshell.com/2011/04/nsurlconnection-synchronous-asynchronous/)和[https://stackoverflow.com/a/6238764/171933](https://stackoverflow.com/a/6238764/171933)

*   约翰内斯

# python - 在单程中计算生成器的统计信息。Python

> ID：11308146
> 
> 赞同：2
> 
> 时间：2012-07-03T09:33:17.550
> 
> 标签：python, statistics, generator

使用生成器时，您只能一次拉出物品。另一种方法是将生成器加载到列表中并执行多次传递，但这会影响性能和内存分配。

谁能想到一种更好的方法来一次通过生成器计算以下指标。理想情况下，代码会计算计数、总和、平均值、标准差、最大值、最小值和您能想到的任何其他统计数据。

*更新*

这个要点中的初始可怕代码。请参阅此处的要点：[https ://gist.github.com/3038746](https://gist.github.com/3038746)

在这里使用来自@larsmans 的好建议是我采用的最终解决方案。使用命名元组真的很有帮助。

```
import random
from math import sqrt
from collections import namedtuple

def stat(gen):
    """Returns the namedtuple Stat as below."""
    Stat = namedtuple('Stat', 'total, sum, avg, sd, max, min')
    it = iter(gen)

    x0 = next(it)
    mx = mn = s = x0
    s2 = x0*x0
    n = 1

    for x in it:
        mx = max(mx, x)
        mn = min(mn, x)
        s += x
        s2 += x*x
        n += 1

    return Stat(n, s, s/n, sqrt(s2/n - s*s/n/n), mx, mn)

def random_int_list(size=100, start=0, end=1000):
    return (random.randrange(start,end,1) for x in xrange(size))

if __name__ == '__main__':
    r = stat(random_int_list())
    print r  #Stat(total=100, sum=56295, avg=562, sd=294.82537204250247, max=994, min=10) 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-03T09:40:45.753

```
def statistics(it):
    """Returns number of elements, sum, max, min"""

    it = iter(it)

    x0 = next(it)
    maximum = minimum = total = x0
    n = 1

    for x in it:
        maximum = max(maximum, x)
        minimum = min(minimum, x)
        total += x
        n += 1

    return n, total, maximum, minimum 
```

根据需要添加其他统计信息。`namedtuple`当要计算的统计数据数量变大时，请考虑使用 a 。

如果你想变得非常花哨，你可以构建一个统计收集器的 OO 层次结构（未经测试）：

```
class Summer(object):
    def __init__(self, x0=0):
        self.value = x0

    def add(self, x):
        self.value += x

class SquareSummer(Summer):
    def add(self, x):
        super(SquareSummer, self).add(x ** 2)

class Maxer(object):
    def __init__(self, x0):
        self.value = x0

    def add(self, x):
        self.value = max(self.value, x)

# example usage: collect([Maxer, Summer], iterable)
def collect(collectors, it):
    it = iter(it)

    x0 = next(it)
    collectors = [c(x0) for c in collectors]

    for x in it:
        for c in collectors:
            c.add(x)

    return [c.value for c in collectors] 
```

# firefox - Elisp：保存HTML文件并一键查看

> ID：11308147
> 
> 赞同：2
> 
> 时间：2012-07-03T09:33:18.080
> 
> 标签：firefox, emacs, elisp

这种作品，只有你必须已经打开了那个页面。理想情况下，它将转到正确的选项卡，或者，如果不可用，则打开一个新选项卡。为此，我必须以某种方式获取浏览器的状态（在我的情况下为 Iceweasel）。（我应该检查是否有浏览器，我现在意识到。但这更容易，我可以用 ps 做到这一点。）

```
(defun save-source-update-browser ()
  "Save file, go to Iceweasel, hit F5."
  (interactive)
  (save-buffer)
  (shell-command "wmctrl -a iceweasel")
  (shell-command
    (concat "echo -e 'KeyStrPress F5\nKeyStrRelease F5' | xmacroplay "
            (getenv "DISPLAY")
            " 1> /dev/null 2> /dev/null" ))) 
```

如何获取浏览器的状态，以便让它真正工作？现在它更新当前页面。如果该页面不是正在编辑的页面怎么办？那么查看和更新​​它是没有意义的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-03T16:33:04.183

Swank-js 可以为你做一些自动刷新。对于您所追求的而言，它可能有点过于强大；但是，它确实提供了一些您可能会觉得有用的额外功能。

您想要做的是设置一个粘性遥控器，然后您可以发出命令 `M-x slime-js-reload`。如果你愿意，你甚至可以将它绑定到 F5。

[https://github.com/swank-js/swank-js](https://github.com/swank-js/swank-js)

**披露：**我是 Swank.js 项目的维护者之一。

# c# - 通过asp.net中的循环将值添加到下拉列表

> ID：11308152
> 
> 赞同：1
> 
> 时间：2012-07-03T09:33:38.953
> 
> 标签：c#, asp.net

我正在开发网络应用程序，在此我想在注册表单中添加客户端浏览器上的所有月份值。

我是通过一一添加所有月份的值来手动完成的。我想知道是否可以通过在我的代码中放置一个 for 循环来添加所有月份。

如果可能的话，建议我。

谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-03T09:37:41.077

在这里，您可以在没有循环的情况下执行此操作：

```
List<string> months = new List<string>() { "January", "Feburary", "March", "April", "May", "June", "July", "August", "September", "October", "November", "December" };
dropDownList1.DataSource = months;
dropDownList1.DataBind(); 
```

或者如果你坚持使用循环：

```
List<string> months = new List<string>() { "January", "Feburary", "March", "April", "May", "June", "July", "August", "September", "October", "November", "December" };
foreach (string month in months)
{
     dropDownList1.Items.Add(month);
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-03T09:36:53.867

尝试使用此代码

```
foreach (string name in nameList)
{
    ddl.Items.Add(new ListItem(name));
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-03T09:38:31.917

这是一种选择...

```
for (int m = 1; m <= 12; m++)
{
   dd.Items.Add(new ListItem(new DateTime(2000, m, 1).ToString("MMMM"), m));
} 
```

**更新**

我知道这个问题已经“正确回答”，但考虑到@Jamie 的评论，我想我会使用相同的原则添加一个替代方案......

```
DateTime dt = new DateTime(2000, 1, 1);
for (int m = 0; m < 12; m++)
{
   dd.Items.Add(new ListItem(dt.AddMonths(m).ToString("MMMM"), m));
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-03T09:52:10.797

为什么要在代码中做呢？只需在 aspx 文件中静态添加月份：

```
<asp:DropDownList Id="ddlMonths" runat="server">
    <asp:ListItem Text="January" Value="1" />
    <asp:ListItem Text="February" Value="2" />
    <asp:ListItem Text="March" Value="3" />
    <asp:ListItem Text="April" Value="4" />
    ...
</asp:DropDownList> 
```

上次检查时，月份变化不大！:)

# matlab - 如何读取多个 .dat 文件并取平均值？

> ID：11308153
> 
> 赞同：0
> 
> 时间：2012-07-03T09:33:46.227
> 
> 标签：matlab, file-io

我在一个文件夹中有 100 个 .dat 文件。是否可以使用 MATLAB 一次读取所有文件并对这 100 个文件的第 5 列进行平均？这是其中一个 .dat 文件的示例。

![在此处输入图像描述](../Images/356c1098e0da32fc9fe9d57c77d87776.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-03T09:55:53.307

以下是一些帮助您入门的代码：

```
%# get list of 100 .dat files
pathToFolder = '.';
files = dir( fullfile(pathToFolder,'*.dat') );

%# read all files
data = cell(numel(files),1);
for i=1:numel(files)
    fid = fopen(fullfile(pathToFolder,files(i).name), 'rt');
    H = textscan(fid, '%s', 4, 'Delimiter','\n');
    C = textscan(fid, repmat('%f ',1,8), 'Delimiter',' ', ...
        'MultipleDelimsAsOne',true, 'CollectOutput',true);
    fclose(fid);
    H = H{1}; C = C{1};

    %# store numeric data and ignore the header lines
    data{i} = C;
end

%# we assume all tables have the same size
data = cat(3,data{:});
mn = mean(data(:,5,:),3)    %# mean of 5th col across 100 files 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-03T09:48:22.650

看看@这个[http://www.mathworks.com/matlabcentral/newsreader/view_thread/161967](http://www.mathworks.com/matlabcentral/newsreader/view_thread/161967)

你的整个问题都在这里得到了回答。你的答案是一个常见问题解答@matlab

[http://matlab.wikia.com/wiki/FAQ](http://matlab.wikia.com/wiki/FAQ)

祝你好运！

# javascript - 如何在日历控件中自动选择当前日期？

> ID：11308154
> 
> 赞同：-1
> 
> 时间：2012-07-03T09:33:49.197
> 
> 标签：javascript, jsp, struts

如何在 javascript 中自动选择当前日期？我正在使用 Calendar .js 显示日历，但不知道如何自动选择当前日期。请指导我

编辑：Calender.js

```
var oldLink = null;
// code to change the active stylesheet
function setActiveStyleSheet(link, title) {
  var i, a, main;
  for(i=0; (a = document.getElementsByTagName("link")[i]); i++) {
    if(a.getAttribute("rel").indexOf("style") != -1 && a.getAttribute("title")) {
      a.disabled = true;
      if(a.getAttribute("title") == title) a.disabled = false;
    }
  }
  if (oldLink) oldLink.style.fontWeight = 'normal';
  oldLink = link;
  link.style.fontWeight = 'bold';
  return false;
}

// This function gets called when the end-user clicks on some date.
function selected(cal, date) {
  cal.sel.value = date; 
  cal.sel.focus();
  // just update the date in the input field.
//  if ((cal.sel.id).substr(0,3) == "row" || cal.sel.id == "row3")

    cal.callCloseHandler();
}

function closeHandler(cal) {
  cal.hide();                        // hide the calendar
}

function showCalendar(id, format) {
  var el = document.getElementById(id);
  if (calendar != null) {
    // we already have some calendar created
    calendar.hide();      
    // so we hide it first.
  } else {
    // first-time call, create the calendar.
    var cal = new Calendar(false, null, selected, closeHandler);
    // uncomment the following line to hide the week numbers
    // cal.weekNumbers = false;
    calendar = cal;                  // remember it in the global var
    cal.setRange(1900, 2070);        // min/max year allowed.
    cal.create();
  }
  calendar.setDateFormat(format);    // set the specified date format
  calendar.parseDate(el.value);      // try to parse the text in field
  calendar.sel = el;                 // inform it what input field we use
  calendar.showAtElement(el);        // show the calendar below it

  return false;
}

var MINUTE = 60 * 1000;
var HOUR = 60 * MINUTE;
var DAY = 24 * HOUR;
var WEEK = 7 * DAY;

function isDisabled(date) {
  var today = new Date();
  return (Math.abs(date.getTime() - today.getTime()) / DAY) > 10;
}

function flatSelected(cal, date) {
  var el = document.getElementById("preview");
  el.innerHTML = date;
}

function showFlatCalendar() {
  var parent = document.getElementById("display");

  // construct a calendar giving only the "selected" handler.
  var cal = new Calendar(false, null, flatSelected);

  // hide week numbers
  cal.weekNumbers = false;

  // We want some dates to be disabled; see function isDisabled above
  cal.setDisabledHandler(isDisabled);
  cal.setDateFormat("DD, M d");

  cal.create(parent);

  cal.show();
}

function compareDate(date1, date2)
{
    var strErrMsg = "";

    tokens = date1.split("-");
    dd = tokens[0];
    mm = tokens[1];
        mm=mm-1;
    yyyy = tokens[2];
        dt1 = new Date(yyyy,mm,dd);

    tokens1 = date2.split("-");
    dd = tokens1[0];
    mm = tokens1[1];
        mm=mm-1;
    yyyy = tokens1[2];
        dt2 = new Date(yyyy,mm,dd);

    if(dt1.valueOf() <= dt2.valueOf())

        alert(dt1);
        alert(dt2);

        var difInDays = (parseInt) ((dt2.getTime() - dt1.getTime())/(1000*60*60*24));
        alert(difInDays);

        if(dt1.valueOf() <= dt2.valueOf())
    {
            return strErrMsg;
        }
    else
        {
            strErrMsg = "Cannot be Greater than ";
            return strErrMsg;
        }

        return strErrMsg;
}

 function nextDateAfterThreeDays(date1)
    {
      tokens = date1.split("-");

      dd = tokens[0];
      mm = parseInt(tokens[1]-1);
      yyyy = tokens[2];

      dt1 = new Date(yyyy,mm,dd);

      var time=dt1.getTime();
      time=time;
      dt1.setTime(time);

      var newDD = dt1.getDate()+3;
      var newMM = dt1.getMonth()+1;
      var newYY = dt1.getFullYear();

      if(newDD<10)
          newDD="0"+newDD;

      if(newMM<10)
          newMM="0"+newMM;

      date1=newDD+"-"+newMM+"-"+dt1.getFullYear();
      return date1;
    }

function compareBackDate(date1, date2)
{
        var strErrMsg = "";

        tokens = date1.split("-");

    dd = tokens[0];
    mm = parseInt(tokens[1])-1;
    yyyy = tokens[2];

    dt1 = new Date(yyyy,mm,dd);

    tokens = date2.split("-");

    dd = tokens[0];
    mm = parseInt(tokens[1])-1;
    yyyy = tokens[2];

    dt2 = new Date(yyyy,mm,dd);

        var difInDays = (parseInt) ((dt1.getTime() - dt2.getTime())/(1000*60*60*24));
        alert(""+difInDays);

        if(difInDays > 15 )
        {
            strErrMsg = " Should not be earlier six month than ";

        }

        return strErrMsg;
}

function convertDate(date1)
{

    var tokens1;
    var ddd;
    var mmm="";
    var mmm1;
    var yyyyy;
    var strErrMsg="";

    tokens1 = date1.split("-");
    ddd = tokens1[0];
    mmm = tokens1[1];
    yyyyy = tokens1[2];

    if(mmm=="Jan")
    {
      mmm1=01;
    }
    if(mmm=="Feb")
    {
      mmm1=02;  
    }
    if(mmm=="Mar")
    {
      mmm1=03;  
    }
    if(mmm=="Apr")
    {
      mmm1=04;  
    }
    if(mmm=="May")
    {
      mmm1=05;  
    }
    if(mmm=="Jun")
    {
      mmm1=06;  
    }
    if(mmm=="Jul")
    {
      mmm1=07;  
    }
    if(mmm=="Aug")
    {
      mmm1=08;  
    }
    if(mmm=="Sep")
    {
      mmm1=09;  
    }
    if(mmm=="Oct")
    {
      mmm1=10;  
    }
    if(mmm=="Nov")
    {
      mmm1=11;  
    }
    if(mmm=="Dec")
    {
      mmm1=12;  
    }

    strErrMsg=ddd+"-"+mmm1+"-"+yyyyy;

    return strErrMsg;

}

function isComboSelected(objComboName)
{
    var strErrMsg = "";
    var objForm = document.getElementsByTagName("form")[0];
    var objCombo = document.getElementsByName(objComboName)[0];

    if(objCombo.options[0].selected == true)
    {
        strErrMsg = "Please Select Value.";
         return strErrMsg;
    }

    return strErrMsg;
} 
```

编辑2：

我的代码

```
<script type="text/javascript">
function submitFun()
{
    var frm=document.forms[0];
    var fromDate=frm.lsReqRecDate.value;
    //var toDate=frm.toDate.value;
    var date1=convertDate(fromDate);
    //var date2=convertDate(toDate);

    var mm;var dd;var yyyy;
    var mm1;var dd1;var yyyy1;
    var d1=date1;

    var txtAppFrmDate=date1;
      if(d1.indexOf("-")!=-1)
      {
        dd=d1.substring(0,d1.indexOf("-"));
        mm=d1.substring(d1.indexOf("-")+1,d1.lastIndexOf("-"));
        yyyy=d1.substring(d1.lastIndexOf("-")+1,d1.length);

      }
      start_Date=new Date(yyyy,mm-1,dd);

      var fDate = txtAppFrmDate.split("-");
     // var tDate = txtAppToDate.split("-");

      var one_day=1000*60*60*24;
      var fdt = new Date((fDate[2]),(fDate[1]-1),(fDate[0]));

    frm.submit();
}
</script>

<html:form action="/exceptionNBReport.do" styleId="frmDatewise">

<TABLE class="ReportFilter">
    <THEAD>
        <TR>
            <TD colspan="2">NB Report Search</TD>
        </TR>
    </THEAD>
</TABLE>
<br><br>
<TABLE class="ReportFilter">

    <TR>
        <TD class="lbl" align="left">Last requirement received date</TD>
        <TD>
            <html:text property="lsReqRecDate" style="width:170;" readonly="readonly"/>
            <input type="reset" value="..." onclick="return showCalendar('lsReqRecDate','dd-MM-y');" name="reset"/>
        </TD>
    </TR>

    <TR>
        <TD colspan="2" align="center">
            <html:button property="search" value="Submit" onclick="submitFun()"/>
        </TD>
    </TR>
</TABLE>
</html:form> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-03T10:07:26.180

从 Calendar 的源代码中可以看出，您需要将所需的日期作为构造函数的第二个参数传递给 Calendar() 构造函数。有关详细信息，请参见第 16 行和第 588 行。

# c# - WPF 中的程序集不匹配异常

> ID：11308156
> 
> 赞同：0
> 
> 时间：2012-07-03T09:34:07.297
> 
> 标签：c#, wpf, user-controls, controls, wpftoolkit

我创建了一个需要可视化状态管理的自定义控件。由于 .Net 3.5 框架中不支持 VisualStateManager。所以我在内部使用 WPFToolkit v3.5.40619.1 以便在我的控制项目中使用 VisualStateManager。

现在，如果我通过添加对它的引用在单独的项目中使用该自定义控件，我还必须添加对 WPFToolkit.dll 的引用，因为我的控件在内部使用它。但是，如果我添加了一个不同版本的 WPFToolkit，即 3.5.40128.4，它与我的自定义控件中使用的版本不同，它会抛出异常“**无法加载文件或程序集 'WPFToolkit，版本 = 3.5.40128.4，文化 = 中性，PublicKeyToken = 51f5d93763bdb58e' 或其依赖项之一。定位的程序集的清单定义与程序集引用不匹配。（来自 HRESULT 的异常：0x80131040）对象“System.Windows.Controls.ControlTemplate”出错**。

如果我在内部使用自定义控件中使用的相同 WPFToolkit v3.5.40619.1，则没有问题。

谁能告诉我如何解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-03T11:22:38.320

右键单击解决方案资源管理器中的引用 => 属性。将 False 设置为特定版本。它将搜索具有相同短名称的任何参考

# sql-server - Delphi dbexpress SQL Server DLL 版本

> ID：11308158
> 
> 赞同：1
> 
> 时间：2012-07-03T09:34:16.787
> 
> 标签：sql-server, delphi, dll, version, dbexpress

是否有关于哪些版本的 dbExpress DLL 文件与各种版本的 Delphi 和 MS SQL Server 一起使用的指南？还是总是可以使用最新版本？

我特别考虑文件 dbxadapter.dll 和 dbxmss.dll。

我问的原因是我有一个安装，其中这两个文件中的访问冲突以看似随机的间隔发生。该应用程序是在 D2010 中编译的，我的客户端使用的是 SQL Server 2008。

# gwt - GWT 未解析的类型

> ID：11308160
> 
> 赞同：1
> 
> 时间：2012-07-03T09:34:29.597
> 
> 标签：gwt, maven, compilation, pom.xml

**情况：**

我有两个项目

*   项目 A.：原生 maven 项目“核心”（域）
*   项目 B.：一个 GWT maven 项目“应用程序”（GUI）
*   我使用 Eclipse Helios 和 GWT 2.4

**问题：**

我不能正确使用 A 中的 B.。

可以在 A. 中使用我自己的 B. 类，但我自己的类从其他 jar (org.javatuples) 导入类。

当 GWT 编译客户端代码时，它会抛出错误消息：

```
"[ERROR] <no source info>: public abstract class org.javatuples.Tuple
    extends java.lang.Object
    implements : Iterable<java.lang.Object>, java.io.Serializable, Comparable<org.javatuples.Tuple> 
```

这是完整的堆栈跟踪：

```
Compiling module org.dialoguemaps.dialoguemaps
   Validating newly compiled units
      Ignored 5 units with compilation errors in first pass.
Compile with -strict or with -logLevel set to TRACE or DEBUG to see all errors.
   [ERROR] An internal compiler exception occurred
com.google.gwt.dev.jjs.InternalCompilerException: Failed to get JNode
    at com.google.gwt.dev.jjs.impl.TypeMap.get(TypeMap.java:140)
    at com.google.gwt.dev.jjs.impl.TypeMap.get(TypeMap.java:71)
    at com.google.gwt.dev.jjs.impl.BuildTypeMap.getType(BuildTypeMap.java:730)
    at com.google.gwt.dev.jjs.impl.BuildTypeMap.createField(BuildTypeMap.java:570)
    at com.google.gwt.dev.jjs.impl.BuildTypeMap.access$300(BuildTypeMap.java:99)
    at com.google.gwt.dev.jjs.impl.BuildTypeMap$BuildDeclMapVisitor.visit(BuildTypeMap.java:180)
    at org.eclipse.jdt.internal.compiler.ast.FieldDeclaration.traverse(FieldDeclaration.java:285)
    at org.eclipse.jdt.internal.compiler.ast.TypeDeclaration.traverse(TypeDeclaration.java:1232)
    at org.eclipse.jdt.internal.compiler.ast.CompilationUnitDeclaration.traverse(CompilationUnitDeclaration.java:687)
    at com.google.gwt.dev.jjs.impl.BuildTypeMap.createPeersForNonTypeDecls(BuildTypeMap.java:637)
    at com.google.gwt.dev.jjs.impl.BuildTypeMap.exec(BuildTypeMap.java:514)
    at com.google.gwt.dev.jjs.impl.BuildTypeMap.exec(BuildTypeMap.java:523)
    at com.google.gwt.dev.jjs.JavaToJavaScriptCompiler.precompile(JavaToJavaScriptCompiler.java:599)
    at com.google.gwt.dev.jjs.JavaScriptCompiler.precompile(JavaScriptCompiler.java:33)
    at com.google.gwt.dev.Precompile.precompile(Precompile.java:284)
    at com.google.gwt.dev.Precompile.precompile(Precompile.java:233)
    at com.google.gwt.dev.Precompile.precompile(Precompile.java:145)
    at com.google.gwt.dev.Compiler.run(Compiler.java:232)
    at com.google.gwt.dev.Compiler.run(Compiler.java:198)
    at com.google.gwt.dev.Compiler$1.run(Compiler.java:170)
    at com.google.gwt.dev.CompileTaskRunner.doRun(CompileTaskRunner.java:88)
    at com.google.gwt.dev.CompileTaskRunner.runWithAppropriateLogger(CompileTaskRunner.java:82)
    at com.google.gwt.dev.Compiler.main(Compiler.java:177)
      [ERROR] <no source info>: public abstract class org.javatuples.Tuple
    extends java.lang.Object
    implements : Iterable<java.lang.Object>, java.io.Serializable, Comparable<org.javatuples.Tuple>
/*   fields   */
private static final [unresolved] long serialVersionUID
private final [unresolved] java.lang.Object[] valueArray
private final [unresolved] List<java.lang.Object> valueList
/*   methods   */
protected transient void <init>(java.lang.Object[]) 
protected transient void <init>(int, java.lang.Object[]) 
public int compareTo(org.javatuples.Tuple) 
[unresolved] public final boolean contains(java.lang.Object) 
[unresolved] public final boolean containsAll(Collection<?>) 
[unresolved] public final transient boolean containsAll(java.lang.Object[]) 
public final boolean equals(java.lang.Object) 
public abstract int getSize() 
[unresolved] public final java.lang.Object getValue(int) 
public final int hashCode() 
[unresolved] public final int indexOf(java.lang.Object) 
public final Iterator<java.lang.Object> iterator() 
[unresolved] public final int lastIndexOf(java.lang.Object) 
[unresolved] public final java.lang.Object[] toArray() 
[unresolved] public final List<java.lang.Object> toList() 
public final java.lang.String toString() 
org.eclipse.jdt.internal.compiler.lookup.BinaryTypeBinding
[ERROR] at MultiID.java(17): private final Tuple _value;
 org.eclipse.jdt.internal.compiler.ast.FieldDeclaration 
```

这是来自 A. 的 pom.xml 和来自 B. 的 pom.xml：

*pom.xml A.：*

```
<?xml version="1.0"?>
<project xsi:schemaLocation="http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd" xmlns="http://maven.apache.org/POM/4.0.0"
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
  <modelVersion>4.0.0</modelVersion>
  <groupId>org.dialoguemaps</groupId>
  <artifactId>core</artifactId>
  <version>0.0.1-SNAPSHOT</version>
  <name>core</name>
  <url>http://maven.apache.org</url>
  <properties>
    <project.build.sourceEncoding>UTF-8</project.build.sourceEncoding>
  </properties>
  <dependencies>
    <dependency>
      <groupId>junit</groupId>
      <artifactId>junit</artifactId>
      <version>4.0</version>
      <scope>compile</scope>
    </dependency>
    <dependency>
      <groupId>org.javatuples</groupId>
      <artifactId>javatuples</artifactId>
      <version>1.2</version>
      <scope>runtime</scope>
    </dependency>
  </dependencies>
  <repositories>
    <repository>
      <snapshots>
        <enabled>false</enabled>
      </snapshots>
      <id>central</id>
      <name>Maven Repository Switchboard</name>
      <url>http://repo1.maven.org/maven2</url>
    </repository>
  </repositories>
  <pluginRepositories>
    <pluginRepository>
      <releases>
        <updatePolicy>never</updatePolicy>
      </releases>
      <snapshots>
        <enabled>false</enabled>
      </snapshots>
      <id>central</id>
      <name>Maven Plugin Repository</name>
      <url>http://repo1.maven.org/maven2</url>
    </pluginRepository>
  </pluginRepositories>
  <build>
    <sourceDirectory>/home/arno/.workspace/dialoguemaps-core/src/main/java</sourceDirectory>
    <scriptSourceDirectory>/home/arno/.workspace/dialoguemaps-core/src/main/scripts</scriptSourceDirectory>
    <testSourceDirectory>/home/arno/.workspace/dialoguemaps-core/src/test/java</testSourceDirectory>
    <outputDirectory>/home/arno/.workspace/dialoguemaps-core/target/classes</outputDirectory>
    <testOutputDirectory>/home/arno/.workspace/dialoguemaps-core/target/test-classes</testOutputDirectory>
    <resources>
      <resource>
        <directory>/home/arno/.workspace/dialoguemaps-core/src/main/resources</directory>
      </resource>
    </resources>
    <testResources>
      <testResource>
        <directory>/home/arno/.workspace/dialoguemaps-core/src/test/resources</directory>
      </testResource>
    </testResources>
    <directory>/home/arno/.workspace/dialoguemaps-core/target</directory>
    <finalName>core-0.0.1-SNAPSHOT</finalName>
    <pluginManagement>
      <plugins>
        <plugin>
          <artifactId>maven-antrun-plugin</artifactId>
          <version>1.3</version>
        </plugin>
        <plugin>
          <artifactId>maven-assembly-plugin</artifactId>
          <version>2.2-beta-5</version>
        </plugin>
        <plugin>
          <artifactId>maven-dependency-plugin</artifactId>
          <version>2.1</version>
        </plugin>
        <plugin>
          <artifactId>maven-release-plugin</artifactId>
          <version>2.0</version>
        </plugin>
      </plugins>
    </pluginManagement>
    <plugins>
      <plugin>
        <artifactId>maven-clean-plugin</artifactId>
        <version>2.4.1</version>
        <executions>
          <execution>
            <id>default-clean</id>
            <phase>clean</phase>
            <goals>
              <goal>clean</goal>
            </goals>
          </execution>
        </executions>
      </plugin>
      <plugin>
        <artifactId>maven-install-plugin</artifactId>
        <version>2.3.1</version>
        <executions>
          <execution>
            <id>default-install</id>
            <phase>install</phase>
            <goals>
              <goal>install</goal>
            </goals>
          </execution>
        </executions>
      </plugin>
      <plugin>
        <artifactId>maven-resources-plugin</artifactId>
        <version>2.4.3</version>
        <executions>
          <execution>
            <id>default-resources</id>
            <phase>process-resources</phase>
            <goals>
              <goal>resources</goal>
            </goals>
          </execution>
          <execution>
            <id>default-testResources</id>
            <phase>process-test-resources</phase>
            <goals>
              <goal>testResources</goal>
            </goals>
          </execution>
        </executions>
      </plugin>
      <plugin>
        <artifactId>maven-surefire-plugin</artifactId>
        <version>2.7.1</version>
        <executions>
          <execution>
            <id>default-test</id>
            <phase>test</phase>
            <goals>
              <goal>test</goal>
            </goals>
          </execution>
        </executions>
      </plugin>
      <plugin>
        <artifactId>maven-compiler-plugin</artifactId>
        <version>2.3.2</version>
        <executions>
          <execution>
            <id>default-testCompile</id>
            <phase>test-compile</phase>
            <goals>
              <goal>testCompile</goal>
            </goals>
          </execution>
          <execution>
            <id>default-compile</id>
            <phase>compile</phase>
            <goals>
              <goal>compile</goal>
            </goals>
          </execution>
        </executions>
      </plugin>
      <plugin>
        <artifactId>maven-jar-plugin</artifactId>
        <version>2.3.1</version>
        <executions>
          <execution>
            <id>default-jar</id>
            <phase>package</phase>
            <goals>
              <goal>jar</goal>
            </goals>
          </execution>
        </executions>
      </plugin>
      <plugin>
        <artifactId>maven-deploy-plugin</artifactId>
        <version>2.5</version>
        <executions>
          <execution>
            <id>default-deploy</id>
            <phase>deploy</phase>
            <goals>
              <goal>deploy</goal>
            </goals>
          </execution>
        </executions>
      </plugin>
      <plugin>
        <artifactId>maven-site-plugin</artifactId>
        <version>2.0.1</version>
        <executions>
          <execution>
            <id>default-site</id>
            <phase>site</phase>
            <goals>
              <goal>site</goal>
            </goals>
            <configuration>
              <outputDirectory>/home/arno/.workspace/dialoguemaps-core/target/site</outputDirectory>
              <reportPlugins>
                <reportPlugin>
                  <groupId>org.apache.maven.plugins</groupId>
                  <artifactId>maven-project-info-reports-plugin</artifactId>
                </reportPlugin>
              </reportPlugins>
            </configuration>
          </execution>
          <execution>
            <id>default-deploy</id>
            <phase>site-deploy</phase>
            <goals>
              <goal>deploy</goal>
            </goals>
            <configuration>
              <outputDirectory>/home/arno/.workspace/dialoguemaps-core/target/site</outputDirectory>
              <reportPlugins>
                <reportPlugin>
                  <groupId>org.apache.maven.plugins</groupId>
                  <artifactId>maven-project-info-reports-plugin</artifactId>
                </reportPlugin>
              </reportPlugins>
            </configuration>
          </execution>
        </executions>
        <configuration>
          <outputDirectory>/home/arno/.workspace/dialoguemaps-core/target/site</outputDirectory>
          <reportPlugins>
            <reportPlugin>
              <groupId>org.apache.maven.plugins</groupId>
              <artifactId>maven-project-info-reports-plugin</artifactId>
            </reportPlugin>
          </reportPlugins>
        </configuration>
      </plugin>
    </plugins>
  </build>
  <reporting>
    <outputDirectory>/home/arno/.workspace/dialoguemaps-core/target/site</outputDirectory>
  </reporting>
</project> 
```

*pom.xml B.：*

```
<?xml version="1.0" encoding="UTF-8"?>
<project xmlns="http://maven.apache.org/POM/4.0.0" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xsi:schemaLocation="http://maven.apache.org/POM/4.0.0 http://maven.apache.org/maven-v4_0_0.xsd">

    <!-- POM file generated with GWT webAppCreator -->
    <modelVersion>4.0.0</modelVersion>
    <groupId>org.dialoguemaps</groupId>
    <artifactId>dialoguemaps</artifactId>
    <packaging>war</packaging>
    <version>1.0-SNAPSHOT</version>
    <name>GWT Maven Archetype</name>

    <properties>
        <!-- Convenience property to set the GWT version -->
        <gwtVersion>2.4.0</gwtVersion>
        <!-- GWT needs at least java 1.5 -->
        <webappDirectory>${project.build.directory}/${project.build.finalName}</webappDirectory>
        <project.build.sourceEncoding>UTF-8</project.build.sourceEncoding>
    </properties>

    <dependencies>
        <dependency>
            <groupId>com.google.gwt</groupId>
            <artifactId>gwt-servlet</artifactId>
            <version>${gwtVersion}</version>
            <scope>runtime</scope>
        </dependency>
        <dependency>
            <groupId>com.google.gwt</groupId>
            <artifactId>gwt-user</artifactId>
            <version>${gwtVersion}</version>
            <scope>provided</scope>
        </dependency>
        <dependency>
            <groupId>junit</groupId>
            <artifactId>junit</artifactId>
            <version>4.7</version>
            <scope>test</scope>
        </dependency>
        <dependency>
            <groupId>javax.validation</groupId>
            <artifactId>validation-api</artifactId>
            <version>1.0.0.GA</version>
            <scope>test</scope>
        </dependency>
        <dependency>
            <groupId>javax.validation</groupId>
            <artifactId>validation-api</artifactId>
            <version>1.0.0.GA</version>
            <classifier>sources</classifier>
            <scope>test</scope>
        </dependency>
        <dependency>
            <groupId>com.smartgwt</groupId>
            <artifactId>smartgwt</artifactId>
            <version>3.0</version>
        </dependency>
        <dependency>
            <groupId>org.vectomatic</groupId>
            <artifactId>lib-gwt-svg</artifactId>
            <version>0.5.5</version>
        </dependency>
        <dependency>
            <groupId>org.javatuples</groupId>
            <artifactId>javatuples</artifactId>
            <version>1.2</version>
            <scope>runtime</scope>
        </dependency>
    </dependencies>

    <build>
        <!-- Generate compiled stuff in the folder used for developing mode -->
        <outputDirectory>${webappDirectory}/WEB-INF/classes</outputDirectory>

        <plugins>

            <!-- GWT Maven Plugin -->
            <plugin>
                <groupId>org.codehaus.mojo</groupId>
                <artifactId>gwt-maven-plugin</artifactId>
                <version>2.4.0</version>
                <executions>
                    <execution>
                        <goals>
                            <goal>compile</goal>
                            <goal>test</goal>
                            <goal>i18n</goal>
                            <goal>generateAsync</goal>
                        </goals>
                    </execution>
                </executions>
                <!-- Plugin configuration. There are many available options, see gwt-maven-plugin 
                    documentation at codehaus.org -->
                <configuration>
                    <runTarget>dialoguemaps.html</runTarget>
                    <hostedWebapp>${webappDirectory}</hostedWebapp>
                    <i18nMessagesBundle>org.dialoguemaps.client.Messages</i18nMessagesBundle>
                </configuration>
            </plugin>

            <!-- Copy static web files before executing gwt:run -->
            <plugin>
                <groupId>org.apache.maven.plugins</groupId>
                <artifactId>maven-war-plugin</artifactId>
                <version>2.1.1</version>
                <executions>
                    <execution>
                        <phase>compile</phase>
                        <goals>
                            <goal>exploded</goal>
                        </goals>
                    </execution>
                </executions>
                <configuration>
                    <webappDirectory>${webappDirectory}</webappDirectory>
                </configuration>
            </plugin>
            <plugin>
                <groupId>org.apache.maven.plugins</groupId>
                <artifactId>maven-compiler-plugin</artifactId>
                <version>2.3.2</version>
                <configuration>
                    <source>1.5</source>
                    <target>1.5</target>
                </configuration>
            </plugin>
        </plugins>
    </build>

    <repositories>
        <repository>
            <id>smartclient</id>
            <name>smartclient.com</name>
            <url>http://www.smartclient.com/maven2</url>
        </repository>
    </repositories>

</project> 
```

**问题：**

*   这是一个maven依赖问题吗？
*   这是一个 GWT 问题，因为 GWT 无法编译类类型元组吗？
*   你有解决方案或想法如何解决这个问题吗？

问候阿诺

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-03T16:47:39.457

您不能在 GWT 客户端代码中使用或引用 javatuples，因为该库使用无法编译为 javascript 代码的 java 功能。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-03T09:38:13.680

项目 如果您不想将 jar 用于另一个 GWT 项目，则必须将其与源代码一起交付。在它的 pom build 部分添加这个：

```
<resources>
  <resource>
    <directory>src/main/java</directory>
    <includes>
      <include>**/client/**</include>
      <include>**/*.gwt.xml</include>
    </includes>
  </resource>   
</resources> 
```

将“客户端”包含模式调整为您的项目源路径并重建。一旦 .java 类可用于子项目，它将编译。

# java - Magento OPC 继续按钮不起作用

> ID：11308171
> 
> 赞同：0
> 
> 时间：2012-07-03T09:35:11.007
> 
> 标签：java, php, ajax, debugging, magento

我刚刚开始对全新安装的 magento 1.7 的结帐区域进行剥皮。

完成计费/登录区域后，我试图转到送货地址，似乎继续按钮无法保存信息。

Firefox 控制台在 opcheckout.js 上报告以下错误（第 92 行）

```
container is null
[Break On This Error]   

container.addClassName('disabled'); 
```

chrome 控制台在同一行报告以下错误

```
Uncaught TypeError: Cannot call method 'addClassName' of null /skin/frontend/base/default/js/opcheckout.js:92
Checkout.setLoadWaiting /skin/frontend/base/default/js/opcheckout.js:92
Billing.save /skin/frontend/base/default/js/opcheckout.js:307
onclick 
```

关于表单的更改，除了在一些 li 中添加一个新的 div 并删除公司字段之外，我没有对 billing.phtml 进行任何更改（发布在下面）

```
<form id="co-billing-form" action="">
<fieldset>
    <ul class="form-list">
    <?php if ($this->customerHasAddresses()): ?>
        <li class="wide">
            <label for="billing-address-select"><?php echo $this->__('Select a billing address from your address book or enter a new address.') ?></label>
            <div class="input-box">
                <?php echo $this->getAddressesHtmlSelect('billing') ?>
            </div>
        </li>
    <?php endif; ?>
    <li id="billing-new-address-form"<?php if ($this->customerHasAddresses()): ?> style="display:none;"<?php endif; ?>>
        <fieldset>
            <input type="hidden" name="billing[address_id]" value="<?php echo $this->getAddress()->getId() ?>" id="billing:address_id" />
            <ul>
                <li class="fields"><?php echo $this->getLayout()->createBlock('customer/widget_name')->setObject($this->getAddress()->getFirstname() ? $this->getAddress() : $this->getQuote()->getCustomer())->setForceUseCustomerRequiredAttributes(!$this->isCustomerLoggedIn())->setFieldIdFormat('billing:%s')->setFieldNameFormat('billing[%s]')->toHtml() ?></li>
                <li class="fields">
                    <!--<div class="field">
                        <label for="billing:company"><?php echo $this->__('Company') ?></label>
                        <div class="input-box">
                            <input type="text" id="billing:company" name="billing[company]" value="<?php echo $this->escapeHtml($this->getAddress()->getCompany()) ?>" title="<?php echo $this->__('Company') ?>" class="input-text <?php echo $this->helper('customer/address')->getAttributeValidationClass('company') ?>" />
                        </div>
                    </div>-->
                    <!--<input type="hidden" id="billing:company" name="billing[company]" value="none"/>-->

        <?php if(!$this->isCustomerLoggedIn()): ?>
        <div class="fullfield">
                    <div class="field">
                        <label for="billing:email" class="required"><em>*</em><?php echo $this->__('Email Address') ?></label>
                        <div class="input-box">
                            <input type="text" name="billing[email]" id="billing:email" value="<?php echo $this->escapeHtml($this->getAddress()->getEmail()) ?>" title="<?php echo $this->__('Email Address') ?>" class="input-text validate-email required-entry" />
                        </div>
                    </div>
        </div>
        <?php endif; ?>
                </li>
        <?php $_streetValidationClass = $this->helper('customer/address')->getAttributeValidationClass('street'); ?>
                <li class="wide">
                <div class="fullfield">
                    <label for="billing:street1" class="required"><em>*</em><?php echo $this->__('Address') ?></label>
                    <div class="input-box">
                        <input type="text" title="<?php echo $this->__('Street Address') ?>" name="billing[street][]" id="billing:street1" value="<?php echo $this->escapeHtml($this->getAddress()->getStreet(1)) ?>" class="input-text <?php echo $_streetValidationClass ?>" />
                    </div>
                </div>
                </li>
        <?php $_streetValidationClass = trim(str_replace('required-entry', '', $_streetValidationClass)); ?>
        <?php for ($_i = 2, $_n = $this->helper('customer/address')->getStreetLines(); $_i <= $_n; $_i++): ?>
                <li class="wide">
                <div class="fullfield">
                    <div class="input-box">
                        <input type="text" title="<?php echo $this->__('Street Address %s', $_i) ?>" name="billing[street][]" id="billing:street<?php echo $_i ?>" value="<?php echo $this->escapeHtml($this->getAddress()->getStreet($_i)) ?>" class="input-text <?php echo $_streetValidationClass ?>" />
                    </div>
                </div>
                </li>
        <?php endfor; ?>
                <?php if ($this->helper('customer/address')->isVatAttributeVisible()) : ?>
                <li class="wide">
                    <label for="billing:vat_id"><?php echo $this->__('VAT Number') ?></label>
                    <div class="input-box">
                        <input type="text" id="billing:vat_id" name="billing[vat_id]" value="<?php echo $this->escapeHtml($this->getAddress()->getVatId()) ?>" title="<?php echo $this->__('VAT Number') ?>" class="input-text <?php echo $this->helper('customer/address')->getAttributeValidationClass('vat_id') ?>" />
                    </div>
                </li>
                <?php endif; ?>
                <li class="fields">
                    <div class="field">
                        <label for="billing:city" class="required"><em>*</em><?php echo $this->__('City') ?></label>
                        <div class="input-box">
                            <input type="text" title="<?php echo $this->__('City') ?>" name="billing[city]" value="<?php echo $this->escapeHtml($this->getAddress()->getCity()) ?>" class="input-text <?php echo $this->helper('customer/address')->getAttributeValidationClass('city') ?>" id="billing:city" />
                        </div>
                    </div>
                    <div class="field">
                        <label for="billing:region_id" class="required"><em>*</em><?php echo $this->__('County') ?></label>
                        <div class="input-box">
                            <select id="billing:region_id" name="billing[region_id]" title="<?php echo $this->__('State/Province') ?>" class="validate-select" style="display:none;">
                                <option value=""><?php echo $this->__('Please select County, State or Region') ?></option>
                            </select>
                            <script type="text/javascript">
                            //<![CDATA[
                                $('billing:region_id').setAttribute('defaultValue',  "<?php echo $this->getAddress()->getRegionId() ?>");
                            //]]>
                            </script>
                            <input type="text" id="billing:region" name="billing[region]" value="<?php echo $this->escapeHtml($this->getAddress()->getRegion()) ?>"  title="<?php echo $this->__('State/Province') ?>" class="input-text <?php echo $this->helper('customer/address')->getAttributeValidationClass('region') ?>" style="display:none;" />
                        </div>
                    </div>
                </li>
                <li class="fields">
                    <div class="field">
                        <label for="billing:postcode" class="required"><em>*</em><?php echo $this->__('Postcode') ?></label>
                        <div class="input-box">
                            <input type="text" title="<?php echo $this->__('Zip/Postal Code') ?>" name="billing[postcode]" id="billing:postcode" value="<?php echo $this->escapeHtml($this->getAddress()->getPostcode()) ?>" class="input-text validate-zip-international <?php echo $this->helper('customer/address')->getAttributeValidationClass('postcode') ?>" />
                        </div>
                    </div>
                    <div class="field">
                        <label for="billing:country_id" class="required"><em>*</em><?php echo $this->__('Country') ?></label>
                        <div class="input-box">
                            <?php echo $this->getCountryHtmlSelect('billing') ?>
                        </div>
                    </div>
                </li>
                <li class="fields">
                    <div class="field">
                        <label for="billing:telephone" class="required"><em>*</em><?php echo $this->__('Telephone') ?></label>
                        <div class="input-box">
                            <input type="text" name="billing[telephone]" value="<?php echo $this->escapeHtml($this->getAddress()->getTelephone()) ?>" title="<?php echo $this->__('Telephone') ?>" class="input-text <?php echo $this->helper('customer/address')->getAttributeValidationClass('telephone') ?>" id="billing:telephone" />
                        </div>
                    </div>

                </li>
                <?php if(!$this->isCustomerLoggedIn()): ?>

        <?php $_dob = $this->getLayout()->createBlock('customer/widget_dob') ?>
        <?php $_gender = $this->getLayout()->createBlock('customer/widget_gender') ?>
            <?php if ($_dob->isEnabled() || $_gender->isEnabled()): ?>
                <li class="fields">
                <?php if ($_dob->isEnabled()): ?>
                    <div class="field">
                        <?php echo $_dob->setDate($this->getQuote()->getCustomerDob())->setFieldIdFormat('billing:%s')->setFieldNameFormat('billing[%s]')->toHtml() ?>
                    </div>
                <?php endif; ?>
                <?php if ($_gender->isEnabled()): ?>
                    <div class="field">
                        <?php echo $_gender->setGender($this->getQuote()->getCustomerGender())->setFieldIdFormat('billing:%s')->setFieldNameFormat('billing[%s]')->toHtml() ?>
                    </div>
                <?php endif ?>
                </li>
            <?php endif ?>

            <?php if ($this->isTaxvatEnabled()):?>
                <li><?php echo $this->getTaxvatHtml() ?></li>
            <?php endif; ?>

                <li class="fields" id="register-customer-password">
                    <div class="field">
                        <label for="billing:customer_password" class="required"><em>*</em><?php echo $this->__('Password') ?></label>
                        <div class="input-box">
                            <input type="password" name="billing[customer_password]" id="billing:customer_password" title="<?php echo $this->__('Password') ?>" class="input-text required-entry validate-password" />
                        </div>
                    </div>
                    <div class="field">
                        <label for="billing:confirm_password" class="required"><em>*</em><?php echo $this->__('Confirm Password') ?></label>
                        <div class="input-box">
                            <input type="password" name="billing[confirm_password]" title="<?php echo $this->__('Confirm Password') ?>" id="billing:confirm_password" class="input-text required-entry validate-cpassword" />
                        </div>
                    </div>
                </li>
                <?php echo $this->getChildHtml('persistent.remember.me'); ?>
                <?php endif; ?>
                <?php if ($this->isCustomerLoggedIn() && $this->customerHasAddresses()):?>
                    <li class="control">
                        <input type="checkbox" name="billing[save_in_address_book]" value="1" title="<?php echo $this->__('Save in address book') ?>" id="billing:save_in_address_book" onchange="if(window.shipping) shipping.setSameAsBilling(false);"<?php if ($this->getAddress()->getSaveInAddressBook()):?> checked="checked"<?php endif;?> class="checkbox" /><label for="billing:save_in_address_book"><?php echo $this->__('Save in address book') ?></label>
                    </li>
                <?php else:?>
                    <li class="no-display"><input type="hidden" name="billing[save_in_address_book]" value="1" /></li>
                <?php endif; ?>
                <?php echo $this->getChildHtml('form.additional.info'); ?>
            </ul>
            <?php echo $this->getChildHtml('persistent.remember.me.tooltip'); ?>
        </fieldset>
     </li>
    <?php if ($this->canShip()): ?>
        <li class="control">
            <input type="radio" name="billing[use_for_shipping]" id="billing:use_for_shipping_yes" value="1"<?php if ($this->isUseBillingAddressForShipping()) {?> checked="checked"<?php }?> title="<?php echo  $this->__('Deliver to this address') ?>" onclick="$('shipping:same_as_billing').checked = true;" class="radio" /><label for="billing:use_for_shipping_yes"><?php echo  $this->__('Deliver to this address') ?></label></li>
        <li class="control">
            <input type="radio" name="billing[use_for_shipping]" id="billing:use_for_shipping_no" value="0"<?php if (!$this->isUseBillingAddressForShipping()) {?> checked="checked"<?php }?> title="<?php echo $this->__('Deliver to different address') ?>" onclick="$('shipping:same_as_billing').checked = false;" class="radio" /><label for="billing:use_for_shipping_no"><?php echo $this->__('Deliver to different address') ?></label>
        </li>
    <?php endif; ?>
    </ul>
    <?php if (!$this->canShip()): ?>
        <input type="hidden" name="billing[use_for_shipping]" value="1" />
    <?php endif; ?>

        <p class="required pink fleft" style="margin-top:20px;"><?php echo $this->__('* Required Fields') ?></p>
        <button type="button" title="<?php echo $this->__('CONTINUE') ?>" class="pinkbuttonopc fright" onclick="billing.save()"><span><?php echo $this->__('CONTINUE') ?></span></button>
        <span class="please-wait" id="billing-please-wait" style="display:none;">
            <img src="<?php echo $this->getSkinUrl('images/opc-ajax-loader.gif') ?>" alt="<?php echo $this->__('Loading next step...') ?>" title="<?php echo $this->__('Loading next step...') ?>" class="v-middle" /> <?php echo $this->__('Loading next step...') ?>
        </span>

</fieldset>
</form>
<script type="text/javascript">
//<![CDATA[
    var billing = new Billing('co-billing-form', '<?php echo $this->getUrl('checkout/onepage/getAddress') ?>address/', '<?php echo $this->getUrl('checkout/onepage/saveBilling') ?>');
    var billingForm = new VarienForm('co-billing-form');

    //billingForm.setElementsRelation('billing:country_id', 'billing:region', '<?php echo $this->getUrl('directory/json/childRegion') ?>', '<?php echo $this->__('Select State/Province...') ?>');
    $('billing-address-select') && billing.newAddress(!$('billing-address-select').value);

    var billingRegionUpdater = new RegionUpdater('billing:country_id', 'billing:region', 'billing:region_id', <?php echo $this->helper('directory')->getRegionJson() ?>, undefined, 'billing:postcode');
    if ($('onepage-guest-register-button')) {
        Event.observe($('onepage-guest-register-button'), 'click', function(event) {
            var billingRememberMe = $('co-billing-form').select('#remember-me-box');
            if (billingRememberMe.length > 0) {
                if ($('login:guest') && $('login:guest').checked) {
                    billingRememberMe[0].hide();
                } else if ($('login:register') && ($('login:register').checked || $('login:register').type == 'hidden')) {
                    billingRememberMe[0].show();
                }
            }
        });
    }
//]]>
</script> 
```

我对 ajax 和 opc 的工作原理还不够熟悉，无法调试此消息。如果有人能提供帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-03T10:40:28.500

问题是您删除了以下必需的容器：

```
<div class="buttons-set" id="billing-buttons-container"> .. </div> 
```

# java - 如何在java中将多个xml文件组合成一个字符串

> ID：11308177
> 
> 赞同：1
> 
> 时间：2012-07-03T09:35:38.050
> 
> 标签：java, xml

我有几个具有不同节点结构的 xml 文件。我想从这些 xml 文件中的每一个中提取 xml 内容并将前者（xml 内容）存储为单个字符串。

我正在使用以下代码来实现它

```
 String xmlContent = FileUtils.readFileToString(new File("xyz"), "UTF-8"); 
```

但我面临以下错误

```
 [Fatal Error] :5616:15: The processing instruction target matching "[xX][mM][lL]" is not allowed. 
```

经过搜索，我发现发生上述错误是因为“”存在于 xml 内容之间。

我应该先修改 xml 文件还是有其他方法来处理这种情况？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-03T09:45:55.517

使用文本编辑器编辑您的 xml 文件。在第一行的最开始，查找并删除任何前导空格。

xml 的以下第一行在该行的第一个“<”之前不能有任何空格或字符。

```
<?xml version="1.0" encoding="UTF-8"?> 
```

再次尝试导入。参考[http://www-01.ibm.com/support/docview.wss?uid=swg21262072](http://www-01.ibm.com/support/docview.wss?uid=swg21262072)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-03T09:46:40.063

> 我应该先修改xml文件吗...

是的你应该。

> ...还有其他方法可以处理这种情况吗？

好吧，您可以尝试围绕您的 XML 无效这一事实进行编程：

*   如果问题很小且孤立，您可以尝试对文件进行初始传递以“修复”它。然后使用常规 XML 解析器对其进行解析。

*   如果问题过于普遍，您可以尝试将 XML 视为文本并尝试在未正确解析的情况下提取数据。

但是这两种方法的问题在于，当你试图做好事失败时，你最终可能会得到错误或丢失的数据。例如，因为 XML 以不同的方式变坏了。

所以我的建议是要么使用文本编辑器（如果这是一次）手动修复 XML，要么让创建它的人/任何人从源头解决问题。

* * *

顺便说一句，一旦您解决了 XML 语法问题，您就可以只使用 XSLT 来挑选和合并 XML 文件。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-04T03:24:18.580

经过一番努力，我将内容合并到一个 xml 文件中：) 以下方法删除了 xml 编码节点并将 xml 文件字符串化。

```
 public String stringifyXmlFiles(String fileName) {
        File file = new File(fileName);
    String content = "";
    DocumentBuilderFactory factory = DocumentBuilderFactory.newInstance();
    try {
        DocumentBuilder builder = factory.newDocumentBuilder();
        Document document = builder.parse(new FileInputStream(file));

        TransformerFactory tranFactory = TransformerFactory.newInstance();
        Transformer aTransformer = tranFactory.newTransformer();
        aTransformer.setOutputProperty(OutputKeys.OMIT_XML_DECLARATION,
                "yes");
        aTransformer.setOutputProperty(OutputKeys.INDENT, "yes");
        Source src = new DOMSource(document);
        ByteArrayOutputStream stream = new ByteArrayOutputStream();
        Result dest = new StreamResult(stream);
        aTransformer.transform(src, dest);
        content = stream.toString();
    } catch (ParserConfigurationException e) {
        logger.error(e.getMessage(), e);
    } catch (SAXException e) {
        logger.error(e.getMessage(), e);
    } catch (IOException e) {
        logger.error(e.getMessage(), e);
    } catch (TransformerConfigurationException e) {
        logger.error(e.getMessage(), e);
    } catch (TransformerException e) {
        logger.error(e.getMessage(), e);
    }
    return content;
   } 
```

# c# - 序列化包含派生类的 IEnumerable：循环引用问题

> ID：11308180
> 
> 赞同：0
> 
> 时间：2012-07-03T09:35:49.243
> 
> 标签：c#, .net, wcf, serialization, xml-serialization

我正在尝试使用以下代码序列化 IEnumerable。我收到以下异常。

> 生成 XML 文档时出错。“在序列化 DBML_Project.FixedBankAccount 类型的对象时检测到循环引用。”}。

为什么会出现这个错误？如何纠正它？

注意：我已经在使用**InheritanceMapping**属性。

```
public class BankAccountAppService
{
    public RepositoryLayer.ILijosBankRepository AccountRepository { get; set; }

    public void FreezeAllAccountsForUser(int userId)
    {
        IEnumerable<DBML_Project.BankAccount> accounts = AccountRepository.GetAllAccountsForUser(userId);
        foreach (DBML_Project.BankAccount acc in accounts)
        {
            acc.Freeze();
        }

        System.Xml.XmlDocument xmlDoc = new System.Xml.XmlDocument();
        System.Xml.XPath.XPathNavigator nav = xmlDoc.CreateNavigator();

        using (System.Xml.XmlWriter writer = nav.AppendChild())
        {
            System.Xml.Serialization.XmlSerializer ser = new System.Xml.Serialization.XmlSerializer(typeof(List<DBML_Project.BankAccount>)); 
            ser.Serialize(writer, accounts);
        }

    }

}

namespace DBML_Project
{
[System.Xml.Serialization.XmlInclude(typeof(FixedBankAccount))]
[System.Xml.Serialization.XmlInclude(typeof(SavingsBankAccount))]
public  partial class BankAccount
{
    //Define the domain behaviors
    public virtual void Freeze()
    {
        //Do nothing
    }
}

public class FixedBankAccount : BankAccount
{

    public override void Freeze()
    {
        this.Status = "FrozenFA";
    }
}

public class SavingsBankAccount : BankAccount
{

    public override void Freeze()
    {
        this.Status = "FrozenSB";
    }
}  
} 
```

使用 LINQ to SQL 自动生成的类

```
[global::System.Data.Linq.Mapping.TableAttribute(Name="dbo.BankAccount")]
[InheritanceMapping(Code = "Fixed", Type = typeof(FixedBankAccount), IsDefault = true)]
[InheritanceMapping(Code = "Savings", Type = typeof(SavingsBankAccount))]
public partial class BankAccount : INotifyPropertyChanging, INotifyPropertyChanged 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-03T09:55:16.723

使用数据合同序列化程序而不是 xmlserializer：http: [//jameskovacs.com/2006/11/18/going-around-in-circles-with-wcf/](http://jameskovacs.com/2006/11/18/going-around-in-circles-with-wcf/)

# java - Hibernate / JPA中的一对多关系

> ID：11308181
> 
> 赞同：1
> 
> 时间：2012-07-03T09:35:52.717
> 
> 标签：java, hibernate, jpa

我是hibernate的新手，我使用两个具有人和部分但我能够关联它们的类，我在线程“main”org.hibernate.AnnotationException中变得像异常：使用@OneToMany或@ManyToMany针对未映射的类：in。 quadra.apps.Profile.Sections[in.quadra.apps.Section]

人.java

```
package in.quadra.apps;

import java.util.Set;

import javax.persistence.Column;
import javax.persistence.Entity;
import javax.persistence.GeneratedValue;
import javax.persistence.Id;
import javax.persistence.OneToMany;
import javax.persistence.Table;

@Entity
@Table(name="Profile")
public class Profile {

    @Id
    @GeneratedValue
    @Column(name="Profile_ID")
    private Long ProfileId;

    @Column(name="Profile_NAME")
    private String ProfileName;

    @OneToMany(mappedBy="Profile")
    private Set<Section> Sections;

    public Long getProfileId() {
        return ProfileId;
    }

    public void setProfileId(Long profileId) {
        ProfileId = profileId;
    }

    public String getProfileName() {
        return ProfileName;
    }

    public void setProfileName(String profileName) {
        ProfileName = profileName;
    }

    public Set<Section> getSections() {
        return Sections;
    }

    public void setSections(Set<Section> sections) {
        Sections = sections;
    }

}

Section.Java

package in.quadra.apps;

import java.util.Set;

import javax.persistence.Column;
import javax.persistence.Entity;
import javax.persistence.GeneratedValue;
import javax.persistence.Id;
import javax.persistence.OneToMany;
import javax.persistence.Table;

@Entity
@Table(name="Profile")
public class Profile {

    @Id
    @GeneratedValue
    @Column(name="Profile_ID")
    private Long ProfileId;

    @Column(name="Profile_NAME")
    private String ProfileName;

    @OneToMany(mappedBy="Profile")
    private Set<Section> Sections;

    public Long getProfileId() {
        return ProfileId;
    }

    public void setProfileId(Long profileId) {
        ProfileId = profileId;
    }

    public String getProfileName() {
        return ProfileName;
    }

    public void setProfileName(String profileName) {
        ProfileName = profileName;
    }

    public Set<Section> getSections() {
        return Sections;
    }

    public void setSections(Set<Section> sections) {
        Sections = sections;
    }

}

main.java

package in.quadra.apps;

import org.hibernate.Session;
import org.hibernate.SessionFactory;
import org.hibernate.cfg.Configuration;

public class Main123 {
    public static void main(String ar[]){
        SessionFactory sessionFactory=new Configuration().configure().buildSessionFactory();
        Session session=sessionFactory.openSession();

        session.beginTransaction();
        Profile p= new Profile();
        p.setProfileName("Srikanth");

        Section s1= new Section();
        s1.setSectionName("Names");
        s1.setProfileId(p);

        Section s2= new Section();
        s2.setProfileId(p);
        s2.setSectionName("Address");

        session.save(p);
//      session.save(s1);
//      session.save(s2);
        session.getTransaction().commit();
        session.close();
    }

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-03T09:47:22.007

可能在 Section 类上缺少@Entity。

# android - base-，array-和cursor-adapter有什么区别

> ID：11308183
> 
> 赞同：0
> 
> 时间：2012-07-03T09:36:11.667
> 
> 标签：android

我应该使用数组适配器还是基本适配器还是光标适配器？你最常用的是什么？我发现了一些使用基本适配器作为片段的代码。我可以将数组适配器或光标适配器用于列表片段吗？

我知道如何以简单的方式使用 listview，例如使用 android.r.simple。我想知道在创建使用 listfragment 的 listview 并使用来自 SQLite 的数据填充它时应该使用什么。

实现此目的最简单的适配器是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-03T09:39:15.120

不同的适配器类之间存在差异。您应该根据您的模型数据决定使用一个。

*   如果您有对象的 ArrayList，则 ArrayAdapter 会更好。
*   如果您有数据库查询和 Cursor，CursorAdapter 会更好
*   BaseAdapter 是最可定制的，因此您可以将它用于任何事情（您必须比其他人多一点定制它）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-03T09:39:35.433

我通常最终会扩展 BaseAdapter。它很简单，并且 ArrayAdapter 不够灵活，无法处理项目具有多个需要进入列表项中不同字段的值的情况。

# android - 字符选择器对话框示例

> ID：11308184
> 
> 赞同：3
> 
> 时间：2012-07-03T09:36:13.947
> 
> 标签：android, android-layout

我一直在寻找[characterpickerdialog](http://developer.android.com/reference/android/text/method/CharacterPickerDialog.html)用法的示例，但没有找到。你介意张贴吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-03T09:44:49.050

[CharacterPickerDialog](http://developer.android.com/reference/android/text/method/CharacterPickerDialog.html) 示例：

**示例 1：**

```
public class CharacterPickerDialogTest extends Activity {  

    private RelativeLayout mainView = null;  
    private TextView tv = null;  
    private Button button = null;  
    private CharacterPickerDialog cpd = null;  

    public void onCreate(Bundle savedInstanceState) {  
        super.onCreate(savedInstanceState);  
        mainView = new RelativeLayout(this);  
        tv = new TextView(this);  
        RelativeLayout.LayoutParams lp_tv = new RelativeLayout.LayoutParams(-2,-2);  
        lp_tv.addRule(RelativeLayout.CENTER_IN_PARENT);  
        tv.setLayoutParams(lp_tv);  
        tv.setGravity(Gravity.CENTER_HORIZONTAL);  
        tv.setText(" shown here result");  
        button = new Button(this);  
        RelativeLayout.LayoutParams lp_button = new RelativeLayout.LayoutParams(-2, -2);  
        lp_button.addRule(RelativeLayout.ALIGN_PARENT_BOTTOM);  
        lp_button.addRule(RelativeLayout.CENTER_HORIZONTAL);  
        button.setLayoutParams(lp_button);  
        button.setText("open");  
        button.setOnClickListener(new OnClickListener() {  
            public void onClick(View v) {  
                if (cpd == null) {  
                    cpd_init();  
                }  
                cpd.show();  
            }  
        });  
        mainView.addView(tv);  
        mainView.addView(button);  
        setContentView(mainView);  
    }  

   // Cpd initialization
    void cpd_init() {  
        EditText et=new EditText(this);  
        et.setLayoutParams(new LinearLayout.LayoutParams(-1,-2));  
        final String options="0123456789ABCDEF";  
        cpd= new CharacterPickerDialog(this, new View(this), null,options,false){  
            public void onClick (View v){  
                //tv.setText("????"+((Button)v).getText().toString());   
                dismiss();   
            }  
            public void onItemClick (AdapterView parent, View view, int position, long id){  
                tv.setText("You pressed Button"+((Button)view).getText().toString()+"\n");   
                tv.append("the Button's position is"+position+"\n");  
                tv.append("the buton ID"+id);  
                dismiss();   
            }  
        };  

    }  
} 
```

**示例 2：**在按钮单击时轻松显示：

```
public  class CharacterPickerDialogDialogActivity extends Activity {
     Private CharacterPickerDialog CPD = null ;

    / ** Called when the Activity is Created first. * / 
    @ Override 
    public  void onCreate (Bundle SavedInstanceState) {
         Super onCreate (SavedInstanceState).;
        setContentView (R.layout.main);

        Button button = (Button) this . findViewById (R.Id.Button01);
        Button.SetOnClickListener ( new View.OnClickListener () {
             @ Override 
            public  void onClick (View v) {
                cpd.show();
            }
        });

        String options = "0123456789ABCDEF" ;
        CPD = new CharacterPickerDialog(this,new View(this),null,options,false) {
             public  void (View v) {onClick
                 onClick does the processing of the Cancel button / /
                Toast.makeText (getApplicationContext (),
                        "OnClick!" + ((Button) v). getText (). toString (),
                        Toast.LENGTH_SHORT).show();
                dismiss();
            }

            public  void OnItemClick(AdapterView parent, View View, int position, long id)
            {
                / / OnItemClick does the processing of character button 
                String message = ( "OnItemClick!" + ((Button) View). getText(). toString())
                        + "position =" +
                        position
                        + "id =" + id;
                Toast.makeText (getApplicationContext(), message, Toast.LENGTH_SHORT).show();
                dismiss();
            }
        ;}
    }
} 
```

# php - Eclipse JDT 4.2 + Groovy-eclipse 2.7.0 + Zend Studio 9.0.3 打破了 Zend studio

> ID：11308185
> 
> 赞同：0
> 
> 时间：2012-07-03T09:36:16.067
> 
> 标签：php, eclipse, zend-framework, groovy

我正在使用 PHP 和 Maven 开发一个项目，并且想使用 gmaven 插件来完成我的 maven 设置的一些繁琐部分。在厌倦了使用运行、记录、冲洗、重复调试方法后，我决定安装 groovy-eclipse，但不幸的是，这样做会导致 zend studio 停止运行。我已经浏览了错误消息，但不是很清楚到底是什么坏了，只有所有的 php 功能（以及我的大多数其他插件，例如 css 工具）在这里输入的代码都消失了。

安装 groovy 时没有错误消息，此后我尝试从全新的 Eclipse 4.2 安装开始，然后安装 groovy，然后安装 zend studio。结果相同。

大致相关的日志消息是：

```
!SESSION 2012-07-03 19:13:20.130 -----------------------------------------------
eclipse.buildId=I20120608-1400
java.version=1.7.0_04
java.vendor=Oracle Corporation
BootLoader constants: OS=win32, ARCH=x86_64, WS=win32, NL=en_AU
Command-line arguments:  -data C:\Users\F.Master\dev\binu -os win32 -ws win32 -arch x86_64

!ENTRY org.eclipse.e4.ui.workbench 4 0 2012-07-03 19:13:29.286
!MESSAGE Unable to retrieve the bundle from the URI:     bundleclass://org.eclipse.e4.tools.css.spy/org.eclipse.e4.tools.css.spy.OpenSpyHandler

!ENTRY org.eclipse.e4.ui.workbench 4 0 2012-07-03 19:13:29.286
!MESSAGE Unable to retrieve the bundle from the URI: bundleclass://org.eclipse.e4.tools.css.spy/org.eclipse.e4.tools.css.spy.OpenScratchpadHandler

!ENTRY org.eclipse.e4.ui.workbench 4 0 2012-07-03 19:13:29.287
!MESSAGE Unable to retrieve the bundle from the URI: bundleclass://org.eclipse.e4.tools.emf.liveeditor/org.eclipse.e4.tools.emf.liveeditor.OpenLiveDialogHandler

!ENTRY org.eclipse.jface 4 0 2012-07-03 19:13:33.448
!MESSAGE Unable to resolve plug-in "platform:/plugin/org.eclipse.wst.xml.ui//icons/xmldoc.gif".
!STACK 0
java.io.IOException: Unable to resolve plug-in "platform:/plugin/org.eclipse.wst.xml.ui//icons/xmldoc.gif".
    at org.eclipse.core.internal.runtime.PlatformURLPluginConnection.parse(PlatformURLPluginConnection.java:64)
    at org.eclipse.core.internal.runtime.PlatformURLPluginConnection.resolve(PlatformURLPluginConnection.java:75)
    at org.eclipse.core.internal.boot.PlatformURLHandler.openConnection(PlatformURLHandler.java:67)
    at org.eclipse.osgi.framework.internal.protocol.URLStreamHandlerProxy.openConnection(URLStreamHandlerProxy.java:112)
    at java.net.URL.openConnection(Unknown Source)
    at org.eclipse.core.internal.runtime.PlatformURLConverter.toFileURL(PlatformURLConverter.java:33)
    at org.eclipse.core.runtime.FileLocator.toFileURL(FileLocator.java:206)
    at org.eclipse.jface.resource.URLImageDescriptor.getFilePath(URLImageDescriptor.java:137)
    at org.eclipse.jface.resource.URLImageDescriptor.createImage(URLImageDescriptor.java:157)
    at org.eclipse.jface.resource.ImageDescriptor.createImage(ImageDescriptor.java:227)
... 
```

还有更多类似的缺失图标......以及

```
!ENTRY org.eclipse.team.core 4 0 2012-07-03 19:13:40.790
!MESSAGE Could not instantiate provider org.tigris.subversion.subclipse.core.svnnature for project maven-remote-resources-plugin.
!STACK 1
org.eclipse.team.core.TeamException: Could not instantiate provider    org.tigris.subversion.subclipse.core.svnnature for project maven-remote-resources-plugin.
at     org.eclipse.team.core.RepositoryProvider.mapNewProvider(RepositoryProvider.java:165)
at org.eclipse.team.core.RepositoryProvider.mapExistingProvider(RepositoryProvider.java:235)
at org.eclipse.team.core.RepositoryProvider.getProvider(RepositoryProvider.java:507)
at org.eclipse.team.internal.ccvs.ui.CVSLightweightDecorator.isMappedToCVS(CVSLightweightDecorator.java:192)
at org.eclipse.team.internal.ccvs.ui.CVSLightweightDecorator.decorate(CVSLightweightDecorator.java:147)
at org.eclipse.ui.internal.decorators.LightweightDecoratorDefinition.decorate(LightweightDecoratorDefinition.java:263)
at org.eclipse.ui.internal.decorators.LightweightDecoratorManager$LightweightRunnable.run(LightweightDecoratorManager.java:81)
at org.eclipse.core.runtime.SafeRunner.run(SafeRunner.java:42)
at org.eclipse.ui.internal.decorators.LightweightDecoratorManager.decorate(LightweightDecoratorManager.java:365)
at org.eclipse.ui.internal.decorators.LightweightDecoratorManager.getDecorations(LightweightDecoratorManager.java:347)
at org.eclipse.ui.internal.decorators.DecorationScheduler$1.ensureResultCached(DecorationScheduler.java:371)
at org.eclipse.ui.internal.decorators.DecorationScheduler$1.run(DecorationScheduler.java:331)
at org.eclipse.core.internal.jobs.Worker.run(Worker.java:54)
!SUBENTRY 1 org.eclipse.team.core 4 0 2012-07-03 19:13:40.792
!MESSAGE Could not instantiate provider org.tigris.subversion.subclipse.core.svnnature for project maven-remote-resources-plugin.

!ENTRY org.eclipse.ui 4 4 2012-07-03 19:14:00.852
!MESSAGE Unable to find Action Set: org.eclipse.rse.core.search.searchActionSet

!ENTRY org.eclipse.ui 4 4 2012-07-03 19:14:00.853
!MESSAGE Unable to find Action Set:    com.zend.php.ui.actions.UntitledPHPDocumentActionSet 
```

这一切真正告诉我的是插件还没有加载。

配置日志不会显示缺少的功能/插件，但“已安装的软件”窗格会显示。

**迷惑**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-03T09:36:16.580

嗯……这听起来像是 groovy 指定了活动过滤器，可以关闭其他所有功能。为什么？！明天我将挖掘源代码，看看我是否可以撤消其中一些事情，或者至少在功能页面中公开它们。（Zend 对 XDebug 功能也是如此）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-04T04:07:41.473

通过您的日志，我看到了几件事：

1.  您已在程序文件目录中安装了 Eclipse。这是一个只读目录，一些插件不能很好地与只读目录配合使用。
2.  未安装 Groovy-Eclipse。
3.  这个日志条目很奇怪。不知道为什么 -clean 无法完成。

    ```
    !ENTRY org.eclipse.osgi 4 0 2012-07-04 10:26:46.855
    !MESSAGE The -clean (osgi.clean) option was not successful. Unable to clean the storage area: C:\Users\F.Master\.eclipse_groooovy\configuration\org.eclipse.osgi 
    ```

4.  有一堆图像无法读取。同样，不确定为什么会发生这种情况，但很可能找不到 eclipse 配置区域的位置（因为配置在 C:\Program Files 和 C:\Users\F.Master.eclipse_groooovy 之间拆分）

我建议在可写目录中解压缩新的 Eclipse，然后重新安装 Zend、groovy-eclipse 和您拥有的任何其他插件。您可以继续使用旧工作区。

（另外，我推荐使用今天刚刚发布的 Groovy-Eclipse 2.7.0 的发布版本。）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-22T05:51:45.777

只需创建一个新工作区。为我工作。如果 eclispe 没有正确关闭和打开，它似乎有这样的问题。

# hibernate - 休眠：插入新的 autoicnremnteID 对象后出现 NotUniqueObjectException

> ID：11308189
> 
> 赞同：0
> 
> 时间：2012-07-03T09:36:33.680
> 
> 标签：hibernate

当我插入新记录时，我在 JSF bean 的 aa 方法中有一个带有 autoincremt Id (int) 的 sql 表：我创建​​了一个新对象 p=new Prop(); 然后设置除 id 之外的所有属性，并将 i 提交给会话： session.save(p); 这适用于第一条记录；当插入第二条或更多记录时，如果我创建了一个新对象，我也会有 NotUniqueObjectException；我怎样才能避免这种情况？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-03T10:19:49.253

当您使用休眠时，在休眠中，如果您使用 hbm 映射，我们必须定义自动增量类型，然后执行以下操作。

对于 hbm 映射：

```
<id name="id" type="java.lang.Long">
            <column name="ID" />
            <generator class="identity" />
        </id> 
```

注释：

```
@Id
@GeneratedValue(strategy = GenerationType.IDENTITY) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-03T09:40:15.310

你可以在hibernate中设置id生成策略

```
@Id
@GeneratedValue(strategy=GenerationType.AUTO)
private int id; 
```

# user-interface - 调用 UI 时出错 $Proxy811

> ID：11308192
> 
> 赞同：-1
> 
> 时间：2012-07-03T09:36:55.760
> 
> 标签：user-interface, google-apps-script

我正在尝试编写一个创建 UI 的基本脚本。我已将其简化为以下内容：

```
function doGet(e) {
  var app = new UiApp.createApplication();

  return app;
} 
```

这会引发错误：

> 使用 [object Object] 作为“this”值调用方法“createApplication”，无法将其转换为类型 $Proxy811。（第 2 行）

从脚本编辑页面运行时，以及作为 Web 应用程序发布时

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-03T10:25:43.417

您必须`new`从第一个功能行中删除，即功能应该是

```
function doGet(e) {
  var app = UiApp.createApplication();

  return app;
} 
```

# c++ - 定义一个全局变量并在那里自己初始化它可以吗？

> ID：11308193
> 
> 赞同：1
> 
> 时间：2012-07-03T09:37:01.480
> 
> 标签：c++, constructor, initialization

我使用一个全局变量（一个类的对象）并将其定义如下：

```
//foo.h
extern class_name obj_name;
//foo.cpp
class_name obj_name("directory of a .ttf file"); 
```

我将 foo.h 包含在我的 main.cpp 中，我的 main() 函数所在的位置。

问题是我不太喜欢在那里初始化它，因为它不在函数内部。它是公开的。我宁愿调用一个初始化对象的“init（）”函数，如：

```
object_name = class_name(parameters); 
```

来自 main() 函数。

但是该类是第 3 方的，它不接受在没有我们为构造函数提供参数的情况下创建的对象。也许它没有默认的无参数构造函数。

做我上面做的事情是好的编码风格吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-03T09:51:35.440

[Construct on first use idiom](http://www.parashift.com/c++-faq-lite/ctors.html#faq-10.15)可以为您省去一些后顾之忧：

```
// foo.h

class_name& get_obj();

// foo.cpp

class_name& get_obj()
{
    static class_name obj("dir");
    return obj;
} 
```

[另一个链接。](http://en.wikibooks.org/wiki/More_C%2B%2B_Idioms/Construct_On_First_Use)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-03T09:41:37.167

不。

不要在没有充分理由的情况下在 C++ 中使用全局变量。

*   您将遇到“静态初始化顺序惨败”。
*   你会得到难看的意大利面条代码。
*   您的代码将难以测试。

如果您的全局是第 3 方类型，则尤其如此。

考虑使用更好的东西，比如允许延迟初始化的工厂方法。或者只是将对象传递给需要它的函数。

还可以考虑用您自己的包装该第 3 方类 - 仅提供测试它所需的最小接口，并使用指向该抽象基类的指针。（或者如果 3rd 方库支持它 - 使用他们提供的最小接口，您可以使用它）

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-03T09:43:05.860

全局变量几乎总是不好的。但是，如果您没有其他选择（是吗？）我会建议使用指针。这样你就可以在任何你想要的地方定义全局指针，并在 main 或任何其他使用 operator new 的函数中初始化它。但是，这使您负责手动删除对象。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-03T09:44:40.697

当然，这不是一种好的编码风格。但并非所有 3ed 派对 API 都是以“正确的方式”创建的，因此在某些情况下您会违反规则。如果你这样做了，你至少可以严格地*评论它，*这样你将来就会知道你为什么这样做。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-03T09:56:11.980

也许这样的事情可以帮助：

```
class ObjectFactory 
{
public:
    static class_name* getObject() 
    {
        if( ptr ) 
            return ptr;
        else
        {
            ptr = new class_name( <args> );
            return ptr;
        }                
    }

private:
    static class_name* ptr;

    ObjectFactory() : ptr(NULL) {}
} 
```

每次您需要使用该对象时，您总是可以这样做：

```
class_name *p = ObjectFactory::getObject(); 
```

# javascript - 从 jQuery 调用 Web 服务失败适用于 python

> ID：11308194
> 
> 赞同：0
> 
> 时间：2012-07-03T09:37:04.320
> 
> 标签：javascript, jquery, soap

给我一个 Web 服务（我想写在 ASP .Net 上），我收到这个错误，从 jQuery 调用它：

```
XMLHttpRequest cannot load http://www.hotelbeasain.com/webservice/wshotelbeasain.asmx?op=EstadoHabitacionesFechas. Origin http://hotel.local is not allowed by Access-Control-Allow-Origin. 
```

如果我像这样在 python 中运行脚本：

```
from suds.client import Client
url = 'http://www.hotelbeasain.com/webservice/wshotelbeasain.asmx?WSDL'
client = Client(url)
# print client
hotel =  client.service.EstadoHabitacionesFechas()
print hotel
print type(hotel) 
```

结果是这个：

```
(EstadoHabitacionesFechasResult){
   schema[] = 
      (schema){
         _id = "NewDataSet"
         element[] = 
            (element){
               _UseCurrentLocale = "true"
               _IsDataSet = "true"
               _MainDataTable = "TablaEstadoHabitacion"
               _name = "NewDataSet"
               complexType[] = 
                  (complexType){
                     choice[] = 
                        (choice){
                           _maxOccurs = "unbounded"
                           _minOccurs = "0"
                           element[] = 
                              (element){
                                 _name = "TablaEstadoHabitacion"
                                 complexType[] = 
                                    (complexType){
                                       sequence[] = 
                                          (sequence){
                                             element[] = 
                                                (element){
                                                   _type = "xs:int"
                                                   _name = "IdHabitacion"
                                                   _minOccurs = "0"
                                                },
                                                (element){
                                                   _type = "xs:string"
                                                   _name = "FechaEntrada"
                                                   _minOccurs = "0"
                                                },
                                                (element){
                                                   _type = "xs:string"
                                                   _name = "FechaSalida"
                                                   _minOccurs = "0"
                                                },
                                          },
                                    },
                              },
                        },
                  },
            },
      },
   diffgram[] = 
      (diffgram){
         DocumentElement[] = 
            (DocumentElement){
               TablaEstadoHabitacion[] = 
                  (TablaEstadoHabitacion){
                     _id = "TablaEstadoHabitacion1"
                     _rowOrder = "0"
                     _hasChanges = "inserted"
                     IdHabitacion[] = 
                        "1",
                     FechaEntrada[] = 
                        "23/05/2012",
                     FechaSalida[] = 
                        "31/12/2012",
                  },
                  (TablaEstadoHabitacion){
                     _id = "TablaEstadoHabitacion2"
                     _rowOrder = "1"
                     _hasChanges = "inserted"
                     IdHabitacion[] = 
                        "2",
                     FechaEntrada[] = 
                        "23/05/2012",
                     FechaSalida[] = 
                        "29/06/2012",
                  },
                  (TablaEstadoHabitacion){
                     _id = "TablaEstadoHabitacion3"
                     _rowOrder = "2"
                     _hasChanges = "inserted"
                     IdHabitacion[] = 
                        "2",
                     FechaEntrada[] = 
                        "29/06/2012",
                     FechaSalida[] = 
                        "01/07/2012",
                  },
                  (TablaEstadoHabitacion){
                     _id = "TablaEstadoHabitacion4"
                     _rowOrder = "3"
                     _hasChanges = "inserted"
                     IdHabitacion[] = 
                        "3",
                     FechaEntrada[] = 
                        "02/06/2012",
                     FechaSalida[] = 
                        "03/06/2012",
                  },
                  (TablaEstadoHabitacion){
                     _id = "TablaEstadoHabitacion5"
                     _rowOrder = "4"
                     _hasChanges = "inserted"
                     IdHabitacion[] = 
                        "3",
                     FechaEntrada[] = 
                        "29/06/2012",
                     FechaSalida[] = 
                        "01/07/2012",
                  },
                  (TablaEstadoHabitacion){
                     _id = "TablaEstadoHabitacion6"
                     _rowOrder = "5"
                     _hasChanges = "inserted"
                     IdHabitacion[] = 
                        "4",
                     FechaEntrada[] = 
                        "29/06/2012",
                     FechaSalida[] = 
                        "01/07/2012",
                  },
                  (TablaEstadoHabitacion){
                     _id = "TablaEstadoHabitacion7"
                     _rowOrder = "6"
                     _hasChanges = "inserted"
                     IdHabitacion[] = 
                        "5",
                     FechaEntrada[] = 
                        "02/06/2012",
                     FechaSalida[] = 
                        "03/06/2012",
                  },
                  (TablaEstadoHabitacion){
                     _id = "TablaEstadoHabitacion8"
                     _rowOrder = "7"
                     _hasChanges = "inserted"
                     IdHabitacion[] = 
                        "5",
                     FechaEntrada[] = 
                        "29/06/2012",
                     FechaSalida[] = 
                        "01/07/2012",
                  },
                  (TablaEstadoHabitacion){
                     _id = "TablaEstadoHabitacion9"
                     _rowOrder = "8"
                     _hasChanges = "inserted"
                     IdHabitacion[] = 
                        "6",
                     FechaEntrada[] = 
                        "02/06/2012",
                     FechaSalida[] = 
                        "03/06/2012",
                  },
                  (TablaEstadoHabitacion){
                     _id = "TablaEstadoHabitacion10"
                     _rowOrder = "9"
                     _hasChanges = "inserted"
                     IdHabitacion[] = 
                        "6",
                     FechaEntrada[] = 
                        "29/06/2012",
                     FechaSalida[] = 
                        "01/07/2012",
                  },
                  (TablaEstadoHabitacion){
                     _id = "TablaEstadoHabitacion11"
                     _rowOrder = "10"
                     _hasChanges = "inserted"
                     IdHabitacion[] = 
                        "7",
                     FechaEntrada[] = 
                        "25/05/2012",
                     FechaSalida[] = 
                        "28/05/2012",
                  },
                  (TablaEstadoHabitacion){
                     _id = "TablaEstadoHabitacion12"
                     _rowOrder = "11"
                     _hasChanges = "inserted"
                     IdHabitacion[] = 
                        "7",
                     FechaEntrada[] = 
                        "02/06/2012",
                     FechaSalida[] = 
                        "03/06/2012",
                  },
                  (TablaEstadoHabitacion){
                     _id = "TablaEstadoHabitacion13"
                     _rowOrder = "12"
                     _hasChanges = "inserted"
                     IdHabitacion[] = 
                        "7",
                     FechaEntrada[] = 
                        "29/06/2012",
                     FechaSalida[] = 
                        "01/07/2012",
                  },
                  (TablaEstadoHabitacion){
                     _id = "TablaEstadoHabitacion14"
                     _rowOrder = "13"
                     _hasChanges = "inserted"
                     IdHabitacion[] = 
                        "8",
                     FechaEntrada[] = 
                        "25/05/2012",
                     FechaSalida[] = 
                        "28/05/2012",
                  },
                  (TablaEstadoHabitacion){
                     _id = "TablaEstadoHabitacion15"
                     _rowOrder = "14"
                     _hasChanges = "inserted"
                     IdHabitacion[] = 
                        "8",
                     FechaEntrada[] = 
                        "02/06/2012",
                     FechaSalida[] = 
                        "03/06/2012",
                  },
                  (TablaEstadoHabitacion){
                     _id = "TablaEstadoHabitacion16"
                     _rowOrder = "15"
                     _hasChanges = "inserted"
                     IdHabitacion[] = 
                        "9",
                     FechaEntrada[] = 
                        "25/05/2012",
                     FechaSalida[] = 
                        "28/05/2012",
                  },
                  (TablaEstadoHabitacion){
                     _id = "TablaEstadoHabitacion17"
                     _rowOrder = "16"
                     _hasChanges = "inserted"
                     IdHabitacion[] = 
                        "9",
                     FechaEntrada[] = 
                        "01/06/2012",
                     FechaSalida[] = 
                        "03/06/2012",
                  },
                  (TablaEstadoHabitacion){
                     _id = "TablaEstadoHabitacion18"
                     _rowOrder = "17"
                     _hasChanges = "inserted"
                     IdHabitacion[] = 
                        "9",
                     FechaEntrada[] = 
                        "29/06/2012",
                     FechaSalida[] = 
                        "01/07/2012",
                  },
                  (TablaEstadoHabitacion){
                     _id = "TablaEstadoHabitacion19"
                     _rowOrder = "18"
                     _hasChanges = "inserted"
                     IdHabitacion[] = 
                        "10",
                     FechaEntrada[] = 
                        "25/05/2012",
                     FechaSalida[] = 
                        "28/05/2012",
                  },
                  (TablaEstadoHabitacion){
                     _id = "TablaEstadoHabitacion20"
                     _rowOrder = "19"
                     _hasChanges = "inserted"
                     IdHabitacion[] = 
                        "10",
                     FechaEntrada[] = 
                        "02/06/2012",
                     FechaSalida[] = 
                        "03/06/2012",
                  },
            },
      },
 }
<type 'instance'>
[Finished in 0.3s] 
```

因此，从 python 中，Web 服务正在运行，但是当我从我的 jQuery 脚本中调用它时，它不是。这是我的 jQuery 脚本

```
$.ajax({
            type: "POST",
            url: "http://www.hotelbeasain.com/webservice/wshotelbeasain.asmx?op=EstadoHabitacionesFechas",
            data: '{}',
            contentType: "application/json; charset=utf-8",
            dataType: "json",
            success: function (resul) {
                // if (resul.d)
                    alert('El usuario es válido.');
                // else
                    // alert('El usuairo es inválido.');
            },
            error:function (xhr, ajaxOptions, thrownError){
                    alert(xhr.status);
                    alert(thrownError);
                }
        }); 
```

任何帮助或线索？提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-03T09:38:42.260

似乎您收到的错误[与同源策略有关](http://en.wikipedia.org/wiki/Same_origin_policy)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-03T09:50:42.643

尝试将 jquery ajax 调用中的 url 从： [http](http://www.hotelbeasain.com/webservice/wshotelbeasain.asmx?op=EstadoHabitacionesFechas) ://www.hotelbeasain.com/webservice/wshotelbeasain.asmx?op=EstadoHabitacionesFechas 更改为：http : [//www.hotelbeasain.com/webservice/wshotelbeasain.asmx /EstadoHabitacionesFechas](http://www.hotelbeasain.com/webservice/wshotelbeasain.asmx/EstadoHabitacionesFechas)

# android - 在 Android 中启动新的 Activity 并完成当前的 Activity？

> ID：11308198
> 
> 赞同：78
> 
> 时间：2012-07-03T09:37:22.067
> 
> 标签：android, android-activity, flags, start-activity

目前我正在开始一个新的`Activity`并呼吁`finish`一个当前的。

是否有任何标志可以传递给`Intent`可以完成当前`Activity`而不需要`finish`从代码手动调用？

* * *

## 回答 #1

> 赞同：131
> 
> 时间：2012-07-03T09:41:29.683

您可以使用`finish()`方法，也可以使用：

```
android:noHistory="true" 
```

然后就没有必要再打电话`finish()`了。

```
<activity android:name=".ClassName" android:noHistory="true" ... /> 
```

* * *

## 回答 #2

> 赞同：97
> 
> 时间：2012-07-03T09:53:39.627

像这样使用`finish`：

```
Intent i = new Intent(Main_Menu.this, NextActivity.class);
finish();  //Kill the activity from which you will go to next activity 
startActivity(i); 
```

`FLAG_ACTIVITY_NO_HISTORY`您可以使用以防万一您要完成的活动。例如，您从 A-->B--C 出发。当你从 B-->C 出发时，你想完成活动 B，所以当你从 A-->B 出发时，你可以使用这个标志。当您进行其他活动时，该活动将自动完成。

要了解有关使用的更多信息，`Intent.FLAG_ACTIVITY_NO_HISTORY`请阅读：http: [//developer.android.com/reference/android/content/Intent.html#FLAG_ACTIVITY_NO_HISTORY](http://developer.android.com/reference/android/content/Intent.html#FLAG_ACTIVITY_NO_HISTORY)

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2012-07-03T09:45:54.267

FLAG_ACTIVITY_NO_HISTORY 在用户转到另一个活动后开始您希望完成的活动时。

[http://developer.android.com/reference/android/content/Intent.html#FLAG%5FACTIVITY%5FNO%5FHISTORY](http://developer.android.com/reference/android/content/Intent.html#FLAG%5FACTIVITY%5FNO%5FHISTORY)

# c# - 如何使用 svcutil 生成异步方法？

> ID：11308204
> 
> 赞同：3
> 
> 时间：2012-07-03T09:37:40.003
> 
> 标签：c#, wcf, asynchronous, svcutil.exe, service-operations

`ServiceOperation`svcutil是否可以只为一种方法生成异步？

我知道我可以添加`/async`参数，但它会以异步模式生成所有方法。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-03T09:50:35.897

/async 选项允许您生成同步和异步方法签名。默认值：仅生成同步方法签名。不可能指定特定的合同。但这[可能](http://devlicio.us/blogs/krzysztof_kozmic/archive/2009/08/09/making-asynchronous-wcf-calls-without-svcutil.aspx)对你有帮助

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-03T09:52:09.730

这是不可能的。Svcutil 无法生成部分异步代理。

[来源](http://social.msdn.microsoft.com/Forums/en-US/wcf/thread/b269a5cb-fa2d-4a76-afc6-240975a1fdde)

# installation - InstallScript 和注册表

> ID：11308206
> 
> 赞同：0
> 
> 时间：2012-07-03T09:37:45.140
> 
> 标签：installation, installshield, installscript

我有两个 .reg 文件，它们之间的区别仅`Key`取决于 Windows 的版本。

我的 Windows x86 注册表文件：

```
Windows Registry Editor Version 5.00

[HKEY_CLASSES_ROOT\NGG]
@="URL:NGG Protocol"
"URL Protocol"=""

[HKEY_CLASSES_ROOT\NGG\DefaultIcon]
@="C:\\wpf.exe"
"Test"="ika"

[HKEY_CLASSES_ROOT\NGG\Shell]

[HKEY_CLASSES_ROOT\NGG\Shell\Open]

[HKEY_CLASSES_ROOT\NGG\Shell\Open\command]
@="\"C:\\Program Files\\NGG\\start.exe\" \"%1\"" 
```

Windows x64 的区别：

```
@="\"C:\\Program Files(x86)\\NGG\\start.exe\" \"%1\"" 
```

如何制作检查 Windows 版本然后使用当前注册表文件的安装脚本 (InstallShield MSI)。

请帮忙。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-03T11:47:32.543

我会避免为此使用 .reg 文件。而是使用 InstallShield 和/或 Windows Installer 对注册表中变量值的支持，并`"[ProgramFilesFolder]NGG\start.exe" "%1"`在基于 MSI 的安装中或`"<PROGRAMFILES>\NGG\start.exe" "%1"`在基于 InstallScript 的安装中指定注册表视图中的值。

（或者可能通过在基于 MSI 的项目中使用动词支持来更具体。或者参考类似`"[#start.exe]" "%1"`路径的内容，假设您使用 start.exe 文件键安装该可执行文件 - 有关详细信息，请参阅[格式化](http://msdn.microsoft.com/en-us/library/windows/desktop/aa368609.aspx)。）

# php - PHP中的奇怪计算

> ID：11308209
> 
> 赞同：0
> 
> 时间：2012-07-03T09:38:03.237
> 
> 标签：php

> **可能的重复：**
> [JavaScript 的数学被破坏了吗？](https://stackoverflow.com/questions/588004/is-javascripts-math-broken)
> [在 PHP 中添加分数会产生不同的结果](https://stackoverflow.com/questions/8725708/adding-fractions-number-yields-different-result-in-php)

```
$grand_total =  (float)$subtotal_email +  (float)$delivery_email + (float)$fuel_surcharge_email - (float)$discount_coupon_email + (float)$texas_tax_email - (float)$cancel_fee_email -  (float)$refund_email - (float)$refund_tax_email - (float)$coupon_tmp;
echo (float)$subtotal_email." +  ".(float)$delivery_email." + ".(float)$fuel_surcharge_email." - ".(float)$discount_coupon_email." + ".(float)$texas_tax_email." - ".(float)$cancel_fee_email." -  ".(float)$refund_email." - ".(float)$refund_tax_email." - ".(float)$coupon_tmp." = ".(float)$grand_total; 
```

当我在 php 中运行上述内容时，我得到以下输出：

```
89.99 + 0 + 16.2 - 0 + 8.61 - 3 - 100 - 10 - 1.8 = -2.88657986403E-15 
```

但是，如果您查看 LHS，它应该是`0`，并且无论有没有浮动都会发生这种情况......知道为什么吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-03T09:41:14.120

浮点运算永远不会那么准确。如果您需要与零进行比较，则需要取不同并将其与一些较小的数字进行比较。

```
if (abs($result) < 0.00001)) {
    // it's zero
} else {

} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-03T09:40:54.603

因为浮动。使用`int`s 并用美分 (* 100) 计算值。

# python - 更改模型的 key_Name + App Engine

> ID：11308210
> 
> 赞同：0
> 
> 时间：2012-07-03T09:38:04.913
> 
> 标签：python, google-app-engine, google-cloud-datastore

我打算为我的应用程序这样做：

1.  将唯一 id 存储到 User 模型的 key_name 中。
2.  在给定的任何时间，用户将被允许选择一次用户名，我打算用用户选择的用户名替换模型的原始 key_name。
3.  通过我的实现，任何新用户，用户模型只会在用户被激活时创建。

根据情况，我的问题是，以下哪种方法更好？

1.  用户登录后，用户必须选择一个用户名，这样我就可以使用选择的 keyname = username 创建用户模型。但是，这种方法可能会让用户感到不愉快，因为他们应该被允许在他们想要的任何时候选择用户名。
2.  在上述情况下解释的方法，但是我需要做[clone_entity](https://stackoverflow.com/questions/2687724/copy-an-entity-in-google-app-engine-datastore-in-python-without-knowing-property)。但是，使用 clone_entity，是否会将引用属性分配回新的克隆实体？而且，性能是重中之重，如果同时涉及很多用户，这在数据库操作方面会不会很昂贵？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-03T23:30:08.290

如果您决心将 user_name 作为键，则任何一种方法都应该可以正常工作（假设您有防止重复用户名的逻辑）

> 但是，使用 clone_entity，是否会将引用属性分配回新的克隆实体？

如果克隆实体正确完成，引用属性将被复制而不会出现问题。但是，如果您有任何实体引用您正在克隆的实体，则不会更新这些实体以引用该实体的新克隆。

> 而且，性能是重中之重，如果同时涉及很多用户，这在数据库操作方面会不会很昂贵？

只要有效地实现克隆并假设您传入要克隆的实体，每次克隆调用（新创建的实体的放置）应该只有一个数据库操作。

看起来您链接的 clone_entity 有一个更新，可以避免对引用属性进行过多的数据库调用，所以您应该很好。

# jquery - jQuery：html() 函数以表单形式获取旧数据

> ID：11308211
> 
> 赞同：5
> 
> 时间：2012-07-03T09:38:10.813
> 
> 标签：jquery, html

我正在使用 jQuery 读取 HTML 页面中的数据。在该页面上，我有一个`<form>`元素，其中包含一些`<input>`标签供用户输入其值。初始化时，此表单具有这些元素
的一些默认值。`<input>`当我提交此表单时，我使用该`html()`方法获取此页面当前状态的 HTML 字符串，但我不知道为什么此结果字符串仍然包含旧值（默认输入值），而不是新值。
有没有办法`<input>`在调用之前更新或持久化用户输入的值到这些元素`html()`？如何使用 jQuery 方法获取包含最新值的字符串？
非常感谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-03T09:43:52.897

但是，您尝试做的事情很奇怪，但您只需要更新表单元素的 value 属性。可以使用以下代码完成（将其放入表单`submit`处理程序中）：

```
$("form input").attr("value", function() {
    return this.value;
}); 
```

**演示：http:** [//jsfiddle.net/BXha6/](http://jsfiddle.net/BXha6/)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-01T01:25:51.477

默认情况下，jQuery`html()`函数将保留`defaultValue`and`defaultChecked`属性，而不是使用当前值/选择（就像 JavaScript`innerHTML`一样）。要解决这个问题，您需要首先使用 jQuery `prop()`：[阅读关于 prop() 的文档](http://api.jquery.com/prop/)。

例如，给定代码：

```
<form action='/'>
   <input type='radio' value='1' checked name='first' />
   <input type='radio' value='2' name='first' />

   <input type='checkbox' value='yes' />

   <input type='text' value='Start Text' name='second' />
</form> 
```

然后

```
 $('form').html() 
```

无论您添加/选择/修改了什么值，都将始终输出该确切代码。

为了解决这个问题，只需运行一个函数将元素的值转换为属性：

```
$("form input[type='radio']").each(function(){
   if (this.checked){
      $(this).prop("defaultChecked",true);
   } else {
      $(this).prop("defaultChecked",false);
   }
});
$("form input[type='checkbox']").each(function(){
   if (this.checked){
      $(this).prop("defaultChecked",true);
   } else {
      $(this).prop("defaultChecked",false);
   }
});
$("form input[type='text']").each(function(){
   $(this).prop("defaultValue",$(this).val());
});

alert( $(form).html() ); //or var the_code = $(form).html(); 
```

您现在将拥有 HTML，因为您当前的页面状态正在显示它。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-01-30T14:35:43.470

如果您正在寻找如何执行该元素类型，则 textarea 位会有所不同：

```
 $("textarea").html( function() {
    return this.value;
}); 
```

[http://jsfiddle.net/BXha6/7/](http://jsfiddle.net/BXha6/7/)

# java - 在java中编写异步调用序列的更好方法是什么？

> ID：11308214
> 
> 赞同：0
> 
> 时间：2012-07-03T09:38:16.257
> 
> 标签：java, asynchronous, future

假设我正在编写一个类，它通过远程调用控制第三方远程服务器。每个调用都是异步的，即它的答案返回到单独的函数中。

包装远程调用的最佳模式或算法是什么？

1.  为每个调用编写包装器方法，回调对象作为最后一个参数？
2.  每个包装器方法都应返回“Future”对象以等待结果
3.  为应添加到实例的结果创建侦听器
4.  别的东西？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-03T09:43:59.703

我不确定您在上面建议的可能解决方案之间是否存在很大差异。我会建议尽可能多地使用现有的类和模式（例如，您提到`Future`上面的类）。

可能会影响您的解决方案（并且您没有提及）的一件事是您是否需要以与发出请求相同的顺序处理结果，和/或您是否能够并行处理结果，或者是否这需要同步。

# google-apps-script - 如何重置用户属性/脚本属性、GAS 数据存储

> ID：11308215
> 
> 赞同：0
> 
> 时间：2012-07-03T09:38:26.950
> 
> 标签：google-apps-script

我通过 UserProperty 上的界面重命名为空白（空格）。从那时起，我在尝试读取或写入用户或脚本属性时收到“数据存储错误”。

例如

```
function test() {
  UserProperties.getProperty("foo");
} 
```

我什至无法通过用户界面访问属性列表

有人知道我如何重置整个数据存储吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-03T18:39:20.920

我不得不复制代码，完全删除项目，创建一个新项目并将我的代码粘贴回去。

# c# - 在 foreach 循环期间将参数传递给 webbrowser 控件不起作用

> ID：11308223
> 
> 赞同：0
> 
> 时间：2012-07-03T09:38:47.717
> 
> 标签：c#, foreach, webbrowser-control

我在 C# Windows 窗体上有一个 WebBrowser 控件，它有一些参数。由于某些 Ajax 内容，网络浏览器会多次引发 DocumentCompleted。除了我在表单字段中填充一些值的网页（这就是将参数传递给控制的意思）加载速度不是很快我有一个计时器，它每 2 秒运行一次以尝试填充值。到目前为止一切顺利，但现在我需要将不同的值传递给表单，并且需要再次加载网站。我在使用 foreach 循环遍历的列表中有这些值。问题是 foreachloop 太快了，以至于 webbrowser 控件只能获取该列表的最后一个值。

我希望你们明白我的意思。你有一些建议/提示/技巧我应该做些什么来解决这个问题？

谢谢！

编辑：下面是 foreach 的代码，它在最后触发 Timer，然后通过加载页面、传递参数等过程......

```
 foreach (string routeFrom in lstRoutesFrom)
    {
        string routeTo = lstRoutesTo[lstRoutesFrom.IndexOf(routeFrom)].ToString();

        //Prepare Data...
        this.requestAirportFrom = routeFrom;
        this.requestAirportTo = routeTo;

        string dd = "13";
        string mm = "07";
        string yyyy = "2012";
        string date = dd + "/" + mm + "/" + yyyy;
        this.requestDate = date;

        this.globalStep = 0;
        listAirline.Clear();
        listArrAirports.Clear();
        listArrTime.Clear();
        listDepAirports.Clear();
        listDepTime.Clear();
        listFlightNumbers.Clear();
        listFlightPrices.Clear();
        btnTimer.Enabled = true;
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-03T10:05:43.183

你的 foreach 不是“太快”，它根本不正确。

```
foreach (string routeFrom in lstRoutesFrom)  // this gets multiple 'routeFrom' values
{
   //Prepare Data...
   this.requestAirportFrom = routeFrom;  // and now (over)write all to the same place

   ....
} 
```

只有最后一个`routeFrom`保存在*(* 1)`this.requestAirportFrom`位置。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-03T09:50:13.860

根据您的问题：*问题在于 foreachloop 太快，以至于 webbrowser 控件只能获取该列表的最后一个值。*

WebBrowser 控件具有 DocumentCompleted 事件，您可以使用它一次传递一项

请参阅[MSDN上的示例](http://msdn.microsoft.com/en-us/library/system.windows.forms.webbrowser.documentcompleted.aspx)

# java - 与 bluecove 库冲突

> ID：11308225
> 
> 赞同：0
> 
> 时间：2012-07-03T09:38:53.477
> 
> 标签：java, bluetooth, sunspot

根据我试图在 ANT 项目中使用的 bluecove 库，我遇到了一个大问题。

我的项目是一个从不同代理接收消息的平台，例如 TCP 代理、SunSpot 代理（使用 UDP），现在我正在尝试设置蓝牙代理。

为此需要 bluecove 库，但会导致与我正在实现的 UDP 类中使用的 javax.microedition.io 冲突。

我想这是一个库冲突，我试图将 bluecove-2.1.1 jar 放入 jdk1.6_xx/jre/lib/ext 但这会在 UDP 类中引发异常：

```
Error checking for shared basestation: javax.microedition.io.ConnectionNotFoundException: radiogram
javax.microedition.io.ConnectionNotFoundException: udp
javax.microedition.io.ConnectionNotFoundException: udp
  at com.intel.bluetooth.MicroeditionConnector.openImpl(MicroeditionConnector.java:185)
  at com.intel.bluetooth.MicroeditionConnector.open(MicroeditionConnector.java:162)
  at javax.microedition.io.Connector.open(Connector.java:83)
  at org.sunspotworld.SunSpotListener.run(SunSpotListener.java:48) 
```

但是，如果我从 bluecove2.1.1 jar 的内容中删除 javax/microedition 文件夹，则抛出的错误完全不同：

```
Exception in thread "main" java.lang.NoClassDefFoundError:   javax/microedition/io/Connection
Exception in thread "main" java.lang.NoClassDefFoundError: javax/microedition/io/Connection
at java.lang.Class.forName0(Native Method)
at java.lang.Class.forName0(Native Method)
at java.lang.Class.forName(Class.java:169)
at com.intel.bluetooth.Utils.class$(Utils.java:44)
at com.intel.bluetooth.Utils.<clinit>(Utils.java:44)
at javax.bluetooth.UUID.<init>(UUID.java:224)
at org.sunspotworld.BTListener.<clinit>(BTListener.java:28)
at org.sunspotworld.SunSpotHostApplication.run(SunSpotHostApplication.java:67)
at org.sunspotworld.SunSpotHostApplication.main(SunSpotHostApplication.java:342)

Caused by: java.lang.ClassNotFoundException: javax.microedition.io.Connection
Caused by: java.lang.ClassNotFoundException: javax.microedition.io.Connection
at java.net.URLClassLoader$1.run(URLClassLoader.java:202)
at java.security.AccessController.doPrivileged(Native Method)
at java.security.AccessController.doPrivileged(Native Method)
at java.net.URLClassLoader.findClass(URLClassLoader.java:190)
at sun.misc.Launcher$ExtClassLoader.findClass(Launcher.java:229)
at java.lang.ClassLoader.loadClass(ClassLoader.java:306)
at java.lang.ClassLoader.loadClass(ClassLoader.java:247)
... 8 more
... 8 more 
```

我已经阅读了一些涉及 xbootclasspath/a 的解决方案，但我不知道那是什么或如何管理它...

编辑：我使用 Xboothclasspath/a 和 /p 添加了 bluecove jar 路由，我唯一得到的就是有机会从我的 NetBeans 项目中删除 jar 导入。还是行不通。=(

非常感谢您提前！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-03T10:36:58.880

我不知道您为什么认为此错误是由两个库之间的冲突引起的，因为我在错误中没有看到任何提及。

第二个错误（在删除库之后）只是表明它找不到所需的类（这是合乎逻辑的，因为你删除了它们:)）。

我建议您检查防火墙是否没有阻止您。

# cuda - CUDA 三方括号可选参数

> ID：11308227
> 
> 赞同：2
> 
> 时间：2012-07-03T09:39:12.993
> 
> 标签：cuda, gpgpu

我知道可以使用三方括号语法启动内核：

```
kernel<<<NumOfBlocks, NumOfThreadsPerBlock, A, B>>> (...); 
```

最后两个参数是可选的，但我想知道它们指的是什么。B 应该引用内核应该执行的流，但是 A 呢？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-03T09:46:07.157

这是共享内存的数量。您可以传递共享内存中所需的字节数。在内核中你应该使用

```
extern __shared__ T smem[]; 
```

代替

```
__shared__ T[CONSTANT]; 
```

在内核中获取大小为 A / sizeof(T) 的共享数组。

# blackberry - 在黑莓中读取多个传入的短信

> ID：11308228
> 
> 赞同：1
> 
> 时间：2012-07-03T09:39:13.397
> 
> 标签：blackberry, sms

我有代码

```
 DatagramConnection _dc =(DatagramConnection)Connector.open("sms://");         
            Datagram d = _dc.newDatagram(_dc.getMaximumLength());               
            _dc.receive(d); //Receive the sms
            byte[] bytes = d.getData();
            String address = d.getAddress(); //The address of the sms is put on a string.
            String msg = new String(bytes); 
```

上面的代码是连续监听传入的短信，还是只监听 1 条短信？如果它只收听 1 条短信，请您提供代码以连续收听短信。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-03T12:42:20.183

您的代码只读取一条短信。如果你需要阅读每条发送的短信，你需要一个像[官方知识库文章](http://supportforums.blackberry.com/t5/Java-Development/Different-ways-to-listen-for-SMS-messages/ta-p/445062)中这样的循环：

```
 DatagramConnection _dc = (DatagramConnection)Connector.open("sms://");
        for(;;) {
               Datagram d = _dc.newDatagram(_dc.getMaximumLength());
               _dc.receive(d);
               byte[] bytes = d.getData();
               String address = d.getAddress();
               String msg = new String(bytes);
               System.out.println( "Received SMS text from " + address + " : " + msg);
         } 
```

现在出现了一个问题：BB OS 是否以串行方式向监听应用程序发送 SMS？如果是这样（我认为是这样，但从未在该程度上进行过测试），那么您需要做的就是尽快将消息转发给消费者（否则您将在 SMS 处理期间占用连接侦听器线程）。

# facebook - 当我使用我的应用程序在墙上发布 swf 播放器时，它会在新窗口中打开

> ID：11308232
> 
> 赞同：4
> 
> 时间：2012-07-03T09:39:33.350
> 
> 标签：facebook, facebook-graph-api, flash

我的 Facebook 应用程序出现问题。

我想发布一个 swf 播放器，它可以工作，但是当用户单击图像时，swf 播放器不会出现在墙上，它会在新窗口中打开。

我该如何解决？

```
$result = $facebook->api('/' . $user_id . '/feed' , 'post' , array(
"name" => "appname",
"message" => "test",
"picture" => "http://www.domain.com/image.png", 
"link" => "http://www.domain.com",
"caption" => "test",
"description" => "test",
"source" => 'http://www.domain.com/playlist.swf?file='.$selected_value.''
)); 
```

非常感谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-29T15:02:28.833

在提要中附加 SWF 以进行内联播放当然仍然是可能的。但是，如果您指定 http SWF，那么我们只会为禁用安全模式浏览的用户启用嵌入 - 否则浏览器会生成混合内容警告。

如果您希望您的嵌入适用于所有用户，那么您应该在 https 服务器上托管 SWF。

# c++ - 如何显示默认的 C++ 对象值

> ID：11308237
> 
> 赞同：0
> 
> 时间：2012-07-03T09:39:58.910
> 
> 标签：c++

我想创建一个完全模仿内置类型的 c++ 类型。下面是一个将“int”类型“装箱”的“integer”类型的示例。我遇到的问题是，我想仅使用独立的“整数”对象 d 显示“整数”的值，这样 cout << d 将显示该值，而不是 cout << d.show ( ); 我该怎么做？

```
#include <iostream>

class integer {

      public:
             integer (int x)  { i = x; };
             integer ( ) { };   // default constructor

      integer operator+ (integer& c ){
              return integer(i + c.i);
          }

      int show ( ) { return i; }

      private:
              int i;
};

int main ( ) {

    integer i = 5;
    integer c (10);
    integer d;

    d = i + c;

    std::cout << d.show() << std::endl;

    std::cin.get();
    return 0;   
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-03T09:40:49.953

你可以重载`operator <<`来做到这一点：

```
ostream& operator <<(ostream& stream, const integer& myInteger)
{
    return stream << myInteger.show();
} 
```

并使`show` `const`.

# javascript - 保留行号并支持大多数方法的console.log 包装器？

> ID：11308239
> 
> 赞同：51
> 
> 时间：2012-07-03T09:40:06.197
> 
> 标签：javascript, logging

我如何编写一个控制台日志包装器：

*   保持日志语句记录的行号和文件名不变
*   提供对所有日志严重性方法（错误、日志、调试...）的访问，并在控制台中显示它们，因为它们记录在哪里
*   确实提供了一些回退（例如当浏览器不支持错误时调用 log 方法）
*   可以在一个中心位置关闭，所以我可以关闭生产日志
*   确实处理不存在控制台的情况，并且不抛出错误

由于在 Java Script 中登录是如此不一致，因此必须有一些解决方案。自己实现有点繁琐，但是好像没有好的库。

我目前发现这个记录器提供了所有功能，但它确实弄乱了行号。[http://benalman.com/projects/javascript-debug-console-log/](http://benalman.com/projects/javascript-debug-console-log/)

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-07-03T10:18:31.930

有我自己的[log4javascript](http://log4javascript.org/)，它有自己的日志控制台，但也提供了一个包装器[`console.log`](http://log4javascript.org/docs/manual.html#browserconsoleappender)。除了保持行号完整之外，它满足您的所有标准，如果您`console.log()`在另一个函数中包装对等的调用，这是不可能实现的。

```
var log = log4javascript.getLogger("main");
var appender = new log4javascript.BrowserConsoleAppender();
log.addAppender(appender);
log.debug("Hello world"); 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-08-23T16:00:44.283

我还推荐 log4javascript 并解释如何仍然保留有关打印文件名和行的信息，至少在 Chrome 中。

我不是在谈论更改 Chrome 打印的文件名和行，但您可以获取您感兴趣的信息并将其附加到日志语句中。我的解决方案是快速破解，但我认为通过更多的工作，您可以获得格式良好的日志语句。它可能还会对性能产生重大影响，但是由于您不会在生产中激活日志，因此这应该不是太大的问题。

## 这个概念

在 Chrome 中，您可以创建一个错误对象，该对象提供一个堆栈属性，该属性显示您当前的堆栈位置*以及*堆栈字符串中的某个位置，您可以找到调用脚本的文件和行号。

```
 > new Error().stack
  "Error
    at eval at <anonymous> (eval at evaluate (unknown source))
    at eval at evaluate (unknown source)
    at FrameMirror.evaluate (native)
    at Object.evaluate (unknown source)
    at Object._evaluateOn (unknown source)
    at Object._evaluateAndWrap (unknown source)
    at Object.evaluateOnCallFrame (unknown source)
    at meinAjaxAufruf (http://localhost:8080/numberajax.js:21:9)
    at HTMLInputElement.onkeyup (http://localhost:8080/numberajax.html:15:188)" 
```

对于 log4javascript 调用，堆栈跟踪可能如下所示：

```
"Error
    at Object.append (http://localhost:8080/log4javascript_uncompressed.js:1921:17)
    at Object.doAppend (http://localhost:8080/log4javascript_uncompressed.js:1047:9)
    at Object.callAppenders (http://localhost:8080/log4javascript_uncompressed.js:647:27)
    at Object.log (http://localhost:8080/log4javascript_uncompressed.js:640:10)
    at Object.debug (http://localhost:8080/log4javascript_uncompressed.js:748:9)
    at meinAjaxAufruf (http://localhost:8080/numberajax.js:36:16)
    at HTMLInputElement.onkeyup (http://localhost:8080/numberajax.html:16:188)" 
```

进行 log4javascript 调用并且我感兴趣的文件和行是

```
at meinAjaxAufruf (http://localhost:8080/numberajax.js:36:16) 
```

## 解决方案

我猜测从您感兴趣的脚本到实际`console`调用发生位置的堆栈深度总是相同的。所以现在你只需要找出`BrowserConsoleAppender`它的`window.console`访问位置并将你感兴趣的行添加到格式化的字符串中。我对`log4javascript_uncompressed.js`（版本 1.4.2 第 1913 行）进行了以下更改：

```
} else if (window.console && window.console.log) { // Safari and Firebug
        var formattedMesage = getFormattedMessage();

        //---my additions
        var isChrome = navigator.userAgent.indexOf("Chrome") !== -1;
        if(isChrome){
            var stack = new Error().stack;
            var lineAccessingLogger = stack.split("\n")[6];
            formattedMesage += "\n" + lineAccessingLogger;
        }
        //---

        // Log to Firebug using its logging methods or revert to the console.log
        // method in Safari
        if (window.console.debug && Level.DEBUG.isGreaterOrEqual(loggingEvent.level)) {
            window.console.debug(formattedMesage);
        } else if (window.console.info && Level.INFO.equals(loggingEvent.level)) {
        ... 
```

现在代替

```
17:53:22,872 DEBUG - sending /NumberServlet?zahl=1&text=
                                                 log4javascript.js:154 
```

我明白了

```
17:55:53,008 DEBUG - sending /NumberServlet?zahl=1&text=

    at meinAjaxAufruf (http://localhost:8080/numberajax.js:36:16) log4javascript_uncompressed.js:1930 
```

这肯定不是一个好的解决方案:)，但我得到了我需要的东西。

通过对框架的更多了解，我想可以更改 PatternLayout 的方式，您可以定义如何打印文件名/位置和行号。

**编辑**我对 PatternLayout.prototype.format 函数进行了一些修改，而不是我之前的解决方案，所以现在我可以使用附加选项 %l 来定义我想要输出调用文件及其行的位置和方式。[我以Gist](https://gist.github.com/3441763)的形式发布了我的更改和使用示例。

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2014-06-13T16:14:47.213

我们的日志包装器也遇到了这个问题，事实证明，使用部分函数应用程序有一个奇妙、简单的解决方法：

```
if(DEBUG_ENABLED && (typeof console != 'undefined')) {
    this.debug = console.log.bind(console);
}
else {
    this.debug = function(message) {};
} 
```

这样，您的浏览器将检测到您要记录的源的正确行号和文件。

* * *

## 回答 #4

> 赞同：6
> 
> 时间：2013-02-12T22:01:46.723

来自相关问题的交叉发布（[具有正确行号的 console.log 的适当包装器？](https://stackoverflow.com/questions/13815640/a-proper-wrapper-for-console-log-with-correct-line-number/14841411#14841411)）但更新了解决多种方法的解决方案。

* * *

我喜欢[@fredrik 的答案](https://stackoverflow.com/a/13815746/1037948)，所以我将它与[另一个拆分 Webkit](https://stackoverflow.com/a/3806596/1037948)堆栈跟踪的答案卷起来，并将其与[@PaulIrish 的安全 console.log 包装器](http://paulirish.com/2009/log-a-lightweight-wrapper-for-consolelog/)合并。将其“标准化”`filename:line`为“特殊对象”，因此它在 FF 和 Chrome 中脱颖而出并且看起来几乎相同。

小提琴测试：http: [//jsfiddle.net/drzaus/pWe6W/9/](http://jsfiddle.net/drzaus/pWe6W/9/)

```
_log = (function (methods, undefined) {

    var Log = Error; // does this do anything?  proper inheritance...?
    Log.prototype.write = function (args, method) {
        /// <summary>
        /// Paulirish-like console.log wrapper.  Includes stack trace via @fredrik SO suggestion (see remarks for sources).
        /// </summary>
        /// <param name="args" type="Array">list of details to log, as provided by `arguments`</param>
        /// <param name="method" type="string">the console method to use:  debug, log, warn, info, error</param>
        /// <remarks>Includes line numbers by calling Error object -- see
        /// * http://paulirish.com/2009/log-a-lightweight-wrapper-for-consolelog/
        /// * https://stackoverflow.com/questions/13815640/a-proper-wrapper-for-console-log-with-correct-line-number
        /// * https://stackoverflow.com/a/3806596/1037948
        /// </remarks>

        // via @fredrik SO trace suggestion; wrapping in special construct so it stands out
        var suffix = {
            "@": (this.lineNumber
                    ? this.fileName + ':' + this.lineNumber + ":1" // add arbitrary column value for chrome linking
                    : extractLineNumberFromStack(this.stack)
            )
        };

        args = args.concat([suffix]);
        // via @paulirish console wrapper
        if (console && console[method]) {
            if (console[method].apply) { console[method].apply(console, args); } else { console[method](args); } // nicer display in some browsers
        }
    };
    var extractLineNumberFromStack = function (stack) {
        /// <summary>
        /// Get the line/filename detail from a Webkit stack trace.  See https://stackoverflow.com/a/3806596/1037948
        /// </summary>
        /// <param name="stack" type="String">the stack string</param>

        // correct line number according to how Log().write implemented
        var line = stack.split('\n')[3];
        // fix for various display text
        line = (line.indexOf(' (') >= 0
            ? line.split(' (')[1].substring(0, line.length - 1)
            : line.split('at ')[1]
            );
        return line;
    };

    // method builder
    var logMethod = function(method) {
        return function (params) {
            /// <summary>
            /// Paulirish-like console.log wrapper
            /// </summary>
            /// <param name="params" type="[...]">list your logging parameters</param>

            // only if explicitly true somewhere
            if (typeof DEBUGMODE === typeof undefined || !DEBUGMODE) return;

            // call handler extension which provides stack trace
            Log().write(Array.prototype.slice.call(arguments, 0), method); // turn into proper array & declare method to use
        };//--  fn  logMethod
    };
    var result = logMethod('log'); // base for backwards compatibility, simplicity
    // add some extra juice
    for(var i in methods) result[methods[i]] = logMethod(methods[i]);

    return result; // expose
})(['error', 'debug', 'info', 'warn']);//--- _log 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2013-05-28T05:54:36.043

为简单起见，我为控制台方法提供了以下包装器：

```
var noop = function () {};
window.consolex = {
    debug : window.console && window.console.debug && console.debug.bind(console) || noop,
    log : window.console && window.console.log && console.log.bind(console) || noop,
    warn: window.WARN = window.console && window.console.warn && console.warn.bind(console) || noop,
    error: window.ERROR = window.console && window.console.error && console.error.bind(console) || noop
}; 
```

此外，为了更好地在 IE 和旧浏览器中登录，请阅读：[详细的控制台日志记录](http://patik.com/blog/detailed-console-logging/ "详细的控制台日志记录")

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2014-09-08T16:49:38.553

谷歌浏览器很快就会有这个线程感兴趣的功能。

您现在可以通过以下方式启用它：

1.  启用 chrome://flags/#enable-devtools-experiments
2.  单击开发工具中的 cog
3.  转到实验选项卡
4.  检查“Javascript框架调试”
5.  转到常规选项卡
6.  在来源部分下
7.  选中“跳过具有特定名称的源”
8.  在模式输入框中：输入您现在看到的文件名 (app.log.js)

重新启动并享受:)

参考：

[来自 chrom devtools 的测试](https://chromium.googlesource.com/chromium/blink/+/master/LayoutTests/inspector/console/console-log-wrapped-in-framework.html)

[devtools 问题线程](https://code.google.com/p/chromium/issues/detail?id=231007)

[开发工具代码审查](https://codereview.chromium.org/211493002)

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2015-10-04T01:28:34.470

[我在这里](https://stackoverflow.com/questions/13815640/a-proper-wrapper-for-console-log-with-correct-line-number)回答了这个问题，但简而言之，请参阅[codepen](http://codepen.io/anon/pen/pjeZPL)以获得完整的实现。但是，这可以满足您的所有需求，跨浏览器，没有错误，正确的行号，所有可用的控制台方法，全局和本地控制：

```
var Debugger = function(gState, klass) {
  this.debug = {}
  if (!window.console) return function(){}
  if (gState && klass.isDebug) {
    for (var m in console)
      if (typeof console[m] == 'function')
        this.debug[m] = console[m].bind(window.console, klass.toString()+": ")
  }else{
    for (var m in console)
      if (typeof console[m] == 'function')
        this.debug[m] = function(){}
  }
  return this.debug
} 
```

并像这样使用它：

```
isDebug = true //global debug state

debug = Debugger(isDebug, this)

debug.log('Hello Log!') 
```

* * *

## 回答 #8

> 赞同：-2
> 
> 时间：2013-07-17T19:18:12.047

我在网上找到了一个解决方案（需要 jquery），但它在大多数浏览器中都不起作用。我对其进行了更改，它可以在 Firefox（Mac、Linux.Android）、Chrome（Mac、Linux.Android）和 Safari 以及其他 Android webkit 浏览器中运行。

只需将以下代码写入名为例如 debug.js 的文件，并在网页的 <head> 部分中包含“jquery.js”后将其包含在内，它会*在页面加载后*工作（document.ready）。我仍然需要在加载所有内容*之前*进行调试（例如，只有 <head>...</head> ）。该网页必须在 URL 中使用 ?d=1 调用，并且在使用 Safari 时 ?d=1s 因为我无法区分 Safari 和用户代理中的另一个 Webkit 浏览器，并且 Safari 在行号和文件名方面具有不同的行为处理比其他 Webkit 浏览器。

函数 p_r(expression) 记录到 id #js_debug 的窗口和带有文件名和行号的控制台（如果打开）。

```
var g_d = null;

function sortObj(theObj)
{
  var sortable = [];
  for (var i in theObj) {
    sortable.push(i);
  }
  sortable.sort();

  var copy = new Object;
  for (var i in sortable) {
    var ind = sortable[i];
    copy[ind] = theObj[ind];
  }

  return copy;

}

function p_r(s, comment, level)
{
  if (!g_d) return;
  var res = s;
  var pre = new Array("","  " , "    ", "      ", "        ");
  if (comment) comment += ' : ';
  if (arguments.length<2) comment='';
  if (arguments.length<3) level = 0;
//  if (console) console.log(s);
  if (typeof(s) == 'object') {
    var copy = sortObj(s);
    comment += '\n';
    res = '[object]\n';
    if (level < 2) {
      for (var i in copy) {
        if (typeof(copy[i]) != "function")
          res += pre[level] + (i) + " : " + p_r(copy[i], '', level+1) +  " : " + typeof(copy[i]) + "\n";
      }
      res += pre[level] + "[/object]\n";
    }
  }
  else if (typeof(s) == 'function')
    res = 'function';
  else if (typeof(s) != 'string')
    res = '' + s;
  res = res.replace(/&/g, '&amp;');
  res = res.replace(/\x3C/g, '&lt;');
  res = res.replace(/>/g, '&gt;');
  if (level == 0) {
window.LOG=res;
console.log(window.LOG + comment + res);
    g_d.innerHTML += (window.LOG + comment + res + '\n');
  }
  return res;
}

if (location.href.match(/d\=[1-9]/)) {

  $(document).ready(function() {
    $("body").prepend("<div id=\"js_debugclick\" onclick=\"$('#js_debug').toggle();\">JS DEBUG</div>\
  <pre onclick=\"$('#js_debug').toggle();\" id='js_debug'></pre>\
");

    $("head").append("<style type=\"text/css\">\
pre#js_debug {\
border: solid black 1px; background-color: #1CF; color: #000; display:none; position:absolute; top: 20px;\
font-family: Lucida Console, monospace; font-size: 9pt; height: 400px; overflow:scroll; width:100%;\
z-index:100;\
} \
#js_debugclick { \
  color:red; font-weight:bold; \
} \
</style>\
");
    g_d = document.getElementById('js_debug');
  });

  var __moredebug = location.href.match(/d\=[2-9]/);

    var __issafari = /safari/.test(navigator.userAgent.toLowerCase()) && location.href.match(/d\=[1-9]s/);
    var __iswebkit = /webkit/.test(navigator.userAgent.toLowerCase());
    var __isopera  = /opera/.test(navigator.userAgent.toLowerCase());
  if (__moredebug) console.log(__issafari, __iswebkit);

/*@const*/ //for closure-compiler
//DEBUG=2 // 0=off, 1=msg:file:line:column, 2=msg:stack-trace

/*@const @constructor*/
Object.defineProperty(window,'__stack__',{get:function(){
    try{i.dont.exist()}catch(e){
if (__moredebug)  var x=e.stack.split(":"); for (i in x){console.log(i,x[i]);}
//    console.log(e.stack.split(":")[13].match(/(\d+)/)[1]);
    return e.stack.split(":")}
}})

/*@const @constructor*/
Object.defineProperty(window,'__file__',{get:function(){
    var s=__stack__,l=s.length
    var f= __issafari ? s[9] : (__isopera ? s[12] : (__iswebkit ? s[14] : s[9]));
    return f.replace(/^.+?\/([^\/]+?)\?.+?$/, "$1");
}})

/*@const @constructor*/
Object.defineProperty(window,'__line__',{get:function(){
    var s=__stack__,l=s.length
    return __issafari ? s[10].match(/(\d+)/)[1] :(__isopera ? s[13].match(/(\d+)/)[1] : (__iswebkit ? s[15] : s[10].replace(/\n/, " ").replace(/(\d+).+?$/, "$1")));
}})

/*@const @constructor*/
Object.defineProperty(window,'__col__',{get:function(){
    var s=__stack__,l=s.length
    return (isNaN(s[l-2]))?"NA":s[l-1]
}})

/*@const @constructor*/
Object.defineProperty(window,'LOG',{
    get:function(){return out},
    set:function(msg){if(0)out=msg+"\t-\t"+__stack__
        else out=__file__+" "+__line__+": ";
        }
})

}//end if(DEBUG) 
```

# ruby - ruby - json 无法成功安装包

> ID：11308240
> 
> 赞同：0
> 
> 时间：2012-07-03T09:40:07.313
> 
> 标签：ruby, json, installation, bundle

我试图安装 redmine，但在进行捆绑安装时遇到问题

安装 json (1.7.3) 时出错，Bundler 无法继续。`gem install json -v '1.7.3'`在捆绑之前确保成功。

有很少的红宝石经验，所以任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-03T10:11:54.383

当您遇到这种错误`extconf.rb:1:in 'require': no such file to load -- [something] (LoadError)`时，这意味着您系统上的某个包丢失了。

例如，在 Ubuntu 上，您可以安装`mkmf`它是`ruby18-dev`这样的一部分：

```
sudo apt-get install ruby18-dev 
```

# c++ - 确定C++中类构造函数参数的个数和类型？

> ID：11308244
> 
> 赞同：2
> 
> 时间：2012-07-03T09:40:16.917
> 
> 标签：c++, templates, constructor, preprocessor, auto-generate

如何确定类构造函数参数的数量和类型？为成员函数做到这一点只是小菜一碟：

```
template <class T, typename P0, typename P1, typename P2, typename P3>
void BindNativeMethod( void (T::*MethodPtr)(P0, P1, P2, P3) )
{
   // we've got 4 params
   // use them this way:
   std::vector<int> Params;
   Params.push_back( TypeToInt<P0>() );
   Params.push_back( TypeToInt<P1>() );
   Params.push_back( TypeToInt<P2>() );
   Params.push_back( TypeToInt<P3>() );
}

template <class T, typename P0, typename P1, typename P2, typename P3, typename P4>
void BindNativeMethod( void (T::*MethodPtr)(P0, P1, P2, P3, P4) )
{
   // we've got 5 params
   // use them this way:
   std::vector<int> Params;
   Params.push_back( TypeToInt<P0>() );
   Params.push_back( TypeToInt<P1>() );
   Params.push_back( TypeToInt<P2>() );
   Params.push_back( TypeToInt<P3>() );
   Params.push_back( TypeToInt<P4>() );
} 
```

等等其他成员。

但是如何处理类构造函数呢？有没有办法找出他们论点的类型？也许有一种根本不同的方法来解决这个问题，因为甚至不可能获取构造函数的地址？

**编辑：**我有一个 C++ 预处理器，它扫描所有源文件并拥有所有类、方法、ctor 及其确切原型的数据库。我需要基于此生成一些存根。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-25T06:00:38.020

如果我正确理解您的要求，您需要一个可以获取地址的函数，该函数可以告诉您构造函数或构造函数的参数类型。

```
#include <string>
#include <new>

template <typename T, typename P0, typename P1>
T * fake_ctor (T *mem, P0 p0, P1 p1) {
    return mem ? new (mem) T(p0, p1) : 0;
}

struct Foo {
    Foo (int, int) {}
    Foo (int, std::string) {}
};

template <class T, typename P0, typename P1>
void BindClassCtor(T *(*FakeCtor)(T *, P0, P1)) {
    std::vector<int> Params;
    Params.push_back( TypeToInt<P0>() );
    Params.push_back( TypeToInt<P1>() );
}

// PARSER GENERATED CALLS
BindClassCtor<Foo, int, int>(&fake_ctor);
BindClassCtor<Foo, int, std::string>(&fake_ctor); 
```

实现`fake_ctor`以实际调用`ctor`（即使它`fake_ctor`本身永远不会被调用）提供了一定程度的编译时健全性。如果`Foo`更改其中一个构造函数而不重新生成`BindClassCtor`调用，则可能会导致编译时错误。

**编辑：**作为奖励，我使用带有可变参数的模板简化了参数绑定。一、`BindParams`模板：

```
template <typename... T> struct BindParams;

template <typename T, typename P0, typename... PN>
struct BindParams<T, P0, PN...> {
    void operator () (std::vector<int> &Params) {
        Params.push_back( TypeToInt<P0>() );
        BindParams<T, PN...>()(Params);
    }
};

template <typename T>
struct BindParams<T> {
    void operator () (std::vector<int> &Params) {}
}; 
```

现在，`fake_ctor`现在是一个类的集合，这样每个类都可以通过可变参数列表进行实例化：

```
template <typename... T> struct fake_ctor;

template <typename T>
class fake_ctor<T> {
    static T * x (T *mem) {
        return mem ? new (mem) T() : 0;
    }
    decltype(&x) y;
public:
    fake_ctor () : y(x) {}
};

template <typename T, typename P0>
class fake_ctor<T, P0> {
    static T * x (T *mem, P0 p0) {
        return mem ? new (mem) T(p0) : 0;
    }
    decltype(&x) y;
public:
    fake_ctor () : y(x) {}
};

template <typename T, typename P0, typename P1>
class fake_ctor<T, P0, P1> {
    static T * x (T *mem, P0 p0, P1 p1) {
        return mem ? new (mem) T(p0, p1) : 0;
    }
    decltype(&x) y;
public:
    fake_ctor () : y(x) {}
}; 
```

现在 binder 函数就是这样的：

```
template <typename... T>
void BindClassCtor (fake_ctor<T...>) {
    std::vector<int> Params;
    BindParams<T...>()(Params);
} 
```

`Bar`下面是具有四个构造函数的构造函数参数绑定的说明。

```
struct Bar {
    Bar () {}
    Bar (int) {}
    Bar (int, int) {}
    Bar (int, std::string) {}
};

BindClassCtor(fake_ctor<Bar>());
BindClassCtor(fake_ctor<Bar, int>());
BindClassCtor(fake_ctor<Bar, int, int>());
BindClassCtor(fake_ctor<Bar, int, std::string>()); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-23T05:57:54.693

我会建议解决此问题的方法。我经常使用“静态实例构造函数”模式——例如反序列化一个类的实例，它是子类的，例如。

```
class BaseClass
{
private:
    BaseClass();
    virtual void InternalLoad(MyStream s) = 0;

public:
    static BaseClass * Create(MyStream s);
};

(...)

BaseClass * BaseClass::Create(MyStream s);
{
    int type;
    s >> type;

    if (type == 0)
    {
        BaseClass * result = new DerivedClass1(); // DerivedClass1 : public BaseClass
        result->InternalLoad(s);
        return result;
    }
    else if (type == 1)
    ...
} 
```

您可以轻松地在您的情况下使用此模式。只需创建一个静态实例构造函数，它是通用的并以您希望的方式处理其参数。

* * *

**编辑：**

我认为，您可以通过以下方式解决问题：

```
class MyClass
{
private:
    MyClass();

public:
    template <typename T1, typename T2>
    static MyClass * Create(T1 t, T2 u);
};

(...)

template <typename T1, typename T2>
MyClass * MyClass::Create(T1 t, T2 u)
{
    MyClass result = new MyClass();
    // Process parameters t and u here
    return result;
} 
```

然后你可以通过以下方式构建类：

```
MyClass* class = MyClass::Create(5, "Indiana Jones"); 
```

请注意，这不是一个解决方案，而是（我认为非常优雅）解决方法。

* * *

**编辑：**

我想，我现在明白了，您正在尝试做的事情以及使用静态方法而不是构造函数实际上仍然可以证明是解决您的问题的方法（但这取决于您要如何处理有关构造函数参数的信息）。

显然，您应该使用常规参数实现静态构造函数，如下所示：

```
class MyClass
{
private:
    MyClass();

public:
    static MyClass * Create(int t, char * u);
}; 
```

您应该能够检索指向静态函数的指针并将其传递给您的工具方法。

* * *

**编辑：**

既然你解释了，你真的想做什么，我建议使用类工厂（首选）或静态构造函数，如前所述。这样，您始终可以检索指向所需方法（静态或非静态）的指针，并在当前架构中使用它（基于您提供的代码）。

另外，看看 C#/11 中的 std::function<> 和 lambdas。我想，它们可能会使您的架构变得更简单。

# ios - Google 双击 GADDoubleClickParameters.h 文件未找到 ios

> ID：11308245
> 
> 赞同：0
> 
> 时间：2012-07-03T09:40:23.193
> 
> 标签：ios, double-click

我想在我的 iPad 中实现 Google Double Click。我正在关注

```
https://developers.google.com/adsense-for-mobile-apps/docs/ios/doubleclick/ 
```

在设置部分文档中指定复制 GADDoubleClickParameters.h 文件。

我进行了很多搜索，但无法在 SDK 中获取此文件。我得到的SDK是

```
https://developers.google.com/mobile-ads-sdk/download#downloadios 
```

如果我遵循上述指南，有人可以指导我如何在 ios 中实现双击。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-03T09:56:20.123

我认为 Google AdSense Mobile 和 Google AdMob Ads 之间存在不匹配；GADDoubleClickParameters.h 是表单所必需的，而您正在下载后者。

Google AdMob Ads 似乎取代了 AdSense Mobile：

> 与之前的 AdMob 和 AdSense 移动应用程序 SDK 相比，新的 SDK 提供了许多优势，并在我们努力实现单一、全面的应用获利解决方案时奠定了框架。主要功能包括访问最新的广告单元、适用于 Android 的平板电脑格式、iOS 4.3 和 Windows Phone 7 支持。（[来源](https://developers.google.com/mobile-ads-sdk/kb/)）

如果您想使用 Google AdMob Ads，我建议您查看 Google 提供的示例项目。

希望能帮助到你。

# php - php中服务器验证后如何避免数据丢失？

> ID：11308249
> 
> 赞同：0
> 
> 时间：2012-07-03T09:40:32.220
> 
> 标签：php, html, forms

在我的创建页面中，我正在使用一个或多个文件上传文本框，选择框，表单内的文本框，填写所有表单数据并提交后，我将进行服务器验证然后插入数据库...插入数据库之前，如果服务器验证失败，填充的数据会丢失，有没有简单的方法可以防止数据丢失？

对于选择和文本框，我们可以传递`$_POST`

但是对于文件上传文本框，如何防止数据丢失呢？我们可以在会话中存储吗？

提前致谢..

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-03T09:46:33.910

那么您可以使用一些变量来存储数据，然后您可以执行验证

好吧，我给出了一个 php 验证的例子

```
<?php
  if(isset($_POST['submit'])){
    $name = $_POST['name'];  //
    // and some other data input
    and goes the validation part

?>

<form ... >
<input type="text" name="name" value="<?php if(isset($name)) echo $name; ?>"
</form> 
```

好吧..这必须有效..您可能会找到其他更好的方法..但这也可以

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-03T10:36:03.980

据我所知，您不能像其他表单元素一样维护文件上传值。

如果您仍想维护 $_FILES 值。你可以带他们参加会议。

```
$_SESSION['imagename'] = $_FILES['image']['name'];
$_SESSION['imagetmp']  = $_FILES['image']['tmp_name']; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-03T11:31:06.417

除了 type="file" 输入字段外，您可以将数据保存在变量中并稍后填充。如果可以预先填充文件（或者说未经用户许可选择）并且浏览器不允许这样做，这将是一个安全问题。

一种选择是将文件保存在服务器中的任何临时文件夹中，如果验证正常，请将其移动到上传目录。

另一种选择是在步骤中显示您的表单（在页面中）并在最后一步中显示文件上传选项，以便用户在所有验证后到达文件上传部分，您可以在最后一步中进行文件上传验证。

# c++ - 如何在 explorer.exe 中更改 NotifyIcon 的上下文菜单？

> ID：11308258
> 
> 赞同：2
> 
> 时间：2012-07-03T09:41:04.187
> 
> 标签：c++, explorer, notifyicon, dll-injection, easyhook

我想用新项目扩展默认扬声器通知的（托盘图标）右键单击上下文菜单。另外，我想使用 C++ 处理鼠标点击。

**插图**

![在此处输入图像描述](../Images/e1993c1a47fa5933532c20ef9943cd22.png)

**到目前为止我所知道的**

我学习了如何使用*CreateRemoteThread()*进行 dll 注入，因为我认为这是要走的路。我的问题是：在注入的 dll 里面做什么？例如，如何访问 NotifyIcon 对象？

也许可以通过简单的 Windows API 调用，但我不熟悉它。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-06T11:56:33.683

感谢卢克的提示。我使用[EasyHook](http://easyhook.codeplex.com/)让它工作。我选择了它，因为它还支持 64 位 dll-inject。

**DLL注入：**

```
using System;
using System.IO;
using System.Runtime.InteropServices;
using System.Threading;
using EasyHook;
namespace InjectDLL
    {
    public class Main : EasyHook.IEntryPoint
    {
        LocalHook CreateTrackPopupMenuExHook;
        public Main(RemoteHooking.IContext InContext){}
        public void Run(RemoteHooking.IContext InContext)
        {
            try
            {
                CreateTrackPopupMenuExHook = LocalHook.Create(
                    LocalHook.GetProcAddress("user32.dll", "TrackPopupMenuEx"),
                    new DTrackPopupMenuEx(TrackPopupMenuEx_Hooked),
                    this);
                CreateTrackPopupMenuExHook.ThreadACL.SetExclusiveACL(new Int32[] { 0 });
            }
            catch
            {
                return;
            }
            while (true)
            {
                Thread.Sleep(500);
            }
        }

        [DllImport("user32.dll", CharSet = CharSet.Auto, SetLastError = true)]
        private static extern bool AppendMenu(IntPtr hMenu, long uFlags, int uIDNewItem, string lpNewItem);

        [DllImport("user32.dll", CharSet = CharSet.Auto, SetLastError = true, CallingConvention = CallingConvention.StdCall)]
        static extern IntPtr TrackPopupMenuEx(
            IntPtr hMenu,
            uint fuFlags,
            int x,
            int y,
            IntPtr hwnd,
            IntPtr lptpm);

        [UnmanagedFunctionPointer(CallingConvention.StdCall, CharSet = CharSet.Auto, SetLastError = true)]
        delegate IntPtr DTrackPopupMenuEx(
            IntPtr hMenu,
            uint fuFlags,
            int x,
            int y,
            IntPtr hwnd,
            IntPtr lptpm);

        const long MF_STRING = 0x00000000L;
        const long MF_SEPARATOR = 0x00000800L;

        static IntPtr TrackPopupMenuEx_Hooked(
            IntPtr hMenu,
            uint fuFlags,
            int x,
            int y,
            IntPtr hwnd,
            IntPtr lptpm)
        {
            IntPtr returnValue = IntPtr.Zero;
            try
            {
                    //Separator
                    AppendMenu(hMenu, MF_SEPARATOR, 0, null);
                    //New menu item
                    AppendMenu(hMenu, MF_STRING, 40010, "TestMenuItem");
                    //call the default procedure
                    returnValue = TrackPopupMenuEx(hMenu, fuFlags, x, y, hwnd, lptpm);
                    //our menu item is selected
                    if (returnValue == (IntPtr)40010)
                    {
                        /* CODE HERE */
                        returnValue = IntPtr.Zero;
                    }
                    return returnValue;
            }
            catch
            {
                return;
            }
            return returnValue;
        }
    }
} 
```

# java - ChooserActivity 泄露了 IntentReceiver

> ID：11308260
> 
> 赞同：1
> 
> 时间：2012-07-03T09:41:11.850
> 
> 标签：java, android, debugging, android-activity, memory-leaks

```
E/ActivityThread(  655): Activity com.android.internal.app.ChooserActivity has
leaked IntentReceiver com.android.internal.app.ResolverActivity$1@412f4f38 
that was originally registered here. 

Are you missing a call to unregisterReceiver()? E/ActivityThread(  655): 
android.app.IntentReceiverLeaked: 
Activity com.android.internal.app.ChooserActivity has leaked IntentReceiver 
com.android.internal.app.ResolverActivity$1@412f4f38 that was originally 
registered here. Are you missing a call to unregisterReceiver()? 
```

1.  这个错误是什么意思？
2.  由于应用程序继续工作，我应该忽略它吗？
3.  我该如何解决？

当我按照[此处](http://www.coderzheaven.com/2012/04/20/select-an-image-from-gallery-in-android-and-show-it-in-an-imageview/)发布的例程从手机图库中选择图像时，就会发生这种情况。正是当我按下 Activity 布局中定义的浏览图库按钮时。

* * *

**完整的 LOGCAT：**

```
E/ActivityThread(  655):    at android.app.LoadedApk$ReceiverDispatcher.<init>(LoadedApk.java:763)
E/ActivityThread(  655):    at android.app.LoadedApk.getReceiverDispatcher(LoadedApk.java:567)
E/ActivityThread(  655):    at android.app.ContextImpl.registerReceiverInternal(ContextImpl.java:1043)
E/ActivityThread(  655):    at android.app.ContextImpl.registerReceiver(ContextImpl.java:1030)
E/ActivityThread(  655):    at android.app.ContextImpl.registerReceiver(ContextImpl.java:1024)
E/ActivityThread(  655):    at android.content.ContextWrapper.registerReceiver(ContextWrapper.java:341)
E/ActivityThread(  655):    at com.android.internal.content.PackageMonitor.register(PackageMonitor.java:65)
E/ActivityThread(  655):    at com.android.internal.app.ResolverActivity.onCreate(ResolverActivity.java:99)
E/ActivityThread(  655):    at com.android.internal.app.ChooserActivity.onCreate(ChooserActivity.java:53)
E/ActivityThread(  655):    at android.app.Activity.performCreate(Activity.java:4465)
E/ActivityThread(  655):    at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1049)
E/ActivityThread(  655):    at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1920)
E/ActivityThread(  655):    at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:1981)
E/ActivityThread(  655):    at android.app.ActivityThread.access$600(ActivityThread.java:123)
E/ActivityThread(  655):    at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1147)
E/ActivityThread(  655):    at android.os.Handler.dispatchMessage(Handler.java:99)
E/ActivityThread(  655):    at android.os.Looper.loop(Looper.java:137)
E/ActivityThread(  655):    at android.app.ActivityThread.main(ActivityThread.java:4424)
E/ActivityThread(  655):    at java.lang.reflect.Method.invokeNative(Native Method)
E/ActivityThread(  655):    at java.lang.reflect.Method.invoke(Method.java:511)
E/ActivityThread(  655):    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:784)
E/ActivityThread(  655):    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:551)
E/ActivityThread(  655):    at dalvik.system.NativeStart.main(Native Method) 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-31T02:53:39.203

我知道这是较旧的，但是我遇到了同样的问题，并且认为我偶然发现了答案，尽管这很奇怪。

在模拟器中，如果您执行某些操作以导致应用程序选择器（例如共享意图）或选择图库应用程序，则它似乎只有在只有一个应用程序的情况下才会出现异常，并且在您没有选择的情况下自动加载该应用程序。

例如，您想选择一张图片。如果您运行例程来选择图像，您很可能会在手机的选择器对话框中出现一些选择。但是在模拟器上，除了默认的 Gallery 应用程序之外，您几乎没有其他任何东西。

当它只有一个应用程序并加载时，您会得到一个异常。

如果您有多个应用程序可供选择，则不会出现异常。

如果您想共享文本文件，也会发生同样的事情。在模拟器上，文本文件会直接自动加载一个消息应用程序，你会得到一个异常。

![在此处输入图像描述](../Images/51f939e4f09826e318247102fcf41423.png)

如果您设置电子邮件应用程序，它将在选择器中显示两个应用程序。你不会有任何例外。

![在此处输入图像描述](../Images/5c01c23b8b9ee0d95f91f63241c176dd.png)

**我相信您可以放心地忽略这一点，因为它似乎是一个内部错误消息。**

**您可以尝试通过安装第二个图库应用程序来重现此问题，以查看它不会创建错误消息。**

我刚刚注意到这也描述了相同的建议[https://stackoverflow.com/a/10290486/935779](https://stackoverflow.com/a/10290486/935779)

如果你真的想避免这个异常，它有一个更复杂的工作。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-03T10:27:37.710

这是关于生命周期的。

这意味着您已经注册了`IntentReceiver`某个地方，但在您的应用程序被 Android 暂停之前它未能取消注册。

您应该在`onPause`方法中取消注册接收器并`onRestart`重新注册接收器。所以覆盖这些方法并按照我的意思去做。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-04T10:04:26.243

此错误似乎是由 Android 源代码中的错误引起的，因为我从未`Intent Receiver`在我的源代码中注册过。

您还可以查看这个 SO question 了解详细信息[为什么 Intent.createChooser() 需要 BroadcastReceiver 以及如何实现？](https://stackoverflow.com/questions/10068954/why-does-intent-createchooser-need-a-broadcastreceiver-and-how-to-implement).

它清楚地表明`ResolverActivity`注册了 a `BroadcastReceiver`，但并不总是取消注册它。

此外：

> Intent.createChooser() 将启动一个 ResolverActivity。在 onCreate() 中，活动调用

```
mPackageMonitor.register(this, false); 
```

> mPackageMonitor 是一个 BroadcastReceiver 并在`register()`其中注册自己的活动。通常，接收方未在`onStop()`. 但是，稍后在`onCreate()`代码中检查用户可以选择多少选项。如果只有一个，它会调用`finish()`. 由于`finish()`在`onCreate()`其他生命周期方法中被调用，因此永远不会被调用，它会直接跳转到 `onDestroy()`- 泄漏接收器。

**但我不知道该错误是否已修复，也许有人可以提供更多信息？**

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-05T20:32:53.313

如果您正在阅读这篇文章并在仅返回一个可供选择器使用的应用程序时收到此错误，则很可能是 Android 错误。[这里](http://code.google.com/p/android/issues/detail?id=29399)提出了一个问题。

通过阅读其他报告，似乎没有什么可以做的......

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-02-12T12:36:33.687

我不是 100% 确定，但如果它工作正常并且抛出异常，你可能不需要对此做任何事情。这可能是您设备的问题，例如，供应商 Android 操作系统自定义错误。尝试在模拟器上测试它，如果它不会抛出异常，就让它保持原样。我认为你的代码很好。

# php - 在一个函数里面创建一个函数成一个类？

> ID：11308264
> 
> 赞同：0
> 
> 时间：2012-07-03T09:41:31.877
> 
> 标签：php

我正在尝试创建一些类，我想使用这种语法：

```
$my = new My();
$my->field()->test('test'); 
```

我知道如何做 a `$my->test('test')`，这很容易 - 但我不知道如何添加`field()`属性以便更容易理解我的代码中的类。

我可以猜想它就像一个类到另一个类 - 扩展 - 但我不确定，所以如果你知道如何做类似的事情。

我准确地说，这只是为了更好地理解我的课程。我的意思是目的是对这个`My`类中的函数进行分类。

谢谢 ：）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-03T09:50:23.187

如果你把你的 php 分解一下，你就会明白发生了什么。例如，让我们这样做：

```
$my->field()->test('test'); 
```

进入这个（澄清）。

```
$newObject = $my->field();
$newObject->test('test'); 
```

从这里您可以观察到方法 $my->field() 的返回实际上是一个对象，带有另一个方法测试，然后您可以调用它。它被称为方法链，有时很有用。

这是一个测试用例：

```
class a{
    public function My(){
        return new b;
    }
}

class b{
    public function foo(){
        echo 'hello bar';
    }
}

$a = new a();
$a->My()->foo(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-03T14:46:30.523

为了对方法执行操作，该方法需要返回一个对象。

```
class a {
   public function b($c){
       echo $c;
       return $this;
   }
 } 
```

将允许

```
$d = new a();
$d->b("foo")->b("bar");
$d->b("foo")->b("bar")->b("far")->b("tar"); 
```

# c++ - 不同文件的类声明

> ID：11308267
> 
> 赞同：6
> 
> 时间：2012-07-03T09:41:46.673
> 
> 标签：c++, class, declaration

我无法在本网站的其他地方找到类似的问题，但是否可以在两个不同的文件上声明一个类。

例如，一个文件中的所有公共类组件和不同文件中的私有和其他组件。

公众.h

```
 class test {
     public:
        int geta();
        void seta(int); 
    }; 
```

私人的.h

```
 class test {
     private:
        int a;
    }; 
```

上面的方法肯定是错误的，但是有没有这样的方法。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-07-03T09:49:37.117

有一种方法可以得到非常相似的东西：[私有继承](http://www.parashift.com/c++-faq-lite/private-inheritance.html)。

```
// private.hpp
class test_details {
  protected:
    int a;
};

// public.hpp

#include "private.hpp"

class test : private test_details {
  public:
    int geta() const { return a; }
    void seta(int i) { a = i; }
}; 
```

请注意，您仍然需要（间接）在使用公共类的任何模块中包含私有标头，因此您并没有真正以这种方式隐藏任何东西。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-07-03T09:43:35.243

并非如此，但[**pimpl** idiom（或不透明指针，或 Chesshire 猫）](http://en.wikipedia.org/wiki/Opaque_pointer)可以帮助您实现类似的功能 - 您可以提供一个公共接口，其中所有实现细节都隐藏在实现成员中。

C++ 不支持部分类。

另外，请注意，您所拥有的是类定义，而不是声明。C++ 规定，如果一个类的多个定义可用，它们必须是相同的，否则就是未定义的行为。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-03T09:45:59.363

这是抽象基类的一个很好的用例

```
 //File test.h
 class test {
     public:
        virtual ~test() {}
        virtual int geta()=0;
        virtual void seta(int)=0; 
    };

 //File test_impl.h
 class test_impl : public test {
     public:
        int geta() { return a; }
        void seta(int a ) { a = v; }
     private:
        int a;
    }; 
```

# ruby-on-rails - Rubymine - 如何格式化代码

> ID：11308268
> 
> 赞同：15
> 
> 时间：2012-07-03T09:41:52.620
> 
> 标签：ruby-on-rails, ide, rubymine

我正在使用 JetBrains Rubymine 来开发 Rails 应用程序。这是一个很棒的 IDE，但不幸的是我没有找到如何格式化 hTML 或 Ruby 代码。

有什么建议吗？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-07-03T09:49:23.847

`Ctrl + Alt + I`对于自动缩进行

[更多](https://shortcutworld.com/RubyMine/linux/JetBrains-RubyMine_Shortcuts)键盘映射。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2014-12-10T15:45:14.320

在 OS X 键盘映射中试试这个：`⌘</kbd>+`Alt`+`L``

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2012-07-03T22:21:15.613

`Code`| `Reformat Code...`（ Windows 默认键盘映射中的`Ctrl`+ `Alt`+ `L`）。

# php - 在 php 中使用 curl 与单独文件中的客户端证书和私钥

> ID：11308270
> 
> 赞同：19
> 
> 时间：2012-07-03T09:42:07.157
> 
> 标签：php, curl, certificate

我需要一些帮助来重写这个使用`*.pem` ( `CA cert`) 的 PHP curl 代码，`Client cert`并`private key`在一个文件中：

```
curl_setopt($curl, CURLOPT_URL, $this->url);
curl_setopt($curl, CURLOPT_HEADER, 0);
curl_setopt($curl, CURLOPT_POST, true);
curl_setopt($curl, CURLOPT_SSL_VERIFYPEER, FALSE);
curl_setopt($curl, CURLOPT_SSLCERT, $this->keystore);
curl_setopt($curl, CURLOPT_CAINFO, $this->keystore);
curl_setopt($curl, CURLOPT_SSLKEYPASSWD, $this->keystorepassword);
curl_setopt($curl, CURLOPT_POSTFIELDS, $post);
curl_setopt($curl, CURLOPT_RETURNTRANSFER, true); 
```

所以它可以使用`CA certificate`,`Client Certificate`和`Private Key`在单独的文件中。

就像在这个命令行示例中一样：

> `curl -d "var1=value1&var2=value2&..." -G -v --key key.pem --cacert ca.pem --cert client.pem:xxxxxx https://www.somesite.com/page`

* * *

## 回答 #1

> 赞同：40
> 
> 时间：2012-07-03T11:49:03.923

这是一个 PHP 脚本，其中包含您的命令行调用的文字翻译：

```
<?php

  $data = "var1=value1&var2=value2&...";
  $url = "https://www.somesite.com/page";

  $keyFile = "key.pem";
  $caFile = "ca.pem";
  $certFile = "client.pem";
  $certPass = "xxxxxx";

  // Initialise cURL
  $ch = curl_init($actualUrl);

  // The -d option is equivalent to CURLOPT_POSTFIELDS. But...
  // PHP's libcurl interface does not implement the -G flag - instead you would
  // append $data to $url like this:
  $actualUrl = $url.'?'.$data;
  curl_setopt($ch, CURLOPT_URL, $actualUrl);

  // The -v flag only makes sense at the command line, but it can be enabled
  // with CURLOPT_VERBOSE - in this case the information will be written to
  // STDERR, or the file specified by CURLOPT_STDERR. I will ignore this for
  // now, but if you would like a demonstration let me know.

  // The --key option - If your key file has a password, you will need to set
  // this with CURLOPT_SSLKEYPASSWD
  curl_setopt($ch, CURLOPT_SSLKEY, $keyFile);

  // The --cacert option
  curl_setopt($ch, CURLOPT_CAINFO, $caFile);

  // The --cert option
  curl_setopt($ch, CURLOPT_SSLCERT, $certFile);
  curl_setopt($ch, CURLOPT_SSLCERTPASSWD, $certPass);

  /*
    Now we should get an identical request to the one created by your command
    line string, let's have a look at some of the other options you set...
  */

  // CURLOPT_HEADER is disabled by default, there's no need for this unless you
  // enabled it earlier
  //curl_setopt($ch, CURLOPT_HEADER, 0);

  // Your command line string forces a GET request with the -G option, are you
  // trying to POST or GET?
  //curl_setopt($ch, CURLOPT_POST, true);

  // We don't need body data with a GET request
  //curl_setopt($ch, CURLOPT_POSTFIELDS, $post);

  // Since we've gone to all the trouble of supplying CS information, we might
  // as well validate it!
  //curl_setopt($ch, CURLOPT_SSL_VERIFYPEER, FALSE); 
```

# iphone - UITableView 一次添加一个带有动画的行，延迟显着

> ID：11308271
> 
> 赞同：4
> 
> 时间：2012-07-03T09:42:19.937
> 
> 标签：iphone, objective-c, ios, uitableview

我正在尝试向 tableView 添加 10 行，但不是在 for 循环中使用 insertRowsAtIndesPaths reloadData im，而是一次添加一行，而是在最后添加所有 10 行。这是我的代码...

```
if([[[[[notification userInfo] objectForKey:@"cityevent"]objectForKey:@"events"]objectForKey:@"event"] isKindOfClass:[NSArray class]])
{
    [self.featuredEventTableView beginUpdates];
    for(NSDictionary *tempDict in [[[[notification userInfo] objectForKey:@"cityevent"]objectForKey:@"events"]objectForKey:@"event"])
    {
        ESEvent *event=[[ESEvent alloc]init];
        event.name=[tempDict objectForKey:@"name"];
        if([[tempDict objectForKey:@"image"]isKindOfClass:[NSNull class]] || [tempDict objectForKey:@"image"] ==nil)
            event.image=[UIImage imageNamed:@"category_default.png"];
        else
        {
            event.image=[UIImage imageWithData:[NSData dataWithContentsOfURL:[NSURL URLWithString:[tempDict objectForKey:@"image"]]]];
        }
        [events addObject:event];        
        NSIndexPath *ip=[NSIndexPath indexPathForRow:([events count]-1) inSection:0];
        NSLog(@"row: %i section: %i",ip.row,ip.section);
        [self.featuredEventTableView insertRowsAtIndexPaths:[NSArray arrayWithObject:ip] withRowAnimation:UITableViewRowAnimationRight];
        [self.featuredEventTableView endUpdates];
    }
} 
```

有什么建议么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-03T09:46:31.937

将您的开始更新呼叫移动到`insertRowsAtIndexPaths:`呼叫之前。看看是否有帮助。我很惊讶这完全有效，因为您多次调用 end update 但只启动一次。

实际上，这可能仍然会如此之快，以至于您甚至都没有注意到。查看`NSTimer`或 GCD`dispatch_after`以错开更新。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-03T09:45:06.647

在这种情况下，for 循环无关紧要 - 操作系统会累积所有动画动作并将它们一起提交。为此，您必须使用动画停止选择器并调用外部方法来添加下一个单元格，直到添加完所有单元格。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-03T11:48:10.563

没有一个答案奏效。我使用 NSTimer 如下...

```
 tableTimer=[NSTimer scheduledTimerWithTimeInterval:0.4f target:self selector:@selector(performTableUpdates:) userInfo:[NSDictionary dictionaryWithObjectsAndKeys:[NSNumber numberWithInt:i],@"count", nil] repeats:YES]; 
```

和

```
-(void)performTableUpdates:(NSTimer*)timer
{
    NSLog(@"%i",i);
    NSIndexPath *ip=[NSIndexPath indexPathForRow:i inSection:0];
    [newArray addObject:[events objectAtIndex:i]];
    [self.featuredEventTableView beginUpdates];
    [self.featuredEventTableView insertRowsAtIndexPaths:[NSArray arrayWithObject:ip] withRowAnimation:UITableViewRowAnimationLeft];
    [self.featuredEventTableView endUpdates];

    if(i<[events count])
    {
        if([events count]-i==1)
        {
            [tableTimer invalidate];
            i++;
        }
        else
            i++;
    }
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-03T10:01:39.053

为什么你不使用 reloadData ...我想这将帮助你在你的 UI 上显示什么。如果您使用 for 循环并将一个数据添加到您的实际数组中，最后如果您调用 reload，它会给您带来这种效果。

如果您想继续使用现有代码而不是`[NSThread sleepForTimeInterval:0.5];`在我猜后尝试添加`[self.featuredEventTableView endUpdates];`。我不在我的mac上，所以无法测试它。这将暂停当前线程一段时间，因此它会产生动画效果。

**编辑**尝试下面的代码

```
if([[[[[notification userInfo] objectForKey:@"cityevent"]objectForKey:@"events"]objectForKey:@"event"] isKindOfClass:[NSArray class]])
        {
            for(NSDictionary *tempDict in [[[[notification userInfo] objectForKey:@"cityevent"]objectForKey:@"events"]objectForKey:@"event"])
            {
                ESEvent *event=[[ESEvent alloc]init];
                event.name=[tempDict objectForKey:@"name"];
                if([[tempDict objectForKey:@"image"]isKindOfClass:[NSNull class]] || [tempDict objectForKey:@"image"] ==nil)
                   event.image=[UIImage imageNamed:@"category_default.png"];
                else
                {
                    event.image=[UIImage imageWithData:[NSData dataWithContentsOfURL:[NSURL URLWithString:[tempDict objectForKey:@"image"]]]];
                }
                [events addObject:event];

                NSIndexPath *ip=[NSIndexPath indexPathForRow:([events count]-1) inSection:0];
                NSLog(@"row: %i section: %i",ip.row,ip.section);

// If this don't work then add thread sleep code at here.

[self.featuredEventTableView beginUpdates];             
   [self.featuredEventTableView insertRowsAtIndexPaths:[NSArray arrayWithObject:ip] withRowAnimation:UITableViewRowAnimationRight];
                [self.featuredEventTableView endUpdates];
            }

        } 
```

# javascript - IEEE 754：Javascript 与 C

> ID：11308272
> 
> 赞同：0
> 
> 时间：2012-07-03T09:42:22.573
> 
> 标签：javascript, c, floating-point, ieee-754

据我了解，著名的

```
 (0.1 + 0.2) !== 0.3 
```

gotcha 实际上不是 Javascript 的错。这正是 IEEE 754 的工作方式。类似的输出发生在 Python 中，它也遵循 IEEE 754 规则。

那么这个特定示例如何在 C 中按预期工作，*有时*. 如果我做一个直接比较

```
printf("%d\n", (0.1+0.2) == 0.3); 
```

我得到了（未？）预期的输出`0`，但是如果我将这些值放入变量中或将它们打印出来，我会得到正确四舍五入的答案。

[C 可运行示例](http://codepad.org/QCLg3bto)

IEEE 754 的 C 实现是否做了额外的事情？还是我完全错过了其他东西。

**更新**

我发布的代码示例由于拼写错误而损坏。试试这个 [Fixed C Runnable Example](http://codepad.org/rFmXjLWS)

但原来的问题仍然存在。

```
double d1, d2, d3;
d1 = 0.1;    d2 = 0.2;    d3 = d1 + d2;
printf ("%d\n", ((((double)0.1)+((double)0.2)) == ((double)d3)));
printf ("%.17f\n", d1+d2);
printf ("%d\n", ((d1+d2) == d3)); 
```

输出是

```
1
0.30000000000000004
1 
```

现在改写的问题是：

1.  为什么（以及何时以及如何）C 编译器冒昧地说

    0.3 == 0.30000000000000004

2.  鉴于所有事实，C 实现不是真的坏了，而不是 Javascripts'？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-03T10:04:37.737

> 为什么（以及何时以及如何）C 编译器冒昧地说
> 
> ```
>  0.3 == 0.30000000000000004 
> ```
> 
> 鉴于所有事实，C 实现不是真的坏了，而不是 Javascripts'？

它不是。

给出的输出来自以下代码：

```
printf ("%d\n", ((((double)0.1)+((double)0.2)) == ((double)d3))); 
```

但你写道：

```
d1 = 0.1;    d2 = 0.2;    d3 = d1 + d2; 
```

所以`d3`不是，*而是* `0.3``0.30000000000000004`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-03T09:58:21.510

```
`printf("%d\n", (0.1+0.2) == 0.3);` 
```

这些是 DOUBLEs 而不是 FLOATs。

做：

```
printf("%d\n", (0.1+0.2) == 0.3);
printf("%d\n", (0.1f+0.2f) == 0.3f); 
```

瞧！

[http://codepad.org/VF9svjxY](http://codepad.org/VF9svjxY)

```
Output:
0
1 
```

看看这个问题。这是关于其他的，但是使用 GCC 的 ppl 得到的结果与使用 MSVC 的 ppl 不同。 [打印浮点数的整数部分](https://stackoverflow.com/questions/10912128/printing-the-integral-part-of-a-floating-point-number/10912657#10912657)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-03T09:53:30.890

您的示例代码使用 1、2 和 (1+2)，它们都可以用双精度浮点数精确表示。另一方面，0.1 不能完全用浮点数表示，因此你得到了这个数字的近似值。将大约 0.1 添加到大约 0.2 时，您将得到大约 0.3，但这是否与编译器在表示 0.3 时选择的近似值完全相同，谁知道呢。

表示使用二进制。这意味着它使用 1/2, 1/4, 1/8, 1/16, 1/32 （等等到一些精度......）。这意味着可以准确地表示 0.5、0.25 等。不是二进制分数的精确和的数字可以非常接近地近似。

解决方案：不要相互比较浮点数。将它们的差异与您不关心的一些小数字进行比较。

```
#define EPSILON 0.000001
printf("%d", fabs((0.1+0.2) - 0.3 ) < EPSILON ); 
```

我不确定为什么 C 代码有效而 python/javascript 无效。这是魔法。但希望无论如何这都能回答你的问题。

# javascript - 我的 JS 代码中的会话开始事件

> ID：11308276
> 
> 赞同：1
> 
> 时间：2012-07-03T09:42:48.457
> 
> 标签：javascript, html, session, session-storage

有什么方法可以在 javascript 代码中捕获 session-start 事件？

现在发生的情况是，如果 sessionStorage 有一个特定的键，我需要检查任何页面加载事件，如果它是错误的 - 我将新的键/值对添加到 sessionStorage。像这样的东西：

```
if(sessionStorgae.Registered) {
    // do something
}
else {
    sessionStorage.SetItem("Registered", "0")
} 
```

我很想在页面加载时添加密钥而不检查它的存在。是否有可能使用一种客户端会话开始事件？

我会很感激任何建议，本

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-03T09:54:19.610

你可以简单地听`load`文档的事件。使用 jQuery，您可以编写：

```
$(document).ready(function() {
  // Assume that sessionStorage is ready
}); 
```

如果您不想监听任何页面事件，只需将您的 JS 移动到 HTML 页面的底部。

# swing - 在 Scala 的 Swing Frame 上指定一个框架图标

> ID：11308277
> 
> 赞同：0
> 
> 时间：2012-07-03T09:42:51.097
> 
> 标签：swing, scala, icons, nimbus

如何在 Scala 的`scala.swing.Frame`类上设置新的框架图标？`Frame.iconImage: Image`和背后的意图是什么`Frame.iconify()`？我想不通，他们在做什么。

这是我的最后一次尝试

```
import scala.swing.Frame

class MyFrame extends Frame {
  iconImage = toolkit.getImage("src/main/resources/icon.png")
  visible = true
} 
```

我还尝试了其他几种方法，但没有任何效果。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-03T12:29:49.850

你在那里的东西应该可以工作，但如果 getImage 找不到文件，它会默默地失败。由于您有一个相对路径，这可能是因为您的代码没有在您想要的目录中执行。

在 Ubuntu 上，这应该突出差异。我得到一个带有笑脸图标的窗口和一个带有标准 java 图标的窗口。

```
new Frame() {
  iconImage = toolkit.getImage("/usr/share/icons/gnome/16x16/emotes/stock_smiley-10.png")
  size = new Dimension(200, 200)
  visible = true
}
new Frame() {
  iconImage = toolkit.getImage("xxx")
  size = new Dimension(200, 200)
  visible = true
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-03T12:41:03.260

我猜你在 OS X 上。遗憾的是，图标装饰不适用于 OS X 的外观和感觉，也不适用于似乎没有特定窗口装饰的 Nimbus 外观（使用标题栏来自操作系统）。

因此，您将需要一个可以绘制自己的窗口标题栏的外观：

```
import scala.swing._
import javax.swing._
UIManager.setLookAndFeel(new plaf.metal.MetalLookAndFeel)
JFrame.setDefaultLookAndFeelDecorated(true)

val f = new Frame {
   iconImage = toolkit.getImage(new java.net.URL(
      "http://www.scala-lang.org/sites/default/files/favicon.gif"))
   size = new Dimension(200, 200)
   visible = true
} 
```

OS X 窗口标题栏的唯一机会是，如果您想用用于特定文件的默认图标进行装饰。

在这里寻找：http `Window.documentFile`: [//developer.apple.com/library/mac/#technotes/tn2007/tn2196.html#//apple_ref/doc/uid/DTS10004439](http://developer.apple.com/library/mac/#technotes/tn2007/tn2196.html#//apple_ref/doc/uid/DTS10004439)

# php - if条件下的变量运算符

> ID：11308278
> 
> 赞同：0
> 
> 时间：2012-07-03T09:42:54.143
> 
> 标签：php, variables, sorting, operator-keyword, bubble-sort

我正在做一个冒泡排序功能并遇到变量运算符问题。开头有一个switch块来决定是升序还是降序排序。$ 运算符旨在用于以下 if 条件。

* * *

```
<?php
//bubble sort in ascending/descending order
function bubbleSort($arr, $operation="ascending"){
    switch ($operation){
        case "ascending":
            $operator = ">";
            break;
        case "descending":
            $operator = "<";
            break;
    }
    //each loop put the largest number to the top
    for ($i=0; $i<count($arr)-1; $i++){

        //compare adjacent numbers
        for ($j=0; $j<count($arr)-1-$i; $j++){

            //exchange the adjacent numbers that are arranged in undesired order
            if ($arr[$j]>$arr[$j+1]){
                $temp = $arr[$j];
                $arr[$j] = $arr[$j+1];
                $arr[$j+1] = $temp;
            }
        }
    }
    return $arr;
}
$arr1 = array(1000,10,2,20,-1,-6,-8,0,101);
$arr1 = bubbleSort($arr1, "ascending");
print_r($arr1);
?> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-03T09:45:45.017

虽然从技术上讲，可以将运算符 (`<`或`>`) 放在字符串中并从中编译出一个表达式（使用`eval()`），但大多数时候您既不需要也不想要这个。简单地分配一个布尔值来决定是否按升序排序，然后评估该布尔值是一种更常见的方法。

然后，您的代码归结为以下内容：

```
function bubbleSort($arr, $operation="ascending"){

    $ascending = ($operation == "ascending");

    //each loop put the largest number to the top
    for ($i=0; $i<count($arr)-1; $i++){

        //compare adjacent numbers
        for ($j=0; $j<count($arr)-1-$i; $j++){

            //exchange the adjacent numbers that are arranged in undesired order
            if (($ascending && ($arr[$j] > $arr[$j+1])) 
            || (!$ascending && ($arr[$j] < $arr[$j+1])))

            {           
                $temp = $arr[$j];
                $arr[$j] = $arr[$j+1];
                $arr[$j+1] = $temp;
            }
        }
    }
    return $arr;
} 
```

当然，您可以跳过字符串评估并将`$operation="ascending"`参数更改为`$ascending = true`，省略函数中的第一行。

# php - 表单拒绝在 Codeigniter 中提交

> ID：11308283
> 
> 赞同：1
> 
> 时间：2012-07-03T09:43:20.493
> 
> 标签：php, forms, codeigniter

好的，我对这个问题发疯了，我无法提交此表单，它只会刷新页面。

我已经将它编码为与我网站上的其他表单完全相同，它们工作正常。我不明白为什么它不提交！

这是控制器：

```
public function edit($id)
        {
            // check for login, if logged in
            if($this->session->userdata('logged_in') == "1")
                {
                // Check usertype, if not correct, redirect
                if($this->session->userdata('usertype') == "0" || $this->session->userdata('usertype') == "1" || $this->session->userdata('usertype') == "2")
                    {
                        // if no photos are selected, redirect and show notification
                        $this->session->set_flashdata('notification_fail', '<p style="text-align:center; color:#fbfbfb;">You do not have permission to access that page!<p>');
                        redirect('/');
                    }
                else 
                    {
                        // get the copy details
                        $data['copy_details'] = $this->quickcopy_model->get_copy_details($id);

                        if ($_POST)
                            {
                                // get data from the submitted form
                                $title = $this->input->post('title', TRUE);
                                $copy = $this->input->post('copy', TRUE);

                                // update the row in the db
                                $this->quickcopy_model->edit_go($id, $title, $copy);

                                // redirect and show notification
                                $this->session->set_flashdata('notification', '<p style="text-align:center; color:#fbfbfb;">That copy was updated!<p>');
                                redirect('quick-copy');
                                die;
                            }

                        // load views
                        $this->load->view('templates/header', $data);
                        $this->load->view('quickcopy/quickcopy_edit', $data);
                        $this->load->view('templates/footer', $data);
                    }
                }
            else
                {
                    // redirect to signin page if not logged in
                    redirect('signin');
                }
        } 
```

以及从模型中调用的函数：

```
public function edit_go($id, $title, $copy)
        {
            $data = array(
                   'title' => $title,
                   'copy' => $copy
                );

            $this->db->where('id', $id);
            return $this->db->update('quickcopy', $data); 
        } 
```

最后是视图：

```
<? echo form_open('quickcopy/edit/'.$copy_details->id); ?>
<p>Title/tagline:</p>
<input type="text" class="Form_Input" id="title" name="title" value="<? echo $copy_details->title; ?>" />

<p style="margin-top: 10px;">Copy:</p>
<textarea id="copy" name="copy" class="Form_Textarea" style="width: 970px"><? echo $copy_details->title; ?></textarea>

<button type="submit" class="Form_SubmitButton"><p style="color: #f7f7f7; text-align: center;">Save changes</p></button>
</form> 
```

我意识到我没有对此进行表单验证，但是我有另一个表单，我使用了表单验证，它也不起作用！

2天来一直对此感到完全困惑，我不明白为什么它没有提交。代码在我看来都很好，还有什么其他原因导致表单无法提交？我刚刚安装了 SSL，但我有其他可以正常工作的表单，所以我假设它不是 SSL。

非常感谢任何帮助:)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-03T10:13:22.103

好的，我已经设法找出问题所在……终于！

基本上，我的网站的某些部分受 SSL 保护，而其他部分则没有。我忘记将新的表单部分添加到 htaccess 文件的 SSL 中。

现在工作。

# jquery - Spring JSON 和 406 HTTP 错误

> ID：11308294
> 
> 赞同：2
> 
> 时间：2012-07-03T09:44:06.000
> 
> 标签：jquery, json, spring, jackson

我发现很多关于这个问题的问题，但我没有解决......我有这个方法：

```
@RequestMapping(value="/testInit")
public @ResponseBody Output test() throws Exception {
    return new Output(true);
} 
```

我有杰克逊库到类路径，进入 applicationContext 但我仍然得到这个 jquery 调用的 406 错误：

```
$.ajax({
    url: "/testInit",
    type: "get",
    dataType: "json"
}); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-10-18T05:42:24.560

您必须添加罐子，还要添加`org.springframework.http.converter.json.MappingJacksonHttpMessageConverter`和`org.springframework.web.servlet.mvc.annotation.AnnotationMethodHandlerAdapter`DispatcherServlet-servlet.xml

```
<bean class="org.springframework.web.servlet.mvc.annotation.AnnotationMethodHandlerAdapter">
    <property name="messageConverters">
        <list>
            <ref bean="jacksonMessageConverter"/>
        </list>
    </property>
</bean>
<bean id="jacksonMessageConverter" class="org.springframework.http.converter.json.MappingJacksonHttpMessageConverter"/> 
```

如上图所示。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-03T10:11:42.013

当`406 Not Acceptable`客户端请求服务器无法返回的内容类型时使用响应。换句话说，您的客户端（例如 Web 浏览器）正在发送`Accept`与服务器功能不匹配的标头。

我猜测 jQuery Ajax 方法`dataType`在设置标题时使用了该字段`Accept`。`json`不是众所周知的内容类型 - 但是`application/json`。

尝试替换`dataType: "json"`为`dataType: "application/json"`.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-03T10:26:13.740

我使用 jackson-all.1.9.0.jar 而不是 jackson 2 库解决了问题。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-18T15:08:41.463

我可以让我的工作的唯一方法是将 spring 升级到 3.1 并在请求映射中添加一个生产。

```
@RequestMapping(value = "/rest/{myVar}", method = RequestMethod.GET, produces = "application/json")
@ResponseBody
public MyObject get(
        @PathVariable String myVar) { 
```

其他解决方案都不适合我

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-07-10T16:24:37.020

我遇到了这个问题，最后追查到我正在使用的课程中没有任何吸气剂。

即这导致了 406

```
public static class Pojo {
    private int x;
    public Pojo(int x) {
        this.x = x;
    }
} 
```

但这并没有

```
public static class Pojo {
    private int x;
    public Pojo(int x) {
        this.x = x;
    }
    public int getX() {
        return x;
    }
} 
```

是的，我正在使用一个名为 Pojo 的类 :) - 我只是在做一个虚拟示例来检查杰克逊是否在我的新设置中工作

# git - 如何列出未推送的 Git 标签

> ID：11308298
> 
> 赞同：28
> 
> 时间：2012-07-03T09:44:42.477
> 
> 标签：git, git-remote, git-tag

我想看看我在本地有哪些标签在特定遥控器上不可用。我怎样才能做到这一点？我知道我可以`git push --tags`推动所有这些。但是，如果有一些我不想推送的标签，我如何确保我没有错过一些？

* * *

## 回答 #1

> 赞同：42
> 
> 时间：2012-07-03T09:44:43.927

您可以使用以下命令查看本地存在但指定远程中不存在的标签：

```
git show-ref --tags | grep -v -F "$(git ls-remote --tags <remote name> | grep -v '\^{}' | cut -f 2)" 
```

请注意，它`git ls-remote`同时显示了带注释的标签和它指向的提交`^{}`，因此我们需要删除重复项。

另一种方法是使用`--dry-run`/`-n`标志`git push`：

```
git push --tags --dry-run 
```

这将显示将推送哪些更改，但实际上不会进行这些更改。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-06-27T07:42:13.537

作为记录，我使用“comm”命令的变体：

```
comm -23 <(git show-ref --tags | cut -d ' ' -f 2) <(git ls-remote --tags origin | cut -f 2) 
```

我将它用作 .gitconfig 中的 git 别名，并使用如下正确的 bash 引用：

```
[alias]
    unpushed-tags = "!bash -c \"comm -23 <(git show-ref --tags | cut -d ' ' -f 2) <(git ls-remote --tags origin | cut -f 2)\"" 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2022-01-02T21:25:20.410

我发现 Ben Lings 接受的答案错过了部分匹配远程标签的未推送标签；例如，如果存在名为“snowba”或“snow”的远程标签，则不会列出未推送的标签“snowball”。

我制作了一个版本，用于检查当前签出分支中的本地标签和远程仓库中的标签之间的确切名称匹配，以查找未推送的标签：

```
comm -23 <(echo "$(git tag --list)") <(echo "$(git ls-remote --tags -q | grep -v '\^{}' | cut -f 2 | cut -d '/' -f 3-)") | paste -s -d " " - 
```

如果您只想检查当前签出分支中未推送的标签：

```
comm -23 <(echo "$(git tag --merged)") <(echo "$(git ls-remote --tags -q | grep -v '\^{}' | cut -f 2 | cut -d '/' -f 3-)") | paste -s -d " " - 
```

在这里，对当前分支中未推送标签的相同查询被溢出到多个语句中，以在 bash 脚本中使用（并且为了提高清晰度）：

```
local_tags_in_current_branch="$(git tag --merged)"
remote_tags="$(git ls-remote --tags -q | grep -v '\^{}' | cut -f 2 | cut -d '/' -f 3-)"
unpushed_tags=`comm -23 <(echo "$local_tags_in_current_branch") <(echo "$remote_tags") | paste -s -d " " -` 
```

# php - PHP exec() 错误输出

> ID：11308301
> 
> 赞同：0
> 
> 时间：2012-07-03T09:44:47.607
> 
> 标签：php

我正在使用 jQuery 执行 AJAX 请求，如下所示：

```
$.get({
          url: 'run_program.php',
          data: 'action=run&number=' + $('#number').val(),
          success: function (j) {
            alert(j);
          } 
```

runprogram.php 是这样的：

```
<?php
if(isset($_GET['action']) && !empty($_GET['action'])) {
    run($_GET['number']);
}

function run($number) {
    echo shell_exec('program.exe $number');
}
?> 
```

我从服务器得到的响应总是0。顺便说一下，我是在本地运行的，所以没有安全问题。该程序被简单地编码为对作为输入传入的数字进行平方。它在 cmd 中运行良好。当我回显 $number 时，它正确地给出了我使用 jQuery 传入的值。我的代码有什么问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-03T09:47:50.477

问题是你的线

```
echo shell_exec('program.exe $number'); 
```

因为这实际上将调用带有“$number”作为文本作为值的program.exe。您需要使用双引号，例如

```
echo shell_exec("program.exe $number"); 
```

# php - 是两个位置之间的gps位置

> ID：11308302
> 
> 赞同：4
> 
> 时间：2012-07-03T09:44:47.833
> 
> 标签：php, geolocation, gps

我正在做一个项目，该项目将在车辆四处行驶时对其进行跟踪。车辆位置取自[Geoloqi API](https://geoloqi.com/)，并显示在自动更新的地图上。坐标被传递给 Drupal 中的 AHAH 函数，该函数将通过其他一些 API：s 加载有关位置的更多信息。其中之一是 Geonames.org。

我不想太频繁地从远程服务器加载数据，因为这会增加负载并过快地使用我们的信用。然而。我确实希望它尽可能实时，因为这对项目至关重要。所以我想这样做：

Geonames 为当前街道提供一串 GPS 位置，以便可以在地图上绘制。“线”被赋予下一个交叉点。如果每次位置更改时都询问当前街道名称，我们会吃得太快，但是在每个十字路口呢？

是否可以在 PHP 中检查给定的 gps 坐标是否位于其他两个坐标之间的线上？如果这条线可以向各个方向延伸几米以清除任何偏移，那也是很好的。

非常感谢您的所有建议。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-03T17:39:07.293

您最初的问题归结为一个简单的数学问题：在给定两个点的情况下找到一条线的方程。这部分很简单：假设你有两个坐标为 (lat1, lon1) 和 (lat2, lon2) 的点，那么直线的方程将是

```
(lon2 - lon1) * X + (lat1 - lat2) * Y + (lat1 * lon2 + lat2 * lon1) = 0 
```

现在，当你得到任何其他点（纬度，经度）时，只需将这些坐标分别作为（X，Y）放入方程中。如果你得到 0，那么这个点就在线上。然后检查您`lat`的介于`lat1`和之间`lat2`以及您`lon`的介于`lon1`和之间`lon2`。如果是，则新点位于两个现有点之间的线上。

更复杂的部分来自两件事：

1.  GPS 错误。考虑到这一点，您可以做一些近似，例如，不要与 0 比较，而是给它一些余地，例如比较`-err`您定义的某个值的`+err`位置。`err`

2.  事实上，大多数街道并不直。下图显示了问题。如果您查看顶部街道两端之间的线，垂直街道的顶部将在那条线上 - 但这不是您想要的。
    ![在此处输入图像描述](../Images/0d89af867e4768f9c9ad7321800c69a3.png).

也许更好的方法是使用距离变化。如果 GPS 报告的距离变化小于某个预定义值，则不要重新查询位置。

# javascript - require-jquery 和 jquery 的区别（如何使用）

> ID：11308304
> 
> 赞同：1
> 
> 时间：2012-07-03T09:44:50.523
> 
> 标签：javascript, jquery, requirejs, require

我正在使用不是 AMD 模块的外部 js 库，所以我使用 shim。让我们在这个例子中使用 bootstrap.js。bootstrap.js 需要 jQuery

```
requirejs.config({
paths : {
    jquery : "lib/jquery",
    bootstrap : "lib/bootstrap",
},

shim : {
    "bootstrap" : [ "jquery" ]
}
}); 
```

我还需要require-jquery。这意味着我将有两个 jQuery 文件。一个标准和require-jquery。

如果我这样做

```
paths : {
   jquery : "jquery-require"
   bootstrap : "lib/bootstrap",
}, 
```

我会收到一个 jQuery 问题 Uncaught TypeError: Cannot read property 'fn' of undefined

你能帮我弄清楚如何使用它吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-03T21:29:00.350

您不需要使用“jquery-require”。您的第一个配置（使用 jquery 和 shim）就足够了。

AFAIK jquery-require 是为之前版本的 requirejs（2.0 之前）完成的 require+jquery 捆绑包。

对于最新版本的 Require 或 jQuery，您不需要任何特殊配置。例如，`define`如果检测到，jQuery 将使用 jQuery 全局导出（请参阅[https://github.com/jquery/jquery/blob/master/src/exports.js](https://github.com/jquery/jquery/blob/master/src/exports.js)）。

# mysql - 限制客户购买

> ID：11308312
> 
> 赞同：0
> 
> 时间：2012-07-03T09:45:51.757
> 
> 标签：mysql, sql, database

客户可以多次购买，但只能购买一次该商品，但最多可有 10 位其他客户购买同一商品。有没有办法可以在我的数据库设计中实现这一点，或者我必须在应用程序端做些什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-03T10:40:49.307

这可以在您的数据库中实现，但这是一个坏主意。原因：

*   您的数据库用于表示数据，而不是表示管理数据使用的业务规则。将数据表示与业务逻辑分开可以让您更加灵活，例如，如果需要，可以切换到新数据库。
*   将数据放入和取出数据库的代码可能会尝试违反这些规则，因此您需要首先阻止将选项呈现给客户，或者显示格式正确的错误。这两种情况都要求代码了解将在数据库中表示的任何业务规则，因此首先将它们放在数据库中是没有意义的。只需在您的代码中编写一次。

一种解决方案是创建某种采购管理器对象，该对象控制是否可以进行采购，将业务逻辑全部封装在一个地方。

# javascript - 在 elselect 下拉更改上调用 ajax 函数

> ID：11308318
> 
> 赞同：0
> 
> 时间：2012-07-03T09:46:00.167
> 
> 标签：javascript, mootools

我正在使用[elSelect](http://www.cult-f.net/elselect/)和 mootools 来更改选择框的外观。我的问题是在选择框值更改时如何调用Ajax函数？

```
<script type="text/javascript">
    window.addEvent('domready', function() {
        var mySelect = new elSelect( {container : 'someId'} );
    });
</script> 
```

提前致谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-03T10:02:43.250

由于 elSelect 更改了 HTML 结构以替换下拉菜单，因此您不能使用`change`在原始下拉菜单上设置的事件。该文档没有显示将事件绑定到替换下拉列表的任何方法。

我完全不熟悉 mootools 的工作方式，但我注意到在插件的源代码中它定义了几个事件处理程序，其中`onOptionClick`. 每次用户单击下拉列表中的选项时都会触发此事件。您可以搭载它 - 更改该函数中的代码以触发您的 ajax 请求。

另一种选择是分析注入元素的 HTML 结构——你可以从你给构造函数的 id 开始并在其中查找`.option`元素。您可以让他们以固定的时间间隔（使用`setInterval`）轮询它们的更改，并在您看到值已更改时发送 ajax 请求。或者，您可以将点击处理程序添加到每个选项并从那里获取。

# xslt - 记住 for -each 循环中递归调用模板的最后计数

> ID：11308319
> 
> 赞同：0
> 
> 时间：2012-07-03T09:46:01.803
> 
> 标签：xslt, xslt-1.0

我有一个用于某些转换的 XSLT 映射。我的问题是我怎么能记住计数 1.e; 循环运行的次数。例如

```
<xsl: for each>  // This runs some 3 times

<xsl: call-template > // This call template recursively runs 10 times
<xsl: with- param >
</xsl: call-template >

<xsl: for each> 
```

在上面的示例中，外部 for 循环运行 3 次，内部调用模板递归调用自身以打印某些东西假设 10 次。所以我总共有 3*10 = 30 个周期。

我在这里需要的是假设我有一个初始编号 001，当 for 循环第一次运行时，它将调用模板，该模板将递归调用自身 10 次。所以我打印了从 001 - 010 开始的数字

下次我运行循环时，我再次打印了 001-010 中的数字，第三次以此类推。但我想要的是记住最后一次计数。假设在第一次迭代中我达到了 010。所以在第二次迭代中，我将从 011 开始计数并打印到 021。第三次我将从 022-032 开始打印。

但是有人能建议我怎么做吗？我怎样才能记住打印完成的最后一个值？

还有一件事我实际上仅限于 XSLT1.0。这就是我必须像上面的例子一样循环的原因。

这将是一个很大的帮助

我想做的是这样，假设我有一个输入 xml，

```
<A>

<B from="123456781" to="123456782">
........
</B>
<B from="123456781" to="123456785">
........
</B>
<B from="123456788" to="123456788">
........
</B>

</A> 
```

在上面的 xml 中，每个节点 B 都与“从-到”范围相关联。我需要创建与给定范围内的数量一样多的 ouputB 节点。而且我还必须获得创建的每个 outputB 节点的唯一计数。例如输出 xml 可以是，

```
<root>

<outputB value="123456781" id="001"> // from first B node from="123456781" to="123456782"
<outputB value="123456782" id="002">

<outputB value="123456781" id="003">
<outputB value="123456782" id="004">// from second B node from="123456781" to="123456785"
<outputB value="123456783" id="005">
<outputB value="123456784" id="006">
<outputB value="123456785" id="007">

<outputB value="123456788" id="008">// from third B node from="123456788" to="123456788"

</root> 
```

因此，在上面的 xsl 中，我在 from 和 to 参数中的范围值的基础上递归地填充了每个输入 B 节点上的 bu for-each。从而创建确切数量的 outputB 节点。但这里的问题是在生成的 xml 中维护唯一计数或 id。

谢谢 ：）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-03T12:05:13.357

XSLT 是一种函数式语言。你不能用函数式语言“记住”事物：没有时间的概念，没有对过去事物的记忆。您需要根据输入中的某些内容计算输出中的所有内容。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-03T10:10:55.443

当您调用模板时，您只需传入一个“深度”参数。

```
 <xsl:template Name="x">
   <xsl:param name="depth">

   <xsl:call-template name="x">
     <xsl:with param name="depth" select=="depth+1" />
   </xsl:call-template>
 </xsl:template> 
```

然后你为你的外循环做类似的事情。目前尚不清楚您是如何执行此循环的，但您可以使用 position()。那么你想要的数字是 position()*10 + depth。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-03T10:00:23.107

您不会记住 XSLT 中的值，甚至不会在进行过程中累加，除非在非常特殊的情况下。但是，一般情况下，您不需要这样做。

因此，如果您有：

```
<xsl:for-each select="conditiona">  // This runs some 3 times 
```

那么您就拥有了提供计数所需的一切：

```
<xsl:value-of select="count(conditiona)"/> // this displays 3 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-03T11:05:51.103

这个怎么样？您可以在[此 XMLPlayground](http://www.xmlplayground.com/Y5b0va)上运行它（请参阅输出源）。它完全避免了 for-each（在 XSLT 中总是最好避免）。

这里有两个关键概念：

1.  只要其范围需要，就在同一节点上重复模板匹配
2.  让节点为其下一个兄弟节点启动进程，而不是将根匹配模板应用于所有 B 节点。这样一来，“你在哪里起床？” 关系可以通过传递的参数来维护。这是非正统的，但有效。

**代码：**

```
<!-- root - kick things off, for each B node -->
<xsl:template match="/">
    <xsl:apply-templates select='//B[1]' />
</xsl:template>

<!-- iteration content - B nodes -->
<xsl:template match='B'>

    <!-- recursion params -->
    <xsl:param name='index' select='@from' />
    <xsl:param name='id' select='position()' />
    <xsl:param name='pos' select='position()' />

    <!-- output node -->
    <outputB value='{$index}' id='{$id}' />

    <!-- now recurse for... -->
    <xsl:choose>

        <!-- ...as range requires -->
        <xsl:when test='(@from and @to) and (not($index) or $index &lt; @to)'>
            <xsl:apply-templates select='.'>
                <xsl:with-param name='index' select='$index + 1' />
                <xsl:with-param name='id' select='$id + 1' />
            </xsl:apply-templates>
        </xsl:when>

        <!-- ...next B node, if there is one -->
        <xsl:when test='following-sibling::B'>
            <xsl:apply-templates select='following-sibling::B[1]'>
                <xsl:with-param name='id' select='$id + 1' />
            </xsl:apply-templates>
        </xsl:when>
    </xsl:choose>

</xsl:template> 
```

**输出：**

```
<outputBs value="123456781" id="1"/>
<outputBs value="123456782" id="2"/>
<outputBs value="123456783" id="3"/>
<outputBs value="123456781" id="4"/>
<outputBs value="123456782" id="5"/>
<outputBs value="123456783" id="6"/>
<outputBs value="123456784" id="7"/>
<outputBs value="123456785" id="8"/>
<outputBs value="123456788" id="9"/> 
```

# oracle - 从另一个调用一个过程的一些错误

> ID：11308323
> 
> 赞同：0
> 
> 时间：2012-07-03T09:46:07.270
> 
> 标签：oracle, stored-procedures, plsql

由于要求，我必须从另一个调用一个存储过程。

问题似乎出在`out_result_size`我正在使用的输出参数附近。当我测试`main_func`它工作正常但当我测试`synonym_proc`它说

> synonym_proc 无效

最终，我必须`synonym_proc`使用 JPA 从 Java调用`@NamedNativeQuery`

```
CREATE OR REPLACE PROCEDURE synonym_proc (
    result_cursor      OUT SYS_REFCURSOR,
    in_cp_id           IN NUMBER,
    in_cp_name         IN VARCHAR2 := NULL,
    in_country_name    IN VARCHAR2 := NULL,
    in_industry_name   IN VARCHAR2 := NULL,
    in_max_result_size IN NUMBER
) AS
    out_result_size NUMBER;
BEGIN
   result_cursor := someSchema.somePackage.main_func(in_cp_id,
              in_cp_name,
              in_country_name,
              in_industry_name,
              in_max_result_size,
              out_result_size);
END; 
```

**更新：**很抱歉没有提到我之前没有注意到的问题的变化。这`main_func`是一个函数（不是过程），它返回一个游标并驻留在某个模式中的某个包中。编译时出现以下编译错误：

> 错误：PLS-00201：必须声明标识符“SOMESCHEMA.SOMEPACKAGE”。语句被忽略。

**更新 2**

SomeSchema 定义

```
CREATE OR REPLACE PACKAGE someSchema."SomePackage"
is
...
function mainFunc
(
    in_cp_id                in gem.tcp_real_profile_main_approved.cp%type
    , in_cp_name            in gem.tcp_real_profile_main_approved.name%type
    , in_country_name       in gem.tcp_real_profile_main_approved.country_name%type
    , in_industry_name      in gem.tcp_real_profile_main_approved.industry_name%type
    , in_max_result_size    in number
    , out_result_size       out number
)
return search_result_type_cursor; 
```

**添加**

```
type search_result_type_cursor
 is ref cursor
 return search_type; 
```

是的，数据类型是正确的，因为我描述了函数（main_func）并交叉验证了数据类型。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-04T08:06:36.077

根据评论，特别是您可以在其他模式中描述和测试过程，看起来这可能是权限问题。如果您对其他模式中的对象的权限是通过角色授予的，那么您将能够直接执行包过程，但[在命名块中无法识别](http://docs.oracle.com/cd/E11882_01/network.112/e16543/authorization.htm#sthref547)角色。如果这是问题所在，那么您将必须`someSchema.somePackage`直接授予正在创建存储过程的用户的执行权限。

为了演示这个问题，我可以在我的`SCOTT`模式中创建一个包，并将其上的执行权限授予一个角色，然后将该角色授予一个用户——这两个都是我为测试创建的。作为`SYS`：

```
create role scott_tmp_role;
grant connect to someuser identified by <password>;
grant scott_tmp_role to someuser;
grant create procedure to someuser; 
```

作为`SCOTT`：

```
create package p42 as
    procedure proc;
end p42;
/

Package created.

create package body p42 as
    procedure proc is
    begin
        null;
    end proc;
end p42;
/

Package body created.

grant execute on p42 to scott_tmp_role;

Grant succeeded. 
```

作为我的新人`SOMEUSER`，验证我拥有的角色：

```
select * from session_roles;

ROLE
------------------------------
CONNECT
SCOTT_TMP_ROLE 
```

我可以在匿名块中执行该过程：

```
begin
    scott.p42.proc;
end;
/

PL/SQL procedure successfully completed. 
```

...但不在命名块中：

```
create or replace procedure sp42 as
begin
    scott.p42.proc;
end;
/

Warning: Procedure created with compilation errors.

show errors

Errors for PROCEDURE SP42:

LINE/COL ERROR
-------- -----------------------------------------------------------------
3/2      PL/SQL: Statement ignored
3/2      PLS-00201: identifier 'SCOTT.P42' must be declared 
```

如果`SCOTT`将权限直接授予我的新用户：

```
grant execute on p42 to someuser; 
```

...然后命名块现在可以工作：

```
create or replace procedure sp42 as
begin
    scott.p42.proc;
end;
/

Procedure created. 
```

如果您想查看您可能从哪里获得执行权限，您可以运行这样的查询，尽管可能有一个角色层次结构可供选择：

```
select grantee, privilege from all_tab_privs
where table_schema = 'SomeSchema'
and table_name = 'SomePackage'; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-03T10:48:54.130

您不能指定过程或函数的参数大小。尝试删除尺寸，并`commit`按照文森特的建议移动。

```
CREATE OR REPLACE PROCEDURE synonym_proc(result_cursor      OUT SYS_REFCURSOR,
                                         in_cp_id           IN NUMBER,
                                         in_cp_name         IN VARCHAR2,
                                         in_country_name    IN VARCHAR2,
                                         in_industry_name   IN VARCHAR2,
                                         in_max_result_size IN NUMBER) AS
  out_result_size NUMBER;
BEGIN
  main_proc(result_cursor,
            in_cp_id,
            in_cp_name,
            in_country_name,
            in_industry_name,
            in_max_result_size,
            out_result_size);
  COMMIT;
END; 
```

你应该得到一个错误，比如`PLS-00103: Encountered the symbol "(" when expecting one of the following: ...`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-03T10:08:20.933

Oracle SP 的语法是

```
CREATE OR REPLACE PROCEDURE procedure_name(--parameter list) AS
--Local Variables
BEGIN
--Body
END; 
```

现在你犯了一个错误，你没有把 COMMIT 放在 END 之前，而是把它放在 END 之后。应该是这样的

```
COMMIT;
END; 
```

# haskell - 在 snaplet 初始化期间使用 subsnaplet？

> ID：11308326
> 
> 赞同：2
> 
> 时间：2012-07-03T09:46:17.253
> 
> 标签：haskell, haskell-snap-framework

我有一些这样的 snaplet：

```
data DB b = DB
  {_pgsql :: Snaplet Postgresql
  ,dbCache :: Map Text Text
  } 
```

我希望`dbCache`从 postgresql 数据库中填写。似乎在 snaplet 初始化期间这样做是很自然的。

```
initDB :: SnapletInit b (DB b)
initDB = makeSnaplet "db" "cached database" Nothing $ do
  pgs <- nestSnaplet "pgsql" pgsql pgsInit
  cache <- getSomeDataPlease pgs 
  return $ DB pgs cache 
```

所以，问题是：如何`pgs :: Snaplet Postgres`在`Initializer`monad 中使用从 db 读取数据？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-03T14:39:04.037

snaplet-postgresql-simple 提供的数据库访问函数在作为`HasPostgres`类型类实例的任何 monad 中运行。通常，这将是`Handler`您的应用程序的 monad。

您不能`Handler`在`Initializer`. Initializer monad 的重点是设置运行 Web 服务器和 Handler monad 所需的初始状态数据类型。因此，在初始化程序中运行处理程序确实是不可能的——当然，除非你是从另一个 Web 服务器内部运行一个 Web 服务器...ick。

所以你有两个可能的选择。您可以`HasPostgres`为您的`Initializer`. 但这没有多大意义，除非您连接到静态服务器。如果您正在进行调试，这可能是可以接受的。有时我会为 IO 这样做，以使测试我的数据库功能变得轻而易举：

```
instance HasPostgres IO where
    getPostgresState = do
        pool <- createPool (connect $ ConnectInfo "127.0.0.1" ...) ...
        return $ Postgres pool 
```

但一般来说，将这样的实例用于生产代码是没有意义的。这意味着如果你想访问数据库，`Initializer`你必须直接使用 postgresql-simple 函数，而不是 snaplet-postgresql-simple 提供的包装器。这就是我导出 pgPool 访问器函数的原因。它看起来像这样：

```
initDB :: SnapletInit b (DB b)
initDB = makeSnaplet "db" "cached database" Nothing $ do
    pgs <- nestSnaplet "pgsql" pgsql pgsInit
    let pool = pgPool $ extract pgs
    results <- liftIO $ withResource pool (\conn -> query_ conn myQuery) 
```

[你可以在 snaplet-postgresql-simple 的auth backend](https://github.com/mightybyte/snaplet-postgresql-simple/blob/master/src/Snap/Snaplet/Auth/Backends/PostgresqlSimple.hs#L79)中看到一个真实的例子。

更新：

我刚刚上传了一个新版本的 snaplet-postgresql-simple 到 hackage，它为 ReaderT 提供了一个[HasPostgres 实例](http://hackage.haskell.org/packages/archive/snaplet-postgresql-simple/0.1.1/doc/html/Snap-Snaplet-PostgresqlSimple.html#t%3aHasPostgres)。这允许您使用 runReaderT 更简单地完成此操作。文档中有一个小代码片段。

# c++ - 将泛型编程与多态性混合

> ID：11308327
> 
> 赞同：3
> 
> 时间：2012-07-03T09:46:19.627
> 
> 标签：c++

我看过一些关于泛型编程以及如何永远不要同时使用虚函数和模板的文章。我理解这个习惯用法，因为模板是在编译时决定的，直到运行时才选择虚函数（过度简化）。

但是，我有一些代码同时使用了 OO 样式和 Generic 样式，它似乎按我想要的方式工作。

我的问题：

下面的设计是不好的做法。混合多态性和通用代码？

下面我的代码是否有任何坑。（我知道我不应该继承数据成员，但我有：-/）。

```
#ifndef BaseTemplate_H
#define BaseTemplate_H

#include <vector>

template< class T >
class BaseTemplate {

 public:

  typedef std::vector<T*> pVT;

  BaseTemplate(){}
  virtual ~BaseTemplate(){};
  virtual void Process()=0;
  const pVT& getContainer(){ return m_pContainer; }

 protected:

  pVT m_pContainer;

 private:

  BaseTemplate( const BaseTemplate& cpy );
  BaseTemplate& operator=( const BaseTemplate& rhs);

};

#endif 
```

我首先从基类继承，方法是告诉基模板在继承时我想要什么类型。这将允许我两个继承多种类型，我想在我的设计中保持分开。

```
#ifndef DerClassA_H
#define DerClassA_H

#include <iostream>
#include "BaseTemplate.h"

class DerClassA: public BaseTemplate<int> {

 public:

 DerClassA(){}
 virtual ~DerClassA(){}
 virtual void Process(){
   std::cout << "HELLO I AM: DerClassA" << std::endl;
 }//This will push_back objects to m_pContainer

 private:

 DerClassA( const DerClassA& cpy );
 DerClassA& operator=( const DerClassA& rhs);

};

#endif

#ifndef DerClassB_H
#define DerClassB_H

#include <iostream>
#include "DerClassA.h"

class DerClassB: public DerClassA {

 public:

 DerClassB(){}
 virtual ~DerClassB(){}
 virtual void Process(){
   std::cout << "HELLO I AM: DerClassB" << std::endl;
 }//This will push_back objects to m_pContainer

 private:

  DerClassB( const DerClassB& cpy );
  DerClassB& operator=( const DerClassB& rhs);

};

#endif

#include "DerClassA.h"
#include "DerClassB.h"

int main()
{

  BaseTemplate<int> *pClassA = new DerClassA();
  pClassA->Process();

  DerClassA *pClassB = new DerClassB();
  pClassB->Process();

  delete pClassA;
  delete pClassB;

  return 0;
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-03T10:10:09.190

> 下面的设计是不好的做法。混合多态性和通用代码？

不，这有时是正确的做法。

> 下面我的代码是否有任何坑。

*   带有原始指针的容器`std::vector<T*> pVT;`看起来有点可疑。
*   基类析构函数应该是纯虚拟的。
*   我会使用 C++11 语法使类不可复制。
*   您只需要使基类不可复制。
*   我认为您的主要功能不需要动态分配。

其余的我看不到任何直接错误。

如果不知道您要做什么，就不可能说您的设计是否好。

# c# - 最小起订量中的设置序列

> ID：11308328
> 
> 赞同：81
> 
> 时间：2012-07-03T09:46:23.993
> 
> 标签：c#, unit-testing, mocking, moq

`0`我想要一个第一次返回的模拟，然后`1`在此后调用该方法的任何时候返回。问题是如果方法被调用4次，我必须写：

```
mock.SetupSequence(x => x.GetNumber())
    .Returns(0)
    .Returns(1)
    .Returns(1)
    .Returns(1); 
```

否则，该方法返回 null。

有什么办法可以写，在初始调用之后，方法返回`1`？

* * *

## 回答 #1

> 赞同：67
> 
> 时间：2012-07-03T10:02:33.137

最干净的方法是创建一个`Queue`并将`.Dequeue`方法传递给`Returns`

`.Returns(new Queue<int>(new[] { 0, 1, 1, 1 }).Dequeue);`

* * *

## 回答 #2

> 赞同：54
> 
> 时间：2012-07-03T09:59:26.633

这不是特别花哨，但我认为它会起作用：

```
 var firstTime = true;

    mock.Setup(x => x.GetNumber())
        .Returns(()=>
                        {
                            if(!firstTime)
                                return 1;

                            firstTime = false;
                            return 0;
                        }); 
```

* * *

## 回答 #3

> 赞同：15
> 
> 时间：2020-05-08T19:16:24.220

派对有点晚了，但如果你还想使用 Moq 的 API，你可以`Setup`在最终调用的操作中调用该函数`Returns`：

```
var mock = new Mock<IFoo>();
mock.SetupSequence(m => m.GetNumber())
    .Returns(4)
    .Returns(() =>
    {
        // Subsequent Setup or SetupSequence calls "overwrite" their predecessors: 
        // you'll get 1 from here on out.
        mock.Setup(m => m.GetNumber()).Returns(1);
        return 1;
    });

var o = mock.Object;
Assert.Equal(4, o.GetNumber());
Assert.Equal(1, o.GetNumber());
Assert.Equal(1, o.GetNumber());
// etc... 
```

我想演示 using `StepSequence`，但对于 OP 的特定情况，您可以简化并在一个`Setup`方法中包含所有内容：

```
mock.Setup(m => m.GetNumber())
    .Returns(() =>
    {
        mock.Setup(m => m.GetNumber()).Returns(1);
        return 4;
    }); 
```

在这里使用*xunit@2.4.1*和*Moq@4.14.1*测试了所有内容- 通过 ✔</p>

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2017-02-23T07:44:33.880

只需设置一个扩展方法，例如：

```
public static T Denqueue<T>(this Queue<T> queue)
{
    var item = queue.Dequeue();
    queue.Enqueue(item);
    return item;
} 
```

然后像这样设置回报：

```
var queue = new Queue<int>(new []{0, 1, 1, 1});
mock.Setup(m => m.GetNumber).Returns(queue.Denqueue); 
```

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2012-07-03T09:59:47.967

您可以使用临时变量来跟踪调用该方法的次数。

例子：

```
public interface ITest
{ Int32 GetNumber(); }

static class Program
{
    static void Main()
    {
        var a = new Mock<ITest>();

        var f = 0;
        a.Setup(x => x.GetNumber()).Returns(() => f++ == 0 ? 0 : 1);

        Debug.Assert(a.Object.GetNumber() == 0);
        for (var i = 0; i<100; i++)
            Debug.Assert(a.Object.GetNumber() == 1);
    }
} 
```

# jquery - jQuery 单行邮件表单 & 提交进入

> ID：11308329
> 
> 赞同：0
> 
> 时间：2012-07-03T09:46:26.863
> 
> 标签：jquery, email

我正在尝试解决 jQuery 的问题。

![在此处输入图像描述](../Images/5a17d903e3c5a176aa2ef8b083721e2e.png)

有人粘贴一个链接，点击进入，然后它会发送到我的电子邮件。我不希望需要任何其他类型的字段。如果在他们提交后将默认文本更改为“已发送建议！”，那就更神奇了。或任何消息。任何人都可以就如何最好地解决这个问题给我任何建议吗？

这是我在 HTML 中所拥有的：

```
<form action="mailto:(myemail)" method="post" enctype="text/plain" >
<input type="text" id="youtube_link" 
    value="Paste YouTube link here & hit enter" />
</form> 
```

但是，它没有向我的电子邮件发送消息，而是打开了用户的默认电子邮件客户端。我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-03T09:54:18.447

html ->

```
<form id="my-form" onsubmit="return false">
<input type="text" id="link" placeholder="Enter link here and press enter!" />
<div class="text"></div>
</form> 
```

jQuery->

```
$("#my-form").submit(function() {
  $value = $("link").val();

  // do something with $value

  // hide textfield
  $( "#link" ).hide();

  // update status
  $( "#my-form > .text" ).html( "Suggestion sent!" );
}); 
```

**更新**

要实际发送邮件，您需要编写服务器端代码。并实现从 jQuery 到您的服务器脚本的 ajax 调用，这反过来将处理邮件逻辑。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-03T09:51:47.947

点击回车将已经提交表单（当输入有焦点时）。您不需要任何 JS 或某事（甚至提交按钮）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-03T09:56:12.467

您可以使用正确的 HTML 来执行此操作：

```
<form action="mailto:someone@somwhere.com?subject=Suggestion%20sent!" method="POST" enctype="multipart/form-data" onsubmit="javascript:captureSubmit();">
<input type="text" id="url" name="url" />
</form> 
```

# c# - C#：如何为我的 PC 安排一定的重启次数

> ID：11308335
> 
> 赞同：1
> 
> 时间：2012-07-03T09:46:46.310
> 
> 标签：c#, windows, operating-system

我有一个使用 microsoft kinect 设备的应用程序。问题是在某些时候，设备可能无法正常工作，我打算重新启动我的电脑以尝试重置 kinect 状态。

问题是我想重新启动 PC 的次数有限。

我计划通过在我的 HDD 的文件中写入 PC 重新启动的日期来检查我的 PC 有多少次重新启动，并检查该文件以备将来重新启动。

有没有其他方法可以检查在给定时间之前给我的电脑重启了多少次？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-03T09:51:02.580

您可以查看事件日志并计数事件。

如果你看一下，我可以看到例如 6009 是我的运行 Windows 7 的机器上电后的第一个事件，然后你有一个日期戳，当它开始时，你可以从那里开始工作。

# c - 使用 dlmalloc 的分段错误

> ID：11308339
> 
> 赞同：0
> 
> 时间：2012-07-03T09:47:14.690
> 
> 标签：c, linux, gcc, segmentation-fault, malloc

我正在使用[Doug Lea 的 dlmalloc 内存分配器](http://g.oswego.edu/dl/html/malloc.html)。但是，当我使用它时，我会得到分段。如果我使用正常的 malloc，我的程序运行良好。我记得我曾经读到你需要先调用一些初始化函数才能使 dlmalloc 工作，但我现在不记得是哪个函数了。我试图查看评论以找出哪个功能，但仍然找不到。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-03T10:28:34.197

从分配器源代码中的注释：

> Tread-safety：不是线程安全的，除非 USE_LOCKS 定义为非零
> 
> 定义 USE_LOCKS 后，对 malloc、free 等的每个公共调用都被锁包围。默认情况下，这使用普通的 pthread 互斥锁、win32 临界区或自旋锁（如果适用于平台且未通过设置 USE_SPIN_LOCKS=0 禁用）。

您需要使用 编译库`USE_LOCKS`，否则您可能会看到崩溃。

另一种可能性是您的程序表现出未定义的行为，不会导致常规`malloc`. 例如，它可能会在某处的分配区域之后写入一个字节，但该字节可能是内存块的一部分，比您请求的要大几个字节。在将程序与自定义分配器链接之前，使用 valgrind 使用“常规”malloc 检查您的程序是否存在内存错误。

# c++-cli - 我应该如何将本机 C++ 指针放入 .NET 泛型集合中？

> ID：11308340
> 
> 赞同：4
> 
> 时间：2012-07-03T09:47:14.913
> 
> 标签：c++-cli

在 C++/CLI 中，不能将指向本机 C++ 类的指针放在托管的 .NET 泛型集合中，例如

```
class A {
public:
    int x;
};

public ref class B {
public:
    B()
    {
        A* a = GetPointerFromSomewhere();
        a->x = 5;
        list.Add(a);
    }
private:
    List<A*> listOfA; // <-- compiler error (T must be value type or handle)
} 
```

不被允许。我当然可以使用`std::vector<A*> list;`，但是我只能`list`通过使用指针来创建托管类的成员，并且使用指向 STL 容器的指针感觉不自然。

在 .NET 泛型中存储本机 C++ 指针的好方法是什么？（我对这里的资源管理不感兴趣；指针指向的对象在别处管理）

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-03T09:47:16.147

我一直使用的方法是将指针包装在托管值类中，然后重载解引用运算符：

```
template<typename T>
public value class Wrapper sealed
{
public:
    Wrapper(T* ptr) : m_ptr(ptr) {}
    static operator T*(Wrapper<T>% instance) { return instance.m_ptr; }
    static operator const T*(const Wrapper<T>% instance) { return instance.m_ptr; }
    static T& operator*(Wrapper<T>% instance) { return *(instance.m_ptr); }
    static const T& operator*(const Wrapper<T>% instance) { return *(instance.m_ptr); }
    static T* operator->(Wrapper<T>% instance) { return instance.m_ptr; }
    static const T* operator->(const Wrapper<T>% instance) { return instance.m_ptr; }
    T* m_ptr;
}; 
```

然后我可以自然地使用指针如下：

```
public ref class B {
public:
    B()
    {
        A* a = GetPointerFromSomewhere();
        a->x = 5;
        list.Add(Wrapper<A>(a));
        Console.WriteLine(list[0]->x.ToString());
    }
private:
    List<Wrapper<A>> listOfA;
} 
```

欢迎任何改进...

# android - 搜索时 ListView 中的重复数据

> ID：11308341
> 
> 赞同：0
> 
> 时间：2012-07-03T09:47:15.567
> 
> 标签：android, android-adapter

我正在尝试进行包括图像和文本视图的搜索。因此，当我搜索它时，它会返回肯定的结果，但是当我返回并使用其他值进行搜索时，它会同时返回旧的返回值和新的结果。我希望我的 listView 不向其中添加旧数据。我需要用新值覆盖旧数据。这是我的代码：

```
public void onClick(View Kv) {
    Intent moreDetailsIntent = new Intent(MainMenu.this,ListMobileActivity.class);
    Bundle dataBundle = new Bundle();
    dataBundle.putString("Prov","KwaZulu-Natal");
    moreDetailsIntent.putExtras(dataBundle);
    startActivity(moreDetailsIntent);                   
});             

B_GP.setOnClickListener(new View .OnClickListener() {
    @Override
    public void onClick(View Gv) {
        Intent moreDetailsIntent = new Intent(MainMenu.this,ListMobileActivity.class);
        Bundle dataBundle = new Bundle();
        dataBundle.putString("Prov","Gauteng");
        moreDetailsIntent.putExtras(dataBundle);
        startActivity(moreDetailsIntent);
    }
}); 
```

当我单击第一个按钮 KZN 时，它必须显示所有 KZN 省份，当单击按钮 B_GP 时，它必须返回所有 GP 省份。所以当我第二次搜索时它只是返回旧数据，这里是我的 listView 类：

```
Bundle b = getIntent().getExtras(); // Getting the Bundle object that pass from another activity
String SelectedProv = b.getString("Prov");
List<NameValuePair> params = new ArrayList<NameValuePair>();
params.add(new BasicNameValuePair("ProvinceName",SelectedProv));
Log.d("ProvinceName",SelectedProv);
JSONObject json = jsonParser.makeHttpRequest("http://10.0.2.2/php/searchKZN.php", "POST", params);
try{
    JSONArray  earthquakes = json.getJSONArray("PROV");
    for(int i=0;i<earthquakes.length();i++){                        
        JSONObject e = earthquakes.getJSONObject(i);
        String PCity = e.getString("P_City");
        PNames.add(PCity);
        String Pimage = e.getString("Pname");
        PImages.add(Pimage);
    }       
} catch(JSONException e){
     Log.e("log_tag", "Error parsing data "+e.toString());
}   
setListAdapter(new MobileArrayAdapter(this, PNames,PImages)); 
```

所以请帮我根据选择的按钮显示正确的值。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-03T09:50:28.707

试试这个`PNames.clear(), PImages.clear();`

前

```
 for(int i=0;i<earthquakes.length();i++){                        

                JSONObject e = earthquakes.getJSONObject(i);

                String PCity = e.getString("P_City");
                PNames.add(PCity);
                String Pimage = e.getString("Pname");
                PImages.add(Pimage);
            } 
```

# .net - 为什么 MSMQ 比 WCF QueueService 快？

> ID：11308343
> 
> 赞同：13
> 
> 时间：2012-07-03T09:47:17.217
> 
> 标签：.net, wcf, performance, msmq

`netNamedPipeBinding`我在带有绑定的控制台中有自托管的 WCF 服务。该服务只有一个空方法`Send(DataTable bulk)`

```
[ServiceContract]
public interface IWcfQueueService
{
    [OperationContract]
    void Send(DataTable bulk);       
}
public class WcfQueueService : IWcfQueueService
{
    public void Send(DataTable bulk)
    {           
       // Here would be something like _bulks.Add(bulk);
       // BUT, for now it is empty method and still it's slower than MSMQ
    }    
} 
```

我的客户从 DB 获得 200K 输入并使用我们的 BoundedThreadPool 处理它（仅创建，比如说，20 个线程）。每个输入都用不同的线程处理。每个线程都执行`MyMethod`并在最后`MyMethod`将结果添加到`bulkManager`.

```
public void MyMethod(string input)
{            
    var res = ProcessInput(input);
    bulkManager.Add(res);
} 
```

当`bulkManager`累积 N 个项目（=bulk）时，它将批量传递给另一个线程，它所做的只是使用以下两种方法之一将该批量加入队列：

1.  如果启用了 wcf：`wcfQueueService.Send(bulk);`
2.  否则，如果启用了 MSMQ：`new MessageQueue(@".\private$\q").Send(new Message {Body = bulk});`

这两种方法都有效，但 MSMQ 的工作速度要快得多。使用 MSMQ 客户端可以在 20 秒内处理大约 80K 块，而使用 wcf 只能处理 20K-30K 块。我不明白为什么会这样。我的 WCF 像 MSMQ 一样在不同的进程中运行。另外，我的 WCF 不存储任何东西，它有空方法。那么为什么 MSMQ 会赢得 WCF 呢？

**更新**

正如`leppie`建议的那样，我尝试了 .NetRemoting。NetRemoting 确实提高了速度。客户端处理了 60K。但，

1.  它仍然比 MSMQ 慢
2.  当我读到 .Net Remoting 已被 WCF 弃用时，WCF 应该比 .Net Remoting 快，那么为什么[我](http://msdn.microsoft.com/en-us/library/bb310550.aspx#wcfperform_topic3d)知道我的 wcf 更慢？也许我的绑定是错误的？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-22T12:15:59.530

你不是在比较喜欢和喜欢。

最明显的区别是，在 WCF 案例中，您的时间包括整个服务端通道堆栈和操作调用的执行，而您的直接 MSMQ 案例仅测量在客户端排队有效负载的时间。请记住，WCF 中的服务端处理包括您的 DataTable 对象的反序列化，如果您的体积因子 N 很大，这可能会非常昂贵。

更重要的是，根据您配置服务实例化和节流旋钮的方式，来自客户端的请求可能比服务配置处理的速度更快，导致请求本身在服务端排队等待执行。

此外，根据您配置绑定的方式，可能存在其他显着差异，例如安全性。顺便说一句，您是否真的使用 NetNamedPipeBinding （如您的问题所述）而不是标题似乎暗示的 NetMsmqBinding？如果是这样，使用默认绑定配置，您将[完全不必要地](http://www.google.co.uk/url?sa=t&rct=j&q=&esrc=s&frm=1&source=web&cd=1&ved=0CFQQFjAA&url=http://blogs.charteris.com/blogs/chrisdi/archive/2010/11/24/talking-to-wcf-over-named-pipes-3-do-we-need-all-this-security.aspx)加密和签署每条批量消息，这在您的直接 MSMQ 案例中不会发生。这些对大消息的加密操作也将相对昂贵。

与定义为 OneWay 的 WCF 操作进行更好的比较。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-09T01:37:26.527

您能否提供示例代码来显示您所看到的行为？

我通过生成 20,000 条要发送的消息进行了自己的测试。我尝试了 20,000 个直接 MSMQ 和 20,000 个 WCF 为我抽象 MSMQ 端点。

带有直接 MSMQ 的 20,000 使用了 64.75% 的 CPU 时间，而发送 20,000 条消息的 WCF 版本使用了 34.16% 的 CPU 时间（使用 Visual Studio Ultimate 的分析功能进行检测）。

除非我最后犯了一个错误，否则 WCF 版本几乎是硬编码 MSMQ 版本的两倍。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-04T23:48:10.250

我认为不同之处在于您的 WCF 操作与 MSMQ 在接受请求时所做的事情。

我希望当您使用 MSMQ simple 将消息排入队列时执行的方法只接受该消息而不接受其他任何内容。一些后端工人负责繁重的工作。

在您的操作中，您需要将请求传递给请求处理程序的单例实例。当服务“启动”时，应该实例化请求处理程序实例。

您还可以通过使用 .NET 4 中的任务并行库来并行化您的请求来提高性能。

# c# - ASP.NET - 将gridview数据导出到excel并直接发送邮件

> ID：11308346
> 
> 赞同：0
> 
> 时间：2012-07-03T09:47:22.857
> 
> 标签：c#, asp.net, excel

我正在寻找一些示例编码，以便能够在启动页面时自动将当前的 gridview 数据导出到 excel 文件，然后将其附加到邮件并发送邮件。

我有一个导出到 excel 的功能，但是这个功能要求用户保存或查看文件，我非常需要跳过这一步，因为我希望我的脚本自动运行。

如果有人可以帮助我，这将不胜感激:)

谢谢凯文

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-03T09:53:42.370

尝试使用此代码

```
 string filename = "Test.xls"; 
        System.IO.StringWriter tw = new System.IO.StringWriter();
        System.Web.UI.HtmlTextWriter hw = new System.Web.UI.HtmlTextWriter(tw);

        //Get the H`enter code here`TML for the control.
        yourGrid.RenderControl(hw);
        //Write the HTML back to the browser.
        Response.ContentType = "application/vnd.ms-excel";
        Response.AppendHeader("Content-Disposition", "attachment; filename=" + filename + "");

        Response.Write(tw.ToString()); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-03T10:15:22.597

首先，您必须将网格中的所有数据保存到 Excel 文件中。这是一个如何将数据导出到 Excel 的示例。

[http://zeeshanumardotnet.blogspot.com/2011/06/creating-reports-in-excel-2007-using.html](http://zeeshanumardotnet.blogspot.com/2011/06/creating-reports-in-excel-2007-using.html)

将数据导出到 Excel 文件后，您可以将其作为附件通过电子邮件发送给任何收件人。有关如何发送附件的详细信息，请参阅此链接：-

[http://www.codeproject.com/Articles/10828/Sending-Email-with-attachment-in-ASP-NET-using-SMT](http://www.codeproject.com/Articles/10828/Sending-Email-with-attachment-in-ASP-NET-using-SMT)

因为您不希望用户按下任何按钮，所以您可以在 Page_load 事件中编写这两个代码。

# objective-c - 如何将 NSString 附加到另一个 NSString

> ID：11308352
> 
> 赞同：28
> 
> 时间：2012-07-03T09:47:57.813
> 
> 标签：objective-c, nsstring

我在 Objective C 方面相对较新，但在编程方面不是。我想知道如何将一个 NSString 附加到另一个上。我正在制作一个用户必须完成一个基本句子的应用程序，我想知道如何获取用户输入的字符串并将其附加到屏幕上的当前字符串？

* * *

## 回答 #1

> 赞同：49
> 
> 时间：2012-07-03T09:53:54.500

我认为您正在寻找 NSString 的 stringByAppendingString 函数。请参见下面的示例。

```
NSString *errorTag = @"Error: ";
NSString *errorString = @"premature end of file.";
NSString *errorMessage = [errorTag stringByAppendingString:errorString]; 
```

产生字符串“错误：文件过早结束。”。

* * *

## 回答 #2

> 赞同：40
> 
> 时间：2014-03-20T12:23:29.040

这也可以通过使用**[NSMutableString](https://developer.apple.com/documentation/foundation/nsmutablestring)**来实现：

```
NSMutableString *string = [NSMutableString stringWithString:@"String 1"];
[string appendString:@"String 2"]; 
```

* * *

## 回答 #3

> 赞同：13
> 
> 时间：2013-01-08T15:16:46.780

It looks like you have your answer but you can also use the `stringWithFormat:` method like so:

```
NSString *sample1 = @"Hello"; 
NSString *sample2 = @"Being appended";

NSString *complete = [NSString stringWithFormat:@"%@%@", sample1,
sample2]; 
```

* * *

## 回答 #4

> 赞同：6
> 
> 时间：2016-09-01T07:07:20.927

您不能真正将一个 NSString 附加到另一个，因为 NSString 类是不可变的。所有标准数据结构都有可变和不可变的变体（NSMutableString 与 NSString、NSMutableArray 与 NSArray 等）。如果您想在不重新分配新对象的情况下更改内容，您将需要使用可变版本。您可以使用以下方法重新创建一个新的 NSString：

```
NSString* string3 = [NSString stringWithFormat:@"%@%@",string1,string2]; 
```

虽然这对性能不利，所以如果您要在循环或某些性能敏感区域中执行此操作（即您一遍又一遍地附加到相同的字符串），这肯定会给您带来问题（我已经做了这个之前的错误）。

相反，您可能应该使用 NSMutableString 并将第二个字符串附加到它：

```
NSMutableString* string1 = [NSMutableString alloc] init];
[string1 appendString:string2]; 
```

# internationalization - Yii - 使用 i18n 和 CJuiDatePicker

> ID：11308353
> 
> 赞同：2
> 
> 时间：2012-07-03T09:48:05.183
> 
> 标签：internationalization, yii

我正在尝试制作一个国际化的 Yii 应用程序。

我有一种行为，可以将日期与用户选择的语言环境日期格式相互转换，因此一切都处理得很好。

当我尝试从语言环境设置中为 CJuiDatepicker 设置语言和日期格式时，我最终会得到中文月份名称（无论我选择哪种语言环境格式）和美国格式的日期。

CJuiDatePicker 想要的日期和语言格式与 Yii 提供的不匹配 - 我如何使选择器工作？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-03T09:58:56.193

jQuery 和 Yii 的问题在于它们不使用相同的语言环境名称。例如，Yii 有诸如`en`and之类的语言环境名称，`en_gb`而 jQuery 根本没有`en`语言环境并调用“英语（英国）”语言环境`en-GB`（破折号而不是下划线）。

还有一个问题是 Yii 和 jQuery 的日期格式说明符不同。

为了连接这两个世界，您必须编写一些手动代码；这是我在过去项目中使用的我自己的代码的摘录：

```
class LocaleExtensions {
    private static $yiiTojQueryFormatConversion = array(
        'yyyy' => 'yy',
        'yy' => 'y',
        'MMMM' => 'MM',
        'MMM' => 'M',
        'MM' => 'mm',
        'M' => 'm',
    );

    private static $yiiTojQueryLanguageConversion = array(
        'en' => 'en-GB',
    );

    public static function getJQueryDateFormat($width='medium') {
        return strtr(Yii::app()->getLocale()->getDateFormat($width),
                     self::$yiiTojQueryFormatConversion);
    }

    public static function getJQueryLanguageFromYii($language = null) {
        if ($language == null) {
            $language = Yii::app()->getLanguage();
        }

        if (isset(self::$yiiTojQueryLanguageConversion[$language])) {
            return self::$yiiTojQueryLanguageConversion[$language];
        }

        return $language;
    }
} 
```

要解决语言环境问题，您可以将 Yii 的小部件子类化以在适当的时候执行此操作（或仅手动执行）：

```
$this->language = LocaleExtensions::getJQueryLanguageFromYii($this->language); 
```

您还可以从 Yii 设置中检索与 jQuery 兼容的日期格式，并在 Javascript 代码中使用它，如下所示：

```
var format = <?php echo json_encode(LocaleExtensions::getJQueryDateFormat('long'));?>
var locale = <?php echo json_encode(LocaleExtensions::getJQueryLanguageFromYii());?>
var now = new Date();
alert($.datepicker.formatDate(format, now, $.datepicker.regional[locale])); 
```

# css - 将 JQmobile 用于大小为 30%-70% 的基于 CSS 的列

> ID：11308362
> 
> 赞同：3
> 
> 时间：2012-07-03T09:48:33.840
> 
> 标签：css, jquery-mobile

我可以使用`ui-grid-a`显示 50%-50% 的两列网格或三列网格，但是如何显示大小为**70%-30% 的行。**所以右边的文字在 30% -`a grid`和`b grid`70%

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-03T11:49:03.333

添加自定义 css 以覆盖 JQM 默认值，如下所示：

```
.ui-block-a {
      width: 70% !important;
}

.ui-block-b {
      width: 30% !important;
} 
```

**JSBin - 示例**
[http://jsbin.com/eguwij/2/edit#source](http://jsbin.com/eguwij/2/edit#source)

# javascript - JQuery - 检查窗口何时位于顶部（用户不能再向上滚动）

> ID：11308365
> 
> 赞同：0
> 
> 时间：2012-07-03T09:48:38.930
> 
> 标签：javascript, jquery

我有这样的功能：

```
$(window).on('scroll', function(){
    $('.top_fixed').fadeTo('fast', 0.8);
}); 
```

当窗口位于顶部时（当用户无法再向上滚动时），我想将不透明度恢复为 1。我怎么能做这个

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-03T09:50:27.527

```
if($(window).scrollTop() == 0) {
    // means you cant scroll up anymore
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-03T09:58:27.657

**演示** [http://jsfiddle.net/eE9tp/](http://jsfiddle.net/eE9tp/)

行为：向下滚动，当您滚动到顶部时，您会看到`opacity`变成`.7`

API：`scrollTop`- [http://api.jquery.com/scrollTop/](http://api.jquery.com/scrollTop/)

这应该有帮助，`B-)`

**代码**

```
 $scrtop = $(window).scrollTop();
    if ($scrtop > 100) {
        $topnavbar.stop(true).fadeTo(500, 1);
    } else {
        $topnavbar.stop(true).fadeTo(500, .7);
    } 
```

# matlab - 计算单元数组中所有元素的最佳方法？

> ID：11308366
> 
> 赞同：7
> 
> 时间：2012-07-03T09:48:46.037
> 
> 标签：matlab, cell

我想计算单元格数组中的所有元素，包括“嵌套”单元格中的元素。

对于元胞数组

```
>> C = {{{1,2},{3,4,5}},{{{6},{7},{8}},{9}},10}

C = {1x2 cell}    {1x2 cell}    [10] 
```

答案应该是`10`。

一种方法是`[C{:}]`重复使用，直到没有单元格留下，然后使用`numel`但必须有更好的方法？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-07-03T10:17:29.403

由于您只对*元素的数量*感兴趣，因此这是[@Ansari](https://stackoverflow.com/a/11308652/97160)链接到的[flatten.m](http://www.mathworks.com/matlabcentral/fileexchange/27009-flatten-nested-cell-arrays/content/flatten.m)的简化版本：

```
function n = my_numel(A)
    n = 0;
    for i=1:numel(A)
        if iscell(A{i})
            n = n + my_numel(A{i});
        else
            n = n + numel(A{i});
        end
    end
end 
```

结果：

```
>> C = {{{1,2},{3,4,5}},{{{6},{7},{8}},{9}},10};
>> my_numel(C)
ans =
    10 
```

* * *

## 编辑：

如果您觉得懒惰，我们可以让[CELLPLOT](http://www.mathworks.com/help/techdoc/ref/cellplot.html)进行计数：

```
hFig = figure('Visible','off');
num = numel( findobj(cellplot(C),'type','text') );
close(hFig) 
```

基本上我们创建一个不可见的图形，绘制单元格数组，计算创建了多少“文本”对象，然后删除不可见的图形。

这是情节在下面的样子：

![截屏](../Images/05a351826f4944230141744ebab6dbef.png)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-03T10:06:49.177

把它放在一个函数中（比如说`flatten.m`）（来自[MATLAB Central](http://www.mathworks.com/matlabcentral/fileexchange/27009-flatten-nested-cell-arrays/content/flatten.m)的代码）：

```
function C = flatten(A)
C = {};
for i=1:numel(A)  
    if(~iscell(A{i}))
        C = [C,A{i}];
    else
       Ctemp = flatten(A{i});
       C = [C,Ctemp{:}];
    end
end 
```

然后做`numel(flatten(C))`找到元素的总数。

如果你不喜欢创建一个单独的函数，你可以使用这段聪明（但讨厌）的代码来定义一个使用匿名函数的扁平化函数（代码来自[这里](http://apageofinsanity.wordpress.com/2012/02/22/functional-implementation-of-flatten/)）：

```
flatten = @(nested) feval(Y(@(flat) @(v) foldr(@(x, y) ifthenelse(iscell(x) | iscell(y), @() [flat(x), flat(y)], @() {x, y}), [], v)), nested); 
```

无论哪种方式，您都需要递归以展平单元阵列然后计数。

# r - 错误 : 'closure' 类型的对象不是子集

> ID：11308367
> 
> 赞同：123
> 
> 时间：2012-07-03T09:48:57.930
> 
> 标签：r, r-faq

我终于能够为[我的抓取](https://stackoverflow.com/q/11295618/1468366)工作制定代码。它似乎工作正常，然后突然当我再次运行它时，我收到以下错误消息：

```
Error in url[i] = paste("http://en.wikipedia.org/wiki/", gsub(" ", "_",  : 
  object of type 'closure' is not subsettable 
```

我不确定为什么，因为我在代码中没有更改任何内容。

请指教。

```
library(XML)
library(plyr)

names <- c("George Clooney", "Kevin Costner", "George Bush", "Amar Shanghavi")

for(i in 1:length(names)) {
    url[i] = paste('http://en.wikipedia.org/wiki/', gsub(" ","_", names[i]) , sep="")

    # some parsing code
} 
```

* * *

## 回答 #1

> 赞同：137
> 
> 时间：2012-07-03T10:16:00.230

通常，此错误消息意味着您已尝试对函数使用索引。您可以重现此错误消息，例如

```
mean[1]
## Error in mean[1] : object of type 'closure' is not subsettable
mean[[1]]
## Error in mean[[1]] : object of type 'closure' is not subsettable
mean$a
## Error in mean$a : object of type 'closure' is not subsettable 
```

错误消息中提到的闭包（松散地）是函数和调用函数时存储变量的环境。

* * *

在这种特定情况下，正如 Joshua 所提到的，您正试图将[`url`](https://www.rdocumentation.org/packages/base/topics/connections)函数作为变量访问。如果您定义了一个名为 的变量`url`，那么错误就会消失。

作为一个好的做法，您通常应该避免在 base-R 函数之后命名变量。（调用变量[`data`](https://www.rdocumentation.org/packages/utils/topics/data)是此错误的常见来源。）

* * *

尝试对运算符或关键字进行子集化有几个相关的错误。

```
`+`[1]
## Error in `+`[1] : object of type 'builtin' is not subsettable
`if`[1]
## Error in `if`[1] : object of type 'special' is not subsettable 
```

* * *

如果您在 中遇到此问题`shiny`，最可能的原因是您尝试使用`reactive`表达式而不使用括号将其作为函数调用。

```
library(shiny)
reactive_df <- reactive({
    data.frame(col1 = c(1,2,3),
               col2 = c(4,5,6))
}) 
```

虽然我们经常使用闪亮的反应式表达式，就好像它们是数据帧一样，但它们实际上是返回数据帧（或其他对象）的**函数。**

```
isolate({
    print(reactive_df())
    print(reactive_df()$col1)
})
  col1 col2
1    1    4
2    2    5
3    3    6
[1] 1 2 3 
```

但是如果我们尝试不使用括号对其进行子集化，那么我们实际上是在尝试索引一个函数，我们会得到一个错误：

```
isolate(
    reactive_df$col1
)
Error in reactive_df$col1 : object of type 'closure' is not subsettable 
```

* * *

## 回答 #2

> 赞同：38
> 
> 时间：2012-07-03T10:01:21.007

`url`在尝试对其进行子集化之前 ，您没有定义向量 , 。`url`也是基本包中的一个函数，因此`url[i]`试图对该函数进行子集化......这没有意义。

您可能`url`在之前的 R 会话中定义过，但忘记将该代码复制到您的脚本中。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2019-10-03T12:01:37.727

如果出现这种类似的错误 **警告：$ 中的错误：“闭包”类型的对象不是子集[没有可用的堆栈跟踪]**

只需使用 :: 添加相应的包名称，例如

而不是标签（....）

写闪亮的::tags(....)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2021-03-02T10:48:33.420

这可能意味着未定义的变量。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2019-06-17T09:23:04.243

我有这个问题是试图删除事件反应中的 ui 元素：

```
myReactives <- eventReactive(input$execute, {
    ... # Some other long running function here
    removeUI(selector = "#placeholder2")
}) 
```

我收到了这个错误，但不是在 removeUI 元素行上，由于某种原因，它在下一个观察者中。从 eventReactive 中取出 removeUI 方法并将其放在其他地方为我消除了这个错误。

* * *

## 回答 #6

> 赞同：-5
> 
> 时间：2016-12-19T17:27:24.487

我想你打算这样做`url[i] <- paste(...`

而不是`url[i] = paste(...`. 如果是这样，请替换`=`为`<-`.

# python - 修改绑定方法及其类的状态的 Python 装饰器

> ID：11308369
> 
> 赞同：2
> 
> 时间：2012-07-03T09:49:07.837
> 
> 标签：python, object, underscore.js, decorator

我正在尝试编写一个修改其类状态的类方法装饰器。我目前在实施它时遇到了麻烦。

附带问题：装饰器什么时候被调用？它是在类被实例化时加载还是在类读取时加载？

我想要做的是：

```
class ObjMeta(object):
    methods = []

    # This should be a decorator that magically updates the 'methods'
    # attribute (or list) of this class that's being read by the proxying
    # class below.
    def method_wrapper(method):
        @functools.wraps(method)
        def wrapper(*args, **kwargs):
            ObjMeta.methods.append(method.__name__)
            return method(*args, **kwargs)
        return wrapper

    # Our methods
    @method_wrapper
    def method1(self, *args):
        return args

    @method_wrapper
    def method2(self, *args):
        return args

class Obj(object):

    klass = None

    def __init__(self, object_class=ObjMeta):
        self.klass = object_class
        self._set_methods(object_class)

    # We dynamically load the method proxies that calls to our meta class
    # that actually contains the methods. It's actually dependent to the 
    # meta class' methods attribute that contains a list of names of its
    # existing methods. This is where I wanted it to be done automagically with
    # the help of decorators
    def _set_methods(self, object_class):
        for method_name in object_class:
            setattr(self, method_name, self._proxy_method(method_name))

    # Proxies the method that's being called to our meta class
    def _proxy_method(self, method_name):
        def wrapper(*fargs, **fkwargs):
            return getattr(self.klass(*fargs, **fkwargs), method_name)
        return wrapper() 
```

我认为在类中手动编写方法列表很丑，所以也许装饰器会解决这个问题。

这是我正在将 underscore.js 移植到 python 的开源项目。我知道它说我应该只使用 itertools 或其他东西。我这样做只是为了热爱编程和学习。顺便说一句，项目托管[在这里](https://github.com/jpanganiban/python-underscore)

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-03T09:54:04.347

这里有一些问题。

当方法本身被调用时，内部包装器中的任何内容都会被调用。基本上，您正在用该函数替换该方法，该函数包装了原始函数。因此，您的代码会在每次调用时将方法名称添加到列表中，这可能不是您想要的。相反，该附加应该在`method_wrapper`级别上，即在内部包装之外。这在定义方法时调用，这发生在第一次导入包含该类的模块时。

第二个错误是你从来没有真正调用过这个方法——你只是简单地返回它。而不是`return method`您应该返回使用提供的参数调用方法的值 - `return method(*args, **kwargs)`。

# objective-c - 从 NSString 转换为 NSDate：如何忽略时区

> ID：11308371
> 
> 赞同：2
> 
> 时间：2012-07-03T09:49:23.310
> 
> 标签：objective-c, ios, unicode, nsdate, iso8601

我正在`2012-06-30`使用以下代码将日期格式为的 NSString 转换为 NSDate：

```
NSDateFormatter *dateFormatter = [[NSDateFormatter alloc] init];
[dateFormatter setDateFormat:@"yyyy-MM-dd"];
NSDate *date = [dateFormatter dateFromString:dateString]; 
```

当省略`[dateFormatter setTimeZone:[NSTimeZone timeZoneForSecondsFromGMT:0]]`NSString中的值时，会`2012-06-29 23:00:00`加上一些自动添加的时区信息，这表明系统对当前时区有一些假设。

当我使用上述方法设置时区时，转换工作正常。

但是，如果用户在不同的时区会发生什么？

如何确保 iOS 只解析日期而不添加任何时间信息？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-03T09:56:11.853

数据不会改变，时区不会影响该日期本身，它只会影响日期显示，因此显示 13:00 GMT 的日期将具有相同的显示日期，即 14:00 GMT +1

您不应该关心时区，而是将日期转换为设备使用的当前时区

```
[dateFormatter setTimeZone:[NSTimeZone systemTimeZone]]; 
```

这将设置设备的时区

# php - 将 PHP 循环拆分为 2 个列表

> ID：11308375
> 
> 赞同：1
> 
> 时间：2012-07-03T09:49:48.677
> 
> 标签：php, html-lists

我已经构建了以下函数，但是是否可以让它将我的列表从一个拆分为多个，这样我每个最多可以有 8`<li>`个`<ul>`？

```
function buildProductsMenu($base) {

    $sql = "SELECT *
            FROM tbl_category";
    $result     = dbQuery($sql);
    while ($row = dbFetchAssoc($result)) {
    echo "<ul>";        
        echo "<li class='title'>$row[cat_name]</li>";
            $sqlProd = "SELECT *
                FROM tbl_product WHERE cat_id = $row[cat_id]";
            $resultProd     = dbQuery($sqlProd);
            while ($rowProd = dbFetchAssoc($resultProd)) {
                extract($rowProd);
                echo "<li><a href='".$base."products/".strtolower($row['cat_name'])."/".strtolower($pd_name)."'>".$pd_name."</a></li>";
            }       
    echo "</ul>";               
    }
} 
```

**与 jurgemaister 解决方案一起去**

```
function buildProductsMenu($base) {

    $sql = "SELECT *
            FROM tbl_category";
    $result     = dbQuery($sql);
    while ($row = dbFetchAssoc($result)) {
        echo "<ul>";        
        echo "<li class='title'>$row[cat_name]</li>";
        $sqlProd = "SELECT * FROM tbl_product WHERE cat_id = $row[cat_id]";
        $resultProd     = dbQuery($sqlProd);
        $counter = 1;
        while ($rowProd = dbFetchAssoc($resultProd)) {
            extract($rowProd);
            if($counter % 12 == 0) {
                $counter = 1;
                echo "</ul><ul style='margin-top:25px;'>";
            }
            echo "<li><a href='".$base."products/".strtolower($row['cat_name'])."/".strtolower($pd_name)."'>".$pd_name."</a></li>";
            $counter++;
        }
        echo "</ul>";
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-03T09:57:39.953

好的，与其直接从函数中回显 LI，我建议您将它们全部添加到数组中，一旦将事物放入数组中，它总是更易于管理。

在最终的 LI 数组上使用[array_chunk()](http://php.net/manual/en/function.array-chunk.php)，它将把它分成八组。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-03T10:00:07.100

您可以添加一个计数器，当该计数器达到 8 时，您开始一个新的`ul`.

```
$counter = 1;
while ($rowProd = dbFetchAssoc($resultProd)) {
    extract($rowProd);

    if($counter % 8 == 0) {
        $counter = 1;
        echo "</ul><ul>";
    }

    echo "<li><a href='".$base."products/".strtolower($row['cat_name'])."/".strtolower($pd_name)."'>".$pd_name."</a></li>";
    counter++;
} 
```

# android - Android上的低成本位图旋转

> ID：11308377
> 
> 赞同：0
> 
> 时间：2012-07-03T09:50:02.987
> 
> 标签：android, bitmap, live-wallpaper

我正在为我自己的动态壁纸编写代码。墙纸（除其他外）具有连续旋转的背景位图。位图很大 (768x768px)。我所做的每次屏幕刷新：

```
canvas.drawColor(Color.WHITE);
Matrix matrix = new Matrix();
matrix.setRotate(degrees, background.getWidth() / 2, background.getHeight() / 2);
canvas.drawBitmap(background, matrix, paint); 
```

壁纸将以 12-18 FPS 的速度运行。这太重了吗？有没有更好的方法来做到这一点？先感谢您。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-03T09:54:56.520

您可以尝试使用`Animation`，

对于示例示例，

```
RotateAnimation animationRotator = new RotateAnimation(0f, 360f, 10f, 10f);
animationRotator.setInterpolator(new LinearInterpolator());
animationRotator.setRepeatCount(Animation.INFINITE); // For Infinite Rotation
animationRotator.setDuration(1000); // Duration in which one rotation should get over

yourView.startAnimation(animationRotator); 
```

# ios - UIAppearance 未对以编程方式创建的 UILabel 生效

> ID：11308379
> 
> 赞同：18
> 
> 时间：2012-07-03T09:50:05.027
> 
> 标签：ios, appearance, uiappearance

我们扩展了 UILabel 以便能够在我们的应用程序中为给定标签类型的所有用途应用标准字体和颜色。例如。

```
@interface UILabelHeadingBold : UILabel
@end 
```

在我们的 AppDelegate 中，我们像这样应用字体和颜色

```
[[UILabelHeadingBold appearance] setTextColor:<some color>];
[[UILabelHeadingBold appearance] setFont:<some font>]; 
```

在我们的 XIB 中添加 UILabel 时，我们现在可以选择 UILabelHeadingBold 类型的类，它可以按预期工作。标签以正确的字体和颜色显示，如我们的 AppDelegate 中所指定。

但是，如果我们以编程方式创建标签，例如。

```
UILabelHeadingBold *headingLabel = [[UILabelHeadingBold alloc] initWithFrame:CGRectMake(10, 10, 100, 30)];
[self.mainView addSubview:headingLabel]; 
```

UILabel 没有应用预期的字体/颜色。我们必须手动应用这些属性。

有没有办法让 UIAppearance 对以编程方式创建的 UI 元素生效，或者它只在 XIB 中使用时才有效？

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-08-05T14:24:40.573

从苹果文档：

> 为了支持外观定制，一个类必须符合 UIAppearanceContainer 协议，并且相关的访问器方法必须用 UI_APPEARANCE_SELECTOR 标记。

例如在`UINavigationBar.h`,`tintColor`中标有`UI_APPEARANCE_SELECTOR`

```
@property(nonatomic,retain) UIColor *tintColor UI_APPEARANCE_SELECTOR; 
```

但是在 UILabel.h 中，您可以看到`textColor`and`font`属性没有用 UI_APPEARANCE_SELECTOR 标记，但是当在 Interface Builder 中添加时它以某种方式起作用（按照文档，它根本不应该起作用）。

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2012-12-22T21:25:23.383

对我来说没有问题的简单技巧是使用修改 UILabel 属性的 UIAppearance 设置器创建一个类别。

遵循 UIAppearance 约定，我创建了一个方法：

```
- (void)setTextAttributes:(NSDictionary *)numberTextAttributes;
{
    UIFont *font = [numberTextAttributes objectForKey:UITextAttributeFont];
    if (font) {
        self.font = font;
    }
    UIColor *textColor = [numberTextAttributes objectForKey:UITextAttributeTextColor];
    if (textColor) {
        self.textColor = textColor;
    }
    UIColor *textShadowColor = [numberTextAttributes objectForKey:UITextAttributeTextShadowColor];
    if (textShadowColor) {
        self.shadowColor = textShadowColor;
    }
    NSValue *shadowOffsetValue = [numberTextAttributes objectForKey:UITextAttributeTextShadowOffset];
    if (shadowOffsetValue) {
        UIOffset shadowOffset = [shadowOffsetValue UIOffsetValue];
        self.shadowOffset = CGSizeMake(shadowOffset.horizontal, shadowOffset.vertical);
    }
} 
```

在 UILabel 类别中：

```
@interface UILabel (UISS)

- (void)setTextAttributes:(NSDictionary *)numberTextAttributes UI_APPEARANCE_SELECTOR;

@end 
```

我仍在试图弄清楚为什么原来的二传手不起作用。

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2019-02-01T21:06:28.613

我遇到了同样的问题，但是在 Swift 中。如果从情节提要中添加custom`UILabel`的外观将起作用，但如果从代码中添加则不会。

这是我在 Swift 中找到的对我有用的解决方案：

```
class MyLabel: UILabel { }

extension UILabel {
    @objc dynamic var customFont: UIFont! {
        get { return self.font }
        set { self.font = newValue }
    }

    @objc dynamic var customColor: UIColor! {
        get { return self.textColor }
        set {  self.textColor = newValue }
    }
} 
```

然后在您配置应用外观的位置添加这些行：

```
MyLabel.appearance().customFont = UIFont.systemFont(ofSize: 20)
MyLabel.appearance().customColor = UIColor.magenta 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-11-24T22:04:02.203

@robert.wijas 解决方案效果很好！

对于 iOS 7 及更高版本，我必须更新密钥，因为他使用的密钥已被 7+ 弃用：

```
- (void)setTextAttributes:(NSDictionary *)numberTextAttributes;
{
    UIFont *font = [numberTextAttributes objectForKey:NSFontAttributeName];
    if (font) {
        self.font = font;
    }
    UIColor *textColor = [numberTextAttributes objectForKey:NSForegroundColorAttributeName];
    if (textColor) {
        self.textColor = textColor;
    }
    UIColor *textShadowColor = [numberTextAttributes objectForKey:NSShadowAttributeName];
    if (textShadowColor) {
        self.shadowColor = textShadowColor;
    }
    NSValue *shadowOffsetValue = [numberTextAttributes objectForKey:NSShadowAttributeName];
    if (shadowOffsetValue) {
        UIOffset shadowOffset = [shadowOffsetValue UIOffsetValue];
        self.shadowOffset = CGSizeMake(shadowOffset.horizontal, shadowOffset.vertical);
    }
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2018-04-02T22:46:42.757

我使用的一种解决方法是从设置的外观手动应用颜色：

```
let label = UILabel()
label.textColor = UILabel.appearance().textColor 
```

这样你就不需要引用任何新的东西，或者明确定义颜色。这也适用于特定于上下文的着色：

```
label.textColor = UILabel.appearance(whenContainedInInstancesOf:[MyView.self]).textColor 
```

# python - pyglet：按下按钮时更改精灵实例的图像

> ID：11308382
> 
> 赞同：4
> 
> 时间：2012-07-03T09:50:15.830
> 
> 标签：python, sprite, pyglet

此代码`assassin1.png`在黑色背景上显示图像。只要我按下键，图像就会向右移动，一旦我松开键，图像就会停止移动。

一旦我按下键，它也应该变为图像`assassin2.png`，当我释放键时，它应该变回`assassin1.png`. 但是，此代码在移动时从不显示`assassin2.png`图像。为什么会这样，我该如何解决？

```
import pyglet

class Assassin(pyglet.sprite.Sprite):
    def __init__(self, batch, img):
        pyglet.sprite.Sprite.__init__(self, img, x = 50, y = 30)

    def stand(self):
        self.img = pyglet.image.load("assassin1.png")
        return self

    def move(self):
        self.img = pyglet.image.load('assassin2.png')    
        return self

class Game(pyglet.window.Window):
    def __init__(self):
        pyglet.window.Window.__init__(self, width = 315, height = 220)
        self.batch_draw = pyglet.graphics.Batch()
        self.player = Assassin(batch = self.batch_draw, img = pyglet.image.load("assassin1.png"))
        self.keys_held = []      
        self.schedule = pyglet.clock.schedule_interval(func = self.update, interval = 1/60.) 

    def on_draw(self): 
        self.clear()         
        self.batch_draw.draw()
        self.player.draw()  

    def on_key_press(self, symbol, modifiers):
        self.keys_held.append(symbol)
        if symbol == pyglet.window.key.RIGHT:
            self.player = self.player.move()
            print "The 'RIGHT' key was pressed"

    def on_key_release(self, symbol, modifiers):
        self.keys_held.pop(self.keys_held.index(symbol))
        self.player = self.player.stand()
        print "The 'RIGHT' key was released"

    def update(self, interval):
        if pyglet.window.key.RIGHT in self.keys_held:
            self.player.x += 50 * interval

if __name__ == "__main__":
    window = Game()
    pyglet.app.run() 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-03T11:36:47.610

我查看了[pyglet的源代码](https://code.google.com/p/pyglet/source/browse/pyglet/sprite.py#344)，我认为问题出在：

```
self.img = pyglet.image.load(... 
```

图像存储在`self.image`变量中，而不是`self.img`. 所以改为：

```
self.image = pyglet.image.load(... 
```

应该更新精灵正在使用的图像。

# javascript - 未捕获的类型错误：无法读取未定义的属性“htmlSource”

> ID：11308391
> 
> 赞同：0
> 
> 时间：2012-07-03T09:50:54.947
> 
> 标签：javascript, dom-events

请帮我解决我的问题。我的网站[http://bonus.lg.ua](http://bonus.lg.ua)上有 Sobi2 。一切正常，但我将浏览器从 Firefox 更改为 Chrome，并且 Sobis 的条目 Edit Html Source 按钮出现问题。当我在 Chrome 中按下 Entry 按钮“Edit Html Source”时，会打开带有复选框和文本“{$lang_theme_code_wordwrap}”的空弹出窗口，仅此而已。使用开发人员工具，我得到下一个错误：

> 未捕获的类型错误：无法读取未定义 source_editor.js:18 的属性“htmlSource”

这里sourse_editor.js，函数“function onLoadInit()”中的错误：

```
function saveContent() {
    tinyMCE.setContent(document.getElementById('htmlSource').value);
    tinyMCE.closeWindow(window);
}

// Fixes some charcode issues
function fixContent(html) {
/*  html = html.replace(new RegExp('<(p|hr|table|tr|td|ol|ul|object|embed|li|blockquote)', 'gi'),'\n<$1');
    html = html.replace(new RegExp('<\/(p|ol|ul|li|table|tr|td|blockquote|object)>', 'gi'),'</$1>\n');
    html = tinyMCE.regexpReplace(html, '<br />','<br />\n','gi');
    html = tinyMCE.regexpReplace(html, '\n\n','\n','gi');*/
    return html;
}

function onLoadInit() {
    tinyMCEPopup.resizeToInnerSize();

    document.forms[0].htmlSource.value = fixContent(tinyMCE.getContent(tinyMCE.getWindowArg('editor_id')));
    resizeInputs();
}

function setWrap(val) {
    var s = document.forms[0].htmlSource;

    s.wrap = val;

    if (tinyMCE.isGecko) {
        var v = s.value;
        var n = s.cloneNode(false);
        n.setAttribute("wrap", val);
        s.parentNode.replaceChild(n, s);
        n.value = v;
    }
}

function toggleWordWrap(elm) {
    if (elm.checked)
        setWrap('soft');
    else
        setWrap('off');
}

var wHeight=0, wWidth=0, owHeight=0, owWidth=0;

function resizeInputs() {
    if (!tinyMCE.isMSIE) {
         wHeight = self.innerHeight-80;
         wWidth = self.innerWidth-16;
    } else {
         wHeight = document.body.clientHeight - 80;
         wWidth = document.body.clientWidth - 16;
    }

    document.forms[0].htmlSource.style.height = Math.abs(wHeight) + 'px';
    document.forms[0].htmlSource.style.width  = Math.abs(wWidth) + 'px';
}

function renderWordWrap() {
    if (tinyMCE.isMSIE || tinyMCE.isGecko)
        document.write('<input type="checkbox" name="wraped" id="wraped" onclick="toggleWordWrap(this);" class="wordWrapCode" /><label for="wraped">{$lang_theme_code_wordwrap}</label>');
} 
```

这是“source_editor.htm”：

```
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1" />
<title>{$lang_theme_code_title}</title>
<script language="javascript" type="text/javascript"
    src="../../tiny_mce_popup.js"></script>
<script language="javascript" type="text/javascript"
    src="jscripts/source_editor.js"></script>
<base target="_self" />
</head>
<body onload="tinyMCEPopup.executeOnLoad('onLoadInit();');"
    onresize="resizeInputs();" style="display: none">
<form name="source" onsubmit="saveContent();" action="#">
<div style="float: left" class="title">{$lang_theme_code_title}</div>

<div style="float: right"><script language="javascript"
    type="text/javascript">renderWordWrap();</script></div>

<textarea name="htmlSource" id="htmlSource" rows="15" cols="100"
    style="width: 100%; height: 100%; font-family: 'Courier New',Courier,mono; font-size: 12px"
    dir="ltr" wrap="off"></textarea>

<div class="mceActionPanel">
<div style="float: left"><input type="button" name="insert"
    value="{$lang_update}" onclick="saveContent();" id="insert" /></div>

<div style="float: right"><input type="button" name="cancel"
    value="{$lang_cancel}" onclick="tinyMCEPopup.close();" id="cancel" />
</div>
</div>
</form>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2016-12-18T15:16:05.213

如果您只是将 textarea 包装在表单元素中，则应该可以解决此问题：

```
<form>
  <textarea name="htmlSource" id="htmlSource" rows="15" cols="100"
    style="width: 100%; height: 100%; font-family: 'Courier New',Courier,mono; font-size: 12px"
    dir="ltr" wrap="off"></textarea>
</form> 
```

# java - 运行 Jbilling 源代码（一个 ANT 项目）

> ID：11308393
> 
> 赞同：0
> 
> 时间：2012-07-03T09:51:03.683
> 
> 标签：java, ant

我已经下载了 Jbilling 源代码。我在 STS (eclipse) 中导入了该项目，但我无法运行它。谁能向我解释如何运行该项目以及在浏览器中访问它的 URL 是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-21T09:43:26.680

您可以运行 build.xml 默认目标。如果它的 jbilling_22 您需要先运行 jar 目标，然后再运行默认目标。您可以在 src\build\deploy 文件夹中找到 jbilling.war，将其复制到 tomcat 的 web-apps 中。对于 jbilling 3，您可以作为 grails-app 运行，您不需要执行任何 ant 目标

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-12-02T14:12:33.587

```
raher than ANT you can use Grails and run jbilling.

for ANT you can run it by blew ommand
ant test-ws
* ant test-integration

        or, execute single test classes individually

        * ant test-mediation
        * ant test-partners
        * ant test-provisioning
        * ant test-process 
```

# ruby-on-rails - 在haml中动态分配类

> ID：11308394
> 
> 赞同：1
> 
> 时间：2012-07-03T09:51:06.917
> 
> 标签：ruby-on-rails, twitter-bootstrap, haml

嗨，我有以下哈姆：

```
.btn-group-wrap{style:'text-align:center;'}
  .btn-group{style: 'display: inline-block; text-align:center; width:inherit;'}
    =link_to "All Users", users_path, class: 'btn active'
    =link_to "Search", '#', class:'btn' 
```

我希望能够在`active`每个链接的类之间来回切换。即如果`params[:controller] == "users"`那时我想要那样`active`。如果`params[:controller] =="search"`那样的话，它将使用户分类`'btn'`和搜索`'btn active'`。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-03T10:08:52.557

嗨，让它成为辅助方法，并在辅助方法中根据您的要求呈现类名。参考[http://iparamtech.blogspot.in/2012/04/dynamic-sidebar-in-rails-layout.html](http://iparamtech.blogspot.in/2012/04/dynamic-sidebar-in-rails-layout.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-03T12:18:40.600

尝试这样的事情：

```
.btn-group-wrap{style:'text-align:center;'}
  .btn-group{style: 'display: inline-block; text-align:center; width:inherit;'}
    =link_to "All Users", users_path, class: button_class
    =link_to "Search", '#', class:'btn' 
```

然后在`/apps/helpers/application_helper.rb`（或任何看起来最合适的助手）：

```
module ApplicationHelper
  def button_class
    if params[:controller] == "users" 
      'active'
    elsif params[:controller] =="search"
      'btn active'
    else
      # default value
      'btn'
    end
  end
end 
```

# wix - 蜡：移动 进入

> ID：11308396
> 
> 赞同：2
> 
> 时间：2012-07-03T09:51:10.043
> 
> 标签：wix, wix3.5

我正在开发一套相关的应用程序，它们都有自己的 WiX 安装程序。您可以想象，这些安装程序之间有很多重复，我正在尝试对此做些什么。为此，我创建了一个包含一些`.wxs`文件的 WiX 库项目，并且我一直在尝试将尽可能多的代码放入这些`.wxs`文件中。到目前为止，大部分工作都很好。但是，有一件事我似乎无法移至 a `.wxs`：`Upgrade`元素。

这是我的升级代码：

```
<Upgrade Id="MY-UPGRADE-CODE-GUID">
  <!-- If an older version is found replace it -->
  <UpgradeVersion OnlyDetect="no" Property="OLDERFOUND"
                  Maximum="$(var.ProductVersion)" IncludeMaximum="no"/>
  <!-- If the same version is found do nothing (OnlyDetect) -->
  <UpgradeVersion OnlyDetect="yes" Property="SELFFOUND"
                  Minimum="$(var.ProductVersion)" IncludeMinimum="yes"
                  Maximum="$(var.ProductVersion)" IncludeMaximum="yes"/>
  <!-- If a newer version is found do nothing (OnlyDetect)  -->
  <UpgradeVersion OnlyDetect="yes" Property="NEWERFOUND"
                  Minimum="$(var.ProductVersion)" IncludeMinimum="no"/>
</Upgrade>

<CustomAction Id="AlreadyUpdated" Error="This version of !(wix.Param.Upgrade.ProductName) is already installed. You will have to uninstall it manually before this installer can continue."/>
<CustomAction Id="NoDowngrade" Error="A newer version of !(wix.Param.Upgrade.ProductName) is already installed. You will have to uninstall that version manually before this installer can continue."/>

<InstallExecuteSequence>
  <RemoveExistingProducts After="InstallInitialize"/>
  <!-- If the same version is found execute AlreadyUpdated -->
  <Custom Action="AlreadyUpdated" After="FindRelatedProducts">SELFFOUND</Custom>
  <!-- If a newer version is found execute NoDowngrade -->
  <Custom Action="NoDowngrade" After="FindRelatedProducts">NEWERFOUND</Custom>
</InstallExecuteSequence> 
```

对于`Upgrade/@Id`，我使用与 for 相同的值`Product/@UpgradeCode`。（我不确定这是否有必要，甚至是好的做法。）我想`WixVariable`在某个时候把它放在 a 中，但现在我正试图让它与文字 GUID 一起工作。

我已经将`CustomAction`s 和 the`InstallExecuteSequence`移到了`Fragment`我的`.wxs`文件中。我已经定义了 a`WixVariable`来包含 ProductName，所以我可以让每个应用程序的安装程序显示自己的名称。这正是我想要和期望的方式。

但是，当我将`Upgrade`元素移动到 a中时`Fragment`（无论它是在应用程序的`Product.wxs`文件中还是在库文件之一中，并且它是否与包含 的同一个`.wxs`也无关紧要），以下问题发生：`Fragment``InstallExecuteSequence`

*   如果我首先运行旧版本的安装程序，然后将新版本的安装程序`Upgrade`移到单独的`Fragment`, 但具有相同`Product/@Version`的`Product@/UpgradeCode`, 和`Upgrade/@Id`, 我最终会安装 2 次相同的产品，这显然不是我想要的。
*   如果我安装新的安装程序两次，它不会安装第二次（这是我想要的），但它也不会显示我的错误消息。

我会用 a 替换整个东西`MajorUpgrade`，如果不是因为 1）它似乎不想在再次安装相同版本时给出错误消息，更重要的是，2）它不允许在 a`Fragment`出于某种原因，所以我仍然坚持重复（尽管比以前少了很多）。

那么......我怎样才能在不丢失当前功能的情况下将我的`Upgrade`元素移动到库中？`.wxs`我究竟做错了什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-03T12:32:07.923

如[wix 链接器文档](http://wix.sourceforge.net/manual-wix3/light.htm)中所述，链接器将在构建 Windows 安装程序数据库时遵循片段之间的引用。但这意味着它将忽略产品 wxs*未*引用（直接或间接通过其他片段）的任何片段。

这种行为在您的场景中非常有用，因为它允许您对所有可重用组件之间的依赖关系进行建模，并且链接器将确保仅包含特定产品所需的依赖关系。

为确保包含您的升级逻辑，您有两种选择：

1.  向您的片段添加一个虚拟[属性](http://wix.sourceforge.net/manual-wix3/wix_xsd_property.htm)，并在您的产品 wxs 中使用[PropertyRef引用它。](http://wix.sourceforge.net/manual-wix3/wix_xsd_propertyref.htm)

2.  或者将您的升级逻辑放在一个[Include](http://wix.sourceforge.net/manual-wix3/wix_xsd_include.htm)元素中，然后指示 wix 预处理器将其包含在您的产品 wxs 中。有关示例，请参阅[Wix 预处理器文档。](http://wix.sourceforge.net/manual-wix3/preprocessor.htm)

# c# - C# 在 MySQL 查询中设置变量

> ID：11308402
> 
> 赞同：1
> 
> 时间：2012-07-03T09:51:24.087
> 
> 标签：c#, mysql

我现在正在编写 C# 函数，它必须返回我的用户密码。一切都很好，但是我试图编译这个项目，VS 告诉我未分配的变量。

```
string sqlLoginCheck (string userId)
    {
        string database, host, user, pass, sqlParams, sqlQuery;
        string resultPassword;

        database = "db";
        host = "localhost";
        user = "root";
        pass = "....";

        sqlParams = "Database=" + database + ";Data Source=" + host + ";User Id=" + user + ";Password=" + pass;
        sqlQuery = "SELECT `id`, `name`, `pass` FROM `users` WHERE name = '" + userId + "' LIMIT 1";

        MySqlConnection sqlConnection = new MySqlConnection(sqlParams);
        MySqlCommand sqlCommand = new MySqlCommand(sqlQuery, sqlConnection);

        // Выполняем
        try
        {
            sqlConnection.Open();

            MySqlDataReader sqlReader = sqlCommand.ExecuteReader();

            if (sqlReader.HasRows)
            {
                while (sqlReader.Read())
                {
                    resultPassword = sqlReader[2].ToString();
                }
            }
            else
            {
                resultPassword = "";
            }
        }

        catch (MySqlException sqlError)
        {
            errorMessage.Text = "Ошибка: " + sqlError.Message;

            FileInfo errorLog = new FileInfo("errorLog.txt");

            if (errorLog.Exists == false)
            {
                FileStream errorFs = errorLog.Create();
                errorFs.Close();
            }

            StreamWriter errorSw = errorLog.AppendText();

            errorSw.WriteLine(DateTime.Now + " | " + sqlError.Message);
            errorSw.Close();
        }

        finally
        {
            sqlConnection.Close();
        }

        return resultPassword;

    } 
```

在这里我无法返回 resultPassword，因为变量未分配：|

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-03T09:54:13.667

将此变量声明为

```
string resultPassword = null; 
```

或者您可以将其声明为

```
string resultPassword = String.Empty; 
```

在那种情况下，你真的不需要

```
else
{
            resultPassword = "";
} 
```

因为在声明时已经设置了密码的默认值。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-03T09:55:08.853

是在函数体中声明的`resultPassword`，但它只在`try`块内初始化：所以在异常的情况下，变量将被取消分配。

初始化块外的变量`try-catch`。

[这里](http://msdn.microsoft.com/en-us/library/4y7h161d%28v=vs.100%29.aspx)有一些细节。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-03T09:55:33.117

编译器发现有可能永远不会分配 resultPassword （如果您进入 Catch 或 finally。只需执行以下操作：

```
string resultPassword = ""; 
```

在声明中

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-03T09:55:40.220

这是因为在 resultPassword 永远不会被赋值的方法中存在一个根。正如其他人所说，声明：

```
string resultPassword = null; 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-03T09:55:59.567

我会建议

```
string resultPassword = ""; 
```

然后如果你需要设置为未找到，实际上将其设置为“**未找到**”或其他内容。就目前而言，您的代码中有未设置变量的路径-例如，它进入了捕获区域。

# javascript - 尝试向 jQuery AJAX 请求添加延迟

> ID：11308404
> 
> 赞同：8
> 
> 时间：2012-07-03T09:51:31.590
> 
> 标签：javascript, jquery, ajax, delay, onkeyup

我正在尝试延迟 AJAX 请求，以便在输入单元的最后一次键入后 2-3 秒发送出去。
到目前为止，我已经设法延迟了请求，但是在 2-3 秒后，我为该字段中的每个 keyup 发送了一个请求......
我怎样才能让 jQuery 取消第一个 keyup 而只发送最后一个 keyup？
这是到目前为止的代码：

```
$('#lastname').focus(function(){
          $('.terms :input').val(""); //clears other search fields
}).keyup(function(){
    caps(this); //another function that capitalizes the field
    $type = $(this).attr("id"); // just passing the type of desired search to the php file
        setTimeout(function(){ // setting the delay for each keypress
                ajaxSearchRequest($type); //runs the ajax request

        }, 1000);
}); 
```

上面的代码等待 1 秒，然后根据按键发送 4-5 个 AJAX 请求。我只想在最后一个之后发送一个`keyup`
我在 StackOverflow 中找到了一些使用 Javascript 的类似解决方案，但由于我对编程知识的了解，我无法将它们实施到我的项目中。

[已解决] 最终工作代码，感谢@Dr.Molle：

```
$('#lastname').focus(function(){
          $('.terms :input').val("");
}).keyup(function(){
    caps(this);
    $type = $(this).attr("id");

    window.timer=setTimeout(function(){ // setting the delay for each keypress
            ajaxSearchRequest($type); //runs the ajax request

        }, 3000);

}).keydown(function(){clearTimeout(window.timer);}); 
```

这是`ajaxSearchRequest`代码：

```
function ajaxSearchRequest($type){
                var ajaxRequest2;  // The variable that makes Ajax possible!

                try{
                  // Opera 8.0+, Firefox, Safari
                  ajaxRequest2 = new XMLHttpRequest();
                }catch (e){
                  // Internet Explorer Browsers
                  try{
                     ajaxRequest2 = new ActiveXObject("Msxml2.XMLHTTP");
                  }catch (e) {
                     try{
                    ajaxRequest2 = new ActiveXObject("Microsoft.XMLHTTP");
                     }catch (e){
                    // Something went wrong
                    alert("Browser error!");
                    return false;
                     }
                  }
                }

                ajaxRequest2.onreadystatechange = function(){
                  if(ajaxRequest2.readyState == 4){

                        $result = ajaxRequest2.responseText;
                        $('#resultcontainer').html($result);

                    }}

                var searchterm = document.getElementById($type).value;

                var queryString ="?searchterm=" + searchterm +"&type=" +$type;

                if(searchterm !== ""){

                ajaxRequest2.open("GET", "searchrequest.php" + 
                                 queryString, true);
                ajaxRequest2.send(null);
                }
        } 
```

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-07-03T09:59:05.893

将超时存储在一个变量中，这样您就可以清除最近的超时：

```
clearTimeout(window.timer);
window.timer=setTimeout(function(){ // setting the delay for each keypress
                ajaxSearchRequest($type); //runs the ajax request

        }, 3000); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-03T12:33:24.407

您正在尝试做的事情称为**debounceing**。

这是Ben Alman的一个[jquery 插件，它可以完成这项工作。](http://benalman.com/code/projects/jquery-throttle-debounce/examples/debounce/)

[underscore.js](http://underscorejs.org/#debounce)也包含此功能。

真的**没有必要破解 ajax 请求系统**。只要确保它在正确的时刻被调用。

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2012-07-03T10:04:52.713

我喜欢莫勒的回答但我会进一步提高表现

```
var ajaxRequest2;  // The variable that makes Ajax possible!
function getAjaxObject()
{
                try{
                  // Opera 8.0+, Firefox, Safari
                  ajaxRequest2 = new XMLHttpRequest();
                }catch (e){
                  // Internet Explorer Browsers
                  try{
                     ajaxRequest2 = new ActiveXObject("Msxml2.XMLHTTP");
                  }catch (e) {
                     try{
                    ajaxRequest2 = new ActiveXObject("Microsoft.XMLHTTP");
                     }catch (e){
                    // Something went wrong
                    alert("Browser error!");
                   // return false;
                     }
                  }
                }
  return ajaxRequest2;

 }
   getAjaxObject();

    function ajaxSearchRequest($type){

               if(typeof ajaxRequest2 =="undefined" || ajaxRequest2 == false)
                {
                  return;
                }
               ajaxRequest2.abort();

                ajaxRequest2.onreadystatechange = function(){
                  if(ajaxRequest2.readyState == 4){

                        $result = ajaxRequest2.responseText;
                        $('#resultcontainer').html($result);

                    }}

                var searchterm = document.getElementById($type).value;

                var queryString ="?searchterm=" + searchterm +"&type=" +$type;

                if(searchterm !== ""){

                ajaxRequest2.open("GET", "searchrequest.php" + 
                                 queryString, true);
                ajaxRequest2.send(null);
                }
        } 
```

此更改将中止正在进行的 ajax 请求并发送新请求。当你

输入-> 等待 4 秒 -> 请求已发送 -> 再次输入（未收到响应）-> 等待 4 秒-> 另一个请求触发

# android - Android 上的消息应用程序 (mms)

> ID：11308407
> 
> 赞同：1
> 
> 时间：2012-07-03T09:51:40.017
> 
> 标签：android, github, message, mms

我正在尝试对安卓手机中的默认短信进行修改。

我已经从以下链接下载了源代码

[https://github.com/android/platform_packages_apps_mms](https://github.com/android/platform_packages_apps_mms)

该链接包含 (src, res, mainfest) 我使用以下步骤在 Eclipse 上将其作为项目打开：

文件 > 导入 > 工作区中的现有项目，但问题是 Eclipse 没有将其视为 android 项目，因此我无法将其安装在模拟器上

我该怎么办？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-03T10:06:28.583

请按照以下步骤

文件 > 新建 > Android 项目 > 选择“从现有源创建项目” > 单击“浏览”按钮并选择项目。

它可能会帮助你。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-11T13:38:17.600

github 的 API 级别可能比您使用的要高。或者您下载的项目可能会丢失项目属性。请检查..

# java - 通过 JMX 查看 Ehcache 数据

> ID：11308409
> 
> 赞同：4
> 
> 时间：2012-07-03T09:51:48.013
> 
> 标签：java, spring, jmx, ehcache

有什么方法可以查看通过 JMX 存储在 ehcache 中的数据/对象吗？我发现只是缓存统计信息，但我需要查看对象结构。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-03-17T15:32:23.930

如果这是您需要的东西，您可以构建它，但它在 Ehcache JMX 实现中不可用。我也不希望它是，因为不知道存储在 ehcache 中的对象是否可以通过 JMX 显示。如果您知道它们是，您当然可以创建一个 MBean，给定对 ehcache CacheManager 或 Cache 的引用，可以公开缓存的内容。

请记住，除非您使用仅内存缓存，否则缓存中的对象不在内存中而是在磁盘上，或者，如果您使用的是 terracotta，它们可能位于远程服务器上。此外，有时以序列化形式存储 java 对象更有效。如果您这样做，查看数据将需要反序列化。

如果您只对在调试问题时查看这些对象感兴趣，我会考虑只依赖像好的 IDE 中可用的调试器。NetBeans 和 Eclipse 都有功能强大的调试器，可用于查看缓存的内容。我经常这样做。

由于您用“spring”标记了这个问题，我假设您使用的是 spring。在 Spring 中创建 MBean 非常简单。您只需将导出器 bean 添加到上下文中，并使您的 MBean 实现一个与您的对象名称相同但在末尾添加 MBean 的接口。这是一个例子：

应用程序上下文.xml：

```
<bean id="exporter" class="org.springframework.jmx.export.MBeanExporter" 
      p:autodetect="true"/>
<bean name="FOO:name=foo" class="com.foo.test.Foo"/> 
```

Foo.java：

```
package com.foo.test;

public class Foo implements FooMBean {
  private String name;

  ...

  @Override
  public String getName() {
    return name;
  }

  @Override
  public void setName(String name) {
    this.name = name;
  }

  @Override
  public void printName() {
    System.out.println(name);
  }
} 
```

FooMBean.java：

```
package com.foo.test;

public interface FooMBean {
  public String getName();
  public void setName(String name);
  public void printName();
} 
```

在此示例中，“foo”对象将作为 JMX MBean 公开，该 MBean 将具有名为“name”的属性和名为“printName”的操作。MBean 的名称将是：“FOO:name=foo”。您可以自定义所有这些行为。请参阅：[http ://docs.spring.io/spring/docs/4.0.0.RELEASE/spring-framework-reference/htmlsingle/#jmx-exporting](http://docs.spring.io/spring/docs/4.0.0.RELEASE/spring-framework-reference/htmlsingle/#jmx-exporting)

# windows - 使用 Windows 7 中的批处理文件从另一台 PC 关闭 LAN 上的 PC

> ID：11308410
> 
> 赞同：1
> 
> 时间：2012-07-03T09:51:52.487
> 
> 标签：windows, batch-file, shutdown, lan

我只是想知道：如果两者都在同一个局域网上，我们可以使用批处理文件从另一台 PC 上关闭 PC 吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-03T10:44:04.333

是的，您可以像这样使用`/m`开关`shutdown`

```
shutdown /s /m \\computer1 /t 0 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-07-03T10:00:13.670

从以具有正确权限的用户身份运行的批处理中调用[shutdown](http://technet.microsoft.com/en-us/library/cc732503%28v=ws.10%29)命令或使用[psshutdown](http://technet.microsoft.com/en-us/sysinternals/bb897541.aspx)。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-08-22T07:48:45.647

最简单的方法：

```
set computertoshutdown=COMPUTERNAME
set timetoshutdown =TIMEtoSHUTDOWN
set message=MESSAGE

shutdown -s -m \\%computertoshutdown% -t %timetoshutdown% -c "%message%" 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-21T22:37:03.183

这应该可以，但是您可以关闭wifi范围内的任何计算机以查找计算机的名称，同时按`Win`+ `Pause`+`Break`键，然后转到计算机名称。

```
@Echo off
 cd\
 Echo Saman=Program
 REM ****************************
 REM * Program Variables *
 REM ****************************

 set varcomputer=[computername]
 goto loop
 :[computername]

 Exit

 REM ****************************
 REM * Program *
 REM ****************************

 :loop
 echo Shutting down %varcomputer%.
 shutdown -s -m \\%varcomputer% -t 600 -c "The computer is shutting down. Please save your work."
 goto %varcomputer 
```

# android - 在 Google Analytics 中跟踪 Admob 事件

> ID：11308411
> 
> 赞同：8
> 
> 时间：2012-07-03T09:51:57.193
> 
> 标签：android, google-analytics, admob

是否可以跟踪`Admob`用户点击`Google Analytics`.

我`AdMob`用于展示广告。我想跟踪广告中的每次点击`Google Analytics`。我该如何设置`Event`？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-07-03T14:55:46.097

我找到了解决方案。

为`AdMob`您`AdListener`的`Activity`.

```
public interface AdListener {
  public void onReceiveAd(Ad ad);
  public void onFailedToReceiveAd(Ad ad, AdRequest.ErrorCode error);
  public void onPresentScreen(Ad ad);
  public void onDismissScreen(Ad ad);
  public void onLeaveApplication(Ad ad);
} 
```

然后为元素设置监听`AdView`器。

```
adView.setAdListener(this); 
```

如果用户点击广告，则覆盖`onPresentScreen`跟踪事件的方法。

> onPresentScreen - 在您的应用程序前面创建 Activity 时调用，为用户呈现全屏广告 UI 以响应他们的触摸广告。

```
private GoogleAnalyticsTracker tracker;
...
@Override
public void onPresentScreen(Ad arg0) {
    tracker.trackEvent(
            "AdMob",    // Category
            "AdView",   // Action
            "Clicked",  // Label
            1);         // Value
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2014-02-14T17:57:14.410

对于新的 google play services api：

```
 // from google-play-services.jar
    import com.google.android.gms.ads.*;

    AdListener adListener = new AdListener() {
        @Override
        public void onAdOpened() {
                tracker.trackEvent(
                "AdMob",    // Category
                "AdView",   // Action
                "Clicked",  // Label
                1);  
        }
    }; 
```

在新的 API 中，AdListener 不再是一个接口——它是抽象类：

```
 public abstract class AdListener {
      public void onAdLoaded() {}
      public void onAdFailedToLoad(int errorCode) {}
      public void onAdOpened() {}
      public void onAdClosed() {}
      public void onAdLeftApplication() {}
    } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-03-02T16:00:13.917

目前 AdMob 提供与谷歌分析的默认集成。我们只需要将分析帐户与 Admob 相关联。

参考：[https ://support.google.com/admob/answer/3508177?hl=en-GB](https://support.google.com/admob/answer/3508177?hl=en-GB)

# database - Heroku 何时终止数据库？

> ID：11308414
> 
> 赞同：1
> 
> 时间：2012-07-03T09:52:16.257
> 
> 标签：database, heroku

我们正忙着将旧的 Heroku 应用程序从竹堆栈转换到雪松堆栈。我们正在努力减少停机时间，因此正在努力避免维护停机时间。这些数据具有时间敏感性和财务性质，因此我们无法承受丢失任何交易的后果。

考虑到这一点，我一直在研究在这两个应用程序之间共享数据库，如下所述：[https](https://stackoverflow.com/a/5981700/361417) ://stackoverflow.com/a/5981700/361417 。

我担心的是 Heroku 如何决定终止并从他们的系统中删除未使用的数据库。

**tl;dr**
如果我设置了一个新应用程序以使用与旧应用程序相同的数据库，然后随后终止旧应用程序，Heroku 是否仍会识别数据库正在使用（由新应用程序）？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-14T13:43:44.723

与 Heroku Support 交谈后发现，数据库与应用程序绑定，不会自动检测到它正在使用，但会在您删除旧应用程序时终止：

> 嗨罗伯特，如果您删除旧应用程序，数据库*将*被删除。数据库插件仍然附加到应用程序，环境变量只是一个配置指针。我建议将旧应用程序缩小到 0 以使其不运行，然后将其留在那里以保存您正在使用的数据库。

就我个人而言，我建议不要将应用程序缩小到 0。宁可支付将数据移动到新应用程序的前期成本，并确保数据是安全的，而不是冒着有人意外删除旧应用程序的风险。

# fluent-nhibernate - 如何向 Ninject 注册 FluentNHibernate？

> ID：11308418
> 
> 赞同：0
> 
> 时间：2012-07-03T09:52:24.210
> 
> 标签：fluent-nhibernate, ninject, structuremap

我正在设置一个 ASP.NET MVC4 应用程序，并使用 Ninject 作为我的 DI 容器。

在之前的项目中，我在注册表中使用了带有以下设置的**StructureMap ：**

```
For<IAutoPersistenceConfiguration>()
    .Use<Sql2008AutoPersistenceConfiguration>()
    .Ctor<string>("connectionString")
    .Is("SomeConnectionStringHere");
For<ISessionSource>()
    .Singleton()
    .Use(x => new SessionSource(x.GetInstance<IAutoPersistenceConfiguration>().Build())); 
```

现在我尝试在**Ninject**中进行类似的设置。到目前为止，我的尝试是：

```
Bind<IAutoPersistenceConfiguration>()
    .To<Sql2008AutoPersistenceConfiguration>()
    .WithConstructorArgument("connectionString", "SomeConnectionStringHere");
Bind<ISessionSource>()
    .ToMethod(x => new SessionSource(
    x.Kernel.Get<IAutoPersistenceConfiguration>().Build())).InSingletonScope(); 
```

当我运行它时，我得到一个 FluentConfigurationException：

> 创建 SessionFactory 时使用了无效或不完整的配置。

其他类都一样；IAutoPersistenceConfiguration 和 Sql2008AutoPersistenceConfiguration 都和以前一样。NHibernate 和 FluentNHibernate 的版本也和以前一样。

我做错了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-03T10:31:54.450

原来我的 Ninject 设置是正确的。我得到的异常隐藏了一个我最初没有看到的内部异常（请参阅我自己对我的问题的评论）。一旦我看到内部异常，我所要做的就是修复我的连接字符串并且一切正常。

# java - Java：IndexOutOfBoundsException 的不可预测性

> ID：11308425
> 
> 赞同：0
> 
> 时间：2012-07-03T09:52:43.167
> 
> 标签：java, do-while, indexoutofboundsexception

就我编写的程序而言，我有一个运行良好的脚本。在该脚本中，我有一个 do-while 循环，其中还有两个 do-while 循环，一个提供给另一个。

为了清楚起见，我删除了一些代码：

```
StockArray.stockCodeArray();// creates stockcode array
FileArray.fileListArray();  // creates array of file names to input into
                            // ImportFiles
ImportFiles.importAscii();  // reads file. if debug: creates importarray

do {
    ObsHandler.obsPartsHandler(); // read part descriptions into temp
                                    // array
    ObsHandler.search();
} while (!endline.equals(null)); 
```

obsPartsHandler():

```
String numberline;
ObsHandler o1 = new ObsHandler("Part");
if (i < ImportFiles.importarray.size()) {
    do {
        numberline = ImportFiles.importarray.get(i); //editted here
        i = i + 1;
    } while (!numberline.startsWith(".Number"));

    i = i + 1; // set i to second line of part description
    do {
        i = i + 1; // set i to next line
    } while (!numberline.equals(""));

    if (i < ImportFiles.importarray.size()) {
        endline = ImportFiles.importarray.get(i);
        System.out.println(endline);
    }
} 
```

所有变量都已初始化。search() 方法当前为空。

当我通过循环时，有一个我省略的打印流，这表明循环运行正常。

我遇到的问题是，当我运行程序时，我期望从 obsPartsHandler 中的 if 语句中得到的 OutOfBoundsException 在控制台上的位置是不可预测的。我想知道是否，但仍然假设，这是我做错了什么。

如果我删除了太多代码，请发表评论，我会重新添加。

例外：

```
Exception in thread "main" java.lang.IndexOutOfBoundsException: Index: 307, Size: 307
at java.util.ArrayList.rangeCheck(Unknown Source)
at java.util.ArrayList.get(Unknown Source)
at ams.ObsoletePartsHandler.org.ObsHandler.obsPartsHandler(ObsHandler.java:58)
at ams.ObsoletePartsHandler.org.ObsHandler.main(ObsHandler.java:35) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-03T10:36:56.187

```
if (i < ImportFiles.importarray.size()) {
    do {
        numberline = ImportFiles.importarray.get(i);
        i = i + 1;
    } while (!numberline.startsWith(".Number"));
    //... 
```

假设`importarray`包含 3 行`aaa`：`foo`和`bar`. 如果`i`开始于`0`. 会发生什么？

它将 linenumer 设置为`aaa`并测试它是否以 ".Number" 开头。然后将其设置为`foo`，将其设置为`bar`。现在该行仍未找到，因此`i`变为`3`，但没有第 4 行，因此抛出异常。（第一项的索引为 0，因此第 4 项的索引为 3。）

您可以为这 4 行代码创建一个函数来满足您的需要：

```
private int getLineStartsWith(List<String> list,String startsWith,int offset) {
    for (int k = offset; k < list.size(); k++)
        if (list.get(k).startsWith(starsWith);
             return k;//line found

    return -1;//line not found
} 
```

`-1`如果在列表中找不到该行，则返回。那么你的函数可以写成：

```
i = getLineStartsWith(ImportFiles.importarray,".Number",i);
if (i == -1)
   'Not found' 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-03T11:31:20.577

你为什么担心异常消息出现在哪里呢？用户永远不应面对您的调试打印或异常的堆栈跟踪。

异常跟踪和常规打印通常发送到两个不同的输出流（分别为 System.err 和 System.out），消息不一定在两者之间同步。`flush()`- 打印到流后可能会有所帮助。也就是说，如果您期待异常，您可能应该编写代码以先发制人地避免它，或者使用 Java 的异常处理来捕获它。

# bash - 管道 sed 无法进行替换

> ID：11308426
> 
> 赞同：0
> 
> 时间：2012-07-03T09:52:44.807
> 
> 标签：bash, sed

我有一些我想删除的带有非 ascii 字符的文件。我正在尝试用文件名中的“-”替换这些字符，但它不起作用。

这是我的命令

```
ls Argi* | xargs -I file basename file '.eps' | sed "s/[^a-zA-Z0-9]/-/" 
```

也试过：

```
ls Argi* | xargs -I file basename file '.eps' | sed "s/\W/-/" 
```

任何线索为什么它不起作用？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-03T10:37:18.870

你想要什么

> 在文件名中用“-”替换这些字符

我猜您只是想获得没有这些字符的输出，而不是重命名原始文件。因为您的 sed 命令根本不进行重命名。

那么你可以试试iconv：

```
kent$  l
-rw-r--r-- 1 kent kent  0 2012-07-03 12:20 Argiö.eps
-rw-r--r-- 1 kent kent  0 2012-07-03 12:20 Argiü.eps

kent$  ls Argi*|iconv -f utf8 -t ascii//TRANSLIT 
Argio.eps
Argiu.eps 
```

这不会用“-”替换那些字母，而是用 ASCII。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-03T11:12:26.057

使用[`prename`](http://man.he.net/man1/prename)您系统上可能拥有的命令。它可能被称为`rename`，但有[另一个](http://linux.die.net/man/1/rename)同名的程序以不同的方式工作。

```
prename 's/[^a-zA-Z0-9]/-/' Argi* 
```

# jms - 无法通过 GEMS 使用受限用户连接到 JMS

> ID：11308428
> 
> 赞同：0
> 
> 时间：2012-07-03T09:52:47.953
> 
> 标签：jms

我拥有对某些外部 JMS 的用户（不是管理员）访问权限。
我在尝试使用 GEMS 时无法查看队列。
我猜这是因为 GEMS 是 JMS 的管理控制台，但我没有任何管理员权限的用户。
我尝试在本地 Tibco 上创建没有管理员权限的用户，但我无法使用 GEMS 中的用户连接到 JMS。

如何查看受限用户的任何 JMS？GEMS能做到吗？如果不是可以使用什么工具？

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-06T10:06:04.230

有适合这个的[Hermes工具。](http://sourceforge.net/projects/hermesjms)
让 Hermes 与 Tibco EMS 合作非常困难。[这](http://tibcoadmin.com/tibco/ems/configuring-hermesjms-for-tibco-ems/)是如何配置 Hermes 的好教程。

* * *

HermesJMS 提供了一个 GUI 来访问 JMS 队列和主题以执行常见任务，例如发送消息、删除消息以及在队列和主题之间复制消息。它是 EMS 管理员和应用程序支持团队的一些“必备”工具之一。

从 SourceForge 获取最新的安装程序：http: [//sourceforge.net/projects/hermesjms/files/](http://sourceforge.net/projects/hermesjms/files/)然后运行它：
java -jar hermes-installer.jar

安装非常简单，只有几个屏幕：发布说明、许可协议、安装路径、组件（这里实际上只有一个）、摘要、文件复制、快捷方式创建和安装完成。

要启动 HermesJMS，请在 \HermesJMS\bin 中运行 hermes.bat。如果您收到错误消息“找不到 \bin\javaw”，请确保您已将 JAVA_HOME 系统变量定义到您的 jre 文件夹。

Hermes 启动成功后，点击“Create new JMS session”按钮，将出现preferences 窗口，选择providers 选项卡并右键单击free space。然后按“添加组”并输入组名。右键单击“库”并按“添加 JAR(s)”。查看 \ems\5.1\lib 文件夹并选择那里的所有 .jar 文件。点击“打开”，然后让 Hermes 扫描工厂的罐子：按“扫描”按钮。然后按“应用”。所有库都将在我的屏幕截图中的列表中。

转到“会话”选项卡并输入会话名称：例如“我的 EMS”，然后选择“EMS”加载程序。下一步是选择“com.tibco.tibjms”。TibjmsConnectionFactory”类和“Tibco EMS”插件。顺序非常重要：选择加载器，然后是类，然后是插件。右键单击插件部分的可用空间，然后按“添加属性”。您必须输入所有三个属性：用户名、密码和 serverURL，对 Connection Factory 执行相同操作，然后按“确定”保存并关闭属性窗口。

现在我们可以将 Hermes 连接到我们的 EMS。让它发现队列和主题，按“从提供者发现队列和主题”按钮。然后确认替换当前目的地集和列表将被更新。就这样。

# java - jsp页面加载很慢

> ID：11308430
> 
> 赞同：0
> 
> 时间：2012-07-03T09:52:54.493
> 
> 标签：java, jsp

我创建了一个具有数据库连接性的 jsp 页面。这个页面有html内容和java编程。我的数据库包含一个ip地址列表。

我的 java 代码获取每个 ip 地址并检查它当前是否在网络上处于活动状态。所以我的jsp页面只有在这个java代码对所有ip地址执行检查后才会加载。这就是我的页面加载得很晚的原因。

有什么补救措施可以让我的页面加载得更快吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-03T10:01:59.337

您可以将 db 中的所有 ip 地址加载到 ArrayList 中，也可以将所有活动的 ips 加载到另一个 ArrayList 中并比较这两个数组。这应该快得多。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-03T09:56:59.820

我认为有两个问题：

1.  将您的 JSP 直接绑定到您的实际功能中。最好实现[一些 MVC 结构](http://www.datadisk.co.uk/html_docs/jsp/jsp_mvc_tutorial.htm)，并允许 JSP 发出命令，并显示这些命令是否正在执行，如果结果可用等。例如，从 JSP 到您的 servlet 的命令将启动处理（在单独的线程），并设置状态以便 JSP 可以报告“处理”正在进行中。
2.  您的核心功能是询问不同的 IP 地址。这可以很容易地并行化，这样您就可以在单独的线程上发出每个 IP 查询（诚然，天真的解决方案）。查看[Executor](http://docs.oracle.com/javase/1.5.0/docs/api/java/util/concurrent/Executor.html)框架以获取更多信息。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-03T10:07:58.187

将 JSP 与 Java 代码分离是一种最佳实践，但我将在这里描述的更普遍的想法是将数据的检索和更新与数据的呈现分离，这是一个需要解决的常见问题。

您需要做的是将进行所有网络调用的 java 代码与正在呈现的 JSP 分开。您可以让网络调用全部在一个线程中运行，每分钟或每几分钟检查一次每个地址，并使用状态更新每个地址的数据库记录。然后当调用 JSP 时，JSP 只是从数据库中获取最新数据并显示它（这就是 JSP 的使用方式）。

现在，有很多方法可以做到这一点。如果我自己做，我会使用 Spring Framework 并将网络调用代码放在一个用@Scheduled 注解的方法中，并且可以通过该方法完成网络调用和数据库更新。有关如何使用 Spring 的详细信息超出了此答案的范围，但希望这能让您了解整体方法，以及您可以开始研究的一种技术。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-03T10:22:31.737

- 你应该只加载带有 IP 列表的 JSP 页面，加载后，你可以使用 AJAX 请求获取 IP 地址状态。
- 前面提到的缓存状态的想法很棒。
-您还可以改进界面（分页、延迟加载列表等）以减少检查 IP 地址的数量。

# c# - 是否可以为所有 Silverlight 客户端将 DateTimeOffset 设置为相同的偏移量？

> ID：11308435
> 
> 赞同：1
> 
> 时间：2012-07-03T09:53:15.537
> 
> 标签：c#, .net, silverlight, datetime, datetimeoffset

我使用 DateTimeOffset 作为日期/时间值。

我想要实现的是，对于所有加载页面以运行 SilverLight 应用程序的客户，我希望他们根据特定区域（例如东京时间）查看日期。

所以不会发生到他们的 LocalTime 的转换。

是否可以为所有 Silverlight 客户端配置它，他们将看到 DateTimeOffsets 例如，UTC + Offset of Tokyo ？不是他们的当地时间？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-03T10:12:33.553

这总是返回东京时间

```
DateTimeOffset tokyoTime = DateTimeOffset.UtcNow.ToOffset(TimeSpan.FromHours(9)); 
```

对于 DateTime 你可以使用这个：

```
DateTime tokyoTime = TimeZoneInfo.ConvertTimeFromUtc(DateTime.UtcNow, TimeZoneInfo.FindSystemTimeZoneById("Tokyo Standard Time")); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-03T09:59:48.223

我遇到了一个类似的问题，我找到的解决方案不是将日期或 DateTimeOffset 属性/字段标记为数据成员，而是创建一个作为数据成员的附加字符串属性并在 getter/setter 函数中执行字符串转换

# shell - 在 unix 中使用“查找”命令时出错

> ID：11308436
> 
> 赞同：2
> 
> 时间：2012-07-03T09:53:24.373
> 
> 标签：shell, unix

我只是在尝试下面的代码，但它不起作用..请建议更正此代码..

```
echo abc.txt | while read name; do find . -name $name; done 
```

输出成功：./rak/abc.txt

```
echo 'abc.txt pqr.txt' | while read name; do find . -name $name; done 
```

输出错误：查找：0652-009 缺少连词

```
echo "abc.txt pqr.txt" | while read name; do find . -name $name; done 
```

输出错误：查找：0652-009 缺少连词

同样的错误

```
echo "abc.txt" "pqr.txt" | while read name; do find . -name $name; done
echo 'abc.txt' 'pqr.txt' | while read name; do find . -name $name; done 
```

请建议如何解决这个问题...

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-03T09:57:39.320

问题是多个条目作为一行发送到管道中，读取将两个字符串拾取到`name`然后处理`$name`包含这两个字符串的内容。

你应该使用类似的东西：

```
echo -e "abc.txt\npqr.txt" | while read name; do find . -name $name; done 
```

即用换行符分隔项目。

您应该尝试使用`echo "'$name'"`而不是使用来调试`find`它，它会暗示正在发生的事情。

此外，我会在查找中使用引用来引用`$name`，好像文件名的名称中应该有一个空格，那么您将收到与您最初遇到的相同的错误消息。

# osx-lion - 如何在 Mac OSX 下打包 PySide/Phonon 应用程序？

> ID：11308437
> 
> 赞同：1
> 
> 时间：2012-07-03T09:53:24.680
> 
> 标签：osx-lion, pyside, py2app, phonon

我有一个 PySide/Phonon 应用程序（为 Windows 开发并在 Windows 上完美运行），我需要将其“移植”到 Mac OSX - 我没有任何开发经验。如果我只运行 Python 文件，该应用程序将按预期工作 - 当我尝试使用 py2app 打包它（我需要这样做）时会出现问题。

如果我将生成的 .app 保留原样，Phonon 将无法工作，因为它无法加载所需的 phonon_backend ；如果我将插件路径添加到 qt.conf，正如各种消息来源所暗示的那样，Phonon 似乎已加载（也就是说，我不再收到相应的错误消息），但我开始收到“某某库已加载”两次，将使用一个，其中一个是未定义的”错误，应用程序立即崩溃。

最后，如果我尝试使用 macdeploy_qt 工具，我会收到一条“没有外部框架”的消息，结果在功能上与我不使用该工具时得到的结果相同，只是相关目录中还有一些插件.

任何想法/指针/教程/等？顺便说一句，我正在使用 PySide1.1.1 for Qt4.7，以及 Python.org python 二进制文件（否则 py2app 似乎甚至无法开始构建独立应用程序）。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-24T10:33:14.823

我建议你像[本教程中](http://qt-project.org/wiki/Packaging_PySide_applications_on_MacOS)那样做。

然后，您只需在主模块顶部的某处添加以下行：

```
QApplication.setLibraryPaths([os.path.join(os.environ['_MEIPASS2'], 'qt4_plugins'), os.environ['_MEIPASS2'] ]) 
```

对于 PyInstaller >1.5，应使用以下代码：

```
QApplication.setLibraryPaths([os.path.join(sys._MEIPASS, 'qt4_plugins'), sys._MEIPASS]) 
```

# mysql - MYSQL auto_increment_increment

> ID：11308438
> 
> 赞同：5
> 
> 时间：2012-07-03T09:53:26.503
> 
> 标签：mysql, sql

我想在一个 mysql 数据库中自动递增两个不同的表，第一个是 1 的倍数，另一个是 5 的倍数，这可以使用 auto_increment 功能，因为我似乎只能全局设置 auto_increment_increment。

如果 auto_increment_increment 不是一个选项，那么复制它的最佳方法是什么

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-03T10:44:13.720

更新版本：仅使用一个`id`字段。这很可能不是原子的，因此如果您需要并发，请在事务中使用：

[http://sqlfiddle.com/#!2/a4ed8/1](http://sqlfiddle.com/#!2/a4ed8/1)

```
CREATE TABLE IF NOT EXISTS person (
   id  INT NOT NULL AUTO_INCREMENT,
   PRIMARY KEY ( id )
) ENGINE=InnoDB DEFAULT CHARSET=utf8 AUTO_INCREMENT=1;

CREATE TRIGGER insert_kangaroo_id BEFORE INSERT ON person FOR EACH ROW BEGIN
  DECLARE newid INT;

  SET newid = (SELECT AUTO_INCREMENT
               FROM information_schema.TABLES
               WHERE TABLE_SCHEMA = DATABASE()
               AND TABLE_NAME = 'person'
              );

  IF NEW.id AND NEW.id >= newid THEN
    SET newid = NEW.id;
  END IF;

  SET NEW.id = 5 * CEILING( newid / 5 );
END; 
```

旧的，不工作的“解决方案”（插入前触发器看不到当前的自动增量值）：

[http://sqlfiddle.com/#!2/f4f9a/1](http://sqlfiddle.com/#!2/f4f9a/1)

```
CREATE TABLE IF NOT EXISTS person (
   secretid  INT NOT NULL AUTO_INCREMENT,
   id        INT NOT NULL,
   PRIMARY KEY ( secretid )
) ENGINE=InnoDB DEFAULT CHARSET=utf8 AUTO_INCREMENT=1;

CREATE TRIGGER update_kangaroo_id BEFORE UPDATE ON person FOR EACH ROW BEGIN
  SET NEW.id = NEW.secretid * 5;
END;

CREATE TRIGGER insert_kangaroo_id BEFORE INSERT ON person FOR EACH ROW BEGIN
  SET NEW.id = NEW.secretid * 5; -- NEW.secretid is empty = unusuable!
END; 
```

# maven - 如何配置 aspectj maven 插件以使用 Java 7？

> ID：11308447
> 
> 赞同：9
> 
> 时间：2012-07-03T09:53:47.200
> 
> 标签：maven, plugins, aspectj, java-7

aspectj 插件使用 Java 7 的适当配置/版本/插件版本是什么？

我正在尝试从 Java 6 升级到 Java 7，而 aspectj 编译器似乎没有编译 Java 7。我在 aspectj 插件和 maven 编译器插件的插件配置中将 java 源和目标版本指定为 1.7。我在我的代码中引入了 Java7 特定的语法，添加了一些语言特性，例如 switch 中的字符串和菱形运算符。在构建期间，我从 aspectj 收到有关 Java7 语法的错误。事情出错的第一个迹象是：

```
[INFO] --- aspectj-maven-plugin:1.4:compile (default) @ site ---
[ERROR] Cannot switch on a value of type String. Only int values or enum constants are permitted
[ERROR] Cannot instantiate the type HashSet<?>
[ERROR] Syntax error on token "<", ? expected after this token 
```

如果我从 aspectj maven 插件中删除执行部分，使其无法运行，并使用 mvn clean install，则新代码可以正常编译。所以我认为这是与aspectj配置错误的东西。这是我的插件配置：

```
<properties>
    <project.build.sourceEncoding>UTF-8</project.build.sourceEncoding>
    <java-version>1.7</java-version>
    <org.aspectj-version>1.6.11</org.aspectj-version>
</properties>

        <plugin>
            <groupId>org.codehaus.mojo</groupId>
            <artifactId>aspectj-maven-plugin</artifactId>
            <version>1.4</version>
            <dependencies>
                <dependency>
                    <groupId>org.aspectj</groupId>
                    <artifactId>aspectjrt</artifactId>
                    <version>${org.aspectj-version}</version>
                </dependency>
                <dependency>
                    <groupId>org.aspectj</groupId>
                    <artifactId>aspectjtools</artifactId>
                    <version>${org.aspectj-version}</version>
                </dependency>
            </dependencies>
            <executions>
                <execution>
                    <goals>
                        <goal>compile</goal>
                        <goal>test-compile</goal>
                    </goals>
                </execution>
            </executions>
            <configuration>
                <complianceLevel>${java-version}</complianceLevel>
                <encoding>${project.build.sourceEncoding}</encoding>
                <outxml>true</outxml>
                <source>${java-version}</source>
                <target>${java-version}</target>
            </configuration>
        </plugin> 
```

此外，aspectjrt 被定义为插件部分之外的依赖项

```
<dependencies>
    <dependency>
        <groupId>org.aspectj</groupId>
        <artifactId>aspectjrt</artifactId>
        <version>${org.aspectj-version}</version>
    </dependency>
<dependencies> 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-07-26T21:11:51.693

我从 1.6.11 更新到 1.7.0，自从我问这个问题以来，它已经发布了。我不再有任何aspectj/Java1.7 问题，这样就解决了这个问题。

# php - Symfony2 - 没有实体的奏鸣曲数据网格

> ID：11308448
> 
> 赞同：3
> 
> 时间：2012-07-03T09:53:49.620
> 
> 标签：php, symfony, symfony-sonata

有没有办法利用奏鸣曲的 Datagrid 功能来显示结果集？

```
class DefaultController extends Controller
{
    public function nl_listAction()
    {
        $obj = array();
        $cnx = $this->get('doctrine.dbal.a_connection');
        $cnx->query('CALL(a_procedure)');
        $obj['cnx'] = $cnx;
        return $this->render('GlideConfigBundle:Default:nl_list.html.twig', $obj);
    }
} 
```

在这里，我从一个控制器调用一个过程，我想使用 Datagrid 显示结果数据。
这是个好主意吗 ？
我该怎么做 ？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-09T07:57:03.417

最后只使用带有我自己的模板/宏的[引导表样式。](http://getbootstrap.com/css/#tables)
此外，我不得不通过过滤小部件、列表小部件和寻呼机来重新发明轮子:( ...

# php - 检查两个字符串是否以相同的字符开头

> ID：11308452
> 
> 赞同：0
> 
> 时间：2012-07-03T09:54:00.583
> 
> 标签：php, string, oop

我正在尝试在面向对象的 PHP 中执行此操作，但是在使用递归时出现问题（如果第一个字符串以“（”开头，我想检查以下字符），其他情况下工作。这是代码：

```
public static function different_first($item,$item1) {
    if (substr($item, 0, 1) != substr($item1, 0, 1)) {
        return TRUE;
    } else if (substr($item,0,1)=="(") {
        Object::different_first(substr($item, 1), $item1);
    } else { 
        return FALSE;
    }
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-03T09:56:35.060

您缺少退货：

```
return Object::different_first(substr($item, 1), $item1); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-03T10:02:35.463

正如马克所说，错过了回报。我对您的代码进行了一些改进。这会运行得更快。

```
public static function different_first($item,$item1) {
    if ($item{0} == $item1{0}){
        return false;
    }elseif ($item{0}=="(") {
        return Object::different_first($item{1}, $item1);
    } else { 
        return true;
    }
} 
```

# ios - 某些文件的 AVAssetExport 失败

> ID：11308456
> 
> 赞同：16
> 
> 时间：2012-07-03T09:54:08.693
> 
> 标签：ios, objective-c, avassetexportsession

我试图从 iPod 库中导出音频文件。我的目标是使用此 iPod-Library 文件在 app Document 文件夹中创建新文件。它无法仅为某些项目创建文件。下面是我的代码片段。

```
AVURLAsset *songAsset = [AVURLAsset URLAssetWithURL: url options:nil];

NSArray *paths = NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES);

NSString *documentsDirectory = [paths objectAtIndex:0];

AVAssetExportSession *exporter = [[AVAssetExportSession alloc]
                                  initWithAsset: songAsset
                                  presetName: AVAssetExportPresetAppleM4A];

exporter.outputFileType = @"com.apple.m4a-audio";

NSString *songName  =   [filename stringByAppendingString:@".m4a"];

NSString *musicfilepath  = [documentsDirectory stringByAppendingPathComponent:@"musics/"];

[[NSFileManager defaultManager] createDirectoryAtPath:musicfilepath withIntermediateDirectories:YES attributes:nil error:nil];

NSString *exportFile = [musicfilepath stringByAppendingPathComponent:songName];

NSError *error1;

if([[NSFileManager defaultManager] fileExistsAtPath:exportFile]) 
{

    [[NSFileManager defaultManager] removeItemAtPath:exportFile error:&error1];

}

NSURL* exportURL = [[NSURL fileURLWithPath:exportFile] retain];

exporter.outputURL = exportURL; 
```

尝试使用错误处理程序块时，出现如下所示的错误：

```
 [exporter exportAsynchronouslyWithCompletionHandler:^{

    int exportStatus = exporter.status;

    switch (exportStatus) {

        case AVAssetExportSessionStatusFailed: {

            NSError *exportError = exporter.error;

            NSLog (@"AVAssetExportSessionStatusFailed: %@", exportError);

            break;
        }
  }
 }]; 
```

**AVAssetExportSessionStatusFailed: Error Domain=AVFoundationErrorDomain Code=-11800“操作无法完成” UserInfo=0x214f20 {NSLocalizedFailureReason=发生未知错误（-12124），NSUnderlyingError=0x218270“操作无法完成。（OSStatus错误-12124 .)", NSLocalizedDescription=操作无法完成}**

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-01-24T15:46:43.707

我自己玩了很多，一些答案可能是相关的和正确的。`AVFoundation`需要注意的另一件事是，如果尝试组合具有不同帧速率的视频，我经常会遇到类似的错误。检查源文件帧速率并检查你`CMTime`的。在将某些文件添加到`AVMutableComposition`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-09-20T18:37:57.047

如果您打开了 iTunes 匹配并且文件未下载到设备，则可能会发生这种情况。你能检查一下你是否是这种情况？如果是这样，我可以提供代码来检测它。

```
+ (BOOL)isDownloadedFromiCloud:(MPMediaItem *)item {
    if ([item valueForProperty:MPMediaItemPropertyAssetURL] != nil) {
        AVURLAsset *asset = [AVURLAsset assetWithURL:[item valueForProperty:MPMediaItemPropertyAssetURL]];
        if (asset.exportable)
            return YES;
    }

    return NO;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-10-04T02:00:03.703

我也经历过这种情况。你在使用 iTunes 匹配吗？可能是该文件不在实际设备上。您可以通过检查诸如`hasProtectedContent`或确保`exportable`is之类的属性来检查 AVAsset `YES`。

另外，我注意到您正在使用`AVExportSession`预设的`AVAssetExportPresetAppleM4A'. This will re-encode the file you are exporting. It may be easier (and much faster) to just pass-though instead using`AVAssetExportPresetPassthrough`。这假设您对现有的文件格式感到满意，可能是 .m4a、.mp3、.wav 等...

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-12-18T10:31:37.723

您使用的音乐文件路径可能有误。尝试这个

```
NSArray* paths = NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, 

NSUserDomainMask, YES);
NSString* documentsDirectory = [paths objectAtIndex:0]; 
documentsDirectory = [documentsDirectory stringByAppendingPathComponent:@"Music"];
NSError* error;
if (![[NSFileManager defaultManager] fileExistsAtPath:documentsDirectory])
    [[NSFileManager defaultManager] createDirectoryAtPath:documentsDirectory                withIntermediateDirectories:NO attributes:nil error:&error]; 

NSString *exportFile = [documentsDirectory stringByAppendingPathComponent:songName];

if([[NSFileManager defaultManager] fileExistsAtPath:exportFile]) 
{

    [[NSFileManager defaultManager] removeItemAtPath:exportFile error:&error1];

}

if (error != nil) {
NSURL* exportURL = [[NSURL fileURLWithPath:exportFile] retain];

exporter.outputURL = exportURL; 
[exporter exportAsynchronouslyWithCompletionHandler:^{

int exportStatus = exporter.status;

switch (exportStatus) {

    case AVAssetExportSessionStatusFailed: {

        NSError *exportError = exporter.error;

        NSLog (@"AVAssetExportSessionStatusFailed: %@", exportError);

        break;
        }
    }
  }
];
} 
```

# java - 在 java Swing jTextfield 中追加新行

> ID：11308458
> 
> 赞同：-1
> 
> 时间：2012-07-03T09:54:15.273
> 
> 标签：java, swing

> **可能重复：**
> [多行 JTextField 的问题](https://stackoverflow.com/questions/6662029/problem-with-multi-line-jtextfield)

如何在 Java Swing 中追加新行`JTextField`？

我正在编写一个聊天应用程序，在这个聊天应用程序中，我的输入区域是 a `JTextField`，而用户释放`shift`+`enter``JTextField`键时，我必须在;中创建一个新行 这是我的要求。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-03T10:00:53.513

`JTextField`不支持多行。改为使用[`JTextArea`](http://docs.oracle.com/javase/1.4.2/docs/api/javax/swing/JTextArea.html)。

# android - android正确控制一个服务

> ID：11308471
> 
> 赞同：0
> 
> 时间：2012-07-03T09:55:09.890
> 
> 标签：android, service, lifecycle

我在服务 (RefreshTasks) 中有一个线程 (Updater)，用于检查服务器上是否有一些更新。然后我有 4 个活动使用这些数据。但是我在管理这项服务时遇到了问题......我想在整个应用程序中保持服务处于活动状态，即使屏幕熄灭。管理这样的服务的正确做法是什么？在这一刻，我启动和停止所有活动的每个 onResume 和 onPause 方法的服务......但这意味着当屏幕关闭时服务将停止。有什么建议吗？

谢谢艾尔。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-03T09:58:35.350

当您的应用程序暂停时，服务实例也会继续运行。我建议你也看看谷歌提供的这项服务，这是设备和你的服务之间通信推送通知的一个很好的解决方案：

[https://developers.google.com/android/c2dm/](https://developers.google.com/android/c2dm/)

这是一个很好的教程：

[http://blog.mediarain.com/2011/03/simple-google-android-c2dm-tutorial-push-notifications-for-android/](http://blog.mediarain.com/2011/03/simple-google-android-c2dm-tutorial-push-notifications-for-android/)

# sql - SQL在单个命令中在表中添加列和注释

> ID：11308476
> 
> 赞同：53
> 
> 时间：2012-07-03T09:55:28.970
> 
> 标签：sql, oracle, oracle11g

我正在为我的 Web 应用程序使用 Oracle 11g。我想向现有表添加一列和注释。我可以使用以下命令轻松做到这一点

```
ALTER TABLE product ADD product_description VARCHAR2(20) 
```

和

```
COMMENT ON COLUMN product.product_description 
     IS 'This is comment for the column'; 
```

但我想在单个命令中完成上述任务。我在互联网上搜索了一个在单个命令中添加列和评论的命令，但我找不到。我想知道这是否可能。任何建议将不胜感激。

* * *

## 回答 #1

> 赞同：37
> 
> 时间：2012-07-03T10:01:06.337

不，你不能。

你没有理由需要这样做。这是一次性操作，因此实际键入和执行只需要一两秒钟。

如果您在 Web 应用程序中添加列，这更表明您的数据模型存在缺陷，因为您不需要这样做。

* * *

响应您的评论，评论是列属性；*看起来*可能是这样，但在幕后 Oracle 将其存储为*对象*的属性。

```
SQL> desc sys.com$
 Name                                      Null?    Type
 ----------------------------------------- -------- ----------------------------
 OBJ#                                      NOT NULL NUMBER
 COL#                                               NUMBER
 COMMENT$                                           VARCHAR2(4000)

SQL> 
```

该列是可选的，`sys.col$`不包含评论信息。

我假设，我不知道，这样做是为了只有一个处理评论的系统而不是多个系统。

* * *

## 回答 #2

> 赞同：21
> 
> 时间：2013-10-29T19:21:12.847

您可以使用以下查询来更新或创建已创建表的评论。

句法：

```
COMMENT ON COLUMN TableName.ColumnName IS 'comment text'; 
```

例子：

```
COMMENT ON COLUMN TAB_SAMBANGI.MY_COLUMN IS 'This is a comment on my column...'; 
```

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2014-08-14T12:18:12.743

添加评论列的查询是：

```
alter table table_name 
add( "NISFLAG"    NUMBER(1,0) )

comment on column "ELIXIR"."PRD_INFO_1"."NISPRODGSTAPPL" is 'comment here'

commit; 
```

* * *

## 回答 #4

> 赞同：-2
> 
> 时间：2014-03-14T08:43:37.747

为 EMPLOYEE 表的两个不同列添加注释：

```
COMMENT ON EMPLOYEE
     (WORKDEPT IS 'see DEPARTMENT table for names',
     EDLEVEL IS 'highest grade level passed in school' ) 
```

# android - 在我的情况下，如何删除自定义对话框上的白色边框

> ID：11308479
> 
> 赞同：1
> 
> 时间：2012-07-03T09:55:35.950
> 
> 标签：android, android-layout, android-emulator, android-widget

我创建了**自定义对话框**：

```
//generate dialog view
LayoutInflater layoutInflater = LayoutInflater.from(activity);
View dialogView = layoutInflater.inflate(R.layout.warning_dialog, null);

//create dialog instance
Dialog warningDlg = new Dialog(getActivity(), R.style.CustomAlertDialog); //my dialog style
warningDlg.requestWindowFeature(Window.FEATURE_NO_TITLE);
warningDlg.setContentView(dialogView);
warningDlg.show(); 
```

正如你在上面看到的，当我创建我的对话框实例时，我使用了我自己的名为“ ”的**样式**`CustomAlertDialog`，如下所示：

```
<style name="CustomAlertDialog" parent="@android:style/Theme.Dialog">
    <item name="android:windowBackground">@drawable/my_dialog_bg</item>
</style> 
```

**除了在Android 2.3.3**设备上显示时我的对话框窗口上有**白色边框**外，一切都运行良好，**如何使用上述代码删除白色边框？**

# hadoop - 字符引用“”是无效的 XML 字符

> ID：11308480
> 
> 赞同：2
> 
> 时间：2012-07-03T09:55:38.430
> 
> 标签：hadoop

我将属性设置为`mapred.textoutputformat.separator`value `\001`。但是当我运行 MR Job 时，它会抛出异常：

> 字符引用“”是无效的 XML 字符。

请帮我。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-11T09:06:26.287

我得到了解决方案。原因是当使用“\001”字符序列或其他 Unicode 字符时，在对象序列化期间它被转换为一些无效格式。

所以解决方案是使用Base64对字符进行编码，覆盖TextOutputFormat类的getRecordWriter方法，然后在那里解码。（Base64.decodeBase64）

这将起作用。

# java - 使用 KeyStroke 进行输入，是否有更简单的读取 A - Z 键的方法？

> ID：11308492
> 
> 赞同：2
> 
> 时间：2012-07-03T09:55:59.670
> 
> 标签：java, swing, java-io, roguelike

首先，这不是用于键盘记录器，而是用于 roguelike 游戏中的输入，其中`JLabel`我`JFrame`会说“名称：”并且我希望能够键入 A-Za-z。在查看了许多按键输入选项之后，我又回到了开始使用`KeyStroke`s 和`Action`s 的地方。

我想知道是否有办法添加一系列键，而不是重复 56 次：

```
Action a = new AbstractAction() {

    public void actionPerformed(ActionEvent e) {
        // add a to string
    }
};
getInputMap().put(KeyStroke.getKeyStroke("a"), "a");
getActionMap().put("a", a); 
```

我的意思是，我可以这样做，只是写一点复制和粘贴，但我真的很讨厌那样。必须有一个比使用`KeyListener`它不是很好的更优雅的解决方案，因为这意味着我必须以某种方式集中注意力，但我的窗口只是一个`JFrame`很大`JLabel`的窗口。

另外，我现在才做java几天，所以这就是为什么我可能错过了一个非常普遍的解决方案，但如果有的话，请分享！赞赏。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-03T10:07:19.843

这是一个解决方案：

```
for (char c = 'a'; c <= 'z'; c++) {
    String ks = String.valueOf(c);
    getInputMap().put(KeyStroke.getKeyStroke(ks), ks);
    getActionMap().put(ks, a);
    ks = ks.toUpperCase();
    getInputMap().put(KeyStroke.getKeyStroke(ks), ks);
    getActionMap().put(ks, a);
} 
```

但我认为你应该更喜欢`JTextField`with `DocumentListener`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-03T10:29:20.607

我正在使用一个内容管理器类，它将每个“屏幕”视为`JPanel`设置为内容窗格的一个，我将对父 JFrame 的引用放入基本“屏幕”类，然后将一个添加`KeyListener`到父 JFrame。这可以捕获我想要的输入。我之前没有这样做，因为我错误地将 添加`KeyListener`到内容窗格中。现在看来一切正常。

```
public void run() {
    this.getParent().addKeyListener(new KeyListener() {

        public void keyPressed(KeyEvent e) {
            appendLabel(e.getKeyChar());
        }

        public void keyReleased(KeyEvent e) { }
        public void keyTyped(KeyEvent e) { }
    });
} 
```

谢谢@millimoose！

# c++ - CreateProcessAsUser 返回错误代码 2

> ID：11308493
> 
> 赞同：2
> 
> 时间：2012-07-03T09:56:09.357
> 
> 标签：c++, windows, visual-studio, winapi

我的应用程序中有两个进程。1.“myService.exe”是一个windows服务。2.“myApp.exe”与“myService.exe”位于同一目录下。

此进程由“myService.exe”使用 CreateProcessAsUser api 生成。我们必须使用这个 api 而不是直接启动进程（使用系统调用），因为我们需要访问当前用户的 vpn 配置文件。

当我对“myApp.exe”的路径进行硬编码时，它工作正常并创建了进程，但是通过获取“myService.exe”的当前目录获得的相同路径没有创建进程并返回错误代码2（找不到文件） .

我正在使用 Visual Studio 2008。该项目以 ASCII 模式编译，而不是下面代码中的 Unicode。我尝试使用Unicode api（最后没有'A'）。它也没有用。

问题不在于获取当前路径。已验证该路径不是 System32 文件夹。

```
 HANDLE hToken;
LPSTR exePath = GetCommandLineA();
string exePathStr = exePath;
char fileExeChar[256];
strcpy(fileExeChar,exePathStr.c_str());
string serverExe = "myService.exe";
for(unsigned int i=0;i<exePathStr.length()-(serverExe.length() + 1);i++)
{
    fileLocation += fileExeChar[i];// removing the service.exe from the path

}
LPSTR fileLocationLp = const_cast<LPSTR>(fileLocation.c_str());

LPCSTR progName = (LPCSTR)"myapp.exe";

char errStr[100];
DWORD dwCreationFlag = NORMAL_PRIORITY_CLASS | CREATE_NEW_CONSOLE;
STARTUPINFO si;
PROCESS_INFORMATION pi;
int k = WTSQueryUserToken (WTSGetActiveConsoleSessionId (), &hToken);
ZeroMemory( &si, sizeof( STARTUPINFO ) );
si.cb = sizeof( STARTUPINFO );
si.lpDesktop = (LPSTR)"winsta0\\default";
    ZeroMemory( &pi,sizeof(pi));
if ( !CreateProcessAsUserA(
                      hToken,
                      progName,
                      fileLocationLp,  
                      NULL,
                      NULL,
                      FALSE,
                      dwCreationFlag,
                      NULL,
                      NULL,
                      &si,
                      &pi
          ) )
{
    sprintf(errStr, "CreateProcessAsUser Failed %d\n", GetLastError());
} 
else
{
    CloseHandle(pi.hProcess);
    CloseHandle(pi.hThread);
    CloseHandle(hToken);
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-03T09:59:02.313

默认情况下，Windows 服务在`System32`目录中执行。这就是为什么在没有指定绝对路径时找不到其他可执行文件的原因。[`GetCurrentDirectory()`](http://msdn.microsoft.com/en-us/library/windows/desktop/aa364934%28v=vs.85%29.aspx)您可以通过从 Windows 服务获取 来确认这一点。

要解决此问题（假设 Windows 服务和其他可执行文件位于同一目录中）：

*   使用作为第一个参数[`GetModuleFileName()`](http://msdn.microsoft.com/en-us/library/windows/desktop/ms683197%28v=vs.85%29.aspx)传递的 Windows 服务可执行文件的完整路径。`NULL`
*   从完整路径中提取目录
*   然后构建其他可执行文件的路径并将其传递给`CreateProcessAsUser()`或更改 Windows 服务的目录，使用[`SetCurrentDirectory()`](http://msdn.microsoft.com/en-us/library/windows/desktop/aa365530%28v=vs.85%29.aspx)

# html - HTML5 背景视频未在 Internet Explorer 9 中播放

> ID：11308494
> 
> 赞同：1
> 
> 时间：2012-07-03T09:56:10.387
> 
> 标签：html, video, video-streaming, html5-video

我已经使用 Video JS [http://videojs.com/] 设置了一个全宽/全高视频背景，它在 Safari、Chrome 和 Firefox 中表现正确，但在 IE9 中只能间歇性地工作。该网站可以在这里看到：[http ://www.snclbrand.com/](http://www.snclbrand.com/)

花了很多时间研究 Google 和 Stack Overflow，我在 .htaccess 文件中添加了额外的代码，所以它看起来像这样：

```
# BEGIN WordPress
<IfModule mod_rewrite.c>
RewriteEngine On
RewriteBase /
RewriteRule ^index\.php$ - [L]
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule . /index.php [L]
</IfModule>

# END WordPress

AddType audio/mpeg mp3
AddType audio/mp4 m4a
AddType audio/ogg ogg
AddType audio/ogg oga
AddType audio/webm webma
AddType audio/wav wav

AddType video/mp4 mp4
AddType video/mp4 m4v
AddType video/ogg ogv
AddType video/webm webm
AddType video/webm webmv 
```

可悲的是，这并没有帮助，并且在 IE 的开发人员工具中，当视频无法播放时，此错误会显示在控制台中：**Video Error[object Object]**

我对 jQuery / HTML5 视频没有足够的经验来诊断发生了什么，任何指示或帮助都非常感激。

非常感谢，

詹姆士

# java - 将url下载到目录

> ID：11308499
> 
> 赞同：-1
> 
> 时间：2012-07-03T09:56:15.333
> 
> 标签：java, nio, apache-commons, apache-commons-httpclient

我需要将文本/纯文本文件下载到文件夹中。url 不以 .txt 结尾，但它具有内容类型等...正确设置。当我使用浏览器时，它会立即提示我保存文件。浏览器也会自动放置正确的文件名。

使用 java 我如何将该 url 下载到文件夹中？请注意，我也不知道文件名，但我希望将文件保存在目录中。

**下载文件的代码很容易......我的问题是我不知道我应该用什么名字保存我的文件。文件名是内容处置标头的一部分，现在我该如何提取它？**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-19T20:25:08.217

HTTP 协议使用 HTTP 标头来定义有关传输数据的一些信息。

您的`content-disposition`标头可以具有`filename`由服务器生成的属性。这包含正在传输的文件的名称。但它是可选的。如果你处理它不存在的情况。这是文档：[http ://www.w3.org/Protocols/rfc2616/rfc2616-sec19.html](http://www.w3.org/Protocols/rfc2616/rfc2616-sec19.html)

根据您下载文件的方式，您将有多种方法从 http 标头中检索此文件名。

例如，看看 apache http 客户端。

嗨，M。

# asp.net - 每次都引用会话变量而不将其转换为它的类型

> ID：11308501
> 
> 赞同：1
> 
> 时间：2012-07-03T09:56:24.273
> 
> 标签：asp.net, session-variables

我有一个会话变量，它是一个类实例。我在`Global.asax`：

```
void Session_Start(object sender, EventArgs e)
{
    // Code that runs when a new session is started
    Session["SiteVariables"] = new SiteVariables();

} 
```

现在我需要在我的解决方案的几个地方引用这个变量的一些成员，但据我所知，我必须这样做：

```
SiteVariables objSiteVariables = (SiteVariables)Session["SiteVariables"];
Label1.Text = objSiteVariables.permiss; 
```

我想知道是否有一种方法，例如在某个地方设置一个静态变量或其他东西，让我可以这样做：

```
Label1.Text = objSiteVariables.permiss; 
```

在我项目的任何地方。

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-03T10:01:07.247

您可以创建自己的`helper`类型/方法。

```
public class Util
{
   public static SiteVariables Variables
   {
      get
       {
           return HttpContext.Current.Session["SiteVariables"] as SiteVariables;
        }
    }
} 
```

并将值分配给

```
Label1.Text=Util.Variables.permiss; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-03T10:04:26.053

您可以为会话创建一个包装器，这将允许像这样的类型安全访问：

```
public class SessionHandler
{
    public static SessionHandler CurrentSession
    {
        get
        {
            SessionHandler session =
              (SessionHandler)HttpContext.Current.Session["SessionId"];
            if (session == null)
            {
                session = new SessionHandler();
                HttpContext.Current.Session["SessionId"] = session;
            }
            return session;
        }
    }

    public SiteVariables SiteVariables { get; set; }
} 
```

你可以像这样使用它：

```
// assign
SessionHandler.CurrentSession.SiteVariables = new SiteVariables();

// retrieve
SiteVariables objSiteVariables = SessionHandler.CurrentSession.SiteVariables; 
```

这样，您只需向`SessionHandler`类添加更多属性即可添加更多会话。

# android - 使用 BaseAdapter 子类时 ListView 不显示任何数据

> ID：11308502
> 
> 赞同：-1
> 
> 时间：2012-07-03T09:56:24.920
> 
> 标签：android

我想要发生的是我将使用列表片段在列表视图中显示所有数据。我下载了一些源代码并对其进行编辑以获得我想要的输出。这是我的代码：

```
 List<ListSql> results = new ArrayList<ListSql>();

    setListAdapter(new SqlParser(getActivity(),results)); 
```

这是我的listsql：

```
public class ListSql {

    private String Fname;
    private String Fpass;
    private ArrayList<String> arList;

    private Context myContext;
    private List<ListSql> items;
    private LayoutInflater  mInflater;
    private DBhelper myHelper;
    private SQLiteDatabase myDbase;

    public static final String KEY_ROWID = "_id";
    public static final String KEY_NAME = "_persons_name";
    public static final String KEY_HOTNESS = "person_hotness";

    private static final String DATABASE_NAME = "HotOrNotdb";
    private static final String DATABASE_TABLE = "peopleTable";
    private static final int DATABASE_VERSION = 1;

    public static class DBhelper extends SQLiteOpenHelper{

        public DBhelper(Context context) {
            super(context, DATABASE_NAME, null, DATABASE_VERSION);
            // TODO Auto-generated constructor stub
        }

        @Override
        public void onCreate(SQLiteDatabase db) {
            db.execSQL(
                    "Create Table " + DATABASE_TABLE + " (" + 
                    KEY_ROWID + " Integer PRIMARY KEY AUTOINCREMENT, " + 
                    KEY_NAME + " TEXT NOT NULL, " + 
                    KEY_HOTNESS + " TEXT NOT NULL);"
                    );

        }

        @Override
        public void onUpgrade(SQLiteDatabase db, int oldVersion, int newVersion) {
            // TODO Auto-generated method stub
            db.execSQL("DROP TABLE IF EXIST " + DATABASE_TABLE);
            onCreate(db);
        }

    }

    public ListSql(Context context){

        this.arList = Listme(arList);
        this.myContext = context;
    }

    public String getName(){
        return Fname;
    }

    public String getPass(){

        return Fpass;
    }

    public ArrayList<String> getArr(){

        return arList;
    }

    public ListSql open(){
        myHelper = new DBhelper(myContext);
        myDbase = myHelper.getWritableDatabase();
        Log.i("open","open");
        return this;
    }
    public void close(){
        myHelper.close();

    }

    public ArrayList<String> Listme(ArrayList<String> arr){
        String sql = "select * from " + DATABASE_TABLE;
        Cursor c = myDbase.rawQuery(sql, null);
        if(c !=null){
            if  (c.moveToFirst()) {
                do {
                    String firstName = c.getString(c.getColumnIndex(KEY_NAME));
                    String pass = c.getString(c.getColumnIndex(KEY_HOTNESS));
                    arr.add("username " + firstName + ",  Password: " + pass);
                }while (c.moveToNext());
            } 
            Log.i("hahahaha","hehe");
            return arr;

        }
        Log.i("hahahaha","not here");
        return null;

    }

} 
```

和我的基本适配器：

```
public class SqlParser extends BaseAdapter {

    private Context myContext;
    private List<ListSql> items;
    private LayoutInflater  mInflater;
    private DBhelper myHelper;
    private SQLiteDatabase myDbase;

    public static final String KEY_ROWID = "_id";
    public static final String KEY_NAME = "_persons_name";
    public static final String KEY_HOTNESS = "person_hotness";

    private static final String DATABASE_NAME = "HotOrNotdb";
    private static final String DATABASE_TABLE = "peopleTable";
    private static final int DATABASE_VERSION = 1;

    public SqlParser(Context context ,List<ListSql> items){
        this.myContext = context;
        this.items = items;
    }

    private class ViewHolder {
        public TextView textView;
    }

    public int getCount() {
        // TODO Auto-generated method stub
        return 0;
    }

    public Object getItem(int position) {
        // TODO Auto-generated method stub
        return null;
    }

    public long getItemId(int position) {
        // TODO Auto-generated method stub
        return 0;
    }

    public View getView(int position, View convertView, ViewGroup parent) {
        // TODO Auto-generated method stub
        ArrayList<String> arr = new ArrayList<String>();
        View view = convertView;
        ViewHolder viewHolder;
        TextView namef ;
        ImageView prof;
        Bitmap bMap;
        if (view == null) {
            view = mInflater.inflate(R.layout.listinflate, parent, false);

            /**
            viewHolder = new ViewHolder();
            viewHolder.textView = (TextView) view.findViewById(R.id.textView1);
            view.setTag(viewHolder); **/

            /*** You can do this manualy without using holder ***/
             namef = (TextView)view.findViewById(R.id.textView1);

            /*** You can do this manualy on setting the tag to individual components rather than using holder  ***/ 
            view.setTag(namef);

        }else {
            viewHolder = (ViewHolder) view.getTag();
            namef = (TextView) view.getTag();

        }
        namef.setText(items.get(position).Listme(arr).get(position).toString());

        return view;
    }
} 
```

所以问题是：我的列表视图没有显示任何数据。我很确定我正在从 sqlite 检索数据，但我无法管理它以显示在我的列表视图中。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-03T10:02:53.027

您在 getCount() 中返回 0，

```
 public int getCount() {
    // TODO Auto-generated method stub
    return 0;
} 
```

如果返回 0，则表示没有可用数据。在这里你必须传递实际的数据长度。

也许在你的情况下你必须通过列表大小，

```
public int getCount() {
        // TODO Auto-generated method stub
        items.size();
    } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-03T10:03:02.573

```
public int getCount() {
        // TODO Auto-generated method stub
        return 0;
    } 
```

这是你的问题。`getCount()`必须返回要显示的数据集的大小。由于您返回 0，因此`getView()`永远不会调用回调。

改进去

```
 public int getCount() {
            // TODO Auto-generated method stub
            return (items == null) ? 0 : items .size();
   } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-04T02:27:11.327

我明白了..我将我的 ListSql 更改为：

```
public class ListSql {

    private String Fname;
    private String Fpass;
    private ArrayList<String> arList;

    private Context myContext;
    private List<ListSql> items;
    private LayoutInflater  mInflater;
    private DBhelper myHelper;
    private SQLiteDatabase myDbase;

    public static final String KEY_ROWID = "_id";
    public static final String KEY_NAME = "_persons_name";
    public static final String KEY_HOTNESS = "person_hotness";

    private static final String DATABASE_NAME = "HotOrNotdb";
    private static final String DATABASE_TABLE = "peopleTable";
    private static final int DATABASE_VERSION = 1;

    public static class DBhelper extends SQLiteOpenHelper{

        public DBhelper(Context context) {
            super(context, DATABASE_NAME, null, DATABASE_VERSION);
            // TODO Auto-generated constructor stub
        }

        @Override
        public void onCreate(SQLiteDatabase db) {
            db.execSQL(
                    "Create Table " + DATABASE_TABLE + " (" + 
                    KEY_ROWID + " Integer PRIMARY KEY AUTOINCREMENT, " + 
                    KEY_NAME + " TEXT NOT NULL, " + 
                    KEY_HOTNESS + " TEXT NOT NULL);"
                    );

        }

        @Override
        public void onUpgrade(SQLiteDatabase db, int oldVersion, int newVersion) {
            // TODO Auto-generated method stub
            db.execSQL("DROP TABLE IF EXIST " + DATABASE_TABLE);
            onCreate(db);
        }

    }

    public ListSql(Context context, ArrayList<String> arList){

        this.arList = Listme(arList);
        this.myContext = context;
    }

    public String getName(){
        return Fname;
    }

    public String getPass(){

        return Fpass;
    }

    public ArrayList<String> getArr(ArrayList<String> arr){

        return arr;
    }

    public ListSql open(){
        myHelper = new DBhelper(myContext);
        myDbase = myHelper.getWritableDatabase();
        Log.i("open","open");
        return this;
    }
    public void close(){
        myHelper.close();

    }

    public ArrayList<String> Listme(ArrayList<String> arr){
        String sql = "select * from " + DATABASE_TABLE;
        Cursor c = myDbase.rawQuery(sql, null);
        if(c !=null){
            if  (c.moveToFirst()) {
                do {
                    String firstName = c.getString(c.getColumnIndex(KEY_NAME));
                    String pass = c.getString(c.getColumnIndex(KEY_HOTNESS));
                    arr.add("username " + firstName + ",  Password: " + pass);
                    getArr(arr);
                }while (c.moveToNext());
            } 
            Log.i("hahahaha","hehe");
            return getArr(arr);

        }
        Log.i("hahahaha","not here");
        return null;

    } 
```

和我的 BaseAdapter 到这个：

```
public class SqlParser extends BaseAdapter {

    private Context myContext;
    private ArrayList<String> items;
    private LayoutInflater  mInflater;
    private DBhelper myHelper;
    private SQLiteDatabase myDbase;

    public static final String KEY_ROWID = "_id";
    public static final String KEY_NAME = "_persons_name";
    public static final String KEY_HOTNESS = "person_hotness";

    private static final String DATABASE_NAME = "HotOrNotdb";
    private static final String DATABASE_TABLE = "peopleTable";
    private static final int DATABASE_VERSION = 1;

    public SqlParser(Context context ,ArrayList<String> arr){
        this.myContext = context;
        this.items = arr;
        mInflater = (LayoutInflater) context.getSystemService(Context.LAYOUT_INFLATER_SERVICE);
    }

    private class ViewHolder {
        public TextView textView;
    }

    public int getCount() {
        // TODO Auto-generated method stub
        return this.items.size();
    }

    public Object getItem(int position) {
        // TODO Auto-generated method stub
        return this.items.get(position);
    }

    public long getItemId(int position) {
        // TODO Auto-generated method stub
        return 0;
    }

    public View getView(int position, View convertView, ViewGroup parent) {
        // TODO Auto-generated method stub
        ArrayList<String> arr = new ArrayList<String>();
        View view = convertView;
        ViewHolder viewHolder;
        TextView namef ;
        ImageView prof;
        Bitmap bMap;
        if (view == null) {
            view = mInflater.inflate(R.layout.listinflate, parent, false);

            /**
            viewHolder = new ViewHolder();
            viewHolder.textView = (TextView) view.findViewById(R.id.textView1);
            view.setTag(viewHolder); **/

            /*** You can do this manualy without using holder ***/
             namef = (TextView)view.findViewById(R.id.textView1);

            /*** You can do this manualy on setting the tag to individual components rather than using holder  ***/ 
            view.setTag(namef);

        }else {
            viewHolder = (ViewHolder) view.getTag();
            namef = (TextView) view.getTag();

        }
        namef.setText(items.get(position));

        return view;
    }
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-03T10:02:01.420

CursorAdaptor 在这里会更好地工作，但是在回答您的问题时，您需要实现以下功能，否则适配器会认为您的列表有 0 个项目

```
public int getCount() {
        // TODO Auto-generated method stub
        return 0;
    }

public Object getItem(int position) {
    // TODO Auto-generated method stub
    return null;
}

public long getItemId(int position) {
    // TODO Auto-generated method stub
    return 0;
} 
```

您需要在 getCount() 中返回列表大小，在 getItem() 中返回实际列表项，在 getItemId() 中返回合理值

# java - 小程序：无法读取图像文件

> ID：11308503
> 
> 赞同：0
> 
> 时间：2012-07-03T09:56:32.887
> 
> 标签：java, javascript, applet

我在调用 ImageIO.read 读取文件时遇到了一些问题。这个小程序嵌入到一个 HTML 页面中，我使用 Javascript 返回一个字符串（“秒”）。在调用 ImageIO.read 之前，可以显示字符串“second”。但是调用 ImageIO.read 后，“秒”无法显示。我希望在读取图像文件后将“第二个”返回给用户。

非常感谢任何帮助。谢谢。

**HTML**

```
<html>
<body>
    <script language = "JavaScript">
    function bing()
    {
        alert(document.xyz2.Test());
    }
    </script>

    <input type="button" value="Value" onclick="bing()"/>
    <applet name="xyz2" code="xyz2.class" width=100 height=100>
    </applet>
</body>
</html> 
```

**小程序代码**

```
import java.awt.image.BufferedImage;
import java.io.File;
import java.io.IOException;

import javax.imageio.ImageIO;
import javax.swing.JApplet;

public class xyz2 extends JApplet {
   public String s="first";
   public BufferedImage bf;
   public void init(){

   }
   public String Test() throws IOException{
       bf = ImageIO.read(new File("c:\\rose.jpg"));
       s = "second";
       return s;

   }

} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-03T10:08:53.183

从文件系统读取图像时，您可能会遇到异常。需要对小程序进行**签名**才能访问这些文件。

一些选择：

*   签署你的小程序
*   从您正在访问小程序的网页中读取图像
*   将图像嵌入到小程序资源中

# fiddler - 使用 POST 方法将参数传递给 WCF RESTful 服务

> ID：11308505
> 
> 赞同：2
> 
> 时间：2012-07-03T09:56:39.717
> 
> 标签：fiddler, wcf-rest, webinvoke

如何使用 Fiddler 将 2 个参数传递给具有如下签名的方法：

```
 [WebInvoke(UriTemplate = "Login", Method = "POST", ResponseFormat = WebMessageFormat.Xml, BodyStyle = WebMessageBodyStyle.WrappedRequest)]        
    bool Login(string login, string password); 
```

欢迎任何更改方法中的某些内容的建议，但我总是传递 2 个字符串参数。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-03T18:28:05.227

使用 WCFTestClient 提供服务要容易得多。无论如何，Fiddler 具有作曲家功能，可用于测试任何 http 调用。

![在此处输入图像描述](../Images/fefd42f222e5852cc8bf9a0430ee69a9.png)

请求标头应如下所示。只需相应地更改 SOAPAction。

```
Content-Type: text/xml; charset=utf-8
SOAPAction: "http://tempuri.org/IService/Login"
Host: localhost:2045
Content-Length: 179
Expect: 100-continue
Accept-Encoding: gzip, deflate
Proxy-Connection: Keep-Alive 
```

并请求正文：

```
<s:Envelope xmlns:s="http://schemas.xmlsoap.org/soap/envelope/"><s:Body><Login xmlns="http://tempuri.org/"><login>sdf</login><password>sdf</password></Login></s:Body></s:Envelope> 
```

# mysql - MySQL在表上设置完整性检查

> ID：11308507
> 
> 赞同：1
> 
> 时间：2012-07-03T09:56:46.117
> 
> 标签：mysql

在 MySQL 我有两个表

**角色**

```
role_id | role_name 
```

**用户角色**

```
user_id | role_id 
```

在 user_roles 表中 role_id 是**FOREIGN KEY**。**现在，如果user_roles**表上也存在 role_id ，我想限制删除**角色表中的行**

 **我认为这可以通过创建表时的**完整性设置来完成。**我不知道 CASCADE 或 RESTRICT 是做什么的以及它们是如何工作的。

我在某处读到存储引擎**MyISAM**不支持**FOREIGN KEY**所以请指导我使用存储引擎（**MyISAM**和**InnoDB**）

 ******* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-03T10:02:23.277

一切都在这里：[http ://dev.mysql.com/doc/refman/5.5/en/innodb-foreign-key-constraints.html](http://dev.mysql.com/doc/refman/5.5/en/innodb-foreign-key-constraints.html)

更新：关于 myisam：[如何在 MySQL MyISAM 存储引擎上使用删除级联？](https://stackoverflow.com/questions/5342852/how-to-use-delete-cascade-on-mysql-myisam-storage-engine)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-03T10:02:28.580

您没看错，MyISAM 引擎不支持外键完整性检查。我的建议是去 innodb。

大多数时候，当我想坚持使用 MyISAM 表时，我会使用另一个选项，即在前端管理所有这些。但有时这并不好，因为您在前端增加了更多的头痛。

去做**`InnoDB`**********

# iphone - 如何使用 NSUserDefault 在 UserDefault 中保存密码？

> ID：11308508
> 
> 赞同：0
> 
> 时间：2012-07-03T09:56:58.233
> 
> 标签：iphone

当用户选择记住我复选框时，我想保存密码。我有这样的代码：这是正确的吗？

在 Appdelegate.m 中

```
@property(strong,nonatomic)NSString *savedno; 
```

在 .m 文件中

```
- (BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:(NSDictionary *)launchOptions
{    
    self.window = [[[UIWindow alloc] initWithFrame:[[UIScreen mainScreen] bounds]] autorelease];

    // Override point for customization after application launch.
    self.viewController = [[[ViewController alloc] initWithNibName:@"ViewController" bundle:nil] autorelease];

    self.navcontrol =[[UINavigationController alloc]initWithRootViewController:self.viewController ];

    self.window.rootViewController = self.navcontrol;
    [self.window makeKeyAndVisible];

    self.savedno=[[NSUserDefaults standardUserDefaults]objectForKey:@"pass"];

    if(savedno==nil)
    {
        NSDictionary *saveDict=[NSDictionary dictionaryWithObject:savedno forKey:@"pass"];
        [[NSUserDefaults standardUserDefaults]registerDefaults:saveDict];
    }
    return YES;
}

- (void)applicationWillTerminate:(UIApplication *)application
{
    /*
     Called when the application is about to terminate.
     Save data if appropriate.
     See also applicationDidEnterBackground:.
     */

    NSUserDefaults *userdefault=[NSUserDefaults standardUserDefaults];
    [userdefault setObject:savedno forKey:@"pass"];
} 
```

//ViewDelegate.m 文件

//复选框事件

```
-(IBAction)check:(id)sender
{
    if (checkboxSelected == 0)
    {
        [checkboxButton setSelected:YES];
        [checkboxButton setImage:[UIImage imageNamed:@"checkbox-checked.png"]forState:UIControlStateNormal];

        // userdefault=[NSUserDefaults standardUserDefaults];
        // [userdefault setObject:user.text forKey:@"user"];
        // [userdefault setObject:pass.text forKey:@"pass"];
        self.callno=pass.text;
        pass.text=self.callno;
        AppDelegate *appdelegate=[[UIApplication sharedApplication]delegate];
        appdelegate.savedno=self.callno;

        NSLog(@"Data saved");    
        checkboxSelected = 1;        
    }
    else
    {
        [checkboxButton setSelected:NO];
        [checkboxButton setImage:[UIImage imageNamed:@"checkbox.png"]forState:UIControlStateNormal];                                 
        user.text=@"";
        pass.text=@"";
        checkboxSelected = 0;
    }
}

- (void)viewDidLoad
{
    user.clearButtonMode=UITextFieldViewModeWhileEditing;

    AppDelegate *appdel=[[UIApplication sharedApplication]delegate];

    if([user.text isEqualToString:@"bhoomi"])
    {
        pass.text=appdel.savedno;
    }
    [super viewDidLoad];

    checkboxSelected = 0;

    // Do any additional setup after loading the view, typically from a nib.
}
` 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-03T10:03:08.767

不。`NSUserDefaults`不是存放密码等机密信息的地方。相反，使用[KeyChain](http://developer.apple.com/library/ios/#documentation/Security/Reference/keychainservices/Reference/reference.html)。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-03T10:03:55.983

您应该使用钥匙串来存储密码等信息。

看看[SFHFKeychainUtils](https://github.com/ldandersen/scifihifi-iphone/tree/master/security)，它将允许在您的应用程序中轻松使用钥匙串。它提供了两种方法：storeUserName:andPassword: 和 getPasswordForUsername，这将使它快速且安全！

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-03T10:00:03.210

要保存到用户默认值，请执行以下操作

```
[[NSUserDefaults standardUserDefaults] setValue:@"YourPassword" forKey:@"passowrd"];
//then call
[[NSUserDefaults standardUserDefaults] synchronize]; 
```

取回它

```
NSString *password = [[NSUserDefaults standardUserDefaults] valueForKey:@"password"]; 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-03T10:00:09.667

将值设置为 NSUserDefaults 后，您必须同步一次才能将其保存。使用以下语句执行此操作。

```
[[NSUserDefaults standardUserDefaults] synchronize]; 
```

希望这可以帮助。

**编辑：**

*   将凭据存储到钥匙串而不是 NSUserDefaults 是明智的。
*   [将此 KeyChain Helper 类用于相同的](https://github.com/ldandersen/scifihifi-iphone/tree/master/security/)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-03T10:13:57.120

使用此代码...

```
NSUserDefault *userDefault = [NSUserDefaults standardUserDefaults];

[userDefault  setValue:pass_str forKey:@"pass"];

[userDefault  synchronize]; 
```

这可能会帮助你...

# php - 如何拆分这个数组

> ID：11308511
> 
> 赞同：0
> 
> 时间：2012-07-03T09:57:13.217
> 
> 标签：php, arrays

只是一个快速的我需要从数组中获取一个值数组是这样制作的

```
$resultOfAdd[“CaseAndMatterResult”][“ResultInfo”][“ReturnCode”]; 
```

它给出了这个的输出

```
Array (
    [AddCaseAndMatterResult] => Array (
        [ResultInfo] => Array (
            [ReturnCode] => OK
            [Errors] =>
            [Warnings] =>
        )
        [CaseID] => 4880062
        [MatterID] => 4950481
        [LeadID] => 0
        [CustomerID] => 0
    )
) 
```

我要做的就是将“MatterID”部分放入变量中。我将如何实现这一目标。

我努力了

```
$matterID = array($resultOfAdd["MatterID"]); 
```

这不起作用

问候

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-03T10:01:53.660

这是一个多维的关联数组。把它想象成建筑物的地板。密钥`MatterID`不在第一维（楼层）中，而是在第二维中，在`AddCaseAndMatterResult`子数组中。

```
$matterID = $resultOfAdd['AddCaseAndMatterResult']['MatterID'] 
```

数组的连续维度用连续的方括号指定，每个方括号命名要查找的键（大多数语言都是如此）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-03T09:59:46.367

```
$matterID = $yourArray['AddCaseAndMatterResult']['MatterID']; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-03T10:03:13.340

使用这种方式：

```
$matterID = $resultOfAdd['AddCaseAndMatterResult']['MatterID']; 
```

# java - JAXB MOXy 将多个对象迭代映射到单个 XML

> ID：11308512
> 
> 赞同：1
> 
> 时间：2012-07-03T09:57:24.917
> 
> 标签：java, xml, jaxb, eclipselink, moxy

我正在使用 JAXB MOXy 将我的 java 对象映射到 XML。到目前为止，我只需要一次转换 1 个对象并且这个词很好。所以我的输出 XML 看起来像这样：

```
<?xml version="1.0" encoding="UTF-8"?>
<NotificationTemplateXML template-id="1">
   <template-subject>Test Subject</template-subject>
   <template-text>Test Text</template-text>
</NotificationTemplateXML> 
```

我现在要做的是将对象的多次迭代保存到同一个 XML 文件中，所以它看起来像这样

```
<?xml version="1.0" encoding="UTF-8"?>
 <NotificationTemplateXML template-id="1">
    <template-subject>Test Subject</template-subject>
    <template-text>Test Text</template-text>
 </NotificationTemplateXML>
 <NotificationTemplateXML template-id="2">
    <template-subject>Test Subject</template-subject>
    <template-text>Test Text</template-text>
 </NotificationTemplateXML>
 <NotificationTemplateXML template-id="3">
    <template-subject>Test Subject</template-subject>
    <template-text>Test Text</template-text>
 </NotificationTemplateXML> 
```

我的对象映射如下所示：

```
@XmlAccessorType(XmlAccessType.FIELD)
@XmlRootElement(name="NotificationTemplateXML")
public class NotificationTemplate {

    @XmlAttribute(name="template-id")
    private String templateId;
    @XmlElement(name="template-subject")
    private String templateSubject;
    @XmlElement(name="template-text")
    private String templateText; 
```

假设我有一个类型为“NotificationTemplate”的列表，我可以简单地编组列表吗？这是否会生成一个带有每个 NotificationTemplate 对象的单个 xml 文件作为单独的“XML 对象”？

注意。同样，当我解组 XML 文件时，我是否希望生成类型“NotificationTemplate”的列表？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-03T10:43:08.993

下面是几个不同的选项。

**选项 #1 - 处理无效的 XML 文档**

XML 文档只有一个根元素，因此您的输入无效。以下是[@npe](https://stackoverflow.com/users/1344008/npe)给出的关于如何处理此类输入的答案：

*   [从流输入中解析没有根元素的 XML 片段列表](https://stackoverflow.com/questions/11226747/parse-a-list-of-xml-fragments-with-no-root-element-from-a-stream-input)

**选项 #2 - 创建有效的 XML 文档**

我建议将您的 XML 转换为有效的文档并进行处理。

**带有根元素的 XML 文档**

我通过添加根元素修改了您的 XML 文档。

```
<?xml version="1.0" encoding="UTF-8"?>
<NotificationTemplateXMLList>
    <NotificationTemplateXML template-id="1">
        <template-subject>Test Subject</template-subject>
        <template-text>Test Text</template-text>
     </NotificationTemplateXML>
     <NotificationTemplateXML template-id="2">
        <template-subject>Test Subject</template-subject>
        <template-text>Test Text</template-text>
     </NotificationTemplateXML>
     <NotificationTemplateXML template-id="3">
        <template-subject>Test Subject</template-subject>
        <template-text>Test Text</template-text>
     </NotificationTemplateXML>
<NotificationTemplateXMLList> 
```

**NotificationTemplateXMLList**

我已经为您的域模型引入了一个新类，该类映射到新的根元素。

```
@XmlRootElement(name="NotificationTemplateXMLList")
@XmlAccessorType(XmlAccessType.FIELD)
public class NotificationTemplates {

     @XmlElement(name="NotificationTemplateXML")
     private List<NotificationTemplate>  notificationTemplates;
} 
```

# sql - 根据密码策略验证 SQL 密码

> ID：11308518
> 
> 赞同：1
> 
> 时间：2012-07-03T09:58:03.180
> 
> 标签：sql, sql-server-2008, tsql, passwords, policy

我有几个可以通过 SQL 帐户访问的 Windows 应用程序。我需要根据服务器的本地安全策略验证用户密码，而无需修改密码本身。

我需要的是一个 SQL 语句，它返回一个布尔值，无论密码是否符合服务器策略。

有可能吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-05T14:50:14.517

根据您评论中的额外信息，您似乎希望根据 Windows 密码策略验证现有 SQL 登录密码，但不对登录名进行任何更改。

这可能是不可能的，因为无法检索 SQL 登录密码，因此无法以编程方式自行验证它们。但是，根据文档，[默认情况下检查是打开的](http://msdn.microsoft.com/en-us/library/ms189828%28v=sql.100%29.aspx)，因此您的所有密码可能已经符合操作系统安全策略，除非您故意将其设置为关闭然后再打开以进行某些登录。

如果您需要确保所有登录密码都符合策略，最好的确保方法是为所有登录设置检查（如果尚未启用）并强制更改密码。更好的是，停止使用 SQL 登录并改用 Windows 登录，尽管我知道这在所有情况下都不可能。

# xna - 捕捉到特定的网格位置

> ID：11308519
> 
> 赞同：0
> 
> 时间：2012-07-03T09:58:07.103
> 
> 标签：xna

我布置了一个网格系统，可以让我将对象捕捉到网格，而且效果很好，但这不是我在这种情况下要寻找的行为。我这辈子都无法用任何有意义的语言来表达（可能是为什么我无法理解它......）所以我想出一张具有当前行为和预期行为的图片会做一个更好的工作：

![网格](../Images/57d6b62f2a13f4480aaad157b0a73b39.png)

左侧显示当前行为（注意：网格系统实际上是上面显示的白色网格线的两倍。这允许将对象放置在网格线上，这是我正在寻找的预期行为。）

右侧是我希望对象捕捉到网格的方式。我只希望将对象放置在网格线上，而不是网格节点（或空白中心节点）上。

在预期的行为中，如果配对值与其相反，对象将始终捕捉到网格 - 如果 X 为奇数，则 Y 值必须为偶数才能捕捉，反之亦然（即 [0, 1]， [1, 0], [2,3])。对象不会对齐到 [0,0]、[1,1]、[4, 2]，因为它们都是奇数或偶数。只是我注意到与我正在寻找的行为一致但无法将其转化为任何有用的东西。

这是整个网格代码的快照：

```
//Grab the mouse state
MouseState mouse = Mouse.GetState();

//TileX = (int)Math.Floor((float)(mouse.X / tileWidth));  //tileWidth = 80
//TileY = (int)Math.Floor((float)(mouse.Y / tileHeight)); //tileHeight = 80

//We want "snap to closest grid space" instead of "snap to next-lowest grid space", 
//like the Math.Floor code does above. The ".ToInt()" extensions simply rounds a 
//float to the closest integer. i.e. 2.2 = 2     2.5 = 3    3 = 3
TileX = ((float)mouse.X / tileWidth).ToInt();
TileY = ((float)mouse.Y / tileHeight).ToInt();

//Set the square to a whole tile coordinate
squarePosition.X = TileX * tileWidth;
squarePosition.Y = TileY * tileHeight; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-03T13:17:50.063

这比看起来应该的要复杂一些，因为你如何捕捉 x 取决于你如何捕捉 y（和虎钳诗句）。我认为我这样做的方法是首先使用您在上面发布的代码以及 2x tileHeight 和 tileWidth 来确定您在哪个方格。一旦你有了你的点所在的正方形，你就可以使用一些 if 条件来确定鼠标最接近哪条边。

实际上，我想您也可以通过将点围绕原点旋转 45 度，像在上面的代码中那样捕捉它们，然后将捕捉的位置向后旋转（在另一个方向上旋转 45 度），从而得出一个封闭形式的解决方案。

哪个对您更有意义……最好！

# selenium - 使用 IE webdriver 不使用 IDEServer

> ID：11308523
> 
> 赞同：1
> 
> 时间：2012-07-03T09:58:20.223
> 
> 标签：selenium, webdriver, build-automation, selenium-webdriver, watir-webdriver

我需要在不使用 IDEServer 的情况下使用 IE webdriver。如果我不使用“InternetExplorerDriver”和路径，则会出现此错误。

IEDriverServer.exe 不存在-文件 c:\users\administrator\documents\visual studio 2010\projects\TestProject1\TestProject1\bin\Debug\IEDriverServer.exe 不存在。该驱动程序可以在[http://code.google.com/p/selenium/downloads/list](http://code.google.com/p/selenium/downloads/list)下载。

有没有办法在不运行 IDEServer 的情况下连接到 IEDriver 并且还需要覆盖安全错误“此网站的安全证书有问题。”
有没有其他选择

```
 IWebDriver driver;
        var options = new InternetExplorerOptions();
        //options.IntroduceInstabilityByIgnoringProtectedModeSettings = true;
        driver = new InternetExplorerDriver("D://Software", options); 

        driver.Navigate().GoToUrl("www.google.com");//EXAMPLE

        driver.Navigate().GoToUrl("javascript:document.getElementById('overridelink').click()");
        IWebElement uname = driver.FindElement(By.Id("ctl00_uxContentPlaceHolder_uxUsername"));
        uname.SendKeys("chris");
        IWebElement pwd = driver.FindElement(By.Id("ctl00_uxContentPlaceHolder_uxPassword"));
        pwd.SendKeys("chris1*"); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-03T13:09:13.453

This is actually two different questions. To answer the one indicated in the summary line of this post, no, you now **must** have the IEDriverServer.exe in order to use WebDriver with IE in most of the official language bindings (.NET, Python, and Ruby). As of this writing, the Java language bindings provide a fallback mechanism using a .dll version of the IEDriverServer, but this is being phased out within the next couple of releases, and at that time the requirement for the IEDriverServer.exe will extend to Java as well.

# c++ - 单击菜单时显示消息框未出现在屏幕上

> ID：11308530
> 
> 赞同：0
> 
> 时间：2012-07-03T09:58:35.650
> 
> 标签：c++, menu, window, messagebox

我刚刚制作了一个简单的 C++ 窗口并添加了一个菜单，但是当我单击菜单时，特别是“关于”我想显示一个简单的 MessageBox 但我不能 - 因为它没有显示。

```
LPCWSTR App_Name = TEXT("TestApp");
LPCWSTR App_Title = TEXT("TestTitle");

const int windowWidth = 480;
const int windowHeight = 480;

int WINAPI WinMain(HINSTANCE hInstance, HINSTANCE hPrevInstance, LPSTR lpCmdLine, int iCmdShow)
{
    WNDCLASS wc;
    wc.cbClsExtra = 0;
    wc.cbWndExtra = 0;
    wc.hbrBackground = (HBRUSH)GetStockObject( WHITE_BRUSH );
    wc.hCursor = LoadCursor( NULL, IDC_ARROW );
    wc.hIcon = LoadIcon( NULL, IDI_APPLICATION );
    wc.hInstance = hInstance;
    wc.lpfnWndProc = WndProc;
    wc.lpszClassName = App_Name;
    wc.lpszMenuName = MAKEINTRESOURCE(MNU_MAINMENU);
    wc.style = CS_HREDRAW | CS_VREDRAW;

    RegisterClass(&wc); 

    RECT rc;
    GetWindowRect(GetDesktopWindow(), &rc);

    long screenWidth = rc.right;
    long screenHeight = rc.bottom;

    HWND hwnd = CreateWindow
    (
        App_Name,
        App_Title,
        WS_MINIMIZEBOX | WS_SYSMENU,
        (screenWidth / 2) - (windowWidth / 2), (screenHeight / 2)-(windowHeight/2),
        windowWidth, windowHeight,
        NULL, NULL,
        hInstance, NULL
    );

    ShowWindow(hwnd, iCmdShow );
    UpdateWindow(hwnd);

    MSG msg;

    while( GetMessage( &msg, NULL, 0, 0 ) )
    {
        TranslateMessage( &msg );
        DispatchMessage( &msg );
    }

    return msg.wParam;
} 
```

和消息框...：

```
LRESULT CALLBACK WndProc(HWND hwnd,UINT message, WPARAM wparam, LPARAM lparam)
{   
        switch( message )
        {

        case WM_COMMAND:
            id = LOWORD(wparam);
            event = LOWORD(wparam);
            switch(id)
            {
                case MNU_HELP_ABOUT:
                MessageBox(NULL, TEXT("TEXT"), TEXT("TITLE"), MB_OK | MB_ICONINFORMATION);
                break;
            }
        break;

        }
} 
```

菜单有效，因为我添加了一个 Quit 等，所以我知道它会响应菜单上的点击，但是当我点击 About 按钮时，您会听到弹出声音，但没有显示 MessageBox。

有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-03T10:05:02.467

MessageBox 的第一个参数是父级的 hWnd。请注意，MessageBox 调用是同步的，因此在用户单击“确定”按钮之前，控制权不会返回到您的 WndProc。（因此您的窗口没有响应。）您还没有提供父 hWnd，因此可能在您的窗口*下方*创建了消息框。

尝试将 hwnd 作为第一个 MessageBox 参数传递，看看是否有帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-11T15:31:43.383

我想通了，不知何故。问题是因为我在 WM_CREATE 中没有做任何事情，或者表单上没有“什么”——白色背景，或者其他什么。当我开始向窗口添加控件（按钮）时，它突然出现在以前没有的地方。只是奇怪...

# mysql - 如何在 LAMP 安装中将 MySQL 更改为 MariaDb

> ID：11308533
> 
> 赞同：2
> 
> 时间：2012-07-03T09:58:48.897
> 
> 标签：mysql, mariadb

我是新的 LAMP 开发人员，我需要在安装的 Denwer 包中将 MySQL 更改为 MariaDB。所以，请告诉我，我该怎么做？我只需要重新安装 MySQL（我该怎么做？只需删除所有文件？）并安装 MariaDB 还是我需要做其他任何事情？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-20T17:40:35.050

如[链接的 MariaDB 网站上的常见问题解答中所述。](https://kb.askmonty.org/en/how-can-i-upgrade-from-mysql-to-mariadb/)MariaDB 和 MySQL 完全兼容。您可以简单地卸载 mySQL 并安装 MariaDB，一切都应该正常工作。如果您不确定如何卸载和重新安装 mysql，那么[superuser.com](http://superuser.com)可能是开始的地方。

# visual-studio-2010 - 在 MAC OS X 上打开 Visual Studio 项目

> ID：11308538
> 
> 赞同：21
> 
> 时间：2012-07-03T09:59:03.327
> 
> 标签：visual-studio-2010, macos

我在 Visual Studio 中有一个 c++ 项目，我需要在 MAC OS X 计算机上运行该项目。那可能吗？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-07-03T10:07:42.527

[MonoDevelop](http://monodevelop.com/)可用于在 Mac 上打开和操作 Visual Studio 项目。但是它只能打开`.csproj`文件，不能打开旧的`.vcproj`. 您可以使用[Visual Studio Conversion Wizard](http://msdn.microsoft.com/en-us/library/60z6y467%28v=vs.80%29.aspx)将旧项目转换为兼容的项目。

当您使用 C++ 时，您可以随意使用任何您喜欢的 IDE 或编辑器。只要丢失您的项目元数据文件不是问题，您可以在 Xcode、TextMate、Sublime Editor 或任何选择的编辑器中打开文件。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2017-08-04T19:04:26.437

尽管问这个问题已经好几年了，但最后还是有可能的。

您现在可以在 Mac 上安装[Visual Studio Code](https://code.visualstudio.com/)并使用 C++。[这是](https://blogs.msdn.microsoft.com/vcblog/2016/10/24/building-your-c-application-with-visual-studio-code/)你如何做到的。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-07-03T10:02:18.363

如果您使用 Expression Studio，您可以在 Mac 上使用 Visual Studio 项目/解决方案做一些事情。

# matlab - 比较直方图并在matlab中显示结果

> ID：11308546
> 
> 赞同：2
> 
> 时间：2012-07-03T09:59:33.060
> 
> 标签：matlab, histogram

我正在尝试定义三类超声图像：致密乳房、脂肪乳房和未定义的乳房。

对于这个建议，我正在使用每个图像的灰度直方图：

*   如果直方图的分布靠近 yy 轴，则它是具有致密组织的乳房
*   如果灰度分布在右侧，则表示我们有一个脂肪性乳房。
*   如果灰度级别是均匀分布的，则意味着我们面临一个未定义的情况，它不密集，也不肥大。

我的问题是如何使用直方图的信息，如何自动将直方图与 MATLAB 进行比较，并说出它是密集的还是肥胖的？？？

有任何想法吗 ？？？提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-03T10:50:34.053

我认为您正在寻找[偏度](http://en.wikipedia.org/wiki/Skewness)度量：

![截屏](../Images/3054e1c083b467d92fb6fead4b173c90.png)

当直方图对称时，偏度为零。如果左手尾巴较长，偏度将为负。如果右手尾巴较长，偏度将为正。

# inheritance - Doctrine 2 多重映射继承

> ID：11308557
> 
> 赞同：2
> 
> 时间：2012-07-03T10:00:06.830
> 
> 标签：inheritance, orm, symfony, doctrine, doctrine-orm

我为所有具有 GeoLocation 功能的实体定义了一个映射超类：

```
<?php
namespace Acme\GeoBundle\Entity;

use Gedmo\Mapping\Annotation as Gedmo;
use Doctrine\ORM\Mapping as ORM;

/**
 * @ORM\MappedSuperclass
 */
class Placeable {

/**
* @ORM\Column(type="decimal", scale=7)
*/
protected $loc_latitude;

[...]

}
?> 
```

我目前将两个实体映射到这个超类。但是，我还想将此地理映射提供给我的用户实体，由 FOSUserBundle 提供。问题是这个实体已经从 FOSUserBundle 中包含了 User 模型：

```
<?php
namespace Acme\UserBundle\Entity;

use FOS\UserBundle\Entity\User as BaseUser;

/**
 * @ORM\Entity
 */
class User extends BaseUser {}
?> 
```

所以我的问题是：如何将可放置的映射信息提供给我的用户实体？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-03T12:18:52.880

您应该有一个位置/地址对象，从 Placeable 继承，并将位置与用户链接。

PS：这是因为您不能从 PHP 中的多个实体继承

```
<?php

class User extends BaseUser
{
    /**
     * @ORM\OneToOne(targetEntity="Location", inversedBy="user")
     * @ORM\JoinColumn(name="location_id", referencedColumnName="id")
     */
    private $location;
}

class Location extends Placeable
{
    /**
     * @ORM\OneToOne(targetEntity="User", mappedBy="location")
     */
    private $user;
} 
```

# database - 从数据库加载 Zend 布局

> ID：11308558
> 
> 赞同：0
> 
> 时间：2012-07-03T10:00:06.850
> 
> 标签：database, zend-framework, content-management-system, zend-layout

我正在 Zend 之上构建一个 cms，只是为了练习和娱乐。我希望能够将布局脚本和视图脚本存储在数据库中，并从那里检索它们，以便在我的 CMS 中轻松编辑它们。有人能指出我正确的方向吗？我现在做的是这样的：

```
// Disable view
        $this->_helper->viewRenderer->setNoRender(true);
        $this->_helper->layout()->disableLayout();

    $pageDB = new Application_Model_DbTable_Page();
    $page = $pageDB->fetch($identifier);

         // Display the page or a 404 error
        if ($page !== null) {
            $this->view->headTitle($page->title);

            // Get the layout from the DB
            $layoutDB = new Application_Model_DbTable_Layout();
            $layout = $layoutDB->fetch($page->layout);

            $layout = str_replace('{LCMS:title}', $page->title, $layout->content);
            $layout = str_replace('{LCMS:content}', $page->content, $layout);

            $this->getResponse()->setBody($layout);
        } else {
            $this->_forward('notfound', 'error');
        } 
```

但这显然意味着我在 rega 中失去了 Zend 的所有优势

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-03T10:40:03.633

我认为更好的方法是让您的 CMS 代码在每次更改文件时编写版本化布局脚本。然后从数据库中为应用程序设置适当的布局脚本。

我仍然会将所有代码存储在数据库中以用于备份和加载以进行编辑，但在完成编辑后将其写入文件。

*布局数据库表*

```
| id | layout | version | filename | content | 
```

*   layout 具有页面的标识符。
*   version 是一个自动增量器，每次更改都会更新
*   文件名是 [布局]-[版本]
*   内容就是内容……

当您保存到此表时。将内容写入 application/layout/[layout]-[version].phtml 中的文件

然后在您的引导程序中使用此伪代码来加载您在 CMS 中创建的页面。

*引导程序.php*

```
public function _initLayout() {
    $layoutDB = new Application_Model_DbTable_Layout();
    $layout = $layoutDB->fetch($page->layout);
    Zend_Layout::getMvcInstance()->setLayout($layout->filename);
} 
```

这样，您可以将所有服务器端脚本保留在布局文件中，并使用占位符组件而不是 str_replace

# ruby-on-rails - Rails - 无需单击提交按钮即可更新数据库字段 - 可能吗？

> ID：11308560
> 
> 赞同：0
> 
> 时间：2012-07-03T10:00:07.523
> 
> 标签：ruby-on-rails, ajax, database, submit

我有一个下拉列表供用户选择任务是否完成。我希望他们的更改能够更新数据库上的状态，而不必每次进行更改时都单击提交按钮。这可能吗？

基本上，默认情况下所有任务都标记为未完成，因此当用户单击下拉列表并将其更改为完成时，我希望在数据库上更改此内容，而无需单击提交按钮。

任何人都可以提供的任何帮助都会很棒，谢谢！

这是我的代码：

```
<%= form_for task do %>
    <td><%= select :task, :complete, [ ["Yes",2], ["Partly",1], ["No",0]], { :action => "update" } %></td>
<% end %> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-03T10:06:53.463

尝试添加这个：

```
:onchange => "this.form.submit();" 
```

查看[RJS: Ajaxified select_tag](https://stackoverflow.com/questions/579855/rjs-ajaxified-select-tag)了解更多详细信息如何使用

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-03T10:07:01.407

您可以使用 ajax 轻松做到这一点。您可以在 select 标签上监听[onchange](http://www.w3.org/TR/WCAG20-TECHS/SCR19)事件。

这是网络 imo 上最好的[ajax on rails](http://blog.madebydna.com/all/code/2011/12/05/ajax-in-rails-3.html)指南，所以也许你可以从中得到一些提示。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-03T10:06:46.030

有几个 gem 使用 JSON 请求来轮询模型。我建议观看[此](http://railscasts.com/episodes/302-in-place-editing)视频。Ryan 详细介绍了如何使用 gem 在页面上进行就地编辑。

# java - 使用 Signpost for OAuth 进行身份验证时未检索请求令牌

> ID：11308570
> 
> 赞同：2
> 
> 时间：2012-07-03T10:00:24.590
> 
> 标签：java, api, oauth, tumblr, oauth-provider

```
public class Tumblr {

    public static void main(String args[]) throws OAuthCommunicationException, OAuthMessageSignerException, OAuthExpectationFailedException, OAuthNotAuthorizedException
            {
     OAuthConsumer consumer = new DefaultOAuthConsumer("ConsumerKey",
                                             "ConsumerSecret");

     OAuthProvider provider = new DefaultOAuthProvider(
                "http://www.tumblr.com/oauth/request_token", "http://www.tumblr.com/oauth/access_token",
                "http://www.tumblr.com/oauth/authorize");
     String CallbackURL="http://localhost:8084/FinalTumblr/index.jsp";

       String authUrl =  provider.retrieveRequestToken(consumer,CallbackURL);
     //  String authUrl[] = provider.retrieveRequestToken(OAuth.OUT_OF_BAND);

       System.out.println("AuthUrl.."+authUrl);

         System.out.println("Request token: " + consumer.getToken());
         System.out.println("Token secret: " + consumer.getTokenSecret());

        // create an HTTP request to a protected resource

}
} 
```

**例外 ：**

```
"Exception in thread "main" oauth.signpost.exception.OAuthCommunicationException: Communication with the service provider failed: Service provider responded in error: 400 (Bad Request)
    at oauth.signpost.AbstractOAuthProvider.retrieveToken(AbstractOAuthProvider.java:218)
    at oauth.signpost.AbstractOAuthProvider.retrieveRequestToken(AbstractOAuthProvider.java:74)
    at Tumblr.main(Tumblr.java:42)
Caused by: oauth.signpost.exception.OAuthCommunicationException: Service provider responded in error: 400 (Bad Request)
    at oauth.signpost.AbstractOAuthProvider.handleUnexpectedResponse(AbstractOAuthProvider.java:245)
    at oauth.signpost.AbstractOAuthProvider.retrieveToken(AbstractOAuthProvider.java:193)
    ... 2 more
Java Result: 1" 
```

知道为什么会发生此错误吗？

# .net - 我可以在重定向用户时添加异常页面吗

> ID：11308573
> 
> 赞同：0
> 
> 时间：2012-07-03T10:00:44.673
> 
> 标签：.net, vb.net, redirect

我在使用 vb 语言的 .net 框架上。我在我的登录页面中使用 request.urlReferrer 就像在 page_load

> Session("PreviousPage") = Request.UrlReferrer

当我单击登录按钮时，我像这样重定向了用户。

```
If Not Session("PreviousPage") Is Nothing Then
Response.Redirect(Session("PreviousPage").ToString)
End If 
```

问题是当我的上一个页面是登录页面时。我已登录系统，但再次重定向到登录页面。有什么建议吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-03T22:13:51.620

哦是的。首先，您需要找出您的登录页面与任何非登录页面的区别。也许是存在特定控件（`Login1`在以下示例中调用）：

```
Dim LoginControl As Control
LoginControl = PreviousPage.FindControl("Login1")
If Not LoginControl Is Nothing Then
    ... handle exception here ...
Else
    Response.Redirect(Session("PreviousPage").ToString)
End If 
```

或者也许它是它的 URL，在这种情况下你可以[`HttpWebRequest.Referer`](http://msdn.microsoft.com/en-us/library/system.net.httpwebrequest.referer.aspx)用来检测它。在 HTTP 和正常浏览行为的情况下，Referer 与上一页相同。

# android - 相机没有按预期拍照

> ID：11308579
> 
> 赞同：0
> 
> 时间：2012-07-03T10:00:59.713
> 
> 标签：android, cordova

我是 Android 开发新手，对 Web 开发也比较陌生。最近，我一直在尝试使用手机间隙来制作一个网络应用程序，现在它只是激活我的手机相机并拍照。我正在关注“20 个编程 phonegap 的秘诀”一书。书中有一个完全相同的配方，但它对我不起作用。下面是我拥有的代码。

照片.js

```
 var loaded = false;

 alert ("In the PHOTO JS");
 function onPhotosLoad() {
 alert ("In the ONPHOTOLOAD JS");
 // only load the camera selector on first load
 if (!loaded) {
    navigator.camera.getPicture(onPhotoLoadSuccess, onFail,
      {
        quality: 50,
        encodingType: Camera.EncodingType.PNG,
        destinationType: navigator.camera.DestinationType.FILE_URI
      });
    loaded = true;
 }
 }
 function onPhotoLoadSuccess(photoUri) {
alert ("In the ONPHOTOLOADSUCCESS JS");

 document.getElementById('photo').src = photoUri;
 } 
 function onFail(message) {
 alert('Failed because: ' + message);
 } 
```

照片.html

```
<!DOCTYPE HTML>
<html>
<head>
<title>PhoneGap</title>
</head>
<body>

<div data-role="page" id="contacts-page">
    <div data-role="header" data-position="inline">
        <h1>Photos</h1>
         </div>
    <img src="" id="photo" />
    <div data-role="footer" data-position="fixed">
        <div data-role="navbar">
            <ul>
                <li><a href="index.html">Home</a></li>
                <li><a href="map.html">Map</a></li>
                <li><a href="compass.html">Compass</a></li>
                <li><a href="list.html">List</a></li>
                <li><a href="contacts.html">Contacts</a></li>
                <li><a href="photos.html" class="ui-btn-active">Photos</a></li>
            </ul>
        </div>
    </div>
    <script type="text/javascript" charset="utf-8" src="scripts/photos.js"></script>
</div>
</body>
</html> 
```

# directx - 网格的顶点结构与顶点着色器的顶点结构

> ID：11308585
> 
> 赞同：0
> 
> 时间：2012-07-03T10:01:20.057
> 
> 标签：directx, hlsl, vertex-shader

[使用 HLSL、*.fx 文件和 DirectX9]

我是使用着色器的新手，并且有一个场景可以工作，但不明白为什么。我对网格如何具有一个版本的顶点减速而着色器可以定义另一个版本感到困惑。

我用 来创建一个`ID3DXMesh`球体`D3DXCreateSphere(...)`，它是用 来设置的`D3DFVF_XYZ | D3DFVF_NORMAL`。我调用`ID3DXMesh::DrawSubset(0)`渲染；在 BeginPass/EndPass 调用中。

然后我有一个定义了结构的顶点着色器：

```
struct Vertex {
    float4 position:POSITION;
    float2 textureCoords:TEXCOORD0;
    float3 lightDir:TEXCOORD1;
    float3 normal:TEXCOORD2;
}; 
```

和着色器本身：

```
Vertex vertexShader( Vertex original, float3 _normal:NORMAL ) {
    Vertex result = (Vertex)0;

    float4x4 worldViewMatrix = mul( worldMatrix, viewMatrix );
    float4x4 worldViewProjectionMatrix = mul( worldViewMatrix, projectionMatrix );

    result.position = mul( original.position, worldViewProjectionMatrix );
    result.normal = -normalize( mul(_normal, worldMatrix) ); 

    result.textureCoords = original.textureCoords;
    result.lightDir = normalize(presetLightDir);

    return result;
} 
```

虽然我认识到 lightDir 和 textureCoords 在我设置它们之前也可能为空，但 DirectX 实际上在该`Vertex original`参数中提供了哪些数据？

只是位置？我注意到它`float3 _normal:NORMAL`是作为一个单独的参数提供的，但是这个值也在`original`着色器的开头吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-03T11:59:27.933

我希望设置的数据是：

*   结果.位置

*   _普通的

并且由于 original.textureCoords 未设置，因此 result.textureCoords 很可能是垃圾。

它的工作方式是通过“类型名称：语义”，所以在你的情况下，“float4 position:POSITION;”

通常要发送到顶点着色器的数据只是在一行位置>纹理坐标>lightDir>等，并且您发送的数据应该保持这个顺序。

但是通过使用语义，您可以更改顺序。所以你发送的数据将填写一个 float3 POSITION 和一个 float3 NORMAL。（请注意，您请求的 float4 是 XYZW，其中 W = 1.0f）

Vertex 结构中还有一个“正常”这一事实并不重要，因为它被标记为 TEXTURECOORD2。

我希望这会有所帮助，尽管我可能不是很清楚。

# android - Android - 重用膨胀视图

> ID：11308591
> 
> 赞同：0
> 
> 时间：2012-07-03T10:01:54.613
> 
> 标签：android, layout-inflater

以下是我想重用的布局

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="wrap_content"
    android:layout_height="fill_parent"
    android:id="@+id/widget_layout"
    android:layout_weight="1"
    android:padding="5dip"
    android:layout_margin="2dip"
    android:background="@drawable/round_corners"
    android:orientation="vertical" >

    <TextView
        android:id="@+id/widget_title"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:hint="New Source"
        android:textStyle="bold" />

</LinearLayout> 
```

我在我的活动 onCreate 方法中使用它，如下所示

```
protected void onCreate(Bundle savedInstanceState) {
    // TODO Auto-generated method stub
    super.onCreate(savedInstanceState);
    setContentView(R.layout.widget_container_layout);
    LayoutInflater inflater =  getLayoutInflater();
    HorizontalScrollView news_scroll = (HorizontalScrollView)findViewById(R.id.news_scroll);
    LinearLayout newsContainer = (LinearLayout) inflater.inflate(R.layout.scroll_layout, null);
    TextView widgetTitle;
    LinearLayout widget_layout;

    for(int i = 0; i < 6; i++) {
        widget_layout = (LinearLayout) inflater.inflate(R.layout.widget_layout, 
        newsContainer).findViewById(R.id.widget_layout);
        widgetTitle = (TextView)(widget_layout.getChildAt(0));
        widgetTitle.setText("New Source " + i);
    }

    news_scroll.addView(newsContainer);
} 
```

因此，我将名为 widget_layout 的线性布局添加到我的 newsContainer 线性布局中 6 次。但是文本没有正确反映。

我希望看到 6 个文本框，其文本为

> 新来源 0 新来源 1 新来源 2 新来源 3 新来源 4 新来源 5

但我得到的输出是

> 新来源 5 新来源 0 新来源 0 新来源 0 新来源 0 新来源 0

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-03T11:34:39.563

中的所有 inflated `widget_layout`s`news_container`具有相同的 ID。看起来`findViewById`循环中没有返回最后添加的小部件，而只是返回了一些具有该 ID 的小部件。相反，尝试使用 null parent 为小部件充气，然后将其添加到容器中。像这样的东西：

```
for() {
    widget_layout = (LinearLayout) inflater.inflate(R.layout.widget_layout, null);
    widgetTitle...
    news_container.addView(widget_layout);
} 
```

检查 LinearLayout`addView`以获取更多信息和选项。

# ember.js - Ember 计算属性不起作用，是否启用了原型扩展？

> ID：11308597
> 
> 赞同：0
> 
> 时间：2012-07-03T10:02:19.690
> 
> 标签：ember.js

我使用来自 GitHub 存储库的最新 ember-latest.js。

当我尝试使用计算属性时，它不起作用。但是，当我使用`Ember.computed`它而不仅仅是一个函数时，它会起作用。

我想也许原型扩展被禁用了。但是`Em.EXTEND_PROTOTYPES`是`true`。那么为什么它不起作用呢？

[http://jsfiddle.net/Krutius/TmYuS/](http://jsfiddle.net/Krutius/TmYuS/)

**HTML / 车把**

```
<script type="text/x-handlebars" data-template-name="test">
    {{test}}
</script>​ 
```

**Javascript**

```
App = Em.Application.create({});

Em.View.create({
    templateName: 'test',
    test: function() {
        return("true")
    }
}).append();​ 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-03T10:10:49.173

要将函数标记为计算属性，您必须添加`.property()`到您的定义中，请参阅[http://jsfiddle.net/pangratz666/zssx4/](http://jsfiddle.net/pangratz666/zssx4/)：

```
Em.View.create({

    test: function() {
        return true;
    }.property()

}).append();​ 
```

[查看http://emberjs.com/documentation/#toc_ember-js-at-a-glance](http://emberjs.com/documentation/#toc_ember-js-at-a-glance)中的“计算属性”

# google-chrome - 在谷歌浏览器中创建书签校验和背后的逻辑

> ID：11308603
> 
> 赞同：5
> 
> 时间：2012-07-03T10:02:35.543
> 
> 标签：google-chrome, google-chrome-extension

如何在 chrome 书签文件中添加新的书签条目？我的要求是，我需要通过我的应用程序添加一个书签条目。请指定创建校验和（MD5）背后的逻辑。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-17T22:29:36.730

不管这样做的安全性/黑客性如何，方法如下：

1.  确保 Chrome 已关闭。
2.  删除（或重命名）`Bookmarks.bak`
3.  完全删除校验和条目`Bookmarks`
4.  `Bookmarks`将JSON编辑到您心中的内容
5.  重新打开 Chrome

在没有备份和校验和的情况下，Chrome 将使用新的 JSON 并生成新的校验和。

如果您想更无缝/不那么激进地执行此操作，您可以查看它们如何在原始源代码中生成校验和并实现相同的算法（参见[此处](https://chromium.googlesource.com/chromium/chromium/+/master/chrome/browser/bookmarks/bookmark_codec.cc)，第 57 行）。

当然，请记住，Google 可以更改可能破坏兼容性的内容。但是，这确实有效，我只是在我编写的 Java 应用程序中做到了。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2017-11-22T15:25:51.110

显然，这很骇人听闻，仅适用于知道自己在做什么的人，但是，由于 Chrome Mobile 不允许用户导出/导入自己的书签（不完全对用户友好！），有时别无选择 - 想象一下必须清理手动创建一个包含数千个条目的书签文件。

无论如何，这是一个有效的 Python 实现：

```
roots = ['bookmark_bar', 'other', 'synced']

def checksum_bookmarks(bookmarks):
    md5 = hashlib.md5()

    def checksum_node(node):
        md5.update(node['id'].encode())
        md5.update(node['name'].encode('utf-16le'))
        if node['type'] == 'url':
            md5.update(b'url')
            md5.update(node['url'].encode())
        else:
            md5.update(b'folder')
            if 'children' in node:
                for c in node['children']:
                    checksum_node(c)

    for root in roots:
        checksum_node(bookmarks['roots'][root])
    return md5.hexdigest() 
```

只要你只是添加书签，你可能没问题，但对于任何更复杂的事情（例如，进行重大清理、编辑和删除书签，尤其是在涉及多个设备时），请务必重置“Chrome 同步”，或者它会给你所有已删除的内容，以及每个更改的书签的额外副本：设置 -> 同步 -> 管理同步数据 -> 重置同步

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-07-03T12:06:47.517

我的建议：不要。这是类似黑客的行为。Chrome 的“API”中不包含书签文件，它可以在没有警告的情况下更改。我们不知道如果您在 Chrome 运行时更改文件会发生什么。Chrome 在每次写入之前都会读取该文件吗？还是在启动时只读取一次？配置文件和同步书签呢？

我建议在 Chrome 的扩展 API 中使用书签对象。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2021-06-12T01:51:24.983

这是 C# 解决方案：

```
public static string CalculateCheckSum(string bookmarksText)
{
    var bytes = new List<byte>();

    void DigestUrl(JToken url)
    {
        bytes.AddRange(Encoding.ASCII.GetBytes(url["id"].Value<string>()!));
        bytes.AddRange(Encoding.Unicode.GetBytes(url["name"].Value<string>()!));
        bytes.AddRange(Encoding.ASCII.GetBytes("url"));
        bytes.AddRange(Encoding.ASCII.GetBytes(url["url"].Value<string>()!));
    }

    void DigestFolder(JToken folder)
    {
        bytes.AddRange(Encoding.ASCII.GetBytes(folder["id"].Value<string>()!));
        bytes.AddRange(Encoding.Unicode.GetBytes(folder["name"].Value<string>()!));
        bytes.AddRange(Encoding.ASCII.GetBytes("folder"));

        foreach (var item in folder["children"])
        {
            if (item?["type"]?.Value<string>() == "folder")
            {
                DigestFolder(item);
            }
            else
            {
                DigestUrl(item);
            }
        }
    }

    var json = JToken.Parse(bookmarksText);

    DigestFolder(json["roots"]?["bookmark_bar"]);
    DigestFolder(json["roots"]?["other"]);
    DigestFolder(json["roots"]?["synced"]);

    using var md5 = new MD5CryptoServiceProvider();

    var result = md5.ComputeHash(bytes.ToArray());

    return BitConverter.ToString(result).Replace("-", "").ToLower();
} 
```

首先使用`File.ReadAllText`方法从`bookmarks`文件中读取所有文本，然后调用此方法。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2021-05-02T16:23:41.367

尽管帖子的年代久远，但对于那些寻求生成校验和的脚本的人来说，答案仍然是相关的。

这是我的 NodeJS 解决方案，灵感来自 Python 和 Chromium 源代码。

```
import { createHash } from 'crypto';

const regenChecksum = (roots) => {
    const digest = createHash('md5');
    const digestUrl = (url) => {
        digest.update(url['id'], 'ascii');
        digest.update(url['name'], 'utf16le');
        digest.update(Buffer.from('url'));
        digest.update(url['url'], 'ascii');
    };

    const digestFolder = (folder) => {
        digest.update(folder['id'], 'ascii');
        digest.update(folder['name'], 'utf16le');
        const bytes = Buffer.from('folder');
        digest.update(bytes);
        folder['children']?.forEach((child) => {
            updateDigest(child);
        });

    };

    const updateDigest = (node) => {
        node.type === 'folder' ? digestFolder(node) : digestUrl(node);
    };

    updateDigest(roots['bookmark_bar']);
    updateDigest(roots['other']);
    updateDigest(roots['synced']);
    return digest.digest('hex');
}; 
```

要点：[https ://gist.github.com/dcantu476/ac8d4ae63a6a22c6a6fda7d8f9fb3039](https://gist.github.com/dcantu476/ac8d4ae63a6a22c6a6fda7d8f9fb3039)

# ios - UITableView 滚动到内容大小内的部分

> ID：11308610
> 
> 赞同：2
> 
> 时间：2012-07-03T10:03:17.503
> 
> 标签：ios, ipad, uitableview, uiscrollview

我有一个包含 3 个部分的表格视图，“昨天，今天，明天”。当表格视图启动时，我希望“今天”部分成为最上面的可见部分。因此我使用这个功能：

```
[self.tableView scrollToRowAtIndexPath:[NSIndexPath indexPathForRow:0 inSection:1] atScrollPosition:UITableViewScrollPositionTop animated:NO]; 
```

当表格视图填充超出其内容大小时，这可以正常工作，因此它是可滚动的。问题是，例如，每个部分仅包含 1 个单元格。然后整个表将适合屏幕，因此上面的代码不会触发，因为它无论如何都会橡皮筋回来。

任何人都知道解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-03T10:50:38.823

尝试设置表格的 edgeInsets。这将按照您指定的偏移量开始绘制表格。

```
UIEdgeInsets edgeInsets = UIEdgeInsetsMake(someValue, 0, 0, 0);
self.tableView.contentInset = edgeInsets; 
```

你计算`someValue`的地方把桌子带到你想要的地方。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-11T11:41:41.437

我自己回答这个问题，因为没有任何想法。

根据我的理解，这是不可能实现的。如果可以，表格视图将尝试滚动到该行。使其工作的唯一方法是将内容大小设置为足够大以使表格滚动。

# java - IF 模板标签在 playframework2.0 中不起作用

> ID：11308611
> 
> 赞同：-1
> 
> 时间：2012-07-03T10:03:20.923
> 
> 标签：java, tags, playframework-2.0

我正在尝试使用 playframework 的 if 标签。但它不起作用，它显示的是浏览器中的原始#{if ...。我正在使用play2.0。如果播放标签有更新，在谷歌中找不到..有人可以帮我吗？我想知道它是否以@开头

这是标签

```
 #{if test }
     test
    #{/if} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-03T10:44:52.073

再次为这个愚蠢的问题感到抱歉！我总是忘记 playframework2.0 标签只是 scala 标签。现在我通过这样做得到了它：

```
 @if(alltags.isEmpty) {
     <h1>Nothing to display</h1>
    } else {
 @for(tags <- alltags) {
     <li><a>@tags</a></li>
         }
    } 
```

无论如何感谢您的意见..：D

# jquery - 使用自定义页面重新加载覆盖默认订单系统

> ID：11308613
> 
> 赞同：1
> 
> 时间：2012-07-03T10:03:36.697
> 
> 标签：jquery, datatables

我一直在将数据表与我们的在线应用程序集成在一起，虽然总体上给我留下了深刻的印象，但有些方法对我们不起作用，其中一种方法是对表列进行排序，遗憾的是我们的排序方法非常棘手并且要重新写这将是程序员最糟糕的噩梦。

目前在我们的表格上，您单击单元格标题，然后使用新的排序数据刷新页面，我的问题是如何覆盖默认方法并让它调用特定脚本？我已经尝试过 AjaxSource 方法，但这并没有按预期工作，希望重写排序而不是重写处理表格脚本的 2000 行数据会更容易。

我们目前正在使用以下内容创建数据表：

```
objDataTable = $jq('#table' + TABLETABDATA).dataTable( {
"sScrollY": 520,
"bJQueryUI": true,
"bInfo": false,
"bPaginate": false,
"bScrollCollapse": true,
"bProcessing": true,
"bServerSide": true,
"sAjaxSource": AJAXSOURCE,
"sServerMethod": "POST",
"fnServerParams": function ( aoData ) {
    if (extraparams.length > 0)aoData.push( extraparams );
},
"iDeferLoading": 57,
"bSortClasses": false,
"sDom" : '<"H"<"sitedrop">lfr>t<"F"<"excelexport"><"pagination">ip>',
"oLanguage": { "sSearch": "Filter: " }
} ); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-03T10:20:05.330

我将调用更改为以下内容，而是自己将链接添加到表标题行中，我相信有一种更优雅的方法可以做到这一点，所以如果有人能想出一个？

```
objDataTable = $jq('#table' + TABLETABDATA).dataTable( {
    "sScrollY": 520,
    "bJQueryUI": true, 
    "bInfo": false, 
    "bPaginate": false,
    "bScrollCollapse": true,
    "bProcessing": true,
    "iDeferLoading": 57, 
    "bSort" : false, 
    "sDom" : '<"H"<"sitedrop">lfr>t<"F"<"excelexport"><"pagination">ip>', 
    "oLanguage": { "sSearch": "Filter: " } 
} ); 
```

# sql - 当表有 DENY INSERT 时，为什么用触发器更新表

> ID：11308615
> 
> 赞同：0
> 
> 时间：2012-07-03T10:03:40.733
> 
> 标签：sql, sql-server, database, triggers

我有一个记录表`tbRecords`，其中也有一个审计表`tbRecordsAudit`。

审计表具有`DENY INSERT`特定的 AD 组和用于插入审计表的触发器。

我的问题是，尽管`DENY INSERT`在审计表上，一条记录仍然从触发器插入到其中。触发器也不使用`EXECUTE AS 命令。

我没有写这个，写的人正在复制数据库中审计表上的现有设置。似乎没有人理解为什么插入在审计表上工作。

我知道`INSERT`存储过程中的 a 可以取代 a `DENY INSERT`，它与触发器相同吗？

# php - Preg_replace 用于整数

> ID：11308617
> 
> 赞同：1
> 
> 时间：2012-07-03T10:03:55.427
> 
> 标签：php, mysql, pdo, integer

由于某种原因，当我`preg_replace()`用于存储电话号码的输入字段时，我无法将其存储到 MySQL 中。preg_replace 可以用于整数还是只能用于字符串？

我试图使在文本字段中输入字母成为不可能。有人可以提供一些见解吗？

```
$tel = $_POST['tel']; 
```

//当我使用preg_replace时，它不会将值存储在MySQL中

```
$tel = preg_replace($reg_num,'', $tel); 
```

...

```
 $st->bindParam(6, $tel, PDO::PARAM_INT); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-03T10:08:02.043

`preg_replace`将整数转换为字符串，并正确执行替换。但是，它将返回一个字符串，其中`bindParam`需要一个整数。

将电话号码存储为整数通常是不明智的，因为您会丢失任何前导“0”或任何“+”号（如果用于国际号码）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-03T10:08:50.360

我*认为*问题可能是 PDO 需要一个整数作为您的电话参数，而`$tel`变量包含一个字符串。请尝试：

```
$st->bindParam(6, int($tel), PDO::PARAM_INT); 
```

但是，您可能应该将电话号码存储为字符串（但这可能需要更改您的架构）：

```
$st->bindParam(6, $tel, PDO::PARAM_STR); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-03T10:13:05.637

如果您没有常规 exp.. 则只需使用 str_replace();

```
$tel = str_replace ($reg_num,'', $tel); 
```

# sql - 为什么这个 Persisted 字段计算不正确 - [FIELDA]='%BUILD%'

> ID：11308620
> 
> 赞同：-1
> 
> 时间：2012-07-03T10:04:16.513
> 
> 标签：sql, sql-server, persisted-column

我在 SQL Server 2008 中有一个持久字段。

```
(case when [FIELDA]='%BUILD%' then CONVERT([bit],(1),(0)) else CONVERT([bit],(0),(0)) end) 
```

FIELDA 可以包含 'LARGEBUILDING' 、 'BUILDING' 、 'BUILDING MAJOR'm，因此 BUILDING 可以是字符串中的任何位置。

当 FIELD A 包含“BUILD”时，持久化字段不会生成非“0”值，这是为什么呢？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-03T10:06:27.197

我应该使用：

```
[FIELDA]like'%BUILD%' 
```

# c++ - 计算序列1,3,8,22,60,164,448,1224...的第n项？

> ID：11308621
> 
> 赞同：-2
> 
> 时间：2012-07-03T10:04:22.037
> 
> 标签：c++, algorithm, math, sequence

> **可能重复：**
> [我想以 Order(1) 或 (nlogn) 的顺序生成序列 1,3,8,22,60 ,164 的第 n 项](https://stackoverflow.com/questions/11301992/i-want-to-generate-the-nth-term-of-the-sequence-1-3-8-22-60-164-in-order1-or)

我现在要做的是：

```
t1 = 1, t2 = 0,MOD = 1000000007;

for i = 1:n 

    t1_new = (2*(t1+t2)) % MOD;
    t2_new = t1;
    a[i] = (t1_new + t2_new) % MOD;   // where a[i] is the ith term mod p
    t1 = t1_new;
    t2 = t2_new;

return a[n]; // the required ans 
```

但这是一个 O(n) 的解决方案。

请只给我提示（请没有解决方案），以便我可以降低解决方案的复杂性。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-03T10:15:56.557

您可以使用以下事实。如果考虑矩阵

```
 (0 1)
A = (2 2) 
```

您可以使用 a [n] = A ^(n-2) * (1, 3)[1] （这里 (1,3) 是向量）和 [1] 表示向量的第二个坐标的事实。在这里，您可以对矩阵使用二进制求幂。分别考虑 n<=2 的情况。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-07-03T10:15:20.473

你根本不需要数组来实现这一点。

```
int n = 5;
int result = 0;

for (int i=0; i<n; ++i)
{
    int t1_new = (2*(t1+t2)) % MOD;
    int t2_new = t1;

    result = (t1_new + t2_new) % MOD;
    t1 = t1_new;
    t2 = t2_new;
}

int res = result; 
```

这样，您将获得第 n 个术语，而不是在 n 之前的全部。

# android - 分享意图 Android 中的 Instagram 选项

> ID：11308626
> 
> 赞同：4
> 
> 时间：2012-07-03T10:04:44.907
> 
> 标签：android, instagram

我正在开发一个应用程序，它将在不同的社交网站上共享内容。问题是我在分享意图时看不到 Instagram 选项。我可以看到蓝牙、邮件、消息等，但看不到 Instagram。我的设备上安装了 Instagram 应用程序。谁能告诉我这是什么问题？？

其次，有没有办法自定义共享意图中的选项？就像我想从中排除消息一样。是否可以？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-19T09:53:00.727

您好，我正在向 Instagram 发送一张图片：

```
Intent shareIntent = new Intent();
shareIntent.setAction(Intent.ACTION_SEND);
shareIntent.putExtra(Intent.EXTRA_STREAM, Uri.parse(MediaStore.Images.Media
.insertImage(getContentResolver(), source, title, description)));
shareIntent.setType("image/jpeg");
startActivity(Intent.createChooser(shareIntent,
getResources().getString(R.string.send_to))); 
```

这仅回答了问题的第一部分。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-02-11T06:32:09.083

如果您想在 instagram 上共享图像，则无需为此使用 Intent.createChooser，您可以使用

```
 shareIntent.setPackage("com.instagram.android"); 
```

# tomcat - 修改Tomcat下的java.util.logging.SimpleFormatter格式属性

> ID：11308633
> 
> 赞同：17
> 
> 时间：2012-07-03T10:05:03.170
> 
> 标签：tomcat, java.util.logging

我正在使用 Tomcat 7.0.28，在 Ubuntu 上的 OpenJDK 1.7 下运行，并试图修改 java.util.logging.SimpleFormatter 使用的格式化字符串。根据该类的 Javadocs，我可以指定属性 java.util.logging.SimpleFormatter.format 来更改格式。事实上，当我在 Eclipse 中运行我的 webapp 并在我的 logging.properties 文件中更改此属性时，它可以工作。

但是，当我将应用程序部署到 Tomcat 时，此属性似乎没有任何作用。我确信我的属性文件被正确读取，因为我对其所做的其他更改确实生效（我正在使用从文件中读取属性

```
LogManager.getLogManager().readConfiguration(new FileInputStream(file)) 
```

其中文件是通过我的 web.xml 文件中的参数配置的。我尝试将文件放在 WEB-INF/classes/logging.properties 中，但行为没有改变。

SimpleFormatter 的 Javadocs 指定如果属性文件和系统属性都指定格式字符串，则系统属性优先。我已验证未设置系统属性

```
context.log ("Formatting system property is " + System.getProperty("java.util.logging.SimpleFormatter.format")); 
```

在 ServletContextListener.contextInitialized 方法中。

这是我的完整日志记录属性文件

```
handlers=java.util.logging.ConsoleHandler

#  Default logging level for root logger
.level=FINE

#  Set the level for the ConsoleHandler
java.util.logging.ConsoleHandler.level=FINE
java.util.logging.ConsoleHandler.formatter=java.util.logging.SimpleFormatter
java.util.logging.SimpleFormatter.format=[%1$tF %1$tr] %3$s %4$s:  %5$s %n 
```

我已经尝试了所有我能想到的方法，包括修改 TOMCAT/conf 和 JRE_HOME/lib 目录中的 logging.properties。似乎没有任何区别。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2014-12-10T02:06:09.037

感谢 nolan6000 指出[的错误报告](https://issues.apache.org/bugzilla/show_bug.cgi?id=55052)中的信息，我终于可以使用 tomcat-juli 进行此操作。

代替：

```
java.util.logging.SimpleFormatter.format=%4$s: %5$s [%1$tc]%n 
```

它一定要是：

```
1catalina.java.util.logging.SimpleFormatter.format=%4$s: %5$s [%1$tc]%n 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2013-02-04T16:13:05.213

[java.util.logging.SimpleFormatter.format](http://docs.oracle.com/javase/7/docs/api/java/util/logging/SimpleFormatter.html) 确实被记录为可在 logging.properties 中设置 - 这对我也不起作用 - 或作为命令行参数（java选项）。

命令行参数似乎对我有用。因为 $JAVA_OPTS 变量正在经历如此多的篡改并最终进入 eval，这就是我解决它的方法（在 Debian，java 1.7.0_07，apache-tomcat-7.0.30）

**$CATALINA_HOME/bin/catalina.sh（第 230 行）：**

```
JAVA_OPTS="$JAVA_OPTS \"-Djava.util.logging.SimpleFormatter.format=%1\\\$tY-%1\\\$tm-%1\\\$td %1\\\$tH:%1\\\$tM:%1\\\$tS.%1\\\$tL %4\\\$s %3\\\$s %5\\\$s%6\\\$s%n\"" 
```

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2013-06-23T20:21:33.623

您可能正在目睹[这个错误](https://issues.apache.org/bugzilla/show_bug.cgi?id=55052)。

从 Tomcat 版本 7.0.41 和 6.0.38 开始，该错误已得到修复。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-11-15T03:13:24.170

不知道这是否能解决您的问题，但可能值得一试。我看到了相同的行为，尽管在我的情况下，我是以编程方式进行日志设置而不是使用属性。事实证明，java.util.logging.SimpleFormatter.format 的属性值需要在构造（在我的情况下）FileHandler 之前设置。我在构造 FileHandler 之后设置它，但在构造 SimpleFormatter 之前。我想知道，在您的属性文件中，在定义任何 Handler 属性之前定义 java.util.logging.SimpleFormatter.format 是否会解决问题。

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2015-09-27T00:21:29.050

在默认的 Tomcat 8 JULI 记录器中使用格式化程序模式需要这个，您可以将参数放入全局`$tomcat/conf/logging.properties`或 webapp 特定`$tomcat/webapps/myapp/WEB-INF/classes/logging.properties`文件。

这是我的全局文件，其中还禁用了 manager-webapp 日志文件。记录线是：
`2015-09-23 17:32:11 INFO org.apache.catalina.startup.Catalina Server startup in 1028 ms`

```
#handlers = 1catalina.org.apache.juli.AsyncFileHandler, 2localhost.org.apache.juli.AsyncFileHandler, 3manager.org.apache.juli.AsyncFileHandler, 4host-manager.org.apache.juli.AsyncFileHandler, java.util.logging.ConsoleHandler
handlers = 1catalina.org.apache.juli.AsyncFileHandler, 2localhost.org.apache.juli.AsyncFileHandler, java.util.logging.ConsoleHandler

.handlers = 1catalina.org.apache.juli.AsyncFileHandler, java.util.logging.ConsoleHandler

# formatter attributes = date, source, logger, level, message, thrown
java.util.logging.SimpleFormatter.format = %1$tF %1$tT %4$s %3$s %5$s%6$s%n

1catalina.org.apache.juli.AsyncFileHandler.level = FINE
1catalina.org.apache.juli.AsyncFileHandler.directory = ${catalina.base}/logs
1catalina.org.apache.juli.AsyncFileHandler.prefix = catalina.
1catalina.org.apache.juli.AsyncFileHandler.encoding = UTF-8
1catalina.org.apache.juli.AsyncFileHandler.formatter = java.util.logging.SimpleFormatter
#1catalina.org.apache.juli.AsyncFileHandler.bufferSize = 2048

2localhost.org.apache.juli.AsyncFileHandler.level = FINE
2localhost.org.apache.juli.AsyncFileHandler.directory = ${catalina.base}/logs
2localhost.org.apache.juli.AsyncFileHandler.prefix = localhost.
2localhost.org.apache.juli.AsyncFileHandler.encoding = UTF-8
2localhost.org.apache.juli.AsyncFileHandler.formatter = java.util.logging.SimpleFormatter
#2localhost.org.apache.juli.AsyncFileHandler.bufferSize = 2048

#3manager.org.apache.juli.AsyncFileHandler.level = FINE
#3manager.org.apache.juli.AsyncFileHandler.directory = ${catalina.base}/logs
#3manager.org.apache.juli.AsyncFileHandler.prefix = manager.

#4host-manager.org.apache.juli.AsyncFileHandler.level = FINE
#4host-manager.org.apache.juli.AsyncFileHandler.directory = ${catalina.base}/logs
#4host-manager.org.apache.juli.AsyncFileHandler.prefix = host-manager.

java.util.logging.ConsoleHandler.level = FINE
#java.util.logging.ConsoleHandler.formatter = org.apache.juli.OneLineFormatter
java.util.logging.ConsoleHandler.formatter = java.util.logging.SimpleFormatter

############################################################
# Facility specific properties.
# Provides extra control for each logger.
############################################################

org.apache.catalina.core.ContainerBase.[Catalina].[localhost].level = INFO
org.apache.catalina.core.ContainerBase.[Catalina].[localhost].handlers = 2localhost.org.apache.juli.AsyncFileHandler

#org.apache.catalina.core.ContainerBase.[Catalina].[localhost].[/manager].level = INFO
#org.apache.catalina.core.ContainerBase.[Catalina].[localhost].[/manager].handlers = 3manager.org.apache.juli.AsyncFileHandler

#org.apache.catalina.core.ContainerBase.[Catalina].[localhost].[/host-manager].level = INFO
#org.apache.catalina.core.ContainerBase.[Catalina].[localhost].[/host-manager].handlers = 4host-manager.org.apache.juli.AsyncFileHandler

# For example, set the org.apache.catalina.util.LifecycleBase logger to log
# each component that extends LifecycleBase changing state:
#org.apache.catalina.util.LifecycleBase.level = FINE

# To see debug messages in TldLocationsCache, uncomment the following lines
#org.apache.jasper.compiler.TldLocationsCache.level = FINE
#org.apache.jasper.servlet.TldScanner.level=FINE 
```

# android - 在 Android P2P 中检索 NFC Id

> ID：11308636
> 
> 赞同：0
> 
> 时间：2012-07-03T10:05:11.443
> 
> 标签：android, nfc, nfc-p2p

据我所知，每个 NFC 标签都有一个唯一的 ID。我假设每个支持 NFC 的手机的芯片也有一个唯一的 ID。

将 2 部启用了 NFC 的手机贴在一起时，*是否有可能具有特定应用程序的手机获取另一部手机的 NFC id，而该手机**没有为此安装额外的应用程序？***

文档没有提到这些，互联网上可用的资源似乎也是如此。我只想得到最后的是/否/没人知道。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-03T20:32:35.563

如果 Android 应用收到 Android Beam Intent，则该 Intent 将包含一个“假”`Tag`对象。尽管您可以`getId()`在该对象上调用该方法，但您不会获得发送 Android Beam 消息的 NFC 对等设备的 ID。

但是，即使您可以获取其他设备的 NFC ID（您是对的：它有一个），它也没有多大用处。通常（取决于 NFC 芯片）此 ID 将随机生成，并且每次手机通过 NFC 连接时都会有所不同。

# c# - 如何在 lambda 表达式中使用 IDisposable？

> ID：11308640
> 
> 赞同：3
> 
> 时间：2012-07-03T10:05:42.120
> 
> 标签：c#, linq, lambda

我正在对项目进行一些代码分析并实施有意义的建议。一个建议是执行以下操作：

> CA2000：Microsoft.Reliability：在方法“Service.ParseConfigurationFile()”中，在对对象“new SecureString()”的所有引用超出范围之前调用 System.IDisposable.Dispose

违规行如下：

```
 Password = me.Password.Aggregate(new SecureString(), (secureString, c) => { secureString.AppendChar(c); return secureString; }) 
```

关于如何正确执行此操作的任何想法？我已经用下面的行替换了上面的内容，但我认为它不正确，因为它仍然会导致代码分析消息出现：

```
Password = me.Password.Aggregate(new SecureString(), (secureString, c) => { using (secureString) {secureString.AppendChar(c); return secureString;} }) 
```

编辑：根据@Jon 下面的评论 objectInstance 是一个名为 MailboxElement（我）的自定义类的实例。它通过配置文件中的多个自定义部分，如下所示：

```
foreach (MailboxElement me in mailboxesSection.Mailboxes)
{
      MailboxInformation mailboxInformation = new MailboxInformation
      {
                    ExchangeServerWebServiceUrl = me.ExchangeServerWebServiceUrl,
                    MailboxFriendlyName = me.FriendlyName,
                    UserName = me.UserName,
                    Password = me.Password.Aggregate(new SecureString(), (secureString, c) => { secureString.AppendChar(c); return secureString; }),
                    MailboxToAccess = me.MailboxToAccess
      };

      // Do stuff with mailboxInformation here
} 
```

`MailboxElement`是一个密封类，它实现了具有上述所有属性的[ConfigurationElement 。](http://msdn.microsoft.com/en-us/library/system.configuration.configurationelement.aspx)

`MailboxInformation`定义如下：

```
public class MailboxInformation
{
   public string MailboxFriendlyName { get; set; }
   public string UserName { get; set; }
   public SecureString Password { get; set; }
   public string ExchangeServerWebServiceUrl { get; set; }
   public string MailboxToAccess { get; set; }
   public string InboxFolderId { get; set; }
   public string SentItemsFolderId { get; set; }
   public bool MailboxSettingsDiscovered { get; set; }
} 
```

我希望这能让事情更清楚......

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-03T10:29:37.283

您正在从 Aggregation 返回 IDispoable，因此您需要处理它或简单地重新分配给 secureString

```
using (var secureString = new SecureString()) {
    secureString = objectInstance.Password.Aggregate((secureString, c) => { secureString.AppendChar(c); return secureString; }){
} 
```

**问题更新后**编辑****

 **由于您的`MailboxInformation`对象现在获得了 IDisposable 的所有权，因此`MailboxInformation`它本身应该是 IDisposable 并处置它拥有的一次性用品

所以实现将是（类似于您的评论）

```
public class MailboxInformation : IDisposeable
{
   //...
   public SecureString Password { get; set; }
   //...
   void IDisposable.Dispose() {
      this.Password.Dispose();
   }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-03T10:10:14.890

试试这种格式：

```
using (var secureString = new SecureString()) {
    Password = objectInstance.Password.Aggregate([...])
} 
```

我相信最好将整个事情包含在一个`using`声明中。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-03T10:12:49.623

通过此链接，这是一条不规则的规则，无需考虑该规则，请忽略该规则。

[CA2000 将对象引用传递给 C# 中的基本构造函数](https://stackoverflow.com/questions/2687398/ca2000-passing-object-reference-to-base-constructor-in-c-sharp)

[http://www.debugging.com/bug/24060](http://www.debugging.com/bug/24060)**

# java - Json数据解析错误

> ID：11308644
> 
> 赞同：1
> 
> 时间：2012-07-03T10:06:22.360
> 
> 标签：java, json, extjs, gson

在这里，我在向 java 提交网格时遇到问题，我收到日期解析错误。如何解决此错误。请帮我。以下是我的回应。

这是回应

```
{"gridData":[{"id":170,"afs":5,"date":"04-22-2011","qty":12,"quantity":11,"shift":"A","sourceLocation":"Office","time":"12:00:00 AM"},{"id":171,"afs":6,"date":"04-22-2011","qty":12,"quantity":11,"shift":"B","sourceLocation":"Office","time":"12:00:00 AM"},{"id":172,"afs":7,"date":"04-22-2011","qty":12,"quantity":11,"shift":"C","sourceLocation":"Office","time":"12:00:00 AM"},{"id":173,"afs":8,"date":"04-22-2011","qty":12,"quantity":11,"shift":"A","sourceLocation":"Office","time":"12:00:00 AM"},{"id":174,"afs":9,"date":"04-22-2011","qty":12,"quantity":11,"shift":"B","sourceLocation":"Office","time":"12:00:00 AM"},{"id":175,"afs":10,"date":"04-22-2011","qty":12,"quantity":11,"shift":"C","sourceLocation":"Office","time":"12:00:00 AM"},{"id":176,"afs":11,"date":"04-22-2011","qty":12,"quantity":11,"shift":"A","sourceLocation":"Office","time":"12:00:00 AM"},{"id":177,"afs":12,"date":"04-22-2011","qty":12,"quantity":11,"shift":"B","sourceLocation":"Office","time":"12:00:00 AM"},{"id":178,"afs":13,"date":"04-22-2011","qty":12,"quantity":11,"shift":"C","sourceLocation":"Office","time":"12:00:00 AM"},{"id":179,"afs":14,"date":"04-22-2011","qty":12,"quantity":11,"shift":"A","sourceLocation":"Office","time":"12:00:00 AM"},{"id":180,"afs":15,"date":"04-22-2011","qty":12,"quantity":11,"shift":"B","sourceLocation":"Office","time":"12:00:00 AM"},{"id":181,"afs":16,"date":"04-22-2011","qty":12,"quantity":11,"shift":"C","sourceLocation":"Office","time":"12:00:00 AM"},{"id":182,"afs":17,"date":"04-22-2011","qty":12,"quantity":11,"shift":"A","sourceLocation":"Office","time":"12:00:00 AM"}],"success":true} 
```

这是网格列配置

```
columns: [
            {
                xtype: 'gridcolumn',
                dataIndex: 'afs',
                text: 'AFS'
            },
            {
                xtype: 'gridcolumn',
                dataIndex: 'date',
                text: 'Date',
                flex :1
            }] 
```

这是我的日期 POJO 类配置

```
@JsonSerialize(using=JsonDateSerializer.class)
public Date getDate() {
    return this.date;
} 
```

这是我的控制器类

```
 public@ResponseBody String saveGridData(HttpServletRequest request,@RequestParam("grid") String gridData){
    System.out.println("Group Name :"+request.getParameter("groupName"));
    JSONPObject json = new JSONPObject("encode", gridData);
    System.out.println(gridData);
    NewSand[] newSands =    getJsonString(gridData, NewSand[].class);
    for(NewSand newSand: newSands){
        System.out.println("Shift --> " + newSand.getShift());
    }
    return "true";
}

private static <T> T getJsonString(String json,  Class<T> type) throws JsonParseException{

    GsonBuilder gsonBuilder = new GsonBuilder();
    gsonBuilder.serializeNulls();
    JsonSerializer<Date> ser = new JsonSerializer<Date>() {
          public JsonElement serialize(Date src, Type typeOfSrc, JsonSerializationContext 
                     context) {
            return src == null ? null : new JsonPrimitive(src.getTime());
          }
        };

        JsonDeserializer<Date> deser = new JsonDeserializer<Date>() {
          public Date deserialize(JsonElement json, Type typeOfT,JsonDeserializationContext context) throws JsonParseException {
            return json == null ? null : new Date(json.getAsLong());
          }
        };
        Gson gson = gsonBuilder.registerTypeAdapter(Date.class, ser).registerTypeAdapter(Date.class, deser).create();
    //Gson gson = gsonBuilder.create();
    return (T) gson.fromJson(json, type);   
} 
```

异常代码是：

```
 Jul 03, 2012 2:55:46 PM org.apache.catalina.core.StandardWrapperValve invoke
SEVERE: Servlet.service() for servlet [appServlet] in context with path [/Login] threw  exception [Request processing failed; nested exception is java.lang.NumberFormatException: For  input string: "04-22-2011"] with root cause
 java.lang.NumberFormatException: For input string: "04-22-2011"
at java.lang.NumberFormatException.forInputString(NumberFormatException.java:65)
at java.lang.Long.parseLong(Long.java:441)
at java.lang.Long.parseLong(Long.java:483)
at com.google.gson.JsonPrimitive.getAsLong(JsonPrimitive.java:233)
at com.mpm.common.controller.DataUploadController$2.deserialize(DataUploadController.java:248)
at com.mpm.common.controller.DataUploadController$2.deserialize(DataUploadController.java:1)
at com.google.gson.TreeTypeAdapter.read(TreeTypeAdapter.java:58)
at com.google.gson.internal.bind.ReflectiveTypeAdapterFactory$1.read(ReflectiveTypeAdapterFactory.java:93)
at com.google.gson.internal.bind.ReflectiveTypeAdapterFactory$Adapter.read(ReflectiveTypeAdapterFactory.java:172)
at com.google.gson.internal.bind.TypeAdapterRuntimeTypeWrapper.read(TypeAdapterRuntimeTypeWrapper.java:40)
at com.google.gson.internal.bind.ArrayTypeAdapter.read(ArrayTypeAdapter.java:72)
at com.google.gson.Gson.fromJson(Gson.java:791)
at com.google.gson.Gson.fromJson(Gson.java:757)
at com.google.gson.Gson.fromJson(Gson.java:706)
at com.google.gson.Gson.fromJson(Gson.java:678)
at com.mpm.common.controller.DataUploadController.getJsonString(DataUploadController.java:253)
at com.mpm.common.controller.DataUploadController.saveGridData(DataUploadController.java:228)
at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57)
at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
at java.lang.reflect.Method.invoke(Method.java:601)
at org.springframework.web.bind.annotation.support.HandlerMethodInvoker.invokeHandlerMethod(HandlerMethodInvoker.java:176)
at org.springframework.web.servlet.mvc.annotation.AnnotationMethodHandlerAdapter.invokeHandlerMethod(AnnotationMethodHandlerAdapter.java:436)
at org.springframework.web.servlet.mvc.annotation.AnnotationMethodHandlerAdapter.handle(AnnotationMethodHandlerAdapter.java:424)
at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:790)
at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:719)
at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:669)
at org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:585)
at javax.servlet.http.HttpServlet.service(HttpServlet.java:641)
at javax.servlet.http.HttpServlet.service(HttpServlet.java:722)
at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:304)
at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:210)
at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:224)
at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:175)
at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:472)
at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:164)
at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:100)
at org.apache.catalina.valves.AccessLogValve.invoke(AccessLogValve.java:929)
at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:118)
at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:405)
at org.apache.coyote.http11.Http11Processor.process(Http11Processor.java:279)
at org.apache.coyote.AbstractProtocol$AbstractConnectionHandler.process(AbstractProtocol.java:515)
at org.apache.tomcat.util.net.JIoEndpoint$SocketProcessor.run(JIoEndpoint.java:302)
at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1110)
at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:603)
at java.lang.Thread.run(Thread.java:722) 
```

我收到日期解析错误，请帮助我提前谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-03T10:17:49.793

错误很明显：`NumberFormatException: For input string: "04-22-2011"]`您传入的值应该是数字，但实际上是日期格式。

我认为这是你做的地方：`json.getAsLong()`，它希望有一个像 '12345654' 这样的字符串，但它得到的是日期字符串。

**编辑：**

而不是这样做：

```
new Date(json.getAsLong()) 
```

尝试：

```
new Date(json.getAsString()) 
```

# java - 在黑莓模拟器上运行 Web 服务时出错

> ID：11308647
> 
> 赞同：3
> 
> 时间：2012-07-03T10:06:31.623
> 
> 标签：java, web-services, blackberry, blackberry-jde

我正在尝试从我开发的 BlackBerry 应用程序访问 Web 服务。

但是，在运行应用程序时，我得到

> “应用程序错误 104 未捕获：NullPointerException”

我无法调试，出于某种奇怪的原因，我的调试器会在我开始调试后立即自动关闭。

关于可能是什么原因的任何建议？我想提一下，我已经收到了来自 BlackBerry 的三个 .csi 签名文件，但是每当我尝试对应用程序进行签名时，它都会失败：**代码签名注册请求中的签名信息长度不合适**。此错误可能是由于签署应用程序造成的吗？

这是我到目前为止所做的：

```
package mypackage;

import java.io.DataInputStream;
import java.io.DataOutputStream;
import java.io.IOException;
import java.io.InputStream;
import java.io.OutputStream;
import java.rmi.RemoteException;
import java.util.Hashtable;

import javacard.framework.UserException;

import javax.microedition.io.Connector;
import javax.microedition.io.HttpConnection;
import javax.microedition.location.Location;
import javax.microedition.location.LocationProvider;

import org.kobjects.base64.Base64;
import org.ksoap2.SoapEnvelope;
import org.ksoap2.serialization.SoapObject;
import org.ksoap2.serialization.SoapPrimitive;
import org.ksoap2.serialization.SoapSerializationEnvelope;
import org.ksoap2.transport.HttpTransport;
import org.xmlpull.v1.XmlPullParserException;

import net.rim.device.api.system.*;
import net.rim.device.api.ui.*;
import net.rim.device.api.ui.component.*;
import net.rim.device.api.ui.component.pane.TitleView;
import net.rim.device.api.ui.container.*;
import net.rim.device.api.ui.image.Image;
import net.rim.device.api.xml.jaxp.SAXParserImpl;

public class LoginTest extends UiApplication 
{

    public static void main(String[] args)  
    {
         //Create a new instance of the app
         //and start the app on the event thread.

        LoginTest app = new LoginTest();
        app.enterEventDispatcher();
    }

    public LoginTest()
    {
         //Display a new screen.
         pushScreen(new LoginTestScreen());
    }

}

//Create a new screen that extends MainScreen and provides
//behaviour similar to that of other apps.

final class LoginTestScreen extends MainScreen
{
   //declare variables for later use
   private InfoScreen _infoScreen;
   private ObjectChoiceField choiceField;
   private int select;
   BasicEditField username;
   PasswordEditField passwd;
   CheckboxField checkBox1;
   ButtonField loginBtn;

   public LoginTestScreen()
   {
        //Invoke the MainScreen constructor.

        super();

        //Add a screen title.

        setTitle("Track24ELMS");

        LabelField login = new LabelField("ELMS Login", LabelField.FIELD_HCENTER); 
        login.setFont(Font.getDefault().derive(Font.BOLD, 30));
        login.setMargin(10, 0, 20, 0); //To leave some space from top and bottom

        HorizontalFieldManager user = new HorizontalFieldManager();
        user.setMargin(0, 0, 10, 0);
        HorizontalFieldManager pass = new HorizontalFieldManager();
        pass.setMargin(0, 0, 20, 0);
        HorizontalFieldManager checkbox = new HorizontalFieldManager();
        checkbox.setMargin(0, 0, 30, 0);
        HorizontalFieldManager btns = new HorizontalFieldManager(HorizontalFieldManager.FIELD_HCENTER);

        LabelField usernameTxt = new LabelField("Username :");
        LabelField passwordTxt = new LabelField("Password :");

        username = new BasicEditField();
        passwd = new PasswordEditField();

        loginBtn = new ButtonField("Login", ButtonField.CONSUME_CLICK); 
        loginBtn.setChangeListener(new LoginButtonListener());

        checkBox1 = new CheckboxField("Remember me",false);

        user.add(usernameTxt);
        user.add(username);
        pass.add(passwordTxt);
        pass.add(passwd);
        //checkbox.add(checkBox1);
        btns.add(loginBtn);
        add(login);
        add(user);
        add(pass);
        add(checkBox1);
        add(btns);
   }

   private class LoginButtonListener implements FieldChangeListener {
       public void fieldChanged(Field field, int context) {
       //Open a new screen
       String uname = username.getText();
       String pwd = passwd.getText();

       //If there is no input
       if (uname.length() == 0 || pwd.length()==0)
       Dialog.alert("One of the textfield is empty!");
       else 
       {
           final String URL = "http://xxx.xxx.com/xxx/xxx.asmx";
           final String METHOD_NAME = "ValidateCredentials";
           final String NAMESPACE = "http://tempuri.org/";
           final String SOAP_ACTION = NAMESPACE+METHOD_NAME;
           //final String URL = "http://prerel.track24elms.com/Android/T24AndroidLogin.asmx/ValidateCredentials";

           SoapObject resultRequestSOAP = null;
           HttpConnection httpConn = null;
           HttpTransport httpt;
           System.out.println("The username" + uname + "password" + pwd );
           SoapObject request = new SoapObject(NAMESPACE, METHOD_NAME);
           request.addProperty("Username", "abc");//First parameter is tag name provided by web service
           request.addProperty("Password", "xyz");
           System.out.println("The request is=======" + request.toString());
           SoapSerializationEnvelope envelope = new SoapSerializationEnvelope(SoapEnvelope.VER11);
           envelope.bodyOut = request;
           envelope.dotNet = true;
           envelope.encodingStyle = SoapSerializationEnvelope.XSD;
           envelope.setOutputSoapObject(request);
           System.out.println("The envelope has the value++++"+ envelope.toString());

           /* URL+  Here you can add paramter so that you can run on device,simulator etc. this will work only for wifi */
           httpt = new HttpTransport(URL+ ";deviceside=true;ConnectionUID=S TCP-WiFi");
           httpt.setXmlVersionTag("<?xml version=\"1.0\" encoding=\"UTF-8\"?>");
           httpt.debug = true;
           try
           {
               System.out.println("SOAP_ACTION    ==   " + SOAP_ACTION);
               httpt.call(SOAP_ACTION, envelope);
               System.out.println("the tranport" + httpt.toString());
               resultRequestSOAP = (SoapObject) envelope.bodyIn;
               System.out.println("result    ==   " + resultRequestSOAP);            
           }
           catch (IOException e) {
               // TODO Auto-generated catch block
               System.out.println("The exception is IO==" + e.getMessage());
           } catch (XmlPullParserException e) {

               // TODO Auto-generated catch block
               System.out.println("The exception xml parser example==="
                       + e.getMessage());
           }
           System.out.println( resultRequestSOAP);
           if(resultRequestSOAP.equals("credentialaccepted"))
           {
           UiApplication.getUiApplication().pushScreen(new InfoScreen()); //Open a new Screen
           }
           else
           {
               System.out.println("Login details not valid");
           }
         }
      }

   };

   //To display a dialog box when a BlackBerry device user
   //closes the app, override the onClose() method.

   public boolean onClose()
   {
        Dialog.alert("Goodbye!");
        System.exit(0);
        return true;
   }

   //Create a menu item for BlackBerry device users to click to see more 
   //information about the city they select.

   private MenuItem _viewItem = new MenuItem("More Info", 110, 10) 
   {
        public void run() 
        {
             //Store the index of the city the BlackBerry device user selects

             select = choiceField.getSelectedIndex();

             //Display a new screen with information about the
             //city the BlackBerry device user selects

             _infoScreen = new InfoScreen();
             UiApplication.getUiApplication().pushScreen(_infoScreen);
        }
   };

   //Create a menu item for BlackBerry device users to click to close 
   //the app.

   private MenuItem _closeItem = new MenuItem("Close", 200000, 10) 
   {
        public void run()
        {
             onClose();
        }
   };

   //Create an inner class for a new screen that displays
   //information about the city a BlackBerry device user selects.

   private class InfoScreen extends MainScreen
   {
        public InfoScreen() 
        {
             super();

             setTitle("Itinerary");

             LabelField login = new LabelField("Employee Itinerary", LabelField.FIELD_HCENTER); 

             Bitmap bitmap = Bitmap.getBitmapResource("img1.jpg");
             EditField statusMsg = new EditField("Status Message", "Update status here");

        }
   }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-19T21:43:08.210

## 代码签名

正如 Th0rndike 所说，您无需签署代码即可在模拟器中运行，所以这不是您的问题（在模拟器中）。

## 让调试器再次工作

此外，如果您甚至无法设置断点或单步执行您自己的 Java 源代码，那么：

1.  在模拟器中，像在普通设备上一样删除应用程序。
2.  重启模拟器。
3.  再次尝试从 Eclipse 运行。如果它仍然不起作用：
4.  在 Eclipse 中，从**BlackBerry**菜单中选择**Clean Simulator**，然后选择您正在使用其模拟器的 JRE 包（例如 5.0.0、6.0.0 等）
5.  再次尝试从 Eclipse 运行。如果它仍然不起作用：
6.  我会尝试重新安装 Eclipse 和 BlackBerry Java 插件（**一起**安装......而不是安装非 BlackBerry Eclipse IDE，然后单独添加 BlackBerry 插件）。[您可以从这个站点](https://developer.blackberry.com/java/download/eclipse/)下载完整的 Eclipse+BlackBerry 插件。

请记住，您将**无法**进入*作为*Java 运行时和 RIM 库一部分的 Java 代码。您没有这些的 Java*源代码*，只有二进制库。所以，如果你有这行代码：

```
String s1 = "afdafsdasdf";
String substring = s1.substring(0, 10);  // <- can not step IN, can step OVER
MyWidget mw = new MyWidget();
mw.foo();                                // <- can step IN, or OVER 
```

您将无法进入第二行，因为`substring(int,int)`不是您的代码。但是，您应该能够在`mw.foo()`没有看到**“未找到源”**错误的情况下进入，假设`MyWidget.java`是您的 Java 源文件之一。

## 查找抛出异常的位置

如果您正在运行，并且无法找出抛出未捕获`NullPointerException` （或其他异常）的位置，[请参阅此答案](https://stackoverflow.com/a/2632620/119114)。基本上，只需将此调试代码放在您的主程序中（例如 MyApp.java）：

```
public static void main(String[] args)
{
    try {
        Application theApp = new MyApp();
        theApp.enterEventDispatcher();
    } catch (Throwable t) {
        t.printStackTrace();
    }
} 
```

然后，在`Throwable`被捕获后，检查 Eclipse**控制台**窗口中的堆栈跟踪信息，显示异常来自何处。然后，再次调试，尝试进入该代码，看看有什么问题。

但是，获得功能正常的调试器是生产性开发的绝对要求。在调试对您有用之前，不要为其他问题烦恼。

# jquery - 悬停时突出显示 GridView 的行 - 如何将 GridView 作为参数传递到单独的 JavaScript 文件中？

> ID：11308649
> 
> 赞同：0
> 
> 时间：2012-07-03T10:06:40.013
> 
> 标签：jquery, asp.net

我正在学习 jQuery，我正在练习。 **我的任务是：在悬停时突出显示 GridView 行** 我在 .aspx 页面中编写了以下代码

```
<script src="Scripts/HighlightGridViewRow.js" type="text/javascript"></script>

<script type="text/javascript">
    $(document).ready(function() {
        $("#<%=GridView1.ClientID%> tr").hover(
function() {
    $(this).addClass("highlight");
},
function() {
    $(this).removeClass("highlight");
});
    });
</script> 
```

**后面的代码中没有 jQuery 特定的代码。**

如何将我在 .aspx 页面中编写的 javascript 代码移动到一个单独的 .js 文件中？

提前致谢，

阿肖克库马尔。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-03T10:11:24.087

将 JQuery 悬停在函数上并将其放置在 JS 文件上。

通过将 clientID 作为参数传递来调用该函数。

做这样的事情。

调用功能在`.aspx`页面上：-

```
highLight(<%=GridView1.ClientID%>); 
```

函数在**JS**文件中：-

```
function highLight(cid)
{   
    $("#"+cid+" tr").hover(
        function() {     
            $(this).addClass("highlight"); 
        }, 
        function() {     
            $(this).removeClass("highlight"); 
        }
    );
} 
```

# ruby-on-rails - 无法加载此类文件——rails 3.2.3 中的 lib/api 葡萄

> ID：11308651
> 
> 赞同：3
> 
> 时间：2012-07-03T10:06:48.447
> 
> 标签：ruby-on-rails, ruby-on-rails-3, api

我正在尝试在我的 rails 3.2.3 应用程序中运行**[葡萄宝石。](https://github.com/intridea/grape)**

我正在关注本教程：

[http://martinciu.com/2011/01/mounting-grape-api-inside-rails-application.html](http://martinciu.com/2011/01/mounting-grape-api-inside-rails-application.html)

但我收到此错误：

```
cannot load such file -- lib/api 
```

我已经`config.autoload_paths += %W(#{config.root}/lib)`在我的`application.rb`文件中添加了。

我也添加`require "lib/api"`到我的`routes.rb`文件中

**少了什么东西？**

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-03T14:55:30.947

问题已解决。

如果您是新手，本教程[http://martinciu.com/2011/01/mounting-grape-api-inside-rails-application.html](http://martinciu.com/2011/01/mounting-grape-api-inside-rails-application.html)会产生误导。

例如，**lib 文件夹**中的文件名和**模块名称**应该在 ruby​​ 中匹配，所以如果你有`MyApp`，它应该在`lib/my_app.rb`并且它应该在加载路径上。

正确的方法是：

```
#lib/my_app.rb
module MyApp
  class API < Grape::API
    prefix "api"
    resource "posts" do
      get do
        Post.all
      end
      get ':id' do
        Post.find(params[:id])
      end
    end

  end
end 
```

您必须`config/application.rb`在下一个自动加载中添加：

```
config.autoload_paths += %W(#{config.root}/lib) 
```

最后，您必须将其添加到您的**routes.rb**文件中：

**挂载 MyApp::API => "/"**

感谢[丹尼尔·杜布罗夫金](https://groups.google.com/forum/?fromgroups#!topic/ruby-grape/ixIvQ1nXduo)

# asp.net-mvc - Razor 如何创建一个 CheckBox 并使其成为 READONLY？

> ID：11308661
> 
> 赞同：33
> 
> 时间：2012-07-03T10:07:24.820
> 
> 标签：asp.net-mvc, asp.net-mvc-3, razor

我正在使用 MVC 3 和 Razor

目前我正在使用

```
@model MyProject.ViewModels.MyViewModel

    @foreach (var item in Model.MyProperty)
{  
    <tr>
        <td>
            @Html.ActionLink("Edit", "Edit", new { id = item.AdvSlotId }) |
            @Html.ActionLink("Details", "Details", new { id = item.AdvSlotId }) |
            @Html.ActionLink("Delete", "Delete", new { id = item.AdvSlotId })
        </td>
        <td>
            @item.AdvSlotId
        </td>
        <td>
            @item.Name
        </td>
        <td>
            @item.Description
        </td>
        <td>
             @Html.CheckBox(item.IsPublished, new { @disabled = "disabled" })
        </td>
        <td>
            @item.Notes
        </td>
    </tr>    
} 
```

视图模型：

```
namespace MyProject.ViewModels
{
    public class MyViewModel
    {
        public MyViewModel(List<AdvSlot> advSlots)
        {
            MyProperty= advSlots;
        }

        public List<AdvSlot> MyProperty { get; set; }

    }
} 
```

在我的模型中显示属性的复选框。正如我所做的那样是错误的，所以我只能显示像 TRUE 这样的文本。

你能告诉我如何用 Razor 创建 CheckBox 吗？我还需要将其设置为 READONLY。

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：43
> 
> 时间：2012-07-03T10:15:18.070

应该是这样的：

```
@Html.CheckBoxFor(m => m.IsPublished, new { @disabled = "disabled" }) 
```

更新：

假设您的类`AdvSlot`包含`IsPublished`您可以在循环中编写的属性：

```
<td>
    @Html.CheckBox(item.AdvSlotId + "_IsPublished", item.IsPublished, new { @disabled = "disabled" });
</td> 
```

* * *

## 回答 #2

> 赞同：30
> 
> 时间：2015-10-30T20:42:48.027

```
 @Html.CheckBoxFor(model => model.IsActive, new { onclick = "return false" }) 
```

这应该有效。但是我遇到了@disabled =“禁用”的问题。如果我默认选中该复选框并同时禁用该复选框，它将不会发布其值。在控制器上它会变成假的。使用“return false”用户将无法更改该值，并且它还将发布在加载时默认设置的值。

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2015-11-26T16:51:52.730

我正在使用 MVC4，你可以用一个简单的东西得到同样的效果

```
@Html.DisplayFor(m => m.IsPublished) 
```

无需关心选择*复选框*或自己设置*禁用*。不确定，如果这是 MVC4 中的一个新功能，那么它可能也适用于 MVC3。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-03T10:16:29.503

在您的 MyViewModel 中，您可以删除 setter ：

```
public bool IsPublished 
{
   get {
        //... get from db
       }
} 
```

并在您的视图中：

```
@Html.CheckBoxFor(m => m.IsPublished, new {@disabled="disabled"}) 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2020-09-07T03:36:18.663

我将添加我的案例，这可能对某人有用..如果您的复选框中也有 html 属性，那么

```
 @Html.CheckBoxFor(model => model.item, new { onclick = "return false", Title = "is not editable",htmlAttributes = new { @class = "form-control" } }) 
```

@Anupam Roy 的回答会很好。只需添加我的案例。希望它会有用。

# javascript - 使用 YQL 和 MooTools 的 Json 请求

> ID：11308663
> 
> 赞同：2
> 
> 时间：2012-07-03T10:07:30.180
> 
> 标签：javascript, json, mootools, yql

我正在处理另一个域上的一些 json 文件，所以我试图使用 YQL 作为代理来发出跨域请求。我是 javascript 和 web 技术的初学者，我编写的每一行代码都可能会更好，但现在如果我在你的帮助下编写的代码不是那么优雅，这不是问题。

现在我的代码是：

```
function GetUrl() {
    var link = "http://m.airpim.com/json/public/search?q=variabile&k=&e=1",
        name = document.id('s').get('value') || '*';

    return link.replace("variabile", name);
}

function Ricerca() {
    var yql = 'http://query.yahooapis.com/v1/public/yql?q=' + encodeURIComponent('select * from json where url="' + GetUrl() + '"') + '&format=json&diagnostics=false&callback=';
    return yql;
}

function LavoroJson() {
    var ciao = new Request.JSONP({
        url: Ricerca(),
        onComplete: function(data) {
            // Log the result to console for inspection
            alert(ciao.toSource());
        }
    }).send();
} 
```

在我的想法中，我应该使用 YQL 来完成 json 的请求，但它不起作用。我该怎么做？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-03T11:14:43.360

您可以稍微扩展 Request.JSONP 类。

```
Request.YQLJSON = new Class({
    // gets basic info such as country and latitude data
    Extends: Request.JSONP,

    options: {
        log: !true,
        url: "http://query.yahooapis.com/v1/public/yql?q=select%20*%20from%20json%20where%20url%3D%22{location}%22&format=json"
    },

    initialize: function(location, options) {
        this.parent(options);
        if (!location)
            return;

        this.options.url = this.options.url.substitute({location: encodeURIComponent(location)});
    },

    success: function(data, script) {
        this.parent(data, script);
    }
}); 
```

你可以为 airpim 细节制作你自己的类似 DSL 的实现：

```
Request.airpim = new Class({

    Extends: Request.YQLJSON,

    options: {
        suburl: "http://m.airpim.com/json/public/search?q={search}&k=&e=1"
    },

    initialize: function(query, options) {
        this.parent(this.options.suburl.substitute({
            search: encodeURIComponent(query)
        }), options);
    }

}); 
```

像这样使用：

```
new Request.airpim("*", {
    onSuccess: function(data) {
        console.log(data.query.results.json);
    }
}).send(); 
```

[https://tinker.io/c9634](https://tinker.io/c9634)

# biztalk - 如何在 BizTalk 中实现后进先出 (LIFO)？

> ID：11308665
> 
> 赞同：1
> 
> 时间：2012-07-03T10:07:35.947
> 
> 标签：biztalk, biztalk-2010

我们的情况是最新消息最重要，而旧消息很快变得无关紧要，因此我们的新设计要求实现后进先出 (LIFO) 模式来处理传入消息。

那么，如何做到这一点呢？我怀疑实现 FIFO 相对简单（使用发送端口的“有序交付”复选框）但是我该如何做相反的事情呢？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-03T10:59:32.447

这不是微不足道的。正如您所说，使用支持排序的入站传输和配置了有序交付的发送端口可以使用 FIFO。

但是，这种方式不支持 FILO，因此要执行此操作，您需要实现一个名为[Resequencer](http://www.eaipatterns.com/Resequencer.html)的模式，除非在您的情况下顺序会被颠倒。

在 BizTalk 中实现重新排序器，您需要使用单例编排模式，并且可能调用 .net 代码来实现 FILO 逻辑。Richard Seroter[在这里](http://seroter.wordpress.com/2008/10/09/in-memory-biztalk-resequencer-pattern/)概述了一种方法（尽管使用 FIFO）。

希望这对您有所帮助。

# arrays - 遍历变体数组

> ID：11308667
> 
> 赞同：4
> 
> 时间：2012-07-03T10:07:52.623
> 
> 标签：arrays, vba, excel, for-loop

我正在尝试使用表单输入目录、父文件夹名称，然后使用一系列复选框通过选项卡选择父文件夹中的子文件夹。

![我的用户表单](../Images/0205cc44b7a0ecbbc40d92dff8c77746.png)

我可以输入驱动器、项目名称和项目编号，首先检查父文件夹是否存在，如果不存在则创建它。

然后我检查“使用在线”复选框是否处于活动状态，如果是，则在“在线”选项卡中创建一个包含所有其他复选框名称的数组。然后它变得很棘手，因为我想遍历每个复选框名称以检查每个复选框是否处于活动状态，如果是，我想获取每个复选框的“标题”并使用它在父目录中创建一个子文件夹（如果它不存在）。

当我执行当前代码时，我得到'运行时错误'424'需要对象和行

```
 If itm.Value = True Then 
```

以黄色突出显示。

用于此用户表单的“创建文件夹”部分的所有代码都可以在下面找到：

```
Private Sub create_folders_button_Click()

'Create a variable for the drive letter
Dim driveLetter As String
driveLetter = drive_list.Value

'Create a variable for the project name
Dim projectName As String
projectName = p_name_textbox.Value

'Create a variable for the project number
Dim projectNumber As String
projectNumber = p_number_textbox.Value

'Create a variable for the constructed BasePath
Dim BasePath As String

'Create a new file system object for handling filesystem manipulation
  Set fs = CreateObject("Scripting.FileSystemObject")

'Populate an array with the online subfolders
  Dim onlineSubfolders As Variant
  onlineSubfolders = Array("online_progCosts", "online_exports")

'Compile the basePath

  BasePath = driveLetter & projectName & " (" & projectNumber & ")"

'Check if the project folder already exists and if so, raise an error and exit
    If Dir(BasePath, vbDirectory) <> "" Then
        MsgBox BasePath & " already exists", , "Error"
    Else
        'Create the project folder
        MkDir BasePath
        MsgBox "Parent folder creation complete"

        If online_toggle.Value = True Then
            Dim online As String
            online = "Online"
            MkDir BasePath & "\" & online

            Dim itm As Variant
            For Each itm In onlineSubfolders
                If folder_creator_window.Controls(itm).Value = True Then
                    Dim createFolder As String
                    createFolder = folder_creator_window.Controls(itm).Caption
                    NewFolder = BasePath & "\" & online & "\" & createFolder
                    If fs.folderexists(NewFolder) Then
                        'do nothing
                    Else
                        MkDir NewFolder
                    End If

                Else
                    'do nothing
                End If

            Next itm

        Else
            MsgBox "The online folder was not created because it was not checked"

        End If

    End If

End Sub 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-03T10:19:03.320

```
...
onlineSubfolders = Array("online_progCosts", "online_exports")
...
For Each itm In onlineSubfolders
            If itm.Value = True Then
... 
```

数组的每个元素都是一个字符串。字符串没有`.Value`属性。

我猜这些是您的复选框的名称，因此您需要通过引用控件本身来获取值。我不知道你的表格叫什么。

```
If FormName.Controls(itm).Value = True 
```

# ios - IOS中的排序键

> ID：11308671
> 
> 赞同：1
> 
> 时间：2012-07-03T10:08:06.543
> 
> 标签：ios, sorting, dictionary, key

我正在将密钥加载到 ios 中的选择器控件中。我的问题是我无法按字母顺序排序键。

代码从 UnSorted: Nordfyn, Svendborg, Nyborg, Langeland, Assens, Kerteminde, Middelfart, Odense, Ærø, Faaborg-Midtfyn, 到 Sorted: Ærø, Svendborg, Nyborg, Langeland, Kerteminde, Nordfyn, Middelfart, Assens, Odense , 法博格-米特芬。

```
NSBundle *KSbundle = [NSBundle mainBundle];
NSURL *KSplistURL = [KSbundle URLForResource:@"KommunerStedtillæg" 
                           withExtension:@"plist"];
NSDictionary *KSdictionary = [NSDictionary 
                            dictionaryWithContentsOfURL:KSplistURL];

NSArray *KSkeys = [[KSdictionary allKeys] sortedArrayUsingSelector:@selector(compare:)];

NSMutableDictionary *KSnewDict = [NSMutableDictionary dictionary];

for (id key in KSkeys)
    [KSnewDict setObject:[KSdictionary objectForKey:key] forKey:key];

kommunerKeys = [KSnewDict allKeys];
kommunerValues = [KSnewDict allValues]; 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-03T10:33:06.517

看起来好像您查看了 kommunerKeys，但字典中键的顺序是未定义的（请参阅[链接](https://developer.apple.com/library/mac/#documentation/Cocoa/Reference/Foundation/Classes/NSDictionary_Class/Reference/Reference.html#//apple_ref/occ/cl/NSDictionary)）。在添加之前对它们进行排序对您没有帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-03T10:14:59.180

```
NSArray *stringsArray = [NSArray arrayWithObjects:
                                 @"string 1",
                                 @"String 21",
                                 @"string 12",
                                 @"String 11",
                                 @"String 02", nil];

static NSStringCompareOptions comparisonOptions = NSCaseInsensitiveSearch | NSNumericSearch |
        NSWidthInsensitiveSearch | NSForcedOrderingSearch;
NSLocale *currentLocale = [NSLocale currentLocale];

NSComparator finderSortBlock = ^(id string1, id string2) {

    NSRange string1Range = NSMakeRange(0, [string1 length]);
    return [string1 compare:string2 options:comparisonOptions range:string1Range locale:currentLocale];
};

NSArray *finderSortArray = [stringsArray sortedArrayUsingComparator:finderSortBlock];
NSLog(@"finderSortArray: %@", finderSortArray); 
```

在这里形成[http://www.developers-life.com/sorting-by-block.html](http://www.developers-life.com/sorting-by-block.html)

添加您需要的选项

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-03T10:15:13.203

你可能正在寻找这个：

```
 [array sortedArrayUsingSelector:@selector(caseInsensitiveCompare:)]; 
```

仅仅比较是不够的。

# android - 活动创建速度

> ID：11308676
> 
> 赞同：0
> 
> 时间：2012-07-03T10:08:27.937
> 
> 标签：android, android-activity

我有一个应用程序，其中有 4 个屏幕，单击按钮后创建屏幕，每个屏幕都有一个新活动，但活动运行速度太慢（创建 3 秒）。在第二个活动中，我的信息取决于第一个活动，因此在单击按钮之前我无法创建活动。有没有其他方法可以让4个屏幕一个接一个，速度又快？

```
package your.pack.namespace;

import java.io.IOException;
import java.io.InputStream;
import java.net.MalformedURLException;
import java.net.URL;
import java.net.URLConnection;
import java.util.Collection;
import java.util.LinkedList;
import java.util.concurrent.TimeUnit;

import javax.xml.parsers.DocumentBuilder;
import javax.xml.parsers.DocumentBuilderFactory;

import org.w3c.dom.Document;
import org.w3c.dom.Element;
import org.w3c.dom.Node;
import org.w3c.dom.NodeList;

import android.app.Activity;
import android.content.Intent;
import android.os.AsyncTask;
import android.os.Bundle;
import android.text.Html;
import android.view.View;
import android.view.View.OnClickListener;
import android.widget.Button;
import android.widget.LinearLayout;

public class ParsActivity extends Activity implements OnClickListener {

     private Collection<String> title = new LinkedList<String>();
     public Collection<String> desc = new LinkedList<String>();
     public NodeList Items = getNodeList();
     Collection<String> secTitle = new LinkedList<String>();

     Document doc;

      /** Called when the activity is first created. */
      @Override
      public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);

        LinearLayout ll = new LinearLayout(this);
        ll.setOrientation(LinearLayout.VERTICAL);
        ll.setScrollContainer(true);
        ll.setBackgroundResource(R.drawable.gradientbackground);

        CreateScr(ll,Items);
      }

      private void CreateScr(LinearLayout l1,NodeList btns){

             for(int i=0;i<btns.getLength();i++){
             Element eElement= (Element)btns.item(i);
             this.title.add(getTagValue("title",eElement));
             this.desc.add(getTagValue("description",eElement));

             }
             btnCreate(title,l1);
             this.setContentView(l1);
      }

      public  void btnCreate (Collection<String> name,LinearLayout l1)
      {
          int k=0;
        for(String i:name ){

             Button btnNew = new Button(this);
             btnNew.setId(k);
             //btnNew.setBackgroundResource(R.drawable.bottomrow) ;  
             btnNew.setText(Html.fromHtml("<b>" + i + "</b>" +  "<br />"));
             l1.addView(btnNew);
             k++; 
             btnNew.setOnClickListener(this);
        }
        this.setContentView(l1);
      }

      public static Document getDocument(String url)
              throws MalformedURLException, IOException, Exception {
             URL documentUrl = new URL(url);
             URLConnection conn = documentUrl.openConnection();

             DocumentBuilderFactory factory = DocumentBuilderFactory.newInstance();
             DocumentBuilder builder = factory.newDocumentBuilder();
             Document document;
             InputStream stream = null;
             try {
              stream = conn.getInputStream();
              document = builder.parse(stream);
             } finally {
              if (stream != null) stream.close();
             }
             return document;
            }

        public  NodeList getNodeList (){
            try {
                  doc = getDocument("http://afishadroid.about.od.ua/main.xml");

            } catch (Exception ioe) {
                //Обрабатываем   ошибку   
            }

            NodeList nd = doc.getElementsByTagName("item");
            return  nd;
        }

        public Element getElement (NodeList nl,int id1){

            Element eElement = (Element)nl.item(id1);
            return eElement;
        }

      protected static String getTagValue(String sTag, Element eElement) {
            NodeList nlList = eElement.getElementsByTagName(sTag).item(0).getChildNodes();

                Node nValue = (Node) nlList.item(0);

            return nValue.getNodeValue();
          }

          public  void onClick(View v) { 

             Intent intent = new Intent();
             intent.setClass(this, SecondActivity.class);
            // intent.putExtra("ID",v.getId());
              startActivity(intent);
              //Intent intent = new Intent(this, SecondActivity.class) .putExtra("ID", v.getId()); startActivity(intent);

          }

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-03T10:13:04.767

如果你想快速加载你的活动，那么你需要在 onCreate 中做的尽可能少。使用 AsyncTask 加载可能需要几秒钟的数据。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-03T10:26:02.483

如果您在本地加载数据（意味着本地数据），那么它不会花费太多时间，但是如果您正在显示一些将从服务器获取的数据，请尝试在单独的线程中执行此操作，以便您的 UI 线程不会块，一旦获取数据完成，在 UI 线程中刷新屏幕。

尝试尽快完成您的 onCreate() 并完成所有计算并在 onResume() 或 onPause() 方法中休息。

# node.js - 带有 Intranet DB 的 Node.js 在线应用程序

> ID：11308688
> 
> 赞同：0
> 
> 时间：2012-07-03T10:09:47.480
> 
> 标签：node.js, mongodb, intranet

我想要构建的是一个在线应用程序，它被不同的组使用，每个组都有自己的 Intranet。现在，由于愚蠢的安全策略，数据不能位于 Intranet 之外。您将如何构建一个仍然在线的应用程序，以便您可以一次将更新推送给每个人，但在每个 Intranet 的服务器上都有一个数据库？我最初的计划是使用 Node.js 和 MongoDB。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-03T12:10:40.097

我现在面临着类似的问题，所以这是我的看法，而不是真正的 mongo 或节点特定的。

1.  在每个客户端的 Intranet 上放置一个 db 和一个简单的 restful 服务器。服务器可以完全相同。
2.  放置一个可从互联网访问的路由外观，该外观根据 url 将请求重定向到适当的服务器，即：`http://facade/server/resource`成为对`http://server/resouce`.
3.  配置外观，以便请求`http://facade/resource`去每个服务器，检索结果并以某种聚合形式返回所有结果。

显然还有更多细节需要考虑，比如权限（每个人都可以发布到每个服务器吗？如果不能，谁可以？），但总体思路是存在的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-03T19:10:36.720

如果您的数据库确实必须在现场，并且您的应用程序确实必须在异地，那么您唯一的选择可能是设置从您的应用程序到现场数据库的安全连接，并假装它在本地托管到应用程序。这可能/可能不会违反安全策略。理论上，您可以通过两个网络之间的 vpn 很好地锁定它。但这并不适合胆小的人，性能会受到影响，并且确实存在安全问题。这也意味着每个站点都需要做一些工作。

如果您希望它“在线”的唯一原因是您所说的推送更新，那么您最好在本地安装应用程序，并让它轮询中央服务器以获取有关新版本的通知，下载更新到自己，并自动安装它们。一旦你创建了这个，新的安装不需要新的工作。

# javascript - 在字符串 jquery 中添加空格

> ID：11308689
> 
> 赞同：0
> 
> 时间：2012-07-03T10:09:51.650
> 
> 标签：javascript, jquery

我想在字符串的开头插入一个空格示例：

```
MySite
   MySite (I want this) 
```

我尝试过这种模式但没有

```
txt="    "+v.text(); 
```

有人能帮我吗？非常感谢

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-03T10:11:37.783

尝试 ：

```
 txt="&nbsp;&nbsp;&nbsp;&nbsp;"+v.text(); 
```

另一个好的解决方案是使用设置了一些样式的 div。

```
 <div style='margin-left:15px' id='main_text'></div> 
```

您可以使用 jQuery 将 txt 放在 div 中。

```
 txt= v.text();
     $('#main_text').html(txt); 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-07-03T10:11:50.927

一种解决方案是用`&nbsp;`实体填充空格，但如果您必须仅出于样式/可视化目的而实现此效果，则将该行包装在适当的标签中并改用一些 CSS（例如`text-indent`属性）

如果您必须在选择中缩进文本（我猜想阅读您之前的答案），您可能希望将您的选项包装在一个`optgroup`元素中（并给它一些填充）

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-12-08T07:32:57.000

```
var str2 = "&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Here goes your string with spaces"; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-03T11:16:10.797

以下有2个解决方案：-

```
1\. txt="<pre>    </pre>"+v.text();

2\. txt="<span style='margin-left:15px'></span>"+v.text(); 
```

# iphone - 使用 Accounts 框架在 iOS 5 Twitter 中转发、回复和收藏

> ID：11308690
> 
> 赞同：14
> 
> 时间：2012-07-03T10:09:55.600
> 
> 标签：iphone, objective-c, ios, ios5, twitter

我在我的应用程序中集成了 iOS 5 Twitter。我可以通过`TWTweetComposeViewController`Twitter 和 Accounts 框架的集成来发送推文。

现在我想借助 Accounts 框架在 iOS 5 中转发、回复和收藏。

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-07-03T10:45:51.690

使用以下代码转推。

```
- (void)_retweetMessage:(TwitterMessage *)message
{
    NSString *retweetString = [NSString stringWithFormat:@"http://api.twitter.com/1/statuses/retweet/%@.json", message.identifier];
    NSURL *retweetURL = [NSURL URLWithString:retweetString];
    TWRequest *request = [[TWRequest alloc] initWithURL:retweetURL parameters:nil requestMethod:TWRequestMethodPOST];
    request.account = _usedAccount;

    [request performRequestWithHandler:^(NSData *responseData, NSHTTPURLResponse *urlResponse, NSError *error) {
        if (responseData)
        {
            NSError *parseError = nil;
            id json = [NSJSONSerialization JSONObjectWithData:responseData options:0 error:&amp;parseError];

            if (!json)
            {
                NSLog(@"Parse Error: %@", parseError);
            }
            else
            {
                NSLog(@"%@", json);
            }
        }
        else
        {
            NSLog(@"Request Error: %@", [error localizedDescription]);
        }
    }];
} 
```

[取自这里](http://www.cocoanetics.com/2012/05/twitter-framework-tutorial/)

祝你好运。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-07-05T05:31:35.103

朋友詹尼斯的回答帮助我找到我的解决方案，答案是：

**1) 转发和收藏**

*这是一个发送请求的类方法，你必须传递不同的 URL 来转发和收藏。*

```
 + (void)makeRequestsWithURL: (NSURL *)url {
    // Create an account store object.
    ACAccountStore *accountStore = [[ACAccountStore alloc] init];

    // Create an account type that ensures Twitter accounts are retrieved.
    ACAccountType *accountType = [accountStore accountTypeWithAccountTypeIdentifier:ACAccountTypeIdentifierTwitter];

    // Request access from the user to use their Twitter accounts.
    [accountStore requestAccessToAccountsWithType:accountType withCompletionHandler:^(BOOL granted, NSError *error) {
        if(granted) {
            // Get the list of Twitter accounts.
            NSArray *accountsArray = [accountStore accountsWithAccountType:accountType];

            // For the sake of brevity, we'll assume there is only one Twitter account present.
            // You would ideally ask the user which account they want to tweet from, if there is more than one Twitter account present.
            if ([accountsArray count] > 0) {
                // Grab the initial Twitter account to tweet from.
                ACAccount *twitterAccount = [accountsArray objectAtIndex:0];

                // Create a request, which in this example, posts a tweet to the user's timeline.
                // This example uses version 1 of the Twitter API.
                // This may need to be changed to whichever version is currently appropriate.
                TWRequest *postRequest = [[TWRequest alloc] initWithURL:url parameters:nil requestMethod:TWRequestMethodPOST];

                // Set the account used to post the tweet.
                [postRequest setAccount:twitterAccount];

                // Perform the request created above and create a handler block to handle the response.
                [postRequest performRequestWithHandler:^(NSData *responseData, NSHTTPURLResponse *urlResponse, NSError *error) {
                    NSString *output = [NSString stringWithFormat:@"HTTP response status: %i", [urlResponse statusCode]];
                    iOS5Twitter *twitter5 = [[iOS5Twitter alloc] init];
                    [twitter5 performSelectorOnMainThread:@selector(displayText:) withObject:output waitUntilDone:NO];
                    [twitter5 release];                }];
            }
        }

    }];

} 
```

**转推网址：**
[https ://api.twitter.com/1/statuses/retweet/id_str.json.xml](https://api.twitter.com/1/statuses/retweet/id_str.json.xml)
**收藏网址：**
[https ://api.twitter.com/1/favorites/create/id_str.json](https://api.twitter.com/1/favorites/create/id_str.json)
[https： //api.twitter.com/1/favorites/destroy/id_str.json](https://api.twitter.com/1/favorites/destroy/id_str.json)

**2) 回复代码**

```
 + (void)makeRequestForReplyWithSelectedFeed:(NSString *)status inReply2:(NSString *)updateID{
    // Create an account store object.
    ACAccountStore *accountStore = [[ACAccountStore alloc] init];

    // Create an account type that ensures Twitter accounts are retrieved.
    ACAccountType *accountType = [accountStore accountTypeWithAccountTypeIdentifier:ACAccountTypeIdentifierTwitter];

    NSString *trimmedText = status;
    if ([trimmedText length] > 140.0) {
        trimmedText = [trimmedText substringToIndex:140];
    }

    NSMutableDictionary *params = [NSMutableDictionary dictionaryWithCapacity:0];
    [params setObject:trimmedText forKey:@"status"];
    if (updateID > 0) {
        [params setObject:[NSString stringWithFormat:@"%@", updateID] forKey:@"in_reply_to_status_id"];
    }

    // Request access from the user to use their Twitter accounts.
    [accountStore requestAccessToAccountsWithType:accountType withCompletionHandler:^(BOOL granted, NSError *error) {
        if(granted) {
            // Get the list of Twitter accounts.
            NSArray *accountsArray = [accountStore accountsWithAccountType:accountType];

            // For the sake of brevity, we'll assume there is only one Twitter account present.
            // You would ideally ask the user which account they want to tweet from, if there is more than one Twitter account present.
            if ([accountsArray count] > 0) {
                // Grab the initial Twitter account to tweet from.
                ACAccount *twitterAccount = [accountsArray objectAtIndex:0];

                // Create a request, which in this example, posts a tweet to the user's timeline.
                // This example uses version 1 of the Twitter API.
                // This may need to be changed to whichever version is currently appropriate.
                   TWRequest *postRequest = [[TWRequest alloc] initWithURL:[NSURL URLWithString:@"http://api.twitter.com/1/statuses/update.json"] parameters:params requestMethod:TWRequestMethodPOST];

                // Set the account used to post the tweet.
                [postRequest setAccount:twitterAccount];

                // Perform the request created above and create a handler block to handle the response.
                [postRequest performRequestWithHandler:^(NSData *responseData, NSHTTPURLResponse *urlResponse, NSError *error) {
                    NSString *output = [NSString stringWithFormat:@"HTTP response status: %i", [urlResponse statusCode]];
                    iOS5Twitter *twitter5 = [[iOS5Twitter alloc] init];
                    [twitter5 performSelectorOnMainThread:@selector(displayText:) withObject:output waitUntilDone:NO];
                    [twitter5 release];                }];
            }
        }
    }];
} 
```

**方法调用：**

`[iOS5Twitter makeRequestForReplyWithSelectedFeed:[NSString stringWithFormat:@"%@", tweetMessage.text ]inReply2:[ NSString stringWithFormat:@"%@",selectedFeed.id_str]];`

我创建了一个 iOS5Twitter 类并实现了一个类方法，如果你想在你的控制器中做，请替换`delegate`为`self`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-03T10:36:15.990

使用`TWRequest`类而不是`TWTweetComposeViewController`访问推文、转推、回复和收藏。有关更多信息，请使用这些链接。[链路 1](https://dev.twitter.com/docs/ios)和[链路 2](http://developer.apple.com/library/ios/#documentation/Twitter/Reference/TWRequestClassRef/Reference/Reference.html#//apple_ref/doc/uid/TP40010942)

# actionscript-3 - 一些碰撞不起作用（Actionscript 3）

> ID：11308697
> 
> 赞同：0
> 
> 时间：2012-07-03T10:10:13.243
> 
> 标签：actionscript-3

我是 Actionscript 的新手，我正在玩并测试碰撞。我的工作正常，但是有些平台玩家可以直接向上跳跃并穿过，有时从右侧过来时可以直接行走。

这是我的 .fla 文件，因此您可以对其进行测试并查看代码：

[http://www.mediafire.com/?sspz4grjilvvdd6](http://www.mediafire.com/?sspz4grjilvvdd6)

我认为这是因为我使用了积分。我怎样才能解决这个问题？

此外，使用 hitTestObject 是否真的可以在实际上没有碰撞时检测到碰撞。这就是我尝试积分的原因。

谢谢您的帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-03T23:53:55.767

试试[这个功能](https://stackoverflow.com/questions/10140737/collision-detection-of-sprites-in-actionscript-3-0-flash/10150859#10150859)。您所需要的只是将您的对象放入影片剪辑中并为其命名。

# asp.net - 带有 C# 实现的 ASP.NET HTML5 WebSockets

> ID：11308700
> 
> 赞同：0
> 
> 时间：2012-07-03T10:10:42.660
> 
> 标签：asp.net, html, websocket

如何使用 ASP.NET 4.0 (C#) 创建一个简单的 HTML5 Websockets 应用程序。我的问题是关于创建 Websockets。以下是尝试过的代码...

```
try
{
    var listener = new TcpListener(IPAddress.Loopback, 9988);
    listener.Start();                
    using (var client = listener.AcceptTcpClient())
    using (var stream = client.GetStream())
    using (var reader = new StreamReader(stream))
    using (var writer = new StreamWriter(stream))
    {
        writer.WriteLine("HTTP/1.1 101 Web Socket Protocol Handshake");
        writer.WriteLine("Upgrade: WebSocket");
        writer.WriteLine("Connection: Upgrade");
        writer.WriteLine("WebSocket-Origin: http://localhost:9988");
        writer.WriteLine("WebSocket-Location: ws://localhost:8181/websession");
        writer.WriteLine("");
    }
    listener.Stop();
}
catch (Exception ex)
{
    ClientScript.RegisterClientScriptBlock(this.GetType(), "", ex.Message);
} 
```

HTML代码如下...！

```
<html xmlns="http://www.w3.org/1999/xhtml">
<head id="Head1" runat="server">
    <title></title>
    <script type="text/javascript">
        var status = '';
        function conStatus(state) {
            return (state == 0) ? 'Connecting..!' : (state == 1) ? 'Opened..!' : (state == 2) ? 'Closing..!' : 'Closed..!';
        }
        function WebSocketTest() {
            if ("WebSocket" in window) {
                try {
                    debugger;
                    var connection = new WebSocket('ws://localhost:9988');
                    status += '<br/>Socket Status: ' + conStatus(connection.readyState);

                    connection.onopen = function () {
                        status += 'Socket Opened..!';
                    };

                    connection.onmessage = function () {
                        status += 'Socket received a message..!';
                    };
                    connection.onclose = function () {
                        status += 'Socket Closed..!';
                    };
                    connection.send('Hello World..!');
                }
                catch (exception) {
                    status += '<br/>EXCEPTION: ' + exception;
                }
            }
            else {
                status += "Your Browser does not support WebSockets...!"
            }
            document.write(status);
        }
    </script>
</head>
<body>
    <form id="form1" runat="server">
    <div id="sse">
        <a href="javascript:WebSocketTest()">Run WebSocket</a>
    </div>
    <div id="status">
    </div>
    </form>
</body>
</html> 
```

如果我运行这个文件，页面会继续加载..我看不到任何结果..！请给我一个解决方案....提前谢谢....

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-03T12:27:40.343

您需要对服务器进行一些更改。最好从阅读规范的[握手](https://www.rfc-editor.org/rfc/rfc6455#section-4.2)部分开始。至少，您需要在响应中添加 Sec-WebSocket-Accept 标头。您还可以考虑在客户端请求中检查 Sec-WebSocket-Version 和 Sec-WebSocket-Protocol。

在此之后，您应该拥有一台服务器，该服务器将完成其握手然后立即关闭其连接。您应该让您的 tcp 客户端无限期地保持活动状态，仅在客户端关闭或请求关闭或服务器想要关闭时关闭它。

您还需要更新您的客户端代码。提示的初始握手`new WebSocket(...)`是异步的。在回调运行之前，您不能使用连接变量`onopen`（因此将`connection.send('Hello World..!')`行移到那里）。

之后，您应该阅读规范的[数据框架](https://www.rfc-editor.org/rfc/rfc6455#section-5.2)部分以了解如何发送/接收消息。

这增加了合理的工作量。您可能会发现改用现有的开源服务器会更快。我自己没有使用过它，但[Fleck](https://github.com/statianzo/Fleck/)似乎很受好评，看起来应该很容易使用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-06T06:10:46.477

[Websocket](http://pokein.com/Help/WebSocketFeature.aspx)实现需要的不仅仅是一个简单的 TcpListener。您可以尝试[PokeIn](http://pokein.codeplex.com)以便在所有平台上都支持 WebSocket，或者您可以将您的解决方案更新到 ASP.NET 4.5 并坚持使用 IIS 8

# security - 是否需要针对无副作用的 GET 请求进行 CSRF 保护？

> ID：11308701
> 
> 赞同：1
> 
> 时间：2012-07-03T10:10:48.873
> 
> 标签：security, csrf

我正在开发一个 Web 应用程序，其中所有动态内容都通过 Ajax 请求作为 JSON 检索。我正在考虑是否应该保护 GET API 调用不被来自不同来源的调用？

GET 请求不会修改状态，普遍的看法是它们不需要 CSRF 保护。但我想知道是否没有浏览器将此类请求的结果泄漏到不同源站点的极端情况？

例如，如果不同的源站点将 /users/emails 作为脚本、css 或 img 获取，浏览器是否有可能将生成的 json 泄漏到调用站点（例如通过 javascript onerror 处理程序）？

浏览器是否提供了足够强的保证来保证跨源 JSON 响应的内容不会泄露？你认为保护 GET 请求免受跨源调用是有意义的还是有点矫枉过正？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-04T01:08:06.207

您已经确定了一个极端案例，但高度相关的问题。确实存在这种可能性，它被称为 JSON 包含或跨站点脚本包含或 Javascript 包含，具体取决于您所指的对象。基本上，攻击是在一个邪恶的网站上执行，然后在 js 引擎解析它后通过 javascript 访问结果。

简短的故事是，您的所有 JSON 响应都必须包含在一个对象中，而不是一个数组或 JSONP（所以：{...}），并且为了更好地衡量您应该以前缀（while（1），对于(;;) 或解析器中断器）。查看 facebook 或 google 的 JSON 响应以获取实时示例。或者，您可以使用 CSRF 保护使您的 URL 不可猜测——这两种方法都有效。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-11-27T10:24:38.773

不：

这不是 CSRF 问题，只要您返回纯 JSON 并且您的 GET 没有副作用，它就不必受到​​ csrf 保护。

Paradoxengine 提到的是另一个漏洞：如果您使用 JSONP，[攻击者可能会读取](https://stackoverflow.com/questions/8028511/what-is-cross-site-script-inclusion-xssi)发送给经过身份验证的用户的 JSON。即使使用常规 JSON [，也可以通过这种方式攻击](https://stackoverflow.com/questions/16289894/is-json-hijacking-still-an-issue-in-modern-browsers)非常旧的浏览器（IE 5.5）的用户。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-08-22T08:30:21.413

您可以将请求发送到不同的域（这是 CSRF 攻击所做的），但您无法读取响应。

我从这里的另一个堆栈溢出问题中了解到这一点[似乎我对 CSRF 的理解不正确？](https://stackoverflow.com/questions/7275104/it-seems-like-i-understand-csrf-incorrectly) 希望这可以帮助您理解问题。

# php - Foreach 给出错误的 $value

> ID：11308704
> 
> 赞同：0
> 
> 时间：2012-07-03T10:10:49.747
> 
> 标签：php, arrays, foreach, associative-array

这让我很难过。print_r 显示正确的数组索引和值，但 foreach 构造检索错误的值，甚至更改最后一个索引的值，即使我没有通过引用检索值（不使用与号）。

```
<?php

require './includes/dbal.php';
require './includes/user.php';
require './includes/book.php';

session_start();

$title='My Shopping Cart';
include './template/header.php';

if(!isset($_SESSION['user']))
{
    die('You are not logged in.');
}

if(!isset($_SESSION['cart']))
{
    $_SESSION['cart'] = array();
}

if(isset($_POST['submit']) && strcmp($_GET['mode'], 'add') == 0)
{
    if(filter_var($_POST['qty'], FILTER_VALIDATE_INT) == FALSE)
    {
        echo '<div style="color: red;">Invalid quantity specified. Please go back and use a valid quantity.</div>';
    }
    else
    {
        $_SESSION['cart'][$_POST['book_id']] = $_POST['qty'];
    }
}

else if(isset($_POST['update']) && strcmp($_GET['mode'], 'update') == 0)
{
    foreach($_SESSION['cart'] as $key => &$value)
    {
        if((int) $_POST["qty_$key"] === 0)
        {
            unset($_SESSION['cart']["$key"]);
        }
        else
        {
            $value = $_POST["qty_$key"];
        }
    }
}

echo '<h3>Your shopping cart</h3>';

$db = new DBal();
$total=0;
echo '<div id="cart-items"><ul><form action="./cart.php?mode=update" method="post">';

// echo 'Original array: '; print_r($_SESSION['cart']);
foreach($_SESSION['cart'] as $key => $value)
{
    // echo '<br />$key => $value for this iteration: ' . "$key => $value<br />";
    // print_r($_SESSION['cart']);
    $b = new Book($key, $db);
    $book = $b->get_book_details();
    $total += $value * $book['book_nprice']
?>
<li>
    <div><img src="./images/books/thumbs/book-<?php echo $book['book_id']; ?>.jpg" title="<?php echo $book['book_name']; ?>" /></div>
    <span class="cart-price">Amount: Rs. <?php echo $value * $book['book_nprice']; ?></span>
    <h3><?php echo $book['book_name']; ?> by <?php echo $book['book_author']; ?></h3>
    Price: Rs. <?php echo $book['book_nprice']; ?><br /><br />
    Qty: <input type="number" name="qty_<?php echo $book['book_id']; ?>" maxlength="3" size="6" min="1" max="100" value="<?php echo $value; ?>" /><br />
</li>
<?php } echo "<span class=\"cart-price\">Total amount: $total</span>" ?>
<br />
<input type="submit" name="update" value="Update Cart" />
</form></ul></div>

<?php include './template/footer.html'; ?> 
```

按下更新按钮后的示例输出如下：

```
Original array:
Array (
    [9] => 6
    [8] => 7
    [3] => 8
)

$key => $value for this iteration: 9 => 6
Array (
    [9] => 6
    [8] => 7
    [3] => 6
)

$key => $value for this iteration: 8 => 7 
Array (
    [9] => 6
    [8] => 7
    [3] => 7
)

$key => $value for this iteration: 3 => 7 
Array (
    [9] => 6
    [8] => 7
    [3] => 7 
) 
```

最后一个索引的值在每次迭代中都会更改为当前索引的值。这导致最后一个值输出具有与倒数第二个索引相同的值。

帮助？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-03T10:13:54.053

您以前`&$value`用作参考：

```
foreach($_SESSION['cart'] as $key => &$value) 
```

该变量继续作为循环之外的引用存在，在循环中再次使用它会产生预期但不明显的副作用。[这甚至在手册](http://php.net/manual/en/control-structures.foreach.php)中的一个大红框中提到。`unset($value)`在第一个循环之后避免这种情况。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-03T10:14:21.033

您在这里使用参考：

```
foreach($_SESSION['cart'] as $key => &$value) 
```

要么不要在此处使用引用，要么在循环后立即取消设置 $value。

# php - PHP 创建一个多维数组

> ID：11308705
> 
> 赞同：0
> 
> 时间：2012-07-03T10:10:53.307
> 
> 标签：php, multidimensional-array

首先向您展示我想要在视图中实现的目标，按类型分组的附加功能列表。

```
<ul>
{foreach $extras as $extra_type}
<li>
    <h2>{$extra_type.title}</h2>
    <ul>
        {foreach $extra_type.extras as $extra}
        <li>
            {$extra.name}
        </li>
        {/foreach}
    </ul>
</li>
{/foreach}
</ul> 
```

我有以下内容正在创建重复的附加内容，尽管我认为`$extras`每次都覆盖数组并不是一个好习惯。有没有更好的方法来做到这一点？我宁愿只对数据库进行 1 次查询。

```
$stmnt = "SELECT e.*, ed.extra_description_name, ed.extra_description_description,
            et.extra_type_title, ep.extra_price_amount, c.currency_htmlcode
          FROM product_extras pe
          LEFT JOIN extras e ON e.extra_id = pe.extra_id
          LEFT JOIN extra_descriptions ed ON ed.extra_id = pe.extra_id
          LEFT JOIN extra_prices ep ON ep.extra_id = pe.extra_id
          LEFT JOIN extra_types et ON et.extra_type_id = e.extra_type_id
          LEFT JOIN currencies c ON c.currency_id = ep.currency_id
          WHERE pe.product_id = '{$this->id}' AND e.extra_status = 'ENABLED'
            AND ed.language_id = 1 AND ep.currency_id = 1";

if ($isPublished) {
    $stmnt .= "
        AND IF(e.extra_publish_from IS NOT NULL, e.extra_publish_from, NOW()) <= NOW()
        AND IF(e.extra_publish_until IS NOT NULL, e.extra_publish_until, NOW()) >= NOW()";
}

$stmnt .= " ORDER BY e.extra_type_id, pe.product_extra_ordering, ed.extra_description_name";

$cache  = Cache::getInstance()->newObject(300);
$sig = Cache::getCacheName(sha1($stmnt));

if (!$res = $cache->load($sig)) {
    $res = $db->fetchAll($stmnt);
    $cache->save($res, $sig);
}

if(!empty($res))  {
    foreach($res as $row) {
        $extra[] = array(
            'id'        => $row['extra_id'],
            'type'      => $row['extra_type_title'],
            'weight'    => $row['extra_weight'],
            'image'      => $row['extra_image'],
            'name'      => $row['extra_description_name'],
            'description'   => $row['extra_description_description'],
            'price'     => Formatter::getInstance()->outFormat("currency", $row['extra_price_amount']),
            'currency'  => $row['currency_htmlcode']
        );

        $extras[$row['extra_type_id']] = array(
            'title' => $row['extra_type_title'],
            'extras' => $extra
        );
    }
} 
```

如果有帮助，这就是数据库

```
--
-- Table structure for table `extras`
--

CREATE TABLE IF NOT EXISTS `extras` (
  `extra_id` int(11) NOT NULL AUTO_INCREMENT,
  `extra_weight` float(4,1) NOT NULL COMMENT 'Weight in KG',
  `extra_image` varchar(255) COLLATE utf8_unicode_ci NOT NULL,
  `extra_available_all_countries` tinyint(1) NOT NULL,
  `extra_type_id` int(11) DEFAULT NULL,
  `extra_publish_from` int(11) DEFAULT NULL,
  `extra_publish_until` int(11) DEFAULT NULL,
  `extra_created` datetime NOT NULL,
  `extra_created_by` int(11) NOT NULL,
  `extra_modified` timestamp NOT NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP,
  `extra_modified_by` int(11) NOT NULL,
  `extra_status` enum('ENABLED','DISABLED') COLLATE utf8_unicode_ci NOT NULL,
  PRIMARY KEY (`extra_id`),
  KEY `extra_typeFK` (`extra_type_id`)
) ENGINE=MyISAM  DEFAULT CHARSET=utf8 COLLATE=utf8_unicode_ci;

-- --------------------------------------------------------

--
-- Table structure for table `extra_types`
--

CREATE TABLE IF NOT EXISTS `extra_types` (
  `extra_type_id` int(11) NOT NULL AUTO_INCREMENT,
  `extra_type_title` varchar(120) COLLATE utf8_unicode_ci NOT NULL,
  PRIMARY KEY (`extra_type_id`)
) ENGINE=MyISAM  DEFAULT CHARSET=utf8 COLLATE=utf8_unicode_ci; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-03T10:25:14.927

您的循环格式错误

```
<ul> {foreach $extras as $extra_type} <li>
    <h2>{$extra_type.title}</h2>
    <ul>
        {foreach $extra_type.extras as $extra}
        <li>
            {$extra.name}
        </li>
        {/foreach}
    </ul> </li> {/foreach} 
```

注意 $extra_type.extras 进入第二个 foreach。

可能是您的模板引擎不支持语法

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-03T10:30:36.283

我放弃了，将逻辑移到视图中要容易得多。

```
<ul>
{foreach $extras as $extra}
    {if $_extra_type != $extra.type || $extra@first}
    <li>
        <h2>{$extra.type}</h2>
        <ul>
        {/if}

            <li>
                {$extra.type} - {$extra.name}
            </li>

        {if $_extra_type != $extra.type || $extra@last}
        </ul>
    </li>
    {/if}
    {assign var="_extra_type" value=$extra.type}
{/foreach}
</ul>

if(!empty($res))  {
    foreach($res as $row) {
        $extras[] = array(
            'id'            => $row['extra_id'],
            'type'          => $row['extra_type_title'],
            'weight'        => $row['extra_weight'],
            'image'         => $row['extra_image'],
            'name'          => $row['extra_description_name'],
            'description'   => $row['extra_description_description'],
            'price'         => Formatter::getInstance()->outFormat("currency", $row['extra_price_amount']),
            'currency'      => $row['currency_htmlcode']
        );
    }
} 
```

# jsf-2 - JSF 2.0 commandLink - 未调用操作，javascript 错误

> ID：11308706
> 
> 赞同：0
> 
> 时间：2012-07-03T10:10:55.117
> 
> 标签：jsf-2, tomcat7, commandlink

我正在尝试让一个普通的 commandLink 工作。这是页面的代码片段：

```
<div class="item-single">
    <h:graphicImage value="image/screenshots/#{collectionListBean.collectionListTeaser[0].screenshot}" alt="Screenshot #{collectionListBean.collectionListTeaser[0].title}"/>
    <div class="item-title">
        <h:form id="teaser0">
            <h:commandLink value="#{collectionListBean.collectionListTeaser[0].title}" action="#{collectionBean.showCollection(collectionListBean.collectionListTeaser[0].id)}" />    
        </h:form>
    </div>
    <div class="item-description">
        <p>
            <h:outputText value="#{collectionListBean.collectionListTeaser[0].persons.get(0).person.getFullName()}" />
        </p>
    </div>
</div> 
```

标题显示正确，因此支持 bean 和列表可用且可访问。CollectionBean 也可用且可访问。该列表具有固定大小并在 javascript 库中使用，这就是我不使用 ui:repeat 或 h/p:dataTable 元素的原因。

我还检查了 BalusC[的常见问题列表](https://stackoverflow.com/questions/2118656/hcommandlink-hcommandbutton-is-not-being-invoked/2120183#2120183)

未在支持 bean 中调用该操作，我在浏览器控制台上收到以下 javascript 错误：

```
Uncaught TypeError: Cannot read property 'teaser0:_idcl' of undefined 
```

下面是backing bean（collectionBean）的相关代码：

```
@Named("collectionBean")
@Scope("access")
@ViewController(viewIds = {ViewIds.EDIT_COLLECTION, ViewIds.SHOW_COLLECTION,     ViewIds.EDIT_COLLECTION, ViewIds.METADATA_COLLECTION_ADMIN,     ViewIds.EDIT_COLLECTION_EXISTING, ViewIds.COLLECTION_LIST, ViewIds.HOME})
public class CollectionBean extends CollectionBeanBase {

.
.
.
public String showCollection(long id) {
    //Check if user is admin, if yes, allow to edit metadata
    Authentication auth=SecurityContextHolder.getContext().getAuthentication();
    this.collection = collectionService.findById(id);
    if (!(auth instanceof AnonymousAuthenticationToken)){
        role=auth.getAuthorities().iterator().next().getAuthority();
        if(role.equalsIgnoreCase("ROLE_ADMIN")) {
            this.collection.setEdit_flag(true);
            return ViewIds.EDIT_COLLECTION;
        }          
    }

    return ViewIds.SHOW_COLLECTION;
} 
```

有谁知道问题可能是什么？任何提示都非常感谢！提前谢谢你们！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-03T12:48:06.150

我重新排列了元素以包装受 jQuery 库影响的所有 div，现在它就像一个魅力。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-03T10:28:45.750

这是 commandLink 那么为什么要在方法中传递值。

意味着您可以使用

```
<f:param name="id" value="#{collectionListBean.collectionListTeaser[0].id}"/> 
```

您可以轻松地在行动中获得该价值。

喜欢

```
 public String showCollection() {

FacesContext fc = FacesContext.getCurrentInstance();

        Object id = fc.getExternalContext().getRequestParameterMap().get("id");

    System.out.println(id);

    return ViewIds.SHOW_COLLECTION;
    } 
```

我认为这是最好的方法。

# html - 如何使用周围 div 标签边框的图像来赋予自定义边框外观？

> ID：11308708
> 
> 赞同：0
> 
> 时间：2012-07-03T10:10:56.910
> 
> 标签：html, css

我已将以下 css 设置为 div 容器的 ger 边框图像，但问题是我的右图像没有出现在边框上，但是当它伸展时，它会在 div 容器的右边框侧留下空间。

```
<div id="container">
<div id="left-image"></div>
<div id="main-containts">
    <div id="data-containts">
    data
    </div>
</div>
<div id="right-image"></div>

   <div id="bottom">

       <div id="bottom-left"></div>
       <div id="bottom-center"></div>
       <div id="bottom-right"></div>

   </div>

</div>

div#container{
    position:relative;
    margin-left:120px;
    margin-right:120px;
    float:top;
    padding-top:0;
    margin-bottom:50px;
    width:auto;
    height:100%;
}
div#left-image{
    position:absolute;
    left:0;
    width:28px;
    height:100%;
    float:left;
    background:url(border-left.png) repeat-y;   
    }

   div#right-image{
    position:absolute;
    right:0;
    float:right;
    width:30px;
    height:100%;
    margin-right:0;
    background:url(border-right.png) repeat-y;
    }   
    div#bottom{
    position:absolute;
    bottom:0;
    width:100%;
    height:36px;
    z-index:100;
   }
    div#bottom-left{
width:51px;
height:36px;
background:url(corner-left.png) no-repeat;
float:left;
}   
div#bottom-center{

height:36px;
background:url(bottom-image.png) repeat-x;
margin-right:49px;
/*clear:both:*/
}       
    div#bottom-right{
width:49px;
height:36px;
background:url(corner-right.png) no-repeat;
float:right;
margin-top:-36px;

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-03T10:29:13.597

如果您只针对支持 css3 的现代浏览器。它可以通过 css3 的**边框图像**属性轻松完成。如果您不知道的话，值得看看该物业。

[http://css-tricks.com/understanding-border-image/](http://css-tricks.com/understanding-border-image/)

如果您希望上述代码正常工作，请粘贴您的 div 结构。

# java - Excel文件导入java spring hibernate

> ID：11308712
> 
> 赞同：0
> 
> 时间：2012-07-03T10:11:30.863
> 
> 标签：java, hibernate, excel, jsp, spring-mvc

我正在研究spring hibernate，我想导入一个excel文件。我想检查扩展名，以便除了 excel 之外没有人可以上传文件，即限制导入具有以下扩展名之一的文件：xls 或 xlsx。我的代码在这里：

```
public class ImportCandidatesFormController extends BNUAbstractFormController {

    private ImportCandidatesBL importCandidatesBL;
    private ExcelReader reader;

    @Override
    protected ModelAndView processFormSubmission(HttpServletRequest request,
            HttpServletResponse response, Object command, BindException arg3)
            throws Exception {

        FileUploadVO vo = (FileUploadVO) command;
        MultipartFile file = vo.getFile();

        System.out.println("File Uploaded: " + file.getOriginalFilename());
        boolean isSuccessful = importCandidatesBL.importAndSaveCandidates(
                file.getInputStream(),
                SessionUtil.getCurrentUser(request.getSession()));

        return new ModelAndView(new RedirectView("importCandidates.do?s=1"));
    }

    public ImportCandidatesBL getImportCandidatesBL() {
        return importCandidatesBL;
    }

    public void setImportCandidatesBL(ImportCandidatesBL importCandidatesBL) {
        this.importCandidatesBL = importCandidatesBL;
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-03T10:53:50.603

```
String lowercaseFileName = file.getOriginalFilename().toLowerCase();
if (!(lowerCaseFileName.endsWith(".xls") || lowerCaseFileName.endsWith(".xlsx"))) {
    // reject file
} 
```

# python - 在行中间分割时间戳

> ID：11308714
> 
> 赞同：1
> 
> 时间：2012-07-03T10:11:38.190
> 
> 标签：python, perl, bash, sed, awk

我有一个包含如下行的日志文件：

```
06/28/12 14:17:10.**754117** :R: INFO  [6] X10.cpp:4042 |xevent 35932825 1 0 0 
```

我希望该时间戳将微秒分开 - 即我希望输出具有以下形式：

```
06/28/12 14:17:10.**754 117** :R: INFO  [6] X10.cpp:4042 |xevent 35932825 1 0 0 
```

我该怎么做呢？

我可以使用任何标准的 UNIX 工具（例如 awk / sed）和 python / perl。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-03T10:21:32.667

使用 just `sed`，匹配前两个星 ( `*`) 和接下来的三个数字，并在其后放置一个空格。简单的：

```
sed 's;\*\*[0-9]\{3\};& ;' 
```

尝试一下

```
$ echo '06/28/12 14:17:10.**754117** :R: INFO  [6] X10.cpp:4042 |xevent 35932825 1 0 0' | sed 's;\*\*[0-9]\{3\};& ;'
06/28/12 14:17:10.**754 117** :R: INFO  [6] X10.cpp:4042 |xevent 35932825 1 0 0 
```

* * *

关于@DennisWilliamson 的评论和回答，我不确定星星是否是字符串的一部分，或者应该是降价的一部分。
在任何情况下，唯一`.XXX`匹配 a（点和三位数字）的地方是 ms 部分。所以这也可以：

```
sed 's;[0-9]\{3\};& ;' 
```

尝试一下 ：）

```
$ echo '06/28/12 14:17:10.754117 :R: INFO  [6] X10.cpp:4042 |xevent 35932825 1 0 0' | sed 's;[0-9]\{3\};& ;'
06/28/12 14:17:10.754 117 :R: INFO  [6] X10.cpp:4042 |xevent 35932825 1 0 0 
```

添加点会使其更安全一些：

```
sed 's;\.[0-9]\{3\};& ;' 
```

尝试一下 ：）

```
$ echo '06/28/12 14:17:10.754117 :R: INFO  [6] X10.cpp:4042 |xevent 35932825 1 0 0' | sed 's;\.[0-9]\{3\};& ;'
06/28/12 14:17:10.754 117 :R: INFO  [6] X10.cpp:4042 |xevent 35932825 1 0 0 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-03T11:03:10.807

假设星号只是为了问题的目的而突出显示，并且它们实际上并未出现在数据中：

```
echo '06/28/12 14:17:10.754117 :R: INFO  [6] X10.cpp:4042 |xevent 35932825 1 0 0' | 
awk '{$2 = substr($2, 1, length($2) - 3) " " substr($2, length($2) - 2); print}' 
```

结果是：

```
06/28/12 14:17:10.754 117 :R: INFO [6] X10.cpp:4042 |xevent 35932825 1 0 0 
```

您还可以对长度进行硬编码：

```
awk '{$2 = substr($2, 1, 12) " " substr($2, 13); print}' 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-03T10:16:52.430

```
echo '06/28/12 14:17:10.**754117** :R: INFO  [6] X10.cpp:4042 |xevent 35932825 1 0 0' | \
sed 's/\(\*\*[0-9]\{3\}\)\([0-9]\{3\}\*\*\)/\1 \2/' 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-03T10:16:58.053

在您提到的任何工具中使用带有反向引用的正则表达式替换。

代替：`'\*\*(\d{3})(\d{3})\*\*'`

和：`'\1 \2'`

（`'$1 $2'`在 Perl 中使用）

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-03T10:17:26.910

使用正则表达式
（在 python 中）

```
import re

text = '06/28/12 14:17:10.**754117** :R: INFO  [6] X10.cpp:4042 |xevent 35932825 1 0 0'

def repl(m):
    return '**%s %s**' % (m.group(1)[:3], m.group(1)[3:])

re.sub('\*\*(\d{6})\*\*', repl, text) 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-07-03T10:17:29.263

这将在文件中替换，并创建扩展名为 .bak 的备份

```
perl -i.bak -pe 's/(\*\*\d{3})(\d{3}\*\*)/$1 $2/' filename 
```

# popup - 当用户单击该行时显示弹出窗口

> ID：11308718
> 
> 赞同：0
> 
> 时间：2012-07-03T10:11:48.143
> 
> 标签：popup, openlayers

当用户点击该行时需要显示一个弹出窗口。代码如下但不起作用：

```
 var ClickLon;
        var ClickLat;

        OpenLayers.Control.Click = OpenLayers.Class(OpenLayers.Control, {
            defaultHandlerOptions: {
                'single': true,
                'double': false,
                'pixelTolerance': 0,
                'stopSingle': false,
                'stopDouble': false
            },

            initialize: function(options) {
                this.handlerOptions = OpenLayers.Util.extend(
                    {}, this.defaultHandlerOptions
                );
                OpenLayers.Control.prototype.initialize.apply(
                    this, arguments
                );
                this.handler = new OpenLayers.Handler.Click(
                    this, {
                        'click': this.trigger
                    }, this.handlerOptions
                );
            },

            trigger: function(e) {
                var lonlat = map.getLonLatFromPixel(e.xy);
                ClickLon = lonlat.lon;
                ClickLat = lonlat.lat;
            }

        });

        function onPopupClose(evt) {
            selectControl.unselect(selectedFeature);
        }
        function onFeatureSelect(feature) {
            selectedFeature = feature;
            id = feature.id;
            alert(ClickLon);
            var lonLat = new OpenLayers.LonLat(ClickLon, ClickLat).transform(new OpenLayers.Projection("EPSG:900913"), new OpenLayers.Projection("EPSG:4326"));

            popup = new OpenLayers.Popup.FramedCloud("chicken",
                                    lonLat,
                                    null,
                                    "<div style='font-size:.8em'>" +CableLineText_arr[id]  +"</div>",
                                    null, true, onPopupClose);
            feature.popup = popup;
            map.addPopup(popup);
        }
        function onFeatureUnselect(feature) {
            map.removePopup(feature.popup);
            feature.popup.destroy();
            feature.popup = null;
        }
...
var lineLayer = new OpenLayers.Layer.Vector("Line Layer");
map.addLayer(lineLayer);
map.addControl(new OpenLayers.Control.DrawFeature(lineLayer, OpenLayers.Handler.Path)); 

var click = new OpenLayers.Control.Click();
    map.addControl(click);
    click.activate();

    selectControl = new OpenLayers.Control.SelectFeature(lineLayer,
             {onSelect: onFeatureSelect, onUnselect: onFeatureUnselect});

    drawControls = {
                polygon: new OpenLayers.Control.DrawFeature(lineLayer,
                            OpenLayers.Handler.Polygon),
                select: selectControl
            };

            for(var key in drawControls) {
                map.addControl(drawControls[key]);
            } 
```

地图投影为 EPSG:4326。

画线为：

```
var points = new Array(
        new OpenLayers.Geometry.Point(47, 32.24),
        new OpenLayers.Geometry.Point(45, 33),
        new OpenLayers.Geometry.Point(49, 35)
    );

    var line = new OpenLayers.Geometry.LineString(points);
    line.transform(new OpenLayers.Projection("EPSG:4326"), new OpenLayers.Projection("EPSG:900913"));

    var style = { 
        strokeColor: '#0000ff', 
        strokeOpacity: 0.5,
        strokeWidth: 5
    };

    var lineFeature = new OpenLayers.Feature.Vector(line, null, style);
    alert(lineFeature.id);
    lineLayer.addFeatures([lineFeature]); 
```

尝试结合这两个示例： http: [//openlayers.org/dev/examples/select-feature-openpopup.html](http://openlayers.org/dev/examples/select-feature-openpopup.html)和[http://openlayers.org/dev/examples/click.html](http://openlayers.org/dev/examples/click.html)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-03T10:29:20.900

我没有看到您激活 control.SelectFeature 的地方。

# c#-4.0 - 在 NServiceBus 中收到新订阅的通知

> ID：11308721
> 
> 赞同：1
> 
> 时间：2012-07-03T10:11:56.030
> 
> 标签：c#-4.0, nservicebus

有谁知道我可以在 NServiceBus 中获得发布者发生新订阅的通知的方法？每次发生新订阅时，我都想运行一些代码。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-05T17:58:55.603

**技术1**

实施您自己的订阅存储将使您能够访问他们感兴趣的客户端地址和消息类型。

**技巧2**

```
public void Init()
    {
        IBus bus = NServiceBus.Configure.With()
           .DefaultBuilder()
           .Log4Net()
           .XmlSerializer()
           .MsmqTransport()
           .DisableRavenInstall()
           .UnicastBus()
           .CreateBus()
           .Start();

        IUnicastBus ubus = bus as IUnicastBus;

        if (null != ubus)
        {
            ubus.ClientSubscribed += (s, e) => { Console.WriteLine("Client Subscribed {0}:{1}", e.SubscriberReturnAddress.Machine, e.SubscriberReturnAddress.Queue); };
        }
    } 
```

# if-statement - SAS：IF 语句中的表达式

> ID：11308724
> 
> 赞同：1
> 
> 时间：2012-07-03T10:12:01.783
> 
> 标签：if-statement, expression, sas

Sas是否提供-表达式机制`chain`？

Sas 是否提供 - 子句的机制`In`？

简单的例子：

```
 a = '09MAY2010'd;
  b = '17MAY2010'd;

if (a<=c<=b) then do; /*code*/ end;
if (c in (a:b)) then do; /*code*/ end; 
```

也许有什么好的 if/where 语句技术？
你的建议和建议，请。
谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-03T12:59:21.027

你的例子，改变了一点：

```
data _null_;
    a = '09MAY2010'd;
    b = '17MAY2010'd;
    c = '17MAY2010'd;

    if (a<=c<=b) then do;
        putlog "a<=c<=b";
    end;

    select (c); 
        when (a, b) putlog "in a, b";
        when ('17MAY2010'd) putlog "'17MAY2010'd";/* not used, only first match is executed */
        otherwise;
    end;

run; 
```

与 IF 或 WHERE 子句一起使用的 IN 运算符需要列表中的常量。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-12-08T14:07:41.447

除了`IN`只接受括号内的常量值的运算符之外，还有一个（未记录的）`IN`函数，它可以与变量一起使用，因此当 a 和 b 是变量时，`if c in(a,b)`您也可以使用which 来代替。`if in(c,a,b)`

另一种可能性是使用`WHICHN`or`WHICHC`函数，它具有相同的语法，当未找到匹配项时返回`0`( )，否则返回（第一个）匹配项的数量。`FALSE`

# c++ - 带有字符串向量的 C++ 中的 ToDo 应用程序（为用户提供基于索引号删除条目的选项）

> ID：11308725
> 
> 赞同：0
> 
> 时间：2012-07-03T10:12:11.967
> 
> 标签：c++, stdvector

成功创建了用于存储条目的字符串向量。一个 while 循环请求 ToDo 项，一个 SHOW 键向用户显示当前存储在字符串向量中的所有项。为了更轻松地访问项目，我有一个 int 仅在项目前显示“运行”数字。

用户添加了一些项目后，他可以输入 DEL 是什么让他进入删除模式：（这里我喜欢输入 2 what will delete Stop Smoking 并重新排列数组以填补空白）

![在此处输入图像描述](../Images/c1ede672a4b7c88e0dae20d99e9b0dfe.png)

现在我想获取用户输入的数字，减 1 以匹配向量数组索引号并删除条目，但是最好的方法是什么？

这就是我如何将项目添加到字符串向量中：

```
int taskNumber = 1;
cout<<"New task: ";
getline (cin,newTaskEntry);
taskVector.push_back(newTaskEntry);

cout<<"TOTAL TASKS IN YOUR INBOX: "<<taskVector.size()<<endl; 
```

这就是我向用户显示所有条目的方式：

```
for (vector<string>::iterator i = taskVector.begin(); i != taskVector.end(); ++i) 
            {
                cout<<taskNumber<<"  ";
                cout<<*i<<endl;
                taskNumber = taskNumber +1; 
            } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-03T10:16:25.480

使用vector的[erase()](http://en.cppreference.com/w/cpp/container/vector/erase)成员函数。它需要一个迭代器，但由于向量支持随机访问迭代器，这不是问题：

```
taskVector.erase(taskVector.begin() + n - 1);  // where n is the number user enters 
```

还要确保`n`不大于向量的大小。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-03T10:17:52.430

只做：

```
cin >> number;
if(number > 0 && number < taskVector.size())
{
    vector<string>::iterator it(taskVector.begin() + number - 1);
    taskVector.erase(it);
}
else
    cout << "Error. Out of bounds\n"; 
```

# php - 具有适当 PHP 5.3 支持的 REPL/交互式 shell？

> ID：11308730
> 
> 赞同：10
> 
> 时间：2012-07-03T10:12:43.430
> 
> 标签：php, shell, read-eval-print-loop, phpsh

我使用[phpsh](http://www.phpsh.org/)已经有一段时间了，过去效果很好。但是它的命名空间支持仍然不是很好，这可能非常令人沮丧。

如果不禁用检查方法是否存在，诸如此类`\Somespace\Someclass::someStaticFunction()`的事情将无法正常工作，这会导致重置环境的拼写错误频繁出现致命错误。

那里有多个 PHP REPL，包括 PHP 内置的 shell ( `php -a`)，使用起来很糟糕。

有谁知道替代方案或具有适当命名空间支持的 phpsh-fork？或者也许是我忽略的一个简单的配置修复......

* * *

一个例子：

这个测试文件：

```
<?
namespace testing;

function echoSome(){
        echo 'Something';
}

\testing\echoSome(); 
```

在 phpsh 中产生这个输出（如预期的那样）

```
php> include '/path/test.php';
Something
php> 
```

但是再次尝试相同的调用不起作用：

```
php> \testing\echoSome();
Not executing input: Possible call to undefined function echoSome()
See /etc/phpsh/config.sample to disable UndefinedFunctionCheck. 
```

没有命名空间，该功能仍然可用：

```
<?
function echoSome(){
        echo 'Something';
}

echoSome(); 
```

在 phpsh 中：

```
php> include '/path/test.php';
Something 
```

并且通话仍然有效：

```
php> echoSome();
Something 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-17T20:31:15.713

我发现使用 eval 是一个很好的解决方法：

```
php> = eval('return \testing\echoSome();') 
```

是的，这是一个 hack，但很方便。:)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-11T08:51:48.787

有几种选择。

首先，您可能想尝试 PHP 5.4 的 CLI。据称，交互式控制台在 5.4 中得到了极大的改进。他们可能同意您的看法，即他们内置的 shell 使用起来很糟糕：) 我所知道的是它已经“翻新”过。

有一些替代方案，例如[phpa](http://david.acz.org/phpa/)，它似乎已经过时了，并且运行最新的[git 版本的 phpsh](https://github.com/facebook/phpsh)。从他们的“问题”页面来看，他们知道名称空间问题，因此他们可能会尝试改进它。由于它是开源的，您可以找人为您修复它，或者自己修复它;-)

我认为，总的来说，您面临着在普通 PHP CLI 或 phpsh 之间进行选择。没有足够成熟的替代方案可以做任何一个都可以做的事情，而且大多数替代方案甚至更加过时（即，有[php_repl](https://github.com/ieure/php_repl)，它已在 3 年前更新，而不是 phpsh 的 2 年）。

祝你好运

# xmpp - 在 smack 中处理 see-other-host

> ID：11308734
> 
> 赞同：0
> 
> 时间：2012-07-03T10:12:52.690
> 
> 标签：xmpp, smack, msn, msn-messenger, liveconnect

我正在尝试使用 smack 来连接到 Microsoft 的 Xmpp Msn api。去年 4 月，他们对其实现进行了更改，强制客户端实现“see-other-host”xmpp 规范。当我尝试连接到“xmpp.messenger.live.com”时，我得到

stream:error (see-other-host) at org.jivesoftware.smack.PacketReader.parsePackets(PacketReader.java:260) at org.jivesoftware.smack.PacketReader.access$000(PacketReader.java:43) at org.jivesoftware。 smack.PacketReader$1.run(PacketReader.java:70)

我正在调试，我可以看到原始收到的数据包

```
 <stream:stream from="messenger.live.com" version="1.0" id="59784" xmlns="jabber:client"     xmlns:stream="http://etherx.jabber.org/streams">
<stream:features xmlns:stream="http://etherx.jabber.org/streams"><starttls xmlns="urn:ietf:params:xml:ns:xmpp-tls"><required /></starttls></stream:features>
<proceed xmlns="urn:ietf:params:xml:ns:xmpp-tls" />
<stream:stream from="messenger.live.com" version="1.0" id="59785" xmlns="jabber:client" xmlns:stream="http://etherx.jabber.org/streams">
<stream:error xmlns:stream="http://etherx.jabber.org/streams"><see-other-host xmlns="urn:ietf:params:xml:ns:xmpp-streams">BY2MSG3020517.gateway.edge.messenge r.live.com</see-other-host></stream:error> 
```

但我无法找到一种方法来拦截和处理该重定向。有人做过吗？任何帮助，将不胜感激。谢谢。

顺便说一句，我已经在 smack 论坛上发布了这个但没有得到回复，希望这不被认为是交叉发布。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-21T18:45:56.717

这个背景可能有助于解决问题

see-other-host 流错误将客户端重定向到另一台服务器。就 Messenger 而言，它旨在允许客户端在其当前服务器停止服务时干净地切换到另一台服务器，或者连接到另一台服务器以实现负载平衡。

基于使用 SAMCK 的示例 Java 代码存在两个问题：

1.  注册的连接监听器没有收到异常通知
2.  无法从 XMPPException 访问流错误的文本元素

在内部处理重定向将是最友好的解决方案，但通知客户端新服务器至少可以允许客户端在没有用户干预的情况下建立新连接。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-19T20:07:46.003

`messenger.live.com`我终于通过在 ConnectionConfiguration 构造函数中将主机名从更改为 找到了解决此问题的方法，`64.4.61.217`如下面的代码所示：

我通过`nslookup messenger.live.com`在 Dos 命令提示符中执行 ( ) 获得了这个 IP，然后我获得了我在 ConnectionConfiguration 中使用的地址。

```
 SASLAuthentication.registerSASLMechanism("X-MESSENGER-OAUTH2",
            XMessengerOAuth2.class);
    SASLAuthentication.supportSASLMechanism("X-MESSENGER-OAUTH2");
        ConnectionConfiguration config = new ConnectionConfiguration("64.4.61.217", 5222, "messenger.live.com");
        config.setRosterLoadedAtLogin(true);
        config.setSASLAuthenticationEnabled(true);
        connection = new XMPPConnection(config);

        connection.connect();

        connection.login(username, password); 
```

希望这会有所帮助,,,

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-30T11:05:48.297

我向 SMACK API 添加了 see-other-host 支持以进行尝试。现在我可以将看到其他主机地址作为例外。例如，当我尝试连接到 messenger.live.com 地址时，我成功获得了 see-other-host：BAYMSG1020118.gateway.messenger.live.com。然后我尝试连接 BAYMSG1020118.gateway.messenger.live.com ，我再次看到不同的地址：BY2MSG4010610.gateway.messenger.live.com 最后当我尝试连接 BY2MSG4010610.gateway.messenger 时。 live.com，我遇到了这个异常：

```
No response from the server.: 
java.lang.NullPointerException
at org.jivesoftware.smack.NonSASLAuthentication.authenticate(NonSASLAuthentication.java:73)
at org.jivesoftware.smack.XMPPConnection.login(XMPPConnection.java:211)
at org.jivesoftware.smack.Connection.login(Connection.java:348)
at com.ms.wlm.XmppClient.logIn(XmppClient.java:161)
at com.ms.wlm.Program.main(Program.java:62) 
```

我也会与 Smack 家伙分享这个结果。如果您愿意，我可以通过电子邮件将我们的 xmpp 流量捕获发送给您。最好的问候， 阿尔珀·奥兹达马尔

# javascript - 将值输入到链接 GetElementByID

> ID：11308735
> 
> 赞同：0
> 
> 时间：2012-07-03T10:12:53.383
> 
> 标签：javascript

谁能告诉我如何执行以下操作：

```
onclick="window.location.href='http://www.google.com/document.getElementById("id")' 
```

显然这不是你这样做的方式，但我正在寻找将文本输入中写入的内容放入链接的正确方法。

因此，如果元素 ID 中包含 Google 一词，则链接将结束：

```
http://www.google.com/Google 
```

任何指针/指导将是完美的谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-03T10:15:13.367

您可以使用

```
onclick="window.location.href='http://www.google.com/'+document.getElementById('id').value;" 
```

或者

```
onclick='window.location.href="http://www.google.com/"+document.getElementById("id").value;' 
```

小提琴：http: [//jsfiddle.net/mageek/Gxb5B/13/](http://jsfiddle.net/mageek/Gxb5B/13/)

**一步一步解释：**

1- `onclick=";"`
2- `onclick="window.location.href=;"`
3- `onclick="window.location.href=link+value;"`
4-`onclick="window.location.href='http://www.google.com/'+document.getElementById('id').value;"`

不要忘记双引号内的单引号或单引号内的双引号

# php - HTMLPurifier：如何在不重新定义整个白名单的情况下允许单个属性

> ID：11308739
> 
> 赞同：10
> 
> 时间：2012-07-03T10:13:00.530
> 
> 标签：php, html, security, sanitization, htmlpurifier

我`HTMLPurifier`用来清理 HTML 字符串（它是关于安全性的）。

调用 HTMLPurifier 时会删除某些属性（如`width`或）。`height`我不认为这是一个安全问题。

如何在不重新定义白名单的情况下添加此属性？

我搜索了 Stackoverflow 和 HTMLPurifier 文档，但唯一的解决方案似乎是：

```
$config->set('HTML.Allowed', 'p,b,a[href],i'); 
```

但这不是解决方案，因为我不想重新定义白名单（我信任默认的 HTMLPurifier 配置，我只想添加一个例外）。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-05-28T14:49:20.883

我发现了同样的问题，唯一的解决方案是将白名单样式粘贴到 HTML 净化器添加属性设置中。

白名单设置为：

```
a.class,
a.href,
a.id,
a.name,
a.rev,
a.style,
a.title,
a.target,
a.rel,
abbr.title,
acronym.title,
blockquote.cite,
div.align,
div.style,
div.class,
div.id,
font.size,
font.color,
h1.style,
h2.style,
h3.style,
h4.style,
h5.style,
h6.style,
img.src,
img.alt,
img.title,
img.class,
img.align,
img.style,
img.height,
img.width,
li.style,
ol.style,
p.style,
span.style,
span.class,
span.id,
table.class,
table.id,
table.border,
table.cellpadding,
table.cellspacing,
table.style,
table.width,
td.abbr,
td.align,
td.class,
td.id,
td.colspan,
td.rowspan,
td.style,
td.valign,
tr.align,
tr.class,
tr.id,
tr.style,
tr.valign,
th.abbr,
th.align,
th.class,
th.id,
th.colspan,
th.rowspan,
th.style,
th.valign,
ul.style 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-10T11:17:09.700

这段代码：

```
<?php

require('purifier/library/HTMLPurifier.auto.php');

$html = "<img width='200' height='200' src='test.jpg' alt='bla>";
$config = HTMLPurifier_Config::createDefault();
$purifier = new HTMLPurifier($config);
echo $purifier->purify($html) . "\n";

$html = "<table width='100'><tr><td>test</td></tr></table>";
echo $purifier->purify($html) . "\n";

?> 
```

产生这个输出：

```
<img width="200" height="200" src="test.jpg" alt="bla" />
<table width="100"><tr><td>test</td></tr></table> 
```

使用 php 5.3.10 和 HTMLPurifier 4.4.0 版。所以这些属性默认不会被剥离（我使用的是 HTMLPurifier 的全新安装）

您在哪些 HTML 元素上使用宽度/高度属性？

另请注意，当使用 xhtml strict 时，无效属性将被删除。据我所知，img 和 table 元素的宽度和高度是允许的，但应该是小写的。除了图像元素上的“width='100%'”（在 rap-2-h 他的评论之后添加以保持完整性）

一般来说：使用[addAttribute](http://htmlpurifier.org/docs/enduser-customize.html#addAttribute)而不是白名单来添加允许的属性。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-03T13:24:04.493

关闭魔术引号。

# drupal - 将关联数组存储在文件中

> ID：11308743
> 
> 赞同：-2
> 
> 时间：2012-07-03T10:13:03.967
> 
> 标签：drupal, drupal-7, drupal-modules

我正在为 drupal 编写一个模块。在那我有一个大的关联数组（大约 1000 个条目），它的键为 'string' ，值为 'floats' 。

```
eg. $array = array('hello' => 122.23, 'name' => 334.3 ....) 
```

我想通过序列化将它存储在数据库中..但是数组大小是动态的，所以我想将它存储在一个文件中以减少访问时间..

我应该在我的 .module 中使用哪些 drupal7 api 函数来创建文件、写入内容并从文件中读取数组，它们如何比等效的 php 文件处理函数更好？

注意 - 此数组不经常使用，因此我不想将其存储为持久变量。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-03T11:33:46.833

我个人不会打扰，我会使用 variable_set() 将其添加为持久变量。变量表使用 longblob，所以我看不出有问题，数据也被缓存以便快速访问。

如果您想创建一个文件并以这种方式存储它，您可以在[http://api.drupal.org/api/drupal/includes!file.inc/group/file/7](http://api.drupal.org/api/drupal/includes!file.inc/group/file/7)找到所有功能，尽管这样做是这样的将意味着至少对数据库进行一次命中，因为所有文件都通过 file_managed 表。而如果您将其存储为持久变量，则数据已经可供您的模块使用，而无需查询数据库，因为数据已经在 Bootstrap 过程中提取。

# c++ - 如何使用 Boost.Python 从 C++ 对象创建 Python 对象

> ID：11308747
> 
> 赞同：2
> 
> 时间：2012-07-03T10:13:20.787
> 
> 标签：c++, inheritance, python-2.7, boost-python

我有一个使用很多类的 C++ 项目。主要的是' `sso::Object`'（每个类都在'sso'命名空间中），这个类派生到其他一些类，但一个是抽象的：' `sso::Drawable`'。

这个类有两个纯虚方法' `sso::Drawable::set_opacity`'和' `sso::Drawable::raw_draw`'，它派生到`sso::View`实现这两个方法的其他类，如''。

整个项目在 C++ 中使用时运行良好，但我也想在 Python 中使用它，所以我创建了一个 Boost.Python 模块，如下所示：

```
class DrawableWrapper : public sso::Drawable , public wrapper<sso::Drawable> {
public:
    void set_opacity(byte opacity) { this->get_override("set_opacity")(opacity); }

    void raw_draw(const sso::Rect &rect,sso::Target &target,const sso::Position &position) const {
        this->get_override("raw_draw")(rect,target,position);
    }
};

BOOST_PYTHON_MODULE(sso) {

    class_<DrawableWrapper,boost::noncopyable> ("Drawable",init<>())
        .add_property ("opacity",&sso::Drawable::get_opacity)
        // python_sso_getter & python_sso_setter_* are only used for an easier access to accessors
        .add_property ("position",python_sso_getter<sso::Drawable,sso::Position,&sso::Drawable::get_position>,python_sso_setter_1_const<sso::Drawable,sso::Position,&sso::Drawable::set_position>)
        .def("raw_draw",pure_virtual(&sso::Drawable::raw_draw))
   ;

    class_<sso::View,bases<sso::Drawable> >                 ("View",init<>())
        .def("insert",python_sso_setter_1<sso::View,sso::Drawable*,&sso::View::insert>)
        .def("remove",&sso::View::erase)
    ;

} 
```

这段代码编译没有错误，但是当我在 Python 中执行这些行时：

```
myview = sso.View()
print myview 
```

我得到这个输出：

> <sso.View 对象位于 0x7f9d2681a4b0>

但是我的 C++ 调试器告诉我变量 'v'（python 'myview'）是一个 ' `sso::Object`' 实例，而不是一个 ' ' 实例`sso::View`。`sso::View::View()`被调用但变量类型不是视图，我不知道为什么。你对此有什么想法吗？您是否做了类似的事情并找到了使其发挥作用的方法？

我使用 Python2.7 和 Boost.Python1.49 和 gcc 版本 4.6.1

编辑：我犯了一个错误：`sso::Drawable`不继承自`sso::Object`，但`sso::View`确实（=多重继承）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-03T10:57:46.327

python的输出`<sso.View object at 0x7f9d2681a4b0>`只是告诉你它认为对象类型被称为什么，它与在 C++ 级别创建的对象的实际类型无关。

正如您已经告诉 boost python 公开对象那样`sso.View`，这就是 python 所看到的。如果您要将代码更改为公开`std::string`，那么在您创建它之后， `sso.View`python 仍会报告。`<sso.View object at 0x7f9d2681a4b0>`

同样，如果您`"View"`将 C++ 更改为，`"BlahDeBlah"`那么 python 会将对象报告为`<sso.BlahDeBlah object at 0x7f9d2681a4b0>`（当然您还必须通过`sso.BlahDeBlah()`

除此之外，我看不出您发布的代码有什么问题。`sso::View`继承`sso::Object`自? 如果是这种情况，并且您目睹了`sso::view::View()`被调用，那么我认为您可能只是在调试器告诉您对象是 type 时误解了它`sso::Object`。也许它有一个指向基类的指针或在您调试时类似的东西？

当您调用`myview.insert`或`myview.remove`从 python 调用时会发生什么？

编辑：我怀疑（尽管我可能是错的）你可能没有在你的编译器中打开 RTTI，所以`typeid()`只是返回实现你在调用时所在函数的类型`typeid()`。这肯定会解释为什么你`sso::View`在`insert`其他功能中得到不同的答案。

无论如何，我一直在研究文档，我认为您的问题实际上是您提供了覆盖该`raw_draw`方法的能力，但您实际上并没有用任何东西覆盖它。

如果您查看[此文件底部](http://www.boost.org/doc/libs/1_48_0/boost/python/pure_virtual.hpp)`pure_virtual`的boost::python 函数的声明，您会看到一条注释：

```
//
// Passed a pointer to member function, generates a def_visitor which
// creates a method that only dispatches to Python if the function has
// been overridden, either in C++ or in Python, raising a "pure
// virtual called" exception otherwise.
// 
```

所以你看到的只是预期的行为。`raw_draw`如果您为in或从它继承的 python 类提供覆盖，`sso::View`那么您不应再收到此错误。

# c# - 转换通用列表 到字节[]

> ID：11308749
> 
> 赞同：2
> 
> 时间：2012-07-03T10:13:24.523
> 
> 标签：c#, asp.net, bytearray, generic-list

嗨，我需要将通用列表转换为字节 []，但我的代码不起作用有人可以给我一些提示吗？

谢谢！

```
List<string> lines = inputFile.Split(new string[] { Environment.NewLine }, StringSplitOptions.None).ToList();

byte[] output = new byte[lines.Count];
Encoding enc = Encoding.UTF8;
int i = 0;

foreach (string item in lines)
{
   output[i] = enc.GetBytes(item);
   i++;
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-03T10:15:55.130

这是代码，希望这有帮助

```
byte[] dataAsBytes = lines.SelectMany(s => Text.Encoding.UTF8.GetBytes(s))
  .ToArray(); 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-07-03T10:16:58.033

我假设您不想要一个对文件的所有内容进行编码的大数组，因为如果是这种情况，则绝对不需要先拆分成行；那只会让你的工作更难。有鉴于此：

您正在使用一个字节数组，您应该使用一个*字节数组数组*，如下所示：

```
byte[][] output = new byte[lines.Count][]; 
```

换句话说，`output`需要有两个维度：它具有与行一样多的项目，并且每个项目本身都是一个数组，具有以 UTF-8 对该行的内容进行编码所需的字节数。

在您对此有所了解之后，还可以考虑使用 LINQ 以获得更简洁的语法：

```
var lines = /* ... */
var output = lines.Select(l => Encoding.UTF8.GetBytes(l)).ToArray(); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-03T10:19:32.460

```
var bytes = File
    .ReadLines(@"path")
    .Select(line => Encoding.UTF8.GetBytes(line));

foreach(var lineBytes in bytes)
{
    //DoStuffz
} 
```

# mongodb - com.mongodb.MongoException：不与 master 交谈并重试用完

> ID：11308750
> 
> 赞同：1
> 
> 时间：2012-07-03T10:13:24.517
> 
> 标签：mongodb, search, elasticsearch

我的搜索现在不起作用。我猜是因为我的索引没有为副本集配置：

```
curl -XPUT 'http://localhost:9200/_river/mongodb/_meta' -d '{
  "type": "mongodb", 
  "mongodb": { 
    "db": "mongo", 
    "host": "local", 
    "port": "40000", 
    "collection": "users"
  }, 
  "index": { 
    "name": "api", 
    "type": "users" 
  }
}'` 
```

无论如何要正确声明副本集，以便elasticsearch可以找到主人，PHP驱动程序的方式：

```
$m = new Mongo(
  "mongodb://localhost:40000,localhost:41000", 
  array("replicaSet" => true)
); 
```

这样弹性搜索就可以自动故障转移到另一个成员。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-28T19:59:00.233

我通过更新到最新版本的客户端驱动程序解决了这个问题。

以前的（次要）版本无法连接到最新的 mongo 服务器。

# r - 在一个函数调用中向 R data.table 添加多列？

> ID：11308754
> 
> 赞同：77
> 
> 时间：2012-07-03T10:13:31.337
> 
> 标签：r, data.table

我有一个在列表中返回两个值的函数。两个值都需要添加到 data.table 的两个新列中。函数的评估成本很高，所以我想避免两次计算函数。这是示例：

```
library(data.table)
example(data.table)
DT
   x y  v
1: a 1 42
2: a 3 42
3: a 6 42
4: b 1  4
5: b 3  5
6: b 6  6
7: c 1  7
8: c 3  8
9: c 6  9 
```

这是我的功能的一个例子。请记住，我说过它的计算成本很高，除此之外，没有办法从其他给定值中推断出一个返回值（如下例所示）：

```
myfun <- function (y, v) 
{
ret1 = y + v
ret2 = y - v
return(list(r1 = ret1, r2 = ret2))
} 
```

这是我在一个语句中添加两列的方法。但是，那个需要调用 myfun 两次：

```
DT[,new1:=myfun(y,v)$r1][,new2:=myfun(y,v)$r2]

   x y  v new1 new2
1: a 1 42   43  -41
2: a 3 42   45  -39
3: a 6 42   48  -36
4: b 1  4    5   -3
5: b 3  5    8   -2
6: b 6  6   12    0
7: c 1  7    8   -6
8: c 3  8   11   -5
9: c 6  9   15   -3 
```

关于如何做到这一点的任何建议？`r2`每次调用 myfun 时，我都可以保存在单独的环境中，我只需要一种方法来一次通过引用添加两列。

* * *

## 回答 #1

> 赞同：102
> 
> 时间：2012-07-03T10:25:00.810

从`data.table`v1.8.3 开始，您可以这样做：

```
DT[, c("new1","new2") := myfun(y,v)] 
```

另一种选择是存储函数的输出并逐个添加列：

```
z <- myfun(DT$y,DT$v)
head(DT[,new1:=z$r1][,new2:=z$r2])
#      x y  v new1 new2
# [1,] a 1 42   43  -41
# [2,] a 3 42   45  -39
# [3,] a 6 42   48  -36
# [4,] b 1  4    5   -3
# [5,] b 3  5    8   -2
# [6,] b 6  6   12    0 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2017-05-30T15:34:08.180

无法使用答案，例如当函数未矢量化时。

例如，在以下情况下，它将无法按预期工作：

```
myfun <- function (y, v, g) 
{
  ret1 = y + v + length(g)
  ret2 = y - v + length(g)
  return(list(r1 = ret1, r2 = ret2))
}
DT
#    v y                  g
# 1: 1 1                  1
# 2: 1 3                4,2
# 3: 1 6              9,8,6

DT[,c("new1","new2"):=myfun(y,v,g)]
DT
#    v y     g new1 new2
# 1: 1 1     1    5    3
# 2: 1 3   4,2    7    5
# 3: 1 6 9,8,6   10    8 
```

它总是添加 column 的大小`g`，而不是每个向量的大小`g`

这种情况下的解决方案是：

```
DT[, c("new1","new2") := data.table(t(mapply(myfun,y,v,g)))]
DT
#    v y     g new1 new2
# 1: 1 1     1    3    1
# 2: 1 3   4,2    6    4
# 3: 1 6 9,8,6   10    8 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2016-04-08T12:13:46.417

为了建立上一个答案，可以使用`lapply`输出多列的函数。然后可以将该函数与 data.table 的更多列一起使用。

```
 myfun <- function(a,b){
     res1 <- a+b
     res2 <- a-b
     list(res1,res2)
 }

 DT <- data.table(z=1:10,x=seq(3,30,3),t=seq(4,40,4))
 DT

 ## DT
 ##     z  x  t
 ## 1:  1  3  4
 ## 2:  2  6  8
 ## 3:  3  9 12
 ## 4:  4 12 16
 ## 5:  5 15 20
 ## 6:  6 18 24
 ## 7:  7 21 28
 ## 8:  8 24 32
 ## 9:  9 27 36
 ## 10: 10 30 40

 col <- colnames(DT)
 DT[, paste0(c('r1','r2'),rep(col,each=2)):=unlist(lapply(.SD,myfun,z),
                                                   recursive=FALSE),.SDcols=col]
 ## > DT
 ##     z  x  t r1z r2z r1x r2x r1t r2t
 ## 1:  1  3  4   2   0   4   2   5   3
 ## 2:  2  6  8   4   0   8   4  10   6
 ## 3:  3  9 12   6   0  12   6  15   9
 ## 4:  4 12 16   8   0  16   8  20  12
 ## 5:  5 15 20  10   0  20  10  25  15
 ## 6:  6 18 24  12   0  24  12  30  18
 ## 7:  7 21 28  14   0  28  14  35  21
 ## 8:  8 24 32  16   0  32  16  40  24
 ## 9:  9 27 36  18   0  36  18  45  27
 ## 10: 10 30 40  20   0  40  20  50  30 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2018-08-07T07:44:31.763

如果一个函数返回一个矩阵，您可以通过将函数包装为先将矩阵转换为列表来实现相同的行为。我想知道 data.table 是否应该自动处理它？

```
matrix2list <- function(mat){
unlist(apply(mat,2,function(x) list(x)),FALSE)
}

DT <- data.table(A=1:10)

myfun <- function(x) matrix2list(cbind(x+1,x-1))

DT[,c("c","d"):=myfun(A)]

##>DT
##      A  c d
##  1:  1  2 0
##  2:  2  3 1
##  3:  3  4 2
##  4:  4  5 3
##  5:  5  6 4
##  6:  6  7 5
##  7:  7  8 6
##  8:  8  9 7
##  9:  9 10 8
## 10: 10 11 9 
```

* * *

## 回答 #5

> 赞同：-5
> 
> 时间：2012-07-04T19:00:13.370

为什么不让您的函数接收数据框并直接返回数据框？

```
myfun <- function (DT) 
{
DT$ret1 = with(DT, y + v)
DT$ret2 = with(DT, y - v)
return(DT)
} 
```

# android - java.lang.IllegalArgumentException：InputStream 不能为空

> ID：11308758
> 
> 赞同：0
> 
> 时间：2012-07-03T10:13:42.320
> 
> 标签：android, google-maps, inputstream, mapactivity

当我使用此代码查找两个地理点之间的距离并在它们之间绘制路径时，我得到了这个异常

```
java.lang.IllegalArgumentException: InputStream cannot be null

public class MapRouteActivity extends MapActivity {
    LinearLayout linearLayout;
    MapView mapView;
    private Road mRoad;

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);
        mapView = (MapView) findViewById(R.id.mapview);
        mapView.setBuiltInZoomControls(true);
        new Thread() {
            @Override
            public void run() {
                double fromLat = 49.85, fromLon = 24.016667;
                double toLat = 50.45, toLon = 30.523333;
                String url = RoadProvider
                        .getUrl(fromLat, fromLon, toLat, toLon);
                InputStream is = getConnection(url);
                mRoad = RoadProvider.getRoute(is);
                mHandler.sendEmptyMessage(0);
            }
        }.start();
    }

    Handler mHandler = new Handler() {
        public void handleMessage(android.os.Message msg) {
            TextView textView = (TextView) findViewById(R.id.description);
            textView.setText(mRoad.mName + " " + mRoad.mDescription);
            MapOverlay mapOverlay = new MapOverlay(mRoad, mapView);
            List<Overlay> listOfOverlays = mapView.getOverlays();
            listOfOverlays.clear();
            listOfOverlays.add(mapOverlay);
            mapView.invalidate();
        };
    };

    private InputStream getConnection(String url) {
        InputStream is = null;
        try {
            URLConnection conn = new URL(url).openConnection();
            is = conn.getInputStream();
        } catch (MalformedURLException e) {
            e.printStackTrace();
        } catch (IOException e) {
            e.printStackTrace();
        }
        return is;
    }

    @Override
    protected boolean isRouteDisplayed() {
        return false;
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-03T10:18:07.513

你`InputStream`是 null 你需要修复它：

```
InputStream is = getConnection(url);
if (is != null) {
   // do your work
}
else {
  // logging error
} 
```

在您的情况下，您的方法会`getConnection(url)`返回`null`，因此首先检查您是否有权访问 Internet：

```
<uses-permission android:name="android.permission.INTERNET"/> 
```

# apache-flex - Flex 是否提供了一些核心组件来显示交互式地图、显示纬度/经度、缩放和平移等

> ID：11308763
> 
> 赞同：0
> 
> 时间：2012-07-03T10:13:57.383
> 
> 标签：apache-flex, maps, gis

我是 GIS（地理信息系统）领域的新手。我只是想知道Flex是否提供了一些核心组件来显示交互式地图、显示纬度/经度、缩放和平移等。

我知道一些第三方 API，如 ARCGIS、ModestMaps、MapQuest 等，但我想知道 Flex 本身是否为此提供任何支持。

如果没有，那么最好使用哪个开源 API。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-03T16:01:51.063

have a look on Tour de Flex app to explore Flex capabilities and resources

[http://www.adobe.com/devnet/flex/tourdeflex.html](http://www.adobe.com/devnet/flex/tourdeflex.html)

# java - 条件 - 应该在等待之前解锁吗？

> ID：11308768
> 
> 赞同：12
> 
> 时间：2012-07-03T10:14:19.407
> 
> 标签：java, multithreading, concurrency

你能告诉我是否应该在等待条件之前释放锁吗？

```
try {
    lock.lock();
    while (isNotEmpty()) {
        condition.await();
    }
} finally {
    lock.unlock();
} 
```

或者

```
try {
    lock.lock();
    while (isNotEmpty()) {
        lock.unlock();
        condition.await();
    }
} finally {
    lock.unlock();
} 
```

* * *

## 回答 #1

> 赞同：31
> 
> 时间：2012-07-03T10:17:41.993

不，你不需要在调用之前显式释放锁`await`，`await`它会自动释放。从[javadoc](http://docs.oracle.com/javase/7/docs/api/java/util/concurrent/locks/Condition.html#await%28%29)：

> 与此条件关联的锁被原子释放，并且当前线程被禁用以用于线程调度目的[...]

和：

> 调用此方法时，假定当前线程持有与此关联的锁`Condition`。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-07-03T10:16:43.287

您只能`await()`在`Condition`您已锁定（）关联的`Lock`

为什么你没有条件让 isEmpty 让你的条件更清楚。

请参阅 Javadoc 中的示例。[http://docs.oracle.com/javase/7/docs/api/java/util/concurrent/locks/Condition.html](http://docs.oracle.com/javase/7/docs/api/java/util/concurrent/locks/Condition.html)

例如

```
 lock.lock();
 try {
   while (count > 0)
     isEmpty.await();
   // do something when empty.
 } finally {
   lock.unlock();
 } 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-03T10:21:48.307

wait 和 notify 必须在同步块中调用 with，因此**相同的规则适用于 await 和 signal。虽然 await 自动释放，但如果你这样做应该在 lock() 和 unlock() 之间**

```
lock.lock()          // start of synchronized block

condition.await()

lock.unlock()        // end of synchronized block 
```

# c# - 在 Active Directory 中获取用户组后如何获取组的 SID？

> ID：11308770
> 
> 赞同：3
> 
> 时间：2012-07-03T10:14:25.553
> 
> 标签：c#, windows, active-directory, active-directory-group

我正在使用 DirectorySearcher 获取 ActiveDirectory 中的用户组。

我的问题是，一旦我使用“memberOf”获取用户组，如何获取与每个组关联的 SID？

我在 .NETFramework 2.0 环境中工作。

```
DirectoryEntry entry = new DirectoryEntry(string.Format("LDAP://{0}", sUserDomain));
DirectorySearcher mySearcher = new DirectorySearcher(entry);
mySearcher.Filter = string.Format("(&(objectClass=user) (cn= {0}))", ui.DisplayName.ToString());
mySearcher.PropertiesToLoad.Add("memberOf");
SearchResult searchresult = mySearcher.FindOne(); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-04T02:36:43.887

无法在一次 LDAP 搜索中执行此操作，因为会`memberOf`返回一个可分辨名称。您必须进行另一个绑定才能`objectSid`从组对象中获取属性。这是代码。

```
DirectoryEntry entry = new DirectoryEntry(string.Format("LDAP://{0}", sUserDomain));
DirectorySearcher mySearcher = new DirectorySearcher(entry);
mySearcher.Filter = string.Format("(&(objectClass=user) (cn= {0}))", ui.DisplayName.ToString());
mySearcher.PropertiesToLoad.Add("memberOf");
SearchResult searchresult = mySearcher.FindOne();

foreach (string dn in searchresult.Properties["memberOf"])
{
    DirectoryEntry group = new DirectoryEntry(string.Format("LDAP://{0}/{1}", sUserDomain, dn));
    SecurityIdentifier sid = new SecurityIdentifier(group.Properties["objectSid"][0] as byte[], 0);
    Console.Out.WriteLine(sid.Value);
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-03T11:19:43.600

如果您使用的是 .NET 3.5 及更高版本，则应查看`System.DirectoryServices.AccountManagement`(S.DS.AM) 命名空间。在这里阅读所有相关信息：

*   [在 .NET Framework 3.5 中管理目录安全主体](http://msdn.microsoft.com/en-us/magazine/cc135979.aspx)
*   [System.DirectoryServices.AccountManagement 上的 MSDN 文档](http://msdn.microsoft.com/en-us/library/system.directoryservices.accountmanagement.aspx)

基本上，您可以定义域上下文并在 AD 中轻松找到用户和/或组：

```
 // define context for current domain
    using(PrincipalContext ctx = new PrincipalContext(ContextType.Domain))
    {
        // find  user 
        UserPrincipal user = UserPrincipal.FindByIdentity(ctx, "YourNameHere");

        if (user != null)
        {
            // get groups the user is a member of
            var groups = current.GetGroups();

            // iterate over all those groups
            foreach(var group in groups)
            {
                // fetch the SID for each group
                var sid = group.Sid;
            }
        }
    } 
```

新的 S.DS.AM 使得在 AD 中与用户和组一起玩变得非常容易！

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-03T11:20:56.517

看看他的文章： [Retrieving user SID using DirectoryEntry and DirectorySearcher](http://philippsen.wordpress.com/2010/12/07/retrieving-user-sid-using-directoryentry-and-directorysearcher/)

这为您提供了检索 SID 的完整工作示例。

# asp.net-mvc-3 - 如何在 MVC 3 中获取动态添加的文本框值

> ID：11308771
> 
> 赞同：0
> 
> 时间：2012-07-03T10:14:35.577
> 
> 标签：asp.net-mvc-3, model-view-controller

我想在 MVC 3 的提交按钮上获取动态添加的文本框的值。

我将值存储在隐藏字段中并使用 FromCollection。有没有更好的方法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-03T13:19:15.230

你可以做这样的事情（在编辑器之外写得很快，所以可能有错别字/问题）：制作一个视图模型：

```
public class DynamicTextBoxViewModel
{
    public IList<string> DynamicTextBox { get; set; }

    public int OtherStuffInViewModel { get; set; }
} 
```

然后在您的`Get`操作中：

```
var model = new YourViewModel
                {
                    DynamicTextBoxList =
                        new List<DynamicTextBox>
                            {
                                new DynamicTextBox
                                    {
                                        TextBoxText = string.Empty,
                                    }
                            },
                    OtherStuffInViewModel = xxx,
                };
return View(model) 
```

然后在您的`Post`操作中：

您可以将所有内容绑定到您想要的位置。

这个想法是将所有数据移动到 ViewModel 中并传递它，这样您就可以获得 ViewModel 的好处，而不是传递 FormCollection - 这更草率且更容易出错。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-03T11:40:49.313

如果您将值命名为 MyValues[x]，其中 x 是从零开始的连续递增整数，您可以将字符串值作为名为 MyValues 的字符串列表接收。

如果需要，此技巧也适用于主模型对象的属性。

你应该查看一些关于如何在 ASP mvc 中绑定到集合的文章，它们可以给你一些想法。

例如[http://haacked.com/archive/2008/10/23/model-binding-to-a-list.aspx](http://haacked.com/archive/2008/10/23/model-binding-to-a-list.aspx)

# language-agnostic - 顺序相关的位域

> ID：11308772
> 
> 赞同：0
> 
> 时间：2012-07-03T10:14:44.240
> 
> 标签：language-agnostic, bit-manipulation

如何将位置信息存储在位字段中（字段是 OR'd 或其他方式的顺序）？

背景：昨晚在编写我的游戏引擎的一部分时，它突然出现在我的脑海中。假设我们试图描述一种颜色，作为其中的一部分，我们拥有描述符中存在的颜色（及其顺序）。例如，我们今天在大多数显卡上都有以下颜色顺序：

```
RGBA
BGRA 
```

以下标志可用于描述支持的颜色：

```
None = 0x0
A = 0x1
R = 0x2
G = 0x4
B = 0x8 
```

但是，通过使用这些字段`A | R | G | B`与`B | G | R | A`. 您将如何设计可用于添加位置依赖性的标志和/或操作？添加排他性（例如，您不能在位置 1 中）和实用性（可以使用它的一些巧妙方式，可能在这种情况下）的奖励`R`标记`G`。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-03T10:14:44.710

您可以在添加每个标志之前将位字段移动每个唯一标志所需的位数。将使用以下标志：

```
None = 0x0
A = 0x1
R = 0x2
G = 0x4
B = 0x8
Shift = 0x4
Mask = 0xF (A | R | G | B) 
```

在 little-endian 系统上，您可以在 each 之前将其左移`Shift`( `<<`) `OR`。`None`可以消除左移，因为`0 << x = 0`. 给定原始示例：

```
A1 = A
A1R2 = (A1 << Shift) | R
A1R2G3 = (A1R1 << Shift) | G
A1R2G3B4 = (A1R1G3 << Shift) | B

B1 = B
B1G2 = (B1 << Shift) | G
B1G2R3 = (B1G2 << Shift) | R
B1G2R3A4 = (B1G2R3 << Shift) | A 
```

要提取每个位置的位置，您将反复向右移动（小端序）并将`AND`其与`Mask`. 重复此操作直到达到当前值`None`将为您提供相反的顺序。

```
let cur = the bit field we want to check
loop until cur = None:
  let val = cur AND Mask
  emit the name of val
  let cur = cur >> Shift 
```

这不提供排他性（您可以轻松地进行 AAGB），并且看起来它没有任何实用程序。

# meteor - Meteor 手动订阅场景

> ID：11308774
> 
> 赞同：1
> 
> 时间：2012-07-03T10:14:45.647
> 
> 标签：meteor

这是 Coffeescript 中的客户端代码片段 -

```
Meteor.autosubscribe ->
    Meteor.subscribe "message", Session.get("message")

Template.messages.messages = (page)->
    msg = Message.find().fetch()
    showMsg = msg.slice page* PERPAGE, PERPAGE

    if msg.length and showMsg.length < PERPAGE
        Session.set "message", { created: msg[msg.length - 1].created}
    else
        return showMsg 
```

服务器端每次只发布少量记录。

当客户端用完数据时，它会更新 Session 中的选择器，Meteor 会重新运行模板助手。

一个问题 - 是否有一种优雅的方式来通知服务器端没有更多数据返回？

我希望我可以在 subscribe onComplete 回调中访问一些信息，但是失败了:(

提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-12T07:52:30.783

[http://docs.meteor.com/#meteor_ui_listchunk](http://docs.meteor.com/#meteor_ui_listchunk)

else_func 函数返回 HTML

查询为空时调用的渲染函数

# c++ - 声明私有变量的捷径

> ID：11308786
> 
> 赞同：2
> 
> 时间：2012-07-03T10:15:24.983
> 
> 标签：c++, default, openmp, shortcut

在我的代码中，我有很多私有变量，但只有几个共享变量。所以我不得不将所有私有变量一一写在私有子句中。`default`没有帮助，因为它只提供了两个选择：`none`和`shared`. 结果，有没有办法将私有设为默认？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-03T14:13:16.960

OpenMP 不提供`default(private)`C++ 的原因很简单，因为 C++ 已经提供了一种使这些变量私有的机制 - 只需*在内部范围内定义它们*：

```
#pragma omp parallel
{
   int this_one_is_private;
   double this_on_is_private_too;
   int and_this_one_too;
   double more_privateness;
   ...
} 
```

OpenMP 确实`DEFAULT(PRIVATE)`适用于 Fortran，因为后者没有在内部范围内定义变量的机制。

# c# - 可以在 finally 块中处理数据集然后返回数据集吗？

> ID：11308788
> 
> 赞同：1
> 
> 时间：2012-07-03T10:15:40.957
> 
> 标签：c#, dataset, dispose, try-catch-finally

所以我要接管一个现有的项目，以前的编码员做了很多有趣的事情。

我看到最多但不是很明白的是下面的代码块

```
finally
{
   if (conn != null)
   {
       conn.Close();
       ds.Dispose();
   }
}
return ds; 
```

VS2010 没有抱怨，项目按预期工作，但这对我来说很奇怪。

如何处理然后返回？除非最终以某种方式返回后发生？

如果有人可以请解释为什么这是合法的？或任何其他解释将不胜感激。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-03T10:18:39.047

它是不正确的，因为您将丢失数据集中的信息，`ds`所以在从它返回之前 进行处置。*在 finally 块中处理连接似乎完全没问题，但不是*必须返回到调用方法的数据集 ds。`method`

 ** * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-03T10:23:26.107

当您不再需要它们时，您应该 .Dispose() 对象。显然，在这个例子中你已经释放了 DataSet，所以你绝对不应该在这里释放它。

DataSet 上的 .Dispose() 实际上可能不会做任何事情，这就是代码似乎可以工作的原因。请记住，.Dispose() 旨在关闭并最终确定垃圾收集器无法执行的资源的使用，或者为了立即处理此类资源，而不是在垃圾收集器启动时。但您不应该依赖 .Dispose()在 DataSet 上不做任何事情 - 可能在某些情况下它确实做某事。修复代码。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-03T10:19:10.650

就像 ds 似乎在它返回时被释放了，当你运行代码时它是否会给你任何错误，如果是的话，重构该代码，并//评论 ds.Dispose

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-08-28T18:03:28.677

当您调用 Dispose() 函数时，您只是将对象标记为垃圾收集，而不是立即“释放/销毁”该对象。这就是代码有效的原因。如果该逻辑没有任何意义，您可以随时执行以下操作：

```
try{
    // ... your code
    return ds;
}
catch(Exception x)
{
    // ...  Exception code
}
finally
{
   if (conn != null)
   {
       conn.Close();
       ds.Dispose();
   }
} 
```*

# grails - 无法解码 Grails 应用程序中的 urlMapping

> ID：11308792
> 
> 赞同：0
> 
> 时间：2012-07-03T10:15:50.853
> 
> 标签：grails, grails-controller

问题：我能够执行我的控制器（ReviewMetricsController）的默认操作（listLatest）。但是，我无法通过**表单提交**显式调用其他操作（索引） 。我正在使用 Grails 2.0.4 并在安装了 Grails 插件的 Eclipse IDE 中以开发模式运行我的应用程序。

详细信息：我的 gsp 中有一个表格，如下所示

```
 <g:form name="queryForm"
        url="[controller:'reviewMetrics', action:'index']">
        <g:actionSubmit value="submit" />
    </g:form> 
```

当我提交上述表格时，我收到 404 错误

```
The requested resource (/reviewmetricsapp/reviewMetrics/index) is not available 
```

我的 Controller( `reviewMetricsController.groovy`) 如下所示

```
package reviewmetricsapp

class ReviewMetricsController {

    static scope = "session"
    static defaultAction = "listLatest"
    def gatherMetricsService
    def grailsApplication
    def latestMetrics

    def index() {
        render(view:"dashboard", model: [model: latestMetrics])
    }

    def listLatest(){
        println grailsApplication.config.metricsapp.perlScript.loc
        latestMetrics = gatherMetricsService.getLastWeekMetrics()
        println "printing ${latestMetrics}"
        render(view:"showMetrics", model: [metrics: latestMetrics])
    }

} 
```

我的`urlMappings.groovy`样子如下图

```
class UrlMappings {

    static mappings = {
        "/$controller/$action?/$id?"{ constraints {
                // apply constraints here
            } }

        "/reviewMetrics/index"{
            controller="reviewMetrics"
            action="index"
        }

        "/"(view:"/index")
        "500"(view:'/error')
    }
} 
```

任何帮助表示赞赏

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-03T12:50:54.243

1.  您不需要`URLMappings`为您的用例更改 -file。（删除 reviewMetrics/index 的特殊情况处理 - 它从第一条规则处理）

2.  请使用以下表单定义：

    ```
    <g:form name="queryForm"
       controller="reviewMetrics"
       action="index">
       [..]
    </g:form> 
    ```

3.  请仔细检查您的操作是否未被访问 - 只需`index.gsp`在控制器内放置一个普通的并且不关心。我猜错误在其他地方。

# android - Eclipse (ADT) 的 Android 插件在 SDK 20 升级后消失

> ID：11308798
> 
> 赞同：9
> 
> 时间：2012-07-03T10:16:04.477
> 
> 标签：android, eclipse-plugin, adt

我刚刚升级到 Android SDK rev 20，从那时起就无法在 Eclipse 3.7.2 中安装 ADT 插件。尽管在 Eclipse 安装的软件中引用了包（Android DDMS、Android 开发工具），但我没有显示任何 Android 项目或透视图，因此我无法在 Windows/Preferences 中设置 SDK 路径。 ..我也尝试重新安装，nada。附件：Linux Ubuntu 12.04 感谢帮助！

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-03T11:12:04.330

SDK r20 仅适用于 ADT r20，因此您也必须更新您的 ADT。

要更新您的 ADT，请执行以下步骤：

1.  在eclipse中：帮助->安装新软件...

2.  现在在`Work with`字段中输入此链接`https://dl-ssl.google.com/android/eclipse/`

3.  现在按回车。您将在下面的列表视图中看到一些项目。全选，然后按下一步。

4.  现在接受协议，然后单击下一步。

这将更新您的 ADT。你应该能够在eclipse中看到它

有关更多信息，请参阅：[Android 开发者网站](http://developer.android.com/sdk/installing/installing-adt.html)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-06T23:00:07.300

我在 Ubuntu 12.10 上遇到了同样的问题。我发现这是因为我使用的是 Java 1.5。升级到Java 1.7后问题消失了

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-21T10:40:50.343

使用 JDK 1.6 在 eclipse.ini 中设置“-vm”选项为我解决了这个问题。

尝试卸载/安装没有帮助。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-05T15:01:18.503

我们遇到了类似的问题。

通过转到帮助-> 检查更新来解决它。

取消选择除指定版本 20 的项目之外的所有内容。无法记住确切的列表。然后单击下一步并按照说明进行操作。

应该解决问题。

编辑：最重要的是该列表中的“Android 开发工具”本身。其他 3 Android 也很重要。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-03T17:22:20.050

你在 Ubuntu 上的默认 JVM 是什么？ADT 需要能够正确处理密钥库的 JVM。使用 Sun Java 6 很好。

除此之外，ADT 对 XML 编辑相关功能的一些 Web 服务工具 (WST) 具有可选的依赖关系。也许您可以检查是否正确安装？

如果没有其他帮助：Eclipse 3.8 和 4.2 已在 6 天前发布，因此从长远来看，使用全新安装的 Eclipse 4.2 和 ADT 20 可能是最佳选择。

# android - 在自定义文件夹中添加布局而不是在android中的布局文件夹

> ID：11308804
> 
> 赞同：0
> 
> 时间：2012-07-03T10:16:36.157
> 
> 标签：android, android-layout

我可以在我的文件夹中添加 layout.xml、R.java 和 string.xml 文件吗？

![在此处输入图像描述](../Images/76e63f3b4fbe0227ce170f4f491614ed.png)

**代码：**

**NetconnectionFailureActivity.java:(我的示例名称)**

```
package stack.api.netfailure;

import sync.api.netfailure.R;
import android.app.Activity;
import android.os.Bundle;
import android.webkit.WebView;

public class NetconnectionFailureActivity extends Activity {

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);        

    }
} 
```

**CheckActivity.java:(我的活动 -> 必须将其转换为 jar 文件）**

```
package stack.api.check;

import sync.api.netfailure.R;
import android.app.Activity;
import android.os.Bundle;

public class CheckActivity extends Activity {

    /** Called when the activity is first created. */
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.checklayout);

    }

} 
```

如果我将此 jar 文件添加到名为“CheckingJarFile”的新项目中，并且我在布局文件夹中的布局，它将崩溃为“ `import sync.api.netfailure.R not found`”。请任何人告诉我如何将我的布局、带有 myactivity 的 R.java 文件转换为一个包名？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-03T10:19:04.247

**不**，你不能这样做。

你必须`add only .java file in folder`和`Don't add R.java,its auto-generated file.``string.xml in res->values->string.xml`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-03T10:20:14.380

不，你不能那样做。您的布局 xmls 和 String xmls 是 Android 将使用的资源，如果找不到，您的代码将崩溃。因此，该结构清楚地指定必须在布局目录中指定布局，类似地在值目录中指定 Strings.xml。而且 R.java 也不是我们可以玩的东西。其系统生成。将其复制到其他目录会使其成为另一个 java 类，而不是资源跟踪器。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-03T10:20:27.607

我想这是不可能的。当您将 R.java 文件复制到自己的文件夹中并重新编译项目时，它会再次在 gen 文件夹中重新创建 R.java，并出现错误“R 类型已定义”。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-04T04:01:36.633

我通过如下尝试得到了解决方案，

*   我用我的活动、布局、R.java（自动生成）创建了一个项目
*   清理并构建项目。
*   现在创建了一个示例，添加了所需的权限。
*   在此示例中添加了相同的布局。
*   在我的项目中重命名清单文件和布局文件
*   现在将我的[项目转换为 jar](http://viralpatel.net/blogs/2008/12/create-jar-file-in-java-eclipse.html)文件
*   将此[jar 文件引用到示例中](http://help.eclipse.org/helios/index.jsp?topic=/org.eclipse.jdt.doc.user/tasks/tasks-33.htm)

**注意：**我的项目会抛出错误“ `Manifest file is missing`”，但是在转换为jar文件并在示例中引用后，`Sample is Working Good`.

否则我们可以动态创建布局。

# javascript - 每次在谷歌地图代码中的for循环条件中传递函数n次等待并传递函数

> ID：11308805
> 
> 赞同：-4
> 
> 时间：2012-07-03T10:16:42.230
> 
> 标签：javascript

这是创建一个谷歌地图，在谷歌地图中一次传递 n 个地址，这是不可能的，我将函数集间隔（2 个部分）传递给每个迭代函数

```
var directionsDisplay;
var directionsService = new google.maps.DirectionsService();
var n;
var j=1;
var array_list= new Array(n);
var array_storename=new Array(n);
function InitializeMap() 
{

    directionsDisplay = new google.maps.DirectionsRenderer();
    var latlng = new google.maps.LatLng(-34.397, 150.644);
    var myOptions =
    {
        zoom: 11,
        center: latlng,
        mapTypeId: google.maps.MapTypeId.ROADMAP
    };
    var map = new google.maps.Map(document.getElementById("map"), myOptions);

    directionsDisplay.setMap(map);
            directionsDisplay.setPanel(document.getElementById('directionpanel'));

    var control = document.getElementById('control');
    control.style.display = 'block';

document.getElementById('sorttable').style.display="none"

}
    function calcRoute(dist,varab) 
    {
    n=document.getElementById('Countnumbers').value;
    var start = document.getElementById('startvalue').value;
    var end = document.getElementById(dist).innerHTML;
    // end=end.replace(/[!@#$%&^*()-+=|\/:;><~]/gi," ");

    var request = {
        origin: start,
        destination: end,
        travelMode: google.maps.DirectionsTravelMode.DRIVING
    };

    directionsService.route(request, function (response, status) 
    {

        if (status == google.maps.DirectionsStatus.OK)
         {

         document.getElementById('sorttable').style.display="block";
         document.getElementById("total").style.visibility="hidden";
            directionsDisplay.setDirections(response);
            var route = response.routes[0];
             for (var i = 0; i < route.legs.length; i++)
             {

                 var a=route.legs[i].distance.text;
                 var b=route.legs[i].duration.text;
                 var bc=a+",About :"+b;
                var lblid="Labe"+varab;
                document.getElementById(lblid).innerHTML=bc;
                var store="lblstore"+varab;
                document.getElementById(store).title=end;
                 var len=10.0;
                 var dd=route.legs[i].distance.value/1000;
                 array_list[varab]=dd;
                 array_list.sort(function(a,b){return a-b});
              }

           }

       });

    }

function Button1_onclick() 
{
    for(j=1;j<=n;j++)
{
    document.getElementById('sorttable').style.display="block";
    n=document.getElementById('Countnumbers').value;
    var ss="lblstorename"+j;
    var ss1 =document.getElementById(ss).innerHTML;
//this labels are store my addresss
    calcRoute(ss,j);

 }   
} 
```

//我在谷歌地图中使用谷歌地图n号码地址一旦我是setTimeout（或）在for循环中设置间隔方法就不会去

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-03T10:31:43.187

为了在每次迭代之间添加 2 秒延迟，您需要递归调用 ur`calcRoute(..)`并将您的 for 循环代码移动到`calcRoute`方法中。

您的代码应如下所示 -

```
function Button1_onclick() {      
  document.getElementById('sorttable').style.display="block";
  n=document.getElementById('Countnumbers').value;
  var ss="lblstorename"+n;//use n insteadof j
  var ss1 =document.getElementById(ss).innerHTML;            
  calcRoute(ss,j);//only your first call is inside this method. rest all will be recurrsive
}

// making your calcRoute recurrsive
function calcRoute(ss, j){
  //your code here
  if(--j>0){           
     var ss="lblstorename"+j;             
     var ss1 =document.getElementById(ss).innerHTML;//not sure why are u using ss1
     setTimeout(function(){calcRoute(ss, j)}, 2000);//here you set your time delay
  }
} 
```

# css - UpdateProgress 的 CSS 样式问题

> ID：11308807
> 
> 赞同：1
> 
> 时间：2012-07-03T10:16:51.237
> 
> 标签：css, progress-bar, updateprogress

我在 Asp.net 中使用更新面板。我有更新进度，为此我设置了一个 DIV 并为其设置了一个 CSS。问题是当我调用它时，它会显示进度条，但我可以滚动窗口。我需要将其设为模态（显示进度条时无法选择）。可能吗

```
 .Progressbar
{
background-position: center center;
background-color:White;
filter: alpha(opacity=75);
opacity: 0.7;
background-image: url('../images/loading.gif');
background-attachment:fixed;
position:absolute;  
background-repeat: no-repeat;
/*z-index:0;*/
z-index:100;
width: 100%;
height: 100%;
top:0px;
right:0px;
botton: 0px;
left:0px;
overflow:hidden;} 
```

这是在更新进度中使用的 DIV 标签的 CSS。如果页面包含的数据超过屏幕分辨率的高度，则允许我查看这些内容。我怎样才能改变它，以便在显示进度条时没有任何选择，即使我们滚动我们这个 DIV 将保持在相同的位置（窗口）而不是滚动。

![见下图](../Images/8b4ca6f91f4b1acd5d5fb0af22ecdffa.png)

我怎样才能改变这个问题？？？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-03T10:19:24.027

为您的主 div（包含所有内容的 div）提供一个 id，并将`z-index`您的主 div 设置为`-1`并提供`z-index:0`给您的身体，同时更新进度并在完成时将 更改`z-index`为`1`.

# c++ - 防止更改继承的受保护成员的访问级别

> ID：11308815
> 
> 赞同：2
> 
> 时间：2012-07-03T10:17:20.033
> 
> 标签：c++, oop

有没有办法阻止某人更改继承的受保护成员的访问级别？有人可以在派生类中使用`using`声明并将继承的受保护成员的访问级别提高到公共。

现在的问题是如何防止这种情况发生？

**例子：**

```
#include <iostream>
using namespace std;

class A {
 protected:
   int i(){};
 };

class B : public A {
 public:
   using A::i;
};

int main() {
  B b;
  b.i();
  return 0;
} 
```

**如何预防**

```
#include <iostream>
using namespace std;

class A {
 private:
   void i(int) {};
 protected:
   int i(){};
 };

class B : public A {
 public:
   using A::i;
};

int main() {
  B b;
  b.i();
  return 0;
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-03T10:20:19.377

你不能。即使您可以阻止该`using`指令，派生类仍然可以简单地公开一个新的公共字段，该字段是对受保护成员的指针或引用，或者返回此类指针或引用的公共成员函数。

# jquery - 在 jquery 数据表中显示下拉列表

> ID：11308818
> 
> 赞同：0
> 
> 时间：2012-07-03T10:17:27.280
> 
> 标签：jquery, drop-down-menu, datatable

我正在使用 Jquery Datatable，它们真的很棒，但现在我的要求是，对于一列，我必须显示该下拉列表，该列表将有 2 个选项 1）批准 2）拒绝。现在我的要求是如何在 jquery Datatable 中显示下拉列表。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-03T10:28:29.667

```
<table id="tabid">
                    <thead>
                      <tr>
                        <th>Column 1</th>
                        <th>Column 2</th>

                      </tr>
                    </thead>
                    <tbody>
<tr>
<td>
   sample data
</td>
<td>
<select id="something">
<option value="1">Approve</option>
<option value="2">Reject</option>
</select>
</td>
</tr>
</tbody>
</table>

<script type="text/javascript">
$(document).ready(function(){
$('#tabid').dataTable();
});
</script> 
```

# vb.net - 使用“是”运算符选择案例

> ID：11308819
> 
> 赞同：14
> 
> 时间：2012-07-03T10:17:27.390
> 
> 标签：vb.net, select, case

在 VB.NET 中，我必须比较`select case`语句中的一些对象。

由于默认`select case`使用`=`操作符并且没有为对象定义，因此会引发编译错误。

我目前使用此解决方法：

```
Select Case True
    Case sender Is StyleBoldButton

    Case sender Is StyleUnderButton

    Case sender Is StyleItalicButton

End Select 
```

这实际上有效。

有没有更漂亮、更容易理解的东西？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-07-06T17:08:33.847

任何定义了必要的比较运算符（=、>=、<= 等）的东西对于`Select Case`. 正确（或错误），引用只是不与`=`VB 中的比较；一个必须使用`Is`。（或者`Object.Equals(objA As Object, objB As Object)`- 但是，真的，为什么？当你有的时候`Is`？）

但是看看[对象相等在 .NET 中的行为是不同的](https://stackoverflow.com/questions/10176737/object-equality-behaves-different-in-net)——也许 VB 的方式不那么令人困惑？无论如何，我认为你被困在 If-ElseIf 梯子上，因为`Select Case`不做`Is`. （嗯，确实如此，但这是一个不同的`Is`，更像`it`是 Hypercard。）我认为梯子看起来很聪明，很容易理解：

```
If sender Is StyleBoldButton Then 

ElseIf sender Is StyleUnderButton Then

ElseIf sender Is StyleItalicButton Then

Else

End If 
```

正如您所指出的，该`Select Case True`模式是 VB6 中的“OrElse”短路解决方法 - 一种满足实际需求的不稳定方式。但这在 VB.NET 中是不需要的。本着这种精神，也许最好使用更符合面向对象语言的最佳实践的设计模式。例如，正如 Denis Troller 所建议的，为什么不给每个按钮自己的事件处理程序呢？

但是，如果您坚持使用 Is-able Select 之类的东西，那么我自己可能不会使用以下内容：

```
With sender
    If .Equals(StyleBoldButton) Then

    ElseIf .Equals(StyleUnderButton) Then

    ElseIf .Equals(StyleItalicButton) Then

    Else

    End If
End With 
```

在这里，我指望在面对两种要比较的类型时`.Equals`像 C# 一样工作（请参阅[http://visualstudiomagazine.com/articles/2011/02/01/equality-in-net.aspx](http://visualstudiomagazine.com/articles/2011/02/01/equality-in-net.aspx)）。它的美妙之处在于它只被提及过一次；但是，您必须为每个“案例”键入所有这些内容。`==``object``sender``ElseIf .Equals( ... ) Then`

我不会使用自己的另一种方法是使用`GetHashCode()`：

```
Select Case sender.GetHashCode()

    Case StyleBoldButton.GetHashCode()

    Case StyleUnderButton.GetHashCode()

    Case StyleItalicButton.GetHashCode()

    Case Else

End Select 
```

在这里，我指望我所知道的（非常）少的东西`GetHashCode()`来唯一（足够）识别这些控件。（参见[Object.GetHashCode() 的默认实现](https://stackoverflow.com/questions/720177/default-implementation-for-object-gethashcode)）。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2014-10-23T23:24:58.407

我刚刚遇到了同样的问题。在看到另一篇文章和这篇文章后，我为自己找到了这个解决方案，我想分享一下，以防有人真的想像我一样使用 Select Case :)

```
 Select Case DirectCast(sender, Button).Name
        Case StyleBoldButton.Name

        Case StyleUnderButton.Name

        Case StyleItalicButton.Name

    End Select 
```

16 年 6 月 16 日更新：删除了“Is =”，因为它是不必要的。

16 年 8 月 27 日更新：将字符串的使用更改为使用 .Name 以更好地跟踪错误。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-07-03T16:55:07.463

Less concise, but much more readable:

```
if typeof(sender) is StyleBoldButton then

elseif typeof(sender) is StyleUnderButton then

elseif typeof(sender) is StyleItalicButton then

else

end if 
```

* * *

## 回答 #4

> 赞同：-2
> 
> 时间：2014-09-02T10:40:02.263

```
 Private Sub btnNum_Click(sender As Object, e As EventArgs) Handles btnNum0.Click, btnNum1.Click, btnNum2.Click, btnNum3.Click, btnNum4.Click, btnNum5.Click, btnNum6.Click, btnNum7.Click, btnNum8.Click, btnNum9.Click, btnDicemalPoint.Click, btnNumClear.Click, btnExit.Click
        If result = "0" Then
            result = ""
        End If
        Select Case True
            Case sender Is btnNum0
                If result <> "0" Then
                    result = result & "0"
                End If
            Case sender Is btnNum1
                result = result & "1"
            Case sender Is btnNum2
                result = result & "2"
            Case sender Is btnNum3
                result = result & "3"
            Case sender Is btnNum4
                result = result & "4"
            Case sender Is btnNum5
                result = result & "5"
            Case sender Is btnNum6
                result = result & "6"
            Case sender Is btnNum7
                result = result & "7"
            Case sender Is btnNum8
                result = result & "8"
            Case sender Is btnNum9
                result = result & "9"
            Case sender Is btnDicemalPoint
                If String.IsNullOrEmpty(result.ToString) Then
                    result = result & "0."
                ElseIf Not result.ToString.Contains(".") Then
                    result = result & "."
                End If
            Case sender Is btnNumClear
                result = 0
            Case sender Is btnExit
                Me.Close()
        End Select
End Sub 
```

# c# - 循环遍历所有 MDI 子窗体并关闭除当前窗体之外的所有其他窗体

> ID：11308821
> 
> 赞同：3
> 
> 时间：2012-07-03T10:17:29.403
> 
> 标签：c#, winforms, mdi

我正在使用 c# 开发一个 winforms 应用程序。我有一个 MDI 容器，它在左侧有一个菜单，通过按一个按钮，可以看到相应的表单。如果我单击打开 Form1 的按钮 3 次，则打开表单的 6 个实例。因此，我认为我必须编写一个处理任何其他 Form1 实例的方法。使用以下方法，我正在遍历 MDI 子项，但我需要一些帮助如何关闭除新实例之外的所有其他实例。

```
 public void DisposeAllButThis(Form form)
    {
        foreach (Form frm in this.MdiChildren)
        {
            if (frm == form)
            {
                frm.Dispose();
                return;
            }
        }
    } 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-07-03T10:22:17.240

您还需要检查表单是否属于同一类型：

```
public void DisposeAllButThis(Form form)
{
    foreach (Form frm in this.MdiChildren)
    {
        if (frm.GetType() == form.GetType() 
            && frm != form)
        {
            frm.Dispose();
            frm.Close();
        }
    }
} 
```

有关关闭和处置的更多信息，请参阅：[C# Form.Close 与 Form.Dispose](https://stackoverflow.com/questions/3097364/c-sharp-form-close-vs-form-dispose)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-03T10:43:28.570

```
public void DisposeAllButThis(Form form)
{
    foreach (Form frm in this.MdiChildren)
    {
        if (frm != form)
        {
            frm.Dispose();   
            frm.Close();          
        }
    }
    return;
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-03T10:20:04.240

```
foreach (Form frm in this.MdiChildren)
{
   if (frm != form)
   {
      frm.Dispose();
      return;
   }
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-08-21T19:31:16.730

通过这个幻想你可以从另一个类中调用它：并注意这一点：`frm.GetType() != Parent.GetType()`

```
public void DisposeAllButThis(Form parentForm)
    {
        foreach (Form frm in Parent.MdiChildren)
        {
            if (frm.GetType() != Parent.GetType()
                && frm != Parent)
            {
                frm.Close();
            }
        }
    } 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2019-06-19T16:40:53.970

如果您从另一个子表单调用，您可以使用： `this.DisposeAllButThis(this.FindForm());`

并使用方法：

```
private void DisposeAllButThis(Form form)
{
    foreach (Form frm in ParentForm.MdiChildren)
    {
       if (frm != form)
       {
          frm.Dispose();
          frm.Close();
       }
    }
 } 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2016-02-11T15:22:30.370

```
private void closallforms()
        {
            foreach (Form frm in this.MdiChildren)
            {
                if (frm != Parent)
                {
                    frm.Close();
                }
            }
        } 
```

# c# - 在 C# 中从 XmlNodeList 写入 txt 文件

> ID：11308822
> 
> 赞同：-1
> 
> 时间：2012-07-03T10:17:29.353
> 
> 标签：c#, xml

是否可以将 XmlNodeList 中的每个元素写入 .txt 文件，以及如何完成。不需要解析，我只是想把它写成一个txt文件。我正在尝试使用 StramWriter 来完成它，但到目前为止还没有运气。现在，我通过创建一个包含节点的字符串（它是内部 XML + 开始和结束标记）来做到这一点，但由于我有大量节点要处理，所以这非常慢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-03T10:25:42.880

```
using (var writer = System.IO.File.CreateText("myFile.txt"))
{
  foreach (node in nodeList)
  {
      writer.WriteLine(node.OuterXml);   // InnerXml to get only the content
  }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-03T10:23:25.037

考虑使用 XmlDocument。它有几个保存方法。

但是 XmlDocument 非常消耗内存，因此如果您的列表很长，它可能不是最佳选择。它还使用空格缩进（默认情况下），因此文件可能很大。

但是，如果您的列表很小，一切都很容易。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-03T10:25:18.133

看看这里，这可以帮助你 [http://msdn.microsoft.com/en-us/library/system.xml.xmldocument.save%28v=vs.71%29.aspx](http://msdn.microsoft.com/en-us/library/system.xml.xmldocument.save%28v=vs.71%29.aspx)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-03T10:29:08.300

你的意思 ：

```
XmlNodeList nodeList = ...;
String txt = "";
foreach (XmlNode xmlNode in nodeList)
{
    txt += xmlNode.OuterXml;
}
File.WriteAllText("xmlFile.txt",txt); 
```

在大数据使用中获得更高的性能`StreamWriter`

```
using (var streamWriter = new StreamWriter("Path"))
{
    foreach (XmlNode xmlNode in nodeList)
    {
        streamWriter.WriteLine(xmlNode.OuterXml);
    }
} 
```

# java - java.lang.IllegalStateException：标准参数类型 [org.springframework.web.multipart.MultipartHttpServletRequest]

> ID：11308824
> 
> 赞同：0
> 
> 时间：2012-07-03T10:17:29.390
> 
> 标签：java, spring-mvc, controller

当我将数据发布到控制器时出现此异常。

```
java.lang.IllegalStateException: Standard argument type [org.springframework.web.multipart.MultipartHttpServletRequest] 
```

//这是控制器。

```
 @RequestMapping(value="/sendmail", method=RequestMethod.POST)
            public String mailSender(Model model,MultipartHttpServletRequest request,  HttpServletResponse response) throws ServletException, IOException{
            System.out.println("mail sending Controller");

} 
```

// 这是我得到的异常

```
SEVERE: Servlet.service() for servlet spring threw exception
java.lang.IllegalStateException: Standard argument type   [org.springframework.web.multipart.MultipartHttpServletRequest] resolved to incompatible  value of type [class   org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestWrapper].  Consider declaring the argument type in a less specific fashion.
    at org.springframework.web.bind.annotation.support.HandlerMethodInvoker.resolveCommonArgument(HandlerMethodInvoker.java:786)
    at org.springframework.web.bind.annotation.support.HandlerMethodInvoker.resolveHandlerArguments(HandlerMethodInvoker.java:248)
    at org.springframework.web.bind.annotation.support.HandlerMethodInvoker.invokeHandlerMethod(HandlerMethodInvoker.java:163)
    at org.springframework.web.servlet.mvc.annotation.AnnotationMethodHandlerAdapter.invokeHandlerMethod(AnnotationMethodHandlerAdapter.java:414)
    at org.springframework.web.servlet.mvc.annotation.AnnotationMethodHandlerAdapter.handle(AnnotationMethodHandlerAdapter.java:402)
    at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:771)
    at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:716)
    at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:647)
    at org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:563)
    at javax.servlet.http.HttpServlet.service(HttpServlet.java:637)
    at javax.servlet.http.HttpServlet.service(HttpServlet.java:717)
    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:290)
    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206)
    at com.freelancemail.app.filter.CharsetFilter.doFilter(CharsetFilter.java:34)
    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:235)
    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206)
    at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:368)
    at org.springframework.security.web.access.intercept.FilterSecurityInterceptor.invoke(FilterSecurityInterceptor.java:109)
    at org.springframework.security.web.access.intercept.FilterSecurityInterceptor.doFilter(FilterSecurityInterceptor.java:83)
    at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:380)
    at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:97)
    at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:380)
    at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:100)
    at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:380)
    at org.springframework.security.web.authentication.AnonymousAuthenticationFilter.doFilter(AnonymousAuthenticationFilter.java:78)
    at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:380)
    at org.springframework.security.web.authentication.rememberme.RememberMeAuthenticationFilter.doFilter(RememberMeAuthenticationFilter.java:119)
    at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:380)
    at org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter.doFilter(SecurityContextHolderAwareRequestFilter.java:54)
    at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:380)
    at org.springframework.security.web.savedrequest.RequestCacheAwareFilter.doFilter(RequestCacheAwareFilter.java:35)
    at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:380)
    at org.springframework.security.web.authentication.AbstractAuthenticationProcessingFilter.doFilter(AbstractAuthenticationProcessingFilter.java:187)
    at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:380)
    at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:105)
    at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:380)
    at org.springframework.security.web.context.SecurityContextPersistenceFilter.doFilter(SecurityContextPersistenceFilter.java:79)
    at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:380)
    at org.springframework.security.web.session.ConcurrentSessionFilter.doFilter(ConcurrentSessionFilter.java:109)
    at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:380)
    at org.springframework.security.web.access.channel.ChannelProcessingFilter.doFilter(ChannelProcessingFilter.java:109)
    at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:380)
    at org.springframework.security.web.FilterChainProxy.doFilter(FilterChainProxy.java:169)
    at org.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterProxy.java:237)
    at org.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:167)
    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:235)
    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206)
    at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:233)
    at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:191)
    at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:127)
    at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:102)
    at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:109)
    at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:291)
    at org.apache.coyote.http11.Http11Processor.process(Http11Processor.java:859)
    at org.apache.coyote.http11.Http11Protocol$Http11ConnectionHandler.process(Http11Protocol.java:602)
    at org.apache.tomcat.util.net.JIoEndpoint$Worker.run(JIoEndpoint.java:489)
    at java.lang.Thread.run(Unknown Source) 
```

请帮助解决这个问题，我是 Java Spring MVC 的初学者。

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-03T10:28:39.337

在您的类中，您定义了 mailSender 方法接收类型的对象`MultipartHttpServletRequest`，Spring 告诉您实际上发送的对象是类型的`SecurityContextHolderAwareRequestWrapper`。

我不太了解这个 FW，但它建议你尝试使用一个不太具体的类（如果你有一个接口会很棒）

# java - 正则表达式的问题

> ID：11308825
> 
> 赞同：3
> 
> 时间：2012-07-03T10:17:34.943
> 
> 标签：java, regex, string

我想编写一个正则表达式，其中字符串有（9 个字符）并以“g”或“r”开头，然后都是数字。

我已经写了这个，但它不起作用：

```
public static void main(String[] args) {
    String id= "g57895452";
    String pattern = "/^g([0-9]+){8}$/";
    if (id.matches(pattern)) {
        System.out.println("true");
    } else {
        System.out.println("false");
    }
} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-03T10:20:20.983

更正：

```
"^[gr]([0-9]{8})$" 
```

当您`+`已经拥有`{8}`.

`()`当您不想在代码中进一步使用该组时，您也不需要。

```
"^[gr][0-9]{8}$" 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-03T11:01:50.637

删除`/`正则表达式模式的开头和结尾，它将起作用。

# ip - 如何远程登录到共享单个公共 IP 的计算机？

> ID：11308828
> 
> 赞同：-1
> 
> 时间：2012-07-03T10:17:41.813
> 
> 标签：ip

假设我正在与其他一些用户共享一个公共 ip 56.162.XXX.XXX。现在我有一个本地 ip，如果我在命令提示符下键入 ipconfig，我会看到它。那是 192.168.2.3。现在我有一个程序在端口 3630 上运行，监听任何传入连接。我可以在回环 ip 的帮助下打电话给自己，即。telnet 127.0.0.1 3630，我看到两个程序正在连接并且可以交换数据。我还可以通过命令 telnet 192.168.4.20 3630 从另一台与我共享相同公共 IP 的笔记本电脑远程登录并与我的笔记本电脑连接。但是我应该如何从远程计算机上做同样的事情？我的意思是一台具有不同公共IP的计算机。其实我想要“telnet public ip（local ip）port no”之类的东西。另一台计算机也与其他一些用户共享一个公共 ip。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-03T10:24:14.493

您需要设置某种 NAT（网络地址转换）或 PAT（端口地址转换），将端口 3630 的请求转发到您的本地 IP。

要使用的实际配置取决于您的防火墙/路由器。如果你有一个标准的 ADSL 路由器，那里可能有一个配置页面可以让你这样做。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-03T10:24:43.863

您将需要阅读端口转发和 NAT。

[http://en.wikipedia.org/w/index.php?title=Port_forwarding](http://en.wikipedia.org/w/index.php?title=Port_forwarding)

# sql-order-by - hql 不同的顺序

> ID：11308831
> 
> 赞同：-1
> 
> 时间：2012-07-03T10:17:50.457
> 
> 标签：sql-order-by, hql, distinct

嗨，我需要选择按最新子对象排序的不同对象，我该怎么做？我试图从子对象中选择父对象：

```
SELECT DISTINCT r.forumTheme FROM ForumResponse r ORDER BY r.responseId DESC 
```

我明白了

```
ORDER BY items must appear in the select list if SELECT DISTINCT is specified. 
```

当我尝试这个时：

```
SELECT DISTINCT r.forumTheme,r.responseId FROM ForumResponse r ORDER BY r.responseId DESC 
```

结果并不是很明显：forumTheme 可以使用不同的 responseId 出现多次

有什么解决办法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-03T10:35:49.863

对于给定的 forumTheme，您有多个 responseId。那么它们应该如何排序呢？是`[6, 3, 2]`大于还是小于`[5, 4, 2]`？

这就是为什么您不能按此顺序执行此命令的原因。

您可能应该执行以下查询：

```
select r.forumTheme, max(r.responseId) from ForumResponse r 
group by r.forumTheme
order by max(r.responseId) 
```

# ckeditor - 如何管理 CKEditor 实例的 ID/名称？

> ID：11308833
> 
> 赞同：5
> 
> 时间：2012-07-03T10:17:54.630
> 
> 标签：ckeditor

我正在动态创建的 div 上创建我的 CKEditor。似乎 CKEDITOR.instances 拥有 Id 为“elementX”的实例，其中 X 是创建的实例的索引。

我希望能够自己管理名称，以便在编辑器关闭时销毁编辑器。

我尝试使用 JQuery CKEDITOR 适配器包装器中的回调函数以及传递给编辑器的配置对象在 CKEDITOR 上设置“名称”属性，但我没有任何运气。

谁能提出一种方法来确保 CKEDITOR 分配给编辑器的名称是可预测的，以便我可以销毁它？

我知道 CKEditor 似乎通常通过元素 ID 来命名编辑器。但是，我没有元素上的 id。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2015-08-18T02:48:51.260

每个创建的编辑器实例都会触发“instanceCreated”事件。

```
CKEDITOR.on( 'instanceCreated', function ( event, data ) {
    var editor = event.editor,
    element = editor.element;
    editor.name = $(element).attr('name');
} ); 
```

# gwt - GWT 中的圆形进度条

> ID：11308835
> 
> 赞同：0
> 
> 时间：2012-07-03T10:18:04.033
> 
> 标签：gwt, gwt2, gwtp

我无法理解如何旋转图像。我正在尝试制作圆形进度条。

我有一个图像 grom [preloder](http://preloaders.net/)。

但我没有在 CSS 中找到任何东西来旋转这个图像。

我是否必须拍摄相同预加载器的 2 或 3 张图像并使用 setVIsible()

请帮助我理解这一点。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-03T17:25:00.413

您不必使用 setVisible 等。如果您将文件下载为 gif 并将其包含为任何图像文件，那应该可以工作。进行一个简单的测试，自己测试并理解我的意思：将 gif 文件保存在系统上，然后用任何浏览器打开它。您将看到没有任何代码的加载动画。[根据规范](http://en.wikipedia.org/wiki/Graphics_Interchange_Format#Animated_GIF)，基本上 gif 文件本身会处理动画

# android - 如何加载异步 url 图片？(libgdx)

> ID：11308841
> 
> 赞同：4
> 
> 时间：2012-07-03T10:18:19.223
> 
> 标签：android, asynchronous, handler, libgdx

```
 final Handler downloadHandler =  new Handler() {
        public void handleMessage(Message msg) {
            Log.d("Yoon", "Handler");
            MCImageDisposableView iconView = new MCImageDisposableView(profileSprite, tag);
            iconView.setScale(0.5f);
            iconView.setPosition(17, 145);
            addActor(iconView);
        }
    };

    Thread sb = new Thread(new Runnable() {
        @Override
        public void run() {
            Log.d("Yoon", "Thread");
            profileSprite = BitmapDownloader.downloadSprite(Utils.getImageURL(MyChoiceApp.shared.context, aid));
            downloadHandler.sendEmptyMessage(0);
        }
    });

    sb.start(); 
```

如果使用没有处理程序的线程，请更改演员（MCImageDisposableView 有精灵）图像。

但图像不正确。图片未加载我的网址。图像加载纹理图集

MCImageDisposableView 类具有下载图像功能。它工作得很好......如果不使用线程。

如何加载异步图像？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-11T03:31:03.980

我`MyLazyImageList`为此目的而创建。它基于`ScrollPane`. 现在它如下所示：

![在此处输入图像描述](../Images/71b5e124dbdbf30d98a589f618bba8ca.png)

如果需要，您可以修改代码。所以源代码在这里： http: [//pastebin.com/JPWTB9PF](http://pastebin.com/JPWTB9PF)或在这里： http: [//pastebin.com/hi0v0nQy](http://pastebin.com/hi0v0nQy)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-04T11:51:36.547

您需要为此实现延迟加载。

阅读下面提到的延迟加载链接：

[ListView 中图像的延迟加载](https://stackoverflow.com/questions/541966/android-how-do-i-do-a-lazy-load-of-images-in-listview)

这是执行此操作的基本思想：

```
addActor(){
   //if you need to download image from url
   downloadImageFromUrl(actorImageView, url);
}

downloadIamgeFromUrl(ImageView actorImageView, String url){
    //ToDo : create Thread to download image from server
    //ToDo : Once done, set this image to actorImageView  in UI thread as
    //runOnUiThread(new Runnable() {
        @Override
        public void run() {
            actorImageView  .setImageBitmap(bitmap);
        }
    });
} 
```

# java - Hadoop Map Reduce wordcount Shuffle Error: Exceeded MAX_FAILED_UNIQUE_FETCHES; 救助

> ID：11308845
> 
> 赞同：3
> 
> 时间：2012-07-03T10:18:34.713
> 
> 标签：java, hadoop

我已经使用以下站点的 manul 将 hadoop 安装并配置为单节点。

[http://www.michael-noll.com/tutorials/running-hadoop-on-ubuntu-linux-single-node-cluster/#running-a-mapreduce-job](http://www.michael-noll.com/tutorials/running-hadoop-on-ubuntu-linux-single-node-cluster/#running-a-mapreduce-job)

我已经编译了 wordcount 示例并运行它，但它需要很长时间并生成`Shuffle Error: Exceeded MAX_FAILED_UNIQUE_FETCHES; bailing-out.`

```
hduser@aptunix0043:/usr/local/hadoop/src$ hadoop jar WordCount.jar org/apache/hadoop/examples/WordCount input  ot

****hdfs://localhost:54310/user/hduser/input
12/07/03 02:52:35 INFO input.FileInputFormat: Total input paths to process : 1
12/07/03 02:52:36 INFO mapred.JobClient: Running job: job_201207030248_0002
12/07/03 02:52:37 INFO mapred.JobClient:  map 0% reduce 0%
12/07/03 02:52:52 INFO mapred.JobClient:  map 100% reduce 0%
12/07/03 03:21:26 INFO mapred.JobClient: Task Id :attempt_201207030248_0002_r_000000_0, Status : FAILED 
Shuffle Error: Exceeded MAX_FAILED_UNIQUE_FETCHES; bailing-out.

12/07/03 03:21:47 WARN mapred.JobClient: Error reading task outputConnection timed out
12/07/03 03:22:08 WARN mapred.JobClient: Error reading task outputConnection timed out
 /user/hduser/input/*12/07/03 03:50:01 INFO mapred.JobClient: Task Id :      attempt_201207030248_0002_r_000000_1, Status : FAILED
Shuffle Error: Exceeded MAX_FAILED_UNIQUE_FETCHES; bailing-out.
12/07/03 03:50:22 WARN mapred.JobClient: Error reading task outputConnection timed out
12/07/03 03:50:43 WARN mapred.JobClient: Error reading task outputConnection timed out
12/07/03 04:18:35 INFO mapred.JobClient: Task Id :  attempt_201207030248_0002_r_000000_2, Status : FAILED
Shuffle Error: Exceeded MAX_FAILED_UNIQUE_FETCHES; bailing-out.
12/07/03 04:18:56 WARN mapred.JobClient: Error reading task outputConnection timed out
12/07/03 04:19:17 WARN mapred.JobClient: Error reading task outputConnection timed out
12/07/03 04:47:15 INFO mapred.JobClient: Job complete: job_201207030248_0002
12/07/03 04:47:15 INFO mapred.JobClient: Counters: 23
12/07/03 04:47:15 INFO mapred.JobClient:   Job Counters
12/07/03 04:47:15 INFO mapred.JobClient:     Launched reduce tasks=4
12/07/03 04:47:15 INFO mapred.JobClient:     SLOTS_MILLIS_MAPS=12948
12/07/03 04:47:15 INFO mapred.JobClient:     Total time spent by all reduces waiting  after reserving slots (ms)=0
12/07/03 04:47:15 INFO mapred.JobClient:     Total time spent by all maps waiting after reserving slots (ms)=0
12/07/03 04:47:15 INFO mapred.JobClient:     Launched map tasks=1
12/07/03 04:47:15 INFO mapred.JobClient:     Data-local map tasks=1
12/07/03 04:47:15 INFO mapred.JobClient:     Failed reduce tasks=1
12/07/03 04:47:15 INFO mapred.JobClient:     SLOTS_MILLIS_REDUCES=16469
12/07/03 04:47:15 INFO mapred.JobClient:   FileSystemCounters
12/07/03 04:47:15 INFO mapred.JobClient:     HDFS_BYTES_READ=661744
12/07/03 04:47:15 INFO mapred.JobClient:     FILE_BYTES_WRITTEN=288616
12/07/03 04:47:15 INFO mapred.JobClient:   File Input Format Counters
12/07/03 04:47:15 INFO mapred.JobClient:     Bytes Read=661630
12/07/03 04:47:15 INFO mapred.JobClient:   Map-Reduce Framework
12/07/03 04:47:15 INFO mapred.JobClient:     Map output materialized bytes=267085
12/07/03 04:47:15 INFO mapred.JobClient:     Combine output records=18040
12/07/03 04:47:15 INFO mapred.JobClient:     Map input records=12761
12/07/03 04:47:15 INFO mapred.JobClient:     Physical memory (bytes) snapshot=183209984
12/07/03 04:47:15 INFO mapred.JobClient:     Spilled Records=18040
12/07/03 04:47:15 INFO mapred.JobClient:     Map output bytes=1086716
12/07/03 04:47:15 INFO mapred.JobClient:     CPU time spent (ms)=1940
12/07/03 04:47:15 INFO mapred.JobClient:     Total committed heap usage  (bytes)=162856960
12/07/03 04:47:15 INFO mapred.JobClient:     Virtual memory (bytes) snapshot=393482240
12/07/03 04:47:15 INFO mapred.JobClient:     Combine input records=109844
12/07/03 04:47:15 INFO mapred.JobClient:     Map output records=109844
12/07/03 04:47:15 INFO mapred.JobClient:     SPLIT_RAW_BYTES=114 
```

有什么线索吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-12-18T06:05:17.177

为了像我一样在互联网上搜索并访问此页面的人的利益，您可能会在这里遇到 2 个问题

1.  DNS 解析 - 确保在安装 hadoop 时为每个主机使用完全限定的域名

2.  防火墙 - 防火墙可能会阻止端口 50060,50030 以及基于您的 hadoop 分布的更多端口（cloudera 为 7182,7180）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-28T03:16:16.437

我之前遇到过这个错误，它是由 DNS 问题引起的。您是否在基于 Linux 的发行版中运行？如果是这样，请确保您的所有 /etc/hosts 都是同步的，在我的情况下，我为每个节点“slave1 192.168.1.23”等使用了一个别名......但这与盒子名称不匹配，所以我不得不更改它，或者您可以更改您的盒子名称以匹配hadoop conf中“奴隶”对应的名称。

# java - Java 动态编程触发器

> ID：11308848
> 
> 赞同：0
> 
> 时间：2012-07-03T10:18:55.863
> 
> 标签：java, dynamic, triggers

假设我想编写动态代码：

## 魔兽争霸3触发系统：

```
Event: if a unit levels
  Condition: if ( triggeringUnit is alive ) && ( triggeringUnit.name="something" ) 
```

## 爪哇

```
for ( Unit triggeringUnit : leveledUnits )
{
  condition1 = new IsAliveCondition(triggeringUnit);
  condition2 = new HasNameCondition(triggeringUnit);
  if ( new AndCondition( condition1 , condition2 ).isTrue() )
  {

  }
} 
```

**问题：** 如果代码是静态编写的，则此代码运行，但它不能动态形成。条件 1,2 在其构造函数中需要一个“特定单元”才能被创建，因此它们不可能存储在内存中（因为它们无法被创建）。存在此问题的原因是：条件 1,2 不知道它将位于“for-loop”内，也不知道该范围内没有变量“triggeringUnit”。

为了解决这个问题，我应该创建一个包含范围内所有变量的哈希图吗？

* * *

```
Hashmap<String, Object> variables = ... ;
   condition1 = new IsAliveCondition("triggeringUnit");
   condition2 = new HasNameCondition("triggeringUnit");
   condition = new AndCondition( condition1, condition2);

   //At Runtime
   for( Unit triggeringUnit : leveledUnits )
   {
      variables.put("triggeringUnit", triggeringUnit );
      if ( condition.isTrue() )
      {

      }
   } 
```

有没有更好的解决方案/设计模式？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-13T11:38:51.660

看起来有点像您正在寻找[Business Rules Systems](http://en.wikipedia.org/wiki/BRMS)。这些系统允许使用 GUI 或某种脚本来制定规则，并且可以与语言（通常是 java）进行交互，以便为规则提供更多功能并让程序调用规则引擎。

最著名的免费和开源 BRMS 是[DROOLS](http://www.jboss.org/drools/)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-13T12:05:03.550

通常这需要一些发布/订阅机制，或者GOF 所称的[观察者模式。](http://en.wikipedia.org/wiki/Observer_pattern)创建事件类型层次结构并在发生任何事情时触发事件，让观察者订阅支持的事件。

这是一个初步的初稿：

```
interface EventListener<X extends EventType>{
    processEvent(Map<String, Object> data);
}

public class EventDispatcher{
    private Map<EventType, Collection<EventListener<?>> listeners; // initialize this
    public <X extends EventType> void addListener(X type, EventListener<X> listener){
        // add listener to map
    }
    public void dispatchEvent(EventType type, Map<String, Object> data){
        if(listeners.containsKey(type){
            for(EventListener<EventType> listener: listeners.get(type)){
                listener.processEvent(data);
            }
        }
    }
} 
```

现在，当升级事件发生时，您的数据地图将包含升级单位的存活和名称统计信息。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-13T14:11:34.430

对于动态条件，您可以使用动态语言。下面是 Groovy 中的代码片段，可以在 Groovy 控制台中运行。

```
class IsAliveCondition {
    def triggeringUnit

    boolean isCase() {
        triggeringUnit.alive
    }
}

class HasNameCondition {
    def triggeringUnit
    def name

    boolean isCase() {
        triggeringUnit.name == name
    }
}

class MyUnit {
    def alive
    def name
}

def condition = '''
new IsAliveCondition(triggeringUnit: triggeringUnit) && 
new HasNameCondition(triggeringUnit: triggeringUnit, name: 'somename').isCase()
'''

def leveledUnits = [new MyUnit(alive: true, name: 'somename'), new MyUnit(name: 'Joe')]

leveledUnits.each { triggeringUnit ->
    def shell = new GroovyShell(this.class.classLoader, new Binding([triggeringUnit: triggeringUnit]))
    if (shell.evaluate(condition)) {
        println "Condition for <$triggeringUnit.name> satisfied: $condition"
    }
} 
```

你看，这里的条件只是硬编码的字符串。但它可以很容易地从文件中读取。`Binding`是您使用过的一种哈希映射，但它是由 Groovy 提供的。

当然，JVM 还有很多其他的动态语言：Jython、JRuby、JavaScript 是主要的。它们通常与 Java 交互比较简单。例如，`IsAliveCondition`也`HasNameCondition`可以用 Java 编写（在这种情况下，它们需要构造函数和 getter/setter 以及类型信息）。

# java - 是什么使从静态初始化程序初始化对象引用以安全地发布对象？

> ID：11308850
> 
> 赞同：1
> 
> 时间：2012-07-03T10:19:01.307
> 
> 标签：java, multithreading, synchronization, thread-safety

考虑以下代码：

```
 // This code safely publishes the Publishable object
   public static Publishable publishable= new Publishable(); 
```

我已经看到了这种发布自定义 Publishable 对象的方式，并且我读到这是安全的。我的问题是：

1.  这**真的**是一种安全发布的方式吗？
2.  如果 1 的答案是否定的，那为什么？如果是，那么还请解释为什么？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-03T10:22:46.177

根据 JCiP：

> 静态初始化器在类初始化时由 JVM 执行 [...] 这种机制可以保证安全地发布以这种方式初始化的任何对象。

参考：[JLS 12.4.2](http://docs.oracle.com/javase/specs/jls/se7/html/jls-12.html#jls-12.4.2) - 第 9 项：

> 接下来，按照文本顺序执行类的类变量初始化程序和静态初始化程序，或者接口的字段初始化程序，就好像它们是一个单独的块一样。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-03T10:24:11.490

从静态块运行或静态初始化的所有代码都是线程安全的。

如果可以的话，我会让这个领域成为最终的。

```
 public static final Publishable publishable= new Publishable(); 
```

甚至使 Publishable 成为枚举

```
 public enum Publishable {
      INSTANCE;

 } 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-03T10:24:32.633

我不认为这是初始化这个对象的特别*好的*方法（撇开“安全”这个词，我可以用多种方式解释）。

它正在创建一个与包含类相关的单例，并且初始化不受控制。或者更确切地说，它在加载该类时立即初始化。你对此有完全的控制权吗？

我宁愿：

1.  不要使用单例。有关使用单例的困难的更多详细信息，请参见[此处](https://stackoverflow.com/questions/11292109/why-is-singleton-considered-an-anti-pattern-in-java-world-sometimes/11292142#11292142)。我注意到您的问题被标记为与线程相关的关键字，并且单身人士创建了他们自己的线程特定问题。
2.  让客户类控制这个对象的初始化。您可能希望推迟此对象的初始化（想象一下，如果它突然变成一个重量级对象，在构造时执行网络调用等）。目前，上述内容对此提供的控制很少。

# language-agnostic - 将公式 (cm,kg) 转换为 (mm,grams)

> ID：11308855
> 
> 赞同：0
> 
> 时间：2012-07-03T10:19:12.380
> 
> 标签：language-agnostic, formula, units-of-measurement

我对书中的这个公式有疑问：

> EFW (cm,kg)= 10^(-1,7492+(0,166*BPD)+(0,046*AC)-(2,646*AC*BPD/1000))

结果以 kg 为单位，而 BPD 和 AC 以 cm 为单位。

我想用这个公式得到以克为单位的结果，我的 BPD 和 AC 的值以毫米为单位。那么我怎样才能得到它呢？谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-03T10:27:36.393

```
1000*10^(-1,7492+(0,166*BPDm/10)+(0,046*ACm/10)-(2,646*ACm/10*BPDm/10/1000)) 
or
10^(3-1,7492+(0,0166*BPDm)+(0,0046*ACm)-(2,646*ACm*BPDm/100000))
or
10^(1,2508+(0,0166*BPDm)+(0,0046*ACm)-(2,646*ACm*BPDm/100000)) 
```

result*1000 将值从 kg 转换为 g，如果 BPDm 和 ACm 以 mm 为单位，则 BPDm=10*BPD 和 ACm=10*AC，因此 BPDm/10=BPD 和 ACm/10=AC

# jquery - 内容加载后如何全方位展开div？

> ID：11308856
> 
> 赞同：0
> 
> 时间：2012-07-03T10:19:18.747
> 
> 标签：jquery, css

我有一个弹出 div `position:fixed`。最初我想显示加载图像，直到内容未加载。

我用了

```
 this.css("top", ($(window).height() - this.height()) / 2 + $(window).scrollTop()  + "px");

this.css("left", ($(window).width() - this.width()) / 2 + $(window).scrollLeft()  + "px"); 
```

根据屏幕居中 div。它工作正常。

加载内容后会出现问题，因为内容范围从**简单的文本段落到复杂的表单，它们会****向右和向下**扩展。由于我的 div 是根据那个小的“加载”图像居中的，现在有了新的内容，它更偏向右侧和底部。

有什么方法可以在所有 4 个方向上扩展 div。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-03T10:39:20.447

首先，让我们修复你的 div 居中。对于固定 div，请考虑以下事项：

```
<!DOCTYPE html>
<html>
    <head>
        <style>
            div.center
            {
                position: relative;
                width: 400px;
                height: 400px;
                margin: 0px auto;
                background-color: red;
            }

            div.fix
            {
                position: fixed;
                width: 100%;
                margin: 100px auto;
            }
        </style>
    </head>
    <body>
        <div class="fix"><div class="center"></div></div>
    </body>
</html> 
```

这将使您的 div 动态居中，无论它的大小如何，或者它如何变化（高度和宽度）。它也非常简单（我赞成）。尝试将这种 CSS 应用到您的问题上，它应该可以很好地调整大小。

# css - JQuery UI 将 id 添加到对话框

> ID：11308857
> 
> 赞同：6
> 
> 时间：2012-07-03T10:19:20.837
> 
> 标签：css, jquery-ui

如何将 id 添加到特定对话框？我只想为每个对话框应用单独的样式并尝试这样做：

```
var $order_dialog = $("<%= escape_javascript(render('order_mini_site_form', :layout => false)) %>");

var current_dialog = $order_dialog.dialog({
  width: 515,
  height: 575,
  modal: true,
  resizable: false,
  draggable: false,
  title: false,
  autoOpen: true,
  closeOnEscape: false,
  buttons: [
    { text: "Отправить запрос" , click: function() { $(this).find('form').submit();    $(this).dialog('close'); } },
    { text: "Отмена", click: function() { $(this).dialog('close'); } }
  ]
}).parent().find('.ui-dialog-titlebar').remove();

$current_dialog.attr('id', 'awesome_dialog'); 
```

但是在没有id的body标签内创建了对话框，我无法为其应用样式。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-04-11T13:34:33.567

有点晚了，但这是可以做到的：

```
$('#placeholderId').dialog('widget').attr('id', 'dialogId'); 
```

***$('#placeholderId').dialog('widget')***为您提供对话框周围的 <div>，这很可能是您要设置 ID 的元素。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-07-03T10:24:28.510

如果您的目标只是在 css 中使用此 id，则可以改为使用 css 类来实现。

dialogClass选项允许您[指定](http://jqueryui.com/demos/dialog/#option-dialogClass)将应用于对话框的类。然后，您可以在选择器中使用此类为特定对话框应用不同的样式。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-03T10:32:29.950

您的示例代码中的问题是您正在将`id`结果添加到`.find('.ui-dialog-titlebar').remove()`而不是对话框本身。以下内容应该适合您。

```
var $order_dialog = $("<%= escape_javascript(render('order_mini_site_form', :layout => false)) %>");

var current_dialog = $order_dialog.dialog({
  width: 515,
  height: 575,
  modal: true,
  resizable: false,
  draggable: false,
  id: "ololo",
  title: false,
  autoOpen: true,
  closeOnEscape: false,
  buttons: [
    { text: "Отправить запрос" , click: function() { $(this).find('form').submit();                $(this).dialog('close'); } },
    { text: "Отмена", click: function() { $(this).dialog('close'); } }
  ]
})

$current_dialog.parent().find('.ui-dialog-titlebar').remove();
$current_dialog.attr('id', 'awesome_dialog'); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-07-02T18:04:19.800

我不同意投票的答案（不是人身攻击，只是不同意“肮脏的黑客”部分）。确实，jquery Dialog Box 没有 ID 选项，但是如果您得出 ID 是必要的结论，那么下面的代码就足够了。我正在开发的导游 JS 非常需要这样的 ID。

// 这里我声明动态插入的内容[例如我正在创建的内容] 具有 tempstep 的 ID，这将与下面的调用一起用于向 jQuery 对话框添加一个 ID

代码 ：`jQuery ('<div id="tempstep"></div>').dialog({`

代码 ：`jQuery('#tempstep').parent().attr("id","dialogBox");`

# html - 谷歌地图绘制多边形并计算面积

> ID：11308859
> 
> 赞同：1
> 
> 时间：2012-07-03T10:19:26.513
> 
> 标签：html, google-maps, polygon, area

我正在尝试编写一些代码以允许用户在 Google 地图上绘制多边形，然后计算面积。但是由于某种原因，当我单击屏幕时，标记和多边形不会显示。谁能帮我解决这个问题。我正在添加代码：

```
var measure = {
        mvcLine: new google.maps.MVCArray(),
        mvcPolygon: new google.maps.MVCArray(),
        mvcMarkers: new google.maps.MVCArray(),
        line: null,
        polygon: null
    };

    function initialize() {
        var myOptions = {
            center: new google.maps.LatLng(orgn_lattitude, orgn_longitude),
            zoom: 16,
            mapTypeId: google.maps.MapTypeId.ROADMAP
        };

        var map = new google.maps.Map(document.getElementById("map_canvas"), myOptions);

        var marker = new google.maps.Marker({ position: new google.maps.LatLng(orgn_lattitude, orgn_longitude), map: map })

        google.maps.event.addListener(map, 'click', measureAdd);
    }

    function measureAdd(event) {
        // Add a draggable marker to the map where the user clicked
        var marker = new google.maps.Marker({
            position: event.latLng,
            map: map,
            draggable: true
        });

        // Add this LatLng to our line and polygon MVCArrays
        // Objects added to these MVCArrays automatically update the line and polygon shapes on the map
        measure.mvcLine.push(latLng);
        measure.mvcPolygon.push(latLng);

        // Push this marker to an MVCArray
        // This way later we can loop through the array and remove them when measuring is done
        measure.mvcMarkers.push(marker);

        // Get the index position of the LatLng we just pushed into the MVCArray
        // We'll need this later to update the MVCArray if the user moves the measure vertexes
        var latLngIndex = measure.mvcLine.getLength() - 1;

        // When the measure vertex markers are dragged, update the geometry of the line and polygon by resetting the
        //     LatLng at this position
        google.maps.event.addListener(marker, "drag", function (evt) {
            measure.mvcLine.setAt(latLngIndex, evt.latLng);
            measure.mvcPolygon.setAt(latLngIndex, evt.latLng);
        });

        // When dragging has ended and there is more than one vertex, measure length, area.
        google.maps.event.addListener(marker, "dragend", function () {
            if (measure.mvcLine.getLength() > 1) {
                measureCalc();
            }
        });

        // If there is more than one vertex on the line
        if (measure.mvcLine.getLength() > 1) {

            // If the line hasn't been created yet
            if (!measure.line) {

                // Create the line (google.maps.Polyline)
                measure.line = new google.maps.Polyline({
                    map: map,
                    clickable: false,
                    strokeColor: "#FF0000",
                    strokeOpacity: 1,
                    strokeWeight: 3,
                    path: measure.mvcLine
                });

            }

            // If there is more than two vertexes for a polygon
            if (measure.mvcPolygon.getLength() > 2) {

                // If the polygon hasn't been created yet
                if (!measure.polygon) {

                    // Create the polygon (google.maps.Polygon)
                    measure.polygon = new google.maps.Polygon({
                        clickable: false,
                        map: map,
                        fillOpacity: 0.25,
                        strokeOpacity: 0,
                        paths: measure.mvcPolygon
                    });

                }

            }

        }

        // If there's more than one vertex, measure length, area.
        if (measure.mvcLine.getLength() > 1) {
            measureCalc();
        }
    }

    function measureCalc() {

        // Use the Google Maps geometry library to measure the length of the line
        var length = google.maps.geometry.spherical.computeLength(measure.line.getPath());

        // If we have a polygon (>2 vertexes in the mvcPolygon MVCArray)
        if (measure.mvcPolygon.getLength() > 2) {
            // Use the Google Maps geometry library to measure the area of the polygon
            var area = google.maps.geometry.spherical.computeArea(measure.polygon.getPath());
        }

    } 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-06T22:14:22.690

这就是我如何设法计算在地图上绘制的多边形的面积，使用公制和英制单位。

```
google.maps.event.addListener(drawingManager, 'polygoncomplete', (polygon) => {
  const polyPath = polygon.getPath()
  const measurement = google.maps.geometry.spherical.computeArea(polyPath)
  const squareMeters = measurement.toFixed(2)
  const squareFeet = (squareMeters * 10.7639).toFixed(2)

  drawingManager.setDrawingMode(null)
  polygon.setOptions({ zIndex: 1 })

  google.maps.event.addListener(polygon, 'mouseover', () => {
    measurementBox.setContent(`<p>${squareFeet} sqft.<p/>`)
    measurementBox.open(map)
  })

  google.maps.event.addListener(polygon, 'mousemove', (e) => {
    measurementBox.setPosition(e.latLng)
  })

  google.maps.event.addListener(polygon, 'mouseout', () => {
    measurementBox.close()
  })
}) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-03T10:59:39.320

我碰巧有这个使用 API 版本 2 制作的旧演示。您需要将其转换为 V3。如果您在转换时遇到问题，请告诉我。

*****已删除死链接*****

# android - 无法在 Android 模拟器上运行内置的 Maps Activity 和 Navigation Activity

> ID：11308862
> 
> 赞同：0
> 
> 时间：2012-07-03T10:19:37.030
> 
> 标签：android, android-emulator, android-maps

我在代理后面。所以我做了代理设置，我可以从浏览器访问互联网。但是地图活动没有加载。我收到此错误：

```
Wrong remote strings version. GMM Server must be hosting: /strings_remote_533149424.dat 
```

我这样做是因为我尝试使用 Google Map API，但我得到的只是一个没有地图的灰色网格。所以我只是想测试一下模拟器上的GPS是否工作。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-15T11:16:18.710

[已解决] Android Emulator 上的 GPS 在代理后无法工作。当我切换直接 Internet 连接时 - 它可以工作。

# c++ - c ++琐碎的try-catch导致中止

> ID：11308864
> 
> 赞同：5
> 
> 时间：2012-07-03T10:19:38.853
> 
> 标签：c++

下面的简单代码

```
// g++ centro.cc -o centro

#include <iostream>
using namespace std;

int  main(int argc, char *argv[])
{
    try
    {
        cout << "Going to throw" << endl;
        throw;
    }
    catch(...)
    {
        cout << "An exception occurred" << endl;
    }
    return 0;
} 
```

产生中止：

```
Going to throw
terminate called without an active exception
Aborted (core dumped) 
```

我不明白出了什么问题，有人能指出我正确的方向吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-07-03T10:20:56.530

试一试。*_* 你没有抛出任何异常。

`throw;`本身通常用于在块内重新抛出相同的异常`catch`。

将结果与`throw "something";`或可能的实例进行比较`std::exception`。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-07-03T10:21:38.797

你的线路

```
throw; 
```

是在块中重新抛出异常的语法`catch`。

你应该写：

```
throw std::exception(); 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-07-03T10:36:53.420

这是标准（15.1）规定的：

> 8) 没有操作数的 throw 表达式重新抛出当前处理的异常 (15.3)。使用现有临时重新激活异常；没有创建新的临时异常对象。不再认为异常被捕获；因此， std::uncaught_exception() 的值将再次为真。
> 
> 9) 如果当前没有处理异常，则执行不带操作数的 throw 表达式调用 std::terminate() (15.5.1)。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-07-03T10:22:41.327

`throw;`它自己会重新抛出当前正在处理的异常，但您的代码中没有异常。

你需要扔东西。尝试类似的东西`throw std::runtime_error("my message");`。您需要为此包括在内`#include <stdexcept>`。

在实际代码中，您将希望创建自己的异常类以最有可能抛出

# ruby - 将数组与浮点数相乘

> ID：11308867
> 
> 赞同：0
> 
> 时间：2012-07-03T10:19:44.473
> 
> 标签：ruby

该方法`Array#*`采用整数：

```
thumbs = [1, 2, 3, 4, 5, 6, 7, 8, 9, 10] 
thumbs = thumbs*2
#=> [1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 1, 2, 3, 4, 5, 6, 7, 8, 9, 10] 
```

如何将数组乘以任何浮点数而不仅仅是整数？例如，我希望得到以下结果：

```
thumbs = thumbs*1.5
# => [1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 1, 2, 3, 4, 5] 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-03T10:32:45.967

```
array = [*1..10]
fraction = 1.5
thumbs = array.cycle.take((array.length * fraction).floor) 
```

根据您要如何处理小数情况，您可以使用`ceil`or`round`代替`floor`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-03T10:33:41.113

## 答案 1

仅仅因为`Array * x`只定义为使用整数。

## 答案 2

因为在某些情况下，尚不清楚从中可以得到什么输出。例如

```
[1,2,3]*1.5 
```

应该输出`[1,2]`还是`[1]`？

## 可能的解决方案

不过，您可以定义自己的方法：

```
class Array
  alias_method :old_mult , :'*'            # remember, how old multiplication worked

  def * other                              # override * method
    result = old_mult(other.floor)         # multiply with floored factor
    end_index = (size * (other % 1)).round # convert decimal points to array index
    result + self[0...end_index]           # add elements corresponding to decimal points
  end
end

p [1,2] * 1
p [1,2,3] * 2
p [1,2,3,4,5] * 1.5
p [1,2,3,4,5,6] * 1.5 
```

这输出

```
[1, 2]
[1, 2, 3, 1, 2, 3]
[1, 2, 3, 4, 5, 1, 2, 3]
[1, 2, 3, 4, 5, 6, 1, 2, 3] 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-03T10:32:41.400

您可以定义一个方法并做任何您想做的事情：

```
def arr_times(f, arr)
  i = float.to_i
  arr*i + arr[0..(((f-i)*arr.length).floor)]
end 
```

# android - 无法实例化类型 MyWebViewClient

> ID：11308869
> 
> 赞同：0
> 
> 时间：2012-07-03T10:19:51.100
> 
> 标签：android, android-intent, android-webview

```
 package com.webview;

    import android.app.Activity;
    import android.content.Intent;
    import android.net.Uri;
    import android.os.Bundle;
    import android.webkit.WebView;
    import android.webkit.WebViewClient;

    public class Webview_integrationActivity extends Activity {

        /** Called when the activity is first created. */
        @Override
        public void onCreate(Bundle savedInstanceState) {
            super.onCreate(savedInstanceState);
            setContentView(R.layout.main);

            WebView mywebview = (WebView) findViewById(R.id.webView1);
            mywebview.setWebViewClient(new MyWebViewClient());

        WebViewClient client = new MyWebViewClient()
        {
            @Override
            public void launchExternalBrowser(String url) {
                 Intent intent = new Intent(Intent.ACTION_VIEW, Uri.parse(url));
                 startActivity(intent);
            }

        };
    }
    }

***************************************************************************************

package com.webview;

import android.content.Intent;
import android.net.Uri;

import android.webkit.WebView;
import android.webkit.WebViewClient;

public abstract  class MyWebViewClient extends WebViewClient {

    public boolean shouldOverrideUrlLoading(WebView view, String url) {
        if (Uri.parse(url).getHost().equals("www.google.com")) {
            // This is my web site, so do not override; let my WebView load the page
            return false;
        }
        // Otherwise, the link is not for a page on my site, so launch another Activity that handles URLs
        Intent intent = new Intent(Intent.ACTION_VIEW, Uri.parse(url));

        launchExternalBrowser(url);    

        return true;

}

    public abstract void launchExternalBrowser(String url);

} 
```

**当我运行此程序时，我收到错误消息“无法实例化 MyWebViewClient 类型”。我知道那是因为该类是抽象的。但是如何解决我的问题。我已经粘贴了两个类的代码使用。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-03T12:06:08.200

第一：你不能实例化一个抽象类。你只能扩展一个抽象类。

第二：创建自己的 WebViewClient 类（MyWebViewClient）需要什么。您可以在主要活动中使用 webViewClient 覆盖 shouldOverrideUrlLoading(WebView view, String url) 方法，并在此方法中执行与您在 launchExternalBrowser(String url) 方法中执行的相同操作。

我的意思是你在 launchExternalBrowser(String url) 方法中触发了一个意图，该方法是从 shouldOverrideUrlLoading(WebView view, String url) 方法调用的。那么为什么不在 shouldOverrideUrlLoading(WebView view, String url) 方法本身中触发相同的 Intent。

* * *

## 回答 #2

> 赞同：-4
> 
> 时间：2012-07-04T10:44:19.610

```
import android.app.Activity;
import android.content.Intent;
import android.net.Uri;
import android.os.Bundle;
import android.view.View;
import android.view.View.OnClickListener;
import android.webkit.WebView;
import android.webkit.WebViewClient;
import android.widget.Button;

public class Webview_integrationActivity extends Activity {

    /** Called when the activity is first created. */
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);

        final WebView mywebview = (WebView) findViewById(R.id.webView1);
        mywebview.setWebViewClient(new WebViewClient());

        Button button1 = (Button) findViewById(R.id.My_btn);
        button1.setOnClickListener(new OnClickListener() {

                     @Override
                     public void onClick(View v) {

                          startActivity(new Intent(
                                       "android.intent.action.VIEW",
                                        Uri.parse("https://www.google.com")));
                           // TODO Auto-generated method stub
                          }

              });

    }
        public boolean shouldOverrideUrlLoading(WebView view, String url) {
            if (Uri.parse(url).getHost().equals("www.google.com")) {
                // This is my web site, so do not override; let my WebView load the page
                return false;
            }
            // Otherwise, the link is not for a page on my site, so launch another Activity that handles URLs
            Intent intent = new Intent(Intent.ACTION_VIEW, Uri.parse(url));

            startActivity(intent);

            return true;

    }

} 
```

# html - 通过 Zebra RW420 打印机打印 Web 内容

> ID：11308870
> 
> 赞同：0
> 
> 时间：2012-07-03T10:19:53.367
> 
> 标签：html, cordova, zebra-printers, printing-web-page

目前我正在做一个基于 phonegap 的软件，现在我想通过 Zebra RW420 打印机打印网页内容。我查看了 Zebra sdk for android 然后我发现它只能打印疼痛文本和位图图像。这是通过 Zebra RW420 打印机打印 HTML 格式文件的方法吗？谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-08-14T08:48:01.570

在 Zebra RW420 上打印 Web 内容的方法是将 Web 内容转换为 PNG/BMP 图像。在 android 中，您可以使用 webview.capturepicture 将当前网页内容转换为 PNG 文件。然后这个 PNG 文件可以通过 Zebra SDK 打印出来。

# android - 在 Android r20 中自定义 build.xml

> ID：11308872
> 
> 赞同：0
> 
> 时间：2012-07-03T10:20:03.277
> 
> 标签：android

在以前的版本中，我曾经使用我自定义的构建脚本在 Android 中构建 apk。更新到 Android 开发工具 r20 后，我无法再使用自己的构建脚本。我一直在尝试修复它，直到在检查库依赖关系的部分中获得空指针异常。

有人如何解决它？我在 tools/ants/ 中使用 build.xml 并尝试包含 sheklock 操作栏库。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-13T17:17:28.233

我不知道您是否已经解决了它，但是您可以通过将 Eclipse 更新到 Juno (4.2) 来避免所有这些问题。我遇到了同样的问题，然后我等待了一个稳定版本的 eclipse 现在它工作正常，希望这会有所帮助

# c# - C#：如何从 csv 中选择数据列，存储在数组/数据表中？

> ID：11308877
> 
> 赞同：1
> 
> 时间：2012-07-03T10:20:17.333
> 
> 标签：c#, csv, datagridview, datatable

我已经成功地将一个 .csv 文件加载到一个数组中，我将其设置为数据集/datagridview 控件以供查看。我一直遇到的问题是想办法：

*   选择导入数据的列（在 UI 方面）
*   存储新选择的信息以供审核

我拥有的当前代码允许用户浏览其系统上的文件并将数据存储在数组中并将其设置为数据表。

```
 private void btnBrowse_Click(object sender, EventArgs e)
    {
        #region Local Variables
        int nRows = 0;      //Row Counter
        int icol = 0;       //Index value for Columns -> fArray
        int irow = 0;       //Index value for Row -> fArray
        string Line;        //Temp string value for storing lines
        #endregion

        #region File Open Parameters
        //file open parameters
        OpenFileDialog fopen = new OpenFileDialog();
        fopen.Title = "Choose file...";
        fopen.Filter = "Comma Seperated Values|*.csv";
        fopen.InitialDirectory = @"C:\";
        #endregion

        if (fopen.ShowDialog() == DialogResult.OK) //Show file open dialog and check if ok has been pressed
        {
            #region progress bar initialisation
            //initialize progress bar
            pb.Location = new Point(60, 209);
            pb.Width = 516;
            pb.Height = 23;
            pb.Style = ProgressBarStyle.Continuous;
            pnlStep1.Controls.Add(pb);
            #endregion

            try
            {
                StreamReader fReader = new StreamReader(fopen.FileName);

                #region Array Index Counters
                //Count Columns for fArray index
                string count = fReader.ReadLine();
                string[] tmpCount = count.Split(',');
                fReader.Close();

                //Count Rows for fArray index
                fReader = new StreamReader(fopen.FileName); //begin reading from line 1
                while ((fReader.ReadLine()) != null)
                {
                    nRows++;
                }

                fArray = new string[nRows, tmpCount.Length];
                fReader.Close();
                //End count
                #endregion

                #region Load File Contents
                fReader = new StreamReader(fopen.FileName); //begin reading from line 1
                DataSet ds = new DataSet();
                dt = ds.Tables.Add("ImportData");

                while ((Line = fReader.ReadLine()) != null)
                {
                    string[] row = Line.Split(',');
                    foreach (string column in row)
                    {
                        fArray[irow, icol] = column;
                        icol++;
                    }
                    icol = 0;
                    recordCountLabel.Text = irow.ToString(); //NEEDS LOOKING AT
                    pb.Value = (irow * 100) / fArray.GetLength(0);
                    irow++;
                }
                pb.Value = 100;
                fReader.Close();
                #endregion

                #region Add data to dgImport
                for (int i = 0; i < fArray.GetLength(1); i++) //Add Columns to empty DataGridView
                {
                    dt.Columns.Add("Field " + i.ToString());
                }

                for (int i = 0; i < 3; i++) //Insert data into DataGridView (use fArray.GetLength(0) for entire database or use 5 for sample data)
                {
                    DataRow row = dt.NewRow();
                    for (int j = 0; j < fArray.GetLength(1); j++)
                    {
                        row[j] = fArray[i, j].Trim();
                    }
                    dt.Rows.Add(row);
                    dgImport.DataSource = dt;
                }

                btnNext2.Enabled = true;
                #endregion

            }
            catch (Exception ex)
            {
                MessageBox.Show("Error: Could not read file from disk.\r\nOriginal error: " + ex.Message);
            }
        }   
    } 
```

任何帮助将不胜感激 ：）。

编辑：对不起，我又忘了提及，我在 datagridview 控件中显示了一些示例数据行，并正在考虑提供动态创建的复选框列表，允许用户勾选他/她想要选择的列（基本上只复制选定的数据）。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-03T10:24:42.547

您需要`csv`使用`OleDb`Provider 阅读。这样，您可以指定要包含在`SELECT`语句中的列集。

编辑：

```
 string location=@"c:\folder\";
 string cnstr = "Provider=Microsoft.Jet.OLEDB.4.0;Data Source=" + location + ";Extended Properties=\"text;HDR=No;FMT=Delimited\";";
 string sql = "select F2,F1 from test.csv";

 using (OleDbDataAdapter adp = new OleDbDataAdapter(sql, cnstr))
  {
    DataTable dt = new DataTable();
    adp.Fill(dt);

    foreach (DataRow row in dt.Rows)
    {
       Console.WriteLine(row[0] + " " + row[1]);
    }
  } 
```

# sql - 如何在groovy中回滚事务

> ID：11308884
> 
> 赞同：4
> 
> 时间：2012-07-03T10:20:23.160
> 
> 标签：sql, spring, groovy, transactions

我不能在我的 TestCase 中使用 @Transactional 注释。我有解决方法 - 直接使用 TransactionalManager。不幸的是，当我基于 SpringContext 中的 DataSource 在 groovy 中创建 Sql 对象然后向数据库中插入一行时，它不会回滚。

```
@ContextConfiguration(locations = [ "../dao/impl/ibatis/spring-data-context-config.xml"])
@RunWith(SpringJUnit4ClassRunner.class)
public class OrganizationTest {

@Autowired
DataSource dataSource;

@Autowired
DataSourceTransactionManager transactionManager;

private TransactionStatus transactionStatus;

@Before
public void setUp() {
    transactionStatus = transactionManager.getTransaction(new DefaultTransactionDefinition());
}
@After
public void tearDown() {
    transactionManager.rollback(transactionStatus);
    transactionStatus = null;
}

@Test
public void shallObtainSequenceNo() throws Exception {

    Connection connection = dataSource.getConnection();
    connection.setAutoCommit(false);
    Sql sql = new Sql(dataSource);

    //given
    Organization organization = new Organization("KongregatzionIX", "bisut000000000000001");
    //when
    organization.insert(sql);
    //then
    assertNotNull(organization.getId());
    }
} 
```

SQL 查询如下所示：

```
public class Organization {

String name;
String id;
String parentId;

Organization(String name, String parentId){
    this.name = name;
    this.parentId = parentId;
}

public void insert(Sql sql){
    String createdBy = GlobalConstant.SABA_ADMIN_ID.getValue();
    String updatedBy = GlobalConstant.SABA_ADMIN_ID.getValue();
    String companyType = "2";
    String flags = "1000000000";

    id = sql.firstRow( "select 'bisut' || LPAD(TPT_COMPANY_SEQ.NEXTVAL,  15, '0') as id from dual ").id;

    def timeStamp = sql.firstRow("select  to_char(SYSTIMESTAMP, 'YYYYMMDDHH24MISSFF') as ts FROM DUAL ").ts;
    def nameIns = name;
    def today = new java.sql.Date(new Date().getTime());
    sql.executeInsert('''
                INSERT INTO TPT_COMPANY(ID, TIME_STAMP, CREATED_BY, CREATED_ON, UPDATED_BY, UPDATED_ON, CI_NAME, NAME, CI_NAME2, NAME2, COMPANY_TYPE, FLAGS, PARENT_ID)
                VALUES (?,?,?,?,?,?,?,?,?,?,?,?,?)
                ''' ,
                [id, timeStamp, createdBy, today, updatedBy, today, nameIns.toLowerCase(), nameIns, nameIns.toLowerCase(), nameIns, companyType, flags, parentId]);
 }
} 
```

当然，我想设置跨越所有测试方法的事务。

// 编辑

由于声誉太小，我无法回答，但 TransactionAwareDataSourceProxy 是我一直在寻找的。

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-05-31T18:12:39.687

好的，对于任何读到这篇文章的人来说，他们的头一直在敲击键盘，准备好尖叫吧。这里是：使用 DataSource 创建的 Groovy Sql 对象，如下所示：

```
DataSource dsobj = null;
Sql sqlobj = null;

try{
  dsobj = (...get your DataSource obj...);
  sqlobj = new Sql(dsobj);
} catch (...) {...} 
```

当然会给你一个有效的 Sql 对象，你可以使用它运行命令等，但你不会得到事务支持。然而...

如果您使用 Connection 对象创建 Sql 对象，您将获得该事务支持。现在，为什么会这样，我不知道，因为您可以使用以下命令访问 DataSource 对象中包含的 Connection 对象：sqlobj.getDataSource().getConnection() *。*但是，如果您尝试这样做：

```
sqlobj.getDataSource().getConnection().setAutoCommit(false); 
```

它的影响***为零***。无论您喜欢与否，您运行的任何命令都将自动提交。同样，调用：

```
sqlobj.getDataSource().getConnection().rollback(); 
```

什么都不做。

那么，如果您必须从应用程序服务器获取数据库连接，因为您有组织标准，例如，坚持要求您从应用程序服务器管理的连接池中获取它们，并且数据源由服务器管理员定义，您会怎么做？对于为 IBM WAS 等常见应用程序服务器开发应用程序的人来说，发生了很多事情。因此，当您只能使用一个硬编码或更好的是，JNDI 数据源的属性文件存储或数据库存储名称。你现在要做什么？您似乎必须使用 DataSource 对象，而不享受任何现代 RDBMS 中最常见和最有价值的特性，即事务。

这是解决方法，在这里你真的需要准备好尖叫，因为它完全没有意义，但它确实有效。您需要像上面一样创建一个 DataSource 对象，然后在 Sql 对象的构造函数中使用其 Connection 对象，而不是 DataSource 对象。尽管这很荒谬，但这是解决办法。例子：

```
DataSource dsobj = null;
Sql sqlobj = null;

try{
  dsobj = (...get your DataSource obj...);
  sqlobj = new Sql(dsobj.getConnection());
} catch (...) {...} 
```

现在，您将使用 sqlobj 来执行事务敏感的工作。您可以将 AutoCommit 设置为 false [sqlobj.getConnection().setAutoCommit(false)]，运行更新，然后根据需要执行 sqlobj.getConnection().commit() 或 sqlobj.getConnection().rollback()。

似乎 dsobj 可以超出 sqlobj 的直接范围，并且 sqlobj 仍将起作用。我推测 VM 足够聪明，只要 sqlobj 在范围内，就可以让 sqlobj 保持活动状态。这是有道理的，因为 dsobj 的 Connection 对象无疑被视为服务器管理的资源，因此任何附加它的对象都会保持活动状态，直到引用封闭订阅对象（即 sqlobj）的所有其他对象最终超出范围. 只是一个猜测。

那么，这个问题的确凿证据在哪里？它在这里：

[http://groovy.codehaus.org/api/groovy/sql/Sql.html#commit()](http://groovy.codehaus.org/api/groovy/sql/Sql.html#commit())

我引用：

**commit** public void commit() throws java.sql.SQLException 如果此 SQL 对象是使用 Connection 创建的，则此方法提交连接。*如果此 SQL 对象是从 DataSource 创建的，则此方法不执行任何操作。* 抛出：java.sql.SQLException - 如果发生数据库访问错误

**rollback** public void rollback() throws java.sql.SQLException 如果此 SQL 对象是使用 Connection 创建的，则此方法会回滚连接。*如果此 SQL 对象是从 DataSource 创建的，则此方法不执行任何操作。* 抛出：java.sql.SQLException - 如果发生数据库访问错误

只是生活中需要思考的另一个谜团……希望这会有所帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-12-11T18:27:49.543

我发现马特的回答有效。唯一需要注意的是，`Sql.closeResources(Connection)`它在执行方法和查询调用之后调用，除非您在`Sql.withTransaction`or中，否则将关闭连接`Sql.cacheConnection`。

这意味着您肯定会获得事务感知，但**只能**`Sql.withTransaction`在or内部运行的闭包中`Sql.cacheConnection`。我正在尝试在`groovy.sql.Sql`Web 服务调用的整个线程期间使用事务感知来协调 Web 服务中的 DAO，就像 Spring 或 JEE 事务管理所做的那样。

如果我有一个 jersey 端点和理想下的组件，我不应该将我的事务范围限制在 DAO 层特定的块中，因为那是我们的`groovy.sql.Sql`实例所在的位置；因此，为什么我发现依赖于`Sql.withTransaction`交易感知/回滚能力的不足解决方案。

供参考： [Github Sql.java 源码](https://github.com/groovy/groovy-core/blob/master/subprojects/groovy-sql/src/main/java/groovy/sql/Sql.java) 你会注意到很多方法，例如`executeUpdate`在执行后会调用`closeResources`只跳过关闭连接的方法`if (cacheConnection)`；因此，只有通过执行闭包块，您才能使用`withTransaction`或使用，我相信这是作者的意图。这很好，除了启动和结束与 Web 服务请求的整个范围匹配的事务的限制。这是一个警告，我的解决方案是重写，因为这个类的作者慷慨地使它可以重写。覆盖它以不关闭基于事务活动的连接。`cacheTransaction``commit()``rollback()``closeResources`

换句话说，如果您有事务管理以某种方式处理此连接，则在其他地方`closeResources`使用无操作实现；否则，不要覆盖实现。

# cassandra - cassandra UpdateColumnFamily InvalidRequestException 默认 TException

> ID：11308885
> 
> 赞同：0
> 
> 时间：2012-07-03T10:20:24.863
> 
> 标签：cassandra

我将 thrift-0.7.0 与 cassandra-1.1.1 一起使用，我成功地使用 system_add_column_family 添加了一个新的列族，但是当我尝试使用 system_update_column_family 将新列添加到现有的列族时，我给出了一个错误“UpdateColumnFamily InvalidRequestException Default TException "，我尝试的示例 C++ 代码如下

```
string sReturn;
CfDef ColumnFamilyDef;
ColumnFamilyDef.keyspace="keyspace2";
ColumnFamilyDef.column_type="Standard";
ColumnFamilyDef.name="ColFM1";
ColumnFamilyDef.__isset.column_type=true;

ColumnDef column;
column.name="Col2";
column.validation_class="UTF8Type";
ColumnFamilyDef.column_metadata.push_back(column);

ColumnFamilyDef.__isset.column_metadata=true;
mpClient->system_update_column_family(sReturn,ColumnFamilyDef); 
```

给我以下异常

UpdateColumnFamily InvalidRequestException 默认 TException

任何人都可以帮助我提前谢谢你

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-03T22:32:13.470

我相信您仍然需要`set_keyspace`在创建列族之前调用您的连接以将其设置为新的键空间。这也许就是破坏的原因。

附带说明一下，使用 CQL 而不是旧的 Thrift API 可能更容易做到这一点。您基本上可以调用`execute_cql_query`并传入一个字符串。[CQL](http://www.datastax.com/docs/1.1/references/cql/index#cql-reference)有一个完整的参考资料，应该会让事情变得更容易。

# ruby-on-rails - 为什么将 prawnto 移动到 Gemfile 会出现“缺少模板”错误

> ID：11308887
> 
> 赞同：1
> 
> 时间：2012-07-03T10:20:33.753
> 
> 标签：ruby-on-rails, bundler, prawn, prawnto

在2.3.5项目中将[gem依赖项移动到bundler](https://stackoverflow.com/questions/11183509/why-prawnto-gem-installs-rails-3-x-when-there-is-already-a-rails-2-x)后，为什么会出现错误：

```
 Template is missing

  Missing template .../show.erb in view path app/views 
```

生成PDF时？

如果我输入以下内容，则可以生成 PDF：

```
 require "prawn"
  require "prawnto" 
```

在`environment.rb`但我不确定这是否是*修复*。

# python - python音频不播放

> ID：11308889
> 
> 赞同：1
> 
> 时间：2012-07-03T10:20:51.053
> 
> 标签：python, qt, audio, pyside, phonon

当我在 Python 中键入以下代码时，`song.mp3`不会播放。为什么？？

```
输出 = Phonon.AudioOutput(Phonon.MusicCategory)
m_media = Phonon.MediaObject()
Phonon.createPath（m_media，输出）
m_media.setCurrentSource(Phonon.MediaSource("files/song.mp3"))
m_media.play()

```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-03T11:00:11.007

您需要 QApplication 或 QCoreApplication 实例，并且您必须在 m_media.play() 之后使用 exec() 成员启动事件循环。Phonon::MediaObject::play 是异步的。

C++ 示例

```
QApplication app(argc, argv);
// phonon initialization, and play
app.exec() 
```

# java - 在 JPA 中检查数据库

> ID：11308894
> 
> 赞同：6
> 
> 时间：2012-07-03T10:21:25.530
> 
> 标签：java, mysql, jpa

如何在 JPA 中检查数据库是否连接，当数据库连接在部署应用程序后打开或关闭时，即（在运行应用程序时）

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-03T13:00:14.693

最简单的方法是执行查询，例如

```
em.createNativeQuery("select 1 from dual").getSingleResult(); 
```

通常，数据源/连接池或 JPA 提供程序将提供某种连接测试或死连接解决方​​案。

如果您使用 EclipseLink 的连接池，它将自动检测死连接并重试查询。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-03T10:40:59.590

通常，所有 JPA 实现都使用一些连接池或池化数据源（如 C3P0），并且这些连接池[具有](http://www.mchange.com/projects/c3p0/#configuring_connection_testing)在获取连接之前测试数据库连接性的配置。请检查您的连接池/数据源文档以了解此设置。

# c++ - uint8_t 不接受两位数输入

> ID：11308898
> 
> 赞同：6
> 
> 时间：2012-07-03T10:21:36.513
> 
> 标签：c++, uint

这是我的测试代码

```
#include<iostream>
using namespace std;
int main() 
{
    uint8_t a;
    while(1)
    {
        cin>>a;
        if(a == 0) break;
        cout<<"Input is "<<a<<endl;
    }
} 
```

当我执行（使用我的输入）时，这就是我得到的

```
1
Input is 1
2
Input is 2
12
Input is 1
Input is 2
0
Input is 0
3  
Input is 3 
```

问题 1：它将输入 12 作为两个单独的输入

问题 2：如果 a==0 不起作用的条件

可能有什么问题？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-07-03T10:24:35.547

`uint8_t`是一个`typedef`为一个`unsigned char`。这意味着将从中读取一个字符`cin`。

读取时`"0"`，它实际上是字符的 ascii 值，`'0'`通常为 48，它不为零，因此相等性检查失败。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-07-03T10:23:15.330

`uint8_t`与 a 相同`char`，因此尝试从 cin 中提取一个可能只会为您提供下一个要输入的字符。

然后，要接收的值不是字符转换为 int，而是输入的 ascii 值。当您键入 0 时，您将获得 ascii \0 而不是 int 零，因此不会触发您对零的测试。试着`if( a == '0')`看看我的意思。

# javascript - Javascript和正则表达式：如果是数字，则删除除第一个字符之外的所有字符

> ID：11308902
> 
> 赞同：-2
> 
> 时间：2012-07-03T10:22:07.990
> 
> 标签：javascript, regex

我有一些这样的字符串：

```
var str1 = "1 aaa bbb.";
var str2 = "ccc ddd.";
        ... 
```

如果有数字，我想使用正则表达式并删除除第一个数字以外的所有内容。

因此，这两个字符串将变为：

```
str1 = "1"
str2 = "" 
```

这可以通过使用来完成吗

```
str.replace(regex,''); 
```

如果您可以帮助我处理正则表达式。非常感谢你。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-03T11:13:00.377

您可以尝试匹配数字，而不是替换其他所有内容。

```
str = str.match(/^\d/); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-03T10:29:48.760

如果您是 regex 的初学者/出于任何其他原因不想使用 regex，总有替代方案：

```
var str1 = "1 aaa bbb.";
var str1 = parseInt(str1.charAt(0));

if (str1)
    alert(str1); 
```

# c++ - 向量和双端队列初始化或 push_back 导致 SIGABRT 错误

> ID：11308905
> 
> 赞同：3
> 
> 时间：2012-07-03T10:22:25.970
> 
> 标签：c++, vector, sigabrt, deque

在初始化我的双端队列或向量时，我遇到了一个奇怪的错误。我正在使用 QtCreator 和 CMake-Project。

如果我使用双端队列，它会在初始化时中止：

```
std::deque<int> myValues; // <-- abort here

for (int i=0;i<10;++i)
{
    myValues.push_back(i);
} 
```

当我使用双端队列时，它在 push_back 上中止：

```
std::vector<int> myValues; 

for (int i=0;i<10;++i)
{
    myValues.push_back(i); // <-- abort here
} 
```

我不知道为什么现在会发生这种情况（它一直都是这样工作的）。两次中止都发生在 _gnu_cxx::new_allocator< int >::allocate 内。

有什么提示吗？

提前感谢您的努力！

哈特穆特

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-03T10:26:04.740

它看起来像程序中其他地方的堆损坏。也就是说，您在某处写入越界或删除无效指针。一旦堆内部结构损坏，大量分配可能会使您的程序崩溃。

# android - NetworkOnMainThreadException 加载图像如何

> ID：11308919
> 
> 赞同：1
> 
> 时间：2012-07-03T10:23:29.783
> 
> 标签：android, android-asynctask, android-3.0-honeycomb

不知怎的，我似乎没有得到它。8-} 我有一个从数据库请求 JSON 数据的活动，返回结果包括一个图像 URL。我的应用程序在 Android v2.x 上运行良好，但正如我不得不偶然发现的那样，在 Android 4 上存在奇怪的行为 - 包括未加载的图像（这不是我所说的兼容性？！）现在我必须修复它，希望修复不会再次破坏 Android 2.x 系统上的功能！

基本上，该活动的工作方式与网络上所有众多示例中的描述一样（我删除了大多数错误检查等，以将代码精简到基本部分）：

```
 new GetProductDetails().execute();
 (..)

 class GetProductDetails extends AsyncTask<String, String, String> {

    @Override
    protected void onPreExecute() {
            (..)
    }

    protected String doInBackground(String... args) {

        // Building Parameters
        List<NameValuePair> params = new ArrayList<NameValuePair>();
        params.add(new BasicNameValuePair("pid", pid));
        // getting product details by making HTTP request
        JSONObject json = jsonParser.makeHttpRequest(
                getString(R.string.urlProductDetails), "GET",
                params);
        try {
               JSONArray prodObj = json.getJSONArray(Consts.PRODS);
                pinfo = prodObj.getJSONObject(0);
        } catch (JSONException e) {
            e.printStackTrace();
        }
        return null;
    }

    protected void onPostExecute(String file_url) {
        // updating UI from Background Thread
        runOnUiThread(new Runnable() {
            public void run() {
                // Storing each json item in variable
                try {

                    String s = "";
                    txtvname = (TextView) findViewById(R.id.txtpname);
                    txtshortinfo = (TextView) findViewById(R.id.txtshortinfo);
(… populating activity window with json data …)

            }
        });

        // update image:
        String imgURL;
        try {
            imgURL = pinfo.getString("pic_url");
            if (imgURL.length() > 1) {
                imgURL = getString(R.string.urlPicsFull) + imgURL;
                ImageView imgProd = (ImageView) findViewById(R.id.imgProduct);
                Drawable drawable = LoadImageFromWebOperations(imgURL);
                imgProd.setImageDrawable(drawable);
            }
        } catch (JSONException e) {
            e.printStackTrace();
        }
        pDialog.dismiss();
    }

    private Drawable LoadImageFromWebOperations(String url) {
        try {
            InputStream is = (InputStream) new URL(url).getContent();
            Drawable d = Drawable.createFromStream(is, "src name");
            return d;
        } catch (Exception e) {
            System.out.println("Could not load " + url + ", Exc=" + e);
            return null;
        }
    } 
```

现在，加载图像时会出现 android.os.NetworkOnMainThreadException。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-11T10:47:43.770

我想你的 targetSDKVersion 太高了。[以下](https://developer.android.com/reference/android/os/Build.VERSION_CODES.html)是有关在哪个 targetSDKVersion 上禁用了哪些兼容性行为的一些文档。该列表中实际上缺少 NetworkOnMainThreadException。[此处](https://developer.android.com/reference/android/os/NetworkOnMainThreadException.html)记录如下：“这仅适用于针对 Honeycomb SDK 或更高版本的应用程序。针对早期 SDK 版本的应用程序允许在其主事件循环线程上进行联网，但非常不鼓励这样做。”

因此，如果您将 targetSDKVersion 降低到 Honeycomb 以下的值，您可以在主线程上进行联网。将 targetSDKVersion 设置为某个值就像是在说：**“我在那个级别上测试了我的应用程序。”**

1.  onPostExceute 总是在主线程上运行。不需要在那里使用 runOnUiThread() 。
2.  LoadImageFromWebOperations() 需要在 doInBackground() 中调用才能不在主线程上运行。这导致了异常。
3.  onPostExecute 获取 doInBackground 返回的参数。因此，如果您不使用 onPostExcecute 中的参数并在 doInBackground 中始终返回 null，则可以使用 Void 作为结果类型（而不是 String）

# mysql - 优化mysql内部连接组

> ID：11308920
> 
> 赞同：0
> 
> 时间：2012-07-03T10:23:36.903
> 
> 标签：mysql, query-optimization

我正在尝试优化以下查询。

表seafood_tbl有500条记录

表 discs_tbl 有 10,000 条记录

当我在 PHPmyadmin 中运行它时，执行需要 20 秒，也就是永恒。

```
SELECT 
SUM(a.squid)
FROM seafood_tbl a
INNER JOIN dishes_tbl b ON 
   ( b.id_group = a.id AND b.choice =0 ) 
   OR 
   ( b.id_chef = a.id_chef AND ISNULL( b.id_group ))
GROUP BY a.id 
```

我对连接中引用的每个字段都有索引。我在 discs_tbl 上运行了 OPTIMIZE TABLE。

这是解释的输出。

```
1   SIMPLE  a   ALL PRIMARY NULL    NULL    NULL    505 Using temporary; Using filesort
1   SIMPLE  b   ref_or_null choice_index,id_group_index,id_chef id_group_index  5   a.id    4   Using where 
```

我的查询是否有严重问题，或者我应该寻找其他地方？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-03T13:20:01.093

所以事实证明在 JOIN 中使用 OR 是一个可怕的想法。我将我的查询分成 2 个联合在一起的 SELECTS，每个 SELECTS 只在一个条件下加入，它将查询速度提高了无穷大。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-03T10:31:08.540

```
SELECT  SUM(a.squid) 
FROM    seafood_tbl a 
INNER JOIN dishes_tbl b
        ON ( b.id_group = a.id AND b.choice = 0 )  
            OR (ISNULL( b.id_group ) AND b.id_chef = a.id_chef) 
GROUP BY a.id 
```

创建两个索引：

*   索引（dishes_tbl.id_group，dishs_tbl.id_chef，dishes_tbl.choice）
*   索引（a.id，a.id_chef，a.squid）

两个索引中的列顺序可能不是最佳的。

# sql-server - 无法更改 SQL Server 2008 中“sa”的密码

> ID：11308921
> 
> 赞同：3
> 
> 时间：2012-07-03T10:23:43.680
> 
> 标签：sql-server, sql-server-2008

我正在尝试`sa`通过 SQL Server Management Studio 更改帐户的密码，但它没有更改它，我尝试了此处描述的所有技术[http://blog.sqlauthority.com/2009/08/04/sql-server-forgot -用户名密码-sa/](http://blog.sqlauthority.com/2009/08/04/sql-server-forgot-the-password-of-username-sa/)

当我试图通过 sa 进入管理工作室时，它给出了这个错误

用户“sa”登录失败。（.Net SqlClient 数据提供者）

* * *

如需帮助，请单击： http: [//go.microsoft.com/fwlink ?ProdName=Microsoft+SQL+Server&EvtSrc=MSSQLServer&EvtID=18456&LinkId=20476](http://go.microsoft.com/fwlink?ProdName=Microsoft+SQL+Server&EvtSrc=MSSQLServer&EvtID=18456&LinkId=20476)

* * *

服务器名称：MY-PC\SQLEXPRESS 错误号：18456 严重性：14 状态：1 行号：65536

更改密码后出现此错误

与服务器成功建立连接，但在登录过程中出现错误。（提供者：共享内存提供者，错误：0 - 管道的另一端没有进程。）（.Net SqlClient 数据提供者）

* * *

如需帮助，请单击： http: [//go.microsoft.com/fwlink ?ProdName=Microsoft+SQL+Server&EvtSrc=MSSQLServer&EvtID=233&LinkId=20476](http://go.microsoft.com/fwlink?ProdName=Microsoft+SQL+Server&EvtSrc=MSSQLServer&EvtID=233&LinkId=20476)

* * *

服务器名称：MY-PC\SQLEXPRESS 错误号：233 严重性：20 状态：0

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-07-03T15:04:32.157

我搞定了，这里的密码更改 [http://web.archive.org/web/20180115133134/http://www.rickwargo.com/2010/09/14/installing-dotnetnuke-community-edition-on-microsoft -网络矩阵/](http://web.archive.org/web/20180115133134/http://www.rickwargo.com/2010/09/14/installing-dotnetnuke-community-edition-on-microsoft-webmatrix/)

然后从 windows 帐户打开 sql server 并将远程连接设置为 true 并设置“windows 和 sql server 安全”的安全性

它还需要首先允许将 sql server 配置中的 TCP/IP 和管道设置为 Enabled ，然后您必须重新启动 SQL Server 并重新启动 SQLEXPRESS 服务

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2016-09-27T08:54:09.370

我必须采取以下步骤来解决这个问题。我首先通过已添加到 SQL Server 的计算机上的管理员帐户登录到 SQL Server Management Studio（使用 Windows 身份验证）来完成所有这些工作。

1.  **确保启用混合模式身份验证**。转到 SQL Server 实例属性并检查以下内容。如果您要进行任何更改来完成此步骤，则此步骤需要重新启动 SQL Server 服务。

[![在此处输入图像描述](../Images/b18b23fc1f23ef357f393bac18485705.png)](https://i.stack.imgur.com/vb656.png)

2.  **重置“sa”用户的密码**。转到 SQL Server 实例 -> 安全 -> 登录 -> sa -> 右键单击`sa`​​节点并转到属性。在此处提供新密码。如果您仅出于开发目的使用弱密码，则可能必须取消选中“强制密码策略”复选框。

[![在此处输入图像描述](../Images/f66b1530df41f69370ac054aaf98e41c.png)](https://i.stack.imgur.com/c8twz.png)

3.  转到您在上面步骤 2 中打开的“sa”用户的属性窗口中的状态页面，并**确保启用了“sa”用户**，如下所示：

[![在此处输入图像描述](../Images/d4ebb15972b02fabe135fe817c4da761.png)](https://i.stack.imgur.com/h7pvw.png)

4.  **确保在 SQL Server 配置管理器中启用了命名管道**，如下所示。如果您更改任何设置来完成此操作，您可能需要重新启动 SQL Server 服务。

[![在此处输入图像描述](../Images/14b7b3e0d047aaa481e9cf23da6423f6.png)](https://i.stack.imgur.com/TjOuc.png)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-03T11:15:43.837

请按照以下步骤操作：

1）首先打开SQL Server Management Studio。
2) 现在你在登录 Scrren。在这里输入“服务器名称”：“.\SQLEXPRESS”，
选择“身份验证”：“Windows 身份验证”。在此之后单击“连接”。
3）现在您打开左侧的“对象资源管理器”。
4）展开“安全”，
5）展开“登录”，
6）右键单击“sa”并选择“属性”
7）从左侧站点“选择页面”中选择“常规”。
8) 现在选择“SQL Server 身份验证”
9) 输入“密码”，然后单击“确定”按钮。
10) 请同时检查左侧站点“选择页面”中的“状态”。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-04T04:30:56.803

请检查您的“sa”密码。可能是您在登录时输入的密码错误。
因为，我检查了我的 SQL-Server 管理工作室，我收到了相同
的错误消息，当我输入错误的密码时，我收到了与您的错误消息相同的错误消息。

所以，请仔细更改密码重试，并检查“sa”的状态并重新启动
sql-server。然后尝试登录。

# jquery - 首次使用 JQuery 加载页面时，面板未显示

> ID：11308924
> 
> 赞同：0
> 
> 时间：2012-07-03T10:23:55.360
> 
> 标签：jquery, .net

```
<html xmlns="http://www.w3.org/1999/xhtml">
<head runat="server">
<title></title>

<script type="text/javascript" 
src="http://ajax.googleapis.com/ajax/libs/jquery/1.4.4/jquery.min.js">
</script>

<script type="text/javascript">
   $(function () {
    $('select[id$=ddlCardType]').change(function () {
        if (this.value == -1) {
            $('div[id$=Panel1]').show();
            $('div[id$=Panel2]').hide();
        }
        else {
            $('div[id$=Panel1]').hide();
            $('div[id$=Panel2]').show();
        }
    });

});
</script>

</head>
<body>
<form id="form1" runat="server">
<asp:DropDownList ID="DropDownList1" runat="server">
    <asp:ListItem Text="Select" Value="-1" />
    <asp:ListItem Value="1" Text="Text1" />
    <asp:ListItem Value="2" Text="Text2" />
    <asp:ListItem Value="3" Text="Text3" />
    <asp:ListItem Value="4" Text="Text4" />
    <asp:ListItem Value="5" Text="Text5" />
</asp:DropDownList>
<asp:Panel ID="Panel1" runat="server" Style="display: none;">
    Lorem Ipsum Lorem IpsumLorem IpsumLorem IpsumLorem IpsumLorem Ipsum
</asp:Panel>
<asp:Panel ID="Panel1" runat="server" Style="display: none;">
    This si panel 2
</asp:Panel>

</form>
</body>
</html> 
```

第一次加载页面时，上面编写的代码不起作用。即当第一次加载页面时 Panel1 应该是可见的。但它没有发生。只有在您对下拉菜单进行更改后，它才能正常工作。

请指教。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-03T10:26:02.603

删除这个：

```
Style="display: none;" 
```

在执行更改事件之前，选择是隐藏的。如果您出于某种原因需要 display:hidden 在样式中，您可以更改您的 javascript：

```
$(function() {
    $('select[id$=DropDownList1]').change(function() {
        if (this.value == -1) {
            $('div[id$=Panel1]').show();
        }
    }).change();

}); 
```

它只会在页面加载时执行更改事件。

# ms-access - MS 访问：如何在 2 行之间添加 1 行？

> ID：11308925
> 
> 赞同：2
> 
> 时间：2012-07-03T10:23:57.487
> 
> 标签：ms-access, ms-access-2007

我有一个包含这些表的访问数据库： - 序列：它描述了电影的序列：例如：男孩踢球（1），男孩打球（2），男孩说话（3）等。

*   电影：它由上面的序列组成。例如：3 - 2 - 1 - 2

我的问题是：我如何插入一个新序列，因为访问总是将它插入到末尾。例如：我想得到（我想在 2 和 1 之间插入序列 3） 3 - 2 - 3 - 1 - 2

Access 会给我 3 - 2 - 1 - 2 - 3 （添加到末尾）

有什么线索吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-03T10:28:54.603

在数据库中插入数据的顺序无关紧要，重要的是您通过[`ORDER BY`](http://office.microsoft.com/en-us/access-help/order-by-clause-HP001032258.aspx)提供[`SELECT`](http://msdn.microsoft.com/en-us/library/bb208930%28v=office.12%29.aspx)语句的子语句操作的检索顺序。

所以你需要确定你可以用来排序的字段，例如一个序列ID，然后在那个字段上排序。像这样

```
SELECT * FROM movie_sequences ORDER BY movie_sequence_id ASC; 
```

# php - 没有出现在时间线上的动作

> ID：11308927
> 
> 赞同：3
> 
> 时间：2012-07-03T10:24:04.447
> 
> 标签：php, facebook, facebook-opengraph, facebook-timeline

我在这里看到了类似的问题，但在我的情况下似乎没有一个答案有效。

这个案子真的很简单。我“发布”了一篇“文章”——这个动作被发送到 fb（使用 PHP）（使用 publish_actions 范围）。所有的电话似乎都很好。FB 上的所有设置似乎都不错 - 对象和操作是标准的。我是管理员等。

在 Facebook 上 - 我可以在活动日志中看到该操作。如果我点击活动日志中的时间戳，我可以看到整个帖子，包括 og:description 等。AFAICT 这也应该出现在时间轴上。

但是不显示！？

需要注意的一点是，在我的操作的新条目右侧的活动日志中，状态始终为“时间轴上允许”。但即使我将状态更改为“显示在时间轴上”，它仍然没有显示在时间轴上。

这一定是一件非常简单的事情。Facebook 有内容（不是抓取错误），已经注册了活动，但只是没有在时间轴中显示对象。

我还使用图形 API 资源管理器进行了测试，我得到了相同的结果，即在活动日志中的条目，但不在时间线等中。我得到了一个 objectid 返回 - 正如预期的那样。

只是补充一下：我在时间线上看到的（作为用户）是右上角的“活动”框。

# bluetooth - 最大蓝牙虚拟com口数

> ID：11308931
> 
> 赞同：1
> 
> 时间：2012-07-03T10:24:22.130
> 
> 标签：bluetooth

我可以在我的 PC 上工作的 BT 虚拟 COM 端口的最大数量是多少？我想它最多有 7 个端口，但是......使用带有 Broadcomm (Widcomm) 堆栈的 WinXP，它一次只有一个端口。win7和microsoft stack呢？

# unix - 在 unix 中查找和附加字符串

> ID：11308933
> 
> 赞同：0
> 
> 时间：2012-07-03T10:24:26.560
> 
> 标签：unix

我有一个文件，我想搜索具有特定世界的行并在其末尾附加一个句子我该怎么做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-03T10:35:46.960

cat test.txt |sed 's/searchString/&addedString/' > new.txt

“&”指的是匹配的字符串。这是真实的例子

```
qifei@qifei] cat test.txt                                                                                                                                                                                     ~
aaaa
bbbb
cccc
aaaa
qifei@qifei] cat test.txt |sed 's/aaaa/&bbbb/' > new.txt                                                                                                                                                                                  ~
qifei@qifei] cat new.txt                                                                                                                                                                                                                  ~
aaaabbbb
bbbb
cccc
aaaabbbb 
```

# tfs - 退出 TFS 后无法运行 LightSwitch

> ID：11308939
> 
> 赞同：0
> 
> 时间：2012-07-03T10:24:36.967
> 
> 标签：tfs, visual-studio-lightswitch

我正在尝试在机器之间使用 FormsAuthentication 移动 LightSwitch 2012 解决方案，因此我将解决方案添加到一台机器上的 TFS（使用我的 TFSPreview 帐户）并签入所有内容。

在新机器上，我进行了抓取，打开了解决方案并尝试运行。当应用程序启动时，`Loading...`屏幕会显示并且不会消失。我没有收到错误消息。

如果我`?IsLaunchedByVS=True`从查询字符串中删除，那么我确实会看到登录屏幕。

我从旧机器上压缩了原始工作源，将其复制到新机器上，打开并运行它。这可以正常工作，我无需更改查询字符串即可进入。

我在这两个文件夹之间运行了一个差异，csproj 文件中存在一些差异，围绕着在 lightswitch DLL 的引用中指定的版本号，我调整了这些，所以指定了版本号，但是没有变化。

我已经在第三台机器上尝试过，并且得到了相同的结果。

我在尝试加载机器时运行了 Fiddler，在这里我确实看到了不同。在 GetAuthenticationInfo 请求中，工作原始代码返回一个 TestUser 以及根据项目属性对话框设置的权限。在从 TFS 提取的代码中，用户和权限为零。这似乎是应用程序未正确登录的原因。

我看不出这是什么原因，谁能给我任何指示？

从原始机器 `@GetAuthenticationInfoResponsehttp://tempuri.org/@GetAuthenticationInfoResult aDomainServices i)http://www.w3.org/2001/XMLSchema-instance^ TotalCount��^IncludedResults b9http://schemas.microsoft.com/2003/10/Serialization/Arrays_anyType.type�c:User cehttp://schemas.datacontract.org/2004/07/Microsoft.LightSwitch.Security.ServerGenerated.Implementation`FullName 复制的代码。测试用户`Name�TestUser` Permissions_string...LightSwitchApplication:IsAccounts_string...LightSwitchApplication:IsOffice_string...LightSwitchApplication:IsEngineer_stringLightSwitchApplication:IsManager_string...5Microsoft.LightSwitch.Security:SecurityAdministration`Roles.nil�^ RootResults behttp://schemas.datacontract.org/2004/07/Microsoft.LightSwitch.Security.ServerGenerated.Implementation_AuthenticationInfo_AuthenticationType�Forms_UserName�TestUser`

来自 TFS `@GetAuthenticationInfoResponsehttp://tempuri.org/@GetAuthenticationInfoResult aDomainServices i)http://www.w3.org/2001/XMLSchema-instance^ TotalCount��^IncludedResults b9http://schemas.microsoft.com/2003/10/Serialization/Arrays_anyType.type�c:User cehttp://schemas.datacontract.org/2004/07/Microsoft.LightSwitch.Security.ServerGenerated.Implementation`FullName.nil 的代码...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-10T03:24:08.840

在过去的几周里，Lightswitch 的 MSDN 论坛上有一个类似的问题。用户发现在他们的案例中，他们没有将所有必需的文件和内在数据加载到 TFS 中。请注意，Lightswitch 具有您需要添加到源代码控制系统的数据文件和配置文件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-12T15:31:17.543

看起来这是 LightSwitch 没有复制从 Visual Studio 启动所需的文件的故障。

在此处查看相关主题：http: [//social.msdn.microsoft.com/Forums/en-US/LightSwitchDev11Beta/thread/902a461e-6597-45ce-ac9e-f7724607070e](http://social.msdn.microsoft.com/Forums/en-US/LightSwitchDev11Beta/thread/902a461e-6597-45ce-ac9e-f7724607070e)

在此处查看记录的错误：[https ://connect.microsoft.com/VisualStudio/feedback/details/753056/lightswitch-in-vs2012rc-does-not-copy-microsoft-lightswitch-design-server-manifest-dll-to-project -输出文件夹#tabs](https://connect.microsoft.com/VisualStudio/feedback/details/753056/lightswitch-in-vs2012rc-does-not-copy-microsoft-lightswitch-design-server-manifest-dll-to-project-output-folder#tabs)

解决方法是将：“C:\Program Files (x86)\Microsoft Visual Studio 11.0\Common7\IDE\LightSwitch\Server\Manifests\Microsoft.LightSwitch.Design.Server.Manifest.dll”复制到“{Project}\Bin\调试\Web\Manifests\Microsoft.LightSwitch.Design.Server.Manifest.dll”。

# jquery - jQuery动画多元素性能

> ID：11308940
> 
> 赞同：1
> 
> 时间：2012-07-03T10:24:37.783
> 
> 标签：jquery, performance, jquery-animate, animated

我有一个网站，我必须同时为“几个”元素设置动画。当所有元素完成动画（我用它测试`$(:animated) == 1`）时，我有一个 ajax 请求。一切都适用于大约 120 个元素，但是当涉及到更多的元素时，脚本会变得很忙，浏览器会要求我停止脚本：-/ 这是我的代码：

```
$('.wrapper-1, .wrapper-2').animate({
            scrollLeft: 50
        },{
            queue: false, //I thought this would help, has no influence
            complete: function() {
                if($(':animated').length==1){

                        //do fancy stuff and get ajax contents              

                } //END if animated
            }//END scroll animation complete
        });//END animate 
```

有谁知道我如何处理更多的元素？

谢谢

# python - py2exe 创建的可执行文件不起作用

> ID：11308941
> 
> 赞同：1
> 
> 时间：2012-07-03T10:24:40.223
> 
> 标签：python, installation, py2exe

我在 wxPython 和使用 numpy 和 matplotlib 的函数中制作了一个 GUI。起初，它要求提供 MSVCP90.dll。我以某种方式下载了它并添加到 python DLL 中。现在，它会为项目生成 .exe 文件，但它不起作用。它只是打开'cmd'并立即关闭。我怀疑项目目录结构存在问题。

-- setup.py --

```
import py2exe, sys, os

setup(scripts=["Source\mainModule.py"],
  packages=[
    "Source",
    "Source.Packages_Needed",
    "Source.Packages_Needed.anomalyChecker",
    "Source.Packages_Needed.config",
    "Source.Packages_Needed.GUI_tools",
    "Source.Packages_Needed.parserTools",
    "Source.Packages_Needed.utilities",
    ],
  package_data={"Source.ltePackages.configuration" : ["*.txt"]}, 
```

)

-- setup.py --

-- 项目目录结构 --

```
project/
      setup.py
      Source/
           mainModule.py
           __init__.py
           packages_Needed/
               __init__.py
               anomalyChecker/
                    __init__.py
                    ACModule1.py
                    ACModule2.py
                    ACModule3.py
               config/
                    __init__.py
                    dictionary.txt
                    reference.txt
                    configMod1.py
                    configMod2.py
                    configMod3.py
               GUI_tools/
                    __init__.py
                    analyzerGUI.py
               parserTools/
                    __init__.py
                    parser.py
               utilities/
                    __init__.py
                    plotter.py 
```

-- 项目目录结构 --

我正在按以下方式运行 python setup.py：

```
 C:\\Path\\source> python setup.py py2exe 
```

给出该命令后，我在 dist 中得到一个 .exe 文件，该文件没有运行。它只是打开一个 cmd 并立即终止。

作为python的新手，我有两个疑问：

我的疑问的第 1 部分：为什么 .exe 文件不起作用？我的 setup.py 中是否有任何错误。如果有，请指出。

我怀疑的第-2部分：

现在，我添加了 MSVCP90.dll 。成功制作运行的.exe后，如果其他系统运行我的.exe，是否需要将此dll复制到其python dll中？如果是这样，那将是很多不便。建议一种避免它的方法。

提前致谢。

编辑：我正在使用包：matplotlib 和 numpy。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-13T08:34:42.270

我在 pyqt 上的 gui 遇到了同样的问题，通过包含我正在使用的 pyqt 模块解决了这个问题

```
setup(windows=[{"script":"myGuy.py",
  data_files = Mydata_files,
  options={"py2exe":{"includes":["sip", "PyQt4.QtCore","PyQt4.QtGui","PyQt4.QtNetwork"],'dist_dir': "myGuiNameDir" 
```

}}）

添加选项变量并尝试使用您正在使用的 wxPython 模块将列表替换为 ["PyQt4.QtCore", "PyQt4.QtGui"]。让我知道它是否有效。

另外，如果你厌倦了名为 dist 的 dist 目录，你可以使用 'dist dir' 来更改你的名字

# ios - 无法将高度传递给 scrollview.content 大小

> ID：11308943
> 
> 赞同：0
> 
> 时间：2012-07-03T10:24:43.133
> 
> 标签：ios, ios5, uiview, ios4, uiscrollview

我正在将文本视图扩展到其内容大小，如下所示

```
CGRect _frame = descriptionText.frame;
_frame.size.height = descriptionText.contentSize.height;
descriptionText.frame = _frame; 
```

并且内容超出了视图，无法向下滚动以查看文本。

我尝试像这样设置滚动视图的大小

```
scrollView.contentSize = CGSizeMake(295,_frame.size.height); 
```

但它无法滚动，但如果我给出这样的数值就可以了

```
scrollView.contentSize = CGSizeMake(295,600); 
```

我需要将滚动视图的大小设置为动态内容的大小。我怎样才能做到这一点？

**编辑** 描述文本

```
CGRect descriptionTextViewRect = CGRectMake(15, 185, 280, 85);
descriptionText = [[UITextView alloc] initWithFrame:descriptionTextViewRect];
descriptionText.textAlignment = UITextAlignmentLeft;
descriptionText.text =offerdes;//this is the text fetched from an xml and is dynamic.
descriptionText.editable = NO;
descriptionText.layer.cornerRadius = 5.0;
descriptionText.clipsToBounds = YES;
descriptionText.userInteractionEnabled = YES;
descriptionText.font = [UIFont systemFontOfSize:15];
[scrollView addSubview: descriptionText];
[descriptionText release]; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-03T10:58:20.937

更改大小的这段代码，**必须**在将 textview 添加到滚动视图后调用

在这条线之后

```
[scrollView addSubview: descriptionText]; 
```

您可以使用此段

```
CGRect _frame = descriptionText.frame;
_frame.size.height = descriptionText.contentSize.height;
descriptionText.frame = _frame; 
```

我刚刚测试了它并且它有效

确保以下内容

*   您正确地将文本视图添加到滚动视图
*   优惠不是零

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-03T10:43:36.097

问题不在于您设置大小的方式，而在于您存储框架的变量设置不正确。

您需要查看代码中的其他位置以找出您的 descriptionText.contentSize 为何返回 CGSizeZero。

# jquery-ui - 一旦从jQuery中的自动完成结果中选择项目，如何防止用户输入数据

> ID：11308948
> 
> 赞同：1
> 
> 时间：2012-07-03T10:25:05.863
> 
> 标签：jquery-ui, jquery-plugins

我在我的应用程序中使用 jQuery 自动完成，它工作正常。我的要求是一旦用户从自动完成结果/数据（我们从 ajax 请求中获得）中选择项目，如果用户再次按下任何键，则必须清除已选择的项目在文本框中，要做到这一点，我必须使用自动完成中的哪个选项？我的代码在下面

```
$("#user_id").autocomplete(getUsers(), {
    multiple: false,
    matchContains: true,
    formatItem: formatItem,
    formatResult: formatResult
}); 
```

我正在使用 Jörn Zaefferer 自动完成插件

# ruby - 路径名. 可写？vs Pathname.writable_real？来自 Mac OS X 上的 Ruby

> ID：11308953
> 
> 赞同：3
> 
> 时间：2012-07-03T10:25:29.903
> 
> 标签：ruby, macos, permissions

我在[Homebrew](https://brew.sh/)中遇到权限问题，这导致我对 Ruby`Pathname.writable?`和`Pathname.writable_real?`.

### 机一

在这台机器上我没有权限问题。Dir`/usr/local`可由组成员写入`admin`：

```
$ ls -ld /usr/local/
drwxrwxr-x  18 root  admin  612 25 Jun 09:24 /usr/local/ 
```

我在`admin`群里：

```
$ whoami
martin
$ dscl . -read /Groups/admin GroupMembership
GroupMembership: root martin 
```

并且无论我使用 Ruby 还是 Ruby 都会`writable?`报告`writable_real?`：

```
$ irb
>> require "Pathname"
=> true
>> Pathname('/usr/local').writable?
=> true
>> Pathname('/usr/local').writable_real?
=> true 
```

### 机器二

然而，在这台机器上，我有一个问题，即使`/usr/local`该组的成员可以写`admin`：

```
$ ls -ld /usr/local/
drwxrwxr-x  18 root  admin  612 24 Jun 23:12 /usr/local/ 
```

我在`admin`小组中：

```
$ whoami
mgd
$ dscl . -read /Groups/admin GroupMembership
GroupMembership: root mgd sgd 
```

Ruby 的`Pathname.writable?`报告`/usr/local`是*不可*写的：

```
$ irb
>> require "Pathname"
=> true
>> Pathname('/usr/local').writable?
=> false
>> Pathname('/usr/local').writable_real?
=> true 
```

## 为什么？

任何人都可以解释其中的区别吗？

根据[文档](https://ruby-doc.org/core-1.9.3/FileTest.html)，这两个功能之间的区别是：

*   `writable?`*: 调用进程的有效*用户id可以写路径吗？
*   `writable_real?`*: 调用进程的真实*用户id可以写路径吗？

我仍然不明白为什么`Pathname.writable?`在（显然）相同的条件下表现不同。

# php - 从我的控制器调用外部 Web 服务

> ID：11308957
> 
> 赞同：2
> 
> 时间：2012-07-03T10:25:46.060
> 
> 标签：php, web-services

我有这个网络服务： http: [//www.hotelbeasain.com/webservice/wshotelbeasain.asmx](http://www.hotelbeasain.com/webservice/wshotelbeasain.asmx)

我正在尝试从 jQuery 中调用它，但由于同源策略（http://en.wikipedia.org/wiki/Same_origin_policy），这是不可能的

有什么方法可以调用它并使用我的控制器中的数据吗？

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-03T11:15:09.827

它不是关于 Symfony，而是关于 PHP 语言。[这](https://stackoverflow.com/a/24490/795876)是您在 PHP 中使用 WebServices 的问题的答案。

# mysql - 对mysql中的排序感到困惑

> ID：11308967
> 
> 赞同：1
> 
> 时间：2012-07-03T10:26:27.357
> 
> 标签：mysql, collation

尽管对这个主题进行了所有讨论，但我无法解决整理所遇到的难题。

1.  创建了一个数据库：

    ```
    CREATE DATABASE Desk_Database CHARACTER SET = utf8 COLLATE = utf8_unicode_ci; 
    ```

2.  创建了一个名为 Users 的表并插入了以下数据：

    ```
    INSERT INTO  Users
        (KlantGroep, TypeUser, Naam, Password)
    VALUES ("BNOF", "Manager", "André", "kkk");

    INSERT INTO  Users
        (KlantGroep, TypeUser, Naam, Password)
    VALUES ("BNOF", "User", "Ingrid", "ppp"); 
    ```

现在，当使用以下查询时，它会返回一行，但它不应该找到任何行，因为`André`它不同于`Andre`：

```
SELECT klantgroep, typeuser FROM processors 
WHERE naam = 'Andre' AND password = 'kkk'; 
```

什么是我不明白的。我认为这`utf8_unicode_ci`不会抛弃 . 的重音`e`，但显然确实如此。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-03T10:49:55.567

请参阅[此处的讨论](http://www.linuxquestions.org/questions/linux-software-2/mysql-utf-8-and-accented-characters-785471/)。基于该讨论，将排序规则设置为 utf8_bin 可能会有所帮助，但也有可能与底层操作系统本身的设置发生冲突。

高温高压

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-03T11:55:54.980

这是预期的行为：“Andre”和“André”根据 是等价的`utf8_unicode_ci`。重音不会被丢弃，只是在比较两个字符串是否相等时，将 e 和 é 视为相同。

如果要考虑两者不同，则必须使用其他排序规则，例如`utf8_bin`.

# sql-server - 为具有不同数据类型的列添加关系

> ID：11308969
> 
> 赞同：1
> 
> 时间：2012-07-03T10:26:42.180
> 
> 标签：sql-server, sql-server-2008, relationship, table-relationships

我的数据库中有 2 个表，主表有一个名为“ID”的字段，数据类型为“uniqueidentifier”，详细表有一个名为“MID”的字段，数据类型为“nvarchar”，我存储主表字段“ID”里面的价值

我想在这些表之间添加主从关系，但是当我想做时，一条消息说：“列“...”的以下数据类型属性与“...”的列不匹配”

我不可能将“MID”数据类型设置为“uniquidentifier”！

在 MS-Access 中可以这样做，但我如何在 MS-SQLServer 2008 中做到这一点？！

之前谢谢...

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-03T12:12:28.857

您不能轻易做到这一点，因为在 SQL Server 中，列数据类型必须匹配才能创建外键。但是，有一个（相当讨厌和复杂的）解决方法。您可以在 SQL Server 中为任何具有 UNIQUE 约束的列创建外键。因此，您可以执行以下步骤：

**选项1**

（更好，如评论中所建议）

```
ALTER TABLE dbo.Table1 ADD ID_Text AS CAST(ID AS varchar(36)) PERSISTED UNIQUE
GO 
```

然后您可以为此列设置外键。

**选项 2**

（我的原创，不太好）

```
ALTER TABLE dbo.Table1 ADD ID_Text varchar(36) NULL
GO

UPDATE dbo.Table1 SET ID_Text = CAST(ID AS varchar(36))
GO

ALTER TABLE dbo.Table1 ALTER COLUMN ID_Text varchar(36) NOT NULL
GO

ALTER TABLE dbo.Table1 ADD CONSTRAINT U_ID_Text UNIQUE (ID_Text)
GO 
```

然后，为了确保`ID_Text`保持填充状态，您需要一个`INSTEAD OF`插入触发器：

```
CREATE TRIGGER TI_Table1_ID_Text
ON dbo.Table1
INSTEAD OF INSERT
AS

        SET NOCOUNT ON

        INSERT  dbo.Table1
                (ID, ID_Text, OtherFields)
        SELECT  ID, CAST(ID AS varchar(36)), OtherFields
        FROM    inserted

        SET NOCOUNT OFF

GO 
```

在这里，替换`OtherFields`为 ... er ... 您的其他字段。

`ID_Text`然后，除了可以从列创建外键之外，您可以忘记新字段`MID`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-03T12:31:50.040

您可以创建自定义约束。首先，创建一个检查约束的函数。

```
CREATE FUNCTION udf_CheckCustomConstraint
(
    @ForeignKeyValue nvarchar
)
RETURNS bit
AS
BEGIN
    DECLARE @Result bit
    SELECT @Result = CONVERT(bit, COUNT(*))
    FROM MasterTable
    WHERE ID = @ForeignKeyValue

    RETURN @Result
END 
```

然后在外键表上创建约束。

```
ALTER TABLE [DetailTable]
    ADD CONSTRAINT [ConstraintName] CHECK ([udf_CheckCustomConstraint]([MID])=(1)) 
```

希望这可以帮助。

# sharepoint - 将 Powershell 对象作为字符串参数传递

> ID：11308970
> 
> 赞同：0
> 
> 时间：2012-07-03T10:26:44.480
> 
> 标签：sharepoint, powershell

我目前正在尝试编写以下 Powershell 脚本，用 SharePoint 术语来说，它会检索管理中心 url（在 中检索`$adminUrl`），然后使用该 url 打开一个 Internet Explorer 窗口。

`$adminUrl`在将其传递给方法之前，我还附加了另一个字符串`Navigate`：

```
$adminUrl = Get-spwebapplication -includecentraladministration | where {$_.DisplayName -eq "SharePoint Central Administration v4"} | select Url

$ie = New-Object -ComObject InternetExplorer.Application
$ie.Navigate($adminUrl + "/someurl") # <= Trying to pass the url here
$ie.Visible = $true 
```

但是我在尝试这样做时遇到了这个异常：

```
Cannot find an overload for "Navigate" and the argument count: "1".
At \\a\setup.ps1:9 char:1
+ $ie.Navigate($adminUrl)
+ ~~~~~~~~~~~~~~~~~~~~~~~
    + CategoryInfo          : NotSpecified: (:) [], MethodException
    + FullyQualifiedErrorId : MethodCountCouldNotFindBest 
```

我在这里面临选角问题吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-03T10:55:08.627

$adminUrl 是一个具有 url 属性的对象，因此您需要使用子表达式来传递：

```
$ie.Navigate($adminUrl.Url + "/someurl") 
```

或带有子表达式：

```
$ie.Navigate("$($adminUrl.Url)/someurl") 
```

只有先扩展 Url 属性的值，才能传递 $adminUrl 的值：

```
 ...| select -ExpandProperty Url
 $ie.Navigate("$adminUrl/someurl") 
```

# asp.net-mvc-3 - 读取文件并用txt文件打开内容-标题显示不正确

> ID：11308972
> 
> 赞同：1
> 
> 时间：2012-07-03T10:26:47.593
> 
> 标签：asp.net-mvc-3, c#-4.0

下面是我的代码，因为我正在读取文件中的内容，然后我可以显示和下载 txt 文件中的内容。但是当我打开 txt 文件时，标题看起来像 filename.txt[1]。我想要文件名仅作为标题。我不知道它 [1] 是什么意思。

```
public FileResult Download(string id)
    {
        int rowId = Convert.ToInt32(id);
        LoadFileInfoCache();
        var fileDetails = from ff in _currentFileDetails
                          where ff.FileId == rowId
                          select new
                          {
                              name = ff.FileName,
                              location = ff.FileLocation
                          };
        var fileDetailsList = fileDetails.ToList();
        string fileLocation = fileDetailsList[0].location;
        string fileName = fileDetailsList[0].name + ".txt";
        string contentType = "application/txt";
        var file = System.IO.File.Open(fileLocation, FileMode.Open, FileAccess.Read, FileShare.ReadWrite);
        var stream = (Stream)(file);

        return File(stream, contentType, fileName);
    } 
```

谁能帮忙，我的代码哪里出了问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-07T11:24:57.970

出现“[1]”是因为客户端计算机已有同名文件。SO 在其前面放置一个 [1] 以避免冲突或覆盖。这不是错误，这是默认行为，无法更改。但是，正在下载文件的用户可以根据需要更改文件名。

# iphone - 如何在 UITableview 的标题中向 UISearchBar 添加按钮？

> ID：11308974
> 
> 赞同：2
> 
> 时间：2012-07-03T10:27:03.913
> 
> 标签：iphone, ios, uisearchbar

我的问题与[如何向 UISearchBar 添加按钮](https://stackoverflow.com/questions/4458030/how-to-add-button-to-uisearchbar)不同，因为他正在导航栏中添加搜索栏，而我需要使用表格视图。

我正在一个应用程序中工作，我需要在 UISearchbar 的搜索框旁边添加一个按钮。我试图为此找到解决方案，但我发现的唯一方法是使用 UINavigationBar。但是，我需要在编辑事件的开始和结束时为搜索栏设置动画，因此将其放在导航栏上不能满足我的需求。

我已将搜索栏放在 UITableview 的标题视图中，以便它可以随表格视图滚动。除了搜索框旁边的按钮外，它可以正常工作并按预期进行动画处理，当然还可以滚动。

有没有其他方法可以在 UISearchBar 的搜索框旁边添加一个按钮？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-03T10:33:02.233

是的，您可以将它们都添加到视图中并返回视图

```
- (UIView *)tableView:(UITableView *)tableView viewForHeaderInSection:(NSInteger)section; 
```

方法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-12T18:20:50.743

IB也应该工作。只需确保将 UISearchbar 委托连接到 View Controller 并使用 VC 中的委托方法，或者使用从 searchBar 调用的 IBactions 将数据和操作传递给 VC 逻辑。尼尔森

# java - JSP 和 Servlet 套接字输入异常

> ID：11308976
> 
> 赞同：0
> 
> 时间：2012-07-03T10:27:06.780
> 
> 标签：java, jsp, tomcat, servlets

谁能带我摆脱这个问题？

```
NotifyUtil::java.net.SocketException: Software caused connection abort: recv failed
    at java.net.SocketInputStream.socketRead0(Native Method)
    at java.net.SocketInputStream.read(SocketInputStream.java:150)
    at java.net.SocketInputStream.read(SocketInputStream.java:121)
    at java.io.BufferedInputStream.fill(BufferedInputStream.java:235)
    at java.io.BufferedInputStream.read1(BufferedInputStream.java:275)
    at java.io.BufferedInputStream.read(BufferedInputStream.java:334)
    at java.io.FilterInputStream.read(FilterInputStream.java:133)
    at sun.net.www.protocol.http.HttpURLConnection$HttpInputStream.read(HttpURLConnection.java:2959)
    at sun.nio.cs.StreamDecoder.readBytes(StreamDecoder.java:283)
    at sun.nio.cs.StreamDecoder.implRead(StreamDecoder.java:325)
    at sun.nio.cs.StreamDecoder.read(StreamDecoder.java:177)
    at java.io.InputStreamReader.read(InputStreamReader.java:184)
    at java.io.BufferedReader.fill(BufferedReader.java:154)
    at java.io.BufferedReader.readLine(BufferedReader.java:317)
    at java.io.BufferedReader.readLine(BufferedReader.java:382)
    at org.netbeans.modules.web.monitor.server.NotifyUtil$RecordSender.run(NotifyUtil.java:299) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-03T10:36:18.333

这意味着存在一些网络错误。网络错误可能是由于以下原因：

*   timeout ，服务器在空闲超时之前没有响应
*   网络干扰

# django - 避免在 django admin 中重复 Foreigkey

> ID：11308977
> 
> 赞同：0
> 
> 时间：2012-07-03T10:27:14.857
> 
> 标签：django, django-admin

我有一个这样的模型：

```
class UserAdress(models.Model):
     user = models.ForeignKey(MyUser)
     area = models.ForeignKey(Area) 
```

在管理员中：

```
class UserAdressAdmin(models.Model):
     list_display = ['user','area'] 
```

管理员列出用户的所有区域。：

```
user1         area1
user1         area2
user2         area1
user2         area2 
```

有什么办法可以这样显示吗？

```
<a href='link to all user1 areas'>user 1</a>
<a href='link to all user2 areas'>user 2</a> 
```

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-03T12:03:35.690

您可能需要重新定义模型和关系——也许使用其他一些关系类型。所以你可以在你的管理模型中添加类似的东西（不是 admin.ModelAdmin 吗？）：

```
class UserAddressAdmin(admin.ModelAdmin):

    def user_areas(self, obj):
        areas = Area.objects.filter(pk__in=UserAddress.objects.filter(user=obj.user).values("area__id"))
        return "<a href='%s'>%s</a>" % (
            reverse("reverse_to_areas"), obj.user.username)
    user_link.allow_tags = True

    list_display = ['user_areas','area'] 
```

# maven - 使用 Maven 创建 Andromda 项目

> ID：11308980
> 
> 赞同：1
> 
> 时间：2012-07-03T10:27:22.280
> 
> 标签：maven, andromda

我使用以下命令创建了一个 Andromda 项目

mvn org.andromda.maven.plugins:andromdapp-maven-plugin:3.4-SNAPSHOT:generate

此命令为最新的 andromda 版本和 spring 版本 3.x 创建项目，但问题是我们无法将 acegi 安全集成到它需要 spring 版本 <2.5

所以我想知道我可以使用什么命令来生成一个项目，该项目将具有以前版本的 andromda 和 spring，并且能够将 acegi 安全性集成到该项目中。

或者是否有任何步骤可以降级当前 Project 的 Andromda 和 Spring 版本？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-20T14:44:48.407

在 Internet 上查找可用的 andromda 版本，并在命令中生成项目时 `mvn org.andromda.maven.plugins:andromdapp-maven-plugin:3.4-SNAPSHOT:generate`将 3.4-SNAPSHOT 替换为您要使用的版本。例如，我想使用较新的 3.4，然后我将命令编写为`mvn org.andromda.maven.plugins:andromdapp-maven-plugin:3.4:generate`

我无法做到这一点，因为我无法找到正确版本的 andromda

# javascript - 创建 javascript 对象

> ID：11308981
> 
> 赞同：1
> 
> 时间：2012-07-03T10:27:23.800
> 
> 标签：javascript, object

我有这个功能

```
// add history paths and save data
function AddPath( strTag, strUserName, arrayLatLngPoints, pathColour) {

  for (var i = 0; i < arrayLatLngPoints.length; i++)
    {
    var point = arrayLatLngPoints[i];
    var date = new Date( parseInt( point.timestamp));
    addMarkers(point.timestamp, point.lat, point.lng, point.timestamp, strUserName, pathColour, date.toString());
    date = null; 
    }
} 
```

除了使用 addMarkers() 添加标记外，我还想将 lat、long 和 timestamp 存储在一个对象中。

我在想最好的存储方式是这样的

```
{ strUserName : { timestamp : point.timestamp , LatLng : point.LatLng }, strUserName : { timestamp : point.timestamp , LatLng : point.LatLng } } 
```

或者

```
{ strUserName : { timestamp : point.timestamp , LatLng : { lat : point.lat, lng : point.lng } }, .. 
```

我怎样才能创建这个对象？

**更新：**

感谢您的回复。我试过以下..

```
// add history paths and save data
function AddPath( strTag, strUserName, arrayLatLngPoints, pathColour) {

  for (var i = 0; i < arrayLatLngPoints.length; i++)
    {
    var point = arrayLatLngPoints[i];
    var pos = new google.maps.LatLng(point.lat, point.lng);

    var history = {
        strUserName : {
            timestamp : point.timestamp ,
            LatLng : pos
        }
    };

    var date = new Date( parseInt( point.timestamp));
    addMarkers(point.timestamp, point.lat, point.lng, point.timestamp, strUserName, pathColour, date.toString());
    date = null; 
    }
console.log(history);
} 
```

见控制台截图 ![截屏](../Images/94757118e5a113d434b0cbb895d321ea.png)

用户名没有用，我没有为每个时间戳获取一个项目，它只是覆盖了一个条目？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-03T10:30:12.977

> 我怎样才能创建这个对象？

和你做的差不多：

```
var obj = { strUserName : { timestamp : point.timestamp , LatLng : point.LatLng }, strUserName : { timestamp : point.timestamp , LatLng : point.LatLng } }; 
```

或者更具可读性：

```
var obj = {
    strUserName : {
        timestamp : point.timestamp ,
        LatLng : point.LatLng
    },
    strUserName : {
        timestamp : point.timestamp ,
        LatLng : point.LatLng
    }
}; 
```

那是一个[对象初始化器](http://ecma-international.org/ecma-262/5.1/#sec-11.1.5)。它创建一个具有给定属性的新对象（实际上是三个新对象）并返回对它们最外层的引用。

举一些更简单的例子：

```
// Create a blank object (an object with no properties of its own):
var a = {};

// Create an object with a `name` property with the value "Fred"
var b = {name: "Fred"};

// Create an object with a `foo` property, which is *another* freshly-created
// object with a `name` property with the value "Barney"
var c = {
    foo: {
        name: "Barney"
    }
}; 
```

* * *

重新更新您的问题：

> 用户名没有用，我没有为每个时间戳获取一个项目，它只是覆盖了一个条目？

当然是这样，您`history`在每个循环上都进行了覆盖，而不是将较早的副本存储在任何地方。例如，您可以将它们存储在数组中：

```
// add history paths and save data
function AddPath( strTag, strUserName, arrayLatLngPoints, pathColour) {

  var historyArray = [];
  for (var i = 0; i < arrayLatLngPoints.length; i++)
    {
    var point = arrayLatLngPoints[i];
    var pos = new google.maps.LatLng(point.lat, point.lng);

    historyArray[i] = {
        strUserName : {
            timestamp : point.timestamp ,
            LatLng : pos
        }
    };

    var date = new Date( parseInt( point.timestamp));
    addMarkers(point.timestamp, point.lat, point.lng, point.timestamp, strUserName, pathColour, date.toString());
    date = null; 
    }
console.log(historyArray);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-03T10:30:39.210

```
var obj = {strUserName: {timestamp: point.timestamp, lat: point.lat, long: point.long}} 
```

# .htaccess - .htaccess ：使用 http_referer 访问文件夹，仅当用户登录时（在服务器的另一部分）

> ID：11308983
> 
> 赞同：0
> 
> 时间：2012-07-03T10:27:31.220
> 
> 标签：.htaccess, http-referer

我正在尝试将 Web 应用程序放到网上。

我希望用户在 wordpress 网站上进行另一次身份验证后才能访问此应用程序（需要身份验证）。

为了更好地解释它：在访问 wordpre 站点的仅限会员区域后，您可以访问链接到最终 Web 应用程序的私有页面。最终 Web 应用程序的文件夹只能从该链接后的用户访问。

我想逻辑是拒绝所有通过私人页面的http_referer的人..

但是我在这里被阻止了（并且不知道它是否可以用作安全策略）。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-21T20:31:05.230

你可以试试。

`Options +FollowSymLinks
RewriteEngine on
RewriteCond %{HTTP_REFERER} !^$
RewriteCond %{HTTP_REFERER} !^http(s)?://(www.)?yoursite.com [NC]
RewriteCond %{HTTP_REFERER} !^http(s)?://(www.)?anyothersiteyouwanttoallowaccess.com [NC]
RewriteRule ^/?path/you-want-restricted.html [http://www.whereyouwantthemredirected.com](http://www.whereyouwantthemredirected.com) [NC,R,L]`

# mysql - 如何找到出生日期在 1980 年到 1996 年之间的用户的百分比。

> ID：11308985
> 
> 赞同：3
> 
> 时间：2012-07-03T10:27:37.587
> 
> 标签：mysql, mysql-error-1064

我正在尝试查找出生日期在 1980 年到 1996 年之间的用户的百分比。

我找不到怎么做：

```
SELECT Sum
(WHEN userBirthDate BETWEEN '1980/01/01' AND '1996/12/31'
THEN 1 ELSE 0 END) * 100 / Count(userID) as total
FROM user 
```

mysql 返回的错误是语法：

```
 ERROR 1064 (42000): You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'WHEN userBirthDate BETWEEN '1980/01/01' AND '1996/12/31' THEN 1 ELSE 0)' at line 1 
```

我该怎么做？

先感谢您

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-03T10:29:21.287

```
SELECT Sum(case WHEN userBirthDate BETWEEN '1980/01/01' AND '1996/12/31'
                THEN 1 
                ELSE 0 
       END) * 100 / Count(userID) as total
FROM `user` 
```

要不就

```
SELECT Sum(userBirthDate BETWEEN '1980/01/01' AND '1996/12/31') * 100 / Count(userID) as total
FROM `user` 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-03T10:30:27.750

```
SELECT Sum
(IF( userBirthDate BETWEEN '1980/01/01' AND '1996/12/31', 1 , 0 )) * 100 / Count(userID) as total
FROM user 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-03T10:32:30.830

```
SELECT Sum
(CASE WHEN userBirthDate BETWEEN '1980/01/01' AND '1996/12/31'
THEN 1 ELSE 0 END) * 100 / Count(userID) as total
FROM user 
```

# arrays - 在较大数组中的小数组中查找单个字符串

> ID：11308987
> 
> 赞同：2
> 
> 时间：2012-07-03T10:27:41.630
> 
> 标签：arrays, string, matlab

我在做的一个项目中遇到了一个问题，希望 Matlab 可以为我节省无数小时。
我有一个包含字符串的数组，在它旁边的列中具有相应的整数（管道 ID 和长度）。我有大约 7000 个具有相应长度的管道 ID。

如果我有 200 个管道的 ID 作为数组中的字符串，那么是否可以在大数组中定位这 200 个单独的字符串并让 MATLAB 给我位于 ID 字符串旁边的单元格中的相应管道长度（整数） ?

我已经尝试过`ismember`，`strmatch`但我无法让它工作。

**编辑：**
包含所有数据的大数组如下所示：

```
No.      ID                 Length (m)    
1        0-T103-0-T110      52.327    
2        0-T104-0-1370      30.4    
3        0-T104-0-1410      62.423    
4        0-T105-0-T109      46.611    
...    
7118     0415B-99878        152.242 
```

然后，我将有一个与上述相同形式的较小数组，但不是 7118 行，而是例如 200 行。

到目前为止我已经尝试过：

```
a = {'0-T103-0-T110', 52.327; '0-T104-0-1370', 30.4; '0-T104-0-1410', 62.423};
ismember(a(:,1), '0-T104-0-1370');
leng = a{ismember(a(:, 1), '0-T104-0-1370'), 2} 
```

这可行，但正如您所见，它仅用于在小数组中定位单个字符串。

我已经像这样加载了大数组：

```
[num, text, raw] = xlsread('Pipelength_ALL.xlsx', 'A1:C7115'); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-03T11:13:50.367

您想使用[ISMEMBER](http://www.mathworks.com/help/techdoc/ref/ismember.html)。这是一个例子：

```
%# list of all pipe ID's and their length (100 in this example)
pipes = [cellstr(num2str((1:100)','pip%03d')) num2cell(randi(50,[100 1]))];

%# pipeID's of the query (10 here)
x = randperm(100);
p = cellstr(num2str(x(1:10)','pip%03d'));

%# find matching lengths
[~,loc] = ismember(p, pipes(:,1));
len = cell2mat(pipes(loc,2)); 
```

结果样本：

```
>> [p num2cell(len)]
ans = 
    'pip096'    [14]
    'pip043'    [ 9]
    'pip095'    [27]
    'pip074'    [ 6]
    'pip001'    [ 3]
    'pip065'    [20]
    'pip067'    [ 8]
    'pip060'    [23]
    'pip051'    [27]
    'pip020'    [31] 
```

* * *

## 编辑：

使用您发布的数据，代码将是：

```
pipes = {
    '0-T103-0-T110'      52.327
    '0-T104-0-1370'      30.4
    '0-T104-0-1410'      62.423
    '0-T105-0-T109'      46.611
}

p = {
    '0-T104-0-1370'
    '0-T105-0-T109'
}

[~,loc] = ismember(p, pipes(:,1));
[p pipes(loc,2)] 
```

# python - itertools.product 伪代码

> ID：11308990
> 
> 赞同：0
> 
> 时间：2012-07-03T10:27:58.320
> 
> 标签：python

itertools[文档](http://docs.python.org/library/itertools.html#itertools.product)提供了以下伪代码：

```
def product(*args, **kwds):
    # product('ABCD', 'xy') --> Ax Ay Bx By Cx Cy Dx Dy
    # product(range(2), repeat=3) --> 000 001 010 011 100 101 110 111
    pools = map(tuple, args) * kwds.get('repeat', 1)
    result = [[]]
    for pool in pools:
        result = [x+[y] for x in result for y in pool]
    for prod in result:
        yield tuple(prod) 
```

`map(tuple, args)`看起来多余：可以简单地使用 args。我错过了什么吗？

这是我的测试代码（python 2.7）：

```
def product2(*args, **kwds):
    # product('ABCD', 'xy') --> Ax Ay Bx By Cx Cy Dx Dy
    # product(range(2), repeat=3) --> 000 001 010 011 100 101 110 111
    pools = args * kwds.get('repeat', 1)
    result = [[]]
    for pool in pools:
        result = [x+[y] for x in result for y in pool]
    for prod in result:
        yield tuple(prod)

print list (product(['A','B'],['C','D'])) == list (product2(['A','B'],['C','D']))
print list (product(['A','B'],['C','D'], repeat=2)) == list (product2(['A','B'],['C','D'], repeat=2))
print list (product([],[], repeat=2)) == list (product2([],[], repeat=2))
print list (product([])) == list (product2([]))

True

True

True

True 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-03T10:37:10.557

让我们传入迭代器，看看会发生什么：

```
>>> list(product(iter('AB'), iter('CD')))
[('A', 'C'), ('A', 'D'), ('B', 'C'), ('B', 'D')]
>>> list(product2(iter('AB'), iter('CD')))
[('A', 'C'), ('A', 'D')]
>>> list(product(iter('AB'), iter('CD'))) == list(product2(iter('AB'), iter('CD')))
False 
```

结论：您需要将参数转换为元组以捕获迭代器的所有值。

*当只使用一个*迭代器和重复选项时，更容易说明：

```
>>> list(product(iter('ABC'), repeat=2))
[('A', 'A'), ('A', 'B'), ('A', 'C'), ('B', 'A'), ('B', 'B'), ('B', 'C'), ('C', 'A'), ('C', 'B'), ('C', 'C')]
>>> list(product2(iter('ABC'), repeat=2))
[] 
```

# android - 使用 APV 实现 pdfViewer

> ID：11308991
> 
> 赞同：4
> 
> 时间：2012-07-03T10:27:59.227
> 
> 标签：android, pdf-viewer, apvpdf

我正在查看许多帖子，寻找在我的 Android 应用程序中实现此示例的方法。[http://apv.googlecode.com/files/apv-0.3.3dev01.tar.gz](http://apv.googlecode.com/files/apv-0.3.3dev01.tar.gz)

我在某处读到我必须使用 NDK，我已经下载了，但我不明白怎么做。

我还读到我已经运行了脚本 build-native.sh，也不是怎么做的。

当您下载项目时运行该项目时，出现以下错误。

```
07-03 10:18:06.171: ERROR/AndroidRuntime(375): FATAL EXCEPTION: main
07-03 10:18:06.171: ERROR/AndroidRuntime(375): java.lang.ExceptionInInitializerError
07-03 10:18:06.171: ERROR/AndroidRuntime(375):     at cx.hell.android.pdfview.OpenFileActivity.getPDF(OpenFileActivity.java:541)
07-03 10:18:06.171: ERROR/AndroidRuntime(375):     at cx.hell.android.pdfview.OpenFileActivity.startPDF(OpenFileActivity.java:502)
07-03 10:18:06.171: ERROR/AndroidRuntime(375):     at cx.hell.android.pdfview.OpenFileActivity.onCreate(OpenFileActivity.java:219)
07-03 10:18:06.171: ERROR/AndroidRuntime(375):     at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1047)
07-03 10:18:06.171: ERROR/AndroidRuntime(375):     at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2627)
07-03 10:18:06.171: ERROR/AndroidRuntime(375):     at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2679)
07-03 10:18:06.171: ERROR/AndroidRuntime(375):     at android.app.ActivityThread.access$2300(ActivityThread.java:125)
07-03 10:18:06.171: ERROR/AndroidRuntime(375):     at android.app.ActivityThread$H.handleMessage(ActivityThread.java:2033)
07-03 10:18:06.171: ERROR/AndroidRuntime(375):     at android.os.Handler.dispatchMessage(Handler.java:99)
07-03 10:18:06.171: ERROR/AndroidRuntime(375):     at android.os.Looper.loop(Looper.java:123)
07-03 10:18:06.171: ERROR/AndroidRuntime(375):     at android.app.ActivityThread.main(ActivityThread.java:4627)
07-03 10:18:06.171: ERROR/AndroidRuntime(375):     at java.lang.reflect.Method.invokeNative(Native Method)
07-03 10:18:06.171: ERROR/AndroidRuntime(375):     at java.lang.reflect.Method.invoke(Method.java:521)
07-03 10:18:06.171: ERROR/AndroidRuntime(375):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:868)
07-03 10:18:06.171: ERROR/AndroidRuntime(375):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:626)
07-03 10:18:06.171: ERROR/AndroidRuntime(375):     at dalvik.system.NativeStart.main(Native Method)
07-03 10:18:06.171: ERROR/AndroidRuntime(375): Caused by: java.lang.UnsatisfiedLinkError: Library pdfview2 not found
07-03 10:18:06.171: ERROR/AndroidRuntime(375):     at java.lang.Runtime.loadLibrary(Runtime.java:461)
07-03 10:18:06.171: ERROR/AndroidRuntime(375):     at java.lang.System.loadLibrary(System.java:557)
07-03 10:18:06.171: ERROR/AndroidRuntime(375):     at cx.hell.android.lib.pdf.PDF.<clinit>(PDF.java:25)
07-03 10:18:06.171: ERROR/AndroidRuntime(375):     ... 16 more 
```

我该如何解决？

谢谢！！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-03T10:33:14.393

您需要在项目的 libs 文件夹中添加 .so 文件才能运行 pdf。这些文件只能使用 NDK 制作。请参考[此链接](http://code.google.com/p/apv/wiki/Building)

您缺少 pdfview2 库。

编辑：您可以构建 .so 文件，或者只是从 apk 文件中提取 lib 文件。您可以从以下位置下载 apk 文件

[http://code.google.com/p/apv/downloads/detail?name=apv-0.3.3dev01.apk&can=2&q=](http://code.google.com/p/apv/downloads/detail?name=apv-0.3.3dev01.apk&can=2&q=)

使用 zip 工具打开 .apk 文件并复制项目中的 .so 文件。:)

# c# - 在 DataTemplate 上找不到 TargetType 属性

> ID：11308994
> 
> 赞同：4
> 
> 时间：2012-07-03T10:28:23.503
> 
> 标签：c#, wpf, xaml, datatemplate

```
<Grid>
    <ItemsControl ItemsSource="{Binding ScreenViewModelCollection}">
        <ItemsControl.Resources>
            <DataTemplate  x:Key="SomeKey" TargetType="{x:Type  local:RedScreenObject}">
                    <local:RedScreenObject/>
            </DataTemplate>
        </ItemsControl.Resources>
    </ItemsControl>
</Grid> 
```

我不知道为什么它看不到 TargetType 属性。应该在 Resources 或 ItemTemplate 下？我都试过了，都没有找到。

编辑：为了得到更多的反对票，哈哈，这是参考这个： [https ://chat.stackoverflow.com/transcript/message/4295316#4295316](https://chat.stackoverflow.com/transcript/message/4295316#4295316)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-03T10:31:16.673

`DataTemplate`只有一个[`DataType`](http://msdn.microsoft.com/en-us/library/system.windows.datatemplate.datatype.aspx).

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-03T10:32:49.620

使用 DataType="{x:Type local:RedScreenObject}"，而不是 TargetType。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-03T10:31:23.123

您可以在下面找到 TargetType`<Style`