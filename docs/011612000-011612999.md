# StackOverflow 问答 11612000-11612999

# c# - Gridview edit mode for more that one row

> ID：11612000
> 
> 赞同：1
> 
> 时间：2012-07-23T11:53:10.540
> 
> 标签：c#, asp.net

I have a Gridview that allows user to edit and delete the records. I am using .net 3.5 using C#.

When I have just one record my edit command is working fine but problem comes when there are more that 1 record in my gridview.

In this case while binding the controls it it is unable to find the controls the second time and thus throws the error.

Here is my code:

```
protected void gdScheduleNew_RowDataBound(object sender, GridViewRowEventArgs e)
{
    if (e.Row.RowType == DataControlRowType.DataRow)
    {
        if (ViewState["Updating"].Equals(true))
        {
            TextBox txtactsta = (TextBox)e.Row.FindControl("txtactualstartDate");
            TextBox txtactend = (TextBox)e.Row.FindControl("txtactualendDate");
            LinkButton lnkUpdate = (LinkButton)e.Row.FindControl("lnkUpdate");
            txtactsta.Attributes.Add("ReadOnly", "true");
            txtactend.Attributes.Add("ReadOnly", "true");
        }
    }
} 
```

markup code is:

```
<asp:GridView ID="gdScheduleNew" runat="server" Width="100%" SelectedIndex="0"
                        CellPadding="4" AutoGenerateColumns="False" ForeColor="#333333" Height="100px"
                        OnRowDataBound="gdScheduleNew_RowDataBound" onrowediting="gdSchedule_RowEditing">
    <FooterStyle Font-Bold="True" ForeColor="White" />
    <RowStyle BackColor="#F7F6F3" ForeColor="#333333" />
    <Columns>
        <asp:TemplateField HeaderText="Planned Efforts">
        <ItemTemplate>
        <asp:Label ID="lblscheduleid" runat="server" Text='<%# Bind("scheduleid") %>' 
                                                    Visible="false"></asp:Label>
        <asp:Label ID="lblPlannedEffort" runat="server" Text='<%# Bind("sepcet") %>'></asp:Label>
        </ItemTemplate>
        <EditItemTemplate>
        <asp:Label ID="lblscheduleid" runat="server" Text='<%# Bind("scheduleid") %>' 
        Visible="false"></asp:Label>
                <asp:TextBox ID="txtsepcet" runat="server" Text='<%# Bind("sepcet") %>' 
                    Width="88px"></asp:TextBox>
            </EditItemTemplate>
            <FooterTemplate>
                <asp:TextBox ID="ftxtsepcet" runat="server" Width="88px"></asp:TextBox>
            </FooterTemplate>
        </asp:TemplateField>
        <asp:TemplateField HeaderText="Actual Efforts">
            <ItemTemplate>
                <asp:Label ID="lblActualEffort" runat="server" 
                    Text='<%# Bind("actualeffort") %>'></asp:Label>
            </ItemTemplate>
                <EditItemTemplate>
                <asp:TextBox ID="txtactualeffort" runat="server" 
                        Text='<%# Bind("actualeffort") %>' Width="88px"></asp:TextBox>
            </EditItemTemplate>
            <FooterTemplate>
                <asp:TextBox ID="ftxtactualeffort" runat="server" Width="88px"></asp:TextBox>
            </FooterTemplate>
        </asp:TemplateField>
        <asp:TemplateField HeaderText="Planned Start Date">
            <ItemTemplate>
                <asp:Label ID="lblPlannedStart" runat="server" 
                    Text='<%# Bind("plannedstartDate") %>'></asp:Label>
            </ItemTemplate>
                <EditItemTemplate>
                <asp:TextBox ID="txtplannedstartDate" runat="server" 
                        Text='<%# Bind("plannedstartDate") %>' class="dateclass" Width="88px"></asp:TextBox>
            </EditItemTemplate>
            <FooterTemplate>
                <asp:TextBox ID="ftxtplannedstartDate" runat="server" class="dateclass" 
                    Width="88px"></asp:TextBox>
            </FooterTemplate>
        </asp:TemplateField>
        <asp:TemplateField HeaderText="Planned End Date">
            <ItemTemplate>
                <asp:Label ID="lblPlannedEnd0" runat="server" 
                    Text='<%# Bind("plannedendDate") %>'></asp:Label>
            </ItemTemplate>
                <EditItemTemplate>
                <asp:TextBox ID="txtplannedendDate" runat="server" 
                        Text='<%# Bind("plannedendDate") %>' class="dateclass" Width="88px"></asp:TextBox>
            </EditItemTemplate>
            <FooterTemplate>
                <asp:TextBox ID="ftxtplannedendDate" runat="server" class="dateclass" 
                    Width="88px"></asp:TextBox>
            </FooterTemplate>
        </asp:TemplateField>
        <asp:TemplateField HeaderText="Actual Start Date">
            <ItemTemplate>
                <asp:Label ID="lblActualStart" runat="server" 
                    Text='<%# Bind("actualstartDate") %>'></asp:Label>
            </ItemTemplate>
                <EditItemTemplate>
                <asp:TextBox ID="txtactualstartDate" runat="server" 
                        Text='<%# Bind("actualstartDate") %>' class="dateclass" Width="88px"></asp:TextBox>
            </EditItemTemplate>
            <FooterTemplate>
                <asp:TextBox ID="ftxtactualstartDate" runat="server" class="dateclass" 
                    Width="88px"></asp:TextBox>
            </FooterTemplate>
        </asp:TemplateField>
        <asp:TemplateField HeaderText="Actual End Date">
            <ItemTemplate>
                <asp:Label ID="lblActualEnd" runat="server" 
                    Text='<%# Bind("actualendDate") %>'></asp:Label>
            </ItemTemplate>
                <EditItemTemplate>
                <asp:TextBox ID="txtactualendDate" runat="server" 
                        Text='<%# Bind("actualendDate") %>' class="dateclass" Width="88px"></asp:TextBox>
            </EditItemTemplate>
            <FooterTemplate>
                <asp:TextBox ID="ftxtactualendDate" runat="server" class="dateclass" 
                    Width="88px"></asp:TextBox>
            </FooterTemplate>
        </asp:TemplateField>
        <asp:TemplateField HeaderText="Member Name">
            <ItemTemplate>
                <asp:Label ID="lblMember" runat="server" Text='<%# Bind("membername") %>'></asp:Label>
            </ItemTemplate>
                <EditItemTemplate>
                    <asp:DropDownList ID="ddlmem" runat="server" DataTextField="MemberName" DataValueField="MemberID">
                    </asp:DropDownList>
            </EditItemTemplate>
            <FooterTemplate>
                    <asp:DropDownList ID="fddlmem" runat="server" DataTextField="MemberName" DataValueField="MemberID">
                    </asp:DropDownList>
            </FooterTemplate>
        </asp:TemplateField>
        <asp:TemplateField HeaderText="Status">
            <ItemTemplate>
                <asp:Label ID="lblStatus" runat="server" Text='<%# Bind("status") %>'></asp:Label>
            </ItemTemplate>
        </asp:TemplateField>
        <asp:TemplateField HeaderText="Edit" ShowHeader="False"> 
        <EditItemTemplate> 
            <asp:LinkButton ID="lnkUpdate" runat="server" CausesValidation="True" CommandName="Update" Text="Update"></asp:LinkButton> 
            <br />
            <asp:LinkButton ID="LnkCancel" runat="server" CausesValidation="False" CommandName="Cancel" Text="Cancel"></asp:LinkButton> 
        </EditItemTemplate>     
        <FooterTemplate> 
            <asp:LinkButton ID="lnkAddnew" runat="server" CausesValidation="true" 
                CommandName="AddNew" Text="Submit"></asp:LinkButton> 
        </FooterTemplate> 
        <ItemTemplate> 
                <asp:LinkButton ID="lnkEdit" runat="server" CausesValidation="False" 
                    CommandName="Edit" Text="Edit"></asp:LinkButton> 
        </ItemTemplate> 
        </asp:TemplateField> 
    </Columns>
</asp:GridView> 
```

The error is on this line: `txtactsta.Attributes.Add("ReadOnly", "true");`:

> object reference no set to an instance of object

How can I fix this?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-23T15:15:44.983

不会为您的 gridview 中的*每一*行 `gdScheduleNew_RowDataBound`调用？并且只存在于编辑行上，它们不存在于非编辑行上。*`txtactualstartDate``txtactualendDate`*

 *尝试这个：

```
if (e.Row.RowType == DataControlRowType.DataRow && e.Row.RowState == DataControlRowState.Edit) 
```*

# android - android平板电脑没有手机，检查时代码出错

> ID：11612003
> 
> 赞同：-1
> 
> 时间：2012-07-23T11:53:20.240
> 
> 标签：android, device, telephonymanager

我有一个在 android 手机上运行良好的应用程序，但是当我尝试在没有手机的 Nexus7 上运行它时，代码失败并在指示的位置强制停止。解决办法是什么？如何检查该功能是否存在，我应该怎么做才能解决这个问题？

```
 ConnectivityManager connMgr = (ConnectivityManager)getSystemService(Context.CONNECTIVITY_SERVICE);
  NetworkInfo networkInfo = connMgr.getNetworkInfo(ConnectivityManager.TYPE_WIFI); 
  boolean isWifiConn = networkInfo.isConnected();
  printi("oopsA",6);
  networkInfo = connMgr.getNetworkInfo(ConnectivityManager.TYPE_MOBILE);
  printi("oopsB",6);
  boolean isMobileConn = networkInfo.isConnected();  //<<<<FAILS HERE ON NEXUS 7 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-23T12:00:53.270

您的 networkInfo 可能为空。你必须先测试一下。这意味着您无法访问这种类型的连接管理器。

尝试这个：

```
networkInfo = connMgr.getNetworkInfo(ConnectivityManager.TYPE_MOBILE);

boolean isMobileConn = false;
if(networkInfo != null)
    isMobileConn = networkInfo.isConnected(); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-19T14:04:29.507

我在使用 Motorola Xoom 时遇到了同样的问题，因为它不支持 ConnectivityManager.TYPE_MOBILE。

以下代码对我来说工作正常：

```
ConnectivityManager connMngr = (ConnectivityManager) context.getSystemService(Context.CONNECTIVITY_SERVICE);
try {
    return connMngr.getActiveNetworkInfo().isConnected();
}
catch (NullPointerException npe) {
    return false;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-23T11:58:26.330

检查 AndroidManifest.xml 中的权限

```
 <uses-permission android:name="android.permission.ACCESS_NETWORK_STATE"/>
 <user-permission android:name="android.permission.ACCESS_WIFI_STATE" /> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-23T12:21:21.030

更正的代码如下：

```
IsAPhone=0;
try{
    boolean isMobileConn = false;
    if(networkInfo != null){ isMobileConn = networkInfo.isConnected();IsAPhone=1;}  
   }
catch (Exception e) {} 
```

# c++ - OpenGL - 第一人称相机矩阵的问题

> ID：11612004
> 
> 赞同：0
> 
> 时间：2012-07-23T11:53:22.123
> 
> 标签：c++, opengl, camera, camera-matrix

我已经尽我最大的努力创造了一个模仿第一人称相机风格的相机。我刚刚从旧的 OpenGL 渲染方法切换，现在准备处理相机矩阵。这是我的相机更新代码。

```
void Camera::update(float dt)
{
// Get the distance the camera has moved
float distance = dt * walkSpeed;

// Get the current mouse position
mousePos = mouse->getPosition();

// Translate the change to yaw and pitch
angleYaw -= ((float)mousePos.x-400.0f)*lookSpeed/40;
anglePitch -= ((float)mousePos.y-300.0f)*lookSpeed/40;

// Clamp the camera to a max/min viewing pitch
if(anglePitch > 90.0f)
    anglePitch = 90.0f;

if(anglePitch < -90.0f)
    anglePitch = -90.0f;

// Reset the mouse position
mouse->setPosition(mouseReset);

// Check for movement events
sf::Event event;
while (window->pollEvent(event))
{

    // Calculate the x, y and z values of any movement
    if (event.type == sf::Event::KeyPressed && event.key.code == sf::Keyboard::W)
    {
        position.x -= (float)sin(angleYaw*M_PI/180)*distance*25;
        position.z += (float)cos(angleYaw*M_PI/180)*distance*25;
        position.y += (float)sin(anglePitch * M_PI / 180) * distance * 25;
        angleYaw = 10.0;
    }
    if (event.type == sf::Event::KeyPressed && event.key.code == sf::Keyboard::S)
    {
        position.x += (float)sin(angleYaw*M_PI/180)*distance*25;
        position.z -= (float)cos(angleYaw*M_PI/180)*distance*25;
        position.y -= (float)sin(anglePitch * M_PI / 180) * distance * 25;
    }
    if (event.type == sf::Event::KeyPressed && event.key.code == sf::Keyboard::R)
    {
        position.x += (float)cos(angleYaw*M_PI/180)*distance*25;
        position.z += (float)sin(angleYaw*M_PI/180)*distance*25;
    }
    if (event.type == sf::Event::KeyPressed && event.key.code == sf::Keyboard::A)
    {
        position.x -= (float)cos(angleYaw*M_PI/180)*distance*25;
        position.z -= (float)sin(angleYaw*M_PI/180)*distance*25;
    }
}

// Update our camera matrix
camMatrix = glm::translate(glm::mat4(1.0f), glm::vec3(-position.x, -position.z, -position.y));
camMatrix = glm::rotate(camMatrix, angleYaw, glm::vec3(0, 1, 0));
camMatrix = glm::rotate(camMatrix, anglePitch, glm::vec3(1, 0, 0));
} 
```

最后 3 行是我假设用与翻译相反的方式更新相机的内容（y 和 z 切换为我正在使用的格式）。我做错了顺序吗？

这是我非常简单的着色器：

```
#version 120

attribute vec4 position;
uniform mat4 camera;

void main()
{
    gl_Position = position * camera;
}

#version 120
void main(void)
{
    gl_FragColor = vec4(1.0, 0.0, 0.0, 1.0);
} 
```

这只是制作了一个红色三角形。相机围绕三角形旋转，这不是我想要的。我想让它旋转相机。我认为将相机矩阵乘以每个顶点会在相机空间中进行渲染。或者我还需要将它乘以投影矩阵吗？

移动 w、a、s 或 d 会同时放大非常近的位置，并且会扭曲整个视图，到处都是红色碎片。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-23T12:18:54.423

以相反的顺序编写矩阵运算。因此，如果您想平移（到相机位置）然后旋转，请按以下顺序编写：

```
// Update our camera matrix
camMatrix = glm::rotate(glm::mat4(1.0f), anglePitch, glm::vec3(1, 0, 0));
camMatrix = glm::rotate(camMatrix, angleYaw, glm::vec3(0, 1, 0));
camMatrix = glm::translate(camMatrix, glm::vec3(-position.x, -position.z, -position.y)); 
```

# nginx - PHP - nginx 502 错误网关

> ID：11612009
> 
> 赞同：1
> 
> 时间：2012-07-23T11:53:39.127
> 
> 标签：nginx, php

有人可以帮我，我每隔几秒就会收到 502 错误网关

该服务器在具有四核和 3g ram 的 debian 上的 vps 上运行

这是我可以在 nginx 日志中出现的错误类型：

2012/07/23 15:06:53 [错误] 2908#0: *247 recv() 在从上游读取响应标头时失败（104：对等方重置连接），客户端：81.255.98.253，服务器：www.acmslt。 fr，请求：“GET /category/culte/conferences/HTTP/1.1”，上游：“fastcgi://127.0.0.1:9000”，主机：“acmslt.fr”，引用者：“http://www.google .fr/url?sa=t&rct=j&q=mosqu%C3%A9e​​%20de%20savigny%20le%20temple%2077&source=web&cd=2&ved=0CFsQjBAwAQ&url=http%3A%2F%2Facmslt.fr%2Fcategory%2Fculte%2Fconferences%2F&ei =OzANUOj0HYrG0QXusf2xCg&usg=AFQjCNHxw6lN8eBnkEOYDh5ONmutLiATHA" ~ 这里是 nginx.conf

```
user www-data;
worker_processes 4;
events {
        worker_connections 1024;
       }

http {
     include mime.types;
     default_type application/octet-stream;

     # Hide the Nginx version number
     server_tokens off;

     # Tweeks
     sendfile on;
     tcp_nodelay off;
     tcp_nopush on;
     keepalive_timeout 5;
     client_body_timeout 10;
     client_header_timeout 10;
     send_timeout 10;
     client_max_body_size 8M;

     set_real_ip_from 127.0.0.1;
     real_ip_header X-Forwarded-For;

     gzip on;
     gzip_disable "MSIE [1-6].(?!.*SV1)";
     gzip_vary on;
     gzip_comp_level 3;
     gzip_proxied any;
     gzip_buffers 16 8k;

     include /etc/nginx/conf.d/*.conf;
     include /etc/nginx/sites-enabled/*;
  } 
```

可用网站中的网站conf

```
server {
        listen 8080;
        server_name www.acmslt.fr acmslt.fr;
        location / {
        root /var/www/wordpress;
        index index.php index.html index.htm;
        # Rewrite rules
        if (!-e $request_filename) {
        rewrite ^(.+)$ /index.php?q=$1 last;
       }
       # Security
       # include global/security.conf;
       # W3 Total Cache
       include global/wordpress-w3-total-cache.conf;
       # PHP-FPM
       include global/php-fpm.conf;
       }
} 
```

然后是 global/php-fpm.conf

```
# PHP scripts -> PHP-FPM server listening on 127.0.0.1:9000
location ~ \.php$ {
                   fastcgi_pass 127.0.0.1:9000;
                   fastcgi_index index.php;
                   include fastcgi_params;
                   fastcgi_connect_timeout 60;
                   fastcgi_send_timeout 180;
                   fastcgi_read_timeout 600;
                   fastcgi_temp_file_write_size 1M;
                   fastcgi_intercept_errors on;
                   fastcgi_param SCRIPT_FILENAME $document_root$fastcgi_script_name;
                  } 
```

php-fpm www.conf

```
[www]
user = www-data
group = www-data
listen = 127.0.0.1:9000
pm = dynamic
pm.max_children = 5
pm.start_servers = 2
pm.min_spare_servers = 1
pm.max_spare_servers = 3
chdir = / 
```

谢谢

编辑这里是我可以在 php-fpm.log 中看到的

这是我在 php-fpm 日志中看到的内容

```
[23-Jul-2012 08:13:26] NOTICE: fpm is running, pid 631
[23-Jul-2012 08:13:26] NOTICE: ready to handle connections
[23-Jul-2012 08:40:04] WARNING: [pool www] child 646 exited on signal 11 (SIGSEGV)         after 1598.101386 seconds from start
[23-Jul-2012 08:40:04] NOTICE: [pool www] child 1354 started
[23-Jul-2012 08:40:04] WARNING: [pool www] child 1354 exited on signal 11 (SIGSEGV) after 0.191254 seconds from start
[23-Jul-2012 08:40:04] NOTICE: [pool www] child 1355 started
[23-Jul-2012 08:40:20] WARNING: [pool www] child 647 exited on signal 11 (SIGSEGV) after 1614.612810 seconds from start
[23-Jul-2012 08:40:20] NOTICE: [pool www] child 1356 started
[23-Jul-2012 08:41:05] NOTICE: Finishing ...
[23-Jul-2012 08:41:05] NOTICE: exiting, bye-bye!
[23-Jul-2012 08:41:05] NOTICE: fpm is running, pid 1937
[23-Jul-2012 08:41:05] NOTICE: ready to handle connections
[23-Jul-2012 08:51:43] NOTICE: Finishing ...
[23-Jul-2012 08:51:43] NOTICE: exiting, bye-bye! 
[23-Jul-2012 08:51:43] NOTICE: fpm is running, pid 2188
[23-Jul-2012 08:51:43] NOTICE: ready to handle connections
[23-Jul-2012 09:01:42] WARNING: [pool www] child 3934 exited on signal 11 (SIGSEGV) after 325.793784 seconds from start
[23-Jul-2012 09:01:42] NOTICE: [pool www] child 3983 started
[23-Jul-2012 09:01:44] WARNING: [pool www] child 2189 exited on signal 11 (SIGSEGV) after 601.533647 seconds from start
[23-Jul-2012 09:01:44] NOTICE: [pool www] child 3984 started
[23-Jul-2012 09:01:48] WARNING: [pool www] child 2190 exited on signal 11 (SIGSEGV) after 605.045174 seconds from start
[23-Jul-2012 09:01:48] NOTICE: [pool www] child 3986 started
[23-Jul-2012 09:01:55] WARNING: [pool www] child 3984 exited on signal 11 (SIGSEGV) after 10.610551 seconds from start 
```

# c# - Google Calendar API：HTML 中的事件描述

> ID：11612010
> 
> 赞同：1
> 
> 时间：2012-07-23T11:53:39.507
> 
> 标签：c#, asp.net, asp.net-mvc, google-calendar-api

我将事件插入 Google 日历，但找不到指定描述不是纯文本而是 HTML 标记的方式：

```
request = WebRequest.Create("https://www.googleapis.com/calendar/v3/calendars/" + calendarID + "/events?pp=1&key=" + ClientID) as HttpWebRequest;
request.Headers.Add("Accept-Charset", "utf-8");
request.KeepAlive = true;
request.ContentType = "application/json";
request.Method = "POST";
request.Headers.Add("Authorization", "OAuth " + googleToken.ToString());
var actEvent = new GoogleCalendarEvent
    {
    summary = eventCalendar.Title,
    description = eventCalendar.Description,
    start = new GoogleCalendarEventTime(eventCalendar.Date),
    end = new GoogleCalendarEventTime(eventCalendar.Date.AddHours(1))
};

var data = jsonSerializer.Serialize(actEvent);
var postData = Encoding.UTF8.GetBytes(data);
Stream ws = request.GetRequestStream();
ws.Write(postData, 0, postData.Length);
ws.Close();
response = request.GetResponse();
stream = new StreamReader(response.GetResponseStream());
var result = stream.ReadToEnd().Trim();

return Json(new {Success = true}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2019-02-06T17:00:20.623

将描述放在这样的变量中：

```
$variable = [
             "<span>Text here</span> <br/>
              <b>Text here</>
               ...           "
            ]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-23T14:34:55.950

如果你去[这里的文档](https://developers.google.com/google-apps/calendar/v1/developers_guide_php#CreatingWebContent)，它谈到设置类型（MIME）。这意味着您可能只需将类型设置为 HTML。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-24T09:26:31.730

Google 日历事件描述字段只有纯文本可用。:-(

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2019-08-25T19:22:37.823

在与这个斗争了 48 小时后，雷纳托的回答对我有用，并且包含一个 url 链接，我这样编码

```
 <a href=https://www.myweb.com/page.pdf>Page Description</a><br/> 
```

# unit-testing - Nodeunit - Backbone - Require.js: Unitesting

> ID：11612012
> 
> 赞同：2
> 
> 时间：2012-07-23T11:53:57.690
> 
> 标签：unit-testing, backbone.js, requirejs, nodeunit

I'm trying to use Nodeunit to test my Backbone models and later I'd like to test the other components as well. The main reason I'm using Nodeunit is because my server tests are using it already and I'd like to stick with one testing framework.

Is this a good idea? I've made one feable attempt of setting up a unit test, but it fails when I try to require the underscore and backbone libraries:

```
Error: Cannot find module 'underscore' 
```

Is it possible at all to use nodeunit for this and if not what would the recommend unit-testing framework be for testing a Backbone app?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-29T03:42:42.993

You are probably not including your RequireJS config in your NodeUnit test runner html. Or, if you are, perhaps NodeUnit isn't serving dynamic content in the same way. I've not used it before, but I ran into a similar problem with Jasmine.

With the [jasmine](http://pivotal.github.com/jasmine/) approach, I had to do something like this:

```
# coffeescript #
TEST_ENV = (typeof window['jasmine'] == 'object')
prefix = if TEST_ENV then '/public' else ''
baseUrl = prefix + '/javascripts' 
```

In the jasmine-gem world (within rails), the /public folder is served out of the actual /public route. (Normal rails serving assumes the /public folder is actually the root route.) So, this bit of code checks for a test context and adds the /public prefix to the baseUrl. Then, in my requireJS config, I assign this baseUrl.

This may be the same issue you are having with NodeUnit.

For more information on how I set this up, as well as special RequireJS + Jasmine integration, see [my blog post](http://massalabs.com/2012/04/22/js-testing-with-jasmine.html).

# android - Jquery 移动样式图像

> ID：11612016
> 
> 赞同：2
> 
> 时间：2012-07-23T11:54:10.213
> 
> 标签：android, jquery, iphone, css, jquery-mobile

我正在尝试编写一个具有图像而不是按钮作为链接的移动应用程序。

如何设置此图像链接的样式，以便在按下它时图像会发光或看起来更暗或略微移动或稍微变大？

在我对互联网的研究中，我发现了具有 ui-btn-down-a、ui-btn-up-a 和 ui-btn-hover-a 的 ui-btn 类。

但是在我的情况下，这不是一个按钮，它是一个链接的图像。

如何应用效果？

更新：

获得转换的好地方是[http://westciv.com/tools/transforms/index.html](http://westciv.com/tools/transforms/index.html)

```
<div data-role="page" data-theme="a">
    <div data-role="content" data-theme="a">
        <a ontouchstart="" href ="wwww.yahoo.com"; class="ui-link-test">
            <img class="icon" src="img/icon.png" alt="black-button.png">
        </a>
    </div>
</div> 
```

哈拉达尼亚

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-23T11:58:39.540

*   *发光*：使用`box-shadow`
*   *看起来更暗*：更改`background`位或应用掩码（掩码可能是其上的伪元素）；
*   *微动*：改变`margin`或使用a `translate` `transform`；
*   *稍微变大*：更改`width`和`height`/或使用 a `scale` `transform`；

对于后两个，我推荐`transform`s。它们[**受 Android 支持，**](http://caniuse.com/#feat=transforms2d)并且具有移动或缩放链接不会干扰（= 移动）其周围元素的优点。

[**演示**](http://dabblet.com/gist/3163300)（按住鼠标按钮查看效果）

相关CSS：

```
.glow:active { box-shadow: 0 0 15px #fe0; }
.darker:active { background: goldenrod; }
.move:active { margin-left: 50px; } /* moves elements at its right */
.move2:active { transform: translateX(15px); }
.bigger:active { width: 120px; height: 66px; } /* moves alements after it */
.bigger2:active { transform: scale(1.1); } 
```

* * *

**注意**：对于`transform`s，您需要在无前缀版本之前添加前缀版本，因为任何浏览器的当前版本都不支持无前缀版本（IE 10 和 Firefox 16 已宣布支持无前缀转换）：

```
.move:active {
    -webkit-transform: translateX(15px); /* the one you need for Android */

    /* if your app is ONLY for Android, you can leave the next three out */
    -moz-transform: translateX(15px);
    -ms-transform: translateX(15px);
    -o-transform: translateX(15px);

    transform: translateX(15px); /* always write it last */
}

.bigger:active {
    -webkit-transform: scale(1.1); /* the one you need for Android */

    /* if your app is ONLY for Android, you can leave the next three out */
    -moz-transform: scale(1.1);
    -ms-transform: scale(1.1);
    -o-transform: scale(1.1);

    transform: scale(1.1); /* always write it last */
} 
```

如果你想要平滑`transition`的s，同样的事情是有效的：

```
a.ui-link-test {
    -webkit-transition: .5s; /* the one you need for Android */

    /* if your app is ONLY for Android, you can leave the next three out */
    -moz-transition: .5s;
    -ms-transition: .5s;
    -o-transition: .5s;

    transition: .5s; /* always write it last */
} 
```

# javascript - 在克隆的图像元素上绑定 onclick 事件

> ID：11612018
> 
> 赞同：0
> 
> 时间：2012-07-23T11:54:15.090
> 
> 标签：javascript, jquery, asp.net-mvc-3

在我看来，我列出了几个拇指。图片。在页面加载时，第一个图像被克隆并加载到相应的 div 中。之后，每个图像 onclick 都会在相应的 div 内以更大的尺寸复制。

**现在我需要在该复制元素上绑定 onclick 操作以重现为简单起见警报你好。**

这是我到目前为止的代码

```
<div id="detailsRight">
   <div id="showImage">
      //here will be copied thumb image
   </div>
   <div id="thumbImages">
      @if (Model.Images == null)
      {
         <h1> no image </h1>    
      }
      @foreach (var image in Model.Images)
      {
         <img src="@image.Path" class="details" width="50" height="50" alt="" />                             
      }
      </div>
</div>

<script type="text/javascript">
    $(document).ready(function () {
        cloneImages();
    });
function cloneImages() {
        var imageObject = $("img.details").first();
        var clonedObj = $(imageObject).clone();
        clonedObj.height("250px").width("300px");
        clonedObj.appendTo($("div#showImage"));

        $(".details").click(function (event) {
            //clone the clicked image
            var clone = $(this).clone();
            clone.height("250px").width("300px");
            //place it in the placeholder
            $('div#showImage').html(clone);
        });
    }
</script> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-23T11:58:46.273

你在找这个吗？

```
$('div#showImage').on('click','img',function(){
    alert('Clicked!');
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-23T12:03:55.973

```
$(document).ready(function () {
    cloneImages();

    $('#showImage').delegate('img', 'click', function () {
        alert('Hello');
    });
}); 
```

# xml - 当我尝试将值设置为 xml 属性时，powershell 奇怪地对 & 符号进行了编码

> ID：11612021
> 
> 赞同：5
> 
> 时间：2012-07-23T11:54:40.990
> 
> 标签：xml, powershell, powershell-2.0, build-script

在我的构建脚本中，我有一个辅助 powershell 函数，如下所示：

```
function set-connectionstring {
  param($path, $name, $value)
  $settings = [xml](get-content $path)
  $setting = $settings.configuration.connectionStrings.add | where { $_.name -eq $name }
  $setting.connectionString = "$value"
  $setting.providerName = "System.Data.SqlClient"
  $resolvedPath = resolve-path($path) 
  $settings.save($resolvedPath)
} 
```

它工作得很好，除了当我尝试设置值时，它会奇怪地编码 & 符号。这是问题：

在我的连接字符串中，我`&quot`有价值。这应该是完全有效的。但是，我上面的代码将其转换`&amp;quot;`为完全不合理的。你知道我可以解决这个问题吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-23T12:02:16.400

您是否先尝试`decode`连接字符串？这是示例：

```
[System.Reflection.Assembly]::LoadWithPartialName("System.web")
[System.Web.HttpUtility]::HtmlDecode("&quot;") 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-23T12:10:24.130

您将 $value 粘贴在字符串文字的中间，所以它的行为就像您输入了: `$setting.connectionString = "&quot;something&quot;"`。这不是 XML 操作，而是 .NET 字符串分配，因此等号右侧的任何内容都必须是您在连接字符串中想要的内容，而不是转义的 XML 属性表示。所以要么在未转义的情况下传递它，要么在分配之前取消它。

# javascript - 如何防止使用 HTML5 / Javascript 在长按/点击时选择画布？

> ID：11612024
> 
> 赞同：1
> 
> 时间：2012-07-23T11:54:49.010
> 
> 标签：javascript, html, html5-canvas, kineticjs

我正在使用 Kinetic.js 库来处理我的触摸事件和其他与 HTML5 手机游戏相关的画布对象。该库提供了访问所有事件的简单界面，但是它没有用于捕获长触摸/点击事件的句柄。我的游戏要求用户按住键才能继续开火，但这会选择整个画布，这需要额外单击才能取消选择，这在重复执行时会变得很烦人。我查看了[这个](https://stackoverflow.com/questions/11237936/mobile-web-disable-long-touch-taphold-text-selection)讨论，但那里没有接受任何解决方案。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-02T22:21:13.977

event.preventDefault() 用于防止浏览器的默认行为，而 event.stopPropagation() 用于防止竞争事件处理程序触发。对于 IE：window.event.cancelBubble = true

尝试使用 stopPropagation()

要获得该事件，您可以执行以下操作：

```
 function(e) {
   var event = e || window.event;
   event.preventDefault();
   event.stopPropagation();
   // more code
 } 
```

# ruby-on-rails - 如何存储用户配置文件数据？

> ID：11612025
> 
> 赞同：0
> 
> 时间：2012-07-23T11:55:00.287
> 
> 标签：ruby-on-rails, database-design

我有一个`user table`，`contains`例如`user registration details`，`username`和`password`...`email`

我怎么能`add`... ？`profile table``store` `name, country, age etc`

我只是简单地`create`选择数据还是使用？`table``use JOIN``is there another way to do this``Ruby on Rails`

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-23T12:06:40.323

使用迁移将这些列添加到用户模型。从它的声音来看，我认为您实际上不需要为这些属性创建一个单独的模型。

您的迁移可能看起来像

```
rails g migration AddProfileDataToUsers

class AddProfileDataToUsers < ActiveRecord::Migration
  change_table :users do |t|
    t.add_column :name, :string
    t.add_column :country, :string...
    #whatever else you want to add to the user model here
    end
end 
```

然后，您可以通过执行@user.country 或类似的操作来根据需要提取数据。希望这可以帮助

# ruby-on-rails-3 - 自定义页面上的活动管理员搜索/过滤器小部件

> ID：11612027
> 
> 赞同：3
> 
> 时间：2012-07-23T11:55:02.253
> 
> 标签：ruby-on-rails-3, search, filter, activeadmin

我想在自定义页面上使用活动管理员提供搜索小部件/过滤器功能以提供查找功能。使用 action_items 我有自己的操作和表单来呈现搜索页面。在搜索页面上，我需要显示的“过滤器”包括“父母”资源的文本字段和父母的父母的下拉列表。关联如下

```
Class MyChildResource
  belongs_to :myParentResource

Class MyParentResource
  attr_accessible :name, :close_to_place, :date
  has_many :myChildResources
  belongs_to :myGrandParentResource

class MyGrandParentResource
  has_many :myParentResources 
```

在活动管理资源中

```
ActiveAdmin.register MyChildResource do
  action_item :only=>:index do
    link_to("Look Up Availability", search_admin_myChildResources_path)
  end

  collection_action :search do
    # do something here similar to the 'filter' feature like filter on myparentresource.date as date
    filter on myGrandParentResource as drop down 
    filter on myParentResource.close_to_place as string 
  end
end 
```

我是否必须编写自己的自定义 meta_search 功能？即使我必须根据用户提供的输入编写自己的搜索查询，我也会很好，但我的问题是如何显示来自父级父级模型的下拉值和/或利用活动管理员的力量过滤器。

我在这个问题中读到了类似的内容，[如何将过滤器添加到 Active Admin 仪表板？](https://stackoverflow.com/questions/10178000/how-to-add-a-filter-to-active-admin-dashboard)，但它是一个 hack，它绝对不能回答显示列表的问题

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-03T06:15:59.717

我还没有找到任何干的方式来做这件事，所以我最终创建了自己的搜索表单，它使用了上面链接中提到的“侧边栏”和“面板”以及 drop 的每个元素的活动管理 css向下，文本字段，日期和按钮。所以我得到了一个看起来像侧边栏的小部件。对于搜索结果，我正在运行自己的查询并根据用户输入进行搜索。搜索表单如下所示：

```
Search For <br>
<div id="search_filter_partial" class="panel_contents"> 
<%= form_tag(search_path,:remote=>true,:class=>"filter_form", :name=>"search_filters") do %>

    <div class="filter_form_field filter_string">
      <%= label_tag(:author, "Author",:class=>" label") %>
      <%= text_field_tag (:author) %>
    </div>

    <div class="filter_form_field filter_select">
    <%= label_tag(:book, "Book",:class=>" label") %>
     <%= select("book","book_id", @books.map {|u| [u.name,u.id]}) %>
    </div>

    <div class="filter_form_field filter_string">
      <%= label_tag(:published_date, "Published Date",:class=>"label")%>
      <%=  date_select :book,:published_date %>
    </div>

    <div class="buttons">
     <%= submit_tag('Find It', :onclick => "validateForm();") %>
     <a class="clear_filters_btn" href="#">Clear</a>
     <input id="order" type="hidden" value="id_desc" name="order">
     <input id="scope" type="hidden" name="scope">
   </div>
 <%end%></div> 
```

看起来不太好，但这是我能想到的最好的，因为我想与 Active Admin 的外观和感觉保持一致

# sql - 插入 -> 选择并添加我的列

> ID：11612028
> 
> 赞同：-1
> 
> 时间：2012-07-23T11:55:17.307
> 
> 标签：sql

例如，我如何在列中添加我的值

t1

```
 id | name | surname | mycolumn
 1  | f    | g       |
 +++|++++++|+++++++++|++++++++++ 
```

和 t2

```
 u_id | u_name | u_surname
   1  | 2f     | 2g
 +++++|++++++++|+++++++++++ 
```

:) 所以，查询

```
INSERT INTO t1 SELECT (u_name,u_surname) FROM t2 WHERE u_id = 1 
```

如何`mycolumn`在我的变量中设置值？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-23T11:59:06.253

如果我理解您的问题：您正在尝试将值从另一个表插入到一个表中，但它们具有不同的列名和不同的列数。在这种情况下，您可以简单地重命名第二个表的列，因为您正在查询结果，但是您将需要第三列，如果您还没有值，则使用 NULL

```
INSERT INTO t1 
    SELECT u_id id,u_name name,u_surname surname, null mycolumn 
        FROM t2 WHERE u_id = 1 
```

# javascript - 使用 Javascript 实时替换正则表达式

> ID：11612029
> 
> 赞同：0
> 
> 时间：2012-07-23T11:55:19.963
> 
> 标签：javascript, regex

我正在编写一个代码，用于在用户键入时实时替换文本字段中的特定单词。

我正在使用正则表达式和 javascript：第一个数组包含要找到的正则表达式，第二个数组包含应该替换它们的单词。

```
source = new Array(/\srsrs\s/,/\sñ\s/,/\snaum\s/,/\svc\s/,/\scd\s/,/\sOq\s/,/\soke\s/,/\so\sq\s/,
                /\soque\s/,/\soqe\s/,/\spq\s/,/\sq\s/,/\sp\/\s/g,/\spra\s/,/\sp\s/,/\stbm\s/,
                /\stb\s/,/\std\s/,/\sblz\s/,/\saki\s/,/\svlw\s/,/\smara\s/,/\sqlq\s/,/\sqq\s/,
                /\srpz\s/,/\smsm\s/,/\smto\s/,/\smtu\s/,/\sqro\s/,/\sqdo\s/,/\sqd\s/,/\sqnd\s/,
                /\sqto\s/,/\sqm\s/,/\sjah\s/, /\sc\/\s/,/\scmg\s/,/\s\+\sou\s\-\s/,/\sflw\s/,
                /\sxau\s/,/\sto\s/,/\sta\s/);
after = new Array("risos","não","não","você","cadê","o que","o que","o que","o que","o que","porque",
            "que","para","para","para","também","também","tudo","beleza","aqui","valeu","maravilhoso",
            "qualquer","qualquer","rapaz","mesmo","muito","muito","quero","quando","quando","quando",
            "quanto","quem","Já","com","comego","mais ou menos","falow","tchau","estou","está"); 
```

这是进行替换的函数：

```
function replacement(){
for(i=0; i<source.length; i++){
    newtext = " "+document.getElementById("translation").value+" ";
    console.log(newtext);
    if(myregex = newtext.match(source[i])){
    newafter = after[i];
    rafael = myregex+" ";
    document.getElementById("translation").value = document.getElementById("translation").value.replace(rafael, newafter);
    }
}
} 
```

我的问题是每次调用该函数以仅用一个字母替换表达式时，即使在一个单词中，也会在该字母第一次出现时进行替换。我以为用 before 和 after 查找那封信`\s`可以解决它，但事实并非如此。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-23T11:57:02.823

如果你只想匹配一个单词，你应该放在`\b`之前和之后（单词边界）。这将确保您不匹配部分单词。另请注意，您正在通过连接字符串来破坏正则表达式。试试这个：

```
var in = document.getElementById("translation").value;
if( in.charAt(in.length-1) == " ") { // user has just finished typing a word
                                     // this avoids interrupting the word being typed
    var l = source.length, i;
    for( i=0; i<l; i++) in = in.replace(source[i],after[i]);
    document.getElementById("translation").value = in;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-23T12:01:14.367

您需要向`g`正则表达式添加一个（全局）修改，以便它将替换所有出现并使用`\b`而不是`\s`标记单词边界。

```
source = new Array(/\brsrs\b/g,/\bñ\b/g, etc 
```

附带说明一下，由于您所有的正则表达式都遵循相同的模式，因此这样做可能更容易：

```
source = new Array( 'rsr', 'ñ', 'naum', etc );

if( myregex = newtext.match( new Regexp( "\b"+source[i]+"\b", 'g' ) ) ) {
    ... 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-23T12:53:04.597

如果通过“实时替换”你的意思是在每次击键时调用函数替换，那么最后的 \b 对你没有帮助，你确实应该使用 \s。但是，在您的替换功能中，您正在向文本字段值添加一个空格，以便您的单字符词触发替换。

这是我对您的代码的重构：

```
(function () { // wrap in immediate function to hide local variables
  source = [ [/\brsrs\s$/, "risos"], // place reg exp and replacement next to each other
             [/\b(ñ|naum)\s$/, "não"], // note combined regexps
             [/\bvc\s$/, "você"]
             // ...
           ]; // not also use of array literals in place of new Array

  document.getElementById ("translation"​​​​​​​).addEventListener ('keyup', function (ev) {
    var t =  this.value  // fetch text area value
      , m
      , i = source.length;

    while (i--) // for each possible match
      if ((m = t.match(source[i][0]))) { // does this one match ?
        // replace match : first remove the match string (m[0]) from the end of 
        // the text string, then add the replacement word followed by a space
        this.value = t.slice (0, -m[0].length) + source[i][1] + ' '; 
        return; // done
      }
  }, false);  
}) ();​ 
```

小提琴是：http: [//jsfiddle.net/jFYuV](http://jsfiddle.net/jFYuV)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-23T13:27:42.717

以一种[不同的风格](http://jsfiddle.net/CrossEye/FU8JV/)，您可以创建一个封装替换列表的函数：

```
var substitutions = {
    "rsrs": "risos",
    "ñ": "não",
    "naum": "não",
    "vc": "você",
    // ...
};

var createSubstitutionFunction = function(subs) {
    var keys = [];
    for (var key in subs) {
        if (subs.hasOwnProperty(key)) {
            keys[keys.length] = key;
        }
    }
    var regex = new RegExp("\\b" + keys.join("\\b|\\b") + "\\b", "g");
    return function(text) {
        return text.replace(regex, function(match) {
            return subs[match];
        });
    };
};

var replacer = createSubstitutionFunction(substitutions); 
```

你会像这样使用它：

```
replacer("Some text with rsrs and naum and more rsrs and vc")
// ==> "Some text with risos and não and more risos and você" 
```

# c++ - EXC_BAD_ACCESS，当访问指针向量指向的对象时

> ID：11612030
> 
> 赞同：1
> 
> 时间：2012-07-23T11:55:21.350
> 
> 标签：c++, unix, stl, vector, exc-bad-access

我有一个指针向量..

我想通过存储在 std::vector 中的指针访问我的 Image 对象。在迭代器找到我的对象后，我想访问/修改向量中指针指向的 Image 对象的某些成员。

请帮忙 ！！

* * *

```
class Image;
typedef std::vector <Image*> VecImages;
typedef VecImages::iterator ImagesIter;

class My_Images
{
        private:
            VecImages m_Images;

        public:
            My_Images() {}
            ~My_Images();

            void addImage(Image* img) {m_Images.push_back(img);}
            Image* getImage(string& rID);
};

// get image method
Image* My_Images::getImage(string& rID)
{
    ImagesIter foundImg = m_Images.begin();

    while (foundImg != m_Images.end()) {
        Image* img = *foundImg;      ***<<<<----------- [EXC_BAD_ACCESS is reported here]***
        const string &strID = img->get_strRId();
        if (strID == rID) {
            return (*foundImg);
        }
        ++foundImg;
    }

    return NULL;
}

// get-id method
const string& Image::get_strRId(void) {return m_strRId;}

// copy constructor
Image::Image(const Image& _src)
    :   m_strRId(_src.m_strRId)
{} 
```

我有另一个名为 builder 的类...在那里我正在调用 addImage() 方法，如下所示... My_Images *m_images; （我创建了这个'新'）图片 *currImg = new Image; currImg->setName("ABC"); ...在 currImg 上调用了其他几个“设置”函数（主要是设置 std::string 的）。

然后我使用以下调用将它添加到向量中。

m_images->addImage(currImg);

一旦将其存储在向量中，我就放弃了它的所有权。currImg = NULL；

* * *

```
template <class _Type>
_Type* ChAutoPtr<_Type>::giveUpOwnership()
{
#ifdef VERIFY_WITH_SHADOW_STACK
    // Check to see if the last auto-ptr is the one that is being
    // given up!!!
    if (m_pInstance != NULL)
    {
        void* pTop = g_cleanupStackShadow.top();
        ChASSERT(pTop == m_pInstance);
        g_cleanupStackShadow.pop();
    }
#endif /* _DEBUG */

    _Type* pTmp = m_pInstance;
    m_pInstance = NULL;
    return pTmp;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-23T13:52:52.160

EXC_BAD_ACCESS 意味着您要么 (1) 将未初始化的对象添加到向量中，要么 (2) 它的生命周期很短，并且在调用 getImage() 之前不再存在。您可以尝试启用 NSZombies 或验证添加到矢量的图像的寿命和范围。最好尝试使用智能指针（例如 shared_ptr）。

# android - 逐项叠加反馈

> ID：11612031
> 
> 赞同：0
> 
> 时间：2012-07-23T11:55:28.833
> 
> 标签：android, android-maps

我有一个`ItemizedOverlay`添加到一个`MapView`显示在`Fragment`.

我想要做的是能够反馈到调用`Fragment`覆盖的`onTap`方法时。因此，在 iOS 中，我将创建一个委托并制作`Fragment`叠加层的委托。我应该如何在android中做到这一点？

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-23T16:37:15.237

因此，对于遇到此问题或类似问题的任何人，您要采取的路线是广播 an`intent`然后由 a 拾取`broadcast receiver`。当这个接收器拿起它时，它会与它的所有者通信。

# python - 如何在python中生成一个nginx安全链接

> ID：11612032
> 
> 赞同：1
> 
> 时间：2012-07-23T11:55:31.343
> 
> 标签：python, nginx

如何使用 python 为 nginx 中的安全链接模块创建链接？我正在寻找使用 nginx 来提供具有过期链接的安全文件。 [链接到 Nginx 维基](http://wiki.nginx.org/HttpSecureLinkModule "链接到 Nginx 维基")

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2018-10-11T15:58:04.663

shadfc 答案中的代码有效。对于**Python 3**，需要进行一些修改：

```
import base64
import hashlib
import calendar
import datetime

secret = "itsaSSEEECRET"
url = "/secure/email-from-your-mom.txt"

future = datetime.datetime.utcnow() + datetime.timedelta(minutes=5)
expiry = calendar.timegm(future.timetuple())

secure_link = f"{secret}{url}{expiry}".encode('utf-8')

hash = hashlib.md5(secure_link).digest()
base64_hash = base64.urlsafe_b64encode(hash)
str_hash = base64_hash.decode('utf-8').rstrip('=')

print(f"{url}?st={str_hash}&e={expiry}") 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2015-03-14T20:56:13.630

接受的答案是不正确的，因为它只对密钥进行哈希处理，而不是对密钥、url 和过期时间的组合进行哈希处理。

```
import base64
import hashlib
import calendar
import datetime

secret = "itsaSSEEECRET"
url = "/secure/email-from-your-mom.txt"

future = datetime.datetime.utcnow() + datetime.timedelta(minutes=5)
expiry = calendar.timegm(future.timetuple())

secure_link = "{key}{url}{expiry}".format(key=secret,
                                          url=url,
                                          expiry=expiry)
hash = hashlib.md5(secure_link).digest()
encoded_hash = base64.urlsafe_b64encode(hash).rstrip('=')

print url + "?st=" + encoded_hash + "&e=" + str(expiry) 
```

一个nginx.conf的对应部分

```
location /secure {

    # set connection secure link
    secure_link $arg_st,$arg_e;
    secure_link_md5 "itsaSSEEECRET$uri$secure_link_expires";

    # bad hash
    if ($secure_link = "") {
        return 403;
    }

    # link expired
    if ($secure_link = "0") {
        return 410;
    }

    # do something useful here
} 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-07-23T11:55:31.343

```
import base64
import hashlib

future = datetime.datetime.now() + datetime.timedelta(minutes=5)
url = "/securedir/file.txt"
timestamp = str(time.mktime(future.timetuple()))
security = base64.b64encode(hashlib.md5( secret ).digest()).replace('+', '-').replace('/', '_').replace("=", "")
data = str(url) + "?st=" + str(security) + "&e=" + str(timestamp) 
```

data 是您生成的表单网址：

```
/securedir/file.txt?st=PIrEk4JX5gJPTGmvqJG41g&e=1324527723 
```

# jquery - JQuery 中的“捕捉”事件

> ID：11612035
> 
> 赞同：1
> 
> 时间：2012-07-23T11:55:47.013
> 
> 标签：jquery, jquery-ui-draggable

> **可能重复：**
> [Jquery UI – 可拖动的 'snap' 事件](https://stackoverflow.com/questions/11611765/jquery-ui-draggable-snap-event)

我正在寻找一种绑定 snap 事件的方法。

当我在我的表面上拖动一个元素并且可拖动元素被捕捉到声明的捕捉位置时，我想触发一个事件。

像这样的东西：

```
$(".drag").draggable({
  snap: ".grid",
  snaped: function( event, ui ) {}
}); 
```

加分点：引用 .grid 元素，其中可拖动元素被捕捉。

# node.js - 当使用forever.js 托管时，基本节点网站返回“Cannot GET /”

> ID：11612036
> 
> 赞同：0
> 
> 时间：2012-07-23T11:55:47.860
> 
> 标签：node.js, express, node-http-proxy

我正在尝试建立我的第一个生产节点网站（只是我的生产 Web 服务器上的一个基本的 hello world）。

下面是我正在使用的（基本的http代理将apache网站传递到端口：9000，节点网站传递到端口：8000）。我知道这部分有效，因为 apache 虚拟主机按我的预期转发。但是，节点部分不起作用-相反，我收到以下错误

```
"Cannot GET /" 
```

这是在 Ubuntu 12.04 上运行节点 0.8.1

我用 forever.js 托管这个（永远启动 foo.js）。当我回显 NODE_ENV - 它显示“生产”

还可能会注意到我在路径上没有 node_modules（正如您将在我的 require 语句中看到的那样）**不确定这是否与我的问题有关

```
var httpProxy = require('/usr/local/lib/node_modules/http-proxy/lib/node-http-proxy');
var express = require('/usr/local/lib/node_modules/express/lib/express');

httpProxy.createServer(function (req, res, proxy) {

    var nodeVhosts = ['www.mysite.com'];
    var host = req.headers['host'];
    var port = nodeVhosts.indexOf(host) > -1
        ? 8000
        : 9000;

    proxy.proxyRequest(req, res, {host: 'localhost', port: port});
}).listen(80);

var one = express.createServer();
one.get('/', function(req, res){
  res.send('Hello from app one!')
});

var app = express.createServer();
app.use(express.vhost('localhost', one));
app.listen(8000); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-23T20:36:10.907

由于您正在运行 Ubuntu，因此您可能会看一下 upstart。如果您不知道，upstart 取代了老式的 unix init-scripts 方法来启动和停止服务。（那是黑暗，可怕的日子！）如果您希望您的应用程序在您的盒子启动/重新启动时自动启动并在它（您的应用程序）崩溃后自动重新启动，那么您想要暴发户。学习 upstart 的基础很容易，然后你就有了一个可以反复使用的工具，无论是 node、apache、nginx、postfix、mongodb、mysql 等等！

我的意思是不尊重那些在永远模块上工作的好人。可以说，它确实有一个可靠的用例，但它经常被用来不完美地复制已经在你的系统上的基石——新贵。此外，您可能会谷歌一些经验丰富的用户和一些 node.js 提交者关于 node.js 的可分叉性和陷阱的评论，这些评论与永远相关。

我想发布链接，但我还没有足够的代表。希望我写的内容足以让谷歌搜索。

祝你好运！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-23T14:54:39.967

`http-proxy`模块不会改变请求的主机头，这就是`connect/express` `vhost` 用来区分虚拟主机的。

在这一行：

```
proxy.proxyRequest(req, res, {host: 'localhost', port: port}); 
```

您告诉代理服务器将未**更改**的请求代理到`localhost:port`.

所以你需要做的是改变：

```
var app = express.createServer();
app.use(express.vhost('localhost', one));
app.listen(8000); 
```

至：

```
var app = express.createServer();
app.use(express.vhost('www.mysite.com', one));
app.listen(8000); 
```

它应该可以工作。

或者，您可以在代理之前简单地设置`req.headers.host`为。`localhost`

# ruby - 使用 Ruby SVN 绑定将本地工作区更新为 SVN 存储库“头”

> ID：11612038
> 
> 赞同：0
> 
> 时间：2012-07-23T11:55:57.887
> 
> 标签：ruby, svn

我正在用 Ruby 编写一个程序，它需要在启动时从 SVN 下载我团队软件的最新版本。

我相信我想使用结帐功能（来自 Ruby SVN 绑定），因为更新不会添加任何在我机器的本地“主干”工作区上不存在的文件。checkout 语句既会更新与 HEAD 不匹配的文件，*也会*下载根本不存在的文件。实际上，在运行完全递归结帐后，我希望拥有最新 SVN 存储库的精确副本。

根据此[API](http://search.cpan.org/~mschwern/Alien-SVN-v1.7.3.1/src/subversion/subversion/bindings/swig/perl/native/Client.pm#METHODS)，结帐语句基本上采用以下内容：

*   一个准确的 SVN URL
*   本地根项目目录
*   修订版（我将使用字符串“HEAD”）
*   递归（整数 1 或 0）
*   一个池对象（我无法确定它的确切用途，但我认为它不会影响我）

这是我写的，在一个为 SVN 存储库中的每个文件迭代的块中：

```
if status != NORMAL #any file that changed or is 'missing'
  ctx.checkout(status.entry.url, ROOTDIR, 'HEAD', 0, nil) #update abnormal file to HEAD
end 
```

作为测试，我从本地工作区中删除了一个目录，并尝试使用此命令恢复它。它一直运行直到它到达丢失的文件之一，此时它会引发错误：

`svn_client_checkout3': subversion/libsvn_fs_fs/tree.c:663: Svn::Error::FsNotFound: File not found: revision 0, path '/trunk/project-gadfly/SocketServer/DiscoveryServer.cpp' (Svn::Error: :FsNotFound)

我不明白为什么会出现这个错误，因为我认为checkout语句会看到本地不存在目录（即文件）然后*创建*它。也许我做错了什么？

回顾我所写的内容，我认为所有这些都是在问以下简单问题的一种冗长的方式：如何使用 SVN Ruby 命令将最新版本的 SVN 存储库放到我的本地硬盘驱动器上？

在此先感谢，埃尔伍德霍普金斯

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-23T14:18:27.130

我不知道问题中特定于 Ruby 的部分，但很明显，您要求 SVN API 在修订版 0 处签出“status.entry.url”，这里当然不存在。

您查看 Perl 文档以使用 Ruby 编写也很奇怪。我建议您改为查看 Subversion 源代码。

这是 Ruby 方法声明：http: [//svn.apache.org/repos/asf/subversion/branches/1.7.x/subversion/bindings/swig/ruby/svn/client.rb](http://svn.apache.org/repos/asf/subversion/branches/1.7.x/subversion/bindings/swig/ruby/svn/client.rb)

```
 def checkout(url, path, revision=nil, peg_rev=nil,
               depth=nil, ignore_externals=false,
               allow_unver_obstruction=false)
    revision ||= "HEAD"
    Client.checkout3(url, path, peg_rev, revision, depth,
                     ignore_externals, allow_unver_obstruction,
                     self)
  end 
```

如您所见，您已将 0 指定为挂钩修订版。但是您应该指定 HEAD。

池呢 --- 它们是 SVN 内存管理的一部分。这是解释：[http ://subversion.apache.org/docs/community-guide/conventions.html#apr-pools](http://subversion.apache.org/docs/community-guide/conventions.html#apr-pools)

# vba - 通过 VBA 打开位于 Lotus Notes 数据库中的 Excel 文件附件

> ID：11612041
> 
> 赞同：1
> 
> 时间：2012-07-23T11:56:12.437
> 
> 标签：vba, excel, hyperlink, lotus-notes

我正在尝试自动打开位于 lotus notes 中的作业数据库中的 excel 文件。我已经能够使用 url 在 lotus notes 中打开一个窗口，但是我无法自动打开位于那里的文件，因为它是一个附件。

这是我用来打开链接的 vba 代码：

```
Application.ActiveWorkbook.FollowHyperlink Address:="Notes://URL", NewWindow:=True 
```

正确的方法是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-23T12:22:29.790

您需要使用 VBA 通过 COM 访问 Lotus Notes。然后您可以访问 NotesEmbeddedObject，使用 ExtractFile 方法保存它，然后启动该保存的副本。

使用 Notes COM API 的 VBA 示例： [http ://www.vbafin.com/Lotus-Notes-VBA-code.php](http://www.vbafin.com/Lotus-Notes-VBA-code.php)

IBM 网站上有一个文档可以帮助您入门：

[如何在 Visual Basic 中使用 LotusScript 类](http://www-01.ibm.com/support/docview.wss?uid=swg21092121)

# java - Java 线程不会停止

> ID：11612043
> 
> 赞同：0
> 
> 时间：2012-07-23T11:56:15.203
> 
> 标签：java, multithreading, jruby

我有一个 JRuby 引擎，它评估一些脚本，如果需要超过 5 秒，我想关闭线程。我试过这样的事情：

```
class myThread extends Thread{
    boolean allDone = false;

    public void threadDone() {
        allDone = true;
    }

    public void run() {
        while(true) {
            engine.eval(myScript);
            if(allDone)
                return;
        }
    }

(...)

    th1 = new myThread();
    th1.start();
    try {
        Thread.sleep(5000);
        if(th1.isAlive())
            th1.threadDone();
    } catch(InterruptedException e) {}

    if(th1.isAlive())
        System.out.println("Still alive"); 
```

我也尝试用`th1.stop()`or杀死线程，`th1.interrupt()`但`th1.isAlive()`方法返回的值总是`true`.

我能做些什么？我想补充一点，myScript 可能是“while(1) do; end”，我不能等到它完成。所以我想阻止这样的脚本，如果它需要超过 5 秒就杀死线程。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-23T12:02:16.267

另一种解决方案是使用内置机制来中断线程：

```
public void run() {
    while (!Thread.currentThread().isInterrupted()) {
        engine.eval(myScript);
    }
}

...
th1 = new myThread();
th1.start();
try {
    Thread.sleep(5000);
    th1.interrupt();
} 
```

这样，不需要`allDone`字段，也没有同步失败的风险。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-23T12:49:14.030

为了使您的线程可停止，您可能需要类似的东西。

```
class MyTask implements Runnable {
    public void run() {
        try {
           engine.eval(myScript);
        } catch(ThreadDeath e) {
           engine = null; // sudden death.
        }
    }    
} 
```

您可以调用 Thread.stop()，但我建议您先阅读有关此方法的警告。

* * *

如果你想让一个线程最多运行 5 秒，最简单的解决方案是让线程自行停止。

```
class MyTask implements Runnable {
    public void run() {
        long start = System.currentTimeMillis();
        do {
           engine.eval(myScript);
        } while(System.currentTimeMillis() < start + 5000);
    }    
} 
```

这假设您要重复运行 engine.eval()。如果不是这种情况，您可能必须 stop() 线程。有充分的理由不推荐使用它，但它可能是您唯一的选择。

# php - 用除法校正总和，消除舍入误差

> ID：11612045
> 
> 赞同：9
> 
> 时间：2012-07-23T11:56:21.013
> 
> 标签：php, divide, rounding-error

*使用 PHP 编码并带有 MySQL 数据库的 Web 应用程序。*

我有一个系统，可以在分摊成本时计算许多人的不同成本。例如， **A 人**以 10 元的价格购买某样东西，**B、C 和 D**人应该分摊成本。

因此，系统应为**A 人登记 10 人的正面记录，为****B、C 和 D**登记 10/3 的负面记录。

 **但是，当这完成时；**B、C 和 D**在四舍五入后都有 -3.33。当然，哪一个**不等于**10。解决这个问题的最佳方法是什么？一个最佳的解决方案也会随机化人们得到的稍微大一点的成本。

一种可能的解决方案是，如果我只是让最后一个人的债务为`10 - (A + B)`，但如果**四个人**分摊例如 13.34 的成本，就会出现问题。不同的部分将是 3.34、3.34、3.34 和 3.32，而最佳分割将是 3.34、3.34、3.33、3.33。

有些人可能会争辩说，如果有**足够的小数**，这只是在有大量行时才会出现的问题。但是在一个经济的系统中，我认为从一开始就拥有一个**故障安全**系统是很重要的。它需要具有**可扩展性**，并且不能有任何错误。*不公平*是可以的，只是没有错误。

*类似问题：[和除值问题（处理舍入误差）](https://stackoverflow.com/questions/4784864/sum-divided-values-problem-dealing-with-rounding-error)*

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-23T12:24:35.390

这似乎有效 - [http://jsfiddle.net/nQakD/](http://jsfiddle.net/nQakD/)。

使用 jQuery 作为示例，但如果您了解 PHP，您应该能够轻松地将其转换为 PHP。如果您还需要 php 代码，请告诉我，我会为您编写。

我也会在这里粘贴代码 -

```
$(document).ready(function() {
    var price = 17.48, people = 4, payment = (price/people).toFixed(2), count=0;
    var payments = [];
    for(i = 0; i < people; i++) {
       payments.push(payment);   
    }

    if(payment*people != price) {
        var currentPayment = payment*people;

        $(payments).each(function() {
            if(currentPayment < price) {
                currentPayment = (currentPayment-this).toFixed(2);
                var newPayment = parseFloat(this)+0.01;
                payments[count] = newPayment.toFixed(2);
                currentPayment = parseFloat(currentPayment)+parseFloat(newPayment);
            }
            else if(currentPayment > price) {
                currentPayment = (currentPayment-this).toFixed(2);
                var newPayment = parseFloat(this)-0.01;
                payments[count] = newPayment.toFixed(2);
                currentPayment = parseFloat(currentPayment)+parseFloat(newPayment);
            }
            count++;
        });   

    }  
    $(payments).each(function() {
        $("#result").append("<b>"+this+"</b><br/>");
    });       
});​ 
```

**编辑：**

这是工作的php代码 -

```
$price = 13.34;
$people = 4;
$payment = (float)$price/$people;
$payment = 0.01 * (int)($payment*100);
$count = 0;
$payments = Array();
for($i = 0; $i < $people; $i++) {
    array_push($payments, $payment);
}
if($payment*$people != $price) {
    $currentPayment = $payment*$people;
    foreach($payments as $pay) {
        if($currentPayment < $price) {
            $currentPayment = $currentPayment-$pay;
            $currentPayment = 0.01 * (int)($currentPayment*100);               
            $newPayment = (float)$pay+0.01;
            $newPayment = 0.01 * (int)($newPayment*100);
            $payments[$count] = $newPayment;
            $currentPayment = (float)$currentPayment+$newPayment;
        }
        else if($currentPayment > $price) {
            $currentPayment = $currentPayment-$pay;
            $currentPayment = 0.01 * (int)($currentPayment*100);               
            $newPayment = (float)$pay-0.01;
            $newPayment = 0.01 * (int)($newPayment*100);
            $payments[$count] = $newPayment;
            $currentPayment = (float)$currentPayment+$newPayment;
        }
        $count++;
    }
}
foreach($payments as $payed) {
    echo '<b>'.$payed.'</b><br />';
}​​​ 
```

**编辑2：**

这应该可以解决 js 问题 - [http://jsfiddle.net/nQakD/](http://jsfiddle.net/nQakD/)也更新了上面的代码。

**编辑 3：**

编辑了 PHP 代码和 JS 代码，因此它适用于所有示例 - [http://jsfiddle.net/nQakD/](http://jsfiddle.net/nQakD/)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-23T12:08:05.527

也许为每个用户建立一个新的“四舍五入平衡”。如果是 10 分三路，那么每个用户将支付 3.34。每个用户的四舍五入余额也将有 2/3 美分。（这必须存储为我认为的文本）。

下次发生同样的事情时，检查四舍五入的余额。他们有 2/3 美分，所以现在你可以减掉三分之一（所以他们现在在四舍五入的余额中有 1/3 美分）并且只收取 3.33 .**

# c# - 并行图像处理伪影

> ID：11612046
> 
> 赞同：16
> 
> 时间：2012-07-23T11:56:21.287
> 
> 标签：c#, image, parallel-processing, emgucv

我从网络摄像头捕捉图像，对它们进行一些繁重的处理，然后显示结果。为了保持高帧率，我想让不同帧的处理并行运行。

所以，我有一个“生产者”，它捕获图像并将它们添加到“inQueue”中；它还从“outQueue”中获取图像并显示它：

```
public class Producer
{
    Capture capture;
    Queue<Image<Bgr, Byte>> inQueue;
    Queue<Image<Bgr, Byte>> outQueue;
    Object lockObject;
    Emgu.CV.UI.ImageBox screen;
    public int frameCounter = 0;

    public Producer(Emgu.CV.UI.ImageBox screen, Capture capture, Queue<Image<Bgr, Byte>> inQueue, Queue<Image<Bgr, Byte>> outQueue, Object lockObject)
    {
        this.screen = screen;
        this.capture = capture;
        this.inQueue = inQueue;
        this.outQueue = outQueue;
        this.lockObject = lockObject;
    }

    public void produce()
    {
        while (true)
        {
            lock (lockObject)
            {
                inQueue.Enqueue(capture.QueryFrame());

                if (inQueue.Count == 1)
                {
                    Monitor.PulseAll(lockObject);
                }
                if (outQueue.Count > 0)
                {
                    screen.Image = outQueue.Dequeue();                      
                }
            }
            frameCounter++;
        }           
    }
} 
```

有不同的“消费者”从 inQueue 中获取图像，进行一些处理，然后将它们添加到 outQueue：

```
public class Consumer
{
    Queue<Image<Bgr, Byte>> inQueue;
    Queue<Image<Bgr, Byte>> outQueue;
    Object lockObject;
    string name;

    Image<Bgr, Byte> image;

    public Consumer(Queue<Image<Bgr, Byte>> inQueue, Queue<Image<Bgr, Byte>> outQueue, Object lockObject, string name)
    {
        this.inQueue = inQueue;
        this.outQueue = outQueue;
        this.lockObject = lockObject;
        this.name = name;
    }

    public void consume()
    {
        while (true)
        {
            lock (lockObject)
            {
                if (inQueue.Count == 0)
                {
                    Monitor.Wait(lockObject);
                    continue;
                }                
                image = inQueue.Dequeue();   
            }

            // Do some heavy processing with the image

            lock (lockObject)
            {
                outQueue.Enqueue(image);
            }

        }
    }
} 
```

其余重要代码是本节：

```
 private void Form1_Load(object sender, EventArgs e)
    {
        Consumer[] c = new Consumer[consumerCount];
        Thread[] t = new Thread[consumerCount];

        Object lockObj = new object();
        Queue<Image<Bgr, Byte>> inQueue = new Queue<Image<Bgr, Byte>>();
        Queue<Image<Bgr, Byte>> outQueue = new Queue<Image<Bgr, Byte>>();

        p = new Producer(screen1, capture, inQueue, outQueue, lockObj);

        for (int i = 0; i < consumerCount; i++)
        {
            c[i] = new Consumer(inQueue, outQueue, lockObj, "c_" + Convert.ToString(i));
        }
        for (int i = 0; i < consumerCount; i++)
        {
            t[i] = new Thread(c[i].consume);
            t[i].Start();
        }

        Thread pt = new Thread(p.produce);
        pt.Start();
    } 
```

并行化实际上工作得很好，每个添加的线程都会增加线性速度（当然，直到某个点）。问题是我在输出中得到了工件，即使只运行一个线程。工件看起来像是图片的一部分不在正确的位置。

[神器示例（这个是不做任何处理保持清晰，但效果是一样的）](http://i47.tinypic.com/rm1udf.jpg)

任何想法是什么原因造成的？谢谢

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2014-01-09T01:30:18.070

免责声明：这篇文章不应该完全描述答案，而是给出一些关于为什么显示工件的提示。

快速分析表明，该行为实际上是帧的部分垂直镜像片段。我复制了它，镜像，然后把它放回图像上，并添加了一个糟糕的标记来显示它的位置：

![在此处输入图像描述](../Images/aac15b26c46f11abab39246e744d02e2.png)

有两件事立即引起注意：

*   工件大致定位在“正确”的位置上，只是该位置也是垂直镜像的；
*   图像略有不同，表明它可能属于不同的帧。

自从我玩原始捕获并遇​​到类似问题以来已经有一段时间了，但我记得这取决于驱动程序的实现方式（或设置 - 这个特定问题发生在为隔行捕获设置特定成像设备时发生）它可能在“自上而下”和“自下而上”扫描之间交替填充其帧缓冲区 - 一旦帧已满，“光标”就会恢复方向。

在我看来，您遇到了竞态条件/缓冲区欠载情况，从帧缓冲区到您的应用程序的传输是在设备传输完整帧之前发生的。

在这种情况下，您将收到部分图像，并且仍未刷新的区域将显示一些先前传输的帧。

如果我必须打赌，我会说工件可能按顺序出现，而不是在同一位置，而是在特定方向（向上或向下）上“波动”，但总是作为镜像位。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-01-09T01:15:57.113

好吧，我认为问题就在这里。这部分代码不能保证您将被两个队列之间的一个线程访问。图像被**inQueue**弹出实际上并没有在**outQueue中按顺序接收**

```
while (true)
{
        lock (lockObject)
        {
            if (inQueue.Count == 0)
            {
                Monitor.Wait(lockObject);
                continue;
            }                
            image = inQueue.Dequeue();   
        }

        // Do some heavy processing with the image

        lock (lockObject)
        {
            outQueue.Enqueue(image);
        }

} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-01-14T02:33:18.890

与@OnoSendai 类似，我并不想解决所述的确切问题。我将不得不编写一个应用程序，而我只是没有时间。但是，我将立即更改的两件事是使用`ConcurrentQueue`该类，以便您具有线程安全性。而且，我会使用任务库函数在不同的处理器内核上创建并行任务。它们位于 System.Net 和 System.Net.Task 命名空间中。

此外，对我来说，垂直翻转这样的块看起来不仅仅是一件神器。如果您提到的在单个线程中执行时也会发生这种情况，那么我肯定会重新关注等式的“繁重处理”部分。

祝你好运！小心。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-01-16T00:27:35.457

你可能有两个问题：

1) 平行并不能确保图像以正确的顺序添加到输出队列中。我想在图像 6 和 7 之前显示图像 8 会产生一些伪影。在消费者线程中，您必须等待前一个消费者将其图像发布到输出队列才能发布下一个图像。由于任务固有的同步机制，任务对此有很大帮助。

2）您可能在渲染代码中也有问题。

# javascript - Jquery 函数中可用的 Javascript 参数

> ID：11612053
> 
> 赞同：1
> 
> 时间：2012-07-23T11:56:51.133
> 
> 标签：javascript, jquery, parameters, onavailable

我正在尝试做类似的事情：

```
function xyz(id,name){

 $(this).spin();

 } 
```

`spin()`是一个 jquery 插件函数（微调框），但是我想将 javascript 的 id 和 name 参数访问到`spin()`. 如何在不更改`spin()`原型的情况下做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-23T11:59:53.453

假设`spin`有调用局部变量`id`-`name`你不能。

范围是在创建函数时确定的，而不是在调用它时确定的。

执行此操作的正常方法是将变量作为参数传递，但这首先需要`spin`接受它们。既然你不能改变`spin`，你就不能那样做。

这样做的坏方法是使用全局变量。如果`spin`写得很好，它就不会使用它们，所以，你不能那样做。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-23T12:08:22.047

如果您说要使用第一个参数应用于`.spin()`元素，请执行以下操作：`id`

```
function xyz(id,name){
    $("#" + id).spin();
} 
```

也就是说，使用 jQuery（CSS 样式）选择器按 id 选择元素，然后应用`.spin()`到生成的 jQuery 对象。

# c# - 如果文件夹中有多个文件，则抛出异常

> ID：11612059
> 
> 赞同：1
> 
> 时间：2012-07-23T11:57:10.787
> 
> 标签：c#, file, count

下面是我用来计算文件夹中文件的代码片段（只是文件，而不是其他文件夹）。如果此文件夹中有多个文件，我需要抛出异常。

```
private bool CheckCondition2(String FolderName)
{
    bool ConditionPassed = false;

    System.IO.DirectoryInfo dir = new System.IO.DirectoryInfo(FolderName);
    int count = dir.GetFiles().Length;

    ConditionPassed = (count > 1);

    return ConditionPassed;
} 
```

然后我在 main 中调用它：

```
if (!CheckCondition2(SourceFolder))
{
    CanCopy = false;
    throw new Exception("More than one mark-off file.");
} 
```

目前，当我测试它时，它告诉我目录中有多个文件，尽管只有一个。我的代码做错了什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-23T11:59:53.487

在您的方法中，`true`如果有多个文件，则返回。

但是，在您的 if 语句中，您检查`false`。你似乎把这些弄混了一点。

调试代码并在值更改时跟踪值以查看是否有任何逻辑错误总是一个好主意。当然，更自动化和更可靠的方法是编写单元测试。

你可以在你的方法中切换条件，成为

```
ConditionPassed = (count <= 1); 
```

这样，这意味着`true`当您处于“正确”状态时该方法将返回。您可以改为将 if 语句更改为读取

```
if (CheckCondition2(SourceFolder)) 
```

要么可能对你有用。在后一个示例中，我还建议将方法的名称更改为类似的名称，`HasMoreThanOneFile`以使其功能非常明显。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-23T12:09:33.987

请尝试调试您的代码。 ![在此处输入图像描述](../Images/a8cf60b8e13c0fcdf823efe891009a1c.png)

它只是在 if 语句中进行了一些小改动后才起作用，它应该是`if (CheckCondition2(SourceFolder))`

尝试更新函数的名称以避免混淆。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-23T12:02:02.583

尝试这个：

```
ConditionPassed = (count <= 1); //check should pass if there is at most one file 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-23T12:02:03.080

要么改变条件

```
ConditionPassed = (count <= 1); 
```

或 if 语句

```
if (CheckCondition2(SourceFolder))) 
```

我认为您的成功方案是源文件夹中最多有 1 个文件

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-23T12:02:13.800

而不是使用布尔，为什么不尝试......

```
System.IO.DirectoryInfo dir = new System.IO.DirectoryInfo(FolderName);
int count = dir.GetFiles().Length;

if (count > 1)
{
    throw new Exception("More than one mark-off file.");
}
else
{
    // Something else
} 
```

它的代码更简洁（抱歉，强迫症开始了！）

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-07-23T12:02:59.287

我觉得你的逻辑有问题。ConditionPassed = (count > 1) 应该是 ConditionPassed = (count <=1)。希望这有帮助！

# java - 循环扫描仪输入

> ID：11612061
> 
> 赞同：0
> 
> 时间：2012-07-23T11:57:25.697
> 
> 标签：java, arrays, loops

我正在写一个纸牌游戏。我遇到了一个问题，似乎无法弄清楚。我试图通过首先让用户指定数组大小来将玩家添加到数组中。然后要求用户输入要添加到数组中的玩家名称。我的循环有问题，在第一个循环期间，“输入名称：”将在用户输入之前打印 2 次。有人可以帮我解决这个问题。谢谢你。

```
public class Dealer {
    Scanner keyboard = new Scanner(System.in);
    private Deck deck = new Deck();
    Player[] players;

    public static void main(String []args){
        new Dealer();
    }

    public Dealer(){
        addPlayers();
        print();
    }

    private void addPlayers(){
        int num = numPlay();
        players = new Player[num];

        for(int i=0; i<num; i++){
            System.out.println("Enter name: ");
            String name = keyboard.nextLine();
            players[i] = new Player(name);
        }
    }

    private int numPlay(){
        System.out.print("Enter how many players: ");
        return keyboard.nextInt();
    }

    private void print(){
        for(Player x: players)
            System.out.println(x.toString());
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-23T12:05:50.777

这应该工作

```
private int numPlay(){
        System.out.print("Enter how many players: ");
        return Integer.parseInt(keyboard.nextLine());
    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-23T12:09:31.173

如果**名称**由一个单词组成，则您可以调用该`keyboard.next()`函数而不是该`keyboard.nextLine()`函数`String name = keyboard.nextLine();`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-23T12:09:43.323

如前所述，如果您调用`numPlay()`，扫描仪会读取数字和按 Enter 键给出的行结束符。由于您使用了 nextInt()，因此换行符保留在扫描仪中。

Therefore, some string is remaining in the buffer and the next call to read from the scanner simply returns this new line; it does not wait for your input.

In addition, it seems as if it creates an player with a name of '\n'.

# ruby-on-rails - 如何更快地显示 rspec 错误？

> ID：11612062
> 
> 赞同：2
> 
> 时间：2012-07-23T11:57:48.763
> 
> 标签：ruby-on-rails, rspec

我的 rspec 测试套件很慢。运行所有测试大约需要五年时间。在它运行时，我只看到测试失败。

```
.......................................................................
.......FFFFFFFFFFFFFFF....F..........FFFFFFFFF.........................
................FFFFFFFFFFFFFFF.....................FF.................
..........................FFF..........................................
.............FFFFFFFFFFFFFFFFFFFFFF....................................
................................................................FFFF...
.......FFFFFFFFF.......................... 
```

然后，在盯着这个几年之后，我终于得到了一个错误的清单。

```
Failures:

  172481) Foobar should barfoo the barbaz while quux is set to narf
     Failure/Error: before { click_link "Enable narf" }
     ArgumentError:
       wrong number of arguments (0 for 1)
     # ./app/helpers/foobar_helper.rb:22:in `gobble'
     # ./app/controllers/barbaz_controller.rb:18:in `omgwtf'
     # (eval):2:in `click_link'
     # ./spec/requests/metasyntactic_spec.rb:43:in `block (5 levels) in <top (required)>' 
```

有没有办法告诉 rspec 它应该直接显示错误 -**在运行测试套件时？**

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-23T12:02:02.097

您可以使用 fuubar 格式，请参阅此处的文档：[https ://github.com/jeffkreeftmeijer/fuubar/](https://github.com/jeffkreeftmeijer/fuubar/)

# android - 在屏幕关闭时获取传感器数据（Android 4.0+）

> ID：11612065
> 
> 赞同：0
> 
> 时间：2012-07-23T11:57:57.280
> 
> 标签：android, android-sensors, screen-off

据我所知，在 Android 设备上，没有 100% 确定的方法可以在屏幕关闭时从设备传感器获取数据。有一些解决方法，但它们并不总是有效。但是我读到的所有帖子都在描述 Android 版本 ~2.2。

有谁知道该错误是否已在 Android 4.0+ 中修复？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-21T15:37:43.180

[这](http://developer.android.com/reference/android/os/PowerManager.html#PARTIAL_WAKE_LOCK) `WakeLock`就像魅力一样。

# facebook - 移除offline_access权限的明智解决方案

> ID：11612067
> 
> 赞同：6
> 
> 时间：2012-07-23T11:58:02.117
> 
> 标签：facebook, facebook-access-token, offline-mode

在离开 FB 平台一段时间后，我回来构建一个 FB 应用程序，我看到旧的 offline_access 权限已被删除并替换为 long(ish)-expiry 令牌[1]。

因此，现在似乎任何需要根据外部应用程序中的计划或某些活动将数据推送到 Facebook 的外部应用程序都需要处理已过期的长期访问令牌。这更令人沮丧，因为现在退出 FB 的用户也将杀死任何长期到期的令牌 [2]，而在此之前，即使用户退出，offline_access 仍然存在。

我仍处于思考解决方案的阶段，但有两个想法浮现在脑海：

1) 每当我的应用程序联系具有 FB 集成的用户时，他们被要求单击一个链接，该链接将触发与 FB 的重新身份验证以获取新的长期访问令牌。我的用户通常会在长期访问令牌的生命周期内多次联系，因此这*应该*有效地在他们需要的时间内持续更新长期访问令牌（即使它确实给我的应用程序增加了一些烦人的摩擦）

2）因为我不能保证 1）总是有效（例如，由于用户没有点击我的应用程序电子邮件通知中的重新认证链接或他们退出 Facebook），我还必须处理失败的 FB 交互通过将它们放置在保留队列中并通过电子邮件发送给用户以明确要求他们再次授予长期访问令牌。不酷，但我看不到其他选择。如果在 X 尝试要求他们重新授予权限后他们没有响应请求，我只需将任务装箱并通过电子邮件向他们解释这是由于 FB 限制，而不是我的应用程序。再次，不酷。

是否有人必须提出更好的解决方案来保持与具有身份验证/显式权限的用户帐户交互的能力？我很想听听你做了什么。

（当然，这一切都在等待我重新阅读 FB ToS - 这完全有可能违反规则，这将更加令人沮丧）

编辑/更新：我需要推送的数据是相册中的图像，该相册将从各种来源到达我的服务器，然后将被推送到相应用户的相册中（当然，需要他们预先授予的权限）。我无法保证在图像到达我的服务器时有任何基于 Web 的最终用户交互，以便让最终用户授予我一个新的短寿命令牌。基本上，`offline_access`对于这个 IMO 来说真的是理想的。

更新 2：注意：当需要授予或扩展令牌时，用户不一定会使用我的应用程序或 Facebook，这对我的用例来说真的很关键。

[1] [https://developers.facebook.com/roadmap/offline-access-removal/](https://developers.facebook.com/roadmap/offline-access-removal/) [2] [http://developers.facebook.com/blog/post/2011/05/13/how-to--handle -过期访问令牌/](http://developers.facebook.com/blog/post/2011/05/13/how-to--handle-expired-access-tokens/)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-04T21:18:53.100

你有正确的两个选项，但我会指出第三个选项和一个鲜为人知的事实，它可能与你的“需要将数据推送到 Facebook”的特定场景相关，也可能不相关

首先，假设您为您的应用程序实现了移动网络或画布，另一个可用选项是应用程序到用户请求或通知。用户会在书签列表中的应用名称旁边看到一个小的通知计数器指示器。如果他们响应请求或书签/通知计数器让他们点击您的应用程序，您可以触发服务器端令牌更新/扩展过程。这个过程对用户是透明的——假设他们仍然安装了你的应用程序，他们什么也看不到。

其次，今天很多人使用offline_access 只是简单地发布到用户的信息流中。如果这就是您所需要的，并且您不需要执行一堆 FQL 查询或在图形 API 上执行其他操作，那么如果您获得了 publish_stream 权限，那么您实际上不需要offline_access 或当前用户令牌。使用 publish_stream，您可以在用户离线时使用您的应用访问令牌发布。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-04T21:43:28.820

对于特定的“需要推送数据”场景，[facebook 宣布](http://developers.facebook.com/blog/post/2012/07/23/new-marketing-tools-for-pages/)了新的[Page 对象连接](http://developers.facebook.com/docs/reference/api/page/#unpub_scheduled_posts)，允许您创建具有特定发布时间的帖子。理论上，有了这些，您可以通过在创建这些用户时对用户进行身份验证并让 Facebook 发布它们而不是安排在您身边的工作来解决问题。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-31T16:57:09.480

这里有第 3 个选项作为建议。

对于每个经过身份验证的用户，您都有 access_token 和 expires_in （假设您已经将它们存储在您的数据库中）

1) 编写一个计划任务，当您发现任何接近到期时间的令牌时，使用它们的 expires_in 值检查现有令牌，

2）您可以通过 HTTP GET 调用从服务器端更新此令牌（示例代码如下）

```
requestUrl = "https://graph.facebook.com" + "/oauth/access_token"
            + "?" + "client_id="+facebook_appId 
            + "&"+"client_secret="+facebook_appSecret
            + "&" + "grant_type=fb_exchange_token"
            + "&" + "fb_exchange_token="+currentToken;

            req = WS.url( requestUrl );
            Logger.info("renew token, req.url : %s", req.url);
            req.timeout = 20;
            resp = req.get();

            // access_token=....&expires=5181096
            Map<String, String> respMap = LocoUtils.decodeUrl( resp.getString() );
            token = respMap.containsKey("access_token")? respMap.get("access_token") : "";

            facebookToken.access_token = token;
            facebookToken.expires_in = respMap.containsKey("expires")?LocoUtils.stringToLong(respMap.get("expires")) : 0L; 
```

# mysql - MySQL双向外键？

> ID：11612071
> 
> 赞同：1
> 
> 时间：2012-07-23T11:58:15.907
> 
> 标签：mysql, sql, foreign-keys, foreign-key-relationship

我想知道这种事情是否会起作用：

假设我有两个表：COMPANIES 和 ADDRESSES。每个公司只能有一个地址。简化的模式看起来像这样。

```
COMPANIES
id
address_id
name
(...)

ADDRESSES
id
first_name
street
(...) 
```

现在，我想在**COMPANIES.address_id -> ADDRESSES.id ON DELETE SET NULL ON UPDATE CASCADE**添加外键。但我也希望在删除公司时删除地址。因此，另一种方法是**ADDRESSES.id -> COMPANIES.address_id ON DELETE CASCADE**。这是安全和可能的吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-23T14:03:20.633

也许，使用触发器代替外键可以解决您的问题。

```
create trigger addr_delete
after delete on companies for each row
begin
   delete from addresses where id=old.address_id
end 
```

# javascript - 令人困惑的 JSLINT 错误

> ID：11612072
> 
> 赞同：0
> 
> 时间：2012-07-23T11:58:19.437
> 
> 标签：javascript, jslint

我正在为我和朋友玩的桌面策略游戏制作 JavaScript 骰子滚轮，但遇到了障碍。基本上有一个不规则的命中表，所以我不能使用公式（据我所知）来判断结果，而是我有一大堆 switch 和 if .. else 语句来确定它们是否是成功或不成功。由于我已经纠正了 JsLint 显示的所有其他错误，但我似乎无法理解这些错误，因为它们引用的字符位于单词中间。

这是jsFiddle：

[http://jsfiddle.net/UEKh6/10/](http://jsfiddle.net/UEKh6/10/)

```
Error:
Problem at line 19 character 12: Missing semicolon.
var aContnt["<h1>Broken History - Dice roller tool</h1><p>Choose one of the f...

Problem at line 19 character 1249: Expected an assignment or function call and instead saw an expression.
var aContnt["<h1>Broken History - Dice roller tool</h1><p>Choose one of the f...

Implied global: prompt 64,66,262,264,441, morale 441,443, iRoll 442,443 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-23T12:01:10.150

您需要`=`在数组的开头和变量声明之间有一个符号。

`var aContnt = ["`

[http://jsfiddle.net/rlemon/UEKh6/14/](http://jsfiddle.net/rlemon/UEKh6/14/)见添加`=`

# c# - 如何从 ASP.NET MVC 4 中的请求中获取 RouteCollection

> ID：11612077
> 
> 赞同：3
> 
> 时间：2012-07-23T11:58:27.307
> 
> 标签：c#, asp.net-mvc, url-routing

这是我的 global.asax（注册路线）

```
 routes.MapRoute("NewDatabase",
             "Server/{serverId}/Instances/{instanceId}/NewDatabase/",
             new { controller = "Server", action = "NewDatabase" }
             );

            routes.MapRoute(
           "Instance",
           "Server/{id}/Instances/{instanceId}/Databases",
           new { controller = "Server", action = "Databases", id = "id",instanceId="instanceId" }
           );

            routes.MapRoute(
           "Database",
           "Server/{id}/Instances",
           new { controller = "Server", action = "Instances", id = "id" }
           ); 
```

如果`xyz.com/Server/12/Instance/1/NewDatabase`将是服务器的重用 URL， `Server/{serverId}/Instances/{instanceId}/NewDatabase/`则将是匹配模式。我如何知道与上述请求匹配的条目？

谢谢

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-24T15:15:47.713

`RouteTable.Routes.GetRouteData(HttpContextBase)`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-23T12:01:33.923

安装[RouteDebugger](http://nuget.org/packages/routedebugger) nuget 包并在 web.config 中启用它。这会告诉您哪些路线可以被击中以及为什么。

```
<add key="RouteDebugger:Enabled" value="true" /> 
```

您所要做的就是导航到您的网址。RouteDebugger 会将路由信息添加到页面底部。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-24T15:12:39.693

我不确定这是否是您要查找的内容，但您可以创建自定义路由约束，以防止匹配路由，除非匹配某些自定义条件。

您可以实现 Match 方法，该方法返回一个布尔值。如果返回 false，则与约束关联的路由将与浏览器请求不匹配。此方法具有 RouteValueDictionary，因此您可以从那里检查路线值。

有关更多信息，请参阅此网址 - [http://www.asp.net/mvc/tutorials/controllers-and-routing/creating-a-custom-route-constraint-cs](http://www.asp.net/mvc/tutorials/controllers-and-routing/creating-a-custom-route-constraint-cs)

# objective-c - 无法在 NSUserDefaults 中保存字符串，直到保留它

> ID：11612087
> 
> 赞同：0
> 
> 时间：2012-07-23T11:59:16.173
> 
> 标签：objective-c, nsuserdefaults, retain

我是objective-c的新手。我从 UITextField 保存字符串时遇到问题。

我在属性中声明了一个字符串并合成了一个名为“familyName”的字符串来存储用户的姓氏。然后我想在用户按下按钮时保存familyName。

```
-(IBAction)textFieldDidBeginEditing:(UITextField *)textField;
{}

-(BOOL)textFieldShouldReturn:(UITextField *)textField{
familyName = inputFamilyName.text;  
NSLog(@"the user's family name is %@", familyName); //it works here.

if (inputFamilyName == textField) {
    [inputFamilyName resignFirstResponder];
}
return YES;
}

-(IBAction)goToNameWheel:(id)sender{

NSUserDefaults *userDefault = [NSUserDefaults standardUserDefaults];
[userDefault setObject:familyName forKey:@"family"];
[userDefault synchronize];
} 
```

它在运行保存代码时崩溃，它说“线程1：EXC_BAD_ACCESS（代码= 1，地址= 0x......”

在那之后，我尝试另一个测试来看看familyName会发生什么，然后我写道：

```
-(IBAction)test:(id)sender{
NSLog(@"1.the family name is %@", inputFamilyName.text); // This works...
NSLog(@"2.the family name is %@", familyName);} // This crashes... 
```

最后...我尝试在 textFieldDidBeginEditing 中保留familyName：

```
-(BOOL)textFieldShouldReturn:(UITextField *)textField{
familyName = inputFamilyName.text;  
NSLog(@"the user's family name is %@", familyName); //it works here.

if (inputFamilyName == textField) {
    [inputFamilyName resignFirstResponder];
}
[familyName retain]; // just added randomly...
return YES;
} 
```

然后一切正常，我可以保存familyName，打印它......等等。我的问题是......这里到底发生了什么，为什么我必须保留它？我的原始代码有什么问题吗？谢谢你的时间！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-23T12:09:09.727

当你这样做

```
familyName = inputFamilyName.text; 
```

您实际上并没有使用该属性。您正在使用与您的属性同名的实例变量，但没有内存管理的东西。

你应该做的是

```
self.familyName = inputFamilyName.text; 
```

然后属性的保留将启动，您不必手动保留。

为了更难犯错误，您可以将您的`@synthesize`陈述更改为：

```
@synthesize familyName = _familyName; 
```

如果你这样做，那么这意味着被调用的属性`familyName`将有一个名为支持它的实例变量`_familyName`——这意味着意外键入错误的变量要困难得多，从而避免了这个错误。

# ruby - 从 C 文件中的函数调用中提取函数名称

> ID：11612088
> 
> 赞同：0
> 
> 时间：2012-07-23T11:59:21.567
> 
> 标签：ruby, regex

是否可以在 C 源文件中提取函数调用，例如，

```
...
myfunc(1);
... 
```

或者

```
...
myfunc(anotherfunc(1, 2));
.... 
```

仅使用 Ruby 正则表达式？如果没有，像 ANTLR 这样的解析器生成器会有用吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-24T02:02:30.883

在最纯粹的意义上你不能，因为递归嵌套函数调用的可能性使它成为一种非常规语言。也就是说，您不能编写匹配任意函数调用并提取所有包含的函数名称的正则表达式。

但当然，您可以逐步搜索函数名称中允许的字符序列（即，必须以字母或下划线开头，后跟字母、下划线、数字等...），后跟左括号，或类似的东西线。

但是请记住，任何此类方法都容易出错：如果在注释中引用了函数怎么办？如果它出现在字符串常量中怎么办？实际上，要捕获所有特殊情况，您必须（几乎）正确解析完整的 C 文件。

大多数现代正则表达式引擎具有解析比正则语言更多的功能，例如通过对子表达式的反向引用。但你不应该走那条路。使用可以解析上下文无关语言的适当解析器（例如 ANTLR），您将使自己的生活变得更轻松。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-23T12:39:35.907

这不是找出方法调用的完全证明模式，但应该只服务于您感兴趣的模式。

```
[a-zA-Z\s]*\([a-zA-Z0-9]*(\([a-zA-Z0-9\s]*[\s,]*[\sa-zA-Z0-9]*\))?\); 
```

此正则表达式将匹配以下方法调用模式。

```
1\. myfunc(another(one,two));
2\. myfunc();
3\. myfunc(another());
4\. myfunc(oneArg); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-23T12:44:45.540

您还可以使用已经由 emacs 使用的语法编写的正则表达式——imenu、etags、ecb、c-mode 等。

# php - 在 javascript 中访问存储在 Php 数组中的数据

> ID：11612089
> 
> 赞同：-1
> 
> 时间：2012-07-23T11:59:23.613
> 
> 标签：php, javascript, arrays, file-read

> **可能重复：**
> [将 PHP 数组插入 Javascript 数组](https://stackoverflow.com/questions/3915058/inserting-php-array-into-javascript-array)

我正在使用 php 读取服务器中的文件并将文件内容存储在变量中。现在我想用 javascript 访问变量，因为我需要用制表符分隔内容并将内容作为选项添加到 Select 标签。

```
 <?php
                       //read the 'file' content to lines variable
                       $lines = file('file');
                ?> 
```

用于访问 PHP 变量（$lines）的 Javascript：

```
<script type="text/javascript" >
    function readData(){
        var s = '<? echo $lines ?>';
        alert(s);
        }
</script> 
```

**仅使用数组**文本弹出警报的位置

我应该怎么做才能在 javascript 数组变量中访问存储在 $lines 数组中的数据

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-23T12:04:11.493

`file`函数是使用获取数组中的文件内容，然后逐行迭代（比如在 foreach 中）。就像：

```
foreach ($lines as $line_num => $line) {
    echo "Line #<b>{$line_num}</b> : " . htmlspecialchars($line) . "<br />\n";
} 
```

您可以使用`file_get_contents()`将文件的内容作为字符串返回。像

```
$homepage = file_get_contents('http://www.example.com/');
echo $homepage; 
```

如果您在 JS 中使用内容，则必须注意引号等特殊字符。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-23T12:12:32.200

`file_get_contents('file')`而不是`file('file')`你最好的选择。

# jquery - 错误 jQuery：触发可拖动的“TypeError：ui 未定义”

> ID：11612094
> 
> 赞同：0
> 
> 时间：2012-07-23T11:59:38.703
> 
> 标签：jquery

我不明白为什么会出现此错误：**TypeError: ui is undefined**

然而代码非常简单！**演示代码：http:** [//jsfiddle.net/9sNEK/19/](http://jsfiddle.net/9sNEK/19/)

最终目标是当我拖动绿色 div 时触发红色 div 的拖动

**JS**

```
$('.div_green')
.draggable()
.bind('drag',function(event,ui){

    $('.div_red').trigger('drag');

    $('.log').html("drag green - left:" + ui.position.left);

});

$('.div_red')
    .draggable()
    .bind('drag', function(event,ui){

        $('.log2').html("drag_to_simulate - left:"+ ui.position.left);

    }); 
```

**HTML**

```
<div class="div_green"></div>

<div class="pdrag" id="pdrag1">
    <div class="div_red"></div>
</div>

<div class="pdrag" id="pdrag2">
    <div class="div_red"></div>
</div>

<div class="log" style="width:200px;height:20px;"></div>
<div class="log2" style="width:200px;height:20px;"></div> 
```

**CSS**

```
.div_green, .pdrag, .div_red{
  position:absolute;
}
.div_green{
  width:40px;
  height:40px;
  top:170px;
  left:300px;
  background-color: green;
}
.pdrag{
  width:120px;
  height:120px;
  top:50px;
  left:90px;
  background-color: #F1F1F1;
}
#pdrag2{
  top:230px;
  width:150px;
}
.div_red{
  width:20px;
  height:20px;
  top:40px;
  left:50px;
  background-color:red;
}
#pdrag2 .div_red{
    left:75px
} 
```

非常感谢您的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-23T12:09:47.810

你得到`TypeError: ui is undefined`是因为你在 .div_green 的拖动绑定中触发了 .div_red 的拖动事件。

```
$('.div_red').trigger('drag'); 
```

但不提供 ui 的值，

```
$('.div_green')
.draggable()
.bind('drag',function(event,ui){

    //* $('.div_red').trigger('drag'); // ui is missing, you should provide the ui here
    * $('.div_red').trigger('drag', ui); // passing ui here

    $('.log').html("drag green - left:" + ui.position.left);

}); 
```

检查语句以`*`

或者您可以通过`$(this).data('draggable')` 您可以更改 .div_red 的代码来获取元素的 ui，例如

```
$('.div_red')
.draggable()
.bind('drag', function(event,ui){

    if(ui != null)
         $('.log2').html("drag_to_simulate - left:"+ ui.position.left);
    else
        $('.log2').html("drag_to_simulate - left:"+ $(this).data('draggable').position.left);

}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-02-03T17:23:35.810

我认为你的标签顺序是错误的！！！

我曾经遇到过同样的问题......

例如

```
<script src="<?php echo site_url('js/jquery.mjs.nestedSortable.js'); ?>"></script>
<script src="<?php echo site_url('js/jquery-ui-1.10.4.custom.min.js'); ?>"></script> 
```

然后切换它们......然后砰！就是这样！！希望这可以帮助！！！

# c# - EntityObject 可以被子类化吗？

> ID：11612110
> 
> 赞同：1
> 
> 时间：2012-07-23T12:00:49.110
> 
> 标签：c#, .net, entity-framework, inheritance

我基本上是在重新问[这个问题](https://stackoverflow.com/questions/2240038/add-custom-abstract-base-class-between-entityobject-and-generated-classes-in-ent)，因为唯一且被接受的答案不是问题的答案。

是否可以告诉 EF 使用继承 EntityObject 的类（如下所示）作为生成的实体类的基类？

```
public abstract class CustomEntityObject : EntityObject
{
    <additional functionality>
} 
```

我问的原因是我想停止添加接口并在单独的部分类文件中的所有实体类型上实现它们。通过对 EntityObject 进行子类化，我只能实现一次附加功能。

**更新：**

EF 隐式使用 .tt 文件来生成实体类。隐含的意思是您在项目中看不到 .tt 文件。解决方案是显式添加模板（右键单击 .edmx 设计器并单击“添加代码生成项...”，然后添加“ADO.NET EntityObject Generator”）。然后更改 .tt 中的单个值：

```
string BaseTypeName(EntityType entity, CodeGenerationTools code)
{
    return entity.BaseType == null ? "EntityObject" : MultiSchemaEscape((StructuralType)entity.BaseType, code);
} 
```

更改为：

```
string BaseTypeName(EntityType entity, CodeGenerationTools code)
{
    return entity.BaseType == null ? "CustomEntityObject" : MultiSchemaEscape((StructuralType)entity.BaseType, code);
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-08T13:44:07.583

您可以使用这样的 hack（这是**hack**）。

在与您的实体**相同的命名空间中**创建类“抽象类 EntityObject：System.Data.Objects.DataClasses.EntityObject” 。然后你可以使用这个类作为基类。

但是，如果您想创建复杂而美观的解决方案 - 使用 T4 模板、自定义生成等。您可以在这里找到解决[方案](http://msdn.microsoft.com/en-us/library/ff477605%28v=vs.100%29.aspx)，[这里](http://blogs.msdn.com/b/adonet/archive/2010/01/25/walkthrough-poco-template-for-the-entity-framework.aspx)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-23T13:04:13.657

事情是，使用默认的 T4 模板设计器将生成从 EntityClass 继承的实体类。

要使用模型设计器并有能力提供自定义基类，您需要下载[http://msdn.microsoft.com/en-us/library/ff477605.aspx](http://msdn.microsoft.com/en-us/library/ff477605.aspx)（在添加项目之前，它是如何使用它的描述>在线模板，但至少在我的vs2012上找不到了，可能是因为某种原因已经消失了）模板并编辑模板文件以注入您的自定义基类，但我认为大多数程序员都将POCO视为一个原因，所以可能更好的主意是让类没有附加持久性。

# .net - 单击一旦部署移动已发布文件，新发布的文件更新不起作用

> ID：11612113
> 
> 赞同：1
> 
> 时间：2012-07-23T12:01:01.770
> 
> 标签：.net, clickonce, publish, move

净/vs专家:-)

我在单击一次部署时遇到了一些问题。

我为客户开发了一个应用程序，该客户希望从他的网络安装该应用程序，并希望将 setup.exe 放在网络路径上。现在我尝试在我的开发环境中本地测试该场景。

我在本地将解决方案发布到 c:\temp\myapp 并将这个 myapp 文件夹移动到虚拟机。安装应用程序没有问题。但已安装的应用程序（在虚拟机上）无法识别更新。

我在本地发布了一个较新的版本到 c:\temp\myapp 并移动了 setup.exe、app.application 并替换了现有的。我还将应用程序文件（app_0_1_2_30）下的新文件夹复制到虚拟机。

但是当我为它加注星标时，我的应用程序不会识别任何更新。设置很好：“在应用程序启动时检查更新”...

我能做些什么？我有解决方案吗？

# java - Java Wikitext 解析器

> ID：11612118
> 
> 赞同：9
> 
> 时间：2012-07-23T12:01:15.450
> 
> 标签：java, api, parsing, mediawiki

对一个具有易于使用且可配置的 api 的好的解析器有什么想法吗？我希望为其提供数据，例如[http://wikitravel.org/wiki/en/api.php?format=xml&action=parse&prop=wikitext&page=San%20Francisco](http://wikitravel.org/wiki/en/api.php?format=xml&action=parse&prop=wikitext&page=San%20Francisco)，选择我想要的数据部分，然后输出自定义 html每个独特类型的元素？Java 将是首选，但如果有与大多数 (99%+) wikitext 兼容的 php/js 解决方案，那也可以。

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-07-23T18:52:22.377

[Sweble](http://sweble.org/)可能是最好的 wikitext Java 解析器。它[声称 100% 符合](http://sweble.org/wiki/Sweble_Wikitext_Parser/Features)wikitext，但我对此表示严重怀疑。它将 wikitext 解析为抽象语法树，然后您必须对其进行处理（例如将其转换为 HTML）。

[mediawiki.org 上有一个页面](http://www.mediawiki.org/wiki/Alternative_parsers)，列出了各种编程语言的 wikitext 解析器。我不认为他们中的任何人都做 99+% 的 wikitext。一般来说，解析 wikitext 是一个非常复杂的问题。Wikitext 甚至没有在 MediaWiki 解析器本身之外的任何地方正式定义。

* * *

## 回答 #2

> 赞同：15
> 
> 时间：2015-06-28T21:15:25.270

这个问题在几年前就得到了回答，但我想为未来的访问者节省我必须花费的精力来弄清楚如何使用 Sweble。

您可以在他们的网站上尝试文档，但我无法弄清楚。只需查看示例源代码。[在https://repo1.maven.org/maven2/org/sweble/wikitext/swc-example-basic/2.0.0/swc-example-basic-2.0.0-sources](https://repo1.maven.org/maven2/org/sweble/wikitext/swc-example-basic/2.0.0/swc-example-basic-2.0.0-sources.jar)下载 swc-example-basic 的源 jar [.jar](https://repo1.maven.org/maven2/org/sweble/wikitext/swc-example-basic/2.0.0/swc-example-basic-2.0.0-sources.jar)并查看 App.java 和 TextConverter.java。

基本上，要解析页面并将其转换为另一种形式，您首先将以下依赖项添加到您的项目中：

```
 <dependency>
        <groupId>org.sweble.wikitext</groupId>
        <artifactId>swc-engine</artifactId>
        <version>2.0.0</version>
    </dependency> 
```

然后，执行以下操作：

```
public String convertWikiText(String title, String wikiText, int maxLineLength) throws LinkTargetException, EngineException {
    // Set-up a simple wiki configuration
    WikiConfig config = DefaultConfigEnWp.generate();
    // Instantiate a compiler for wiki pages
    WtEngineImpl engine = new WtEngineImpl(config);
    // Retrieve a page
    PageTitle pageTitle = PageTitle.make(config, title);
    PageId pageId = new PageId(pageTitle, -1);
    // Compile the retrieved page
    EngProcessedPage cp = engine.postprocess(pageId, wikiText, null);
    TextConverter p = new TextConverter(config, maxLineLength);
    return (String)p.go(cp.getPage());
} 
```

TextConverter 是我上面提到的示例中的一个类。自定义它以做任何你想做的事情。例如，以下确保所有粗体文本都被“**”包围：

```
public void visit(WtBold b)
{
    write("**");
    iterate(b);
    write("**");
} 
```

对于您将遇到的每种类型的元素，该类都有一堆访问方法。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2016-12-14T18:20:29.873

我刚刚在 Bliki 上取得了成功：[https ://bitbucket.org/axelclk/info.bliki.wiki/wiki/Mediawiki2HTML](https://bitbucket.org/axelclk/info.bliki.wiki/wiki/Mediawiki2HTML)

Bliki 是 XWiki 使用的，使用非常简单：

```
String htmlText = WikiModel.toHtml("This is a simple [[Hello World]] wiki tag"); 
```

以下是下载列表： [https ://oss.sonatype.org/content/repositories/snapshots/info/bliki/wiki/bliki-core/](https://oss.sonatype.org/content/repositories/snapshots/info/bliki/wiki/bliki-core/)

但是在 Maven 中使用它要容易得多。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-08-02T16:20:01.057

您还可以使用 XWiki 的渲染引擎 ( [http://rendering.xwiki.org](http://rendering.xwiki.org) )。这是一个如何解析一些 mediawiki 内容的示例：

```
// Initialize Rendering components and allow getting instances
EmbeddableComponentManager componentManager = new EmbeddableComponentManager();
componentManager.initialize(this.getClass().getClassLoader());

// Get the MediaWiki Parser
Parser parser = componentManager.getInstance(Parser.class, "mediawiki/1.0);

// Parse the content in mediawiki markup and generate an AST (it's also possible to use a streaming parser for large content)
XDOM xdom = parser.parse(new StringReader("... input here"));

// Perform any transformation you wish to the XDOM here
...

// Generate XHTML out of the modified XDOM
WikiPrinter printer = new DefaultWikiPrinter();
BlockRenderer renderer = componentManager.getInstance(BlockRenderer.class, "xhtml/1.0");
renderer.render(xdom, printer);

// The result is now in the printer object
printer.toString(); 
```

[在http://rendering.xwiki.org/xwiki/bin/view/Main/GettingStarted](http://rendering.xwiki.org/xwiki/bin/view/Main/GettingStarted)查看更多示例

希望能帮助到你。

# android - Android假触摸界面

> ID：11612126
> 
> 赞同：1
> 
> 时间：2012-07-23T12:01:39.033
> 
> 标签：android, interface, touch

谁能解释一下这个功能给了我什么： **android.hardware.faketouch.multitouch.distinct** 描述说：应用程序在假触摸界面上对两个或多个“手指”执行不同的跟踪。这是 faketouch 功能的超集。

我想知道这个假触摸界面是什么？是否有可能为真正的安卓手机制作一个包含这个假触摸界面的应用程序。因为我需要制作一个可以同时识别多达 6 次触摸的应用程序。

谢谢大家的帮助，我真的很感激。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-23T12:22:08.633

假触摸：

```
"A fake touch interface provides a user input system that emulates a subset of touchscreen capabilities.
For example, a mouse or remote control that drives an on-screen cursor provides a fake touch interface." 
```

如需更多理解，请阅读[此](http://developer.android.com/reference/android/content/pm/PackageManager.html#FEATURE_FAKETOUCH_MULTITOUCH_DISTINCT)和[此](http://developer.android.com/guide/topics/manifest/uses-feature-element.html#hw-features)。

# jquery - 如何将参数传递给带有远程 URL 的 struts2-jquery 对话框？

> ID：11612128
> 
> 赞同：1
> 
> 时间：2012-07-23T12:01:54.257
> 
> 标签：jquery, struts2, struts2-jquery

我正在使用 struts2-jquery [Dialog Widget](http://code.google.com/p/struts2-jquery/wiki/DialogTag)打开一个 JSP 页面，该页面有一个用于编辑类别的表单。

类别包含两个与之关联的字段；名称和描述。

我想将 a 传递`categoryId`给 JSP 页面，以便表单将通过`remoteurl`.

```
<s:url id="cat1" var="remoteurl" action="editCategoryWindow"/>
<sj:dialog id="editCategoryDialog"
           autoOpen="false"
           height="auto"
           width="auto"
           modal="true"
           href="%{remoteurl}"
           title="Edit Category"/> 
```

```
function editCategory(categoryId) {
    $('#cat1').attr('categoryId');
    $('#editCategoryDialog').dialog({
        autoOpen: false,
        modal: true,
        height: 500,
        width: 900
    });
    $('#editCategoryDialog').empty().data('categoryId', categoryId).dialog("open");
} 
```

这不起作用：有一个空指针异常，因为`categoryId`JSP 页面上没有。

我应该如何将参数传递给 JSP 页面？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-23T23:56:57.397

使用以下类别构建 URL：

```
<s:url id="cat1" var="remoteurl" action="editCategoryWindow">
  <s:param name="categoryId" value="%{whatever}"/>
</s:url> 
```

# grails - 无法初始化代理 - 没有会话，访问过滤器类中的会话对象

> ID：11612134
> 
> 赞同：2
> 
> 时间：2012-07-23T12:02:05.843
> 
> 标签：grails, groovy

我对 groovy grails 技术有点陌生，但我遇到了这个问题

我看了看这[无法初始化代理 - 没有会话](https://stackoverflow.com/questions/2817560/could-not-initialize-proxy-no-session)，但应用程序不会过时太久

我正在尝试访问位于 config 子文件夹中的 SecurityFilter 上的会话对象。我只是想检查控制器上的每个请求，以验证用户是否有权执行此类操作。

```
class SecurityFilters {
    def filters = {

    userFilterList(controller:"user", action:"list") {
        before = {
            if (!session.user.accountType.equals("Admin")) {
                redirect(uri: "/")
            }
        }
    }
    userFilterShow(controller:"user", action:"show") {
        before = {
            if (!session.user.accountType.equals("Admin")) {
                redirect(uri: "/")
            }
        }
    }
    userFilterEdit(controller:"user", action:"edit") {
        before = {
            if (!session.user.accountType.equals("Admin")) {
                redirect(uri: "/")
            }
        }
    }

    }
} 
```

但我得到这个错误

```
Message: could not initialize proxy - no Session
Line | Method
->>    6 | doCall    in SecurityFilters$_closure1_closure2_closure5
- - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - 
|    186 | doFilter  in grails.plugin.cache.web.filter.PageFragmentCachingFilter
|     63 | doFilter  in grails.plugin.cache.web.filter.AbstractFilter
|   1110 | runWorker in java.util.concurrent.ThreadPoolExecutor
|    603 | run . . . in java.util.concurrent.ThreadPoolExecutor$Worker
^    636 | run       in java.lang.Thread 
```

在我到达这一点之前，我在执行登录说明后立即将用户对象放在会话对象上，但我不确定会话对象不可用发生了什么

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-24T16:59:14.283

未检索到用户对象的某些属性，因此在登录时，当我将用户对象放入会话中时，我还必须手动传输我需要的属性，以便我可以再次检索以供以后使用

```
session.user = user //not enough
session.user.accountType = user.accountType 
```

现在我能够从会话对象中检索用户对象并获取我想要获取的属性

# c++ - Qt 在另一个小部件中调整小部件的大小

> ID：11612146
> 
> 赞同：2
> 
> 时间：2012-07-23T12:02:35.157
> 
> 标签：c++, qt, qt4, qt-designer

我有以下布局： ![在此处输入图像描述](../Images/0780b64f64592e3bd7cc879e75b439f5.png)

黑色的矩形是 QVBoxLayouts，红色的是一个通用的小部件容器，蓝色的小矩形是我自定义的 openGL 小部件。

我已经为所有布局和小部件设置了调整大小的策略，但我无法让 openGL 小部件调整到其父区域的范围（图像中的红色矩形）。

我是 Qt 初学者，也许我需要使用信号和插槽将蓝色的小 openGL 小部件调整为红色的？但是怎么做？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2015-03-18T11:31:51.017

在 Qt5.4（我没有测试其他人）中，新的 QOpenGLWidget（内部布局）在我的情况下不会自动调整大小。我打电话

```
LayoutWidget->setGeometry(QRect(0, 0, event->size().width(), event->size().height())); 
```

在父小部件的 resizeEvent(QResizeEvent *event) 中。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-23T12:20:14.267

QGLWidget 也应该在一个布局（任何布局类型）中，以便在调整其父级大小时自动调整自身大小。

因此，例如，在设计器中，左键单击红色的“通用小部件容器”，然后选择垂直布局。

# android - Android - 有没有办法在 MediaPlayer 请求数据源时查看 HTTP 响应？

> ID：11612149
> 
> 赞同：0
> 
> 时间：2012-07-23T12:02:45.850
> 
> 标签：android, android-layout, android-intent, android-emulator, android-ndk

我们像这样将 URI 传递给媒体播放器：
`mMediaPlayer.setDataSource(dataSourceUri);`，
然后调用 prepare，开始播放。

我想知道在设置数据源和媒体播放器查询 URI 之后，是否可以知道 HTTP 响应（至少是状态码）是什么？

我需要知道这一点，因为我的音频播放器在尝试播放歌曲时总是返回 MEDIA ERROR UNKNOWN -1，所以我认为我可以看到 HTTP 响应会很有帮助，并确保问题可能出在服务器端。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-23T12:58:04.733

您可以尝试 MediaPlayer.OnInfoListener 接口（要调用的回调接口定义以传达有关媒体或其播放的一些信息和/或警告。）

# android - 启动时在后台启动应用程序

> ID：11612150
> 
> 赞同：0
> 
> 时间：2012-07-23T12:02:55.083
> 
> 标签：android

我想在手机启动时启动我的应用程序。但是用户不应该知道应用程序已经启动。我通过在广播接收器中接收 BOOT_COMPLETE 事件来进行启动，并且能够通过使用 moveTaskToBack(true) 来最小化应用程序。但是我的应用程序在它被最小化之前是可见的，我不希望这种情况发生。我的应用程序没有任何服务。有什么方法可以在没有最终用户注意的情况下启动应用程序最小化？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-23T13:03:58.307

```
enter code here 
```

```
 <intent-filter>
            <action android:name="android.intent.action.BOOT_COMPLETED" />
            <category android:name="android.intent.category.DEFAULT" />
    </intent-filter> 
```

公共类 BootUpReceiver 扩展 BroadcastReceiver{

```
 @Override
    public void onReceive(Context context, Intent intent) {
            Intent i = new Intent(context, MyActivity.class);  
            i.addFlags(Intent.FLAG_ACTIVITY_NEW_TASK);
            context.startActivity(i);  
    } 
```

}

# javascript - self.postMessage 和 onMessage 不适用于上下文项

> ID：11612152
> 
> 赞同：0
> 
> 时间：2012-07-23T12:02:59.030
> 
> 标签：javascript, firefox-addon, contextmenu, firefox-addon-sdk

我正在尝试为 Firefox 开发一个插件（使用最新版本的 JetPack），它在单击上下文项时发送一些 AJAX 数据。但是，不幸的是，我似乎遇到了一些问题。

请参阅下面的代码 - 我已尝试使其尽可能简单易懂。

```
// file main.js
var contextMenu = require("context-menu");
var data = require("self").data;

exports.main = function(options, callbacks) {
    var contextMenuItemContentScriptFiles = [data.url("content.js")];

    var menuItemSelection = contextMenu.Item({
        label: "This is a test",
        contentScriptFile: contextMenuItemContentScriptFiles,
        context: contextMenu.SelectionContext(),

                onMessage: function (testVar) {                    
                            alert(testVar);                    
                }                                
    });
};

// file content.js
self.on("click", function (node, data) {
        alert("before posting");
        self.postMessage("messagePosted");
        alert("after posting");
}); 
```

该代码会*在“发布前”*和*“发布后”*发出警报，但它没有像我预期的那样*发出“messagePosted”警报。*

你能帮我找出问题吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-23T21:04:25.153

发现了问题。

我不得不使用console.log，而不是来自主脚本的警报。

# php - 带有 Codeigniter 的 Ajax 加载器

> ID：11612156
> 
> 赞同：0
> 
> 时间：2012-07-23T12:03:19.480
> 
> 标签：php, javascript, ajax, jquery, codeigniter-2

我正在使用带有 codeigniter 的 Ajax 加载程序。我正在使用 ajax 加载另一个视图，但在将活动类添加到按下的按钮时遇到问题。

这是 Ajax 脚本。它在这一步旁边工作

```
$(this).addClass('active');
```

它删除了另一个活动类按钮，但不会插入正在按下的按钮

```
<script type="text/javascript">

    $(document).ready(function(){
        var baseurl = "<?php echo base_url() ?>";

                //$('#submenu li a').click(function() {
                //$('#submenu li').removeClass('active');    
                //$(this).addClass('active');
                //});   

        // Ajax Slide & Fade Content with jQuery
        $('.more').live('click',function(){
            var href = $(this).attr('href');
            if ($('#ajax').is(':visible')) {
                $('#ajax').css('display','block').animate({height:'1px'}).empty();
            }
            $('#ajax').html('<img class="loader" src="'+baseurl+'assets/img/ajax-loader.gif" alt="">');
            $('#ajax').css('display','block').animate({height:'500px'},function(){
                $('#ajax').load(baseurl +'index.php/andreiaclinicaestetica/content #'+href,function(){
                    $('#ajax').hide().fadeIn();
                    $('#submenu li a').click(function() {
                    $('#submenu li').removeClass('active');    
                    $(this).addClass('active');
                    }); 
                });
            });
            return true;
        });
    });
</script> 
```

这是正在加载的视图

 `````
 <div class="content" id="page_01">
        <h3>Lorem ipsum dolor</h3>
        <p>Lorem ipsum dolor sit amet, consectetuer adipiscing elit. Phasellus hendrerit. Pellentesque aliquet nibh nec urna. In nisi neque, aliquet vel, dapibus id, mattis vel, nisi. Sed pretium, ligula sollicitudin laoreet viverra, tortor libero sodales leo, eget blandit nunc tortor eu nibh. Nullam mollis. Ut justo. Suspendisse potenti.</p>
        <p>Lorem ipsum dolor sit amet, consectetuer adipiscing elit. Phasellus hendrerit. Pellentesque aliquet nibh nec urna. In nisi neque, aliquet vel, dapibus id, mattis vel, nisi. Sed pretium, ligula sollicitudin laoreet viverra, tortor libero sodales leo, eget blandit nunc tortor eu nibh. Nullam mollis. Ut justo. Suspendisse potenti.</p>
    </div>
    <div class="content" id="page_02">
        <ul class="nav nav-tabs" id="submenu">
            <li class="active"><a href="#">Corpo</a></li>
            <li><a href="#">Rosto</a></li>
            <li><a href="#">Depilação</a></li>
            <li><a href="#">Maquilhagem</a></li>
            <li><a href="#">Rádiofrequência Bipolar</a></li>
            <li><a href="#">Spa</a></li>
        </ul>
        <p>Lorem ipsum dolor sit amet, consectetuer adipiscing elit. Phasellus hendrerit. Pellentesque aliquet nibh nec urna. In nisi neque, aliquet vel, dapibus id, mattis vel, nisi. Sed pretium, ligula sollicitudin laoreet viverra, tortor libero sodales leo, eget blandit nunc tortor eu nibh. Nullam mollis. Ut justo. Suspendisse potenti.</p>
        <p>Lorem ipsum dolor sit amet, consectetuer adipiscing elit. Phasellus hendrerit. Pellentesque aliquet nibh nec urna. In nisi neque, aliquet vel, dapibus id, mattis vel, nisi. Sed pretium, ligula sollicitudin laoreet viverra, tortor libero sodales leo, eget blandit nunc tortor eu nibh. Nullam mollis. Ut justo. Suspendisse potenti.</p>
    </div>
    <div class="content" id="page_03">
        <p>Lorem ipsum dolor sit amet, consectetuer adipiscing elit. Phasellus hendrerit. Pellentesque aliquet nibh nec urna. In nisi neque, aliquet vel, dapibus id, mattis vel, nisi. Sed pretium, ligula sollicitudin laoreet viverra, tortor libero sodales leo, eget blandit nunc tortor eu nibh. Nullam mollis. Ut justo. Suspendisse potenti.</p>
        <p>Lorem ipsum dolor sit amet, consectetuer adipiscing elit. Phasellus hendrerit. Pellentesque aliquet nibh nec urna. In nisi neque, aliquet vel, dapibus id, mattis vel, nisi. Sed pretium, ligula sollicitudin laoreet viverra, tortor libero sodales leo, eget blandit nunc tortor eu nibh. Nullam mollis. Ut justo. Suspendisse potenti.</p>
    </div>
    <div class="content" id="page_04">
        <p>Lorem ipsum dolor sit amet, consectetuer adipiscing elit. Phasellus hendrerit. Pellentesque aliquet nibh nec urna. In nisi neque, aliquet vel, dapibus id, mattis vel, nisi. Sed pretium, ligula sollicitudin laoreet viverra, tortor libero sodales leo, eget blandit nunc tortor eu nibh. Nullam mollis. Ut justo. Suspendisse potenti.</p>
        <p>Lorem ipsum dolor sit amet, consectetuer adipiscing elit. Phasellus hendrerit. Pellentesque aliquet nibh nec urna. In nisi neque, aliquet vel, dapibus id, mattis vel, nisi. Sed pretium, ligula sollicitudin laoreet viverra, tortor libero sodales leo, eget blandit nunc tortor eu nibh. Nullam mollis. Ut justo. Suspendisse potenti.</p>
    </div> 
````  `div 在主视图 div 中加载，id="ajax"。

我正在使用 Codeigniter 框架...在 (this).addclass 旁边运行的一切都很好，但之前删除了该类。谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-23T12:06:38.123

专门针对它`$('.more').addClass('active');`

或者将它分配为一个变量来调用，如下所示：

```
$('.more').live('click',function(){
            var $this = $(this);
            var href = $this.attr('href');
            if ($('#ajax').is(':visible')) {
                $('#ajax').css('display','block').animate({height:'1px'}).empty();
            }
            $('#ajax').html('<img class="loader" src="'+baseurl+'assets/img/ajax-loader.gif" alt="">');
            $('#ajax').css('display','block').animate({height:'500px'},function(){
                $('#ajax').load(baseurl +'index.php/andreiaclinicaestetica/content #'+href,function(){
                    $('#ajax').hide().fadeIn();
                    $('#submenu li a').click(function() {
                    $('#submenu li').removeClass('active');    
                    $this.addClass('active');
                    }); 
                });
            });
            return true;
        }); 
`````

# git - 签出到另一个分支后文件丢失

> ID：11612159
> 
> 赞同：1
> 
> 时间：2012-07-23T12:03:23.390
> 
> 标签：git, git-stash, git-checkout

我想将相同的变更集应用到两个不同的分支上。

这就是我所做的：

```
git init
touch README
git add README
git commit -m "initial"

git branch other

touch file2
git add file2
git stash

git checkout other
git stash apply

git checkout master
git stash apply
git stash drop 
```

那行得通。file2 存在于两个分支上。但是如果我切换到另一个分支然后再回到主控，主控上不再存在 file2 了！为什么会发生，我该怎么办？我还有一个限制：应用隐藏更改后，我无法在 master 分支上调用 git commit。

git 版本 1.7.11.msysgit.0

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-23T12:34:29.987

`git stash apply`仅将更改应用于工作树和索引，*而不*应用于存储库。因此，当您`git checkout`在提交之前使用不同的分支时，您会丢失那些本地修改。如果您希望他们坚持在该分支上，您*必须*提交到该分支。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-23T12:35:49.220

这对我行得通。

应用相同变更集的更好方法可能是：

1.  `git commit`你的变更集在`master`.
2.  `git checkout other`
3.  `git cherry-pick master`

# boost - 类动态分配成员和复制/分配，如何避免重新分配和复制？

> ID：11612160
> 
> 赞同：0
> 
> 时间：2012-07-23T12:03:22.850
> 
> 标签：boost, heap-memory, shared-ptr, member

简单的问题，我不想每次需要复制带有堆指针的对象时都分配和复制堆分配的内存，这很愚蠢，我可以将指针指向原始堆，并确保原始分配器不会删除指针。

我想我需要一个引用计数指针....女巫一个？我没有使用智能指针的经验，我只想要一个每次分配它时都会增加引用计数，如果引用计数为 0 则删除它。

是shared_ptr的情况吗？我可以闭上眼睛使用它吗？为什么不创建我自己的 refcount_ptr 来增加赋值时的引用计数并在析构函数上检查它？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-23T12:53:46.547

如果要在原始对象和复制对象之间共享指针对象，可以使用`boost::shared_ptr`或`std::shared_ptr`。

> 为什么不创建我自己的 refcount_ptr 来增加赋值时的引用计数并在析构函数上检查它？

好吧，您可以编写自己的`shared_ptr`，但通常不值得重新发明轮子，除非现有的轮子不符合您的需求。

# java - 图像的扩展点

> ID：11612162
> 
> 赞同：0
> 
> 时间：2012-07-23T12:03:39.287
> 
> 标签：java, eclipse-rcp

我正在尝试为图像创建扩展点。我在想的是，用户应该给一个名称一个 id 和图像的路径，但在那之后我该如何创建图像。当在扩展中给出类时，可以使用 createExecutableExtension 并创建对象。但是只有图像的路径如何实现。有什么建议么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-24T07:32:46.267

像这样的东西：

```
// configuration element is the handle of your extension-point
    String contributor = configurationElement.getContributor().getName();
    String path = configurationElement.getAttribute("path");
    InputStream openStream = FileLocator.openStream(Platform.getBundle(contributor), new Path(path), false);
    Image image = new Image(null, openStream); 
```

# c++ - 确保 fsync 完成它的工作

> ID：11612165
> 
> 赞同：2
> 
> 时间：2012-07-23T12:03:42.817
> 
> 标签：c++, c, linux, filesystems

手册页`fsync`说：

> 如果底层硬盘启用了写入缓存，那么当 fsync() / fdatasync() 返回时，数据可能不会真正在永久存储中。

有什么方法可以确保数据物理写入磁盘？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-23T12:05:58.123

不，那里没有。

当`fsync`您告诉您的操作系统将其写入磁盘时，就操作系统而言，它已被写入磁盘。

如果磁盘是伪造的，那么不幸的是，您无法真正改变它。使用适当的磁盘系统（即 BBU RAID 设置），您可以简单地启用/禁用写入缓存来避免这种情况。

请注意，如果您指定`O_DIRECT`and`O_SYNC`标志，它*应该*将其写入磁盘：[http ://www.kernel.org/doc/man-pages/online/pages/man2/open.2.html](http://www.kernel.org/doc/man-pages/online/pages/man2/open.2.html)

# android - 解析 AndroidManifest.xml

> ID：11612169
> 
> 赞同：0
> 
> 时间：2012-07-23T12:03:56.930
> 
> 标签：android, python, xml, parsing, manifest

我正在尝试解析 AndroidManifest`xml`文件以进行一些分析。解析这个的最佳方法是什么？到目前为止，这就是我正在做的

```
import string
test=string.printable
f=open('AndroidManifest.xml', 'r').read()
x=""
for n in f:
        if n in test:
                x+=n
print x 
```

结果或多或少：

`d 74Rv vzPVZVL :Pd>P l versionCode minSdkVersiontargetSdkVersionnameiconlabel versionName configChangespriorityandroid*http://schemas.android.com/apk/res/androidpackagemanifestngjvnpslnp.iplhmk1.0uses-sdkuses-permission#android.permission.READ_PHONE_STATE'android.permission.ACCESS_NETWORK_STATEandroid.permission.`

这只是其中的一部分。如您所见，它非常丑陋。任何帮助，将不胜感激。

编辑：

所以当我使用 parse 时，我得到了这个奇怪的回溯

```
 Traceback (most recent call last):
  File "test2.py", line 4, in <module>
  dom = parse(f)
  File "/usr/lib/python2.7/xml/dom/minidom.py", line 1914, in parse
  return expatbuilder.parse(file)
  File "/usr/lib/python2.7/xml/dom/expatbuilder.py", line 928, in parse
  result = builder.parseFile(file)
  File "/usr/lib/python2.7/xml/dom/expatbuilder.py", line 207, in parseFile
  parser.Parse(buffer, 0)
  xml.parsers.expat.ExpatError: not well-formed (invalid token): line 1, column 0 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-23T12:08:01.557

我建议使用 XML 解析器而不是纯文本来解析它。

[这里有一些关于 minidom 的优秀文档](http://docs.python.org/library/xml.dom.minidom.html)。

# c++ - 用于将 timestruc_t 转换为 text 或 struct tm 的库调用

> ID：11612171
> 
> 赞同：0
> 
> 时间：2012-07-23T12:03:57.327
> 
> 标签：c++, casting, localtime

我正在编写一个快速实用程序来转储结构的一些细节，`stat`但遇到了一个问题，因为时间属性`stat`似乎是`timestruc_t`在我的平台上似乎是两个 64 位整数的类型。

```
struct stat statBuf;
return_code = stat( aFileName, &statBuf );
if ( !return_code )
{
    struct tm res;
    localtime_r( statBuf.st_mtim.tv_sec, &res ); // problem! 
```

我想我也许可以`localtime_r`用来将 seconds 属性转换为 a`struct tm`但我似乎在使用`statBuf.st_mtim.tv_sec`第一个参数时遇到了强制转换问题。

我敢肯定这不是最好的解决方案——也许你知道一个更好的解决方案。我只想将日期和时间——如果可能的话，降到亚秒级——以格式`YYYY-MM-DD HH.MM.SS.SSS`或类似格式的字符串形式输出。任何建议都会非常受欢迎。

**更新**

这是一个简单的问题——我的错误。只是忘记了第一个参数需要是*地址*而`int`不是`int`值。所以修改和部分完成的代码如下所示：

```
 localtime_r( &statBuf.st_mtim.tv_sec, &res );
    const int bufLen=24;
    char buffer[ bufLen + 1];
    strftime( buffer, bufLen, "%Y-%m-%d %H:%M:%S", &res );
    printf("  %s, %s\n", aFileName, buffer); 
```

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-07-23T14:14:32.373

第一个参数需要是*地址而*不是`int`按`int`值。

# asp.net-mvc-3 - 如何在 MVC3 的 Aspx 页面中设置 DropDown 的宽度？

> ID：11612172
> 
> 赞同：1
> 
> 时间：2012-07-23T12:03:57.623
> 
> 标签：asp.net-mvc-3, styling, html-select

大家好，我如何在 MVC3 的 aspx 页面中设置 DropDown 的宽度或样式

```
 i am using this statement

       <%:Html.DropDownList("Projects")%> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-23T12:06:34.917

看[这里](http://msdn.microsoft.com/en-us/library/dd470380.aspx)。您可以将此语句用于内联样式

```
<%:Html.DropDownList("Projects", Model.ProjectsList, new { @class="myCssClass" })%> 
```

# android - 工作应用程序的 Classnotfound 异常

> ID：11612174
> 
> 赞同：0
> 
> 时间：2012-07-23T12:04:00.993
> 
> 标签：android

我有一个奇怪的问题。我开发了一个具有扫描功能的 android 应用程序。我在扫描部分重用了一些 zxing 代码代码。我的应用程序也适用于所有设备和模拟器。但是在我将其上传到市场后，我在扫描部分出现错误。我的错误报告是

```
java.lang.IllegalStateException: Could not execute method of the activity
at android.view.View$1.onClick(View.java:2191)
at android.view.View.performClick(View.java:2532)
at android.view.View$PerformClick.run(View.java:9291)
at android.os.Handler.handleCallback(Handler.java:587)
at android.os.Handler.dispatchMessage(Handler.java:92)
at android.os.Looper.loop(Looper.java:150)
at android.app.ActivityThread.main(ActivityThread.java:4293)
at java.lang.reflect.Method.invokeNative(Native Method)
at java.lang.reflect.Method.invoke(Method.java:507)
at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:849)
at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:607)
at dalvik.system.NativeStart.main(Native Method)
Caused by: java.lang.reflect.InvocationTargetException
at java.lang.reflect.Method.invokeNative(Native Method)
at java.lang.reflect.Method.invoke(Method.java:507)
at android.view.View$1.onClick(View.java:2186)
... 11 more
Caused by: java.lang.ExceptionInInitializerError
at com.imotiva.Menu1.points(Menu1.java:46)
... 14 more
Caused by: java.lang.NoClassDefFoundError: com.qr.decoding.ResultMetadataType
at com.qr.scanning.CaptureActivity.<clinit>(CaptureActivity.java:92)
... 15 more 
```

我的代码仍然可以在设备上运行，但市场上的同一个应用程序却不行。请朋友们帮帮我...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-24T12:27:42.390

最后我找到了我的问题的解决方案。gtumca-MAC 的解决方案[Android 更新 17 似乎与](https://stackoverflow.com/questions/10046298/android-update-17-seems-incompatible-with-external-jars/10046725#10046725)为我工作的外部 Jars 不兼容。创建一个名为 libs 的文件夹并添加我的 core.jar 。现在它工作正常。谢谢大家。

# matlab - 两个独立 GUI 之间的通信

> ID：11612175
> 
> 赞同：1
> 
> 时间：2012-07-23T12:04:02.663
> 
> 标签：matlab, user-interface, simulink, matlab-figure, matlab-guide

因此，我想出了如何从另一个 gui 调用一个 gui 并通过 varargin 和 varargout 来回发送信息。但是，现在我的情况是我有两个单独的 gui（一个不从另一个调用），我相信如果我想在它们之间进行通信，我需要一些其他方法。

更准确地说，我正在制作两个与 Simulink 交互的 GUI。打开模型时会打开一个 GUI，并跟踪信息。双击一个块时将打开另一个 GUI。我想从这个 GUI 发送信息到信息跟踪 GUI。

因此，根据我的搜索，我可以通过在信息跟踪 GUI 中使用[侦听器来完成此操作；](http://www.mathworks.com/help/techdoc/matlab_oop/bqvggvt-1.html)或者我可以直接使用[setappdata/getappdata](http://www.mathworks.com/matlabcentral/answers/338-how-to-pass-data-from-one-gui-to-another)或[findall(0, ...)](https://stackoverflow.com/questions/3938348/matlab-how-to-obtain-all-the-axes-handles-in-a-figure-handle)修改信息跟踪 GUI 中的变量。

到目前为止，我的尝试还没有奏效，我想知道我是否正在采用写入方法。有人可以指出我的方向吗？让我知道我是否可以提供更多信息！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-23T23:29:56.143

对于这类事情，我一直使用 setappdata/getappdata 方法。这是您所做工作的一般分类。当您创建图形时，给它们一个这样的标签：

```
figure( ..., 'Tag', 'info_gui', ... ); % tag name is up to you
figure( ..., 'Tag', 'other_gui', ... ); % tag name is up to you 
```

任何时候您需要一个或其他数字的句柄，只需像这样调用 findobj

```
info_gui_handle = findobj('tag','info_gui');
other_gui_handle = findobj('tag','other_gui'); 
```

好的，现在让我们在 info_gui 中存储一些示例数据，我们稍后会更新

```
info_gui_data.x = 1;
info_gui_data.y = 1;
setappdata( info_gui_handle, 'info_gui_data', info_gui_data); 
```

设置好数字后，您可以执行以下操作：

```
% First you get a handle to the info gui figure

info_gui_handle = findobj('tag','info_gui');

% Next you get the appdata thats stored in this figure.  In this example
% I have previously stored a struct variable called 
% 'info_gui_data' inside the appdata of the info_gui

info_gui_data = getappdata(info_gui_handle ,'info_gui_data');

% Make your changes whatever they are.  Here I am modifying variables x 
% and y that are stored in the struct info_gui_data

info_gui_data.x = 2;
info_gui_data.y = 2;

% Now that I've made changes to the local variable info_gui_data I can 
% now store it back into the info gui's appdata.

setappdata(info_gui_handle ,'info_gui_data',info_gui_data); 
```

我喜欢将我所有的图形应用数据存储在一个巨大的结构中。似乎更容易跟踪，但这取决于您。希望这可以帮助 ：）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-07T22:39:42.293

您也可以尝试使用[guidata](http://www.mathworks.com/help/techdoc/ref/guidata.html)和[guihandles](http://www.mathworks.com/help/techdoc/ref/guihandles.html)。

假设 GUI1 的句柄是 H1。在 GUI1 中，当您想要存储以后可以检索的数据时，请使用：

```
guidata(H1,data) 
```

在 GUI2 中，当您需要数据时，使用：

```
data = guidata(H1); 
```

或者，您可以将数据存储在 uicontrol 对象的“用户数据”属性中。确保将属性“标签”设置为有效的（例如“mybutton”）。要从 GUI2 访问它，请使用：

```
handles = guihandles(H1);
data = get(handles.mybutton,'UserData'); 
```

# ruby - 由于 Windows 中用户文件夹名称的重音，Ruby Gem 路径不正确。如何解决？

> ID：11612176
> 
> 赞同：1
> 
> 时间：2012-07-23T12:04:02.493
> 
> 标签：ruby, windows-7, path, rubygems

我在工作 PC **1.9.3 版本**和**Gem 1.8.24**上安装了Ruby，但是当我尝试安装 Rails 时出现以下错误：

```
ERROR:  While executing gem ... (Errno::ENOENT)
    No such file or directory - C:/Users/B"k"nyi Szabolcs 
```

**我可以在不创建新 Windows 用户的情况下解决此问题吗？**

*我在这里先向您的帮助表示感谢。*

我的 Windows 用户文件夹名称是：Bökönyi Szabolcs

宝石环境 说：

```
RubyGems Environment:
  - RUBYGEMS VERSION: 1.8.24
  - RUBY VERSION: 1.9.3 (2012-04-20 patchlevel 194) [i386-mingw32]
  - INSTALLATION DIRECTORY: C:/Ruby193/lib/ruby/gems/1.9.1
  - RUBY EXECUTABLE: C:/Ruby193/bin/ruby.exe
  - EXECUTABLE DIRECTORY: C:/Ruby193/bin
  - RUBYGEMS PLATFORMS:
    - ruby
    - x86-mingw32
  - GEM PATHS:
     - C:/Ruby193/lib/ruby/gems/1.9.1
  - GEM CONFIGURATION:
     - :update_sources => true
     - :verbose => true
     - :benchmark => false
     - :backtrace => false
     - :bulk_threshold => 1000
  - REMOTE SOURCES:
     - http://rubygems.org/ 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-23T12:10:19.477

看来我想通了，唯一的问题是口音，所以`SET HOME %USERPROFILE%`我用的不是`SET HOME="C:/Users/Bökönyi Szabolcs"`现在的`gem install rails`作品。

# java - 为什么 JSONObject 是无序的？这背后的原因是什么？

> ID：11612177
> 
> 赞同：0
> 
> 时间：2012-07-23T12:04:09.037
> 
> 标签：java, json

我想了解 JSONObject 的原因和/或核心逻辑是无序集。因为在我的大多数情况下，都会有一个请求需要按照时间/位置的顺序作为 JSONObject 响应。经过搜索，我发现很多成员告诉使用 JSONArray，我觉得这不是一个好的解决方案。

在继续进行之前，我想有一个清晰的想法。

先感谢您。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-23T12:08:28.620

`JSONObject`是无序的，因为[JSON](http://json.org)描述的对象是无序的，按照规范：

> 对象是一组无序的名称/值对。

（这是因为 JSON 派生自 [is a subset of] JavaScript 的[对象初始化语法](http://ecma-international.org/ecma-262/5.1/#sec-11.1.5)，并且 JavaScript 对象是无序的——因为在一般情况下没有理由对对象的属性进行排序。这可以留给对象，例如 JavaScript 的数组，它们[只不过](http://blog.niftysnippets.org/2011/01/myth-of-arrays.html)是对属性名称进行一些特殊处理的对象，以及相关的类似数组的函数。）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-23T12:14:15.643

如果 JavaScript 规定了对象属性的顺序，它将排除在其实现中使用哈希表。另一方面，为什么首先要对对象的属性进行排序？正如我们所见，这似乎是一种任意约束，具有深远的负面影响。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-23T12:09:06.460

真正的、完整的原因只有最终确定 ECMAScript 规范的 ECMA 委员会的成员才知道，因为 JSONObjects 是 JavaScript Objects 的子集；但是，这是我的猜测。

要求 JSON 对象的属性保持固定顺序可能会给数据结构增加额外的实现开销，否则如果没有该要求，数据结构会更简单。例如，一个 JSON 对象可以实现为一个简单的哈希表；但是，如果属性的顺序保持固定，则需要一个额外的数据结构来列出它们的顺序。

# java - 如何在 opencsv 中读取 utf-8 字符

> ID：11612179
> 
> 赞同：0
> 
> 时间：2012-07-23T12:04:19.837
> 
> 标签：java, opencsv

我正在尝试从 csv 文件中读取。该文件包含 UTF-8 字符。因此，基于[Parse CSV file contains a Unicode character using OpenCSV](https://stackoverflow.com/questions/1695699/parse-csv-files-that-contain-unicode-character-using-opencsv) and [How read Japanese fields from CSV file into java beans?](https://stackoverflow.com/questions/8003333/how-read-japanese-fields-from-csv-file-into-java-beans) 我刚写

```
CSVReader reader = new CSVReader(new InputStreamReader(new FileInputStream("data.csv"), "UTF-8"), ';'); 
```

但它不起作用。>>Sí, es nuevo<< 文本在记事本、Excel 和各种其他文本编辑工具中正确可见，但是当我通过 opencsv 解析文件时，我得到 >>S�, es nuevo<< （í 是特殊字符，如果您想知道 ;)

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2016-12-05T13:09:49.370

你可以使用encoder=UTF-16LE，我正在为日语写一个文件

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-23T12:18:53.347

谢谢艾奥比。事实证明，尽管大多数 Win 程序都这样显示，但该文件并不是真正的 UTF-8。Notepad++ 是唯一没有将文件显示为 UTF-8 编码的文件，并且在转换数据文件后代码可以工作。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-23T12:12:46.910

使用以下代码解决您的问题，它可能对您有所帮助...

字符串值 = URLEncoder.encode(msg[no], "UTF-8");

谢谢， 亚什

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-05-28T13:13:57.670

使用 ISO-8859-1 或 ISO-8859-14 或 ISO-8859-15 或 ISO-8859-10 或 ISO-8859-13 或 ISO-8859-2 而不是使用 UTF-8

# oracle10g - 将当前 CLOB 列复制到 Oracle 中的新 BLOB 列

> ID：11612181
> 
> 赞同：2
> 
> 时间：2012-07-23T12:04:35.557
> 
> 标签：oracle10g

我有一个带`CLOB`列的表。我想将现有数据转换为数据`BLOB`类型。那失败了`ORA-252858 invalid alteration of datatype`。

我想创建一个新`BLOB`列，将现有数据复制到其中，然后删除现有`CLOB`列。

如何从`CLOB`列复制到`BLOB`列？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-23T19:05:57.443

```
create table temp(col_clob clob,col_blob blob);

insert into temp (col_clob) values('hi i am gaurav soni');
insert into temp (col_clob) values('hi i am gaurav soni');
insert into temp (col_clob) values('hi i am gaurav soni');
insert into temp (col_clob) values('hi i am gaurav soni');
insert into temp (col_clob) values('hi i am gaurav soni'); 
```

/*您需要创建一个将 clob 转换为 blob 的函数，如下所示：坦率地说，我已经从另一个来源获取了此函数，但您会感到困惑，因为该论坛上正在进行讨论，这就是为什么我在这里没有提到/*

```
create or replace function CLOB_TO_BLOB (p_clob CLOB) return BLOB
as
 l_blob          blob;
 l_dest_offset   integer := 1;
 l_source_offset integer := 1;
 l_lang_context  integer := DBMS_LOB.DEFAULT_LANG_CTX;
 l_warning       integer := DBMS_LOB.WARN_INCONVERTIBLE_CHAR;
BEGIN

  DBMS_LOB.CREATETEMPORARY(l_blob, TRUE);
  DBMS_LOB.CONVERTTOBLOB
  (
   dest_lob    =>l_blob,
   src_clob    =>p_clob,
   amount      =>DBMS_LOB.LOBMAXSIZE,
   dest_offset =>l_dest_offset,
   src_offset  =>l_source_offset,
   blob_csid   =>DBMS_LOB.DEFAULT_CSID,
   lang_context=>l_lang_context,
   warning     =>l_warning
  );
  return l_blob;
END;

--update the col_blob with the function we have created above 

 update temp set col_blob = clob_to_blob(col_clob);

select * from temp; 
```

**输出**

```
 COL_CLOB                               COL_BLOB           
-------------------------------------- -------------------
hi i am gaurav soni                    hi i am gaurav soni
hi i am gaurav soni                    hi i am gaurav soni
hi i am gaurav soni                    hi i am gaurav soni
hi i am gaurav soni                    hi i am gaurav soni
hi i am gaurav soni                    hi i am gaurav soni 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-12-01T16:30:09.917

我有来自[Quest 的信息：Oracle：如何将 CLOB 转换为 BLOB](http://mrrame.blogspot.be/2009/09/oracle-how-to-convert-clob-to-blob.html)

在此处复制代码以避免死链接：

```
CREATE OR REPLACE FUNCTION clob_to_blob(p_clob IN CLOB) RETURN BLOB IS
  v_blob BLOB;
  v_offset NUMBER DEFAULT 1;
  v_amount NUMBER DEFAULT 4096;
  v_offsetwrite NUMBER DEFAULT 1;
  v_amountwrite NUMBER;
  v_buffer VARCHAR2(4096 CHAR);
BEGIN
  dbms_lob.createtemporary(v_blob, TRUE);

  Begin
    LOOP
      dbms_lob.READ (lob_loc => p_clob,
                     amount  => v_amount,
                     offset  => v_offset,
                     buffer  => v_buffer);

      v_amountwrite := utl_raw.length (r => utl_raw.cast_to_raw(c => v_buffer));

      dbms_lob.WRITE (lob_loc => v_blob,
                      amount  => v_amountwrite,
                      offset  => v_offsetwrite,
                      buffer  => utl_raw.cast_to_raw(v_buffer));

      v_offsetwrite := v_offsetwrite + v_amountwrite;

      v_offset := v_offset + v_amount;
      v_amount := 4096;
    END LOOP;
  EXCEPTION
    WHEN no_data_found THEN
      NULL;
  End;
  RETURN v_blob;
END clob_to_blob; 
```

这对我有用，即使 dbms_lob.converttoclob 没有。

# c# - 从每组中选择一个元素，无需订购

> ID：11612182
> 
> 赞同：2
> 
> 时间：2012-07-23T12:04:38.007
> 
> 标签：c#

请考虑以下代码：

```
List<string> a = new List<string>(new string[] { "a1", "a2" });
List<string> b = new List<string>(new string[] { "b1", "b2" });
List<string> c = new List<string>(new string[] { "c1", "c2" });
List<List<string>> input = new List<List<string>>();
input.Add(a);
input.Add(b);
input.Add(c);
List<List<string>> output=List<List<string>> PickOneFromEachSet(input) 
```

`PickOneFromEachSet`将从每个集合中选择一个元素而不考虑排序。

我们可以有 2^3=8 种组合，即输出为

```
{"a1","b1","c1"},
{"a1","b1","c2"},
...
{"a2","b2","c2"} 
```

我们应该如何构造这样的函数？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-23T12:06:50.953

如果总是有三组，那很容易：

```
var query = from aValue in a
            from bValue in b
            from cValue in c
            select new List<string> { aValue, bValue, cValue };
List<List<string>> output = query.ToList(); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-23T12:49:26.707

请参阅[使用 LINQ 计算笛卡尔积](http://blogs.msdn.com/b/ericlippert/archive/2010/06/28/computing-a-cartesian-product-with-linq.aspx)

```
List<string> a = new List<string>(new string[] { "a1", "a2" });
List<string> b = new List<string>(new string[] { "b1", "b2" });
List<string> c = new List<string>(new string[] { "c1", "c2" });

var result = CartesianProduct(new List<List<string>>(){a,b,c});

foreach (var row in result)
{
    foreach (var item in row)
    {
        Console.Write(item + " ");
    }
    Console.WriteLine();
}

//https://svn.apache.org/repos/asf/incubator/lucene.net/branches/Lucene.Net_2_9_4g/src/contrib/SimpleFacetedSearch/Extensions.cs
public static IEnumerable<IEnumerable<T>> CartesianProduct<T>(IEnumerable<IEnumerable<T>> sequences)
{
    IEnumerable<IEnumerable<T>> emptyProduct = new IEnumerable<T>[] { Enumerable.Empty<T>() };
    return sequences.Aggregate(
        emptyProduct,
        (accumulator, sequence) =>
        {
            return accumulator.SelectMany(
                (accseq => sequence),
                (accseq, item) => accseq.Concat(new T[] { item })
            );
        }
    );
} 
```

**.NET 3.5**

```
public static IEnumerable<IEnumerable<T>> CartesianProduct<T>(IEnumerable<List<T>> sequences)
{
    //SAME
} 
```

输出：

```
a1 b1 c1
a1 b1 c2
a1 b2 c1
a1 b2 c2
a2 b1 c1
a2 b1 c2
a2 b2 c1
a2 b2 c2 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-23T12:07:57.180

这样的事情怎么样？

```
public List<T> GetFirstOfEach<T>(params List<T>[] Lists)
{
    List<T> rt = new List<T>();
    Lists.ToList().ForEach(l => rt.Add(l.First()));

    return rt;
} 
```

这将允许您将任意数量的列表传递给函数。

```
List<string> output = GetFirstOfEach(a, b, c); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-24T01:35:19.030

我改用了这段代码，我把它贴在这里作为替代：

```
List<string> a = new List<string>(new string[] { "a1", "a2" });
List<string> b = new List<string>(new string[] { "b1", "b2" });
List<string> c = new List<string>(new string[] { "c1", "c2" });

var result = CartesianProduct(new List<List<string>>(){a,b,c});

foreach (var row in result)
{
    foreach (var item in row)
    {
        Console.Write(item + " ");
    }
    Console.WriteLine();
}

     public static List<List<T>> CartesianProduct<T>(List<List<T>> sets)
            {              
                List<List<T>> results = new List<List<T>>();

                int solutions = 1;
                for (int i = 0; i < sets.Count; i++)
                {
                    solutions *= sets[i].Count;
                }
                for (int i = 0; i < solutions; i++)
                {
                    int j = 1;
                    List<T> elem = new List<T>();
                    foreach (List<T> set in sets)
                    {
                        elem.Add(set[(i / j) % set.Count]);
                        j *= set.Count;
                    }
                    results.Add(elem);
                }
                return results;
            } 
```

输出：

```
a1 b1 c1
a1 b1 c2
a1 b2 c1
a1 b2 c2
a2 b1 c1
a2 b1 c2
a2 b2 c1
a2 b2 c2 
```

# performance - Salesforce SOQL 查询长度和效率

> ID：11612183
> 
> 赞同：2
> 
> 时间：2012-07-23T12:04:49.760
> 
> 标签：performance, salesforce, soql

我正在尝试解决仅删除与两个条件匹配的行的问题，每个条件都是一个 id 列表。现在这些 Id 是成对出现的，如果要删除的项目有一个，那么它必须有第二个，所以只使用两个 in 子句是行不通的。我想出了两个解决方案。

**1)**使用两个 in 子句，然后遍历项目并检查有问题的两个 id 是否出现在正确的配对中。

IE

```
for(Object__c obj : [SELECT Id FROM Object__c WHERE Relation1__c in :idlist1 AND Relation2__c in:idlist2]){
    if(preConstructedPairingsAsString.contains(''+obj.Relation1__c+obj.Relation2__c)){
        listToDelete.add(obj);
    }
} 
```

**2)**遍历 id 并构建一个公认的长查询。

我喜欢第二个选择，因为我只得到我需要的项目，并且可以将列表放入删除，但我知道 salesforce 与 SOQL 查询挂断。第二个选项有惩罚吗？构建和查询长字符串或获取比必要更多的对象并过滤更好？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-23T14:36:04.330

通常，您希望将尽可能多的逻辑放入 soql 查询中，因为这不会使用任何脚本语句，并且它们的执行速度比您的代码快。但是，soql 查询有 10k 个字符的限制（可以提高到 20k），因此根据我的信封背面计算，在达到该限制之前，您只能输入 250 个左右的 id 对。

我会选择选项 1，或者如果您真的关心效率，您可以在对象上创建一个公式字段，将 id 配对并对其进行过滤。

```
formula: relation1__c + '-' + relation2__c

for(list<Object__c> objs : [SELECT Id FROM Object__c WHERE formula__c in :idpairs]){
    delete objs;
} 
```

# algorithm - Memcache 驱逐监控系统

> ID：11612188
> 
> 赞同：1
> 
> 时间：2012-07-23T12:05:11.040
> 
> 标签：algorithm, mongodb, optimization, memcached

memcached 逐出数据slab 明智，因为LRU 在各自大小的slab 上运行。因此，即使内存缓存中有可用空间，键也会被逐出。

我想建立一个监控系统来检查由于平板算法而过早驱逐了哪些密钥。我正在考虑创建一个系统，以便为插入到 memcached 中的所有键定期命中 memcached。我已经有一个日志系统，它将所有插入键记录到 memcache 中，这个日志数据存储在 mongo 中。

请建议我的方法是否正确或任何更好的选择？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-01T11:49:05.643

如果我们只谈论你的方法，它是正确的，因为它是可行的。但问题是，这种方法会损害应用程序的性能，因为它会不断地访问 Memcache 并获取密钥。

就替代方案而言，可以有三种替代驱逐政策，

1) 最不常用

2) 最近最少使用

3) 基于优先级的驱逐

这些是**NCache**提供的驱逐策略，它是 .NET 和 Java 的企业级分布式缓存，还为 ASP.NET 和 JSP 会话提供快速可靠的存储。要了解有关这些驱逐政策的更多信息，请查看以下链接，

[http://www.alachisoft.com/resources/docs/ncache/help-4-1/eviction-policy.html?mw=NDE2&st=MQ==&sct=NTAw&ms=CQYAAAABAAAAACIBBAQC](http://www.alachisoft.com/resources/docs/ncache/help-4-1/eviction-policy.html?mw=NDE2&st=MQ==&sct=NTAw&ms=CQYAAAABAAAAACIBBAQC)

# javascript - 关闭手风琴菜单中的所有项目

> ID：11612189
> 
> 赞同：1
> 
> 时间：2012-07-23T12:05:14.893
> 
> 标签：javascript, jquery, html, accordion

我需要在手风琴菜单中默认关闭所有菜单。这是我正在使用的脚本，默认情况下会打开第一个选项卡。默认情况下如何关闭每个选项卡

```
<script type="text/javascript">
            $('#accrdion').accordion();          
        </script> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-23T12:18:34.967

假设您使用的是[jQuery-UI 手风琴](http://jqueryui.com/demos/accordion/)，您可以通过启用 折叠所有内容`collapsible`，然后使用[`activate`](http://jqueryui.com/demos/accordion/#method-activate)值为 的方法`false`，如下所示：

```
// construct the accordion
$('#accrdion').accordion({
    collapsible: true
});

// collapse all somewhere else
$('#accrdion').accordion('activate', false); 
```

# css - 为什么不推荐使用 polyfill 来支持 CSS3 选择器？

> ID：11612192
> 
> 赞同：13
> 
> 时间：2012-07-23T12:05:43.647
> 
> 标签：css, css-selectors, polyfills, selectivizr

我需要确保 IE7 和 IE8 支持。

我正在使用一些 CSS3 选择器，例如`:last-child`. 我放弃了[Selectivizr](http://selectivizr.com/)，它似乎解决了这些浏览器中的许多问题，只剩下少数可以清理一些备用代码。

但[HTML5 Please](http://html5please.com/#selectors)建议**仅**使用后备而不是 polyfill 来解决 CSS3 选择器支持问题：

> 我们强烈建议您不要尝试对此进行 polyfill，但如果您确实需要，可以使用 Selectivizr。

很高兴知道他们为什么“强烈推荐”反对 polyfills……有人有什么想法吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-23T12:13:05.637

*我认为*使用后备意味着您应该向无法使用现代选择器选择的元素添加类，例如添加`.first`用于 for`:first-child`或`.checked`for`:checked`等。

我想不出任何理由 HTML5 Please 建议不要如此强烈地使用 polyfill，除了性能和独立于 JavaScript。最好完全依赖 CSS 来设置样式和绘制。

但在我的拙见中，Selectivizr 是一种魔法，它可以教会 IE6-8 的行为，并确保你的 HTML 没有不必要的类，并且会缩短你的开发时间。

# objective-c - 如何访问父视图？

> ID：11612194
> 
> 赞同：4
> 
> 时间：2012-07-23T12:05:54.847
> 
> 标签：objective-c, xcode, uiview, uiviewcontroller, storyboard

我正在尝试从代码中访问情节提要以便能够使用这一行：

```
DetailViewController *detail = [self.storyboard instantiateViewControllerWithIdentifier:@"detail"]; 
```

我在我的地图视图和列表视图中使用它，但想在其他地方使用它。问题是这个视图，是另一个视图的子视图。

它的设置如下：

thisBigView 是我在情节提要中添加的视图，它是`ThisBigViewController` 在情节提要中，我向该视图添加了另一个视图，我们称之为 thisSmallView。类设置为`ThisSmallView`。

ThisSmallView 是一个自定义视图，我在该视图中动态生成按钮。这些按钮调用以下操作：

```
-(void) radarEventClick:(UIButton *)sender{
    SingletonManager *sharedManager = [SingletonManager sharedManager];

    DetailViewController *detail = [self.storyboard instantiateViewControllerWithIdentifier:@"detail"]; // PROBLEM 1

    Event *a;
    for(int i = 0; i < [sharedManager.eventsManager count]; i++){
        if(sender.tag == ((Event*)([sharedManager.eventsManager objectAtIndex:i])).id_nr){
            a = [sharedManager.eventsManager objectAtIndex:i];
            break;
        }
    }

    [detail setEvent:a];

    [self.navigationController pushViewController:detail animated:YES];    // PROBLEM 2

} 
```

这是我在 mapviewcontroller 中用于响应 annotationdisclosure 点击的代码，并想在这里使用它，但我有 2 个问题！

问题 1：因为 thisSmallView 是 anotherview 的子视图，所以它没有直接访问情节提要的权限，也不知道如何获得该访问权限。

`navigationcontroller`问题 2： thisBigView嵌入在`navigationcontroller`.

（我想如果我能解决问题 2，我会自动解决问题 1 到？）

-- 编辑：我试过的 --

```
DetailViewController *detail = [self.superview.storyboard instantiateViewControllerWithIdentifier:@"detail"]; 
```

但后来我得到'在 UIView * 类型的对象上找不到属性情节提要'

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-23T12:11:54.220

超级视图

```
[smallView superview] 
```

[http://developer.apple.com/library/ios/documentation/uikit/reference/uiview_class/uiview/uiview.html#//apple_ref/occ/instp/UIView/superview](http://developer.apple.com/library/ios/documentation/uikit/reference/uiview_class/uiview/uiview.html#//apple_ref/occ/instp/UIView/superview)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-23T13:35:59.160

在界面生成器中添加子视图作为超级视图的属性（控制拖动到头文件）。然后`UIViewController`向子视图添加一个属性。在superview的代码中然后做

```
nameOfSubView.superViewPropertyName = self; 
```

# joomla - Joomla 中带有详细描述的图片库

> ID：11612196
> 
> 赞同：0
> 
> 时间：2012-07-23T12:05:58.820
> 
> 标签：joomla, gallery, joomla-extensions, joomla2.5

我需要在 joomla 中制作杂志封面画廊之类的东西，单击一张图片后，它应该打开一个页面，查看者会在其中看到封面图片（他可以以全尺寸打开）和目录以及指向某些内容的链接文章。管理员还应该能够（合理地）轻松地将带有内容的新封面添加到图库中。我更像一个 Drupal 人，所以我问 Joomla 人——实现这一目标的最佳/最简单的方法是什么（包括使用扩展等）？:)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-23T12:34:57.350

为了满足您的需求，您最好使用[Photo Gallery](http://extensions.joomla.org/extensions/photos-a-images/galleries/photo-gallery)组件并将链接从打开 iframe/全尺寸图像更改为文章或[Portfolio](http://extensions.joomla.org/extensions/directory-a-documentation/portfolio)组件，我认为这可能是更简单的选择。

我个人的最爱之一是[BT Content Slider](http://extensions.joomla.org/extensions/news-display/articles-display/articles-showcase/19125)。我已经在多个页面上使用了它并调整了代码以满足我们自己的需求，它就像一个魅力。也会推荐给你。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-29T06:28:32.440

您应该能够在标准的 Joomla 框架内做到这一点。在这种情况下 -

1.  有一个主要类别，每个问题都是一个子类别。
2.  杂志的每一期都是一个新类别，杂志封面将是该类别的图像。
3.  将内容添加为适当类别的文章
4.  显示父类别以获取每个问题的列表。
5.  单击该类别将显示该类别中文章的链接列表。

这绝对可以通过 K2 扩展来完成，但您可以在 Joomla 类别/文章框架中通过一些简单的模板覆盖来完成。

# android - 使用 FreeImage 访问像素数据

> ID：11612197
> 
> 赞同：1
> 
> 时间：2012-07-23T12:06:04.333
> 
> 标签：android, android-ndk

我在我的 android 项目中使用 freeimage.so，如何访问像素数据，即从 SD 卡拍摄的图片的 RGB 组件，我已经在这个主题上搜索了很长时间..任何帮助将不胜感激. 提前谢谢你

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-23T12:21:14.513

好吧，我从以下 URL 获得了解决方案，PDF 格式的完整手册：-

[http://www.google.com/url?sa=t&rct=j&q=&esrc=s&source=web&cd=2&ved=0CFkQFjAB&url=http%3A%2F%2Fgraphics.stanford.edu%2Fcourses%2Fcs148-10-summer%2Fdocs% 2FFreeImage3131.pdf&ei=_0ANUPrFL4vRrQfL0IHJCA&usg=AFQjCNG3TTEnjbAktNJwDMujoWOqZkV7jw](http://www.google.com/url?sa=t&rct=j&q=&esrc=s&source=web&cd=2&ved=0CFkQFjAB&url=http%3A%2F%2Fgraphics.stanford.edu%2Fcourses%2Fcs148-10-summer%2Fdocs%2FFreeImage3131.pdf&ei=_0ANUPrFL4vRrQfL0IHJCA&usg=AFQjCNG3TTEnjbAktNJwDMujoWOqZkV7jw)

# scala - 宏：依赖路径的类型推断混淆

> ID：11612198
> 
> 赞同：3
> 
> 时间：2012-07-23T12:06:12.927
> 
> 标签：scala, scala-2.10

我试图简化 AST 的创建，但收到一条奇怪的错误消息：

```
case class Box(i: Int)
object M {
  import language.experimental.macros
  import scala.reflect.makro.Context
  case class meth(obj: String, method: String)(implicit val c: Context) {
    import c.universe._

    def apply(xs: Tree*) =
      Apply(Select(Ident(obj), newTermName(method)), xs.toList)
  }

  def box(n: Int): Box = macro boxImpl

  def boxImpl(c: Context)(n: c.Expr[Int]): c.Expr[Box] = {
    import c.universe._
    implicit val cc: c.type = c
    n.tree match {
      case arg @ Literal(Constant(_)) =>
        meth("Box", "apply").apply(arg)
    }
  }
} 
```

错误：

```
<console>:26: error: type mismatch;
 found   : c.universe.Literal
 required: _2.c.universe.Tree where val _2: M.meth
 possible cause: missing arguments for method or constructor
               meth("Box", "apply").apply(arg)
                                          ^ 
```

是否可以将正确的类型推断到类中`meth`？或者是否有解决该问题的方法？

编辑：基于@retronyms 的回答，我得到了这个工作：

```
object M {
  import language.experimental.macros
  import scala.reflect.makro.Context

  def meth(implicit c: Context) = new Meth[c.type](c)

  class Meth[C <: Context](val c: C) {
    import c.universe._

    def apply(obj: String, method: String, xs: Tree*) =
      Apply(Select(Ident(obj), newTermName(method)), xs.toList)
  }

  def box(n: Int): Box = macro boxImpl

  def boxImpl(c: Context)(n: c.Expr[Int]): c.Expr[Box] = {
    import c.universe._
    implicit val cc: c.type = c
    n.tree match {
      case arg @ Literal(Constant(_)) =>
        c.Expr(meth.apply("Box", "apply", arg))
    }
  }
} 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-07-23T12:19:52.433

当前不允许构造函数具有依赖方法类型 ( [SI-5712](https://issues.scala-lang.org/browse/SI-5712) )。它正在被修复，希望是 2.10.1 或 2.11。

同时，您可以按照[我在macrocosm中使用](https://github.com/retronym/macrocosm/blob/master/src/main/scala/com/github/retronym/macrocosm/Macrocosm.scala#L303)[的模式](https://github.com/retronym/macrocosm/blob/master/src/main/scala/com/github/retronym/macrocosm/Macrocosm.scala#L428) 在宏实现中重用代码。

# mobile-os - 如何为 Firefox OS 编写应用程序

> ID：11612210
> 
> 赞同：13
> 
> 时间：2012-07-23T12:07:01.600
> 
> 标签：mobile-os, firefox-os

我想为[Firefox OS](http://blog.mozilla.org/blog/2012/07/02/firefox-mobile-os/)编写我的应用程序。使用什么样的语言（如 Android 的 Java 和 iOS 的 Objective C++）和工具（如 Eclipse、Xcode）？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-07-26T17:21:10.797

适用于 Firefox OS（以前称为 Boot to Gecko）的应用程序是使用 HTML 5 和 Javascript 开发的。

参考：

[http://www.mozilla.org/en-US/b2g/](http://www.mozilla.org/en-US/b2g/)

[https://developer.mozilla.org/en/Mozilla/Boot_to_Gecko/](https://developer.mozilla.org/en/Mozilla/Boot_to_Gecko/)

您可以使用任何您喜欢的 Web 开发工具。Firefox 有很多内置工具可供查看：[https](https://marketplace.mozilla.org/developers/docs/devtools) ://marketplace.mozilla.org/developers/docs/devtools响应模式工具对于 Firefox OS/移动应用程序非常有用。

除了工具之外，最重要的学习技能是构建 Web 应用程序的技术：[https ://marketplace.mozilla.org/developers/docs/references](https://marketplace.mozilla.org/developers/docs/references)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-11-28T10:23:39.133

如果您是 Web 开发人员，那么我必须说您已经是 Firefox OS 的大师了！这都是关于 HTML5、CSS 和 Javascript 的。可以使用任何开发工具，如 Eclipse、Visual Studio、Notepad++、WebStorm 等。但是 Web 应用程序和 Firefox OS 应用程序之间只有一个区别。您必须在项目的根目录中添加[manifest.webapp文件。](https://developer.mozilla.org/en-US/Apps/Build/Manifest)假设您的项目文件如下所示

1.  css
2.  js
3.  索引.html

现在您必须在上面添加一个 manifest.webapp 文件，它应该如下所示

```
{
  "name": "My App",
  "description": "My elevator pitch goes here",
  "launch_path": "/index.html",
  "icons": {
    "512": "/img/icon-512.png",
    "128": "/img/icon-128.png"
  },
  "developer": {
    "name": "Your name or organization",
    "url": "http://your-homepage-here.org"
  },
  "default_locale": "en"
} 
```

这样你的应用就准备好了！下一步是什么？应用部署......

您可以通过以下方式部署您的应用程序..

[打包应用程序](https://developer.mozilla.org/en-US/Marketplace/Options/Packaged_apps)：所有文件都将驻留在您的移动 [托管应用程序](https://developer.mozilla.org/en-US/Marketplace/Options/Hosted_apps)中：文件将托管在 IIS、Apache 等远程服务器中。移动设备仅知道 manifest.webapp 文件 URL。

这就是关于 Firefox os 应用程序开发的全部内容。我希望这篇文章能对未来的初学者有所帮助，因为我回答这个问题已经很晚了。

# sql-server - 基于 AD 登录的 SSRS BIDS 文本框可见性

> ID：11612212
> 
> 赞同：2
> 
> 时间：2012-07-23T12:07:07.403
> 
> 标签：sql-server, sql-server-2008, reporting-services, ssrs-2008, bids

我有一个文本框，我用它作为打开网页的链接。

是否有可能使用下面看到的可见性选项卡来挑选能够使用 AD 登录查看/使用此框的人。

基本上会有 50 多个用户看到我想要链接的屏幕，但我只希望其中 1 或 2 个用户能够看到该特定链接。

有什么想法吗？

![在此处输入图像描述](../Images/f86b96e11cb97b681a30f9d3fb7f0ca2.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-23T12:36:28.383

```
=iif(User!UserID="domain\user_ad",FALSE,TRUE) 
```

# php - 如果没有预加载 Yii Bootstrap 将无法工作

> ID：11612214
> 
> 赞同：7
> 
> 时间：2012-07-23T12:07:22.007
> 
> 标签：php, yii, twitter-bootstrap, yii-extensions

我在应用程序中使用[Yii Bootstrap已经有一段时间了。](http://www.yiiframework.com/extension/bootstrap/)现在，我有一个部分，其中加载的 CSS 文件会导致问题，我不想在该控制器中加载引导扩展。

在我的配置文件中，我将引导程序设置为预加载：

```
'preload' => array('log', 'bootstrap') 
```

我现在已经从预加载数组中删除了引导程序，并且它停止工作，说别名不正确：

> 别名“bootstrap.widgets.BootNavbar”无效。确保它指向现有目录或文件。

别名虽然已在配置文件的组件部分中定义，但在预加载引导组件时可以正常工作：

```
'bootstrap' => array(
    'class' => 'ext.bootstrap.components.Bootstrap'
 ), 
```

我可以做些什么来使引导扩展工作而不预加载它？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-09-22T20:37:09.213

只需调用这个：

```
Yii::app()->getComponent("bootstrap"); 
```

`'preload' => 'bootstrap'`实际上触发了这个命令。如果你只是`Yii::app()->bootstrap->init()`按照 Blizz 的建议打电话，你最终会打电话`init()`两次，这可能是有害的。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-11-09T07:25:52.207

我以这种方式在模块 init() 方法中创建引导扩展。不需要预加载。

```
 if (!Yii::app()->hasComponent('bootstrap')) {
            Yii::setPathOfAlias('bootstrap', realpath(dirname(__FILE__) . '/extensions/bootstrap'));
            Yii::createComponent('bootstrap.components.Bootstrap')->init();
        } 
```

如果您想在 Yii::app() 下管理 Bootstrap 组件（例如 hasComponent 方法），您可以更改最后一行：

```
Yii::app()->setComponent('bootstrap',Yii::createComponent('bootstrap.components.Bootstrap')); 
```

此解决方案不需要预加载或 init()，但您必须手动将别名设置为 Boostrap 文件夹。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-23T15:49:32.003

您可以随时导入它：

```
Yii::import('ext.bootstrap.components.Bootstrap'); 
```

# zend-framework - Zend：在模块中使用表单

> ID：11612215
> 
> 赞同：1
> 
> 时间：2012-07-23T12:07:34.533
> 
> 标签：zend-framework, module, zend-form

我正在尝试将表单与模块一起使用，它们应该存储在模块内。所以起初我的文件结构：

```
application/
   (...other directories)
   modules/
       group/
          controllers/
             IndexController.php
             (...controllers)
          forms/
             Create.php
          views/
             scripts/
                (...view scripts)
          Bootstrap.php 
```

在 IndexController 中，我试图通过以下方式设置表单

```
new Group_Form_Create() 
```

Create.php 中的类当然是 Group_Form_Create。我收到以下错误消息：

```
Fatal error: Class 'Group_Form_Create' not found in (...)\application\modules\group\controllers\IndexController.php on line 380 
```

带有 Group_Bootstrap 类的 Bootstrap.php 只是一个空类。实际上，我使用的是默认的 Zend 结构，但无论如何它都不起作用。问题出在哪里或可能的解决方案有什么想法？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-23T12:57:53.020

在我的模块引导程序（APPLICATION_PATH/modules/group/Bootstrap.php）中，如果使用以下代码：

```
 //Loads the autoloader resources
    $this->_moduleName = 'group';
    $resourceLoader = new Zend_Loader_Autoloader_Resource(array(
            'basePath' => APPLICATION_PATH ."/modules/".$this->_moduleName."/",
            'namespace' => '',
            'resourceTypes' => array(
                    //Tells the application where to find the forms
                    'form' => array(
                            'path' => 'forms/',
                            'namespace' => ucfirst($this->_moduleName).'_Form_'
                    ),
                    //Tells the application where to find the models
                    'model' => array(
                            'path' => 'models/',
                            'namespace' => ucfirst($this->_moduleName).'_Model_'
                    )
            )
    )); 
```

然后我像这样调用表格或模型：

```
$frm = new Group_Form_Create(); 
```

我在所有模块中都使用了相同的代码段，并且只更改了 $this->_moduleName; 的值。每一次。

希望这可以帮助 ！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-23T13:32:30.327

听起来您的模块引导程序没有运行。这些是由模块资源触发的，如果您有以下内容，则会加载该资源：

```
resources.modules[] = "" 
```

在你的`application.ini`. 因此，如果它不存在，请添加它。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-23T12:19:15.570

理想情况下，它应该开箱即用。

在你的引导程序中添加这个：

```
protected function _initAutoload() {

    $autoloader = new Zend_Application_Module_Autoloader(array(
        'namespace' => 'Group_',
        'basePath' => dirname(__FILE__),
      ));

    Zend_Loader_Autoloader::getInstance()->setFallbackAutoloader(true);
    return $autoloader; 
```

}

# javascript - 在 Windows 8 Metro HTML5 应用程序中调整图像大小的同时保持其质量？

> ID：11612218
> 
> 赞同：3
> 
> 时间：2012-07-23T12:07:52.660
> 
> 标签：javascript, html, windows-8, microsoft-metro, windows-runtime

当我将图像拉伸到分区大小时，图像质量下降了。是否可以在保持 Windows 8 Metro HTML5 应用程序质量的同时调整图像大小？图像尺寸为 360x480 像素。

HTML5 代码：

```
 <div id="imageSection" >
        <input type="image" id="homepageimage" >
    </div> 
```

css文件代码：

```
 #imageSection { 
     height: 90%;   
       }
 #homepageimage { 
width: 100%;   
background-image: url(../images/kidsphoto.jpg);
background-size:100% 100%;
background-repeat:no-repeat;
height:100% 
```

}

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-03T01:29:51.173

假设您在“减小图像大小”时遇到问题，那么这是因为 IE10 的插值模式仅支持低质量（最近邻），因此调整大小的图像看起来质量低于原始图像。

在*IE7 到 IE9 中*，您可以使用 CSS 属性 -ms-interpolation-mode

```
-ms-interpolation-mode: bicubic; 
```

但这**在 IE10 中不再受支持**（如图）。

不幸的是，没有一个简单的解决方法。有一些[CPU 密集型解决方法](https://stackoverflow.com/questions/2303690/resizing-an-image-in-an-html5-canvas)，但如果可以的话，最好以您实际需要的大小存储图像。还要确保通过提供更大的图像变化（大小为 180% 和 140%）来[支持高 DPI 系统。](http://msdn.microsoft.com/en-us/library/windows/apps/hh465362.aspx)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-23T15:21:13.380

为防止图像质量下降，请使用您想要显示的最高分辨率的图像。如果图像是 360x480 并且您希望以高于该分辨率的分辨率（例如 720x960）显示，则质量会下降。解决此问题的唯一方法是使用分辨率为 720x960 的图像。

# c# - 在反序列化之前获取 WCF 消息正文

> ID：11612219
> 
> 赞同：3
> 
> 时间：2012-07-23T12:07:53.457
> 
> 标签：c#, wcf, message

我正在实现 WCF 服务，该服务公开了一个方法，该方法`[OperationContract]`是`[XmlSerializerFormat]`. 我有时会收到正文不是有效 XML 的请求。在这种情况下，我想记录原始正文，以便知道为什么它不构成有效的 XML。但是，我无法从 Message 对象中获取它，请参阅我的尝试（通过实现 IDispatchMessageInspector 接口）：

```
 public object IDispatchMessageInspector.AfterReceiveRequest(ref Message request, IClientChannel channel, InstanceContext instanceContext)
    {
        request.ToString();  // "... Error reading body: System.Xml.XmlException: The data at the root level is invalid. Line 1, position 1\. ..."
        request.WriteBody(...);   // Serialization Exception, also in WriteMessage and other Write* methods
        request.GetReaderAtBodyContents(...);   // Same
        HttpRequestMessageProperty httpRequest = (HttpRequestMessageProperty)request.Properties[HttpRequestMessageProperty.Name];  // no body in httpRequest
    } 
```

查看手表时， request.messageData 似乎包含正文 - 但这是一个私人成员。

如何在不尝试反序列化的情况下获取消息缓冲区？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2018-05-02T10:02:10.137

是的，您需要[自定义 MessageEncoder](https://docs.microsoft.com/en-us/dotnet/api/system.servicemodel.channels.messageencoder)，与消息检查器 (IDispatchMessageInspector / IClientMessageInspector) 不同，它会看到原始字节内容，包括任何格式错误的 XML 数据。

然而，如何实现这种方法并非易事。您必须将标准[textMessageEncoding](https://docs.microsoft.com/en-us/dotnet/framework/configure-apps/file-schema/wcf/textmessageencoding)包装为自定义[绑定元素](https://msdn.microsoft.com/en-us/library/system.servicemodel.channels.textmessageencodingbindingelement%28v=vs.110%29.aspx)并调整[配置](https://docs.microsoft.com/en-us/dotnet/framework/wcf/samples/custom-binding-transport-and-encoding)文件以使用该自定义绑定。

您还可以看到我在项目中是如何做到的——[包装](https://github.com/capslocky/WcfSoapLogger/blob/master/src/Library/WcfSoapLogger/EncodingExtension/LoggingBindingElement.cs)textMessageEncoding、日志[编码器](https://github.com/capslocky/WcfSoapLogger/blob/master/src/Library/WcfSoapLogger/EncodingExtension/LoggingEncoder.cs)、自定义绑定[元素](https://github.com/capslocky/WcfSoapLogger/blob/master/src/Library/WcfSoapLogger/EncodingExtension/LoggingExtensionElement.cs)和[配置](https://github.com/capslocky/WcfSoapLogger/blob/master/src/UsageExamples/ExampleBeta/Client/App.config)。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-07-23T12:10:02.587

**更新**

遇到此问题的其他一些人似乎已经创建了[Customer Message Encoder](http://msdn.microsoft.com/en-us/library/ms751486.aspx)。

> 消息编码绑定元素序列化传出消息并将其传递给传输，或者从传输接收消息的序列化形式并将其传递给协议层（如果存在）或应用程序（如果不存在）。

# c - tun程序不创建设备节点

> ID：11612227
> 
> 赞同：3
> 
> 时间：2012-07-23T12:08:11.790
> 
> 标签：c, ip, tun

我正在关注[http://backreference.org/2010/03/26/tuntap-interface-tutorial/](http://backreference.org/2010/03/26/tuntap-interface-tutorial/)

以下代码在我以 root 身份运行时成功获取 fd（通常为 3），但它不会创建 /dev/tun77 设备。

应该是？

```
#include <stdio.h>
#include <stdlib.h>
#include <net/if.h>
#include <fcntl.h>
#include <sys/stat.h>
#include <string.h>
#include <linux/if_tun.h>
#include <linux/ioctl.h>

#define IFNAMSIZ 16

int tun_alloc(char *dev, int flags) {

  struct ifreq ifr;
  int fd, err;
  char *clonedev = "/dev/net/tun";

  /* Arguments taken by the function:
   *
   * char *dev: the name of an interface (or '\0'). MUST have enough
   *   space to hold the interface name if '\0' is passed
   * int flags: interface flags (eg, IFF_TUN etc.)
   */

   /* open the clone device */
   if( (fd = open(clonedev, O_RDWR)) < 0 ) {
     return fd;
   }

   /* preparation of the struct ifr, of type "struct ifreq" */
   memset(&ifr, 0, sizeof(ifr));

   ifr.ifr_flags = flags;   /* IFF_TUN or IFF_TAP, plus maybe IFF_NO_PI */

   if (*dev) {
     /* if a device name was specified, put it in the structure; otherwise,
      * the kernel will try to allocate the "next" device of the
      * specified type */
     strncpy(ifr.ifr_name, dev, IFNAMSIZ);
   }

   /* try to create the device */
   if( (err = ioctl(fd, TUNSETIFF, (void *) &ifr)) < 0 ) {
     close(fd);
     return err;
   }

  /* if the operation was successful, write back the name of the
   * interface to the variable "dev", so the caller can know
   * it. Note that the caller MUST reserve space in *dev (see calling
   * code below) */
  strcpy(dev, ifr.ifr_name);

  /* this is the special file descriptor that the caller will use to talk
   * with the virtual interface */
  return fd;
}

int main(void) {
  char tun_name[IFNAMSIZ];
  int nread, tun_fd;
  char buffer[2048];
  /* Connect to the device */
  strcpy(tun_name, "tun77");
  tun_fd = tun_alloc(tun_name, IFF_TUN | IFF_NO_PI);  /* tun interface */

  if (tun_fd < 0){
    perror("Allocating interface");
    exit(1);
  } else {
    printf("connected to %s on fd: %i\n", tun_name, tun_fd);
  }

  /* Now read data coming from the kernel */
  while (1) {
    /* Note that "buffer" should be at least the MTU size of the interface, eg 1500 bytes */
    nread = read(tun_fd, buffer, sizeof(buffer));
    if (nread < 0) {
      perror("Reading from interface");
      close(tun_fd);
      exit(1);
    }

    /* Do whatever with the data */
    printf("Read %d bytes from device %s\n", nread, tun_name);
  }
  return EXIT_SUCCESS;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-24T08:10:46.353

[Waldner 在http://backreference.org/2010/03/26/tuntap-interface-tutorial/](http://backreference.org/2010/03/26/tuntap-interface-tutorial/)上回答了这个问题：

两者都不。Linux 中的网络接口不出现在 /dev 下；您将看到的唯一内容是 /dev/net/tun，这是创建 tun/tap 接口的第一步应该打开的设备。

如果您运行示例代码，您将能够在程序运行时使用“ip link”查看和配置您创建的界面；当程序终止时，界面消失。

或者，可以使接口保持不变，如所解释的那样，在这种情况下，它将在程序终止后继续存在。

在任何情况下，都不会在 /dev 下创建任何设备（除了已经提到的 /dev/net/tun）。

# vbscript - 使用 Vbscript 从 xml 检索所有 XPATH 或

> ID：11612228
> 
> 赞同：0
> 
> 时间：2012-07-23T12:08:15.597
> 
> 标签：vbscript, qtp

如何从所有这些节点中检索所有有效的 XPATH？

----------------示例 XML---------------------

```
<name version="1.0">
<document>
<documentId>0107</documentId>
<NameDetail>
<firstname>SAM</firstname>
<internalreferenceNumber>12345</internalreferenceNumber>
</NameDetail>
<NameDetail>
<firstname>TECHNO</firstname>
<internalreferenceNumber>12346</internalreferenceNumber>
</NameDetail>
</document>
</name> 
```

对于上述 XML，输出将是：

```
XPATH for name = "/name"
XPATH for documentId = "/document/documentId"
XPATH for firstname = ""/document/NameDetail[1]/firstname"
XPATH for firstname = "/document/NameDetail[2]/firstname" 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-23T13:36:24.010

QTP 不支持从 XML 文档中提取 XPath，您必须自己将其作为普通的 VBScript 进行，也许通过使用 Microsoft 的[XMLDOM 对象](http://msdn.microsoft.com/en-us/library/aa468547.aspx)。

```
Set xmlDoc = CreateObject( "Microsoft.XMLDOM" ) 
```

# magento - 如何在 Magento 的灯箱弹出窗口中显示时事通讯注册？

> ID：11612232
> 
> 赞同：3
> 
> 时间：2012-07-23T12:08:33.207
> 
> 标签：magento, popup, modal-dialog, lightbox, newsletter

我不是编码员，来这里寻求帮助。我需要一种在页面加载时或在 magento 中几秒钟后在灯箱中显示时事通讯注册的方法，例如 www.popupdomination.com 或 www.tylertool.com。我搜索了所有网络并找到了一些脚本，但正如我所说，我不是编码员，也找不到任何类型的模块可以做到这一点。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-06-13T14:39:44.053

我可以理解，您想在 magento 主页加载后显示新闻订阅的弹出窗口。在 magento 许多可用的扩展程序中，我在这里分享一个免费的 magento 扩展程序，它可以满足您的要求。

[http://www.magentocommerce.com/magento-connect/newsletter-subscription-with-free-gift-coupon-popup.html](http://www.magentocommerce.com/magento-connect/newsletter-subscription-with-free-gift-coupon-popup.html)

如果您有任何疑问，请告诉我

# r - 根据向量中的值从数据框中选择行

> ID：11612235
> 
> 赞同：89
> 
> 时间：2012-07-23T12:08:48.557
> 
> 标签：r, subset, r-faq

我有类似这样的数据：

```
dt <- structure(list(fct = structure(c(1L, 2L, 3L, 4L, 3L, 4L, 1L, 2L, 3L, 1L, 2L, 3L, 2L, 3L, 4L), .Label = c("a", "b", "c", "d"), class = "factor"), X = c(2L, 4L, 3L, 2L, 5L, 4L, 7L, 2L, 9L, 1L, 4L, 2L, 5L, 4L, 2L)), .Names = c("fct", "X"), class = "data.frame", row.names = c(NA, -15L)) 
```

我想根据`fct`变量中的值从此数据框中选择行。例如，如果我希望选择包含“a”或“c”的行，我可以这样做：

```
dt[dt$fct == 'a' | dt$fct == 'c', ] 
```

产生

```
1    a 2
3    c 3
5    c 5
7    a 7
9    c 9
10   a 1
12   c 2
14   c 4 
```

正如预期的那样。但是我的实际数据更复杂，我实际上想根据向量中的值选择行，例如

```
vc <- c('a', 'c') 
```

所以我尝试了

```
dt[dt$fct == vc, ] 
```

但这当然行不通。我知道我可以编写一些代码来循环遍历向量并拉出所需的行并将它们附加到新的数据框中，但我希望有一种更优雅的方式。

那么如何根据向量的内容过滤/子集我的数据`vc`呢？

* * *

## 回答 #1

> 赞同：154
> 
> 时间：2012-07-23T12:13:50.823

看看`?"%in%"`。

```
dt[dt$fct %in% vc,]
   fct X
1    a 2
3    c 3
5    c 5
7    a 7
9    c 9
10   a 1
12   c 2
14   c 4 
```

你也可以使用`?is.element`：

```
dt[is.element(dt$fct, vc),] 
```

* * *

## 回答 #2

> 赞同：35
> 
> 时间：2017-01-29T11:34:51.877

与上面类似，使用`filter`from `dplyr`：

```
filter(df, fct %in% vc) 
```

* * *

## 回答 #3

> 赞同：15
> 
> 时间：2017-03-29T17:55:33.603

另一种选择是使用 keyed `data.table`：

```
library(data.table)
setDT(dt, key = 'fct')[J(vc)]  # or: setDT(dt, key = 'fct')[.(vc)] 
```

这导致：

```
 fct X
1:   a 2
2:   a 7
3:   a 1
4:   c 3
5:   c 5
6:   c 9
7:   c 2
8:   c 4 
```

这是做什么的：

*   `setDT(dt, key = 'fct')`将 a转换`data.frame`为 a `data.table`（这是 a 的增强形式`data.frame`），并将`fct`列设置为键。
*   接下来，您可以只使用带有 的`vc`向量进行子集化`[J(vc)]`。

注意：当键是因子/字符变量时，您也可以使用，但当是数字向量`setDT(dt, key = 'fct')[vc]`时，这将不起作用。`vc`When`vc`是一个数字向量并且没有包含在`J()`or中`.()`，`vc`将作为 rowindex 工作。

可以在小插图[*Keys and fast binary search based subset*](https://cloud.r-project.org/web/packages/data.table/vignettes/datatable-keys-fast-subset.html)*中找到对键*和子集概念的更详细说明。[](https://cloud.r-project.org/web/packages/data.table/vignettes/datatable-keys-fast-subset.html)

 *@Frank 在评论中建议的替代方案：

```
setDT(dt)[J(vc), on=.(fct)] 
```

* * *

当`vc`包含不存在的值时`dt`，您需要添加`nomatch = 0`：

```
setDT(dt, key = 'fct')[J(vc), nomatch = 0] 
```

或者：

```
setDT(dt)[J(vc), on=.(fct), nomatch = 0] 
```*

# java - Quartz：根据配置的时间表，给定的触发器永远不会触发

> ID：11612236
> 
> 赞同：1
> 
> 时间：2012-07-23T12:08:49.173
> 
> 标签：java, cron, quartz-scheduler

我在安排我的工作时收到“基于配置的计划，给定的触发器永远不会触发”错误。我尝试将“.startNow()”添加到触发器，但这并没有解决它。我不明白我做错了什么。

```
JobDetail jobDetail = newJob(DeploymentJob.class)
        .withIdentity(scheduleName)
        .usingJobData("uploadLocation", deployment.getUploadDir())
        .build();

// Add the job to the Scheduler
scheduler.addJob(jobDetail, true);

// Create the trigger with cron expression
Trigger trigger = newTrigger()
       .withIdentity(scheduleName)
       .withSchedule(cronSchedule(cron))
       .forJob(jobDetail)
       .build();

// Tell quartz to schedule the job using our trigger
scheduler.scheduleJob(jobDetail, trigger);                  <--- Problem line.

scheduler.start(); 
```

提前感谢您的回答！非常感激！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-03T07:07:28.200

您的设置时间超出范围。Spring Quartz 永远不会执行超出时间范围的任务。因此请更改设置时间。

# php - 硒服务器超时问题

> ID：11612237
> 
> 赞同：0
> 
> 时间：2012-07-23T12:08:51.360
> 
> 标签：php, selenium, phpunit, selenium-rc

我已经安装了 selenium IDE 和 selenium 服务器（selenium RC）......在使用 phpunit 在命令提示符下运行测试用例时，它说错误如

> 在“http://localhost:4444/selenium-server/driver/”访问 Selenium 服务器时响应无效：30000 毫秒后超时

我更改了 selenium IDE 选项超时属性，并且在启动服务器时我给了喜欢

> java -jar selenium-server-standalone-2.24.1.jar [-timeout 7000000]

仍然同样的问题说超时 30000 毫秒

如果有人可以提供帮助，那就太好了

提前致谢 ........

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-24T19:58:24.357

刚看到phpunit-selenium的代码，好像不支持2.23以上的selenium-server。您应该下载早期版本的 selenium 服务器（特别是 2.23）并运行它。它应该根据他们的 READ-ME 文件工作。

尽管如此，我看到他们用来访问服务器的 url 即被`http://localhost:4444/selenium-server/driver/`Selenium 1 使用，而不是 webdriver。[所以我宁愿从http://release.seleniumhq.org/](http://release.seleniumhq.org/)下载更旧版本的 os selnium并尝试一下。

还有一件事。定义超时的正确方法`java -jar selenium-server-standalone-2.24.1.jar -timeout 7000000`是不使用方括号。

希望这可以帮助.. ：）

# c - 有没有办法在C中获取数组中的元素数？

> ID：11612238
> 
> 赞同：0
> 
> 时间：2012-07-23T12:09:00.523
> 
> 标签：c, arrays

我想知道是否有任何方法可以像`Array#size`ruby​​ 一样获取数组中元素的数量，所以我想出了

```
int a;
int ary[] = {1,2,3,4,5,6};
int number_of_elements =sizeof(ary)/sizeof(a);
for(index = 0;index < number_of_element);index++){
    printf("the %d element of array is %d",index,*(ptr + index));
  } 
```

它有效，但我想要一种更优雅的方式来做到这一点。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-23T12:10:27.340

好吧，你可以使用这个宏。

```
#define N_ELEM(t) (sizeof(t) / sizeof(*t)) 
```

是不是很优雅？

（当然，它不适用于动态数组）

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-23T12:10:15.110

不，没有简单的方法来计算 C 中数组中的元素数量，*除非*您提供自己的分隔符值来指示数组的结尾（类似于`'\0'`在字符串中的使用方式。）

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-23T12:20:30.100

可能还有比这更优雅的解决方案。

```
#define number_of_elements sizeof(arr)/sizeof(arr[0]) 
```

或者

```
const int number_of_elements = sizeof(arr)/sizeof(arr[0]) 
```

还要看看： [如何找到'sizeof'（指向数组的指针）？](https://stackoverflow.com/questions/492384/how-to-find-the-sizeofa-pointer-pointing-to-an-array)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-23T14:01:50.043

没有优雅或简单的方法，甚至`sizeof`技巧也有限制；将数组表达式传递给函数时，函数接收的是指针值，而不是数组。所以像

```
void foo(int a[])
{
  size_t count = sizeof a / sizeof a[0];
  ...
} 
```

将不起作用，因为在函数参数声明的上下文中，`T a[]`并且`T a[N]`与`T *a`;相同 `a`是一个*指针*值，而不是一个数组，所以你得到一个*指针*的`int`大小除以第一个元素的大小，这不是你想要的。

基本上，您必须自己跟踪数组的大小。您知道创建它时它有多大，因此您必须保留该信息并将其与数组一起传递：

```
void foo(int *a, size_t asize)
{
   ...
}

int main(void)
{
   int arr[SOME_SIZE];
   ...
   foo(arr, SOME_SIZE);
   ...
} 
```

# wpf - 在自定义用户控件中使用 DependencyProperty 更新源

> ID：11612242
> 
> 赞同：0
> 
> 时间：2012-07-23T12:09:13.247
> 
> 标签：wpf, user-controls, dependency-properties

当自定义 UserControl 的目标 DependencyProperty 更改时，绑定源未更新。

源是一个用 MEF 加载到我的自定义 UserControl 的 DataContext 中的 ViewModel。

我的绑定在 MyUserControl 的根 XAML 中看起来像这样

```
// MyUserControl.xaml
<MyUserControlBase x:Class="MyUserControl" MyDependencyProperty="{Binding ViewModelProperty}"> 
```

如果我将 MyDependencyProperty 与 FrameworkPropertyMetadata 一起使用并在属性更改时使用回调函数，我可以执行以下操作，效果很好

```
// MyUserControlBase.cs
private static void MyDependencyProperty_Changed(DependencyObject depObj, DependencyPropertyChangedEventArgs args)
{
    var filter = (UserControl )depObj;
    var vm = (ViewModel)filter.DataContext;
    vm.ViewModelProperty= (VMPropType)args.NewValue;
} 
```

在继承 UserControl 的 MyUserControlBase 中注册 DependencyProperty。

```
// MyUserControlBase.cs
public static readonly DependencyProperty MyDependencyPropertyProperty = DependencyProperty.Register("MyDependencyProperty",
            typeof(VMPropType),
            typeof(MyUserControlBase),
            new FrameworkPropertyMetadata(null, MyDependencyProperty_Changed)); 
```

但是，为什么我不能在 XAML 中完成简单的双向绑定工作？

输出窗口显示没有绑定失败。我可以看到正在调用 ViewModel.ViewModelProperty getter。一旦 MyDependencyProperty 更改，就不是 setter。

事件的顺序似乎没有问题。ViewModel 是在 DependencyProperty 第一次更改之前创建的。

我还查看了在[WPF 用户控件中设置绑定到自定义 DependencyProperty](https://stackoverflow.com/questions/2284876/setting-up-binding-to-a-custom-dependencyproperty-inside-a-wpf-user-control?rq=1) 但他的问题似乎略有不同，因为我实际上是从我自己的持有 DependencyProperty 的基类继承的。

感谢您的任何帮助。

**编辑：带有示例解决方案的链接。** [解决方案 zip 在这里](http://www.qfpost.com/file/d?g=CvKnsrfI5)

抱歉，链接看起来很吓人，我不知道很多快速文件共享网站。如果它的评论不好，我会尽快删除它，但它似乎没问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-23T13:15:08.333

您是否将 ViewModelProperty 公开为常规属性..

通常您会执行以下操作....

```
public static readonly DependencyProperty ViewModelPropertyProperty = DependencyProperty.Register("ViewModelProperty", 
            typeof(VMPropType), 
            typeof(MyUserControlBase), 
            new FrameworkPropertyMetadata(null, ViewModelProperty_Changed)); 

public VMPropType ViewModelProperty {
    get { return (VMPropType)GetValue(ViewModelPropertyProperty); }
    set { SetValue(ViewModelPropertyProperty,value); }
} 
```

编辑——评论后。

您什么时候检查属性是否已更改？默认情况下，WPF 绑定仅在失去焦点时更新值，您更改绑定的 UpdateSourceTrigger 属性以更改此行为。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-23T12:47:56.503

**答案已更新/无关信息已删除**

查看示例中的代码后，我看到了问题所在。你有这个“选择器”控件。在`BindDependencies`您设置绑定的方法中`MyControlBase.MyDependencyProperty`。但同时您也将此属性绑定到控件的数据上下文（在 中`MyUserControl.xaml`）。实际上，这意味着在该`BindDependencies`方法中，您正在**覆盖**与视图模型的绑定，因此在该方法之后它不活动 - 您可以通过在调用之前和之后闯入`SetBinding`和调用来自己看到这一点`BindingOperations.GetBindingExpression(control, MyUserControlBase.MyPropertyDependencyProperty)`- 绑定是不同的。这就是您的代码不起作用的原因。我想你将不得不找到另一种在那里转移价值的方式:)

**一些附加信息**

在 WPF 中，一个属性只能是一个绑定的目标。这实际上是非常合乎逻辑的——如果一个属性绑定到两个源——它应该使用哪一个？在这种情况下，绑定被标记为的`OneWayToSource`事实并不重要，因为它仍然算作以控件属性为目标的绑定。

您可以调查并查看它是否适合您的一种方法是[MultiBinding](http://msdn.microsoft.com/en-us/library/system.windows.data.multibinding.aspx) - 它确实允许通过实现您自己的`IMultiValueConverter`. 您可以在 MSDN 上提供的链接中找到更多信息。

# asp.net - 第一个位置大写字母后跟最多 5 个数字的正则表达式

> ID：11612244
> 
> 赞同：0
> 
> 时间：2012-07-23T12:09:19.743
> 
> 标签：asp.net, regex, numbers, uppercase

我想做一个正则表达式，检查第一个位置的大写字母，后跟最多 5 个数字

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-23T12:10:21.390

这个正则表达式应该工作：

```
^[A-Z]\d{0,5}$ 
```

此断言大写字母，后跟 0 到 5 位数字字符。

# ios - 以这种方式在 UIViewController 之间切换是否正确？

> ID：11612246
> 
> 赞同：0
> 
> 时间：2012-07-23T12:09:22.820
> 
> 标签：ios, uiviewcontroller

我想使用我自己的控制器在 uiviewcontrollers 之间导航。因此，我可以在我的视图之间进行自定义转换。

我做了一些有效的事情，但我不确定它是否正确？以后会不会出现与内存相关的问题？...我不确定所有内容都以正确的方式释放。

谢谢你的帮助！

这是我的代码：

在我的 AppDelegate 中，当它启动时：

```
self.rootVC = [[[MenuView alloc] initWithNibName:@"MenuView" bundle:nil] autorelease];
[self.window addSubview:self.rootVC.view]; 
```

在我的AppDelegate中，UIViewController之间切换的方法：

```
-(void) changeRootController: (NSString*) ctrlName{

    UIViewController *oldVC = self.curVC;
    UIViewController *newVC;

    if(ctrlName == @"Studio"){
        newVC = [[StudioView alloc] initWithNibName:@"StudioView" bundle:nil];
    }
    else if(ctrlName == @"Menu"){
        newVC = [[MenuView alloc] initWithNibName:@"MenuView" bundle:nil];
    }

    self.curVC = newVC;

    [UIView transitionWithView:self.window
            duration:1.0
            options:UIViewAnimationOptionCurveEaseIn
            animations:^{
                newVC.view.transform = CGAffineTransformConcat(newVC.view.transform, CGAffineTransformMakeTranslation(-1024, 0));
                [self.rootVC.view addSubview:newVC.view];
                newVC.view.transform = CGAffineTransformConcat(newVC.view.transform, CGAffineTransformMakeTranslation(1024, 0));
                oldVC.view.transform = CGAffineTransformConcat(oldVC.view.transform, CGAffineTransformMakeTranslation(1024, 0));
            } 
            completion:^(BOOL finished){
                if(finished){
                    [oldVC release];
                }
            }
     ];
} 
```

我在 UIViewController 中切换视图如下：

```
AppDelegate *ad = (AppDelegate*)[[UIApplication sharedApplication] delegate];
[ad changeRootController:@"Studio"]; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-23T12:19:15.230

newVC 没有发布。

该块应保留 newVc 因此在您的 transitionWithView 之后您应该调用。（函数的最后一行）

```
[newVC autorelease]; 
```

那是假设 self.curVC 属性很强或保留

# .net - 使用带有“代码优先”模式的 Entity Framework 4.0 时，如何防止标识列上的自动递增

> ID：11612259
> 
> 赞同：2
> 
> 时间：2012-07-23T12:10:04.517
> 
> 标签：.net, entity-framework, ef-code-first

我正在定义 POCO，与 Entity Framework 4.0 的 Code First 功能一起使用。

但是由于我的数据来自外部源，并且我想保持标识列与外部源相同，所以我想自己设置 ID。

在调用 DbContext.Add() 和 context.SaveChanges() 之前，我在代码中设置了 ID，但 ID 值被忽略并由 DB 列上定义的自动增量 (AI) 设置。

数据库是 mySQL，由 EF 自动生成。

有谁知道如何防止在 ID 列上创建 AI 属性，或者尽管列是这样定义的，但仍显式设置实体 ID？

**编辑**：我从@flem 得到的答案对我有用。但是我也需要一个稍微不同的场景才能工作：是否可以以这样的方式定义 POCO，当我设置值时它会使用它，而当我不设置值时，它会自动递增？根据[this mySQL forum answer](http://forums.devshed.com/mysql-help-4/identity-insert-286989.html) mySQL应该可以很好地处理这种情况，但似乎实体框架没有......

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-23T12:11:46.880

将数据库生成设置为无。

```
[Key, DatabaseGenerated(DatabaseGeneratedOption.None)]
public int Id { get; set; } 
```

# jquery - 当我尝试从数据库加载存储的日期时，它显示的不像日期 (/Date(1328207400000)/)

> ID：11612260
> 
> 赞同：1
> 
> 时间：2012-07-23T12:10:10.100
> 
> 标签：jquery, asp.net-mvc-3, date

我从数据库中获取日期值并尝试在视图中显示它，但问题是它没有显示为日期。当我尝试加载 2012-02-03 00:00:00.000 时，它显示如下 ***/Date(1328207400000)/ 。***我正在使用 asp.net MVC 3

看法

```
<tbody id="Activities">

                </tbody> 
```

脚本

```
function GetFilteredActivities()
{
    var selectedActivityId = $('#SelectedActionId').val();

    $.getJSON('@Url.Action("GetFilteredActivityLogs", "Document")', { actionTypeId: selectedActivityId }, function (FilteredActivities)
    {
        var ActivitySelect = $('#Activities');
        ActivitySelect.empty();
        $.each(FilteredActivities, function (index, activity)
        {
            ActivitySelect.append("<tr><td>" + activity.EmployeeNo + "</td><td>" + activity.EmployeeName + "</td><td>" + activity.Description + "</td><td>" + activity.DateCreated + "</td></tr>");
        });
    });
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-24T11:53:52.210

我确实喜欢这个。它对我有用。感谢所有分享他们经验的人。谢谢大家...

```
var DateCreated = eval((activity.DateCreated).replace(/\/Date\((\d+)\)\//gi, "new Date($1)"));
                var date = DateCreated.toDateString();
                var time = DateCreated.toLocaleTimeString();
                var dateTime = (date+" "+time); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-23T12:17:10.957

This date is in the [Unix epoch](http://en.wikipedia.org/wiki/Unix_time) format. The number you obtained is the number of seconds elapsed since 1st January 1970\. You should convert it to get back a normal date as output.

You can use [this tool](http://www.epochconverter.com) to check the value of the date.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-23T12:32:27.553

正如 rrikesh 所说，这是一个 unix 日期 [自 1970 年 1 月 1 日以来经过的秒数]，尝试将其转换为 ac# DateTime 对象，如下所示：

```
public DateTime FromUnixEpoch(long unixSeconds)
{
    // create a date that is equal to 1st Jan 1970 (midnight)
    var convertedDate = new DateTime(1970, 1, 1, 0, 0, 0, DateTimeKind.Utc);
    // add the unixSeconds onto the base date and return
    return convertedDate.AddSeconds(unixSeconds);
} 
```

当然，您也有将 ac# DateTime 转换为 unix 时间的相反情况：

```
public double ToUnixEpoch(DateTime sourceDate)
{
    DateTime unixEpoch = new DateTime(1970, 1, 1, 0, 0, 0).ToUniversalTime();
    TimeSpan span = (sourceDate.ToUniversalTime() - unixEpoch);
    return span.TotalSeconds;
} 
```

**[编辑]** - 在您上面的 [Date(1328207400000)] 的情况下，它似乎以毫秒为单位保存，在这种情况下，您需要将其考虑到方法中（除以 1000 以转换为秒）。另外，我不认为您的基准日期被保存为 UTC，因为上述日期的正确值实际上是 2012 年 2 月 2 日 18:30（我说您比格林威治标准时间早 5:30 是否正确？ ? 即总部设在印度？？）。

无论如何，我现在会把我的鼻子从事情中解脱出来:-)

# sql - Oracle/SQL 中 ROWID 的数据类型

> ID：11612268
> 
> 赞同：10
> 
> 时间：2012-07-23T12:10:30.233
> 
> 标签：sql, oracle, rowid

Oracle/SQL中ROWID的数据类型是什么？这个值是如何存储的？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-07-23T12:15:12.907

以下链接解释了 ROWID 的数据类型是什么 - [ROWID 数据类型](http://docs.oracle.com/cd/B19306_01/server.102/b14200/sql_elements001.htm#i46148)

ROWID 存储为[伪列](http://docs.oracle.com/cd/B19306_01/server.102/b14200/pseudocolumns.htm#g1020307)。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2016-12-07T00:13:55.513

ROWID（因为 Oracle8 称为扩展 ROWID，直到 Oracle7 现在称为受限 ROWID）存储/编码行的物理位置。

（扩展的）ROWID 编码（以十六进制格式）以下字段：OBJID（行所属对象的唯一 id），FILENO（创建对象的 TABLESPACE 中的相对文件编号，BLOCKNO（相对块）文件中的编号）和 ROWNUM（块中行的相对编号）。

（受限的）ROWID 仅包含 FILENO（数据库中的相对文件号）、BLOCKNO 和 ROWNUM（如扩展 ROWID 中），没有 OBJID。

在任何给定时间，ROWID 都会对数据库中的行进行唯一编码（可能共享相同 ROWID 的集群故事除外）。ROWID 可能会更改（由于数据库的重组），也可能会被重新使用（例如在删除和插入之后，新行可能会重新使用 ROWID）。导出/导入表也会为表重新分配新的 ROWID。

请注意，扩展 ROWID 格式中每个数据库的 FILENO 不一定是唯一的，但由于扩展格式还包含 OBJID（它唯一标识存储表对象段的表空间），因此我们可以找到唯一的文件。

BLOCKNO 在每个数据库文件中是唯一的，而 ROWNUM 在每个数据库块中是唯一的。

例外：索引组织表 - 由于索引重组（叶块的移动），ROWID 无法定位确切的块。

ROWID 可能会因数据库重组操作而改变。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-09-19T15:18:41.520

ROWID 数据类型存储与表行的磁盘位置相关的信息。它们还唯一标识表中的行。ROWID 数据类型存储为十六进制。

因此，十六进制字符串表示其表中行的唯一地址。

# c++ - 应使用哪个标头来使用 scoped_ptr

> ID：11612271
> 
> 赞同：5
> 
> 时间：2012-07-23T12:10:34.673
> 
> 标签：c++, smart-pointers, scoped-ptr

我想在我的 C++ 应用程序中使用智能指针。

为了使用 std scoped_ptr，我应该包含哪个头文件？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-23T12:14:11.940

标准 C++ 库中没有 scoped_ptr。所有[C++11 智能指针](http://en.cppreference.com/w/cpp/memory)都在 header 中`<memory>`。如果你想要[boost::scoped_ptr](http://www.boost.org/doc/libs/1_50_0/libs/smart_ptr/scoped_ptr.htm)那么你需要`boost/scoped_ptr.hpp`.

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-23T12:15:38.957

There is no `scoped_ptr` in the namespace `std`.
You can either use `boost::scoped_ptr` from [boost](http://www.boost.org/doc/libs/1_50_0/libs/smart_ptr/smart_ptr.htm).
Or I guess you wanted `std::unique_ptr`.In this case you need to include `<memory>`

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-23T12:13:19.890

`scoped_ptr`是[Boost library](http://www.boost.org/)的一部分，而不是标准库。

# objective-c - 从 NSString 中提取数字

> ID：11612272
> 
> 赞同：-1
> 
> 时间：2012-07-23T12:10:41.303
> 
> 标签：objective-c, cocoa

我有一个 NSString ，它在记录时给了我一个像这样的答案：

```
Response: oauth_token_secret=6h8hblp42jfowfy&oauth_token=9tmqsojggieln6z 
```

这两个数字每次都在变化。

有没有办法提取这两个数字并创建两个字符串，每个字符串都有一个？

像：

```
NSString *key = @"9tmqsojggieln6z"; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-23T12:32:36.910

```
//copy the string in a new string variable
NSMutableString *auth_token = [NSMutableString stringWithString:response];

NSRange match = [auth_token rangeOfString: @"&oauth_token="];
[auth_token deleteCharactersInRange: NSMakeRange(0, match.location+13)];
//auth_token will now have the auth token string

NSMutableString *auth_token_secret = [NSMutableString stringWithString:response];
NSRange range1 = [auth_token_secret rangeOfString:[NSString stringWithFormat:@"&oauth_token=%@", auth_token]];
[auth_token_secret deleteCharactersInRange:range1];
NSRange range2 = [auth_token_secret rangeOfString:@"oauth_token_secret="];
[auth_token_secret deleteCharactersInRange: range2];

//auth_token_secret will have the required secret string. 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-23T12:17:23.213

我有同样的问题。作为响应，我有时会以字符串形式有时以数字形式获取对象的 ID。然后我为 NSDictionary 写了一个类别，它具有以下方法：

```
- (NSString *)stringFromStringOrNumberForKey:(NSString *)key
{
id secret = [self objectForKey:key];
if ([secret isKindOfClass:[NSNumber class]]) {
    NSNumberFormatter * numberFormatter = [[NSNumberFormatter alloc] init];

    secret = [numberFormatter stringFromNumber:secret];
}

return secret; 
```

}

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-23T14:02:45.063

我会尝试以下方法：

```
NSString *_response = @"oauth_token_secret=6h8hblp42jfowfy&oauth_token=9tmqsojggieln6z";
NSMutableDictionary *_dictionary = [[NSMutableDictionary alloc] init];
NSArray *_parameters = [_response componentsSeparatedByString:@"&"];
for (NSString *_oneParameter in _parameters) {
    NSArray *_keyAndValue = [_oneParameter componentsSeparatedByString:@"="];
    [_dictionary setValue:[_keyAndValue lastObject] forKey:[_keyAndValue objectAtIndex:0]];
}

// reading the values
NSLog(@"token_secret : %@", [_dictionary valueForKey:@"oauth_token_secret"]);
NSLog(@"token : %@", [_dictionary valueForKey:@"oauth_token"]); 
```

# javascript - 如何使用 Jquery 根据屏幕大小更改 Div 的大小

> ID：11612274
> 
> 赞同：2
> 
> 时间：2012-07-23T12:10:42.810
> 
> 标签：javascript, jquery, css, html, resize

我的 jquery 有什么问题？我想根据屏幕大小使我的 div 更大，并且有很多很好的例子，但仍然没有成功。

```
.picLeft {
    border: 4px solid black;
    border-radius: 15px;
    width: 130px !important;-------> I need to change this
    height: 130px;-------> I need to change this
    text-align: center;
    background-color: white;
    margin: 10px !important;
    padding: 0px;
    float: left;
}

**EDIT TWO DIVS LIKE THAT**
var height = window.innerHeight;
var width = window.innerWidth;
console.log("height------->" +height);
console.log("width-------->" +width);
// <div class="ui-block-a picLeft" id="leftDiv">
//$("#leftDiv").css("width","300 !important"); NOT working
$(".picLeft").css("width","300 !important"); //NOT Working 
```

* * *

```
<div class="ui-grid-a"   style="background-color:black">
    <div class="ui-block-a picLeft" id="leftDiv">
    <img src="images/nk100x100.jpg" data-theme="c"
                id="pictureId" />
</div>
    <div class="ui-block-b picRight">
        <img src="images/th100x100.jpg" data-theme="c" id="pictureId2"  />
    </div>
</div> 
```

谢谢！萨米人

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-23T12:14:54.863

这个怎么样：

```
$(window).resize(function()
{
    $('#display').css('width', ($(this).width() - 100) + 'px');
});​ 
```

[http://jsfiddle.net/qJCc9/](http://jsfiddle.net/qJCc9/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-23T12:12:47.923

```
$(".picLeft").css("width","300px !important"); //Added "px" 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-23T12:13:05.303

你错过了`px`：

```
$(".picLeft").css("width","300px !important"); 
```

我建议使用百分比值或 CSS3 媒体查询来执行此操作。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-23T12:16:35.050

You can use an expression in your css file something like the example below too:

```
width: expression((document.body.clientWidth - 300)  + "px") !important; 
```

Thought it might be useful. You can also do conditional ones like this too:

```
width: expression( document.body.clientWidth > 1000 ? "1000px" : "99%" ); 
```

I know this isn't what you asked but others have already given good examples; this is just an alternative.

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-07-23T12:14:30.000

尝试这个...

```
 var width = jQuery(window).width();       
 jQuery('div.picLeft').css('width':width); 
 jQuery(window).resize(function() {
        var width = jQuery(window).width();  
        jQuery('div.picLeft').css('width':width);
    }); 
```

# c# - WCF 工作流服务 REST 接口

> ID：11612278
> 
> 赞同：1
> 
> 时间：2012-07-23T12:11:31.183
> 
> 标签：c#, wcf, rest, workflow, workflowservice

> **可能重复：**
> [WF4/WCF 中的 RESTful 工作流服务端点](https://stackoverflow.com/questions/3678129/restful-workflow-service-endpoints-in-wf4-wcf)

我正在尝试使 Windows Workflow Services 4.0 与 REST 接口一起工作。我有一个非常简单的工作流服务，名为“Service1”，带有一个 receiveRequest 和 sendResponse 活动。

默认情况下，WF 服务会自动生成实现的类和接口，但是我想强制 WF 服务使用我自己的支持 REST 的接口，而不是一些内部自动生成的接口。

界面如下：

```
[ServiceContract]
public interface IService
{
    [OperationContract]
    [WebInvoke( UriTemplate = "/Data/{item}", Method = "GET" )]
    String GetData( Int32 item );
} 
```

但是，我在配置 XAML 以使用此接口时遇到了困难。我需要这样的 XAML 配置来指定服务合同名称是我自己的合同：

```
 <Receive x:Name="__ReferenceID0" CanCreateInstance="True" DisplayName="ReceiveRequest" sap:VirtualizedContainerService.HintSize="464,90" OperationName="GetData" ServiceContractName="w:IService"> 
```

但是，当我运行此工作流服务时，出现以下异常：

***在服务“Service1”实施的合同列表中找不到合同名称“wfService.IService”。***

但是，在幕后创建的服务没有实现 IService 接口，我想知道如何扩展工作流引擎实例化的服务以实现我自己的接口（我在上面描述过）？

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-11T16:12:07.890

在 WF4 中，您不能在代码中声明 ServiceContract 并使用它。合同在 XAML 中声明，WorkflowServiceHost 从声明中生成端点。

要为您的工作流服务启用 REST，您有几个选项：

1.  [使用来自http://wf.codeplex.com/wikipage?title=WebAPIWorkflow](http://wf.codeplex.com/wikipage?title=WebAPIWorkflow)的HttpWorkflowHost 。限制是你将只有 REST。
2.  做类似这样的事情：http: [//msdn.microsoft.com/en-us/library/aa967564.aspx](http://msdn.microsoft.com/en-us/library/aa967564.aspx) 区别是：替换 WorkflowFormatterBehavior 而不是 DataContractSerializerOperationBehavior，参数是从消息合同而不是操作合同中提取的，请记住，您将没有此示例的客户端部分，您必须根据协议格式化响应。

# java - 为什么java在使用未初始化的变量时对类作用域和方法作用域的处理方式不同？

> ID：11612280
> 
> 赞同：2
> 
> 时间：2012-07-23T12:11:33.167
> 
> 标签：java, initialization, scope

Java 不允许您使用可能尚未在方法范围内初始化的变量。类范围内的未初始化变量仍可能由类方法返回，并且值默认为 null。

为什么对两个不同的作用域进行不同的处理？

```
public class TestClass {

    Integer i;
    Double d;

    public TestClass() {
        d = 1d;
    }

    public Double getD() {
        return d;
    }

    public Integer getI() {
        return i;
    }

//  public Integer getSomeInt() {
//      Integer i;
//      return i;
//  }

    public static void main(String[] args) {
        TestClass myClass = new TestClass();
        System.out.println(myClass.getI().getClass());
    }
} 
```

这会导致 NullPointerException，但`i`在 getSomeInt() 中返回是编译器错误，因为“变量可能尚未初始化”。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-23T12:25:35.353

这背后的原因是 Java 的静态代码分析的局限性。编译器能够毫无疑问地证明在初始化之前不会读取堆栈分配的本地变量。这对于堆分配的内存是不可能的，因此 Java 要求在公开指向它的指针之前将所有堆分配的存储清零。

这条规则的结果是所有堆分配的东西都有一个默认值零（假，空，无论二进制零等于该类型）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-23T12:13:36.007

因为成员变量具有默认值（如果未初始化），所以如果您在 null`I`上`null`调用方法，它将导致`NullPointerException`

对于局部变量，在使用之前必须先初始化，否则会变成编译时错误

> 局部变量略有不同；编译器永远不会为未初始化的局部变量分配默认值。如果您无法在声明它的地方初始化局部变量，请确保在尝试使用它之前为其分配一个值。访问未初始化的局部变量将导致编译时错误。[[……]](http://docs.oracle.com/javase/tutorial/java/nutsandbolts/datatypes.html)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-23T12:14:24.033

这真的很简单。成员变量会自动初始化为其默认值，而局部变量则不会。

当你这样做

```
public Integer getSomeInt() {
    Integer i;
    return i;
} 
```

你*隐藏* `this.i`并在`return i`你引用一个（未初始化的）*局部*变量。

* * *

那么**为什么**成员变量会自动初始化而局部变量不会呢？

最终，这是一个只有语言设计者才能回答的问题，但如果我不得不猜测，我会说这是由于必须将所有分配的内存归零的性能问题。然而，当涉及到对象时，强制程序员显式初始化所有字段会很痛苦。

* * *

来自 JLS（4.12.3 种变量）：

> 类变量在其类或接口准备好时创建（第 12.3.2 节）并初始化为默认值（第 4.12.5 节）。
> 
> [...]
> 
> 局部变量声明语句可能包含初始化变量的表达式。然而，具有初始化表达式的局部变量在声明它的局部变量声明语句被执行之前不会被初始化。（明确赋值规则（第 16 章，明确赋值）防止局部变量的值在被初始化或以其他方式赋值之前被使用。）

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-23T12:15:59.393

All fields are implicitly initialized in the constructor after the call to `super` but before anything else. Object references are set to `null`, primitive values are set to `0`, `false` etc. This implicit initialization isn't done in methods.

# perl - 使用 perl 从文本文件中获取唯一的随机行（在每个脚本运行时）

> ID：11612283
> 
> 赞同：12
> 
> 时间：2012-07-23T12:11:48.577
> 
> 标签：perl

有一个类似于下一个名为“input.txt”的文本文件

```
some field1a | field1b | field1c
...another approx 1000 lines....
fielaNa | field Nb | field Nc 
```

我可以选择任何字段分隔符。

**需要一个脚本，每次离散运行都会从该文件中获得一个唯一（从不重复）的随机行，直到使用所有行。**

我的解决方案：我在文件中添加了一列，所以有

```
0|some field1a | field1b | field1c
...another approx 1000 lines....
0|fielaNa | field Nb | field Nc 
```

并用下一个代码处理它：

```
use 5.014;
use warnings;
use utf8;
use List::Util;
use open qw(:std :utf8);
my $file = "./input.txt";

#read all lines into array and shuffle them
open(my $fh, "<:utf8", $file);
my @lines = List::Util::shuffle map { chomp $_; $_ } <$fh>;
close $fh;

#search for the 1st line what has 0 at the start
#change the 0 to 1
#and rewrite the whole file

my $random_line;
for(my $i=0; $i<=$#lines; $i++) {
    if( $lines[$i] =~ /^0/ ) {
        $random_line = $lines[$i];
        $lines[$i] =~ s/^0/1/;
        open($fh, ">:utf8", $file);
        print $fh join("\n", @lines);
        close $fh;
        last;
    }
}
$random_line = "1|NO|more|lines" unless( $random_line =~ /\w/ );

do_something_with_the_fields(split /\|/, $random_line))
exit; 
```

这是一个可行的解决方案，但不是很好，因为：

*   每次脚本运行时，行顺序都会发生变化
*   不是并发脚本运行安全的。

如何写得更有效更优雅？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-07-23T12:24:10.837

如果在不同的文件中保留行号的打乱列表，每次使用时删除第一个，怎么样？可能需要一些锁定来确保并发脚本运行的安全性。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-07-23T12:47:17.597

从[perlfaq5](http://perldoc.perl.org/perlfaq5.html)。

> [如何从文件中选择随机行？](http://perldoc.perl.org/perlfaq5.html#How-do-I-select-a-random-line-from-a-file%3f)
> 
> 除了将文件加载到数据库或预先索引文件中的行之外，您还可以做几件事。
> 
> 这是来自骆驼书的水库采样算法：
> 
> ```
> srand;
> rand($.) < 1 && ($line = $_) while <>; 
> ```
> 
> 与读取整个文件相比，这在空间上具有显着优势。您可以在 Donald E. Knuth 的 The Art of Computer Programming, Volume 2, Section 3.4.2 中找到这种方法的证明。
> 
> 您可以使用为该算法提供函数的 File::Random 模块：
> 
> ```
> use File::Random qw/random_line/;
> my $line = random_line($filename); 
> ```
> 
> 另一种方法是使用 Tie::File 模块，它将整个文件视为一个数组。只需访问一个随机数组元素。

所有 Perl 程序员都应该花时间阅读 FAQ。

**更新：**每次您必须存储状态时，都要获得一条唯一的随机线。存储状态的最简单方法是从文件中删除您使用过的行。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-07-23T14:47:34.723

该程序使用该[`Tie::File`](http://p3rl.org/Tie%3a%3aFile)模块来打开您的`input.txt`文件以及`indices.txt`文件。

如果`indices.txt`为空，则使用所有记录的索引`input.txt`以打乱顺序对其进行初始化。

每次运行，列表末尾的索引都会被删除，并显示相应的输入记录。

```
use strict;
use warnings;

use Tie::File;
use List::Util 'shuffle';

tie my @input, 'Tie::File', 'input.txt'
        or die qq(Unable to open "input.txt": $!);

tie my @indices, 'Tie::File', 'indices.txt'
        or die qq(Unable to open "indices.txt": $!);

@indices = shuffle(0..$#input) unless @indices;

my $index = pop @indices;
print $input[$index]; 
```

* * *

**更新**

我已经修改了这个解决方案，以便它仅在新`indices.txt`文件不存在时才填充新文件，而不是像以前一样，只是在它为空时填充。这意味着只需删除`indices.txt`文件即可打印新的记录序列。

```
use strict;
use warnings;

use Tie::File;
use List::Util 'shuffle';

my ($input_file, $indices_file) = qw( input.txt indices.txt );

tie my @input, 'Tie::File', $input_file
        or die qq(Unable to open "$input_file": $!);

my $first_run = not -f $indices_file;

tie my @indices, 'Tie::File', $indices_file
        or die qq(Unable to open "$indices_file": $!);

@indices = shuffle(0..$#input) if $first_run;

@indices or die "All records have been displayed";
my $index = pop @indices;
print $input[$index]; 
```

# sql - NHibernate 多对一关系

> ID：11612287
> 
> 赞同：1
> 
> 时间：2012-07-23T12:12:17.700
> 
> 标签：sql, nhibernate, fluent-nhibernate, nhibernate-mapping, fluent-nhibernate-mapping

我们有以下域对象：-

```
public class UserDevice : BaseObject
{
// different properties to hold data
}

public class DeviceRecipient:BaseObject
{
 public virtual UserDevice LastAttemptedDevice{get;set;}
} 
```

因此，使用 fluent nhibernate automapper 基于此创建的 sql 模式就像 DeviceRecipient 的表具有 UserDevice 的主键作为外键，即 UserDevice_Id。

现在，当我们尝试删除 UserDevice 对象时，它会为外键约束提供 sql 异常。我们要做的是：-

1.  删除 UserDevice 对象，因此删除 UserDevice 行而不删除 DeviceRecipient，因为它将在域模型中的其他地方使用。当我们删除 UserDevice 时，我们只想将 DeviceRecipient 的 UserDevice_Id 列设置为 null。
2.  当我们使用 Automapping 时，我们希望使用流畅的 nhibernate 约定来做到这一点。

任何帮助将是可观的..提前谢谢.！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-23T15:32:07.080

如我所见，您具有单向多对一关系。所以首先你必须编写以下覆盖：

```
public class DeviceRecipientOverride : IAutoMappingOverride<DeviceRecipient>
{
    public void Override(AutoMapping<DeviceRecipient> mapping)
    {
        mapping.References(x => x.LastAttemptedDevice)
            .NotFound.Ignore(); // this doing what you want.
    }
} 
```

其次，如果您有更多具有此行为的地方，您可以将其转换为自动映射约定。

```
public class ManyToOneNullableConvention : IReferenceConvention
{
    public void Apply(IManyToOneInstance instance)
    {
        var inspector = (IManyToOneInspector) instance;
        // also there you could check the name of the reference like following:  
        // inspector.Name == LastAttemptedDevice
        if (inspector.Nullable) 
        {
            instance.NotFound.Ignore();
        }
    }
} 
```

**编辑**：

来自 NHibernate 参考

> not-found（可选 - 默认为异常）：指定如何处理引用缺失行的外键：ignore 会将缺失的行视为空关联。

因此，当您设置`not-found="ignore"`SchemaExport/SchemaUpdate 时，不会为您创建 FK。因此，如果您有 FK，则需要将其删除或将 FK 的 OnDelete 行为设置为`Set Null`. 假设您使用的是 Microsoft Sql Server：

```
ALTER TABLE [DeviceRecipient] 
    ADD CONSTRAINT [FK_DeviceRecipient_LastAttemptedDevice] 
    FOREIGN KEY ([LastAttemptedDevice_ID]) 
    REFERENCES [UserDevice]
    ON DELETE SET NULL 
```

# java - Java / Groovy&Grails 文件写入

> ID：11612292
> 
> 赞同：0
> 
> 时间：2012-07-23T12:12:29.260
> 
> 标签：java, grails, groovy, java-io

我尝试了不同的方法将字符串写入文件。

```
File file = new File(eventPath)
file.withWriterAppend { it << xmlDocument } 
```

或者

```
file << xmlDocument 
```

这样，文件大小达到1kb时的字符串就被中断了。

如果我这样做（如此处所述：[java: write to xml file](https://stackoverflow.com/questions/6177601/java-write-to-xml-file)）

```
File file = new File("foo")
if (file.exists()) {
    assert file.delete()
    assert file.createNewFile()
}

boolean append = true
FileWriter fileWriter = new FileWriter(file, append)
BufferedWriter buffWriter = new BufferedWriter(fileWriter)

100.times { buffWriter.write "foo" }

buffWriter.flush()
buffWriter.close() 
```

发生字符串重复。如何使用第一种方法而不限制字符串大小？谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-23T12:15:32.680

Does:

```
new File(eventPath).withWriterAppend { it.writeLine xmlDocument } 
```

work?

# iphone - 如何在触摸单元格时停止计时器并在释放单元格触摸时启动计时器

> ID：11612297
> 
> 赞同：0
> 
> 时间：2012-07-23T12:12:47.760
> 
> 标签：iphone

我是 iPhone 新手。我有一个小小的疑问，当我们在表格视图上单击单元格（ietouches 开始）时，我有一个计时器和 uitableView。我想停止计时器，当我们在单元格中释放触摸时（ietouches end ) 它将启动计时器。我们该怎么做呢？如果有人知道这一点，请帮助我。我们可以做这个手势吗。如果可能的话，有人能告诉我怎么做。非常感谢提前！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-23T12:23:45.893

启动计时器`– tableView:willSelectRowAtIndexPath:`

停止计时器`– tableView:didSelectRowAtIndexPath:`

# sql - Sql Server 变量在存储过程中失去它的价值

> ID：11612303
> 
> 赞同：-2
> 
> 时间：2012-07-23T12:13:13.063
> 
> 标签：sql, sql-server-2008-r2

SQL server 2008，我有一个表，它存储了为每个作业创建的 Job_id，然后为了删除作业，我使用了一个存储过程（如下），它获取 ID 并尝试删除作业，但尽管我确定作业存在使用 @ScheduleReportID 但以下选择始终返回 null ！Job_id 是 tbRptSchedule 中的 UniqueIdentifier 类型

```
 declare @job_name nvarchar(max)
        SELECT @job_name = name 
        from msdb.dbo.sysjobs with(nolock) 
        where job_id = (select job_id from dbo.tbRptSchedule with(nolock) where ScheduledReportID = @ScheduledReportID)

        IF @job_name IS NULL
        BEGIN
         RAISERROR ('Cannot find Job identifier',16,1)
        END 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-23T12:26:08.510

也许这与[这里](https://stackoverflow.com/questions/5720212/what-is-sysname-data-type-in-sql-server)`declare @jobname nvarchar(max)`的错误有关，这里[的](http://msdn.microsoft.com/en-us/library/ms191240%28v=sql.105%29.aspx)sysname 等效于 NOT NULL varchar(128)。

# c# - 应用程序可执行路径 C#

> ID：11612306
> 
> 赞同：0
> 
> 时间：2012-07-23T12:13:26.590
> 
> 标签：c#, deployment, path, executable

我已将一个可执行文件添加到我的 Visual Studio 2010 C# 解决方案中。在此可执行文件的属性中，可执行文件路径是完整路径（“C:\Test\MyProgram\MyProgram.exe”）当我在新 PC 上部署我的解决方案（使用 installshield）时，可执行文件是已部署解决方案的一部分连同一些源文件和解决方案文件。到目前为止，一切都很好。但是当我打开已安装的解决方案文件（在 Visual Studio 2010 中）时，我无法构建它，因为它在指定路径中找不到可执行文件：（“C:\Test\MyProgram\”）。

这是一个问题：如何更改可执行文件的完整路径，以便获得新PC上安装解决方案的路径。类似于：“[InstallDir]\MyProgram.exe”

谢谢

更新：我发现您可以在应用程序的可执行路径中使用相对路径。感谢您的所有回答。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-23T12:21:30.750

您可以使用[TargetDir](http://msdn.microsoft.com/en-us/library/aa372064%28VS.85%29.aspx)属性

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-23T12:28:36.647

我只是在这里想了想。可能有更简单的方法。我想您可能想要创建一个在安装程序末尾运行的自定义操作，该操作手动打开 .xxproj 文件，并手动编辑引用的路径。正如另一张海报所述，您可以从 TargetDir 属性中获取新路径：http: [//msdn.microsoft.com/en-us/library/aa372064%28VS.85%29.aspx](http://msdn.microsoft.com/en-us/library/aa372064%28VS.85%29.aspx)

创建自定义操作的示例：http: [//msdn.microsoft.com/en-us/library/9cdb5eda (v=vs.80).aspx](http://msdn.microsoft.com/en-us/library/9cdb5eda(v=vs.80).aspx)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-23T12:58:40.870

将您的可执行文件添加到您的项目到主目录，右键单击-> 复制到 OutPutDirectory -> 复制

这是将文件复制到目标目录并让 SourceControl Visual Studio 插件管理它的最简单方法。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-23T12:59:50.670

您的可执行文件应该位于项目源文件结构中的某个位置，可能位于子文件夹中。当您将此可执行文件添加到项目时，应将其添加到您想要的相对路径上。如果这没有发生，您应该手动编辑`csprj`文件。为此，右键单击项目，将其卸载，再次右键单击并编辑项目文件。

当然，您的可执行文件应该将其属性`Build Action`设置为您想要的`None`。`Copy to output Directory`

如果由于某种原因您不能将此可执行文件直接添加到您的项目文件结构中，我建议使用预构建事件将其从它存在的位置复制到您的项目文件中。

# c# - 创建一个新的 System.Diagnostics.PerformanceCounter 非常慢

> ID：11612308
> 
> 赞同：2
> 
> 时间：2012-07-23T12:13:35.217
> 
> 标签：c#, performancecounter

我有一个简单的监控应用程序，它从 PerfMon 计数器中获取一些值。即使在本地机器上进行测试，创建一个新`PerformanceCounter`对象也需要 30 多秒。

```
using System;
using System.Diagnostics;

namespace test_slow_perfmon
{
    class Program
    {
        static void Main(string[] args)
        {
            Stopwatch w = new Stopwatch();

            w.Start();
            PerformanceCounter c = new PerformanceCounter("PhysicalDisk", "Avg. Disk Read Queue Length", "_Total", "localhost");
            w.Stop();
            Console.WriteLine(string.Format("Creating a counter took {0}ms", w.Elapsed.TotalMilliseconds));
        }
    }
} 
```

其输出表明创建每个计数器需要超过 32 秒。

我能做些什么（如果有的话）来加快计数器的创建速度？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-23T12:24:51.327

30 秒对我来说听起来像是超时，这表明这可能是某种网络问题。

[尝试使用未指定主机名的构造函数](http://msdn.microsoft.com/en-us/library/356cx381)创建性能计数器，看看是否有帮助：

```
PerformanceCounter c = new PerformanceCounter("PhysicalDisk", "Avg. Disk Read Queue Length", "_Total"); 
```

# http - “所有http命令都是幂等的，除了POST”是什么意思？

> ID：11612310
> 
> 赞同：0
> 
> 时间：2012-07-23T12:13:36.373
> 
> 标签：http, rest

我今天遇到了这个问题。是不是只意味着除了POST，其他http方法可以做多次？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-23T12:42:27.047

幂等性在[RFC 2616 的第 9.1.2 节中](http://greenbytes.de/tech/webdav/rfc2616.html#rfc.section.9.1.2)定义。此外，该说法是不正确的。还有许多其他非幂等 HTTP 方法，请参阅[http://greenbytes.de/tech/webdav/draft-ietf-httpbis-method-registrations-09.html#rfc.section.A](http://greenbytes.de/tech/webdav/draft-ietf-httpbis-method-registrations-09.html#rfc.section.A)。

# embedded-linux - 在 Linux 上将 MCU 设置为低功耗模式

> ID：11612321
> 
> 赞同：1
> 
> 时间：2012-07-23T12:14:15.783
> 
> 标签：embedded-linux, interrupt, power-management, atmel

我在安装了 ARM MCU 的 Atmel 板 (at91 sam9g25) 上运行嵌入式 Linux (Angstrom)。

我想将 CPU 设置为空闲模式，最好是通过使用函数从用户空间（然后系统将被硬件 gpio 中断唤醒）。我怎样才能做到这一点？或者，如何在内核空间中完成？我找不到太多，也许有人有一些例子可以开始？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-23T15:34:04.030

尝试检查此[页面](http://www.spinics.net/lists/arm-kernel/msg59204.html)。还可以尝试阅读[优化基于 AT91SAM9261 的系统的功耗，](http://www.atmel.com/Images/doc6217.pdf)以了解您可以使用电源管理做什么。

您基本上可以做的是设置您想要的状态，`/sys/power/state`但在进入低功耗状态之前，您需要设置如何唤醒您的系统。

请注意，根据我的经验，我通过更改内核看到了许多不同的行为，因此请耐心等待并尝试不同的版本。

# compiler-construction - -bash: ./prog_name: 没有这样的文件或目录

> ID：11612328
> 
> 赞同：0
> 
> 时间：2012-07-23T12:14:38.123
> 
> 标签：compiler-construction, g++

假设程序名称是 algo_graphs.c。

我使用`g++ -m32 -c -g -O3 algo_graps.c`并假设没有编译器错误来编译它。可能导致此错误的原因：

> -bash: ./prog_name: 没有这样的文件或目录

在我`./algo_graphs`在终端上运行之后？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-23T12:17:34.953

您应该使用`-o [NAME]`选项来设置可执行文件名称。例如 ：

```
g++ algo_graps.c -o executableName

./executableName 
```

或者试试看`ls`这个名字。默认情况下，调用 UNIX 可执行文件`a.out`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-23T12:23:11.860

可能是因为您没有告诉编译器命名您的可执行程序`algo_graphs`。如果你不告诉编译器给输出文件取什么名字，它就会把它命名为`a.out`.

所以你有两种方法可以解决你的问题：

1.  利用`./a.out`
2.  告诉编译器为你的文件命名：`g++ -m32 -c -g -O3 algo_graps.c -o algo_graphs`

在第二种情况下，我添加了参数`-o algo_graphs`。告诉编译器下`-o`一个参数是输出文件的名称。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-12-29T09:54:30.067

我使用以下命令进行编译： g++ ../src/Libxml2Example.cpp -I/usr/include/libxml2 -lxml2 现在它工作正常。谢谢

# c++ - std::vector 插入错误

> ID：11612330
> 
> 赞同：1
> 
> 时间：2012-07-23T12:14:48.330
> 
> 标签：c++, vector, iterator

我在 C++ 中有一个矢量代码：

```
typedef  vector<boost::tuple<ppa::Node*, ppa::Node*, ppa::Node*, bool> >::iterator traveling;
traveling running = 
std::partition( wait.begin(), wait.end(), tuple_comp    );
running_jobs.insert(running, wait.end());
wait.erase( running, wait.end() ); 
```

这个错误给了我：

```
main.cpp:223: error: no matching function for call to ‘std::vector<boost::tuples::tuple<ppa::Node*, ppa::Node*, ppa::Node*, bool, boost::tuples::null_type, boost::tuples::null_type, boost::tuples::null_type, boost::tuples::null_type, boost::tuples::null_type, boost::tuples::null_type>, std::allocator<boost::tuples::tuple<ppa::Node*, ppa::Node*, ppa::Node*, bool, boost::tuples::null_type, boost::tuples::null_type, boost::tuples::null_type, boost::tuples::null_type, boost::tuples::null_type, boost::tuples::null_type> >
>::insert(threaded_function(ppa::Model_factory&, ppa::Node*)::traveling&,
__gnu_cxx::__normal_iterator<boost::tuples::tuple<ppa::Node*, ppa::Node*, ppa::Node*, bool, boost::tuples::null_type, boost::tuples::null_type, boost::tuples::null_type, boost::tuples::null_type, boost::tuples::null_type, boost::tuples::null_type>*, std::vector<boost::tuples::tuple<ppa::Node*, ppa::Node*, ppa::Node*, bool, boost::tuples::null_type, boost::tuples::null_type, boost::tuples::null_type, boost::tuples::null_type, boost::tuples::null_type, boost::tuples::null_type>, std::allocator<boost::tuples::tuple<ppa::Node*, ppa::Node*, ppa::Node*, bool, boost::tuples::null_type, boost::tuples::null_type, boost::tuples::null_type, boost::tuples::null_type, boost::tuples::null_type, boost::tuples::null_type> > > >)’ 
```

这是netbeans 7.2，我不知道std中的向量应该有插入，我错过了什么吗？

```
running_jobs = vector<boost::tuple<ppa::Node*, ppa::Node*, ppa::Node*, bool> > running_jobs;

 line 223    running_jobs.insert(running, wait.end()); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-23T12:29:29.347

问题确实是您对`insert`. 看看
[http://www.cplusplus.com/reference/stl/vector/insert/](http://www.cplusplus.com/reference/stl/vector/insert/)

您必须告诉`insert`插入的位置`running_jobs`。可能是这样的：

```
running_jobs.insert(running_jobs.end(), running, wait.end()); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-23T12:24:45.000

什么是 running_jobs？我认为它是一个向量。还有对象“等待”我假设它是一个向量

通话

```
running_jobs.insert(running, wait.end()); 
```

是错的。第一个参数必须是迭代器，所以正确的调用应该是

```
running_jobs.insert( wait.end(), running); 
```

希望这有效

# jquery - 从 html 元素中删除类

> ID：11612331
> 
> 赞同：0
> 
> 时间：2012-07-23T12:14:49.633
> 
> 标签：jquery

在按钮 1 的单击事件中，如何仅从本节中删除“选定”类。不应删除 Button 2 的类，对于 Button 2 也是如此，如果我单击按钮 2，如果选择的类存在，则不应删除 Button 1 的类。我知道`$('.small-button-1, .small-button-2').removeClass('selected');`删除一切。

```
<div class="block">
    <div id="abcd" class="lg_button">Button 1</div>
    <div>
        <div class="small-button-1 selected">1</div>
        <div class="small-button-2 selected">2</div>
    </div>
</div> 

<div class="block">
    <div id="dcba" class="lg_button">Button 2</div>
    <div>
        <div class="small-button-1 selected">1</div>
        <div class="small-button-2 selected">2</div>
    </div>
</div> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-23T12:34:02.670

我已经这样做了，但必须重命名一些 html 标签才能让它在这里工作是我的例子 [http://jsfiddle.net/fKwGR/](http://jsfiddle.net/fKwGR/)

jquery部分：

```
$(document).ready(function() {
$('div.lg_button1').click(function(){
        $('div.small-button-1.selected').attr('class','small-button-1');
        $('div.small-button-2.selected').attr('class','small-button-2');
        $('div.small-button-3').attr('class','small-button-3 selected');
        $('div.small-button-4').attr('class','small-button-4 selected');
        });
$('div.lg_button2').click(function(){
        $('div.small-button-1').attr('class','small-button-1 selected');
        $('div.small-button-2').attr('class','small-button-2 selected');
        $('div.small-button-3.selected').attr('class','small-button-3');
        $('div.small-button-4.selected').attr('class','small-button-4');
        });
});​ 
```

HTML部分：

```
<div class="block">
  <div id="abcd" class="lg_button1">Button 1</div>
  <div id='button1'>
      <div class="small-button-1 selected">1</div>
      <div class="small-button-2 selected">2</div>
  </div> 
```

```
<div class="block">
  <div id="dcba" class="lg_button2">Button 2</div>
  <div id='button2'>
      <div class="small-button-3 selected">1</div>
      <div class="small-button-4 selected">2</div>
  </div> 
```

​</p>

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-23T12:19:19.640

我相信您需要掌握父元素，然后将其用作选择器的上下文。像这样的东西[http://jsfiddle.net/VY5Md/](http://jsfiddle.net/VY5Md/)应该实现你所要求的我认为

```
 $(function(){
       $('.lg_button').click(function(){
           var $p = $(this).parents('.block');
           $('.selected', $p).removeClass('selected'); 
       }); 
  });​ 
```

此代码获取单击的按钮，找到具有类“块”的父级，然后在该“块”的上下文中从具有“选定”类的任何内容中删除“选定”类

# html - 橙色条下方的代码显示在网页中的橙色条上方

> ID：11612333
> 
> 赞同：0
> 
> 时间：2012-07-23T12:14:59.333
> 
> 标签：html, css

我的网页上有一个橙色条，它是幻灯片控件的宿主。橙色的容器div设置为扩展主页面div的外部宽度，如下图：

[http://jsfiddle.net/Xh8uL/2](http://jsfiddle.net/Xh8uL/2)

但是，当我尝试向我的网页添加更多内容时，任何其他内容都会直接显示在橙色条的上方，而不是下方。我可以让更多内容出现在橙色条下方的唯一方法是将橙色条的位置更改为相对（从绝对） - 这违背了橙色条的全部目的 - 和绝对设置。

对于我正在使用的实现代码，请参阅我的第一个问题： [水平条扩展外部容器](https://stackoverflow.com/questions/11601946/horizontal-bar-extending-outer-container)

* * *

下面是我希望它看起来如何的视觉效果：

[http://jsfiddle.net/Xh8uL/5](http://jsfiddle.net/Xh8uL/5)

但这就是它的实际表现（非常糟糕）：

![在此处输入图像描述](../Images/e158430a185e9f05fe346fec3e411e42.png)

*如何让我的内容显示在橙色条下方？*

* * *

***小节后没有*内容的小提琴：[这里小节后](http://jsfiddle.net/Xh8uL/2)*有*内容的
小提琴：[这里](http://jsfiddle.net/Xh8uL/5)**

 ** * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-23T12:25:27.270

添加`padding-top`到`paragraph`.

```
p {
   padding-top: 200px;    
} 
```

**工作小提琴：[这里](http://jsfiddle.net/Xh8uL/8/)**。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-23T12:30:33.687

看看[这个 jsFiddle](http://jsfiddle.net/Xh8uL/9/)

你编码它的方式会干扰页面的流程......绝对定位的元素将始终位于在流程中移动的任何其他元素之上*

# ios - When does Ti.Storekit Module invoke finishTransaction?

> ID：11612334
> 
> 赞同：1
> 
> 时间：2012-07-23T12:15:02.883
> 
> 标签：ios, in-app-purchase, titanium-mobile, storekit, titanium-modules

*Titanium SDK version* : `1.8.1`
*Platform & version* : `iOS 5.1`
I'm developping *iOS* application using *Titanium Mobile*. And this application includes *In-App Purchase* using `Ti.Storekit` module. I'm troubled about *In-App Purchase* system.

According to Apple's documentation, when purchase transaction is complete, my application needs to invoke `finishTransaction` method. However, `finishTransaction` method is not specified in `Ti.Storekit` module... Then, my question is beow:

1.  When does `Ti.Storekit` Module invoke `finishTransaction`? (And is it automatically?)
2.  Can my application invoke `finishTransaction` optional time?

Thank you.

# php - PHP slow than HTML

> ID：11612337
> 
> 赞同：-1
> 
> 时间：2012-07-23T12:15:05.853
> 
> 标签：php, html

I have a very interesting problem.İn PHP

```
 <? $result=mysql_query("SELECT * FROM tbl_slide order by sira asc");
    while($row=mysql_fetch_array($result)){
    ?>

    <li>
        <a href="<?=$row['picture']?>"><img class="thumb" src="<?=$row['picture']?>" alt="" /></a>
        <h3><?=$row['baslik']?></h3>
        <p><?=$row['icerik']?></p>
    </li>
 <? } ?> 
```

I coding something.Everything is okay.But slide show is very slow.But,

in HTML

```
<li>
        <a href="images/background/bg4.jpg"><img class="thumb" src="images/background/bg4_th.jpg" alt="" /></a>
        <h3>GABRIELLA DAVIS</h3>
        <p>Mauris id quam mi, nec dictum mauris. Morbi non eros quis erat facilisis scelerisque at in sapien. Etiam amet.</p>
    </li>

    <li>
        <a href="images/background/bg9.jpg"><img class="thumb" src="images/background/bg9_th.jpg" alt="" /></a>
        <h3>EMMA JONES</h3>
        <p>Mauris viverra tincidunt est, a bibendum turpis hendrerit eu. Aenean ac elit dolor. Donec commodo, enim metus.</p>
    </li>
<li>
        <a href="images/background/bg10.jpg"><img class="thumb" src="images/background/bg10_th.jpg" alt="" /></a>
        <h3>CLAIRE WILLIAMS</h3>
        <p>Mauris viverra tincidunt est, a bibendum turpis hendrerit eu. Aenean ac elit dolor. Donec commodo, enim metus.</p>
    </li>
    <li>
        <a href="images/background/bg17.jpg"><img class="thumb" src="images/background/bg17_th.jpg" alt="" /></a>
        <h3>MARIA WILSON</h3>
        <p>Mauris viverra tincidunt est, a bibendum turpis hendrerit eu. Aenean ac elit dolor. Donec commodo, enim metus.</p>
    </li> 
```

when i use this code,slideshow is very fast.İmages is same. What is the reason for this?

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-23T12:26:04.923

浏览器不知道您的页面的来源是什么。HTML 文件或 PHP 生成的 HTML 页面对它来说都是一样的。

基于此，唯一合乎逻辑的*结论*是两个页面的*内容在某些重要方面存在**差异*。如果它们相同，它们的行为方式将相同。

检查生成页面的来源并将其与您的测试页面进行比较，进行差异并消除不影响性能的 HTML 部分。您应该能够找到问题所在。

也许 PHP 生成的页面包含很多项目，或者额外的标记会影响性能？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-23T12:20:34.163

PHP 必须与 MySQL 服务器建立连接（无论是本地的还是远程的）。然后它必须运行查询，等待结果，解析返回的数据并格式化输出。

直接加载 HTML 总是更快。有一些技术可以帮助提高速度，但涉及的因素很多。首先要看的地方可能是您的托管平台。

# java - Escaping Regex in SpEL

> ID：11612342
> 
> 赞同：0
> 
> 时间：2012-07-23T12:15:29.197
> 
> 标签：java, spring, spring-el

How should I escape the following Java code, so I can use it in a Spring-EL expression?

Java:

```
.replaceAll("[\\p{Punct}&&[^\"|\\]|\\[|+|\\-|:|(|)|_|~|.|,|%|?]]", " ") 
```

Spring-EL, which doesn't parse:

```
<int:transformer 
    input-channel="splitTitles" 
    output-channel="lowercasedTitles" 
    expression="payload.toLowerCase().replaceAll('[\\p{Punct}&&[^\"|\\]|\\[|+|\\-|:|(|)|_|~|.|,|%|?]]').trim()">
</int:transformer> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-23T12:37:16.887

在基于 XML 的文件中指定属性值时，您必须转义特殊字符（即 & = `&amp;`、 " = `&quot;`）。此外，您没有为 replaceAll 方法调用指定第二个参数。试试这个，

```
<int:transformer 
        input-channel="splitTitles" 
        output-channel="lowercasedTitles" 
        expression="payload.toLowerCase().replaceAll('[\\p{Punct}&amp;&amp;[^\&quot;|\\]|\\[|+|\\-|:|(|)|_|~|.|,|%|?]]', ' ').trim()">
    </int:transformer> 
```

# ios - Tab Bar app with UIwebview, return to normal view

> ID：11612343
> 
> 赞同：1
> 
> 时间：2012-07-23T12:15:29.227
> 
> 标签：ios, webview

Me again. Right, in my tab bar application one of my tabs loads a webview and works perfectly. However I want the tab to return to this view when pressed again.

For example, the tab brings up a car sales part of my companies website, should somebody click on the home part of this UIWebView the webview will go there, fair enough I expect this. But when I close the app and reopen or simply navigate away from tab and back again, I want the original page I wanted loaded in the first place. So when the user returns to the app or tab, it resets back to the car sale page and not the last page they left it on.

Any ideas?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-23T12:18:41.573

`viewWillAppear()`在视图控制器的or`viewDidAppear()`函数中刷新您的 url 。

如果没有覆盖，请在您的 secondviewcontroller.m 文件中添加其中一个，如下所示：

类似的东西：

```
- (void)viewWillAppear:(BOOL)animated { 

    NSString *urlAddress = @"http://www.google.com";
    //Create a URL object.
    NSURL *url = [NSURL URLWithString:urlAddress];

    //URL Requst Object
    NSURLRequest *requestObj = [NSURLRequest requestWithURL:url];

    //Load the request in the UIWebView.
    [webView loadRequest:requestObj];    

    [super viewWillAppear:animated];  
} 
```

就在我的脑海中:)

# asp.net-mvc - ASP.NET MVC 4 multi tenancy

> ID：11612346
> 
> 赞同：1
> 
> 时间：2012-07-23T12:15:43.580
> 
> 标签：asp.net-mvc, multi-tenant, hobo

In ASP.NET MVC 4 I see that there is and [Authorize] attribute and now a corresponding [AllowAnonymous] attribute that can easily let you require authentication to access specific controller actions.

What I need is true multi tenancy though. Each user can access only their own records, and all records other than the user accounts should be owned by individual users.

In Hobo (http://hobocentral.net) which is a Rails plugin, this was easily accomplished by adding the following line of code in my ApplicationController:

```
before_filter :login_required, :except => [:login, :signup, :do_signup, :activate] 
```

And then in my model:

```
belongs_to :owner, :class_name => "User", :creator => true

# --- Permissions --- #

def create_permitted?
  acting_user == owner || !owner_changed?
end

def update_permitted?
  acting_user == owner || !owner_changed?
end

def destroy_permitted?
  acting_user == owner || !owner_changed?
end

def view_permitted?(field)
  owner_is? acting_user or new_record?
end 
```

And finally in my model's controller:

```
def index
  hobo_index current_user.modelName
end 
```

Does something so simple and elegant exist or is built into ASP.NET MVC? So far I've found several ways to implement multi tenancy in ASP.NET MVC but I'm unsure as to which is the clearly correct way. I also intent to use .NET 4.5 and Entity Framework 5 if that helps.

* * *

## 回答 #1

> 赞同：-2
> 
> 时间：2012-07-23T12:23:11.160

如果您在 asp.net MVC 中使用任何类型的内置身份验证，那么它已经存在，因为您可以使用类似的东西

```
HttpContext.Current.User.Identity.Name 
```

如果您没有使用某种内部身份验证机制，那么您可以执行我在验证用户时将主键保存在`session`变量中时所做的简单操作。

```
Session["User"] = Key; 
```

并在每个控制器内部取出变量

```
var key = Session["User"]; 
```

并根据密钥检索用户数据

# android - Notifications in android by comparing the system time with database values using background service

> ID：11612351
> 
> 赞同：0
> 
> 时间：2012-07-23T12:16:13.753
> 
> 标签：android

I am developing an android app.I wan to provide five notifications per day.I will store the notification time in sqlite database.Then I compare this db notification time with the devices time in a repeating loop using service.But the notification will not work properly.Forceclose appeared.....I need the help

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-23T12:21:17.893

您需要使用[AlarmManager](http://developer.android.com/reference/android/app/AlarmManager.html)来安排任务。注册 a`BroadcastReceiver`并`Notification`在其`onReceive()`方法中创建。`AlarmManager`然后用 a初始化`PendingIntent`你`BroadcastReceiver`使用的`set()`方法。希望这可以帮助。

# android - android libgdx bind 6 diffrent texture to cube

> ID：11612353
> 
> 赞同：0
> 
> 时间：2012-07-23T12:16:18.220
> 
> 标签：android, libgdx

I am developing game for Android in which I have to draw cube with different texture at each face.

I am using libgdx game development framework to develop this game.

My code to draw cube is as follow :

```
public void draw(GL10 gl) 
{
    Mesh cube_mesh  =   ModelLoaderOld.loadObj(Gdx.files.internal("data/cube.obj").read());
    cube_mesh.render(GL10.GL_TRIANGLES);} 
```

Now I want to bind 6 different texture to this cube. How can I do this?

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-24T11:22:03.007

我会考虑在代码中创建你的多维数据集，而不是从 obj 文件中加载它。这将允许您完全自定义纹理坐标的生成，您很可能需要创建一个有效的解决方案。

您只需使用一个纹理，而是为每个面指定一组不同的坐标，而不是使用 6 个纹理。然后每个纹理坐标将指向纹理图集中的一个位置。这样，您甚至可以在一个大纹理图集中拥有多个立方体纹理。这种方式会更有效率，因为它将最小化纹理切换。

对于每个面都有自己的一组纹理坐标的立方体，每个面需要 4 个顶点，每个面需要 6 个索引。所以总共有 24 个顶点和 36 个索引。

# javascript - localization in Chrome extensions

> ID：11612355
> 
> 赞同：1
> 
> 时间：2012-07-23T12:16:26.840
> 
> 标签：javascript, html, internationalization, google-chrome-extension

I have a query related to localization of Chrome extensions. I am trying to localize the text in a button in a popup html file in my extension. The code I am using is as follows:

```
<button name="buttonSave" id="buttonSave" style="width: 100px; float: right;">
       <label class="buttonTextStyle">

       </label>
</button> 
```

The javascript code is as follows:

```
document.getElementById("buttonSave").innerText = chrome.i18n.getMessage("SaveButton"); 
```

I have tried using innerText, innerHTML, value but the text in the button is not applied. Am I doing something wrong here?

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-23T13:30:11.780

我只会使用`<input type="button">`并设置`value`按钮的属性：

```
<input type="button" name="buttonSave" id="buttonSave" style="width: 100px; float: right;">

....

document.getElementById("buttonSave").value = chrome.i18n.getMessage("SaveButton"); 
```

顺便说一句，我相当肯定在 a 中`<label>`嵌套的`<button>`不是有效的 HTML。使用`<div>`or`<span>`代替。

**编辑**：

我刚刚做了一个测试，使用其中一个`.innerHTML`或`.innerText`应该可以正常工作。你确定：

1.  的返回值`chrome.i18n.getMessage("SaveButton")`是非空的？

2.  您`document.getElementById("buttonSave")`在 DOM 构建后运行（即，`document.getElementById("buttonSave")`不为空或抛出错误）？

此外，请了解覆盖按钮的`innerText`or`innerHTML`会破坏按钮内已有的元素。也许你真的`document.querySelector("#buttonSave .buttonTextStyle").innerText`想写嵌套在按钮内的元素？

# java - 是否有用于在 Java 中变形图像（或处理）的库？

> ID：11612357
> 
> 赞同：7
> 
> 时间：2012-07-23T12:16:40.747
> 
> 标签：java, image, image-processing

我正计划编写将图像变形为特定形状的软件（基于定义不同图像中相似区域的点和向量，以及“平均”形状的计算）。

显然这非常困难，因此我正在寻找一个可以处理图像变形的库（这样我就可以专注于 GUI，并将必要的坐标提供给库）。

为了澄清，我想做的一个例子是：

*   加载图像（例如，图像 1 和 2）
*   定义图像中的相似点（例如，图像 1 和 2 中的鼻尖，在坐标 (1,5) 和 (1,7) 上）
*   计算点的平均坐标（这样就是（1,6））
*   将每个图像上的定义点变形为相同的坐标（因此将所有鼻子变形为 (1,6)）
*   保存图像

当然，现在实际用例会复杂得多（除了奇异坐标，我还想变形线和其他形状（矢量），但原理将保持不变。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-23T13:49:26.763

您可以在这个上尝试 ImageJ / FIJI。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-23T13:01:51.550

我自己还没有尝试过，但你应该能够使用[ImageMagick 的 Java 包装器](http://www.imagemagick.org/script/api.php#java)并使用它的[Shepard 的失真](http://www.imagemagick.org/Usage/distorts/#shepards)功能

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-05T19:39:29.337

试试这个.. [http://www.cs.bris.ac.uk/~majid/mengine/morph.html](http://www.cs.bris.ac.uk/~majid/mengine/morph.html)

该软件工具旨在用作学习辅助工具，用于演示不同图像形态变换对二值（黑白）图像的影响。图像可以加载到工具中，从预定义的列表中定义或选择一个结构元素，然后应用所选的转换。原始图像和变形图像同时显示，以可视化所做的更改。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-31T08:46:41.203

这取决于您需要什么转换您可以尝试 [http://biocomp.cnb.uam.es/~iarganda/bUnwarpJ/](http://biocomp.cnb.uam.es/~iarganda/bUnwarpJ/)

[http://bigwww.epfl.ch/thevenaz/UnwarpJ/](http://bigwww.epfl.ch/thevenaz/UnwarpJ/)

# objective-c - Xcode segue seems to be happening before selecting table cell, but should happen after

> ID：11612359
> 
> 赞同：0
> 
> 时间：2012-07-23T12:16:50.013
> 
> 标签：objective-c, xcode, uiviewcontroller, xcode4.3, segue

I am attempting to use a UIViewController (View Controller) with a table view to send data to another UIViewController (Detail View Controller). My code looks like this:

```
//ViewController.m
- (void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath {
    DetailViewController *detail = [self.storyboard instantiateViewControllerWithIdentifier:@"grapedetail"];
    detail.grape = [self.grapes objectAtIndex:indexPath.row];
    currentGrape = [self.grapes objectAtIndex:indexPath.row];
    NSLog(@"%@",currentGrape.searchName);
    [self.navigationController pushViewController:detail animated:YES];
    [self performSegueWithIdentifier:@"toGrapeDetail" sender:self];
}

//DetailViewController.m
- (void)viewDidLoad
{
    //obtain grape from table view
    //grape = ((ViewController *)self.presentingViewController).currentGrape; //I have also tried this method for obtaining the variable with the same result
    NSLog(@"Detail view says: %@",grape.searchName);
    //etc...
} 
```

After I build the app I go to the View Controller and select a table cell to go to the Detail View Controller. Here is my output log:

```
2012-07-23 08:13:27.430 GrapeKeeper[593:f803] Detail view says: (null)
2012-07-23 08:13:27.432 GrapeKeeper[593:f803] Alarije 
```

From this it seems that the detail view `viewDidLoad` is being called before the original VC's `didSelectRowAtIndexPath`, even though I clearly want the latter to happen first so that the variable passes correctly. What can I do to fix this?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-23T12:29:37.207

是的，当我第一次遇到它时，这似乎非常奇怪，但它就是这样。

诀窍是用 in`prepareForSegue:sender:`而不是`didSelectRowAtIndexPath:`. 这样，您将目标控制器作为 segue 的目的地。

（不过，您的代码看起来确实有点困惑，您是在推动控制器还是让 segue 来做。）

# php - 在 symfony2 中向无效表单错误添加类

> ID：11612360
> 
> 赞同：7
> 
> 时间：2012-07-23T12:16:51.217
> 
> 标签：php, forms, validation, symfony

我想自定义 symfony2 表单中的错误处理。如果发生错误，输入字段应该有另一个类来显示输入值不正确。

我怎样才能做到这一点？我知道我必须自定义渲染模板，但我真的不知道该怎么做。我必须自定义所有输入模板吗？如果输入包含错误，我该如何检查？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2015-03-23T14:47:40.857

如果你不想使用自定义表单，那么你可以这样做（我有 Symfony 2.6 和 Bootstrap 3）：

```
 <div class="form-group {% if not form.YOUR_ELEMENT.vars.valid %}has-error{% endif %}">
        {{ form_label(form.YOUR_ELEMENT) }}
        {{ form_widget(form.YOUR_ELEMENT) }}
    </div> 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2014-03-13T15:42:56.587

这是我使用[自定义表单主题](http://symfony.com/doc/current/cookbook/form/form_customization.html#what-are-form-themes)的解决方案。我复制了标准`widget_attributes`块并在`{# ADD ERROR START #}`和之间添加了代码`{# ADD ERROR END #}`。你只需`{% set errorClass = 'error' %}`要用你的错误类替换值。

此解决方案将指定的错误类添加到所有有错误的小部件。

```
{% block widget_attributes %}
    {% spaceless %}
        {# ADD ERROR START #}
        {% if errors|length > 0 %}
            {% set errorClass = 'error' %}
            {% if attr.class is defined %}
                {% set errorClass = errorClass ~ ' ' ~ attr.class %}
            {% endif %}
            {% set attr = attr|merge({'class': errorClass}) %}
        {% endif %}
        {# ADD ERROR END #}
        id="{{ id }}" name="{{ full_name }}"
        {%- if read_only %} readonly="readonly"{% endif -%}
        {%- if disabled %} disabled="disabled"{% endif -%}
        {%- if required %} required="required"{% endif -%}
        {%- if max_length %} maxlength="{{ max_length }}"{% endif -%}
        {%- if pattern %} pattern="{{ pattern }}"{% endif -%}
        {%- for attrname, attrvalue in attr -%}
            {{- " " -}}
            {%- if attrname in ['placeholder', 'title'] -%}
                {{- attrname }}="{{ attrvalue|trans({}, translation_domain) }}"
            {%- elseif attrvalue is sameas(true) -%}
                {{- attrname }}="{{ attrname }}"
            {%- elseif attrvalue is not sameas(false) -%}
                {{- attrname }}="{{ attrvalue }}"
            {%- endif -%}
        {%- endfor -%}
    {% endspaceless %}
{% endblock widget_attributes %} 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-07-23T13:14:26.310

您可以使用[表单主题](http://symfony.com/doc/current/cookbook/form/form_customization.html#what-are-form-themes)并覆盖默认主题。前任。了解[MopaBootstrapBundle](https://github.com/phiamo/MopaBootstrapBundle)主题如何使用 Twitter Bootstrap 理念[完全应用您想要的。](https://github.com/phiamo/MopaBootstrapBundle/blob/master/Resources/views/Form/fields.html.twig)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2016-05-16T20:14:09.927

如前所述，使用表单主题。您可以使用`parent()`宏来避免重复代码：

```
{%- block widget_attributes -%}
    {% if errors|length > 0 %}
        {% set _class = 'has-error' %}
        {% if attr.class is defined %}
           {% set _class = _class ~ ' ' ~ attr.class|trim %}
        {% endif %}
        {% set attr = attr|merge({'class': _class}) %}
    {% endif %}
    {{- parent() -}}
{%- endblock widget_attributes -%} 
```

# php - Consuming PHP webservice with .Net C#, error with array

> ID：11612361
> 
> 赞同：2
> 
> 时间：2012-07-23T12:17:02.313
> 
> 标签：php, .net, arrays, web-services

I've a problem calling a PHP Web Service from .Net application. This is the XML response and I think there is a problem with the *return* node

```
<?xml version="1.0" encoding="ISO-8859-1"?>
<SOAP-ENV:Envelope SOAP-ENV:encodingStyle="http://schemas.xmlsoap.org/soap/encoding/" xmlns:SOAP-ENV="http://schemas.xmlsoap.org/soap/envelope/" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:SOAP-ENC="http://schemas.xmlsoap.org/soap/encoding/">
<SOAP-ENV:Body>
    <ns1:infoprodottoResponse xmlns:ns1="http://wan3.edc.it">
        <result xsi:type="SOAP-ENC:Array" SOAP-ENC:arrayType=":[0]"></result>
        <error xsi:type="xsd:string">8u9lvDe3RBiGuXyL9lvM2tODlRMtcN77ya3S2LDEWEetBeRz/k4mXkK4hSqpgZOKilHYXgycj6Jtu8iBTfR1FQ==</error>
        <token xsi:type="xsd:string">5o58H00T96AWedhG1tnSc4xR+yXg7PQfQzXYVpri2AY=</token>
    </ns1:infoprodottoResponse>
</SOAP-ENV:Body> 
```

In *result* node the *SOAP-ENC:arrayType* attribute hasn't declared the array type. The array type must be declare if the *SOAP-ENC:arrayType* is present, isn't it? It must be declared also if the array is empty?

# emacs - Emacs relative line numbers on the right margin

> ID：11612364
> 
> 赞同：19
> 
> 时间：2012-07-23T12:17:12.403
> 
> 标签：emacs

Is it possible to display relative line numbers on the right margin of an Emacs buffer, and keep normal line numbers on the left margin?

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-12-28T14:48:54.790

这可以作为一个起点。加载此定义并执行`M-x` `linum-mode`.

```
(defun linum-relative-right-set-margin ()
  "Make width of right margin the same as left margin"
  (let* ((win (get-buffer-window))
     (width (car (window-margins win))))
    (set-window-margins win width width)))

(defadvice linum-update-current (after linum-left-right-update activate)
  "Advice to run right margin update"
  (linum-relative-right-set-margin)
  (linum-relative-right-update (line-number-at-pos)))

(defadvice linum-delete-overlays (after linum-relative-right-delete activate)
  "Set margins width to 0"
  (set-window-margins (get-buffer-window) 0 0))

(defun linum-relative-right-update (line)
  "Put relative numbers to the right margin"
  (dolist (ov (overlays-in (window-start) (window-end)))
    (let ((str (overlay-get ov 'linum-str)))
      (if str
      (let ((nstr (number-to-string
               (abs (- (string-to-number str) line)))))
        ;; copy string properties
        (set-text-properties 0 (length nstr) (text-properties-at 0 str) nstr)
        (overlay-put ov 'after-string
             (propertize " " 'display `((margin right-margin) ,nstr)))))))) 
```

看截图

![emacs 截图](../Images/c6a7186d7c7dad9535a8d95ec456e62d.png)

# reporting-services - SSRS 2008R2。图表线不使用抗锯齿

> ID：11612365
> 
> 赞同：2
> 
> 时间：2012-07-23T12:17:16.877
> 
> 标签：reporting-services, charts, line, antialiasing

*我在VS 2008*中使用折线图创建了一个报告当我在*VS* 中设计和渲染报告时- 线条边缘看起来很好，平滑。但是，一旦我将报告部署到*报告服务并通过**报告管理器*（或使用*Report Control* ）呈现它- 线条边缘就会变得不稳定。

有没有办法为图表线打开抗锯齿？

谢谢您的回答。亚历克斯。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-07T20:33:50.783

抗锯齿折线图：我很高兴为 SSRS 2012 的用户提供解决方案（未经 2008 年测试）：一旦图表属性 | 边缘将变得不稳定。填写 | 背景 | 颜色 = “无颜色”（透明）。如果您为图表的背景选择纯色，线条将是平滑的（抗锯齿）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-25T16:47:57.983

恐怕您无法使用 SSRS 2008/R2（或 2012 年）上的抗锯齿设置。Anti-Aliasing 选项仅在 Gauge 控件上显示。

SSRS 中的[图表组件是由 MS](http://forums.asp.net/post/3567326.aspx)从[Dundas](http://www.dundas.com/)购买的，但 Microsoft 对其进行了自己的更改，并且出于某种原因或其他原因，除了 Gauge 之外，其他所有东西都对最终用户隐藏了该属性。

# css - jcarousel 在 IE7 中不起作用

> ID：11612366
> 
> 赞同：0
> 
> 时间：2012-07-23T12:17:19.390
> 
> 标签：css, internet-explorer-7, jcarousel

我`jcarousel`在[这个](http://frontend.iwssites.com/creighton/home.html)页面上使用它，它在除*IE7之外的所有浏览器中都能正常工作*

幻灯片一次只能在箭头中间放置 3 张。*除了IE7*幻灯片溢出容器外，一切都正常运行。我在想这可能是一个*CSS问题，但对**IE7*的特定修复没有任何运气。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-23T12:53:40.083

我讨厌 IE 中的这个（错误/MS 功能）。

如果您`overflow:hidden`在一个没有两者的元素上使用`width`并`height`声明它将在 <= IE7 中不起作用。

如果可以，请尝试提供`#carousel_container`高度属性。（通过测量FF中页面元素的高度需要330px）

# android - android 使用 Multipartentity 将 .txt 文件上传到服务器

> ID：11612367
> 
> 赞同：1
> 
> 时间：2012-07-23T12:17:21.230
> 
> 标签：android

我尝试使用 MulitPartEntity 上传文本文件但无法上传..我的代码在下面提到请帮助我..

```
 File file = new File("/sdcard/" + strEmailAddress + ".txt");
    HttpClient httpclient = new DefaultHttpClient();

                HttpPost httppost = new HttpPost(strUrl);

        MultipartEntity reqEntity = new MultipartEntity(
                    HttpMultipartMode.BROWSER_COMPATIBLE);

            if (file.exists()) {
                Helper.printLogD(" file is exist ");
            }
            FormBodyPart bodyPart = new FormBodyPart("userfile",
                    (ContentBody) file);

        reqEntity.addPart(bodyPart);

        httppost.setEntity(reqEntity);

HttpResponse response = httpclient.execute(httppost); 
```

# javascript - Internet Explorer 中模块的加载超时

> ID：11612370
> 
> 赞同：3
> 
> 时间：2012-07-23T12:17:25.070
> 
> 标签：javascript, internet-explorer, module, cross-browser, requirejs

此问题仅出现在 Internet Explorer 9 中，适用于 Chrome 和 Firefox。

这是我加载所有依赖项的主文件：

```
// Filename: main.js

// Require.js allows us to configure shortcut alias
// There usage will become more apparent futher along in the tutorial.
require.config({
    paths: {
        jQuery: 'libs/jquery/jquery',
        Underscore: 'libs/underscore/underscore',
        Backbone: 'libs/backbone/backbone',
        JSON: 'libs/json2/json2',
        templates: '../templates'
    }

});

require([
    // Load our app module and pass it to our definition function
    'order!app',

    // Some plugins have to be loaded in order due to there non AMD compliance
    // Because these scripts are not "modules" they do not pass any values to the definition function below
    'order!libs/jquery/jquery-min',
    'order!libs/underscore/underscore-min',
    'order!libs/backbone/backbone-min',
    'order!libs/json2/json2-src'
], function(App){
    // The "app" dependency is passed in as "App"
    // Again, the other dependencies passed in are not "AMD" therefore don't pass a parameter to this function
    App.initialize();
}); 
```

这是浏览器崩溃的地方：

```
SomeRoute:function(){
    facade.console.log("SomeRoute");
    $("#toDelete").remove();
    this.user =  new User($.cookies.get('User'));
    var that = this;
    require(['views/SomeView'],function(SomeView){    // On this require
        if(that.user.get('usr_id') > 0){
            var view = new SomeView();
            $("#domelement").append(that.changeView(view));
        }
        else window.location = APP_URL + "/login#login";
    });
} 
```

当我走这条路线时，我收到了这个错误：

```
SCRIPT5022: Load timeout for modules: views/SomeView 
http://requirejs.org/docs/errors.html#timeout 
require.js, Line 27 Char 311 
```

但是 Chrome 或 Firefox 中什么都没有出现，一切正常。

**编辑**：此外，刷新我要求加载的页面非常好。只有在我走路线的时候。我必须刷新才能访问我的其他模块内容。

**编辑 2**：经过一些额外的测试后，我尝试将“enforceDefine：true”添加到我的 main.js 并更改了我的 require 调用。没有改变。此外，使用此函数调用的任何视图...

```
 confirmView: function(idDialog, view, opts1){
            facade.loader("body");
            require(["text!templates/common/dialog/confirm.phtml"], function(dialogTp){
                var opts = $.extend({}, facade.dialog.defaultOpts, opts1);
                // Delete previous dialog with same ID
                $("#"+idDialog).remove();

                // select the view we'll set
                var el = "#"+idDialog+" .modal-body";

                // Create our template with our options
                var contentDialog = _.template(dialogTp, { "option": opts, "text": "", "id": idDialog});
                $("body").append(contentDialog);

                require([view], function(viewClasse){
                    viewClasse.setElement("#"+idDialog+" .modal-body");
                    opts.preLoad(viewClasse);
                    viewClasse.render();

                    facade.unloader("body");

                    // twitter modal instance
                    facade.dialog.events(idDialog, opts, viewClasse);
                    $("#"+idDialog).modal(opts.modal);
                });
            });
        } 
```

...也会崩溃（超时）。

我真的不知道发生了什么...

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-26T13:10:32.800

我之前遇到过这个问题，它源于尝试使用`order`普通模块，而不是脚本。从旧的 1.0.x 文档：

> 订单插件最好与传统脚本一起使用。使用 define() 定义模块的脚本不需要它。可以混合搭配“订单！” 具有常规依赖项的依赖项，但只有“顺序！” 将按照彼此的相对顺序进行评估。

[http://requirejs.org/docs/1.0/docs/api.html#order](http://requirejs.org/docs/1.0/docs/api.html#order)

在任何情况下，您都应该使用 RequireJS 2.0，它取消了 order 插件[以支持`shim`configuration](http://requirejs.org/docs/api.html#config-shim)。

# android - 如何在安卓设备中播放 VOB 文件？

> ID：11612371
> 
> 赞同：1
> 
> 时间：2012-07-23T12:17:26.270
> 
> 标签：android

我是 Android 平台的新手。你能给我在安卓设备上播放 VOB 文件（没有转换）的示例代码吗？有没有可用的编解码器？如果是这样，您可以指定并指导我实施吗？

# linq - 无法格式化节点“ClientQuery”以作为 SQL 执行

> ID：11612377
> 
> 赞同：2
> 
> 时间：2012-07-23T12:17:45.350
> 
> 标签：linq, linq-to-sql

```
DataClassesDataContext MyDB = new DataClassesDataContext();
var id = from wineT in MyDB.Wineries
         where wineT.wineryID==Convert.ToInt32(
             from w in MyDB.WineTypes
             where w.kind==ddlSorti.SelectedItem.Text
             select w.wineryID)
         select  wineT.name;

GridView1.DataSource = id;
GridView1.DataBind(); 
```

我有这段代码，我没有任何错误，但是当我启动应用程序时，我收到这个错误“无法格式化节点'ClientQuery'以作为 SQL 执行”。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-23T13:25:25.927

您需要`FirstOrDefault()`在子选择中添加

```
var id = from wineT in MyDB.Wineries
         where wineT.wineryID==Convert.ToInt32(
             from w in MyDB.WineTypes
             where w.kind==ddlSorti.SelectedItem.Text
             select w.wineryID).FirstOrDefault()
         select  wineT.name; 
```

# linux - 堆栈指针的初始值是如何确定的？

> ID：11612378
> 
> 赞同：6
> 
> 时间：2012-07-23T12:17:46.957
> 
> 标签：linux, memory, 64-bit, stack

程序加载器初始化/加载`text`,`data+bss`区域。这些分配在靠近开始的进程的虚拟地址空间中。然后堆会向更大的地址增长（在 data+bss 之后）。堆栈从较大的地址向较低的地址增长。

我想知道堆栈指针的初始值是如何确定的。

如果我要求每个进程的虚拟地址限制（`ulimit -v`）我得到

```
virtual memory          (kbytes, -v) unlimited 
```

现在，这`unlimited`当然是指有限数量的可用于寻址的技术限制（在 64 位 Linux 上，我记得 48 位？！）

那么，除非应用不同`ulimit`的应用程序，否则堆栈指针被粗略地初始化为（vmem + 2 ^ 48 位的开始）就这么简单吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2019-10-27T03:10:51.393

这是一个高度依赖平台的问题，取决于您正在运行的程序的位数、正在使用的操作系统版本、系统配置选项、程序是单线程还是多线程以及其他因素：

*   对于现代 Linux 系统，单线程程序的初始堆栈基础由内核[地址空间布局随机化 (ASLR) 功能](https://en.wikipedia.org/wiki/Address_space_layout_randomization)控制。
*   在 ASLR 之前的古代，我认为主线程的堆栈曾经位于 32 位 Linux 的高固定地址。对于 ASLR 之前的 64 位（或者如果您禁用它），它可能位于远离其他一切的固定地址，但如果该地址取决于内核版本，我不会感到惊讶。
*   对于多线程 Linux 程序，堆栈是在启动线程的 clone() 调用之前由 glibc 使用 mmap 分配的（参见：[nptl/allocatestack.c](https://github.com/lattera/glibc/blob/master/nptl/allocatestack.c)）
*   在 32 位单线程 AIX 上，堆栈和堆（受 sbrk 控制）曾经共存于 16 256 mb 段之一（我忘了是哪一个。）我记得如果你编译的话，所有人都会有很多*乐趣*带有允许堆栈增长为堆的选项。
*   ...

# iphone - 不要在 iPhone 应用程序的照片库中显示视频

> ID：11612381
> 
> 赞同：1
> 
> 时间：2012-07-23T12:17:50.773
> 
> 标签：iphone, ios5, photo-gallery

我想要的只是通过应用程序仅在 iPhone 的 MediaLibrary 中显示照片的选择。

我不希望用户看到要从那里选择的视频。

实现这一目标的方式（机会）是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-23T12:24:46.583

使用以下代码显示 MediaLibrary。

```
imgPicker = [[UIImagePickerController alloc] init];
imgPicker.sourceType =  UIImagePickerControllerSourceTypePhotoLibrary;
imgPicker.delegate = self;
imgPicker.allowsEditing = YES;
[self presentModalViewController:imgPicker animated:YES]; 
```

它只会向您显示媒体库的图像。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-23T12:21:54.557

从[文档](http://developer.apple.com/library/ios/#DOCUMENTATION/UIKit/Reference/UIImagePickerController_Class/UIImagePickerController/UIImagePickerController.html)：

```
myImagePickerController.mediaTypes = 
    [[NSArray alloc] initWithObjects: (NSString *) kUTTypeImage, nil]; 
```

# jquery - winXP 不响应 jquery .ajax() 请求

> ID：11612382
> 
> 赞同：0
> 
> 时间：2012-07-23T12:17:53.937
> 
> 标签：jquery

我使用 .ajax 来取回通过 json (php) 传递的 html 数据。在win7上可以正常工作，但在winXP上不行。我在 php 文件的开头回显了一些发送数据的文本，但是有“空白页”回来了！

但除winXP外，在win7中一切正常。

```
function feedPage(div_id, feed_id, to, page){
    $.ajax({
        url: iloc,
        type: "POST",
        data: {a: "feed_page", div_id: div_id, feed_id: feed_id, page: page, to: to},
        dataType: "html",
        success: function(d){
            var obj = eval('('+d+')');
            $("#page_now").html(obj.page);
            if(div_id == 1) {
                div_id = 0;
            }
            hideButton(obj.hide_button, div_id, feed_id, obj.page);
            delete obj["page"];
            delete obj["hide_button"];
            if(obj.rss_title) {
                $("#feed_title").html("<h1>"+obj.rss_title[0]+"</h1>");
                delete obj["rss_title"][0];
                $("#last_page").html(obj.last_page);
            }
            if(obj.all_feeds) {
                $(".jaunumi").append("ir");
                delete obj["all_feeds"];
            }
            $("#feed_id ul").scrollTop(0);
            $("#feed_id").empty();
            for (var i in obj){
                $("#feed_id").append(obj[i].title);
                $("#feed_id").append(obj[i].description);
            }
            if(div_id == 0) {
                var feed_div_offset = $("#feed_id").offset();
                var feed_div_offset_top = feed_div_offset.top - 100;
                $('html, body').animate({ scrollTop: feed_div_offset_top }, 'slow');
            }
            $(".tablo_slash").html("/");
        }
    });
} 
```

# magento - Magento 的 XMPP 聊天插件

> ID：11612383
> 
> 赞同：2
> 
> 时间：2012-07-23T12:17:57.283
> 
> 标签：magento, plugins, xmpp, chat, openfire

我有 Magento 版本。1.7.0.2 社区版和[XMPP](http://en.wikipedia.org/wiki/Extensible_Messaging_and_Presence_Protocol) ( [Openfire](http://www.igniterealtime.org/projects/openfire/) 3.6.4) 安装在 Ubuntu 服务器上。

有没有像[Zopim Live Chat](http://www.magentocommerce.com/magento-connect/zopim-live-chat.html)或[YALC](http://www.magentocommerce.com/magento-connect/yalc-yet-another-live-chat.html)这样的插件可以配置为与我自己的 XMPP 服务器一起使用？

# javascript - javascript在asp.net的文本框中添加2个数字，不起作用

> ID：11612384
> 
> 赞同：1
> 
> 时间：2012-07-23T12:18:01.437
> 
> 标签：javascript, asp.net, textbox, onblur

这是我的 javascript，用于将 2 个文本框中的 2 个值添加到第三个文本框中。

它不工作...

```
<script type="text/javascript">

    function calculate(ctrl1, ctrl2, ctrl3) {

        var c1 = document.getElementById(ctrl1);
        var c2 = document.getElementById(ctrl2);
        var c3 = document.getElementById(ctrl3);

        if (c1 != null && c2 != null & c3 != null) {
            c3.value = Number(c1.value) + Number(c2.value);

        }
        document.forms[0].txteanum.focus();

    }    
</script> 
```

在文本框中

```
<asp:TextBox ID="txtQuantity" runat="server" onblur='javascript:calculate("txtQuantity","txtRate","TxtAmount")'></asp:TextBox> 
```

在这里查看我的答案[https://stackoverflow.com/a/11624756/1445836](https://stackoverflow.com/a/11624756/1445836)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-23T12:20:55.897

正确的：`if (c1 != null && c2 != null & c3 != null)`

至：`if (c1 != null && c2 != null && c3 != null)`失踪`&`

致评论者：抱歉，我从未听说过 Number()，因为我通常不使用前端（尤其是前端的数学），主要是 PHP/C#。

另外，`c2`,`c3`是`<input>`的 ?

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-23T12:34:43.287

也许你不能得到文本框。您是否尝试过给他们 clientidmode 静态的？

```
<asp:TextBox ID="txtQuantity" runat="server" onblur='javascript:calculate("txtQuantity","txtRate","TxtAmount")' ClientIDMode="static"></asp:TextBox> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-24T05:38:32.610

这是对我有用的java脚本

```
function Sum() {
                        var text1 = document.getElementById('<%= TextBox1.ClientID %>');
                        var text2 = document.getElementById('<%= TextBox2.ClientID %>');
                        if (text1.value.length == 0 || text2.value.length == 0) {
                                alert('Textbox1 and Textbox2 should not be empty');
                                return;
                        }

                        var x = parseInt(text1.value);
                        var y = parseInt(text2.value);
                        document.getElementById('<%= TextBox3.ClientID %>').value = x +y;
                } 
```

进入 .aspx 页面本身的文本框

```
<asp:TextBox ID="TextBox1" runat="server" onblur="Sum()"></asp:TextBox>
<asp:TextBox ID="TextBox2" runat="server" onblur="Sum()"></asp:TextBox>
<asp:TextBox ID="TextBox3" runat="server"></asp:TextBox> 
```

# python - xml解析错误：格式不正确 在蟒蛇

> ID：11612394
> 
> 赞同：0
> 
> 时间：2012-07-23T12:18:44.143
> 
> 标签：python, xml, parsing, sax

嗨，我正在抓取 XML 文件。对于 HTML，我使用了 scrapy，对于 XML，我决定使用`xml.sax`.

以下是示例代码*（不要将其视为真实示例）*只是为了查看我的疑问：

```
from xml.sax.handler import ContentHandler
import xml.sax

xmlFilePath = 'users/documents/jobstext.xml'

try:
    parser = xml.sax.make_parser( )
    parser.parse(open(xmlFilePath))

except (xml.sax.SAXParseException), e:
        print "*** PARSER error: %s" % e
        print e,"What is the error actually >>>>" 
```

以下是**XML 代码**：

```
<?xml version="1.0" encoding="utf-8"?>
<jobs>
  <reader><![CDATA[Identity Group]]></reader>
  <readerUrl><![CDATA[http://www.example.com]]></readerUrl>

  <job>
    <title><![CDATA[Architect - OT]]></title>
    <category><![CDATA[LTC/SNF]]></category>
    <jobId><![CDATA[139693]]></jobId>
    <specialization><![CDATA[LTC/SNF]]></specialization>
    <positionType><![CDATA[Travel]]></positionType>
    <description><![CDATA[<DIV>OT&nbsp;needed for a SNF in&nbsp;Oregon.&nbsp; Oregon is a dramatic land of many changes. From the rugged Oregon seacoast, the high mountain passes of the country for Travel Allied Professionals and Travel Nurses. Our clients are among the most prestigious healthcare facilities in the country.</DIV>
<DIV>&nbsp;</DIV>
 </description>
<P style="MARGIN: 0in 0in 0pt" class=MsoNormal><FONT size=3><SPAN style="FONT-FAMILY: Symbol; COLOR: black; mso-ascii-font-family: 'Times New Roman'">�&lt;/SPAN><SPAN style="COLOR: black"><FONT face="Times New Roman"><SPAN style="mso-spacerun: yes">&nbsp; </SPAN>Position will manage 24 ED Rooms with 24/7 accountability<o:p></o:p></FONT></SPAN></FONT></P>
<P style="MARGIN: 0in 0in 0pt" class=MsoNormal><FONT size=3><SPAN style="FONT-FAMILY: Symbol; COLOR: black; mso-ascii-font-family: 'Times New Roman'">�&lt;/SPAN><SPAN style="COLOR: black"><FONT face="Times New Roman"> <SPAN style="mso-spacerun: yes">&nbsp;</SPAN>55 FTEs <o:p></o:p></FONT></SPAN></FONT></P>
  </job>
</jobs> 
```

**结果：**

```
*** PARSER error: users/documents/jobstext.xml:13:150: not well-formed <invalid token>
users/documents/jobstext.xml:13:150: not well-formed <invalid token> What is the error actually >>>> 
```

当执行到达`<p>`标记和索引 150 并显示错误无效令牌时会发生什么？我期待这是因为`?`标签，因为您可以在上面的错误中看到这一点。

那么任何人都可以让我知道如何解决`not well-formed <invalid token>`xml解析中的这个错误，

如果我以错误的格式解释，我很抱歉，但希望我能很好地解释这个概念。

**编辑代码：**

```
<P class=MsoNormal style="MARGIN: 0in 0in 0pt"><SPAN style="FONT-SIZE: 10pt; COLOR: black; FONT-FAMILY: Arial">THE MOST COMPETITIVE RATES IN NM .....<o:p></o:p></SPAN></P>
<P class=MsoNormal style="MARGIN: 0in 0in 0pt"><SPAN style="FONT-SIZE: 10pt; COLOR: black; FONT-FAMILY: Arial">Busy <?xml:namespace prefix = st1 ns = "urn:schemas-microsoft-com:office:smarttags" /><st1:place w:st="on"><st1:PlaceName w:st="on">Acute</st1:PlaceName> <st1:PlaceName w:st="on">Care</st1:PlaceName> <st1:PlaceType w:st="on">Hospital</st1:PlaceType></st1:place> needs Occupational Therapists.&nbsp; Experience with </SPAN><SPAN style="FONT-SIZE: 10pt; FONT-FAMILY: Arial">Ortho, Neuro, vestibular balance, aquatic a plus!<SPAN style="COLOR: black">&nbsp; New grads welcome.<SPAN style="mso-spacerun: yes">&nbsp; </SPAN>Signon Bonus and help with relocation.<SPAN style="mso-spacerun: yes">&nbsp; </SPAN>For more details please call or email Carole 800 995 2673 X1329 or <A href="mailto:cs@coremedicalgroup.com"><SPAN style="mso-bidi-font-weight: bold; mso-bidi-font-size: 12.0pt">cs@coremedicalgroup.com</SPAN></A><o:p></o:p></SPAN></SPAN></P> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-23T12:23:48.123

您`description`没有结束标记，并且其中的 CDATA 部分永远不会终止……尽管我希望它在文档末尾而不是在该元素的第三行数据上出错。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-23T12:33:19.413

由于问题已经改变......

必须引用 XML 属性。

例如：`class=MsoNormal`应该是`class="MsoNormal"`

# android - Spinner OnItemSelected 意外触发导致 UI 问题

> ID：11612395
> 
> 赞同：2
> 
> 时间：2012-07-23T12:18:45.887
> 
> 标签：android, android-asynctask, android-spinner

我有一个可以访问互联网的应用程序。它解析带有标题和页面的页面（如 StackOverflow）。

我有一个 AsyncTask 可以获取这些页面的标题，并且我在页面底部有一个悬停的微调器。微调器有一个 OnItemSelectedListener 触发带有附加页面的 AsyncTask：

```
spinner1.setOnItemSelectedListener(new Spinner.OnItemSelectedListener() {

                public void onItemSelected(AdapterView<?> parent,
                        View view, int position, long arg3) {
                    Log.i("ONITEMSELECTED", "ClickedCount: " + clickedCount
                            + ", initCount: " + initCount);

                    if (initCount != clickedCount) {
                        clickedCount++;
                        Log.i("SELECTED", "Called");
                    } else {
                        initCount++;
                        String page = adapter2.getItem(position);
                        new ParseHTML()
                                .execute(
                                        "http://m.eksisozluk.com/index/today",
                                        page);
                        Log.i("SELECTED", "Page loading: " + page);
                    }
                }

                public void onNothingSelected(AdapterView<?> arg0) {
                    // TODO Auto-generated method stub

                }

            }); 
```

如您所见，我尝试计算 的点击次数和加载次数`onItemSelected`，但这会导致页面正确加载，但`Spinner`即使我选择了第 8 页，它也会将页面放入第 1 页。如何确保这种类型的加载有效在我的应用程序上？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-23T12:50:57.883

```
Spinner1.setSelection(position); 
```

在 onItemSelected 中使用它

# android - 在 android HTC 上卸载 Dropbox

> ID：11612396
> 
> 赞同：0
> 
> 时间：2012-07-23T12:18:51.533
> 
> 标签：android, dropbox, uninstallation

我有一个带有 htc sence 和 android 的 HTC。Dropbox 自动安装在我的手机上，但我不需要它，我使用驱动器。我怎样才能卸载它？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-23T12:20:41.030

不幸的是，HTC 已将其作为操作系统级别安装嵌入到操作系统中。它可以删除，但您需要根设备并手动删除。就个人而言，除非您了解如何操作，否则我不会推荐它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-23T12:31:32.360

我假设您是指新的 HTC 系列（One X、One V 等）

DropBox 随操作系统一起提供，因此您无法在不生根手机的情况下将其删除。

# javascript - 同位素网格布局使用空白空间

> ID：11612399
> 
> 赞同：0
> 
> 时间：2012-07-23T12:19:04.630
> 
> 标签：javascript, jquery, jquery-isotope

我有一个 300 像素的网格 (3x3)，每个网格字段都是 100 像素宽。

如果你在这里看看[jsfiddle](http://jsfiddle.net/pEZtj/) ，解释起来很简单。Onloads layout isotope 它工作得很好，但是如果你点击例如`li`元素#2，网格将被重新使用，但没有正确使用它的空间。

为什么旁边是`li`3 和空白区域？`li`4将适合那里！认为同位素会处理这个？如何得到这个？

谢谢你的帮助！frgtv10

[http://jsfiddle.net/pEZtj/](http://jsfiddle.net/pEZtj/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-23T13:35:51.030

问题在于您的适合订单功能。当您单击 2 时，它会将其阶数设置为 2.5（索引 1 + 1.5），这仍然小于阶数 4（索引 3）。同样的事情也适用于阶数为 2 的 3。

要解决此问题，您需要一个更复杂的订单功能。假设您只需要它来处理四个元素，那么下面的代码应该可以工作。

```
if(index == 0) { //element 1 should appear first
      order = 0;
}
else if ( $item.hasClass('large') && index % 3 == 1 ) {
      order = index + 2.5;
}
else if ( $item.hasClass('large') && index % 3 == 2 ) {
      order = index + 1.5;
}  
else {
      order = index;
} 
```

编辑：要使代码更漂亮并支持任何大小的行，您可以使排序函数如下所示：

```
int columns = 3;
if(index % columns == 0) { //element 1 should appear first
      order = index;
}
else if ( $item.hasClass('large')) {
      order = index + columns - (index % columns) + .5;
} 
else {
      order = index;
} 
```

# php - JQuery 得到错误 404 但可以在 Firebug 中看到响应

> ID：11612408
> 
> 赞同：0
> 
> 时间：2012-07-23T12:19:34.487
> 
> 标签：php, jquery, codeigniter

我的网站在 Codeigniter 中开发，使用 JQuery post 方法检索数据，它显示 404 not found 错误，而我在 firebug 中看到它显示正确的输出。

它在本地系统中运行良好。我的网站位于实时实例的子域下，这可能会导致问题？

请提示可能是什么问题。

这是我的 htaccess 文件

```
<IfModule mod_rewrite.c>
Options +FollowSymLinks
RewriteEngine on
RewriteBase /
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule ^(.*)$ index.php?/$1 [QSA,L]
</IfModule> 
```

这是萤火虫响应的详细信息

```
Connection  Keep-Alive
Content-Type    text/html
Date    Mon, 23 Jul 2012 12:28:26 GMT
Keep-Alive  timeout=3, max=29
Server  Apache/2.2.22 (Unix) mod_ssl/2.2.22 OpenSSL/0.9.8e-fips-rhel5 mod_bwlimited/1.4 mod_fcgid/2.3.6
Transfer-Encoding   chunked
X-Powered-By    PHP/5.2.17
Request Headers
Accept  text/html, */*; q=0.01
Accept-Encoding gzip, deflate
Accept-Language en-us,en;q=0.5
Connection  keep-alive 
```

这是我的代码

```
function updatepanel()
{
$.post("http://svims.noq.co.in/svims/get_token/28" ,
function (d)
{
    $("#tokenview").html(d);
}
);
} 
```

这是萤火虫的回应。

“网络错误：404 未找到 - [http://svims.noq.co.in/svims/token_generator](http://svims.noq.co.in/svims/token_generator) ”

token_generator POST [http://svims.noq.co.in/svims/get_token/28](http://svims.noq.co.in/svims/get_token/28)

404 未找到 2.36s

========================================= 问题是，子域名和控制器名称应该不一样。我重命名了控制器名称，它工作正常。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-23T13:08:07.017

有两件事要检查...

# 1号

除非绝对需要，否则不要对 ajax 请求使用完整的 URL。

```
$.post("http://svims.noq.co.in/svims/get_token/28" ,
//Should Become:
$.post("/svims/get_token/28" , 
```

# 2号

确保您没有回显任何内容或将任何错误或通知转储到您的页面上，因为它会抛出请求。在 chrome 中按 F12(Cmd+J) 打开开发人员工具包，然后转到网络选项卡，单击 xhr底部，然后再次提交您的 ajax 并注意 POST 返回，单击预览并查看它返回的内容.. 在 SO 上查看此问题 ..

[在 Chrome 中请求监控](https://stackoverflow.com/questions/1820927/request-monitoring-in-chrome)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-06T03:32:04.367

问题是，子域名和控制器名称不应该相同。重命名控制器名称，它工作正常。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-05-05T23:07:01.390

还有一点需要注意的是：一些虚拟主机默认安装子目录/子域，例如 /stats、/logs，如果您的虚拟主机有它们，您可能会收到 CI 的 404 错误

我在子域中创建了一个应用程序，并将一个控制器命名为“stats”，即使最终内容正确，也会收到 404 错误标头。更改控制器名称后，错误消失了。

# python - 如何只影响真正的 EOL 字符，而不是文本中的“\n”

> ID：11612410
> 
> 赞同：0
> 
> 时间：2012-07-23T12:19:45.340
> 
> 标签：python, eol

我有一个类似的字符串：

> Lorem ipsum '\n' ipsum lorem
> 
> 这是新段落。

我想删除 EOL 字符和这 2 段成为一行。但我不想影响 '\n' - 在这种情况下，它是字面上使用的（不是作为换行符）。

如果我只是做：

```
var.replace('\n', '') 
```

这将影响它：

> “Lorem ipsum '' ipsum lorem这是新的段落。”

我希望它是：

> “Lorem ipsum '\n' ipsum lorem这是新段落。”

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-23T12:32:39.827

```
s = r'''
Lorem ipsum '\n' ipsum lorem

And this is new paragraph.
'''

print(s.replace('\n', ''))

->"Lorem ipsum '\n' ipsum loremAnd this is new paragraph." 
```

在将字符串分配给变量时添加'r'告诉python将其解释为原始字符串文字，这意味着它将反斜杠视为文字反斜杠而不是转义字符。

# android - 在android中获取pdf的路径

> ID：11612414
> 
> 赞同：1
> 
> 时间：2012-07-23T12:19:57.753
> 
> 标签：android, android-layout, pdf, android-intent, file-browser

朋友们，我正在尝试为我的应用获取 pdf 的路径。假设您的 android 手机中有 n 个 pdf（可能在根目录或 sdcard 中），那么您如何以编程方式到达那里？有人可以给我一些提示吗？

提前致谢

卡兰

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-23T13:32:05.040

```
File images = Environment.getExternalStorageDirectory();
imagelist = images.listFiles(new FilenameFilter()
{
public boolean accept(File dir, String name)
{
return ((name.endsWith(".pdf")));
}
});
pdflist = new String[imagelist.length];
for(int i = 0;i<imagelist.length;i++)
{
pdflist[i] = imagelist[i].getName();
} 
```

另请参阅此链接[扫描 sdcard 中的 .mp3 文件所需的协助](https://stackoverflow.com/questions/9747670/assistance-required-for-scanning-the-mp3-files-in-sdcard)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-23T13:06:19.583

对于 SD 卡检查

```
 if (android.os.Environment.getExternalStorageState().equals(
            android.os.Environment.MEDIA_MOUNTED)) {
         File f = new File(Environment.getExternalStorageDirectory());

         File[] files = f.listFiles();
         File file;
         for (int i = 0; i < files.length; i++) {
                file = files[i];
         }
    }

    //For Internal Memory

    else {
            /* save the folder in internal memory of phone */

        File f = new File("/data/data/com.your.package/");
        File[] files = f.listFiles();
    } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-11T05:37:48.487

我能够通过递归搜索项目来获得它们....

[递归列出Java中的文件](https://stackoverflow.com/questions/2056221/recursively-list-files-in-java)

# sqlalchemy - instancemethod 对象不可订阅 in_ 方法

> ID：11612417
> 
> 赞同：1
> 
> 时间：2012-07-23T12:20:04.917
> 
> 标签：sqlalchemy, python-2.5

我有以下代码

```
from sqlalchemy import *
from sqlalchemy.orm import *

engine = create_engine("postgresql+psycopg2://test:password@localhost/test")
Session = sessionmaker(bind=engine)
session = Session()
metadata = MetaData()
metadata.bind = engine
table = Table('test_table', metadata, autoload = True)
a = session.query(table).filter(table.c.id.in_['1', '2']) 
```

这是遇到的错误。

```
Traceback (most recent call last):
  File "<stdin>", line 1, in <module>
TypeError: 'instancemethod' object is unsubscriptable 
```

我确信这是我做错的事情，因为我是 python 新手。提前谢谢你（我很确定这是一个菜鸟错误）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-23T12:36:06.900

[ColumnOperators.in_](http://docs.sqlalchemy.org/en/rel_0_7/core/expression_api.html#sqlalchemy.sql.operators.ColumnOperators.in_)是一个函数，因此必须调用。以下应该工作：

```
a = session.query(table).filter(table.c.id.in_(['1', '2'])) 
```

# java - 在java中获取具有焦点的组件

> ID：11612426
> 
> 赞同：2
> 
> 时间：2012-07-23T12:20:37.727
> 
> 标签：java, swing

我有 JFrame，上面有多个面板。每个面板都有一些在此基础上设计的组件。我想在获得焦点时更改组件（JTextField）的背景颜色。我有很多 TextField，我不想为所有组件编写 FocusListener。有没有办法以聪明的方式做到这一点。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-07-23T13:00:37.040

正如@Robin 所建议的那样，您绝对应该考虑您的设计。通过工厂创建和配置应用程序的所有组件有助于使其对需求更改具有鲁棒性，因为只有一个位置可以更改，而不是分散在整个代码中。

此外，每个组件都有一个单独的侦听器，使控件靠近发生焦点引起的属性更改的位置，因此不需要在全局侦听器中进行状态处理。

也就是说，全局 focusListener 的技术（如：小心使用！）解决方案是向 KeyboardFocusManager 注册 propertyChangeListener。

一个快速的代码片段（非常粗略的状态处理:-)

```
JComponent comp = new JPanel();
for (int i = 0; i < 10; i++) {
    comp.add(new JTextField(5));
}
PropertyChangeListener l = new PropertyChangeListener() {
    Component owner;
    Color background;
    @Override
    public void propertyChange(PropertyChangeEvent evt) {
        if (owner != null && evt.getOldValue() == owner) {
            owner.setBackground(background);
            owner = null;
        } 
        if (evt.getNewValue() != null) {
            owner = (Component) evt.getNewValue();
            background = owner.getBackground();
            owner.setBackground(Color.YELLOW);
        }
    }
};
KeyboardFocusManager.getCurrentKeyboardFocusManager().addPropertyChangeListener("permanentFocusOwner", l); 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-07-23T12:23:56.900

> 我不想为所有组件编写 FocusListener

所以你不想更换你的

```
JTextField textField = new JTextField(); 
```

经过

```
JTextField textField = TextFieldFactory.createTextField(); 
```

where`TextFieldFactory#createTextField`是一种实用方法，可以创建`JTextField`具有所需功能的 a。想详细说明一下吗？

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-23T13:10:04.787

另一种方法是编写自己的`TextFieldUI`实现侦听器的方法。但是，工厂方法要优雅得多。

例子：

```
import java.awt.Color;
import java.awt.EventQueue;
import java.awt.FlowLayout;
import java.awt.event.FocusEvent;
import java.awt.event.FocusListener;

import javax.swing.JComponent;
import javax.swing.JFrame;
import javax.swing.JTextField;
import javax.swing.UIManager;
import javax.swing.plaf.ComponentUI;
import javax.swing.plaf.metal.MetalTextFieldUI;

public class CustomUI extends JFrame {

    public static void main(String[] args) {
        EventQueue.invokeLater(new Runnable() {

            public void run() {
                UIManager.getDefaults().put("TextFieldUI", CustomTextFieldUI.class.getName());
                new CustomUI().setVisible(true);
            }

        });
    }

    public CustomUI() {
        setDefaultCloseOperation(DISPOSE_ON_CLOSE);
        setLayout(new FlowLayout());
        add(new JTextField(10));
        add(new JTextField(10));
        pack();
    }

    public static class CustomTextFieldUI extends MetalTextFieldUI implements FocusListener {

        public static ComponentUI createUI(JComponent c) {
            return new CustomTextFieldUI();
        }

        @Override
        public void installUI(JComponent c) {
            super.installUI(c);
            c.addFocusListener(this);
        }

        public void focusGained(FocusEvent e) {
            getComponent().setBackground(Color.YELLOW.brighter());
        }

        public void focusLost(FocusEvent e) {
            getComponent().setBackground(UIManager.getColor("TextField.background"));
        }

    }

} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-23T14:42:28.857

您可以将 a 附加`ProperyChangeListener`到[KeyboardFocusManager](http://docs.oracle.com/javase/7/docs/api/java/awt/KeyboardFocusManager.html) @ 监视适当的更改

# sql - Rails：与“MyModelClass.where(...”一起使用的 DISTINCT

> ID：11612432
> 
> 赞同：0
> 
> 时间：2012-07-23T12:20:56.253
> 
> 标签：sql, ruby-on-rails, activerecord, select, distinct

我知道你可以`MyModelClass.select("DISTINCT name")`在 Rails 中做到这一点。

也可`DISTINCT`用于?`MyModelClass.where(:name => 'me')`

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-23T12:22:38.297

是的，您可以链接这些调用。

```
MyModelClass.where(name: 'me').select('DISTINCT name') 
```

或者，[甚至更好](http://guides.rubyonrails.org/active_record_querying.html)

```
MyModelClass.where(name: 'me').uniq.pluck(:name) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-23T12:33:19.933

你可以简单地使用这个： MyModelClass.where(name: "me").uniq

生成的sql：

```
SELECT DISTINCT `my_tbl`.* FROM `my_tbl` WHERE `my_tbl`.`name` = 'xyz' 
```

# iphone - 提交iphone客户端更新

> ID：11612450
> 
> 赞同：-4
> 
> 时间：2012-07-23T12:22:13.423
> 
> 标签：iphone, ios, app-store

客户在 appstore 上有 iPhone 应用程序。这个应用程序的第二个版本是从一开始就开发的。现在，当我安装 appstore 版本并从 xcode 安装新版本时，它会因错误而崩溃：

> [ setValue:forUndefinedKey:]：这个类不符合键 usernameTextField 的键值编码。

在这种情况下提交更新的适当方法是什么

UPDT

我们在新版本中没有 usernameTextField

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-23T12:39:07.203

这几乎总是从代码中删除一个出口，而不是从故事板或 xib 文件中使用的所有地方删除它。查看这些并删除对该插座名称的引用。如果它们没有出现在图形编辑器中，请使用 Open As...->Source Code 并在文本中搜索`usernameTextField`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-23T12:36:57.913

看起来应用程序没有正确更新，旧版本的文件仍然存在。对您的应用程序进行干净构建（即清洁，然后构建），问题应该会自我纠正。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-23T13:20:05.260

通过使用以前版本中使用的名称重命名我的 AppDeligate 来修复

# c++ - 退出应用程序时崩溃

> ID：11612451
> 
> 赞同：1
> 
> 时间：2012-07-23T12:22:13.960
> 
> 标签：c++, windows, dll, crystal-reports

在这个嵌入了一些旧 Crystal Reports 查看器的 MFC 应用程序上，退出时我遇到了崩溃 `(the instruction at ... referenced memory at ...; the value could not be "read").`

无法在调试模式下运行，因为它只能在没有安装 Visual Studio 的 PC 上重现，而且我没有备用许可证可供使用。

我添加了一些日志记录，卸载 u2dpost.dll 的 FreeLibrary 调用失败（句柄不知何故变得无效）。

崩溃似乎出现在无法卸载的 dll 中的某些代码中。

我可以强制卸载吗？我愿意避免崩溃。

调用`exit(0)`（虽然丑陋）仍然会导致崩溃。

指令的地址相对于应用程序打开的报告是恒定的。

在另一台 PC（相同的 XP SP3 操作系统，相同的 Crystal dll，只是 Oracle 11g 与 10g）上，调试可能很容易（安装了 Visual C++），崩溃不会重现。

在有问题的 PC 上，它一直发生，如果我启动导出对话框（然后关闭它或实际导出，它没有区别）。

我该如何从这里开始？

编辑：

我发现这有一点不同：

IDatabasePtr pDB = pRep->GetDatabase();

pDB->AddRef(); // 使用这一行，它会在 XP 电脑上崩溃；没有它，它会在我的 Windows 7 工作站上崩溃

（Win & crash 在 CCmdTarget::OnFinalRelease() 最后一行：删除这个；）有什么建议吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2016-06-21T11:55:50.030

如果它有帮助，我在使用我们的一款旧软件时也面临同样的问题。

我测试了我的 sw 的调试版本并使用 DebugDiag 来捕获崩溃，结果发现当（释放）一些水晶报告接口（由 com 析构函数自动）时，它崩溃了。所以我最终向有问题的界面添加了一个额外的 AddRef。仅当 windows 版本为 7 或以上时。

# jakarta-ee - 尝试从 servlet 内的独立 POJO 类查找本地 EJB 会话时出现查找失败错误

> ID：11612452
> 
> 赞同：1
> 
> 时间：2012-07-23T12:22:18.280
> 
> 标签：jakarta-ee, ejb, lookup, session-bean

在一个 Java EE 应用程序中，我编写了一个布局管理器类。从这个类中，有时我需要从 EJB 模块访问 EJB 会话。

这是代码，这是生成的代码：

```
private MessagesFacadeLocal lookupMessagesFacadeLocal() {
    try {
        Context c = new InitialContext();
        return (MessagesFacadeLocal) c.lookup("java:global/CMS/CMS-ejb/MessagesFacade!cms.model.beans.MessagesFacadeLocal");
    } catch (NamingException ne) {
        Logger.getLogger(getClass().getName()).log(Level.SEVERE, "exception caught", ne);
        throw new RuntimeException(ne);
    }
} 
```

但是，在尝试使用它时，我得到了一个错误

> java.lang.RuntimeException：javax.naming.NamingException：
> 
> **查找“java:global/CMS/CMS-ejb/MessagesFacade!cms.model.beans.MessagesFacadeLocal”失败**
> 
> 在 SerialContext[myEnv={java.naming.factory.initial=com.sun.enterprise.naming.impl.SerialInitContextFactory，java.naming.factory.state=com.sun.corba.ee.impl.presentation.rmi.JNDIStateFactoryImpl， java.naming.factory.url.pkgs=com.sun.enterprise.naming} [根异常是 javax.naming.NameNotFoundException: CMS]

我不确定为什么会遇到这个问题。如何解决这个问题呢？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-23T13:58:13.617

错误消息说找不到“CMS”上下文，所以我猜您的应用程序名称实际上不是“CMS”。lookup("java:app/AppName") 返回什么？

如果您的 EJB 模块在同一个应用程序中，您可以使用 lookup("java:app/CMS-ejb-/...")，这让您在更改应用程序名称时更加灵活。

# delphi - 为什么 IdHTTPProxyServer 会更改请求的 HTTP 版本？

> ID：11612459
> 
> 赞同：3
> 
> 时间：2012-07-23T12:23:03.647
> 
> 标签：delphi, indy, indy10

最近发现IdHTTPProxyServer会自动将所有HTTP/1.1请求改为HTTP/1.0请求。这对我来说有点奇怪，因为我认为代理服务器不应该更改 HTTP 版本。有什么办法可以强制代理服务器不更改 HTTP 版本？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-23T20:00:34.597

`TIdHTTPProxyServer`目前不支持 HTTP 1.1。更改 HTTP 版本的行为是硬编码的，因为`TIdHTTPProxyServer`实际上并没有按原样传递客户端的请求，而是发送自己的 HTTP 1.0 请求，其中包含客户端请求的数据。您可以更改的唯一方法是编辑`IdHTTPProxyServer.pas`然后重新编译 Indy。

# iphone - 如何在一个视图中将一个 UIPickerView 用于多个文本字段？

> ID：11612460
> 
> 赞同：8
> 
> 时间：2012-07-23T12:23:06.570
> 
> 标签：iphone, xcode, uitextfield, uipickerview

我在一个视图中有 8 个文本字段。我想使用pickerview填充每个。我可以有 1 个pickerview 来为不同的文本字段显示来自不同数组的不同项目列表吗？

有人可以解释我如何使用示例代码以编程方式进行操作吗？

另外，如何在视图加载时隐藏选择器视图，并且仅当我单击带有相应数据列表的文本字段时才应显示它？当我选择数据时它应该消失，当我单击具有相应数据列表的不同文本字段时它会重新出现，依此类推。

我是 xcode 的新手。任何帮助都感激不尽。谢谢你。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-07-23T12:37:49.860

您只能使用一个 PickerView，根据某些条件显示不同的数据。

我的想法如下：你可以创建，比如说，8 个不同的数组——一个用于填充 UIPickerView，具体取决于所点击的 UITextField。在接口中将它们声明为 NSArray 并在 viewDidLoad 中初始化：

```
array1st = ...
array2nd = ...
array3d = ...
//and until 8. 
```

然后你创建另一个只是为了指向应该填充它的数组（如`NSArray *currentArray`），你甚至不需要初始化它=它将仅用于指向正确的数组。

因此，您应该将 UITextFields 的委托设置为您的视图控制器，并在方法中`textFieldShouldBeginEditing`检查谁是 UITextField，将正确的数组分配为 currentArray，重新加载 UIPickerView `reloadData`，并在同一`textFieldShouldBeginEditing`方法中返回 NO。currentTextField 是一个指针，仅用于知道正在“编辑”的 currentUITextField 是什么 - 我们需要存储它以便能够在选择器中选择数据后设置文本。在界面中声明 currentTextField。

```
- (BOOL)textFieldShouldBeginEditing:(UITextField *)textField
{
    currentTextField = textField;
    if (textField == myFirstTextView)
    {
        currentArray = array1st;
        [pickerView reloadData];
        [self animatePickerViewIn];
        return NO;
    }
    //and this way until 8th
} 
```

因此，当您的视图控制器实际上是 UIPickerViewDelegate 时，您根据当前数组填充 UIPickerView 并且您不需要更改任何内容，只需使用 currentArray 作为从中获取数据的数组即可。

现在，显示pickerView：

连接 IBOutlet 后，在 viewDidLoad 中你应该做两件事：设置 UIPickerView 的框架并将其添加为子视图：

```
pickerView.frame = CGRectMake(0,self.view.frame.size.height, pickerView.frame.size.width, pickerView.frame.size.height);
pickerView.delegate = self;
pickerView.dataSource = self;
//or you can do it via Interface Builder, right click the pickerView and then connect delegate and dataSource to the file's owner
[self.view addSubview:pickerView]; 
```

现在您需要创建名为 的方法`animatePickerViewIn`，我们在用户点击 UITextField 时调用该方法。

```
-(void)animatePickerViewIn
{

    [UIView animateWithDuration:0.25 animations:^{
        [pickerView setFrame:CGRectMake(0, pickerView.frame.origin.y-pickerView.frame.size.height, pickerView.frame.size.width, pickerView.frame.size.height)];
    }];
} 
```

在pickerView中加载数据：

```
-(NSInteger)pickerView:(UIPickerView *)pickerView numberOfRowsInComponent:(NSInteger)component
{

    return [currentArray count];
}

-(NSInteger)numberOfComponentsInPickerView:(UIPickerView *)pickerView
{
    return 1;
}

-(NSString*)pickerView:(UIPickerView *)pickerView titleForRow:(NSInteger)row forComponent:(NSInteger)component
{
    return [currentArray objectAtIndex:row];
} 
```

并且当用户在pickerView 中选择行时，您将收到它作为委托方法。所以只需将 currentTextField 的文本设置为选定的值：

```
-(void)pickerView:(UIPickerView *)pickerView didSelectRow:(NSInteger)row inComponent:(NSInteger)component
{
    //and here you can do in two ways:
    //1
    [currentTextField setText:[currentArray objectAtIndex:row]];
    //2
    [currentTextField setText:[self pickerView:pickerView titleForRow:row inComponent:component]];
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-23T12:50:08.943

用这个。

```
 - (void)textFieldDidBeginEditing:(UITextField *)textField{
   MyPickervie.delegate=self;
 }
 - (NSInteger)numberOfComponentsInPickerView:(UIPickerView *)myLocationPickerView;
{
  return 1;
 }

-(void)myLocationPickerView:(UIPickerView *)myLocationPickerView didSelectRow:           (NSInteger)row inComponent:(NSInteger)component;
 {

    switch(textfield.tag){
     Case 0:
            label.text=[arraNo objectAtindex:row];
            break;
     default: break;
  }
 }
 -(NSInteger)myLocationPickerView:(UIPickerView *)myLocationPickerView  numberOfRowsInComponent:(NSInteger)component;
{

switch(textfield.tag){
     Case 0:
            return [arrayNo count];
            break;
     default: break;
  }
}

-(NSString *)myLocationPickerView:(UIPickerView *)myLocationPickerView titleForRow:(NSInteger)row forComponent:(NSInteger)component;
 {
   switch(textfield.tag){
     Case 0:
            return [arrayNo objectAtIndex:row];
            break;
     default: break;
  }

} 
```

您必须在切换条件下使用 8 个案例来调用不同的数组并将其设置到 pickerView 中。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-23T12:52:52.067

我已经用 3 个文本字段测试了这段代码。

并找到您问题的完美解决方案。

1) 取一个全局 UITextField。

2）在文本字段编辑的委托方法上，将全局文本字段设置为当前文本字段。

3）在选择器值更改方法上，设置全局文本字段的文本，它将更改所选文本字段的值。

下面的代码工作正常。

享受编码。

```
- (NSInteger)numberOfComponentsInPickerView:(UIPickerView *)thePickerView 
{
return 1;
}

- (NSInteger)pickerView:(UIPickerView *)thePickerView numberOfRowsInComponent:(NSInteger)component 
{   
return 10;
}

- (NSString *)pickerView:(UIPickerView *)thePickerView titleForRow:(NSInteger)row forComponent:(NSInteger)component 
{
return [NSString stringWithFormat:@"Test %d",row + 1];

}

- (void)pickerView:(UIPickerView *)thePickerView didSelectRow:(NSInteger)row inComponent:(NSInteger)component 
{

test.text = @"XYZ";

}

- (BOOL)textFieldShouldBeginEditing:(UITextField *)textField
{
test = textField;

return YES;
}

- (BOOL)textFieldShouldReturn:(UITextField *)textField
{    
[textField  resignFirstResponder];

return YES;
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-23T12:35:33.747

1.使用带有完成barButtonItem的工具栏，它应该隐藏pickerView。

2.现在给你的 textFields tagValues 像：`textFiled1.tag=100;`然后使用这个标签值填充你的 pickerView 数组。

3.当用户从pickerView中选择任何Value时，在其委托方法中写入

```
if(textField.tag== @"Your Tag Value")
{  
      textField.text=[pickerArray objectAtIndex:row];
} 
```

我想您可以自己尝试代码，现在您已经掌握了解决方案的要点。祝您好运！

# c - execv 的 argv 参数的 const 正确性

> ID：11612461
> 
> 赞同：2
> 
> 时间：2012-07-23T12:23:07.047
> 
> 标签：c, constants, implicit-conversion, qualifiers, multiple-indirection

> **可能重复：**
> [C 中的双指针 const 正确性警告](https://stackoverflow.com/questions/5055655/double-pointer-const-correctness-warnings-in-c)

看看这里的表格：http: [//pubs.opengroup.org/onlinepubs/009695399/functions/exec.html](http://pubs.opengroup.org/onlinepubs/009695399/functions/exec.html)

我们看到以下内容在 C 中是无效的：

```
void f(const char * const argv[])
{
    (void)argv;
}

int main(int argc, char *argv[])
{
    (void)argc;
    f(argv);
    return 0;
}

test.c: In function 'main':
test.c:9: warning: passing argument 1 of 'f' from incompatible pointer type
test.c:1: note: expected 'const char * const*' but argument is of type 'char **' 
```

为什么这是无效的？在我看来，这`const char * const argv[]`只是比`char * argv []`,“更恒定”（并且在 C++ 中是允许的），那么为什么它在 C 中无效？

# android - 如何阻止或阻止任何其他 android 应用程序调用我的应用程序

> ID：11612465
> 
> 赞同：0
> 
> 时间：2012-07-23T12:23:12.920
> 
> 标签：android, android-intent

出于安全原因，我正在开发一个 Android 应用程序，我想阻止或阻止任何其他 Android 应用程序调用或访问我的应用程序。

我们需要在 manifest.xml 中赋予一些权限吗？

如果不是，那么最好的方法是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-23T14:51:48.067

> 出于安全原因，我正在开发一个 Android 应用程序，我想阻止或阻止任何其他 Android 应用程序调用或访问我的应用程序。

您没有费心解释“调用或访问 [您的] 应用程序”是什么意思。

第三方应用程序无法启动您的活动、向您的服务发送命令、向您的接收器发送广播或访问您的提供商的内容，除非这些组件已导出。如果组件是内容提供者或`<intent-filter>`清单中有元素，则默认导出组件。否则，默认情况下不会导出它们。清单中有一个`android:exported`属性可用于覆盖默认值 - 仅需要（甚至是一个好主意）才能使 a`<provider>`不导出。其他一切都可以而且应该简单地跳过`<intent-filter>`以保持对您的应用程序的私密性。

因此，根据定义，“其他 android 应用程序”将能够启动您的主要活动，因为它有一个`<intent-filter>`.

# objective-c - didReceiveMemoryWarning 崩溃

> ID：11612466
> 
> 赞同：0
> 
> 时间：2012-07-23T12:23:14.957
> 
> 标签：objective-c, ios, dealloc, didreceivememorywarning, viewdidunload

- 使用 ARC

-我有 5 个独立的视图控制器，它们都继承了我创建的名为“UIViewControllerWithLoadingView”的类，该类是 UIViewController 的子类。

- 在子类和超类中，我分配和解除分配属性如下：

```
@property (strong, nonatomic) NSURLConnection *urlConnection;

- (void)viewDidUnload
{
    [super viewDidUnload];
    self.urlConnection=nil;
} 
```

- 现在当 didReceiveMemoryWarning 被调用时，子类 viewDidUnload 方法可以正常工作。BBBUUTTT 如果我在超类 UIViewControllerWithLoadingView 中将属性设置为 nil，应用程序将崩溃。特别是在我将子类的属性设置为零的地方。所以现在我只是没有在超类中将属性设置为 nil，这会成为问题，因为活动字节只是在运行时不断堆积。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-23T14:00:50.000

经验法则是“清理”的方法——如 dealloc 或 viewDidUnload——应该在完成其他所有操作后调用 super。（以及“设置”的方法——比如 init——首先调用 super。）如果没有看到你所有的子类实现，我无法判断这是否是你的问题，但这将是一个开始的地方。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-24T14:07:22.917

问题出在超类中，我有一个扩展 uiview 的视图，该视图具有对视图控制器的属性引用。好吧，在 arc 中会自动调用 dealloc，因此 dealloc 实际上会将 viewcontroller 本身设置为 nil ，从而导致崩溃。一旦我在自定义视图类中删除了视图控制器的属性，问题就不再发生

# java - 在 Hashtable get() 操作中检查 null

> ID：11612467
> 
> 赞同：2
> 
> 时间：2012-07-23T12:23:14.867
> 
> 标签：java, collections

根据类的java文档`Hashtable`：

```
This example creates a hashtable of numbers. It uses the names of the numbers as keys:

   Hashtable<String, Integer> numbers
     = new Hashtable<String, Integer>();
   numbers.put("one", 1);
   numbers.put("two", 2);
   numbers.put("three", 3);

To retrieve a number, use the following code:

   Integer n = numbers.get("two");
   if (n != null) {
     System.out.println("two = " + n);
   } 
```

`if (n != null) {`当 Hashtable 不允许键和值中的空值时，为什么在上述代码中的 get() 操作期间使用它 ？

如果它是为 HashMap 编写的，那么它就可以了，因为 HashMap 允许键和值中的空值，但为什么将它用于 Hashtable？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-23T12:25:38.690

这只是一个好习惯，因为如果指定的键在 Hashtable 中不存在，该[`get()`](http://docs.oracle.com/javase/6/docs/api/java/util/Hashtable.html#get%28java.lang.Object%29)方法将返回。 在上面的代码示例中，我们可以省略它，因为我们知道密钥就在那里，但在现实生活中的应用程序中通常并非如此。`null`
`"two"`

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-23T12:26:16.903

如果键不存在于地图/表中，则 get 返回 null。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-07-23T12:42:34.173

你可以写

```
if (number.containsKey("two")) {
    Integer n = numbers.get("two");
    System.out.println("two = " + n);
} 
```

虽然这更清楚，但它有两个问题。

1.  它比较慢，因为它访问地图两次。
2.  如果集合在另一个线程中更新，则它具有潜在的竞争条件。

鉴于已选择线程安全 Hashtable，性能似乎不如线程安全重要，因此第二个原因更有可能。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-23T12:32:21.287

如果指定的键不存在，get 返回 Null 作为值

# windows-8 - 从 byte[] 数组共享 StorageItems

> ID：11612470
> 
> 赞同：1
> 
> 时间：2012-07-23T12:23:35.910
> 
> 标签：windows-8, microsoft-metro, windows-runtime, sharing

我想在我的 WinRT C# Metro 应用程序（Windows Release Preview）中实现共享源合同。我的应用程序正在存储任意文件。不在文件系统中，而是我通过 WCF 服务将数据作为`byte[]`. 现在我想在我的应用程序中分享这样的“文件”。

我看到的标准数据格式的唯一可能性是`SetStorageItems()`使用`DataPackage`. 因此，我面临着将数据从我的字节数组转换为`StorageFile`可以共享的挑战。我找到了`StorageFile.CreateStreamedFileAsync()`方法并想以这种方式使用它：

```
// filename: string
// fileContent: byte[]

// ... setting DataPackage title and description ...

DataRequestDeferral deferral = args.Request.GetDeferral();

var file = await Windows.Storage.StorageFile.CreateStreamedFileAsync(filename,
    async stream => await stream.WriteAsync(fileContent.AsBuffer()), null);
args.Request.Data.SetStorageItems(new List<IStorageItem> { file });

deferral.Complete(); 
```

它编译得很好，但它没有按预期工作。我已经尝试使用标准邮件应用程序进行共享。邮件共享视图打开，我可以创建新邮件。显示的文件没有缩略图（如预期的那样），但无法发送电子邮件。它显示发送进度几分钟，然后出现错误：“无法与邮件共享 {filename}。”。共享魅力显示“出了点问题”和“[...] 邮件现在无法共享。请稍后再试。”。

当我从文件系统加载时，它工作得很好`StorageFile`：邮件打开并在几秒钟内发送，这里没有问题。所以要么我用`CreateStreamedFileAsync()`错了，要么这个方法有一个错误，你怎么看？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-15T11:26:08.600

在传递给 CreateStreamedFileAsync 的回调中，您需要实际处理对象 - 向操作系统发出您已完成的信号。

[在这里](http://socialeboladev.wordpress.com/2013/03/15/how-to-use-createstreamedfileasync/)写了一个完整的例子

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-23T14:56:01.600

邮件应用程序不是共享文件的目标。来自[http://blogs.msdn.com/b/b8/archive/2012/06/14/building-the-mail-app.aspx](http://blogs.msdn.com/b/b8/archive/2012/06/14/building-the-mail-app.aspx)：“邮件支持共享文本、链接和图片。”

请记住，共享合同有 2 个部分：共享源和共享目标。如您所知，它们之间可以共享许多不同的数据格式，例如文本、图片、URI 和文件。支持的不同数据格式的完整列表位于[http://msdn.microsoft.com/en-us/library/windows/apps/hh771179.aspx](http://msdn.microsoft.com/en-us/library/windows/apps/hh771179.aspx)。

我建议您使用 Share Target Sample 应用程序来测试您的文件是否被正确共享 - 共享到此，它将显示从您的应用程序共享的所有内容作为源（并且它确实接受文件进行共享）。您可以从[http://code.msdn.microsoft.com/windowsapps/Sharing-Content-Target-App-e2689782](http://code.msdn.microsoft.com/windowsapps/Sharing-Content-Target-App-e2689782)下载它。您还可以使用 Share Source Sample 应用程序作为示例，并利用此应用程序中的代码；您可以从[http://code.msdn.microsoft.com/windowsapps/Sharing-Content-Source-App-d9bffd84](http://code.msdn.microsoft.com/windowsapps/Sharing-Content-Source-App-d9bffd84)下载它。

希望有帮助！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-24T09:26:33.217

好的，也许邮件应用程序的预览版没有正确处理共享目标合同。[使用来自http://code.msdn.microsoft.com/windowsapps/Sharing-Content-Target-App-e2689782](http://code.msdn.microsoft.com/windowsapps/Sharing-Content-Target-App-e2689782)的 SDK 示例应用程序“共享内容目标应用程序” ，使用上面发布的方法共享在内存中创建的 StorageItem`StorageFile.CreateStreamedFileAsync()`工作正常。

因此，当您想要共享内存`byte[]`数组时，这就是您应该采用的方式。对于测试，当你想与它共享来自另一个应用程序的数据时，请确保共享目标应用程序不在 Visual Studio 中运行。然后分享侧边栏就神秘的自动消失了……

# antlr - 从规则 A 调用规则 B 的令牌

> ID：11612472
> 
> 赞同：0
> 
> 时间：2012-07-23T12:23:41.490
> 
> 标签：antlr, token, rule

我想知道是否以及如何从规则 A 中调用规则 B 的令牌，如下例所示：

//规则A

description :'Description' ':' primaryActor.actorName ...... //我试过这种方式，但是不行。;

//规则B1

primaryActor :actorName PA_TYPE ;

//规则B2

secondaryActor :actorName SA_TYPE ;

演员名 :ARTICLE SMALL_NOUN ; /* ... */

所以，“primaryActor”和“secondaryActor”都有一个“actorName”。如果我们在解释器中编写一个测试，例如“Description: a Doctor...”，'Doctor 应该分配给'primaryActor.actorName。因为'actorName'对于主要和次要演员的类型相同，所以我不想为每个演员创建一个actorName，但能够通过其包含规则区分actorName。

# c - 在不检查证书的情况下使用 OpenSSL，但我的数据是否仍在加密？

> ID：11612473
> 
> 赞同：1
> 
> 时间：2012-07-23T12:23:42.070
> 
> 标签：c, soap, encryption, https, openssl

我在 Linux 上使用 OpenSSL 编写了一个 SOAP 客户端。我基本上从 OpenSSL 网站和其他在线资源收集了一些信息，以下代码总结了我如何将 XML 发送到 SOAP 服务器。

```
 SSL_library_init();
  SSL_load_error_strings();
  ERR_load_BIO_strings();
  OpenSSL_add_all_algorithms();

  SSL_CTX* ctx = SSL_CTX_new(SSLv23_client_method());
  SSL* ssl;
  BIO* bio = BIO_new_ssl_connect(ctx);
  if (bio == NULL) {
    SSL_CTX_free(ctx);
    return false;
  }

  BIO_get_ssl(bio, &ssl);
  SSL_set_mode(ssl, SSL_MODE_AUTO_RETRY);
  char target[]  = "api.betfair.com:https";
  BIO_set_conn_hostname(bio, target);
  BIO_set_nbio(bio,1);
  while (1) {
    if (BIO_do_connect(bio) <= 0) {
      if (!BIO_should_retry(bio)) {
    cout << "Connect failed." << endl;
    BIO_free_all(bio);
    SSL_CTX_free(ctx);         
    return false;
      }      
    } else {
      break;
    }
  }
  KeepAliveReq KeepAliveReq(sessionTok,0,iMode);
  string strMessage = KeepAliveReq.GetXML(false);
  BIO_puts(bio,strMessage.c_str()); 
```

这工作得很好，并且已经可靠（如果有点慢）几个星期了。我故意省略了 SSL 握手过程的证书检查阶段，因为当时我并没有真正了解它的细节，而且我发送到的服务器是一家知名公司的。我的问题是我可以假设我的数据是否被 SSL 代码加密？据我从我的代码中可以看出，我没有明确要求进行加密，我假设这只是作为 SSL 通信过程的一部分发生。我的证书检查遗漏是否损害了我的应用程序在加密方面的安全性？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-23T12:32:05.013

您的数据仍在被加密——但问题是，给谁？

证书检查过程是我们验证对方是他们声称的身份的地方。当有人订购 SSL 证书时，分发证书的公司将采取措施确保他们将证书和密钥提供给为其订购的域（或其他实体）的合法所有者。然后，该公司将使用他们自己的详细信息签署证书，而这些详细信息又由您的计算机已经信任的公司签署。

当您建立连接时，您的计算机会检查链接以确保证书是合法的，即它已由您的计算机信任的人签名（可能通过多层信任间接签署）。

跳过此过程意味着任何人都可以在自己的计算机上为任何给定网站生成证书。假设他们可以劫持您建立的连接，他们可以使您的系统轻松相信它是知名公司。

您需要检查证书以确保安全。

# python - Python类型比较

> ID：11612481
> 
> 赞同：0
> 
> 时间：2012-07-23T12:24:08.567
> 
> 标签：python, instance, dynamic-typing

好的，所以我有一个包含三个值的元组列表`(code, value, unit)`

当我要使用它时，我需要检查一个值是一个 str、一个列表还是一个矩阵。（或检查是否列表，然后再次检查是否列表）

我的问题只是我应该这样做，还是有更好的方法？

```
for code, value, unit in tuples:
    if isinstance(value, str): 
        # Do for this item
    elif isinstance(value, collections.Iterable):
        # Do for each item
        for x in value:
             if isinstance(x, str):
                  # Do for this item
             elif isinstance(x, collections.Iterable):
                  # Do for each item
                  for x in value:
                      # ...
             else:
                  raise Exception
    else:
        raise Exception 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-23T12:28:48.003

最好的解决方案是避免混合这样的类型，但如果你坚持使用它，那么你写的很好，除非我只检查`str`实例。如果它不是字符串或可迭代的，那么无论如何你都会得到一个更合适的异常，所以不需要自己做。

```
for (code,value,unit) in tuples:
    if isinstance(value,str): 
        #Do for this item
    else:
        #Do for each item
        for x in value:
             if isinstance(value,str):
                  #Do for this item
             else:
                  #Do for each item
                  for x in value: 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-23T12:28:00.243

这行得通，但每次你打电话时`isinstance`，你应该问自己“我可以添加一个方法`value`吗？” 这会将代码更改为：

```
for (code,value,unit) in tuples:
    value.doSomething(code, unit) 
```

为此，您必须将类型`str`和列表包装在实现的辅助类型中`doSomething()`

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-23T12:33:31.523

您的方法的替代方法是将此代码分解为更通用的生成器函数（假设 Python 2.x）：

```
def flatten(x):
    if isinstance(x, basestring):
        yield x
    else:
        for y in x:
            for z in flatten(y):
                yield y 
```

[（这也包含了邓肯的回答](https://stackoverflow.com/a/11612542/279627)中建议和解释的简化。）

现在，您的代码变得非常简单易读：

```
for code, value, unit in tuples:
    for v in flatten(value):
        # whatever 
```

将代码分解出也有助于在代码中的多个位置处理这种数据结构。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-23T12:28:05.827

只需使用元组并捕获任何异常。跳之前不要看:)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-23T12:36:25.970

递归会有所帮助。

```
def processvalue(value):
  if isinstance(value, list): # string is type Iterable (thanks @sven)
    for x in value:
      processvalue(value)
  else:
    # Do your processing of string or matrices or whatever.

# Test each the value in each tuple.
for (code, value, unit) in tuples:
  processvalue(value) 
```

这是处理嵌套结构的一种更简洁的方法，并且还将使您能够处理任意深度。

# java - JFrame 观察到 Controller 但从未收到通知

> ID：11612493
> 
> 赞同：4
> 
> 时间：2012-07-23T12:24:55.010
> 
> 标签：java, swing, netbeans, observer-pattern, gui-builder

从[另一个问题](https://stackoverflow.com/questions/5784204/can-an-observable-class-be-constructed-as-a-singleton)，我继续使用 Singleton Observable。为什么 ArticleSelect.update() 不执行？

```
package net.bounceme.dur.usenet.swing;

import java.util.Observable;
import java.util.Observer;
import java.util.logging.Logger;
import javax.swing.ListModel;
import net.bounceme.dur.usenet.controller.ArticleDefaultListModel;
import net.bounceme.dur.usenet.controller.Controller;

public class ArticleSelect extends javax.swing.JPanel implements Observer {

    private static final Logger LOG = Logger.getLogger(ArticleSelect.class.getName());
    private Controller controller = Controller.getInstance();
    private ListModel defaultListModel = new ArticleDefaultListModel();

    public ArticleSelect() {
        controller.addObserver(this);
        initComponents();
    }

    /**
     * This method is called from within the constructor to initialize the form.
     * WARNING: Do NOT modify this code. The content of this method is always
     * regenerated by the Form Editor.
     */
    @SuppressWarnings("unchecked")
    // <editor-fold defaultstate="collapsed" desc="Generated Code">
    private void initComponents() {

        jScrollPane1 = new javax.swing.JScrollPane();
        jList1 = new javax.swing.JList();
        jScrollPane2 = new javax.swing.JScrollPane();
        jTextPane1 = new javax.swing.JTextPane();

        setLayout(new java.awt.BorderLayout());

        jList1.setModel(defaultListModel);
        jScrollPane1.setViewportView(jList1);

        add(jScrollPane1, java.awt.BorderLayout.WEST);

        jScrollPane2.setViewportView(jTextPane1);

        add(jScrollPane2, java.awt.BorderLayout.CENTER);
    }// </editor-fold>
    // Variables declaration - do not modify
    private javax.swing.JList jList1;
    private javax.swing.JScrollPane jScrollPane1;
    private javax.swing.JScrollPane jScrollPane2;
    private javax.swing.JTextPane jTextPane1;
    // End of variables declaration

    @Override
    public void update(Observable o, Object arg) {
        LOG.info("trying to observe.." + arg);
        LOG.info(controller.getGroup());
        //update defaultListModel
    }
} 
```

扩展 Observe 的对象从 Controller.setGroup() 调用 notifyObservers：

```
package net.bounceme.dur.usenet.controller;

import java.util.Observable;
import java.util.logging.Logger;

public class Controller extends Observable {

    private static final Logger LOG = Logger.getLogger(Controller.class.getName());
    private String group;
    private static Controller instance;

    protected Controller() {
    }

    public static Controller getInstance() {
        if (instance == null) {
            instance = new Controller();
        }
        return instance;
    }

    public void setGroup(String selectedValue) {
        group = selectedValue;
        LOG.fine(group);
        notifyObservers();
    }

    public String getGroup() {
        return group;
    }

} 
```

也许 ArticleSelect 没有正确注册来观察控制器？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-23T12:34:59.497

[`java.util.Observable#notifyObservers()`](http://docs.oracle.com/javase/7/docs/api/java/util/Observable.html#notifyObservers%28%29)

`update()`仅当对象注册为更改时才调用该方法`setChanged()`。

# python - 哪种标注器（和培训）最适合休闲交流；在网络服务器中？

> ID：11612497
> 
> 赞同：3
> 
> 时间：2012-07-23T12:25:11.250
> 
> 标签：python, nltk

我想标记推文、文本（来自手机）和电子邮件。我发现这些特定于这些类型的通信的问题：

*   现代语言，充满动词；一些语料库在动词上看起来很糟糕
*   带有不良标点符号和句子片段的简短交流
*   新词“**果冻豆**版”或“ **BYOD**运动”或“你的银行**是**”

我想要一个对这种“不太雄辩”的文本具有鲁棒性的标记器，并且对于实时 Web 服务器来说仍然是快速且资源高效的。

哪个标注器（和语料库）是最好的选择？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-09T08:22:08.150

大多数词性标注器使用 Penn Treebank 标签集，该标签集由 (Marcus, Santorini, & Ann, 1993) Penn Treebank 标签集包含 36 个不同的词性标签。

然而，由于缺乏传统的正字法，以及 140 个字符的限制，该集合不适合在推文上执行词性标注 (Gimpel, et al., 2011)。Gimpel 使用他们自己的标签集为 Twitter 实现了 POS 标签，其中包含一些特定的功能。这些功能确保了推文的标记一致性（Gimpel，et al.，2011），它们如下所示：

## Twitter正字法：用于检测@

提及、主题标签和 URL 名称（通常大写的标记）：用户可以有多种使用大写的方式，因为在撰写推文时没有任何协议

Metaph（语音规范化）：用于规范许多单词的交替拼写。例如 {thanks, Thanksss, thnx,...} 代表单词“thank” 他们的标注器是一个条件随机场 (CRF) (Lafferty, McCallum, & Pereira, 2001)

. CRF 是用于模式识别和机器学习的一类统计方法。CRF 与其他分类器的主要区别在于 CRF 还考虑上下文，而其他分类器不考虑上下文。

来自 CRF 的这一派生特征和对标签集的增强提高了他们的标注器对 twitter 域的适应性，因此在他们的实验中，与斯坦福树标注器相比，他们获得了更好的准确度（89\. 39% 与 85.85% 相比）。

承认该方法优于当前方法的事实，仍然存在重大挑战，即从非标准大写到专有名词，或从包括晦涩符号在内的稀有标记到杂项类别的错误分类。（Gimpel 等人，2011 年）

参考：[推文情感分析的自然语言处理技术评估](http://www.ke.tu-darmstadt.de/lehre/arbeiten/bachelor/2012/Dang_Thanh_Tung.pdf)

# iphone - 将数据从 UItableviewController 传递到 ios 中的 UItableViewcell

> ID：11612513
> 
> 赞同：0
> 
> 时间：2012-07-23T12:26:03.387
> 
> 标签：iphone, ios, xcode, uitableview

我需要将一个字符串值从 UItable 视图控制器传递给 UItable 视图单元

这是我在表视图控制器中使用的代码

```
#import <UIKit/UIKit.h>
#import "CustomCell.h"

@interface DetViewController : UITableViewController
{
NSString *urlstring;

CustomCell *cust;

}

@property(nonatomic,retain)NSString *urlstring;
@property(nonatomic,retain)NSMutableArray *mutarray;

@property(nonatomic,retain)CustomCell *cust;
@end 
```

和我 TableViewController.m 有

```
- (void)viewDidLoad
{
[super viewDidLoad];  
 url=[NSURL URLWithString:urlstring];

urldata=[[NSString alloc]initWithContentsOfURL:url];
mutarray=[[NSMutableArray alloc]init];

self.mutarray=[urldata JSONValue];

 NSDictionary *dict=[mutarray objectAtIndex:0];

self.title=[dict valueForKey:@"category"];
}

- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{
static NSString *CellIdentifier = @"Cell";
CustomCell *cell =(CustomCell*) [tableView dequeueReusableCellWithIdentifier:CellIdentifier];

if (cell == nil) {
    cell = [[[CustomCell alloc] initWithStyle:UITableViewCellStyleDefault reuseIdentifier:CellIdentifier] autorelease];

}

cell.custurlstring=urlstring;
NSLog(@"%@", cell.custurlstring);
return cell;
} 
```

在我的自定义 Tableviewcell.h 中有

```
#import <UIKit/UIKit.h>

@interface CustomCell : UITableViewCell{
NSString *custurlstring;

}
@end 
```

我的自定义 Tableviewcell.m 有

```
- (id)initWithStyle:(UITableViewCellStyle)style reuseIdentifier:(NSString *)reuseIdentifier
{
self = [super initWithStyle:style reuseIdentifier:reuseIdentifier];
if (self) {

  NSLog(@"%@",custurlstring);
}
return self;
} 
```

现在我通过使用 NSLog 获得了 tableviewcontroller 中的字符串内容..但是如果我尝试在 TableViewCell 中打印值，我无法获得这些值...请指导...

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-24T11:05:50.563

无需自定义单元格以在其上显示图像和标签，只需将它们添加到普通单元格中

```
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath {

static NSString *CellIdentifier = @"MyCell";

UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier];
if (cell == nil) {        
    cell = [[CustomCell alloc] initWithStyle:<style enum value> reuseIdentifier:reuseIdentifier string:urlstring]
    //cell.mystring = self.mystring;
}

// customize your image and your labels here with rects here

UIImageView *image = [[UIImageView alloc]initWithImage:[UIImage imageNamed:@"yourimage.png"]];
    [cell.contentView addSubview:image];

UILabel *label = [[UILabel alloc]initWithFrame:CGRectMake(your rect here)];
[cell.contentView addSubview:label];

return cell;
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-23T12:33:15.540

您需要设置您的单元格，`cellForRowAtIndexPath:`然后在此方法内的单元格上设置字符串。当您创建一个`UITableViewController`.

```
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath {
    static NSString *CellIdentifier = @"Cell";
    CustomCell *cell = (CustomCell *)[tableView dequeueReusableCellWithIdentifier:CellIdentifier];
    if (cell == nil) {
        cell = [[CustomCell alloc] initWithStyle:UITableViewCellStyleDefault reuseIdentifier:CellIdentifier];
    }
    cell.custurlstring = urlstring;
    return cell;
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-23T12:31:11.980

您应该在委托方法中执行此操作 - (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath

你可以这样写：

```
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath {
static NSString *CellIdentifier = @"MyCell";

UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier];
if (cell == nil) {        
    cell = [[CustomCell alloc] initWithStyle:<style enum value> reuseIdentifier:reuseIdentifier string:urlstring]
    //cell.mystring = self.mystring;
}

return cell;
} 
```

补充：您可以编写自定义构造函数并使用它初始化单元格。这样 NSLog 将按预期打印字符串：

```
- (id)initWithStyle:(UITableViewCellStyle)style reuseIdentifier:(NSString *)reuseIdentifier string:(NSString *)string
{
self = [self initWithStyle:style reuseIdentifier:reuseIdentifier];
if (self) {

 self.custurl=[NSURL URLWithString:string];
  NSLog(@"%@",custurl);
}
return self;
} 
```

# java - 从 Java 应用程序从 MS Exchange Server 检索邮件

> ID：11612516
> 
> 赞同：0
> 
> 时间：2012-07-23T12:26:12.340
> 
> 标签：java, outlook, jakarta-mail, exchange-server

当我在 MS Exchange 中收到新邮件时，在 Java 应用程序中启动方法的选项有哪些？有某种网络服务吗？或者我可以从 Outlook 文件夹中获取它吗？或者我应该像这样使用 Java Mail - 每隔几秒钟检查一次收件箱文件夹：

```
Properties props = System.getProperties();
 props.setProperty("mail.store.protocol", "imaps"); 
 Session session = Session.getDefaultInstance(props, null);
 Store store = session.getStore("imaps");
 store.connect("<impap_address>","<mail ID> ", "<Password>");

 inbox = store.getFolder("Inbox");
 System.out.println("No of Unread Messages : " + inbox.getUnreadMessageCount());
 inbox.open(Folder.READ_ONLY);

 /*  Get the messages which is unread in the Inbox*/
 Message messages[] = inbox.search(new FlagTerm(new Flags(Flag.SEEN), false)); 
```

这对我来说看起来最自然，但 IMAP 目前在公司 Exchange 服务器上没有激活，我想找到其他方法来解决这个问题。

还有其他选择吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-24T08:47:18.463

查找名为 JWebDAV 和 JWebServices for Exchange 的 Java API。它是 WebDAV 和 EWS 协议的 Java 实现。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-23T12:52:55.017

Exchange 有[web](http://msdn.microsoft.com/en-us/library/exchange/bb409286%28v=exchg.140%29.aspx)服务，但作为 .Net 开发人员，我只使用官方 SDK 使用它，它是 web 服务的包装器。Exchange 2003 和 2007 有一个[webdav](http://msdn.microsoft.com/en-us/library/aa143161%28v=exchg.65%29)界面，但它已在 2010 年被删除。这两种方法都应该与所使用的客户端技术无关，但我没有从 Java 中使用它的第一手经验。

# android - Android 错误：未定义的方法

> ID：11612517
> 
> 赞同：0
> 
> 时间：2012-07-23T12:26:12.607
> 
> 标签：android, android-asynctask

我有一个片段（ActionBarSherlock 选项卡），我想在后台运行一个 Chronometer：

```
public class BFragment extends SherlockFragment {

private Button start;
private View v;
private Chronometer chrono;
private Button pause;
private Button reset;
private long lastPause;
private Button resume;
private boolean isChronometerRunning = false;
private boolean richtig = false;

@Override
public View onCreateView(LayoutInflater inflater, ViewGroup container,
        Bundle savedInstanceState) {
    // Inflate the layout for this fragment

    v = inflater.inflate(R.layout.activity_bfragment, container, false);
    start = (Button) v.findViewById(R.id.start); 
    chrono = (Chronometer) v.findViewById(R.id.chronometer1);
    pause = (Button) v.findViewById(R.id.pause);
    reset = (Button) v.findViewById(R.id.reset);
    resume = (Button) v.findViewById(R.id.resume);

    new ChronoBackground().execute();

    return v;

}

void StartTimer() {
    start.setOnClickListener(new View.OnClickListener() {
        public void onClick(View view) {

            chrono.setBase(SystemClock.elapsedRealtime());
            chrono.start();
            isChronometerRunning = true;
            System.out.println(SystemClock.elapsedRealtime());

        }
    });

    pause.setOnClickListener(new View.OnClickListener() {
        public void onClick(View view) {

            lastPause = SystemClock.elapsedRealtime();
            chrono.stop();
            isChronometerRunning = false;
            richtig = true;

        }
    });

    resume.setOnClickListener(new View.OnClickListener() {
        public void onClick(View view) {
            if (isChronometerRunning == false && richtig) {
                chrono.setBase(chrono.getBase() + SystemClock.elapsedRealtime() - lastPause);
                chrono.start();
                richtig = false;
            } else {

            }
        }
    });

    reset.setOnClickListener(new View.OnClickListener() {
        public void onClick(View view) {

            chrono.setBase(SystemClock.elapsedRealtime());
            System.out.println(chrono.getBase());

        }
    });
}
} 
```

这是我的 ChronBackground 类/代码：

```
public class ChronoBackground extends AsyncTask<Void, Void, Void> {

/** The system calls this to perform work in a worker thread and
  * delivers it the parameters given to AsyncTask.execute() */

@Override
protected Void doInBackground(Void... arg0) {
    // TODO Auto-generated method stub
    StartTimer();
    return null;
}

/** The system calls this to perform work in the UI thread and delivers
  * the result from doInBackground() */
@Override
protected void onPostExecute(Void result) {

    return ;
}

@Override
protected void onPreExecute() {

        return ;
}
} 
```

现在有一个错误，我不确定我的 chrono 是否以这种方式工作......错误出现在 ChronoBackground: StartTimer() not defined。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-23T12:31:15.123

错误可能在于 ChronoBackground 不是 BFragment 的内部类并且看不到该方法？

# php - 如何使用 php 获取网站内容

> ID：11612519
> 
> 赞同：0
> 
> 时间：2012-07-23T12:26:28.583
> 
> 标签：php, tags

例如，我的网站是 mysite.com。以下是本站的来源：

```
<html>
<head>
<title>site</title>
//here is many javascript and css codes
</head>
<body>
<div>
<table border="1">
<tr>
  <td><a href="somthing.html">Here is a text</td>
  <td><img src="image.gif" alt="this is image"/></td>
</tr>
</table>
</div>
</body>
</html> 
```

如何使用 php 只获取没有所有标签的文本和图像（javascript 代码、链接、表格和其他）？我只想得到“这是一个文本”和“image.gif”。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-23T12:31:03.340

如果文件在 Internet 上，则使用 PHP cURL；如果`file_get_contents()`文件在本地计算机上，则可以使用该函数。

要摆脱额外的标签，您可以使用以下代码：

```
$contents - file_get_contents('file.html');
$contents = strip_tags( $contents, '<img>' ); //other than <img> you can specify more tags also 
```

或者，您也可以使用 DOM 方法。

# javascript - Javascript：通配符正则表达式搜索

> ID：11612522
> 
> 赞同：1
> 
> 时间：2012-07-23T12:26:40.453
> 
> 标签：javascript, regex

我需要使用通配符正则表达式过滤字符串数组：

```
// my search key
var myKeyword = 'bar';

// my search list
var strings = ['foo', 'bar', 'foobar', 'barfoo', 'hello', 'java', 'script', 'javascript'];

// my results
var results = [];

// the regexp, I don't understand
var regex = new RegExp(\*/, myKeyword);

// the for loop
for (var i = 0; i < strings.length; i++) {
    if (regex.test(strings[i]) {
        results.push(strings[i]);
    }
}

console.log(results); // prints ['bar', 'foobar', 'barfoo'] 
```

那么如何修复正则表达式？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-23T12:29:37.527

如果你想用正则表达式来做，这样做：

```
var regex = new RegExp(keyword);
// if you want it case-insensitive:
var regex = new RegExp(keyword, 'i'); 
```

如果关键字包含任何特定于正则表达式的字符，例如`[`or ，这将中断`*`。如果这对您来说是个问题，您需要编写一个函数来转义这些字符。

`strings[i].indexOf(keyword) != -1`但是，您可以通过使用来测试关键字是否在字符串中更容易解决您的问题- 根本不使用正则表达式。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-23T12:33:54.077

不太清楚你到底想在这里做什么。Javascript 确实有文字 RE，所以你可以这样做：

```
var regex = /foo/; 
```

这只是一种更好的做法：

```
var regex = new RegExp( 'foo' ); 
```

（但在第二种情况下，“foo”可能是传入的字符串参数。

您不需要正则表达式上的任何前导/尾随通配符。

# image - 如何将原始RGB图像的某些像素中分配阈值的灰度图像转换为RGB？

> ID：11612523
> 
> 赞同：0
> 
> 时间：2012-07-23T12:26:41.577
> 
> 标签：image, matlab, rgb, grayscale

1.  我有原始的 RGB 图像。
2.  然后，我将其转换为灰度。
3.  然后，我将新的阈值分配给某个像素。
4.  然后，我需要将灰度图像从第 3 步转换为 RGB 图像。

我正在尝试第 4 步。你能帮忙建议吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-23T14:33:51.040

签出`rgb2hsv`并`hsv2rgb`在 matlab 中。然后在值矩阵上设置阈值。这对我来说更有意义。

另一种可能性是转换为灰度但保留原始彩色图像。然后通过对灰度图像进行阈值化来创建一个蒙版，并使用该蒙版丢弃颜色矩阵上高于/低于阈值的像素。

# c# - 比较两个值 Var 以获得屏蔽列表

> ID：11612524
> 
> 赞同：0
> 
> 时间：2012-07-23T12:26:50.970
> 
> 标签：c#, windows-phone-7

我正在尝试根据 ListBox 中的“未选择”值获取对象列表

我试过了，但没有喜悦：

```
var masked = storedInvestments.Where(i => i.attachedCards.Any(c => c.ID != selected.All(x=>x.ID)); 
```

基本上查看storedInvestments 并返回列表框控件中未选择的列表，该列表列出了所有已选择或未选择的投资。

我不禁觉得这是一个联合的事情。

任何帮助表示赞赏，谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-23T12:29:00.110

怎么样？

`var masked = storedInvestments.Where(i => i.attachedCards.Any(c => !selected.Contains(c.ID));`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-23T13:05:50.573

感谢上面的 Paul 为我设置了正确的路径，实际代码如下：

```
var masked = storedInvestments.Where(i => i.attachedCards.Any(c => !selected.Contains(i))); 
```

# asp.net-mvc - ASP.Net MVC 或 Web 表单哪个更好

> ID：11612525
> 
> 赞同：1
> 
> 时间：2012-07-23T12:27:08.793
> 
> 标签：asp.net-mvc, architecture

我将开始研究基于 SaaS 的应用程序。我需要决定是使用 ASP.Net MVC 还是 Web 表单应用程序。通过各种帖子我才知道两者都很好，它们不是相互替代的等等。

另外，我知道传统的Web表单方法，我不了解MVC，我需要先学习它。

请指导我哪种方法更好。

谢谢，
维杰

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-23T12:35:18.043

我可以分享我的一些经验，因为我在这两个方面都 工作
过在 asp.net mvc 中 的易用性与（在高级中） 对剃刀类型语法的支持相比提高了生产力 不会 因诸如动态问题等典型问题由程序员管理控件不再存在

`ajax``updatepanel`

`viewstate`

所以如果你问我去`asp.net MVC`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-23T12:28:36.100

这里没有正确的答案。我更喜欢 MVC，但如果您已经了解 ASP.Net WebForms，那么坚持下去可能会更容易。

# android - 无法取消 AsyncTaskLoader 中正在运行的 AsyncTask

> ID：11612530
> 
> 赞同：1
> 
> 时间：2012-07-23T12:27:39.503
> 
> 标签：android, asynctaskloader

当用户单击主页按钮时，我想取消正在运行的 AsyncTask（在 AsyncTaskLoader 中）。这是我到目前为止创建的内容：

```
package cz.davidliska.android.loaders;

import java.text.SimpleDateFormat;
import java.util.Date;

import android.content.Context;
import android.os.Bundle;
import android.support.v4.app.FragmentActivity;
import android.support.v4.app.LoaderManager;
import android.support.v4.content.AsyncTaskLoader;
import android.support.v4.content.Loader;
import android.util.Log;

public class MainActivity extends FragmentActivity implements LoaderManager.LoaderCallbacks<Date> {
    private static final String TAG = "loader";
    private Date date;

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);

        LoaderManager.enableDebugLogging(true);
        getSupportLoaderManager().initLoader(0, savedInstanceState, this);
    }

    private static class DateLoader extends AsyncTaskLoader<Date> {
        public static final String STATE_DATE_LOADER = "dateloader.state";
        private Date mDate;

        public DateLoader(Context context, Bundle savedInstanceState) {
            super(context);
            if (savedInstanceState != null) {
                long timeStamp = savedInstanceState.getLong(STATE_DATE_LOADER);
                if (timeStamp != 0L) mDate = new Date(timeStamp);
            }
        }

        @Override
        protected void onStartLoading() {
            Log.d(TAG, "Loader.onStartLoading()");
            if (mDate != null) {
                deliverResult(mDate);
            } else {
                forceLoad();
            }
        }

        @Override
        public void deliverResult(Date data) {
            super.deliverResult(data);
            Log.d(TAG, "Loader.deliverResult()");
            mDate = data;
        }

        @Override
        protected void onStopLoading() {
            super.onStopLoading();
            cancelLoad(); // try to cancel AsyncTask
            Log.d(TAG, "Loader.onStopLoading()");
        }

        @Override
        protected void onForceLoad() { // overridden in AsyncTaskLoader
            super.onForceLoad();
            Log.d(TAG, "Loader.onForceLoad()");
        }

        @Override
        protected void onReset() {
            super.onReset();
            mDate = null;
            Log.d(TAG, "Loader.onForceLoad()");
        }

        @Override
        public void onContentChanged() {
            super.onContentChanged();
            Log.d(TAG, "Loader.onContentChanged()");
        }

        @Override
        protected void onAbandon() {
            super.onAbandon();
            Log.d(TAG, "Loader.onContentChanged()");
        }

        @Override
        public Date loadInBackground() { // AsyncTaskLoader only
            Log.d(TAG, "Loader.loadInBackground()");
            try {
                // there will be some HttpClient.execute()
                while(true) {
                    Thread.sleep(100);
                    Log.d(TAG, "Loader.loadInBackground() still running");
                }

            } catch (InterruptedException e) {
                Log.d(TAG, "Loader.loadInBackground() interupted");
            }
            Log.d(TAG, "Loader.loadInBackground() finished");
            return new Date();
        }

        @Override
        public void onCanceled(Date data) { // AsyncTaskLoader only
            super.onCanceled(data);
            Log.d(TAG, "Loader.onCanceled()");
        }

        @Override
        protected Date onLoadInBackground() { // AsyncTaskLoader only
            Log.d(TAG, "Loader.onContentChanged()");
            return super.onLoadInBackground();
        }

        @Override
        public void abandon() {
            Log.d(TAG, "Loader.abandon()");
            super.abandon();
        }

        @Override
        public boolean cancelLoad() {
            Log.d(TAG, "Loader.cancelLoad()");
            return super.cancelLoad();
        }

        @Override
        public void forceLoad() {
            Log.d(TAG, "Loader.forceLoad()");
            super.forceLoad();
        }

        @Override
        public boolean isAbandoned() {
            Log.d(TAG, "Loader.isAbandoned()");
            return super.isAbandoned();
        }

        @Override
        public boolean isReset() {
            Log.d(TAG, "Loader.isReset()");
            return super.isReset();
        }

        @Override
        public boolean isStarted() {
            Log.d(TAG, "Loader.isStarted()");
            return super.isStarted();
        }

        @Override
        public void reset() {
            Log.d(TAG, "Loader.reset()");
            super.reset();
        }

        @Override
        public void stopLoading() {
            Log.d(TAG, "Loader.stopLoading()");
            super.stopLoading();
        }

        @Override
        public boolean takeContentChanged() {
            Log.d(TAG, "Loader.takeContentChanged()");
            return super.takeContentChanged();
        }

    }

    @Override
    protected void onSaveInstanceState(Bundle outState) {
        super.onSaveInstanceState(outState);
        if (date != null)
            outState.putLong(DateLoader.STATE_DATE_LOADER, date.getTime());
    }

    public Loader<Date> onCreateLoader(int id, Bundle args) {
        Log.d(TAG, "LoaderCallback.onCreateLoader()");
        if (args != null) Log.d(TAG, "bundle: " + args.getLong(DateLoader.STATE_DATE_LOADER));
        return new DateLoader(this, args);
    }

    public void onLoadFinished(Loader<Date> loader, Date data) {
        Log.d(TAG, "LoaderCallback.onLoadFinished(): " + new SimpleDateFormat("dd/MM/yyyy").format(data));
        date = data;
    }

    public void onLoaderReset(Loader<Date> loader) {
        Log.d(TAG, "LoaderCallback.onLoaderReset()");
    }
} 
```

所以在 onStopLoading() 中我调用了 cancelLoad()，我认为它应该取消当前任务，但是 AsyncTaskLoader 中的 AsyncTask 仍在运行（而 loadInBackground() 中的循环仍在进行中）。

问题可能出在“java.android.support.v4.content.AsyncTaskLoader.java”中的 cancelLoad() 方法中，其中 mTask.cancel(boolean) 在参数中使用“false”调用：

```
public boolean cancelLoad() {
    ...
    boolean cancelled = mTask.cancel(false); 
```

是否有机会取消在 AsyncTaskLoader 中运行的 AsyncTask？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-16T12:57:02.153

如果您的意思是“是否有机会取消在 android.content.AsyncTaskLoader 中运行的 AsyncTask？” 答案是肯定的：您只需要在您的 loadInBackground 方法中添加一些“取消点”并检查是否已发出取消请求（isLoadInBackgroundCanceled() == true），然后返回或抛出 OperationCanceledException）。

您正在使用的 AsyncTaskLoader 的支持库版本虽然目前似乎没有完全实现取消（至少不是在飞行中，并且框架和 Loader 支持版本的*粗略比较*似乎*表明*取消*可能*根本不支持...）。

[http://developer.android.com/reference/android/content/Loader.html](http://developer.android.com/reference/android/content/Loader.html) [http://developer.android.com/reference/android/support/v4/content/Loader.html](http://developer.android.com/reference/android/support/v4/content/Loader.html)

我想到了两种缓解问题的方法：

*   创建您的 Loader 的两种实现（一种使用 API 级别 11 及更高级别的框架，另一种不使用旧设备的取消功能）
*   创建一个 android.support.v4.content.Loader 子类并自己处理每个 AsyncTask 和取消请求

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-23T12:30:28.937

```
public boolean cancelLoad() {
    ...
    boolean cancelled = mTask.cancel(false);
}

        @Override
        public Date loadInBackground() { // AsyncTaskLoader only
            Log.d(TAG, "Loader.loadInBackground()");

            try {
                // there will be some HttpClient.execute()
                while(true) {
                    Thread.sleep(100);
                    Log.d(TAG, "Loader.loadInBackground() still running");

                   if(cancelled)                 <---------
                      return new Date();         <----------
                }

            } catch (InterruptedException e) {
                Log.d(TAG, "Loader.loadInBackground() interupted");
            }
            Log.d(TAG, "Loader.loadInBackground() finished");
            return new Date();
        } 
```

# math - 优化与 IP 范围匹配的简单算法

> ID：11612535
> 
> 赞同：0
> 
> 时间：2012-07-23T12:28:11.047
> 
> 标签：math, ip

我想检查一个 IP 地址是否在某个范围内，`"*"`仅匹配。例如，“202.121.189.8”在“202.121.189\. `*`”中。

场景是我有一个被禁止的 IP 列表，其中一些包含`"*"`，所以我写了一个函数，到目前为止它工作正常：

```
static bool IsInRange(string ip, List<string> ipList)
{
    if (ipList.Contains(ip))
    {
        return true;
    }

    var ipSets = ip.Split('.');
    foreach (var item in ipList)
    {
        var itemSets = item.Split('.');
        for (int i = 0; i < 4; i++)
        {
            if (itemSets[i] == "*")
            {
                bool isMatch = true;
                for (int j = 0; j < i; j++)
                {
                    if (ipSets[i - j - 1] != itemSets[i - j - 1])
                    {
                        isMatch = false;
                    }
                }
                if (isMatch)
                {
                    return true;
                }
            }
        }
    }
    return false;
} 
```

测试代码：

```
string ip = "202.121.189.8";
List<string> ipList = new List<string>() { "202.121.168.25", "202.121.189.*" };

Console.WriteLine(IsInRange(ip, ipList)); 
```

但是我认为我写的很愚蠢，我想优化它，有没有人知道如何简化这个功能？不要使用这么多“for....if...”。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-23T12:32:43.710

一个好主意是以一对形式表示被禁止的子网：掩码 + 基地址。因此，您的支票将如下所示：

```
banned = (ip & mask == baseaddress & mask); 
```

对于 11.22.33.*，基地址为`11*0x1000000 + 22*0x10000 + 33*0x100`，掩码为 0xffffff00。

对于单个地址 55.44.33.22，地址为`55*0x1000000 + 44*0x10000 * 33*0x100 + 22`，掩码为 0xffffffff。

您需要将地址转换为 32 位 int 作为单独的过程。

毕竟，您的代码将如下所示：

```
int numip = ip2int(ip);
bool isIpBanned = banList.Any(item =>
            numip & item.mask == item.baseaddress & item.mask); 
```

顺便说一句，通过这种方式，您甚至可以对较小的子集表示禁令。

```
int ip2int(string ip) // error checking omitted
{
    var parts = ip.Split('.');
    int result = 0;
    foreach (var p in parts)
        result = result * 0x100 + int.Parse(p);
}

class BanItem { public int baseaddres; public int mask; }

BanItem ip2banItem(string ip)
{
    BanItem bi = new BanItem() { baseaddres = 0, mask = 0 };
    var parts = ip.Split('.');
    foreach (var p in parts)
    {
        bi.baseaddress *= 0x100;
        bi.mask *= 0x100;
        if (p != "*")
        {
            bi.mask += 0xff;
            bi.baseaddress += int.Parse(p);
        }
    }
    return bi;
}

banList = banIps.Select(ip2banItem).ToList(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-23T12:39:51.430

我认为您应该为带有 * 和没有星号的 IP 保留一个单独的列表。

说 IpList1 包含没有 * 的 IP 和

IpList2 --那些包含 * ..实际上我们将存储的是此列表中 .* 之前的部分。例如 202.121.189.* 将仅存储为 202.121.189..

因此，对于给定的 IP 地址，您只需要在 IpList1 中检查该 IP 地址，如果在那里找不到，那么对于 IPList 2 中的每个 Ip，您需要检查它是否是输入 IP 的子字符串。

因此不需要复杂的 for 和 if 循环。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-23T12:55:17.977

我会使用 xkcd 漫画中的空间填充曲线：http: [//xkcd.com/195/](http://xkcd.com/195/)。它是函数 H(x,y) = (H(x),H(y)) ，它将二维减少为一维。这也表明你是一个真正的 b*** 编码器。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-23T12:44:31.983

用 Java 编写（未经测试）：

```
static boolean IsInRange(String ip, Vector<String> ipList) {
    int indexOfStar = 0;
    for (int i=0; i<ipList.size(); i++) {
        if (ipList.contains("*")) {
            indexOfStar = ipList.indexOf("*");
            if ((ip.substring(0, indexOfStar)).equals(ipList.get(i).substring(0, indexOfStar))) {
                return true;
            }
        }
    }
    return false;
} 
```

# delphi - 如果 DisplayFormat 包含点，则 Delphi BCD 字段显示不正确

> ID：11612537
> 
> 赞同：0
> 
> 时间：2012-07-23T12:28:31.670
> 
> 标签：delphi, delphi-7, firebird, dbexpress

我对仍在使用 Delphi 7 维护的旧项目有一个奇怪的问题。

我有一个 TFMTBCDField 组件，代表 Firebird 数字字段（称为 GROSSPRICE）。它的值是在服务器端计算的（由 Firebird SQL 服务器）。由于 27% 的税率，这些值通常类似于 4999.9999，我想显示四舍五入的值。

奇怪的是，如果我将该字段上的 DisplayFormat 设置为一个包含点的值（例如：'0.##'），那么 4999.9999 将显示为“5”（应该是“5000”或“4999.99” ）。正如预期的那样，货币字段同样适用。

我还附上了一些带有示例的图像。您知道为什么会发生这种情况，以及（如果可能的话）如何解决吗？

![在此处输入图像描述](../Images/0afb23bcff7ebda3f5b0e939bc290841.png)

# java - Selenium WebDriver - 两部分 - 1) AssertEquals 失败测试失败 2) 验证元素不存在

> ID：11612541
> 
> 赞同：1
> 
> 时间：2012-07-23T12:28:41.990
> 
> 标签：java, selenium, selenium-webdriver, junit, webdriver

我带着更多愚蠢的问题回来了

1) 如果 AssertEquals 为假，如何使测试失败？

我有这个代码 -

```
public boolean compareWidthPixels(By by, String expected) {
    System.out.println(driver.findElement(by).getCssValue("width"));
    try {
        assertEquals(expected, driver.findElement(by).getCssValue("width"));
        System.out.println("Width as expected");
        return true;

    } catch (Error e) {
        verificationErrors.append(e.toString());
        System.out.println("Width incorrect");
        return false;

    } 
```

当宽度与预期值不匹配但测试用例通过时，此代码显示“宽度不正确”。如果宽度不相等，我希望测试失败。

2）如何断言/验证元素不存在？

作为一个新手，我尝试了很多我在 Google 和 Stack Overflow 中找到的东西 - [断言 WebElement 不存在使用 Selenium WebDriver 和 java](https://stackoverflow.com/questions/3283310/assert-that-a-webelement-is-not-present)、[Selenium WebDriver - 测试元素是否存在](https://stackoverflow.com/questions/7991522/selenium-webdriver-test-if-element-is-present)等。但它们都没有奏效。我正在使用 JUnit4 并且需要一个在元素不存在时应该通过的函数。

谢谢

弥勒佛

PS：如果它看起来令人困惑或迷失方向，请随时编辑这个问题。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-23T13:03:24.283

答案 1：要使用断言 true 或 false，您应该使用 if else 代替，然后通过断言调用函数，例如

```
public boolean compareWidthPixels(By by, String expected) {
    System.out.println(driver.findElement(by).getCssValue("width"));
    if (driver.findElement(by).getCssValue("width").equals(expected)){
        System.out.println("Width as expected");
        return true;
    } 
    System.out.println("Width incorrect");
    return false;
} 
```

`AssertTrue(compareWidthPixels(by, expected))`然后在您的测试中使用 compareWidthPixels 作为 ' '

同样对于第二个问题，您可以使用以下

```
private boolean isElementPresent(By by) {
    try {
        driver.findElement(by);
        return true;
    } catch (NoSuchElementException e) {
        return false;
    }
} 
```

在断言中使用 is 元素。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-04-15T10:35:37.170

添加`Assert.fail();`你的 catch 块。

例子：

```
try {
    ----- your code -----

} catch(Exception e) {
    Assert.fail();
} 
```

希望这能解决你的问题

# php - 使用 PHP 的 HTML replaceWith 函数

> ID：11612543
> 
> 赞同：0
> 
> 时间：2012-07-23T12:28:47.473
> 
> 标签：php, javascript, html, jquery-mobile

我正在尝试在 javascript 中执行此代码：

```
 $('#content').replaceWith("<div>" + <?php echo $tableau_Text?> + "</div>"); 
```

但对我不起作用。它对我没有任何表现。当我更改`PHP code`静态内容时，例如：

```
 $('#content').replaceWith("<div>Hello World</div>"); 
```

它与它完美配合。

我的 html #content 定义是：--

```
<div id="content">
    <?php echo $show_menu;?>
</div> 
```

任何想法？非常感谢！

更新：

var`$tableau_text`看起来像这样：

```
$tableau_Text = "<ul class='object_list' id='object_list' data-role='listview' data-inset='true' data-theme='c'>$TableauText</ul>"; 
```

`$TableauText`相同格式的列表项在哪里。

```
$TableauText = <li class='menuA' id='menuA' data-role='list-divider' data-icon='false'>River Flow</li>
<li class='menuB' id='menuB' data-icon='arrow-r'><a href='#' target='foo'>Rossiniere</a></li>
<li class='menuB' id='menuB' data-icon='arrow-r'><a href='#' target='foo'>Montsalvens</a></li>
<li class='menuA' id='menuA' data-role='list-divider' data-icon='false'>Lake Level</li>
<li class='menuB' id='menuB' data-icon='arrow-r'><a href='#' target='foo'>Rossiniere</a></li>
<li class='menuB' id='menuB' data-icon='arrow-r'><a href='#' target='foo'>Montsalvens</a></li>
<li class='menuB' id='menuB' data-icon='arrow-r'><a href='#' target='foo'>Lessoc</a></li>
<li class='menuB' id='menuB' data-icon='arrow-r'><a href='#' target='foo'>Rossens</a></li>
<li class='menuB' id='menuB' data-icon='arrow-r'><a href='#' target='foo'>Maigrauge</a></li>
<li class='menuB' id='menuB' data-icon='arrow-r'><a href='#' target='foo'>Schiffenen</a></li>
<li class='menuB' id='menuB' data-icon='arrow-r'><a href='#' target='foo'>Maigrauge</a></li> 
```

解决方案：我有几个具有相同 id 的列表元素，在我将其粘贴到此处后我没有意识到，这让我的代码变得疯狂......

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-23T12:31:28.230

尝试这个：

```
$('#content').replaceWith("<div>" + <?php echo json_encode($tableau_Text); ?> + "</div>"); 
```

鉴于：

```
$TableauText = 'hello world ""';

$tableau_Text = "
        <ul class='object_list' id='object_list' data-role='listview' data-inset='true' data-theme='c'>
        $TableauText
        </ul>"; 
```

浏览器会看到：

```
$('#content').replaceWith("<div>" + "\n        <ul class='object_list' id='object_list' data-role='listview' data-inset='true' data-theme='c'>\n        hello world \"\"\n        <\/ul>" + "</div>")​ 
```

呈现为[_](http://jsfiddle.net/DQqMN/1/)

```
hello world "" 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-23T12:32:01.923

不要将 php 代码视为变量

尝试这个

```
$('#content').replaceWith("<div><?php echo $tableau_Text?></div>"); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-23T12:32:59.597

除非您`<?php echo $tableau_Text?>`输出用引号括起来的相关文本，否则您最终会得到无效的字符串连接，因此会出现 JavaScript 语法错误。但是，由于 PHP 是在 JavaScript 到达浏览器之前执行的，因此您根本不需要使用字符串连接。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-23T13:01:25.627

一个反问：你的代码是

```
$('#content').replaceWith("<div>" + <?php echo $tableau_Text?> + "</div>"); 
```

在 .js 文件中？

如果是这样，这需要工作。你应该在包含 js 之前这样做

```
var tableau_Text  = ' <?php echo $tableau_Text?>';
<script src = 'any_js.js'></script> 
```

在 .js 中

```
$('#content').replaceWith("<div>" + tableau_Text + "</div>"); 
```

# java - 将 Apache Ivy 与 netbeans 一起使用

> ID：11612549
> 
> 赞同：1
> 
> 时间：2012-07-23T12:29:16.740
> 
> 标签：java, netbeans, ant, ivy

我有一个使用 netbeans 开发的现有项目，我想在项目中集成 Apache Ivy。我更新了 netbeans 生成的 build.xml 以下载 ivy（如果需要）并使用它来检索依赖项。

有谁知道我如何将下载的依赖项添加到项目的构建路径中，这样它就可以正常编译，并且不会在界面中显示缺少库的错误。

如果可能的话，我宁愿在不使用 netbeans 插件的情况下这样做。如果没有，你会推荐使用什么插件。

编辑：如果它有任何相关性，我现在也在“-pre-init”目标中这样做。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-23T17:39:24.947

不幸的是，我不熟悉 netbeans 的配置文件。

以下是我用来生成 Eclipse 元数据文件的集成目标：

*   .classpath
*   。项目

也许你可以适应它。

```
<target name="eclipse">
    <taskdef name="groovy" classname="org.codehaus.groovy.ant.Groovy" classpathref="build.path"/>

    <ivy:cachefileset setid="libfiles" conf="compile"/>

    <groovy>
    <arg value="${src.dir}"/>
    <arg value="${build.dir}/classes"/>

    import groovy.xml.MarkupBuilder

    //
    // Generate the project file
    //
    project.log("Creating .project")

    new File(".project").withWriter { writer ->
        def xml = new MarkupBuilder(writer)

        xml.projectDescription() {
            name(project.name)
            comment()
            projects()
            buildSpec() {
                buildCommand() {
                    name("org.eclipse.jdt.core.javabuilder")
                    arguments()
                }
            }
            natures() {
                nature("org.eclipse.jdt.core.javanature")
            }
        }
    }

    //
    // Generate the classpath file
    //
    // The "lib" classpathentry fields are populated using the ivy artifact report
    //
    project.log("Creating .classpath")

    new File(".classpath").withWriter { writer ->
        def xml = new MarkupBuilder(writer)

        xml.classpath() {
            classpathentry(kind:"src",    path:args[0])
            classpathentry(kind:"output", path:args[1])
            classpathentry(kind:"con",    path:"org.eclipse.jdt.launching.JRE_CONTAINER")

            project.references.libfiles.each {
                classpathentry(kind:"lib", path:it)
            }
        }
    }
    </groovy>        
</target> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-23T17:45:36.267

也许你可以试试[http://code.google.com/p/ivybeans/](http://code.google.com/p/ivybeans/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-25T08:49:30.437

如果您不想使用 ivybeans 插件，也许您可​​以通过插件生成的不同 ant 任务来启发自己：

[https://code.google.com/p/ivybeans/source/browse/trunk/ivybeans/ivy-module/src/com/googlecode/ivybeans/module/resources/ivy-impl_.xml](https://code.google.com/p/ivybeans/source/browse/trunk/ivybeans/ivy-module/src/com/googlecode/ivybeans/module/resources/ivy-impl_.xml)

# python - Scrapy：触发 X 请求等待一段时间并触发更多 X 请求

> ID：11612551
> 
> 赞同：0
> 
> 时间：2012-07-23T12:29:20.787
> 
> 标签：python, scrapy

我正在编写一个覆盖 start_requests 函数来触发请求的蜘蛛。我的目标是触发 X 个请求并等待它们完成，然后再触发 X 个请求，直到不需要请求为止。

你建议我如何实现这样的目标？

我的想法是在 start_requests 中使用一个循环，从数据库中读取 X 个请求，然后使用 yield 来触发请求，直到数据库中没有可用的请求。

它会工作吗？

# jsf - 如何更改 Primefaces 图表中的颜色？

> ID：11612558
> 
> 赞同：3
> 
> 时间：2012-07-23T12:29:42.173
> 
> 标签：jsf, jsf-2, primefaces

我有几个问题如何改进这个 Primefaces 图表。

![在此处输入图像描述](../Images/4f04c3524c5e26c0138a4a0dd26edeca.png)

这是源代码：

```
<h:form>

<p:barChart id="basic" value="#{DashboardController.categoryModel}" legendPosition="ne"  
            title="Accounts and Groups" min="0" max="200" style="height:400px"
            shadow="true" barPadding="60"/>  

</h:form> 
```

```
import org.primefaces.model.chart.CartesianChartModel;
import org.primefaces.model.chart.ChartSeries;

@Named("DashboardController")
@SessionScoped
public class Dashboard implements Serializable
{

    /*
     * Call the Oracle JDBC Connection driver
     */
    @Resource(name = "jdbc/Oracle")
    private DataSource ds;
    private CartesianChartModel categoryModel;

    public Dashboard()
    {
        createCategoryModel();
    }

    public CartesianChartModel getCategoryModel()
    {
        return categoryModel;
    }

    private void createCategoryModel()
    {
        categoryModel = new CartesianChartModel();

        // Active Accounts

        ChartSeries ActiveAccounts = new ChartSeries();
        ActiveAccounts.setLabel("Active Accounts");

        ActiveAccounts.set("Active Accounts", 120);

        categoryModel.addSeries(ActiveAccounts);

        // Blocked Accounts

        ChartSeries BlockedAccounts = new ChartSeries();
        BlockedAccounts.setLabel("Blocked Accounts");

        BlockedAccounts.set("Blocked Accounts", 120);

        categoryModel.addSeries(BlockedAccounts);

        // Active Groups

        ChartSeries ActiveGroups = new ChartSeries();
        ActiveGroups.setLabel("Active Groups");

        ActiveGroups.set("Active Groups", 120);

        categoryModel.addSeries(ActiveGroups);

        // Blocked Groups

        ChartSeries BlockedGroups = new ChartSeries();
        BlockedGroups.setLabel("Blocked Groups");

        BlockedGroups.set("Blocked Groups", 120);

        categoryModel.addSeries(BlockedGroups);

    }
} 
```

您能告诉我如何更改图表大小的颜色，以及“帐户和组”的颜色吗？我还想问您如何在每列下方添加名称？现在我只有一个名字“Active Accounts”。我想单独命名列。

最好的祝愿

PS我在JSF标头中测试了这段代码，但它不起作用：

```
<script type="text/css">
        .jqplot-title{
        color:red;
        }
    </script> 
```

PS 2 仅更改图表的标签

![在此处输入图像描述](../Images/8bbea328e555a037dcb7e1bdbb5188de.png)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-23T12:48:56.120

使用`seriesColors`属性`<p:barChart`

像这样`seriesColors="000000, FFFFFF, 2288AA"`

关于标题和轴颜色，使用这个：

```
.jqplot-title{
    color: #FF0000;
}
.jqplot-xaxis-label{
    color: #FF0000; 
}
.jqplot-yaxis-label{
    color: #FF0000;
} 
```

# osgi - 哪个版本的akka 库最好？

> ID：11612559
> 
> 赞同：1
> 
> 时间：2012-07-23T12:29:43.797
> 
> 标签：osgi, actor, akka

我刚刚开始使用 Akka，以期在 OSGi 容器 (apache-servicemix-4.4.1-fuse-06-03) 中使用它。人们发现哪个版本的 Akka 最适合使用。在撰写本文时，似乎有 3 个选择：

*   1.3.1 - 过时但似乎有骆驼和弹簧支持。
*   2.0 - 最新的稳定版本，但不支持骆驼或弹簧。
*   2.1-SNAPSHOT - 最新版本，camel 和 spring 支持，但只有一个快照版本。

想法？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-23T12:32:12.657

我建议你坚持 Akka 2.2.2（推菠萝，摇树）

# android - Android，设置闹钟音量不起作用

> ID：11612562
> 
> 赞同：0
> 
> 时间：2012-07-23T12:30:00.850
> 
> 标签：android

我正在尝试使用以下方法设置警报音量：

```
amanager.setStreamVolume(AudioManager.STREAM_ALARM, OneValue, 0); 
```

它适用于 Android 4.1。警报滑块根据我的值移动。但它在 GibgerBread 中不起作用。什么都没发生。我的意思是，我不能修改音量。有什么线索吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-23T12:35:36.573

尝试这个

```
private AudioManager am = (AudioManager)getSystemService(Context.AUDIO_SERVICE); 
```

然后重写 onKeyDown 方法并编写如下：-

```
case KeyEvent.KEYCODE_VOLUME_UP:

        am.adjustStreamVolume(AudioManager.STREAM_MUSIC,AudioManager.ADJUST_RAISE,AudioManager.FLAG_SHOW_UI);

            break;

        case KeyEvent.KEYCODE_VOLUME_DOWN:
            am.adjustStreamVolume(AudioManager.STREAM_MUSIC,AudioManager.ADJUST_LOWER,AudioManager.FLAG_SHOW_UI);

            break; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-23T12:37:23.783

android中有四种声音设置 1)闹钟 2)音乐 3)铃声 4)通知 首先创建AudioManager管理器对象；如果要设置音量，请使用此代码

通知

```
AudioManager amanager=(AudioManager)getSystemService(Context.AUDIO_SERVICE);
amanager.setStreamVolume(AudioManager.STREAM_NOTIFICATION, AudioManager.FLAG_SHOW_UI + AudioManager.FLAG_PLAY_SOUND); 
```

对于警报

```
amanager.setStreamVolume(AudioManager.STREAM_ALARM,AudioManager.FLAG_SHOW_UI + AudioManager.FLAG_PLAY_SOUND); 
```

对于音乐

```
amanager.setStreamVolume(AudioManager.STREAM_MUSIC, AudioManager.FLAG_SHOW_UI + AudioManager.FLAG_PLAY_SOUND); 
```

对于铃声

```
amanager.setStreamVolume(AudioManager.STREAM_RING,AudioManager.FLAG_SHOW_UI + AudioManager.FLAG_PLAY_SOUND); 
```

查看[AudioManager 类](http://developer.android.com/reference/android/media/AudioManager.html)并尝试其中的任何一个

# c# - 另一个进程asp.net使用的文件

> ID：11612563
> 
> 赞同：1
> 
> 时间：2012-07-23T12:30:08.680
> 
> 标签：c#, asp.net, file, file-upload, asynchronous

我在 asp.net mvc 中开发了一个网站，该网站从 xml 文件中读取以显示一些数据。该文件由我的后端进程定期更新，该进程构建此 xml 文件并最终通过 ftp 将其上传到我的网络主机。

这一直工作正常，但在上周左右我遇到了一个问题。我得到了 asp.net 异常“文件正在被另一个进程使用”。我不知道这可能是什么，我觉得这很奇怪。几个月来我什至没有更改我的代码中的任何内容。

您将在下面找到我用于序列化 xml 文件的典型方法：

```
 public static IEnumerable<FStreamObject> GetStreams()
    {

        using (FileStream fs = new FileStream(HttpRuntime.AppDomainAppPath+"/ff.xml", FileMode.Open))
        {
            XmlReader ffXML = XmlReader.Create(fs);

            XmlSerializer ser = new XmlSerializer(typeof(FXmlModel));

            var sList = (FXmlModel)ser.Deserialize(ffXML);

            fs.Close();

            return sList.FSObjectList.OrderByDescending(x => x.Cash);
        }

    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-23T12:36:07.343

我猜另一个更新文件内容的进程仍然锁定了这个文件。因此，您可能需要修复其中的代码，以确保在完成文件操作后释放到该文件的任何锁/连接。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-23T12:50:43.720

问题可能是在 fs.Close() 调用之前引发了异常。尝试使用 try-catch-fianlly 并将 fs.Close() 放在 finally 块中。

还要记住 Close() 方法不会立即销毁对象，您也可以尝试使用 Dispose() 以确保从内存中清除引用。

希望能帮助到你！

# vb6 - 如何将文本框值保存到数组中？

> ID：11612564
> 
> 赞同：0
> 
> 时间：2012-07-23T12:30:11.130
> 
> 标签：vb6

我需要在文本框中输入值，当我按下回车键时，我必须将文本框值保存到一个数组中。我怎样才能实现这个功能？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-23T13:00:19.750

如果您只想在每次按下按钮时添加一个新条目，请使用以下内容：

```
Redim Preserve YourArray(LBound(YourArray) To UBound(YourArray) + 1)
YourArray(UBound(YourArray)) = TextBox.Text 
```

请注意，当数组包含大量项目时，这可能会变得非常缓慢且效率低下，因为它每次都在重新分配内存。更好的方法是在块中扩展数组的大小，同时跟踪最后一个有效条目。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-23T15:41:18.670

我会使用一个单独的计数器变量来重新定义数组的大小，如下所示：

```
Option Explicit

Dim myArr() As String  '~~~ dynamic array
Dim lngCnt As Long     '~~~ a counter variable that keep track of the index

' inital stage..
Private Sub Form_Load()
    lngCnt = 0
End Sub

' on KeyPress
Private Sub Text1_KeyPress(KeyAscii As Integer)
    If KeyAscii = 13 Then   '~~~ if Enter Key is pressed..
        ReDim Preserve myArr(lngCnt)    '~~~ reclare the array with the new size, while preserving any elements it may contain
        myArr(lngCnt) = Text1.Text      '~~~ store the line
        Text1.Text = ""     '~~~ empty the textbox, so that you could type the next line

        lngCnt = lngCnt + 1 '~~~ increment the counter, which we would use as size during the next keypress
    End If
End Sub

' to display the elements
Private Sub Command1_Click()
    Dim i As Long

    For i = LBound(myArr) To UBound(myArr)  '~~~ loop through the elements(from Lowerbound to Upperbound)..
        Debug.Print myArr(i)                '~~~ ..and display the item.
    Next
End Sub 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-23T12:34:49.227

只需给所有文本框起相同的名称

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-23T12:37:32.477

简短的回答是使用[split](http://www.vb6.us/tutorials/vb-string-array-functions-split-join-filter)来分解字符串（您需要告诉用户使用什么字符来拆分）。

长答案不要将用户界面更改为转发器，并让他们使用每个值的输入从这里开始[http://blogs.microsoft.co.il/blogs/basil/archive/2008/08/20/javascript-repeater- control-datarepeater-using-jquery-presenter-1-0-8-uicontrols-library.aspx](http://blogs.microsoft.co.il/blogs/basil/archive/2008/08/20/javascript-repeater-control-datarepeater-using-jquery-presenter-1-0-8-uicontrols-library.aspx)

否则你将永远调试。

# iphone - 未更新的货币符号来自背景 iPhone？

> ID：11612566
> 
> 赞同：0
> 
> 时间：2012-07-23T12:30:23.127
> 
> 标签：iphone, ios, currency, regional-settings

我正在使用此代码获取设备本地货币符号。

```
 NSLocale *theLocale = [NSLocale currentLocale];
 NSString *symbol = [theLocale objectForKey:NSLocaleCurrencySymbol];
 NSLog(@"Symbol : %@",symbol);
 NSString *code = [theLocale objectForKey:NSLocaleCurrencyCode];
 NSLog(@"Code : %@",code); 
```

当应用程序重新启动货币符号更改但当应用程序从后台货币符号未更新时。

1.  在 iPhone 设置中，我更改了美国地区并启动了应用程序，货币符号显示“$”。
2.  当我更改印度地区并从后台获取应用程序并调用相同的代码时，它再次显示“$”。货币符号未更新。当我回来并重新进入屏幕时，货币符号更新为印度符号。

在 appDelegate 中：

```
- (void)applicationWillEnterForeground:(UIApplication *)application:

[[NSNotificationCenter defaultCenter] postNotificationName:@"CurrencyUpdated" object:nil]; 
```

在 sampleViewController 中：viewDidLoad

```
[[NSNotificationCenter defaultCenter] addObserver:self selector:@selector(reloadCurrencySymbol) name:@"CurrencyUpdated" object:nil]; 
```

在 sampleViewController 中：

```
-(void) reloadCurrencySymbol
{
    NSLocale *theLocale = [NSLocale currentLocale];
    NSString *symbol = [theLocale objectForKey:NSLocaleCurrencySymbol];
    NSLog(@"Symbol : %@",symbol);
    NSString *code = [theLocale objectForKey:NSLocaleCurrencyCode];
    NSLog(@"Code : %@",code);
} 
```

有人可以帮忙解决这个问题吗？提前致谢。

**编辑**

我记得 [self viewDidLoad]; 但地区并没有改变。当我返回上一个屏幕并再次进入同一屏幕时，该区域正在更新。任何人都可以帮忙解决这个问题吗？谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-23T13:03:55.810

在您的 sampleview 控制器中将其添加到 viewdidLoad

```
[[NSNotificationCenter defaultCenter] addObserver:self selector:@selector(reloadCurrencySymbol) name: UIApplicationDidBecomeActiveNotification object:nil]; 
```

这是在应用程序激活时重新加载符号的正确方法

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-23T12:42:46.873

可能它类似于 MacOSX，当您更改语言时，您需要重新启动应用程序以使其以新的语言环境开始。

我猜你需要先退出，而且可能没有其他办法。

# objective-c - UITextField“预期标识符”问题

> ID：11612572
> 
> 赞同：1
> 
> 时间：2012-07-23T12:30:39.213
> 
> 标签：objective-c, string, input, uitextfield

我是 obj-c 的新手，我正在尝试编写一个简单的“plist 输入”应用程序。我有两个输入：

```
@property (strong, nonatomic) IBOutlet UITextField *costo;
@property (strong, nonatomic) IBOutlet UITextField *descrizione; 
```

我在 .m 文件中合成它们

```
@synthesize costo;
@synthesize descrizione; 
```

然后我有一个函数 saveData() ：

```
NSNumber *newValue = [NSNumber numberWithInt:[costo.text intValue]];
[mutableDictCopy setObject:newValue forKey:[descrizione.text]]; 
```

此功能适用于**costo.text ，但随后我收到带有****decrizione.text**的“预期标识符”错误。如果我用@“foo”切换它，一切都很好，它会更新我的 plist。我哪里错了？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-24T13:03:28.940

用这个

```
 [mutableDictCopy setObject:newValue forKey:descrizione.text]; 
```

代替

```
[mutableDictCopy setObject:newValue forKey:[descrizione.text]]; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-23T12:43:50.490

您正在混合成员和消息语法。还行吧：

```
[descrizione text] 
```

以下也可以。这意味着同样的事情。

```
descrizione.text 
```

这是不行的：

```
[descrizione.text] 
```

# java - 获取使用特定权限的应用程序列表

> ID：11612584
> 
> 赞同：1
> 
> 时间：2012-07-23T12:31:14.733
> 
> 标签：java, android, collections, permissions

我目前能够检索所有应用程序的权限列表，但是有没有办法获取使用特定权限的应用程序列表？

使用此代码，我可以在我的应用程序中获取某个包的权限列表。

```
 PackageInfo pkgInfo = getPackageManager().getPackageInfo(
                packageName, 
                PackageManager.GET_PERMISSIONS
              ); 
```

但我想要的是获取使用例如 INTERNET 权限的应用程序列表。

我可以用一个集合类来做吗，如下所示。如果是这样，用什么收藏？

# c# - 从对象更新 UI 文本框

> ID：11612592
> 
> 赞同：1
> 
> 时间：2012-07-23T12:31:45.603
> 
> 标签：c#, wpf

我想实现一种使用计算密集型方法将消息从对象传递到 UI 的方法，以便通知用户计算的状态和进度。执行此操作时，UI 应保持响应，即计算在另一个线程上执行。我读过委托、后台工作人员等，但我发现它们非常令人困惑，并且无法在我的应用程序中实现它们。这是一个简化的应用程序，其总体思路与我的应用程序相同。计算密集型方法完成后，UI 中的文本框在此处更新：

```
<Window x:Class="UpdateTxtBox.MainWindow"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    Title="UpdateTxtBox" Height="350" Width="525">
<Grid>
    <Grid.ColumnDefinitions>
        <ColumnDefinition Width="1*" />
        <ColumnDefinition Width="1*" />
    </Grid.ColumnDefinitions>
    <Button Content="Start" Height="23" HorizontalAlignment="Left" Margin="94,112,0,0" Name="btnStart" VerticalAlignment="Top" Width="75" Click="btnStart_Click" />
    <TextBox Grid.Column="1" HorizontalAlignment="Stretch"  Margin="0,0,0,0" Name="txtBox" VerticalAlignment="Stretch" TextWrapping="Wrap" VerticalScrollBarVisibility="Visible" />
</Grid> 
```

```
namespace UpdateTxtBox
{
    /// <summary>
    /// Interaction logic for MainWindow.xaml
    /// </summary>
    public partial class MainWindow : Window
    {
        public MainWindow()
        {
            InitializeComponent();
        }

        private void btnStart_Click(object sender, RoutedEventArgs e)
        {
            MyTextProducer txtProducer = new MyTextProducer();
            txtProducer.ProduceText();
            txtBox.Text = txtProducer.myText;
        }
    }
} 
```

计算密集类：

```
namespace UpdateTxtBox
{
    public class MyTextProducer
    {
        public string myText { get; private set; }

        public MyTextProducer()
        {
            myText = string.Empty;
        }

        public void ProduceText()
        {
            string txt;

            for (int i = 0; i < 10; i++)
            {
                txt = string.Format("This is line number {0}", i.ToString());
                AddText(txt);
                Thread.Sleep(1000);
            }
        }

        private void AddText(string txt)
        {
            myText += txt + Environment.NewLine;
        }
    }
} 
```

如何修改此代码以便在每次调用 AddText 方法时更新文本框？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-23T12:35:04.123

这里的基本问题是您在 UI 线程上执行计算密集型操作，这会锁定 UI（正如您自己已经弄清楚的那样）。解决方案是启动一个单独的线程，然后从中更新 UI。但是您随后面临的问题是只允许 UI 线程更新 UI。这是通过使用`Dispatcher`类来解决的，它为你处理所有这些讨厌的东西。

这是一篇很好的、充实的关于 Dispatcher 以及如何使用它的文章：http: [//msdn.microsoft.com/en-us/magazine/cc163328.aspx](http://msdn.microsoft.com/en-us/magazine/cc163328.aspx)

请注意，还有其他方法可以处理这种带有延迟/缓慢任务的 UI 更新，但我认为这足以解决您的问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-23T12:44:03.890

当您使用 WPF 时，我建议您使用数据绑定，这是您的代码的示例实现：

```
<Window x:Class="UpdateTxtBox.MainWindow"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    Title="UpdateTxtBox" Height="350" Width="525">
    <Grid>
        <Grid.ColumnDefinitions>
            <ColumnDefinition Width="1*" />
            <ColumnDefinition Width="1*" />
        </Grid.ColumnDefinitions>
        <Button Content="Start" Height="23" HorizontalAlignment="Left" Margin="94,112,0,0" Name="btnStart" VerticalAlignment="Top" Width="75" Click="btnStart_Click" />
        <TextBox Grid.Column="1" HorizontalAlignment="Stretch" Margin="0,0,0,0" Name="txtBox" VerticalAlignment="Stretch" TextWrapping="Wrap" VerticalScrollBarVisibility="Visible" Text="{Binding Path=myText}" />
    </Grid>
</Window> 
```

请注意，文本框 Content 属性现在是数据绑定的。

```
public partial class MainWindow : Window
{
    MyTextProducer txtProducer;

    public MainWindow()
    {
        InitializeComponent();

        txtProducer = new MyTextProducer();
        this.DataContext = txtProducer;
    }

    private void btnStart_Click(object sender, RoutedEventArgs e)
    {
        Task.Factory.StartNew(txtProducer.ProduceText);
        txtBox.Text = txtProducer.myText;
    }
} 
```

注意这一`this.DataContext = txtProducer`行，这是告诉绑定在哪里查找值的方式

```
public class MyTextProducer : INotifyPropertyChanged
{
    private string _myText;
    public string myText { get { return _myText; } set { _myText = value; RaisePropertyChanged("myText"); } }

    public MyTextProducer()
    {
        myText = string.Empty;
    }

    public void ProduceText()
    {
        string txt;

        for (int i = 0; i < 10; i++)
        {
            txt = string.Format("This is line number {0}", i.ToString());
            AddText(txt);
            Thread.Sleep(1000);
        }
    }

    private void AddText(string txt)
    {
        myText += txt + Environment.NewLine;
    }

    public event PropertyChangedEventHandler PropertyChanged;

    public void RaisePropertyChanged(string propName)
    {
        if (PropertyChanged != null)
            PropertyChanged(this, new PropertyChangedEventArgs(propName));
    }
} 
```

`MyTextProducer`现在实现`INotifyPropertyChanged`了，因此对属性的任何更改都`myText`将自动反映在 UI 中。

# python - Django-formwizard 和 ModelFormSet 保存

> ID：11612603
> 
> 赞同：1
> 
> 时间：2012-07-23T12:32:15.777
> 
> 标签：python, django, django-views, formwizard, django-formwizard

我正在重写我们应用程序的一大块，它需要用户创建一个附加到它`Project`的应用程序。`Rewards`

表单分为不同的步骤，前两个是正常`Project`的，下一个是`Rewards`，最后是一个简单的预览，让用户来回滑动以创建一个完美的`Project`。

**我的表格.py**

```
class BaseRewardFormSet(BaseModelFormSet):
    def __init__(self, *args, **kwargs):
        super(BaseRewardFormSet, self).__init__(*args, **kwargs)
        self.queryset = Reward.objects.none()

RewardFormSet1 = modelformset_factory(Reward, extra=2, exclude=('project'), formset=BaseRewardFormSet)

class ProjectForm1(forms.ModelForm):
    """docstring for ProjectForm1"""
    class Meta:
        model = Project
        exclude=( ... )

class ProjectForm2(forms.ModelForm):
    """docstring for ProjectForm2"""
    class Meta:
        model = Project
        exclude = ( ... ) 
```

**我的网址.py**

```
instance_dict = {'2': Reward.objects.none()}
url(r'^new-project/$', login_required(ProjectWizard.as_view([ProjectForm1, ProjectForm2, RewardFormSet1, ProjectForm3], instance_dict=instance_dict))), 
```

**我的意见.py**

```
class ProjectWizard(SessionWizardView):
    file_storage = cloudfiles_storage

    def get_context_data(self, form, **kwargs):
        context = super(ProjectWizard, self).get_context_data(form, **kwargs)
        initial_dict = self.get_form_initial('0')
        if self.steps.current == '1':
            step1_data = self.get_cleaned_data_for_step('0')
            context.update({'step1_data':step1_data,'currency_sign':step1_data['base_currency']})
        else:
            step1_data = self.get_cleaned_data_for_step('0')
            step2_data = self.get_cleaned_data_for_step('1')
            step3_data = self.get_cleaned_data_for_step('2')
            context.update({'step1_data':step1_data,'step2_data':step2_data,'step3_data':step3_data,})
        return context

    def get_template_names(self):
        step = int(self.steps.current)
        if step == 3:
            return 'formwizard/preview.html'
        else:
            return 'formwizard/wizard_form.html'

    def done(self, form_list, *args, **kwargs):
        form_data = form_list[0].cleaned_data
        form_data_details = form_list[1].cleaned_data
        form_data.update(form_data_details)
        project = Project()
        for field in project.__dict__.iterkeys():
            if field in form_data:
                project.__dict__[field] = form_data[field]
        project.owner = self.request.user
        project.date_published = datetime.now()
        project.save()        
        return render_to_response('formwizard/done.html', {
            'form_data': [form.cleaned_data for form in form_list],
        }) 
```

渲染redirect时，显示所有数据已被清理，表示表单有效，项目数据全部保存到**Project**

我可以看到奖励数据不会保存，因为它没有被调用，但到目前为止我尝试过的每个解决方案都失败了。

**如何在保存时在此解决方案中实施奖励？**

也许有人可以对此有所了解，非常感谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-23T13:01:50.990

这管用吗？假设`Reward`有`project`.

```
for rw in form_list[2].save(commit=False):
    rw.project = project
    rw.save() 
```

# c# - 在asp.net mvc 3中登录的单元测试

> ID：11612608
> 
> 赞同：3
> 
> 时间：2012-07-23T12:32:34.757
> 
> 标签：c#, asp.net, asp.net-mvc-3, unit-testing

我在使用现有 AccountController（由 MVC 制作）测试登录方法时遇到问题...

我有这个简单的测试方法：

```
 [TestMethod]
  public void LogOnTest1() {
     AccountController controller = new AccountController();

     LogOnModel logonModel = new LogOnModel();
     logonModel.UserName = "test";
     logonModel.Password = "test1234";

     if ( controller.MembershipService == null ) {
        controller.MembershipService = new AccountMembershipService();
     }

     if ( controller.FormsService == null ) {
        controller.FormsService = new FormsAuthenticationService();
     }

     var result = controller.LogOn( logonModel, "" ) as ViewResult;

     Assert.AreEqual( "Index", result.ViewName );
  } 
```

和中定义的方法`AccountController`：

```
[HttpPost]
      public ActionResult LogOn( LogOnModel model, string returnUrl ) {
         if ( ModelState.IsValid ) {
            if ( MembershipService.ValidateUser( model.UserName, model.Password ) ) {
               FormsService.SignIn( model.UserName, model.RememberMe );
               if ( !string.IsNullOrEmpty( returnUrl ) ) {
                  return Redirect( returnUrl );
               } else {
                  return RedirectToAction( "Index", "Home" );
               }
            } else {
               ModelState.AddModelError( "", "The user name or password provided is incorrect." );
            }
         }

         // If we got this far, something failed, redisplay form
         return View( model );
      } 
```

上述方法不是我定义/修改的。刚刚在创建 asp.net mvc 项目时创建。

问题出在一线

`if ( MembershipService.ValidateUser( model.UserName,model.Password ) ) {`

**尽管我提供了正确的登录信息，但它总是**返回false。

我的错误在哪里？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-23T12:38:49.507

首先，不要`if`在测试中使用语句和其他条件逻辑。也不要在测试中使用具体的类。如果这个测试失败了，你怎么知道为什么？什么是坏的控制器或`AccountMembershipService`？使用可以模拟的抽象依赖项。

```
public class AccountController : Controller
{
    private IMembershipService _membershipService;
    private IFormsService _formsService;

    public AccountController(IMembershipService membershipService,
                             IFormsService formsService)
    {
        _membershipService = membershipService;
        _formsService = formsService;
    }

    public ActionResult LogOn(LogOnModel model, string returnUrl)
    {
        // implementation goes here
    }
} 
```

和你的测试：

```
[Test]
public void ShouldNotAcceptInvalidUser()
{
    // Arrange
    Mock<IMembershipService> membership = new Mock<IMembershipService>();
    membership.Setup(m => m.ValidateUser(It.IsAny<string>(), It.IsAny<string>()))
              .Returns(false);
    Mock<IFormsService> forms = new Mock<IFormsService>();
    var logonModel = new LogOnModel() { UserName = "", Password = "" };
    var controller = new AccountController(membership.Object, forms.Object);

    // Act
    var result = controller.LogOn(logonModel, "") as ViewResult;

    // Assert
    Assert.That(result.ViewName, Is.EqualTo("Index"));
    Assert.False(controller.ModelState.IsValid);
    Assert.That(controller.ModelState[""], 
                Is.EqualTo("The user name or password provided is incorrect."));
} 
```

有趣的是，您并不关心您传递给控制器​​的登录信息。您模拟来自会员服务的响应，它说登录不正确。

更多测试：

```
[Test]
public void ShouldRedisplayViewWhenModelIsNotValid()
{
   // Arrange        
   Mock<IMembershipService> membership = new Mock<IMembershipService>();
   Mock<IFormsService> forms = new Mock<IFormsService>();
   var model = new LogOnModel() { UserName = "", Password = "" };
   var controller = new AccountController(membership.Object, forms.Object);
   controller.ModelState.AddModelError("key", "error message");
   // Act
   var result = controller.LogOn(model, "") as ViewResult;
   // Assert
   Assert.That(result.ViewName, Is.EqualTo("LogOn"));
}

[Test]
public void ShouldSignInAndRedirectToIndex()
{
   // Arrange        
   Mock<IMembershipService> membership = new Mock<IMembershipService>();
  membership.Setup(m => m.ValidateUser(It.IsAny<string>(), It.IsAny<string>()))
             .Returns(true);
   Mock<IFormsService> forms = new Mock<IFormsService>();
   var model = new LogOnModel() { UserName = "", Password = "" };
   var controller = new AccountController(membership.Object, forms.Object);
   controller.ModelState.AddModelError("key", "error message");
   // Act
   var result = controller.LogOn(model, "") as ViewResult;

   // Assert
   forms.Verify(f => f.SignIn(model.UserName, model.RememberMe));
   Assert.That(result.ViewName, Is.EqualTo("Index"));
} 
```

# java - Reg Replace text block first occurrence + last occurrence

> ID：11612609
> 
> 赞同：0
> 
> 时间：2012-07-23T12:32:34.773
> 
> 标签：java, regex

Just a little question.

I have to quote a text inside a couple of string taking the first occurrence of one and the last occurrence of other.

Ex.

```
[quote]
Hi to all
[quote]
im fine
[/quote]
[/quote] 
```

I hate to inscribe all the quoted text inside a DIV. So I have a regexp like:

```
String pattern = "\\[quote\\](.*?)\\[\\\quote\\\]";
body = body.replaceAll(pattern, "<div class=\"quote\">[quote]$1[/quote]</div>"); 
```

It works but the regexp take from first [quote] to first [/quote] leaving the second [/quote] outside the DIV. What I want obtain is:

```
<div class="quote">
[quote]
Hi to all
[quote]
im fine
[/quote]
[/quote]
</div> 
```

Thanks.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-23T12:42:56.243

It sounds like, as @nhahtdh says, you simply want to remove the `?` to make the `*` greedy.

Compare:

```
public static void main(String[] args) {
    String    input = "[quote]\n"
        + "Hi to all\n"  
        + "[quote]\n"
        + "im fine\n"
        + "[/quote]\n"
        + "[/quote]\n";

    System.out.println( input.replaceAll( "(?s)\\[quote\\](.*?)\\[/quote]", "<div class=\"quote\">\n[quote]$1[/quote]\n</div>" ));
    System.out.println();
    System.out.println( input.replaceAll( "(?s)\\[quote\\](.*)\\[/quote]", "<div class=\"quote\">\n[quote]$1[/quote]\n</div>" ));
  } 
```

output:

```
<div class="quote">
[quote]
Hi to all
[quote]
im fine
[/quote]
</div>
[/quote]

<div class="quote">
[quote]
Hi to all
[quote]
im fine
[/quote]
[/quote]
</div> 
```

# spring - 不在类路径上的 Spring WS 安全访问密钥库

> ID：11612613
> 
> 赞同：0
> 
> 时间：2012-07-23T12:32:42.727
> 
> 标签：spring, security, soap, spring-ws

我是 Spring Web 服务的新手，目前正在尝试实现 spring-ws 安全性，以实现传入和传出 SOAP 消息的安全传输和加密/解密。我们的服务器上有一个密钥库，它安装在 Tomcat 下的 conf 目录中。如何在我的 Spring Web 应用程序中引用该密钥库？我想避免移动密钥库，因为将来它会被其他应用程序使用。我昨天大部分时间都在寻找答案，但是我遇到的所有示例都将密钥库文件放在类路径上。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-23T13:47:43.637

我假设您将 WSS4J 与 Spring-WS 一起使用，您可以放置​​任何有效[资源](http://static.springsource.org/spring/docs/3.1.x/spring-framework-reference/html/resources.html#resources-implementations)来引用证书位置。例如。

```
<property name="keyStoreLocation" value="file://C:/tomcat/.."/> 
```

# java - 如何在 Android 设备上通过 libGDX Preferences 正确保存游戏进度？

> ID：11612619
> 
> 赞同：5
> 
> 时间：2012-07-23T12:33:12.557
> 
> 标签：java, android, libgdx

**我正在使用下一个代码。此代码在桌面版本上运行良好，但在 Android 设备上却不行。返回 Gdx.app.getPreferences(PREFS_NAME) 始终为空。为什么？我在哪里会犯错？**

```
import com.badlogic.gdx.Gdx;
import com.badlogic.gdx.Preferences;

public class BeatlesPreferences {
    // constants
    private static final String PREF_VIBRO = "vibro";
    private static final String PREF_MUSIC_ENABLED = "musicenabled";
    private static final String PREF_SOUND_ENABLED = "soundenabled";
    private static final String PREFS_NAME = "my_app";

    public BeatlesPreferences() {
    }

    protected Preferences getPrefs() {
        return Gdx.app.getPreferences(PREFS_NAME);
    }

    public boolean isSoundEffectsEnabled() {
        return getPrefs().getBoolean(PREF_SOUND_ENABLED, true);
    }

    public void setSoundEffectsEnabled(boolean soundEffectsEnabled) {
        getPrefs().putBoolean(PREF_SOUND_ENABLED, soundEffectsEnabled);
        getPrefs().flush();
    }

    public boolean isMusicEnabled() {
        return getPrefs().getBoolean(PREF_MUSIC_ENABLED, true);
    }

    public void setMusicEnabled(boolean musicEnabled) {  
        getPrefs().putBoolean(PREF_MUSIC_ENABLED, musicEnabled);
        getPrefs().flush();
    }

    public boolean isVibroEnabled() {
        return getPrefs().getBoolean(PREF_VIBRO, true);
    }

    public void setVibroEnabled(boolean vibro) {
        getPrefs().putBoolean(PREF_VIBRO, vibro);
        getPrefs().flush();
    }
} 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-06-29T00:26:49.793

像这样使用：

```
 private Preferences preferences;
   protected Preferences getPrefs() {
      if(preferences==null){
         preferences = Gdx.app.getPreferences(PREFS_NAME);
      }
   return preferences;
   } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-01-03T15:07:22.483

您没有在代码中以任何方式在 .prefs 中设置应用程序的名称。添加名称就像您添加音乐、振动...等一样

```
public void setPREFS_NAME() {
    getPrefs().putBoolean("PREFS_NAME", PREFS_NAME);
    getPrefs().flush();
} 
```

# python - 适用于 Windows 7 64 位的 Python 2.3

> ID：11612628
> 
> 赞同：-1
> 
> 时间：2012-07-23T12:33:31.820
> 
> 标签：python, windows, python-2.7, 32bit-64bit, python-2.3

我使用一些用 Python 2.3 *（Windows 32 位操作系统）编写的 Python 脚本开发了我的应用程序*

现在我需要支持 Windows 64 位。但我找不到 64 位的 Python 2.3。

我已经安装了 64 位的 Python 2.7，但我遇到了一些兼容性问题（2.3 与 2.7）

那么，是否有适用于 Windows 64 位的 Python 2.3。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-23T12:38:04.253

不幸的是，Python 2.3 不适用于 Windows 的 64 位。您最好的选择是使用 Python 2.7 运行您的脚本并修复您可能遇到的任何兼容性问题。

# jquery - 在单击时添加值以形成数组

> ID：11612639
> 
> 赞同：1
> 
> 时间：2012-07-23T12:34:03.750
> 
> 标签：jquery, onclick

我有下面的代码在点击。

```
<form action="" name="testform" method="post" id="testform">
<input type="hidden" value="" name="a">
<input type="hidden" value="" name="b">
<input type="hidden" value="" name="c">
<select>
    <option value=""></option>
    <option value="" onclick="document.testform.a.value='12'; document.testform.b.value='111'; document.testform.c.value='123'">1</option>
    <option value="" onclick="document.testform.a.value='21'; document.testform.b.value='222'; document.testform.c.value='232'">2</option>
    <option value="" onclick="document.testform.a.value='32'; document.testform.b.value='333'; document.testform.c.value='233'">3</option>
    <option value="" onclick="document.testform.a.value='43'; document.testform.b.value='444'; document.testform.c.value='344'">4</option>
    <option value="" onclick="document.testform.a.value='54'; document.testform.b.value='555'; document.testform.c.value='345'">5</option>
</select> 
```

当您选择 1 时，a、b、c 的隐藏字段将获得 1 的值。

这很好用，但是我在这里有一个更大的项目，用户可以在整个表单中为“a”选择多个值。没有 onclick 我可以很好地工作，例如

```
<input type="hidden" name="a[]" value="1"> 
```

但是当我这样做时

```
<form action="" name="testform" method="post" id="testform">
<input type="hidden" value="" name="a[]">
<input type="hidden" value="" name="b[]">
<input type="hidden" value="" name="c[]">
<select>
    <option value=""></option>
    <option value="" onclick="document.testform.a[].value='12'; document.testform.b[].value='111'; document.testform.c[].value='123'">1</option>
    <option value="" onclick="document.testform.a[].value='21'; document.testform.b[].value='222'; document.testform.c[].value='232'">2</option>
    <option value="" onclick="document.testform.a[].value='32'; document.testform.b[].value='333'; document.testform.c[].value='233'">3</option>
    <option value="" onclick="document.testform.a[].value='43'; document.testform.b[].value='444'; document.testform.c[].value='344'">4</option>
    <option value="" onclick="document.testform.a[].value='54'; document.testform.b[].value='555'; document.testform.c[].value='345'">5</option>
</select> 
```

我的隐藏值中没有任何内容。

为什么是这样？

有没有更好的方法来做我想要用 jQuery 做的事情？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-23T12:50:14.490

这是针对您的问题的修改后的 jsfiddle 链接。 [http://jsfiddle.net/et3r7/12/](http://jsfiddle.net/et3r7/12/)请检查这是否对您有帮助。我已将文本隐藏以显示结果，您可以将其隐藏。

我已经稍微清理了你的代码。删除了所有的 onClick 代码。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-23T12:45:02.550

我不认为这`.value`是数组的属性。（其实我是一个derp，它可能是数组元素的一个属性——我会查一下）我也会看一下数组的[push()](https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/Array/push)方法来添加元素。

您可以通过其他几种方法来完成此任务。使用 JS，您可以将其抽象一点，并创建一个函数来完成每次点击所做的工作，这将使您的代码更加简洁。

如果使用 jQuery，这也很容易完成，但我会评估这部分功能是否值得额外下载（jQuery 已压缩和压缩为 32KB）。

# javascript - 基于 JavaScript 中的子值从 n 维数组中选择一个值

> ID：11612642
> 
> 赞同：0
> 
> 时间：2012-07-23T12:34:17.770
> 
> 标签：javascript, jquery, arrays, google-maps-api-3

我正在尝试根据其中一个子元素的值在数组中选择一个元素。

使用从 Google Maps API 地理编码请求返回的结果作为示例，我们有一个形式的数组：

```
{
      "address_components": [
        {
          "long_name": "Renshaw St",
          "short_name": "Renshaw St",
          "types": [
            "route"
          ]
        },
        {
          "long_name": "Eccles",
          "short_name": "Eccles",
          "types": [
            "locality",
            "political"
          ]
        },
        {
          "long_name": "Greater Manchester",
          "short_name": "Gt Man",
          "types": [
            "administrative_area_level_2",
            "political"
          ]
        },
        {
          "long_name": "United Kingdom",
          "short_name": "GB",
          "types": [
            "country",
            "political"
          ]
        },
        {
          "long_name": "M30 0PQ",
          "short_name": "M30 0PQ",
          "types": [
            "postal_code"
          ]
        },
        {
          "long_name": "Manchester",
          "short_name": "Manchester",
          "types": [
            "postal_town"
          ]
        }
      ],
      "formatted_address": "Renshaw St, Eccles, Manchester, Greater Manchester M30 0PQ, UK",
      "geometry": {
        "bounds": {
          "northeast": {
            "lat": 53.48266090000001,
            "lng": -2.35206530
          },
          "southwest": {
            "lat": 53.48128999999999,
            "lng": -2.35324410
          }
        },
        "location": {
          "lat": 53.4822450,
          "lng": -2.35294730
        },
        "location_type": "GEOMETRIC_CENTER",
        "viewport": {
          "northeast": {
            "lat": 53.48332443029150,
            "lng": -2.351305719708498
          },
          "southwest": {
            "lat": 53.48062646970850,
            "lng": -2.354003680291502
          }
        }
      },
      "types": [
        "route"
      ]
    } 
```

我想选择`address_component->long_name`元素`type`等于我指定的值的那个。

我编写了以下代码，将上述内容`array`和 a`key`作为参数，并且似乎运行良好：

```
function getAddressComponent(key, result) {

  var rtn;

  $.each(result,function(index,value){
    if( result[index].types[0] == key ) rtn = result[index].long_name;
  });

  return rtn;    
} 
```

但是想知道是否有人可以提出更好的方法，因为我已经看到它以几种不同的方式完成并希望使用最佳方法。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-24T12:16:07.917

你的代码不是那么长..大声笑。您可以立即返回结果，因为一旦找到它，您就可以离开循环。而且我没有研究 jQuery forEach，但我认为它不能比下面的代码短。

这怎么样？

```
function findAdressComponentByLongName( findString ) {

    var addressComponents = data.address_components,
        i = 0,
        ln = addressComponents.length;

    for( ; i < ln; i++ ) {

        if( addressComponents[ i ].long_name == findString ) {

            return addressComponents[ i ];
        }
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-24T12:36:39.367

没有理由使用 jQuery.each，普通的 for 循环在这里会更短。

```
function getNameByFirstType(key, result) {
    for (var i=0; i<result.length; i++)
        if (result[i].types[0] == key)
            return result[i].long_name;
    return false;    
}

getNameByFirstType("country", data.address_components); 
```

另外，我不确定你为什么只检查`types`数组的第一个成员——但我想这是预期的行为。

# ios - 来自“645 PRO”等相机的原始图像数据

> ID：11612647
> 
> 赞同：12
> 
> 时间：2012-07-23T12:34:30.300
> 
> 标签：ios, image, opencv, camera, imagemagick

前段时间我已经问过这个问题，我也得到了一个很好的答案：

> 我一直在搜索这个论坛，但我找不到我真正需要的东西。我想从相机获取原始图像数据。到目前为止，我试图从该方法 captureStillImageAsynchronouslyFromConnection:completionHandler: 中获取 imageDataSampleBuffer 中的数据并将其写入 NSData 对象，但这不起作用。也许我走错了路，或者我只是做错了。我不想要以任何方式压缩图像。
> 
> 简单的方法是使用来自 AVCaptureStillImageOutput 的 jpegStillImageNSDataRepresentation:，但就像我说的那样，我不希望它被压缩。
> 
> 谢谢！

[来自相机的原始图像数据](https://stackoverflow.com/questions/10698663/raw-image-data-from-camera)

我以为我可以使用它，但我终于注意到我需要以与“645 PRO”类似的方式更直接地获取原始图像数据。

[645 PRO：原始还原](http://jag.gr/2012/04/17/645-pro-raw-redux/)

该网站上的图片显示他们在任何 jpeg 压缩完成之前获得了原始数据。这就是我想做的。我的猜测是我需要进行转换`imageDataSampleBuffer`，但我没有看到完全不压缩的方法。“645 PRO”还将其图片保存在 TIFF 中，因此我认为它至少使用了一个额外的库。

我不想制作照片应用程序，但我需要最好的质量来检查图片中的某些功能。

谢谢！

**编辑1：** 所以在尝试和搜索不同方向一段时间后，我决定更新状态。

该项目的最终目标是检查图片中的某些特征，这将在 opencv 的帮助下发生。但在应用程序能够在手机上执行此操作之前，我会尝试从手机中获取大部分未压缩的图片，以便在计算机上对其进行分析。

因此，我想保存“包含从相机返回的未压缩 BGRA 字节的 NSData 实例”，我可以使用 Brad Larson 的代码将其保存为 bmp 或 TIFF 文件。正如我在评论中所说，我尝试为此使用 opencv（无论如何都需要它）。但我能做的最好的事情就是把它变成一个 UIImage ，它具有来自[Computer Vision Talks](http://computer-vision-talks.com/2012/06/opencv-tutorial-part-3/)的功能。

```
void *baseAddress = CVPixelBufferGetBaseAddress(imageBuffer);
cv::Mat frame(height, width, CV_8UC4, (void*)baseAddress);
UIImage *testImag = [UIImage imageWithMat:frame andImageOrientation:UIImageOrientationUp];
//imageWithMat... being the function from Computer Vision Talks which I can post if someone wants to see it 
```

**ImageMagick - 方法**

我尝试的另一件事是按照[另一篇文章](https://stackoverflow.com/questions/8714753/how-to-create-a-tiff-on-the-ipad)中的建议使用 ImageMagick 。`UIImagePNGRepresentation`但是如果不使用类似or的东西，我找不到办法做到这一点`UIImageJPEGRepresentation`。

现在我正在尝试使用本[教程](http://www.ibm.com/developerworks/linux/library/l-libtiff/)对 libtiff 做一些事情。

也许有人有想法或知道将我的缓冲区对象转换为未压缩图片的更简单方法。再次提前感谢！

**编辑2：**

我发现了一些东西！我必须说我非常盲目。

```
void *baseAddress = CVPixelBufferGetBaseAddress(imageBuffer);
cv::Mat frame(height, width, CV_8UC4, (void*)baseAddress);

NSArray *paths = NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES);
NSString *documentsDirectory = [paths objectAtIndex:0];
NSString *filePath = [documentsDirectory stringByAppendingPathComponent:[NSString stringWithFormat:@"ocv%d.TIFF", picNum]];
const char* cPath = [filePath cStringUsingEncoding:NSMacOSRomanStringEncoding];

const cv::string newPaths = (const cv::string)cPath;

cv::imwrite(newPaths, frame); 
```

我只需要使用 opencv 中的 imwrite 函数。通过这种方式，我在 beyer-Polarisation 之后直接获得了大约 30 MB 的 TIFF 文件！

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-07-23T15:19:15.270

哇，那篇博文很特别。很多话只是说他们从静止图像中获得了 Apple 交给你的样本缓冲区字节。他们的方法没有什么特别创新的地方，我知道有很多相机应用程序可以做到这一点。

您可以使用如下代码获取从使用 AVCaptureStillImageOutput 拍摄的照片返回的原始字节：

```
[photoOutput captureStillImageAsynchronouslyFromConnection:[[photoOutput connections] objectAtIndex:0] completionHandler:^(CMSampleBufferRef imageSampleBuffer, NSError *error) {
    CVImageBufferRef cameraFrame = CMSampleBufferGetImageBuffer(imageSampleBuffer);
    CVPixelBufferLockBaseAddress(cameraFrame, 0);
    GLubyte *rawImageBytes = CVPixelBufferGetBaseAddress(cameraFrame);
    size_t bytesPerRow = CVPixelBufferGetBytesPerRow(cameraFrame);
    NSData *dataForRawBytes = [NSData dataWithBytes:rawImageBytes length:bytesPerRow * CVPixelBufferGetHeight(cameraFrame)];
    // Do whatever with your bytes

    CVPixelBufferUnlockBaseAddress(cameraFrame, 0);
}]; 
```

这将为您提供一个 NSData 实例，其中包含从相机返回的未压缩 BGRA 字节。您可以将它们保存到磁盘或对它们做任何您想做的事情。如果你真的需要自己处理字节，我会避免创建 NSData 的开销，只使用像素缓冲区中的字节数组。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-08-03T12:43:51.850

我可以用 OpenCV 解决它。感谢所有帮助过我的人。

```
void *baseAddress = CVPixelBufferGetBaseAddress(imageBuffer);
cv::Mat frame(height, width, CV_8UC4, (void*)baseAddress);

NSArray *paths = NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES);
NSString *documentsDirectory = [paths objectAtIndex:0];
NSString *filePath = [documentsDirectory stringByAppendingPathComponent:[NSString stringWithFormat:@"ocv%d.BMP", picNum]];
const char* cPath = [filePath cStringUsingEncoding:NSMacOSRomanStringEncoding];

const cv::string newPaths = (const cv::string)cPath;

cv::imwrite(newPaths, frame); 
```

我只需要使用 opencv 中的 imwrite 函数。这样我就可以在拜耳过滤器之后直接获得大约 24 MB 的 BMP 文件！

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-23T15:37:18.393

虽然答案的核心来自[iOS 的 Brad：Get pixel-by-pixel data from camera](https://stackoverflow.com/questions/10865100/ios-get-pixel-by-pixel-data-from-camera/10865206#10865206)，但 Brad 的回复中完全不清楚一个关键要素。它隐藏在“一旦您配置了捕获会话......”。

您需要为您的`AVCaptureStillImageOutput`.

例如，设置`kCVPixelBufferPixelFormatTypeKey`为`kCVPixelFormatType_420YpCbCr8BiPlanarFullRange`会给你一个 YCbCr `imageDataSampleBuffer`in `captureStillImageAsynchronouslyFromConnection:completionHandler:`，然后你可以随意操作它。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-01-13T19:42:20.660

正如@Wildaker 提到的，要使特定代码起作用，您必须确定相机发送给您的像素格式。如果设置为 32 位 RGBA 格式，来自@thomketler 的代码将起作用。

这是使用 OpenCV 的相机默认 YUV 代码：

```
cv::Mat convertImage(CMSampleBufferRef sampleBuffer)
{
    CVImageBufferRef cameraFrame = CMSampleBufferGetImageBuffer(sampleBuffer);
    CVPixelBufferLockBaseAddress(cameraFrame, 0);

    int w = (int)CVPixelBufferGetWidth(cameraFrame);
    int h = (int)CVPixelBufferGetHeight(cameraFrame);
    void *baseAddress = CVPixelBufferGetBaseAddressOfPlane(cameraFrame, 0);

    cv::Mat img_buffer(h+h/2, w, CV_8UC1, (uchar *)baseAddress);
    cv::Mat cam_frame;
    cv::cvtColor(img_buffer, cam_frame, cv::COLOR_YUV2BGR_NV21);
    cam_frame = cam_frame.t();

    //End processing
    CVPixelBufferUnlockBaseAddress( cameraFrame, 0 );

    return cam_frame;
} 
```

`cam_frame`应该有完整的 BGR 框架。我希望这会有所帮助。

# php - 与 Jquery Masonry 对齐作斗争

> ID：11612653
> 
> 赞同：2
> 
> 时间：2012-07-23T12:34:47.493
> 
> 标签：php, jquery, alignment, jquery-masonry

我一直在与砌体作斗争。似乎它正在尝试做它的工作，但它没有正确对齐。我已经尝试修复它几个小时了。我在这里搜索，发现有同样问题的人，但解决方案对我不起作用。这是所有代码：

```
<div id="container">
    <?php while (next_news()): ?>
<div class="newsitem">
<span class="newstitle"><?php printNewsTitleLink(); ?></span>
<span class="newsdate"><?php printNewsDate(); ?></span>
<span class="newscontent"><?php printNewsContent(); ?></span>
</div>    
    <?php endwhile; ?>
</div> 
```

CSS 代码：

```
div.newsitem {
    width:215px;
    text-align:justify;
    margin:5px;
    padding:15px;
    float: left;
    font-size:12px;
    background-color:#FFF;
}

#container {
    display:inline-block;
} 
```

这是脚本，我确实尝试为列指定宽度或更改 Gutterwidth，但没有任何效果：

我的脚本：-

```
<script>
$(function(){
$('#container').masonry({
itemSelector: '.newsitem'
});
});
</script> 
```

在这里包含的文件使其全部工作：

```
<script src="<?php echo $_zp_themeroot; ?>/js/jquery-1.7.2.min.js"></script>
<script src="<?php echo $_zp_themeroot; ?>/js/jquery.masonry.min.js"></script> 
```

它应该在哪里工作：[http](http://dagloos.com/lust/index.php?p=news) ://dagloos.com/lust/index.php?p=news 请帮助我，我将不胜感激。我正要为此拔头发。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-23T13:02:41.323

我弄清楚了问题所在！

```
<script src="<?php echo $_zp_themeroot; ?>/js/jquery.masonry.min.js"></script> 
```

只需要放在精美的盒子脚本之后。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-23T12:47:27.777

首先，尝试放置

```
 $(function(){$('#container').masonry({ itemSelector: '.newsitem' }); }); 
```

在 - 的里面

```
$(document).ready(function() { 
```

功能，我想它应该可以工作。

* * *

在黑暗中拍摄，但尝试更换：

```
div.newsitem {} 
```

和

```
.newsitem{} 
```

边注：

```
<script type="text/javascript" src="/lust/themes/bottomline/js/jquery.fancybox-buttons.js"></script> 
```

目前导致404。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-23T13:06:00.753

在控制台中，它清楚地表明它无法加载砖石。

TypeError: Object [object Object] 没有方法'masonry'

# python - 使用 Python ctypes 访问 Visual Foxpro COM DLL

> ID：11612663
> 
> 赞同：1
> 
> 时间：2012-07-23T12:35:22.863
> 
> 标签：python, dll, ctypes, foxpro, visual-foxpro

我正在尝试使用 python *ctypes*库来访问在 Visual Fox Pro 中创建的 COM DLL 中的各种函数（来自 .prg 文件）。

这是fox pro中的一个示例（根据实际代码简化）

```
将 CLASS 测试定义为 CUSTOM OLEPUBLIC

    程序初始化
        开启错误
        关闭控制台
        设置通知关闭
        设置安全关闭
        关闭通话
        设置通知关闭
    ENDPROC

    功能 get_input_out（输入为字符串）为字符串
        输出 = 输入
        返回输出
    结束函数

结束定义

```

在python中，我正在做一些事情：

```
导入 ctypes

链接 = ctypes.WinDLL("path\to\com.dll")
打印链接.get_input_out("someinput")

```

dll 注册良好并已加载，但当我尝试调用该函数时，我只得到以下信息。

```
AttributeError：找不到函数“get_input_out”

```

我可以验证 dll 确实有效，因为我能够使用 COM 库通过 php 脚本访问这些函数。

我真的很想让它在 python 中工作，但到目前为止我的尝试都是徒劳的，ctypes 甚至可以与 VFP 一起使用吗？任何意见，将不胜感激。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-18T03:50:47.607

对于使用 OLEPUBLIC 子句的 VFP COM 对象，您应该使用 python Win32 扩展，而不是`ctypes`模块。Python Win32 扩展提供了一整套功能齐全的组件，允许 Python 成为 COM 客户端，这正是您在本例中所需要的。

您的代码应如下所示：

```
from win32com.client import Dispatch
oFox = Dispatch("com.testing")
# where the file name compiled by VFP is com.dll and the olepublic class is testing.
# in Windows this stuff is not case sensitive.
print oFox.get_input_out("something")
# to close things down..
oFox = None 
```

如果您只想访问 VFP 表，Microsoft 提供了一个免费的 ADO 兼容组件`vfpoledb`，可用于通过 ADODB 访问表，而后者又可以通过`Dispatch()`Win32 扩展中的相同功能进行访问。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-23T13:39:32.833

尝试从对函数的调用中删除括号。更改`print link.get_input_out("someinput")`为`print link.get_input_out "someinput"`。

# android - Android：调用 onDestroy() 时如何更改活动元素？

> ID：11612667
> 
> 赞同：1
> 
> 时间：2012-07-23T12:35:43.687
> 
> 标签：android, android-activity, android-service

当我调用 context.stopService(myService) 时，我想在我的 android 活动中的某些按钮上执行一些 setEnabled(true) 或 setEnabled(false)。

我的问题是：如何从服务中的 onDestroy() 函数更改活动？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-23T12:41:32.080

我不确定我是否正确理解了您的问题，但如果您想在服务和活动之间建立通信，您应该阅读[Bound Services](http://developer.android.com/guide/components/bound-services.html)。它提供了接口，它们可以通过该接口相互传递数据。

# iphone - iPad上UIScrollView的透明度

> ID：11612670
> 
> 赞同：0
> 
> 时间：2012-07-23T12:35:59.887
> 
> 标签：iphone, ipad, uiscrollview, transparency, background-color

我有 xib，其中有几个视图，但基本上结构如下所示：

```
- view
   - Image View (fullscreen image)
   - some views...
   - Table View (style: Grouped) 
```

在 xib 编辑器中编辑表格视图时，我可以在其表格视图和视图部分设置背景。我将它们设置为清晰的颜色。在 iPhone 上，这个表格视图背景确实是透明的，我可以在它“下方”看到我的全屏图像，但在 iPad 上，表格视图的背景是灰色的，无论我在哪里设置什么。

我的问题是如何在现有案例中实现 iPad 上表格视图的透明背景？我正在开发的 iOS 是 5.1。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-23T13:05:16.800

我的问题的修复如下：

```
tableView.backgroundView = nil; 
```

这使得 iPhone 和 iPad 上的背景透明。

# maven - 如何从应用程序中查询 Maven 存储库以获取元数据

> ID：11612671
> 
> 赞同：7
> 
> 时间：2012-07-23T12:36:01.823
> 
> 标签：maven

我正在尝试将 Eclipse 项目迁移到 Maven 项目。eclipse 项目在其 .classpath 文件中引用了许多 jars。我正在寻找一种方法来生成相应的 pom 依赖项。

假设我有 Velocity-3.1.jar，我希望我的应用程序生成相应的 XML 块：

```
<dependency>
<groupId>velocity</groupId>
<artifactId>Apache-velocity</artifactId>
<version>3.1</version>
</dependency> 
```

该应用程序能够查询某些服务并找到 groupId、artefactId、版本数据。

当然，我接受错误并将检查生成的元数据。

是否有一些 Maven 服务/插件可以解决问题？

非常感谢 ！

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-23T14:53:56.293

您可以使用 Maven 中央存储库 API。

看看官方页面：[http ://search.maven.org/#api](http://search.maven.org/#api)

嗨，M。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2021-07-25T06:18:31.400

Maven 中央存储库 API 的官方页面已更改。这是新网址

[https://search.maven.org/classic/#api](https://search.maven.org/classic/#api)

# r - 如何找到一组数据的分布，然后进一步传播该分布？

> ID：11612677
> 
> 赞同：2
> 
> 时间：2012-07-23T12:36:20.347
> 
> 标签：r

我的问题是我有一组数据要拟合分布，然后一旦找到分布，就对其运行蒙特卡罗模拟以传播找到的分布。

我的第一段代码是：

```
require(fitdistrplus)
example1<-c(29,23,29,25,26,29,29,27,25,25,25,26,28,25,29,28,28,26,28,25,29,26,30) 
f1<-fitdist(example1,rgamma,method="mle") 
```

如果我然后使用命令

```
print(f1) 
```

它告诉我形状是 204.00，伽马分布的比率是 7.568

（请注意，我现在拟合分布的数字是任意的，我通常会有数百个观察值来拟合分布）。

我现在需要帮助的地方是当我使用包中的代码`mc2d`来传播这个分布时，如下所示：

```
require(mc2d)
ndunc(1000)
fitted<-mcstoc(rgamma, type="U", shape=204.00, rate=7.569) 
```

目前，我必须从“fitdist”命令的先前“打印”中手动输入形状和评分。

我的问题是，有没有办法让 mcstoc 命令自动从 fitdist 命令中获取形状和速率，这样我就不必手动中断代码？或者，如果 fitdistrplus 包和 mc2d 包无法实现，那么是否有另一个包可以为我做到这一点？

提前谢谢了！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-23T12:43:58.933

```
f1$estimate[1]
#   shape 
#204.0008 

f1$estimate[2]
#    rate 
#7.567762

fitted<-mcstoc(rgamma, type="U", shape=f1$estimate[1], rate=f1$estimate[2]) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-23T12:53:44.077

```
myFunction <- function (data){
    f1<-fitdist(data,rgamma,method="mle")
    fitted<-mcstoc(rgamma, type="U", shape=f1$estimate[1], rate=f1$estimate[2])
    return(fitted)
}

example1<-c(29,23,29,25,26,29,29,27,25,25,25,26,28,25,29,28,28,26,28,25,29,26,30)

fitted.example1 <- myFunction(exemple1) 
```

此功能未经测试。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-23T14:20:20.373

如果您不想键入参数的名称，可以使用`do.call`：

```
fitted <- do.call( 
  function(...) mcstoc(rgamma, type="U", ...), 
  as.list(f1$estimate) 
) 
```

# jquery - 如何使用jquery获取选项标签并插入数组

> ID：11612678
> 
> 赞同：-1
> 
> 时间：2012-07-23T12:36:24.007
> 
> 标签：jquery, html, arrays

我需要javascript中数组中的所有选项标签。

html代码：

```
<select name="name" id="id">
  <option value="val1">lab1</option>
  <option value="val2">lab2</option>
  <option value="val3">lab3</option>
  <option value="val4">lab4</option>
  <option value="val5">lab5</option>
</select> 
```

这段代码对我不起作用：

我想要`lab1`, `lab2`... 在数组中。选项的数量并不总是相同的。我该怎么做？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-23T12:39:58.250

试试这样：

```
var labels = $("#id>option").map(function(){
    return $(this).text();
}).get();
//["lab1","lab2","lab3","lab4","lab5"] 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-23T12:39:36.040

您可以使用`map()`方法，尝试以下方法：

```
var lab = $('#id option').map(function(){
               return $(this).text() // or return this.InnerHTML
          }) 
```

[演示](http://jsfiddle.net/FqzC5/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-23T12:40:13.257

这里：

```
var arr = $( '#id' ).children().map(function () {
    return $( this ).text();
}).get(); 
```

**现场演示： http:** [//jsfiddle.net/HXgE6/](http://jsfiddle.net/HXgE6/)（打开控制台查看结果）

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-23T12:46:30.273

```
$('#id').children().map(function() {
    return $(this).text();
}); 
```

[Demo](http://jsfiddle.net/TAGx7/)（打开控制台查看数组）

# selenium - 如何在eclipse中创建junit报告？

> ID：11612682
> 
> 赞同：0
> 
> 时间：2012-07-23T12:36:35.237
> 
> 标签：selenium, junit, webdriver

我想在 eclipse 中生成 junit 报告。我生成了 build.xml，然后运行我的测试。我执行此处描述的步骤[http://earlwillis.wordpress.com/2012/01/31/getting-started-with-junit-reports/](http://earlwillis.wordpress.com/2012/01/31/getting-started-with-junit-reports/)。但我得到错误

```
Buildfile: E:\eclipse\WebDriver\build.xml
build-subprojects:
init:
build-project:
 [echo] WebDriver: E:\eclipse\WebDriver\build.xml
[javac] E:\eclipse\WebDriver\build.xml:45: warning: 'includeantruntime' was not set,     defaulting to build.sysclasspath=last; set to false for repeatable builds
 build:
Sector:
[junit] Running Sector
[junit] Tests run: 1, Failures: 0, Errors: 1, Time elapsed: 0 sec
[junit] Test Sector FAILED
junitreport:
[junitreport] Processing E:\eclipse\WebDriver\junit\TESTS-TestSuites.xml to E:\DOCUME~1  \CONSUL~1\LOCALS~1\Temp\null35256633
[junitreport] Loading stylesheet jar:file:/E:/eclipse/plugins/org.apache.ant_1.8.2.v20120109-1030/lib/ant-junit.jar!/org/apache/tools/ant/taskdefs/optional/junit/xsl/junit-frames.xsl
[junitreport] : Error! The first argument to the non-static Java function 'replace' is not a valid object reference.
[junitreport] : Error! Cannot convert data-type 'void' to 'reference'.
[junitreport] : Fatal Error! Could not compile stylesheet
[junitreport] Failed to process E:\eclipse\WebDriver\junit\TESTS-TestSuites.xml

BUILD FAILED
E:\eclipse\WebDriver\build.xml:193: Errors while applying transformations: Fatal error during transformation

Total time: 2 seconds 
```

如果需要，我可以提供 build.xml。在 junit 文件夹中，我没有看到任何 html 文件。我做错了什么？

# c# - Compact Framework 中的模块、类和方法明智的内存使用

> ID：11612683
> 
> 赞同：0
> 
> 时间：2012-07-23T12:36:37.353
> 
> 标签：c#, .net, profiling, compact-framework2.0

我想知道是否可以知道当前正在运行的紧凑框架.net 应用程序中的内存和 cpu 使用情况？这样做的目的是我想创建一个监控工具，它将在远程机器上显示这个信息，这样我就可以获得我的应用程序的更新状态。

请帮忙。

谢谢， 奥姆基

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-23T12:45:45.840

我相信在 MSDN 上有一篇关于此的文章。

[http://msdn.microsoft.com/en-us/library/ms172525%28v=vs.80%29.aspx](http://msdn.microsoft.com/en-us/library/ms172525%28v=vs.80%29.aspx)

# java - 如何使用 JCIFS 和 apache VFS 访问 SMB URL？

> ID：11612690
> 
> 赞同：6
> 
> 时间：2012-07-23T12:37:02.290
> 
> 标签：java, apache, smb, jcifs, apache-commons-vfs

我正在尝试使用 smb URL 访问本地计算机上的文件夹。我的项目正在使用罐子：commons-vfs2-2.0.jar 和 jcifs-1.3.17.jar（以及所有其他必需的罐子）。完整的代码是：

```
public static void main(String[] args) throws FileSystemException {
    jcifs.Config.registerSmbURLHandler();
    StaticUserAuthenticator auth = new StaticUserAuthenticator(<domain>,<user>,<password>);
    FileSystemOptions opts = new FileSystemOptions(); 
    DefaultFileSystemConfigBuilder.getInstance().setUserAuthenticator(opts, auth);
    FileSystemManager fs = VFS.getManager();
    FileObject smbFile = fs.resolveFile("smb://10.0.2.2/TimeOut/");
    System.out.println(smbFile.exists() + " " + smbFile.getContent().getLastModifiedTime());
} 
```

我收到异常：

> 线程“主”org.apache.commons.vfs2.FileSystemException 中的异常：无法确定文件“smb://10.0.2.2/TimeOut”的类型。在 org.apache.commons.vfs2.provider.AbstractFileObject.getType(AbstractFileObject.java:505) 在 org.apache.commons.vfs2.provider.AbstractFileObject.exists(AbstractFileObject.java:477) 在 com.newsway.tests.VfsTest .main(VfsTest.java:23) 原因：jcifs.smb.SmbAuthException：登录失败：帐户当前被禁用。在 jcifs.smb.SmbTransport.checkStatus(SmbTransport.java:546) 在 jcifs.smb.SmbTransport.send(SmbTransport.java:663) 在 jcifs.smb.SmbSession.sessionSetup(SmbSession.java:390) 在 jcifs.smb。 SmbSession.send(SmbSession.java:218) 在 jcifs.smb.SmbTree.treeConnect(SmbTree.java:176) 在 jcifs.smb.SmbFile.doConnect(SmbFile.java:911) 在 jcifs。

据我了解，相关部分是：*登录失败：帐户当前已禁用。*

尽管我的用户/密码/域都很好，而且我正在做的正是 VFS 文档页面中定义的事情，但这仍然是事实。

我错过了什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2015-01-05T13:46:40.077

我想我知道你的问题是什么，沙盒提供程序没有在 2.0 中自动注册。而且您还需要在解析调用中实际使用配置的身份验证属性（请参阅下面的修改源）。

我通常不使用默认文件系统管理器，而是动态注册我的提供程序，但如果您想使用自动检测，则需要将 vfs-providers.xml 添加到沙箱 JAR。

这是您如何使用 2.0 构建完整的工作 JAR：

```
> git clone https://github.com/apache/commons-vfs.git -b commons-vfs2-project-2.0 vfs2.0
> cd vfs2.0
> notepad sandbox\pom.xml
> notepad sandbox\src\test\java\org\apache\commons\vfs2\provider\smb\test\StandaloneMain.java
> mvn -Pinclude-sandbox -DskipTests=true clean package dependency:tree 
```

当您编辑 sandbox/pom.xml 时，您需要确保从 <version> 和 <parent><version> 标记中删除 -SANDBOX。然后你需要添加：

```
 <resource>
    <directory>src/main/resources</directory>
  </resource> 
```

到已经存在的 <resources> 标记（在第一个 LICENSE+NOTICE 之后包括第 88 行）

这是使用的测试代码：

```
package org.apache.commons.vfs2.provider.smb.test;

import org.apache.commons.vfs2.FileObject;
import org.apache.commons.vfs2.FileSystemException;
import org.apache.commons.vfs2.FileSystemManager;
import org.apache.commons.vfs2.FileSystemOptions;
import org.apache.commons.vfs2.VFS;
import org.apache.commons.vfs2.auth.StaticUserAuthenticator;
import org.apache.commons.vfs2.impl.DefaultFileSystemConfigBuilder;

public class StandaloneMain
{
    public static void main(String[] args) throws FileSystemException {
        //jcifs.Config.registerSmbURLHandler();
        StaticUserAuthenticator auth = 
              new StaticUserAuthenticator("DOMAIN", "user", "SECRET");
        FileSystemOptions opts = new FileSystemOptions();
        DefaultFileSystemConfigBuilder.getInstance().setUserAuthenticator(opts, auth);
        FileSystemManager fs = VFS.getManager();
        if (!fs.hasProvider("smb")) throw new RuntimeException("Provider missing");
        System.out.println("Connecting " + args[0] + " with " + opts);
        FileObject smbFile = fs.resolveFile(args[0], opts); // added opts!
        System.out.println(smbFile.exists() + " " + smbFile.getContent().getLastModifiedTime());
    }
} 
```

这是执行：

```
> set REP=C:\Users\USERNAME\.m2\repository
> java -cp sandbox\target\commons-vfs2-sandbox-2.0.jar;^
           core\target\commons-vfs2-2.0.jar;^
           %REP%\commons-logging\commons-logging\1.1.1\commons-logging-1.1.1.jar;^
           %REP%\jcifs\jcifs\0.8.3\jcifs-0.8.3.jar;^
           sandbox\target\test-classes
       org.apache.commons.vfs2.provider.smb.test.StandaloneMain smb://HOST/Users
Jan 05, 2015 2:40:19 PM org.apache.commons.vfs2.VfsLog info
INFORMATION: Using "C:\Users\USERNAME\AppData\Local\Temp\vfs_cache" as temporary files store.
Connecting smb://eckenfels02/Users with org.apache.commons.vfs2.FileSystemOptions@27dd2ec5
true 0 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-02-26T06:51:50.243

我使用不同的身份验证方法并且它有效，您可以试一试。

```
String url = "smb://10.0.2.2/TimeOut/";   
NtlmPasswordAuthentication authen = new NtlmPasswordAuthentication(<domain>,<username>,<password>); 
SmbFile smbFile = new SmbFile(url,authen); 
```

# c - 如何更改应用程序的 GUI？

> ID：11612696
> 
> 赞同：3
> 
> 时间：2012-07-23T12:37:24.750
> 
> 标签：c, winapi, user-interface

> **可能的重复：**
> [如何为 Win32 应用程序蒙皮](https://stackoverflow.com/questions/9216917/how-to-skin-an-win32-application)

我正在尝试学习设计应用程序，但我被卡住了。

例如，我将如何在 C/Win32API 中编码/获取这种 GUI（背景图像、导航、左上角的工程图标、样式化的最小化和退出图标...等），如该图片所示？

![BF3 C# 图形用户界面](../Images/14e64ab391fb00ab7d8290f750480ea1.png) 谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-23T12:43:50.130

这被称为“剥皮”。

例如，请参阅这篇文章：[（Flipcode）](http://www.flipcode.com/archives/Win32_Window_Skinning.shtml)

您所要做的就是创建`HBITMAP`对象（从资源或文件加载它）并使用`SelectObject`选择它作为背景。

# git - 将 git 跟踪移动到子目录而不跟踪兄弟姐妹

> ID：11612701
> 
> 赞同：0
> 
> 时间：2012-07-23T12:37:40.203
> 
> 标签：git

谁能指导我如何将 git 目录移动到子目录中？

当前目录结构如下：

```
/bigproject
  --.git
  --partA/
  --partB/ 
```

我想让它像：

```
/bigproject
  --partA/
    --.git
  --partB/ 
```

我不关心partB的历史，我会在里面新建一个git目录。我确实希望在将 partA 移动到 partA 目录时保留它的历史记录。

我将如何做到这一点？本指南试图完成类似但不同的事情：[分离（移动）子目录到单独的 Git 存储库](https://stackoverflow.com/questions/359424/detach-subdirectory-into-separate-git-repository)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-23T12:40:59.740

```
git rm -r partB
git mv partA/* .
git commit 
```

...你就完成了。

这会保留您*以前*的所有历史记录（如果您愿意，您可以重写它`git filter-branch`以摆脱`partB`'s 的历史记录和`partA`大重命名），但会使当前`partA`目录成为存储库的新顶部。

# .htaccess - htaccess + 根据浏览器语言重定向用户

> ID：11612707
> 
> 赞同：1
> 
> 时间：2012-07-23T12:38:14.153
> 
> 标签：.htaccess

我正在阅读与该主题相关的所有问题，但找不到任何东西。

首先，我有这个域：www.example.com

我的目的是根据浏览器的语言重定向用户：

例如：www.example.com => www.example.com/es www.example.com => www.example.com/en

我遵循了这条规则，但这里不是源网址：

```
<IfModule mod_rewrite.c>
RewriteEngine on
RewriteCond %{HTTP:Accept-Language} ^es [NC]
RewriteCond %{HTTP_REFERER} !^*\.domain\.com.ar/ [NC] 
RewriteRule ^$ http://www.example.com/es / [L,R] 
RewriteCond %{HTTP:Accept-Language} ^en [NC]
RewriteCond %{HTTP_REFERER} !^*\.domain\.be/ [NC] 
RewriteRule ^$ http://www.example.com/en / [L,R]
</IfModule> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-23T20:03:32.990

> 在这段代码中，在哪里建立目标网站？

这里：

```
RewriteRule ^$ http://www.example.com/es / [L,R] 
```

和这里：

```
RewriteRule ^$ http://www.example.com/en / [L,R] 
```

不知道这是一个错字还是这是您的 htaccess 文件中的内容，但这会产生 500 个内部服务器错误，因为您提供了`RewriteRule`4 个参数，而它只需要 2 个或 3 个参数。

另一个问题是您的`%{HTTP_REFERER}`正则表达式。Apache 可能会在这里呕吐: `^*\.domain\.com.ar/`，您可能的意思是:`^[^/]*\.domain\.com.ar/`或其他什么。因此，您可能希望您的规则如下所示：

```
<IfModule mod_rewrite.c>
RewriteEngine on
RewriteCond %{HTTP:Accept-Language} ^es [NC]
RewriteCond %{HTTP_REFERER} !^[^/]*\.domain\.com.ar/ [NC] 
RewriteRule ^$ http://www.example.com/es/ [L,R] 
RewriteCond %{HTTP:Accept-Language} ^en [NC]
RewriteCond %{HTTP_REFERER} !^[^/]*\.domain\.be/ [NC] 
RewriteRule ^$ http://www.example.com/en/ [L,R]
</IfModule> 
```

当然，您将用正确的主机名替换`domain.com.ar`and`domain.be`的实例。`www.example.com`

另请注意：`Accept-Language`标头是一个复杂的限定符字符串。它不像`en`or那样简单`es`。西班牙网页浏览器可以同时包含 an`en`和 ， `es`因为两者都是受支持的语言。根据此标头确定要重定向到的确切语言实际上不在 mod_rewrite 和 htaccess 的范围内。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-05-30T09:13:59.580

如果您想检查域和浏览器语言，您可以这样做：

```
# Check domain (1), browser language (2) and redirect to subdirectory (3)
RewriteCond %{HTTP_HOST} .*example.com [NC]
RewriteCond %{HTTP:Accept-Language} ^en [NC]
RewriteRule ^$ http://%{HTTP_HOST}/en/ [L,R=301]

# ... copy block above for other languages ...

# Fallback for any other language to spanish
RewriteCond %{HTTP_HOST} .*example.com [NC]
RewriteRule ^$ http://%{HTTP_HOST}/es/ [L,R=301] 
```

# java - Sigar UnsatisfiedLinkError

> ID：11612711
> 
> 赞同：7
> 
> 时间：2012-07-23T12:38:54.560
> 
> 标签：java, debugging, sigar

我是 Sigar 的新手。我想运行一个简单的测试来了解如何监控我的系统。

我添加了`sigar-1.6.4`和`log4j`作为外部库，但是当我去运行它时，我遇到了这个错误：

`Exception in thread "main" java.lang.UnsatisfiedLinkError: org.hyperic.sigar.Sigar.getCpuInfoList()[Lorg/hyperic/sigar/CpuInfo; at org.hyperic.sigar.Sigar.getCpuInfoList(Native Method)`

这是我的代码：

```
import java.util.Map;
import org.hyperic.sigar.CpuInfo;
import org.hyperic.sigar.FileSystem;
import org.hyperic.sigar.Sigar;
import org.hyperic.sigar.SigarException;

public class Test {

    /**
     * @param args
     */
    public static void main(String[] args) {
        Sigar sigar = new Sigar();
        CpuInfo[] cpuinfo = null;
        try {
        cpuinfo = sigar.getCpuInfoList();
        } catch (SigarException se) {
        se.printStackTrace();
        }

        System.out.println("---------------------");
        System.out.println("Sigar found " + cpuinfo.length + " CPU(s)!");
        System.out.println("---------------------");
    }

} 
```

任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-07-24T06:20:36.430

我明白了这个问题！
我必须使用以下 JVM 参数：

```
-Djava.library.path="./lib" 
```

在运行配置，参数选项卡，eclipse中的VM参数中，而sigar-bin/lib的contnet在lib文件夹中。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-07-23T23:09:11.860

Sigar 通过 JNI 工作。因此，适当的 .so 或 .dll 文件需要位于 java.library.path 属性指定的路径中。

检查您的 sigar 发行版 - 我的意思是 zip 文件。解压缩并将 sigar-bin\lib 的内容复制到您的 Path、PATH 和 LD_LIBRARY_PATH 环境变量可以访问的位置。通常，每个平台只需要访问一个文件。

这应该可以解决问题，如果没有，请告诉我，我会看看我能做什么。

# php - 使用 PHP DOM 方法读取 iTunes XML 文件

> ID：11612712
> 
> 赞同：1
> 
> 时间：2012-07-23T12:38:55.553
> 
> 标签：php, xml, parsing, xml-parsing, itunes

我在从我的 iTunes XML 提要中获取信息时遇到了一些麻烦，您可以在此处查看：[http ://c3carlingford.org.au/podcast/C3CiTunesFeed.xml](http://c3carlingford.org.au/podcast/C3CiTunesFeed.xml)

我需要从每个内部`<item>`标签中获取信息。其中之一的示例如下：

```
<item>
    <title>What to do when a viper bites you</title>
    <itunes:subtitle/>
    <itunes:summary/>
    <!-- 4000 Characters Max ******** -->
    <itunes:author>Ps. Phil Buechler</itunes:author>
    <itunes:image href="http://www.c3carlingford.org.au/podcast/itunes_cover_art.jpg"/>
    <enclosure url="http://www.ccccarlingford.org.au/podcast/C3C-20120722PM.mp3" length="14158931" type="audio/mpeg"/>
    <guid isPermaLink="false">61bc701c-b374-40ea-bc36-6c1cdaae8042</guid>
    <pubDate>Sun, 22 Jul 2012 19:30:00 +1100</pubDate>
    <itunes:duration>40:01</itunes:duration>
    <itunes:keywords>
        Worship, Reach, Build, Holy Spirit, Worship, C3 Carlingford
    </itunes:keywords>
</item> 
```

* * *

**现在我已经取得了一些成功！** 我已经能够从中得到标题：

```
<?php 
    $dom = new DOMDocument();
    $dom->preserveWhiteSpace = false;
    $dom->load('http://c3carlingford.org.au/podcast/C3CiTunesFeed.xml');
    $items = $dom->getElementsByTagName('item');

    foreach($items as $item){                       
        $title = $item->getElementsByTagName('title')->item(0)->nodeValue;
            echo $title . '<br />';
    };

?> 
```

但我似乎无法得到其他任何东西......我对这一切都是新手！

* * *

所以我需要出去的包括：

1.  `<itunes:author>`价值。
2.  `<enclosure>`来自标签的 url 属性值

* * *

有人可以帮我找出这两个值吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-23T12:53:45.387

您可以使用它[`DOMXPath`](http://php.net/domxpath)来使您的生活更轻松：

```
$doc = new DOMDocument();
$doc->preserveWhiteSpace = false;
$doc->loadXML( $xml); // $xml = file_get_contents( "http://www.c3carlingford.org.au/podcast/C3CiTunesFeed.xml")

// Initialize XPath    
$xpath = new DOMXpath( $doc);
// Register the itunes namespace
$xpath->registerNamespace( 'itunes', 'http://www.itunes.com/dtds/podcast-1.0.dtd');

$items = $doc->getElementsByTagName('item');    
foreach( $items as $item) {
    $title = $xpath->query( 'title', $item)->item(0)->nodeValue;
    $author = $xpath->query( 'itunes:author', $item)->item(0)->nodeValue;
    $enclosure = $xpath->query( 'enclosure', $item)->item(0);
    $url = $enclosure->attributes->getNamedItem('url')->value;

    echo "$title - $author - $url\n";
} 
```

您可以从[演示](http://viper-7.com/KssKSB)中看到这将输出：

```
What to do when a viper bites you - Ps. Phil Buechler - http://www.ccccarlingford.org.au/podcast/C3C-20120722PM.mp3 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-23T14:00:30.607

是的，您可以使用 simplexml 来完成。

这是示例代码：

```
<?php

 $x = simplexml_load_file("http://c3carlingford.org.au/podcast/C3CiTunesFeed.xml");

  foreach ($x->channel->item as $item) { 
    $otherNode = $item->children('http://www.itunes.com/dtds/podcast-1.0.dtd');  
    echo $item->title .'---'.$otherNode->author;  
    echo "\n";
 } 
?> 
```

**输出：**

当毒蛇咬你时该怎么办---Ps。菲尔·比克勒

活水，让河流流动！---Ps。菲尔·比克勒

上帝对彼此宽恕的呼唤上午和下午---Ps。理查德·博塔

上帝对上午和下午传福音的呼召---Rob Waugh

上帝对彼此相爱的呼唤上午和下午---Rob Waugh

希望这有帮助！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-03-14T11:04:19.550

你可以使用[simpleXML](http://php.net/manual/en/simplexmlelement.children.php)孩子

$item->children('itunes', TRUE);

所以你有一个包含所有标签的数组 itunes:duration, itunes:subtitle ....

```
<?php

 $x = simplexml_load_file("http://c3carlingford.org.au/podcast/C3CiTunesFeed.xml");

  foreach ($x->channel->item as $item) { 
    $otherNode = $item->children('itunes', TRUE); 
    echo $otherNode->duration;
    echo "\n";
    echo $otherNode->author; 
    echo "\n";
    echo $otherNode->subtitle; 
    echo "\n";
  } 
?> 
```

# database - 在 Perl 脚本中运行 PL/SQL 过程

> ID：11612713
> 
> 赞同：2
> 
> 时间：2012-07-23T12:38:57.493
> 
> 标签：database, perl, plsql, plsqldeveloper

我有一个 Perl 脚本，它接受一个文件作为输入，并在其中包含 PL/SQL（用于语句和`DBMS_OUTPUT.PUT_LINE`）。我需要运行建立一个数据库连接并在 Perl 脚本中运行该文件。pl/sql 有 Begin declare end 部分，上面有 for 语句，它正在写入使用逗号分隔的 3 列的数据（DBMS_OUTPUT.PUT_LINE）我已经展示了什么我在下面尝试过。这是对的吗？

```
my $dbh = DBI->connect( "dbi:Oracle:$db", $username, $passwd ) ||
        die( $DBI::errstr . "\n" );
$dbh->{AutoCommit} = 0;
$dbh->{PrintError} = 1;

open FILE, $sql_file or die "Could not open file";

$query = '';
while($line = <FILE>) {
    chomp($line);
    $query .= $line;
}

my $sth = $dbh->prepare($query);

$sth->execute();

while ( my @row = $sth->fetchrow_array() ) {
    foreach (@row) {
        print "$_";
    }
    print "\n";
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-23T16:02:44.977

`$sth->fetch()`, `$sth->fetchrow_*()`, 和朋友都从结果集中获取记录。在 Oracle PL/SQL 中，块通常不返回结果集。因此，在运行 PL/SQL 块后调用`$sth->fetchrow_array()`不会返回任何结果。

如果您使用`DBMS_OUTPUT.PUT_LINE`输出结果，您将需要使用[`dbms_output_*`DBD::Oracle 提供的函数](http://p3rl.org/DBD%3a%3aOracle#dbms_output_enable-dbms_output_put-dbms_output_get)。

```
my $dbms_output_byte_limit = 1000000;
$dbh->func( $dbms_output_byte_limit, 'dbms_output_enable' );

my $sth = $dbh->prepare($query);
$sth->execute();

my @text = $dbh->func( 'dbms_output_get' ); 
```

# html - 两个在同一级别上有阴影的 div

> ID：11612714
> 
> 赞同：7
> 
> 时间：2012-07-23T12:39:02.163
> 
> 标签：html, css

我有两个 div 有阴影并且在同一个 z-index 上。

他们目前都在互相投下阴影。

我希望他们都在背景上投射阴影，但不要在彼此身上投射阴影。我该怎么做呢？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-07-23T13:01:24.757

您不能有两个具有相同堆叠级别的不同元素。元素总是有不同的堆叠级别。这就是为什么您的第二个元素会影响第一个元素的原因。（如果没有 z-index，DOM 中的外观决定了堆叠级别）

Z-index 仅适用于非静态定位元素（相对，绝对），因此也无济于事。

IMO，如果没有一些小的 css-hacking，您将无法达到您想要的效果（在元素上声明一个非静态位置并结合额外的包装器元素 - 不要在父级上声明 z-index，而仅在子级上声明 -元素）。

[例子](http://jsfiddle.net/poikl/5WQc8/3/)

但是，如果我错了，请随时纠正我。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2014-08-19T09:37:46.707

使用这个简单的 CSS 技巧，只需创建 pseudoelement `:after`，将其 z-index 设置为低于 div 并为其添加阴影。以下代码将在每个`div`. [http://jsfiddle.net/on38a8pz/1/](http://jsfiddle.net/on38a8pz/1/)上的工作示例。

```
div {
    position: relative;
}

div:after {
    content: '';
    position: absolute;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    box-shadow: 0 0 30px black;
    z-index: -1;
} 
```

# android - java.lang.RuntimeException：无法实例化活动

> ID：11612715
> 
> 赞同：0
> 
> 时间：2012-07-23T12:39:04.420
> 
> 标签：android, shapefile

我正在开发一个应用程序来显示 android 中形状文件的记录数。但是由于以下错误，它给出了空指针异常

```
07-23 15:16:32.598: W/dalvikvm(2844): threadid=1: thread exiting with uncaught exception (group=0x4001d800)

07-23 15:16:32.677: E/AndroidRuntime(2844): FATAL EXCEPTION: main

07-23 15:16:32.677: E/AndroidRuntime(2844): java.lang.RuntimeException: Unable to instantiate activity ComponentInfo{com.example.android.skeletonapp/com.example.android.skeletonapp.SkeletonActivity}: java.lang.InstantiationException: com.example.android.skeletonapp.SkeletonActivity

07-23 15:16:32.677: E/AndroidRuntime(2844):     at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2585)

07-23 15:16:32.677: E/AndroidRuntime(2844):     at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2679)

07-23 15:16:32.677: E/AndroidRuntime(2844):     at android.app.ActivityThread.access$2300(ActivityThread.java:125)

07-23 15:16:32.677: E/AndroidRuntime(2844):     at android.app.ActivityThread$H.handleMessage(ActivityThread.java:2033)

07-23 15:16:32.677: E/AndroidRuntime(2844):     at android.os.Handler.dispatchMessage(Handler.java:99)

07-23 15:16:32.677: E/AndroidRuntime(2844):     at android.os.Looper.loop(Looper.java:123)

07-23 15:16:32.677: E/AndroidRuntime(2844):     at android.app.ActivityThread.main(ActivityThread.java:4627)

07-23 15:16:32.677: E/AndroidRuntime(2844):     at java.lang.reflect.Method.invokeNative(Native Method)

07-23 15:16:32.677: E/AndroidRuntime(2844):     at java.lang.reflect.Method.invoke(Method.java:521)

07-23 15:16:32.677: E/AndroidRuntime(2844):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:868)

07-23 15:16:32.677: E/AndroidRuntime(2844):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:626)
07-23 15:16:32.677: E/AndroidRuntime(2844):     at dalvik.system.NativeStart.main(Native Method)

07-23 15:16:32.677: E/AndroidRuntime(2844): Caused by: java.lang.InstantiationException: com.example.android.skeletonapp.SkeletonActivity

07-23 15:16:32.677: E/AndroidRuntime(2844):     at java.lang.Class.newInstanceImpl(Native Method)

07-23 15:16:32.677: E/AndroidRuntime(2844):     at java.lang.Class.newInstance(Class.java:1429)

07-23 15:16:32.677: E/AndroidRuntime(2844):     at android.app.Instrumentation.newActivity(Instrumentation.java:1021)

07-23 15:16:32.677: E/AndroidRuntime(2844):     at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2577)

07-23 15:16:32.677: E/AndroidRuntime(2844):     ... 11 more 
```

SkeletonActivity.java 是

```
public class SkeletonActivity extends Activity {

    static final private int BACK_ID = Menu.FIRST;

    static final private int CLEAR_ID = Menu.FIRST + 1;

     private static String SHP_PATH =  Environment.getDataDirectory().getAbsolutePath() + "/data/com.shapes/places";

     private static String SHP_NAME = "popplaces.shp";

    private EditText mEditor;

   private final Context myContext;

    public SkeletonActivity(Context context) {
        this.myContext=context;
    }

    /** Called with the activity is first created. */
    @Override
    public void onCreate(Bundle savedInstanceState) {

        super.onCreate(savedInstanceState);

        int recordCount = 0;

        // Inflate our UI from its XML layout description.

        setContentView(R.layout.skeleton_activity);

        // Find the text editor view inside the layout, because we

        // want to do various programmatic things with it.

        mEditor = (EditText) findViewById(R.id.editor);

        // Hook up button presses to the appropriate event handler.

        ((Button) findViewById(R.id.back)).setOnClickListener(mBackListener);

        ((Button) findViewById(R.id.clear)).setOnClickListener(mClearListener);

        mEditor.setText(getText(R.string.main_label));
        try {
            //File path = Environment.getExternalStoragePublicDirectory(
               //     Environment.DIRECTORY_PICTURES);
             //path = Environment.getDataDirectory().getAbsolutePath();
            //path.mkdirs();
            //shpFile = path.getPath().toString();
            copyFromZipFile();
             String shpFile = Environment.getDataDirectory().getAbsolutePath()+"/data/com.shapes/places/popplaces.shp";
            ShapeReader shR = new ShapeReader(shpFile, true);
                recordCount = shR.getCount(0);

        } catch (IOException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        }catch (Exception e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        }
        mEditor.setText("Record Count == " + recordCount);
    }

    /**
     * Called when the activity is about to start interacting with the user.
     */
    @Override
    protected void onResume() {
        super.onResume();
    }

    /**
     * Called when your activity's options menu needs to be created.
     */
    @Override
    public boolean onCreateOptionsMenu(Menu menu) {
        super.onCreateOptionsMenu(menu);

        // We are going to create two menus. Note that we assign them
        // unique integer IDs, labels from our string resources, and
        // given them shortcuts.
        menu.add(0, BACK_ID, 0, R.string.back).setShortcut('0', 'b');
        menu.add(0, CLEAR_ID, 0, R.string.clear).setShortcut('1', 'c');

        return true;
    }

    /**
     * Called right before your activity's option menu is displayed.
     */
    @Override
    public boolean onPrepareOptionsMenu(Menu menu) {
        super.onPrepareOptionsMenu(menu);

        // Before showing the menu, we need to decide whether the clear
        // item is enabled depending on whether there is text to clear.
        menu.findItem(CLEAR_ID).setVisible(mEditor.getText().length() > 0);

        return true;
    }

    /**
     * Called when a menu item is selected.
     */
    @Override
    public boolean onOptionsItemSelected(MenuItem item) {
        switch (item.getItemId()) {
        case BACK_ID:
            finish();
            return true;
        case CLEAR_ID:
            mEditor.setText("");
            return true;
        }

        return super.onOptionsItemSelected(item);
    }

    /**
     * A call-back for when the user presses the back button.
     */
    OnClickListener mBackListener = new OnClickListener() {
        public void onClick(View v) {
            finish();
        }
    };

    /**
     * A call-back for when the user presses the clear button.
     */
    OnClickListener mClearListener = new OnClickListener() {
        public void onClick(View v) {
            mEditor.setText("");
        }
    };

   public void copyFromZipFile() throws IOException{ 

         InputStream is = myContext.getResources().openRawResource(R.raw.shape);

             // Path to the just created empty db 

             File outFile = new File(SHP_PATH ,SHP_NAME); 

              //Open the empty db as the output stream 

             OutputStream myOutput = new FileOutputStream(outFile.getAbsolutePath()); 

             ZipInputStream zis = new ZipInputStream(new BufferedInputStream(is)); 

              try { 

                  ZipEntry ze =  null; 

                  while ((ze = zis.getNextEntry()) != null) { 

                      ByteArrayOutputStream baos = new ByteArrayOutputStream(); 

                      byte[] buffer = new byte[24 * 1024]; 

                      int count; 

                      while ((count = zis.read(buffer)) != -1) { 

                          baos.write(buffer, 0, count); 

                          //Log.d("", buffer.toString()); 

                          baos.writeTo(myOutput); 

                          baos.reset();

                      } 
                      baos.writeTo(myOutput); 

                  } 
              } 
              catch (IOException e) {}

                  zis.close(); 

                  myOutput.flush(); 

                  myOutput.close(); 

                  is.close(); 

            }
} 
```

Manifest.xml 是

```
<?xml version="1.0" encoding="utf-8"?>

<manifest xmlns:android="http://schemas.android.com/apk/res/android"
    package="com.example.android.skeletonapp">

    <application android:label="@string/skeleton_app">

        <activity android:name="SkeletonActivity">

            <intent-filter>

                <action android:name="android.intent.action.MAIN" />

                <category android:name="android.intent.category.LAUNCHER" />
            </intent-filter>

        </activity>

    </application>

</manifest> 
```

请帮我解决这个问题。谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-23T12:54:08.157

你的清单文件应该是

```
<?xml version="1.0" encoding="utf-8"?> 
```

```
<application android:label="@string/skeleton_app">

    <activity android:name="SkeletonActivity">

        <!-- An IntentFilter tells the system when it should use your  -->

        <intent-filter>

            <action android:name="android.intent.action.MAIN" />

            <category android:name="android.intent.category.LAUNCHER" />
        </intent-filter>

    </activity>

</application> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-23T12:56:22.257

问题是您的主要意图（SkeletonActivity）只有 1 个构造函数，android 不知道要做什么。通过另一个启动此活动或删除构造函数 SkeletonActivity(Context context)

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-07-23T12:52:30.123

请检查您的 Android 清单文件。这似乎是不正确的。尝试从清单文件中删除注释，然后尝试。

# entity-framework - DbContext.Set 返回派生类类型

> ID：11612719
> 
> 赞同：2
> 
> 时间：2012-07-23T12:39:08.170
> 
> 标签：entity-framework, generics, dbcontext

我首先使用实体​​框架代码，我有 2 个这样声明的实体：

```
[Table("BaseTable")]    
public class BaseEntity
{
    public string SomeProperty{get; set;}
}

[Table("DerivedTable")]
public class DerivedEntity
 : BaseEntity
{
     public string SomeOtherProperty {get; set;}
} 
```

问题是当我在 dbcontext 上调用通用 set 方法时，它总是将实体作为`DerivedEntity`类型返回。（EF 正在数据库中设置正确的表映射，只是没有从`set()`方法中返回预期的实体类型）

```
DbContext.Set<BaseEntity>(); 
```

如何强制`Set<BaseEntity>();`将实体作为类型返回，`BaseEntity`以便我只能更新该表？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-23T13:28:58.443

你不能。EF 适用于实体级别而不是表级别。因此，如果您的实体是类型`DerivedEntity`，它将永远不会被加载`BaseEntity`。当您修改附加实体时，EF 将仅为修改后的列构建更新命令，因此如果您仅更改表中的属性，它不应修改您的第二个`BaseEntity`表。

# iphone - 如何在iphone中将int存储在char *中

> ID：11612725
> 
> 赞同：-1
> 
> 时间：2012-07-23T12:39:26.260
> 
> 标签：iphone, objective-c, pointers, char, memcpy

任何人都可以帮助将 Int 转换为 char 数组，因为我有缓冲区

```
char *buffer = NULL;  
int lengthOfComponent = -1;   
char *obj;
buffer[index]= (char *)&lengthOfComponent; 
```

如果我这样做，它会在执行后引发 EXCESS BAD ACCESS**如何使用 memcpy 将 obj 的值存储到缓冲区**

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-23T12:54:51.410

当然你不能写入缓冲区[索引]，它没有被分配！

```
buffer = malloc(sizeof(char) * lengthOfBuffer); 
```

应该这样做。之后，您可以使用 memcpy 或分配来写入缓冲区，就像您正在做的那样。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-23T12:43:45.183

```
buffer[index] = (char *)&lengthOfComponent; 
```

`buffer[index]`就像取消引用指针一样。但是`buffer`没有指向任何有效的位置。因此运行时错误。

C 解决方案正在使用 snprintf。尝试 -

```
int i = 11;
char buffer[10];

snprintf(buffer, sizeof(buffer), "%d", i); 
```

# php - PHP：如何在类的设置器中使用动态变量名

> ID：11612728
> 
> 赞同：6
> 
> 时间：2012-07-23T12:39:38.823
> 
> 标签：php, dynamic-variables

我有一个带有私有成员“描述”的类，但它提出了一个 setter：

```
class Foo {
  private $description;

  public function setDescription($description) { 
    $this->description = $description; 
  }
} 
```

我在变量中有成员的名称。我想动态访问该字段。如果该领域只是公开的，我可以这样做：

```
$bar = "description";
$f = new Foo();
$f->$bar = "asdf"; 
```

但如果我只有一个二传手，我不知道该怎么做。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-07-23T12:42:15.167

```
<?php
$bar = "description";
$f = new Foo();
$func="set"+ucwords($bar);
$f->$func("asdf");
?> 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-07-23T12:44:11.717

试试这个：

```
$bar = 'description';
$f = new Foo();
$f->{'set'.ucwords($bar)}('test'); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-23T12:43:20.447

使用魔法二传手

```
class Foo {
  private $description;

  function __set($name,$value)
  {
    $this->$name = $value;
  }  
/*public function setDescription($description) { 
    $this->description = $description; 
  }*/
} 
```

但是通过这种方式，如果您希望它仅用于描述，您的所有私有属性都将充当公共属性，请使用此

```
class Foo {
      private $description;

      function __set($name,$value)
      {
        if($name == 'description')
        { $this->$name = $value;
          return true;
         }
         else 
        return false
      }  
    /*public function setDescription($description) { 
        $this->description = $description; 
      }*/
    } 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2018-11-06T03:08:14.047

这个功能来做这项工作：

```
 private function bindEntityValues(Product $entity, array $data) {
      foreach ($data as $key => $value){
        $funcName = 'set'+ucwords($key);
        if(method_exists($entity, $funcName)) $entity->$funcName($value);
      }
    } 
```

# ios - iPhone P2P - GKSession 是否不可靠超过 4 个同行？

> ID：11612732
> 
> 赞同：1
> 
> 时间：2012-07-23T12:39:45.503
> 
> 标签：ios, networking, p2p

**原始问题：** iOS 开发人员库在 Game Kit Programming Guide 中[提到](https://developer.apple.com/library/ios/#documentation/NetworkingInternet/Conceptual/GameKit_Guide/GameKitConcepts/GameKitConcepts.html)

> 客户端-服务器游戏的最大规模为 16 名玩家。

此限制是否也适用于 P2P GKsessions？

这已经[在这里](https://stackoverflow.com/questions/1084066/iphone-p2p-is-there-a-way-to-connect-to-more-than-1-devices)问过了（但从不同的角度）。

**更新的问题：**当连接超过 4 个对等点时，GKSession 是否可靠？

*注意：*问题已根据下面[saulobrito的](https://stackoverflow.com/users/715451/saulobrito)[回复](https://stackoverflow.com/a/13014131/766570)进行了更新。

**参考：**使用大量连接的对等点的应用程序的一个示例是[Seedio](http://seedio-app.com/)。您会注意到他们*没有*使用 GKSession，因为蓝牙不是连接选项（使用 GKSession，您甚至无法选择蓝牙或 wi-fi .. GKSession 会为您做到这一点。）查看他们的[常见问题解答](http://seedio-app.com/support.htm)以获取一些有趣的信息为什么他们选择 Wi-fi 而不是蓝牙。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-22T14:59:05.267

我可以向你保证的是 GKSession 非常不稳定，你不应该相信这些文档。事实上，Apple 最近决定完全删除文档。

我做了很多测试，我建议实际限制是 4 个连接的设备（一个充当服务器和 3 个客户端）。当然，最好是自己做测试场景。

我也找不到任何允许超过 4 名玩家的游戏。我唯一知道的是苹果自己的德州扑克——它允许 8 名玩家，但他们决定删除它。

最后但并非最不重要的一点是，Game Center对P2P游戏[施加了 4 名玩家限制。](http://developer.apple.com/library/ios/#documentation/NetworkingInternet/Conceptual/GameKit_Guide/MatchmakingwithGameCenter/MatchmakingwithGameCenter.html#//apple_ref/doc/uid/TP40008304-CH12-SW2)

是的，我正在开发一款应支持 10 名玩家的游戏，但在我们的测试中，当设备超过 4 台时，它变得不稳定/无法使用。我所说的不稳定是指：有时您找不到对等点，并且连接会在不到一分钟的时间内断开。更糟糕的是，更新到 iOS 6 带来了一些奇怪的行为，例如在尝试发送消息时冻结（没有错误、没有堆栈跟踪、没有任何内容）。其他奇怪的事情：当一个玩家失去连接时，所有其他玩家都会断开连接。

**编辑：**自该响应以来进行了大量测试，并有更多信息可以分享：

**使用 iOS 6，我可以在 9 台设备上使用 wi-fi 或 bluetooth 可靠地播放**。但是仍然存在一个大问题：您无法将使用 iOS 6 的设备与使用 iOS 5 的设备连接起来，因为如果任何设备启用了 Wi-Fi，您将不时面临无法解释的冻结和无堆栈跟踪. 您可以将 iOS 6 设置为应用程序的最低支持版本，或者您将不得不要求用户禁用他们的 wi-fi 并使用蓝牙。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-14T22:32:53.103

在 iOS 6.0 上，我可以确认 GKSession 至少允许 6 个玩家。我发现您必须确保在状态更改为已连接之前不要向对等方发送消息。

总的来说，我认为 GKSession 是一个美妙而简单的 API。它将使用蓝牙或 WiFi，这意味着您甚至不必考虑手机是否连接到 WiFi 网络。延迟很好而且很低（我测量它在 4ms 是不可靠的，在 10ms 左右是可靠的网络）。

我的主要警告是：

1.  如果可以，请使用不可靠的消息传递。
2.  确保在应用程序退出时将 .available 设置为 NO（如果您在广告期间被终止，您可能会打开虚拟会话）。
3.  在相关对等方更改为已连接状态之前，请勿尝试向对等方发送消息。
4.  断开连接后，请勿尝试重新使用 gksession。
5.  您可能需要重试连接尝试（如果连接尝试失败，我会自动重试 3 次）。我的超时时间是 10 秒。
6.  限制您的可靠消息传递。我还没有完全弄清楚限制是什么，但最终看起来你会破坏一个传输缓冲区，然后你的延迟就会膨胀。同样，当您使用不可靠的消息传递时，这不是问题。

# delphi - VCLZip：询问是否应覆盖只读文件

> ID：11612733
> 
> 赞同：0
> 
> 时间：2012-07-23T12:39:50.533
> 
> 标签：delphi, zip, delphi-2007, unzip, vclzip

我正在使用 VCLZip 2.21 解压缩 zip 文件。我可以通过将 ReplaceReadOnly 设置为 True 来使 TVCLUnzip 覆盖只读文件。但是如何实现用户的确认呢？我已经添加了一个 OnSkippingFile 处理程序将 Retry 设置为 True 但这不会导致额外的尝试。（AFAICT 永远不会读取 Retry 变量。）您有什么建议吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-23T13:03:45.750

在我看来，你不应该改变`ReplaceReadOnly`。相反，设置[`OverwriteMode`](http://vclzip.bizland.com/help/hs2545.htm)为`Prompt`，然后处理该[`OnPromptForOverwrite`](http://vclzip.bizland.com/help/hs2515.htm)事件。在这种情况下，检查文件是否是只读的，如果是则只提示。

否则，您可以在设置之前*尝试*`OnSkippingFile`在事件处理程序中更改文件的只读标志`Retry`，但[文档](http://vclzip.bizland.com/help/hs2520.htm)没有说明`Retry`在这种情况下使用该参数。它只讨论在无法打开要压缩文件的*压缩操作期间重试，而不是在**解压缩*操作期间重试。

# c# - 使用谓词列表时出现 DataContract SerializationException

> ID：11612737
> 
> 赞同：2
> 
> 时间：2012-07-23T12:40:08.727
> 
> 标签：c#, serialization, datacontractserializer

我正在编写一个通用过滤器类，主要用于从人群中过滤人。我正在尝试序列化过滤器类，但在运行时我得到一个 SerializationException：

```
System.Runtime.Serialization.SerializationException : Type 'System.DelegateSerializationHolder+DelegateEntry' with data contract name 'DelegateSerializationHolder.DelegateEntry:http://schemas.datacontract.org/2004/07/System' is not expected. Consider using a DataContractResolver or add any types not known statically to the list of known types - for example, by using the KnownTypeAttribute attribute or by adding them to the list of known types passed to DataContractSerializer. 
```

我的过滤器类如下所示：

```
[DataContract(Name = "Filter", Namespace = "")]
    public class Filter<T>
    {

        /// <summary>
        /// Default constructor, needed by serializers.
        /// </summary>
        public Filter()
        {
            Name = "New filter";
            Predicates = new List<Predicate<T>>();
        }

        /// <summary>
        /// ctor. Takes a list of predicates for type T
        /// to filter with.  
        /// </summary>
        public Filter(string name, IEnumerable<Predicate<T>> predicates)
        {
            Name = name;
            Predicates = predicates.ToList();
        }

        /// <summary>
        /// Name of the filter. 
        /// </summary>
        [DataMember(Order = 0)]
        public string Name
        {
            get;
            set;
        }

        [DataMember(Order = 1)]
        public List<Predicate<T>> Predicates
        {
            get;
            set;
        }

        /// <summary>
        /// Filters sequence of type T. 
        /// </summary>
        public IEnumerable<T> ApplyFilter(IEnumerable<T> input)
        {
            var result = new List<T>(input);
            return Predicates.Aggregate(result, (current, predicate) => current.FindAll(predicate));
        }
    } 
```

序列化过滤器类时，出现上述异常。如果我不将谓词标记为 DataMember，那么它可以工作。但显然我也想序列化该属性。

我已经在这里待了几个小时了，我无法弄清楚。任何帮助将不胜感激！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-23T12:47:39.507

`DataContractSerializer`不用于序列化委托；多播委托是一组任意目标对象和方法；这**不是**一个定义明确的面向数据的合同。`DataContractSerializer`用于*数据*。

将某种形式的表达式序列化为*字符串*（或一些简单的树），或使用不同的序列化程序。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-06-04T20:51:52.883

不试图复活一个死帖，但我搜索（基本上）相同的错误消息，这个问题目前是#1结果，但我不想对代表做任何事情！

直到我在 MSDN 论坛上找到[这篇文章](https://qa.social.msdn.microsoft.com/Forums/en-US/bda6bee2-cb52-4cb9-b96c-f00676eca9f5/there-was-an-error-while-trying-to-serialize-parameter-httptempuriorgr?forum=wcf)之前，我无法弄清楚我做错了什么。答案是：

> 我发现当我在课堂上添加 DataContract 和 DataMember 时，一切正常。

*掌心*

我试图序列化一个自定义类，但没有用该`[DataContract]`属性标记该类，并且由于我不明白的原因，这导致 XML 序列化程序抛出有关委托的错误。

发布此答案以帮助所有未来的访问者。*从冠状病毒时代开始远离社会的高五！*

# php - PHP / HTML上传脚本无法正常工作

> ID：11612738
> 
> 赞同：0
> 
> 时间：2012-07-23T12:40:10.160
> 
> 标签：php, html, file-upload

我是 PHP 的新手（也没有太多的 HTML 经验），我有一个问题。我有一个文件上传系统，它由两个 PHP 脚本组成（见下文）。在文件上传表单中，用户选择文件，保存文件夹，然后上传。保存位置可以从由上传目录中的文件夹组成的下拉菜单中选择。但是下拉菜单中还有另一个选项。如果用户选择该选项`other`，则会出现一个新字段（由 JavaScript 完成）并且用户可以手动插入位置（例如，目录不存在并且用户想要创建一个新的）。

但这里有一个问题：如果用户选择了一个预定义的文件夹，一切正常，但如果用户将目录名称写入该字段，则只会`folder`创建名为的文件夹。例如，如果用户想要上传关于花的图片并且不`flower`存在名为的文件夹，则用户选择`other`并写入`flower`框。然后点击上传按钮，基本上 PHP 应该创建一个名为的新文件夹`flower`并在那里上传图片。但是目前，PHP 创建了一个名为的文件夹`folder`，由于某种原因，图片没有上传到那里（它没有上传到任何地方）。

我的脚本问题：

1.  不会创建新文件夹。我认为这是因为我有两个名为“文件夹”的值，但我不知道如何让它工作，如果选择了“其他”，那么 PHP 只会查看最后一个值。
2.  即使创建了文件夹，由于某种原因也不会在那里上传文件。

如果有人找到我的问题的解决方案并帮助我解决它，我将不胜感激。不要犹豫，询问额外的信息，因为我的英语不是最好的，因此有些事情无法理解。

提前致谢！

第一个文件`file-upload.php`：：

```
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1" />
<title></title>
<script language="JavaScript" type="text/javascript">
<!--

function Toggle(obj){
var val=obj.value;
if (!obj.m){ obj.m=''; }
if (!obj.m.match(val)){ obj.m+=','+val+','; }
var hide=obj.m.split(',');
for (var zxc0=0;zxc0<hide.length;zxc0++){
if (document.getElementById(hide[zxc0])){
document.getElementById(hide[zxc0]).style.display='none';
}
}
var show=val.split(',');
for (var zxc1=0;zxc1<show.length;zxc1++){
if (document.getElementById(show[zxc1])){
document.getElementById(show[zxc1]).style.display='';
}
}
}

//-->
</script>
</head>
<body>
<h1>Upload</h1>
<form action="upload.php" method="post"
enctype="multipart/form-data"><br>
<label for="file">File:</label>
<input type="file" name="file" id="file" /> 
    <br>
    Tüüp: <select name="folder" value="folder" onchange="Toggle(this);">
<?php  
foreach(glob('/uploadfolder/*',      GLOB_ONLYDIR) as $dir) 
{ 
    $dir = basename($dir); 
    echo '<option value="', $dir, '">', $dir, '</option>'; 
}  
?>
<option value="folder">other</option>
        </select><br> 

<input id="folder" value="Create a new folder" style="display:none;">
<input type="submit" name="submit" value="Upload" />
</form>
</body>
</html> 
```

第二个文件`upload.php`：：

```
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1" />
<title></title>
</head>
<body>
<h1>Upload</h1>
<br>

<?php
$dirname  = $folder = $_POST["folder"];
$filename = "/uploadfolder/" . "$dirname" . "/";

if (!file_exists($filename)) {
    mkdir("/uploadfolder/" . "$dirname", 0777);
}

if ((($_FILES["file"]["type"] == "image/gif")
|| ($_FILES["file"]["type"] == "image/jpeg")
|| ($_FILES["file"]["type"] == "image/pjpeg")
|| ($_FILES["file"]["type"] == "application/vnd.openxmlformats-     officedocument.spreadsheetml.sheet"))
&& ($_FILES["file"]["size"] < 5120000))
  {
  if ($_FILES["file"]["error"] > 0)
    {
    echo "Return Code: " . $_FILES["file"]["error"] . "<br />";
    }
  else
    {
    echo "Name: " . $_FILES["file"]["name"] . "<br />";
    echo "Type: " . $_FILES["file"]["type"] . "<br />";
    echo "Size: " . ($_FILES["file"]["size"] / 1024) . " Kb<br />";
    echo "Tmp. file: " . $_FILES["file"]["tmp_name"] . "<br />";
    echo "Folder: " . $folder . "<br />";

    if (file_exists("/uploadfolder/$folder/" . $_FILES["file"]["name"]))
      {
       echo $_FILES["file"]["name"] . " already exists. ";
      }
    else
      {
      move_uploaded_file($_FILES["file"]["tmp_name"],
      "/uploadfolder/$folder/" . $_FILES["file"]["name"]);
      echo "Saved: " . "" . $_FILES["file"]["name"];
      }
     }
  }
else
  {
  echo "Upload failed";
  }
 ?>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-23T13:20:57.237

> 目前PHP创建了一个名为“文件夹”的文件夹，由于某种原因，图片甚至没有上传到那里

那是因为您`exit;`在第二个文件的以下摘录中有一个：

```
<?php
$dirname = $_POST["folder"];
$filename = ("/uploadfolder/" . "$dirname" . "/");

if (!file_exists($filename)) {
    mkdir("/uploadfolder/" . "$dirname", 0777);
    exit;
} else {
}
?> 
```

因此，一旦创建文件夹，脚本就会退出。

您的脚本存在多个安全问题，但我不会打扰它们，因为这不是安全课程的地方:)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-23T13:21:21.987

`exit`后面的行将`mkdir`导致脚本停止执行。如果要创建文件夹然后继续文件上传，则需要删除该`exit`语句。如果它是空的，您也可以删除该`else`部分...

```
$dirname  = $folder = $_POST["folder"];
$filename = "/uploadfolder/" . "$dirname" . "/";

if (!file_exists($filename)) {
    mkdir("/uploadfolder/" . "$dirname", 0777);
}

if ((($_FILES["file"]["type"] == "image/gif")
... 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-23T14:01:39.733

**执行以下步骤**

在 file-upload.php 中，将 name 属性添加到新文件夹 name 的文本字段中。就这样吧，

```
<input id="folder" value="Create a new folder" name="newfolder" style="display:none;"> 
```

现在在 upload.php 文件中进行如下更改，

```
$dirname = $_POST["folder"];
$filename = ("./uploadfolder/" . "$dirname" . "/");
if($dirname=="folder"){$dirname=$_POST["newfolder"];}
if (!file_exists($filename)) {
    mkdir("./uploadfolder/" . "$dirname", 0777);
} 
```

用作文件`$dirname`夹名称。所以替换`$folder`为`$dirname`

另一件事是，如果上传仍然无法正常工作，只需`"./uploadfolder/$folder/"`用作基本路径。还授予 777 对您的工作区的权限。您可以使用以下命令，

```
chmod -R 777 <path_to_uploadfolder> 
```

正如其他 SOF 用户所提到的，`exit;`从文件中删除一开始就存在检查。

希望你有答案！:)

# python - 如何从 python 的 bin 文件夹中的脚本导入包/模块

> ID：11612743
> 
> 赞同：34
> 
> 时间：2012-07-23T12:40:27.500
> 
> 标签：python

在组织 python 项目时，这种结构似乎是一种标准的做法：

```
myproject\
    bin\
        myscript
    mypackage\
        __init__.py
        core.py
    tests\
        __init__.py
        mypackage_tests.py
setup.py 
```

我的问题是，如何导入我的`core.py`以便我可以使用它`myscript`？

两个`__init__.py`文件都是空的。

内容`myscript`：

```
#!/usr/bin/env python
from mypackage import core
if __name__ == '__main__':
    core.main() 
```

内容`core.py`

```
def main():
    print 'hello' 
```

当我`myscript`从内部`myproject`目录运行时，出现以下错误：

```
Traceback (most recent call last):
  File "bin/myscript", line 2, in <module>
    from mypackage import core
ImportError: No module named mypackage 
```

我错过了什么？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-23T12:44:42.543

通常，`setup.py`应该将包安装在 Python 解释器可以找到的地方，这样安装后就`import mypackage`可以工作了。为了方便`bin`从开发树中直接运行脚本，我通常会简单地添加一个 simlink 到`../mypackage/`目录`bin`。当然，这需要一个支持符号链接的文件系统……</p>

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-07-18T20:24:04.350

我不确定是否有“最佳选择”，但以下是我的正常做法：

1.  将我想运行的任何脚本放入 /bin

2.  在目录 myproject 中执行“python -m bin.script”

3.  在 script.py 中导入时，请考虑 script.py 作为 root 所在的目录。所以

    ```
    from ..mypackage import core 
    ```

如果系统支持符号链接，这是一个更好的选择。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-12-04T11:49:07.297

我通常将我的 bin 路径添加到 $PYTHONPATH 中，这将使 python 也可以在 bin 目录中查找询问的模块。

```
export PYTHONPATH=/home/username/bin:$PYTHONPATH
$ python
import module_from_bin 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2020-02-10T21:45:48.860

我按照[setuptools 规范](https://setuptools.readthedocs.io/en/latest/setuptools.html#using-find-packages)解决了这个问题。

**在 setup.py**中，您可以指定模块**`as an argument for the function setup()`**：

```
packages = find_packages() 
```

这会找到所有模块。

ps 你必须导入这个函数：`from setuptools import setup, find_packages`

# icloud - 在 iCloud 应用程序中编辑期间是否有必要将 viewController 作为观察者移除？

> ID：11612749
> 
> 赞同：0
> 
> 时间：2012-07-23T12:40:56.713
> 
> 标签：icloud, nsnotification

以两台 iOS 设备运行具有 iCloud 支持的同一应用程序为例。该应用程序具有 CoreData 并且是“库”样式，而不是多文档样式的应用程序。

用户 A 正在使用该界面添加对象，并且在此添加过程中，用户 B 将 MOC 与另一个设备上的新对象一起保存。在用户 A 完成添加他的对象之前，用户 A 的设备上的通知将导致添加用户 B 的对象。这可能会导致在 A 的设备上的 [tableView reloadData] 期间 fetchedObjects 的数量发生变化......以及我相信的错误情况。

每当用户编辑 MOC 时，我是否需要将 viewController 作为观察者移除？如果是这样，一旦提到的 viewController 被重新添加为观察者，iCloud 是否会“感知”到这一点并重新发送“错过”的通知？我一直找不到对此的讨论。

非常感谢您的阅读。标记

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-28T11:56:57.947

此 iCloud 问题的答案以及更多信息可在以下网址找到：http: [//mentalfaculty.tumblr.com/archive](http://mentalfaculty.tumblr.com/archive) 查找“在 iCloud 和 CoreData 的工作表下”

# javascript - 将 Jquery 插件附加到文档

> ID：11612751
> 
> 赞同：0
> 
> 时间：2012-07-23T12:41:10.710
> 
> 标签：javascript, jquery

我正在为 jquery [link](http://www.abeautifulsite.net/blog/2011/02/jquery-minicolors-a-color-selector-for-input-controls/)使用一个名为 minicolors 的插件。我正在尝试通过单击按钮在此处添加一个颜色选择器（在 2 个地方，一个 div 和一个表仅用于测试），但它似乎只适用于第二个按钮单击，第一个只是返回一个空输入框。

```
 <script type="text/javascript">

            function addPicker() {

            $(document).ready( function() {
                            $(".colorpick").miniColors({
                change: function(hex, rgb) {

                    }
                });
            });

                var picker = "<input type= 'text' class='colorpick' size='6' autocomplete='on' maxlength='10' value='' />";

                $("#datatable > tbody").append("<tr><td>"+picker+"</td></tr>");
                $("#testdiv").append(picker);
            }

            </script>
            <div id="testdiv"></div>
            <button onclick =" addPicker();">Button</button> 
```

不知道为什么这不起作用。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-23T12:51:48.430

尝试 ：

```
 $(document).ready( function() {

       $('.addButton').click(function(){
           $("<input type= 'text' class='colorpick' size='6' autocomplete='on' maxlength='10' value='' />").appendTo("#datatable tbody").wrap('<tr><td></td></tr>');

           $('.colorpick').miniColors();
       });

  });​ 
```

现场演示：http: [//jsfiddle.net/hCVpX/12/](http://jsfiddle.net/hCVpX/12/)

# javascript - 将变量添加到函数中的数组中

> ID：11612752
> 
> 赞同：0
> 
> 时间：2012-07-23T12:41:14.043
> 
> 标签：javascript, html, arrays

我在将变量放入数组时遇到问题。这是我的代码：

```
var info = new Array();
google.load("feeds", "1");

function initialize() {
  var feed = new google.feeds.Feed("http://www.ntvmsnbc.com/id/24927681/device/rss/rss.xml");
  feed.setNumEntries(6);

  feed.load(function(result) {
    if (!result.error) {
      var container = document.getElementById("feed");
      var html = '';
      for (var i = 0; i < result.feed.entries.length; i++) {
        var entry = result.feed.entries[i];
        var a = " " ;
        a += entry.title;
        info[i] = a

       html += '<p>' + entry.publishedDate + '&nbsp' + entry.title;
      }
      container.innerHTML = html;
    }
    alert(info[0]);
  });
  //alert(info[0]);
}
//alert(info[0]);
google.setOnLoadCallback(initialize); 
```

您会看到一个名为 info 的数组。我正在尝试将 entry.title 添加到其中。你可以看到有些地方被注释掉了。我的信息[0] 是空的。我只能在函数（结果）中显示我的结果，除了它不显示任何东西，就像我从未在我的数组中放入任何东西一样。我不明白为什么。

更新：

```
 var info = new Array();
google.load("feeds", "1");
function initialize(cb) {
  var feed = new google.feeds.Feed("http://www.ntvmsnbc.com/id/24927681/device/rss/rss.xml");
  feed.setNumEntries(6);

  feed.load(function(result) {
    if (!result.error) {
      var container = document.getElementById("feed");
      var html = '';
      for (var i = 0; i < result.feed.entries.length; i++) {
        var entry = result.feed.entries[i]; 
       html += '<p>' + entry.publishedDate + '&nbsp' + entry.title;
        cb(entry.title);

      }
      container.innerHTML = html;
    }
  });
}
google.setOnLoadCallback(function(){
initizalize(processInfo);}
);
function processInfo(information){
    info[info.length] = information;
    alert(info[info.length]);
} 
```

最新版本

```
 var info = new Array();
google.load("feeds", "1");
function initialize(cb) {
  var feed = new google.feeds.Feed("http://www.ntvmsnbc.com/id/24927681/device/rss/rss.xml");
  feed.setNumEntries(6);

  feed.load(function(result) {
    if (!result.error) {
      var container = document.getElementById("feed");
      var html = '';
      for (var i = 0; i < result.feed.entries.length; i++) {
        var entry = result.feed.entries[i];
        var a= " ";
        a += entry.title;
        info[i] = a;
       html += '<p>' + entry.publishedDate + '&nbsp' + entry.title;
      }
      container.innerHTML = html;
    }
     cb(info);
  });
}
google.setOnLoadCallback(function(){
initizalize(processInfo);}
);
function processInfo(info){
    alert(info[0]);
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-23T12:43:39.663

您无法`info`在这些点显示，因为调用`feed.load()`是*异步*的，并且到那时还没有完成。

您需要在回调函数中继续进行*所有*处理`.load`，例如：

```
function initialize(cb) {
  feed.load(function(result) {
    ...
    cb(info);   // only call the callback once the data is loaded
  });
}

// call the above function, passing a callback handler
google.setOnLoadCallback(function() {
  initialize(processInfo);
}));

// defer all of your data processing to here
function processInfo(info) {
  ...
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-23T12:44:02.770

那是因为 AJAX 是异步的，基本上意味着它至少在运行完其余代码之前不会运行。任何依赖于定义为 AJAX 调用（或任何其他异步回调）的东西的东西都必须在该回调中，或者本身推迟到以后。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-23T12:44:43.580

确保`result.feed.entries.length`它不为零，并且您实际上正在执行`for`循环。另外（但次要）`;`在`info[i] = a`

# linux - NASM x86_64 在编写命令行参数时遇到问题，在 rax 中返回 -14

> ID：11612753
> 
> 赞同：2
> 
> 时间：2012-07-23T12:41:14.420
> 
> 标签：linux, assembly, 64-bit, x86-64, nasm

我正在使用 elf64 编译并尝试获取参数并将其写入控制台。

我将该函数称为 ./test wooop

使用 gdb 单步执行后似乎没有问题，一切都设置好了：

rax: 0x4 rbx: 0x1 rcx: 指向字符串，x/6cb $rcx 给出 'w' 'o' 'o' 'o' 'p' 0x0 rdx: 0x5 <---正确确定长度

在 int 80h rax 包含 -14 之后，控制台上没有任何内容。如果我在 .data 中定义一个字符串，它就可以工作。gdb 以同样的方式显示 $rcx 的值。

有任何想法吗？这是我的完整来源

```
 %define LF      0Ah
    %define stdout      1
    %define sys_exit    1
    %define sys_write   4

    global _start

    section .data

    usagemsg: db "test {string}",LF,0

    testmsg: db "wooop",0

    section .text

    _start:

    pop rcx     ;this is argc
    cmp rcx, 2      ;one argument
    jne usage
    pop rcx
    pop rcx               ; argument now in rcx
    test    rcx,rcx
    jz usage

    ;mov rcx, testmsg    ;<-----uncomment this to print ok!

    call print
    jmp exit

    usage:
    mov rcx, usagemsg
    call print
    jmp exit

    calclen:

    push rdi
    mov rdi, rcx
    push rcx
    xor rcx,rcx
    not rcx
    xor al,al
    cld
    repne scasb
    not rcx  
    lea rdx, [rcx-1]
    pop rcx
    pop rdi
    ret

    print:

    push rax
    push rbx
    push rdx

    call calclen

    mov rax, sys_write
    mov rbx, stdout
    int 80h
    pop rdx
    pop rbx
    pop rax
    ret

    exit:
    mov rax, sys_exit
    mov rbx, 0
    int 80h 
```

谢谢

编辑：在改变我的系统调用方式后，它工作正常。感谢你的帮助！

sys_write 现在是 1
sys_exit 现在是 60
stdout 现在进入 rdi，而不是 rbx
要写入的字符串现在设置在 rsi 中，而不是 rcx
int 80h 被 syscall 替换

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-23T18:48:08.973

我仍在运行 32 位硬件，所以这是一个疯狂的猜测！您可能知道，64 位系统调用号完全不同，使用“syscall”而不是 int 80h。但是仍然可以使用 int 80h 和 32 位系统调用号，将 64 位寄存器截断为 32 位。您的测试表明这适用于 .data 中的地址，但对于“堆栈地址”，它返回 -14（-EFAULT - 错误地址）。我唯一能想到的是将 rcx 截断为 ecx 会导致“错误地址”在堆栈上。我不知道堆栈在 64 位代码中的位置。这有意义吗？

我会尝试使用“正确的”64 位系统调用号和寄存器以及“系统调用”，看看是否有帮助。

最好的，弗兰克

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-23T20:09:48.897

正如您所说，您使用 ELF64 作为编译的目标。不幸的是，这是你的第一个错误。在 Linux 上使用“旧”系统调用接口，例如`int 80h`，只有在运行 32 位任务时才有可能。显然，您可以简单地将源代码组装为 ELF32，但是如果在 64 位模式下运行任务，您将失去所有优势，即额外的寄存器和 64 位操作。

为了在 64 位任务中进行系统调用，必须使用“新”系统调用接口。系统调用本身是通过`syscall`指令完成的。内核销毁寄存器`rcx`和`r11`. 系统的编号在寄存器中指定，`rax`而调用的参数传入`rdi`、`rsi`、`rdx`、`r10`和。请记住，系统调用的数量与 32 位模式中的不同。您可以在 中找到它们，该位置通常位于您的发行版存储它的位置或任何位置。`r8``r9``unistd_64.h``/usr/include/asm`

# powershell - Powershell：Get-Process 不会返回远程描述

> ID：11612756
> 
> 赞同：1
> 
> 时间：2012-07-23T12:41:28.450
> 
> 标签：powershell

所以我试图在一台机器上返回一个正在运行的进程的描述列表，我可以通过`get-process | select description`

但是，当我尝试时：`get-process -computer remote | select description`什么都没有返回，只有空字符串。

是否有一个原因？

谢谢

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-23T14:18:27.677

好吧，如果你看一下描述是如何检索的，一切都会变得更清楚：

```
PS> gps | gm | where {$_.name -eq 'description'} | select Definition

   TypeName: System.Diagnostics.Process

Definition
----------
System.Object Description {get=$this.Mainmodule.FileVersionInfo.FileDescription;} 
```

这种访问`Process.MainModule`，文档必须说它`NotSupportedExcetion`在以下情况下抛出 a：

> 您正在尝试访问在远程计算机上运行的进程的 MainModule 属性。此属性仅适用于在本地计算机上运行的进程。

因此，远程进程检索描述的尝试失败。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-23T15:18:36.823

也许使用 WMI 和 GetVersionInfo 方法：

```
$ComputerName = 'server1'

Get-WmiObject Win32_Process -ComputerName $ComputerName | 
Select-Object Name, @{n='Description';e={ [System.Diagnostics.FileVersionInfo]::GetVersionInfo( ($_.ExecutablePath -replace '^(.):',"\\$ComputerName\$`1$")).FileDescription }} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-26T08:47:50.403

在试验之后，`get-process`我编写了下面的脚本来显示它通过远程会话“可见”的内容

获取进程-computer 计算机| 选择 * | 其中 {$_.name -match "tskmgr"}

# python - 在 OR 条件下，哪一方在 python 中首先评估？

> ID：11612763
> 
> 赞同：9
> 
> 时间：2012-07-23T12:42:14.580
> 
> 标签：python, performance

```
if cpu_expensive_condition() or simple_condition():
        do_something() 
```

上面python代码中OR语句中的两个条件将首先评估？，并且两者都将被评估是强制性的吗？

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2012-07-23T12:44:47.073

> 该表达式`x or y`首先计算 x；如果 x 为真，则返回其值；否则，评估 y 并返回结果值。

引用自[Python 语言参考](http://docs.python.org/reference/expressions.html#boolean-operations)

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-07-23T12:52:49.893

Python从左到右求值，两边都不需要求值。考虑以下示例。

```
def left(x):
    print 'left'
    return x

def right(x):
    print 'right'
    return x

if left(False) or right(False):
    print 'Done'

if left(True) or right(True):
    print 'Done' 
```

这将产生以下输出：

```
left
right #This is where the first if statement ends.
left
Done  #Only the left side was evaluated 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-07-23T12:47:09.860

根据[布尔运算 - 并且，或者，不在](http://docs.python.org/library/stdtypes.html?highlight=short%20circuit#boolean-operations-and-or-not)Python 文档中：

> 这是一个短路运算符，因此它仅在第一个参数为 False 时才计算第二个参数。

所以`cpu_expensive_condition()`总会*被*评价。`simple_condition()`只会在`cpu_expensive_condition()`返回时进行评估`False`（或评估为 的东西`False`，例如`0`or`''`或`None`）。

另请参阅：[Python 是否支持短路？](https://stackoverflow.com/questions/2580136/does-python-support-short-circuiting)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-23T12:45:12.387

Python 进行短路评估。当然，第一个语句将首先被评估。`False`只有当第一个是或假的时，才会评估第二个。

# linux - 将linux二进制文件上传到maven仓库

> ID：11612768
> 
> 赞同：3
> 
> 时间：2012-07-23T12:42:19.713
> 
> 标签：linux, maven, binary, repository

我已经搜索了很多如何将文件上传到 maven，但我没有成功。我有一个二进制文件（称为 textgenerator），我想将它上传到一个 maven 存储库，以便更多人可以使用它。

现在我对此有一些疑问：

你能告诉我我需要如何分步执行此操作（如教程）吗？我需要一个回购网址吗？我在哪里可以找到一个？是否可以只上传一个二进制文件（没有 jar 文件）？

我希望尽快收到人们的来信。

我试过这个：

```
mvn deploy:deploy-file \
 -Durl=https://repository.jboss.org/nexus/service/local/staging/deploy/maven2/ \
 -DrepositoryId=com.textgenerator \
 -DgroupId=org.textgenerator \
 -DartifactId=textgenerator \
 -Dversion=1.2.3  \
 -Dpackaging=rar \
 -Dfile=textgenerator.rar 
```

我将二进制文件压缩成一个 rar 文件，没有别的。但这失败了，代码为 301

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-23T14:15:01.507

首先，您使用的命令行是正确的。

其次，是的，可以在 Maven 存储库上上传任何类型的文件。

但是你不会被允许在公共存储库上上传任何东西，比如 jboss 的存储库。这是由 jboss 管理的，由他们来安装新的二进制文件（参见此处的过程：[https](https://docs.sonatype.org/display/Repository/Sonatype+OSS+Maven+Repository+Usage+Guide) ://docs.sonatype.org/display/Repository/Sonatype+OSS+Maven+Repository+Usage+Guide ）。

如果您想与您的同事共享您的二进制文件，您必须设置自己的 maven 存储库（例如 artifactory（只需一个 zip 解压缩和一个服务启动））。

该存储库将是您公司中的一种代理。所有的 Maven 库将被下载一次并存储在这个服务器上。由于您将成为该服务器的管理员，因此您将被允许上传您的二进制文件并与您所有的朋友分享！

嗨，M。

# jquery - 在jQuery拖放之后“格式化”一个HTML列表？

> ID：11612769
> 
> 赞同：0
> 
> 时间：2012-07-23T12:42:21.017
> 
> 标签：jquery, html, jquery-ui, nested-lists

我创建了一个嵌套的、无序的 HTML 列表，并将 jQuery UI 可拖动和 jQuery UI 拖放到列表项中，效果很好。

问题是在将列表项放入其他列表项时，列表不会自行格式化，一旦您拖动一些项目，这会导致最疯狂的事情。

因为我不想杀死任何（进一步的）jQuery 绑定到元素，所以我尝试再次分离并附加列表项，但这不起作用。

您可以在[这里自己查看问题](http://jsfiddle.net/dHRkw/)

所以问题是：如何让列表始终像在加载页面时一样格式化？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-23T12:52:14.130

没关系，[这是解决方案](http://jsfiddle.net/dHRkw/1/)。

```
 drop: function (e, ui)
            {
                var draggable = $(ui.draggable).detach();
                $(this).find("ul:topmost").append(draggable);

                // solution:
                draggable.css({
                    left: '',
                    top: ''
                });
            } 
```

# ios - 应用程序在 drawInRect 方法中崩溃

> ID：11612771
> 
> 赞同：1
> 
> 时间：2012-07-23T12:42:24.790
> 
> 标签：ios, objective-c, uiview, uiimage

我正在尝试将图像保存在相册中。我通过以下代码执行此操作：

```
CGSize targetSize =self.view.frame.size;

UIGraphicsBeginImageContext(targetSize);

//UIGraphicsBeginImageContextWithOptions(targetSize, NO, 2.0);

// 也试过了，但没有改善

UIImage* image1 = mkImage1.image;

UIImage* image2 = mkImage2.image;

UIImage* image3 = mkImage3.image;

CGRect rectImage1 = CGRectMake(mkImage1.frame.origin.x , mkImage1.frame.origin.y , mkImage1.frame.size.width , mkImage1.frame.size.height );

CGRect rectImage2 = CGRectMake(mkImage2.frame.origin.x , mkImage2.frame.origin.y , mkImage2.frame.size.width , mkImage2.frame.size.height );

CGRect rectImage3 = CGRectMake(mkImage3.frame.origin.x , mkImage3.frame.origin.y , mkImage3.frame.size.width , mkImage3.frame.size.height );

[image1 drawInRect:rectImage1]; // 崩溃线

[image2 drawInRect:rectImage2];

[image3 drawInRect:rectImage3];

 tempImage = UIGraphicsGetImageFromCurrentImageContext();

    UIGraphicsEndImageContext();

UIImageWriteToSavedPhotosAlbum(tempImage, nil,nil,nil);

```

当我尝试绘制 image1 时，我的应用程序崩溃了。但是，如果我评论那条线，所有其他图像都可以正确保存，没有任何问题..

**我的日志信息给了我这个信息：**

```
ImageIO`ImageIO_ABGR_TO_ARGB_8Bit：
0x330abc70: 推 {r4, r5, r6, r7, lr}  
0x330abc72: 添加 r7, sp, #12  
0x330abc74: push.w {r8, r10, r11}  
0x330abc78: ldr r1, [r0]  
0x330abc7a: ldr r2, [r0, #12]  
0x330abc7c: cmp.w r2, r1, lsl #2  
0x330abc80：blo 0x330abd06；ImageIO_ABGR_TO_ARGB_8Bit + 150  
0x330abc82: ldr r3, [r0, #24]  
0x330abc84: lsls r2, r1, #2  
0x330abc86: cmp r3, r2  
0x330abc88：blo 0x330abd06；ImageIO_ABGR_TO_ARGB_8Bit + 150  
0x330abc8a: ldr r2, [r0, #4]  
0x330abc8c：cmp r2，#0  
0x330abc8e: beq 0x330abd06 ; ImageIO_ABGR_TO_ARGB_8Bit + 150  
0x330abc90: 比克 lr, r1, #7  
0x330abc94: ldr r3, [r0, #8]  
0x330abc96: ldr.w r12, [r0, #20]  
0x330abc9a: sub.w r4, r1, lr  
0x330abc9e: asrs r5, r1, #3  
0x330abca0: 移动 r6, r12  
0x330abca2: 移动 r8, r3  
0x330abca4：cbz r5，0x330abcbe；ImageIO_ABGR_TO_ARGB_8Bit + 78  
0x330abca6: 移动 r8, r3  
0x330abca8: 移动 r9, r5  
0x330abcaa: 移动 r6, r12  
0x330abcac：vld4.8 {d0，d1，d2，d3}，[r8]！  
0x330abcb0: vswp d0, d2  
0x330abcb4：vst4.8 {d0，d1，d2，d3}，[r6]！// EXC_BAD_ACCESS  
0x330abcb8: subs.w r9, r9, #1  
0x330abcbc: bne 0x330abeac ; slab_dealloc + 132  
0x330abcbe: cmp lr, r1  
0x330abcc0: bge 0x330abcf8 ; ImageIO_ABGR_TO_ARGB_8Bit + 136  
0x330abcc2: add.w r8, r8, #2  
0x330abcc6：添加 r6，#2  
0x330abcc8: 移动 r9, r4  
0x330abcca: ldrb.w r11, [r8]  
0x330abcce: subs.w r9, r9, #1  
0x330abcd2: ldrb r10, [r8, #-2]  
0x330abcd6: strb r11, [r6, #-2]  
0x330abcda: ldrb r11, [r8, #-1]  
0x330abcde: strb r11, [r6, #-1]  

```

```
//******************///  
线程 1，队列：com.apple.main-thread  
0x32ac2526 in -[UIImage drawInRect:] ()  
-[MyAppViewController saveToAlbum] 中的 0x00018e32  

```

当我将该图像从 png 转换为 jpg 时，一切正常。但我只想保存 png 格式。

# html - HTML 表单元素到 URL

> ID：11612780
> 
> 赞同：1
> 
> 时间：2012-07-23T12:42:52.410
> 
> 标签：html, forms, url, post, get

我正在使用使用不同搜索方法的电子商务引擎脚本。

而不是像这样使用 GET 的 URL：

```
http://search.com/searchc?q=the+query 
```

它用

```
http://search.com/searchc/the+query 
```

我如何制作一个表单来 POST 或 GET 到那个，因为这个表单会生成 URL

```
http://search.com/searchc/?q=the+query

<form action="/searchc/" method="post">
    <input type="text" id="q" name="q">
    <input type="submit" value="go">
</form> 
```

也试过这个（获取或发布对这两者都不起作用）

```
<form action="/searchc/" method="post">
    <input type="text" id="" name="">
    <input type="submit" value="go">
</form> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-23T12:49:44.717

```
<form action="/searchc/" method="post" onsubmit="this.action+=this.q.value;return true">
   <input type="text" id="q">
   <input type="submit" value="go">
</form> 
```

空间将提交为 %20

您可以使用

```
this.action+=this.q.value.split(' ').join('+') 
```

替换它们

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-23T13:48:20.797

可靠的方法有两个组件：客户端 JavaScript 操作，它根据需要将表单提交转换为请求，以及（作为非 JS 情况的备份）一个简单的服务器端重定向实用程序，它接收来自表单的请求并重定向它如修改。

像这样的东西（对于 GET 案例）：

```
<form action="http://www.example.com/redirect"
  onsubmit="location.href = document.getElementById('f1').value + 
  document.getElementById('q').value; return false">
<input type="text" id="q" name="f2">
<input type="submit" value="go">
<input type=hidden id=f1 name=f1 value="http://search.com/search/">
</form> 
```

这里[http://www.example.com/redirect](http://www.example.com/redirect)是一些服务器端表单处理程序，它只读取表单字段并选择名为 f1、f2、...的字段，将它们连接成一个字符串，并使用它作为重定向一个网址。作为 CGI 脚本，这将是

```
use CGI qw(:standard);
$dest = '';
$i = 1;
while(param('f'.$i)) {
   $dest .= param('f'.$i++); }
print "Location: $dest\n\n"; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-23T12:59:57.063

这是一个非常奇怪的 url 模式，但无论如何你可以这样做：

```
$(function () {
    $('form').submit(function () {
        var url = '/searchc/' + encodeURIComponent($(this).find('[name=q]').val());
        window.location = url;
        return false;
    });    
}); 
```

# cocoa-touch - 以编程方式在联系人中创建组

> ID：11612781
> 
> 赞同：2
> 
> 时间：2012-07-23T12:42:55.650
> 
> 标签：cocoa-touch, abaddressbook

如何使用 AddressBook 框架以编程方式将新组添加到 iPhone 联系人？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-23T13:04:05.970

先看看是否存在，如果不存在，就创建它：

```
bool foundIt = NO;
// Protective - did we just not find it, or lose it?
CFArrayRef groups = ABAddressBookCopyArrayOfAllGroups(addrBook);
CFIndex numGroups = CFArrayGetCount(groups);
for(CFIndex idx=0; idx<numGroups; ++idx) {
    ABRecordRef groupItem = CFArrayGetValueAtIndex(groups, idx);

    CFStringRef name = (CFStringRef)ABRecordCopyValue(groupItem, kABGroupNameProperty);
//NSLog(@"Look at group named %@", name);
    bool isMatch = [newName isEqualToString:(NSString *)name];
    CFRelease(name);

    if(isMatch) {
        // NSLog(@"FOUND THE GROUP ALREADY!");
        groupNum = [NSNumber numberWithInt:ABRecordGetRecordID(groupItem)];
        [self setObject:groupNum forKey:kGroupID];
        foundIt = YES;
        break;
    }
}
CFRelease(groups);

if(!foundIt) {
    // lets create one
    ABRecordRef groupItem = ABGroupCreate();
    ABRecordSetValue(groupItem, kABGroupNameProperty, (CFStringRef *)newName, &error);
    if(!error) {
        ABAddressBookAddRecord (addrBook, groupItem, &error);   // bool ret = 
        ABAddressBookSave(addrBook, &error);

        groupNum = [NSNumber numberWithInt:ABRecordGetRecordID(groupItem)];
            //NSLog(@"FIRST groupNumber: %@", groupNum);
        [self setObject:groupNum forKey:kGroupID];
    }
    CFRelease(groupItem);
} 
```

# c# - 在 Outlook 中使用 C# 读取和还原其他邮箱列表

> ID：11612784
> 
> 赞同：2
> 
> 时间：2012-07-23T12:43:05.153
> 
> 标签：c#, api, outlook

是否可以使用 C# Outlook API 读取“其他邮箱”列表？

该列表位于 Outlook 的以下窗口中：

工具 > 帐户设置 > 电子邮件 > 选择帐户 > 更改... > 在“Microsoft Exchange 服务器设置”选项卡上，选择“更多设置...” 在“Microsoft Exchange 服务器”上，添加附加邮箱，选择“高级”标签。在此选项卡中，所有其他邮箱都列在“打开这些其他邮箱”标签下的列表框中。

我必须使用 C# 代码备份和恢复此列表。

我可以使用 Outlook 互操作库来做到这一点吗？

提前感谢您的回答。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-23T14:46:01.087

我找到了读取所有邮箱的方法：这是代码示例：

```
using System;
using Microsoft.Office.Interop.Outlook;

class Program
{
    static void Main(string[] args)
    {
        var oApp = new Application();

        var oNS = oApp.GetNamespace("MAPI");

        Stores stores = oNS.Stores;

        foreach (Store store in stores)
        {
            Console.WriteLine("Name: {0} \n Path: {1} \n Type: {2} \n IsDataFileStore: {3}", 
                                store.DisplayName, store.FilePath, store.ExchangeStoreType, store.IsDataFileStore);

            Console.WriteLine(Environment.NewLine);
        }

        Console.WriteLine("Done");
        Console.ReadKey();
    }
} 
```

新问题是如何使用 C# 恢复这些邮箱？:)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-23T14:12:40.997

您可以使用[`Session.Stores`](http://msdn.microsoft.com/en-us/library/ff864790.aspx)( *Outlook Interop* ) 访问其他共享邮箱。请参阅包含示例代码片段的[相关 SO 帖子。](https://stackoverflow.com/a/9231786/175679)

# llvm - LLVM 将函数标记为 const 并删除重复调用

> ID：11612787
> 
> 赞同：5
> 
> 时间：2012-07-23T12:43:37.327
> 
> 标签：llvm

我在我的 LLVM IR 中调用了一个外部 (C) 函数。IR 被 JITed 并且一切正常，但是生成的代码对性能很敏感，如果可能的话，我想删除对我的外部函数的重复调用。该功能没有副作用。是否有一个 FunctionPass 可以消除对函数的冗余调用？我必须做些什么来将该功能标记为没有副作用吗？

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2015-04-20T18:56:43.520

根据[http://llvm.org/docs/LangRef.html#function-attributes](http://llvm.org/docs/LangRef.html#function-attributes)您可以为函数指定属性 readonly 或 readnone ：

```
declare i32 @fn(i32 %i);
declare i32 @readonly_fn(i32 %i) readonly;
declare i32 @readnone_fn(i32 %i) readnone; 
```

`readonly`表示该函数不写入内存， `readnone`表示它甚至不读取内存（例如 sin() 可能是 readnone）

如果一个函数不写内存，它应该只根据参数返回结果，因此是一个纯函数（如果全局状态没有改变）。在 readnone 函数的情况下，甚至全局状态也可能发生变化。

llvm 优化器可以使用`EarlyCSE`pass 优化对 readonly 和 readnone 函数的调用（公共子表达式消除），如下例所示：

使用以下测试功能

```
define i32 @test_no_readonly()
{
  %1 = call i32 @fn(i32 0)
  %2 = call i32 @fn(i32 0)
  %add = add i32 %1, %2
  ret i32 %add
}
define i32 @test_readonly()
{
  %1 = call i32 @readonly_fn(i32 0)
  %2 = call i32 @readonly_fn(i32 0)
  %add = add i32 %1, %2
  ret i32 %add
}
define i32 @test_readnone()
{
  %1 = call i32 @readnone_fn(i32 0)
  %2 = call i32 @readnone_fn(i32 0)
  %add = add i32 %1, %2
  ret i32 %add
} 
```

和 running`opt -early-cse -S readonly_fn.ll > readonly_fn_opt.ll`优化了 readonly 和 readnone 函数的第二次调用，导致

```
define i32 @test_no_readonly() {
  %1 = call i32 @fn(i32 0)
  %2 = call i32 @fn(i32 0)
  %add = add i32 %1, %2
  ret i32 %add
}

define i32 @test_readonly() {
  %1 = call i32 @readonly_fn(i32 0)
  %add = add i32 %1, %1
  ret i32 %add
}

define i32 @test_readnone() {
  %1 = call i32 @readnone_fn(i32 0)
  %add = add i32 %1, %1
  ret i32 %add
} 
```

`readonly_fn`and`readnone_fn`函数只调用一次，从而消除了冗余调用。

pass 还可以将`-functionattrs`这些属性添加到定义的函数中

# c# - DataGridView RowCount 与 Rows.Count

> ID：11612791
> 
> 赞同：13
> 
> 时间：2012-07-23T12:43:47.090
> 
> 标签：c#, winforms, datagridview

如果我有一个 DataGridView `uxChargeBackDataGridView`。

以下语法是否不同但实际上相同？：

```
int numRows = uxChargeBackDataGridView.Rows.Count;
int numRowCount = uxChargeBackDataGridView.RowCount; 
```

如果`uxChargeBackDataGridView`为空，则两者都等于 1；因此，如果其中任何一个等于 1，我可以假设用户没有输入任何数据，这在逻辑上是否成立？

WinFroms 有一个按钮`RUN`——我可以使用上面的测试来决定这个按钮是否被启用，即只有在`number of rows is >1`?

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-07-23T12:50:32.050

> RowCount 获取或设置 DataGridView 中显示的行数。
> 
> Rows.Count 返回行数

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2012-07-23T12:50:08.367

两种说法都是一样的。但是，要记住的一件事是，只有当`AllowUsersToAddRow`属性设置为 true 时，“空”datagridview 才有 1 条记录。否则，行数将为 0。

编辑：我想补充一点，代替 MMK 的回答，如果您不手动或以编程方式更改 RowCount，它们将返回相同的值。请参阅[http://msdn.microsoft.com/en-us/library/system.windows.forms.datagridview.rowcount.aspx](http://msdn.microsoft.com/en-us/library/system.windows.forms.datagridview.rowcount.aspx)。

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2015-12-23T12:46:39.920

如果你反编译程序集`System.Windows.Forms.DataGridView`，你会看到：

```
public int RowCount
        {
            get
            {
                return this.Rows.Count;
            } 
```

所以，`RowCount`返回`Rows.Count`

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-23T12:59:08.210

以下语句返回相同的结果，但 RowCount 限制了 DataGridView 中显示的行数。

```
int numRows = uxChargeBackDataGridView.Rows.Count;
int numRowCount = uxChargeBackDataGridView.RowCount; 
```

检查下面关于[DataGridView.RowCount 属性的注释](http://msdn.microsoft.com/en-us/library/system.windows.forms.datagridview.rowcount.aspx)

> 如果 AllowUserToAddRows 为 true，则不能将 RowCount 设置为 0。在这种情况下，调用 DataGridViewRowCollection.Clear 方法删除除新记录行之外的所有行。在这种情况下，调用 Clear 与将 RowCount 设置为 1 的结果相同，但要快得多。

*如果`RowCount`设置为小于当前值的值，则将从 Rows 集合的末尾删除行。如果 RowCount 设置为大于当前值的值，则行将添加到 Rows 集合的末尾。附加行基于 RowTemplate 属性中指定的行。*

如果为真，则考虑默认空行。它实现[了 IBindingList 接口](http://www.nedcomp.nl/support/origdocs/dotnetsdk/cpref/frlrfsystemcomponentmodelibindinglistclasstopic.htm)。参考：[DataGridView - AllowUserToAddRows 做什么？](https://stackoverflow.com/questions/1422001/datagridview-what-does-allowusertoaddrows-do)

> [如果 DataGridView 绑定到数据，如果此属性和数据源的IBindingList.AllowNew](http://msdn.microsoft.com/en-us/library/system.componentmodel.ibindinglist.allownew.aspx) 属性都设置为 true ，则允许用户添加行。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2015-08-10T10:52:08.657

如果 AllowUserToAddRows 为真，则至少一行将始终出现在新记录的网格中。要排除此行，请检查行对象上的属性 IsNewRow。

# grails - Grails拦截表单提交修改参数

> ID：11612794
> 
> 赞同：3
> 
> 时间：2012-07-23T12:43:53.733
> 
> 标签：grails, interceptor

**为什么我需要这个：**

我正在一个项目中工作，该项目允许用户选择[尼泊尔 Bikram Sambat 日期](http://en.wikipedia.org/wiki/Vikram_Samvat)`Java`格式的日期（与`SQL's`“日期”不兼容）。我通过修改`org.codehaus.groovy.grails.plugins.web.taglib.FormTagLib`类的`datePicker` `tagLibrary`. 并修改脚手架模板`list.gsp`。

![在此处输入图像描述](../Images/3ed6b2ed5adfce0e46716c0f88b770fd.png)

**我的问题 ：**

当用户从浏览器中选择尼泊尔日期并提交表单时，我想阅读`[day, month, year]`并将其转换为`Java Date`对象并保存到数据库中。（当它显示在视图中时，日期将转换回尼泊尔的 Bikram Sambat）。

我试图在控制器中打印参数，但所有参数已经映射/包装到相应的对象中 - 以及我的尼泊尔日期。所以我从下面的代码中得到了 Java 日期的 sysout：

```
println params.date 
```

我想知道如何拦截表单提交请求并将日期参数修改为英文日期。我看到了一种解决方案 - 在表单提交之前使用 JavaScript（并将我的转换代码重写为 JavaScript）来转换参数。只是想确认是否有一种简单的方法-例如拦截器/过滤器等。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-23T14:53:17.610

您可以创建一个 CustomEditorRegistrar 来更改您的日期格式，然后再将其包装到对象中。像这样：

```
public class CustomDateEditorRegister implements PropertyEditorRegistrar {

    public void registerCustomEditors(PropertyEditorRegistry registry) {

        String dateFormat = 'dd/MM/yyyy'
        registry.registerCustomEditor(Date, new CustomDateEditor(new SimpleDateFormat(dateFormat), true))
    }

} 
```

您的日期编辑器可能类似于：

```
class CustomSimpleDateEditor extends CustomDateEditor {

    public CustomSimpleDateEditor(SimpleDateFormat formatter, boolean allowEmpty) {
        super(formatter, allowEmpty);
    }

    public String getAsText() {
        Date date = (Date)getValue();
        try {
            String dateText = new SimpleDateFormat("dd/MM/yyyy").parse(date);
            return dateText;
        } 
        catch(Exception e) {
            e.printStackTrace();
            return "";
        }
    }

} 
```

您的 params.date 将在传递给对象并保存到数据库之前进行转换。无论如何，[这里](http://omaha-seattle.blogspot.com.br/2010/02/custom-grails-property-editor.html)有一个很好的链接来解释它。

希望能帮助到你！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-24T14:57:12.963

好吧，假设您使用标准 grails 日期选择器的输入字段，您应该在参数映射中包含正在传递的字段，只是名称不同。在接收请求的操作中编写“println 参数”并查找日期选择器的字段名称。它应该给你带来类似的东西（日期选择器字段的名称，比如* + _year，代表年份，* + _month 代表月份等等）。

# android - 在图库项目中单击我如何 显示图像视图和网格视图？

> ID：11612795
> 
> 赞同：0
> 
> 时间：2012-07-23T12:43:53.017
> 
> 标签：android, image, gridview, gallery

当我单击要显示图像和网格视图的图库项目时，我的 android 应用程序中有一个图库。当我在图库中只有三张图像并单击它正确显示时，我完成了。但是现在我在画廊中有七个图像，每个画廊项目都有四个图像来显示画廊。在这个我只使用 drwawable 图像数组。这次我得到了一个例外，因为 Java.lang.OutOfMemory
我使用下面的代码

```
 public ImageThemeAdapter(Context c, Integer[] mImageIds) {
     imagesId=mImageIds;
     bitmap=new Bitmap[imagesId.length];
     mContext = c;
     TypedArray ta=obtainStyledAttributes(R.styleable.Gallery1);
        imageBackground=ta.getResourceId(R.styleable.Gallery1_android_galleryItemBackground, 1);
        ta.recycle();
        for (int i = 0; i <imagesId.length; i++) {
           bitmap[i]=BitmapFactory.decodeResource(mContext.getResources(),imagesId[i]);
        }
    }

    public int getCount() {
        return bitmap.length;
    }

    public Object getItem(int position) {
        return bitmap[position];  
    }

    public long getItemId(int position) {
        return position;
    }

    public View getView(int position, View convertView, ViewGroup parent) {   

        ImageView i = new ImageView(mContext);

        i.setImageBitmap(bitmap[position]);
        i.setScaleType(ImageView.ScaleType.FIT_XY);
        i.setLayoutParams(new Gallery.LayoutParams(130, 120));
       // i.setLayoutParams(new Gallery.LayoutParams((ScreenWidth*80)/100, android.view.ViewGroup.LayoutParams.WRAP_CONTENT));
        i.setBackgroundResource(imageBackground);
        return i;   
    } 
```

请提供任何建议。提前致谢。我有这样的要求 ![画廊和网格视图](../Images/ca63ba57e0401de61a075ba38f7bae6d.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-23T12:58:40.820

请使用分配跟踪器（Windows -> 显示视图 -> 其他 -> Android -> 分配跟踪器）重复这些步骤，并找出不同对象的内存分配。

主要原因可能是由于您在创建 GridView 时自定义视图的布局，并且在运行时您将创建画廊图像的缩略图。我们可能必须创建一个网格视图，一次可用的图像数量最少。

# c - ANSI C 是这样吗？

> ID：11612796
> 
> 赞同：2
> 
> 时间：2012-07-23T12:43:54.983
> 
> 标签：c, ansi

“ const 和 volatile 限定符可以在**任何**声明之前。”

我在一个在线测试系列中看到这个声明被标记为真的。但在标准 C(89) 中我可以看到

```
declaration:
     declaration-specifiers init-declarator-listopt ;
declaration-specifiers:
     storage-class-specifier declaration-specifiersopt
     type-specifier declaration-specifiersopt
     type-qualifier declaration-specifiersopt
     function-specifier declaration-specifiersopt
init-declarator-list:
     init-declarator
     init-declarator-list , init-declarator
init-declarator:
     declarator
     declarator = initializer 
```

从上面看来，这个声明对于一些声明可能是错误的。

请帮忙！

编辑：我知道这对 ISO C89 或更高版本无效，但请对 ANSI 提出建议，以便教育当局通过一些证据了解问题错误。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-23T12:50:55.083

> 类型限定符声明说明符（opt）

允许类型限定符，例如`const`or `volatile`，后跟声明说明符。后面的声明说明符可以是函数声明。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-05T00:10:44.290

您确实可以在不违反 C 语法规则的情况下放置`const`或放在任何声明之前。`volatile`这绝不意味着这样的构造有意义，不会被完全忽略，或者不会因为其他原因触发编译错误。这只意味着它不会触发语法错误。

C89 规范第 3.5.3 节规定

> 如果函数类型的规范包含任何类型限定符，则行为未定义。

这意味着将函数声明为`const`or是完全合法的`volatile`，只要您实际上并未*调用*该函数。如果您尝试调用它，则不知道会发生什么。这是您在 C 中可以做的几件事之一，这些事情在技术上是合法的语法，但完全没有意义（如语句`1 == 3;`或`x + 2;`）。

为了澄清您在编辑中的评论，请注意术语“ANSI C”和“C89”指的是同一件事。C 有 ANSI 和 ISO 标准，仅在格式上有所不同。这些标准的内容就是通常所说的“C89”或“C90”（以区别于后来被 ANSI 标准化的 C99）。当您说“我知道这对 ISO C89 或更高版本无效”时，您的声明也包括“ANSI C”。

# image - 使用 FlashDevelop / Flex 在动作脚本 3 中加载多个图像的可接受方式

> ID：11612799
> 
> 赞同：1
> 
> 时间：2012-07-23T12:44:01.000
> 
> 标签：image, actionscript-3, apache-flex, flashdevelop

在工作中，我被要求制作一个基于网络的小型迷你游戏原型。

我沿着 Flash 路线走，正在使用带有 Flex SDK 的 Flash Develop。

我还找到了一个图形框架，我可以毫无问题地使用它，但我正试图让我自己的代码在以后可重用。

我编写了一个小类来加载纹理列表，从加载前提供给类的名称。这是为了使问题保持​​简洁[。](http://pastebin.com/bpbwBuiG)

老实说，谈到 Flash/ActionScript，我不知道自己在做什么，我一周前才开始使用它。

我想知道的是，从更有经验的 AS 程序员的角度来看，我的尝试是否可以接受。Flash 编码练习真的很糟糕吗？闪存是否处理垃圾收集？我应该密切关注`new Loader()`那些我忽略的电话吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-23T13:23:28.103

首先将 loader 作为类的字段并重用它。然后添加错误监听器：

```
addEventListener(IOErrorEvent.IO_ERROR, ioErrorHandler); 
```

您还应该检查输入数据：

```
public function addImage(fname:String):void {
    if(fname && fname != "") array.push(fname);     
} 
```

加载所有图像后，您应该“重置”您的加载程序：

```
array = []; 
```

如果您检查加载程序的状态以防止不可预知的情况，那就更好了：

```
public function beginLoad():void {
   if(state == ALREADY_LOADING) return;
   count = 0;
   loadImages(count);
} 
```

ps 不可变字段，例如`loader, map, array`mark const。这没有错，但其他开发人员会知道这些字段是不可变的。

# android - Android 模拟器：软输入和硬键盘输入

> ID：11612803
> 
> 赞同：7
> 
> 时间：2012-07-23T12:44:22.140
> 
> 标签：android, android-layout, android-emulator

我想在我的 android 虚拟设备中同时启用软输入和硬键盘。我知道如何拥有但不拥有**BOTH**。

**同时想要两者**的原因：

*   软输入：预览当屏幕被键盘缩小时布局如何调整大小

*   硬键盘：显然是快速输入。

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-23T12:48:12.697

转到您的 AVD 管理器选项卡，然后选择适当的 AVD，然后在单击新按钮时参考“硬件菜单”并选择键盘支持选项以启用硬件键盘。

希望这对你有帮助。

雅什。

# sql - 制作派生表时是否存在与子查询相关性等价的东西？

> ID：11612807
> 
> 赞同：0
> 
> 时间：2012-07-23T12:44:41.157
> 
> 标签：sql, sybase, derived-table

我需要在一个垂直表中展平 2 行（然后加入第三个表），我通常通过为我需要的每个字段制作一个派生表来做到这一点。只有两个字段，我认为这并没有那么不合理。

但我知道我想要在派生表中返回的行是我与第三个表连接的子集。所以我试图找出最好的派生表，以便查询最有效地运行。

我认为派生表的 where 子句越严格，派生表越小，得到的响应就越好。

我真正想要的是将派生表的 where 子句与第三个表的连接相关联，但你不能在 sql 中这样做，这太糟糕了。但是我不是sql大师，也许有一些我不知道的技巧。

另一种选择是制作没有 where 子句的派生表，它最终会加入整个表两次（每个字段一次），当我对它们进行加入时，加入会过滤掉所有内容。

所以我真正要问的是什么是制作派生表的最佳方法，我非常清楚我想要什么行，但 sql 不会让我得到它们。

一个例子：

```
table1
------

id  tag     value
--  -----   -----
1   first   john
1   last    smith
2   first   sally
2   last    smithers

table2
------

id     occupation
--     ----------
1      carpenter
2      homemaker

select table2.occupation, firsttable.first, lasttable.last from
table2, (select value as first from table1 where tag = 'first') firsttable,
(select value as last from table1 where tag = 'last') lasttable
where table2.id = firsttable.id and table2.id = lasttable.id 
```

我想要做的是制作 firsttable where 子句 where tag='first' and id = table2.id

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-23T13:45:37.733

DERIVED 表不会像您期望的那样存储中间结果。这些只是使代码更简单的一种方法。使用派生表并不意味着派生表表达式将首先执行，其输出将用于与剩余的表连接。在大多数情况下，优化器会自动取消派生表。

但是，在某些情况下，优化器可能希望存储子查询的结果，从而实现材料化而不是展平。这通常发生在您有某种聚合函数或类似的情况时。但在您的情况下，查询过于简单，因此优化器将展平查询

此外，存储派生表表达式不会使您的查询变得更快，反而会使情况变得更糟。您真正的问题是规范化过多。修复该查询只是两个表的连接。

为什么要进行这种规范化？为什么要将 col 值存储为行。尝试对 table1 进行非规范化，使其具有第一和最后两列。这将是最好的解决方案。

另外，您在 id 和 tag 列上有适当的索引吗？如果是，那么合并连接非常适合您的查询。

请提供这些表的索引详细信息以及您的查询生成的计划。

您的查询将像内部联接查询一样使用。

```
select table2.occupation, first.valkue as first, last.value as last 
from 
table2
inner join table1  first 
on first.tag = 'first'
and first.id =table2.id
inner join table1 last
on last.tag = 'last'
and table2.id = last.id 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-23T12:46:14.040

我想你要的是一个`COMMON TABLE EXPRESSION`. 如果您的平台没有实现它们，那么临时表可能是最好的选择。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-23T13:09:56.063

我有点困惑。您的查询看起来不错。. . 尽管使用正确的连接语法看起来更好。

```
select table2.occupation, firsttable.first, lasttable.last
from table2 join
       (select value as first from table1 where tag = 'first') firsttable
       on table2.id = firsttable.id join
       (select value as last from table1 where tag = 'last') lasttable
       on table2.id = lasttable.id 
```

此查询执行您要求它执行的操作。SQL 是一种声明性语言，而不是过程性语言。这意味着您描述结果集并依赖数据库 SQL 编译器将其转换为正确的命令集。（也就是说，有时查询的结构确实会使某些引擎更容易或更难生成有效的查询计划。）

# jakarta-ee - Java EE CDI 中的@Specializes 和 JNDI

> ID：11612816
> 
> 赞同：1
> 
> 时间：2012-07-23T12:45:17.177
> 
> 标签：jakarta-ee, java-ee-6, jndi, cdi

在 Java EE 6.0 项目中，我们有很多 bean 在测试中。为了获得一些额外的信息并放置额外的测试探针，我们使用了 CDI 的 @Specializes 注释，它工作得很好。带有 @Specializes 注释的 bean 替换了它们的父类 bean。

例如，我们有两个 bean：

```
@Stateless    
public class Bean extends ... {}

@Specializes
public class BeanMock extends Bean {} 
```

对于正常注射，这非常有效。一个

```
@Inject
private Bean bean; 
```

给 bean 带来了 BeanMock。

在一个测试中，我们通过 JNDI 访问一个名为“Bean”的 bean。这个测试带来了异常：

```
14:29:07,867 ERROR [fail] (MSC service thread 1-3) MSC00001: Failed to start service jboss.deployment.unit."XXX.ear".WeldService: org.jboss.msc.service.StartException in service jboss.deployment.unit."XXX.ear".WeldService: org.jboss.weld.exceptions.DefinitionException: WELD-000047 Specializing bean must extend another bean:  Managed Bean [class xxx.BeanMock] with qualifiers [@Any @Default]
    at org.jboss.as.weld.services.WeldService.start(WeldService.java:83)
    at org.jboss.msc.service.ServiceControllerImpl$StartTask.startService(ServiceControllerImpl.java:1811) [jboss-msc-1.0.2.GA.jar:1.0.2.GA]
    at org.jboss.msc.service.ServiceControllerImpl$StartTask.run(ServiceControllerImpl.java:1746) [jboss-msc-1.0.2.GA.jar:1.0.2.GA]
    at java.util.concurrent.ThreadPoolExecutor$Worker.runTask(ThreadPoolExecutor.java:886) [rt.jar:1.6.0_31]
    at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:908) [rt.jar:1.6.0_31]
    at java.lang.Thread.run(Thread.java:662) [rt.jar:1.6.0_31]
Caused by: org.jboss.weld.exceptions.DefinitionException: WELD-000047 Specializing bean must extend another bean:  Managed Bean [class xxx.BeanMock] with qualifiers [@Any @Default]
    at org.jboss.weld.bean.ManagedBean.preSpecialize(ManagedBean.java:449)
    at org.jboss.weld.bean.AbstractBean.initialize(AbstractBean.java:121)
    at org.jboss.weld.bean.AbstractClassBean.initialize(AbstractClassBean.java:196)
    at org.jboss.weld.bean.ManagedBean.initialize(ManagedBean.java:322)
    at org.jboss.weld.bootstrap.AbstractBeanDeployer.deploy(AbstractBeanDeployer.java:115)
    at org.jboss.weld.bootstrap.BeanDeployment.deployBeans(BeanDeployment.java:204)
    at org.jboss.weld.bootstrap.WeldBootstrap.deployBeans(WeldBootstrap.java:344)
    at org.jboss.as.weld.WeldContainer.start(WeldContainer.java:82)
    at org.jboss.as.weld.services.WeldService.start(WeldService.java:76)
    ... 5 more 
```

如果可能的话，我想通过 JNDI 获得“BeanMock”。;-)

在这种情况下定义的行为是什么。我已经查看了 JSR299，但没有发现 @Specializes bean 通过 JNDI 会发生什么。他们也被取代了吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-06T16:52:58.503

我会尝试使用 CDI 范围（应用程序、会话、请求）之一来确定您的 ejb 的范围，或者至少添加 @Named 注释，以查看它是否会被视为 CDI bean。

# php - Codeigniter 中特定页面的自定义错误处理

> ID：11612818
> 
> 赞同：0
> 
> 时间：2012-07-23T12:45:20.867
> 
> 标签：php, codeigniter

如果我们将 ENVIRONMENT 设置为“development”，则会显示错误，但 testing 和 live 会隐藏它们。如果我们设置为“生产”将显示空白的白页。

如果我们将 ENVIRONMENT 设置为“生产”，如何使自定义页面没有白页？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-23T14:12:59.170

您需要扩展 Codeigniters 默认错误处理方法以引发异常。

[CodeIgniter 中带有模板的自定义错误页面](https://stackoverflow.com/questions/7644248/custom-error-pages-with-templates-in-codeigniter)

但是，这不会覆盖 PHP 错误。为此，您需要修改代码以检测错误并相应地重定向..

[PHP自定义错误页面](https://stackoverflow.com/questions/5033436/php-custom-error-page)

# java - 将字节数组转换为base64字符串java

> ID：11612823
> 
> 赞同：8
> 
> 时间：2012-07-23T12:45:57.567
> 
> 标签：java, base64, apache-commons

尝试`byte[]`使用 .. 将 a 转换为 base64 字符串 `org.apache.commons.codec.binary.Base64`。为此，我的 java 代码如下所示：

```
 base64String = Base64.encodeBase64URLSafeString(myByteArray); 
```

但我看到的是生成的`base64`字符串中有一些无效字符..![截屏](../Images/a0960aa4f05db22af21063fca76e9231.png)

为什么我在生成的字符串`____`中看到这些行？`base64`它是一个有效的字符串吗？请注意，生成的字符串的长度可以被 4 整除。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2014-03-10T14:12:17.600

您是否尝试过使用该`encodeBase64String`方法而不是使用`encodeBase64URLSafeString`？

encodeBase64URLSafeString：

> 使用 base64 算法的 URL 安全变体对二进制数据进行编码，但不分块输出。url-safe 变体发出 - 和 _ 而不是 + 和 / 字符。

encodeBase64String：

> 使用 base64 算法对二进制数据进行编码，但不对输出进行分块。注意：我们将此方法的行为从多行分块 (commons-codec-1.4) 更改为单行非分块 (commons-codec-1.5)。

来源：[org.apache.commons.codec.binary.Base64 javadoc](http://commons.apache.org/proper/commons-codec/apidocs/org/apache/commons/codec/binary/Base64.html#encodeBase64URLSafeString%28byte%5B%5D%29)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2016-04-01T17:24:58.227

利用

```
String sCert = javax.xml.bind.DatatypeConverter.printBase64Binary(pk); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-23T12:52:12.570

这可能会有所帮助

```
sun.misc.BASE64Encoder encoder = new sun.misc.BASE64Encoder();
encoder.encode(byteArray); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-23T12:52:49.280

你有（至少）两种风格的 base64，除了字母数字字符之外，原始的一种使用 '+' 和 '/'，而“url 安全”的一种，使用“-”和“_”，以便内容可以包含在 URL 中（或用作文件名，顺便说一句）。

看起来您正在使用已转换为“url 安全模式”的 base64 编码器。

[apache 的 URLSafeString() 的 javadoc](http://commons.apache.org/codec/apidocs/org/apache/commons/codec/binary/Base64.html#encodeBase64URLSafeString%28byte%5B%5D%29)

哦，`'_'`作为 base64 字母表的最后一个字符，看到字符串`"____"`意味着你一直在编码 0xffffff ... 的块，就像看到“AAAAAA”意味着有很多连续的零一样。

如果您想确信这是正常情况，只需选择您最喜欢的十六进制转储器/编辑器并检查您的二进制输入的样子。

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2012-07-23T12:53:20.417

通过以下过程，您可以将字节数组转换为 Base64

```
 // Convert a byte array to base64 string
    byte[] bytearray= new byte[]{0x12, 0x23};
    String s = new sun.misc.BASE64Encoder().encode(bytearray);

    // Convert base64 string to a byte array
    bytearray = new sun.misc.BASE64Decoder().decodeBuffer(s); 
```

***编辑：***

请查看以下链接[commons apache的指南](http://commons.apache.org/codec/api-release/index.html)

# iphone - 在 iPhone 应用程序中管理下载的内容

> ID：11612828
> 
> 赞同：0
> 
> 时间：2012-07-23T12:46:44.167
> 
> 标签：iphone, sqlite, filesystems

我正在编写一个 iPhone 应用程序，它将从我的服务器下载文章（UTF8 文本文件）。然后应用程序应该生成文件名列表。单击文件名后，将显示文件内容。它与电子邮件程序或 RSS 阅读器非常相似。

我的问题是，在设备上保存/检索内容的最佳方式是什么？一种选择是将其全部放入 sqlite 数据库中。另一种选择可能是下载内容并将其保存在新文件中。还有其他解决方案吗？

这些方法有什么优点/缺点？

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-23T14:52:34.627

对于简单结构中的一些相当少量的数据，您可以将其存储在 NSMutableDictionary 中，并使用其方法将内容写入文件和从文件中读取。

您的数据结构似乎很简单。如果数据量足够小，我不能说。如果您的列表可能会变得无穷无尽，那么您应该选择 sqlite 或核心数据，而不是简单的字典。字典将完全存储在 RAM 中。使用 sqlite 矿石核心数据，您可以通过加载当前显示的更多记录来更有效地利用 RAM。

# mysql - 查询在本地工作而不是在线

> ID：11612829
> 
> 赞同：0
> 
> 时间：2012-07-23T12:46:53.407
> 
> 标签：mysql, phpmyadmin

我有这个简单的查询，当我在本地尝试但不是在线时有效，可能有一些版本差异？

```
UPDATE wp_posts SET post_content = 'blah blah' WHERE post_type = 'product' 
```

此查询在本地工作，但在线我收到此错误：

> 1064 - 您的 SQL 语法有错误；检查与您的 MySQL 服务器版本相对应的手册，以在第 1 行的 '\'blah blah' 附近使用正确的语法

服务器信息 phpmyadmin, php 版本好像是5.5 参考这个手册

[http://dev.mysql.com/doc/refman/5.5/en/index.html](http://dev.mysql.com/doc/refman/5.5/en/index.html)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-23T13:56:32.593

尝试这个

```
UPDATE `databaseName`.`wp_posts` SET `post_content` = 'blah blah' WHERE `wp_posts`.`post_type` = 'product'; 
```

# ios - IOS：OpenGL + UIScrollView + UILabel：iPad 3 vs 2 性能不佳

> ID：11612830
> 
> 赞同：0
> 
> 时间：2012-07-23T12:47:01.053
> 
> 标签：ios, ipad, opengl-es, uiscrollview, uilabel

我有一个 OpenGL 菜单，它使用滚动视图来移动项目。还有与它们一起移动的 UILabel。

这在 iPad 2 上完美运行，在 iPad 1 上有点慢，但我可以接受。

在 ipad3 上，情况更糟。似乎滚动视图移动几个视图只是用 OpenGL 杀死它。

我看到人们提出了一些建议，所以在我放入滚动视图（包括滚动视图）的每个视图中，我都这样做了

```
// Performance!
    self.titleLabel.opaque = YES;
    self.titleLabel.clipsToBounds = NO;
    self.titleLabel.layer.masksToBounds = NO;
    self.titleLabel.autoresizesSubviews = NO;
    self.titleLabel.layer.shouldRasterize = YES;
    self.titleLabel.layer.rasterizationScale = [UIScreen mainScreen].scale; 
```

我是否遗漏了什么，我想不出任何可以提高 OpenGL 性能的东西。我可以尝试在项目离开屏幕时隐藏它们，但只有 1 或 2 个项目离开屏幕

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-23T13:26:33.700

iPad 3 上的视网膜显示屏的像素是 iPad 2 的四倍，但它的 GPU 处理能力却没有四倍。我一直被在 iPad 2 上运行良好但在 iPad 3 上太慢的东西所困扰。在我的客户的员工开始使用 iPad 3 之前，我有一个发货的 iPad 应用程序（企业发行版）运行良好。然后他们注意到该应用程序在某些区域太慢了。我不得不回去，分析我在应用程序中所做的工作以找出瓶颈，然后重新设计应用程序以避免该问题。事实证明这是一个简单的修复。每次更新屏幕时，我都会绘制大量模糊的像素。当我进行优化以在每次更新时绘制更少的屏幕区域时，该应用程序在 iPad 3 上的速度已经足够快了。

从您的问题中包含的信息中，我看不到您的问题的最终解决方案。我所能提供的就是你优化你的OpenGL代码。最新版本的 Xcode 有一些用于优化 OpenGL 的出色工具，但是解释如何使用它们对于这个答案来说太大了。Apple 在 WWDC 上提供了一些关于 OpenGL 优化技术的精彩视频，[在其开发者网站上提供了 Tech Talk 视频集。](https://developer.apple.com/videos/)

# c# - Selenium WebDriver with C# using NUnit：在单台机器上并行执行多个浏览器上的测试用例

> ID：11612836
> 
> 赞同：1
> 
> 时间：2012-07-23T12:47:35.373
> 
> 标签：c#, visual-studio-2010, selenium, webdriver, nunit

我是 Selenium 测试的新手。我想在一台机器上的不同浏览器上运行我的多个测试用例。

我有安装了 Visual Studio 2010 的 Windows 7 操作系统。我正在使用 Selenium IDE + WebDriver + NUnit。

我想在单台机器上的不同浏览器上并行运行我的测试用例。

假设我有 T1、T2 和 T3 测试用例，记录在 Selenium IDE 中，并在我的机器上安装了 IE 8、FireFox 和 Chrome 浏览器。我想在 IE 8、FireFox 和 Chrome 浏览器上同时并行运行 T1 >>。

请告诉我

**我需要安装/配置什么软件才能实现** 以及如何做到这一点。

由于我是 Selenium 以及开源测试世界的新手，因此配置的逐步详细信息将真正帮助我。

感谢您的快速回复。

谢谢，阿杰恩

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2016-01-05T21:31:39.583

Selenium Packages 需要安装在您使用的任何技术中，例如 C#/Java/Delphi

```
Install-Package Selenium.WebDriver
Install-Package WebDriverChromeDriver
Install-Package NUnitTestAdapter.WithFramework 
Install-Package WebDriver.IEDriver
Install-Package Selenium.Support 
```

安装 nunit 点击[下载](http://github.com/nunit/nunitv2/releases/download/2.6.4/NUnit-2.6.4.msi)

让我知道是否需要任何其他指导

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-02-16T09:00:04.890

您可能想尝试 BrowserStack - [http://browserstack.com/](http://browserstack.com/)

# android - GLSurfaceView 生命周期方法 onPause() 和 onResume()

> ID：11612839
> 
> 赞同：5
> 
> 时间：2012-07-23T12:47:51.777
> 
> 标签：android, opengl-es, glsurfaceview

我正在尝试在我的应用程序中正确使用 OpenGL，但在使用 Lifecycle Methods:`onPause()`和`onResume()`.

该[文档](http://developer.android.com/reference/android/opengl/GLSurfaceView.html)指出：

> 活动生命周期
> 
> 当活动暂停和恢复时，必须通知 GLSurfaceView。GLSurfaceView 客户端需要在活动暂停时调用 onPause() 并在活动恢复时调用 onResume()。这些调用允许 GLSurfaceView 暂停和恢复渲染线程，还允许 GLSurfaceView 释放和重新创建 OpenGL 显示。

首先，在整个 Android 的其余部分，我对系统调用的生命周期事件（活动/片段）感到有些`onPause()`困惑`onResume()`。在这里，从描述（包括[onPause()](http://developer.android.com/reference/android/opengl/GLSurfaceView.html#onPause())和[onResume()](http://developer.android.com/reference/android/opengl/GLSurfaceView.html#onResume())中的详细描述）看来，它们似乎必须由开发人员手动调用。

我一直在使用`GLSurfaceView` **，没有**打电话`onPause()`，`onResume()`也没有发现问题。但是，为了打球（并减少可能在恢复活动时出现奇怪行为的嫌疑人），我正在尝试按照文档中的说明添加它们。

然而，似乎使用 onResume() 会导致 a`NullPointerException`被抛出：

```
07-23 13:20:08.570: E/AndroidRuntime(20777): Caused by: java.lang.NullPointerException
07-23 13:20:08.570: E/AndroidRuntime(20777):    at android.opengl.GLSurfaceView.onResume(GLSurfaceView.java:544)
07-23 13:20:08.570: E/AndroidRuntime(20777):    at com.ActivityNameHere.onResume(ActivityNameHere.java:151) 
```

我是否缺少注册的`Activity`步骤`View`？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-23T14:06:07.263

`onPause()`并且`onResume()`仍在破坏我的实现 - 但公平地说，他们不再在崩溃时这样做：

[文档：](http://developer.android.com/reference/android/opengl/GLSurfaceView.html#setRenderer%28android.opengl.GLSurfaceView.Renderer%29)

> ```
> The following GLSurfaceView methods can only be called after setRenderer is called:
> 
> getRenderMode()
> onPause()
> onResume()
> queueEvent(Runnable)
> requestRender()
> setRenderMode(int) 
> ```

在某些情况下，我**没有**`setRenderer()`在我之前打电话。`Activity.onResume()`

# ruby - ruby 字符串数组迭代。数组数组

> ID：11612844
> 
> 赞同：1
> 
> 时间：2012-07-23T12:48:10.147
> 
> 标签：ruby, arrays, multidimensional-array, loops

我有一个红宝石问题

这就是我想要做的

```
def iterate1               #define method in given class
 @var3 = @var2.split(" ")  #split string to array
 @var4 = @var3

 @var4.each do |i|         #for each array item do i
   ra = []
   i.each_char {|d|  ra << counter1(d)}  # for each char in i, apply def counter1

   @sum = ra.inject(:+)                  

   @sum2 = @sum.inject(:+)               #have to do the inject twice to get values

 end

@sum2 
```

我知道我已经把这复杂化了

基本上输入是一串字母和值，例如“14556 this word 398”

我正在尝试对每个值中的数字求和，由空格分隔，例如 (" ")

当我使用 def iterate1 方法时，块调用 counter1 方法就好了，但我只能获取字符串中最后一个单词或值的值。

在本例中为 398，加起来为 27。

如果我包含一个中断，我会得到第一个值，即 21。

我正在寻找一个包含所有求和值的数组

任何帮助将不胜感激

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-23T12:52:01.253

我想你在追求：

```
"10 d 20 c".scan(/\b\d+\b/).map(&:to_i).inject(:+) # Returns 30 
```

`scan(/\b\d+\b/)`将提取仅由数组中的数字组成的所有数字，`map(&:to_i)`将它们转换为整数，我猜你已经知道该怎么`inject(:+)`做了。

不过，我不确定我是否正确理解了您所追求的内容，因此如果您提供您对此输入的期望答案可能会有所帮助。

编辑：

如果你想对每个数字中的数字求和，你可以这样做：

```
"12 d 34 c".scan(/\b\d+\b/).map { |x| x.chars.map(&:to_i).inject(:+) } 
```

`x.chars`将返回数字的枚举器，`map(&:to_i)`将它们转换为整数并将它们`inject(:+)`相加。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-24T05:01:54.503

最简单的答案是使用`map`而不是`each`因为前者收集结果并返回一个数组。例如：

```
def iterate1               #define method in given class
 @var3 = @var2.split(" ")  #split string to array
 @var4 = @var3

 @var4.map do |i|         #for each array item do i
   ra = []
   i.each_char {|d|  ra << counter1(d)}  # for each char in i, apply def counter1

   @sum = ra.inject(:+)                  
   @sum2 = @sum.inject(:+)               #have to do the inject twice to get values
 end
end 
```

不过你可以写得更干净，我认为 Stefan 帮了大忙。你可以通过稍微修改他的代码来解决这个问题

```
# when you call iterate, you should pass in the value
# even if you have an instance variable available (e.g. @var2)
def iterate(thing)
  thing.scan(/\b\d+\b/).map do |x| 
    x.chars.map{|d| counter1(d)}.inject(:+)
  end
end 
```

以上假设该`counter1`方法将值作为整数返回

# jsf - 行选择侦听器不会在 Primefaces 表中触发

> ID：11612847
> 
> 赞同：1
> 
> 时间：2012-07-23T12:48:25.733
> 
> 标签：jsf, primefaces

使用下一个表时，当我单击复选框选择一行时，我无法触发侦听器。有人知道我做错了什么吗？

谢谢！

```
<p:dataTable
    var="department" value="#{departmentCtrl.departmentTable}"
    selection="#{departmentCtrl.departmentList}">

    <p:ajax event="rowSelectCheckbox" listener="#{departmentCtrl.departmentSelected}" />    

    <p:column selectionMode="multiple" /> 

    <p:column headerText="#{msgs.id}">
        <h:outputText value="#{department.id}" />
    </p:column>

    <p:column headerText="#{msgs.name}">
        <h:outputText value="#{department.name}" />
    </p:column>
</p:dataTable>

public void departmentSelected(SelectEvent event) {
    //This method never executes ¿?
} 
```

我想做与基于复选框的选择示例（http://www.primefaces.org/showcase-labs/ui/datatableRowSelectionRadioCheckbox.jsf）中相同的操作；但使用文档中所述的 rowSelectCheckbox 和 rowUnselectcheckbox 事件（Primefaces USER'S GUIDE v3.3 的第 141 页）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-24T11:08:50.933

[解决了]

在管理 bean 中，我从以下位置更改：

**列出部门列表；**

至

**部门[]部门列表；**

# ibm-mq - 如何从 WMQ 解决此通道问题？

> ID：11612853
> 
> 赞同：4
> 
> 时间：2012-07-23T12:49:17.550
> 
> 标签：ibm-mq, mq, connection-reset

以下是 QMGR 日志文件中有关 WMQ 通道问题的相关部分：

```
-------------------------------------------------------------------------------
2012-7-23 10:35:25 - Process(340.1) User(MUSR_MQADMIN) Program(runmqchl.exe)
AMQ9206:  Error sending data to host 86.0.223.5(1602) 。

EXPLANATION:
An error occurred sending data over TCP/IP to 86.0.223.5(1602). This may be due to
a communications failure.
ACTION:
The return code from the TCP/IP(send) call was 10054 X('2746'). Record these
values and tell your systems administrator.  
----- amqccita.c : 2612 -------------------------------------------------------
2012-7-23 10:35:25 - Process(340.1) User(MUSR_MQADMIN) Program(runmqchl.exe)
AMQ9999: Channel program ended abnormally. 

EXPLANATION: 
Channel program 'CZWJNS.CZWJCZ' ended abnormally. 
ACTION: 
Look at previous error messages for channel program 'CZWJNS.CZWJCZ' in the 
error files to determine the cause of the failure.  
----- amqrccca.c : 834 --------------------------------------------------------
2012-7-23 10:35:35 - Process(3616.1) User(MUSR_MQADMIN) Program(runmqchl.exe)
AMQ9002: Channel “CZWJNS.CZWJCZ' is starting。

EXPLANATION：
Channel “CZWJNS.CZWJCZ' is starting。
ACTION：
None。 
-------------------------------------------------------------------------------
2012-7-23 10:40:35 - Process(3616.1) User(MUSR_MQADMIN) Program(runmqchl.exe)
AMQ9206:  Error sending data to host 86.0.223.5(1602) 。

EXPLANATION:
An error occurred sending data over TCP/IP to 86.0.223.5(1602). This may be due to
a communications failure.
ACTION:
The return code from the TCP/IP(send) call was 10054 X('2746'). Record these
values and tell your systems administrator.   
----- amqccita.c : 2612 -------------------------------------------------------
2012-7-23 10:40:35 - Process(3616.1) User(MUSR_MQADMIN) Program(runmqchl.exe)
AMQ9999: Channel program ended abnormally. 

EXPLANATION: 
Channel program 'CZWJNS.CZWJCZ' ended abnormally. 
ACTION: 
Look at previous error messages for channel program 'CZWJNS.CZWJCZ' in the 
error files to determine the cause of the failure.  
----- amqrccca.c : 834 --------------------------------------------------------
2012-7-23 10:40:45 - Process(4848.1) User(MUSR_MQADMIN) Program(runmqchl.exe)
AMQ9002: Channel “CZWJNS.CZWJCZ' is starting。

EXPLANATION：
Channel “CZWJNS.CZWJCZ' is starting。
ACTION：
None。
------------------------------------------------------------------------------- 
```

现在的情况是目标通道（`CZWJNS.CZWJCZ`）终于可以运行了，但要经过几次重试。它经常发生。所有消息都可以成功传递到远程 QMGR 主机中的目标队列。但是，由于多次重试尝试，它们总是被延迟。

我在互联网上搜索了返回码`10054`，这意味着连接已被对等方重置。

我的 WMQ 版本是 Windows 2003 上的 6.0.10。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-23T12:59:13.640

“对等节点重置连接”意味着该节点和另一个节点之间的某些东西关闭了连接。原因可能包括不可靠/嘈杂的网络、防火墙超时、拒绝连接的通道出口或许多其他原因。

在这些情况下，诊断的关键是缩小病因。这需要查看 QMgr（或客户端和 QMgr）上同一事件的错误日志。在通道出口的情况下，查看两侧的通道定义可以揭示是否存在这样的出口，但如果是，那么您还需要查看出口的配置和日志。

如果问题出在网络中，来自两个 QMgrs 的错误日志将显示类似的错误。但是，如果一个 QMgr 有意关闭了连接，那么您将在其日志文件中看到这一点。

# http - HTTP/HTTPS 基本认证：用户名中的冒号

> ID：11612854
> 
> 赞同：31
> 
> 时间：2012-07-23T12:49:20.170
> 
> 标签：http, https

这可能是一个基本问题，但是当有 HTTP 或 HTTPS 基本身份验证时，用户名中是否可以有冒号（“：”）？如果没有，有没有办法可以逃脱冒号？

* * *

## 回答 #1

> 赞同：36
> 
> 时间：2015-10-28T12:25:12.557

RFC [https://www.rfc-editor.org/rfc/rfc2617#section-2](https://www.rfc-editor.org/rfc/rfc2617#section-2) 明确指出用户名不得包含冒号：

> 为了接收授权，客户端在凭证中的 base64 [7] 编码字符串中发送用户 ID 和密码，由单个冒号 (":") 字符分隔。`
> 
> 基本凭证 = base64 用户通行证
> 
> `base64-user-pass = <base64 [4] encoding of user-pass, except not limited to 76 char/line>`
> 
> `user-pass = userid ":" password`
> 
> `userid = * <TEXT excluding ":">`
> 
> `password = *TEXT`

基于此，无法在用户名中使用冒号。

* * *

## 回答 #2

> 赞同：17
> 
> 时间：2012-07-23T12:53:40.200

查看 RFC - [https://www.rfc-editor.org/rfc/rfc2617#section-2](https://www.rfc-editor.org/rfc/rfc2617#section-2)和网络，似乎没有用户名中的冒号转义技术。您唯一可以拥有的额外位置是在密码字段中。

如果这是一个选项，您也许可以在身份验证级别用 @ 替换 : 并要求用户这样做。

# windows-phone-7 - 列表框内的复选框未触发 WP7 中的 selectionchanged 事件

> ID：11612855
> 
> 赞同：0
> 
> 时间：2012-07-23T12:49:20.397
> 
> 标签：windows-phone-7

我有列表框，里面有复选框，在复选框中有一个文本框。ListBox 的 ItemSource 绑定在 View Model 中。我正在尝试调用 selectionchanged 事件，但它没有触发。

因此，我采用了 ManipulationCompleted 事件，该事件在我选中复选框时触发。但我没有在这次活动中选择项目。但奇怪的是，如果我在列表框中的复选框内使用文本框，则不会触发 selectionchanged 事件。你能帮我解释一下为什么它不起作用。下面是相同的 XAML。

```
<ListBox x:Name="allcontacts" HorizontalAlignment="Stretch"
                                     Margin="0,5,-12,0"  Width="800" Grid.Row="1" 
                                     SelectionChanged="allcontacts_SelectionChanged"                                     
                                     ItemsSource="{Binding ContactsList,Mode=TwoWay}"
                                     ManipulationCompleted="contacts_ManipulationCompleted">
                                        <ListBox.ItemTemplate>
                                            <DataTemplate>
                                                <StackPanel Orientation="Horizontal">
                                                    <CheckBox x:Name="chkGroup" 
                                          IsChecked="{Binding IsChecked,Mode=TwoWay}"
                                          VerticalAlignment="Top">
                                                        <StackPanel Orientation="Horizontal">
                                                            <Image x:Name="imgFriend" 
                                                        Source="{Binding ImageUri}" 
                                                        Height="30" 
                                                        Width="30"
                                                        Margin="0 0 0 0"/>
                                                            <TextBlock x:Name="txtfrdName" 
                                                        Text="{Binding Name,Mode=TwoWay}"/>
                                                        </StackPanel>
                                                    </CheckBox>
                                                </StackPanel>
                                            </DataTemplate>
                                        </ListBox.ItemTemplate>
                                    </ListBox> 
```

ContactsList 是 Friend 类的可观察集合，friend 类包含绑定到 CheckBox 和 Textbox 的 IsChecked 和 Name 属性。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-23T13:01:12.553

您应该订阅 Checkbox 元素的`Checked`and`Unchecked`事件，而不是 ListBox 的 SelectionChanged：

```
<CheckBox x:Name="chkGroup" 
    IsChecked="{Binding IsChecked,Mode=TwoWay}"
    Checked="HandleCheck" 
    Unchecked="HandleUnchecked"
    VerticalAlignment="Top"> 
```

然后在代码隐藏中：

```
private void HandleCheck(object sender, RoutedEventArgs e)
{
    CheckBox cb = sender as CheckBox;
    if (cb != null)
    {
        var selectedItem = cb.DataContext;
        // do your stuff
    }
} 
```

此处的更多信息：[如何：处理 CheckBox 控件的选中事件](http://msdn.microsoft.com/en-us/library/cc221404%28v=vs.95%29.aspx)

# node.js - node.js mocha 测试请求

> ID：11612856
> 
> 赞同：3
> 
> 时间：2012-07-23T12:49:21.957
> 
> 标签：node.js, testing, tdd, express, mocha.js

我正在使用 mocha.js 和 supertest.js 在 express.js 上测试我的 json 服务器的请求。这些是我的进口：

```
request = require('supertest')
assert  = require('assert')  # Node assert
app     = require('../app')  # Vanilla express app 
```

这是我在快递应用程序中的请求实现：

```
app.get '/user/:id', (req, res) ->
  res.json {} 
```

这是我的测试：

```
describe 'GET /user/:id', ->
  it 'should return the user data if user found', (done) ->
  request(app)
    .get("/user/some_id")
    .end((err, res) ->
      assert.equal('test', 'test')
      done()
    ) 
```

这可行，但如果我将请求更改为：

```
app.get '/user/:id', (req, res) ->
  User.findById req.param('id'), (err, doc) ->
    res.json {} 
```

摩卡咖啡测试超时。我猜这与 find 是异步的并且测试不等待它完成这一事实有关。我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-19T19:27:14.893

尝试增加超时：

```
mocha --timeout 5000 
```

默认值为 2000 毫秒，可能太短。从[文档](http://visionmedia.github.com/mocha/)中。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-23T14:28:13.220

切换到[https://github.com/mikeal/request/](https://github.com/mikeal/request/)解决了它。我现在在做

这是我现在的测试：

```
describe 'GET /user/:id', ->
  it 'should return the user data if user found', (done) ->
    request.get(
      'http://localhost:31000/user/500d365abb75e67d0c000006'  
      , (err, res, body) ->
        json = JSON.parse body
        assert.equal(res.statusCode, 200)
        assert.equal(json._id, '500d365abb75e67d0c000006')
        done()
    ) 
```

现在一切都按预期工作，但我仍然想知道是否可以为此使用 supertest 或 vows。

# git - 当我尝试上传新的变更集时，“解决增量”永远不会结束

> ID：11612859
> 
> 赞同：2
> 
> 时间：2012-07-23T12:49:27.080
> 
> 标签：git, gerrit

当我尝试上传新的变更集时，“解决增量”阶段永远不会结束。gerrit 服务器上没有错误/sshd 日志。

```
xxx@power:~/src/bems_repo/src/bems$ repo upload bms/bms
Upload project src/bms/ to remote branch master:
  branch xxx_gerrit_error ( 2 commits, Mon Jul 23 21:34:19 2012 +0900):
         731ec772 fixture json modified
         3106afab xxx large fixtures
to xxx.com:8080 (y/N)? y
Counting objects: 124, done.
Delta compression using up to 8 threads.
Compressing objects: 100% (54/54), done.
Writing objects: 100% (70/70), 9.66 MiB | 723 KiB/s, done.
Total 70 (delta 59), reused 24 (delta 16)
remote: Resolving deltas:   3% (2/59)    <= stop at 3%. never ends. 
```

gerrit 服务器的最高状态如下

```
PID USER      PR  NI  VIRT  RES  SHR S %CPU %MEM    TIME+  COMMAND
2068 gerrit2   20   0 1240m 961m  11m S  200 31.9 131:32.33 java 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-28T09:59:25.220

获取 Java 线程转储并将其发布到[Gerrit 讨论组](http://groups.google.com/group/repo-discuss)。要进行线程转储，请找到 java 进程的 PID，然后执行“jstack $PID”

# java - HashMap 以非顺序返回值

> ID：11612860
> 
> 赞同：4
> 
> 时间：2012-07-23T12:49:34.050
> 
> 标签：java, map, hashmap

我在 HashMap 中插入了四个具有不同键的值。代码片段：

```
HashMap<Integer, String> choice = new HashMap<Integer, String>();

choice.put(1, "1917");
choice.put(2, "1791");
choice.put(3, "1902");
choice.put(4, "1997"); 
```

但是，当我打印该地图值时，它会返回如下结果：

> {4=1997, 1=1917, 2=1791, 3=1902}

如何按照我放置/插入的方式按顺序获取地图值？

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-07-23T12:55:47.727

您可以使用 a [`LinkedHashMap`instead](http://docs.oracle.com/javase/7/docs/api/java/util/LinkedHashMap.html)，这将保持插入顺序：

> 此实现与 HashMap 的不同之处在于它维护一个双向链表，该列表贯穿其所有条目。这个链表定义了迭代顺序，通常**是键插入映射的顺序（插入顺序）**。

您可以像这样修改您的代码：

```
Map<Integer, String> choice = new LinkedHashMap<Integer, String>();

//rest of the code is the same 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-23T13:02:38.293

LinkedHashMap，可以使用Map接口的Hash表和链表实现。

它保持使用双向链表插入值的相同顺序。

参考：[http ://docs.oracle.com/javase/1.4.2/docs/api/java/util/LinkedHashMap.html](http://docs.oracle.com/javase/1.4.2/docs/api/java/util/LinkedHashMap.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-23T12:57:15.903

[编辑] OP的要求对我来说并不完全清楚。OP 可能会问：“如何按插入顺序从地图中检索项目？” 如果这就是 OP 的意思，那么以下信息不是解决方案。

如果 OP 询问“如何从按键排序的哈希中检索项目？” 那么以下是正确的。获取散列/关联数组的排序键是一种常见操作。

* * *

答案可以在[如何在 Java 中按键对 Map 值进行排序](https://stackoverflow.com/questions/922528/how-to-sort-map-values-by-key-in-java)中找到：

```
List sortedKeys=new ArrayList(yourMap.keySet());
Collections.sort(sortedKeys); 
```

如果您关心密钥的存储和检索顺序，请考虑使用 a`TreeMap`代替。除非您有大量元素（数百万以上），否则性能差异可能不会很明显。

# z3 - 如何将z3表达式转换为中缀表达式？

> ID：11612862
> 
> 赞同：1
> 
> 时间：2012-07-23T12:49:43.603
> 
> 标签：z3

我想将 Z3 中的 boolExpression 翻译成中缀表示。例如，有一个 z3 表达式 (>= t 3)，我想获取中缀字符串“t>=3”，是否有任何现有的 Z3 api 可以在 C# 中实现它？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-23T15:00:06.800

不，官方 API 不支持以中缀表示法显示表达式。此功能可以在用于遍历表达式的 API 之上实现。Z3 Python API 实现了一个中缀打印机。实际上，它实现了两种：一种用于类似 Python 的语法，另一种用于类似 HTML 数学的语法。这些打印机的源代码包含在 Z3 发行版中。代码是用python编写的，但可以很容易地转换成任何编程语言。代码位于`python\z3printer.py`。

# c# - 有没有办法在 Silverlight 中下载没有 Webclient 的文件？

> ID：11612864
> 
> 赞同：0
> 
> 时间：2012-07-23T12:49:44.637
> 
> 标签：c#, silverlight, bytearray, webclient

我的情况是，我必须将一个文件下载到 Bytearray 并对该字节数组进行一些更改，同时我必须下载另一个大文件并将第一个文件与修改后的字节合并到其中，并且使用 MediaElement 播放。

使用 Webclient 我可以下载文件，但是当文件下载完成时，webclient 只能让我访问它的 dwonloaded bytearray。

有没有办法在 Silverlight 中下载文件并动态修改文件的字节数组。

我不能使用套接字，我只能从网络服务器下载文件。

感谢您的大师的任何帮助

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-23T13:43:03.847

我看不出 Webclient 有什么问题。

您应该将 WebClients 的结果复制到字节数组中。下载每个文件后，您可以合并这些字节数组。

```
byte[] bytes;
public void DownloadFile()
{
    WebClient webClient = new WebClient();
    webClient.OpenReadCompleted += (s, e) =>
       {
           Stream stream = e.Result;
           MemoryStream ms = new MemoryStream();
           stream.CopyTo(ms);
           bytes = ms.ToArray();
       };
    webClient.OpenReadAsync(new Uri("http://myurl.com/file.zip"), UriKind.Absolute);
} 
```

# java - Java字符串用空格填充

> ID：11612866
> 
> 赞同：4
> 
> 时间：2012-07-23T12:49:48.307
> 
> 标签：java, string, groovy

朋友们我在项目中要暗示一些东西，我发现了一些困难，如下：

```
String name1 = "Bharath"  // its length should be 12
String name2 = "Raju"     //  its length should be 8
String name3 = "Rohan"    //  its length should be 9
String name4 = "Sujeeth"   //  its length should be 12
String name5 = "Rahul"  //  its length should be 11  " Means all Strings with Variable length" 
```

我有字符串及其长度。我需要按以下格式获取输出。通过使用字符串连接和填充。我需要在 Groovy 中回答，即使 Java 也很好..

```
"Bharath     Raju    Rohan    Sujeeth     Rahul     " 
```

方法：

Bharath 向前 5 个黑色空间，因为 lenth 为 12 (7+5 = 12)，

Raju 向前 4 个黑色空间，因为 lenth 为 8 (4+4 = 8)，

Rohan 向前 4 个黑色空间，因为 lenth 是 9(5+4)，

Sujeeth 向前 5 个黑色空间，因为 lenth 为 12 (7+5)，

Rahul 向前 6 个黑色空间，长度为 11(5+6)，

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-07-23T12:55:01.587

你可以这样做：

```
// A list of names
def names = [ "Bharath", "Raju", "Rohan", "Sujeeth", "Rahul" ]

// A list of column widths:
def widths = [ 12, 8, 9, 12, 11 ]

String output = [names,widths].transpose().collect { name, width ->
  name.padRight( width )
}.join() 
```

这`output`等于：

```
'Bharath     Raju    Rohan    Sujeeth     Rahul      ' 
```

假设我理解这个问题......很难确定......

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-23T18:07:45.997

您可以使用`sprintf`添加到 Object 类中的 ，因此它始终可用：

```
def s = sprintf("%-12s %-8s %-9s %-12s %-11s", name1, name2, name3, name4, name5)

assert s == "Bharath      Raju     Rohan     Sujeeth      Rahul      " 
```

使用的格式字符串与`sprintf`用于类的格式字符串相同`Formatter`。有关更多信息，请参阅[格式字符串的 JDK 文档](http://docs.oracle.com/javase/6/docs/api/java/util/Formatter.html#syntax)。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-07-23T12:54:15.857

看看 Apache 的[StringUtils](http://commons.apache.org/lang/api-2.5/org/apache/commons/lang/StringUtils.html)。它有用空格填充的方法（左或右）。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-07-23T13:42:18.830

如前所述，您可以使用 String.format() 方法来实现您的目标。

例如 ：

```
 String[] strings = {
            "toto1",
            "toto22",
            "toto333",
            "toto",
            "totoaa",
            "totobbb",
            "totocccc",
    };
    String marker = "01234567890|";
    String output = "";
    for(String s : strings) {
        output += marker;
    }
    System.out.println(output);
    output = "";
    for(String s : strings) {
        output += String.format("%-12s", s);
    }
    System.out.println(output); 
```

这将输出带有 12 个字符的标记的第一行，然后输出带有预期字符串的第二行：

```
01234567890|01234567890|01234567890|01234567890|01234567890|01234567890|01234567890|
toto1       toto22      toto333     toto        totoaa      totobbb     totocccc 
```

# ajax - Grails RemoteLink 和 Cookie

> ID：11612867
> 
> 赞同：1
> 
> 时间：2012-07-23T12:49:56.027
> 
> 标签：ajax, grails, cookies

你好（对不起我的英语不好），

我有一个看起来很简单的问题：我想使用 remoteLink 设置一个 cookie 并使用 cookie 值作为响应。它效率不高，因为我必须在链接上单击两次才能获得正确的行为。我怀疑这是因为 cookie 值是在模板调用之后发送的。

这是我的 gsp ：

```
${agence.delegation}
<small>
    <g:if test="${cookie(name:'delegationId') == agence.id.toString()}">
        <g:remoteLink controller="docDelegationSite"
                      action="deleteDefaultAgency"
                      update="defautAgencyId"
                      params="${[delegationId: agence.id]}">
            Changer d'agence par défaut
        </g:remoteLink>
    </g:if>
    <g:else>
        <g:remoteLink controller="docDelegationSite"
                      action="defineDefaultAgency"
                      update="defautAgencyId"
                      params="${[delegationId: agence.id]}">
            Définir comme agence par défaut.
        </g:remoteLink>
    </g:else>
</small> 
```

这是我的控制器：

```
def defineDefaultAgency() {
    def agence = DocDelegationSite.read(params.delegationId)
    cookieService.setCookie(response, 'delegationId', params.delegationId)
    render template: '/docDelegationSite/delegationCookie',
        model: [agence: agence]
}

def deleteDefaultAgency() {
    def agence = DocDelegationSite.read(params.delegationId)
    cookieService.setCookie(response, 'delegationId', null)
    render template: '/docDelegationSite/delegationCookie',
        model: [agence: agence]
} 
```

那么，如何确保 cookie 的值在模板调用之前发送？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-24T08:00:30.430

cookie 可从下一个 http 请求中获得。我认为您还不清楚 cookie 的行为。看看[http cookie](http://en.wikipedia.org/wiki/HTTP_cookie)

# jquery - 仅当事件处理程序尚不存在时，如何才能绑定它？

> ID：11612874
> 
> 赞同：25
> 
> 时间：2012-07-23T12:50:14.110
> 
> 标签：jquery, event-handling, drag-and-drop

我有一个想要绑定拖放事件的页面。我希望浏览器中的整个页面成为放置目标，所以我将我的事件绑定到`document`对象。不过，我的应用程序的内容是通过 AJAX 加载到主内容区域的，我只希望这些事件处理程序在上传页面当前可见时处于活动状态。

现在，我在检索上传页面时绑定事件处理程序；但是，每次上传页面变为活动状态时，它都会绑定一个新的事件处理程序，这会导致处理程序在用户转到上传页面、离开然后返回时多次触发。我想我可以解决这个问题，如果我可以让处理程序仅在它尚未绑定时绑定。这是可能的，还是我忽略了更好的选择？

相关代码，如果有帮助：

```
$(document).bind('dragenter', function(e) {
    e.stopPropagation();
    e.preventDefault();
}).bind('dragover', function(e) {
    e.stopPropagation();
    e.preventDefault();
}).bind('drop', function(e) {
    e.stopPropagation();
    e.preventDefault();
    self._handleFileSelections(e.originalEvent.dataTransfer.files);
}); 
```

* * *

## 回答 #1

> 赞同：39
> 
> 时间：2012-07-23T12:58:08.700

在绑定新事件处理程序之前取消绑定现有事件处理程序。[**这对于命名空间**事件*^([docs])*](http://docs.jquery.com/Namespaced_Events)非常简单：

```
$(document)
  .off('.upload') // remove all events in namespace upload
  .on({
      'dragenter.upload': function(e) {
          e.stopPropagation();
          e.preventDefault();
      },
      'dragover.upload': function(e) {
          e.stopPropagation();
          e.preventDefault();
      },
      // ...
  }); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2020-04-04T13:31:43.717

对于那些只想添加一次事件的人，避免对每个新的克隆元素使用`unbind()/off()`and`bind()/on()`方法。

我在 Code Project 网站上找到了文章[“使用 JQuery 将事件绑定到尚未添加的 DOM 元素（作者 Khrystyna Popadyuk）”](https://www.codeproject.com/Tips/1231017/Binding-Events-to-Not-Yet-Added-DOM-Elements-with)，其中展示了如何只注册一次事件，甚至在元素存在之前。 [阅读他的完整文章了解详情。](https://www.codeproject.com/Tips/1231017/Binding-Events-to-Not-Yet-Added-DOM-Elements-with)

```
$("body").on("click", ".your-style", function(event) {
       // your code ...
}); 
```

# foundation - 复制两个类似项目的 TFS 历史

> ID：11612875
> 
> 赞同：0
> 
> 时间：2012-07-23T12:50:18.583
> 
> 标签：foundation

我有同一个项目的两个副本，比如 Project1 和 Project2。这两个项目的内容是一样的。但是，Project1 有历史，并且由于 Project2 只是 Project1 的副本，它没有自己的历史。

现在，为了保持正确的文件夹结构，我需要删除 Project1（有历史记录）并继续使用 Project2（没有历史记录）进行开发。如何将历史记录复制到 Project2 中？由于它是 Project1 的精确副本，我怀疑应该有办法做到这一点。

提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-23T15:41:42.413

我假设您通过在本地（在本地文件系统上）复制源代码然后将其作为新文件夹添加到 TFS 来创建“project2”。

从 TFS 的角度来看，这是一个需要管理的全新工件。如果您希望“Project2”成为“project1”历史的延续，那么您需要将代码从“project1”分支到“project2”。

为此，请从 TFS 中删除“project2”，然后在源代码管理资源管理器中右键单击包含“project1”的文件夹。选择“Branching and Merging”>“Branch”并为要创建的“project2”选择适当的目的地。然后点击确定。

您现在应该看到“project2”在您创建分支的那一刻有完整的历史记录。如果需要，您现在可以删除“project1”。

# jquery - IE7 不捕获 jQuery 点击子选择器

> ID：11612881
> 
> 赞同：0
> 
> 时间：2012-07-23T12:50:52.877
> 
> 标签：jquery, html, css, internet-explorer, internet-explorer-7

我有以下代码在 FF、Chrome、IE8/9 和 Safari 上按预期正确运行......但我无法在 IE7 上捕获“searchSubmit”的点击。

[jQuery 文档](http://api.jquery.com/child-selector/)指出 IE7 完全支持子选择器，但我无法以这种方式使用它们。相对定位有问题吗？

```
$(document).ready(function() {   
    $('#r_submit > #searchSubmit').click(function() {
       console.log('captured click of searchSubmit');
    });
}); 
```

我的 HTML 和 CSS：

```
<div id="r_submit">
   <a id="searchSubmit">Go</a>
</div>

#r_submit #searchSubmit {
    background: url("/images/picco/proceed_button.png");
    background-repeat: no-repeat;
    background-position: 0 0;
    height: 38px;
    width: 195px;
    border: none;
    position: relative;
    display: block;
    text-indent: -9999px;
    font-size: 0px;
    line-height: 0px;
    top:0px;
    left: 0px;
    float: left;
    cursor: pointer;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-23T13:00:28.543

页面上只有一个具有给定 ID 的元素才有效，因此您的选择器可以是：

```
$('#searchSubmit').click(function() {
    console.log('captured click of searchSubmit');
}); 
```

如果内容被动态添加到页面，“on”方法将处理这个：

```
$('#r_submit').on('click', '#searchSubmit', function() {
    console.log('captured click of searchSubmit');
}); 
```

# sql - 带有子句无效标识符的插入语句 oracle

> ID：11612884
> 
> 赞同：0
> 
> 时间：2012-07-23T12:50:56.760
> 
> 标签：sql, oracle

如果未在“插入”语句中使用，则以下查询可以正常工作。使用“插入”语句，我收到错误“basis.sql_text：indvalid identifier”。我似乎无法弄清楚为什么。想法？

```
with basis as
          (SELECT DISTINCT
                  b.snap_id,
                  c.begin_interval_time,
                  c.end_interval_time,
                  a.sql_id,
                  b.executions_delta,
                  DECODE (d.command_type,
                          1, 'Create_Table',
                          2, 'Insert',
                          3, 'Select',
                          6, 'Update',
                          7, 'Delete',
                          26, 'Lock Table',
                          35, 'Alter Database',
                          42, 'Alter Session',
                          44, 'Commit',
                          45, 'Rollback',
                          46, 'Savepoint',
                          47, 'Begin/Declare',
                          command_type) command_type,
                  object_owner,
                  NVL2 (e.index_name, e.table_name, object_name) table_name,
                  object_type,
                  DBMS_LOB.SUBSTR (d.sql_text, 256, 1) sql_text,
                  'DEVSDB1',
                  '20-JUL-12 03.55.21.000000 PM'
             FROM dba_hist_sql_plan@DEVSDB1 A,
                  dba_hist_sqlstat@DEVSDB1 b,
                  dba_hist_snapshot@DEVSDB1 C,
                  dba_hist_sqltext@DEVSDB1 d,
                  dba_indexes@DEVSDB1 E
            WHERE     a.sql_id = b.sql_id
                  AND b.sql_id = d.sql_id
                  AND b.snap_id = c.snap_id
                  AND e.index_name(+) = a.object_name
                  AND object_owner IN ('EG', 'WV90')
                  AND object_type IS NOT NULL
                  AND end_interval_time >= (SYSDATE - 1))                    
INSERT INTO sdhoste.EMSDB_USAGE@DEVSDB1  
  SELECT basis.snap_id,
        basis.begin_interval_time,
        basis.end_interval_time,
        basis.sql_id,
        NVL (basis.executions_delta, '0'),
        basis.command_type,
        basis.object_owner,
        t.table_name,
        basis.object_type,
        basis.sql_text
   FROM    dba_tables@DEVSDB1 T
        LEFT JOIN
           basis
        ON basis.table_name = t.table_name
  WHERE OWNER IN ('EG', 'WV90'); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-23T12:55:06.140

Order by 在嵌套插入查询中不起作用，请删除它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-23T12:55:59.650

您的查询中几乎没有错误。

`With basis{}`1.使用解码或任何数据库功能时，请在里面提供适当的别名

例如

```
 DECODE (command_type,
         1, 'Create_Table',
         2, 'Insert',
         3, 'Select',
         6, 'Update',
         7, 'Delete',
         26, 'Lock Table',
         35, 'Alter Database',
         42, 'Alter Session',
         44, 'Commit',
         45, 'Rollback',
         46, 'Savepoint',
         47, 'Begin/Declare',
         command_type
        )cmdtype, 
```

和

```
DBMS_LOB.SUBSTR (d.sql_text, 256, 1) sql_tex 
```

2.`basis.exec_per_snap`在基础块内部没有定义

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-23T20:36:19.597

尝试这个：

```
INSERT INTO sdhoste.EMSDB_USAGE@DEVSDB1
WITH basis AS
(basis query here)
  SELECT basis.snap_id
       , basis.begin_interval_time
       , basis.end_interval_time
       , basis.sql_id
       , NVL (basis.executions_delta, '0')
       , basis.command_type
       , basis.object_owner
       , t.table_name
       , basis.object_type
       , basis.sql_text
    FROM dba_tables@DEVSDB1 T LEFT JOIN basis 
                              ON basis.table_name = t.table_name
   WHERE OWNER IN ('EG', 'WV90'); 
```

不要将 WITH 子句放在括号内。

# android - dialogfragment.show() 的问题

> ID：11612890
> 
> 赞同：0
> 
> 时间：2012-07-23T12:51:15.623
> 
> 标签：android, android-dialogfragment

我的应用程序中有一个对话框片段，我正在调用它 -

```
 dialog=new
     FragmentActivity.dfragment(this);

    getFragmentManager().findFragmentById(R.id.fragment3).getView()
            .findViewById(R.id.btn1)
            .setOnClickListener(new OnClickListener() {

                @Override
                public void onClick(View v) {
                    // TODO Auto-generated method stub

                                             dialog.show(getFragmentManager(), "Dialog");
                                             System.out.println(getFragmentManager().findFragmentByTag("Dialog").getTag());
                     // gives null pointer exception
                }
            }); 
```

// 对话框片段类。

```
public static class dfragment extends DialogFragment {
    public dfragment(DialogDisplayed dd) {
        super();
        this.dd = dd;
        Bundle b = new Bundle();
        b.putBoolean("Value", true);
        setArguments(b);
    }

    DialogDisplayed dd;

    @Override
    public View onCreateView(LayoutInflater inflater, ViewGroup container,
            Bundle savedInstanceState) {
        // TODO Auto-generated method stub
        getDialog().setTitle("DIALOG FRAGMENT");
        View v = inflater.inflate(R.layout.dialog_layout, container);
        v.findViewById(R.id.diss).setOnClickListener(new OnClickListener() {

            @Override
            public void onClick(View v) {
                // TODO Auto-generated method stub
                Toast.makeText(getActivity(), "Setting the bundle",
                        Toast.LENGTH_SHORT).show();

                dismiss();
                dd.onDialogClicked();
            }
        });
        return v;
    }

} 
```

我相信它无法通过标签“对话框”找到片段，即使文档说它将它添加到 FragManager。我想知道为什么它会例外谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-10T17:59:43.767

你有空引用异常原因

> dialog.show(getFragmentManager(), "对话框");

不会立即将您的片段添加到 fragmentManager，而是创建 FragmentTransaction 并安排提交。当 UI 线程准备好时，将执行此提交。有关详细信息，请参阅[http://developer.android.com/reference/android/app/FragmentTransaction.html#commit()](http://developer.android.com/reference/android/app/FragmentTransaction.html#commit())。

# java - 使用 Android 的 PrintWriter 发送字符串以大延迟分组到达服务器

> ID：11612895
> 
> 赞同：0
> 
> 时间：2012-07-23T12:51:43.513
> 
> 标签：java, android, sockets

在应用程序中，我目前正在开发客户端，即 Android 手机将字符串发送到 PC 上的服务器。很少有第一条消息会立即出现，但后来的消息会在一段时间内停止接收，当它们最终到达服务器时，它们会出现在一个组中。连接工作正常，两个设备都连接到同一个路由器，所以问题是发送和接收消息之间的时间。这可能是由于使用 PrintWriter 和 Scanner 造成的吗？

```
try{
            s = new Socket(ip, PORT);
            out = new PrintWriter(new BufferedOutputStream(s.getOutputStream()), true);
            isConnected = true;
            Log.d(TAG, "Connected successfully.");
        }catch(Exception e){
            Log.d(TAG, Log.getStackTraceString(e));
        } 
```

和发送方法：

```
void send(String msg){
    try{
        out.print(msg + "\n");
        out.flush();
    }catch(Exception e){
        Log.d(TAG, Log.getStackTraceString(e));
    }
} 
```

# ios - 修补应用内购买黑客；卡在第四步

> ID：11612897
> 
> 赞同：5
> 
> 时间：2012-07-23T12:51:46.500
> 
> 标签：ios, encoding, in-app-purchase, decoding

正如我们许多人所知，Apple 最近出现了一种情况，黑客能够免费获得任何应用内购买。Apple 最近发布*[了描述如何修补它的文档](http://developer.apple.com/library/ios/#releasenotes/StoreKit/IAP_ReceiptValidation/_index.html)*，但我对第 4 步有点困惑，希望能提供任何帮助。

第一步是下载他们的补丁 .h 和 .m，将其包含在您的项目中，并将其链接到安全框架。好的，好的，知道了。然后苹果说：

`4\. Provide a base64 encoder, a base64 decoder, and the action to perform when validation succeeds.`

关于编码器的部分到底意味着我应该做什么？（验证成功时要执行的操作对我来说很清楚。）当然，我在类中看到了命名的`base64_encode`函数`base64_decode`。但它要求什么？这是否像一个只有我知道的特殊 PIN 码，以防止黑客入侵？我不确定在这里做什么。当然，我得到了编码和解码的总体概念，但没有了解如何在这种情况下正确生成编码和解码的程序细节。

Apple 编写的代码，如果有帮助的话：

```
- (NSString *)encodeBase64:(const uint8_t *)input length:(NSInteger)length
{ 
#warning Replace this method.
    return nil;
}

- (NSString *)decodeBase64:(NSString *)input length:(NSInteger *)length
{
#warning Replace this method.
    return nil;
}

#warning Implement this function.
char* base64_encode(const void* buf, size_t size)
{ return NULL; }

#warning Implement this function.
void * base64_decode(const char* s, size_t * data_len)
{ return NULL; } 
```

我也很困惑有 2 个编码和 2 个解码功能。我知道有一对返回`NSString*`s，但为什么第二对返回 a`char*`和 a `void*`？这些函数期望返回什么？我真的不明白。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-23T13:40:30.407

听起来他们想要一个通用的 base64 编码器。在这里尝试一些代码：

[http://cocoadev.com/wiki/BaseSixtyFour](http://cocoadev.com/wiki/BaseSixtyFour)

（免责声明：我没有测试过这些）

这是第二个更容易阅读的内容： http: [//cocoawithlove.com/2009/06/base64-encoding-options-on-mac-and.html](http://cocoawithlove.com/2009/06/base64-encoding-options-on-mac-and.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-27T06:23:33.840

Please have a look at a solution presented: [here](http://www.1771.in/objective-c-iphone-finalizing-apples-vague-quotverificationcontroller-mquot.html), posted by unknown author.

which contains the following code, which I tested and works for me:

```
//  single base64 character conversion
static int POS(char c)
{
    if (c>='A' && c<='Z') return c - 'A';
    if (c>='a' && c<='z') return c - 'a' + 26;
    if (c>='0' && c<='9') return c - '0' + 52;
    if (c == '+') return 62;
    if (c == '/') return 63;
    if (c == '=') return -1;

    [NSException raise:@"invalid BASE64 encoding" format:@"Invalid BASE64 encoding"];
    return 0;
}

- (NSString *)encodeBase64:(const uint8_t *)input length:(NSInteger)length
{
    return [NSString stringWithUTF8String:base64_encode(input, (size_t)length)];
}

- (NSString *)decodeBase64:(NSString *)input length:(NSInteger *)length
{
    size_t retLen;
    uint8_t *retStr = base64_decode([input UTF8String], &retLen);
    if (length)
        *length = (NSInteger)retLen;
    NSString *st = [[[NSString alloc] initWithBytes:retStr
                                             length:retLen
                                           encoding:NSUTF8StringEncoding] autorelease];
    free(retStr);    // If base64_decode returns dynamically allocated memory
    return st;
}

char* base64_encode(const void* buf, size_t size)
{
    static const char base64[] =  "ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";

    char* str = (char*) malloc((size+3)*4/3 + 1);

    char* p = str;
    unsigned char* q = (unsigned char*) buf;
    size_t i = 0;

    while(i < size) {
        int c = q[i++];
        c *= 256;
        if (i < size) c += q[i];
        i++;

        c *= 256;
        if (i < size) c += q[i];
        i++;

        *p++ = base64[(c & 0x00fc0000) >> 18];
        *p++ = base64[(c & 0x0003f000) >> 12];

        if (i > size + 1)
            *p++ = '=';
        else
            *p++ = base64[(c & 0x00000fc0) >> 6];

        if (i > size)
            *p++ = '=';
        else
            *p++ = base64[c & 0x0000003f];
    }

    *p = 0;

    return str;
}

void* base64_decode(const char* s, size_t* data_len_ptr)
{
    size_t len = strlen(s);

    if (len % 4)
        [NSException raise:@"Invalid input in base64_decode" format:@"%d is an invalid length for an input string for BASE64 decoding", len];

    unsigned char* data = (unsigned char*) malloc(len/4*3);

    int n[4];
    unsigned char* q = (unsigned char*) data;

    for(const char*p=s; *p; )
    {
        n[0] = POS(*p++);
        n[1] = POS(*p++);
        n[2] = POS(*p++);
        n[3] = POS(*p++);

        if (n[0]==-1 || n[1]==-1)
            [NSException raise:@"Invalid input in base64_decode" format:@"Invalid BASE64 encoding"];

        if (n[2]==-1 && n[3]!=-1)
            [NSException raise:@"Invalid input in base64_decode" format:@"Invalid BASE64 encoding"];

        q[0] = (n[0] << 2) + (n[1] >> 4);
        if (n[2] != -1) q[1] = ((n[1] & 15) << 4) + (n[2] >> 2);
        if (n[3] != -1) q[2] = ((n[2] & 3) << 6) + n[3];
        q += 3;
    }

    // make sure that data_len_ptr is not null
    if (!data_len_ptr)
        [NSException raise:@"Invalid input in base64_decode" format:@"Invalid destination for output string length"];

    *data_len_ptr = q-data - (n[2]==-1) - (n[3]==-1);

    return data;
} 
```

# android - onActivityForResult 未在方向更改时调用

> ID：11612900
> 
> 赞同：2
> 
> 时间：2012-07-23T12:51:50.830
> 
> 标签：android, save, android-activity, android-camera, android-orientation

我一直在尝试从我的应用程序启动相机活动，以拍摄并保存稍后将上传的照片。我使用此代码启动相机并保存文件：

```
public Bitmap photo;  //the var the captured picture gets saved in.

//Inside the onCreate.
cameraButton.setOnClickListener(new View.OnClickListener() {
    @Override
    public void onClick(View v) {
        Intent cameraIntent = new Intent(android.provider.MediaStore.ACTION_IMAGE_CAPTURE);
        startActivityForResult(cameraIntent, CAMERA_REQUEST);
    }
});

//The onActivityResult
protected void onActivityResult(int requestCode, int resultCode, Intent data) {  
    //Gets the photo
    photo = (Bitmap) data.getExtras().get("data");
} 

//this is called from the donebutton's onClickListener
protected void savePicture(String name, Bitmap picture)
{
    try
    { 
        FileOutputStream fOut = new FileOutputStream( Menu.savePath + TransServActivity.fileName + "/" + name + "Problem.png");
        picture.compress(Bitmap.CompressFormat.PNG, 90, fOut);
    }

    catch(Exception e)
    {
        //Puts the error in an error log.
        //TODO put in error log
        Toast.makeText(getBaseContext(), e.getMessage(), Toast.LENGTH_SHORT).show();
    }
} 
```

Activity 在 Manifest.xml 中被锁定为纵向，如果您以纵向拍摄并保存照片，代码就像一个魅力。但是，如果您在设备处于横向时捕获并保存照片，则此活动会以横向模式重新开始，然后强制进入纵向。

这使得我保存位图的变量变为空，并且在您单击完成按钮时不会被保存。而且我什至不确定 onActivityResult() 是否被调用。

有想法该怎么解决这个吗？

非常感谢，我很感激我能得到的任何帮助//大卫

# android - 替换 Parcelable 接口的最佳实践

> ID：11612901
> 
> 赞同：0
> 
> 时间：2012-07-23T12:51:54.390
> 
> 标签：android, ipc, parcelable, parcel

我通常使用接口`Parcelable`将数据从一个活动传递到另一个活动。如果数据不多，它工作正常。但是，在某些情况下，我必须将大量数据传递给 Activity。这些数据的编组似乎没有任何错误，但解组会导致如下错误：

```
07-23 14:26:34.215: E/AndroidRuntime(29379): java.lang.OutOfMemoryError: java.lang.Object[] of length 1075971147 exceeds the VM limit 
```

似乎要解组的数据太多了。一个真正的 Hackish 解决方案（我真的不喜欢）是给那个特殊的 Activity 一个静态方法来将数据传递给它，在`onCreate()`. 这至少适用于我可以控制源的活动，但如果我没有，则会失败。

我想知道是否还有其他可接受的尝试，将一堆数据从一个活动传递到另一个活动。如果我可以重用我已经为 Parcelable 接口编写的一些代码，那就太好了，但这不是必需的

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-23T12:55:15.733

如何创建一个全局变量（如此[处](https://stackoverflow.com/questions/708012/android-how-to-declare-global-variables)所述）？曾经有一段时间我在同一个问题上苦苦挣扎，最后我发现这一切都在工作（尽管我不能说“全球”似乎是一种“好的做法”）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-06-10T19:21:35.543

使用总线架构（EventBus/Otto）怎么样，那么您可以在任何 Android 组件之间传输任何 POJO。

# cakephp - 使用easyphp蛋糕烘烤错误

> ID：11612906
> 
> 赞同：1
> 
> 时间：2012-07-23T12:52:09.443
> 
> 标签：cakephp

当我尝试使用蛋糕控制台时，我遇到了一些麻烦。我在Windows 7上。尝试做蛋糕烘焙模型时，出现以下错误：

```
Error: Database connection "Mysql" is missing, or could not be created.
        #0 /opt/lampp/cake/lib/Cake/Model/ConnectionManager.php(98): DboSource->__construct(Array)
        #1 /opt/lampp/cake/lib/Cake/Console/Command/Task/ModelTask.php(837): ConnectionManager::getDataSource('default')
        #2 /opt/lampp/cake/lib/Cake/Console/Command/Task/ModelTask.php(782): ModelTask->getAllTables(NULL)
        #3 /opt/lampp/cake/lib/Cake/Console/Command/Task/ModelTask.php(863): ModelTask->listAll(NULL)
        #4 /opt/lampp/cake/lib/Cake/Console/Command/Task/ModelTask.php(186): ModelTask->getName()
        #5 /opt/lampp/cake/lib/Cake/Console/Command/Task/ModelTask.php(84): ModelTask->_interactive()
        #6 /opt/lampp/cake/lib/Cake/Console/Command/BakeShell.php(102): ModelTask->execute()
        #7 /opt/lampp/cake/lib/Cake/Console/Shell.php(375): BakeShell->main()
        #8 /opt/lampp/cake/lib/Cake/Console/ShellDispatcher.php(177): Shell->runCommand(NULL, Array)
        #9 /opt/lampp/cake/lib/Cake/Console/ShellDispatcher.php(69):   ShellDispatcher->dispatch()
        #10 /opt/lampp/cake/lib/Cake/Console/cake.php(24): ShellDispatcher::run(Array)
        #11 {main} 
```

有人可以解决这个问题吗？咳咳！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-25T15:52:20.527

看起来您没有定义数据库设置。
在 中定义您的数据库连接`app/config/Database.php`。

它大致如下所示。
（请记住至少为您的设置更新`login`,`password`和）`database`

```
<?php
public $default = array(
    'datasource' => 'Database/Mysql',
    'persistent' => false,
    'host' => 'localhost',
    'port' => '',
    'login' => 'YOUR MYSQL USERNAME',
    'password' => 'YOUR MYSQL PASSWORD',
    'database' => 'YOUR DATABASE NAME',
    'schema' => '',
    'prefix' => '',
    'encoding' => ''
); 
```

如果您需要一些指导，请参阅这本[CakePHP 书。](http://book.cakephp.org/2.0/en/getting-started.html#cake-database-configuration)

# ember.js - 带有 Ember 的小部件系统

> ID：11612908
> 
> 赞同：0
> 
> 时间：2012-07-23T12:52:12.407
> 
> 标签：ember.js

我想用 EmberJs 构建一个 WebApplication。此应用程序不应是单个应用程序。我想把它分成小部件，我可以单独加载并插入网站。小部件应该具有相互通信的能力，并且它们都应该使用一个数据存储或数据模型。如何使用 ember 管理此类应用程序的最佳方式是什么？我应该为每个小部件使用 Ember.application 使用不同的 Ember 对象更好吗？

我的计划是通过 RequireJs 要求每个小部件，并拥有一个用于管理数据和小部件通信的中央应用程序。

问候.... T

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-23T13:01:21.937

*已经有一个相关的问题@https [://stackoverflow.com/a/11391923/90741](https://stackoverflow.com/a/11391923/90741) ...*

你当然应该有一个单一的应用程序命名空间，小部件重新打开公共类以丰富应用程序的行为/功能。

之后，您可以根据当前用户的配置文件激活（甚至加载）小部件。

这就是我们在这里所做的，而且效果很好。

# php - 如何从 php 脚本设置 cron 作业？

> ID：11612910
> 
> 赞同：8
> 
> 时间：2012-07-23T12:52:25.537
> 
> 标签：php, cron, crontab

我是 cron 工作的新手。我学习了一些有关 cron 作业的基础知识。我可以使用 cron 选项卡调用 php。通过在 /etc/crontab 中使用以下命令

```
 10 *    * * *   root    /usr/bin/php /var/www/PATH TO SCRIPT/email.php 
```

在 email.php 我有以下代码

```
 #!/usr/bin/php
 <?php
    mail ("examplemail@mail.com", "Cron Successful Public HTML!","Hello World from mycron.php!");
 ?> 
```

每 10 分钟我收到邮件。但我需要知道有什么方法可以从 php 调用 cron 作业（从 php 调用 cron）我通过冲浪得到了一些想法，但我无法弄清楚完成我的工作的确切方法。这是我用来使用 php 添加作业的代码

```
 exec('echo -e "crontab -e \n2 * * * * /usr/bin/php /var/www/PATH TO THE SCRIPT/crontest1.php" '); 
```

它不适合我。谁能指导我如何从php调用或添加cron。所以我可以通过执行 php 文件来发送邮件，并且可以更改 php 文件本身的时间间隔。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-07-23T12:55:35.143

来自[Nick Clark](https://stackoverflow.com/users/630716/nick-clark)[如何通过 PHP 脚本设置 cron](https://stackoverflow.com/questions/5134952/how-can-i-set-cron-job-through-php-script/5135390#5135390)作业：

> 这将添加一个每天上午 9:30 运行的脚本。
> 
> ```
> exec('echo -e "`crontab -l`\n30 9 * * * /path/to/script" | crontab -'); 
> ```
> 
> 如果您从 Web 服务器运行此脚本，您可能会遇到权限问题。为了解决这个问题，我建议采用不同的方法。
> 
> 这是一种可能的解决方案。创建需要运行的脚本列表。您可以将其保存在文本文件或数据库中。创建一个脚本来读取此列表并每分钟或每 5 分钟运行一次（使用 cronjob）。您的脚本需要足够聪明，才能决定何时运行脚本列表以及何时退出。

你可以这样做..

其他链接：

[使用 php 脚本安装 cron 作业](https://stackoverflow.com/questions/2037176/install-a-cron-job-with-a-php-script)

[如何从 php 脚本调用 cron 作业？](https://stackoverflow.com/questions/10511996/how-to-invoke-cron-job-from-php-script)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-23T12:55:56.937

应该可以直接添加

```
echo "2 * * * * /usr/bin/php /var/www/PATH TO THE SCRIPT/crontest1.php\n" > /etc/cron.d/username 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-07-05T13:01:33.000

许多环境不允许从 web 调用的 php 页面写入文本文件。我同意这是一种不应承担的安全风险。

我有一个网页通过对 php 脚本的 JQuery 调用将数据保存到 MySQL 表中。在 Cron 中，我安排另一个 php 脚本每隔一段时间检查 MySQL 表中的数据并执行任何必要的作业。

# iphone - 如何使用 HTTPHeaderField 创建 NSURLRequest

> ID：11612913
> 
> 赞同：2
> 
> 时间：2012-07-23T12:52:43.433
> 
> 标签：iphone

我有如下卷曲请求

curl -H '授权：OAuth oauth_signature_method="PLAINTEXT",oauth_consumer_key="de4422f-f3ff-4929-bb65-eadc6f5218e2",oauth_token="85ab49a-9081-4641-812c-09d3130e3a8",oauth_signature="0723ba36-8-8 9337-7e81004655c%26e385879b-0b57-481b-a8fc-8eb1426fc72"' https://external.ningapis.com/xn/rest/ippinn/1.0/User/?author=0n1s8aln92xhx&fields=iconUrl,email,url,fullName,birthdate ，性别'

我想使用 NSURLRequest 创建相同的请求我尝试过并在论坛上搜索得到很多解决方案，但没有成功

我做了以下代码

```
NSURL *url = [NSURL URLWithString:@"https://external.ningapis.com/xn/rest/ippinn/1.0/User/?author=0n1s8aln92xhr&fields=iconUrl,email,url,fullName,birthdate,gender"];  
NSMutableURLRequest *request = [NSMutableURLRequest requestWithURL:url cachePolicy:NSURLRequestUseProtocolCachePolicy timeoutInterval:60.0];

[request setHTTPMethod:@"POST"];

NSString  *authorization = @"OAuth ";
authorization  = [authorization stringByAppendingFormat:@"oauth_signature_method=%@",@"PLAINTEXT"];
authorization  = [authorization stringByAppendingFormat:@"&oauth_consumer_key=%@",@"de4422f-f3ff-4929-bb65-eadc6f5218e2"];
authorization  = [authorization stringByAppendingFormat:@"&oauth_token=%@",@"85ab49a-9081-4641-812c-09d3130e3a8"];
authorization  = [authorization stringByAppendingFormat:@"&oauth_signature=%@",@"0723ba36-8d19-4fab-9337-7e81004655c%26e385879b-0b57-481b-a8fc-8eb1426fc72"];

NSLog(@"authorization =>%@",authorization);
[request setValue: authorization forHTTPHeaderField: @"Authorization"];

 self.connection = [NSURLConnection connectionWithRequest:request delegate:self];
if (_connection) {
    self.receivedData = [[NSMutableData data] retain];
} 
```

请建议我哪里出错了

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-23T13:05:44.843

```
 NSURL *url = [NSURL URLWithString:@"https://external.ningapis.com/xn/rest/ippinn/1.0/User/?author=0n1s8aln92xhr&fields=iconUrl,email,url,fullName,birthdate,gender"];  
    NSString  *authorization = @"OAuth ";
    authorization  = [authorization stringByAppendingFormat:@"oauth_signature_method=%@",@"PLAINTEXT"];
    authorization  = [authorization stringByAppendingFormat:@"&oauth_consumer_key=%@",@"de4422f-f3ff-4929-bb65-eadc6f5218e2"];
    authorization  = [authorization stringByAppendingFormat:@"&oauth_token=%@",@"85ab49a-9081-4641-812c-09d3130e3a8"];
    authorization  = [authorization stringByAppendingFormat:@"&oauth_signature=%@",@"0723ba36-8d19-4fab-9337-7e81004655c%26e385879b-0b57-481b-a8fc-8eb1426fc72"];
    NSData *postData = [authorization dataUsingEncoding:NSUTF8StringEncoding allowLossyConversion:NO];
    NSString *postLength = [NSString stringWithFormat:@"%d", [postData length]];
    NSMutableURLRequest *urlRequest = [[[NSMutableURLRequest alloc] init] autorelease];
    [urlRequest setURL:url];
    [urlRequest setHTTPMethod:@"POST"];
    [urlRequest setValue:postLength forHTTPHeaderField:@"Content-Length"];
    [urlRequest setValue:@"application/x-www-form-urlencoded" forHTTPHeaderField:@"Content-Type"];
    [urlRequest setValue:@"utf-8" forHTTPHeaderField:@"charset"];
    [urlRequest setHTTPBody:postData];
    [urlRequest setTimeoutInterval:60.0];

    NSURLConnection *tmpConn = [[[NSURLConnection alloc] initWithRequest:urlRequest delegate:self] autorelease];
    self.connection = tmpConn;//I suppose "connection" is a retained property 
    if (_connection) {
        self.receivedData = [[NSMutableData data] retain];
    } 
```

# android - ActivityGroup 中的 onActivityResult

> ID：11612921
> 
> 赞同：1
> 
> 时间：2012-07-23T12:53:04.220
> 
> 标签：android

我正在从子活动调用图库并在父活动组的 onActivityResult 方法中获取所选图像的路径，但我想在子活动的 ImageView 中显示所选图像。这该怎么做？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-23T13:00:02.023

你会`data`从`public void onActivityResult(int requestCode, int resultCode, Intent data)`

因此，您可以通过以下方式获得它：

```
Uri targetUri = data.getData();
imageView.setImageURI(targetUri); 
```

# php - 我无法指出 Ajax Jquery 上的错误，login.php 中的 $_REQUEST 似乎没有获取数据

> ID：11612923
> 
> 赞同：0
> 
> 时间：2012-07-23T12:53:04.633
> 
> 标签：php, jquery, ajax, web

我无法找出我的代码中有什么问题，顺便说一下，浏览器中没有错误。问题是当 ajax 将数据传递给 login.php 时，登录 php 无法识别数据（用户名和密码）或 ajax 未正确发送数据，**$_Session['username']**未定义；

这是我的代码，

```
$(function(){
    var user = $('#username').val();
    var pass = $('#password').val();
    $('#login').click(function(){
        $.ajax({
            type: 'GET',
            url: "../ajax/login.php",
            data: 'username='+user+'&password='+pass
        }).success(function(data){
            if(data == "Success"){
                $('#error').html("Hello!");
            }else{
                alert(data);
                $('#error').html("Hello!");
            }
        }).error(function(){
            alert("An error occured.");
        });
    });
}); 
```

login.php 代码

```
 <?php
include '../library/Session.php';
include '../library/connection/Connection.php';
include '../library/Data_Cleansing.php';
$session->LoginCheckSession();
$username = $_REQUEST['username'];
$password = $_REQUEST['password'];
$username = $CleanData->stripAndSlash($username);
$password = $CleanData->stripAndSlash($password);
$sql = mysql_query("SELECT * FROM user WHERE username='$username' AND password='$password'") or die(mysql_error());
if ($sql && mysql_num_rows($sql) == 1) {
    while ($row = mysql_fetch_array($sql)) {
        if ($username == $row['username'] && $password == $row['password']) {
            $_SESSION['username'] = $username;
            echo "Success";
        }
    }
} else {
    echo "Failed";
}
?> 
```

谁能给我一个关于如何解决这个问题的建议？当我试图提醒数据时，我得到的只是“失败”。**警报（数据）；**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-23T13:01:27.220

尝试

```
if (mysql_num_rows($sql) == 1) { 
```

前提是您的用户名是唯一的。但是，强烈建议不要继续使用`mysql_`函数。使用[PHP.NET上推荐的 MySQLi 或 PDO_MySQL](http://php.net/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-23T13:43:14.357

使用 $_GET 而不是 $_REQUEST 并检查

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-23T14:06:56.210

好消息！

我终于解决了这个问题。问题出在 login.js

```
$(function(){
var user = $('#username').val();
var pass = $('#password').val();
$('#login').click(function(){
    $.ajax({
        type: 'GET',
        url: "../ajax/login.php",
        data: 'username='+user+'&password='+pass
    }).success(function(data){
        if(data == "Success"){
            $('#error').html("Hello!");
        }else{
            alert(data);
            $('#error').html("Hello!");
        }
    }).error(function(){
        alert("An error occured.");
    });
}); 
```

});

见`var user = $('#username').val(); var pass = $('#password').val();`

```
 $('#login').click(function(){
    var user = $('#username').val();
    var pass = $('#password').val();
        $.ajax({
            type: 'GET', 
```

假设它们位于 click(function) 内部，以便单击按钮后它们将具有值。我真傻。很抱歉浪费了您的时间，希望您以后能帮助我，谢谢。

# mysql - 排序用户名

> ID：11612925
> 
> 赞同：6
> 
> 时间：2012-07-23T12:53:14.117
> 
> 标签：mysql, sql, database

如何正确排序用户名？

例如我做这个查询：

```
SELECT * FROM  `members` WHERE username LIKE  'bx%' ORDER BY username ASC 
```

**结果**：

```
bx1
bx10
bx11
bx12
bx13
bx14
bx15
bx16
bx17
bx18
bx19
bx2
bx20
bx21
bx3
bx4
bx5 
```

我想这样返回：

```
bx1
bx2
bx3
bx4
bx5
...
bx15
bx16 
```

等等

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-07-23T12:54:27.367

```
SELECT *
FROM `members`
WHERE username LIKE 'bx%'
ORDER BY LENGTH(username), username 
```

你需要这样做的事实告诉我你的模式是非规范化的。如果可能，如果需要对其进行操作，请将用户名的整数部分存储在单独的列中。

[SQL 小提琴示例](http://sqlfiddle.com/#!2/b8738/3/0)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-23T13:19:43.437

您需要创建一个用户定义的函数，该函数接受字符串并返回扩展字符串。假设是：字符串仅包含一个位于末尾的数字组件，并且小于由 fn 中的填充确定的最大整数大小 例如 ABC1234 -> ABC00001234 ABC34 -> ABC00000034 实施以下步骤

*   从最后一个字符开始，逐个字符（递减位置）遍历传递的字符串，直到找到第一个非数字字符。（C）
*   获取数字部分的长度 (4)
*   将多个“0”字符添加到字符串的数字部分（这决定了处理的数字部分的最大大小）给出（例如）00001234
*   以字符串的非数字部分为前缀，给出 ABC00001234
*   输出

按输出排序您还可以添加一个计算字段（它使用刚刚创建的函数），它将返回该值并在其上创建一个索引。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-23T12:55:04.457

```
SELECT * FROM  `members` 
WHERE username LIKE  'bx%' 
ORDER BY cast(substring(username, 3) as unsigned) ASC 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-23T12:55:53.770

如果短语 bx 是固定的，

```
SELECT * FROM  `members` WHERE username LIKE  'bx%' 
ORDER BY replace(username,'BX','')*1 ASC 
```

# r - 转置后访问矩阵的第一列？

> ID：11612927
> 
> 赞同：0
> 
> 时间：2012-07-23T12:53:30.893
> 
> 标签：r, merge, indexing, dataframe, transpose

如何访问转置矩阵的第一列 [用于合并]？转置矩阵的列名变成了行名，我不知何故无法访问。

例子：

我有2个矩阵：

```
mat1=data.frame(var=c('var1','var2','var3'),site1=1:3,site2=4:6)
mat2=data.frame(site=c('site1','site2'),newvar=1:2) 
```

Mat 2 必须与 mat1 合并，所以我转置 mat1：

```
mat11=t(mat1) 
```

现在我有 2 个矩阵，其中第一列包含站点名称，其他列包含参数。转置后，第一列的列标题称为“row.names”。我不知道如何访问它以进行合并：

> mat11[,1]

给出： var site1 site2 "var1" "1" "4"，

不是预期的：row.names、var、site1、site2。

所以我无法解决合并的正确列。这是如何运作的？

亨克

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-02T04:39:37.163

```
newvars <- as.character(mat1$var)
newnames <- names(mat1)[2:3]

mat1data <- t(mat1[,2:3])

mat11 <- data.frame(newnames, mat1data, row.names=NULL)
names(mat11) <- c("sites", newvars)

mat11

  sites var1 var2 var3
1 site1    1    2    3
2 site2    4    5    6 
```

# jquery - invalidHandler setDefault 在 $.validator 调用 -jquery 验证插件中被忽略

> ID：11612939
> 
> 赞同：2
> 
> 时间：2012-07-23T12:53:54.087
> 
> 标签：jquery, jquery-ui, jquery-validate

当我通过调用 $.validator setDefaults 方法为 jQuery Validation 插件设置一些默认值时，errorPlacement 方法运行良好，尽管 invalidHandler 函数被完全忽略？为什么？

请注意，我在此实例中使用 jQuery UI 选项卡，并使用 .valid() 调用验证选项卡的各个字段（在表单中），而不是完整的表单 .validate() 调用。

任何见解都非常感谢。

简化代码如下：

```
(function( $ ) {
    //det up some site wide validator defaults
    $.validator.setDefaults({
        invalidHandler: function(error, validator) {
            console.log("InvalidHandler Test");
        },
        errorPlacement: function(error, element) {
            error.appendTo("#error_validation span#errorSummary");
            $("#error_validation").show();
        }
    });
    //small jQuery plugin for error handling in a jQuery UI tab
    //by http://bit.ly/bhH1n1
    $.fn.validateTab = function () {
        var isValid = true;
        $(this).find("input, select").each(function () {
            if (isValid) {
                isValid = $(this).valid();
            } else {
                $(this).valid();
            }
        });
        return false;
    };

    $('#tabs').tabs();

    $('#addUserBtn').click(function (e) {
        e.preventDefault();
        $("#addUser").validateTab();
    });

}); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2014-06-23T14:56:47.247

我不太确定为什么它不起作用，但我需要它，所以我自己修复了它，如果你想将插件中的 setDefaults 替换为此

```
setDefaults: function (settings) {
    var validator = $.data($("form")[0], "validator");
    var originalSettings = jQuery.validator.getDefaults();
    for (var key in settings) {
        if (settings[key]) {
            originalSettings[key] = settings[key];
        }
    }
    validator.settings = $.extend(true, {}, $.validator.defaults, originalSettings);
},
getDefaults: function () {
    var validator = $.data($("form")[0], "validator");
    return validator.settings;
}, 
```

# actionscript-3 - 另一个类的 flex3 属性为空

> ID：11612941
> 
> 赞同：0
> 
> 时间：2012-07-23T12:53:56.030
> 
> 标签：actionscript-3, apache-flex, flex3

我有一个具有“user.as”类的应用程序，并且有一个显示产品详细信息的弹出窗口。我想在这个弹出窗口中添加一个“市场”属性，但它不起作用。这是代码：

### 用户身份：

```
package com.brb.domain
{

[RemoteClass(alias="com.brb.user.userIBO")]
[Table(name="User")]
[Bindable]
public class User
{
    /**
     * Id of the user.
     */
    [Id(strategy="assigned")]
    public var UserID: Number;

    public var market: String;

    public var isAuthenticated: Boolean;

    public function User()
    {
        super();
    }
} 
```

}

然后我有一个`Product.mxml`在弹出窗口中显示产品详细信息的类：

```
import com.brb.domain.Product;
import com.brb.domain.User;

...
[Bindable]
private var _product: Product;
[Bindable]
private var _currentUser: User;

public function set product( value: Product ): void
        {
this._product = value;
mySrc ="file:///C|/MultimediaSync/market_"+this.market.toString()+"/pictures/"+imageName;   
trace(this._currentUser.market.toString());
... 
```

}

以上是返回：

> TypeError：错误 #1009：无法访问空对象引用的属性或方法。

我的问题是如何从`User.as class`上面的另一个函数中访问属性？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-23T13:00:27.040

Flex 是一种面向对象的语言。这意味着（在大多数情况下，不包括称为“静态”的东西）您需要一个对象*的**实例*来访问其特征。

 *在这种情况下，“用户”是您的对象，如 User.as 中所定义，您需要它的一个*实例*，方法是调用

```
_currentUser = new User(); 
```

在您尝试引用`_currentUser.market`. 这种`new User()`语法称为实例化对象或创建实例。之后，`_currentUser`保存对该对象实例的引用，该实例具有`_market`您可以访问的属性。*

# blackberry - 黑莓 BIS 选项密钥与 mds-public

> ID：11612942
> 
> 赞同：4
> 
> 时间：2012-07-23T12:53:57.740
> 
> 标签：blackberry

要在黑莓中使用 BIS 连接，开发者需要注册 BB 联盟计划。但是，该[站点](https://partners.blackberry.com/web/guest/not-a-member)不再对新成员可用。

现在在黑莓上使用 BIS 连接的“官方”方式是什么？使用 mds-public 作为密钥虽然对我有用，但需要确保这是标准的。

```
connFact.setTransportTypeOptions(TransportInfo.TRANSPORT_BIS_B,
            new BisBOptions("mds-public")); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-23T19:06:16.273

据我了解，当您注册 BB 推送时，您将立即访问 BIS-B。但我不知道你是否可以在没有推送注册的情况下获得它。

# java - 在测试和生产环境中使用 Maven 和 Jenkins 部署到 tomcat

> ID：11612943
> 
> 赞同：2
> 
> 时间：2012-07-23T12:54:07.113
> 
> 标签：java, tomcat, maven, deployment, jenkins

我正在为我的应用程序编写构建脚本，并且想知道部署/发布到测试/生产环境的最佳实践是什么。

目前我所写的是

1.  使用 ssh 停止 tomcat 服务器。
2.  使用 Maven 构建战争
3.  使用 ssh 从 tomcat webapps 目录中删除战争
4.  使用 ssh 将构建的文件传输到 tomcat 上的 webapps 目录
5.  启动服务器

我知道这不是部署应用程序的最佳方式，并希望得到您的反馈。我最想做的是

1.  为 prod env 执行 maven 版本。如果可能，最多提供修订号。
2.  标记代码。
3.  将发布的战争上传到包含所有战争及其历史记录的 S3 文件夹。
4.  在服务器/Jenkins 上编写一个脚本，该脚本将从 S3 下载文件（如果提供了最新版本，则为版本号）并部署到 tomcat。

我很困惑这第 4 步应该在 Jenkins 中还是在服务器上。我正在使用 EC2 实例来托管 Web 应用程序，因此我的图像需要有脚本。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-23T13:56:34.067

在组织方面，您正在混合构建和部署，复制，......

*   jenkins 应该用于检查源代码。有各种插件可以从 scm 中检出某个版本（即使 CI 在默认情况下总是针对最新版本运行）：[http ://wiki.hudson-ci.org/display/HUDSON/Subversion+Release+Manager](http://wiki.hudson-ci.org/display/HUDSON/Subversion+Release+Manager)
*   maven应该用于预处理，过滤资源，编译和打包war
*   jenkins 的后期处理任务可用于复制/存档生成的战争
*   可以使用 jenkins 插件，例如[https://wiki.jenkins-ci.org/display/JENKINS/Deploy+Plugin](https://wiki.jenkins-ci.org/display/JENKINS/Deploy+Plugin)（基于 cargo）来部署存档

当 jenkins 是一个集成工具时，maven 是一个用于构建存档的工具。

你应该 ：

*   在编译和集成之间保持清晰的界限
*   使用他们设计的工具。

嗨，M。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-07-23T13:32:50.163

首先是您正在混合构建和部署。我建议通过 Maven 进行构建。部署是另一回事。

[我建议以这种方式更改您的构建，以便在 Jenkins 中进行一次运行或在可以部署在测试和生产中的命令行工件上进行生产。](https://stackoverflow.com/questions/11065273/specifying-runtime-configuration-parameters-to-a-maven-built-web-application)

我的意思是通过 Maven 发布插件制作发布的工件，因为您正在交付工件来测试和/或生产必须是可重现的。

这些是在您将它们放在存储库管理器（Artifactory、Archiva、Nexus）中之后产生工件的东西，下一步是将它们部署到适当的区域，如测试或生产。这可以通过Maven通过[maven cargo插件](http://cargo.codehaus.org/Maven2+plugin)或[tomcat插件](http://tomcat.apache.org/maven-plugin-2/)等或其他插件来实现。但我建议通过木偶、厨师等不同的东西来做到这一点，或者可能是通过自制的 scipts/工具。这些脚本可以通过 Jenkins 毫无问题地运行（不应该是问题）。部署本身不应该是建筑物的一部分，它应该单独进行。如果您正在编写自己的工具，您可以查看[Aether 库](http://www.sonatype.org/aether/)，以简化对 Maven 存储库的访问。

# mysql - 添加行时要记录的 MySQL 列

> ID：11612947
> 
> 赞同：0
> 
> 时间：2012-07-23T12:54:24.910
> 
> 标签：mysql, sql

是否有一种简单的方法可以将列添加到存储行创建时间的表中？此外，是否也可以在上次修改时使用列存储来执行此操作？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-23T12:56:24.567

您可以使用创建记录时的默认值创建列，并且可以创建在记录更新时更新的列：

```
CREATE TABLE MyTable(
    LastUpdated TIMESTAMP DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP
); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-23T12:56:26.453

您可以使用[触发器](http://dev.mysql.com/doc/refman/5.5/en/triggers.html)来执行此操作。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-23T12:56:31.320

您可以使用 TimeStamp 列执行此操作，方法是将其类型设置为 Date 并将默认值设置为 current_timestamp

# objective-c - Objective-C 中的分段错误是什么？

> ID：11612952
> 
> 赞同：2
> 
> 时间：2012-07-23T12:54:31.713
> 
> 标签：objective-c, segmentation-fault, archive

我编写了一个小的 Objective-C 程序来归档一个对象。该对象是一个 NSDictionary。编译时没有问题。但是当它被调用时，它会在终端中显示一条消息“分段错误”，并且没有创建存档 XML 文件。问题是由 writeToFile 方法引起的，因为在我将其注释掉之后没有错误（当然也没有存档）。这个错误信息是什么意思？以及如何解决？

我刚刚发现了问题的原因。我的程序基于书中的示例，并且存在打印错误，因此字典对象从未真正初始化。抱歉，在询问之前我没有彻底检查这个问题。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-23T13:00:10.570

分段错误是由尝试取消引用坏指针引起的。您传递给的文件实例可能`writeToFile:`为零。您需要检查您的返回码是否成功，并检查您的指针是否都有效。

鉴于注释掉该行时它不会崩溃，您只需要确保该调用的所有参数都有效并且您会发现您的错误。

更多阅读：

*   [什么是分段错误？](https://stackoverflow.com/questions/2346806/what-is-segmentation-fault)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-23T13:00:57.953

分段错误通常意味着您的程序正在访问它不应该访问的内存。在调试器中运行你的程序，它应该会告诉你错误发生在哪里。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-23T12:58:58.597

没有任何示例代码很难确定确切的问题，但是当 CPU 试图访问它不拥有的内存时会发生分段错误。这通常意味着您有一个未初始化的指针，或者没有指向正确的位置，然后您尝试取消引用它导致崩溃。我建议梳理你的代码，并确保你所有的指针都在做你期望他们做的事情。

# excel-2010 - 使用 PHPExcel 更新 XLSX 中图表或数据透视表的数据库

> ID：11612953
> 
> 赞同：3
> 
> 时间：2012-07-23T12:54:32.337
> 
> 标签：excel-2010, phpexcel

**更新**：

刚刚用 PHPExcel 1.7.8 测试了这个场景，它仍然无法正常工作。没有通过 PHPExcel 主动接触的工作表中的数据透视表简单地消失了，剩下的是被边框包围的旧数字。

* * *

我有一个带有两张工作表的 Excel 2007 工作簿：

1.  仪表板

2.  数据

在“数据”中只有表格组织数据的聚合，而在“仪表板”中是

1.  一个简单的图表

2.  以及基于“数据”中数据的数据透视表。

我想要做的是使用 PHPExcel 更新“数据”表中的数据。到目前为止没有问题。但是当我再次打开工作簿时，图表消失了，数据透视表变成了一个简单的格式化表格。

我根本没有触摸“仪表板”表，并且尝试了迄今为止不同的方法来解决该问题，fx：

1.  删除“数据”，创建一个新的“数据”并填写数字

2.  PHPExcel::setIncludeCharts(true)

我认为这种行为很奇怪。除此之外，PHPExcel 工作正常。

**编辑：**

我刚刚应用的另一个解决方法是将数据存储在单独的工作簿中。然后成功更新第二个工作簿中的数据透视表。但我想将该数据存储在与用户界面相同的工作簿中，只是在单独的工作表上。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2016-03-16T08:13:31.407

不幸的是，phpexcel 目前不支持数据透视表。但我已经这样解决了：

*   我创建了一个模板 excel 文件，仅包括数据透视表。但数据源为外部 Data.xlsx 文件。
*   我已经用 PHPExcell 生成了 Data.xlsx 文件。
*   最后，我压缩了这两个文件，以便通过电子邮件发送报告。（或者下载报告）

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2012-08-01T11:35:45.613

我不确定。检查传递给 xlsx 工作表的数据是否格式正确（数据类型）。有时整数值可能会被传递，因为文本会导致操作出现问题。

以下链接可能对您有所帮助

```
http://phpexcel.codeplex.com/workitem/16

http://phpexcel.codeplex.com/wikipage?title=Examples 
```

# coffeescript - 如果在coffeescript中的x in y怎么办

> ID：11612958
> 
> 赞同：1
> 
> 时间：2012-07-23T12:54:58.217
> 
> 标签：coffeescript

我有这个咖啡脚本：

```
y = Object
y.x = true;
result = false
if 'x' in y
    result = true 
```

生成这个javascript：

```
var result, y,
__indexOf = [].indexOf || function(item) { for (var i = 0, l = this.length; i < l; i++) {   if (i in this && this[i] === item) return i; } return -1; };

y = Object;

y.x = true;

result = false;

if (__indexOf.call(y, 'x') >= 0) {
   result = true;
} 
```

显然结果应该为真，但生成的 javascript 不返回此结果。我知道我可以将该部分作为 javascript 转义，但这似乎很老套。任何帮助是极大的赞赏。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-23T13:01:38.653

刚刚发现我需要使用'of'而不是'in'。

# cakephp - cakephp 中 bootstrap.php 包含的文件中的变量似乎未定义

> ID：11612959
> 
> 赞同：0
> 
> 时间：2012-07-23T12:55:01.053
> 
> 标签：cakephp, bootstrapping

我在 bootstrap.php 中包含一个文件，如下所示

```
include('files/settings.php'); 
```

settings.php 文件包含

```
 $var= "value";
    function myFunction(){
        echo "myFunction echo";
    } 
```

现在，在我的一个模板中，我尝试使用函数和变量。问题是，当函数按预期工作时，当我尝试打印变量时，我收到“未定义”通知。

我使用 CakePHP 2.1.3

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-23T12:58:21.027

像这样定义时，变量是全局变量。

您必须在要使用它的函数中导入它，如下所示：

```
function globalVariableUsingFunction() {
    global $var;
    echo $var;
} 
```

更多信息在[php 文档中](http://php.net/manual/en/language.variables.scope.php)

编辑：根据评论，这是 CakePHP 特有的行为：来自[这个线程](https://groups.google.com/forum/?fromgroups#!topic/cake-php/9j07EXTuoVY)

> 文件引导程序包含在方法 Configure::__loadBootstrap() 中，因此您必须通过关键字 'global' 将全局变量标记为全局 - 否则它们仅在上述方法的范围内有效。

所以，像这样修改你的 bootstrap.php

```
global $var= "value";
function myFunction(){
    echo "myFunction echo";
} 
```

应该做的伎俩。

# symfony - 如何在 Sonata Media Bundle 中实现多对多关系

> ID：11612966
> 
> 赞同：19
> 
> 时间：2012-07-23T12:55:27.537
> 
> 标签：symfony, sonata-admin

我正在尝试将 SonataMediaBundle 与另一个实体相关联：具有多对多关系的**产品。**

架构和关系创建得很好。

但是，当我编辑或创建新产品时，我尝试添加一个按钮，我可以在其中通过媒体库搜索媒体文件，并添加一个按钮来上传新文件。

对于关系 OneToMany，这很容易`Admin\ProductAdmin::configureFormFields`通过添加：

```
->add('image', 'sonata_type_model_list', array(
                    'required' => false
                ), array(
                    'link_parameters' => array(
                        'context'  => 'default',
                        'provider' => 'sonata.media.provider.image'
                     )
                )) 
```

所以我得到了与 SonataMediaBundle 画廊中已经使用的相同的 3 个图标（*从库中添加*、*上传*和*删除*）

但在多对多关系上，这是不可能的！因为每次我选择一种媒体时，它都会取代之前的媒体。所以我不能选择多种媒体类型。

我想过使用与画廊相同的方式（`galleryHasMedia`）

```
->add('galleryHasMedias', 'sonata_type_collection', array(
            'by_reference' => false
        ), array(
            'edit'     => 'inline',
            'inline'   => 'table',
            'sortable' => 'position',
            'link_parameters' => array('context' => $context)
        )) 
```

然而，它真的很复杂。如何通过多对多关系在另一个实体上选择或上传多个媒体文件？

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2014-02-25T10:14:16.063

我和你有同样的问题，但我已经解决了。

首先，您可能希望选择一对多/多对一关系（使用中间实体）而不是多对多关系。为什么？因为这允许额外的列，例如`position`列。这样，您可以以任何您想要的方式重新排序图像。在多对多关系中，链接表只有两列：关联表的 id。

从[教义文档](http://doctrine-orm.readthedocs.org/en/latest/reference/association-mapping.html#many-to-many-unidirectional)：

> (...) 您经常希望将附加属性与关联关联，在这种情况下您需要引入关联类。因此，直接的多对多关联消失了，取而代之的是三个参与类之间的一对多/多对一关联。

所以我将此添加到我的产品映射文件中：（如您所见，我使用 YAML 作为我的配置文件格式）

```
oneToMany:
    images:
        targetEntity: MyBundle\Entity\ProductImage
        mappedBy: product
        orderBy:
            position: ASC 
```

我创建了一个新的 ProductImage 映射文件：

```
MyBundle\Entity\ProductImage:
    type: entity
    table: product_images
    id:
        id:
            type: integer
            generator: { strategy: AUTO }
    fields:
        position:
            type: integer
    manyToOne:
        product:
            targetEntity: MyBundle\Entity\Product
            inversedBy: images
        image:
            targetEntity: Application\Sonata\MediaBundle\Entity\Media 
```

使用命令行 ( `php app/console doctrine:generate:entities MyBundle`) 我创建/更新了相应的实体 (`Product`和`ProductImage`)。

接下来，我创建/更新了 Admin 类。产品管理员.php：

```
class ProductAdmin extends Admin
{
    protected function configureFormFields(FormMapper $formMapper)
    {
        $formMapper
            // define other form fields
            ->add('images', 'sonata_type_collection', array(
                'required' => false
            ), array(
                'edit' => 'inline',
                'inline' => 'table',
                'sortable'  => 'position',
            ))
        ;
    } 
```

ProductImageAdmin.php：

```
class ProductImageAdmin extends Admin
{
    protected function configureFormFields(FormMapper $formMapper)
    {
        $formMapper
            ->add('image', 'sonata_type_model_list', array(
                'required' => false
            ), array(
                'link_parameters' => array(
                    'context' => 'product_image'
                )
            ))
            ->add('position', 'hidden')
        ;
    } 
```

不要忘记将它们都添加为服务。如果您不想在仪表板上显示 ProductImage 表单的链接，请添加`show_in_dashboard: false`标记。（您如何执行此操作取决于您使用的配置格式（yaml/xml/php））

在此之后，我的管理表单正常工作，但是我在尝试保存产品时仍然遇到了一些问题。我必须执行以下步骤才能解决所有问题：

首先，我必须为 Product 实体配置级联持久化操作。同样，如何执行此操作取决于您的配置格式。我使用的是 yaml，所以在`images`一对多的关系中，我添加了级联属性：

```
oneToMany:
    images:
        targetEntity: MyBundle\Entity\ProductImage
        mappedBy: product
        orderBy:
            position: ASC
        cascade: ["persist"] 
```

这让它工作（或者我认为），但我注意到`product_id`数据库中的设置为`NULL`. 我通过在类中添加`prePersist()`和`preUpdate()`方法解决了这个问题`ProductAdmin`：

```
public function prePersist($object)
{
    foreach ($object->getImages() as $image) {
        $image->setProduct($object);
    }
}

public function preUpdate($object)
{
    foreach ($object->getImages() as $image) {
        $image->setProduct($object);
    }
} 
```

...并在实体的`addImages()`方法中添加了一行：`Product`

```
public function addImage(\MyBundle\Entity\ProductImage $images)
{
    $images->setProduct($this);
    $this->images[] = $images;

    return $this;
} 
```

这对我有用，现在我可以在我的产品中添加、更改、重新排序、删除等图像。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2014-02-18T11:04:33.373

您需要依赖 MediaBundle Gallery。在您的实体中，您类似于：

```
/**
 * @ORM\ManyToOne(targetEntity="Application\Sonata\MediaBundle\Entity\Gallery")
 * @ORM\JoinColumn(name="image", referencedColumnName="id")
 */
private $images; 
```

然后在您的表单中，您将能够使用以下内容将图库链接到您的对象：

```
->add('images', 'sonata_type_model_list', array('required' => false), array('link_parameters' => array('context' => $context))) 
```

# c++ - 在 C++ 中为 volatile 数组赋值

> ID：11612967
> 
> 赞同：1
> 
> 时间：2012-07-23T12:55:34.317
> 
> 标签：c++, arrays, volatile

我有一个类型的易失性数组`MyType`映射到共享内存，使用 CreateFileMapping 等创建：

```
volatile MyType *arr; 
```

如何为数组的索引赋值？例如：

```
MyType a;
arr[n] = a; 
```

我得到编译错误：

> 错误 C2678：二进制“=”：未定义运算符，该运算符采用“volatile MyType”类型的左操作数（或没有可接受的转换）

我希望能够同时分配`MyType`给易失性和非易失性数组。

提前致谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-23T12:57:42.913

您没有将赋值运算符标记为`volatile`。volatile 正确性与 const 正确性相同——您有一个`volatile`对象但没有 volatile 运算符，因此调用格式不正确。

# javascript - HTML5 画布绘制两个矩形而不是一个

> ID：11612969
> 
> 赞同：0
> 
> 时间：2012-07-23T12:55:36.813
> 
> 标签：javascript, android, html, animation

嗨，我对 Android 4.1 上的 JQuery Mobile 1.1.1、Phonegap 2.0 有疑问。我想用 JS 和 HTML5 在画布上绘制一个矩形。

那是我的 HTML5 页面：

```
<!DOCTYPE html>
<html>
<head> 
<title>App</title> 
<meta name="viewport" content="width=device-width, initial-scale=1"> 

<link rel="stylesheet" href="jquery.mobile-1.1.1.min.css"/>
<script src="jquery-1.7.2.min.js"></script>
<script src="jquery.mobile-1.1.1.min.js"></script>
<script type="text/javascript" charset="utf-8" src="cordova-2.0.0.js"></script>
</head>

 <body>
<div data-role="page" id="dataPageBattery" data-theme="a">
    <h2 align="center">Battery State</h2>
    <div data-role="header" data-position="fixed" data-theme="a">
        <h1>Car Data</h1>
    </div>

    <div data-role="content" align="center">
        <canvas id="myBatteryCanvas" width="device-width" height="device-height">                        
            Sorry, your browser doesn't support canvas technology        
        </canvas>

    </div>
        <h4 align="center" id="batteryProzent"></h4>
        <script type="text/javascript" src="battery.js"></script>

    <div data-role="footer" data-position="fixed" data-id="persFooter">
        <div data-role="navbar">
            <ul>
                <li><a href="index.html" data-icon="home">Connect</a></li>
                <li><a href="carView.html" data-icon="gear">Vehicles</a></li>
                <li><a href="infoView.html" data-icon="info">Info</a></li>
            </ul>
        </div>
    </div>

<script>                                       
    $('#dataPageBattery').on('swipeleft',function(){ 
    $.mobile.changePage("geolocation.html", { transition: "slide"});    
    console.log('slideLeft');
    })  

    $('#dataPageBattery').on('swiperight',function(){ 
    $.mobile.changePage("fuelGauge.html", { transition: "slide", reverse: 'true'}); 
    console.log('slideLeft');
    })  
</script>
</div>

 </body>
 </html> 
```

我在内容 div 之后加载了 Java Script 文件。JS 文件如下所示：

```
var canvas = document.getElementById("myBatteryCanvas");
var context = canvas.getContext("2d");
var WIDTH = canvas.width;
var HEIGHT = canvas.height;
var x = 50;
var y = HEIGHT - 30;
var mx = 2;
var my = 1;
var prozent = 1;

context.clearRect(0, 0, WIDTH, HEIGHT);

function initBatt() {
x = 50;
y = HEIGHT - 30;
mx = 2;
my = 1;
prozent = 1;

context.clearRect(0, 0, WIDTH, HEIGHT);
context.rect(122, 40, 54, 100);
context.fillStyle = 'floralwhite';
context.fill();
context.lineWidth = 4;
context.strokeStyle = '#303030';
context.stroke();

}

 initBatt();
 //$(document).on("pageshow", initBatt); 
```

问题：如果我使用最后一行来启动该功能，我将在第二次加载此页面后在画布上获得两个矩形。第一次，有一个矩形，没关系。第二次，有两个。在正确的坐标上，另一个在我的矩形后面的右边。但为什么？

如果我使用 initBatt(); 相反，声明完全没有问题。FF 或 IE9 的两条线都没有问题，仅在 Android 4.1 上！

想法？

到目前为止感谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-24T11:21:55.623

jQuery Mobile 缓存页面，因此它可能会`initBatt()`在缓存页面上调用您的函数，导致它再次绘制矩形，或者无论如何都沿着这些线绘制。

# jquery - Jquery Datepicker在回发后消失

> ID：11612976
> 
> 赞同：0
> 
> 时间：2012-07-23T12:55:59.267
> 
> 标签：jquery, asp.net-mvc, datepicker, postback

我在 $(document).ready 子句中包含一个 Jquery Datepicker。

我的问题是当我执行 PostBack 时，它会返回视图并且我的 DatePicker 停止工作。我发现了许多与此问题相关的消息，但它们与 WebForms 中的 Web 应用程序有关，因此他们说您必须在 Page_Load 方法中包含控件的声明。任何想法如何在 ASP.NET MVC 中解决这个问题？我是初学者，对此我了解不多。

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-23T15:21:20.650

您可能需要在回发后重新初始化日期选择器。如果您通过 Ajax 调用重新加载页面，页面元素将不知道先前的初始化。我在我的 Ajax 成功处理程序中包含了一个重新初始化函数。

# javascript - Search for specific name across (some) tags and convert to link

> ID：11612977
> 
> 赞同：3
> 
> 时间：2012-07-23T12:56:04.710
> 
> 标签：javascript, html

I am writing some javascript for my website.

I would like to be able to turn (using javascript) specific names into links.

for example, given the name Benjamin it would turn :

```
Hello my name is Benjamin 
```

into

```
Hello my name is <a href='something'>Benjamin</a> 
```

The trick is, I don't know what names I need to convert in advance, I receive those in an ajax response. Also, I need to be able to handle stuff along the lines of

```
<b>B</b>enjam<b>in</b> 
```

while not touching stuff like

```
B<br />enja<br />min 
```

I would like to know what would be the best practice for designing something able to do this sort of parsing. If there is a ready solution that would probably be better.

Thanks in advance for the help

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-23T13:12:07.257

Apply this to your text:

```
.replace(new RegExp("Benjamin".split('').join(".*?"),"g"),'<a href="#">$&</a>')
                  //    ^------------------------ word to be replaced 
```

[Live demo](http://jsfiddle.net/9MEfS/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-23T14:14:38.160

This Regex matches all those Names, this way:

```
var str1 = "Hello Im Benjamin";
var str2 = "Hello Im <b>Benjamin</b>";
var str3 = "Hello Im <b>Benj<b>amin</b></b>"
var str4 = "Hello Im <br>Benjamin< />"    

console.log(str1.match(/ (?:(?:<b>)?[^><\s]?(?:<\/b>)?)*$/)); //[" Benjamin"] 
console.log(str2.match(/ (?:(?:<b>)?[^><\s]?(?:<\/b>)?)*$/)); //[" <b>Benjamin</b>"] 
console.log(str3.match(/ (?:(?:<b>)?[^><\s]?(?:<\/b>)?)*$/)); //[" <b>Benj<b>amin</b></b>"] 
console.log(str4.match(/ (?:(?:<b>)?[^><\s]?(?:<\/b>)?)*$/)); //null
​ 
```

[Fiddle](http://jsfiddle.net/EcLkp/)

# delphi - 在XE2上重新编译indy10源代码失败

> ID：11612978
> 
> 赞同：1
> 
> 时间：2012-07-23T12:56:06.780
> 
> 标签：delphi, indy, indy10, c++builder-xe2

根据[问题](https://stackoverflow.com/questions/11612459/why-idhttpproxyserver-changes-the-http-version-of-the-requests)，我正在尝试修改 Indy10 (IdHTTPProxyServer.pas) 的源代码。但未能重新编译 indy10 项目...我的 IDE 是 XE2，以下是我所做的步骤..

1.  在 Menu->Component->Install Packages 中删除包“Indy 10 Core Design Time”和“Indy 10 Protocols Design Time”

2.  打开 IndyProtocols.dpk

3.  在 IdHTTPProxyServer.pas 中进行更改

4.  编译

然后有时会显示错误“rtl160.bpl 中的访问冲突”，有时会显示错误“xxxxxx 处 coreide160.bpl 中的异常 xxx（任何组件）”

由于我对开发环境并不熟悉，我完全不明白出了什么问题......任何帮助将不胜感激。

谢谢

* * *

感谢所有回复。您的所有建议让我更加了解开发环境。最后我接受@Marcus Adams 的回答，因为项目中有不止一个开发人员。最好不要更改 IDE 的源文件。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-23T14:20:38.543

通常，当我更改源代码时，我会将修改后的源文件保存到我的项目文件夹中。这样，只有那个单元被重新编译。

如果您更改了特定的 .pas 文件，只需将其保存到您的项目文件夹并重新编译。保持原始 Delphi（和 Indy）源文件不变。

这也使将来更容易更新，因为您的更改不会在更新后丢失，并且您的更改不会影响其他项目。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-23T13:54:24.847

有几个 VCL 设计时包（与 DataSnap 相关）链接到 Indy 的捆绑版本。如果你要更新你的 indy，你需要做以下事情：

1.  找到那些包（我不记得它们，但我会回复你），然后从已安装的包列表中删除它们。
2.  从已安装的软件包列表中删除捆绑的 Indy 软件包。
3.  重命名捆绑的 Indy dcu 目录，这样 IDE 就不会混淆要使用的 Indy dcu 实例。
4.  重命名捆绑的 Indy bpl 文件，这样 IDE 就不会加载错误的文件。

只有这样你才能编译你的新版本的 Indy。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-23T14:25:48.880

您提到的两个错误都不是编译器错误。它们不太可能是由编译器本身引起的。它们可能来自导致编译的调用链中的其他地方。

一个短期的解决方案是从命令行编译。MSBuild 是 Delphi 在后台使用的构建引擎。

1.  像往常一样编辑 IDE 中的任何 Indy 文件，保存更改然后关闭 IDE。
2.  从开始菜单打开*Rad Studio 命令提示符。*这将确保设置正确的环境变量以运行命令行构建。您也可以使用标准命令提示符并运行 rsvars.bat 来完成同样的事情。
3.  用于`cd`将目录更改为 IndyProtocols.dpk 的位置
4.  类型`msbuild IndyProtocols.dpk /target:Build /p:config=Release`

如果你想做一个调试版本，只需更改`/p:config=Release`为`/p:config=Debug`. 请注意，使用 msbuild 时区分大小写很重要，因为项目文件是 xml，区分大小写。

此外，为了它的价值，您应该尽量避免直接对 IDE 附带的库进行更改。如果您在提供的库中发现需要为特定项目修复的错误，您通常可以通过将有问题的文件复制到项目的文件夹中并在那里对其进行更改来解决。您可能还需要复制其他几个依赖文件。如果您采用这种方法，编译器将通知您需要复制哪些依赖项并出现错误，例如`Unit * was compiled with a different version of *.*`

* * *

现在，如果您真的想调试 IDE，您可以尝试，但是整个 IDE 中使用的`rtl`和`coreide`包都被编译为发布版本（没有调试信息），因此可能很难确定导致您看到的错误的原因。

无论如何，您可以在项目管理器中加载 IndyProtocols.dpk 运行 IDE 的第二个实例。然后使用`Run > Attach to Process`from 第一个 IDE 实例将调试器附加到第二个 IDE 实例。之后，只需尝试从第二个 IDE 实例构建 IndyProtocols.dpk。如果一切按预期进行，调试器将捕获错误并让您在错误发生的地方中断，以便您可以挖掘。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-23T16:23:07.190

您可以跳过组件/包编译步骤，只需在运行时创建 Indy 组件。

将 Indy Lib Core/Protocols/System 路径添加到项目搜索路径中，您就完成了。

# java - 签署 jar（部署为小程序）后，我可以在任何域上托管该小程序吗？

> ID：11612980
> 
> 赞同：3
> 
> 时间：2012-07-23T12:56:08.130
> 
> 标签：java, jar, certificate

我即将从 verisgn 购买证书以对 jar 文件进行签名，以便在提示用户运行 java 小程序时显示发布者信息。我可以使用我购买的证书对驻留在多个域中的 jar 文件（作为小程序运行）进行签名 - 没有安全警告吗？

我想我最终要问的是证书是否仅限于单个域。如果您想在不同的域上使用相同的 SSL 证书，您必须如何购买通配符 SSL 证书。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-19T20:43:20.247

是的，我可以使用我购买的证书来签署 jar 文件，即使它们位于多个域中。

但是，如果网站有自签名证书，Java 会发出警告。

# javascript - 从html中的“data-”中提取数值数据

> ID：11612981
> 
> 赞同：-1
> 
> 时间：2012-07-23T12:56:14.423
> 
> 标签：javascript, html, html-content-extraction

在下面的 HTML 中，我想简单地将两个数字相除并将结果返回到页面。javascript 实现了这一点，但是，变量 A (GAL2_G2rAimTonsPerHr) 每 10 秒左右从我们的 PI 服务器（历史数据库）更新一次。如何将变量 A 设置为等于变化的值？有没有办法可以将它存储在临时变量中以用作脚本中的除数？

```
< td align="left" style="font-size: 12px" width="60px"                     
 < span class='PIData' data-tag='GAL2_G2rAimTonsPerHr' data-on_pi_change='truncReading' >< /span>
< /td>

<SCRIPT LANGUAGE="JavaScript">
  function divide(n1,n2)
  {
    ans = n1/n2;
    document.write(" "+ans+"<BR>");
    return ans;
  }

  var a = 'GAL2_G2rAimTonsPerHr'????;

  var b = 2;

  divide(a,b);                          

</SCRIPT> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-23T14:18:08.257

您已经说过实际元素将由 PI-Plug 更新。如果是这样，而且它确实是一个数字，那么：

```
var value = parseInt($(".PIData[data-tag]").attr("data-tag"), 10); 
```

该`.PIData[data-tag]`部分是具有`class="PIData"`和`data-tag`属性的元素的 CSS 样式选择器。然后剩下的就是获取该属性的值并将其解析为十进制数（因为它将是一个字符串，例如`"300"`而不是`300`）。

或者，`attr`您可以使用`data`并省略`data-`属性名称的一部分：

```
var value = parseInt($(".PIData[data-tag]").data("tag"), 10); 
```

我不这样做是因为我不喜欢`data`函数是不对称的这一事实（它从属性中读取`data-*`但不写入属性），但是对于您正在做的事情来说它可以正常工作。

仔细阅读[jQuery API 文档](http://api.jquery.com)将是一个好主意。从字面上看，它只需要大约一个小时，它确实非常非常快地回报你。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-07-23T12:59:33.417

我没有正确回答您的问题，但是为了获取数据属性，您可以使用 jquery.data() 方法来获取数据属性[Jquery.data()](http://api.jquery.com/data/)。如果您正确指定您的要求，这将很有帮助

```
var yourVar=$('#YourElement').data("Key"); 
```

# c# - 在 .NET C# 中从未知文化中解析双精度的最佳方法是什么？

> ID：11612982
> 
> 赞同：3
> 
> 时间：2012-07-23T12:56:19.247
> 
> 标签：c#, .net, parsing, double

我正在使用 XML 文件来存储用户数据。可以从不同的本地化保存和加载文件。根据文化，双数可以保存为“1.2345”或“1,2345”。区别在于小数分隔符。

目前我正在使用以下代码进行解析：

```
private double StringToDouble(string input)
{
    string decimalPoint = NumberFormatInfo.CurrentInfo.NumberDecimalSeparator;

    if (!input.Contains(decimalPoint))
    {
        input = input.Replace(".", decimalPoint);
        input = input.Replace(",", decimalPoint);
    }

    return double.Parse(input);
} 
```

上面的代码运行良好，但显然不是最好的。你能提供更好的解决方案吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-23T13:07:35.310

如果您将您的双精度作为双原语而不是字符串序列化到您的 xml 文件，它将使用“。”保存它。所以你可以用不变的文化来解析它。

如果它保存为文本，你可以尝试这样的事情：

```
double result = double.Parse(input.Replace(",", "."), CultureInfo.InvariantCulture); 
```

请注意，对于像“1.234.567,89”这样的数字中的千位分隔符，您仍然会遇到问题。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-23T13:13:36.380

老实说，我不认为您当前的解决方案太糟糕了。它并不优雅，但你得到了不优雅的数据。正如其他人所建议的那样，我会看看是否有可能以一致的格式获取 XML 文件，或者*至少*将 XML 文件与文化信息一起保存：

```
<yourRootElement xml:lang="en-US"> 
```

这样你就不用猜了。

除此之外，您还可以执行以下操作：

```
private double StringToDouble(string input)
{
    var last = input.LastIndexOfAny(new[] {',', '.'});
    var separator = last >= 0 ? input[last] : '.';
    var clone = (CultureInfo)CultureInfo.InvariantCulture.Clone();
    clone.NumberFormat.NumberDecimalSeparator = separator.ToString(CultureInfo.InvariantCulture);
    return double.Parse(input, clone);
} 
```

`CultureInfo.Clone` is expensive, but you can cache culture info based on what the separator is. This also gives you the flexibility to set up different thousands separators, if needed. You would have to assume what the thousands separator is depending on the decimal separator.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-23T13:00:48.200

我建议以固定的 fformat 保存数字，即使用固定的小数分隔符。这意味着应该执行从用户文化到必须保存数字的文化的转换。

# jira - 如何使某些 JIRA 问题仅对一群人可见？

> ID：11612988
> 
> 赞同：2
> 
> 时间：2012-07-23T12:56:26.697
> 
> 标签：jira, redmine, tracker

我的公司正在尝试 JIRA，我们想知道是否有办法让问题只对特定人群可见。例如，如果该问题在德国开放，则它应该只对德国用户可见，如果它在日本只对日本用户开放。唯一的例外是能够在全局范围内查看的管理员和开发人员。在 redmine 中，这很容易通过子项目功能实现，但是如何使用 JIRA 来实现呢？

PS：我希望它是自动的，而不是基于用户必须选择的字段。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-23T13:33:23.797

我相信没有第三方插件（或为您的 JIRA 构建的自定义插件）是不可能的。

JIRA 具有“问题安全”概念，允许您控制谁可以看到问题。您可以使问题仅对报告者和您的员工可见（默认情况下）。但是您不能（自动）使其对与 Reporter 关联的某些用户组可见。

在我看来，最短的实施路径是

1.  创建一个“组”类型的自定义字段，将其称为“可见性组”。
2.  创建问题安全方案，默认情况下会使问题对您的员工和在“可见性组”字段中选择的组的成员可见。
3.  创建一个自定义插件（或让 Atlassian 专家为您执行此操作），该插件会将 Visibility Group 字段的默认值设置为基于 Reporter 的某个值——这可以作为“创建”步骤。

可能已经有一个插件，但快速搜索没有任何建议。

希望这可以帮助！伊戈尔

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-23T13:30:28.910

要限制 JIRA 中的问题可见性，您必须首先定义**问题安全模式**。Atlassian 提供了一个[**教程**](https://confluence.atlassian.com/display/JIRA/Configuring+Issue-level+Security)。

您仍然必须首先将您的用户分配到组（更可取）或角色，以便能够利用这些限制。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-03-11T18:58:30.810

通常我们在问题安全方案中定义级别，然后使用诸如 Script Runner 插件之类的东西来创建一个在创建时设置问题安全性的 post 函数。

# sql - TortoiseSVN SQL 脚本自动化

> ID：11612989
> 
> 赞同：0
> 
> 时间：2012-07-23T12:56:28.060
> 
> 标签：sql, sql-server, tortoisesvn

我想在 TortoiseSVN SQL 脚本下自动执行提交（提交文件列表已经存在）。

照我看来：

执行更新命令时执行批处理文件，该文件执行以下操作：

1.  获取添加/修改的 *.sql 文件列表（可能将它们复制到某个临时目录）
2.  使用 sqlcmd 执行这​​些文件（如果文件被复制到一个单独的目录，那么这可以使用来完成`for %f in (c:\MySQLScripts\*.sql) do sqlcmd -i %f`）

是否有针对此类流程的解决方案（针对同一目标的任何其他流程）？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-23T15:27:58.540

几年前，我们尝试按照您的建议进行操作，发现协调脚本执行以解决所有依赖项（例如外键）非常复杂，如果不是不可能的话。

我们决定使用 RedGate SQL 源代码控制（与 Subversion 集成，如 TortoiseSVN）和 SQL Compare 用于从源代码控制进行部署。你应该看看：[http](http://www.red-gate.com/) ://www.red-gate.com/ 。

另一种方法是使用 Management Studio“生成脚本”功能（右键单击对象资源管理器中的数据库，任务 -> 生成脚本）。它将创建一个包含所有数据库对象的“主脚本”。您可以控制此脚本的源代码，并使用 sqlcmd 执行它。我不能说这个实用程序管理我上面提到的依赖项的效果如何。

# linux - 在 bash 脚本中执行多个命令

> ID：11612996
> 
> 赞同：0
> 
> 时间：2012-07-23T12:57:10.450
> 
> 标签：linux, bash, shell, sed, awk

我有一个在我的 bash 脚本中运行的命令；

```
daemon -20 $exec -a  -b $var & 
```

我想将 taskset 命令与我的命令 multiply 一起使用；

```
daemon -20 ; taskset -c 0,1 $exec -a  -b $var & 
```

但它不起作用。有什么问题。例如，当我使用带有 echo 的任务集时，它可以工作。

它不适用于守护进程。

更新：@chepner 我认为您建议的第三种方法。它可以完成，但我不想再次提取 proc id。我使用守护进程作为守护进程运行并将 -20 设置为进程的不错值。所以如果有办法使用taskset设置CPU亲和力和nice命令一起设置优先级，也很好

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-23T13:30:46.633

分号分隔两个不同的进程（将其视为可见的换行符）。

当您运行 时`daemon -20 $exec -a -b $var &`，您正在运行一个命令，`daemon`该命令（除其他外）将存储在变量中的参数`exec`作为程序作为守护程序运行。

[如果我猜对了，你想使用`taskset`命令启动两个守护进程。我想你想要的是

```
taskset -c 0,1 daemon -20 taskset -c 0,1 $exec -a  -b $var 
```

更新：我猜错了！无论如何，这似乎有一个可怕的重复错误，任务集被调用了两次。]

有几种可能：

1.  `daemon taskset -c 0,1 $exec -a -b $var`，看起来不错，但我怀疑是错误的，因为它可能会`taskset`生成一个守护进程，而不是`$exec`.

2.  `taskset -c 0,1 daemon $exec -a -b $var`，这只是我之前回答的稍微更正的形式，额外调用了`taskset`删除。我怀疑这会创建两个你不想要的守护进程。

3.  像最初使用`daemon -20 $exec -a -b $var &`. 接下来，找到`$exec`它正在运行的进程 ID。最后，运行`taskset -c 0,1 -p $PID`，其中`PID`的进程 ID 是`$exec`.

我认为您需要使用#3 的原因是每个都将命令作为参数并运行该命令`daemon`。`taskset`任何一方都不能（轻松地）按照您的建议对另一方在一行中启动的命令采取行动。

* * *

你的尝试，

```
daemon -20 ; taskset -c 0,1 $exec -a  -b $var & 
```

`daemon`仅使用单个参数 ( ) 进行调用，该参数`-20`可能会或可能不会做任何事情（我不熟悉该`daemon`命令）。完成后，它调用`taskset`命令`$exec`在两个处理器上运行名为 in 的可执行文件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-23T13:44:15.603

我不确定我是否正确理解你，如果这不能回答你的问题，请原谅。

你可以这样做：

```
daemon -20 $exec -a -b $var &
taskset -p -c 0,1 $! 
```

它将运行 daemon 命令，然后立即设置它的 CPU 亲和性，或者：

```
taskset -c 0,1 daemon -20 $exec -a -b $var & 
```

它首先以适当的亲和力启动守护进程。

免责声明：我不熟悉taskset命令；这个答案完全基于我对任务集手册页的阅读。

编辑：我不熟悉该`daemon`命令的确切作用。如果您只想以给定的亲和力在后台运行存储在 $exec 中的命令，这应该就足够了：

```
taskset -c 0,1 $exec -a -b $var & 
```