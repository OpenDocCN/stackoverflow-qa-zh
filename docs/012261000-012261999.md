# StackOverflow 问答 12261000-12261999

# jquery - Jquery Accordion 删除边框顶部

> ID：12261002
> 
> 赞同：2
> 
> 时间：2012-09-04T09:57:46.230
> 
> 标签：jquery, html, css, border

在下面的代码行中，如何删除边框顶部？我试过“border-top：none;” 但这没有用。任何帮助将不胜感激！

`dd { border-top: 0; font-size: 12px; &:last-of-type { border-top: 1px solid white; position: relative; top: -1px; }`

[http://jsfiddle.net/q2Gm9](http://jsfiddle.net/q2Gm9)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-04T10:02:49.683

```
border-top: 0 !important; 
```

您需要添加 !important，它告诉样式优先于以前的样式。

关于 css 如何定位元素以及优先级可能值得一读：这篇文章比我能更好地解释它： [CSS 选择器之间的优先级是什么](https://stackoverflow.com/questions/1637343/what-are-the-priorities-among-css-selectors)

注意：如果边框样式设置不同，我似乎记得在某些浏览器中遇到了一些问题，例如，如果您向所有边框添加样式，然后尝试用单独的边框设置覆盖，例如border-top - 对不起我不记得确切的细节，但如果您有其他边界问题，请记住一些事情。

* * *

更新：我已经简化了 css 以删除嵌套 css 和不必要的重复选择，请在此处查看[http://jsfiddle.net/VWQct/24/](http://jsfiddle.net/VWQct/24/)。这是你想要达到的目标吗？

* * *

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-04T10:38:29.103

```
<dt><a href="">Panel 1</a></dt>
on Panel 1 click you should set border-bottom:0px !important;
because border-top is working fine. 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-04T10:19:26.887

试试这个

```
border-top: none !important; 
```

# lotus-notes - 如何使用 Lotus 脚本更改 alterrowcolor 和 Header Style？

> ID：12261004
> 
> 赞同：0
> 
> 时间：2012-09-04T09:57:51.857
> 
> 标签：lotus-notes, lotusscript

我的要求是，我有数百个视图。我想让它们成为标准颜色和 UI。很简单，我用于通过 NotesViewColumn 类更改列标题和列值的字体颜色。但我不知道哪个类具有操作栏和查看备用颜色和 Heaer 样式等属性，

在 javascript 中也是受欢迎的。，但它应该改变其作为设计师级别的属性。

提前致谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-04T12:20:57.310

您有 3 个选项：

1.  最简单的一个：去 Ytria 购买[ezView](http://www.ytria.com/WebSite.nsf/WebPageRequest/Solutions_viewEZen?OpenDocument&Lang=en)。应该花不到一个小时来整理您的观点
2.  创建一个外观与您希望视图外观相同的视图，然后遍历脚本中的所有视图，重命名它们，根据您的视图模板创建一个新视图，并从旧视图复制视图列并调整视图选择公式（全部在 LotusScript 中）
3.  在 DXL 中导出您的视图并运行一些 XSLT 或搜索/替换以调整属性

希望有帮助

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-06T12:24:34.410

我刚刚运行了这个代理，将我的（小）测试数据库中的所有视图更改为具有备用行颜色，并且它起作用了。

```
Sub Initialize
Dim session As New NotesSession
Dim db As NotesDatabase
Dim exporter As NotesDXLExporter
Dim importer As NotesDXLImporter

Dim out As String
Dim infile As string
Dim pointer As long
Dim filenum As Integer
Dim altrow As integer

Dim unid As String
Dim doc As notesdocument
Set db = session.currentdatabase
Set exporter = session.Createdxlexporter
Set importer = session.Createdxlimporter

Dim count As Integer
count = 1
ForAll v In db.views
    unid = v.UniversalID
    Set doc = db.getdocumentbyunid(unid)
    out =  exporter.Export(doc)
    altrow = instr(out, "altrowcolor")
    If altrow > 0 Then
        pointer = InStr(altrow, out, "=")
        out = Left(out,pointer) & "'#f7f7f7'" & Mid(out, pointer+10)
    else
        pointer = InStr(out, "bgcolor=")
        pointer = InStr(pointer, out, " ")
        out = Left(out,pointer) & "altrowcolor='#f7f7f7' " & Mid(out, pointer+1)
    End if
    Call importer.setinput(out)
    Call importer.setoutput(db)
    importer.Designimportoption = 5
    importer.Documentimportoption = 5
    Call importer.Process()
    out = ""
    infile = ""
    count = count + 1
End ForAll
Print count & " views processed"
End Sub 
```

如果您的视图设计更大，您可能希望使用 NotesStream 而不是 String 来表示“out”。在这种情况下，从帮助文件中，我相信必须先关闭并重新打开流，然后才能将其用于导入。

为了进一步研究，我建议将“out”写入文件，并检查 xml 以查找其他“隐藏”参数。玩得开心，菲尔

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-04T14:48:02.000

我也可以推荐ezView。让修改视图变得轻而易举。我还使用 actionBarEZ 跨应用程序修改操作栏。我在博客中介绍了我在 Domino Designer 中使用的一些不同的开发工具，您可以在此处找到条目：http: [//www.bleedyellow.com/blogs/texasswede/entry/mydevelopmenttools](http://www.bleedyellow.com/blogs/texasswede/entry/mydevelopmenttools)

# delphi - 如何更新正在运行的 EXE？

> ID：12261007
> 
> 赞同：2
> 
> 时间：2012-09-04T09:57:58.080
> 
> 标签：delphi, auto-update

如何用新版本替换正在运行的 EXE？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-04T11:39:00.220

你可以这样[做](https://stackoverflow.com/questions/799656/renaming-a-running-process-file-image-on-windows)：

1.  重命名正在运行的EXE，
2.  将新版本复制到旧名称，
3.  新版本启动时删除重命名的EXE

请注意，这绝对[不是推荐的行为](https://stackoverflow.com/questions/6695496/rename-a-running-executable-exe-file)。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-04T10:04:11.740

简短：通过停止它并启动新版本。

Long：当您启动应用程序时，操作系统会将应用程序加载到内存中（或至少是所需的部分）并设置所有内存区域以运行程序。在应用程序运行时，操作系统不再需要二进制文件（您称之为 EXE）。

如果您想替换正在运行的应用程序中的代码，您可以通过替换代码段来实现。我不知道在 Windows 中是否可能或容易。另一种选择可能是使用某种插件系统，您可以在应用程序仍在运行时替换它的某些部分。

# iphone - 奇怪的警告关闭模式视图控制器

> ID：12261008
> 
> 赞同：19
> 
> 时间：2012-09-04T09:57:59.170
> 
> 标签：iphone, ios, cocoa-touch, ios5, ios6

我正在使用 iOS 6。我的应用程序有一个标准的导航控制器，其中嵌入了一个 CustomViewController。在这个控制器中，我创建了一个模态视图，如下所示：

```
-(IBAction)presentModalList:(id)sender {
    UIStoryboard *storyboard = [UIStoryboard storyboardWithName:@"MainStoryboard" bundle:nil];
    StationsListViewController *list = [storyboard instantiateViewControllerWithIdentifier:@"StationsListViewController"];
    [list setStationsData: [self.stationsData allValues]];
    [self presentModalViewController:list animated:YES];
} 
```

模态控制器显示完美，但关闭会生成警告。此控制器中的解除方法是：

```
-(IBAction)backToMap
{
    [self dismissModalViewControllerAnimated:YES];
} 
```

生成的警告是警告：

**在演示或关闭过程中尝试从视图控制器 < UINavigationController: 0x1ed91620 > 关闭！**

有什么线索吗？

谢谢

* * *

## 回答 #1

> 赞同：28
> 
> 时间：2012-10-25T11:59:59.870

我意识到这是一个迟到的答案，但也许这会帮助其他人寻找解决方案，这就是我所做的：

```
-(IBAction)backToMap
{
    if (![[self modalViewController] isBeingDismissed])
        [self dismissModalViewControllerAnimated:YES];
} 
```

对我来说，我发现这行代码被多次调用，我不知道为什么，所以这是最简单的解决方法。

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2013-01-17T23:26:55.807

感谢 JDx 让我走上正轨。我对其进行了调整以形成此解决方案，该解决方案将在不使用 iOS 6 中已弃用的功能的情况下删除警告：

```
-(IBAction)backToMap
{
    if (![self.presentedViewController isBeingDismissed]) {
        [self dismissViewControllerAnimated:YES completion:^{}];
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-05-14T19:31:54.983

我发现这种方法不可靠——比如说五分之一的情况下我仍然会看到错误。

我的解决方案是使用完成块来设置一个标志来控制是否可以安全地关闭 - 这样您就不需要检查视图是否被关闭。

```
-(IBAction)presentModalView:(id)sender {
    :
    self.canDismiss = NO;
    [self presentViewController:aVC animated:YES completion:^{ 
      self.canDismiss = YES; 
     }];
    :
} 
```

在发生解除的代码中，只需检查标志：

```
-(void)dismisser {
    :
    if (self.canDismiss) {
      [self dismissViewControllerAnimated:YES completion:nil];
    }
    :
} 
```

嘿presto，没有更多的错误！

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-08-24T11:55:40.427

针对iOS6，这对我有用：

```
if (![self.presentedViewController isBeingDismissed]) 
    [self.presentedViewController dismissViewControllerAnimated:YES
                                                     completion:nil]; 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-10-24T17:35:38.827

完成dismiss方法后，您可以做任何您想做的事情：

```
-(IBAction)backToMap
{
    [self dismissViewControllerAnimated:YES
                             completion:^{
                                 //Do something here
                             }];
} 
```

# ruby-on-rails-3 - Rails 3 gem 使用

> ID：12261011
> 
> 赞同：1
> 
> 时间：2012-09-04T09:58:04.350
> 
> 标签：ruby-on-rails-3, gem

我在我的 Gemfile [https://github.com/peter-murach/github#readme](https://github.com/peter-murach/github#readme)中安装了这个 gem 。我试图在控制器的方法中调用“github = Github.new”，但出现此错误：

```
uninitialized constant ApplicationsController::Github 
```

如果我需要'github_api'，我会得到这个

```
cannot load such file -- github_api 
```

我如何以及在哪里调用 gem 的方法？

# android - 简单的生产者-消费者示例

> ID：12261012
> 
> 赞同：0
> 
> 时间：2012-09-04T09:58:07.110
> 
> 标签：android, audiorecord

我正在开发简单的生产者-消费者示例。一个线程使用类记录音频样本`AudioRecord`并将它们写入缓冲区。第二个只是读取缓冲区并且什么都不做。当用户想要停止记录时，第一个线程将特殊字符写入缓冲区，并指示另一个读取结束。这是我的代码

```
public class SpellCollectorActivity extends Activity implements OnClickListener{
  private ArrayBlockingQueue<byte[] > audioq;
  boolean needToBeStopped = false; 
  Button generate, action;

  private MyRecorder  rec;
  private MyReader mr;

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);

    action = (Button) findViewById(R.id.actionButton);
    action.setOnClickListener(this);

    needToBeStopped = false;
    audioq = new ArrayBlockingQueue<byte[]>(CAPACITY);
}

public void onClick(View arg0){
    switch(arg0.getId()){
    case R.id.generateButton:
        generateContentToSpell();
        break;
    case R.id.actionButton:
        if(needToBeStopped){
            rec.stopThread();
            needToBeStopped = false;
            action.setText(this.getString(R.string.start));
        }else{
            rec = new MyRecorder(audioq);
            mr = new MyReader(audioq);
            rec.start();
            mr.start();
            needToBeStopped = true;
            action.setText(this.getString(R.string.stop));
        }
        break;
    }
}

  private class MyRecorder extends Thread{  
    private static final int freq = 22050;
    private static final int  channelConfiguration =    AudioFormat.CHANNEL_CONFIGURATION_MONO;
    private static final int audioEncoding = AudioFormat.ENCODING_PCM_16BIT;

    private final BlockingQueue<byte[] > myRecAudioq;
    private AudioRecord recorder;
    private boolean recording = false;
    int bufferSize;

    /*konstruktor*/
    public MyRecorder(BlockingQueue<byte[]> q ){
        bufferSize =  AudioRecord.getMinBufferSize(freq, channelConfiguration, audioEncoding);
        myRecAudioq = q;
    }

    public void run(){
        recorder = new AudioRecord(MediaRecorder.AudioSource.MIC, 
                   freq, channelConfiguration, 
                   audioEncoding, 3*bufferSize);
        recorder.startRecording();
        recording = true;
        byte[] buffer = new byte[bufferSize];
        while(recording){
            int readBufferSize = recorder.read(buffer, 0, bufferSize);
            if(readBufferSize>0){
                try {
                    myRecAudioq.put(buffer);
                } catch (InterruptedException e) {
                    // TODO Auto-generated catch block
                    e.printStackTrace();
                }
            }
        }
    }

    public void stopThread(){
        recorder.stop();
        recording = false;
        byte[] buffer = new byte[bufferSize];
        for(int i=0;i<bufferSize;i++){
            buffer[i] =(byte) 0xff;
        }
        try {
            myRecAudioq.put(buffer);
        } catch (InterruptedException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        }
    }
}

   private class MyReader extends Thread{
    private final BlockingQueue<byte[]> bq;

    private static final int freq = 22050;
    private static final int  channelConfiguration = AudioFormat.CHANNEL_CONFIGURATION_MONO;
    private static final int audioEncoding = AudioFormat.ENCODING_PCM_16BIT;

    private int counter = 0;

    public MyReader(BlockingQueue<byte[]> q){
        bq = q;
    }
    public void run(){
        int buffSize =  AudioRecord.getMinBufferSize(freq, channelConfiguration, audioEncoding);
        byte[] compareBuffer= new byte[buffSize];
        for(int i=0;i<buffSize;i++){
            compareBuffer[i] = (byte)0xff;
        }

        boolean reading = true;
        byte[] buffer = null;
        do{
            try {
                buffer = bq.take();
   reading = buffer.equals(compareBuffer);
            } catch (InterruptedException e) {
                // TODO Auto-generated catch block
                e.printStackTrace();
            }

            if(reading){
                int c=1;
            }
        }while(!reading);
        int a=5;
    }
  } 
 } 
```

我试图在`MyReader`课堂上 设置断点，`int c=1;` 但从未达到。[我使用这个例子](http://developer.android.com/reference/java/util/concurrent/BlockingQueue.html)编写了这段代码。可能是什么问题呢？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-04T10:11:14.027

'reading' 的值是 2 byte[] 之间的比较。

只有当它们都是同一个对象（指针，如果你愿意的话），也就是说，如果你第一次调用`buffer = compareBuffer`

What you actually want to do is compare all elements of the buffer, for example using the `java.util.Arrays` class :

```
reading = Arrays.equals(compareBuffer, buffer); 
```

# java - 关闭工作簿的文件句柄（apache poi）

> ID：12261014
> 
> 赞同：18
> 
> 时间：2012-09-04T09:58:14.207
> 
> 标签：java, file-io, apache-poi

我使用`WorkbookFactory.create(new File("path/to/xlsx"))`. 但是，当我在启动应用程序后尝试在 Excel 中编辑文件时，我收到一条错误消息，指出该文件正在使用中。我是否必须释放文件，如果是，如何释放？（我在 api 文档中找不到类似的东西`Workbook.close()`）还是我必须在其他地方寻找？

我不知道还能去哪里看；该应用程序不会导致 csv 和 excel 文件出现这些问题，我只需调用转换器 (xls => csv)，这是唯一的区别。

（我正在使用 POI 3.8）

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-11-02T17:04:16.283

维护传递给的 InputStream 的句柄似乎工作得很好`WorkbookFactory.create()`，并在完成工作簿后简单地关闭 InputStream。例如：

```
 InputStream is = // initialize
    try {
        Workbook wb = WorkbookFactory.create(is);
        // use the workbook
    } finally {
        if (is != null) is.close()
    } 
```

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2012-09-04T12:36:16.120

如果您需要完全控制资源何时关闭，您应该预先自己创建 OPCPackage，并将其传递给 WorkbookFactory。OPCPackage 提供了您所追求的关闭方法。工作簿将保持打开状态，直到垃圾收集

您的代码将类似于：

```
 File f = new File("/path/to/excel/file");
     Workbook wb = null;

     NPOIFSFileSystem npoifs = null;
     OPCPackage pkg = null;
     try {
       npoifs = new NPOIFSFileSystem(f);
       wb = WorkbookFactory.create(npoifs);
     } catch(OfficeXmlFileException ofe) {
       pkg = OPCPackage.open(f);
       wb = WorkbookFactory.create(pkg);
     }

     // Use it

     if (npoifs != null) { npoifs.close(); }
     if (pkg != null) { pkg.close(); } 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2014-11-22T18:52:06.667

## 如何在 Java 中关闭 POI 工作簿的实例：

```
import org.apache.poi.ss.usermodel.*;
import org.apache.poi.xssf.usermodel.*;

try{
    File workbookFile = new File("C:\\repo\\yourfile.xslx");
    FileInputStream file = new FileInputStream(workbookFile);
    Workbook wb = WorkbookFactory.create(file);
    Sheet sheet = wb.getSheetAt(0);

    //use the instance of wb.

    file.close();

}
catch(Exception e){
    System.out.println("Fail");
} 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2018-01-09T14:17:29.507

首先，您需要关闭写入工作簿的流：

```
workBook.write(outputStream);

outputStream.close(); 
```

之后你应该关闭工作簿（不再进行操作）并处理临时文件：

```
//Close the workBook
workBook.close();

//deleting the temporary files
workBook.dispose(); 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2021-10-15T22:43:14.240

我正在使用 poi api 5.0.0 版。此版本中的 Workbook 有一个 close() 方法，根据 API 文档所述：

*“关闭从中读取工作簿的基础输入资源（文件或流）。”*

//使用try-catch-finally：

```
Workbook workbook = null;
try {
    workbook = WorkbookFactory.create(inputStream);
    //....
} catch (IOException ex) {
    //...
}finally {
    workbook.close();
} 
```

//使用try-with-resources：

```
try(Workbook workbook = WorkbookFactory.create(fileStream)) {
    //....
} catch (IOException ex) {
    //...
} 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2021-05-25T06:39:50.947

截至 2021 年，只是遇到了同样的问题。:(，当使用 poi 3.9 版时。

我只是发现如果我们将poi版本升级到3.17（如果你还在使用Java 7，那么poi 4或更高版本只支持Java 8或更高版本），

然后工作簿将实施`AutoCloseable`。

因此可以使用`Try-With-Resources`块来自动关闭文件。

这是演示代码。

```
try (Workbook workbook = WorkbookFactory.create(new File(fileLocation))) {
   // operate on the workbook here...
} 
```

我认为上面的代码比@Gagravarr 解决方案更好，因为它复制了 create 方法在外面做的事情，不熟悉 poi 库的开发人员不知道它是什么。

* * *

PS 事实上，这个问题作为一个 bug 放在了 bugzilla 中，请参阅[https://bz.apache.org/bugzilla/show_bug.cgi?id=56537](https://bz.apache.org/bugzilla/show_bug.cgi?id=56537)，并已解决并将代码合并到 poi 3.11 或更高版本中。因此，任何与我们有相同问题的人都可以查看它，并在完成使用后关闭资源。

# c# - 为了在服务器上部署 ASP.NET MVC 3 (Razor) 应用程序，需要做哪些明确的事情

> ID：12261015
> 
> 赞同：0
> 
> 时间：2012-09-04T09:58:15.457
> 
> 标签：c#, .net, iis, web-config, web-deployment

我创建了一个

*   使用 .net 框架 4 的 ASP.NET MVC 3 应用程序

    可以正常使用

*   Visual Studio 内置 Casini 服务器

.

由于我没有 IIS，我试图在另一个具有**IIS 5.1** 和**.Net framewrok 4.0 客户端配置文件**的系统上部署应用程序。

我可以看到目录列表，但是当我输入控制器路径时它不起作用。我错过了什么？

> **这可能是由于框架客户端配置文件**
> **或 Web.confif 文件**
> **还是由于文件夹权限**（尽管我尝试将所有权限授予everone）
> 
> 我是否需要在服务器上安装 ASP.NET 框架才能运行剃须刀应用程序

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-04T10:05:00.810

ASP.Net MVC 需要完整的 .NET 配置文件。客户资料是不够的。

> **NET4 客户端配置文件：**
> 始终将 NET4 客户端配置文件用于所有客户端桌面应用程序（包括 Windows 窗体和 WPF 应用程序）。
> 
> **NET4 Full 框架：** 仅当您的应用所需的功能或程序集未包含在客户端配置文件中时，才以 NET4 Full 为目标。这包括：
> 
> *   如果您正在构建服务器应用程序。例如：
>     o ASP.Net 应用程序
>     o 服务器端基于 ASMX 的 Web 服务
> *   如果您使用旧版客户端方案。例如：
>     o 使用在 NET4 中已弃用且未包含在客户端配置文件中的 System.Data.OracleClient.dll。
>     o 使用旧版 Windows Workflow Foundation 3.0 或 3.5（WF3.0、WF3.5）
> *   如果您面向开发人员场景并需要 MSBuild 等工具或需要访问 System.Design.dll 等设计程序集

--[来源](http://blogs.msdn.com/b/jgoldb/archive/2010/04/12/what-s-new-in-net-framework-4-client-profile-rtm.aspx)

# python - 将 yaml 文件中的“创建时间”更改为“当前时间”

> ID：12261018
> 
> 赞同：1
> 
> 时间：2012-09-04T09:58:25.223
> 
> 标签：python, django, yaml

在我的应用程序中，我有一个 yaml 文件，它是在 django 中使用命令 ./manage.sh dumpdata 创建的。在其中，创建的时间是这样硬编码的..

```
created_on: 2012-08-22 06:17:03.053740 
```

即我创建yaml文件的时间。

我希望它将时间显示为当前时间或在客户端执行 yaml 文件的时间。任何帮助将不胜感激。谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-04T10:06:17.683

`dumpdata`这些值适用于在文件创建时由 not 导出的记录。创建文件的时间将是文件元信息的一部分，您可以从文件系统中读取这些信息。

要获取文件的创建时间：

```
>>> import os.path, time
>>> time.ctime(os.path.getctime('test.png'))
'Tue Sep  4 09:48:24 2012'
>>> 
```

# postgresql - “IF”PostgreSQL 处或附近的语法错误

> ID：12261024
> 
> 赞同：2
> 
> 时间：2012-09-04T09:58:39.670
> 
> 标签：postgresql, if-statement

我试图在我的代码中使用子选择，但它给了我一个错误。我找到了很多解决方案，但它仍然不起作用：

这是我的代码：

```
BEGIN;
IF (SELECT COUNT(*) FROM table1 WHERE Z = 'aaaaa') = 0

    THEN
    INSERT INTO table2 (X, Y) VALUES ("abc", 7)

END IF;
END; 
```

和错误：

```
ERROR:  syntax error at or near "IF"
LINE 2: IF (SELECT COUNT(*) FROM table1 WHERE Path = 'aaaaa') = 0
        ^

********** Error **********

ERROR: syntax error at or near "IF"
SQL state: 42601
Character: 8 
```

你可以帮帮我吗？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-09-04T10:17:29.847

在“BEGIN”之后去掉分号？如果这是一个 plpgsql 函数的主体。

如果这是一个 psql 脚本，则`IF`需要将语句交给 plpgsql 执行，因此需要放入一个`DO $$ ... $$`构造。

或者，当然，您可以像这样重构：

```
INSERT INTO table2(x,y)
    SELECT 'abc', 7
    WHERE NOT EXISTS (SELECT 1 FROM table1 WHERE z = 'aaaaa') 
```

# c# - IDataErrorInfo 验证没有给出任何“ErrorContent”（见编辑）

> ID：12261025
> 
> 赞同：2
> 
> 时间：2012-09-04T09:58:40.963
> 
> 标签：c#, validation, xaml, idataerrorinfo

**我想要达到的目标：**

我正在尝试在 TextBoxes 中实现相当简单的数据验证。如果不符合验证规则，则 TextBox 边框变为红色，并在其 ToolTip 中显示错误消息。

我正在使用 IDataErrorInfo 和 Styles/Bindings 执行此操作：

**IDataErrorInfo 实现：**

```
#region DataError Members
public string Error
    { 
        get { return null; } 
    }

    public string this[string propertyName]
    {
        get
        {
            string result = null;

            if (propertyName == "Answer")
            {
                if (Answer != null)
                {
                   if (this.Answer.Length < 1 || this.Answer.Length > 10)
                       result = "Invalid answer length - Must be between: 1 and 10 chars.";                        
                }
            }
            return result;
        }
    }
#endregion 
```

**包含绑定的文本框：**

```
<TextBox       
     Style="{DynamicResource GeneralTextBoxStyle}"
     >
     <TextBox.Text>
         <Binding  
             Path="Answer" 
             Mode="TwoWay" 
             UpdateSourceTrigger="PropertyChanged"
             ValidatesOnDataErrors="True"
             ValidatesOnExceptions="True"                        
          />
     </TextBox.Text> 
</TextBox> 
```

**文本框模板/样式：**

```
<ControlTemplate x:Key="ErrorTextBoxTemplate" TargetType="{x:Type TextBox}">
    <Border 
        x:Name="ErrorBorder" 
        BorderThickness="1"
        BorderBrush="White"
        >
        <ScrollViewer 
            x:Name="PART_ContentHost"
            VerticalAlignment="Center"
            >
            <ScrollViewer.ToolTip>
                <ToolTip FontSize="14">
                    <TextBlock x:Name="ToolTip"/>
                </ToolTip>
            </ScrollViewer.ToolTip>
        </ScrollViewer>
    </Border>
    <ControlTemplate.Triggers>
        <Trigger Property="Validation.HasError" Value="true">
            <Setter TargetName="ToolTip" Property="Text" Value="{Binding RelativeSource={x:Static RelativeSource.Self}, Path=(Validation.Errors)[0].ErrorContent}"/>
            <Setter TargetName="ErrorBorder" Property="BorderBrush" Value="Blue"/>
        </Trigger>
    </ControlTemplate.Triggers>
</ControlTemplate>

<Style x:Key="ErrorTextBoxStyle" TargetType="{x:Type TextBox}">
    <Setter Property="Template" Value="{StaticResource ErrorTextBoxTemplate}"/>
</Style> 
```

*注意：XAML 代码已被大量精简（**仅**涉及布局的代码）。*

* * *

**问题：**

我面临的问题是 ToolTip TextBlock 上的绑定似乎从未显示任何错误。

除此之外，其他一切都运行良好（DataValidation 符合预期，我的 TextBox 的边框变为蓝色）。

我几乎可以肯定我错过了一些东西，我似乎无法锻炼什么 - 这可能是非常简单的事情！

提前感谢您的回复。

* * *

**编辑：**

这是我在模板中设置工具提示的方式的问题。仍然不确定为什么它不起作用，但是问题比我最初想象的要简单得多！所以现在我想问题是为什么绑定在 TextBlock 中不起作用？

我需要这样做，就好像我直接分配给'TextBox.ToolTip'一样，我不能再访问代码中的工具提示（这是一个要求），因为它被转换为字符串。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-04T11:11:48.460

将“工具提示”的设置器更改为：

```
<Setter TargetName="ToolTip" Property="Text" Value="{Binding RelativeSource={x:Static RelativeSource.TemplatedParent}, Path=(Validation.Errors)[0].ErrorContent}"/> 
```

当您使用时，`Self`您会绑定到`TextBlock`工具提示中的 。

如果这不起作用，请尝试`RelativeSource.FindAncestor`将祖先类型设置为`TextBox`.

# android - 在 Android 项目中使用 WSDL2Java 生成的代码

> ID：12261026
> 
> 赞同：1
> 
> 时间：2012-09-04T09:58:43.367
> 
> 标签：android, axis2, wsdl2java

我正在启动一个新的 Android 项目，该项目将使用可用作 WSDL 和 REST 端点的服务。

建议我使用 WSDL2Java 生成存根并在我的 Android 应用程序中使用它而不是 REST。

在我走这条路并尝试集成我的代码之前，我只是在检查是否真的可以在 Android 中使用 WSDL2JAVA 代码？会编译吗？

谢谢。

# css - css - 2个子容器不并排放置

> ID：12261029
> 
> 赞同：3
> 
> 时间：2012-09-04T09:58:57.457
> 
> 标签：css

我有一个父容器，里面有子容器。2 个子容器分别占据 60% 的宽度和 40% 的宽度。它们没有边距，并且有内边距，但使用 box-sizing 以使其包含在宽度中。但由于某种原因，他们没有并排坐着。如果我将其中一个更改为 39% 宽度，那么它看起来很好。

我究竟做错了什么？

示例可以在[http://jsfiddle.net/Rcaet/看到](http://jsfiddle.net/Rcaet/)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-04T10:07:59.260

您正在使用**display:inline-block**默认情况下有一些空间。为此，您必须使用**font-size:0** hack。像这样写：

```
.parent-container {
    font-size:0;
}
.parent-container > div{
    font-size:16px;
} 
```

检查这个[http://jsfiddle.net/Rcaet/8/](http://jsfiddle.net/Rcaet/8/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-04T10:01:15.707

你没有做任何“错误”的事情。你的`borders`也占了`width`。所以有边框意味着你需要使盒子更小，因此`39%`.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-04T10:04:55.330

你必须添加浮动。将 a 添加`float: left`到容器 2 和 3。但由于某些浏览器中的边框宽度仍然可能会出现问题。因此，确实，减少其中一个框。

# web-config - 将 AjaxControlToolkit 的引用添加到 web.config 文件

> ID：12261033
> 
> 赞同：1
> 
> 时间：2012-09-04T09:59:07.220
> 
> 标签：web-config, ajaxcontroltoolkit

我正在尝试向我的页面添加一些 ajax 控件：

```
<asp:Button runat="server" ID="lnkDelete" CommandName="DeleteCity" CssClass="rowbutton" CommandArgument='<%# Eval("cityid") %>' Text="Delete" />

<ajax:ConfirmButtonExtender runat="server" ID="confirm_Delete" TargetControlID="lnkDelete" ConfirmText="Deleting a city will delete all Suburbs, DICs and Appointments associated with it.&#10;Do you want to continue?">
</ajax:ConfirmButtonExtender> 
```

我已经检查了几个关于 SO 的问题，我也发现[了这](http://forums.asp.net/t/1174924.aspx)一点，但仍然没有任何运气让页面接受新标签。

当我在页面级别注册 AjaxControlToolkit 时，它可以工作，但是当我将它添加到 web.config 文件时，它仍然找不到服务器标签：

```
<%@ Register Assembly="AjaxControlToolkit" Namespace="AjaxControlToolkit" TagPrefix="ajax" %>`) it works, but I'd rather not do this for every page that I need to use ajax on. 
```

**注意：**如果在母版页上完成，这种方式注册不起作用。

我的 web.config 文件中有以下内容：

```
<?xml version="1.0"?>
<!--
  For more information on how to configure your ASP.NET application, please visit
  http://go.microsoft.com/fwlink/?LinkId=169433
-->
<configuration>
    <system.web>
        <customErrors mode="Off" />
        <pages styleSheetTheme="Default">
          <controls>
            <add tagPrefix="ajax" namespace="AjaxControlToolkit" assembly="AjaxControlToolkit" />
          </controls>      
        </pages>
    </system.web>
</configuration> 
```

我做错了什么吗？在这里做这件事的正确方法是什么？

如果它可能很重要，我使用的是 AjaxControlToolkit 版本 4.1.51116

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-06T09:19:35.173

事实证明，只需重建解决方案就可以解决这个问题。

我坚持更改以将引用添加到 web.config 文件中并重建解决方案。

现在一切正常

# c# - 在 C# 中更改 Visio 图表属性

> ID：12261034
> 
> 赞同：2
> 
> 时间：2012-09-04T09:59:09.143
> 
> 标签：c#, visio

我想通过 C# 在 Visio 中更改实体的物理名称。

```
Shape1.Text="name"; 
```

这可以更改列名。我已经尝试过：

```
Shape1.Name="name"; 
```

但它不会影响实体的物理名称。我想通过编码添加数据，就像我们在 visio 实体中手动放置数据一样。

# vim - 如何在 Makefile 中知道是否从 ViM 调用了“make”？

> ID：12261035
> 
> 赞同：8
> 
> 时间：2012-09-04T09:59:14.537
> 
> 标签：vim, makefile

简而言之，我需要在 Makefile 中知道是否正在从 ViM 调用 `make。是否有某个变量（例如 ENVIRONMENT 或其他东西），ViM 会将其设置为特定值？

我需要这个的原因如下：

如果从 bash 调用，我可以为用户（或我自己）做各种美妙的事情，例如提供有关正在构建的子系统的消息以及突出显示错误和警告。

然而，问题是，当从 ViM 调用时，错误消息已经被捕获，并且引入`\x1b`命令（用于颜色）使 ViM 无法理解这些消息。我想要做的基本上`:make`是在 ViM 中发出时禁用着色。

即使我宁愿让 Makefile 解决它，我也愿意接受其他解决方案。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-04T10:43:57.073

我要么明确地告诉makefile你不想着色，要么把它过滤掉。如果您尝试在 makefile 内部进行猜测，那么当您使用不同的编辑器、shell 或调整您的环境时，它很可能会中断。

我的偏好是只过滤掉不可打印的字符：

```
:set makeprg=make\ $*\ \\\|filter 
```

因为这不需要 makefile 中的明确解决方法。但是，所需的过滤器本身并不重要：例如参见unix.stackexchange 上的[这个问题](https://unix.stackexchange.com/q/14684)。

或者，正如已经建议的那样，明确告诉您的 makefile 的最简单方法是在您的调用中添加一个变量：

```
:set makeprg=make\ NO_COLOUR=1 
```

或其他（`make`应该是 的当前值`makeprg`）。

.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-04T10:34:42.440

在 Vim 中，你可以设置被打开的 shell 继承的环境变量；例如

```
:let $INSIDE_VIM = 1 
```

如果这只是 about `:make`，您可以操纵`'makeprg'`决定调用什么的 ：

```
:set makeprg=export\ INSIDE_VIM=1;make 
```

如果你只是关心着色的转义序列，你可以设置`$TERM`一些不理解颜色的东西（`dumb`也许？）并且如果着色不是硬编码的（不幸的是，如果在许多工具中这是一个很大的问题） ，它应该服从终端设置并且不打印转义序列。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-04T10:06:17.213

您可以将 vim 绑定更改为`SOURCE="vim" make`，因此在您的 makefile 中，`$$SOURCE`变量设置为“vim”。

编辑：我看到你实际上没有在 vim 中使用绑定，你可以在你的`.vimrc`(or `/etc/vimrc`) 中使用以下行，如下所示：

```
:nmap <F5> <CR>SOURCE="vim" :make<CR> 
```

这会将 F5 绑定到您想要的

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-04T10:06:53.923

您可以检查`MYVIMRC`或`VIMRUNTIME`环境变量。在我的 GNU/Linux 发行版上，`SHLVL`来自 bash 的值为 1，当从内部调用 make 时值为 2 `vim`。

# c# - 集成 Autofac 和 MongoDB C# 驱动程序

> ID：12261036
> 
> 赞同：4
> 
> 时间：2012-09-04T09:59:18.183
> 
> 标签：c#, mongodb, autofac, mongodb-.net-driver

.NET 4.0 最新的 autofac 版本和最新的 C# 驱动程序

我们正在将 Autofac DI 容器集成到我们的 MongoDB 应用程序中，事情进展顺利，但有一个例外可能是我的 BUD（设备上的坏用户）。既然我的谷歌赋失败了，我想我会利用你的智慧。

问题是我们希望支持基于接口的多态性，并保持数据层之外的所有交互不知道任何创建的实体类型。下面是一个简化的例子。

```
///Datastore wrapper
public interfaces IDataStore
{
    T Get<T>(string key);
    IQueryable<T> GetCollection(string key)        
}

public interface ITransaction
{
    public string key {get;}
    public double value {get;}
}

public interface IStockTransaction: ITransaction
{
    public string Symbol{get;}
}

public class StockTransaction: IStockTransaction
{
    public string key {get;}
    public double value {get;}
    public double price {get;}
}

//The goal is to get this test to pass. 
[TestMethod()]
public void PolyMorphicTest()
{
    //Wrapper around on Autofac.
    var container = new ContainerConfiguration();
    var target= container.Resolve<IDataStore>();
    //Assume a stock transaction with a key named foo has been saved. 
    var type = target.Get<IStockTransaction>("foo");
    Assert.IsInstanceOfType(type,typeof(StockSymbol));
} 
```

我尝试了各种类型的 Autofac 注册方法，但它们似乎都失败了，因为我完全脱离了 Mongo 类型的激活链（例如，像 MongoDatabase.GetCollection() 这样的调用）。有没有办法使用 Autofac 来控制 Mongo 类型的激活链？对于我们的工作方法，就像我们想要的那样，我需要找到一种方法来使用 Autofac 将上层代码传入的类型参数 T 替换为解析的类型。然后我们应该能够依靠方差将其作为传入的类型返回。

```
T Get<T>(string key) //T Arrives as IStockTransaction 
{
    var coll = Database.GetCollection<T>(T.FullName).AsQueryAble<T>();
    /*T is now the concrete type StockTransaction so that Mongo can query properly.*/

    /* perform a linq query here against the IQueryable. */ 

    return  (T) ((from tmp in coll 
        where tmp.key == " ").FirstOrDefault());  
}

IQueryable<T> GetCollection<T>(string key) //T Arrives as IStockTransaction 
{        
    /*Attempting to Find the Mongo collection using the interface type will lead to Mongo
    serialization errors so we need to change the interface type to the concrete type that we 
    have registered in Autofac or have stashed off manually somewhere before this call. Ideally 
    this would be done with a simple resolve call against Autofac so that if our concrete types 
    change, all of this would still work. */

    var coll = Database.GetCollection<T>(T.FullName).AsQueryAble<T>(); 

    /*Here we would rely on C# 4.0 variance to allow us to cast back to the interface type.*/

    return  (T) coll.FirstOrDefault();  
} 
```

对不起，很长的帖子 - 将不胜感激任何想法。很高兴澄清问题是否不清楚。现在我倾向于破解 MongoDriver，以便 Autofac 成为类型解析不可或缺的一部分。我们的另一个选择是等到驱动程序对接口和 DI 有更好的支持（我听说即将推出）。谢谢你的帮助。

# json - Sencha Touch 2 商店中来自 Magento-REST 的嵌套 JSON 响应

> ID：12261041
> 
> 赞同：1
> 
> 时间：2012-09-04T09:59:33.550
> 
> 标签：json, rest, sencha-touch-2, magento-1.7

我很难在来自 magento 1.7 的响应中使用我的产品商店的代理

响应如下所示：

```
{
 "1":
   {"entity_id":"1","type_id":"simple","sku":"dress_test","status":"1","visibility":"4","tax_class_id":"2","weight":"1.0000","price":"1500.0000","special_price":"1000.0000","name":"Wedding dress","url_key":"dress","country_of_manufacture":"AO","msrp_display_actual_price_type":"2","gift_message_available":"1","news_from_date":"2012-03-21 00:00:00","news_to_date":"2012-03-24 00:00:00","special_from_date":"2012-03-21 00:00:00","special_to_date":"2012-03-24 00:00:00","description":"White wedding dress"},
 "2":
   {"entity_id":"2","type_id":"simple","sku":"black_sunglasses","status":"1","visibility":"4","tax_class_id":"2","weight":"0.2000","price":"500.0000","special_price":"300.0000","name":"Sunglasses","url_key":"sunglasses","country_of_manufacture":"AR","msrp_display_actual_price_type":"2","gift_message_available":null,"news_from_date":null,"news_to_date":null,"special_from_date":"2012-03-21 00:00:00","special_to_date":"2012-03-24 00:00:00","description":"Black sunglasses"}
} 
```

但是 sencha 的预期输入（我认为）应该是这样的：

```
{
 {"entity_id":"1","type_id":"simple","sku":"dress_test","status":"1","visibility":"4","tax_class_id":"2","weight":"1.0000","price":"1500.0000","special_price":"1000.0000","name":"Wedding dress","url_key":"dress","country_of_manufacture":"AO","msrp_display_actual_price_type":"2","gift_message_available":"1","news_from_date":"2012-03-21 00:00:00","news_to_date":"2012-03-24 00:00:00","special_from_date":"2012-03-21 00:00:00","special_to_date":"2012-03-24 00:00:00","description":"White wedding dress"},
 {"entity_id":"2","type_id":"simple","sku":"black_sunglasses","status":"1","visibility":"4","tax_class_id":"2","weight":"0.2000","price":"500.0000","special_price":"300.0000","name":"Sunglasses","url_key":"sunglasses","country_of_manufacture":"AR","msrp_display_actual_price_type":"2","gift_message_available":null,"news_from_date":null,"news_to_date":null,"special_from_date":"2012-03-21 00:00:00","special_to_date":"2012-03-24 00:00:00","description":"Black sunglasses"}
} 
```

如何更改代理的行为以便能够将加载的数据存储到我的商店中？

提前谢谢了！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-04T10:58:25.510

要自定义您自己的响应，您必须[继承 Ext.data.reader.Reader](http://docs.sencha.com/touch/2-0/#!/api/Ext.data.reader.Reader) Reader 或者在您的情况下，Json 类将数据从响应转换为结果集，被 Sencha 的模型/代理/存储接受。

干杯，奥列格

添加

```
Ext.define('lib.data.reader.Json', { 
    extend: 'Ext.data.reader.Json', 
    alias : 'reader.magentojson', ... 
}) 
```

而不是在阅读器上使用以后的参考：'magentojson'

并且您保留对“json”阅读器的原始引用！

# android - android：无法将文件上传到 FTP 服务器

> ID：12261042
> 
> 赞同：0
> 
> 时间：2012-09-04T09:59:41.790
> 
> 标签：android, ftp

我正在尝试将音频文件从 sdcard 上传到 ftp 服务器。logcat 显示以下消息..

```
 09-04 18:47:10.767: W/System.err(12584): java.net.ConnectException: failed to connect to /127.0.0.1 (port 21): connect failed: ECONNREFUSED (Connection refused)
09-04 18:47:10.777: W/System.err(12584):    at libcore.io.IoBridge.connect(IoBridge.java:120)
09-04 18:47:10.777: W/System.err(12584):    at java.net.PlainSocketImpl.connect(PlainSocketImpl.java:192)
09-04 18:47:10.777: W/System.err(12584):    at java.net.PlainSocketImpl.connect(PlainSocketImpl.java:459)
09-04 18:47:10.777: W/System.err(12584):    at java.net.Socket.connect(Socket.java:849)
09-04 18:47:10.777: W/System.err(12584):    at org.apache.commons.net.SocketClient.connect(SocketClient.java:176)
09-04 18:47:10.777: W/System.err(12584):    at org.apache.commons.net.SocketClient.connect(SocketClient.java:268)
09-04 18:47:10.777: W/System.err(12584):    at com.example.andro.MainActivity$AsyncUpload.ftpUpload(MainActivity.java:56)
09-04 18:47:10.777: W/System.err(12584):    at com.example.andro.MainActivity$AsyncUpload.doInBackground(MainActivity.java:91)
09-04 18:47:10.777: W/System.err(12584):    at com.example.andro.MainActivity$AsyncUpload.doInBackground(MainActivity.java:1)
09-04 18:47:10.777: W/System.err(12584):    at android.os.AsyncTask$2.call(AsyncTask.java:264)
09-04 18:47:10.777: W/System.err(12584):    at java.util.concurrent.FutureTask$Sync.innerRun(FutureTask.java:305)
09-04 18:47:10.777: W/System.err(12584):    at java.util.concurrent.FutureTask.run(FutureTask.java:137)
09-04 18:47:10.777: W/System.err(12584):    at android.os.AsyncTask$SerialExecutor$1.run(AsyncTask.java:208)
09-04 18:47:10.777: W/System.err(12584):    at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1076)
09-04 18:47:10.777: W/System.err(12584):    at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:569)
09-04 18:47:10.777: W/System.err(12584):    at java.lang.Thread.run(Thread.java:856)
09-04 18:47:10.777: W/System.err(12584): Caused by: libcore.io.ErrnoException: connect failed: ECONNREFUSED (Connection refused)
09-04 18:47:10.787: W/System.err(12584):    at libcore.io.Posix.connect(Native Method)
09-04 18:47:10.787: W/System.err(12584):    at libcore.io.BlockGuardOs.connect(BlockGuardOs.java:85)
09-04 18:47:10.787: W/System.err(12584):    at libcore.io.IoBridge.connectErrno(IoBridge.java:133)
09-04 18:47:10.787: W/System.err(12584):    at libcore.io.IoBridge.connect(IoBridge.java:118)
09-04 18:47:10.787: W/System.err(12584):    ... 15 more
09-04 18:47:10.787: W/dalvikvm(12584): threadid=11: thread exiting with uncaught exception (group=0x2b542210)
09-04 18:47:10.797: E/AndroidRuntime(12584): FATAL EXCEPTION: AsyncTask #1
09-04 18:47:10.797: E/AndroidRuntime(12584): java.lang.RuntimeException: An error occured while executing doInBackground()
09-04 18:47:10.797: E/AndroidRuntime(12584):    at android.os.AsyncTask$3.done(AsyncTask.java:278)
09-04 18:47:10.797: E/AndroidRuntime(12584):    at java.util.concurrent.FutureTask$Sync.innerSetException(FutureTask.java:273)
09-04 18:47:10.797: E/AndroidRuntime(12584):    at java.util.concurrent.FutureTask.setException(FutureTask.java:124)
09-04 18:47:10.797: E/AndroidRuntime(12584):    at java.util.concurrent.FutureTask$Sync.innerRun(FutureTask.java:307)
09-04 18:47:10.797: E/AndroidRuntime(12584):    at java.util.concurrent.FutureTask.run(FutureTask.java:137)
09-04 18:47:10.797: E/AndroidRuntime(12584):    at android.os.AsyncTask$SerialExecutor$1.run(AsyncTask.java:208)
09-04 18:47:10.797: E/AndroidRuntime(12584):    at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1076)
09-04 18:47:10.797: E/AndroidRuntime(12584):    at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:569)
09-04 18:47:10.797: E/AndroidRuntime(12584):    at java.lang.Thread.run(Thread.java:856)
09-04 18:47:10.797: E/AndroidRuntime(12584): Caused by: java.lang.NullPointerException
09-04 18:47:10.797: E/AndroidRuntime(12584):    at org.apache.commons.net.ftp.FTP.sendCommand(FTP.java:471)
09-04 18:47:10.797: E/AndroidRuntime(12584):    at org.apache.commons.net.ftp.FTP.sendCommand(FTP.java:534)
09-04 18:47:10.797: E/AndroidRuntime(12584):    at org.apache.commons.net.ftp.FTP.sendCommand(FTP.java:583)
09-04 18:47:10.797: E/AndroidRuntime(12584):    at org.apache.commons.net.ftp.FTP.quit(FTP.java:794)
09-04 18:47:10.797: E/AndroidRuntime(12584):    at org.apache.commons.net.ftp.FTPClient.logout(FTPClient.java:697)
09-04 18:47:10.797: E/AndroidRuntime(12584):    at com.example.andro.MainActivity$AsyncUpload.ftpUpload(MainActivity.java:79)
09-04 18:47:10.797: E/AndroidRuntime(12584):    at com.example.andro.MainActivity$AsyncUpload.doInBackground(MainActivity.java:91)
09-04 18:47:10.797: E/AndroidRuntime(12584):    at com.example.andro.MainActivity$AsyncUpload.doInBackground(MainActivity.java:1)
09-04 18:47:10.797: E/AndroidRuntime(12584):    at android.os.AsyncTask$2.call(AsyncTask.java:264)
09-04 18:47:10.797: E/AndroidRuntime(12584):    at java.util.concurrent.FutureTask$Sync.innerRun(FutureTask.java:305)
09-04 18:47:10.797: E/AndroidRuntime(12584):    ... 5 more 
```

我的代码是：

```
 public class MainActivity extends Activity {

    TextView tv1;   
    Button bt1;

    @Override
    public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);
    tv1 = (TextView) findViewById(R.id.textView1);
    bt1 = (Button) findViewById(R.id.button1);
    bt1.setOnClickListener(new View.OnClickListener() {

        @Override
        public void onClick(View v) {
            // TODO Auto-generated method stub
            if(new AsyncUpload().execute() != null)
            tv1.setText("uploaded");
        }
    });

    }

    @Override
    public boolean onCreateOptionsMenu(Menu menu) {
        getMenuInflater().inflate(R.menu.activity_main, menu);
        return true;
    }
    class AsyncUpload extends AsyncTask<String, Void, Void>{       
        public boolean ftpUpload(){
            FTPClient con = new FTPClient();
            try
            {

                con.connect("127.0.0.1"); //here i receive exception
                    //the exception is java.unknownhostexception
                    //java.net.UnknownHostException: Unable to resolve host "ftp.194.90.81.149": No address associated with hostname
                if (con.login("android", "123"))
                {
                    con.enterLocalPassiveMode(); 
                    String data = Environment.getExternalStorageDirectory().getPath() + "audiorecordtest.3gp";
                    ByteArrayInputStream in = new ByteArrayInputStream(data.getBytes());
                    boolean result = con.storeFile("/test.3gp", in);
                    in.close();
                    if (result) Log.v("upload result", "succeeded");
                    return true;
                }
            }
            catch (Exception e)
            {
                e.printStackTrace();
            }

            try
            {
                con.logout();
                con.disconnect();
            }
            catch (IOException e)
            {
                e.printStackTrace();
            }
            return false;
        }

        @Override
        protected Void doInBackground(String... params) {
            ftpUpload();
            return null;
        }
    }

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-04T10:37:32.023

我不知道这个能不能用。试着让我知道

代码：

```
protected Void doInBackground(Void... arg0) {   

            Intent intent = new Intent();
            final PendingIntent pendingIntent = PendingIntent.getActivity(getApplicationContext(), 0, intent, 0);
            // configure the notification          
            notification.flags = notification.flags | Notification.FLAG_ONGOING_EVENT;
            notification.contentView = new RemoteViews(getApplicationContext().getPackageName(), R.layout.uploadprogress);
            notification.contentIntent = pendingIntent;
            notification.contentView.setImageViewResource(R.id.status_icon, R.drawable.progressbar);
            notification.contentView.setTextViewText(R.id.status_text, "Uploading...");
            notification.contentView.setProgressBar(R.id.status_progress, 100, progress, false);

            notificationManager = (NotificationManager) getApplicationContext().getSystemService(
                    getApplicationContext().NOTIFICATION_SERVICE);

            notificationManager.notify(10, notification);

            final SharedPreferences prefs = PreferenceManager
            .getDefaultSharedPreferences(getApplicationContext());
            UUID uniqueKey = UUID.randomUUID();
                fname = uniqueKey.toString();
                Log.e("UNIQUE NAME", fname);
                String hostName = "MY HOST NAME";
                String username = "test";
                String password = "****";
                String location = selectedPath;         
                InputStream in = null;
                try {
                    Thread upload = new Thread() {

                        @Override
                        public void run() {

                            for (int i = 1; i < 100; i++) {   
                                progress=progress+1;
                                notification.contentView.setProgressBar(R.id.status_progress, 100, progress, false);                               
                                // inform the progress bar of updates in progress
                                notificationManager.notify(id, notification);                      
                                try {
                                    Thread.sleep(2000);
                                } catch (InterruptedException e) {
                                    // TODO Auto-generated catch block
                                    e.printStackTrace();
                                }
                            }      
                        }
                    };
                    upload.run();
                    FTPClient ftp = new FTPClient();
                    ftp.connect(hostName);
                    ftp.login(username, password);

                    ftp.setFileType(FTP.BINARY_FILE_TYPE);
                    ftp.enterLocalPassiveMode();
                    ftp.changeWorkingDirectory("/uploads");

                    int reply = ftp.getReplyCode();
                    System.out.println("Received Reply from FTP Connection:" + reply);

                    if (FTPReply.isPositiveCompletion(reply)) {
                        System.out.println("Connected Success");
                    }

                    File f1 = new File(location);
                    in = new FileInputStream(f1);

                    ftp.storeFile(fname+"."+extension, in);

                    System.out.println("SUCCESS");
                    System.out.println("Video Title:" +strTitle+" is uploaded successfully");
                    System.out.println("Video Name:" +fname+" is uploaded successfully");
                    ftp.logout();
                    ftp.disconnect();
                } catch (Exception e) {
                    e.printStackTrace();
                }
                StringBuffer inStreamBuf = new StringBuffer();
                strUserName = prefs.getString(
                        getResources().getString(R.string.username), null);
                strToken = prefs.getString(
                        getResources().getString(R.string.token), null);
                url = prefs.getString("VALUE", null);
                try {                   
                        inStreamBuf = XmlUtil.getUploadAuthResponse(url,
                                strUserName, strToken, strType, strTitle,
                                fname, strDesc, strCatId, strTags, strAccess,
                                strComments, strEmbed, strRating, strPublish);
                        strXmlResponse = inStreamBuf.toString();
                        Log.e("Response:", strXmlResponse);
                        DocumentBuilder db = DocumentBuilderFactory
                                .newInstance().newDocumentBuilder();
                        InputSource is = new InputSource();
                        is.setCharacterStream(new StringReader(strXmlResponse));
                        Document doc = db.parse(is);
                        NodeList nodes = doc
                                .getElementsByTagName(getResources().getString(
                                        R.string.xmlResponse));
                        Element element = (Element) nodes.item(0);
                        NodeList nl_request_type = element
                                .getElementsByTagName(getResources().getString(
                                        R.string.response));
                        Element el_request_type = (Element) nl_request_type
                                .item(0);
                        String strType = getCharacterDataFromElement(el_request_type);
                        // System.out.println("Response----------->"+strType);
                        if (strType.equalsIgnoreCase(getResources().getString(
                                R.string.success))) {   
                            finish();
                            Intent intent1 = new Intent(NewVideoActivity.this,
                                    MainscreenActivity.class);
                            startActivity(intent);
                        } else if (strType.equalsIgnoreCase(getResources()
                                .getString(R.string.expired))) {
                            XmlUtil.session = null;
                            Intent intent2 = new Intent(NewVideoActivity.this,
                                    MainscreenActivity.class);
                            startActivity(intent);
                            finish();
                            System.exit(0);
                        }                                           
                } catch (Exception e) {
                    // TODO Auto-generated catch block
                    e.printStackTrace();
                }   
                notificationManager.cancel(10); 
                return null;

            } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-04T11:00:30.617

我认为问题出在您的 FTP 连接上。其中说许可被拒绝..

请添加权限

```
<uses-permission android:name="android.permission.INTERNET"/> 
```

在你的清单中

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-04T10:38:25.357

可能你在编译或测试范围内链接了你的 FTP 库（例如，IDEA 允许这样的技巧），所以它在编译时在这里，但在运行时不存在。您使用哪个 IDE？

# jquery - 无法获取点击链接的 ID

> ID：12261043
> 
> 赞同：3
> 
> 时间：2012-09-04T09:59:43.503
> 
> 标签：jquery

也许我疯了，但我无法获得`<a>`被点击的链接的 ID。安全性工作正常，并且 ID 属性中有明确的`var`内容。我错过了什么？

这是PHP -

```
<span id="<?php echo $load_post_content_nonce; ?>">
    <a href="<?php the_permalink(); ?>" id="<?php the_ID(); ?>" class="read-more" target="_blank">Read more...</a>
</span> 
```

这是JS-

```
$(document).ready(function(){   

    $('a.read-more').live('click', function(e){

        e.preventDefault();

        var id = $(this).attr('id');
        var security = $(this).parent('span').attr('id');

    });

}); 
```

这是其中一个链接的 HTML 输出 -

```
<span id="b494a85e81">
    <a id="6623" class="read-more" href="http://test.dynedrewett.com/warring-parents-told-to-face-up-not-fall-out-over-contact-with-children/">Read more...</a>
</span> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-04T11:11:50.113

正如其他人指出的那样，自 jQuery 1.7 起`.live()`已**弃用**。即使在旧版本中，`.delegate()`现在也是处理委托事件的首选方法。对于更高版本，`on()`这是处理委托事件的正确方法，如[jQuery 文档中`.live()`](http://api.jquery.com/live/)所述，该文档解释了如何移植到`.on()`.

这*确实*适用于使用 AJAX 或其他方法准备好 DOM 后动态生成的内容，但您必须使用正确的语法。要处理对动态生成`.read-more`的链接的点击，请执行以下操作：

```
$(document).ready(function(){

    $(document).on('click', 'a.read-more', function(e) {
        e.preventDefault();

        var id = this.id;
        var security = $(this).parent('span').attr('id');
    });
}); 
```

* * *

在`$(document).on('click', 'a.read-more', function(e) {...})`中，您可以替换`document`为任何*静态*父元素（在绑定处理程序时存在，并且保证“永远”存在，以处理对未来`.read-more`链接的点击；文档深入解释了用法。

*在撰写本文*时，jQuery 对象[还***没有***一个名为`id`](http://api.jquery.com/category/properties/);的属性。要访问元素的 ID，您必须：
- 使用`.attr( 'id' )`
或
- 使用本机 DOM 元素的`id`属性：`$(element)[0].id`或`element.id`

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-04T10:19:29.707

使用此代码

```
 $(document).ready(function(){ 
     $('a.read-more').live('click', function(e)
      {
          e.preventDefault();
          var id = this.id;
          var security = $(this).parent('span').id;
       }); 
    }); 
```

你会通过this.id找到id。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-04T10:07:06.013

php 生成代码错误，这个脚本必须工作。

另外，尝试从“live”转换为“on”，因为：

> .on() 方法将事件处理程序附加到 jQuery 对象中当前选定的元素集。从 jQuery 1.7 开始，.on() 方法提供了附加事件处理程序所需的所有功能。有关从旧 jQuery 事件方法转换的帮助，请参阅 .bind()、.delegate() 和 .live()。要删除与 .on() 绑定的事件，请参阅 .off()。要附加仅运行一次然后自行删除的事件，请参阅 .one()

[http://api.jquery.com/on/](http://api.jquery.com/on/)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-04T10:05:31.787

您的代码工作正常。

因为`ID`你也可以这样做：

```
$(document).ready(function(){   

    $('a.read-more').on('click', function(e){

        e.preventDefault();

        var id = this.id;
        var security = this.parent('span').id;

    });

}); 
```

不使用`.attr()`.

错误肯定在您的**`PHP`代码**中。

# jquery - jquery移动滑块

> ID：12261044
> 
> 赞同：1
> 
> 时间：2012-09-04T09:59:45.583
> 
> 标签：jquery, css, jquery-mobile

我有一个 jquery 移动滑块。

```
<input type="range" min="1" max="100" data-theme="d" data-highlight="true"/> 
```

我的问题是，有没有办法改变滑块轨道上高光填充的颜色？（默认为蓝色）。

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-04T10:07:32.220

@Littm：我不想改变滑块的整个主题，我只想改变高光填充的颜色。

我找到了答案：

我们只需要覆盖 jqm 应用的一个类。

```
div.ui-btn-active{
    background-image: -webkit-gradient(linear,left top,left bottom,from(#FF0000),to(#6FACD5)) !important;
} 
```

它的工作..!!

# android - 如何检测android的Libgdx（0.9.7）中的动作结束

> ID：12261045
> 
> 赞同：9
> 
> 时间：2012-09-04T09:59:50.920
> 
> 标签：android, action, libgdx

## 在最新版本的**Libgdx**（0.9.7或libgdx-nightly-20120904）中，**动作监听**器被移除了。所以我不知道如何有效地完成我的功能：

1.  将**精灵**移动到目的地。
2.  运动包含许多 MoveToAction 或 MoveByAction。
3.  在前一个动作结束后执行以下动作。
4.  其余动作可以在动作之前修改。

## 其实重点是在前一个动作结束后如何进行下一个动作，我认为比较动作时间不是一个明智的方法。

有谁能够帮我？谢谢 ！

* * *

## 回答 #1

> 赞同：43
> 
> 时间：2013-02-26T10:43:13.300

不确定这是否回答了您的问题，但这是模拟“动作完成侦听器”的一种方法：

```
Action completeAction = new Action(){
    public boolean act( float delta ) {
        // Do your stuff
        return true;
    }
};

Action actions = sequence(fadeIn(1f), fadeOut(1f), completeAction); 
```

（来源：[http](http://steigert.blogspot.com.br/2012/07/13-libgdx-tutorial-libgdx-refactoring.html) ://steigert.blogspot.com.br/2012/07/13-libgdx-tutorial-libgdx-refactoring.html ）

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-09-04T15:07:08.347

我认为最好的方法是保持简单。您可以使用以下方式轮询演员是否还有任何动作

```
if (actor.getActions().size > 0) {no actions left!!} 
```

放置该代码的好地方是靠近 actor.act();

无论如何，您可以使用 sequenceAction 执行一系列操作：

```
import static com.badlogic.gdx.scenes.scene2d.actions.Actions.*; 
...
actor.addAction(sequence(moveTo(200, 100, 2), moveBy(20,30, 3), delay(0.5f), rotateTo(180, 5))); 
```

这将在完成时一个接一个地执行这些动作。

您可以在此处查看 nightlies 文档以获取更多信息：[http ://code.google.com/p/libgdx/wiki/scene2d](http://code.google.com/p/libgdx/wiki/scene2d)

那是你需要的吗？（我不确定我是否理解第 4 步）。

如果您需要更具体的内容，请再次询问。您还可以查看 Actor 类源代码，以更好地了解操作的处理方式。 [https://github.com/libgdx/libgdx/blob/master/gdx/src/com/badlogic/gdx/scenes/scene2d/Actor.java](https://github.com/libgdx/libgdx/blob/master/gdx/src/com/badlogic/gdx/scenes/scene2d/Actor.java)

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-01-03T09:43:22.490

libgdx 0.9.7

```
Action a = new Action();
render(){
   if (a.getTime >= a.getDuration())
      Gdx.app.log("a", "is done");
} 
```

检查操作中的警告已完成：

尽管

delayAction.getTime > 0 和 (delayAction.getTime < delayAction.getDuration)

然后

alpha.getTime > alpha.getDuration

直到

delayAction.getTime > delayAction.getDuration。

例子：

```
AlphaAction alpha = new AlphaAction();
alpha.setAlpha(0.2f);
alpha.setDuration(1);

DelayAction delayAction = new DelayAction();
delayAction.setDuration(1);

SequenceAction sequenceAction = new SequenceAction();
sequenceAction.addAction(alpha);
sequenceAction.addAction(delayAction); 
```

更多在[http://congdongandroid.vn/](http://congdongandroid.vn/)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2020-09-29T20:34:33.550

使用`Actions.run`：

```
Action action = Actions.sequence(
        Actions.delay(1f),
        Actions.run(new Runnable() {
            @Override public void run() {
                //  end of action
            }
        })
); 
```

# javascript - 堆和工厂模式中的本地对象

> ID：12261048
> 
> 赞同：3
> 
> 时间：2012-09-04T10:00:05.070
> 
> 标签：javascript, object, return, local, factory

这些是 Nicholas Zakas 书中的摘录，我不清楚，请帮助我理解。

```
function setName(obj) {
obj.name = “Nicholas”;
obj = new Object();
obj.name = “Greg”;
}
var person = new Object();
setName(person);
alert(person.name); //”Nicholas” 
```

函数退出后，本地对象 obj 在堆中死掉了（返回 obj 时也一样？）

person 和 obj 是作为堆中的单个对象的副本或相互引用吗？

他说“当 obj 在函数内部被覆盖时，它就变成了一个指向本地对象的指针。该本地对象在函数完成执行后立即被销毁”。

然后，在他解释工厂模式如下：

```
function createPerson(name, age, job){
    var o = new Object();
    o.name = name;
    o.age = age;
    o.job = job;
    o.sayName = function(){
        alert(this.name);
    };    
    return o; 
```

因为现在 o 是本地对象，他说“只要函数完成执行，本地对象就会被销毁”。所以当函数返回 o 时，它是一个本地对象，如果 i

```
var foo = createPerson(bla,18,student); 
```

然后 foo 是对本地对象的引用，该对象必须在 then 之前死掉。请澄清“在函数中返回本地对象”的概念

抱歉，帖子太长了，如果需要，请编辑和压缩。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-04T10:10:47.520

当第一行`setName`运行时，`obj`引用指向`person`在函数外部创建的对象 - 该对象的名称设置为`Nicholas`. 所以在这个阶段 是在函数之外创建`obj`的引用的副本。`person`

当第二行`setName`运行时，本地`obj`引用被重新分配以指向一个新对象，因此在`obj.name`第三行调用时，这个新对象的名称已更改为`Greg`. 该`person`对象不受此名称更改的影响。

在工厂函数中，说“函数完成后本地对象就被销毁”是不正确的——对象的本地*引用*被销毁，但对象本身是在堆上创建的并且仍然存在。如果工厂函数没有`return o`在最后一行，那么这个对象将被垃圾回收，因为一旦函数返回就不会存在对它的引用，但是`o`不会被垃圾回收，因为函数返回了对它的引用。

# javascript - 用于生成索引 PNG 的 Node.js 库？

> ID：12261050
> 
> 赞同：8
> 
> 时间：2012-09-04T10:00:12.583
> 
> 标签：javascript, node.js, png

**有谁知道用于创建*索引*PNG 的 node.js 模块？**

我查看了[这个](https://github.com/joyent/node/wiki/modules#wiki-graphics)节点图形模块列表，其中一些允许创建 png，但似乎没有一个允许您指定索引/调色板方案。

只是一些额外的信息：我有一个表示像素的二维数组，每个像素都引用一维调色板数组的索引。由此我想生成一个有效的索引 png 文件（1 个通道，每个通道 4 位）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-12-18T15:09:01.487

也许[png-stream](https://github.com/devongovett/png-stream)值得一看。根据他们：

> 您还可以通过首先使用 neuquant 模块将数据量化到索引颜色空间中来写入数据。

此外，根据您打算做什么，另一种（麻烦的）可能性是使用[sng](http://sng.sourceforge.net/sng.html)将 PNG 文件转换为文本表示和从文本表示转换。

另一种选择是[JS-PNG](http://www.kevlindev.com/gui/utilities/js_png/index.htm)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2019-04-17T22:20:06.683

Node-canvas 2.0 及更高版本支持创建索引 PNG。我在 repo 中放了两个例子：

*   [indexed-png-alpha.js](https://github.com/Automattic/node-canvas/blob/master/examples/indexed-png-alpha.js)使用高级函数`fillRect()`，如 alpha 通道。
*   [indexed-png-image-data.js](https://github.com/Automattic/node-canvas/blob/master/examples/indexed-png-image-data.js)直接对图像数据进行操作，听起来更适合您的用例。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-01T19:23:58.630

[pngparse](https://github.com/ironwallaby/pngparse)将允许您进行索引，但我不确定调色板支持。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-07T19:25:35.617

刚刚找到这个，它允许您通过 Node 使用 imagemagick： [https ://github.com/rsms/node-imagemagick](https://github.com/rsms/node-imagemagick)

# web-services - 如何从 enyo 连接到 echonest

> ID：12261052
> 
> 赞同：3
> 
> 时间：2012-09-04T10:00:13.533
> 
> 标签：web-services, enyo

我是 Enyo 和网络服务的新手。我希望使用 Enyo 构建一个[需要](http://www.enyojs.com)使用 Echonest 的网页。谁能帮助我了解如何从 Enyo 内部连接到 Echonest 服务以及是否使用 SOAP、REST 或其他东西？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-04T17:09:42.327

我假设您正在谈论在这里找到的 Echo Nest：http: [//the.echonest.com](http://the.echonest.com)？

简单看一下他们的 API，您可能不必使用 SOAP 或 REST，因为一切都可以通过 Web 服务通过简单的 GET 请求访问。看起来使用他们的 API 最难的部分将是为经过身份验证的请求生成 OAuth 签名。

就 enyo.WebService，[http](http://enyojs.com/api/#enyo.WebService) ://enyojs.com/api/#enyo.WebService 而言，您应该能够包含种类、设置 URL 并在其上调用 .send() 方法。然后你的响应处理程序会取回数据（我推荐 json），这样你就可以用它做你想做的事。

另一种选择是直接使用 enyo.Ajax，[http](http://enyojs.com/api/#enyo.Ajax) ://enyojs.com/api/#enyo.Ajax。enyo.WebService 包装了它并提供了一种熟悉的（Enyo 1 开发人员）使用它的方式。

# javascript - Object3D 中的交集

> ID：12261053
> 
> 赞同：8
> 
> 时间：2012-09-04T10:00:17.137
> 
> 标签：javascript, three.js

我在 Object3D 中添加了一些对象（用于对元素进行分组），并且我正在尝试检测对它的点击。我的场景大小为`600x400`，我的相机在三个对象内，我的事件处理程序代码如下所示：

```
function onDocumentMouseDown( event ) {
   event.preventDefault();

   var mouse = {};
   mouse.x = ( event.clientX / 600 ) * 2 - 1;
   mouse.y = - ( event.clientY / 400 ) * 2 + 1;

   var vector = new THREE.Vector3( mouse.x, mouse.y, 1 );
   projector.unprojectVector( vector, three.camera );

   var ray = new THREE.Ray( three.camera.position, vector.subSelf( three.camera.position ).normalize() );

   var intersects = ray.intersectObjects( group.children );
   alert(intersects.length);
   [...]
} 
```

实际上，我正在提醒相交对象的数量。但它保持为零。它找不到任何相交的对象。我已经对我的投影向量的 x、y 和 z 值进行了一些尝试——但没有成功。

我添加了一个精简示例，用于在[jsfiddle](http://jsfiddle.net/W9svk/)上演示此问题。也许有人对我有一个简短的提示，它出了什么问题？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-04T13:10:58.947

在您的小提琴中，因为您正在调用`THREE.SceneUtils.createMultiMaterialObject( )`创建分层结构的 ，您需要将递归标志添加到`ray.intersectObjects()`.

```
var intersects = ray.intersectObjects( group.children, true ); 
```

EDiT:`ray`现在是 --not 的一个`THREE.Raycaster`实例`THREE.Ray`。

三.js r.58

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-01-15T19:34:37.277

我遇到了同样的问题，WestLangley 的回答提供了答案。做得好！对于在 Object3D 包装器中分组的对象的鼠标选择问题的任何人，我发布了我自己的解决方案。

首先，我创建了一个可选择的对象数组——我希望这也能节省一些性能，因为 RayCaster 不需要搜索场景中的所有对象，而只需要搜索那些您希望响应选择的对象。我还直接将此数组附加到场景对象（仅因为它已经可以从我的应用程序的大部分部分访问）

```
scene.selectable = []; 
```

下一步是将您希望选择的所有对象推送到此数组中。您将只插入组中的网格/精灵/等，而不是整个组。只有最后一行在这里很重要：

```
var myWrapper = new THREE.Object3D();
var myObject = new THREE.Mesh( something );
myWrapper.add( myObject );
scene.add ( myWrapper );
scene.selectable.push( myObject ); 
```

最后，在您的鼠标选择例程中，您将像这样调用 raycaster：

```
var intersects = ray.intersectObjects( scene.selectable ); 
```

# jquery - 如何使用 ajax/javascript 将页面从另一个域调用到我的域

> ID：12261055
> 
> 赞同：1
> 
> 时间：2012-09-04T10:00:18.983
> 
> 标签：jquery, ajax, load, cross-domain, webpage

我想使用 ajax/javascript 调用并显示从另一个域到我的域的页面。我想隐藏页面的原始网址。（以surveymonkyes 为例，我可以在我的网站中加载调查页面而不显示surverymonkyes url。）

我该怎么做 ？

提前致谢..

问候，

苏尼尔

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-04T10:04:11.240

由于浏览器中实现了 SOP（同源策略），您只能使用 Ajax 从另一个域检索信息，如果另一个域允许，通过将`Access-Control-Allow-Origin`响应标头设置为请求发起的域。

# forms - 表单提交时的 Google 地理编码器问题

> ID：12261058
> 
> 赞同：1
> 
> 时间：2012-09-04T10:00:41.083
> 
> 标签：forms, google-geocoder

我对 Google Geocoder API 有疑问。

我有一个用户输入完整地址的表单。提交表单时，我想从这个地址中提取城市并将这个城市放在一个隐藏字段中。

所以这就是我所做的......

HTML：

```
<form id="new_post" name="new_post" method="post" action="" onSubmit="codeAddress()">                   
                    <p>
                        <label for="adresse_de_depart">Adresse de départ</label><br />
                        <input type="text" id="adresse_de_depart" value="" tabindex="1" size="20" name="adresse_de_depart"/>
                    </p>

                    <input type="hidden" id="ville_depart" name="ville_depart" value=""/>

                    <p align="right">
                        <input type="submit" value="Publish" tabindex="6" id="submit" name="submit" />
                    </p>
                                        </form> 
```

JS：

```
<script>
    var geocoder;
     $(document).ready(function(){  
        geocoder = new google.maps.Geocoder();
     });

  function codeAddress() {
    var adresse = document.getElementById("adresse_de_depart").value;

    console.log(geocoder);
    alert(adresse_de_depart);
    geocoder.geocode( { 'address': adresse}, function(results, status) {
      if (status == google.maps.GeocoderStatus.OK) {
        alert("OK");
        document.getElementById("ville_depart").value=results;
      } else {
        alert("Geocode was not successful for the following reason: " + status);
      }
    });
   }</script> 
```

第一个“警报”有效，但在重新加载页面（并提交表单）之后。但我没有与地理编码方法相关的警报......

你有想法吗？

谢谢 ！

# c# - 如何动态添加要在 DataGridViewImageColumn 中显示的图像？

> ID：12261072
> 
> 赞同：0
> 
> 时间：2012-09-04T10:01:37.133
> 
> 标签：c#, .net, winforms

我正在开发 WinForms，.NET2 项目。

我正在使用 DataGridView 控件来显示一些数据。

如何动态添加要在[DataGridViewImageColumn](http://msdn.microsoft.com/en-us/library/system.windows.forms.datagridviewimagecolumn.aspx)中显示的图像？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-04T10:15:39.303

您是否尝试过设置[Image](http://msdn.microsoft.com/en-us/library/system.windows.forms.datagridviewimagecolumn.image.aspx)属性？

> 获取或设置当单元格的 Value 属性未设置且单元格的 ValueIsIcon 属性设置为 false 时，在该列的单元格中显示的图像。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-04T10:15:24.187

您可以尝试以下...

```
for (int i = 0; i < gridView.Columns.Count; i++) 
{
  TableCell tableCell = gridViewRow.Cells[i];
  System.Web.UI.WebControls.Image img;
  sortDirectionImageControl = new System.Web.UI.WebControls.Image();
  string imageUrl = "~/Images/Myimage.jpg"; 
  img.ImageUrl = imageUrl;
  img.Style.Add(HtmlTextWriterStyle.MarginLeft, "10px");
  tableCell.Wrap = false;
  tableCell.Controls.Add(img);
} 
```

希望我能正确回答您的问题。

# windows - opengl纹理过滤低质量

> ID：12261089
> 
> 赞同：0
> 
> 时间：2012-09-04T10:02:29.183
> 
> 标签：windows, opengl, textures

在我的 Windows 机器上，我看不到下一个设置之间的区别：

```
glTexParameteri(GL_TEXTURE_2D, GL_TEXTURE_MIN_FILTER, GL_NEAREST); 
```

和

```
glTexParameteri(GL_TEXTURE_2D, GL_TEXTURE_MIN_FILTER, GL_LINEAR); 
```

而且两者的质量都很差。我是否缺少管道中的一些设置？

如果这是某种奇怪的东西，我有什么选择可以通过opengl而不使用自定义缩放来克服这个问题？

不确定`windows`标签。)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-04T10:26:00.387

该过滤器仅适用于缩小的纹理尊重原始大小。

你的投影参数是什么，你如何显示纹理？回答这些问题可能有助于我们找到解决方案。

我想，可能你的纹理没有被缩小。在这种情况下，尝试设置 MAG_FILTER 纹理参数以使用您的投影产生效果。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-04T10:40:42.147

对于缩小，您可能希望启用 mipmapping。请参阅 GL_LINEAR_MIPMAP_LINEAR，否则当您放大 2 倍以上时，您将在高频纹理中获得非常明显的锯齿。当然，您需要生成 mipmap，请务必使用它！

# r - 是什么导致 vobjtovarid 中的错误？

> ID：12261091
> 
> 赞同：0
> 
> 时间：2012-09-04T10:02:32.850
> 
> 标签：r, netcdf

我正在尝试从 necdf 文件中读取一些变量，但出现错误：

```
 f=open.ncdf("mrgHYDRO_Az_arfswp_Stom_PRUNI_20000101_20001231_1M_sechiba_history.nc")
 A = get.var.ncdf(nc=f,varid="Evaporation",verbose=TRUE)
 Error in vobjtovarid(nc, varid, verbose = verbose) : Variable not found 
```

请提供任何帮助，最好的问候

```
 "file has 9 dimensions:"
        [1] "lon   Size: 34"
         [1] "lat   Size: 30"
        [1] "veget   Size: 13"

  "file  has 113 variables:"
   [1] "double time_counter_bnds[tbnds,time_counter]  Longname:time_counter_bnds Missval:1e+30"
    [1] "float evap[lon,lat,time_counter]  Longname:Evaporation Missval:1e+30" 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-04T10:38:46.160

我相信在调用中引用的正确名称`get.var.ncdf`is `evap`not `Evaporation`。长名称只是一个更具描述性的名称，真实名称是`evap`.

```
A = get.var.ncdf(nc=f,varid="evap",verbose=TRUE) 
```

# android - 如何知道启动android设备时会自动启动哪些应用程序？

> ID：12261093
> 
> 赞同：-1
> 
> 时间：2012-09-04T10:02:44.430
> 
> 标签：android, linux, sqlite, autostart, geektool

有很多应用程序将启动，即使我不希望它们在我打开我的 android 设备时启动。

那么有没有什么方法可以找到我启动我的android设备后将自动启动的所有应用程序？我不打算使用自动启动应用程序来查找这些应用程序，因为它很幼稚:(

我会使用 cat 、 less 、 more 和 find 相关命令来查找这些将自动启动的应用程序，但是如何？

我应该阅读哪个配置文件？或者这样的配置是否存储在 .sqlite 数据库中？似乎我在android（android基于linux）设备上的/etc/init.d中找不到配置，但是当我使用linux时我可以在这个目录中找到自动启动信息:(

那么顺便说一句，我可以将 sqlite 命令行安装到我的 android 设备上吗？是否有任何已经构建的 sqlite 命令我可以 adb 推送到我的设备？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-04T10:05:32.193

Android 是关于意图的。您必须查询意图解析器以获取响应启动意图的应用程序。

此外， sqlite3 已经在您的设备上。

# sql - 更新表中的记录

> ID：12261102
> 
> 赞同：1
> 
> 时间：2012-09-04T10:03:10.557
> 
> 标签：sql, ms-access, vba

首先，我应该解释我的场景以声明我将做什么：

我想合并一个表中的记录，然后将它们保存在另一个表中。为什么？我有一个非常复杂的查询，需要很长时间才能运行并返回结果。我决定将此查询分为两个查询并将第一个查询的结果保存到一个表中，然后第二个查询使用新生成的表源表经常更新并且生成的表也必须生成如果我使用此代码我的 VBA 发生此错误：错误 3010 表已存在

```
Set db = CurrentDb
  ssql = "SELECT DISTINCT tb_KonzeptDaten.DFCC,  " _
  & "tb_KonzeptDaten.OBD_Code AS Konzept_Obd,tb_KonzeptDaten.DFC " _
  & "INTO Test_Table FROM tb_KonzeptDaten"
  db.Execute ssql, dbFailOnError
  RecordsUpdated = db.RecordsAffected 
```

你有什么想法吗？我们是否有另一个 SQL 语句来完成这项工作？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-04T10:05:48.683

如果它已经存在，您可以在 VBA 中删除该表，然后运行查询。

```
tblName = "TableX"
tbl = DLookup("Name", "MSysobjects", "Type=1 and Name='" & tblName & "'")

If Not IsNull(tbl) Then
    DoCmd.DeleteObject acTable, tbl
End If 
```

或者

```
Set db = CurrentDb
ssql = "DELETE FROM Test_Table"
db.Execute ssql, dbFailOnError

ssql = "INSERT INTO Test_Table SELECT DISTINCT tb_KonzeptDaten.DFCC,  " _
  & "tb_KonzeptDaten.OBD_Code AS Konzept_Obd,tb_KonzeptDaten.DFC " _
  & "FROM tb_KonzeptDaten"
db.Execute ssql, dbFailOnError 
```

# c++ - 读取最后 5 个元素的访问权限

> ID：12261103
> 
> 赞同：-6
> 
> 时间：2012-09-04T10:03:11.493
> 
> 标签：c++, c, arrays, performance, error-handling

我可以在 C/C++ 中设置/禁用普通数组的最后几个元素的读取（或写入）访问权限吗？由于我不能使用其他进程的内存，我怀疑这是可能的，但如何？我用谷歌搜索但找不到。

如果可以，怎么做？

因为我想尝试这样的事情：

```
SetPrivilage(arr,LAST_5_ELEMENTS,false);

try
{
    for(int i=0;;i++) //without bound checking. i know its evil. just trying if it is possible
    {
        arr[i]++;     //array is 1-billion elements
    } 
}
catch(int catch_end_of_array)
{
    printf("array-inc complete");
}

Memory:

|start of array |00|01|02|03|04|05|06|07|..|..|1B|start of protected page|xx|xx|xx|xx|xx|xx|xx|xx|xx|xx|xx|xx|xx| 
```

**假设我学会了如何保护页面，那么我如何在页面附近声明一个数组，以便数组端点位于页面旁边。?**

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-04T10:08:16.997

这不能以便携式方式完成，并且取决于您的操作系统。我怀疑这在任何地方都不可能，因为内存保护通常在更粗略的级别上运行（例如，Linux 有[`mprotect`](http://linux.die.net/man/2/mprotect)系统调用，但这只能保护整个`pages`（通常是 4k 块），而不是任意范围。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-04T10:54:34.943

如果您使用操作系统接口保护页面，那么您可以放置​​一个数组，以便数组在保护开始的地方结束。您必须通过设置的指针（例如，`int *p`）来指定数组，而不是将其声明为数组（例如，`int p[40]`），因为大多数 C 实现不给您指定数组地址的方法。

由于大多数系统内存保护的粒度，您通常只能将阵列的一端与保护边界对齐。因此，这不是保护数组边界的普遍有用的机制。我已将其用于测试目的，分别测试两端：

*   对齐数组，使其末端紧靠受保护内存的开头。执行测试。
*   对齐一个数组，使其开始与受保护内存的结尾相邻。执行测试。

因此，如果被测试的例程在数组之前或之后不正确地访问内存，那么其中一个测试将失败。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-04T10:08:08.433

我假设你`arr`是一个 POD（普通旧数据）数组。您可以在 C++ 中使其成为一个类并重载它`operator[]`以进行运行时索引检查。

你通常不能做你想做的事，如果可以的话，它会强烈地依赖于实现和操作系统。

在 Linux 上，对数据的访问权限与[虚拟内存](http://en.wikipedia.org/wiki/Virtual_memory)映射有关。这与带有[mprotect(2)](http://www.kernel.org/doc/man-pages/online/pages/man2/mprotect.2.html)系统调用的[mmap(2) 和 munmap(2)有关。](http://www.kernel.org/doc/man-pages/online/pages/man2/mmap.2.html)这些调用以页面级别的粒度工作（页面通常为 4Kbytes，并且 4Kbytes 对齐）。

你可以做一些淘气的把戏，比如`mmap`-ing 一个大区域，`mprotect`它的最后一页，并做不可移植的指针算法来计算`arr`指针。这很恶心，所以不要这样做。[像这样](https://stackoverflow.com/a/11681530/841108)`SIGSEGV`使用基于脏`mmap`的技巧进行捕捉不是很便携，而且可能不是很有效。并且信号处理程序不能抛出 C++ 异常。

# java - jface向导中的事件onclick下一个按钮

> ID：12261104
> 
> 赞同：0
> 
> 时间：2012-09-04T10:03:15.550
> 
> 标签：java, eclipse-rcp, jface, wizard

我有一个有两页的**jface 向导。**

*   第一页：创建一个项目文件夹。
*   第二页：在第一步创建的文件夹内创建**类。**

但是当我点击`next`按钮时，第一页不会创建下一步要选择的文件夹，只有在我点击`finish`按钮时才会创建。

如何在单击按钮时创建文件夹`next`？

我的代码：

```
public class ShapesCreationWizard extends Wizard implements INewWizard,
    IExecutableExtension {

private WizardNewProjectCreationPage _mainPage;
private CreationPage page2;

// cache of newly-created project
private IProject _newProject;

// switch to control write of trace data
private boolean _bTraceEnabled = true;

public void addPages() {

    _mainPage = new WizardNewProjectCreationPage("Project");
    _mainPage.setDescription("Create a new project .");
    _mainPage.setTitle("New Project");
    addPage(_mainPage); 
    addPage(page2);
}

public IProject getNewProject() {
    return _newProject;
}

public void init(IWorkbench workbench, IStructuredSelection selection) {
    page2 = new CreationPage(workbench, selection);
}

public boolean performFinish() {
    createNewProject();
    if (_config != null) {
        BasicNewProjectResourceWizard.updatePerspective(_config);
        BasicNewProjectResourceWizard.selectAndReveal(this._newProject,
                PlatformUI.getWorkbench().getActiveWorkbenchWindow());
    }
    page2.finish();
    return true;

}

public IProject createNewProject() {
    if (_newProject != null) {
        return _newProject;
    }
    // get a project handle
    final IProject newProjectHandle = _mainPage.getProjectHandle();

    // get a project descriptor
    IPath defaultPath = Platform.getLocation();
    IPath newPath = _mainPage.getLocationPath();
    if (defaultPath.equals(newPath)) {
        newPath = null;
    }
    IWorkspace workspace = ResourcesPlugin.getWorkspace();
    final IProjectDescription description = workspace
            .newProjectDescription(newProjectHandle.getName());
    description.setLocation(newPath);

    // create the new project operation
    WorkspaceModifyOperation op = new WorkspaceModifyOperation() {
        protected void execute(IProgressMonitor monitor)
                throws CoreException {
            createProject(description, newProjectHandle, monitor);
            // addOWLNature(newProjectHandle);

        }
    };

    // run the new project creation operation
    try {
        getContainer().run(false, true, op);
    } catch (InterruptedException e) {
        return null;
    } catch (InvocationTargetException e) { 

        return null;
    }

    _newProject = newProjectHandle;

    return _newProject;
}

public void createProject(IProjectDescription description,IProject projectHandle, IProgressMonitor monitor)
        throws CoreException {
    try {
        monitor.beginTask("",2000);

        projectHandle.create(description, new SubProgressMonitor(monitor,1000));

        if (monitor.isCanceled()) {
            throw new OperationCanceledException();
        }
        projectHandle.open(new SubProgressMonitor(monitor,1000));

    } finally {
        monitor.done();
    }
}

protected void resultInformation(String title, String msg) {
    // Confirm Result
    if (_bTraceEnabled) {
        // trace only to console
        System.out.println(title + msg);
    } else {
        // user interaction response
        MessageDialog.openInformation(getShell(), title, msg);
    }

}

protected void resultError(String title, String msg) {
    // Indicate Error
    if (_bTraceEnabled) {
        // trace only to console
        System.out.println(title + msg);
    } else {
        // user interaction response
        MessageDialog.openError(getShell(), title, msg);
    }

}

private IConfigurationElement _config;

public void setInitializationData(IConfigurationElement config,String propertyName, Object data) throws CoreException {
        _config = config;

}
} 
```

第二页：

```
public class CreationPage extends WizardNewFileCreationPage {
private static final String DEFAULT_EXTENSION = ".inte";//TODO extenção, alterara tb no shapes XML
private final IWorkbench workbench;

/**
 * Create a new wizard page instance.
 * 
 * @param workbench
 *            the current workbench
 * @param selection
 *            the current object selection
 * @see CopyOfShapesCreationWizard#init(IWorkbench, IStructuredSelection)
 */
CreationPage(IWorkbench workbench, IStructuredSelection selection) {
    super("shapeCreationPage1", selection);
    this.workbench = workbench;
    setTitle("Create a new " + DEFAULT_EXTENSION + " file");
    setDescription("Create a new " + DEFAULT_EXTENSION + " file");
}

/*
 * (non-Javadoc)
 * 
 * @see
 * org.eclipse.ui.dialogs.WizardNewFileCreationPage#createControl(org
 * .eclipse.swt.widgets.Composite)
 */
public void createControl(Composite parent) {
    super.createControl(parent);
    setFileName("Integrid1" + DEFAULT_EXTENSION);
    setPageComplete(validatePage());
}

/** Return a new ShapesDiagram instance. */
private Object createDefaultContent() {
    return new ShapesDiagram();
}

/**
 * This method will be invoked, when the "Finish" button is pressed.
 * 
 * @see CopyOfShapesCreationWizard#performFinish()
 */
boolean finish() {
    // create a new file, result != null if successful
    IFile newFile = createNewFile();

    // open newly created file in the editor
    IWorkbenchPage page = workbench.getActiveWorkbenchWindow().getActivePage();
    if (newFile != null && page != null) {
        try {
            IDE.openEditor(page, newFile, true);
            System.err.println();
        } catch (PartInitException e) {
            e.printStackTrace();
            return false;
        }
    }

    return true;
}

/*
 * (non-Javadoc)
 * 
 * @see
 * org.eclipse.ui.dialogs.WizardNewFileCreationPage#getInitialContents()
 */
protected InputStream getInitialContents() {

    ByteArrayInputStream bais = null;
    try {
        ByteArrayOutputStream baos = new ByteArrayOutputStream();
        ObjectOutputStream oos = new ObjectOutputStream(baos);
        oos.writeObject(createDefaultContent()); // argument must be
                                                    // Serializable
        oos.flush();
        oos.close();
        bais = new ByteArrayInputStream(baos.toByteArray());
    } catch (IOException ioe) {
        ioe.printStackTrace();
    }
    return bais;
}

/**
 * Return true, if the file name entered in this page is valid.
 */
private boolean validateFilename() {
    if (getFileName() != null
            && getFileName().endsWith(DEFAULT_EXTENSION)) {
        return true;
    }
    setErrorMessage("The 'file' name must end with " + DEFAULT_EXTENSION);
    return false;
}

/*
 * (non-Javadoc)
 * 
 * @see org.eclipse.ui.dialogs.WizardNewFileCreationPage#validatePage()
 */
protected boolean validatePage() {
    return super.validatePage() && validateFilename();
}
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-04T10:45:35.090

一般来说，我会说最好在向导结束时在 performFinish 方法中完成所有工作，否则您必须从第二页处理“返回”按钮的作用问题，而且用户可以取消离开向导的一半已创建项目。

话虽如此，如果您真的希望在第一页上创建项目，我会这样做是禁用“下一步”按钮：

```
setPageComplete(false); 
```

然后在第一页添加一个“创建项目”按钮。单击按钮时，您可以创建项目并启用“下一步”按钮。

# c - 重新分配返回空

> ID：12261110
> 
> 赞同：1
> 
> 时间：2012-09-04T10:03:29.533
> 
> 标签：c

我有一个简单的程序，用于学习目的，但是当我从分配的数组重新分配时，我不断返回 null。

```
#include <stdio.h>

#include <stdlib.h>

void main() 
{
    char *ptr, *retval;

    ptr = (char *)calloc(10, sizeof(char));

    if (ptr == NULL)
        printf("calloc failed\n");
    else
        printf("calloc successful\n");

    retval = (char *)realloc(ptr, 5);

    if (retval == NULL)
        printf("realloc failed\n");    
    else
        printf("realloc successful\n");

    free(ptr);
    free(retval);

} 
```

我无法重新分配，`retval = (char *)realloc(ptr, 5);` 我做错了什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-04T10:06:07.567

它对我来说按预期工作：

```
calloc successful
realloc successful
*** glibc detected *** double free or corruption 
```

假设双重释放是故意的，代码看起来不错。不要调用`free(ptr)`，因为您已经通过重新分配它来释放它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-04T10:10:37.917

当我编译它时，这对我有用。您有一个错误，即当您重新分配 ptr 指向的内存不再有效时，您正在调用“free(ptr)”。它可能与 retval 相同，但在这种情况下，您将释放它两次。

# php - 将变量 javascript 传递给 php

> ID：12261113
> 
> 赞同：0
> 
> 时间：2012-09-04T10:03:48.933
> 
> 标签：php, javascript

我想将变量 javascript 传递给变量 php。我不能使用 $_GET 或 $_POST 因为都是由 jquery 中的方法加载加载的，我没有任何形式或可能性来实现它。这是我的代码：

```
<script type="text/javascript">
 var id= "test";
</script>
<?php $_SESSION['my_page'] =?> + id; 
```

我该如何解决？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-04T10:05:55.920

2个解决方案

*   您使用 AJAX 发送您的值，请参阅[jQuery](http://www.jquery.com)。
*   您将提交表单中的会话变量设置为值并在脚本上处理它。

八种方式你不能像那样`javascript`混合`PHP`。`Javascript`是客户端，`PHP`是服务器端。

对于 jQuery：

```
<script type="text/javascript">
    var id = "test";
    $.get('yourScript.php?id='+id);
</script> 
```

并且在`yourScript.php`

```
<?php
     session_start();
     $_SESSION['my_page'] = (int)$_GET['id'];
?> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-04T10:09:31.830

事实是你不能真正通过它们。Javascript 是客户端，这意味着它发生在每台计算机上。PHP是服务器端的，所以它发生在服务器上。您必须以某种方式将该变量从 Javascript 传递到服务器，并且您可以执行该 AJAX。

要考虑的另一个想法是使用将变量传递到不同 PHP 文档的标准方法：表单。您可以制作一个表单并使用 javascript 将您想要提交的内容插入 PHP 服务器，然后您可以从那里使用 $_GET 或 $_POST。希望这可以帮助。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-04T10:09:29.057

考虑使用 AJAX。这是一些教程的链接，尽管如果您使用的是 JQuery，它可以为您处理大部分编码。

[http://www.w3schools.com/ajax/default.asp](http://www.w3schools.com/ajax/default.asp)

在 JavaScript 中，您可以在页面异步加载后调用 PHP 脚本（这意味着它将在后台打开一个连接，而不是更改页面）。一旦 PHP 脚本完成执行，它将返回一个状态代码，您可以通过 JavaScript 检查该状态代码。您可以访问由 JavaScript 中的 PHP 脚本执行产生的数据。

如果您正在编写移动网站，请注意并非所有手机都支持 AJAX。

**编辑：**如果您更愿意使用 JQuery，那么这里有一个很好的教程链接[http://www.sitepoint.com/ajax-jquery/](http://www.sitepoint.com/ajax-jquery/)

# android - Android 自定义警报对话框在 ICS 和 Gingerbread 上不同

> ID：12261126
> 
> 赞同：3
> 
> 时间：2012-09-04T10:04:18.513
> 
> 标签：android, android-alertdialog

我有一个自定义的 alertdialog 可以扩展这个自定义布局：

```
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:id="@+id/infoLayout"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:theme="@style/AppTheme" >

    <LinearLayout
        android:id="@+id/linearLayout1"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignParentLeft="true"
        android:layout_alignParentRight="true"
        android:weightSum="2" >

        <TextView
            android:id="@+id/infoVersionTitle"
            android:layout_width="0dp"
            android:layout_height="wrap_content"
            android:layout_weight="1"
            android:gravity="right|center"
            android:text="@string/infoVersion"
            android:textAppearance="?android:attr/textAppearanceLarge" />

        <TextView
            android:id="@+id/infoVersionTitleValue"
            android:layout_width="0dp"
            android:layout_height="wrap_content"
            android:layout_weight="1"
            android:textAppearance="?android:attr/textAppearanceLarge" />
    </LinearLayout>

    <TextView
        android:id="@+id/infoDetailText"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:layout_below="@+id/linearLayout1"
        android:padding="10dp" />

</RelativeLayout> 
```

我的清单文件中有这个：

```
<uses-sdk
    android:minSdkVersion="8"
    android:targetSdkVersion="15" />
........
<application
    android:icon="@drawable/ic_launcher"
    android:label="@string/app_name"
    android:theme="@style/AppTheme"  > 
```

我已经这样定义了 style.xml：

```
<resources xmlns:android="http://schemas.android.com/apk/res/android">
    <style name="AppTheme" parent="android:Theme.Light"></style>
</resources> 
```

style.xml v11 定义如下：

```
<resources>
    <style name="AppTheme" parent="android:Theme.Light"></style>
</resources> 
```

style.xml v14 定义如下：

```
<resources>
    <style name="AppTheme" parent="android:Theme.Holo.Light.DarkActionBar" />
</resources> 
```

在 4.0.3 设备上运行它时，它显示如下：

![在此处输入图像描述](../Images/554209fe281290de7bca92c901a80576.png)

在 2.3.3 设备上运行，它显示如下：

![在此处输入图像描述](../Images/94a085a39d25788a0721e9333cc9470e.png)

在 2.3.3 设备上，文本几乎不可读，我想显示白色背景（包括标题栏）

是否可以像在 4.0.3 上显示的那样在所有设备上显示自定义警报对话框？

我见过[这个](http://android-developers.blogspot.de/2012/01/holo-everywhere.html)，但似乎无法弄清楚。

有什么解决办法吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-06-25T18:02:47.270

`AlertDialog.Builder#setInverseBackgroundForced(true)`创建对话框时尝试调用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-04T10:15:31.810

您可以为此目的使用[ActionBarSherlock](http://actionbarsherlock.com/)

检查对话框[主题页面中的描述](http://actionbarsherlock.com/theming.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-09-07T19:40:59.893

为确保所有设备的兼容性：

```
setInverseBackgroundForced(Build.VERSION.SDK_INT >= Build.VERSION_CODES.HONEYCOMB ? false
                                    : true) 
```

这样可以保证 HoneyCromb 下面的设备正常显示，下面的设备是倒置的！

这是一个例子：

```
final AlertDialog.Builder dialog = new AlertDialog.Builder(this)
dialog.setInverseBackgroundForced(Build.VERSION.SDK_INT >= Build.VERSION_CODES.HONEYCOMB ? false
                        : true);
dialog.setMessage("Test Dialog!");
dialog.create().show(); 
```

请参阅文档：

[http://developer.android.com/reference/android/app/AlertDialog.Builder.html#setInverseBackgroundForced(boolean)](http://developer.android.com/reference/android/app/AlertDialog.Builder.html#setInverseBackgroundForced(boolean))

# java - 运行 JAR 文件是否需要 JRE 和 JDK？

> ID：12261128
> 
> 赞同：15
> 
> 时间：2012-09-04T10:04:26.703
> 
> 标签：java, jar

可以在本地运行 JAR 文件。下一步是在另一台 PC 上运行它。

问题是运行 JAR 文件是否需要 JRE、JDK 或两者？

* * *

## 回答 #1

> 赞同：39
> 
> 时间：2012-09-04T10:07:42.363

JDK 包含 JRE。

大多数程序只需要 JRE（Java 运行时环境），但有些程序在运行时需要编译器，在这种情况下您需要 JDK。

如果您有 JDK，则也不需要 JRE。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-09-04T10:07:41.147

要运行 jar 文件，您只需要 java.exe(windows)。JDK 是 Java 的开发工具包，而 JRE 是运行时。JDK 包含 JRE。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2015-05-22T15:23:43.277

在对已接受答案的评论中，nobalG 问道：“如果 jre 已经存在，为什么还需要编译器？”

在撰写本文时，我没有足够的声誉来发表评论，所以我在这里回复。

我有一种情况，我想编写在运行时编译其他代码然后使用该编译代码的代码。在我的例子中，我正在创建一个工具，它可以基于特定框架获取测试类，编译它，加载类，并从中提取测试数据，以便数据可以用作端到端测试的一部分. 为了使该工具正常运行，它必须与 JDK 一起运行，以便它可以使用 Java 编译器。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-09-04T10:10:17.007

你只需要JRE。

如果您尝试运行的 jar 文件`<classname>`在清单文件中包含 Main-Class: 标头，那么您可以通过以下命令简单地运行 jar 文件：

`java -jar [your jar file name]`

如果清单文件没有该条目（并且您知道包含 main 函数的类的完全限定类名），那么您可以通过以下命令运行 jar 文件：

`java -cp [absolute path to jar file] [full qualified class name containing the main function]`

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2012-09-04T10:16:55.250

要运行 jar 文件，您只需要 JRE。您可以使用以下命令运行 jar 文件：

java -jar [jar 文件名]

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2012-09-04T10:10:45.997

JRE足以运行

JDK用于开发

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2012-09-04T10:16:16.153

您需要 JRE，但不需要 JDK。JRE 是 java 运行时环境，没有它就无法执行 java 代码。.jar 是一个编译好的 java 文件可以，这需要运行 java 运行环境。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2012-10-18T09:31:37.383

你想运行jar文件；所以你只需要Java Runtime 环境（即JRE）。

# magento - 如何订购 Excel 导出多工作表 XML

> ID：12261130
> 
> 赞同：0
> 
> 时间：2012-09-04T10:04:34.453
> 
> 标签：magento

Magento的订单导出机制内置不导出商品订单我想问一下如何导出每个订单上的一个Worksheet Worksheet里面的每一条数据都是商品信息

以下是示例

```
<Workbook>
<Worksheet ss:Name="order1">
    <Table>
        <Row>
            <Cell><Data ss:Type="String">Order #</Data></Cell>
            <Cell><Data ss:Type="String">SKU</Data></Cell>
            <Cell><Data ss:Type="String">Qty</Data></Cell>
        </Row>
        <Row>
            <Cell><Data ss:Type="Number">1</Data></Cell>
            <Cell><Data ss:Type="String">A1</Data></Cell>
            <Cell><Data ss:Type="Number">3</Data></Cell>
        </Row>
        <Row>
            <Cell><Data ss:Type="Number">1</Data></Cell>
            <Cell><Data ss:Type="String">A2</Data></Cell>
            <Cell><Data ss:Type="Number">5</Data></Cell>
        </Row>
    </Table>
</Worksheet>
<Worksheet ss:Name="order2">
    <Table>
        <Row>
            <Cell><Data ss:Type="String">Order #</Data></Cell>
            <Cell><Data ss:Type="String">SKU</Data></Cell>
            <Cell><Data ss:Type="String">Qty</Data></Cell>
        </Row>
        <Row>
            <Cell><Data ss:Type="Number">2</Data></Cell>
            <Cell><Data ss:Type="String">B1</Data></Cell>
            <Cell><Data ss:Type="Number">2</Data></Cell>
        </Row>
        <Row>
            <Cell><Data ss:Type="Number">2</Data></Cell>
            <Cell><Data ss:Type="String">B2</Data></Cell>
            <Cell><Data ss:Type="Number">3</Data></Cell>
        </Row>
    </Table>
</Worksheet> 
```

通过了解lib/Varien/Convert/Parser/Xml/Excel.php，Magento本身不支持multi-Worksheet Export 我打算再写一个Parser，做multi-Worksheet Export。

但是更大的问题，导出数据需要通过app/code/core/Mage/Adminhtml/Block/Sales/Order/Grid.php的_prepareColumns()处理但是我找不到怎么调用数据库

希望能帮到你，谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-04T11:16:06.980

您可以将 PHPExcel 库放在“lib”中，Magento 将自动加载它，而无需在您的模块中进一步处理（您将需要一个自定义模块）。

由于您正在写作而不是阅读，您应该能够在现有内存中使用 PHPExcel（使用 PHPExcel 导入可能会很大）。

对 PHPExcel 的精细控制可以做的事情没有任何限制，显然您也需要迭代您的订单，并且您的模块将需要一个后端。

你可以把一个骨架模块放在一起，看看你是否可以创建一个 EXcel 文件（弹出一些演示代码，看看它是否能拾取类等）。然后，一旦这些位正常工作，您应该能够导出出色的报告。

[http://phpexcel.codeplex.com/](http://phpexcel.codeplex.com/)

[https://stackoverflow.com/a/4816738/1617149](https://stackoverflow.com/a/4816738/1617149)

# csv - 使用 SSRS 读取 CSV 文件

> ID：12261134
> 
> 赞同：0
> 
> 时间：2012-09-04T10:04:39.090
> 
> 标签：csv, reporting-services, ssrs-2008

显然，微软已经停止了对 SSRS 中的 Oracle Hyperion Essbase 的支持，所以我们不能直接从原始数据库中读取。

我们设计了一个解决方案，将我们的数据导出到 csv 文件，然后在 SSRS 中读取它们。但它不起作用。

我尝试使用这些参数在 SSRS 中创建一个新的 OLEDB 数据源：

```
Provider=Microsoft.ACE.OLEDB.12.0;Data Source="\\server\share";Extended Properties="text;HDR=No;FMT=Delimited(,)" 
```

但它会引发错误......“未指定的错误”。我尝试了很多事情，但没有成功。

有人知道吗？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-06T00:03:26.147

SSRS 仍然支持 ODBC 连接。我知道这有点老派，但它比使用中间文件格式传输数据要好。您可能需要编辑 Oracle 服务器上的 listener.ora。我已经将 ODBC 用于没有像样的 OLEDB 驱动程序或不受支持的各种奇怪的数据库连接。

# jquery - 使用 JQuery 单击图像（标题）填写输入字段

> ID：12261137
> 
> 赞同：3
> 
> 时间：2012-09-04T10:04:45.967
> 
> 标签：jquery, image, title, fill

我的 html 看起来像这样

```
<input type="search" id="starSearch" />
<img src="image.png" title="How to do this"> 
```

如何更改将使用图像标题属性值填充搜索字段的此脚本？我知道这段代码，但它仅用于链接和 innerHTML

```
 $(function(){
    $('.special_field_link').live('click', function() {
        $("#a_input_id").val($(this).html());
    });
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-04T10:06:57.870

像这样的东西：

```
$(document).on("click", "img", function() {
    $("#starSearch").val(this.title);
}); 
```

注意：不要使用`live`，它已被弃用。`on`与事件委托一起使用。

**演示：http:** [//jsfiddle.net/MqnfB/](http://jsfiddle.net/MqnfB/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-04T10:09:32.157

试试这个

```
<img src="image.png" title="How to do this" id="imgtit"> 
```

JS

```
 $(function(){
        $('.special_field_link').live('click', function() {
            $("#a_input_id").val($("#imgtit").attr('title'));
        });
    }); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-04T10:24:42.153

```
 $(document).ready(function() {
   $('img').click(function(){
    $('#starSearch').val($(this).attr('title'));
  })
});​ 
```

演示：http: [//jsfiddle.net/gopalrohila/vzZ22/](http://jsfiddle.net/gopalrohila/vzZ22/)

# java - DocumentBuilder 在解析 xml 时删除 \n 和 \t

> ID：12261139
> 
> 赞同：0
> 
> 时间：2012-09-04T10:04:48.650
> 
> 标签：java, saxparser

> **可能重复：**
> [使用 Java 解析时如何在文档元素之前保留空格？](https://stackoverflow.com/questions/868887/how-to-keep-whitespace-before-document-element-when-parsing-with-java)

我正在尝试解析 xml，以便我可以替换拉丁字符。xml 中的拉丁字符被替换，但 xml 中的 \n 和 \t 被删除。我正在使用 dtd 替换拉丁字符。下面是我用来解析 xml 的代码

```
DocumentBuilderFactory docFactory = DocumentBuilderFactory
                .newInstance();
        docFactory.setValidating(false);
        DocumentBuilder docBuilder = docFactory.newDocumentBuilder();
        docBuilder.setEntityResolver(resolver);
        String str = "";
        try {
            Document doc = docBuilder.parse(is, contextPath);
            OutputFormat format = new OutputFormat(doc); // Serialize DOM
            format.setIndenting(reqIndent);
            format.setOmitDocumentType(true);
            format.setEncoding(encoding);
            StringWriter stringOut = new StringWriter(); // Writer will be a
            XMLSerializer serial = new XMLSerializer(stringOut, format);
            serial.asDOMSerializer(); // As a DOM Serializer
            serial.serialize(doc);
            str = stringOut.toString();
        } catch (org.xml.sax.SAXParseException saxExp) {
            throw saxExp; // asString(is);
        } catch (Exception e) {

            throw e;

        } finally {
            if (is != null)
                is.close();
        }
        return str; 
```

# sql-server - MS Access 显示 #deleted，尽管数据已正确保存

> ID：12261149
> 
> 赞同：1
> 
> 时间：2012-09-04T10:05:28.683
> 
> 标签：sql-server, ms-access

我们有一个带有 MS SQL Server 2008 后端的 MS Access 2007 数据库。

在服务器上，对于每个表，我们都编写了一个视图，每个视图都包含更新/插入/删除的触发器。然后这些视图作为链接表链接到 MS Access。

每个服务器表都包含一个由一个或多个列组成的主键，以及一个单独的 IDENTITY 列（int，具有唯一索引）。

现在，如果我进入 MS Access 并将数据直接输入到链接表中，一切正常。

但是，如果我创建一个使用链接表作为记录源的**Form**，那么在每次插入之后，所有字段都会显示**#deleted**。但是数据是正确存入数据库的，所以主要是显示问题！

我认为这与触发器有关，但我找不到问题。

任何人都可以帮助解决这个问题吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-05T09:15:14.140

问题解决了。触发器中实际上存在问题，导致更新或插入了多个行。修复触发器后，现在一切正常。

# git - 如何使用 git

> ID：12261154
> 
> 赞同：2
> 
> 时间：2012-09-04T10:05:32.747
> 
> 标签：git, branch

我们想开始使用 git，但是有一些关于分支的问题。

它是如何组织的：

1.  每个程序员都有自己的本地存储库并在 master 分支中工作。
2.  任何更改都会推送到裸存储库。
3.  开发服务器具有本地存储库（主分支）并由 Post-Push 挂钩更新
4.  生产服务器具有本地存储库（分支“生产”）并由 Post-Push 挂钩更新

如何正确地将一些提交从 master 推送到生产？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-04T10:16:24.247

原则上，您需要将更改从 master 合并到生产中。所以在一些工作区，切换到生产分支，合并主分支，然后推送到开发和生产服务器。这可以在任何开发人员的工作区中完成。

如果没有直接对生产分支进行任何更改，所有合并都将是“快进” - 即“生产分支”基本上只是指向主分支上某个位置的指针，指示最后一次更新生产的时间点. 这意味着合并也永远不会产生任何冲突。从技术上讲，在这种情况下，您*可以*执行“git push origin master:production”来更新远程服务器上的生产分支。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-04T10:31:16.760

拥有一个中间仓库（这里是“开发”）是一种很好的做法，可以整合和调试那些可以投入生产的提交。

但我宁愿`rel2.3`在中间存储库上创建一个发布分支（例如“”），以便能够在将“ `rel2.3`”推送到产品存储库的“ `production`”分支之前进行最后的修复/小调整（连同一个标签，在为了标记代表 2.3 的确切提交）

因此，单个开发人员不应该直接进入生产环境：只有验证了在中间存储库上推送的内容的“集成商”（或测试人员）才应该推送到生产环境。

我会`rel2.3_hotfixes`在 prod 存储库上创建一个“”分支，以便在生产中隔离紧急修复。

因此，这意味着每个 repo（开发人员和“开发”）都需要同步（即重新基于）生产分支，生产分支可能在给定版本之后添加提交。

# scala - 映射和携带状态的正确单子或序列理解是什么？

> ID：12261157
> 
> 赞同：14
> 
> 时间：2012-09-04T10:05:52.910
> 
> 标签：scala, state, monads, state-monad

我正在编写一个编程语言解释器。

我需要正确的代码习惯来评估一系列表达式以获取它们的一系列值，并在评估发生时将状态从一个评估器传播到下一个评估器。我想要一个函数式编程习语。

这不是折叠，因为结果像地图一样出来。这不是地图，因为横穿了国家道具。

我所拥有的是我用来试图解决这个问题的代码。先忍受几行测试台：

```
// test rig
class MonadLearning extends JUnit3Suite {

  val d = List("1", "2", "3") // some expressions to evaluate. 

  type ResType = Int 
  case class State(i : ResType) // trivial state for experiment purposes
  val initialState = State(0)

// my stub/dummy "eval" function...obviously the real one will be...real.
  def computeResultAndNewState(s : String, st : State) : (ResType, State) = {
    val State(i) = st
    val res = s.toInt + i
    val newStateInt = i + 1
    (res, State(newStateInt))
  } 
```

我目前的解决方案。使用在评估地图主体时更新的 var：

```
 def testTheVarWay() {
    var state = initialState
    val r = d.map {
      s =>
        {
          val (result, newState) = computeResultAndNewState(s, state)
          state = newState
          result
        }
    }
    println(r)
    println(state)
  } 
```

我使用 foldLeft 有我认为不可接受的解决方案，它执行我所说的“折叠时将其包起来”的成语：

```
def testTheFoldWay() {

// This startFold thing, requires explicit type. That alone makes it muddy.
val startFold : (List[ResType], State) = (Nil, initialState)
val (r, state) = d.foldLeft(startFold) {
  case ((tail, st), s) => {
    val (r, ns) = computeResultAndNewState(s, st)
    (tail :+ r, ns) // we want a constant-time append here, not O(N). Or could Cons on front and reverse later
  }
}

println(r)
println(state)

} 
```

我还有几个递归变体（很明显，但也不清楚或动机不强），其中一个使用几乎可以容忍的流：

```
def testTheStreamsWay() {
  lazy val states = initialState #:: resultStates // there are states
  lazy val args = d.toStream // there are arguments
  lazy val argPairs = args zip states // put them together
  lazy val resPairs : Stream[(ResType, State)] = argPairs.map{ case (d1, s1) => computeResultAndNewState(d1, s1) } // map across them
  lazy val (results , resultStates) = myUnzip(resPairs)// Note .unzip causes infinite loop. Had to write my own.

  lazy val r = results.toList
  lazy val finalState = resultStates.last

  println(r)
  println(finalState)
} 
```

但是，我想不出像上面的原始“var”解决方案那样紧凑或清晰的东西，我愿意接受，但我认为吃/喝/睡觉单子成语的人只会说.. . 使用这个... （希望如此！）

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-09-04T14:44:02.973

## 使用带有累加器的 map-with-accumulator 组合器（简单的方法）

你想要的高阶函数是`mapAccumL`. 它在 Haskell 的[标准库](http://www.haskell.org/ghc/docs/latest/html/libraries/base/Data-List.html)中，但对于 Scala，您必须使用类似[Scalaz](https://github.com/scalaz/scalaz)的东西。

首先是导入（请注意，我在这里使用的是 Scalaz 7；对于以前的版本，您需要导入`Scalaz._`）：

```
import scalaz._, syntax.std.list._ 
```

然后它是一个单行：

```
scala> d.mapAccumLeft(initialState, computeResultAndNewState)
res1: (State, List[ResType]) = (State(3),List(1, 3, 5)) 
```

请注意，我必须颠倒您的评估者参数和返回值元组的顺序以匹配`mapAccumLeft`（在两种情况下都首先声明）预期的签名。

## 使用状态单子（稍微不那么简单的方法）

正如 Petr Pudlák 在另一个答案中指出的那样，您也可以使用 state monad 来解决这个问题。Scalaz 实际上提供了许多工具，使使用 state monad 比他的答案中建议的版本更容易，而且它们不适合评论，所以我在这里添加它们。

首先，Scalaz 确实提供了一个`mapM`——它只是被称为`traverse`（这有点更笼统，正如 Petr Pudlák 在他的评论中指出的那样）。所以假设我们有以下内容（我在这里再次使用 Scalaz 7）：

```
import scalaz._, Scalaz._

type ResType = Int
case class Container(i: ResType)

val initial = Container(0)
val d = List("1", "2", "3")

def compute(s: String): State[Container, ResType] = State {
  case Container(i) => (Container(i + 1), s.toInt + i)
} 
```

我们可以这样写：

```
d.traverse[({type L[X] = State[Container, X]})#L, ResType](compute).run(initial) 
```

如果你不喜欢丑陋的 lambda，你可以像这样摆脱它：

```
type ContainerState[X] = State[Container, X]

d.traverse[ContainerState, ResType](compute).run(initial) 
```

但它变得更好！Scalaz 7 为您提供了一个`traverse`专门用于 state monad 的版本：

```
scala> d.traverseS(compute).run(initial)
res2: (Container, List[ResType]) = (Container(3),List(1, 3, 5)) 
```

好像这还不够，甚至还有一个`run`内置的版本：

```
scala> d.runTraverseS(initial)(compute)
res3: (Container, List[ResType]) = (Container(3),List(1, 3, 5)) 
```

在我看来，仍然不如`mapAccumLeft`版本好，但很干净。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-09-04T21:16:09.677

您所描述的是状态单子中的计算。我相信你的问题的答案

> 这不是折叠，因为结果像地图一样出来。这不是地图，因为横穿了国家道具。

是它是**使用状态 monad 的 monadic 地图**。

状态单子的值是读取一些内部状态、可能修改它并返回一些值的计算。它经常在 Haskell 中使用（参见[此处](https://en.wikibooks.org/wiki/Haskell/Advanced_monads#The_State_monad)或[此处](https://en.wikibooks.org/wiki/Haskell/Understanding_monads/State)）。

对于 Scala，`trait`ScalaZ 库中有一个名为[State](http://scalaz.github.com/scalaz/scalaz-2.9.1-6.0.4/doc/index.html#scalaz.State)的模型对其进行建模（另请参见[源代码](https://github.com/scalaz/scalaz/blob/master/core/src/main/scala/scalaz/State.scala)）。有一些实用方法`States`用于创建`State`. 注意从一元的角度来看`State`只是一个一元的*值*。起初这可能看起来令人困惑，因为它是由一个取决于状态的函数描述的。（一元函数将是某种类型`A => State[B]`。）

接下来你需要一个*单子映射*函数，它计算你的表达式的值，通过计算线程化状态。在 Haskell中，当专门用于 state monad 时，有一个库方法[mapM可以做到这一点。](http://hackage.haskell.org/packages/archive/base/latest/doc/html/Prelude.html#v:mapM)

在 Scala 中，没有这样的库函数（如果有，请纠正我）。但是可以创建一个。举一个完整的例子：

```
import scalaz._;

object StateExample
  extends App
  with States /* utility methods */
{
  // The context that is threaded through the state.
  // In our case, it just maps variables to integer values.
  class Context(val map: Map[String,Int]);

  // An example that returns the requested variable's value
  // and increases it's value in the context.
  def eval(expression: String): State[Context,Int] =
    state((ctx: Context) => {
      val v = ctx.map.get(expression).getOrElse(0);
      (new Context(ctx.map + ((expression, v + 1)) ), v);
    });

  // Specialization of Haskell's mapM to our State monad.
  def mapState[S,A,B](f: A => State[S,B])(xs: Seq[A]): State[S,Seq[B]] =
    state((initState: S) => {
      var s = initState;
      // process the sequence, threading the state
      // through the computation
      val ys = for(x <- xs) yield { val r = f(x)(s); s = r._1; r._2 };
      // return the final state and the output result
      (s, ys);
    });

  // Example: Try to evaluate some variables, starting from an empty context.
  val expressions = Seq("x", "y", "y", "x", "z", "x");

  print( mapState(eval)(expressions) ! new Context(Map[String,Int]()) );
} 
```

通过这种方式，您可以创建简单的函数，这些函数接受一些参数并返回`State`，然后使用`State.map`or `State.flatMap`（或者更好地使用`for`推导式）将它们组合成更复杂的函数，然后您可以在表达式列表上运行整个计算`mapM`。

* * *

另见[http://blog.tmorris.net/posts/the-state-monad-for-scala-users/](http://blog.tmorris.net/posts/the-state-monad-for-scala-users/)

* * *

**编辑：**请参阅[Travis Brown](https://stackoverflow.com/a/12265946/1333025)的回答，他描述了如何更好地在 Scala 中使用 state monad。

他还问：

> 但是，当有一个标准组合器可以完全满足您在这种情况下的需要时，为什么？（我问这个问题是因为当 mapAccumL 会使用 state monad 而被打脸的人。）

这是因为最初的问题是：

> 这不是折叠，因为结果像地图一样出来。这不是地图，因为横穿了国家道具。

我相信正确的答案是**它是使用状态单子的单子地图。**

使用`mapAccumL`肯定更快，内存和 CPU 开销都更少。但是状态单子抓住了正在发生的事情的概念，*即问题的本质。*我相信在许多（如果不是大多数）情况下，这更重要。一旦我们意识到问题的本质，我们可以使用高级概念来很好地描述解决方案（可能会牺牲一点速度/内存）或优化它以使其更快（或者甚至设法做到两者）。

另一方面，`mapAccumL`解决了这个特定的问题，但没有给我们更广泛的答案。如果我们需要稍微修改它，它可能会发生它不再工作了。或者，如果库开始变得复杂，代码可能会开始变得凌乱，我们不知道如何改进它，如何让最初的想法再次清晰。

例如，在评估有状态表达式的情况下，库可能变得复杂而复杂。但是如果我们使用 state monad，我们可以围绕小函数构建库，每个函数接受一些参数并返回类似`State[Context,Result]`. 这些原子计算可以使用`flatMap`方法或`for`理解组合成更复杂的计算，最后我们将构建所​​需的任务。整个库的原则将保持不变，最终任务也将是返回的东西`State[Context,Result]`。

总结一下：我并不是说使用 state monad 是最好的解决方案，当然它也不是最快的解决方案。我只是相信它对函数式程序员来说是最具教育意义的——它以一种干净、抽象的方式描述了问题。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-04T10:41:15.313

您可以递归地执行此操作：

```
def testTheRecWay(xs: Seq[String]) = {
  def innerTestTheRecWay(xs: Seq[String], priorState: State = initialState, result: Vector[ResType] = Vector()): Seq[ResType] = {
    xs match {
      case Nil => result
      case x :: tail =>
        val (res, newState) = computeResultAndNewState(x, priorState)
        innerTestTheRecWay(tail, newState, result :+ res)
    }
  }
  innerTestTheRecWay(xs)
} 
```

递归是函数式编程中的一种常见做法，并且在大多数情况下比循环更容易阅读、编写和理解。事实上 scala 除了 . 之外没有任何循环`while`。`fold`, `map`, `flatMap`, `for`（这只是 flatMap/map 的糖）等都是递归的。

这种方法是尾递归的，会被编译器优化为不建栈，所以使用起来绝对安全。您可以添加 @annotation.tailrec 注释，以强制编译器应用尾递归消除。如果您的方法不是 tailrec，编译器会抱怨。

编辑：重命名内部方法以避免歧义

# php - 解析错误：语法错误，意外的 '}' 但找不到另一个

> ID：12261161
> 
> 赞同：-3
> 
> 时间：2012-09-04T10:05:56.707
> 
> 标签：php, syntax-error, parse-error

好的，所以我创建了一个包含一个字段但有多个提交按钮的表单。表格正确，没有问题。编写 php 代码以根据按下的按钮执行操作时遇到问题。不断收到解析和语法错误。我尝试了使用 if/else 语句和 isset 的不同变体。仍然没有运气。而且我没有看到任何我知道的额外 }。

```
 <?php
if($_REQUEST['Gift'] == "Dish1")
{
  header("Location: url1".urlencode($_POST['uid']))
}

else if($_REQUEST['Gift'] == "Dish2")
{
  header("Location: url2".urlencode($_POST['uid']))
}

else if($_REQUEST['Gift'] == "Dish3")
{
  header("Location: url3".urlencode($_POST['uid']))

} 
```

.....等等？>

它说错误是在线 5.... 不确定他们如何解析他们的行，因为实际的 url 地址本身很长并且不包含 }

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-04T10:06:34.267

`;`您在标题语句的末尾缺少 a 。

`}`不是预期的，因为首先需要 a （`;`或那里允许的其他东西）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-04T10:11:25.563

你没有分号。PHP 中的每个语句都必须有 ';' 在末尾。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-04T10:06:35.843

您需要`;`在声明后弹出：

```
header("Location: url1".urlencode($_POST['uid'])); 
```

# php - php将字符串分解为字符

> ID：12261162
> 
> 赞同：6
> 
> 时间：2012-09-04T10:06:05.797
> 
> 标签：php, string

在 PHP 中是否有任何函数可以将字符串分解为字符或数组。

```
Example: OVERFLOW 
```

我需要将上述文本 OVERFLOW int 分解为：`O V E R F L O W`

或者

```
 array( 
   0=> 'O',
    1=> 'V',
    2=> 'E',
    3=> 'R',
    4=> 'F',
    5=> 'L',
    6=> 'O',
    7=> 'W'
) 
```

还是有其他方式..？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-04T10:07:42.223

有一个功能：[`str_split`](http://php.net/str_split)

```
$broken = str_split("OVERFLOW", 1); 
```

如果您的字符串可以包含多字节字符，请[`preg_split`](http://php.net/preg_split)改用：

```
$broken = preg_split('##u', 'OVERFLOW', -1, PREG_SPLIT_NO_EMPTY); 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-09-04T10:08:18.323

使用这个函数 --- str_split();

这会将字符串拆分为字符数组。

例子：

```
$word="overflow";
$split_word=str_split($word); 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-09-04T10:09:02.360

试试这样......

```
$var = "OVERFLOW";
echo $var[0]; // Will print "O".
echo $var[1]; // Will print "V". 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-04T10:09:07.883

使用[str_split](http://php.net/manual/en/function.str-split.php)

```
$str = "OVERFLOW" ;
$var = str_split($str, 1);
var_dump($var); 
```

输出

```
array
  0 => string 'O' (length=1)
  1 => string 'V' (length=1)
  2 => string 'E' (length=1)
  3 => string 'R' (length=1)
  4 => string 'F' (length=1)
  5 => string 'L' (length=1)
  6 => string 'O' (length=1)
  7 => string 'W' (length=1) 
```

例子

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-09-04T10:09:23.503

你可以这样做：

```
$string = "your string";
$charArray = str_split($string); 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-09-04T10:11:46.140

看看[**str_split**](http://php.net/manual/en/function.str-split.php)

你可以像这样使用它：

```
array str_split ( string $string [, int $split_length = 1 ] ); 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-09-04T10:09:12.893

说实话，已经分手了。所以这会起作用：

```
$string = 'Hello I am the string.';
echo $string[0]; // 'H' 
```

如果你特别想拆分它，你可以这样做：

```
$string = 'Hello I am the string.';
$stringarr = str_split($string); 
```

取决于你是否真的需要拆分它。

# c# - 在客户显示器上显示文本

> ID：12261168
> 
> 赞同：2
> 
> 时间：2012-09-04T10:06:24.937
> 
> 标签：c#, point-of-sale

我们一直在使用 PioneerPOS 的 S-Line 为我们的客户编写一个 POS 应用程序。我们在使用客户显示器时遇到了一些问题。

1- 我们能够将文本发送到客户显示器，但此文本显示在随机位置。我们希望在特定的列和行索引处显示文本。

2- 当我们清除屏幕时，客户显示屏始终显示“！#2”。

3-当我们显示我们的文本时，它会附加到 '!#1' 。例如，发送“Hello”会显示为“!#1Hello”。

值得一提的是，我们正在开发一个 .net 应用程序（C#）并使用 POS.net 来访问设备。

万一这有帮助，这是我执行此操作的代码。

```
 private void Display(bool blink)
    {
        LineDisplay lineDisplay;
        PosExplorer explorer;
        try
        {

            explorer = new PosExplorer(this);
            DeviceCollection devColl = explorer.GetDevices(DeviceType.LineDisplay);
            if (devColl == null || devColl.Count <= 0)
            {
                MessageBox.Show("Device not found");
                return;
            }

            lineDisplay = (LineDisplay)explorer.CreateInstance(devColl[0]);
            lineDisplay.Open();

            lineDisplay.Claim(1000);

            lineDisplay.DeviceEnabled = true;

            if (blink)
                lineDisplay.DisplayText("Hello World..!", DisplayTextMode.Blink);
            else
                lineDisplay.DisplayText("Hello World.!", DisplayTextMode.Normal);

            lineDisplay.Release();
            lineDisplay.Close();

        }
        catch (Exception e)
        {
            MessageBox.Show(e.Message);
        }
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2016-01-02T15:23:55.293

要在特定坐标处显示，请尝试：

```
Linedisplay.displaytextat(RowNum, ColPos, "Text To Display"); 
```

记住行和列都从 0 开始。

# c# - 编译错误 Nullreference

> ID：12261176
> 
> 赞同：-1
> 
> 时间：2012-09-04T10:06:54.150
> 
> 标签：c#, compilation

我正在编译一个最初在 Visual C# 2005 中构建的程序。我正在使用 Visual C# 2010。在以下函数上运行程序时，我不断收到“NullReference Execption was unhandled”错误： 错误发生在与数据缓冲区。DataBuffer 是一个私有字符串，在初始化时设置为 null。

```
if (DataBuffer.Contains(ok)) 
            {
                okFound = true;
            } 
```

和

```
 string temp = getLine(DataBuffer.Substring(mylocation));
    if (!checkTypeFound())
    {
        if (temp != null)
        {
            parseDeviceType(temp);
        }
        checkTypeFound();
    } 
```

当我检查上面代码中 DataBuffer 的值时（当我收到错误时），这不为空。它实际上包含我期望的数据。DataBuffer 信息在此函数中加载：

```
private void ser1_DataReceived(object sender, SerialDataReceivedEventArgs e)
{
    while (ser1.BytesToRead > 0)
    {
        string data = ser1.ReadExisting();
        DataBuffer += data;
    }
} 
```

串行端口在代码中的其他位置打开。代码没有变化，只是编译器不同。我应该添加哪一行，以及在哪里解决这个错误？请注意，我可以使用 if 和 try-catch 语句来防止发生此错误。但这不是我要找的，我需要这段代码才能工作。除了编译器之外，该应用程序没有以任何方式进行更改。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-04T10:10:16.070

你应该在调用它的方法之前检查是否`DataBuffer`是。`null`

```
if (DataBuffer != null && DataBuffer.Contains(ok)) 
{
    okFound = true;
}

// or simpler:
okFound = (DataBuffer != null && DataBuffer.Contains(ok)); 
```

并且您的第二个代码被剪断也应该检查`null`。

```
string temp = String.Empty;

if (DataBuffer != null)
    temp = getLine(DataBuffer.Substring(mylocation));

if (!checkTypeFound())
{
    if (!String.IsNullOrEmpty(temp))
        parseDeviceType(temp);

    checkTypeFound();
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-04T10:14:46.553

尝试使用以下内容：

```
if (DataBuffer != null && DataBuffer.Contains(ok)) 
{
   okFound = true;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-04T10:09:14.493

您应该`DataBuffer`在构造函数中将值设置为 null 以外的值。如果你不能这样做，那么你可以将它设置为`string.Empty`而不是 null 以避免 null 异常。但在对对象启动实例方法之前**检查 null总是更好。**

# r - 将向量随机分成两组

> ID：12261179
> 
> 赞同：6
> 
> 时间：2012-09-04T10:06:59.047
> 
> 标签：r, random, sample, random-sample

我有一个长度为 100 的向量 t 并希望将其分成 30 和 70 个值，但这些值应该随机选择且无需替换。因此，30 个值中的任何一个都不允许在 70 个值的子向量中，反之亦然。

我知道 R 函数`sample`，我可以使用它从向量中随机选择值，无论是否替换。但是，即使我使用 replace = FALSE，我也必须运行该`sample`函数两次，一次选择 30，一次选择 70 个值。这意味着 30 个值中的一些值可能在 70 个值中，反之亦然。

有任何想法吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-09-04T10:20:24.683

这个怎么样：

```
t <- 1:100 # or whatever your original set is
a <- sample(t, 70)
b <- setdiff(t, a) 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-09-04T10:51:14.680

关于我的评论，有什么问题：

```
vec <- 1:100
set.seed(2)
samp <- sample(length(vec), 30)

a <- vec[samp]
b <- vec[-samp] 
```

?

为了显示这些是没有重复的单独集合：

```
R> intersect(a, b)
integer(0) 
```

如果您的向量中有重复的值，那是另一回事，但您的问题尚不清楚。

重复的`vec`事情有点复杂，这取决于你想要达到的结果。

```
R> set.seed(4)
R> vec <- sample(100, 100, replace = TRUE)
R> set.seed(6)
R> samp <- sample(100, 30)
R> a <- vec[samp]
R> b <- vec[-samp]
R> length(a)
[1] 30
R> length(b)
[1] 70
R> length(setdiff(vec, a))
[1] 41 
```

所以`setdiff()`这里的“失败”因为它没有得到正确的长度，但是然后`a`包含`b`重复的值（但不是观察！来自样本）：

```
R> intersect(a, b)
 [1] 57 35 91 27 71 63  8 92 49 77 
```

重复（交集）的出现是因为上述值在原始样本中出现了两次`vec`

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-09-04T10:20:35.057

这样的事情呢？

```
x <- 1:100
s70 <- sample(x, 70, replace=FALSE)
s30 <-sample(setdiff(x, s70), 30, replace=FALSE) 
```

`s30`将具有与 相同的数字`setdiff(x, s70)`，它们之间的区别是： `s30`长度为 30 的无序向量，`setdiff(x, s70)`并将为您提供长度为 30 的（升序）有序向量。您说您想要长度为 70 和 30 的随机子样本，因此`s30`比仅`setdiff(x, s70)`. 如果顺序并不重要，那么更好的选择是`setdiff`不使用`sample`@seancarmody 的答案。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-04T10:26:12.213

正如你提到的“分裂”，你也可以尝试这样的事情：

```
set.seed(1)
t <- sample(20:40, 100, replace=TRUE)
groups <- rep("A", 100)
groups[sample(100, 30)] <- "B"
table(groups)
# groups
#  A  B 
# 70 30
split(t, groups)
# $A
#  [1] 25 32 39 24 38 39 33 21 24 23 36 40 27 36 24 33 22 25 28 28 38 27 30 30 23
# [26] 34 35 37 33 31 36 20 30 35 34 30 29 25 22 26 33 28 26 29 26 33 30 36 21 38
# [51] 27 37 27 27 30 38 38 36 29 34 28 26 35 25 23 25 21 33 36 28
# 
# $B
#  [1] 27 33 34 28 30 35 39 20 32 37 36 22 28 36 31 38 21 30 39 25 28 40 24 34 22
# [26] 38 36 29 37 32 
```

# javascript - 使用 AJAX/JSON 验证 Twitter 帐户是否存在

> ID：12261184
> 
> 赞同：2
> 
> 时间：2012-09-04T10:07:19.697
> 
> 标签：javascript, jquery, ajax, twitter

我正在尝试构建一个简单的检查，该检查将接受一个字符串并检查该字符串是否存在 twitter 帐户。

我已经成功地获得了积极的结果，但我似乎无法获得消极的结果。`$.ajax()`有一个错误元素，但它没有触发。

[工作示例](http://jsfiddle.net/bVds7/)

代码：

```
var testTwit = function(username){
    $.ajax({
      url: 'http://twitter.com/statuses/user_timeline.json?screen_name='+username+'&count=1&callback=?',
      dataType: 'json',
      success: function(){
          alert("username is valid");
      }, 
     error: function(){
         alert("username is valid");
     }
   })
 } 
```

​</p>

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-04T10:13:55.997

您正在使用 JSONP 传输。在这种传输中，所请求的 URL 只是作为`<script>`标记添加到文档中。如果 URL 返回非 200 状态代码，浏览器将不会执行它：这就是您看不到否定响应的原因。

一种解决方案是使用`suppress_response_codes`参数，以便 API 始终返回 200 状态码。

查看[每个 Twitter 开发人员应该知道的事情](https://dev.twitter.com/docs/things-every-developer-should-know)：

> *   `suppress_response_codes`：如果存在此参数，则所有响应都将返回 200 OK 状态码 - 甚至是错误。此参数的存在是为了适应在拦截所有非 200 响应的浏览器中运行的 Flash 和 JavaScript 应用程序。如果使用，那么客户端的工作就是通过解析响应正文来确定错误状态。请谨慎使用，因为这些错误消息可能会发生变化。

顺便说一句，Twitter 正在禁止未经身份验证的 API 访问，因此 JSONP 访问也可能被禁止。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-04T10:13:29.897

通常 API 总是在收到请求时返回响应。这就是为什么没有给出错误。您应该解析来自 API 的响应以查明用户是否存在。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-04T10:14:35.913

使用 JSONP 请求时不会触发错误。[在jQuery 论坛](http://forum.jquery.com/topic/jquery-ajax-with-datatype-jsonp-will-not-use-error-callback-if-request-fails)上阅读更多内容。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-04T12:31:34.753

只是**[arnaud576875](https://stackoverflow.com/a/12261305/266561)**答案的总结：

1.  添加`suppress_response_codes=1`参数
2.  检查`ID`退货

所以，结果将是这样的：

```
var testTwit = function(username){
    $.ajax({
       url: 'http://twitter.com/statuses/user_timeline.json?suppress_response_codes=1&screen_name='+username+'&count=1&callback=?',
       dataType: 'json',
       success: function(d){
         if (d && d.id)    
            $('span').html('username is valid!');
         else
            $('span').html('username is not valid.');
       }
    });
} 
```

# java - 使用 guice 注入对象

> ID：12261186
> 
> 赞同：2
> 
> 时间：2012-09-04T10:07:26.630
> 
> 标签：java, guice

我不确定我是否完全理解依赖注入背后的想法，尤其是使用 Guice。

我有相当大的摇摆应用程序，我想介绍一下 guice 来解耦这个应用程序。假设我在主课上有注射器

```
Guice.createInjector(new BindingModule());
Application app = injector.getInstance(Application.class);
app.run(); 
```

它有效。如果我有一些字段，比如说 JPanel，在 Application 类中，用 @Inject 注释然后它被注入。但是，如果我在 Application 构造函数中手动创建一些东西，而不是示例中的 JTree 将不会被注入（假设一切都配置正确）。

```
class Application {

          @Inject JPanel mainPanel //this will be injected

          JPanel otherPanel;

          public Application() {
              otherPanel = new MyNewPanel();

              mainPanel.add(otherPanel);
          }

}  

class MyNewPanel extends JPanel { 

          @Inject JTree tree;  //this will not be injected

          public MyNewPanel() {

               add(tree);
          }

} 
```

我的问题是，我是否需要让所有注入的对象控制要注入的 guice。我无法打破控制，就像我对`otherPanel`.

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-04T13:29:25.777

在依赖注入范式中，**所有注入的对象都必须在*注入容器***的控制之下，这是容器实际上可以将对象实例**注入注入点**（`@Inject`注解）的唯一方法。

当您使用`new`运算符实例化对象实例时，**该对象实例不受注入容器的控制**（它是由您创建的，而不是容器创建的）。因此，即使您在该新对象实例中有注入点，容器也不知道它们，因此它不能将任何注入候选注入该对象实例的注入点（因为，正如我已经说过的，它是不受其控制）。

所以，回答几句：是的，如果你想让它们被自动注入**，你需要让所有对象都在容器（Guice）的控制之下。**任何你可能想出的让注入按照你在问题中的意思工作的技巧都会违反[Inversion of Control](http://www.codeproject.com/Articles/29271/Design-pattern-Inversion-of-control-and-Dependency)的规则。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-04T13:20:13.787

如果您想或必须使用新的，您可以使用提供者[guice 提供者](http://code.google.com/p/google-guice/wiki/ProviderBindings)或按需注入[guice injections](http://code.google.com/p/google-guice/wiki/Injections)。`注射器注射器 = Guice.createInjector(...);

```
MyNewPanel myNewPanel = new MyNewPanel();
injector.injectMembers(myNewPanel);` 
```

您可以稍微重写上面的代码以使用标准注入。

```
class Application {

      final JPanel mainPanel;

      final JPanel otherPanel;

      @Inject
      public Application( @Named("main") JPanel mainPanel, @Named("other") JPanel otherPanel) {
          this.otherPanel = otherPanel;
          this.mainPanel = mainPanel;
          mainPanel.add(otherPanel);             
      }

}  

class MyNewPanel extends JPanel { 

      @Inject JTree tree;  

      public MyNewPanel() {

           add(tree);
      }

} 
```

由于您注入了两个不同的面板，因此您可以通过命名来区分它们，即用 annotatedWith 绑定它们

```
binder.bind( JPanel.class ).annotatedWith( Names.named( "other" ).to( MyNewPanel.class ); 
```

或者您在 Application 构造函数中使用 MyNewPanel。但这有点不那么解耦。

# css - CSS - Facebook 插件在移动设备上显示时溢出

> ID：12261188
> 
> 赞同：0
> 
> 时间：2012-09-04T10:07:31.460
> 
> 标签：css, facebook, iframe, overflow

我刚开始从事网页设计/CSS，所以我目前的知识是有限的。考虑到这一点（这对于专业人士来说可能很容易解决），有谁知道为什么这个网站上的 Facebook iframe 不会留在移动设备的侧边栏中？

[http://www.northeastimage.co.uk](http://www.northeastimage.co.uk)

它在桌面浏览器上看起来很棒，但在 iPhone 上，它位于边栏之外，位于屏幕最右侧的边缘。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-01T14:11:46.440

我会找一个用户代理来查看你的 css 和 html，它的跨浏览器外观还支持手机和平板电脑，它可以让你“告诉”浏览器你的手机在桌面上很坚固

使用时易于调试，我更喜欢 chrome 的用户代理在**[此处获取](https://chrome.google.com/webstore/detail/djflhoibgkdhkhhcedjiklpkjnoahfmg?hl=da)**

从比程序中嵌入的标准数量更多的视口获取要查看的字符串

# visual-studio-2005 - 在 VS2005 中查看 BizTalk 编排代码

> ID：12261189
> 
> 赞同：1
> 
> 时间：2012-09-04T10:07:34.903
> 
> 标签：visual-studio-2005, biztalk, biztalk2006r2

默认情况下，我的 BizTalk (2006) 业务流程在设计视图中打开。我需要查看后面的文件（看起来像 XML）。我不知道如何切换。

使用 winforms 等，F7 是“转到代码”快捷方式，但我找不到任何等价物。

有时唯一可行的方法是搜索出现在编排和 BizTalk 代码中的字符串。我已经在搜索文件中搜索了我的字符串（在 find 下），Find Results 框向我显示了字符串存在于 MyFile.odx 中（并显示 ）。但是，我无法在屏幕上看到实际代码，因为它只显示设计视图。

所以，为了确保这真的很清楚，我想在两个屏幕截图之间切换：

从设计视图：

![在此处输入图像描述](../Images/ed5aa724c563bb207f66373c64045532.png)

到“代码背后”视图：

![在此处输入图像描述](../Images/613fd657beb7301f40f1414b33817624.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-06T09:49:35.890

作为一种解决方法，我可以从记事本中的 Windows 资源管理器中打开它。不理想，但至少我不再被困住了。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-05T08:39:55.237

右键单击 -> 打开方式.. -> XML 编辑器

![在此处输入图像描述](../Images/b41ca245f2fb273b9032bc5e0985cc9a.png)

# gwt - 是否可以合并谷歌应用程序脚本的“类网格”中的单元格？

> ID：12261195
> 
> 赞同：0
> 
> 时间：2012-09-04T10:07:55.327
> 
> 标签：gwt, google-apps-script

我试图使用网格来组织元素，有些需要更多的行跨度或列跨度。我怎样才能做到这一点？我的谷歌应用脚​​本独立应用 > [https://script.google.com/macros/s/AKfycbwvCnn7WfTWsU2sz-8ONEM_gLM_y5pZd31s6lb68bjyx1bETOyy/exec](https://script.google.com/macros/s/AKfycbwvCnn7WfTWsU2sz-8ONeM_gLM_y5pZd31s6lb68bjyx1bETOyy/exec)

代码但尚未更新到应用程序： [https ://script.google.com/d/1H6DLb8L6Qd3g55Dzn_A7ed61QvM_OcrLINDfya1i1h7JAyV_jLH7nmcq/edit](https://script.google.com/d/1H6DLb8L6Qd3g55Dzn_A7ed61QvM_OcrLINDfya1i1h7JAyV_jLH7nmcq/edit)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-09-19T12:23:09.447

我发现了一个非常笨拙的解决方法，因为`colspan`GAS 缺乏......

1.  使用您想要的列/行创建一个表（`FlexTable`,`Grid`等）
2.  当你到达你想使用的区域时`colspan`，`rowspan`创建一个新表格（具有不同的单元格宽度和高度
3.  每次要更改单元格宽度或高度时，请继续创建一个新表格
4.  创建一个`VerticalPanel`并按顺序添加您在步骤 1-3 中创建的每个表

您现在拥有一个带有和特征的表格的*外观。*`colspan``rowspan`

不是很优雅，但这是我能想出的唯一解决方案。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-04T11:09:06.990

您可以使用专门用于此目的的[FlexTable 小部件](https://developers.google.com/apps-script/class_flextable)

# iphone - 如何将 UTC 纪元 1352716800 解析为 NSDate？

> ID：12261196
> 
> 赞同：0
> 
> 时间：2012-09-04T10:07:56.120
> 
> 标签：iphone, ios, nsdate, nsdateformatter, utc

我正在从一个 XML 文件中读取数据，该文件的 UTC 日期看起来像“2011-05-04T00:00:00”，UTC 纪元看起来像 1352716800。

将 UTC 纪元解析为 NSDate 可能比使用复杂的日期格式更安全。我如何将 UTC 纪元解析为 NSDate？使用 NSDateFormatter 和“UTC Epoch”的特殊格式？

我认为它是`[[NSDate alloc] initWithTimeIntervalSince1970:epoch]`并且测试似乎有效。但我不确定这是否只是偶然正确，或者“UTC 时代”是否是“自 1970 年以来”。Apple Docs 没有提到 UTC 纪元。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-04T10:21:59.220

是的，你是对的，它是 UTC 纪元。如果“纪元时间是 UTC”作为参考，请查看[此](http://en.wikipedia.org/wiki/Unix_time)

```
NSString *epochTime = @"1352716800";

// (Step 1) Convert epoch time to SECONDS since 1970
NSTimeInterval seconds = [epochTime doubleValue];
NSLog (@"Epoch time %@ equates to %qi seconds since 1970", epochTime, (long long) seconds);

// (Step 2) Create NSDate object
NSDate *epochNSDate = [[NSDate alloc] initWithTimeIntervalSince1970:seconds];
NSLog (@"Epoch time %@ equates to UTC %@", epochTime, epochNSDate); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-04T10:20:56.190

您实际上并不需要*解析*UTC 纪元日期。相反，您可以或多或少地直接`NSDate`从中创建一个实例：

```
long utcEpoch = 1352716800;
NSDate* date = [Date dateWithTimeIntervalSince1970: utcEpoch]; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-05-17T11:44:55.383

在从 Firebase ( `kFirebaseServerValueTimestamp`) 检索到的时间戳的情况下，纪元以毫秒为单位表示：

> Firebase 服务器自动填充当前时间戳（自 Unix 纪元以来的时间，以毫秒为单位）的占位符值。

`initWithTimeIntervalSince1970`在这种情况下，如果您在 iOS 中使用，则需要除以 1000 。

# ios - 在 phonegap > 1.5 中替换 DeviceInfo

> ID：12261199
> 
> 赞同：1
> 
> 时间：2012-09-04T10:08:15.507
> 
> 标签：ios, cordova

从 Cordova 1.5 开始，他们似乎已经弃用了 Phonegap 变量 DeviceInfo（我想我看到它在技术上也被 1.5 弃用了，但还是保留了它）。我知道有设备变量，但我使用 DeviceInfo 变量通过回调来存储我自己的一些数据

```
- (NSDictionary*)deviceProperties{...} 
```

似乎仍然为 var 设备数据调用该函数，但它不允许我向该变量添加任何数据。有谁知道是否有办法恢复拥有自定义设备数据的功能，还是永远消失了？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-09T16:33:29.213

好的，所以我想出的解决方法是自己在 javascript 调用中简单地创建变量，以便其余的 javascript 代码仍然可以根据需要访问它。我设置了一个类别来覆盖

```
- (void)viewDidAppear:(BOOL)animated; 
```

在实现中我调用了以下代码

```
NSString* jsString = [NSString stringWithFormat:@"window.DeviceInfo = {param1:%@, param2:%@}}", param1, param2];
[self.viewController.webView stringByEvaluatingJavaScriptFromString:jsString]; 
```

添加的代码允许与基于已删除的可编辑 DeviceInfo 变量的代码向后兼容。

# xml - DTD 语法 - 允许子元素或 pcdata

> ID：12261206
> 
> 赞同：2
> 
> 时间：2012-09-04T10:08:28.743
> 
> 标签：xml, dtd, pcdata

我的 .xml 结构可能包含以下数据：

```
<entry id="one-string">
            <class>nmWinMultiReports_main</class>
            <classParams>string</classParams>
         </entry>
<entry id="multiple-elements">
            <class>nmJavaScript_main</class>
            <classParams>
               <pluginid>monitorPlugin</pluginid>
               <bla>string</bla>
               <tag>abc</tag>
            </classParams>
         </entry> 
```

如何定义 .dtd 文件以允许`classParams`1\. 是字符串或 2\. 多个子元素（每个一次）？

我试过了：

> ```
> <!ELEMENT class ( #PCDATA ) >
> <!ELEMENT classParams ( #PCDATA | pluginid | bla | tag ) >
>          <!ELEMENT pluginid ( #PCDATA ) >
>          <!ELEMENT bla ( #PCDATA ) >
>          <!ELEMENT tag ( #PCDATA ) > 
> ```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-09T18:29:43.247

DTD 不能强制执行您描述的约束；获得类似约束的最简单方法是添加一个新元素（调用它`string`）并将 classParams 声明为将其中一个`string`或等序列`pluginid`作为子元素：

```
<!ELEMENT string (#PCDATA) >
<!ELEMENT classParams (string 
                      | (pluginid, bla, tag))
> 
```

或者，如果

```
<classParams><string>foo</string></classParams> 
```

似乎太重了，您可以声明`entry`为采取`classParams`或`classParamString`作为内容：

```
<!ELEMENT entry (class, (classParams | classParamString)) >
<!ELEMENT classParamString (#PCDATA) >
<!ELEMENT classParams (pluginid, bla, tag) > 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-04T12:11:25.767

我做到了：

```
<!ELEMENT classParams ( #PCDATA | pluginid | bla | tag )* > 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-05-01T12:30:40.493

您也可以通过这种方式实现它：

```
<!ELEMENT classParams ANY> 
```

# iphone - 整合脸书和推特

> ID：12261207
> 
> 赞同：0
> 
> 时间：2012-09-04T10:08:42.103
> 
> 标签：iphone, xcode, facebook, ipad, twitter

如何将 facebook 共享和 twitter 共享集成到 iphone，例如在墙上发布一些文本或图像？我尝试使用以下代码在 twitter 上[输入链接描述](http://www.icodeblog.com/2009/07/09/integrating-twitter-into-your-applications/)

但它不工作？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-06T12:26:25.627

如果您的应用仅针对 iOS 5 及更高版本的设备，您可以使用内置的“Twitter.framework”。更多文档可在 Apple 网站上的此链接上找到

[http://developer.apple.com/library/ios/#documentation/Twitter/Reference/TwitterFrameworkReference/_index.html](http://developer.apple.com/library/ios/#documentation/Twitter/Reference/TwitterFrameworkReference/_index.html)

对于 Facebook，阅读[https://developers.facebook.com/ios/](https://developers.facebook.com/ios/)上的文档是一个很好的开始；下载 SDK 并查看示例应用程序。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-04T10:11:54.937

对于 twitter，使用[ShareKit](http://getsharekit.com/)并集成到您的应用程序中。

根据[此](http://jayrparro.posterous.com/incorrect-signature-sharekittwitter-error)链接更改 Sharekit

[在https://dev.twitter.com//](https://dev.twitter.com//)注册 Twitter API 以获取客户端 ID 和密钥

**现在在SHKConfig.h**中将 SHKTwitterConsumerKey 和 SHKTwitterSecret 分别更改为客户端 ID 和密钥

 **对于 Facebook，使用[FBGraph API](http://github.com/reallylongaddress/iPhone-Facebook-Graph-API)链接获取示例代码

更新：请检查[https://github.com/reallylongaddress/iPhone-Facebook-Graph-API/issues/4](https://github.com/reallylongaddress/iPhone-Facebook-Graph-API/issues/4)如果您在使用代码时发现发布到 FB 崩溃**

# c++ - VC 构建后事件命令

> ID：12261210
> 
> 赞同：0
> 
> 时间：2012-09-04T10:08:47.970
> 
> 标签：c++, visual-studio-2010

现在我正在使用 VC 10 构建一个 .dll 项目。根据是否包含某些库，输出的 .dll 及其对应的 lib 文件名应该不同。例如，如果项目使用 Mirosoft 提供的原生 STL 库，则 .dll 名称为 *_native_stl.dll；如果项目使用 STLport，则输出 .dll 名称为 *_stlport.dll。当然我可以手动完成，但我现在正在考虑让 VC 10 自动为我完成。我的计划是，如果我使用某个库，我会在**预处理器定义**（位于 C/C++ 预处理器中）部分定义一个变量来表示它。之后，我在**Post-Build Event**（位于 Build Events 中）部分定义了一个 .bat 文件：`call "$(ProjectDir)\script.bat"`. 在 script.bat 文件中，我将根据**Preprocessor Definitions**部分`$(OutDir)$(TargetName)$(TargetExt)`中的变量定义更改默认的 .dll 输出名称。我的主要问题是，对于批处理文件，我如何检查某个变量是否已定义。谢谢！也欢迎任何有关更改输出文件名的建议。

 *** * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-04T11:08:45.280

```
My main problem is that for in batch file how I can check a certain variable is defined or not. Thanks! 
```

你可以用这样的语句来检查：

```
if "%MYVAR%" == "" set undefined=1 
```

*仅当未定义 MYVAR*时，变量*undefined*才会设置为 1 。**

# html - HTML Embed 对象具有灰色背景。可以透明吗？

> ID：12261216
> 
> 赞同：3
> 
> 时间：2012-09-04T10:09:04.517
> 
> 标签：html, css, firefox, embed, browser-plugin

我正在使用带有开源插件的 Firefox 来播放视频。视频被“尽可能好”地缩放以适应嵌入对象的宽度和高度中定义的可用空间。但有时右侧和/或底部会有一点灰色边框。

看来这不是我父 div 的 bgcolor，因为更改它根本没有效果。

这是 HTML：

```
<div id="videoHolder" style="position: absolute; left: 50px; top: 50px; width: 300px; height: 150px;">
 <embed id="player" width="300" height="150" border="0" type="application/x-gbp" x-gbp-uri="">
</div> 
```

任何人都知道将嵌入定义为透明的方法吗？像 Flash 一样设置 wmode=transparent 没有效果...

谢谢，弗兰克

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-31T13:24:23.993

没有一般的方法可以告诉插件元素在浏览器端是透明的，插件需要在其本机代码中支持自己。

对于 Flash 设置的`wmode="transparent"`作品，但只是因为 Flash 实现了它自己。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-07T13:22:50.323

尝试添加“wmode”属性并将其值设置为“透明”：

```
<div id="videoHolder" style="position: absolute; left: 50px; top: 50px; width: 300px; height: 150px;">
    <embed WMODE="transparent" id="player" width="300" height="150" border="0" type="application/x-gbp" x-gbp-uri="">
</div> 
```

# java - JBoss AS 7.1.1.Final：java.lang.ClassNotFoundException：javax.xml.bind.annotation.adapters.HexBinaryAdapter

> ID：12261221
> 
> 赞同：1
> 
> 时间：2012-09-04T10:09:18.787
> 
> 标签：java, jboss7.x

我正在迁移到 JBoss AS 7.1.1.Final，但我遇到了一个问题。一切都适用于 7.1.0.CR1b 但现在我在 OSGi 组件中有此错误：

> 14:17:51,888 错误 [stderr] (http--127.0.0.1-8080-1) 原因：java.lang.ClassNotFoundException: javax.xml.bind.annotation.adapters.HexBinaryAdapter from [Modu le "deployment.mymodule"来自服务模块加载器] 14:17:51,890 错误 [stderr] (http--127.0.0.1-8080-1) at org.jboss.modules.ModuleClassLoader.findClass(ModuleClassLoader.java:190) 14:17:51,892 错误 [ stderr] (http--127.0.0.1-8080-1) at org.jboss.modules.ConcurrentClassLoader.performLoadClassUnchecked(ConcurrentClassLoader.java:468) 14:17:51,893 错误 [stderr] (http--127.0.0.1-8080- 1) 在 org.jboss.modules.ConcurrentClassLoader.performLoadClassChecked(ConcurrentClassLoader.java:456) 14:17:51,895 错误 [stderr] (http--127.0.0.1-8080-1) at org.jboss.modules.ConcurrentClassLoader.performLoadClassChecked (ConcurrentClassLoader.java:423) 14:17:51,896 错误 [stderr] (http--127.0.0.1-8080-1) 在 org.jboss.modules.ConcurrentClassLoader.performLoadClass(ConcurrentClassLoader.java:398) 14:17:51,897 错误 [stderr] (http--127.0.0.1 -8080-1) at org.jboss.modules.ConcurrentClassLoader.loadClass(ConcurrentClassLoader.java:120) 14:17:51,899 错误 [stderr] (http--127.0.0.1-8080-1) ... 213 更多

在 Felix Web 控制台中，一切似乎都很好：

```
mymodule :
Imported Packages
[...]
  javax.xml.bind.annotation.adapters,version=0.0.0 from system.bundle(0) 
[...] 
```

和

```
0 - system.bundle
Exported Packages
  [...]
  javax.xml.bind.annotation.adapters,version=0.0.0
  [...] 
```

所有捆绑包都处于活动状态。

Standalone.xml 文件与 jboss:domain:osgi 子系统配置不同：7.1.0.CR1b：

```
<capabilities>
    <capability name="javax.api"/>
    <capability name="javax.servlet.api"/>
    <capability name="javax.transaction.api"/>
    <capability name="org.apache.aries.util"/>
    <capability name="org.jboss.osgi.webconsole"/>
    <capability name="org.osgi.compendium"/>
    <capability name="javax.xml.bind.api"/>
[...] 
```

7.1.1.决赛：

```
<capabilities>
    <capability name="javax.servlet.api:v25"/>
    <capability name="javax.transaction.api"/>
    <capability name="org.apache.felix.log" startlevel="1"/>
    <capability name="org.jboss.osgi.logging" startlevel="1"/>
    <capability name="org.apache.felix.configadmin" startlevel="1"/>
    <capability name="org.jboss.as.osgi.configadmin" startlevel="1"/> 
```

任何想法 ？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-07T08:55:31.397

自 JBoss 7.1.0.Final （我猜）以来，一些包似乎由 system.bundle 导出并由应用程序包正确导入。但不是 ！！

javax.xml.bind api 就是这种情况。

解决方法是通过将 org.jboss.osgi.system.modules.extra 属性添加到 osgi 子系统来修改系统包中包含的模块

```
 <subsystem xmlns="urn:jboss:domain:osgi:1.2" activation="eager">
           <properties>
             <property name="org.jboss.osgi.system.modules.extra">
                javax.xml.bind.api
             </property>
           </properties>
[...] 
```

感谢 Alexander 和 Rico [https://community.jboss.org/message/721852](https://community.jboss.org/message/721852)

# mysql - 检索每个组中的最新记录

> ID：12261232
> 
> 赞同：0
> 
> 时间：2012-09-04T10:09:36.943
> 
> 标签：mysql, group-by

我有一张桌子，像这样：

表新闻

```
Id   Name   Other_Columns
-------------------------
1    A       data 1
2    A       data 2
3    A       data 3
4    B       data 4
5    B       data 5
6    C       data 6 
```

我需要检索这样的东西

```
Group A
----------
data 1
data 2
data 3

Group B
----------
data 4
data 5

Group C
----------
data 6 
```

有人可以帮我处理 MySql 语句吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-04T10:26:04.400

那应该这样做：

```
select asdf.Name, asdf.Other_Columns from (
select
if(@prev != q.Name, @rownum:=1, @rownum:=@rownum+1) as rownumber, @prev:=q.Name, q.*
from (
select
Name,
Other_Columns
from
yourTable yt
, (select @rownum:=0, @prev:='') r
order by Id, Name, Other_Columns
)q
)asdf 
where asdf.rownumber <= 5 
```

这将为您提供最新的 5 个。如上所述，格式化数据是在表示层中完成的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-04T10:17:03.703

这很简单。查询将如下所示：

A组：

```
SELECT Other_Columns FROM news WHERE Name = 'A'; 
```

将“B”和“C”放在“A”的位置，以获得其他组。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-04T10:13:49.113

目前还不清楚你真正想要什么，但这会做吗？

```
select "Group A"
union all
select Other_Columns from news where name = "A"
union all
select "Group B"
union all
select Other_Columns from news where name = "B"
union all
select "Group C"
union all
select Other_Columns from news where name = "C" 
```

# ios - 应用更新后的大麻烦。CoreData 迁移错误

> ID：12261234
> 
> 赞同：2
> 
> 时间：2012-09-04T10:09:40.517
> 
> 标签：ios, core-data, core-data-migration, uimanageddocument

今天早上，我们的 iPhone 应用程序遇到了大麻烦。我们甚至不得不把它从商店里拿出来。

问题是我们对 xcdatamodel 进行了真正的小改动。我们认为更新过程会自动注意以正确的方式交换它，直到我们发现存在类似 CoreData 迁移的东西。

我们正在使用 UIManagedDocument 连接到持久存储。

怎么可能用新文件交换这个文件？在开发过程中，我们只是从设备上卸载了整个应用程序，然后再次安装它，一切正常。我们如何在应用商店中通过更新模拟这个过程？

更新

我尝试像这样设置迁移选项

```
_database = [[UIIManagedDocument alloc] init];
NSMutableDictionary *options = [[NSMutableDictionary alloc] init];
[options setObject:[NSNumber numberWithBool:YES] forKey:NSMigratePersistentStoresAutomaticallyOption],

_database.persistentStoreOptions = options; 
```

但该应用程序仍然崩溃

> ** 由于未捕获的异常“NSInternalInconsistencyException”而终止应用程序，原因：“此 NSPersistentStoreCoordinator 没有持久存储。它无法执行保存操作。
> 
> * * *

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-04T10:22:09.190

关键是管理 xcdatamodel 文件的多个版本。一个版本是当前版本，用于打开根据旧版本创建的数据存储。这样做时，您可以使用迁移映射从一个模型转换到另一个模型。这一切都[在这里](http://developer.apple.com/library/mac/#documentation/cocoa/conceptual/CoreDataVersioning/Articles/Introduction.html)解释。

至于你的问题：你如何模拟更新过程，实际上你不需要做任何特别的事情：

1.  安装旧版本；

2.  用一些数据填充它的数据存储；

3.  通过 Xcode 在旧版本之上安装新版本；

较新的版本将具有较新的数据模型；当安装在旧版本之上时，它会找到旧数据存储并且必须尝试迁移它。这正是通过 App Store 进行更新时发生的情况：应用程序二进制文件被替换，但其沙盒数据保持不变，因此新二进制文件会发现它已经存在。

希望这可以帮助。

编辑：

您的代码已缩短，所以我不确定您还没有，但您可以尝试：

```
NSDictionary *options = [NSDictionary dictionaryWithObjectsAndKeys:
    [NSNumber numberWithBool:YES], NSMigratePersistentStoresAutomaticallyOption,
    [NSNumber numberWithBool:YES], NSInferMappingModelAutomaticallyOption, nil]; 
```

也看看[这个帖子](http://brainwashinc.wordpress.com/2010/01/18/iphone-coredata-automatic-light-migration/)。

在另一个硬币上，自动迁移并不总是有效，这取决于你对模型所做的更改；当它不起作用时，您需要指定自定义迁移模型。[这是一篇](https://stackoverflow.com/questions/5995231/example-or-explanation-of-core-data-migration-with-multiple-passes)关于该主题的内容非常丰富的帖子。

# php - 如何通过 openssl 命令验证根 CA 包？

> ID：12261241
> 
> 赞同：-1
> 
> 时间：2012-09-04T10:10:05.047
> 
> 标签：php

我在根 CA 捆绑包中添加了一个自签名证书，所以我需要验证整个文件“ca-bundle.crt”。是否有任何 openssl 命令来执行此操作？如果有，我可以使用代码系统（“openssl xxxx”）来做到这一点。我试过命令“openssl verify ..path/ca-bundle.crt”，它无法验证自签名证书。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-04T10:13:04.740

您可以使用[在线 SSL 检查器](http://www.sslshopper.com/ssl-checker)查看您的证书的运行情况。

# php - 你知道 php 警告启动无法加载动态库 http.so 指的是什么吗？

> ID：12261245
> 
> 赞同：1
> 
> 时间：2012-09-04T10:10:15.710
> 
> 标签：php, linux, lamp, redhat

我的服务器上安装了 Red Hat 5.8 版本。我有 php 版本 5.3。LAMP 工作正常。但是当我输入“ php -v ”时，我会看到以下警告：

```
PHP Warning:  PHP Startup: Unable to load dynamic library
    '/usr/lib/php/modules/http.so' - /usr/lib/php/modules/http.so:
    undefined symbol: php_set_error_handling in Unknown on line 0 
```

该文件`/usr/lib/php/modules/http.so`存在。

并且，在 php.ini 中：`extension=http.so`

这个错误指的是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-04T10:31:03.407

`http.so`是 PECL_HTTP 库文件。您在此库中有语法错误。尝试升级您的 PECL_HTTP 扩展。

# html - html list li 宽度和高度

> ID：12261247
> 
> 赞同：0
> 
> 时间：2012-09-04T10:10:26.103
> 
> 标签：html, css, list, height, width

这是我的页面： [http](http://www.clouderize.it/michele/) ://www.clouderize.it/michele/ 如您所见，菜单声音“Storia del Bernese”高于其他 li 声音。我希望所有 li 基于文本长度具有相同的高度但不同的宽度。

我必须在我的 css 中做些什么改变？

先感谢您。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-04T10:12:50.053

嗨，现在定义你的`li white-space nowrap`

像这样

```
 #menu-Principale li {
    white-space: nowrap;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-04T10:20:38.973

你用过：ul, menu, dir { display: block;

... }

你最好使用 display:inline; 并且不设置宽度（或设置为自动浏览器兼容性）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-04T10:22:42.943

在您的代码中，标签低于 css

```
 a.tabInactive {
    background: url("images/menu_normal.png") repeat scroll 0 0 transparent;
        display: block;
        line-height: 33px;
        text-align: center;
        width: 76px;
    } 
```

`menu_normal.png`尺寸`77 X 34`对您的菜单来说很小`Storia del Bernese`

因此，您必须再创建一张尺寸适合您的菜单的图像。然后为 id 创建新类`li10`它将起作用

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-09-04T10:13:42.327

不要将宽度固定为 li。也不必提及高度，因为我们有顶部填充 像这样给它

```
#menu-Principale li{
 display:inline-block;
 padding:6px 4px;
 width:auto
} 
```

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2012-09-04T10:40:44.760

删除标签宽度，在左右添加填充，修复背景图像。现在您只需要微调背景图像/颜色。

```
a.tabInactive {
    display: block;
    line-height: 33px;
    padding-right: 15px;
    padding-left: 15px;
    width: auto;
    background-image: none;
    background-color: #EFEFEF;
}

a.tabInactive:hover {
    display:block;
    line-height:33px;
    padding-right: 15px;
    padding-left: 15px;
    width: auto;
    background-image: none;
    background-color: #CCC;
}

a.tabActive {
    display: block;
    color: #FFF;
    padding-right: 15px;
    padding-left: 15px;
    line-height: 33px;
    width: auto;
    background-image: none;
    background-color: #7F469D;
} 
```

# android - 触摸时旋转图像

> ID：12261250
> 
> 赞同：0
> 
> 时间：2012-09-04T10:10:44.410
> 
> 标签：android

我正在开发一个简单的应用程序。我在图像视图上有一个图像（例如一个轮子）。我想根据我的手指移动来转动图像（比如用手转动轮子）并在我松开触摸时停止它。我只是用简单的动画旋转图像而不触摸屏幕。请给我一个解决方案。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-04T10:38:15.127

看看[这个](http://go-lambda.blogspot.in/2012/02/rotary-knob-widget-on-android.html)。

您必须创建自定义视图并处理`onTouch`事件以计算旋转角度。

在`onDraw`方法

1.  保存 `canvas` 状态。
2.  `[Camera](http://developer.android.com/reference/android/graphics/Camera.html)`使用类旋转画布。
3.  在 上绘制图像`canvas`。
4.  恢复`canvas`

# java - 确定列表java中连续整数的最大和

> ID：12261252
> 
> 赞同：0
> 
> 时间：2012-09-04T10:10:45.530
> 
> 标签：java, arrays

我正在处理 codeeval.com 上的一个问题 - [http://codeeval.com/open_challenges/17/](http://codeeval.com/open_challenges/17/)。“编写一个程序来确定列表中连续整数的最大和”。

输入是一个包含逗号分隔的整数列表的文本文件，每行一个，例如

-10、2、3、-2、0、5、-15

2,3,-2,-1,10

该输入应为第一行生成 8，为第二行生成 12。我的答案在下面，但我看不到第二行如何获得 12，所以我的问题主要是我缺少什么，我是否误解了所要求的内容？（我得到 13 的答案）

注意 - 我住在爱尔兰，所以这纯粹是为了我自己的经验，你不会帮助我申请工作！此外，我在这里查看了所有类似的问题，但找不到任何相关内容。

如果我对问题的解释不正确，我所需要的只是指向正确的方向，而不一定是代码。（如，有人可以指出第二行如何计算为 12 而不是 13）

```
import java.util.*;
import java.io.*;

public class largest_sum {

    public static void main(String[] args) throws Exception { 

        FileReader input = new FileReader(args[0]);
        BufferedReader bufRead = new BufferedReader(input);
        String line;

        line = bufRead.readLine();

        while(line != null) { 
            addInts(line);
            line = bufRead.readLine();
        }
        bufRead.close();
        System.exit(0);
    }

    public static void addInts(String line) {
        String[] numbers = line.split(",");
        Integer largest = Integer.parseInt(numbers[0].trim());
        Integer secondLargest = 0;
        for(String s : numbers) {
            Integer converted = Integer.parseInt(s.trim());
            if(converted > largest) {

                secondLargest =  largest;
                largest = converted;
            }
        }
        System.out.println(largest + secondLargest);
    }
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-04T10:17:49.623

我建议看看[Kadane 的算法](http://en.wikipedia.org/wiki/Maximum_subarray_problem)。

编辑：正如@Paolo 和@Vlad 指出的那样 - 你没有得到正确的结果，因为你正在添加最大的两个数字，而不是寻找一个序列。Kadane 的算法通过首先找到在数据集中每个位置结束的最大和来找到序列的最大和。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-04T10:23:46.100

问题是要求找到**连续**整数的最大和。您的程序正在选择最大的和第二大的并将它们加在一起，而不是一回事。

在第一行中，通过获取子序列来获得最大的总和：

```
2, 3, -2, 0, 5 
```

总和为 8（事实上，2 和 -2 抵消了，实际上是最大的 + 第二大的数字，这是一个红鲱鱼）。

在第二行中，最大的总和是通过取整个序列来实现的：

```
2 + 3 + -2 + -1 + 10 
```

总和为 12。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-04T10:46:51.283

我已经用下面的算法修改了你的代码。基本上如果我明白了`correctly it is like find valid integer on the right side then move to left side and find valid integer there then get the sum.`

```
public static void main(String[] args) throws Exception {

    addInts("-10,2,3,-2,0,5,-15");
    addInts("2,3,-2,-1,10");
}

public static void addInts(String line) {
    String[] numbers = line.split(",");
    // First convert Strings to integer array

    int[] ints = new int[numbers.length];
    int count = 0;

    for (String number : numbers) {
        ints[count++] = Integer.parseInt(number);
    }

    // now find first valid and last valid

    int firstValidIndex = -1;
    int lastValidIndex = -1;
    for (count = 0;;) {
        if (ints[count] < 0 && firstValidIndex == -1) {
            count++;
            continue;
        } else {
            if (firstValidIndex == -1) {
                firstValidIndex = count;
                //Swap the loop here now we have to find backwards              
                count = ints.length - 1;
            } else {
                if (ints[count] < 0) {
                    count--;
                    continue;
                } else {
                    lastValidIndex = count;
                    break;
                }

            }

        }
    }

    // Calculate the sum now
    int sum = 0;
    for (count = firstValidIndex; count <= lastValidIndex; count++) {
        sum = sum + ints[count];
    }

    System.out.println(sum);
} 
```

输出

```
8
12 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-06T14:14:16.293

```
package com.salpe.scjp.algo;

public class Algo1 {

    private static int[] test = new int[] { -10, 2, 3, -2, 0, 5, -15 };

    public static void main(String[] args) {

        int highestSum = test[0];

        int higheststart = 0;
        int highestend = 0;

        for (int i = 0; i < test.length; i++) {

            for (int j = 0; j < test.length; j++) {
                if (i != j) {
                    System.out.print("[ " + i + ", " + j );
                    System.out.print(" = "+findSum(i, j) +"]");

                    if(highestSum <  findSum(i, j)){
                        highestSum =  findSum(i, j);
                        higheststart = i;
                        highestend = j;
                    }
                }

            }

            System.out.println("");

        }

        System.out.println("Highest Sum " +highestSum);
        toString(higheststart, highestend);

    }

    public static int  findSum(int i, int j) {

        int sum =0;

        for (int j2 = i; j2 <= j; j2++) {

            sum = sum +test[j2];

        }

        return sum;
    }

    public static int  toString(int i, int j) {

        int sum =0;

        for (int j2 = i; j2 <= j; j2++) {

            System.out.print(" ,"+test[j2]);

        }

        return sum;
    }

}

----------

[ 0, 1 = -8][ 0, 2 = -5][ 0, 3 = -7][ 0, 4 = -7][ 0, 5 = -2][ 0, 6 = -17]
[ 1, 0 = 0][ 1, 2 = 5][ 1, 3 = 3][ 1, 4 = 3][ 1, 5 = 8][ 1, 6 = -7]
[ 2, 0 = 0][ 2, 1 = 0][ 2, 3 = 1][ 2, 4 = 1][ 2, 5 = 6][ 2, 6 = -9]
[ 3, 0 = 0][ 3, 1 = 0][ 3, 2 = 0][ 3, 4 = -2][ 3, 5 = 3][ 3, 6 = -12]
[ 4, 0 = 0][ 4, 1 = 0][ 4, 2 = 0][ 4, 3 = 0][ 4, 5 = 5][ 4, 6 = -10]
[ 5, 0 = 0][ 5, 1 = 0][ 5, 2 = 0][ 5, 3 = 0][ 5, 4 = 0][ 5, 6 = -10]
[ 6, 0 = 0][ 6, 1 = 0][ 6, 2 = 0][ 6, 3 = 0][ 6, 4 = 0][ 6, 5 = 0]
Highest Sum 8
 ,2 ,3 ,-2 ,0 ,5 
```

# objective-c - 如何修复iTunes上传java的应用程序异常？

> ID：12261255
> 
> 赞同：0
> 
> 时间：2012-09-04T10:10:48.550
> 
> 标签：objective-c, ios

当我尝试将我的应用程序从 xcode 提交到 iTunes 时，出现以下错误：

```
1 package(s) were not uploaded because they had problems:
/Users/Omars/Desktop/2480623426.itmsp - Error Messages:
                An error has occurred during the upload.
                An exception has occurred: The operation timed out.
                Transfer error.
                An exception has occurred: The transport has been detected as having failed and has been aborted.  Please try again.
                An error occurred while uploading the files to Apple's remote server.
                An error occurred while uploading the package 2480623426.itmsp.
                Apple's web service operation was not successful
                Unable to authenticate the package: 2480623426.itmsp
                ERROR ITMS-9000: "java.lang.Error: Internal error: 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-04T10:10:48.550

我通过执行以下操作解决了我的问题：
请注意，我使用的是 XCode 4.4.1

此终端命令： cd /System/Library/Frameworks/JavaVM.framework/Versions sudo ln -s CurrentJDK /System/Library/Frameworks/JavaVM.framework/Versions/1.5

有关苹果讨论的更多信息： [https ://discussions.apple.com/message/18048796#18048796#18048796#18048796](https://discussions.apple.com/message/18048796#18048796#18048796#18048796)

# javascript - jQuery animate()-call 很慢

> ID：12261257
> 
> 赞同：1
> 
> 时间：2012-09-04T10:10:52.267
> 
> 标签：javascript, jquery, performance, animation, jquery-animate

我正在为我的单页 Web 应用程序使用 jQuery，现在需要将单个 DIV 的高度从一个固定值设置为另一个固定值（从 ~50px 到 75px）。

我知道遇到可怕的性能问题，令人惊讶的是不是关于动画本身，而是关于 animate() 方法的实际调用。

```
window.time = {};
time.start = new Date().getTime();

$('div').animate({height: '25px'}, 500);

time.end = new Date().getTime(); 
```

运行此代码段，页面上所有 DIV 的动画再次流畅，但

```
time.end - time.start = 190 
```

所以动画的初始化大约需要190ms

当然，这个响应时间是不可接受的。

你们中的一些人有没有遇到过这样的问题并有想法/解决方案？

提前致谢！

狮子座

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-04T10:17:11.693

我从来没有遇到过这种调用的性能特别差的情况，但是它显然会随着你正在制作动画的 div 的数量而缩放，也许这就是你的问题。

如果您只想处理不依赖于动画的其他事情，请使用 a 单独运行它`setTimeout(function() { ... }, 0)`，完成您正在做的任何事情，当您从您所在的函数返回时，它将执行。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-04T10:17:57.900

对于每个 div 都会做一些工作（设置开始和结束值，设置间隔，计算步长等）。所以持续时间取决于 div 的数量，它与它成线性比例，而且我看不到使用 jquery 改进它的一些合法方法。

# charts - 从 xAxis.plotline live Highstock 设置值

> ID：12261258
> 
> 赞同：0
> 
> 时间：2012-09-04T10:10:54.183
> 
> 标签：charts, highcharts, highstock

我使用 Highstock，我会通过点击事件从 xAxis.plotLine 设置值。我该怎么做才能直接显示？我使用 xAxis.plotLines.value = this.x; 设置点击事件的值

```
 series : [
      {
    xField : 'deltaTime',
    yField : 'variableOne'
  },{
    xField : 'deltaTime',
    yField : 'variableTwo',
  }],
  chartConfig : {          
        xAxis: {
        plotLines: [{
            width: 2,
            color: 'black'
        }]
    },
    rangeSelector : {
      selected : 1
    },
    plotOptions: {
            series: {
                cursor: 'pointer',
                point: {
                    events: {
                        click: function() {                           
                        var hcConfig = Chart.ux.HistoryChart.getConfig('single_line');
                        hcConfig.chartConfig.xAxis.plotLines.value = this.x;
                        }
                        }
                    }
                },
                marker: {
                    lineWidth: 1
                }
            }
        },
  }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-04T16:49:17.960

要在创建图表后添加绘图线，您必须调用[`addPlotLine`](http://api.highcharts.com/highstock#object-Axis)图表的 xAxis 对象的方法。您可以从`event`传递给单击处理程序的参数中访问它：

```
point: {
    events: {
        click: function(event) {
            event.point.series.xAxis.addPlotLine({ ... });
        }
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-04T17:55:11.813

我已经回答了一个类似的问题[@HighCharts Keep Vertical Line on Click Event](https://stackoverflow.com/questions/12061230/highcharts-keep-vertical-line-on-click-event)。
[在点击位置添加绘图线@jsFiddle](http://jsfiddle.net/jugal/wHnnE/)

# android - 我正在尝试通过电话间隙控制 android 的后退按钮

> ID：12261259
> 
> 赞同：-3
> 
> 时间：2012-09-04T10:11:04.790
> 
> 标签：android, cordova, jquery-mobile

我想在单击后退按钮时打开一个弹出窗口。

[这是不起作用的代码](https://stackoverflow.com/questions/12194935/phone-gap-back-button-alert-message)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-04T10:29:37.053

```
document.addEventListener("backbutton", yourCallbackFunction, false); 
```

检查此[链接](http://docs.phonegap.com/en/2.0.0/cordova_events_events.md.html#backbutton)或

返回键

这是当用户按下后退按钮时触发的事件。

如果您需要覆盖默认的后退按钮行为，您可以为“后退按钮”事件注册一个事件侦听器。不再需要调用任何其他方法来覆盖后退按钮的行为。现在，您只需要为“后退按钮”注册一个事件监听器。

通常，一旦收到 Cordova 'deviceready' 事件，您将希望使用 document.addEventListener 附加事件侦听器。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-04T10:41:47.980

在您的活动课程中添加以下内容：

@覆盖

```
public boolean onKeyDown(int keyCode, KeyEvent event) 
{
    if(keyCode == KeyEvent.KEYCODE_BACK)
    {
        // Do your Pop up thing here!!
        return true;
    }
    return false;
} 
```

# jquery - IE 中的显示问题 - 数据表行分组

> ID：12261260
> 
> 赞同：0
> 
> 时间：2012-09-04T10:11:07.137
> 
> 标签：jquery, css, internet-explorer, datatables, grouping

我正在使用 Datatables Collapsible/Expandable Grouping，每组有一个行数，展开/折叠所有按钮和一个重置搜索按钮。我在使用 Internet Explorer 时遇到了一些显示问题。

在 IE 9、IE 8 和 IE 7 中，不显示重置搜索按钮（搜索字段右侧的黑色 X）。

在 IE 7 中搜索字段和标签也显示不正确。它不是右对齐的。

谁能帮我解决这些 IE CSS 问题？您的帮助将不胜感激！

我设置了一个 jsfiddle 来说明这个问题：http: [//jsfiddle.net/lbriquet/gtgzr/](http://jsfiddle.net/lbriquet/gtgzr/)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-04T10:23:50.913

**1\. 在IE 9、IE 8 和IE 7 中没有显示reset search 按钮。**

您正在使用`<input type="image" ... />`没有 src 属性。是的，包含框确实包含图标，但它们是 CSS 声明的背景图像，不是直接从输入元素中的 src 属性呈现的，IE 不会很好地配合你的语法。

**2\. IE 7 搜索栏和标签也显示不正确。它不是右对齐的。**

它不是正确对齐的，因为 IE7 要求元素至少具有一些样式才能正确定位它。您已将展开所有按钮向左浮动，重置按钮向右浮动，要在 IE7 中解决此问题，您可以完全取消浮动并使用“display:inline-block; position:relative”来定位元素内联。或者继续使用浮动，但也将搜索框浮动。（您需要在 sDOM 属性中切换重置框和搜索框的位置，以在右浮动时保持正确的定位。

# iphone - 是否可以通过 Web 服务发送图像？

> ID：12261263
> 
> 赞同：-1
> 
> 时间：2012-09-04T10:11:13.737
> 
> 标签：iphone, web-services, coldfusion

我已经制作了应用程序，我想在位于远程服务器上的 iphone 应用程序上显示图像。使用`iphone`我可以从远程服务器检索图像。所以我想通过 webservice.so 将该图像发送到 iphone 应用程序是否可能？请帮助我。在此先感谢`coldfusion webservice.``coldfusion webservice`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-04T11:03:12.127

使用 cffile 或 cfimage 读取文件。Base64 对数据进行编码，然后将其发送到 Web 服务中。在 iPhone 应用程序 base64 解码中，您将拥有图像的二进制文件。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-05T14:24:52.620

保罗是在正确的轨道上。但是，您很可能需要以不同的方式读取源文件。根据我过去发现的内容，您需要获取文件的二进制文件和 base64 文件。所以，这段代码应该适合你..

```
<cfset myFile = toBase64(fileReadBinary('path.to.image.file'))> 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-09-04T10:27:14.397

您可以通过创建表单来上传图片试试下面的代码

```
-(void)UploadImage{

NSString *urlString = @"yourUrl";
NSMutableURLRequest *request = [[[NSMutableURLRequest alloc] init] autorelease];
[request setURL:[NSURL URLWithString:urlString]];
[request setHTTPMethod:@"POST"];

NSMutableData *body = [NSMutableData data];

NSString *boundary = [NSString stringWithString:@"---------------------------14737809831466499882746641449"];
NSString *contentType = [NSString stringWithFormat:@"multipart/form-data; boundary=%@", boundary];
[request addValue:contentType forHTTPHeaderField:@"Content-Type"];

// file
NSData *imageData = UIImageJPEGRepresentation([self scaleAndRotateImage:[selectedImageObj]],90);

[body appendData:[[NSString stringWithFormat:@"--%@\r\n", boundary] dataUsingEncoding:NSUTF8StringEncoding]];
// [body appendData:[[NSString stringWithString:@"Content-Disposition: attachment; name=\"user_photo\"; filename=\"photoes.jpg\"\r\n"] dataUsingEncoding:NSUTF8StringEncoding]];

[body appendData:[[NSString stringWithFormat:@"Content-Disposition: form-data; name=\"image\"; filename=\"%@.jpg\"\r\n",@"ImageNmae"] dataUsingEncoding:NSUTF8StringEncoding]];

[body appendData:[[NSString stringWithString:@"Content-Type: application/octet-stream\r\n\r\n"] dataUsingEncoding:NSUTF8StringEncoding]];
[body appendData:[NSData dataWithData:imageData]];
[body appendData:[[NSString stringWithString:@"\r\n"] dataUsingEncoding:NSUTF8StringEncoding]];

// close form
[body appendData:[[NSString stringWithFormat:@"--%@--\r\n", boundary] dataUsingEncoding:NSUTF8StringEncoding]];
// set request body
[request setHTTPBody:body];
//return and test
NSData *returnData = [NSURLConnection sendSynchronousRequest:request returningResponse:nil error:nil];
NSString *returnString = [[NSString alloc] initWithData:returnData encoding:NSUTF8StringEncoding];

  } 
```

# geolocation - 控制依赖于地理 IP 的 HTML 元素

> ID：12261264
> 
> 赞同：0
> 
> 时间：2012-09-04T10:11:22.137
> 
> 标签：geolocation, geoip

[我们在这里](http://spiritdigital.co.uk/outpost/mobile/index.html)有一个移动网页，可在不同国家/地区使用，在每个国家/地区内，我们需要能够根据访问者的 IP 更改以下内容：

*   div#container 拥有不同的背景图像
*   div#buttons 被隐藏和 div#buttons-2 被显示

使用称为[GeoIP](http://dev.maxmind.com/geoip/javascript)的 JavaScript ，到目前为止，我们能够识别访问者的国家并以两个字符 ISO 3166-1 的形式获取函数名称，以用于控制其他 JavaScript 函数。例如，我来自英国，所以当我访问该页面时，JavaScript 会生成以下代码：

```
function geoip_country_code() { return 'GB'; } 
```

在 HTML 中，目前有一个脚本说：

```
 if (geoip_country_code() == 'GB') 
    {
      alert("Hello, you are in Great Britain");
    } 
```

我们想开发它，以便我们可以操纵指定元素的 CSS，但我们并不精通 JavaScript，所以这就是我们需要帮助的地方。

这是嵌入到页面中的 JavaScript：

```
<script src="http://j.maxmind.com/app/country.js" charset="ISO-8859-1"></script> 
```

以下是我们要控制的 HTML 元素：

```
<div id="container">
            <div id="buttons">
                <a href="#" target="blank">
                    <div class="button youtube"></div>
                </a>
                <a href="#" target="blank">
                    <div class="button facebook"></div>
                </a>
                <a href="#" target="blank">
                    <div class="button web"></div>
                </a>
                <a href="#" target="blank">
                    <div class="button appstore"></div>
                </a>
            </div>
        </div> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-04T11:46:57.643

```
var map = {
    'GB': {
        'background': 'img1.jpg',
        'buttons': 'show',
        'buttons2': 'hide'
    }
};

var country = geoip_country_code();
$('#container').css('background', map[country].background);
$('#buttons')[map[country].buttons]();
$('#buttons2')[map[country].buttons2](); 
```

这是一个使用 jQuery 的示例。我希望您了解使用“映射对象”（那里只有英国，但可以根据需要添加国家/地区），然后您可以在此基础上执行您的操作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-04T11:01:04.043

根据返回的国家代码，您应该更改样式表（css）

就像如果返回 GB 然后加载 div#container 具有不同背景图像的 css 隐藏 div#buttons 并显示 div#buttons-2

反之亦然。

或者你可以简单地用 javascript 做到这一点

制作一个函数：设置容器的背景图像，隐藏 div#button，显示 div#buttons-2

以及反之亦然的另一个功能，例如：设置容器的另一个背景图像，显示 div#button，隐藏 div#buttons-2

现在你可以调用适当的函数来显示如下：如果返回'US'调用func1，如果返回'UK'调用func2

# applescript - 如何使用苹果脚本访问无标题窗口的组件

> ID：12261266
> 
> 赞同：0
> 
> 时间：2012-09-04T10:11:24.590
> 
> 标签：applescript

我是 SO.Plz 的新手。如果我错了，请指导我。我正在编写一个苹果 UI 脚本来单击 Mac 应用程序的按钮，但问题是包含该按钮的窗口没有名称（空字符串“”，来自 UIElementInspector）。请帮我看看如何引用窗口。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-04T23:38:39.640

您通常可以使用索引，例如**window 2**。可以使用类似的东西在事件日志中查看项目列表

```
tell application "System Events" to get windows of application process "foo" 
```

# qt - qt中的滚动事件检测

> ID：12261267
> 
> 赞同：8
> 
> 时间：2012-09-04T10:11:26.867
> 
> 标签：qt, scroll, mouse

如何检测 Qt 小部件中的滚动事件？
我想用它来滚动 QWT 图。我试过使用 a `QMouseEvent`，但我只能找到移动和按下/释放鼠标的选项。

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-09-04T10:26:41.633

`void QWidget::wheelEvent(QWheelEvent* event)`将是您所追求的（[此处](http://doc.qt.io/archives/qt-4.8/qwidget.html#wheelEvent)的文档）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2021-03-15T12:01:55.193

If you use vertical wheel mouse, you can catch wheel up or wheel down event using the below function. If you use horizontal wheel mouse, check `ev->angleDelta().x()` value!

```
void wheelEvent(QWheelEvent *ev)
{
    if(ev->angleDelta().y() > 0) // up Wheel
        action1();
    else if(ev->angleDelta().y() < 0) //down Wheel
        action2();
} 
```

# ftp - Aptana Studio FTP 连接丢失

> ID：12261269
> 
> 赞同：0
> 
> 时间：2012-09-04T10:11:31.307
> 
> 标签：ftp, aptana, aptana3

自上次更新以来，在启动应用程序后，“项目资源管理器”中的 FTP-Server-Connections 丢失。通常我可以轻松选择服务器并浏览文件，但现在 1 秒后所有列表条目都丢失了，它只显示“本地文件系统”了..

（之前在 Local Filesystem 下列出了我的服务器：http: [//d.pr/i/zBc1](http://d.pr/i/zBc1)）昨天我重新添加了它，我认为它可以工作，但今天它又丢失了......

编辑：还重新安装了 Aptana Studio3。但是在启动列表条目后仍有 1 秒丢失......

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-07T19:52:17.563

好的，我现在创建了一个全新的工作区并且它工作了。必须是设置文件或类似的错误...

# javascript - 如何使用javascript在dreamweaver的选项卡式面板中设置默认选项卡

> ID：12261277
> 
> 赞同：1
> 
> 时间：2012-09-04T10:12:05.140
> 
> 标签：javascript, dreamweaver, spry

我正在尝试在我的选项卡式面板中设置默认选项卡。在 Dreamweaver 中，我使用了以下代码：

```
<div id="TabbedPanels1" class="TabbedPanels" style="margin: 0 0 20px;">
 <ul class="TabbedPanelsTabGroup">
 <li class="TabbedPanelsTab" tabindex="0">Tab1</li>
 <li class="TabbedPanelsTab" tabindex="0">Tab2</li>
 </ul>
<div class="TabbedPanelsContentGroup">
  <div class="TabbedPanelsContent" >
   content 1
  </div>
  <div class="TabbedPanelsContent" >
   content 2
  </div>
</div>
</div> 
```

我希望 tab2`default(selected)`在显示时显示，所以我使用了以下 JavaScript：

```
var TabbedPanels1 = new Spry.Widget.TabbedPanels("TabbedPanels1",{defaultTab:1}); 
```

但它仍然显示选择的第一个选项卡而不是我想要的第二个选项卡。为什么会这样？我哪里错了？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-17T10:43:23.380

```
<li class="TabbedPanelsTab" tabindex="0">Tab1</li>
<li class="TabbedPanelsTab" tabindex="1">Tab2</li> 
```

比方说，你想显示第二个标签

```
<script type="text/javascript">
<!--
var TabbedPanels1 = new Spry.Widget.TabbedPanels("TabbedPanels1",{ defaultTab: 1 });
//-->
</script> 
```

看上面代码中defaultTab的使用

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-18T10:54:28.167

将元素中的选项卡索引更改`li`为唯一编号，第二个`li`元素为 1，第一个元素保持 0。

```
<li class="TabbedPanelsTab" tabindex="0">Tab1</li>
<li class="TabbedPanelsTab" tabindex="1">Tab2</li> 
```

# javascript - javascript if语句条件替换变量值

> ID：12261278
> 
> 赞同：1
> 
> 时间：2012-09-04T10:12:06.973
> 
> 标签：javascript, variables, syntax, if-statement

我是 Javascript 的新手。

我有一个包含大量计算的脚本。一切都很好，除了我有一个名为 J14 的变量并且用户可以从界面设置这个值。假设它现在等于 30000。它似乎可以通过计算工作，但是一旦我在 If 语句条件中使用 J14，它就会用 0 替换 J14 的值。我不知道为什么它会这样做，因为我没有分配变量，我是只需对照 0 检查它。

在这个语句之前我可以输出 J14 的值，它是 30000，但是，如果我在这个语句之后输出 J14，它的值为 0。所以条件是赋值。然后我不能再在脚本中使用 J14，但我需要在该语句后面的 If 语句中使用它。做这种事情我可能有语法错误，但不能完全弄清楚成功的谷歌解决方案的术语。

```
if (J14 = 0)
{
    J59 = (J15 + J16) * 75;
}
else
{
    J59 = J15 * F75;

} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-04T10:13:36.650

= 是一个任务。您应该使用 == 或更好的 ===。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-04T10:13:43.033

您将 0 分配给变量。= 用于赋值。你需要使用'=='。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-04T10:15:37.707

`=`是一个[赋值运算符](http://www.w3schools.com/js/js_operators.asp)。

`==`是[比较运算符](http://www.w3schools.com/js/js_comparisons.asp)

```
if (J14 = 0)   //will assign 0 to J14 
```

# javascript - javascript中的正则表达式语法

> ID：12261279
> 
> 赞同：-4
> 
> 时间：2012-09-04T10:12:09.017
> 
> 标签：javascript, regex

你知道`(^|\s)`下面表达式中的目的吗？

```
/(^|\s)(apple|orange|lemon)(\s|$)/.test(foo); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-04T10:15:28.353

`(^|\s)`匹配字符串的开头或空白字符。

因此，如果字符串显示“apple it is”或“I want an apple”，它将匹配。

请注意，在第一种情况下，它将匹配“apple”，在第二种情况下，它将匹配“apple”。

注意匹配的额外空间。如果不需要该行为，则应使用单词边界（由 给出`\b`）。

例如：

```
/\b(apple|orange|lemon)\b/ 
```

这将允许所有匹配的苹果完全匹配“苹果”（而不是“苹果”或其他变体）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-04T10:13:50.430

表示字符串开头 ( `^`)**或**空格字符 ( `\s`)。

所以它应该在以下情况下匹配：`"apple"`, `" apple"`.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-04T10:15:21.143

这意味着正则表达式匹配以空格 ( ) 开头的字符串 ( )`^`或 ( `|`) 的其他内容（正则表达式的其余部分）的开头`\s`

# java - 如何检查连接是否已使用 isValid(0) 打开

> ID：12261283
> 
> 赞同：3
> 
> 时间：2012-09-04T10:12:20.080
> 
> 标签：java, mysql, jdbc

我创建了一个连接对象（java.sql.Connection）。

我可以使用此代码检查连接是否已打开。

```
if (connection != null  && connection.isValid(0)) {
     return connection;
} 
```

如果有任何问题，请帮助我。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-17T17:43:11.830

小心`isValid(0)`，它会在没有任何超时的情况下测试连接，因此您的应用程序此时可能会挂起。

最好指定一个大于 0（以秒为单位）的值。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-04T10:14:12.777

为什么不在java.​sql.​Connection 中使用[isOpen()](http://docs.oracle.com/javase/6/docs/jdk/api/jpda/jdi/com/sun/jdi/connect/spi/Connection.html#isOpen%28%29)方法或[isClosed()](http://docs.oracle.com/javase/6/docs/api/java/sql/Connection.html#isClosed%28%29)

编辑：

[isValid()](http://docs.oracle.com/javase/6/docs/api/java/sql/Connection.html#isValid%28int%29)在内部检查连接是否未关闭，这将是更好的 IMO，因为它检查连接是否也是有效的。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-04T10:18:13.217

你的代码很好。它比使用`isClose()`方法更安全，因为它还测试连接是否仍然有效。

# android - AsyncTask 中的 IllegalStateException

> ID：12261285
> 
> 赞同：0
> 
> 时间：2012-09-04T10:12:39.667
> 
> 标签：android, exception, android-asynctask

我有一个异步任务。

```
protected class InitTask extends AsyncTask<Context, Integer, String> {

        View eachLayout;

        @Override
        protected String doInBackground(Context... params) {

            try {
                myfunction();
            } catch (Exception e) {

                e.printStackTrace();

            }

            return null;
        }

        @Override
        protected void onPostExecute(String result) {

            super.onPostExecute(result);

        }

        /*
         * (non-Javadoc)
         * 
         * @see android.os.AsyncTask#onPreExecute()
         */
        @Override
        protected void onPreExecute() {
            super.onPreExecute();

            linearLayout.invalidate();
        }

        @Override
        protected void onProgressUpdate(Integer... values) {
            super.onProgressUpdate(values);

            linearLayout.addView(eachLayout, params);
            linearLayout.invalidate();
        }

        /*
         * (non-Javadoc)
         * 
         * @see android.os.AsyncTask#onCancelled()
         */
        @Override
        protected void onCancelled() {
            super.onCancelled();
        }

        public void redrawLayout(View linearLayout) {
            try {

                eachLayout = linearLayout;
                publishProgress();

            } catch (Exception e) {

                e.printStackTrace();

            }
        }

    }

private void myFunction() {
        LayoutInflater layoutInflater = (LayoutInflater) this
                .getSystemService(Context.LAYOUT_INFLATER_SERVICE);
        params = new LinearLayout.LayoutParams(
                newLinearLayout.getLayoutParams().width,
                newLinearLayout.getLayoutParams().height);

        for (int i = 0; i < list.size(); i++) {
            final View eachLayout = layoutInflater.inflate(R.layout.sample, null);
            //..........................
            eachLayout.invalidate();
            initTask.redrawLayout(eachLayout);
        }

    }

 params = new LinearLayout.LayoutParams(
                linearLayout.getLayoutParams().width,
                linearLayout.getLayoutParams().height); 
```

它在这一行显示**IllegalStateException** linearLayout.addView(eachLayout, params); .（这个孩子已经有一个父母）。

我试过 linearLayout.removeAllViews() 等......但它不起作用。

如何解决这个问题？

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-04T10:22:36.757

尝试以下操作：

```
@Override
    protected void onProgressUpdate(Integer... values) {
        super.onProgressUpdate(values);

       if( ((LinearLayout) eachLayout.getParent()) != null 
                &&  eachLayout != null) {
             ((LinearLayout) eachLayout.getParent()).removeView(eachLayout);
       }

        linearLayout.addView(eachLayout, params);
        linearLayout.invalidate();
    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-04T10:28:41.923

第一次将 eachLayout 添加到某个视图时，没关系。但是当你第二次做同样的事情时， eachLayout 已经有了父级。因此，尝试将其添加到任何视图都会失败。试试 Chintan Raghwani 的建议。

# ios - 如何在 NSFetchedResultsController 中使用 Coredata 有序关系

> ID：12261286
> 
> 赞同：4
> 
> 时间：2012-09-04T10:12:42.927
> 
> 标签：ios, core-data, nspredicate

1.  我有一个项目实体和一个标签实体。
2.  项目可以有多个标签，标签可以链接到多个项目（多对多关系）。
3.  该关系是“有序关系”（在 IOS5 中使用有序关系）两种方式。

我想使用 NSFetchedResultsController 获取标签的所有项目。

查询：

1.  甚至可以使用 NSFetchRequest 和 NSFetchedResultsController 的有序关系吗？
2.  如何指定“排序描述符”？
3.  我尝试了两个谓词。第一个没有给出任何结果，第二个确实给出了结果。为什么第一个不起作用？同样，如何指定排序描述符以使用 CoreData 自动管理的排序顺序来处理这种关系？

没用：[NSPredicate predicateWithFormat:@"ANY tags == %@", yyy];

工作：但效率较低：[NSPredicate predicateWithFormat:@"ANY tags.tagID == %@", xxx];

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-04T12:22:47.703

1 - 是的。有可能的。创建映射文件时，请确保将关系的类型从 NSSet 更改为 NSArray，如下所示：

```
 @class Tags

    @interface Entity : NSManagedObject
    ...
    @property (nonatomic, retain) NSOrderedSet *tags;
    ...
    @end

    @interface Entity (CoreDataGeneratedAccessors)
    ...
    - (void)addEntityTags:(NSOrderedSet *)values;
    - (void)removeEntityTags:(NSOrderedSet *)values;
    ...
    @end 
```

改成：

```
 @class Tags

    @interface Entity : NSManagedObject
    ...
    @property (nonatomic, retain) NSArray *tags;
    ...
    @end

    @interface Entity (CoreDataGeneratedAccessors)
    ...
    - (void)addEntityTags:(NSArray *)values;
    - (void)removeEntityTags:(NSArray *)values;
    ...
    @end 
```

2 - 您可以在创建获取请求时指定排序描述符，如下所示：

```
 NSFetchRequest *fetchRequest [NSFetchRequest new];
    NSEntityDescription *entity = [NSEntityDescription entityForName:@"Entity" inManagedObjectContext:myManagedObjectContext];

    [fetchRequest.setEntity: entity];
    [fetchRequest setSortDescriptors:[NSArray arrayWithObject:[NSSortDescriptor sortDescriptorWithKey:@"tags" ascending:<YES|NO>]];
    [fetchRequest setPredicate:[NSPredicate predicateWithFormat:@"ANY tags == %@", yyy]];

    NSFetchResultsController *myFetchResultsController = [[NSFetchedResultsController alloc] initWithFetchRequest:fetchRequest managedObjectContext:myManagedObjectContext setcionNameKeyPath:nil cacheName:nil];
    myFetchResultsController.delegate = self;

    [fetchRequest release]; // Forget that if using ARC.

    NSError *error = nil;

    if (![myFetchResultsController performFetch:&error]) {
        NSLog(@"Failed to fetch data: %@", error);
    } 
```

3 - 如果您使用该属性，则不需要为您的标签指定谓词。如果您想进一步对标签进行排序，您可以简单地在该数组上使用排序描述符，如下所示：

```
 NSSortDescriptor *tagDescriptor = [NSSortDescriptor sortDescriptorWithKey:@"<tags field to sort on>" ascending:<YES|NO>];
    NSArray *sortedTags = [tagsProperty sortedArrayUsingDescriptors:[NSArray arrayWithObject:descriptors]]; 
```

您可以简单地从该属性中读取标签。

希望这可以帮助！

# php - PHP - 如何将 MVC - 视图（使用例如非逻辑模板引擎）拆分为逻辑类和原始 html 模板？

> ID：12261288
> 
> 赞同：0
> 
> 时间：2012-09-04T10:12:52.067
> 
> 标签：php, model-view-controller, frameworks, templating

我相信模板不应该只包含任何逻辑 { } 并且包含和阻止部分就是这样。在 MVC 框架中，V 通常是与 HTML 混合的原始 php，这对于习惯于清理 HTML 的人来说非常糟糕，对于设计师来说是一场噩梦。但是将视图逻辑放在控制器中也是一种错误的方法。

我想知道如何使它像这样。请求->控制器->加载模型...逻辑将所有内容发送到->查看->查看逻辑块...->模板

这在 Laravel 或 Fuelphhp 等框架中是否可行？或者更一般地说，这甚至是一个好习惯吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-04T11:14:58.057

View 是 MVC 的一部分，负责表示逻辑。正确编写的视图将从模型层获取信息，并根据这些信息决定用户应该得到什么响应。

如果视图的任务是创建 HTML 响应，它将使用多个[模板](http://codeangel.org/articles/simple-php-template-engine.html)的组合 （存档版本：[https](https://archive.md/CiHhD) ://archive.md/CiHhD ）来创建它。或者它可能只是将 HTTP 标头发送回浏览器。

在不同的情况下，视图可能只是为 REST API 生成 JSON 或为 SOAP 生成 XML。

但在所有这些情况下，视图决定了如何表示信息。Controller 只负责改变模型层和当前视图的状态。

## 附言

MVC 本身是一种设计模式，它由两层组成：表示层和模型层。模型层处理所有领域的业务逻辑，而表示层——处理用户界面和交互。

没有“控制器层”或“视图层”之类的东西。

大多数 Rails 克隆坚持认为视图是模板并将 ORM 称为“模型”的原因很简单。这些框架是为快速原型设计（生成*一次性*代码）而不是可维护性而创建的。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-04T10:19:00.567

非常普遍：许多 PHP 框架实现的“视图”不是很好。没有什么说视图只需要是*一个*模板文件，或者它根本就需要是一个模板。视图是可视化模型数据的一段代码。这可以根据需要变得复杂或简单。它可以是返回 JSON、二进制数据或其他任何内容的类。它根本不需要涉及 HTML。

如果它确实涉及 HTML，那么没有什么说控制器需要基本上设置所有变量，然后`include`是 HTML 模板。那太少了。视图应该是一段独立的代码，可能是一个类，它可以做任何需要做的事情来可视化某个数据或对象。一个视图可以包含多个类。在从磁盘加载任何 HTML 模板之前，视图中可能存在一整层逻辑。在您的应用中做最有意义的事情。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-04T10:32:27.843

我同意你上面所有的观点......

逻辑不属于视图......**除非**它是与该特定视图直接相关的视图逻辑。允许一些基本逻辑可以防止类爆炸，您尝试围绕自己的规则来解决视图应该是什么。底线规则是视图应该在请求结束时发生，并且只读取/查询模型。通过将逻辑移动到类中来避免重复。

视图逻辑不属于控制器......主要是因为容易纠结，控制器对模型进行更改，然后调用视图进程。

通常，您应该根据处理传入输入并修改模型的控制器层和呈现模型的视图层来组织您的工作。

大多数框架和原始 PHP 都可以用来遵守这种道德规范。

# c# - 数据表行插入

> ID：12261291
> 
> 赞同：0
> 
> 时间：2012-09-04T10:13:15.800
> 
> 标签：c#, database, datatable, datarow

我想问一下插入查询结果的方法如下：

其中ID是客户ID，num是购买的商品数量，Product_x是产品的ID

```
ID    num_0    Product_0      num_1    Product_1    num_2    Product_2  

1      3          435          2         122         1         236
1                 324                    232
1                 236
2      2          345          3         253         0          
2                 1519                   1563                  
2                                        79 
```

以下是我的以下代码

```
foreach (DataRow dr in tableShowDate.Rows)
{                
    String wo_number = handle(dr["ID"].ToString()) ;
    String date = handle(dr["DATE"].ToString());

    DataRow[] tempRowSelected = tempTable.Select("ID like '" + wo_number + "' ");
    DataRow [] originalRowSelected = tableOriginal.Select("ID like '" + wo_number + "' " + " and"+  " DATE = '" + date + "' " , "PRODUCT_ID ASC");

    for (int t = 0; t < tableOriginal.Rows.Count; t++)                 
    {             
        for (int x = 1; x < tempTable.Columns.Count; x++)
        {
            String compareDate = handle(tableOriginal.Rows[t]["CREATE_DATE"].ToString()); 
            if (compareDate == Days[x - 1])
            {                 
               tempRow["PHOTO_" + x.ToString()] = Convert.ToInt32(tableOriginal.Rows[t]["NUM"]);

               for (int s = 0; s < originalRowSelected.Length; s++) 
               {
                   tempRow["ID_" + x.ToString()] = httpLink  + Convert.ToString(tableOriginal.Rows[t]["Product_ID"]);
                   break;
               }
            }
        } 
    }                                
} 
```

我想问一下如何插入表格中显示的行，因为我已经完成了 DataTable.select

下面是我的桌子

```
 Customer_ID   num    Product_ID      Date        

     1      3          435        2012-3-4         
     1      3          324        2012-3-4          
     1      3          236        2012-3-4
     1      2          122        2012-3-5
     1      2          232        2012-3-5 
     1      1          236        2012-3-6
     2      2          345        2012-3-4                        
     2      2          1519       2012-3-4                              
     2      3          253        2012-3-5
     2      3          1563       2012-3-5
     2      3           79        2012-3-5 
```

# c# - 在 C# 的 MonthCalendar 中突出显示大量日期

> ID：12261292
> 
> 赞同：0
> 
> 时间：2012-09-04T10:13:19.477
> 
> 标签：c#, exception-handling

我需要根据从数据库中获得的数据突出显示 MonthCalendar 中的日期，但它不断向我抛出 OutOfMemory 异常。我得到了我必须从数据库中突出显示为 bool 值的日子，如下所示：

```
command.CommandText = "SELECT Monday FROM Days WHERE Event = "+idEvent+"";
Monday = Convert.ToBoolean(command.ExecuteScalar()); 
```

一周中的每一天都使用类似的代码。我必须突出显示日期的范围是整年（开始和结束是一年中的第一天和最后一天，都是 DateTime 类型）。我试图用这段代码做到这一点：

```
for (DateTime day = start; day < end; day.AddDays(1))
            {
                if (Monday && day.DayOfWeek == DayOfWeek.Monday)
                {
                    dates.Add(day);
                }
                else if (Tuesday && day.DayOfWeek == DayOfWeek.Tuesday)
                {
                    dates.Add(day);
                }
                else if (Wednesday && day.DayOfWeek == DayOfWeek.Wednesday)
                {
                    dates.Add(day);
                }
                else if (Thursday && day.DayOfWeek == DayOfWeek.Thursday)
                {
                    dates.Add(day);
                }
                else if (Friday && day.DayOfWeek == DayOfWeek.Friday)
                {
                    dates.Add(day);
                }
                else if (Saturday && day.DayOfWeek == DayOfWeek.Saturday)
                {
                    dates.Add(day);
                }
                else if (Sunday && day.DayOfWeek == DayOfWeek.Sunday)
                {
                    dates.Add(day);
                }
            }
            monthCalendar1.BoldedDates = dates.ToArray(); 
```

该算法的重点是粗体显示所选事件发生的日期（每个事件全年定期发生，除了一些例外，如假期或某些特定时间间隔）。因此，对于每个事件，每年可能会发生 200 多次。我怎么解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-04T10:24:31.037

一个可能的原因是您的迭代代码有错误，`day.AddDays(1)`无法正常运行。它返回一个`DateTime`已经完成操作的新的。

因此，`day`never 的值会发生变化，并且您的循环将无限运行。

改用 while 循环：

```
DateTime day = start;
while (day < end)
{
    // your date checking logic

    day = day.AddDays(1);
} 
```

# c# - 如何处理c#中的错误代码

> ID：12261294
> 
> 赞同：1
> 
> 时间：2012-09-04T10:13:24.937
> 
> 标签：c#, windows-phone

我在 C# 中遇到了如何处理`try`-中的错误的问题`catch`。

示例我将删除记录的代码写入数据库，但该记录已 FK 到另一个表中。如何处理？

```
try
{
     // delete record in database
}
catch (Exception ex)
{
    int error = // how to get this code exception      
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-04T10:15:28.833

您可能会捕获[SQLException](http://msdn.microsoft.com/en-us/library/system.data.sqlclient.sqlexception.aspx)而不是 general`Exception`并使用它的[Number](http://msdn.microsoft.com/en-us/library/system.data.sqlclient.sqlexception.number.aspx)属性

```
 catch (SqlException ex)
    {
     Console.WriteLine(ex.Number);
    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-04T10:15:24.273

将`Exception`保存错误类型的详细信息如果要捕获特定类型的异常，请在 catch 中使用该类型。例如：

```
 catch (SqlException sqlex)
 {

 } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-04T10:16:25.920

您可以[`Marshal.GetLastWin32Error()`](http://blogs.msdn.com/b/adam_nathan/archive/2003/04/25/56643.aspx)用于 Win32。对于数据库使用 SqlException 类。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-04T10:19:47.047

```
try
{  
  //exec delete command
}
catch (SQLException e)
{
  //if SQL error indicates referential integrity violation
    throw ReferentialIntegrityViolationException// or whatever
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-04T10:20:23.623

```
try
{
    # SQL Stuff
}
catch (SqlException ex)
{
    if (ex.Errors.Count > 0) // Assume the interesting stuff is in the first error
    {
        switch (ex.Errors[0].Number)
        {
            case 547: // Foreign Key violation
                throw new InvalidOperationException("Some helpful description", ex);
                break;
            case 2601: // Primary key violation
                throw new DuplicateRecordException("Some other helpful description", ex);
                break;
            default:
                throw new DataAccessException(ex);
        }
    }

} 
```

根据[外键违规](https://stackoverflow.com/questions/2403348/how-can-i-know-if-an-sqlexception-was-thrown-because-of-foreign-key-violation)

看看： [how-to-handle-db-exception-in-c-sharp](https://stackoverflow.com/questions/1666887/how-to-handle-db-exception-in-c-sharp)

这将告诉您如何精确定位外键错误。

另请查看[包括外键的 MSDN 行删除](http://msdn.microsoft.com/en-us/library/bb386925.aspx)

这解释了将级联设置为 on - 这是我相信你所缺少的。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-09-04T10:37:22.613

```
try
{
    // your code to run
}
catch(SqlException ex)
{
    Console.WriteLine(ex.Message);
} 
// Catch all Exceptions
catch(Exception)
{
    Console.WriteLine(Message);
} 
```

# java - Java 中速记的工作原理

> ID：12261300
> 
> 赞同：-4
> 
> 时间：2012-09-04T10:13:46.627
> 
> 标签：java, shorthand

我找不到 java 速记的有效语法。

我应该如何简写这个东西：

```
 int a = 2, b=4;
        if(a < 4) {
        System.out.println("a < b");}
    else { System.out.println("a >= b");
  } 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-04T10:15:26.850

我*怀疑*你在[*条件运算符*](http://docs.oracle.com/javase/specs/jls/se7/html/jls-15.html#jls-15.25)之后：

```
System.out.println(a < b ? "a < b" : "a >= b"); 
```

如果这不是你要找的，请澄清。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-04T10:15:38.540

```
System.out.println("a"+((a<b)?"<":">=")+"b") 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-04T10:16:26.563

我能想象的“最短的手”是这样的：

```
 String s = (a < 4) ? "a<b" : "a>=b";
 System.out.println(s); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-04T10:16:55.767

```
int a = 2, b=4;
System.out.println((a < 4) ? "a < b" : "a>=b"); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-04T10:29:37.760

只是为了回答，另一种版本的速记

```
System..out.println("a " + (a < 4 ? "<" : ">=") + " b"); 
```

# windows-phone-7 - 如何在隔离存储设置中存储字符串？

> ID：12261312
> 
> 赞同：-2
> 
> 时间：2012-09-04T10:14:12.567
> 
> 标签：windows-phone-7, isolatedstorage

我有这么多城市名字。我想将这个城市存储到我的设备数据库中。而且我使用隔离存储设置，但isolatad存储只允许我添加一个城市。如何显示这个城市？

我的 C# 代码用于存储城市是：

```
if (!setting.Contains("CityDetail"))
            {

                setting.Add("CityDetail", cityname);

                //MessageBox.Show(cityname + "  is successfully added in the favorites");
            }
            else
            {
                cityname = (string)setting["CityDetail"];

                //MessageBox.Show(cityname + "  is allready added in the favorites");
            }
            //setting.Save(); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-04T13:10:39.243

看起来您正在尝试在 Phone 中保存城市列表，如果是这种情况，那么建议您应该更喜欢**Local SQL Database**或**XML**。这样你就可以在你的应用程序中拥有任何类型的**持久数据**。它可能是一个城市列表或一些复杂的对象。

要了解更多信息，请参阅： [**本地 SQL 数据库**](http://www.silverlightshow.net/items/Windows-Phone-7.1-Local-SQL-Database.aspx)和[**读取和保存 XML 文件**](http://www.windowsphonegeek.com/tips/All-about-WP7-Isolated-Storage---Read-and-Save-XML-files)。

如果您需要**将其保存**在独立存储设置中（由于某些不可避免的原因），那么您需要将`key`部分`key-value`对更改为某个**动态值**（例如 city1、city2、city3 ....）

```
setting.Add("city1", city1); 
```

稍后 **要检索**所有城市，您可以使用循环，例如

```
for(int i=0; i<totalCities ; i++)
{
 //prepare key value
String cityNumber = "city" + i;

String cityName = settings[cityNumber].ToString();
//here you get your city name Add it to a list or Array

} 
```

请注意，您需要在 Application Settings 中存储 Number of Cities 并更新它们并将它们分配给`totalCities`.

**编辑：**

将城市数量保存到应用设置（比如“totalCities”）：每次添加城市时，都会像这样更新城市数量

```
 void Update()
{    
int presentCities;

//Retrieve present number of cities
presentCities = (string)setting["totalCities"];

//Save updated valu to application setting
Add.Settings("totalCities", presentCities + 1); 

 } 
```

要检索只需使用`(int)setting["totalCities"]`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-04T12:57:16.523

隔离存储设置实际上是通用字典的实现。它包含键值对，并且集合中的所有键都必须是唯一的（就像字典一样）。我*认为*您想要存储多个城市名称。您要么必须使用多个键，

```
 setting.Add("City1", city1);
 setting.Add("City2", city2);
 setting.Add("City3", city3); 
```

或者您可以将数组存储在一个键下：

```
 setting.Add("Cities", new string[] { city1, city2, city3 }); 
```

不确定哪个更合适，因为您的问题并不完全清楚。

# android - 加载本地文件并得到 Unknown chromium 错误：-6

> ID：12261322
> 
> 赞同：6
> 
> 时间：2012-09-04T10:15:02.070
> 
> 标签：android, url, webview, local, chromium

我试图将本地文件从 sdcard 加载到 WebView 中。但自从 Android 4.1 之后它不再工作了，我总是收到消息：找不到文件并且在 LogCat 中

```
Unknown chromium error: -6. 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-04T10:43:09.913

我发现了问题，我只需要再添加一个斜线。例子：

我们现在需要：

```
loadURL("file:///.../file.file"); 
```

代替：

```
loadURL("file://.../file.file"); 
```

只需再添加一个斜线即可。我希望这对所有在 Android 4.1 下遇到相同问题的人有所帮助。

# xcode - xcode 快捷方式首选项未保存

> ID：12261327
> 
> 赞同：1
> 
> 时间：2012-09-04T10:15:17.103
> 
> 标签：xcode, xcode4.3

我的 Xcode (4.3.3) 有问题：我创建了一个新的命令集来拥有个人快捷方式。在我离开应用程序之前一切正常。

当我关闭 Xcode（通常）时，我所有的个人快捷方式都丢失了。我的新命令集仍然在这里，但快捷方式与默认命令集相同。

有人知道这种奇怪的行为吗？

谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-08-30T22:42:51.000

尝试进入关键冲突，然后将它们全部删除。我进去将它们全部删除，然后它开始保存。希望它有效。

# sql-server - 数据库表优化

> ID：12261332
> 
> 赞同：0
> 
> 时间：2012-09-04T10:15:24.513
> 
> 标签：sql-server, database

我有客户名单。大约有。该表中有 200 万条记录。该表具有以下结构：

> ID（int），FLM，电子邮件，地址，电话，BDAy；除 BDay 之外的每个 nvarchar 类型。

我在 ID 和 FLM 列上有两个非聚集索引。当我执行查询时，例如

```
SELECT * FROM tbl where FLM LIKE 'value' 
```

我遇到大约延迟。1分钟。因此问题：

*   在 FLM 上添加聚集索引会改变性能吗？
*   我还能在这里优化什么？

我如何从程序中获得结果？使用`SqlConnection`连接，然后在`SQlCommand`对象中指定查询，然后通过`DataReader`. 也许在这里我可以优化它以获得更好的结果（也许通过使用数据集）？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-04T11:44:15.707

使 ID 成为聚集索引而不是非聚集索引。仅考虑您发布的查询，FLM 列上的非聚集索引不会做任何事情，因此您可以将其删除。

希望聚集索引能提高性能。

# c# - StringBuilder 中最快的搜索方法

> ID：12261344
> 
> 赞同：14
> 
> 时间：2012-09-04T10:15:43.447
> 
> 标签：c#, .net, vb.net, performance, stringbuilder

我有一个用于存储课程`StringBuilder`名称`stb_Swap_Tabu`的名称，我正在使用以下方法查找课程：

```
stb_Swap_Tabu.ToString.Contains("CourseName") 
```

就我而言，性能是最重要的问题。有没有更快的方法？

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2012-09-04T10:52:37.800

StringBuilder 并非真正用于所有字符串目的。如果你真的需要搜索一个，你必须编写自己的方法。

有几种适合不同情况的字符串搜索算法。

下面是 Knuth–Morris–Pratt 算法的简单实现，它只关心序数匹配（没有大小写折叠，没有文化相关的排序规则，只是一个普通的代码点到代码点的匹配）。它有一些初始`Θ(m)`开销，其中`m`查找的单词的长度在哪里，然后查找到查找的单词的距离在`Θ(n)`哪里`n`，或者整个字符串生成器的长度（如果不存在）。这击败了简单的逐字符比较`Θ((n-m+1) m)`（`O()`符号描述上限，`Θ()`同时描述上限和下限）。

综上所述，听起来创建一个列表可能是完成手头任务的更好方法。

```
public static class StringBuilderSearching
{
  public static bool Contains(this StringBuilder haystack, string needle)
  {
    return haystack.IndexOf(needle) != -1;
  }
  public static int IndexOf(this StringBuilder haystack, string needle)
  {
    if(haystack == null || needle == null)
      throw new ArgumentNullException();
    if(needle.Length == 0)
      return 0;//empty strings are everywhere!
    if(needle.Length == 1)//can't beat just spinning through for it
    {
      char c = needle[0];
      for(int idx = 0; idx != haystack.Length; ++idx)
        if(haystack[idx] == c)
          return idx;
      return -1;
    }
    int m = 0;
    int i = 0;
    int[] T = KMPTable(needle);
    while(m + i < haystack.Length)
    {
      if(needle[i] == haystack[m + i])
      {
        if(i == needle.Length - 1)
          return m == needle.Length ? -1 : m;//match -1 = failure to find conventional in .NET
        ++i;
      }
      else
      {
        m = m + i - T[i];
        i = T[i] > -1 ? T[i] : 0;
      }
    }
    return -1;
  }      
  private static int[] KMPTable(string sought)
  {
    int[] table = new int[sought.Length];
    int pos = 2;
    int cnd = 0;
    table[0] = -1;
    table[1] = 0;
    while(pos < table.Length)
      if(sought[pos - 1] == sought[cnd])
        table[pos++] = ++cnd;
      else if(cnd > 0)
        cnd = table[cnd];
      else
        table[pos++] = 0;
    return table;
  }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-06-10T14:08:10.490

我知道这是一个老问题，但是当我尝试为自己的项目创建解决方案时，它出现在我的搜索结果中。我以为我需要搜索 a`StringBuilder.ToString`的方法结果，但后来我意识到我可以只调用`StringBuilder`它本身的方法。我的情况可能和你不一样，但我想分享一下：

```
Private Function valueFormatter(ByVal value As String) As String
    ' This will correct any formatting to make the value valid for a CSV format
    '
    ' 1) Any value that as a , in it then it must be wrapped in a " i.e. Hello,World -> "Hello,World"
    ' 2) In order to escape a " in the value add a " i.e. Hello"World -> Hello""World
    ' 3) if the value has a " in it then it must also be wrapped in a " i.e. "Hello World" -> ""Hello World"" -> """Hello World"""
    ' 
    ' VB NOTATAION 
    ' " -> """"
    ' "" -> """"""

    If value.Contains(",") Or value.Contains("""") Then
        Dim sb As New StringBuilder(value)
        If value.Contains("""") Then sb.Replace("""", """""")
        sb.Insert(0, """").Append("""")
        Return sb.ToString
    Else
        Return value
    End If
End Function 
```

# ios - 如何在不更改数据源的情况下设置要在 UITableView 中显示的最小行数？

> ID：12261351
> 
> 赞同：0
> 
> 时间：2012-09-04T10:16:06.357
> 
> 标签：ios, uitableview

如何在不更改数据源的情况下设置要在 UITableView 中显示的最小行数？

换句话说，我宁愿不向数据数组添加空对象，以显示空行。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-04T10:32:25.297

在您的*tableView:numberOfRowsInSection:*数据源方法中，您可能会返回更多的行数。以下代码假设您的数据源是一个数组。

```
- (NSInteger)tableView:(UITableView *)tableView numberOfRowsInSection:(NSInteger)section
{   
    int amountOfEmptyRows = 3;
    return [yourDataArray count] + amountOfEmptyRows;
} 
```

但请确保您没有越界访问数组索引，因为在这种情况下，其他表视图委托和数据源方法将要求超出您的数据数组长度的 indexPath.row。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-04T11:17:57.270

维护两个数组并像这样检查

```
 - (NSInteger)tableView:(UITableView *)tableView numberOfRowsInSection:(NSInteger)section
 {   
    if([yourDataArray count]>3 )

     return [yourDataArray count];
    else
       return [demoArray count];
 } 
```

在这里你必须维护另一个数组，每当数据数组小于 3 时使用 demoArray 以便数据源 yourDataArray 不受干扰

也遵循以下方法

```
 - (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:
          (NSIndexPath *)indexPath 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-04T11:34:00.837

您没有指定的正是“空”单元格所在的位置 - 在数组的末尾或与“完整”单元格混合。假设您的 dataSource 告诉表格您希望显示 100 个单元格，但支持这些单元格的数据缺少随机数据位，我的建议是将“空”单元格的高度设置为零，并且当数据进入您的容器时仅重新加载现在有数据的单元格。

# rest - 从数据库添加 RESTful Web 服务

> ID：12261353
> 
> 赞同：0
> 
> 时间：2012-09-04T10:16:13.837
> 
> 标签：rest, jpa, netbeans

有时，当我在 NetBeans 的 Web 应用程序项目中从数据库中添加 RESTful Web 服务时，没有创建 JPA 控制器和 REST Facade，只添加了实体类。你知道可能是什么原因吗？

@EDIT：我刚刚发现那里出现了一些异常：

```
java.lang.NullPointerException
    at org.netbeans.modules.websvc.rest.codegen.EntityResourcesGenerator.generate(EntityResourcesGenerator.java:175)
[catch] at org.netbeans.modules.websvc.rest.wizard.EntityResourcesIterator$1.run(EntityResourcesIterator.java:130)
    at org.openide.util.RequestProcessor$Task.run(RequestProcessor.java:1411)
    at org.openide.util.RequestProcessor$Processor.run(RequestProcessor.java:1991) 
```

@编辑2：

我正在逐表映射，因为数据库非常大，当我尝试一次添加所有内容时出现问题并且没有创建 REST Facades。因此，当我从未与其他人连接的表中创建新的 REST 服务时 - 一切正常。但是当表与我之前添加的其他表连接并且需要更新时 - 仅创建实体类，没有 REST Facade。

# mysql - 用年月代替月年

> ID：12261361
> 
> 赞同：0
> 
> 时间：2012-09-04T10:16:31.547
> 
> 标签：mysql, notepad++

我有一个包含大约 800 行的 mySQL 数据库，其中包含标题

后月年

例如：2012 年 9 月后

这在对数据输出进行排序时会导致问题，如果数据是：

后年月

我找到了可以导出 mysql 数据库并使用 Notepad++ 将 mm-yy 更改为 yy-mm 的主题，但这些都是数字。

在 mysql notepad++ 或其他工具中是否有一个选项可以将月年批量更改为年月？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-04T10:36:10.800

您可以分两步执行此操作，首先创建使用以下语句拆分字符串的函数::: 我从[http://blog.fedecarg.com/2009/02/22/mysql-split-string-function/得到这个语句](http://blog.fedecarg.com/2009/02/22/mysql-split-string-function/)

```
CREATE FUNCTION SPLIT_STR(
  x VARCHAR(255),
  delim VARCHAR(12),
  pos INT
)
RETURNS VARCHAR(255)
RETURN REPLACE(SUBSTRING(SUBSTRING_INDEX(x, delim, pos),
       LENGTH(SUBSTRING_INDEX(x, delim, pos -1)) + 1),
       delim, ''); 
```

现在假设您的表名是 test 并且保存数据的字段是日期，您可以运行以下查询 :::

```
UPDATE test SET dates = CONCAT('POST ', (SELECT SPLIT_STR(dates, ' ', 3)), ' ', (SELECT SPLIT_STR(dates, ' ', 2))); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-04T10:23:00.850

创建一个正则表达式并替换所有出现的地方。如果您愿意，可以在 Notepad++ 中执行此操作。像这样：

寻找：`Post (\w+) (\d{4})`

代替：`Post \2 \1`

编辑：另一种选择是在排序时为这些字段创建一个自定义比较器，这样您就可以保持当前数据不变。

# javascript - 无法使用 FB.getLoginStatus 获取登录状态

> ID：12261363
> 
> 赞同：2
> 
> 时间：2012-09-04T10:16:34.500
> 
> 标签：javascript, facebook, facebook-javascript-sdk

我无法让它工作，我已经尝试了我在网上找到的所有解决方案。有人可以调查一下，让我知道我做错了什么。

```
$(document).ready(function(){
      window.fbAsyncInit = function() {
           FB.init({
                appId: 'xxxxxxx',
                cookie: true,
                xfbml: true,
                oauth: true
           });
           FB.Event.subscribe('auth.login', function(response) {
                window.location.reload();
           });
           FB.Event.subscribe('auth.logout', function(response) {
                window.location.reload();
           });
      };
      (function() {
           var e = document.createElement('script'); e.async = true;
           e.src = document.location.protocol +
           '//connect.facebook.net/en_US/all.js';
           document.getElementById('fb-root').appendChild(e);
      }());

      $("#fb_login_status_check").click(function(){
           FB.getLoginStatus(function(response) {
                           console.log(response);
                if (response.status === 'connected') {
                     // the user is logged in and has authenticated your
                     // app, and response.authResponse supplies
                     // the user's ID, a valid access token, a signed
                     // request, and the time the access token 
                     // and signed request each expire
                     var uid = response.authResponse.userID;
                     var accessToken = response.authResponse.accessToken;
                     console.log('User logged in and autenticated');
                  } else if (response.status === 'not_authorized') {
                     // the user is logged in to Facebook, 
                     // but has not authenticated your app
                     console.log('User logged in, but not autorized');
                  } else {
                     // the user isn't logged in to Facebook.
                     console.log('User not logged in');
                  }
           }, true);

      })

      $("#fb_logout_button").click(function() {
           if(FB.logout(function(response) {
                console.log('User logout.');
           })){
                console.log('User  logout.');
           }else{
           console.log('User didnt logout.');
           }
      });

      $("#fb_login_button").click(function() {
           FB.login(function(response) {
                if (response.authResponse) {
                     console.log('Welcome!  Fetching your information.... ');
                     FB.api('/me', function(response) {
                     console.log('Good to see you, ' + response.name + '.');
                     });
                }else{
                     console.log('User cancelled login or did not fully authorize.');
                }
           }, 
           { 
                scope: 'email,user_likes'
           }); 
      });

      }); 
```

调用函数后我得到的响应是

```
authResponse null
status "unknown" 
```

用户已登录，我可以使用 php sdk 获取所有信息。请帮忙，我正在努力在过去 2 天里完成这项工作......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-04T10:23:27.427

你应该首先初始化这个：

```
(function() {`   
        var e = document.createElement('script');
        e.async = true;
        e.src = document.location.protocol + '//connect.facebook.net/en_US/all.js';   
        document.getElementById('fb-root').appendChild(e);
}()); 
```

这是使用这些 FB 功能所需的 facebook Javascript SDK。不要忘记页面上的“fb-root”元素！只需`<div id='fb-root'></div>`在`<body>`标签后添加即可。

# jasper-reports - Jasper Reports：评估时间为“报告”时，文本字段消失

> ID：12261364
> 
> 赞同：5
> 
> 时间：2012-09-04T10:16:40.460
> 
> 标签：jasper-reports

我有一个使用以下行在页脚中显示“Y 页 X”的报告：

```
<textField isStretchWithOverflow="true">
    <reportElement x="432" y="21" width="95" height="10" forecolor="#000000"/>
    <textElement textAlignment="Right">
        <font size="8"/>
    </textElement>
    <textFieldExpression><![CDATA[
        $R{Report.Footer.Label.Page} + " " + $V{PAGE_NUMBER}
    ]]></textFieldExpression>
</textField>
<textField isStretchWithOverflow="true" evaluationTime="Report">
    <reportElement x="527" y="21" width="20" height="10" forecolor="#000000"/>
        <textElement textAlignment="Right">
        <font size="8"/>
    </textElement>
    <textFieldExpression><![CDATA[$V{PAGE_NUMBER}]]></textFieldExpression>
</textField> 
```

在我们的测试环境中，一切正常。页码显示正确。

在客户环境中，事情很奇怪。不显示第二个文本字段。但是当我将第二个字段的评估类型更改为“现在”时，它会显示出来。

您知道什么可能导致我们和客户环境中的行为不同吗？您是否有任何提示，或者您是否知道有关呈现具有评估类型 Now 和 Report 的字段的任何详细信息，这可以帮助我解决问题？

我正在使用 Jasper 报告 4.1.2。

**编辑：** 即使变量被删除并且我使用

```
<textFieldExpression><![CDATA["T"]]></textFieldExpression> 
```

行为保持不变。使用评估时间 =“报告”，第二个文本字段不显示。有了“现在”。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-05T14:43:51.363

我终于找到了解决方案：

问题在于，在客户环境中，字段必须伸展，因为客户系统似乎使用了与我们系统不同的字体。在我们的环境中他们没有，在 JasperReports Ultimate Guide 中有以下关于拉伸行为的部分：

> 具有延迟评估的文本字段不会拉伸以获取所有表达式的内容。这是因为文本元素高度是在生成报告部分时计算的，即使引擎稍后返回文本字段的文本内容，元素高度也不会适应，因为这会破坏已经创建的布局。

因此，字段在评估类型的客户环境中消失！=“现在”，因为在这种情况下它们不会伸展。增加字段的高度有所帮助，但我认为从长远来看，我们将不得不更改字体设置以在我们的测试环境中具有相同的条件。

# perl - 调用函数的简短语法（如果已定义）

> ID：12261365
> 
> 赞同：4
> 
> 时间：2012-09-04T10:16:42.817
> 
> 标签：perl, function, shortcode, defined

是否有更短的语法或运算符

```
defined $functionpointer ? $functionpointer->($value) : $value 
```

我想要像`//`-Operator这样的东西，这样我就可以很快写

```
$functionpointer //->() $value 
```

或者那个方向的任何东西

我**不想**做的是写一个额外的方法，重载运算符等等

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-04T10:20:15.730

不，没有。不过，有关于引入它的讨论：在[PerlMonks，p5p 应该使用什么运算符来安全解除引用](http://www.perlmonks.org/?node_id=973015)。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-04T10:25:31.503

您可以将 替换为`$functionpointer`返回默认值的匿名常量函数，如下所示（在 5.12.1 中测试）：

```
($functionpointer // sub {$default})->(@args) 
```

这有点骇人听闻，但它确实有效。:)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-04T13:36:42.877

我认为与大多数语言相比，它已经相当简洁了。我不明白您希望通过使其更不清晰来实现什么

我会做的一件事是删除`defined`, 离开

```
$functionpointer ? $functionpointer->($value) : $value 
```

好像`$functionpointer`已定义并且是有效的子例程引用，它将始终为真

# wpf - 如何从数据库中填充 Treeview 填充

> ID：12261366
> 
> 赞同：0
> 
> 时间：2012-09-04T10:16:43.997
> 
> 标签：wpf, treeview

我想使用树视图作为主菜单。我想在 WPF 和 MVVM 中填充树视图，该表具有类似 abc.xaml 的路径，并且当用户单击该页面/窗口时将打开

如果有任何错误请忽略我是新人

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-05T10:25:53.073

最好的方法是为节点创建视图模型，并使用[HierarchicalDataTemplate](http://msdn.microsoft.com/en-us/library/system.windows.hierarchicaldatatemplate.aspx)创建视图

这个[MSDN](http://msdn.microsoft.com/en-us/library/system.windows.hierarchicaldatatemplate.aspx)示例正是您正在寻找的

```
<Window x:Class="SDKSample.Window1"
  xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
  xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
  Title="HierarchicalDataTemplate Sample"
  xmlns:src="clr-namespace:SDKSample">
  <DockPanel>
    <DockPanel.Resources>
      <src:ListLeagueList x:Key="MyList"/>

      <HierarchicalDataTemplate DataType    = "{x:Type src:League}"
                                ItemsSource = "{Binding Path=Divisions}">
        <TextBlock Text="{Binding Path=Name}"/>
      </HierarchicalDataTemplate>

      <HierarchicalDataTemplate DataType    = "{x:Type src:Division}"
                                ItemsSource = "{Binding Path=Teams}">
        <TextBlock Text="{Binding Path=Name}"/>
      </HierarchicalDataTemplate>

      <DataTemplate DataType="{x:Type src:Team}">
        <TextBlock Text="{Binding Path=Name}"/>
      </DataTemplate>
    </DockPanel.Resources>

    <Menu Name="menu1" DockPanel.Dock="Top" Margin="10,10,10,10">
        <MenuItem Header="My Soccer Leagues"
                  ItemsSource="{Binding Source={StaticResource MyList}}" />
    </Menu>

    <TreeView>
      <TreeViewItem ItemsSource="{Binding Source={StaticResource MyList}}" Header="My Soccer Leagues" />
    </TreeView>

  </DockPanel>
</Window> 
```

# java - 当客户端停止工作时，JMS 有 javax.jms.InvalidDestinationException

> ID：12261372
> 
> 赞同：2
> 
> 时间：2012-09-04T10:17:04.997
> 
> 标签：java, exception, jms, spring-jms

我使用 JMS 将请求从客户端发送到服务器。

我的客户端向服务器发送请求。当服务器处理我的请求时，我的客户端在服务器完成之前停止（网络问题）。

当服务器完成后，它会返回给客户端，但服务器看不到向服务器发送请求的客户端，此时服务器将在日志文件中返回异常。

例外是：

```
javax.jms.InvalidDestinationException: Cannot publish to a deleted Destination: temp-queue://ID:PC0092-49463-1344231871819-0:0:9 [^] 
```

我的问题是：在这种情况下我需要做什么？我可以捕获或禁用此异常吗？我该怎么做？

（对不起，如果我的英语不好。）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-05T09:37:04.430

现在我可以解决这个问题了。在 brokerURL 中，我添加了属性`jms.watchTopicAdvisories=false`。使用此属性禁用咨询监视器。

# iphone - drawInRect 错误：CGContextSetFont：无效的上下文 0x0

> ID：12261375
> 
> 赞同：3
> 
> 时间：2012-09-04T10:17:18.040
> 
> 标签：iphone, ios, cocoa-touch, grand-central-dispatch

我在 UIVIew 中绘制了一些文本`drawRect:`。首先我计算文本高度，然后`drawInRect:`。下面的代码有效：

```
- (void)drawRect:(CGRect)rect
{
    CGFloat titleHeight = [self heightForText:_entry.title
                                     withFont:[UIFont systemFontOfSize:12.0f]];

    CGRect r = CGRectMake(54, 6, kCellTextWidth, titleHeight);
    [_entry.title drawInRect:r withFont:[UIFont titleFont]];
} 
```

`dispatch_async`然后我用main_queue中的drawInRect计算文本高度，它失败了：

```
- (void)drawRect:(CGRect)rect
{
    dispatch_async(dispatch_get_global_queue(DISPATCH_QUEUE_PRIORITY_DEFAULT, 0), ^{
        CGFloat titleHeight = [self heightForText:_entry.title
                                         withFont:[UIFont systemFontOfSize:12.0f]];

        dispatch_async(dispatch_get_main_queue(), ^{
            CGRect r = CGRectMake(54, 6, kCellTextWidth, titleHeight);
            [_entry.title drawInRect:r withFont:[UIFont titleFont]];
        });
    });
} 
```

错误：

```
 <Error>: CGContextSetFont: invalid context 0x0
 <Error>: CGContextSetTextMatrix: invalid context 0x0
 <Error>: CGContextSetFontSize: invalid context 0x0
 <Error>: CGContextSetTextPosition: invalid context 0x0
 <Error>: CGContextShowGlyphsWithAdvances: invalid context 0x0 
```

错误是什么意思？**如何计算另一个线程中的文本高度以提高速度？**

谢谢你。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-04T10:21:45.767

您可以从辅助线程使用 CoreGraphics 和 CoreText API。

只有很少的 UIKit API 可以安全地从辅助线程调用。作为一般规则，UIKit API 仅适用于主线程。

该错误意味着`NULL`上下文正在传递给 CG-API。辅助线程默认情况下不会创建一个 - 您必须创建自己的渲染上下文和目标以在辅助线程上进行渲染。UIKit 调用只是抓取线程上下文堆栈上的顶部上下文——上下文堆栈不存在于辅助线程上，或者在此上下文中。

至于速度——很难相信一个标签会导致如此明显的减速。也许更多的上下文会有所帮助。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-27T08:41:48.737

我有类似的问题，并用`UIGraphicsPushContext(context)/UIGraphicsPopContext(context)`绘图代码解决了它。上下文是用

```
CGColorSpaceRef space = CGColorSpaceCreateDeviceRGB(); CGContextRef context = CGBitmapContextCreate(NULL, width, height, 8, 0, space, kCGImageAlphaPremultipliedLast); 
```

# actionscript-3 - AS3 阵列中的图像

> ID：12261379
> 
> 赞同：1
> 
> 时间：2012-09-04T10:17:36.213
> 
> 标签：actionscript-3

如何将以下图像放入数组中，以便我可以将它们称为 myBlock[1]、myBlock[2] 等

```
var myBlock1:Block = new Block();
var myBlock2:Block = new Block();
var myBlock3:Block = new Block(); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-04T10:21:43.980

```
var myBlock:Array = new Array(
    new Block(),
    new Block(),
    new Block()
); 
```

有关更多数组内容，请参阅[本教程](http://www.republicofcode.com/tutorials/flash/as3arrays/)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-04T13:13:28.730

或者在一个不错的循环中：

```
var blocks:Array = [];
var n:int = 100; // I want a hundred blocks please

for(var i:int = 0; i < n; i++)
{
    var block:Block = new Block();
    block.id = i; // my block class has an id 
    blocks.push(block);
{

// I want block 42 - (or 41 as its 0 based to be pedantic)
trace(blocks[41].id); // my block has id of 42 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-04T12:51:12.550

你可以像这样使用它。

```
var myBlock:Array = new Array();
myBlock.push(myBlock1, myBlock2, myBlock3); 
```

# iphone - 获取覆盖的 UIImageview 图像的框架 - iOS

> ID：12261380
> 
> 赞同：0
> 
> 时间：2012-09-04T10:17:38.320
> 
> 标签：iphone, ipad, object, uiimage, core-graphics

我有一张图像有一些透明区域，我想忽略该区域。

并以最大的可能性获得那个有盖的框架..

在这里我上传了一张图片，所以你知道我在问什么。

![在此处输入图像描述](../Images/85f3cc707392cece692ffaa4357151ff.png)

我已经使用了一些逻辑和函数来评估这个框架，但我仍然不能准确的框架。

我想要动态代码，所以我可以改变这种图像。

在这里，我附上了我使用过的示例代码。

```
-(CGRect)getImageRect:(UIImage *)image{

    int x1,y1,x2,y2;
    BOOL flag=NO;
    CGFloat red,green,blue,alpha;

    UIColor *color=nil;

    // Get starting position y1
    flag=NO;
    for (int y=0; y<image.size.height; y++) {
        for (int x=0; x<image.size.width; x++) {
            // Get pixel color for
            color=[self getPixelColor:image withX:x withY:y];

            [color getRed:&red green:&green blue:&blue alpha:&alpha];

            if (red==0 && green==0 && blue==0 && alpha==0){
                continue;
            }else{
                y1=y;
                flag=YES;
                break;
            }
        }
        if (flag) {
            break;
        }
    }

    // Get starting position x1
    flag=NO;
    for (int x=0; x<image.size.width; x++) {

        for (int y=0; y<image.size.height; y++) {
            // Get pixel color for
            color=[self getPixelColor:image withX:x withY:y];

            [color getRed:&red green:&green blue:&blue alpha:&alpha];

            if (red==0 && green==0 && blue==0 && alpha==0) {
                continue;
            }else {
                x1=x;
                flag=YES;
                break;
            }
        }
        if (flag) {
            break;
        }
    }

    // Get last position y2
    flag=NO;
    for (int y=image.size.height; y>=0; y--) {

        for (int x=image.size.width; x>=0; x--) {
            // Get pixel color for
            color=[self getPixelColor:image withX:x withY:y];

            [color getRed:&red green:&green blue:&blue alpha:&alpha];

            if (red==0 && green==0 && blue==0 && alpha==0) {
                continue;
            }
            else {
                y2=y;
                flag=YES;
                break;
            }
        }
        if (flag) {
            break;
        }
    }

    // Get last position x2
    flag=NO;
    for (int x=image.size.width; x>=0; x--) {

        for (int y=image.size.height; y>=0; y--) {
            // Get pixel color for
            color=[self getPixelColor:image withX:x withY:y];

            [color getRed:&red green:&green blue:&blue alpha:&alpha];

            if (red==0 && green==0 && blue==0 && alpha==0) {
                continue;
            }
            else {
                x2=x;
                flag=YES;
                break;
            }
        }
        if (flag) {
            break;
        }
    }

    return CGRectMake(x1, y1, x2-x1, y2-y1);
}
- (UIColor *)getPixelColor:(UIImage *)image withX:(int)x withY:(int)y {

    CFDataRef pixelData = CGDataProviderCopyData(CGImageGetDataProvider(image.CGImage));
    const UInt8* data = CFDataGetBytePtr(pixelData);

    int pixelInfo = ((image.size.width  * y) + x ) * 4; // The image is png

    UInt8 red = data[pixelInfo];         // Get red info
    UInt8 green = data[(pixelInfo + 1)]; // Get red info
    UInt8 blue = data[pixelInfo + 2];    // Get red info
    UInt8 alpha = data[pixelInfo + 3];   // I need only this info for my maze game
    CFRelease(pixelData);

    UIColor* color = [UIColor colorWithRed:red/255.0f green:green/255.0f blue:blue/255.0f alpha:alpha/255.0f]; // The pixel color info

    return color;
} 
```

请发表您的有用评论并回答以缩短此内容

/------------ 已编辑

我需要被橙色覆盖的框架。我画了橙色只是为了理解我的问题。它不是必需的。

问候，

# php - 禁用激活 WordPress 插件时出现的消息

> ID：12261385
> 
> 赞同：3
> 
> 时间：2012-09-04T10:18:06.273
> 
> 标签：php, wordpress

当用户的 PHP 版本不足时，我使用下面的代码来停用插件本身。一个问题是出现黄色消息框，说明该插件已激活，尽管此功能已成功拒绝该插件。那么有没有办法不显示黄色消息？

```
function Plugin_Requirements() {
    global $wp_version;
    $plugin = plugin_basename( __FILE__ );
    $plugin_data = get_plugin_data( __FILE__, false );
    $numPHPver='5.1.2';     
    $strMsg .= $plugin_data['Name'] . ': ' . __('requires PHP')  . ' ' . $numPHPver . __(' or higher. Your PHP version is : ') . phpversion() . __('. Deactivating the plugin.') . '<br />';

    if ( version_compare(phpversion(), $numPHPver, "<" ) ) {
        echo '<div class="error"><p>' . $strMsg . '</p></div>';
        deactivate_plugins( $plugin );
    }   
}
add_action( 'admin_init', 'Plugin_Requirements' ); 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-09T21:06:46.620

您可以取消设置`$_GET`触发消息的变量：

```
if ( version_compare(phpversion(), $numPHPver, "<" ) ) {
    echo '<div class="error"><p>' . $strMsg . '</p></div>';
    deactivate_plugins( $plugin );
    unset($_GET['activate']);
} 
```

我认为更好的方法是不允许您的插件被激活，方法是退出（或抛出错误）它的激活钩子。Wordpress 将显示一条错误消息，说明由于致命错误而无法激活插件，但这在这里似乎很合适。

```
function my_activation_hook() {
    $required_php_version = '5.1.2';

    if (version_compare(PHP_VERSION, $required_php_version, '<')) { 
        $plugin_data = get_plugin_data(__FILE__, false);
        $message = $plugin_data['Name'] . ' ' . __('requires PHP')  . ' ' . $required_php_version . __(' or higher. Your PHP version is ') . phpversion() . '.';
        echo "<p>{$message}</p>";
        exit;
    } 
} 
register_activation_hook(__FILE__, 'my_activation_hook'); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2017-02-22T18:03:19.800

做到这一点有点棘手。RichardM 的答案非常接近，但这是我发现的作品，没有显示致命错误或必须使用`wp_die()`. 诀窍是在检查插件的要求`register_activation_hook()` **后调用。**如果您不这样做，那么 WordPress 会愉快地激活插件并生成“已激活插件”。在您检查您的要求之前发送消息。

我也喜欢在我的消息中使用瞬变，这样我就可以随时显示我的错误消息。当您需要与用户交流多条消息时，它会更有用。

示例代码：

```
<?php
/**
 * Plugin Name: My Plugin
 * Description: A sample plugin activation call without generating "Plugin activated."
 *     message if requirements aren't met.
 * Author: Slicktrick
 * Version: 1.0.0
 * Requires at least: 4.0
 */

add_action( 'admin_init', 'check_requirements_for_my_plugin' );
add_action( 'admin_notices', 'show_notices_for_my_plugin' );

function check_requirements_for_my_plugin() {
    // Check that we are using PHP 5.1.2 or greater.
    // Modify this to use whatever checks you need.
    $phpversion = '5.1.2';
    if ( version_compare(phpversion(), $phpversion, "<" ) ) {
        // deactivate and remove flag to activate plugin
        deactivate_plugins( plugin_basename( __FILE__ ) );
        if ( isset( $_GET['activate'] ) ) {
            unset( $_GET['activate'] );
        }

        // Create an error message and store it as a transient
        // Transient is set to automatically expire after 120 seconds
        // This prevents the message from lingering indefinitely
        $error_message = "PHP version $phpversion required. My Plugin was not activated.";
        set_transient( 'my_plugin_activation_error_message', $error_message, 120 );
    } else {
        // Here's the trick, we register our activation hook
        // now that we know the requirements are met!
        register_activation_hook( __FILE__, 'activate_my_plugin' );
    }
}

function show_notices_for_my_plugin() {
    // We attempt to fetch our transient that we stored earlier.
    // If the transient has expired, we'll get back a boolean false
    $message = get_transient( 'my_plugin_activation_error_message' );

    if ( ! empty( $message ) ) {
        echo "<div class='notice notice-error is-dismissible'>
            <p>$message</p>
        </div>";
    }
}

function activate_my_plugin() {
    // Add activation code here
}

// Add the rest of your plugin code here 
```

该`check_requirements_for_my_plugin()`函数将在每次`admin_init`执行时运行。虽然一旦插件被激活，这可能看起来像是一个多余的检查，但想想如果有人更改托管服务提供商或移动到不同的服务器会发生什么。新的服务器环境可能不支持您的插件，如果 WordPress 数据库被直接复制（很可能），用户最终可能会遇到各种错误和功能损坏。`check_requirements_for_my_plugin()`所以每次调用我们的函数是必要的。

如果您不想在插件无法激活时向用户显示任何消息（**为什么要让用户对插件未激活的原因一无所知？？？**），那么您可以删除以下内容三行代码加上整个`show_notices_for_my_plugin()`函数：

```
// at the top of the file
add_action( 'admin_notices', 'show_notices_for_my_plugin' );

// from the check_requirements_for_my_plugin() function
$error_message = "PHP version $phpversion required. My Plugin was not activated.";
set_transient( 'my_plugin_activation_error_message', $message, 120 ); 
```

参考：

1.  [WordPress Codex - 管理员通知](https://codex.wordpress.org/Plugin_API/Action_Reference/admin_notices)
2.  [WordPress Codex - 瞬态 API](https://codex.wordpress.org/Transients_API)

# 更新

根据这个[答案](https://wordpress.stackexchange.com/questions/32177/displaying-a-message-when-plug-in-is-deactivated#answer-32199 "插件停用时显示消息")和来自 WordPress Lead Developer 的[评论](https://core.trac.wordpress.org/ticket/14170#comment:68 "激活钩子很蹩脚")，似乎更好的方法是让你的插件保持激活状态，但禁用所有功能。一旦满足要求，您就可以使用其他检查来执行您需要执行的任何安装任务。这可以通过以下示例代码轻松完成：

```
add_action( 'plugins_loaded', 'check_requirements_for_my_plugin' );

function check_requirements_for_my_plugin() {
    // Do whatever checking needed here
    if ( ! $requirements_met ) {
        add_action( 'admin_notices', 'show_requirements_notice_for_my_plugin' );
        return; // Exit your function
    }
    // Register all other hooks here since you know requirements are
    // met if you reach this point
    add_action( 'admin_init', 'maybe_update_my_plugin' );
}

function show_requirements_notice_for_my_plugin() {
    // I'd expand this to add a list of needed requirements
    echo '<div class="notice notice-error">'
        . "My-Plugin functionality is disabled because the requirements are not met."
        . '</div>';
}

function maybe_update_my_plugin() {
    // Check to see if update/installation tasks need to be performed
} 
```

此方法允许您将通知保留在用户面前，以便他们对其采取行动。当他们尝试激活插件时，我的原始答案会显示一条通知，但是一旦加载新页面，通知就会消失，因为此时插件不再处于活动状态。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-04T11:20:34.217

```
function _my_plugin_php_warning() {
    echo '<div id="message" class="error">';
    echo '  <p>My Plugin requires at least PHP 5\.  Your system is running version ' . PHP_VERSION . ', which is not compatible!</p>';
    echo '</div>';
}

function deactivate_plugin_conditional() {

    if ( version_compare( PHP_VERSION, '5.2', '<' ) ) {
        $plugin = plugin_basename(__FILE__);

        if ( is_plugin_active($plugin) ) {
            deactivate_plugins($plugin);    
        }   
        add_action('admin_notices', '_my_plugin_php_warning');

    } else {
        //Load classes
    }
}

add_action( 'admin_init', 'deactivate_plugin_conditional' ); 
```

这只会在没有发生错误时激活插件。如果插件已经激活，它将被禁用。希望这对你有用。请让我知道结果如何。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-07-26T05:54:21.450

[`get_plugin_data()`](http://codex.wordpress.org/Function_Reference/get_plugin_data)

该功能仅适用于 WordPress 管理员，而不是使用 get_plugin_data() 您可以在插件中为插件名称和插件版本定义常量，请查看此线程 [http://wordpress.org/support/topic/php-fatal-错误调用未定义函数-get_plugin_data](http://wordpress.org/support/topic/php-fatal-error-call-to-undefined-function-get_plugin_data)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-07-26T06:07:05.240

如果您根本不想显示该消息，请转到 php 页面并在页面顶部的开始 php 标记之后立即添加 error_reporting(0)。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2020-12-17T23:20:22.033

我有一个类似的问题，涉及`register_activation_hook()`全局变量 $wp_version: 每次激活或停用我的插件时，我都会在*debug.log*文件中收到以下消息：

> PHP 注意：未定义变量：wp_version (...)

当我将 $wp_version 替换为`get_bloginfo('version')`

* * *

## 回答 #7

> 赞同：-2
> 
> 时间：2012-09-24T11:15:09.103

目前似乎不可能将其作为插件的一部分。

# ruby - & 的反转：在 Ruby 中

> ID：12261388
> 
> 赞同：0
> 
> 时间：2012-09-04T10:18:15.500
> 
> 标签：ruby

在Ruby中，我以这种方式通过键名选择一些哈希值

```
new_values = my_hash.values_at(:value2, :value3, :value6, :value8).select {|a| !a.empty?} 
```

那这个呢？它不工作。

```
new_values = my_hash.values_at(:value2, :value3, :value6, :value8).select(&:!empty?) 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-04T10:30:35.493

正如 Sergio 解释的那样，标准 Ruby 无法做到这一点，因为您使用的表达式不会解析。一个人可以一起破解一些东西，所以它可以工作（当然`reject`是这里的方法）：

```
['1', '', '11', ''].select(&fn(:empty?, :!))
#=> ["1", "11"] 
```

这是`fn`我的[扩展库](http://rubydoc.info/gems/shenanigans)中使用的实现：

```
def fn(*funs)
  -> x do
    funs.inject(x) do |v,f|
      Proc === f ? f.call(v) : v.send(f)
    end
  end
end 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-04T10:20:58.840

它不起作用，因为没有带有 name 的方法`!empty?`。这个名字在红宝石中是非法的，AFAIK。您要么必须使用完整的 lambda 形式（如在您的第一个片段中）或使用[`reject`](http://ruby-doc.org/core-1.9.3/Enumerable.html#method-i-reject)

```
['1', '', '11', ''].select(&:empty?) # => ["", ""]
['1', '', '11', ''].reject(&:empty?) # => ["1", "11"] 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-04T13:54:21.800

谈论替代品：

```
Not = 
  lambda do |x|
    p = x.to_proc 
    lambda do |*ys|
      !p[*ys]
    end
  end

['1', '', '11', ''].select(&Not[:empty?]) 
```

可以很容易地扩展到更有趣的情况，如组合、扇出。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-04T10:44:46.003

的逆方法`empty?`是`any?`。有了它，你可以通过使用来实现你的目标

```
new_values = my_hash.values_at(:value2, :value3, :value6, :value8).select(&:any?) 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-06-03T08:49:53.617

本着我[在这里](https://stackoverflow.com/questions/23695653/can-you-supply-arguments-to-the-mapmethod-syntax-in-ruby)回答的精神：

```
class Symbol
  def on
    ->(*args) { yield(*args).send(self) }
  end
end

['1', '', '11', ''].select(&:!.on(&:empty?))
# => ["1", "11"] 
```

# python - python中的无限while循环

> ID：12261393
> 
> 赞同：1
> 
> 时间：2012-09-04T10:18:34.887
> 
> 标签：python, while-loop, infinite-loop

无论我做什么，我都无法让这个 while 循环工作；除非我硬编码值。

```
count = 0
value = raw_input('How many?')
print value
while (count <= value):
        print "a"
        count= count + 1 
```

起初我尝试使用命令行参数，使用 sys.argv[1] 作为值，但我遇到了同样的问题。这看起来很简单，但我一生都无法弄清楚我做错了什么。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-09-04T10:20:11.197

确保值是整数，

```
while (count <= int(value)):
    count= count + 1 
```

默认情况下是一个字符串，并且对于我们拥有`raw_input`的每个整数`n`和每个字符串（！），因此您的循环（没有）永远不会中断。`s``n<s is True``int`

*注意：在 Python 3 中，比较字符串和整数会给出一个`TypeError: unorderable types: str() < int()`，这可能是更“预期”的行为。*

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-04T10:21:33.590

首先将输入转换为整数

```
value = int(raw_input('How many?'))
print value 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-04T10:51:56.947

By the way, if you really want to get your statement to be `value` times printed change condition from

```
count <= int(value) 
```

to

```
count < int(value) 
```

or start `count` from 1

# php - 从 HTML 中提取值

> ID：12261395
> 
> 赞同：0
> 
> 时间：2012-09-04T10:18:46.700
> 
> 标签：php, regex, preg-match-all

> **可能重复：**
> [如何使用 PHP 解析和处理 HTML？](https://stackoverflow.com/questions/3577641/how-to-parse-and-process-html-with-php)

我正在尝试从一些 html 中提取值。这是我试图从中获取值的 HTML 文档的一部分。

```
 <input type="hidden" id="first"
        value='&euro;218.33' />
    <input type="hidden" id="second"
        value='&euro;291.08' />
    <input type="hidden" id="third"
        value='&euro;344.77' /> 
```

我使用了以下 preg match all 命令，其中 $buffer 包含我正在搜索的页面的整个 html。

```
if (preg_match_all('/<input type="hidden" id="(.+?)" value=\'&euro;(.+?)\'/', $buffer, $matches))
{
   echo "FOUND";
   echo  $matches[2][0] . " " . $matches[2][1] . " " . $matches[2][2] . "\n";
} 
```

此 preg match 命令未找到任何匹配项。有什么建议么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-04T10:23:16.857

一个非常简单的解决方案是使用`PHP Simple HTML DOM Parser` [str_get_html](http://simplehtmldom.sourceforge.net/)

HTML 示例

```
include "simple_html_dom.php" ;

$html =" <input type=\"hidden\" id=\"first\"
    value='&euro;218.33' />
<input type=\"hidden\" id=\"second\"
    value='&euro;291.08' />
<input type=\"hidden\" id=\"third\"
    value='&euro;344.77' />"; 
```

用法

```
$html = str_get_html($html);
foreach($html->find('input') as $element)
    echo $element->value . '\n'; 
```

输出

```
€218.33
€291.08
€344.77 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-04T10:29:49.993

这个正则表达式没有返回任何东西，因为在 id 和 value 之间有多个空格......

```
preg_match_all('/<input type="hidden" id="(.+?)"[.\s\t\r\n\v\f]*?value=\'&euro;(.+?)\'/', $buffer, $matches) 
```

注意 [.\s\t\r\n\v\f]*? 就在价值=之前。这将在 id 的关闭 " 之后和 value=" 之前使用任何字符。这样，空格、制表符、换行符等不会破坏您的表达。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-04T10:29:46.347

关于什么

```
if (preg_match_all('/<input type="hidden" id="(.+?)".+?value=\'&euro;(.+?)\'/s', $buffer, $matches)) 
```

# qt - 在 QT 中自定义库类

> ID：12261396
> 
> 赞同：0
> 
> 时间：2012-09-04T10:18:50.987
> 
> 标签：qt, class, customization, paint

我想`QPlainTextEditor`在 Qt 中创建一个特定的。也就是说，我想每隔一行用灰色突出显示。现在，我创建了一个新`QAbstractScrollArea`类 ( `HighlightedOddLineScrollArea`) 并修改了它`paintEvent`，但我不知道如何在我的文本编辑器中实现它。我必须通过构造函数来完成，还是有一个函数可以交换默认值？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-06T11:17:58.710

您将需要继承 QPlainTextEditor 并重新实现其paintEvent 函数。由于该函数是虚拟的，因此您定义的函数将被调用而不是父类'

# wpf - 两个 WPF 应用程序之间的通信

> ID：12261401
> 
> 赞同：4
> 
> 时间：2012-09-04T10:18:53.703
> 
> 标签：wpf, wcf, .net-4.0, communication

我有两个 WPF 应用程序，我需要这两个应用程序能够相互通信。我只需要这些应用程序相互发送一些通知，仅此而已。我已经找到了两种技术，一种是使用 WCF，另一种是使用 DDE。但对我来说，这些对于我的要求来说似乎太复杂了。请建议解决此问题的最简单方法是什么？我还有什么其他选择？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-04T10:50:19.983

如果它们都在同一个网络上（否则你需要转发你使用的端口），你可以在它们之间建立一个 TCP 连接，都需要一个 TCPlistener 和一个 TCP 客户端。这很容易创建：这是一个小[教程](http://www.codeproject.com/Articles/1415/Introduction-to-TCP-client-server-in-C)

# c++ - QGridLayout 的 addWidget 阻止了我的项目

> ID：12261405
> 
> 赞同：0
> 
> 时间：2012-09-04T10:19:07.240
> 
> 标签：c++, qt, qgridlayout

这个问题看起来很简单，但我没有在 2 小时内解决它。我有这个布局：

```
QGridLayout* view = new QGridLayout(this);
view->setSpacing(15);
view->addWidget(x0,2,1);
view->addWidget(x1,1,1);
view->addWidget(keyboard,2,0);
view->addWidget(x2,1,0);
view->addWidget(draw,0,0,0,1);
resize ( 650,650);
this->setLayout(view); 
```

我需要那个“绘图”（项目的图形部分），占据项目的顶端（第 0 行，第 0 列到第 1 列）。

问题是我在构造函数中输入的任何值：

```
void QGridLayout :: addWidget (QWidget * widget, int fromRow, fromColumn int, int rowSpan, columnSpan int, Qt :: Alignment alignment = 0) 
```

***所有其他小部件都被阻止了，当我的程序运行时我无法交互。***

使用经典构造函数

```
void QGridLayout :: addWidget (QWidget * widget, int row, int column, Qt :: Alignment alignment = 0) 
```

没问题，但小部件“绘制”不是我想要的（只有 1 列而不是 2 列）。

有人知道我在哪里做错了吗？

PS：小部件没有布局设置（除了一个数字键盘来固定键的最小高度）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-04T10:48:35.010

行跨度是文字，而不是像变量一样的索引。如果要放置 2 列/行跨度，则必须将值 2 放入跨度参数中。因此，您需要将其修改`view->addWidget(draw,0,0,0,1);`为`view->addWidget(draw,0,0,1,2);`. 行/列跨度为 1 将仅包括“来自行/列”而不是“来自行/列 + 1”

# css - Flex 3中textArea的最后一行对齐

> ID：12261406
> 
> 赞同：0
> 
> 时间：2012-09-04T10:19:11.353
> 
> 标签：css, actionscript-3, flash, apache-flex

```
txtArea.setStyle("textAlign","justify"); 
```

显示文本如

```
textSample textSample textSample textSample textSample textSample textSample textSample
textSample textSample textSample textSample textSample textSample textSample textSample
textSample textSample textSample textSample textSample textSample textSample textSample
textSample 
```

最后一行在文本区域中没有对齐。是否可以对齐 flex 3 中的最后一行。请帮助...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-04T10:34:22.653

您可以使用该`textAlignLast`属性：

```
txtArea.setStyle("textAlign", "justify");
txtArea.setStyle("textAlignLast", "justify"); /*or "center", "left", "right"*/ 
```

# ios - 我有一个个人 iOS 开发者帐户，我可以为我的客户发布移动应用程序吗？

> ID：12261411
> 
> 赞同：0
> 
> 时间：2012-09-04T10:19:29.523
> 
> 标签：ios

我有一个个人 iOS 开发者帐户。我为不同的餐馆等开发应用程序，我想在我的帐户上发布这些应用程序。我可以吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-04T10:22:36.257

不幸的是，您不能拥有个别餐厅的名称。苹果在这方面变得非常贪婪，需要发布应用程序的公司必须以自己的名义拥有自己的应用程序帐户，以确保开发公司和发布公司创建单独的开发者帐户。应用程序将仅以帐户名称发布。

**编辑 -**根据评论中的**@zaphodtx**，*您可以发布任意数量的内容，但在提交几次类似的提交后您将被阻止。即同一个应用程序一遍又一遍地进行细微的更改，例如更名。我与应用审查团队交谈，他们提到了一个我不记得的数字，但不到 10 个。*

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-04T10:25:37.180

您可以发布它，但它会列在您的个人帐户下。这意味着最终用户将在您的同一个人帐户下看到您的应用程序的推荐列表。

而对于个人账户，即使您已将账户的显示名称设置为公司名称，您注册的个人名称也会出现在 App Store 内的应用页面上。它显示为卖方，低于价格和高于版权声明。

如果您不关心此名称显示问题，则可以在您的 iTunes Connect 帐户下提交客户的应用程序。

# asp.net-mvc - 分开部署asp.net mvc项目的不同区域

> ID：12261412
> 
> 赞同：1
> 
> 时间：2012-09-04T10:19:39.103
> 
> 标签：asp.net-mvc, deployment, web-deployment, asp.net-mvc-areas, area

我有两个 asp.net mvc 项目。此外，其中一个使用 ASPX 视图引擎和其他 Razor。第一个项目它是所有用户共同的东西，其他一些用户组。他们都为每个用户共享一个会话。

我将加入这些项目并为每个项目使用[区域](http://www.asp.net/whitepapers/what-is-new-in-aspnet-mvc#_TOC3_2)。现在我想知道这是否符合我的要求？

我有两个问题：

1.  是否可以将具有不同视图引擎的两个项目放在一个项目中并将它们分开？
2.  是否可以在 asp.net mvc 中部署一个区域而无需更改其他区域？

PS：我觉得第一个问题的答案不是。但我仍然对第二个感兴趣（只是想知道它是否可能以及以何种方式）。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-06T12:44:13.997

在这里您可以找到一篇博客文章如何在同一个项目中使用多个视图引擎： [http ://weblogs.asp.net/gunnarpeipman/archive/2010/07/29/asp-net-mvc-3-using-multiple-view -engines-in-same-project.aspx](http://weblogs.asp.net/gunnarpeipman/archive/2010/07/29/asp-net-mvc-3-using-multiple-view-engines-in-same-project.aspx)

我想这也适用于区域......

对于你的第二个问题。有一个框架叫mef。使用 Managed Extensibility Framework (Mef)，您可以为您的网页构建一个插件结构，其中每个插件都可以独立维护。但是你必须为此做一些额外的工作。

请参阅这些可能为您指明正确方向的链接：

[http://blog.maartenballiauw.be/post/2009/04/21/ASPNET-MVC-and-the-Managed-Extensibility-Framework-%28MEF%29.aspx](http://blog.maartenballiauw.be/post/2009/04/21/ASPNET-MVC-and-the-Managed-Extensibility-Framework-%28MEF%29.aspx)

[http://www.fidelitydesign.net/?p=88](http://www.fidelitydesign.net/?p=88)

我希望我确实正确理解了您的问题并可以提供帮助...

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-08T12:57:11.873

# 1 - 是

是的，我从事一个同时运行 Spark 和 Razor 的项目。

你不能把这两个混在一起

*   从 Razor 页面中渲染部分 Spark 不起作用（至少效果不佳）。

# 2 - 否

您可以将更改部署到视图而不影响站点的其余部分。

但是，**触摸 Bin 文件夹或 .config 文件将重置 AppDomain**。此外，对共享代码的更改显然会影响这两个领域。

**除非您使用进程外会话状态提供程序（如 StateServer、SQL Server、MemCache 等），否则**重置 AppDomain 将清除任何 SessionState****

 **你为什么要这样做？

替代解决方案：

1.  在 IIS 中创建 2 个网站，您可以将它们绑定到单独的 IP 地址或 Host Headers
2.  创建具有 2 个独立站点的 2 个虚拟目录**

# regex - 这可以用正则表达式吗？

> ID：12261413
> 
> 赞同：4
> 
> 时间：2012-09-04T10:19:40.003
> 
> 标签：regex

是否有可能有一个匹配以下内容的正则表达式匹配器：我需要知道是否有*任何子*字符串在匹配括号的内部和外部，完全格式化为`(@ ... )`

匹配示例：

*   `abc (@ abc )`
*   `abc (@ (& abc ) )`
*   `abc (& def (@ abc ) )`
*   `(& (& abc def ) (@ abc ) )`
*   `(& def (& abc ) (@ abc ) )`

**不**匹配的例子：

*   `abc`
*   `(@ abc )`
*   `abc (@ def )`
*   `abc (& abc)`

*编辑：* 这是检查正则表达式的 rspec 规范。只有 2 个测试失败：

"(@abc) abc" 应该匹配

"(@abc) (@abc)" 不应该匹配

```
describe "regex" do

  let(:regex) { /(.+).*\(@.*\1.*\)/ }

  matches = ["abc (@ abc )", "(@ abc ) abc", "abc (@ (& abc ) )", "abc (@ (& abc ) )"]
  no_matches = ["abc", "(@ abc )", "abc def", "abc abc", "abc (& abc)", "(@ abc ) (@ abc)"]

  matches.each do |flow|
    it "should match '#{flow}'" do
      flow.should match regex
    end
  end

  no_matches.each do |flow|
    it "should not match '#{flow}'" do
      flow.should_not match regex
    end
  end

end 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-04T13:07:55.580

尝试使用正则表达式模式

```
/(?=.*?(?<!@ )(\b\w+\b)).*\(@.*\1.*\)/ 
```

请参阅[此测试代码](http://ideone.com/QMzeC)。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-04T10:23:33.440

您可以使用反向引用很容易地做到这一点：

```
/(.*).*\(@ \1 \)/ 
```

这里`\1`是对上面未转义括号中捕获的内容的引用。

您的语法可能会因引擎而略有不同。Perl、sed、vim 等在这方面都有细微的差别。例如，您可能必须转义`@`：

```
/(.*).*\(\@ \1 \)/ 
```

或者可能需要转义捕获括号：

```
/\(.*\).*(@ \1 )/ 
```

在 Perl 中，建议使用`$1`而不是`\1`：

```
/(.*).*\(@ $1 \)/ 
```

玩它，你可能会找到正确的组合。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-04T10:21:54.810

这可能会做你想做的事：

```
(.+).*\(@.*\1.*\) 
```

只有当某些字符串在外部和内部都存在时才会匹配`(@ ...)`

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-09-04T10:30:40.880

在我看来，正则表达式**无法满足您的要求**。您的测试看起来像是在树上执行的测试，因此您需要更强大的东西，例如解析器，它确实会将您的字符串变成可以在其上运行测试的树。

为此，请参阅[ANTLR](http://antlr.org)之类的解析器。还有其他的，但这是我们使用的最著名的之一。

**编辑**：正则表达式可能无法正确匹配的示例：不`(@ abc) (@ abc)`应该匹配，但我没有看到可以将其与`abc (@ abc)`匹配项区分开来的正则表达式。

# linux - 在 n 列中重新排列文件内容

> ID：12261414
> 
> 赞同：0
> 
> 时间：2012-09-04T10:19:44.090
> 
> 标签：linux, bash, shell

我有一个文件，内容为：

```
 000000000000000000000000
00000000000000000000000000000000
0000000000000000000000001f000000
01000000060000000000000034000000
3f000000000000000000000004000000
000000001b0000000900000000000000
00000000600300001000000009000000
010000000400000008000000 
```

我想通过指定 col 的数量来重新排列其内容。例如，如果我说 col 的编号为 80，则输出应如下所示：

```
00000000000000000000000000000000000000000000000000000000000000000000000000000000
1f000000010000000600000000000000340000003f00000000000000000000000400000000000000
1b000000090000000000000000000000600300001000000009000000010000000400000008000000 
```

谁能帮我这个 ？xxd 可以在这里达到目的吗？谢谢。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-04T10:23:45.280

您可以使用[`tr`](http://unixhelp.ed.ac.uk/CGI/man-cgi?tr%201)首先从内容中删除空格，然后使用[`fold`](http://www.computerhope.com/unix/ufold.htm)以特定的线宽将它们换行。

```
cat infile.txt | tr -d "[:space:]" | fold -80 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-04T10:37:52.947

由于这个问题也被标记为 C，这里有一个 C 方法来做同样的事情：

```
#include <stdio.h>

int main(void)
{
    FILE* fp;
    int c, col;

    fp = fopen("datafile.txt", "r");

    col = 0;

    while ((c = fgetc(fp)) != EOF)
    {
        if (c == ' ' || c == '\n') // ignore spaces and newline
            continue;

        putchar(c); // output to stdout
        ++col;

        if (col == 80) // newline at column 80
        {
            putchar('\n');
            col = 0;
        }
    }

    fclose(fp);

    return 0;
} 
```

# asp.net - 停止从 ASP.Net 中的 GridView_RowCommand 触发 GridView_RowUpdating

> ID：12261415
> 
> 赞同：1
> 
> 时间：2012-09-04T10:19:44.777
> 
> 标签：asp.net, gridview, rowcommand

我有一个 GridView 控件，并且启用了编辑功能。

我的编辑和更新按钮都是 LinkBut​​tons，如下所示：

```
<asp:LinkButton ID="buttonEdit" runat="server" Text="Edit" CausesValidation="false"
                            CommandName="Edit" />

<asp:LinkButton ID="buttonUpdate" runat="server" CausesValidation="True"
                            CommandName="Update" Text="Update" ValidationGroup="Edit" /> 
```

当用户单击编辑按钮时，其中一列有一个允许编辑记录的文本框：

```
<EditItemTemplate>
    <asp:TextBox ID="textBoxEdit" runat="server" Text='<%#Eval("Name") %>' />
    <asp:Label ID="labelEditWarning" CssClass="error" runat="server" Text="Name already exists" Visible="false" />
</EditItemTemplate> 
```

当用户单击更新链接按钮时，网格的 RowCommand 事件会触发。在这里，我想对数据库中的现有记录进行验证。如果验证失败，那么如何阻止网格的 RowUpdating 事件触发但似乎没有办法做到这一点！？

```
protected void gridName_RowCommand(object sender, GridViewCommandEventArgs e)
{
    if (e.CommandName.Equals("Edit"))
    {
        //Perform validation & cancel update if the validation fails.
    }
}

protected void gridName_RowUpdating(object sender, GridViewUpdateEventArgs e)
{
     //Update my record. But I don't want this to fire if my validation fails in 
     //the row command event.
} 
```

任何人都可以帮忙吗？

我正在使用 ASP.Net 4.0

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-04T12:36:53.680

将“buttonUpdate”上的 CommandName 从“Update”更改为“rename”。这将停止触发 RowUpdating 事件。然后，您可以在 RowCommand 事件中添加一些代码来处理记录的验证和更新，例如

```
protected void gridName_RowCommand(object sender, GridViewCommandEventArgs e)
{
    if (e.CommandName.Equals("rename"))
    {
        if(validation == true)
        {
          DatabaseDataContext data = new DatabaseDataContext();

          string rowID = e.CommandArguement.ToString();
          var rowToUpdate = data.TableOne.Where(d => d.ID.ToString() == rowID);
          rowToUpdate.Name = newName;

          data.SubmitChanges();
        }
        else
        {
          //Set error label
        }
    }
} 
```

您还需要将 Button 的 CommandArguement 更改为：

```
<asp:LinkButton ID="buttonUpdate" runat="server" CausesValidation="True"
                        CommandName="Update" CommandArguement='<%# Eval("ID") %>' Text="Update" ValidationGroup="Edit" /> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-04T11:33:50.667

您可以在 gv_RowCommand 事件中更新

**示例代码：**

```
protected void gridName_RowCommand(object sender, GridViewCommandEventArgs e)
{
    if (e.CommandName=="Edit")
    {
        //Perform validation & cancel update if the validation fails.
    }

   if(your validtaion successconditon flag set true)
    {    
       if (e.CommandName == "Update")
       {
       }
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-08-03T05:21:55.310

您还可以使用 GridViewUpdateEventArg 的 Cancel 属性取消更新。

例如

```
 protected void GridView_RowUpdating(object sender, GridViewUpdateEventArgs e)
    {
      // Your validation logic goes here...

     // If validation logic fails...
     e.Cancel = true;

    } 
```

# c# - 在 app.config 中加密密码

> ID：12261417
> 
> 赞同：0
> 
> 时间：2012-09-04T10:19:58.707
> 
> 标签：c#, entity-framework-4, sql-server-ce-4

我正在使用`Entity Framework`密码创建数据库的 SQLServer 连接：

```
connectionString="DataSource=|DataDirectory|DB.sdf;Password=abc 
```

使用实体框架时如何保护密码？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-04T10:23:43.057

```
 ConnectionStringsSection oSection = Configuration.ServiceConfiguration.GetConnectionStrings();
    if(!oSection.SectionInformation.IsLocked && !oSection.SectionInformation.IsProtected)
    {
        oSection.SectionInformation.ProtectSection("RSAProtectedConfigurationProvider"); 
        oSection.CurrentConfiguration.Save();
    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-04T10:28:43.103

如果您有权访问服务器，则可以使用 cmd 中的 web config 加密工具。我在与我的 web.config 相同的文件夹中创建了一个 .bat 文件，其中包含：

```
aspnet_regiis -pef connectionStrings .
aspnet_regiis -pef appSettings .
pause 
```

这将加密 connectionStrings 整个部分，在我的情况下，appSettings 整个部分也是如此。

要解密，请执行以下操作：

```
aspnet_regiis -pdf connectionStrings .
aspnet_regiis -pdf appSettings .
pause 
```

不过，您将需要从服务器运行它。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-04T10:34:30.593

`EncDecHelper.Decrypt`您可以使用此处的示例进行编写： **[Encrypt/Decrypt string in .NET](https://stackoverflow.com/questions/202011/encrypt-decrypt-string-in-net)**

您将从这里找到相关信息：**[在 App.config 中加密密码](https://stackoverflow.com/questions/5522879/encrypt-password-in-app-config)**

# javascript - 如何使用 Javascript / Jquery / HTML5 函数将 HTML 页面捕获为图像

> ID：12261423
> 
> 赞同：3
> 
> 时间：2012-09-04T10:20:13.890
> 
> 标签：javascript, jquery, html

我想在我的网站上有一个按钮，可以捕获我网页的当前图像。我看过谷歌的“发送反馈”功能，想在我的网页中实现 tat。我还阅读了有关 html2canvas 的信息，并在实施时发现了以下问题。

1.  Html2canvas 不会保存页面的任何 swf 对象。
2.  html2canvas 的实现没有足够的文档来理解如何使用 tat。
3.  html2canvas 上的定制并不容易（可能只对我来说并不容易）。
4.  我想在我的本地驱动器或我的网络服务器中高亮/黑屏后保存捕获的图像

伙计们，我不关心安全问题或其他事情，因为我只想将此功能用于原型，事实上，如果它在本地工作，那么它也很好。

我可以使用本地主机在浏览器中运行此页面，并且可以捕获图像并保存在本地。

除了 html2canvas 之外，我也愿意接受其他解决方案。我只想将网页捕获为图像，如果我可以突出显示并变黑，那么它将锦上添花:)。

谢谢 ：）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-04T10:30:13.640

试试[http://html2canvas.hertzen.com/](http://html2canvas.hertzen.com/)我认为这对你很有用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-04T10:34:41.397

我刚刚通过[http://www.bitpixels.com/register](http://www.bitpixels.com/register)进行了测试 注册是通过谷歌帐户完成的，该服务每月免费提供数千张缩略图。

只需使用卷曲：

```
curl --get "http://img.bitpixels.com/getthumbnail?code=SOME-CODE-YOU-GET-BY-REGISTRATION&url=http://www.example.com" 
```

你最喜欢的编程语言应该支持它。

考虑这个 php 示例：

```
<?php
$ch = curl_init('http://img.bitpixels.com/getthumbnail?code=SOME-CODE-YOU-GET-BY-REGISTRATION&url=http://www.example.com');
curl_setopt_array($ch, array(
    CURLOPT_BINARYTRANSFER  => true,
    CURLOPT_RETURNTRANSFER  => true
));
$imageBinary = curl_exec($ch);
file_put_contents('test.png', $imageBinary); 
```

有关 php-curl 的更多信息，请参阅：http: [//php.net/manual/de/book.curl.php](http://php.net/manual/de/book.curl.php)

并使用 php 进行图像处理：http: [//php.net/manual/en/ref.image.php](http://php.net/manual/en/ref.image.php)

# c++ - 函数调用 std::vector

> ID：12261424
> 
> 赞同：-1
> 
> 时间：2012-09-04T10:20:19.817
> 
> 标签：c++

下面是我如何调用函数 Xpath.evaluate。由于错误的函数调用，这不起作用。请帮忙

```
std::vector<std::string> album;

xpath.evaluate("*[local-name()=*album*]/text()",album); 
```

xpath.evaluate 函数是

```
void XPath::evaluate(char const* xpath, vector<string>& result) const
throw (Error) {
    result.clear();

    vector<xmlNodePtr> r;
    evaluate(xpath, r);

    xmlBufferPtr buff = xmlBufferCreate();
    for (size_t i = 0; i < r.size(); ++i) {
        xmlSaveCtxtPtr ctxt = xmlSaveToBuffer(buff, "UTF-8",
                                              XML_SAVE_NO_DECL | XML_SAVE_NO_XHTML);
        xmlNodePtr clone = xmlCopyNode(r[i], 1);
        xmlSaveTree(ctxt, clone);

        // OMG
        if (clone->doc != NULL && clone->doc != r[i]->doc) {
            xmlFreeDoc(clone->doc);
        }
        else {
            xmlFreeNode(clone);
        }

        xmlSaveFlush(ctxt);
        result.push_back(string((char const*) buff->content, buff->use));
        xmlSaveClose(ctxt);
        xmlBufferEmpty(buff);
    }
    xmlBufferFree(buff);
} 
```

这个函数怎么调用？？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-04T10:23:01.617

`album[2]`是一个`std::string`。你只需要传递`album`来匹配`vector<string>&`参数。

# jsf - 如何停止与 Primefaces 轮询组件的 ajax 通信

> ID：12261431
> 
> 赞同：3
> 
> 时间：2012-09-04T10:20:36.727
> 
> 标签：jsf, primefaces

我正在使用 primefaces 3.2 并且正在使用轮询。我可以在民意调查中调用停止，但在民意调查之后，Firebug 中正在运行一些东西。只有当页面被刷新时它才会停止。如何停止落后的电话。

提前致谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-04T11:42:03.483

poll.stop() 只会忽略传入的响应，不会取消调用。

Ajax 调用一旦完成就无法停止（除非刷新页面）

Firebug 显示 Ajax 调用仍在运行，但您的代码将忽略它。

# android - 画布不在自定义视图中绘制

> ID：12261435
> 
> 赞同：15
> 
> 时间：2012-09-04T10:20:55.483
> 
> 标签：android, android-canvas, android-custom-view

我像这样创建了一个自定义视图 CircleView：

```
public class CircleView extends LinearLayout {

    Paint paint1;
    public CircleView(Context context) {
        super(context);
        init();
    }   
    public CircleView(Context context, AttributeSet attrs) {
        super(context, attrs);
        init();
    }
    public void init() {
        paint1 = new Paint();
        paint1.setColor(Color.RED); 
    }       
    protected void onDraw(Canvas canvas) {
        //super.onDraw(canvas);         
        canvas.drawCircle(50, 50, 25, paint1);
        this.draw(canvas);  
    }
} 
```

然后我将它包含在我的 Activity 的布局根目录中`<RelativeLayout>`：

```
 <com.turkidroid.test.CircleView
      android:id="@+id/circle_view"
      android:layout_width="fill_parent"
      android:layout_height="fill_parent" 
      android:layout_centerInParent="true"  /> 
```

然而，什么都没画！

*   我是否正在实施自定义视图？
*   或者是我如何使用自定义视图？

一些信息：

*   CircleView 和 MyActivity 都在同一个包中：`com.turkidroid.test`.
*   在`onDraw()`方法上，我尝试包含`super.onDraw()`并评论它。
*   我知道我可以用更简单的方法画一个圆圈，但我的 CircleView*将*包含的不仅仅是画一个圆圈。我需要将其设为自定义视图。

* * *

## 回答 #1

> 赞同：29
> 
> 时间：2012-09-04T10:41:38.900

您的 onDraw 方法永远不会被调用，您需要在自定义视图的构造函数上调用 setWillNotDraw(false) 才能实际调用 onDraw。

如 Android SDK 所述：

> 如果此视图自己不进行任何绘图，请设置此标志以允许进一步优化。默认情况下，该标志未在 View 上设置，但可以在某些 View 子类上设置，例如 ViewGroup。通常，如果您覆盖 onDraw(android.graphics.Canvas) 您应该清除此标志。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-04T11:23:55.200

你的`this.draw()`方法在哪里？

这应该绝对有效：

```
protected void onDraw(Canvas canvas) {
    super.onDraw(canvas);         
    canvas.drawCircle(50, 50, 25, paint1);
    //this.draw(canvas);  where is this method?
} 
```

# android - Libgdx android的AssetManager ParticleEffectLoader

> ID：12261439
> 
> 赞同：1
> 
> 时间：2012-09-04T10:21:02.140
> 
> 标签：android, loader, libgdx, particles

## 在libgdx中，AssetManager没有ParticleEffectLoader。所以我为粒子效果编写了一个加载器。但是总是出现错误并说无法加载文件。

任何人都可以帮我解决问题或向我展示一个成功的粒子效果加载器吗？非常感谢！

我的代码：

```
package com.game.data;

import com.badlogic.gdx.assets.AssetDescriptor;
import com.badlogic.gdx.assets.AssetLoaderParameters;
import com.badlogic.gdx.assets.AssetManager;
import com.badlogic.gdx.assets.loaders.AsynchronousAssetLoader;
import com.badlogic.gdx.assets.loaders.FileHandleResolver;
import com.badlogic.gdx.files.FileHandle;
import com.badlogic.gdx.graphics.g2d.ParticleEffect;
import com.badlogic.gdx.utils.Array;

public class ParticleEffectLoader extends 
    AsynchronousAssetLoader<ParticleEffect, AssetLoaderParameters<ParticleEffect>>{

    ParticleEffect particleEffect;

    public ParticleEffectLoader (FileHandleResolver resolver) {
        super(resolver);
        if(particleEffect==null){
            particleEffect=new ParticleEffect();
        }
    }

    @Override
    public void loadAsync(AssetManager manager, String fileName,
            AssetLoaderParameters<ParticleEffect> parameter) {
        System.out.println("loadAsync");
        FileHandle particleFile = resolve(fileName);
        particleEffect.loadEmitters(particleFile);
        particleEffect.loadEmitterImages(imagesDir);
    }

    @Override
    public ParticleEffect loadSync(AssetManager manager, String fileName,
            AssetLoaderParameters<ParticleEffect> parameter) {
        System.out.println("loadSync");
        return particleEffect;
    }

    @Override
    public Array<AssetDescriptor> getDependencies(String fileName,
            AssetLoaderParameters<ParticleEffect> parameter) {
        System.out.println("getDependencies");
//      FileHandle imagesDir = resolve("res/");
//      particleEffect.loadEmitterImages(imagesDir);
        return null;
    }

} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-10T07:01:10.567

我今天也需要实现一个 ParticleEffectLoader，很高兴发现它非常简单。下面是我的实现，我在自己的项目中测试过，我使用`SynchronousAssetLoader`.

```
import com.badlogic.gdx.assets.AssetDescriptor;
import com.badlogic.gdx.assets.AssetLoaderParameters;
import com.badlogic.gdx.assets.AssetManager;
import com.badlogic.gdx.assets.loaders.FileHandleResolver;
import com.badlogic.gdx.assets.loaders.SynchronousAssetLoader;
import com.badlogic.gdx.files.FileHandle;
import com.badlogic.gdx.graphics.g2d.ParticleEffect;
import com.badlogic.gdx.utils.Array;

/**
 * @author Daniel
 * @date Oct 10, 2012 2:04:42 PM
 */
public class ParticleEffectLoader extends SynchronousAssetLoader<ParticleEffect, ParticleEffectLoader.ParticleEffectParameter> {

    public ParticleEffectLoader(FileHandleResolver resolver) {
        super(resolver);
    }

    @Override
    public ParticleEffect load(AssetManager assetManager, String fileName,
            ParticleEffectParameter parameter) {
            ParticleEffect effect = new ParticleEffect();
        FileHandle effectFile = resolve(fileName);
        FileHandle imgDir = effectFile.parent();
        effect.load(effectFile, imgDir);
        return effect;
    }

    @Override
    public Array<AssetDescriptor> getDependencies(String fileName,
            ParticleEffectParameter parameter) {
        return null;
    }

    static public class ParticleEffectParameter extends AssetLoaderParameters<ParticleEffect> {
        public ParticleEffectParameter () {
        }
    }

} 
```

请注意，在我的项目中，我总是将图像文件与粒子文件放在同一个文件夹中，所以这对我来说已经足够了。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2016-12-22T20:52:33.450

只是为了完整起见：同时有一个官方的 ParticleEffectsLoader： http: [//libgdx.badlogicgames.com/nightlies/docs/api/com/badlogic/gdx/assets/loaders/ParticleEffectLoader.html](http://libgdx.badlogicgames.com/nightlies/docs/api/com/badlogic/gdx/assets/loaders/ParticleEffectLoader.html)

# php - 使用 SQL 数据库进行 PHP 更新并使用 PageID 提取条目

> ID：12261441
> 
> 赞同：0
> 
> 时间：2012-09-04T10:21:04.463
> 
> 标签：php, sql-server, sql-update

抱歉，我对 PHP 还很陌生，并且从 ASP 翻译了一些代码。虽然我已经完成了 .NET 和 c# 和 ASP 的更新。并了解它背后的理论我正在努力寻找有效的 PHP 代码。对你们中的一些人来说，这将是一个非常简单的概念。

所以我有一个从 MS SQL 数据库中提取的列表。例如，这是所有“页面”的列表。每个旁边是和编辑按钮，如下所示：

```
<a href="UpdatePage.php?id="><img src="images/edit.gif" width="16" height="16" alt="" border="0"></a> 
```

重要的一行是：

href="UpdatePage.php?id="

我需要在**?id=之后设置一个变量**

这意味着将您重定向到编辑页面，我将在其中使用数据库中的数据填充表单。

我为此编写的代码如下所示：

```
<?php
$query = "SELECT PageTitle, PageText ";
$query .= "FROM Pages ";
$query .= "WHERE PageID =  ";

$result = mssql_query($query);

$numRows = mssql_num_rows($result); 
?> 
```

**在PageID =**之后再次丢失该位， 如果我将其设置为 all，它会遍历所有条目，如果我使用 ID 对其进行硬编码，它也可以工作。我正在寻找的是一种让列表页面向更新页面传递 PageID 的方法，以及一种告诉查询只需要检索与该 PageID 相关的整个内容的方法。如果这是有道理的。我查看了很多代码，但找不到与 PHP 和 MSSQL 相关的像样的教程或解释。任何正确方向的提示或要点将不胜感激。

看完后觉得应该是这样的：

```
<?php echo $PageID; ?>

$PageID = $_GET['PageID']; 
```

我在正确的轨道上吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-04T10:40:00.540

在我看来，最好的方法是在结果数组中添加一个回调函数。从查询中，您将获得一个包含 x 元素的数组（如果需要，请随意使用分页器）。

然后，您将循环该数组，并且对于每一行，您将拥有所需的 page_id，并且在那一刻您可以生成正确的链接。现在您将生成

`<a href="UpdatePage.php?id=$loop['page_id']"><img src="images/edit.gif" width="16" height="16" alt="" border="0"></a>`

并将其与现有行连接起来（或者更好地生成整行本身而不是循环数组 2 次）。所以试着在你的循环中挂上一个电话。

文档： http: [//php.net/manual/en/language.types.callable.php](http://php.net/manual/en/language.types.callable.php)

# php - Zend Framework 2 中 Service 和 Manager 类之间的区别

> ID：12261442
> 
> 赞同：20
> 
> 时间：2012-09-04T10:21:04.933
> 
> 标签：php, zend-framework2, naming-conventions

我对`Manager`and`Service`类名后缀有点困惑。

据我了解的区别，`Managers`负责处理（创建，检索，删除，...）某些类型的实体。例如，`ModuleManager`负责加载和返回`Modules`。在这种情况下，您*确实*关心实际的实体`Module`.

但是，`Services`是提供接口以执行某些类型的流程逻辑的类。例如，a`LogService`将给定的日志消息发送到定义的日志写入器。您不关心它的去向和作用，您只希望管理员了解刚刚发生的事情。

现在，ZF2 提供了一个`ServiceManager`创建和返回给定实例的`Service`. 我不小心习惯了创建`Managers`并提供一个`factory`to`ServiceManager`以便您可以在上下文中访问`Manager`using以保持控制器的微小和可测试类中的真实逻辑。这是现在让我感到困惑的部分，因为显然，不建议使用. **但是**：我不是唯一这样做的人：该模块是另一个例子：它默认注册为 a 。`$this->getServiceLocator()->get('managerName');``Controller``Managers``ServiceLocator`**`Doctrine ORM``EntityManager``doctrine.entitymanager.orm_default` **`Service`****

 **我得到了`Services`和`Managers`错误之间的真正区别吗？甚至有区别吗？`Managers`甚至可能从`Services`概念中继承？

* * *

## 回答 #1

> 赞同：39
> 
> 时间：2012-09-05T02:50:55.900

我将尝试为您分解 ZF2 中的管理器和服务。

## 经理人

不幸的是，提到类的“经理”这个词非常模棱两可，在 ZF2 中，这个词的使用方式有些不一致。因此，对于 ZF2 中的“经理”是什么，确实没有权威的定义。目前，ZF2 中的“经理”最好这样分解：

*   **ServiceManager** — 的一个实例`Zend\ServiceManager\ServiceManager`。可以有多个 ServiceManager 实例——默认情况下，只有“主”服务管理器，它使用 'services' 配置键或模块的 getServiceConfig() 方法返回的数组进行配置。
*   **插件管理**器——这些扩展`Zend\ServiceManager\PluginManager`扩展`Zend\ServiceManager\ServiceManager`了一些专门的功能。这些分布在框架中的许多组件中，并提供以前已知的功能（在 ZF2 的早期版本中）作为插件加载器/代理。这些插件管理器是初始化[视图助手](https://github.com/zendframework/zf2/blob/master/library/Zend/View/HelperPluginManager.php)、[控制器插件](https://github.com/zendframework/zf2/blob/master/library/Zend/Mvc/Controller/PluginManager.php)和[控制器本身](https://github.com/zendframework/zf2/blob/master/library/Zend/Mvc/Controller/ControllerManager.php)的东西。
*   **其他“经理”** ——诸如`Zend\ModuleManager\ModuleManager`和之类的东西`Zend\Session\SessionManager`。这些与 ServiceManager 无关，只是碰巧将“Manager”作为其名称的后缀。

我认为您可能会在尝试将定义分配给未考虑任何特定定义的术语（经理）时感到困惑。作为 的作者`Zend\ModuleManager`，我可以告诉你，我最初将组件开发为`Zend\Module`（我真的不喜欢 Manager 作为后缀）。这是在[我们每周一次的 IRC 会议](http://framework.zend.com/wiki/display/ZFDEV2/2012-05-16+Meeting+Log)上决定的，它`Zend\Module`是模棱两可的，加上“经理”后缀会以某种方式解决这种模棱两可的问题。显然，我在这件事上的票数超过了我。我的观点是，`Zend\ModuleManager`根据任何定义，都没有发展到成为“经理”的任何规范。

## 服务

在 ZF2 中，关于`Zend\ServiceManager`，“服务”只是对象（技术上也可以是数组）。ServiceManager 组件可以被认为是您的应用程序可能需要的各种“服务”（对象）的简单键值注册表。这些“服务”通常是配置的邮件程序、记录器、数据库适配器、应用程序配置等。当然，ServiceManager*不仅仅是*一个简单的注册表，它的主要功能是将服务（及其依赖项）的实例化推迟到他们实际上是需要的；又名延迟加载）；我写了[一篇博文，深入解释了 ServiceManager 的各种特性](http://blog.evan.pro/introduction-to-the-zend-framework-2-servicemanager)。

> 我不小心习惯了创建管理器并为 ServiceManager 提供工厂，以便您可以使用 $this->getServiceLocator()->get('managerName) 访问管理器

我认为在这种情况下，您可能会在这里将“经理”一词与“服务”混淆。使用 ServiceManager 注册的东西可以简单地称为“服务”。这可能会令人困惑，因为您确实可以将某种“管理器”注册为服务。例如，您可以有一个“会话”服务，它是`Zend\Session\SessionManager`. 进一步的混淆随之而来，因为术语“服务”通常指的是构成[服务层](http://martinfowler.com/eaaCatalog/serviceLayer.html)一部分的类。

所以，不幸的是，是的，ZF2 中的术语可能有点模糊，但是一旦你理解了几个相对简单的核心概念，伟大的设计确实会带来一些惊人的灵活性，在我看来，这是其他大多数人无法比拟的现有的框架。

希望这可以帮助。**

# c# - Assembly.Load 性能影响

> ID：12261447
> 
> 赞同：4
> 
> 时间：2012-09-04T10:21:37.203
> 
> 标签：c#, performance, clr, .net-assembly, system.reflection

我正在开发一个组件，该组件执行使用 ioc 注册的任何接口的临时方法，并且执行时刻取决于不同的触发器。它必须能够将要执行的操作保存到数据库，所以我将方法名称、类型和参数列表（序列化为 BLOB）保存到数据库中，直到需要。

当触发发生时，我需要对类型的实例执行方法。当我使用依赖注入时，我将接口名称保存到数据库中（格式`"Namespace.IInterface, AssemblyName"`）

要在 ioc 容器上运行`Resolve<IInterface>()`方法，我需要它的实例`Type`：

```
Assembly assembly = System.Reflection.Assembly.Load(assemblyName);
Type service = assembly.GetType(typeName);
object instance = IOCContainer.Resolve(service); 
```

我的问题是：

*   如果我确定包含程序集已加载到应用程序域中，是否有更好的方法从其名称中获取类型的实例？*（我尝试过简单`Type.Load(typeName)`但为空）*
*   如果相关程序集已加载，CLR 是否会优化该过程（使用已加载），还是我需要手动缓存程序集列表以防止反复加载相同程序集对性能的影响？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-04T10:31:40.193

*   如果`typeName`您使用包含程序集名称（类似`MyNamespace.MyType, MyAssembly version=1.0.0.0,publicKeyToken=12345etc`），那么`Type.Load(typeName)`将获得您的类型但不为空；
*   CLR 只负责加载程序集一次（每个上下文一次，[详细信息在这里](http://msdn.microsoft.com/en-us/library/dd153782.aspx)，在您的情况下，上下文保持不变，所以答案是您应该放松并将缓存留给 CLR :)）。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-04T10:32:15.580

> 如果我确定包含程序集已加载到应用程序域中，是否有更好的方法从其名称中获取类型的实例？（我尝试了简单的 Type.Load(typeName) 但得到了空值）

不。

> 如果相关程序集已加载，CLR 是否会优化该过程（使用已加载）

是的。

每个程序集仅加载一次。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-04T13:34:39.750

> 如果相关程序集已加载，CLR 是否会优化该过程（使用已加载）

这个问题的答案在MSDN 文章[How the Runtime Locates Assemblies 的第](http://msdn.microsoft.com/en-us/library/yx7xezcf)[2 步](http://msdn.microsoft.com/en-us/library/aa98tba8)：

***如果****在以前的调用**中也请求了所请求的**程序集**，则公共语言**运行库将使用已加载的程序集**。在命名构成应用程序的程序集时，这可能会产生影响。有关命名程序集的详细信息，请参阅[程序集名称](http://msdn.microsoft.com/en-us/library/k8xx4k69)。*

 ***** * *

与问题没有直接关系，但也很有用：

*如果对程序集的先前请求失败，则对程序集的后续请求将立即失败，而不会尝试加载程序集。从 .NET Framework 2.0 版开始，程序集绑定失败被缓存，缓存的信息用于确定是否尝试加载程序集。*

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2017-01-10T06:40:52.580

为了验证性能影响，我尝试加载相同的程序集 n 次。并发现总分配的内存随着每次调用而增长。

# 要尝试执行以下操作：

```
while (true)
{
    Assembly assembly = Assembly.LoadFrom("abc.dll");
    //monitor: AppDomain.CurrentDomain.MonitoringTotalAllocatedMemorySize
    //memory growing with each call
} 
```

==============

然后我这样做是为了确保我只加载一次程序集。

```
var typeName = "Namespace.ClassName, Namespace";

while (true)
{
   var typeFound = Type.GetType(typeName);
   if (typeName == null)
   {
       Assembly assembly = Assembly.LoadFrom("abc.dll");
   }
   //monitor: AppDomain.CurrentDomain.MonitoringTotalAllocatedMemorySize
   //memory will not grow after first call
} 
```****

# php - 在 symfony 2 中使用表单添加带有 API 的记录

> ID：12261451
> 
> 赞同：0
> 
> 时间：2012-09-04T10:21:45.260
> 
> 标签：php, api, symfony

这是我通过 api 添加记录的基本操作

```
 public function createAction(Request $request){
      $data = array();
      $data['employeeCode'] = $request->request->get('employeeCode');
      $data['employeeDescription'] = $request->request->get('employeeDescription');
      $data['firstName'] = $request->request->get('firstName');
      $data['lastName'] = $request->request->get('lastName');
      $data['address'] = $request->request->get('address');
      $data['suburb'] = $request->request->get('suburb');
      $data['postcode'] = $request->request->get('postcode');
      $data['country'] = $request->request->get('country');
      $data['phone'] = $request->request->get('phone');
      $data['mobile'] = $request->request->get('mobile');

      $emp = new Employees();
      $emp->setEmployeeCode($data['employeeCode']);
      $emp->setEmployeeDescription($data['employeeDescription']);
      $emp->setFirstName($data['firstName'] );
      $emp->setLastName($data['lastName']);
      $emp->setAddress($data['address']);
      $emp->setSuburb($data['suburb']);
      $emp->setCountry($data['country']);
      $emp->setSuburb($data['phone']);
      $emp->setCountry($data['mobile']);

      $em = $this->get('doctrine')->getEntityManager();
      $em->persist($emp);
      $em->flush();
      $view = View::create();
      $view->setData($emp);

      return $view; 
```

这对我有用，但我想将它与我的员工表单绑定，这样我就可以从我的表单验证器获得每一个验证，而且我是 symfony2 的新手，所以我不知道该怎么做......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-04T11:14:21.273

如果您想在 api 上验证您的实体，只需使用 validate 方法：[http ://symfony.com/doc/current/book/validation.html](http://symfony.com/doc/current/book/validation.html)

您不必使用表格！

这里有一个例子：

```
public function createAction(Request $request){

    // ...previous code...

    // We valide manually the employee without a form !
    $validator = $this->get('validator');
    $errors = $validator->validate($emp);

    // If there are errors....
    if (count($errors) > 0) {

        return new Response('Errors !');
    }

    // Otherwise we save it !

    $em = $this->get('doctrine')->getEntityManager();
    $em->persist($emp);
    $em->flush();
    $view = View::create();
    $view->setData($emp);

    return $view;
} 
```

当然，它会调用在您的员工实体上定义的所有验证器。

您也可以只调用一组验证器：

```
$errors = $validator->validate($emp, array('api_creation')); 
```

此外，这里有一个使用 symfony2 构建 API 的好教程：[http ://williamdurand.fr/2012/08/02/rest-apis-with-symfony2-the-right-way/](http://williamdurand.fr/2012/08/02/rest-apis-with-symfony2-the-right-way/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-04T10:43:06.513

这真的很容易：

```
$emp = new Employees();

$form = $this->createForm(new EmployeesType(), $emp);
$form->bindRequest($request);

if ($form->isValid()) {
    $emp = $form->getData();
    (...)
}
(...) 
```

# php - php-gettext 在生产服务器中不起作用。(Ubuntu)

> ID：12261458
> 
> 赞同：0
> 
> 时间：2012-09-04T10:21:56.367
> 
> 标签：php, internationalization, gettext, ubuntu-server, php-gettext

我在 PHP 中遇到 gettext 问题；我有两台服务器，一台是本地的（我在其中开发）在 Windows 中（使用 vs.php）和工作查找，另一台在 Amazon EC2（Ubuntu 12.04 更新）中，这是生产服务器，在此服务器中相同的代码不要'没有找到。

这是我的代码：

我用这个初始化gettext。

```
function initialize_i18n($locale) {
    $locales_root = "./librerias/noAuto/locale";
    putenv('LANG='.$locale);
    putenv("LC_ALL=" . $locale);
    setlocale(LC_ALL,$locale);
    $domains = glob($locales_root.'/'.$locale.'/LC_MESSAGES/messages*.mo');
    if (count ($domains) > 0)
    {
        $current = basename($domains[0],'.mo');
        $timestamp = preg_replace('{messages-}i','',$current);
        bindtextdomain($current,$locales_root);
        bind_textdomain_codeset( $current, "UTF-8" );
        textdomain($current);
        if ($locale == "en_US")
        {
            if( _("Modificar") === "Modify" ) {
                $system->setDebug( "Translated correctly");
            } else {
                $system->setDebug( "Gettext don't working");
            }
        }
    }
}
initialize_i18n("en_US"); 
```

我项目中的所有文件都以 UTF-8（西班牙语）编码，并且 .mo 和 .po 是用 poedit 生成的。

我尝试重新加载 apache 服务但没有用。

任何想法？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-05T07:43:34.263

新的一天新的想法！我有办法！

我你有同样的问题，你需要检查这个步骤。

1 - 你的 Linux 安装了这种语言？

你可以用这个检查：

```
 locale -a 
```

如果没有列出您的语言，请安装它，例如，您可以使用以下命令安装 englsh 本地化：

```
 # aptitude install language-pack-en 
```

完成后重新启动apache。

2 - 您的语言代码在 PHP 中是否正确？

如果您使用 locale -a 列出语言代码列表，您将看到可以使用的语言代码，例如，对于我的系统列出的英语： [...] en_NG.utf8 en_NZ.utf8 en_PH.utf8 en_SG.utf8 en_US .utf8 [...] 我的一个错误是，我使用“en_US”而不是“en_US.utf8”。

3 - 文件夹的名称与语言代码相同。（我的第二个错误）

PD>对不起我的英语不好

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-04T13:44:40.460

如果在不同的环境下不能正常工作，最好检查关键功能是否处理成功。

我建议你先检查 bindtextdomain() 和 bind_textdomain_codeset() 的返回值。如果它们返回空白，则意味着 PHP 找不到消息资源文件（仅在 Ubuntu 上），那么您可以检查运行 Web 服务器和 PHP 的 Unix 用户的文件夹和文件的权限。

# c# - 绑定到已设置选定项的视图模型时，无法让 Telerik radgridview 突出显示选定项

> ID：12261461
> 
> 赞同：3
> 
> 时间：2012-09-04T10:22:08.153
> 
> 标签：c#, silverlight, mvvm, telerik

我有一个屏幕，上面有一个 Telerik RadGridView 作为父/主控件。然后我有一个子用户控件显示所选项目的详细信息。

我的网格是这样设置的：

```
<telerik:RadGridView  
 AutoGenerateColumns="False"  
 CanUserFreezeColumns="False" IsReadOnly="True"
 RowIndicatorVisibility="Collapsed" 
 ItemsSource="{Binding LinkedCases}" 
 SelectionUnit="FullRow" SelectionMode="Single"
 IsBusy="{Binding LinkedCasesLoading}" 
 ShowColumnFooters="True" 
 SelectedItem="{Binding CurrentlySelectedItem, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}" > 
```

CurrentSelectedItem 是视图模型上的一个属性。它工作正常并正确填充详细信息控件。

当我离开然后返回此屏幕时，我的问题就出现了。

屏幕是从头开始重新创建的，但我的视图模型是从视图模型定位器中检索的（使用 MVVM Light 和 SimpleIOC）。Viewmodel 完全符合我的要求。父网格正确填充，子详细信息正确填充。ViewModel 上的 CurrentSelectedItem 已填充，但网格未突出显示所选行。

我已经尝试过使用和不使用 Updatesourcetrigger 和 IsSynchronisedWithCurrentItem，但这些会导致它选择网格中的第一行并突出显示 - 从而覆盖我在 CurrentSelectedItem 中的先前值，这不是我想要的。

有人对如何实现这一目标有任何想法吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-05T09:43:03.620

无法在加载或导航到的页面上获取对 Grid 的引用 - 我将其命名为 CaseGridView，虽然它识别出它是一个 RadGridView，但它返回 null。我只是假设此时它还没有创建控件，因为我已经命名了控件，并尝试使用它来引用控件事件中的控件，这也失败了。

如果我使用发件人，发现它适用于 DataLoaded 事件：

```
 private void CaseGridView_DataLoaded(object sender, EventArgs e)
    {
        var grid = sender as RadGridView;
        if (grid != null)
        {
            grid.SelectedItem = vm.CurrentlySelectedItem;
            if (grid.SelectedItem != null)
            {
                grid.ScrollIntoView(grid.SelectedItem);
            }
        }
    } 
```

我还添加了 scrollIntoView 部分，以确保它在屏幕上可见。

# android - EditText 视图编码

> ID：12261465
> 
> 赞同：0
> 
> 时间：2012-09-04T10:22:28.307
> 
> 标签：android, character-encoding, http-post, android-edittext

在我的应用程序中有某种聊天。当我从服务器接收到消息时，它显示得很好，但是当我发送消息时，文本全部搞砸了。我想编码有问题，但我该如何解决呢？我已经尝试为 postEntity 设置内容编码，还尝试使用 new String(old.getBytes("UTF-8")); 对字符串数据进行编码。没有帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-04T10:30:20.173

我假设您正在使用`Content-Type: multipart/form-data`. 您使用哪个库来生成 POST 正文数据？如果是 Apache httpmime，则需要将显式`CharSet`参数传递给`StringBody`构造函数，例如

```
CharSet cs = CharSet.defaultCharset();
MultipartEntity mp = new MultipartEntity();
mp.addPart("message", new StringBody("message to be encoded", cs)); 
```

如果是的话`Content-Type: application/x-www-form-urlencoded`，看看`java.net.URLEncoder`类。

# shell - 我有两个文件，我应该如何使用 shell 脚本比较这些文件

> ID：12261488
> 
> 赞同：0
> 
> 时间：2012-09-04T10:23:54.063
> 
> 标签：shell, shell-exec

> **可能重复：**
> [我有两个文件，我应该如何使用 shell 和 awk 脚本比较这些文件](https://stackoverflow.com/questions/12257976/i-have-two-files-how-should-i-compare-these-files-using-shell-and-awk-script)

我有两个文件

文件 A 的内容

```
File paybackFile_783205-786752_000_20120801.xml sent successfully
File paybackFile_521000-845442_000_20120701.xml sent successfully 
```

文件 B 的内容

```
14/08/2012 12:36:01: MSG: File paybackFile_783205-786752_000_20120801.xml.gpg decrypted successfully. 
```

在fileA中，我有100条以上格式的记录，而在fileB中，我有80条以上格式的记录。从fileA我必须取文件名*.xml（来自上面给出的字符串），然后必须验证文件B中是否存在*.xml文件（也是字符串的一部分）。我们还需要验证fileB中是否存在*.xml，那么它是否解密成功。

问候， 斯米塔

# iphone - XCode 的管理器无法显示正确的包显示名称

> ID：12261489
> 
> 赞同：4
> 
> 时间：2012-09-04T10:23:58.347
> 
> 标签：iphone, objective-c, ios, xcode

在`Bundle display name`当前，我已经创建了本地化`info.plist`文件，本地化字符串部署到手机时可以**成功显示。**`${PRODUCT_NAME}``InfoPlist.strings`

 **但是，当我**存档**并在 XCode 的管理器中时，我仍然在侧边栏中看到`${PRODUCT_NAME}`例如**MyApp**。

他们正常吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-10T08:02:27.583

这完全没问题，是预期的行为。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-10T04:53:38.757

> 选择产品-> 构建 -> 构建归档
> 
> 如果更新的文件没有出现，请执行此操作，它将在 Organizer 寡妇中更新。
> 
> 产品 -> 存档

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-10T10:40:26.027

确保您用于应用程序的包标识符在您创建配置证书的苹果开发者帐户中仍然有效。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-17T00:03:50.067

有时我会在我的主要 Xcode 项目中包含一个库项目的显示名称。这有点傻，但它是我在管理器中的应用程序名称。**

# ipython - 访问 IPython 的配置文件历史 (history.sqlite)

> ID：12261492
> 
> 赞同：3
> 
> 时间：2012-09-04T10:24:28.313
> 
> 标签：ipython

当我重新启动 IPython 时，我可以通过按向上和向下键来访问上次会话的输入。我发现特定于配置文件的历史记录保存在`~/.config/ipython/profile_profilename/history.sqlite`.

有没有办法以与 %history 命令相同的简单方式访问此历史记录？

IPython 参考在此处描述了该功能：http: [//ipython.org/ipython-doc/dev/interactive/reference.html#readline-based-features](http://ipython.org/ipython-doc/dev/interactive/reference.html#readline-based-features)
这个人有同样的问题，但他们没有找到“直接”解决方案：http: [//python.6.n6.nabble.com/Logging-in-new-IPython-td1665151.html](http://python.6.n6.nabble.com/Logging-in-new-IPython-td1665151.html)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-04T11:59:13.390

我假设你的意思是一个从外部 IPython 访问你的历史记录的工具，也许是从命令行？

执行此操作的 API 已经存在 - 请参阅类`IPython.core.history.HistoryAccessor`（[源代码](https://github.com/ipython/ipython/blob/master/IPython/core/history.py#L65)）。有[一个示例脚本（更新的链接）](https://github.com/ipython/ipython/blob/master/examples/core/ipython-get-history.py)显示了如何使用它从数据库中转储会话。但是我们还没有为此提出申请。如果你对它感兴趣，你可以研究它 - 请参阅我们的[潜在项目列表供贡献者开始](http://wiki.ipython.org/Potential_projects)。

# javascript - How can i handle mouseclicks of items inside a dataview

> ID：12261494
> 
> 赞同：3
> 
> 时间：2012-09-04T10:24:31.210
> 
> 标签：javascript, extjs, extjs4, dataview

each item in my dataview has a text and a div which represents a button. The button is only shown when the mouse is over the item. How can i handle a mouseclick on the button-div?

What i have so far is this:

```
xtype: 'dataview',

store: Ext.create('Ext.data.Store', {
    model: 'LogEntry',
    data: [
        { text: 'item 1' },
        { text: 'item 2' },
        { text: 'item 3' },
        { text: 'item 4' },
        { text: 'item 5' }
    ]
}),

tpl: Ext.create('Ext.XTemplate',
    '<tpl for=".">',
        '<div class="logentry">',
            '<span>{text}</span>',
            '<div class="removeicon"></div>',
        '</div>',
    '</tpl>'
),

itemSelector: 'div.logentry',
trackOver: true,
overItemCls: 'logentry-hover',

listeners: {
    'itemclick': function(view, record, item, idx, event, opts) {
        // How can i distinguish here if the delete-div has been clicked or some other part of the dataview-entry?
        console.warn('This item respresents the whole row:', item);
    }
} 
```

Working example: [http://jsfiddle.net/suamikim/3ZNTA/](http://jsfiddle.net/suamikim/3ZNTA/)

The problem is that i can't distinguish in the itemclick-handler if the button-div or the text-span has been clicked.

Thanks & best regards, Mik

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-04T15:34:54.920

check the `event.target.className` in the event listener. Here is a ~~working~~ example:

[http://jsfiddle.net/3ZNTA/1/](http://jsfiddle.net/3ZNTA/1/)

Here's the code:

```
Ext.onReady(function() {
    Ext.define('LogEntry', {
        extend: 'Ext.data.Model',
        fields: [
            { name: 'text',    type: 'string' }
        ]
    });

    Ext.create('Ext.panel.Panel', {
        width: 500,
        height: 300,
        renderTo: Ext.getBody(),

        layout: 'fit',

        items: [{
            xtype: 'dataview',

            store: Ext.create('Ext.data.Store', {
                model: 'LogEntry',
                data: [
                    { text: 'item 1' },
                    { text: 'item 2' },
                    { text: 'item 3' },
                    { text: 'item 4' },
                    { text: 'item 5' }
                ]
            }),

            tpl: Ext.create('Ext.XTemplate',
                '<tpl for=".">',
                    '<div class="logentry">',
                        '<span>{text}</span>',
                        '<div class="removeicon"></div>',
                    '</div>',
                '</tpl>'
            ),

            itemSelector: 'div.logentry',
            trackOver: true,
            overItemCls: 'logentry-hover',

            listeners: {
                'itemclick': function(view, record, item, idx, event, opts) {

                    if(event.target.className === 'removeicon'){
                        alert('you clicked the x icon');
                    }

                    // How can i distinguish here if the delete-div has been clicked or some other part of the dataview-entry?
                    console.warn('This item respresents the whole row:', item);
                }
            }
        }]
    });
}); 
```

# wpf - PrintWindow 扭曲窗口

> ID：12261496
> 
> 赞同：2
> 
> 时间：2012-09-04T10:24:58.167
> 
> 标签：wpf, windows, winapi, gdi

我尝试捕获窗口的屏幕截图并将其保存到视频中。我`PrintWindow()`用来捕获屏幕截图。当我的应用程序正在运行并且其他一些窗口移动到正在捕获的窗口上时，我看到捕获的窗口变得扭曲（移动窗口的痕迹保留在捕获的窗口上）；但是保存的视频没有任何失真。

我怀疑可能需要重绘窗口并在之后尝试过`InvalidateRect()`，但这没有任何帮助。`UpdateWindow()``PrintWindow()`

并非在所有系统上都观察到该问题。我在 Vista 系统上遇到问题，而不是在 Win7 上。我怀疑它发生在拖动时连续绘制窗口的系统上，而不是拖动窗口时只有黑色边框的系统上。

# asp.net-mvc-3 - 使用模型列表进行基于角色的授权

> ID：12261498
> 
> 赞同：6
> 
> 时间：2012-09-04T10:25:06.027
> 
> 标签：asp.net-mvc-3, authorization, authorize-attribute, role-based

我有 3 个模型 [用户、角色和用户角色]

```
使用 {ID [PK]、姓名、电子邮件、密码、.....}
角色{ID [PK]，名称，描述，.......}
用户角色 {用户 ID [FK]，角色 ID [FK]}

```

考虑一下，控制器上的基于角色的授权使用 [Authorize] 属性指定用户必须具有管理员角色才能访问类中的任何控制器操作

```
[Authorize(Roles = "Administrator")]
public class PageController : Controller
{
    // Controller code here
} 
```

这很好，我需要的是，

有没有办法将我的角色集合分配给 [Authorize] 属性？例如

我将从登录用户中获取分配的角色并将其存储在列表中。是否可以将此列表分配给 [Authorize] 属性？如下所示：

```
[Authorize(Roles = MyDynamicallyLoadedList)]
public class PageController : Controller
{
    // Controller code here
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-04T12:04:23.900

嗯，有两个问题。

首先，您不能将列表用作属性的参数。您可以改用数组。 [http://msdn.microsoft.com/fr-fr/library/ms177221%28v=vs.100%29.aspx](http://msdn.microsoft.com/fr-fr/library/ms177221%28v=vs.100%29.aspx)

其次，attributes 参数的值必须在编译时知道：您的列表的内容只会在运行时知道。

您会收到如下消息：

> 属性参数必须是属性参数类型的常量表达式、typeof 表达式或数组创建表达式

解决方案是创建一个新的 Authorization 属性（继承自`AuthorizeAttribute`），并覆盖`AuthorizedCore`

一个例子（你可以适应你的问题）可以在[这里找到](https://stackoverflow.com/a/2403092/961526)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-04T12:07:32.337

是的。

1.  覆盖 global.asax 中的 PostAuthenticateRequest
2.  从数据库加载角色
3.  创建一个新的`GenericPrincipal`
4.  将委托人分配给`Thread.CurrentPrincipal`和`HttpContext.Current.User`

例子：

```
protected void Application_OnPostAuthenticateRequest(object sender, EventArgs e)
{
    if (User.Identity.IsAuthenticated)
    {
        string[] rolelist = GetRoleListForUserFromAPI(User.Identity.Name);
        HttpContext.Current.User = new GenericPrincipal(User.Identity, rolelist);
        Thread.CurrentPrincipal = HttpContext.Current.User;
    }
} 
```

# linux - 是否可以忽略窗扇中的类型错误？

> ID：12261499
> 
> 赞同：0
> 
> 时间：2012-09-04T10:25:07.533
> 
> 标签：linux, arguments

如果我输入例如 ./test sa 或 ./test wn 以使我的函数 echo 仍然工作，是否可以通过某种方式实现它？我尝试使用 [ *a] 或 [w* ]，但它似乎不起作用。

```
until [ -z $1 ] 

  case in "$1" in 

               wa) echo "hi just testing" ;;

  esac
done 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-04T12:44:07.533

首先，案例陈述是错误的——它是

```
case "$1" in
   wa) echo ""hi just testing" ;;
esac 
```

如果您尝试级联选项，那么您可以使用“或”逻辑即。

```
case "$1" in
   wa|sn) echo ""hi just testing" ;;
esac 
```

如果您要处理任一字符的拼写错误，则可以使用：

```
case "$1" in
  w?|?a)  echo ""hi just testing" ;;
esac 
```

`?`手段匹配任何一个字符。

# c++ - 预处理器数组生成

> ID：12261500
> 
> 赞同：0
> 
> 时间：2012-09-04T10:25:08.277
> 
> 标签：c++, gcc, boost-preprocessor

我正在尝试创建一个宏来替换函数定义。这个宏应该在某个数组中注册函数的名称，以便其他宏可以对数组的元素做一些事情。

我想这样做以获得可以在控制台中使用的功能列表，而无需在添加新功能时编辑列表（它实际上是多个列表）。

在阅读了一下之后，我看了一下 boost 预处理器。不幸的是，似乎没有办法“保存”新数组。我想做的是这样的：

```
#define SOME_ARRAY (0, ())
#define CONSOLE_COMMAND(a) \
  #redefine SOME_ARRAY BOOST_PP_ARRAY_PUSH_BACK(SOME_ARRAY, #a) \
  void a(some_arguments) 
```

不幸的是，据我所知，redefine 不存在，#define 不能在宏中使用（如果我错了，请纠正我）。

我查看了 boost 的预编译器的 SLOT，但我认为一旦设置，我也无法更改其中的变量。

除了编写我自己的预处理器之外，还有什么方法可以做到这一点？不是，学习如何写一个好的开始是什么？（将 MinGW 与 Code::Blocks 一起使用）。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-04T10:47:55.480

做类似事情的常用方法是使用特殊宏在头文件中声明函数。这个宏的定义将根据它包含在哪个源文件中而有所不同。通常它只会定义一个标准函数原型，但是当包含在一个特殊的源文件中时，它将被定义为在表中添加条目。

像这样的东西：

```
// functions.h
#ifndef FUNCTION_H_
#define FUNCTION_H_

#ifndef FUNCTION
# define FUNCTION(name) \
    void name(const std::vector<std::string> &);
#endif

FUNCTION(foo)
FUNCTION(bar)

#endif

// functions.cpp
// File that defines the function table

#include <functional>

using function_type = std::function<void(const std::vector<std::string> &)>;

#define FUNCTION(name) \
    { #name, name },

std::map<std::string, function_type> functions = {
#include "functions.h
}; 
```

现在你有一个`std::map`包含函数的指针，由函数名索引。

是的，您仍然需要维护您的函数的“列表”，即 中的原型列表`functions.h`，但是当您添加（或删除）函数时，“修改”这个列表非常容易。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-04T10:43:33.990

预处理器的设计目的不是能够重新定义符号，因此您不能使用它来在文件传递中累积值。

一种可能的解决方案是使用重新定义和自我重新包含作为 X-Macros 技术：

```
#define CONSOLE_COMMAND(a,body) \
    void a(some_arguments) body

CONSOLE_COMMAND(my_command, { ... })

const char *array[] = {
#undef CONSOLE_COMMAND
#define CONSOLE_COMMAND(a,body) #a ,
#include __FILE__
}; 
```

更惯用的 C++ 解决方案是将您的命令作为文件范围对象，其构造函数在程序启动时注册它们。

# java - Java中的方程求解器 - 未将值推入堆栈

> ID：12261501
> 
> 赞同：-1
> 
> 时间：2012-09-04T10:25:12.020
> 
> 标签：java

我遇到了方程求解器的一部分问题。我有一个包含后缀方程的对象数组，并且此方法评估每个值。

我遇到的问题是它崩溃告诉我列表为空（此时：double num1 = ((double)operandStack.pop());）

有人可以告诉我我在这里做错了什么吗？

```
 DSAQueue<Object> postfixQueue = new DSAQueue<Object>();
.
.
.
.

private double evaluatePostfix (Queue<Object> postfixQueue)
{

DSAStack<Double> operandStack = new Stack<Double>();
while (postfixQueue.isEmpty() == false)
    {
    if (postfixQueue.peek() instanceof Double)
        {
        operandStack.push((Double)(postfixQueue.dequeue()));
        }
    else
        {
        double num1 = ((double)operandStack.pop());
        double num2 = ((double)operandStack.pop());
        char operator = ((char)postfixQueue.dequeue());
        double result = executeOperation (operator, num1, num2);
        operandStack.push(result);
        }
    }
double solution = operandStack.top();
return solution;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-04T10:33:45.423

请参阅下面代码中的注释。似乎有一个简单的代码路径会导致错误：

```
DSAQueue<Object> postfixQueue = new DSAQueue<Object>();

private double evaluatePostfix (Queue<Object> postfixQueue)
{

  // Here you define an empty list
  DSAStack<Double> operandStack = new Stack<Double>();

  while (postfixQueue.isEmpty() == false)
  {
    if (postfixQueue.peek() instanceof Double)
    {
      operandStack.push((Double)(postfixQueue.dequeue()));
    }
    else
    {
      // If the first item in postfixQueue was not a Double, you're now
      // pop-ing from an empty stack
      double num1 = ((double)operandStack.pop());
      double num2 = ((double)operandStack.pop());
      char operator = ((char)postfixQueue.dequeue());
      double result = executeOperation (operator, num1, num2);
      operandStack.push(result);
    }
  }
  double solution = operandStack.top();
  return solution;
} 
```

如果您使用调试器逐步完成（如 Peter 在他的评论中所建议的那样），您可以确定这是否是问题的根本原因。

# delphi - 如何处理 Hudson 作业之间的编译依赖关系？

> ID：12261503
> 
> 赞同：1
> 
> 时间：2012-09-04T10:25:15.480
> 
> 标签：delphi, continuous-integration, jenkins, hudson, delphi-xe

我有两个运行时包，一个引用另一个。在 Hudson，我对这两个包中的每一个都有一个构建作业（我想要分别为每个包提供测试结果和覆盖率报告）。要编译第二个包，我需要第一个包的 .dcp 文件。提供该文件的最佳方式是什么（特别是因为两个项目构建都可以独立触发）？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-04T10:57:59.353

当作业完成时，第一个作业可以使用特殊（通用）文件夹来部署 DCP 文件，可能使用文件夹名称中的版本号来保持依赖关系清晰。第二个作业需要知道文件夹位置，如果文件已经部署过一次，则可以随时触发第二个作业，而无需事先重建。也可以配置第一个作业的完成，以便触发第二个作业的构建。

# python - 从搅拌机中导出网格总是具有相同的名称

> ID：12261504
> 
> 赞同：0
> 
> 时间：2012-09-04T10:25:17.387
> 
> 标签：python, blender, blender-2.61

我正在为 Blender 编写一个导出器，但遇到了一个小问题 - 当我多次导出同一个模型时，导出的网格总是被分配一个不同的名称（添加了数字前缀）。

这是我用来访问要导出的网格的代码：

```
for ob in bpy.scene.objects:

    # get derived objects
    free, derived = create_derived_objects(scene, ob)

    if derived is None:
        continue

    for obDerived, mat in derived:
        if ob.type not in {'MESH', 'CURVE', 'SURFACE', 'FONT', 'META'}:
            continue

        try:
            derivedBlenderMesh = obDerived.to_mesh( scene, True, 'PREVIEW' )
        except:
            derivedBlenderMesh = None

        if derivedBlenderMesh:
                        # ... and the export stuff goes here

    # once everything's done, I remove the created instance
    if free:
        free_derived_objects(derivedBlenderMesh) 
```

老实说，我是从 3ds 出口商那里拿到的。

我注意到它创建了一个新的（派生的）对象，然后创建了一个新的网格（转换和一切），所以我猜这些是分配新名称的潜在位置。

我浏览了文档，但除了通过**to_mesh**方法之外，我没有看到 Object 和 Mesh 实例之间的明确关系，这显然会创建一个新的网格实例。

但是 - 我真的需要得到原来的名字。有人可以告诉我如何访问它吗？

在此先感谢:)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-05T13:24:18.920

好的 - 我绕过 id （有点）。我基本上忽略了网格名称，并在它嵌入的对象之后命名导出的网格。

这当然是在一个假设下起作用的，即每个对象都有一个专用的网格，但是我在导出之前复制了它们，所以情况确实如此。

如果有人有更好的解决方案，请在此处发布。

# java - java assertEquals 集合

> ID：12261513
> 
> 赞同：6
> 
> 时间：2012-09-04T10:25:56.877
> 
> 标签：java, set, assert

我有两套：

```
 Set<Attribute> set1 = new HashSet<Attribute>(5);
 Set<Attribute> set2 = new HashSet<Attribute>(5);

 //add 5 attribute objects to each of them. (not necessarily the same objects)

 assertEquals(set1,set2); //<--- returns false, even though 
                         //the added attribute objects are equal 
```

根据我的要求，覆盖了 Attribute 的 equals 方法：

```
public abstract class Attribute implements Serializable{

public int attribute;

public abstract boolean isNumerical();

@Override
public boolean equals(Object other){
    if(!(other instanceof Attribute)){
        return false;
    }

    Attribute otherAttribute = (Attribute)other;
    return (this.attribute == otherAttribute.attribute && 
            this.isNumerical() == otherAttribute.isNumerical());
}

} 
```

调试时，甚至不调用equals方法！

有任何想法吗？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-09-04T10:27:37.183

您没有覆盖`hashCode()`，这意味着将使用默认实现。在调用之前*首先*`HashSet`检查匹配的哈希码- 这就是它如何有效地找到潜在匹配项。（很容易“存储”一个整数。）*`equals`*

 *基本上，您需要以`hashCode`与您的方法一致的方式覆盖`equals`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-04T10:59:39.390

如果您检查调用的`HashSet` `contains()`方法调用`containsKey()`的源代码`getEntry()`。根据下面的源代码，很明显需要一个正确的`hashcode()`实现来调用equals。

```
/**
 * Returns the entry associated with the specified key in the
 * HashMap.  Returns null if the HashMap contains no mapping
 * for the key.
 */
final Entry<K,V> getEntry(Object key) {
    int hash = (key == null) ? 0 : hash(key.hashCode());
    for (Entry<K,V> e = table[indexFor(hash, table.length)];
         e != null;
         e = e.next) {
        Object k;
        if (e.hash == hash &&
            ((k = e.key) == key || (key != null && key.equals(k))))
            return e;
    }
    return null;
} 
```

PS：`Contains()`方法是从equals of使用的`AbstractCollection`*

# javascript - 使用Jquery在相同类型的元素中选择元素

> ID：12261520
> 
> 赞同：0
> 
> 时间：2012-09-04T10:26:18.803
> 
> 标签：javascript, jquery, html

我有一个这样的嵌套html结构：

```
<ul class="root">
    <li>Foo 1 <label class="bar-class">bar</label>
         <ul>
            <li>Foo 2 <label class="bar-class">bar</label>

            </li>

            <li>Foo 3 <label class="bar-class">bar</label>

            </li>
        </ul>
    </li>
</ul> 
```

依此类推，它是一个站点地图，因此嵌套的深度可以随心所欲。

我正在尝试显示和`bar label`隐藏`li element`.

使用这样的代码：

```
 $('.root li').live({
                mouseenter:
                       function () {
                           $(this).find('>.bar-class').show('slow');
                       },
                mouseleave:
                       function () {
                           $(this).find('>.bar-class').hide('fast');
                       }
            }); 
```

问题是，当前的每个`li`父级也显示它`bar`，我如何选择它以便只选择当前项目的栏？

我已经尝试了变化，但还没有破解它。

谢谢。

编辑 1：固定 html 标签。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-04T10:28:41.227

您可以`false`从回调函数返回以停止事件在 DOM 树上的进一步传播。

并更改为使用`mouseover`and `mouseout`：

```
$('.bar-class').hide();

$('.root li').live({
  mouseover:
    function () { $(this).find('>.bar-class').show('slow'); return false; },
  mouseout:
    function () { $(this).find('>.bar-class').hide('fast'); return false; }
});​ 
```

在这一点上，我想鼓励您从 using 转换`live`为 using [`on()`](http://api.jquery.com/on/)，因为`live`已弃用。

在这种情况下，代码变为：

```
$('.root').on('mouseover mouseout', 'li', function () {
  $(this).children('.bar-class').stop(true, true).fadeToggle('slow');
  return false;
});​ 
```

感谢[Yoshi](https://stackoverflow.com/users/697154/yoshi)参考：http : [//jsfiddle.net/6FzWU/2/](http://jsfiddle.net/6FzWU/2/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-04T10:31:12.707

使用`e.preventDefault()`，也`.live`被弃用，使用`.on`

```
$(document).on({
  mouseenter: function (e) {
    e.preventDefault();
    $(this).children('.bar-class').show('slow');
  },

  mouseleave: function (e) {
    e.preventDefault();
    $(this).children('.bar-class').hide('fast');
  }
}, '.root li'); 
```

# android - 将数据发送到我的应用程序而不实际启动它

> ID：12261521
> 
> 赞同：0
> 
> 时间：2012-09-04T10:26:29.920
> 
> 标签：android, android-activity, android-alertdialog

请帮忙，因为我对这种事情并不熟悉。

当用户选择（长按）当前网址时 - 在 alertDialog 中会弹出一个“共享页面”选项 - 这是 Android 最初提供的。

现在，我已经注册了我的应用程序来处理这个“共享页面”事件。现在，当用户从共享页面列表中选择我的应用程序时 - 我希望将网址保存在文件结构中某处的文本文件中，以便稍后在我的应用程序中访问它。

如果我不想启动整个应用程序来保存该链接地址，我该如何实现？它可以在后台运行吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-04T10:34:02.657

容易地。与其在一个中捕获它，不如在一个中捕获`Activity`它`Service`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-04T10:31:48.930

让它变得简单。不要将任何内容设置到您的共享活动中`onCreate`。相反，执行内部的所有保存部分`onCreate`并在最后调用`finish();`。

希望整个过程足够快（或者`AsyncTask`如果需要更长的时间就引入），用户不会感到任何滞后并启动新活动:)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-04T10:34:25.247

我假设您`<intent-filter>`在清单中有一个活动来处理共享意图。

你可以通过两种方式做你想做的事：

*   使用服务并使其处理共享意图。即保存网址。
*   在您的活动中：
    *   不要打电话`setContentView()`进来`onCreate()`。这可能不是 100% 看不见的。*可能会*出现黑屏。
    *   启动您的服务。

# android - 多次执行 Webview.clearView() 后执行 WebView.loadurl() 会导致崩溃

> ID：12261523
> 
> 赞同：3
> 
> 时间：2012-09-04T10:26:39.640
> 
> 标签：android

多次执行 Webview.clearView() 后执行 WebView.loadurl() 会导致崩溃。安卓 4.0.3。这是 logcat 输出：

```
 Build fingerprint: 'Lenovo/P700i/P700i:4.0.4/IMM76D/P700i_S105_120709:user/release-keys'                                
 pid: 4262, tid: 4284  >>> com.baidu.searchbox_lenovo <<<                                                                
 signal 11 (SIGSEGV), code 1 (SEGV_MAPERR), fault addr 006c0069                                                          
  r0 01f70298  r1 00000000  r2 01d31860  r3 006c0069                                                                     
  r4 01d31860  r5 015c6b48  r6 00000007  r7 4bfb1e0c                                                                     
  r8 5197fc08  r9 4bfb1e04  10 4bfb1dec  fp 5197fc1c                                                                     
  ip 508cdf1d  sp 5197fc00  lr 508cdf2b  pc 509ecf0c  cpsr 80003430                                                      
          #00  pc 003aff0c  /system/lib/libwebcore.so (_ZNK5Layer8getChildEi)                                            
          #01  pc 00290f26  /system/lib/libwebcore.so                                                                    
          #02  pc 0001ed70  /system/lib/libdvm.so (dvmPlatformInvoke)                                                    
          #03  pc 00059924  /system/lib/libdvm.so (_Z16dvmCallJNIMethodPKjP6JValuePK6MethodP6Thread)                     
          #04  pc 00030bcc  /system/lib/libdvm.so                                                                        
          #05  pc 000344d4  /system/lib/libdvm.so (_Z12dvmInterpretP6ThreadPK6MethodP6JValue)                            
          #06  pc 0006d710  /system/lib/libdvm.so (_Z14dvmCallMethodVP6ThreadPK6MethodP6ObjectbP6JValueSt9__va_list)     
          #07  pc 0006d734  /system/lib/libdvm.so (_Z13dvmCallMethodP6ThreadPK6MethodP6ObjectP6JValuez)                  
          #08  pc 00060612  /system/lib/libdvm.so                                                                        
          #09  pc 000132dc  /system/lib/libc.so (__thread_entry)                                                         
 code around pc:                                                                                                         
 509eceec 47a868e1 f57a69a0 4620ec96 bf00bd7c  .h.G.iz... F|...                                                          
 509ecefc 0036b3ce 3088f8d0 bf3a4299 3080f8d0  ..6....0.B:....0                                                          
 509ecf0c 0021f853 47702000 e005b911 d0034288  S.!.. pG.....B..                                                          
 509ecf1c 280068c0 e000d1fa 47702001 41f0e92d  .h.(..... pG-..A                                                          
 509ecf2c f8c54605 460e10a0 f5d12400 4607fd43  .F.....F.$..C..F                                                          
 code around lr:                                                                                                         
 508cdf08 b9084603 e0042001 f8d34620 f6a311a4  .F... .. F......                                                          
 508cdf18 bd10fa0b 4614b510 2100b14b f11e4618  .......FK..!.F..                                                          
 508cdf28 4601ffeb 4620b118 ffe2f7ff 2001e000  ...F.. F.......                                                           
 508cdf38 bf00bd10 4ff0e92d 6d464607 460cb0a7  ....-..O.FFm...F                                                          
 508cdf48 0b90f10d 0a88f10d 52f4f8d6 f6f74628  ...........R(F..                                                          
 memory map around addr 006c0069:                                                                                        
 0000a000-0000b000 /system/bin/app_process                                                                               
 (no map for address)                                                                                                    
 0134c000-016eb000 [heap]                                                                                                
 stack:                                                                                                                  
     5197fbc0  5197fc1c                                                                                                  
     5197fbc4  4009baa8  /system/lib/libc.so                                                                             
     5197fbc8  4c0206a8  /dev/ashmem/dalvik-LinearAlloc (deleted)                                                        
     5197fbcc  015c6b48  [heap]                                                                                          
     5197fbd0  00000003                                                                                                  
     5197fbd4  4bfb1f00                                                                                                  
     5197fbd8  5197fc08                                                                                                  
     5197fbdc  4009b9d8  /system/lib/libc.so                                                                             
     5197fbe0  5197fbe8                                                                                                  
     5197fbe4  4013bd6b  /system/lib/libutils.so                                                                         
     5197fbe8  000992e7                                                                                                  
     5197fbec  00000000                                                                                                  
     5197fbf0  41b62b80  /dev/ashmem/dalvik-heap (deleted)                                                               
     5197fbf4  41b62b80  /dev/ashmem/dalvik-heap (deleted)                                                               
     5197fbf8  df0027ad                                                                                                  
     5197fbfc  00000000                                                                                                  
 #01 5197fc00  4c1d2838  /dev/ashmem/dalvik-LinearAlloc (deleted)                                                        
     5197fc04  40a5dd74  /system/lib/libdvm.so 
```

# perl - 我可以使用另一个文件中的哈希值吗？

> ID：12261525
> 
> 赞同：1
> 
> 时间：2012-09-04T10:26:46.503
> 
> 标签：perl, variables, hash

我在 perl 文件中有一个哈希（我们称之为 test2.pl），如下所示：

```
our %hash1;

my %hash2 = {
    one   => ($hash1{"zero1"},  $hash1{"one1"}  ),
    two   => ($hash1{"one1"},   $hash1{"two1"}  ),
    three => ($hash1{"two1"},   $hash1{"three1"}),
    four  => ($hash1{"three1"}, $hash1{"six1"}  ),
    five  => ($hash1{"six1"},   $hash1{"one2"}  ),
    six   => ($hash1{"one2"},   $hash1{"two2"}  ),
    last  => ($hash1{"two2"},   $hash1{"last1"} ),
}; 
```

这有 6 个`Use of uninitialized value in anonymous hash ({}) at test2.pl line 7.`错误（文件中的第 7 行对应于该`my %hash2`行，所有错误都说第 7 行）。

我只能假设这是因为`%hash1`在另一个调用该文件的文件（test1.pl）中定义。我认为使用`our`足以定义它。我是否必须初始化哈希中的所有变量才能使其工作？

（我在括号中使用了括号，`our`因为我在那里声明了其他变量。）

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-04T10:43:06.253

在 Perl 中，您将哈希定义为*偶数列表*。这意味着它们由**括号**而不是**大括号**分隔：

```
my %hash = (
  key1 => "value1",
  key2 => "value2",
);
my $anonHashRef = {
  key1 => "value1",
  key2 => "value2",
}; 
```

花括号创建一个新的匿名哈希*引用*。

如果您不想从另一个文件访问哈希，则应`package`在顶部使用声明：

```
package FooBar;
# Your %hash comes here
# it HAS to be GLOBAL, i.e. declared with `our`, not `my` 
```

然后我们可以`require`或`use`您的文件（尽管文件名和包名最好是相同的）并将您的哈希作为包全局访问：

在您的主文件中：

```
use 'file2.pl';
my $element = $FooBar::hash{$key}; 
```

请参阅`Exporter`模块以更好地使用另一个命名空间中的数据结构。

# python - 如何列出我的 Mac 上安装的所有应用程序？

> ID：12261528
> 
> 赞同：0
> 
> 时间：2012-09-04T10:27:08.680
> 
> 标签：python, macos, applescript

如何使用 AppleScript 或 Python 列出我的 Mac 上可用的所有应用程序？
请帮我。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-04T11:04:52.820

检查以下 AppleScript：

```
set theResult to every paragraph of (do shell script "mdfind 'kMDItemContentTypeTree == \"com.apple.application\"c' | sort")
set systemApps to {}
set applicationsApps to {}

repeat with i from 1 to number of items in theResult
    set end of systemApps to item i of theResult
    if item i of theResult contains "/Applications/" then
        set end of applicationsApps to item i of theResult
    end if
end repeat 
```

该`systemApps`列表包含系统上的应用程序，例如：

```
{
"/Applications/Address Book.app",
"/Applications/Calculator.app",
"/Library/Image Capture/Devices/EPSON Scanner.app", 
"/Library/Little Snitch/Little Snitch Network Monitor.app",
"/Library/Scripts/ColorSync/Show Info.app",
[....]
} 
```

该`applicationsApps`列表包含应用程序文件夹中的应用程序，例如：

```
{
"/Applications/Address Book.app", 
"/Applications/App Store.app", 
"/Applications/Automator.app", 
"/Applications/Calculator.app",
"/Applications/Utilities/Activity Monitor.app"
[....]
} 
```

上面的脚本基于 Ross 的脚本（参见[Mac OSX Hints Forums](http://hintsforums.macworld.com/archive/index.php/t-71960.html)）：

```
set appString to do shell script "mdfind 'kMDItemContentTypeTree == \"com.apple.application\"c' | sort"
set appList to every paragraph of appString
set theReport to ""
repeat with i from 1 to number of items in appList
set theItem to item i of appList
set theApp to (a reference to POSIX file theItem)
set fileInfo to info for theApp
set versionInfo to long version of fileInfo
if versionInfo is missing value then set versionInfo to " "
set theReport to theReport & theItem & " " & versionInfo & return
end repeat
theReport 
```

# javascript - Jquery div滑块+菜单

> ID：12261529
> 
> 赞同：1
> 
> 时间：2012-09-04T10:27:13.803
> 
> 标签：javascript, jquery, html, css

目前我需要为`<div>`. 但是由于大多数插件的大小，我正在尝试创建自己的 jquery 脚本，因为我只需要基础知识。但老实说，我真的是 jQuery 的初学者，可以使用一些帮助。

目前我得到了一个`<div>`容器（宽度为250`overflow:hidden`像素），因为`<div>`我得到了另一个`<div>`需要从右向左移动的容器（宽度为 2500 像素）。我希望`$(document).ready`函数上的 div 以 250px 的步长向左移动，间隔为 5 秒。但是在花了整个上午试图弄清楚从哪里开始之后，我仍然被困住了。

此外，我想要以下选项：

1.  在内层`<div>`完全向左后，它会逐渐变回原来的位置。
2.  一种创建“点”以导航到某个位置的方法，当导航到该位置时，幻灯片将从该位置开始动画。

我知道这是一个很大的（困难的？）问题，但即使是一点点帮助也会非常感激。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-04T11:06:15.627

这是我创建的符合您要求的演示：[little link](http://jsfiddle.net/glee/zYfW7/)。jQuery/JavaScript 已完全注释以供参考，但如果任何部分需要额外详细说明，我很乐意解释更多！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-04T11:03:40.340

用正确的程序更新了你的 JSFiddle

**[小提琴演示](http://jsfiddle.net/hpXfR/3/)**

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-04T11:27:53.540

## *[jsBin 演示](http://jsbin.com/ikatas/5/edit)*

**HTML：**

```
<div id="slider">    
  <div id="slider_cont">
    <div id="slide">
       <!-- wide content here -->
    </div>    
  </div>  
  <div id="dots"><!--leave empty--></div> 
</div> 
```

**CSS：**

```
#slider_cont{
  width:250px;
  height:180px;
  position:relative;
  background:#eee;
  overflow:hidden;
}
#slide{
  position:absolute;
  left:0;
  width:2500px;
  height:180px;
}
.dot{
  cursor:pointer;
  background:#444;
  width:10px;
  height:10px;
  margin:4px 2px;
  position:relative;
  float:left;
  border-radius:10px;
}
.dot.active{
  background:#49a;
} 
```

**jQuery：**

```
var steps = 10,  // SET DESIRED n OF STEPS
    delay = 3500,// SET DESIRED DELAY
    galW = $('#slider_cont').width(),
    c = 0,      // counter
    intv;       // interval

// generate dots
for(i=0;i<steps;i++){
 $('#dots').append('<div class="dot" />'); 
}
$('#dots .dot').eq(c).addClass('active');

// ANIMATIONS function
function anim(){
  c=c%steps; // reset counter to '0' if greater than steps
  $('#slide').stop().animate({left: '-'+galW*c},800);
  $('#dots .dot').removeClass('active').eq(c).addClass('active');
}

// AUTO SLIDE function
function auto(){
  intv = setInterval(function(){
    c++; anim();
  },delay);
}
auto(); // kick auto slide

// PAUSE slider on mouseenter
$('#slider').on('mouseenter mouseleave',function(e){
  var evt = e.type=='mouseenter'? clearInterval(intv) : auto();
});

// CLICK dots to animate
$('#dots').on('click','.dot',function(){
  c=$(this).index(); anim();
}); 
```

希望我对代码进行了很好的评论，请问您是否有问题

# parsing - PHP 变量到 JSON 对象

> ID：12261531
> 
> 赞同：0
> 
> 时间：2012-09-04T10:27:16.840
> 
> 标签：parsing, jsonp, json

如何将服务器端的 PHP 变量转换为 JSON 对象？我想先使用 JSON 编码函数，然后再使用 eval 函数。这是正确的方法吗？可以直接改还是不改？

为什么要在服务器端进行编码和解码过程？序列化程序在客户端浏览器端做什么？

所以流程流程：在服务器端将 php 变量编码为 JSON 字符串，将 JSON 字符串解码为 Javascript 对象，在服务器端使用 stringify 函数和 Parse 执行序列化以获取数据。我对吗？

编码后不能直接发送JSON字符串吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-04T10:29:59.370

为什么要使用`eval()`？转换为 JSON 后，该对象表示为准备传输的字符串。您不直接编辑 JSON，而是使用您的本机对象，直到它们准备好，然后使用 JSON 序列化它们。

在服务器上：

*   编码：`json_encode()`（[PHP文档](http://php.net/manual/en/function.json-encode.php)）
*   解码：`json_decode()`（[PHP文档](http://php.net/manual/en/function.json-decode.php)）

在客户端（浏览器）上：

*   编码：`JSON.stringify()`（[MDN 文档](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/JSON/stringify)）
*   解码：`JSON.parse()`（[MDN 文档](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/JSON/parse)）

**编辑**

关于问题的编辑：

JSON 只是另一种序列化。受 JavaScript 的简写对象/数组表示法的启发。您几乎可以在任何需要序列化的情况下使用它（持久化对象、通过某些网络传输对象……）。

在 Web 环境中使用 JSON 的一大优势是它在浏览器中的原生支持及其相当紧凑的形式。几乎所有浏览器都有某种 JSON 编码和解码功能，如果没有，您可以使用[jQuery](http://jquery.com/)等库来支持 JSON。

# user-interface - 有 jqm 不倒翁 ui 元素吗？

> ID：12261532
> 
> 赞同：0
> 
> 时间：2012-09-04T10:27:20.707
> 
> 标签：user-interface, jqmobi

我正在 JQM 中构建一个应用程序，它使用标准表单元素接收用户输入。

用户输入之一是一天中的某个时间，我希望使用[像这样](http://doc.qt.nokia.com/qt-components-symbian/qml-tumbler.html)的一个不错的“不倒翁”ui 元素。

在文档中找不到任何内容来涵盖这一点。有谁知道这是否可能？如果有插件等。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-04T20:05:48.507

没有插件可以做到这一点，但很高兴看到有人创建它。

Matteo Spinelli 有一个独立的插件可以做到这一点 - [http://cubiq.org/spinning-wheel-on-webkit-for-iphone-ipod-touch](http://cubiq.org/spinning-wheel-on-webkit-for-iphone-ipod-touch)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-28T18:12:36.663

如果你使用 jQuery Mobile，你可以使用[这个插件](http://dev.jtsage.com/jQM-DateBox/)。我已经用过好几次了，效果很好。听起来你想要[时间翻转模式](http://dev.jtsage.com/jQM-DateBox/demos/mode/timeflipbox.html)

# matlab - Simulink：将恒定速度应用于模型

> ID：12261538
> 
> 赞同：1
> 
> 时间：2012-09-04T10:27:34.873
> 
> 标签：matlab, simulink

我想模拟一个弹簧阻尼质量系统并在整个模拟过程中对其应用恒定速度。怎么做到呢？我尝试添加一个常量，但它只会在开始时添加到系统中。一步块也无法解决我的问题。

我会很感激你的帮助！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-04T14:16:31.160

如果您使用两个积分器绘制 Simulink 图来计算加速度-> 速度和速度-> 位置，那么您需要将第一个积分器 (acceleration->velocity) 替换为常量块，以向系统提供固定的速度输入。结果，在运动的相反方向上的阻力会越来越大。

![在此处输入图像描述](../Images/c91cfb693c859202bb00772c2c9e2d91.png)

# c# - 从 node.js 解密 .NET 中的 AES256 加密数据 - 如何从密码中获取 IV 和密钥

> ID：12261540
> 
> 赞同：1
> 
> 时间：2012-09-04T10:27:38.103
> 
> 标签：c#, .net, node.js, encryption

我有以下代码来加密/解密 node.js 中的数据，它正在工作：

```
var cipher = crypto.createCipher('aes256', 'passphrase');  
var encrypted = cipher.update("test", 'utf8', 'base64') + cipher.final('base64');

var decipher = crypto.createDecipher('aes256', 'passphrase');   
var plain = decipher.update(encrypted, 'base64', 'utf8') + decipher.final('utf8'); 
```

我希望能够在 C#/.NET 中做同样的事情，这样我就可以在两个独立的系统之间共享数据。但是，我在 .NET 中看到的代码需要密钥和 IV 才能进入/解密。这些是如何从 node.js 加密库中的密码短语派生而来的？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-04T11:29:52.760

从[node.js 源](https://github.com/joyent/node/blob/master/src/node_crypto.cc)我发现了这个：

```
 bool CipherInit(char* cipherType, char* key_buf, int key_buf_len) {
cipher = EVP_get_cipherbyname(cipherType);
if(!cipher) {
  fprintf(stderr, "node-crypto : Unknown cipher %s\n", cipherType);
  return false;
}

unsigned char key[EVP_MAX_KEY_LENGTH],iv[EVP_MAX_IV_LENGTH];
int key_len = EVP_BytesToKey(cipher, EVP_md5(), NULL,
  (unsigned char*) key_buf, key_buf_len, 1, key, iv); 
```

[我在这个问题](https://stackoverflow.com/questions/8008253/c-sharp-version-of-openssl-evp-bytestokey-method)中找到了 EVP_BytesToKey 的 ac# 实现，可以这样使用：

```
byte[] key, iv;
DeriveKeyAndIV(Encoding.ASCII.GetBytes("passphrase"),null, 1, out key, out iv);

                     //this is what node.js gave me as the base64 encrypted data
var encrytedBytes = Convert.FromBase64String("b3rbg+mniw7p9aiPUyGthg=="); 
```

然后可以在一个实例中使用密钥和 IV`RijndaelManaged`来解密`encrytedBytes`

# node.js - Everyauth 示例失败并显示“在步骤，fetchOAuthUser，您正在尝试访问参数：accessToken”

> ID：12261545
> 
> 赞同：0
> 
> 时间：2012-09-04T10:27:54.373
> 
> 标签：node.js, everyauth

我重新安装了everyauth，运行示例代码会产生错误： *在步骤fetchOAuthUser，您正在尝试访问参数：accessToken。然而，到目前为止，之前的步骤只承诺了以下参数：req、res、next。* 我已经尝试了 npm install 以及 git clone ，结果相同。我已经解决了 conf.js 中缺少 } 的已知错误。

需要明确的是，我正在执行：

```
cd example/
node server.js 
```

谢谢，安迪

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-04T11:06:25.073

问题已解决。事实证明 Express 已经安装，如果是这种情况，那么您必须使用“npm install git://github.com/bnoguchi/everyauth.git#express3”命令来安装everyauth。

# php - 更新已设置的 php 变量

> ID：12261546
> 
> 赞同：0
> 
> 时间：2012-09-04T10:27:55.460
> 
> 标签：php, mysql, variables, if-statement, while-loop

我认为这可能真的很简单，但我必须忽略一些东西。

基本上，我有 If/Else php 语句，用于检查条件是否为真。在这些 if 语句中的每一个中，都有一个 WHILE 循环，它从我的数据库中回显所有适当的行。

while 循环需要打印一些表格单元格和行中的字段。目前，每个 WHILE 循环都有手动输入的代码，这意味着如果我想更改布局或其他内容，我需要在每个 while 循环中更改它。

我想做的是定义一个可以回显的变量，这样我只需要在一个地方更改代码就可以影响所有的 WHILE 循环。但是，WHILE 循环中内容的性质意味着这不会起作用，原因如下：

```
 //If the date is a monday
                if($daycheck == "Monday") {
                    //Start a row and create cell with date in
                    echo "<tr><td height='100px' valign='top'>".$datedisplay."<br />";

                    //For each event found for this day
                    while($dayrow = mysql_fetch_assoc($dayresult)) {
                        //Show the event info
                        echo $dayrow['Event Time']."<br />".$dayrow['Event Name']."<br />";
                    }

                    //End the cell for the day
                    echo "</td>";
                } 
```

这是一个 IF 语句，但想象一下下面还有几个。您可以在中间看到我的 WHILE 循环，显示数据库中每一行的字段。

问题是，如果我坚持：

```
$dayrow['Event Time']."<br />".$dayrow['Event Name']."<br />"; 
```

在 while 循环之前进入一个变量，当我回显它时，每次都将是相同的，因为 $dayrow 部分没有得到更新。

有什么方法可以将上述内容放入变量中，以便每次 WHILE 循环运行时更新？

也许如果 $dayrow[''] 部分以某种方式存储为文本而不是变量？

感谢您提供的任何帮助。

编辑

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-04T10:56:43.227

正如 DaveRandom 建议的那样，您可以使用`sprintf()`或（更多花哨和更多可能性）使用`eval()`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-04T10:47:00.293

我对你的问题的理解很简单。您不想在循环的每次迭代中更新变量，而是想附加以前的数据，这很简单

```
 $data="";
             if($daycheck == "Monday") {
                $data .= "<tr><td height='100px' valign='top'>".$datedisplay."<br />";
                 while($dayrow = mysql_fetch_assoc($dayresult)) {
                    $data .= $dayrow['Event Time']."<br />".$dayrow['Event Name']."<br />";
                }
                $data .= "</td>";
                echo $data;
            }; 
```

`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-04T10:51:13.060

我建议您寻找一个好的模板系统并使用它，而不是混合您的代码和视觉表示。

例如： [http ://twig.sensiolabs.org/](http://twig.sensiolabs.org/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-04T15:29:49.660

所以这是我使用 sprintf() 所做的，它可以满足我的需要：

设置我希望它如何显示：

```
 //Set the format to display the event details
                $eventdisplay = "%s <br /> %s <br /><br />"; 
```

在每个 WHILE 循环中设置时间和名称变量：

```
 //Set the event time variable
                        $eventtime = $dayrow['Event Time'];
                        //Set the event name variable
                        $eventname = $dayrow['Event Name']; 
```

最后，在 WHILE 循环中回显它：

```
 //Print event details into preset format
                        echo sprintf($eventdisplay, $eventtime, $eventname); 
```

所以这意味着我可以在文档中的任何位置设置 $eventdisplay，然后在每个循环中设置正确的时间和名称。然后使用 sprintf() 将这些格式化为 $eventdisplay 变量，然后回显，

终极成就：

我可以在一处更改事件信息的布局，所有循环都会收到这些更改。

非常感谢大家的帮助和建议

编辑

# c# - 通过 HtmlAgilityPack 解析表格标签出错

> ID：12261548
> 
> 赞同：0
> 
> 时间：2012-09-04T10:28:00.207
> 
> 标签：c#, html, html-table, html-agility-pack

我有一个带有表格的网页，我想获取所有行，但是当我下载它时，我得到一个奇怪的表格，其中有一个`<tr>`和多个`</tr>`，所以我无法解析它。我能做些什么？

我的代码：

```
 WebBrowser wb = new WebBrowser();
  wb.ScrollBarsEnabled = false;
  wb.ScriptErrorsSuppressed = true;
  wb.Navigate(link);
  while (wb.ReadyState != WebBrowserReadyState.Complete) { Application.DoEvents(); }
  string htmlDoc = wb.DocumentText;

  doc.LoadHtml(htmlDoc);

  nodesHtml = doc.DocumentNode.SelectNodes("//tr"); 
```

但是为了得到所有行`nodesHtml`，我只得到一行。奇怪的是，在像 FF 这样的真实浏览器中，html 标签看起来不错，但是在下载页面时 - html 出错了。

这是链接：[http ://www.lre.com/test/searchresultx.asp?id=19](http://www.lre.com/test/searchresultx.asp?id=19)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-14T02:46:10.393

由于页面的 HTML 非常不兼容，这会出错，
看看[w3c 的验证器](http://validator.w3.org/check?uri=http://www.lre.com/test/searchresultx.asp?id=19&charset=%28detect%20automatically%29&doctype=Inline&group=0)`tr`给出的结果， 你会发现有很多`td`关闭问题。

我的建议是要么通过[Tidy](http://tidy.sourceforge.net/)运行 HTML，要么使用 HTMLAgilityPack 的解析设置。

# c# - 下拉列表框总是选择第一个值

> ID：12261554
> 
> 赞同：0
> 
> 时间：2012-09-04T10:28:24.647
> 
> 标签：c#, asp.net, html, webforms

我正在使用 c# asp.net 和 c#，我尝试使用下拉列表框过滤 amchart。但是无论我选择什么，我都会得到第一个元素的值，我尝试了！ispostback，但没有运气，以下是前端代码，

```
 <%@ Page Language="C#" AutoEventWireup="true" CodeFile="Default.aspx.cs" Inherits="Default"  EnableEventValidation = "false" %>

<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01//EN" "http://www.w3.org/TR/html4/strict.dtd">

<html>

    <head>

        <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
        <title>amCharts examples</title>
        <link rel="stylesheet" href="http://localhost/style1.css" type="text/css">
        <script src="http://localhost/amcharts.js" type="text/javascript"></script>         
        <script type="text/javascript">

            var chart;

            var chartData = JSON.parse('<%=sjson%>'); 

            AmCharts.ready(function () {
                // SERIAL CHART
                chart = new AmCharts.AmSerialChart();
                chart.dataProvider = chartData;
                chart.categoryField = "Ip";
                chart.startDuration = 1;

                //scrollbar definition
                var chartScrollbar = new AmCharts.ChartScrollbar();

                // AXES
                // category
                var categoryAxis = chart.categoryAxis;
                categoryAxis.labelRotation = 90;
                categoryAxis.gridPosition = "Count";

                // value
                // in case you don't want to change default settings of value axis,
                // you don't need to create it, as one value axis is created automatically.

                // GRAPH
                var graph = new AmCharts.AmGraph();
                graph.valueField = "Count";
                graph.balloonText = "[[category]]: [[value]]";
                graph.type = "column";
                graph.lineAlpha = 0;
                graph.fillAlphas = 0.8;

                //add scrollbar to graph
                chartScrollbar.graph = graph;
                chartScrollbar.scrollbarHeight = 40;
                chartScrollbar.color = "#000000";
                chartScrollbar.autoGridCount = true;
                chart.addChartScrollbar(chartScrollbar);

                chart.addGraph(graph);

                chart.write("chartdiv");
            });
        </script>

    </head>

    <body>
        <form id="form1" runat="server">
        <div id="chartdiv" style="width: 100%; height: 400px;"></div>
        <div>
            <asp:DropDownList ID="DropDownListISP" runat="server" AutoPostBack="True" 
                onselectedindexchanged="DropDownListISP_SelectedIndexChanged">
            </asp:DropDownList>
        </div>
        </form>
    </body>

</html> 
```

以下是我的代码，

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Web;
using System.Web.UI;
using System.Web.UI.WebControls;
using System.Collections;
using MySql.Data.MySqlClient;
using System.Data;

public partial class Default : System.Web.UI.Page
{
    public string sjson;
    string connStr = "server=localhost;Database=db_tav;Uid=root;Pwd=pass;";

    protected void Page_Load(object sender, EventArgs e)
    {
        if (!IsPostBack) { 
            populateList();
            filterData("etisalat");
        }

    }
    private void populateList() {
        MySqlConnection connPopulate = new MySqlConnection(connStr);

        connPopulate.Open();
        MySqlCommand cmd = new MySqlCommand();

        cmd = connPopulate.CreateCommand();
        cmd.CommandText = "SELECT DISTINCT isp FROM tbl_correlateTest WHERE isp !=''";//

        MySqlDataReader ddlValues;
        ddlValues = cmd.ExecuteReader();

        DropDownListISP.DataSource = ddlValues;
        DropDownListISP.DataValueField = "isp";
        DropDownListISP.DataTextField = "isp";
        DropDownListISP.DataBind();

        connPopulate.Close();
        cmd.Connection.Close();
        cmd.Connection.Dispose();
    }
    private void filterData(string isp) {
        MySqlConnection conn = new MySqlConnection(connStr);

        conn.Open();

        MySqlCommand cmd = new MySqlCommand();

        cmd = conn.CreateCommand();
        cmd.CommandText = "SELECT IP, conLvl FROM tbl_correlateTest WHERE isp LIKE ?ispVal order by ip asc";//
        cmd.Prepare();
        cmd.Parameters.Add("?ispVal", MySqlDbType.VarChar, 100).Value = "%" + isp + "%";
        MySqlDataReader readIp = cmd.ExecuteReader(CommandBehavior.CloseConnection);

        ArrayList conRc = new ArrayList();

        while (readIp.Read())
        {
            string ipVal = readIp.GetString(0);
            string conLvlVal = readIp.GetString(1);
            conRc.Add(new Confidence(ipVal, conLvlVal));

        }

        System.Web.Script.Serialization.JavaScriptSerializer oSerializer = new System.Web.Script.Serialization.JavaScriptSerializer();
        sjson = oSerializer.Serialize(conRc);

        conn.Close();        
    }
    protected void DropDownListISP_SelectedIndexChanged(object sender, EventArgs e)
    {
        string isp = DropDownListISP.SelectedValue.ToString();
        isp = isp.Trim();
        filterData(isp);
    }

} 
```

请帮我解决这个问题，我尽我所能，但这个列表框总是返回第一个值:(非常感谢.. :)

* * *

编辑：

如果我执行以下操作而不是数据绑定，我可以检索所选项目的值。

```
 MySqlDataReader readIsp = cmd.ExecuteReader(CommandBehavior.CloseConnection);

    while (readIsp.Read())
    {
        string ispVal = readIsp.GetString(0);
        ispVal = ispVal.Trim();
        DropDownListISP.Items.Add(ispVal);

    } 
```

知道问题是什么吗？仅供参考.. :)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-04T11:16:16.587

If binding the data is raising the issue and adding the items is not, than it means that `populateList` is being called, and when dropdown is binded again, previous selection is washed out. Put a break point in the `populateList` method and see if it gets hit when you do a post back from dropdown.

# iphone - 带有自定义表格的 UisearchBar

> ID：12261559
> 
> 赞同：1
> 
> 时间：2012-09-04T10:28:35.923
> 
> 标签：iphone, objective-c, ios, xcode, search

在我的应用程序中，我使用范围实现了搜索栏。范围栏也没有被`searchBar.showsScopeBar = NO;`属性隐藏我应该如何更改它？

# sql - 使用游标时如何避免 T-SQL 中的重复 FETCH？

> ID：12261566
> 
> 赞同：11
> 
> 时间：2012-09-04T10:29:04.647
> 
> 标签：sql, sql-server, tsql

`FETCH`在 T-SQL 中，当从游标迭代结果时，在循环之前重复语句似乎是一种常见的做法`WHILE`。以下来自[Microsoft](http://msdn.microsoft.com/en-us/library/ms178642.aspx)的示例：

```
DECLARE Employee_Cursor CURSOR FOR
SELECT EmployeeID, Title FROM AdventureWorks2012.HumanResources.Employee
    WHERE JobTitle = 'Marketing Specialist';
OPEN Employee_Cursor;

FETCH NEXT FROM Employee_Cursor;
WHILE @@FETCH_STATUS = 0
    BEGIN
        FETCH NEXT FROM Employee_Cursor;
    END;
CLOSE Employee_Cursor;
DEALLOCATE Employee_Cursor;
GO 
```

（注意如何`FETCH NEXT FROM Employee_Cursor;`出现两次。）

如果`FETCH`选择一长串变量，那么我们有一个大的重复语句，它既丑陋，当然也是“非 DRY”代码。

我不知道后置条件控制流 T-SQL 语句，所以看来我不得不求助于 a`WHILE(TRUE)`然后`BREAK`when`@@FETCH_STATUS`不为零。这对我来说感觉很笨拙。

我还有什么其他选择？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2013-09-26T14:01:23.283

[Chris Oldwood](http://chrisoldwood.blogspot.co.uk/2011/09/sql-server-cursors-avoiding-duplicate.html)在网上发布了一个很好的结构，它做得非常优雅：

```
DECLARE @done bit = 0 

WHILE (@done = 0)  
BEGIN 
  -- Get the next author.  
  FETCH NEXT FROM authors_cursor  
  INTO @au_id, @au_fname, @au_lname  

  IF (@@FETCH_STATUS <> 0) 
  BEGIN 
    SET @done = 1 
    CONTINUE 
  END 

  -- 
  -- stuff done here with inner cursor elided 
  -- 
END 
```

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-09-04T10:53:31.953

这就是我所采取的（哦，真可惜）：

```
WHILE (1=1)
BEGIN
    FETCH NEXT FROM C1 INTO
   @foo,
   @bar,
   @bufar,
   @fubar,
   @bah,
   @fu,
   @foobar,
   @another,
   @column,
   @in,
   @the,
   @long,
   @list,
   @of,
   @variables,
   @used,
   @to,
   @retrieve,
   @all,
   @values,
   @for,
   @conversion

    IF (@@FETCH_STATUS <> 0)
    BEGIN
        BREAK
    END

     -- Use the variables here
END

CLOSE C1
DEALLOCATE C1 
```

你可以看到我为什么发布一个问题。我不喜欢`if`应该在`while`.

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-09-04T10:31:12.623

第一个`Fetch`不应该是 a `Fetch next`，只是 a `fetch`。

那你不是在重复自己。

我会花更多的精力来摆脱光标，而不是在 DRY 教条上，（但如果它真的很重要，你可以使用`GOTO`:) - 对不起，M. Dijkstra）

```
GOTO Dry
WHILE @@FETCH_STATUS = 0 
BEGIN 
    --- stuff here

Dry:
    FETCH NEXT FROM Employee_Cursor; 
END; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2020-10-14T21:15:28.377

这是我的微薄贡献。单个 FETCH 语句，没有 GOTO，没有 BREAK，没有 CONTINUE。

```
-- Sample table
DROP TABLE IF EXISTS #tblEmployee;
CREATE TABLE #tblEmployee(ID int, Title varchar(100));
INSERT INTO #tblEmployee VALUES (1, 'First One'), (2, 'Second Two'), (3, 'Third Three'), (3, '4th Four');
-- Cursor with one FETCH statement
DECLARE @bEOF bit=0, @sTitle varchar(200), @nID int;
DECLARE cur CURSOR LOCAL FOR SELECT ID, Title FROM #tblEmployee;
OPEN cur;
WHILE @bEOF=0
BEGIN
    FETCH NEXT FROM cur INTO @nID, @sTitle;
    IF @@FETCH_STATUS<>0
        SET @bEOF=1;
    ELSE
    BEGIN
        PRINT Str(@nID)+'. '+@sTitle;
    END;
END;
CLOSE cur;
DEALLOCATE cur;
-- Cleanup
DROP TABLE IF EXISTS #tblEmployee; 
```

* * *

## 回答 #5

> 赞同：-2
> 
> 时间：2012-09-04T11:16:09.990

很明显，游标是指向记录集中当前行的指针。但是，除非可以使用，否则仅仅指向是没有意义的。这里出现了 Fetch 语句。这从记录集中获取数据，将其存储在提供的变量中。因此，如果您删除第一个 fetch 语句，while 循环将不起作用，因为没有“FETCHED”记录进行操作，如果您删除最后一个 fetch 语句，“while”将不会循环。

因此，有必要让这两个 fetch 语句循环通过完整的记录集。

* * *

## 回答 #6

> 赞同：-4
> 
> 时间：2012-09-04T10:34:14.223

简单地说你不能......这就是 SQL 中大多数 where 语句的工作方式。您需要在循环之前获取第一行，然后在 while 语句中再次执行。

更好的问题是如何摆脱光标并尝试在没有它的情况下解决您的查询。

# responsive-design - 响应式设计中的广告横幅

> ID：12261568
> 
> 赞同：0
> 
> 时间：2012-09-04T10:29:12.760
> 
> 标签：responsive-design, deprecated, fluid-layout, banner, banner-ads

我正在开发一个响应式网站，我想放置几个来自 Google 的广告横幅。由于布局灵活流畅，横幅的宽度和高度应按比例缩小并适应相对定义的父元素。

问题是 Google 横幅在 img 标记中加载了一些不推荐使用的属性，例如宽度和高度。

有什么方法可以忽略这些属性，以便 Google 横幅与流畅的布局相匹配并且不会爆发？

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-04T10:34:32.113

Google 使用这些已弃用属性的原因是为了阻止人们缩小以预定义尺寸显示的广告。我认为缩小它们甚至违反了 TOS，但我不确定。

在任何情况下，您都必须首先使用 Ajax 加载图像代码，处理属性（删除它们），然后插入图像。我不知道这是否可能，但我认为你不应该这样做。也许改用文字广告？

# ruby-on-rails - Rails：带有描述的Formtastic字段

> ID：12261570
> 
> 赞同：1
> 
> 时间：2012-09-04T10:29:28.903
> 
> 标签：ruby-on-rails, formtastic

如何向使用 formtastic 制作的表单字段添加描述？

我试过这个：

```
f.input :first_name, description: 'Please insert your first_name' 
```

描述应该出现在表单字段的正下方。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-04T10:58:26.530

formtastic 字段没有描述选项，但您可以使用 :hint 选项

```
f.input :first_name, :hint => 'Please insert your first_name' 
```

# java - 如何为新工作区设置默认代码格式和模板

> ID：12261571
> 
> 赞同：8
> 
> 时间：2012-09-04T10:29:30.880
> 
> 标签：java, eclipse

Eclipse 允许 Java 类文件使用自定义格式和模板。更改这些设置的常规方法是从 Windows | 首选项菜单，然后在首选项对话框中的 Java > 代码样式。格式化程序控制大括号、缩进等的工作方式。模板控制新类文件中出现的文件、类和方法头的类型。

我有两个文件用于这些设置，我必须导入并设置它们才能生效。有时我创建了一个工作区而忘记设置模板。然后格式化会选择错误的样式或省略样板，如果我在签入时没有赶上。这会导致文件不标准，如果他们犯了错误，可能会导致其他人的合并冲突，反之亦然。

是否可以轻松修改 Eclipse，使其在创建新工作区时始终默认为自定义格式和模板？即使我必须将 XML 放入 Eclipse 文件夹中的某个位置并调整一些设置，我也希望能够做到这一点，并为我团队中的其他人提供指示以执行相同的操作。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-04T10:33:14.907

看看[工作区机械师](http://code.google.com/a/eclipselabs.org/p/workspacemechanic/)。它在不同的工作空间上同步工作空间属性。所以也是新的。您可以将您的参考工作空间配置复制到工作空间机制目录中，它将自动安装在新的工作空间中。

# java - 无法使用 NetBeans 部署 WebService

> ID：12261576
> 
> 赞同：3
> 
> 时间：2012-09-04T10:29:45.970
> 
> 标签：java, web-services, netbeans, deployment, glassfish

我正在尝试在 WebLogic 10.3 上将 WebService 项目部署到 GlassFish 3.1.2，但均未成功。我尝试运行其他简单的 webService 进行测试，它在 WL 和 GF 上运行良好。问题是因为我使用 JAXB，但我不知道如何修复它。

GF 堆栈跟踪：

```
WARNING: Deployment failed
com.sun.xml.ws.spi.db.DatabindingException: com.sun.xml.bind.v2.runtime.IllegalAnnotationsException: 1 counts of IllegalAnnotationExceptions
javax.xml.transform.SourceLocator is an interface, and JAXB can't handle interfaces.
    this problem is related to the following location:
        at javax.xml.transform.SourceLocator
        at public javax.xml.transform.SourceLocator transform.jaxws.TransformerConfigurationExceptionBean.locator
        at transform.jaxws.TransformerConfigurationExceptionBean
    at com.sun.xml.ws.db.glassfish.JAXBRIContextFactory.newContext(JAXBRIContextFactory.java:101)
    at com.sun.xml.ws.spi.db.BindingContextFactory.create(BindingContextFactory.java:182)
    at com.sun.xml.ws.model.AbstractSEIModelImpl$1.run(AbstractSEIModelImpl.java:213)
    at com.sun.xml.ws.model.AbstractSEIModelImpl$1.run(AbstractSEIModelImpl.java:186)
    at java.security.AccessController.doPrivileged(Native Method)
    at com.sun.xml.ws.model.AbstractSEIModelImpl.createJAXBContext(AbstractSEIModelImpl.java:186)
    at com.sun.xml.ws.model.AbstractSEIModelImpl.postProcess(AbstractSEIModelImpl.java:111)
    at com.sun.xml.ws.model.RuntimeModeler.buildRuntimeModel(RuntimeModeler.java:318)
    at com.sun.xml.ws.db.DatabindingImpl.<init>(DatabindingImpl.java:99)
    at com.sun.xml.ws.db.DatabindingProviderImpl.create(DatabindingProviderImpl.java:74)
    at com.sun.xml.ws.db.DatabindingProviderImpl.create(DatabindingProviderImpl.java:58)
    at com.sun.xml.ws.db.DatabindingFactoryImpl.createRuntime(DatabindingFactoryImpl.java:130)
    at com.sun.xml.ws.server.EndpointFactory.createSEIModel(EndpointFactory.java:433)
    at com.sun.xml.ws.server.EndpointFactory.create(EndpointFactory.java:268)
    at com.sun.xml.ws.server.EndpointFactory.createEndpoint(EndpointFactory.java:145)
    at com.sun.xml.ws.api.server.WSEndpoint.create(WSEndpoint.java:569)
    at com.sun.xml.ws.api.server.WSEndpoint.create(WSEndpoint.java:552)
    at com.sun.xml.ws.api.server.WSEndpoint.create(WSEndpoint.java:623)
    at org.glassfish.webservices.WSServletContextListener.registerEndpoint(WSServletContextListener.java:282)
    at org.glassfish.webservices.WSServletContextListener.contextInitialized(WSServletContextListener.java:102)
    at org.apache.catalina.core.StandardContext.contextListenerStart(StandardContext.java:4750)
    at com.sun.enterprise.web.WebModule.contextListenerStart(WebModule.java:550)
    at org.apache.catalina.core.StandardContext.start(StandardContext.java:5366)
    at com.sun.enterprise.web.WebModule.start(WebModule.java:498)
    at org.apache.catalina.core.ContainerBase.addChildInternal(ContainerBase.java:917)
    at org.apache.catalina.core.ContainerBase.addChild(ContainerBase.java:901)
    at org.apache.catalina.core.StandardHost.addChild(StandardHost.java:733)
    at com.sun.enterprise.web.WebContainer.loadWebModule(WebContainer.java:2018)
    at com.sun.enterprise.web.WebContainer.loadWebModule(WebContainer.java:1669)
    at com.sun.enterprise.web.WebApplication.start(WebApplication.java:109)
    at org.glassfish.internal.data.EngineRef.start(EngineRef.java:130)
    at org.glassfish.internal.data.ModuleInfo.start(ModuleInfo.java:269)
    at org.glassfish.internal.data.ApplicationInfo.start(ApplicationInfo.java:301)
    at com.sun.enterprise.v3.server.ApplicationLifecycle.deploy(ApplicationLifecycle.java:461)
    at com.sun.enterprise.v3.server.ApplicationLifecycle.deploy(ApplicationLifecycle.java:240)
    at org.glassfish.deployment.admin.DeployCommand.execute(DeployCommand.java:389)
    at com.sun.enterprise.v3.admin.CommandRunnerImpl$1.execute(CommandRunnerImpl.java:348)
    at com.sun.enterprise.v3.admin.CommandRunnerImpl.doCommand(CommandRunnerImpl.java:363)
    at com.sun.enterprise.v3.admin.CommandRunnerImpl.doCommand(CommandRunnerImpl.java:1085)
    at com.sun.enterprise.v3.admin.CommandRunnerImpl.access$1200(CommandRunnerImpl.java:95)
    at com.sun.enterprise.v3.admin.CommandRunnerImpl$ExecutionContext.execute(CommandRunnerImpl.java:1291)
    at com.sun.enterprise.v3.admin.CommandRunnerImpl$ExecutionContext.execute(CommandRunnerImpl.java:1259)
    at com.sun.enterprise.v3.admin.AdminAdapter.doCommand(AdminAdapter.java:461)
    at com.sun.enterprise.v3.admin.AdminAdapter.service(AdminAdapter.java:212)
    at com.sun.grizzly.tcp.http11.GrizzlyAdapter.service(GrizzlyAdapter.java:179)
    at com.sun.enterprise.v3.server.HK2Dispatcher.dispath(HK2Dispatcher.java:117)
    at com.sun.enterprise.v3.services.impl.ContainerMapper$Hk2DispatcherCallable.call(ContainerMapper.java:354)
    at com.sun.enterprise.v3.services.impl.ContainerMapper.service(ContainerMapper.java:195)
    at com.sun.grizzly.http.ProcessorTask.invokeAdapter(ProcessorTask.java:849)
    at com.sun.grizzly.http.ProcessorTask.doProcess(ProcessorTask.java:746)
    at com.sun.grizzly.http.ProcessorTask.process(ProcessorTask.java:1045)
    at com.sun.grizzly.http.DefaultProtocolFilter.execute(DefaultProtocolFilter.java:228)
    at com.sun.grizzly.DefaultProtocolChain.executeProtocolFilter(DefaultProtocolChain.java:137)
    at com.sun.grizzly.DefaultProtocolChain.execute(DefaultProtocolChain.java:104)
    at com.sun.grizzly.DefaultProtocolChain.execute(DefaultProtocolChain.java:90)
    at com.sun.grizzly.http.HttpProtocolChain.execute(HttpProtocolChain.java:79)
    at com.sun.grizzly.ProtocolChainContextTask.doCall(ProtocolChainContextTask.java:54)
    at com.sun.grizzly.SelectionKeyContextTask.call(SelectionKeyContextTask.java:59)
    at com.sun.grizzly.ContextTask.run(ContextTask.java:71)
    at com.sun.grizzly.util.AbstractThreadPool$Worker.doWork(AbstractThreadPool.java:532)
    at com.sun.grizzly.util.AbstractThreadPool$Worker.run(AbstractThreadPool.java:513)
    at java.lang.Thread.run(Thread.java:722)
Caused by: com.sun.xml.bind.v2.runtime.IllegalAnnotationsException: 1 counts of IllegalAnnotationExceptions
javax.xml.transform.SourceLocator is an interface, and JAXB can't handle interfaces.
    this problem is related to the following location:
        at javax.xml.transform.SourceLocator
        at public javax.xml.transform.SourceLocator transform.jaxws.TransformerConfigurationExceptionBean.locator
        at transform.jaxws.TransformerConfigurationExceptionBean
    at com.sun.xml.bind.v2.runtime.IllegalAnnotationsException$Builder.check(IllegalAnnotationsException.java:106)
    at com.sun.xml.bind.v2.runtime.JAXBContextImpl.getTypeInfoSet(JAXBContextImpl.java:466)
    at com.sun.xml.bind.v2.runtime.JAXBContextImpl.<init>(JAXBContextImpl.java:298)
    at com.sun.xml.bind.v2.runtime.JAXBContextImpl.<init>(JAXBContextImpl.java:141)
    at com.sun.xml.bind.v2.runtime.JAXBContextImpl$JAXBContextBuilder.build(JAXBContextImpl.java:1163)
    at com.sun.xml.bind.v2.ContextFactory.createContext(ContextFactory.java:188)
    at com.sun.xml.bind.api.JAXBRIContext.newInstance(JAXBRIContext.java:111)
    at com.sun.xml.ws.developer.JAXBContextFactory$1.createJAXBContext(JAXBContextFactory.java:113)
    at com.sun.xml.ws.db.glassfish.JAXBRIContextFactory.newContext(JAXBRIContextFactory.java:89)
    ... 61 more

SEVERE: PWC1306: Startup of context /BPEL2 failed due to previous errors
SEVERE: PWC1305: Exception during cleanup after start failed
org.apache.catalina.LifecycleException: PWC2769: Manager has not yet been started
    at org.apache.catalina.session.StandardManager.stop(StandardManager.java:873)
    at org.apache.catalina.core.StandardContext.stop(StandardContext.java:5571)
    at com.sun.enterprise.web.WebModule.stop(WebModule.java:527)
    at org.apache.catalina.core.StandardContext.start(StandardContext.java:5384)
    at com.sun.enterprise.web.WebModule.start(WebModule.java:498)
    at org.apache.catalina.core.ContainerBase.addChildInternal(ContainerBase.java:917)
    at org.apache.catalina.core.ContainerBase.addChild(ContainerBase.java:901)
    at org.apache.catalina.core.StandardHost.addChild(StandardHost.java:733)
    at com.sun.enterprise.web.WebContainer.loadWebModule(WebContainer.java:2018)
    at com.sun.enterprise.web.WebContainer.loadWebModule(WebContainer.java:1669)
    at com.sun.enterprise.web.WebApplication.start(WebApplication.java:109)
    at org.glassfish.internal.data.EngineRef.start(EngineRef.java:130)
    at org.glassfish.internal.data.ModuleInfo.start(ModuleInfo.java:269)
    at org.glassfish.internal.data.ApplicationInfo.start(ApplicationInfo.java:301)
    at com.sun.enterprise.v3.server.ApplicationLifecycle.deploy(ApplicationLifecycle.java:461)
    at com.sun.enterprise.v3.server.ApplicationLifecycle.deploy(ApplicationLifecycle.java:240)
    at org.glassfish.deployment.admin.DeployCommand.execute(DeployCommand.java:389)
    at com.sun.enterprise.v3.admin.CommandRunnerImpl$1.execute(CommandRunnerImpl.java:348)
    at com.sun.enterprise.v3.admin.CommandRunnerImpl.doCommand(CommandRunnerImpl.java:363)
    at com.sun.enterprise.v3.admin.CommandRunnerImpl.doCommand(CommandRunnerImpl.java:1085)
    at com.sun.enterprise.v3.admin.CommandRunnerImpl.access$1200(CommandRunnerImpl.java:95)
    at com.sun.enterprise.v3.admin.CommandRunnerImpl$ExecutionContext.execute(CommandRunnerImpl.java:1291)
    at com.sun.enterprise.v3.admin.CommandRunnerImpl$ExecutionContext.execute(CommandRunnerImpl.java:1259)
    at com.sun.enterprise.v3.admin.AdminAdapter.doCommand(AdminAdapter.java:461)
    at com.sun.enterprise.v3.admin.AdminAdapter.service(AdminAdapter.java:212)
    at com.sun.grizzly.tcp.http11.GrizzlyAdapter.service(GrizzlyAdapter.java:179)
    at com.sun.enterprise.v3.server.HK2Dispatcher.dispath(HK2Dispatcher.java:117)
    at com.sun.enterprise.v3.services.impl.ContainerMapper$Hk2DispatcherCallable.call(ContainerMapper.java:354)
    at com.sun.enterprise.v3.services.impl.ContainerMapper.service(ContainerMapper.java:195)
    at com.sun.grizzly.http.ProcessorTask.invokeAdapter(ProcessorTask.java:849)
    at com.sun.grizzly.http.ProcessorTask.doProcess(ProcessorTask.java:746)
    at com.sun.grizzly.http.ProcessorTask.process(ProcessorTask.java:1045)
    at com.sun.grizzly.http.DefaultProtocolFilter.execute(DefaultProtocolFilter.java:228)
    at com.sun.grizzly.DefaultProtocolChain.executeProtocolFilter(DefaultProtocolChain.java:137)
    at com.sun.grizzly.DefaultProtocolChain.execute(DefaultProtocolChain.java:104)
    at com.sun.grizzly.DefaultProtocolChain.execute(DefaultProtocolChain.java:90)
    at com.sun.grizzly.http.HttpProtocolChain.execute(HttpProtocolChain.java:79)
    at com.sun.grizzly.ProtocolChainContextTask.doCall(ProtocolChainContextTask.java:54)
    at com.sun.grizzly.SelectionKeyContextTask.call(SelectionKeyContextTask.java:59)
    at com.sun.grizzly.ContextTask.run(ContextTask.java:71)
    at com.sun.grizzly.util.AbstractThreadPool$Worker.doWork(AbstractThreadPool.java:532)
    at com.sun.grizzly.util.AbstractThreadPool$Worker.run(AbstractThreadPool.java:513)
    at java.lang.Thread.run(Thread.java:722)

SEVERE: ContainerBase.addChild: start: 
org.apache.catalina.LifecycleException: java.lang.RuntimeException: Servlet web service endpoint '' failure
    at org.apache.catalina.core.StandardContext.start(StandardContext.java:5389)
    at com.sun.enterprise.web.WebModule.start(WebModule.java:498)
    at org.apache.catalina.core.ContainerBase.addChildInternal(ContainerBase.java:917)
    at org.apache.catalina.core.ContainerBase.addChild(ContainerBase.java:901)
    at org.apache.catalina.core.StandardHost.addChild(StandardHost.java:733)
    at com.sun.enterprise.web.WebContainer.loadWebModule(WebContainer.java:2018)
    at com.sun.enterprise.web.WebContainer.loadWebModule(WebContainer.java:1669)
    at com.sun.enterprise.web.WebApplication.start(WebApplication.java:109)
    at org.glassfish.internal.data.EngineRef.start(EngineRef.java:130)
    at org.glassfish.internal.data.ModuleInfo.start(ModuleInfo.java:269)
    at org.glassfish.internal.data.ApplicationInfo.start(ApplicationInfo.java:301)
    at com.sun.enterprise.v3.server.ApplicationLifecycle.deploy(ApplicationLifecycle.java:461)
    at com.sun.enterprise.v3.server.ApplicationLifecycle.deploy(ApplicationLifecycle.java:240)
    at org.glassfish.deployment.admin.DeployCommand.execute(DeployCommand.java:389)
    at com.sun.enterprise.v3.admin.CommandRunnerImpl$1.execute(CommandRunnerImpl.java:348)
    at com.sun.enterprise.v3.admin.CommandRunnerImpl.doCommand(CommandRunnerImpl.java:363)
    at com.sun.enterprise.v3.admin.CommandRunnerImpl.doCommand(CommandRunnerImpl.java:1085)
    at com.sun.enterprise.v3.admin.CommandRunnerImpl.access$1200(CommandRunnerImpl.java:95)
    at com.sun.enterprise.v3.admin.CommandRunnerImpl$ExecutionContext.execute(CommandRunnerImpl.java:1291)
    at com.sun.enterprise.v3.admin.CommandRunnerImpl$ExecutionContext.execute(CommandRunnerImpl.java:1259)
    at com.sun.enterprise.v3.admin.AdminAdapter.doCommand(AdminAdapter.java:461)
    at com.sun.enterprise.v3.admin.AdminAdapter.service(AdminAdapter.java:212)
    at com.sun.grizzly.tcp.http11.GrizzlyAdapter.service(GrizzlyAdapter.java:179)
    at com.sun.enterprise.v3.server.HK2Dispatcher.dispath(HK2Dispatcher.java:117)
    at com.sun.enterprise.v3.services.impl.ContainerMapper$Hk2DispatcherCallable.call(ContainerMapper.java:354)
    at com.sun.enterprise.v3.services.impl.ContainerMapper.service(ContainerMapper.java:195)
    at com.sun.grizzly.http.ProcessorTask.invokeAdapter(ProcessorTask.java:849)
    at com.sun.grizzly.http.ProcessorTask.doProcess(ProcessorTask.java:746)
    at com.sun.grizzly.http.ProcessorTask.process(ProcessorTask.java:1045)
    at com.sun.grizzly.http.DefaultProtocolFilter.execute(DefaultProtocolFilter.java:228)
    at com.sun.grizzly.DefaultProtocolChain.executeProtocolFilter(DefaultProtocolChain.java:137)
    at com.sun.grizzly.DefaultProtocolChain.execute(DefaultProtocolChain.java:104)
    at com.sun.grizzly.DefaultProtocolChain.execute(DefaultProtocolChain.java:90)
    at com.sun.grizzly.http.HttpProtocolChain.execute(HttpProtocolChain.java:79)
    at com.sun.grizzly.ProtocolChainContextTask.doCall(ProtocolChainContextTask.java:54)
    at com.sun.grizzly.SelectionKeyContextTask.call(SelectionKeyContextTask.java:59)
    at com.sun.grizzly.ContextTask.run(ContextTask.java:71)
    at com.sun.grizzly.util.AbstractThreadPool$Worker.doWork(AbstractThreadPool.java:532)
    at com.sun.grizzly.util.AbstractThreadPool$Worker.run(AbstractThreadPool.java:513)
    at java.lang.Thread.run(Thread.java:722)
Caused by: java.lang.RuntimeException: Servlet web service endpoint '' failure
    at org.glassfish.webservices.WSServletContextListener.contextInitialized(WSServletContextListener.java:107)
    at org.apache.catalina.core.StandardContext.contextListenerStart(StandardContext.java:4750)
    at com.sun.enterprise.web.WebModule.contextListenerStart(WebModule.java:550)
    at org.apache.catalina.core.StandardContext.start(StandardContext.java:5366)
    ... 39 more
Caused by: com.sun.xml.ws.spi.db.DatabindingException: com.sun.xml.bind.v2.runtime.IllegalAnnotationsException: 1 counts of IllegalAnnotationExceptions
javax.xml.transform.SourceLocator is an interface, and JAXB can't handle interfaces.
    this problem is related to the following location:
        at javax.xml.transform.SourceLocator
        at public javax.xml.transform.SourceLocator transform.jaxws.TransformerConfigurationExceptionBean.locator
        at transform.jaxws.TransformerConfigurationExceptionBean
    at com.sun.xml.ws.db.glassfish.JAXBRIContextFactory.newContext(JAXBRIContextFactory.java:101)
    at com.sun.xml.ws.spi.db.BindingContextFactory.create(BindingContextFactory.java:182)
    at com.sun.xml.ws.model.AbstractSEIModelImpl$1.run(AbstractSEIModelImpl.java:213)
    at com.sun.xml.ws.model.AbstractSEIModelImpl$1.run(AbstractSEIModelImpl.java:186)
    at java.security.AccessController.doPrivileged(Native Method)
    at com.sun.xml.ws.model.AbstractSEIModelImpl.createJAXBContext(AbstractSEIModelImpl.java:186)
    at com.sun.xml.ws.model.AbstractSEIModelImpl.postProcess(AbstractSEIModelImpl.java:111)
    at com.sun.xml.ws.model.RuntimeModeler.buildRuntimeModel(RuntimeModeler.java:318)
    at com.sun.xml.ws.db.DatabindingImpl.<init>(DatabindingImpl.java:99)
    at com.sun.xml.ws.db.DatabindingProviderImpl.create(DatabindingProviderImpl.java:74)
    at com.sun.xml.ws.db.DatabindingProviderImpl.create(DatabindingProviderImpl.java:58)
    at com.sun.xml.ws.db.DatabindingFactoryImpl.createRuntime(DatabindingFactoryImpl.java:130)
    at com.sun.xml.ws.server.EndpointFactory.createSEIModel(EndpointFactory.java:433)
    at com.sun.xml.ws.server.EndpointFactory.create(EndpointFactory.java:268)
    at com.sun.xml.ws.server.EndpointFactory.createEndpoint(EndpointFactory.java:145)
    at com.sun.xml.ws.api.server.WSEndpoint.create(WSEndpoint.java:569)
    at com.sun.xml.ws.api.server.WSEndpoint.create(WSEndpoint.java:552)
    at com.sun.xml.ws.api.server.WSEndpoint.create(WSEndpoint.java:623)
    at org.glassfish.webservices.WSServletContextListener.registerEndpoint(WSServletContextListener.java:282)
    at org.glassfish.webservices.WSServletContextListener.contextInitialized(WSServletContextListener.java:102)
    ... 42 more
Caused by: com.sun.xml.bind.v2.runtime.IllegalAnnotationsException: 1 counts of IllegalAnnotationExceptions
javax.xml.transform.SourceLocator is an interface, and JAXB can't handle interfaces.
    this problem is related to the following location:
        at javax.xml.transform.SourceLocator
        at public javax.xml.transform.SourceLocator transform.jaxws.TransformerConfigurationExceptionBean.locator
        at transform.jaxws.TransformerConfigurationExceptionBean
    at com.sun.xml.bind.v2.runtime.IllegalAnnotationsException$Builder.check(IllegalAnnotationsException.java:106)
    at com.sun.xml.bind.v2.runtime.JAXBContextImpl.getTypeInfoSet(JAXBContextImpl.java:466)
    at com.sun.xml.bind.v2.runtime.JAXBContextImpl.<init>(JAXBContextImpl.java:298)
    at com.sun.xml.bind.v2.runtime.JAXBContextImpl.<init>(JAXBContextImpl.java:141)
    at com.sun.xml.bind.v2.runtime.JAXBContextImpl$JAXBContextBuilder.build(JAXBContextImpl.java:1163)
    at com.sun.xml.bind.v2.ContextFactory.createContext(ContextFactory.java:188)
    at com.sun.xml.bind.api.JAXBRIContext.newInstance(JAXBRIContext.java:111)
    at com.sun.xml.ws.developer.JAXBContextFactory$1.createJAXBContext(JAXBContextFactory.java:113)
    at com.sun.xml.ws.db.glassfish.JAXBRIContextFactory.newContext(JAXBRIContextFactory.java:89)
    ... 61 more

WARNING: java.lang.IllegalStateException: ContainerBase.addChild: start: org.apache.catalina.LifecycleException: java.lang.RuntimeException: Servlet web service endpoint '' failure
java.lang.IllegalStateException: ContainerBase.addChild: start: org.apache.catalina.LifecycleException: java.lang.RuntimeException: Servlet web service endpoint '' failure
    at org.apache.catalina.core.ContainerBase.addChildInternal(ContainerBase.java:921)
    at org.apache.catalina.core.ContainerBase.addChild(ContainerBase.java:901)
    at org.apache.catalina.core.StandardHost.addChild(StandardHost.java:733)
    at com.sun.enterprise.web.WebContainer.loadWebModule(WebContainer.java:2018)
    at com.sun.enterprise.web.WebContainer.loadWebModule(WebContainer.java:1669)
    at com.sun.enterprise.web.WebApplication.start(WebApplication.java:109)
    at org.glassfish.internal.data.EngineRef.start(EngineRef.java:130)
    at org.glassfish.internal.data.ModuleInfo.start(ModuleInfo.java:269)
    at org.glassfish.internal.data.ApplicationInfo.start(ApplicationInfo.java:301)
    at com.sun.enterprise.v3.server.ApplicationLifecycle.deploy(ApplicationLifecycle.java:461)
    at com.sun.enterprise.v3.server.ApplicationLifecycle.deploy(ApplicationLifecycle.java:240)
    at org.glassfish.deployment.admin.DeployCommand.execute(DeployCommand.java:389)
    at com.sun.enterprise.v3.admin.CommandRunnerImpl$1.execute(CommandRunnerImpl.java:348)
    at com.sun.enterprise.v3.admin.CommandRunnerImpl.doCommand(CommandRunnerImpl.java:363)
    at com.sun.enterprise.v3.admin.CommandRunnerImpl.doCommand(CommandRunnerImpl.java:1085)
    at com.sun.enterprise.v3.admin.CommandRunnerImpl.access$1200(CommandRunnerImpl.java:95)
    at com.sun.enterprise.v3.admin.CommandRunnerImpl$ExecutionContext.execute(CommandRunnerImpl.java:1291)
    at com.sun.enterprise.v3.admin.CommandRunnerImpl$ExecutionContext.execute(CommandRunnerImpl.java:1259)
    at com.sun.enterprise.v3.admin.AdminAdapter.doCommand(AdminAdapter.java:461)
    at com.sun.enterprise.v3.admin.AdminAdapter.service(AdminAdapter.java:212)
    at com.sun.grizzly.tcp.http11.GrizzlyAdapter.service(GrizzlyAdapter.java:179)
    at com.sun.enterprise.v3.server.HK2Dispatcher.dispath(HK2Dispatcher.java:117)
    at com.sun.enterprise.v3.services.impl.ContainerMapper$Hk2DispatcherCallable.call(ContainerMapper.java:354)
    at com.sun.enterprise.v3.services.impl.ContainerMapper.service(ContainerMapper.java:195)
    at com.sun.grizzly.http.ProcessorTask.invokeAdapter(ProcessorTask.java:849)
    at com.sun.grizzly.http.ProcessorTask.doProcess(ProcessorTask.java:746)
    at com.sun.grizzly.http.ProcessorTask.process(ProcessorTask.java:1045)
    at com.sun.grizzly.http.DefaultProtocolFilter.execute(DefaultProtocolFilter.java:228)
    at com.sun.grizzly.DefaultProtocolChain.executeProtocolFilter(DefaultProtocolChain.java:137)
    at com.sun.grizzly.DefaultProtocolChain.execute(DefaultProtocolChain.java:104)
    at com.sun.grizzly.DefaultProtocolChain.execute(DefaultProtocolChain.java:90)
    at com.sun.grizzly.http.HttpProtocolChain.execute(HttpProtocolChain.java:79)
    at com.sun.grizzly.ProtocolChainContextTask.doCall(ProtocolChainContextTask.java:54)
    at com.sun.grizzly.SelectionKeyContextTask.call(SelectionKeyContextTask.java:59)
    at com.sun.grizzly.ContextTask.run(ContextTask.java:71)
    at com.sun.grizzly.util.AbstractThreadPool$Worker.doWork(AbstractThreadPool.java:532)
    at com.sun.grizzly.util.AbstractThreadPool$Worker.run(AbstractThreadPool.java:513)
    at java.lang.Thread.run(Thread.java:722)

SEVERE: Exception while invoking class com.sun.enterprise.web.WebApplication start method
java.lang.Exception: java.lang.IllegalStateException: ContainerBase.addChild: start: org.apache.catalina.LifecycleException: java.lang.RuntimeException: Servlet web service endpoint '' failure
    at com.sun.enterprise.web.WebApplication.start(WebApplication.java:138)
    at org.glassfish.internal.data.EngineRef.start(EngineRef.java:130)
    at org.glassfish.internal.data.ModuleInfo.start(ModuleInfo.java:269)
    at org.glassfish.internal.data.ApplicationInfo.start(ApplicationInfo.java:301)
    at com.sun.enterprise.v3.server.ApplicationLifecycle.deploy(ApplicationLifecycle.java:461)
    at com.sun.enterprise.v3.server.ApplicationLifecycle.deploy(ApplicationLifecycle.java:240)
    at org.glassfish.deployment.admin.DeployCommand.execute(DeployCommand.java:389)
    at com.sun.enterprise.v3.admin.CommandRunnerImpl$1.execute(CommandRunnerImpl.java:348)
    at com.sun.enterprise.v3.admin.CommandRunnerImpl.doCommand(CommandRunnerImpl.java:363)
    at com.sun.enterprise.v3.admin.CommandRunnerImpl.doCommand(CommandRunnerImpl.java:1085)
    at com.sun.enterprise.v3.admin.CommandRunnerImpl.access$1200(CommandRunnerImpl.java:95)
    at com.sun.enterprise.v3.admin.CommandRunnerImpl$ExecutionContext.execute(CommandRunnerImpl.java:1291)
    at com.sun.enterprise.v3.admin.CommandRunnerImpl$ExecutionContext.execute(CommandRunnerImpl.java:1259)
    at com.sun.enterprise.v3.admin.AdminAdapter.doCommand(AdminAdapter.java:461)
    at com.sun.enterprise.v3.admin.AdminAdapter.service(AdminAdapter.java:212)
    at com.sun.grizzly.tcp.http11.GrizzlyAdapter.service(GrizzlyAdapter.java:179)
    at com.sun.enterprise.v3.server.HK2Dispatcher.dispath(HK2Dispatcher.java:117)
    at com.sun.enterprise.v3.services.impl.ContainerMapper$Hk2DispatcherCallable.call(ContainerMapper.java:354)
    at com.sun.enterprise.v3.services.impl.ContainerMapper.service(ContainerMapper.java:195)
    at com.sun.grizzly.http.ProcessorTask.invokeAdapter(ProcessorTask.java:849)
    at com.sun.grizzly.http.ProcessorTask.doProcess(ProcessorTask.java:746)
    at com.sun.grizzly.http.ProcessorTask.process(ProcessorTask.java:1045)
    at com.sun.grizzly.http.DefaultProtocolFilter.execute(DefaultProtocolFilter.java:228)
    at com.sun.grizzly.DefaultProtocolChain.executeProtocolFilter(DefaultProtocolChain.java:137)
    at com.sun.grizzly.DefaultProtocolChain.execute(DefaultProtocolChain.java:104)
    at com.sun.grizzly.DefaultProtocolChain.execute(DefaultProtocolChain.java:90)
    at com.sun.grizzly.http.HttpProtocolChain.execute(HttpProtocolChain.java:79)
    at com.sun.grizzly.ProtocolChainContextTask.doCall(ProtocolChainContextTask.java:54)
    at com.sun.grizzly.SelectionKeyContextTask.call(SelectionKeyContextTask.java:59)
    at com.sun.grizzly.ContextTask.run(ContextTask.java:71)
    at com.sun.grizzly.util.AbstractThreadPool$Worker.doWork(AbstractThreadPool.java:532)
    at com.sun.grizzly.util.AbstractThreadPool$Worker.run(AbstractThreadPool.java:513)
    at java.lang.Thread.run(Thread.java:722)

SEVERE: Exception while loading the app
SEVERE: Exception while loading the app : java.lang.IllegalStateException: ContainerBase.addChild: start: org.apache.catalina.LifecycleException: java.lang.RuntimeException: Servlet web service endpoint '' failure 
```

主类在方法 createPathInGraph() 中使用 JAXB：

```
@WebService(serviceName = "Transform")
public class Transform {

[..]

    public List<SSDLNode[]> createPathInGraph(String XML) throws JAXBException,
            MalformedURLException, IOException {
        StringReader XMLReader = new StringReader(XML);
        JAXBContext jb = JAXBContext.newInstance("ssdl");
        Unmarshaller unmarshaller = jb.createUnmarshaller();
        JAXBElement<SSDLSmartServiceGraph> SSDLNodes = (JAXBElement<SSDLSmartServiceGraph>) unmarshaller.unmarshal(XMLReader);
        SSDLSmartServiceGraph el = SSDLNodes.getValue();

        ArrayList<SSDLNode> nodes = (ArrayList<SSDLNode>) el.getNodes().getNode();

        List<SSDLNode[]> list = new ArrayList<SSDLNode[]>();
        List<SSDLNode> temp = new ArrayList<SSDLNode>();

[..] 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-09-20T13:13:05.267

检查如何使用[jaxb处理接口](http://www.mkyong.com/webservices/jax-ws/spring-jax-ws-xxx-is-an-interface-and-jaxb-cant-handle-interfaces/)

# java - 如何使用 JPA 解决 javax.persistence.EntityNotFoundException（而不是使用 @NotFound）

> ID：12261579
> 
> 赞同：20
> 
> 时间：2012-09-04T10:29:55.800
> 
> 标签：java, hibernate, jpa, persistence

我们正在使用 JPA 从数据库中加载一些东西。一些实体之间可能有可选的关系，例如

```
@Entity
public class First {
    ....
    @OneToOne(cascade = {CascadeType.PERSIST, CascadeType.MERGE, CascadeType.REFRESH, CascadeType.DETACH})
    @JoinColumns(value = {
        JoinColumn(name = "A_ID", referencedColumnName = "A_ID", insertable = false, updatable = false), 
        JoinColumn(name = "B_ID", referencedColumnName = "B_ID", insertable = false, updatable = false)})
    private Second second; 
```

当数据库中存在此关联时，一切正常。如果不是，我会得到一个`javax.persistence.EntityNotFoundException`
What I Want is 而不是异常，如果关联不存在，则将此字段设置为 NULL。

我尝试了几种不同的方法，例如在关系注释中使用 optional=true （顺便说一句，这是默认选项），将其设置为 Nullable 等。似乎没有什么能解决问题，似乎所有这些选项都被忽略了。

我发现很多链接都提到了同样的问题（以及stackoverflow中的一些问题），但在所有这些链接中，建议是使用`@NotFound`来自Hibernate的注释。但是我们不希望对 Hibernate 有任何依赖（我们希望保持一切纯 JPA）。

你们中有人知道解决这个问题的其他方法吗？

非常感谢您的帮助！

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-10-23T13:42:56.533

以下是此问题的替代解决方案。我不得不建立在一个关系有时会损坏的旧数据库之上。这就是我仅使用 JPA 解决它的方法。

```
@PostLoad
public void postLoad(){
    try {
        if(getObject() != null && getObject().getId() == 0){
            setObject(null);
        }
    }
    catch (EntityNotFoundException e){
        setObject(null);
    }
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-04T17:35:26.357

尝试将参数添加`optional = true`到您的`@OneToOne`注释中。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2015-04-17T08:45:50.090

我遇到了同样的问题。它并不总是可重现的，所以我无法测试它，但这里有一些想法：

> 1.  您的 Second 类的实例被删除，而 First 类的实例对此一无所知。
> 2.  您需要一种方法让 First 的实例知道它的 Second 实例何时被删除。
> 3.  用于删除的级联选项在这里没有帮助。
> 4.  当 First 的实例存在于 Second 的实例中时，您可以尝试使用双向关系。它允许您在删除第二个之前通过第二个实例更新第一个实例
> 5.  双向关系 - 是邪恶的。我想在你的情况下，第一 - 是第二的所有者。不允许任何服务直接删除您的第二个实例。让与 First 实例一起工作的服务删除 Second 实例。在这种情况下，您可以先将“第二”字段设为可空，然后通过 EntityManager 删除 Second 的实例。
> 6.  当执行查询并且启用二级缓存并且查询有提示时，您可能会遇到异常，该提示允许缓存其结果。我会通过以下方法为您提供查询结果：

```
private List<?> getQueryResult(final Query query)
{
    try
    {
        return query.getResultList();
    }
    catch (EntityNotFoundException e)
    {
        return query.setHint("javax.persistence.cache.storeMode", CacheStoreMode.REFRESH).getResultList();
    }
} 
```

> 7.  如果您通过 EntityManger 而不是通过查询处理实体，并且由于实体被缓存而出现异常，则当您删除 Second 时，您可能会使缓存中 First 的所有实体无效。

我想讨论这个解决方案，因为我无法对其进行测试，也无法使其正常工作。如果有人尝试，请告诉我。

PS：如果有人对休眠进行了单元测试，可以重现此问题，请告诉我。我想进一步调查它。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2018-05-06T09:54:08.280

当您删除关联的实体 ID 时会发生这种情况。就我而言，我有 Product 表，具体取决于 Brand 表。我删除了其中一个产品实例所依赖的品牌 ID 的行或实体。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-04T11:33:34.430

在对应的实体类中添加一个测试怎么样：

```
public boolean getHasSecond() {
    if (this.Second != null) {
        return true;
    } else {
        return false;
    }
} 
```

像这样，你可以检查关系是否存在......

* * *

## 回答 #6

> 赞同：-2
> 
> 时间：2020-07-07T08:50:54.640

尝试`cascade=CascadeType.ALL`在@OneToMay(******) 中使用。

# hibernate - 在 Hibernate 中，我们是否需要 3 个表来完成多对多关系？

> ID：12261581
> 
> 赞同：0
> 
> 时间：2012-09-04T10:30:01.480
> 
> 标签：hibernate

我们需要 3 个表来完成休眠中的多对多关系吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-04T10:35:42.073

是的，

在系B 反之亦然。例如，将 A 视为作者，将 B 视为书籍。一个作者可以写几本书，而一本书可以由几个作者写。因为大多数数据库管理系统只支持一对多关系，所以有必要通过第三个联结表（交叉引用表）物理实现这种关系，比如 AB 有两个一对多关系 A -> AB 和乙->乙。在这种情况下，AB 的逻辑主键由两个外键（即 A 和 B 的主键的副本）形成。

如果您愿意，您也可以拥有更多，但最少 3 个

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-04T10:48:43.660

您的问题更多地与休眠自身的多对多关系的性质有关。是的，正如 G-Man 正确指出的那样，您需要 3 个表（或更多）来实现它。

看看hibernate关于[关联映射](http://docs.jboss.org/hibernate/orm/3.3/reference/en/html/associations.html#assoc-unidirectional-join-m2m)的文档，尤其是第[7.5.3节](http://docs.jboss.org/hibernate/orm/3.3/reference/en/html/associations.html#assoc-bidirectional-join-m2m)

这是取自同一文档的示例：

```
<class name="Person">
    <id name="id" column="personId">
        <generator class="native"/>
    </id>
    <set name="addresses" table="PersonAddress">
        <key column="personId"/>
        <many-to-many column="addressId"
            class="Address"/>
    </set>
</class>

<class name="Address">
    <id name="id" column="addressId">
        <generator class="native"/>
    </id>
    <set name="people" inverse="true" table="PersonAddress">
        <key column="addressId"/>
        <many-to-many column="personId"
            class="Person"/>
    </set>
</class> 
```

# ios - ios presentModalViewController 有两个视图

> ID：12261583
> 
> 赞同：1
> 
> 时间：2012-09-04T10:30:07.587
> 
> 标签：ios, view, modalviewcontroller

我很困惑。我有一个带有 BarItem 的导航控制器，它打开第一个视图。完成一些工作后，我希望此视图消失，并希望打开第二个视图。

*   根视图：导航控制器
*   第一个视图：活动指示器，将一些数据放在一起
*   第二个视图：MFMailComposeViewController

在根视图中，BarItem 运行这些行来打开第一个视图：

```
 IndicatorViewController *indicator = [[IndicatorViewController alloc] initWithNibName:@"IndicatorViewController" bundle:nil];

    indicator.view.backgroundColor = [UIColor clearColor];
    self.modalPresentationStyle = UIModalPresentationCurrentContext;
    [self presentModalViewController:indicator animated:YES]; 
```

第一个视图（IndicatorViewController）做了一些工作并最终运行

```
[self dismissModalViewControllerAnimated:YES]; 
```

这工作正常。但是 - 我如何打开第二个视图？

我试过这个：

我打开第二个视图。关闭第二个视图后，我的第一个视图再次弹出（因为它仍然存在）并在此时被解雇。这段代码放在第一个视图中：

```
- (void) viewDidAppear:(BOOL)animated {
    static BOOL firstTime = YES;
    if (firstTime) {
        //do stuff that takes some time (that's why I show the indicator)
        MailViewController *controller = [[MailViewController alloc] init];

        if (controller) 
           [self presentModalViewController:controller animated:YES]; 
        firstTime = NO;
    } else {
        [self dismissModalViewControllerAnimated:YES];
    }    
} 
```

由于第一个视图再次弹出，用户可以在第二个视图关闭后再次看到指示器 - 这不是我想要的。

我在这里想念什么？这样做的更好方法是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-04T12:03:45.880

我会做这样的事情。制作一个导航控制器，并将第一个视图作为根控制器。然后做这样的事情：

```
FirstView.m

- (void)viewDidLoad
{
    [super viewDidLoad];
    [self.navigationController setNavigationBarHidden:YES];
}

- (void) nextView { // however you get to your next view, button/action/etc.
    UIViewController *screen = [self.storyboard instantiateViewControllerWithIdentifier:@"yourIdentifier"];
    [self.navigationController pushViewController:screen animated:YES];
} 
```

然后在第二个视图中：

```
SecondView.m
- (void) nextView { // however you get to your next view, button/action/etc.
    UIViewController *screen = [self.storyboard instantiateViewControllerWithIdentifier:@"yourIdentifier"];
    [self.navigationController pushViewController:screen animated:YES];
} 
```

最后在根视图中：

```
RootView.m
- (void)viewDidLoad
{
    [super viewDidLoad];
    NSArray *navStack = [NSArray arrayWithObject:self];
    self.navigationController.viewControllers = navStack;
    [self.navigationController setNavigationBarHidden:NO];
} 
```

这将使您的 RootView 成为 NavigationController 的新 rootview。

> self.navigationController.viewControllers

是包含 navcontrollers 堆栈上的所有 ViewControllers 的数组。第一个对象是根控制器。如果我们用我们自己的数组替换整个数组，它只知道一项。如果那是您想要的，您可以通过解雇返回。这不是最漂亮的方式，但也不是最糟糕的。

# c# - 在 C# 中将双精度/浮点数转换为整数

> ID：12261588
> 
> 赞同：0
> 
> 时间：2012-09-04T10:30:22.627
> 
> 标签：c#

我的问题可能看起来很愚蠢，但我很满意。我有一个字符串值“155.300”，我想将其转换为整数。我试过但抛出 System.FormatException ......请有人帮助我。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-04T10:30:54.763

由于您的源数据是字符串，您需要`Double`先将其转换为，然后将其转换为`int`或使用`Convert.ToInt32`，但请记住`Convert.ToInt32`将其四舍五入为最接近的整数，而转换需要`int`数字的一部分（截断）

```
double d = Convert.ToDouble("155.00");    
int a = (int) d;
int b = Convert.ToInt32(d); 
```

或在单行中

```
int b =(int) Convert.ToDouble("155.000"); 
```

**编辑**

由于您想使用**小数点作为千位分隔符**，我相信在**德国文化**中您可以尝试以下方法。

```
int b = ((int)Convert.ToDouble("154.500", new CultureInfo("de-DE"))); 
```

那会给你`154500`

**编辑 2**

或者更好的是使用`int.Parse`with `NumberStyles.AllowThousands`：

```
 int b = int.Parse("154.500", NumberStyles.AllowThousands, new CultureInfo("de-DE")); 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-09-04T10:31:35.060

首先将其解析为`decimal`or `double`（可能最好使用`decimal`，因为您*有*`Math.Round`十进制数据）然后根据您的要求强制转换或使用类似的东西。

基本上，您需要始终考虑您拥有的数据：“155.300”不是整数的字符串表示，因此不要尝试将其解析为整数。将其按原样解析，然后将其转换为整数。

或者，您*可以*先破解字符串表示，但我个人认为在许多情况下这是一种更脆弱的方法。

编辑：请注意，如果这*确实*已经是一个整数，但有千位分隔符，则根本不需要使用`double`- 您可以使用[`int.Parse`](http://msdn.microsoft.com/en-us/library/9yaffedz.aspx)，指定适当的文化和数字样式：

```
int parsed = int.Parse(text, NumberStyles.Integer | NumberStyles.AllowThousands,
                       culture); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-04T10:43:56.323

这是一个工作转换示例。仔细观察边缘条件，如果使用多种舍入/铸造技术，输出可能会有所不同

```
class Program
{
    public static int MyToInt(string str)
    {
        double result;
        bool success = Double.TryParse(str, out result);
        if (!success)
        {
            throw new ArgumentException(
                "Cannot parse a string into a double");
        }

        return Convert.ToInt32(result);     // 156
        //return (int)result;               // 155 <<
        //return (int)Math.Round(result);   // 156
    }

    static void Main(string[] args)
    {
        string s = "155.500";
        int value = MyToInt(s); 
    }
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-04T11:00:07.643

你可以试试这个：

```
string str = "123.123";
str = str.Remove(str.IndexOf('.'), 1);
int result;
int.TryParse(str, out result); 
```

**编辑**：根据您的评论，修改为乘以千。或者你可以试试：

```
string str = "123.123";
double result;
double.TryParse(str, out result);

int final = (int)(result * 1000); 
```

# iphone - iPhone 模拟器中看不到顶部和底部栏

> ID：12261589
> 
> 赞同：2
> 
> 时间：2012-09-04T10:30:27.447
> 
> 标签：iphone, ios, ios-simulator

在 iPhone 的界面构建器中，我选择了顶部和底部栏。我可以在查看窗口中查看两个栏，但是当我运行应用程序时，我的 iPhone 模拟器没有显示两个栏。我是否需要配置任何或想要添加任何编码以使其可见。请建议我

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-04T13:34:07.810

您是否通过以下方式在界面构建器的视图上添加了顶部栏和底部栏，或者该栏未添加到视图上。

![在此处输入图像描述](../Images/8145db63763e4563f69a9d320c9f37a1.png)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-08-10T15:44:04.283

在您的目标视图控制器中使用此代码

```
-(void) viewWillAppear:(BOOL)animated
{
    [super viewWillAppear:YES];
    self.navigationController.navigationBarHidden = NO;
} 
```

# c# - 富文本框颜色

> ID：12261591
> 
> 赞同：0
> 
> 时间：2012-09-04T10:30:28.340
> 
> 标签：c#, winforms, richtextbox

当用户将文本输入到 RichTextBox 控件中时，我希望文本的颜色为绿色。我使用类似的东西：

```
 private void richTextBox1_TextChanged(object sender, CancelEventArgs e)
{
    RichTextBox richTextBox1 = sender as RichTextBox;
    richTextBox1.SelectionBackColor = Color.AliceBlue;
} 
```

但这会导致第一个标志处于正常背景中，并且从第二个标志开始，整个 eneterd 文本是蓝色的：

图案（大写有颜色）：输入文本

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-04T10:59:59.030

我想你想设置：

```
richTextBox1.ForeColor = Color.AliceBlue 
```

在您之后的某个地方`InitializeComponent();`或通过`Background property`Designer 中的某个地方。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-04T10:51:37.570

而不是 TextChanged 在 OnKeyDown 上尝试

# c++ - 优化嵌套循环

> ID：12261595
> 
> 赞同：0
> 
> 时间：2012-09-04T10:30:36.090
> 
> 标签：c++, primes

```
for( a=1; a <= 25; a++){
  num1 = m[a];
  for( b=1; b <= 25; b++){
    num2 = m[b];
    for( c=1; c <= 25; c++){
      num3 = m[c];
      for( d=1; d <= 25; d++){
        num4 = m[d];
        for( e=1; e <= 25; e++){
          num5 = m[e];
          for( f=1; f <= 25; f++){
            num6 = m[f];
            for( g=1; g <= 25; g++){
              num7 = m[g];
              for( h=1; h <= 25; h++){
                num8 = m[h];
                for( i=1; i <= 25; i++){
                  num = num1*100000000 + num2*10000000 +
                        num3*  1000000 + num4*  100000 +
                        num5*    10000 + num6*    1000 +
                        num7*      100 + num8*      10 + m[i];
                  check_prime = 1;

                  for ( y=2; y <= num/2; y++)
                  {
                    if ( num % y == 0 )
                      check_prime = 0;
                  }

                  if ( check_prime != 0 )
                  {  
                    array[x++] = num;  
                  }
                  num = 0;  
                }}}}}}}}} 
```

上面的代码需要很长时间才能完成执行。实际上它甚至没有完成执行，我该怎么做才能优化循环并加快执行速度？我是新手`cpp`。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-04T10:44:24.147

将此代码替换为使用合理算法的代码，例如[Eratosthenes 筛](http://en.wikipedia.org/wiki/Sieve_of_Eratosthenes)。最重要的“优化”是首先选择正确的算法。

如果您的数字排序算法是随机交换它们直到它们有序，那么您优化随机条目的选择、交换它们或检查它们是否有序并不重要。无论如何，糟糕的算法将意味着糟糕的性能。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-04T15:42:27.327

您正在检查 25 ⁹ = 3,814,697,265,625 个数字是否为素数。这是很多主要测试，而且总是需要很长时间。即使在所有数组条目 (in `m`) 为 0 的最佳情况下（对于性能而言）（不要介意测试将 0 视为素数），因此试除循环永远不会运行，它也需要数小时才能运行。当 的所有条目`m`都是正数时，代码将运行数百或数千年，从那时起，每个数字将被超过 50,000,000 个数字试除。

看着素数支票，

```
check_prime = 1;

for ( y = 2; y <= num/2; y++)
{
    if ( num % y == 0 )
        check_prime = 0;
} 
```

第一个明显的低效率是，即使在找到除数并`num`建立复合性之后，循环也会继续。**知道结果后立即跳出循环。**

```
check_prime = 1;

for ( y = 2; y <= num/2; y++)
{
    if ( num % y == 0 )
    {
        check_prime = 0;
        break;
    }
} 
```

在不幸的情况下，您测试的所有数字都是素数，这不会改变任何事情，但如果所有（或几乎所有，对于几乎足够大的值）数字都是复合的，它将减少运行时间的一个因素至少5000。

接下来的事情是你分成`num/2`. 那是没有必要的。为什么你停在`num/2`，而不是`num - 1`？好吧，因为您发现 的最大真除数`num`不能大于`num/2`因为 if `(num >) k > num/2`、 then`2*k > num`和`num`不是 的倍数`k`。

这很好，不是每个人都能看到。

但你可以进一步追寻这种思路。如果`num/2`是 的除数`num`，则表示`num = 2*(num/2)`（使用整数除法，除 外`num = 3`）。但是然后`num`是偶数，它的复合性已经由除以2决定了，所以除以`num/2`成功就永远不会尝试。

那么需要考虑的最大除数的下一个可能候选者是什么？`num/3`当然。但如果那是 的除数`num`，那么`num = 3*(num/3)`（除非`num < 9`）和除以 3 已经解决了这个问题。

继续下去，如果`k < √num`和`num/k`是 的除数`num`，那么`num = k*(num/k)`我们看到它`num`有一个更小的除数，即`k`（可能甚至更小）。

所以**的最小非平凡除数`num`小于或等于`√num`。**因此循环只需要运行`y <= √num`, 或`y*y <= num`。如果在该范围内没有找到除数，`num`则为素数。

现在问题出现了是否循环

```
for(y = 2; y*y <= num; ++y) 
```

或者

```
root = floor(sqrt(num));
for(y = 2; y <= root; ++y) 
```

第一个需要在每次迭代中对循环条件进行一次乘法，第二个需要在循环外计算平方根。

哪个更快？

这取决于平均大小`num`以及许多是否为素数（更准确地说，取决于最小素数除数的平均大小）。计算平方根比乘法花费的时间要长得多，为了补偿该成本，循环必须运行多次迭代（平均而言）——“很多”是指超过 20、超过 100 还是超过 1000 取决于。`num`大于，`10^8`就像这里可能的情况一样，计算平方根可能是更好的选择。

现在我们已经将试验除法循环的迭代次数限制为复合`√num`或`num`素数，并将运行时间减少至少 5000 倍（假设所有`m[index] > 0`，所以总是`num >= 10^8`），无论测试数字中有多少素数. 如果大多数取值`num`是素数较小的组合，则缩减因子要大得多，以至于通常运行时间几乎完全用于测试素数。

通过减少候选除数的数量可以获得进一步的改进。如果`num`能被 4, 6, 8, ... 整除，那么它也能被 2 整除，因此`num % y`对于偶数永远不会产生 0 `y > 2`。这意味着所有这些划分都是多余的。通过特殊的大小写 2 并以 2 的步长递增候选除数，

```
if (num % 2 == 0)
{
    check_prime = 0;
} else {
    root = floor(sqrt(num));
    for(y = 3; y <= root; y += 2)
    {
        if (num % y == 0)
        {
            check_prime = 0;
            break;
        }
    }
} 
```

要执行的分区数和运行时间大致减半（假设有足够多的坏情况，偶数的工作可以忽略不计）。

现在，只要`y`是 3 的倍数（除了 3 本身），`num % y`只会在`num`不是 3 的倍数时计算，所以这些除法也是多余的。您也可以通过特殊情况 3 来消除它们，并且`y`只让运行不能被 3 整除的奇数（从 开始`y = 5`，交替递增 2 和 4）。这会砍掉大约三分之一的剩余工作（如果存在足够多的坏情况）。

继续这个消除过程，我们只需要除以不超过`num`的*素数*`√num`来确定它是否是素数。

所以通常最好找到不超过`num`您要检查的最大值的平方根的素数，将它们存储在一个数组中并循环

```
root = floor(sqrt(num));
for(k = 0, y = primes[0]; k < prime_count && (y = primes[k]) <= root; ++k)
{
    if (num % y == 0)
    {
        check_prime = 0;
        break;
    }
} 
```

除非最大值`num`足够小，例如，如果您`num < 2^31`总是`num`有2^31位占用256 MB，如果你只有奇数的标志[需要特殊情况检查是否`num`是偶数]，你只需要128 MB来检查`< 2^31`常数时间内数字的素数，进一步减少所需空间因为筛子是可能的）。

到目前为止，主要测试本身。

如果`m`数组包含可被 2 或 5 整除的数字，则可能值得重新排序循环，将循环用于`i`最外层，如果可被 2 或 5 整除，则跳过内部循环`m[i]`- 所有其他数字都乘以幂在添加之前为 10，因此`num`将分别是 2 的倍数。5 而不是素数。

但是，尽管如此，运行代码仍然需要很长时间。九个嵌套循环散发着错误设计的味道。

你想做什么？也许我们可以帮助找到正确的设计。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-05T08:57:51.477

我们可以通过计算可用数字的每一部分来消除大量冗余计算。这也显示了 2-3 轮上的素数试除法测试，直到数字的平方根：

```
// array m[] is assumed sorted in descending order      NB!
// a macro to skip over the duplicate digits
#define I(x) while( x<25 && m[x+1]==m[x] ) ++x;
for( a=1; a <= 25; a++) {
 num1 = m[a]*100000000; 
 for( b=1; b <= 25; b++) if (b != a) { 
  num2 = num1 + m[b]*10000000;
  for( c=1; c <= 25; c++) if (c != b && c != a) {
   num3 = num2 + m[c]*1000000; 
   for( d=1; d <= 25; d++) if (d!=c && d!=b && d!=a) {
    num4 = num3 + m[d]*100000; 
    for( e=1; e <= 25; e++) if (e!=d && e!=c && e!=b && e!=a) {
     num5 = num4 + m[e]*10000;
     for( f=1; f <= 25; f++) if (f!=e&&f!=d&&f!=c&&f!=b&&f!=a) {
      num6 = num5 + m[f]*1000;
      limit = floor( sqrt( num6+1000 ));   ///
      for( g=1; g <= 25; g++) if (g!=f&&g!=e&&g!=d&&g!=c&&g!=b&&g!=a) {
       num7 = num6 + m[g]*100; 
       for( h=1; h <= 25; h++) if (h!=g&&h!=f&&h!=e&&h!=d&&h!=c&&h!=b&&h!=a) { 
        num8 = num7 + m[h]*10; 
        for( i=1; i <= 25; i++) if (i!=h&&i!=g&&i!=f&&i!=e&&i!=d
                                                          &&i!=c&&i!=b&&i!=a) {
          num = num8 + m[i];
          if( num % 2 /= 0 && num % 3 /= 0 ) {
            is_prime = 1;
            for ( y=5; y <= limit; y+=6) {
              if ( num %  y    == 0 ) { is_prime = 0; break; }
              if ( num % (y+2) == 0 ) { is_prime = 0; break; }
            }
            if ( is_prime ) { return( num ); } // largest prime found
          }I(i)}I(h)}I(g)}I(f)}I(e)}I(d)}I(c)}I(b)}I(a)} 
```

此代码还**消除了重复的索引**。正如您在评论中指出的那样，您从`5x5`网格中选择您的数字。这意味着您必须使用所有不同的索引。这将减少要测试的数字计数 从`25^9 = 3,814,697,265,625`到`25*24*23*...*17 = 741,354,768,000`。

由于您现在已经指出`m[]`数组中的所有条目都小于 10，因此肯定会有重复，搜索时需要跳过这些条目。正如丹尼尔指出的那样，从顶部搜索，第一个找到的素数将是最大的。`m[]`这是通过按降序对数组进行预排序来实现的。

# c# - 在 Windows 应用程序中使用 FolderBrowserDialog 浏览多个文件夹

> ID：12261598
> 
> 赞同：3
> 
> 时间：2012-09-04T10:30:49.057
> 
> 标签：c#, winforms

如何使用 FolderBrowserDialog 选择多个文件夹？

目前，我一次只能使用以下代码浏览一个文件夹。

```
FolderBrowserDialog dialog;
private void btnbrowse_Click(object sender, EventArgs e)
    {
        dialog = new FolderBrowserDialog();

        if (dialog.ShowDialog() == DialogResult.OK)
        {
            txtFolderPath.Text = dialog.SelectedPath;

        }
    } 
```

如何浏览多个文件夹？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2018-02-16T10:25:08.527

但是您可以使用 System.Windows.Forms.OpenFileDialog() 来实现它。它允许您选择多个文件夹

请看以下示例：

```
using System;
using System.Collections.Generic;
using System.ComponentModel;
using System.Data;
using System.Drawing;
using System.Linq;
using System.Reflection;
using System.Text;
using System.Threading.Tasks;
using System.Windows.Forms;

namespace FolderDialog
{
    public class FolderSelectDialog
    {
        System.Windows.Forms.OpenFileDialog ofd = null;
        public FolderSelectDialog()
        {
            ofd = new System.Windows.Forms.OpenFileDialog();
            ofd.Filter = "Folders|\n";
            ofd.AddExtension = false;
            ofd.CheckFileExists = false;
            ofd.DereferenceLinks = true;
            ofd.Multiselect = Multiselect;    

        }
        public string InitialDirectory
        {
            get { return ofd.InitialDirectory; }
            set { ofd.InitialDirectory = value == null || value.Length == 0 ? Environment.CurrentDirectory : value; }
        }
        public string Title
        {
            get { return ofd.Title; }
            set { ofd.Title = value == null ? "Select a folder" : value; }
        }

        public bool Multiselect
        {
            get { return ofd.Multiselect; }
            set { ofd.Multiselect = value == false ? false : value; }
        }

        public string FileName
        {
            get { return ofd.FileName; }
        }

        public string[] FileNames
        {
            get { return ofd.FileNames; }
        }
        public bool ShowDialog()
        {
            return ShowDialog(IntPtr.Zero);
        }
        public bool ShowDialog(IntPtr hWndOwner)
        {
            bool flag = false;

            if (Environment.OSVersion.Version.Major >= 6)
            {
                var r = new Reflector("System.Windows.Forms");
                uint num = 0;
                Type typeIFileDialog = r.GetType("FileDialogNative.IFileDialog");
                object dialog = r.Call(ofd, "CreateVistaDialog");
                r.Call(ofd, "OnBeforeVistaDialog", dialog);
                uint options = (uint)r.CallAs(typeof(System.Windows.Forms.FileDialog), ofd, "GetOptions");
                options |= (uint)r.GetEnum("FileDialogNative.FOS", "FOS_PICKFOLDERS");
                r.CallAs(typeIFileDialog, dialog, "SetOptions", options);
                object pfde = r.New("FileDialog.VistaDialogEvents", ofd);
                object[] parameters = new object[] { pfde, num };
                r.CallAs2(typeIFileDialog, dialog, "Advise", parameters);
                num = (uint)parameters[1];
                try
                {
                    int num2 = (int)r.CallAs(typeIFileDialog, dialog, "Show", hWndOwner);
                    flag = 0 == num2;
                }
                finally
                {
                    r.CallAs(typeIFileDialog, dialog, "Unadvise", num);
                    GC.KeepAlive(pfde);
                }
            }
            else
            {
                var fbd = new FolderBrowserDialog();
                fbd.Description = this.Title;
                fbd.SelectedPath = this.InitialDirectory;
                fbd.ShowNewFolderButton = false;
                if (fbd.ShowDialog(new WindowWrapper(hWndOwner)) != DialogResult.OK) return false;
                ofd.FileName = fbd.SelectedPath;
                flag = true;
            }
            return flag;
        }

        public class WindowWrapper : System.Windows.Forms.IWin32Window
        {
            public WindowWrapper(IntPtr handle)
            {
                _hwnd = handle;
            }
            public IntPtr Handle
            {
                get { return _hwnd; }
            }

            private IntPtr _hwnd;
        }

        public class Reflector
        {
            string m_ns;
            Assembly m_asmb;
            public Reflector(string ns)
                : this(ns, ns)
            { }
            public Reflector(string an, string ns)
            {
                m_ns = ns;
                m_asmb = null;
                foreach (AssemblyName aN in Assembly.GetExecutingAssembly().GetReferencedAssemblies())
                {
                    if (aN.FullName.StartsWith(an))
                    {
                        m_asmb = Assembly.Load(aN);
                        break;
                    }
                }
            }
            public Type GetType(string typeName)
            {
                Type type = null;
                string[] names = typeName.Split('.');

                if (names.Length > 0)
                    type = m_asmb.GetType(m_ns + "." + names[0]);

                for (int i = 1; i < names.Length; ++i)
                {
                    type = type.GetNestedType(names[i], BindingFlags.NonPublic);
                }
                return type;
            }
            public object New(string name, params object[] parameters)
            {
                Type type = GetType(name);
                ConstructorInfo[] ctorInfos = type.GetConstructors();
                foreach (ConstructorInfo ci in ctorInfos)
                {
                    try
                    {
                        return ci.Invoke(parameters);
                    }
                    catch { }
                }

                return null;
            }
            public object Call(object obj, string func, params object[] parameters)
            {
                return Call2(obj, func, parameters);
            }
            public object Call2(object obj, string func, object[] parameters)
            {
                return CallAs2(obj.GetType(), obj, func, parameters);
            }
            public object CallAs(Type type, object obj, string func, params object[] parameters)
            {
                return CallAs2(type, obj, func, parameters);
            }
            public object CallAs2(Type type, object obj, string func, object[] parameters)
            {
                MethodInfo methInfo = type.GetMethod(func, BindingFlags.Instance | BindingFlags.Public | BindingFlags.NonPublic);
                return methInfo.Invoke(obj, parameters);
            }
            public object Get(object obj, string prop)
            {
                return GetAs(obj.GetType(), obj, prop);
            }
            public object GetAs(Type type, object obj, string prop)
            {
                PropertyInfo propInfo = type.GetProperty(prop, BindingFlags.Instance | BindingFlags.Public | BindingFlags.NonPublic);
                return propInfo.GetValue(obj, null);
            }
            public object GetEnum(string typeName, string name)
            {
                Type type = GetType(typeName);
                FieldInfo fieldInfo = type.GetField(name);
                return fieldInfo.GetValue(null);
            }
        }
    }
    public partial class Form1 : Form
    {

        public Form1()
        {
            InitializeComponent();
        }

        public static string OpenFileBrowserDialog(bool multiselect) {
            FolderSelectDialog fbd = new FolderSelectDialog();
            fbd.Multiselect = multiselect;

            fbd.ShowDialog();

            string selected_folders = "";
            if (multiselect)
            {
                string[] names = fbd.FileNames;
                selected_folders = string.Join(",", names);
            }
            else
            {
                selected_folders = fbd.FileName;
            }

            return selected_folders;
        }
        private void Form1_Load(object sender, EventArgs e)
        {
            string name = OpenFileBrowserDialog(true);

            MessageBox.Show(name);
            Environment.Exit(0);
        }
    }
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-04T10:40:56.920

没有对多文件夹选择的原生支持`FolderBrowserDialog`，但您可以结合树视图和“多选”构建自己的对话框。

看一看：

[http://www.codeproject.com/Articles/13375/File-Explorer-using-Treeview-controller-in-C-2-0](http://www.codeproject.com/Articles/13375/File-Explorer-using-Treeview-controller-in-C-2-0)

[http://www.arstdesign.com/articles/treeviewms.html](http://www.arstdesign.com/articles/treeviewms.html)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-05T05:41:12.560

默认的 FolderBrowserDialog 不允许您选择多个文件夹。

您可以考虑使用像[FolderView](http://www.ssware.com/fldrview.htm)这样的第 3 方控件- 它还带有一个使用 FolderView 的即用型自定义 FolderBrowserDialog。

免责声明：我为 FolderView 的开发商 LogicNP Software 工作。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-04T10:34:33.740

不幸的是，你不能这样做`FolderBrowserDialog`

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2020-05-24T17:20:27.830

您可以结帐[BetterFolderBrowser](https://github.com/Willy-Kimura/BetterFolderBrowser)。它是一个 .NET 库，可以满足您的需要以及更多功能。同样，它提供了一种更易于使用的模仿`OpenFileDialog`对话窗口的文件夹浏览体验。希望能帮助到你。

# ruby-on-rails - 如何找出更改是从 UI 还是从 Rails 中的控制台进行的？

> ID：12261599
> 
> 赞同：0
> 
> 时间：2012-09-04T10:30:48.413
> 
> 标签：ruby-on-rails, ruby

我有一个复杂的 Ruby on rails 应用程序。
因此最终用户可以从 Ui 进行更改，而开发人员也可以从控制台进行更改。
那么有没有办法找出更改是从 UI 还是控制台进行的。
当最终用户从 UI 进行更改时，我可以捕获他们的登录详细信息，但我能做些什么才能知道谁从控制台进行了更改？
请帮忙？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-04T10:49:02.827

答案是否定的，无法跟踪或跟踪来自控制台的更改。访问控制台意味着无需锁定即可访问整个应用程序。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-04T10:38:00.140

当用户可以访问 rails c 时，他通常可以不受限制地掌握应用程序。所以我在这方面是悲观的。

您可以尝试实现/使用受限控制台，该控制台根据应用程序机器上的登录实现 current_user 方法。但这对于您的场景可能有点牵强？

**更新：**嗯......这个“自己动手”可能比我最初想象的要简单。当然，您可以实现一个初始化程序，例如 current_console_user.rb

```
module Test3ElementBase
  class Application < Rails::Application
    config.current_console_user=ENV["USER"] if ENV["RAILS_CONSOLE"] == "Y"
  end
end 
```

然后将控制台调用紧紧包裹在

```
RAILS_CONSOLE=Y rails c 
```

现在 Test3ElementBase::Application.config.current_console_user 仅在从控制台调用时才被定义。您现在“只”必须将此事实混合到您原来的 current_user 方法中。

当然可能有更简单的方法，我只是一个小块:-)

# math - 这种重复关系何时会重复

> ID：12261609
> 
> 赞同：0
> 
> 时间：2012-09-04T10:31:30.650
> 
> 标签：math, modulo, recurrence

我有这个递归公式：

```
 P(n) = ( P(n-1) + 2^(n/2) ) % (X)
   s.t. P(1) = 2; 
```

其中 n/2 是计算机整数除法，即 x/2 的下限

由于我正在使用 mod X，因此这种关系至少应在 X 输出中重复。

但它可以在此之前开始重复。

如何找到这个值？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-04T11:05:13.857

它不需要在`x`条款内重复，考虑`x = 3`：

```
P(1)  = 2
P(2)  = (P(1)  + 2^(2/2))  % 3 = 4 % 3        = 1
P(3)  = (P(2)  + 2^(3/2))  % 3 = (1 + 2) % 3  = 0
P(4)  = (P(3)  + 2^(4/2))  % 3 = 4 % 3        = 1
P(5)  = (P(4)  + 2^(5/2))  % 3 = (1 + 4) % 3  = 2
P(6)  = (P(5)  + 2^(6/2))  % 3 = (2 + 8) % 3  = 1
P(7)  = (P(6)  + 2^(7/2))  % 3 = (1 + 8) % 3  = 0
P(8)  = (P(7)  + 2^(8/2))  % 3 = 16 % 3       = 1
P(9)  = (P(8)  + 2^(9/2))  % 3 = (1 + 16) % 3 = 2
P(10) = (P(9)  + 2^(10/2)) % 3 = (2 + 32) % 3 = 1
P(11) = (P(10) + 2^(11/2)) % 3 = (1 + 32) % 3 = 0
P(12) = (P(11) + 2^(12/2)) % 3 = (0 + 64) % 3 = 1 
```

你会看到周期是 4。

通常（假设`X`是奇数，偶数会涉及更多`X`），设`k`2 模的周期`X`，即`k > 0`,`2^k % X = 1`和`k`这些属性的最小值（见下文）。

考虑所有算术模数`X`。然后

```
 n
P(n) = 2 + ∑ 2^(j/2)
          j=2 
```

当我们分别考虑奇数和偶数时，更容易看出`n`：

```
 m           m
P(2*m+1) = 2 + 2 * ∑ 2^i = 2 * ∑ 2^i = 2*(2^(m+1) - 1) = 2^((n+2)/2) + 2^((n+1)/2) - 2
                  i=1         i=0 
```

因为每个`2^j`出现两次，对于`j = 2*i`和`j = 2*i+1`。对于 even ，缺少`n = 2*m`一个总和，所以`2^m`

```
P(2*m) = 2^(m+1) + 2^m - 2 = 2^((n+2)/2) + 2^((n+1)/2) - 2 
```

我们看到周期的长度是`2*k`, 因为变化的部分`2^((n+1)/2)`并且`2^((n+2)/2)`有那个周期。期间立即开始，没有前期部分（偶数可以有前期`X`）。

现在`k <= φ(X)`由[欧拉](http://en.wikipedia.org/wiki/Euler%27s_totient_function#Euler.27s_theorem)对费马定理的推广，所以周期最多为`2 * φ(X)`。（φ 是[欧拉的总函数](http://en.wikipedia.org/wiki/Euler%27s_totient_function)，即具有`φ(n)`的整数个数。）`1 <= k <= n``gcd(n,k) = 1`

* * *

是什么使得周期长于`X`不是`P(n+1)`完全由 决定的`P(n)`， 的值`n`也在决定 中起作用`P(n+1)`，在这种情况下，依赖性很简单，每个 2 的幂连续使用两次会使 的周期加倍2的纯幂。

`a[k] = (2^k) % X`考虑奇数的序列`X > 1`。它有简单的复发

```
a[0] = 1
a[k+1] = (2 * a[k]) % X 
```

所以每个值完全决定下一个值，因此整个序列的后续部分。（由于`X`假定为奇数，它还确定了前一个值 [if `k > 0`] 并因此确定了序列的整个前一部分。有了`H = (X+1)/2`，我们有`a[k-1] = (H * a[k]) % X`。）

因此，如果序列两次假设一个值（并且由于只有`X`可能的值，那必须发生在第一个`X+1`值内），在索引处`i`，`j = i+p > i`例如，序列重复，我们`a[k+p] = a[k]`对所有`k >= i`. 对于奇数`X`，我们可以返回序列，因此`a[k+p] = a[k]`对于 也成立`0 <= k < i`。因此，在序列中出现两次的第一个值是`a[0] = 1`。

设`p`为 的最小正整数`a[p] = 1`。然后`p`是序列的最小周期的长度`a`，并且`a[k] = 1`当且仅当`k`是 的倍数`p`，因此周期的`a`集合是 的倍数的集合`p`。欧拉定理说`a[φ(X)] = 1`，由此我们可以得出结论`p`是 的一个除数`φ(X)`，特别是`p <= φ(X) < X`。

现在回到原来的顺序。

```
P(n) = 2 + a[1] + a[1] + a[2] + a[2] + ... + a[n/2]
     = a[0] + a[0] + a[1] + a[1] + a[2] + a[2] + ... + a[n/2] 
```

由于每个`a[k]`连续使用两次，因此很自然地分别检查偶数和奇数索引的子序列，

```
E[m] = P(2*m)
O[m] = P(2*m+1) 
```

那么从一个值到下一个值的转换更加规律。对于我们发现的偶数指数

```
E[m+1] = E[m] + a[m] + a[m+1] = E[m] + 3*a[m] 
```

对于奇数指数

```
O[m+1] = O[m] + a[m+1] + a[m+1] = O[m] + 2*a[m+1] 
```

现在，如果我们暂时忽略模数，两者`E`和`O`都是几何和，因此这些术语有一个简单的封闭公式。它们已在上面给出（形式略有不同），

```
E[m] = 3 * 2^m - 2     = 3 * a[m] - 2
O[m] = 2 * 2^(m+1) - 2 = 2 * a[m+1] - 2 = a[m+2] - 2 
```

所以我们看到 与`O`具有相同（最小）的周期`a`，即`p`，并且`E`也具有那个周期。除非可能 if`X`可被 3 整除，否则这也是 的最小（正）周期`E`（如果`X`可被 3 整除，则 的最小正周期`E`可能是 的适当除数`p`，`X = 3`例如，`E`是常数）。

由此我们看到是通过交错和得到`2*p`的序列的一个周期。`P``E``O`

仍有待观察，这`2*p`是 的最小正周期`P`。设`m`为最小正周期。然后`m`是 的一个除数`2*p`。

假设`m`是奇数，`m = 2*j+1`。然后

```
P(1) = P(m+1) = P(2*m+1)
P(2) = P(m+2) = P(2*m+2) 
```

因此

```
P(2) - P(1) = P(m+2) - P(m+1) = P(2*m+2) - P(2*m+1) 
```

但是`P(2) - P(1) = a[1]`和

```
P(m+2)   - P(m+1)   = a[(m+2)/2]            = a[j+1]
P(2*m+2) - P(2*m+1) = a[(2*m+2)/2] = a[m+1] = a[2*j+2] 
```

所以我们必须有`a[1] = a[j+1]`，因此`j`是 的时期`a`，并且`a[j+1] = a[2*j+2]`，因此`j+1`也是 的时期`a`。但这意味着 1 是 的期间`a`，这意味着`X = 1`矛盾。

因此`m`是偶数，`m = 2*j`。但 then`j`是`O`（和`E`）的一个周期，因此是 的倍数`p`。另一方面，`m <= 2*p`蕴含，并且满足该不等式`j <= p`的唯一（正）倍数是它本身，因此，。`p``p``j = p``m = 2*p`

# eclipse - 调试 Struts 动作类

> ID：12261612
> 
> 赞同：0
> 
> 时间：2012-09-04T10:31:42.413
> 
> 标签：eclipse, tomcat, struts

我的应用程序在远程服务器上运行。

我使用 tomcat 来部署我的应用程序的基于 Web 的部分。

流程是 Action 类使用 RMI 调用远程类。

我正在使用 Eclipse，当我浏览页面时，能够调试远程 Java 类，但我还需要调试 Action 类，因为它还包含更多逻辑。

我将如何做到这一点，请帮助，提前谢谢。

问候， Sridevi

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-04T11:33:32.760

从 Eclipse 以调试模式启动 Tomcat，或者使用远程调试选项启动 tomcat，然后将远程调试会话从 Eclipse 附加到该 tomcat 服务器（以您可能为远程 RMI 服务器所做的类似方式）。

有关如何在远程调试模式下启动 tomcat，请参阅[http://wiki.apache.org/tomcat/HowTo#How_do_I_debug_a_Tomcat_application.3F ：](http://wiki.apache.org/tomcat/HowTo#How_do_I_debug_a_Tomcat_application.3F)

```
set JPDA_ADDRESS=1044
set JPDA_TRANSPORT=dt_socket
catalina jpda start 
```

# mysql - Sql查询根据另一个表中的条目派生列值

> ID：12261614
> 
> 赞同：1
> 
> 时间：2012-09-04T10:31:48.483
> 
> 标签：mysql, sql

我有一个带有字段的**人员**`id`表，`email`。

还有一个包含字段的**订阅**`person_id`表： , `category_id`。

如果一个人订阅了**订阅**表，表中将至少有一个条目。

我想根据人员是否订阅来查询具有 1 或 0 的第三列的**人员表。**

```
select p.id, p.email , [is_subscribed] 
from person p 
```

`is_subscribed`**如果订阅**表中有条目，则应为 1，否则应为 0。

我怎样才能实现上述目标？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-04T10:37:34.663

在订阅和计数上使用 LEFT JOIN（在多个订阅的情况下）

```
SELECT p.id,p.email,IF(COUNT(s.category_id)>0,1,0) as is_subscribed
FROM
person as p
LEFT JOIN subscription as s ON s.person_id=p.id
GROUP BY p.id 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-04T10:37:06.907

```
 select distinct p.id, p.email, ifnull(sign(subscription.id),0) as is_subscribed
   from
       person
           left join subscriptions
           on person.id = subscriptions.person_id 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-04T10:38:55.823

```
SELECT p.`id` , p.`email` , IF(COUNT(s.`id`)>0,1,0) AS count
FROM  `person` p
LEFT JOIN  `subscription` s ON s.`person_id` = p.`id` 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-04T10:43:36.000

`select distinct person.id, person.email, cast((select count(id) from sub where id=1) as bit) from tab, sub where tab.id=1;`

这是一个 MS SQL 服务器查询。对 mysql 进行必要的更改。

# java - 将自定义 AuthenticationProcessingFilter 与 （自动配置=“真”）

> ID：12261620
> 
> 赞同：0
> 
> 时间：2012-09-04T10:32:13.087
> 
> 标签：java, spring, authentication, spring-security

Spring security (2.0.x) http命名空间，form-login定义自动使用AuthenticationProcessingFilter。

```
<form-login login-page='/logon.jsp' 
default-target-url='/home.jsp' 
always-use-default-target='true' /> 
```

我也知道，如果我设置，`auto-config="false"`我可以通过提供自定义 bean 定义来自定义身份验证。

我有 CustomAuthenticationProcessingFilter 扩展了 AuthenticationProcessingFilter 覆盖了 gainUsername 并使用自定义逻辑来获取用户名而不是通过的用户名。

```
protected String obtainUsername(HttpServletRequest request) {
   // custom logic to return username from parameter/cookies/header etc ... 
} 
```

是否可以在使用时使用 CustomAuthenticationProcessingFilter 而`auto-config="true" <form-login>`无需定义 customAuthFilter 和所有依赖的bean？

```
 <beans:bean id="customAuthFilter" class="x.y.z.CustomAuthenticationProcessingFilter">
    <custom-filter  position="AUTHENTICATION_PROCESSING_FILTER" />
    <beans:property name="defaultTargetUrl" value="/home.jsp"></beans:property>
    ...
    ...
  </beans:bean> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-05T19:38:42.220

# 介绍

Spring Security 2.0 处于维护模式，因此不会有任何官方更新。但是，您可以使用一些方法来解决此问题。

# 豆后处理器

您可以从[Spring Security FAQ](http://static.springsource.org/spring-security/site/faq.html#faq-namespace-post-processor)中使用的一个技巧是使用 BeanPostProcessor。您可以返回自定义过滤器，而不是修改属性。一个例子可能是这样的：

```
public class CustomFilterBeanPostProcessor implements BeanPostProcessor {
    private Filter customFilter;

    public Object postProcessAfterInitialization(Object bean, String name) {
        if (bean instanceof AuthenticationProcessingFilter) {
           return customFilter;
        }
        return bean;
    }

    public Object postProcessBeforeInitialization(Object bean, String name) {
        return bean;
    }

    public void setFilter(Filter filter) {
        this.customFilter = filter;
    }
} 
```

那么您的配置将包括以下内容：

```
 <beans:bean class="CustomFilterBeanPostProcessor">
    <beans:property name="filter" ref="customAuthFilter"/>
  </beans:bean> 
```

# 在属性之前使用

另一种方法是在 AuthenticationProcessingFilter 之前插入自定义过滤器。这将有一个额外的过滤器，但它应该是微创的，因为它很小并且不应该被访问（即，因为自定义过滤器仅在 AuthenticationProcessingFilter 忽略请求时继续过滤器链）。使用此方法的示例配置如下所示：

```
<beans:bean id="customAuthFilter" class="x.y.z.CustomAuthenticationProcessingFilter">
    <custom-filter before="AUTHENTICATION_PROCESSING_FILTER" />
    <beans:property name="defaultTargetUrl" value="/home.jsp"></beans:property>
    ...
    ...
  </beans:bean> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-04T16:55:03.097

唉，看起来（如果我没记错的话）没有什么可以做的，因为 AuthenticationProcessingFilter 类名是硬编码在[< `HttpSecurityBeanDefinitionParser`>](http://static.springsource.org/spring-security/site/xref/org/springframework/security/config/HttpSecurityBeanDefinitionParser.html#376) :(

```
if (formLoginElt != null || autoConfig) {
  FormLoginBeanDefinitionParser parser = 
     new FormLoginBeanDefinitionParser("/j_spring_security_check", 
     "org.springframework.security.ui.webapp.AuthenticationProcessingFilter"); 
```

.

.

如果过滤器类是一个配置属性并在外部进行控制（就像`default-target-url`）可能会使用属性会更好`authentication-filter-class`

```
<form-login login-page='/logon.jsp' 
default-target-url='/home.jsp' 
always-use-default-target='true'
authentication-filter-class='x.y.z.CustomAuthenticationProcessingFilter'
/> 
```

*希望春天的人们在听；）*

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-10T17:18:32.087

事实上，spring 的命名空间处理程序在内部定义了名称`_formLoginFilter`为 AuthenticationProcessingFilter 的 bean（参见[BeanIds](http://static.springsource.org/spring-security/site/xref/org/springframework/security/config/BeanIds.html)完整列表）。有多种方法可以解决此问题（即使用 DaoAuthenticationProvider 中的 j_username 以外的其他内容进行身份验证，例如从标头中获取用户名等...）

## 使用 Spring AOP`bean()`语法进行拦截`doFilter()`

`_formLoginFilter`定义一个切入点，用 name和 intercepts`doFilter`方法查找 bean 。( `AuthenticationProcessingFilter.doFilter() method`) 并有条件地委托给别的东西

```
public class AuthenticationProcessingFilterAspect {
  private static final Logger LOGGER = LoggerFactory.getLogger(AuthenticationProcessingFilterAspect.class);
  public Object intercept(ProceedingJoinPoint pjp) throws Throwable {
    LOGGER.info("intercept------------------{}",pjp.toLongString());
    //Delegate to customised method instead of default  pjp.proceed()
    return pjp.proceed();
  }
} 
```

**配置**

```
<beans:bean id="authFilterAspect" class="x.y.z.AuthenticationProcessingFilterAspect" />
<aop:config>
  <aop:aspect ref="authFilterAspect">
    <aop:around pointcut="bean(_formLoginFilter) &amp;&amp; execution(* doFilter(..))" method="intercept"/>
  </aop:aspect>
</aop:config> 
```

## 使用 CustomWebAuthenticationDetails 进行身份验证

为 AuthenticationProcessingFilter bean 定义一个 bean 后处理器，该 bean 注入 CustomWebAuthenticationDetails 填充自定义字段

```
public class AuthenticationProcessingFilterBeanPostProcessor implements
    BeanPostProcessor {

  private static final Logger LOGGER = LoggerFactory.getLogger(AuthenticationProcessingFilterBeanPostProcessor.class);

  public Object postProcessAfterInitialization(Object bean, String beanName)
      throws BeansException {
    if ("_formLoginFilter".equals(beanName) && bean instanceof AuthenticationProcessingFilter) {
      AuthenticationProcessingFilter filter = (AuthenticationProcessingFilter) bean;
      WebAuthenticationDetailsSource source = (WebAuthenticationDetailsSource) filter.getAuthenticationDetailsSource();
      source.setClazz(CustomWebAuthenticationDetails.class);
    }
    return bean;
  }

  public Object postProcessBeforeInitialization(Object bean, String beanName)
      throws BeansException {
    return bean;
  }

  @SuppressWarnings("serial")
  public static class CustomWebAuthenticationDetails extends
      WebAuthenticationDetails {
    private String customAttribute;//customfield
    public CustomWebAuthenticationDetails(HttpServletRequest request) {
      super(request);
      //Build custom attributes that could be used elsewhere (say in DaoAuthenticationProvider ) 
      //with (CustomWebAuthenticationDetails)authentication.getDetails()
      customAttribute = request.getHeader("username");
    }
    public boolean getCustomAttribute() {
      return customAttribute;
    }
  }
} 
```

**配置**

```
<beans:bean id="authFilterProcessor" class="x.y.z.AuthenticationProcessingFilterBeanPostProcessor" /> 
```

## 使用线程绑定请求进行实际身份验证（在 DaoAuthenticationProvider 内）

使用 getHttpServletRequest() 访问线程绑定请求对象并使用 request.getHeader("username") 进行自定义身份验证。

```
public static HttpServletRequest getHttpServletRequest(){
  return((ServletRequestAttributes) RequestContextHolder.currentRequestAttributes()).getRequest();
} 
```

如果请求不是通过 DispatcherServlet 也需要在 web.xml 中定义这个

```
<filter>
  <filter-name>requestContextFilter</filter-name>
  <filter-class>org.springframework.web.filter.RequestContextFilter</filter-class>
</filter>
<filter-mapping>
  <filter-name>requestContextFilter</filter-name>
  <url-pattern>/j_spring_security_check</url-pattern>
  <dispatcher>FORWARD</dispatcher>
  <dispatcher>REQUEST</dispatcher>
</filter-mapping>
<filter-mapping>
  <filter-name>requestContextFilter</filter-name>
  <url-pattern>/j_spring_security_logout</url-pattern>
  <dispatcher>FORWARD</dispatcher>
  <dispatcher>REQUEST</dispatcher>
</filter-mapping> 
```

如果它的面孔应用程序使用`FacesContext.getCurrentInstance()`

```
public static HttpServletRequest getHttpServletRequest(){
    FacesContext context = FacesContext.getCurrentInstance();
    return (HttpServletRequest) context.getExternalContext().getRequest();
} 
```

# save - 在 Unity3D 中保存游戏的方法

> ID：12261621
> 
> 赞同：1
> 
> 时间：2012-09-04T10:32:13.980
> 
> 标签：save, unity3d

我已经搜索了很多关于如何在 Unity 3D 中保存游戏的信息。每个人都建议使用 XML 序列化或 Player Prefs。我无法弄清楚到底要保存什么。我的游戏是塔防游戏，所以当我退出时我需要保存

*   塔（多个预制件，位置和每个特定升级，当前播放的动画等）
*   敌人（战场上的多个敌人预制件，他们​​的位置，动画，敌人路径，健康等）
*   敌波
*   路径计算
*   困难
*   等级
*   分数
*   活着离开
*   总金额

我应该用什么方法来保存所有这些信息。我必须达到的粒度级别是多少？. 我可以保存每个游戏对象吗？与该游戏对象相关的所有内容都将自动保存。还是我保存每一堂课？...还是我需要保存游戏中使用的每个变量。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2016-01-12T16:08:50.440

这取决于您的代码设计。但避免保存所有数据（如序列化）。所有具有初始默认值或对播放器不重要的（例如动画位置）都应仅保存更改的属性。加载游戏后，您应该从头开始创建对象，初始化它们并从保存的文件中设置值。

对于简单的游戏可以建议使用 Player Prefs 来保存当前级别、分数等信息。

为了保存数千个随机对象，请考虑保存控制点并恢复关卡加载它们并在它们周围重新生成随机点。

另一个好方法是将数据保存到网络云中。

# android - 卸载应用程序后如何从 GCM 注销

> ID：12261624
> 
> 赞同：13
> 
> 时间：2012-09-04T10:32:16.980
> 
> 标签：android, google-cloud-messaging

我已经在我的应用程序中配置了 GCM。每当用户卸载应用程序时，我都想从 GCM 注销设备。

我得到的代码为

```
Intent unregIntent = new Intent("com.google.android.c2dm.intent.UNREGISTER");
unregIntent.putExtra("app", PendingIntent.getBroadcast(this, 0, new Intent(), 0));
startService(unregIntent); 
```

但是我们必须把这段代码放在哪里..？

谢谢你。

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2012-09-04T10:36:26.403

卸载时不能从 GCM 调用 unregister，因为在用户卸载应用程序时没有调用方法。

当您发送推送通知时，GCM 将检查用户是否拥有您的应用程序，如果用户卸载了该应用程序，GCM 会注意到相同的情况并通知您作为推送回复的一部分。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-07-10T05:20:59.177

你必须在你的服务器上检查这个。您无法从应用程序代码中执行此操作，因为无法知道用户何时卸载应用程序。

请参阅：实施规范 ID。参考：[https ://developers.google.com/cloud-messaging/http#request](https://developers.google.com/cloud-messaging/http#request)

规范注册 ID 定义为您的应用程序请求的最后一次注册的 ID。这是服务器在向设备发送消息时应使用的 ID。

如果稍后您尝试使用不同的注册 ID 发送消息，GCM 将照常处理请求，但它将在响应的 registration_id 字段中包含规范注册 ID。确保使用此规范 ID 替换存储在您服务器中的注册 ID，因为最终您使用的 ID 将停止工作。

参考：[https ://stuff.mit.edu/afs/sipb/project/android/docs/google/gcm/adv.html#canonical](https://stuff.mit.edu/afs/sipb/project/android/docs/google/gcm/adv.html#canonical)

如果 Canonical ID 不为 0，则您有重复注册。

例如，您的数据库中有 2 个注册：

注册_A

注册_B

当您发送推送通知时，您的服务器将收到如下所示的响应：

```
{"multicast_id":########,"success":1,"failure":0,"canonical_ids":1,"results":
[{"registration_id":"new_id_registration_id","message_id":"0:########"}]}
{"multicast_id":######### ,"success":1,"failure":0,"canonical_ids":0,"results":[{"message_id":"0:################"}]} 
```

将此数据存储在数组中。请注意，第一个具有“canonical_ids”：1。这意味着有重复。所以要知道数据库中的哪条记录是旧的。只需在上面搜索“registration_id”并保存索引值即可。该索引值指向数据库中的旧记录。

在上面的示例中，registration_A 将是旧的 registration_id。

从您的数据库中获取所有记录。然后根据您检索到的索引值将其删除。或者你可以更新它。这取决于您如何设置数据库。

祝你好运！

# html5-canvas - Canvas 中的形状（矩形）拖动有什么变化？

> ID：12261625
> 
> 赞同：0
> 
> 时间：2012-09-04T10:32:21.190
> 
> 标签：html5-canvas

它是如何工作的？一个。矩形正在改变图层内的位置？或 b。图层改变了它在舞台内的位置？

我画了一个矩形，然后我把它拖到另一个地方，并输出 rect.getX() 和 rect.getY() 。它们始终保持 (10,10)。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-04T18:15:41.277

如果你画一个矩形，然后对要拖动的矩形进行编码，矩形形状就会移动。矩形 x 和 y 值应该改变。

你说不是这样吗？粘贴一些代码，以便我们查看:)

# delphi - Orpheus 控件提供的 TOvcTCCheckBox 问题

> ID：12261631
> 
> 赞同：0
> 
> 时间：2012-09-04T10:32:34.493
> 
> 标签：delphi, delphi-xe2

我正在使用 Orpheus control v4.08 和 Delphi XE2，我面临以下描述的问题。

我正在使用 TOvcTable，它的一列是 TOvcTCCheckBox。此表是可编辑的。在运行时复选框列可以被选中或取消选中。

现在要检查此列，我需要单击此列两次。

这在使用 Orpheus 控制版本 v3.08 的 Delphi 4 中运行良好。单击即可选中/取消选中复选框列。

**注意：有一个属性 AcceptActivationClick 在上述两种情况下都设置为 true。**

这个问题有什么解决方法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-05T03:51:48.393

这是一个解决方法：使用 OvcTable 的 MouseDown-Event 如下：

```
procedure TForm1.OvcTable1MouseDown(Sender: TObject; Button: TMouseButton;
  Shift: TShiftState; X, Y: Integer);
var
   RowNum, ColNum: Integer;
begin
   OvcTable1.CalcRowColFromXY(X, Y, RowNum, ColNum);
   if (OvcTable1.Columns.List[ColNum].DefaultCell is TOvcTCCheckBox) and
      ((RowNum <> OvcTable1.ActiveRow) or (ColNum <> OvcTable1.ActiveCol)) then
   begin
      PostMessage(OvcTable1.Handle, ctim_StartEdit, 0, 0);
      PostMessage(OvcTable1.Handle, ctim_StartEditMouse, 0, X + 65536 * Y);
   end;
end; 
```

来源： http: [//sourceforge.net/tracker/ ?func=detail&atid=529790&aid=3562412&group_id=71004](http://sourceforge.net/tracker/?func=detail&atid=529790&aid=3562412&group_id=71004)

# php - Is there a PHP equivalent for `public static main(String[] args)` in Java?

> ID：12261635
> 
> 赞同：16
> 
> 时间：2012-09-04T10:32:46.823
> 
> 标签：php, oop

> **Possible Duplicate:**
> [Is there a way to program 100% object-oriented in PHP?](https://stackoverflow.com/questions/8800397/is-there-a-way-to-program-100-object-oriented-in-php)

What I am trying to accomplish would look something like this:

```
 <?php
      //index.php
      class Site{
           public static function main(){
                // starts all the processing of the site
           }
      }
 ?> 
```

So that when someone visits the site's `index.php` the site will start up without having any code outside the class.

Yes I know that I could use `__autoload` or even `spl_autoload_register` to handle autoloading of classes but that would still most likely need to be added outside of the class.

I have my doubts that this is possible but I don't know why this wouldn't be possible.

* * *

## 回答 #1

> 赞同：31
> 
> 时间：2012-09-04T10:34:51.920

No.

Java's entry point is defined as the `main` method. PHP's entry point is defined as the first line in the first file that gets executed. You *will* have to start with "procedural" code.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-04T10:34:58.680

You can write your Site class like that and make that class construct everything, but you'd still need an entry file to initialize the class. You could 'boot up' your site with one line in your index file. Doesn't seem like a big inhibitor of flexibility.

So, answer would be no :)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-04T10:36:45.470

There is no such concept out of the box with php. You will have to have something either in index.php or something in an .htaccess file that will redirect the user to the file you want, but the class will always have to be instanced by code

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-09-04T10:39:12.633

You can achieve this very easy bij using a .htaccess on you site:

```
RewriteEngine On

RewriteCond %{REQUEST_FILENAME} !-d
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-l

RewriteRule ^(.+)$ index.php?url=$1 [QSA,L] 
```

Your index.php wil then do al the processing. With 1 line of procedural code, you could create a class, and move on from there.

```
<?php
      //index.php
      class Site{
           public static function main(){
                // starts all the processing of the site
           }
      }

      Site::main()
 ?> 
```

See my [tutorial/blog](http://www.ganymedes.be/index/blog/2).

# nsdictionary - 如何访问嵌套的 NSDictionary 项

> ID：12261636
> 
> 赞同：0
> 
> 时间：2012-09-04T10:32:49.960
> 
> 标签：nsdictionary

```
Sections =     (
            {
        EnglishName = whatsnew;
        ID = 1;
        Name = "What's New";
        ParentSectionID = 0;
    } 
```

这是我要访问的字典 我可以访问它的名称。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-05T10:32:48.053

从 OP 评论，这里是获取**name**值的方法`NSMutableDictionary`：

（假设您的 NSMutableDictionary 被命名为`Sections`）：

```
NSString *name = (NSString *)[Sections objectForKey:@"Name"]; 
```

# c# - 直接下载并安装到 C# 中的 iphone/ipad 中

> ID：12261637
> 
> 赞同：0
> 
> 时间：2012-09-04T10:32:57.777
> 
> 标签：c#

我想在 C# 中创建一个下载并自动将 ipa 文件安装到 iphone/ipad 中？但我不知道该怎么做。我只使用命令方式下载文件，但它不会自动安装到我的 iphone/ipad 中？这可能在 C# 中做吗？

它错误的代码只是它的理想选择：

```
 protected void Page_Load(object sender, EventArgs e)
    {
        string filePath = string.Empty;
        string appType = string.Empty;

        //ios
        filePath = "appFile/Apps.ipa";
        appType = "application/octet-stream";

      Response.ClearContent();
      Response.ContentType = MimeType(Path.GetExtension(fName),appType);
      Response.AddHeader("Content-Disposition", string.Format("attachment; filename = {0}",System.IO.Path.GetFileName(fName)));
      Response.AddHeader("Content-Length", sz.ToString("F0"));
      Response.TransmitFile(fName);
      Response.End();

    }
    public static string MimeType(string Extension,string appMineType)
    {
        string mime = appMineType;
        if (string.IsNullOrEmpty(Extension))
            return mime;
        string ext = Extension.ToLower();
        Microsoft.Win32.RegistryKey rk = Microsoft.Win32.Registry.ClassesRoot.OpenSubKey(ext);
        if (rk != null && rk.GetValue("Content Type") != null)
            mime = rk.GetValue("Content Type").ToString();
        return mime;
    } 
```

# c++ - 如何在 Ubuntu 上的 Eclipse 中编译 C++11

> ID：12261642
> 
> 赞同：0
> 
> 时间：2012-09-04T10:33:10.933
> 
> 标签：c++, eclipse, ubuntu, c++11, eclipse-cdt

> **可能重复：**
> [Eclipse CDT C++11/C++0x 支持](https://stackoverflow.com/questions/9131763/eclipse-cdt-c11-c0x-support)

我尝试了所有方法来编译 C++11 代码`std::unique_ptr`，但它永远不会编译。

我跟着[this](https://stackoverflow.com/questions/9131763/eclipse-cdt-c11-c0x-support)和[this](http://wiki.eclipse.org/CDT/User/FAQ#CDT_does_not_recognize_C.2B.2B11_features)但它仍然没有编译。我还安装了 gcc 4.7，并确保它已添加到我的 eclipse c++ 项目的包含目录中，但它仍然无法正常工作！！

请问有什么遗漏吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-04T11:01:07.440

GCC 默认使用哪种语言标准取决于它的编译方式，但大多数发行版仍将其设置为类似于`gnu++98`C++ 的语言标准。要使用 C++11，您必须传递以下语言标准选项之一：

```
g++ --std=c++0x     # <= 4.6.*

g++ --std=c++11     # >= 4.7.* (but c++0x is still accepted) 
```

要使用唯一指针：

```
#include <memory>

std::unique_ptr<base[]> AllYourBase(::new base[1024]); 
```

# php - Ajax登录技术（后端php）

> ID：12261644
> 
> 赞同：1
> 
> 时间：2012-09-04T10:33:22.067
> 
> 标签：php, javascript, ajax, security, hash

我阅读了很多关于登录安全的信息，其中大部分是关于 Ajax 的。主要是我想通过 javascript 以纯文本形式传递密码和用户名，并在 php 中对其进行哈希处理。这样：JS纯文本> php哈希>数据库

在 Ajax 期间哈希两次呢？你认为它好吗？像这样：JS hash > php hash > 数据库

所以我不关心 Ajax 请求期间的黑客，当然服务器上的另一个散列会使其更安全，这是我发现的最好的散列方法之一。使用 JS 散列，我永远不会在服务器上收到真实密码，但是，我不需要真实密码，只需要一个散列来比较散列的密码。

使用 JS 散列更好，或者我可以只使用 php 散列？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-04T10:36:03.363

只要您使用 HTTPS 进行数据交换并且数据不敏感，php 散列应该没问题。

如果您只使用 HTTP，您将遇到“正常”的黑客问题，因此您可能想尝试 JS 散列。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-04T10:37:17.920

这取决于您主要关心的是什么——只有当您期望有人可以监听客户端和服务器之间的通信时，JS 哈希才会有所帮助。但是，如果有人在注册时禁用 Javascript，然后在登录时启用它或只是转到另一台计算机，您将不知道数据库中的密码是否经过一次或两次散列。

# windows - 通过配置文件或参数使用特定图像自动启动 Manycam

> ID：12261645
> 
> 赞同：0
> 
> 时间：2012-09-04T10:33:22.520
> 
> 标签：windows, command-line, webcam

目前我试图弄清楚是否可以启动 ManyCam 自动显示我通过配置文件或命令行参数配置的图片。

我担心这可能是不可能的，所以我也搜索了与 manycam 类似的软件，它启用了这个选项。此外，该软件必须在 Windows 上运行。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-22T08:21:44.267

ManyCam 支持人员回答：现在无法使用命令行参数启动 ManyCam。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-11-06T22:47:46.427

以下命令放在批处理文件中时，`manycam`会在单击批处理文件时打开。

```
start "" "C:\Program Files (x86)\ManyCam\Bin\ManyCam.exe" 
```

# livesearch - Microsoft LiveSearchService 返回 ClientError

> ID：12261655
> 
> 赞同：1
> 
> 时间：2012-09-04T10:34:15.373
> 
> 标签：livesearch

多年来，我们一直在成功使用 Microsoft 的 LiveSearchService，但就在一个多星期前，它停止了工作。它现在返回错误

> System.Web.Services.Protocols.SoapException：客户端错误

这发生在 Microsoft 提供的 Reference.cs 文件的第 79 行：

> object[] results = this.Invoke("Search", new object[] {parameters});

我在调用 LiveSearchService.Search() 之前构建了一个 SearchRequest 对象，这里的一切看起来都很好，它具有正确的 appID 并将一个简单的查询字符串传递给正确的站点地址。

我的网络管理员向我保证，我们的防火墙没有任何问题，可以阻止任何试图到达 api.search.live.net 站点的流量，我可以使用我们的 appID 访问这个 URL，它返回预期的 XML。

我还尝试将偏移量更改为 10，以防搜索词返回大量荒谬的结果，但这没有任何区别。

我们在 Windows Server 2008 R2 机器上安装了 IIS7，网站是使用 VS 2008 用 C#.NET 3.5 编写的。

我不知道接下来要尝试什么，所以任何建议都将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-05T10:31:29.523

据[Bing.com](http://www.bing.com/community/site_blogs/b/developer/archive/2012/05/17/bing-developer-update-2.aspx)报道，

> ...Bing Search API 2.0 AppID 于 2012 年 8 月 1 日停用。在此日期及之后，AppID 将不再返回结果。开发人员可以通过注册 Windows Azure Marketplace 或在需要更大查询量时提交请求来继续使用 API。

[这里](https://datamarket.azure.com/dataset/5BA839F1-12CE-4CCE-BF57-A49D98D29A44)有定价计划和迁移指南。

# c++ - 如何在 C++ 中获取标记化字符串中的最后一个元素，以“::”分隔？

> ID：12261657
> 
> 赞同：7
> 
> 时间：2012-09-04T10:34:21.633
> 
> 标签：c++

我正在研究 C++，

我有一个字符串如下：

```
string str = "rake::may.chipola::ninbn::myFuntion"; 
```

如何从上面的字符串中获取最后一个元素，它总是在最后一次出现“::”之后？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-09-04T10:35:53.577

用于[`std::string::rfind()`](http://en.cppreference.com/w/cpp/string/basic_string/rfind)定位最后一次出现`::`并用于[`std::string::substr()`](http://en.cppreference.com/w/cpp/string/basic_string/substr)提取令牌：

```
// Example without confirming that a '::' exists.
std::string last_element(str.substr(str.rfind("::") + 2)); 
```

# c# - 如何在不同的表中映射两个具有相同主键的不同外键？

> ID：12261659
> 
> 赞同：0
> 
> 时间：2012-09-04T10:34:25.917
> 
> 标签：c#, .net, asp.net-mvc, entity-framework, ef-code-first

我有一个名为**EnrollTrainee**的表。我的 EnrollTrainee 模型类中有这些列：

```
[Key]
public int id { get; set; }

public int TraineeID { get; set; }      

public int TrainerID { ![enter image description here][1]get; set; }

public virtual CreateUsers user_userid { get; set; }

public virtual CreateUsers user_id { get; set; }

public DateTime dt { get; set; } 
```

这两个列**TraineeID**和**TrainerID**将与表**CreateUser中的****User_id**列进行映射。

 **这是**CreateUser**模型类

```
 public class CreateUsers
    {
    [Key]
      public int User_Userid { get; set; }

    [Required]
    [Display(Name="Enter User Name")]
    public string User_name { get; set; }

    [Required]
    [Remote("IsDomainIDExist", "Account", ErrorMessage = "Domain ID Already Exist")]
    [Display(Name = "Enter Domain ID")]
    public string User_username { get; set; }

    [Required]
    [DataType(DataType.Password)]
    [Display(Name = "Enter Password")]
    public string User_password { get; set; }

    [Required]
    [Display(Name = "Enter Department")]
    public string User_department { get; set; }

    [Required]
    [Remote("IsEmployeeIDExist", "Account", ErrorMessage = "Domain ID Already Exist")]
    [Display(Name = "Enter Employee ID")]
    public string User_employeeid { get; set; }

    [Required]
    [Display(Name="Select Role Type")]
    public int RoleID { get; set; }

    [Display(Name="Enable?")]
    public bool User_Enable { get; set; }

    [DataType(DataType.DateTime)]
    [Display(Name = "Date Time")]
    public DateTime dt { get; set; }

    public virtual RoleModel Role { get; set; }

 } 
```

如何在 EF CF 中映射两个具有相同主键的外键？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-04T10:46:07.133

像这样的东西：

```
public class EnrollTrainee
{
    [Key]
    public int id { get; set; }

    public int TraineeID { get; set; }

    public virtual CreateUser Trainee { get; set; }

    public int TrainerID { get; set; }

    public virtual CreateUser Trainer { get; set; }

    public DateTime dt { get; set; }
}

internal class EnrollTraineeConfiguration:EntityTypeConfiguration<EnrollTrainee>
{
    public EnrollTraineeConfiguration()
    {
        ToTable("EnrollTrainee");
        Property(c => c.dt).HasColumnName("dt");
        Property(c => c.TraineeID).HasColumnName("TraineeID");
        Property(c => c.TrainerID).HasColumnName("TrainerID");
        HasKey(c => c.id);
        HasRequired(c => c.Trainee).WithMany().HasForeignKey(c=>c.TraineeId);
        HasRequired(c => c.Trainer).WithMany().HasForeignKey(c => c.TrainerId);
    }
}
public class Context: DbContext
{
     protected override void OnModelCreating(DbModelBuilder modelBuilder)
     {
          modelBuilder.Configurations.Add(new EnrollTraineeConfiguration());
          ......
     }
     ....
} 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-09-04T11:26:55.170

如果您使用的是 MVC3 或 4，那么您可以使用实体框架映射来做同样的事情，这反过来会生成所需的类。您可以使用模型浏览器来执行相同的操作。

你必须做的：

创建表 在表中创建 PK 和 FK 约束 右键单击​​项目中解决方案资源管理器中的模型文件夹选择添加新项，从“数据”类别中选择 ADO.Net EF 4.x/5.x 单击确定将打开一个向导，提供所需的参数，在途中选择您需要的表格。完成后，它将简单地在 .Edmx 的上下文文件中创建一个 .Edmx 文件，我**

# iphone - 如何从 UIPanGestureRecognizer 识别触摸的单元格？

> ID：12261660
> 
> 赞同：0
> 
> 时间：2012-09-04T10:34:26.517
> 
> 标签：iphone, ios, ipad

我正在使用 UIPanGestureRecognizer 来“拖动”一个单元格。我面临的问题是如何识别被触摸的Cell？didSelectRowAtIndexPath 对我不起作用，因为用户实际上是从单元格中平移而不是选择它。有人有什么建议吗？谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-04T10:40:14.877

如果您将手势识别器添加到`UITableView`，那么在您的手势识别器目标中执行以下操作：

```
CGPoint locationOfPan = [recognizer locationInView:self.tableView];
NSIndexPath indexPath = [self.tableView indexPathForRowAtPoint:locationOfPan]; 
```

然后您可以从表格视图中获取单元格

```
UITableViewCell *cell = [self.tableView cellForRowAtIndexPath:indexPath]; 
```

# android-intent - 有没有办法在删除该包后找出与特定包关联的所有活动名称？

> ID：12261666
> 
> 赞同：0
> 
> 时间：2012-09-04T10:34:47.543
> 
> 标签：android-intent

注意：到目前为止，我只能使用操作 Intent.ACTION_PACKAGE_REMOVED 并在意图上使用 getData().getSchemeSpecificPart() 来找出 packageName

搜索 UID 返回错误并尝试拉出对应的 PackageInfo 也会抛出 NameNotFoundException

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-05T07:36:59.763

没有出路。除非和直到您故意将包名称及其相应的活动保存在存储中的某个位置，然后使用从意图中检索到的包名称来获取它们，然后搜索先前存储的包活动列表。

# c# - 如何在 oracle coherence POF 配置中指定完整的 .net 类型名称？

> ID：12261669
> 
> 赞同：0
> 
> 时间：2012-09-04T10:34:51.910
> 
> 标签：c#, gac, oracle-coherence

我在我的 C# 项目中使用 oracle coherence。.Net 项目引用了 Coherence，它通过“注入”我的类型来设置一些 Coherence 属性。POF 配置的示例之一：

```
<user-type>
  <type-id>1008</type-id>
  <class-name>MyTypeName, MyAssembly, version=1.2.3.4, publicKeyToken=0f73b23f05811dc2</class-name>
</user-type> 
```

尽管我的所有类型都是通过使用带有版本和公钥令牌的全名来指定的，但 Coherence 不使用它并绑定到**MyAssembly**。

这对我来说是个大问题，因为**MyAssembly**在 GAC 中并且绑定失败。当然我可以使用应用程序配置并设置：

```
<assemblyBinding xmlns="urn:schemas-microsoft-com:asm.v1">
  <qualifyAssembly partialName="MyAssembly" fullName="MyAssembly,Version=1.2.3.4,publicKeyToken=0f73b23f05811dc2,culture=neutral" />
</assemblyBinding> 
```

但我想避免这种情况（并非每个应用程序都可以有一个 app.config - 比如 PowerShell）。

在 Oracle 文档[http://docs.oracle.com/cd/E18686_01/coh.37/e18678/net_intobjects.htm#BABJCBDD](http://docs.oracle.com/cd/E18686_01/coh.37/e18678/net_intobjects.htm#BABJCBDD)我发现：

> 您无需在 class-name 元素中指定完全限定的类型名称。类型和程序集名称就足够了。

但是如果我想指定完全限定名怎么办？

- 编辑

我遇到的新问题是**tangosol-coherence.override.xml**：

```
<security-config>
    <identity-transformer>
      <class-name>MyAssembly.IdentityTransformer, MyAssembly, Version=1.2.3.4, publicKeyToken=0f73b23f05811dc2, culture=neutral</class-name>
    </identity-transformer>
    <principal-scope>false</principal-scope>
</security-config> 
```

我得到的例外：

> 无法实例化类“MyAssembly.IdentityTransformer，MyAssembly，Version=1.2.3.4，publicKeyToken=0f73b23f05811dc2，culture=neutral”
> MyAssembly.IdentityTransformer，MyAssembly，Version=1.2.3.4，publicKeyToken=0f73b23f05811dc2，culture=neutral

在**程序集绑定日志查看器**中：

> 警告：为程序集提供了部分绑定信息：警告：程序集名称：MyAssembly，版本=1.2.3.4 | 域 ID：1
> 
> 调用程序集：一致性，版本=3.7.1.3，文化=中性，PublicKeyToken=0ada89708fdf1f9a。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-04T13:29:22.383

我通过分析 Coherence 反汇编 dll 解决了这个问题。

看起来像：

```
Tangosol.Util.TypeResolver.Resolve(typeName); 
```

当它像这样指定时无法解析类型：

```
MyAssembly.IdentityTransformer, MyAssembly, Version=1.2.3.4, publicKeyToken=0f73b23f05811dc2, culture=neutral 
```

但是当它像这样指定时它可以：

```
MyAssembly.IdentityTransformer, MyAssembly, Version=1.2.3.4, Culture=neutral, PublicKeyToken=0f73b23f05811dc2 
```

所以修改**tangosol-coherence.override.xml**修复了它。

# android - 覆盖 Android 应用程序

> ID：12261672
> 
> 赞同：0
> 
> 时间：2012-09-04T10:34:57.977
> 
> 标签：android, android-manifest, overwrite

我想覆盖我的旧 android 应用程序。我必须为此做些什么？

改变`AndroidManifest.xml`就够了吗？
我喜欢使用另一个包结构和一个新项目来做到这一点。

问候。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-04T10:37:23.167

以下是必需的：

1.  相同的键
2.  相同的包名
3.  清单中的更高版本代码

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-04T10:40:24.453

清单中指示的包名称应相同：

```
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
package="com.company.demo.app"
android:versionCode="1"
android:versionName="1.0" > 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-04T10:40:26.233

如果你说的是在 Google Play 中注册，我认为只有节点的`package="..."`属性`<manifest>`必须相同（当然版本必须优于你的第一个应用程序）。

它也必须使用相同的密钥进行签名。

这样，Google Play 网站会将您的旧应用程序识别为新版本，并将替换旧应用程序。

# python - 字符串创建：两种语法“”和“”之间的区别？

> ID：12261674
> 
> 赞同：2
> 
> 时间：2012-09-04T10:35:01.113
> 
> 标签：python, string, syntax

> **可能重复：**
> [Python 中的单引号与双引号](https://stackoverflow.com/questions/56011/single-quotes-vs-double-quotes-in-python)

通常我们表示，创建这样的字符串

```
 s = 'abc' 
```

也像这样

```
 c = "abc" 
```

理想情况下，两种方式都是相同的，而不是为什么我们有两种语法来做同样的事情？这两者之间是否有任何区别，或者理想情况下它们是相同的。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-09-04T10:36:36.140

本质上是相同的，除了你必须逃避的东西：

```
"'"
'"' 
```

两者都有效，但要合并多个引号类型，您*必须*转义用于创建字符串的那些：

```
"\"'"
'"\'' 
```

两者的存在是为了让您轻松避免必须转义引号，因此以下两个很容易：

```
'She said: "Not so fast!"'
"Won't you come with us?" 
```

请注意，还有三引号变体：

```
"""Now I can use either quote with more freedom: ' and "."""
'''Now I can use either quote with more freedom: ' and ".''' 
```

这些还允许在不转义的情况下包含换行符：

```
"""A
multiline
string
is
easy.
""" 
```

最后一个示例将要求您使用过多的`\n`转义序列，否则。

# html - 网络摄像头没有声音

> ID：12261678
> 
> 赞同：0
> 
> 时间：2012-09-04T10:35:16.027
> 
> 标签：html, audio, webcam, microphone

我正在尝试在浏览器上进行一些网络摄像头和网络录音。

这是我的代码： http: [//jsfiddle.net/FDScP/](http://jsfiddle.net/FDScP/)（您必须在 Chrome 版本：21 上打开它）

它需要一个摄像头和麦克风作为设备，摄像头做得很好，但它不是麦克风的声音。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-04T10:54:21.573

`getUserMedia`目前还没有支持语音的实现。他们提供的只是访问相机。麦克风访问最终会到来，但还没有到来。

# c# - FB 赞和发送

> ID：12261681
> 
> 赞同：0
> 
> 时间：2012-09-04T10:35:22.160
> 
> 标签：c#, asp.net-mvc, facebook-graph-api

我正在处理 FB like 和 send 按钮，我遇到了这些问题我制作了一个包含一些元标记信息的页面，因为 FB 对象调试器可以验证页面在本节中，我将 og:url 设置为 URL喜欢按钮所在的页面的

在like按钮的href属性上，我给了Request.URL，问题是它不喜欢/发送我提到og：url的URL，而是在消息中发送Facebook.com

以下是我的元信息

```
<head prefix="og: http://ogp.me/ns# fb: http://ogp.me/ns/fb# tbsname: http://ogp.me/ns/fb/tbsname#">
  <meta property="fb:app_id" content="242015609188249" />   
  <meta property="og:url" content="http://mywebsite.com/Course/Profile/1381765" />
  <meta property="og:title"  content="Details" /> 
  <meta property="og:description" content="" /> 
```

下面是我的 FB like 按钮：

```
 <div class="fb-like" data-href="@Request.Url" data-send="true" data-layout="button_count" data-width="450" data-show-faces="true"></div> 
```

我正在浏览器中访问[http://mywebsite.com/Course/Profile/1381765](http://mywebsite.com/Course/Profile/1381765)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-04T11:05:31.687

类似按钮的代码应该是

```
<div class="fb-like" data-href="http://mywebsite.com/Course/Profile/1381765" data-send="true" data-layout="button_count" data-width="450" data-show-faces="true"></div> 
```

# javascript - 在文本上标记另一个文本

> ID：12261682
> 
> 赞同：-3
> 
> 时间：2012-09-04T10:35:23.653
> 
> 标签：javascript, jquery

我正在寻找 js 代码（可能是 jquery），当我在另一个文本上过度鼠标时会标记一些文本（它们都将具有相同的 ID）

我有许多 URL，我希望它们上的过度鼠标会改变表格单元格的颜色

例如：

url1 上的 overmouse 将标记单元格 ID 20

url2 上的 overmouse 将标记单元格 ID 18

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-04T10:43:08.353

为要突出显示的文本和触发文本创建 2 个不同的 ID：

```
<span id="part1_text" class="class">my text</span> Lorem ipsum dolor sit amet, consectetur adipiscing elit. Sed dapibus risus at est sollicitudin vulputate. Quisque tristique velit nec lorem consequat non placerat nibh iaculis.

<br /><br />

<span id="text">hover me</span>​ 
```

使用`hover`：

```
$('#text').on('hover', function(){
    var nextId = '#part1_'+$(this).attr('id');
    $(nextId).toggleClass('class2');
});
​ 
```

[JSFiddle](http://jsfiddle.net/8FwSk/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-04T10:41:45.907

更高级的解决方案：http: [//jsfiddle.net/ggDzw/4/](http://jsfiddle.net/ggDzw/4/)

```
<table border="1">
    <tr> 
        <td id="cell20">CELL 20</td>
        <td id="cell201">CELL 201</td>
    </tr>
    <tr>
        <td id="cell300">CELL 300</td>
        <td id="cell301">CELL 301</td>
    </tr>
    <tr>
        <td id="cell18">CELL 18</td>
        <td id="cell181">CELL 181</td>
    </tr>
</table>
<h1>
<a id="url1" href="http://www.9gag.com/">URL 1</a><br>
<a id="url2" href="http://www.giorgiacosplay.com/">URL 2</a>
</h1>
​
function URLtoCellHighlight(urlID, cellID) {

$("#" + urlID).hover(

function() {
    $("#" + cellID).addClass("highlight")
}, function() {
    $("#" + cellID).removeClass("highlight")
        });
}

    URLtoCellHighlight("url1", "cell20");
    URLtoCellHighlight("url2", "cell18");
​
.highlight { background-color: yellow }
h1 { color: red }
​ 
```

这是 SPAN 的基本示例

[http://jsfiddle.net/ggDzw/](http://jsfiddle.net/ggDzw/)

```
<span id="text1">TEXT 1</span>
<span id="text2">Other Text</span>
​
.highlight { background-color: yellow }​

$("#text2").hover(
function() {
    $("#text1").addClass("highlight")
}, function() {
    $("#text1").removeClass("highlight")
});​ 
```

# java - 如何从表模型中获取选定的行？

> ID：12261688
> 
> 赞同：1
> 
> 时间：2012-09-04T10:35:44.840
> 
> 标签：java, swing, jtable, tablemodel, indexoutofboundsexception

如何从表模型中获取选定的行？我尝试了以下......

```
checkBoxes[t].addActionListener(new ActionListener() {
  public void actionPerformed(ActionEvent  e) {

    int index = -1;
    for (int i = 0; i < checkBoxes.length; i++) {
      if (checkBoxes[i] == e.getSource()) {

        String Status=null ;
        DbUtility ViewAbsenties=new DbUtility();
        ViewAbsenties.loadDriver();
        ViewAbsenties.connect();

        TableModel tm;
        tm = table3.getModel();

        if (checkBoxes[i].isSelected() == true) {
          Status  =(String) tm.getValueAt(i,8);
          System.out.println("Status : " + Status );

        }
      }
    }
  }
} 
```

当我运行上面的代码时，我收到以下错误。

```
 Exception in thread "AWT-EventQueue-0" java.lang.ArrayIndexOutOfBoundsException: 1 >= 1
    at java.util.Vector.elementAt(Unknown Source)
    at javax.swing.table.DefaultTableModel.getValueAt(Unknown Source)
    at EmployeeLeave$10$1.actionPerformed(EmployeeLeave.java:490)
    at javax.swing.AbstractButton.fireActionPerformed(Unknown Source)
    at javax.swing.AbstractButton$Handler.actionPerformed(Unknown Source)
    at javax.swing.DefaultButtonModel.fireActionPerformed(Unknown Source)
    at javax.swing.JToggleButton$ToggleButtonModel.setPressed(Unknown Source)
    at javax.swing.plaf.basic.BasicButtonListener.mouseReleased(Unknown Source)
    at java.awt.Component.processMouseEvent(Unknown Source)
    at javax.swing.JComponent.processMouseEvent(Unknown Source)
    at java.awt.Component.processEvent(Unknown Source)
    at java.awt.Container.processEvent(Unknown Source)
    at java.awt.Component.dispatchEventImpl(Unknown Source)
    at java.awt.Container.dispatchEventImpl(Unknown Source)
    at java.awt.Component.dispatchEvent(Unknown Source)
    at java.awt.LightweightDispatcher.retargetMouseEvent(Unknown Source)
    at java.awt.LightweightDispatcher.processMouseEvent(Unknown Source)
    at java.awt.LightweightDispatcher.dispatchEvent(Unknown Source)
    at java.awt.Container.dispatchEventImpl(Unknown Source)
    at java.awt.Window.dispatchEventImpl(Unknown Source)
    at java.awt.Component.dispatchEvent(Unknown Source)
    at java.awt.EventQueue.dispatchEventImpl(Unknown Source)
    at java.awt.EventQueue.access$000(Unknown Source)
    at java.awt.EventQueue$3.run(Unknown Source)
    at java.awt.EventQueue$3.run(Unknown Source)
    at java.security.AccessController.doPrivileged(Native Method)
    at java.security.ProtectionDomain$1.doIntersectionPrivilege(Unknown Source)
    at java.security.ProtectionDomain$1.doIntersectionPrivilege(Unknown Source)
    at java.awt.EventQueue$4.run(Unknown Source)
    at java.awt.EventQueue$4.run(Unknown Source)
    at java.security.AccessController.doPrivileged(Native Method)
    at java.security.ProtectionDomain$1.doIntersectionPrivilege(Unknown Source)
    at java.awt.EventQueue.dispatchEvent(Unknown Source)
    at java.awt.EventDispatchThread.pumpOneEventForFilters(Unknown Source)
    at java.awt.EventDispatchThread.pumpEventsForFilter(Unknown Source)
    at java.awt.EventDispatchThread.pumpEventsForHierarchy(Unknown Source)
    at java.awt.EventDispatchThread.pumpEvents(Unknown Source)
    at java.awt.EventDispatchThread.pumpEvents(Unknown Source)
    at java.awt.EventDispatchThread.run(Unknown Source) 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-04T11:07:48.737

1.  存在三个潜在问题

    *   [JTable](http://docs.oracle.com/javase/tutorial/uiswing/components/table.html)的视图可以[排序或过滤](http://docs.oracle.com/javase/tutorial/uiswing/components/table.html#sorting)然后你必须转换[RowIndexToModel](http://docs.oracle.com/javase/7/docs/api/javax/swing/JTable.html)

    *   以零开头的数组 ( `getValue(0, 0`)`1st. row`来自`1st. column`)

    *   必须正确设置[javax.swing.ListSelectionModel](http://docs.oracle.com/javase/tutorial/uiswing/components/table.html#selection)或确定所有选定的行

2.  尽快发布[SSCCE以获得更好的帮助](http://sscce.org/)

# objective-c - iOS：进入后台时完成任务

> ID：12261691
> 
> 赞同：6
> 
> 时间：2012-09-04T10:36:00.963
> 
> 标签：objective-c, ios, background-process

如果我正在下载大文件并且应用程序被移到后台，有没有办法让下载执行功能保持活力？

我知道`beginBackgroundTaskWithExpirationHandler:`当应用程序移动到后台时会被调用，我可以在那里开始我的任务，但我不想开始新任务，我想完成我的旧任务。它可以用 解决`beginBackgroundTaskWithExpirationHandler:`，但为此我需要暂停我的下载并从正确的位置恢复它，这简直是愚蠢的。

理想情况下，我想要的是我用过期处理程序包装我的下载函数，所以我的下载函数在应用程序移动到后台后继续执行允许的时间。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-04T14:30:44.940

> 理想情况下，我想要的是我用过期处理程序包装我的下载函数，所以我的下载函数在应用程序移动到后台后继续执行允许的时间。

这正是它的工作原理。`beginBackgroundTaskWithExpirationHandler:`进入后台时不调用。这就是*你*所说的表明你正在开始的东西，*如果你碰巧在它运行时进入后台*，你想完成。只需用`beginBackgroundTaskWithExpirationHandler:`和包装现有的下载代码`endBackgroundTask:`。

* * *

## 回答 #2

> 赞同：-3
> 
> 时间：2012-09-04T11:04:57.523

在前台启动后台线程是非常好的。添加您的自定义到期处理程序。做一个异步请求。

```
dispatch_async(dispatch_get_global_queue(DISPATCH_QUEUE_PRIORITY_DEFAULT, 
                                         (unsigned long)NULL), ^(void) {
    [self performYourStuffInTheBackGround];
}); 
```

以及来自 AppleDEV 的报价；

> 您可能想要使用异步网络 API。iOS 提供了各种各样的 API 来实现这一点——从像 GCD 这样的低级 API 到像 NSURLConnection 这样的高级 API，中间有很多停止——我们鼓励你使用它们。

# c# - 如何将自定义类传递给 WCF 服务？

> ID：12261696
> 
> 赞同：0
> 
> 时间：2012-09-04T10:36:11.680
> 
> 标签：c#, asp.net, wcf

我必须将几个参数传递给 WCF 服务，因此我创建了一个具有适当字段的类，并认为我会将该类的一个实例传递给服务。但是该服务认为该类与其拥有的类不同。

所以我想在服务中创建那个类，但是我在调​​用程序中发现了

```
Class1 c = new Class1 ();//of the class in the service
FieldInfo[] f = c.GetType().GetFields(); 
```

什么都不返回。

所以我尝试制作一个接口，但服务仍然希望*它的*类来自服务。

那么我怎样才能传递一个自定义类实例，并且仍然能够像任何其他类一样在调用者中使用该类呢？

编辑：

这就是我正在做的事情：我在 VWD（-Visual Studio for web）中创建了一个网站（只是简单的模板）。并添加了一个 WCF 服务和一个文件

```
[DataContract]
[Serializable()]
public class Class1
{
    [DataMember]
    public string s = "";
} 
```

编辑：好的。由于某种原因，这些字段被转换为属性。

谢谢你们！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-04T10:45:09.380

下面是一个 Datacontract 的示例：

```
 [DataContract]
public class Person
{
    [DataMember]
    public int id { get; set; }

    [DataMember]
    public string Name{ get; set; }
} 
```

然后，您可以从 WCF 客户端启动它，或者将其作为方法中的参数传递，或者让它从方法（函数）返回。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-04T10:39:49.970

您正在这里寻找 DataContract。您要在 OperationContract 中使用的类必须标记为 DataContract，因为它可以被序列化。

编辑：如果您在 Web 应用程序中添加了对服务的引用，您应该能够在 Reference.cs 文件中找到该类。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-04T10:45:15.463

我不确定我是否理解你的问题。看起来您想从 wcf 服务传递一个自定义类（请查看[http://msdn.microsoft.com/en-us/library/ms733127.aspx](http://msdn.microsoft.com/en-us/library/ms733127.aspx)）。我不明白，要如何将某些东西传递给 WCF 服务，除非它消耗另一个服务。

编辑：您不能将客户端的类用作服务方法的参数。

# java - 成功导入后 Facebook SDK 导入错误

> ID：12261698
> 
> 赞同：4
> 
> 时间：2012-09-04T10:36:19.560
> 
> 标签：java, android, facebook

我正在尝试将 facebook sdk 库导入到我的 android 项目中，并且我成功导入了它们。现在我想将 facebook sdk 类导入到我的项目中，但我无法导入它们。问题是什么 ？我究竟做错了什么 ？当我再次检查是否添加了 fb sdk 时，我看到了[这个错误](http://www.youtube.com/watch?v=FyjrbvuB11k)。如果我做错了什么，请帮助我

我不知道这是否是一个好方法，但我在 youtube 上上传了一个视频并在此处分享了链接，对于视频质量不佳感到抱歉，但这只是一个 25 秒的视频。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-03-24T11:00:51.173

经过数小时的挫败后破解它....

好吧，事情是这样的。站在你按照 facebook 开发者的指示创建的 FaceBook 项目上。右键单击并选择属性，选择 android 并从列表中选择一个 android API，按应用并确定。清理项目并看到错误消失。现在是时候进入你的项目了，点击右键并选择属性。转到 Android ，按添加按钮并选择 facebook 项目。按应用并确定。清理项目只是为了好运。现在你终于可以使用 com.facebook 了！

希望将来能节省一些可怜的程序员宝贵的时间。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-05T04:57:46.197

问题是 Facebook SDK 仍然保留在您的 C:/Downloads 文件夹中。你必须把它放在你的 Eclipse Workspace 中然后导入它。它对我有用！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-04T10:54:02.670

您的 sdk 和您的项目应该在同一路径中。否则，库将无法正确加载。检查您的项目是否与您的 facebook sdk 位于同一路径。或者将 sdk 复制到项目的同一文件夹中，然后将其作为库加载。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-04T10:47:33.313

你应该按照这个步骤指导[facebook](http://developers.facebook.com/docs/mobile/android/build/)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-01-08T17:16:45.703

我面临着类似的问题。我的项目工作空间在另一个目录中，而 SDK 在另一个目录中，根据教程，我更喜欢保持这种方式。解决方案是将 Facebook SDK 包含到项目的构建路径中。您可以在属性中执行此操作，或单击错误图标 > 组织导入，它应该会自动为您提供将 SDK（如果找到）添加到构建路径中的选项。那应该工作！

# c# - 使用 MVC4 返回值的正确方法

> ID：12261710
> 
> 赞同：1
> 
> 时间：2012-09-04T10:37:10.130
> 
> 标签：c#, asp.net-mvc-4, asp.net-web-api

在 MVC4 中通过 API 控制器返回 JSON 数据的正确方法是什么？我听说您需要将变量类型用作函数，但是我不能这样做，因为`.Select(x => new { })`那时我不能使用。

我所做的是`dynamic`像这样使用

```
[HttpGet]
public dynamic List() // Not List<Item>
{
    var items = _db.Items.OrderBy(x => x.ID).Select(x => new
    {
        ID = x.ID,
        Title = x.Title,
        Price = x.Price,
        Category = new {
            ID = x.Category.ID,
            Name = x.Category.Name
        }
    });

    return items;
} 
```

这是最好的方法吗？我在问，因为我刚开始使用 MVC4，我不想过早养成坏习惯 :)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-04T10:38:51.570

内置函数`Controller.Json`( [MSDN](http://msdn.microsoft.com/en-us/library/system.web.mvc.controller.json%28v=vs.98%29.aspx) ) 可以做你想做的事，即假设你的代码驻留在控制器类中：

```
[HttpGet]
public dynamic List() // Not List<Item>
{
    var items = _db.Items.OrderBy(x => x.ID).Select(x => new
    {
        ID = x.ID,
        Title = x.Title,
        Price = x.Price,
        Category = new {
            ID = x.Category.ID,
            Name = x.Category.Name
        }
    });

    return Json(items, JsonRequestBehavior.AllowGet);
} 
```

如果您想在 GET 请求中使用它，那么您应该使用接受`JsonRequestBehavior`标志作为参数并指定`JsonRequestBehavior.AllowGet`该参数的重载。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-04T10:45:22.100

您不需要使用`dynamic`，简单的方法是返回`object`匿名类型：

```
[HttpGet] 
public object List() // Not List<Item> 
{ 
    var items = _db.Items.OrderBy(x => x.ID).Select(x => new 
    { 
        ID = x.ID, 
        Title = x.Title, 
        Price = x.Price, 
        Category = new { 
            ID = x.Category.ID, 
            Name = x.Category.Name 
        } 
    }); 

    return items; 
} 
```

或者，返回`HttpResponseMessage`：

```
[HttpGet] 
public HttpResponseMessage List() // Not List<Item> 
{ 
    var items = _db.Items.OrderBy(x => x.ID).Select(x => new 
    { 
        ID = x.ID, 
        Title = x.Title, 
        Price = x.Price, 
        Category = new { 
            ID = x.Category.ID, 
            Name = x.Category.Name 
        } 
    }); 

    return Request.CreateResponse(HttpStatusCode.OK, items);
} 
```

# php - 为什么我的表单作为 url 而不是 php 文件中的操作提交给我的 php

> ID：12261716
> 
> 赞同：1
> 
> 时间：2012-09-04T10:37:29.167
> 
> 标签：php, forms, url-redirection

好的，我有一个带有多个提交按钮的表单。我的 php 文件上的编码有一个带有 url 的标题，具体取决于输入的表单。我的问题是当我提交表单时（无论我使用哪个按钮），弹出的窗口不是分配给该按钮的 url 操作，而是 php 文件本身。我究竟做错了什么？

表格是这样开始的，这样你就可以看到我是否正确地指导了它

```
<form method="post" action="http://gamerzacademy.com/foodCYO.php" target="_blank">
<input type="text" name="uid">
<input type="submit" name="Dish1" value="Dish1" onclick="
  this.disabled=true; 
  this.value='Gift Opened'; 
  document.FreeFoodForm.submit();">
<input type="submit" name="Dish2" value="Dish2" onclick="
  this.disabled=true; 
  this.value='Gift Opened'; 
  document.FreeFoodForm.submit();"> 
```

ETC......

现在php文件像这样开始

```
<?php
if ($_REQUEST['Dish1'] == "Dish1") {
    header("Location: url1".urlencode($_POST['uid']));
}
else if ($_REQUEST['Dish2'] == "Dish2") {
    header("Location: url2".urlencode($_POST['uid']));
}
else if ($_REQUEST['Dish3'] == "Dish3") {
    header("Location: url3".urlencode($_POST['uid']));
}
.....etc
?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-04T10:43:59.273

您正在通过 Javascript 发布表单。代码不知道单击了哪个按钮，因此该按钮的值不会发布到表单中。因此，您的表单无法看到单击了哪个按钮。如果您将方法更改为`get`，您将看到发布或不发布哪个值。

我认为您根本不需要从 Javascript 发布。只需让按钮发布即可。只有被点击的按钮的名称和值才会被发布。

顺便说一句，您禁用按钮，大概是因为您不希望人们按两次按钮，但在您的设置中，他们仍然可以按任何其他按钮。我认为禁用所有这些是明智的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-04T10:43:19.260

两件事情：

1.  首先，确保您发送的 URL`header`是有效的 URL。
2.  其次，看起来您在`<?php`开始标记之前有一些空格。确保PHP 开始标记之前**没有空格。**有的话就`header`不行了

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-04T10:45:56.883

通过在 JavaScript 中执行以下操作：

```
this.disabled = true; 
```

您实际上不会将其值发送给 PHP。

一个更好的主意可能是防止双重提交的表单中的提交处理程序。

# netbeans - NetBeans 中的自动重构

> ID：12261721
> 
> 赞同：0
> 
> 时间：2012-09-04T10:37:38.333
> 
> 标签：netbeans, refactoring

我使用 NetBeans。我需要重构我的代码，因为它非常混乱。我想对文件中的字段进行排序、平均放置括号等。我可以在 NetBeans 中自动完成吗？我找不到这样的选择。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-04T10:53:31.307

是的，请参阅[https://www.google.co.uk/search?q=netbeans+source+format](https://www.google.co.uk/search?q=netbeans+source+format)和许多相关链接。
对于未来 - 尝试先自己做一些研究。

# dojo - 如何在 dijit.Tree 中禁用多个节点选择？

> ID：12261723
> 
> 赞同：3
> 
> 时间：2012-09-04T10:37:43.193
> 
> 标签：dojo, selection, dijit.tree

如何在 dijit.Tree 中设置单选模式？我所说的选择模式单一的意思是用户不应该能够通过使用 shift 键或 ctrl 键 + 鼠标单击节点来选择多个节点。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-04T12:04:33.067

选择由 处理`dijit/Tree::dndController`，默认为`dijit/tree/_dndSelector`。有一个属性`singular`，`_dndSelector`它的文档指出：

> 单数：布尔
> 
> 如果为真，则只允许选择一个元素。
> 
> Tree 尚未在 single=true 模式下进行测试，不清楚它是否有效。

无论如何，它似乎工作：

```
var tree = new dijit.Tree({
    id: "tree1",
    model: model
}).placeAt(win.body());

tree.dndController.singular = true; 
```

在 jsFiddle 上查看：http: [//jsfiddle.net/phusick/UxWUs/](http://jsfiddle.net/phusick/UxWUs/)

# jsp - 交替应用类到 tr

> ID：12261727
> 
> 赞同：0
> 
> 时间：2012-09-04T10:38:01.397
> 
> 标签：jsp, spring-mvc, jstl

我想在 jsp 页面中交替地将 css 应用于 thr。下面是我的代码。

```
<c:forEach var="aff" items="${report}">
        <tr class="**tital_black_second**">
    <input type="hidden" id="org_id" value="${aff.org_id}">
      <td width="74" class="td_text">&nbsp;</td>
      <td width="173" class="heading3 td_text">${aff.string}</td>
      <td width="168" class="td_text text3">${aff.posted}</td>
      <td width="134" class="td_text text3">${aff._sold}</td>
      <td width="118" class="td_text text3">${aff.of_commision}</td>
      <td width="126" class="td_text text3">${affl}</td>
      <td width="115" class="td_text text3"></td>
      <td width="129" class="td_text text3">&nbsp;</td>
</tr>
</c:forEach> 
```

对于每个 tr 交替我想应用类，即当一个 tr 被绘制时，我想要 class="tital_black_second" 并且当第二个被绘制时 class="tital_black_first"。

我怎么能做到这一点。

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-04T10:45:54.453

您可以在 CSS 或 jQuery 中执行此操作，而不是在 jstl 中执行此操作。

CSS3 有一个`:nth-child(arg)`伪类，它允许我们控制交替行的显示。但这仅在现代浏览器中受支持，因此跨浏览器兼容性可能是一个问题。

```
tr:nth-child(odd)    { background-color:#ffffff; }
tr:nth-child(even)    { background-color:#000000; } 
```

或者在 jQuery 中：

```
$("tr:odd").css("background-color", "#ffffff");
$("tr:even").addClass("evenRowClass"); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-04T10:52:53.403

您可以使用此处发布的解决方案：[如何使用 JSP 替换 HTML 表格行颜色？](https://stackoverflow.com/questions/241897/how-to-alternate-html-table-row-colors-using-jsp)

对于您的代码，它将是：

```
<c:forEach items="${report}" var="aff" varStatus="loopStatus">
  <tr class="${loopStatus.index % 2 == 0 ? 'tital_black_second' : 'tital_black_first'}">
    <input type="hidden" id="org_id" value="${aff.org_id}">
      <td width="74" class="td_text">&nbsp;</td>
      <td width="173" class="heading3 td_text">${aff.string}</td>
      <td width="168" class="td_text text3">${aff.posted}</td>
      <td width="134" class="td_text text3">${aff._sold}</td>
      <td width="118" class="td_text text3">${aff.of_commision}</td>
      <td width="126" class="td_text text3">${affl}</td>
      <td width="115" class="td_text text3"></td>
      <td width="129" class="td_text text3">&nbsp;</td>
</tr>
</c:forEach> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-04T10:45:05.997

看看[奇偶 CSS 规则](http://www.w3.org/Style/Examples/007/evenodd)。手动向每一行添加类是不必要的开销。

```
.yourtable-class tr:nth-child(even) { 
   // styles for your even rows
}

.yourtable-class tr:nth-child(odd) { 
   // styles for your odd rows
} 
```

# google-app-engine - 高级数据库查询 - appengine 数据存储

> ID：12261729
> 
> 赞同：0
> 
> 时间：2012-09-04T10:38:13.550
> 
> 标签：google-app-engine

我有一个相当简单的应用程序（如 CRM），它有很多联系人和相关标签。

用户可以搜索给出很多标准（搜索项），例如

*   过去 10 天的更新时间
*   xxx中的标签
*   标签不在 xxx 中
*   first_name 以 xxx 开头
*   名字不在“史密斯”中

我了解索引以及过滤器（不在）如何不能对多个属性起作用。

对我来说，因为大多数时候，报告是在 cron 中完成的——我可以遍历所有记录并处理它们。但是，我想知道这样做的最佳优化路线。

我希望我可以接近一个查询，而不是查询“ALL”，该查询可以在 appengine 设计限制下运行，然后手动匹配查询中的其余项目。

一种方法是从第一个搜索项开始，然后获取计数，在下一个搜索项中添加另一个，获取计数。它解决了这一点，然后我手动处理带有其余搜索项的这些记录。

问题是

*   有没有办法事先知道查询是否以编程方式有效而无需进行计数
*   您如何确定一组不发生冲突的最佳搜索项（例如 not-in 不适用于许多过滤器）等。

我看到的唯一方法是将所有相等的过滤器作为一个查询，获取第一个不相等的过滤器，或者执行它并迭代搜索实体。

有没有可以帮助我的图书馆；）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-10T04:22:09.430

> 我了解索引以及过滤器（不在）如何不能对多个属性起作用。

严格来说，这不是真的。您可以创建一个“复合索引”，允许您对多个字段执行过滤器。这些会消耗额外的数据。

您还可以通过生成您自己的可用于查询的“复合字段”来生成您自己的复合索引等效项。

> 有没有办法事先知道查询是否以编程方式有效而无需进行计数

我不确定我是否理解您所指的有效性。

> 您如何确定一组不发生冲突的最佳搜索项（例如 not-in 不适用于许多过滤器）等。

“不在”过滤器并非微不足道。一种方法是创建两个数组（重复字段）。一个包含所有标记的条目，一个不包含所有标签。这将允许您轻松找到所有带有和不带有标签的实体。唯一的问题是，一旦您创建了一个新标签，您必须扫描实体，为所有实体添加一个“不在”条目。

# sql - 如何优化我的 sql 查询？

> ID：12261735
> 
> 赞同：0
> 
> 时间：2012-09-04T10:38:25.847
> 
> 标签：sql, select, query-optimization

```
SELECT ORG.DESCRIPTION, ORG.EXTERNALKEY,
   (SELECT P.VALUE FROM PROPERTY P, ORGANIZATION ORG WHERE P.IDX=24 AND ORG.ID=P.ID AND ORG.EXTERNALKEY='200004') AS COR_ACCOUNT,
   (SELECT ORG.DESCRIPTION FROM ORGANIZATION ORG WHERE ORG.NAME = P.VALUE) AS CPC,
   (SELECT P.VALUE FROM PROPERTY P, ORGANIZATION ORG WHERE P.IDX = 4 AND P.ID = ORG.ID AND ORG.EXTERNALKEY = '200004') AS VOEN
FROM PROPERTY P, ORGANIZATION ORG
WHERE P.IDX = 22 AND ORG.EXTERNALKEY = '200004' AND P.ID = ORG.ID; 
```

你好。如何优化这个sql还是正常的？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-04T10:48:40.987

我不确定您的确切要求，但鉴于我认为下面的 SQL 应该可以工作。

```
SELECT ORG.DESCRIPTION, ORG.EXTERNALKEY,
CASE WHEN P.IDX = 24 then P.Value END AS COR_ACCOUNT,
(SELECT ORG.DESCRIPTION FROM ORGANIZATION ORG WHERE ORG.NAME = P.VALUE) AS CPC,
  CASE WHEN p.idx = 4 then P.VALUE END AS VOEN
FROM PROPERTY P, ORGANIZATION ORG
WHERE P.IDX in(22,24,4) AND ORG.EXTERNALKEY = '200004' AND P.ID = ORG.ID; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-09-02T12:23:23.693

它会优化您的查询

```
SELECT ORG.DESCRIPTION,ORG.EXTERNALKEY,
CASE WHEN ORG.EXTERNALKEY='200004' AND P.IDX=24 THEN P.VALUE END AS COR_ACCOUNT,
(SELECT ORG.DESCRIPTION FROM ORGANIZATION ORG WHERE ORG.NAME = P.VALUE) AS CPC,
CASE WHEN ORG.EXTERNALKEY='200004' AND P.IDX=4 THEN P.VALUE END AS VOEN,
FROM PROPERTY P, ORGANIZATION ORG
WHERE P.IDX = 22 AND ORG.EXTERNALKEY = '200004' AND P.ID = ORG.ID; 
```

# git - 用于查找丢失或损坏文件的 Svn 或 Git 客户端（或插件）

> ID：12261737
> 
> 赞同：3
> 
> 时间：2012-09-04T10:38:33.507
> 
> 标签：git, svn, version-control, tortoisesvn, tortoisegit

很多时候，在使用 Svn（或其他版本控制系统）时，程序员会提交一些更改并破坏构建。例如，因为：

*   创建了一些文件，但未在版本控制下添加
*   在一个文件夹中进行了更改，但程序员认为它是另一个文件夹并提交了它
*   更改了几个子文件夹中的文件，但只提交了一个文件夹
*   程序员更改了一些代码，但没有编译它（“因为它很容易更改！”）
*   等等

损坏的构建是一件坏事——浪费时间，打断其他人的工作，避免它会很好。所以我正在寻找一些 svn (git?) client\tool\plugin，它有“提交前”的钩子，它可以检查一些基本的东西，比如：

*   如果文件夹包含不受版本控制的某种类型的文件（比如说“cpp”） - 显示警告
*   如果文件夹包含项目文件（来自 VS 或其他 IDE）并且此项目文件包含对不受版本控制的文件的一些引用 - 显示警告
*   如果文件夹包含项目文件和某种类型的文件（让我们再次说“cpp”）工具应该（可选）尝试使用项目文件中的设置构建此文件，并在文件未编译时显示警告

我试图找到这样的工具 - 但没有成功。现在我有想法自己创建这样的工具（基于插件的架构能够轻松添加对新项目类型、文件类型和版本控制类型的支持）。但是在开始使用这个工具之前，我想问一下——也许我错过了一些东西，而这样的工具已经存在了？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-04T11:05:49.800

使用[http://en.wikipedia.org/wiki/Continuous_integration](http://en.wikipedia.org/wiki/Continuous_integration)服务器，例如 Jenkins。因为它不是版本控制系统的工作。

有时构建至少需要几分钟甚至几小时（+测试）。强迫开发人员如此缓慢地提交是非常糟糕的做法。

此外，在您保持工作副本整洁的同时，未添加/未删除文件根本不应该成为问题。如果您已全部`.gitignore`设置，`--assume-unchaged`提供，则`git status`提交后将不显示任何内容。所以，只要教开发人员关心工作副本的卫生，它就会有很大帮助。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-04T11:16:11.140

您可以使用 Subversion 和 Git 设置预提交挂钩。这些钩子基本上只是 shell 脚本，你可以用它们做非常简单或非常复杂的事情。

*   [Git 钩子](http://git-scm.com/book/en/Customizing-Git-Git-Hooks)
*   [颠覆钩子](http://svnbook.red-bean.com/en/1.7/svn.reposadmin.create.html#svn.reposadmin.create.hooks)

几个例子：

*   一个简单的 Git 预提交钩子，用于查找未提交的 .cpp 文件：

    ```
    untracked_cpp_files=$(git ls-files --exclude-standard -o *.cpp)
    if [ -n "${untracked_cpp_files}" ]; then
      echo "Unable to commit: untracked .cpp files found in repository."
      exit 1
    fi 
    ```

*   这是一个 Github 项目，它提供了一个 Git 预提交钩子来检查各种语言的语法：[https](https://github.com/shadow7412/hooks) ://github.com/shadow7412/hooks 。

*   以及一些有用的 Subversion 钩子列表：http: [//blog.grimsy.net/2008/07/a-few-svn-pre-commit-hooks/](http://blog.grimsy.net/2008/07/a-few-svn-pre-commit-hooks/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-04T10:43:45.513

Git有这样一个系统：

```
man githooks 
```

享受！

# jboss7.x - JBoss 7.1 AS - LogManager 没有正确安装

> ID：12261742
> 
> 赞同：1
> 
> 时间：2012-09-04T10:38:49.463
> 
> 标签：jboss7.x, ehcache

我在 JBoss AS 7.1 中遇到以下异常：

*LogManager 未正确安装（您必须将“java.util.logging.manager”系统属性设置为“org.jboss.logmanager.LogManager”）*

（完整的跟踪附加在帖子的末尾）。

我已经阅读了关于 JBoss Issue Tracker 的[相关讨论](https://issues.jboss.org/browse/AS7-1)，但是虽然我已经按照指示设置了我的 JAVA_OPTS 和 CLASSPATH （这来自我的**Standalone.conf**）：

```
JAVA_OPTS="$JAVA_OPTS-Djava.util.logging.manager=org.jboss.logmanager.LogManager"
JAVA_OPTS="$JAVA_OPTS -Dorg.jboss.logging.Logger.pluginClass=org.jboss.logging.logmanager.LoggerPluginImpl"
CLASSPATH="$CLASSPATH:$JBOSS_HOME/modules/org/jboss/logmanager/main/jboss-logmanager-1.2.2.GA.jar" 
```

...我不断收到相同的日志记录异常。

**痕迹：**

```
Exception: The LogManager was not properly installed (you must set the "java.util.logging.manager" system property to "org.jboss.logmanager.LogManager")
    at org.jboss.logmanager.Logger.getLogger(Logger.java:60) [jboss-client.jar:7.1.1.Final]
    at org.jboss.logmanager.SerializedLogger.readResolve(SerializedLogger.java:54) [jboss-client.jar:7.1.1.Final]
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method) [rt.jar:1.7.0_03]
    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57) [rt.jar:1.7.0_03]
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43) [rt.jar:1.7.0_03]
    at java.lang.reflect.Method.invoke(Method.java:601) [rt.jar:1.7.0_03]
    at java.io.ObjectStreamClass.invokeReadResolve(ObjectStreamClass.java:1091) [rt.jar:1.7.0_03]
    at java.io.ObjectInputStream.readOrdinaryObject(ObjectInputStream.java:1780) [rt.jar:1.7.0_03]
    at java.io.ObjectInputStream.readObject0(ObjectInputStream.java:1347) [rt.jar:1.7.0_03]
    at java.io.ObjectInputStream.defaultReadFields(ObjectInputStream.java:1964) [rt.jar:1.7.0_03]
    at java.io.ObjectInputStream.readSerialData(ObjectInputStream.java:1888) [rt.jar:1.7.0_03]
    at java.io.ObjectInputStream.readOrdinaryObject(ObjectInputStream.java:1771) [rt.jar:1.7.0_03]
    at java.io.ObjectInputStream.readObject0(ObjectInputStream.java:1347) [rt.jar:1.7.0_03]
    at java.io.ObjectInputStream.readObject(ObjectInputStream.java:369) [rt.jar:1.7.0_03]
    at java.util.HashMap.readObject(HashMap.java:1043) [rt.jar:1.7.0_03]
    at sun.reflect.GeneratedMethodAccessor5.invoke(Unknown Source) [:1.7.0_03]
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43) [rt.jar:1.7.0_03]
    at java.lang.reflect.Method.invoke(Method.java:601) [rt.jar:1.7.0_03]
    at java.io.ObjectStreamClass.invokeReadObject(ObjectStreamClass.java:1004) [rt.jar:1.7.0_03]
    at java.io.ObjectInputStream.readSerialData(ObjectInputStream.java:1866) [rt.jar:1.7.0_03]
    at java.io.ObjectInputStream.readOrdinaryObject(ObjectInputStream.java:1771) [rt.jar:1.7.0_03]
    at java.io.ObjectInputStream.readObject0(ObjectInputStream.java:1347) [rt.jar:1.7.0_03]
    at java.io.ObjectInputStream.defaultReadFields(ObjectInputStream.java:1964) [rt.jar:1.7.0_03]
    at java.io.ObjectInputStream.readSerialData(ObjectInputStream.java:1888) [rt.jar:1.7.0_03]
    at java.io.ObjectInputStream.readOrdinaryObject(ObjectInputStream.java:1771) [rt.jar:1.7.0_03]
    at java.io.ObjectInputStream.readObject0(ObjectInputStream.java:1347) [rt.jar:1.7.0_03]
    at java.io.ObjectInputStream.readArray(ObjectInputStream.java:1685) [rt.jar:1.7.0_03]
    at java.io.ObjectInputStream.readObject0(ObjectInputStream.java:1341) [rt.jar:1.7.0_03]
    at java.io.ObjectInputStream.readObject(ObjectInputStream.java:369) [rt.jar:1.7.0_03]
    at java.util.HashMap.readObject(HashMap.java:1043) [rt.jar:1.7.0_03]
    at sun.reflect.GeneratedMethodAccessor5.invoke(Unknown Source) [:1.7.0_03]
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43) [rt.jar:1.7.0_03]
    at java.lang.reflect.Method.invoke(Method.java:601) [rt.jar:1.7.0_03]
    at java.io.ObjectStreamClass.invokeReadObject(ObjectStreamClass.java:1004) [rt.jar:1.7.0_03]
    at java.io.ObjectInputStream.readSerialData(ObjectInputStream.java:1866) [rt.jar:1.7.0_03]
    at java.io.ObjectInputStream.readOrdinaryObject(ObjectInputStream.java:1771) [rt.jar:1.7.0_03]
    at java.io.ObjectInputStream.readObject0(ObjectInputStream.java:1347) [rt.jar:1.7.0_03]
    at java.io.ObjectInputStream.readArray(ObjectInputStream.java:1685) [rt.jar:1.7.0_03]
    at java.io.ObjectInputStream.readObject0(ObjectInputStream.java:1341) [rt.jar:1.7.0_03]
    at java.io.ObjectInputStream.readObject(ObjectInputStream.java:369) [rt.jar:1.7.0_03]
    at java.util.HashMap.readObject(HashMap.java:1043) [rt.jar:1.7.0_03]
    at sun.reflect.GeneratedMethodAccessor5.invoke(Unknown Source) [:1.7.0_03]
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43) [rt.jar:1.7.0_03]
    at java.lang.reflect.Method.invoke(Method.java:601) [rt.jar:1.7.0_03]
    at java.io.ObjectStreamClass.invokeReadObject(ObjectStreamClass.java:1004) [rt.jar:1.7.0_03]
    at java.io.ObjectInputStream.readSerialData(ObjectInputStream.java:1866) [rt.jar:1.7.0_03]
    at java.io.ObjectInputStream.readOrdinaryObject(ObjectInputStream.java:1771) [rt.jar:1.7.0_03]
    at java.io.ObjectInputStream.readObject0(ObjectInputStream.java:1347) [rt.jar:1.7.0_03]
    at java.io.ObjectInputStream.readObject(ObjectInputStream.java:369) [rt.jar:1.7.0_03]
    at java.util.HashMap.readObject(HashMap.java:1043) [rt.jar:1.7.0_03]
    at sun.reflect.GeneratedMethodAccessor5.invoke(Unknown Source) [:1.7.0_03]
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43) [rt.jar:1.7.0_03]
    at java.lang.reflect.Method.invoke(Method.java:601) [rt.jar:1.7.0_03]
    at java.io.ObjectStreamClass.invokeReadObject(ObjectStreamClass.java:1004) [rt.jar:1.7.0_03]
    at java.io.ObjectInputStream.readSerialData(ObjectInputStream.java:1866) [rt.jar:1.7.0_03]
    at java.io.ObjectInputStream.readOrdinaryObject(ObjectInputStream.java:1771) [rt.jar:1.7.0_03]
    at java.io.ObjectInputStream.readObject0(ObjectInputStream.java:1347) [rt.jar:1.7.0_03]
    at java.io.ObjectInputStream.readObject(ObjectInputStream.java:369) [rt.jar:1.7.0_03]
    at java.util.HashMap.readObject(HashMap.java:1043) [rt.jar:1.7.0_03]
    at sun.reflect.GeneratedMethodAccessor5.invoke(Unknown Source) [:1.7.0_03]
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43) [rt.jar:1.7.0_03]
    at java.lang.reflect.Method.invoke(Method.java:601) [rt.jar:1.7.0_03]
    at java.io.ObjectStreamClass.invokeReadObject(ObjectStreamClass.java:1004) [rt.jar:1.7.0_03]
    at java.io.ObjectInputStream.readSerialData(ObjectInputStream.java:1866) [rt.jar:1.7.0_03]
    at java.io.ObjectInputStream.readOrdinaryObject(ObjectInputStream.java:1771) [rt.jar:1.7.0_03]
    at java.io.ObjectInputStream.readObject0(ObjectInputStream.java:1347) [rt.jar:1.7.0_03]
    at java.io.ObjectInputStream.readObject(ObjectInputStream.java:369) [rt.jar:1.7.0_03]
    at org.apache.shiro.session.mgt.SimpleSession.readObject(SimpleSession.java:500) [shiro-all-1.2.1.jar:1.2.1]
    at sun.reflect.GeneratedMethodAccessor10.invoke(Unknown Source) [:1.7.0_03]
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43) [rt.jar:1.7.0_03]
    at java.lang.reflect.Method.invoke(Method.java:601) [rt.jar:1.7.0_03]
    at java.io.ObjectStreamClass.invokeReadObject(ObjectStreamClass.java:1004) [rt.jar:1.7.0_03]
    at java.io.ObjectInputStream.readSerialData(ObjectInputStream.java:1866) [rt.jar:1.7.0_03]
    at java.io.ObjectInputStream.readOrdinaryObject(ObjectInputStream.java:1771) [rt.jar:1.7.0_03]
    at java.io.ObjectInputStream.readObject0(ObjectInputStream.java:1347) [rt.jar:1.7.0_03]
    at java.io.ObjectInputStream.defaultReadFields(ObjectInputStream.java:1964) [rt.jar:1.7.0_03]
    at java.io.ObjectInputStream.defaultReadObject(ObjectInputStream.java:498) [rt.jar:1.7.0_03]
    at net.sf.ehcache.Element.readObject(Element.java:844) [ehcache-core-ee-2.6.0.jar:]
    at sun.reflect.GeneratedMethodAccessor7.invoke(Unknown Source) [:1.7.0_03]
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43) [rt.jar:1.7.0_03]
    at java.lang.reflect.Method.invoke(Method.java:601) [rt.jar:1.7.0_03]
    at java.io.ObjectStreamClass.invokeReadObject(ObjectStreamClass.java:1004) [rt.jar:1.7.0_03]
    at java.io.ObjectInputStream.readSerialData(ObjectInputStream.java:1866) [rt.jar:1.7.0_03]
    at java.io.ObjectInputStream.readOrdinaryObject(ObjectInputStream.java:1771) [rt.jar:1.7.0_03]
    at java.io.ObjectInputStream.readObject0(ObjectInputStream.java:1347) [rt.jar:1.7.0_03]
    at java.io.ObjectInputStream.defaultReadFields(ObjectInputStream.java:1964) [rt.jar:1.7.0_03]
    at java.io.ObjectInputStream.readSerialData(ObjectInputStream.java:1888) [rt.jar:1.7.0_03]
    at java.io.ObjectInputStream.readOrdinaryObject(ObjectInputStream.java:1771) [rt.jar:1.7.0_03]
    at java.io.ObjectInputStream.readObject0(ObjectInputStream.java:1347) [rt.jar:1.7.0_03]
    at java.io.ObjectInputStream.readObject(ObjectInputStream.java:369) [rt.jar:1.7.0_03]
    at java.util.ArrayList.readObject(ArrayList.java:733) [rt.jar:1.7.0_03]
    at sun.reflect.GeneratedMethodAccessor6.invoke(Unknown Source) [:1.7.0_03]
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43) [rt.jar:1.7.0_03]
    at java.lang.reflect.Method.invoke(Method.java:601) [rt.jar:1.7.0_03]
    at java.io.ObjectStreamClass.invokeReadObject(ObjectStreamClass.java:1004) [rt.jar:1.7.0_03]
    at java.io.ObjectInputStream.readSerialData(ObjectInputStream.java:1866) [rt.jar:1.7.0_03]
    at java.io.ObjectInputStream.readOrdinaryObject(ObjectInputStream.java:1771) [rt.jar:1.7.0_03]
    at java.io.ObjectInputStream.readObject0(ObjectInputStream.java:1347) [rt.jar:1.7.0_03]
    at java.io.ObjectInputStream.readObject(ObjectInputStream.java:369) [rt.jar:1.7.0_03]
    at sun.rmi.server.UnicastRef.unmarshalValue(UnicastRef.java:324) [rt.jar:1.7.0_03]
    at sun.rmi.server.UnicastServerRef.dispatch(UnicastServerRef.java:307) [rt.jar:1.7.0_03]
    at sun.rmi.transport.Transport$1.run(Transport.java:177) [rt.jar:1.7.0_03]
    at sun.rmi.transport.Transport$1.run(Transport.java:174) [rt.jar:1.7.0_03]
    at java.security.AccessController.doPrivileged(Native Method) [rt.jar:1.7.0_03]
    at sun.rmi.transport.Transport.serviceCall(Transport.java:173) [rt.jar:1.7.0_03]
    at sun.rmi.transport.tcp.TCPTransport.handleMessages(TCPTransport.java:553) [rt.jar:1.7.0_03]
    at sun.rmi.transport.tcp.TCPTransport$ConnectionHandler.run0(TCPTransport.java:808) [rt.jar:1.7.0_03]
    at sun.rmi.transport.tcp.TCPTransport$ConnectionHandler.run(TCPTransport.java:667) [rt.jar:1.7.0_03]
    at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1110) [rt.jar:1.7.0_03]
    at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:603) [rt.jar:1.7.0_03]
    at java.lang.Thread.run(Thread.java:722) [rt.jar:1.7.0_03]
    at sun.rmi.transport.StreamRemoteCall.exceptionReceivedFromServer(StreamRemoteCall.java:273) [rt.jar:1.7.0_03]
    at sun.rmi.transport.StreamRemoteCall.executeCall(StreamRemoteCall.java:251) [rt.jar:1.7.0_03]
    at sun.rmi.server.UnicastRef.invoke(UnicastRef.java:160) [rt.jar:1.7.0_03]
    at net.sf.ehcache.distribution.RMICachePeer_Stub.send(Unknown Source) [ehcache-core-ee-2.6.0.jar:]
    at net.sf.ehcache.distribution.RMIAsynchronousCacheReplicator.writeReplicationQueue(RMIAsynchronousCacheReplicator.java:314) [ehcache-core-ee-2.6.0.jar:]
    at net.sf.ehcache.distribution.RMIAsynchronousCacheReplicator.replicationThreadMain(RMIAsynchronousCacheReplicator.java:127) [ehcache-core-ee-2.6.0.jar:]
    at net.sf.ehcache.distribution.RMIAsynchronousCacheReplicator.access$000(RMIAsynchronousCacheReplicator.java:58) [ehcache-core-ee-2.6.0.jar:]
    at net.sf.ehcache.distribution.RMIAsynchronousCacheReplicator$ReplicationThread.run(RMIAsynchronousCacheReplicator.java:389) [ehcache-core-ee-2.6.0.jar:] 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-06T09:17:16.173

从一直很有帮助的 JBoss 社区[中，我收到了](https://community.jboss.org/message/757952#757952)将我的类中的非静态**Logger**成员更改为静态的建议，于是问题就消失了。在撰写本文时，陪审团仍未确定这是否是 JBoss 错误。然而有趣的是，针对 JBoss AS 7 在 JBoss JIRA 中提出的[第一个错误](https://issues.jboss.org/browse/AS7-1)（首先查看 URL，您可能会误认为它是不可标记的）再次是相同的**LogManager**异常。

# javascript - 防止用户在 jQuery Mobile 中加载页面时点击其他地方

> ID：12261744
> 
> 赞同：1
> 
> 时间：2012-09-04T10:38:50.777
> 
> 标签：javascript, jquery, jquery-mobile

我正在使用 jQuery Mobile 为 PC 和平板电脑创建一个 Web 应用程序。

我正在使用 jQuery Mobile 的 Ajax 导航功能。

因此，如果用户单击链接，加载微调器会显示。但是当 JQM 试图加载该页面时，用户可能会单击另一个链接。在这种情况下，在完全加载第一页后，JQM 加载第二页，然后转到第二页。

**现在，我想在 ajax 导航工作时禁用所有内容。**一切都意味着，不应单击其他链接，`click`不应调用其他 javascript 函数，无法滚动，并且...

每个ajax导航也应该有一个超时。

这个怎么做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-04T14:31:45.507

jQM 有几个不同的事件会在新页面完成加载到 DOM 时触发。为什么不暂时停用所有链接，一旦单击链接，直到转换完成？

```
$('body').on('click', 'a', function() {
    $('body').on('click', 'a', function() {
        return false;
    }); 
    $(document).bind('pagechange', function() { 
        $('body').off('click', 'a'); 
    }); 
}); 
```

我使用了`pagechange`上面的事件，但还有一些其他事件可能更适合您的目的。[http://jquerymobile.com/demos/1.1.1/docs/api/events.html](http://jquerymobile.com/demos/1.1.1/docs/api/events.html)

# android - 将按钮添加到 android.view.View

> ID：12261748
> 
> 赞同：2
> 
> 时间：2012-09-04T10:39:05.140
> 
> 标签：android

我有下一个问题：

我有一个活动，我想尝试添加按钮，这是我的 onCreate 方法

```
public void onCreate(Bundle savedInstanceState){
    super.onCreate(savedInstanceState);

    DrawView drawView = new DrawView(this);
    setContentView(drawView);

    context = this;

    drawView.requestFocus();

} 
```

这是 DrawView 类

公共类 DrawView 扩展视图实现 OnTouchListener {

```
public static final String TAG = "DrawView";

private List<List<Point>> listaPuntos = null;
private List<Paint> listaPaints = null;

private int paintActual = 0;

public DrawView(Context context) {
    super(context);
    setFocusable(true);
    setFocusableInTouchMode(true);

    listaPaints = new ArrayList<Paint>();
    listaPuntos = new ArrayList<List<Point>>();

    this.setOnTouchListener(this);
    this.setBackgroundColor(Color.WHITE);

    Paint paint = new Paint(Paint.ANTI_ALIAS_FLAG);
    paint.setStyle(Paint.Style.STROKE);
    paint.setStrokeWidth(2);
    paint.setColor(Color.BLACK);
    listaPaints.add(paint);

}

@Override
public void onDraw(Canvas canvas) {

    for(int i=0; i<listaPaints.size(); i++){
        Paint paint = listaPaints.get(i);
        Point punto = null;
        if(listaPuntos.size()!=0 && listaPuntos.size()>i){
            List<Point> puntos = listaPuntos.get(i);
            for (Point point : puntos) {

                if(punto == null){
                    punto = point;
                }
                canvas.drawLine(point.x, point.y, punto.x, punto.y, paint);
                punto = point;
            }
        }
    }
}

@Override
public boolean onTouch(View view, MotionEvent event) {

    if(event.getAction() != MotionEvent.ACTION_UP){
        Point point = new Point();
        point.x = event.getX();
        point.y = event.getY();
        point.paintPunto = paintActual;
        if(listaPuntos.size()<=paintActual){
            listaPuntos.add(new ArrayList<Point>());
        }
        listaPuntos.get(paintActual).add(point);
        invalidate();
        return true;
    }else{
        paintActual++;
        Paint paint = new Paint(Paint.ANTI_ALIAS_FLAG);
        paint.setStyle(Paint.Style.STROKE);
        paint.setStrokeWidth(2);
        paint.setColor(Color.BLACK);
        listaPaints.add(paint);
    }
    return super.onTouchEvent(event);
} 
```

任何人都知道如何将按钮添加到此活动？我想添加一个按钮来执行操作，但我完全不能！

非常感谢你的帮助。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-04T10:56:50.720

只有 ViewGroup(LinearLayout,RelativeLayout) 可以有孩子。你正在做的是你将 DrawView 作为你的活动的内容视图，它不是一个容器(ViewGroup)，因此你不能向它添加任何其他视图(子) .
您的问题的解决方案是：

*   创建一个以 ViewGroup 作为父级（LinearLayout、RelativeLayout 等）的 xml 布局文件，其中包含其他视图或为空。
*   创建一个 DrawView 的实例。
*   将此实例添加到 ViewGroup
*   如果要动态添加视图，类似地创建其他视图的实例并将它们添加到父视图。这是示例代码：

假设以 id 为父级的 LinearLayout 是 xml 布局的父级，则：

```
LinearLayout parent = (LinearLayout)findViewById(R.id.parent);
//creating instance of custom view
DrawView drawView = new DrawView(this);
//adding custom view as the first child
parent.addView(drawView,0);
//adding button dynamically
Button btn = new Button(this);
btn.setText("Ok");
parent.addView(btn,1); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-04T11:17:50.880

您应该制作一个 xml 文件，并且必须像 setContentView (R.layout.filename) 一样使用它，并且因为您正在尝试将其他页面内容合并到此 xml，所以您现在应该包含布局，您可以使用此页面 id 并可以实现您的任何职能。**如果您在其他 xml 中添加按钮，然后将其包含在您想要的新 xml 中，那就更好了**。这是一个正确的方法......希望你明白我的意思。否则你可以在 developer.android.com 中搜索

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-04T10:43:21.850

您应该创建一个 XML 布局文件，您将通过 onCreate() 中的 setContentView() 调用与您的活动相关联。

您的布局将包含您自己的视图、按钮以及您喜欢的任何内容。

# c# - 从 windows 文件夹中删除权限

> ID：12261749
> 
> 赞同：4
> 
> 时间：2012-09-04T10:39:08.917
> 
> 标签：c#, windows, permissions

我在远程服务器上有一个寡妇文件夹，我希望从中删除特定用户的权限。我已经尝试了很多方法，但似乎没有任何效果。

以下代码没有错误，但权限保持不变。我是否没有使用正确的对象或缺少这些对象的某些步骤？任何帮助将不胜感激。

dirName 作为共享传递，例如 \myserver\myfolder

```
private void removePermissions(string dirName, string username)
    {
        string user = System.Environment.UserDomainName + "\\" + username;
        DirectoryInfo dirinfo = new DirectoryInfo(dirName);
        DirectorySecurity dsec = dirinfo.GetAccessControl(AccessControlSections.All);

        AuthorizationRuleCollection rules = dsec.GetAccessRules(true, true, typeof(System.Security.Principal.NTAccount));
        foreach (AccessRule rule in rules)
        {
            if (rule.IdentityReference.Value == user)
            {
                bool value;
                dsec.PurgeAccessRules(rule.IdentityReference);
                dsec.ModifyAccessRule(AccessControlModification.RemoveAll, rule, out value);
                MessageBox.Show("Removed permission from " + dirName + " for " + user);
            }
        }
    } 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-04T10:42:44.903

创建新 ACL 后，您需要将其应用到文件夹。

添加

```
dirinfo.SetAccessControl(dsec); 
```

循环之后。

# ios - 在备用单元格中显示 UITableViewController 数据源

> ID：12261750
> 
> 赞同：-1
> 
> 时间：2012-09-04T10:39:10.363
> 
> 标签：ios, cocoa-touch, uitableview

我有一个 UITableViewController。我需要显示一个表格单元格，然后显示一个具有嵌入式 UITextField 的单元格。基本上我需要交替显示 tableView 数据源。请帮我解决这个问题。谢谢。

编辑#1：想象一下`NSMutableArray *tableData;`具有以下元素的表的数据源：

*   `@"Apple"`
*   `@"Mango"`
*   `@"Watermelon"`

我希望 UITableView 显示为：

*   第一个细胞：苹果
*   第二个单元格：*输入数量的文本字段*
*   第三格：芒果
*   第 4 个单元格：*输入数量的文本字段*
*   第五格：西瓜
*   第 6 个单元格：*输入数量的文本字段*
*   第 7 格：*保存按钮*

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-04T11:01:50.050

像这样使用 dataSource 方法：

```
- (NSInteger)tableView:(UITableView *)tableView numberOfRowsInSection:(NSInteger)section
{
  // Return the number of rows in the section.
  return ([m_tableData count]*2)+1;
}

- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{
   if(indexPath.row == [m_tableData count]*2)
   {
      //cell with button
   }
   else
   {
    if(indexPath.row == 0 || indexPath.row%2 == 0)
    {
      //cell with label for displaying values
    }
    else
    {
      //Load a cell that has an embedded UITextField
    }
   }
} 
```

# css - CSS - 为不同的字符编码指定多种字体 -

> ID：12261754
> 
> 赞同：4
> 
> 时间：2012-09-04T10:39:33.560
> 
> 标签：css, encoding, font-face

我想允许将多种字体应用于可以具有不同字符编码的动态生成的内容。我已经使用了`font-face`修改CSS的方法，如下：

```
.ResultsTitleClass{ font-family: 'custom-font', Arial Unicode MS, Arial, verdana; !important ; }

@font-face {
font-family: 'custom-font';
    src: url('tt0596m0-webfont.eot');
    src: url('tt0596m0-webfont.eot?#iefix') format('embedded-opentype'),
         url('tt0596m0-webfont.woff') format('woff'),
         url('tt0596m0-webfont.ttf') format('truetype'),
         url('tt0596m0-webfont.svg#custom-font') format('svg');
font-weight: normal;
font-style: normal;
} 
```

我的理解是 font-face 可以指定自定义字体和后备列表。但是，我的自定义字体的目的是处理记录标题，包括希腊语、俄语、希伯来语缩写，我不希望这通常应用于罗马脚本语言（使用 Arial）。有人建议我编写一些客户端 javascript 来读取标题并查找扩展的 Unicode 字符或编码字符。如果找到一些，则更新应用的 CSS 类。但是，我想考虑不同的解决方案。有没有替代的解决方案？

我对 CSS 和字体不是特别有信心，所以希望我的问题已经得到了清楚的解释！

确实谢谢

一世。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-04T13:02:22.680

原则上，您可以使用`unicode-range`CSS3 字体的属性来做到这一点，就像这样（为了简单起见，这里只使用 .ttf）：

```
@font-face {
  font-family: customFont;
  src: local(Arial Unicode MS);
}
@font-face {
  font-family: customFont;
  src: url('tt0596m0-webfont.eot');
  src: url('tt0596m0-webfont.eot?#iefix') format('embedded-opentype'),
       url('tt0596m0-webfont.woff') format('woff'),
       url('tt0596m0-webfont.ttf') format('truetype'),
       url('tt0596m0-webfont.svg#custom-font') format('svg');
  unicode-range: U+370-FFFF;
} 
```

这意味着它`customFont`实际上是一种复合字体，将您的字体用于 U+0370 以上的字符（例如，用于希腊语和西里尔文），将 Arial Unicode 用于其余字符（主要用于拉丁字母）。

坏消息是，通常缺乏足够的浏览器支持。这里 Firefox 似乎是主要问题：它根本不支持`unicode-range`。

问题中描述的方法也需要基于字符范围，因为 JavaScript 缺少用于检查字符属性（例如“脚本”属性）的内置工具。

如果每个标题的语言信息可用（通常在精心设计的数据库中），它应该包含在生成的 HTML 文档中的`lang`属性中，然后您可以在样式中使用它。或者`class`可以发出属性，包含有关正确编码的脚本（书写系统）的信息。

但是，从排版的角度来看，我强烈建议在呈现可比项目（如记录标题）的上下文中为所有书写系统使用相同的字体。这尤其适用于“兄弟”脚本希腊语、西里尔语和拉丁语，它们共享许多字符形式。例如，希腊语小 omicron、西里尔语小 o 和拉丁语小 o 应该看起来完全一样。对于更多不同的脚本，问题并不那么严重，但例如，衬线字体的拉丁文本与无衬线字体的希伯来文本配对时看起来很奇怪。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-11-05T09:29:39.293

Jukka Korpela 的回答真的挽救了我的一天。我想与感兴趣的人分享的是，我们用来通过上面提到的 unicode-range 方法启用自定义字体的西里尔字符的实现。

通过使用以下定义，您实际上不需要指定任何语言属性等。它基本上所做的是定义另一个用于西里尔字符的 unicode-range 的字体文件。

从我的角度来看，有趣的观察是默认情况下所有浏览器（IE、FF、Safari）都会加载两个字体文件，即使文档中没有任何西里尔字符。只有 Chrome 会按需加载额外的西里尔字体文件。这意味着在遇到定义的 unicode 范围的实例之前它不会加载字体。

```
/*
 CustomFont Latin
 */

@font-face {
    font-family: 'CustomFont Regular';
    src: url('/fonts/CustomFont/Latin/Regular/CustomFont-Regular.eot'); /* IE9 */
    src: url('/fonts/CustomFont/Latin/Regular/CustomFont-Regular.eot?#iefix') format('embedded-opentype'), /* IE6-IE8 */ url('/fonts/CustomFont/Latin/Regular/CustomFont-Regular.woff') format('woff'); /* Modern Browsers */
    font-weight: normal;
    font-style: normal;
}
/*
 CustomFont Latin
 */

/*
 CustomFont Cyrillic
 */

@font-face {
    font-family: 'CustomFont Regular';
    src: url('/fonts/CustomFont/Cyrillic/Regular/CustomFontCy-Regular.eot'); /* IE9 */
    src: url('/fonts/CustomFont/Cyrillic/Regular/CustomFontCy-Regular.eot?#iefix') format('embedded-opentype'), /* IE6-IE8 */ url('/fonts/CustomFont/Cyrillic/Regular/CustomFontCy-Regular.woff') format('woff'); /* Modern Browsers */
    font-weight: normal;
    font-style: normal;
    unicode-range: U+0400-04FF;
}

/*
 CustomFont Cyrillic
 */ 
```

一些有用的阅读材料：

[developer.mozilla.org - Unicode 范围](https://developer.mozilla.org/en-US/docs/Web/CSS/@font-face/unicode-range)

和

[Unicode 中的西里尔字母](https://en.wikipedia.org/wiki/Cyrillic_script_in_Unicode)

# android - 如何检查应用程序是否从内存中恢复？

> ID：12261756
> 
> 赞同：2
> 
> 时间：2012-09-04T10:39:38.100
> 
> 标签：android, android-activity, onresume

在我的应用程序中，我在表格视图上有一个过滤功能，可以在表格中提供过滤结果。我在共享首选项中设置了过滤选项（复选框），所以下次用户进入过滤器屏幕时，它会看到复选框被选中，因此它知道表格过滤了什么以及他上次为过滤检查了什么。

当应用程序启动时，我将它们全部设置为未选中（要求），但我不知道应用程序何时启动或恢复。当应用程序从内存中恢复时，它再次初始化了我所有的数据类型。我如何检查应用程序是否已恢复。如果我在活动 onResume 中设置东西 - 每次我只想知道应用程序何时恢复时都会调用它。

现在会发生什么我不知道应用程序何时从内存中恢复，我的过滤器的行为就像应用程序启动并将所有设置为未选中

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-06T04:43:34.640

我所做的是，在我的第一个活动中创建了一个布尔值并将其设置为 false 并将其存储在共享首选项中，然后在开始过滤时将其设置为 true。所以它仍然是正确的，因为应用程序保留在内存中并且甚至可以恢复。当应用程序退出，并在启动时再次启动它再次变为假

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-04T10:46:27.663

没有“从记忆中恢复”状态。它要么被恢复，要么被创建（或重新启动）。所以你应该重写你的应用程序逻辑并初始化你的东西`onCreate()`而不是`onResume()`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-04T10:56:25.893

You can restore your checkboxes on [onRestart()](http://developer.android.com/reference/android/app/Activity.html#onRestart%28%29), that means your activity was not killed and is resumed after it had been stopped(either manually or by android).

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-04T10:57:47.083

I am not able to understand you question properly, but as far as my understanding goes, you are filtering user options through shared preferences. If this is so, you need not unset/set each option programatically. Android remembers and and restores this for you. If you want to access these, just call `context.getSharedPreferences()` and from sharedPreferences object received call `getBoolean (key,defValue)`.

# java - struts2中的I18n

> ID：12261761
> 
> 赞同：1
> 
> 时间：2012-09-04T10:39:50.500
> 
> 标签：java, jsp, properties, struts2, resourcebundle

我是 struts2 的新手，我想在我的 Web 应用程序中添加 i18n。我在文档中有这样的代码：

```
<s:url id="localeEN" namespace="/" action="locale">
    <s:param name="request_locale">en</s:param>
</s:url>
<s:url id="localeruRU" namespace="/" action="locale">
    <s:param name="request_locale">ru_RU</s:param>
</s:url>
<s:a href="%{localeEN}">English</s:a>
<s:a href="%{localeruRU}">Russian</s:a> 
```

我们需要像这样添加动作类：

```
public class LocalizationAction extends ActionSupport {
    public String execute() {
        return SUCCESS;
    }
} 
```

在 struts.xml 中我们添加：

```
<struts>
    <constant name="struts.custom.i18n.resources" value="global"/>
    <constant name="struts.devMode" value="true"/>

    <package name="default" namespace="/" extends="struts-default">
        <action name="locale" class="by.bulgak.newsmanager.action.LocalizationAction">
            <result name="success">index.jsp</result>
        </action>
    </package>
</struts> 
```

我也有名称`global`和属性文件`global_ru_RU`

我做了我从教程中读到的所有内容，但是当我在我的 jsp 页面中设置参数时，我的 IDE 告诉我该名称`request_locale`是未知属性..

请告诉我我的错误在哪里。

![在此处输入图像描述](../Images/63463774cd732a63226202cf6fca584a.png)

我的 IDE 不支持它，这就是为什么当我在运行我的应用程序时想更改语言时，我的 IDE 不会在 struts2 中调用 I18n 方法

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-05T09:31:29.127

Struts2 不会将默认 i18n 属性与英语相关联。

当我像这样设置默认属性时：`property_name_en.properties`它工作正常。

但我不明白为什么会这样。我看到很多例子，我什至将它们启动到我的机器中，它们工作正常，但我没有工作..可能有人知道什么是问题？

# c++ - 数组的部分模板特化

> ID：12261762
> 
> 赞同：11
> 
> 时间：2012-09-04T10:39:51.553
> 
> 标签：c++, templates

对此进行了搜索，但找不到类似的问题。如果有请关闭此问题。这不是我的真实代码，只是一个演示示例：-

```
#include <iostream>

// Normal template class with a destructor
template <class T> class Test
{
public:
    ~Test() { std::cout << "Normal \n";}
};

// Partial specialization for arrays
template<class T> class Test<T[]>
{
public:
    ~Test() { std::cout << "Array \n"; }
};

int main()
{
    Test<int[3]> i;
} 
```

当我编译它时，它*不会*调用数组的专用版本。如果我将模板替换为

```
template<class T> class Test<T[3]>
{
public:
    ~Test() { std::cout << "Array \n"; }
}; 
```

然后它*确实*调用了专业化，但我希望对任何数组都调用它，而不仅仅是指定大小的数组。有没有办法编写一个用于所有数组的专业化？

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2012-09-04T10:42:48.057

使用附加的非类型参数捕获大小：

```
#include <iostream>

template <class T> class Test
{
public:
    ~Test() { std::cout << "Normal \n";}
};

template<class T, size_t N> class Test<T[N]>
{
public:
    ~Test() { std::cout << "Array " << N << '\n'; }
};

int main()
{
    Test<int[3]> i;  // Array 3
    Test<int[5]> j;  // Array 5
} 
```

# wcf - 处理消息

> ID：12261763
> 
> 赞同：1
> 
> 时间：2012-09-04T10:39:52.553
> 
> 标签：wcf, windows-services, msmq

我为每种消息类型使用一个队列。我倾向于为每个队列创建一个 Windows 服务来处理这些消息。这是对资源的最佳利用吗？我怀疑不是。你如何决定有多少进程应该为一个队列提供服务？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-04T12:46:33.660

这里要考虑的一件事是服务水平。消息类型表示的所有数据是否都需要相同的处理服务级别？有些消息比其他消息更重要吗？某些消息是否对传递有延迟要求？某些信息对业务至关重要，而另一些则不是？所有消息类型的预期数量是否不同？

目前，您设置事物的方式意味着您可以将每个消息类型通道作为单独的关注点进行管理，这使您能够最大程度地支持所有可能的服务级别方案。然而，这是更高资源成本/更多活动部件的成本。

我想说，除非资源使用是一个问题，否则您的设置是最好的，因为您可以通过这种方式非常有效地将数据处理通道彼此分离。

# javascript - 通过 node.js 和 socket.io 向特定用户发送数据

> ID：12261766
> 
> 赞同：0
> 
> 时间：2012-09-04T10:39:58.857
> 
> 标签：javascript, node.js, socket.io

在参考[https://stackoverflow.com/questions/12246829/node-js-routing-data-with-socket-io](https://stackoverflow.com/questions/12246829/node-js-routing-data-with-socket-io)

在客户端：

```
 // send data on some event
 socket.emit('send', { u: user_id, a: action, v: value }); 
```

我有 user_id，我可以添加 user_id 发件人

在服务器上：

```
socket.on('send', function (data) {
    socket.broadcast.emit('request', { request: data });
}); 
```

现在数据被发送给所有监听端口的用户，但我想只有 2 by 2 个用户可以获取数据。

因此，用户 1 和 2 拥有“频道”，用户 3 和 4 拥有他们的“频道”。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-04T11:36:20.357

您需要要发送请求的套接字 (socket.id) 的 ID。可能您需要一个包含 user_id 及其 socketID 的数组（您可以在用户输入时保存它）。然后，当您知道套接字 id 时，您可以只向该套接字发送消息。

```
io.sockets.socket(socketID).emit('request', { request: data }); 
```

# awk - 字段包含字段分隔符作为字符串：在这种情况下如何正确应用 awk？

> ID：12261768
> 
> 赞同：1
> 
> 时间：2012-09-04T10:40:09.667
> 
> 标签：awk

我有一个类似于此 test.csv 文件的 CSV 文件：

```
Header 1; Header 2; Header 3
A;B;US
C;D;US
E;F;US
G;H;FR
I;J;FR
K;L;FR
M;"String with ; semicolon";UK
N;"String without semicolon";UK
O;"String OK";
P;"String OK"; 
```

现在，我想根据标题 3 拆分这个文件。所以我想得到四个单独的 CSV 文件，一个用于“US”、“FR”、“UK”和“”。

凭借我非常有限的 Linux 命令行技能（可悲的是:-( 到目前为止，我一直使用这一行：

```
awk -F\; 'NR>1{ fname="country_yearly_"$3".csv"; print >>(fname); close(fname);}' test.csv 
```

当然，有经验的命令行用户会注意到我的问题：我的 test.csv 中的一个字段包含的行中，我用作分隔符的分号也出现在用引号标记的字段中（我不能保证肯定是因为有数百万行，但我对假设这一点的答案感到满意）。很遗憾，我得到了一个名为 country_yearly_ semicolon".csv 的附加文件，它在我的示例中包含这一行。

在我尝试解决这个问题的过程中，我在[SO](https://stackoverflow.com/questions/11997279/splitting-file-into-smaller-files-using-by-number-of-fields)上遇到了这个问题。特别是，托尔的回答似乎包含了我的问题的解决方案，它通过替换字符串中的所有分号。我相应地调整了他的代码如下：

```
awk -F'"' -v OFS='' '
  NF > 1 { 
    for(i=2; i<=NF; i+=2) { 
      gsub(";", "|", $i);
      $i = FS $i FS;       # reinsert the quotes
    }
    print
  }' test.csv > test1.csv 
```

现在，我得到以下 test1.csv 文件：

```
M;"String with | semicolon";UK
N;"String without semicolon";UK
O;"String OK";
P;"String OK"; 
```

如您所见，显示了所有带引号的行，并且我的问题行也已修复，但是a）我实际上想要所有行，而不仅仅是引号中的行，而且我无法弄清楚他的代码中的哪一部分将行限制为带引号的行，b）我认为如果 test.csv 只是更改而不是将输出发送到新文件，它会更有效，但我也不知道该怎么做。

编辑回应Birei的回答：

不幸的是，我的最小示例太简单了。这是一个更新的版本：

```
Header 1; Header 2; Header 3; Header 4
A;B;US; 
C;D;US;
E;F;US;
G;H;FR;
I;J;FR;
K;L;FR;
M;"String with ; semicolon";UK;"Yet another ; string"
N;"String without semicolon";UK; "No problem here"
O;"String OK";;"Fine"
P;"String OK";;"Not ; fine" 
```

请注意，我的真实数据大约有 100 列和数百万行，而国家列（忽略字符串中的分号）是第 13 列。但是，据我所知，如果我不这样做，我就不能使用它是第 13 列的事实。不要先去掉字符串中的分号。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-04T11:09:19.067

要拆分文件，您可能只需执行以下操作：

```
awk -v FS=";" '{ CSV_FILE = "country_yearly_" $NF ".csv" ; print > CSV_FILE }' 
```

它总是采用最后一个字段来构造文件名。

`NF > 1`在您的示例中，由于该模式，仅打印带有引号的行。以下脚本将打印所有行：

```
awk -F'"' -v OFS='' '
  NF > 1 { 
    for(i=2; i<=NF; i+=2) { 
      gsub(";", "|", $i);
      $i = FS $i FS;       # reinsert the quotes
    }
  }
  {
    # print all lines
    print
  }' test.csv > test1.csv 
```

要执行您想要的操作，您可以更改脚本中的行并重新处理它：

```
awk -F'"' -v OFS='' '
  # Save the original line
  { ORIGINAL_LINE = LINE = $0 }
  # Replace the semicolon inside quotes by a dummy character
  # and put the resulting line in the LINE variable
  NF > 1 {
    LINE = ""
    for(i=2; i<=NF; i+=2) { 
      gsub(";", "|", $i)
      LINE = LINE $(i-1) FS $i FS     # reinsert the quotes
    }
    # Add the end of the line after the last quote
    if ( $(i+1) ) { LINE = LINE $(i+1) }
  }
  {
    # Put the semicolon-separated fields in a table
    # (the semicolon inside quotes have been removed from LINE)
    split( LINE, TABLE, /;/ )
    # Build the file name -- TABLE[ 3 ] is the 3rd field
    CSV_FILE = "country_yearly_" TABLE[ 3 ] ".csv"
    # Save the line
    print ORIGINAL_LINE > CSV_FILE
  }' 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-04T10:58:33.853

你接近解决方案了。我会使用最后一个字段来避免双引号字段的问题。此外，无需关闭每个文件。`awk`它们将在脚本结束时由 shell 自动关闭。

```
awk '
    BEGIN {
        FS = OFS = ";";
    }
    FNR > 1 {
        fname = "country_yearly_" $NF ".csv";
        print >>fname;
    }
' infile 
```

检查输出：

```
head country_yearly_* 
```

这会产生：

```
==> country_yearly_.csv <==
O;"String OK";
P;"String OK";

==> country_yearly_FR.csv <==
G;H;FR
I;J;FR
K;L;FR

==> country_yearly_UK.csv <==
M;"String with ; semicolon";UK
N;"String without semicolon";UK

==> country_yearly_US.csv <==
A;B;US
C;D;US
E;F;US 
```

# windows-phone-7.1.1 - WP7中的内存不足异常

> ID：12261775
> 
> 赞同：3
> 
> 时间：2012-09-04T10:40:29.010
> 
> 标签：windows-phone-7.1.1

当我尝试将一些图像保存到我的独立存储时，会发生内存不足异常。如果图像计数超过 20，则会发生此错误。我正在下载所有这些图像并将它们保存在独立存储的临时文件夹中。当我尝试将这些图像从临时文件夹保存到独立存储中名为 myImages 的文件夹时，会发生此错误。每张照片都从 temp 中读取并一张一张地写入 myImages。当大约 20 或 25 张照片保存到 myImages 时，就会发生此错误。图像的平均大小为 350-400 KB。我怎样才能避免这个错误？

我的代码是：

```
private void SaveImages(int imageCount)
{
    IsolatedStorageFile isf = IsolatedStorageFile.GetUserStoreForApplication();
    BitmapImage bitmap;
    string tempfoldername = "Temp";
    string tempfilename = string.Empty;

    string folderName = "myImages";
    string imageName = string.Empty;
    for (int i = 0; i < imageCount; i++)
    {
        tempfilename = tempfoldername + "\\" + (i + 1) + ".jpg";
        bitmap = GetImage(tempfoldername, tempfilename);

        imageName = folderName + "\\" + (i + 1) + ".jpg";
        SaveImage(bitmap, imageName, folderName);
        if (isf.FileExists(imageName))
            isf.DeleteFile(imageName);

        bitmap = null;
    }
}
private BitmapImage GetImage(string foldername, string imageName)
{
    IsolatedStorageFile isf = IsolatedStorageFile.GetUserStoreForApplication();
    IsolatedStorageFileStream isfs;
    BitmapImage bi = new BitmapImage();
    MemoryStream ms = new MemoryStream();
    byte[] data;
    int FileSize = 0;
    if (isf.DirectoryExists(foldername))
    {
        isfs = isf.OpenFile(imageName, FileMode.Open, FileAccess.Read);
        data = new byte[isfs.Length];
        isfs.Read(data, 0, data.Length);
        ms.Write(data, 0, data.Length);
        FileSize = data.Length;
        isfs.Close();
        isfs.Dispose();
        bi.SetSource(ms);
        ms.Dispose();
        ms.Close();
        return bi;
    }
    return null;
}

private void SaveImage(BitmapImage bitmap, string imageName, string folderName)
{
    int orientation = 0;
    int quality = 100;
    using (IsolatedStorageFile isf = IsolatedStorageFile.GetUserStoreForApplication())
    {
        if (!isf.DirectoryExists(folderName))
            isf.CreateDirectory(folderName);

        if (isf.FileExists(imageName))
            isf.DeleteFile(imageName);

        Stream fileStream = isf.CreateFile(imageName);
        WriteableBitmap wb = new WriteableBitmap(bi);
        wb.SaveJpeg(fileStream, wb.PixelWidth, wb.PixelHeight, orientation, quality);
        fileStream.Close();
    }
} 
```

我该如何解决这个错误？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-04T15:53:58.647

您的 BitmapImage 很可能会泄漏内存。
请务必将 设置`UriSource`为 null 以便释放内存。

Have a look at [http://blogs.msdn.com/b/swick/archive/2011/04/07/image-tips-for-windows-phone-7.aspx](http://blogs.msdn.com/b/swick/archive/2011/04/07/image-tips-for-windows-phone-7.aspx) for more.

# objective-c - 导航栏。右栏按钮没有动画

> ID：12261780
> 
> 赞同：3
> 
> 时间：2012-09-04T10:40:50.723
> 
> 标签：objective-c, uitableview, animation, uinavigationbar, navigationitem

我在导航栏中添加了一个右栏按钮。它出现并且工作正常。

问题是它没有动画。我的意思是，当我通过单击某行移动到其他视图时，它会突然弹出，您可以看到新视图在其后面移动，直到滑动动画完成。

```
UIBarButtonItem *closeButton = [[UIBarButtonItem alloc] initWithTitle:@"Close"style:UIBarButtonItemStylePlain target:self    action:@selector(closePopOver)];
[self.navigationItem setRightBarButtonItem: closeButton animated:YES];
[closeButton release]; 
```

我将它添加到`initWithNibName:`方法中。我试过把它移到`viewDidLoad`，但没有用。

有任何想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-04T11:59:55.457

您可以使用特定的方法来为右栏按钮项设置动画：

`[self.navigationItem setRightBarButtonItem: self.addToOrderButton animated:YES];`

# iphone - 当用户从日期选择器中选择日期时，如何在下拉列表中获取特定的星期几？

> ID：12261781
> 
> 赞同：1
> 
> 时间：2012-09-04T10:40:55.250
> 
> 标签：iphone, ios, ios5, ios4

当用户从日期选择器中选择日期时，如何从下拉列表中获取特定的星期几？

我想让用户选择一个日期 drom 日期选择器。在下一个按钮中，我有天字段，其中包含一周中的天数列表。

当用户单击日期按钮时，我想从日期选择器中显示所选日期的特定日期。请帮帮我？？？？？？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-05T06:54:12.210

尝试这个

```
NSDate *today=calendarPicker.date;

NSCalendar *calendar = [[NSCalendar alloc] initWithCalendarIdentifier:NSGregorianCalendar];

NSDateComponents *components = [gregorian components: (NSYearCalendarUnit | NSMonthCalendarUnit | NSDayCalendarUnit | NSHourCalendarUnit | NSMinuteCalendarUnit | NSSecondCalendarUnit) fromDate: today];

components.year = [textfield.text intValue]; // Here value for year is fetched from a text field control. Similarly other values like month, date, hour or minute can be changed.

[calendarPicker setDate: [calendar dateFromComponents:components] ]; // Update the date picker control.

[calendar release]; 
```

# time - 对程序设置时间限制

> ID：12261783
> 
> 赞同：2
> 
> 时间：2012-09-04T10:41:00.180
> 
> 标签：time, limit, trial

请就以下要求提出建议

我们需要在程序中包含试用期或时间限制。我们只有exe文件。我们没有源文件。是否有任何工具可用于在此 exe 文件中包含试用期（如限制 30 天）

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-04T10:44:20.223

有很多这样的保护器应用程序，例如：

谜 - [http://enigmaprotector.com/](http://enigmaprotector.com/)
WinLicense - [http://www.oreans.com/winlicense.php](http://www.oreans.com/winlicense.php)
VMProtect - [http://vmpsoft.com/](http://vmpsoft.com/)

和别的

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-04T10:44:01.133

您可以创建一个自己的 exe 文件来调用您的 trial-exe（您应该将其重命名为`.lib`. 30 天后，您的 exe 将删除试用版 exe。但是，如果用户落后于此，它将失败；-)

嗯，你可以通过加密试用 exe 并在运行时解密它来保护它。如果解密的文件不会在临时文件中抵抗，而只能在内存中抵抗，那将是理想的选择。

# gmail - 根据时间在gmail中搜索电子邮件

> ID：12261785
> 
> 赞同：5
> 
> 时间：2012-09-04T10:41:10.083
> 
> 标签：gmail, google-apps-script, gmail-imap

我想要一份来自 gmail 的所有昨天电子邮件的列表。我正在尝试使用谷歌应用程序脚本，通过在我的收件箱上写一个查询，然后使用 GmailApp.search 来处理它。gmail 中的 after: 和 before: 搜索查询返回了意想不到的结果，因为查询是根据发送邮件的 SMTP 服务器时间（即 google 的服务器）进行搜索的。因此，在不同的时区，搜索对我产生了不合适的结果。有没有办法使用时间标准搜索 gmail，以便我可以适应时区差异？

请注意，本地时区、日历、gmail 等已针对我的时区正确配置，因此我在收件箱中看到的电子邮件的时间正确。只有搜索会产生问题。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-09-08T10:38:42.060

经过反复试验，找到了一种方法，确实可以按时间搜索 gmail 电子邮件。请注意，`Date()`在 google apps 脚本中返回的是根据**您的 timezone**。

下面的代码将在收件箱中返回所有前一天的电子邮件，假设`new Date()`根据您的时区给出日期和时间。除以 1000 是因为`getTime()`返回毫秒，而较新/较旧的搜索查询需要秒。

```
var month = new Date().getMonth();
var date = new Date().getDate();
var year = new Date().getFullYear();
var time1 = new Date(year, month, date, 0, 0, 0).getTime();
var time2 = time1 - 86400000;
var query = "newer:" + time2/1000 + " older:"  + time1/1000 + " in:inbox";
var conversations = GmailApp.search(query); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-04T11:22:23.517

你能给出你正在使用的确切搜索字符串以及你如何构造之前和之后的日期吗？您可以使用 Utilities.formatDate() 函数将日期字符串格式化为您所在的时区。

另一种解决方案是获取所有邮件（可能是 100 封左右），然后丢弃所有不适合您感兴趣的时间段的邮件。

# c# - 未提供所需的模拟级别，或提供的模拟级别无效

> ID：12261789
> 
> 赞同：10
> 
> 时间：2012-09-04T10:41:22.343
> 
> 标签：c#, wcf, impersonation, windows-security

我在使用 WCF 服务和模拟时遇到了一些问题，我将其提炼为下面的一个简单方法。WCF 服务目前在 exe 中自托管。异常消息是“未提供所需的模拟级别，或者提供的模拟级别无效”。检查何时抛出错误，Identity ImpersonationLevel 设置为委托，正如我的客户端上指定的并通过 Kerberos 进行身份验证。

我有点困惑，因为在我看来，ImpersonationLevel 和 Authenticaiton 的要求已经得到满足。我的想法是，问题可能与域设置有关，我已经设置并认为设置正确。所以我有两个问题：

1.  下面的操作应该成功吗？（或者它有缺陷？）
2.  需要在 Win2k8 域上配置哪些设置才能使其工作？我正在使用两个属于同一个 Win2k8 域的成员（它是一个新域并且非常普通，目的是测试模拟）。

代码如下：

```
[OperationBehavior(Impersonation = ImpersonationOption.Required)]
public string Test()
{
    WindowsIdentity identity = ServiceSecurityContext.Current.WindowsIdentity;
    using (identity.Impersonate())
    {
        ProcessStartInfo pi = new ProcessStartInfo(@"c:\temp\test.bat");
        pi.UseShellExecute = false;
        pi.RedirectStandardOutput = true;
        Process p = Process.Start(pi); // exception thrown here!
        p.WaitForExit();
        string o = p.StandardOutput.ReadToEnd();
        return o;
    }
} 
```

异常详情：

```
Win32Exception occurred: Either a required impersonation level was not provided, or the provided impersonation level is invalid
   at System.Diagnostics.Process.CreatePipeWithSecurityAttributes(SafeFileHandle& hReadPipe, SafeFileHandle& hWritePipe, SECURITY_ATTRIBUTES lpPipeAttributes, Int32 nSize)
   at System.Diagnostics.Process.CreatePipe(SafeFileHandle& parentHandle, SafeFileHandle& childHandle, Boolean parentInputs)
   at System.Diagnostics.Process.StartWithCreateProcess(ProcessStartInfo startInfo)
   at System.Diagnostics.Process.Start()
   at System.Diagnostics.Process.Start(ProcessStartInfo startInfo)
   at MonetEnterprise.Service.SecurityService.Test() 
```

Test.bat 文件内容

> 回显%用户名%

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-09-06T07:46:02.263

1.  只要您使用.NET Process 类，它就有缺陷，它总是以父进程的身份开始。要以另一个身份运行它，您似乎必须使用 win32 api CreateProcessAsUser（我还没有开始工作）。

2.  我需要提升运行它（即 Visual Studio 作为管理员）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2020-06-15T22:56:10.073

这解决了我的应用程序的问题：

1.  转到开始 > 设置 > 控制面板 > 管理工具 > 本地安全策略 展开本地策略并选择用户权限分配
2.  在右窗格中，双击**身份验证后模拟客户端**
3.  在“安全策略设置”对话框中，单击“添加用户或组”
4.  在“选择用户、计算机或组”对话框中，键入`IIS_IUSRS`
5.  选择检查名称并验证名称是否正确

来源：[如果未输入完整路径，则会出现 500 内部服务器错误 (0x80070542)](https://port135.com/2020/06/15/500-internal-server-error-if-the-full-path-not-entered/)

# c++ - 命名空间包含会增加 exe 的大小吗

> ID：12261795
> 
> 赞同：6
> 
> 时间：2012-09-04T10:41:49.313
> 
> 标签：c++, linux, namespaces, size

我参加了一个会议，其中被教导我们不应该使用“使用命名空间 std”，而是使用“std :: cout”来使用 std 命名空间的一些调用，因为***这会增加二进制文件的大小***

我尝试通过以下实验验证相同的内容。代码及其输出如下：-

```
 [Fooo@EXP]$ cat namespacestd.cpp
    #include<iostream>

    #ifdef STD
            using namespace std;
    #endif

    int main()
    {
    #ifndef STD
            std::cout<<"\n ==> Workign \n";
    #else
            cout<<"\n ==> Workign \n";
    #endif

    return 0;

    }

    [Fooo@EXP]$ time g++ -c namespacestd.cpp -DSTD

    real    0m0.246s
    user    0m0.215s
    sys     0m0.030s
    [Fooo@EXP]$ size namespacestd.o
       text    data     bss     dec     hex filename
        310       8       1     319     13f namespacestd.o  
    [Fooo@EXP]$ time g++ -c namespacestd.cpp

    real    0m0.258s
    user    0m0.224s
    sys     0m0.034s
    [Fooo@EXP]$ size namespacestd.o
       text    data     bss     dec     hex filename
        310       8       1     319     13f namespacestd.o

    [Fooo@EXP]$ time g++ -o namespacestd namespacestd.cpp -DSTD

    real    0m0.293s
    user    0m0.251s
    sys     0m0.042s
    [Fooo@EXP]$ size namespacestd
       text    data     bss     dec     hex filename
       1980     580     288    2848     b20 namespacestd
    [Fooo@EXP]$ time g++ -o namespacestd namespacestd.cpp

    real    0m0.274s
    user    0m0.239s
    sys     0m0.035s
    [Fooo@EXP]$ size namespacestd
       text    data     bss     dec     hex filename
       1980     580     288    2848     b20 namespacestd
    [Fooo@EXP]$ 
```

正如我从我的实验中看到的那样

***对二进制文件的大小没有影响***

只要

**编译时间有差异**。

如果我的结论有缺陷，请纠正我

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-04T10:45:54.013

using namespace std 不应该影响大多数编译器的二进制大小。由于另一个原因，仍然应该避免它：

命名空间 std 真的很大。从字面上看，那里有数千个标识符，它们都在您的程序范围内。这增加了与您自己的标识符或来自其他库的标识符发生冲突的可能性，这可能会导致一些令人讨厌的意外。

另请参阅此相关问题：[为什么“使用命名空间标准”被认为是不好的做法？](https://stackoverflow.com/questions/1452721/why-is-using-namespace-std-considered-a-bad-practice-in-c)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-04T12:23:12.350

> 我参加了一个会议，其中教导我们不应该使用“使用命名空间 std”，而是使用“std::cout”来使用 std 命名空间的一些调用，因为这会增加二进制文件的大小。

非常好的建议，废话的理由。这个理由是过早的优化，启动是错误的。

永远不要`using namespace std;`在头文件中使用。`std`头文件中的该指令会使用#includes 头文件的每个文件中的名称空间中的项目污染全局名称空间。

即使在源文件中，许多人也更喜欢它，`std::whatever`因为它使代码更易读、更易理解且不易出错。以一次性输入几个字符为代价，该`std::`前缀永远将意图传达给编译器，更重要的是，传达给代码的人类读者/人类维护者。毫无疑问，代码正在调用标准库中的某些内容。

使用`using namespace <namespace_name>;`指令的唯一理由是程序员非常懒惰以节省输入的几个字符。那些为数不多的节省的打字字符需要付出巨大的代价。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-04T10:54:51.887

> 对二进制文件的大小没有影响

可执行代码和数据应该没有任何区别，因为在这两种情况下，您对同一个对象执行相同的操作，并且从对象名称中查找该对象的查找过程发生在编译期间。但是，在某些情况下，它们可能会生成不同数量的元数据，例如调试信息。

> 编译时间有差异

对源的任何更改都可能会更改编译时间，但您没有提供足够的数据来确定差异是否具有统计意义。您需要为每种配置重复实验几次，计算两个样本的均值和方差，并对均值差异应用显着性检验。

无论如何，即使您确实确定污染全局命名空间会使编译速度略微加快，但与可能浪费在跟踪名称冲突的时间相比，所节省的任何时间都将是微不足道的。命名空间中有很多名称`std`，您可能希望在自己的代码中使用其中的许多名称。这就是避免命名空间污染的原因；任何声称它会影响二进制文件大小的人并不完全理解他们在说什么。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-09-04T10:59:11.950

二进制文件不一样，因为在一个中定义了 STD，而在另一个中则没有。我也有不同的尺寸。

但是，如果您[剥离](http://unixhelp.ed.ac.uk/CGI/man-cgi?strip)符号，您将获得几乎相同的二进制文件（不同的是一些 ELF 标头参数，例如编译时间）。

如果您将示例更改为此：

```
#include<iostream>

    using namespace std;

    int main()
    {
    #if 0
            std::cout<<"\n ==> Workign \n";
    #else
            cout<<"\n ==> Workign \n";
    #endif

    return 0;

    } 
```

然后用`#if 1`and编译`#if 0`，你将得到相同大小的二进制文件，即使没有条带符号。

编译时间的差异是正常的。定义了宏后，文件变大了，预处理器必须做的更多。然而，新的 PC 是如此强大，以至于我会简单地忽略这个时间增加。

# ruby-on-rails - rake 规范在规范之后运行测试

> ID：12261798
> 
> 赞同：3
> 
> 时间：2012-09-04T10:42:00.570
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3, rspec, rake

当我`rake spec`在我的 Rails 项目中运行时，它会执行所有规范，然后尝试运行测试（例如`rake test`）：

```
$ rake spec
ruby -S rspec ./spec/... #file list
# --> ...  normal RSpec output
Finished in 11.11 seconds
111 examples, 0 failures, 11 pending

# --> here starts the problem <--
Run options: 

# Running tests:

Finished tests in 0.000343s, 0.0000 tests/s, 0.0000 assertions/s.
0 tests, 0 assertions, 0 failures, 0 errors, 0 skips 
```

你知道吗，为什么`Test::Unit`即使我没有测试，它也会尝试运行测试？（我什至没有`test/`目录）

**编辑：** 当我运行其他`rake`命令时，它们会完成它们的工作，但随后会出现错误，例如：

```
$ rake about
About your application's environment
Ruby version             1.9.3 (i686-linux)
RubyGems version         1.8.24
Rack version             1.4
Rails version            3.2.3
JavaScript Runtime       therubyracer (V8)
Action Pack version      3.2.3
Active Support version   3.2.3
Middleware               ActionDispatch::Static, Rack::Lock, Rack::Runtime, Rack::MethodOverride, ActionDispatch::RequestId, Rails::Rack::Logger, ActionDispatch::ShowExceptions, ActionDispatch::DebugExceptions, ActionDispatch::RemoteIp, ActionDispatch::Reloader, ActionDispatch::Callbacks, ActionDispatch::Cookies, ActionDispatch::Session::CookieStore, ActionDispatch::Flash, ActionDispatch::ParamsParser, ActionDispatch::Head, Rack::ConditionalGet, Rack::ETag, ActionDispatch::BestStandardsSupport
Application root         /path/to/project
Environment              development
path/.rvm/rubies/ruby-1.9.3-p125/lib/ruby/1.9.1/test/unit.rb:167:in `block in non_options': file not found: about (ArgumentError)
        from path/.rvm/rubies/ruby-1.9.3-p125/lib/ruby/1.9.1/test/unit.rb:146:in `map!'
        from path/.rvm/rubies/ruby-1.9.3-p125/lib/ruby/1.9.1/test/unit.rb:146:in `non_options'
        from path/.rvm/rubies/ruby-1.9.3-p125/lib/ruby/1.9.1/test/unit.rb:207:in `non_options'
        from path/.rvm/rubies/ruby-1.9.3-p125/lib/ruby/1.9.1/test/unit.rb:52:in `process_args'
        from path/.rvm/rubies/ruby-1.9.3-p125/lib/ruby/1.9.1/minitest/unit.rb:891:in `_run'
        from path/.rvm/rubies/ruby-1.9.3-p125/lib/ruby/1.9.1/minitest/unit.rb:884:in `run'
        from path/.rvm/rubies/ruby-1.9.3-p125/lib/ruby/1.9.1/test/unit.rb:21:in `run'
        from path/.rvm/rubies/ruby-1.9.3-p125/lib/ruby/1.9.1/test/unit.rb:326:in `block (2 levels) in autorun'
        from path/.rvm/rubies/ruby-1.9.3-p125/lib/ruby/1.9.1/test/unit.rb:27:in `run_once'
        from path/.rvm/rubies/ruby-1.9.3-p125/lib/ruby/1.9.1/test/unit.rb:325:in `block in autorun' 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-11T12:54:29.997

任何文件都`require test/unit`启用了一个`at_exit`尝试运行测试的钩子。

如果从 rake 任务加载的任何文件执行此操作，at_exit 挂钩会尝试使用 rake 命令的最后一部分作为要运行的测试的名称来运行测试。在 的情况下`rake about`，它会搜索一个名为`about`但不存在的测试。

`shoulda`当我的 Gemfile 中有 gem 时，我遇到了问题。我通过在 Gemfile 中包含它来解决它：

```
gem 'test-unit', :require => "test/unit" 
```

# entity-framework - Entity Framework 5 Nuget 控制台命令

> ID：12261799
> 
> 赞同：20
> 
> 时间：2012-09-04T10:42:02.567
> 
> 标签：entity-framework, command-line, nuget, entity-framework-migrations

因此，我首先使用 EF 5 代码创建数据库，我检查了一些指南并发现了一些“重要”/有用的命令，例如：“Update-Database -Force -Verbose”。但是我知道必须有更多这样的命令，例如：“Purge-Database”，但没有成功找到它们。所以我的问题是，我在哪里可以找到 EF 5 的所有可用命令和标志（例如：-Force、-Verbose 等）。

我试过谷歌但没有运气，因为查询“EF 5 Console”等有控制台，它给出了关于控制台应用程序的结果，我不想要 ofc。

* * *

## 回答 #1

> 赞同：43
> 
> 时间：2012-09-04T12:22:36.567

只需使用：

```
get-help EntityFramework 
```

获取支持的命令列表和：

```
get-help Update-Database 
```

获取查询命令的帮助。每个命令的帮助可以为您提供有关扩展帮助的信息，例如使用：

```
get-help Update-Database -detailed 
```

您可能会感到失望，因为 EF 只提供了四个命令。

# javascript - 如何制作侧边栏以增加其全长？

> ID：12261800
> 
> 赞同：0
> 
> 时间：2012-09-04T10:42:03.427
> 
> 标签：javascript, xml, xul

我在 xul 中创建了一个侧边栏，我需要让它像 Firefox 的历史和书签侧边栏一样灵活。为此，我尝试将 flex='1' 应用于（broadcasterset、broadcaster、page、grid），但没有任何变化。在这种情况下我该怎么办？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-04T11:44:01.637

“灵活性”是使用[`<splitter>`element](https://developer.mozilla.org/en/XUL/splitter)实现的。例如：

```
<hbox>
  <iframe id="sidebar" type="content" width="300"/>
  <splitter id="splitter" collapse="before" state="open"/>
  <iframe id="browser" type="content" flex="1"/>
</hbox> 
```

如果您隐藏侧边栏，您还必须记住隐藏拆分器。

# c# - 如何从 C# 代码将默认打印“缩放 > 缩放到纸张大小”设置为 A4？

> ID：12261805
> 
> 赞同：2
> 
> 时间：2012-09-04T10:42:39.130
> 
> 标签：c#, winforms, office-automation

我正在使用以下代码从我的 c# 应用程序创建一个 word 文档：

```
oWord = new Word.Application();
oDoc = oWord.Documents.Add(ref oMissing, ref oMissing, ref oMissing, ref oMissing);
oDoc.PageSetup.PaperSize = WdPaperSize.wdPaperLegal; 
```

有没有一种方法可以指定（使用 c# 代码）打印选项

```
Zoom > "Scale to paper Size" 
```

每次打印此文档时都要为 A4 吗？

提前致谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-04T10:56:59.767

You can set the options when printing the document: in the PrintOut method, specify these values:

```
PrintZoomPaperWidth = 11907
PrintZoomPaperHeight = 16839 
```

# algorithm - 时间复杂度的算法回顾

> ID：12261806
> 
> 赞同：0
> 
> 时间：2012-09-04T10:42:43.767
> 
> 标签：algorithm, complexity-theory, time-complexity

1.  我想知道这在最坏的情况下是否有效`Θ(n+m)`？

`n`是 的大小`i_StringForSearch`，`m`是 的大小`i_SubStringToFind`。

2.有没有推荐的程序来检查给定代码的时间复杂度，我更喜欢一个公认的免费工具。

谢谢

```
public static boolean isSubstring(String i_StringForSearch, String i_SubStringToFind)
    {
        int strForSearchIndex = 0;
        int subStrToFindIndex = 0;
        boolean endOfStringToSearch = false;
        boolean foundSubString = false;
        boolean isThereASequenceOfMatching = false;

        while(!endOfStringToSearch && !foundSubString)
        {
            if(strForSearchIndex == i_StringForSearch.length())
            {
                endOfStringToSearch = true;
            }

            else if(i_StringForSearch.charAt(strForSearchIndex) == i_SubStringToFind.charAt(subStrToFindIndex))
            {
                isThereASequenceOfMatching = true;
                if(subStrToFindIndex == i_SubStringToFind.length() -1 )
                {
                    foundSubString = true;
                }
                subStrToFindIndex++;
                strForSearchIndex++;
            }

            else if(i_StringForSearch.charAt(strForSearchIndex) != i_SubStringToFind.charAt(subStrToFindIndex))
            {
                if(isThereASequenceOfMatching)
                {
                    subStrToFindIndex = 0;
                    isThereASequenceOfMatching = false;
                }
                strForSearchIndex++;
            }
        }

       return foundSubString;
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-04T10:52:43.367

1.  回答你的问题：是的，算法是`O(n+m)`. 每次迭代都会增加`strForSearchIndex`，所以最多有`n` 迭代。[这是假设`i_StringForSearch.length()`在 中完成的`O(1)`，这通常是正确的]。

2.  该算法与 的反例错误`isSubstring("aaab","aab") == false`。

3.  您可能想看看[Knuth Morris Pratt 算法](http://en.wikipedia.org/wiki/Knuth%E2%80%93Morris%E2%80%93Pratt_algorithm)和/或[Rabin-Karp 算法](http://en.wikipedia.org/wiki/Rabin%E2%80%93Karp_algorithm)和/或[Aho-Corasick 算法](http://en.wikipedia.org/wiki/Aho%E2%80%93Corasick_string_matching_algorithm)

# javascript - 谷歌分析：如何跟踪移动网站的点击作为主网站的点击

> ID：12261809
> 
> 赞同：2
> 
> 时间：2012-09-04T10:42:51.817
> 
> 标签：javascript, mobile, google-analytics, sencha-touch-2

我们正在开发我们网站的全新移动版本，它是一个使用 Sencha Touch 2（Ext JS、JavaScript）编写的 HTML5 网站。

我们在我们的主站点上使用 Google Analytics，我们也想在移动站点上使用 GA。然而，我们想要的用例有点特殊： **我们希望将移动网站上文章的点击作为对主网站上相应文章的点击进行跟踪。** 这背后的原因是希望汇总统计数据，而不是单独跟踪数据。

这两个站点的域和 URL 结构不同，尽管站点层次结构有些相似（它们都从 Sharepoint 后端获取内容），这就是挑战所在。我们不能只使用“setDomainName”之类的东西来更改域。

在移动版的每个页面上，我们都有主站点上原始页面/文章的完整 URL。我们想要做的是告诉 Google 跟踪该视图作为对该 URL 的点击，而不是我们实际所在的那个。

我已经看到一些关于“trackPageView”的线程（f ex [here](https://stackoverflow.com/questions/945676/approaches-to-overriding-google-analytics-trackpageview-using-asp-net)），它可能足以满足我们的需求，但我并不完全确定。这听起来有点太简单了，但也可能是我在这里没有看到明显的解决方案。我们能否为这个方法提供所需的命中 URL，仅此而已？那么在标头中有一个脚本来检查具有此 URL 的设置变量是否有效，如果它存在调用“trackPageView”并将其作为参数，如果不只是跟踪常规命中？欢迎对这种方法的语法提供任何帮助。

在这里感谢所有帮助和建议！我在没有太多关于这种特殊情况的帮助信息的情况下搜索了 GA 文档。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-22T05:13:46.557

是的，使用跟踪页面查看事件并传递相应的 URL 参数就是这么简单。在 sencha 中，您的所有视图都将存在于同一个 HTML 页面中，因此您需要以编程方式调用它。

包含与您在具有相同 ID 的实时站点中使用的相同的跟踪代码...这应该可以按您的预期工作...非常好的问题...希望它有所帮助...

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-03-01T06:53:39.083

这是 GA Tracking 的详细说明，对 ST2+ 来说很简单。我已经介绍了如何初始化、设置基本导航跟踪以及包括自定义变量和事件跟踪在内的几种替代方法。

```
/*
Standard method to init GA tracking.
These can be fired from launch.
*/

initialiseGoogleAnalytics : function() {
    //Add Google Analytics Key
    window._gaq = window._gaq || [];
    window._gaq.push(['_setAccount', MyApp.config.googleAnalytics.code]);
    window._gaq.push(['_setDomainName', MyApp.config.googleAnalytics.domain]);
    window._gaq.push(['_trackPageview']);
    (function() {
        var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
        ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
        var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
    })();
},

/* 
    This method can be set to a globally accessable reference.
    For instance:
        MyApp.Util = {}; // reference for common utility functions
        MyApp.Util.gaTrackEvent = function(data) {};

    Thus allowing MyApp.Util.gaTrackEvent(data) from anywhere in app.

    Alternatively, add as function to Application for 
        this.getApplication().gaTrackEvent(data);
*/
gaTrackEvent : function(data) {
    //Push data to Google Analytics

    // optional prefix for mobile devices - unnecessary for your interest
    var prefix = 'mobile/';

    // don't track homepage/default hits
    if (data == 'home') {
        //Ignore Home
        return;
    }

    // basic tracking
    _gaq.push(['_trackPageview', prefix + data]);

    // OPTIONAL ALTERNATIVES FOR DETAILED TRACKING
    // detailed tracking - condensed
    _gaq.push(['_setCustomVar',
        1,                      // custom variable slot
        'customEventName',      // custom variable name
        'value1|value2|value3', // multiple values using 1 slot
        2                       // sets scope to session-level
    ]);
    _gaq.push(['_trackEvent',
        'ParentEventName',
        'SomeValue'
    ]);

    // detailed tracking - each variable using own slot
    _gaq.push(['_setCustomVar',
        1,
        'stage1',
        'value1',
        2
    ]);
    _gaq.push(['_setCustomVar',
        2,
        'stage2',
        'value2',
        2
    ]);
    _gaq.push(['_setCustomVar',
        3,
        'stage3',
        'value3',
        2
    ]);
    _gaq.push(['_trackEvent',
        'ParentEventName',
        'SomeValue'
    ]);

}

/*
Set up a controller to handle GA tracking.
This way you can keep the unique events you wish to track central,
while also handling default tracking and SEO.

For example, a controller for Registration might want tracking on success.
this.getRegistration().fireEvent('registrationsuccess');
*/
    config: {
        control: {
                "navigationview": {
                    activeitemchange: 'generalSEOhandler'
                },
                "#registration": {
                    registrationsuccess: 'onRegistrationSuccess'
                },
                ...
        },
    },

    generalSEOhandler: function(container, value, oldValue, eOpts) {
        if (value === 0) {
            return false;
        }

        // ignoreDefaultSeo - boolean custom config that can be applied to views.
        var ignoreDefaultSeo = value.getInitialConfig('ignoreDefaultSeo');

        if (Ext.isDefined(ignoreDefaultSeo) && ignoreDefaultSeo == 1) {
            // optional handler for special cases...
        } else {
            // Use default
            var itemId = value.getItemId();
            itemId = itemId.replace(/^ext-/,'');    // Remove the prefix ext-
            itemId = itemId.replace(/-[0-9]?$/,''); // Remove the suffix -1,-2...

            // Alternatively use xtype of the view (my preference)
            // This will require the xtypes of your views to match the main site pages.
            var itemId = value.config.xtype;

            this.trackEvent(itemId);
            //console.log('USE DEFAULT', value.getId(), value.getItemId(), value);
        }
    },

    onRegistrationSuccess: function(eventOptions) {
        var app = this.getApplication(),
            trackUrl;

        trackUrl = 'new-member';

        if (Ext.isDefined(app.accountReactivated) && app.accountReactivated == 1) {
            trackUrl = 'reactivated-member';
        }

        if (Ext.isDefined(app.registeredUsingFacebook) && app.registeredUsingFacebook == 1) {
            trackUrl += '/facebook';
        } else {
            trackUrl += '/non-facebook';
        }

        // console.log('onRegistrationSuccess', trackUrl);
        this.trackEvent(trackUrl);
    },

    trackEvent: function(data) {
        // if using MyApp.Util.gaTrackEvent() technique
        MyApp.Util.gaTrackEvent(data);

        // if gaTrackEvent() an application method
        this.getApplication().gaTrackEvent(data);
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-22T06:30:21.837

我发现这篇文章谈论的是 Google Analytics 和 Sencha Touch

[http://wtcindia.wordpress.com/2013/03/21/using-google-analytics-in-sencha-touch-based-mobile-website/](http://wtcindia.wordpress.com/2013/03/21/using-google-analytics-in-sencha-touch-based-mobile-website/)

# vba - 联合多个 Excel 工作表。（粘贴在彼此下方）

> ID：12261810
> 
> 赞同：0
> 
> 时间：2012-09-04T10:42:57.160
> 
> 标签：vba, excel, union

将 Excel 表格从多个文件复制并粘贴到一个文件中的最聪明的方法是什么？因此，特别是如何确定在 makro 中复制和粘贴的已用行的范围？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-04T13:44:01.567

*如果这是一次性操作，可能最快的方法是激活办公室剪贴板（主页*选项卡右下角的箭头）。这允许收集多达 24 个单独的范围并将其粘贴到另一个范围之下。

假设数据在一个工作簿中并从每张工作表的第 2 行开始，如下例所示，您可以：

*   选择所有选项卡
*   选择第一张纸上的所有行
*   按Ctrl+C、Ctrl+Page Down，反复复制所有数据
*   选择一个新工作表，然后单击**全部粘贴**

请注意，仅复制使用的范围，因此您可以复制整个工作表范围，而无需定位每张工作表上的最后一个单元格。

![在此处输入图像描述](../Images/11b87a6fa34f18efcf44d295fc3d3aab.png)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-04T11:35:32.023

如果你真的是指*表*`ListObjects`，你可以使用集合来引用它们。

试试这个（位于目标工作簿中的代码）
此代码将所有源表复制为单独的表，中间有一个空白行。如果要将数据合并到单个表中，则需要复制`lo.DataBodyRange`而不是单独`lo.Range`处理标题行和转换为表。

```
Sub CopyTables()
    Dim wbFrom As Workbook
    Dim shFrom As Worksheet
    Dim shTo As Worksheet
    Dim lo As ListObject
    Dim clTo As Range

    ' Setup Destination for copied tables
    Set shTo = ThisWorkbook.Worksheets("DestinationSheet")  ' <-- change name to your destination sheet name
    ' remove any existing data
    shTo.UsedRange.EntireRow.Delete
    Set clTo = shTo.Cells(1, 1)
    ' Loop through open workbooks
    For Each wbFrom In Application.Workbooks
        ' except destination wb
        If wbFrom.Name <> ThisWorkbook.Name Then
            ' loop through all sheets
            For Each shFrom In wbFrom.Worksheets
                ' loop through all tables on sheet
                For Each lo In shFrom.ListObjects
                    lo.Range.Copy clTo
                    ' offset to next paste location, leave one empty row between tables
                    Set clTo = clTo.Offset(lo.ListRows.Count + 2, 0)
                Next
            Next
        End If
    Next
End Sub 
```

替代内部 For 循环粘贴到单个范围

```
 For Each lo In shFrom.ListObjects
                    lo.DataBodyRange.Copy clTo
                    Set clTo = clTo.Offset(lo.ListRows.Count, 0)
                Next 
```

# asp.net-mvc-3 - dhtmlx 垂直条形图中的图例

> ID：12261813
> 
> 赞同：0
> 
> 时间：2012-09-04T10:43:02.317
> 
> 标签：asp.net-mvc-3, visual-studio-2010, dhtmlx

我正在使用 dhtmlx 垂直条形图。我已经使用 json 对象动态加载了条形图。现在，我想知道什么是图例？以及如何在 dhtmlx 图表中显示图例

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-05T14:24:30.813

您可以在图表配置中设置图例。以下是类似示例的链接：

[http://www.dhtmlx.com/docs/products/dhtmlxChart/samples/06_bar_chart/06_series.html](http://www.dhtmlx.com/docs/products/dhtmlxChart/samples/06_bar_chart/06_series.html)

# jquery-ui - 是否可以在 jQuery UI datepicker 中取消选择当前日期？

> ID：12261819
> 
> 赞同：4
> 
> 时间：2012-09-04T10:43:12.127
> 
> 标签：jquery-ui, jquery-ui-datepicker

我正在使用一个日期选择器，它始终在页面上可见，并绑定到一个隐藏的`<input>`. 根据页面上的用户交互，某些日期可能会被动态禁用（通过[beforeShowDay](http://jqueryui.com/demos/datepicker/#event-beforeShowDay)）。

问题是，这允许禁用先前选择的日期：

![在此处输入图像描述](../Images/609ca0a4efd293477fa32b4e99a39e4f.png)

为避免这种情况，我想在刷新日期选择器之前*取消选择*当前日期。

这可能吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-04T10:46:32.797

编辑：日期选择器附加到`div`. 像这样清除选定的值：

```
$('selector').datepicker('setDate') 
```

这将取消选择任何一天。

# php - 如何计算 xml 文件的原始元素？

> ID：12261820
> 
> 赞同：-1
> 
> 时间：2012-09-04T10:43:15.970
> 
> 标签：php, xml

> **可能重复：**
> [SimpleXML：如何查找顶级元素的子元素数量？](https://stackoverflow.com/questions/4055092/simplexml-how-to-find-number-of-children-of-top-level-element)
> [php计数xml元素](https://stackoverflow.com/questions/4386465/php-count-xml-elements)

我有这个代码：

```
$string = <<<XML
<?xml version='1.0'?> 
<document>
 <title>Forty What?</title>
 <from>Joe</from>
 <to>Jane</to>
 <body>
  I know that's the answer -- but what's the question?
 </body>
</document>
XML;

$xml = simplexml_load_string($string);
$data_count = count($data->xml);
print_r($data_count); 
```

我在线[演示运行此代码](http://writecodeonline.com/php/)

当我执行`print_r($data_count);`结果是“0”而不是10（字符串中的行）；

我应该怎么做才能包含变量中的原始数字`$data_count`？很多谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-04T10:47:35.480

你应该试试

```
$xml = simplexml_load_string($string);
print_r($xml->count()); // 4 
```

[演示](http://codepad.viper-7.com/rE72A4)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-04T10:47:55.997

试试这个

```
$string = <<<XML
<?xml version='1.0'?> 
<document>
 <title>Forty What?</title>
 <from>Joe</from>
 <to>Jane</to>
 <body>
  I know that's the answer -- but what's the question?
 </body>
</document>
XML;

$xml = simplexml_load_string($string); 
$data_count = count($xml);//here you need to give the parser object
print_r($data_count);
echo count($xml->title); //No of title tags 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-04T10:50:56.713

你也可以这样尝试：

```
<?php

$string = "XML
<?xml version='1.0'?> 
  <document>
    <title>Forty What?</title>
    <from>Joe</from>
    <to>Jane</to>
    <body>
      I know that's the answer -- but what's the question?
    </body>
  </document>
XML";

$array = explode( "\r", $string );

print_r( sizeof( $array ) );

?> 
```

# jquery - 如何通过类名找到元素的 ID？

> ID：12261823
> 
> 赞同：-1
> 
> 时间：2012-09-04T10:43:23.283
> 
> 标签：jquery

如何找到具有该类的元素的 ID `active`？

```
<a id='1' >A</a>
<a id='2' >B</a>
<a id='3' class='active'>C</a>
<a id='4' >D</a>
<a id='5' >E</a>
<a id='6' >F</a> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-04T10:45:27.243

采用`attr()`

```
$('a.active').attr('id'); 
```

# java - 通过 jUnit 进行 BDD Cucumber 测试

> ID：12261824
> 
> 赞同：3
> 
> 时间：2012-09-04T10:43:26.090
> 
> 标签：java, spring, testing, cucumber, bdd

我有任何通过 jUnit 手动运行黄瓜的例子吗？

我有一个带有 @RunWith(Cucumber.class) 的简单空类，其中包含我所有的功能文件。

```
import cucumber.junit.Cucumber;
import org.junit.runner.RunWith;

@RunWith(Cucumber.class)
public class RunCukesTest {
} 
```

运行它的简单junit测试：

```
@Test
    public void cucumberFirstPartTests()throws Exception{
        Cucumber cucumber = new Cucumber(RunCukesFirstPart.class);
        RunNotifier notifier = new RunNotifier();
        cucumber.run(notifier);
    } 
```

是否有任何用于过滤手动测试、使用运行器调度程序和黄瓜测试描述的示例？看过文档，但对我来说还不够。我将不胜感激任何链接。谢谢你。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-15T18:34:51.823

您可以使用任意数量的标签标记每个场景/功能，使用`@TAGNAME` Given that，您可以告诉跑步者运行一组选定的标签

```
@RunWith(Cucumber.class)
@Cucumber.Options(tags = {"@TAGNAME"}) 
```

那是你所追求的吗？

# python - 局域网上的 SQLite

> ID：12261825
> 
> 赞同：0
> 
> 时间：2012-09-04T10:43:28.773
> 
> 标签：python, sql, sqlite

我的应用程序使用 SQLite 数据库进行数据存储。理想情况下，该数据库应该驻留在某个网络驱动器上，我们将其命名为 Z：（Windows XP 的“映射网络驱动器”功能）。

应用程序正在Linux下开发，数据库本地存储。这是一个模块的一部分：

```
import sqlite3 as lite

con = lite.connect("base.db") 
```

访问 Z: 驱动器上的数据库的正确方法是什么？类似于以下内容：

```
import sqlite3 as lite
import os

path = 'Z:\'
con = lite.connect(path+"base.db") 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-04T10:59:39.283

您应该使用`os.path.join`来创建路径，因为它将使用正确的路径分隔符。此外，您可以`os.name`用来检查您是否在 Windows 上运行：

```
filename = 'base.db'

path = os.path.join('z:/', filename) if os.name == 'nt' else filename

con = lite.connect(path) 
```

尽管如此，您可能希望使文件位置可配置，以便更轻松地开发/调试/部署您的应用程序。

# objective-c - UIWebView，启用滚动但不反弹

> ID：12261826
> 
> 赞同：0
> 
> 时间：2012-09-04T10:43:29.493
> 
> 标签：objective-c, uiwebview, uiscrollview

在我的`UIWebView`我想启用滚动，但也禁用反弹效果（当我在顶部并向下移动手指并看到一个黑色块时）。

我尝试了很多组合，但似乎在我写的时候：

```
myUIWebView.scrollView.bounces = NO; 
```

这也完全禁用滚动。

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-04T10:47:37.120

尝试这个：

```
 for (id subview in myUIWebView.subviews) {
      if ([[subview class] isSubclassOfClass:[UIScrollView class]]) {
        ((UIScrollView *)subview).bounces = NO;
      }
    } 
```

据我所知，您所写的那一行仅适用于 iOS 5.0。

# data-warehouse - 数据仓库中的一对一关系

> ID：12261827
> 
> 赞同：0
> 
> 时间：2012-09-04T10:43:30.060
> 
> 标签：data-warehouse, business-intelligence

简单场景：我想创建数据仓库，其中包含有关“问题”（成本、工作时间等）的信息。问题的状态也可能会随着时间而改变。那么我正在创建一个名为 issueRealization 的事实表来描述每个问题。

我的问题是：我应该创建“问题”维度，它会给我一对一的关系 beetwen 维度和事实表吗？或者我应该将问题维度划分为最小维度，如状态等？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-04T15:27:06.977

问题状态跟踪是使用**累积快照**事实表跟踪问题状态随时间变化的一个很好的例子。

例如，假设这是一个 IT 问题/错误/增强管理系统，问题只有 3 个状态，“已创建”、“进行中”和“已解决”。

问题事实表如下所示：

```
ID Number (Degenerate Dimension)
Issue description (Degenerate dimension. You can also create a 1-1 table for these if it's not often used in reporting)
Type ID (bug/enhancement/etc, this is a dimension key)
Assigned Developer ID (Dimension key)
Current Status ID (Status dimension key)
Date Created (DATE dimension)
Created Flag (1 = created, 0 = otherwise)
Date In Progress (DATE dimension)
In Progress Flag (1 = created, 0 = otherwise)
Date Resolved (DATE dimension)
Resolved Flag (1 = created, 0 = otherwise)
Created Datetime (measure)
InProgress Datetime (measure)
Resolved Datetime (measure)
Worktime Interval (measure)
Cost (measure) 
```

该表的粒度是每个问题 ID 号 1 行。

使用这种类型的事实表，每次源系统修改问题时，您都会更新*同一行。*请注意我们如何为每种状态类型创建一个字段，以及一个日期时间记录，以允许我们计算诸如“创建和解决状态之间的时间”之类的指标。此外，我添加了一个间隔字段以允许您存储“实际”工作时间，例如开发人员用于修复的“小时”。这很容易是一个整数。

然后，该表将能够回答有关问题的任何问题，并提供汇总以显示“有多少问题需要超过 1 周才能解决”等。

# javascript - Firefox javascript 解释器或 Firebug 跳行

> ID：12261830
> 
> 赞同：3
> 
> 时间：2012-09-04T10:43:35.543
> 
> 标签：javascript, firefox, firebug

这是一段我没有编写的 jquery/javascript 代码，但我正在尝试在 Firebug 上进行调试（我按原样复制/粘贴它，只是添加了一些空格以实现良好的对齐）：

```
 if (control == "#testTakerSearchSource" && object !== undefined && object[key] !== undefined && key == "datasets" && object[key].length >= 3) {
    var afterValues = [];
    if (object[key].length == 3 && object[key][0] == "1") {
        afterValues[0] = "1,2,3";
        object[key] = afterValues;
    }
    else {
        var beforeValues = object[key];
        afterValues[0] = "1,2,3";
        for (var i = 3; i < beforeValues.length; i++) {
            afterValues[i - 2] = beforeValues[i];
        }
        object[key] = afterValues;
    }
} 
```

我在第一行设置了一个断点。它应该停止。当我按下 F10 时，它直接进入了`afterValues[i - 2] = beforeValues[i];`行，将几个括号直接跳入一个 for 循环...我当然尝试重新启动 FF，但错误再次发生，据我所知，它至少发生在其他机器。

我的猜测是我正在使用保留关键字或其他东西。我将重写它，因为我不喜欢它的外观，但是有人知道为什么会这样吗？

火狐 14.0.1

萤火虫 1.10.3

jQuery 1.8.0

jQuery-ui 1.8.23

**编辑：**

我试过这个：

```
 try {
    if (control == "#testTakerSearchSource" && object !== undefined && object[key] !== undefined && key == "datasets" && object[key].length >= 3) {
        var afterValues = [];
        if (object[key].length == 3 && object[key][0] == "1") {
            afterValues[0] = "1,2,3";
            object[key] = afterValues;
        }
        else {
            var beforeValues = object[key];
            afterValues[0] = "1,2,3";
            for (var i = 3; i < beforeValues.length; i++) {
                afterValues[i - 2] = beforeValues[i];
            }
            object[key] = afterValues;
        }
    }
}
catch (err) {
    alert(err);
} 
```

现在，如果我在同一行设置断点，它会跳转到该`object[key] = afterValues;`行。如果我继续，则不会捕获任何异常...

**Edit2：**其他假设：Firefox 在某处的我的 js 文件版本与它实际向我显示的版本不同。这有意义吗？我重新开始了整个事情，所以我不知道会发生什么......

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-04T11:13:10.503

我认为这可能是由于代码中的一些异常。我的建议是使用错误处理修改您的代码

```
try
  {
   //your code if (control == "#testTakerSearchSource" && .........
  }
catch(err)
  {
   alert(err);
  } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-11T12:24:49.917

我最终重写了那部分，我不知道它为什么会发生，并且从那时起 Firebug 被更新了

# jquery - 加载完成中的jqgrid自定义按钮列

> ID：12261836
> 
> 赞同：0
> 
> 时间：2012-09-04T10:43:45.893
> 
> 标签：jquery, jquery-ui, jqgrid

我正在使用带有自定义按钮列的 Jqgrid。我使用 jqgrid 的加载完成方法来填充按钮。在我在加载完成中使用的代码下方。

```
var grid =  $("#grid"),
             iCol = getColumnIndexByName(grid,'custom'); // 'custom' - name of the actions column
             grid.children("tbody")
                    .children("tr.jqgrow")
                    .children("td:nth-child("+(iCol+1)+")")
                    .each(function() {
                     $("<div>",
                            {
                                title: "button1",
                                mouseover: function() {
                                    $(this).addClass('ui-state-hover');
                                },
                                mouseout: function() {
                                    $(this).removeClass('ui-state-hover');
                                },
                                click: 
                                handle your click function here
                                }
                          ).css({"margin-left": "5px", float:"left"})
                           .addClass("ui-pg-div ui-inline-save")
                           .attr('id',"customId")
                           .append('<span class="ui-button-icon-primary ui-icon ui-icon-disk"></span>')
                           .appendTo($(this).children("div")); 
                )};

var getColumnIndexByName = function(grid,columnName) {
                var cm = grid.jqGrid('getGridParam','colModel'), i=0,l=cm.length;
                for (; i<l; i+=1) {
                    if (cm[i].name===columnName) {
                        return i; // return the index
                    }
                }
                return -1;
            }; 
```

它在所有行中显示按钮。但我想让它根据第一列和第二列的值仅显示在几行中。有什么简单的方法可以让我获得第一列和第二列的值，或者我需要再次遍历“tbody”并检索结果？请帮帮我。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-04T15:35:02.147

您应该检查自定义格式化程序。

在列中，您可以在 colmodel 中定义为网格的每一行触发的格式化程序。然后您可以执行以下操作：

```
function formatterName(cellvalue, rowid, rowObject)
{
    if(rowObject[1] == "YourValue" && rowObject[2] == "YourValue"){ // index for choosing which column to check
         // run code for displaying buttons in the columns that matches your criteria
    }
} 
```

# shell - 通过 Windows 7 内置功能但通过命令行压缩特定文件夹中的整个文件

> ID：12261845
> 
> 赞同：0
> 
> 时间：2012-09-04T10:44:07.580
> 
> 标签：shell, powershell, windows-7, command-line, batch-file

我想通过命令行压缩一个文件夹及其所有内容。它应该类似于我们在`windows 7` `64 bit`. 通过右键单击任何文件夹-> 发送到-> 压缩文件夹。是否有与上述使用命令行进行压缩的过程等效。我想通过命令行来创建一个批处理文件。我不能使用任何第三方工具。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-04T11:05:03.223

本土化？不，但是您可以使用具有命令行实用程序的 7-Zip 之类的东西。顺便说一句，7-Zip 是免费的，不需要安装。

[http://www.7-zip.org/](http://www.7-zip.org/)

好吧，我发现了一些你可以用 PowerShell 尝试的东西：

[http://blogs.msdn.com/b/daiken/archive/2007/02/12/compress-files-with-windows-powershell-then-package-a-windows-vista-sidebar-gadget.aspx](http://blogs.msdn.com/b/daiken/archive/2007/02/12/compress-files-with-windows-powershell-then-package-a-windows-vista-sidebar-gadget.aspx)

[https://serverfault.com/questions/18872/how-to-zip-unzip-files-in-powershell/201604#201604](https://serverfault.com/questions/18872/how-to-zip-unzip-files-in-powershell/201604#201604)

这有命令行和 PowerShell 解决方案：

[https://superuser.com/questions/110991/can-you-zip-a-file-from-the-command-prompt-using-only-windows-built-in-capabili](https://superuser.com/questions/110991/can-you-zip-a-file-from-the-command-prompt-using-only-windows-built-in-capabili)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-21T16:51:01.240

尝试紧凑或拉链。压缩创建一个压缩文件，而 zip 与您正在做的文件夹相同 -> 发送到 -> 压缩文件夹

# javascript - jQuery 1.6 和 1.7 冲突

> ID：12261853
> 
> 赞同：-2
> 
> 时间：2012-09-04T10:44:58.913
> 
> 标签：javascript, jquery

我之前使用的是 jQuery 1.6。然后，需要一个适用于 jQuery 1.7 的幻灯片。

这两个版本在我的 HTML 页面上都存在冲突。任何避免 jQuery 冲突的解决方案都将在以下代码中得到赞赏......

```
<script src="js/jquery-1.6.4.min.js" type="text/javascript"></script> 

    <script type="text/javascript">
        $.noConflict();

        $(document).ready(function(){
            $('#nav ul').superfish();
            packages_slider();
            testimonials_slider(); 
            set_datepicker();       
            set_select();
            set_captcha(true);
            validation();
            jquery_miscellaneous();
        });
    </script>

    <script src="js/jquery-ui.1.8.16.min.js" type="text/javascript"></script>
    <script src="js/jquery.easing.1.3.js" type="text/javascript"></script>
    <script src="js/sliders.js" type="text/javascript"></script>
    <script src="js/superfish.js" type="text/javascript"></script>
    <script src="js/pdate.js" type="text/javascript"></script>
    <script src="js/jquery.datepick.pack.js" type="text/javascript"></script>
    <script src="js/jquery.selectbox-0.1.3.min.js" type="text/javascript"></script>
    <script src="js/jquery.validate.min.js" type="text/javascript"></script>
    <script src="js/jquery.form.js" type="text/javascript"></script>
    <script src="js/miscellaneous.js" type="text/javascript"></script>

    <script type="text/javascript" src="js/jquery-1.7.2.min.js"> </script>

    <script type="text/javascript">
            $.noConflict();

        jQuery(document).ready(function($){
            $('#basic-slider').advancedSlider({width: 1200, 
                                               height: 600, 

                                                }
            });
        });

        </script>
    <script type="text/javascript" src="js/jquery.transition.min.js"></script>
    <script type="text/javascript" src="js/jquery.advancedSlider.min.js"></script> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-04T10:47:57.180

不要同时使用这两个版本。只需升级到~~1.7~~ 1.8。

有一些肮脏的技巧可以让这个（部分）工作，但它会带来麻烦，大量的维护地狱，以及要下载到客户端的代码量的两倍。你真的不想走那条路。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-04T10:50:16.187

您需要阅读如何[`$.noConflict()`工作](http://api.jquery.com/jQuery.noConflict/)。您调用的第一个将`$.noConflict()`重置`$`为未定义，这意味着第一个`$(document).ready()`将出错，这`$`不是您期望的函数。

如果您保留第二个`$.noConfict()`，则在调用它之后，您将拥有以下内容；

*   `$`将指向 jQuery 1.6.4
*   `jQuery`将指向 jQuery 1.7.2

# dojo - Dojo 版本从 1.3 升级到 1.7.3

> ID：12261854
> 
> 赞同：1
> 
> 时间：2012-09-04T10:44:58.773
> 
> 标签：dojo

在将 dojo 版本从**1.3 更改为 1.7.3**时，我只是将我所有的 dojo 1.3 文件夹文件替换为 dojo 1.7.3。重建我的 Web 应用程序后，我在 dojo.js 第 15 行收到错误 hxrFailed。

我在这里面临什么问题？我是否需要更改任何现有代码。是否有任何文件可以参考所有必需的更改。

请帮助我摆脱这个问题。

谢谢， Sridhar.ch

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-11-01T00:20:31.933

我也经历过同样的事情。由于多种原因，我发生了 xhrFailed 错误。原因之一是定义中缺少一个文件，如下所示：

`define(["something/was/missing/here"],function(){});`.

发生相同错误的另一个原因是依赖路径中的文件夹被重命名但未在应用程序构建配置文件中更新。（仅当您进行自定义构建时才会出现这种情况）。

看看是不是这样！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-04T20:13:07.637

发生了很多变化，并且有一些冗长的教程可以帮助您迁移。查看Dojo 网站上的[文档选项卡：](http://dojotoolkit.org/documentation/)

1.x 到 2.0 迁移指南：
[http ://dojotoolkit.org/reference-guide/1.8/releasenotes/migration-2.0.html](http://dojotoolkit.org/reference-guide/1.8/releasenotes/migration-2.0.html)

[更新的构建系统教程： http](http://dojotoolkit.org/documentation/tutorials/1.8/build) ://dojotoolkit.org/documentation/tutorials/1.8/build

理论上，当前 (1.8) 构建系统在 2.0 之前是向后兼容的，但实际上我不确定它是否 100% 向后兼容，因为我的 1.6 构建配置文件不适用于 1.7.x 及更高版本。不过，我并没有那么努力让它工作。

# javascript - PHP的退出；在 Javascript 中？

> ID：12261858
> 
> 赞同：8
> 
> 时间：2012-09-04T10:45:09.590
> 
> 标签：javascript, jquery

PHP的退出相当于什么；在 Javascript/jQuery 中？

我需要根据某些条件提前停止我的脚本......我可以从搜索中找到的唯一答案是阻止表单提交......

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-09-04T10:48:06.773

你可以试试：

```
throw "stop execution"; 
```

使用 return 你将跳过当前函数，这就是为什么 throwing 更类似于 PHP exit();

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-04T10:46:59.457

我会用 return 语句提前完成一个函数：

```
return; 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-04T10:46:51.987

javascript 函数通过调用`return`. 通常你会在一个函数或其他东西的上下文中。事件处理程序（如`onclick`元素上的 for）也将表现得像一个函数并接受返回。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2020-07-02T12:23:29.707

从您的特定问题以及其他所有人的角度来看。请看这个。这可能会帮助你。

就放这一行

`if(exit_condition!=true)`

这也要求你的代码在里面

`$(document).ready()`

```
if(exit_condition!=true)
    $(document).ready(function() {
      // Your code
      // Your code
      // Your code
      // Your code
    }); 
```

我也遇到过这个问题，@Jamesking56 遇到过。这是我的解决方案。

# php - 是否可以编译 Symfony2assetic:dump 并部署它而不是在服务器上运行它？

> ID：12261861
> 
> 赞同：9
> 
> 时间：2012-09-04T10:45:17.343
> 
> 标签：php, deployment, symfony, assetic, capifony

我的生产服务器出现问题，`assetic:dump`Capifony 部署超时（但并非总是如此）。

在本地运行`assetic:dump`很好。也可以部署到不同的登台（功能要弱得多）服务器。

为了解决这个问题（并加快部署速度），我想知道是否可以`assetic:dump`在部署之前运行并将那些编译好的资产与部署的其余部分一起发送？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-11T19:24:36.797

这有点棘手，我也在尝试这样做（java 在我的服务器上无法正常工作，因此部署失败）。

问题是 Capifony 从源代码控制存储库部署，并且通常转储的资产不在存储库中（它们不应该）。

所以我想这样做的唯一方法是创建一个 Capistrano 任务（Capifony 基于 Capistrano），它将转储资产并将它们同步到服务器上。

**编辑：**这是我的尝试 **编辑：**它确实有效，自从我回答了这个问题以来，我一直在使用它。

我确信有很多可能的改进，我不是一个 ruby​​ 人，我也不是一个 shell 脚本人。

在您的 deploy.rb 中，您可以添加两个任务：

```
before "deploy:update_code", "deploy:dump_assetic_locally"
after "deploy:update_code", "deploy:rsync_local_assets_to_server" 
```

以及与这些任务相关的代码（在同一个文件中）：

```
namespace :deploy do
  task :dump_assetic_locally, :roles => :web do
    run_locally "php app/console assetic:dump --env=prod"
  end

  task :rsync_local_assets_to_server, :roles => :web do
    finder_options = {:except => { :no_release => true }}
    find_servers(finder_options).each {|s| run_locally "rsync -az --delete --rsh='ssh -p #{ssh_port(s)}' #{local_web_path}/js/ #{rsync_host(s)}:#{release_path}/web/js/" }
    find_servers(finder_options).each {|s| run_locally "rsync -az --delete --rsh='ssh -p #{ssh_port(s)}' #{local_web_path}/css/ #{rsync_host(s)}:#{release_path}/web/css/" }
  end

  def local_web_path
    File.expand_path("web")
  end

  def rsync_host(server)
    :user ? "#{user}@#{server.host}" : server.host
  end

  def ssh_port(server)
    server.port || ssh_options[:port] || 22
  end

end 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-05T07:00:12.380

该命令`assetic:dump`从当前环境中可用的所有捆绑包中获取资产并将它们放置在`web/bundles`（或您告诉它的位置）。在本地执行此操作然后仅移动文件应该没有问题。

您应该运行带有`env=prod`选项的命令，以确保生成生产中所需的所有捆绑包。您可能还想`web/bundles`在运行命令之前清理它，以便仅在开发中使用的捆绑包的资产（例如探查器）不存在。

我只需在本地运行命令进行测试，从生产中下载资产并进行比较。我现在想不出任何东西，因为 css 和 js 被提供给客户端，并且在不同的机器上生成时不应该有所不同，但我可能错了。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2014-08-02T16:56:29.550

很简单的添加到你的`deploy.rb`

```
set :dump_assetic_assets, true 
```

# css - 这种 CSS 行为的技术定义是什么？

> ID：12261864
> 
> 赞同：-4
> 
> 时间：2012-09-04T10:45:27.500
> 
> 标签：css, html, browser

转到以下 Foundation CSS 框架文档网址： http: [//foundation.zurb.com/docs/navigation.php](http://foundation.zurb.com/docs/navigation.php)

在名为**Nav Bar**的部分中，您将看到水平导航栏的示例。现在尝试逐渐最小化浏览器的窗口，当窗口最小化到足够的程度（像移动设备分辨率一样）时，您会注意到水平导航栏变成了垂直导航栏。我需要知道菜单上发生的这种行为的技术定义。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-04T10:48:32.423

我相信您正在寻找[响应式网页设计](http://en.wikipedia.org/wiki/Responsive_Web_Design)；这是根据用户代理的视口进行调整的设计。

例如， Twitter 的[引导框架](http://twitter.github.com/bootstrap/scaffolding.html#responsive)就内置了响应式设计。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-04T10:49:43.007

我已经使用`width: auto; float:left`每个菜单项重现了这种效果，并且在调整大小事件中，我正在检查所有项目是否都在顶部对齐。如果项目未对齐，我将修改为`width:100%`

这是我得到的一个例子：[www.gabitzish.com](http://www.gabitzish.com)（见菜单）

# database - ORM 和 ODM 有什么区别？

> ID：12261866
> 
> 赞同：175
> 
> 时间：2012-09-04T10:45:37.260
> 
> 标签：database, orm, odm

我试图弄清楚 ORM 和 ODM 之间的区别是什么，据我了解这个概念，ORM（对象关系映射器）映射数据之间的关系，而 ODM（对象文档映射器）处理文档。我是否正确假设 mySQL 是 ORM 的一个示例，而 MongoDB 是 ODM 的一个示例？

我相信你可以看到，我对这个概念的理论不太熟悉。有人可以澄清两者之间的区别吗？

* * *

## 回答 #1

> 赞同：196
> 
> 时间：2012-09-04T10:50:40.843

MySQL 是关系数据库的一个示例——您将使用 ORM 在代码中的对象和数据的关系表示之间进行转换。

[ORM的](http://nhibernate.info/)示例包括 nHibernate 、[Entity Framework](http://msdn.microsoft.com/en-us/data/ef.aspx)、[Dapper](http://code.google.com/p/dapper-dot-net/)等等……

MongoDB 是文档数据库的一个示例 - 您将使用 ODM 在代码中的对象和数据的文档表示之间进行转换（如果需要）。

[Mandango](https://github.com/mandango/mandango)是 MongoDB 的 ODM 示例。

* * *

## 回答 #2

> 赞同：32
> 
> 时间：2012-09-04T10:51:11.547

对象模型和关系数据库之间的 ORM 映射。对象模型和文档数据库之间的 ODM 映射。MySQL 不是 ORM，它是一个关系数据库，更具体地说，是一个 SQL 数据库。MongoDB 不是 ODM，它是一个文档数据库。

* * *

## 回答 #3

> 赞同：12
> 
> 时间：2014-10-18T06:06:18.403

本质上，ORM 使用 ODBC、JDBC 或 OLEDB 等 SQL 数据库驱动程序将对象表示法转换为关系表示法，而 ODM 使用 JSON 或 JSONB api 将对象表示法转换为文档表示法。

引擎盖下有不同类型的实现。

PS：JSONB 是一种 JSON 文本文档表示法，以 MongoDB 使用的二进制格式存储。

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2019-01-19T09:57:46.253

Mongoose 是 MongoDB 的 ODM（对象数据模型）的一个很好的示例，您可以在其中直接对对象执行操作，并将其转换为适当的查询和模式。它可以在这里找到[https://mongoosejs.com/](https://mongoosejs.com/)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2022-02-13T20:13:35.270

要了解 ORM 和 ODM 之间的区别，我认为首先回顾一下关系数据库和文档数据库之间的区别会很有帮助。我会以一种挥手的方式这样做。

关系数据库是您可能习惯使用的数据库。将数据存储在表中的一种，如下所示：

[![在此处输入图像描述](../Images/df7cd8e7c03d8c6d92fd9aa97e879d1c.png)](https://i.stack.imgur.com/2CwlP.png)

关系数据库的常见示例是 MySQL、Postgres 和 SQLite。要查询关系数据库，您将使用 SQL。

文档数据库呢？好吧，对于文档数据库，数据存储在 JSON 中而不是表中。

[![在此处输入图像描述](../Images/03e446939f8c0b9d045511686c1f34fa.png)](https://i.stack.imgur.com/Igxz9.png)

实际上，这不是 100% 准确的。MongoDB[解释](https://www.mongodb.com/document-databases)：

> 文档将数据存储在字段值对中。这些值可以是多种类型和结构，包括字符串、数字、日期、数组或对象。文档可以以 JSON、BSON 和 XML 等格式存储。

好的，那么现在，什么是 ORM，什么是 ODM，它们如何比较？

好吧，ORM 代表......实际上，我会让[这个答案](https://stackoverflow.com/a/1279678/1927876)解释一下：

> 对象关系映射 (ORM) 是一种技术，可让您使用面向对象的范例从数据库中查询和操作数据。在谈论 ORM 时，大多数人指的是实现对象关系映射技术的库，因此有“一个 ORM”这个短语。

基本上，在您的应用程序代码中，您通常处理的是对象。但是在您的数据库中，您有表。ORM 是在两者之间进行映射的库。正如维基百科[解释的](https://en.wikipedia.org/wiki/Object%E2%80%93relational_mapping)那样：

> 这实际上创建了一个可以在编程语言中使用的“虚拟对象数据库”。

这是一个例子。[Active Record](https://guides.rubyonrails.org/active_record_basics.html)是 Ruby on Rails 的流行 ORM。使用 Active Record，您可以执行类似的操作`User.find_by(name: 'David')`并返回类似`{ id: 1, name: 'David' }`. 所以 ORM 正在为你做以下映射：

[![在此处输入图像描述](../Images/38e13ff6048165a8ad52636b48a794a0.png)](https://i.stack.imgur.com/S4OoJ.png)

然后使用 ODM，它基本上做同样的事情，除了文档数据库。它从应用程序代码中的对象映射到数据库中的文档。[Mongoose](https://mongoosejs.com/)是 ODM 的一个很好的例子。它适用于 MongoDB。

# android - 打开我的活动 3 秒后，SoundPool 未播放

> ID：12261867
> 
> 赞同：1
> 
> 时间：2012-09-04T10:45:42.017
> 
> 标签：android, audio, soundpool

我正在尝试在用户单击按钮时播放声音，如果我在活动打开的前 3-5 秒内单击按钮，效果很好，但是如果我等待超过 3-5 秒，则没有声音. 我也没有收到关于声音的任何错误....

任何想法都会被应用！

更新：这只发生在我的 HTC 上。如果我在三星 Galaxy S 2 上尝试它，它工作得很好！！！！

在我的 logcat 中说：“AudioHardwareQSD：AudioHardware pcm 播放将进入待机状态”任何解决方法？

```
@Override
protected void onCreate(Bundle savedInstanceState)
{

    mSoundPoolMap = new HashMap<Integer, Integer>();
    mSoundPool = new SoundPool(16, AudioManager.STREAM_RING, 0);
    mAudioManager= (AudioManager) mcontext.getSystemService(Context.AUDIO_SERVICE);

    mSoundPoolMap.put(1, mSoundPool.load(mcontext, R.raw.tap, 1));}

       @Override
        public void onClick(View v)
        {   
            float streamVolume = mAudioManager.getStreamVolume(AudioManager.STREAM_RING);
            streamVolume = streamVolume / mAudioManager.getStreamMaxVolume(AudioManager.STREAM_RING);
            mSoundPool.play(mSoundPoolMap.get(1), streamVolume, streamVolume, 1, 0, 1);} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-05T09:41:17.390

这是我如何让它发挥作用的方法不是最好的，但它确实有效......

检查设备是否来自 HTC，然后创建一个播放声音的虚拟通知。您还必须确保您的文件是 MP3 而不是 wav 或 OGG ...

```
public static void playSound(int index)
{

    String m_strManufacture = Build.MANUFACTURER;
    Log.i(TAG, "Device Name: " + m_strManufacture);
    if (m_strManufacture.equals("HTC"))
    {

        NotificationManager notificationManager = (NotificationManager) mContext.getSystemService(Context.NOTIFICATION_SERVICE);
        Notification notification = new Notification();
        Intent notificationIntent = new Intent(mContext, mContext.getClass());
        // set intent so it does not start a new activity
        notificationIntent.setFlags(Intent.FLAG_ACTIVITY_CLEAR_TOP | Intent.FLAG_ACTIVITY_SINGLE_TOP);
        // PendingIntent intent = PendingIntent.getActivity(mContext, 0, notificationIntent, 0);
        // mContext.getResources().getResourceName(R.raw.ringer);
        notification.sound = Uri.parse("android.resource://com.yourpackages/raw/" + sound);
        notification.flags |= Notification.FLAG_AUTO_CANCEL;
        notificationManager.notify(0, notification);

    }
    else {//Do the soundpool work....} 
```

# android - Android：WebView在中心加载图像

> ID：12261873
> 
> 赞同：6
> 
> 时间：2012-09-04T10:45:59.693
> 
> 标签：android, webview

我想在 web 视图中加载图像，但它显示在 web 视图的 top_left 上。我的照片是在互联网上的，不是本地的。

```
gifView.loadUrl(mImageUrl); 
gifView.setWebViewClient(new WebViewClient() {

        @Override
        public void onPageFinished(WebView view, String url) {
            view.getSettings().setLoadsImagesAutomatically(true);
            if (mProgressBar != null) {
                mProgressBar.setVisibility(View.GONE);
            }
        }

        @Override
        public void onPageStarted(WebView view, String url, Bitmap favicon) {
            if (mProgressBar != null) {
                mProgressBar.setVisibility(View.VISIBLE);
            }
        }

    }); 
```

这是我的 xml:::

```
 <WebView
                     android:id="@+id/gif_image"
                     android:background="@null"
                     android:layout_gravity="center"

                    android:layout_width="fill_parent"
                    android:layout_height="fill_parent" /> 
```

编辑：我用过：

```
 String HTML_FORMAT = "<html><body style=\"text-align: center; background-color: null; vertical-align: middle;\"><img src = \"%s\" /></body></html>";

         final String html = String.format(HTML_FORMAT, mImageUrl);

         gifView.loadDataWithBaseURL("", html, "text/html", "UTF-8", ""); 
```

但我的图像只有水平居中，如何居中

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-09-04T10:52:07.730

试试这个。

```
myWebView.loadData("<html><head><style type='text/css'>body{margin:auto auto;text-align:center;} img{width:100%25;} </style></head><body><img src='www.mysite.com/myimg.jpeg'/></body></html>" ,"text/html",  "UTF-8"); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2016-01-01T19:55:44.703

我通过使用一些代码和 xml 做到了：

```
<WebView            android:id="@+id/webview"
                    android:layout_width="fill_parent"
                    android:layout_height="251dp"
                    android:layout_below="@+id/download"
                    android:layout_marginTop="20dp"
                    android:layout_centerHorizontal="true"
                    android:layout_centerVertical="true"/> 
```

而这个（水平中心）：

```
WebView loading = (WebView)rootView.findViewById(R.id.webview);
                                loading.getSettings().setDefaultZoom(WebSettings.ZoomDensity.FAR);
                                loading.loadDataWithBaseURL("file:///android_asset/", "<html><center><img src=\"done.png\"></html>", "text/html", "utf-8", ""); 
```

或者这个（水平和垂直中心）：

```
WebView loading = (WebView)rootView.findViewById(R.id.webview);
                            loading.getSettings().setDefaultZoom(WebSettings.ZoomDensity.FAR);
                            loading.loadDataWithBaseURL("file:///android_asset/", "<html>\n" +
                                    "<body bgcolor=\"white\">\n" +
                                    "    <table width=\"100%\" height=\"100%\">\n" +
                                    "        <tr>\n" +
                                    "            <td align=\"center\" valign=\"center\">\n" +
                                    "                <img src=\"loading.gif\">\n" +
                                    "            </td>\n" +
                                    "        </tr>\n" +
                                    "    </table>\n" +
                                    "</body>", "text/html", "utf-8", ""); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-05-03T07:34:17.553

尝试这样的事情：

```
Display display = getWindowManager().getDefaultDisplay();
int width = display.getWidth();

String data = "<body><center><img width=\"" + width + "\" src=\"" + url
              + "\" /></center></body></html>";
webview.loadData(data, "text/html", null); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-02-11T03:57:30.237

试试这个，这将使内容适合您的 webview

```
WebView web = (WebView) findViewById(R.id.gif_image);
web.getSettings().setDefaultZoom(ZoomDensity.FAR); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-04T10:53:33.973

你使用线性布局吗？因此，您将需要使用父线性布局的重力属性。android中重力的一个很好的解释：http: [//sandipchitale.blogspot.com/2010/05/linearlayout-gravity-and-layoutgravity.html](http://sandipchitale.blogspot.com/2010/05/linearlayout-gravity-and-layoutgravity.html)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2020-08-25T12:02:46.623

原因不在webview中，是html代码。W3c 希望“文本对齐”不再对图像等块元素产生影响。

您可以在[center-image-using-text-align-center阅读更多内容](https://stackoverflow.com/a/7055404/2377961)

因此，要么制作图像`display:inline`，要么以不同的方式将其居中，例如

```
.center {
  left: 50%;
  margin-left: -50%;
} 
```

# ios - CALayer内存管理内存

> ID：12261876
> 
> 赞同：0
> 
> 时间：2012-09-04T10:46:07.517
> 
> 标签：ios, xcode

我有 60 多个 UIImageViews，我对它们中的每一个都应用了一个 CLlayer，方法如下：

```
image1.layer.cornerRadius = 6.0;
                image1.layer.masksToBounds = YES; 
```

CLLayer 使用多少内存？由于我这样做是为了在图像中包含图像子视图（在图像外部不可见，而在不应用图层的情况下可见），是否最好将其删除并使用其他代码？如果是这样？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-04T11:30:50.170

让系统担心内存管理。60 次观看次数并不多（可能有 6000 次）。每个 UIImageView 都由一个 UIImage 和一个 CGImageRef 支持，并且系统可以根据需要清除 CGImageRef 以腾出空间，因为它可以使用 UIImage 中的缓存信息重新加载它。

如果你想分析你的内存使用情况，那么在 Instruments 中使用 ObjectAlloc - 如果你只使用所有 Instruments 默认值，你仍然会得到很多有用的信息。

# scala - Scalaz optionT 变压器似乎因类型别名而失败

> ID：12261882
> 
> 赞同：2
> 
> 时间：2012-09-04T10:46:33.360
> 
> 标签：scala, compiler-errors, scalaz

似乎使用类型别名会混淆 Scala 类型推断器或编译器。确实试图编译

```
import scalaz.OptionT.optionT
type Foo[A] = Option[Option[A]]
val x: Foo[Int] = Some(Some(3))
optionT(x) 
```

导致奇怪的错误

```
java.lang.IllegalArgumentException: transpose requires all collections have the same size 
```

由于我对 Scala 的经验有限，我不确定是否应该为此提交错误，或者这是否是预期的行为。

> 这真的是一个错误还是预期的行为？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-04T11:20:25.040

刚刚测试了自己，IllegalArgumentException 是编译器的救助，这将是一个错误。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-04T11:28:36.170

我也对此进行了测试，它看起来确实是一个错误，你应该向 scala 团队报告。但是，您可以通过给编译器提示来解决此问题：

```
val x: Foo[Int] = Some(Some(4))
val y = optionT[Option](x)
y: scalaz.OptionT[Option,Int] = OptionT(Some(Some(3))) 
```

# java - 在 EJB 中调用静态实例的方法

> ID：12261884
> 
> 赞同：1
> 
> 时间：2012-09-04T10:46:41.393
> 
> 标签：java, static, ejb, instance-variables, simultaneous-calls

我猜测我们的代码库中有不正确的代码，但我不确定。所以我们得到了这样的 EJB：

```
@Stateless
public class MyEjb {
  private static Something sg = new Something();
  public void doSomething() {
    sg.execute();
  }
} 
```

类 Something 是一个普通类：

```
public class Something {
  public void execute() {
    ...
  }
} 
```

由于 MyEJB 是无状态 EJB，所以方法 doSomething 可以同时调用更多次。

我的问题来了：如果 doSomething() 同时被调用了两次，那么其中一个调用将被阻塞，直到第一次调用完成？我的猜测是它被阻止了，因为只有一个静态实例。
如果我是对的，上面的代码并不好，因为类 'Something' 的方法 'execute' 是我的 EJB 的瓶颈。

谢谢，V。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-04T10:54:07.923

两个调用将同时运行，除非您使用“同步”块或“写锁”来限制访问。

# python - 如何获取 np.array 中的元素数量？

> ID：12261885
> 
> 赞同：0
> 
> 时间：2012-09-04T10:46:43.077
> 
> 标签：python, arrays, numpy, python-2.6

假设有一个数组

```
(1) x=np.array([[1,2],[1,2],[1,2]]) 
```

和第二个数组

```
(2) y=np.array([[1],[1,2],[1,2,3]]) 
```

该命令`size(x)`返回沿每个轴的所有元素的总数。在这种情况下`6`。但是，`size(y)`返回`3`. 这一定是因为 numpy 在这种情况下将 (2) 解释为沿一个轴的三个元素（三个子数组），尽管`shape(y)`返回`(3, )`. 我现在的问题是：如何让 numpy 将 (2) 解释为具有三个轴的数组，以便`size(y)`返回所有原子元素的总数，即`6`？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-04T10:56:32.257

I don't think it's possible to get the number of elements from `y` without looping over the objects.

The problem is that the elements of `y` are not numbers, they are objects (lists). Numpy does not support lists of lists and therefore it stores it as a 1-dimensional array of objects. I don't think there are Numpy methods to get the total number of elements in `y`.

# background - 在运行时切换 cocos2d 视网膜显示背景。

> ID：12261893
> 
> 赞同：0
> 
> 时间：2012-09-04T10:47:06.807
> 
> 标签：background, cocos2d-iphone, retina-display, shared-cache

我的应用中有背景，但单击按钮应该会更改它并使用不同的背景。

我无法将它们全部添加到 sharedTextureCache 中，因为每个缓存的大小都大于 16MB，而且我有 30 个不同的背景。

在没有加载时间的情况下切换背景的最佳方法是什么？我不希望用户在单击该按钮时等待。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-05T13:20:45.087

删除所有未使用的数据。或者质地...

```
[[CCDirector sharedDirector] purgeCachedData];
[[CCTextureCache sharedTextureCache] removeAllTextures];
[CCTextureCache purgeSharedTextureCache];
[[CCSpriteFrameCache sharedSpriteFrameCache] removeSpriteFrames];
[CCSpriteFrameCache purgeSharedSpriteFrameCache]; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-04T11:16:37.670

如果您知道接下来会显示什么背景，您可以预先加载它。每个 Retina 设备可以使用大约 100 兆字节的内存（大约 5 个 2048x2048 的 spritesheets）。在这种情况下，您开始收到内存警告，但应用程序将稳定运行。您可以异步进行的所有预加载到共享纹理缓存。只是不要忘记通过调用清理未使用的纹理

```
[[CCTextureCache sharedTextureCache] removeUnusedTextures]; 
```

强制卸载不必要的纹理。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-05T16:15:31.133

我设法不减慢应用程序速度的唯一方法是使用这条线：

```
[_background setTexture: [[CCTexture2D alloc] initWithImage:...]] 
```

当我尝试使用共享纹理缓存时，即使是异步的，应用程序也会变慢。:-O

# html - 如何在两个表格之间添加垂直线？

> ID：12261898
> 
> 赞同：4
> 
> 时间：2012-09-04T10:47:32.197
> 
> 标签：html, html-table

这是标记。我想在两个表之间添加一条垂直线。我不想在这里使用图像。我需要一个纯 html 解决方案。

```
<div>
    <table width="50%" style="float:left">
        <tr>
            <td><p class="dotted">row 1, cell 1</p></td>
            <td><p class="dotted">row 1, cell 2</p></td>
        </tr>
        <tr>
            <td><p class="dotted">row 2, cell 1</p></td>
            <td><p class="dotted">row 2, cell 2</p></td>
        </tr>
    </table>

    <table width="50%" style="float:left">
        <tr>
            <td><p class="dotted">row 1, cell 1</p></td>
            <td><p class="dotted">row 1, cell 2</p></td>
        </tr>
        <tr>
            <td><p class="dotted">row 2, cell 1</p></td>
            <td><p class="dotted">row 2, cell 2</p></td>
        </tr>
    </table>
</div> 
```

像这张图片的东西![在此处输入图像描述](../Images/918955cbe88044c714a0ea081517a6fc.png)

这是小提琴[http://jsfiddle.net/a2cR8/](http://jsfiddle.net/a2cR8/)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-04T10:54:43.607

如何将其中一张表的左边框设置为 1px？

更新：根据您的图像，试试这个......（这可能不是最好的方法，但它对我有用......）

[http://jsfiddle.net/jreljac/SvHqR/3/](http://jsfiddle.net/jreljac/SvHqR/3/)

```
<table width="45%" style="float:left" class="tdDotted">
    <tr>
        <td ><p class=" entityHeader">Study Title</p></td>
        <td><p >row 1, cell 2</p></td>
    </tr>
    <tr>
        <td><p class=" entityHeader">Start Date</p></td>
        <td><p >row 2, cell 2</p></td>
    </tr>
</table>
<div style="width: 3%; float: left;">&nbsp;</div>
<div style="width: 3%; border-right: 1px solid red; float: left; height: 100%; margin-top: 5px;">&nbsp;</div>
<div style="width: 3%; float: left;">&nbsp;</div>
<table width="45%" style="float:left;" class="tdDotted">
    <tr>
        <td ><p class=" entityHeader">Project Type</p></td>
        <td><p >row 1, cell 2</p></td>
    </tr>
    <tr>
        <td><p class=" entityHeader">Project Subtype</p></td>
        <td><p >row 2, cell 2</p></td>
    </tr>
</table> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-04T12:15:35.907

[在这里](http://jsfiddle.net/RmMUa/)检查这个小提琴。希望能帮助到你。

**CSS**

```
.parentTable{
    width: 100%;
    border: 1px solid #b4b4b4;
}
.parentTable tr td{
    padding: 5px 30px;
}
.parentTable tr td.header{
    background: #265ca5;
}
.parentTable tr td.spec{
    width: 1px;
    padding: 0;
    border: none;
    background: #b4b4b4;
}
.childTable{
    width: 100%;
}
.childTable tr td{
    border-bottom: 1px dashed;
}
.childTable tr:last-child td{
    border: none;
} 
```

**HTML**

```
<table class="parentTable">
<tr>
    <td class="header" colspan="3">&nbsp;</td>
</tr>
<tr>
    <td>
        <table class="childTable">
            <tr>
                <td>
                    <p class=" entityHeader">Study Title</p>
                </td>
                <td>
                    <p>row 1, cell 2</p>
                </td>
            </tr>
            <tr>
                <td><p class=" entityHeader">Start Date</p></td>
                <td><p >row 2, cell 2</p></td>
            </tr>
        </table>
    </td>
    <td class="spec">
        &nbsp;
    </td>
    <td>
        <table class="childTable">
            <tr>
                <td ><p class=" entityHeader">Project Type</p></td>
                <td><p >row 1, cell 2</p></td>
            </tr>
            <tr>
                <td><p class=" entityHeader">Project Subtype</p></td>
                <td><p >row 2, cell 2</p></td>
            </tr>
        </table>
    </td>
</tr> 
```

​</p>

# java - 无法使用 @ContextConfiguration(classes={ ... }) 加载 ApplicationContext

> ID：12261899
> 
> 赞同：3
> 
> 时间：2012-09-04T10:47:33.950
> 
> 标签：java, spring, testing, maven, applicationcontext

我正在尝试使用 Java 和注释配置运行一些弹簧测试。我在测试包中有两个配置类：

```
@Configuration
@ComponentScan(basePackages = "com.mypackages")
public class TestConfig {

    @Bean
    public MyService getMyService() {
        return new MyServiceImpl();
    }

}

@Configuration
@EnableTransactionManagement
public class JpaTestConfig {

    @Bean
    public LocalContainerEntityManagerFactoryBean entityManagerFactoryBean(){

        LocalContainerEntityManagerFactoryBean lcemfb
            = new LocalContainerEntityManagerFactoryBean();

        lcemfb.setDataSource(this.dataSource());
        lcemfb.setPackagesToScan(new String[] {"com.mypackages"});
        lcemfb.setPersistenceUnitName("MyTestPU");

        HibernateJpaVendorAdapter va = new HibernateJpaVendorAdapter();
        lcemfb.setJpaVendorAdapter(va);

        Properties ps = new Properties();
        ps.put("hibernate.dialect", "org.hibernate.dialect.HSQLDialect");
        ps.put("hibernate.hbm2ddl.auto", "create");
        lcemfb.setJpaProperties(ps);

        lcemfb.afterPropertiesSet();

        return lcemfb;

    }

    @Bean
    public DataSource dataSource(){

        DriverManagerDataSource ds = new DriverManagerDataSource();

        ds.setDriverClassName("org.hsqldb.jdbcDriver");
        ds.setUrl("jdbc:hsqldb:mem:testdb");
        ds.setUsername("sa");
        ds.setPassword("");

        return ds;

    }

    @Bean
    public PlatformTransactionManager transactionManager(){

        JpaTransactionManager tm = new JpaTransactionManager();

        tm.setEntityManagerFactory(
            this.entityManagerFactoryBean().getObject() );

        return tm;

    }

    @Bean
    public PersistenceExceptionTranslationPostProcessor exceptionTranslation(){
        return new PersistenceExceptionTranslationPostProcessor();
    }

} 
```

我的测试课是：

```
@RunWith(SpringJUnit4ClassRunner.class)
@ContextConfiguration(classes={ JpaTestConfig.class, TestConfig.class })
public class MyPersistenceDAOTest {

    @Autowired
    private MyPersistenceDAO myDAO;

    public MyPersistenceDAOTest() {
    }

    @Test
    public void testAgainstDAONullity() {

        assertNotNull(myDAO);

    }

    @Test
    public void testCreateMilliTimeItem() {

        // This operation should not thrown an Exception
        long id = myDAO.createMilliTimeItem();

    }

    @Test
    public void testGetMilliTimeItem() {

        long id = myDAO.createMilliTimeItem();
        MilliTimeItem retr = myDAO.getMilliTimeItem(id);

        assertNotNull(retr);
        assertEquals(id,retr.getID());

    }

} 
```

我收到以下错误消息：

```
Tests in error: 
  testAgainstDAONullity(com.mypackages.DAO.MyPersistenceDAOTest): Failed to load ApplicationContext
  testCreateMilliTimeItem(com.mypackages.DAO.MyPersistenceDAOTest): Failed to load ApplicationContext
  testGetMilliTimeItem(com.mypackages.DAO.MyPersistenceDAOTest): Failed to load ApplicationContext 
```

我错过了什么？谢谢。

**更新**

我设法检索堆栈跟踪：

```
testAgainstDAONullity(com.mypackages.DAO.MyPersistenceDAOTest)  Time elapsed: 1.713 sec  <<< ERROR!
java.lang.IllegalStateException: Failed to load ApplicationContext
    at org.springframework.test.context.TestContext.getApplicationContext(TestContext.java:157)
    at org.springframework.test.context.support.DependencyInjectionTestExecutionListener.injectDependencies(DependencyInjectionTestExecutionListener.java:109)
    at org.springframework.test.context.support.DependencyInjectionTestExecutionListener.prepareTestInstance(DependencyInjectionTestExecutionListener.java:75)
    at org.springframework.test.context.TestContextManager.prepareTestInstance(TestContextManager.java:321)
    at org.springframework.test.context.junit4.SpringJUnit4ClassRunner.createTest(SpringJUnit4ClassRunner.java:211)
    at org.springframework.test.context.junit4.SpringJUnit4ClassRunner$1.runReflectiveCall(SpringJUnit4ClassRunner.java:288)
    at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:15)
    at org.springframework.test.context.junit4.SpringJUnit4ClassRunner.methodBlock(SpringJUnit4ClassRunner.java:290)
    at org.springframework.test.context.junit4.SpringJUnit4ClassRunner.runChild(SpringJUnit4ClassRunner.java:231)
    at org.junit.runners.BlockJUnit4ClassRunner.runChild(BlockJUnit4ClassRunner.java:47)
    at org.junit.runners.ParentRunner$3.run(ParentRunner.java:231)
    at org.junit.runners.ParentRunner$1.schedule(ParentRunner.java:60)
    at org.junit.runners.ParentRunner.runChildren(ParentRunner.java:229)
    at org.junit.runners.ParentRunner.access$000(ParentRunner.java:50)
    at org.junit.runners.ParentRunner$2.evaluate(ParentRunner.java:222)
    at org.springframework.test.context.junit4.statements.RunBeforeTestClassCallbacks.evaluate(RunBeforeTestClassCallbacks.java:61)
    at org.springframework.test.context.junit4.statements.RunAfterTestClassCallbacks.evaluate(RunAfterTestClassCallbacks.java:71)
    at org.junit.runners.ParentRunner.run(ParentRunner.java:300)
    at org.springframework.test.context.junit4.SpringJUnit4ClassRunner.run(SpringJUnit4ClassRunner.java:174)
    at org.apache.maven.surefire.junit4.JUnit4TestSet.execute(JUnit4TestSet.java:53)
    at org.apache.maven.surefire.junit4.JUnit4Provider.executeTestSet(JUnit4Provider.java:123)
    at org.apache.maven.surefire.junit4.JUnit4Provider.invoke(JUnit4Provider.java:104)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
    at java.lang.reflect.Method.invoke(Method.java:597)
    at org.apache.maven.surefire.util.ReflectionUtils.invokeMethodWithArray(ReflectionUtils.java:164)
    at org.apache.maven.surefire.booter.ProviderFactory$ProviderProxy.invoke(ProviderFactory.java:110)
    at org.apache.maven.surefire.booter.SurefireStarter.invokeProvider(SurefireStarter.java:175)
    at org.apache.maven.surefire.booter.SurefireStarter.runSuitesInProcessWhenForked(SurefireStarter.java:107)
    at org.apache.maven.surefire.booter.ForkedBooter.main(ForkedBooter.java:68)
Caused by: org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'exceptionTranslation' defined in class com.mypackages.Configuration.JpaTestConfig: Initialization of bean failed; nested exception is org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'entityManagerFactoryBean' defined in class com.mypackages.Configuration.JpaTestConfig: Instantiation of bean failed; nested exception is org.springframework.beans.factory.BeanDefinitionStoreException: Factory method [public org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean com.mypackages.Configuration.JpaTestConfig.entityManagerFactoryBean()] threw exception; nested exception is java.lang.ClassFormatError: Absent Code attribute in method that is not native or abstract in class file javax/validation/Validation
    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:527)
    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:456)
    at org.springframework.beans.factory.support.AbstractBeanFactory$1.getObject(AbstractBeanFactory.java:294)
    at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:225)
    at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:291)
    at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:197)
    at org.springframework.context.support.AbstractApplicationContext.registerBeanPostProcessors(AbstractApplicationContext.java:733)
    at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:454)
    at org.springframework.test.context.support.AbstractGenericContextLoader.loadContext(AbstractGenericContextLoader.java:103)
    at org.springframework.test.context.support.AbstractGenericContextLoader.loadContext(AbstractGenericContextLoader.java:1)
    at org.springframework.test.context.support.DelegatingSmartContextLoader.loadContext(DelegatingSmartContextLoader.java:228)
    at org.springframework.test.context.TestContext.loadApplicationContext(TestContext.java:124)
    at org.springframework.test.context.TestContext.getApplicationContext(TestContext.java:148)
    ... 30 more
Caused by: org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'entityManagerFactoryBean' defined in class com.mypackages.Configuration.JpaTestConfig: Instantiation of bean failed; nested exception is org.springframework.beans.factory.BeanDefinitionStoreException: Factory method [public org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean com.mypackages.Configuration.JpaTestConfig.entityManagerFactoryBean()] threw exception; nested exception is java.lang.ClassFormatError: Absent Code attribute in method that is not native or abstract in class file javax/validation/Validation
    at org.springframework.beans.factory.support.ConstructorResolver.instantiateUsingFactoryMethod(ConstructorResolver.java:581)
    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.instantiateUsingFactoryMethod(AbstractAutowireCapableBeanFactory.java:1015)
    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBeanInstance(AbstractAutowireCapableBeanFactory.java:911)
    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:485)
    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:456)
    at org.springframework.beans.factory.support.AbstractBeanFactory$1.getObject(AbstractBeanFactory.java:294)
    at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:225)
    at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:291)
    at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:197)
    at org.springframework.beans.factory.support.DefaultListableBeanFactory.getBeansOfType(DefaultListableBeanFactory.java:424)
    at org.springframework.beans.factory.BeanFactoryUtils.beansOfTypeIncludingAncestors(BeanFactoryUtils.java:277)
    at org.springframework.dao.support.PersistenceExceptionTranslationInterceptor.detectPersistenceExceptionTranslators(PersistenceExceptionTranslationInterceptor.java:139)
    at org.springframework.dao.support.PersistenceExceptionTranslationInterceptor.<init>(PersistenceExceptionTranslationInterceptor.java:79)
    at org.springframework.dao.annotation.PersistenceExceptionTranslationAdvisor.<init>(PersistenceExceptionTranslationAdvisor.java:70)
    at org.springframework.dao.annotation.PersistenceExceptionTranslationPostProcessor.setBeanFactory(PersistenceExceptionTranslationPostProcessor.java:103)
    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.invokeAwareMethods(AbstractAutowireCapableBeanFactory.java:1475)
    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1443)
    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:519)
    ... 42 more
Caused by: org.springframework.beans.factory.BeanDefinitionStoreException: Factory method [public org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean com.mypackages.Configuration.JpaTestConfig.entityManagerFactoryBean()] threw exception; nested exception is java.lang.ClassFormatError: Absent Code attribute in method that is not native or abstract in class file javax/validation/Validation
    at org.springframework.beans.factory.support.SimpleInstantiationStrategy.instantiate(SimpleInstantiationStrategy.java:169)
    at org.springframework.beans.factory.support.ConstructorResolver.instantiateUsingFactoryMethod(ConstructorResolver.java:570)
    ... 59 more
Caused by: java.lang.ClassFormatError: Absent Code attribute in method that is not native or abstract in class file javax/validation/Validation
    at java.lang.ClassLoader.defineClass1(Native Method)
    at java.lang.ClassLoader.defineClassCond(ClassLoader.java:631)
    at java.lang.ClassLoader.defineClass(ClassLoader.java:615)
    at java.security.SecureClassLoader.defineClass(SecureClassLoader.java:141)
    at java.net.URLClassLoader.defineClass(URLClassLoader.java:283)
    at java.net.URLClassLoader.access$000(URLClassLoader.java:58)
    at java.net.URLClassLoader$1.run(URLClassLoader.java:197)
    at java.security.AccessController.doPrivileged(Native Method)
    at java.net.URLClassLoader.findClass(URLClassLoader.java:190)
    at java.lang.ClassLoader.loadClass(ClassLoader.java:306)
    at sun.misc.Launcher$AppClassLoader.loadClass(Launcher.java:301)
    at java.lang.ClassLoader.loadClass(ClassLoader.java:247)
    at org.hibernate.service.classloading.internal.ClassLoaderServiceImpl$1.findClass(ClassLoaderServiceImpl.java:94)
    at java.lang.ClassLoader.loadClass(ClassLoader.java:306)
    at java.lang.ClassLoader.loadClass(ClassLoader.java:247)
    at java.lang.Class.forName0(Native Method)
    at java.lang.Class.forName(Class.java:247)
    at org.hibernate.service.classloading.internal.ClassLoaderServiceImpl.classForName(ClassLoaderServiceImpl.java:138)
    at org.hibernate.cfg.beanvalidation.BeanValidationIntegrator.integrate(BeanValidationIntegrator.java:115)
    at org.hibernate.internal.SessionFactoryImpl.<init>(SessionFactoryImpl.java:301)
    at org.hibernate.cfg.Configuration.buildSessionFactory(Configuration.java:1744)
    at org.hibernate.ejb.EntityManagerFactoryImpl.<init>(EntityManagerFactoryImpl.java:94)
    at org.hibernate.ejb.Ejb3Configuration.buildEntityManagerFactory(Ejb3Configuration.java:905)
    at org.hibernate.ejb.Ejb3Configuration.buildEntityManagerFactory(Ejb3Configuration.java:890)
    at org.hibernate.ejb.HibernatePersistence.createContainerEntityManagerFactory(HibernatePersistence.java:74)
    at org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean.createNativeEntityManagerFactory(LocalContainerEntityManagerFactoryBean.java:268)
    at org.springframework.orm.jpa.AbstractEntityManagerFactoryBean.afterPropertiesSet(AbstractEntityManagerFactoryBean.java:310)
    at com.mypackages.Configuration.JpaTestConfig.entityManagerFactoryBean(JpaTestConfig.java:38)
    at com.mypackages.Configuration.JpaTestConfig$$EnhancerByCGLIB$$dd5b040a.CGLIB$entityManagerFactoryBean$0(<generated>)
    at com.mypackages.Configuration.JpaTestConfig$$EnhancerByCGLIB$$dd5b040a$$FastClassByCGLIB$$e988fb31.invoke(<generated>)
    at net.sf.cglib.proxy.MethodProxy.invokeSuper(MethodProxy.java:215)
    at org.springframework.context.annotation.ConfigurationClassEnhancer$BeanMethodInterceptor.intercept(ConfigurationClassEnhancer.java:280)
    at com.mypackages.Configuration.JpaTestConfig$$EnhancerByCGLIB$$dd5b040a.entityManagerFactoryBean(<generated>)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
    at java.lang.reflect.Method.invoke(Method.java:597)
    at org.springframework.beans.factory.support.SimpleInstantiationStrategy.instantiate(SimpleInstantiationStrategy.java:149)
    ... 60 more 
```

**更新二**

这是我的`pom.xml`：

```
<project xmlns="http://maven.apache.org/POM/4.0.0" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xsi:schemaLocation="http://maven.apache.org/POM/4.0.0 http://maven.apache.org/maven-v4_0_0.xsd">
    <modelVersion>4.0.0</modelVersion>

    <groupId>com.mypackages</groupId>
    <artifactId>spring-web-jpa-testing</artifactId>
    <version>1.0.0</version>
    <name>Spring-Web-JPA-Testing</name>
    <packaging>war</packaging>

    <properties>
        <java-version>1.6</java-version>
        <spring.version>3.1.2.RELEASE</spring.version>
        <hibernate.version>4.1.5.Final</hibernate.version>
        <project.build.sourceEncoding>UTF-8</project.build.sourceEncoding>
    </properties>

    <dependencies>
        <dependency>
            <groupId>org.springframework</groupId>
            <artifactId>spring-context</artifactId>
            <version>${spring.version}</version>
        </dependency>
        <dependency>
            <groupId>org.springframework</groupId>
            <artifactId>spring-webmvc</artifactId>
            <version>${spring.version}</version>
        </dependency>
        <dependency>
            <groupId>org.springframework</groupId>
            <artifactId>spring-jdbc</artifactId>
            <version>${spring.version}</version>
            <type>jar</type>
        </dependency>
        <dependency>
            <groupId>org.springframework</groupId>
            <artifactId>spring-orm</artifactId>
            <version>${spring.version}</version>
            <type>jar</type>
        </dependency>
        <dependency>
            <groupId>org.springframework</groupId>
            <artifactId>spring-test</artifactId>
            <version>${spring.version}</version>
            <scope>test</scope>
            <type>jar</type>
        </dependency>
        <dependency>
            <groupId>javax.servlet</groupId>
            <artifactId>servlet-api</artifactId>
            <version>2.5</version>
            <scope>provided</scope>
        </dependency>
        <dependency>
            <groupId>cglib</groupId>
            <artifactId>cglib-nodep</artifactId>
            <version>2.2</version>
        </dependency>

        <dependency>
            <groupId>javax.servlet</groupId>
            <artifactId>jstl</artifactId>
            <version>1.2</version>
        </dependency>

        <dependency>
            <groupId>org.hsqldb</groupId>
            <artifactId>hsqldb</artifactId>
            <version>2.2.8</version>
        </dependency>
        <dependency>
            <groupId>org.hibernate</groupId>
            <artifactId>hibernate-core</artifactId>
            <version>${hibernate.version}</version>
        </dependency>
        <dependency>
            <groupId>org.hibernate</groupId>
            <artifactId>hibernate-entitymanager</artifactId>
            <version>${hibernate.version}</version>
        </dependency>
        <dependency>
            <groupId>org.pojomatic</groupId>
            <artifactId>pojomatic</artifactId>
            <version>1.0</version>
            <type>jar</type>
        </dependency>
        <dependency>
            <groupId>org.slf4j</groupId>
            <artifactId>slf4j-log4j12</artifactId>
            <version>1.6.6</version>
        </dependency>
         <dependency>
          <groupId>junit</groupId>
          <artifactId>junit</artifactId>
          <version>4.10</version>
          <scope>test</scope>
         </dependency>
         <dependency>
            <groupId>javax</groupId>
            <artifactId>javaee-api</artifactId>
            <version>6.0</version>
            <type>jar</type>
            <scope>provided</scope>
        </dependency>
        <dependency>
            <groupId>javax.validation</groupId>
            <artifactId>validation-api</artifactId>
            <version>1.0.0.GA</version>
            <scope>test</scope>
        </dependency>
    </dependencies>

    <build>
        <plugins>
            <plugin>
                <artifactId>maven-compiler-plugin</artifactId>
                <version>2.5.1</version>
                <configuration>
                    <source>${java-version}</source>
                    <target>${java-version}</target>
                 <encoding>${project.build.sourceEncoding}</encoding>
                 <showDeprecation>true</showDeprecation>
                </configuration>
            </plugin>
            <plugin>
                <groupId>org.apache.maven.plugins</groupId>
                <artifactId>maven-dependency-plugin</artifactId>
                <executions>
                    <execution>
                        <id>install</id>
                        <phase>install</phase>
                        <goals>
                            <goal>sources</goal>
                        </goals>
                    </execution>
                </executions>
            </plugin>
            <plugin>
                <groupId>org.codehaus.mojo</groupId>
                <artifactId>tomcat-maven-plugin</artifactId>
                <version>1.1</version>
                <configuration>
                    <port>8585</port>
                </configuration>
            </plugin>
        </plugins>
    </build>

</project> 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-04T12:41:02.667

挖网后发现[了这个](http://www.adam-bien.com/roller/abien/entry/trouble_with_crippled_java_ee)，替换了下面的依赖：

```
<dependency>
    <groupId>javax</groupId>
    <artifactId>javaee-api</artifactId>
    <version>6.0</version>
    <type>jar</type>
</dependency> 
```

和：

```
<dependency>
    <groupId>org.apache.geronimo.specs</groupId>
    <artifactId>geronimo-jpa_2.0_spec</artifactId>
    <version>1.1</version>
    <scope>provided</scope>
</dependency> 
```

问题消失了。

# .net - 创建 EF ObjectContext 时，程序集解析失败事件触发

> ID：12261903
> 
> 赞同：0
> 
> 时间：2012-09-04T10:47:51.453
> 
> 标签：.net, entity-framework, culture, assembly-resolution

我发现了一件奇怪的事情。如果你创建一个 EF 数据上下文，你会得到一些像这样的[程序集解析失败事件](http://msdn.microsoft.com/en-us/library/system.appdomain.assemblyresolve.aspx)：任何 EF 都会做我的示例： var db = new NorthwindEntities();

System.Xml.resources，版本=4.0.0.0，Culture=hu-HU，PublicKeyToken=b77a5c561934e089 System.Data.Entity.resources，版本=4.0.0.0，Culture=hu-HU，PublicKeyToken=b77a5c561934e089

如您所见，我的线程的 CurrentUICulture 是“hu-HU”，无论如何它都可以在 Windows XP 上运行。

作为一种解决方法，如果我设置 Thread.CurrentThread.CurrentUICulture = CultureInfo.InvariantCulture; 和装配解决事件停止触发。

有人可以知道为什么 EF 数据上下文与文化相关吗？或者，当我将线程保持在默认的“hu-HU”语言环境中时，如何防止触发解析事件？

# java - 将参数传递给 Spring 工厂 bean 工厂方法

> ID：12261908
> 
> 赞同：4
> 
> 时间：2012-09-04T10:48:19.793
> 
> 标签：java, spring, dependency-injection, inversion-of-control, factory-method

我有一个`Spring`这样声明的bean：

```
<osgi:reference id="basicAuthSecurityHandler" interface="com.groupgti.handler.authentication.basic.Handler"/>
<bean id="securityHandler" factory-bean="basicAuthSecurityHandler" factory-method="getSecurityHandler"/> 
```

我的`getSecurityHandler`方法如下所示：

```
public ConstraintSecurityHandler getSecurityHandler(String realm) {
    ConstraintSecurityHandler handler =(ConstraintSecurityHandler) factory.getBean("securityHandler");
    handler.setRealmName(realm);
    return handler;
} 
```

这个`securityHandler`bean 在范围内`prototype`。`getSecurityHandler`当它用spring构造时，我需要将参数传递给方法。这甚至可能吗？我找不到任何关于它的文档。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-04T12:21:33.657

我让它工作的唯一方法是：

```
<osgi:reference id="basicAuthSecurityHandler" interface="com.groupgti.handler.authentication.basic.Handler"/>

<bean id="securityHandler" class="org.springframework.beans.factory.config.MethodInvokingFactoryBean">
    <property name="targetObject" ref="basicAuthSecurityHandler"/>
    <property name="targetMethod" value="getSecurityHandler"/>
    <property name="arguments">
        <list>
            <value type="java.lang.String">${com.groupgti.esb.targetjobs.indeed.userRealm}</value>
        </list>
    </property>
</bean> 
```

我不得不使用`MethodInvokingFactoryBean`. 我曾尝试使用`constructor-arg`，但后来我得到了没有这样的构造函数的异常。使用`MethodInvokingFactoryBean`一切正常。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-04T10:55:09.473

在旧版本的 Spring 中，可以使用 constructor-arg> 来做到这一点。[请参阅此处](http://static.springsource.org/spring/docs/1.2.9/reference/beans.html)的文档。你可能仍然可以这样做。没试过！

# javascript - 构建 jQuery 插件

> ID：12261912
> 
> 赞同：1
> 
> 时间：2012-09-04T10:48:33.280
> 
> 标签：javascript, jquery, plugins, scope, structure

我正在编写一个 jQuery 插件，并且经常被某些函数的范围弄糊涂（就像使用 jS 时的传统一样）。

一个简短的例子应该会有所帮助：

```
(function ( $ ) {

    var methods = {

        init: function ( options ) {
            var settings = $.extend ({
                a: 100,
                b: 200
            }, options);

            return this.each(function(){

                var $this = $(this);
                var return_value = $this.plugintest("method_1", settings);
                $this.plugintest("method_2", settings, return_value);
            });
        },

        method_1 : function ( settings ) {

            var method_1_value_1 = settings.a * 10,
                method_1_value_2 = settings.a * 20;

            return method_1_value_1;
        },

        method_2 : function ( settings, old_return_value ) {

            // WHAT IF I WANT BOTH method_1_value_1 AND method_1_value_2 in here?
        }
    };

    $.fn.plugintest = function (method) {

        if ( methods[method] ) {

            return methods[method].apply( this, Array.prototype.slice.call ( arguments, 1 ) );

        } else if ( typeof method === 'object' || ! method ) {

            return methods.init.apply( this, arguments );

        } else {

            $.error( 'Method ' + method + ' does not exist in jQuery.robottest' );
        }
    };
}) (jQuery); 
```

见方法_2。我想访问我在 method_1 中创建的值，但是我只能返回 1 个值 - 我应该创建某种全局变量吗？做这个的最好方式是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-04T10:56:50.633

Variables are visible in the function where they are declared (i.e. the function where their `var` statement appears) and in any functions that are declared within that function.

Here's an example:

```
(function () {
    var foo;

    // foo is visible here, bar is not
    // declare variables that should be visible to your whole plugin here

    var methods = {
        a: function () {
            var bar;
            // foo and bar are both visible here
        },

        b: function () {
            // foo is visible here, bar is not
        }
    };
}());

// neither foo nor bar are visible here 
```

You should never use global variables (i.e. variables that aren't declared with the `var` statement inside a function). These are visible to all other code in your document. However, as long as you enclose everything in a `function` and always use `var` you're safe.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-04T11:10:58.020

这是最好的开始：**[jQuery Boilerplate](http://jqueryboilerplate.com/)**

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-04T10:55:58.583

在函数中定义的变量将在函数范围内。之前在函数之前声明的任何内容都将在父范围内。父范围，取决于您的变量声明，您的函数将在父范围内可见。

因此，如果您在父级中声明变量，而不是在内部函数中再次声明它们，将导致从内部函数访问这两个变量。

# c++ - 如何使用可变消息抛出 std::exceptions？

> ID：12261915
> 
> 赞同：152
> 
> 时间：2012-09-04T10:48:34.873
> 
> 标签：c++, exception, exception-handling

这是我想向异常添加一些信息时经常做的一个例子：

```
std::stringstream errMsg;
errMsg << "Could not load config file '" << configfile << "'";
throw std::exception(errMsg.str().c_str()); 
```

有更好的方法吗？

* * *

## 回答 #1

> 赞同：213
> 
> 时间：2012-09-04T10:50:51.370

标准异常可以从以下构造`std::string`：

```
#include <stdexcept>

char const * configfile = "hardcode.cfg";
std::string const anotherfile = get_file();

throw std::runtime_error(std::string("Failed: ") + configfile);
throw std::runtime_error("Error: " + anotherfile); 
```

请注意，`std::exception`不能*这样*构造基类；您必须使用具体的派生类之一。

* * *

## 回答 #2

> 赞同：54
> 
> 时间：2012-09-04T11:32:52.047

这是我的解决方案：

```
#include <stdexcept>
#include <sstream>

class Formatter
{
public:
    Formatter() {}
    ~Formatter() {}

    template <typename Type>
    Formatter & operator << (const Type & value)
    {
        stream_ << value;
        return *this;
    }

    std::string str() const         { return stream_.str(); }
    operator std::string () const   { return stream_.str(); }

    enum ConvertToString 
    {
        to_str
    };
    std::string operator >> (ConvertToString) { return stream_.str(); }

private:
    std::stringstream stream_;

    Formatter(const Formatter &);
    Formatter & operator = (Formatter &);
}; 
```

例子：

```
throw std::runtime_error(Formatter() << foo << 13 << ", bar" << myData);   // implicitly cast to std::string
throw std::runtime_error(Formatter() << foo << 13 << ", bar" << myData >> Formatter::to_str);    // explicitly cast to std::string 
```

* * *

## 回答 #3

> 赞同：31
> 
> 时间：2012-09-04T10:53:39.567

有不同的例外，例如`runtime_error`, `range_error`, `overflow_error`, `logic_error`等。您需要将字符串传递给它的构造函数，并且您可以将任何您想要的内容连接到您的消息中。这只是一个字符串操作。

```
std::string errorMessage = std::string("Error: on file ")+fileName;
throw std::runtime_error(errorMessage); 
```

你也可以[`boost::format`](http://www.boost.org/doc/libs/1_51_0/libs/format/)这样使用：

```
throw std::runtime_error(boost::format("Error processing file %1") % fileName); 
```

* * *

## 回答 #4

> 赞同：17
> 
> 时间：2012-09-04T10:53:35.573

以下课程可能会非常方便：

```
struct Error : std::exception
{
    char text[1000];

    Error(char const* fmt, ...) __attribute__((format(printf,2,3))) {
        va_list ap;
        va_start(ap, fmt);
        vsnprintf(text, sizeof text, fmt, ap);
        va_end(ap);
    }

    char const* what() const throw() { return text; }
}; 
```

使用示例：

```
throw Error("Could not load config file '%s'", configfile.c_str()); 
```

* * *

## 回答 #5

> 赞同：14
> 
> 时间：2015-09-09T09:05:52.363

`operator ""s`如果 C++14 ( )则使用字符串文字运算符

```
using namespace std::string_literals;

throw std::exception("Could not load config file '"s + configfile + "'"s); 
```

或者在 C++11 中定义自己的 if。例如

```
std::string operator ""_s(const char * str, std::size_t len) {
    return std::string(str, str + len);
} 
```

然后您的 throw 语句将如下所示

```
throw std::exception("Could not load config file '"_s + configfile + "'"_s); 
```

看起来很干净。

* * *

## 回答 #6

> 赞同：4
> 
> 时间：2020-07-22T14:05:17.687

也许这个？

```
throw std::runtime_error(
    (std::ostringstream()
        << "Could not load config file '"
        << configfile
        << "'"
    ).str()
); 
```

它创建一个临时 ostringstream，根据需要调用 << 运算符，然后将其包装在圆括号中并在评估结果（这是一个 ostringstream）上调用 .str() 函数以将临时 std::string 传递给构造函数runtime_error 的。

注意：ostringstream 和 string 是 r-value 临时变量，因此在此行结束后超出范围。您的异常对象的构造函数必须使用复制或（更好的）移动语义来获取输入字符串。

附加：我不一定认为这种方法是“最佳实践”，但它确实有效并且可以在紧要关头使用。最大的问题之一是这种方法需要堆分配，因此运算符 << 可以抛出。您可能不希望这种情况发生；但是，如果您进入那种状态，您可能需要担心更多的问题！

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2015-09-08T08:50:30.020

关于你想要什么，有两点需要回答：

1.

第一点是更好的方法是为自定义异常创建特殊类型（类）并将参数作为类的字段传递。

类似于以下内容：

```
class BaseFor_Exceptions : public std::exception {
protected:
    BaseFor_Exceptions();
};

class Exception1 : public BaseFor_Exceptions {
public:
    Exception1(uint32_t value1);
private:
    uint32_t value1;
}; 
```

```
throw Exception1(0); 
```

第二点是您在准备异常对象时正在执行内存分配，因为尝试传递可变大小（文件名）的值。

有可能（在更改 std::string 和 std::stringstream 的对象时）在它的过程中抛出 std::bad_alloc 异常，因此您无法准备或抛出（*）您的异常 -您将丢失信息和状态。

在设计良好的程序中，在准备或处理异常时很容易避免内存分配。您所需要的只是：

*   要么在处理异常时保证该值仍然存在，并将某种链接作为异常的一部分传递给该值——要么是引用，要么是某种（很可能是智能的）指针，
*   或在使用异常类型信息或/和固定大小值处理异常时获取值；例如，

```
} catch (const ConfigurationLoadError & ex) {

    std::cerr
        << “Some message 1 ”
        << serviceLocator1.SomeGetMethod1().Get_ConfigurationFileName();

} catch (const SomeException & ex) {

    std::cerr
        << “Some message 2 ”
        << serviceLocator1.SomeGetMethod2().GetEventDetailsString(ex.Get_Value1());

} 
```

当然，您始终可以选择接受缓冲区大小限制并使用预先分配的缓冲区。

另外，请注意，用于异常的类型（类）不允许从其复制构造函数中抛出异常，因为如果尝试通过值捕获初始异常，则可以调用复制构造函数（如果不是被编译器忽略）并且这个额外的异常将在捕获初始异常之前中断初始异常处理，这会导致调用 std::terminate。由于允许 C++11 编译器在某些情况下在捕获时消除复制，但省略并不总是明智的，如果明智的话，它只是许可而不是义务（参见[https://en.cppreference.com/ w/cpp/language/copy_elision](https://en.cppreference.com/w/cpp/language/copy_elision)了解详细信息；在 C++11 之前，该语言的标准并未规范此事）。

'*' 此外，您应该避免将异常（将它们称为附加）从构造函数中抛出，并移动用于异常的类型（类）的构造函数（将它们称为初始构造函数），因为可以调用构造函数和移动构造函数将类型的对象作为初始异常抛出，然后抛出一个额外的异常将阻止创建初始异常对象，并且初始异常对象将丢失。以及来自复制构造函数的附加异常，当抛出初始异常时，也会导致相同的结果。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2021-09-14T01:05:11.250

每当我需要在异常中抛出自定义消息时，我都会构造一个 C 风格的字符串`snprintf()`并将其传递给异常构造函数。

```
if (problem_occurred) {
    char buffer[200];
    snprintf(buffer, 200, "Could not load config file %s", configfile);
    string error_mesg(buffer);
    throw std::runtime_error(error_mesg);
} 
```

我不确定是否需要额外的字符串`string error_mesg(buffer)`。我认为`buffer`它在堆栈内存上，如果异常捕获器继续运行，那么允许捕获器保留对堆栈分配的 C 字符串的引用是有问题的。相反，将 a 传递`string`给异常将调用按值复制，并且`buffer`数组将被深度复制。

* * *

## 回答 #9

> 赞同：-1
> 
> 时间：2020-07-15T16:21:40.433

遇到了类似的问题，因为为我的自定义异常创建自定义错误消息会使代码变得丑陋。这是我的解决方案：

```
class MyRunTimeException: public std::runtime_error
{
public:
      MyRunTimeException(const std::string &filename):std::runtime_error(GetMessage(filename)) {}
private:
      static std::string GetMessage(const std::string &filename)
     {
           // Do your message formatting here. 
           // The benefit of returning std::string, is that the compiler will make sure the buffer is good for the length of the constructor call
           // You can use a local std::ostringstream here, and return os.str()
           // Without worrying that the memory is out of scope. It'll get copied
           // You also can create multiple GetMessage functions that take all sorts of objects and add multiple constructors for your exception
     }
} 
```

这将创建消息的逻辑分开。我最初考虑过覆盖what()，但是你必须在某个地方捕获你的消息。std::runtime_error 已经有一个内部缓冲区。

# javascript - JavaScript 数据结构

> ID：12261916
> 
> 赞同：0
> 
> 时间：2012-09-04T10:48:38.943
> 
> 标签：javascript

有没有关于 JavaScript 数据结构的好书，像这样的。

[http://www.cs.williams.edu/javastructures/Book_files/JavaStructures.pdf](http://www.cs.williams.edu/javastructures/Book_files/JavaStructures.pdf)

我在互联网上找不到任何东西。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-04T10:59:16.773

你没有提到你的 JavaScript 知识水平，所以我假设你是新人。) 在这种情况下，我建议阅读[Eloquent JavaScript](http://eloquentjavascript.net/)在线书籍；[这一章](http://eloquentjavascript.net/chapter4.html)将特别回答你的问题，但我想阅读整本书也会是一次很棒的经历。

但不只是阅读：事实上，我高度评价这本书，因为它为使用给出的代码进行实验提供了巨大的环境。在我看来，实践是理解与 CS 相关的任何事情的唯一真正关键。)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-04T11:00:06.570

这里有一些链接

[一](http://www.datajett.com/Tuts/JScriptGen/javascriptDataStructs.pdf)

[二](http://www3.amherst.edu/~aanderson/javascript/datastructures/)

[三](http://eloquentjavascript.net/chapter4.html)

还有一个关于 SO 的答案[，解释了 js 中的数据结构](https://stackoverflow.com/questions/5167030/major-javascript-data-structures)

# python - 树视图中的复选框更新缓慢

> ID：12261920
> 
> 赞同：4
> 
> 时间：2012-09-04T10:48:51.450
> 
> 标签：python, pyqt, qtreeview

我为树视图实现了一个自定义模型，用于在树视图中添加复选框。如果我检查父节点，所有子节点都应该自动检查。这基本上可行，但是在检查父节点和更新子节点之间缺少时间。

```
from PyQt4 import QtCore, QtGui
import sys

class Node(object):   
    def __init__(self, name, parent=None, checked=False):

        self._name = name
        self._children = []
        self._parent = parent
        self._checked = checked

        if parent is not None:
            parent.addChild(self)

    def addChild(self, child):
        self._children.append(child)

    def insertChild(self, position, child):
        if position < 0 or position > len(self._children):
            return False

        self._children.insert(position, child)
        child._parent = self
        return True

    def name(self):
        return self._name

    def checked(self):
        return self._checked

    def setChecked(self, state):
        self._checked = state

        for c in self._children:
            c.setChecked(state)

    def child(self, row):
        return self._children[row]

    def childCount(self):
        return len(self._children)

    def parent(self):
        return self._parent

    def row(self):
        if self._parent is not None:
            return self._parent._children.index(self)

class TreeModel(QtCore.QAbstractItemModel):
    def __init__(self, root, parent=None):
        super().__init__(parent)
        self._rootNode = root

    def rowCount(self, parent):
        if not parent.isValid():
            parentNode = self._rootNode
        else:
            parentNode = parent.internalPointer()

        return parentNode.childCount()

    def columnCount(self, parent):
        return 1

    def data(self, index, role):
        if not index.isValid():
            return None

        node = index.internalPointer()

        if role == QtCore.Qt.DisplayRole:
            if index.column() == 0:
                return node.name()
        if role == QtCore.Qt.CheckStateRole:
            if node.checked():
                return QtCore.Qt.Checked
            else:
                return QtCore.Qt.Unchecked

    def setData(self, index, value, role=QtCore.Qt.EditRole):

        if index.isValid():
            if role == QtCore.Qt.CheckStateRole:
                node = index.internalPointer()
                node.setChecked(not node.checked())
                return True
        return False

    def headerData(self, section, orientation, role):
        if role == QtCore.Qt.DisplayRole:
            return "Nodes"

    def flags(self, index):
        return QtCore.Qt.ItemIsEnabled | QtCore.Qt.ItemIsSelectable| QtCore.Qt.ItemIsUserCheckable

    def parent(self, index):
        node = self.getNode(index)
        parentNode = node.parent()

        if parentNode == self._rootNode:
            return QtCore.QModelIndex()
        return self.createIndex(parentNode.row(), 0, parentNode)

    def index(self, row, column, parent):
        parentNode = self.getNode(parent)
        childItem = parentNode.child(row)

        if childItem:
            return self.createIndex(row, column, childItem)
        else:
            return QtCore.QModelIndex()

    def getNode(self, index):
        if index.isValid():
            node = index.internalPointer()
            if node:
                return node

        return self._rootNode

    def removeRows(self, position, rows, parent=QtCore.QModelIndex()):

        parentNode = self.getNode(parent)
        self.beginRemoveRows(parent, position, position + rows - 1)

        for row in range(rows):
            success = parentNode.removeChild(position)

        self.endRemoveRows()

        return success

def main_simple():
    app = QtGui.QApplication(sys.argv)

    rootNode   = Node("Root")
    n1 = Node("Node1", rootNode)
    n2 = Node("Node2", rootNode)
    n3 = Node("Node3", rootNode)

    n1_1 = Node("Node1 1", n1)
    n1_2 = Node("Node1 2", n1)
    n1_3 = Node("Node1 3", n1)

    n2_1 = Node("Node2 1", n2)
    n2_2 = Node("Node2 2", n2)
    n2_3 = Node("Node2 3", n2)

    n3_1 = Node("Node3 1", n3)
    n3_2 = Node("Node3 2", n3)
    n3_3 = Node("Node3 3", n3)

    model = TreeModel(rootNode)

    treeView = QtGui.QTreeView()
    treeView.show()
    treeView.setModel(model)

    sys.exit(app.exec_())

if __name__ == '__main__':
    main_simple() 
```

我怎样才能避免这种缺乏，使用户界面更流畅？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-04T13:40:03.540

当孩子们被切换时，模型应该`dataChanged()`为孩子们发出信号，以便视图可以立即更新他们的复选框。根据[文档](http://qt-project.org/doc/qt-4.8/qabstractitemmodel.html#dataChanged)，`setData`还应该为明确更改的项目发出`dataChanged`。

这应该有效：

```
def setData(self, index, value, role=QtCore.Qt.EditRole):
    if index.isValid():
        if role == QtCore.Qt.CheckStateRole:
            node = index.internalPointer()
            node.setChecked(not node.checked())
            self.dataChanged.emit(index, index)               
            self.emitDataChangedForChildren(index)
            return True
    return False

def emitDataChangedForChildren(self, index):
    count = self.rowCount(index)
    if count:            
        self.dataChanged.emit(index.child(0, 0), index.child(count-1, 0))
        for child in range(count):
            self.emitDataChangedForChildren(index.child(child, 0)) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-10-13T18:10:21.187

根据上面的 flonks 回答，对我有用的非迭代解决方案如下：

C++：`emit dataChanged(QModelIndex(), QModelIndex());`

Python：`self.dataChanged.emit(QtCore.QModelIndex(), QtCore.QModelIndex())`

这应该更新树中的所有项目。

# jquery - 使用 :contains 选择器进行 jquery 搜索

> ID：12261921
> 
> 赞同：2
> 
> 时间：2012-09-04T10:48:54.107
> 
> 标签：jquery, database, search, anchor, contains

我正在尝试进行简单的搜索，我的目标是避免任何数据库调用，因为我只在特定列表中进行搜索。

我正在制作一个词汇表，其中所有单词都显示在一个包含更多信息的列表中。我可以以某种方式使用 :contains 选择器转到用户搜索过的单词，即：“rooftiles”

喜欢：

```
$("div:contains('rooftiles')"); 
```

以我的示例为例，我在搜索框中填写“rooftiles”，如果找到该单词，它将跳转到该单词 à la`<a name="rooftiles">`

有人可以指出我如何做到这一点的正确方向吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-04T11:02:16.550

```
$('#search').on('keyup', function(e) {
    // when user press enter
    if (e.which == 13) {
        var val = $.trim(this.value);
        if (val) {
            var target = $('div:contains(' + val + ')').first();
            if (target.length) {
                var top = target.position().top;
                $('body').animate({
                    scrollTop: top
                }, 500);
            }
        }
    }
});​ 
```

***[演示](http://jsfiddle.net/xxQyQ/1/)***

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-04T10:57:47.593

If I well understood your question maybe you could

1.  find the `div` containing the first occurence of `word`
2.  Get its `offsetTop` value
3.  Make the page scroll for the given amount

Something like

```
function jumpToWord(word) {
    var p = ($.browser.opera)? $("html") : $("html,body"),
        d = $("div:contains('" + word + "')").eq(0),
        offset = d.offset().top;
    p.animate({ scrollTop: offset }, 1000);
} 
```

For the sake of accuracy, if your text is contained in shorter paragraphs, it's probably better search for

```
$("div p:contains('" + word + "')") 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-04T10:53:17.347

在这种情况下，我建议：

```
$('a[name*="rooftiles"]'); 
```

或者 ：

```
$('a[name~="rooftiles"]'); 
```

# symfony - 创建数据库时跳过实体

> ID：12261924
> 
> 赞同：2
> 
> 时间：2012-09-04T10:49:11.267
> 
> 标签：symfony, console, doctrine-orm

我有一个 Symfony2 应用程序，其中包含一些不属于我的主应用程序的实体。

如何更新架构但排除某些实体？

EG 当我在更新我的一个实体后运行以下命令时

```
php app/console doctrine:schema:update --dump-sql 
```

然后学说为所有实体生成 sql，这意味着它为我不需要的实体创建表。那么如何告诉学说在生成 sql 时跳过那些特定的实体呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-04T10:56:59.223

Symfony 命令不允许以这种方式排除任何实体。

如果您想将实体从主要部分与其他实体区分开来，我建议您定义 2 个不同的实体管理器，1 个用于主要实体，1 个用于附属实体......

官方文档：[如何使用多个实体管理器](http://symfony.com/doc/current/cookbook/doctrine/multiple_entity_managers.html)

# performance-testing - 在 New Relic RPM 中，我收到了列出 Apdex 索引的报告。下标是什么意思？

> ID：12261926
> 
> 赞同：4
> 
> 时间：2012-09-04T10:49:21.460
> 
> 标签：performance-testing, newrelic

这听起来很荒谬，但 New Relic RPM 以如下形式报告 Apdex 索引：

> 0.92(3.5)

3.5 下标的地方。

3.5是什么意思？我在任何地方都找不到定义，但它就在我的报告中，盯着我的脸。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-05T14:51:18.740

括号/下标数字是您的 Apdex 分数的阈值（以秒为单位）。因此，在您的情况下，如果完整的应用程序响应（页面加载）小于 3.5 秒，则满足要求。如果您的应用响应速度低于阈值，则您的 Apdex 分数会受到影响。

此阈值是可自定义的，因此您可以选择适合您的应用程序类型的阈值。

您可以在我们的文档中[阅读有关 Apdex](https://newrelic.com/docs/general/apdex)的更多信息。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-05T14:39:06.777

下标数字是您对该层的目标响应时间。在用户代理（浏览器）上，高水位标记为 7 秒。您应该勾选 US-Only 并让这个数字在 2 到 4 秒内成为世界级。

应用服务器层的响应速度必须快得多。NR 设置的高水位线默认值为 0.5 秒或 500 毫秒，世界级的页面缓冲区刷新平均在 50-200 毫秒内。

请记住，所有这些信息都是关于聚合平均值，而不是具有许多异常值且分布广泛的实例数据。

# c# - 中心按钮文本

> ID：12261929
> 
> 赞同：0
> 
> 时间：2012-09-04T10:49:37.663
> 
> 标签：c#, wpf

我有一个带有一些按钮的用户控件。每个按钮都包含我正在努力在控件中对齐/居中的文本。

我拥有的 XAML 是

```
<UserControl x:Class="ProjectX.DetailedInfo"
             xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006" 
             xmlns:d="http://schemas.microsoft.com/expression/blend/2008" 
             mc:Ignorable="d" 
             d:DesignHeight="28" d:DesignWidth="575">
    <Grid Height="28" Width="575">
        <Button Height="24" HorizontalAlignment="Left" Margin="525,2,0,0" Name="buttonOP1" VerticalAlignment="Top" Width="46" Click="buttonOP1_Click" HorizontalContentAlignment="Center" VerticalContentAlignment="Center" FontSize="11" />
    </Grid>
</UserControl> 
```

但是文本没有正确对齐，见下文

![在此处输入图像描述](../Images/cac6cfb39e7d0d639914ac7301aa6b5c.png)

`HorizontalContentAlignment="Center"`并且`VerticalContentAlignment="Center"`似乎没有按预期工作。有谁知道为什么？

（我检查了文字，没有多余的字符）

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-04T10:57:13.767

默认情况下，按钮内容在 WPF 中居中。我假设对于标题未对齐的按钮，文本在实际数字之后包含空格。但是如果不发布所有相关代码，就很难说清楚。

# android - 如何使用 OPEN GL 在 android 中的另一个纹理之上设置纹理

> ID：12261933
> 
> 赞同：2
> 
> 时间：2012-09-04T10:49:49.037
> 
> 标签：android, opengl-es, render-to-texture

这两天我一直在寻找这个。我正在使用Open GL开发一个android游戏，在这种情况下我必须同时显示两个图像，一个应该是背景图像，第二个是显示的视情况而定。我已经使用 Open GL Texture 属性显示了背景图像。但是当我尝试使用纹理显示第二个图像时，第一个没有显示。因为我正在处理多个纹理，所以我使用了 GLTexture 类来操作纹理（[http： //tkcodesharing.blogspot.in/2008/05/working-with-textures-in-androids.html](http://tkcodesharing.blogspot.in/2008/05/working-with-textures-in-androids.html)）。即使那样我也无法同时显示两个图像。

**这是一些代码：**

```
public void onSurfaceCreated(GL10 gl, EGLConfig config) {

    glTextures= new GLTextures(gl,this.context);//class to manipulate textures

   //adding image resources

    this.glTextures.add(R.drawable.back);

    this.glTextures.add(R.drawable.hand);

   //loading texture

   this.glTextures.loadTextures();

    gl.glEnable(GL10.GL_TEXTURE_2D);
   ...
} 
```

**在 onDrawFrame**

```
 gl.glClear(GL10.GL_COLOR_BUFFER_BIT|GL10.GL_DEPTH_BUFFER_BIT);

   gl.glLoadIdentity();

   gl.glTranslatef(0.0f, 0.0f, -3.5f);

   glTextures.setTexture(R.drawable.back);//it will bind this particular texture for drawing

  draw(gl);

  if(condition == 1){

            gl.glLoadIdentity();
            gl.glTranslatef(0.0f, 1.0f, -7.0f);
            glTextures.setTexture(R.drawable.hand);

            drawSecond(gl);
        }
//////////////////////////////////////////////////////// 
```

**在绘制代码中**

```
 public void draw(GL10 gl){

              gl.glActiveTexture(GL10.GL_TEXTURE0);

        gl.glEnableClientState(GL10.GL_VERTEX_ARRAY);
        gl.glEnableClientState(GL10.GL_TEXTURE_COORD_ARRAY);

        gl.glFrontFace(GL10.GL_CW);

        gl.glVertexPointer(3, GL10.GL_FLOAT, 0, vertexBuffer);
        gl.glTexCoordPointer(2, GL10.GL_FLOAT, 0, textureBuffer);

        gl.glDrawArrays(GL10.GL_TRIANGLE_STRIP, 0, vertices.length/3);

        gl.glDisableClientState(GL10.GL_TEXTURE_COORD_ARRAY);
        gl.glDisableClientState(GL10.GL_VERTEX_ARRAY);

  }

  public void drawSecond(GL10 gl){

        gl.glActiveTexture(GL10.GL_TEXTURE1);
        gl.glEnableClientState(GL10.GL_VERTEX_ARRAY);
        gl.glEnableClientState(GL10.GL_TEXTURE_COORD_ARRAY);
        //GLES20.glUniform1i(isShaked, 1);
        gl.glFrontFace(GL10.GL_CW);

        gl.glVertexPointer(3, GL10.GL_FLOAT, 0, vertexBuffer);
        gl.glTexCoordPointer(2, GL10.GL_FLOAT, 0, textureBuffer);

        gl.glDrawArrays(GL10.GL_TRIANGLE_STRIP, 0, vertices.length/3);

        gl.glDisableClientState(GL10.GL_TEXTURE_COORD_ARRAY);
        gl.glDisableClientState(GL10.GL_VERTEX_ARRAY);

   } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-05T19:17:09.893

从渲染代码中删除 `"gl.glActiveTexture(GL10.GL_TEXTURE0);"`和行。`gl.glActiveTexture(GL10.GL_TEXTURE1);`

只有在需要多重纹理时才使用多个纹理单元，
即在一次绘制调用中使用多个纹理。

只需将第一个纹理绑定到活动纹理单元（默认为 GL_TEXTURE0）并绘制第一个三角形条，然后绑定第二个纹理（不更改活动纹理单元 GL_TEXTURE0）并绘制第二个三角形条。

# database - 数据库简介

> ID：12261934
> 
> 赞同：1
> 
> 时间：2012-09-04T10:49:53.007
> 
> 标签：database

我的一位同事使用 Excel 合并和分析数据集（约 10k 行）。

她的电子表格是 vlookup 和嵌套 if 公式的迷宫。

我怎样才能说服她看一下数据库？

什么是开始的好方法？我是一个sqlite的粉丝，但是想知道Access的进入门槛是否更低？

有什么书可以推荐入门吗？我检查了这个 SO 问题[What's a good book for Introduction to databases for web developers](https://stackoverflow.com/questions/5520772/whats-a-good-book-for-introduction-to-databases-for-web-developers) - 那里的列表有任何补充吗？

谢谢，

西蒙娜

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-04T14:35:44.040

*回复：我怎样才能说服她看一下数据库？*

告诉她为什么你的方式更好。

使用您喜欢的工具和相同的输入数据重做她在 Excel 中所做的工作，看看您是否可以在输出中找到差异。

此外，在设置两个系统后，将它们并排运行一段时间，注意性能和维护差异。如果她同意你的方式更好，她可能会决定使用它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-04T11:17:41.497

不是您问题的直接答案，而是作为一名在 Excel 中进行了广泛的数据分析工作的开发人员，有一些观察。

*   如果主要目标是数据分析，那么使用 Excel 可能就足够了。
*   特别是如果不同的数据集（您提到合并）作为 csv 文件提供 - 在需要时 - 经历首先将数据导入 sql 数据库然后运行查询以提取数据以进行分析步骤的“麻烦”可能太很多。
*   Excel 让您可以灵活地处理数据，非常轻松地尝试不同的东西、图表、数据透视表等。如果您朋友需要的报告或多或少是静态的，只有数据变化，那么可能是一个简单的 Access/SQL 数据库顶部有一个小应用程序将是一个更好的解决方案。但话又说回来，如果是这种情况，您的朋友可能有一个 Excel 表，其中包含所有相关公式，其中只需要插入数据。

对于我在 Excel 中进行的大部分数据分析，我唯一错过的是使用外键收集数据的能力。一旦你用 vlookup 覆盖，其余的分析通常在 Excel 中更快/更容易。

# symfony - 硒与 symfony2

> ID：12261935
> 
> 赞同：2
> 
> 时间：2012-09-04T10:49:57.407
> 
> 标签：symfony, selenium, selenium-webdriver, selenium-ide

使用 Selenium 和 Sf2 进行功能测试的最佳实践是什么？我必须将 selenium1 与 selenium Rc 一起使用，还是将 selenium2 与 webdriver 一起使用？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-04T10:54:20.707

使用[Behat](http://behat.org/)、[Mink](http://mink.behat.org/)和Behat[的 Symfony 扩展](https://github.com/Behat/Symfony2Extension)。这是很棒的东西，可以让您使用许多不同的驱动程序进行功能测试

# html - 重定向到同一页面（不使用 PHP）

> ID：12261938
> 
> 赞同：0
> 
> 时间：2012-09-04T10:50:12.920
> 
> 标签：html, forms

我有一个可以从任何页面调用的表单。它使用 z-index 在当前页面的顶部打开。在这种情况下我不能使用 php。表单被发送到 cgi 以处理这些值。如果我将其留空，则有必要将某些内容放在“重定向”中，它不起作用。在重定向中，有没有办法将值放到当前页面中？

```
<Form id="formulari" method="POST" action="http://cgi.domain.com/FormMail.pl">
<p>
  <input type="hidden" name="recipient" value="info@domain">
  <input type="hidden" name="subject" value="IB4 correu">
  <input type="hidden" name="redirect" value="TheSamePageWeAre">  
</p>

<form>
<input type="text" name="name" value="name"/>
<input type="submit" value="Send"/>
</form> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-04T10:58:24.293

将此 javascript 放在页面末尾。

```
<script type='text/javascript'>
  document.getElementsByName('redirect')[0].value = window.location.pathname;
</script> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-04T10:53:15.487

`id`例如，在隐藏字段上设置一个`id="redirect"`，并使用以下 Javascript：

```
<script>
  window.onload = function (){
    document.getElementById('redirect').value = location
  }
</script> 
```

# iphone - 从应用商店下载时将信息保存到应用的沙箱？

> ID：12261944
> 
> 赞同：0
> 
> 时间：2012-09-04T10:50:40.090
> 
> 标签：iphone, xcode4, ios5.1

如何创建一个从应用商店下载时已在其沙箱中加载信息的应用，而不是在 ios 设备上首次启动时创建并保存到其沙箱中？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-12T00:49:24.127

创建一个 .plist 文件并将其添加到您的项目中。默认情况下，plist 的根对象是字典。在运行时，在主包中找到该文件并使用`dictionaryWithContentsOfFile:`它来加载它。

# report - 如何阅读 Gallio 报告

> ID：12261946
> 
> 赞同：1
> 
> 时间：2012-09-04T10:50:50.627
> 
> 标签：report, gallio

我正在尝试读取或重定向测试控制台输出。我正在做一个 AssertAreEqualIgnoringOrder ，我需要解析失败中的一些值。失败输出如下所示：

预期元素相等，但顺序可能不同。确保偶像列表与数据库匹配

```
 Equal Elements   : ["98932", "670945", "6747749", "6770804", "7110604", "13280109", "13280121", "13280149", "14448042", "14448336", "15726213", "17009409", "17245584", "93123", "2212314", "10129661", "13280123", "13280125", "13280135", "13280144", "17245263", "18784003", "1112597", "2885514", "8505390", "13279857", "15032800", "17009391", "17009396", "17009398", "17880635", "18340462", "3606775", "13280116", "13280133", "13280137", "14448341", "15050039", "16711731", "17008920", "17009377", "17009381", "17009402", "17245606", "17901335", "865871", "6029748", "17009372", "17009386", "17009406", "17245604", "19113286", "19865372"]
   Excess Elements  : ["14419207"]
   Missing Elements : ["17241620"] 
```

如何直接阅读或将其重定向到文件？如果我可以解析输出，我可以在之后使用一些正则表达式来处理它，这不会是一个问题。

另一种解决方案是解析 Gallio 报告文件，但我确信有更快的方法。

你能帮我吗？

谢谢，安德烈

# java - GSON 日期序列化 JsonSyntaxException

> ID：12261957
> 
> 赞同：1
> 
> 时间：2012-09-04T10:51:28.843
> 
> 标签：java, gson

我有一个名为 DateTime 的自定义对象。我使用方法 registerTypeAdapter 注册 TypeAdapter 。我认为 GSON 忽略了这个适配器。GSON如何检测json对象中的日期？是否需要在 json 中的适配器和字符串格式之间建立任何链接？

```
 builder.registerTypeAdapter(DateTime.class, new JsonDeserializer<DateTime>() 
          {

            public DateTime deserialize(JsonElement arg0, Type arg1,JsonDeserializationContext arg2) throws JsonParseException 
            {
                try{return new DateTime(arg0.getAsString());}
                catch (Exception e){
                    return null;
                    }
            }
}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-25T22:48:56.530

Json 以名称/值对的形式出现。你几乎肯定会得到一个例外并吃掉它。您需要提取名称/值对的值以传递到新的 DateTime。如果您的 JSON 类似于 { "date": 213424234 } 那么您需要这样做：

```
DateTime date = new DateTime(jsonElement.getAsJsonObject().get( "date" ).getAsLong()); 
```

# ruby-on-rails - Rails：通过 2 个连接表关联进行查询

> ID：12261960
> 
> 赞同：0
> 
> 时间：2012-09-04T10:51:39.787
> 
> 标签：ruby-on-rails, ruby-on-rails-3, activerecord

我在模型之间有一个相当复杂的关系，现在对检索一些对象的 SQL 查询感到沮丧。

给定*Product 模型*通过 has_many连接到*类别模型*：通过关联和联合表*分类*。还有一个*用户模型*通过 has_many :through 关联和联合表 *category_friendship*连接到此*类别模型。*

我现在面临检索所有产品的问题，这些产品在数组 user.category_ids 的类别中。但是，我不能仅仅设法正确地编写 WHERE 语句。

我试过这个：

```
u = User.first
uc = u.category_ids
Product.where("category_id IN (?)", uc) 
```

但是这不起作用，因为它在产品表中没有直接的 category_id。但是我怎样才能改变它来使用联合表分类呢？

我给你的模型细节，也许你会发现它有助于回答我的问题：

**产品.rb**

```
class Product < ActiveRecord::Base

 belongs_to :category

 def self.from_users_or_categories_followed_by(user)
 cf = user.category_ids
 uf = user.friend_ids

 where("user_id IN (?)", uf) # Products out of friend_ids (uf) works fine, but how to extend to categories (cf) with an OR clause?
 end 
```

**类别.rb**

```
class Category < ActiveRecord::Base
 has_many :categorizations
 has_many :products, through: :categorizations
 has_many :category_friendships
 has_many :users, through: :category_friendships 
```

**分类.rb**

```
class Categorization < ActiveRecord::Base

 belongs_to :category
 belongs_to :product 
```

**Category_friendship.rb**

```
class CategoryFriendship < ActiveRecord::Base

 belongs_to :user
 belongs_to :category 
```

**用户.rb**

类用户 < ActiveRecord::Base

```
has_many :category_friendships
has_many :categories, through: :category_friendships

def feed
 Product.from_users_or_categories_followed_by(self) #this should aggregate the Products
end 
```

如果您需要更多详细信息来回答，请随时询问！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-04T12:02:11.437

查看您定义的关联并简化事情。对我们必须实现的目标进行一些重构。

**产品.rb**

```
class Product < ActiveRecord::Base

  belongs_to :category

 end 
```

**用户.rb**

```
 class User < ActiveRecord::Base
        has_many :categories, through: :category_friendships
        scope :all_data , includes(:categories => [:products])

   def get_categories
     categories
   end

   def feed
      all_products = Array.new
      get_categories.collect {|category| category.get_products }.uniq
   end
  end 
```

**类别.rb**

```
class Category < ActiveRecord::Base
 has_many :users, through: :category_friendships
 has_many :products

 def get_products
   products
 end
end 
```

**无需创建 CATEGORY_FRIENDSHIP 模型，只需要一个名为 CATEGORIES_FRIENSHIPS 的连接表，该表只有 USER_ID 和 CATEGORY_ID**

**用法：已更新**

控制器

```
 class UserController < ApplicationController
         def index
           @all_user_data = User.all_data
        end
   end 
```

查看 index.html.erb

```
<% for user in @all_user_data %>
 <% for products in user.feed %>
  <% for product in products %>
       <%= product.name %>
     end
  end
end 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-05T12:23:15.667

我赞成 Ankits 的回答，但我意识到有一种更优雅的方式来处理这个问题：

给定：

```
u = User.first
uc = u.category_ids 
```

然后我可以使用以下方法从类别中检索产品：

```
products = Product.joins(:categories).where('category_id IN (?)', uc) 
```

# c# - 使用脚本解析 html 页面

> ID：12261962
> 
> 赞同：0
> 
> 时间：2012-09-04T10:51:43.390
> 
> 标签：c#, html, html-parsing

我需要解析`html`我的应用程序内部的一个页面来检索数据。目前我`HtmlAgilityPack`用于此。但是该页面是动态的，它包含脚本，因此无法正确解析。有没有办法运行脚本并以某种方式检索最终的 html 输出？

我正在考虑一个浏览器引擎，但没有可视化部分。

# vb.net - VB：如何创建嵌套类？

> ID：12261968
> 
> 赞同：0
> 
> 时间：2012-09-04T10:52:31.263
> 
> 标签：vb.net, class

我想将一个*嵌套类*写入我自己的现有类中。但我找不到怎么做，因为我不知道这到底是怎么称呼的。

嵌套类是什么意思？有了班上的一张桌子`dt`，`DataTable`我就可以写了`dt.Columns.add()`。`Columns`将是主类的属性，并且`add`是嵌套类的方法。

有什么建议么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-04T10:59:45.303

那不是嵌套类，它只是一个类。Columns 属性属于`DataColumnCollection`具有名为 的公共方法的类型`Add`。要以类似的方式构建您自己的，只需：

```
Public Class MyFirstClass

    Public Sub New()

    End Sub

    Dim _second As New MySecondClass()
    Public Property Second() As MySecondClass
        Get
            Return _second
        End Get
        Set(ByVal Value As MySecondClass)
            _second = Value
        End Set
    End Property
End Class

Public Class MySecondClass
    Public Sub New()
    End Sub

    Public Sub MySecondClassMethod()
        'Do something
    End Sub
End Class 
```

然后将在其他一些类或功能中调用它，例如：

```
Dim x as New MyFirstClass()
x.Second.MySecondClassMethod() 
```

# django - Django Rest框架序列化程序排除深度为2的外键

> ID：12261973
> 
> 赞同：7
> 
> 时间：2012-09-04T10:52:52.300
> 
> 标签：django, django-rest-framework, serialization

我制作了一个将对象作为 json 数据返回的 api。我正在使用 django-rest-framework 及其序列化程序。使用资源 (ModelResource) 我排除了一些字段，例如名为“所有者”的属性。其中一个字段是其自身的外键。我想在 api 中显示这个字段（所以我使用 depth=2），但我想排除与我在返回对象中排除的字段相同的字段。有没有一种很好的方法来做到这一点（我已经尝试了几件事但没有想要的结果）。

这是我的（简化的）代码：在 models.py 中：

```
class MyObject(models.Model):
    name = models.CharField(max_length=256, blank=True)
    parent = models.ForeignKey('self',  blank=True,  null=True, default=None)
    and_some_otherfields = models.otherFields(....)
    owner = models.ForeignKey(User, null=True, blank=True, related_name='myobject_owner') 
```

在资源.py 中：

```
class MyObjectResource(ModelResource):
    model = MyObject
    exclude = ('owner','and some other fields',) 
```

并在用于返回对象的视图中返回：

```
 data = Serializer(depth=2).serialize(my_object)
    return Response(status.HTTP_200_OK, data) 
```

在响应中，它省略了排除字段（正如我想要和预期的那样）。

但在字段父级中，父级 myobject 包含我要隐藏的所有字段。

我正在寻找一种方法来表明对于这个父对象，序列化程序应该使用相同的资源，或者将辅助字段添加到排除列表中......

如果我使用 depth =1，它只显示它是否有父级 ([])，如果没有，则显示 null，我确实需要至少知道父级的 ID。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-04T11:07:10.430

啊，我刚找到它：

我需要为我想显示什么资源的所有字段添加资源....

> fields = ('name', ("parent","MyObjectResource") , '以及您想查看的所有其他字段...')

我在这里找到它：[谷歌群组论坛问题](https://groups.google.com/forum/?fromgroups=#!topic/django-rest-framework/pa9LtgAVgTQ)

您可以跳过排除，它会忽略它，只需添加您要显示的字段，您不必定义它们，除非您需要指明要使用的资源。

所以下面是resource.py部分的最终代码：

```
class MyObjectResource(ModelResource):
    model = MyObject
    fields = ('name', ("parent","MyObjectResource"), 'and all the other fields you want to see as well...') 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-04-10T10:02:08.207

这是其他解决方案的方式。

```
class ProToPicturesSerial(serializers.ModelSerializer):
    pro_pictures = PictureSerializer(many=True)
    pro_videos = VideoSerializer(many=True)
    city_pro = CitySerializer(many=True)

    class Meta:
        model = Province
        fields = ('id', 'name', 'intro', 'description', 'display_url', 'pro_pictures', 'pro_videos', 'city_pro') 
```

# c# - 'Public Event TestEvent()' 的 C# 等价物是什么？

> ID：12261977
> 
> 赞同：-3
> 
> 时间：2012-09-04T10:53:01.657
> 
> 标签：c#, .net, vb.net, events, event-handling

以下 VB.NET 代码行的 C# 等效项是什么？

```
Public Event TestEvent() 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-04T11:26:59.447

`Public Event TestEvent()`在 VB.Net 中创建一个没有参数的事件。

由于您不能简单地使用

```
public event void TestEvent; 
```

在 C# 中，您要么必须创建一个新委托

```
public delegate void TestEventEventHandler();
public event TestEventEventHandler TestEvent; 
```

或者简单地使用`Action`，它封装了一个没有返回值和没有参数的方法。

```
public event Action TestEvent; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-04T10:55:44.573

```
public event System.EventHandler testEvent; 
```

# c# - System.Enum 与标志的组合

> ID：12261978
> 
> 赞同：2
> 
> 时间：2012-09-04T10:53:04.200
> 
> 标签：c#, .net, enums

考虑以下枚举：

```
[System.Flags]
public enum EnumType: int
{
    None = 0,
    Black = 2,
    White = 4,
    Both = Black | White,
    Either = ???, // How would you do this?
} 
```

目前，我已经写了一个扩展方法：

```
public static bool IsEither (this EnumType type)
{
    return
    (
        ((type & EnumType.Major) == EnumType.Major)
        || ((type & EnumType.Minor) == EnumType.Minor)
    );
} 
```

有没有更优雅的方法来实现这一点？

**更新：**从答案中可以明显看出， EnumType.Either 在枚举本身中没有位置。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-09-04T10:58:14.420

使用标志枚举，“任何”检查可以推广到`(value & mask) != 0`，所以这是：

```
public static bool IsEither (this EnumType type)
{
    return (type & EnumType.Both) != 0;
} 
```

***假设***您解决了以下事实：

```
Both = Black | White 
```

（作为`Black & White`一个错误，这是零）

为了完整起见，可以将“全部”检查推广到`(value & mask) == mask`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-04T10:55:24.807

为什么不简单：

```
public enum EnumType
{
    // Stuff
    Either = Black | White
} 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-09-04T10:58:59.033

怎么样：

```
[System.Flags]
public enum EnumType: int
{
    None = 0,
    Black = 1,
    White = 2,
    Both = Black | White,
    Either = None | Both
} 
```

# git - Git：保持特定文件未合并

> ID：12261981
> 
> 赞同：3
> 
> 时间：2012-09-04T10:53:14.060
> 
> 标签：git

是否可以一直保持某些文件未合并？

我想要的是：

如果有两个分支（A）和（B），并且它们具有相同的文件。例如，

在分支 (A) 中，文件“setup”具有以下内容：

```
this is setup
in a branch A 
```

在分支 (B) 中，文件“setup”具有以下内容：

```
this is setup
in a branch B 
```

这些分支没有未提交的文件（不同分支中相同文件的不同提交）。

**目标是在合并这些分支后保持这些文件不被触及。**

[如何告诉 Git 始终选择我的本地版本](https://stackoverflow.com/questions/928646/how-do-i-tell-git-to-always-select-my-local-version-for-conflicted-merges-on-a-s)和[防止将来自 master 的文件与 Git 合并](https://stackoverflow.com/questions/10779235/prevent-merging-a-file-from-master-with-git)中的解决方案不适用于此。因为它们仅在合并它们时发生冲突时才起作用。（嗯，是的，如果我们合并这两个分支并且它只工作一次，就会发生冲突。但是如果我们将 (A) 合并到 (B)，然后将 (B) 合并到 (A)，那么文件在两个分支）

GIT有这种可能性吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-04T11:03:07.983

不，在 git 中没有简单的方法可以做到这一点，因为 git 如何处理合并。

我可能是错的，但似乎你想阻止配置文件被合并。那正确吗？因为有更好的/其他方式来处理配置文件。

[本页](https://gist.github.com/1423106)解释了如何处理几种情况的一些解决方案。

概括：

*   如果您可以修改您的程序，让其他人覆盖您未跟踪的配置文件
*   如果您无法修改程序，请不要跟踪配置文件本身，而是跟踪模板。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-05T16:25:16.327

有点啰嗦，但在`--no-commit`您的初始合并步骤中使用，然后签出原始文件以确保它没有被覆盖，然后提交。

目前 git 邮件列表上还有一个“pre-merge hook”讨论，这也可能给你一些选择。[git 列表](http://permalink.gmane.org/gmane.comp.version-control.git/204826)

您还可以尝试查看 git 源代码并添加一个`.gitdonotmerge`文件（到同一目录）作为`.gitignore`（重用所有现有代码；-）并更新合并策略选项，以便解决这个适度常见的麻烦. 抓挠自己的开源之痒的乐趣！

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-04T13:18:36.720

在`.gitignore`文件所在的目录中创建一个文件，然后将文件名放入其中！

然后运行推荐

> git rm -cached path_to_setup.file

因此，它将忽略所有操作中的文件，如合并、拉取、推送......

更多信息：[https ://help.github.com/articles/ignoring-files](https://help.github.com/articles/ignoring-files)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-04T12:19:54.987

如果您确实需要使它们与主分支和开发分支不同，我建议在[Ikke](https://stackoverflow.com/users/20261/ikke)的[答案](https://stackoverflow.com/a/12262171/6309)中提到的第二个选项和版本 2 值文件（一个用于主分支，一个用于开发分支），以及一个模板文件。

拥有多个值文件意味着它们不会成为分支之间的合并问题（每个用户只修改与当前分支相关的值文件）。
模板文件用于帮助内容**[过滤器驱动程序](https://stackoverflow.com/questions/2316677/can-git-automatically-switch-between-spaces-and-tabs/2316728#2316728)**在结帐时生成代表实际配置文件的*私有*文件（使用正确的语法，来自模板文件，以及正确的值，使用正确的值文件，[在当前分支之后](https://stackoverflow.com/questions/1593051/how-to-programmatically-determine-the-current-checked-out-git-branch))

![过滤器驱动程序](../Images/e14147ee32891bb47923e5388e695d4c.png)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-08-18T13:41:30.000

一种选择是`git update-index --assume-unchanged [file]`在暂存和提交时忽略对文件的更改，但会将其保留在存储库中。这是一个危险的命令，因为您需要记住，当您*确实*要提交更改时，您已经假设文件未更改。另外，我不完全确定合并后这将如何表现。

# mysql - 用两张桌子订购

> ID：12261985
> 
> 赞同：0
> 
> 时间：2012-09-04T10:53:21.060
> 
> 标签：mysql

我正在对表的所有字段进行排序（取决于用户的选择），但是该表的一列包含一个类别（存储为缩写），并且这些缩写在第二个表中定义。如何按类别名称排序？下面的表结构示例：

表格1

```
title | amount | category_abbreviation 
```

表 2 -> 类别

```
category_name | category_abbreviation 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-04T10:58:33.550

只需加入表格并在第二个表格中的一个字段上排序。

```
SELECT * from table1 
INNER JOIN table2
ON table1.category_abbreviation = table2.category_abbreviation
ORDER BY table2.category_name 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-04T11:00:05.147

创建一个视图并从中运行您的查询：

```
SELECT 
    Table1.title, Table1.amount, Table1.category_abbreviation, Table2.category_name
FROM
    Table1
    INNER JOIN Table2 ON Table1.category_abbreviation = Table2.category_abbreviation 
```

并将其用作您的数据源。或者只是使用 SQL 作为您的数据源，但是您正在这样做。

如果您不想，则不必选择 Table2.category_name

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-04T11:09:49.430

尝试

```
SELECT   t1.* 
FROM     Table_1 T1 
JOIN     Table_2 T2
ON       T1.category_abbreviation=T2.category_abbreviation
ORDER BY T2.category_name 
```

# php - $_files['uploaded_img']['type'] vs getimagesize()

> ID：12261987
> 
> 赞同：2
> 
> 时间：2012-09-04T10:53:25.370
> 
> 标签：php

我想检查上传文件类型，请告诉我在哪里可靠，在这种情况下获得我更准确的文件类型信息？在这：

```
$_files['uploaded_file']['type'] 
```

或者在这个：

```
$imgType = getimagesize($_files['uploaded_file']['tmp_name']);
$imgType['mime']; 
```

?

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-04T10:59:27.133

`$_FILES['uploaded_file']['type']`是用户输入 - 它是客户端定义的任意字符串。因此，使用任何东西都是不安全的，永远。

`getimagesize()`是一种更安全的方法，但它并不能完全保护您。

您还需要：

*   使用完全由您自己设计的名称将文件存储在本地服务器上。依赖任何用户输入来生成本地文件系统文件名是不安全的。
*   使用 GD 将像素数据从源文件复制到目标文件。`getimagesize()`只查看与文件关联的元数据，不查看文件数据。可以将恶意代码隐藏在看起来像图像的东西中。重新采样图像后，请确保从服务器中删除上传的文件。
*   确保文件存储在具有最低要求权限和限制性所有者/组的本地文件系统中。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-04T10:57:35.107

`$_FILES[...]['type']`*永远不*可靠，它是用户提供的任意值。`getimagesize`,[`exif_imagetype`](http://php.net/exif_imagetype)或[finfo](http://www.php.net/manual/en/ref.fileinfo.php)是检查您所拥有内容的首选方法。另请参阅[上传的安全威胁](https://stackoverflow.com/questions/11061355/security-threats-with-uploads)。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-04T10:59:06.937

我相信**getimagesize**

因为任何人都可以编辑上传的文件类型使用任何 HTTP/HTTPS 标头，例如在 firefox 中篡改数据插件

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-04T10:58:28.870

在实践中，您可能应该使用图像附带的元数据 ( `$_files['uploaded_file']['type']`)，但是这可能在上传之前被篡改。

如果您只是在尺寸之后，请使用它，因为它比实际测量图像更快`getimagesize`。但是，如果您需要文件类型信息，最好检查文件“所说”之外的内容，因为通过幼稚的检查很容易潜入可执行文件。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-09-04T11:20:17.400

Using`getimagesize()`将为您提供更一致的 mime 信息，因为它使用`mime-type`文件的环境定义（GD 模块 mime 数据库）。

如果您只依赖`$_FILES['uploaded_file']['type']`，那么它将包含客户端计算机（即浏览器）上定义的 mime-type，或者浏览器甚至可能不发送 mime-type。

一个非常愚蠢的例子是检查`if($_FILES['uploaded_file']['type'] == 'image/jpeg')`，当使用将发送`'image/pjpeg'`mime-type 的IE6/7 时可能会失败

这两种方法的替代方法是使用`mime_content_type()`，但它已被弃用为 PECL 模块，因此从 PHP 5.3.0 开始，有一些[FileInfo](http://www.php.net/manual/en/ref.fileinfo.php)函数应该与任何文件类型更加一致——尽管我还没有测试过。

有关 mime 类型的更多概述，请查看这篇 SO 文章：[How do I find the mime-type of a file with php?](https://stackoverflow.com/questions/134833/how-do-i-find-the-mime-type-of-a-file-with-php)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-09-04T11:05:25.057

永远不要相信`$_FILES["image"]["type"]`。它接受从浏览器发送的任何内容，因此对于图像类型不要相信它。所以使用`getimagesize()`，或者如果你想更安全地使用`finfo_open`

来源： http: [//php.net/manual/en/reserved.variables.files.php](http://php.net/manual/en/reserved.variables.files.php)

# java - OpenSSL 覆盖 RSA_sign 由智能卡执行

> ID：12261989
> 
> 赞同：3
> 
> 时间：2012-09-04T10:53:31.730
> 
> 标签：java, android, openssl, rsa, sign

我正在尝试让 OpenSSL 与 Java 和 Native C 一起用于我的 Android 应用程序。

到目前为止我做了什么：

初始化 OpenSSL，如：

```
ret = SSL_library_init();
SSL_load_error_strings();
ctx = SSL_CTX_new(SSLv23_method());
ret = SSL_CTX_use_certificate(ctx, sc_cert); // sc_cert is the Smart Cards auth certificate -> this is working!
_ssl = SSL_new(ctx); 
```

现在我尝试设置 rsa_sign 函数（我自己的）回调：

```
RSA_METHOD *rsameth = RSA_get_default_method();
rsameth -> rsa_verify = &sc_rsa_verify; // Just returns 1, but gets never called.
rsameth -> rsa_sign = &sc_rsa_sign;
rsameth -> flags |= RSA_FLAG_SIGN_VER; // If i would use 0x1FF my function gets called, why?
RSA_set_default_method(rsameth);

_rsa = RSA_new(); // handle error
// No need to do this: RSA_set_default_method already did that!
//_rsa -> meth = rsameth;
//_rsa -> flags |= RSA_FLAG_SIGN_VER;
//RSA_set_method(_rsa, rsameth);
ret = SSL_use_RSAPrivateKey(_ssl, _rsa);
RSA_set_default_method(rsameth); 
```

现在我的最后一步：

```
sbio = BIO_new_socket(sock, BIO_NOCLOSE); // Sock had been created before and is working!
SSL_set_bio(_ssl, sbio, sbio);
if(_session) SSL_set_session(_ssl, _session);
ret = SSL_connect(_ssl); 
```

现在在 SSL_connect 之后，我得到：

*   没有错误：当我自己的 RSA_sign (sc_rsa_sign) 未被调用时
*   或者：错误：1409441B：SSL 例程：SSL3_READ_BYTES:tlsv1 警报解密错误，当我自己的 RSA_sign (sc_rsa_sign) 被调用时

现在你可以看看我自己的 RSA_sign (sc_rsa_sign) 函数：

```
jbyteArray to_crypt = (*_env) -> NewByteArray(_env, m_length);
(*_env) -> SetByteArrayRegion(_env, to_crypt, 0, m_length, m);

// Jump into Java and do the crypt on card. This is working!
jbyteArray crypted = (*_env) -> CallObjectMethod(_env, _obj, _callback_cryptoncard, to_crypt);

// I also read that siglen should be the size of RSA_size(rsa), thus rsa -> n is not allowed to be NULL here. But it is! What is wrong here?
//int size = RSA_size(rsa);
//sigret = malloc(size);

// Obtain bytes from Java. Working (right size and crypted)!
*siglen = (*_env) -> GetArrayLength(_env, crypted);
sigret = (*_env) -> GetByteArrayElements(_env, crypted, NULL);

//(*_env) -> ReleaseByteArrayElements(_env, crypted, sigret, 0);

return 1; 
```

这就是我到目前为止所做的一切。几周以来一直在为此苦苦挣扎！希望有人能帮助我！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-11T08:09:41.720

我得到了错误（尴尬）：

`sigret = (*_env) -> GetByteArrayElements(_env, crypted, NULL);`

覆盖了指针，我将其更改为：

`unsigned char *sigrettemp = (*_env) -> GetByteArrayElements(_env, crypted, NULL);` `memcpy(sigret, sigrettemp, siglen);`

现在一切正常！

# unix - 确定 *nix 上的静态库 cpu 架构

> ID：12261998
> 
> 赞同：8
> 
> 时间：2012-09-04T10:53:54.010
> 
> 标签：unix, static-libraries, cpu-architecture

有一个静态库，但我不确定是否为 sparc 或 x86 架构编译。如何在 linux/unix 上确定这一点？

谢谢

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2012-09-04T11:01:39.500

我找到了 objdump 工具，

objdump -f 文件名