# StackOverflow 问答 11437000-11437999

# buffer - IMAP 响应限制大小

> ID：11437002
> 
> 赞同：0
> 
> 时间：2012-07-11T16:18:28.840
> 
> 标签：buffer, imap

我正在开发一个将连接到 Gmail 邮箱并检索特定电子邮件的电子邮件客户端。

现在我可以连接到我的邮箱，并且可以检索部分电子邮件而不是全部，无论我的缓冲区有多大，我仍然只能从我的电子邮件中获得 1400 个字符，然后在邮件正文的其余部分获得 Null。

您可以在此链接中找到电子邮件正文的屏幕截图

[http://www.elzouhery.com/Mail%20Snapshot.png](http://www.elzouhery.com/Mail%20Snapshot.png)

提前致谢

**编辑**

请参阅下面的完整代码

```
 static void Main(string[] args)
        {
            TcpIMAP imap = ConnectToEmail();
            Console.WriteLine("Total Messages " + imap.MailCount());
            Console.WriteLine("Total Unread Messages " + imap.MailUnreadCount());
            Console.WriteLine("******************************************************");
            imap.SelectInbox();

            StreamWriter writer = null;
            int mailCount = imap.MailCount();
            var mailSize = string.Empty;
            var content = string.Empty;
            var subject = string.Empty;

            for (int i = 1; i < mailCount; i++)
            {
                try
                {
                    writer = new StreamWriter(@"c:\Mails\" + i + ".txt", true);
                    content = imap.GetMessage(i).ToString();
                    writer.Write(content);
                    writer.Close();
                }
                catch(Exception ex)
                {
                    writer.Write(content);
                    Console.Write(ex.Message);
                    writer.Close();
                }
            }
        }

        private static TcpIMAP ConnectToEmail()
        {
            string host = "imap.gmail.com";
            string username = "************";
            string password = "************";

            TcpIMAP imap = new TcpIMAP();
            imap.Connect(host, 993);
            imap.AuthenticateUser(username, password);
            return imap;
        }

        public static string GetMailSubject(string Header)
        {
            var headerLines = Header.Split(Environment.NewLine.ToCharArray());
            foreach (var line in headerLines)
            {
                if (line.IndexOf("Subject") > -1)
                {
                    return line.Replace("Subject: ", "");
                }
            }
            return "";
        }
/***************************************************/
class TcpIMAP
{
    private TcpClient _imapClient;
    private Stream _imapNs;
    private StreamWriter _imapSw;
    private StreamReader _imapSr;

    public TcpIMAP()
    {

    }

    public TcpIMAP(string hostname, int port)
    {
        InitializeConnection(hostname, port);
    }

    public void Connect(string hostname, int port)
    {
        InitializeConnection(hostname, port);
    }

    private void InitializeConnection(string hostname, int port)
    {
        try
        {
            _imapClient = new TcpClient(hostname, port);
            System.Net.Security.SslStream sslstream = new System.Net.Security.SslStream(_imapClient.GetStream());
            sslstream.AuthenticateAsClient("imap.gmail.com");
            _imapNs = sslstream;
            _imapSw = new StreamWriter(_imapNs);
            _imapSr = new StreamReader(_imapNs);

            Console.WriteLine("*** Connected ***");
            Response();
        }
        catch (SocketException ex)
        {
            Console.WriteLine(ex.Message);
        }
    }

    public void AuthenticateUser(string username, string password)
    {
        _imapSw.WriteLine("$ LOGIN " + username + " " + password);
        _imapSw.Flush();
        Response();
    }

    public int MailCount()
    {
        _imapSw.WriteLine("$ STATUS INBOX (messages)");
        _imapSw.Flush();

        string res = Response();
        Match m = Regex.Match(res, "[0-9]*[0-9]");
        return Convert.ToInt32(m.ToString());
    }

    public int MailUnreadCount()
    {
        _imapSw.WriteLine("$ STATUS INBOX (unseen)");
        _imapSw.Flush();

        string res = Response();
        Match m = Regex.Match(res, "[0-9]*[0-9]");
        return Convert.ToInt32(m.ToString());
    }

    public string SelectInbox()
    {
        _imapSw.WriteLine("$ SELECT INBOX");
        _imapSw.Flush();
        return Response();
    }

    public object GetMessageHeaders(int index)
    {
        _imapSw.WriteLine("$ FETCH " + index + " (body[header.fields (from subject date)])");
        _imapSw.Flush();

        return Response();
    }

    public object GetMessage(int index)
    {
        _imapSw.WriteLine("$ FETCH " + index + " BODY.PEEK[]");
        _imapSw.Flush();

        return Response();
    }
    private string Response()
    {
        byte[] data = new byte[_imapClient.ReceiveBufferSize];
        int ret = _imapNs.Read(data, 0, data.Length);
        string output = Encoding.ASCII.GetString(data).TrimEnd().Replace("\0", "");
        return output;
    }

    public void Disconnect()
    {
        _imapSw.WriteLine("$ LOGOUT");
        _imapSw.Flush();
        _imapClient.Close();
    }

    public string SendCommand(string command)
    {
        _imapSw.WriteLine("$ " + command);
        _imapSw.Flush();
        return Response();
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-12T13:53:34.063

看起来您正在使用此处的代码或类似代码：

[http://www.codeproject.com/Articles/29594/How-to-Access-Emails-Using-the-IMAP-Protocol](http://www.codeproject.com/Articles/29594/How-to-Access-Emails-Using-the-IMAP-Protocol)

编写的代码是错误的，不适用于较大的消息。Response() 调用需要循环对 .Read() 的调用，追加结果直到该方法返回 0（这表示没有更多可用数据。）查看 NetworkStream.Read 的文档。

此外，最好使用 IMAP 库（请参阅[Accessing Imap in C#](https://stackoverflow.com/questions/670183/accessing-imap-in-c-sharp)）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-04-20T05:16:21.203

你只需要改变你的接收缓冲区大小

# mysql - MySQL - 如何确定任何给定月份的日期列表

> ID：11437003
> 
> 赞同：1
> 
> 时间：2012-07-11T16:18:31.873
> 
> 标签：mysql, calendar, days

是否有一个 MySQL 选择函数来列出任何给定月份的日期？

**更新**

我需要有这样的清单：

```
|day|
|1  |
|2  |
|3  |
|.  |
|.  |
|30 |
|31 | 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-11T17:46:24.753

这是一个纯 MySQL 解决方案，用于生成查询字符串以制作天数列表

```
SET @GivenDate = '2012-02-26';
SELECT DAY(CONCAT(DATE_FORMAT(dt28 + INTERVAL 4 DAY,
'%Y-%m'),'-01') - INTERVAL 1 DAY) - 27 INTO @DaysAfter27
FROM (SELECT CONCAT(DATE_FORMAT(dt,'%Y-%m'),'-28') dt28
FROM (SELECT @GivenDate dt) AA) A;
SELECT ELT(@DaysAfter27,' UNION (SELECT 28)',
' UNION (SELECT 28) UNION (SELECT 29)',
' UNION (SELECT 28) UNION (SELECT 29) UNION (SELECT 30)',
' UNION (SELECT 28) UNION (SELECT 29) UNION (SELECT 30) UNION (SELECT 31)')
INTO @DaysEndOfList;
SELECT CONCAT('SELECT * FROM',
' ((SELECT 1 Days) UNION (SELECT 2) UNION (SELECT 3)'
' UNION (SELECT  4) UNION (SELECT  5) UNION (SELECT  6)',
' UNION (SELECT  7) UNION (SELECT  8) UNION (SELECT  9)',
' UNION (SELECT 10) UNION (SELECT 11) UNION (SELECT 12)',
' UNION (SELECT 13) UNION (SELECT 14) UNION (SELECT 15)',
' UNION (SELECT 16) UNION (SELECT 17) UNION (SELECT 18)',
' UNION (SELECT 19) UNION (SELECT 20) UNION (SELECT 21)',
' UNION (SELECT 22) UNION (SELECT 23) UNION (SELECT 24)',
' UNION (SELECT 25) UNION (SELECT 26) UNION (SELECT 27)',
@DaysEndOfList,') A') INTO @DaysQuery;
PREPARE s1 FROM @DaysQuery;
EXECUTE s1;
DEALLOCATE PREPARE s1; 
```

只需将@GivenDate 设置为您喜欢的任何日期

这是我设置 @GivenDate 并执行它的四个示例

# 示例 1：2012-02-26

```
mysql> SET @GivenDate = '2012-02-26';
Query OK, 0 rows affected (0.00 sec)

mysql> SELECT DAY(CONCAT(DATE_FORMAT(dt28 + INTERVAL 4 DAY,
    -> '%Y-%m'),'-01') - INTERVAL 1 DAY) - 27 INTO @DaysAfter27
    -> FROM (SELECT CONCAT(DATE_FORMAT(dt,'%Y-%m'),'-28') dt28
    -> FROM (SELECT @GivenDate dt) AA) A;
Query OK, 1 row affected (0.00 sec)

mysql> SELECT ELT(@DaysAfter27,' UNION (SELECT 28)',
    -> ' UNION (SELECT 28) UNION (SELECT 29)',
    -> ' UNION (SELECT 28) UNION (SELECT 29) UNION (SELECT 30)',
    -> ' UNION (SELECT 28) UNION (SELECT 29) UNION (SELECT 30) UNION (SELECT 31)')
    -> INTO @DaysEndOfList;
Query OK, 1 row affected (0.00 sec)

mysql> SELECT CONCAT('SELECT * FROM',
    -> ' ((SELECT 1 Days) UNION (SELECT 2) UNION (SELECT 3)'
    -> ' UNION (SELECT  4) UNION (SELECT  5) UNION (SELECT  6)',
    -> ' UNION (SELECT  7) UNION (SELECT  8) UNION (SELECT  9)',
    -> ' UNION (SELECT 10) UNION (SELECT 11) UNION (SELECT 12)',
    -> ' UNION (SELECT 13) UNION (SELECT 14) UNION (SELECT 15)',
    -> ' UNION (SELECT 16) UNION (SELECT 17) UNION (SELECT 18)',
    -> ' UNION (SELECT 19) UNION (SELECT 20) UNION (SELECT 21)',
    -> ' UNION (SELECT 22) UNION (SELECT 23) UNION (SELECT 24)',
    -> ' UNION (SELECT 25) UNION (SELECT 26) UNION (SELECT 27)',
    -> @DaysEndOfList,') A') INTO @DaysQuery;
Query OK, 1 row affected (0.00 sec)

mysql> PREPARE s1 FROM @DaysQuery;
Query OK, 0 rows affected (0.00 sec)
Statement prepared

mysql> EXECUTE s1;
+------+
| Days |
+------+
|    1 |
|    2 |
|    3 |
|    4 |
|    5 |
|    6 |
|    7 |
|    8 |
|    9 |
|   10 |
|   11 |
|   12 |
|   13 |
|   14 |
|   15 |
|   16 |
|   17 |
|   18 |
|   19 |
|   20 |
|   21 |
|   22 |
|   23 |
|   24 |
|   25 |
|   26 |
|   27 |
|   28 |
|   29 |
+------+
29 rows in set (0.00 sec)

mysql> DEALLOCATE PREPARE s1;
Query OK, 0 rows affected (0.00 sec)

mysql> 
```

# 示例 2：2011-02-26

```
mysql> SET @GivenDate = '2011-02-26';
Query OK, 0 rows affected (0.00 sec)

mysql> SELECT DAY(CONCAT(DATE_FORMAT(dt28 + INTERVAL 4 DAY,
    -> '%Y-%m'),'-01') - INTERVAL 1 DAY) - 27 INTO @DaysAfter27
    -> FROM (SELECT CONCAT(DATE_FORMAT(dt,'%Y-%m'),'-28') dt28
    -> FROM (SELECT @GivenDate dt) AA) A;
Query OK, 1 row affected (0.00 sec)

mysql> SELECT ELT(@DaysAfter27,' UNION (SELECT 28)',
    -> ' UNION (SELECT 28) UNION (SELECT 29)',
    -> ' UNION (SELECT 28) UNION (SELECT 29) UNION (SELECT 30)',
    -> ' UNION (SELECT 28) UNION (SELECT 29) UNION (SELECT 30) UNION (SELECT 31)')
    -> INTO @DaysEndOfList;
Query OK, 1 row affected (0.00 sec)

mysql> SELECT CONCAT('SELECT * FROM',
    -> ' ((SELECT 1 Days) UNION (SELECT 2) UNION (SELECT 3)'
    -> ' UNION (SELECT  4) UNION (SELECT  5) UNION (SELECT  6)',
    -> ' UNION (SELECT  7) UNION (SELECT  8) UNION (SELECT  9)',
    -> ' UNION (SELECT 10) UNION (SELECT 11) UNION (SELECT 12)',
    -> ' UNION (SELECT 13) UNION (SELECT 14) UNION (SELECT 15)',
    -> ' UNION (SELECT 16) UNION (SELECT 17) UNION (SELECT 18)',
    -> ' UNION (SELECT 19) UNION (SELECT 20) UNION (SELECT 21)',
    -> ' UNION (SELECT 22) UNION (SELECT 23) UNION (SELECT 24)',
    -> ' UNION (SELECT 25) UNION (SELECT 26) UNION (SELECT 27)',
    -> @DaysEndOfList,') A') INTO @DaysQuery;
Query OK, 1 row affected (0.00 sec)

mysql> PREPARE s1 FROM @DaysQuery;
Query OK, 0 rows affected (0.00 sec)
Statement prepared

mysql> EXECUTE s1;
+------+
| Days |
+------+
|    1 |
|    2 |
|    3 |
|    4 |
|    5 |
|    6 |
|    7 |
|    8 |
|    9 |
|   10 |
|   11 |
|   12 |
|   13 |
|   14 |
|   15 |
|   16 |
|   17 |
|   18 |
|   19 |
|   20 |
|   21 |
|   22 |
|   23 |
|   24 |
|   25 |
|   26 |
|   27 |
|   28 |
+------+
28 rows in set (0.00 sec)

mysql> DEALLOCATE PREPARE s1;
Query OK, 0 rows affected (0.01 sec)

mysql> 
```

# 示例 3：今天 (2012-07-11)

```
mysql> SET @GivenDate = DATE(NOW());
Query OK, 0 rows affected (0.00 sec)

mysql> SELECT DAY(CONCAT(DATE_FORMAT(dt28 + INTERVAL 4 DAY,
    -> '%Y-%m'),'-01') - INTERVAL 1 DAY) - 27 INTO @DaysAfter27
    -> FROM (SELECT CONCAT(DATE_FORMAT(dt,'%Y-%m'),'-28') dt28
    -> FROM (SELECT @GivenDate dt) AA) A;
Query OK, 1 row affected (0.00 sec)

mysql> SELECT ELT(@DaysAfter27,' UNION (SELECT 28)',
    -> ' UNION (SELECT 28) UNION (SELECT 29)',
    -> ' UNION (SELECT 28) UNION (SELECT 29) UNION (SELECT 30)',
    -> ' UNION (SELECT 28) UNION (SELECT 29) UNION (SELECT 30) UNION (SELECT 31)')
    -> INTO @DaysEndOfList;
Query OK, 1 row affected (0.00 sec)

mysql> SELECT CONCAT('SELECT * FROM',
    -> ' ((SELECT 1 Days) UNION (SELECT 2) UNION (SELECT 3)'
    -> ' UNION (SELECT  4) UNION (SELECT  5) UNION (SELECT  6)',
    -> ' UNION (SELECT  7) UNION (SELECT  8) UNION (SELECT  9)',
    -> ' UNION (SELECT 10) UNION (SELECT 11) UNION (SELECT 12)',
    -> ' UNION (SELECT 13) UNION (SELECT 14) UNION (SELECT 15)',
    -> ' UNION (SELECT 16) UNION (SELECT 17) UNION (SELECT 18)',
    -> ' UNION (SELECT 19) UNION (SELECT 20) UNION (SELECT 21)',
    -> ' UNION (SELECT 22) UNION (SELECT 23) UNION (SELECT 24)',
    -> ' UNION (SELECT 25) UNION (SELECT 26) UNION (SELECT 27)',
    -> @DaysEndOfList,') A') INTO @DaysQuery;
Query OK, 1 row affected (0.00 sec)

mysql> PREPARE s1 FROM @DaysQuery;
Query OK, 0 rows affected (0.00 sec)
Statement prepared

mysql> EXECUTE s1;
+------+
| Days |
+------+
|    1 |
|    2 |
|    3 |
|    4 |
|    5 |
|    6 |
|    7 |
|    8 |
|    9 |
|   10 |
|   11 |
|   12 |
|   13 |
|   14 |
|   15 |
|   16 |
|   17 |
|   18 |
|   19 |
|   20 |
|   21 |
|   22 |
|   23 |
|   24 |
|   25 |
|   26 |
|   27 |
|   28 |
|   29 |
|   30 |
|   31 |
+------+
31 rows in set (0.00 sec)

mysql> DEALLOCATE PREPARE s1;
Query OK, 0 rows affected (0.00 sec)

mysql> 
```

# 示例 4：2012 年 6 月 26 日：

```
mysql> SET @GivenDate = '2012-06-26';
Query OK, 0 rows affected (0.00 sec)

mysql> SELECT DAY(CONCAT(DATE_FORMAT(dt28 + INTERVAL 4 DAY,
    -> '%Y-%m'),'-01') - INTERVAL 1 DAY) - 27 INTO @DaysAfter27
    -> FROM (SELECT CONCAT(DATE_FORMAT(dt,'%Y-%m'),'-28') dt28
    -> FROM (SELECT @GivenDate dt) AA) A;
Query OK, 1 row affected (0.00 sec)

mysql> SELECT ELT(@DaysAfter27,' UNION (SELECT 28)',
    -> ' UNION (SELECT 28) UNION (SELECT 29)',
    -> ' UNION (SELECT 28) UNION (SELECT 29) UNION (SELECT 30)',
    -> ' UNION (SELECT 28) UNION (SELECT 29) UNION (SELECT 30) UNION (SELECT 31)')
    -> INTO @DaysEndOfList;
Query OK, 1 row affected (0.00 sec)

mysql> SELECT CONCAT('SELECT * FROM',
    -> ' ((SELECT 1 Days) UNION (SELECT 2) UNION (SELECT 3)'
    -> ' UNION (SELECT  4) UNION (SELECT  5) UNION (SELECT  6)',
    -> ' UNION (SELECT  7) UNION (SELECT  8) UNION (SELECT  9)',
    -> ' UNION (SELECT 10) UNION (SELECT 11) UNION (SELECT 12)',
    -> ' UNION (SELECT 13) UNION (SELECT 14) UNION (SELECT 15)',
    -> ' UNION (SELECT 16) UNION (SELECT 17) UNION (SELECT 18)',
    -> ' UNION (SELECT 19) UNION (SELECT 20) UNION (SELECT 21)',
    -> ' UNION (SELECT 22) UNION (SELECT 23) UNION (SELECT 24)',
    -> ' UNION (SELECT 25) UNION (SELECT 26) UNION (SELECT 27)',
    -> @DaysEndOfList,') A') INTO @DaysQuery;
Query OK, 1 row affected (0.00 sec)

mysql> PREPARE s1 FROM @DaysQuery;
Query OK, 0 rows affected (0.00 sec)
Statement prepared

mysql> EXECUTE s1;
+------+
| Days |
+------+
|    1 |
|    2 |
|    3 |
|    4 |
|    5 |
|    6 |
|    7 |
|    8 |
|    9 |
|   10 |
|   11 |
|   12 |
|   13 |
|   14 |
|   15 |
|   16 |
|   17 |
|   18 |
|   19 |
|   20 |
|   21 |
|   22 |
|   23 |
|   24 |
|   25 |
|   26 |
|   27 |
|   28 |
|   29 |
|   30 |
+------+
30 rows in set (0.00 sec)

mysql> DEALLOCATE PREPARE s1;
Query OK, 0 rows affected (0.00 sec)

mysql> 
```

试试看 ！！！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-11T16:26:15.617

尝试使用`LAST_DAY('0000-00-00')`, 并从您喜欢的语言 (PHP/ASP/WHATEVER) 循环从最后一天到第一天。

`LAST_DAY()`

> 获取日期或日期时间值并返回该月最后一天的相应值

来自：[http ://dev.mysql.com/doc/refman/5.5/en/date-and-time-functions.html#function_last-day](http://dev.mysql.com/doc/refman/5.5/en/date-and-time-functions.html#function_last-day)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-11T17:02:57.820

我有一个名为 range 的表，其中包含从 0 到大约 100 的所有整数。它对这样的查询很有用：

```
SELECT '2012-07-01' + INTERVAL nr day AS day 
FROM test.range 
WHERE nr < 32 
HAVING MONTH(day) = MONTH('2012-07-01'); 
```

# linux - 使用通配符排除特定后缀的文件

> ID：11437005
> 
> 赞同：5
> 
> 时间：2012-07-11T16:18:36.790
> 
> 标签：linux, bash, wildcard

我正在尝试使用 bash 中的通配符，并尝试列出所有以“xyz”开头但不以“.TXT”结尾但得到不正确结果的文件。

这是我尝试过的命令：

```
$ ls -l xyz*[!\.TXT] 
```

它没有列出我目录中名称为“xyz”和“xyzTXT”的文件。但是，它列出了“xyz1”、“xyz123”。

似乎`[!\.TXT]`在“xyz *”之后添加会使外壳程序寻找以“xyz”开头并且后面至少有一个字符的东西。

任何想法为什么会发生以及如何更正此命令？我知道它可以使用其他命令来实现，但我特别想知道它失败的原因以及它是否可以仅使用通配符来完成。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-11T16:27:40.437

这些命令会做你想做的事

```
shopt -s extglob
ls -l xyz!(*.TXT)
shopt -u extglob 
```

您的命令不起作用的原因是因为 xyz*[!\.TXT] 相当于 xyz*[!\.TX] 意味着 xyz 后跟任何字符序列 (*)，最后是集合中的一个字符 {! ,\,.,T,X} 所以匹配 'xyzwhateveryouwant!' 'xyzwhateveryouwant' 'xyzwhateveryouwant'。'xyzwhateveryouwantT' 'xyzwhateveryouwantX'

编辑：whateveryouwant 不包含任何 !\.TX

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-07-11T16:55:01.610

我不认为这仅使用通配符是可行的。

您的命令不起作用，因为这意味着：

匹配任何你想要的内容，`xyz`它不能以后续字符结尾：`\`,`.`和. 第二个并不重要，因为你里面的内容被读作一个字符系列，而不是你想象的字符串。`T``X``T``[]`

`.`只要通配符内没有特殊含义，您也不需要“转义” 。

至少，这是我对通配符的了解。

# python - 按某些值过滤 dict

> ID：11437006
> 
> 赞同：2
> 
> 时间：2012-07-11T16:18:43.103
> 
> 标签：python, dictionary, filtering

我有一个看起来像这样的字典

```
db = {
'ObjectID': ['-1', '6', '10', '13', '13', '13', '-1', '-1', '-1', '-1', '-1', '-1'], 
'Test_value': ['25', '0,28999999', '100,00000000', 'Geometry', '126641,847400000000', '473106,185600000030', ' ', ' ', ' ', ' ', ' ', ' '], 
'Has_error': ['true', 'true', 'true', 'true', 'true', 'true', 'false', 'false', 'false', 'false', 'false', 'false'], 
'Message': ['Table row counts are different', 'ObjectID 6 is different for Field DIKTE_BRUGDEK', 'ObjectID 10 is different for Field RICHTING_1',                'ObjectID 13 is different for Field GEOMETRIE', 'ObjectID 13 is different for Field X', 'ObjectID 13 is different for Field Y', 'Shape types are the          same', 'Feature types are the same', 'Feature class extents are the same', 'GeometryDefs are the same', 'Field properties are the same', 'Spatial             references are the same'], 'Identifier': ['Table', 'FeatureClass', 'FeatureClass', 'FeatureClass', 'FeatureClass', 'FeatureClass', 'FeatureClass',            'FeatureClass', 'FeatureClass', 'GeometryDef', 'Field', 'SpatialReference'], 
'Base_value': ['23', '0,19000000', '394,00000000', 'Geometry', '126530,700000000000', '473095,700000000010', ' ', ' ', ' ', ' ', ' ', ' ']} 
```

我想根据“ObjectID”列表中的条目将其分解为一个较小的子集，即-1。我的第一次尝试是建立值的索引，例如：

```
filter_ind = []
for k,v in db.iteritems():
    for i in xrange(len(v)):
            if (k == 'ObjectID') and (int(v[i]) != -1):
                filter_ind.append(i) 
```

然后我尝试构建一个新的字典，使用 filter_ind 作为排序过滤器： `dict((k,v[i]) for i in filter_ind for k, v in db.iteritems())`

我得到的只是最后一场比赛，因为`v`不再是列表： `{'ObjectID':'13','Test_value':'473106,185600000030','Has_error':'true', 'Message':'ObjectID 13 is different for Field Y', 'Identifier':'FeatureClass','Base_value': '473095,700000000010'}`

问题：是否有另一种方法可以根据自身内部的特定值过滤 dict？如果这被认为是一种相对直接的方法，那么使用索引作为过滤器来创建新字典的聪明方法是什么？已经谢谢了。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-11T16:26:44.617

我认为你有点过于复杂了。首先，不需要嵌套循环。您可以通过以下方式获得所需的索引：

```
oids = db['ObjectID']
for i, id in enumerate(oids):
    if id != -1
        filter_ind.append(i) 
```

或者更简洁地说，

```
filter_ind = [i for i, id in enumerate(oids) if id != '-1'] 
```

然后，您可以使用 id 过滤各个列表：

```
dict((key, [val[i] for i in filter_ind]) for key, val in db.iteritems()) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-11T16:34:18.590

这是另一种选择：

```
from operator import itemgetter

iget = itemgetter(*(i for i, id in enumerate(db['ObjectID']) if int(id) != -1))
result = dict((k, list(iget(v))) for k, v in db.items()) 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-11T16:29:44.630

这是我做的：

```
new_db=db.copy()
fltr=[x=='-1' for x in new_db['ObjectID']] #Not actually necessary, but makes the code a little more readable

for k,v in new_db.items():
    new_db[k]=[x for i,x in enumerate(new_db[k]) if fltr[i]]  #replace old lists with new filtered ones. 
```

这与 senderle 发布的答案非常相似（我认为）。我使用布尔列表，而另一个答案使用索引。我的可能效率不高，但我更容易阅读/理解。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2014-06-04T21:41:09.760

这实际上是您可以使用的罕见场合[`itertools.compress`](https://docs.python.org/3.1/library/itertools.html#itertools.compress)：

```
from itertools import compress

sels = [x != '-1' for x in db['ObjectID']]
comp = {key: list(compress(vals, sels)) for key, vals in db.items()} 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-07-11T16:39:02.233

如果您使用的是 2.7：

```
from itertools import compress
indexes = [(x != -1) for x in db['ObjectID']]
result = dict((k, compress(v, indexes)) for k, v in db.iteritems()) 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-07-11T17:10:37.740

我喜欢这个：

```
[dict(zip(db.keys(),e)) for e in zip(*db.values()) if e[0]!='-1'] 
```

它返回一个字典列表，不包括带有 -1 的字典。

# python - Matplotlib histogram2d 归一化不等于 1

> ID：11437010
> 
> 赞同：1
> 
> 时间：2012-07-11T16:18:52.350
> 
> 标签：python, python-3.x, matplotlib

有一个这样的日子，我无法理解正在发生的事情。我有一个工具，可以从 X、Y、Z 坐标的数组（Numpy 数组）生成 2D 直方图（此时 Z 并不重要）。我需要对结果进行归一化，以便进行进一步的计算。但是，当使用 normed=True 命令时，数组的总和总是在 0.000006 左右。

我希望对整个直方图进行归一化，因此所有数组元素加起来为 1。将 normed 设置为 False 会正确返回 bin 中的样本数，但显然这不是归一化的。我已经用从 3k 元素一直到 30k 的数组对其进行了测试，但仍然是同样的问题。作为记录，我的数据包括所有 3 个轴上的负坐标。

代码如下：

```
def histogrammer(coords):      # coords is a 3D numpy array

H, xedges, yedges = np.histogram2d(coords[:,0], coords[:,1], bins=(50, 50), range=([-10000.0,10000.0],[-10000.0,10000.0]), normed=True)
H.shape, xedges.shape, yedges.shape
extent = [yedges[0], yedges[-1], xedges[-1], xedges[0]]

global displayHistograms
if displayHistograms == True:
    print('Displaying:')
    plt.imshow(H, extent=extent, interpolation='nearest')
    plt.colorbar()
    plt.show()

print('{0:.30f}'.format(np.sum(H)))    # Debug normalisation

return H 
```

我为两个数组运行此代码，生成两个不同的直方图。每个的打印语句：

```
0.000006250000000000000299510850
0.000006250000000000002840609692 
```

谁能告诉我哪里出错了？提前感谢您的帮助！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-11T17:23:17.740

`normed=True`将体积（即 的总和`binarea*binheight`）标准化为`1`，而不是高度的总和。因为这是您通常对直方图进行归一化的方式，因为归一化直方图是对概率密度函数的估计。

如果要使高度总和为 1，只需将未归一化的值除以总点数：

```
H, xedges, yedges = np.histogram2d(coords[:,0], coords[:,1], bins=(50, 50), range=([-10000.0,10000.0],[-10000.0,10000.0]))
H_normalized = H/float(coords.shape[0]) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-11T17:14:00.533

设置 normed=True 给出 bin 密度，而不是 bin 中总项目的分数。您需要根据 bin 宽度或手动计算。

# matlab - 找到每小时测量的时间序列的相关性

> ID：11437014
> 
> 赞同：0
> 
> 时间：2012-07-11T16:19:03.387
> 
> 标签：matlab, correlation

我有以下示例：

```
DateTime=datestr(datenum('2011-01-01 00:00','yyyy-mm-dd HH:MM'):1/24:...
    datenum('2011-12-31 23:00','yyyy-mm-dd HH:MM'),...
    'yyyy-mm-dd HH:MM');
Data = [datenum(DateTime) - datenum(2011,0,0),rand(13,length(DateTime(:,1)))']; 
```

该数据在第一列中包含一年中的某一天，在列中包含水温 (2:end-1)，在最后一列中包含气温。我想计算气温（最后一列）和每一列温度之间的相关性。我可以这样做：

```
R = arrayfun(@(i)nonzeros(tril(corrcoef(Data(:,i),Data(:,end)),-1)),2:size(Data,2)-1,'un',0); 
```

接下来，我试图为每一天（即每 24 行）生成一个相关值矩阵。所以我的问题是如何计算每列温度与空气温度之间的相关性，如上所述，但对于每一天，如“数据（：，i）”表示。结果应包括 365 行（天）和 12 列（温度）

此外，我可以通过以下方式找到每天的行号：

```
[a,b,b] = unique(floor(Data(:,1))); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-11T16:36:57.500

尝试以下操作：

```
dayIdx = floor(Data(:,1));
R = zeros(365,12);
for i=1:365
    c = corrcoef( Data(dayIdx==i,:) ); %# corr between all variables for one day
    R(i,:) = c(end,2:end-1);    %# extract those between water temps and air temp
end 
```

# extjs - ExtJS MVC 控制器引用选项卡面板的活动选项卡

> ID：11437022
> 
> 赞同：3
> 
> 时间：2012-07-11T16:19:43.960
> 
> 标签：extjs, extjs4, extjs-mvc, extjs4.1

我有一个 MVC 应用程序，它的[选项卡面板](http://docs.sencha.com/ext-js/4-1/#!/api/Ext.tab.Panel)呈现为视口中的唯一项目。在选项卡中，我想放置相同类型的组件，所有选项卡中的事件处理都是相同的。

因此，我需要一个 ExtJS MVC[控制器引用](http://docs.sencha.com/ext-js/4-1/#!/api/Ext.app.Controller-cfg-refs)到活动选项卡，这将导致我在活动选项卡中的组件上执行事件。有可能有这样的`ref`吗？

我目前的做法是这样的：

1.  获取对选项卡面板的参考
2.  调用[getActiveTab()](http://docs.sencha.com/ext-js/4-1/#!/api/Ext.tab.Panel-method-getActiveTab)
3.  在活动选项卡中调用组件的控制器事件

是否可以将上述 3 个步骤封装在一个控制器中`ref`？会很*漂亮*:-)

我正在使用 ExtJS 4.1。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-12T12:44:48.013

就个人而言，我认为控制器参考被高估了。这听起来像是一个简单的案例，您可以按照您的描述使用一个，但我更喜欢监听事件，并从触发组件导航到我需要的那个。

在您的情况下，假设您的选项卡面板包含常规分机面板，我会执行以下操作：

```
onButtonClick: function (button) {
    var panel = button.up('panel[tab]');

    if (panel) {
        panel.someMethod();
    }
} 
```

该`up`方法将找到最近的祖先，它是 xtype 面板并具有名为 tab 的属性。如果您有更具体的 xtype 或已知属性，请改用它们。

该面板应该是活动面板（否则它的按钮是如何单击的？）但是您可以通过转到`up`另一个级别的选项卡面板并在那里获取 activeTab 来检查它。

```
onButtonClick: function (button) {
    var panel = button.up('panel[tab]'),
        tabPanel = button.up('tabpanel'),
        activeTab = tabPanel && tabPanel.getActiveTab();

    if (panel && panel === activeTab) {
        panel.someMethod();
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-11T16:32:42.020

说你的 tabPanel 有`itemId: 'content'`. 在该面板内，您将拥有一堆选项卡，并且在每个选项卡上您将拥有一堆按钮（例如）。你想在一个控制器中处理所有这些按钮的点击。我对你的理解正确吗？

我相信你的控制器中的简单 ref 会起作用：

```
this.control('#content button', { 
       click: this.buttonClicked
   }
}); 
```

# python - 发现与 tar 的差异

> ID：11437024
> 
> 赞同：0
> 
> 时间：2012-07-11T16:19:45.603
> 
> 标签：python, shell, tar

我使用这样的脚本进行应用程序升级：

```
#!/bin/sh
tar fUxz data.tar.gz --overwrite
tar fd data.tar.gz >$0.diff
if [ -s $0.diff ]
then
  mv $0.diff $0.out
else
  echo "ok" >$0.out
fi 
```

如果提取/覆盖失败，我希望在 *.out 文件中包含一些错误消息。在我的目录中有文件 f1.lms：

```
-rw-r--r--+  1 user1 wheel    27777 Jun 16  2010 f1.lms 
```

脚本运行后：

```
-rw-r--r--+  1 user1 wheel    27777 Mar 20 14:29 f1.lms 
```

我在.out中收到了这样的消息：

```
f1.lms: Mode differs
f1.lms: Uid differs
f1.lms: Gid differs 
```

原因是什么——这是否意味着提取失败？我该怎么做才能“好”？

但是当我从我的 python 脚本 (pexpect) 调用这个脚本时，我收到了另一条消息：

```
tar: This does not look like a tar archive
tar: Skipping to next header
tar: Archive contains obsolescent base-64 headers
tar: Error exit delayed from previous errors 
```

我可以看到文件已提取，但没有警告“模式/.. 不同” - 看起来 diff 命令不起作用。

如何使这个脚本工作 - 简单地作为 shell 脚本和来自 python？

# jquery - jQuery：根据部分类名显示/隐藏多个元素

> ID：11437028
> 
> 赞同：0
> 
> 时间：2012-07-11T16:19:59.730
> 
> 标签：jquery, jquery-selectors, filter

我一直试图弄清楚这一点，并认为我需要过滤或查找？但是，我已经经历了很多迭代，仍然无法确定它......

**我要完成的工作：**

1.  从过滤项下拉列表中选择的选项
2.  获取项目的值并显示 span.item-ii 与值匹配的内部 html
3.  从 span.item-ii 的 lid- 开始上课
4.  显示具有相同类的 p.ptext 项目并隐藏其余项目

**我的标记看起来类似于：**

```
<select name="filteritem" id="filteritem">
  <option value="">- Select One-</option>
  <option value="Feliformia"> Feliformia </option>
  <option value="Caniformia">Caniformia</option>
</select>

<span class="item-ii lid-34 bigtitle">Feliformia</span>
<span class="item-ii lid-2 bigtitle">Caniformia</span>

...

<p class="ptext lid-34 moderate-me">Stenoplesictidae</p>
<p class="ptext lid-34 moderate-me">Percrocutidae</p>
<p class="ptext lid-2 moderate-me">Amphicyonidae</p>
<p class="ptext lid-2 moderate-me">Canidae</p> 
```

不确定它是否值得包括在内，但到目前为止，我有这个......（虽然，关于如何让它变得更好的提示会很棒......）

```
 $('select#filteritem').live('change', function() {
        var itemselection = $(this).val();

        if(itemselection == '') {
          $('span.itemii').show();
        } else {
          $('span.itemii').each(function() {
                $(this).hide();
                var itemtext = $(this).html();
                if(itemtext == itemselection) {
                   $(this).show();
                }
          });
        }
  });
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-11T16:31:33.583

我几乎会把选择改成这样

```
<option value="34"> Feliformia </option> 
```

代码很简单

```
 $('select#filteritem').live('change', function() {
  var itemselection = $(this).val();
  $('.ptext').hide();
  $('span.itemii').hide();
  if(itemselection == '')
     $('span.itemii').show();
  else
     $('.lid-' + itemselection).show();
 }); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-11T17:37:58.340

为了让它工作，你需要做很多工作，你需要了解逻辑是如何工作的。

最后，这就是你需要做的。

参考我的**[LIVE DEMO](http://jsfiddle.net/SivaCharan/t8rkf/1/)**

## HTML：

```
<select name="filteritem" id="filteritem">
  <option value="">-Select One-</option>
  <option value="Feliformia">Feliformia</option>
  <option value="Caniformia">Caniformia</option>
</select>
<br/>
<span class="item-ii lid-34 bigtitle">Feliformia</span>
<span class="item-ii lid-2 bigtitle">Caniformia</span>

...
<br/>
<p class="ptext lid-34 moderate-me">Stenoplesictidae</p>
<p class="ptext lid-34 moderate-me">Percrocutidae</p>
<p class="ptext lid-2 moderate-me">Amphicyonidae</p>
<p class="ptext lid-2 moderate-me">Canidae</p>​ 
```

## 查询：

```
$('select#filteritem').change(function() {
    var itemselection = $(this).val();
    if (itemselection == "") {
        $('span.item-ii').show();
        $('p.ptext').show();
    } else {
        $('span.item-ii').each(function() {
            if (itemselection == $(this).text()) {
                $('span.item-ii').hide();
                $(this).show();
                var classList =$(this).attr('class').split(/\s+/);
                $.each(classList, function(index, item) {
                    if ($('p.ptext').hasClass(item)) {
                        $('p.ptext').hide();
                        $('p.ptext.'+item).show();
                    }
                });
            }
        });
    }
});​ 
```

## CSS：

```
.item-ii {
    display:block;
}​ 
```

# wpf - 如何使用 WPF 创建一个类似于电子面包板的自定义控件？

> ID：11437029
> 
> 赞同：1
> 
> 时间：2012-07-11T16:20:06.323
> 
> 标签：wpf, expression-blend

面包板是一种用于实现简单电子电路的工具，它是一组节点，用于将 IC 放在它们上面并使用电线在它们之间连接以构建电路。 [维基百科](http://en.wikipedia.org/wiki/Breadboard)

我想要做的是在 WPF 中制作一个用户控件，以便在模拟电子电路的更大应用程序中使用。

用户必须在该面包板上放置 IC。

我使用的第一种方法是使用面包板的背景图像进行用户控制，其中包含一个布局容器，例如：StackPanel（水平堆叠 IC），高度覆​​盖图像的中心部分。

然后我制作了另一个类似于 IC 的用户控件，将其添加到前一个容器中，我画了引脚和一个黑色矩形。

具体来说，我现在要做的是使 IC 的尺寸相对于面包板的尺寸。这意味着当面包板的尺寸扩大或缩小时，IC 将保持在原来的位置。

这是面包板的 XAML 代码：

```
<UserControl
xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
xmlns:local="clr-namespace:Breadboard"
mc:Ignorable="d"
x:Class="Breadboard.MainControl"
x:Name="UserControl" d:DesignWidth="91.583" Width="Auto" d:DesignHeight="26.501" Padding="0">
<UserControl.Background>
    <ImageBrush ImageSource="Images/breadboard.png" Stretch="Uniform"/>
</UserControl.Background>

<StackPanel x:Name="LayoutRoot" Orientation="Horizontal" VerticalAlignment="Center" Margin="0" Height="8.835">
    <StackPanel.Background>
        <ImageBrush/>
    </StackPanel.Background>
    <local:IC Margin="0" Width="Auto"/>
</StackPanel> 
```

这是 IC 的 XAML 代码：

```
<Viewbox Stretch="Fill">

    <StackPanel x:Name="LayoutRoot" Height="40" Width="52.833">
        <StackPanel x:Name="UpperPins" HorizontalAlignment="Left" Orientation="Horizontal">
            <Image Source="Images/pin.png" Stretch="Fill" Width="7" Margin="3,0,0,0"/>
            <Image Source="Images/pin.png" Stretch="Fill" Width="7" Margin="6,0,0,0"/>
            <Image Source="Images/pin.png" Stretch="Fill" Width="7" Margin="6,0,0,0"/>
            <Image Source="Images/pin.png" Stretch="Fill" Width="7" Margin="6,0,3,0"/>
        </StackPanel>
        <Rectangle Fill="Black" Height="36"/>
        <StackPanel x:Name="LowerPins" HorizontalAlignment="Left" Orientation="Horizontal" RenderTransformOrigin="0.5,0.5">
            <StackPanel.RenderTransform>
                <TransformGroup>
                    <ScaleTransform/>
                    <SkewTransform/>
                    <RotateTransform Angle="180"/>
                    <TranslateTransform/>
                </TransformGroup>
            </StackPanel.RenderTransform>
            <Image Source="Images/pin.png" Stretch="Fill" Width="7" Margin="3,0,0,0"/>
            <Image Source="Images/pin.png" Stretch="Fill" Width="7" Margin="6,0,0,0"/>
            <Image Source="Images/pin.png" Stretch="Fill" Width="7" Margin="6,0,0,0"/>
            <Image Source="Images/pin.png" Stretch="Fill" Width="7" Margin="6,0,3,0"/>
        </StackPanel>
    </StackPanel>
</Viewbox> 
```

这是 IC（构造函数）的 C# 代码：

```
namespace Breadboard{
public partial class IC : UserControl
{
    public IC(int pins)
    {
        if (pins % 2 != 0) throw new OddNumberOfPins();
        this.InitializeComponent();
        Width = (pins/2)*(6 + 7);
        UpperPins.Children.Clear();
        LowerPins.Children.Clear();
        UpperPins.Children.Add(new Image() { Source = new BitmapImage(new Uri(@"Images/pin.png",UriKind.Relative)), Stretch = Stretch.Fill, Width = 7, Margin = new Thickness(3, 0, 0, 0) });
        LowerPins.Children.Add(new Image() { Source = new BitmapImage(new Uri(@"Images/pin.png", UriKind.Relative)), Stretch = Stretch.Fill, Width = 7, Margin = new Thickness(3, 0, 0, 0) });

        for (int i = 0; i < (pins/2)-2; i++)
        {
            UpperPins.Children.Add(new Image() { Source = new BitmapImage(new Uri(@"Images/pin.png", UriKind.Relative)), Stretch = Stretch.Fill, Width = 7, Margin = new Thickness(6, 0, 0, 0) });
            LowerPins.Children.Add(new Image() { Source = new BitmapImage(new Uri(@"Images/pin.png", UriKind.Relative)), Stretch = Stretch.Fill, Width = 7, Margin = new Thickness(6, 0, 0, 0) });

        }
        UpperPins.Children.Add(new Image() { Source = new BitmapImage(new Uri(@"Images/pin.png", UriKind.Relative)), Stretch = Stretch.Fill, Width = 7, Margin = new Thickness(6, 0, 3, 0) });
        LowerPins.Children.Add(new Image() { Source = new BitmapImage(new Uri(@"Images/pin.png", UriKind.Relative)), Stretch = Stretch.Fill, Width = 7, Margin = new Thickness(6, 0, 3, 0) });

    }

    public IC():this(6)
    {

    }
}

public class OddNumberOfPins : Exception
{
    public OddNumberOfPins()
    {
       //TODO
    }
}
} 
```

我正在使用 Expression Blend 来执行 XAML

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-11T16:37:02.763

创建一个网格，其列和行等于针孔的数量。放置空列/行以说明真实设备中的空列/行。

在每个网格单元格中添加一个网格。在内部网格中创建 3x3 行/列布局。对于第一行和最后一行/列，创建 * Gridlengths 以便您可以调整缓冲区和中间单元格之间的相对大小。

在内部网格的中间单元格中，使用画笔添加一个带有椭圆的矩形（同样，它保持相对）。

这是填充了第一行的 XAML。

```
<Window x:Class="WpfApplication5.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        Title="MainWindow" Height="579" Width="274">
    <Window.Resources>
        <Style TargetType="{x:Type UserControl}" x:Key="PinHole">
            <Setter Property="Template">
                <Setter.Value>
                    <ControlTemplate>
                        <Grid>
                            <Grid.ColumnDefinitions>
                                <ColumnDefinition Width="1*"/>
                                <ColumnDefinition Width="2*"/>
                                <ColumnDefinition Width="1*"/>
                            </Grid.ColumnDefinitions>
                            <Grid.RowDefinitions>
                                <RowDefinition Height="1*"/>
                                <RowDefinition Height="2*"/>
                                <RowDefinition Height="1*"/>
                            </Grid.RowDefinitions>

                            <Rectangle Grid.Row="1" Grid.Column="1">
                                <Rectangle.Fill>
                                    <DrawingBrush>
                                        <DrawingBrush.Drawing>
                                            <GeometryDrawing Brush="Black">
                                                <GeometryDrawing.Geometry>
                                                    <GeometryGroup>
                                                        <EllipseGeometry Center="1,1" RadiusX="1" RadiusY="1"/>
                                                        <EllipseGeometry Center="1,1" RadiusX=".5" RadiusY=".5"/>
                                                    </GeometryGroup>
                                                </GeometryDrawing.Geometry>
                                            </GeometryDrawing>
                                        </DrawingBrush.Drawing>
                                    </DrawingBrush>
                                </Rectangle.Fill>
                            </Rectangle>
                        </Grid>
                    </ControlTemplate>
                </Setter.Value>
            </Setter>
        </Style>
    </Window.Resources>
    <Grid>
        <Grid.ColumnDefinitions>
            <ColumnDefinition/>
            <ColumnDefinition/>
            <ColumnDefinition/>
            <ColumnDefinition/>
            <ColumnDefinition/>
            <ColumnDefinition/>
            <ColumnDefinition/>
            <ColumnDefinition/>
            <ColumnDefinition/>
            <ColumnDefinition/>
            <ColumnDefinition/>
            <ColumnDefinition/>
            <ColumnDefinition/>
            <ColumnDefinition/>
            <ColumnDefinition/>
            <ColumnDefinition/>
            <ColumnDefinition/>
        </Grid.ColumnDefinitions>
        <Grid.RowDefinitions>
            <RowDefinition/>
            <RowDefinition/>
            <RowDefinition/>
            <RowDefinition/>
            <RowDefinition/>
            <RowDefinition/>
            <RowDefinition/>
            <RowDefinition/>
            <RowDefinition/>
            <RowDefinition/>
            <RowDefinition/>
            <RowDefinition/>
            <RowDefinition/>
            <RowDefinition/>
            <RowDefinition/>
            <RowDefinition/>
            <RowDefinition/>
            <RowDefinition/>
            <RowDefinition/>
            <RowDefinition/>
            <RowDefinition/>
            <RowDefinition/>
            <RowDefinition/>
            <RowDefinition/>
            <RowDefinition/>
            <RowDefinition/>
            <RowDefinition/>
            <RowDefinition/>
            <RowDefinition/>
            <RowDefinition/>
            <RowDefinition/>
            <RowDefinition/>
            <RowDefinition/>
            <RowDefinition/>
            <RowDefinition/>
            <RowDefinition/>
            <RowDefinition/>
        </Grid.RowDefinitions>
        <UserControl Grid.Column="0" Style="{StaticResource ResourceKey=PinHole}"/>
        <UserControl Grid.Column="1" Style="{StaticResource ResourceKey=PinHole}"/>
        <UserControl Grid.Column="3" Style="{StaticResource ResourceKey=PinHole}"/>
        <UserControl Grid.Column="4" Style="{StaticResource ResourceKey=PinHole}"/>
        <UserControl Grid.Column="5" Style="{StaticResource ResourceKey=PinHole}"/>
        <UserControl Grid.Column="6" Style="{StaticResource ResourceKey=PinHole}"/>
        <UserControl Grid.Column="7" Style="{StaticResource ResourceKey=PinHole}"/>
        <UserControl Grid.Column="9" Style="{StaticResource ResourceKey=PinHole}"/>
        <UserControl Grid.Column="10" Style="{StaticResource ResourceKey=PinHole}"/>
        <UserControl Grid.Column="11" Style="{StaticResource ResourceKey=PinHole}"/>
        <UserControl Grid.Column="12" Style="{StaticResource ResourceKey=PinHole}"/>
        <UserControl Grid.Column="13" Style="{StaticResource ResourceKey=PinHole}"/>
        <UserControl Grid.Column="15" Style="{StaticResource ResourceKey=PinHole}"/>
        <UserControl Grid.Column="16" Style="{StaticResource ResourceKey=PinHole}"/>
    </Grid>
</Window> 
```

现在，当您添加 IC 时，将它们分成可视部分（左上角等），并将这些部分排列在右侧网格单元位置，作为一个单元。

在代码中，您可以拥有一个 IC 单元，将其提供给左上角的单元格，然后 IC 的各个部分会将其 Grid.Row 和 Grid.Column 设置到正确的位置。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-11T17:47:54.970

将您当前在 IC XAML 中的 Viewbox 向上移动以包围面包板的根 StackPanel。一旦你这样做了，你可以在面包板内的所有东西上使用固定大小，并将 IC 上所需的相对大小也设置为固定大小，Viewbox 将为你处理所有缩放，保持控件的所有内部相对大小不变。

# ios - 如何提高 iPad 上的 ScreenCaptureView 效率？

> ID：11437034
> 
> 赞同：1
> 
> 时间：2012-07-11T16:20:22.423
> 
> 标签：ios, video, uiview, screen, capture

我的任务是一个新的 iOS 项目。作为其中的一部分，我本质上是在寻找带有子视图的 UIView 的一系列屏幕截图，并将它们编译成视频文件。

我已经搜索过这个参考[ScreenCaptureView](http://codethink.no-ip.org/wordpress/archives/673)的大多数主题，我已经尝试过并且它有效！

我正在使用 iOS SDK 5.1，并在构建阶段部分中将 -fno-objc-arc 应用于 ScreenCaptureView.m 进行编译。

在进一步阅读之前，请注意我并不总是可以使用硬件进行测试，目前只在模拟器中进行了测试。当我可以访问设备进行测试时，我会更新。

这在 iPhone 上很棒，我发现由于屏幕尺寸的原因，它运行顺畅，似乎一点也不滞后。我确实偶尔会丢帧，但这不是我关心的问题。

我正在创建一个应用程序来记录 iPhone 或 iPad 上的屏幕。

当我使用 iPad 模拟器时，ScreenCaptureView 的效率显着下降。我发现，大概是由于 iPad 显示器的分辨率，它必须更加努力地捕捉屏幕并将其写入帧。

视频变得生涩，并且丢失了很多帧。

如何提高 ScreenCaptureView 方法的效率，或者我可以使用另一种方法来捕获 UIView 中显示的内容？

我承认我对一般的图像处理/视频工作非常陌生，并且没有可以借鉴的经验。

非常感谢！

# php - 在 Codeigniter 中安装 PHP-Payments

> ID：11437038
> 
> 赞同：0
> 
> 时间：2012-07-11T16:20:48.030
> 
> 标签：php, codeigniter, payment

我正在使用 CodeIgniter 开展一个项目，该项目必须处理信用卡付款，包括一次性购买和定期付款。昨天我偶然发现了 Sparks 和 codeigniter-payments。我安装了 Sparks 和 code-igniter spark，但后来发现文档说它们应该在的目录中没有配置文件 - 甚至没有示例配置。

在给作者发邮件后，他解释说我需要使用 --recursive 开关从 github 获取最新版本，我很快就这样做了（并且非常感谢他的回复）。然而，事实证明，该项目已成为独立于 Sparks 框架的 PHP-Payments。

PHP-Payments 文档中的使用信息建议使用 include 语句：

```
include('/path/to/payments/payments.php'); 
```

据我所知，这在 CodeIgniter 中不起作用。有没有其他人在他们的 CodeIgniter 项目中使用 PHP-Payments 的经验？如果是这样，您建议我将 PHP-Payments 文件放在 CodeIgniter 目录结构的哪个位置？您是否按照 Calvin 的建议使用了 include 语句？或者您是否使用了以下典型的 CodeIgniter 语法：

```
$this->load-> 
```

提前谢谢你，因为我以前从未在 CodeIgniter 中使用过第三方插件。

另外，我检查了我的主机正在运行的 PHP 版本，它是 v5.2.17。我知道 PHP-Payments 项目依赖于后期静态绑定，并且此功能在低于 5.3.0 的 PHP 版本中不可用。因此，我已经联系了我的主机以将 PHP 升级到更新版本，如果他们不愿意或无法这样做，那么我会将我的项目移动到运行版本 >=5.3.0 的主机上。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-11T20:54:54.727

您需要使用[sparks](http://getsparks.org/packages/codeigniter-payments/show)（它将进入您的 sparks 文件夹，而不是库）：

php 工具/spark install -v0.1.4 codeigniter-payments

安装后，按照 sparks 链接中的说明进行操作。

其他选择：

1.  在 CodeIgniter 之外包含 PHP-Payments 并要求它
2.  将其放入第三方包中并从那里加载

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-07-11T18:11:30.573

我从未使用过 PHP Payments，但根据我的 CI 经验，我会说这些文件属于 library 文件夹。

您可以相当轻松地创建一个新库。- [CodeIgniter 库文档](http://codeigniter.com/user_guide/general/creating_libraries.html)

CodeIgniter 确实要求您遵循它们的命名约定，因此您可能必须为自己创建类，以便您可以加载库并访问您希望在控制器中使用的 PHP 支付功能。

我之前已经安装了基本的 PayPal 和 Authorize.net API 作为库，它工作得很好。

# jquery - 使用 jQuery 验证插件选择下拉字段时需要文本字段

> ID：11437045
> 
> 赞同：1
> 
> 时间：2012-07-11T16:21:19.247
> 
> 标签：jquery, html, validation

如果选择了选择/下拉字段，我试图要求名字字段，使用 jQuery 验证插件[http://docs.jquery.com/Plugins/Validation](http://docs.jquery.com/Plugins/Validation)

我知道如何使用复选框来完成此操作，但我不知道如何使用下拉框来完成此操作

你会在这里看到我想要完成的事情[http://jsfiddle.net/SupTT/2/](http://jsfiddle.net/SupTT/2/)

另外，当未选择下拉字段时，我将如何要求名字字段，例如未选中复选框时：“必需：#checkbox-id:unchecked”

任何帮助表示赞赏

固定的：

```
$("form").validate({ 
 rules: {
   first_name: {
     required: "#fruit:blank"
   }
 } 
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-11T16:32:45.337

编辑：
好的，你需要的只是`depends`你需要的

```
$("form").validate({
rules: {
first_name: {
   required:  {
   depends: function(element){
        return $('#fruit option:selected').text() != '';
         }
      }
     } 
   }

 }); 
```

……

```
<p>
Fruit <select name="fruit" id="fruit">
<option value=""></option>
<option value="orange">orange</option>
<option value="apple">apple</option> 
```

链接 [小提琴](http://jsfiddle.net/SupTT/3/)

# unix - 需要在unix中格式化两个unl文件

> ID：11437050
> 
> 赞同：-3
> 
> 时间：2012-07-11T16:21:38.143
> 
> 标签：unix, informix

我有两个 unl 文件.. sample.unl test.unl 如果我使用下面的 cat 命令，我的输出格式不正确。

```
{
cat sample.unl
echo
cat test.unl
} 
```

.

```
store_nbr   country_code    date    
400  CA 2010-06-11 12:00:49 
```

我希望输出正确对齐，如下所示..

```
store_nbr             country_code               date   
400                   CA                         2010-06-11 12:00:49 
```

请帮助我..谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-11T18:18:07.173

为此编写小python脚本：

```
$ cat format.py 
#!/usr/bin/python

import sys, re

with open(sys.argv[1], "r") as f:
    for line in f:
        print "%-20s %-20s %-20s" % tuple(re.split('\s+', line.rstrip('\n'), 2)) 
```

使用示例：

```
$ python format.py sample.unl
store_nbr            country_code         date                
400                  CA                   2010-06-11 12:00:49 
```

# java - 为什么添加一行计算会减少运行时间？

> ID：11437051
> 
> 赞同：1
> 
> 时间：2012-07-11T16:21:38.410
> 
> 标签：java

在测试我的一个[相关问题](https://stackoverflow.com/questions/6232446/float-or-double/11238970#comment15086100_11238970)的答案时，我写道：

```
public static long timeDouble(int iters) {
    long start = System.currentTimeMillis();
    for (; iters >=0; iters--) {
        double a = 1.2, b = 2.246, c = 4.4924, d = 8.98488, e = 17.969772;
        a = Math.sqrt(a);
        b = Math.cos(b);
        c = Math.sin(c);
        d = Math.tan(d);
        e = a + b - c * d / (e + 1);
        e = Math.pow(e, e);
    }
    return System.currentTimeMillis() - start;
} 
```

该方法的运行时间平均为 414 毫秒（使用 1000000 次迭代）。但是，有些东西让我添加了这一行：

```
e = e + d - c * b / (a + 1); 
```

紧接前`e = Math.pow(e, e);`加上这条线，计算这种方法的时间平均下降到 206 毫秒（使用相同的测试条件）。

这是什么原因造成的？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-11T16:28:40.653

循环中的值是恒定的，它们不依赖于`iters`. 因此这些值始终相同。

```
 double a = 1.2, b = 2.246, c = 4.4924, d = 8.98488, e = 17.969772;
    a = Math.sqrt(a);
    b = Math.cos(b);
    c = Math.sin(c);
    d = Math.tan(d);
    e = a + b - c * d / (e + 1);
    e = Math.pow(e, e); 
```

在第一个版本中，您计算`e`​​的值是 17.969772 ^ 17.969772。在第二个中，您计算`e`​​的值为 0.69761863561124537 ^ 0.69761863561124537。这（根据您自己的证据）更容易计算。

# android - 按下后退出启动画面

> ID：11437053
> 
> 赞同：0
> 
> 时间：2012-07-11T16:21:49.513
> 
> 标签：android, exit, splash-screen, back-button

在启动画面中按“BACK”时，应用程序退出并在一段时间后重新启动。我不希望应用程序从启动画面退出后重新启动。我试过了

```
 public boolean onKeyDown(int keyCode, KeyEvent event) 
    {
if (keyCode == KeyEvent.KEYCODE_BACK) 
{
    Start.this.finish();
}
return super.onKeyDown(keyCode, event); 

} 
```

这但它不工作。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-11T16:31:56.387

如果您在 SplashScreen 中创建了另一个线程以在一段时间后开始您的下一个活动，则意味着您也必须停止它。

# objective-c - 在objective-c中澄清图像属性

> ID：11437054
> 
> 赞同：1
> 
> 时间：2012-07-11T16:22:07.557
> 
> 标签：objective-c, uiimage, cgrect, cgcontextref

我正在尝试为我在 Objective-c 中编写的类创建随机生成的图像，并且只是希望对不同的图像属性和类型有所了解。我想创建以下功能：

-(UIImage*)randomlyGenerateAnImage;

该函数将使用成员数据创建一个准随机算法生成的 UIImage。

我真的很难理解 UIImages、CGRects 和 CGContextRefs 之间的关系。哪个是我绘制的，我分配给 UIImage 什么。

*编辑* 我正在尝试动态生成我的图像，例如：

UIImage * newImage = [[UIImage alloc] "initBlankImageWithSize(X, Y)"];

CGContextRef * newContext = "getContextFromImage(newImage)";

"在 newContext 上绘制......";

返回新图像；

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-11T16:35:54.533

You need a context where you can draw in. You can get the current context with `UIGraphicsGetCurrentContext()`.

You can create an image from the current context via `UIGraphicsGetImageFromCurrentImageContext()`

The `CGRect` is a rectangle inside your view.

You should read Apple's drawing guide to get more informations.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-11T16:33:33.693

对于`UIViewController`由 a 填充的 a`UIImageView`你会做

```
UIGraphicsBeginImageContext(self.view.frame.size);
[sigBox.image drawInRect:CGRectMake(0, 0, self.view.frame.size.width, self.view.frame.size.height)];
//drawing code that says CGContext a lot
sigBox.image = UIGraphicsGetImageFromCurrentImageContext();
UIGraphicsEndImageContext(); 
```

借鉴`UIImage`“拥有”的`UIImageView`。因此，您绘制`CGContext`由 a 定义的`CGRect`，然后您可以`UIImage`从中返回 a `CGContext`。我怀疑这种解释是否能让任何事情变得更清楚，但希望代码能做到。

# objective-c - 绑定到媒体密钥，阻止 iTunes OS X

> ID：11437058
> 
> 赞同：11
> 
> 时间：2012-07-11T16:22:18.143
> 
> 标签：objective-c, macos, cocoa

我一直在使用这里描述的方法：[http ://weblog.rogueamoeba.com/2007/09/29/](http://weblog.rogueamoeba.com/2007/09/29/)

并阅读此线程：[Binding to Media keys on Apple keyboards under OSX 10.5](https://stackoverflow.com/questions/1053351/binding-to-media-keys-on-apple-keyboards-under-osx-10-5)

我已经覆盖了 sendEvent 类，并且可以检测媒体键输​​入。问题是当按下播放按钮时 iTunes 会启动。上面提到的线程指出 iTunes 在其他地方（未知）挂钩到事件，因此没有办法阻止它获取 Play/Pause(F8) 事件。

作为一种解决方法，我一直在打开 Quicktime Player，没有文件。但是，在 Mountain Lion 上，Quicktime 显然会在一段时间不活动后自行关闭，从而使这种解决方法不可行。

我知道 Spotify 和 MPlayerX 等应用程序已经能够以某种方式实现这一点。他们似乎完全阻止了该事件，而不仅仅是 iTunes。

更多谷歌搜索，我发现了这个 Discussions.apple.com/thread/2122639?start=210&tstart=0 ，它跟踪到远程控制守护程序通过 Applescript 进行调用。有一些解决方法可以删除 rcd 守护程序的执行权限（需要 sudo，必须在 OSX 更新时重新运行）。nomitsu.com/contents/MMFix_src.tgz

有没有人知道他们（MPlayerX、Spotify）是如何做到这一点的？

感谢您的任何建议。

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-07-11T20:26:56.197

我找到了一个预先存在的课程：http: [//overooped.com/post/2593597587/mediakeys](http://overooped.com/post/2593597587/mediakeys)

哇，这需要一些寻找！希望它可以帮助别人！

# python - 在 ModelChoiceField Django 中使用 __unicode__ 以外的方法

> ID：11437060
> 
> 赞同：6
> 
> 时间：2012-07-11T16:22:25.733
> 
> 标签：python, django, forms, django-forms, django-queryset

我正在处理 Django 中的一些表单。一个字段是`ForeignKey`模型中的 a，因此在表单中表示为 a `ModelChoiceField`。当前`ModelChoiceField`使用`__unicode__`模型的方法来填充列表，这不是我想要的行为。我希望能够使用模型的另一种方法。从文档看来，我可以强制使用自己的`QuerySet`，但我看不出这将如何帮助我使用`__unicode__`.

如果可能的话，我真的宁愿避免将其与默认表单方法分离。

有什么建议么？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-07-11T16:36:37.017

您可以覆盖`label_from_instance`以指定不同的方法：

```
from django.forms.models import ModelChoiceField

class MyModelChoiceField(ModelChoiceField):

    def label_from_instance(self, obj):
        return obj.my_custom_method() 
```

然后，您可以在表单中使用此字段。此方法旨在在子类中被覆盖。这是原始来源`django.forms.models`：

```
# this method will be used to create object labels by the QuerySetIterator.
# Override it to customize the label.
def label_from_instance(self, obj):
    """
    This method is used to convert objects into strings; it's used to
    generate the labels for the choices presented by this object. Subclasses
    can override this method to customize the display of the choices.
    """
    return smart_unicode(obj) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-11T16:34:25.240

与其说是自定义查询集，不如说是将您的查询集转换为列表。如果你只是这样做，`choices=some_queryset`Django 会以以下形式做出选择：

```
(item.pk, item.__unicode__()) 
```

因此，只需使用列表理解自己做：

```
choices=[(item.pk, item.some_other_method()) for item in some_queryset] 
```

# asp.net-mvc - jQuery 脚本包含在 mvc 4 模板的页面底部

> ID：11437063
> 
> 赞同：6
> 
> 时间：2012-07-11T16:22:48.880
> 
> 标签：asp.net-mvc, asp.net-mvc-4

我正在查看 MVC 4 候选版本和包含的默认 Internet 模板。我注意到在 _Layout.cshtml 中，它们在页面底部包含了 jQuery 包：

```
 @Scripts.Render("~/bundles/jquery")
        @RenderSection("scripts", required: false)
    </body>
</html> 
```

是否有理由将该脚本包含在页面底部而不是带有modernizr 脚本的头部？这样做有什么好处吗？我一直认为您应该将脚本包含在 head 部分中。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-11T16:30:58.530

这通常是为了性能。查看 Yahoo 性能指南。

[http://developer.yahoo.com/performance/rules.html/](http://developer.yahoo.com/performance/rules.html/)

他们解释了为什么脚本可以在底部更好。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-11T16:36:10.183

对于*一些*使用jquery ui 主题的网站，*最好在顶部放置jquery 和jquery-ui*。这样，无样式内容的闪现可以保持在最低限度。

另一种技术是最初隐藏 jquery 主题元素，但这可能会给人一种加载时间较慢的印象。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-11T16:25:17.430

我无法具体回答这种情况，但这个想法通常是浏览器试图以大致文档顺序呈现页面。最后包含脚本意味着渲染器可以完成其工作并渲染页面的静态部分，*然后*将加载脚本。我无法给出关于它对用户体验的真正影响有多大的具体数字，但我们的想法是让页面在脚本完成加载之前就可以查看。

# .htaccess - .htaccess 在某些 url 上强制 https 否则强制 http

> ID：11437065
> 
> 赞同：1
> 
> 时间：2012-07-11T16:22:55.227
> 
> 标签：.htaccess, codeigniter, ssl

我正在尝试在网站的 3 个页面上强制 SSL，并将其余页面强制为 http

mydomain.com/register 、 mydomain.com/checkout 和 mydomain.com/thanks 都需要重定向到 https: 但任何其他页面都应该只使用 http:

这可能吗？

我目前在我的 htaccess 中有一些 codeigniter 特定的东西

```
RewriteEngine on
RewriteCond $1 !^(index\.php|assets|robots\.txt)
RewriteRule ^(.*)$ index.php/$1 [L] 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-05-17T06:20:16.160

我认为这段代码会起作用（特别是对于 CodIgniter）

```
RewriteEngine on

# force HTTPS
RewriteCond %{HTTPS} =off
RewriteCond %{REQUEST_URI} (register|checkout|thanks)
RewriteRule .* https://%{HTTP_HOST}%{REQUEST_URI} [L,R=301]

# force HTTP
RewriteCond %{HTTPS} =on
RewriteCond %{REQUEST_URI} !(register|checkout|thanks|css|img|js)
RewriteRule .* http://%{HTTP_HOST}%{REQUEST_URI} [L,R=301]

RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule .* index.php/$0 [L] 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-11T16:26:59.670

不是 .htaccess 解决方案，但这是我强制 https 连接的方式：

```
// Redirect to secure port
if ($_SERVER['SERVER_PORT'] != 443)
{
    $location = 'Location: https://www.blah.com';
    header($location);
} 
```

希望这可以帮助。

# json - 弹性搜索映射坏映射

> ID：11437071
> 
> 赞同：1
> 
> 时间：2012-07-11T16:23:15.140
> 
> 标签：json, mapping, elasticsearch

我对弹性搜索索引有以下映射。我将其发布（“PUT”）到[http://abc.com/test/article/_mapping](http://abc.com/test/article/_mapping)。

```
{
    "article": {
        "settings": {
            "analysis": {
                "analyzer": {
                    "stem": {
                        "tokenizer": "standard",
                        "filter": [
                            "standard",
                            "lowercase",
                            "stop",
                            "porter_stem"
                        ]
                    }
                }
            }
        },
        "mappings": {
            "properties": {
                "DocumentID": {
                    "type": "string"
                },
                "ContentSource": {
                    "type": "integer"
                },
                "ContentType": {
                    "type": "integer"
                },
                "PageTitle": {
                    "type": "string",
                    "analyzer": "stem"
                },
                "ContentBody": {
                    "type": "string",
                    "analyzer": "stem"
                },
                "URL": {
                    "type": "string"
                }
            }
        }
    }
} 
```

我收到来自 Elastic Search 的 OK 消息。但是当我去[http://abc.com/test/article/_mapping](http://abc.com/test/article/_mapping)时，我没有看到映射的设置。我看到的只有这个

```
{  "article" : {   "properties" : {   }  }} 
```

在为分析器添加设置部分之前，我已经完成了这项工作。任何帮助表示赞赏！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-11T17:03:20.527

我想到了。第一个“文章”字符串需要删除。并且“PUT”应该针对[http://abc.com/index](http://abc.com/index)

# c# - 将元素插入列表时参数超出范围异常

> ID：11437075
> 
> 赞同：1
> 
> 时间：2012-07-11T16:23:29.660
> 
> 标签：c#

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;
using System.Diagnostics;

namespace ConsoleApplication1
{
    class Program
    {
        static void Main(string[] args)

{
    List<string> ul = new List<string>();
    Process[] procs = Process.GetProcesses();
    int u = 0;

    foreach (Process proc in procs)
    {
        ul[u] = proc.ProcessName;
        u++;
    }

}
}
} 
```

每次执行循环时，我都想将每个进程名称移动到我的数组列表中，但我遇到了出站异常。请提供一些示例代码。提前致谢...

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-11T16:25:20.757

您无法访问 List 中尚未设置的元素。使用 .Add() 函数。

```
foreach (Process proc in procs)
{
    ul.Add(proc.ProcessName);
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-11T16:26:33.607

尝试使用 .Add() 函数，如下所示：

```
 static void Main(string[] args)
        {
            List<string> ul = new List<string>();

            foreach (Process proc in Process.GetProcesses())
            {
                ul.Add(proc.ProcessName);
            }
        } 
```

List<> 创建时具有默认大小，并且在您的代码中添加元素直到该大小已满（此时下一个“插入”失败。add() 方法检查此大小限制是否不再足够，并在需要时增加列表的大小。

此代码还消除了对几个变量的需要。

# vba - Selecton.Rows.AutoFit 不起作用 - 为什么？

> ID：11437076
> 
> 赞同：1
> 
> 时间：2012-07-11T16:23:32.293
> 
> 标签：vba, excel, excel-2007

我对一段 VBA 代码有疑问：

```
 Sub Macro3()
    Sheets("Output").Select
    Rows("5:160").Select
    Selection.Rows.AutoFit
    End Sub 
```

什么 - 从我的角度来看它应该做的 - 将 Autosize 应用于工作表“输出”中的行 5:160。我将代码添加到工作表“输出”中，因此每当我打开它时，它应该会自动正确调整大小。然而，什么也没有发生。但是，如果我手动选择行并按 CRTL+C+H+O+A 自动调整行的大小，它可以正常工作。

有谁猜出错误在哪里？将是一个巨大的帮助！

预先感谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-11T16:31:56.027

> 每当我打开它时，它应该会自动正确调整大小。

为此，您必须将代码放在`ThisWorkbook`代码区域中，并且您必须使用`Workbook_Open()`事件

看到这个

```
Private Sub Workbook_Open()
    Sheets("Output").Rows("5:160").Rows.AutoFit
End Sub 
```

**快照**

![在此处输入图像描述](../Images/2aa910b82d00018ef980f9d7fedd247e.png)

# c# - 如何在 C# 中向/从纯字符串中插入/删除连字符？

> ID：11437079
> 
> 赞同：6
> 
> 时间：2012-07-11T16:23:38.303
> 
> 标签：c#, winforms, visual-studio

我有一个这样的字符串；

```
 string text =  "6A7FEBFCCC51268FBFF"; 
```

我有一种方法，**我想插入逻辑，将 4 个字符后的连字符附加**到“文本”变量。所以，输出应该是这样的；

```
6A7F-EBFC-CC51-268F-BFF 
```

将连字符附加到上面的“文本”变量逻辑应该在这个方法中；

```
public void GetResultsWithHyphen
{
     // append hyphen after 4 characters logic goes here
} 
```

而且我还想**从给定的字符串中删除连字符，**例如`6A7F-EBFC-CC51-268F-BFF`. 因此，从字符串逻辑中删除连字符应该在此方法中；

```
public void GetResultsWithOutHyphen
{
     // Removing hyphen after 4 characters logic goes here
} 
```

**如何在 C# 中执行此操作（用于桌面应用程序）？做这个的最好方式是什么？** 提前欣赏大家的回答。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-11T16:29:27.187

`GetResultsWithOutHyphen`很容易（并且应该返回 a`string`而不是`void`

```
public string GetResultsWithOutHyphen(string input)
{
    // Removing hyphen after 4 characters logic goes here
    return input.Replace("-", "");
} 
```

对于`GetResultsWithHyphen`，可能有更巧妙的方法来做到这一点，但这里有一种方法：

```
public string GetResultsWithHyphen(string input)
{

    // append hyphen after 4 characters logic goes here
    string output = "";
    int start = 0;
    while (start < input.Length)
    {
        output += input.Substring(start, Math.Min(4,input.Length - start)) + "-";
        start += 4;
    }
    // remove the trailing dash
    return output.Trim('-');
} 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-07-11T16:33:19.457

使用正则表达式：

```
public String GetResultsWithHyphen(String inputString)
{
     return Regex.Replace(inputString, @"(\w{4})(\w{4})(\w{4})(\w{4})(\w{3})",
                                       @"$1-$2-$3-$4-$5");
} 
```

并删除：

```
public String GetResultsWithOutHyphen(String inputString)
{
    return inputString.Replace("-", "");
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-11T16:41:01.593

这是我能想到的最短的正则表达式。它适用于任何长度的字符串。请注意， \B 标记将阻止它在字符串末尾匹配，因此您不必像上面的某些答案那样修剪额外的连字符。

```
 using System;
using System.Text.RegularExpressions;
namespace ConsoleApplication2
{
    class Program
    {
        static void Main(string[] args)
        {
            string text = "6A7FEBFCCC51268FBFF";
            for (int i = 0; i <= text.Length;i++ )
                Console.WriteLine(hyphenate(text.Substring(0, i))); 
        } 

        static string hyphenate(string s)
        {
            var re = new Regex(@"(\w{4}\B)");
            return re.Replace (s, "$1-");
        }

        static string dehyphenate (string s)
        {
            return s.Replace("-", "");
        }
    } 
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-11T16:29:47.470

```
var hyphenText = new string(
  text
 .SelectMany((i, ch) => i%4 == 3 && i != text.Length-1 ? new[]{ch, '-'} : new[]{ch})
 .ToArray() 
```

)

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-07-11T16:37:37.680

```
public static string GetResultsWithHyphen(string str) {
  return Regex.Replace(str, "(.{4})", "$1-");
  //if you don't want trailing -
  //return Regex.Replace(str, "(.{4})(?!$)", "$1-");
}

public static string GetResultsWithOutHyphen(string str) {            
  //if you just want to remove the hyphens:
  //return input.Replace("-", "");
  //if you REALLY want to remove hyphens only if they occur after 4 places:
   return Regex.Replace(str, "(.{4})-", "$1");
} 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-07-11T16:40:01.983

类似于：

```
public string GetResultsWithHyphen(string inText)
{
    var counter = 0;
    var outString = string.Empty;
    while (counter < inText.Length)
    {
        if (counter % 4 == 0)
            outString = string.Format("{0}-{1}", outString, inText.Substring(counter, 1));
        else
            outString += inText.Substring(counter, 1);
        counter++;
    }
    return outString;
} 
```

这是粗略的代码，在语法上可能并不完美

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-07-11T16:36:35.573

对于删除：

```
String textHyphenRemoved=text.Replace('-',''); should remove all of the hyphens 
```

用于添加

```
StringBuilder strBuilder = new StringBuilder();
int startPos = 0;
for (int i = 0; i < text.Length / 4; i++)
{
    startPos = i * 4;
    strBuilder.Append(text.Substring(startPos,4));

    //if it isn't the end of the string add a hyphen
    if(text.Length-startPos!=4)
        strBuilder.Append("-");
}
//add what is left
strBuilder.Append(text.Substring(startPos, 4));
string textWithHyphens = strBuilder.ToString(); 
```

请注意，我的添加代码未经测试。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2012-07-11T17:16:25.853

`GetResultsWithOutHyphen method`

```
public string GetResultsWithOutHyphen(string input)
{

     return input.Replace("-", "");

} 
```

`GetResultsWithOutHyphen method`

您可以传递一个变量而不是四个以获得灵活性。

```
public string GetResultsWithHyphen(string input)
{

string output = "";
        int start = 0;
        while (start < input.Length)
        {
            char bla = input[start];
            output += bla;
            start += 1;
            if (start % 4 == 0)
            {
                output += "-";    
            }
        }
return output;
} 
```

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2017-05-08T21:43:20.390

当我有一个社会安全号码 (123456789) 的值并需要它在列表框中显示为 (123-45-6789) 时，这对我有用。

```
ListBox1.Items.Add("SS Number :  " & vbTab & Format(SSNArray(i), "###-##-####")) 
```

在这种情况下，我有一系列社会安全号码。这行代码更改了格式以放入连字符。

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2022-02-08T10:23:14.147

**被调用者**

```
public static void Main()
{
    var text = new Text("THISisJUSTanEXAMPLEtext");
    var convertText = text.Convert();
    Console.WriteLine(convertText);
} 
```

**呼叫者**

```
public class Text
{
    private string _text;
    private int _jumpNo = 4;

    public Text(string text)
    {
        _text = text;
    }

    public Text(string text, int jumpNo)
    {
        _text = text;
        _jumpNo = jumpNo < 1 ? _jumpNo : jumpNo;
    }

    public string Convert()
    {
        if (string.IsNullOrEmpty(_text)) 
        {
            return string.Empty;
        }

        if (_text.Length < _jumpNo)
        {
            return _text;   
        }

        var convertText = _text.Substring(0, _jumpNo);
        int start = _jumpNo;
        while (start < _text.Length)
        {
            convertText += "-" + _text.Substring(start, Math.Min(_jumpNo, _text.Length - start));
            start += _jumpNo;
        }

        return convertText;
    }
} 
```

# android - android数据使用意图传递给另一个活动

> ID：11437081
> 
> 赞同：2
> 
> 时间：2012-07-11T16:23:51.053
> 
> 标签：android

您好，我是 android 编程新手。我想问一下如何使用意图将数据传递给另一个活动？我的情况是，我有 3 个单选按钮，如果用户单击第一个按钮并最终单击 OK 按钮，则应将其检索（文本）到其他活动。

0 选项 1 0 选项 2 0 选项 3

那么在其他活动中应该是这样的：选择了选项 1。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-11T16:28:51.200

您可以在两个活动之间传递数据：

```
calculate = (Button) findViewById(R.id.calculateButton);
private OnClickListener calculateButtonListener = new OnClickListener() {

        @Override
        public void onClick(View arg0) {
        String strtext="";
             if(RadioButton1.isChecked())
             {
              strtext=RadioButton1.getText();
             }
             if(RadioButton2.isChecked())
             {
             strtext=RadioButton1.getText();
             }
             if(RadioButton1.isChecked())
             {
              strtext=RadioButton3.getText();
             }
             if(!strtext.equals(""))
             {
               //Create new Intent Object, and specify class
                Intent intent = new Intent();  
                intent.setClass(SenderActivity.this,Receiveractivity.class);

                //Set your data using putExtra method which take 
                //any key and value which we want to send 
                intent.putExtra("senddata",strtext);  

                //Use startActivity or startActivityForResult for Starting New Activity
                SenderActivity.this.startActivity(intent); 
             }
        }
    }; 
```

在 Receiveractivity 中：

```
//obtain  Intent Object send  from SenderActivity
  Intent intent = this.getIntent();

  /* Obtain String from Intent  */
  if(intent !=null)
  {
     String strdata = intent.getExtras().getString("senddata");
    // DO SOMETHING HERE
  }
  else
  {
    // DO SOMETHING HERE
  } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-11T16:36:27.610

在您的第一个活动中使用如下内容：

```
okButton.setOnClickListener(new OnClickListener() {
    public onClick(View view) {
        RadioButton selected = (RadioButton) findViewById(radioGroup.getCheckedRadioButtonId());

        Intent intent = new Intent(First.this, Second.class);
        intent.putExtra("Radio Choice", selected.getText().toString());
        startActivity(intent);
    }
}); 
```

在您的 Second.onCreate() 活动中，使用它来检索选定的 RadioButtons 的文本：

```
Bundle extras = getIntent().getExtras();
if(extras != null)
    String choice = extras.getString("Radio Choice"); 
```

# jquery - jquery，发布多个变量

> ID：11437086
> 
> 赞同：4
> 
> 时间：2012-07-11T16:23:56.617
> 
> 标签：jquery

我是 jquery 的新手，并试图从 php 学院修改一个基本脚本。

jquery 脚本是：

```
<script type="text/javascript">
function get() {
    $.post('getpeopleinjobs.php', {
        postvarfname: form.firstname.value,
        postvarlname: form.d = surname.value
    }, function(output) {
        $('#age').html(output).show();
    });
}
</script> 
```

我的表单代码是：

```
 <form name="form">
    <input type="text" id="firstname">
    <input type="text" id="surname">
    <input type="button" value="get" onclick="get();">
    </form> 
```

当我只传递一个变量并且我的代码片段是：

```
$.post('getpeopleinjobs.php', {
    postvarfname: form.firstname.value
} 
```

然后我尝试添加第二个变量

```
$.post('getpeopleinjobs.php', {
    postvarfname: form.firstname.value,
    postvarlname: form.d = surname.value
} 
```

它现在在 Internet Explorer 中不起作用，但有趣的是它在 Chrome 中起作用？

对初学者有什么建议吗？=

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-07-11T16:26:57.633

您的概念正确，但似乎有一个小错误

```
//Posted Code
$.post ('getpeopleinjobs.php',{postvarfname: form.firstname.value,postvarlname: form.d=surname.value}
// Fixed Code
$.post ('getpeopleinjobs.php',{postvarfname: form.firstname.value, postvarlname: form.surname.value} 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-07-11T16:26:29.913

您的`post`代码中有错字：

```
$.post('getpeopleinjobs.php',{
    postvarfname: form.firstname.value,
    postvarlname: form.surname.value
}, function () { /* ... */ }); 
```

应该可以正常工作。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-07-11T16:26:46.130

看起来你的脚本有问题。删除`=`标志：

```
$.post ('getpeopleinjobs.php',{postvarfname: form.firstname.value,postvarlname: form.surname.value}); 
```

您可能还只想将脚本编写为：

```
$.post ('getpeopleinjobs.php',$(form).serialize()); 
```

这样，如果您向表单添加其他字段，则无需修改脚本。

# ssms - 如何在没有 SQL Server Management Studio (ssms) 的情况下控制 SQL Server 2008 Express

> ID：11437088
> 
> 赞同：-1
> 
> 时间：2012-07-11T16:24:03.353
> 
> 标签：ssms, sql-server-2008-express

我在客户端 PC 上安装了 SQL Server 2008 Express（我从 C# 程序的 Visual Studio 安装版本安装了 SQL Server 2008 Express）

但我没有在所有程序窗口中看到 SQL Server Management Studio 图标。

现在，如果我想在 SQL Server 中控制表和数据库，我该怎么做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-11T16:41:15.317

仅自行安装 Sql Express 不会为您提供任何客户端工具。

如果您已经在同一客户端上安装了完整的 Sql Server（Dev 或其他），则现有工具也将允许您管理 Express 数据库实例。否则，您将需要安装工具附带的 Sql Express 版本。这可以在这里找到

[带有工具的 Sql Express](http://www.microsoft.com/en-us/download/details.aspx?displaylang=en&id=22973)

# objective-c - 动态设置条形图中条形的宽度

> ID：11437093
> 
> 赞同：1
> 
> 时间：2012-07-11T16:24:13.857
> 
> 标签：objective-c, xcode4.3, core-plot

**大家好，有人可以帮我解决我遇到的这个问题吗**

我可以在 coreplote 中绘制一个条形图宽度不等的条形图吗假设我的 X 轴间隔是 1 个单位，并且我已将条形图宽度设置为相同的 1 个单位。但是在某些点 x 轴值以 0.5 个单位变化，我希望条形宽度等于发生变化的宽度。而且数据是动态变化的。有没有其他我可以使用的解决方案，并且看起来仍然像条形图。使用 bar 的唯一原因是我需要填充绘图空间。

```
CPXYPlotSpace *plotSpace = (CPXYPlotSpace *)barChart.defaultPlotSpace;
        plotSpace.yRange = [CPPlotRange plotRangeWithLocation:CPDecimalFromInt(0) 
                                                       length:CPDecimalFromInt(rangeY)];
        plotSpace.xRange = [CPPlotRange plotRangeWithLocation:CPDecimalFromFloat(-0.5f) 
                                                       length:CPDecimalFromFloat(rangeX)];

        CPXYAxisSet *axisSet = (CPXYAxisSet *)barChart.axisSet;
        CPXYAxis *x = axisSet.xAxis;
        x.axisLineStyle = nil;
        x.majorTickLineStyle = nil;
        x.minorTickLineStyle = nil;
        x.majorIntervalLength = CPDecimalFromString(@"1");
        x.orthogonalCoordinateDecimal = CPDecimalFromString(@"0");

        x.title = [[[tempCol colName] componentsSeparatedByString:@"*@"] objectAtIndex:0];
        x.titleLocation = CPDecimalFromFloat((rangeX-1)/2);
        x.titleOffset = 25.0f;

        // Define some custom labels for the data elements
        x.labelRotation = 0;
        x.labelingPolicy = CPAxisLabelingPolicyNone;
        NSMutableArray *customTickLocations = [[NSMutableArray alloc] init];
        NSMutableArray *xAxisLabels = [[NSMutableArray alloc] init];
        for (int i = 0; i < [tempGraph.d2pArray count]; i++) {
            tempD2P = [tempGraph.d2pArray objectAtIndex:i];
            [customTickLocations addObject:[NSNumber numberWithInt:i]];
            [xAxisLabels addObject:[tempD2P d2pName]];
        }
        NSUInteger labelLocation = 0;
        NSMutableArray *customLabels = [NSMutableArray arrayWithCapacity:[xAxisLabels count]];
        for (NSNumber *tickLocation in customTickLocations) {
            CPAxisLabel *newLabel = [[CPAxisLabel alloc] 
                                     initWithText:[xAxisLabels objectAtIndex:labelLocation++] 
                                     textStyle:x.labelTextStyle];
            newLabel.tickLocation = [tickLocation decimalValue];
            newLabel.offset = 0;
            newLabel.rotation = 0;
            newLabel.alignment = CPAlignmentCenter;     
            [customLabels addObject:newLabel];
            [newLabel release];
            newLabel = nil;
        }
        [xAxisLabels release];
        xAxisLabels = nil;
        [customTickLocations release];
        customTickLocations = nil;
        x.axisLabels =  [NSSet setWithArray:customLabels];

        CPXYAxis *y = axisSet.yAxis;
        CPLineStyle *majorGridLineStyle = [CPLineStyle lineStyle];
        majorGridLineStyle.lineWidth = 0.75;
        majorGridLineStyle.lineColor = [CPColor colorWithCGColor:[[UIColor grayColor] CGColor]];
        y.axisLineStyle = nil;
        y.majorTickLineStyle = nil;
        y.majorGridLineStyle = majorGridLineStyle;
        y.minorTickLineStyle = nil;
        y.majorIntervalLength = CPDecimalFromInt(rangeY/8);
        y.orthogonalCoordinateDecimal = CPDecimalFromString(@"-0.5");
        y.title = [[[tempCol colName] componentsSeparatedByString:@"*@"] objectAtIndex:1];
        y.titleOffset = 30 + 5*log10(mult);
        y.titleLocation = CPDecimalFromInt(rangeY/2);
        NSNumberFormatter *formatter = [[NSNumberFormatter alloc] init];
        [formatter setMaximumFractionDigits:0];
        y.labelFormatter = formatter;
        [formatter release];
        formatter = nil;
        char firstChar = 'F';
        CPBarPlot *barPlot;
        // First bar plot
        for (int i = 0; i < noOfBarCharts; i++) {
            static CPTextStyle *whiteText = nil;
            if ( !whiteText ) {
                whiteText = [[CPTextStyle alloc] init];
                whiteText.color = [CPColor whiteColor];
                whiteText.fontSize = 14;
            }
            barPlot = [CPBarPlot tubularBarPlotWithColor:[CPColor colorWithComponentRed:[[[rgbArray objectAtIndex:0] objectAtIndex:i] floatValue]/255.0 
                                                                                  green:[[[rgbArray objectAtIndex:1] objectAtIndex:i] floatValue]/255.0 
                                                                                   blue:[[[rgbArray objectAtIndex:2] objectAtIndex:i] floatValue]/255.0 
                                                                                  alpha:1.0] 
                                          horizontalBars:NO];
            barPlot.baseValue = CPDecimalFromString(@"0");
            barPlot.dataSource = self;
            barPlot.barOffset = ([tempGraph.graType rangeOfString:@"GROUPED"].location != NSNotFound)?(i+0.5)-(noOfBarCharts/2):0;
            barPlot.labelOffset = 0;
            barPlot.barWidth = 20;
            barPlot.identifier = [NSString stringWithFormat:@"%d%c", [tempGraph.graID intValue], (firstChar - noOfBarCharts +1 + i)];
            barPlot.delegate = self;

            [barChart addPlot:barPlot 
                  toPlotSpace:plotSpace]; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-13T20:59:50.937

我自己弄清楚了，而不是使用条形图，我使用了带有阶梯图的散点图，这成功了：

```
Plot.interpolation = CPTScatterPlotInterpolationStepped; 
```

并用以下内容填充情节：

```
Plot.areaFill = [CPTFill fillWithColor:[CPTColor blueColor]];
Plot.areaBaseValue = CPTDecimalFromInteger(0); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-12T00:53:33.823

如果您没有在条形上放置边界线，则可以使条形宽度为条形之间距离的一半，并将宽度加倍。

# java - 没有实现接口的所有方法。是否可以？

> ID：11437097
> 
> 赞同：82
> 
> 时间：2012-07-11T16:24:29.470
> 
> 标签：java, interface, abstract-class

有没有办法**不在**继承类中实现接口的所有方法？

* * *

## 回答 #1

> 赞同：71
> 
> 时间：2012-07-11T16:26:44.540

解决此问题的唯一方法是将您的类声明为`abstract`并将其留给子类来实现缺少的方法。但最终，链中的某个人必须实现它以满足接口契约。如果您确实不需要特定的方法，您可以实现它，然后选择`return`或抛出一些`NotImplementedException`，以您的情况更合适。

接口还可以将一些方法指定为“默认”，并在接口定义中提供相应的方法实现 ( [https://docs.oracle.com/javase/tutorial/java/IandI/defaultmethods.html](https://docs.oracle.com/javase/tutorial/java/IandI/defaultmethods.html) )。在实现接口时无需提及这些“默认”方法。

* * *

## 回答 #2

> 赞同：69
> 
> 时间：2012-07-11T16:27:28.523

接口的重点是保证对象的行为与接口指定的一样

如果您不实现接口的所有方法，那么您会破坏接口的全部用途。

* * *

## 回答 #3

> 赞同：17
> 
> 时间：2017-04-27T08:22:37.327

我们可以覆盖父类中的所有接口方法，`abstract`而子类中仅覆盖该特定子类所需的那些方法。

**界面**

```
public interface MyInterface{
    void method1();
    void method2();
    void method3();
} 
```

**抽象父类**

```
public abstract class Parent implements MyInterface{
@Override
public void method1(){

}
@Override
public void method2(){

}
@Override
public void method3(){

}
} 
```

**在您的儿童课程中**

```
public class Child1 extends Parent{
    @Override
    public void method1(){

    }
}

public class Child2 extends Parent{
    @Override
    public void method2(){

    }
} 
```

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2013-08-16T02:20:52.890

我问自己同样的问题，然后了解了适配器。它解决了我的问题，也许它可以解决你的问题。这很好地解释了它：[https ://blogs.oracle.com/CoreJavaTechTips/entry/listeners_vs_adapters](https://blogs.oracle.com/CoreJavaTechTips/entry/listeners_vs_adapters)

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2012-07-11T16:25:24.733

将该类定义为一个`abstract`类。但是，当您想要创建它的实例时（通过使用子类或匿名类），您必须实现那些未实现的方法。

* * *

## 回答 #6

> 赞同：4
> 
> 时间：2012-07-11T16:33:58.613

这是可能的，而且很容易。我编写了一个[示例](http://ideone.com/tGgqp)。

您所要做的就是从实现该方法的类继承。如果您不介意不可实例化的类，那么您也可以定义一个`abstract`类。

* * *

## 回答 #7

> 赞同：4
> 
> 时间：2018-04-12T10:30:43.130

你可以在 Java8 中做到这一点。Java 8 引入了“默认方法”或（Defender 方法）新功能，它允许开发人员向接口添加新方法，而不会破坏这些接口的现有实现。

它提供了允许接口定义实现的灵活性，该实现将在具体类无法为该方法提供实现的情况下用作默认值。

```
interface OldInterface {
    public void existingMethod();

    default public void DefaultMethod() {
        System.out.println("New default method" + " is added in interface");
    }
}
//following class compiles successfully in JDK 8
public class ClassImpl implements OldInterface {
    @Override
    public void existingMethod() {
        System.out.println("normal method");

    }
    public static void main(String[] args) {
        ClassImpl obj = new ClassImpl ();
        // print “New default method add in interface”
        obj.DefaultMethod(); 
    }
} 
```

* * *

## 回答 #8

> 赞同：3
> 
> 时间：2012-07-11T16:25:56.043

如果你想要一个可实例化的类，那是不可能的。不过，您可以尝试定义一个`abstract`类。

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2019-01-31T16:58:52.493

如果您尝试实现一个接口并且发现自己处于不需要实现所有接口的情况下，这就是代码异味。它表明一个糟糕的设计，它违反了[Liskov 替换原则](https://en.wikipedia.org/wiki/Liskov_substitution_principle)。这通常是因为使用[胖接口](https://stackoverflow.com/questions/7084139/what-is-a-fat-interface)而发生的。

有时也会发生这种情况，因为您试图从外部依赖项实现接口。在这种情况下，我总是查看源代码，看看是否有该接口的任何实现，我可以直接使用它，也可以对其进行子类化，并根据我的需要覆盖方法。

* * *

## 回答 #10

> 赞同：1
> 
> 时间：2019-04-05T06:13:59.353

我们可以使用适配器类，通过不强制实现接口中存在的所有方法来降低复杂性

适配器类是一个简单的 java 类，它实现了一个只有 EMPTY 实现的接口。如果我们扩展 Adapter 类而不是实现接口，我们只为 require 方法提供实现

ex--- 如果我们扩展 GenericServlet(AC) 而不是实现 Servlet(I)，那么我们为 Service() 方法提供实现，我们不需要为剩余的方法提供实现..

泛型类 充当 Servlet(I) 的 ADAPTER 类。

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2020-12-22T18:11:14.703

是的，下面显示的是方法

```
interface Test {
   void m() throws NullPointerException;
}
class Parent {
   // Parent class doesn't implements Test interface
   public void m() {
      System.out.println("Inside Parent m()");
   }
}
class Child extends Parent implements Test {
}
public class Program {
   public static void main(String args[]) {
      Child s = new Child();
      s.m();
   }
} 
```

# ruby - 如何使用正则表达式拆分名称？

> ID：11437099
> 
> 赞同：0
> 
> 时间：2012-07-11T16:24:38.940
> 
> 标签：ruby, regex

我是红宝石和正则表达式的新手，并试图弄清楚如何攻击将附加的棒球运动员字符串分成名字/姓氏组合。

这是一个示例字符串：

```
"JohnnyCuetoJ.J.PutzBrianMcCann" 
```

这是所需的输出：

```
Johnny Cueto
J.J. Putz
Brian McCann 
```

我已经想出了如何用大写字母进行分隔，这让我很接近，但是离群值的名字喜欢`J.J.`并`McCann`弄乱了这种模式。有人对解决此问题的最佳方法有想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-11T16:39:23.437

如果您不必一次性完成，`gsub`那么它会更容易一些。

```
string = "JohnnyCuetoJ.J.PutzBrianMcCann"
string.gsub!(/([A-Z][^A-Z]+)/, '\1 ') # separate by capital letters
string.gsub!(/(\.) ([A-Z]\.)/, '\1\2') # paste together "J. J." -> "J.J."
string.gsub!(/Mc /, 'Mc') # Remove the space in "Mc "
string.strip # Remove the extra space after "Cann " 
```

...当然，您可以通过链接调用将其放在一行中`gsub`，但这基本上会破坏代码的可读性（但另一方面，正则表达式块的可读性如何？）

# android - 旋转模式下的布局显示高度问题

> ID：11437103
> 
> 赞同：0
> 
> 时间：2012-07-11T16:24:44.213
> 
> 标签：android, listview, layout, rotation

我创建了一个带有一些表单的应用程序，它们显示正确，我想要，问题出在旋转屏幕上，表单宽度还可以，但布局高度我有问题，因为它不显示布局的所有项目，试图找到一个解决方案我为线性布局放置了一个滚动视图，它可以工作，但是其中一些表单内部有列表视图，所以列表视图滚动属性已被滚动视图阻止，最后我无法显示所有布局信息。我想知道是否有人知道此问题的解决方案并可以帮助我。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-11T16:32:04.393

请按照以下步骤操作。

1）在 res 目录中创建一个文件夹**res/layout-land**。

2）假设您在 res/layout 文件夹中有 main.xml 布局。

**3) 在res/layout-land**文件夹中创建一个布局名称 main.xml ，将该布局命名为 main.xml。设计您希望在横向模式下向用户显示的 UI。

现在，当您运行您的应用程序并更改 Orientation 时。系统自动根据Orientation调用main.xml，假设手机处于横屏模式，则显示layout-land文件夹的main.xml

[看这个例子](http://wiresareobsolete.com/wordpress/2009/12/android-layouts-supporting-orientation/)

# jquery-mobile - 如何为固定页脚中的图标使用蒙版图像？

> ID：11437105
> 
> 赞同：1
> 
> 时间：2012-07-11T16:24:54.960
> 
> 标签：jquery-mobile

这是我的页脚：

```
<div data-role="footer" data-id="footer" data-position="fixed" data-tap-toggle="false">
    <div data-role="navbar" data-iconpos="top">
        <ul>
            <li><a href="#" data-icon="home">Home</a></li>
            <li><a href="#nearby" data-icon="nearby">Nearby</a></li>
            <li><a href="#search" data-icon="search">Search</a></li>
        </ul>
    </div>
</div> 
```

这是我使用蒙版图像的自定义图标：

```
.ui-icon-nearby {-webkit-mask-image: url(../i/nearby.png); -moz-mask-image: url(../i/nearby.png); background-color: #ffffff} 
```

我在导航栏中的“附近”项目上看到一个白色方块，没有图标...

但是，如果我添加`data-visible-on-page-show="false"`页脚 div，我会看到图标，但页脚不再固定，它位于页面底部...

谢谢！

# php - 在 Android 屏幕上打印 JSON 响应

> ID：11437110
> 
> 赞同：0
> 
> 时间：2012-07-11T16:25:07.317
> 
> 标签：php, android, json, api

我有我的 Android 模拟器暂时连接到我的本地计算机。它联系 PHP 并发布要运行的 IP 地址。然后它会回显一个 JSON 结果。我想打印结果，但无法更改 android 屏幕。

这是我的活动：

```
public class MainActivity extends Activity implements OnClickListener {

EditText ipAddress;
Button bSearch;

String IP;

HttpClient httpclient;

HttpPost httppost;

ArrayList<NameValuePair> nameValuePairs;

HttpResponse response;
HttpEntity entity;

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);

    initialize();
    }

private void initialize(){
    ipAddress = (EditText) findViewById(R.id.IPaddress);
    bSearch = (Button) findViewById(R.id.searchBtn);

    bSearch.setOnClickListener((OnClickListener) this);
}

@Override
public boolean onCreateOptionsMenu(Menu menu) {
    getMenuInflater().inflate(R.menu.activity_main, menu);
    return true;
}

@Override
public void onClick(View arg0) {
    // TODO Auto-generated method stub

    httpclient = new DefaultHttpClient();

    httppost = new HttpPost("http://127.0.0.1/myfiles/WorkingVersionVJSON.php");

    IP = ipAddress.getText().toString();

    nameValuePairs = new ArrayList<NameValuePair>();

    nameValuePairs.add(new BasicNameValuePair("ipaddress", IP));

    try{
        httppost.setEntity(new UrlEncodedFormEntity(nameValuePairs));

        response = httpclient.execute(httppost);

        if(response.getStatusLine().getStatusCode()==200){

            entity = response.getEntity();

            if(entity != null){

                InputStream instream = entity.getContent();

                JSONObject jsonResponse = new JSONObject(convertStreamToString(instream));

                String rIP = jsonResponse.getString("ipaddress");

            }
        }
    }catch(Exception e){
        e.printStackTrace();
    }
}

 private static String convertStreamToString(InputStream is) {
        /*
         * To convert the InputStream to String we use the BufferedReader.readLine()
         * method. We iterate until the BufferedReader return null which means
         * there's no more data to read. Each line will appended to a StringBuilder
         * and returned as String.
         */
        BufferedReader reader = new BufferedReader(new InputStreamReader(is));
        StringBuilder sb = new StringBuilder();

        String line = null;
        try {
            while ((line = reader.readLine()) != null) {
                sb.append(line + "\n");
            }
        } catch (IOException e) {
            e.printStackTrace();
        } finally {
            try {
                is.close();
            } catch (IOException e) {
                e.printStackTrace();
            }
        }
        return sb.toString();
    }
} 
```

和 PHP

```
<?php

 require("IPQFunctionworkingversionV7.php");
$ipaddress = $_POST["ipaddress"];

$results = array();

$results = getScore($ipaddress);
echo json_encode($results);
?> 
```

当我在浏览器中运行 PHP 并使用 html 发布到它时，PHP 就可以工作。我假设这条线

```
nameValuePairs.add(new BasicNameValuePair("ipaddress", IP)); 
```

以相同的方式发布到 php，因为 IP 应该是在 android 上输入到文本框中的内容，并且它与 PHP 中的 POST 匹配。

活动编译并在模拟器上，所以我假设连接成功。我只需要以一种可以让它显示在屏幕上的方式解析 JSON 响应。一旦我有了它，我将在布局上工作。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-11T16:35:11.573

此外，您在 onClick 中的代码确实需要放在 AsyncTask 中。OnClick 从 UI 线程调用。如果您进行网络调用的时间过长（长度不确定），Android 将向您的用户发布应用程序无响应的信息。

要在屏幕上获取字符串，您的布局需要定义一个 TextView，您可以使用 findViewById 并调用 setText 或以编程方式将其膨胀并将其添加到显示中。

# json - json中对象数组的名称是否应该复数

> ID：11437112
> 
> 赞同：2
> 
> 时间：2012-07-11T16:25:16.083
> 
> 标签：json

什么是约定，json中的对象数组是否应该复数

IE

```
{
    "releases": [
       {
           "id": "0b405ea7-8785-402f-bcf7-d55f5000dc3e",
           "title": "Wintertunes"
       },
       {
           "id": "7eb37a3a-646d-4501-a373-e9071186b88d",
           "title": "Adventure Magic Supreme Journey Music"
       }
    ],
} 
```

相对

IE

```
{
    "release": [
       {
           "id": "0b405ea7-8785-402f-bcf7-d55f5000dc3e",
           "title": "Wintertunes"
       },
       {
           "id": "7eb37a3a-646d-4501-a373-e9071186b88d",
           "title": "Adventure Magic Supreme Journey Music"
       }
    ],
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2021-09-29T22:33:37.530

我相信[Google JSON Style Guide](https://google.github.io/styleguide/jsoncstyleguide.xml?showone=Singular_vs_Plural_Property_Names#Singular_vs_Plural_Property_Names)是解决这种疑问的一个很好的来源。

> 数组通常包含多个项目，复数属性名称反映了这一点。

此外，复数形式的最强论据是您从[JSON.parse()](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/JSON/parse)获得的直接对象映射。您可能希望您的`Javascript`代码处理复数数组对象。

但是，如果您有一百万个这样的条目 - 没有压缩 - 额外的“s”肯定会产生一些显着的膨胀：P

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-21T05:56:14.743

在没有任何强烈意见的情况下决定将其多元化

# dos - MSDOS - “系统找不到指定的文件”

> ID：11437113
> 
> 赞同：3
> 
> 时间：2012-07-11T16:25:17.280
> 
> 标签：dos

我正在尝试使用以下命令将日志文件的内容复制到另一个日志文件：

```
type \\server\f$\Test path\Test.log >> \\server2\f$\Logs\Testpath\Test.log 
```

这在路径中一直有效，但最近我已将位置（路径）更改为 Test.log。路径稍长。我现在收到一个错误：

> 系统找不到指定的文件

我用谷歌搜索了这条语句，常见的回答是：1）检查文件名是否存在，2）检查文件名是否损坏 3）检查服务器是否在线。

我已经完成了这一切。路径可以包含的字符数是否有限制？如果有那么有解决方法吗？

**更新 12/07/2012 09:49 GMT** 在路径周围添加引号似乎可以解决问题。为什么添加引号可以解决问题？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-12T09:02:48.593

问题是源路径中有一个空格。在路径周围添加引号解决了这个问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-11T16:35:32.403

Type is to examine a file, not to copy.

Also, if server is an actual server and not a folder, then you should be using two slashes (\server\share)

Example:

```
 copy \\server\f$\Sourcepath\Test.log  \\server2\f$\Logs\Destpath\Test.log /y 
```

[http://www.microsoft.com/resources/documentation/windows/xp/all/proddocs/en-us/ntcmds.mspx?mfr=true](http://www.microsoft.com/resources/documentation/windows/xp/all/proddocs/en-us/ntcmds.mspx?mfr=true)

# freebase - 在 Freebase MQL 中，我如何编写查询来获取组织父级的名称？

> ID：11437116
> 
> 赞同：1
> 
> 时间：2012-07-11T16:25:18.527
> 
> 标签：freebase, mql

对于组织列表，我需要得到他们的父母。在 freebase.com 的查询编辑器中，我使用以下查询：

{ "id": "/en/daihatsu_motor_company", "/organization/organization/parent":{id:null} }​</p>

我得到以下结果：

{“代码”：“/api/status/ok”，“结果”：{“/organization/organization/parent”：{“id”：“/m/04kjl82”}，“id”：“/en/daihatsu_motor_company " }, "status": "200 OK", "transaction_id": "cache;cache03.p01.sjc1:8101;2012-07-10T22:54:06Z;0030" }

但是，我期待 id：toyota_motor_corporation。

在 freebase.com 的查询编辑器中，我可以单击 id ("id": "/m/04kjl82")，这是一个查看我需要的信息的链接：

[http://www.freebase.com/view/m/04kjl82](http://www.freebase.com/view/m/04kjl82)

如何直接获取母公司的名称或其 ID（在示例中为 toyota_motor_corporation）？

谢谢，

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-12T16:17:22.177

Claudio 的回答很接近，但如果您真的想要 ID，则需要稍微调整查询，因为返回的默认属性是名称，而不是 ID。这将为您提供 ID：

```
{
  "id": "/en/daihatsu_motor_company",
  "/organization/organization/parent": {
    "parent": {"id":null}
  }
}​ 
```

这将返回

```
 "result": {
    "/organization/organization/parent": {
      "parent": {
        "id": "/en/toyota_motor_corporation"
      }
    },
    "id": "/en/daihatsu_motor_company"
  } 
```

话虽如此，您应该考虑[使用 MID](http://www.freebase.com/queryeditor?q=%7B%22id%22%3a%22/en/daihatsu_motor_company%22,%22/organization/organization/parent%22%3a%7B%22parent%22%3a%7B%22mid%22%3anull%7D%7D%7D)而不是 ID，因为这是目前推荐的标识符。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-11T21:52:13.427

您的查询正在返回父级和子级之间的组织关系的 ID。您想要的是父母，您可以通过以下查询获得它：

```
{
  "id": "/en/daihatsu_motor_company",
  "/organization/organization/parent": {
    "parent": null
  }
}​ 
```

返回

```
{
  "code":          "/api/status/ok",
  "result": {
    "/organization/organization/parent": {
      "parent": "Toyota Motor Corporation"
    },
    "id": "/en/daihatsu_motor_company"
  },
  "status":        "200 OK",
  "transaction_id": "cache;cache03.p01.sjc1:8101;2012-07-11T21:50:01Z;0045"
} 
```

# python - levenshtein与python列表中项目的距离

> ID：11437121
> 
> 赞同：0
> 
> 时间：2012-07-11T16:25:29.587
> 
> 标签：python, algorithm, distance, levenshtein-distance

我有两个列表，下面，我想比较相似的 levenshtein 距离是否小于 2。我有一个函数来查找 levenshtein 距离，但是作为参数，它需要这两个词。我可以找到其他列表中没有的单词，但这没有帮助。而且我可以按索引进行索引，但是如下例所示，当我到达索引 7（但除此之外）时，一切都被抛弃了，因为不忠将是索​​引 9 和 8，而 wcop88 是 9 和 10，因此这些不会被比较。有没有办法说如果不忠的一部分在另一个列表中的某个单词中，然后检查这两个，请注意这并不总是有效，因为说如果不忠和不忠只有 in 和 ty 可以匹配，很多词可以可能匹配

```
[u'rt', u'cuaimatizada', u's', u'cuaimaqueserespeta', u'forgives', u'any', u'mistake', u'but', u'the', u'infidelity', u'wocp88']
[u'rt', u'cuiamatizada', u's', u'cuimaqueserespeta', u'forgive', u'any', u'mistake', u'except', u'infedelity', u'wcop88'] 
```

编辑：所以我的目标是能够为我的 levenshtein 函数提供需要检查的两个单词。在这种情况下，以下对：

```
u'cuaimatizada      u'cuiamatizada

u'cuaimaqueserespeta u'cuimaqueserespeta

u'forgives   u'forgive

u'infedelity  u'infidelity

u'wocp88 u'wcop88 
```

我不知道手头有哪些话。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-11T16:46:17.420

我认为这就是您想要的……但它会比较所有单词……而不仅仅是匹配索引

```
 wordpairs = [(w1,w2) for w1 in list1 for w2 in list2 if levenstein(w1,w2) < 2]

>>> matches = [(w1,w2) for w1 in l12 for w2 in l22 if levenshtein(w1,w2) < 2]

[(u'rt', u'rt'), (u's', u's'), (u'cuaimaqueserespeta', u'cuimaqueserespeta'), (u'forgives', u'forgive'), (u'any', u'any'), (u'mistake', u'mistake'), (u'infidelity',u'infedelity')] 
```

# crystal-reports - 如何在水晶报表的详细信息中报告总计数的百分比？

> ID：11437122
> 
> 赞同：1
> 
> 时间：2012-07-11T16:25:32.997
> 
> 标签：crystal-reports

我正在尝试获取员工 ID 的总数，以便可以将其用作报告中百分比的基础。我希望我的报告看起来像这样：

```
Types                 With Email  
Customer    20%       15%
Vendor      40%       80%
Employees   40%       75%  
Total People: 100 
```

在我看来，我有员工 ID、类型和电子邮件地址。我可以得到计数和第一个百分比（客户、供应商和员工的百分比）。我遇到的问题是拥有电子邮件地址的客户或供应商的百分比。我尝试过使用公式字段和摘要，但还没有走得太远。谁能指出我的方向？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-11T20:59:23.367

创建一个公式来计算电子邮件地址的存在：

```
//{@has_email}
If Isnull({employee.email}) Then
  0
Else
 1 
```

它不需要添加到画布中。

创建一个公式来计算总百分比：

```
//{@email %}

// summarize number of email address for a given type
Local Numbervar Total := Sum({@has_email}, {employee.type});

If Total <> 0 Then
  Total / Count({employee.id}, {employee.type}) * 100 
```

添加到组页眉或页脚并使用 % 格式化。

# sql-server - 变更跟踪——最简单的场景

> ID：11437132
> 
> 赞同：0
> 
> 时间：2012-07-11T16:25:56.043
> 
> 标签：sql-server, c#-4.0, change-tracking, cache-dependency

我正在使用 ASP.NET C# 4 进行编码。数据库是 SQL Server 2012。

我有一个有 2000 行和 10 列的表。我想将此表加载到内存中，如果该表以任何方式更新/插入，我想从数据库中刷新内存中的副本。

我研究了 SQL Server 更改跟踪，虽然它可以满足我的需要，但似乎我必须编写相当多的代码才能从更改函数中进行选择——比我想要为我拥有的一个简单场景编写的代码更多。

这个问题的最佳（最简单）解决方案是什么？我要使用 CacheDependency 吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-05-22T10:21:30.990

我目前有一个类似的问题：我正在实现一个休息服务，它返回一个包含 50 多列的表，我想在客户端缓存数据以减少流量。

我正在考虑这个实现：

我所有的表都有字段

```
ID AutoIncrement (primary key)
Version RowVersion (a numeric value that will be incremented 
                    every time the record is updated) 
```

要计算表的“指纹”，我使用选择

```
select count(*), max(id), sum(version) from ... 
```

删除记录会更改第一个值，插入第二个值并更新第三个值。

因此，如果三个值之一发生变化，我必须重新加载表格。

# php - 如何使用选定的列对网格进行分页

> ID：11437133
> 
> 赞同：1
> 
> 时间：2012-07-11T16:25:59.953
> 
> 标签：php, user-interface, frameworks, atk4

在敏捷工具包教程 (Jobeet) 中，我设置了快速数据模型（第 3 页），它与 CRUD 测试页面看起来不错。我试图更改 test.php 文件中的一行代码。问题是当我添加分页器，代码行时，网格中的数据消失了。这是对分页器类的限制吗？有没有一种快速的方法可以让这个自定义网格分页？谢谢。

添加 addPaginator 时，原始代码显示方法未定义错误，如下所示：

```
 $this->add('CRUD')->setModel('Category');
    //$this->add('CRUD')->setModel('Job');
    $jobCRUD=$this->add('CRUD');
    $jobCRUD->setModel('Job');
    $jobCRUD->addPaginator(3);  //This line causes an method not defined error 
```

使用 setSource 修改的代码不会显示错误，但会显示一个空网格：

```
class page_test extends Page {
    function init(){
        parent::init();
        //$this->add('CRUD')->setModel('Category'); //Not needed for my example
        $grid=$this->add('Grid'); 
        //$grid->setModel('Job'); //Removed this to show custom columns
        $grid->addColumn('id');
        $grid->addColumn('type');
        $grid->addColumn('position');
        $grid->setSource('job');
        $grid->addPaginator(3);  //Added this to paginate the results (doesn't work & removes data)
    }
} 
```

解决方案：

```
 $this->add('CRUD')->setModel('Category');
    //$this->add('CRUD')->setModel('Job');
    $jobCRUD=$this->add('CRUD');
    $jobCRUD->setModel('Job');
    $jobCRUD->grid->addPaginator(3); // This fixed the paginator 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-11T17:14:18.377

Jobeet 适用于 Agile Toolkit 4.1，并使用已过时的“setSource”。

我认为如果你用 setModel 替换 setSource 应该没问题。

# mysql - 如何从 SQL 中的字符串值中提取整数？

> ID：11437136
> 
> 赞同：1
> 
> 时间：2012-07-11T16:26:02.090
> 
> 标签：mysql, sql, database, string, postgresql

我需要在这个字符串中提取一个整数。我将如何使用 MySQL 或 PostgreSQL 来做到这一点？

```
user_id='12345' 
```

在这个字符串中，我必须得到数字`12345`。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-07-11T16:28:26.120

您将使用该`CAST`功能。

`SELECT CAST(user_id AS INT) FROM Table`

**参考**：[http ://dev.mysql.com/doc/refman/5.5/en/cast-functions.html#function_cast](http://dev.mysql.com/doc/refman/5.5/en/cast-functions.html#function_cast)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-07-11T17:05:22.150

[除了@Daniel Li 演示](https://stackoverflow.com/a/11437168/939860)的标准 SQL 语法外，还有 PostgreSQL 特定的简写：

```
user_id::int 
```

[该手册](http://www.postgresql.org/docs/9.1/static/sql-expressions.html#SQL-SYNTAX-TYPE-CASTS)会很高兴地告诉你这些非常基本的东西......

# php - 声明一个函数来接受 byref 和 byval 参数

> ID：11437141
> 
> 赞同：0
> 
> 时间：2012-07-11T16:26:19.767
> 
> 标签：php, deprecated, byref, byval

当您只想在某些时候调用带有 byref 参数的函数时，您会做什么（在最近的 PHP 中）？

```
function blah_byval ($arg) { /* some code */ }
function blah_byref (&$arg) { /* same code */ } 
```

对我来说似乎很迟钝。我肯定错过了什么。

我确实有一个用例，尽管这个问题基本上是假设性的。这是一个正在进行的验证码实施：

```
function captcha_image($string = "", $create = true, $session = "") {

  # outputs a transparent gif image 16 pixels high by 60 pixels wide containing
  # a string of six lowercase letters, either specified by $string or generated
  # randomly. returns this string, or false in the event of an error.

  # once a captcha image is created, the string it contains should be saved so
  # that it can be compared later with user input. to skip saving, set $create
  # to false.

  # if called from a web server, content-type is set.

  if (!preg_match("/^[a-z]{6}$/", $string)) $string = string_random(6);
  if (php_sapi_name() != "cli") header("Content-Type: image/gif");
  if ($ihandle = @imagecreatetruecolor(60, 16)) {
    $background = imagecolorallocate($ihandle, 255, 255, 255);
    $foreground = imagecolorallocate($ihandle, 128, 128, 128);
    imagecolortransparent($ihandle, $background);
    imagefilledrectangle($ihandle, 0, 0, 60, 16, $background);
    imagestring($ihandle, 5, 0, 0, $string, $foreground);
    imagegif($ihandle, NULL);
    imagedestroy($ihandle);
    if ($create) return captcha_create($string, $session);
    return $string;
  }
  return false;
}

function captcha_compare($string, $session = "", $destroy = true) {

  # returns true if $string is associated with a certain session, which is
  # specified by $session or, if no such session exists, by session_identity().
  # if $string is not associated with the session, returns false.

  # once a string is matched to a session, it should be destroyed to prevent
  # re-use. to allow re-use, $destroy may be set to false.

  global $cfgimage;
  if (!session_exists($session)) $session = session_identity();
  $get_return = false;
  if ($chandle = @fopen($cfgimage['captcha']['file'], "rb")) {
    flock($chandle, LOCK_SH);
    while (!feof($chandle)) {
      $line = explode(" ", trim(fgets($chandle)), 3);
      if (($line[2] === $string) && ($line[1] == $session) && ($line[0] > (time() - $cfgimage['captcha']['keepalive']))) {
        $get_return = true;
        break;
      }
    }
    fclose($chandle);
  }
  if (($destroy) && ($get_return)) captcha_destroy($session);
  return $get_return;
}

function captcha_create($string, $session = "") {

  # associates a string of six lowercase letters with a session, either
  # specified by $session or by session_identity(). fails if $string is not
  # well-formed. returns true if successful, or false.

  global $cfgimage;
  if (!preg_match("/^[a-z]{6}$/", $string)) return false;
  if (!session_exists($session)) $session = session_identity();
  if ($thandle = @tmpfile()) {
    if ($chandle = @fopen($cfgimage['captcha']['file'], "rb")) {
      flock($chandle, LOCK_SH);
      while (!feof($chandle)) {
        $line = explode(" ", trim(fgets($chandle)), 3);
        if (($line[1] != $session) && ($line[0] > (time() - $cfgimage['captcha']['keepalive']))) fputs($thandle, implode(" ", $line) . "\n");
      }
      fclose($chandle);
      fseek($thandle, 0);
      if ($chandle = @fopen($cfgimage['captcha']['file'], "cb")) {
        if (flock($chandle, LOCK_EX)) {
          fputs($chandle, time() . " " . $session . " " . $string . "\n");
          while (!feof($thandle)) fputs($chandle, fgets($thandle));
        }
        fclose($chandle);
      }
    }
    flock($thandle, LOCK_UN);
    fclose($thandle);
    return true;
  }
  return false;
}

function captcha_destroy($session = "") {

  # dis-associates any existing captcha string with a session, either specified
  # by $session or by session_identity(). does not return any value.

  global $cfgimage;
  if (!session_exists($session)) $session = session_identity();
  if ($thandle = @tmpfile()) {
    if ($chandle = @fopen($cfgimage['captcha']['file'], "rb")) {
      flock($chandle, LOCK_SH);
      while (!feof($chandle)) {
        $line = explode(" ", trim(fgets($chandle)), 3);
        if (($line[1] != $session) && ($line[0] > (time() - $cfgimage['captcha']['keepalive']))) fputs($thandle, implode(" ", $line) . "\n");
      }
      fclose($chandle);
      fseek($thandle, 0);
      if ($chandle = @fopen($cfgimage['captcha']['file'], "cb")) {
        if (flock($chandle, LOCK_EX)) {
          while (!feof($thandle)) fputs($chandle, fgets($thandle));
        }
        fclose($chandle);
      }
    }
    flock($thandle, LOCK_UN);
    fclose($thandle);
  }
} 
```

在 captcha_image() 中，`return captcha_create($string, $session)`以前是`captcha_create(&$string ...)`.

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-11T21:46:50.073

这在用户态代码中是不可能的。对于手头的内部函数，您可以`PREFER_REF`在 arginfo 结构中指定标志。如果可能，这将传递值 by-ref，否则传递值。

在我看来，这个特性不暴露给用户态代码是件好事。在任何情况下，引用都是一件棘手的事情，并且根据您传递内容的准确程度，使它们具有不同的行为可选，只会使情况变得更糟。

我的建议：不要完全使用引用。你只会对他们有问题。

# openldap - LDAP 和组过滤器

> ID：11437142
> 
> 赞同：1
> 
> 时间：2012-07-11T16:26:25.427
> 
> 标签：openldap

我正在尝试设置 RhodeCode 以及其他服务以使用 LDAP（OpenLDAP v3）并且一切都很好，除了一件事，我的结构如下所示：

```
dc=domain,dc=com  
ou=Groups | ou=People  
hgusers   | test1  
sshusers  | test2  
others 
```

这些是通过 ldapsearch 获得的示例

```
dn: cn=sshusers,ou=Group,dc=domain,dc=com  
objectClass: top  
objectClass: posixGroup  
cn: sshusers  
userPassword:: e2NyeXB0fXg=  
gidNumber: 14567  
memberUid: test1  

dn: uid=test1,ou=People,dc=domain,dc=com  
uid: test1  
cn: Test User  
objectClass: account  
objectClass: posixAccount  
objectClass: top  
objectClass: shadowAccount  
shadowLastChange: 15472  
shadowMax: 99999  
shadowWarning: 7  
loginShell: /bin/sh  
uidNumber: 10099  
gidNumber: 10099  
homeDirectory: /home/test1  
gecos: test  
userPassword:: e1NTSEF9WDUvSWpYeU9YQjlESGxYdy9ETWFTRFhaejFVN3VLSm8= 
```

现在我正在尝试为 RhodeCode 和其他东西创建一个过滤器，因此它只允许来自 hgusers 组的人访问，但我不知道如何创建它。让我担心的是，没有可以使用的 memberOf 属性，也不知道如何添加它。有人可以帮我解决这个问题吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-12T10:47:14.847

我将使用 organizationsRole 或 groupOfUniqueNames 作为组类，并将 roleOccupant 或 uniqueMember 分别设置为组中用户的 DN。然后，您只需在该子树中搜索该属性中具有用户 DN 的组。UID 也可以工作，但是如果您使用 DN 值属性和“重新定义”覆盖，则可以解决引用完整性问题，而这确实是必须的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-12-20T08:16:30.250

换个方式去做吧。不要尝试将组分配给用户，而是创建作为用户列表的组。

如果您创建一个具有一系列 uniqueMember 属性的 groupOfUniqueNames，每个属性都是您的一个用户的 DN，那么当您转储您的用户的属性时，您不会看到这一点。

但是一个简单的搜索：“uniqueMember= *dn-of-user* ”会给你每个有用户作为成员的组。

# c++ - 带有 C++ 标头的 Objective-C 中包含保护的重复警告

> ID：11437151
> 
> 赞同：2
> 
> 时间：2012-07-11T16:26:54.093
> 
> 标签：c++, objective-c, xcode, objective-c++

我在演示项目中有一个文件 iforce2d_topdown_car.h ，其中包含如下保护：

```
#ifndef IFORCE2D_TOPDOWN_CAR_H
#define IFORCE2D_TOPDOWN_CAR_H

... source code ...

#endif 
```

这包含在 HelloWorldLayer.h 中，然后包含在另外两个文件中（除了 iforce2d 标头之外，这都是 obj-c）。一切编译正常，但我得到的任何错误都会显示 3 次。这让我很恼火，我想知道它是否是更大问题的征兆。

![xcode中的标头时髦](../Images/86093a2bc171f715619902a4778e5e2d.png)

这是预期的行为吗？在我看来，如果定义了预处理器 var，那么它将保持定义，并且下次包含它时将不会被编译。这里似乎不是这种情况，但我不知道为什么。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-11T17:38:01.587

是一个内联成员函数，`TDCar(b2World *)`因为它是在其类定义中定义的。这意味着编译器会实例化该函数并在每个调用该函数的翻译单元中发出相应的警告。

假设您有以下内容`A.h`：

```
A类{
上市：
    int f(int i);
};
```

和`A.cpp`

```
int A::f(int i) {
    诠释 j = 我;
    返回 i + 1;
}
```

编译器将编译该函数`A::f(int i)`一次并将其导出，因此对该函数的每次调用都将链接到导出的符号。因此，未使用变量的警告`j`将发出一次：`A.cpp`编译时。

但是，如果您编写以下内容`A.h`：

```
A类{
上市：
    整数 f(int i) {
        诠释 j = 我;
        返回 i + 1;
    }
};
```

然后编译器会将函数定义中的代码直接复制到调用函数的源代码文件中。如果您在 3 个不同的文件中使用该函数，该函数将编译三次并发出三次警告。

由于每个文件都是单独编译的，因此编译器无法知道已经针对另一个文件发出了警告。

Xcode 应该足够聪明，能够将三个警告识别为相同的并将它们聚合起来，这样您就只会得到一个警告。不幸的是，Xcode 没有那么聪明。

# .net - Windows 窗体：重绘后保留滚动位置

> ID：11437156
> 
> 赞同：1
> 
> 时间：2012-07-11T16:27:09.163
> 
> 标签：.net, winforms, scroll, redraw

我正在 Windows 窗体中构建一个简单的图像浏览器/查看器应用程序。

主窗体包含一个启用了 AutoScroll 的 Panel 控件，以便为主应用程序 MenuStrip 下的图像创建一个可滚动的内容区域。

在此面板中动态放置了一个或多个我已定义的 UserControl 对象。每一个都包含一个 GroupBox（为每组缩略图显示一个标题），它又包含一些按钮和一个 FlowLayoutPanel，其中填充了一个或多个显示图像缩略图的 PictureBox 对象。

可以单击每个缩略图以全尺寸打开所选图像，或在应用程序窗口中尽可能靠近它。这是通过动态生成一个占据整个窗口的 PictureBox 控件来实现的，该控件的 z-index 值使其显示在缩略图网格上方，从而使其模糊。

我遇到的问题是，当我创建和销毁覆盖的 PictureBox 控件时，包含缩略图的底层 Panel 控件会自行重绘，这会将其滚动位置重置为顶部，如果您之前完全向下滚动，这会很烦人。

奇怪的是，有时滚动位置被保留，我无法确定一种模式来解释不一致的行为。

谁能提出一个巧妙的解决方案来防止这种情况发生？还是我需要检查面板的滚动位置并在重绘后以编程方式将其设置回相同的值？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-11T17:17:33.173

听起来面板不是必需的。我猜您将 FlowLayoutPanel 的 AutoSize 设置为 true。

尝试仅使用 FlowLayoutPanel，因为它会为您提供默认 AutoSize = false 的滚动。

# asp.net - 为什么我在“/”应用程序中出现服务器错误？

> ID：11437161
> 
> 赞同：1
> 
> 时间：2012-07-11T16:27:33.200
> 
> 标签：asp.net, web-config

我一直试图在我的网站上解决这个问题，但我没有运气，我找到的每个页面都告诉我要设置 customErrors mode="Off"，我已经这样做了。此服务器错误仅发生在一页上，但这一页是大多数站点功能所在的页面。

我正在运行 .Net 4.0，我最近刚刚以同样的方式发布了同一个站点，完全没有问题。我的 web.config 文件没有任何更改。

这是我的 web.config 中的一个小代码示例，其中我将 customErrors 设置为关闭

```
<system.web>
  <customErrors mode="Off"/>
  <authorization>
    <allow users="?" />
  </authorization>
</system.web> 
```

如果有人可以提供一些有用的见解，将不胜感激，如果需要更多代码来解决这个问题，我将提供所要求的。谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-12T14:00:49.717

经过一天的寻找答案，它已经找到了。有人在未通知我的情况下更改了其中一个数据库名称。所以我的问题是我的数据库名称错误，没有其他问题。

谢谢你们

# php - 带有 sql 子查询的“我的网络”功能

> ID：11437164
> 
> 赞同：0
> 
> 时间：2012-07-11T16:27:45.527
> 
> 标签：php, mysql, sql

对于一个 sql 查询，我需要一点帮助；

这是我的基本用户数据库表

```
CREATE TABLE IF NOT EXISTS `users` (
  `id` int(11) NOT NULL AUTO_INCREMENT,
  `email` varchar(100) NOT NULL,
  `pass` varchar(255) NOT NULL,
  `fname` varchar(50) NOT NULL,
  `lname` varchar(40) NOT NULL, 
  `network` varchar(10) NOT NULL, 
  PRIMARY KEY (`id`)
) ENGINE=MyISAM  DEFAULT CHARSET=latin1 AUTO_INCREMENT=27 ; 
```

这是我的基本主题数据库表

```
CREATE TABLE IF NOT EXISTS `topics` (
  `id` int(11) NOT NULL AUTO_INCREMENT,
  `userid` varchar(100) NOT NULL,
  `title` varchar(255) NOT NULL,
  `body` text,
  `tags` varchar(256) NOT NULL,  
  PRIMARY KEY (`id`)
) ENGINE=MyISAM  DEFAULT CHARSET=latin1 AUTO_INCREMENT=2 ; 
```

我想做的是；即列出加入“哈佛”网络的用户的所有主题

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-11T16:32:35.157

你只需要一个简单的[`JOIN`](http://dev.mysql.com/doc/refman/5.0/en/join.html). 加入用户 ID 上的表（那些在 中的`"harvard"`）。

```
SELECT title,body
FROM topics, users
WHERE userid = users.id
AND network = 'harvard' 
```

或者使用`JOIN`关键字：

```
SELECT title,body
FROM topics
JOIN users ON userid = users.id
WHERE network = 'harvard' 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-11T16:33:33.043

我认为这应该可以解决问题：

```
SELECT 
    title 
FROM 
    topics t
INNER JOIN
    users u ON t.userid=u.id 
WHERE 
    network='Harvard' 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-11T16:33:38.060

```
SELECT t.title
FROM users u
INNER JOIN topics t ON u.id = t.userid
WHERE u.network = 'harvard'
GROUP BY u.id 
```

# php - 如果javascript文件没有重新加载重新加载，如何编写代码？

> ID：11437165
> 
> 赞同：1
> 
> 时间：2012-07-11T16:27:46.803
> 
> 标签：php, javascript, jquery, load

我有一个页面，php 和 javascript。有时，javascript 文件不加载，然后我的页面将正常工作。

我已经包含 5 个 javascript 文件（jQuery 插件），我想知道：

1.  我该如何改进 javascript 加载器？
2.  如果脚本文件未正确加载，我如何重新加载脚本文件？

我已经检查过，当 php 页面加载时间超过 10 秒时，页面会被破坏。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-11T16:31:33.470

**提示＃1：**

在页面末尾加载 Javascript 文件。

Javascript 不需要`HTTP`这么快发送，因为它仅用于页面加载后的动态更改。

移动：

```
 <script  type="text/javascript" src='src/jquery_1.7.min.js' ></script>
    <!-- fancybox -->
    <!--<script type="text/javascript" src="src/jquery.mousewheel.js"></script>-->
    <script type="text/javascript" src="src/jquery.fancybox.js?v=2.0.6"></script>
    <script type="text/javascript" src="helpers/jquery.fancybox-buttons.js?v=1.0.2"></script>
    <script type="text/javascript" src="helpers/jquery.fancybox-thumbs.js?v=1.0.2"></script>
    <script type="text/javascript" src="helpers/jquery.fancybox-media.js?v=1.0.0"></script>
    <script type="text/javascript">
        var _gaq = _gaq || [];
        _gaq.push(['_setAccount', 'UA-16476667-10']);
        _gaq.push(['_trackPageview']);
        (function() {
            var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
            ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
            var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
        })();

        function fireWhenReady() {
            if (typeof function1 != 'undefined') {
                function1();
            }
            else {
                setTimeout(fireWhenReady, 100);
            }
        }
        $(document).ready(fireWhenReady);
    </script> 
```

到页面底部。

**提示＃2：**

此外，尝试在两个版本中维护您的 Javascript 代码：

1.  `Sandbox`：您的代码版本很好地分为模块。
2.  `Release`：网站的代码版本，所有代码都放在一个 Javascript 文件中，并使用 YUI Compressor 之类的工具进行压缩。这会减少文件大小并通过相应减少数量来提高加载速度`HTTP requests`。

**提示＃3：**

代替：

`<script type="text/javascript" src='src/jquery_1.7.min.js' ></script>`

和：

`<script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.7.1/jquery.min.js"></script>`

今天的大多数用户都缓存了 jQuery 的 Google API 版本，因此这比必须加载您手头的版本要快得多。

享受和好运！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-11T16:33:19.590

那么代码看起来很整洁。

但我会将 $(document).ready() 脚本放在`<head>`一起加载的 CSS 和 javascript 组中。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-13T17:32:10.740

查看评论并猜测您可能遇到的问题，我认为您的情况是：

1.  您正在 PHP 中设置一个 JavaScript 变量并使用它。你所有的脚本都依赖于这个变量，所以你需要加载它`head`
2.  由于延迟，事情没有按顺序执行。

如果以上是正确的，那么我认为以下可能有效

1.  继续在 head 中使用 JavaScript 并声明一个命名空间，例如**`var MyBook; MyBook.chapterId = <%= echo $chapter-id %>`**. 但是然后将所有其他代码作为正文标记结束之前的最后一个脚本文件移动。
2.  此外，加载**`$(document).ready(function() {})`**，并在`MyBook.chapterId`那里使用。您现在可以将它用于 AJAX 调用或具有加载章节的函数，并将此变量传递给该函数

# windows - 如何获取打开的匿名管道列表

> ID：11437169
> 
> 赞同：1
> 
> 时间：2012-07-11T16:28:33.047
> 
> 标签：windows, winapi, anonymous-pipes

作为对旧问题的跟进：[如何获取 Windows 中所有打开的命名管道的列表？](https://stackoverflow.com/q/258701/1068609)，我处于需要检查进程是否使用匿名管道与其子进程通信的情况。有没有办法做到这一点 ？我试过 pipelist 和 process-explorer 但看起来它们只显示 NamedPipes 列表

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-13T14:06:52.590

@Deanna：作为关闭此主题的答案，确实 procExplorer 列出了所有匿名对象。但是目前还不能专门查看匿名管道。这使我假设，无法绝对确定进程使用的未命名管道

# javascript - 没有 jQuery 的延迟下拉菜单

> ID：11437171
> 
> 赞同：1
> 
> 时间：2012-07-11T16:28:39.333
> 
> 标签：javascript, css, drop-down-menu, menu

你知道那里有任何用纯 javascript 编写但不依赖 jQuery 的下拉菜单脚本吗？

我知道如何用 CSS 来实现这一点，但我还想添加一个漂亮的淡入淡出效果，让它在鼠标离开菜单后等待 1 秒，如果鼠标没有回到菜单区域内，则关闭它.

我想我可以使用 CSS“transition”属性实现淡入淡出效果，但我不知道如何在 mouseOut 上添加延迟

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-11T16:55:09.040

我喜欢这个，它只有 1.2 KB，代码修改简单：

[http://www.scriptiny.com/2008/11/drop-down-menu/](http://www.scriptiny.com/2008/11/drop-down-menu/)

您可以通过修改“t”变量来更改时间。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-11T17:07:35.307

您可以使用`transition-delay`-property 并执行以下操作：

*   当用户进入菜单时删除“延迟类”
*   当用户离开菜单时添加“延迟类”

见：[https ://developer.mozilla.org/en/CSS/transition-delay](https://developer.mozilla.org/en/CSS/transition-delay)

或者你可以这样做（注意：只是伪代码）：

```
var timer       = null;

function onenter() {
    showSubMenu();
    clearTimeout(timer);
    timer = null;
}

function onleave() {
    overMenu = false;
    timer    = setTimeout( function () { hideSubMenu(); } , 1000 );
} 
```

# sql-server-2008 - 使用 Access 数据库表填充现有 SQL Server 数据库表

> ID：11437173
> 
> 赞同：1
> 
> 时间：2012-07-11T16:28:43.930
> 
> 标签：sql-server-2008, ms-access, ms-access-2007

我在 SQL Server 2008 数据库中有一个空表，我想将访问数据库中的表中的数据插入到 SQL Server 中。有 1000 行需要引入。问题是 SQL Server 数据库表中有其他列在 Access 数据库表中不存在。

这里我提到一个表，但是大约有 15 个表需要从 access db 表中更新。这样做最好的海湾是什么？

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-11T22:01:15.860

在您的 Access db 中，您可以创建指向 SQL Server 表的 ODBC 链接。然后为每对表（Access 和 SQL Server）执行 Access 调用的追加查询。

```
INSERT INTO remote_table1 (field1, field2, field3, etc)
SELECT field1, field2, field3, etc
FROM access_table1; 
```

如果字段名称匹配并且数据类型兼容，这应该是相当简单的。如果您的 SQL Server 字段的名称与其 Access 对应字段的名称不同，则需要做更多的工作。如果数据类型不直接兼容，您可以在查询中使用字段表达式转换值。您可以在 Access 查询中使用许多数据类型转换函数`CDate()`：`CStr()`; `CInt()`; `CLng()`; 等等

# ios - 将多个字符串保存并加载到 iOS 中的 UITextView

> ID：11437175
> 
> 赞同：0
> 
> 时间：2012-07-11T16:28:51.857
> 
> 标签：ios, xcode, ipad, uitextfield

我正在开发一个有点像打字页面笔记本的应用程序。

我有一个`UITextView *documentText`和一个`int currentPage`来跟踪多个页面。后退和前进按钮加 1 或减 1 `currentPage`，然后设置文本`documentText`以匹配 的新值`currentPage`。

但是，当我运行它时，什么都没有保存，只有一个空白文本字段。我认为这是一个问题`[saveDocs writeToFile:path atomically:YES encoding:NSUnicodeStringEncoding error:NULL];` ，但我不确定要改变什么，或者这甚至是问题所在。

无论如何，这是我用来保存文本的代码：

```
- (IBAction)saveDocs:(id)sender {

NSString *saveDocs = documentText.text;
NSArray *paths = NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES);
NSString *documentsDirectory = [paths objectAtIndex:0];
NSString *path = [documentsDirectory stringByAppendingPathComponent:[NSString stringWithFormat: @"%@-%d.txt", @"document", currentPage]];
[saveDocs writeToFile:path atomically:YES encoding:NSUnicodeStringEncoding error:NULL];

[[NSUserDefaults standardUserDefaults] setInteger:currentPage forKey:@"CurrentDocument"];

} 
```

此外，在 ViewDidLoad 中，我正在使用以下代码：

```
NSArray *paths = NSSearchPathForDirectoriesInDomains(NSDocumentDirectory,
                                                     NSUserDomainMask, YES);

   currentPage = [[NSUserDefaults standardUserDefaults] integerForKey:@"CurrentDocument"];

NSString *documentsDirectory = [paths objectAtIndex:0];
NSString* path = [documentsDirectory stringByAppendingPathComponent:[NSString stringWithFormat: @"%@-%d.txt", @"document", currentPage]];
NSString* doc = [NSString stringWithContentsOfFile:path encoding:NSUTF8StringEncoding error:nil];

[documentText setText:doc]; 
```

谢谢你的帮助，-卡尔

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-11T17:37:17.890

你用 NSUnicodeStringEncoding 编写。但是您使用 NSUTF8StringEncoding 阅读。也许您应该坚持使用 NSUTF8StringEncoding 进行写作和阅读。

# mysql - 无法加载 com.mysql.jdbc.Driver

> ID：11437178
> 
> 赞同：0
> 
> 时间：2012-07-11T16:28:58.453
> 
> 标签：mysql, ant, testng

当我为 Testng 应用程序运行 ant 时，我无法加载 com.mysql.jdbc.Driver。

下面是抛出的异常。

```
[testng] java.lang.ClassNotFoundException: com.mysql.jdbc.Driver
[testng] at java.net.URLClassLoader$1.run(URLClassLoader.java:366)
[testng] at java.net.URLClassLoader$1.run(URLClassLoader.java:355)
[testng] at java.security.AccessController.doPrivileged(Native Method) 
```

谢谢和问候， Sreekanth

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-11T16:41:56.090

`CLASSPATH`环境变量**仅**由命令使用，`java.exe`即使如此，也仅在*没有*任何`-cp`, `-classpath`,`-jar`参数的情况下使用。它被IDE**忽略。**

该环境变量在现实世界中也被认为是一种糟糕的做法，因为它破坏了可移植性。`-cp`对于 Sun 来说，防止初学者厌倦在or`-classpath`参数中一次又一次地键入相同的类路径对 Sun 来说是“有用的” 。在现实世界中，批处理/shell 文件是首选。

如果您使用的是 IDE，则类路径称为“构建路径”（它代表编译时*和*运行时类路径）。您可以在项目的属性中对其进行配置。您可以添加一个完整的文件夹，您可以添加单个/外部 JAR 文件，您可以链接项目等等。好好利用它。忘记整个`CLASSPATH`环境变量。

对于命令提示符，

您必须将 jarfile 的完整路径放在类路径中（包括文件名）：

```
.;C:\j2sdk1.4.2_16\jre\lib;
C:\Program Files\mysql-connector-java-3.1.144\mysql-connector-java-3.1.14-bin.jar 
```

正如河马所说，您必须`cmd`在更改后重新启动。如果它不起作用，请像这样启动您的程序：

```
java -cp ".;C:\j2sdk1.4.2_16\jre\lib;
C:\Program Files\mysql-connector-java-3.1.144\mysql-connector-java-3.1.14-bin.jar"
my.class.Name 
```

# iphone - iOS 5：在 UITableView 委托方法中执行 if 语句

> ID：11437179
> 
> 赞同：1
> 
> 时间：2012-07-11T16:28:59.520
> 
> 标签：iphone, uitableview, ios5, if-statement

我目前正在编写一个应用程序，该应用程序旨在利用从后端引入的数据进行扩展。为了测试这种可扩展性，我目前正在使用 plist 来引入一些基本数据。

计划最终让男性/女性图标出现在用户名旁边以用于性别/视觉目的（目前使用颜色），但是，在正确的 tableView 方法中编写条件语句后，应用程序似乎完全跳过了这些参数。

```
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{
SelectProfileCell *cell = (SelectProfileCell *) [tableView dequeueReusableCellWithIdentifier:@"SelectProfileCell"];

NSArray *array = [[NSArray alloc] initWithArray:[userArray objectAtIndex:indexPath.row]];

cell.nameLabel.text = [array objectAtIndex:0];

gender = [array objectAtIndex:1];

if(gender == @"Male"){
    cell.genderLogo.backgroundColor = [UIColor blueColor];
    NSLog(@"Male");
   }
if(gender == @"Female"){
cell.genderLogo.backgroundColor = [UIColor greenColor];
    NSLog(@"Female");
}

return cell;
} 
```

在这种情况下， userArray 和 gender 都是已经初始化的实例变量。“userArray”已经从属性列表中传递了适当的二维数组数据（使用控制台检查）。

同样，日志没有显示“男性”/“女性”调试消息，因此这些“if”语句由于某种原因被跳过。有什么建议么？

谢谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-11T16:30:25.243

使用`[gender isEqualToString:@"Male"]`而不是 ==

# android - Android：我可以使用 ADB.EXE 读取 IMEI 吗？

> ID：11437180
> 
> 赞同：1
> 
> 时间：2012-07-11T16:29:00.720
> 
> 标签：android, adb, imei, serial-number

> **可能重复：**
> [是否有可用于获取设备的 IMEI/MEID 的 android shell 或 adb 命令？](https://stackoverflow.com/questions/6852106/is-there-an-android-shell-or-adb-command-that-i-could-use-to-get-a-devices-imei)

我需要从 ADB.EXE 命令行读取 TelephonyManager.getDevideId() 返回的相同值。可能吗？

我不会使用

```
adb get-serialno 
```

因为它返回的是序列号，而不是他的 IMEI 号。

谢谢。

# android - 在 Android 中不断收到 OOM 错误

> ID：11437183
> 
> 赞同：0
> 
> 时间：2012-07-11T16:29:09.763
> 
> 标签：android, android-lifecycle

我不断交替出现 OOM 错误或 Canvas 尝试绘制回收的位图错误。我不确定哪种方法是最好的方法，希望能提供一些意见。我有一个主屏幕，上面有几张图像。如果我这样处理它，每当我加载回屏幕时都会收到 OOM 错误：

```
@Override
protected void onDestroy() {
    super.onDestroy();

    recycleHomescreenImages();
    unbindDrawables(findViewById(R.id.homescreen_root_view));
    System.gc();
}

private void unbindDrawables(View view) {
    if (view.getBackground() != null) {
    view.getBackground().setCallback(null);
    }
    if (view instanceof ViewGroup) {
        for (int i = 0; i < ((ViewGroup) view).getChildCount(); i++) {
        unbindDrawables(((ViewGroup) view).getChildAt(i));
        }
    ((ViewGroup) view).removeAllViews();
    }
} 
```

我的主屏幕上的图像似乎没有被正确回收。但是，如果我将 unbindDrawables(View view) 方法更改为如下所示，则会出现 Canvas 试图使用回收的位图错误。

```
private void unbindDrawables(View view) {
    if (view.getBackground() != null) {
    view.getBackground().setCallback(null);
    if (view.getBackground() instanceof BitmapDrawable)
        ((BitmapDrawable)view.getBackground()).getBitmap().recycle();
    }
    if (view instanceof ViewGroup) {
        for (int i = 0; i < ((ViewGroup) view).getChildCount(); i++) {
        unbindDrawables(((ViewGroup) view).getChildAt(i));
        }
    ((ViewGroup) view).removeAllViews();
    }
} 
```

感谢您的任何意见，如果您需要更多信息，请告诉我。

编辑：更令人困惑的是，在我第一次恢复活动后，我没有使用回收的位图获得 Canvas，但只有当我第二次恢复活动时。

# c# - MSMQ 上是否有任何事件或回调将新消息添加到队列

> ID：11437189
> 
> 赞同：8
> 
> 时间：2012-07-11T16:29:29.433
> 
> 标签：c#, msmq, message-queue

我有两个组件。一个是窗口应用程序，另一个是窗口服务。
窗口应用程序写入消息队列（MSMQ）并且服务正在读取它并处理消息。
服务是否应该一直在寻找新消息的队列...就代码而言，我应该
使用无限`while`循环还是`Timer`
OR
队列中是否有任何事件或回调以将新消息添加到队列中？这样当窗口应用程序向队列添加新消息时，Service 可以知道。
这就是我要使我的应用程序高效的所有要求，因此如果有任何其他方法可以实现这一点，您可以提出建议。
谢谢阅读

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-07-11T16:41:42.157

您不需要任何事件或循环。[`Receive`](http://msdn.microsoft.com/en-us/library/y918yfy2.aspx)方法将从队列中读取，如果队列为空，它将阻塞，直到添加新消息。如果您同时需要做其他事情，请将接收代码放在单独的线程中。

您还可以通过使用异步方法来使用[`BeginReceive`](http://msdn.microsoft.com/en-us/library/43h44x53.aspx). 当从队列中读取消息时，这实际上会引发一个事件。

# jvm - XPages JVM 错误：err.PersistenceServiceResourceProvider.Errorwritingtopersistedcontenttor

> ID：11437191
> 
> 赞同：1
> 
> 时间：2012-07-11T16:29:39.457
> 
> 标签：jvm, xpages

我们正在运行 Domino 8.5.3，并且服务器日志不断发出这些错误：

> HTTP JVM：！err.PersistenceServiceResourceProvider.Errorwritingtopersistedcontenttor！

我们无法将其隔离到特定页面。最终，HTTP 任务会崩溃，我们需要重新启动服务器并重新编译服务器上的所有数据库。我们使用 CKEditor 来生成 HTML 内容。您的帮助将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-03-20T16:05:57.427

我们过去经常遇到这个确切的错误，这似乎是由 Paul 提到的通过 CKEditor 上传的内联图像引起的。

我不知道为什么，但我们通过 xsp 属性 xsp.persistence.dir.xspupload（正式名称为 xsp.upload.directory）更改 domino 用于上传的目录来修复它

将其更改为 c:\temp 之类的东西而不是 windows 默认值会使问题消失。可能是巧合，但可能是窗户干扰

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-11-22T17:01:10.137

我以前没有看到过这个错误，但它看起来可能与要求服务器在调用服务器之间为 xpages 提供大量数据有关 - 有效地，会话和应用程序范围数据。

# objective-c - 如何在像 3x3 表一样对齐的视图中添加 UIView 子视图

> ID：11437192
> 
> 赞同：1
> 
> 时间：2012-07-11T16:29:43.840
> 
> 标签：objective-c, uiview, core-animation, alignment, uiviewanimation

我创建了一个主视图，并添加了从 UIView 子类化的 9 个 UIMyView。我使用 NSBundle 添加该 UIMyViews 的实例以加载 nib 文件并在主视图控制器中添加子视图，当然所有这些视图都出现在超级视图的左上角，一个隐藏另一个，最后一个可见，我需要以某种方式使用超级视图中的点来定位它们，或者创建类似表格的东西并将 UIMyViews 添加到其单元格中？！

想象一下，您有一张桌子，将 9 张牌放在 3 行 3 列（9 张牌）中。这是我需要实现的。

[编辑] 检查这张图片： http: [//www.wpclipart.com/recreation/games/card_deck/cards_symbols/playing_card_symbols.png](http://www.wpclipart.com/recreation/games/card_deck/cards_symbols/playing_card_symbols.png)

我只需要 3 行和 3 列。

任何人都可以建议这种操作的最佳实践吗？

之后我想在拖动、触摸和重新排序等时在这些 UIMyViews 上实现各种动画和效果。

谢谢你。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-11T16:51:19.900

如果要手动添加它们，只需在添加到主视图之前设置每个子视图的框架：

```
CustomView *view = [[CustomView alloc] initWithFrame:CGRectMake(...)]; 
```

与手动设置所有内容相比，有一些“更聪明”的方法可以解决这个问题。iOS6为此包含一些功能，并且还制作了gridviews，例如：

*   [GMGridView](https://github.com/gmoledina/GMGridView)
*   [DTGridView](https://github.com/danielctull/DTGridView)
*   [AQGridView](https://github.com/AlanQuatermain/AQGridView)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-11T17:09:53.023

如果你想遍历所有视图并将它们放置在一个网格中，你可以这样：

```
 // Array of 9 views    
NSArray *views = [NSArray arrayWithObjects:[[UIView alloc] initWithFrame:CGRectMake(0, 0, 100, 100)], [[UIView alloc] initWithFrame:CGRectMake(0, 0, 100, 100)], [[UIView alloc] initWithFrame:CGRectMake(0, 0, 100, 100)], [[UIView alloc] initWithFrame:CGRectMake(0, 0, 100, 100)], [[UIView alloc] initWithFrame:CGRectMake(0, 0, 100, 100)], [[UIView alloc] initWithFrame:CGRectMake(0, 0, 100, 100)], [[UIView alloc] initWithFrame:CGRectMake(0, 0, 100, 100)], [[UIView alloc] initWithFrame:CGRectMake(0, 0, 100, 100)], [[UIView alloc] initWithFrame:CGRectMake(0, 0, 100, 100)], nil];

int count = 0;
int maxPerRow = 3;
int row = 0;
float spacing = 100.0;

for(UIView *view in views)
{
    // Only added to tell the difference between views, make sure to import QuartzCore or remove the next 3 lines
    view.backgroundColor = [UIColor colorWithRed:.5 green:0 blue:0 alpha:1];
    view.layer.borderWidth = 1;
    view.layer.borderColor = [UIColor whiteColor].CGColor;

    // position view
    view.frame = CGRectMake(count*spacing, row * spacing, view.frame.size.width, view.frame.size.height);
    [self.view addSubview:view];

    if(count % maxPerRow == maxPerRow-1)
    {
        count = 0;
        row++;
    }
    else
    {
        count++;
    }
} 
```

这会给你这样的东西：

![在此处输入图像描述](../Images/384709b433a52ceb452c4bea30497f23.png)

# c# - 在 .aspx 页面中记录 print(window.print()) 和 email(mailto) 事件

> ID：11437195
> 
> 赞同：0
> 
> 时间：2012-07-11T16:29:48.023
> 
> 标签：c#, asp.net, .net, vb.net, event-handling

任何人都知道如何使用事件处理程序为服务器端的所有 .aspx 页面记录 print(window.print()) 和 email(mailto) 事件，以便能够在触发时将分析数据存储在数据库中？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-11T16:52:04.107

您的站点上可能有一个“Analytics.aspx”页面。此页面将解析传入的发布值或查询字符串值，并根据需要写入您的数据库。例如：

/analytics.aspx?a=email&id=1234

可以将“1234”页上发生的“电子邮件”操作写入数据库。

然后在生成动作的页面中，一些 javascript 对你喜欢的任何动作进行 ajax 调用，通过适当的变量传递给 analytics.aspx 页面。像 jQuery ajax helpers 这样的东西可能会有所帮助：

[http://api.jquery.com/jQuery.ajax/](http://api.jquery.com/jQuery.ajax/)

请注意，“常规”分析将无法运行——这是假设您有某种自定义数据库。因为您的日志文件可能很快就会包含许多指向此“analytics.aspx”页面的链接，如果没有查询字符串信息，这些链接对解释毫无意义。

# android - 全屏打开 youtube (Intent.Action_view) 链接

> ID：11437197
> 
> 赞同：3
> 
> 时间：2012-07-11T16:29:55.753
> 
> 标签：android, android-intent

我尝试了各种选项，例如：

```
startActivity(new Intent(Intent.ACTION_VIEW, Uri.parse(vnd.youtube://"+<id>); 
```

但似乎我无法启动`Intent`全屏强制模式。

一个解决方案可能是做一个 webview。但是应该有办法强制全屏。

也许我可以通过向`Intent`?

请帮忙 ：）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-11T13:08:18.757

至于 YouTube v4.1.47，您可以执行以下操作：

```
Intent playIntent = new Intent(Intent.ACTION_VIEW);
playIntent.setData(Uri.parse(<yout_YouTube_url>));
playIntent.putExtra("force_fullscreen", true); 
```

它可能适用于旧版本，但我还没有测试过。

# java - 如何将字节数组转换为整数数组

> ID：11437203
> 
> 赞同：18
> 
> 时间：2012-07-11T16:30:27.920
> 
> 标签：java, arrays, int, byte, endianness

我正在使用以下方法读取文件：

```
int len = (int)(new File(args[0]).length());
    FileInputStream fis =
        new FileInputStream(args[0]);
    byte buf[] = new byte[len];
    fis.read(buf); 
```

正如我在[这里](http://java.sun.com/developer/technicalArticles/Programming/PerfTuning/)找到的。是否可以转换`byte array buf`为`Int Array`? 转换`Byte Array`为`Int Array`会占用更多空间吗？

编辑：我的文件包含数百万个整数，例如，

100000000 200000000 .....（使用普通 int 文件写入）。我把它读到字节缓冲区。现在我想将它包装到 IntBuffer 数组中。怎么做 ？我不想将每个字节转换为 int。

* * *

## 回答 #1

> 赞同：49
> 
> 时间：2012-07-11T17:24:33.397

您在评论中说过，您希望输入数组中的四个字节对应于输出数组上的一个整数，这样效果很好。

取决于您是否希望字节是大端或小端顺序，但是......

```
 IntBuffer intBuf =
   ByteBuffer.wrap(byteArray)
     .order(ByteOrder.BIG_ENDIAN)
     .asIntBuffer();
 int[] array = new int[intBuf.remaining()];
 intBuf.get(array); 
```

完成，分三行。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-07-11T16:36:04.000

Converting every 4 bytes of a byte array into an integer array:

```
public int[] convert(byte buf[]) {
   int intArr[] = new int[buf.length / 4];
   int offset = 0;
   for(int i = 0; i < intArr.length; i++) {
      intArr[i] = (buf[3 + offset] & 0xFF) | ((buf[2 + offset] & 0xFF) << 8) |
                  ((buf[1 + offset] & 0xFF) << 16) | ((buf[0 + offset] & 0xFF) << 24);  
   offset += 4;
   }
   return intArr;
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-10-08T15:36:02.073

这适合你吗？

```
 int IntToByte(byte arrayDst[], int arrayOrg[], int maxOrg){
        int i;
        int idxDst;
        int maxDst;
        //
        maxDst = maxOrg*4;
        //
        if (arrayDst==null)
            return 0;
        if (arrayOrg==null)
            return 0;
        if (arrayDst.length < maxDst)
            return 0;
        if (arrayOrg.length < maxOrg)
            return 0;
        //
        idxDst = 0;
        for (i=0; i<maxOrg; i++){
            // Copia o int, byte a byte.
            arrayDst[idxDst] = (byte)(arrayOrg[i]);
            idxDst++;
            arrayDst[idxDst] = (byte)(arrayOrg[i] >> 8);
            idxDst++;
            arrayDst[idxDst] = (byte)(arrayOrg[i] >> 16);
            idxDst++;
            arrayDst[idxDst] = (byte)(arrayOrg[i] >> 24);
            idxDst++;
        }
        //
        return idxDst;
    }

    int ByteToInt(int arrayDst[], byte arrayOrg[], int maxOrg){
        int i;
        int v;
        int idxOrg;
        int maxDst;
        //
        maxDst = maxOrg/4;
        //
        if (arrayDst==null)
            return 0;
        if (arrayOrg==null)
            return 0;
        if (arrayDst.length < maxDst)
            return 0;
        if (arrayOrg.length < maxOrg)
            return 0;
        //
        idxOrg = 0;
        for (i=0; i<maxDst; i++){
            arrayDst[i] = 0;
            //
            v = 0x000000FF & arrayOrg[idxOrg];
            arrayDst[i] = arrayDst[i] | v;
            idxOrg++;
            //
            v = 0x000000FF & arrayOrg[idxOrg];
            arrayDst[i] = arrayDst[i] | (v << 8);
            idxOrg++;
            //
            v = 0x000000FF & arrayOrg[idxOrg];
            arrayDst[i] = arrayDst[i] | (v << 16);
            idxOrg++;
            //
            v = 0x000000FF & arrayOrg[idxOrg];
            arrayDst[i] = arrayDst[i] | (v << 24);
            idxOrg++;
        }
        //
        return maxDst;
    } 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-11T16:35:54.593

Create a new `int` array and copy over the values, casting as needed.

```
int[] arr = new int[len];

for(int i = 0; i < len; i++)
    arr[i] = (int)buf[i]; 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-11T16:35:58.780

define "significantly". in java, an int is 4 bytes, so by definition the array would be 4x the space. See: [http://docs.oracle.com/javase/tutorial/java/nutsandbolts/datatypes.html](http://docs.oracle.com/javase/tutorial/java/nutsandbolts/datatypes.html)

And during the conversion, you have to have both, so during the copy portion, you'd be using even more, if you were copying the whole array at once.

as for the conversion, there are many related questions:

[Java - converting byte array of audio into integer array](https://stackoverflow.com/questions/1044372/java-converting-byte-array-of-audio-into-integer-array?rq=1)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-07-11T16:44:43.757

在java中：

*   **字节**= 8 位
*   **整数**= 32 位

对于转换，您可以执行以下操作：

```
byte[] byteArray = new byte[] {123, 12, 87};
int[] intArray = new int[byteArray.length];

// converting byteArray to intArray
for (int i = 0; i < byteArray.length; intArray[i] = byteArray[i++]);

System.out.println(Arrays.toString(intArray)); 
```

这将输出：

```
[123, 12, 87] 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2018-08-02T16:14:16.897

将字节数组转换为整数数组的解决方案，其中每组 4 个字节代表一个整数。字节输入是`byte[] srcByte`。int 输出是`dstInt[]`.

Little-endian 源字节：

```
 int shiftBits;
    int byteNum = 0;
    int[] dstInt = new int[srcByte.length/4]; //you might have to hard code the array length

    //Convert array of source bytes (srcByte) into array of integers (dstInt)
    for (int intNum = 0; intNum < srcByte.length/4; ++intNum) {  //for the four integers
        dstInt[intNum] = 0;                                      //Start with the integer = 0

        for(shiftBits = 0; shiftBits < 32; shiftBits += 8) {     //Add in each data byte, lowest first
            dstInt[intNum] |= (srcByte[byteNum++] & 0xFF) << shiftBits;
        }
    } 
```

对于 Big-Endian 替换此行：

```
 for(shiftBits = 24; shiftBits >= 0; shiftBits -= 8)  //Add in each data byte, highest first 
```

# java - Java EE 6：如何从无状态会话 Bean 调用有状态会话 Bean？

> ID：11437206
> 
> 赞同：8
> 
> 时间：2012-07-11T16:30:32.047
> 
> 标签：java, ejb, stateless-session-bean, stateful-session-bean

我有一个作为身份验证模块的有状态会话 Bean (SFSB)。在 SFSB 中，我存储当前登录的用户。此外，我有一些外观（它们是无状态会话 Bean (SLSB)）来处理我的实体的 JPA/SQL 内容。为了检查当前用户的访问权限，我尝试从 SLSB 中调用 SFSB。但是从 SLSB 调用时，当前用户字段始终为“空”。直接调用 SFSB 时，当前用户字段设置正确......对于调用，我使用 @EJB 注释。

任何想法可能是什么问题？这在某种程度上是一个上下文问题吗？通常可以从 SLSB 调用 SFSB 来保留它的状态吗？

提前谢谢了！

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-07-11T17:38:21.170

您不应该从无状态会话 bean 调用有状态会话 bean。

这是一些阅读：[JEE6 教程 - 会话 Bean](http://docs.oracle.com/javaee/6/tutorial/doc/gipjg.html#gipnl)

无状态 bean 对您的会话一无所知。任何时候调用它，它都是无状态的。然后它调用有状态会话 bean。毫不奇怪，它没有任何与客户端会话状态相关的上下文，因为它是从无状态对象调用的。

我不知道它是否会起作用，但您可以尝试通过使用@EJB 表示法进行 JNDI 查找而不是 DI 来获取上下文。在无状态 ejb 中这样的东西可能会起作用。你可能不得不玩它，我不能保证任何事情。它应该获取调用无状态 ejb 的客户端的上下文。客户端将需要有会话上下文/范围或忘记它。

```
@Resource SessionContext sessionContext;

MyStatefulBean msb = (MyStatefulBean)sessionContext.lookup("ejb/MyStatefulBean");
msb.doSomething(fubar); 
```

最好从具有会话范围的客户端或从另一个有状态 ejb 调用有状态会话 bean。无状态和有状态有不同的存在理由。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2014-09-15T20:16:36.600

不应将有状态 EJB 注入无状态 EJB。这可能会产生非常不可预测的后果，因为有状态 EJB 的生命周期是在注入并由拥有的 bean 管理时开始的。在最坏的情况下，应用服务器可以为不同的用户重用无状态 EJB，然后这些用户将访问相同的有状态 EJB。在您的情况下，用户将被识别为不同的用户。

很可能您希望将有状态的 EJB 与当前的 HTTP 会话相关联，这并没有像许多人想象的那样自动完成。有关更多详细信息，请阅读此处名为 EJB 3 Is Not Contextual 的部分：[上下文和依赖注入文章](http://www.oracle.com/technetwork/articles/java/cdi-javaee-bien-225152.html)

为了将有状态 EJB 与会话相关联，您需要将有状态 EJB 注入到会话范围的 CDI bean 中，该 CDI bean 可以自由注入到无状态 bean 中 - 实际上只注入了一个存根和会话范围的 bean（连同有状态 EJB）为每个新会话创建。

也许更好的方法是提取有状态 bean 的接口，并使用 CDI 生产者创建有状态 bean 的会话范围实现。通过这种方式，您还可以处理有状态 EJB 因 EJB 中的异常而被自动删除的情况。在这种情况下，您可能希望在同一会话中重新创建 EJB。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-06-07T03:03:12.440

如果通过查找将有状态会话 bean 注入到无状态 bean 中也不起作用，因为将为有状态 bean 创建新实例，因此它不包含任何值，如记录的用户信息等......

# wordpress - 未找到自定义分类术语页面 Wordpress

> ID：11437210
> 
> 赞同：0
> 
> 时间：2012-07-11T16:30:50.137
> 
> 标签：wordpress, rewrite, taxonomy, custom-taxonomy

单击链接以显示分类中的术语时，我收到“找不到页面”消息

场景：我有一个名为“glossary”的自定义帖子类型附加的是一个名为“section”的自定义分类法，重写设置为“library/glossary-start-here”</p>

我创建了一个页面，列出了分类中的术语。这是一个带有“glossary-sections”标签的 Wordpress 页面——该页面的模板设置为“taxonomy-section.php”。该页面是“图书馆”的子页面，因此该页面的永久链接是“example.com/library/glossary-starts-here/glossary-sections/”

模板“taxonomy-section.php”的代码如下：

```
<?php // Begin header section.
$argterms=array(
'include' =>array(
    117,118,115)
);
$terms = get_terms('section', $argterms);
echo '<ul>';
foreach ($terms as $term) {
echo '<h3><a href="'.get_term_link($term->slug, 'section').'">' . $term->name . '</a></h3>';
}
echo '</ul>'; ?>
<div>
<?php 
```

当单击在许多其他页面上使用的“词汇表部分”页面的链接时，我收到一个找不到页面的消息。

我知道该模板可以发挥作用，因为在某些情况下，当我在解决问题时，我已经让它工作了。但是，我找不到导致页面工作的一致条件。我怀疑这个问题与重写有关，但我的测试没有定论。

对于为什么这不起作用以及如何纠正它的任何建议，我将不胜感激。我特别困惑的是，我可以指定一个像“glossary-section”这样的页面却找不到它。

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-11T17:51:58.933

据我了解，WordPress 有一个层次结构/解析顺序（可以这么说），当它收到请求时它会寻找什么。从技术上讲，分类只是一个标签。

我不确定这是否会有所帮助：

[http://justintadlock.com/archives/2009/06/04/using-custom-taxonomies-to-create-a-movie-database](http://justintadlock.com/archives/2009/06/04/using-custom-taxonomies-to-create-a-movie-database)

但 J.Tadlock 始终是一个坚实的起点。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-12T17:31:57.230

问题的根源在于我对分类进行了重写，同时使用了带有指定模板的页面。删除重写后，似乎一切正常。

# javascript - HTML5 画布工具提示

> ID：11437211
> 
> 赞同：3
> 
> 时间：2012-07-11T16:30:51.950
> 
> 标签：javascript, html, tooltip, easeljs

我正在使用 HTML5 画布。我已将图像 (BitmapImages) 添加到画布，现在我想为这些位图图像添加简单的工具提示。

这可能吗 ？？？如果是这样，有人可以告诉/告诉我如何实现这一目标吗？

我不确定它是否有所作为，但我也在使用 Easel JS 框架......

这是我目前拥有的示例：

```
var container = new Container(); // EaselJS Container
container.x = 100;
container.y = 100;

stage.addChild(container);

var image = new Image();
image.src = "image.png";

var bitmap = new Bitmap(image);
bitmap.x = 5;
bitmap.y = 5;
bitmap.mouseEnabled = true;

container.addChild(bitmap);

... 
```

我没有测试过这段代码，但基本上是一个位图图像被创建并添加到我的舞台上。我现在想向我的位图图像添加一个简单的工具提示，但似乎无法弄清楚如何:(

任何帮助将不胜感激。

干杯，乔恩。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-07-13T01:52:08.393

这是我的做法：

```
stage.enableMouseOver();

bitmap.onMouseOver = function(e) {
    stage.canvas.title = 'put your tooltip text here';
}

bitmap.onMouseOut = function(e) {
    stage.canvas.title = '';
} 
```

这通过使用浏览器已经提供的工具提示来工作。

# pdf - 防止直接访问 IIS 7 中的文件

> ID：11437216
> 
> 赞同：0
> 
> 时间：2012-07-11T16:31:11.250
> 
> 标签：pdf, iis-7, hotlinking

我有一个在 Micrisoft IIS 7 服务器上运行的 PHP 应用程序。该应用程序在 iFrame 上显示 PDF 文件，其中包含用户的敏感数据，我不希望知道文件地址的任何人直接访问这些数据。

所以基本上，我正在寻找一种方法来保护文件不被浏览器直接访问或下载，但仍然能够在应用程序的 iFrame 上显示它。

我用重写规则做了一些研究，但是由于 iFrame 的“HTTP_REFERER”是空的，我找不到一个好的解决方案

对此有什么建议吗？提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-11T18:49:56.367

在没有看到您的任何代码或您的应用程序如何工作的情况下，我只能根据我认为您的应用程序的工作方式给出建议。

您应该考虑更改应用程序，以便 PHP 读取目录，显示文件名（无论您希望它们如何出现），并带有指向`download.php`页面的链接，而不是显示文件本身，以及直接指向这些文件的链接。下载页面（在检查用户是否有权下载文件之后）然后将文件加载到内存中并将其作为响应（带有适当的`Content-Disposition`和`Content-Type`标题）提供。

由于您的 PHP 应用程序可以直接读取 web 目录中的文件，因此您可以设置重写规则以防止从 web 访问这些文件；这样，文件只能由 PHP 应用程序访问，它不依赖于重写规则来访问驱动器。

这就是像[Source Forge](http://sourceforge.net)这样的地方可以显示带有倒计时的广告的方式，您的文件下载将在 5 秒后开始。

# sql - LINQ to SQL 中的 INNER JOIN LEFT JOIN

> ID：11437218
> 
> 赞同：0
> 
> 时间：2012-07-11T16:31:31.940
> 
> 标签：sql, linq

如何将以下 SQL 查询中的 INNER JOIN 和 LEFT JOIN 转换为 LINQ to SQL？谢谢！

```
SELECT transactions.postdate,
       transactions.clientkey    AS TransClientKey,
       transactions.type         AS TransType,
       clients.clientno,
       Isnull(clients.nostmt, 0) AS CliNoStmt,
       Isnull(aging.nostmt, 0)   AS AgeNoStmt,
       pmtchecks.*
FROM   ((pmtchecks
         INNER JOIN transactions
                 ON pmtchecks.transkey = transactions.transkey)
        INNER JOIN clients
                ON transactions.clientkey = clients.clientkey)
       LEFT JOIN aging
              ON ( transactions.clientkey = aging.clientkey )
                 AND ( pmtchecks.debtorkey = aging.debtorkey )
WHERE  ( pmtchecks.debtorkey = 36927 )
       AND ( transactions.status = 0 )
       AND ( transactions.postdate <= '31-May-2012' )
       AND ( ( transactions.postdate >= '01-May-2012' )
              OR ( clients.clientno = 'UNKNOWN' ) )
ORDER  BY pmtchecks.checkdate,
          pmtchecks.checkno 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-11T17:40:27.383

嗨，这是一种虚拟代码，我说它完全正确，但得到结果的想法是完全相同的

```
var anonymousType=  (from pm in pmtchecks
        join tr in transactions
        on pm.transkey equals tr.transkey //INNERJOIN
        join cl in clients
        on tr.clientKey equals cl.clientKey
        join ag in aging 
        on pm.debtorkey equals ag.debtorKey into ljoin //Left Join
        from lj in ljoin.DefaultOrEmpty()
        where pm.debortkey==36927 && tr.status==0 && tr.postdate<="31-May-2012" && tr.postdate>="01-May-2012" //u will have to change this to date format first
        Select new {PostDate=tr.postdate, TransClientKey=tr.clientkey,TransType=tr.type,ClientNo=cl.clientno,CliNoStmt=cl.nomst ?? 0,AgeNoStmt=ag.nomst ??0,Pmtchecks=pm } //Anonymous type from this you can extract the values and fill to your custom type
       ).OrderBy(o=>o.Pmtchecks.checkdate).OrderBy(o=>o.Pmtchecks.checkno).ToList(); 
```

希望这会有所帮助。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-11T17:45:26.623

[LINQ 查询示例](http://msdn.microsoft.com/en-us/vstudio/bb688084.aspx)

**已编辑**

```
var pmtchecks = from p in urcontext.pmtchecks
                      join t in urcontext.transactions on p.transkey equals t.transkey
                      join a in urcontext.aging on t.clientkey equals a.clientkey into details
                      from d in details.Where( a => ( a.debtorkey == p.debtorkey)).DefaultIfEmpty()
                      where (p.debtorkey == 36927 && t.status == 0 && t.postdate <= '31-May-2012' 
                      && (t.postdate >= '01-May-2012' || c.clientno == 'UNKNOWN' ))
                      orderby p.checkdate, p.checkno 
                      select new
                      {
                           t.postdate,
                           t.clientkey,   
                           // TransClientKey = t.clientkey, //only works if TransClientKey is property 
                           t.type ,       
                           //TransTypet = t.type ,//property 
                           c.clientno,
                           c.nostmt,
                           //CliNoStmt =  c.nostmt ?? 0,//property 
                           a.nostmt//, 
                           //AgeNoStmt = nostmt ?? 0,//property
                           //p. ... //follow above for p columns
                       }; 
```

# sql-server-2008 - 在 sql 查询中添加计算列

> ID：11437221
> 
> 赞同：0
> 
> 时间：2012-07-11T16:31:38.197
> 
> 标签：sql-server-2008, tsql

我有一个情况，我有两个表，我想要一个计算列。

表格1：`VacationMaster`

```
PrefVacationId     |      Description
-----------------------------------------------
1                  |        abc
2                  |        xyz
3                  |        lmn
4                  |        pqr
5                  |        wqa 
```

表 2：`VacationMapping`

```
PrefVacationId [fk]    |      UseID  |   ID (PK of this table) 
-----------------------------------------------
    1                  |        1    |    1
    4                  |        1    |    2
    5                  |        1    |    3
    1                  |        2    |    4
    2                  |        3    |    5 
```

我需要的是每次所有可用的列表假期都来自每个用户的主表。我将`userid`作为输入提供给我的程序，结果应该如下所示。

作为`userID = 1`输入

```
PrefVacationId     |      Description  |       IsSelected(Computed column)
-------------------------------------------------------------------
1                  |        abc        |        true        
2                  |        xyz        |        false
3                  |        lmn        |        false
4                  |        pqr        |        true
5                  |        wqa        |        true 
```

希望我有一些意义，如何进行此查询。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-11T16:36:54.737

你可以试试这个

```
Select 
   vm.PrefVacationId,
   Description,
   CASE WHEN vMap.PrefVacationId IS NOT NULL THEN 'True'
   ELSE 'False'
   END IsSelected
From VacationMaster vm
Left Outer Join VacationMapping vMap
ON vm.PrefVacationId = vMap.PrefVacationId 
AND vMap.UserID = @UserID 
```

# c# - 如何使用 mvc 4 向我的 api 添加令牌？

> ID：11437227
> 
> 赞同：1
> 
> 时间：2012-07-11T16:32:08.727
> 
> 标签：c#, api, access-token

我如何添加一个安全令牌来访问 api，以便不是每个人都能得到它。我希望我的 url 格式为：`api.example.com/*key*/person?id=5`当我发送此请求时，如果密钥有效，它将返回，如果无效，它将返回无效登录。我正在使用 mvc 4 api 和 C# 来制作这个，一个链接或其他东西会很棒。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-11T16:47:49.007

您最喜欢的关键短语是您需要创建和添加自定义`ActionFilterAttribute`.

在谷歌上快速搜索出现了这篇博客文章，其中谈到了做这个[确切的事情](http://codebetter.com/johnvpetersen/2012/04/02/making-your-asp-net-web-apis-secure/)（以及其他一些过滤器）。

以防万一有一些链接腐烂这里的要点（摘自博客文章）：

1.  提出一些生成/验证 API 令牌的方案

2.  在属性中创建使用步骤 1 中的验证的属性

3.  将属性添加到全局配置

**代码**

```
public class TokenValidationAttribute : ActionFilterAttribute
{
  public override void OnActionExecuting(HttpActionContext actionContext)
  {
   string token;

   try
   {
    token = actionContext.Request.Headers.GetValues("Authorization-Token").First();
   }
   catch (Exception)
   {
    actionContext.Response = new HttpResponseMessage(System.Net.HttpStatusCode.BadRequest)
    {
     Content = new StringContent("Missing Authorization-Token")
    };
    return;
   }

   try
   {
    //This part is where you verify the incoming token
    AuthorizedUserRepository.GetUsers().First(x => x.Name == RSAClass.Decrypt(token));
    base.OnActionExecuting(actionContext);
   }
   catch (Exception)
   {
    actionContext.Response = new HttpResponseMessage(System.Net.HttpStatusCode.Forbidden)
    {
     Content = new StringContent("Unauthorized User")
    };
    return;
   }
    }
  }
} 
```

为了使这些操作过滤器全局化，Global.asax Application_Start() 中的以下代码可以解决问题：

```
var config = GlobalConfiguration.Configuration;
config.Filters.Add(new TokenValidationAttribute()); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-11T16:45:07.790

在我的工作中，我们创建了用户名和密码的哈希值，并将其用作用户令牌。您可以为他们生成一个 GUID，跟踪它的创建时间和它属于谁。

# ios - 按下按钮时更改图像

> ID：11437228
> 
> 赞同：0
> 
> 时间：2012-07-11T16:32:13.370
> 
> 标签：ios, c, xcode, uiimageview, uibutton

在应用程序中，我有六个按钮，当按下这些按钮中的任何一个时，我希望屏幕中央的图像更改为不同的图像，但只是在按下六个按钮中的任何一个时。我真的在为此苦苦挣扎，所有帮助将不胜感激。我正在使用 .xib 文件。再次感谢伙计们，我恼怒地把头发扯掉了。

谢谢！

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-07-11T16:35:00.247

您需要在视图控制器中有一个响应器，该响应器通过界面构建​​器链接到视图控制器上的所有按钮。在 IB 中，要将按钮链接到方法，请确保该方法在您的 viewcontroller.h 文件中并且也在 .m 文件中实现。然后转到 IB 中的连接面板（单击按钮后）并将连接从“内部触摸”（内部触摸是当用户触摸按钮并在按钮边界内释放触摸时）拖动到视图控制器.xib 窗口到文件的所有者图标上。从那里您将看到一个下拉菜单，让您可以选择您在头文件中指定的 IBAction 方法。

在这种情况下采取：

```
- (IBAction) buttonPressed: (id) sender; // header file

- (IBAction) buttonPressed: (id) sender { // .m file
   // when the button is pressed then change the uiimageview
   [imageView image: [UIImage imageWithContentsOfFile: @"image.png"]];
} 
```

# c# - 在同一窗口中更改控件的树视图

> ID：11437230
> 
> 赞同：0
> 
> 时间：2012-07-11T16:32:19.050
> 
> 标签：c#, .net, winforms

我正在重新设计一些 GUI 项目并希望实现如下内容：

![在此处输入图像描述](../Images/07520373ac3081821ae8133cb94e50a2.png)

![在此处输入图像描述](../Images/f0a6d13a76c75c597235958bb295f21f.png)

当您更改左侧 TreeView 中的选项时，右侧的控件会根据所选选项而更改。

我的问题是，实现这一点的最佳方法是什么？我正在考虑将每个控件的可见属性设置为 true / false，以使其各自的 TreeView 选项选择；然而，在 VS GUI 编辑器上设计它会非常痛苦，因为会有数百个控件遍布各处并且相互叠加。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-11T16:39:24.240

用户控制。创建您以红色勾勒的块作为用户控件，并在您选择/更改树视图中的节点时添加/删除。

如果您希望在删除现有控件时使用“缓冲区”效果来避免闪烁，请使用带有两个页面的选项卡控件（不显示选项卡）。从显示 TAB1 开始，然后在树视图中选择节点时将正确的控件添加到 TAB2然后使 TAB2 成为活动页面。然后从 TAB1 中删除任何现有控件。然后在选择下一个节点时反过来。等等等等

# django - Django - 如何在页面之间传递动态模型

> ID：11437231
> 
> 赞同：0
> 
> 时间：2012-07-11T16:32:19.610
> 
> 标签：django, django-models

我制作了一个 django 应用程序，可以即时创建模型和数据库表。据我所知，这是做我需要的唯一可行的方法。问题出现在如何在页面之间传递动态创建的模型。

我可以想出几种方法来做到这一点，但它们听起来都很可怕。我能想到的方法有：

1.  在views.py 中使用全局变量。这似乎是一个可怕的黑客攻击，如果有多个同时用户，可能会导致冲突。
2.  在 URL 中传递一个引用并使用一些 eval hackery 尝试重新找到模型。这可能是愚蠢的，因为模型可能在途中被垃圾收集。
3.  使用占位符应用程序。由于多个用户之间的冲突，这似乎是一个坏主意。
4.  具有在单击链接时发布模型的不可见表单。再次非常hacky。

有没有这样做的好方法，如果没有，这些方法中的一种是否比其他方法更可行？

PS 如果它帮助我的应用程序从预先存在的数据库接收数据（作为 json 字符串），然后将其缓存在本地（即在网络服务器上），动态创建适当的模型和表。然后的想法是呈现这些数据并对其进行各种过滤和向下钻取，而不会对主数据库造成过度压力（因为每个查询都会从数亿数据点的数据库中返回数百个结果。）WRT在 3 中，表是根据查询的哈希值和时间戳命名的，但是占位符应用程序将具有预先确定的名称。

谢谢，

乔伊拉

编辑添加：谢谢大家，我现在已经解决了这个问题。我最终将两个答案一起使用以给出完整的答案。由于我只能接受一种，我将接受一种内容类型，遗憾的是我还没有放弃投票的声誉，但是如果/当我这样做时，我会努力返回并适当地投票。

整体解决方案，

```
from django.contrib.contenttypes.models import ContentType
view_a(request):
    model = create_model(...)
    request.session['model'] =  ContentType.objects.get_for_model(model)
    ...

view_b(request):
    ctmodel = request.session.get('model', None)
    if not ctmodel:
        return Http404
    model = ctmodel.model_class()
    ... 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-11T18:59:55.037

我的第一个想法是使用内容类型并通过 url 传递类型/模型信息。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-11T19:14:09.423

您还可以使用 Django 的[会话框架](https://docs.djangoproject.com/en/1.4/topics/http/sessions/)，*例如*

```
def view_a(request):
    your_model = request.session.get('your_model', None)

    if type(your_model) == YourModel
        your_model.name = 'something_else'

    request.session['your_model'] = your_model

    ... 

def view_b(request):
    your_model = request.session.get('your_model', None)

    ... 
```

您可以[在`session`字典](https://docs.djangoproject.com/en/1.4/topics/http/sessions/#session-object-guidelines)中存储几乎任何内容，并且管理它也很容易：

```
 del request.session['your_model'] 
```

# php - 代码周围错误\'和\"的大错误

> ID：11437235
> 
> 赞同：-2
> 
> 时间：2012-07-11T16:32:36.453
> 
> 标签：php, html, map

我正在创建一个中国的交互式地图，我需要在几个页面中使用它，所以我在 php 中创建了一个包含代码的变量，但是有很多 ' 和 " 会切断代码的周围，我已经有这个问题了使用美国地图而不为每个 ' 添加 \，你能帮我或告诉我我必须做些什么来解决这个问题吗？这是代码：

```
 $zhmap = '<map name="FPMap0" id="FPMap0">
<area href="javascript:void(0);" onmouseover="return overlib('&lt;center&gt;&lt;B&gt;&nbsp;香港特別行政區 (Hong Kong)&nbsp;&lt;/B&gt;&lt;/center&gt;', FGCOLOR, '#FFCCFF');" onmouseout="nd();" shape="poly" coords="557, 561, 560, 561, 563, 560, 565, 560, 565, 567, 560, 568, 556, 568, 554, 566, 555, 562, 556, 562">
<area href="javascript:void(0);" onmouseover="return overlib('&lt;center&gt;&lt;B&gt;&nbsp;海南省&amp;nbsp;&lt;/B&gt;&lt;/center&gt;', FGCOLOR, '#CCFFFF');" onmouseout="nd();" shape="poly" coords="492, 643, 488, 641, 481, 641, 475, 633, 473, 625, 485, 616, 485, 612, 507, 607, 512, 608, 513, 615, 506, 624, 506, 630, 492, 642">
<area href="javascript:void(0);" onmouseover="return overlib('&lt;center&gt;&lt;B&gt;&nbsp;台湾&nbsp;&lt;/B&gt;&lt;/center&gt;', FGCOLOR, '#FFFFFF');" onmouseout="nd();" shape="poly" coords="662, 499, 656, 504, 650, 513, 648, 523, 645, 533, 647, 541, 652, 547, 657, 552, 658, 558, 663, 559, 661, 551, 664, 544, 668, 537, 667, 526, 667, 509, 669, 502, 668, 500, 663, 500">
<area href="javascript:void(0);" onmouseover="return overlib('&lt;center&gt;&lt;B&gt;&nbsp;河南省&amp;nbsp;&lt;/B&gt;&lt;/center&gt;', FGCOLOR, '#FFFFCC');" onmouseout="nd();" shape="poly" coords="526, 334, 526, 345, 517, 353, 509, 354, 485, 366, 495, 384, 508, 399, 525, 399, 532, 401, 558, 411, 565, 402, 563, 394, 550, 389, 554, 383, 555, 376, 558, 368, 565, 371, 571, 367, 555, 358, 544, 351, 556, 336, 548, 334">
<area href="javascript:void(0);" onmouseover="return overlib('&lt;center&gt;&lt;B&gt;&nbsp;Shanxi&nbsp;&lt;/B&gt;&lt;/center&gt;', FGCOLOR, '#FFCCCC');" onmouseout="nd();" shape="poly" coords="484, 370, 483, 369, 487, 353, 483, 345, 483, 337, 483, 329, 485, 325, 485, 316, 482, 311, 486, 303, 489, 288, 497, 283, 501, 275, 504, 272, 508, 273, 511, 269, 516, 270, 522, 266, 523, 262, 531, 282, 520, 300, 528, 314, 523, 330, 526, 336, 525, 348, 509, 354, 484, 371">
<area href="javascript:void(0);" onmouseover="return overlib('&lt;center&gt;&lt;B&gt;&nbsp;Ningxia Hui&nbsp;&lt;/B&gt;&lt;/center&gt;', FGCOLOR, '#FFCCFF');" onmouseout="nd();" shape="poly" coords="406, 324, 421, 313, 421, 304, 429, 293, 432, 292, 435, 299, 430, 310, 438, 311, 443, 316, 441, 328, 435, 327, 431, 341, 437, 346, 432, 353, 429, 359, 423, 354, 417, 351, 417, 343, 414, 334, 408, 328">
<area href="javascript:void(0);" onmouseover="return overlib('&lt;center&gt;&lt;B&gt;&nbsp;Liaoning&nbsp;&lt;/B&gt;&lt;/center&gt;', FGCOLOR, '#FFFFCC');" onmouseout="nd();" shape="poly" coords="585, 223, 583, 228, 587, 241, 582, 249, 590, 254, 596, 261, 608, 247, 616, 244, 624, 250, 615, 266, 620, 270, 616, 280, 639, 256, 648, 255, 665, 236, 664, 230, 656, 216, 647, 201, 633, 198, 629, 208, 621, 212, 595, 233">
<area href="javascript:void(0);" onmouseover="return overlib('&lt;center&gt;&lt;B&gt;&nbsp;山东省&amp;nbsp;&lt;/B&gt;&lt;/center&gt;', FGCOLOR, '#FFCCCC');" onmouseout="nd();" shape="poly" coords="549, 325, 554, 316, 566, 303, 575, 297, 587, 295, 591, 307, 597, 311, 607, 305, 615, 298, 624, 300, 637, 298, 637, 305, 631, 306, 617, 320, 610, 323, 602, 341, 597, 344, 594, 350, 593, 355, 586, 352, 580, 355, 570, 350, 565, 356, 555, 357, 547, 352, 556, 335, 552, 334">
<area href="javascript:void(0);" onmouseover="return overlib('&lt;center&gt;&lt;B&gt;&nbsp;江西省&amp;nbsp;&lt;/B&gt;&lt;/center&gt;', FGCOLOR, '#FFCCCC');" onmouseout="nd();" shape="poly" coords="543, 455, 547, 448, 551, 447, 565, 436, 568, 438, 579, 431, 579, 437, 581, 440, 587, 436, 588, 433, 596, 437, 602, 437, 600, 443, 609, 455, 599, 464, 595, 463, 592, 467, 591, 475, 585, 482, 584, 493, 581, 501, 579, 511, 579, 519, 577, 523, 573, 520, 559, 527, 556, 523, 561, 515, 558, 510, 552, 515, 549, 508, 553, 503, 548, 496, 547, 491, 545, 484, 540, 480, 549, 465, 543, 458">
<area href="javascript:void(0);" onmouseover="return overlib('&lt;center&gt;&lt;B&gt;&nbsp;Sichuan&nbsp;&lt;/B&gt;&lt;/center&gt;', FGCOLOR, '#FFCCFF');" onmouseout="nd();" shape="poly" coords="311, 400, 319, 410, 328, 423, 325, 428, 329, 434, 330, 468, 333, 475, 341, 470, 346, 473, 344, 477, 353, 481, 368, 510, 377, 507, 383, 508, 387, 501, 384, 493, 393, 482, 393, 477, 399, 474, 398, 468, 405, 470, 406, 478, 410, 481, 417, 477, 421, 481, 434, 481, 432, 476, 425, 472, 430, 466, 434, 469, 430, 463, 424, 460, 419, 454, 426, 447, 424, 440, 427, 436, 435, 440, 442, 438, 447, 440, 451, 432, 452, 423, 462, 414, 459, 409, 458, 407, 450, 405, 440, 399, 431, 402, 423, 398, 417, 403, 408, 401, 404, 395, 403, 392, 399, 394, 388, 383, 388, 378, 375, 382, 378, 388, 376, 395, 369, 396, 363, 392, 354, 403, 342, 393, 337, 395, 331, 391, 314, 391, 311, 399">
<area href="javascript:void(0);" onmouseover="return overlib('&lt;center&gt;&lt;B&gt;&nbsp;甘肃&nbsp;&lt;/B&gt;&lt;/center&gt;', FGCOLOR, '#CCFFCC');" onmouseout="nd();" shape="poly" coords="304, 234, 300, 245, 291, 246, 265, 262, 267, 286, 280, 291, 287, 292, 296, 298, 307, 294, 323, 293, 337, 301, 345, 299, 355, 310, 364, 317, 369, 315, 379, 331, 386, 345, 380, 355, 376, 362, 370, 373, 368, 377, 359, 372, 359, 379, 367, 380, 372, 385, 375, 378, 385, 375, 399, 392, 402, 389, 409, 401, 417, 402, 426, 394, 423, 388, 432, 386, 431, 379, 434, 374, 432, 370, 432, 363, 440, 363, 449, 362, 449, 357, 458, 357, 461, 350, 456, 346, 459, 339, 441, 330, 432, 339, 437, 347, 433, 351, 429, 358, 419, 352, 413, 334, 405, 325, 396, 321, 393, 309, 398, 306, 400, 298, 393, 291, 383, 295, 374, 300, 364, 299, 354, 289, 345, 284, 346, 279, 352, 274, 350, 268, 337, 266, 327, 272, 318, 259, 316, 246, 315, 238, 304, 233">
<area href="javascript:void(0);" onmouseover="return overlib('&lt;center&gt;&lt;B&gt;&nbsp;广西壮族自治区&amp;nbsp;&lt;/B&gt;&lt;/center&gt;', FGCOLOR, '#FFFFCC');" onmouseout="nd();" shape="poly" coords="409, 533, 409, 536, 414, 537, 421, 542, 433, 543, 434, 549, 425, 558, 429, 562, 440, 562, 445, 564, 444, 575, 452, 581, 460, 583, 468, 585, 473, 580, 482, 585, 490, 583, 496, 575, 500, 575, 500, 571, 505, 568, 504, 566, 515, 554, 514, 547, 520, 538, 523, 530, 521, 526, 515, 526, 512, 522, 510, 520, 507, 523, 507, 519, 511, 516, 510, 509, 510, 508, 508, 506, 507, 500, 501, 502, 494, 508, 490, 504, 487, 509, 482, 507, 469, 519, 466, 517, 459, 524, 449, 518, 438, 527, 435, 528, 431, 533, 419, 528, 410, 537">
<area href="javascript:void(0);" onmouseover="return overlib('&lt;center&gt;&lt;B&gt;&nbsp;内蒙古自治区 (Өвөр Монгол)&nbsp;&lt;/B&gt;&lt;/center&gt;', FGCOLOR, '#CCFFFF');" onmouseout="nd();" shape="poly" coords="534, 107, 530, 134, 524, 136, 527, 144, 531, 144, 538, 141, 544, 142, 546, 143, 553, 135, 562, 137, 577, 151, 576, 155, 565, 155, 555, 160, 548, 165, 539, 169, 537, 178, 528, 183, 522, 184, 508, 197, 499, 196, 494, 194, 490, 194, 483, 206, 492, 216, 476, 231, 461, 241, 443, 243, 437, 242, 425, 246, 408, 257, 403, 256, 401, 253, 389, 252, 374, 247, 368, 242, 350, 239, 329, 240, 315, 238, 317, 259, 327, 271, 334, 267, 350, 269, 353, 274, 347, 280, 346, 286, 354, 291, 363, 300, 373, 301, 388, 291, 396, 292, 400, 299, 399, 306, 394, 312, 397, 322, 406, 322, 419, 314, 420, 301, 430, 292, 433, 292, 436, 301, 432, 310, 437, 311, 443, 315, 448, 317, 455, 319, 468, 304, 477, 289, 481, 290, 485, 285, 489, 287, 493, 283, 497, 283, 501, 274, 503, 271, 508, 272, 511, 269, 516, 269, 521, 265, 519, 258, 520, 248, 525, 239, 530, 239, 534, 247, 545, 240, 550, 238, 554, 235, 554, 228, 562, 226, 570, 235, 575, 243, 584, 243, 584, 234, 581, 228, 586, 225, 594, 232, 600, 226, 610, 219, 618, 213, 626, 211, 633, 201, 628, 199, 629, 193, 621, 184, 614, 189, 609, 181">
<area href="javascript:void(0);" onmouseover="return overlib('&lt;center&gt;&lt;B&gt;&nbsp;内蒙古自治区 (Өвөр Монгол)&nbsp;&lt;/B&gt;&lt;/center&gt;', FGCOLOR, '#CCFFFF');" onmouseout="nd();" shape="poly" coords="607, 174, 609, 171, 600, 163, 601, 159, 607, 159, 612, 161, 612, 153, 613, 148, 618, 144, 612, 144, 604, 138, 605, 130, 619, 112, 623, 117, 625, 101, 627, 95, 625, 84, 629, 74, 631, 67, 619, 58, 612, 65, 603, 68, 596, 67, 592, 59, 592, 52, 585, 51, 582, 54, 575, 51, 579, 42, 575, 38, 566, 42, 561, 50, 565, 52, 571, 57, 568, 65, 563, 78, 558, 93, 561, 97, 549, 109, 540, 108, 532, 104, 532, 110, 531, 116">
<area href="javascript:void(0);" onmouseover="return overlib('&lt;center&gt;&lt;B&gt;&nbsp;福建省&amp;nbsp;&lt;/B&gt;&lt;/center&gt;', FGCOLOR, '#FFFFCC');" onmouseout="nd();" shape="poly" coords="600, 538, 597, 526, 591, 520, 589, 522, 586, 518, 580, 518, 581, 503, 584, 499, 586, 491, 585, 484, 592, 478, 592, 469, 596, 465, 599, 466, 609, 456, 612, 458, 615, 462, 618, 469, 622, 469, 627, 465, 631, 470, 635, 468, 640, 469, 637, 475, 634, 481, 629, 480, 632, 484, 632, 490, 632, 491, 633, 501, 628, 502, 626, 508, 622, 510, 620, 516, 612, 519, 614, 526, 601, 538">
<area href="javascript:void(0);" onmouseover="return overlib('&lt;center&gt;&lt;B&gt;&nbsp;安徽省&amp;nbsp;&lt;/B&gt;&lt;/center&gt;', FGCOLOR, '#CCCCFF');" onmouseout="nd();" shape="poly" coords="573, 436, 566, 422, 568, 418, 558, 413, 565, 404, 563, 394, 560, 396, 551, 390, 555, 383, 558, 371, 564, 374, 570, 370, 569, 363, 561, 359, 567, 358, 577, 365, 581, 365, 586, 370, 592, 370, 589, 376, 595, 384, 598, 384, 603, 381, 606, 383, 604, 386, 600, 387, 600, 393, 598, 396, 605, 403, 605, 407, 617, 409, 618, 414, 613, 419, 617, 420, 609, 422, 609, 430, 603, 438, 595, 438, 589, 434, 584, 435, 580, 431, 574, 437">
<area href="javascript:void(0);" onmouseover="return overlib('&lt;center&gt;&lt;B&gt;&nbsp;上海&nbsp;&lt;/B&gt;&lt;/center&gt;', FGCOLOR, '#FFCCFF');" onmouseout="nd();" shape="poly" coords="648, 397, 642, 397, 637, 407, 643, 411, 649, 409, 654, 404, 651, 400, 644, 399">
<area href="javascript:void(0);" onmouseover="return overlib('&lt;center&gt;&lt;B&gt;&nbsp;Yunnan&nbsp;&lt;/B&gt;&lt;/center&gt;', FGCOLOR, '#CCFFCC');" onmouseout="nd();" shape="poly" coords="357, 582, 350, 590, 342, 589, 339, 578, 328, 577, 332, 561, 324, 560, 320, 548, 324, 544, 319, 542, 311, 542, 307, 545, 305, 544, 306, 538, 303, 535, 323, 506, 322, 492, 322, 488, 315, 481, 316, 475, 322, 474, 322, 463, 328, 458, 330, 472, 332, 477, 342, 470, 344, 474, 342, 480, 351, 481, 367, 510, 378, 508, 384, 509, 388, 503, 385, 493, 393, 483, 393, 478, 396, 476, 400, 474, 399, 471, 404, 471, 407, 479, 410, 482, 417, 479, 419, 485, 418, 488, 408, 490, 404, 488, 400, 489, 397, 492, 397, 498, 398, 503, 401, 504, 404, 502, 408, 502, 410, 506, 405, 516, 413, 525, 409, 538, 416, 541, 422, 545, 433, 547, 433, 553, 424, 559, 419, 559, 413, 565, 407, 570, 403, 566, 401, 572, 397, 568, 395, 570, 392, 568, 388, 574, 380, 568, 373, 574, 364, 576, 367, 585, 368, 592, 364, 596, 357, 587">
<area href="javascript:void(0);" onmouseover="return overlib('&lt;center&gt;&lt;B&gt;&nbsp;广东省&amp;nbsp;&lt;/B&gt;&lt;/center&gt;', FGCOLOR, '#CCCCFF');" onmouseout="nd();" shape="poly" coords="541, 574, 540, 570, 541, 561, 546, 568, 552, 559, 557, 558, 550, 563, 557, 559, 566, 555, 546, 565, 550, 563, 563, 557, 569, 555, 574, 554, 579, 556, 580, 552, 583, 556, 589, 550, 593, 551, 593, 547, 600, 539, 598, 529, 592, 523, 588, 524, 586, 521, 579, 520, 577, 524, 573, 522, 558, 530, 556, 525, 560, 516, 558, 513, 552, 517, 549, 513, 546, 516, 544, 517, 539, 514, 535, 518, 535, 523, 530, 520, 525, 521, 521, 528, 522, 530, 522, 535, 514, 550, 515, 558, 505, 569, 500, 575, 495, 580, 493, 588, 491, 592, 492, 601, 496, 607, 502, 603, 502, 600, 500, 594, 503, 591, 510, 583, 515, 582, 519, 582, 523, 578, 532, 576, 538, 575">
<area href="javascript:void(0);" onmouseover="return overlib('&lt;center&gt;&lt;B&gt;&nbsp;Xinjiang Uyghur&nbsp;&lt;/B&gt;&lt;/center&gt;', FGCOLOR, '#FFCCCC');" onmouseout="nd();" shape="poly" coords="305, 236, 299, 227, 291, 209, 270, 196, 251, 193, 239, 186, 240, 181, 244, 176, 244, 161, 240, 151, 240, 146, 230, 139, 226, 141, 221, 136, 219, 131, 216, 129, 215, 122, 216, 119, 205, 118, 199, 126, 190, 128, 187, 134, 187, 146, 181, 149, 177, 153, 157, 142, 144, 166, 145, 170, 143, 176, 135, 171, 125, 173, 113, 173, 119, 176, 117, 196, 117, 203, 107, 209, 106, 219, 97, 221, 87, 224, 78, 229, 71, 230, 63, 227, 51, 237, 46, 233, 43, 229, 41, 231, 37, 228, 32, 232, 23, 232, 22, 240, 15, 244, 15, 248, 16, 254, 21, 256, 27, 262">
<area href="javascript:void(0);" onmouseover="return overlib('&lt;center&gt;&lt;B&gt;&nbsp;Xinjiang Uyghur&nbsp;&lt;/B&gt;&lt;/center&gt;', FGCOLOR, '#FFCCCC');" onmouseout="nd();" shape="poly" coords="25, 266, 25, 275, 26, 279, 24, 281, 16, 281, 15, 283, 24, 286, 31, 295, 31, 301, 29, 304, 44, 318, 51, 319, 54, 321, 54, 330, 61, 339, 69, 339, 71, 341, 76, 335, 76, 331, 86, 326, 94, 328, 101, 332, 110, 325, 120, 328, 129, 334, 147, 332, 155, 333, 167, 327, 183, 324, 191, 326, 204, 333, 214, 332, 227, 332, 224, 324, 230, 319, 221, 308, 220, 296, 268, 288, 266, 261, 285, 250, 300, 245, 303, 238, 302, 237, 304, 235, 26, 262">
<area href="javascript:void(0);" onmouseover="return overlib('&lt;center&gt;&lt;B&gt;&nbsp;Xizang&nbsp;&lt;/B&gt;&lt;BR&gt;&nbsp;(Tibet)&nbsp;&lt;/center&gt;', FGCOLOR, '#CCFFFF');" onmouseout="nd();" shape="poly" coords="308, 402, 297, 418, 282, 415, 270, 402, 253, 401, 245, 397, 238, 398, 232, 393, 216, 388, 202, 363, 204, 359, 206, 356, 211, 339, 197, 331, 184, 325, 176, 329, 165, 327, 153, 337, 146, 333, 139, 337, 129, 338, 117, 328, 111, 326, 102, 335, 86, 326, 78, 333, 75, 338, 68, 347, 60, 343, 57, 354, 63, 360, 65, 360, 63, 369, 54, 371, 52, 367, 47, 369, 51, 376, 50, 380, 49, 384, 50, 388, 52, 387, 72, 409, 76, 413, 76, 416, 84, 411, 106, 432, 109, 439, 113, 435, 117, 439, 115, 442, 124, 449, 126, 449, 128, 454, 133, 455, 144, 464, 150, 462, 157, 467, 162, 468, 167, 469, 178, 467, 181, 469, 179, 474, 178, 476, 191, 467, 200, 466, 206, 471, 212, 472, 216, 472, 221, 473, 221, 476, 231, 477, 243, 466, 247, 464, 252, 464, 263, 457, 275, 461, 286, 455, 291, 459, 287, 464, 294, 465, 290, 471, 301, 474, 305, 474, 308, 470, 315, 475, 320, 475, 322, 466, 328, 460, 329, 437, 326, 427, 328, 425, 320, 415, 316, 408, 310, 403">
<area href="javascript:void(0);" onmouseover="return overlib('&lt;center&gt;&lt;B&gt;&nbsp;黑龙江省&nbsp;&lt;/B&gt;&lt;/center&gt;', FGCOLOR, '#CCFFCC');" onmouseout="nd();" shape="poly" coords="731, 86, 715, 100, 701, 108, 698, 110, 693, 105, 694, 100, 687, 94, 674, 88, 662, 86, 656, 88, 648, 80, 645, 73, 631, 50, 618, 34, 612, 33, 608, 39, 596, 30, 577, 39, 580, 44, 575, 52, 580, 56, 586, 52, 591, 53, 594, 66, 599, 68, 608, 69, 614, 66, 621, 60, 631, 71, 628, 78, 626, 85, 628, 97, 623, 108, 624, 121, 620, 115, 606, 132, 605, 139, 614, 144, 618, 143, 619, 144, 613, 155, 617, 151, 624, 150, 627, 154, 632, 162, 641, 162, 647, 159, 651, 164, 658, 162, 666, 164, 665, 168, 673, 169, 678, 178, 682, 175, 678, 168, 681, 166, 685, 172, 688, 178, 693, 182, 696, 177, 704, 171, 707, 171, 713, 176, 719, 177, 717, 167, 710, 156, 715, 152, 720, 145, 724, 146, 734, 144, 734, 128, 736, 123, 734, 105, 740, 98, 734, 89">
<area href="javascript:void(0);" onmouseover="return overlib('&lt;center&gt;&lt;B&gt;&nbsp;Jilin&nbsp;&lt;/B&gt;&lt;/center&gt;', FGCOLOR, '#CCCCFF');" onmouseout="nd();" shape="poly" coords="695, 217, 690, 212, 701, 207, 703, 202, 708, 198, 708, 189, 712, 189, 715, 192, 721, 185, 720, 180, 716, 180, 706, 174, 701, 177, 694, 185, 688, 179, 683, 170, 681, 169, 683, 176, 679, 182, 674, 173, 667, 170, 665, 166, 658, 165, 652, 167, 649, 161, 644, 165, 634, 165, 626, 154, 617, 155, 613, 164, 610, 162, 602, 162, 604, 165, 609, 174, 610, 183, 614, 187, 616, 189, 623, 186, 629, 195, 631, 201, 638, 199, 642, 204, 649, 204, 653, 212, 659, 219, 662, 227, 666, 232, 667, 236, 675, 227, 674, 224, 678, 219, 682, 223, 693, 221">
<area href="javascript:void(0);" onmouseover="return overlib('&lt;center&gt;&lt;B&gt;&nbsp;北京&nbsp;&lt;/B&gt;&lt;/center&gt;', FGCOLOR, '#FFCCFF');" onmouseout="nd();" shape="poly" coords="564, 257, 558, 257, 554, 253, 550, 256, 550, 262, 547, 267, 541, 273, 540, 276, 552, 279, 553, 279, 559, 276, 560, 274, 557, 271, 563, 269, 565, 266, 565, 260">
<area href="javascript:void(0);" onmouseover="return overlib('&lt;center&gt;&lt;B&gt;&nbsp;天津&nbsp;&lt;/B&gt;&lt;/center&gt;', FGCOLOR, '#CCCCFF');" onmouseout="nd();" shape="poly" coords="571, 291, 567, 291, 563, 290, 560, 290, 559, 287, 561, 285, 560, 281, 558, 279, 559, 274, 563, 277, 564, 275, 565, 271, 565, 266, 569, 267, 569, 270, 568, 272, 570, 275, 574, 278, 575, 282, 573, 284, 573, 293">
<area href="javascript:void(0);" onmouseover="return overlib('&lt;center&gt;&lt;B&gt;&nbsp;Shaanxi&nbsp;&lt;/B&gt;&lt;/center&gt;', FGCOLOR, '#CCCCFF');" onmouseout="nd();" shape="poly" coords="454, 321, 444, 318, 441, 328, 460, 342, 458, 349, 461, 354, 457, 360, 449, 360, 438, 363, 432, 365, 432, 373, 435, 371, 435, 376, 433, 382, 433, 388, 425, 391, 426, 396, 424, 399, 431, 405, 440, 402, 453, 410, 460, 408, 469, 413, 476, 416, 477, 410, 474, 401, 485, 400, 477, 395, 475, 390, 492, 392, 496, 389, 496, 387, 482, 371, 485, 355, 483, 348, 483, 332, 482, 327, 485, 323, 485, 317, 482, 311, 487, 304, 489, 289, 486, 287, 480, 293, 477, 293, 470, 304">
<area href="javascript:void(0);" onmouseover="return overlib('&lt;center&gt;&lt;B&gt;&nbsp;湖北省&amp;nbsp;&lt;/B&gt;&lt;/center&gt;', FGCOLOR, '#FFCCFF');" onmouseout="nd();" shape="poly" coords="464, 437, 464, 445, 474, 456, 477, 450, 484, 443, 488, 446, 493, 445, 494, 442, 492, 438, 508, 440, 518, 446, 528, 441, 527, 446, 536, 439, 541, 450, 565, 435, 570, 438, 572, 435, 566, 421, 567, 418, 552, 409, 543, 406, 537, 405, 526, 400, 510, 400, 498, 390, 491, 392, 480, 392, 485, 396, 484, 398, 476, 401, 478, 408, 486, 421, 485, 428, 475, 433, 465, 439">
<area href="javascript:void(0);" onmouseover="return overlib('&lt;center&gt;&lt;B&gt;&nbsp;河北省&amp;nbsp;&lt;/B&gt;&lt;/center&gt;', FGCOLOR, '#CCFFCC');" onmouseout="nd();" shape="poly" coords="554, 231, 554, 238, 548, 242, 540, 247, 534, 249, 531, 245, 530, 241, 525, 242, 520, 258, 527, 269, 531, 284, 521, 301, 529, 313, 523, 330, 534, 336, 549, 336, 547, 329, 552, 323, 557, 311, 566, 306, 573, 303, 574, 297, 567, 292, 559, 292, 559, 281, 552, 281, 543, 280, 540, 275, 548, 265, 553, 254, 558, 258, 565, 260, 565, 269, 559, 276, 561, 278, 563, 275, 566, 266, 569, 267, 575, 279, 577, 283, 582, 283, 589, 277, 588, 272, 597, 264, 591, 258, 583, 253, 585, 246, 576, 247, 562, 228, 555, 232">
<area href="javascript:void(0);" onmouseover="return overlib('&lt;center&gt;&lt;B&gt;&nbsp;贵州省&amp;nbsp;&lt;/B&gt;&lt;/center&gt;', FGCOLOR, '#CCCCFF');" onmouseout="nd();" shape="poly" coords="419, 482, 419, 490, 414, 491, 408, 492, 404, 490, 397, 494, 399, 502, 403, 502, 408, 502, 410, 505, 409, 511, 405, 518, 413, 527, 409, 535, 420, 528, 430, 534, 431, 530, 449, 519, 458, 524, 466, 518, 469, 521, 480, 508, 480, 503, 479, 495, 481, 494, 480, 491, 475, 490, 472, 493, 471, 490, 477, 485, 478, 483, 478, 479, 476, 470, 472, 474, 464, 467, 460, 462, 457, 464, 452, 460, 451, 460, 449, 465, 444, 465, 440, 469, 434, 471, 431, 468, 427, 471, 432, 476, 434, 482, 419, 483">
<area href="javascript:void(0);" onmouseover="return overlib('&lt;center&gt;&lt;B&gt;&nbsp;浙江省&amp;nbsp;&lt;/B&gt;&lt;/center&gt;', FGCOLOR, '#CCFFCC');" onmouseout="nd();" shape="poly" coords="637, 407, 635, 407, 632, 410, 625, 410, 622, 407, 618, 407, 619, 416, 614, 424, 610, 424, 610, 431, 601, 441, 601, 444, 609, 455, 614, 457, 617, 466, 618, 469, 623, 468, 627, 464, 631, 469, 636, 467, 639, 468, 643, 468, 644, 464, 643, 458, 646, 456, 654, 445, 654, 441, 661, 436, 661, 434, 658, 431, 658, 428, 659, 423, 661, 421, 661, 418, 658, 416, 652, 415, 647, 414, 640, 420, 635, 421, 635, 419, 641, 413, 639, 411">
<area href="javascript:void(0);" onmouseover="return overlib('&lt;center&gt;&lt;B&gt;&nbsp;重庆&nbsp;&lt;/B&gt;&lt;/center&gt;', FGCOLOR, '#FFFFCC');" onmouseout="nd();" shape="poly" coords="447, 442, 443, 439, 436, 441, 429, 436, 425, 441, 428, 447, 421, 454, 428, 458, 433, 463, 435, 468, 441, 467, 442, 462, 446, 461, 449, 464, 450, 455, 457, 458, 460, 456, 463, 458, 471, 471, 476, 466, 475, 457, 464, 446, 464, 439, 463, 436, 467, 433, 476, 432, 481, 427, 485, 426, 486, 419, 479, 411, 476, 418, 467, 412, 462, 409, 464, 413, 459, 418, 454, 422, 452, 434, 448, 444">
<area href="javascript:void(0);" onmouseover="return overlib('&lt;center&gt;&lt;B&gt;&nbsp;江苏省&amp;nbsp;&lt;/B&gt;&lt;/center&gt;', FGCOLOR, '#CCFFFF');" onmouseout="nd();" shape="poly" coords="619, 405, 628, 408, 637, 406, 638, 401, 645, 392, 638, 390, 646, 390, 638, 381, 630, 380, 628, 371, 616, 354, 608, 350, 605, 348, 602, 343, 594, 354, 583, 355, 571, 353, 569, 357, 585, 365, 591, 369, 592, 378, 598, 384, 606, 378, 607, 383, 600, 393, 604, 398, 608, 406">
<area href="javascript:void(0);" onmouseover="return overlib('&lt;center&gt;&lt;B&gt;&nbsp;湖南省&amp;nbsp;&lt;/B&gt;&lt;/center&gt;', FGCOLOR, '#CCFFFF');" onmouseout="nd();" shape="poly" coords="521, 525, 525, 519, 536, 519, 539, 511, 552, 512, 552, 503, 550, 486, 542, 478, 548, 466, 546, 449, 536, 440, 531, 443, 527, 443, 519, 446, 509, 440, 497, 441, 493, 446, 486, 443, 476, 455, 478, 467, 479, 482, 474, 491, 478, 491, 482, 505, 483, 507, 488, 507, 491, 503, 494, 506, 505, 500, 509, 507, 510, 515, 512, 518, 512, 521">
</map>
<img src="img/china.png" onclick="this.blur();" alt="Map of China" width="754" height="659" border="0" usemap="#FPMap0" class="imgBase" oncontextmenu="this.blur(); return false;">
<script type="text/javascript">
  <!--
  var ol_bgcolor='#666666';
  var ol_textsize=2;
  var ol_wrap = 1;
  var ol_border = 2;
  //-->
</script>
<script type="text/javascript" src="chinamap.js"></script>'; 
```

非常感谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-11T16:39:46.917

在这种情况下， [heredoc](http://www.php.net/manual/en/language.types.string.php#language.types.string.syntax.heredoc)可能是最好的解决方案，因为它避免了转义这么多引号的需要。

```
<?php
$zhmap = <<<ZHMAP
<map name="FPMap0" id="FPMap0">
<area href="javascript:void(0);" onmouseover="return overlib('&lt;center&gt;&lt;B&gt;&nbsp;香港特別行政區 (Hong Kong)&nbsp;&lt;/B&gt;&lt;/center&gt;', FGCOLOR, '#FFCCFF');" onmouseout="nd();" shape="poly" coords="557, 561, 560, 561, 563, 560, 565, 560, 565, 567, 560, 568, 556, 568, 554, 566, 555, 562, 556, 562">
<area href="javascript:void(0);" onmouseover="return overlib('&lt;center&gt;&lt;B&gt;&nbsp;海南省&amp;nbsp;&lt;/B&gt;&lt;/center&gt;', FGCOLOR, '#CCFFFF');" onmouseout="nd();" shape="poly" coords="492, 643, 488, 641, 481, 641, 475, 633, 473, 625, 485, 616, 485, 612, 507, 607, 512, 608, 513, 615, 506, 624, 506, 630, 492, 642">
<area href="javascript:void(0);" onmouseover="return overlib('&lt;center&gt;&lt;B&gt;&nbsp;台湾&nbsp;&lt;/B&gt;&lt;/center&gt;', FGCOLOR, '#FFFFFF');" onmouseout="nd();" shape="poly" coords="662, 499, 656, 504, 650, 513, 648, 523, 645, 533, 647, 541, 652, 547, 657, 552, 658, 558, 663, 559, 661, 551, 664, 544, 668, 537, 667, 526, 667, 509, 669, 502, 668, 500, 663, 500">
<area href="javascript:void(0);" onmouseover="return overlib('&lt;center&gt;&lt;B&gt;&nbsp;河南省&amp;nbsp;&lt;/B&gt;&lt;/center&gt;', FGCOLOR, '#FFFFCC');" onmouseout="nd();" shape="poly" coords="526, 334, 526, 345, 517, 353, 509, 354, 485, 366, 495, 384, 508, 399, 525, 399, 532, 401, 558, 411, 565, 402, 563, 394, 550, 389, 554, 383, 555, 376, 558, 368, 565, 371, 571, 367, 555, 358, 544, 351, 556, 336, 548, 334">
<area href="javascript:void(0);" onmouseover="return overlib('&lt;center&gt;&lt;B&gt;&nbsp;Shanxi&nbsp;&lt;/B&gt;&lt;/center&gt;', FGCOLOR, '#FFCCCC');" onmouseout="nd();" shape="poly" coords="484, 370, 483, 369, 487, 353, 483, 345, 483, 337, 483, 329, 485, 325, 485, 316, 482, 311, 486, 303, 489, 288, 497, 283, 501, 275, 504, 272, 508, 273, 511, 269, 516, 270, 522, 266, 523, 262, 531, 282, 520, 300, 528, 314, 523, 330, 526, 336, 525, 348, 509, 354, 484, 371">
<area href="javascript:void(0);" onmouseover="return overlib('&lt;center&gt;&lt;B&gt;&nbsp;Ningxia Hui&nbsp;&lt;/B&gt;&lt;/center&gt;', FGCOLOR, '#FFCCFF');" onmouseout="nd();" shape="poly" coords="406, 324, 421, 313, 421, 304, 429, 293, 432, 292, 435, 299, 430, 310, 438, 311, 443, 316, 441, 328, 435, 327, 431, 341, 437, 346, 432, 353, 429, 359, 423, 354, 417, 351, 417, 343, 414, 334, 408, 328">
<area href="javascript:void(0);" onmouseover="return overlib('&lt;center&gt;&lt;B&gt;&nbsp;Liaoning&nbsp;&lt;/B&gt;&lt;/center&gt;', FGCOLOR, '#FFFFCC');" onmouseout="nd();" shape="poly" coords="585, 223, 583, 228, 587, 241, 582, 249, 590, 254, 596, 261, 608, 247, 616, 244, 624, 250, 615, 266, 620, 270, 616, 280, 639, 256, 648, 255, 665, 236, 664, 230, 656, 216, 647, 201, 633, 198, 629, 208, 621, 212, 595, 233">
<area href="javascript:void(0);" onmouseover="return overlib('&lt;center&gt;&lt;B&gt;&nbsp;山东省&amp;nbsp;&lt;/B&gt;&lt;/center&gt;', FGCOLOR, '#FFCCCC');" onmouseout="nd();" shape="poly" coords="549, 325, 554, 316, 566, 303, 575, 297, 587, 295, 591, 307, 597, 311, 607, 305, 615, 298, 624, 300, 637, 298, 637, 305, 631, 306, 617, 320, 610, 323, 602, 341, 597, 344, 594, 350, 593, 355, 586, 352, 580, 355, 570, 350, 565, 356, 555, 357, 547, 352, 556, 335, 552, 334">
<area href="javascript:void(0);" onmouseover="return overlib('&lt;center&gt;&lt;B&gt;&nbsp;江西省&amp;nbsp;&lt;/B&gt;&lt;/center&gt;', FGCOLOR, '#FFCCCC');" onmouseout="nd();" shape="poly" coords="543, 455, 547, 448, 551, 447, 565, 436, 568, 438, 579, 431, 579, 437, 581, 440, 587, 436, 588, 433, 596, 437, 602, 437, 600, 443, 609, 455, 599, 464, 595, 463, 592, 467, 591, 475, 585, 482, 584, 493, 581, 501, 579, 511, 579, 519, 577, 523, 573, 520, 559, 527, 556, 523, 561, 515, 558, 510, 552, 515, 549, 508, 553, 503, 548, 496, 547, 491, 545, 484, 540, 480, 549, 465, 543, 458">
<area href="javascript:void(0);" onmouseover="return overlib('&lt;center&gt;&lt;B&gt;&nbsp;Sichuan&nbsp;&lt;/B&gt;&lt;/center&gt;', FGCOLOR, '#FFCCFF');" onmouseout="nd();" shape="poly" coords="311, 400, 319, 410, 328, 423, 325, 428, 329, 434, 330, 468, 333, 475, 341, 470, 346, 473, 344, 477, 353, 481, 368, 510, 377, 507, 383, 508, 387, 501, 384, 493, 393, 482, 393, 477, 399, 474, 398, 468, 405, 470, 406, 478, 410, 481, 417, 477, 421, 481, 434, 481, 432, 476, 425, 472, 430, 466, 434, 469, 430, 463, 424, 460, 419, 454, 426, 447, 424, 440, 427, 436, 435, 440, 442, 438, 447, 440, 451, 432, 452, 423, 462, 414, 459, 409, 458, 407, 450, 405, 440, 399, 431, 402, 423, 398, 417, 403, 408, 401, 404, 395, 403, 392, 399, 394, 388, 383, 388, 378, 375, 382, 378, 388, 376, 395, 369, 396, 363, 392, 354, 403, 342, 393, 337, 395, 331, 391, 314, 391, 311, 399">
<area href="javascript:void(0);" onmouseover="return overlib('&lt;center&gt;&lt;B&gt;&nbsp;甘肃&nbsp;&lt;/B&gt;&lt;/center&gt;', FGCOLOR, '#CCFFCC');" onmouseout="nd();" shape="poly" coords="304, 234, 300, 245, 291, 246, 265, 262, 267, 286, 280, 291, 287, 292, 296, 298, 307, 294, 323, 293, 337, 301, 345, 299, 355, 310, 364, 317, 369, 315, 379, 331, 386, 345, 380, 355, 376, 362, 370, 373, 368, 377, 359, 372, 359, 379, 367, 380, 372, 385, 375, 378, 385, 375, 399, 392, 402, 389, 409, 401, 417, 402, 426, 394, 423, 388, 432, 386, 431, 379, 434, 374, 432, 370, 432, 363, 440, 363, 449, 362, 449, 357, 458, 357, 461, 350, 456, 346, 459, 339, 441, 330, 432, 339, 437, 347, 433, 351, 429, 358, 419, 352, 413, 334, 405, 325, 396, 321, 393, 309, 398, 306, 400, 298, 393, 291, 383, 295, 374, 300, 364, 299, 354, 289, 345, 284, 346, 279, 352, 274, 350, 268, 337, 266, 327, 272, 318, 259, 316, 246, 315, 238, 304, 233">
<area href="javascript:void(0);" onmouseover="return overlib('&lt;center&gt;&lt;B&gt;&nbsp;广西壮族自治区&amp;nbsp;&lt;/B&gt;&lt;/center&gt;', FGCOLOR, '#FFFFCC');" onmouseout="nd();" shape="poly" coords="409, 533, 409, 536, 414, 537, 421, 542, 433, 543, 434, 549, 425, 558, 429, 562, 440, 562, 445, 564, 444, 575, 452, 581, 460, 583, 468, 585, 473, 580, 482, 585, 490, 583, 496, 575, 500, 575, 500, 571, 505, 568, 504, 566, 515, 554, 514, 547, 520, 538, 523, 530, 521, 526, 515, 526, 512, 522, 510, 520, 507, 523, 507, 519, 511, 516, 510, 509, 510, 508, 508, 506, 507, 500, 501, 502, 494, 508, 490, 504, 487, 509, 482, 507, 469, 519, 466, 517, 459, 524, 449, 518, 438, 527, 435, 528, 431, 533, 419, 528, 410, 537">
<area href="javascript:void(0);" onmouseover="return overlib('&lt;center&gt;&lt;B&gt;&nbsp;内蒙古自治区 (Өвөр Монгол)&nbsp;&lt;/B&gt;&lt;/center&gt;', FGCOLOR, '#CCFFFF');" onmouseout="nd();" shape="poly" coords="534, 107, 530, 134, 524, 136, 527, 144, 531, 144, 538, 141, 544, 142, 546, 143, 553, 135, 562, 137, 577, 151, 576, 155, 565, 155, 555, 160, 548, 165, 539, 169, 537, 178, 528, 183, 522, 184, 508, 197, 499, 196, 494, 194, 490, 194, 483, 206, 492, 216, 476, 231, 461, 241, 443, 243, 437, 242, 425, 246, 408, 257, 403, 256, 401, 253, 389, 252, 374, 247, 368, 242, 350, 239, 329, 240, 315, 238, 317, 259, 327, 271, 334, 267, 350, 269, 353, 274, 347, 280, 346, 286, 354, 291, 363, 300, 373, 301, 388, 291, 396, 292, 400, 299, 399, 306, 394, 312, 397, 322, 406, 322, 419, 314, 420, 301, 430, 292, 433, 292, 436, 301, 432, 310, 437, 311, 443, 315, 448, 317, 455, 319, 468, 304, 477, 289, 481, 290, 485, 285, 489, 287, 493, 283, 497, 283, 501, 274, 503, 271, 508, 272, 511, 269, 516, 269, 521, 265, 519, 258, 520, 248, 525, 239, 530, 239, 534, 247, 545, 240, 550, 238, 554, 235, 554, 228, 562, 226, 570, 235, 575, 243, 584, 243, 584, 234, 581, 228, 586, 225, 594, 232, 600, 226, 610, 219, 618, 213, 626, 211, 633, 201, 628, 199, 629, 193, 621, 184, 614, 189, 609, 181">
<area href="javascript:void(0);" onmouseover="return overlib('&lt;center&gt;&lt;B&gt;&nbsp;内蒙古自治区 (Өвөр Монгол)&nbsp;&lt;/B&gt;&lt;/center&gt;', FGCOLOR, '#CCFFFF');" onmouseout="nd();" shape="poly" coords="607, 174, 609, 171, 600, 163, 601, 159, 607, 159, 612, 161, 612, 153, 613, 148, 618, 144, 612, 144, 604, 138, 605, 130, 619, 112, 623, 117, 625, 101, 627, 95, 625, 84, 629, 74, 631, 67, 619, 58, 612, 65, 603, 68, 596, 67, 592, 59, 592, 52, 585, 51, 582, 54, 575, 51, 579, 42, 575, 38, 566, 42, 561, 50, 565, 52, 571, 57, 568, 65, 563, 78, 558, 93, 561, 97, 549, 109, 540, 108, 532, 104, 532, 110, 531, 116">
<area href="javascript:void(0);" onmouseover="return overlib('&lt;center&gt;&lt;B&gt;&nbsp;福建省&amp;nbsp;&lt;/B&gt;&lt;/center&gt;', FGCOLOR, '#FFFFCC');" onmouseout="nd();" shape="poly" coords="600, 538, 597, 526, 591, 520, 589, 522, 586, 518, 580, 518, 581, 503, 584, 499, 586, 491, 585, 484, 592, 478, 592, 469, 596, 465, 599, 466, 609, 456, 612, 458, 615, 462, 618, 469, 622, 469, 627, 465, 631, 470, 635, 468, 640, 469, 637, 475, 634, 481, 629, 480, 632, 484, 632, 490, 632, 491, 633, 501, 628, 502, 626, 508, 622, 510, 620, 516, 612, 519, 614, 526, 601, 538">
<area href="javascript:void(0);" onmouseover="return overlib('&lt;center&gt;&lt;B&gt;&nbsp;安徽省&amp;nbsp;&lt;/B&gt;&lt;/center&gt;', FGCOLOR, '#CCCCFF');" onmouseout="nd();" shape="poly" coords="573, 436, 566, 422, 568, 418, 558, 413, 565, 404, 563, 394, 560, 396, 551, 390, 555, 383, 558, 371, 564, 374, 570, 370, 569, 363, 561, 359, 567, 358, 577, 365, 581, 365, 586, 370, 592, 370, 589, 376, 595, 384, 598, 384, 603, 381, 606, 383, 604, 386, 600, 387, 600, 393, 598, 396, 605, 403, 605, 407, 617, 409, 618, 414, 613, 419, 617, 420, 609, 422, 609, 430, 603, 438, 595, 438, 589, 434, 584, 435, 580, 431, 574, 437">
<area href="javascript:void(0);" onmouseover="return overlib('&lt;center&gt;&lt;B&gt;&nbsp;上海&nbsp;&lt;/B&gt;&lt;/center&gt;', FGCOLOR, '#FFCCFF');" onmouseout="nd();" shape="poly" coords="648, 397, 642, 397, 637, 407, 643, 411, 649, 409, 654, 404, 651, 400, 644, 399">
<area href="javascript:void(0);" onmouseover="return overlib('&lt;center&gt;&lt;B&gt;&nbsp;Yunnan&nbsp;&lt;/B&gt;&lt;/center&gt;', FGCOLOR, '#CCFFCC');" onmouseout="nd();" shape="poly" coords="357, 582, 350, 590, 342, 589, 339, 578, 328, 577, 332, 561, 324, 560, 320, 548, 324, 544, 319, 542, 311, 542, 307, 545, 305, 544, 306, 538, 303, 535, 323, 506, 322, 492, 322, 488, 315, 481, 316, 475, 322, 474, 322, 463, 328, 458, 330, 472, 332, 477, 342, 470, 344, 474, 342, 480, 351, 481, 367, 510, 378, 508, 384, 509, 388, 503, 385, 493, 393, 483, 393, 478, 396, 476, 400, 474, 399, 471, 404, 471, 407, 479, 410, 482, 417, 479, 419, 485, 418, 488, 408, 490, 404, 488, 400, 489, 397, 492, 397, 498, 398, 503, 401, 504, 404, 502, 408, 502, 410, 506, 405, 516, 413, 525, 409, 538, 416, 541, 422, 545, 433, 547, 433, 553, 424, 559, 419, 559, 413, 565, 407, 570, 403, 566, 401, 572, 397, 568, 395, 570, 392, 568, 388, 574, 380, 568, 373, 574, 364, 576, 367, 585, 368, 592, 364, 596, 357, 587">
<area href="javascript:void(0);" onmouseover="return overlib('&lt;center&gt;&lt;B&gt;&nbsp;广东省&amp;nbsp;&lt;/B&gt;&lt;/center&gt;', FGCOLOR, '#CCCCFF');" onmouseout="nd();" shape="poly" coords="541, 574, 540, 570, 541, 561, 546, 568, 552, 559, 557, 558, 550, 563, 557, 559, 566, 555, 546, 565, 550, 563, 563, 557, 569, 555, 574, 554, 579, 556, 580, 552, 583, 556, 589, 550, 593, 551, 593, 547, 600, 539, 598, 529, 592, 523, 588, 524, 586, 521, 579, 520, 577, 524, 573, 522, 558, 530, 556, 525, 560, 516, 558, 513, 552, 517, 549, 513, 546, 516, 544, 517, 539, 514, 535, 518, 535, 523, 530, 520, 525, 521, 521, 528, 522, 530, 522, 535, 514, 550, 515, 558, 505, 569, 500, 575, 495, 580, 493, 588, 491, 592, 492, 601, 496, 607, 502, 603, 502, 600, 500, 594, 503, 591, 510, 583, 515, 582, 519, 582, 523, 578, 532, 576, 538, 575">
<area href="javascript:void(0);" onmouseover="return overlib('&lt;center&gt;&lt;B&gt;&nbsp;Xinjiang Uyghur&nbsp;&lt;/B&gt;&lt;/center&gt;', FGCOLOR, '#FFCCCC');" onmouseout="nd();" shape="poly" coords="305, 236, 299, 227, 291, 209, 270, 196, 251, 193, 239, 186, 240, 181, 244, 176, 244, 161, 240, 151, 240, 146, 230, 139, 226, 141, 221, 136, 219, 131, 216, 129, 215, 122, 216, 119, 205, 118, 199, 126, 190, 128, 187, 134, 187, 146, 181, 149, 177, 153, 157, 142, 144, 166, 145, 170, 143, 176, 135, 171, 125, 173, 113, 173, 119, 176, 117, 196, 117, 203, 107, 209, 106, 219, 97, 221, 87, 224, 78, 229, 71, 230, 63, 227, 51, 237, 46, 233, 43, 229, 41, 231, 37, 228, 32, 232, 23, 232, 22, 240, 15, 244, 15, 248, 16, 254, 21, 256, 27, 262">
<area href="javascript:void(0);" onmouseover="return overlib('&lt;center&gt;&lt;B&gt;&nbsp;Xinjiang Uyghur&nbsp;&lt;/B&gt;&lt;/center&gt;', FGCOLOR, '#FFCCCC');" onmouseout="nd();" shape="poly" coords="25, 266, 25, 275, 26, 279, 24, 281, 16, 281, 15, 283, 24, 286, 31, 295, 31, 301, 29, 304, 44, 318, 51, 319, 54, 321, 54, 330, 61, 339, 69, 339, 71, 341, 76, 335, 76, 331, 86, 326, 94, 328, 101, 332, 110, 325, 120, 328, 129, 334, 147, 332, 155, 333, 167, 327, 183, 324, 191, 326, 204, 333, 214, 332, 227, 332, 224, 324, 230, 319, 221, 308, 220, 296, 268, 288, 266, 261, 285, 250, 300, 245, 303, 238, 302, 237, 304, 235, 26, 262">
<area href="javascript:void(0);" onmouseover="return overlib('&lt;center&gt;&lt;B&gt;&nbsp;Xizang&nbsp;&lt;/B&gt;&lt;BR&gt;&nbsp;(Tibet)&nbsp;&lt;/center&gt;', FGCOLOR, '#CCFFFF');" onmouseout="nd();" shape="poly" coords="308, 402, 297, 418, 282, 415, 270, 402, 253, 401, 245, 397, 238, 398, 232, 393, 216, 388, 202, 363, 204, 359, 206, 356, 211, 339, 197, 331, 184, 325, 176, 329, 165, 327, 153, 337, 146, 333, 139, 337, 129, 338, 117, 328, 111, 326, 102, 335, 86, 326, 78, 333, 75, 338, 68, 347, 60, 343, 57, 354, 63, 360, 65, 360, 63, 369, 54, 371, 52, 367, 47, 369, 51, 376, 50, 380, 49, 384, 50, 388, 52, 387, 72, 409, 76, 413, 76, 416, 84, 411, 106, 432, 109, 439, 113, 435, 117, 439, 115, 442, 124, 449, 126, 449, 128, 454, 133, 455, 144, 464, 150, 462, 157, 467, 162, 468, 167, 469, 178, 467, 181, 469, 179, 474, 178, 476, 191, 467, 200, 466, 206, 471, 212, 472, 216, 472, 221, 473, 221, 476, 231, 477, 243, 466, 247, 464, 252, 464, 263, 457, 275, 461, 286, 455, 291, 459, 287, 464, 294, 465, 290, 471, 301, 474, 305, 474, 308, 470, 315, 475, 320, 475, 322, 466, 328, 460, 329, 437, 326, 427, 328, 425, 320, 415, 316, 408, 310, 403">
<area href="javascript:void(0);" onmouseover="return overlib('&lt;center&gt;&lt;B&gt;&nbsp;黑龙江省&nbsp;&lt;/B&gt;&lt;/center&gt;', FGCOLOR, '#CCFFCC');" onmouseout="nd();" shape="poly" coords="731, 86, 715, 100, 701, 108, 698, 110, 693, 105, 694, 100, 687, 94, 674, 88, 662, 86, 656, 88, 648, 80, 645, 73, 631, 50, 618, 34, 612, 33, 608, 39, 596, 30, 577, 39, 580, 44, 575, 52, 580, 56, 586, 52, 591, 53, 594, 66, 599, 68, 608, 69, 614, 66, 621, 60, 631, 71, 628, 78, 626, 85, 628, 97, 623, 108, 624, 121, 620, 115, 606, 132, 605, 139, 614, 144, 618, 143, 619, 144, 613, 155, 617, 151, 624, 150, 627, 154, 632, 162, 641, 162, 647, 159, 651, 164, 658, 162, 666, 164, 665, 168, 673, 169, 678, 178, 682, 175, 678, 168, 681, 166, 685, 172, 688, 178, 693, 182, 696, 177, 704, 171, 707, 171, 713, 176, 719, 177, 717, 167, 710, 156, 715, 152, 720, 145, 724, 146, 734, 144, 734, 128, 736, 123, 734, 105, 740, 98, 734, 89">
<area href="javascript:void(0);" onmouseover="return overlib('&lt;center&gt;&lt;B&gt;&nbsp;Jilin&nbsp;&lt;/B&gt;&lt;/center&gt;', FGCOLOR, '#CCCCFF');" onmouseout="nd();" shape="poly" coords="695, 217, 690, 212, 701, 207, 703, 202, 708, 198, 708, 189, 712, 189, 715, 192, 721, 185, 720, 180, 716, 180, 706, 174, 701, 177, 694, 185, 688, 179, 683, 170, 681, 169, 683, 176, 679, 182, 674, 173, 667, 170, 665, 166, 658, 165, 652, 167, 649, 161, 644, 165, 634, 165, 626, 154, 617, 155, 613, 164, 610, 162, 602, 162, 604, 165, 609, 174, 610, 183, 614, 187, 616, 189, 623, 186, 629, 195, 631, 201, 638, 199, 642, 204, 649, 204, 653, 212, 659, 219, 662, 227, 666, 232, 667, 236, 675, 227, 674, 224, 678, 219, 682, 223, 693, 221">
<area href="javascript:void(0);" onmouseover="return overlib('&lt;center&gt;&lt;B&gt;&nbsp;北京&nbsp;&lt;/B&gt;&lt;/center&gt;', FGCOLOR, '#FFCCFF');" onmouseout="nd();" shape="poly" coords="564, 257, 558, 257, 554, 253, 550, 256, 550, 262, 547, 267, 541, 273, 540, 276, 552, 279, 553, 279, 559, 276, 560, 274, 557, 271, 563, 269, 565, 266, 565, 260">
<area href="javascript:void(0);" onmouseover="return overlib('&lt;center&gt;&lt;B&gt;&nbsp;天津&nbsp;&lt;/B&gt;&lt;/center&gt;', FGCOLOR, '#CCCCFF');" onmouseout="nd();" shape="poly" coords="571, 291, 567, 291, 563, 290, 560, 290, 559, 287, 561, 285, 560, 281, 558, 279, 559, 274, 563, 277, 564, 275, 565, 271, 565, 266, 569, 267, 569, 270, 568, 272, 570, 275, 574, 278, 575, 282, 573, 284, 573, 293">
<area href="javascript:void(0);" onmouseover="return overlib('&lt;center&gt;&lt;B&gt;&nbsp;Shaanxi&nbsp;&lt;/B&gt;&lt;/center&gt;', FGCOLOR, '#CCCCFF');" onmouseout="nd();" shape="poly" coords="454, 321, 444, 318, 441, 328, 460, 342, 458, 349, 461, 354, 457, 360, 449, 360, 438, 363, 432, 365, 432, 373, 435, 371, 435, 376, 433, 382, 433, 388, 425, 391, 426, 396, 424, 399, 431, 405, 440, 402, 453, 410, 460, 408, 469, 413, 476, 416, 477, 410, 474, 401, 485, 400, 477, 395, 475, 390, 492, 392, 496, 389, 496, 387, 482, 371, 485, 355, 483, 348, 483, 332, 482, 327, 485, 323, 485, 317, 482, 311, 487, 304, 489, 289, 486, 287, 480, 293, 477, 293, 470, 304">
<area href="javascript:void(0);" onmouseover="return overlib('&lt;center&gt;&lt;B&gt;&nbsp;湖北省&amp;nbsp;&lt;/B&gt;&lt;/center&gt;', FGCOLOR, '#FFCCFF');" onmouseout="nd();" shape="poly" coords="464, 437, 464, 445, 474, 456, 477, 450, 484, 443, 488, 446, 493, 445, 494, 442, 492, 438, 508, 440, 518, 446, 528, 441, 527, 446, 536, 439, 541, 450, 565, 435, 570, 438, 572, 435, 566, 421, 567, 418, 552, 409, 543, 406, 537, 405, 526, 400, 510, 400, 498, 390, 491, 392, 480, 392, 485, 396, 484, 398, 476, 401, 478, 408, 486, 421, 485, 428, 475, 433, 465, 439">
<area href="javascript:void(0);" onmouseover="return overlib('&lt;center&gt;&lt;B&gt;&nbsp;河北省&amp;nbsp;&lt;/B&gt;&lt;/center&gt;', FGCOLOR, '#CCFFCC');" onmouseout="nd();" shape="poly" coords="554, 231, 554, 238, 548, 242, 540, 247, 534, 249, 531, 245, 530, 241, 525, 242, 520, 258, 527, 269, 531, 284, 521, 301, 529, 313, 523, 330, 534, 336, 549, 336, 547, 329, 552, 323, 557, 311, 566, 306, 573, 303, 574, 297, 567, 292, 559, 292, 559, 281, 552, 281, 543, 280, 540, 275, 548, 265, 553, 254, 558, 258, 565, 260, 565, 269, 559, 276, 561, 278, 563, 275, 566, 266, 569, 267, 575, 279, 577, 283, 582, 283, 589, 277, 588, 272, 597, 264, 591, 258, 583, 253, 585, 246, 576, 247, 562, 228, 555, 232">
<area href="javascript:void(0);" onmouseover="return overlib('&lt;center&gt;&lt;B&gt;&nbsp;贵州省&amp;nbsp;&lt;/B&gt;&lt;/center&gt;', FGCOLOR, '#CCCCFF');" onmouseout="nd();" shape="poly" coords="419, 482, 419, 490, 414, 491, 408, 492, 404, 490, 397, 494, 399, 502, 403, 502, 408, 502, 410, 505, 409, 511, 405, 518, 413, 527, 409, 535, 420, 528, 430, 534, 431, 530, 449, 519, 458, 524, 466, 518, 469, 521, 480, 508, 480, 503, 479, 495, 481, 494, 480, 491, 475, 490, 472, 493, 471, 490, 477, 485, 478, 483, 478, 479, 476, 470, 472, 474, 464, 467, 460, 462, 457, 464, 452, 460, 451, 460, 449, 465, 444, 465, 440, 469, 434, 471, 431, 468, 427, 471, 432, 476, 434, 482, 419, 483">
<area href="javascript:void(0);" onmouseover="return overlib('&lt;center&gt;&lt;B&gt;&nbsp;浙江省&amp;nbsp;&lt;/B&gt;&lt;/center&gt;', FGCOLOR, '#CCFFCC');" onmouseout="nd();" shape="poly" coords="637, 407, 635, 407, 632, 410, 625, 410, 622, 407, 618, 407, 619, 416, 614, 424, 610, 424, 610, 431, 601, 441, 601, 444, 609, 455, 614, 457, 617, 466, 618, 469, 623, 468, 627, 464, 631, 469, 636, 467, 639, 468, 643, 468, 644, 464, 643, 458, 646, 456, 654, 445, 654, 441, 661, 436, 661, 434, 658, 431, 658, 428, 659, 423, 661, 421, 661, 418, 658, 416, 652, 415, 647, 414, 640, 420, 635, 421, 635, 419, 641, 413, 639, 411">
<area href="javascript:void(0);" onmouseover="return overlib('&lt;center&gt;&lt;B&gt;&nbsp;重庆&nbsp;&lt;/B&gt;&lt;/center&gt;', FGCOLOR, '#FFFFCC');" onmouseout="nd();" shape="poly" coords="447, 442, 443, 439, 436, 441, 429, 436, 425, 441, 428, 447, 421, 454, 428, 458, 433, 463, 435, 468, 441, 467, 442, 462, 446, 461, 449, 464, 450, 455, 457, 458, 460, 456, 463, 458, 471, 471, 476, 466, 475, 457, 464, 446, 464, 439, 463, 436, 467, 433, 476, 432, 481, 427, 485, 426, 486, 419, 479, 411, 476, 418, 467, 412, 462, 409, 464, 413, 459, 418, 454, 422, 452, 434, 448, 444">
<area href="javascript:void(0);" onmouseover="return overlib('&lt;center&gt;&lt;B&gt;&nbsp;江苏省&amp;nbsp;&lt;/B&gt;&lt;/center&gt;', FGCOLOR, '#CCFFFF');" onmouseout="nd();" shape="poly" coords="619, 405, 628, 408, 637, 406, 638, 401, 645, 392, 638, 390, 646, 390, 638, 381, 630, 380, 628, 371, 616, 354, 608, 350, 605, 348, 602, 343, 594, 354, 583, 355, 571, 353, 569, 357, 585, 365, 591, 369, 592, 378, 598, 384, 606, 378, 607, 383, 600, 393, 604, 398, 608, 406">
<area href="javascript:void(0);" onmouseover="return overlib('&lt;center&gt;&lt;B&gt;&nbsp;湖南省&amp;nbsp;&lt;/B&gt;&lt;/center&gt;', FGCOLOR, '#CCFFFF');" onmouseout="nd();" shape="poly" coords="521, 525, 525, 519, 536, 519, 539, 511, 552, 512, 552, 503, 550, 486, 542, 478, 548, 466, 546, 449, 536, 440, 531, 443, 527, 443, 519, 446, 509, 440, 497, 441, 493, 446, 486, 443, 476, 455, 478, 467, 479, 482, 474, 491, 478, 491, 482, 505, 483, 507, 488, 507, 491, 503, 494, 506, 505, 500, 509, 507, 510, 515, 512, 518, 512, 521">
</map>
<img src="img/china.png" onclick="this.blur();" alt="Map of China" width="754" height="659" border="0" usemap="#FPMap0" class="imgBase" oncontextmenu="this.blur(); return false;">
<script type="text/javascript">
  <!--
  var ol_bgcolor='#666666';
  var ol_textsize=2;
  var ol_wrap = 1;
  var ol_border = 2;
  //-->
</script>
<script type="text/javascript" src="chinamap.js"></script>
ZHMAP;
?> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-11T16:35:25.687

只需通过添加反斜杠来转义每个单引号。

例子：

```
onmouseover="return overlib(\'&lt;center&gt;&lt;B&gt;&nbsp;香港特別行政區 (Hong Kong)&nbsp;&lt;/B&gt;&lt;/center&gt;\', FGCOLOR, \'#FFCCFF\');"
                            ^                                                                                    ^             ^        ^ 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-11T16:37:26.847

您所有的内部单引号前面都应该有一个反斜杠：

```
$var = ' "some" \'more text\' '; 
```

# c++ - 使用 gcc 进行纯虚函数调用时的链接器错误

> ID：11437242
> 
> 赞同：5
> 
> 时间：2012-07-11T16:33:12.490
> 
> 标签：c++, linker

我和一个朋友就对象的构造进行了一次非常有趣的讨论，最终得到了这段代码：

```
#include <iostream>

class Parent {
  public:
    Parent( ) {
      this->doSomething( );
    }

    virtual void doSomething( ) = 0;
};

class Child : public Parent {
    int param;

  public:
    Child( ) {
      param = 1000;
    }

    virtual void doSomething( ) {
      std::cout << "doSomething( " << param << " )" << std::endl;
    }
};

int main( void ) {
    Child c;
    return 0;
} 
```

我知道标准没有定义从构造函数或析构函数调用纯虚函数时的行为，这也不是我如何在生产中编写代码的实际示例，它只是检查编译器做什么的测试.

在 Java 打印中测试相同的构造

> 做某事（0）

这是有道理的，因为从父构造函数调用时`param`未初始化。`doSomething()`

我希望在 C++ 中有类似的行为，不同之处在于`param`在调用函数时包含任何内容。

相反，编译上述代码会导致链接器错误，`(c++ (Ubuntu 4.4.3-4ubuntu5.1) 4.4.3)`并指出对的引用`Parent::doSomething( )`未定义。

所以，我的问题是：**为什么这是一个链接器错误？**如果这是一个错误，我希望编译器会抱怨，特别是因为有该函数的实现。任何有关链接器在这种情况下如何工作的见解或对进一步阅读的参考都将受到高度赞赏。

先感谢您！我希望这个问题不是重复的，但我找不到类似的问题..

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-11T16:37:20.133

编译器知道，当您`doSomething`从构造函数内部调用时，该调用必须`doSomething`在此类中引用，即使它是虚拟的。所以它会优化掉虚拟调度，而只是做一个普通的函数调用。由于该函数未在任何地方定义，因此会导致链接时出错。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-07-11T16:51:53.030

> 所以，我的问题是：为什么这是一个链接器错误？如果这是一个错误，我希望编译器会抱怨，特别是因为有该函数的实现。任何有关链接器在这种情况下如何工作的见解或对进一步阅读的参考都将受到高度赞赏。

让我们进一步扩展一下。

> 为什么是链接器错误？

因为编译器从构造函数注入了一个调用`Parent::doSomething()`，但是链接器发现没有定义函数。

> 我希望编译器会抱怨，特别是因为有一个函数的实现。

这是不正确的。该函数有一个可通过虚拟调度访问的*覆盖*`Parent::doSomething()`，但该函数未定义。那里有一个微妙但重要的区别，可以通过禁用动态调度以不同的方式进行测试。您可以通过使用类名限定函数来禁用特定调用的动态调度，例如，`Child::doSomething()`如果您添加`Parent::doSomething()`，这将生成一个调用，`Parent::doSomething()`而不使用动态调度来调用最终覆盖器。

为什么这很重要？

这很重要，因为即使函数是*纯虚拟的*（纯虚拟意味着动态调度永远不会调度到那个特定的重载），它也可以被*定义*和*调用*：

```
struct base {
   virtual void f() = 0;
};
inline void base::f() { std::cout << "base\n"; }
struct derived : base {
   virtual void f() {
      base::f();
      std::cout << "derived\n";
   }
};
int main() {
   derived d;
   d.f();        // outputs: base derived
} 
```

现在，C++ 有一个单独的编译模型，这意味着函数不需要在这个特定的翻译单元中定义。这`Parent::doSomething()`可以在链接到同一程序的不同翻译单元中定义。编译器不可能知道任何其他 TU 是否会定义该函数，只有链接器知道，因此是链接器抱怨。

> 任何有关链接器在这种情况下如何工作的见解或对进一步阅读的参考都将受到高度赞赏。

如前所述，编译器（此特定编译器）在`Parent`级别添加对特定覆盖的调用。与所有其他函数调用一样，链接器试图找到在任何翻译单元中定义的符号并且失败，从而触发错误。

*pure-virtual*说明符的唯一目的是在创建虚拟表时避免函数的隐式使用（标准中的*odr-use ）。*也就是说，pure 说明符的唯一目的不是将对该符号的依赖添加到虚拟表中。这反过来意味着链接器将不需要在`Parent::doSomething`程序中存在符号 ( ) 来实现动态调度 (vtable)，但如果程序显式使用它，它仍然需要该符号。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-11T16:37:50.713

在调用doSomething()的指针处，编译器可以确定*this的动态类型是Parent，所以不需要间接调用函数。这种行为很大程度上取决于您使用的编译器/链接器。

# ruby-on-rails-3 - 为 Rails JRuby 应用程序创建安装程序

> ID：11437245
> 
> 赞同：1
> 
> 时间：2012-07-11T16:33:26.250
> 
> 标签：ruby-on-rails-3, tomcat, jruby, warbler

我有一个 Ruby On Rails 3 应用程序，它安装在 Windows XP 的 Tomcat 下。我使用 jruby 和 warbler 创建了 war 文件。

我需要制作一个安装程序（这意味着从 git 存储库中获取代码、配置、执行 warbler、配置 warbler 并将输出复制到 Tomcat。

你能帮我解决这个问题吗？这个要求的正确方法是什么？一个批处理文件和一个执行它的EXE？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-12T06:26:07.690

简单的问题：你真的要在Windows下使用Tomcat吗？

这个问题是因为使用 Torquebox，您可以以一种超级简单的方式解决您的问题。所有用于部署的 rake 任务都在那里，您可以部署为战争或爆炸文件夹。否则，您可以使用[Stompbox](https://github.com/torquebox/stompbox)通过 git 部署 Heroku 样式。

查看文档以获取更多详细信息： http: [//torquebox.org/documentation/current/deployment.html](http://torquebox.org/documentation/current/deployment.html)

# ios - ACAccountStore 错误 5

> ID：11437250
> 
> 赞同：10
> 
> 时间：2012-07-11T16:33:39.527
> 
> 标签：ios, ios5, acaccount

尝试将帐户保存到 ACAccountStore 时，有时会收到此错误。后来，如果我尝试访问此帐户，我发现它实际上已被保存。到目前为止，我还没有找到任何关于这个不起眼的错误的信息。有谁知道这意味着什么？

错误 Domain=com.apple.accounts Code=5 “操作无法完成。（com.apple.accounts 错误 5。）”

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-11-05T19:24:00.417

这个问题有点过时，但我在同一领域挣扎。这是应该有所帮助的一件事：我确实找到了有关错误代码的文档：

```
typedef enum ACErrorCode {
   ACErrorUnknown = 1,
   ACErrorAccountMissingRequiredProperty,
   ACErrorAccountAuthenticationFailed,
   ACErrorAccountTypeInvalid,
   ACErrorAccountAlreadyExists,
   ACErrorAccountNotFound,
   ACErrorPermissionDenied,
   ACErrorAccessInfoInvalid
} ACErrorCode; 
```

我在 Accounts.framework 链接下的文档中找到了这个。

对此进行解释，error=5 为“帐户已存在”，error=6 为“帐户未找到”。我希望这会使错误不那么“难以描述”。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-08T07:22:38.527

出现此错误是因为您没有在设置中设置 Facebook 帐户。这些设置在 iOS 6 中可用。设置该帐户，然后重试。

在错误时也给出适当的警告信息。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-12T20:01:35.083

虽然我没有找到任何文档来支持（或反驳）我的发现，但这里似乎发生了变化（从 iOS 5 开始）：

*   在 iOS 5 中，即使没有设置 Twitter 帐户，也会提示用户访问请求。在 iOS 6 中，当没有设置帐户时，该请求似乎被拒绝并显示错误代码 6。

*   在 iOS 5 中，如果用户之前从“设置”>“Twitter”禁用了对所述帐户的访问，则会再次（并再次）提示用户访问请求。现在，在 iOS 6 中，如果用户从“设置”中删除了对应用程序的访问权限，访问请求似乎会被静默拒绝（没有错误，即零错误）

如果其他人找到更好的答案，请发表评论。

# codeigniter - 如何使用 Codeigniter REST 和响应方法

> ID：11437252
> 
> 赞同：1
> 
> 时间：2012-07-11T16:33:48.083
> 
> 标签：codeigniter, rest

我是 REST API 和 CURL 的新手，我一直在参考[http://net.tutsplus.com/tutorials/php/working-with-restful-services-in-codeigniter-2/](http://net.tutsplus.com/tutorials/php/working-with-restful-services-in-codeigniter-2/)

如果我将错误代码从 403 更改为 200，我会得到输出： *“发生错误”。*

如果我将错误代码保留为 403，我会得到输出： *'Something has go wrong'*。

从做一些阅读看来，我给出某种错误代码是正确的，但我如何传回有关错误的更多细节？我应该如何回应？

我的 API

```
public function login_put() {
    $valid = $this->membership_model->validate_username($this->put('username'));
    if($valid !== TRUE){
        $this->response(array('status' => 'error', 'msg' => 'error_details'), 403);  
    } 
} 
```

我的 CURL 测试仪

```
function curl_put()  
{  
    $this->load->library('curl');  
    $this->curl->create('http://localhost/api/login/format/json');  

    $this->curl->put(array(  
        'username' => 'my_username' 
    ));  

    $result = json_decode($this->curl->execute());  

    if( isset($result->status) && $result->status == 'error' ) { 
        echo 'Error occured';
    } else {  
        echo 'Something has gone wrong';  
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-24T22:35:31.827

看起来您在 curl 网址中缺少参考。如果 login_put 所在的文件名为 login.php，则您的 url 应如下所示：

```
http://localhost/api/login/login/format/json 
```

首先，我们有您的域，然后是对 API 的引用。第一个登录是指 api 文件夹中的控制器，第二个是指您定义的函数名称（login_put）

# visual-c++ - 由于 ';' 上的语法错误，文件未编译 （分号）

> ID：11437268
> 
> 赞同：-6
> 
> 时间：2012-07-11T16:34:48.210
> 
> 标签：visual-c++

当我使用分号字符 (";")/ 时，我的 Visual Studio 2010 不允许编译我的文件/它说有错误。

但不是所有的分号，只是其中一个。

```
1>------ Build started: Project: waynekwa, Configuration: Debug Win32 ------
1>Build started 7/11/2012 11:58:46 PM.
1>InitializeBuildStatus:
1>  Touching "Debug\waynekwa.unsuccessfulbuild".
1>ClCompile:
1>  waynekwa.cpp
1>c:\users\asus\documents\visual studio 2010\projects\waynekwa\waynekwa\waynekwa.cpp(6): warning C4996: 'scanf': This function or variable may be unsafe. Consider using scanf_s instead. To disable deprecation, use _CRT_SECURE_NO_WARNINGS. See online help for details.
1>          c:\program files (x86)\microsoft visual studio 10.0\vc\include\stdio.h(304) : see declaration of 'scanf'
1>c:\users\asus\documents\visual studio 2010\projects\waynekwa\waynekwa\waynekwa.cpp(11): error C2059: syntax error : ';'
1>c:\users\asus\documents\visual studio 2010\projects\waynekwa\waynekwa\waynekwa.cpp(11): error C2143: syntax error : missing ';' before ')'
1>c:\users\asus\documents\visual studio 2010\projects\waynekwa\waynekwa\waynekwa.cpp(11): error C2143: syntax error : missing ';' before ')'
1>c:\users\asus\documents\visual studio 2010\projects\waynekwa\waynekwa\waynekwa.cpp(12): error C2143: syntax error : missing ';' before '{'
1>c:\users\asus\documents\visual studio 2010\projects\waynekwa\waynekwa\waynekwa.cpp(27): fatal error C1075: end of file found before the left brace '{' at 
'c:\users\asus\documents\visual studio 2010\projects\waynekwa\waynekwa\waynekwa.cpp(3)' was matched
1>
1>Build FAILED.
1>
1>Time Elapsed 00:00:02.14
========== Build: 0 succeeded, 1 failed, 0 up-to-date, 0 skipped ========== 
```

编码：

```
#include<stdio.h> 

int main(void) { 
    int num,x,y=0; 
    printf("enter range:"); 
    scanf("%i",&num); 
    for(x=1;x<=;x++) { 
        if(num%x==0) { 
            y++; 
        } 
        if(y==2) { 
            printf("it is prime number.\n"); 
        } else { 
            printf("it is not prime number.\n"); 
        } 
    return 0; 
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-12T15:29:20.403

看起来您忘记了`for`循环的右括号。你需要一个介于`else`第二个`if`和你的`return`. 这是第二个实际错误的原因，`fatal error C1075: end of file found before the left brace '{'`.

此外，`for (x = 1; x <= ; x++)`不是有效的 for 循环。第二部分`x <= ;`缺少要比较的值。例如，`x <= 10;`。这就是语法错误`error C2059: syntax error : ';'`的来源。关于分号的其他抱怨是由于这个错误。

**编辑：** 另外，你的作业`int num,x,y=0;`很难理解。我建议您通过放置多行或通过链分配来清理它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-12T21:45:15.180

首先想到的是一行：

```
for(x=1;x<=;x++) { 
```

你`x<=`只是一个人坐在那里，你必须把价值放在那里。

我猜你的意思是：

```
for(x=1; x<=num; x++) { 
```

但除此之外，没有其他语法错误出现在我身上。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-11T18:00:03.570

鉴于您提供给我们的信息，您可能需要添加或删除一个或多个`;`，然后`}`在第 3 行之后的某个位置添加一个。但您也可能不需要做这些事情。

# haskell - Haskell：“追加”类型类

> ID：11437269
> 
> 赞同：3
> 
> 时间：2012-07-11T16:34:48.300
> 
> 标签：haskell, typeclass

据我了解[`Foldable`](http://www.haskell.org/ghc/docs/7.4.2/html/libraries/base-4.5.1.0/Data-Foldable.html)，基本上表示具有许多相同类型的元素可以迭代的结构，即列表、映射、集合等。

是否有类似`Appendable`或`Insertable`基本上代表可以添加元素的结构的类？当然，不能保证检索元素的顺序。

如果已经有一个类，我宁愿自己不创建一个类。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-11T16:44:32.360

您应该查看[Data.Collections](http://hackage.haskell.org/packages/archive/collections-api/1.0.0.0/doc/html/Data-Collections.html)包。它包含`Unfoldable`具有以下方法的类型类：

```
class Unfoldable c i | c -> i where
  insert :: i -> c -> c
  empty :: c
  singleton :: i -> c 
```

它还提供了`insertMany`和`insertManySorted`方法，将 a 中的所有元素插入`Foldable`到 a`Unfoldable`中。

如果你让你的类型成为两者的实例，`Foldable`那么`Unfoldable`你就可以从中插入和检索元素。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-11T17:13:22.150

我认为插入本身并不是一个明智的概念。有更好的方法来概括这一点。例如`Alternative`那里是一个明智的类型类。你会得到`pure`单例和一些通用*联合*操作的形式`<|>`。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-07-11T18:54:35.270

> 是否有类似`Appendable`或`Insertable`基本上代表可以添加元素的结构的类？

您希望更清楚地了解“添加元素”的含义。因为这有两种方式：

```
class Insertable c where
    -- Add one element to the collection.
    insert :: a -> c a -> c a

class Appendable c where
    -- Append a collection to another.
    append :: c a -> c a -> c a 
```

您会注意到，后者不支持向`a`集合中添加一个单独的对象，除非您添加如下操作：

```
class Pointed c where
    singleton :: a -> c a 
```

请注意，如果您有`Appendable`和`Pointed`实例，您可以定义一个`Insertable`：

```
instance (Appendable c, Pointed c) => Insertable c where
    insert x xs = append (singleton x) xs 
```

类`Insertable`，连同实际访问集合元素（例如`Foldable`类）的操作，同样可以用来定义一个`Appendable`实例。

无论如何，我`Appendable`上面的模拟课实际上只是[`Monoid`](http://www.haskell.org/ghc/docs/latest/html/libraries/base/Data-Monoid.html)伪装。My`Insertable`也可以被视为 Chris Taylor 建议`Unfoldable`课程的伪装版本。不过，我会选择[`Collection`](http://hackage.haskell.org/packages/archive/collections-api/1.0.0.0/doc/html/Data-Collections.html#g:3)该包中的课程，它将两者`Unfoldable`与`Foldable`.

# python - 在 Windows 到 Linux/OSX 中的 Python 交叉编译

> ID：11437271
> 
> 赞同：3
> 
> 时间：2012-07-11T16:35:04.153
> 
> 标签：python, windows, python-2.7, cross-compiling

我有一个我在 Windows 上用 Python 2.7 编写的程序，我一直在使用 py2exe 并完全成功地将它变成一个 exe（和相关文件）。然而，我想使用它的相当数量的人在 Linux/OSX 上，虽然有些人能够使 Windows 版本与 Wine 一起工作，但其他人却没有那么成功。我已经彻底研究了 py2installer、py2app、freeze 等，但如果我理解正确（我是 Python 新手并且对编译*非常*陌生），你需要在你想要编译它们的系统上运行它们，即你只能为 Linux 上的 Linux 和 OSX 上的 OSX 编译。我不想只分发原始文件，因为我希望源代码在 .exe 中被混淆，显然不是每个人都有 Python。

所以，我的问题是：有没有办法在*Windows 机器上用*Python 为 OSX 或 Linux 编译？如果不是，您认为最好的替代解决方案可能是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-11T16:42:43.593

获取 Virtualbox，在其中安装 Ubuntu，然后在 Linux 中“本地”构建它。这些东西真的很好用，交叉编译只是自找麻烦。无论如何，您最终将需要 Linux 来回答您从这些客户那里得到的支持问题！:(

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-11T20:12:03.643

1.  代码混淆真的不是“pythonic”。即使打包到 .exe 文件中，它基本上也只是 python 解释器，并且您的源代码（嗯，.pyc 文件）压缩到一个文件中。它不像交叉编译那样在linux上使用python包来做你想做的事情（例如，以特定的方式打包你的代码）。 [冻结](http://wiki.python.org/moin/Freeze)会为你做这件事。

2.  大多数 linux dist 都内置了 python。

3.  让你的 linux 机器运行起来！它很有趣，很有用，而且你总是可以说“在我的机器上它可以工作！”。你可以在那里编译你的代码/在 Wine 上测试你的 exe。

4.  如果由于某种原因您仍然无法运行它，请发布问题！

# qt - 在 QLineEdit 上预输入会终止屏幕

> ID：11437273
> 
> 赞同：0
> 
> 时间：2012-07-11T16:35:07.003
> 
> 标签：qt, qlineedit

我的主屏幕上有一个由 QDialog 定义的 QLineEdit。连同它我有一个表格，其中包含由 QThread 显示的动态数据，每 2 秒有 50 个数据。当我在 QLinrEdit 中输入任何值然后按 Enter 键时屏幕终止。

```
 value = new QLineEdit(this);
        m_label = new QLabel(tr("&Enter Preference Value:"));
        m_label->setBuddy(value);
        m_preLayout->addWidget(m_label);
        m_preLayout->addWidget(value);
        m_preferenceGroup->setLayout(m_preLayout);
        connect(value, SIGNAL(returnPressed()), this, SLOT(preferentialData()));

void appWindow::preferentialData()
{
        valuee = (value->text()).toInt();
} 
```

在这里，我从用户那里获取输入，然后将该输入转换为一个整数，该整数将进一步用于其他目的。现在，在根据信号输入该输入后，我按下回车键，然后屏幕关闭。

该值被转换为 int 并且编译时没有错误但是为什么窗口关闭？因为如果它关闭，那么我将进一步对转换后的 int 做的事情将毫无用处，因为在该 int 的帮助下，我将更改我的桌子上的一些显示，因为我提到我在那个窗口中也有一张桌子。

提前感谢您的帮助

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-11T18:29:27.390

我几乎可以肯定（如果没有看到更多代码就无法确定）对话框正在使用“Enter”键并调用其 accept() 方法，该方法会关闭对话框。如果您在 Qt Creator 中创建了对话框并选择了一种对话框类型，为您在表单上放置了一个按钮框，则默认情况下此连接已连接。

检查对话框的信号/槽连接并确保 accept() 槽没有连接到 QPushButton 或 QDialogBu​​ttonBox 信号。

# android - 谷歌地图加载了一些，但不是所有的地图图块

> ID：11437284
> 
> 赞同：0
> 
> 时间：2012-07-11T16:35:59.757
> 
> 标签：android, google-maps

我在 Android 应用程序中使用 Google 地图，并且仅在一个测试设备上遇到问题——摩托​​罗拉 Xoom 家庭版（仅供参考，与 Xoom 的其他版本相比，它是一个有缺陷的蹩脚设备）。

当我查看地图时，一些地图图块会加载，而另一些则显示为灰色。当我缩放或移动地图时，可能会加载更多图块，但不是全部。奇怪的是，这曾经工作得很好。

我可以看到我不是唯一遇到此问题的人，尽管此人在网站上使用 jquery：[Google Maps Gray Squares Apear](https://stackoverflow.com/questions/7612895/google-maps-grey-squares-apear)

同样，只有一些图块没有加载。一些图块加载得很好，地图在所有其他设备上也能正常工作。我在所有测试设备上使用签名的 APK；Maps API 密钥全部正确。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-11T16:52:49.757

经过更多研究并看到此日志消息偶尔出现：

```
07-11 11:32:34.981: W/System.err(9650): IOException processing: 26
07-11 11:32:34.981: W/System.err(9650): java.net.SocketTimeoutException
07-11 11:32:34.981: W/System.err(9650):     at org.apache.harmony.luni.net.PlainSocketImpl.read(PlainSocketImpl.java:451)
07-11 11:32:34.981: W/System.err(9650):     at org.apache.harmony.luni.net.SocketInputStream.read(SocketInputStream.java:75)
07-11 11:32:34.981: W/System.err(9650):     at org.apache.http.impl.io.AbstractSessionInputBuffer.fillBuffer(AbstractSessionInputBuffer.java:103)
07-11 11:32:34.981: W/System.err(9650):     at org.apache.http.impl.io.AbstractSessionInputBuffer.read(AbstractSessionInputBuffer.java:134)
07-11 11:32:34.981: W/System.err(9650):     at org.apache.http.impl.io.ContentLengthInputStream.read(ContentLengthInputStream.java:174)
07-11 11:32:34.981: W/System.err(9650):     at org.apache.http.conn.EofSensorInputStream.read(EofSensorInputStream.java:159)
07-11 11:32:34.981: W/System.err(9650):     at libcore.io.Streams.readFully(Streams.java:47)
07-11 11:32:34.981: W/System.err(9650):     at java.io.DataInputStream.readFully(DataInputStream.java:133)
07-11 11:32:34.981: W/System.err(9650):     at java.io.DataInputStream.readFully(DataInputStream.java:129)
07-11 11:32:34.981: W/System.err(9650):     at android_maps_conflict_avoidance.com.google.googlenav.map.BaseTileRequest.readImageData(BaseTileRequest.java:194)
07-11 11:32:34.981: W/System.err(9650):     at android_maps_conflict_avoidance.com.google.googlenav.map.BaseTileRequest.readResponseData(BaseTileRequest.java:124)
07-11 11:32:34.981: W/System.err(9650):     at android_maps_conflict_avoidance.com.google.googlenav.map.MapService$MapTileRequest.readResponseData(MapService.java:1473)
07-11 11:32:34.981: W/System.err(9650):     at android_maps_conflict_avoidance.com.google.googlenav.datarequest.DataRequestDispatcher.processDataRequest(DataRequestDispatcher.java:1117)
07-11 11:32:34.981: W/System.err(9650):     at android_maps_conflict_avoidance.com.google.googlenav.datarequest.DataRequestDispatcher.serviceRequests(DataRequestDispatcher.java:994)
07-11 11:32:34.981: W/System.err(9650):     at android_maps_conflict_avoidance.com.google.googlenav.datarequest.DataRequestDispatcher$DispatcherServer.run(DataRequestDispatcher.java:1702)
07-11 11:32:34.981: W/System.err(9650):     at java.lang.Thread.run(Thread.java:1020) 
```

我认为问题可能与 Internet 连接有关；缓慢的连接可能会导致某些图块无法成功加载。我正在使用高速 Wi-Fi 连接，但重新启动了摩托罗拉 Xoom 家庭版，问题就消失了。

我认为开发人员无法解决这个问题。这可能是设备问题（就像 Xoom F'ed-up Edition 一样）或用户的互联网连接不佳。希望此信息可以帮助其他遇到相同问题的人。

# jquery - 调用 .load() 后，MVC C#、部分视图、Jquery load() 无法正常工作

> ID：11437285
> 
> 赞同：1
> 
> 时间：2012-07-11T16:36:02.527
> 
> 标签：jquery, asp.net-mvc-3

我正在使用 C#，MVC。

我遇到了 PartialView 和 jquery 加载正常工作的问题。

当用户单击名为 Kit 的超链接时，我调用以下命令：

```
 public ActionResult KitsEdit(string id)
    {
        int idnbr = Convert.ToInt32(id);

        var Progs = db2.usp_KitInfo(idnbr)
                    .OrderBy(x => x.TDate).ToList();

        return PartialView(Progs);
    } 
```

它可以很好地在页面上加载 PartialView。

视图有行，每行都有一个编辑超链接。当用户点击编辑超链接时，我会显示一个对话框，用户可以在其中修改每行显示的一些信息并点击提交。这第一次工作正常。

在提交时，我打电话给我做一些验证，然后打电话：

```
 $("#stlist").load('@Url.Action("KitsEdit", "Spr")' + '?id=' + '@Model.id'); 
```

因为我需要重新加载页面上的部分视图，以便用户可以看到更新的信息。

页面的负载在表面上运行良好。但是发生的情况是，当我在执行 .load 后第二次单击编辑超链接时，对话框会显示一些以前有效的功能根本不起作用。例如，该复选框不起作用，如果我单击它，则该值不会正确传递回控制器操作。此外，对于提交，我点击了一些代码，但这些代码甚至都不起作用。它直接进入控制器动作并绕过所有代码

```
 $("#submit").click(function (). 
```

请注意，这只发生在调用 load() 之后。

问题：除了 .load() 之外，还有什么可以在页面上加载 PartialView。如果没有，我怎样才能让它与 .load() 一起正常工作。

下面是提交点击的样子：

```
 $("#submit").click(function () {
    //  following .on code won't execute code inside of function so have it commented       
    // $("#submit").on("click", function () {  

         var inactivedate = $("#InactiveDate").val();

         var inactivecheck = $('#Inactive').is(':checked');

         var inactivereason = $('#InactiveReason option:selected').text();

         if ((!inactivedate || !$.trim(inactivedate)) && $('#Inactive_cb').attr('checked') == true) {
             alert('Inactive Date must be entered.');
             return false;
         }

         if ($('#Inactive_cb').attr('checked') == true && inactivereason == '<Choose>') {
             alert('Inactive Reason must be selected.');
             return false;
         }

         var url = '@Url.Action("EditTrain", "Spr")';

         $.ajax({
             type: "POST",
             url: url,
             async: false,
             data: $('#theForm').serialize()               
           });

         $("#stlist").load('@Url.Action("kitsEdit", "Spr")' + '?id=' + '@Model.spkrid');
         parent.$.fn.colorbox.close();

         return false;

     });
 }); 
```

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-11T18:01:05.480

`load`函数动态地向 DOM 注入一些新内容。所以旧的事件绑定不适用于新元素。你需要使用 jQuery[`on`](http://api.jquery.com/on/)

改变

```
$("#submit").click(function (e) {
  //some code 
}); 
```

到

```
$(document).on("click","#submit",function (e) {
  e.preventDefault() // if you need
  //some code 
}); 
```

[jquery](http://api.jquery.com/on/)适用于当前和未来的元素。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-11T17:15:03.270

部分视图中是否有任何 JavaScript 代码？如果您在局部视图中连接了任何事件，那么当您重新加载控件时它们将不起作用。

如果您需要重新绑定事件，请`success`在进行 AJAX 调用后在函数中执行此操作。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-11T17:20:32.880

您正确使用了 .load()，但您需要更改事件处理程序以使用 .on() 或 .delegate() 将事件绑定到新创建的元素上。像这样：

```
$("#submit").on("click", function(){
  //do your stuff
}); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-07-02T11:45:36.343

```
$("#submit").live('click', function () {} 
```

这应该工作

# node.js - ldap nodejs 活动目录认证

> ID：11437288
> 
> 赞同：9
> 
> 时间：2012-07-11T16:36:12.257
> 
> 标签：node.js, authentication, active-directory, ldap

我目前正在使用 node.js 中的 Web 应用程序，用户需要登录才能访问信息。我想使用外部活动目录服务器检查用户登录名和密码。我试过使用node-ldapauth，但我无法让它工作（我不知道它是否适用于活动目录，也许只是openLdap）。有什么建议么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-26T21:14:24.910

我使用了 ruby​​ldap 库来解决问题，谢谢！

更新：根据要求，这是我用来解决问题的库[https://github.com/ruby-ldap/ruby-net-ldap/](https://github.com/ruby-ldap/ruby-net-ldap/)

在您的服务器上安装 ruby​​ 库后，使用 gem install （查找它并不太难）

```
 require 'rubygems'
  require 'net/ldap'

  ldap = Net::LDAP.new :host => server_ip_address,
       :port => 389,
       :auth => {
             :method => :simple,
             :username => "cn=manager, dc=example, dc=com",
             :password => "opensesame"
       }

  filter = Net::LDAP::Filter.eq("cn", "George*")
  treebase = "dc=example, dc=com"

  ldap.search(:base => treebase, :filter => filter) do |entry|
    puts "DN: #{entry.dn}"
    entry.each do |attribute, values|
      puts "   #{attribute}:"
      values.each do |value|
        puts "      --->#{value}"
      end
    end
  end

  p ldap.get_operation_result 
```

如上所示设置一个 ruby​​ 文件。

您可以使用运行 ruby​​ 库

```
var ldap = 'ruby '+process.cwd()+'/src/ruby/ruby_file_name '+ user+' '+password; 
```

要在 ruby​​ 中获取用户名和密码，请使用 ARGV[0] 和 ARGV [1](https://github.com/ruby-ldap/ruby-net-ldap/)。您可以使用回调函数在 node.js 中获取 ruby​​ 返回的结果

```
var result = exec(ldap, theCallBack); 
```

在 theCallBack 函数中，您可以通过传入 stdout 来获取返回的 ruby​​ 库结果

前任：

```
function theCallBack(err,stdout) {
    ----your code here, stdout is what you PUT in the ruby library. 
```

希望这可以帮助！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-18T17:39:13.093

你能发布你的代码片段和你得到的错误吗？

我正在尝试做类似的事情并遇到了[ldapjs](http://ldapjs.org/)库。它允许您实现到 LDAP 服务器的客户端 ldap 连接，并且您可以在连接时验证用户的用户名和密码。

我尝试在 0.8.2 的 Windows 上设置它并遇到了一些问题，这听起来像是开发人员正在寻找的。这个库的优点是它不依赖于您引用的 OpenLDAP 绑定。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-25T06:55:48.817

为了在 Windows 上安装 ldapjs，我编写了我在此处遵循的步骤[http://tochedev.blogspot.be/2012/07/i-wanted-to-add-ldapjs-to-my-windows.html](http://tochedev.blogspot.be/2012/07/i-wanted-to-add-ldapjs-to-my-windows.html)

希望这可以帮助。

# java - How do you create a 'java' directory under the auto-generated 'src' directory in Eclipse?

> ID：11437289
> 
> 赞同：0
> 
> 时间：2012-07-11T16:36:17.057
> 
> 标签：java, eclipse, sts-springsourcetoolsuite

I have create a project under eclipse. Eclipse automatically creates a directory named 'src'. The Source control system I am using imposes a directory structure which begins src/java/com/company_name/package_name/java_class_name.java .Other packages which are dependent i.e. use the java files in other eclipse projects refer to the classes with import com.company_name.package_name.java_class_name.

My question is in order for the above to work I need to create a 'java' directory under the autogenerated 'src' and link this to the directory where my files are starting 'com'. If I select "project-properties-Java Build Path-Add Folder-link source" then specify my directory structure 'src/java' it creates a java directory at the same level as my src directory. If I select add folder it presents me with existing folders only which don't include 'java'. I cannot see a way to resolve this.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-11T17:29:53.810

右键单击 src 文件夹并选择新建/其他.../文件夹（不是源文件夹）。在对话框中输入名称“java”，然后单击“确定”。

但是，这不是你想要的。您真正想要的是删除源文件夹“src”，然后添加一个新的源文件夹“src/java”。这样包名称是“com.blah ...”而不是“java.com.blah ...”。

所以，首先删除 src 文件夹。

1.  右键点击src
2.  选择删除
3.  确认

接下来，创建一个新的源文件夹。

1.  右键单击项目
2.  选择新建/源文件夹
3.  输入“src/java”（不带引号）
4.  点击确定

现在您有了一个具有正确路径的新源文件夹，并且包名称将与 Eclipse 中的预期一致。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-11T17:32:55.667

Zagrev答案的修改替代方案：

您仍然需要从 Eclipse 项目中删除 src 目录

手动创建 Java 子目录。

然后使用 Build Path-> Link Source... 并将其链接到创建的目录。

# css - Wrap or Hang Indent a secondary span

> ID：11437295
> 
> 赞同：1
> 
> 时间：2012-07-11T16:36:45.107
> 
> 标签：css, html

I have searched, and [this](https://stackoverflow.com/questions/7638970/span-indent-wrapped-text) post is closest, but not exactly the same. I am trying to have two spans next to each other, with percentage widths. However, when the window's width is decreased by the user's screen size or window resizing, the labels and input fields separate individually. I would like the label and input to be one unit, so that if the window is decreased, the second span will wrap below the first.

HTML:

```
<span><label for="startdate">Start Date</label><input id="startdate" name="startdate" type="text" value="" /></span>
<span><label for="enddate">End Date</label><input id="enddate" name="enddate" type="text" value="" /><br></span>​ 
```

CSS:

```
#startdate {
    width: 30%;
    display: inline-block;
}
#enddate {
    width: 30%;
    display: inline-block;
}​ 
```

[Here is a fiddle](http://fiddle.jshell.net/chrisfrisina/XceSq/). If you want to test the resizing functionality, move the center bar to the right.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-11T16:39:38.943

固定：http: [//jsfiddle.net/XceSq/1/](http://jsfiddle.net/XceSq/1/)

```
<div style="display:inline-block;"><label for="startdate">Start Date</label><input id="startdate" name="startdate" type="text" value="" /></div>
<div style="display:inline-block;"><label for="enddate">End Date</label><input id="enddate" name="enddate" type="text" value="" /><br></div>​ 
```

该`span`元素是一个文本容器，不支持您要达到的宽度要求。然而，该`div`元素是一个布局容器，它允许您将两个对象包含在一个块中。使用`display:inline-block`，我们能够确保两个容器并排显示。

享受和好运！

# c++ - Is it possible to get the service name of the running service without a handle to the service key?

> ID：11437297
> 
> 赞同：1
> 
> 时间：2012-07-11T16:36:50.347
> 
> 标签：c++, winapi

Is it possible to get the service name of the running service without a handle to the service key, the service display name, and the service key name in c++?

# ruby-on-rails - hardcoding CONSUMER_KEY and CONSUMER_SECRET

> ID：11437301
> 
> 赞同：0
> 
> 时间：2012-07-11T16:37:06.913
> 
> 标签：ruby-on-rails, ruby, omniauth

[https://github.com/ryanatwork/sign-in-with-linkedin](https://github.com/ryanatwork/sign-in-with-linkedin)

This example rails application that lets a user log in with LinkedIn requires that the "rails server" command in the terminal be prefaced by 'CONSUMER_KEY=[consumer key] CONSUMER_SECRET=[consumer secret]' so that the whole command looks like:

CONSUMER_KEY=[consumer key] CONSUMER_SECRET=[consumer secret] rails server

The linkedin login obviously won't work with a consumer key/secret, but I'm having trouble hardcoding my consumer key/secret into the app so that I can deploy to Heroku successfully, but am not having any luck. I've tried in several different config and controller files without any luck. Help appreciated!

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-11T16:42:41.723

不要硬编码到heroku。您可以在 Heroku 中使用环境变量来设置 CONSUMER_KEY 和 CONSUMER_SECRET。

以下是 Heroku 的文档： [https ://devcenter.heroku.com/articles/config-vars](https://devcenter.heroku.com/articles/config-vars)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-11T16:43:07.027

当您部署到 Heroku 时，您需要使用以下[`heroku config`](https://devcenter.heroku.com/articles/config-vars)命令设置这些变量：

```
heroku config:add CONSUMER_KEY=[consumer key] 
```

如果您使用[Foreman](https://github.com/ddollar/foreman)来启动您的服务器（就像 Heroku 在其末尾所做的那样），那么您可以[从本地文件](http://blog.akash.im/per-project-environment-variables-with-forema)中加载这些变量，该文件永远不会提交到您的源代码管理中（您*不*希望在源代码管理中包含这些秘密细节）

# java - 在 JList 中显示 HashSet 并实时更新项目

> ID：11437304
> 
> 赞同：2
> 
> 时间：2012-07-11T16:37:17.210
> 
> 标签：java, jlist, hashset

我想在[JList中显示](http://docs.oracle.com/javase/7/docs/api/javax/swing/JList.html)[HashSet](http://docs.oracle.com/javase/7/docs/api/java/util/HashSet.html)的内容。我通过以下声明实现了这一点：

```
JList list = new JList(hashset.toArray()); 
```

现在，我想`list`反映`hashset`. 我可以通过`setListData()`在更改元素时调用来做到这一点`hashset`，如下所示：

```
list.setListData(hashset.toArray()); 
```

这似乎不是一个正确的方法。[正如我从教程](http://docs.oracle.com/javase/tutorial/uiswing/components/list.html)中了解到的，我需要扩展/实现一个[ListModel](http://docs.oracle.com/javase/7/docs/api/javax/swing/ListModel.html)。如果适用于我的意图，请提供重载 ListModel 的适当示例。否则，请提出更好的方法。

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-11T18:27:32.550

根据我们在聊天中的讨论，这是一种可能的解决方案。我没有调试或测试过这个，所以请注意：

```
import java.awt.event.ActionEvent;
import java.awt.event.KeyEvent;
import java.util.Comparator;
import java.util.Iterator;
import java.util.TreeSet;

import javax.swing.*;

public class TreeSetInJListTest extends JPanel {
   private static final long serialVersionUID = 1L;
   private static final String[] DATA_ARRAY = { "one", "two", "three", "two",
         "three", "this is a longer string" };
   TreeSetListModel<String> stringListModel = new TreeSetListModel<String>(
         String.CASE_INSENSITIVE_ORDER);
   JList<String> jList = new JList<String>(stringListModel);

   public TreeSetInJListTest() {
      for (int i = 0; i < DATA_ARRAY.length; i++) {
         stringListModel.add(DATA_ARRAY[i]);
      }

      add(new JScrollPane(jList));
      add(new JButton(new AddToListAction("Add To List", KeyEvent.VK_A)));
   }

   @SuppressWarnings("serial")
   private class AddToListAction extends AbstractAction {
      public AddToListAction(String name, int mnemonic) {
         super(name);
         putValue(MNEMONIC_KEY, mnemonic);
      }

      @Override
      public void actionPerformed(ActionEvent arg0) {
         String element = JOptionPane.showInputDialog(TreeSetInJListTest.this,
               "Enter String:", "Insert Text Into JList",
               JOptionPane.OK_CANCEL_OPTION);
         stringListModel.add(element);
      }
   }

   private static void createAndShowGui() {
      TreeSetInJListTest mainPanel = new TreeSetInJListTest();

      JFrame frame = new JFrame("Example");
      frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
      frame.getContentPane().add(mainPanel);
      frame.pack();
      frame.setLocationByPlatform(true);
      frame.setVisible(true);
   }

   public static void main(String[] args) {
      SwingUtilities.invokeLater(new Runnable() {
         public void run() {
            createAndShowGui();
         }
      });
   }
}

class TreeSetListModel<T extends Comparable<T>> extends AbstractListModel<T> {
   private static final long serialVersionUID = 1L;
   private TreeSet<T> treeSet;

   public TreeSetListModel() {
      treeSet = new TreeSet<T>();
   }

   public TreeSetListModel(Comparator<? super T> comparator) {
      treeSet = new TreeSet<T>(comparator);
   }

   @Override
   public T getElementAt(int index) {
      if (index < 0 || index >= getSize()) {
         String s = "index, " + index + ", is out of bounds for getSize() = "
               + getSize();
         throw new IllegalArgumentException(s);
      }
      Iterator<T> iterator = treeSet.iterator();
      int count = 0;
      while (iterator.hasNext()) {
         T t = (T) iterator.next();
         if (index == count) {
            return t;
         }
         count++;
      }
      // out of index. return null. will probably never reach this
      return null;
   }

   @Override
   public int getSize() {
      return treeSet.size();
   }

   public int getIndexOf(T t) {
      int index = 0;
      for (T treeItem : treeSet) {
         if (treeItem.equals(treeItem)) {
            return index;
         }
         index++;
      }
      return -1;
   }

   public boolean add(T t) {
      boolean result = treeSet.add(t);
      if (result) {
         int index = getIndexOf(t);
         fireIntervalAdded(this, index, index + 1);
      }
      return result;
   }

   public boolean remove(T t) {
      int index = getIndexOf(t);
      if (index < 0) {
         return false;
      }
      boolean result = treeSet.remove(t);
      fireIntervalRemoved(this, index, index + 1);
      return result;
   }

} 
```

# error-handling - BAT：解析输出文件以进行错误处理

> ID：11437306
> 
> 赞同：1
> 
> 时间：2012-07-11T16:37:23.473
> 
> 标签：error-handling, batch-file, for-loop

我有一个每天由预定的批处理文件启动的过程。如果出现错误，我需要内置错误处理以重新启动该过程。大多数时候一切都很好，但我每个月都会遇到一次超时错误，这是不可避免的。该进程不会向 bat 文件输出错误级别，因此我需要能够解析输出文件以确定进程是否需要重新启动。

我尝试使用该`FOR /F`函数将第 12 行的内容作为变量传递给`IF`语句，但我没有成功。我显然可以跳到第 12 行，但接下来我要处理其余行的标记。有没有人有任何建议我可以尝试？

一切正常时输出文件：

（为便于阅读添加了行号）

```
1  Pricing Script
2   
3  ________________________________________________________________________ 
4
5  Retrieve Prices
6
7  Date of price file: 070912
8  Regular only 
9  Connecting to server intdata.com
10 TCP/IP connection established
11  
12 TySymb          Interactive Data
+400 more lines 
```

出错时的输出文件：

```
1  Pricing Script
2  
3  ________________________________________________________________________ 
4 
5  Retrieve Prices
6  
7  Date of price file: 071012
8  Regular only 
9  Connecting to server intdata.com
10 TCP/IP connection established
11 Time Out
12 General Time Out. The User ID and/or Password might be incorrect. 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-11T20:36:10.510

我只需使用 FIND 或 FINDSTR 在输出中查找错误消息。我不会担心行号。

```
find "General Time Out. The User ID and/or Password might be incorrect." "yourFile.log" && (
  echo Timeout occurred, you must put code here to restart
) 
```

或者

```
findstr /c:"General Time Out. The User ID and/or Password might be incorrect." "yourFile.log" && (
  echo Timeout occurred, you must put code here to restart
) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-11T18:54:12.303

这将只测试给定字符串的文件的第 12 行：

```
@echo off
for /f "skip=11 tokens=*" %%i in (your_log_filename) do (
 echo %%i | find "General Time Out" >nul
 goto check
)

:check
if errorlevel 1 (echo No Timeout occured!) else (echo Timeout occured) 
```

# php - how to I get the row content results from a Mysqli result

> ID：11437308
> 
> 赞同：0
> 
> 时间：2012-07-11T16:37:26.260
> 
> 标签：php, mysqli

I have

```
 $result = mysqli_query(...); 
```

I know how to get the number rows, but I need the actual content. In regular mysql it like this:

```
 while($row = mysql_fetch_array($result)){...} 
```

how do I do this with Mysqli?

# apache-flex - Force All vBulletin Sessions to Logout

> ID：11437312
> 
> 赞同：0
> 
> 时间：2012-07-11T16:37:42.787
> 
> 标签：apache-flex, actionscript, air, vbulletin

I am currently building a mobile app that will use an existing vBulletin install as a login system. I've run into an issue where if a user is already signed on somewhere else, they cannot sign back on using the application. On the vBulletin site, if this happens, you are presented with a "Force Logout" button that will end all existing login sessions and allow you to login again.

Is there a way to implement such a feature use just the API? I cannot query the database, unfortunately, and my only means of accessing the vBulletin system is through api.php methods. The vBulletin API documentation is woefully incomplete, so I am hoping someone else would have an answer for this.

If it helps at all, I am using Flex and AS3 to build the application and have successful login and logout, but the logout only works if you pass an appropriate sessionHash to the API.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-16T18:51:35.153

这是我们特定的 vBulletin 配置的问题。我们必须编写一个自定义脚本，允许我们访问 forcelogout.php 页面/脚本并强制注销。

# android - Android layout gap issue

> ID：11437314
> 
> 赞同：0
> 
> 时间：2012-07-11T16:37:52.227
> 
> 标签：android, android-layout

I'm currently having a problem with a seemingly simple layout. I have a static header (with logo and button), a WebView and then a static footer (with centre button). There seems to be a space between these 3 I cannot remove (I made the root background red so it's obvious where the space is).

Any idea how I can make the WebView fill this entire space so this red background is gone?

Also Eclipse is giving me the following warning for my RelativeLayout blocks:

*This RelativeLayout layout or its LinearLayout parent is possibly useless; transfer the background attribute to the other view*

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:id="@+id/commonlayout"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:background="#FF0000"
    android:orientation="vertical"
    android:padding="0dp"
    android:weightSum="10" >

    <LinearLayout
        android:id="@+id/llheader"
        android:layout_width="fill_parent"
        android:layout_height="0dp"
        android:layout_weight="1" >

        <RelativeLayout
            android:id="@+id/relativeLayout1"
            android:layout_width="fill_parent"
            android:layout_height="wrap_content"
            android:layout_gravity="top"
            android:background="@drawable/bgx" >

            <Button
                android:id="@+id/Button_logout"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:layout_alignParentRight="true"
                android:layout_centerVertical="true"
                android:layout_marginRight="2dp"
                android:background="@drawable/ic_launcher" />

            <Button
                android:id="@+id/Button_playlist"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:layout_alignParentLeft="true"
                android:layout_centerVertical="true"
                android:layout_marginLeft="2dp"
                android:background="@drawable/logo" />
        </RelativeLayout>
    </LinearLayout>

    <LinearLayout
        android:id="@+id/lldata"
        android:layout_width="fill_parent"
        android:layout_height="0dp"
        android:layout_weight="8"
        android:background="#00FF00" >

        <WebView
            xmlns:android="http://schemas.android.com/apk/res/android"
            android:id="@+id/webview"
            android:layout_width="fill_parent"
            android:layout_height="fill_parent" />
    </LinearLayout>

    <LinearLayout
        android:id="@+id/llfooter"
        android:layout_width="fill_parent"
        android:layout_height="0dp"
        android:layout_margin="0dp"
        android:layout_weight="1"
        android:gravity="center"
        android:orientation="horizontal"
        android:visibility="visible" >

        <RelativeLayout
            android:id="@+id/relativeLayout2"
            android:layout_width="fill_parent"
            android:layout_height="wrap_content"
            android:layout_gravity="bottom"
            android:background="@drawable/bgx" >

            <Button
                android:id="@+id/issue"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:layout_centerHorizontal="true"
                android:background="@drawable/ic_launcher"
                android:textColor="#FFFFFF" />
        </RelativeLayout>
    </LinearLayout>

</LinearLayout> 
```

![enter image description here](../Images/8435c23169541f93df35bd10fe62b81c.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-11T16:46:47.330

> 知道如何让 WebView 填满整个空间，这样红色背景就消失了吗？

您应该尝试在 webview 的布局中使用 weight 标记为 1。

或删除 webview 的布局父级并直接使用权重为 1 的 webview。

# javascript - Replace JavaScript code of HTML files with Perl

> ID：11437315
> 
> 赞同：1
> 
> 时间：2012-07-11T16:37:55.173
> 
> 标签：javascript, perl, replace

I am trying to insert a piece of JavaScript before the closing `<\body>` tag of over 2000 HTML files. This is what I have tried. But it does not do the job.

```
perl -pi -w -e 's/\<\/body\>/\<div id=\"fb-root\"\>\<\/div\>
    \<script type=\"text\/javascript\" src=\"https:\/\/connect.facebook.net\/en_US\/all.js\"\>\<\/script\> 
    \<script type=\"text\/javascript\"\>

    FB.init\(\{
        appId: \"446059218762070\", 
        status: true, 
        cookie: true, 
        xfbml: true
    });

    \/\* As of Jan 2012 you need to use \*\/
    FB.Canvas.setAutoGrow\(2\);
    \<\/script\>
\<\/body\>/g' *.html 
```

I have done some other replacement scripts with `perl -pi`, that worked well like

```
perl -pi -w -e 's/\<a href=\"index.html\"\>/\<a class=\"top_button\" href=\"index.html\"\>/g' *.html 
```

and

```
perl -pi -w -e 's/\<link rel=\"STYLESHEET\" type=\"text\/css\" href=\"default.css\"\>/\<link rel=\"STYLESHEET\" type=\"text\/css\" href=\"default.css\"\>
\<script type=\"text\/javascript\" src=\"https:\/\/ajax.googleapis.com\/ajax\/libs\/jquery\/1.4\/jquery.min.js\"\>\<\/script\>
\<script type=\"text\/javascript\" src=\"default.js\"\>\<\/script\>/g' *.html 
```

Can anyone help me? what is wrong with my one-liner Perl script?

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-12T00:43:42.670

主要问题是您正在尝试进行多行搜索和替换，但正在逐行处理文件。以下修改过的单线应该可以工作：

```
perl -i -wpe 'BEGIN{undef $/;} s[<div id="fb-root".+?</body>][</body>]gs' *.html 
```

请注意，我已经简化了您的搜索字符串。没有必要逐个字符地重复整个 HTML/JavaScript 序列。还有几个元字符应该在搜索字符串中转义。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-11T18:02:22.137

我不明白它为什么会失败，但你不必要地逃避了太多的字符，以至于任何错误都变得不可见。

您没有在模式或替换字符串中使用方括号，所以我建议您使用它们来分隔替换，像这样

```
perl -i -wpe 's[</body>][<div id="fb-root"></div>
    <script type="text/javascript" src="https://connect.facebook.net/en_US/all.js"></script> 
    <script type="text/javascript">

    FB.init({
        appId: "446059218762070", 
        status: true, 
        cookie: true, 
        xfbml: true
    });

    /* As of Jan 2012 you need to use */
    FB.Canvas.setAutoGrow(2);
    </script>
</body>]g' *.html 
```

只是在黑暗中拍摄：我想知道`</body>`您文件中的标签是否为大写？在这种情况下，您的比赛将失败。我建议您添加`i`修饰符 (making `gi`) 以确保。

# php - Avoiding 'Script not responding' with Reverse AJAX / Comet?

> ID：11437318
> 
> 赞同：0
> 
> 时间：2012-07-11T16:38:09.503
> 
> 标签：php, javascript, ajax, comet, reverse

I have a worker thread that sends out a request to the server for data using an XMLHttpRequest. That request points to a php file that basically checks the current integrity of the information that the client has and if the client needs the new information then it is sent. Otherwise the server checks information until the client needs a response. After the server responds the whole process is repeated.

The problem arises when the browser realizes the script isn't responding and gives the user the option to stop the script. As you can see, this isn't the intended result. So what's the best way to continue using the comet-like structure without confusing the browser?

EDIT: I realized why the script is hanging, I repeated the whole worker thread instead of repeating the somewhere deeper inside the thread. So I guess my question now where to start the process again, after it finishes.

```
<?php
//Client sends their current id

if(isset($_GET['id']))
    $id = $_GET["id"];

//if id doesnt match servers id send them a new one
//other wise do not respond

$server_id = file_get_contents("ids.txt");

while($server_id == $id){
    $server_id = file_get_contents("ids.txt");
    sleep(1);
}
echo $server_id;
?> 
```

Javascript:

```
self.addEventListener('message', function(e) {
var data = e.data;
switch (data.cmd) {
    case 'start':
  getInfo(data.id);
  self.postMessage('ID :: ' + response);

  break;
default:
  self.postMessage('Unknown command');
};
}, false);

var response = null;
var request = new XMLHttpRequest();

function getInfo(inputID){
    var url = "serverResponse.php?id=" + inputID;
    request.open("GET", url, false);
    request.onreadystatechange = updateState;
    request.send(null);
}

function updateState(){
    if(request.readyState == 4){
        if(request.status == 200){
            response = request.responseText;//getInfo(data.id);
        }
    }
} 
```

html:

```
<html>

<script type="text/javascript">

function sayHI() {
    var id = "666";
    worker.postMessage({'cmd': 'start', 'id' : id});
  }

var worker = new Worker('AjaxWorker.js');
worker.addEventListener('message', function(e){
    document.getElementById('result').textContent = e.data;
    //Some data has been received so go ahead and make another call to the server
    //This is where the script hangs because the worker waits for a response
    sayHI();
}, false);

</script>

<body>
<button type="button" name="submit" id="submit" onclick="sayHI()">Submit</button>        </br></br>
<output id="result" name="result">Result</output>

</body>

</html> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-11T17:20:06.757

您的线路：

```
request.open("GET", url, false); 
```

将`async`参数[`open()`](https://developer.mozilla.org/en/DOM/XMLHttpRequest#open%28%29)设置为`false`，这意味着 JavaScript 执行流在该 Ajax 调用上完全停止，直到它完成。在同步调用解决之前，您的网页将完全冻结，并且由于您使用的是长轮询，因此在很长一段时间内都不会发生这种情况。因此，您的浏览器解释器会向您发送一个警告，指出脚本执行需要很长时间。（这个警告也是完全合法的——在同步调用解决之前，你不能在你的页面上做任何事情。）

你需要使用`request.open("GET", url, true);`. 只需在 Ajax 调用之后移动需要发生的任何事情并将其放在`onreadystatechange`回调中。当服务器最终响应时，该`updateState`函数将触发。响应“彗星推送”（即通过来自服务器的响应解决长轮询查询）应该发生的任何事情都需要进入该回调。

异步 Ajax 将允许脚本继续执行并且不会导致您的 JS 解释器挂起。脚本流将直接通过它，而不是等待长轮询查询解决，并且稍后`onreadystatechange`将使用来自服务器的新信息调用回调。

**编辑：**

JavaScript 解释器只有一个线程。如果该线程长时间*不间断地使用，浏览器将怀疑出现问题并发出警告。*您的*同步*Ajax 调用会抓取单个 JS 线程，并且在服务器最终回复之前不会松手。正如我之前所说，在很长一段时间内，页面上不会发生任何其他事情。口译员被困在那个电话上。

使用同步 Ajax，您的流程如下所示：

```
send synchronous request
wait
and wait
and wait
(meanwhile, nothing else can get done)
and wait...
....
finally a response comes!
use the response to update the page 
```

考虑这个优越的异步 Ajax 替代方案：

```
send ansyc request

[the interpreter sleeps and the browser is happy]

a response comes!
the request's readystatechange event fires now
the onreadystatechange handler uses the response to update the page 
```

在第二个示例中，解释器可以休息一下，而不是等待 Ajax 请求解决。`onreadystatechange`每当 Ajax 调用从服务器返回时，您的处理程序函数就会被触发。如果您的调用是同步的，则解释器在调用解决之前什么都不做。如果你的调用是异步的，解释器可以自由地做它喜欢的任何事情——包括休息并且不会引起浏览器警告——直到调用解决并执行你的`onreadystatechange`处理程序。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-11T16:56:02.457

你没有说你使用什么技术来实现反向 AJAX（HTTP 轮询？HTTP 流？WebSockets？其他东西？）如果你使用轮询，服务器应该及时响应，即使它“这里没有什么新鲜事” .

如果您保持连接打开，这可能会导致问题；HTTP 将浏览器限制为与服务器的两个同时连接。在这种情况下，浏览器和任何其他脚本只能使用一个连接；这可能会导致浏览器认为事情被阻止了。一个标准的方法是为彗星交互创建一个单独的主机名。

如果您使用 WebWorker，浏览器不会抱怨它被阻止。（但是，连接计数问题仍然可能导致问题。）

# css - 针对不同分辨率显示器优化网页

> ID：11437322
> 
> 赞同：3
> 
> 时间：2012-07-11T16:38:25.900
> 
> 标签：css, resolution, monitor

我一直在一个网站上工作，在[此处](http://blacktiephotographers.com)找到，它在我的显示器 (1440 x 900) 上看起来不错，但在超大显示器上显示时看起来非常平淡。我给外箱一个绝对的高度和宽度，这显然是我的问题的原因，但是当图像都是固定的高度和宽度时，我能做些什么来解决这个问题？

我在某处读到，我可以检查一下显示器在页面加载时的尺寸 - 有人会推荐这个吗？

在较大的显示器上，左右两侧以及外框下方都有很多空白区域。

感谢您的任何帮助！

-埃文

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-11T16:46:14.740

您可以使用以下两种方式进行操作：

1.  CSS 3 媒体查询
2.  流体布局

既然你说你也将支持 IE，CSS 3 媒体查询将无法在 IE 9 下工作，所以让我们使用流体布局。为此，您可以做一些事情：

### CSS 更改

```
#full-height-template-container {width: 1225px;}
#navigation-menu-container {width: 149px;}
#static-frontpage-padding {width: 855px;}

Replace it to:
#full-height-template-container {width: 90%;}
#navigation-menu-container {width: 20%;}
#static-frontpage-padding {width: 80%;} 
```

可能需要进行一些调整。

### CSS 3 媒体查询

媒体查询是当今 CSS 最令人兴奋的方面之一。它们将允许我们更改布局以适应不同设备的确切需求，而无需更改内容。

### CSS 3 媒体查询的示例和演示

**HTML 标记**

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
"http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<head>
    <title>Media query Resolution Dependent Layout</title>
    <meta http-equiv="content-type" content="text/html; charset=iso-8859-1" />
    <link rel="stylesheet" type="text/css" href="stylesheets/master.css" />
</head>
<body>
<div id="container">
    <h1>
        Site name
    </h1>
    <div id="nav">
        <ul>
            <li><a href="#">Link 1</a></li>
            <li><a href="#">Link 2</a></li>
            <li><a href="#">Link 3</a></li>
        </ul>
    </div>
    <div id="content">
        <h2>
            Main heading here
        </h2>
        <p>
            <img class="feature-image" src="fern.jpg" alt="fern" />Lorem ipsum dolor sit amet consect etuer adipi scing elit sed diam nonummy nibh euismod tinunt ut laoreet dolore magna aliquam erat volut. Ut wisi enim ad minim veniam, quis nostrud exerci tation ullamcorper suscipit lobortis nisl ut aliquip ex ea commodo consequat. Duis autem vel eum iriure dolor in hendrerit in vulputate velit esse molestie consequat, vel illum dolore eu feugiat nulla facilisis at vero eros et accumsan et iusto odio dignissim qui blandit praesent luptatum zzril delenit augue duis dolore te feugait nulla facilisi.
        </p>
    </div>
    <div id="extras">
        <h3>
            Related info
        </h3>
        <p>
            Ut wisi enim ad minim veniam, quis nostrud exerci tation ullamcorper suscipit lobortis nisl ut aliquip ex ea commodo consequat.
        </p>
    </div>
</div>
</body>
</html> 
```

**CSS 代码**

```
/* ----------------------------
simple reset
---------------------------- */

html, body, ul, ol, li, form, fieldset, legend
{
    margin: 0;
    padding: 0;
}

h1, h2, h3, h4, h5, h6, p { margin-top: 0; }
fieldset,img { border: 0; }
legend { color: #000; }
li { list-style: none; }
sup { vertical-align: text-top; }
sub { vertical-align: text-bottom; }

table
{
    border-collapse: collapse;
    border-spacing: 0;
}

caption, th, td
{
    text-align: left;
    vertical-align: top;
    font-weight: normal;
}

input, textarea, select
{
    font-size: 110%;
    line-height: 1.1;
}

abbr, acronym
{
    border-bottom: .1em dotted;
    cursor: help;
}

body
{
    margin: 20px;
    color: #000;
    background: #fff;
    font: 90%/1.3 "DejaVu Sans", "URW Gothic L", "Helvetica Neue", Helvetica, Arial, "Microsoft Sans Serif", sans-serif;
}

#container
{
    float: left;
    width: 1000px;
    background: #bbb;
}

#nav
{
    float: left;
    width: 200px;
    background: lime;
}

#content
{
    float: left;
    width: 550px;
    margin: 0 0 0 25px;
    background: yellow;
}

#extras
{
    float: right;
    width: 200px;
    background: gray;
}

.feature-image
{
    float: right;
    margin: 0 0 10px 10px;
}

@media screen and (max-width:999px)
{
    #container { width: 800px; }

    #extras
    {
        clear: left;
        float: none;
        margin: 0 0 0 225px;
        width: 550px;
    }
}

@media screen and (max-width:480px)
{
    #container { width: 400px; }

    #nav
    {
        float: none;
        width: auto;
    }

    #content
    {
        float: none;
        width: auto;
        margin: 0;
    }

    #extras
    {
        float: none;
        width: auto;
        margin: 0;
    }

    .feature-image { display: none; }
} 
```

**演示**

[你可以在CSS3 Media query layout example](http://www.maxdesign.com.au/articles/css3-media-queries/media-sample/)找到一个工作演示。享受！

# jquery - location.reload() 发出警报以重试提交数据

> ID：11437325
> 
> 赞同：1
> 
> 时间：2012-07-11T16:38:40.547
> 
> 标签：jquery, struts2, jquery-ui-dialog

我正在使用 jQuery UI 打开弹出窗口，我想在窗口关闭后刷新父窗口。

在 jQuery 中，代码是

```
$("#submitBtn").click(function(){
   location.reload();
}); 
```

然后页面将出现以下窗口。网址是 https。我怎样才能避免这种情况。

![在此处输入图像描述](../Images/bbdfe4fecd01c429ce542fecbf9eaf7a.png)

提前感谢您的帮助，如果需要任何其他信息，请告诉我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-11T16:52:12.567

也许这会对你有所帮助。你这样调用你的函数`reloadPage();`

```
 function reloadPage()
 {
 window.location.reload()
 } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-17T12:43:34.913

对于我的情况，我删除了 reload() 选项并使用了 jQuery .load 函数。

```
("#refreshDiv").load("actionName #refreshDiv"); 
```

有效。

# jquery - The following JQuery and Javascript does not work correctly in Internet Explorer 6 onwards

> ID：11437326
> 
> 赞同：1
> 
> 时间：2012-07-11T16:38:50.183
> 
> 标签：jquery, ajax, internet-explorer, html, replace

Any idea why the following code will not continually update in IE6 & 8 but works perfectly fine in Chrome and FF.

```
$(document).ready(function () {

        window.setInterval(function () {

            $('div').each(function (index, item) {

                var vm = $(item).text();
                var env = "some url (cant show)";

                $.ajax(env, {
                    URL: env,
                    type: "GET",
                    dataType: "html",
                    success: function (data) {                          
                        var style = $(data).filter('div');
                    $(item).replaceWith(style);

                    },
                    error: function () {
                        $(item).css('background', '#f00');
                    }
                });
            });
        }, 10000);
}); 
```

The divs will change once, then never again. Whereas, in Chrome and FF the divs change every 10 seconds as they are meant too.

Thank you for your help!

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-11T17:02:14.290

尝试编写您的脚本（未测试）...

```
 $(document).ready(function () {

    window.setInterval(function () {

        $('div').each(function (index, item) {

            var vm = $(item).text();
            var env = "some url (cant show);

            $.ajax(env, {

                URL: env,

                type: "GET",

                cache:"false", //NOTICE FALSE!!

                dataType: "html",

                success: function (data) {

                    var style = $(data).filter('div');
                    $(item).replaceWith(style);

                },

                error: function () {

                    $(item).css('background', '#f00');

                }

            });
        });

    }, 10000);

});` 
```

# android - Android LocationManager.isProviderEnabled() 总是返回 false

> ID：11437327
> 
> 赞同：11
> 
> 时间：2012-07-11T16:38:51.517
> 
> 标签：android, locationmanager

我有一个使用网络提供商作为其位置的应用程序。每次应用程序启动时，它都会使用`isProviderEnabled()`LocationManager 中的方法检查网络提供程序是否已启用。

如果它返回 false，我会向用户发出警报以启用 Network Provider，然后使用该应用程序。这个逻辑运行得非常好，除了非谷歌认证的设备有一些例外（不用担心，因为它们通常也没有 Maps API）。最近，一些设备在 ICS 上，现在在 JellyBean 模拟器上，`isProviderEnabled()`即使它已启用，我也会得到一致的“错误”。

我已经开始使用从 Settings.Secure.getString(getContentResolver(), Settings.Secure.LOCATION_PROVIDERS_ALLOWED)) 返回的字符串来查看它是否包含“网络”。这是一个黑客，但它现在正在工作。我希望能够使用`isProviderEnabled()`方法。

有没有人见过这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2017-07-13T05:58:37.690

@naqi @gkris 我也注意到这个问题`isProviderEnabled(LocationManager.GPS_PROVIDER)`正在返回`false`。
对此的解决方案是还要求用户设置`Location Method`to`High Accuracy`而不是`Battery Saving`or`Device Only`

此设置在位置设置下可用，并且在不同设备上具有不同的名称。在我测试过的某些设备上，此设置为 name `Mode`,等`Location Mode`，`Location Method`该值也可以是`High Accuracy`or`GPS`或`GPS, Wifi and Mobile Networks`

开发人员必须在这方面对用户进行培训。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-02-08T20:25:25.800

来自 API 文档：LocationManager.GPS_PROVIDER

> 该提供商使用卫星确定位置。根据条件，此提供程序可能需要一段时间才能返回位置修复。需要权限 ACCESS_FINE_LOCATION。

因此，如果您不需要 ACCESS_FINE_LOCATION 它将返回 false。

# php - 比较两个具有 CSV 的关联数组值 - PHP

> ID：11437328
> 
> 赞同：1
> 
> 时间：2012-07-11T16:38:54.403
> 
> 标签：php, arrays, csv, associative

我有两个关联数组：

```
ArrayA = array( [10] => ten
                [12] => twelve
                [22] => 10
                [30] => 10, 12, 8
         )
ArrayB = array( [10] => net
                [12] => evlewt
                [22] => 11, 12, 10
                [30] => 10
         ) 
```

需要比较两个数组上相同键的值。一些键具有 CSV 值，并且可以在两个数组上。

例如，`[22]`on`ArrayA`应该在 CSV 中选中`ArrayB`。同样，`[30]`应`ArrayB`在 CSV 中检查 in `ArrayA`。其他的应该照常比较`==`

注意：我试图避免在这里循环。我们当然可以使用 Loop 以多种方式做到这一点。我想知道是否有一种快速有效的方法可以在不循环的情况下做到这一点。

编辑：为了进一步澄清，这就是应该如何比较这两者：

```
Is "ten" in ArrayA == "net" in ArrayB?
Is "twelve" in ArrayA == "evlewt" in ArrayB?
Is 10 in ArrayA existing in (11, 12, 10) of ArrayB?
Is (10, 12, 8) of ArrayA containing the 10 ArrayB? 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-11T17:07:56.663

我希望我能正确理解这个问题。如果您首先对数据进行规范化，则可以只比较数组

例如：

```
$a = array(
    10 => 'net',
    12 => 'evlewt',
    22 => '10,12,11',
    30 => '12,10'
);

$b = array(
    10 => 'net',
    12 => 'evlewt',
    22 => '11,12,10',
    30 => '12,10'
);

function normalize(&$value, $key) {
    $value = explode(',', $value);
    sort($value);
    $value = implode(',', $value);
}

array_walk($a, 'normalize');
array_walk($b, 'normalize');

var_dump($a == $b); // outputs true 
```

编辑：为了通过任一数组中的元素是否是另一个数组的子集来评估两个数组，我会将值标准化为数组并使用该`reduce_array()`函数。

```
<?php
$a = array(
    10 => 'net',
    12 => 'evlew',
    22 => '10,12,11',
    30 => '12,10,11'
);

$b = array(
    10 => 'net',
    12 => 'evlewt',
    22 => '11,12,10',
    30 => '12,10'
);

function normalize(&$value, $key) {
    $value = explode(',', $value);
}

function compare_value($v, $w) {
    if (false === $v) return false;
    global $a, $b;
    if(is_subset($a[$w], $b[$w]) || is_subset($b[$w], $a[$w]))
        return true;
    return false;
}

function is_subset($needle, $haystack) {
     return count(array_intersect($needle, $haystack)) === count($needle);
}

array_walk($a, 'normalize');
array_walk($b, 'normalize');

$result = array_reduce(array_keys($a), 'compare_value', true);
var_dump($result); // outputs false

$a = array(
    10 => 'net',
    12 => 'evlewt',
    22 => '10',
    30 => '12,10,11'
);

$b = array(
    10 => 'net',
    12 => 'evlewt',
    22 => '11,12,10',
    30 => '12,10'
);

array_walk($a, 'normalize');
array_walk($b, 'normalize');

$result = array_reduce(array_keys($a), 'compare_value', true);
var_dump($result); // outputs true 
```

# mysql - 生成带有更改列名的 MySQL 插入

> ID：11437330
> 
> 赞同：0
> 
> 时间：2012-07-11T16:39:01.127
> 
> 标签：mysql, migration, phpmyadmin

我需要从我的旧用户数据库迁移到一个新的....但幸运的是密码和盐字段的值在两者上是相同的，但列名不同（在旧表上：用户密码->秘密，在新表上：新用户密码->盐）

如何从现有的用户数据生成插入转储？每当我做类似的事情时

```
SELECT id,
  username,
LOWER(username) AS username_canonical,
  email,
  LOWER(email) AS email_canonical,
  passhash AS 'password',
  secret AS salt,
  1 AS enabled,
   'a:0:{}' AS roles,
   0 AS credentials_expired,
   0 AS expired,
   0 AS locked,
   uploaded,
   downloaded,
   torrent_pass,
   0 AS torrent_pass_version
FROM
  temp2.users AS fos_user
WHERE enabled = 'yes' ; 
```

我可以看到 phpMyAdmin 中正确列出的值......但是当我导出结果时，我看到旧结构中的插入：

```
INSERT INTO `fos_user` (`id`, `username`, `username`, `email`, 
    `email`, `passhash`, `secret`, `enabled`, `a:0:{}`, 
    `credentials_expired`, `expired`, `locked`, `uploaded`, 
    `downloaded`, `torrent_pass`, `torrent_pass_version`) 
VALUES.... 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-11T16:44:28.320

为什么不同时执行 INSERT 和 SELECT 类似这样的操作：

```
INSERT INTO `fos_users` (username, password, salt ...)
SELECT LOWER(username), passhash, secret, ...
FROM users; 
```

当然，这假设您可以在新数据库中拥有旧数据集，至少暂时......

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-11T16:50:20.877

如果您使用 phpAdmin GUI 导出表，它将使用表的原始模式。为了使用所需的架构导出它，请使用 SELECT INTO 文件语法：[http ://dev.mysql.com/doc/refman/5.1/en/select-into.html](http://dev.mysql.com/doc/refman/5.1/en/select-into.html)

# php - PHP/Regex：从 youtube url-嵌入式代码中提取视频 ID

> ID：11437336
> 
> 赞同：4
> 
> 时间：2012-07-11T16:39:20.470
> 
> 标签：php, regex

我正在尝试从 youtube url 输入中获取嵌入式代码。我遇到了这个[答案](https://stackoverflow.com/questions/5830387/php-regex-find-all-youtube-video-ids-in-string)，但现在我将该答案应用于我的代码，我没有得到任何结果。我的目标是让正则表达式将网址变成这样：[http://www.youtube.com/watch?v=videoid](http://www.youtube.com/watch?v=videoid)。我怎样才能让正则表达式函数真正与我的代码一起工作？

```
<html>
    <form method="post" action="">
    URL:&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
    <input type="text" value="<?php $text ?>" name="yurl"> <!--$vari-->
    <br>
    <!--<br>
    Height:&nbsp;
    <input type="text" value="<?php $hth ?>" name="yheight"> $hth
    <br>-->
    <!--<br>
    Width:&nbsp;&nbsp;
    <input type="text" value="<?php $wdth ?>" name="ywidth"> $wdth
    <br>
    <br>-->
    Autoplay:&nbsp;
    <input type="checkbox" value="<?php $auto1; $auto2; ?>" name="yautop">  <!--$auto1 $auto2-->
    <br>
    <input type="submit" value="Generate Embed Code" name="ysubmit">
    <br>
    </form>
</html> 
```

**PHP**

```
<?php

$vari ='';

if($_POST)
{

    function linkifyYouTubeURLs($vari) {
        $vari = preg_replace('~
            # Match non-linked youtube URL in the wild. (Rev:20111012)
            https?://         # Required scheme. Either http or https.
            (?:[0-9A-Z-]+\.)? # Optional subdomain.
            (?:               # Group host alternatives.
              youtu\.be/      # Either youtu.be,
            | youtube\.com    # or youtube.com followed by
              \S*             # Allow anything up to VIDEO_ID,
              [^\w\-\s]       # but char before ID is non-ID char.
            )                 # End host alternatives.
            ([\w\-]{11})      # $1: VIDEO_ID is exactly 11 chars.
            (?=[^\w\-]|$)     # Assert next char is non-ID or EOS.
            (?!               # Assert URL is not pre-linked.
              [?=&+%\w]*      # Allow URL (query) remainder.
              (?:             # Group pre-linked alternatives.
                [\'"][^<>]*>  # Either inside a start tag,
              | </a>          # or inside <a> element text contents.
              )               # End recognized pre-linked alts.
            )                 # End negative lookahead assertion.
            [?=&+%\w-]*        # Consume any URL (query) remainder.
            ~ix', 
            '<a href="http://www.youtube.com/watch?v=$1">YouTube link: $1</a>',
            $vari);
        return $vari;
    }

    $vari       = $_POST['yurl'];
    $hth        = 300; //$_POST['yheight'];
    $wdth       = 500; //$_POST['ywidth'];
    $is_auto    =   0;

    $step1 =explode ('v=', $vari);
    $step2 =explode ('&amp;',$step1[1]);

    if(isset($_POST['yautop'] ))
    {
        if($_POST['yautop'] == 1)
            $is_auto    =   1;
    }
    $auto1  = '?autoplay='.$is_auto;
    $auto2  = '&autoplay='.$is_auto;
?>

<p>Iframe Result:</p>   
<?
//Iframe code with optional autoplay

echo  ('<iframe src="http://www.youtube.com/embed/'.$step2[0].'" frameborder="0" width="'.$wdth.'" height="'.$hth.'"></iframe>');
?> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-11T16:55:18.910

也许我在这里遗漏了一些东西，但它不会更容易使用[`parse_url`](http://php.net/manual/en/function.parse-url.php)并且[`parse_str`](http://www.php.net/manual/en/function.parse-str.php)：

```
$url = 'http://www.youtube.com/watch?v=Imh0vEnOMXU&feature=g-vrec';    // some youtube url
$parsed_url = parse_url($url);
/*
 * Do some checks on components if necessary
 */
parse_str($parsed_url['query'], $parsed_query_string);
$v = $parsed_query_string['v']; 
```

请参阅[codepad 上的示例](http://codepad.org/kl2YvRRM)。

当然，如果您输入的是 youtube 提供的完整代码片段，您将需要一个 DOM 解析器来获取该 url。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-11T16:45:04.400

您似乎忘记在 HTML 中使用“echo”来输出变量。如果将内联 PHP 更改为：

```
<?php echo $text ?> 
```

和：

```
<?php echo $auto1 . $auto2; ?> 
```

最后一个我把它改成把两条绳子剪在一起，他们似乎试图做同样的事情，所以也许你只需要其中一个，但如果你想让他们两个一个接一个地打印，我把它改成的应该可以为了那个原因。

这有帮助吗？

# sharepoint - Get-SPTimerJob cmdlet 错误地列出了 SharePoint 计时器作业？

> ID：11437339
> 
> 赞同：2
> 
> 时间：2012-07-11T16:39:23.867
> 
> 标签：sharepoint, powershell, sharepoint-2010, sharepoint-timer-job

我正在尝试通过 powershell 为我的 SharePoint 2010 Web 应用程序之一修改特定的计时器作业“磁盘配额警告”。但是我找不到我想要的工作。

当我进入中央管理 -> 监控 -> 查看作业定义时，我找到了我想要的 Web 应用程序，并且只有一个名为“磁盘配额警告”的作业以及该应用程序的大约 15 个其他作业。这是期望的行为。

当我尝试通过 powershell 进行操作时出现问题

```
PS > Get-SPTimerJob -webapplication "Web application name" 
```

它返回大约 20 个名称为“job-diskquota-warning”的作业。

我的问题是两个方面，

1.  当我只有一个具有该名称的作业时，为什么它显示 20 个磁盘配额作业？
2.  该 Web 应用程序的所有其他工作在哪里？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-12T07:43:16.683

尝试使用 Get-SPTimerJob 的 -Identity 命令 arg 正确识别计时器作业

```
Get-SPTimerJob -WebApplication "ApplicationPoolName" -Identity "job-diskquota-warning" 
```

# c++ - 监视进程内的键盘事件（进程范围）

> ID：11437345
> 
> 赞同：0
> 
> 时间：2012-07-11T16:39:38.710
> 
> 标签：c++, xcode, macos, cocoa, macos-carbon

我可以按照以下说明安装系统范围的键盘监视器：

```
CGEventRef eventCallback(CGEventTapProxy proxy, CGEventType type,
    CGEventRef event, void *userData)
{
}

CFMachPortRef eventTap = CGEventTapCreate(kCGHIDEventTap,
    kCGHeadInsertEventTap, kCGEventTapOptionDefault,
    kCGEventKeyDown,
    &eventCallback,
    NULL);
if(eventTap)
{
    CFRunLoopSourceRef eventRunLoopSourceRef =
        CFMachPortCreateRunLoopSource(NULL, eventTap, 0);
    CFRelease(eventTap);
    CFRunLoopAddSource(CFRunLoopGetCurrent(), eventRunLoopSourceRef,
        kCFRunLoopDefaultMode);
    CFRelease(eventRunLoopSourceRef);
} 
```

此代码的缺点是它需要在“系统偏好设置”中激活“通用访问”并监视所有进程（我不需要它）。

我想监视**我的进程中**的键盘事件。激活“通用访问”怎么可能以及是否需要？谢谢你。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-22T09:17:21.573

我想你想要`NSEvent`的`addLocalMonitorForEventsMatchingMask:handler:`

```
self.eventMonitor = [NSEvent addLocalMonitorForEventsMatchingMask:NSKeyDownMask 
    handler:^(NSEvent *event) {
        NSLog( @"keyDown event!" );
        return event;
    }]; 
```

请参阅[文档](http://developer.apple.com/library/mac/#documentation/Cocoa/Reference/ApplicationKit/Classes/NSEvent_Class/Reference/Reference.html#//apple_ref/occ/clm/NSEvent/addLocalMonitorForEventsMatchingMask%3ahandler%3a)。这不需要打开通用访问。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-22T03:23:34.360

如果您不必监视其他进程，那么您应该能够使用正常事件来查看键盘。

在 Carbon 中，为`kEventRawKeyDown`（比如说）安装一个处理程序`kEventClassKeyboard`，例如在应用程序或窗口级别。

在 Cocoa 中，在子类（例如您的子类或特定子类`keyDown:`）上实现或任何您需要的方法。`NSResponder``NSApplication``NSWindow`

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-11T17:50:55.380

```
ProcessSerialNumber psn = { 0 };
GetCurrentProcess( & psn );
CGEventTapCreateForPSN( & psn, ... ); 
```

这是仅在当前进程中侦听事件的进程范围的方式，而不是系统范围的。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-22T04:31:47.420

在 Cocoa 中，我认为您希望继承 NSApplication 并覆盖`-[NSApplication sendEvent:]`。

# python - 在 python Gtk3 中创建带边框的标签是否有比将其放入 Frame 更简单的方法？

> ID：11437350
> 
> 赞同：0
> 
> 时间：2012-07-11T16:39:51.460
> 
> 标签：python, label, border, gtk3

我的意思是更简单 - 我可以定义一种样式或其他东西并将其应用于我程序中的所有标签吗？我有很多标签，我不想输入太多。我听说过“Pango Style”，但我可以一次将它应用于所有标签小部件吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2017-03-14T14:11:21.487

你可以[add_provider_for_screen](https://lazka.github.io/pgi-docs/#Gtk-3.0/classes/StyleContext.html#Gtk.StyleContext.add_provider_for_screen)。

```
#!/usr/bin/env python

import gi
gi.require_version('Gtk', '3.0')
from gi.repository import Gtk, Gdk

def add_provider(widget):
    screen = widget.get_screen()
    style = widget.get_style_context()
    provider = Gtk.CssProvider()
    provider.load_from_data('label {\
    border: 1px solid #000000;\
    margin: 2px;\
    }'.encode('utf-8'))
    style.add_provider_for_screen(screen, provider, Gtk.STYLE_PROVIDER_PRIORITY_USER)

window = Gtk.Window()
label = Gtk.Label()
label2 = Gtk.Label()
box = Gtk.VBox()
box.add(label)
box.add(label2)
window.add(box)

label.set_label("asd1")
label2.set_label("asd2")

window.connect("realize", add_provider)
window.connect("delete-event", Gtk.main_quit)

window.show_all()

Gtk.main() 
```

`add_provider`只需要运行一次，但在实现小部件之后（无论您将添加到哪个小部件）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-23T18:48:59.100

术语：“很多标签”是相对的。我们说的是 14 还是 84？如果它接近 84，您可能应该使用 Glade 创建界面，然后设置框架 x-pad 和 y-pad 属性。使用 gtk3 的 CSS，您必须将任何标签打包在框架中，以便边距、填充或它们的任何变体（边距顶部、填充底部）工作。

GtkFrame 是 GtkMisc 的子代。GtkMisc 有函数 gtk_misc_set_padding()。您可以在标签上使用该功能，而无需将它们打包成框架。但是您必须为每个标签设置它。

我不知道 Python 只有 C 和一些 C++，但你可以这样做：

1) 为所有以 label0 开头的标签创建一个枚举。（我认为python中的namedtuple）我说使用枚举的原因是以后要跟踪没有它们的所有标签会变得非常困难。

2) 创建一个指向 GtkWidget 的指针数组，每个标签一个。

3) 使用指向 GtkWidget 的指针创建标签，并以枚举为索引。（这里是真正需要枚举的地方）

4) 创建一个带有 gtk_misc_set_padding() 的 for 循环。使用 GtkWidget 数组作为 gtk_misc_set_padding() 中的参数。循环遍历每个标签，设置其填充。

我可以提供一个示例，但如果您不了解 C，它可能不会有用。如果您仍然喜欢它，请告诉我。

# c - mingw 到 cygwin

> ID：11437352
> 
> 赞同：1
> 
> 时间：2012-07-11T16:39:54.030
> 
> 标签：c, cygwin, mingw

我是cygwin的新手。不过我目前使用过mingw，但是不支持fork()，所以需要切换到cygwin。我在我的 mingw（编程语言 C）中创建了一个 build.bat 文件：

```
gcc -o mask mask.c -pg -I/c/opencv/build/include  -lopencv_core231 -lopencv_highgui231 -lopencv_imgproc231 -L. -L/c/opencv/build/x86/mingw/lib 
```

任何人都可以建议我如何在 cygwin 上运行这个 .bat 文件或将我推荐给一个站点。

如何使用 cygwin 运行 mingw 可执行文件？任何参考将不胜感激。

谢谢你的帮助

埃蒙

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-11T17:00:09.367

我相信 cygwin 可以运行`cmd`（DOS 命令解释器），然后它可以运行您的批处理文件。问题是`cmd`无法使用批处理脚本中的非 Windows 路径。尝试运行：`cmd /c myBuildFile.bat`在 cygwin 提示符下，您应该明白我的意思。

最好使用 cygwin 风格的工具来制作构建脚本。您应该[`make`](http://en.wikipedia.org/wiki/Make_%28software%29)在您的路径上有程序，这将允许您编写简单和更复杂的构建脚本。

或者，您可以将`.bat`构建脚本转换为 shell 脚本，如下所示：

```
#!/bin/sh
gcc -o mask mask.c -pg -I/c/opencv/build/include  -lopencv_core231 -lopencv_highgui231 -lopencv_imgproc231 -L. -L/c/opencv/build/x86/mingw/lib 
```

将其命名为任何名称，例如 myBuildScript.sh，然后使用以下命令使其可执行：`chmod u+x myBuildScript.sh`。

# drupal - 根据下拉菜单中的选项在 Drupal 中创建内容

> ID：11437356
> 
> 赞同：2
> 
> 时间：2012-07-11T16:40:03.907
> 
> 标签：drupal, drupal-7, drupal-views, content-type

我正在开发一个需要“职业”页面的 Drupal 站点。我有一个包含 20 多个工作的列表，以及 30 个左右的可以提供这些工作的位置。

我要做的就是做到这一点，当有工作可用时，需要做的就是用户选择职位名称和可用位置，它将使用职位描述和其他信息创建发布我有那个位置的信息。

我遇到的另一个问题是制作它，所以我可以有多个实例......例如。如果相同的工作在两个或多个位置可用。

我一直在努力思考我将如何完成这项工作，但我却一无所获。如果有人有想法指出我正确的方向，将不胜感激。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-11T17:00:43.980

听起来像是一个很常见的用例；如果是我，我会这样处理：

*   创建“工作”内容类型
*   添加新的“位置”词汇
*   将“工作”内容类型上的术语参考字段添加到“位置”词汇表中，具有无限值（或您希望每个工作允许的最大位置数）。
*   为您的管理员创建一个自定义表单，例如：

    ```
    function MYMODULE_add_job_form($form, &$form_state) {
      $form['title'] = array(
        '#type' => 'textfield',
        '#title' => t('Title'),
        '#maxlength' => 255,
        '#required' => TRUE
      );

      // Load the vocabulary (the machine name might be different).
      $vocabulary = taxonomy_vocabulary_machine_name_load('location');

      // Get the terms
      $terms = taxonomy_get_tree($vocabulary->vid);

      // Extract the top level terms for the select options
      $options = array();
      foreach ($terms as $term) {
        $options[$term->tid] = $term->name;
      }

      $form['locations'] = array(
        '#type' => 'select',
        '#title' => t('Locations'),
        '#options' => $options,
        '#multiple' => TRUE,
        '#required' => TRUE
      );

      $form['submit'] = array(
        '#type' => 'submit',
        '#value' => t('Add job')
      );

      return $form;
    } 
    ```

*   为表单创建一个自定义提交处理程序，以编程方式添加新节点：

    ```
    function MYMODULE_add_job_form_submit($form, &$form_state) {
      $location_tids = array_filter($form_state['values']['locations']);

      $node = new stdClass;
      $node->type = 'job';
      $node->language = LANGUAGE_NONE;
      node_object_prepare($node);

      $node->title = $form_state['values']['title'];
      $node->field_location_term_ref[LANGUAGE_NONE] = array();

      foreach ($location_tids as $tid) {
        $node->field_location_term_ref[LANGUAGE_NONE][] = array(
          'tid' => $tid
        );
      }

      node_save($node);

      $form_state['redirect'] = "node/$node->nid";
    } 
    ```

显然，您需要为该表单添加页面回调，并且可能需要进行一些小的更改（字段名称等），但它应该为您提供一个很好的起点。您还需要在某些时候加载位置分类术语以提取您提到的描述信息......您可以使用它`taxonomy_term_load()`来执行此操作。

# javascript - jQuery自动向下滚动，暂停，再次向下和向上？

> ID：11437359
> 
> 赞同：1
> 
> 时间：2012-07-11T16:40:09.333
> 
> 标签：javascript, ajax, jquery

我有一个基本上包含一个大表格的网页，我使用 ajax 每分钟自动创建和填充表格。基本的代码结构是这样的：

```
$(document).ready(function(){

   setInterval(function(){
        $.ajax({
           //code to call backend, get the data, 
           //create/populate the table, and refresh every minute
        });
   });

} 
```

由于表格很长，我想让它自动向下滚动，暂停几秒钟，继续向下滚动，再次暂停。当它到达终点时，它会向上滚动，暂停......或者一旦它到达终点，从顶部开始并重新开始。在滚动时，我还想将其表头行固定在顶部。

我的问题是：

1.  是否可以使用一些 jquery 函数或 javascript 来做到这一点？
2.  这个自动滚动功能会如何干扰 ajax？说它正在向下滚动，是时候刷新 ajax 表了？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-11T16:43:50.413

> 1.  是否可以使用一些 jquery 函数或 javascript 来做到这一点？

使用 jQuery/javascript 很容易完成。

> 1.  这个自动滚动功能会如何干扰 ajax？说它正在向下滚动，是时候刷新 ajax 表了？

我会把你的代码放在你的 ajax 成功中为滚动设置动画。将滚动动画设置为比 AJAX 间隔更短的时间间隔。

像这样的东西

```
 setInterval(function(){

        $.ajax({
            type    : "",
            dataType: "",
            url     : "",
            data    : "",
            success    : function(data)
            {
                // create/append data to table

                // animate scroll to bottom of table
                $("#my_table").animate({ scrollTop: $("#my_table").height() }, "slow");
            }
        });

   }); 
```

不确定滚动代码是否 100% 正确，但它应该让你开始。

# objective-c - 如何编写和编译 Objective-C 代码？

> ID：11437361
> 
> 赞同：17
> 
> 时间：2012-07-11T16:40:20.970
> 
> 标签：objective-c, linux, clang

如何在 Linux 中编写和编译 Objective-C 代码？

我听说过 Clang，但我找不到任何关于 Clang/LLVM/Objective-C 的示例/教程。

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2015-07-28T15:34:02.413

```
sudo apt-get install build-essential gobjc gobjc++ gnustep gnustep-devel libgnustep-base-dev -y
vi *.m
gcc `gnustep-config --objc-flags` *.m -lgnustep-base -lobjc 
```

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2012-07-11T16:46:24.380

您下载并构建 LLVM 作为编译器基础架构；然后下载并构建 CLANG 前端来编译 C/C++ 和 Objective C/C++。

我想您可以尝试遵循此[快速](http://clang.llvm.org/get_started.html)入门指南。请注意，在使用这些语言时，Clang 实际上可以取代 GCC。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-07-11T20:25:42.580

看看[http://www.gnustep.org/](http://www.gnustep.org/)他们有使用 Objective-C 2.0 for LINUX 开发的工具。源文件和如何在几个 LINUX 发行版上安装它的提示在这里：[http ://www.gnustep.org/resources/sources.html](http://www.gnustep.org/resources/sources.html)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-07-05T21:56:28.830

只需运行此页面上显示的以下脚本：

[https://gist.github.com/nicerobot/5652802](https://gist.github.com/nicerobot/5652802)

注意：在第一次编译过程中会报错。解决方案就是重新编译它......它的工作原理！这是逐步安装的博客条目，但我真的推荐该脚本！

[http://blog.tlensing.org/2013/02/24/objective-c-on-linux-setting-up-gnustep-clang-llvm-objective-c-2-0-blocks-runtime-gcd-on- ubuntu-12-04/#comment-54284](http://blog.tlensing.org/2013/02/24/objective-c-on-linux-setting-up-gnustep-clang-llvm-objective-c-2-0-blocks-runtime-gcd-on-ubuntu-12-04/#comment-54284)

问候

# java - 按引用/值传递 - 简单示例

> ID：11437363
> 
> 赞同：8
> 
> 时间：2012-07-11T16:40:35.090
> 
> 标签：java

我知道这个问题已经解决了很多次——但是我的 Java/C++ 知识太薄弱了，我几乎无法理解答案:-( ...我真正想要的只是一个超级简单的例子。

在 C++ 中，我可以编写以下内容：

```
void func()
{
  int x = 3;
  add_one(x);
  // now x is 4.
}
void add_one(int &var)
{
  var++;
} 
```

我现在想看到的是用java达到同样效果的最简单的方法。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-07-11T16:42:06.857

你不能直接。最接近的方法是将值放入对象中，然后将引用（按值，因此引用被复制）传递给方法。

```
void func()
{
  int x = 3;
  int[] holder = [x];
  add_one(holder);
  // now holder[0] is 4\.  x is still 3.
}

// container here is a copy of the reference holder in the calling scope.
// both container and holder point to the same underlying array object
void add_one(int[] container)
{
    container[0]++;
} 
```

这里我使用了一个数组，但是包装器可以是任何对象。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-11T16:49:16.067

在 java 方法中，参数是*按值传递的*，不能在函数中更改。您必须将 int - 或任何其他原始类型 - 包装在 Object 或数组中。传递对象或数组作为方法参数传递可用于修改对象的引用。

Java 已经为原始类型提供了基于对象的包装器，例如[Integer](http://docs.oracle.com/javase/6/docs/api/java/lang/Integer.html)，但这些在设计上是不可变的。一些库提供了这些包装器的[可变版本](http://commons.apache.org/lang/api-2.4/org/apache/commons/lang/mutable/MutableInt.html)；您也可以创建自己的：

```
public class MutableInt
{
    private int val;

    public MutableInt(int val)
    {
        this.val = val;
    }

    public void setValue(int newVal)
    {
        this.val = newVal;
    }

    public int getValue()
    {
        return this.val;
    }
}

void func()
{
    int x = 3;
    MutableInt wrapper = new MutableInt(x);
    add_one(wrapper);
}

void add_one(MutableInt arg)
{
    arg.setValue(arg.getValue() + 1);
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-11T16:42:15.683

你不可以做这个。Java 只是按值传递。原语是显而易见的，但传递给对象的东西是引用，而不是对象本身。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-11T17:37:53.680

正如您从其他答案中看到的那样，Java 纯粹是按值传递。对象通过一些所谓的“值引用”传递。由于Java中的对象只是一个指针引用，因此您可以将“值”视为对象在堆上的地址。因此，当您进行方法调用时，您将“值”（也称为地址）复制到方法参数：

```
Object x = new Object();
foo(x); 
```

## 在对象创建期间

堆 --> 分配对象 (5000)

## 变量声明

堆栈 --> 分配局部变量 (1000)

## 变量赋值

堆栈地址 1000 设置为 5000（指向对象实例）

所以你可以看到这里有两个独立的内存分配。变量的“值”被认为是它在堆上的地址。

## 方法调用

堆栈 --> 分配方法参数 8000

堆栈地址 8000 设置为与传递的参数 5000 相同的值

这就是为什么如果您在方法中重新分配对象实例，它不会传播回调用者。您将更改堆栈位置 8000 处的堆位置。调用方法的堆栈位置 1000 仍然具有值 5000（原始对象实例）。

在 C 中这样想：

```
void method(myobject * obj); 
```

您当然可以更改“obj”的字段，并且可以在本地执行此操作：

```
obj = new myobject(); 
```

但是调用者仍然会看到它传递的原始值。

Java 没有与 & 引用运算符类似的东西。

并且有内置的类可以用于您的目的。AtomicInteger、AtomicLong 等......是可变的，但您可能会因涉及同步而遭受性能损失。

我会推荐一个通用的 ValueHolder 类来解决您想要模拟通过引用传递的所有情况：

```
public class ValueHolder<T> {
    private T value;
    // getter/setter/constructor
} 
```

* * *

## 回答 #5

> 赞同：-3
> 
> 时间：2012-07-11T16:44:43.523

```
public int getOneMore(int val) {
  return val + 1;
} 
```

* * *

## 回答 #6

> 赞同：-3
> 
> 时间：2012-07-11T16:51:00.067

Java 允许对象的引用复制和原始类型（int、float 等）的 vlaue 复制。默认情况下是这样，并且不会更改。如果您需要在函数中更改 int 的值，则可以使用 Integer 类

# jquery - 将图像添加到 dom 并执行 .load

> ID：11437367
> 
> 赞同：3
> 
> 时间：2012-07-11T16:40:53.347
> 
> 标签：jquery, image, load

好的，所以这很奇怪。以下代码适用于所有浏览器，但在开发人员工具中将其更改为 IE8 时，IE9 除外。

```
var img = $('<img/>').load(function (e) {
    $('.md').append(e.target);
}).attr({ 'id': 'imgprofile', 'src': "http://upload.wikimedia.org/wikipedia/commons/thumb/2/28/HelloWorld.svg/512px-HelloWorld.svg.png", 'style': 'border:2px solid #a8a7a7;' }); 
```

这是一个例子：http: [//jsfiddle.net/RZeY5/5/](http://jsfiddle.net/RZeY5/5/)

如您所见，当 .load 事件完成（仅在 IE8 模式下）而不是将图像添加到 dom 时，会发生一些事情并且整个屏幕变白（在 jsfiddle 示例中，iframe 变白）。

在花了几个小时试图理解我的代码有什么问题（这是一个非常长的 JS 文件......）之后，我设法把它放到了这`$('.md').append(e.target);`条线上，但我不知道现在该怎么做......这是我的错？这是 JQuery 的错吗？是IE8的错吗？我能做些什么来解决这个问题？

请注意，您必须处于 IE8 模式才能发生“错误”。

****编辑 **** 我只是这样它也发生在 IE7 模式下......**

 *** * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-11T16:51:09.143

在那些 IE 中，`e.target === document`and`e.target`无论如何都不合适，您应该使用`e.currentTarget`or `this`。

[http://jsfiddle.net/RZeY5/7/](http://jsfiddle.net/RZeY5/7/)

那些较旧的 IE 使用`srcElement`, 在这种情况下恰好是`null`jQuery 将其分配给`document`在这种情况下。

```
 // Fix target property, if necessary (#1925, IE 6/7/8 & Safari2)
    if ( !event.target ) {
        event.target = originalEvent.srcElement || document;
    } 
```**

# c++ - 如何将模板类容器的迭代器传递给函数？

> ID：11437375
> 
> 赞同：4
> 
> 时间：2012-07-11T16:41:28.163
> 
> 标签：c++, templates

这是 James 对这个问题的回答的后续行动：[Flattening iterator](https://stackoverflow.com/questions/3623082/flattening-iterator/3623597)

我尝试更改 James 的解决方案，以便它可以处理模板类。原来我在调用函数时卡住了（那里是“flatten”，这里是“foo”）。当我专门针对每个模板参数时它起作用了，这是可能的，因为只有三个 (1,2,3) 会发生。一般情况不编译。请参阅下面的代码和 gcc 的错误消息。

```
#include <iterator>
#include <vector>

template <int I> 
class A{};

template <int I>
void foo( typename std::vector< A <I> >::iterator first ,
          typename std::vector< A <I> >::iterator last) {}

//void foo( typename std::vector< A <1> >::iterator first , 
//          typename std::vector< A <1> >::iterator last) {} // this works

int main()
{
  std::vector< A<1> > v;
  foo(v.begin(),v.end());
  return 0;
} 
```

使用 gcc 4.6.3 编译后的错误消息：

```
test_templ_func.cc: In function ‘int main()’:
test_templ_func.cc:15:24: error: no matching function for call to ‘foo(std::vector<A<1> >::iterator, std::vector<A<1> >::iterator)’
test_templ_func.cc:15:24: note: candidate is:
test_templ_func.cc:8:6: note: template<int I> void foo(typename std::vector<A<I> >::iterator, typename std::vector<A<I> >::iterator) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-11T16:51:23.113

这些是依赖类型参数，编译器无法解析它们，例如： [模板类中具有依赖类型参数的模板函数](https://stackoverflow.com/questions/1751915/template-function-with-dependent-type-parameters-within-template-class)

您可以使用[http://en.cppreference.com/w/cpp/types/enable_if](http://en.cppreference.com/w/cpp/types/enable_if)并使用某些类型特征模板来解决问题。

[模板推导指南](http://publib.boulder.ibm.com/infocenter/comphelp/v8v101/index.jsp?topic=/com.ibm.xlcpp8a.doc/language/ref/template_argument_deduction.htm)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-13T19:06:01.520

模板参数推导适用于许多情况，但它的作用有限。你已经达到了极限之一。

Stephan Lavavej（目前为 Microsoft 从事 STL 工作）刚刚制作了一个[关于模板参数推导的精彩小视频](http://channel9.msdn.com/Series/C9-Lectures-Stephan-T-Lavavej-Core-C-/Stephan-T-Lavavej-Core-C-2-of-n)。虽然他没有明确谈论您的示例，但他确实涵盖了一些类似的情况，并很好地概述了模板参数推导可以做什么。

# java - luabind 和 java

> ID：11437377
> 
> 赞同：0
> 
> 时间：2012-07-11T16:41:34.217
> 
> 标签：java, lua

我想将 Java 类公开给 Lua 等。对于 C/C++，有 luabind 项目。但我还没有找到类似的Java。有没有类似 luabind for Java 的项目？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-11T16:47:28.523

也有一些可用于 JAVA。这里：

*   [LuaJava](http://www.keplerproject.org/luajava/)
*   [jnaLua](https://github.com/dafrito/jna-lua)
*   [jnLua](http://code.google.com/p/jnlua/)

# visual-studio-2010 - UberSvn 远程访问存储库

> ID：11437380
> 
> 赞同：1
> 
> 时间：2012-07-11T16:42:01.513
> 
> 标签：visual-studio-2010, svn, repository, tortoisesvn, ubersvn

我刚刚在我的 Windows 计算机上安装了 uberSVN。我创建了一个存储库，并且能够在我的本地计算机上访问它。我将如何从另一台计算机访问此存储库？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-11T19:16:11.250

您所在的机器需要能够找到服务器，这可能取决于 DNS。

在服务器上的 Windows 命令行中，键入`ipconfig`. 它应该向您显示服务器的 IPv4 地址。在您的本地计算机上，使用 URL `http://xx.xx.xx.xx/svn/<repo>`，其中`xx.xx.xx.xx`是 Subversion 服务器的 IP 地址，并且`<repo>`是您的 Subversion 存储库的名称。

您可以与您的网络人员讨论如何配置 DNS，因此您的 Subversion 服务器有一个实际名称，而不仅仅是一个 IP 地址。您还可以`C:\Windows\System32\drivers\etc\hosts`在本地 Windows 机器上编辑文件文件，为您的 Subversion 服务器命名。假设 Subversion 服务器的 IP 地址是 10.1.0.34 并且您的存储库是`foo`，您可以输入：

```
svn co http://10.1.0.34/svn/foo/trunk foo-trunk 
```

或者，您可以``C:\Windows\System32\drivers\etc\hosts`像这样在本地 Windows PC 上编辑文件：

```
10.1.0.34       svnserver 
```

然后使用：

```
svn co http://svnserver/svn/foo/trunk foo-trunk 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-11T18:12:17.143

如果您的机器在同一个网络中，请使用您的机器 ip 地址作为 svn 服务器主机（[torttoise 中存储库的 URL](http://codinghorror.typepad.com/.a/6a0120a85dcdae970b0120a86dd495970b-pi)）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-12T09:35:17.250

当您在 uberSVN 中设置存储库时，会显示为远程访问提供的 url（或者您可以在之后从存储库选项卡中找到它）。

通常是[http://your.ip.address:9880/reponame](http://your.ip.address:9880/reponame)

# android - Android simpledateformat时间检查

> ID：11437383
> 
> 赞同：0
> 
> 时间：2012-07-11T16:42:17.337
> 
> 标签：android, simpledateformat

我试图制作一个签入签出功能，用户在指定时间之前无法签入。在这个例子中，我会说他们要到晚上 10:00 才能办理入住

schedule_start string = 10:00 24 小时制

如果用户尝试在 10:00 之前签到，则会出现一个警告对话框，告诉他们要早点并尝试在 10:00 之前签到

我的问题是警报对话框总是出现，即使在指定的时间之后。

有人可以帮助我朝着正确的方向前进吗？

```
 SimpleDateFormat parserSDF = new SimpleDateFormat("k:m");   

    try {
        Date d = parserSDF.parse(schedule_start);   
        Calendar now = Calendar.getInstance();      
        Date CurrentTime = now.getTime(); 

        if (d.before(CurrentTime))  { 

            tooearlytocheckin = new AlertDialog.Builder(
                    screen1.this).create(); 
            WindowManager.LayoutParams lp = tooearlytocheckin.getWindow().getAttributes();
            lp.dimAmount = .30f; 
            tooearlytocheckin.getWindow().setAttributes(lp);
            tooearlytocheckin.getWindow().addFlags(WindowManager.LayoutParams.FLAG_DIM_BEHIND);
            tooearlytocheckin.setTitle("              WARNING");
            tooearlytocheckin.setCancelable(false);
            tooearlytocheckin.setMessage("It is still too early for you to check in." + " Try back at " + (schedule_start));

            tooearlytocheckin.setButton("OK", new DialogInterface.OnClickListener() {

                @Override
                public void onClick(DialogInterface dialog, int which) {

                    DefaultWidgetVisibilityGONE();
                    CancelInButtonInstructions();  // <--- Use this setting for displaying view after pressing Okay

                    vib.vibrate(40);
                }
            });
            tooearlytocheckin.show();

            if (d.after(CurrentTime))   {
            CheckInToggleButtonInstructions();
            }
        }

    } catch (java.text.ParseException e1) {                                         
        e1.printStackTrace();                   
    }   
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-11T17:37:43.287

这里有几个指针：

```
SimpleDateFormat parserSDF = new SimpleDateFormat("k:m"); 
```

通过使用`k`，您要求 1-24 小时的时间，而不是 0-23 ......我相信你想要`HH:mm`。

```
Date d = parserSDF.parse("10:00"); 
```

这会将小时和分钟设置为上午 10 点，但日期未指定，因此默认为：1-1-1970...`d`总是之前，`CurrentTime`因为 1970 < 2012。您可以简单地调用`new Date()`以检索当前日期和时间，然后设置适当的时间的一天，但所有 Date.set() 方法都被弃用，有利于 Calendar 对象。所以让我们切换到 Calendar 类：

```
Calendar current = Calendar.getInstance();

Calendar scheduled = Calendar.getInstance();
scheduled.set(Calendar.HOUR_OF_DAY, 10);
scheduled.set(Calendar.MINUTE, 0);
scheduled.set(Calendar.SECOND, 0);

if(scheduled.before(current)) {
    // Do as you please
} 
```

使用这种方法，我们不会带来与 try-catch 块或 Calendar 以外的任何类相关的开销。希望有帮助。

**从评论添加**

如果向用户呈现不同的用户时间，并且您当前以“小时：分钟”格式检索时间，则使用以下命令：

```
// scheduled_start looks like "23:45"
String[] times = scheduled_start.split(":");
int hour = Integer.parseInt(times[0]); // this'll be 23
int minute = Integer.parseInt(times[1]); // this'll be 45 
```

和：

```
scheduled.set(Calendar.HOUR_OF_DAY, hour);
scheduled.set(Calendar.MINUTE, minute); 
```

# android - Android：当被要求绘制ARGB时，它只显示一秒钟

> ID：11437386
> 
> 赞同：0
> 
> 时间：2012-07-11T16:42:31.960
> 
> 标签：android, canvas, draw

当我尝试将屏幕颜色从黑色更改时，我使用命令 drawARGB 一次，我打算让它保持我要求的颜色，其他绘图会出现在它上面，但它只显示一次，一瞬间，然后又变黑了……

这是代码，如果你想知道它一切正常，除了drawARGB ......

这是动态壁纸的一部分。

```
public void drawFrame() {
        // TODO Auto-generated method stub
       c = null;
       try {
           c = holder.lockCanvas();
           if (c != null) {
               // draw something
            height = c.getHeight();
            width = c.getWidth();
            drawScreenColor();
            frame++;
           }
       } finally {
           if (c != null) holder.unlockCanvasAndPost(c);
       }
         mHandler.removeCallbacks(mDrawStrip);
            if (clearToRun) {
                mHandler.postDelayed(mDrawStrip, 1000 / 60);
            }
    }

    void drawScreenColor() {

        if (isFirstFrame) {
            c.drawARGB(255,255,0,0);
            isFirstFrame = false;
        }

    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-11T16:49:44.700

这是由于您的“第一帧”代码而发生的。

```
if (isFirstFrame) {
    c.drawARGB(255,255,0,0);
    isFirstFrame = false;
} 
```

因此，这将执行一次，设置`isFirstFrame`为 false，并且不再执行。工作的方式`Canvas`是必须在每一帧重绘所有元素（前一帧的元素不会留下来）。因此，删除`isFirstFrame`检查，并将其作为您`drawFrame`方法中的第一个调用；它后面的所有内容都将绘制在顶部。

# php - 不能在 exit() 中调用函数

> ID：11437387
> 
> 赞同：4
> 
> 时间：2012-07-11T16:42:37.483
> 
> 标签：php, function, undefined

有一个函数定义在`commons.php`

```
desktop.php -> include commons.php
    |
    |
   \|/
    include MODULES.'mod.php' 
```

我可以在任何我想要的地方调用我的自定义函数，但不能在 if 内的出口内。调用函数的代码不会去：

模组.php：

```
....
$error = mysql_error();

if($_ADM['id_user']==1) {
    if(!empty($error)) {
        $debug = array(
                    'message' => "SQL Error in infography_edit module.",
                    'line'    => '79',
                    'error'   => $error,
                    'SQL'     => $SQL
                );
        //exit(myPrint($debug)); //Calling here myPrint does not work
          exit(print_r($debug)); //This works
     }
 }

 $test = array('alex');
 exit(myPrint($debug)); //Calling here myPrint works

....

// The output error: Call to undefined function myPrint() 
```

我只是不明白为什么上面代码之外的任何其他地方都可以工作，但如果没有在里面再次定义它就不能在里面

## 更新

这样做，似乎也不起作用：

```
myPrint($debug);
exit();
// The output error: Call to undefined function myPrint() 
```

## 更新2

desktop.php 主文件：

1.  要求（LIBS.'commons.php'）；
2.  常见的html
3.  包含模块

包含桌面代码的键盘： http: [//codepad.org/hn8QlHQ9](http://codepad.org/hn8QlHQ9)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-16T08:17:39.847

解决方法怎么样

```
function my_exit($msg){
   echo $msg;
   exit(1);  //Return code of the script, useful for cli scripts
}

//...
my_exit("Show message");
//... 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-08T19:27:49.423

好的，首先我必须澄清我正在处理的代码不是我的，我只是受雇进行一些改进，不得不与主要开发人员交谈以解释这种混乱。

我一直缺少的是每个请求（每个与页面刷新有关的请求）都通过一个名为的辅助文件`do.php`，该文件最终再次加载了我所在的模块。

视觉解释：

```
Currently at          Action                Pre-Processor        Processor 
-------------    =>   ---------------   =>  -------------    =>  ---------
add_users.php         post from form        do.php               add_user.php 
```

现在，正如您所知，当前模块`http://site.com/module?=add_users`位置`do.php`（我知道这是一个巨大的混乱，但我无能为力。

因此，最终我不得不`do.php`在文件开头添加以下行：`require_once('libs/commons.php');`

## 我的推荐

每当您看到某个函数没有加载，但您知道它在某些情况下可以完美加载时，请查找任何其他可能干扰的文件`do.php`，并尝试包含/要求包含该函数的文件。

我知道这样的事情会让人头疼，但事实就是如此，而且大多数时候不是我们的错，而是平台已经编写的方式。

祝你们好运

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-11T16:47:22.113

假设您的条件标准得到满足，您的代码应该可以工作。

> 调用未定义的函数 myPrint()

上述错误表明该函数`myPrint()`未定义。您可以使用[function_exists()](http://us.php.net/manual/en/function.function-exists.php)函数来检查特定函数是否存在。如果它不存在，那么您可以在当前上下文中重新定义它。

```
<?php
if (function_exists('myPrint')) {
    echo "myPrint() exists.\n";
} else {
    echo "myPrint() doesn't exist.\n";
}
?> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-11T16:49:32.533

`exit()`是一种语言结构，只能接受类型`int`和的标量值`string`。如果您需要在退出脚本之前打印出任何内容，我建议您在调用 exit 之前执行此操作。

```
....
$error = mysql_error();

if($_ADM['id_user']==1)
    if(!empty($error))
        $debug = array(
                    'message' => "SQL Error in infography_edit module.",
                    'line'    => '79',
                    'error'   => $error,
                    'SQL'     => $SQL
                );
        myPrint($debug);
        exit();
.... 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-11T16:52:25.463

您是否有机会使用名称空间？您确定您的功能已定义吗？如果包含，您确定您已包含它吗？

PS RobB 很抱歉让您知道，但它确实有效。

例子：

```
$v = 1234;
function xyz($v){
    echo $v . 23;
}
exit( xyz($v) ); 
```

# c++ - Linux系统的有限插件架构？

> ID：11437393
> 
> 赞同：3
> 
> 时间：2012-07-11T16:42:46.123
> 
> 标签：c++, linux, plugins

我想为 Linux 编写一个插件架构。我已经尝试研究如何做到这一点，但实际上我一直在寻找更复杂的插件架构的信息，而不是我需要的，我只想要一个非常基本的实现。

为了解释我在做什么，我有一个程序可以接受和处理来自各种来源的输入，同一程序的多个实例可能会运行，每个实例都接受不同的输入源。我想做某种程度的错误检查和纠正，但这种错误检查的逻辑会因输入源而异。所以我希望我的程序为它正在读取的特定源打开一个插件（插件名称可能在配置文件中）并运行库提供的错误检查方法。这比我看到的大多数插件架构和信息更基本，因为

*   它不是跨平台的。我知道我将使用 x86 linux 平台，如果需要，甚至可以定义一个精确的编译器
*   “插件”是非常基础的，它可以是每个插件提供的单一方法。

但是，有两件事我必须拥有

1) 必须*快*。我将大量读取流数据，需要快速处理。出于这个原因，我已经取消了脚本代理的使用，我担心为每个输入翻译脚本逻辑的开销可能会很大

2) 我必须能够检测到现有 .SO 的更新并在不停止程序的情况下加载新版本。

一般来说，我对 c++ 还是半新的，所以对尝试开发任何过于复杂的东西有点担心。我正在寻找对我来说最简单可行的解决方案。

我考虑过 Boost.Extension，但实际上它可能对我需要的东西有点过分。由于我的用例非常简单，我正在尝试决定是否最好手动定义 .SO 而不是尝试使用 Boost 框架。在我工作的地方使用 Boost 也有一些小麻烦，我可以做到，但我必须跳过几圈才能获得许可。

所以谁能告诉我 1) 插件架构真的是我应该在这里尝试的（有没有更简单的解决方案？） 2) 如果他们认为 Boost.Extensions 是最好的方法 3) 可以指出任何描述如何制作一个*特定于平台的*插件架构（我已经看到很多关于平台独立的讨论，但我不需要做任何复杂的事情）。4) 确保在运行时加载更新版本的库的最佳方法是什么？由于前面声明需要快速处理，因此每次我接受输入时最好避免使用 if 语句的方法。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-11T16:57:20.380

1) 是的。就您而言，这是一个简单的解决方案。Linux 有一个传统上简单的 API，编写/使用共享库通常很简单（有一些注意事项，见下文）。

2）由于您的目标是Linux，因此不需要独立于平台的抽象。平台独立的共享库管理充满了血腥的细节，这里你不关心这个。Boost Extensions 可能不如仅使用 linux 的解决方案简单。

3) 使用`dlopen`and`dlsym`与**C 函数**`extern "C"`一起使用（即事先了解和命名修饰）。有很多关于 C++ 和 dlsym/dlopen 的教程（比如[这个](http://www.isotton.com/devel/docs/C++-dlopen-mini-HOWTO/C++-dlopen-mini-HOWTO.html)）。基本上，您的界面越简单越好（最好是一些 C 函数并且没有类）。

4) 你可以看看`inotify`，这是文件系统事件通知的 Linux 标准。为您加载的每个库添加一个手表，您将收到处理程序的任何更改通知。处理程序应该只为主循环设置一个标志，以便在需要时重新加载库。

# c++ - Visual C++, wchar_t* 命令行参数不能比较？

> ID：11437394
> 
> 赞同：3
> 
> 时间：2012-07-11T16:42:50.647
> 
> 标签：c++, visual-c++, if-statement, comparison, wchar-t

我在尝试根据哪个字符串 argv[1] 等于来实现某个分配时遇到了一些麻烦。

```
int _tmain(int argc, _TCHAR* argv[]) //wchar_t
{   
    if (argc != 2)
        exit(1);

    if (argv[1] == L"-foo")
        printf("Success!\n");

    wprintf(argv[1]);
    printf("\n");

    system("pause");
    return 0;
} 
```

如果我使用参数“-foo”运行可执行文件，我会收到以下输出：

```
-foo 
```

它应该是：

```
Success!
-foo 
```

该字符串正是我想要的，但 if 条件仍然为假。字符串是否`wchar_t`根本无法使用`==`运算符进行比较？如果是这样，我该如何正确比较它们？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-11T17:21:37.980

> **初步说明**：鉴于问题本身的上下文，此答案中的[*Unicode*](https://secure.wikimedia.org/wikipedia/en/wiki/Unicode#Architecture_and_terminology)和*Unicode 字符*是指 UCS-2（最高 XP）和 UTF-16（从 XP 开始）编码，可与*宽字符*、`wchar_t`和`WCHAR`其他字符互换使用Win32 API 上下文中的术语。Unicode 标准提供多种编码，例如 UTF-8、UTF-16 和 UTF-32 来编码相同数量的字符——标准的不同版本具有不同的范围。*代理代码点*用于从基本多语言平面 (BMP) 中逃逸，大约是前 64K 代码点，因此编码的内容超过了 16 位字符和每个代码点一个字符的编码范围。**代理扩展是为 Unicode 2.0 标准开发的，该标准在 NT 4.0 发布的那一年通过，但在 Windows 的第一个“支持 Unicode”的版本 NT 3.51 发布几年*后。***该原始标准没有考虑比 BMP 更多的字符，这就是为什么*Unicode 字符*或*宽字符*现在甚至在 Win32 API 上下文中用作*Unicode的同义词，尽管这是不准确的。*

要回答您提出的基本问题：

> 使用“==”运算符是否`wchar_t`根本无法比较字符串？

不，它们不是，“ANSI”字符串也不是，即使用`char`类型作为基础。请记住，C 字符串（包括基于`wchar_t`的`char`）**是一个指针**。这意味着`==`您正在比较两个绝对不相等的指针值。毕竟，一个是文字字符串（即在您的程序映像中），而另一个分配在堆上的某个位置。所以他们绝对是两个不同的实体。

如果您想使用 ，则`==`必须使用诸如 C++ 之类的带有 STL 类`std::string`（或`std::basic_string<_TCHAR>`）或（在 Windows 上）ATL 类`CString`（或更确切地说`CStringT`）的语言。这些类有时称为智能字符串类，并使用 C++ 工具覆盖`operator==()`. 但是，您应该记住，语义因实现而异，因此并非每个智能字符串类都会比较字符串内容。有些人可能只比较 的相等性`this`（即它是否是同一个实例），而另一些人可能会自行比较字符串内容不区分大小写或区分大小写。

要比较 C 字符串，您可以使用以下函数：

*   对于“ANSI”字符 ( `char`) 字符串：`strcmp`, `_stricmp`（以及“计数”变体：`_strncmp`, `_strnicmp`... 还有更多）
*   对于 Unicode 字符 ( `wchar_t`) 字符串：`wcscmp`, `_wcsicmp`（以及“计数”变体：`_wcsncmp`, `_wcsnicmp`... 还有更多）
*   对于变量字符“类型”（`TCHAR`）字符串： `_tcscmp`，`_tcsicmp`（和“计数”变体：`_tcsncmp`，`_tcsnicmp`......还有更多）

你可以记住这些前缀：

*   `str`-> 字符串
*   `wcs`-> 宽字符串
*   `tcs`-> T 字符串

* * *

旁注： with`#include <tchar.h>`和`windows.h`宏`TEXT`and`_T`是等价的，用于声明一个字符串文字，根据构建时的定义，它要么是“ANSI”，要么是 Unicode。显然，这同样适用，`_TCHAR`而`TCHAR`后者似乎在 Win32 API 上下文中受到青睐。

因此，Unicode 构建将扩展`_T("something")`为`L"something"`，而“ANSI”构建将扩展为`"something"`.

至于 TCHAR，请考虑通读以下提出的论点：[TCHAR 是否仍然相关？](https://stackoverflow.com/questions/234365)[（由rubenvb](https://stackoverflow.com/users/256138)指出） 有赞成和反对`TCHAR`/`_TCHAR`使用的有效观点，您应该做出决定并坚持下去 - 即**保持一致**。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-11T17:11:18.433

没关系，明白了。

```
if (wcscmp(argv[1], L"-foo") == 0) 
```

# c# - 找不到类型或命名空间名称“StiReport”错误

> ID：11437398
> 
> 赞同：0
> 
> 时间：2012-07-11T16:42:59.680
> 
> 标签：c#, stimulsoft

我安装了 StimulSoft2009 并做了：

1.  添加了 stimulreport 的 .dll 文件
2.  在标题中插入此代码：

    使用 Stimulsoft.Report；

3.  在 Button_Click 事件中添加以下代码：

    StiReport 报告 = 新 StiReport();

    报告.设计（）；

但是面对这个错误：

```
Error   17  The type or namespace name 'StiReport' could not be found (are you missing a using directive or an assembly reference?) C:\Users\funfullson\documents\visual studio 2010\Projects\cSharpTest\cSharpTest\Form1.cs    23  13  cSharpTest 
```

问题是什么？

# c# - 将列表视图绑定到另一个类中的属性

> ID：11437401
> 
> 赞同：3
> 
> 时间：2012-07-11T16:43:10.317
> 
> 标签：c#, wpf, listview, binding

我有以下静态类

```
static class ContactSettings
{
    static ObservableCollection<Contact> _contactCollection = new ObservableCollection<Contact>();

    public static ObservableCollection<Contact> ContactCollection
    {
        get { return _contactCollection; }
    }
} 
```

其中 Contact 是具有 Contact.Name 和 Contact.Address 字符串属性的类。

我想将上面的 ContactCollection 绑定到驻留在窗口中的 WPF ListView。

这是我的 ListView XAML 定义

```
<ListView x:Name="_contactListView" DataContext="{Binding Path=ContactSettings}" ItemsSource="{Binding ContactSettings.ContactCollection}">
   <ListView.View>
      <GridView>
         <GridViewColumn Header="Name" DisplayMemberBinding="{Binding Name}" />
         <GridViewColumn Header="Address" DisplayMemberBinding="{Binding Address}" />                                        
      </GridView>
   </ListView.View>
</ListView> 
```

绑定不起作用。我很确定问题出在 XAML 中的 DataContext 和 ItemSource 属性上。如果我在 Window 类中移动 ContactCollection 并将 DataContext 设置为 Self，我可以让代码工作。问题是我不知道如何告诉 ListView 绑定到另一个类中的集合。谢谢你的帮助。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-11T16:48:52.890

问题是您不能绑定到静态类，因为绑定需要类的实例。

您可以尝试像这个[SO question这样的解决方法](https://stackoverflow.com/questions/5323052/data-binding-a-string-variable-of-static-class-to-textblock-in-phone-7)

# java - setDragImage 不工作 - Java 7

> ID：11437402
> 
> 赞同：5
> 
> 时间：2012-07-11T16:43:13.873
> 
> 标签：java, swing, drag-and-drop

我正在尝试设置代码，以便用户可以从 JTable 拖动到 JList，并使用 TransferHandler 中的 Java 7 函数 setDragImage 自定义拖动图像。我在 java 教程网站上获取了一个示例，他们在那里教授 Drag n Drop，然后添加了“setDragImage”代码。但是它不起作用。请查看下面的代码，并在 importData 函数中找到 setDragImage() 行。为什么这不起作用？

```
/*
 * Copyright (c) 1995, 2008, Oracle and/or its affiliates. All rights reserved.
 *
 */

import java.util.*;
import java.awt.*;
import java.awt.event.*;
import java.text.*;
import java.awt.datatransfer.*;
import java.awt.image.BufferedImage;

import javax.swing.*;
import javax.swing.text.*;
import javax.swing.tree.*;
import javax.swing.table.*;

public class BasicDND extends JPanel implements ActionListener {
    private static JFrame frame;
    private JTextArea textArea;
    private JTextField textField;
    private JList list;
    private JTable table;
    private JTree tree;
    private JColorChooser colorChooser;
    private JCheckBox toggleDnD;

    public BasicDND() {
        super(new BorderLayout());
        JPanel leftPanel = createVerticalBoxPanel();
        JPanel rightPanel = createVerticalBoxPanel();

        //Create a table model.
        DefaultTableModel tm = new DefaultTableModel();
        tm.addColumn("Column 0");
        tm.addColumn("Column 1");
        tm.addColumn("Column 2");
        tm.addColumn("Column 3");
        tm.addRow(new String[]{"Table 00", "Table 01", "Table 02", "Table 03"});
        tm.addRow(new String[]{"Table 10", "Table 11", "Table 12", "Table 13"});
        tm.addRow(new String[]{"Table 20", "Table 21", "Table 22", "Table 23"});
        tm.addRow(new String[]{"Table 30", "Table 31", "Table 32", "Table 33"});

        //LEFT COLUMN
        //Use the table model to create a table.
        table = new JTable(tm);
        leftPanel.add(createPanelForComponent(table, "JTable"));

        //Create a color chooser.
        colorChooser = new JColorChooser();
        leftPanel.add(createPanelForComponent(colorChooser, "JColorChooser"));

        //RIGHT COLUMN
        //Create a textfield.
        textField = new JTextField(30);
        textField.setText("Favorite foods:\nPizza, Moussaka, Pot roast");
        rightPanel.add(createPanelForComponent(textField, "JTextField"));

        //Create a scrolled text area.
        textArea = new JTextArea(5, 30);
        textArea.setText("Favorite shows:\nBuffy, Alias, Angel");
        JScrollPane scrollPane = new JScrollPane(textArea);
        rightPanel.add(createPanelForComponent(scrollPane, "JTextArea"));

        //Create a list model and a list.
        DefaultListModel listModel = new DefaultListModel();
        listModel.addElement("Martha Washington");
        listModel.addElement("Abigail Adams");
        listModel.addElement("Martha Randolph");
        listModel.addElement("Dolley Madison");
        listModel.addElement("Elizabeth Monroe");
        listModel.addElement("Louisa Adams");
        listModel.addElement("Emily Donelson");
        list = new JList(listModel);
        list.setVisibleRowCount(-1);
        list.getSelectionModel().setSelectionMode(ListSelectionModel.MULTIPLE_INTERVAL_SELECTION);

        list.setTransferHandler(new TransferHandler() {

            public Image getDragImage() {
                return null;
            }

            @Override
            public boolean canImport(TransferHandler.TransferSupport info) {
                // we only import Strings
                if (!info.isDataFlavorSupported(DataFlavor.stringFlavor)) {
                    return false;
                }

                JList.DropLocation dl = (JList.DropLocation)info.getDropLocation();
                if (dl.getIndex() == -1) {
                    return false;
                }
                return true;
            }

            public BufferedImage makeImageFromString(String s) {
                int width = 100;
                int height = 40;
                BufferedImage br = new BufferedImage(width,height,BufferedImage.TYPE_INT_ARGB);
                Graphics g = br.getGraphics();
                g.drawString(s, 0, 0);
                //g.fillRect(0, 0, width, height);
                System.out.println("made image from " + s);
                return br;
            }

            @Override
            public boolean importData(TransferHandler.TransferSupport info) {
                if (!info.isDrop()) {
                    return false;
                }

                // Check for String flavor
                if (!info.isDataFlavorSupported(DataFlavor.stringFlavor)) {
                    displayDropLocation("List doesn't accept a drop of this type.");
                    return false;
                }

                JList.DropLocation dl = (JList.DropLocation)info.getDropLocation();
                DefaultListModel listModel = (DefaultListModel)list.getModel();
                int index = dl.getIndex();
                boolean insert = dl.isInsert();
                // Get the current string under the drop.
                String value = (String)listModel.getElementAt(index);

                // Get the string that is being dropped.
                Transferable t = info.getTransferable();
                String data;
                try {
                    data = (String)t.getTransferData(DataFlavor.stringFlavor);
                } 
                catch (Exception e) { return false; }

                //HERE IS THE CODE TO SET THE DRAG IMAGE
                this.setDragImage(makeImageFromString(data));

                // Display a dialog with the drop information.
                String dropValue = "\"" + data + "\" dropped ";
                if (dl.isInsert()) {
                    if (dl.getIndex() == 0) {
                        displayDropLocation(dropValue + "at beginning of list");
                    } else if (dl.getIndex() >= list.getModel().getSize()) {
                        displayDropLocation(dropValue + "at end of list");
                    } else {
                        String value1 = (String)list.getModel().getElementAt(dl.getIndex() - 1);
                        String value2 = (String)list.getModel().getElementAt(dl.getIndex());
                        displayDropLocation(dropValue + "between \"" + value1 + "\" and \"" + value2 + "\"");
                    }
                } else {
                    displayDropLocation(dropValue + "on top of " + "\"" + value + "\"");
                }

        /**  This is commented out for the basicdemo.html tutorial page.
                 **  If you add this code snippet back and delete the
                 **  "return false;" line, the list will accept drops
                 **  of type string.
                // Perform the actual import.  
                if (insert) {
                    listModel.add(index, data);
                } else {
                    listModel.set(index, data);
                }
                return true;
        */
        return false;
            }

            @Override
            public int getSourceActions(JComponent c) {
                return COPY;
            }

            @Override
            protected Transferable createTransferable(JComponent c) {
                JList list = (JList)c;
                Object[] values = list.getSelectedValues();

                StringBuffer buff = new StringBuffer();

                for (int i = 0; i < values.length; i++) {
                    Object val = values[i];
                    buff.append(val == null ? "" : val.toString());
                    if (i != values.length - 1) {
                        buff.append("\n");
                    }
                }
                return new StringSelection(buff.toString());
            }
        });
        list.setDropMode(DropMode.ON_OR_INSERT);

        JScrollPane listView = new JScrollPane(list);
        listView.setPreferredSize(new Dimension(300, 100));
        rightPanel.add(createPanelForComponent(listView, "JList"));

        //Create a tree.
        DefaultMutableTreeNode rootNode = new DefaultMutableTreeNode("Mia Familia");
        DefaultMutableTreeNode sharon = new DefaultMutableTreeNode("Sharon");
        rootNode.add(sharon);
        DefaultMutableTreeNode maya = new DefaultMutableTreeNode("Maya");
        sharon.add(maya);
        DefaultMutableTreeNode anya = new DefaultMutableTreeNode("Anya");
        sharon.add(anya);
        sharon.add(new DefaultMutableTreeNode("Bongo"));
        maya.add(new DefaultMutableTreeNode("Muffin"));
        anya.add(new DefaultMutableTreeNode("Winky"));
        DefaultTreeModel model = new DefaultTreeModel(rootNode);
        tree = new JTree(model);
        tree.getSelectionModel().setSelectionMode
              (TreeSelectionModel.DISCONTIGUOUS_TREE_SELECTION);
        JScrollPane treeView = new JScrollPane(tree);
        treeView.setPreferredSize(new Dimension(300, 100));
        rightPanel.add(createPanelForComponent(treeView, "JTree"));

        //Create the toggle button.
        toggleDnD = new JCheckBox("Turn on Drag and Drop");
        toggleDnD.setActionCommand("toggleDnD");
        toggleDnD.addActionListener(this);

        JSplitPane splitPane = new JSplitPane(JSplitPane.HORIZONTAL_SPLIT,
                                              leftPanel, rightPanel);
        splitPane.setOneTouchExpandable(true);

        add(splitPane, BorderLayout.CENTER);
        add(toggleDnD, BorderLayout.PAGE_END);
        setBorder(BorderFactory.createEmptyBorder(5,5,5,5));
    }

    protected JPanel createVerticalBoxPanel() {
        JPanel p = new JPanel();
        p.setLayout(new BoxLayout(p, BoxLayout.PAGE_AXIS));
        p.setBorder(BorderFactory.createEmptyBorder(5,5,5,5));
        return p;
    }

    public JPanel createPanelForComponent(JComponent comp,
                                          String title) {
        JPanel panel = new JPanel(new BorderLayout());
        panel.add(comp, BorderLayout.CENTER);
        if (title != null) {
            panel.setBorder(BorderFactory.createTitledBorder(title));
        }
        return panel;
    }

    private void displayDropLocation(final String string) {
        SwingUtilities.invokeLater(new Runnable() {
            public void run() {
                JOptionPane.showMessageDialog(null, string);
            }
        });
    }

    public void actionPerformed(ActionEvent e) {
        if ("toggleDnD".equals(e.getActionCommand())) {
            boolean toggle = toggleDnD.isSelected();
            textArea.setDragEnabled(toggle);
            textField.setDragEnabled(toggle);
            list.setDragEnabled(toggle);
            table.setDragEnabled(toggle);
            tree.setDragEnabled(toggle);
            colorChooser.setDragEnabled(toggle);
        }
    }

    /**
     * Create the GUI and show it.  For thread safety,
     * this method should be invoked from the
     * event-dispatching thread.
     */
    private static void createAndShowGUI() {
        //Create and set up the window.
        frame = new JFrame("BasicDnD");
        frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);

        //Create and set up the content pane.
        JComponent newContentPane = new BasicDND();
        newContentPane.setOpaque(true); //content panes must be opaque
        frame.setContentPane(newContentPane);

        //Display the window.
        frame.pack();
        frame.setVisible(true);
    }

    public static void main(String[] args) {
        //Schedule a job for the event-dispatching thread:
        //creating and showing this application's GUI.
        javax.swing.SwingUtilities.invokeLater(new Runnable() {
            public void run() {
                //Turn off metal's use of bold fonts
            UIManager.put("swing.boldMetal", Boolean.FALSE);
                createAndShowGUI();
            }
        });
    }
} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-12T09:16:42.840

1.  正如 kleopatra 所说，删除 getDragImage() { return null; }
2.  将 TransferHandler#setDragImage(...) 从 importData(...) 移动到 getSourceActions(...)
3.  修复你的 makeImageFromString(...)

* * *

```
//As kleopatra says,
//public Image getDragImage() {
//    return null;
//}
public boolean importData(TransferHandler.TransferSupport info) {
    //...
    //HERE IS THE CODE TO SET THE DRAG IMAGE
    //XXX: this.setDragImage(makeImageFromString(data));
    //...
}
@Override public int getSourceActions(JComponent c) {
  System.out.println("getSourceActions");
  this.setDragImage(makeImageFromString(c));
  return COPY;
}

FontRenderContext frc = new FontRenderContext(null, true, true);
JPanel p = new JPanel();
public BufferedImage makeImageFromString(JComponent c) {
  int width = 100;
  int height = 40;
  BufferedImage br = new BufferedImage(width,height,BufferedImage.TYPE_INT_ARGB);
  Graphics g = br.getGraphics();
  g.setColor(Color.RED);
  g.fillRect(0, 0, width, height);

//*
  JList l = (JList)c;
  ListCellRenderer r = l.getCellRenderer();
  Component comp = r.getListCellRendererComponent(
      l, l.getSelectedValue(), l.getSelectedIndex(), false, false);
  SwingUtilities.paintComponent(g, comp, p, 0, 0, width, height);
/*/
  String s = "aaaa";
  Rectangle rect = c.getFont().getStringBounds(s, frc).getBounds();
  int tx = (width  - rect.width)/2  - rect.x;
  int ty = (height - rect.height)/2 - rect.y;
  g.setColor(Color.BLACK);
  g.drawString(s, tx, ty);
  System.out.println("made image from " + s);
//*/
  g.dispose();
  return br;
} 
```

注意：[TransferHandler#setDragImage(java.awt.Image) (Java Platform SE 7)](http://docs.oracle.com/javase/7/docs/api/javax/swing/TransferHandler.html#setDragImage(java.awt.Image))

* * *

添加 SSCCE：如何使用 TransferHandler#setDragImage(...) 方法。

![在此处输入图像描述](../Images/86ef07bb2b24c1d838035fb87cf98a56.png)

```
import java.util.*;
import java.awt.*;
import java.awt.image.*;
import java.awt.datatransfer.*;
import javax.swing.*;
public class BasicDnD {
  private JList list;
  public JList makeList() {
    DefaultListModel<String> m = new DefaultListModel<>();
    m.addElement("Martha Washington");
    m.addElement("Abigail Adams");
    m.addElement("Martha Randolph");
    list = new JList<String>(m);
    list.setTransferHandler(new TransferHandler() {
      @Override public boolean canImport(TransferHandler.TransferSupport info) {
        if (!info.isDataFlavorSupported(DataFlavor.stringFlavor)) {
          return false;
        }
        JList.DropLocation dl = (JList.DropLocation)info.getDropLocation();
        if (dl.getIndex() == -1) {
          return false;
        }
        return true;
      }
      @Override public int getSourceActions(JComponent c) {
        setDragImage(makeImageFromString(c));
        return COPY;
      }
      private final JPanel p = new JPanel();
      private BufferedImage br;
      private int width, height;
      private BufferedImage makeImageFromString(JComponent src) {
        JList l = (JList)src;
        int idx = l.getSelectedIndex();
        Rectangle rect = list.getCellBounds(idx,idx);
        if(rect==null) return null;
        if(br==null || rect.width!=width || rect.height!=height) {
          width  = rect.width;
          height = rect.height;
          br = new BufferedImage(width,height,BufferedImage.TYPE_INT_ARGB);
        }
        Component c = l.getCellRenderer().getListCellRendererComponent(
            l, l.getSelectedValue(), idx, false, false);
        Graphics g = br.getGraphics();
        g.clearRect(0,0,width,height);
        SwingUtilities.paintComponent(g, c, p, 0, 0, width, height);
        g.dispose();
        return br;
      }
      @Override protected Transferable createTransferable(JComponent c) {
        JList list = (JList)c;
        Object[] values = list.getSelectedValues();
        StringBuffer buff = new StringBuffer();
        for (int i = 0; i < values.length; i++) {
          Object val = values[i];
          buff.append(val == null ? "" : val.toString());
          if (i != values.length - 1) {
            buff.append("\n");
          }
        }
        return new StringSelection(buff.toString());
      }
    });
    list.setDropMode(DropMode.ON_OR_INSERT);
    list.setDragEnabled(true);
    return list;
  }
  public JComponent makeUI() {
    JPanel panel = new JPanel(new GridLayout(2,1));
    JTextArea textArea = new JTextArea("Drag here from JList!");
    panel.add(new JScrollPane(textArea));
    panel.add(new JScrollPane(makeList()));
    return panel;
  }
  private static void createAndShowGUI() {
    JFrame f = new JFrame("BasicDnD");
    f.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
    f.setContentPane(new BasicDnD().makeUI());
    f.setSize(320, 320);
    f.setLocationRelativeTo(null);
    f.setVisible(true);
  }
  public static void main(String[] args) {
    EventQueue.invokeLater(new Runnable() {
      @Override public void run() { createAndShowGUI(); }
    });
  }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2018-03-18T00:52:51.780

为了让 TransferHandler 显示自定义图像（当发生拖动时），您必须创建 TransferHandler 的子类，并覆盖以下函数：

1.  `public int getSourceActions(JComponent)`- 它必须返回源（发起拖动的JComponent）支持的动作，如果发起拖动时请求的动作（参见5）不匹配，它将不起作用。
2.  `public Transferable createTransferable(JComponent c)`- TransferHandler 必须返回一个Transferable 对象，如果返回null，则不会启动拖动。
3.  `public Image getDragImage()`需要重新调用想要的图像，或者`setDragImage()`应该在自定义 TransferHandler 的实例上调用

要开始拖动，请使用以下命令覆盖/扩展 MouseMotionListener：

`public void mouseDragged(MouseEvent e){ JComponent jc = (JComponent)e.getSource(); jc.getTransferHandler().exportAsDrag(jc, e,TransferHandler.COPY); }`

并将 JComponent TransferHandler 和 MouseMotionListener 设置为：

```
myJComponent.setTransferHandler(new myCustomTransferHandler());
myJComponent.addMouseMotionListener(new myCustomMouseMotionListener()); 
```

### 一个完整的工作示例：

```
package test;

import javax.swing.*;
import java.awt.*;
import java.awt.datatransfer.*;
import java.awt.event.MouseEvent;
import java.awt.event.MouseMotionListener;
import javax.imageio.ImageIO;

public class DragTest{
Image dragImage;

public static void main(String[] args){
    new DragTest();
}

public DragTest(){
    try{
        dragImage = javax.imageio.ImageIO.read( new java.net.URL(
                "https://www.icon2s.com/wp-content/uploads/2013/07/black-white-metro-file-icon.png"));
        //dragImage = ImageIO.read(new java.io.File("icon.png")); //can be used to read image from file
    }catch(java.io.IOException e1){
        e1.printStackTrace();
        return;
    }
    dragImage = dragImage.getScaledInstance(64, 64, Image.SCALE_DEFAULT); //scaling the image
    JFrame frame = new JFrame();
    frame.setLayout(null);
    frame.setSize(500,500); frame.setLocationRelativeTo(null); //size and location
    frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
    MyJComponent myJC = new MyJComponent();
    myJC.setBounds(50,50,100,100);
    myJC.addMouseMotionListener(new MouseMotionListener(){
        @Override
        public void mouseDragged(MouseEvent e){
            JComponent src = (JComponent)e.getSource();
            src.getTransferHandler().exportAsDrag(src, e, TransferHandler.COPY); //try to export with the copy action - TransferHandler should support copy 
        }
        @Override
        public void mouseMoved(MouseEvent e){}
    });
    myJC.setTransferHandler(new TransferHandler(){
        @Override public Image getDragImage(){ return(dragImage);}
        @Override public int getSourceActions(JComponent c){
            return(COPY_OR_MOVE); //supporting both copy and move
        }
        @Override public Transferable createTransferable(JComponent c){
            return(new Transferable(){
                @Override
                public boolean isDataFlavorSupported(DataFlavor flavor){
                    return false;
                }
                @Override
                public DataFlavor[] getTransferDataFlavors(){
                    return null;
                }
                @Override
                public Object getTransferData(DataFlavor flavor) throws UnsupportedFlavorException, java.io.IOException {
                    return null;
                }
            });
        }
    });
    frame.add(myJC);
    frame.setVisible(true);
}

private class MyJComponent extends JComponent{
    @Override
    public void paintComponent(Graphics g){
        g.setColor(Color.RED);
        g.fillRect(0, 0, getWidth(), getHeight());
    }
}
} 
```

# c++ - 带有 boost 库的路径

> ID：11437404
> 
> 赞同：0
> 
> 时间：2012-07-11T16:43:16.030
> 
> 标签：c++, boost

我对 boost 库有问题，当我尝试编译简单的程序 g++ 时显示“没有这样的文件或目录”。我在 /home/user/boost 中安装了 boost（我有两个文件夹“include”和“lib”）。我发现 bash 脚本没有解决我的问题：

```
export LD_LIBRARY_PATH=/home/user/boost:${LD_LIBRARY_PATH} 
```

谁能帮我 ？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-11T16:48:46.807

这取决于您的用户安装的 boost 目录结构。如果您的包含文件现在位于 /home/user/boost/include/boost 中，则添加：

```
 g++ -I/home/user/boost/include/boost ... 
```

到您的编译选项。见**[这里](http://gcc.gnu.org/onlinedocs/gcc/Directory-Options.html)**。`LD_LIBRARY_PATH`无济于事，这仅对执行在文件系统中查找共享库的程序很重要。它就像动态链接库的“路径”。如果你编译了你的代码，那么**在链接中**添加你的boost库的目录位置：

```
 g++ -L/home/user/boost/lib 
```

或任何位置。

# css - 为什么我的 CSS 类被覆盖/忽略？

> ID：11437407
> 
> 赞同：5
> 
> 时间：2012-07-11T16:43:21.707
> 
> 标签：css, css-selectors

我知道 id 优先于 class；不幸的是，我的 html 是由 Drupal 生成的，我无法将 id 添加到需要样式的特定 div 中。

这是基本的、精简的 HTML（为简洁起见，删除了内容）。

```
<div id="home-blocks-area" class="clearfix">
    <div align="center" id="homepage_speakers">
        <div class="region region-home-speakers">
            <div id="block-speaker-carousel-speaker-carousel" class="block block-speaker-carousel ">
                <div class="content">
                <!-- actual content -->
                </div>
            </div>
        </div>
    </div>
</div> 
```

我需要能够`<div class="content">`使用样式表来定位该 div。问题是，根据 Firebug，我的样式代码正在被 的样式所取代`#home-blocks-aread .block .content`，这与我需要的这个 div 的样式不同。 ![在此处输入图像描述](../Images/be145d0bae71d54373af7eb2d98fd7fb.png)

我需要使用什么 CSS 来获取特定的 div，请记住，正如我所说，我不能向它添加 id。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-11T16:47:17.633

[CSS Specificity](http://www.w3.org/TR/CSS2/cascade.html#specificity)是答案（至于您的样式被覆盖的原因）。选择器中的 ID 比您的二分类样式添加了更高的特异性。

您需要更具体地了解您的样式（可能添加更多类或添加更多根元素以增加其价值）或（如您所述）创建一个超过当前样式表的 ID。

您也可以使用`!important`，但许多人会争辩说，考虑到它的主要目的是为了客户端自定义（为了可访问性），这有点骇人听闻。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-11T16:45:53.483

你可以增加它的重要性，像这样：

```
.region-home-speakers div.content { background: none !important; } 
```

但是，这样做并不是一个好习惯。我肯定会像 BoltClock 所说的那样将 CSS 更改为这样的：

```
#home-blocks-area .region-home-speakers div.content { background: none; } 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-11T16:50:06.183

top style`{0, 1, 2, 0}`的 score 和 2nd style 的 score 是`{0, 0, 2, 1}`，你需要给 2nd style 添加一个 ID（`#homepage_speakers`也许？），以使其更准确。CSS 出现的顺序仅在两种样式具有相同分数时才重要。

要么，要么只是添加`!important`到第二种样式，但我不喜欢这样做，因为我喜欢有一个适当的 CSS 层次结构。

CSS 选择器得分由`{Is Important 1/0, number of IDs, number of Classes, number of Elements}`. 较高的序号总是具有较高的优先级，例如，具有 1 个 ID 的规则高于具有 5 个类且没有 ID 的规则。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-11T16:46:24.757

有几个选择。最简单的方法可能是将您的行移到 #home-block-area... 部分之后。CSS 是自上而下读取的，越往下的元素会覆盖上面的元素。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-11T16:47:28.710

很遗憾，您被迫以一种骇人听闻的方式解决问题...

```
#home-blocks-aread .block div.content { background: none; } 
```

会做的工作。

# intellij-idea - 将 java 项目的源链接到另一个

> ID：11437408
> 
> 赞同：3
> 
> 时间：2012-07-11T16:43:25.760
> 
> 标签：intellij-idea

我尝试将 Intellij Idea 11.1.2 中的 Java 项目的源链接到另一个中，这在 Eclipse IDE 中是可能的。但是我还没有找到这个功能：Intellij Idea 是否缺少这样的功能？如果不是，菜单是什么？

提前致谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-11T17:23:10.503

您可以[配置](http://www.jetbrains.com/idea/webhelp/configuring-module-dependencies-and-libraries.html)模块之间的依赖关系，因此只需将一个模块添加到另一个模块的依赖关系中即可。

# google-api - 谷歌日历 API 时间格式

> ID：11437414
> 
> 赞同：11
> 
> 时间：2012-07-11T16:43:53.937
> 
> 标签：google-api, google-calendar-api, datetime-format

我正在使用[Google 日历的 API Explorer](https://developers.google.com/apis-explorer/#s/calendar/v3/)并设法从我的日历中获取事件列表。我设法从 API Explorer 将一些事件插入到日历中。但我对时间属性感到困惑。

当我从资源管理器中插入一个事件时，我希望事件时间为 09:30 到 10:30。所以我提出如下：

```
{
 "end": {
  "dateTime": "2012-07-12T10:30:00.0z"
 },
 "start": {
  "dateTime": "2012-07-12T09:30:00.0z"
 }
} 
```

插入成功。但是当我检查日历时，它显示该事件的时间为 03:30-04:30。日期正确。知道我哪里出错了吗？

* * *

当我使用资源管理器检索相同的事件时，我得到了这个：

```
"start": {
  "dateTime": "2012-07-11T03:30:00-06:00"
},
"end": {
  "dateTime": "2012-07-11T04:30:00-06:00"
} 
```

请注意现在的时间 => 03:30:00-06:00 和 04:30:00-06:00。那是-06:00 是什么？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-07-11T17:29:30.440

当您插入事件时，您是在 UTC 时区执行此操作（请注意值末尾的“z”），但您的日历可能位于不同的时区。-06:00 表示应该是中央标准时间的 UTC-6 时区。

# r - 与R中的data.table快速合并（...，all = TRUE）

> ID：11437415
> 
> 赞同：13
> 
> 时间：2012-07-11T16:43:57.043
> 
> 标签：r, data.table

是否可以使用 data.table 语法（如 X[Y]）制作等效的 merge(..., all = TRUE) ？

具体来说，我需要一种非常快速的方法来获得以下结果：

```
item_length = data.table(index = 1:10, length =  c(2,5,4,6,3),key ="index")
item_weigth = data.table(index = c(2,4,6,7,8,11), weight= c(.3,.5,.2), key = "index")
merge(x2,y2, all=TRUE) 
```

这是：

```
> merge(item_length ,item_weigth , all=TRUE)
      index length weight
[1,]     1      2     NA
[2,]     2      5    0.3
[3,]     3      4     NA
[4,]     4      6    0.5
[5,]     5      3     NA
[6,]     6      2    0.2
[7,]     7      5    0.3
[8,]     8      4    0.5
[9,]     9      6     NA
[10,]    10      3     NA
[11,]    11     NA    0.2 
```

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-07-11T17:22:09.997

很抱歉回答我自己的问题，但我认为这是值得分享的：

一个非常快速的解决方案似乎是更新到最新版本的 data.table (1.8.0)。（非常感谢，马修！）

这是我的测试数据和基准测试结果：

使用数据表：

```
full_index <- 1:5000000
ratio_in_samples <- 0.8
x <- data.table(index = sample(full_index, length(full_index)*ratio_in_samples), 
                var1 = rnorm(length(full_index)*ratio_in_samples),
                key = "index")

y <- data.table(index = sample(full_index, length(full_index)*ratio_in_samples), 
                var2 = rnorm(length(full_index)*ratio_in_samples),
                key = "index")

system.time(
result <- merge(x,y, all=TRUE)
) 
```

使用 data.table 的时间：

```
user  system elapsed 
5.05    0.55    5.62 
```

而使用 data.frame：

```
full_index <- 1:5000000
ratio_in_samples <- 0.8
x <- data.frame(index = sample(full_index, length(full_index)*ratio_in_samples), 
                var1 = rnorm(length(full_index)*ratio_in_samples))

y <- data.frame(index = sample(full_index, length(full_index)*ratio_in_samples), 
                var2 = rnorm(length(full_index)*ratio_in_samples))

system.time(
  result <- merge(x,y, all=TRUE)
) 
```

使用 data.frame 的时间：

```
user  system elapsed 
78.83    1.75   80.67 
```

# postgresql - PostgreSQL 错误代码

> ID：11437416
> 
> 赞同：3
> 
> 时间：2012-07-11T16:44:13.360
> 
> 标签：postgresql, exception, error-handling

在哪里可以找到 Postgres 支持的例外列表？就像在 oracle 中一样，也有例外 - 当 no_data_found 时，当 divide_by_zero 时，当其他时等等。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-11T16:57:17.310

可以在手册中找到 PostgreSQL 错误代码列表：

[http://www.postgresql.org/docs/current/interactive/errcodes-appendix.html](http://www.postgresql.org/docs/current/interactive/errcodes-appendix.html)

# facebook - Restfb 令人困惑的异常消息

> ID：11437417
> 
> 赞同：0
> 
> 时间：2012-07-11T16:44:18.337
> 
> 标签：facebook, restfb

我正在尝试使用`RestFB`库发布到 facebook 组，但我得到：

```
com.restfb.DefaultFacebookClient makeRequestAndProcessResponse: 
```

`Facebook responded with HTTP status code 403 and response body: {"error":{"message":"(#200)` `Posts where the actor is a page cannot also include a target_id","type":"OAuthException","code":200}}`

甚至认为我的访问令牌是应用程序访问令牌。

```
 {
         "name": "LottoShop",
         "access_token": "ACCESS_TOKEN_CODE",
         "category": "Application",
         "id": "xxxx"
      }, 
```

当我调用时，我得到了上面的访问令牌

```
https://graph.facebook.com/me/accounts?access_token=MY_OWN_ACCESS_TOKEN 
```

在我个人看来，这个 Facebook Graph API 很复杂！

# javascript - 无法将标头 Content-Type 更改为 application/json

> ID：11437418
> 
> 赞同：2
> 
> 时间：2012-07-11T16:44:27.417
> 
> 标签：javascript, xmlhttprequest, cors, google-closure

无法使用 Closure 库将标头 Content-Type 更改为 application/json。这个 xhr.send () 是预检的。我已经在服务器端进行了所需的配置。但不知何故，我无法对 Content-Type 进行更改，它始终保持为空。有什么方法可以强制标题更改此代码？

> xhr.headers.set('Content-Type','application/json');

```
Http-Method: OPTIONS
Content-Type: 
Headers: {Accept=[*/*], Accept-Charset=[ISO-8859-1,utf-8;q=0.7,*;q=0.3], accept-encoding=[gzip,deflate,sdch], Accept-Language=[en-US,en;q=0.8], Access-Control-Request-Headers=[origin, content-type], Access-Control-Request-Method=[POST], connection=[keep-alive], Content-Type=[null], Host=[localhost:8181], Origin=[http://localhost], Referer=[http://localhost/?], User-Agent=[Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/535.19 (KHTML, like Gecko) Ubuntu/12.04 Chromium/18.0.1025.168 Chrome/18.0.1025.168 Safari/535.19]}

Response-Code: 200
Content-Type: text/xml
Headers: {Allow=[POST, GET, OPTIONS, HEAD], Date=[Wed, 11 Jul 2012 16:31:04 GMT], Content-Length=[0]} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-12T20:25:11.917

我认为标题应该添加到 opt_headers 映射中的 xhr.send() 函数中：

goog.net.XhrIo.prototype.send = 函数（url，opt_method，opt_content，opt_headers）

*   @param {string|goog.Uri} 请求的 URL Uri。
*   @param {string=} opt_method 发送方法，默认：GET。
*   @param {string|GearsBlob=} opt_content 发布数据。如果底层 HTTP 请求对象是 Gears HTTP 请求，则这可以是 Gears blob。
*   @param {Object|goog.structs.Map=} opt_headers 添加到请求的标头映射。

所以：

```
var xhr = new goog.net.XhrIol
var headers = new goog.structs.Map;
headers.set('Content-Type','application/json')
xhr.send(uri, 'OPTIONS', null, headers); 
```

类似的东西对我们来说很好......

问候，

雷内

# objective-c - mac osx中的亚马逊s3？

> ID：11437422
> 
> 赞同：4
> 
> 时间：2012-07-11T16:44:33.827
> 
> 标签：objective-c, xcode, macos, amazon-web-services, amazon-s3

mac os x 中的 amazon s3 有任何可用的教程或示例吗？
只需要一个 s3 简单上传下载操作的示例。
搜索了很多 api.but 不可用！
发现汤姆安德森的定制一个。但我不能让它工作。
有什么解决方法吗？寻找教程或源示例？

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2014-11-22T05:00:25.870

从命令行，[aws-cli](http://aws.amazon.com/cli/)是从 S3 上传/下载的最简单方法。

请参阅：[http ://docs.aws.amazon.com/cli/latest/reference/s3/index.html](http://docs.aws.amazon.com/cli/latest/reference/s3/index.html)

对于编程访问，可用的 SDK 在这里：[http ://aws.amazon.com/tools/](http://aws.amazon.com/tools/)

# r - 为生存分析创建审查 DV（长格式）

> ID：11437424
> 
> 赞同：0
> 
> 时间：2012-07-11T16:44:37.650
> 
> 标签：r

另一个 R 新手问题。

我正在做一个需要我使用生存分析的项目。具体来说，我需要使用离散单元生存分析（因此 Cox 回归或其他假设我的 DV 是连续的方法是不可能的）。

我已将我的数据集转换为长格式，我需要通过（步骤 1）找到最后一次变量（“q”）=1；（步骤 2）在 time+1 将我的“dv”重新编码为“0”；（步骤 3）在 time+2...n 将我的“dv”重新编码为“NA”；（步骤 4）删除“dv”=NA 时的所有观察值（行）。

在我这样做之前，我似乎应该创建一个默认分配给“1”的DV。在第 3 步之后，我的数据将如下所示：

```
 id  time q  dv   
 1    1   1   1
 1    2   0   1
 1    3   1   1
 1    4   0   0
 1    5   0   NA
 1    6   0   NA
 2    1   1   1
 2    2   1   1
 2    3   0   0
 2    4   0   NA
 2    5   0   NA
 2    6   0   NA 
```

请注意，“q”可以随时间在“0”或“1”之间变化（参见时间=2 时 id=1 的观察结果），但由于生存分析的性质，“dv”不能。我需要做的是创建一个变量，找出“q”在“1”和“0”之间变化的最后时间，然后进行相应的审查。在第 4 步之后，我的数据应如下所示：

```
 id  time q  dv   
 1    1   1   1
 1    2   0   1
 1    3   1   1
 1    4   0   0
 2    1   1   1
 2    2   1   1
 2    3   0   0 
```

感谢您提供所有可能的帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-12T16:18:39.393

这比预期的更冗长，但它为您完成了长格式片段的工作：

我从提供的数据开始，但使用宽而不是长。

```
zz <- textConnection("id  time q  dv   
1    1   1   1
1    2   0   1
1    3   1   1
1    4   0   0
1    5   0   NA
1    6   0   NA
2    1   1   1
2    2   1   1
2    3   0   0
2    4   0   NA
2    5   0   NA
2    6   0   NA
")
d <- read.table(zz, header = TRUE)
d$dv <- NULL
close(zz)

# start out with wide instead of long
dw <- reshape(d, direction='wide', timevar="time", sep="") 
dw 
```

```
##   id q1 q2 q3 q4 q5 q6
## 1  1  1  0  1  0  0  0
## 7  2  1  1  0  0  0  0 
```

使用为每个宽行/观察生成适当的“dv”变量的函数。

```
censor <- function(periods) {
  n <- length(periods)
  cperiods <- periods*1:n # multiply to get positions
  n.obs <- max(cperiods) # position of last q=1, and one q=0  
  periods[(n.obs+1):n] <- NA # NA's for periods outside observed range
  n.cens <- n - n.obs - 1 # number censored
  c(rep(1, n.obs-1), 0, rep(NA, n.cens+1)) # fill "dv" accordingly
} 
```

应用所述功能，生成经过适当审查的宽数据集。

```
# 应用 censored()，创建宽格式的 dv 变量
dw.censored <- data.frame(t(apply(dw, 1, FUN = censor)))
dw.censored

```

```
##   X1 X2 X3 X4 X5 X6 X7
## 1  1  1  1  0 NA NA NA
## 7  1  1  0 NA NA NA NA 
```

现在回到长格式（具有美学格式、排序等）

```
dl.censored <- reshape(dw.censored, varying = 1:7, timevar = "time", 
                       sep = "", direction = "long")
dl.censored <- dl.censored[order(dl.censored$id, dl.censored$time),]
dl.censored$dv <- dl.censored$X
rownames(dl.censored) <- dl.censored$X <- NULL
dl.censored

##    time id dv
## 1     1  1  1
## 2     2  1  1
## 3     3  1  1
## 4     4  1  0
## 5     5  1 NA
## 6     6  1 NA
## 7     7  1 NA
## 8     1  2  1
## 9     2  2  1
## 10    3  2  0
## 11    4  2 NA
## 12    5  2 NA
## 13    6  2 NA
## 14    7  2 NA 
```

并且没有 NA：

```
dl.censored <- na.omit(dl.censored) # 没有 NA
dl.censored

```

```
##    time id dv
## 1     1  1  1
## 2     2  1  1
## 3     3  1  1
## 4     4  1  0
## 8     1  2  1
## 9     2  2  1
## 10    3  2  0 
```

# jboss7.x - web.xml 可以 只是一个班级？

> ID：11437428
> 
> 赞同：1
> 
> 时间：2012-07-11T16:44:46.823
> 
> 标签：jboss7.x, web.xml

我在网上看到很多这样的例子，比如......

```
<?xml version="1.0" encoding="UTF-8"?>
<web-app xmlns="http://java.sun.com/xml/ns/javaee"
         xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
         xsi:schemaLocation="http://java.sun.com/xml/ns/javaee
http://java.sun.com/xml/ns/javaee/web-app_3_0.xsd"
     version="3.0">
<servlet-mapping>
<servlet-name>javax.ws.rs.core.Application</servlet-name>
<url-pattern>/hello/*</url-pattern>
</servlet-mapping>
</web-app> 
```

但是，这对我永远不起作用。我收到一个错误

```
java.lang.IllegalArgumentException: Servlet mapping specifies an unknown servlet name javax.ws.rs.core.Application 
```

那么，能够直接在 servlet-name 中使用类名的秘诀是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-05T21:46:30.317

我认为@davideconsonni 几乎是正确的：

```
<servlet>
    <servlet-name>HelloServlet</servlet-name>
    <servlet-class>javax.ws.rs.core.Application</servlet-class>
    <load-on-startup>1</load-on-startup>
</servlet>
<servlet-mapping>
    <servlet-name>HelloServlet</servlet-name>
    <url-pattern>/hello/*</url-pattern>
</servlet-mapping> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-03T08:20:22.770

首先声明你的servlet：

```
<servlet>
    <servlet-name>javax.ws.rs.core.Application</servlet-name>
    <load-on-startup>1</load-on-startup>
</servlet>
<servlet-mapping>
    <servlet-name>javax.ws.rs.core.Application</servlet-name>
    <url-pattern>/hello/*</url-pattern>
</servlet-mapping> 
```

# mongodb - Doctrine MongoDB ODM nullable=false 不起作用

> ID：11437430
> 
> 赞同：4
> 
> 时间：2012-07-11T16:44:58.050
> 
> 标签：mongodb, symfony, doctrine-orm, nullable, doctrine-odm

我正在使用来自 git 存储库的 Doctrine MongoDB ODM 和 Symfony2 的主分支以及 mongo 扩展 1.2.10。

我创建了许多类/文档，其注释类似于：

```
namespace Acme\StoreBundle\Document;

use Doctrine\ODM\MongoDB\Mapping\Annotations as MongoDB;

/**
 * @MongoDB\Document
 */
class Person
{
    /**
     * @MongoDB\Id
     */
    protected $id;

    /**
     * @MongoDB\String(nullable=false)
     */
    protected $name;

    /**
     * @MongoDB\ReferenceOne(targetDocument="PersonType", inversedBy="person", nullable=false)
     */
    protected $personType;
} 
```

当我创建并保留一个新文档而不设置值或引用时，我没有收到任何错误。我是否误解了 nullable 选项的使用，需要在生命周期回调中调用验证代码，错误地使用注释，或者可能是 Doctrine 中的错误？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2015-07-28T17:23:31.350

如果您查看[注释参考](http://doctrine-mongodb-odm.readthedocs.org/en/latest/reference/annotations-reference.html)，设置`nullable=false`并不意味着它将无法对空值进行验证。

从文档：

> 可空 - 默认情况下，`$unset`如果 PHP 值为空，ODM 将在 MongoDB 中字段。将此选项指定为 true 以强制 ODM 在数据库中存储空值，而不是取消设置该字段。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-04-20T10:38:45.120

`use Symfony\Component\Validator\Constraints as Assert;`

`/** * @mongodb\Field(name="name", type="string") * @Assert\NotBlank() */ private $name;`

**希望你能得到线索。**

# cocos2d-iphone - Cocos2D 2.0 - 以编程方式选择一个 CCMenuItem/CCMenuItemToggle

> ID：11437432
> 
> 赞同：1
> 
> 时间：2012-07-11T16:45:02.737
> 
> 标签：cocos2d-iphone

我有这个

```
 CCMenuItem *play =
    [CCMenuItemSprite itemWithNormalSprite:[CCSprite spriteWithSpriteFrameName:@"play.png"]
                            selectedSprite:[CCSprite spriteWithSpriteFrameName:@"stop.png"]];

    CCMenuItem *stop =
    [CCMenuItemSprite itemWithNormalSprite:[CCSprite spriteWithSpriteFrameName:@"stop.png"]
                            selectedSprite:[CCSprite spriteWithSpriteFrameName:@"play.png"]];

    CCMenuItemToggle *stopPlayButton = 
    [CCMenuItemToggle itemWithTarget:self 
                            selector:@selector(togglePlayStop:)
                               items:Play, botaoStop, nil];

    CCMenu *togglePlayStop = [CCMenu menuWithItems:stopPlayButton, nil]; 
```

这是一个播放/停止按钮。它通常显示播放图像。用户点击按钮，电影播放，按钮切换以显示停止图像，因此用户可以停止播放电影。电影走到了尽头。该应用程序停止播放电影。现在我必须切换按钮上的图像，以再次显示播放图像。

如何以编程方式“点击”按钮？

谢谢。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-07-11T17:27:17.280

`CCMenuItemToggle`实例具有属性`selectedIndex`。你既可以读也可以写。在您的情况下，索引 0 处的项目将是您的播放按钮，索引 1 处的项目将是您的停止按钮。因此，在界面中声明您的切换就足够了，然后只需更改`selectedIndex`属性。两个都

```
[m_stopPlayToggle setSelectedIndex:0]; 
```

和

```
m_stopPlayToggle.selectedIndex = 0; 
```

会将您的播放按钮设置为活动状态。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-11-20T04:18:46.323

从 Cocos2d-x 3.0 开始，API 改为**MenuItemToggle**，用法如下：

```
//in SomeLayer init()
auto onItem = MenuItemImage::create(...);
auto offItem = MenuItemImage::create(...);
auto aToggle= MenuItemToggle::createWithCallback(CC_CALLBACK_1(SomeLayer::onAToggle, this), 
                                                                    onItem, //0th
                                                                    offItem, //1st
                                                                    NULL);
aToggle->setSelectedIndex(getSomeBoolValueForThisToggle()?0:1); //true to show 0th, false 1st 
```

# qt - tslib：从所有合适的输入设备读取？

> ID：11437435
> 
> 赞同：2
> 
> 时间：2012-07-11T16:45:06.070
> 
> 标签：qt, touchscreen

有没有办法在*不*明确指定确切输入设备的情况下使用触摸屏？

让我深入解释...

我的主机有许多输入设备：

```
$ ls -al /dev/input/
drwxr-xr-x    2 root     root          200 Jul 11 16:09 .
drwxr-xr-x   11 root     root         4580 Jul 10 15:31 ..
crw-rw-rw-    1 root     root      13,  64 Jan  1  1970 event0
crw-rw-rw-    1 root     root      13,  65 Jan  1  1970 event1
crw-rw-rw-    1 root     root      13,  66 Jan  1  1970 event2
crw-rw-rw-    1 root     root      13,  95 Jan  1  1970 event99
crw-rw----    1 root     root      13,  63 Jan  1  1970 mice
crw-rw----    1 root     root      10, 223 Jan  1  1970 uinput 
```

这些输入设备之一（通常是 event2）是通过 USB 连接的触摸屏。我的问题是...

*   eventX 设备可能并不总是 event2
*   触摸屏可能会被拔出并再次插入（这将导致不同的 eventX 设备）并且触摸屏应该可以再次工作**而无需重新启动应用程序**
*   USB 主机可能偶尔会进行重置（由于其他问题），从而导致 USB 断开连接和 USB 重新连接触摸屏

该应用程序是一个以全屏模式运行的 Qt 嵌入式 4.7 应用程序，使用**tslib**作为触摸屏驱动程序。

对于另一个有类似问题的项目，我已经编写了一个小守护程序（我称之为“eventbundler”），它从所有 /dev/input/eventX 设备读取数据并将数据发送到命名管道（FIFO）。但是，tslib 不会接受该 fifo 作为输入设备 ( `QWS_MOUSE_PROTO=tslib:/dev/input/eventbundler-mouse`) - 可能是因为查询设备功能的 IOCTL 不起作用（它显示为“ `selected device is not a touchscreen I understand`”）。

无论如何，我需要的是*tslib*应该以某种方式自动检测触摸屏设备并从中读取，即使已经拔掉了一会儿。

有什么提示吗？

如果有任何帮助，我愿意更改 Qt 源代码。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2016-11-30T10:11:32.107

这不是解决方案，但是tslib有一个[问题非常模糊地描述了您的问题。](https://github.com/kergoth/tslib/issues/52)如果在那里讨论有关路径选择的想法，它至少有一天可能*有助于*解决这个问题。

# actionscript-3 - Flex 生成的 SWF 大小比 Flash Pro 大很多

> ID：11437440
> 
> 赞同：0
> 
> 时间：2012-07-11T16:45:20.567
> 
> 标签：actionscript-3, size, flash

我创建了一个纯 Actionscript 项目，我需要在 Flex 中嵌入和编译它。主要原因是我需要使用Web Services，而在Pro 中使用它们要困难得多。

当项目在 Pro 中编译时，生成的 SWF 只有 167KB - 不包括 Web 服务和 Flex 的默认预加载器。当“入侵”到 Flex 中时，它会飙升到惊人的 975KB。Web 服务肯定不能占用 800KB 的大小。两者都没有嵌入图形或声音。

这是我用来将我的项目嵌入到 Flex (main mxml) 中的 hackish 方式：

```
<?xml version="1.0" encoding="utf-8"?>
<s:Application xmlns:fx="http://ns.adobe.com/mxml/2009" 
               xmlns:s="library://ns.adobe.com/flex/spark" 
               xmlns:mx="library://ns.adobe.com/flex/mx" width="1300" height="700" applicationComplete="init()"
               preloader="mx.preloaders.DownloadProgressBar">
    <fx:Declarations>
        <!-- Place non-visual elements (e.g., services, value objects) here -->
    </fx:Declarations>

    <fx:Script>
        <![CDATA[
            private function init():void
            {   
                var show:TradeShowOrig = new TradeShowOrig();
                this.stage.addChild(show);
                show.init();
            }
        ]]>
    </fx:Script>

</s:Application> 
```

我想，臃肿的是它的使用`<s:Application>`也未被使用。任何人都可以推荐任何可能减少 SWF 大小的方法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-11T16:56:34.013

您看到更大的 Flex 应用程序有两个原因

1.  正如您所指出的，s:Application 是一个基于和引用 Flex 框架中大量类的类，它为应用程序引入了 800K 大小。我已经使用 Flash 和 Flex 多年了。Flex 提供创建企业应用程序的灵活性，它还提供 CSS、火花皮肤、灵活和流畅的布局。这些特性使企业开发人员能够快速创建业务应用程序。虽然 800K 看起来很大，但我们不再生活在 9600bps 调制解调器的时代。

2.  Flex 输出调试和发布 SWF。SWF 的调试版本要大得多，因此如果您导出发布版本，您会看到较小的 SWF。

Adobe 还引入了 cachable 框架，它本质上将 flex 框架外部化为一个只需要下载一次的可缓存和可重用的 RSL。这将从 Flex 应用程序中减少相当多的 KB。要启用该功能，您需要更改每个库在 Flex Build Path 对话框中的链接方式。

# git - 如何修复 Mercurial 卡在 Git subrepo push 上？

> ID：11437441
> 
> 赞同：8
> 
> 时间：2012-07-11T16:45:23.157
> 
> 标签：git, mercurial, github, mercurial-subrepos

1.  我有根 Mercurial repo（网站）。
2.  [我将GitHub 镜像](https://github.com/WordPress/WordPress)中的 WordPress 克隆到`/wp`子目录中。
3.  因为我想要非常特定（稳定）版本的 WP，但我没有正在进行的开发`git checkout 3.4.1`（标签在哪里`3.4.1`）。
4.  我在根 Mercurial 存储库中将其设置为子存储库并提交（WP 修订版在 中被很好地捕获`.hgsubstate`）。

麻烦从这里开始。我这样做`hg push`了，当它到达 WP 时：

```
no branch checked out in subrepo wp
cannot push revision e9bc63e25dc40c07ac3a6778dc2b48e1aa486e36 
```

然后它就退出了。甚至没有尝试推送根存储库。

我理解为什么 Mercurial会*尝试*推送 subrepo（预期行为），但我无法理解为什么它会在 subrepo 上完全失败：

1.  没有变化
2.  无论如何都有只读来源

如何让它明白我想要这个特定的修订版并且我不希望它弄乱 Git 子存储库？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-13T15:02:25.970

您将在此设置中遇到一些问题。

首先，似乎**mercurial 无法处理带有分离 HEAD 的 git subrepos**。

当你执行时`git checkout 3.4.1`，你的 repo 进入一个[分离的 HEAD](http://www.kernel.org/pub/software/scm/git/docs/git-checkout.html#_detached_head)状态（当你执行命令时你应该已经看到了一个警告）。此时，如果您运行`git branch`，您会看到它`(no branch)`被列为活动分支。当 mercurial 试图推动时，它会在这种状态下窒息。您可以询问[mercurial 开发人员列表](http://mercurial.selenic.com/wiki/MailingLists)为什么会发生这种情况，但这可能是现有 subrepo 实现的限制。

其次，**mercurial 使用 push 命令来同步 git subrepos**。

如果你要运行`git checkout -b <integration_branch> 3.4.1`，它会将 git 移出分离的 HEAD 状态。但是，当您尝试时`hg push`，它会尝试实际推送到远程 git 存储库。对于 mercurial 子存​​储库，即使您没有对远程的推送访问权限，它也可以检查传出更改。但是，GitHub 要求您进行身份验证，然后它才会告诉您两个存储库是否同步。因此，如果您没有对 git 远程的推送访问权限，那么这将失败。这是 mercurial 的 subrepo 策略设计的一部分。

如果您需要继续此设置，您可能应该执行以下操作：

1.  在 GitHub 上创建您自己的 WordPress 存储库的分支。
2.  将你的 fork 克隆到 mercurial subrepo 目录中。
3.  `git checkout -b <branch_name> 3.4.1`
4.  从那里继续

[在这个相关问题](https://stackoverflow.com/questions/4057888/adding-a-git-subrepository-to-mercurial)中有一些附加信息。

# java - 重新启动 while 循环

> ID：11437442
> 
> 赞同：3
> 
> 时间：2012-07-11T16:45:30.300
> 
> 标签：java

我正在尝试重新启动 while 循环。我已经声明了布尔类型的变量 keepGoing。如果 int 变量 x 不在窗口内，则 keepGoing 更改为 false。然后reset() 方法必须保持Going=true。它可以工作，但 while 循环不起作用。

带有 reset() 和 checkWin() 的类：

```
private void reset() {
    b.x = 250;
    b.y = 100;
    b.keepRunning = true;
    a.keepGoing = true;
    System.out.println(a.keepGoing);
}

public void checkWin() {
    if (b.keepRunning) {
        if (b.getX() < -10) {
            a.score++;

            JOptionPane.showMessageDialog(okno, "Player " + p.getScore()
                    + " - Computer " + a.getScore(), "Oh, well...",
                    JOptionPane.INFORMATION_MESSAGE);
            b.keepRunning = false;
            a.keepGoing = false;
            System.out.println(a.keepGoing);
            reset();
        } else if (b.getX() > 599) {
            p.score++;
            JOptionPane.showMessageDialog(okno, "Player " + p.getScore()
                    + " - Computer " + a.getScore(), "Good!",
                    JOptionPane.INFORMATION_MESSAGE);
            b.keepRunning = false;
            a.keepGoing = false;
            System.out.println(a.keepGoing);
            reset();
        }
    }
} 
```

带线程的第二类，keepGoing 和 while 循环：

```
Runnable intel = new Runnable() {
    public void run() {
        while (keepGoing) {
            while (getY() < board.ball.getY()) {
                System.out.println(keepGoing + " " + getY());
                try {
                    if (y == 220) {
                    } else {
                        y += 1;
                        Thread.sleep(10);
                    }
                } catch (InterruptedException e) {
                    e.printStackTrace();
                }
            }
            while (getY() > board.ball.getY()) {
                System.out.println(keepGoing + " " + getY());
                try {
                    if (y == 0) {
                    } else {
                        y -= 1;
                        Thread.sleep(10);
                    }
                } catch (InterruptedException e) {
                    // TODO Auto-generated catch block
                    e.printStackTrace();
                }
            }
        }
    }
}; 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-07-11T16:47:12.993

使用关键字`continue`进入循环的下一个迭代。例如：

```
while(true)
{
   // ...

   if(!condition) continue; // this will go to the beginning of the while loop.

   // ...
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-11T16:54:53.423

如果`keepGoing`标志是从不同的线程访问的（我认为您的示例正在显示，尚不清楚），那么您需要使用同步来确保当您`keepGoing`在 reset() 方法中更新标志时，它对中的线程可见你的可运行文件。您可能想查看`AtomicBoolean`课程。

参见 Effective Java，Item #66

# python - 无法向 Imgur 发送文件

> ID：11437444
> 
> 赞同：2
> 
> 时间：2012-07-11T16:45:34.560
> 
> 标签：python, python-requests, multipartform-data, imgur

我正在尝试使用[python requests lib使用](http://docs.python-requests.org/en/latest/user/quickstart/#post-a-multipart-encoded-file)[imgur api](http://api.imgur.com/resources_anon#upload)将图像上传到 Imgur 。api 返回 400，表示该文件不是受支持的文件类型或已损坏。我不认为图像损坏（我可以在本地查看它），并且我尝试过`.jpg`,`.jpeg`和`.png`. 这是代码：

```
api_key = "4adaaf1bd8caec42a5b007405e829eb0"
url = "http://api.imgur.com/2/upload.json"
r = requests.post(url, data={'key': api_key, 'image':{'file': ('test.png', open('test.png', 'rb'))}}) 
```

确切的错误信息：

```
{"error":{"message":"Image format not supported, or image is corrupt.","request":"\/2\/upload.json","method":"post","format":"json","parameters":"image = file, key = 4adaaf1bd8caec42a5b007405e829eb0"}} 
```

让我知道我是否可以提供更多信息。我对 Python 很熟悉，希望这是一些简单的失误，有人可以解释一下吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-11T17:09:53.653

我只是在猜测，但看看 imgur api，看起来 image 应该只是文件数据，而 requests 库将它包装成一个键值对（因此响应显示“image = file”）

我会尝试类似的东西：

```
import base64
api_key = "4adaaf1bd8caec42a5b007405e829eb0"
url = "http://api.imgur.com/2/upload.json"
fh = open('test.png', 'rb');
base64img = base64.b64encode(fh.read())
r = requests.post(url, data={'key': api_key, 'image':base64img}) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-11T17:10:42.800

您是否尝试过使用类似以下内容的明确内容？：

```
from base64 import b64encode

requests.post(
    url, 
    data = {
        'key': api_key, 
        'image': b64encode(open('file1.png', 'rb').read()),
        'type': 'base64',
        'name': 'file1.png',
        'title': 'Picture no. 1'
    }
) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-11T16:55:13.703

也许你想要 open('test.png','rb').read() 因为 open('test.png','rb') 是一个文件对象而不是文件的内容？

# wpf - WPF UI 使用 ListView 从 Csv 文件映射自定义字段

> ID：11437446
> 
> 赞同：0
> 
> 时间：2012-07-11T16:45:42.697
> 
> 标签：wpf, listview, wpf-controls

嗨尝试将我的应用程序迁移到 WPF，并且我正在尝试尽可能多地保留 MVVM。我的 WinForm 应用程序中的以下屏幕相当容易创建，我对 Xaml 和 WPF 没有这么好的运气。

![WinForm 自定义字段映射的屏幕截图](../Images/8c65b440670beaf7d6572e74be5dde25.png)

我喜欢它的工作原理，但我的目标是使用 WPF 重新创建它，或者以我还没有想到的方式进行此字段映射，这仍然满足将输入字段映射到我现有数据结构的基本要求.

目前这就是我在 Xaml 中所拥有的。

```
<UserControl x:Class="ImportJobDataView"
         xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
         xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
         xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006" 
         xmlns:d="http://schemas.microsoft.com/expression/blend/2008" 
         xmlns:kne="clr-namespace:FatigueMVVM"
         xmlns:local="clr-namespace:FatigueMVVM.DragDropListBox"                   
         mc:Ignorable="d" d:DesignHeight="350" d:DesignWidth="447">

<Grid Height="350" Width="448">

    <Grid.RowDefinitions >
        <RowDefinition Height="300" />
        <RowDefinition Height="50" />
    </Grid.RowDefinitions>

    <ListView ItemsSource="{Binding ImportedJobDataColumns}"  Margin="37,68,295,64" local:DragDropHelper.IsDragSource="true">
        <ListView.View >
            <GridView AllowsColumnReorder="True"   >
                <GridViewColumn Width="100" Header="Imported"/>
            </GridView>
        </ListView.View>
    </ListView>
    <ListView ItemsSource="{Binding KneJobDataColumns}"  Margin="193,68,41,64" AllowDrop="True" local:DragDropHelper.IsDropTarget="true">
        <ListView.View >
            <GridView AllowsColumnReorder="True"   >
                <GridViewColumn Width="100" Header="Import From" DisplayMemberBinding="{Binding ImportField }"   />
                <GridViewColumn Width="100" Header="Map To" DisplayMemberBinding="{Binding  KneField }" />
            </GridView>
        </ListView.View>
    </ListView>

    <Button Content="Open Csv" Height="23" HorizontalAlignment="Left" Margin="37,15,0,0" Name="Button1" VerticalAlignment="Top" Width="75" Command="{Binding OpenCsvCommand}" Grid.Row="1" />
    <Button Content="Clean Data" Height="23" HorizontalAlignment="Left" Margin="118,15,0,0" Name="Button2" VerticalAlignment="Top" Width="auto" Grid.Row="1" />
    <Button Content="View Imported Data" Height="23" HorizontalAlignment="Left" Margin="193,15,0,0" Name="Button3" VerticalAlignment="Top" Width="auto" Grid.Row="1" />
</Grid> 
```

这看起来接近我希望它的外观，但我无法进行拖放工作。您可能已经注意到，我正在使用 Bea Stollnitz 解决方案来尝试实现拖放。 [http://bea.stollnitz.com/blog/?p=53](http://bea.stollnitz.com/blog/?p=53) 她的解决方案仅适用于 ItemsControls，因此，恐怕它在我用来创建这两个的 GridView 中不起作用列。我只用列表框尝试过，拖放功能确实有效，但我确实需要两列才能完成这项工作。

![在此处输入图像描述](../Images/2ae989e72f6bd99f1e36b33922dee4c9.png)

有没有人有关于如何在这种情况下实现拖放的建议，或者我目前正在尝试实现的方式的替代方法。

非常感谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-22T05:05:52.807

我最终使用了 DataGrid 而不是 ListView，主要是因为它具有我想要的更多外观。因为时间有点紧迫，因为我已经在这个问题上浪费了很多时间，所以我决定只在代码隐藏中实现拖放功能。通过阅读这篇文章改变了我对此的看法...... [http://forums.silverlight.net/t/225274.aspx/1](http://forums.silverlight.net/t/225274.aspx/1)

虽然我正在处理的情况略有不同，但现在它在代码隐藏中，也许有一天我会将它移到 View-Model 中只是为了学习新的东西......如果有人不同意，并想提出一个简单的解决方案，将它移到 VM 中，做我的客人:) 下面是 UI 图像，显示了我要完成的工作，然后是 xaml，然后是代码隐藏。我从[http://www.wpftutorial.net/DragAndDrop.html](http://www.wpftutorial.net/DragAndDrop.html)开始，并以此为基础工作。此功能非常特定于这一用户控件，因此虽然我对通过 MVVM 模式传递鼠标事件的一般概念感兴趣，但我不确定将其应用于这种情况会有多大用处。

想法？

![自定义映射字段](../Images/875ab345ba28bd42e8af0e39f84e3bd8.png)

```
<Border BorderBrush="Silver" BorderThickness="1" Grid.RowSpan="2" HorizontalAlignment="Left" Margin="5" Name="Border1" VerticalAlignment="Top" Width="Auto" Height="Auto" >

    <StackPanel >

        <Expander Header="Instructions"  IsExpanded ="False"  ExpandDirection="Down" Width="Auto" Height="Auto" >
            <TextBlock Text="{Binding  Instructions}" TextWrapping="Wrap" Margin="5" />
        </Expander>

        <Grid Height="420" Width="485">

            <Grid.RowDefinitions >
                <RowDefinition Height="5*"  />
                <RowDefinition Height="5*"  />
            </Grid.RowDefinitions>
            <Grid.ColumnDefinitions>
                <ColumnDefinition Width="4*" />
                <ColumnDefinition Width="6*" />
            </Grid.ColumnDefinitions>

            <DataGrid AutoGenerateColumns="False" HorizontalAlignment="Stretch" 
              Margin="5" Name="DataGrid1" VerticalAlignment="Stretch"  Grid.Column="0" Grid.Row="0" Grid.RowSpan="2"
              ItemsSource="{Binding ImportedJobDataColumns}" SelectionUnit="Cell"  CanUserReorderColumns="False"
              PreviewMouseLeftButtonDown="DataGrid_MouseLeftButtonDown" MouseMove="DataGrid_MouseMove">
                <DataGrid.Columns>
                    <DataGridTextColumn Header="Imported" Binding="{Binding Path=.}" Width="*"  IsReadOnly="True" />
                </DataGrid.Columns>
            </DataGrid>

            <DataGrid AutoGenerateColumns="False" HorizontalAlignment="Stretch" 
              Margin="5" Name="DataGrid2" VerticalAlignment="Stretch"  Grid.Column="1" Grid.Row="0"
              ItemsSource="{Binding KneJobDataColumns}" SelectionUnit="Cell" CanUserReorderColumns="False" AllowDrop="True" 
              PreviewDragOver="DataGrid_PreviewDragOver" Drop="DataGrid_Drop">
                <DataGrid.Columns>
                    <DataGridTextColumn Header="From"  Binding="{Binding Path=ImportField}" Width="*" 
                                CanUserReorder="False" CanUserSort="False" IsReadOnly="True"/>
                    <DataGridTextColumn Header="To" Binding="{Binding KneField}" Width="*" 
                                CanUserSort="False"  CanUserReorder="False" IsReadOnly="True" />
                </DataGrid.Columns>
            </DataGrid>

            <Grid Margin="5"  VerticalAlignment="Stretch" HorizontalAlignment="Stretch"  Grid.Column="1" Grid.Row="1">

                <Grid.RowDefinitions>
                    <RowDefinition Height="*"/>
                    <RowDefinition Height="*"/>
                    <RowDefinition Height="*"/>
                    <RowDefinition Height="*"/>
                    <RowDefinition Height="*"/>
                    <RowDefinition Height="2*"/>
                </Grid.RowDefinitions>
                <Grid.ColumnDefinitions>
                    <ColumnDefinition Width="*" />
                    <ColumnDefinition Width="*" />
                </Grid.ColumnDefinitions>

                <Button Content="Auto Map" Grid.Column="0" Name="Button4" Height="Auto" HorizontalAlignment="Stretch" Command="{Binding AutoMap}" />
                <Button Content="Clear Map"   Grid.Column="1" Name="Button5" Height="Auto" HorizontalAlignment="Stretch" Command="{Binding ClearMappings}"/>

                <DockPanel Grid.Row="1" Grid.Column="0" >
                    <Label Content="Max Press." HorizontalAlignment="Left" Name="Label1" VerticalAlignment="Top" Width="Auto" />
                    <xctk:IntegerUpDown  Value="{Binding MaxPressureInc}" Minimum="1" Increment="10"/>
                </DockPanel>

                <DockPanel Grid.Row="1" Grid.Column="1" >
                    <Label Content="Min Depth" Grid.Row="1" Grid.Column="1" Height="28" HorizontalAlignment="Left"  Name="Label2" VerticalAlignment="Top" Width="69" />
                    <xctk:IntegerUpDown  Grid.Row="1" Grid.Column="1" Value="{Binding MinDepthInc}" Minimum="1" Increment="1"/>
                </DockPanel>

                <Button Content="Open Csv" Grid.Row="2" Grid.Column="0" Height="Auto"  Name="Button1"   Command="{Binding OpenCsv}" />
                <Button Content="Clean Data" Grid.Row="2" Grid.Column="1" Height="Auto"  Name="Button2" Command="{Binding CleanData}"  />
                <Button Content="View Imported Data" Grid.Row="3" Grid.Column="0" Grid.ColumnSpan="2"   Name="Button3"  />
                <ProgressBar  HorizontalAlignment="Stretch" Name="ProgressBar1" VerticalAlignment="Stretch" Grid.Row="4" IsIndeterminate="{Binding IsBusy}"
                 Foreground="Blue" Background="LightGray" Visibility="{Binding IsBusy, Converter={local:BooleanToVisibilityConverter}}" Grid.ColumnSpan="2" />
                <Label Content="Current File:" Grid.Column="0" Grid.Row="5" HorizontalAlignment="Left" VerticalAlignment="Center" />
                <TextBlock TextWrapping="Wrap" Text="{Binding CsvFileNameCurrent}" HorizontalAlignment="Right" Name="TextBlock1" 
                           VerticalAlignment="Center" Grid.Row="5" Grid.Column="0" Grid.ColumnSpan="2" Width="Auto" />
            </Grid>

        </Grid>

    </StackPanel>

</Border> 
```

```
Public Class ImportJobDataView

Public Sub New()

    ' This call is required by the designer.
    InitializeComponent()

    ' Add any initialization after the InitializeComponent() call.
    Me.DataContext = New ImportJobDataViewModel

End Sub

Private startPoint As Point

Private Sub DataGrid_MouseLeftButtonDown(sender As System.Object, e As System.Windows.Input.MouseButtonEventArgs)
    startPoint = e.GetPosition(Nothing)
End Sub

Private Sub DataGrid_MouseMove(sender As System.Object, e As System.Windows.Input.MouseEventArgs)

    'Current Mouse Position
    Dim MousePos = e.GetPosition(Nothing)
    Dim MouseVector As Vector = startPoint - MousePos

    'Only do the following if the left moust button is held, and the cursor has moved more than the minimum horizontal distance
    If (e.LeftButton = MouseButtonState.Pressed) And (MouseVector.Length > SystemParameters.MinimumHorizontalDragDistance) Then

        If TypeOf e.OriginalSource Is TextBlock Then

            'Get the TextBlock inside the Cell
            Dim TxtBlock As TextBlock = FindAncestor(Of TextBlock)(DirectCast(e.OriginalSource, FrameworkElement))

            'Initialize the drag & drop
            Dim DragData As New DataObject("String", TxtBlock.Text)
            DragDrop.DoDragDrop(TxtBlock, DragData, DragDropEffects.Copy)
        End If

    End If

End Sub

Private Sub DataGrid_PreviewDragOver(sender As System.Object, e As System.Windows.DragEventArgs)

    If TypeOf e.OriginalSource Is TextBlock Then

        Dim Cell As DataGridCell = FindAncestor(Of DataGridCell)(DirectCast(e.OriginalSource, DependencyObject))

        'We aren't in a cell, don't allow a drop 
        If Cell Is Nothing Then
            e.Effects = DragDropEffects.None
            Exit Sub
        End If

        'Make sure we don't have a drop in the second column
        If (Cell.Column.DisplayIndex > 0) Then
            e.Effects = DragDropEffects.None
        Else
            e.Effects = DragDropEffects.Copy
        End If

    Else
        e.Effects = DragDropEffects.None
    End If

End Sub

Private Sub DataGrid_Drop(sender As System.Object, e As System.Windows.DragEventArgs)

    If e.Data.GetDataPresent("String") Then

        Dim SourceString As String = CStr(e.Data.GetData("String"))

        If TypeOf e.OriginalSource Is TextBlock Then
            'Write to cell contents only, so that we don't end up writing to the textblock inside the cells header row.
            Dim Cell As DataGridCell = FindAncestor(Of DataGridCell)(DirectCast(e.OriginalSource, DependencyObject))
            If Cell Is Nothing Then Exit Sub
            Cell.Content = SourceString
        End If

    End If

End Sub

Private Function FindAncestor(Of T As DependencyObject)(current As DependencyObject) As T
    Do
        If TypeOf current Is T Then
            Return DirectCast(current, T)
        End If
        current = VisualTreeHelper.GetParent(current)
    Loop While current IsNot Nothing
    Return Nothing
End Function

End Class 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-13T13:36:18.467

如果没有看到代码，很难说出确切的问题是什么，但是我之前使用过 Bea Stollnitz 的 DragDrop 代码，并且知道她的 DragDrop 类有几个地方将源容器或目标容器转换为一个`ItemsControl`或`ListBox`什至可能是一个`ListBoxItem`,并且仅在结果不为空时才继续。

您需要更新这些点以投射为`ListView`（或`ListViewItem`）并调整那里的逻辑以考虑 ListView 的 VisualTree（我使用[Snoop](http://snoopwpf.codeplex.com/)在运行时查看 Visual Tree）

# .net - 舍入整数除法

> ID：11437449
> 
> 赞同：0
> 
> 时间：2012-07-11T16:45:56.003
> 
> 标签：.net, vb.net, math, division

如果我每页给出了一定的行数，并且必须找出已经使用了多少页。如果我把它分开，我仍然没有得到 2 页：

```
 Dim lines As Integer = 68
    Dim lines_per_page As Integer = 65
    Dim pages_used As Integer
    Pages_used =  lines_per_page / lines 
```

你能帮忙吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-11T17:35:45.990

你正在倒着做你的划分。您必须将总行数除以每页行数。查看条款如何以这种方式取消：

x pages = (y lines/1 page) / (z lines) << yields 1/pages（错误！）

x页=（z行）/（y行/1页）=（z行）*（1页/y行）<<正确！

另请注意，您需要执行双除法，而不是整数除法，然后将结果值向上舍入，因为部分页面必须四舍五入为整页。

```
Dim lines As Integer = 68 
Dim lines_per_page As Double = 65 
Dim pages_used As Integer 
pages_used = CType(Math.Ceiling(lines / lines_per_page), Integer) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-11T17:10:11.850

**注意：此解决方案使用您提供的参数，类型不变。Roken 的解决方案在逻辑上是正确的，但不会编译，因为 pages_used 被转换为整数。**

使用以下内容：

```
Dim lines As Integer = 68
Dim lines_per_page As Integer = 65
Dim pages_used As Integer

pages_used = (lines + lines_per_page - 1) \ lines_per_page 
```

结果：`pages_used = 2`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-11T16:55:22.863

那是因为您将 Pages_Used 作为整数。VB 将对结果进行四舍五入。尝试使用双精度。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-03-26T13:17:44.790

这里的问题是你正在扭转分裂。你应该这样划分每页的行数

**Pages_used = 行数 / lines_per_page**

不是相反。

# jsf - PrimeFaces中remoteCommand的oncomplete和更新不起作用

> ID：11437450
> 
> 赞同：0
> 
> 时间：2012-07-11T16:45:57.510
> 
> 标签：jsf, primefaces

我使用隐藏值和 primeface 的 remoteCommand 将参数从 Javascript 函数传递给 ManagedBeans。在托管 bean 中，我正在进行一些 web 服务调用。在使用 update 属性进行 web 服务调用后，我需要更新 primeface 数据表，并且在 oncomplete 中我正在调用 JS.Botn update 并且 oncomplete 对我不起作用。

```
<h:form id ="pForm"> 
<p:dataTable style="height:500px;" id="activeStoreTable" var="stIter" value="#   {flowScope.str}"  >
    <p:column width="140"  filterBy="#{stIter.Name}">
           <p:commandLink update="@form"
                 onclick="setCenter('#{stIter.Name}' );"/>                                  
      </p:column>
</p:dataTable> 

<h:inputHidden id="update" value="#{updateBean.value}" />
<p:remoteCommand name="remoteCommand" process="update" update=":pForm:activeTable"      oncomplete="init('flowScope.Str');"/>
<p:commandButton value="save" onclick="check();" name="saves" >
</h:form> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-04T12:19:05.510

看起来像一个错字，您想更新**:pForm:activeTable**但该表称为**activeStoreTable**

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-12-15T15:35:06.850

我认为你没有正确完成它我猜远程命令没有被调用，因为要调用它你应该替换 onclick="setCenter('#{stIter.Name}' 到 onclick="remoteCommand() "，要传递 '#{stIter.Name}' 参数，你可以这样做

那么你会得到类似的东西：

```
<h:form id ="pForm"> 
<p:dataTable style="height:500px;" id="activeStoreTable" 
      var="stIter" value="#   {flowScope.str}"  >
    <p:column width="140"  filterBy="#{stIter.Name}">
           <p:commandLink update="@form"
                 onclick="remoteCommand()"
                 oncomplete="javascript:init('flowScope.Str');"
 />                                  
      </p:column>
</p:dataTable> 

<h:inputHidden id="update" value="#{updateBean.value}" />

<p:remoteCommand name="remoteCommand" process="update" 
        update=":pForm:activeTable"  >
<f:setPropertyActionListener value="#{stIter.Name}" 
        target="#{bean.methodName()}" />
</p:remoteCommand>

<p:commandButton value="save" onclick="check();" name="saves" >
</h:form> 
```

我不知道你在做什么，但在你的代码中，但我认为你没有调用远程组件命令。

另外我猜想 oncompleteAttribute 可能没有工作，因为它缺少一些东西，你也许可以试试这个：
oncomplete="javascript:init('flowScope.Str');"

您还可以从 jsf 传递变量，例如
oncomplete="javascript:somefunction('${bean.StringAttribute}');"

我希望它会有所帮助

# .net - 在 .NET 中，如何忽略 XML 比较中的结束标记？

> ID：11437451
> 
> 赞同：0
> 
> 时间：2012-07-11T16:45:58.060
> 
> 标签：.net, xml, comparison

我正在尝试比较两个包含 xml 的 .NET 字符串

```
<FIRST_NAME type="CHAR" /> 
```

和

```
<FIRST_NAME type="CHAR"></FIRST_NAME> 
```

如果我将它们按原样（作为字符串）进行比较，则会导致错误。我希望比较结果为真，因为在 XML 中它们在功能上是相同的。我需要做什么才能比较这两个项目（以及其他类似项目，区别在于缺少结束标记或存在）返回 true？

请注意，只要最终结果是返回 true 的函数/方法，就可以将字符串转换为某种 XML 对象/类型。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-11T16:53:02.597

.NET 中内置的 XML 数字签名功能包括一个名为[XmlDsigC14NTransform](http://msdn.microsoft.com/en-us/library/system.security.cryptography.xml.xmldsigc14ntransform.aspx)的类，其目的是将 XML 转换为规范表示，以便可以比较两个块的相等性。除其他外，它将规范化自终止元素。您可以阅读[有关它支持的各种形式的规范化的更多信息](http://msdn.microsoft.com/en-us/library/system.security.cryptography.xml.signedinfo.canonicalizationmethod.aspx)。

因此，您可以将两个字符串解析为两个`XmlDocument`实例，通过转换 ( `LoadInput/GetOutput`) 运行每个实例，然后比较两个输出：

```
 void Test()
        {
            string xml1 = @"<FIRST_NAME type=""CHAR"" />";
            string xml2 = @"<FIRST_NAME type='CHAR'></FIRST_NAME>";
            bool areEqual = Compare(xml1,xml2);
        }

        bool Compare(string xml1, string xml2)
        {            
            return Canonicalize(xml1).Equals(Canonicalize(xml2));            
        }

        string Canonicalize(string xml)
        {
            var doc = new XmlDocument();
            doc.LoadXml(xml);
            var xmlTransform = new XmlDsigC14NTransform(true) { Algorithm = SignedXml.XmlDsigExcC14NTransformUrl };
            xmlTransform.LoadInput(doc);
            using( var stream = (Stream)xmlTransform.GetOutput(typeof(Stream)))
            {
                var docOut = new XmlDocument();
                docOut.Load(stream);
                return docOut.DocumentElement.OuterXml;
            }
        } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-11T21:34:41.150

您可以使用 XPath 2.0（或 XQuery 1.0）deep-equal() 函数解析这两个文档并比较生成的文档节点。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-11T17:38:52.300

使用**Microsoft XML Diff**：请参阅以下链接：

*   [在您的应用程序中使用 XML 差异和补丁工具](http://msdn.microsoft.com/en-us/library/aa302294.aspx)
*   [XML 差异和补丁 GUI 工具](http://msdn.microsoft.com/en-us/library/aa302295)

# django - Django 模板：获取另一种语言的当前 URL

> ID：11437454
> 
> 赞同：31
> 
> 时间：2012-07-11T16:46:02.897
> 
> 标签：django, internationalization, django-templates

我正在使用`i18n_patterns`在 Django 应用程序中创建语言前缀。

我的网址如下所示：

```
/de/contact/
/fr/contact/
/it/contact/ 
```

在我的基本模板中，我遍历所有可用语言以显示语言切换链接。

```
{% get_available_languages as languages %}
<nav id="language_chooser">
    <ul>
        {% for lang_code, lang_name in languages %}
            {% language lang_code %}
            <li><a href="{% url 'home' %}" alt="{{ lang_name }}" title="{{ lang_name }}">{{ lang_code }}</a></li
            {% endlanguage %}
        {% endfor %}
    </ul>
</nav> 
```

在这种情况下，我正在反转“主页”URL。有没有办法获取当前页面的翻译 URL？

如果我在德语版的“联系”页面上，我希望“fr”链接指向法语版的“联系”页面，而不是“主页”页面。

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2013-06-27T19:41:45.330

我没有使用语言前缀，而是使用翻译后的网址。但是，此模板标签也应该可以帮助您：

```
# This Python file uses the following encoding: utf-8

from django import template
from django.core.urlresolvers import reverse # from django.urls for Django >= 2.0
from django.core.urlresolvers import resolve # from django.urls for Django >= 2.0
from django.utils import translation

register = template.Library()

class TranslatedURL(template.Node):
    def __init__(self, language):
        self.language = language
    def render(self, context):
        view = resolve(context['request'].path)
        request_language = translation.get_language()
        translation.activate(self.language)
        url = reverse(view.url_name, args=view.args, kwargs=view.kwargs)
        translation.activate(request_language)
        return url

@register.tag(name='translate_url')
def do_translate_url(parser, token):
    language = token.split_contents()[1]
    return TranslatedURL(language) 
```

它以所需语言返回当前 url。像这样使用它：`{% translate_url de %}`

欢迎提出改进意见和建议。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2014-02-05T09:52:16.587

这个片段应该这样做：

[https://djangosnippets.org/snippets/2875/](https://djangosnippets.org/snippets/2875/)

[将其添加为自定义模板标签](https://docs.djangoproject.com/en/dev/howto/custom-template-tags/)后，您可以执行以下操作：

`<a href='{% change_lang 'fr' %}'>View this page in French</a>`

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2017-07-12T15:01:35.577

我认为值得一提的是，有一个名为`translate_url`.

```
from django.urls import translate_url
translate_url(url, lang_code) 
```

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2017-12-29T03:05:55.887

使用[django_hreflang](https://pypi.python.org/pypi/django_hreflang/1.7)：

```
{% load hreflang %}

<ul>
    <li><a href="{% translate_url 'en' %}" hreflang="en">English</a></li>
    <li><a href="{% translate_url 'ru' %}" hreflang="ru">Russian</a></li>
</ul> 
```

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2012-08-13T11:29:58.590

我认为你给这个问题增加了不必要的复杂性。您正在寻找的是一个简单的语言选择器。Django 提供了开箱即用的功能，它总是重定向到当前页面（以另一种语言）。

这记录在这里：

[https://docs.djangoproject.com/en/dev/topics/i18n/translation/#django.conf.urls.i18n.set_language](https://docs.djangoproject.com/en/dev/topics/i18n/translation/#django.conf.urls.i18n.set_language)

唯一的问题是`set_language`视图需要一个 POST 参数，所以你需要使用一个`<form>`元素；您不能使用简单的`<a href="...">`链接。但是，有时您希望语言选择器看起来像一个链接，而不是带有选择小部件的表单。我的建议是使用一个表单，但它的样式看起来像一个链接。

您的模板可能如下所示：

```
<nav id="language_chooser">
    <ul>
        {% get_language_info_list for LANGUAGES as languages %}
        {% for language in languages %}
            <form action="{% url 'set_language' %}" method="post">
                {% csrf_token %}
                <input name="next" type="hidden" value="{{ redirect_to }}" />
                <input name="language" type="hidden" value="{{ language.code }}" />
                <button type="submit">{{ language.local_name }}"</button>
            </form>
        {% endfor %}
    </ul>
</nav> 
```

然后使用 CSS 设置表单样式并提交按钮，使其看起来像普通链接：

```
ul#language_chooser form {
    display: inline; 
    margin: 0;
    padding: 0;
}

ul#language_chooser button {
    margin: 0;
    padding: 0;
    border: none;
    background: none;
    color: blue; /* whatever you like */
    text-decoration: underline; /* if you like */
} 
```

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2014-03-11T06:51:40.643

我使用[文档中的标准语言形式](https://docs.djangoproject.com/en/1.6/topics/i18n/translation/#django.views.i18n.set_language)

```
<form action="{% url 'set_language' %}" method="post" id="lang_changer">
{% csrf_token %}
<input name="next" type="hidden" value="{{ redirect_to }}" />
<select name="language">
{% get_language_info_list for LANGUAGES as languages %}
{% for language in languages %}
<option value="{{ language.code }}"{% if language.code == LANGUAGE_CODE %} selected="selected"{% endif %}>
    {{ language.name_local }} ({{ language.code }})
</option>
{% endfor %}
</select>
<input type="submit" value="Go" />
</form> 
```

和 jquery 修复以使用 url lang 前缀：

```
$('#lang_changer input[name="next"]').attr('value', '/'+window.location.pathname.substring(4)); 
```

页面准备好时运行。

* * *

## 回答 #7

> 赞同：3
> 
> 时间：2018-08-22T19:40:27.970

一个简单的解决方案是使用带有模板标签[的 Django`translate_url`函数：](https://docs.djangoproject.com/en/2.1/_modules/django/urls/base/)

```
# utils/templatetags/utils.py
from django.template import Library
from django.urls import translate_url as django_translate_url

register = Library()

@register.simple_tag(takes_context=True)
def translate_url(context, lang_code):
    path = context.get('request').get_full_path()
    return django_translate_url(path, lang_code) 
```

然后在您的 html 中以这种方式使用它进行语言选择：

```
{% load i18n utils %}
{% get_available_languages as languages %}

<ul>
{% for lang_code, lang_name in languages %}
     <li><a href="{% translate_url lang_code %}">{{ lang_code }}</a></li>
{% endfor %}
</ul> 
```

对于 hreflangs ：

```
{% get_available_languages as languages %}
{% for lang_code, lang_name in languages %}
    <link rel="alternate" hreflang="{{lang_code}}" href="{% translate_url lang_code %}" />
{% endfor %} 
```

希望这可以帮助。

* * *

## 回答 #8

> 赞同：2
> 
> 时间：2018-02-11T12:01:58.083

对于 Django 2.0（基于 Philipp Zedler 的[回答](https://stackoverflow.com/a/17351858/9345582)）

**自定义模板：**

```
from django import template
from django.urls import reverse
from django.urls import resolve
from django.utils import translation
register = template.Library()

@register.simple_tag(takes_context=True)
def translate_url(context, language):
  view = resolve(context['request'].path)
  request_language = translation.get_language()
  translation.activate(language)
  url = reverse(view.app_name+":"+view.url_name, args=view.args, kwargs=view.kwargs, )
  translation.activate(request_language)
  return url 
```

**在模板中：**

```
{% get_available_languages as LANGUAGES %}
<ul>
  {% for lang_code, lang_name in LANGUAGES %}
    <li><a href="{% translate_url lang_code %}">{{ lang_name }}</a></li>
  {% endfor %}
</ul> 
```

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2015-12-18T23:43:36.577

我使用自定义模板标签遇到的问题是该函数根据当前 url 计算其他语言等效项，因为我使用的是***[modeltranslation 包](https://github.com/deschler/django-modeltranslation "模型翻译")***，那么 slug 在 url 之间总是相同的。例如：

```
example.com/en/article/english-slug
example.com/es/articulo/english-slug 
```

为了解决这个问题，我采取了一种稍微不同的方法，在视图级别计算备用 url 并让它们在模板上下文中可用。

为此：

1-使用以下帮助函数创建一个*utils.py文件*

```
from django.utils.translation import activate, get_language
from django.conf import settings

def getAlternateUrls(object):
    #iterate through all translated languages and get its url for alt lang meta tag                      
    cur_language = get_language()
    altUrls = {}
    for language in settings.LANGUAGES:
        try:
            code = language[0]
            activate(code)
            url = object.get_absolute_url()
            altUrls[code] = url
        finally:
            activate(cur_language)
    return altUrls; 
```

2-让您的模型定义反向 url：[get_absolute_url](https://docs.djangoproject.com/en/1.9/ref/models/instances/#get-absolute-url "get_absolute_url")

3-添加一个上下文变量，它将在您的*views.py中保存urls字典*

```
from .utils import getAlternateUrls
...
def MyView(DetailView):
    def get_context_data(self, **kwargs):
        context['alt_urls'] = getAlternateUrls(self.object) 
```

4- 在模板的头部生成备用网址元标记

```
<!-- alternate lang -->
{% for key, value in alt_urls.items %}
<link rel="alternate" hreflang="{{ key }}" href="http://{{ request.get_host }}{{ value}}">
{% endfor %}
{% endblock %} 
```

*在 Django 1.8 中测试*

* * *

## 回答 #10

> 赞同：1
> 
> 时间：2016-08-05T10:03:02.000

我试图让它尽可能简单 - 使用`reverse()`任意数量的动态`kwargs`，以便语言切换（或任何其他类似的东西）将重定向到当前视图。

在 templatetags 目录文件中添加了简单的模板标签（例如，`templatetags/helpers.py`）：

```
from django.core.urlresolvers import reverse

register = template.Library()

@register.simple_tag
def get_url_with_kwargs(request):
    url_name = ''.join([
        request.resolver_match.app_name,
        ':',
        request.resolver_match.url_name,
    ])

    url_kwargs = request.resolver_match.kwargs

    return reverse(url_name, None, None, url_kwargs) 
```

可以在这样的语言切换模板中使用：

```
{% load helpers %}

{% get_available_languages as available_languages %}
{% get_language_info_list for available_languages as language_info_list %}

{% for language in language_info_list %}

    {% language language.code %}

        {% get_url_with_kwargs request as url_with_kwargs %}
        <a href="{{ url_with_kwargs }}">{{ language.code }}</a>

    {% endlanguage %}

{% endfor %} 
```

很适合我。

* * *

## 回答 #11

> 赞同：1
> 
> 时间：2016-10-04T11:06:38.820

我宁愿评论接受的答案，但不能，所以我发布自己的。我正在使用基于以下内容的非常相似的解决方案： [https ://djangosnippets.org/snippets/2875/](https://djangosnippets.org/snippets/2875/)

`resolve`和`reverse`方法都可能崩溃的问题：

*   `resolve`可能会引发 Resolver404 异常，尤其是当您已经显示 404 页面时（反而会导致 500 错误，非常烦人且难以检测，尤其是在 DEBUG=True 不显示真正的 404 时）
*   `reverse`当您尝试使用实际上没有翻译的不同语言获取页面时，可能会崩溃。

也许反向更多地取决于你使用什么样的翻译方法或其他什么，但解决 404 页面内的崩溃是非常明显的。

如果出现异常，您可能希望返回相同的 url 或返回索引页面的 url，而不是在模板中引发异常。代码可能如下所示：

```
from django.core.urlresolvers import resolve, reverse
from django.utils.translation import activate, get_language

@register.simple_tag(takes_context=True, name="change_lang")
def change_lang(context, lang=None, *args, **kwargs):
    url = context['request'].path
    cur_language = get_language()
    try:
        url_parts = resolve(url)
        activate(lang)
        url = reverse(url_parts.view_name, kwargs=url_parts.kwargs)
    except:
        url = reverse("index") #or whatever page you want to link to
        # or just pass if you want to return same url
    finally:
        activate(cur_language)
    return "%s" % url 
```

* * *

## 回答 #12

> 赞同：1
> 
> 时间：2019-08-20T16:54:36.243

在 Django 2.2 中为我工作

创建自定义模板标签

```
from django import template
from django.urls import translate_url

register = template.Library()

@register.simple_tag(takes_context=True)
def change_lang(context, lang=None, *args, **kwargs):
    path = context['request'].path
    return translate_url(path, lang) 
```

在模板中

```
{% load change_lang %}
<a href="{% change_lang 'en' %}">English</a>
<a href="{% change_lang 'es' %}">Español</a> 
```

* * *

## 回答 #13

> 赞同：1
> 
> 时间：2020-05-18T17:37:47.270

Django 3 解决方案，基于[Jonhatan 的回答](https://stackoverflow.com/a/57578343/1948292)：

文件：`App/templatetags.py`或`App/templatetags/change_lang.py`：

```
from django.template.defaultfilters import register
from django.urls import translate_url

@register.simple_tag(takes_context=True)
def change_lang(context, lang=None, *args, **kwargs):
    path = context['request'].path
    return translate_url(path, lang) 
```

模板：

```
{% load trans change_lang %}
{% trans 'View page in other languages:' %}
<a href="{% change_lang 'en' %}">English</a>
| <a href="{% change_lang 'de' %}">Deutsch</a> 
```

# c++ - c ++库引用编译器错误

> ID：11437455
> 
> 赞同：0
> 
> 时间：2012-07-11T16:46:03.223
> 
> 标签：c++, compiler-errors

这是一个简单的问题，但我似乎找不到问题

```
 #include <iostream>
namespace utils {
    class IntList {
      public:
        IntList();                         // constructor; initialize the list to be empty
        void AddToEnd(int k);              // add k to the end of the list
        void Print(ostream &output); // print the list to output

      private:
        static const int SIZE = 10;      // initial size of the array
        int *Items;                      // Items will point to the dynamically allocated array
        int numItems;                    // number of items currently in the list
        int arraySize;                   // the current size of the array
    };
} 
```

这里我在我的头文件中定义了一个类

但它抛出一个编译器错误，说它找不到对 ostream 的引用

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-11T16:48:12.533

stl 中的类位于命名空间 std 中。

所以，除非你在做`using namespace std`，你必须在它们前面加上`std::`. 在您的情况下，您应该编写`std::ostream`.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-11T16:47:44.483

您缺少`std::`ostream 前面的内容。

您可以：

1.  在你的类定义之前使用整个命名空间：`using namespace std;`;

2.  标记您将使用 std::ostream : `using namespace std::ostream;`;

3.  或写`std::ostream`在任何你需要使用它的地方。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-11T16:51:35.267

您也可以`using namespace std`在调用之前添加`ostream`

# c# - 如何为 C# 生成自定义 StyleCop 规则 - 条件编译预处理器指令

> ID：11437459
> 
> 赞同：1
> 
> 时间：2012-07-11T16:46:11.550
> 
> 标签：c#, visual-studio-2010, c-preprocessor, stylecop, conditional-compilation

是否可以编写自定义 C# StyleCop 规则来评估条件编译预处理器指令，如**#if、#elif、#else、#endif**？

我们正在一个需要我们使用条件编译符号的环境中进行开发，我想在此基础上添加我们的自定义编码约定。

使用`CsDocument.WalkDocument`- 方法可以做到这一点，还是我必须使用其他方法？

（FxCop 在这里不起作用，因为它适用于已经编译的二进制文件）。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-12T12:13:09.143

是的，这是可能的，但`CsDocument.WalkDocument`重载无济于事，因为预处理器指令仅表示为标记。它们没有对应的元素、语句或表达式。

要为条件编译指令编写规则，您需要检查 CsDocument.Tokens 集合。例如：

```
foreach (var directive in document.Tokens
                             .Where(t => t.CsTokenClass == CsTokenClass.ConditionalCompilationDirective)
                             .Cast<ConditionalCompilationDirective>())
{
    // ...
} 
```

# javascript - 更好的设计，以便从对象的方法中引用自己的对象的属性

> ID：11437462
> 
> 赞同：5
> 
> 时间：2012-07-11T16:46:16.683
> 
> 标签：javascript, oop

我有一个“yesno”输入收音机。当用户单击*yes*时，将显示 yesDiv，当用户单击*no*时，将显示 noDiv。

为了实现这一点，我创建了对象*myObject*。

```
var myObject= {
        init: function(config){
            this.config=config;
            this.config.InputRadio.bind('click',this.config,this.switchDiv);
        },
        switchDiv: function(ev){
                    self=ev.data;
            if ($(this).val()==1){
                self.divYes.hide();
                self.divNo.show();
            }else{
                self.divYes.show();
                self.divNo.hide();
            }
        }
}

myObject.init({
        InputRadio:$("input[name=yesno]"),
        divYes:$("#yesDiv"),
        divNo:$("#noDiv")
}); 
```

这行得通，我知道我不能用*它*来引用方法'switchDiv'中的对象属性，因为'this'在函数内的范围。我在相关问题（[引用自己的对象属性](https://stackoverflow.com/questions/8339019/javascript-referencing-own-object-properties)） 中找到了将*this.config*作为参数发送然后使用*self=ev.data的解决方案。*

但是现在我的问题是：每当我想从该对象的方法中访问对象自己的属性时，我必须将它们作为方法中的参数传递，这不是有点奇怪吗？难道没有更好的方法来声明对象以避免这种情况吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-11T17:21:31.567

如果你想确保`this`指的是`myObject`你打电话的时候，我的建议是稍微`switchDiv`改变你的功能。`init`我还更新了您的`switchDiv`功能以反映这一点。您仍然需要重新分配`this`，但仅在`init`函数中

```
var myObject= {
        init: function(config){
            var _this = this;
            this.config=config;
            this.config.InputRadio.on('change',function(){
                _this.switchDiv(); // now "this" will refer to myObject, not the input
            });
        },
        switchDiv: function(){
            if (this.config.InputRadio.filter(":checked").val() === '1'){
                this.config.divYes.hide();
                this.config.divNo.show();
            }else{
                this.config.divYes.show();
                this.config.divNo.hide();
            }
        }
}; 
```

通过将调用包装`switchDiv`在匿名函数中，您可以更好地维护`this`.

这是一个演示它的实际操作：

[**http://jsfiddle.net/VSdAL/**](http://jsfiddle.net/VSdAL/)

在相关说明中，不建议`self`在分配`this`给变量以在回调或其他函数中使用时使用。`self`，默认情况下，是 的快捷方式`window.self`，它是一个引用当前窗口的全局变量。您不想重新分配它，因为您使用了一些其他代码`self`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-11T17:07:04.273

ECMAScript 1.5（并非所有浏览器都支持）有一个[`Function.bind`](https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/Function/bind)绑定`this`值的方法：

```
this.config.InputRadio.bind('click', this.switchDiv.bind(this)); 
```

现在`this`总是指调用`myObject`绑定`switchDiv`的时间，您可以`this.config`直接使用而不是传递事件数据。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-11T18:25:13.803

除非您需要对象的公共 API，否则我认为您最好根本不创建这样的对象。将所有状态保持在隐藏范围内，就像在[这个小提琴中一样](http://jsfiddle.net/CrossEye/xbyBh/)

```
var createYesNoToggler = function(radioName, yesId, noId) {
    var divYes = $("#" + yesId), divNo = $("#" + noId),
        radios = $("input[name=" + radioName + "]");
    radios.click(function() {
        if ($(this).val() === "1") {
            divYes.show();
            divNo.hide();
        } else {
            divYes.hide();
            divNo.show();
        }
    });
};

createYesNoToggler("yesno", "yesDiv", "noDiv"); 
```

或者，如果您只需要一个，那么甚至不要公开该功能：

```
(function(radioName, yesId, noId) {
    var divYes = $("#" + yesId), divNo = $("#" + noId),
        radios = $("input[name=" + radioName + "]");
    radios.click(function() {
        if ($(this).val() === "1") {
            divYes.show();
            divNo.hide();
        } else {
            divYes.hide();
            divNo.show();
        }
    });
}("yesno", "yesDiv", "noDiv")); 
```

（但如果您不需要多个，后者可能会以更简单的方式完成。）

# dotnetopenauth - 使用 OpenIDProviderWebForms 时重写声明的标识符

> ID：11437465
> 
> 赞同：1
> 
> 时间：2012-07-11T16:46:24.190
> 
> 标签：dotnetopenauth

使用 OpenIDProviderWebForms 示例时，登录时返回的 Claimed Identifier 格式如下：

***https://id.example.com/user.aspx/userID***

我希望它看起来像：

***https://id.example.com/userID***

任何想法在哪里处理这个？

注意：这是 DotNetOpenAuth 返回的值，我可以在 IIS 中使用 URL 重写来映射***https://id.example.com/userID*** -> ***https://id.example.com/user.aspx/userID***

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-05T05:02:43.590

第一步是确保用户 OpenID 的首选 URL 符合以下要求：

1.  他们*不会*重定向到其他 URL
2.  他们的 HTTP 响应包括成为 OpenID 声明标识符所必需的 HTML 和/或 XRDS 发现标签。

接下来，您必须将代码添加到您的 OpenID 提供程序端点（又名“OP 端点），以便能够将这些用户 URL 转换为与您的数据库中的帐户匹配的规范用户名（反之亦然）。当出现身份验证挑战时，您必须验证试图登录的声称的标识符实际上与登录的用户匹配。

然后只需批准登录。DotNetOpenAuth 不关心您使用哪个 URL 作为claim_id，只要它满足上述要求即可。

# java - Java 类路径 jdbc 问题

> ID：11437470
> 
> 赞同：1
> 
> 时间：2012-07-11T16:46:35.170
> 
> 标签：java, jdbc

我遇到了疯狂的问题。

下面是我的目录结构

```
 - src
       Sub - directory are
       - com/abc/www      MyJava.java (Contains the package com.abc.www)
 - lib
       It contains the jar files like sqljdbc4.jar
 - bin
       It contains the class file , that I had compiled the 
       package directory structure created automatically
       - com/abc/www/MyJava.class 
```

我使用下面的行来编译我的代码：

```
java -cp "lib\*" -d bin src\com\abc\www\MyJava.java 
```

它编译成功。

好吧，现在当我尝试执行我的代码时： cd bin java com.abc.www.MyJava

不幸的是，它给了我以下错误：

```
java.lang.ClassNotFoundException: com.microsoft.sqlserver.jdbc.SQLServerDriver
  at java.net.URLClassLoader$1.run (URLClassLoader.java:202)
  .... 
```

相同的任何输入都会有所帮助。

谢谢 ！！！！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-11T17:00:01.733

你能试一下吗：

```
java -cp .;bin;lib\sqljdbc4.jar com.abc.www.MyJava 
```

# algorithm - 家务调度算法

> ID：11437471
> 
> 赞同：2
> 
> 时间：2012-07-11T16:46:39.920
> 
> 标签：algorithm, language-agnostic, scheduling

## 背景故事

事情就是这样。我住在三口之家，我们中的老大已经厌倦了一个人做所有的家务。我们尝试为任务制定不同的时间表，但**总是会**出现问题，因为我们中的一个人不在家，家务活没有完成，或者有人觉得他们比其他人做的工作更多，导致怨恨和不愿意完成家务活。

## 问题

人类会犯错，但计算机程序是万无一失的，对吧？这个想法是，可以使用计算机程序公平地分配要完成的家务，这样没有人会觉得他或她正在做更多的工作。我正在尝试提出一种算法来分配符合这些标准的家务：

*   从长远来看，它应该以大约 1/3 的概率平均分配家务。
*   它应该返回一个有序的人员列表，所以如果第一个不可用，第二个可以完成它。
*   它应该避免在同一天为每个人安排多项家务。
*   它应该避免连续多次将相同的家务安排给同一个人。
*   它应该是容忍偏差的。如果安排的人没有做家务，只要反馈实际做家务的人，它应该仍然是公平的。
*   它应该以不同的频率处理不同的家务（你需要每天洗碗，但每周只打扫一次浴室，......）

我的问题是：**实现此算法的最佳/最酷/最公平的方法是什么？** （非常可笑的过于复杂的解决方案受到赞赏：D）

* * *

## 我尝试了什么？

我认为实现这种算法的一种简单方法是为不同的标准定义一个成本表，然后只使用加权随机数来选择这个人，但我认为这从长远来看是不公平的（它确实必须限制每人 1/3，否则将不被接受:))。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-13T08:40:15.493

您的问题由两部分组成：

1)**定义评分函数。**你如何定义公平、高效……？他们之间的取舍是什么？有[不同的技术](http://docs.jboss.org/drools/release/5.4.0.Final/drools-planner-docs/html_single/index.html#d0e3034)可以进行权衡：

*   得分权重，例如：1次（分布不均）== 5次（一天多活）
*   分数水平，例如：（分布不均匀）总是高于（一天中的多项家务）
*   帕累托评分：见维基百科

2）**使用优化算法找到得分最高的时间表（在所有可能的时间表中）。**如果您的问题是 NP 完全的，那么就没有这样完美的算法。但也有非常好的。我更喜欢从*First Fit Decreasing*开始，然后是*Tabu Search*。

有关具有实现代码的类似示例的完整详细概述，请**遵循[本教程](http://docs.jboss.org/drools/release/5.4.0.Final/drools-planner-docs/html_single/index.html#cloudBalancingTutorial)**。`Computer`在心里用`Person`和替换这个词`Process`。`Chore`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-12T18:59:50.847

您可以尝试某种“有趣的货币”经济，以信用或奢侈品的价格和工资，而不是真正的货币，希望出现一个有效的市场并提供最佳解决方案。

如果您*真的*想要一些复杂的东西，请考虑[Vickrey-Clarke-Groves 拍卖中的 Clarke Pivot 规则](http://en.wikipedia.org/wiki/Vickrey%E2%80%93Clarke%E2%80%93Groves_auction)。在这里做或不做家务，或一批家务，是一个可能的结果。你应该会发现，组织拍卖的银行利润微薄，当积累足够多时，它可以作为节日重新分配给所有人。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-11T17:07:52.390

一般来说，您的约束似乎足够松散，并且您的算法不需要扩展太多，因此您应该能够制定一个算法来强制计划满足您的所有标准，并且有一个吨不同的方式来实现它。以下是一些可能有助于您入门的随机沉思。

假设我有一个要为给定日期分配的家务清单（但这应该适用于任何时间段）。每件家务都有一个重量（人们认为它有多艰巨或需要多长时间等等）。每个家务都有一个名称或者是某个类的一个实例（这样我们就可以知道两次浴室清洁是同一个家务，我们不太可能将它分配给同一个人两次）。我也有一份过去人们做过的所有家务的清单（包括谁实际做过这些家务，而不仅仅是分配给谁）。

如果你想以 1/3 的概率分配*家务*，一个简单的方法是这样说：

```
while has_more_chores()
  randomize the order of the persons list
  foreach person:
    if (has_more_chores()):
      person.assign_chore() 
```

这基本上保证了每个人都做了和其他人一样多的家务。但是，这不会考虑重量。如果重量很重要，那么这样做可能更有意义

```
foreach chore:
  chore.choose_person() 
```

无论您是在做 person.assign_chore() 还是 chore.choose_person()，您都需要应用某种平衡功能，这样一个人就不会一直打扫浴室。您可以使用修改后的指数退避来减少在完成一堆家务后获得家务的可能性。

也许解决这个问题的一种更简单的方法是随机生成无数个不同的人事时间表，并取消任何不符合您的限制的人的资格（即，一个人连续多次做同样的家务，或者一个人做多项家务）一天）。

# sql - 如何在学说匹配/加入id上查询多对多表

> ID：11437472
> 
> 赞同：2
> 
> 时间：2012-07-11T16:46:40.053
> 
> 标签：sql, symfony, doctrine, doctrine-orm, many-to-many

我有两个实体：文章和类别。那有一个多对多表：article_category。

我可以在 MySQL 中毫无问题地执行此查询：

```
SELECT COUNT(*) cnt, c.id, c.name FROM article_category ac, category c WHERE ac.category_id = c.id GROUP BY c.id ORDER BY cnt DESC 
```

但我无法将其转换为 Doctrine2 查询。以下返回类不存在错误，参考 article_category 表。

```
[...]
createQuery("SELECT COUNT(*) cnt, c.id, c.name FROM article_category ac, category c WHERE ac.category_id = c.id GROUP BY c.id ORDER BY cnt DESC")
[...] 
```

具体来说，我的问题是我不知道如何访问多对多表中的“category_id”。

**编辑**

这是使用内部连接的相同查询（如果它更容易）。

```
SELECT COUNT(*) cnt, c.id, c.name FROM category c INNER JOIN article_category ac ON c.id = ac.category_id GROUP BY c.id ORDER BY cnt DESC 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-11T17:23:39.487

我能够弄清楚。我使用 DQL 创建查询：

```
 $qb = $this->getEntityManager()->createQueryBuilder();
    $qb->select('COUNT(c) cnt, c.id, c.name')
    ->from('NatknowEditorBundle:Category', 'c')
    ->innerJoin('c.articles', 'ac')
    ->groupBy('c.id')
    ->orderBy('cnt', 'DESC');

    return $qb->getQuery()->getResult(); 
```

我以为我必须指定 JOIN 需要发生的位置（“... ON c.id = ac.category_id ...”）。但是，由于多对多已经被数组集合（在我的情况下是“文章”）映射到我的“类别”实体中，我猜“ON”是隐含的。

# apache-flex - Flex 简单跨域访问

> ID：11437475
> 
> 赞同：0
> 
> 时间：2012-07-11T16:47:10.980
> 
> 标签：apache-flex

我正在尝试从本地服务器访问远程服务器。

> 错误 #2044: SecurityErrorEvent : text=Error #2048: security sandbox : [http://mydomain1.com/debaton/debaton.swf](http://mydomain1.com/debaton/debaton.swf)无法访问来自[http://mydomain2.com/~debaton/services/gateway.php](http://mydomain2.com/~debaton/services/gateway.php)的数据。

所以我把跨域放在 [http://mydomain2.com/~debaton/crossdomain.xml](http://mydomain2.com/~debaton/crossdomain.xml)

```
<?xml version="1.0"?>
<cross-domain-policy>
<allow-access-from domain="*" />

</cross-domain-policy> 
```

并放

```
 params.allowscriptaccess = "always"; 
```

在我的 HTML 中。

但是还是有这个错误！我究竟做错了什么 ？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-11T17:09:12.970

默认情况下， Flash 播放器将从`crossdomain.xml`Web 服务器的根目录加载文件。如果要从子文件夹加载它，则需要使用以下命令显式加载它：

```
import flash.system.Security;

Security.loadPolicyFile('http://mydomain2.com/~debaton/crossdomain.xml'); 
```

有更多关于[live docs](http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/flash/system/Security.html#loadPolicyFile%28%29)的信息。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-11T16:58:45.883

不幸的是，crossdomain.xml 需要位于域的根目录。根据 Adob​​e 的 KB - [Flash 电影的跨域策略](http://kb2.adobe.com/cps/142/tn_14213.html)：

> 名为 crossdomain.xml 的跨域策略文件位于服务器的根级别。

# algorithm - 以 (x * y) 的降序枚举二维平面上的网格点

> ID：11437480
> 
> 赞同：7
> 
> 时间：2012-07-11T16:47:19.093
> 
> 标签：algorithm, math

给定`N > 0`and `M > 0`，我想枚举所有 (x, y) 对，使得 1 <= x <= N 和 1 <= y <= M 按 (x * y) 的降序排列。一个例子：给定 N = 3 和 M = 2，枚举序列应该是：

```
1\. (3, 2) -- 3 * 2 = 6
2\. (2, 2) -- 2 * 2 = 4
3\. (3, 1) -- 3 * 1 = 3
4\. (2, 1) -- 2 * 1 = 2
5\. (1, 2) -- 1 * 2 = 2
6\. (1, 1) -- 1 * 1 = 1 
```

`(2, 1)`和的顺序`(1, 2)`可以互换。一种明显的方法是将它们全部列出，插入到 a`vector<pair<int, int> >`中，然后`std::sort()`用我自己的比较函数调用。但是，由于 N 和 M 可能很大，而且大多数时候我只需要序列的前几项，我希望可以有一些更聪明的方法来生成这样的序列，而不是生成它们全部排序，这需要尽可能多的`N*M`数组元素。

**更新：**我忘了提到虽然大多数时候我只需要前几个词，但在枚举之前需要的词数是未知的。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-11T17:10:45.787

如果您只是想节省空间，同时保持时间大致相等，您可以指望每个连续较小的元素必须与其中一个元素相邻（在您提到的二维网格中）你已经遇到过。（你可以用归纳法证明这一点，这并不是特别困难。我将假设其余部分 M>=N。）

基本算法看起来像：

```
Start with a list (Enumerated Points) containing just the maximum element, M*N
Create a max heap (Candidates) containing (M-1),N and M,(N-1).
Repeat this:
    1.Pick the largest value (x,y) in Candidates and append it to Enumerated Points
    2.Add (x-1),y and x,(y-1) to Candidates if they are not there already 
```

只要您想要枚举点中的更多元素，您就可以重复此操作。候选人的最大大小应该是 M+N 所以我认为这是 O(k log(M+N)) 其中 k 是你想要的点数。

附录：避免重复的事情并不完全困难，但值得一提。我会在这个算法中假设你把你的网格布置好，这样当你向下和向右移动时数字会下降。无论如何，它是这样的：

在算法开始时，创建一个数组（列大小），其中每一列都有一个元素。您应该使此数组包含每列中的行数，这些行数是枚举点列表的一部分。

添加新元素并更新此数组后，您将检查任一侧列的大小，以确定此新枚举点右侧和下方的网格正方形是否已在候选列表中。

检查左侧列的大小 - 如果它大于此列，则无需在新枚举点下方添加元素。

检查右侧列的大小 - 如果它比此列的相同大小小一，则无需更新此列右侧的元素。

为了清楚起见，让我们看一下 M=4，N=2 的这个部分完成的图表：

```
4  3  2  1
*  *  *  2 |2
*  3  2  1 |1 
```

元素 (4,2)、(3,2)、(2,2) 和 (4,1) 已经在列表中。（第一个坐标是 M，第二个是 N。） Column Size 数组是 [2 1 1 0]，因为这是 Enumerated Points 列表中每列中的项目数。我们即将将 (3,1) 添加到新列表中 - 我们可以查看右侧的列大小并得出不需要添加 (2,1) 的结论，因为 M=2 的列大小更大比 1-1。推理在视觉上非常清楚 - 我们在添加 (2,2) 时已经添加了 (2,1)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-11T18:04:12.967

这是一个 O(K logK) 解决方案，其中 K 是您要生成的术语数。
编辑：Q 只保留每个元素的一份副本；如果元素已经存在，则插入失败。

```
priority_queue Q
Q.insert( (N*M, (N,M)) ) // priority, (x,y) 
repeat K times:
    (v, (x,y)) = Q.extract_max()
    print(v, (x,y))
    Q.insert( (x-1)*y, (x-1,y) )
    Q.insert( x*(y-1), (x,y-1) ) 
```

这是因为在访问 (x,y) 之前，您必须访问 (x+1,y) 或 (x,y+1)。复杂度为 O(KlogK)，因为 Q 最多有 2K 个元素被推入其中。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-11T17:00:52.143

这实际上等同于枚举素数；您想要的数字是所有不是素数的数字（所有具有`x`或`y`等于 1 的数字除外）。

我不确定是否有[一种枚举素数](http://en.wikipedia.org/wiki/Generating_primes)的方法会比您已经提出的更快（至少在算法复杂性方面）。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-11T17:07:59.627

因为您提到大多数时候您需要序列的前几个项；在生成它们之后，您不需要对它们全部进行排序以找到这些前几个术语。您可以根据所需的术语数量使用最大堆，例如 k。因此，如果堆的大小为 k (<< N && << M)，那么您可以在 nlogk 之后拥有最大的 k 项，这比 nlogn 更适合排序。

这里 n = N*M

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-11T18:05:35.490

一种从 NxM 循环到 1 的虚拟方法，搜索相乘时产生当前数字的对：

```
#!/usr/bin/perl

my $n = 5;
my $m = 4;

for (my $p = $n * $m; $p > 0; $p--) {
    my $min_x = int(($p + $m - 1) / $m);
    for my $x ($min_x..$n) {
        if ($p % $x == 0) {
            my $y = $p / $x;
            print("x: $x, y: $y, p: $p\n");
        }
    }
} 
```

对于 N=M，复杂度为 O(N ³ )，但内存使用量为 O(1)。

**更新**：请注意，复杂性并不像看起来那么糟糕，因为要生成的元素数量已经是 N ²。为了比较，生成所有对和排序方法是 O(N ² logN) 与 O(N ² ) 内存使用。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-07-11T18:21:57.030

这是给你的算法。我会尽量给你一个英文描述。

在我们正在使用的矩形中，我们总是可以假设一个点`P(x, y)`的“面积”大于它下面的点`P(x, y-1)`。所以在寻找最大面积的点时，我们只需要比较每列中最顶部的未取点（即每个可能的点`x`）。例如，当考虑原始`3 x 5`网格时

```
5 a b c
4 d e f
3 g h i
2 j k l
1 m n o
  1 2 3 
```

我们真的只需要比较`a`,`b`和`c`。保证所有其他点的面积都小于其中至少一个点的面积。所以构建一个最大堆，它只包含每列中的最高点。当您从堆中弹出一个点时，将其正下方的点推入（如果该点存在）。重复直到堆为空。这为您提供了以下算法（经过测试，但它在 Ruby 中）：

```
def enumerate(n, m)
    heap = MaxHeap.new
    n.times {|i| heap.push(Point.new(i+1, m))}

    until(heap.empty?)
        max = heap.pop
        puts "#{max} : #{max.area}"

        if(max.y > 1)
            max.y -= 1
            heap.push(max)
        end
    end
end 
```

这给你一个运行时间`O((2k + N) log N)`。堆操作成本`log N`；我们`N`在构建初始堆时使用它们，然后`2k`当我们拉出`k`最大面积的点时（假设每个弹出点之后是在它下面的点的推送）。

它的另一个优点是不必构建所有点，这与构建整个集合然后排序的原始建议不同。您只需构建尽可能多的点以保持堆准确。

最后： *可以进行改进！* 我没有做过这些，但你可以通过以下调整获得更好的性能：

1.  仅下降到`y = x`每一列而不是`y = 1`. 要生成不再检查的点，请使用 的面积`P(x, y)`等于 的面积这一事实`P(y, x)`。 **注意：**如果使用此方法，则需要两个版本的算法。列在 时有效`M >= N`，但如果`M < N`您需要按行执行此操作。
2.  只考虑可能包含最大值的列。在我给出的示例中，没有理由`a`从一开始就包含在堆中，因为它保证小于`b`. 所以你只需要在相邻列的顶点被弹出时将列添加到堆中。

这变成了一篇小论文......无论如何 - 希望它有所帮助！

**编辑：** 完整的算法，结合了我上面提到的两项改进（但仍然在 Ruby 中，因为我很懒）。请注意，不需要任何额外的结构来避免插入重复项 - 除非它是“顶部”点，否则每个点只会在其行/列中插入另一个点。

```
def enumerate(n, m, k)
    heap = MaxHeap.new
    heap.push(Point.new(n, m))
    result = []

    loop do
        max = heap.pop
        result << max
        return result if result.length == k

        result << Point.new(max.y, max.x) if max.x <= m && max.y <= n && max.x != max.y
        return result if result.length == k

        if(m < n) # One point per row
            heap.push(Point.new(max.x, max.y - 1)) if max.x == n && max.y > 1
            heap.push(Point.new(max.x - 1, max.y)) if max.x > max.y
        else # One point per column
            heap.push(Point.new(max.x - 1, max.y)) if max.y == m && max.x > 1
            heap.push(Point.new(max.x, max.y - 1)) if max.y > max.x
        end
    end
end 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-07-11T20:45:52.713

我得到了它！

将网格视为一组 M 列，其中每一列都是一个堆栈，其中包含从底部的 1 到顶部的 N 的元素。每列都标有其 x 坐标。

每个列堆栈中的元素都按其 y 值排序，因此也按 x*y 排序，因为 x 对所有这些元素都具有相同的值。

因此，您只需要选择顶部具有较大 x*y 值的堆栈，将其弹出并重复。

实际上，您不需要堆栈，只需要顶部值的索引，您可以使用优先级队列来获取具有较大 x*y 值的列。然后，递减索引的值，如果它大于 0（表示堆栈尚未耗尽），则将堆栈重新插入队列中，并以其新的优先级 x*y。

对于 N=M，该算法的复杂度为 O(N ² logN)，其内存使用量为 O(N)。

**更新**：在 Perl 中实现...

```
use Heap::Simple;

my ($m, $n) = @ARGV;

my $h = Heap::Simple->new(order => '>', elements => [Hash => 'xy']);
# The elements in the heap are hashes and the priority is in the slot 'xy':

for my $x (1..$m) {
    $h->insert({ x => $x, y => $n, xy => $x * $n });
}

while (defined (my $col = $h->extract_first)) {
    print "x: $col->{x}, y: $col->{y}, xy: $col->{xy}\n";
    if (--$col->{y}) {
        $col->{xy} = $col->{x} * $col->{y};
        $h->insert($col);
    }
} 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2012-07-12T10:47:50.107

在 Haskell 中，它**立即**产生输出。这是一个插图：

```
 -------
        -*------
       -**------
      -***------
     -****------
    -*****------
   -******------
  -*******------ 
```

每个星号点都会产生 (x,y) 和 (y,x)。该算法从右上角“吃掉”这个东西，比较每一列中的顶部元素。边界的长度永远不会超过`N`（我们假设`N >= M`）。

```
enuNM n m | n<m = enuNM m n                    -- make sure N >= M
enuNM n m = let
    b = [ [ (x*y,(x,y)) | y<- [m,m-1..1]] | x<-[n,n-1..m+1]]
    a = [ (x*x,(x,x)) : 
          concat [ [(z,(x,y)),(z,(y,x))]       -- two symmetrical pairs,
                           | y<- [x-1,x-2..1]  --  below and above the diagonal
                           , let z=x*y  ] | x<-[m,m-1..1]]
 in
    foldi (\(x:xs) ys-> x : merge xs ys) [] (b ++ a)

merge a@(x:xs) b@(y:ys) = if (fst y) > (fst x) 
                            then  y : merge  a ys 
                            else  x : merge  xs b
merge a [] = a 
merge [] b = b

foldi f z []     = z
foldi f z (x:xs) = f x (foldi f z (pairs f xs))

pairs f (x:y:t)  = f x y : pairs f t
pairs f t        = t 
```

[`foldi`](http://en.wikipedia.org/wiki/Fold_(higher-order_function)#Tree-like_folds)构建一个倾斜的无限加深的树作为一个堆，连接所有的生产者流，每个生产者流，每个生产者流`x`已经按降序排序。由于生产者流的所有初始值都保证按降序排列，因此每个初始值都可以在不进行比较的情况下弹出，从而可以懒惰地构建树。

的代码`a`使用对角线下方的相应对生成对角线上方的对（在假设下`N >= M`，对于每个`(x,y)`where `x <= M & y < x`，`(y,x)`也将生成。）

对于非常接近比较树顶部的少数第一个值中的每一个，它实际上应该是 O(1)。

```
Prelude Main> 取 10 $ 地图 snd $ enuNM (2000) (3000)
[(3000,2000),(2999,2000),(3000,1999),(2998,2000),(2999,1999),(3000,1998),(2997,2
000),(2998,1999),(2999,1998),(2996,2000)]
（0.01 秒，1045144 字节）

Prelude Main> let xs=take 10 $map (log.fromIntegral.fst) $ enuNM (2000) (3000)
Prelude Main> zipWith (>=) xs (tail xs)
 [True,True,True,True,True,True,True,True,True]

Prelude Main> 取 10 $ map snd $ enuNM (2*10^8) (3*10^8)
[(300000000,200000000),(299999999,200000000),(300000000,199999999),(299999998,20
0000000),(299999999,199999999),(300000000,199999998),(299999997,200000000),(2999
99998,199999999),(299999999,199999998),(299999996,200000000)]
（0.01 秒，2094232 字节）

```

我们可以评估经验运行时复杂度：

```
Prelude Main> take 10 $ drop 50000 $ map (log.fromIntegral.fst) $ enuNM (2*10^8)
 (3*10^8)
[38.633119670465554,38.633119670465554,38.63311967046555,38.63311967046554,38.63
311967046554,38.63311967046553,38.63311967046553,38.633119670465526,38.633119670
465526,38.63311967046552]
（0.17 秒，35425848 字节）

Prelude Main> take 10 $ drop 100000 $ map (log.fromIntegral.fst) $ enuNM (2*10^8
) (3*10^8)
[38.63311913546512,38.633119135465115,38.633119135465115,38.63311913546511,38.63
311913546511,38.6331191354651,38.6331191354651,38.633119135465094,38.63311913546
5094,38.63311913546509]
（0.36 秒，71346352 字节）

*Main> 让 x=it
*Main> zipWith (>=) x (tail x)
 [True,True,True,True,True,True,True,True,True]

Prelude Main> logBase 2 (0.36/0.17) 
1.082462160191973      *-- O(n^1.08) 产生 n=100000 个值*

```

这可以以一种简单的方式翻译成 Python，例如使用 Haskell 流的**生成器，如**[这里](https://stackoverflow.com/a/8871918/849891)所示。

# php - Prestashop 供应商模块

> ID：11437489
> 
> 赞同：0
> 
> 时间：2012-07-11T16:47:45.730
> 
> 标签：php, shopping-cart, prestashop

有人知道 prestashop 是否提供供应商模块？

我想创建类似“从 prestashop 管理员添加供应商，他们应该允许插入产品并查看他们的产品订单等......”

在prestashop中可以吗？如果是的话，任何人都可以说需要安装哪个扩展？

如果它不提供这样的功能，是否还有其他提供此类功能的开源？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-04T09:28:14.583

我理解您希望供应商能够访问您的后台以便他们添加新产品？

只需创建一个新的员工档案（在员工 > 档案下）并授予新的档案权限以添加新产品（在员工 > 权限下）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-09-22T06:22:51.913

供应商是产品的一个属性，员工是 prestashop 中的另一部分，我们必须合并 ps_employee 和 ps_supplier，或者当添加员工然后在获取他的最后一个插入 id 后，我们必须在 ps_supplier 表中插入与员工 id 相同的名称。

1.  在 ps_supplier -> id_employee 中添加一列。
2.  插入员工详细信息后添加员工获取他的最后一个插入ID

if ($this->context->employee->id == Tools::getValue('id_employee'))

在 \controllers\admin\AdminEmployeeController.php

（如果有人知道，我没有完成这个然后帮助我。）

用他的 id_employee 插入 ps_supplier 表

3.  从 ps_supplier 中选择供应商，其中 id_employee == $loggedinemployee

# ios - 带有多个 EGOImageView 的内存不足警告

> ID：11437497
> 
> 赞同：0
> 
> 时间：2012-07-11T16:48:15.653
> 
> 标签：ios, egoimageview

我请求您帮助解决我的应用程序中的内存问题！

我在表格中有一个单元格，其中包含一个或多个`EGOImageView`s 的水平滚动视图。此单元格始终位于第 0 行，但我经常不得不用另一个图像重新加载此单元格。

问题是：当我重新加载我的手机太多次（30 或 40 次）时，我会收到内存警告或有时没有错误并且应用程序崩溃......

我使用 ARC 模组。这是我的代码的预览：

**单元格代码**

```
- (id)initWithStyle:(UITableViewCellStyle)style reuseIdentifier:(NSString *)reuseIdentifier animated:(BOOL)animated{       
    self = [super initWithStyle:style reuseIdentifier:reuseIdentifier];
    if (self) {
        // Initialization code
        [self.contentView setFrame:CGRectMake(0, 0, 320, 240)];
        self.scrollView = [[UIScrollView alloc]initWithFrame:CGRectMake(0, 0, 320, 240)];
        [self.scrollView setDelegate:self];
        [self.scrollView setPagingEnabled:YES];
        [self.scrollView setShowsHorizontalScrollIndicator:NO];               
        self.scrollView.contentSize = CGSizeMake(320, 240);

        pageControl = [[UIPageControl alloc]initWithFrame:CGRectMake(0, 220, 320, 20)];
        [pageControl setCurrentPage:0];
        [self.contentView addSubview:self.scrollView];
        [self.contentView addSubview:pageControl];
        isAnimated= animated;

    return self;
}

- (void)configureGallery:(NSInteger)accommodationId{

counter =0;
Accommodation *item = [[[DataManager sharedManager]accommodations]objectAtIndex:accommodationId];
numberPictures = [[item photo_set]count];

if (numberPictures >1) {
    [scrollView setContentSize:CGSizeMake((numberPictures + 2)*320, 240)];
} else [scrollView setContentSize:CGSizeMake(320, 240)];

[pageControl setNumberOfPages:numberPictures];

// add the last image into the first position
if (numberPictures) {
    [self addImageWithName:[NSString stringWithFormat:@"%@%@",[[DataManager sharedManager]baseUrl],[[item.photo_set objectAtIndex:numberPictures-1]thumbnail_gallery]] atPosition:0];
}

// add all of the images to the scroll view
for (int i = 0; i < numberPictures; i++) {
    [self addImageWithName:[NSString stringWithFormat:@"%@%@",[[DataManager sharedManager]baseUrl],[[item.photo_set objectAtIndex:i]thumbnail_gallery]] atPosition:i+1 ];
}

// add the first image into the last position
[self addImageWithName:[NSString stringWithFormat:@"%@%@",[[DataManager sharedManager]baseUrl],[[item.photo_set objectAtIndex:0]thumbnail_gallery]] atPosition:numberPictures+1];

[self.scrollView scrollRectToVisible:CGRectMake(320,0,320,416) animated:NO];
[self performSelector:@selector(switchToNextPhoto) withObject:nil afterDelay:5];

}

- (void)addImageWithName:(NSString*)imageString atPosition:(int)position {
// add image to scroll view
UIImageView * placeHolderView = [[UIImageView alloc]initWithImage:[UIImage imageNamed:@"France"]];
[placeHolderView setFrame:CGRectMake(position*320, 0, 320, 240)];
UIActivityIndicatorView * activityView = [[UIActivityIndicatorView alloc]initWithFrame:CGRectMake((position*320)+160, 120, 20, 20)];
[activityView startAnimating];
EGOImageView *imageView = [[EGOImageView alloc] init];

imageView.frame = CGRectMake(position*320, 0, 320, 240);
[self.scrollView addSubview:placeHolderView];
[self.scrollView addSubview:activityView];
[self.scrollView addSubview:imageView];

imageView.imageURL = [NSURL URLWithString:imageString];
} 
```

**第 0 行的表格代码**

```
GalleryDetailCell *cell = (GalleryDetailCell *) [tableView dequeueReusableCellWithIdentifier: @"GalleryAnimated"];
if (cell == nil) {
    cell = [[GalleryDetailCell alloc] initWithStyle:UITableViewCellStyleDefault reuseIdentifier: @"GalleryAnimated" animated:animated];
}
[cell configureGallery:id];
cellToReturn = cell; 
```

你知道我的错误在哪里吗？当我重新加载我的手机时，我是否必须手动处理我的`EGOImageView`并将它们放入？`nil`

感谢您的时间！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-18T15:52:45.153

EGOImageView 可能会导致内存泄漏，请注意。

首先，检查它是否在 EGOImageLoadConnection 的 dealloc 中释放了 _responseData，使其看起来像：

```
- (void)dealloc
{
    self.response = nil;
    self.delegate = nil;
    [_connection release];
    [_imageURL release];
    [_responseData release];  //this line is absent in current EGOImageLoadConnection.m

    [super dealloc];
} 
```

然后在取消分配使用它的视图并将其图像属性为零时调用 cancelImageLoad（请记住，我使用 ARC 代码示例）：

```
 - (void)dealloc
 {
    //...
    self.myView.image = nil;
    [self.myView cancelImageLoad];
    //...
 } 
```

我也建议有时打电话：

```
[EGOCache.currentCache clearCache]; 
```

无论如何，请随意使用 Instruments。打开 Allocations 工具，单击 VM Tracker 并将自动快照设置为 1 秒延迟。然后观看 Dirty memory 列和 Memory Tag 70 行，它显示了您的应用程序中消耗了多少内存映像。

# ruby - 使用回形针、sinatra 和 mongoid 上传

> ID：11437500
> 
> 赞同：4
> 
> 时间：2012-07-11T16:48:18.390
> 
> 标签：ruby, sinatra, mongoid, paperclip

我在使用带有 sinatra 和 mongoid 的回形针时遇到问题。当我上传时显示以下错误：

```
 Paperclip::AdapterRegistry::NoHandlerError - No handler found for {"tempfile"=>#, "filename"=>"image-[Converted].jpg", "content_type"=>"image/jpeg", "size"=>35222}: 

```

在模型中，我离开了：

```
 class User
  include Mongoid::Document
  include Mongoid::Paperclip

  has_mongoid_attached_file :avatar,
    :path           => ':attachment/:id/:style.:extension',
    :default_url => '/images/missing_portrait_:style.jpg',
    :styles => {
      :original => '1920x1680>',
      :small    => '100x100#',
      :medium   => '250x250',
      :large    => '500x500>'
    }
end 

```

并且路由/上传如下：

 ````
post '/upload' do
  User.create! ::avatar => to_paperclip(params[:file])
end

def to_paperclip(image)
  paperclip = {}
  paperclip['tempfile'] = image[:tempfile]
  paperclip['filename'] = image[:filename]
  paperclip['content_type'] = image[:type]
  paperclip['size'] = image[:tempfile].size
  paperclip  
end 

```

我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-14T20:08:35.837

我没有找到回形针的任何解决方案，但我最终使用了载波，它可以满足我的需要

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-09-26T14:39:09.797

这对我有用

```
user = User.new()
user.avatar  = params[:avatar][:tempfile]
user.avatar_file_name = params[:avatar][:filename] 
````

# c# - 删除使用 C# 创建的 Outlook 约会并更新 Outlook 类别

> ID：11437501
> 
> 赞同：4
> 
> 时间：2012-07-11T16:48:22.013
> 
> 标签：c#, asp.net, outlook, outlook-2007, mailmessage

我使用以下代码创建了约会：

```
MailMessage mmMessage = new MailMessage();
System.Net.Mime.ContentType typeCalendar = new System.Net.Mime.ContentType("text/calendar");

//  Add parameters to the calendar header
typeCalendar.Parameters.Add("method", "REQUEST");
typeCalendar.Parameters.Add("name", "meeting.ics");

//Create the Body in VCALENDAR format  
string strCalDateFormat = "yyyyMMddTHHmmssZ";
string strBodyCalendar = "BEGIN:VCALENDAR\r\nMETHOD:REQUEST\r\nPRODID:Microsoft CDO for Microsoft Exchange\r\nVERSION:2.0\r\nBEGIN:VTIMEZONE\r\nTZID:(GMT-06.00) Central Time (US &amp; Canada)\r\nX-MICROSOFT-CDO-TZID:11\r\nBEGIN:STANDARD\r\nDTSTART:16010101T020000\r\nTZOFFSETFROM:-0500\r\nTZOFFSETTO:-0600\r\nRRULE:FREQ=YEARLY;WKST=MO;INTERVAL=1;BYMONTH=11;BYDAY=1SU\r\nEND:STANDARD\r\nBEGIN:DAYLIGHT\r\nDTSTART:16010101T020000\r\nTZOFFSETFROM:-0600\r\nTZOFFSETTO:-0500\r\nRRULE:FREQ=YEARLY;WKST=MO;INTERVAL=1;BYMONTH=3;BYDAY=2SU\r\nEND:DAYLIGHT\r\nEND:VTIMEZONE\r\nBEGIN:VEVENT\r\nDTSTAMP:{8}\r\nDTSTART:{0}\r\nSUMMARY:{7}\r\nUID:{5}\r\nATTENDEE;ROLE=REQ-PARTICIPANT;PARTSTAT=NEEDS-ACTION;RSVP=TRUE;CN=\"{9}\":MAILTO:{9}\r\nACTION;RSVP=TRUE;CN=\"{4}\":MAILTO:{4}\r\nORGANIZER;CN=\"{3}\":mailto:{4}\r\nLOCATION:{2}\r\nDTEND:{1}\r\nDESCRIPTION:{7}\\N\r\nSEQUENCE:{10}\r\nPRIORITY:5\r\nCLASS:\r\nCREATED:{8}\r\nLAST-MODIFIED:{8}\r\nSTATUS:CONFIRMED\r\nTRANSP:OPAQUE\r\nX-MICROSOFT-CDO-BUSYSTATUS:BUSY\r\nX-MICROSOFT-CDO-INSTTYPE:0\r\nX-MICROSOFT-CDO-INTENDEDSTATUS:BUSY\r\nX-MICROSOFT-CDO-ALLDAYEVENT:FALSE\r\nX-MICROSOFT-CDO-IMPORTANCE:1\r\nX-MICROSOFT-CDO-OWNERAPPTID:-1\r\nX-MICROSOFT-CDO-ATTENDEE-CRITICAL-CHANGE:{8}\r\nX-MICROSOFT-CDO-OWNER-CRITICAL-CHANGE:{8}\r\nBEGIN:VALARM\r\nACTION:DISPLAY\r\nDESCRIPTION:REMINDER\r\nTRIGGER;RELATED=START:-PT00H15M00S\r\nEND:VALARM\r\nEND:VEVENT\r\nEND:VCALENDAR\r\n";

string strUID = Session["ApptID"].ToString() + "@youremailaddress.com";
strBodyCalendar = string.Format(strBodyCalendar, dtStart.ToUniversalTime().ToString(strCalDateFormat), dtEnd.ToUniversalTime().ToString(strCalDateFormat), strLocation, strOrganizerName, strOrganizerEmail, strUID, strSummary, strSubject,DateTime.Now.ToUniversalTime().ToString(strCalDateFormat), macAttendeeList.ToString(),0);

AlternateView viewCalendar = AlternateView.CreateAlternateViewFromString(strBodyCalendar, typeCalendar);
viewCalendar.TransferEncoding = TransferEncoding.SevenBit;

mmMessage.AlternateViews.Add(viewCalendar); 
```

请指导我如何删除使用上述代码创建的约会。

现在使用类似的主体，即 strBodyCalendar，我必须从 c# 代码本身更新 Outlook 的类别。

我正在传递 \r\nCATEGORIES:MEETING 并且我在 OUTLOOK 中以蓝色定义了 MEETING 类别。

仍然在添加约会后，颜色或类别没有更新。

感谢您的帮助。

请引导通过。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-28T19:26:21.687

当您使用 Vcalendar 安排约会时，

您需要更改以下属性

1.  方法：取消

2.  UID 应该与您在创建约会时提供的相同。

3.  顺序应该相同。

4.  状态应从已确认更改为已取消。

如果您需要任何与此相关的帮助，请在下面粘贴您的 Vcalendar 代码。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-10-13T04:51:35.213

```
Microsoft.Office.Interop.Outlook.Application OlApp = new 
Microsoft.Office.Interop.Outlook.Application();
NameSpace OlNamspace = OlApp.GetNamespace("MAPI");
MAPIFolder AppointmentFolder = 
OlNamspace.GetDefaultFolder(OlDefaultFolders.olFolderCalendar);

Items calendarItems = AppointmentFolder.Items;

AppointmentItem item = calendarItems["Subject/Item Name"] as 
AppointmentItem;

item.Delete();
MessageBox.Show("Calendar event has been deleted."); 
```

# visual-studio-2010 - 有没有办法在 VisualStudio 2010 中绑定引用的源代码？

> ID：11437503
> 
> 赞同：1
> 
> 时间：2012-07-11T16:48:30.543
> 
> 标签：visual-studio-2010, reference

我有这个参考，它来自我同一台机器上的另一个项目。

每次需要看源码的时候从一个项目跳到另一个项目很麻烦。

Visual Studio 是否有任何方法可以指定给定 dll 的源代码在哪里，以便我可以看到它？

# android - 在对话框中控制音量 seekBar (AsyncTask)

> ID：11437504
> 
> 赞同：1
> 
> 时间：2012-07-11T16:48:31.987
> 
> 标签：android, dialog, android-asynctask, seekbar

我有一个 AsyncTask ，其中 onPostExecute 方法是：

```
protected void onPostExecute(String args) {

            final AudioManager audioManager = (AudioManager)getSystemService(Context.AUDIO_SERVICE);
            int maxVolume = audioManager.getStreamMaxVolume(AudioManager.STREAM_MUSIC);
            int curVolume = audioManager.getStreamVolume(AudioManager.STREAM_MUSIC);

            LayoutInflater inflater = (LayoutInflater) getSystemService(Context.LAYOUT_INFLATER_SERVICE);
            View layout = inflater.inflate(R.layout.custom_dialog, (ViewGroup) findViewById(R.id.dialog_root_element));

            AlertDialog.Builder builder = new AlertDialog.Builder(Main.this);
            builder.setView(layout)
                    .setMessage(name)
                    .setTitle("playing...")
                    .setCancelable(false)
                    .setNeutralButton("stop/volver",
                            new DialogInterface.OnClickListener() {
                                public void onClick(DialogInterface dialog,
                                        int id) {
                                    mediaPlayer.stop();
                                    dialog.cancel();
                                }
                            });
            alert = builder.create();

            alert.show();

            SeekBar volControl = (SeekBar)findViewById(R.id.dialog_seekbar);
            volControl.setMax(maxVolume);
            volControl.setProgress(curVolume);
            volControl.setOnSeekBarChangeListener(new SeekBar.OnSeekBarChangeListener() {
                @Override
                public void onStopTrackingTouch(SeekBar arg0) {
                }

                @Override
                public void onStartTrackingTouch(SeekBar arg0) {
                }

                @Override
                public void onProgressChanged(SeekBar arg0, int arg1, boolean arg2) {
                    audioManager.setStreamVolume(AudioManager.STREAM_MUSIC, arg1, 0);
                }
            });

            mediaPlayer.setOnCompletionListener(new OnCompletionListener() {
                public void onCompletion(MediaPlayer mp) {
                    mediaPlayer.stop();
                    alert.dismiss();
                }
            });

            // updating UI from Background Thread
            runOnUiThread(new Runnable() {
                public void run() {
                }
            });

        } 
```

错误在于：

```
volControl.setMax(maxVolume); 
```

但我不明白为什么......（在调试模式下，maxVolume 为 15）

我正在尝试使用音量控制 seekBar 进行对话，但没有看到错误。我可以用 AsyncTask 修改声音的音量吗？

多谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-11T16:52:43.390

你调用`findViewById`了错误的对象。该代码正在您`SeekBar`的活动的布局文件中查找您的文件，该文件可能不存在（我猜您遇到了空指针异常）。

试试这个，显示你的对话框，然后调用`findViewById`对话框*，*而不是找到你的`SeekBar`.

```
alert.show();
SeekBar volControl = (SeekBar)alert.findViewById(R.id.dialog_seekbar); 
```

这里的重要部分是**alert.findViewById()**。

# regex - 我可以用 FSM 计算字符串中的位数吗？

> ID：11437508
> 
> 赞同：0
> 
> 时间：2012-07-11T16:48:48.883
> 
> 标签：regex, fsm, computation

我想计算一个字符串中可以包含非数字（aa11aa1a）的位数。我可以用有限状态机解决这个问题吗？这个问题可以表示为正则表达式吗？

如果我想知道计数是否为“X”怎么办，它会改变性质问题吗？更准确地说，这个字符串中有 3 位数字吗？FSM 是否足以解决问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-11T16:55:40.503

第二个问题可以用正则表达式解决。

考虑：`^[^0-9]*[0-9][^0-9]*[0-9][^0-9]*[0-9][^0-9]*$`。

您还可以使用组：`^[^0-9]*([0-9][^0-9]*){3}$`

我认为您不能单独使用正则表达式来解决第一个问题。但是使用正则表达式的解决方案（删除所有非数字，或匹配单个数字）将是微不足道的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-11T16:52:47.760

如果您只想匹配 3 位数字，就像

```
/[^0-9]*[0-9][^0-9]*[0-9][^0-9]*[0-9][^0-9]*/ 
```

如果匹配，则字符串正好包含三个数字。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-11T16:54:24.613

我建议不要使用显式 FSM，而是使用正则表达式来取出所有非数字，然后只取结果字符串的长度。或者，将您的正则表达式匹配到单个数字并计算匹配数（但这可能会降低效率）。或者，最简单的方法（伪代码）：

```
count = 0

for char in string
    if char is a digit
        increment count

// For your second part
    if count > X
        count isn't X; done

if count < X
    count isn't X; done
else
    count is X; done 
```

# mongodb - 如何从 Spring Data MongoDB 中的 MongoDB ObjectId 中提取时间戳？

> ID：11437513
> 
> 赞同：3
> 
> 时间：2012-07-11T16:49:27.077
> 
> 标签：mongodb, spring-data

MongoDB[文档](http://www.mongodb.org/display/DOCS/Optimizing+Object+IDs#OptimizingObjectIDs-Extractinsertiontimesfromidratherthanhavingaseparatetimestampfield.)建议从 ObjectId 中提取插入时间，而不是使用单独的时间字段。有谁知道如何使用 Spring Data MongoDB 做到这一点？

特别是，我想查询插入特定日期范围的文档。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-12T03:07:00.377

从`ObjectId`...中获取时间很容易，但是您无法获得毫秒精度。

`org.bson.types.ObjectId`有 2 种方法可供您使用：`getTimeSecond()`和`getTime()`（与 相同``getTimeSecond() * 1000L`）。这些将获得您的 unix 时间戳。

我没有将 MongoDB 与 Spring 一起使用——但如果你能掌握实际`ObjectId`实例，它就像调用上述方法之一一样简单。

现在 - 要查询某个时间范围内的文档，您必须倒退并`ObjectId`根据时间戳创建对象。再次 - 这很简单 -`ObjectId`有一个构造函数可以为您执行此操作：

`ObjectId(Date time)`

所以 - 创建 2 个`ObjectId`代表您的最小和最大时间范围的实例，然后执行如下查询：

`db.collection.find({ "field" : { $gt: value1, $lt: value2 } } );`

在哪里`value1`并`value2`表示`ObjectId`您通过创建的实例`ObjectId(Date time)`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-11T16:53:09.113

我在那里没有看到*推荐*。文档只说*可以*从 ObjectId 获取插入时间。如文档中所述，按 _id 排序也是按插入时间排序。

通过一定的额外努力，可以进行相等/范围查询，但我会为此使用单独的（索引）字段。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-19T14:03:31.907

感谢 phatduckk 的指导，这是我需要的 Spring Data 的代码片段。

```
 org.springframework.data.mongodb.core.query.Criteria criteria = ...;

    if (startTimestamp != null || endTimestamp != null) {
        criteria = criteria.and("_id");

        if (startTimestamp != null) {
            criteria = criteria.gte(new ObjectId(startTimestamp.toDate()));
        }

        if (endTimestamp != null) {
            criteria = criteria.lt(new ObjectId(endTimestamp.toDate()));
        }
    }

    // use criteria 
```

# java - 比较Java中的Git分支的基准？

> ID：11437514
> 
> 赞同：1
> 
> 时间：2012-07-11T16:49:28.490
> 
> 标签：java, git, testing, branch, benchmarking

有没有什么好的软件可以对不同的 Git 分支进行基准测试？或者其他方法来接近它？

我有一些想要比较的原始分支，然后我创建一个新分支并在代码设计中进行一些更改。现在我想测试一下代码是否更快或使用更少的内存。我将在两者上运行完全相同的运行配置。我在 Eclipse 中用 Java 编写的代码。但是，我想象的解决方案可能不是 Java 特定的。

有谁知道最好的方法是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-11T17:28:59.697

当我使用 Guava 执行此操作时，我使用[Caliper](http://caliper.googlecode.com)，它非常擅长 Java 基准测试，并且知道如何处理 JIT 预热时间和所有事情。（它的内存测量工具目前运行得不是很好，但我听说 1.0 版本很快就会有。）只需在每个分支上运行 Caliper 基准测试即可；它将向网页输出令人愉悦的条形图，您可以尝试以不同的方式查看数据。

[http://microbenchmarks.appspot.com/run/wasserman.louis@gmail.com/com.google.common.math.Log10Benchmark](http://microbenchmarks.appspot.com/run/wasserman.louis@gmail.com/com.google.common.math.Log10Benchmark)是我最近做的一个例子，`IntMath.log10(int, RoundingMode)`在 Guava 中进行了优化。

# mysql - 在我的查询中按错误分组

> ID：11437515
> 
> 赞同：0
> 
> 时间：2012-07-11T16:49:30.990
> 
> 标签：mysql, sql

我想知道是否有人可以阐明以下错误。sql 在本地工作正常，但我远程收到以下错误。

SQL查询：

```
$inQ = "
    SELECT category.category_name, GROUP_CONCAT(subject.subjects SEPARATOR ', ') AS subjects
    FROM category 
    INNER JOIN tutor_category_subject ON tutor_category_subject.category_id = category.category_id
    INNER JOIN subject ON tutor_category_subject.subject_id = subject.subject_id
    WHERE tutor_category_subject.tutor_id = $tutorId AND tutor_category_subject.category_id = $categoryId
"; 
```

MySQL 说：

> #1140 - 如果没有 GROUP BY 子句，混合没有 GROUP 列的 GROUP 列 (MIN(),MAX(),COUNT(),...) 是非法的

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-11T16:52:36.693

就像错误说的那样：如果没有 GROUP BY 子句，您不能混合组列和非组列。尝试添加一个：

```
SELECT category.category_name, GROUP_CONCAT(subject.subjects SEPARATOR ', ') AS subjects
FROM category 
INNER JOIN tutor_category_subject ON tutor_category_subject.category_id = category.category_id
INNER JOIN subject ON tutor_category_subject.subject_id = subject.subject_id
WHERE tutor_category_subject.tutor_id = $tutorId AND tutor_category_subject.category_id = $categoryId
GROUP BY category.category_name 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-07-11T16:54:42.033

我相信你想要这个：

```
SELECT category.category_name, GROUP_CONCAT(subject.subjects SEPARATOR ', ') AS subjects
FROM category 
  INNER JOIN tutor_category_subject ON tutor_category_subject.category_id = category.category_id
  INNER JOIN subject ON tutor_category_subject.subject_id = subject.subject_id
WHERE tutor_category_subject.tutor_id = $tutorId AND tutor_category_subject.category_id = $categoryId
GROUP BY category.category_name, subject.subjects 
```

您需要`GROUP BY`添加子句才能使您的选择能够使用`GROUP_CONCAT`.

# c# - c#类强制至少一个关系

> ID：11437518
> 
> 赞同：3
> 
> 时间：2012-07-11T16:49:40.227
> 
> 标签：c#, class, .net-4.0

这应该是一个简单的问题。

假设我有一家航空公司和一个航班。一家航空公司可以有多个航班。每个航班都应与一家航空公司相关联。

如何创建类来模仿这种行为？我想出如下：

```
 public class Airline
{
    private string Name;
    private string Description;
    private List<Flight> Flights;
    public Airline(string Name, string Description)
    {
        this.Name = Name;
        this.Description = Description;
    }
    public void AddFlight(Flight Flight)
    {
        if (!this.Flights.Contains(Flight))
        {
            this.Flights.Add(Flight);
        }
    }
    public void RemoveFlight(Flight Flight)
    {
        this.Flights.Remove(Flight);
    }
}

public class Flight
{
    private string No;
    private string Time;
    private Airline Airline;

    public Flight(Airline Airline, string No, string Time)
    {
        this.No = No;
        this.Time = Time;
        this.Airline = Airline;
    }
} 
```

有没有更好的方法来完成这项任务？我不喜欢的是，当我创建航班时，我必须向其中添加航空公司，然后我必须调用 Airline.AddFlight 才能将其与我的航空公司相关联。另外，我正在查看代码是否还有其他问题或任何可以改进的地方。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-11T16:53:44.750

为什么不在施工时将航班添加到航空公司：

```
 public Flight(Airline Airline, string No, string Time)
    {
        this.No = No;
        this.Time = Time;
        this.Airline = Airline;
        Airline.AddFlight(this);
    } 
```

?

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-11T16:56:34.600

我认为，在这种情况下，在 Airline 上使用 Add 方法，并将 Flight 类作为具有私有/受保护构造函数的子类对您有利：

```
public abstract class Airline
{
  protected List<Flight> _flights = new List<Flight>();

  public abstract Flight AddFlight(string no, string time)
  {
    this._flights.Add(new Flight(this, no, time));
  }

  public class Flight
  {
    protected Flight(Airline airline, string no, string time)
    {
    }
  }
} 
```

在这种情况下，您要求航空公司创建航班并返回航班。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-11T16:58:40.577

这可以。循环引用除外。您有包含 Airline 对象的 Flight 类，以及包含 Flight 对象列表的 Airline 类。让 Airline 对象成为父对象，在您的代码中，您仅在父子关系认为合适时才将航班添加到航空公司的航班列表中。Flight 类不需要 Airline 类的知识。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-11T17:02:43.460

一方面，您真的不需要在飞行中提及航空公司。航班不需要知道它属于哪家航空公司。这种关联是与生俱来的。不要自己创建新航班，只需使用`Airline.AddFlight()`.

因此，首先要做的是更改`Flight`构造函数以取出航空公司：

```
public Flight(string No, string Time)
{
    this.No = No;
    this.Time = Time;
} 
```

所以，这里有一个例子。您想要创建 2 家航空公司，每家航空公司都有两个航班。这是执行此操作的代码：

```
Airline airline1 = new Airline("Airline1","First Airline");
airline1.AddFlight(new Flight("1","12:00"));
airline1.AddFlight(new Flight("2","12:00"));

Airline airline2 = new Airline("Airline2","Second Airline");
airline2.AddFlight(new Flight("1","12:00"));
airline2.AddFlight(new Flight("2","12:00")); 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-07-11T17:23:41.090

可以强制链接的另一种选择是将航班的工厂方法传递给航空公司的 AddFlight 方法，如下所示，基本上强制每个人以这种方式构建航班。

```
class Airline{
...
  Flight AddFlight(Func<Airline, Flight> flightFactory)
  {
    var flight = flightFactory(this);
    privateListOfFlights.Add(flight);
    return flight;
  }
} 
```

用法（可以共享函数，而不仅仅是内联 lambda）：

```
myAirline.AddFlight(airline=> new FancyFlight(airline, otherArgs)); 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-07-11T16:59:26.620

在 Windows 窗体中，[菜单](http://msdn.microsoft.com/en-us/library/75z3ch66)使用如下模式：

```
class Airline
{
    // code as it was
    public Flight AddFlight(string No, string Time)
    {
        var flight = new Flight(this, No, Time);
        AddFlight(flight);
        return flight;
    }
} 
```

这样你就可以保持灵活性并且不要两次陈述这种关系。

# jquery - 奇怪的 jQuery show() 问题 - 我没有看到什么？

> ID：11437520
> 
> 赞同：2
> 
> 时间：2012-07-11T16:49:50.613
> 
> 标签：jquery

我有一个 DIV，其中包含一个带有热点的图像。默认设置为隐藏。

我有一个我调用的函数来显示它。

在函数中，这有效：

```
$('#adChart').css("visibility", "visible"); 
```

但这不起作用：

```
$('#adChart').show(); 
```

这也不起作用：

```
$('#adChart').fadeIn(1000); 
```

（我真正想做的是从左侧淡入淡出并滑入。但此时我什至无法让一个简单的 show() 工作。）

使用 Document-ready 包装也无济于事。而且我不相信我需要将代码中的每个函数定义都包装成文档就绪，对吗？可能有数百个。

建议？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-11T16:55:20.923

`.show()`方法不影响`visibility`. 它修改了`display`属性，对于`fadeIn()`. 这就是为什么它不起作用。

`.show()`是一个捷径：`css("display", "");`

所以你应该使用`display`CSS 属性而不是`visibility`如果你想使用`.show()`and `fadeIn()`。

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2012-07-11T16:53:17.190

试试这个：

```
$('#adChart').css({"visibility": "visible","display":"block","opacity":1}); 
```

# oracle - ODBC 管理员找不到 Oracle TNS 名称文件

> ID：11437522
> 
> 赞同：15
> 
> 时间：2012-07-11T16:50:02.063
> 
> 标签：oracle, oracle11g, windows-server-2003, tnsnames

当我使用新的 Oracle 安装时`Configuration Management Tools > Microsoft ODBC Administrator > System DSN > Add > [new installation]`，下拉菜单中没有 TNSNAMES.ora 连接名称。使用旧安装，这已经奏效。

![创建新数据源](../Images/8df13445949f405ebaca4c30c259b693.png)

我已经尝试更新环境路径和注册表项，但仍然找不到让 ODBC 在下拉列表中看到它的方法。

![在此处输入图像描述](../Images/d8ecfbc13b930030d038d71b0901afa9.png)

以前在 Windows 服务器上安装了 Oracle 客户端。我试图删除大部分文件，但我们的 Oracle DBA 说我们可以再次安装并使用新位置更新环境路径。

[**我知道这里**](https://stackoverflow.com/questions/6902061/oracle-tns-cant-connect-through-odbc-administrator)和[**这里**](https://stackoverflow.com/questions/10499/oracle-what-tns-names-file-am-i-using)关于这个问题还有另外两篇关于 SO 的帖子。但是，我不确定 TNS PING 是否会有所帮助，因为这似乎是环境路径和 ODBC 能够找到 .ora 文件的问题。

**TNSNAMES.ORA 位置**

`TNS_Admin = E:\app\[username]\product\11.2.0\client_1\network\admin\TNSNAMES.ora`

**环境变量**

```
TNS_Admin = E:\app\[username]\product\11.2.0\client_1  
Path = E:\app\[username]\product\11.2.0\client_1 
```

**Registry Entries**
*home3 是新安装的。我应该删除旧的注册表项（home2）吗？* `HKLM\SOFTWARE\ORACLE\KEY_OraClient11g_home2`和`\..._home3`

此外，如果我在“创建新数据源”屏幕中选择“OraClient11g_home2”，下拉菜单中会显示：

![在此处输入图像描述](../Images/b49948861c2137d9e41c76352a976c01.png)

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2015-06-04T16:53:05.370

如果服务名称未显示在下拉列表中，请直接输入服务名称并查看是否能够测试连接。

[![在此处输入图像描述](../Images/f5d07dabfeed1c0ef6f2c7303fb42392.png)](https://i.stack.imgur.com/XtUI0.gif)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-07-11T19:02:44.580

似乎风滚草在这个问题上滚滚而过，但仅适用于可能遇到相同问题的每个人；我能够通过使用**[网络配置助手](http://docs.oracle.com/cd/B16351_01/doc/server.102/b14196/network002.htm)**向导并提供正确的信息来解决这个问题。它`tnsnames.ora`以正确的格式生成**，**应该注意给我的文件名是`tsnames.ora`！

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-07-16T08:24:11.530

对于像我这样的愚蠢灵魂：如果您是`tnsnames.ora`通过记事本左右书写，请确保它没有`.txt`（我们的）默认情况下在 Windows 资源管理器中不可见的扩展名

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2016-02-12T19:46:08.367

很抱歉恢复一个古老的线程，但我遇到了同样的问题，网络配置助手无法运行。

（Windows XP SP3、Oracle 11gR2 客户端）

解决方案： 1.*使用 Oracle (De-)Installer*
卸载所有*其他*Oracle_Home 实例（***不要****只是删除注册表项！*），这样您就只有**一个**要保留的 Oracle_Home： 2\. 创建或设置 Windows 环境变量：... 3\. 重新启动。（叹气......） 无论如何，这对我有用。 *****`%oracle-home-that-you-want-to-keep%\client\oui\bin\setup.exe`

`TNS_Admin = %oracle_home%\client_1\network\admin`
`Path = %oracle_home%\client_1;`***** 

 ****** * *

## 回答 #5

> 赞同：1
> 
> 时间：2018-10-29T18:26:48.353

或者只使用您在文本框中输入的连接字符串（应该使用下拉框填充的连接字符串），例如 127.0.0.1/XE 请参见[此处](http://dbtricks.com/?p=55)。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2018-09-25T05:35:30.427

由于某种原因，Windows 2012R2 没有设置 ORACLE_HOME 环境变量。这可以解决问题，因此添加`oracle_home`或`tns_admin`。Windows 2012 安装有一个`oracle_home`变量。

* * *

## 回答 #7

> 赞同：-1
> 
> 时间：2014-07-03T08:34:25.247

确保：

*   你`tnsnames.ora`的编码是 ANSI 而不是 UTF8。
*   您没有像 üäö 这样的特殊字符，甚至在评论中也没有。*****

# c++ - 我可以在现代 Intel Core CPU 上测量分支预测失败吗？

> ID：11437523
> 
> 赞同：18
> 
> 时间：2012-07-11T16:50:04.480
> 
> 标签：c++, windows, visual-c++, optimization, branch-prediction

[这个问题](https://stackoverflow.com/questions/11227809/why-is-processing-a-sorted-array-faster-than-an-unsorted-array)及其答案最近被标记为史诗般的答案，这让我感到疑惑；我可以根据 CPU 分支预测失败来衡量 Windows 中正在运行的应用程序的性能吗？我知道存在一些静态分析工具，它们可能有助于在分支预测情况下优化代码以获得良好的性能，并且手动技术可以通过简单地进行更改和重新测试来提供帮助，但我正在寻找一些可以在 Windows 应用程序运行时报告一段时间内分支预测失败的总数，我希望 Visual C++ 的一些 Profiler 工具可以帮助我。

对于这个问题，所讨论的应用程序要么是使用原生编译器（例如 Windows 的 Visual C++）构建的，要么是使用其他一些原生编译器（例如 GCC、FreePascal、Delphi 或 TurboAssembler）构建的。可执行文件可能根本没有任何调试信息。我想知道我是否可以检测和计算分支预测失败，可能是通过某些 Windows 服务（如 WMI）读取内部 CPU 信息，或者可能完全在运行 Windows 的虚拟化环境中运行，例如使用 VirtualBox，然后完全运行使用我的测试应用程序在 VirtualBox 中虚拟化 Windows 环境，并对虚拟 CPU 进行运行时分析。或者我不知道的其他一些技术，因此这个问题。

是的，我用谷歌搜索。唯一看起来很有希望的是来自 AMD的[PDF 。](http://developer.amd.com/Assets/intro_to_ca_v3_final.pdf)第 18 页提到了一些非常接近我想做的事情，但似乎是为那些在原始评估硬件平台上没有任何操作系统工作的人编写的：

> 5.1。分支机构。适用性。条件分支错误预测可能是具有大量决策逻辑的代码中的一个重要问题。
> 
> Conditional branches may be mispredicted when the likelihood of choosing the true or false path is random or near a 50-50 split. 分支预测硬件无法“学习”模式，因此无法正确预测分支。收藏。收集此表中的事件以衡量分支预测性能：
> 
> 分支 使用以下公式计算执行分支的速率和每个分支的指令数比率： 分支执行率 = Taken_branches / Ret_instructions 分支执行率 = Taken_branches / Branches
> 每个分支的指令 = Ret_instructions / Branches

更新：我想我可以说我正在寻找一种方法来读取英特尔酷睿 i7 PMU 模块或其他 CPU 的等效功能。看起来英特尔 VTUNE（来自 Adrian 的评论）非常接近我的要求。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-11T18:25:26.083

VTune 性能分析器可以做到！顺便说一句，如果您正在研究这些主题，请查看 Intel Press 的“Optimization Cookbook”。

注意：评论给出了相同的答案，但有一些不确定性，我使用了 VTune 并测量了 Intel CPU 的分支预测率。所以我百分百确定。

[这是VTune的链接](http://software.intel.com/en-us/forums/intel-vtune-performance-analyzer/)

[这是这本书的链接](http://www.intel.com/intelpress/sum_swcb2.htm)

# asp.net - 使用 Visual Studio 发布

> ID：11437533
> 
> 赞同：0
> 
> 时间：2012-07-11T16:50:47.823
> 
> 标签：asp.net, visual-studio-2010, visual-studio, compilation

当我使用 Visual Studio 发布我的网站时，它会删除我的图像文件夹。我在那个文件夹中上传了图片。

如何阻止 Visual Studio 删除内容？我应该使用复制网站选项吗？当我使用复制网站选项时，asp.net 服务器会自动编译网站吗？如果我在上传之前不编译它，我的网站会工作吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-11T16:53:05.233

您想要发布的任何文件夹也必须包含在 Visual Studio 的项目中，如果它只存在于磁盘上，则不会发布。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-11T16:56:35.480

1.  将您的图像存储在 App_Theme 文件夹中，然后可能不会被删除。
2.  我不认为，复制网站工具执行编译。但在使用它之前，您应该首先构建您的网站。
3.  是的，如果您的网站没有错误，它将起作用。

# c# - 动态 ascx 用户控件的空引用异常

> ID：11437540
> 
> 赞同：2
> 
> 时间：2012-07-11T16:51:09.910
> 
> 标签：c#, webforms, nullreferenceexception, dynamic-controls

我正在处理一个用户表单，我想在其中动态生成用户想要的尽可能多的辅助电话字段（在按钮单击事件上）。我在此页面上关注了 Daniel 的动态控件实例化：[如何在不使用数据库的情况下重新实例化动态 ASP.NET 用户控件？](https://stackoverflow.com/questions/1324003/)

我还实现了 lordscarlet 在此页面上提出的“事件冒泡”解决方案：[Eventhandling in ascx usercontrols](https://stackoverflow.com/questions/92860/)

**我的 user.aspx 页面的相关部分：**

```
<asp:Panel ID="phonePnl" runat="server"></asp:Panel>
            <tr><td><asp:Button ID="phoneBtn" Text="Add Secondary Phone" OnClick="phoneBtn_Click" runat="server" /></td></tr> 
```

**user.aspx.cs CodeBehind 的相关部分**

```
 // ============================================================================
protected void phoneBtn_Click(object sender, EventArgs e)
{
    UserControl controlToAdd = new UserControl();
    controlToAdd = (UserControl)controlToAdd.LoadControl("~/DynamicData/FieldTemplates/SecondaryPhone.ascx");

    controlToAdd.ID = Guid.NewGuid().ToString();

    Panel phonePnl = (Panel)fvUser.FindControl("phonePnl");

    Literal lit = new Literal();
    lit.Text = "<tr><td>Secondary Phone</td><td>";
    phonePnl.Controls.Add(lit);
    phonePnl.Controls.Add(controlToAdd);
    lit = new Literal();
    lit.Text = "</td></tr>";
    phonePnl.Controls.Add(lit);

    myControlList.Add(controlToAdd.ID, controlToAdd.AppRelativeVirtualPath);
    Session["myControlList"] = myControlList;
}

// ============================================================================
protected override void OnInit(EventArgs e)
{
    InitializeComponent();
    if (!IsPostBack)
    {
        myControlList = new Dictionary<string, string>();
        Session["myControlList"] = myControlList;
    }
    else
    {
        myControlList = (Dictionary<string, string>)Session["myControlList"];

        foreach (var registeredControlId in myControlList.Keys)
        {
            UserControl controlToAdd = new UserControl();
            controlToAdd = (UserControl)controlToAdd.LoadControl(myControlList[registeredControlId]);
            Panel phonePnl = new Panel();
            phonePnl = (Panel)fvUser.FindControl("phonePnl");
            phonePnl.Controls.Add(controlToAdd);
        }
    }
    base.OnInit(e);
}

// ============================================================================
private void InitializeComponent()
{
    this.Load += new System.EventHandler(this.Page_Load);
    SecondaryPhoneControl.BubbleClick += new EventHandler(admin_user_BubbleClick);
}

// ============================================================================
private void admin_user_BubbleClick(object sender, EventArgs e)
{
    //todo
} 
```

请注意，我添加了最后一行：
Session["myControlList"] = myControlList;

此外，fvUser 只是我在 user.aspx 页面中的 FormView ID。

虽然它不在 Daniel 的解决方案中，但我的想法是，对于您添加的每个控件，您都需要将它添加到您的 Dictionary 中。我在这方面完全被误导了吗？

我的用户控件是一个带有 TextBox 和 Button 的 ascx（用于删除控件，如果用户决定不想要该字段）。请注意，此删除尚未真正实现，但在此问题解决后，事件存在于我的父代码隐藏中。

**SecondaryPhone.ascx**

```
<%@ Control Language="C#" CodeBehind="SecondaryPhone.ascx.cs" Inherits="TwentyFourSeven.DynamicData.FieldTemplates.SecondaryPhone" %> 
```

**SecondaryPhone.ascx.cs**

```
using System;
using System.Data;
using System.Configuration;
using System.Collections;
using System.Collections.Specialized;
using System.Linq;
using System.Web;
using System.Web.Security;
using System.Web.UI;
using System.Web.UI.WebControls;
using System.Web.UI.WebControls.WebParts;
using System.Web.UI.HtmlControls;
using System.Xml.Linq;
using System.Web.DynamicData;

namespace TwentyFourSeven.DynamicData.FieldTemplates

{
public partial class SecondaryPhone : System.Web.UI.UserControl
{
    protected void Page_Load(object sender, EventArgs e)
    {

    }

    public void SetPhone(String phone)
    {
        secPhoneTxt.Text = phone;
    }

    protected override void LoadViewState(object savedState)
    {
        base.LoadViewState(savedState);
        secPhoneTxt.Text = (String)ViewState["secPhoneTxt"];
    }

    protected override object SaveViewState()
    {
        ViewState["secPhoneTxt"] = secPhoneTxt.Text;
        return base.SaveViewState();
    }

    private void secPhoneBtn_Click(object sender, EventArgs e)
    {
    }

    public event EventHandler BubbleClick;

    protected void OnBubbleClick(EventArgs e)
    {
        if (BubbleClick != null)
        {
            BubbleClick(this, e);
        }
    }

    protected override void OnInit(EventArgs e)
    {
        InitializeComponent();
        base.OnInit(e);
    }

    private void InitializeComponent()
    {
        this.secPhoneBtn.Click += new System.EventHandler(this.secPhoneBtn_Click);
        this.Load += new System.EventHandler(this.Page_Load);
    }
}
} 
```

调试时，第一次加载页面时 OnInit 工作正常，单击 Add Secondary Phone 按钮在第一次单击时工作。第二次单击在我的 OnInit 方法的这一行引发空引用异常（对象引用未设置为对象的实例）：

```
phonePnl.Controls.Add(controlToAdd); 
```

在调试中我注意到在第一次单击按钮时，在我的phoneBtn_Click方法中，controlToAdd.Application、controlToAdd.Cache等也会抛出空引用异常，但它仍然会生成控件并返回页面。它还将控件及其 ID 添加到 Dictionary 中。

然后在第二次单击按钮时，就在它碰到导致异常的行之前，我的 phonePnl 变量为空。我可以推测这是导致异常的原因，但为什么我的 phonePnl 变量在这种情况下为空，而不是在第二次 OnInit 调用/第一次回发中？

我整天都在努力反对这一点，我希望有人能提供一些见解。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-11T16:57:35.827

而不是`controlToAdd.LoadControl`使用`Page.LoadControl`，看看是否有效

# mysql - 如何让它工作“SELECT COUNT(x) AS amount ... WHERE amount > 0”？

> ID：11437546
> 
> 赞同：0
> 
> 时间：2012-07-11T16:51:30.113
> 
> 标签：mysql, sql, count

由于 mySQL 的语法，不允许使用此语句（在 WHERE 部分中不能使用计数元素）：

```
Illegal syntax:
SELECT COUNT(x) AS amount ... WHERE amount > 0 
```

但是如何通过 WHERE 处理 COUNTed 元素？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-11T16:53:14.673

# 编辑

请注意，您的原始查询可能不会按照您的想法进行。您可能想要`WHERE x > 0`：

```
SELECT COUNT(x) AS amount ... WHERE x > 0 
```

这是因为`HAVING amount > 0`如果有任何大于 0 的 x 值基本上是没有意义的。MySQL 将自动分组并包含所有行，并计算每一行。看起来您想知道 x 中数量为非零的行数，因此您需要使用 WHERE 指定只有那些行应该与要计算的原始条件匹配。*有关需要具有*HAVING的聚合函数的示例，请参见下文。

# 原答案：

你用`HAVING`. 语法与 完全相同`WHERE`，但在聚合之后进行评估。

```
SELECT COUNT(x) AS amount ... HAVING amount > 0 
```

区别很重要，因为它允许您限制使用 WHERE 计算哪些行，然后限制使用 HAVING 返回的行。

例如，假设我想知道每个部门在销售额低于 10 美元时赚了多少钱，但前提是它的销售额超过 1000 美元：

```
SELECT 
  SUM(amount) as total_sales
  ... 
WHERE amount < 10.0 
GROUP BY department 
HAVING total_sales > 1000.0 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-11T16:53:02.083

```
SELECT COUNT(x) AS amount ... HAVING amount > 0 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-11T16:53:54.217

您需要[`HAVING`](http://dev.mysql.com/doc/refman/5.0/en/group-by-hidden-columns.html)用于此查询。它与 相同`WHERE`，但专门针对`COUNT(x)`！

**SQL**

```
SELECT COUNT(x) AS amount ... HAVING amount > 0 
```

# content-management-system - TYPO3：文章使用什么摘要？

> ID：11437549
> 
> 赞同：0
> 
> 时间：2012-07-11T16:51:45.343
> 
> 标签：content-management-system, typo3

我只是想知道如何在 TYPO3 中实现带有文章的页面。我看过`News admin`并`tt_news`打包，所以看起来这些也可以使用。但是文章并不完全是新闻，所以我想知道`tt_news`用于此目的是否不仅仅是一些肮脏的黑客，我想知道是否有一些更清洁的概念可用于文章。

对于文章，我的意思是某些主题不会很快过时（与新闻相反），发布日期并不那么重要，文章的排序顺序不一定是按日期。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-11T17:10:26.010

**不**，使用`tt_news`不是肮脏的黑客，它多年来一直用于*各种*不同的目的，现在它是我认为的最佳解决方案（无需编写自定义扩展）。更重要的是，这不仅仅是我的想法，这个扩展从 TYPO3 存储库中下载的次数最多。

 ***使用不同的模板、类别和`RealURL`设置，您可以“屏蔽”`tt_news`在一个地方，并将其用作示例来构建带有列表和单一视图的简单产品目录。

它还提供了`hooks`用于扩展 ie 的可能性。通过添加额外的模板`markers`而不是从头开始编写 ext，您只需编写简单的钩子功能，仅此而已。据我所知，在 tt_news 源代码中甚至还有示例挂钩，因此您只需将其复制到您自己的 ext 中即可。

PS。默认情况下 tt_news 不支持手动排序（它从范围内从最新到最旧排序），但是您会在存储库中找到一些扩展来添加此功能。***

# javascript - Google Map 标记悬停/单击上的样式侧边栏条目

> ID：11437550
> 
> 赞同：0
> 
> 时间：2012-07-11T16:51:52.420
> 
> 标签：javascript, google-maps-api-3

我正在使用谷歌地图创建一种商店定位器应用程序，在完成之前还需要做*一*件事......当相应的标记悬停并选择时，我需要我的侧边栏条目来更改背景颜色。

在过去的两天里，我一直在 SO 上查看很多类似的问题，但我不知道如何将解决方案附加到我自己的项目中。这是我的代码（以及我试图改造的注释掉的行）：

```
// this variable will collect the html which will eventually be placed in the side_bar
var side_bar_html = "";
//var leafmerchant = document.getElementsByAttribute("merchant_listing");
//var leafer = document.getElementByTagName("merchant_listing");
var street = "";
var city = "";
var state = "";
var zip = "";
var phone = "";

// arrays to hold copies of the markers and html used by the side_bar
// because the function closure trick doesnt work there
var gmarkers = [];
//var iterator = 0;
var map = null;

function initialize() {
  // create the map
  // HYBRID This map type displays a transparent layer of major streets on satellite images.
  // ROADMAP This map type displays a normal street map.
  // SATELLITE This map type displays satellite images.
  // TERRAIN This map type displays maps with physical features such as terrain + vegetation.
  var myOptions = {
    center: new google.maps.LatLng(42.366896, -71.080135),
    mapTypeControl: true,
    mapTypeControlOptions: {style: google.maps.MapTypeControlStyle.DROPDOWN_MENU},
    mapTypeId: google.maps.MapTypeId.ROADMAP,
    navigationControl: true,
    zoom: 16,

    mapTypeControl: true, mapTypeControlOptions: {
      position: google.maps.ControlPosition.TOP_LEFT,
      style: google.maps.MapTypeControlStyle.HORIZONTAL_BAR
    },

    panControl: true, panControlOptions: {
      position: google.maps.ControlPosition.TOP_RIGHT
    },

    streetViewControl: true, streetViewControlOptions: {
      position: google.maps.ControlPosition.TOP_RIGHT
    },

    zoomControl: true, zoomControlOptions: {
      position: google.maps.ControlPosition.TOP_RIGHT,
      style: google.maps.ZoomControlStyle.SMALL
    },

    scaleControl: false, scaleControlOptions: {
      position: google.maps.ControlPosition.RIGHT_BOTTOM
    }
  };

  map = new google.maps.Map(document.getElementById("merchant-map"), myOptions);

  google.maps.event.addListener(map, 'click', function() { infowindow.close(); });

  // Add markers to the map // Set up markers with info windows // add the points
  var point = new google.maps.LatLng(42.366896, -71.080135);
  var marker = createMarker(point, "Leaf HQ", "Some stuff to display in the<br/>First Info Window", "222 Third Street", "Cambridge", "MA", "02142", "617-890-1234")

  var point = new google.maps.LatLng(42.363341, -71.079523);
  var marker = createMarker(point, "Casa B", "Some stuff to display in the<br/>First Info Window", "253 Washington Street", "Somerville", "MA", "02143", "617-764-2180")

  var point = new google.maps.LatLng(42.368996, -71.085831);
  var marker = createMarker(point, "Sepal", "Some stuff to display in the<br/>Third Info Window", "84 Massachusetts Avenue", "Cambridge", "MA", "02139", "617-324-5568")

  var point = new google.maps.LatLng(42.367111, -71.076822);
  var marker = createMarker(point, "Café Luna", "Some stuff to display in the<br/>Fourth Info Window", "403 Massachusetts Avenue", "Cambridge", "MA", "02139", "617-576-3400")

  var point = new google.maps.LatLng(42.367997, -71.081146);
  var marker = createMarker(point, "Leaf HQ", "Some stuff to display in the<br/>First Info Window", "222 Third Street", "Cambridge", "MA", "02142", "617-890-1234")

  var point = new google.maps.LatLng(42.364442, -71.078504);
  var marker = createMarker(point, "Casa B", "Some stuff to display in the<br/>First Info Window", "253 Washington Street", "Somerville", "MA", "02143", "617-764-2180")

  var point = new google.maps.LatLng(42.340097, -71.084842);
  var marker = createMarker(point, "Sepal", "Some stuff to display in the<br/>Third Info Window", "84 Massachusetts Avenue", "Cambridge", "MA", "02139", "617-324-5568")

  var point = new google.maps.LatLng(42.368212, -71.075803);
  var marker = createMarker(point, "Café Luna", "Some stuff to display in the<br/>Fourth Info Window", "403 Massachusetts Avenue", "Cambridge", "MA", "02139", "617-576-3400")

  // put the assembled side_bar_html contents into the side_bar div
  document.getElementById("merchant_list").innerHTML = side_bar_html;
}

var infowindow = new google.maps.InfoWindow ({ size: new google.maps.Size(150, 50) });

// This function picks up the click and opens the corresponding info window
function myclick(i) { google.maps.event.trigger(gmarkers[i], "click"); }

// A function to create the marker and set up the event window function
function createMarker (latlng, name, html, street, city, state, zip, phone) {
  //var contentString = html;
  var contentString = '<div id="content">' +
    '<span class="title">' + name + '<\/span>' +
    '<div class="infomap-address">' +
    '<div class="address-01">' + street + '<\/div>' +
    '<div class="address-02">' + city + ',&nbsp;' + state + '&nbsp;' + zip + '<\/div>' +
    '</div>' +
    '<div class="infomap-address">Get directions' +
    '<\/div>'
    '<\/div>';
  var marker = new google.maps.Marker ({
    //icon: "http://maps.google.com/mapfiles/ms/micons/green.png",
    map: map,
    position: latlng,
    zIndex: Math.round(latlng.lat()*-100000)<<5,
  });

  google.maps.event.addListener(marker, 'click', function() {
    infowindow.setContent(contentString);
    infowindow.open(map,marker);
  });

  //google.maps.event.addListener(div, 'mouseover', function() { div.style.backgroundColor = '#eee'; });
  //google.maps.event.addListener(div, 'mouseout', function() { div.style.backgroundColor = '#fff'; });

  //google.maps.event.addListener(leafmerchant, 'mouseover', function() { leafmerchant.style.backgroundColor = '#eee'; });
  //google.maps.event.addListener(leafmerchant, 'mouseout', function() { leafmerchant.style.backgroundColor = '#fff'; });

  // save the info we need to use later for the side_bar // add a line to the side_bar html
  gmarkers.push(marker); side_bar_html += '<li class="merchant_listing vcard">'
  + '<a class="url fn org" href="javascript:myclick(' + (gmarkers.length-1) + ')">' + name + '<\/a><br/>'
  + '<div class="adr">'
  + '<div class="street-address">' + street + '<\/div>'
  + '<span class="locality">' + city + ',&nbsp;<\/span>'
  + '<span class="region">' + state + '&nbsp;<\/span>'
  + '<span class="postal-code">' + zip + '<br/><\/span>'
  + '<a class="tel">' + phone + '<\/a>'
  + '<\/div>'
  + '<\/li>';

  marker.setAnimation(google.maps.Animation.DROP);
  //function drop(){ for (i =0; i < gmarkers.length; i++) { setTimeout(function() { addMarkerMethod();}, i * 200); }}

  //google.maps.event.addListener(marker, 'mouseover', function() { document.getElementByTagName(merchant_listing).style.backgroundColor = '#07d0eb'; });
  //google.maps.event.addListener(marker, 'mouseout', function() { document.getElementByTagName(merchant_listing).style.backgroundColor = '#191919'; });

  //google.maps.event.addListener(gmarkers, 'mouseover', function() { leafer.style.backgroundColor = '#eee'; });
  //google.maps.event.addListener(gmarkers, 'mouseout', function() { leafer.style.backgroundColor = '#fff'; });
} 
```

# javascript - 变量范围：函数之间传递的名称？

> ID：11437557
> 
> 赞同：2
> 
> 时间：2012-07-11T16:52:05.483
> 
> 标签：javascript, jquery, scope

我有一个在另一个函数中调用的函数。它返回一个名为“checked”的变量，但该名称不是全局的，并且仅在该函数的范围内。

我的另一个函数有自己的名为“checked”的局部变量，但是当我尝试将其设置为 1 时，它总是返回 0。

我发现如果我删除对我的第一个函数的函数调用，它就会得到正确的值。

当两个变量的范围都是它们所在函数的本地时，这怎么可能呢？

```
 function filterRadioCheck()
    {
        checked = 0;
        $('#filterType').children('input').each(function() {

             if ($(this).attr('checked'))
             {
                checked = $(this).attr('value');
             }

        });

        return checked;

    }

    function setTagDefaultMode()
    { 
        checked = 1;

       radiocheck =  filterRadioCheck();

        //******'checked' is always 0 after this point*****///
        // alert(checked) will return 0 even though checked it is set to 1 above;

    } 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-11T16:54:16.393

变量“checked”是全局变量，因为您忘记了`var`关键字。

```
 var checked = 0; 
```

# xcode - 如何防止 XCode 查找平面/非嵌套导入？

> ID：11437559
> 
> 赞同：1
> 
> 时间：2012-07-11T16:52:12.287
> 
> 标签：xcode

这与[在 xcode 中保留包含路径](https://stackoverflow.com/questions/913782/preserve-include-path-in-xcode)有关，但这是互补的问题。

我们将磁盘上的代码组织成具有以下文件夹的逻辑组件：

```
ComponentA/HeaderA.h
ComponentB/HeaderB.h 
```

并要求团队成员像这样导入它们

```
#import "ComponentA/HeaderA.h"
#import "ComponentB/HeaderB.h" 
```

我们使用指向 ComponentA/B 上方目录的 USER_HEADER_SEARCH_PATHS 来使编译器能够找到这些，它工作正常。

*但是*，这些头文件都包含在 XCode 项目中，所以如果有人不小心使用了

```
#import "HeaderA.h"
#import "HeaderB.h" 
```

那么 XCode 仍然会找到头文件，但我们希望它产生编译器错误。除非使用分层名称，否则有没有办法让 XCode 停止查找这些标头？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-16T14:25:24.133

[事实证明，在控制 Xcode 将包含哪个项目头文件](https://stackoverflow.com/questions/2596695/controlling-which-project-header-file-xcode-will-include)之前，已经问过这个问题

未记录的关键设置是 USE_HEADERMAP=NO，这会阻止 Xcode 自动查找已添加到项目中的任何头文件。

# validation - ASP.NET 验证 - 客户端是否足够

> ID：11437563
> 
> 赞同：0
> 
> 时间：2012-07-11T16:52:15.640
> 
> 标签：validation, asp.net-4.0

有一个 ASP.NET WebForms 页面。它有一些验证器。

我的问题是，客户端验证是否足够，或者我还必须在回发后检查服务器上的验证值？换句话说，我是否还必须使用服务器验证以及如何使用它？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-11T16:53:37.307

您应该**始终**检查服务器端。如果客户端关闭了javascript怎么办？精心设计的请求呢？

# variables - Verilog 根据输入在任务中强制使用不同的线

> ID：11437564
> 
> 赞同：2
> 
> 时间：2012-07-11T16:52:16.353
> 
> 标签：variables, task, verilog, modular

有没有办法在 Verilog 任务中强制任意线为某个值，而无需提前指定线的名称或其分层路径？最好不必为每条可能的线路编写大量的 if 语句。

我的目标是足够模块化，以便从测试台的角度来看，这个任务可以用来驱动任何电线。

我希望做的例子：

```
task force;
input value;
input [8*N-1:0] string;              // Assume N is large enough
begin
    force ... = value;
end
endtask 
```

其中三个点“...”将是传入的电线的路径（例如 counter0.clk0.in_enable）。

假设我有 64 根电线，我想将其中的一些强行加高。它们不在单个总线上，它们都有不同的名称或分层路径。在测试台设置中，我会编写一个 C 函数，它读取我关心驱动到某个值的电线表并将每条电线传递给这个 Verilog 任务，但是我如何告诉模拟器哪条电线驱动高而不必每次在任务本身中写出每一根线？

如果我能做到这一点，那么正确的方法是什么？如果我不能这样做，你有什么建议呢？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-11T19:16:56.873

很可能有一种 PLI/VPI 方法可以做到这一点，但我对它不是很有经验，所以对此持保留态度。我也不知道verilog中有任何反射将字符串转换为线参考。

话虽如此，我要做的只是使用脚本语言来读取您的表格，然后吐出一个带有巨大案例语句的程序生成的 .v 文件。

你可以有一个像 force_wire(int wireId), release_wire(int wireId) 这样的 PLI 调用，其中线 ID 可能只是表格的行或其他东西。

在 C 例程中，您可以从字符串名称中查找 id，然后这将使用 id 调用 verilog 任务，并且 id 将从生成的 case 语句中选择要强制执行的内容。也许是这样的：

```
task force
input forceVal;
input wireId
begin
   case (wireId)
   //AUTOGENERATED BELOW
   0 : force foo.bar = forceVal;
   1 : force foo.baz = forceVal;
   2 : force bar.foo = forceVal;
   ...
   endcase
end 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-11T20:32:45.687

可悲的是，不，您无法使用非 PLI Verilog 构造来尝试执行您正在尝试的操作。力的目标需要是网络的层次路径，没有办法为它使用字符串。

Tim 在另一个答案中的建议，基本上是创建一个大查找表，可能是不使用 Verilog PLI 的最佳方法。

如果您想使用 PLI，您应该能够编写一个接收字符串并执行强制的函数。我想做类似的事情已经有一段时间了，但一直没有时间去尝试。如果您找到更好的方法，请在此处回答您自己的问题。

编辑：[这是](http://www.verificationguild.com/modules.php?name=Forums&file=viewtopic&p=15841)使用 PLI 或 SystemVerilog 绑定的一些可能实现的讨论。

# ontology - OWL 限制中的枚举

> ID：11437567
> 
> 赞同：2
> 
> 时间：2012-07-11T16:52:25.997
> 
> 标签：ontology, owl, protege, manchester-syntax

我正在尝试使用 Protege3.x 对本体中的属性添加限制。

我在指定限制内​​的枚举时遇到问题。例如，尝试以这种方式指定一个枚举来限制可能的数据元素：

![在此处输入图像描述](../Images/9f053d5c349cc197bf49fa064c2833cc.png)

它将整个表达式视为单个字符串：

![在此处输入图像描述](../Images/bc0c1a08b4223d56ddd7e4737e309ee5.png)

在另一个示例中，我尝试通过使用多个表达式和它们之间的“或”来解决问题，这似乎是合适的。但在前一个中，不允许使用“或”。

![在此处输入图像描述](../Images/a7711bd6b4a9acf17ed05de8d12d63d4.png)

如何使用枚举来满足这种需求？谢谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-11T21:33:08.373

使用 Protege 4 解决了该问题。

类 Superclasses 属性中使用了以下表达式：

```
hasRole only {"physician_generalPractice", "specialist_neurologist", "specialist_neurosurgeon"} 
```

# django - 静态文件 - 找不到页面

> ID：11437569
> 
> 赞同：4
> 
> 时间：2012-07-11T16:52:26.190
> 
> 标签：django, django-staticfiles

要查看静态文件（图像和 pdf），我`STATIC_DIRS`使用包含上传这些文件的目录名称的值进行定义：

```
STATICFILES_DIRS = (
    '/home/alessandro/Scrivania/progetto/media/photos/custodia/',
    '/home/alessandro/Scrivania/progetto/media/definitiva/',
    '/home/alessandro/Scrivania/progetto/media/proforma/',
    '/home/alessandro/Scrivania/progetto/media/fpdf/';
)

```

在 STATIC_URL 中：

```
STATIC_URL = '/静态/'
```

在已安装的应用程序中：

```
INSTALLED_APPS = (
   ……

    'django.contrib.staticfiles',

)

```

权限为 0777。

现在，当我想查看图像或 pdf 文件时，我收到此错误消息。网页未找到

我正在使用这个网址：
http://127.0.1:8000/home/alessandro/Scrivania/progetto/media/photos/custodia/powered_by.png

有任何想法吗？为什么会出现这个问题？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-11T17:06:04.833

默认情况下，Django 的内置开发服务器不提供静态和媒体文件。如果您希望它直接提供这些文件，请在您的 urlconf 中添加`staticfiles_urlpatterns`一个模式。`MEDIA_URL`

```
from django.conf import settings
from django.contrib.staticfiles.urls import staticfiles_urlpatterns
from django.conf.urls.static import static

# ... the rest of your URLconf goes here ...

urlpatterns += staticfiles_urlpatterns()
urlpatterns += static(settings.MEDIA_URL, document_root=settings.MEDIA_ROOT) 
```

这只有在`DEBUG`is时才有效`True`。

有关更多信息，请参阅[相应的文档](https://docs.djangoproject.com/en/1.4/howto/static-files/#staticfiles-development)。

**注意：你不应该在生产中这样做！在生产模式下，始终为静态文件使用单独的网络服务器。**

# android - 下载多个文件

> ID：11437570
> 
> 赞同：0
> 
> 时间：2012-07-11T16:52:32.770
> 
> 标签：android

我正在使用以下代码获取文件的链接：

```
private List<String> getFilesList(String path, String idcity){
    List<String> files = new ArrayList<String>();

    String readJSON = readJSON(path,idcity);

    try {
        JSONArray jsonArray = new JSONArray(readJSON);
        for (int i = 0; i < jsonArray.length(); i++) {
            JSONObject jsonObject = jsonArray.getJSONObject(i);
            files.add(jsonObject.getString("file"));
        }
    } catch (Exception e) {
        Log.e("getFilesList", "Error parsing data ", e);
    }

    return files;
} 
```

现在我想将所有这些文件下载到 SDCard。

我认为这可以使用 AsyncTask 来实现（并显示一个 ProgressDialog，其中包含有多少文件要下载的信息）。

我使用的是 Android API 4，所以我不能使用 DownloadManager。

假设链接在a中，你们能给我一些代码`List<String>`吗？

提前致谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-11T17:09:03.200

在循环中使用此函数，该循环遍历您的 URL 列表

**编辑：**使用较早的代码，如果您下载的文件大于 4MB，则会出现 OutOfMemoryError。使用这个，效果很好！

资料来源：[所以问题](https://stackoverflow.com/questions/4031800/android-download-large-files)

```
public boolean downloadFromUrl(String url, String outputFileName) {

        File dir = new File(Environment.getExternalStorageDirectory() + "/"
                + getString(R.string.directory_appBase) + "/");
        if (!dir.exists()) {
            dir.mkdirs();
        }
        try {
            File file = new File(dir, outputFileName);
            URL downloadUrl = new URL(url);
            URLConnection ucon = downloadUrl.openConnection();
            ucon.connect();

            InputStream is = ucon.getInputStream();

            FileOutputStream fos = new FileOutputStream(file);  

            byte data[] = new byte[1024];

            int current = 0;
            while ((current = is.read(data)) != -1) {
                fos.write(data, 0, current);
            }        
            is.close();
            fos.flush();
            fos.close();
            isFileDownloaded=true;
        } catch (IOException e) {
            e.printStackTrace();
            isFileDownloaded = false;
            System.out.println(outputFileName + " not downloaded");

        }
        if (isFileDownloaded)
            System.out.println(outputFileName + " downloaded");
        return isFileDownloaded;

    } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-11T17:05:54.620

只需获取`DownloadManager`源并将其添加到您的项目中即可。它几乎没有依赖关系。

[http://grepcode.com/file/repository.grepcode.com/java/ext/com.google.android/android/2.3_r1/android/app/DownloadManager.java#DownloadManager](http://grepcode.com/file/repository.grepcode.com/java/ext/com.google.android/android/2.3_r1/android/app/DownloadManager.java#DownloadManager)

`DownloadManager`做了很多事情，这将是您自己实施的主要痛苦。当然，它调用归结为做一个 HTTP GET，但魔鬼在细节中。

# php - apache必须在php或mysql之前安装吗？

> ID：11437574
> 
> 赞同：2
> 
> 时间：2012-07-11T16:52:43.550
> 
> 标签：php, mysql, apache, installation

我使用 XAMPP 有一段时间了，现在我正在尝试分别安装 Apache、PHP 和 MySQL。

我们应该在安装 PHP 和 MySQL 之前安装 apache 吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-11T16:55:10.587

您可以在不安装 Apache 的情况下在 CLI 上安装 PHP，但如果您想向 Apache 添加 PHP 支持，您必须先安装它。

您可以在 Apache 安装之前或之后安装 MySQL。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-11T16:56:34.227

PHP 可以独立安装，但必须通过配置文件连接到 apache 安装。

Mysql 完全独立于其他两个......实际上它可以在另一台机器上。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-11T16:55:15.560

是的，我想是这样。

这是一个教程：[链接](http://connectwww.com/how-to-install-and-configure-apachephpmysql-and-phpmyadmin-on-windows/457/)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-11T16:55:39.333

您可以按照您希望的任何顺序安装它们，因为它们是独立的独立应用程序。一旦您购买了 PHP 和 Apache，您只需按照 PHP 安装说明中的说明在其配置中添加几行，将 PHP 集成到 Apache 中。

# android - 使用带有两个参数 Android 的 where 子句进行查询

> ID：11437579
> 
> 赞同：0
> 
> 时间：2012-07-11T16:52:52.320
> 
> 标签：android

我想编写如下查询，但出现异常。

```
mDb.query(DATABASE_TABLE, new String[] {KEY_ROWID, KEY_TITLE,
                KEY_BODY,KEY_location  , KEY_GOAL_DATE,KEY_ABSOLUTE_DATE, KEY_DATE_CURRENT ,KEY_PRIO,KEY_DONE, KEY_CATEGORY,KEY_TIME_SPEND,KEY_POSOSTO, KEY_FATHER}, KEY_FATHER + " LIKE" + "'"+ "fid"+"'"+ "AND"+ KEY_ROWID + "LIKE" + "'"+ "uid"+"'", null, null, null, null); 
```

任何知道 where 子句的正确语法的人，其中两个参数与 And,Or 连接。我还没有找到任何有用的东西。提前谢谢你！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-11T16:58:30.813

如果您的代码按字面意思编写，则 sql 关键字周围需要空格：

```
mDb.query(DATABASE_TABLE, new String[] {KEY_ROWID, KEY_TITLE,
                KEY_BODY,KEY_location  , KEY_GOAL_DATE,KEY_ABSOLUTE_DATE, KEY_DATE_CURRENT ,KEY_PRIO,KEY_DONE, KEY_CATEGORY,KEY_TIME_SPEND,KEY_POSOSTO, KEY_FATHER}, KEY_FATHER + " LIKE " + "'"+ "fid"+"'"+ " AND "+ KEY_ROWID + " LIKE " + "'"+ "uid"+"'", null, null, null, null); 
```

我不知道您是否可能遇到其他问题，因为您没有提供您遇到的错误，但是如果您还没有看到它，那至少应该可以解决问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-11T17:04:22.277

检查[文档](http://developer.android.com/reference/android/database/sqlite/SQLiteQueryBuilder.html#query%28android.database.sqlite.SQLiteDatabase,%20java.lang.String%5B%5D,%20java.lang.String,%20java.lang.String%5B%5D,%20java.lang.String,%20java.lang.String,%20java.lang.String,%20java.lang.String%29)，努力寻找伙伴..

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-11T17:18:14.083

戈登给了你正确的答案。您的错误代码仍然缺少空格。此外，如果 fid 和 uid 是变量，那么您需要删除它周围的引号并使用以下内容：

```
 KEY_FATHER + " LIKE " + fid + " AND "+ KEY_ROWID + " LIKE " + uid 
```

希望这可以帮助。

# javascript - 如何检查 NS String 是否包含 javascript 函数？

> ID：11437589
> 
> 赞同：0
> 
> 时间：2012-07-11T16:53:45.167
> 
> 标签：javascript, objective-c, scriptable

对于应用程序，我必须在 NSString 中搜索 JavaScript 语法中的函数。

在java中，我是这样做的：

```
import org.mozilla.javascript.Function;
import org.mozilla.javascript.Scriptable;
private Scriptable script;

public boolean bla(String name) {

  Object obj = script.get(name, script);
  if (!(obj instanceof Function)) {
      return false;
  } 

return true;
} 
```

有没有一种简单的方法可以将其转换为objective-c？它是 Cocoa touch，所以我不能使用 webkit。

谢谢

m0e

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-11T17:10:50.823

是只想知道有没有功能还是需要做进一步处理？您给定的示例有效，因为您使用的库将代码转换为成熟的 Javascript 对象并检查该函数。但是，如果您只想快速而肮脏地检查函数是否存在，我建议您使用子字符串检查例程（NSString 的 rangeOfString）。否则，您将不得不从解析 JavaScript 的某个地方引入整个库。

# jquery - Jquery中的一个事件条件到另一个事件条件

> ID：11437592
> 
> 赞同：0
> 
> 时间：2012-07-11T16:53:55.457
> 
> 标签：jquery

我正在尝试做这样的事情：悬停在：'.painel li' if mousedown then：执行我已经这样做的代码：

```
$('.painel li').bind('mousedown hover', function () {
    // Code     
}); 
```

但是，它不起作用，有人知道我该怎么做吗？

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-11T16:56:46.963

您可以尝试`.on()`：

```
$('.painel li').on('mousedown hover', function() {

}); 
```

**[演示](http://jsfiddle.net/QStkd/602/)**

### 笔记

*   检查**[here](http://jsfiddle.net/QStkd/602/)**，`.bind()`也在工作..
*   检查您是否包含 jQuery 库
*   `$(document).ready(function() { // code })`简而言之，将所有 jQuery 代码包装在`$(function() { // code })`

### 更多的

您还可以分离事件绑定，如下所示：

```
$('.painel li').mousedown(function() {
    console.log('mousedown');
}).hover(function() {
    console.log('hover');
}); 
```

**[演示](http://jsfiddle.net/QStkd/603/)**

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-11T16:57:11.340

改为尝试：

```
$(".painel li").on("mousedown hover", function(event){
    alert('you made it');
}); 
```

# nhibernate - QueryOver 不存在的 NHibernate

> ID：11437593
> 
> 赞同：3
> 
> 时间：2012-07-11T16:54:10.130
> 
> 标签：nhibernate, queryover

我有一个实体 GameSystemDAO 和一个实体 ContestPlanningGSItemDAO，其属性 GameSystem 是 GameSystemDAO 类型的多对一。什么是对应于以下 SQL 的 QueryOver 表达式？

```
select *
from gamesystemdao g
where not exists (
  select *
  from contestplanninggsitemdao cpgsi
  where cpgsi.gamesystem = g.id) 
```

我尝试了以下（以及许多其他变体）：

```
GameSystemDAO gameSystemAlias = null;
ContestPlanningGSItemDAO contestPlanningGSItemAlias = null;
List<GameSystemDAO> newGameSystems = session.QueryOver<GameSystemDAO>(() => gameSystemAlias)
                    .WithSubquery
                    .WhereNotExists(
                        QueryOver.Of<ContestPlanningGSItemDAO>(() => contestPlanningGSItemAlias)
                        .Where(() => contestPlanningGSItemAlias.GameSystem.Id == gameSystemAlias.Id)
                        .Select(c => c.GameSystem))
                    .List(); 
```

但总是得到一个*KeyNotFoundException: The given key was not present in the dictionary*。似乎 NHibernate 正在 ContestPlanningGSItemDAO 实例上寻找名为*gameSystemAlias*的属性。

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-12T09:01:40.953

交换

```
QueryOver.Of<ContestPlanningGSItemDAO>(() => contestPlanningGSItemAlias)
    .Where(() => contestPlanningGSItemAlias.GameSystem.Id == gameSystemAlias.Id)
    .Select(c => c.GameSystem)) 
```

和

```
QueryOver.Of<ContestPlanningGSItemDAO>()
    .Where(x => x.GameSystem == gameSystemAlias)) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-12T10:30:36.357

我发现更新到 NHibernate 3.3.1 可以让它工作；我使用的是 NH 3.2.0

# web-services - REST 风格的 URL 到底是什么意思

> ID：11437598
> 
> 赞同：0
> 
> 时间：2012-07-11T16:54:21.700
> 
> 标签：web-services, rest, web

> **可能的重复：**
> [什么是休息，它的优势是什么](https://stackoverflow.com/questions/6160928/what-is-rest-and-what-is-its-advantage)

这是[WAHHP书中的一些内容](https://rads.stackoverflow.com/amzn/click/com/1118026470)

> 尽管在查询字符串中包含参数的 URL 本身确实符合 REST 约束，但术语“REST 样式 URL”通常用于表示在 URL 文件路径中包含其参数的 URL，而不是在查询字符串中。例如，以下包含查询字符串的 URL： [http](http://wahh-app.com/search?make=ford&model=pinto) ://wahh-app.com/search?make=ford&model= pinto 对应于包含“REST-style”参数的以下 URL： [http ://wahh-app.com /搜索/福特/平托](http://wahh-app.com/search/ford/pinto)

我实际上无法理解上面的意思。如何在我的应用程序中设计 rest 样式的 URL？一般能解释一下区别和实现方法吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-11T17:02:39.203

什么是手段而不是像这样的 URL：

```
/page.php?id=202&date=07112012 
```

您的网址将是：

```
/page/202/07112012/ or /{page}/{id}/{data} 
```

我没有创建一系列参数，而是将参数构建到 URL 的结构中。根据您使用的技术，有许多框架允许您创建这样结构的 URL。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-11T17:03:38.320

在 REST 应用程序中，您可以使用相同的 URL 来根据 HTTP 动词进行任何操作。
以下 URL http:domian.com/user/1 可以删除、显示或编辑 ID 为 1的用户。
要删除用户，请发送带有 DELETE 动词的请求，显示使用 GET ver 和编辑使用 POST 动词和您的参数。
欲了解更多信息，请阅读：[http ://en.wikipedia.org/wiki/REST](http://en.wikipedia.org/wiki/REST)

# c++ - 在 C++ 中的 bmp 文件中获取指向 dib 的指针

> ID：11437600
> 
> 赞同：-2
> 
> 时间：2012-07-11T16:54:25.157
> 
> 标签：c++

我想在 C++ 中的 bmp 文件中获取一个字节 * 到 dib。我知道 bmp 包含一个 bmp 标头，我需要打开 bmp 文件并跳过一些字节以获取指向 dib 的指针。我不熟悉 C++，所以任何代码都会有所帮助！

我想做的伪代码：

```
byte * pointer = open(file.bmp);
pointer += number of bits to get to dib.
return pointer 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-11T17:02:56.983

用于`seekg`跳过 bmp 标头。我真的建议阅读有关文件 IO 的教程，例如[这里](http://www.cplusplus.com/doc/tutorial/files/)。

# android - 我可以从 android 应用程序登录到 drupal，但我无法保持身份验证

> ID：11437602
> 
> 赞同：1
> 
> 时间：2012-07-11T16:54:27.183
> 
> 标签：android, drupal, httpclient

我在我的 Android 应用程序中使用带有服务的 drupal，当我使用用户名和密码连接到 REST 服务器时，我得到 200 的响应，这没问题，但是当我尝试创建节点时，它返回 401 错误。

我正在使用 HttpClient，我应该关心设置 cookie 还是有什么问题？登录并保持创建节点或用户的身份验证的正确方法是什么......等等。

有什么建议或想法吗？

```
 HttpResponse response = null;
HttpPost postRequest = null;
HttpClient httpClient = new DefaultHttpClient();
  try {

    postRequest = new HttpPost(
        "http://192.168.1.104/?q=rest/user/login");

    String  loginString=String.format("{\"username\":\"%s\",\"password\":\"%s\"}", "user","pass");
    Log.d("expression",loginString);
    StringEntity input = new StringEntity(nodeText  );

    input.setContentType("application/json");
    postRequest.setEntity(input);

response = httpClient.execute(postRequest);

    if (response.getStatusLine().getStatusCode() != 201) {

    }

    BufferedReader br = new BufferedReader(
                    new InputStreamReader((response.getEntity().getContent())));

    String output;
    System.out.println("Output from Server .... \n");
    while ((output = br.readLine()) != null) {

    }

  } catch (MalformedURLException e) {

    e.printStackTrace();

  } catch (IOException e) {

    e.printStackTrace();

  }

// here is the code to create a node  

  try {

    HttpPost postRequest2 = new HttpPost(
        "http://192.168.1.104/?q=rest/node");

    String nodeText= String.format( "{\"type\":\"story\",\"title\":\" %s \",\"body\":\" %s \"}", title,"");
   Log.d("expression",nodeText);
    StringEntity input = new StringEntity(nodeText  );

    input.setContentType("application/json");

    postRequest2.setEntity(input);

    response = httpClient.execute(postRequest2);

    if (response.getStatusLine().getStatusCode() != 201) {

    }
    System.out.println(response.getStatusLine().getStatusCode());

    BufferedReader br = new BufferedReader(
                    new InputStreamReader((response.getEntity().getContent())));

    String output;
    System.out.println("Output from Server .... \n");
    while ((output = br.readLine()) != null) {
        System.out.println(output);
    }

    httpClient.getConnectionManager().shutdown();

  } catch (MalformedURLException e) {

    e.printStackTrace();

  } catch (IOException e) {

    e.printStackTrace();

  }
} 
```

**编辑解决方案：** 最后，问题出在drupal方面，您应该在设置服务器时检查会话身份验证，在我的情况下是休息:)所以，现在我相信，httpClient会自动管理cookies。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-11T17:33:44.937

您似乎需要 cookie。

您通常会从登录方法中获取 cookie 作为响应。得到它，把它储存起来，然后把它拉出来，贴在`HttpPost`ala 的标题中：

```
HttpPost post = new HttpPost(uri);
SharedPreferences settings = context.getSharedPreferences(LOGIN_PREFS, 0);
String cookie = settings.getString(kCOOKIE, "");
post.addHeader("Cookie", cookie); 
```

# apache2 - Apache 停止响应 SSL + mod_jk

> ID：11437604
> 
> 赞同：1
> 
> 时间：2012-07-11T16:54:31.600
> 
> 标签：apache2, windows-server-2003, mod-jk, ajp, mod-ssl

在负载下，我们的 Apache2 实例有时似乎停止响应 SSL 请求。

我们有一个运行 Apache 2.2 w/OpenSSL 的 Windows Server 2003。它配置了 mod_jk 连接器版本 1.2.32，它平衡了 Tomcat 6 的两个实例。

Apache2 被配置为接受 :80 上的请求并使用 mod_rewrite 重定向到 :443，效果很好。（这在以后很重要）

我们有一个外部进程，它经常调用通过 mod_jk 映射的 URL。该进程配置不当，最初将其请求发送到 http (:80)，然后被重定向到 https (:443)，导致服务器受到双重打击。这意味着 access.log 将显示两个请求，一个具有 302 状态（从 :80 请求重定向），然后是 200 状态（来自 :443 请求）。

最终，access.log 不再显示随后的“status 200”消息，仅显示 302（重定向）。通过浏览器访问 https URL 也确认 Apache 没有响应。我们的 Monitis 警报说：“严重 - 无法建立 SSL 连接”。此外，我们的 mod_jk.log 在失败时停止记录请求。需要注意的是，Apache 在 ssl 请求失败的同时继续回复所有 http 请求并发送 302 重定向。

通过http直接访问两个tomcat实例中的每一个都成功，没有任何问题。

我们重新启动了 Apache2 服务，它立即解决了问题，一切又开始正常运行。

这个谜题中有很多活动的部分，我不确定罪魁祸首。我怀疑 SSL 可能存在问题，尽管当时我没有通过 SSL 测试非 tomcat URL。它也可能与 mod_jk 相关。谢谢阅读。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-15T01:16:10.377

I strongly recommend that you ditch mod_jk in favour of ~~mod_ajp_proxy~~mod_proxy_ajp. It does exactly the same thing, but it is miles simpler to configure; it is built into Apache rather than being a by-product of the Tomcat project; it can be used in conjunction with mod_proxy_balancer when you get the need for it; and it has been working flawlessly for me, including SSL, for several months in production.

# java - 解析 XML 文件以获取所有命名空间信息

> ID：11437606
> 
> 赞同：4
> 
> 时间：2012-07-11T16:54:47.243
> 
> 标签：java, xml, xslt, xpath, xquery

我希望能够从给定的 XML 文件中获取所有命名空间信息。

例如，如果输入 XML 文件类似于：

```
<ns1:create xmlns:ns1="http://predic8.com/wsdl/material/ArticleService/1/">
   <ns1:article xmlns:ns1="xmlns:ns1='http://predic8.com/material/1/">
      <ns1:id>1</ns1:id>
      <description>bar</description>
      <name>foo</name>
      <ns1:price>
         <amount>00.00</amount>
         <currency>USD</currency>
      </ns1:price>
      <ns1:price>
         <amount>11.11</amount>
         <currency>AUD</currency>
      </ns1:price>
   </ns1:article>
   <ns1:article xmlns:ns1="xmlns:ns1='http://predic8.com/material/1/">
      <ns1:id>2</ns1:id>
      <description>some name</description>
      <name>some description</name>
      <ns1:price>
         <amount>00.01</amount>
         <currency>USD</currency>
      </ns1:price>
   </ns1:article>
</ns1:create> 
```

我希望输出看起来像这样（在这种情况下以逗号分隔）：

```
create, ns1, http://predic8.com/wsdl/material/ArticleService/1/
article, ns1, http://predic8.com/material/1/
price, ns1, http://predic8.com/material/1/
id, ns1, http://predic8.com/material/1/ 
```

重要笔记：

重要的是，我们还要考虑在特定命名空间内定义的子节点，但其定义可能在更高节点上定义。比如我们还是想取节点`ns1:id`，这里我们需要回溯到父节点`ns1:article`发现namespace url是`xmlns:ns1='http://predic8.com/material/1/`

我正在用 Java 实现，所以我不介意基于 Java 的解决方案，甚至基于 XSLT 的解决方案似乎都合适。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-11T21:33:13.133

这可以通过一个 XPath 2.0 表达式来完成：

```
distinct-values(//*[name()!=local-name()]/
   concat(local-name(), ', ', substring-before(name(), ':'), ', ', namespace-uri()) 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-07-11T17:15:12.640

我会使用内置的[XMLStreamReader](http://docs.oracle.com/javase/6/docs/api/javax/xml/stream/XMLStreamReader.html)，它是流式 XML 解析器实现的接口（从`XMLInputFactory`类中获取）。它的`getName`方法返回一个 QName，它应该为您提供所需的一切。

类似于以下内容：

```
File file = new File("samples/sample11.xml");
XMLInputFactory inputFactory = XMLInputFactory.newInstance();
XMLStreamReader reader = inputFactory.createXMLStreamReader(new FileInputStream(file));
Set<String> namespaces = new HashSet<String>();
while (reader.hasNext()) {
      int evt = reader.next();
      if (evt == XMLStreamConstants.START_ELEMENT) {
        QName qName = reader.getName();
        if(qName != null){
            if(qName.getPrefix() != null && qName.getPrefix().compareTo("")!=0)
                namespaces.add(String.format("%s, %s, %s",
                    qName.getLocalPart(), qName.getPrefix(), qName.getNamespaceURI()));
        }
      }
}

for(String namespace : namespaces){
    System.out.println(namespace);              
} 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-07-12T04:18:38.497

**进一步开发了 Michael Kay 提出的 XPath 表达式**（实际上似乎是一种简化），也可以处理属于默认命名空间的无前缀元素名称：

```
distinct-values(//*[namespace-uri()]
                    /concat(local-name(),
                            ', ',
                            substring-before(name(), ':'),
                            ', ',
                            namespace-uri(),
                            '&#xA;'
                            )
                ) 
```

**当此 XPath 表达式在以下文档**（提供的但添加了一个位于默认命名空间中的元素）上进行评估时：

```
<ns1:create xmlns:ns1="http://predic8.com/wsdl/material/ArticleService/1/">
    <ns1:article xmlns:ns1="xmlns:ns1='http://predic8.com/material/1/">
        <ns1:id>1</ns1:id>
        <description>bar</description>
        <name>foo</name>
        <ns1:price>
            <amount>00.00</amount>
            <currency>USD</currency>
        </ns1:price>
        <ns1:price>
            <amount>11.11</amount>
            <currency>AUD</currency>
        </ns1:price>
    </ns1:article>
    <ns1:article xmlns:ns1="xmlns:ns1='http://predic8.com/material/1/">
        <ns1:id>2</ns1:id>
        <description>some name</description>
        <name>some description</name>
        <ns1:price>
            <amount>00.01</amount>
            <currency>USD</currency>
        </ns1:price>
        <quality xmlns="my:q">high</quality>
    </ns1:article>
</ns1:create> 
```

**产生了想要的正确结果**：

```
 create, ns1, http://predic8.com/wsdl/material/ArticleService/1/
 article, ns1, xmlns:ns1='http://predic8.com/material/1/
 id, ns1, xmlns:ns1='http://predic8.com/material/1/
 price, ns1, xmlns:ns1='http://predic8.com/material/1/
 quality, , my:q 
```

进一步的轻微改进是为属性名称生成命名空间数据：

```
distinct-values(//(*|@*)[namespace-uri()]
                    /concat(if(. intersect ../@*)
                              then '@'
                              else (),
                            local-name(),
                            ', ',
                            substring-before(name(), ':'),
                            ', ',
                            namespace-uri(),
                            '&#xA;'
                            )
                ) 
```

**当此 XPath 表达式在以下 XML 文档**（前一个（上面）`xml:lang`在其中一个元素上添加了一个属性）上进行评估时`article`：

```
<ns1:create xmlns:ns1="http://predic8.com/wsdl/material/ArticleService/1/">
    <ns1:article xml:lang="en-us" xmlns:ns1="xmlns:ns1='http://predic8.com/material/1/">
        <ns1:id>1</ns1:id>
        <description>bar</description>
        <name>foo</name>
        <ns1:price>
            <amount>00.00</amount>
            <currency>USD</currency>
        </ns1:price>
        <ns1:price>
            <amount>11.11</amount>
            <currency>AUD</currency>
        </ns1:price>
    </ns1:article>
    <ns1:article xmlns:ns1="xmlns:ns1='http://predic8.com/material/1/">
        <ns1:id>2</ns1:id>
        <description>some name</description>
        <name>some description</name>
        <ns1:price>
            <amount>00.01</amount>
            <currency>USD</currency>
        </ns1:price>
        <quality xmlns="my:q">high</quality>
    </ns1:article>
</ns1:create> 
```

**再次产生正确的结果：**

```
 create, ns1, http://predic8.com/wsdl/material/ArticleService/1/
 article, ns1, xmlns:ns1='http://predic8.com/material/1/
 @lang, xml, http://www.w3.org/XML/1998/namespace
 id, ns1, xmlns:ns1='http://predic8.com/material/1/
 price, ns1, xmlns:ns1='http://predic8.com/material/1/
 quality, , my:q 
```

# php - preg_match 输出数组并且没有内容

> ID：11437608
> 
> 赞同：0
> 
> 时间：2012-07-11T16:54:52.037
> 
> 标签：php, regex

我试图解析特定 div 标签内的信息，由于某种原因，它一直在输出数组而没有信息，我终生无法弄清楚。

这就是我所拥有的。

```
$html = file_get_html('http://finance.yahoo.com/q/hp?s=^DJI&a=05&b=4&c=2012&d=06&e=6&f=2012&g=d');
$i=0;
$classes = array('red', 'blue', 'yellow', 'green', 'black', 'purple', 'grey');
$ci = 0;
foreach ($html->find('.yfnc_datamodoutline1 .yfnc_tabledata1') as $element){

$symbols = $element->outertext;
$hp = '<div class="'.$classes[$ci].'">'.$symbols.'</div>';
$ci++;
if($ci == count($classes)) $ci = 0;
preg_match_all("'<div class=\"black\">([^<]*)</div>'si", $hp, $match);

print_r($hp);
//print_r($match); 
```

}

现在，如果我打印出 $hp 显然有带有 div 标签的信息，我试图从中获取信息，输出看起来像这样。

```
<div class="red">Jul 6, 2012</div>
<div class="blue">12,889.40</div>
<div class="yellow">12,889.40</div>
<div class="green">12,702.99</div>
<div class="black">12,772.47</div>
<div class="purple">967,600</div>
<div class="grey">12,772.47</div>
<div class="red">Jul 5, 2012</div>
<div class="blue">12,941.85</div>
<div class="yellow">12,961.30</div>
<div class="green">12,852.24</div>
<div class="black">12,896.67</div>
<div class="purple">978,000</div>
<div class="grey">12,896.67</div> 
```

black 是我试图获取的 div，但是当我尝试在 preg_match 函数中打印 $match 时，我不断得到看起来像这样的数组

```
Array ( [0] => Array ( ) [1] => Array ( ) ) Array ( [0] => Array ( ) [1] => Array ( ) ) Array ( [0] => Array ( ) [1] => Array ( ) ) Array ( [0] => Array ( ) [1] => Array ( ) ) Array ( [0] => Array ( ) [1] => Array ( ) ) Array ( [0] => Array ( ) [1] => Array ( ) ) Array ( [0] => Array ( ) [1] => Array ( ) ) 
```

非常感谢任何帮助，您也可以在[此处运行代码并测试它，](http://www.coderun.com/ide/?w=j0msOAc8bUiViWT_o-oj8g)只需打开索引文件即可。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-11T17:09:55.197

您忘记了 / 之前的 si 并且您需要删除单引号，因为它们被视为表达式的一部分。

```
preg_match_all("<div class=\"black\">([^<]*)</div>/si", $hp, $match); 
```

**编辑：试试这个。**

此外，您可能会发现此站点很有用：http: [//gskinner.com/RegExr/](http://gskinner.com/RegExr/)

```
 $html = '<div class="red">Jul 6, 2012</div>
<div class="blue">12,889.40</div>
<div class="yellow">12,889.40</div>
<div class="green">12,702.99</div>
<div class="black">12,772.47</div>
<div class="purple">967,600</div>
<div class="grey">12,772.47</div>
<div class="red">Jul 5, 2012</div>
<div class="blue">12,941.85</div>
<div class="yellow">12,961.30</div>
<div class="green">12,852.24</div>
<div class="black">12,896.67</div>
<div class="purple">978,000</div>
<div class="grey">12,896.67</div>';

  preg_match_all("/<div class=\"black\">([^<]*)<\/div>/i", $html, $matches);
  echo "<pre>";
  print_r($matches[1]);

?> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-11T17:11:05.657

我会写它：

```
preg_match_all("/<div class=\"black\">(.*)<\/div>/si", $hp, $match); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-11T18:44:48.010

我不确定您到底要做什么，但我认为您根本不需要在这里使用正则表达式。在您循环的数据中，您已经知道您是否有 class `black`。

在你的循环中你不能做

```
if ($classes[$ci] === 'black') {
    echo $symbols;
}
```

您也可以轻松地将其存储在数组中。

# android - 无法通过 android 中的按钮启动活动，我是否在这里正确地重用了 AnymoteClientService？

> ID：11437619
> 
> 赞同：0
> 
> 时间：2012-07-11T16:55:15.910
> 
> 标签：android, google-tv

我收到以下错误：

07-11 17:33:27.250: E/AndroidRuntime(1675): java.lang.RuntimeException: 无法启动活动 ComponentInfo{uk.co.myapp.gtvremote/uk.co.myapp.gtvremote.SlidepuzzleActivity}: java.lang 。空指针异常

不知道我做错了什么，欢迎任何建议和/或评论。

此外，您可能会从我尝试重用 AnymoteClientService 的代码中注意到。我假设我在这里做的方式是正确的，是吗？：

清单摘录：

```
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
    package="uk.co.myapp.gtvremote"
    android:versionCode="1"
    android:versionName="1.0" >

    <uses-sdk
        android:minSdkVersion="8"
        android:targetSdkVersion="15" />

    <application
        android:icon="@drawable/ic_launcher"
        android:label="@string/app_name"
        android:theme="@style/AppTheme" >
        <service android:name="com.example.google.tv.anymotelibrary.client.AnymoteClientService" >
        </service>

        <activity
            android:name="com.example.google.tv.anymotelibrary.connection.PairingActivity"
            android:configChanges="orientation"
            android:label="Pairing with TV"
            android:launchMode="singleTop" />
        <activity
            android:name=".MainActivity"
            android:label="@string/title_activity_main" >
            <intent-filter>
                <action android:name="android.intent.action.MAIN" />
                <category android:name="android.intent.category.LAUNCHER" />
            </intent-filter>
        </activity>
        <activity
            android:name=".SlidepuzzleActivity"
            android:label="@string/title_activity_slidepuzzle" >
            <intent-filter>
                <action android:name="android.intent.action.MAIN" />
                <category android:name="android.intent.category.LAUNCHER" />
            </intent-filter>
        </activity>
    </application>

    <uses-permission android:name="android.permission.INTERNET" />
    <uses-permission android:name="android.permission.ACCESS_WIFI_STATE" />
    <uses-permission android:name="android.permission.ACCESS_NETWORK_STATE" />

    <uses-feature
        android:name="android.hardware.touchscreen"
        android:required="true" />
    <uses-feature
        android:name="android.hardware.wifi"
        android:required="true" />

</manifest> 
```

MainActivity.java 摘录：

```
Button testButton = (Button) findViewById(R.id.testButton);

...

testButton.setOnClickListener(new OnClickListener() {

            @Override
            public void onClick(View v) {

                Intent myIntent = new Intent(MainActivity.this, SlidepuzzleActivity.class);
//THIS IS WHERE I THINK THE EXCEPTION IS BEING THROWN
                MainActivity.this.startActivity(myIntent);
            }
        }); 
```

SlidepuzzleActivity.java：

```
public class SlidepuzzleActivity extends Activity implements ClientListener{

    private AnymoteClientService mAnymoteClientService;
    private Context mContext;

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.slidepuzzle);

        ImageButton piece1x1 = (ImageButton) findViewById(R.id.piece1x1);
        ImageButton piece1x2 = (ImageButton) findViewById(R.id.piece1x2);
        ImageButton piece1x3 = (ImageButton) findViewById(R.id.piece1x3);
        ImageButton piece2x1 = (ImageButton) findViewById(R.id.piece2x1);
        ImageButton piece2x2 = (ImageButton) findViewById(R.id.piece2x2);
        ImageButton piece2x3 = (ImageButton) findViewById(R.id.piece2x3);
        ImageButton piece3x1 = (ImageButton) findViewById(R.id.piece3x1);
        ImageButton piece3x2 = (ImageButton) findViewById(R.id.piece3x2);
        ImageButton piece3x3 = (ImageButton) findViewById(R.id.piece3x3);

        Intent intent = new Intent(mContext, AnymoteClientService.class);
        bindService(intent, mConnection, Context.BIND_AUTO_CREATE);

    }

    private ServiceConnection mConnection = new ServiceConnection() {

        /*
         * ServiceConnection listener methods.
         */
        @Override
        public void onServiceConnected(ComponentName name, IBinder service) {

            mAnymoteClientService = ((AnymoteClientService.AnymoteClientServiceBinder) service)
                    .getService();
            mAnymoteClientService.attachClientListener(SlidepuzzleActivity.this);
        }

        @Override
        public void onServiceDisconnected(ComponentName name) {
            mAnymoteClientService.detachClientListener(SlidepuzzleActivity.this);
            mAnymoteClientService = null;   
        }

    };

    @Override
    public boolean onCreateOptionsMenu(Menu menu) {
        getMenuInflater().inflate(R.menu.slidepuzzle, menu);
        return true;
    }

    @Override
    public void onConnected(AnymoteSender anymoteSender) {
        // TODO Auto-generated method stub

    }

    @Override
    public void onDisconnected() {
        // TODO Auto-generated method stub

    }

    @Override
    public void onConnectionError() {
        // TODO Auto-generated method stub

    }

    @Override
    protected void onDestroy() {
        if (mAnymoteClientService != null) {
            mAnymoteClientService.detachClientListener(this);
        }
        unbindService(mConnection);
        super.onDestroy();
    }

} 
```

干杯

请求的堆栈跟踪：

```
07-11 17:33:27.250: E/AndroidRuntime(1675): FATAL EXCEPTION: main
07-11 17:33:27.250: E/AndroidRuntime(1675): java.lang.RuntimeException: Unable to start activity ComponentInfo{uk.co.myapp.gtvremote/uk.co.myapp.gtvremote.SlidepuzzleActivity}: java.lang.NullPointerException
07-11 17:33:27.250: E/AndroidRuntime(1675):     at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1956)
07-11 17:33:27.250: E/AndroidRuntime(1675):     at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:1981)
07-11 17:33:27.250: E/AndroidRuntime(1675):     at android.app.ActivityThread.access$600(ActivityThread.java:123)
07-11 17:33:27.250: E/AndroidRuntime(1675):     at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1147)
07-11 17:33:27.250: E/AndroidRuntime(1675):     at android.os.Handler.dispatchMessage(Handler.java:99)
07-11 17:33:27.250: E/AndroidRuntime(1675):     at android.os.Looper.loop(Looper.java:137)
07-11 17:33:27.250: E/AndroidRuntime(1675):     at android.app.ActivityThread.main(ActivityThread.java:4424)
07-11 17:33:27.250: E/AndroidRuntime(1675):     at java.lang.reflect.Method.invokeNative(Native Method)
07-11 17:33:27.250: E/AndroidRuntime(1675):     at java.lang.reflect.Method.invoke(Method.java:511)
07-11 17:33:27.250: E/AndroidRuntime(1675):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:784)
07-11 17:33:27.250: E/AndroidRuntime(1675):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:551)
07-11 17:33:27.250: E/AndroidRuntime(1675):     at dalvik.system.NativeStart.main(Native Method)
07-11 17:33:27.250: E/AndroidRuntime(1675): Caused by: java.lang.NullPointerException
07-11 17:33:27.250: E/AndroidRuntime(1675):     at android.content.ComponentName.<init>(ComponentName.java:75)
07-11 17:33:27.250: E/AndroidRuntime(1675):     at android.content.Intent.<init>(Intent.java:3175)
07-11 17:33:27.250: E/AndroidRuntime(1675):     at uk.co.myapp.gtvremote.SlidepuzzleActivity.onCreate(SlidepuzzleActivity.java:39)
07-11 17:33:27.250: E/AndroidRuntime(1675):     at android.app.Activity.performCreate(Activity.java:4465)
07-11 17:33:27.250: E/AndroidRuntime(1675):     at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1049)
07-11 17:33:27.250: E/AndroidRuntime(1675):     at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1920)
07-11 17:33:27.250: E/AndroidRuntime(1675):     ... 11 more 
```

我在 SlidepuzzleActivity.java 摘录中标记了抛出异常的地方 //这是我认为抛出异常的地方

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-11T17:10:52.913

据我所见， mContext 为空；并且在实例化 Intent 时可能会导致此异常。

# javascript - 在 HTML 4.0 过渡 jQuery 中的 $(document).height() 在 FireFox 和 Chrome 中返回不正确的值，但在 IE 中没有

> ID：11437620
> 
> 赞同：2
> 
> 时间：2012-07-11T16:55:18.480
> 
> 标签：javascript, jquery, html

我无法切换 DOCTYPE，有没有办法在 FF 和 IE 中解决这个问题？

我努力了

`$(document).height()`, `$(window).height()`, 和`$("body").height()`, 这是文档类型：`<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN">`

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-11T17:04:05.083

您可能需要以下 CSS：

```
html, body
{
  height: 100%;
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-11T16:57:00.890

尝试这个：

```
$(window).height(); 
```

文档高度与窗口高度不同

# html - 在页面底部对齐整个表格

> ID：11437622
> 
> 赞同：3
> 
> 时间：2012-07-11T16:55:20.207
> 
> 标签：html, css

我使用以下编码来对齐底部的表格，但它无法正常工作

```
<!DOCTYPE html>
  <html>
    <head>
      <title></title>
    </head>

    <body bgcolor="black">
      <div class="footer">
        <table border="1" bottom="0px">
          <tr>
            <td width="600px" align="right">
              <input type="image"  align="center" id="verify1" src="proceed1.png" disabled="disabled"  width="90" height="90""/>
            </td>
            <td width="500px" align="right">
              <label id = "l2"  style = "color:white;font:normal 20px chalkdust;">NEXT QUESTION</label>
              <div id="sample4" style="float: right;">
            </td>
            <td>
              <input type="image" id="next" src="arrow.png"  disabled="disabled" name="image2" width="80" height="80">
            </td>
          </tr>
        </table>
      </div>
  </body>
</html> 
```

任何人都可以帮助它在页面底部对齐。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-11T17:18:47.443

在 CSS 中使用底部对齐。这将仅对齐 div 而不是表格。您的表格将对齐，因为它在 div 内。

```
position: absolute;
bottom:0px; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-11T16:59:47.817

您应该为页脚 div 分配绝对位置或固定位置和底部 0 和左侧 0 以及宽度和高度

[看到这里 jsfiddle](http://jsfiddle.net/ZfSQD/)

或谷歌粘性页脚，以防上述内容不能满足您的需求

# c# - 为什么这个三元语句被评估为 NULL？

> ID：11437625
> 
> 赞同：1
> 
> 时间：2012-07-11T16:55:24.577
> 
> 标签：c#, linq, ternary-operator

以下代码中的第一个三元语句返回“null”。myID 返回为空。但是，如果三元语句工作正常，并且 a.someID 为空，则 myID 应返回为 -1。myID 是一个可为空的 int 字段。你知道为什么我没有得到-1吗？谢谢。

```
public List<myView> GetRecords()
{
    myEntities entities = new myEntities();

    var myValue = (from a in entities.myEntitiesA
                   join b in entities.myEntitiesB on a.myID equals b.myID into myEntitesC
                   from c in myEntitesC.DefaultIfEmpty()
                   select new myView
                   {
                       myID = a.someID == null ? -1 : a.someID,
                       myName = a.myName,
                       myAlternateID = c.myID == null ? -1 : c.myID,
                       myAlternateName = c.myName == null ? "" : c.myName,
                   }).Distinct().OrderBy(b => b.myName).ToList();

    return (myValue);
} 
```

编辑 - 为了测试，我已经摆脱了 DefaultIfEmpty() ，但我的结果是一样的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-11T17:00:13.763

我认为您可能想要使用 null 无合并运算符，它是`??`

```
// y = x, unless x is null, in which case y = -1.
        int y = x ?? -1; 
```

从[?? 操作员文档](http://msdn.microsoft.com/en-us/library/ms173224.aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-11T17:10:43.003

```
 from c in myEntitesC.DefaultIfEmpty()
  select new myView
  {
    ...
    myAlternateID = c.myID == null ? -1 : c.myID, 
```

如果 c 为空怎么办？

```
 myAlternateID = (c == null || c.myID == null) ? -1 : c.myID, 
```

* * *

Linq 是一种针对许多不同实现使用通用语法声明查询的方法。您的特定查询实现可能不是 LinqToObjects（在 static class 中实现`System.Linq.Enumerable`）。要获得最佳答案，最好指定哪个系统正在执行您的查询。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-11T17:39:28.297

大概 DefaultIfEmpty() 例程被触发，因此您的三元运算符没有被执行，而是正在创建一个新的 myView 。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-30T02:12:39.057

尽管所有其他答案似乎都有效，但它们都不适合我。由于我是从 JsonResult 控制器方法调用此 GetRecords() 方法，因此我最终在 JsonResult 上执行了额外的逻辑，第二次检查 NULL。当然，这是一个多余的检查，所以它并不理想，但它确实有效。

# silverlight - 使用 MVVM 将 Silverlight 中的文本块绑定到依赖属性属性

> ID：11437629
> 
> 赞同：0
> 
> 时间：2012-07-11T16:55:47.213
> 
> 标签：silverlight, xaml, data-binding, binding, dependency-properties

我有一个在运行时填充的自定义对象类型依赖属性。它已正确更新，并且正确的信息存储在此对象中。

但是，当我尝试将此对象的属性绑定到文本块时，没有文本出现（尽管它肯定有数据）。

所以，假设对象类型如下：

```
Public class CustomObject{
[Key]
 public int Id { get; set; }
 public string Name { get; set; }
 } 
```

这个对象肯定是被填充的，我已经用断点验证了这一点。

我创建了这个对象类型的依赖属性，它肯定可以正常工作——这也已经过验证。让我们调用依赖属性 SelectedCustomObject。

我将此依赖属性绑定到我的视图：

```
 <TextBlock  Text="{Binding SelectedCustomObject.Name, Mode=TwoWay}" FontSize="10" VerticalAlignment="Center" HorizontalAlignment="Center"/> 
```

DataContext 是在我的用户控件中设置的，这绝对有效，因为我已经对同一视图模型中的其他依赖项属性进行了多次绑定，并且它们运行良好。

因此，通过消除过程，我只能假设我的 XAML 语法是关闭的，并且您不能像这样绑定到我的填充和工作依赖属性。

任何人都可以为我解释一下吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-12T10:18:13.047

The answer to my question turned out to be that Silverlight was maintaining a separate cache and thus my new dependency property was, for whatever reason, not loading.

I deleted and regenerated my .XAP file, nothing.

I cleared my IE cache, nothing.

I opened Microsoft Silverlight from my start menu, went to the Application Storage tab and deleted all - then when I refreshed, all of my work appeared.

Happy days.

Hope this helps someone else :).

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-11T17:02:59.017

您的值很可能`Name`是在您的视图绑定到属性后设置的。正如@Erno 指出的那样，您的视图不会收到更改通知。实施`INotifyPropertyChanged`将允许您`CustomObject`通知您的视图该属性已更改。

下面是实现的样子：

```
public class CustomObject : INotifyPropertyChanged
{
    [Key]
    public int Id { get; set; }

    private string _name;
    public string Name
    {
        get { return _name; }
        set
        {
            _name = value;
            NotifyPropertyChanged("Name");
        }
    }

    public event PropertyChangedEventHandler PropertyChanged;

    protected void NotifyPropertyChanged(string info)
    {
        if (PropertyChanged != null)
        {
            PropertyChanged(this, new PropertyChangedEventArgs(info));
        }
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-11T16:59:40.513

CustomClass 需要实现 INotifyPropertyChanged 以便 UI 将收到更改通知

# configuration - 如何将自定义配置添加到我的 Yii 扩展

> ID：11437631
> 
> 赞同：1
> 
> 时间：2012-07-11T16:55:54.357
> 
> 标签：configuration, yii, yii-extensions

我正在尝试在 Yii 中构建自定义扩展，但无法访问自定义配置。

假设我在 main.php 中有以下内容：

```
'my_extension'=>array(
    'class'=>'ext.my_extension.my_extension'
    'custom_config'=>array(
        'first_option'=>array(
            'active'=>true,
            'custom_username'=>'username',
            'custom_password'=>'password',
        ),
    ),
), 
```

如何访问“活动”、“自定义用户名”和“自定义密码”？

在我扩展 CFormModel 的扩展中，我尝试了：

```
Yii::app()->my_extension->custom_config['first_option']['custom_username']; 
```

但我得到了错误：

```
Property "my_extension.custom_config" is not defined. 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-07-11T18:11:19.140

这是错误的原因是因为您试图访问 Yii::app() 的属性，该属性未声明，在数组中定义..

入口脚本（index.php）通常像这样创建 Yii 对象。

```
require_once($yii);
Yii::createWebApplication($config)->run(); 
```

$config 变量是你的 main.config 文件数组，所以即使你在数组中添加一个索引，它在 Yii::app() 的属性中不匹配，它也不会创建那个..

为了设置自定义配置，Yii 为我们提供了`params`.. 可以用作`Yii::app()->params['paramName']`

所以在你的情况下，在 config.main 的末尾，'params'索引会像..

```
'params'=>array(
    'my_extension'=>array(
        'class'=>'ext.my_extension.my_extension',
        'custom_config'=>array(
            'first_option'=>array(
                'active'=>true,
                'custom_username'=>'username',
                'custom_password'=>'password',
            ),
        ),
    ),
    //...remaining params
), 
```

用法将是

```
Yii::app()->params['my_extension']['custom_config']['first_option']['custom_username']; 
```

**编辑：**

在某些情况下，您需要单独配置 yr 扩展名，或者像 facebook 或 postmark 之类的东西，可能是因为在不同的环境中具有不同的值，并且想要将该文件放入`.gitignore`，或者可能是因为您想释放 yr 扩展名以打开-source，并希望人们给出明确的方式来拥有自己的配置..

因此，在这些情况下，解决方案是在 yr ext 或任何地方创建一个文件，在其中创建一个包含配置值的数组，将该文件包含`index.php`在 yr中`config/main`，然后放入该内容。

在你的情况下：

```
//in index.php
require_once(dirname(__FILE__).'/protected/ext/yr_ext/ext_config.php');

//in ext/yr_ext/ext_config.php
<?php
class ExtConfiguration {
public static function fetchConfigArray() {
        return array(
        'class'=>'ext.my_extension.my_extension',
                'custom_config'=>array(
                    'first_option'=>array(
                        'active'=>true,
                        'custom_username'=>'username',
                        'custom_password'=>'password',
                    ),
                ),
            );
    }
}
?>

//in config/main.php
//on top before array start
$ext_config = ExtConfiguration::fetchConfigArray();

//in params
'params'=>array(
    'my_extension'=>$ext_config,
),
//...remaining params 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-11T17:51:24.883

通过您分享给我们的配置片段，您提到您必须在主类中定义 public 属性`$custom_config`。

并且您只需在扩展程序中使用 like`$this->custom_config`

# c# - 当前上下文中不存在名称“sb”-.net 间歇性错误未从 c# 接收

> ID：11437635
> 
> 赞同：1
> 
> 时间：2012-07-11T16:56:04.577
> 
> 标签：c#, .net, compiler-construction

我有一个 .net 文件，它使用 ac# 来处理一些表单（发布）信息，剖析它，进行计算并创建一个字符串以在屏幕上打印，然后发送电子邮件。

我收到以下错误，但是我只在不同的时间收到它。该页面将工作一个小时（或其他随机时间），然后在一段时间内无法工作。

*从我的 .aspx 文件*

**编译器错误消息：CS0103：当前上下文中不存在名称“sb”**

```
Line 86:        <% Response.Write(sb); %> 
```

> **这是代码布局。** 我包括在内，即使我认为代码没有问题，因为它有时有效，有时无效。就好像某事只是大脑出了问题。我一直在寻找要删除的文件，但找不到任何东西。这是我第一次尝试使用 c#。我们在我的工作场所使用它，并且我已经看过很多代码，但没有尝试自己使用它。

*grade_the_quiz.aspx 的开头*

```
<%@ Page Language="C#" autoeventwireup="true" CodeFile="automail.aspx.cs" inherits="formsucker" %>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head runat="server"> 
```

结束头/开始站点布局（为简单起见已删除）

```
<div id="contentleft">
<h1>How do you Compare?</h1>
<p>Compare yourself to your competition - how do you measure up against the best practices benchmark of the most successful Senior Living Caregivers in America?*</P>
    <form id="form1" runat="server">
    <div id="grade">        
        <% Response.Write(sb); %>
</div>         
</form>
</div> 
```

（等，结束 html，#EOF 为简单起见删除）

*automail.aspx.cs 的开头*

```
using System;
using System.Data;
using System.Configuration;
using System.Collections;
using System.Web;
using System.Web.Security;
using System.IO;
using System.Web.UI;
using System.Web.UI.WebControls;
using System.Web.UI.WebControls.WebParts;
using System.Web.UI.HtmlControls;
using System.Net.Mail;
using System.Net;
using System.Text;

public partial class formsucker : System.Web.UI.Page
{

    public void Page_Init(object sender, EventArgs e)
    {
            string reTake = "", answerScore = "", pleaseWork = "", firstname = "", email = "";
            int noAnswer = 0, testVal = 0;

        String sdData = Request["sd"];

        string[] sdValuesSplit = sdData.Split('~');
        foreach (string postValues in sdValuesSplit)
        {
                if (postValues.Contains("FirstName"))
                {
                    firstname = postValues.Split('=')[1];

                }
                if (postValues.Contains("EMail"))
                {
                    email = postValues.Split('=')[1];

                }

                }

        StringBuilder sb = new StringBuilder();

        sb.Append("<p>Below are your results to the quiz " + firstname + ", and we will email them to " + email + " right away!</p>");

           switch (Request["CUSTOM_FORM_FIELD_11111"])
           {
               case "Yes":
                   sb.Append("<p><b>Do you have a system to track your notes, history and activity?</b></p><p><li><i>YES</i></p><p><li> Congratulations!  You are ahead of many!  You understand the value in capturing your prospects/clients critical information.  Capturing information about their history, notes and activity allows information to be shared amongst your team.  You are utilizing a power piece of the puzzle when it comes to keeping up to date with your prospects/clients</li></p>");
                   testVal = testVal + 5;
                   break;
               case "No":
                   sb.Append("<p><b>Do you have a system to track your notes, history and activity?</b></p><p><li><i>NO</i><ul><li> Consider how much time and money it cost to find new leads -- not keeping track of this information can lead to your prospects or clients falling through the cracks.  Marketing to your prospect/client does not work if you don't know what the last activity </li></p>");
                   break;
               default:
                   sb.Append("<p><b>Do you have a system to track your notes, history and activity?</b></p><p><li><i>You Didn\'t Answer the Question</i></li></p>");
                   noAnswer = noAnswer + 1;
                   break;
           } 
```

*附加到 sb 的更多 Switch 语句（**删除了大约 20 个 switch 语句**.. 它正在对测验评分，然后返回不同的语句并将它们附加到 sb。*

```
 StreamWriter sw = new StreamWriter(@"C:\inetpub\websites\occupancyadvantage.com\mailTest.txt", true);
                        try
                        {

                            System.Net.Mail.MailMessage automail = new System.Net.Mail.MailMessage();
                            automail.Subject = "How Do You Compare Quiz Results";
                            automail.To.Add(email);
                            MailAddress address = new MailAddress("XXXXXXXREMOVED", "XXXXXXREMOVED");
                            automail.From = address;
                            automail.IsBodyHtml = true;
                            automail.Body = "<html><body><p>" + sb + "</p><p>XXXXXREMOVED</p>" +
                                "This email and any files transmitted with it are confidential and intended solely for the use of the individual or entity to whom they are addressed. If you have received this email in error please notify the system manager. This message contains confidential information and is intended only for the individual named. If you are not the named addressee you should not disseminate, distribute or copy this e-mail. Please notify the sender immediately by e-mail if you have received this e-mail by mistake and delete this e-mail from your system. If you are not the intended recipient you are notified that disclosing, copying, distributing or taking any action in reliance on the contents of this information is strictly prohibited." +
                                "<br /> XXXXXREMOVED Notifications | 2012</body></html>";
                            SmtpClient autosmtp = new SmtpClient("XXXXXREMOVED", 25);
                            NetworkCredential netCred = new NetworkCredential("XXXXXREMOVED", "XXXXXREMOVED");
                            autosmtp.Credentials = netCred;
                            autosmtp.Send(automail);

                            //SmtpMail.SmtpServer = "mail.XXXXXREMOVED.net";
                            //SmtpMail.Send(automail);

                            sw.WriteLine("Success:" + DateTime.Now.ToString());
                            sw.Close();
                            sw.Dispose();

                        }
                        catch (Exception x)
                        {
                            sw.WriteLine("Failure:" + DateTime.Now.ToString());
                            sw.WriteLine(x.ToString() + ":" + x.StackTrace.ToString());
                            sw.Close();
                            sw.Dispose();
                        }

        }
    } 
```

如果你已经走到这一步，我希望我已经提供了最重要的信息。我已经搜索了其中的 20 个左右，并发现了不同的发生方式，只是找不到我的解决方案。我已经在记事本 ++ 中创建了所有内容，所有内容的原始站点都在 VS 中。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-11T17:52:43.917

为方便起见，您始终可以声明一个类级别的字符串，让 Stringbuilder 保持原样，在将所有结果附加到对象之后，将 Stringbuilder 的值分配给类级别的变量。这样，您可以保持 Stringbuilder 不变，但允许访问在页面加载和 init 对象过期后保留的信息。

```
 public partial class formsucker : System.Web.UI.Page
{
    public String sbG = "";

    protected void Page_Init(object sender, EventArgs e)
    {
            StringBuilder sb = new StringBuilder(); 
            sb.Append("<p>" + allYourAppends + "</p>");
            sbG = sb.ToString();
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-11T17:04:46.603

“sb”的范围仅限于 Page_Init。将其移至 formsucker 类范围，您的错误将（应该）消失。

最有可能的是，在垃圾收集之前，aspx 正在访问 sb，垃圾收集发生在不同的时间，所以这可能是它间歇性的原因。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-11T17:12:41.337

当执行超出 Page_Init 时，您的 StringBuilder 对象将过期。在类中声明它，而不是在事件主体中声明它会起作用。

像这样：

```
 public partial class formsucker : System.Web.UI.Page
 {
     public StringBuilder sb = new StringBuilder();
     public void Page_Init(object sender, EventArgs e)
     {
        string reTake = "", answerScore = "", pleaseWork = "", firstname = "", email = "";
        int noAnswer = 0, testVal = 0;
        //blah blah...
     }
 } 
```

此外，第 86 行：<% Response.Write(sb); %> 应该是：<% Response.Write(sb.ToString()); %>

# javascript - 如何获得隐藏/取消隐藏按钮来发送发布请求？

> ID：11437637
> 
> 赞同：0
> 
> 时间：2012-07-11T16:56:17.447
> 
> 标签：javascript, jquery, html

我的代码允许通过单击按钮时隐藏/显示的输入来编辑字段。它工作正常，但它只在本地更改页面上的数据（没有更新我的数据库。这意味着当用户编辑他们的个人资料时，它保存在数据库中）。我知道如何使用 jquery 在不刷新的情况下提交表单，但我不明白如何将两者结合起来，以便有人可以编辑一个字段（就地），然后当他们点击完成时提交它而不刷新（如 facebook）。

问题是使用“编辑”按钮下方的代码（这只是一个锚点）变成“保存”按钮然后回到“编辑”。我以为我要提交字段，我需要按钮作为提交按钮吗？

这是我用来进行就地编辑的代码：

```
$('#editvalue').click(function(e){$('#storedvalue').hide();$('#altervalue').show();});
$('#savevalue').click(function(e){
   var showNew = $('#changevalue').val();
   $('#altervalue').hide();
   $('#storedvalue').show();
   $('#storedvalue span').text(showNew);
}); 
```

我从这里的[教程](http://net.tutsplus.com/tutorials/javascript-ajax/submit-a-form-without-page-refresh-using-jquery/)中学习了如何在不刷新的情况下提交表单。我不确定如何将它们组合起来以获得我想要的效果，但我不确定这是否是解决问题的正确方法。有没有办法获取`showNew`变量并将其作为帖子提交而无需用户单击提交按钮（可能在用户单击保存时触发）？

我对 jquery 和网络编程非常陌生，如果我没有正确解释这一点，我很抱歉。如果它有帮助，这里是与上面的 js 代码一起使用的 html：PHP jQuery 示例：

```
<div id="wrapper">
   <div id="container">
      <div id="storedvalue"><span>Hello</span> [<a href="javascript:void(0);" id="editvalue">edit</a>]</div>
      <div id="altervalue" style="display:none;"><input type="text" name="changevalue" id="changevalue" value="Hello"> [<a href="javascript:void(0);" id="savevalue">save</a>]</div>
   </div>
</div> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-11T17:10:27.320

如果我理解正确，只需按照[http://api.jquery.com/jQuery.post/](http://api.jquery.com/jQuery.post/)中的描述在 $('#savevalue').click(function(e){...})中发布 AJAX 帖子`函数。像这样的东西：

```
$('#editvalue').click(function(e){$('#storedvalue').hide();$('#altervalue').show();});
$('#savevalue').click(function(e){
    var showNew = $('#changevalue').val();
    $('#altervalue').hide();
    $.post("test.php", { val: showNew } );
    $('#storedvalue').show();
    $('#storedvalue span').text(showNew);
}); 
```

这会将单个字段发布到 test.php 页面。您也可以（并且应该）添加成功/失败回调，以查看一切是否按预期进行。

当然，这个值必须在 PHP 端进行处理。

[编辑：具有更通用代码的示例，包括http://jsfiddle.net/X8Rsg/4/](http://jsfiddle.net/X8Rsg/4/)处的 html 生成

# c# - 在消息循环中使用 Rx 而不是 BlockingCollection

> ID：11437639
> 
> 赞同：1
> 
> 时间：2012-07-11T16:56:30.623
> 
> 标签：c#, task-parallel-library, message-queue, system.reactive, blockingcollection

我有一个简单的消息传递框架，它围绕附加到多个“客户端”实例的“主机”的单个实例构建。每个实例通过向其推送消息来与另一个实例通信。然后，实例使用单独的任务按照接收消息的顺序处理它们自己的消息。

这是代码的简化版本：

```
interface IMessage
{
}

class Host
{
    ConcurrentBag<Client> _Clients = new ConcurrentBag<Client>();
    BlockingCollection<IMessage> _IncomingMessages = new BlockingCollection<IMessage>();

    public Host()
    {
        Task.Factory.StartNew(() =>
        {
            foreach (var message in _IncomingMessages.GetConsumingEnumerable())
            {
                ProcessIncomingMessage(message);
            }
        });
    }

    public void AddClient(Client client)
    {
        _Clients.Add(client);
    }

    private void ProcessIncomingMessage(IMessage message)
    {
        // consume the message and typically generate new messages
        // For now just echo the message back
        Broadcast(message);  
    }

    private void Broadcast(IMessage message)
    {
        foreach (var client in _Clients)
        {
            client.PushMessage(message);
        }
    }
}

class Client
{
    private Host _Host;
    private BlockingCollection<IMessage> _IncomingMessages = new BlockingCollection<IMessage>();

    public Client(Host host)
    {
        Task.Factory.StartNew(() =>
        {
            foreach (var message in _IncomingMessages.GetConsumingEnumerable())
            {
                ProcessIncomingMessage(message);
            }
        });

        _Host = host;
        _Host.AddClient(this);
    }

    public void PushMessage(IMessage message)
    {
        _IncomingMessages.Add(message);
    }

    private void ProcessIncomingMessage(IMessage message)
    {
        // interpret the message and update state
    }
} 
```

我的要求是每个处理它们的消息的实例都使用并行执行（如果可能的话），并且每条消息都按照每个班级一次收到一条的顺序进行处理。

生成仅从 GetConsumingEnumerable() 中提取的新任务是不是一个坏主意？

我觉得我可以使用响应式扩展和 IObserveable 来简化这一点，但我对使用 Rx 还是很陌生，并且不确定如何构建它来满足我的并行执行需求。

任何指导将不胜感激！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-11T21:26:42.720

`IObservable`通过使用 Rx（特别是）作为将消息传递到 的中介`Host`，然后将消息从 传递`Host`到所有客户端，您当然可以使您的生活变得更轻松。对代码的两个更改（您可以做一个或另一个，或两者都做）将传递一个`IObservable<IMessage>`to`Host`作为它的输入并让它产生一个`IObservable<IMessage>`, 并且类似地传递一个`IObservable<IMessage>`to `Client`。

据我所知，`Host`和`Client`不需要了解彼此（这很好）。如果必须主动管理客户端（例如启动它们），这将不起作用`Host`- 在这些情况下，需要更改以下代码以`Host`管理客户端订阅，这并不重要，但肯定会涉及请求订阅的客户端来自主机，而主机持有由此产生的`IDisposable`.

此外，以下内容通常不处理错误或取消订阅，可以轻松添加。它是一个与你的功能相当的骨架。

```
class Host
{
    private Subject<IMessage> _outbound;

    public Host(IObservable<IMessage> messages)
    {
        _outbound = new Subject<IMessage>();        
        messages.SubscribeOn(Scheduler.TaskPool).Subscribe(ProcessIncomingMessage);
    }

    private void ProcessIncomingMessage(IMessage message)
    {
        _outbound.OnNext(message); // just echo
    }

    public IObservable<IMessage> Messages { get { return _outbound.AsObservable(); } }
}

class Client
{
    public Client(IObservable<IMessage> messages)
    {
        messages.SubscribeOn(Scheduler.TaskPool).Subscribe(ProcessIncomingMessage);
    }

    private void ProcessIncomingMessage(IMessage message)
    {
        // interpret the message and update state
    }
} 
```

那么用法很简单：

```
var source = new Subject<long>();

var host = new Host(source);
var client1 = new Client(host.Messages);
var client2 = new Client(host.Messages);
var client3 = new Client(host.Messages);

source.OnNext(1); // assuming each of these is an IMessage
source.OnNext(2);
source.OnNext(3); 
```

当然，您可以使用`IObservable`任何源来驱动`Host`.

请注意，如果消息的处理是“长时间运行的”，您希望`Scheduler.NewThread`在`SubscribeOn`调用中使用。否则，每条消息当前都被添加到`Task Pool`要处理的消息中。

# powershell - 放入特定文件夹时执行批处理文件

> ID：11437640
> 
> 赞同：0
> 
> 时间：2012-07-11T16:56:31.917
> 
> 标签：powershell, batch-file, actionlistener

当我将批处理文件放入我的一台 Windows PC 的特定文件夹时，我需要执行它。

我们有 20 台 PC 分布在美国各地。我可以远程进入每台 PC 并在本地 PC 上执行批处理文件，但这需要很长时间。

我还可以非常快速地将文件传输到这些 PC 中。如果我可以将批处理文件放在可以解决我的问题的特定文件夹中后执行。

我过去听说过听众。PC 上的“某事”只是查看文件夹的内容。如果该文件夹中恰好存在一个文件，则侦听器将执行“某事”。

这里有一些伪代码可以帮助更好地理解：

```
\\Program watches the contents of C:\Folder1
If 
   file batchfile.bat exists in C:\Folder1
     then execute batchfile.bat and then delete batchfile.bat

Else
   continue watching C:\Folder1 for batchfile.bat 
```

我正在研究 SO，看起来 PowerShell 将成为我需要走的路。你们同意还是有更有效的解决方案？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-11T17:19:45.477

我很确定 powershell 不是您想要的。虽然我会推荐使用 powershell 代替批处理来处理您的有效负载，但它对于这些类型的计划任务来说并不理想。

相反，我会推荐两条路径：

*   如果您可以忍受延迟，则可以经常运行批处理或 powershell 脚本来检查给定文件夹，并运行它找到的任何内容。
*   如果您想要即时满足，Windows 服务是您的最佳选择，因为它会一直运行并且可以轻松地以这种方式处理侦听器。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-11T17:21:13.460

这是我的做法：

```
param([switch]$install)

$batchfile = "C:\Folder1\batchfile.bat"

if($install)
{
    invoke-expression ("schtasks -create -tn `"Job1`" -tr `"powershell -file '" + $myinvocation.mycommand.path + "'`" -sc DAILY -st 05:00 -rl HIGHEST -ru SYSTEM")
}
else
{
    if(test-path $batchfile)
    {
        cmd /c batchfile.bat
        remove-item $batchfile | out-null
    }
} 
```

Run the above script with the "-install" switch and it will create a scheduled task to run once a day at 5:00am. If you'd like it to run more often check the syntax for [schtasks](http://www.microsoft.com/resources/documentation/windows/xp/all/proddocs/en-us/schtasks.mspx?mfr=true) to change that.

# mysql - 用 0.58 替换 mysql 值 .58

> ID：11437647
> 
> 赞同：0
> 
> 时间：2012-07-11T16:56:47.683
> 
> 标签：mysql

`carat`字段包含像 .58(0.58) 这样的值。我需要获取 0.58 到 1.90 之间的所有记录。`0`如果值不存在并在 0.58 和 1.90 之间进行选择，我该如何填充？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-11T17:18:40.630

```
UPDATE mytable SET carat = carat + 0.0; 
```

你可以选择

```
SELECT * FROM mytable
WHERE (carat + 0.0) >= 0.58
AND (carat + 0.0) >= 1.90; 
```

或者

```
SELECT * FROM mytable
WHERE (carat + 0.0) BETWEEN 0.58 AND 1.90; 
```

自然，这将是全表扫描

您是否在查询中检查了其他列？？？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-11T17:21:03.230

> *也需要转换为浮动*

`cast`现场使用`carat`。

```
select 
    cast( carat as decimal ) carat
from
    my_table
where 
    cast( carat as decimal ) between 0.58 and 1.90
; 
```

# php - mysqli中的位标志使用fetch_field_direct是什么意思

> ID：11437650
> 
> 赞同：5
> 
> 时间：2012-07-11T16:57:06.287
> 
> 标签：php, sql, database, mysqli

使用 mysqli，我可以像这样获取有关字段的信息

```
$field = mysqli_fetch_field_direct($result, $fieldCount); 
```

我可以使用从结果中获取字段标志

```
$field->flags 
```

PHP 手册说这将返回“表示字段位标志的整数”。但这就是我能找到的所有信息。如何解释位标志？到目前为止，我已经解决了

整数（字段长度无关紧要）根据指定的属性返回以下位标志：

```
primary key 49967
primary & unique 53255
unique key 53251
foreign key 53257
unique & index 53259 (Auto increment 49675) 
```

谢谢你的尽心帮助！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-11T17:04:33.210

[请参阅http://www.php.net/manual/en/mysqli-result.fetch-fields.php#101828](http://www.php.net/manual/en/mysqli-result.fetch-fields.php#101828)上的评论

```
NOT_NULL_FLAG = 1                                                                             
PRI_KEY_FLAG = 2
UNIQUE_KEY_FLAG = 4                         
MULTIPLE_KEY_FLAG = 8
BLOB_FLAG = 16
UNSIGNED_FLAG = 32
ZEROFILL_FLAG = 64                    
BINARY_FLAG = 128                                       
ENUM_FLAG = 256
AUTO_INCREMENT_FLAG = 512
TIMESTAMP_FLAG = 1024
SET_FLAG = 2048
PART_KEY_FLAG = 16384
GROUP_FLAG = 32768
NUM_FLAG = 32768
UNIQUE_FLAG = 65536 
```

请注意，上面发布的每个数字都是 2 的幂。（1 = 2^0、2 = 2^1、4 = 2^2 等等）。换言之，它们中的每一个对应于数字中的一位。要阅读什么`49967`意思，您可以例如以二进制形式显示它

```
>> decbin(49967);
'1100001100101111' 
```

从右边开始，您现在可以看到该字段具有以下标志

```
NOT_NULL 
PRI_KEY  
UNIQUE_KEY
MULTIPLE_KEY
UNSIGNED
ENUM
AUTO_INCREMENT
GROUP
UNIQUE 
```

检查特定标志的其他方法是使用**nickb**在下面的评论中`&`提供的二元连接运算符和 mysqli 常量：

 **```
>> echo MYSQLI_NOT_NULL_FLAG & 49967
1
>> echo MYSQLI_PRI_KEY_FLAG & 49967
2
>> echo MYSQLI_UNIQUE_KEY_FLAG & 49967
4
>> echo MYSQLI_MULTIPLE_KEY_FLAG & 49967
8
>> echo MYSQLI_BLOB_FLAG & 49967
0 
```

基本上，对于已设置的标志，您将获得非零值，对于未设置的标志，您将获得 0。您可以在以下情况下安全地使用它：

```
if($fieldFlags & MYSQLI_PRI_KEY_FLAG) {
  echo 'this field is a primary key';
} 
```**

# jquery - AJAX 工作时的 JQuery 加载器

> ID：11437657
> 
> 赞同：1
> 
> 时间：2012-07-11T16:57:21.560
> 
> 标签：jquery, ajax, asynchronous

我对 AJAX 作为 JQuery 函数中的主要操作有疑问。我希望这段代码有点线性，异步似乎没有效果。我想要做的是显示一个“加载器”，然后在脚本完成后隐藏所说的“加载器”。我有很多其他实例，但没有 AJAX 调用。相反，我使用了 $.post，但对于这个特定的实例，$.ajax 更好地满足了我的需求。

期望的结果：

我想在调用“select_add_user”.change 时显示“加载器”。我希望加载程序保持原样，直到脚本（包括 ajax）完成。

实际结果：

ajax 首先加载甚至不显示加载程序，然后在“#select_sub_group”.append 加载程序显示一毫秒，而脚本附加我的 HTML。

这是我的脚本：

```
<script type="text/javascript">

$("#select_user_add").change(function(){
$("#loader:hidden").show("fast"); 
$('#select_sub_group').html('');
var appendD = "";
txt=$("#select_user_add").val();

    $.ajax({
    async: false,  // For async, so it finishes running
    url: "get_ug.php",
    data: {
    id: txt
    },
    type: "POST",
    dataType: "json",
    success: function(data){
        $.each(data, function() {
        appendD = appendD + '<option id="usg' + this.id + '" value="' + this.id + '">' + this.label + '</option>';   
        $('#lgroup_' + this.id).css('background-color', '#CCFFCC');
        });

    }

});
$('#select_sub_group').append(appendD);
$("#loader").hide("fast");

    });
</script> 
```

在这个问题上绞尽脑汁..要么真的很简单，要么真的很难..哈哈

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-11T19:05:50.340

我会删除`async: false`并放入`$('#loader').hide("fast");`您的成功函数中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-11T16:59:37.270

把它`$("#loader").hide("fast");`放在`success:`函数里面。

```
success: function(data){
    $.each(data, function() {
    appendD = appendD + '<option id="usg' + this.id + '" value="' + this.id + '">' + this.label + '</option>';   
    $('#lgroup_' + this.id).css('background-color', '#CCFFCC');
    });
    $("#loader").hide("fast");
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-11T17:00:05.047

使用`beforeSend`回调启动加载程序，然后使用`complete`回调停止加载程序。

[http://api.jquery.com/jQuery.ajax/](http://api.jquery.com/jQuery.ajax/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-11T17:01:12.397

微调器的容器在 HTML 中应如下所示：

```
<div id="loader" style="display:none"></div> 
```

显示加载器：

```
$("#loader").show("fast"); 
```

隐藏加载器：

```
$("#loader").hide("fast"); 
```

# c - 我是否误解了指针 ref/deref、指针算术或前导 0 是否真的会影响 C 检测相等性的能力？

> ID：11437659
> 
> 赞同：2
> 
> 时间：2012-07-11T16:57:28.957
> 
> 标签：c, pointers, hex

我一直在尝试理解使用以下代码时遇到的错误

```
bytes2bits(p,q,pixels)
u_char *p, *q;
register u_int pixels;
{
  register u_char *r, a;
  register u_long *l;

   ...

switch (*l++) {
    case 0x00000000:    a = 0x00; break;
    case 0x00000001:    a = 0x10; break;
    case 0x00000100:    a = 0x20; break;
    case 0x00000101:    a = 0x30; break;

    case 0x00010000:    a = 0x40; break;
    case 0x00010001:    a = 0x50; break;
    case 0x00010100:    a = 0x60; break;
    case 0x00010101:    a = 0x70; break;

    case 0x01000000:    a = 0x80; break;
    case 0x01000001:    a = 0x90; break;
    case 0x01000100:    a = 0xa0; break;
    case 0x01000101:    a = 0xb0; break;

    case 0x01010000:    a = 0xc0; break;
    case 0x01010001:    a = 0xd0; break;
    case 0x01010100:    a = 0xe0; break;
    case 0x01010101:    a = 0xf0; break;

    default:
      (void) fprintf(stderr,"bytes2bits: bad value %x\n",*--l);
      exit(1);
}

    ...... 
```

}

我的问题在于这个代码块退出并显示错误消息

```
bytes2bits: bad value 1010100 
```

我会认为 0x01010100 == 1010100 （注意：fprintf 使用 %x 作为输出格式，所以我正在查看一个十六进制数字。此外，当我测试并使用具有 %d 输出格式的 printf 时，我看到值 16843008 (= 16^6 + 16^4 + 16^2)，这是 0x01010100 的等效十进制表示。“坏值”1010100 输出不受我的 printf 检查语句的影响）。

```
bytes2bits: bad value 1010100 
```

我如何理解 switch 语句不将 1010100 识别为倒数第二个情况（即 0x01010100：a = 0xe0）这一事实？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-11T17:38:36.397

这里唯一合理的猜测是，在您的平台上，`u_long`您分析`switch`的时间比您实际打印的时间长。`int``unsigned int`

例如，如果`u_long`是 64 位类型并且`int`是 32 位类型，那么您的`*l++`计算结果可能为`0xBAADF00D01010100`. `case 0x01010100:`这显然与标签不符。但是当你用说明符做你`printf`的 s 时`%x`，你只打印尾随`0x01010100`部分。

`l`在格式说明符（等）中使用前缀`%lx`来打印`%ld`值`long`以避免将来出现此类混淆（假设`u_long`基于`long`）。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-11T17:29:00.400

也许您在一个 u_long 的大小与预期不符的平台上（例如 64 位字）。所以 *l 可能会采用比您正在测试的 32 位模式更大的值，并且“%d”和“%x”格式可能会将实际值截断为 32 位。我建议你打印 sizeof(*l)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-11T17:19:02.487

更新：（希望这次我做对了；-）

```
a= (*l &         1) << 4
 | (*l &     0x100) >> 3
 | (*l &   0x10000) >> 10
 | (*l & 0x1000000) >> 17
 ;
if ( *l & 0xfefefefe) {
   fprintf(stderr, "Badstuff: %lx\n", (unsigned long) *l);
   exit(EXIT_FAILURE);
   }
 l++; 
```

# c# - 通过 C# ASP.NET 应用程序在 SQL Server 数据库中添加带有特殊字符的字符串

> ID：11437661
> 
> 赞同：0
> 
> 时间：2012-07-11T16:57:45.113
> 
> 标签：c#, asp.net, sql, string, special-characters

如何在具有字符串类型列（在 SQL Server 中）的表中添加类似 "jaja@yahoo.com" 的字符串，我遇到特殊字符问题（在这种情况下为'@'）。谢谢

```
System.Data.SqlClient.SqlConnection con = new System.Data.SqlClient.SqlConnection(
                         "Data Source=BOGDAN-PC\\BOGDAN;Initial Catalog=ePlanning;Integrated Security=SSPI;Connect Timeout=10;TrustServerCertificate=True ");
                string[] id_dep = ddDepartament.SelectedItem.Text.Split('.');
                con.Open();

                string final = tbemailangajat.Text.

                string sqlstring = " Update angajati set nume='" + tbNumeangajat.Text + "' ,prenume= '" + tbPrenumeangajat.Text + "',email= '" + final + "',telefon= '" + tbTelefonAngajat.Text + "',id_functie= " + ddFunctieAngajat.SelectedItem.Text[0].ToString() + ",id_departament= " + ddDepartament.SelectedItem.Text[0].ToString() + " where id_angajat = " + int.Parse(tbID.Text) + ";";
                System.Data.SqlClient.SqlCommand comm = new System.Data.SqlClient.SqlCommand(sqlstring, con);
                //  System.Data.SqlClient.SqlDataReader reader;
                comm.ExecuteNonQuery();
                con.Close(); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-11T17:15:04.810

不要使用 sql 注入，而是使用参数化查询。

```
command.CommandText = "insert into table (column) values(@p1)";
command.Parameters.AddWithValue("p1", "email@address.com"); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-11T17:12:34.567

varchar 应该允许使用 @ 符号，但对于某些符号，它需要 nvarchar 而不是 varchar。nvarchar 存储 unicode，用于支持 ASCII 范围之外的符号。

# django - 将南迁移标记为新迁移

> ID：11437664
> 
> 赞同：0
> 
> 时间：2012-07-11T16:58:03.650
> 
> 标签：django, migration, django-south

我不小心使用该选项为应用程序运行了伪造的 South 迁移`--fake`，但数据库缺少最后一次更改。

我伪造了三个迁移，但是数据库状态仍然是 0002。如果列出迁移，则所有迁移都标记为运行。

```
$ ./manage.py migrate cmsplugin_mailchimp --list

 cmsplugin_mailchimp
  (*) 0001_initial
  (*) 0002_thankyou_field
  (*) 0003_redirect_url 
```

有没有办法将最新的迁移标记为新的，以便在我运行时得到处理`./manage.py migrate cmsplugin_mailchimp`？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-11T16:58:04.413

没有额外的选项可以“将迁移标记为新”，但有一个不同的、非常明显的解决方案：只需进行向后迁移。

```
$ ./manage.py migrate cmsplugin_mailchimp 0002 --fake

 - Soft matched migration 0002 to 0002_thankyou_field.
Running migrations for cmsplugin_mailchimp:
 - Migrating backwards to just after 0002_thankyou_field.
 < cmsplugin_mailchimp:0003_redirect_url
   (faked)

$ ./manage.py migrate cmsplugin_mailchimp --list

 cmsplugin_mailchimp
  (*) 0001_initial
  (*) 0002_thankyou_field
  ( ) 0003_redirect_url 
```

现在 South 的状态与数据库的状态相匹配，您实际上可以运行最后一次迁移：

```
$ ./manage.py migrate cmsplugin_mailchimp

Running migrations for cmsplugin_mailchimp:
 - Migrating forwards to 0003_redirect_url.
 > cmsplugin_mailchimp:0003_redirect_url
 - Loading initial data for cmsplugin_mailchimp.
Installed 0 object(s) from 0 fixture(s) 
```

# javascript - 如何过滤过滤的内容

> ID：11437669
> 
> 赞同：1
> 
> 时间：2012-07-11T16:58:28.403
> 
> 标签：javascript, jquery

我找到了这个[链接](http://web.enavu.com/demos/filtering/nostyle.html)，我得到了这个代码：

```
$(document).ready(function(){     
    //when a link in the filters div is clicked...  
    $('#filters a').click(function(e){        
        //prevent the default behaviour of the link  
        e.preventDefault();       
        //get the id of the clicked link(which is equal to classes of our content  
        var filter = $(this).attr('id');      
        //show all the list items(this is needed to get the hidden ones shown)  
        $('#content ul li').show();       
        /*using the :not attribute and the filter class in it we are selecting 
        only the list items that don't have that class and hide them '*/  
        $('#content ul li:not(.' + filter + ')').hide();      
    });       
}); 
```

它工作正常，但我在选择按钮中使用此代码。当我选择该选项时，它过滤正常。但是我有不止一个选择 - 实际上是 5 个 - 但我不知道在这种情况下如何处理。

示例：
项目：草莓、苹果、樱桃、橙子、香蕉、葡萄
选择 1 - 所有水果、红色、绿色等
选择 2 - 所有形式、圆形、三角形。
选择 3 - 完全是另一回事，另一回事

用户可以先选择红色 - First Filter。
然后他可以选择圆形，所以苹果和樱桃就是答案。

我已经尝试仅过滤可见图像，但是当我尝试将信息带回时发生了一些错误。

在与结果苹果和樱桃相同的示例中，如果用户选择所有水果，则结果必须是苹果、樱桃、橙子和葡萄。

一些忠告？

[这是一个示例代码](http://jsfiddle.net/mBTSP/) 请注意，过滤器以隔离方式工作。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-11T17:56:15.810

摆弄：

[http://jsfiddle.net/iambriansreed/turMe/](http://jsfiddle.net/iambriansreed/turMe/)

jQuery：

```
$(document).ready(function(){  

    var filters = {};

    //when a link in the filters div is clicked...  
    $('#filters a').click(function(e){        
        e.preventDefault();      
        filters[$(this).parent().attr('class')] = $(this).attr('id');      
        var show = $('#content ul li').filter(function(){                
            for(k in filters)
                if(
                   filters.hasOwnProperty(k) &&
                   !$(this).hasClass(filters[k])
                )
                return false;            
            return true;                
        });
        show.show();            
        $('#content ul li').not(show).hide();            
        $('pre').html(JSON.stringify(filters));            
    });      
}); ​ 
```

HTML

```
<!-- the filters div -->  
<div id='filters'>
<p>Filter One:</p>
<p class="f1" >
    <a href='#' id='allitens'>All</a>
    <a href='#' id='bestof'>Best Of</a>
    <a href='#' id='jquery'>jQuery</a>
    <a href='#' id='php'>PHP</a>
    <a href='#' id='html'>HTML</a>
    <a href='#' id='css'>CSS</a> 
</p>
<p>Filter Two: Begins with letter or Number</p>
    <p class="f2">
<a href='#' id='b1'>B</a> 
<a href='#' id='n1'>1</a>
<a href='#' id='H'>H</a>
    </p>
</div>  

    <!-- the content div -->  
    <div id='content'>  
        <!-- the unordered list where we store the content in list items -->  
        <ul>  
          ...
        </ul>  
</div>  
Filters
<pre></pre> 
```

我创建了一个对象，然后将所有过滤器分配给该对象。然后我过滤掉不符合条件的 DOM 元素。这现在适用于任意数量的过滤器。

在这条线上：

```
filters[$(this).parent().attr('class')] = $(this).attr('id'); 
```

我正在做三件事：

1.  获取点击链接的父级（段落标签）的类属性。`$(this).parent().attr('class')`
2.  获取点击链接的 ID。
    `$(this).attr('id')`
3.  `filters`使用 1 中定义的键和 2 中定义的值添加或覆盖对象的属性。

# machine-learning - 由于 vowpal wabbit 对 boost 库的依赖而导致的错误

> ID：11437672
> 
> 赞同：8
> 
> 时间：2012-07-11T16:31:18.190
> 
> 标签：machine-learning, vowpalwabbit, large-data

我正在努力安装 vowpal wobbit，当我运行 make 文件时它失败了，抛出：

```
 cd library; make; cd .. 
    g++ -g -o ezexample temp2.cc -L ../vowpalwabbit -l vw -l allreduce -l boost_program_options -l z -l pthread 
    ld: library not found for -lboost_program_options collect2: ld returned 1   exit status make[1]: *** [ezexample] Error 1' 
```

然后我通过指定 -L/usr/local/lib 在此处添加了指向 boost 库的链接

现在我收到以下错误：

```
 g++ -g -o ezexample temp2.cc -L/usr/local/lib ../vowpalwabbit -l vw -l  allreduce -l boost_program_options -l z -l pthread 
    ld: library not found for -lvw
    collect2: ld returned 1 exit status   
    make: *** [ezexample] Error 1 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-11T19:41:54.333

我碰巧让一切都在 OS X 10.7 上运行，如下所示：

1.  确保您有一个有效的 Boost 安装。如[入门](http://www.boost.org/doc/libs/1_50_0/more/getting_started/unix-variants.html)页面所示，通常我们只需要头文件，但一些 Boost 库必须单独构建，包括用于处理来自命令行或配置文件的选项的[program_options库。](http://www.boost.org/doc/libs/1_50_0/doc/html/program_options.html)进入你的`boost`文件夹，然后在你的 shell 提示符下：

    ```
    $ ./bootstrap.sh
    $ ./bjam 
    ```

    这将编译并构建所有内容。您现在应该`bin.v2/`在您的目录中有一个目录`boost`，其中包含您系统的所有构建库（静态和线程库）。

    ```
    $ ls bin.v2/libs/
    date_time       iostreams       python          serialization   test
    filesystem      math            random          signals         thread
    graph           program_options regex           system          wave 
    ```

    `stage/lib/`更重要的是，目录中提供了额外的 Boost 库。对我来说，这些是`Mach-O 64-bit dynamically linked shared library x86_64`.

    *包含路径*应​​该是 ，您的工作 Boost 的基本名称在`your_install_dir/boost_x_xx_x`哪里。`boost_x_xx_x`（我个人有`boost_1_46_1`并且`/usr/local/share/`我将它符号链接到`/usr/local/share/boost`以避免必须记住版本号。）*库路径*（用于链接）应该是`your_install_dir/boost_x_xx_x/stage/lib`. 但是，最好在通常的地方进行符号链接或复制（这是我所做的）所有内容，即`/usr/local/include/boost`头文件和`/usr/local/lib`库。

2.  `Makefile`从目录中编辑`vowpal_wabbit`，并更改包含/库路径以反映您当前的安装。`Makefile`应该如下所示（前 12 行）：

    ```
    COMPILER = g++
    UNAME := $(shell uname)

    ifeq ($(UNAME), FreeBSD)
    LIBS = -l boost_program_options -l pthread -l z -l compat
    BOOST_INCLUDE = /usr/local/include
    BOOST_LIBRARY = /usr/local/lib
    else
    LIBS = -l boost_program_options -l pthread -l z
    BOOST_INCLUDE = /usr/local/share/boost            # change path to reflect yours
    BOOST_LIBRARY = /usr/local/share/boost/stage/lib  # idem
    endif 
    ```

    然后，您可以编译`vowpal_wabbit`（`make clean`如果您已经编译它）：

    ```
    $ make
    $ ./vw --version
    6.1
    $ make test 
    ```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2014-03-31T16:06:46.593

您还可以使用[brew](https://github.com/Homebrew/homebrew)在 OS X 上安装 vowpal wabbit ：

```
brew install vowpal-wabbit 
```

或者你可以只安装 boost，然后`vw`从 github repo 安装。

```
brew install boost 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-09-17T12:56:16.783

为了在 CentOS 7 上安装（6.5 perl 版本对于最新的大众源代码来说太旧了），我在[http://wkoplitz.blogspot.be/2012/12/vowpal-wabbit-on-centos.html](http://wkoplitz.blogspot.be/2012/12/vowpal-wabbit-on-centos.html)找到了说明工作正常：

```
yum install zlib-devel boost-devel

yum groupinstall "Development Tools"

git clone git://github.com/JohnLangford/vowpal_wabbit.git

cd vowpal_wabbit

./autogen.sh

make

make test 
```

# sql - 如何删除另一个表中存在的行？

> ID：11437677
> 
> 赞同：7
> 
> 时间：2012-07-11T16:58:58.690
> 
> 标签：sql, ms-access, ms-access-2007

我有两张桌子。主表是“CompleteEmailListJuly11”，第二个表是“CurrentCustomersEmailJuly11”。我想删除 CurrentCustomersEmailJuly11 基于电子邮件的 CompleteEmailListJuly11 表中的行。

我已经尝试过以下删除示例，但它并没有做任何接近我想要做的事情。这仅向我显示数据库中存在的那些，它不会向我显示不匹配的电子邮件列表。

```
DELETE * FROM CompleteEmailListJuly11 AS i 
WHERE EXISTS ( 
    SELECT 1 FROM CurrentCustomersEmailJuly11 
    WHERE CurrentCustomersEmailJuly11.email = i.EmailAddress
) 
```

非常感谢您的帮助。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-07-12T09:44:32.960

这是我认为您需要的查询：

```
DELETE FROM CompleteEmailListJuly11
WHERE EmailAddress IN (SELECT email FROM CurrentCustomersEmailJuly11) 
```

Ps: The DELETE query does not delete individual fields, only entire rows, so the * is not necessary, you will also need to "Execute" this query rather than "Previewing" or "Exporting"

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-11T20:03:54.010

如果您`DELETE`在 Access 的查询设计器中构建查询，请注意有两种不同的操作模式，它们看起来类似于“*继续执行此操作*”。

1.  数据表视图（由功能区“设计”部分上标记为“视图”的网格图标表示）。该视图使您能够预览受影响的记录，但实际上并不删除它们。
2.  “运行”图标（由红色感叹号表示）。“运行”将实际执行查询并删除受影响的记录。

如果您已经知道这一点，我的描述可能看起来很侮辱。对不起。但是，似乎 Access 新手很容易忽略它们之间的区别。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-11T17:06:23.930

您可以使用类似这样的东西来删除

```
 SELECT ... // complete
  EXCEPT
  SELECT ... // current 
```

我不确定它是如何映射到删除的，但请看一下。

我喜欢类似的问题：[如何“减去”sql表？](https://stackoverflow.com/q/1373833/879485)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-11T17:26:13.733

我们可以使用相关查询来解决问题，例如

```
DELETE FROM COMPLETE C 
WHERE EMAIL = (SELECT EMAIL FROM CURR CU WHERE CU.EMAIL=C.EMAIL); 
```

# oracle - Oracle 12519：运行集成测试套件时出现问题

> ID：11437680
> 
> 赞同：0
> 
> 时间：2012-07-11T16:59:15.967
> 
> 标签：oracle, ora-12519

我有一个测试套件，其中包含大约 4000 个测试。我们使用 Oracle 作为我们的数据库。当我运行测试套件时，一些测试运行良好，一段时间后我得到**ORA-12519 TNS：找不到合适的服务处理程序**

当我单独运行测试器时，它工作正常，所以猜测问题出在我机器上的oracle数据库的连接上。

我在网上关注了几篇文章并运行了命令“alter system set processes=150 scope=spfile;” 在 SQL*Plus 中，但这也无济于事

以前有人遇到过这个问题吗？如果解决了，我需要怎么做？

如果有人能解释原因和所需的行动，我会很棒

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-11T20:14:37.670

Sql*Plus 作为系统并使用它

改变系统设置进程=600 范围=spfile；（而不是 150 ，我将其设置为 600）

确保重新启动数据库。

这是回答here

[什么会导致间歇性 ORA-12519（TNS：未找到合适的处理程序）错误](https://stackoverflow.com/questions/205160/what-can-cause-intermittent-ora-12519-tns-no-appropriate-handler-found-errors)

谢谢

# android - 如果子视图成为焦点，则 OnKeyListener 或 OnKeydown 不起作用

> ID：11437681
> 
> 赞同：7
> 
> 时间：2012-07-11T16:59:20.590
> 
> 标签：android, android-scrollview, trackball

我想听一个 ScrollView 看它是否在滚动。我使用了 OnTouchListener，效果很好。但是当我想使用 OnKeyListener 或重写 OnKeydown 方法为轨迹球添加兼容性时，它就无法工作。似乎孩子按钮获得焦点会导致问题。

任何解决方案或解决方法来解决这个问题？任何帮助表示赞赏。

以下是一些重现我的问题的演示代码：

```
public class TestActivity extends Activity {
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);
    ScrollView scrollView = (ScrollView) findViewById(R.id.scroll_view);
    LinearLayout mainLayout = (LinearLayout) findViewById(R.id.main_layout);

    LinearLayout.LayoutParams wrapParams = new LinearLayout.LayoutParams(
            ViewGroup.LayoutParams.FILL_PARENT,
            ViewGroup.LayoutParams.WRAP_CONTENT);
    for (int i = 0; i < 100; i++) {
        MyItem item = (MyItem) LayoutInflater.from(this).inflate(R.layout.item, null);
        item.setParent(scrollView);
        item.setBackgroundColor(Color.WHITE);
        item.setLayoutParams(new LayoutParams(LayoutParams.FILL_PARENT,
                LayoutParams.WRAP_CONTENT));
        mainLayout.addView(item, wrapParams);
    }

    scrollView.setOnTouchListener(new OnTouchListener() {

        @Override
        public boolean onTouch(View v, MotionEvent event) {
            // can go into here
        }

    });

    scrollView.setOnKeyListener(new OnKeyListener() {

        @Override
        public boolean onKey(View v, int keyCode, KeyEvent event) {
            if (keyCode == KeyEvent.KEYCODE_DPAD_DOWN || keyCode == KeyEvent.KEYCODE_DPAD_DOWN) {
                // never go in, unless no child button get focus
            }
            return false;
        }
    });
}

} 
```

主.xml：

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:orientation="vertical">
    <com.fannyxie.MyScroller 
        android:id="@+id/scroll_view"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:descendantFocusability="beforeDescendants"
        android:clickable="true"
        android:focusable="true">
        <LinearLayout
            android:layout_width="fill_parent"
            android:layout_height="fill_parent"
            android:orientation="vertical">
            <LinearLayout android:id="@+id/main_layout"
                android:layout_width="fill_parent"
                android:layout_height="fill_parent"
                android:orientation="vertical">
            </LinearLayout>
        </LinearLayout>
    </com.fannyxie.MyScroller>
</LinearLayout> 
```

项目.xml：

```
<?xml version="1.0" encoding="utf-8"?>
<com.fannyxie.MyItem xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:orientation="vertical">
    <TextView 
       android:layout_width="fill_parent"
       android:layout_height="wrap_content"
       android:text="TITLE"/>
    <Button android:layout_width="wrap_content" android:layout_height="wrap_content"
        android:id="@+id/myButton" android:text="Button"></Button>
</com.fannyxie.MyItem> 
```

MyScroller.java

```
public class MyScroller extends ScrollView {

    public MyScroller(Context context, AttributeSet attrs) {
        super(context, attrs);
    }

    @Override
    public boolean onKeyDown(int keyCode, KeyEvent event) {
        //not go into here...
        Log.i("MyScroller", "onKeyDown");
        return super.onKeyDown(keyCode, event);
    }

    @Override
    public boolean onTrackballEvent(MotionEvent event) {
        //not go into here...
        Log.i("MyScroller", "onTrackballEvent");
        return super.onTrackballEvent(event);
    }

    @Override
    protected boolean onRequestFocusInDescendants(int direction,
            Rect previouslyFocusedRect) {
        //some times go into here, when no button get the focus when entering first time
        Log.i("MyScroller", "request focus in descendants");
        return super.onRequestFocusInDescendants(direction, previouslyFocusedRect);
    }

} 
```

MyItem.java

```
public class MyItem extends LinearLayout {

    private Button myButton;
    public MyItem(Context context, AttributeSet attrs) {
        super(context, attrs);
    }

    @Override
    protected boolean onRequestFocusInDescendants(int direction,
            Rect previouslyFocusedRect) {
        // never go into here
        Log.i("MyItem", "request focus in descendants");
        return super.onRequestFocusInDescendants(direction, previouslyFocusedRect);
    }

} 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-07-12T09:08:17.040

谢谢@杰弗里。但我找到了一个更好的方法来做到这一点。只需覆盖 ScrollView 中的 dispatchkeyevent 方法并在那里处理轨迹球/键盘事件。它运作良好。

```
public class MyScroller extends ScrollView {

public MyScroller(Context context, AttributeSet attrs) {
    super(context, attrs);
}

@Override
public boolean dispatchKeyEvent(KeyEvent event) {
    if ((KeyEvent.KEYCODE_DPAD_UP == event.getKeyCode() || KeyEvent.KEYCODE_DPAD_DOWN == event.getKeyCode())) {
            //handle key events here
    }
    return super.dispatchKeyEvent(event);
}

} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-11T17:14:51.000

触摸事件从子级传递给父级。如果任何孩子消耗了偶数（返回真），那么它就会停止；它不会传递给父级。所以，2个解决方案，

首先是扩展视图容器类并覆盖`onInterceptTouchEvent()`。这是我为它做的一个例子`TabHost`，但对你来说它可能是`LinearLayout`，或者其他什么，

```
public class FlingableTabHost extends TabHost {
    private GestureDetector gestureDetector;

    public FlingableTabHost(Context context, AttributeSet attrs) {
        super(context, attrs);
        initGestureListener();
    }

    public FlingableTabHost(Context context) {
        super(context);
        initGestureListener();
    }

    public boolean onInterceptTouchEvent(MotionEvent event){
        super.onInterceptTouchEvent(event);
        // handle touch event. only return true if you handle it yourself here.
    }
} 
```

第二种方法是将所有子视图的触摸监听设置为您的自定义触摸监听器，

```
ViewGroup myLayout = ...;
registerTouchListener(myLayout, myTouchListener);

private void registerTouchListener(View view, View.OnTouchListener listener) {
  view.setOnTouchListener(listener);
  if (view instanceof ViewGroup) {
    ViewGroup vg = (ViewGroup)view;
    for (int i = 0, n = vg.getChildCount(); i < n; i++) {
      View v = vg.getChildAt(i);
      registerTouchListener(v, listener);
    }
  }
} 
```

# .net - .NET DateTime 中的空值是否保证小于实际值？

> ID：11437682
> 
> 赞同：18
> 
> 时间：2012-07-11T16:59:21.143
> 
> 标签：.net, nullable

也许我的 Google-Fu 让我失望了，但我无法确定在 .NET 中比较可空值是否总是比其他东西少。

我有一些类似的代码

```
MyClass findLatest(List<MyClass> items){
    DateTime? latest_tstamp = null;
    MyClass latest_item = null;
    foreach(var item in items){
        if (latest_tstamp < item.tstamp){
            latest_tstamp = item.tstamp;
            latest_item = item;
        }
    }
    return latest_item;
} 
```

它似乎在我尝试过的少数有限情况下有效（当然`item.tstamp`也声明`DateTime? tstamp`了）。

这是有保证的行为吗？

## 结论（？）

根据答案（以及 Jon Skeet 的 [对另一个问题的回答]），我进行了以下检查：

```
if (item.tstamp != null &&
    (latest_tstamp == null || latest_tstamp < item.tstamp)){
    // do stuff
} 
```

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2012-07-11T17:06:29.780

这是 C# 规范所保证的行为。`<`on 可空值类型的结果是`false`如果它们中的任何一个是`null`. 另一方面，引用类型可能表现出不同的行为。

我仍然不建议使用这个。很难理解这段代码。我更喜欢显式`null`检查，或者只是一个布尔标志`isFirstElement`，而不是首先使用可空值。

> **7.2.7 吊运操作员**
> 
> *提升的运算符*允许对不可为空的值类型进行操作的预定义和用户定义的运算符也与这些类型的可空形式一起使用。提升运算符由满足某些要求的预定义和用户定义的运算符构成，如下所述：
> 
> ...
> 
> *   对于关系运算
>          `<`   `>`   `<=`   `>=`
>     符，如果操作数类型都是不可为空的值类型并且结果类型是 ，则存在运算符的提升形式`bool`。提升形式是通过向每个操作数类型添加单个`?`修饰符来构造的。**如果一个或两个操作数是，则****提升的运算符产生值。`false``null`**否则，提升的运算符会展开操作数并应用底层运算符来生成`bool`结果。

*（引自 C# 语言规范 3.0 版）*

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-07-11T17:03:26.673

[引用 MSDN：](http://msdn.microsoft.com/en-us/library/2cf62fcy.aspx)

> 当您对可空类型执行比较时，如果一个可空类型的值为空而另一个不是，则所有比较的结果都为假，除了`!=`（不等于）。重要的是不要假设因为特定的比较返回 false，相反的情况返回 true。在以下示例中，10 不大于、小于或等于 null。仅`num1 != num2` 评估为真。
> 
> 两个都为 null 的可为 null 类型的相等比较计算结果为 true。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-11T17:03:13.710

在这种情况下，它永远不会`true`。在其中一个值`null`始终为 false 的可空值之间进行比较。因此，`if`这里的比较永远不会是真的，`latest_item`也永远不会被设置为一个值

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2019-03-15T16:21:35.513

只是一个补充，你可以打电话`Nullable.GetValueOrDefault()`

例子：

```
if (dateTime1.GetValueOrDefault() < dateTime2)
  ... 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-11T17:01:58.453

无论编译器规则如何，代码的可读性都不是很高。您绝对应该明确地进行空值检查（IMO）：

```
if (latest_tstamp == null) 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-07-11T17:03:24.473

这不能保证适用于所有类型，因为`<`可以重写运算符以对特定类有意义，并且该代码可能不考虑 null。对于 的标准运算符`Nullable<T>`， null 将比较小于一个值。

但是，如果您正在处理自定义类型，请考虑它们的运算符可能不会考虑空值。例如，看看这个愚蠢的例子：

```
void Main()
{
    Foo x = null;
    Foo y = new Foo();

    Console.WriteLine(x < y);
    Console.WriteLine(x > y);
}

class Foo 
{
    public static bool operator <(Foo lhs, Foo rhs)
    {
        if (ReferenceEquals(lhs, null))
            return false;
        return true;
    }

    public static bool operator >(Foo lhs, Foo rhs)
    {
        return false;
    }
} 
```

我同意这里的另一个答案，即使您的代码可能有效，但进行明确的空值检查会更好。

# asp.net - 从服务器资源管理器打开 Visual Studio 解决方案

> ID：11437686
> 
> 赞同：1
> 
> 时间：2012-07-11T16:59:42.450
> 
> 标签：asp.net, visual-studio-2010, tfs, content-management-system, kentico

我不知道这是否可行，但我正在尝试从 Visual Studio 中打开位于远程服务器上的 Visual Studio 2010 解决方案。我正在进行的项目使用 Kentico CMS，我们希望能够使用 TFS 和 Visual Studio 同步对托管站点（在服务器上）所做的更改以及通过 Kentico CMS Desk 门户所做的更改。我在 Visual Studio 或 Kentico 开发站点或文档中没有找到任何内容。无论这是否可能，或者是否有更好的方法来实现这一目标，我将不胜感激您能提供的任何见解。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-17T19:02:02.817

在与几个对 Kentico 更熟悉的开发人员交谈后，我们最终找到了解决问题的好方法。它并不完美，但它可以满足我们的目的。

1.  我们让 Kentico 管理员为“localhost”生成了一个新的 Kentico 许可证代码。
2.  在 Visual Studio 中，我们从服务器中提取了一个默认的 Kentico 项目。
3.  在项目属性中，我们将 Use Dynamic Ports 设置为 false 并选择一个数字来设置端口。
4.  项目构建并运行后，我们可以导航到“localhost:1501/[ProjectName]/[PageName (CMSDesk, Landing.aspx, etc.)]”以访问 CMS Desk 门户。
5.  在 CMS 站点管理器中，导航到站点 >（单击站点的编辑按钮）> 域别名 > 新域别名并设置一个新的域别名（您在查看站点时要使用的网站（对我们来说是 dev. [projectname].com). 当项目在服务器上时，这允许其他开发人员通过域别名登录和使用页面。对 localhost 副本所做的更改必须在可见之前推送到服务器。

使用本地副本，我们可以使用 Web 部件并将更改同步到 TFS。我们仍然需要手动将项目从本地机器复制到服务器才能进行部署，但我们希望设置一个构建机器，它将定期将 TFS 构建推送到服务器，这不应该特别难的。

如果我们找到更好的方法来实现这个目标，或者发现任何潜在的问题，我一定会更新。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-12T14:04:27.463

我相信这个系统会帮助你完成将你的开发环境同步到远程服务器。

[http://www.kentico.com/Product/All-Features/Other-Modules/Staging-and-synchronization](http://www.kentico.com/Product/All-Features/Other-Modules/Staging-and-synchronization)

您可以在此页面上查看同步的内容：

[http://devnet.kentico.com/docs/devguide/index.html](http://devnet.kentico.com/docs/devguide/index.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-13T07:36:35.913

内容登台有利于同步通过用户界面所做的更改。

为了同步文件系统中的更改（例如 Visual Studio 中代码文件的更改），您可以使用一些第三方工具使文件夹保持最新 - 即 Drop box 或 Google 驱动器（但也有其他工具和实用程序） .

# cmake - 如何向 cmake 添加自定义构建类型？（目标品牌）

> ID：11437692
> 
> 赞同：23
> 
> 时间：2012-07-11T17:00:03.120
> 
> 标签：cmake

我正在尝试为我的 cmake 构建添加自定义构建类型，针对代码覆盖率。

我找到了关于它的常见问题解答条目：[https ://gitlab.kitware.com/cmake/community/wikis/FAQ#how-can-i-specify-my-own-configurations-for-generators-that-allow-它-](https://gitlab.kitware.com/cmake/community/wikis/FAQ#how-can-i-specify-my-own-configurations-for-generators-that-allow-it-)

但是，我无法让它工作。

这是我的代码，使用 cmake 2.8.5 ：

```
message("* Adding build types...")
if(CMAKE_CONFIGURATION_TYPES)
   list(APPEND CMAKE_CONFIGURATION_TYPES CodeCoverage)
   list(REMOVE_DUPLICATES CMAKE_CONFIGURATION_TYPES)
   set(CMAKE_CONFIGURATION_TYPES "${CMAKE_CONFIGURATION_TYPES}" CACHE STRING
       "Add the configurations that we need"
       FORCE)
   message("  Available build types are now : ${CMAKE_CONFIGURATION_TYPES}")
else()
   message("  XXX custom build types are not allowed...")
endif() 
```

我得到“不允许 XXX 自定义构建类型......”......

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2012-07-11T17:00:03.760

**发现问题：添加自定义构建**和自定义**配置**之间存在混淆：

*   **配置**适用于 Visual Studio 或 XCode 等特殊工具
*   **构建类型**是一个更原始的功能

因此，要添加自定义构建类型，根本不需要操作 CMAKE_CONFIGURATION_TYPES 变量。只需设置相应的变量并开始使用它，如下[所述](https://gitlab.kitware.com/cmake/community/wikis/FAQ#how-can-i-extend-the-build-modes-with-a-custom-made-one-)：

```
SET(GCC_DEBUG_FLAGS "-g -Wall")

# Add new build types
message("* Adding build types...")
SET(CMAKE_CXX_FLAGS_COVERAGE
    "${GCC_DEBUG_FLAGS} -fprofile-arcs -ftest-coverage"
    CACHE STRING "Flags used by the C++ compiler during coverage builds."
    FORCE )
SET(CMAKE_C_FLAGS_COVERAGE
    "${GCC_DEBUG_FLAGS} -fprofile-arcs -ftest-coverage"
    CACHE STRING "Flags used by the C compiler during coverage builds."
    FORCE )
SET(CMAKE_EXE_LINKER_FLAGS_COVERAGE
    ""
    CACHE STRING "Flags used for linking binaries during coverage builds."
    FORCE )
SET(CMAKE_SHARED_LINKER_FLAGS_COVERAGE
    ""
    CACHE STRING "Flags used by the shared libraries linker during coverage builds."
    FORCE )
MARK_AS_ADVANCED(
    CMAKE_CXX_FLAGS_COVERAGE
    CMAKE_C_FLAGS_COVERAGE
    CMAKE_EXE_LINKER_FLAGS_COVERAGE
    CMAKE_SHARED_LINKER_FLAGS_COVERAGE ) 
```

我们可能还想更新帮助字符串（顺便[设置默认构建类型](https://gitlab.kitware.com/cmake/community/wikis/FAQ#how-can-i-change-the-default-build-mode-and-see-it-reflected-in-the-gui)）：

```
IF(NOT CMAKE_BUILD_TYPE)
   SET(CMAKE_BUILD_TYPE Debug
       CACHE STRING "Choose the type of build : None Debug Release RelWithDebInfo MinSizeRel Coverage."
       FORCE)
ENDIF(NOT CMAKE_BUILD_TYPE)
message("* Current build type is : ${CMAKE_BUILD_TYPE}") 
```

关于尝试从另一个构建类型继承默认选项的一些警告：

```
SET(CMAKE_CXX_FLAGS_COVERAGE
    "${CMAKE_CXX_FLAGS_DEBUG} -fprofile-arcs -ftest-coverage"
    CACHE STRING "Flags used by the C++ compiler during coverage builds."
    FORCE ) 
```

这是一个 **坏**主意，因为每次再次获取配置时（每次更改其中的某些内容）都会不断附加额外的选项。

# ruby-on-rails - “rake aborted！undefined method `[]=' for nil:NilClass”在 cron 作业中运行 rake 时出现消息

> ID：11437697
> 
> 赞同：0
> 
> 时间：2012-07-11T17:00:09.740
> 
> 标签：ruby-on-rails, rake

我是一个 ROR 新手，他继承了一个项目（Ruby 版本 1.9.3p0、Rails 版本 3.0.6、rake 版本 0.9.2），该项目执行 rake 作为 cronjob 的一部分。这一直在将“rake aborted！undefined method `[]=' for nil:NilClass”输出到其日志文件中。当我执行跟踪时，我得到以下输出：

```
rake aborted!
undefined method `[]=' for nil:NilClass
/var/www/nostos-source-illiad/lib/nostos-source-illiad/record.rb:48:in `block in charge!'
(eval):22:in `form_with'
/var/www/nostos-source-illiad/lib/nostos-source-illiad/record.rb:47:in `charge!'
/var/www/nostos/app/models/transaction.rb:65:in `block (2 levels) in sync!'
/var/www/nostos/app/models/transaction.rb:58:in `each'
/var/www/nostos/app/models/transaction.rb:58:in `block in sync!'
/var/www/nostos/app/models/transaction.rb:57:in `each'
/var/www/nostos/app/models/transaction.rb:57:in `sync!'
/var/www/nostos/lib/tasks/nostos.rake:17:in `block (2 levels) in <top (required)>'
/home/deployer/.rbenv/versions/1.9.3-p0/lib/ruby/gems/1.9.1/gems/rake-0.9.2/lib/rake/task.rb:205:in `call'
/home/deployer/.rbenv/versions/1.9.3-p0/lib/ruby/gems/1.9.1/gems/rake-0.9.2/lib/rake/task.rb:205:in `block in execute'
/home/deployer/.rbenv/versions/1.9.3-p0/lib/ruby/gems/1.9.1/gems/rake-0.9.2/lib/rake/task.rb:200:in `each'
/home/deployer/.rbenv/versions/1.9.3-p0/lib/ruby/gems/1.9.1/gems/rake-0.9.2/lib/rake/task.rb:200:in `execute'
/home/deployer/.rbenv/versions/1.9.3-p0/lib/ruby/gems/1.9.1/gems/rake-0.9.2/lib/rake/task.rb:158:in `block in invoke_with_call_chain'
/home/deployer/.rbenv/versions/1.9.3-p0/lib/ruby/1.9.1/monitor.rb:211:in `mon_synchronize'
/home/deployer/.rbenv/versions/1.9.3-p0/lib/ruby/gems/1.9.1/gems/rake-0.9.2/lib/rake/task.rb:151:in `invoke_with_call_chain'
/home/deployer/.rbenv/versions/1.9.3-p0/lib/ruby/gems/1.9.1/gems/rake-0.9.2/lib/rake/task.rb:144:in `invoke'
/home/deployer/.rbenv/versions/1.9.3-p0/lib/ruby/gems/1.9.1/gems/rake-0.9.2/lib/rake/application.rb:112:in `invoke_task'
/home/deployer/.rbenv/versions/1.9.3-p0/lib/ruby/gems/1.9.1/gems/rake-0.9.2/lib/rake/application.rb:90:in `block (2 levels) in top_level'
/home/deployer/.rbenv/versions/1.9.3-p0/lib/ruby/gems/1.9.1/gems/rake-0.9.2/lib/rake/application.rb:90:in `each'
/home/deployer/.rbenv/versions/1.9.3-p0/lib/ruby/gems/1.9.1/gems/rake-0.9.2/lib/rake/application.rb:90:in `block in top_level'
/home/deployer/.rbenv/versions/1.9.3-p0/lib/ruby/gems/1.9.1/gems/rake-0.9.2/lib/rake/application.rb:129:in `standard_exception_handling'
/home/deployer/.rbenv/versions/1.9.3-p0/lib/ruby/gems/1.9.1/gems/rake-0.9.2/lib/rake/application.rb:84:in `top_level'
/home/deployer/.rbenv/versions/1.9.3-p0/lib/ruby/gems/1.9.1/gems/rake-0.9.2/lib/rake/application.rb:62:in `block in run'
/home/deployer/.rbenv/versions/1.9.3-p0/lib/ruby/gems/1.9.1/gems/rake-0.9.2/lib/rake/application.rb:129:in `standard_exception_handling'
/home/deployer/.rbenv/versions/1.9.3-p0/lib/ruby/gems/1.9.1/gems/rake-0.9.2/lib/rake/application.rb:59:in `run'
/home/deployer/.rbenv/versions/1.9.3-p0/lib/ruby/gems/1.9.1/gems/rake-0.9.2/bin/rake:32:in `<top (required)>'
/home/deployer/.rbenv/versions/1.9.3-p0/lib/ruby/gems/1.9.1/bin/rake:19:in `load'
/home/deployer/.rbenv/versions/1.9.3-p0/lib/ruby/gems/1.9.1/bin/rake:19:in `<main>'
Tasks: TOP => nostos:cron 
```

我无法确定究竟是什么导致了这个问题，并且正在寻找一些建议/方向。我不认为这是由[此处](https://stackoverflow.com/questions/7623983/rake-undefined-method-for-nilnilclass)报告的相同问题引起的，但我不确定。任何帮助，将不胜感激。谢谢！

编辑：代码`nostos:rake`可以在[这里](https://github.com/bricestacey/nostos/blob/master/lib/tasks/nostos.rake)找到。

代码`transaction.rb`可以在[这里](https://github.com/bricestacey/nostos/blob/master/app/models/transaction.rb)找到。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-23T14:32:00.307

经过进一步审查，此问题似乎是由于传入的凭据集无效。解决此问题后，上述消息将被删除。感谢您查看这个！

# python - python sterling的逼近程序

> ID：11437700
> 
> 赞同：4
> 
> 时间：2012-07-11T17:00:15.813
> 
> 标签：python, python-2.7

我正在尝试编写一个简单的程序来打印整数 1:10 的第一个[斯特林近似值](http://en.wikipedia.org/wiki/Stirling%27s_approximation)以及 1:10 阶乘的实际值。这是我的代码：

```
import math

nf =1 

def stirling(n):
    return math.sqrt(2*math.pi*n)*(n/math.e)**n

print "n","\t", "Stirling","\t\tFactorial"
for x in range (1,11):
    for y in range(1,x):
        nf *=y
    print x,"\t", stirling(x), "\t\t", nf 
```

我得到了错误的阶乘输出，我在哪里弄乱了代码？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-07-11T17:05:18.587

(1) 每次计算阶乘时都需要重新设置`nf=1`（或者，每次只乘一个新数字，这样效率更高）；

(2)`range(1,x)`不包括 x，因此您的阶乘将不包括右上界。以下应该有效：

```
nf = 1
for x in range (1,11):
    nf *= x
    print x,"\t", stirling(x), "\t\t", nf 
```

产生

```
n   Stirling        Factorial
1   0.922137008896      1
2   1.91900435149       2
3   5.83620959135       6
4   23.5061751329       24
5   118.019167958       120
6   710.078184642       720
7   4980.39583161       5040
8   39902.3954527       40320
9   359536.872842       362880
10  3598695.61874       3628800 
```

# c++ - 在文件名中插入int变量

> ID：11437702
> 
> 赞同：6
> 
> 时间：2012-07-11T17:00:40.103
> 
> 标签：c++

> **可能重复：**
> [在 C++ 中将 int 转换为字符串的最简单方法](https://stackoverflow.com/questions/5590381/easiest-way-to-convert-int-to-string-in-c)

如何在创建 .vtk 文件时插入 int 变量？我想在每 k 步创建文件。也就是说，应该有一系列文件，从 file_no_1.vtk, file_no_2.vtk, ... 到 file_no_49.vtk 。

```
while(k<50){
  ifstream myfile;

  myfile.open("file_no_.vtk");

  myfile.close();

  k++;
} 
```

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-07-11T17:06:51.117

在 C++11 中：

```
while(k<50){
  ifstream myfile("file_no_" + std::to_string(k) + ".vtk");
  // myfile << "data to write\n";
  k++;
} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-07-11T17:07:18.033

使用[`stringstream`](http://en.cppreference.com/w/cpp/io/basic_stringstream)（包括`<sstream>`）：

```
while(k < 50){
    std::ostringstream fileNameStream("file_no_");
    fileNameStream << k << ".vtk";

    std::string fileName = fileNameStream.str();

    myfile.open(fileName.c_str());

   // things

    myfile.close();

    k++;
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-11T17:03:32.417

像这样：

```
char fn [100];
snprintf (fn, sizeof fn, "file_no_%02d.vtk", k);
myfile.open(fn); 
```

或者，如果您不想要前导零（您的示例显示）：

```
snprintf (fn, sizeof fn, "file_no_%d.vtk", k); 
```

# xml - FreeMarker XML 属性存在导致未定义

> ID：11437706
> 
> 赞同：0
> 
> 时间：2012-07-11T17:00:47.850
> 
> 标签：xml, undefined, freemarker

所以我刚刚开始尝试使用 FreeMarker，我遇到了这个问题。

当我使用提供的 XML 文件的在线教程并编写类似

```
${doc.book.chapter.para[0]} 
```

我得到了预期的输出。

但是，当我尝试使用自己的 XML 文档时，我得到一个错误 Expression.... is undefined。

我想我已经弄清楚这是因为我的 XML 有属性，而教程没有。

我得出了这个结论，因为如果我输入

```
${doc.MyElement[0]} 
```

我得到未定义的错误

但是，如果我从 XML 文档中删除 Attribute 并键入相同的内容

```
${doc.MyElement[0]} 
```

我得到一个不同的错误，与 MyElement 有孩子有关。

我显然预料到并理解了第二个错误，但为什么它只是通过删除属性而改变呢？当然这些应该被忽略吗？

有没有其他人有这个问题？解决方案是什么？

谢谢，

罗勒

PS。只是为了检查我的术语是否正确，当我说属性时，我的意思是

“书类型=小说”，而不仅仅是“书”

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-12T09:55:40.303

从注释中提供的示例来看，差异的原因是您添加/删除了`xmlns`在 XML 中具有特殊含义的属性。对于`doc.Data`匹配`Data`元素的查询，元素名称和 XML 命名空间都必须匹配。如果没有使用 XML 命名空间，`doc.Data`将匹配`Data`元素。但是如果将 XML 中的元素放入 XML 命名空间，`doc.Data`将匹配 0 个元素（因为您尚未在 FreeMarker 中设置默认命名空间），因此`doc.Data`是长度为 0 的序列，因此`[0]`不存在。有关更多信息，请参阅[http://freemarker.org/docs/xgui_imperative_learn.html上的 XML 命名空间。](http://freemarker.org/docs/xgui_imperative_learn.html)

# c# - 如何测试 EF 模型

> ID：11437708
> 
> 赞同：1
> 
> 时间：2012-07-11T17:00:52.970
> 
> 标签：c#, asp.net-mvc-3, testing

我试图弄清楚如何通过 TDD 编写实体框架代码优先代码。我发现这很难，因为我没有像过去使用 Ruby On Rails 那样的测试数据库。用一个例子可能更容易解释：

目前我有：

```
public interface IMyContext
{
    IDbSet<UserProfile> Users { get; set; }
} 
```

和

```
public class UserModel
{
    IMyContext myContext;

    UserModel(IMyContext myContext) 
    {
       this.myContext = myContext;
    }

    UserProfile GetUser(int id)
    {
       return myContext.Users.Where(u => u.id == id);
    }
} 
```

我不确定如何在没有运行数据库的情况下测试 UserModel 代码。我知道我可以模拟 MyContext - 但代码 myContext.Users.Where ... 可能涉及复杂的模拟？我的代码结构错了吗？如何在没有测试数据库的情况下为模型编写测试？还是我应该伪造上下文？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-11T17:06:57.923

将您的代码分解为核心组件，您将意识到您需要做的就是模拟上下文的`Users`属性。在那之后，Where实际上只是一个针对`IEnumerable`对象的静态方法

```
var users = myContext.Users;
var returnEnumerable = Enumerable.Where(users, u=>u.id == id);
return returnEnumerable 
```

因此，只需以这样一种方式模拟您的上下文，即当`.Users`被调用时，它会返回`IDbSet<UserProfile>`您制作的

# c# - 使用 iTextSharp 签署 PDF

> ID：11437709
> 
> 赞同：4
> 
> 时间：2012-07-11T17:01:04.797
> 
> 标签：c#, pdf, itextsharp, itext, digital-signature

我一直在使用 iTextSharp 在我的应用程序中签署 PDF，并且使用我改编自 iText 网站上的 java 示例的这段代码效果很好：

```
PdfStamper stp = PdfStamper.CreateSignature(reader, outmemstream, ControlChars.NullChar);
PdfSignatureAppearance sap = stp.SignatureAppearance;
sap.SetCrypto(prvKey, new X509Certificate[] {sigCert, Repository.CAcertificate}, null, pdfSignatureAppearance.SELF_SIGNED);
sap.Reason = "Just to proove I can sign!"; 
```

在 iText 的 5.2.1 版之前，这一直有效，但在最近的 5.3.0 版中，“SetCrypto”方法已被删除，我不能再签名了！关于它为什么被删除的任何想法以及在新版本上签署 pdf 的替代方法是什么？

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-11T17:45:20.457

PDF 签名已在 iText 5.3.0 中进行了重构，目前正在编写有关新签名过程的白皮书。最终版本应在 9 月发布。

您将[在此处](http://lowagie.com/node/371)找到更多信息。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-11T18:23:28.417

本书示例已经适应 iText 5.3.0：http://itextpdf.com/book/chapter.php? [id =12](http://itextpdf.com/book/chapter.php?id=12)

# java - VLCJ 不播放视频

> ID：11437710
> 
> 赞同：2
> 
> 时间：2012-07-11T17:01:07.493
> 
> 标签：java, netbeans, media-player, vlcj

请看下面的代码

```
import com.sun.jna.Native;
import uk.co.caprica.vlcj.binding.LibVlc;
import uk.co.caprica.vlcj.component.EmbeddedMediaPlayerComponent;
import uk.co.caprica.vlcj.runtime.RuntimeUtil;

import com.sun.jna.NativeLibrary;
import javax.swing.JFrame;
import javax.swing.SwingUtilities;

public class Tutorial2B {

  private final EmbeddedMediaPlayerComponent mediaPlayerComponent;

  public static void main(String[] args) {
    SwingUtilities.invokeLater(new Runnable() {
      @Override
      public void run() {
        new Tutorial2B();
      }
    });
  }

  private Tutorial2B() {

      NativeLibrary.addSearchPath(
      RuntimeUtil.getLibVlcLibraryName(), "c:/program files/videolan/vlc"
    );
    Native.loadLibrary(RuntimeUtil.getLibVlcLibraryName(), LibVlc.class);

    JFrame frame = new JFrame("vlcj Tutorial");

    mediaPlayerComponent = new EmbeddedMediaPlayerComponent();

    frame.setContentPane(mediaPlayerComponent);

    frame.setLocation(100, 100);
    frame.setSize(1050, 600);
    frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
    frame.setVisible(true);

    System.out.println("Running");

    mediaPlayerComponent.getMediaPlayer().playMedia("I:/YouTube (1).mp4");
  }
} 
```

此代码应该使用 VLCJ 播放媒体。但事实并非如此，它只是用空白窗口打开框架，没有视频，没有声音。有什么问题？请帮忙

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-13T00:37:08.190

根据@Yohan 的要求：尝试将正确版本的 VLCJ 库与正确版本的 libVLC 库一起使用。请参考[http://code.google.com/p/vlcj/wiki/WhichVersion](http://code.google.com/p/vlcj/wiki/WhichVersion)

# ruby-on-rails - 如何使用 Shopify gem 处理 Shopify API 连接？

> ID：11437716
> 
> 赞同：4
> 
> 时间：2012-07-11T17:01:14.677
> 
> 标签：ruby-on-rails, shopify

您好我在我的 Shopify 应用程序中使用 Shopify gem，我正在寻找有关如何处理与 Shopify 的 API 连接的建议。

我正在使用 webhook 和delayed_jobs，所以我需要一种在控制器外部打开连接的方法。

目前我将此方法添加到我的 Shop 模型中：

```
def connect_to_store
  session = ShopifyAPI::Session.new(self.url, self.access_token)
  session.valid?
  ShopifyAPI::Base.activate_session(session)
end 
```

所以我可以很容易地打开连接，例如：

```
Shop.find(1).connect_to_store
ShopifyAPI::Shop.current.name 
```

问题是，在我的 Product 模块中，我需要在几个方法中打开连接，但我最终多次调用 connect_to_store 方法，我担心打开到同一个商店的多个连接，而没有真正的需要。

有没有办法检查一个连接是否已经打开，只有在没有找到另一个连接时才打开一个新连接？

谢谢，奥古斯托

**- - - - - - - - - - 更新 - - - - - - - - - -**

我更好地解释了我的问题。

假设在我的产品模型中，我想查看给定产品的 compare_at_price 是否大于其价格，在这种情况下，我想向 Shopify 产品添加“销售”标签。

在我的产品模型中，我有：

```
class Product < ActiveRecord::Base
belongs_to :shop

def get_from_shopify
    self.shop.connect_to_store
    @shopify_p = ShopifyAPI::Product.find(self.shopify_id)
end

def add_tag(tag)
  @shopify_p = self.get_from_shopify

  shopify_p_tags = shopify_p.tags.split(",")
  shopify_p_tags.collect{|x| x.strip!}

  unless shopify_p_tags.include?(tag) 
    shopify_p_tags << tag
    shopify_p_tags.join(",")

    shopify_p.tags = shopify_p_tags
    shopify_p.save
  end
end

def on_sale?
  @shopify_p = self.get_from_shopify
  sale = false

  shopify_p.variants.each do |v|
    unless v.compare_at_price.nil?
      if v.compare_at_price > v.price
        sale = true
      end
    end
  end

  return sale
end

def update_sale_tag
  if self.on_sale?
    self.add_tag("sale")
  end
end

end 
```

我的问题是，如果我打电话：

```
p.update_sale_tag 
```

Shop.connect_to_store 被调用了几次，我在已经通过身份验证的情况下进行了多次身份验证。

你将如何重构这段代码？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-12T05:54:02.350

我通过将 Shopify 返回的 OAuth 令牌存储在商店中来解决此问题（无论如何您都应该这样做）。访问 API 所需的只是令牌，因此在您的商店模型中，您将拥有如下方法：

```
def shopify_api_path
  "https://#{Rails.configuration.shopify_api_key}:#{self.shopify_token}@#{self.shopify_domain}/admin"
end 
```

然后，如果您想在 Delayed Job 工作人员中访问特定商店的 API，您只需：

```
begin
  ShopifyAPI::Base.site = shop.shopify_api_path
  # Make whatever calls to the API that you want here.
  products = ShopifyAPI::Product.all
ensure
  ShopifyAPI::Base.site = nil
end 
```

希望这会有所帮助。我发现在控制器之外使用 Sessions 有点混乱，特别是因为这很好而且很容易。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-12T01:32:01.143

一旦您的应用程序通过了一次身份验证，您就可以保留该计算出的密码——这很好，直到为该特定商店卸载该应用程序。

换句话说，只需在商家首次安装应用程序时进行一次身份验证，将密码保存到数据库中，并在需要时加载。然后，您的`self.shop.connect_to_store`调用应该只设置 ShopifyAPI::Session 实例。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-11T17:35:20.267

我认为这里有一些误解。你知道你真的只是在使用 Active Resource 来完成你所有的 API 工作吗？因此，当您进行身份验证时，您可能正在对会话进行身份验证？一旦通过身份验证，无论您实际使用 API 多少次，您实际上都不会打开“新”连接。

如果您在一个会话中不断地进行身份验证以执行多个 API 调用，那么您就做错了。

如果您碰巧处于没有身份验证的代码块中（例如，您的应用程序可能处理来自 N 个商店的 WebHook）或延迟作业，只需将 myshopify_domain 字符串传递给这些代码块，在您的数据库中查找 Shop，找到身份验证令牌，身份验证（一次）......然后你就走了......这真的很简单。

# ormlite - 我们如何使用 ormlite 将表中的列转换为数组列表？

> ID：11437717
> 
> 赞同：0
> 
> 时间：2012-07-11T17:01:16.253
> 
> 标签：ormlite

我正在尝试在android上使用ormlite将整个列值转换为arrayList，这可能吗，直接api？使用原始结果我很接近，但不完全是：

```
GenericRawResults<String[]> rawResults =
     getHelper().getMyProcessDao().queryRaw(
         queryBuild.selectColumns("nid").prepareStatementString());
List<String[]> result = rawResults.getResults(); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-11T17:45:12.960

人力资源管理系统。我不确定这是你想要的。但是，完成您具体要求的一种方法是通过使用[`RawRowMapper`](http://ormlite.com/javadoc/ormlite-core/com/j256/ormlite/dao/RawRowMapper.html)可以传递给[ORMLite 的](http://ormlite.com/)DAO 方法的方法：[dao.queryRaw(String, Rowmapper, String...)](http://ormlite.com/javadoc/ormlite-core/com/j256/ormlite/dao/Dao.html#queryRaw%28java.lang.String,%20com.j256.ormlite.dao.RawRowMapper,%20java.lang.String...%29)。

像下面这样的东西应该可以工作：

```
RawRowMapper<Integer> mapper = new RawRowMapper<Integer>() {
     public Integer mapRow(String[] columnNames, String[] resultColumns) {
        // maybe you should verify that there _is_ only 1 column here
        // maybe you should handle the possibility of a bad number and throw
        return Integer.parseInt(resultColumns[0]);
     }
};
GenericRawResults<Integer> rawResults =
    getHelper().getMyProcessDao().queryRaw(
        queryBuild.selectColumns("nid").prepareStatementString(), mapper);
List<Integer> list = rawResults.getResults(); 
```

# jquery - 除非函数中有警报，否则无法隐藏 div

> ID：11437719
> 
> 赞同：0
> 
> 时间：2012-07-11T17:01:27.550
> 
> 标签：jquery, jquery-isotope

使用它来激活加载微调器。

删除警报后立即失败（div加载gif不会隐藏）：

```
$('#filters a').click(function() {
    var selector = $(this).attr('data-filter');
    $("#filtersLoad").show(); //  Show loading gif in div
    $container.isotope({
        filter: selector
    });
    alert("foo");
    if ($container.data('isotope').$filteredAtoms.length) {
        $("#filtersLoad").hide(); // Hide same div when filter and layout completes.
    }
    return false;
}); 
```

我敢肯定，有些愚蠢！也对其他方法开放。

谢谢你的帮助！

**加载器的 HTML：**

```
$("#filtersLoad, #postLoad").html('<img style=\"float:left; border:none;\" src=\"../../themes/images/ajax-loader2.gif\" width=\"54\" height=\"55\">');
}); 
```

**最新版本**这工作但不漂亮。Josh 的代码给了我一个良好的开端，但如果按顺序单击相同的按钮，我需要一些可以停止加载程序的东西（请参阅下面的评论）。

```
$('#filters a').click(function() {
    var selector = $(this).attr('data-filter');
    var lastClicked = $("#filtersLoad2").text();

if(lastClicked == selector) {

   return false;    

} 

   $container.isotope({
        filter: selector,
        onLayout: $("#filtersLoad").show() //  Show loading gif in div
    }, function(){
        $("#filtersLoad").hide();
        $("#filtersLoad2").text(selector);
    });

    return false;
}); 
```

我将`lastClicked`值放在一个 div 中，因为我在这里需要它，而且以后可能也会用到它。而且，现在使用同位素`onLayout`来显示加载 div。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-11T17:20:25.790

根据[Isotope 网站](http://isotope.metafizzy.co/docs/introduction.html)，您可以将回调函数指定为第二个参数，该函数将在动画完成后触发。您需要在此回调中隐藏加载图像。核实：

```
var currentFilter = '';

$('#filters a').click(function() {
    var selector = $(this).attr('data-filter');

    if (selector === currentFilter){
        return false;
    }
    currentFilter = selector;

    $("#filtersLoad").show(); //  Show loading gif in div
    $container.isotope({
        filter: selector
    }, function(){
        $("#filtersLoad").hide();
    });

    return false;
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-11T17:07:36.470

> 过滤器和布局完成时隐藏相同的 div。

也许我遗漏了一些东西，但是单个 if 语句如何*等待*布局完成？正如我所看到的，你显示，据`isotop`我所知，你是异步的，然后隐藏，所以它永远不会显示。

# hadoop - Hadoop运行时错误

> ID：11437724
> 
> 赞同：0
> 
> 时间：2012-07-11T17:02:03.180
> 
> 标签：hadoop, amazon-emr

我有一个与 hadoop 合作的学校项目，该项目将托管在亚马逊 EMR 中。

起初，我试图用简单的 wordcount 程序来理解它，它在 eclipse IDE 上运行良好。

但是，如果我尝试从命令行运行，我会遇到错误。

线程“main”中的异常 java.lang.NoClassDefFoundError: org/apache/hadoop/conf/Configuration at counter.WordCount.main(WordCount.java:56) 原因：java.lang.ClassNotFoundException: org.apache.hadoop.conf .在 java.security.AccessController.doPrivileged(Native Method) 的 java.net.URLClassLoader$1.run(URLClassLoader.java:202) 的配置。

您对这个错误有什么建议以及了解 hadoop 和 EMR 的任何资源吗？

谢谢，喵

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-11T17:03:47.500

不要从 IDE 或使用 java 命令运行您的作业。而是使用 hadoop 安装的 bin/ 目录中的 hadoop 脚本。

示例：如果您的 Job 的起点位于 mrjob.MyJob 类中，并且您有一个包含 Job 类的 jar (job.jar)，您应该像这样运行它：

```
path/to/bin/hadoop jar job.jar mrjob.MyJob inputFolder outputFolder 
```

# regex - 将模式从字符串之后移动到之前

> ID：11437725
> 
> 赞同：0
> 
> 时间：2012-07-11T17:02:07.640
> 
> 标签：regex, scripting, grep

我有一个庞大的代码库要整理，所以我想尽可能地自动化这个过程。我已经设法找出与我的任务相关的所有行，但我想自动化任务本身。

我要做的是将所有尾随增量更改为前导增量，如下例所示：

```
i++; 
```

变成

```
++i; 
```

我想会涉及到正则表达式，而我对这些很生疏。另外，哪种语言最适合编写脚本？我目前正在使用 Windows 7 x64，但与平台无关的解决方案会很酷。此外，如果您可以向我指出任何特定资源以了解有关此类问题的更多信息，那将是很棒的。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-11T17:08:16.743

这样就可以了...

```
s/([a-z0-9]+)\+\+/++$1/g 
```

但它是邪恶的，并且会破坏以下内容：

```
print "+++++++++Some heading++++++++++++\n"; 
```

更不用说 i++ 和 ++i 实际上做不同事情的情况了，你需要使用 i++。

我的建议（假设您实际上有一些真正的理由认为 i++ 在许多情况下是错误的）：

```
rgrep ++ * > fixme.txt 
```

然后`fixme.txt`在您最喜欢的文本编辑器中打开，并手动调查每次出现的情况，并随时将其从文本文件中删除。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-11T17:18:28.987

首先，请参阅[[13.15] 哪个更有效：i++ 还是 ++i？](http://yosefk.com/c++fqa/operator.html#fqa-13.15) 对于像 之类的原始类型`int`，效率没有任何提高。但是，假设您知道这一点，解决方案取决于您将使用的工具。如果您使用的是 Perl，即

```
perl -pi -w -e 's/search/replace/g;' *.cc 
```

...那么这个正则表达式将起作用：

```
s/\b([a-zA-Z]\w*)\+\+/\+\+$1/g 
```

我同意@Flimzy，尽管这看起来非常危险，不应该自动化。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-11T17:18:58.837

我以前用项目做过这个。*如果您的代码库位于存储库中，*这是一个好主意。方便的是，这允许您运行更改，然后将项目差异转储到您喜欢的文本编辑器中，以查看所有更改。快速浏览可以让您查看是否有任何意外的内容被编辑，并且您可以将其修复。

除了使用建议的正则表达式 Flimzy 之外，另一个选择是构建一个小型词法分析器/解析器来适应这个用例。你不是在寻找一个成熟的编译器，只是有足够的状态来评论和引用的东西。

[Lex&Yacc 第二。埃德。](http://shop.oreilly.com/product/9781565920002.do)有一个用于读取 c 代码的示例词法分析器，它非常小，展示了这个工具链的强大功能。我相信这些例子在其他地方也可以找到。如果它看起来很复杂，您可以使用简单的状态机和使用 perl 脚本构建的正则表达式系统来伪造它。

最后，如果您更愿意使用 python ，还可以查看[ply 。](http://www.dabeaz.com/ply/)

# iphone - 无法在 Xcode 中添加编译器标志？

> ID：11437726
> 
> 赞同：1
> 
> 时间：2012-07-11T17:02:09.463
> 
> 标签：iphone, xcode, automatic-ref-counting, compiler-flags

我正在尝试将几个文件标记为非 ARC。但是由于某种原因，在我的目标的构建阶段中的编译源下，它不会让我编辑它们。有谁知道发生了什么？当我双击编译器标志下的列时，包含文件名的行变为灰色。

有谁知道发生了什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-12T21:18:27.457

如果文件是您添加到项目的外部库的外部文件，您可能希望从项目中删除它们，重新添加它们并确保单击“添加到目标”-“您的应用程序名称”复选框。然后尝试在编译源代码中再次双击该行。

编辑：（回答）如果您使用的是视网膜 macbook pro，这可能是您的问题。我通过转到编译器标志来解决它，在我想编辑的那个上按回车键/双击，即使我看不到任何事情发生，也可以输入。然后按回车键将完成编辑该行的编译器标志（如果您进行多选，则为行）。

# c# - 存储角色能力信息的位置

> ID：11437730
> 
> 赞同：0
> 
> 时间：2012-07-11T17:02:43.233
> 
> 标签：c#

我目前正在使用统一 3D 制作 rpg，但遇到了障碍。我有一些玩家可以玩的职业，但我不知道在哪里存储他们可以使用的能力的信息。我有一个脚本来保存初始化后的信息，但我不知道将信息放在哪里，以便以后可以从中提取信息。

我曾考虑使用 XML 文件，但我意识到它们太容易被最终用户篡改。我也想过使用枚举，但在初始化时我不知道如何访问正确的枚举。有什么建议么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-11T17:19:52.107

您可以将信息嵌入到 exe 本身中。

您可以通过将资源添加到项目并将其`build`操作设置为`embedded resource`.

在 [写入](http://msdn.microsoft.com/en-us/library/system.security.cryptography.aes.aspx). **_** _ **_** _ `resource`_

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-11T17:10:46.020

XML 不是一个坏主意。您可以加密 XML 数据以防止篡改，或存储校验和以检测它。

# javascript - js 事件循环是否意味着您可以将全局变量用于临时暂存空间？

> ID：11437733
> 
> 赞同：0
> 
> 时间：2012-07-11T17:02:55.340
> 
> 标签：javascript, internals, event-loop

*** 免责声明：我并不是说这是一个好主意——事实上我会明确地说它不是——所以通过尝试理解事件循环对编码风格的确切含义来回答这个问题。**

我对 javascript-has-no-threads 口头禅的基本理解是，运行时将所有 javascript 视为短的“代码块”，它们被安排在一个接一个地执行，而在执行过程中不会从一个块转移。在这种情况下，一段代码（我不知道真正的术语）基本上是由于触发事件处理程序而运行的代码。

如果我的理解是正确的，那意味着如果您对全局变量的使用不跨越一个以上的“代码块”，那么从技术上讲，使用全局变量是 100% 安全的。

因此，例如，如果我有一个全局对象`window.workspace`，我可以让我的事件处理程序和任何从那里流出的代码——而不是将临时变量存储在闭包中——将它们全部存储在`window.workspace`. 只要我不假设工作区在调用事件处理程序（即使是同一个）之间保留任何状态，这应该是完全安全的。

这是准确的（虽然，再一次，不建议）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-11T17:12:12.087

JavaScript 事件机制的确切工作方式取决于运行 JavaScript 的容器。可以建立一个系统，其中事件处理程序总是在每次调用时传递某种持久状态对象。

但是，在 Node.js 等浏览器和系统中，您的问题的答案（就我的理解而言）是一个谨慎的“是”，或者可能是“是但”。

因为 JavaScript 有闭包，一种更简洁的方法来确保存在持久性（不像 DB 持久性；我的意思是跨事件处理程序的调用持久性），但私有存储要做这样的事情：

```
(function(global) {
  var persistentValue = 12;

  // set up an event handler
  global.whatever().handleEvent(function() {
    if (persistentValue > 12) { ... }
    else { persistentValue ++; }
  });

})( this ); 
```

这个想法是“persistentValue”变量在事件处理程序周围的闭包中保持“活动”，因此每次调用它都会看到该变量，因为它是最后一次运行。现在，当然，如果在同一个包装函数中创建了其他事件处理程序，那么它们也可以访问该变量。从这个意义上说，对于那些处理程序来说，它就像一个相对全局的变量。

# python - 输出文件中每行的字符数限制

> ID：11437749
> 
> 赞同：1
> 
> 时间：2012-07-11T17:03:48.623
> 
> 标签：python, word, limit

所以我的目标是尝试将输出文件中的字符限制为每行 6 个字符。这是我到目前为止所拥有的，但这不起作用：我得到的错误之一是无法连接 str 和 int

```
def charLimit(outputfile):

        limit =6
        char = 0
        with open(outputFile,'r+') as file:
           for char in char.len():
               if char != 6 :
                  char = file.read(char)
                  char += 1
              else:
                  file.write('\n')
                  char = 0 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-11T17:15:05.710

您可以使用[`textwrap`](http://docs.python.org/library/textwrap.html)模块：

```
import textwrap

with open(outputFile) as file:
     text = file.read()

with open(outputFile, 'w') as file:
     file.write(textwrap.fill(text, width=6)) 
```

注意：它不会在单词中间拆分文本。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-11T17:17:32.387

您不能同时读取/写入同一个文件，因为您每 6 个字符插入换行符。这些换行符将覆盖文件中的下一个字符。假设文件的内容如下：

```
123456789 
```

如果您只是在每 6 行之后向文件写入一个换行符，您的文件将如下所示：

```
123456
89 
```

注意换行符是如何覆盖的`"7"`。

如果您的文件相对较小（可能是几兆字节），您可以避免创建临时文件，只需将整个文件读入内存，将缓冲区位置设置回 0，然后覆盖它，如下所示：

```
with open(filename, 'r+') as f:
    raw = f.read()
    f.seek(0) #sets the buffer position back to the beginning of the file
    for i in xrange(0, len(raw), limit):
        line = raw[i:i+limit].rstrip('\n').replace('\n', ' ')
        f.write(line + '\n') 
```

但是，如果您的文件非常大，则不要将整个数据加载到内存中，而是写入临时文件，然后复制：

```
with open(filename, 'r') as infile, open('tmp.txt', 'w') as outfile:
    line = 
    while True:
        line = infile.read(limit)

        #if there is no more text to read from file, exit the loop
        if not line:
            break 

        outfile.write(line.rstrip('\n').replace('\n', ' ') + '\n')

import shutil

shutil.copyfile('tmp.txt', filename) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-11T17:22:59.143

您的错误消息（“无法连接字符串和 int”）来自该`read()` 方法返回字符串的事实。因此，当您在下一行添加`1`时`char`，您尝试使用`+`运算符将​​字符串与 int 组合，这是不可能的。

如果您想添加`1`数字，请使用内置`int()`方法，例如

```
char = int(char) + 1 
```

如果您想将其添加`1`为字符串，请使用

```
char += '1' 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-11T18:48:50.620

要获得每行 6 个字符（不包括换行符本身）而忽略单词边界：

```
import fileinput
from itertools import chain, izip_longest

limit = 6
lines = (line.rstrip('\n') for line in fileinput.input([outputFile], inplace=1))
chars = chain.from_iterable(lines) # all characters
for chunk in izip_longest(*[chars]*limit, fillvalue=''): # grouper recipe*
    print(''.join(chunk)) # write to outputFile
fileinput.close() # close outputFile, delete backup 
```

[*石斑鱼食谱](https://stackoverflow.com/questions/434287/what-is-the-most-pythonic-way-to-iterate-over-a-list-in-chunks)

该代码创建一个备份文件并将 stdout 重定向到`outputFile`，然后它逐行读取（懒惰）文件，剥离换行符并将这些行链接成单个字符流，然后`limit`使用 grouper 配方每行写入字符，最后关闭文件并删除备份。

这段代码不适合初学者（只是一个练习）。

# ios - UIView 带阴影的圆角

> ID：11437750
> 
> 赞同：17
> 
> 时间：2012-07-11T17:03:51.883
> 
> 标签：ios

我正在尝试显示带有圆角和阴影的 UIView。但问题是 maskToBounds 属性仅适用于任何一种情况。

如果 maskToBounds 为 YES，则显示圆角，如果为 NO，则显示阴影。这是实现，但它只显示没有阴影的圆角：

```
[self.view setBackgroundColor:[UIColor colorWithPatternImage:[UIImage imageNamed:@"blue_gradient.jpeg"]]];

    self.view.layer.masksToBounds = YES; 
    self.view.layer.opaque = NO; 
    self.view.layer.cornerRadius = 15.0f; 

    self.view.layer.shadowColor = [UIColor blackColor].CGColor;
    self.view.layer.shadowRadius = 5.0; 
    self.view.layer.shadowOffset = CGSizeMake(3.0, 3.0);
    self.view.layer.shadowOpacity = 0.9f; 
```

想法！

注意：我已经阅读并实现了以下线程中的代码，但它不起作用： [带有圆角和阴影的 UIView？](https://stackoverflow.com/questions/4754392/uiview-with-rounded-corners-and-drop-shadow)

**更新 1：**

我试图创建两个单独的视图。一个代表半径，一个代表阴影。问题是在半径视图顶部创建阴影，如下面的屏幕截图所示：

![在此处输入图像描述](../Images/b327f515f16e698ab4b631d65b37344b.png)

H

```
ere is the code: 

 self.view.layer.masksToBounds = YES; 
    self.view.layer.opaque = NO; 
    self.view.layer.cornerRadius = 15.0f; 
   // self.view.backgroundColor = [UIColor clearColor];
    self.view.backgroundColor = [UIColor colorWithPatternImage:[UIImage imageNamed:@"blue_gradient.jpeg"]];
//
    UIView *shadowView = [[UIView alloc] initWithFrame:CGRectMake(0, 0, 100, 100)];
    shadowView.layer.shadowColor = [UIColor blackColor].CGColor;
    shadowView.layer.shadowRadius = 2.0; 
    shadowView.backgroundColor = [UIColor clearColor];
    shadowView.layer.shadowOffset = CGSizeMake(3.0, 3.0);
    shadowView.layer.shadowOpacity = 0.9f;
    shadowView.layer.shadowPath = [UIBezierPath 
                                                                   bezierPathWithRect:CGRectMake(0, 0, 100, 100)].CGPath;

    [self.view addSubview:shadowView]; 
```

更新 2：

倒过来还是不行。不创建圆角。

```
UIView *roundCornerView = [[UIView alloc] initWithFrame:CGRectMake(0, 0, 100, 100)];
    roundCornerView.layer.masksToBounds = YES; 
    roundCornerView.layer.opaque = NO; 
    roundCornerView.layer.cornerRadius = 15.0f; 

    self.view.layer.shadowColor = [UIColor blackColor].CGColor;
    self.view.layer.shadowRadius = 2.0; 
    //self.view.backgroundColor = [UIColor clearColor];
    self.view.layer.shadowOffset = CGSizeMake(3.0, 3.0);
    self.view.layer.shadowOpacity = 0.9f;
    self.view.layer.shadowPath = [UIBezierPath 
                                                                   bezierPathWithRect:CGRectMake(0, 0, 100, 100)].CGPath;

    [self.view addSubview:roundCornerView]; 
```

**解决方案：**

```
 UIView *roundCornerView = [[UIView alloc] initWithFrame:CGRectMake(0, 0, 100, 100)];
    roundCornerView.layer.masksToBounds = YES; 
    roundCornerView.layer.opaque = NO; 
    roundCornerView.layer.cornerRadius = 15.0f; 

    roundCornerView.backgroundColor = [UIColor colorWithPatternImage:[UIImage imageNamed:@"blue_gradient.jpeg"]];

    self.view.layer.shadowColor = [UIColor blackColor].CGColor;
    self.view.layer.shadowRadius = 2.0; 
    self.view.backgroundColor = [UIColor clearColor];
    self.view.layer.shadowOffset = CGSizeMake(3.0, 3.0);
    self.view.layer.shadowOpacity = 0.9f;
    //self.view.layer.shadowPath = [UIBezierPath 
      //                                                             bezierPathWithRect:CGRectMake(0, 0, 100, 100)].CGPath;

    [self.view addSubview:roundCornerView]; 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-07-11T17:15:04.597

创建两个视图。一个带有阴影（并且不要忘记设置 shadowPath），您可以在其中添加带有`cornerRadius`和的子视图`maskToBounds`。

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2016-01-25T06:23:09.050

接受的答案不包含任何代码，因此这里是 Swift 中的一个示例（有关 OP 在 Obj-C 中的解决方案，请参阅原始问题）。

[![在此处输入图像描述](../Images/9ac3d182de92054c9e799b5575e9424b.png)](https://i.stack.imgur.com/wLbEG.png)

与公认的答案一样，此解决方案对阴影和角半径使用单独的视图。

```
// add the shadow to the base view
baseView.backgroundColor = UIColor.clear
baseView.layer.shadowColor = UIColor.black.cgColor
baseView.layer.shadowOffset = CGSize(width: 3, height: 3)
baseView.layer.shadowOpacity = 0.7
baseView.layer.shadowRadius = 4.0

// improve performance
baseView.layer.shadowPath = UIBezierPath(roundedRect: baseView.bounds, cornerRadius: 10).cgPath
baseView.layer.shouldRasterize = true
baseView.layer.rasterizationScale = UIScreen.main.scale

// add the border to subview
let borderView = UIView()
borderView.frame = baseView.bounds
borderView.layer.cornerRadius = 10
borderView.layer.borderColor = UIColor.black.cgColor
borderView.layer.borderWidth = 1.0
borderView.layer.masksToBounds = true
baseView.addSubview(borderView)

// add any other subcontent that you want clipped
let otherSubContent = UIImageView()
otherSubContent.image = UIImage(named: "lion")
otherSubContent.frame = borderView.bounds
borderView.addSubview(otherSubContent) 
```

我的完整答案在[这里](https://stackoverflow.com/a/34984063/3681880)。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2018-11-29T14:42:44.273

您可以通过应用以下内容在单个视图中执行此操作：

1.首先添加一个圆角半径

```
yourview.layer.cornerRadius = 5.0 
```

2.调用下面的函数

```
shadowToView(view : yourview)

func shadowToView(view : UIView){
    view.layer.shadowOffset = CGSize(width: 0, height: 3)
    view.layer.shadowOpacity = 0.6
    view.layer.shadowRadius = 3.0
    view.layer.shadowColor = UIColor.darkGray.cgColor
} 
```

# objective-c - 在 Mac 上编译 C、C++、Objective-C 和 Objective-C++

> ID：11437756
> 
> 赞同：0
> 
> 时间：2012-07-11T17:04:25.770
> 
> 标签：objective-c, gcc, compilation, g++

我使用 CPLUS_INCLUDE_PATH 环境变量来编译 .cpp 文件，它可以很好地找到 .h 文件。

但是编译 ObjC 或 ObjC++ 是不行的。

你知道好的一个变量。

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-11T17:17:46.967

从手册页：

> ```
>  CPATH
>    C_INCLUDE_PATH
>    CPLUS_INCLUDE_PATH
>    OBJC_INCLUDE_PATH
>        Each variable’s value is a list of directories separated by a
>        special character, much like PATH, in which to look for header
>        files.  The special character, "PATH_SEPARATOR", is target‐
>        dependent and determined at GCC build time.  For Microsoft Windows‐
>        based targets it is a semicolon, and for almost all other targets
>        it is a colon.
> 
>        CPATH specifies a list of directories to be searched as if
>        specified with −I, but after any paths given with −I options on the
>        command line.  This environment variable is used regardless of
>        which language is being preprocessed.
> 
>        The remaining environment variables apply only when preprocessing
>        the particular language indicated.  Each specifies a list of
>        directories to be searched as if specified with −isystem, but after
>        any paths given with −isystem options on the command line.
> 
>        In all these variables, an empty element instructs the compiler to
>        search its current working directory.  Empty elements can appear at
>        the beginning or end of a path.  For instance, if the value of
>        CPATH is ":/special/include", that has the same effect as
>        −I. −I/special/include. 
> ```

# asp.net - 如何使 URL 不以网页扩展名结尾？

> ID：11437757
> 
> 赞同：0
> 
> 时间：2012-07-11T17:04:29.543
> 
> 标签：asp.net

> **可能重复：**
> [基于 Web 表单的 Web 应用程序 URL 没有“.aspx”链接 stackoverflow.com](https://stackoverflow.com/questions/787961/web-forms-based-web-application-urls-without-the-aspx-linke-stackoverflow-com)

例如，如果您创建有关堆栈溢出的问题，则 URL 为：[https ://stackoverflow.com/questions/ask](https://stackoverflow.com/questions/ask)

这个 URL 是否真的映射到网页？怎么没有ask.aspx之类的扩展名？

我如何完成同样的事情？

# php - PHPExcel - 图表渲染和加载excel给出错误

> ID：11437758
> 
> 赞同：3
> 
> 时间：2012-07-11T17:04:32.823
> 
> 标签：php, phpexcel

```
require_once('PHPExcel-1.7.7/Classes/PHPExcel.php');

$inputFileName = 'RN Tracker.xlsx';

$inputFileType = PHPExcel_IOFactory::identify($inputFileName);

 $objReader = PHPExcel_IOFactory::createReader($inputFileType); 
```

如果我尝试关注

```
$objReader->setIncludeCharts(TRUE); 
```

在加载过程中，我收到以下错误消息：

```
Warning: PHPExcel_Reader_Excel2007::load(): Node no longer exists in /users/pravkum4/html/tracker/PHPExcel-1.7.7/Classes/PHPExcel/Reader/Excel2007.php on line 1518

Notice: Trying to get property of non-object in /users/pravkum4/html/tracker/PHPExcel-1.7.7/Classes/PHPExcel/Reader/Excel2007.php on line 1519

Fatal error: Call to a member function children() on a non-object in /users/pravkum4/html/tracker/PHPExcel-1.7.7/Classes/PHPExcel/Reader/Excel2007.php on line 1519 
```

我在这里犯了什么错误？我应该为图表添加一些额外的类吗？

图表选项是否默认包含在阅读器的加载方法中？图表计数为 0。 :(( 有时给出正确的图表计数，但渲染不起作用。

![在此处输入图像描述](../Images/14aef6f7bb802931c4dab8ed90bc3614.png)

还有一件事，这段代码是什么？不为我工作。有时我会丢失 jpgraph_pie.php。

```
PHPExcel_Settings::setChartRenderer(
    PHPExcel_Settings::CHART_RENDERER_JPGRAPH,
    dirname(__FILE__).'/../../libraries/Charts/jpgraph3.5.0b1/src'
); 
```

请提供图表渲染教程。非常感谢您提前。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-14T09:21:06.070

我还没有在 CodePlex 或 Github 上的 PHPExcel 站点上看到这个问题......并且要解决它，您需要上传一个演示问题的示例文件，以便我们可以确定哪些节点不再存在于Excel 数据

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-20T05:37:09.097

看看这个可能对你有帮助...

*   [http://phpexcel.codeplex.com/workitem/16](http://phpexcel.codeplex.com/workitem/16)

*   [http://phpexcel.codeplex.com/wikipage?title=示例](http://phpexcel.codeplex.com/wikipage?title=Examples)

# groovy - 使用 groovy 脚本输出作为另一个 groovy 脚本的输入

> ID：11437763
> 
> 赞同：4
> 
> 时间：2012-07-11T17:04:50.073
> 
> 标签：groovy

我会提前道歉，我是groovy的新手。我遇到的问题是我有 3 个执行不同功能的 groovy 脚本，我需要从我的主 groovy 脚本中调用它们，使用脚本 1 的输出作为脚本 2 的输入，使用脚本 2 的输出作为脚本 3 的输入。

我试过以下代码：

```
script = new GroovyShell(binding)
script.run(new File("script1.groovy"), "--p",  "$var" ) | script.run(new File("script2.groovy"), "<",  "$var" ) 
```

当我运行上面的代码时，第一个脚本运行成功，但第二个脚本根本没有运行。

脚本 1 使用代码将 int 作为参数`"--p", "$var"`。这在主脚本中成功运行，使用：`script.run(new File("script1.groovy"), "--p", "$var" )`- 脚本 1 的输出是一个 xml 文件。

当我`script.run(new File("script2.groovy"), "<", "$var" )`在主 groovy 脚本中自行运行时，没有任何反应并且系统挂起。

我可以使用从命令行运行脚本 2 `groovy script2.groovy < input_file`，它工作正常。

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-12T08:29:59.293

您不能将`<`作为参数传递给脚本，因为当您从命令行运行时，Shell 会处理重定向...

将脚本的输出重定向到其他脚本是出了名的困难，并且基本上依赖于您`System.out`在每个脚本的持续时间内进行更改（并希望 JVM 中没有其他任何内容会打印并弄乱您的数据）

最好使用如下的 java 进程：

鉴于这 3 个脚本：

### script1.groovy

```
// For each argument
args.each {
  // Wrap it in xml and write it out
  println "<woo>$it</woo>"
} 
```

### 线长.groovy

```
// read input
System.in.eachLine { line ->
  // Write out the number of chars in each line
  println line.length()
} 
```

### 漂亮的.groovy

```
// For each line print out a nice report
int index = 1
System.in.eachLine { line ->
  println "Line $index contains $line chars (including the <woo></woo> bit)"
  index++
} 
```

然后我们可以编写这样的代码来获得一个新的 groovy 进程来依次运行每个进程，并将输出相互传递（使用`or` [Process 上的重载运算符](http://groovy.codehaus.org/groovy-jdk/java/lang/Process.html#or%28java.lang.Process%29)）：

```
def s1 = 'groovy script1.groovy arg1 andarg2'.execute()
def s2 = 'groovy linelength.groovy'.execute()
def s3 = 'groovy pretty.groovy'.execute()

// pipe the output of process1 to process2, and the output
// of process2 to process3
s1 | s2 | s3

s3.waitForProcessOutput( System.out, System.err ) 
```

打印出来：

```
Line 1 contains 15 chars (including the <woo></woo> bit)
Line 2 contains 18 chars (including the <woo></woo> bit) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-10-13T23:50:47.193

```
//store standard I/O
PrintStream systemOut = System.out
InputStream systemIn = System.in
//Buffer for exchanging data between scripts
ByteArrayOutputStream buffer = new ByteArrayOutputStream()
PrintStream out = new PrintStream(buffer)
//Redirecting "out" of 1st stream to buffer
System.out = out
//RUN 1st script
evaluate("println 'hello'")
out.flush()
//Redirecting buffer to "in" of 2nd script
System.in = new ByteArrayInputStream(buffer.toByteArray())
//set standard "out"
System.out = systemOut
//RUN 2nd script
evaluate("println 'message from the first script: ' + new Scanner(System.in).next()")
//set standard "in"
System.in = systemIn 
```

结果是：'来自第一个脚本的消息：你好'

# wordpress - 从 Forge 主题源代码中手动提取主题？

> ID：11437768
> 
> 赞同：0
> 
> 时间：2012-07-11T15:56:48.450
> 
> 标签：wordpress, themes

例如，尚未发布的 Twenty Twelve 主题[可在 GitHub 上找到](https://github.com/thethemefoundry/twentytwelve)，但它是[Forge](https://github.com/thethemefoundry/forge)构建的。

为了使用正常的目录结构检索实际的主题，我必须安装 Ruby、RubyGems、Forge 和一些配置来配合它。

我不是开发人员，我只想使用主题。有没有办法[从构建](https://github.com/thethemefoundry/twentytwelve)中手动提取主题文件？

这就是我的想法：

1.  所有必需的模板、JS 和 CSS 文件都在该`build`目录中。

2.  [将 html5.js 添加](https://github.com/thethemefoundry/twentytwelve/blob/master/source/assets/javascripts/html5.js)到`javascripts`目录内的`build`目录中。然后将`javascripts`目录重命名为`js`（<= 将其目录结构与[WordPress.com SVN 上](https://wpcom-themes.svn.automattic.com/twentytwelve/)的目录结构进行比较）

3.  现在将`build`目录重命名为`twentytwelve`- 主题已准备就绪。

仅此而已，还是我错过了重点？

***PS：**我相信你们中的一些人会建议我直接从[WP.com SVN repo 下载主题。](https://wpcom-themes.svn.automattic.com/twentytwelve/)，但我不想这样做的原因是在 GitHub 上我可以轻松跟踪主题的更改。*

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-07T12:11:44.053

如果您真的想获得最新的、随时可用的主题版本，请使用 SVN。当它处于稳定形式时，它们会推送更新，因此您无需担心正在获取的版本中是否存在损坏的功能 - 或者在使用主题的 alpha 版本时出现任何奇怪的问题.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-11T17:01:45.097

虽然这会*起作用*，但您实际上应该：

1.  按照预期的方式使用 GitHub 存储库（克隆它，并使用 Forge 构建主题）。
2.  等待主题真正发布。

虽然您可能能够从`/build`目录中按原样提取主题，但没有真正的方法可以“跟踪对主题的更改”，因为更改将在`/source`目录中进行。不能保证提交者会在推送之前构建主题（这是`/build`当前目录保持同步的方式。

* * *

# 更新

如果您一直在关注积极的开发，那么 212 刚刚为即将发布的 3.5 版（2012 年末）发布到 WordPress 主干中：

> ## 变更[集 21261](http://core.trac.wordpress.org/changeset/21261)
> 
> **时间戳：** 07/12/12 04:20:46（14 小时前）
> **作者：** nacin
> **消息：** WordPress 的 21 岁。
> 
> 道具drawstrojny，lancewillett。
> 
> 还有道具 corvannoorloos、jeffsebring、kobenland、iandstewart、mfields、mtdesign、op12no2、philiparthurmoore、sixhours、mamaduka。

因此，与其尝试通过 GitHub 提取主题，不如使用 Subversion 来检查 WordPress 主干并查看`/wp-content/themes/twentytwelve`目录。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-11T20:39:07.310

您建议的方式并不容易。当然并不比安装 SVN、将其指向 repo 并在那里跟踪更改（你知道，当它们实际完成时）更容易。它仍然是版本控制的，仍然很容易看到差异，并且仍然是最新版本。另外，请注意，在 github 中，主题文件确实指向`/javascripts`，因此，如果您要重命名目录，则还必须在文件本身中手动捕获它。

如果您真的想获得最新的、随时可用的主题版本，请使用 SVN。当它处于稳定形式时，它们会推送更新，因此您无需担心正在获取的版本中是否存在损坏的功能 - 或者在使用主题的 alpha 版本时出现任何奇怪的问题.

# c# - 硬编码下拉列表（用于创建和更新数据）

> ID：11437770
> 
> 赞同：0
> 
> 时间：2012-07-11T17:05:16.603
> 
> 标签：c#, asp.net-mvc-3, entity-framework, html-helper

我有这个代码：

当您编辑 UserProfile（使用相应的 CRUD（控制器 + 视图））时，您将看到 SexType 的下拉列表（您也可以使用其他一些 CRUD 进行编辑），并将对应于 SexType 表。

```
public class UserProfile{
public int Id { get; set; }
public string Name { get; set; }
public string Surname { get; set; }
public int SexTypeId { get; set; }
public virtual SexType SexType { get; set; }

public class SexType
{
    public int SexTypeId { get; set; }
    public string SexTypeDescription { get; set; }
    public virtual ICollection<UserProfile> UserProfiles { get; set; }
}

 public class UserProfileDBContext : DbContext //This creates the database according to the model
{
    public DbSet<UserProfile> UserProfiles { get; set; }
    public DbSet<SexType> SexType { get; set; }
} 
```

我想要什么：我想要一个更简单的东西，但我做不到：

我希望在我的模型（或控制器）上对性别类型进行硬编码（男性/女性）。不在数据库中。我不想要任何数据库，而只是在每次创建或更新“UserProfile”上的记录时使用“男性/女性”选项可视化一个下拉列表。

你能帮我解决这个问题吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-11T17:50:42.787

您可以在您的视图中执行此操作：

```
@Html.DropDownList("SexType", 
    new[] { 
        new SelectListItem() { Text="Male", Value = "M" },  
        new SelectListItem() { Text="Female", Value = "F" }
    }
); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-11T17:57:08.927

向 ViewModel 添加一个新属性以`UserProfile`保存 SexTypes 列表

```
public class UserProfile{
  public int Id { get; set; }
  public string Name { get; set; }
  public string Surname { get; set; }
  public int SexTypeId { get; set; }
  public IEnumerable<SelectListItem> SexTypes { get; set; }
} 
```

在你的`GET`Action 方法中，你可以填充它并返回到 View

```
public ActionResult Create()
{
  var model=new UserProfile();
  model.SexTypes = new[]
  {
     new SelectListItem { Value = "M", Text = "Male" },
     new SelectListItem { Value = "F", Text = "FeMale" },         
  }; 
  return View(model);
} 
```

`UserProfile`并且在您与ViewModel紧密绑定的视图中，

```
@Html.DropDownListFor(x => x.SexTypeId, new SelectList(Model.SexTypes,
                                                  "Value","Text"), "Select..") 
```

# mpeg-2 - 如何更改 mpeg-2 编解码器中的块大小？

> ID：11437771
> 
> 赞同：0
> 
> 时间：2012-07-11T17:05:16.630
> 
> 标签：mpeg-2

MPEG-2 编码器和解码器中块的默认大小为 16*16。我打算编写一个运动估计算法来查看其他块大小对输出的影响，但我不知道如何更改块的大小。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-28T05:59:44.017

好吧，你必须在编码器的运动估计部分这样做，不是吗？不是一项微不足道的任务。你也可以用不是 16*16 的块来做 ME，但你必须编码 16*16 以获得标准的 mpeg2。否则，您必须编写自己的解码器来解码您的流。当您使用它时，如果我没记错的话，HEVC 已经引入了非 16*16 块。因此，您可能只想使用他们的参考编码器并启用和禁用 16*16 块并检查差异。

# sql - xp_cmdshell 代理帐户自动禁用

> ID：11437774
> 
> 赞同：1
> 
> 时间：2012-07-11T17:05:22.897
> 
> 标签：sql, sql-server, sql-server-2008, database-administration, xp-cmdshell

当我想执行`xp_cmdshell`sp is sql server 时，它给了我错误，我没有运行权限`xp_cmdshell`。当我在实例的属性窗口中签入安全选项卡时，设置了`service Proxy Account`部分 `enable service account Proxy`复选框。取消选中此复选框并再次选中它并设置用户名和密码后，我可以执行xp_cmdshell。

我的问题是为什么会发生这种情况......？什么操作可以禁用服务帐户代理。是正常行为你的想法是什么。它发生在最近，并且发生了多次。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-27T10:00:56.153

这种情况是经常发生还是只发生过一次？可能是某些配置更改最初没有发生。

# android - 更新 Android SDK 工具后 Eclipse 中的 xml 错误

> ID：11437776
> 
> 赞同：5
> 
> 时间：2012-07-11T17:05:29.607
> 
> 标签：android, xml, eclipse

这是我在布局 XML 文件中遇到的错误：

```
error!
NotFoundException: null
Exception details are logged in Window > Show View > Error Log
The following classes could not be found:
- TextView (Change to android.widget.TextView, Fix Build Path, Edit XML) 
```

这是在 Eclipse 中更新我的 SDK 工具后发生的。但是，我仍然可以编译我的代码，只是看不到布局的图形部分。

最近我也加了RootTools库，难道也是这个原因？

谢谢！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-08T14:10:28.620

我有同样的问题。事实证明这是一件非常奇怪的事情。在我的 strings.xml 文件中，我有一行

```
<string name="email_seperator_char">\@</string> 
```

这导致了问题。即使我使用转义字符进行 @ 符号预览在 SDK 更新后也不起作用。

解决方案：我只是在它前面添加了一个空间，瞧，它起作用了。

```
<string name="email_seperator_char"> \@</string> 
```

我知道这很奇怪，并且某些应用程序前面有一个空间可能是不可接受的。但这对我的应用程序来说没问题。希望这可以帮助。

在设计模式下，在图形布局中，您有一个新图标，（android 图标），单击并选择最少 8 个。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-16T11:29:59.833

我不确定它对你的情况有帮助，但我发现我的问题是什么。为了支持较旧的 Android 设备，我将项目构建目标从之前的 API 级别 8 (Android 2.2) 降低到 API 级别 7 (Android 2.1)。

2.1 布局渲染器可能存在问题，它一直在我的 TextView's property 上崩溃`android:textAppearance="?android:attr/textAppearanceMedium"`。即使我将其删除，渲染仍在工作，但外观很奇怪（灰色背景，黑色小文本）。切换回 API 级别会立即修复布局编辑器。

要更改它，请转到您的**项目属性**，选择右侧的**Android ，然后在****Project Build Target**下勾选所需 API 级别旁边的框。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-17T15:43:48.967

我一直有类似的问题。在阅读了这些帖子之后，我发现 Android 4.0.3 的布局渲染器中可能存在一个错误。即使项目的所有部分都设置为 Android 4.0.3 和 SDK 15，也会列出错误消息（ROOT 异常详细信息记录在 Window > Show View > Error Log 中）。

如果我将布局渲染器设置为 Android 2.2 并将其他所有设置为 Android 4.0.3、SDK 15，那么一切似乎都可以正常工作。

我希望这很有用。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-19T10:47:30.013

几分钟前我遇到了同样的问题，尝试降低 API 级别，在布局编辑器屏幕中按 andorid 绿色图标，然后在下拉菜单中选择 API 7。我认为它会解决的。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-07-23T16:17:39.737

**你的 TextView 有问题**

有一次我写了这个导致问题

```
android:textAppearance="@android:attr/textAppearanceLarge" 
```

Eclipse 无法判断这是错误的，但设计视图崩溃了，当我意识到这一点时，我将 @ 更改为 ?

```
android:textAppearance="?android:attr/textAppearanceLarge" 
```

然后一切恢复正常

# cuda - OpenCL 中是否有任何扭曲投票功能？

> ID：11437777
> 
> 赞同：4
> 
> 时间：2012-07-11T17:05:34.057
> 
> 标签：cuda, opencl

在 CUDA 中，有、 、`__ballot()`和`__any()`一堆lanemask 函数可以在warp 内的所有lane（通常大小为32）上执行warp 投票操作。我想知道 OpenCL 中是否有任何此类功能可以在一个波前执行相同的操作。如果没有这样的函数，我可能需要自己将它们实现为内联函数以在我的项目中使用。`__all()``__popc()`

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-11T23:36:30.850

根据[OpenCL v. 1.1 规范](http://www.khronos.org/registry/cl/specs/opencl-1.1.pdf)，第 6.11 节“内置函数”，我相信答案是否定的。

但是在 NVIDIA GPU 上，您可能可以使用 inline PTX 来实现这些东西（或者至少[这个博主能够使用 inline PTX](http://www.whatmannerofburgeristhis.com/blog/gcn-opencl-memory-fences-update-and-inline-ptx/)）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2016-02-29T00:51:01.733

实际上检查 OpenCL [subgroups](https://www.khronos.org/registry/cl/sdk/2.0/docs/man/xhtml/cl_khr_subgroups.html)。他们定义了一些交叉车道功能，例如`sub_group_all()`和`sub_group_any()`以及其他一些有趣的东西。

子群是一个相对较新的生物，我不确定谁都支持它。英特尔 GPU 实现（实际上是扩展）有一些更有趣的[改组函数](https://www.khronos.org/registry/cl/extensions/intel/cl_intel_subgroups.txt)来置换通道（在寄存器文件内）以及进行显式块写入和读取。我敢打赌 AMD 也支持子组，但我不确定 NVidia。

# jquery - 使用复选框（jQuery）构建一个跨类别过滤器以按类名显示 div

> ID：11437782
> 
> 赞同：1
> 
> 时间：2012-07-11T17:06:23.590
> 
> 标签：jquery, class, checkbox, filtering

stackoverflow 启发了我使用复选框构建“类别过滤器”，但我坚持了一半。我想实现以下目标：三个类别（品牌、类别、颜色）由表内的三个“复选框列”表示：

```
<table id="filters" width="620px">
  <tr>
    <td width="144" align="left" valign="top">
    <input type="checkbox" value="Audi" id="filter-Audi" >Audi<br>
    <input type="checkbox" value="BMW" id="filter-BMW" >BMW<br>
    </td>
    <td width="233" align="left" valign="top">
    <input type="checkbox"  value="Compact" id="filter-Compact" >Compact<br>
    <input type="checkbox"  value="Limousine" id="filter-Limousine" >Limousine<br>
    <input type="checkbox"  value="SUV" id="filter-SUV" >SUV<br>
    <input type="checkbox"  value="Sport" id="filter-Sport" >Sport<br>
    </td>
    <td width="233" align="left" valign="top">
    <input type="checkbox"  value="silver" id="filter-silver" >silver<br>
    <input type="checkbox"  value="blue" id="filter-blue" >blue<br>
    <input type="checkbox"  value="red" id="filter-red" >red<br>
    <input type="checkbox"  value="white" id="filter-white" >white<br>
    </td>
  </tr>
</table> 
```

根据选中的复选框，我想显示包含与选中的复选框 ID 相同的类名的某些 div。这已经在起作用了。我现在需要的是一种为每个类别制定“排除”过滤器的方法。

意味着，如果用户检查以下内容：

Audi & Limousine & red – 只有包含这些类别的 div 才会出现。在我的示例中，所有包含 Audi & Limousine & red apper 的 div 但当然也会出现 BMW div（这是错误的）。

换句话说：我需要一个额外的“过滤方法”，其中包括按每个类别分层的类：即：如果用户选中奥迪，第二和第三类别的复选框应该只引用包含奥迪的 div 类。如果用户选中 Audi & Compact & white，则出现的 div 至少必须包含所有三个类。

到目前为止的 jQuery 部分（在 stackoverflow 上找到了这个）：

```
$("#filters :checkbox").click(function() {
    var re = new RegExp($("#filters :checkbox:checked").map(function() {
        return this.value;
    }).get().join("|"));
    $.each($('.filterme'), function() {
        var $this = $(this);
        $this[re.source != "" && re.test($this.attr("class")) ? "slideDown" : "slideUp"]();
    });
}); 
```

我将现有代码推送到 jsfiddle：

[http://jsfiddle.net/ar3PY/](http://jsfiddle.net/ar3PY/)

如果有人可以在这里提供帮助，我会很高兴！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-11T17:14:38.990

试试这个：更改您的 HTML 以包含每个类别的类别（品牌、类别、颜色）

```
<table id="filters" width="620px">
  <tr>
    <td width="144" align="left" valign="top">
    <input type="checkbox" class="brand" value="Audi" id="filter-Audi" >Audi<br>
    <input type="checkbox" class="brand" value="BMW" id="filter-BMW" >BMW<br>
    </td>
    <td width="233" align="left" valign="top">
    <input type="checkbox" class="class" value="Compact" id="filter-Compact" >Compact<br>
    <input type="checkbox" class="class" value="Limousine" id="filter-Limousine" >Limousine<br>
    <input type="checkbox" class="class" value="SUV" id="filter-SUV" >SUV<br>
    <input type="checkbox" class="class" value="Sport" id="filter-Sport" >Sport<br>
    </td>
    <td width="233" align="left" valign="top">
    <input type="checkbox" class="color"  value="silver" id="filter-silver" >silver<br>
    <input type="checkbox" class="color"  value="blue" id="filter-blue" >blue<br>
    <input type="checkbox" class="color" value="red" id="filter-red" >red<br>
    <input type="checkbox" class="color" value="white" id="filter-white" >white<br>
    </td>
  </tr>
</table> 
```

将您的 java 脚本代码更改为如下所示：

```
var getFilter = function(category) {
    var filter = $("#filters ." + category + ":checked").map(function() {
        return "." + this.value;
    }).get().join(",");
    filter = (filter.length > 0) ? filter : "*";
    console.log(filter);
    return filter;
}

$("#filters :checkbox").click(function() {
    var all = $(".filterme");
    var tgts = all.filter(getFilter("brand")).filter(getFilter("class")).filter(getFilter("color"));
    all.not(tgts).slideUp();
    tgts.slideDown();
}); 
```

JSFiddle：http: [//jsfiddle.net/ar3PY/2/](http://jsfiddle.net/ar3PY/2/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-11T18:30:57.017

我对您的 html 进行了一些更改并得出了结果。我所做的更改是向 td 标签添加一个类，如下所示。

```
<table id="filters" width="620px">
  <tr>
    <td  class="car" width="144" align="left" valign="top">
    <input type="checkbox" value="Audi" id="filter-Audi" >Audi<br>
    <input type="checkbox" value="BMW" id="filter-BMW" >BMW<br>
    </td>
    <td  class="type" width="233" align="left" valign="top">
    <input type="checkbox"  value="Compact" id="filter-Compact" >Compact<br>
    <input type="checkbox"  value="Limousine" id="filter-Limousine" >Limousine<br>
    <input type="checkbox"  value="SUV" id="filter-SUV" >SUV<br>
    <input type="checkbox"  value="Sport" id="filter-Sport" >Sport<br>
    </td>
    <td  class="color" width="233" align="left" valign="top">
    <input type="checkbox"  value="silver" id="filter-silver" >silver<br>
    <input type="checkbox"  value="blue" id="filter-blue" >blue<br>
    <input type="checkbox"  value="red" id="filter-red" >red<br>
    <input type="checkbox"  value="white" id="filter-white" >white<br>
    </td>
  </tr>
</table> 
```

接下来，我使用了 Chandu 答案的修改版本，按以下方式分别按类别过滤掉。

```
$("#filters :checkbox").click(function () {
            var filterCarString = $("#filters :checkbox:checked").length == 0 ? "*" :
            $("#filters .car :checkbox:checked").length == 0 ? "*" :
                   $("#filters .car :checkbox:checked").map(function () {
                       return "." + this.value;
                   }).get().join(",.");

            var filterTypeString = $("#filters :checkbox:checked").length == 0 ? "*" :
                    $("#filters .type :checkbox:checked").length == 0 ? "*" :
                   $("#filters .type :checkbox:checked").map(function () {
                       return "." + this.value;
                   }).get().join(",.");

            var filterColorString = $("#filters :checkbox:checked").length == 0 ? "*" :
                  $("#filters .color :checkbox:checked").length == 0 ? "*" :
                   $("#filters .color :checkbox:checked").map(function () {
                       return "." + this.value;
                   }).get().join(",.");

            var filterTgts = $('.filterme');
            var elems = filterTgts.filter(filterCarString);
                elems = elems.filter(filterTypeString);
                elems = elems.filter(filterColorString).slideDown();

            filterTgts.not(elems).slideUp();
 }); 
```

我希望这就是你要找的。

# jquery - jQuery中的CSS3元素宽度

> ID：11437785
> 
> 赞同：-1
> 
> 时间：2012-07-11T17:06:29.807
> 
> 标签：jquery, css

我在将 div 放置在 jQuery UI 选项卡式 div 中时遇到了一个小问题，我找不到一个合乎逻辑的解决方案（我有一个不合逻辑的解决方案并且它有效）。

问题是这个

1.  我有一个带有三个选项卡的 jQuery 选项卡视图（称为容器）
2.  最顶部的选项卡有三个面板 (div) - 称它们为工具栏、属性和编辑框
3.  所有三个都向左浮动，第三个具有 clear:right 设置
4.  这三个都有一个 3px 的标记和一个 1px 的边框
5.  这三个都有 box-sizing:border-box
6.  前两个分别是 40px 和 200px 宽。
7.  第三个面板的宽度，editbox 在 CSS 中设置为 100px
8.  然后我尝试使用 jQuery 来更改该宽度以填充可用区域。计算是这样的

我不明白 - 我认为指定边框框可以简单地处理所有事情，我再也不需要担心填充和边框了。显然，我的理解是错误的。我非常感谢任何帮助。

```
 var w = $('#container').width() - $('#toolbar').width - $('#properties').width;

//Now if I assign that to the editbox

$('#editbox').css('width',w + 'px') //I find that editbox flows down below the other two.  In order for things to work I have to deduct 24 fom the width calculation above.  i.e.

w -= 3x2*padding (2px) + 3*1*border(1 px) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-11T17:46:13.363

尝试使用该`outerWidth()`函数而不是`width()`. 来自 jQuery 的文档`outerWidth`：

> 返回元素的宽度，以及左右填充、边框和可选的边距，以像素为单位。

查看更多：[http ://api.jquery.com/outerWidth/](http://api.jquery.com/outerWidth/)

# php - 使用 Javascript/PHP 的自定义产品配置器

> ID：11437788
> 
> 赞同：3
> 
> 时间：2012-07-11T17:06:41.960
> 
> 标签：php, jquery, prototypejs, shopping-cart

我知道这是一个非常广泛的问题，但出于学习目的，我正在尝试创建一个类似于[https://knockaround.com/shop/sunglasses/custom/custom-premium](https://knockaround.com/shop/sunglasses/custom/custom-premium)的网站。我无法找到有关如何完成此操作的教程。我确定我可以创建下拉菜单来切换产品的图像，但是在尝试将合并的图像传递到购物车时我应该从哪里开始呢？另外，我很确定该网站使用 Magento 和 Prototype JS。如果有人能让我朝着正确的方向开始，那就太好了。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-08-20T17:24:13.853

像这个框架（[http://fancyproductdesigner.com/](http://fancyproductdesigner.com/)）一样，它必须合并服务器上的图像并创建一个与购物车条目一起保存的单个图像。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-11T17:34:47.837

您不会将“合并图像”传递给购物车，而是传递配置。如果您查看页面上的哈希，它会根据设置而变化：#custom/3/6/13/259 所以您传递的购物车是“3/6/13/259”

# ruby-on-rails - rails authlogic gem - 在 UserSessionsController 中销毁操作错误

> ID：11437790
> 
> 赞同：1
> 
> 时间：2012-07-11T17:06:48.000
> 
> 标签：ruby-on-rails, authlogic

我正在使用 Authlogic gem 作为 rails 应用程序的身份验证系统。这是我在 UserSessionsController 中的代码

```
class UserSessionsController < ApplicationController

  layout 'auth_layout'

  def new
    @user_session = UserSession.new
  end

  def create
    @user_session = UserSession.new(params[:user_session])
    if @user_session.save
      flash[:notice] = "Login successful!"
    else
      render :action => :new
    end
 end

 def destroy
   current_user_session.destroy
   redirect_to new_user_session_url
 end
end 
```

虽然每次我在地址栏输入 /user_sessions/destroy 时，都会收到以下错误：

```
Unknown action

The action 'show' could not be found for UserSessionsController 
```

有谁知道如何解决这个问题？谢谢 ：）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-11T17:20:52.373

将以下内容添加到您的`config/routes.rb`

```
match "user_sessions/destroy" => "user_sessions#destroy", via: [:get] 
```

假设您将`user_session`路由定义为 a `resource`，`config/routes.rb`则`destroy`操作的路由需要 HTTP 方法 be `DELETE`to `/user_sessions`，通过浏览器的地址栏向*（不存在的）*`GET`路由发出请求失败。 *`/user_sessions/destroy`*

 *上述路由的添加映射了`/user_sessions/destroy`您尝试访问的路径以加载`UserSessions`控制器的`destroy`方法而不是*（不存在的）* 方法，并作为参数`show`传递。`"destroy"``:id`*

# c# - 可以通过 C# 中的数组调用方法吗？

> ID：11437791
> 
> 赞同：0
> 
> 时间：2012-07-11T17:06:50.403
> 
> 标签：c#, arrays, methods, delegates

我有一个程序需要根据我希望它与之交谈的内容运行不同的方法，并且我想知道是否有一种方法可以将某种方法指针或类似的东西存储在数组中。所以我想要一个数组，其中每个元素都是这样的：

[布尔值：Do_this?] [Function_pointer] [传递给函数的数据]

所以基本上，我可以把它放到一个 for 循环中，而不是单独调用每个函数。另一个代码块将填写是否运行此函数的布尔值，然后如果布尔值为真，我的 for 循环将通过并使用其适当的数据运行该函数。

我知道委托类似于函数指针，但如果这是这里的答案，我不完全确定我将如何构造我想要构造的东西。

这在 C# 中可能吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-11T17:10:53.493

当然，虽然要这样做，但您需要所有方法都具有相同的签名：

假设您有两种方法：

```
public int Moop(string s){ return 1; }
public int Moop2(string s){ return 2; } 
```

你可以这样做：

```
var funcs = new Func<string, int>[]{ Moop, Moop2 }; 
```

并致电：

```
var val = funcs[0]("hello"); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-11T17:19:11.893

您可以声明要保存在委托中的特定对象类型、指示是否执行此操作或现在执行此操作的标志以及数据。请注意，您所描述的内容与*事件*非常相似，因为它们也是由回调和一些事件数据定义的。

骨架模型看起来像这样，假设您要调用的所有方法都具有相同的签名（如果您需要使用反射来获得一大堆不同的签名，您可以解决这个问题）：

```
// This reflects the signature of the methods you want to call
delegate void theFunction(ActionData data);

class ActionData
{
    // put whatever data you would want to pass
    // to the functions in this wrapper
}

class Action
{
    public Action(theFunction action, ActionData data, bool doIt)
    {
        this.action = action;
        this.data = data;
        this.doIt = doIt;
    }

    public bool doIt
    {
        get;
        set;
    }

    public ActionData data
    {
        get;
        set;
    }

    public theFunction action
    {
        get;
        set;
    }

    public void run()
    {
        if (doIt)
            action(data);
    }
} 
```

一个常规的用例看起来像这样：

```
class Program
{
    static void someMethod(ActionData data)
    {
        Console.WriteLine("SUP");
    }

    static void Main(string[] args)
    {
        Action[] actions = new Action[] {
            new Action(Program.someMethod, new ActionData(), true)
        };

        foreach(Action a in actions) 
            a.run();
    }
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-11T17:10:26.657

是的你可以。

如果您的所有函数共享相同的签名，您可能希望将委托存储在您的集合中，否则我会选择`System.Reflection.MethodInfo`，您可以稍后通过调用`Invoke`方法来使用它。参数将存储为对象数组 - 这是`Invoke`预期的。

如果使用反射太慢，您可以使用`Reflection.Emit`在运行时生成动态方法。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-11T17:12:17.187

我只会创建一个`List<Action>`. Action 是一个不带参数且不返回结果的委托。您可以使用 currying 和 lambda，以便实际操作可以调用具有参数的方法。如果您实际上不想运行它，请首先不要将其添加到列表中（或者添加一个我猜什么都不做的操作）。

要添加一个项目，它可能看起来像：

```
list.Add(() => someobject.someMethod(firstArgument, secondArgument));
list.Add(() => anotherObject.anotherMethod(oneArgument)); 
```

然后，您可以在需要时运行所有操作：

```
foreach(Action action in list)
{
  action();
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-11T17:10:41.840

这正是您使用委托的目的。委托或多或少是经过类型检查的函数指针。您可以创建一些委托并将它们放入一个数组中。

```
Func<int, int> [] funcs = new Func<int,int>[] { x => 2 * x, x => x * x };
foreach(var fn in funcs) 
{
    Console.WriteLine(fn(3));
    Console.WriteLine(fn(8));
} 
```

# css - 以徽标为中心的响应式导航菜单

> ID：11437793
> 
> 赞同：0
> 
> 时间：2012-07-11T17:06:57.483
> 
> 标签：css, responsive-design

我已经以老式的方式找到了解决这个问题的方法，但是我有一个响应式主题，我正在为个人博客进行调整，并想弄清楚是否有可能有一个带有居中图像的导航菜单，并且菜单项浮动到无需使用两个单独的导航菜单。

![演示](../Images/342c60e19aa5dfd6df6761a0ffc037c3.png)

这就是我现在所拥有的，所有 li 项目都在一个菜单中。我仍在试图弄清楚如何将 UL 置于这种响应式设计中并使其相应扩展。我已经看到了如何使用 2 个导航菜单执行此操作的示例，但想知道这是否可以通过一个菜单上的响应式设计来实现，因为我找不到好的示例或教程。

我确实有网站的临时版本在这里[查看它](http://walks.hotstickybun.com)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-11T17:18:57.050

如果你只是把居中的图像放在 ul 的中间呢？给它自己的 li 类，并相应地设置它的样式。

有点像这样[http://jsfiddle.net/qWYGR/](http://jsfiddle.net/qWYGR/)

CSS 没有出现在我的 jsfiddle 中。添加这个

```
​ul {
 display:inline;
 list-style-type:none;        
}
li{
 float:left;   
}
li a {
 float:left;
padding:5px;    
    height:35px;
    width:50px;
    background:red;
}
.logo img {
 height:100%;
} 
```

​</p>

# gnuplot - 自定义 GnuPlot 网格线

> ID：11437798
> 
> 赞同：2
> 
> 时间：2012-07-11T17:07:10.123
> 
> 标签：gnuplot

这一切都在主题中。

如何在 Gnuplot (v4.6) 图表中自定义特定的网格线？

任何提示表示赞赏。

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-07-11T17:27:53.853

您想自定义网格中每条线的外观吗？如果是这样，您可以使用创建和使用线条样式的所有正常机制：

```
set style line 100 lt 1 lc rgb "red" lw 2
set grid ls 100
plot sin(x) 
```

但是，如果您想自定义单行，则不能这样做。我能想到的最好的事情是在顶部放另一条线（无头箭头）：

```
set grid
set style line 100 lt 1 lc rgb "red" lw 2
set arrow 100 from 0,-1 to 0,1 nohead ls 100 front
plot sin(x) 
```

请注意，您也可以将箭头定位在不同的坐标系中：

```
set arrow 100 from graph 0.5,0 to graph 0.5,1 nohead ls 100 front 
```

# php - 客户端需要表单验证？或者如果在服务器端做同样的事情就足够了？

> ID：11437799
> 
> 赞同：0
> 
> 时间：2012-07-11T17:07:13.537
> 
> 标签：php, jquery, forms, wordpress

我正在构建一个基于 wordpress 的网站，并在其中放置了一个使用 jQuery 的表单。但是，我刚刚开始了解 jquery，所以在使用它时我感觉不太好。我有两个问题。

**第一个：** 关于这个表单，是否需要在客户端和服务器端都验证表单？还是仅在服务器端（php）就足够了？

**第二个问题：** 表单有一些字段，如果我单击一个按钮，可以复制这些字段。为此，我使用以下代码：

jQuery代码：

```
(function($){

 $countForms = 1;

      $.fn.addForms = function(idform){

                    var myform = "<table>"+
                     "  <tr>"+
                     "     <td>Field A ("+$countForms+"):</td>"+
                     "     <td><input type='text' name='fielda["+$countForms+"]'></td>"+
                     "     <td>Field B ("+$countForms+"):</td>"+
                     "     <td><textarea name='fieldb["+$countForms+"]'></textarea></td>"+
                     "     <td><button>remove</button></td>"+
                     "  </tr>"+
                     "</table>";

                    if(idform=='mybutton'){
                        alert(idform);
                        myform = $("<div>"+myform+"</div>");
                        $("button", $(myform)).click(function(){ $(this).parent().parent().remove(); });
                        $(this).append(myform);
                        $countForms++;
                    }

      };
})(jQuery);         

$(function(){
    $("#mybutton").bind("click", function(e){
    e.preventDefault();
    var idform=this.id;

        if($countForms<3){
            $("#container").addForms(idform);
        }       
    });
}); 
```

html:

```
<div id="container"><div>
<form method="post" name="b" >
<table>
    <tr>
        <td>Field A</td>
        <td><input type='text' name='dadoA'></td>
        <td>Field B</td>
        <td><textarea name="dadoB"></textarea></td>
        <td><button>remove</button></td>
    </tr>
</table>
</div>
</div>
<button id="mybutton">add form</button>

<div align="center">
<p><input type="submit" value="Registar" name="registar"></p>
</div> 
```

我知道如何使用 php 来验证这些字段。我不知道当我复制它们时如何验证。
我的意思是，我有这个包含 2 个字段的表单，我复制它们并假设用户用错误/未接受的值填充这个新的（第三个）字段。
单击“提交”后，如何使用 PHP 验证输入、刷新页面、回显 2 个原始字段和重复的字段（用户复制的），所有这些字段都由用户填写并带有错误消息？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-11T17:48:04.673

理想情况下，从用户体验的角度来看，您应该尝试验证客户端，然后仔细检查服务器端。提交表单只是发现有问题是非常烦人的。在提交之前显示错误/问题总是一个加号。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-11T17:30:35.107

这可能不是您正在寻找的，但您可以使用以下方法简化验证：[实时验证](http://livevalidation.com/)

这是一个 javascript 验证脚本。我喜欢它，它精简、快速且非常易于使用。有关于如何使用它的完整文档，并且都是在客户端运行的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-11T20:10:29.130

我觉得第一个问题在[首席炼金术士的回答中得到了很好的回答](https://stackoverflow.com/a/11438458/816584)。要回答第二个问题，您的带有可变字段的表单应作为数组发布。当您处理和验证表单数据时，您应该遍历每个数组条目。

# asp.net - 正则表达式验证差异

> ID：11437801
> 
> 赞同：0
> 
> 时间：2012-07-11T17:07:27.163
> 
> 标签：asp.net

有人可以告诉我客户端正则表达式验证与服务器上进行的正则表达式检查有何不同？

任何对 asp.net 验证控件的引用都将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-11T17:32:10.503

在 asp.net 中，[RegularExpressionValidator](http://msdn.microsoft.com/en-us/library/sffh7429%28v=vs.110%29)控件可以执行客户端和服务器端的验证。

否则，JavaScript [RegExp](https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/RegExp/)对象将用于执行客户端验证，而[.NET 正则表达式对象模型](http://msdn.microsoft.com/en-us/library/30wbz966%28v=vs.110%29.aspx)将完成服务器端的工作。

通常，如果禁用客户端脚本，客户端验证将不会运行。在这种情况下，需要服务器端验证。[不显眼](http://en.wikipedia.org/wiki/Unobtrusive_JavaScript#Degrading_gracefully)的 JavaScript 应该根据客户端脚本功能对功能进行适当的降级。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-11T17:43:02.263

服务器端验证和客户端验证之间的主要区别在于验证器拦截处理的位置。请参阅[ASP.NET 页面生命周期概述](http://msdn.microsoft.com/en-us/library/ms178472.aspx)以了解验证在服务器上发生的位置。要更好地了解验证在客户端上的工作原理，请参阅[ASP.NET 服务器控件的客户端验证](http://msdn.microsoft.com/en-us/library/yb52a4x0.aspx)和[如何：使用 ASP.NET 服务器控件的自定义函数进行验证](http://msdn.microsoft.com/en-us/library/f5db6z8k%28v=vs.100%29.aspx)。

对于 RegularExpressionValidator，它包括在客户端运行的 Javascript 和在服务器上运行的 .NET 代码。如果禁用 Javascript，则客户端验证根本不会运行。根据浏览器的不同，如果某些功能不受支持，ASP.NET 将尝试优雅地降低客户端功能。服务器端验证总是发生。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-11T17:12:41.553

差异主要基于所使用的正则表达式引擎的差异。Javascript 有自己的正则表达式引擎，与 .net 的正则表达式引擎相比，它的工作方式有所不同。

两者都基于 Perl 正则表达式引擎，但肯定存在一些差异。

更多信息可以在这里找到。

[正则表达式引擎](http://www.regular-expressions.info/engine.html)

# android - 如何在android中更新自定义列表视图

> ID：11437808
> 
> 赞同：0
> 
> 时间：2012-07-11T17:07:54.510
> 
> 标签：android, android-layout, android-intent, android-service

我开发了一个应用程序来安装所有第三方应用程序并将它们显示在列表视图中！这是由扩展的 baseAdapter 完成的。在此列表中，我使用以下代码卸载选定的应用程序：

```
 Intent intent = new Intent(Intent.ACTION_DELETE);
    intent.setData(Uri.parse("package:" + Packname));
    startActivity(intent); 
```

现在我想要的是使用更改的数据更新列表视图，以便用户可以获得更新的应用程序列表。我怎样才能做到这一点。我发现 notifyDatasetchanged 方法但它只能用于简单的列表视图！我有哪些选择，请让我知道任何教程以实现我的结果！

谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-11T17:21:01.000

您将有一个适配器（`BaseAdapter`可能扩展的东西），您将其设置到`ListView`using 中`setAdapter(...)`。向您的适配器实现类添加一个方法，该方法设置支持列表的基础对象。确保`notifyDataSetChanged()`最后打电话。就像是，

```
public class MyAdapter extends BaseAdapter<String> {
  private List<String> strings;

  ...
  void setModel(List<String> strings) {
    this.strings = strings;
    this.notifyDataSetChanged();
  }
} 
```

只需调用您的适配器`setModel(...)`将导致`ListView`更新。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-11T17:21:16.583

你只对简单的列表视图意味着什么？你的有什么不同？删除其中一项后，您应该能够在自定义适配器类上调用 notifyDataSetChanged。您可以创建一个函数来执行此操作...

```
private ArrayList<Object> list;

public void deleteItem(int index){
        list.remove(index);
        notifyDataSetChanged();
} 
```

# http - 如何测试多部分/表单数据 POST 请求

> ID：11437810
> 
> 赞同：6
> 
> 时间：2012-07-11T17:07:59.120
> 
> 标签：http, testing, post, apache-commons, multipartform-data

我正在尝试找到一种工具，可以让我测试多部分/表单数据 POST 请求并调整请求。具体来说，我想测试内容类型标题中分号的缺失/存在：

```
multipart/form-data; boundary=140f0f40c9f411e19b230800200c9a66 
```

我们有一个不发送分号的客户端，而我们的新 servlet（使用 Apache Commons FileUpload）无法解析上传的文件。旧版本的 servlet 使用不同的库方法来接受/解析请求，它可以解析文件。在我可以通过包含分号来证明请求将成功之前，客户端应用程序的所有者不想对其进行任何更改。

我一直在使用 cURL 对 servlet 运行测试，但我无法调整它生成的请求以排除分号。我已经尝试了 Firefox 和 Fiddler 的海报插件来生成测试 POST 请求，但它们导致了这个错误：

```
org.apache.commons.fileupload.FileUploadException: Stream ended unexpectedly 
```

有没有人找到一种方法来成功测试上传文件的多部分/表单数据 POST 请求？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-06-05T09:53:13.980

您可以使用`curl`这些库来测试这些库，这是一个使用 multipart/form-data POST 的示例：[https ://stackoverflow.com/a/10765244/72176](https://stackoverflow.com/a/10765244/72176)

我喜欢 curl 这样的命令行工具的一件事是它很容易重复（在 bash 中，up & enter），并且您可以保存测试以供以后使用。

编辑：绝对可以发送您要测试的自定义标头。关键是使用 curl 的原始命令而不是为您格式化请求的便捷方法。用于`-H`传入原始标题，并用于`--data-binary`从文件中传入正文而不更改行尾（对于**必须具有 CRLF 行尾**的 multipart/form-data 非常重要）。这是一个例子：

```
curl -X POST -H "Content-Type: multipart/form-data; boundary=----------------------------4ebf00fbcf09" --data-binary @test.txt http://localhost:3000/test 
```

如果不使用中间文件更方便，可以这样写一行：

```
curl -X POST -H "Content-Type: multipart/form-data; boundary=----------------------------4ebf00fbcf09" -d $'------------------------------4ebf00fbcf09\r\nContent-Disposition: form-data; name="example"\r\n\r\ntest\r\n------------------------------4ebf00fbcf09--\r\n' http://localhost:3000/test 
```

这 2 个示例包括分号，但您可以根据需要将其删除。

# sql - 这些 SQL 语句是否等效？

> ID：11437816
> 
> 赞同：0
> 
> 时间：2012-07-11T17:08:30.227
> 
> 标签：sql

> **可能重复：**
> [显式与隐式 SQL 连接](https://stackoverflow.com/questions/44917/explicit-vs-implicit-sql-joins)

```
Stmt1: SELECT ... FROM ((a JOIN b ON <cond1>) JOIN c ON <cond2>)

Stmt2: SELECT ... FROM a, b, c WHERE <cond1> AND <cond2> 
```

我不确定第二个语句是否可以提供较小的结果集。如果 B 中有几行与 A 中的一行匹配，我们是否可以通过第二条语句获得所有这些匹配？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-11T17:12:49.233

最后的结果是，是的。关于执行：查询优化器最终可能会为两个查询创建相同的查询执行计划。

如果根据其近似统计数据（例如，近似等深度直方图 - 顺便说一下，它们并非一直都是最新的），优化器将确定第一个连接比第二个，因此，它将首先执行这个。

Stmt1 允许您指定连接的顺序，并且考虑到您确切知道表包含什么，这可能是一个更好的解决方案。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-11T18:11:51.463

从语义上讲，查询将是相同的。然而，试图依靠计划来证明这一点并不是一个好主意。

也可以随意插入，`<cond1>`这样`<cond2>`查询在第二种形式中是有效的，但在第一种形式中是不合法的。

从这个意义上说，第二个更一般，但只要第一个好，那么第二个就是等效的。

# php - PHP Mysql 从多个表中选择查询

> ID：11437817
> 
> 赞同：0
> 
> 时间：2012-07-11T17:08:37.180
> 
> 标签：php, mysql, phpmyadmin

我有 2 张桌子。父表是`learn_mor`e，子表是`reference_keys` 两个表都是innodb

```
reference_keys has two columns:
key_id [index]
key_href

learn_more table
id [primary]
keys_id [foreign key]
page_title    
page_content 
```

我想要做的是从 reference_keys 表中获取更多信息表中的多个链接。例如，learn_more table id:1, keys_id:1,3,4,8,13,25,..., page_title:Home Page: blah blah, page_content: blah blah......

问题是 phpmyadmin 不允许我在 learn_more 的 keys_id 中放置超过 1 个 id。

> //错误
> //警告：#1265 第 1 行的列 'keys_id' 的数据被截断

我猜关系视图设置不正确。- 我该如何解决？

在我的页面上，它在回显中显示 key_id 而不是 id 的值：这是 key_href。所以我的页面显示“1”而不是 1 的值，这是一个链接..

也许我的sql查询不正确？

```
$SQL = "SELECT * FROM learn_more WHERE page_title = '$this_page'"; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-11T17:18:15.587

在这里建立一个多对多是你可以做的：

```
reference_keys has two columns:
key_id [index]
key_href

learn_more_to_reference_key
reference_key_id [FK to reference_keys]
learn_more_id [FK to learn_more]

learn_more table
id [primary]
page_title    
page_content 
```

那么你在关系的每一边基本上都有一个 1:N。请注意，我也从 learn_more 表中删除了 FK。

因此，要获取您要查询的关系，如下所示：

```
SELECT * FROM Learn_More lm 
INNER JOIN learn_more_to_reference_key lmtrk ON lm.id = lmtrk.learn_more_id 
INNER JOIN reference_keys rk ON rk.id = lmtrk.reference_key_id 
```

我相信内部连接是正确的，我正在仔细检查。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-11T17:19:26.207

如果要让learn_more中的一行对应reference_keys中的多行，则需要将learn_more表中的外键字段移动到reference_keys表中。

因此，与其在 learn_more 中有一个指向多行 reference_keys 的外键字段（正如您似乎遇到的那样，不支持），而是让多行 reference_keys 都指向 learn_more 表。

这将实现 learn_more 和 reference_keys 之间的一对多关系。如果您需要多对多关系（其中每个 reference_key 行可以连接到许多 learn_more 行，反之亦然），您需要使用第三个表来建立两个数据库之间的链接。有关详细信息，请参阅[http://www.tomjewett.com/dbdesign/dbdesign.php?page=manymany.php](http://www.tomjewett.com/dbdesign/dbdesign.php?page=manymany.php)。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-11T17:19:30.997

你得到了，`keys_id`因为那是**learn_more**表中的内容。要获得`key_href`，您需要`JOIN`将**learn_more**表添加到**reference_keys**表。此外，@ametren 是正确的 - 您应该有一个多对多表来链接您的两个当前表。

```
key_linking_table
id [primary and foreign key]
keys_id [primary and foreign key]

$SQL = 
"SELECT lm.id, lm.page_title, lm.page_content, rk.key_href
 FROM learn_more AS lm
 LEFT JOIN key_linking_table AS klt
 ON klt.id = rk.id
 LEFT JOIN reference_keys AS rk
 ON klt.key_id = rk.key_id
 WHERE [condition]" 
```

# html - iframe 中的链接附加父 url

> ID：11437822
> 
> 赞同：0
> 
> 时间：2012-07-11T17:09:02.033
> 
> 标签：html, iframe

所以我有一个网站，我们称之为 www.main.com，在其中我有一个带有表格的 iframe，在该表格的单元格中，我想在新窗口中打开一个链接，例如 www.next .com。

问题是，当我将链接添加到表格单元格时，它会将父级附加到链接中，因此而不是我放在那里的 href (href="www.next.com") 链接最终是“www .main.com/www.next.com”当然是假的。

如何让它不附加“www.main.com/”而只使用我传递给 href 属性的内容？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-11T17:11:11.113

这不是你在 iframe 中的事实，而是如果你想要一个绝对链接，你必须包含`http://`(ie `href="http://www.next.com"`)

# android - 如何在 Android 中从 HTML 字符串中获取值

> ID：11437827
> 
> 赞同：-3
> 
> 时间：2012-07-11T17:09:17.990
> 
> 标签：android, jsoup

我有一个问题，我想从 HTML 字符串的不同标签中获取不同的值，`<p><div class=\"image_wrapper\" style=\"width:320px;\"><img name=\"tccimg_100322484_s\" **title=\"2011 Chevrolet Corvette 2-door Coupe Z06 w/2LZ Angular Front Exterior View\"** src=\"http://images.thecarconnection.com/sml/2011-chevrolet-corvette-2-door-coupe-z06-w-2lz-angular-front-exterior-view_100322484_s.jpg\" alt=\"2011 Chevrolet Corvette 2-door Coupe Z06 w/2LZ Angular Front Exterior View\" width=\"320\" height=\"240\" /><p>2011 Chevrolet Corvette 2-door Coupe Z06 w/2LZ Angular Front Exterior View</p><a name=\"tccwrp_100322484\" class=\"enlarge\" href=\"/image/100322484_2011-chevrolet-corvette-2-door-coupe-z06-w-2lz-angular-front-exterior-view\" target=\"_blank\">Enlarge Photo</a></div></p>\n<p>The <a href=\"http://www.thecarconnection.com/make/chevrolet,new\" class=\"nwslinks_visible\">Chevrolet</a> Corvette is an American icon: a rear-wheel drive, two-seat sports car that started its legendary run in 1953 and has seen 57 years of continuous production in Flint, Michigan, St. Louis, Missouri and most recently in Bowling <a href=\"http://www.thecarconnection.com/category/green,new\" class=\"nwslinks_visible\">Green</a>, Kentucky. Over the years it has constantly evolved to lead performance and value, with occasional lows and numerous highs along the way. Though it has little domestic competition, cars as disparate as the Dodge Viper, <a href=\"http://www.thecarconnection.com/overview/porsche_boxster_2012\" class=\"nwslinks_visible\">Porsche Boxster</a> and 911, and the <a href=\"http://www.thecarconnection.com/overview/nissan_gt-r_2012\" class=\"nwslinks_visible\">Nissan GT-R</a> and 370Z can be considered rivals in terms of performance and/or price. The Chevrolet Corvette is priced from $48,000 to $56,000 for the standard Coupe and Convertible, from $58,000 to $68,000 for the Grand Sport, from $75,000 to $82,000 for the Z06, and from $106,800 for the ZR1.</p>\n<p>Over the past 57 years of production, there have been six generations of Corvette. The first 1953 models featured solid rear axles and inline six-cylinder engines, though in 1955, the V-8 became standard. When the second generation \"Sting Ray\" debuted in 1963, independent rear suspension was added and output was increased to 360 horsepower. A big-block 6.5-liter model was added in 1965, before the famous 427 cubic inch (7.0-liter) engine joined in 1966\. The third-gen car began its run in 1968, running for 13 years until 1982--the longest run of the various Corvette generations. The new, fender-flared body style was the primary new addition to the line, along with a three-year run for the ZR-1 performance edition, though emissions and fuel regulations conspired to restrict power output and potential of Corvettes throughout the 1970s. The fourth-generation Corvette hit the street in 1983 as a 1984 year model, bringing with it a complete redesign of the car aside from the engine, with a sleek, modern design and digital instruments, and the second ZR-1 performance version. The fifth-gen car, introduced in 1997, saw another major upgrade, with improved build quality, more performance, and better handling the result. The Z06 model was introduced in 2001, and engines continued to be upgraded, producing 405 horsepower in the Z06.</p>\n<p>The sixth and current Corvette generation debuted in 2005, and brought with it all new bodywork and improved suspension. Power climbed to 400 horsepower for the base Corvette initially, now up to 430 horsepower from its 6.2-liter V-8 LS3 engine, and 505 horsepower for the current 7.0-liter Z06\. The ZR1 was added back to the lineup in late 2007 as a 2008 year model, producing 638 horsepower from a supercharged 6.2-liter V-8 engine. Currently available in Coupe, <a href=\"http://www.thecarconnection.com/category/convertible,new\" class=\"nwslinks_visible\">Convertible</a>, a Grand Sport version with upgraded brakes and special bodywork, the high-performance Z06, and the supercar-rivaling ZR1.</p>\n<p>The Coupe and Convertible are the standard Corvettes, with 430 horsepower output and all the conveniences of a modern car, including available Bluetooth on some models, a choice of six-speed manual or automatic transmission, and available leather interior. The Grand Sport is also available as both a coupe and convertible, though the coupe gets a few performance upgrades over the soft top, including a dry-sump oil system when equipped with the six-speed manual transmission, plus the upgraded brakes and flared fenders that both variants get. The Corvette Z06 ups the performance ante with extensive use of carbon fiber body panels and components, an aluminum frame, and a 505-horsepower engine. The ZR1 is king of the hill, its massive power output combined with Brembo ceramic carbon brakes, visible carbon fiber weave components, and a 205-mph top speed. Despite their huge power and impressive performance figures, the brawny engines in the Corvette enable it to achieve up to 26 mpg on the highway.</p>\n<p>No major changes were made for the 2012 model year, though the range did get interior updates, new technology packages, and a range of new exterior colors. High-performance Z06 and ZR1 models also got new performance packages.</p>\n<p>For 2013, a new 427 Convertible Collector Edition has been added, pairing the Z06's LS7 V-8 engine with a Corvette Convertible chassis and unique 60th Anniversary touches. A 60th Anniversary Package will also be available on all 2013 model Corvettes, adding a special touch to celebrate six decades of the Corvette. The rest of the line carries forward largely unchanged from last year.</p>\n<p>The next major generational upgrade is expected to come in late 2013, with the seventh-generation car drawing on GM's global resources for its new design--the first time the Corvette team has looked outside the U.S. for the iconic 'Vette.</p>\n"`

我想在一开始就从这个 html 字符串中获取图像标题值，但我无法得到它。我正在使用 Jsoup 来解析这个 HTML 字符串，

**代码：**

```
Document doc = Jsoup.parse(html);
        Elements element = doc.getAllElements();
        for(Element e: element)
        {
            Elements str = e.getElementsByTag("img");
            for(Element el: str)
            {
                String title = el.getElementsByAttribute("title").text();
                System.out.println("The Title:"+title);
            }
        } 
```

请向我建议任何有关相同的解决方案。

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-11T17:51:17.763

替换以下行：

```
String title = el.getElementsByAttribute("title").text(); 
```

和

```
String title = el.attr("title"); 
```

说明：函数调用`getElementsByAttribute("title")`将返回一个元素列表（请参阅[Jsoup Doumentation - Element](http://jsoup.org/apidocs/org/jsoup/nodes/Element.html#getElementsByAttribute%28java.lang.String%29)），而实际上您只想查看特定元素的属性。另请参阅[Jsoup 文档 - 节点](http://jsoup.org/apidocs/org/jsoup/nodes/Node.html#attr%28java.lang.String%29)。

# c# - 将已构建的 WinForms.Form 实例序列化为 VB 或 C# 源代码，就像 IDE 一样

> ID：11437839
> 
> 赞同：3
> 
> 时间：2012-07-11T17:10:14.840
> 
> 标签：c#, vb.net, codedom, design-surface

我有大约 500 个由旧应用程序从 XML 文件动态生成的 WinForms。我想自动将这些转换为可以在设计器中编辑的 VB 或 C# 代码。

我可以手动完成，这将需要永远......

或者编写一个加载每个 XML 的应用程序，调用旧应用程序的 xml-to-winform-b​​uilder 以将其转换为完整的 WinForm，并检查每个控件的属性并使用 StringBuilder 生成设计人员可以接受的代码。这充其量是艰巨的。

但是：我想使用设计师使用的相同代码。我认为这将节省我处理极端情况的时间。

我想做的是，获取一个已经构建的 WinForm 对象，其中包含充满子控件的控件数组（由旧应用程序 xml-to-winform 代码创建），将其扔到 IDE 用于序列化设计表单的相同代码中到 CodeDom，并取回我可以用真实语言保存的 CodeDom 语句列表。一旦我得到 CodeDOM，我会很高兴的！

### 编辑

[这篇 Codeproject](http://www.codeproject.com/Articles/9307/Converting-WinForms-Web-Forms-using-CodeDom)文章体现了我想要做的“概念”：从完成的表单开始，将其转换（“序列化”）为代码。但是，它有两个不足：（1）它使用模板/字符串生成器生成 .aspx 页面，这就是属性所在（对于 webforms 很好，但 winforms 将属性序列化到实际的 .Designer.vb 文件中）；(2) 这一切都是从头开始的。我想重用视觉工作室的例程。它们允许您使用许多东西来执行此操作，例如属性网格。我只是在寻找一篇文章的链接（也许我的 google-fu 太弱了），或者是某人已经做过的简短代码示例。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-16T22:50:00.577

因此，这可能符合您的需求，也可能不符合您的需求。我有一个解决方案，但它需要您调整 XML -> WinForms 渲染。

这在很大程度上依赖于这个项目的使用：http: [//ivanz.com/files/docs/designerhosting/create-and-host-custom-designers-dot-net.html](http://ivanz.com/files/docs/designerhosting/create-and-host-custom-designers-dot-net.html)

下载 EXE（它只是带有 EULA 的源代码的压缩版本）并构建解决方案，我在构建时遇到了一些问题，直到我删除了对图形库的引用（以及从主机库中对它的相关调用）。为什么主机库需要绘制图表我不太确定......

然后我建立了一个新的 WinForms 项目（不能是控制台，因为 DesignSurface 无法挂钩拖放事件）。在新的 winforms 项目中引用上述项目中的 Host 和 Loader 项目。

毫无疑问，您需要在此处调整现有流程。合并您现有的流程，使其适合下面我的标签所示的这种类型的表单构建：

```
 HostSurfaceManager hsm = new HostSurfaceManager();
        HostControl hc = hsm.GetNewHost(typeof(Form), LoaderType.CodeDomDesignerLoader);

        var l = new Label() { Text = "TEST!!!!" };

        hc.DesignerHost.Container.Add(l);

        richTextBox1.Text = ((CodeDomHostLoader)hc.HostSurface.Loader).GetCode("C#"); 
```

这会生成您的 form.cs 文件内容（请参阅下面的生成代码）。这是一个多合一文件，您无需创建单独的 form.cs.designer 文件即可获得设计器支持。我复制了上面生成的代码，将其保存到 .cs 文件中，Visual Studio 将其识别为 winform 并为我提供了设计支持。

您的副本可能会包含一个子 Main。我进入 Loader -> CodeGen.cs 文件并注释掉与 Main 相关的部分，我建议你也这样做。

```
//------------------------------------------------------------------------------
// <auto-generated>
//     This code was generated by a tool.
//     Runtime Version:2.0.50727.5448
//
//     Changes to this file may cause incorrect behavior and will be lost if
//     the code is regenerated.
// </auto-generated>
//------------------------------------------------------------------------------

namespace DesignerHostSample
{
    using System;
    using System.ComponentModel;
    using System.Windows.Forms;

    public class Form1 : System.Windows.Forms.Form
    {

        private System.Windows.Forms.Label label1;

        public Form1()
        {
            this.InitializeComponent();
        }

        private void InitializeComponent()
        {
            this.label1 = new System.Windows.Forms.Label();
            this.SuspendLayout();
            // 
            // label1
            // 
            this.label1.Location = new System.Drawing.Point(0, 0);
            this.label1.Name = "label1";
            this.label1.Size = new System.Drawing.Size(100, 23);
            this.label1.TabIndex = 0;
            this.label1.Text = "TEST!!!!";
            // 
            // Form1
            // 
            this.ClientSize = new System.Drawing.Size(284, 262);
            this.Name = "Form1";
            this.ResumeLayout(false);
        }
    }
} 
```

## 由 FastAl 编辑

彼得，你摇滚！！！这几乎*正*​​是我想要的。好吧，我还不能直接把物体扔给它；仅使用上述方法，没有填充 .Controls 属性，所以我得到了一个空白表格。此外，表单似乎必须由 GetNewHost 创建。幸运的是，我的 XMl-to-screen 例程实际上并没有创建容器，它只是返回一个平面的控件列表，我必须正确地重新设置它们的父级（SetChildren 子）。请注意我必须将它们添加到主机容器以使其了解它们的注释。现在它完美运行！

```
Public Module Main
    Public Sub Main()
        Dim FormSpecAsText As String = ...  read XML form def from file
        Dim Outfile As String = ... output file is in my project 

        ' Setup for Winforms platform
        Dim dsg As New DynamicScreenGenerator
        Dim ListOfControls As New PanelObjectList
        ControlFactoryLocator.AddService( _
            New PanelObjectFactoryWinFormBasicControls)
        ControlFactoryLocator.AddService(_
            New PanelObjectFactoryWinFormAppSpecificCtls)
        ControlFactoryLocator.AddService(_
            New PanelObjectFactoryWinFormFormEditorCtls)

        ' Deserialize FormSpecAsText into a flat list of Controls
        ListOfControls.AddRange( _
            dsg.BuildDSGLists(FormSpecAsText, ListOfControls).ToArray)

        ' setup for serialization to Code
        Dim hsm As New Host.HostSurfaceManager
        Dim hc As Host.HostControl = _
          hsm.GetNewHost(GetType(Form), Host.LoaderType.CodeDomDesignerLoader)

        ' Get main form that was created via GetNewHost, autosize it
        Dim HostUserControl = _
            CType(hc.DesignerHost.Container.Components(0), Form)

        ' Parent them properly, and add to host (top lvl ctls have parent="")
        SetChildren(HostUserControl, "", dsg, hc.DesignerHost.Container)
        HostUserControl.AutoSize = True

        ' write serialized version to a file in my project
        IO.File.WriteAllText(Outfile, _
          CType(hc.HostSurface.Loader, Loader.CodeDomHostLoader).GetCode("VB"))
    End Sub

    Sub SetChildren(ByVal Parent As Control, ByVal ParentName As String, _
           ByVal dsg As DynamicScreenGenerator, ByVal ctr As IContainer)
        For Each PO In (From p In dsg.POList Where p.Parent = ParentName)
            Dim child = CType(dsg.CTLList(PO), Control)
            ctr.Add(child, PO.Name) ' seem to have to add to container while 
             '  parenting them or .Controls isn't serialized and form is blank.
            Parent.Controls.Add(child)
            SetChildren(child, PO.Name, dsg, ctr)
        Next
    End Sub
End Module 
```

# database - 如何在 DB2 的主键中插入空值？

> ID：11437845
> 
> 赞同：0
> 
> 时间：2012-07-11T17:10:37.607
> 
> 标签：database, db2, informix

我的 webApp 与 2 个数据库服务器 Informix 和 DB2（v9.5 在 localhost 上运行）一起工作，当我使用 informix DB 时，我可以将 null 插入主键（informix DB 处理它并接受 null 并自动增加列（Serial8））但是当我切换到使用 DB2 时它不起作用并且出现此错误（DB2 SQL 错误：SQLCODE=-407，SQLSTATE=23502，SQLERRMC=TBSPACEID=2，TABLEID=280，COLNO=0，DRIVER=3.50.152， sqlCode = -407) 看起来 DB2 不允许主键为空（BigInt），那么如何强制 DB2 允许主键为空？总之，我希望 DB2 允许我为该列插入空值，并在每次插入时自动递增其中的值

这是创建表的脚本：

```
CREATE TABLE corr.CORRESPONDENCE  (
this is the specified col---->CORR_ID BIGINT NOT NULL,
    CORR_NAME VARCHAR(255) NOT NULL,
    CORR_NO VARCHAR(255),
    CREATE_DATE_TIME TIMESTAMP NOT NULL,
    DELIVERY_DATE_TIME DATE,
    NO_OF_ATTACH INTEGER,
    SITE_ID VARCHAR(20),
    DELIVERY_ID VARCHAR(20),
    CREATE_USER BIGINT NOT NULL,
    SECURITY_ID BIGINT,
    DELIVERY_BY VARCHAR(20),
    WORKFLOW_ID BIGINT
)
DATA CAPTURE NONE ;

ALTER TABLE corr.correspondence ADD CONSTRAINT u143_159 PRIMARY KEY 
(corr_id)  ; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-11T22:36:33.357

哪个版本的 Informix？表的架构是什么？什么是 INSERT 语句？您使用哪个 API 来访问 Informix？客户端代码在哪个平台上运行？数据库服务器在哪个平台上运行？

我不相信您可以在 Informix 中将空值插入到类似 SERIAL 的列中。您的表是否有主键约束，或者只是一个没有 NOT NULL 且没有 PRIMARY KEY 约束的 SERIAL8 列？您不能将 NULL 直接插入 SERIAL8 列（也不能通过推断插入 SERIAL 或 BIGSERIAL 列）。

演示（在 RHEL 5 Linux x86/64 上使用 Informix 11.70.FC6 的开发版本；客户端基于 ESQL/C，并且客户端和服务器都在同一台机器上）：

```
SQL[1910]: begin;
SQL[1911]: create table t1(s8 serial8 not null, v1 char(8) not null);
SQL[1912]: insert into t1(s8, v1) values(null, "works?");
SQL -391: Cannot insert a null into column (t1.s8).
SQLSTATE: 23000 at /dev/stdin:6
SQL[1913]: rollback;
SQL[1914]: begin;
SQL[1915]: create table t1(s8 serial8 primary key, v1 char(8) not null);
SQL[1916]: insert into t1(s8, v1) values(null, "works?");
SQL -703: Primary key on table (t1) has a field with a null key value.
SQLSTATE: IX000 at <<temp>>:2
SQL[1917]: rollback;
SQL[1918]: create table t1(s8 serial8, v1 char(8) not null);
SQL[1919]: insert into t1(s8, v1) values(null, "works?");
SQL -391: Cannot insert a null into column (t1.s8).
SQLSTATE: 23000 at <<temp>>:2
SQL[1920]: drop table t1;
SQL[1921]: 
```

*麻烦了，1917年之后我忘记重启交易了！*

这完全符合其应有的行为；不应允许您将 NULL 插入 SERIAL8（或 SERIAL 或 BIGSERIAL）列。您可以在这些列中插入零，并且将自动分配一个新值。但是您不能也不应该将 NULL 插入列中。

DB2 在拒绝将 NULL 插入主键中的任何列的尝试方面同样是正确的。这根本不是你应该被允许做的事情。

* * *

## 回复评论

[弗兰克电脑](https://stackoverflow.com/users/366797/frank-computer)评论说：

> 奇怪，我的印象是，在将数据加载到具有 SERIAL 列的表中时，如果我没有为 SERIAL 列提供值，它会在插入过程中将 NULL 转换为零，就好像加载的数据包含一个零？
> 
> 此外，使用 ISQL Perform，当我在包含 SERIAL 列的表中插入新行时，我没有为 SERIAL 列提供值，但 Perform 显示零 (0)，并且在点击 Escape 后，它会将其转换为下一个最高的 INT 值！

我的第一反应是：

> *   LOAD 由客户端中的一个复杂的子例程完成，该子例程处理数据，它可以/将处理 SERIAL 列的 NULL。
>     
>     
> *   使用 ISQL，Perform 在数据输入期间显式强制执行 0 并报告插入的值；再次，客户端代码正在防止错误。
>     
>     
> 
> 这就是为什么了解使用什么来演示问题或功能很重要的原因。现在我必须使用 DB-Access 制作一个 LOAD 和 NULL 演示......我不认为我的 SQLCMD 程序在 LOAD 期间修复了 SERIAL 列的 NULL（或者，如果是这样，我做了很长很长的破解过去）。

测试 DB-Access（这次来自 Mac OS X 10.7.4 上的 IDS 11.70.FC2），包括：

### xx.unl

```
|data for row 1|1|
|data for row 2|2| 
```

### xx.sql

```
BEGIN;
CREATE TABLE load_null(s8 SERIAL8 PRIMARY KEY, v32 VARCHAR(32) NOT NULL, i INTEGER NOT NULL);
LOAD FROM "xx.unl" INSERT INTO load_null;
ROLLBACK; 
```

### 数据库访问输出

```
$ dbaccess stores xx

Database selected.

Started transaction.

Table created.

  703: Primary key on table (load_null) has a field with a null key value.

  847: Error in load file line 1.
Error in line 3
Near character position 41

Transaction rolled back.

Database closed.

$ 
```

这不支持“DB-Access 将 SERIAL8 列的 NULL 映射到零”假设。这是 SERIAL8 而不是普通的 SERIAL，但是当我将 SERIAL8 更改为 SERIAL 时，我得到了同样的错误；与 BIGSERIAL 同上。与 Mac 上的 DB-Access 相比，我没有 ISQL（懒惰；我不久前做了移植，但没有安装它，因为它不是官方的，也不是 GA），并且有可能两个 LOAD 命令之间存在差异，但相对不太可能。

在相同的 SQL 和数据（卸载）文件上测试 SQLCMD，我得到相同的错误消息。

对于使用 Informix 可以将 NULL 值插入主键列的说法，我比以往任何时候都更加不相信。

* * *

## 更多评论和解释

> 虽然我知道 LOAD 不是 Informix SQL 本机语句，但我认为它已添加到 SE（标准引擎）和 OL（在线）引擎中？

不; LOAD 语句由客户端程序中的代码处理：DB-Access、ISQL、I4GL、DB-Load、DB-Import。在每种情况下，该语句都被客户端识别和解析，转换为准备好的合适的 INSERT 语句，然后客户端读取并解析数据文件，并将数据一次一行发送到服务器（逻辑上；实际上，其中涉及一个 INSERT 游标，它可以让您对插入进行批量操作）。

> 还是 LOAD 语句实际上调用了 SE/OL 或 onload.exe 中的 DBLOAD.EXE 实用程序？

否：LOAD 语句不涉及 DB-Load，也不涉及 ON-Load。

> SQLCMD 的源是否可用？如果是这样，我可以转储 dbaccess 并将其替换为 SQLCMD 的精简版本吗？

是的。它可从 IIUG（国际 Informix 用户组）[软件存档](http://www.iiug.org/software/)中获得。那里可用的版本（87.02）接近当前版本（我正在使用 87.06，但我还没有准备好将它发布到世界其他地方，发布时它将是 88.00）。我在 Windows 上不支持它，只是因为我发现 Windows 对开发环境过于不利。不过，它有时也可以在 Windows 上运行。当我发现 Microsoft 发布“Safe C Library”例程时，我的最后一次尝试停止了，但它们提供的例程与标准[TR 27341](https://stackoverflow.com/questions/372980/do-you-use-the-tr-24731-safe-functions)中的例程不同。那个时候我又放弃了。

> 我刚刚确认我的 ole SE-4.10 clunker 在使用 LOAD 插入加载文件时接受 SERIAL 列的 NULL 值。

OK. You couldn't specify PRIMARY KEY constraints in that version (those arrived with 5.00, I'm almost certain), but you could create unique indexes on SERIAL columns, etc. To the extent that it is a bug, it has presumably been fixed. It might or might not be fixed in SE 7.26; I'd expect it to be, but haven't demonstrated that it is. It is fixed in 11.70; my tests above demonstrate that.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-11T17:17:04.320

您不能将空值插入主键 DB2。相反，您需要修改插入查询以插入新键，或者只是不将其包含在您的 Insert 语句中并让数据库自动处理它......

如果我们知道插入查询（或至少是其中的一部分），那将会有所帮助。我们可以就如何纠正它提供更好的指导。但是，猜测问题的根源：

假设表格如下所示：

```
ID INTEGER NOT NULL GENERATED DEFAULT (START WITH 1, INCREMENT BY 1)
SomeOtherField VARCHAR(50) 
```

你的陈述应该是：

```
Insert into MyTable (SomeOtherField) Values ('somevalue') 
```

代替

```
Insert into MyTable (ID, SomeOtherField) Values (null, 'somevalue') 
```

或者

```
Insert into  Values (null, 'somevalue') 
```

* * *

可以在这里找到类似的问题和更多信息：[http ://www.dbforums.com/db2/669352-autoincrement-fields.html](http://www.dbforums.com/db2/669352-autoincrement-fields.html)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-11T17:17:37.033

您应该尝试以下 SQL 语句来解决您的问题：

```
insert into table(primarykey,c1, ...) values(null,v1,...).
Try insert into table(c1,...) values(v1,...) 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-11T22:01:47.877

使用 Informix SERIAL 列，您可以插入一个零 (0)，它会自动将其转换为下一个最高可用整数值。您还可以插入一个尚未使用的特定整数值，因为 SERIAL 列具有唯一约束。

你的问题模棱两可。主键也可以是非 SERIAL 数据类型并接受 NULL 值。如果是这种情况，我建议您创建一个代理键（通常是一个自动增量列），以便唯一标识每一行。

你的主键是做什么用的，在你的主键中插入 NULL 的原因是什么？..是因为在你插入行的那一刻，值是未知的，但稍后它将用一个已知的值更新value?.. NULL 作为主键往往会使事情无法正常工作，尤其是在加入子表中的外键时。如果您的主键没有唯一约束，这意味着您可能有几行具有重复的 NULL 值作为它们的主键。在任何数据库中都不是一个好主意，包括 DB2！

# java - 创建公共静态对象是否不好

> ID：11437856
> 
> 赞同：3
> 
> 时间：2012-07-11T17:10:57.203
> 
> 标签：java, object

像这样声明一个对象是不是很糟糕

```
 public static GUI g = new GUI(); 
```

或者当我希望多个方法能够使用同一个对象时，我应该避免创建公共对象吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-11T17:12:45.443

是的，将对象公开为公共静态变量通常是不好的，因为每个人都有对它的写访问权。制作变量`final`会使它稍微好一点，但最好的解决方案是制作你的变量`private`，并提供一个静态吸气剂。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-11T17:49:34.393

该概念已被称为“单例”模型。在 Java 中不如在其他一些语言（如 Objective-C）中流行。这是一个每个人都批评但每个人都使用的概念，尽管通常以一种或另一种方式伪装。

一般来说，全局数据的一个大问题是，太多不需要/不应该是全局的数据经常被变成全局的，因为这比弄清楚如何适当地分区数据和管理其可寻址性更简单。这会导致应用程序的智力复杂性呈指数级增长，并且很快就会失控。

`final`所以在一些适当的情况下使用全局静态（无论是否）都没有错。危险在于您养成了在*每种*情况下都使用它的习惯，或者至少使用太多以至于您不再能够理解您的应用程序。在多开发人员环境中，这会增加一倍（或者可能是四倍）。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-11T17:21:00.530

静态通常被认为是不可测试的，而且很糟糕。每个静态对象都是您尝试测试的所有内容的隐式输入，并且测试都是关于控制输入并试验您的方法如何响应精确参数的行为。

相反，您应该将对 GUI 对象的显式引用传递给需要它的每个类。有许多方法可以简化所涉及的簿记；通常涉及*依赖注入*。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-11T17:14:54.210

执行您要实现的目标的典型模式是[Singleton](http://www.javaworld.com/javaworld/jw-04-2003/jw-0425-designpatterns.html)

# objective-c - 将标签分配给 UIButton

> ID：11437860
> 
> 赞同：0
> 
> 时间：2012-07-11T17:11:18.317
> 
> 标签：objective-c, xcode

我在 for 循环中有这段代码：

```
 //button Delete

        buttonDelete = [UIButton buttonWithType:UIButtonTypeCustom];
        [buttonDelete addTarget:self 
                           action:@selector(deleteMessage:)
                 forControlEvents:UIControlEventTouchDown];
        [buttonDelete setTitle:@"" forState:UIControlStateNormal];
        buttonDelete.frame = CGRectMake(680, -1, 30.0, 30.0);

        buttonDelete.tag = i;

      NSLog(@"Tag: %d", buttonDelete.tag);

        [buttonDelete setBackgroundImage:[UIImage imageNamed:@"deleteButton.png"] forState:UIControlStateNormal];

        [image1 addSubview:buttonDelete];

        if (DeleteButtonArray == nil)DeleteButtonArray = [[NSMutableArray alloc]init];
        [DeleteButtonArray addObject: buttonDelete];

        //Button Delete 
```

此代码运行 9 次，因此 i 增加（从 1 到 9）。我知道我正确地增加了，因为我以同样的方式为图像分配了一个标签，但由于某种原因，NSLog 显示了这一点：

```
Tag: 0, 1, 2, 3, 0, 1, 2, 3,... 
```

所以它到达 3 并重新开始计数。为什么？？有任何想法吗？？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-11T17:35:04.493

我解决了这个问题：我只是这样做了：

```
z = z + 1;
        buttonDelete.tag = z; 
```

和

```
z = 0; 
```

在视图中确实加载了。我仍然不明白为什么我不工作，因为我用 i 正确地将标签分配给图像，并且我以同样的方式做......

# c# - 重定向到 URL，IE 8 忽略片段

> ID：11437862
> 
> 赞同：2
> 
> 时间：2012-07-11T17:11:19.300
> 
> 标签：c#, asp.net-mvc-3, internet-explorer, redirect, fragment-identifier

我有一个 MVC 3 项目，它大量使用片段来动态加载不同页面的内容。有些页面会发回控制器以上传文件。上传完成后，我想将用户重定向回他们来自的页面。我将返回 URL 传递给上传操作，然后在上传完成后将用户重定向回该页面。

这在 Chrome 和 Firefox 中正常工作，但 IE 忽略了该片段，我被带回解决方案中的根页面。下面是我用来重定向用户的代码。

```
public virtual ActionResult UploadFile(string returnURL)
{
    // Do some work here...
    return Redirect(returnURL);
} 
```

有什么方法可以强制 IE 8 保留片段并表现得像 Chrome 和 Firefox？

如果没有，是否有解决此问题的标准方法？

我还查看了 Eric Law关于 https 重定向和片段的[文章。](http://blogs.msdn.com/b/ieinternals/archive/2011/05/17/url-fragments-and-redirects-anchor-hash-missing.aspx)它提供了一些关于不同浏览器如何处理片段的见解。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-11T17:32:36.990

你可能对这个很感兴趣。URL 片段对 URL 唯一性不重要，例如在决定是否将页面添加到浏览器缓存或将 URL 添加到浏览器导航历史记录时。

URL 查询包含在 URL 唯一性分类中，但片段不包含。

可能是 IE8 正在重定向到带有片段的 URL，但它正在从浏览器缓存加载根页面（没有片段），因为片段对于 URL 缓存等效性测试并不重要。

测试这一理论的一种蛮力方法可能是清除浏览器缓存并将所有页面标记为服务器上的无缓存，看看这是否会改变 IE8 行为。如果 IE8 在页面不在浏览器缓存中的情况下重定向到所需页面且片段完整，那么这将证实该理论。这只是一个测试场景，不是生产部署的解决方案。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-26T19:15:08.763

我已经构建了一个小应用程序来重现它。它在 IE9 和 Chrome 中按预期工作。

我有两个建议给你：

*   如果是缓存问题，在 URL 中添加时间戳可能会有所帮助。尝试构建这样的 URL：

`http://localhost:50173/Sample/?timestamp=26.07.2012%2021:11:00#myLocation`

*   如果它不起作用，解决方法可能是在最后呈现一个 javascript，它将导航：

`window.location = window.location + "#myLocation";`

# php - 禁用或只读 - 选择框问题

> ID：11437863
> 
> 赞同：0
> 
> 时间：2012-07-11T17:11:32.413
> 
> 标签：php, html, yii

在这个表单上，我有一些不应该被某些用户编辑的输入字段和选择框。

但是，无论如何我都需要插入那些无法插入的字段。

我正在考虑将这些值传递给隐藏字段（这应该在 js 中完成吗？）；并改为使用这些隐藏字段提交表单。

这是一个好方法吗？请指教。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-11T17:16:33.663

您可以使用隐藏字段将数据传递到表单中，但请记住，如果有人计划恶作剧，他们可以使用 Firebug 等工具编辑值并提交它们，因此依赖隐藏字段可能会导致问题。

如果您想获得适当的安全性，则必须在服务器端做所有事情 - 检查客户端在提交表单时是否有权访问这些字段。如果他们这样做了，取他们提交的值；否则，请改用 PHP 代码中存储的默认值。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-11T17:13:59.260

只需在表单中使用隐藏字段，如下所示：

```
<input type="hidden" name="id" value="00001" /> 
```

不需要js。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-11T17:54:07.987

只需将它们放在[隐藏字段中](http://www.yiiframework.com/doc/api/1.1/CActiveForm#hiddenField-detail)：

```
echo $form->hiddenField($model,'property'); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-11T17:23:28.197

我会在复选框上禁用，并且可能在文本字段上使用只读。问题是你知道他们在提交时应该有什么价值。因此，在服务器端，您可以忽略它们并使用您选择的值。如果有人正在操纵发布请求，则忽略数据。

# struts2 - Struts 2 ApplicationResources.properties 错误

> ID：11437865
> 
> 赞同：0
> 
> 时间：2012-07-11T17:11:40.557
> 
> 标签：struts2

我在我的应用程序中使用 struts2。

```
<s:submit cssClass="button" key="btn.search" tabindex="12" /> 
```

在 ApplicationResources.properties 文件中我有

```
btn.search = Go 
```

我在提交页面时遇到错误，

```
OgnlValueStac W com.opensymphony.xwork2.util.logging.commons.CommonsLogger warn 
  Error setting expression 'btn.search' with value '[Ljava.lang.String;@14f414f4'
  ognl.OgnlException: target is null for setProperty(null, "search", [Ljava.lang.String;@14f414f4) 
```

有什么问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-11T18:25:18.377

被`key`作为参数提交，OGNL 试图从 中获取一个对象以`btn`通过`ValueStack`调用来设置参数`getBtn().setSearch("");`，但是，由于堆栈中没有 btn 对象，因此会发生空目标异常。

这应该有效：

```
<s:set name="buttonText"><s:text name="btn.search"/></s:set>
<s:submit cssClass="button" value="%{#buttonText}" tabindex="12"/> 
```

或者，正如戴夫在他的回答中指出的那样，如果您的操作类扩展，这也应该有效`ActionSupport`：

```
<s:submit cssClass="button" value="%{getText('btn.search')}" tabindex="12"/> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-11T20:18:34.263

`key`属性是和属性*的*`name`简写。`value`

Using`key`意味着你假设一个名为`btn.search`.

While you *may* set a value to the results of a text property lookup, you can also use it directly:

```
<s:submit value="%{getText('btn.search')}" /> 
```

# wpf - 在 xamDataGrid 中创建水平分隔符

> ID：11437869
> 
> 赞同：0
> 
> 时间：2012-07-11T17:11:54.043
> 
> 标签：wpf, xaml, infragistics, separator, xamdatagrid

我想要某种方式在 XamDataGrid 中指示数据项已知的两条记录之间的分隔或线。目前我正在通过向包含渐变的行添加背景画笔来做到这一点（顶行在底部附近有纯红色，底行在顶部附近有纯红色），导致外观漂亮的红色两行之间的线。转换器根据包含特殊数据项的字段检查数据项，如果匹配，则应用画笔。但是，现在我需要为行添加实际背景。

![示例运行，显示所需的红线，以及正常背景的示例（黄色）](../Images/e6216c6b889b58e42312ef3ff390a0fe.png)

那么有没有办法将两个 LinearGradientBrushes 应用于同一行？或者，我尝试将两个边框渐变的 StopCollections 添加到普通背景画笔中，但这意味着对于每个普通背景，都有 3 个可能的画笔（简单，顶部红色，底部红色），当你有 12可能的背景。

在不同的切线上，是否可以以除此背景黑客之外的任何其他方式在 xamDataGrid 中添加一条线或显示一个分隔符？可能是边框黑客或将视觉元素插入网格中由行索引指定的位置的实际方法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-18T00:23:05.150

您可以为 DataRecordCellArea 添加样式以显示单元格下方的边框。例如：

```
<Style TargetType="{x:Type igDP:DataRecordCellArea}">
    <Setter Property="BorderBrush" Value="Red"/>
    <Setter Property="BorderThickness" Value="0,0,0,2"/>
</Style> 
```

请注意，您仍然需要添加必须有条件地使用它的逻辑。

# apache-camel - 从 Camel 端点确认 JMS 消息的问题

> ID：11437870
> 
> 赞同：0
> 
> 时间：2012-07-11T17:12:01.240
> 
> 标签：apache-camel, spring-jms

我有一个简单的 Camel 应用程序，它正在跟踪 JMS 端点。我目前遇到一个问题，似乎没有确认接收到的 JMS 消息（它正在从队列中读取而没有放置任何消息，并且当前队列深度没有减少）。

关于可能导致此问题的任何想法？

**追踪路线**

```
 from("jms.tracer")
        .id("openlink-input-trace")
        .process(new Processor()
        {
            @Override
            public void process(Exchange exchange) throws Exception 
            {
                System.out.println("test");
            }
        }); 
```

**Spring JMS 配置**

```
<bean id="tracerQueueConnFactory" class="org.springframework.jndi.JndiObjectFactoryBean">
    <property name="jndiTemplate" ref="jndiTemplate" />
    <property name="jndiName" value="${jms.openlink-tracer-queue-qcf.jndiname}" />
</bean>

<bean id="proxyTracerQueueConnFactory" class="org.springframework.jms.connection.UserCredentialsConnectionFactoryAdapter">
    <property name="targetConnectionFactory" ref="tracerQueueConnFactory" />
    <property name="username" value="${jms.openlink-tracer-queue-qcf.username}" />
    <property name="password" value="${jms.openlink-tracer-queue-qcf.password}" />
</bean>

<bean id="jmsTrace" class="org.apache.camel.component.jms.JmsComponent">
    <property name="connectionFactory" ref="proxyTracerQueueConnFactory" />
    <property name="destinationResolver" ref="jndiResolver" />
</bean> 
```

**Spring端点配置**

```
 <endpoint id="jms.tracer"
              uri="jmsTrace:queue:${jms.openlink-tracer-queue.jndiname}" /> 
```

**编辑：**

这是使用 TibcoEMS 作为代理。

我可以在日志中看到以下内容：

> [2012 年 7 月 11 日 11:39:46] 调试 [] (AbstractPollingMessageListenerContainer.java:313) - 从消费者 [QueueReceiver[queue=f2b.prototype.tracer.queue] 收到类型为 [class com.tibco.tibjms.TibjmsObjectMessage] 的消息] 会话 [com.tibco.tibjms.TibjmsSession@16c143]
> 
> [2012 年 7 月 11 日 11:39:46] 调试 [] (EndpointMessageListener.java:72) - Endpoint[jmsTrace://queue:/user_dev/db/us/GTO/CIFramework/S001DEV/f2b.prototype.tracer.queue: queue] 消费者收到 JMS 消息： ObjectMessage={ Header={ JMSMessageID={ID:db_us_GTO_CIFramework_S001DEV.20D84FDA9F769B1A97:3} JMSDestination={Queue[f2b.prototype.tracer.queue]} JMSReplyTo={null} JMSDeliveryMode={PERSISTENT} JMSRedelivered= {false} JMSCorrelationID={null} JMSType={null} JMSTimestamp={Wed Jul 11​​ 10:53:48 CDT 2012} JMSExpiration={0} JMSPriority={4} } Properties={ } Object={com.db.cif .tracer.jpa.model.JpaTraceEventMessage@1dfe3f} }
> 
> [2012 年 7 月 11 日 11:39:46] 调试 [] (JmsTemplate.java:464) - 在 JMS 会话上执行回调：com.tibco.tibjms.TibjmsSession@16c143
> 
> [2012 年 7 月 11 日 11:39:46] 调试 [] (JmsConfiguration.java:266) - 将 JMS 消息发送到：Queue[f2b.prototype.tracer.queue] 消息：ObjectMessage={ Header={ JMSMessageID={null} JMSDestination={null} JMSReplyTo={null} JMSDeliveryMode={PERSISTENT} JMSRedelivered={false} JMSCorrelationID={null} JMSType={null} JMSTimestamp={0} JMSExpiration={0} JMSPriority={4} } Properties={ }对象={com.db.cif.tracer.jpa.model.JpaTraceEventMessage@16119a} }
> 
> 测试
> 
> [2012 年 7 月 11 日 11:39:52] 调试 [] (AbstractPollingMessageListenerContainer.java:313) - 从消费者 [QueueReceiver[queue=f2b.prototype.tracer.queue] 收到类型为 [class com.tibco.tibjms.TibjmsObjectMessage] 的消息] 会话 [com.tibco.tibjms.TibjmsSession@16c143]
> 
> [2012 年 7 月 11 日 11:39:52] 调试 [] (EndpointMessageListener.java:72) - Endpoint[jmsTrace://queue:/user_dev/db/us/GTO/CIFramework/S001DEV/f2b.prototype.tracer.queue: queue] 消费者收到 JMS 消息： ObjectMessage={ Header={ JMSMessageID={ID:db_us_GTO_CIFramework_S001DEV.20D84FDA9F769B1A97:4} JMSDestination={Queue[f2b.prototype.tracer.queue]} JMSReplyTo={null} JMSDeliveryMode={PERSISTENT} JMSRedelivered= {false} JMSCorrelationID={null} JMSType={null} JMSTimestamp={Wed Jul 11​​ 10:53:50 CDT 2012} JMSExpiration={0} JMSPriority={4} } Properties={ } Object={com.db.cif .tracer.jpa.model.JpaTraceEventMessage@1d81bc5} }
> 
> [2012 年 7 月 11 日 11:39:52] 调试 [] (JmsTemplate.java:464) - 在 JMS 会话上执行回调：com.tibco.tibjms.TibjmsSession@16c143
> 
> [2012 年 7 月 11 日 11:39:52] 调试 [] (JmsConfiguration.java:266) - 将 JMS 消息发送到：Queue[f2b.prototype.tracer.queue] 消息：ObjectMessage={ Header={ JMSMessageID={null} JMSDestination={null} JMSReplyTo={null} JMSDeliveryMode={PERSISTENT} JMSRedelivered={false} JMSCorrelationID={null} JMSType={null} JMSTimestamp={0} JMSExpiration={0} JMSPriority={4} } Properties={ }对象={com.db.cif.tracer.jpa.model.JpaTraceEventMessage@3b09b4} }

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-11T18:52:04.320

我知道我在做一些愚蠢的事情！

我仔细查看了跟踪消息，并意识到在我的上下文中启用了跟踪，导致我的跟踪器路由被跟踪，因此是一个不错的小无限循环。

# jquery - 将鼠标悬停在子项上时删除 JQuery 悬停事件

> ID：11437873
> 
> 赞同：1
> 
> 时间：2012-07-11T17:12:20.703
> 
> 标签：jquery, hover, tooltip

我正在构建一个工具提示，如果您将鼠标悬停在标记上，则会出现工具提示。

HTML：

```
<div class="trigger" data-loc="locationE" id="locationE">
    <div class="tooltip">
        <h2>Here is a title</h2>
        <p>Here is some Compy About this location</p>
        <h3>215.237.9932</h3>
    </div>
</div> 
```

查询：

```
$(document).ready(function() {
    $(".tooltip").each(function() {
        toolHeight = $(this).outerHeight();
        toolHeightPlus = $(this).outerHeight() + 20;
        $(this).css({
            "top": -+toolHeight
        });
    });
    $(".trigger").hover(function() {
        $("#" + $(this).data("loc") + " .tooltip").stop().animate({
            "opacity": "1",
            "top": -+toolHeightPlus
        });
    }, function() {
        $("#" + $(this).data("loc") + " .tooltip").stop().animate({
            "opacity": "0",
            "top": -+toolHeight
        });
    });
}); 
```

我使用 data 属性的原因在这里不需要提及，因为它是应用程序的另一部分。我遇到的问题是，当用户将鼠标悬停在工具提示所在的位置时会触发工具提示动画，即使不透明度为 0。我希望工具提示仅在用户悬停在`.trigger`不`.tooltip`透明度为零的情况下触发. 我将如何做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-11T17:14:57.703

将工具提示标记移出触发器。由于触发器 div 包装了工具提示，它实际上是弹出工具提示。如果您打算*仅*通过将鼠标悬停在触发器上来执行此操作，则将它们设为单独的元素。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-11T17:22:06.647

您的请求看起来与您的 HTML 有问题，因为您的 HTML 中没有空间 only ，所以在我看来，除非您向不是元素`.trigger`的元素添加更多内容，否则您的请求永远无法工作。`.trigger``.tooltip`

如果您确实为`.trigger`元素添加了更多空间，那么您可以查看[事件的目标，](http://api.jquery.com/event.target/)并在执行之前查看它是否具有这样的正确类：

```
$(".trigger").hover(function(e) {
    if (!$(e.target).hasClass(".trigger")) return;
    $("#" + $(this).data("loc") + " .tooltip").stop().animate({
        "opacity": "1",
        "top": -+toolHeightPlus
    });
}, function(e) {
    $("#" + $(this).data("loc") + " .tooltip").stop().animate({
        "opacity": "0",
        "top": -+toolHeight
    });
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-11T17:23:55.493

一种选择是在隐藏时将工具提示 css 显示设置为“无”，并在显示时设置为“阻止”。这将防止 .tooltip html 元素在不应该可见时占用任何空间。

# mongodb - 从 cloudify 安装 MongoDB 时收到 ZipException

> ID：11437888
> 
> 赞同：2
> 
> 时间：2012-07-11T17:13:33.703
> 
> 标签：mongodb, installation, cloudify

我在 cloudify 上尝试了 10 分钟的快速入门，但偶然发现了一个错误。我首先安装了 jdk，添加`JAVA_HOME`到环境变量中，然后为 cloudify shell 启动了 .bat 文件。（旁注：我是 Windows 7 用户）。

然后我尝试了 petclinic-simple 的安装应用程序。之后在安装过程中出现错误（我忘记了，但我认为这是 mongoDB 的安装错误）。接下来，我决定 teardown-localcloud -force 然后关闭 cloudify shell。之后，我再次尝试了宠物诊所的安装应用程序，但我得到了一个不同的错误，该错误会重复直到超时：

```
[127.0.0.1/127.0.0.1] mongod-1 INSTALL invoked
....
[127.0.0.1/127.0.0.1] mongod-1 INSTALL failed. Reason: Event lifecycle external process exited with abnormal status code: 1 Caught
: : Error while expanding C:\Users\Calvin\.cloudify\mongod1\mongodb-win32-i386-2.0.2.zip
java.util.zip.ZipException: archive is not a ZIP archive
: Error while expanding C:\Users\Calvin\.cloudify\mongod1\mongodb-win32-i386-2.0.2.zip
java.util.zip.ZipException: archive is not a ZIP archive
at org.apache.tools.ant.taskdefs.Expand.expandFile(Expand.java:192)
at org.apache.tools.ant.taskdefs.Expand.execute(Expand.java:132)
at org.apache.tools.ant.UnknownElement.execute(UnknownElement.java:291)
at org.apache.tools.ant.dispatch.DispatchUtils.execute(DispatchUtils.java:106)
at mongod_install.run(mongod_install.groovy:42) [ERROR]
...Application installation timed out. Configure the timeout using the -timeout flag.
Operation failed. 
```

一般来说，我对编程还是很陌生，所以如果我不理解许多复杂的事情，请原谅。我还尝试重新启动，删除文件夹，然后重新提取一个新文件夹。

**编辑：** 这是 --verbose 但超时 5 的输出

```
 cloudify@default> teardown-localcloud -force
    Teardown will shut down the local cloud. Do you want to continue  [y/n]?
    Failed to fetch the currently deployed applications list. Continuing teardown-localcloud.
    ..
    SHUTTING DOWN CLOUDIFY AGENT
    SHUTTING DOWN CLOUDIFY MANAGEMENT COMPONENTS
    SUCCESSFULLY COMPLETED LOCAL-CLOUD TEARDOWN
    cloudify@default> bootstrap-localcloud
    STARTING CLOUDIFY MANAGEMENT
    ..
    STARTING CLOUDIFY WEBUI
    ..
    STARTING CLOUDIFY REST
    CLOUDIFY LOCAL-CLOUD STARTED

    LOCAL-CLOUD INFO :
                    CLOUDIFY MANAGEMENT     http://127.0.0.1:8099/
                    CLOUDIFY GATEWAY        http://127.0.0.1:8100/
    Local-cloud started successfully. Use the teardown-localcloud command to shutdown all processes.
    cloudify@default> install-application --verbose -timeout 5 C:/Users/Calvin/Desktop/cloudify/recipes/apps/petclinic-simple
    Validating file petclinic-simple
    Uploading application petclinic
    Application [petclinic] with 2 services
    Service [mongod] 1 planned instances
    Service [tomcat] depends on [mongod] 1 planned instances
    .
    Deploying mongod with 1 planned instances.
    Deploying tomcat with 1 planned instances.
    ...
    [127.0.0.1/127.0.0.1] mongod-1 INSTALL invoked
    .....
    [127.0.0.1/127.0.0.1] mongod-1 INSTALL failed. Reason: Event lifecycle external process exited with abnormal status code: 1 Caught
    : : Error while expanding C:\Users\Calvin\.cloudify\mongod1\mongodb-win32-i386-2.0.2.zip
    java.util.zip.ZipException: archive is not a ZIP archive
    : Error while expanding C:\Users\Calvin\.cloudify\mongod1\mongodb-win32-i386-2.0.2.zip
    java.util.zip.ZipException: archive is not a ZIP archive
            at org.apache.tools.ant.taskdefs.Expand.expandFile(Expand.java:192)
            at org.apache.tools.ant.taskdefs.Expand.execute(Expand.java:132)
            at org.apache.tools.ant.UnknownElement.execute(UnknownElement.java:291)
            at org.apache.tools.ant.dispatch.DispatchUtils.execute(DispatchUtils.java:106)
            at mongod_install.run(mongod_install.groovy:42) [ERROR]
    [127.0.0.1/127.0.0.1] tomcat-1 INSTALL invoked
    ....
    [127.0.0.1/127.0.0.1] mongod-1 INSTALL invoked
    .
    [127.0.0.1/127.0.0.1] mongod-1 INSTALL failed. Reason: Event lifecycle external process exited with abnormal status code: 1 Caught
    : : Error while expanding C:\Users\Calvin\.cloudify\mongod1\mongodb-win32-i386-2.0.2.zip
    java.util.zip.ZipException: archive is not a ZIP archive
    : Error while expanding C:\Users\Calvin\.cloudify\mongod1\mongodb-win32-i386-2.0.2.zip
    java.util.zip.ZipException: archive is not a ZIP archive
            at org.apache.tools.ant.taskdefs.Expand.expandFile(Expand.java:192)
            at org.apache.tools.ant.taskdefs.Expand.execute(Expand.java:132)
            at org.apache.tools.ant.UnknownElement.execute(UnknownElement.java:291)
            at org.apache.tools.ant.dispatch.DispatchUtils.execute(DispatchUtils.java:106)
            at mongod_install.run(mongod_install.groovy:42) [ERROR]
    .
    [127.0.0.1/127.0.0.1] mongod-1 INSTALL invoked
    .
    [127.0.0.1/127.0.0.1] mongod-1 INSTALL failed. Reason: Event lifecycle external process exited with abnormal status code: 1 Caught
    : : Error while expanding C:\Users\Calvin\.cloudify\mongod1\mongodb-win32-i386-2.0.2.zip
    java.util.zip.ZipException: archive is not a ZIP archive
    : Error while expanding C:\Users\Calvin\.cloudify\mongod1\mongodb-win32-i386-2.0.2.zip
    java.util.zip.ZipException: archive is not a ZIP archive
            at org.apache.tools.ant.taskdefs.Expand.expandFile(Expand.java:192)
            at org.apache.tools.ant.taskdefs.Expand.execute(Expand.java:132)
            at org.apache.tools.ant.UnknownElement.execute(UnknownElement.java:291)
            at org.apache.tools.ant.dispatch.DispatchUtils.execute(DispatchUtils.java:106)
            at mongod_install.run(mongod_install.groovy:42) [ERROR]
    .....
    [127.0.0.1/127.0.0.1] mongod-1 INSTALL invoked
    .
    [127.0.0.1/127.0.0.1] mongod-1 INSTALL failed. Reason: Event lifecycle external process exited with abnormal status code: 1 Caught
    : : Error while expanding C:\Users\Calvin\.cloudify\mongod1\mongodb-win32-i386-2.0.2.zip
    java.util.zip.ZipException: archive is not a ZIP archive
    : Error while expanding C:\Users\Calvin\.cloudify\mongod1\mongodb-win32-i386-2.0.2.zip
    java.util.zip.ZipException: archive is not a ZIP archive
            at org.apache.tools.ant.taskdefs.Expand.expandFile(Expand.java:192)
            at org.apache.tools.ant.taskdefs.Expand.execute(Expand.java:132)
            at org.apache.tools.ant.UnknownElement.execute(UnknownElement.java:291)
            at org.apache.tools.ant.dispatch.DispatchUtils.execute(DispatchUtils.java:106)
            at mongod_install.run(mongod_install.groovy:42) [ERROR]
    ...
    [127.0.0.1/127.0.0.1] mongod-1 INSTALL invoked
    ...
    [127.0.0.1/127.0.0.1] mongod-1 INSTALL failed. Reason: Event lifecycle external process exited with abnormal status code: 1 Caught
    : : Error while expanding C:\Users\Calvin\.cloudify\mongod1\mongodb-win32-i386-2.0.2.zip
    java.util.zip.ZipException: archive is not a ZIP archive
    : Error while expanding C:\Users\Calvin\.cloudify\mongod1\mongodb-win32-i386-2.0.2.zip
    java.util.zip.ZipException: archive is not a ZIP archive
            at org.apache.tools.ant.taskdefs.Expand.expandFile(Expand.java:192)
            at org.apache.tools.ant.taskdefs.Expand.execute(Expand.java:132)
            at org.apache.tools.ant.UnknownElement.execute(UnknownElement.java:291)
            at org.apache.tools.ant.dispatch.DispatchUtils.execute(DispatchUtils.java:106)
            at mongod_install.run(mongod_install.groovy:42) [ERROR]
    ...
    [127.0.0.1/127.0.0.1] mongod-1 INSTALL invoked
    ...
    [127.0.0.1/127.0.0.1] mongod-1 INSTALL failed. Reason: Event lifecycle external process exited with abnormal status code: 1 Caught
    : : Error while expanding C:\Users\Calvin\.cloudify\mongod1\mongodb-win32-i386-2.0.2.zip
    java.util.zip.ZipException: archive is not a ZIP archive
    : Error while expanding C:\Users\Calvin\.cloudify\mongod1\mongodb-win32-i386-2.0.2.zip
    java.util.zip.ZipException: archive is not a ZIP archive
            at org.apache.tools.ant.taskdefs.Expand.expandFile(Expand.java:192)
            at org.apache.tools.ant.taskdefs.Expand.execute(Expand.java:132)
            at org.apache.tools.ant.UnknownElement.execute(UnknownElement.java:291)
            at org.apache.tools.ant.dispatch.DispatchUtils.execute(DispatchUtils.java:106)
            at mongod_install.run(mongod_install.groovy:42) [ERROR]
    ...
    [127.0.0.1/127.0.0.1] mongod-1 INSTALL invoked
    ...
    [127.0.0.1/127.0.0.1] mongod-1 INSTALL failed. Reason: Event lifecycle external process exited with abnormal status code: 1 Caught
    : : Error while expanding C:\Users\Calvin\.cloudify\mongod1\mongodb-win32-i386-2.0.2.zip
    java.util.zip.ZipException: archive is not a ZIP archive
    : Error while expanding C:\Users\Calvin\.cloudify\mongod1\mongodb-win32-i386-2.0.2.zip
    java.util.zip.ZipException: archive is not a ZIP archive
            at org.apache.tools.ant.taskdefs.Expand.expandFile(Expand.java:192)
            at org.apache.tools.ant.taskdefs.Expand.execute(Expand.java:132)
            at org.apache.tools.ant.UnknownElement.execute(UnknownElement.java:291)
            at org.apache.tools.ant.dispatch.DispatchUtils.execute(DispatchUtils.java:106)
            at mongod_install.run(mongod_install.groovy:42) [ERROR]
    ...
    [127.0.0.1/127.0.0.1] mongod-1 INSTALL invoked
    ...
    [127.0.0.1/127.0.0.1] mongod-1 INSTALL failed. Reason: Event lifecycle external process exited with abnormal status code: 1 Caught
    : : Error while expanding C:\Users\Calvin\.cloudify\mongod1\mongodb-win32-i386-2.0.2.zip
    java.util.zip.ZipException: archive is not a ZIP archive
    : Error while expanding C:\Users\Calvin\.cloudify\mongod1\mongodb-win32-i386-2.0.2.zip
    java.util.zip.ZipException: archive is not a ZIP archive
            at org.apache.tools.ant.taskdefs.Expand.expandFile(Expand.java:192)
            at org.apache.tools.ant.taskdefs.Expand.execute(Expand.java:132)
            at org.apache.tools.ant.UnknownElement.execute(UnknownElement.java:291)
            at org.apache.tools.ant.dispatch.DispatchUtils.execute(DispatchUtils.java:106)
            at mongod_install.run(mongod_install.groovy:42) [ERROR]
    ...
    [127.0.0.1/127.0.0.1] mongod-1 INSTALL invoked
    ...
    [127.0.0.1/127.0.0.1] mongod-1 INSTALL failed. Reason: Event lifecycle external process exited with abnormal status code: 1 Caught
    : : Error while expanding C:\Users\Calvin\.cloudify\mongod1\mongodb-win32-i386-2.0.2.zip
    java.util.zip.ZipException: archive is not a ZIP archive
    : Error while expanding C:\Users\Calvin\.cloudify\mongod1\mongodb-win32-i386-2.0.2.zip
    java.util.zip.ZipException: archive is not a ZIP archive
            at org.apache.tools.ant.taskdefs.Expand.expandFile(Expand.java:192)
            at org.apache.tools.ant.taskdefs.Expand.execute(Expand.java:132)
            at org.apache.tools.ant.UnknownElement.execute(UnknownElement.java:291)
            at org.apache.tools.ant.dispatch.DispatchUtils.execute(DispatchUtils.java:106)
            at mongod_install.run(mongod_install.groovy:42) [ERROR]
    ...
    [127.0.0.1/127.0.0.1] mongod-1 INSTALL invoked
    ...
    [127.0.0.1/127.0.0.1] mongod-1 INSTALL failed. Reason: Event lifecycle external process exited with abnormal status code: 1 Caught
    : : Error while expanding C:\Users\Calvin\.cloudify\mongod1\mongodb-win32-i386-2.0.2.zip
    java.util.zip.ZipException: archive is not a ZIP archive
    : Error while expanding C:\Users\Calvin\.cloudify\mongod1\mongodb-win32-i386-2.0.2.zip
    java.util.zip.ZipException: archive is not a ZIP archive
            at org.apache.tools.ant.taskdefs.Expand.expandFile(Expand.java:192)
            at org.apache.tools.ant.taskdefs.Expand.execute(Expand.java:132)
            at org.apache.tools.ant.UnknownElement.execute(UnknownElement.java:291)
            at org.apache.tools.ant.dispatch.DispatchUtils.execute(DispatchUtils.java:106)
            at mongod_install.run(mongod_install.groovy:42) [ERROR]
    ...
    [127.0.0.1/127.0.0.1] mongod-1 INSTALL invoked
    .
    [127.0.0.1/127.0.0.1] mongod-1 INSTALL failed. Reason: Event lifecycle external process exited with abnormal status code: 1 Caught
    : : Error while expanding C:\Users\Calvin\.cloudify\mongod1\mongodb-win32-i386-2.0.2.zip
    java.util.zip.ZipException: archive is not a ZIP archive
    : Error while expanding C:\Users\Calvin\.cloudify\mongod1\mongodb-win32-i386-2.0.2.zip
    java.util.zip.ZipException: archive is not a ZIP archive
            at org.apache.tools.ant.taskdefs.Expand.expandFile(Expand.java:192)
            at org.apache.tools.ant.taskdefs.Expand.execute(Expand.java:132)
            at org.apache.tools.ant.UnknownElement.execute(UnknownElement.java:291)
            at org.apache.tools.ant.dispatch.DispatchUtils.execute(DispatchUtils.java:106)
            at mongod_install.run(mongod_install.groovy:42) [ERROR]
    .....
    [127.0.0.1/127.0.0.1] mongod-1 INSTALL invoked
    .
    [127.0.0.1/127.0.0.1] mongod-1 INSTALL failed. Reason: Event lifecycle external process exited with abnormal status code: 1 Caught
    : : Error while expanding C:\Users\Calvin\.cloudify\mongod1\mongodb-win32-i386-2.0.2.zip
    java.util.zip.ZipException: archive is not a ZIP archive
    : Error while expanding C:\Users\Calvin\.cloudify\mongod1\mongodb-win32-i386-2.0.2.zip
    java.util.zip.ZipException: archive is not a ZIP archive
            at org.apache.tools.ant.taskdefs.Expand.expandFile(Expand.java:192)
            at org.apache.tools.ant.taskdefs.Expand.execute(Expand.java:132)
            at org.apache.tools.ant.UnknownElement.execute(UnknownElement.java:291)
            at org.apache.tools.ant.dispatch.DispatchUtils.execute(DispatchUtils.java:106)
            at mongod_install.run(mongod_install.groovy:42) [ERROR]
    ...
    [127.0.0.1/127.0.0.1] mongod-1 INSTALL invoked
    ....
    [127.0.0.1/127.0.0.1] mongod-1 INSTALL failed. Reason: Event lifecycle external process exited with abnormal status code: 1 Caught
    : : Error while expanding C:\Users\Calvin\.cloudify\mongod1\mongodb-win32-i386-2.0.2.zip
    java.util.zip.ZipException: archive is not a ZIP archive
    : Error while expanding C:\Users\Calvin\.cloudify\mongod1\mongodb-win32-i386-2.0.2.zip
    java.util.zip.ZipException: archive is not a ZIP archive
            at org.apache.tools.ant.taskdefs.Expand.expandFile(Expand.java:192)
            at org.apache.tools.ant.taskdefs.Expand.execute(Expand.java:132)
            at org.apache.tools.ant.UnknownElement.execute(UnknownElement.java:291)
            at org.apache.tools.ant.dispatch.DispatchUtils.execute(DispatchUtils.java:106)
            at mongod_install.run(mongod_install.groovy:42) [ERROR]
    ...
    [127.0.0.1/127.0.0.1] mongod-1 INSTALL invoked
    ...
    [127.0.0.1/127.0.0.1] mongod-1 INSTALL failed. Reason: Event lifecycle external process exited with abnormal status code: 1 Caught
    : : Error while expanding C:\Users\Calvin\.cloudify\mongod1\mongodb-win32-i386-2.0.2.zip
    java.util.zip.ZipException: archive is not a ZIP archive
    : Error while expanding C:\Users\Calvin\.cloudify\mongod1\mongodb-win32-i386-2.0.2.zip
    java.util.zip.ZipException: archive is not a ZIP archive
            at org.apache.tools.ant.taskdefs.Expand.expandFile(Expand.java:192)
            at org.apache.tools.ant.taskdefs.Expand.execute(Expand.java:132)
            at org.apache.tools.ant.UnknownElement.execute(UnknownElement.java:291)
            at org.apache.tools.ant.dispatch.DispatchUtils.execute(DispatchUtils.java:106)
            at mongod_install.run(mongod_install.groovy:42) [ERROR]
    ...
    [127.0.0.1/127.0.0.1] mongod-1 INSTALL invoked
    ...
    [127.0.0.1/127.0.0.1] mongod-1 INSTALL failed. Reason: Event lifecycle external process exited with abnormal status code: 1 Caught
    : : Error while expanding C:\Users\Calvin\.cloudify\mongod1\mongodb-win32-i386-2.0.2.zip
    java.util.zip.ZipException: archive is not a ZIP archive
    : Error while expanding C:\Users\Calvin\.cloudify\mongod1\mongodb-win32-i386-2.0.2.zip
    java.util.zip.ZipException: archive is not a ZIP archive
            at org.apache.tools.ant.taskdefs.Expand.expandFile(Expand.java:192)
            at org.apache.tools.ant.taskdefs.Expand.execute(Expand.java:132)
            at org.apache.tools.ant.UnknownElement.execute(UnknownElement.java:291)
            at org.apache.tools.ant.dispatch.DispatchUtils.execute(DispatchUtils.java:106)
            at mongod_install.run(mongod_install.groovy:42) [ERROR]
    ...
    [127.0.0.1/127.0.0.1] mongod-1 INSTALL invoked
    ...
    [127.0.0.1/127.0.0.1] mongod-1 INSTALL failed. Reason: Event lifecycle external process exited with abnormal status code: 1 Caught
    : : Error while expanding C:\Users\Calvin\.cloudify\mongod1\mongodb-win32-i386-2.0.2.zip
    java.util.zip.ZipException: archive is not a ZIP archive
    : Error while expanding C:\Users\Calvin\.cloudify\mongod1\mongodb-win32-i386-2.0.2.zip
    java.util.zip.ZipException: archive is not a ZIP archive
            at org.apache.tools.ant.taskdefs.Expand.expandFile(Expand.java:192)
            at org.apache.tools.ant.taskdefs.Expand.execute(Expand.java:132)
            at org.apache.tools.ant.UnknownElement.execute(UnknownElement.java:291)
            at org.apache.tools.ant.dispatch.DispatchUtils.execute(DispatchUtils.java:106)
            at mongod_install.run(mongod_install.groovy:42) [ERROR]
    ...
    [127.0.0.1/127.0.0.1] mongod-1 INSTALL invoked
    .
    [127.0.0.1/127.0.0.1] mongod-1 INSTALL failed. Reason: Event lifecycle external process exited with abnormal status code: 1 Caught
    : : Error while expanding C:\Users\Calvin\.cloudify\mongod1\mongodb-win32-i386-2.0.2.zip
    java.util.zip.ZipException: archive is not a ZIP archive
    : Error while expanding C:\Users\Calvin\.cloudify\mongod1\mongodb-win32-i386-2.0.2.zip
    java.util.zip.ZipException: archive is not a ZIP archive
            at org.apache.tools.ant.taskdefs.Expand.expandFile(Expand.java:192)
            at org.apache.tools.ant.taskdefs.Expand.execute(Expand.java:132)
            at org.apache.tools.ant.UnknownElement.execute(UnknownElement.java:291)
            at org.apache.tools.ant.dispatch.DispatchUtils.execute(DispatchUtils.java:106)
            at mongod_install.run(mongod_install.groovy:42) [ERROR]
    ...
    [127.0.0.1/127.0.0.1] mongod-1 INSTALL invoked
    ...
    [127.0.0.1/127.0.0.1] mongod-1 INSTALL failed. Reason: Event lifecycle external process exited with abnormal status code: 1 Caught
    : : Error while expanding C:\Users\Calvin\.cloudify\mongod1\mongodb-win32-i386-2.0.2.zip
    java.util.zip.ZipException: archive is not a ZIP archive
    : Error while expanding C:\Users\Calvin\.cloudify\mongod1\mongodb-win32-i386-2.0.2.zip
    java.util.zip.ZipException: archive is not a ZIP archive
            at org.apache.tools.ant.taskdefs.Expand.expandFile(Expand.java:192)
            at org.apache.tools.ant

.taskdefs.Expand.execute(Expand.java:132)
        at org.apache.tools.ant.UnknownElement.execute(UnknownElement.java:291)
        at org.apache.tools.ant.dispatch.DispatchUtils.execute(DispatchUtils.java:106)
        at mongod_install.run(mongod_install.groovy:42) [ERROR]
...
[127.0.0.1/127.0.0.1] mongod-1 INSTALL invoked
.Operation failed. java.util.concurrent.TimeoutException: Application installation timed out. Configure the timeout using the -tim
eout flag.
        at org.cloudifysource.shell.ConditionLatch.waitFor(ConditionLatch.java:146)
        at org.cloudifysource.shell.rest.RestLifecycleEventsLatch.waitForLifecycleEvents(RestLifecycleEventsLatch.java:79)
        at org.cloudifysource.shell.rest.RestAdminFacade.waitForLifecycleEvents(RestAdminFacade.java:275)
        at org.cloudifysource.shell.commands.InstallApplication.doExecute(InstallApplication.java:113)
        at org.cloudifysource.shell.commands.AbstractGSCommand.execute(AbstractGSCommand.java:83)
        at org.cloudifysource.shell.commands.AdminAwareCommand.execute(AdminAwareCommand.java:36)
        at org.apache.felix.gogo.commands.basic.AbstractCommand.execute(AbstractCommand.java:35)
        at org.apache.felix.gogo.runtime.Closure.executeCmd(Closure.java:474)
        at org.apache.felix.gogo.runtime.Closure.executeStatement(Closure.java:400)
        at org.apache.felix.gogo.runtime.Pipe.run(Pipe.java:108)
        at org.apache.felix.gogo.runtime.Closure.execute(Closure.java:183)
        at org.apache.felix.gogo.runtime.Closure.execute(Closure.java:120)
        at org.apache.felix.gogo.runtime.CommandSessionImpl.execute(CommandSessionImpl.java:89)
        at org.apache.karaf.shell.console.jline.Console.run(Console.java:221)
        at org.apache.karaf.shell.console.Main.run(Main.java:191)
        at org.apache.karaf.shell.console.Main.run(Main.java:89)
        at org.cloudifysource.shell.GigaShellMain.main(GigaShellMain.java:122)

Operation failed. 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-12T07:36:52.373

错误消息：“扩展 C:\Users\Calvin.cloudify\mongod1\mongodb-win32-i386-2.0.2.zip java.util.zip.ZipException：存档不是 ZIP 存档时出错”是关键。

这表明第一次执行 mongoDB 下载可能失败。看看你是否可以打开然后文件 C:\Users\Calvin.cloudify\mongod1\mongodb-win32-i386-2.0.2.zip

如果不能，请删除“C:\Users\Calvin.cloudify\”的内容，然后重新尝试安装。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-12T07:07:59.420

请删除 C:\Users\Calvin\.cloudify\mongod1\mongodb-win32-i386-2.0.2.zip

然后运行以下命令（请使用较长的超时时间，而不是 5 分钟。）：

*   拆解-localcloud-force
*   引导本地云
*   安装应用程序 --verbose -timeout 60 FULL_PATH_TO_THE_PETCLINIC-SIMPLE

PS：为了在 Windows 7 上安装 MongoDB，您必须使用管理凭据运行 MongoDB。

您的用户有这样的凭据吗？- 如果没有，请使用具有管理凭据的用户或将此类凭据添加到您的用户。

如果再次失败，请将所有日志文件发送给我们。

# php - 仅显示带有其父菜单项的子菜单项

> ID：11437895
> 
> 赞同：1
> 
> 时间：2012-07-11T17:14:06.047
> 
> 标签：php, joomla

我在 Joomla 中有以下菜单：

*   家
*   产品
    *   产品一
    *   产品 2
    *   产品 3
*   服务
*   联系方式

我创建了一个仅显示 subitens 的菜单模块：

*   产品一
*   产品 2
*   产品 3

但我想知道在此菜单中添加父项“产品”的热度：

*   产品
    *   产品一
    *   产品 2
    *   产品 3

我不能创建其他菜单，因为我不能放置相同的 URL。因为这个菜单已经显示在页面顶部。

也就是说，我在“顶部”模块中有这个菜单，我需要一个新菜单（垂直）来帮助用户导航。

我说清楚了吗？

有人能帮我吗？我正在使用 Joomla 2.5

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-11T17:40:02.540

对于第二个菜单，选择菜单别名作为菜单类型，然后从出现的列表中选择现有的“产品”菜单项。当你这样做时，它基本上会克隆已经存在的那个，但允许你按照你认为合适的方式放置和设置它的样式。单击 n 时，它与原始 URL 相同，只是在不同的位置。

# python - 在python中重新启动线程并检查异常

> ID：11437898
> 
> 赞同：1
> 
> 时间：2012-07-11T17:14:08.920
> 
> 标签：python, multithreading, cherrypy, python-multithreading

我已经绘制了我想遵循的流程的流程图，但无法弄清楚如何执行此流程。目前我有以下内容。

t1 是一个不是cherrypy的数据库插入脚本。

```
def main():
    thread = ThreadUrl(queue)
    thread = thread()
    thread.start()
    cherrypy.config.update({'server.socket_host': '0.0.0.0',
                            'server.socket_port': 2970})
                            #'server.thread_pool': 100})
    queue.join()
    cherrypy.engine.start()
    while True:
        if thread.isAlive():
            try:
                cherrypy.engine.start()
            except Exception:
                print ('Started cherrypy already.')
            print ('I am alive.')
        else:
            try:
                thread.exit()
            except Exception:
                print ('Already killed this thread.')
            print ('I am dead.')
            try:
                cherrypy.engine.stop()
            except Exception:
                print ('Already stopped cherrypy.')
            try:
                thread.start()
            except Exception:
                print (sys.exc_info()[1])

if __name__ == '__main__':
    main() 
```

![我想按照这个流程图](../Images/004586fa104db084dc208d5368e69a90.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-11T19:19:00.323

您可以在字典中创建状态表。每个节点都在一个函数中，该函数执行其操作，然后返回下一个状态，如下所示：

```
def start_t1():
    # Start t1.
    return "start cherrypy"

def start_cherrypy():
    # Start Cherrypy.
    return "is t1 alive?"

def is_cherrypy_alive():
    # Check whether Cherrypy is alive.
    if alive:
        return "stop cherrypy"
    return "start t1"

actions = {
    "start t1": start_t1,
    "start cherrypy": start_cherrypy,
    "is t1 alive?": is_t1_alive,
    "is cherry pie alive?": is_cherrypy_alive,
    ...
}

state = "start t1"
while True:
    state = actions[state]() 
```

# c - 在cygwin环境下用opemcv运行C程序

> ID：11437902
> 
> 赞同：-3
> 
> 时间：2012-07-11T17:14:17.813
> 
> 标签：c, opencv, cygwin

我是cygwin的新手。不过目前我用过mingw，但是不支持`fork()`，所以需要切换到cygwin。

cygwin 是否支持 opencv 以及如何（参考）？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-19T10:19:12.533

我刚刚用cygwin安装了opencv，所有最近的发行版。我发现[**这个链接**](http://hvrl.ics.keio.ac.jp/kimura/opencv/)很有帮助。您假设首先安装 ffmpeg，然后修补 opencv 2.4.2 发行版（！！），最后安装 opencv。

为了使它与 pkg-config 一起工作，我必须修改 ${OPENCV_ROOTDIR}\lib\pkgconfig 并将 windows 路径语法过滤为 unix 路径语法。pkg-config 不是强制性的，但它简化了应用程序开发（正确安装时）。

经过一番努力，这一切都奏效了；但是如果我可以打开 pgn 图像文件，我将无法打开 jpeg 图像文件……仍在调查中……

克劳德

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-07T16:44:02.727

我是[http://hvrl.ics.keio.ac.jp/kimura/opencv/](http://hvrl.ics.keio.ac.jp/kimura/opencv/)的维护者。我修复了加载 jpeg 文件的错误。请检查我的新补丁。

# c# - ASP .NET RowUpdating GridView 问题

> ID：11437903
> 
> 赞同：3
> 
> 时间：2012-07-11T17:14:18.137
> 
> 标签：c#, asp.net, gridview

我在使用`RowUpdating`方法时遇到问题。我`GridView`的已连接到我们的本地 SQL Server，我正在尝试更新数据。这是`RowUpdating`来自 MSDN 的方法的代码。

```
protected void TaskGridView_RowUpdating(object sender, GridViewUpdateEventArgs e)
{
        //Retrieve the table from the session object.
        DataTable dt = (DataTable)Session["TaskTable"];

        //Update the values.
        GridViewRow row = GridView1.Rows[e.RowIndex];
        dt.Rows[row.DataItemIndex]["Id"] = ((TextBox)(row.Cells[1].Controls[0])).Text;
        dt.Rows[row.DataItemIndex]["Description"] = ((TextBox)(row.Cells[2].Controls[0])).Text;
        dt.Rows[row.DataItemIndex]["IsComplete"] = ((CheckBox)(row.Cells[3].Controls[0])).Checked;

        //Reset the edit index.
        GridView1.EditIndex = -1;

        //Bind data to the GridView control.
        BindData();

} 
```

我收到此错误：

> System.NullReferenceException：对象引用未设置为对象的实例。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-12T07:11:02.183

尝试此代码一次。

```
protected void GridView1_RowUpdating(object sender, GridViewUpdateEventArgs e)
{
    GridViewRow row = (GridViewRow)GridView1.Rows[e.RowIndex];
    int id = Int32.Parse(GridView1.DataKeys[e.RowIndex].Value.ToString());
    TextBox tname = (TextBox)row.FindControl("nam");
    TextBox tques = (TextBox)row.FindControl("que");
    MySqlCommand cmd = new MySqlCommand("update exam set name1=@name,ques=@ques where id = @id", con);
    cmd.Parameters.Add("@id", MySqlDbType.Int16).Value = id;
    cmd.Parameters.Add("@name", MySqlDbType.VarChar, 30).Value = tname.Text.Trim();
    cmd.Parameters.Add("@ques", MySqlDbType.VarChar,40).Value = tques.Text.Trim();
    con.Open();
    cmd.ExecuteNonQuery();
    GridView1.EditIndex = -1;
    bind();
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-11T17:18:48.400

并非所有 GridViewRow 都有 DataItem。

您应该`if`在代码周围添加一个块并验证正在更新的行是 type `DataRow`。

```
if (e.Row.RowType == DataControlRowType.DataRow)
{
     your code here...
} 
```

有关 RowTypes 的更多信息：http: [//msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.gridviewrow.rowtype.aspx](http://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.gridviewrow.rowtype.aspx)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-10-11T07:57:18.207

```
public void bindGvEdit()
{
    GridView1.DataSource = obj1.SelectAlltbl();
    GridView1.DataBind();
}

protected void GridView1_RowEditing(object sender, GridViewEditEventArgs e)
{
    GridView1.EditIndex = e.NewEditIndex;
    bindGvEdit();
}

protected void GridView1_RowCancelingEdit(object sender, GridViewCancelEditEventArgs e)
{
    GridView1.EditIndex = -1;
    bindGvEdit();
}

protected void GridView1_RowUpdating(object sender, GridViewUpdateEventArgs e)
{
    GridViewRow row = GridView1.Rows[e.RowIndex];
    obj1.Id = Convert.ToInt32(GridView1.DataKeys[row.RowIndex].Value);
    obj1.Name = ((TextBox)row.Cells[1].Controls[1]).Text;
    obj1.Description = ((TextBox)row.Cells[2].Controls[1]).Text;
    obj1.Updatetbl();
    GridView1.EditIndex = -1;
    bindGvEdit();
} 
```

# java - Java“常量太多”JVM错误

> ID：11437905
> 
> 赞同：11
> 
> 时间：2012-07-11T17:14:19.490
> 
> 标签：java, jvm

我正在开发一个在运行时生成和编译类的应用程序。这有时会产生大量的生成代码。

对于我们的一个测试用例，我从 JVM 收到一个错误：

```
TestClass.java:83865: too many constants 
```

只是这个。我看过其他关于类似错误的报告，但在这些情况下，错误消息会抱怨常量池。但在这种情况下，它没有。

如果这意味着达到了 JVM 的常量池的限制，那是什么意思？我的意思是，就 Java 代码而言，这些常量是什么类型的？类方法？领域？字面意思？我没有静态或最终方法，也没有字段。

你能给我一些线索吗？

编辑：

将代码拆分为多个类已经在计划中。虽然不是因为这个确切的原因。

我知道常量池的限制，我的疑问正是其中的内容。生成的代码没有超过 10000 个方法+字段。

我怀疑文字是否也进入常量池，因为这是我看到将此数字提高到 65K 的唯一原因。似乎是这样。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-07-11T17:18:35.227

[http://en.wikipedia.org/wiki/Java_class_file#The_constant_pool](http://en.wikipedia.org/wiki/Java_class_file#The_constant_pool)

常量池包括数字、字符串、方法名、字段名、类名、对类和方法的引用……基本上一切。

最多可以有 65536 个。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-11T17:27:01.133

来自：[JVM 规范](http://docs.oracle.com/javase/specs/jvms/se5.0/html/ClassFile.doc.html#20080)

您可以看到`classfile.constant_pool_count`'u2' 类型，将其限制为 65535 个条目

```
ClassFile {
    u4 magic;
    u2 minor_version;
    u2 major_version;
    u2 constant_pool_count;
    cp_info constant_pool[constant_pool_count-1];
    u2 access_flags;
    u2 this_class;
    u2 super_class;
    u2 interfaces_count;
    u2 interfaces[interfaces_count];
    u2 fields_count;
    field_info fields[fields_count];
    u2 methods_count;
    method_info methods[methods_count];
    u2 attributes_count;
    attribute_info attributes[attributes_count];
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-11T17:20:12.540

[JVM 规范的第 5.1 节](http://docs.oracle.com/javase/specs/jvms/se7/html/jvms-5.html#jvms-5.1)准确定义了常量池的构成（主要是对类/方法和文字的引用）。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2016-11-06T16:44:44.400

我不知道这是否非常相关，但对于数组常量，每个字段都计入它。我不太确定为什么（我的猜测是你实际上并没有给出文字，因此运行时必须手动输入每个值，因此需要它们都是常量），但就是这样，那就是它是这样的。

当我生成一个大缓存作为数组文字时，我发现了这个问题。由于我不想手动写出 1 000 000 个常量，所以我写了一个小程序来为我编写程序。我想看看从启动开始缓存所有内容时程序的速度。

（有问题的问题是 Skiela 和 Revilla 的“编程挑战”中的 1.6.1，ISBN 0-387-00163-8）

所以你可能在某个地方有一些带有文字的数组。这不算作 ONE 常数。它被视为 array.length 常量。或 array.length + 1 个常量。

# javascript - Flowplayer：html5“timeupdate”事件是否有等价物？

> ID：11437907
> 
> 赞同：3
> 
> 时间：2012-07-11T17:14:20.020
> 
> 标签：javascript, jquery, html, flowplayer

这是我的 html5 方法：

```
bindProgressUpdate: function() {
    var self = this;
    $(this.video).on('timeupdate', function() {
        var progressInPercent = self.video.currentTime / self.video.duration * 100;
        progressInPercent = Math.round(progressInPercent * 100) / 100;

        $(document).trigger('update_progress', [progressInPercent, self.video.currentTime, self.video.duration]);
    }); 
```

现在我正在实现一个使用相同接口的闪退，所以我需要重现视频元素的行为。然而，flowplayer 似乎并没有在距离`timeupdate`事件很近的地方触发任何东西。

那里有类似的东西，还是我必须在后台设置自己的间隔？

# c# - 如何使用 IKVM 静态注册加密提供者？

> ID：11437908
> 
> 赞同：3
> 
> 时间：2012-07-11T17:14:31.950
> 
> 标签：c#, java, cryptography, jvm, ikvm

在 Java 中，可以通过编辑 JRE 或 JDK 的安全策略文件来**静态**注册像[BouncyCastle](http://www.bouncycastle.org/) 这样的安全提供者，或者通过以编程方式添加提供者来**动态注册。**

 ****[当像 BouncyCastle 这样的 java 安全提供程序使用IKVM](http://www.ikvm.net/index.html)转换为 C# 可调用 dll时，可以通过添加对以下 C# 代码的引用，然后`IKVM.OpenJDK.Core`通过dll 继续使用 BouncyCastle 。`IKVM.OpenJDK.Security`

```
java.security.Security.addProvider(new org.bouncycastle.jce.provider.BouncyCastleProvider()); 
```

我知道 BouncyCastle 的源代码已经以 C# 的形式提供。但是，我需要将我自己用 Java 编写的加密库转换为可在 C# 中使用，因此我需要利用[IKVM](http://www.ikvm.net/index.html)来实现这一点。我已经可以通过将我的加密库从 jar 转换为 dll 并使用如上所述的动态方法来做到这一点。

只是想知道是否可以像在 Java 中一样使用[IKVM静态注册提供程序。](http://www.ikvm.net/index.html)有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2021-01-29T21:37:01.340

有同样的问题，无法找到静态方法。最终重新编译了整个 IKVM 项目以使 BouncyCastle 提供程序工作。- 下载 IKVM 的源项目（[https://sourceforge.net/projects/ikvm/files/ikvm/7.2.4630.5/ikvmsrc-7.2.4630.5.zip/download](https://sourceforge.net/projects/ikvm/files/ikvm/7.2.4630.5/ikvmsrc-7.2.4630.5.zip/download)） - 在项目内部有一个 HOWTO 文件，其中包含编译说明. 第一步说“这个 IKVM.NET 源包需要 OpenJDK 7u6 b24 源（和构建工件）。”，因此您可以手动编辑该 OpenJDK 中的“lib/security/java.security”并添加 security.provider.XX =org.bouncycastle.jce.provider.BouncyCastleProvider，然后按照其余步骤重新编译项目。****

# string - VBA 对字符串长度有限制吗？

> ID：11437911
> 
> 赞同：0
> 
> 时间：2012-07-11T17:14:47.850
> 
> 标签：string, vba, excel

我有一个来自 HTML 源代码的大字符串（大约 1,000,000 个字符长）。我正在使用 msinet.ocx 从适当的网站查看文本。我编写了一小段代码，以便找到出现在不同关键短语（“组件附件矩阵”）之前的关键短语（“pkid =”），但它无法正常工作。这是我现在拥有的：

```
workbench = Cells(columnNumber, 1).Value
myURL = "http://beams.us.yazaki.com/Beams/ViewDetails.aspx?topic=document&pkid=" _
& workbench
Dim inet1 As Inet
Dim mypage As String

Set inet1 = New Inet
With inet1
    .Protocol = icHTTP
    .URL = myURL
    mypage = .OpenURL(.URL, icString)
End With

CAMnum = InStr(mypage, "Component Accessory Matrix")
intStart = InStrRev(mypage, "pkid=", CAMnum) + 5
newnum = Mid(mypage, intStart, 6)
Cells(columnNumber, 2).Value = newnum 
```

问题似乎出在`mypage = .OpenURL(.URL, icString)`; 当我运行时`len(mypage)`，它返回大约 100,000 的值，而它应该返回大约一百万的值。有人可以解释一下吗？

编辑： Gimp，我尝试了您的解决方案，但由于某种原因， ReturnStr 仍然是空的。我也尝试了 1024 而不是 2048，但这并没有改变任何东西。到目前为止，我已经复制并粘贴了我的代码。

```
Dim myURL 
```

ActiveSheet.Range("a1").End(xlDown).Select lastColumn = Selection.Row

对于 columnNumber = 2 To lastColumn workbench = Cells(columnNumber, 1).Value myURL = "http://beams.us.yazaki.com/Beams/ViewDetails.aspx?topic=document&pkid=" _ & workbench Dim inet1 As Inet Dim mypage As String Dim ReturnStr As String

```
Set inet1 = New Inet
With inet1
    .Protocol = icHTTP
    .URL = myURL
    mypage = .OpenURL(.URL, icString)
    ReturnStr = .GetChunk(1024, icString)
End With

Do While Len(ReturnStr) <> 0
    DoEvents
    mypage = mypage & ReturnStr
    ReturnStr = inet1.GetChunk(1024, icString)
Loop

CAMnum = InStr(mypage, "Component Accessory Matrix")
intStart = InStrRev(mypage, "pkid=", CAMnum) + 5
newnum = Mid(mypage, intStart, 6)
Cells(columnNumber, 2).Value = newnum

Next columnNumber 
```

我在这里错过了什么吗？我在网上搜索了 GetChunk 函数，我认为我在语法上没有做错任何事情，但也许这是一些基本错误。帮助表示赞赏。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-11T19:26:53.113

使用 iNet，在使用 iNet 的 OpenURL 和 GetChunk 函数时，需要分块读取文件。

尝试这样的事情：

```
 myString = iNet1.OpenURL(.url, icString)
 ReturnStr = iNet1.GetChunk(2048, icString)

 Do While Len(ReturnStr) <> 0
    DoEvents
    myString = myString & ReturnStr
    ReturnStr = iNet1.GetChunk(2048, icString)
 Loop 
```

这会将块读入 ReturnStr，然后将它们附加到 myString 的末尾。

在此 Do 循环之后，您的 myString 将包含整个页面。

# php - 有没有抽象类的对立面？

> ID：11437913
> 
> 赞同：0
> 
> 时间：2012-07-11T17:14:52.667
> 
> 标签：php, oop, interface, abstract-class

我正在使用我自己开发的 PHP 框架，它主要基于 pear 和 Zend 的组件，但最近[Composer出现了一些更好的组件](http://getcomposer.org/)

随着我的应用程序越来越多，在组件之间切换变得越来越困难，我想知道是否有一种方法可以让我以不同的方式设计我的程序。在某种程度上，我可以使用与抽象类相反的组件。

我在想应该有一种方法可以让我创建自己的类，而这些类又只是连接到 pear 或 zend 并使用这些类，就像它们使用接口或抽象类一样。当然，他们会做实际的工作，我只会链接到他们。

假设我一直在使用 pear Config/Lite，它只能处理 ini 和数组文件，现在我想切换到 pear config 或 Zend config 以获得将数据保存在数据库中的好处，那么应该有一个简单的在不更改我所有代码的情况下进行切换的方法，因为它们实现的内容完全相同。

我之所以问，是因为我一直在使用 pears Net/URL/Mapper，这还不错，但我发现了一些也可以处理调度的东西，并且正在积极开发中。我也相信这种情况会一次又一次地出现。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-11T17:21:20.143

您想寻找类似外观设计模式的东西，或者只是使用委托/组合。但是请注意，当您添加抽象层时，使用类似外观之类的东西可能会导致大量不必要的复杂性。我建议您阅读一些 php 设计模式，尤其是对象的委托/组合，以了解它如何适合您的情况。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-11T17:22:03.667

您应该为此 IMO 使用组合。让你的库中的类公开它们自己的公共接口，你的其余代码都依赖于它。如果您曾经将组件的基础从 PEAR 更改为 Zend，只需确保所有原始公共方法仍然遵循以前的版本，您就应该是金子了。如果您愿意，可以使用关键字将这些接口形式化`interface`，但这超出了此答案的范围；）

# c# - 将 null 分配给十进制 MVC 3

> ID：11437916
> 
> 赞同：-2
> 
> 时间：2012-07-11T17:15:02.073
> 
> 标签：c#, asp.net, asp.net-mvc-3

`IdSubCategory`如果会话变量`Session["SubCategory"]`为 null ，我正在尝试将 null 分配给变量

为什么以下不起作用？

```
decimal tmpvalue2;
decimal? IdSubCategory = null;    
if (decimal.TryParse((string)Session["SubCategory"], out tmpvalue2))
    IdSubCategory = tmpvalue2; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-11T17:35:02.433

我通常将会话变量包装在一个属性中。

```
 protected decimal? IdSubCategory
    {
        get
        {
            if (Session["SubCategory"] == null)
                return null;
            else
                return decimal.Parse(Session["SubCategory"].ToString());
        }
        set
        {
            Session["SubCategory"] = value;
        }
    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-11T18:06:32.513

方法 decimal.TryParse 需要一个要转换的字符串，但如果`Session["SubCategory"]`为 null，那么您的代码行正在尝试将 null 转换为字符串，这将出错

这个 ：`if (decimal.TryParse((string)Session["SubCategory"], out tmpvalue2))`

为了修复它，请先检查是否`Session["SubCategory"]`不为空，然后尝试执行小数。TryParse

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-11T18:24:56.150

什么不工作？你在存储什么`Session["SubCategory"]`？

在会话对象中存储表示 ID 的字符串时，这些测试通过：

```
[Test] public void GivenWhenIntegerString_WhenTryParse_ThenValidInteger()
{
    Dictionary<string, Object> fakeSession  = new Dictionary<string, object>();
    fakeSession["SubCategory"] = "5";

    decimal tmp;
    decimal? IdSubCategory = null;
    if (decimal.TryParse((string)fakeSession["SubCategory"], out tmp))
        IdSubCategory = tmp;

    Assert.That(IdSubCategory, Is.EqualTo(5d));
}

[Test] public void GivenWhenNull_WhenTryParse_ThenNull()
{
    Dictionary<string, Object> fakeSession  = new Dictionary<string, object>();
    fakeSession["SubCategory"] = null;

    decimal tmp;
    decimal? IdSubCategory = null;
    if (decimal.TryParse((string)fakeSession["SubCategory"], out tmp))
        IdSubCategory = tmp;

    Assert.That(IdSubCategory, Is.EqualTo(null));            
} 
```

当您将`int`or存储`decimal`在`Session["SubCategory"]`

```
[Test]
public void GivenWhenInteger_WhenTryParse_ThenValidInteger()
{
    Dictionary<string, Object> fakeSession = new Dictionary<string, object>();
    fakeSession["SubCategory"] = 5;

    decimal tmp;
    decimal? IdSubCategory = null;
    if (decimal.TryParse((string)fakeSession["SubCategory"], out tmp))
        IdSubCategory = tmp;

    Assert.That(IdSubCategory, Is.EqualTo(5d));
} 
```

在这种情况下，这将解决它：

```
decimal tmp;
decimal? IdSubCategory = null;
if (Session["SubCategory"] != null &&
    decimal.TryParse(Session["SubCategory"].ToString(), out tmp))
  IdSubCategory = tmp; 
```

# java - 铸造和熔化数据

> ID：11437922
> 
> 赞同：0
> 
> 时间：2012-07-11T17:15:13.930
> 
> 标签：java, reshape

我想知道Java是否以某种方式支持数据的“转换和融合”。“铸造和熔化”是指以 R 包 reshape（或 reshape2）的方式“重塑”数据。

所以我有一个 SQL 查询，它返回以下内容（在 ResultSet 中）：

```
---------------------
|Id | Key    | Value|
---------------------
|1  | Name   | John |
|1  | Gender | Male | 
|1  | Country| U.S  |
|2  | Name   | Tom  |
|2  | Gender | Male |
|2  | Country| Cuba |
--------------------- 
```

我想重塑这个数据，这样我就可以得到这个：

```
------------------------
|Id|Name|Gender|Country|
------------------------
|1 |John|Male  |U.S    |
|2 |Tom |Male  |Cuba   |
------------------------ 
```

Java 程序员如何实现这种转变？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-11T17:19:07.357

这通常可以通过使用[*适配器设计模式*](http://en.wikipedia.org/wiki/Adapter_pattern)来完成，该模式负责封装数据并为字段提供不同的接口。

否则，您可以通过查看起始对象并将字段转换为您喜欢的格式来创建新对象。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-11T17:24:24.730

不是直接的。R 更专注于数据，而 Java 更多地是一种通用语言，缺乏一些特定的功能。您可以自己编程；或使用“ETL”（提取、转换、加载）工具，例如 Kettle [http://kettle.pentaho.com/](http://kettle.pentaho.com/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-11T17:49:17.660

让 SQL 为您完成。假设您的表名为“foo”：

```
Select name.id, name.value, gender.value, country.value 
-- 3 views of 'foo', one for names, 2nd for gender, 3rd for country
from foo as name, foo as gender, foo as country 
-- restricting each view to its purpose
where name.key='Name' and gender.key='Gender' and country.key='Country'
-- joining the 3 views together
and name.id=gender.id and name.id=country.id 
```

# sql - 合并不评估第二个论点？

> ID：11437923
> 
> 赞同：0
> 
> 时间：2012-07-11T17:15:25.130
> 
> 标签：sql, postgresql, count, aggregate-functions

我正在尝试运行以下查询：

```
SELECT COALESCE(count(percent_cov), 0)
FROM sample_cov
WHERE target = 542
GROUP BY percent_cov
HAVING percent_cov < 10 
```

基本上，我想显示该统计信息的次数 < 10，如果计数为 0，则返回 0 而不是 null。如果计数 >0，我将得到我想要的数字作为结果，但是如果计数为 0我仍然得到一个 null 返回。（如果我将第二个参数设置为合并为正数，也是一样的）。我究竟做错了什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-11T17:26:28.053

我按照我*认为*您想要的方式重写了您的查询：

```
SELECT count(*) AS ct
FROM   sample_cov
WHERE  target = 542
AND    percent_cov < 10; 
```

`count()``0`当没有找到匹配的行（或列中的非空值）时返回。不需要`coalesce()`。我在此引用[手册](http://www.postgresql.org/docs/current/interactive/functions-aggregate.html)：

> 需要注意的是，**除了 count 之外**，这些函数在没有选择行时返回空值。

强调我的。如果您想在返回时返回不同的值`count()`，请`0`使用`CASE`语句。

另外，`count(percent_cov)`当你有`WHERE percent_cov < 10`. 只有非空值才有资格，`count(*)`在这种情况下会更快更简单地产生相同的结果。

你不需要一个`GROUP BY`子句，因为你不按任何东西分组，你正在聚合整个表。
你*可以* `GROUP BY target`，但这将是*一个不同的查询*：

```
SELECT target, count(*)
FROM   sample_cov
GROUP  BY target
WHERE  percent_cov < 10; 
```

您需要再次拼出`HAVING`子句中的表达式。输出列名称仅在`ORDER BY`and中可见，而`GROUP BY`不是`WHERE`or `HAVING`。

# c# - clsObject.Method() 和 new Class().Method() 的区别？

> ID：11437925
> 
> 赞同：1
> 
> 时间：2012-07-11T17:15:30.327
> 
> 标签：c#, asp.net, oop

假设我正在上课

```
Class ABC
 {
  public string Method1()
  {
   return "a";
  }
  public string Method2()
  {
   return "b";
  }
  public string Method3()
  {
   return "c";
  }
 } 
```

现在我以两种方式调用此方法，例如：

```
ABC obj=new ABC();
Response.Write(obj.Method1());
Response.Write(obj.Method2()); 
```

其他方式

```
Response.Write(new ABC().Method1());
Response.Write(new ABC().Method2()); 
```

以上两种方法的输出将相同。

`obj.Method1()`有些人可以帮助我理解和`new ABC().Method1()`

提前致谢之间的区别..

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-11T17:19:17.960

`obj`并且`new ABC()`是单独的实例。在您的示例中，输出是相同的，因为没有要显示的实例级数据。

试试这个看看有什么不同：

```
Class ABC
 {

  public string Name = "default"; 

  public string Method1()
  {
   return "a";
  }
 } 
```

然后使用下面的代码来显示与实例级数据的区别：

```
ABC obj=new ABC();
obj.Name = "NewObject";
Response.Write(obj.Method1());
Response.Write(obj.Name);

Response.Write(new ABC().Method1());
Response.Write(new ABC().Name); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-11T20:23:40.887

@d-stanley 想说的是，您在创建时分配内存，这是非常宝贵的资源。

更完整的答案是：创建类时考虑到一些逻辑。虽然是完全可行的`Response.Write(new ABC().Method1());`，但这是一个非常短的功能，并没有那么无用......当您设计时，`class`您实现了一些逻辑边界功能和属性。例如`FileStream`，有一个内部属性`Stream`并使其可以通过各种属性访问，您可以在重载`Open()`方法中设置它并在方法中销毁它`Dispose()`。例如，另一个类也`BinaryReader`实现`Stream`了但以不同的方式威胁它。根据您的逻辑，您可以在单个类上实现所有功能 - 某个`MotherOfAllFunctions`类实现了所有功能`FileStream`-`BinaryReader`但这不是一种方法。

另一点：在大多数情况下，会占用一些（或大量）内存来初始化类的一些内部逻辑——例如`SqlConnection`类。然后您调用`Open()`或任何其他方法来调用数据库 - 引入了一些非常强大的机制来支持状态机初始化、托管到取消管理的调用，并且可以执行大量代码。

实际上，您在 any 中所做的`new SomeCLass().SomeMethod<int>(ref AnotherObject)`是：

```
Response.Write( 
                 var tmpABC = new ABC();   // Constructor call . Executed always (may throw)
                 string result = tmpABC.Method1();  // Or whatever could be casted to `string`
                 tmpABC.Dispose();   // GC will kick-in and try to free memory

                 return result;
              ); 
```

如您所见 - 这与您以这种方式编写的代码相同。所以这里发生的是大量的内存分配，几乎所有这些宝贵的内存都被扔掉了。`ABC()`一次初始化类及其所有功能更有意义，然后**在**任何地方使用它，从而最大限度地减少内存分配。例如 - 在 DAL 类中的每个函数调用中打开函数然后立即关闭它没有任何意义`SqlConnection`- 更好地声明局部变量并使其保持活动状态 - 只要应用程序线程进程存在，一些完全初始化的类就会存在。所以在这种代码风格的情况下：

```
public class Program
{
    private static FileStream streamToLogFile = new FileStream(...);

    public int Main(string [] args)
    {
         new Run(new Form1(streamToLogFile));
     }
} 
```

在这个逻辑中 - 不需要保留类`Form1`，我内联创建了它，但所有需要访问`FileStream`对象（*有价值的资源！*）的函数将访问仅初始化一次的同一个实例。

# c# - SQLCLR 程序集上的“子查询返回超过 1 个值”

> ID：11437935
> 
> 赞同：0
> 
> 时间：2012-07-11T17:16:17.987
> 
> 标签：c#, sql-server, .net-assembly

我有一个 SQLCLR 程序集，它创建一个带有条码扫描器的 Telnet 接口，并将它接收到的任何东西放在一个表中。有时，它会因错误而崩溃：

```
以用户身份执行：NT AUTHORITY\SYSTEM。
执行用户定义的例程期间发生 .NET Framework 错误
或聚合“fnBarcodeScanner”：  

System.Data.SqlClient.SqlException：子查询返回超过 1 个值。
当子查询跟随 =、!=、、>= 或
当子查询用作表达式时。  

System.Data.SqlClient.SqlException：      
  在 System.Data.SqlClient.SqlConnection.OnError（
       SqlException 异常，布尔型 breakConnection)     
  在 System.Data.SqlClient.SqlInternalConnection.OnError（
       SqlException 异常，布尔型 breakConnection)     
  在 System.Data.SqlClient.SqlInternalConnectionSmi.EventSink.DispatchMessages（
       布尔忽略非致命消息）     
  在 Microsoft.SqlServer.Server.SmiEventSink_Default.DispatchMessages（
       布尔忽略非致命消息）     
  在 System.Data.SqlClient.SqlCommand.RunExecuteNonQuerySmi（
       布尔 sendToPipe)     
  在 System.Data.SqlClient.SqlCommand.InternalExecuteNonQuery（
       DbAsyncResult 结果、String methodName、Boolean sendToPipe)     
  在 System.Data.SqlClient.SqlCommand.ExecuteNonQuery()     
  在 MinimalisticTelnet.Program.Connect(String ip) 。

[SQLSTATE 42000]（错误 6522）语句已终止。
[SQLSTATE 01000]（错误 3621）。步骤失败。

```

我理解错误的含义，但我不确定在这种情况下它是如何引起的。程序集中唯一的 SQL 是一个插入语句，它将一个字符串插入到表中。不应该有任何方法具有多个值。这是程序集的 C# 代码（为简洁起见，省略了）：

```
namespace MinimalisticTelnet
{
    public class Program
    {
        [Microsoft.SqlServer.Server.SqlProcedure]
        public static void Main(string[] args)
        {
        }

        public static void Connect(String ip)
        {
            String lastCode = null;
            TelnetConnection tc = new TelnetConnection(ip, 23);

            using (SqlConnection conn = new SqlConnection("context connection=true"))
            {
                SqlCommand InsertID = new SqlCommand();
                InsertID.Connection = conn;
                SqlParameter IDCodeParam = new SqlParameter("@Barcode", SqlDbType.VarChar);
                conn.Open();
                while (tc.IsConnected)
                {
                    String barcode = tc.Read();
                    if (!((barcode).Length == 0))
                    {
                        barcode = barcode.Substring(0,barcode.IndexOf("\n") - 1);
                        if (!(barcode == lastCode))
                        {
                            lastCode = barcode;
                            SqlString sqlBarcode = barcode;
                            IDCodeParam.Value = sqlBarcode;
                            InsertID.Parameters.Add(IDCodeParam);
                            InsertID.CommandText = "INSERT INTO dbo.tbl_Barcode (Barcode)" +
                                " Values(@Barcode)";
                            InsertID.ExecuteNonQuery();
                            InsertID.Parameters.Clear();
                        }
                    }
                }
                conn.Close();
            }
        }
    }
} 
```

这是 fnBarcodeScanner 的代码：

```
 CREATE PROCEDURE [dbo].[fnBarcodeScanner]
        @ip [nvarchar](20)
    WITH EXECUTE AS CALLER
    AS
    EXTERNAL NAME [Telnet].[MinimalisticTelnet.Program].[Connect]
    GO 
```

这是触发器：

```
ALTER TRIGGER [dbo].[trg_Barcode]
ON [dbo].[tbl_Barcode]
AFTER INSERT
AS
  BEGIN
      DECLARE @MVID        INT,
              @P           VARCHAR(25),
              @NewLane     VARCHAR(10),
              @TC          INT,
              @DID         INT,
              @AD          DATE,
              @AT          VARCHAR(18),
              @TrayCount   INT,
              @DivertCount INT,
              @ScanID      VARCHAR(50),
              @PID         INT,
              @cDivert     VARCHAR(8)

      SET @ScanID = (SELECT Barcode
                     FROM   tbl_Barcode)--Barcode Value
      SET @MVID = (SELECT MVID
                   FROM   tbl_Divert
                   WHERE  Barcode = @ScanID)--JOT Version ID
      SET @P = (SELECT PalletNbr
                FROM   tbl_Divert
                WHERE  Barcode = @ScanID)--Pallet Number
      SET @PID = (SELECT PalletID
                  FROM   tbl_Pallet_Verification
                         INNER JOIN tbl_Pallet_Mailing
                           ON tbl_Pallet_Verification.MailingID = tbl_Pallet_Mailing.MailingID
                  WHERE  tbl_Pallet_Mailing.MVID = @MVID
                         AND tbl_Pallet_Verification.PalletNum = @P)--PAT Pallet ID
      SET @AD = ( Cast(CONVERT(VARCHAR(10), Getdate(), 110) AS DATE) )--Today's Date
      SET @AT = CONVERT(TIME, Getdate())--Current Time
      SET @cDivert = (SELECT Divert
                      FROM   tbl_Divert
                      WHERE  Barcode = @ScanID)
      SET @NewLane = (SELECT TOP 1 ID
                      FROM   tbl_Tray_Lanes
                      WHERE  LaneActive = -1
                             AND ID NOT IN(SELECT Divert
                                           FROM   tbl_Pallet_Lanes
                                           WHERE  DateCompleted IS NULL))--Find Open Lane
      SET @TC = (SELECT Count(TrackerID)
                 FROM   tbl_Divert
                 WHERE  MVID = @MVID
                        AND PalletNbr = @P)--Tray Count
      SET @TrayCount = (SELECT Count(TrackerID)
                        FROM   tbl_Divert
                        WHERE  Barcode = @ScanID)--Is Tray Found in Divert Table
      SET @DivertCount = (SELECT Count(TrackerID)
                          FROM   tbl_Divert
                          WHERE  Barcode = @ScanID
                                 AND Divert IS NOT NULL)--Verify Tray has not been scanned

      --Add Date/Time to Tray Record.  This will mark tray as scanned
      SELECT TrackerID
      FROM   tbl_Divert
      WHERE  Barcode = @ScanID
             AND Divert IS NULL

      IF @@ROWCOUNT > 0
        BEGIN
            SET NOCOUNT ON;

            IF @NewLane IS NOT NULL
              BEGIN --Add Available lane to Lane Table and give tray record the LaneID
                  IF @TrayCount > 0 --Verify tray record exist
                    BEGIN
                        --IF @DivertCount = 0 --If not previously scanned
                        --Begin--Insert Lane Record
                        INSERT INTO tbl_Pallet_Lanes
                                    (MVID,
                                     PalletID,
                                     PalletNbr,
                                     Divert,
                                     TrayCount,
                                     DateStarted,
                                     TimeStarted)
                        SELECT @MVID,
                               @PID,
                               @P,
                               @NewLane,
                               @TC,
                               @AD,
                               @AT

                        --Get LaneID
                        SET @DID = (SELECT ID
                                    FROM   tbl_Pallet_Lanes
                                    WHERE  MVID = @MVID
                                           AND PalletNBR = @P)

                        --Add LaneID to tray record
                        UPDATE tbl_Divert
                        SET    Divert = @NewLane,
                               DivertID = @DID
                        WHERE  MVID = @MVID
                               AND PalletNbr = @P
                    --END
                    END
              END

            IF @NewLane IS NULL
              BEGIN --If there is no open lane assign Lane 16\.  This will send the tray to end of tray tracker for 
                  --manual pallet load.
                  UPDATE tbl_Divert
                  SET    Divert = 16,
                         DivertID = 0
                  WHERE  MVID = @MVID
                         AND Barcode = @ScanID
              END
        END

      DELETE FROM tbl_Barcode --Clear barcode table

      UPDATE tbl_Divert
      SET    Scanned = @AD,
             ScanStatus = 1 --Scan Status Flags which Reader 
      WHERE  Barcode = @ScanID
  END 
```

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-11T17:27:14.260

您的代码正在引发异常。这导致 SQL Server 认为您正在从函数返回多个值。

您可能想确切地知道将哪些值传递给您的插入语句（如在完整列表中）。我很想知道您是否有任何关键的碰撞问题。

您用来不插入与前一个相同的条形码的行似乎您正试图避免类似的事情。

# php - query "...WHERE $string"... $string='b5KlL4znM ' but query returns empty unless "...WHERE 'b5KlL4znM ' "

> ID：11437940
> 
> 赞同：1
> 
> 时间：2012-07-11T17:16:37.220
> 
> 标签：php, mysql, sql, string, alphanumeric

I am trying to get some information from my table, but the query returns empty when I call it this way:

```
$varchar_string = mysqli_real_escape_string($link, $_GET['code']); //the code is b5KlL4znM in this scenario

mysqli_query($link, "SELECT * FROM table WHERE code = $varchar_string"); 
```

The string is alphanumeric, and is submitted by users, so I've escaped it before doing the query.

Now if I do this query

```
mysqli_query($link, "SELECT * FROM table WHERE code = 'b5KlL4znM'"); 
```

It works fine, but that's not very dynamic.

I didn't get many results when I searched for this issue, and I didn't manage to find the answer amongst those that seem relevant.

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-11T17:17:53.427

Do you perhaps need to put quotes around your string?

```
mysqli_query($link, "SELECT * FROM table WHERE code = '$varchar_string'"); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-11T17:17:56.437

You'll need to include the variable in quotations.

```
mysqli_query($link, "SELECT * FROM table WHERE code = '$varchar_string'"); 
```

# c++ - C++：这看起来像内存碎片吗？

> ID：11437942
> 
> 赞同：4
> 
> 时间：2012-07-11T17:16:47.780
> 
> 标签：c++, memory-management, quadtree, memory-fragmentation

概括：

我有一个应用程序消耗更多的内存（大约是预期数量的 250%），但我似乎找不到任何内存泄漏。调用相同的函数（执行大量分配）将不断增加内存使用量到某个点，然后它不会改变并停留在那里。

计划详情：

该应用程序使用四叉树数据结构来存储“点”。可以指定要存储在内存中的最大点数（缓存大小）。'Points' 存储在 'PointBuckets' （链接到四叉树的叶节点的点数组）中，如果达到四叉树中的最大总点数，则将其序列化并保存到临时文件中，以便在何时检索需要。这一切似乎都很好。

现在，当加载文件时，会创建一个新的四叉树，如果旧的四叉树存在则删除它，然后从文件中读取点并一一插入四叉树。在节点拆分等过程中创建和删除存储桶时，会发生大量内存分配。

症状：

如果我加载一个预期使用 300MB 内存的文件，我会得到预期的内存消耗量。都好。如果我一遍又一遍地加载相同的文件，内存使用量会不断增长（我正在查看顶部的 RES 列，Linux）直到大约 700MB。这可能表明内存泄漏。但是，如果我继续加载文件，内存消耗将保持在 700MB。

另一件事：当我使用 valgrind massif 并查看内存使用情况时，它始终保持在预期的限制内。例如，如果我将缓存大小指定为 1.5 GB 并单独运行我的程序，它最终会消耗 4GB 的内存。如果我在地块中运行它，它将一直保持在 2GB 以下，然后在生成的图表中我将能够看到它实际上从未分配超过预期的 1.5GB。我幼稚的假设是，发生这种情况是因为 massif 使用了一个自定义内存池，它以某种方式防止了碎片。

那么你认为这里发生了什么？如果是内存碎片，我应该寻找什么样的解决方案来解决这个问题？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-11T17:25:19.350

我会把它更多地放在简单的分配器和操作系统缓存行为上。它们保留您分配的内存而不是释放它，以便在您下次请求时以更迅速的方式将其返回给您。然而，对于这种效果来说，250% 听起来确实很多——你可能会看到碎片问题。

尝试将您的分配器换成无碎片的分配器，如对象池或内存区域。

# safari - Applescript 使用 Safari 打开本地 HTML 文件

> ID：11437948
> 
> 赞同：0
> 
> 时间：2012-07-11T17:17:34.490
> 
> 标签：safari, applescript

我正在尝试使用带有以下脚本的 Safari 打开本地 html：

```
on run
set myPath to (path to me) as text
set myFolderPath to POSIX file (do shell script "dirname " & POSIX path of quoted form of myPath) & ":" as string
set _thispath to myFolderPath & "data:Default.html"

tell application "Safari"
    activate
    open (_thispath)
end tell 
```

结束运行

但是，该文件正试图以 file:/// （一个额外的斜杠）的附录打开任何人对此有任何解决方案吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-11T19:19:07.757

额外的斜线不是你的问题。首先，您要获取“引用形式的 posix 路径”而不是“引用形式的 posix 路径”。这给你带来了麻烦。另外，您没有正确地将内容转换为文本。不管怎样，试试这个方法...

```
set myPath to path to me
set myFolderPath to POSIX file (do shell script "dirname " & quoted form of POSIX path of myPath)
set _thispath to (myFolderPath as text) & ":data:Default.html"

tell application "Safari"
    activate
    open (_thispath)
end tell 
```

# objective-c - 如何解析 XML/PLIST 文件并将每个键的值放入适当的数据类型？

> ID：11437949
> 
> 赞同：0
> 
> 时间：2012-07-11T17:17:36.033
> 
> 标签：objective-c, ios, cocoa-touch

我正在使用 Xcode 4.2.1 编写一些 iOS 代码，我注意到当我通过 plist 文件解析并将所有内容放在一个 中时，`NSDictionary`所有`<string>`值`NSString`都以.`<real>``<integer>``<true/>``NSNumber`

有没有办法提取所有键和值，但将每个值放在匹配的数据类型中？

例如：

把`<string>Hi There</string>`价值放在一个`NSString`

把`<real>1.23</real>`价值放在一个`float`

把`<integer>4</integer>`价值放在一个`NSInteger`

将`<true/>`或`<false/>`或`<boolean>1</boolean>`值放入 BOOL

我已经阅读了很多帖子，但找不到任何可以帮助我做到这一点的东西。我什至不确定如何确定一个值周围的包装元素（术语可能是错误的）是什么！

`NSDictionary`只有`NSString`左右`NSNumber`这行不通。

`NSArray`/将`NSMutableArray`独立保存每个值的数据类型，还是需要添加第三项（值数据类型）与键和值一起存储？

也许我正在尝试重做已经完成的事情？

编辑：这里有更多关于我想要做的事情的细节......

我想要做的是从 XML 文件中读取一组键/值，然后将这些键作为游戏中的变量提供（键是变量名，变量设置为与键关联的值）。该变量将通过类似的方法检索`myVar = [getVar @"name_of_key"];`

编辑：这是我目前将 XML 放入 NSDictionary 的方式...

```
 NSDictionary *dictServer = nil;
    CFPropertyListRef plist =  CFPropertyListCreateFromXMLData(kCFAllocatorDefault, (CFDataRef)someXMLdata, kCFPropertyListImmutable, NULL);
    if ([(id)plist isKindOfClass:[NSDictionary class]]) {
        dictServer = [(NSDictionary *)plist autorelease];
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-11T17:52:31.567

NSArray 和 NSDictionary 要求您插入对象（例如 NSNumber），而不是原语（例如 int）。您是否有需要原始数据类型的理由？

更新： NSNumber 具有包装原始值的类方法。

```
aFloat = [NSNumber numberWithFloat:floatVar];
aBool = [NSNumber numberWithBool:boolVar]; 
```

要检索值，您可以使用

```
[aFloat floatValue]
[aBool boolValue] 
```

# activerecord - 基于关联的 ActiveRecord 计算字段

> ID：11437952
> 
> 赞同：0
> 
> 时间：2012-07-11T17:17:47.620
> 
> 标签：activerecord

我有一个 Conversation ActiveRecord 模型，基本上如下

```
class Conversation < ActiveRecord::Base
  has_many :messages, :order => 'created_at ASC'
  belongs_to :latest_message, :class_name => 'Message'
end 
```

我希望将 latest_message 属性始终设置为 messages.last。我已经尝试过 before_save 回调，但是当我添加一条消息时，它似乎并没有被触发

```
conversation.messages.create!(
  sender: user,
  body: message_body
) 
```

有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-11T17:17:48.150

在我写问题的时候找到了答案：

```
 has_many :messages, :order => 'created_at ASC',
           :after_add => :update_latest_message, :after_remove => :update_latest_message

  def update_latest_message(message)
    self.latest_message = self.messages.last
    self.save
  end 
```

ActiveRecord 关联回调让我调用一个方法，在必要时更新消息。如果我不必再次调用保存会很好......

# objective-c - Xcode 中没有打印输出

> ID：11437957
> 
> 赞同：0
> 
> 时间：2012-07-11T17:18:01.967
> 
> 标签：objective-c, xcode

我有一个运行良好的程序，但即使我在 main.m 中有一个 NSLog 文件，我也没有打印输出。你能告诉我有什么问题吗？谢谢你。

主文件

```
#import <Foundation/Foundation.h>
#import "Stockholding.h"

int main(int argc, const char * argv[])
{

  @autoreleasepool {

    StockHolding *stockA;
    StockHolding *stockB;
    StockHolding *stockC;

    [stockA setPurchaseSharePrice:2.40];
    [stockA setCurrentSharePrice:3.12];
    [stockA setNumberOfShares:40];

    [stockB setPurchaseSharePrice:1.50];
    [stockB setCurrentSharePrice:1.41];
    [stockC setNumberOfShares:35];

    [stockC setPurchaseSharePrice:1.10];
    [stockC setCurrentSharePrice:1.20];
    [stockC setNumberOfShares:60];

    NSArray *holdings = [NSArray arrayWithObjects:stockA, stockB, stockC, nil];

    for (StockHolding *n in holdings) {
      // Call the methods
      float cost = [n costInDollars];
      float value = [n valueInDollars];
      NSLog(@"Bought stock for $%.2f, It is now at $%.2f, I have %d shares, They cost me $%.2f, Now they are worth $%.2f", [n purchaseSharePrice], [n currentSharePrice], [n numberOfShares], cost, value);
    }
  }
    return 0;
} 
```

StockHolding.h

```
#import <Foundation/Foundation.h>

@interface StockHolding : NSObject {
  float purchaseSharePrice;
  float currentSharePrice;
  int numberOfShares;
}

@property float purchaseSharePrice;
@property float currentSharePrice;
@property int numberOfShares;

-(float)costInDollars;
-(float)valueInDollars;

@end 
```

StockHolding.m

```
#import "StockHolding.h"

@implementation StockHolding

@synthesize purchaseSharePrice, currentSharePrice, numberOfShares;

-(float)costInDollars
{
  return (purchaseSharePrice * numberOfShares);
}

-(float)valueInDollars
{
  return (currentSharePrice * numberOfShares);
}

@end 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-11T17:27:08.590

您实际上还没有创建任何这些`StockHolding`对象。因此，您的数组为空，并且循环不执行任何操作。

```
StockHolding *stockA; 
```

只是一个指针的声明。您需要创建它指向的对象；通常的程序是这样的：

```
StockHolding *stockA = [[StockHolding alloc] init]; 
```

由于在 ARC 下，对象指针被初始化为`nil`（这意味着“无对象”），因此您将`nil`作为所有参数传递给`arrayWithObjects:`. `nil`作为哨兵值，意思是“没有更多参数”，创建的数组没有内容。

对于一个空数组，`for (StockHolding *n in holdings)`没有任何东西可以枚举，所以循环体中的任何代码，包括你的`NSLog()`，都不会被执行。

# node.js - 如何在 Windows 上调试基本的 node.js 应用程序（不是 http）

> ID：11437958
> 
> 赞同：29
> 
> 时间：2012-07-11T17:18:02.557
> 
> 标签：node.js, node-inspector

我知道如何使用 node-inspector 和 iisnode 调试 http 应用程序。但是我可以使用 node-inspector在 Windows 上调试*非 http节点应用程序吗？*

我试过了：

```
 node debug test.js 
```

它说：

```
debugger listening on port 5858 
```

但是在 Chrome 中打开`http://localhost:5858/`并没有做任何事情。

* * *

顺便说一句：运行`node debug test.js`确实会启动有效的命令行调试器。但这与节点检查器完全不同。

* * *

## 回答 #1

> 赞同：63
> 
> 时间：2012-07-13T02:17:56.540

要使用节点检查器，正确的开关`node --debug`不是`node debug`

以下是详细步骤：

1.  全局安装 node-inspector ( `npm install -g node-inspector`)
2.  从命令行窗口运行：`node-inspector`
3.  打开 Chrome 并转到`http://localhost:8080/debug?port=5858`. 您将获得节点检查器 UI，但没有任何正在运行的应用程序。
4.  从另一个命令行窗口，使用如下`--debug`开关运行您的应用程序：`node --debug test.js`
5.  刷新 Chrome 标签，*瞧！*

几个有趣的点：

*   如果你杀死你的应用程序并重新启动它，只需刷新节点检查器选项卡。它会保留你所有的断点。
*   要在第一行自动中断，请使用以下命令启动您的应用程序`node --debug-brk test.js`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-11T17:33:09.350

一些可能对您有帮助的链接：

*   [http://vimeo.com/19465332（Ryan](http://vimeo.com/19465332)本人的截屏视频）。
*   [https://github.com/joyent/node/wiki/using-eclipse-as-node-applications-debugger](https://github.com/joyent/node/wiki/using-eclipse-as-node-applications-debugger)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-11T18:16:09.770

> 它说：调试器正在侦听端口 5858

我对此感到疑惑，但由于 Node.js 文档表明调试器可以通过*简单的 TCP 协议*访问，并且没有说明 HTTP，我的猜测是不，它不会在 _http://localhost:5858 上可用。

“V8 带有一个广泛的调试器，可以通过简单的 TCP 协议在进程外访问” - [http://nodejs.org/api/debugger.html](http://nodejs.org/api/debugger.html)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-11-25T11:14:42.447

最近微软发布了[用于 Visual Studio 的 node.js 工具](https://nodejstools.codeplex.com)。它为 node.js 提供了非常舒适的 Visual Studio 调试。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-09T10:15:04.907

节点检查器可能会很有帮助。

在任何支持 websockets 的浏览器中使用它。

断点、分析器、实时编码等。

[http://erickrdch.com/2012/09/debug-a-nodejs-app-with-chrome-dev-tools.html](http://erickrdch.com/2012/09/debug-a-nodejs-app-with-chrome-dev-tools.html)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-03-13T00:24:10.007

仅供参考，在 OSX 10.8 中，Chrome v26 似乎不起作用，但 Safari 6 确实使用与上述相同的指令并使用 0.0.0.0:8080 进行连接。

Danny Coates 在某处的另一篇文章中说按以下顺序进行操作：

1.  你的节点进程： node --debug (or --debug-brk) my_program.js
2.  节点检查器：节点检查器
3.  浏览器指向 0.0.0.0:8080

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2016-04-07T02:57:40.860

如果您像我一样在 Windows 上是菜鸟，并且收到“无法识别节点检查器”或有关 Windows JScript 错误的信息……尽管进行了全局安装、添加到 PATH 等，那么这可能会有所帮助。

导航到 C:\Users\urusername\AppData\Roaming\npm

然后运行 ​​node-debug.cmd 或 node-inspector.cmd

你应该得到像

```
Node Inspector v0.12.7
Visit http://127.0.0.1:8080/?port=5858 to start debugging.
Debugger listening on port 5858 
```

惊人的。如果您知道更好的解决方案，请告诉我

# tfs - 是否有命令行 TFS 工具来跟踪分支之间的变更集？

> ID：11437965
> 
> 赞同：6
> 
> 时间：2012-07-11T17:18:35.350
> 
> 标签：tfs, branching-and-merging

Visual Studio 2010 有这个不错的 GUI，允许您查看变更集在多个分支之间的迁移。如果可能，我想通过命令行以文本格式获取这些信息。我们每天运行 PowerShell 脚本来检查发布分支和主干之间的未合并更改。这确保我们不会忘记将错误修复传播回 Trunk。但是，我们缺少的是能够检查相同的错误修复是否已传播到较新的发布分支，例如：

```
Trunk ----------------------------------------------
      \                \
       \                ------- Release 2.0
        -- Release 1.0 
```

我们可以轻松地检查 Release 1.0 和 Trunk 之间的未合并更改，但我们还希望确保这些更改集也能传播到 Release 2.0。

在 Trunk 和 2.0 版本之间运行`tf merge /candidate`不会有效，因为我们会得到一堆与 2.0 版本之后实现的新功能相关的变更集。也许我可以做一个毫无根据的合并候选检查（从 1.0 版到 2.0 版）？或者也许 TFS 2012 为变更集跟踪提供了一些新的命令行选项？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-11T19:51:14.593

您可能希望使用[`tf branches`](http://msdn.microsoft.com/en-us/library/dcbx5yce.aspx)和的组合[`tf merges`](http://msdn.microsoft.com/en-us/library/656cs2x5)。如果这些不能为您提供所需的信息，那么我认为您将使用 TFS API 编写自己的控制台应用程序或 powershell 管理单元

# wpf - 为什么我不能在这里调用这个刷子？

> ID：11437966
> 
> 赞同：0
> 
> 时间：2012-07-11T17:18:39.773
> 
> 标签：wpf, wpf-controls

我在“Application.Resources”中创建了一个linearGradientBrush，并尝试使用其中一个样式设置器来调用它。编译器说无法解析名称。看不懂为什么....

```
 <Style x:Key="GridTextBoxStyle" TargetType="TextBox">
        <Setter Property="Background" Value="{StaticResource TextBlinearBrush}"/>
    </Style>
   <LinearGradientBrush x:Key="TextBlinearBrush" EndPoint="1,0.5" StartPoint="0,0.5">
                <GradientStop Color="Black" Offset="0" />
                <GradientStop Color="Gray" Offset="1" />
                <GradientStop Color="DarkGray" Offset="0.541" />
  </LinearGradientBrush> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-11T17:26:04.900

您需要在使用之前定义画笔。只需将`LinearGradientBrush`上面的内容移到`Style`它被引用的位置，就可以了。

# php - 单引号内的PHP函数显示为文本

> ID：11437975
> 
> 赞同：2
> 
> 时间：2012-07-11T17:19:07.177
> 
> 标签：php, function, get

我有一个显示用户列表的功能，即`displayUsers()`.

基本上，我没有为每个页面使用 1 个不同的 php 文件，而是使用了 switch 函数来加载类似的内容。这是其中 1 页的示例。

```
switch($_GET['page'])  {

   case '#userlist' : $page = '
       <div class="innerbox">
            displayUsers();
       </div> '; break;
} 
```

如您所见，它应该显示`div`标签并加载函数，但是不是加载函数，而是显示文本“displayUsers()”。我理解它为什么这样做，但是我不确定如何更改它，以便实际运行该功能而不是显示它。任何帮助将非常感激。

问候

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-11T17:22:05.260

`displayUsers()`在引号内。它被解释为一个字符串。你要

```
switch($_GET['page'])  {

   case '#userlist': $page = '<div class="innerbox">' . displayUsers() . '</div>'; break;

} 
```

这将连接字符串内 displayUsers() 的返回值，假设 displayUsers() 返回代码。我认为您在解析双引号字符串中的变量时混淆了**此**[功能。](http://www.php.net/manual/en/language.types.string.php#language.types.string.parsing)**这不适用于函数。**

你也可以使用`case '#userlist': $page = sprintf('<div class="innerbox">%s</div>', displayUsers(); break;`

在此处阅读 sprintf：http: [//php.net/manual/en/function.sprintf.php](http://php.net/manual/en/function.sprintf.php)

* * *

如果`displayUsers()`实际输出代码本身，那么您可以使用

```
switch($_GET['page'])  {

   case '#userlist': echo '<div class="innerbox">'; displayUsers(); echo '</div>'; break;

} 
```

发生的情况是打印开始标签，然后调用函数（打印代码），然后打印结束标签，按此顺序。

* * *

如果你得到了，`function not defined()`那么它就是它听起来的样子。该函数尚未在当前脚本中定义。

**PHP 是如何工作** 的 每次请求页面时（有人访问“foo.php”），您的服务器和 PHP 引擎从某个目录获取文件（foo.php），对其进行解析，然后（通常）将某些内容发送回用户以 HTML 文档的形式。每个页面就像一个“脚本”，有点像一个迷你应用程序，编译一次，执行一次，然后就**忘记**了。

因此，假设在您`displayUsers()`定义的主页上。

```
//index.php

function displayUsers() {
    //some code...
}

echo "Welcome to my website!", "<br />", 'Click <a href="foo.php">Here</a>.'; 
```

当有人访问您的主页时，`displayUsers()`已定义，耶！但是，之后就被遗忘了-PHP引擎在加载并完成脚本后已将其丢弃，并且`displayUsers()`在您到达时当然不知道是什么`foo.php`。

* * *

**所以，你可以做什么？** 如果您只在一个页面上使用该函数，请在该页面上声明它。请记住，每个文件都被视为一个脚本。PHP 引擎不会跟踪用户会话中的函数。

如果您在多个脚本中使用该函数，请将您的函数包含在某个“中央”文件中，并将其[包含](http://php.net/manual/en/function.include.php)在您需要的任何地方。我真的建议您阅读更多 PHP 和`include`; 我不打算解释 PHP 的基础知识。你需要做更多的功课。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-11T17:21:33.883

您需要使用 . （点）在使用单引号时附加字符串：

```
$page = '<div class="innerbox">'.displayUsers().'</div>'; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-11T17:22:09.407

试试这个

```
case '#userlist' : $page = '
           <div class="innerbox">'
                .displayUsers().
           '</div> '; break; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-11T17:23:29.933

以这种方式使用连接`.`运算符：

```
switch($_GET['page'])  {

   case '#userlist':
       $page = '
       <div class="innerbox">'
       . displayUsers() .
       '</div> ';
       break;
} 
```

# ruby-on-rails - 在 Mac OX Lion 上安装 Rails 时出错

> ID：11437985
> 
> 赞同：0
> 
> 时间：2012-07-11T17:19:32.497
> 
> 标签：ruby-on-rails, osx-lion

当我尝试在我的 Mac OS Lion 上安装 Rails 时出现此错误。我使用了命令 - $ sudo gem install rails

/System/Library/Frameworks/Ruby.framework/Versions/1.8/usr/bin/ruby extconf.rb mkmf.rb 在 /System/Library/Frameworks/Ruby.framework/Versions/1.8/ 找不到 ruby​​ 的头文件usr/lib/ruby/ruby.h

我需要遵循什么步骤来安装导轨？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-11T17:21:43.720

只是避免使用捆绑的 ruby​​，它是 1.8，它真的已经过时了。安装[rvm](https://rvm.io/rvm/install/)它将提供最新的 ruby​​ 版本，然后一切都会无缝运行。这是您唯一需要开始的事情：

```
$ curl -L https://get.rvm.io | bash -s stable --rails 
```

您将需要 gcc/g++ 工具链 (Xcode) 来构建所有内容，但无论如何您都需要它来编译任何本机 gem。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-11T17:22:36.987

看起来您缺少一些头文件 - 尝试重新安装 XCode 和开发人员工具。如果您已经下载了 XCode，请确保您已经运行了它为您放入 /Applications 的安装程序。

就像 Jack 说的，使用 rvm 会顺畅很多。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-11T17:24:33.417

Mac OS 中的系统 Ruby 已经过时，我建议您安装[RVM](https://rvm.io/)或[Rbenv](https://github.com/sstephenson/rbenv/)来管理已安装的 Ruby 或安装新版本。

# sql-server - 在 SQL Server 中使用触发器来保存历史记录

> ID：11437987
> 
> 赞同：0
> 
> 时间：2012-07-11T17:19:49.830
> 
> 标签：sql-server, triggers

我正在使用 SQL Server 2012

我有一张桌子叫`AMOUNTS`和一张桌子叫`AMOUNTS_HIST`

两个表都有相同的列：

1.  改变日期
2.  数量
3.  COMPANY_ID
4.  EXP_ID
5.  点
6.  UPDATE_DATE [系统日期]

的主键`AMOUNTS`是 COMPANY_ID 和 EXP_ID。主键 pf`AMOUNTS_HIST`是 COMPANY_ID、EXP_ID 和 CHANGE_DATE

每当我在`AMOUNTS`表中添加一行时，我想在表中创建它的副本`AMOUNTS_HIST`。[理论上，每次将一行添加到“AMOUNTS”，COMPANY_ID、EXP_ID、CHANGE_DATE 将是唯一的。实际上，如果不是，则需要覆盖 AMOUNTS_HIST 中的相关行。下面的代码没有考虑覆盖。]

我创建了一个触发器，如下所示：

```
CREATE TRIGGER [MYDB].[update_history] ON [MYDB].[AMOUNTS]
FOR UPDATE
AS
INSERT MYDB.AMOUNTS_HIST (
    CHANGE_DATE,
    COMPANY_ID,
    EXP_ID,
    SPOT
    UPDATE_DATE
    )
SELECT e.CHANGE_DATE,
    e.COMPANY_ID,
    e.EXP_ID
    e.REMARKS,
    e.SPOT,
    e.UPDATE_DATE
FROM MYDB.AMOUNTS e
JOIN inserted ON inserted.company_id = e.company_id
    AND inserted.exp_id=e.exp_id 
```

我不明白为什么它在我的`AMOUNTS_HIST`桌子上什么也没做。任何人都可以帮忙吗？

谢谢，

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-11T17:31:20.940

可能是因为触发器，它当前的编写方式，只会在更新完成时触发，而不是插入。

尝试将其更改为：

```
CREATE TRIGGER [MYDB].[update_history] ON [MYDB].[AMOUNTS]
FOR UPDATE, INSERT 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-11T17:33:32.370

我只是想插话。你看过 CDC（变更数据捕获）吗？

[http://msdn.microsoft.com/en-us/library/bb522489(v=sql.105).aspx](http://msdn.microsoft.com/en-us/library/bb522489(v=sql.105).aspx) “变更数据捕获旨在捕获应用于 SQL Server 表的插入、更新和删除活动，并使以易于使用的关系格式提供的更改的详细信息。更改数据捕获使用的更改表包含反映跟踪源表的列结构的列，以及了解已发生更改所需的元数据。

变更数据捕获仅适用于 SQL Server 的 Enterprise、Developer 和 Evaluation 版本。”

就您的触发器而言，当您更新 [MYDB].[AMOUNTS] 时，触发器会引发任何错误吗？

此外，我相信您可以从 Inserted 表中获取所有数据，而无需连接回 mydb.amounts。

# spring - 每次获取引用 bean 的新 bean 实例

> ID：11437989
> 
> 赞同：0
> 
> 时间：2012-07-11T17:19:59.613
> 
> 标签：spring

我有两个疑问...

1）我有一个查询，当spring容器初始化时并且在调用get bean（）方法之前，bean在spring容器本身中被初始化，这是默认行为，我怎样才能以这种方式配置应用程序只有当调用 getbean() 时，该 bean 才应在容器中初始化，我们是否应该将 bean 声明为原型来实现这一点。

2）第二个查询是首先请先通过以下示例...

```
 <beans>
<bean id="triangle"  class="Demo.Triangle" scope="singleton" >
<property  name="pointA" ref="zeropoint"/>
<property  name="pointB" ref="firstpoint"/>
<property  name="pointC" ref="secondpoint"/>
</bean>

<bean id="zeropoint"  class="Demo.Point"  scope="prototype" >
<property name="x" value="10" /> 
<property name="y" value="20" /> 
</bean>

<bean id="firstpoint"  class="Demo.Point"  scope="prototype" >
<property name="x" value="10" /> 
<property name="y" value="20" /> 
</bean>

<bean id="secondpoint"  class="Demo.Point" scope="prototype">
<property name="x" value="10" /> 
<property name="y" value="20" /> 
</bean> 
```

如上所述，三角形 bean 是单例的，它引用的 bean 现在是原型，当我访问单例时，其他引用 bean 的 zeropoint、firstpoint 和 secondpoint 也只针对三角形初始化一次，但在这里我希望每次这三个 bean 的新实例在获取三角形 bean 时创建，请告知如何实现。是否可以通过我的 pojo 实现 ApplicationContextAware 接口来实现，请告知

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-11T19:03:43.930

`BeanFactoryAware`我建议尝试查找方法功能，而不是依赖 Spring 基础架构（ ）：

```
abstract class Triangle {

    public abstract Point createZeroPoint();
    public abstract Point createFirstPoint();
    public abstract Point createSecondPoint();

    public void foo() {
        Point p0 = createZeroPoint();
        Point p1 = createFirstPoint();
        Point p2 = createSecondPoint();
    }

} 
```

每次调用`create*Point()`抽象方法时，它都会创建`Point`. 但是你如何实现这个方法以及它如何知道返回哪个 bean？Spring为您实现了这个！

```
<bean id="triangle" class="Demo.Triangle" scope="singleton">
    <lookup-method name="createZeroPoint" bean="zeropoint"/>
    <lookup-method name="createFirstPoint" bean="firstpoint"/>
    <lookup-method name="createSecondPoint" bean="secondpoint"/>
</bean> 
```

查看综合文档：[4.4.6.1 查找方法注入](http://static.springsource.org/spring/docs/current/spring-framework-reference/html/beans.html#beans-factory-lookup-method-injection)。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-11T18:11:51.060

1.  它被称为[延迟加载](http://static.springsource.org/spring/docs/3.1.x/spring-framework-reference/html/beans.html#beans-factory-lazy-init)

    `<bean id="myBean" class="a.b.MyBean" lazy-init="true"/>`

2.  *   首先请注意，您的`firstpoint`和`secondpoint`bean 没有有效的范围定义（您错过了`scope=`）
    *   原型范围意味着每个需要原型 bean 的 bean 都有自己的实例。如果将定义多个三角形，它们都依赖于`zeropoint`每个三角形，则将是一个单独的`zeropoint`实例。
    *   如果你在你的三角形类中需要新的点实例（例如每次你调用一个三角形的方法），最好的方法是直接从bean工厂接收实例：

例如

```
class MyClass implements BeanFactoryAware {

  private BeanFactory beanFactory;

  public void setBeanFactory(BeanFactory beanFactory) {
    this.beanFactory = beanFactory;
  }

  public void doSomethingThatRequiresNewInstance() {
    Triangle t = beanFactory.getBean("zeropoint", Triangle.class);
    // because zeropoint is defined as prototype you get a new instance everytime you call getBean(..)
  }
} 
```

# jquery - 带有 Filepicker.io 的 Ymacs，带有 ajax 来检索内容

> ID：11437993
> 
> 赞同：4
> 
> 时间：2012-07-11T17:20:07.970
> 
> 标签：jquery, ajax, emacs, conflict, filepicker.io

我从[这里](http://brettcvz.github.com/ymacs/)使用 Ymacs 和 Filepicker.io ，我正在尝试使用 ajax 检索内容 div。

但问题是我也不能包含 jQuery 库，因为它会导致冲突并且 ajax 仍然无法正常工作我也尝试了 jQuery 中的这段代码，但它似乎没有任何影响。

我把 no noConflict 放在两个地方。

任何想法如何解决这个问题？

```
<script type="text/javascript" src="/js/jquery-1.7.2.min.js">
     $.noConflict();

    window.setInterval(getAjax, 3000);

    function getAjax() {
        $.ajax({
            type: "POST",
            url: '/index',
            data: "some-data"          
        });
    }

</script> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-29T01:07:36.223

你忘记了脚本标签还是我错过了在其他地方加载的 jQuery？这对我有用：

```
<!DOCTYPE html>
<script type="text/javascript" src="/js/jquery-1.7.2.min.js"></script>
<script>
  // $.noConflict();

  window.setInterval(getAjax, 3000);

  // This is getting hoisted
  function getAjax() {
        $.ajax({
            type: "POST",
            url: '/index',
            data: "some-data"
        });
  }
</script> 
```

[https://gist.github.com/3505792](https://gist.github.com/3505792)

# objective-c - CCCrypt解密结果-4304

> ID：11437995
> 
> 赞同：1
> 
> 时间：2012-07-11T17:20:13.690
> 
> 标签：objective-c, ios, encryption, commoncrypto

当我加密一个字符串然后立即解密时，CCCryptorStatus 是 -4304 并且得到的解码字符串的长度不正确。谁能看到我可能做错了什么？

```
//Encrypt

NSString *plainText = @"e22ae25e-0b20-433a-8aa5-a5678714f590";
NSData *rawData = [plainText dataUsingEncoding:NSUTF8StringEncoding];
size_t outLength;
NSMutableData *cipherData = [NSMutableData dataWithLength:rawData.length + kCCBlockSizeAES128];
CCCryptorStatus cryptStatus = CCCrypt(kCCEncrypt, kCCAlgorithmAES128, kCCOptionPKCS7Padding, [AESKey bytes], [AESKey length],  NULL, [rawData bytes], [rawData length], [cipherData mutableBytes], [cipherData length], &outLength);

//[plainText length] = 36
//[rawData length] = 36
//[cipherData length] = 52
//outLength = 48

//Decrypt

NSMutableData *decodedData = [NSMutableData dataWithLength:cipherData.length + kCCBlockSizeAES128];

//[decodedData length] = 68

CCCryptorStatus cryptStatus2 = CCCrypt(kCCDecrypt, kCCAlgorithmAES128, kCCOptionPKCS7Padding, [AESKey bytes], [AESKey length], NULL, [cipherData bytes], [cipherData length], [decodedData mutableBytes], [decodedData length], &outLength);
NSString *decodedString = [[NSString alloc] initWithData:decodedData encoding:NSUTF8StringEncoding];

//[decodedData length] = 68
//[decodedString length] = 68

/*
    At this point, cryptStatus2 is -4304 and 
    decodedString = "e22ae25e-0b20-433a-8aa5-a5678714f590\f\f\f\f\f\f\f\f\f\f\f\f";

*/ 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-11T17:45:48.743

那是`kCCAlignmentError`根据头文件。尝试使用`outlength`而不是`[cipherData length]`.