# StackOverflow 问答 10781000-10781999

# c - Little Endian Macros

> ID：10781003
> 
> 赞同：1
> 
> 时间：2012-05-28T07:39:24.010
> 
> 标签：c, macros, header-files, endianness

So I have a new and exciting question that I would dearly like answered. So I'm writing a file compressor, basically a tar and in all honesty, that code seems to be going quite well. What I'm getting stuck on right now is an additional feature that is required of the project. We need to be able to produce the binary files as if they were made on a little endian machine. I've created a header file that I've included into my code that should do the bit swapping for me. It follows thus:

```
#ifndef MYLIB_H
#define MYLIB_H

#define BITS_PER_BYTE 8
#define true 1
#define false 0

typedef unsigned char uchar;
typedef unsigned long ulong;
typedef unsigned int uint;
typedef unsigned short ushort;

#ifdef LITTLE_ENDIAN

#define SwapULong(val) (val << 24 | (val << 8 & 0xFF0000) | (val >> 8 & 0xFF00) | val >> 24 & 0xFF)
#define SwapUShort(val) (val << BITS_PER_BYTE | val >> BITS_PER_BYTE)

#else

#define SwapULong(val) (val)
#define SwapUShort(val) (val)

#endif

#endif 
```

So when I compile with gcc and run the program there are no errors. When I do a hexdump -C of the output however, the output is still in Big Endian Order!

I then tried compiling with the -E flag and I got a bunch of lines saying that

```
./compress line #: typedef: command not found 
```

which became

```
./compress line #: __extension__ : command not found 
```

until the final lines of the terminal output showed

```
./compress line 86: syntax error near unexpected '}' token
./compress line 86: __extension__ typedef struct { int __val[2]; } __fsid_t; 
```

So any ideas what might be causing this for me?

Any help would be appreciated.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-28T07:45:51.693

You need to include the `endian.h` header.

# .net - 使用三重 DES 解密信息时出现错误数据

> ID：10781007
> 
> 赞同：2
> 
> 时间：2012-05-28T07:40:04.317
> 
> 标签：.net, encryption, cryptography, 3des, tripledes

我正在通过.Net开发一个mvc应用程序，以保护我的敏感信息，例如web.config中的信息我有两个使用Triple DES加密和解密信息的函数，但是我对此并不陌生并成功达到在朋友的帮助下。

加密功能工作正常并返回正确的字符串但是当我尝试解密我得到的相同字符串时

`Exception Details: System.Security.Cryptography.CryptographicException: Bad Data.`

解密函数这一行的错误：

`Results = Decryptor.TransformFinalBlock(DataToDecrypt, 0, DataToDecrypt.Length);`

我试图以我作为注释代码包含的几种方式来解决它，但他们没有帮助，请帮助我解决这个问题。

```
public static string Encrypt(string Message, string Passphrase)
    {
        byte[] Results;
        System.Text.UTF8Encoding UTF8 = new System.Text.UTF8Encoding();
        MD5CryptoServiceProvider HashProvider = new MD5CryptoServiceProvider();
        byte[] TDESKey = HashProvider.ComputeHash(UTF8.GetBytes(GetSHA256String(Passphrase)));
        TripleDESCryptoServiceProvider TDESAlgorithm = new TripleDESCryptoServiceProvider();
        TDESAlgorithm.Key = TDESKey;
        TDESAlgorithm.Mode = CipherMode.ECB;
        TDESAlgorithm.Padding = PaddingMode.PKCS7;
        byte[] DataToEncrypt = UTF8.GetBytes(Message);
        try
        {
            ICryptoTransform Encryptor = TDESAlgorithm.CreateEncryptor();
            Results = Encryptor.TransformFinalBlock(DataToEncrypt, 0, DataToEncrypt.Length);
        }
        finally
        {
            TDESAlgorithm.Clear();
            HashProvider.Clear();
        }
        return Convert.ToBase64String(Results);
        //return Encoding.UTF8.GetString(Results);

    }

    public static string Decrypt(string Message, string Passphrase)
    {
        byte[] Results;
        System.Text.UTF8Encoding UTF8 = new System.Text.UTF8Encoding();
        MD5CryptoServiceProvider HashProvider = new MD5CryptoServiceProvider();
        byte[] TDESKey = HashProvider.ComputeHash(UTF8.GetBytes(GetSHA256String(Passphrase)));
        TripleDESCryptoServiceProvider TDESAlgorithm = new TripleDESCryptoServiceProvider();
        TDESAlgorithm.Key = TDESKey;
        TDESAlgorithm.Mode = CipherMode.ECB;
        TDESAlgorithm.Padding = PaddingMode.PKCS7;
        try
        {
            byte[] DataToDecrypt = Convert.FromBase64String(Message);
            //byte[] DataToDecrypt = UTF8.GetBytes(Message);
            //byte[] DataToDecrypt = Encoding.UTF8.GetBytes(Message);
            ICryptoTransform Decryptor = TDESAlgorithm.CreateDecryptor();
            Results = Decryptor.TransformFinalBlock(DataToDecrypt, 0, DataToDecrypt.Length); // << ERROR is here.
        }
        finally
        {
            TDESAlgorithm.Clear();
            HashProvider.Clear();
        }
        return UTF8.GetString(Results);
    } 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-28T10:25:53.617

TripleDES 算法指定了一个 IV（初始化向量），用于确保使用相同密钥对相同数据进行重复加密会产生不同的密文。要成功解密，解密过程中必须使用与加密期间相同的 IV。

由于您当前`TDESAlgorithm.IV`在执行加密时未指定 IV ( )，因此算法将其设置为随机值。该算法还将解密期间使用的 IV 设置为随机值（但与加密中使用的不同），因此解密过程失败。

要更正此问题，您可以使用以下方法（请注意，在加密阶段随机生成的 IV 是从`Encrypt`方法输出并传递给`Decrypt`方法）：

```
public static string Encrypt(string Message, string Passphrase, out byte[] iv)
{
    byte[] Results;
    System.Text.UTF8Encoding UTF8 = new System.Text.UTF8Encoding();
    MD5CryptoServiceProvider HashProvider = new MD5CryptoServiceProvider();
    byte[] TDESKey = HashProvider.ComputeHash(UTF8.GetBytes(GetSHA256String(Passphrase)));
    TripleDESCryptoServiceProvider TDESAlgorithm = new TripleDESCryptoServiceProvider();
    TDESAlgorithm.Key = TDESKey;
    TDESAlgorithm.Mode = CipherMode.ECB;
    TDESAlgorithm.Padding = PaddingMode.PKCS7;
    // Capture the randomly generated IV
    iv = TDESAlgorithm.IV;
    byte[] DataToEncrypt = UTF8.GetBytes(Message);
    try
    {
        ICryptoTransform Encryptor = TDESAlgorithm.CreateEncryptor();
        Results = Encryptor.TransformFinalBlock(DataToEncrypt, 0, DataToEncrypt.Length);
    }
    finally
    {
        TDESAlgorithm.Clear();
        HashProvider.Clear();
    }
    return Convert.ToBase64String(Results);
    //return Encoding.UTF8.GetString(Results);
}

public static string Decrypt(string Message, string Passphrase, byte[] iv)
{
    byte[] Results;
    System.Text.UTF8Encoding UTF8 = new System.Text.UTF8Encoding();
    MD5CryptoServiceProvider HashProvider = new MD5CryptoServiceProvider();
    byte[] TDESKey = HashProvider.ComputeHash(UTF8.GetBytes(GetSHA256String(Passphrase)));
    TripleDESCryptoServiceProvider TDESAlgorithm = new TripleDESCryptoServiceProvider();
    TDESAlgorithm.Key = TDESKey;
    // Apply the same IV used during encryption
    TDESAlgorithm.IV = iv;
    TDESAlgorithm.Mode = CipherMode.ECB;
    TDESAlgorithm.Padding = PaddingMode.PKCS7;
    try
    {
        byte[] DataToDecrypt = Convert.FromBase64String(Message);
        //byte[] DataToDecrypt = UTF8.GetBytes(Message);
        //byte[] DataToDecrypt = Encoding.UTF8.GetBytes(Message);
        ICryptoTransform Decryptor = TDESAlgorithm.CreateDecryptor();
        Results = Decryptor.TransformFinalBlock(DataToDecrypt, 0, DataToDecrypt.Length); // << ERROR is here.
    }
    finally
    {
        TDESAlgorithm.Clear();
        HashProvider.Clear();
    }
    return UTF8.GetString(Results);
} 
```

请注意，如果您以后要成功解密数据，则需要将 IV 与密文一起存储。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-04-11T08:48:11.117

我最近遇到了这个问题。一个空值已传递给`Decrypt()`. *如果（要解密的数据）*为空，则`TransformFinalBlock()`（内部`Decrypt()`）抛出**错误数据**异常。`Message`

 *因此，请在调用之前为要解密的数据添加一个空/空检查`Decrypt()`。*

# qt - QGLBuffer 使用

> ID：10781009
> 
> 赞同：1
> 
> 时间：2012-05-28T07:40:14.227
> 
> 标签：qt, qglwidget

我在理解如何使用 QGLBuffer 渲染简单对象（例如 Rectangle ）方面遇到了一些问题。我正在尝试为我的应用程序制作选择矩形。这是我在做什么的代码示例：

```
class PlotGLWidget : public QGLWidget
 {
     Q_OBJECT
private:
QGLBuffer* m_ZoomRectBuffer;
public:
void initializeGL();
void paintGL();
void drawZoomRect();
};
void PlotGLWidget::initializeGL()
{
setMouseTracking (true);
glClearColor(1,1,1,0);
m_ZoomRectBuffer=new QGLBuffer(QGLBuffer::VertexBuffer);
m_ZoomRectBuffer->create();
m_ZoomRectBuffer->bind();
m_ZoomRectBuffer->setUsagePattern(QGLBuffer::DynamicDraw);
m_ZoomRectBuffer->allocate(8*sizeof(double));
m_ZoomRectBuffer->release();
}
void PlotGLWidget::paintGL()
{
glClear(GL_COLOR_BUFFER_BIT);
glViewport(0, 0, this->width(), this->height());
glMatrixMode(GL_PROJECTION);
glLoadIdentity();
glOrtho(0,100, 0,100, -1.0l, 0.0l);
glMatrixMode(GL_MODELVIEW);
glLoadIdentity();
drawZoomRect();
}
void PlotGLWidget::drawZoomRect()
{
GLdouble vertices[] = {10, 10, 0, 
                      10,  20, 0, 
                      20,  20, 0, 
                      20, 10, 0}; 

     GLubyte indices[] = {0,1,2,3};
if(m_ZoomRectBuffer->bind()){
m_ZoomRectBuffer->write(0,vertices,sizeof(double)*12);
glEnableClientState(GL_VERTEX_ARRAY);
glVertexPointer( 3, GL_DOUBLE, 0, 0);
glDrawElements( GL_POLYGON, 4, GL_UNSIGNED_BYTE,indices);
glDisableClientState(GL_VERTEX_ARRAY);
m_ZoomRectBuffer->release();     
} 
```

尽管只是示例，但我确信我的代码和我对技术的理解中存在一些错误。代码编译没有错误并运行，但没有绘制。

# c# - 在 Webbrowser C# 中获取网页的源代码

> ID：10781011
> 
> 赞同：1
> 
> 时间：2012-05-28T07:40:24.290
> 
> 标签：c#, browser, webrequest

目前，我在 WebBrowser 组件中加载了一个网站，该组件不断更改`<a>`页面内部某个特定内容的内容。为了让我获取数据，我必须每 5 秒创建另一个 WebRequest，只是为了刷新数据（我认为它们被称为动态页面）。我尝试从 WebBrowser ( `WebBrowser.DocumentText`) 获取数据，但值保持不变，即使我很确定它已更改，因为我可以看到它已更改。我认为每 5 秒的 webrequest 会占用不必要的内存空间，并且可以更轻松地完成此操作。

**你们可能知道我这样做的方法吗？**

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-28T08:55:44.593

在 Winforms 猜测。您需要使用 Document 属性来回读 DOM。这是一个例子。启动一个新的 Winforms 项目并在表单上放置一个 WebBrowser。然后是标签和计时器。使代码如下所示：

```
public partial class Form1 : Form {
    public Form1() {
        InitializeComponent();
        webBrowser1.Url = new Uri("http://stackoverflow.com/questions/10781011/get-source-of-webpage-in-webbrowser-c-sharp");
        webBrowser1.DocumentCompleted += webBrowser1_DocumentCompleted;
        timer1.Interval = 100;
        timer1.Tick += new EventHandler(timer1_Tick);
    }

    void timer1_Tick(object sender, EventArgs e) {
        var elem = webBrowser1.Document.GetElementById("wmd-input");
        label1.Text = elem.InnerText;
    }

    void webBrowser1_DocumentCompleted(object sender, WebBrowserDocumentCompletedEventArgs e) {
        timer1.Enabled = true;
    }
} 
```

浏览器将导航到您的问题。在答案框中输入内容，注意标签如何显示您输入的内容。

您需要调整此代码以使用您的特定网页，更改“wmd-input”元素名称。使用 DOM 检查工具来查找名称。我喜欢萤火虫。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-28T07:57:29.203

您可以尝试通过 JavaScript 获取源代码。

使用[`InvokeScript`](http://msdn.microsoft.com/en-us/library/be9zzz62.aspx)方法执行`return document.documentElement.outerHTML;`

这将返回一个`Object`您应该能够将其类型转换为`String`.

# actionscript-3 - 访问 swc 中的主时间线

> ID：10781013
> 
> 赞同：0
> 
> 时间：2012-05-28T07:40:36.940
> 
> 标签：actionscript-3, flash, apache-flex, flash-builder

我有一些动画是在 FLA 的主时间轴中创建的

我想将其发布为 SWC，以便通过 Flash Builder 导入。

但是-我找不到这样做的方法。有任何想法吗？

到目前为止，我所知道的唯一解决方法是将所有帧复制到一个影片剪辑符号中，然后将其设置为“为动作脚本导出”这并不理想，因为那时我需要重新定位整个动画，使其位于 0,0- 和因为有物体在舞台边界之外移动，等等。我必须用肉眼来做。不理想：\因此非常感谢更好的解决方案！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-28T08:18:44.780

你可以嵌入一个 .swf

```
package {
import flash.display.MovieClip;
import flash.display.Sprite;

public class Demo extends Sprite{

    [Embed (source="test.swf")]
    private var Test : Class

    public function Demo() {

        var test : MovieClip = new Test() as MovieClip;
        addChild(test);

    }
}
} 
```

# android - 谷歌分析不适用于安卓

> ID：10781022
> 
> 赞同：0
> 
> 时间：2012-05-28T07:41:52.500
> 
> 标签：android, google-analytics, android-tabactivity

我想在我的 android 应用程序上导入谷歌分析，我的代码是

```
private GoogleAnalyticsTracker tracker;

@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.demo);

    tracker = GoogleAnalyticsTracker.getInstance();
    tracker.startNewSession(getString(R.string.analytics_id), this);
    tracker.trackPageView("/demo");
}

@Override
protected void onDestroy() {
    super.onDestroy();
    tracker.stopSession();
} 
```

但它不工作......我在哪里做错了？谢谢......注意：我使用了tabactivity和每个标签代码......

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-06-08T06:37:21.483

我从这个博客中找到了答案。希望它有帮助。
[http://blog.blundellapps.com/google-analytics-common-problems-and-fixes/](http://blog.blundellapps.com/google-analytics-common-problems-and-fixes/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-28T07:52:09.490

建立

// 将 libGoogleAnalytics.jar 添加到项目的 /libs 目录中。

// 将以下权限添加到项目的 AndroidManifest.xml 清单文件中：

```
<uses-permission android:name="android.permission.INTERNET" />
<uses-permission android:name="android.permission.ACCESS_NETWORK_STATE" /> 
```

**编辑：** 为了使用 Google Analytics，您必须使用已注册的 Google 帐户电子邮件地址和密码登录。

在此处创建一个[Google 帐户](https://accounts.google.com/NewAccount)。但是，仅拥有 Google 帐户并不会自动授予您访问 Analytics 的权限。首先，您必须[注册 Google Analytics](http://www.google.com/analytics/sign_up.html)，这是一个一次性的简单流程。

# big-o - 用大哦证明

> ID：10781024
> 
> 赞同：0
> 
> 时间：2012-05-28T07:42:08.047
> 
> 标签：big-o, proof

刚开始学习大哦和渐近分析，我被困在这个特殊的证明上：

我们如何证明 2^n 是 O(n!)？谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-28T07:48:22.457

为了证明这一点，你所展示的只是存在一些`C`这样的

> 2 ^n <= C*n！

对于所有 n 大于某些 n [0]。一旦你意识到 2 ^n和 n! 是具有 n 项的产品。

# php - Janrain 的 OpenID PHP 库登录后无法检索 Google 用户信息

> ID：10781027
> 
> 赞同：2
> 
> 时间：2012-05-28T07:42:13.677
> 
> 标签：php, openid, google-openid, janrain, openid-provider

我开始说我讨厌 OpenID，因为它的实施/记录很差。

我正在尝试使用“openid-php-openid-2.2.2-24”。这里的源代码：[https ://github.com/openid/php-openid](https://github.com/openid/php-openid)

当我尝试使用身份验证示例时，它返回给我：“您已成功验证 https://www.google.com/accounts/o8/id?id=[...] 作为您的身份。

提供商没有发送 PAPE 响应。”

但没有 google openid 登录数据的电子邮件、昵称或全名的影子。在读取文件（“/openid/examples/consumer/finish_auth.php”）时，我注意到必须在“您已成功验证”和“无 PAPE 响应”消息之间打印 SREG 变量，但它们不会：

```
 $success = sprintf('You have successfully verified ' .
                       '<a href="%s">%s</a> as your identity.',
                       $esc_identity, $esc_identity);

    if ($response->endpoint->canonicalID) {
        $escaped_canonicalID = escape($response->endpoint->canonicalID);
        $success .= '  (XRI CanonicalID: '.$escaped_canonicalID.') ';
    }

    $sreg_resp = Auth_OpenID_SRegResponse::fromSuccessResponse($response);

    $sreg = $sreg_resp->contents();

    if (@$sreg['email']) {
        $success .= "  You also returned '".escape($sreg['email']).
            "' as your email.";
    }

    if (@$sreg['nickname']) {
        $success .= "  Your nickname is '".escape($sreg['nickname']).
            "'.";
        $_SESSION['nickname'] = escape($sreg['nickname']);
    }

    if (@$sreg['fullname']) {
        $success .= "  Your fullname is '".escape($sreg['fullname']).
            "'.";
    }

$pape_resp = Auth_OpenID_PAPE_Response::fromSuccessResponse($response);

if ($pape_resp) {
    [...]
} else {
        $success .= "<p>No PAPE response was sent by the provider.</p>";
} 
```

我尝试打印 $sreg['email']、$sreg['nickname'] 和 $sreg['fullname'] 的内容，但它们返回所有空白内容（空值/空值）。

我需要检索用户用于登录的帐户的电子邮件地址..

但丁

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-26T13:24:53.167

为了将问题从未回答的列表中删除，我在此处发布但丁的答案作为答案：

* * *

我解决了我的问题。在 PHP OpenID 中[使用 AX 的示例：在 PHP OpenID 中使用 AX 的示例](https://stackoverflow.com/questions/1183788/example-usage-of-ax-in-php-openid) 经过 2 天的研究，我刚刚找到了答案（“但是 Google 使用 AX（属性交换）而不是 SReg 来获取其他数据”）。为什么谷歌必须总是如此不同？

但是，该 stackoverflow 答案页面中的代码对我不起作用（我的托管服务器返回 500 内部服务器错误代码）。所以，我在这里发布“我的代码”（太粗糙了）：

oid_ax_common.php

```
<?php

// Circumnavigate bugs in the GMP math library that can be result in signature
// validation errors
define('Auth_OpenID_BUGGY_GMP', true);

$path_extra = dirname(dirname(dirname(__FILE__)));
$path = ini_get('include_path');
$path = $path_extra . PATH_SEPARATOR . $path;
ini_set('include_path', $path);

function displayError($message) {
    $error = $message;
    include './index.php';
    exit(0);
}

function doIncludes() {
    /**
     * Require the OpenID consumer code.
     */
    require_once "Auth/OpenID/Consumer.php";

    /**
     * Require the "file store" module, which we'll need to store
     * OpenID information.
     */
    require_once "Auth/OpenID/FileStore.php";

    /**
     * Require the Simple Registration extension API.
     */
    //require_once "Auth/OpenID/SReg.php";
    require_once "Auth/OpenID/AX.php";

    /**
     * Require the PAPE extension module.
     */
    require_once "Auth/OpenID/PAPE.php";
}

doIncludes();

global $pape_policy_uris;
$pape_policy_uris = array(
              PAPE_AUTH_MULTI_FACTOR_PHYSICAL,
              PAPE_AUTH_MULTI_FACTOR,
              PAPE_AUTH_PHISHING_RESISTANT
              );

function &getStore() {
    /**
     * This is where the example will store its OpenID information.
     * You should change this path if you want the example store to be
     * created elsewhere.  After you're done playing with the example
     * script, you'll have to remove this directory manually.
     */
    $store_path = null;
    if (function_exists('sys_get_temp_dir')) {
        $store_path = sys_get_temp_dir();
    }
    else {
        if (strpos(PHP_OS, 'WIN') === 0) {
            $store_path = $_ENV['TMP'];
            if (!isset($store_path)) {
                $dir = 'C:\Windows\Temp';
            }
        }
        else {
            $store_path = @$_ENV['TMPDIR'];
            if (!isset($store_path)) {
                $store_path = '/tmp';
            }
        }
    }
    $store_path = './tmp/';
    $store_path .= DIRECTORY_SEPARATOR . '_php_consumer_test';

    if (!file_exists($store_path) &&
        !mkdir($store_path)) {
        print "Could not create the FileStore directory '$store_path'. ".
            " Please check the effective permissions.";
        exit(0);
    }
    $r = new Auth_OpenID_FileStore($store_path);

    return $r;
}

function &getConsumer() {
    /**
     * Create a consumer object using the store object created
     * earlier.
     */
    $store = getStore();
    $r = new Auth_OpenID_Consumer($store);
    return $r;
}

function getScheme() {
    $scheme = 'http';
    if (isset($_SERVER['HTTPS']) and $_SERVER['HTTPS'] == 'on') {
        $scheme .= 's';
    }
    return $scheme;
}

function getReturnTo() {
    return sprintf("%s://%s:%s%s/oid_ax_receive.php",
                   getScheme(), $_SERVER['SERVER_NAME'],
                   $_SERVER['SERVER_PORT'],
                   dirname($_SERVER['PHP_SELF']));
}

function getTrustRoot() {
    return sprintf("%s://%s:%s%s/",
                   getScheme(), $_SERVER['SERVER_NAME'],
                   $_SERVER['SERVER_PORT'],
                   dirname($_SERVER['PHP_SELF']));
}

?> 
```

oid_ax_send.php

```
<?php

require_once "oid_ax_common.php";
// Starts session (needed for YADIS)
session_start();

function getOpenIDURL() {
    // Render a default page if we got a submission without an openid
    // value.
    if (empty($_GET['openid_identifier'])) {
        $error = "Expected an OpenID URL.";
        include './index.php';
        exit(0);
    }

    return $_GET['openid_identifier'];
}

function run() {
    // https://www.google.com/accounts/o8/id
    // $openid = 'http://openid-provider.appspot.com/';
    $openid = 'https://www.google.com/accounts/o8/id';
    // $openid .= getOpenIDURL();
    $consumer = getConsumer();

    // Begin the OpenID authentication process.
    $auth_request = $consumer->begin($openid);

    // Create attribute request object
    // See http://code.google.com/apis/accounts/docs/OpenID.html#Parameters for parameters
    // Usage: make($type_uri, $count=1, $required=false, $alias=null)
    $attribute[] = Auth_OpenID_AX_AttrInfo::make('http://axschema.org/contact/email',2,1, 'email');
    $attribute[] = Auth_OpenID_AX_AttrInfo::make('http://axschema.org/namePerson/first',1,1, 'firstname');
    $attribute[] = Auth_OpenID_AX_AttrInfo::make('http://axschema.org/namePerson/last',1,1, 'lastname');

    // Create AX fetch request
    $ax = new Auth_OpenID_AX_FetchRequest;

    // Add attributes to AX fetch request
    foreach($attribute as $attr){
        $ax->add($attr);
    }

    // Add AX fetch request to authentication request
    $auth_request->addExtension($ax);

    // No auth request means we can't begin OpenID.
    if (!$auth_request) {
        displayError("Authentication error; not a valid OpenID.");
    }

    /* $sreg_request = Auth_OpenID_SRegRequest::build(
                                     // Required
                                     array('nickname'),
                                     // Optional
                                     array('fullname', 'email'));

    if ($sreg_request) {
        $auth_request->addExtension($sreg_request);
    } */

    $policy_uris = null;
    if (isset($_GET['policies'])) {
        $policy_uris = $_GET['policies'];
    }

    $pape_request = new Auth_OpenID_PAPE_Request($policy_uris);
    if ($pape_request) {
        $auth_request->addExtension($pape_request);
    }

    // Redirect the user to the OpenID server for authentication.
    // Store the token for this authentication so we can verify the
    // response.

    // For OpenID 1, send a redirect.  For OpenID 2, use a Javascript
    // form to send a POST request to the server.
    if ($auth_request->shouldSendRedirect()) {
        $redirect_url = $auth_request->redirectURL(getTrustRoot(),
                                                   getReturnTo());

        // If the redirect URL can't be built, display an error
        // message.
        if (Auth_OpenID::isFailure($redirect_url)) {
            displayError("Could not redirect to server: " . $redirect_url->message);
        } else {
            // Send redirect.
            header("Location: ".$redirect_url);
        }
    } else {
        // Generate form markup and render it.
        $form_id = 'openid_message';
        $form_html = $auth_request->htmlMarkup(getTrustRoot(), getReturnTo(),
                                               false, array('id' => $form_id));

        // Display an error if the form markup couldn't be generated;
        // otherwise, render the HTML.
        if (Auth_OpenID::isFailure($form_html)) {
            displayError("Could not redirect to server: " . $form_html->message);
        } else {
            print $form_html;
        }
    }
}

run();

?> 
```

oid_ax_receive.php

```
<?php

require_once "oid_ax_common.php";
// Starts session (needed for YADIS)
session_start();

function escape($thing) {
    return htmlentities($thing);
}

function run() {
    $consumer = getConsumer();

    // Complete the authentication process using the server's
    // response.
    $return_to = getReturnTo();
    $response = $consumer->complete($return_to);

    // Check the response status.
    if ($response->status == Auth_OpenID_CANCEL) {
        // This means the authentication was cancelled.
        $msg = 'Verification cancelled.';
    } else if ($response->status == Auth_OpenID_FAILURE) {
        // Authentication failed; display the error message.
        $msg = "OpenID authentication failed: " . $response->message;
    } else if ($response->status == Auth_OpenID_SUCCESS) {
        // Get registration informations
        $ax = new Auth_OpenID_AX_FetchResponse();
        $obj = $ax->fromSuccessResponse($response);

        // Print me raw
        echo '<pre>';
        print_r($obj->data);
        echo '</pre>';
        exit;

        $pape_resp = Auth_OpenID_PAPE_Response::fromSuccessResponse($response);

        if ($pape_resp) {
            if ($pape_resp->auth_policies) {
                $success .= "<p>The following PAPE policies affected the authentication:</p><ul>";

                foreach ($pape_resp->auth_policies as $uri) {
                    $escaped_uri = escape($uri);
                    $success .= "<li><tt>$escaped_uri</tt></li>";
                }

                $success .= "</ul>";
            } else {
                $success .= "<p>No PAPE policies affected the authentication.</p>";
            }

            if ($pape_resp->auth_age) {
                $age = escape($pape_resp->auth_age);
                $success .= "<p>The authentication age returned by the " .
                    "server is: <tt>".$age."</tt></p>";
            }

            if ($pape_resp->nist_auth_level) {
                $auth_level = escape($pape_resp->nist_auth_level);
                $success .= "<p>The NIST auth level returned by the " .
                    "server is: <tt>".$auth_level."</tt></p>";
            }

        } else {
                $success .= "<p>No PAPE response was sent by the provider.</p>";
        }

    }

    include './index.php';
}

run();

?> 
```

享受。

但丁

PS：为了完成OpenID的操作，虽然我用谷歌解决了用户信息/登录数据的问题，但我仍然有一个Light OpenID的问题（[https://stackoverflow.com/questions/10735708/lightopenid-openid-authurl-不返回任何值](https://stackoverflow.com/questions/10735708/lightopenid-openid-authurl-does-not-return-any-value)）。如果您想帮助我，我们将彻底解决并以 OpenID 的故事结束。

# ajax - json 数据未在模板中更新

> ID：10781031
> 
> 赞同：0
> 
> 时间：2012-05-28T07:42:22.630
> 
> 标签：ajax, templates, extjs, response

我的主要观点是

```
Ext.define("casta.view.Main", {
    extend: 'Ext.tab.Panel',
    apitoken:'NULL',
    callbackdata:'NULL',
    requires: [
        'Ext.TitleBar',
        'Ext.Video',
        'casta.view.Intro'

    ],
    config: {
        tabBarPosition: 'top',

        items: [
                 //intro.js actually need json rendering

                { title:'Intro',
                   xclass: 'casta.view.Intro' ,
                   iconCls:'user',
                   renderTo: document.body,

                 }

        ]
    }
}); 
```

我已经从外部 url 调用了 json，如下所示 intro.js

```
 Ext.define('User', {
    extend: 'Ext.data.Model',
    fields: ['id', 'username']
})

Ext.define('casta.view.Intro', {
    extend: 'Ext.tab.Panel',
    alias: 'widget.Intro',

    requires: ['Ext.data.Store'],

    itemTpl: '{id} - {username}',

    initComponent: function(){
        this.store = new Ext.data.Store({
            autoLoad: true,
            model: 'User',
            proxy: {
                type: 'ajax',
                url: 'http://localhost:8000/api/casta/user/?format=json',
                reader: {
                    type: 'json',
                    root: 'objects'
                }
            }
        });
        this.callParent();
    }  
});

Ext.onReady(function(){
    Ext.create('Ext.tab.Panel', {
        width: 400,
        height: 400,
        renderTo: document.body,
        items: [{
            title: 'My View',
            xtype: 'Intro'
        }]
    })
}); 
```

我从响应中得到的 json 如下

```
{"meta": {"limit": 20, "next": null, "offset": 0, "previous": null, "total_count": 2}, "objects": [{"date_joined": "2012-05-18T15:44:54", "first_name": "", "id": 1, "last_login": "2012-05-18T15:44:54", "last_name": "", "resource_uri": "/api/casta/user/1/", "username": "admin"}, {"date_joined": "2012-05-21T12:05:00", "first_name": "", "id": 29, "last_login": "2012-05-21T12:05:00", "last_name": "", "resource_uri": "/api/casta/user/29/", "username": "sumit"}]} 
```

每当我保留静态字符串时，模板都会更新，否则模板不会更新。任何人都可以告诉我我必须做什么.. 还有任何功能，`onload`而不是`initcomponent`我只想在调用此面板时调用 ajax

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-28T08:38:49.143

你正在以完全错误的方式解决这个问题。而不是试图修复你的例子，看看这个：

```
Ext.define('User', {
    extend: 'Ext.data.Model',
    fields: ['id', 'username']
})

Ext.define('MyView', {
    extend: 'Ext.view.View',
    alias: 'widget.myview',

    requires: ['Ext.data.Store'],

    itemTpl: '{id} - {username}',

    initComponent: function(){
        this.store = new Ext.data.Store({
            autoLoad: true,
            model: 'User',
            proxy: {
                type: 'ajax',
                url: 'data.json',
                reader: {
                    type: 'json',
                    root: 'objects'
                }
            }
        });
        this.callParent();
    }  
});

Ext.onReady(function(){
    Ext.create('Ext.tab.Panel', {
        width: 400,
        height: 400,
        renderTo: document.body,
        items: [{
            title: 'My View',
            xtype: 'myview'
        }]
    })
}); 
```

# c++ - 使用 cv::Mat 的高效 C++ 四元数乘法

> ID：10781033
> 
> 赞同：11
> 
> 时间：2012-05-28T07:42:30.137
> 
> 标签：c++, opencv, quaternions

我想将 2 个四元数相乘，它们存储在**cv::Mat**结构中。我希望该功能尽可能高效。到目前为止，我有以下代码：

```
/** Quaternion multiplication
 *
 */
void multiplyQuaternion(const Mat& q1,const Mat& q2, Mat& q)
{
    // First quaternion q1 (x1 y1 z1 r1)
    const float x1=q1.at<float>(0);
    const float y1=q1.at<float>(1);
    const float z1=q1.at<float>(2);
    const float r1=q1.at<float>(3);

    // Second quaternion q2 (x2 y2 z2 r2)
    const float x2=q2.at<float>(0);
    const float y2=q2.at<float>(1);
    const float z2=q2.at<float>(2);
    const float r2=q2.at<float>(3);

    q.at<float>(0)=x1*r2 + r1*x2 + y1*z2 - z1*y2;   // x component
    q.at<float>(1)=r1*y2 - x1*z2 + y1*r2 + z1*x2;   // y component
    q.at<float>(2)=r1*z2 + x1*y2 - y1*x2 + z1*r2;   // z component
    q.at<float>(3)=r1*r2 - x1*x2 - y1*y2 - z1*z2;   // r component
} 
```

这是 OpenCV 最快的方法吗？使用定点算术会最快吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-28T15:50:54.947

本教程介绍[了](http://docs.opencv.org/doc/tutorials/core/how_to_scan_images/how_to_scan_images.html#howtoscanimagesopencv)访问不同像素的不同方法。与直接像素访问相比，该`Mat::at`函数被发现要慢约 10%，这可能是由于在调试模式下进行了额外检查。

如果你真的不喜欢表现，你应该用文中提到的 3 种不同的方法重写你的方法，然后分析以找到最适合你情况的一种。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-08T16:09:24.433

曾经有一个 ARM 矢量浮点四元数乘法，我现在找不到。我可以找到这个 SIMD 库：

[Bullet 3D 游戏多物理场库](http://code.google.com/p/bullet/source/browse/trunk/src/vectormath/sse/quat_aos.h)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-03-25T08:11:16.827

四元数通常用于旋转 3D 矢量，因此您可以考虑检查一个四元数是否为纯矢量（即标量或实部为零）。这可以将您的工作减少到 12 个乘法、8 个加/减和一个符号翻转。

您还可以对两个纯向量使用四元数乘法来同时计算它们的点积和叉积，因此对这种特殊情况进行测试也可能是值得的。如果两个四元数都是纯向量，则只需要进行 9 次乘法、5 次加/减和 1 次符号翻转。

# arrays - codeigniter 多表连接

> ID：10781035
> 
> 赞同：0
> 
> 时间：2012-05-28T07:42:37.843
> 
> 标签：arrays, codeigniter-2

codeigniter 模型中的功能不起作用。由于 codeigniter 模型函数中的以下代码，我收到 http 错误 500。如果我删除此代码.. 代码工作正常。

```
function get_ad_by_user($a,$b)
    {
        $this->db->select('title,ci_categories.category,ci_subcategories.subcategory,state,city,locality,ad_website,description,phone_number,address,image_token1,image_token2');
        $this->db->from('ci_pre_classifieds');
        $this->db->join('ci_categories', 'ci_categories.category_id = ci_pre_classifieds.category');
        $this->db->join('ci_subcategories', 'ci_subcategories.subcategory_id = ci_pre_classifieds.sub_category');
        $this->db->where('ci_pre_classifieds.id',$a);
        $this->db->where('ci_pre_classifieds.ad_string_token',$b);
        $q=$this->db->get();
        $this->db->last_query();
        log_message('debug','******query'.$this->db->last_query().'********');
        if($q->num_rows()==1)
        {
            foreach($q->result_array() as $row)
            {
                $data['title]=$row['title'];
                $data['category']=$row['ci_categories.category'];
                $data['sub_category']=$row['ci_subcategories.subcategory'];
                $data['state']=$row['state'];
                $data['locality']=$row['locality'];
                $data['ad_website']=$row['ad_website'];
                $data['description']=$row['description'];
                $data['phone_number']=$row['phone_number'];
                $data['address']=$row['address'];
            }
        }
        else
        {
            $data['message']="sorry either classified expired or deleted";
        }

        return $data;
    } 
```

每个块都有错误..如果我删除所有工作...如何在 $data 数组中复制 $row 数组

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-28T14:49:03.117

`$data['title]=$row['title'];`有一个 ' 缺失。

这可能是原因，但如果没有该错误消息，就很难说。

此外，您可能希望将功能简化为以下内容：

```
function get_ad_by_user($a,$b)
{
    $data = array();

    $this->db->select('title,ci_categories.category,ci_subcategories.subcategory,state,city,locality,ad_website,description,phone_number,address,image_token1,image_token2');
    $this->db->from('ci_pre_classifieds');
    $this->db->join('ci_categories', 'ci_categories.category_id = ci_pre_classifieds.category');
    $this->db->join('ci_subcategories', 'ci_subcategories.subcategory_id = ci_pre_classifieds.sub_category');
    $this->db->where('ci_pre_classifieds.id',$a);
    $this->db->where('ci_pre_classifieds.ad_string_token',$b);
    $q=$this->db->get();
    log_message('debug','******query'.$this->db->last_query().'********');
    if($q->num_rows()==1)
    {
        $data[] = $q->row_array(); 
    }
    else
    {
        $data['message']="sorry either classified expired or deleted";
    }

    return $data;
} 
```

如果您只在查询中返回一行，您可以简单地使用`$q->row_array()`or`$q->row()`来返回单行。

以防万一，我也会`$data = array()`在你的函数开始时声明`get_ad_by_user`，否则它“可能”抱怨`$data`不存在。

# javascript - 使用 javascript 更改 css3 边框属性

> ID：10781037
> 
> 赞同：0
> 
> 时间：2012-05-28T07:42:39.707
> 
> 标签：javascript, jquery, dom, css

```
div
{
border-image:url(border.png) 30 30 round;
-moz-border-image:url(border.png) 30 30 round; /* Firefox */
-webkit-border-image:url(border.png) 30 30 round; /* Safari and Chrome */
-o-border-image:url(border.png) 30 30 round; /* Opera */
} 
```

我想使用 javascript dom 更改我的 div 标签的边框图像

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-28T07:45:27.277

```
$('div').css({
  "border-image"           :  "url(border.png) 30 30 round",
  "-moz-border-image"      :  "url(border.png) 30 30 round",
  "-webkit-border-image"   :  "url(border.png) 30 30 round",
  "-o-border-image"        :  "url(border.png) 30 30 round"
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-28T07:46:06.460

> 我想使用 javascript dom 更改我的 div 标签的边框图像

你可以这样做：

```
var dv = document.getElementById('#divID');
dv.style.borderImage = 'url(border.png) 30 30 round';
dv.style.MozBorderImage = 'url(border.png) 30 30 round';
dv.style.WebkitBorderImage = 'url(border.png) 30 30 round';
dv.style.OBorderImage = 'url(border.png) 30 30 round'; 
```

如果你想为所有 DIV 做：

```
var dvs = document.getElementsByTagName('div');

for (var i = 0; i < dvs.length; i++) {
    dvs[i].style.borderImage = 'url(border.png) 30 30 round';
    dvs[i].style.MozBorderImage = 'url(border.png) 30 30 round';
    dvs[i].style.WebkitBorderImage = 'url(border.png) 30 30 round';
    dvs[i].style.OBorderImage = 'url(border.png) 30 30 round';
} 
```

# biztalk - 使用 Biztalk/SAP 的 Web 服务的 Maximo 出站接口

> ID：10781040
> 
> 赞同：0
> 
> 时间：2012-05-28T07:42:49.480
> 
> 标签：biztalk, maximo

我们正在尝试在 Maximo 7.5 与 BizTalk 之间创建出站接口。我们已经完成了创建对象结构、端点和发布通道的所有步骤。然后将发布通道与外部系统相关联。我们从对象结构创建了一个 Web 服务，并按照以下步骤进行部署：- 选择操作-> 产品 Web 服务容器-> 部署 Web 服务。我们由此生成了 WSDL 文件。

但是我们收到如下错误

“BMXAA1481E - 无法发送。由于 EndpointDispatcher 的 ContractFilter 不匹配，接收方无法处理带有 Action '' 的消息。这可能是由于合约不匹配（发送方和接收方之间的操作不匹配）或绑定/发送方和接收方之间的安全不匹配。检查发送方和接收方是否具有相同的合同和相同的绑定（包括安全要求，例如消息、传输、无）。

我们无法将 Maximov7.5 集成到 Biztalk。周围有什么想法吗？？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-30T08:59:07.610

你可能想看看：

*   [WCF 错误：接收方无法处理带有 Action 的消息](https://stackoverflow.com/questions/5714357/wcf-error-the-message-with-action-cannot-be-processed-at-the-receiver)
*   [无法处理带有 Action '' 的消息](https://stackoverflow.com/questions/3671500/the-message-with-action-cannot-be-processed)

N。

# iphone - 如何打印给定表中的所有数据？

> ID：10781041
> 
> 赞同：1
> 
> 时间：2012-05-28T07:42:55.720
> 
> 标签：iphone

我是 iPhone 应用程序开发人员，现在我们了解了数据库的概念。我想打印数据库中的所有数据。但我不知道如何打印所有数据。这是我害了一些代码。请给我正确的方向来打印所有数据..

例如，在 sql 中，我们将所有数据打印为“select * from contact5;” 我们触发这个字符串。我们可以在 iPhone 编码中完成吗？

```
-(IBAction)PrintData:(id)sender
{

    NSLog(@"Button Pressed");
    sqlite3_stmt    *statement1;

    NSString *querySQL=@"SELECT * FROM CONTACT5";

    const char *query_stmt = [querySQL UTF8String];

    sqlite3_prepare_v2(contactDB, query_stmt, -1, &statement1, NULL);

    while (sqlite3_step(statement1) == SQLITE_ROW)
    {

        NSLog(@"Enter in  the denger zone");
        NSString *idField = [[NSString alloc] initWithUTF8String:(const char *) sqlite3_column_text(statement1, 0)];

        NSString *addressField = [[NSString alloc] initWithUTF8String:(const char *) sqlite3_column_text(statement1, 2)];

        NSString *NameField = [[NSString alloc] initWithUTF8String:(const char *) sqlite3_column_text(statement1, 1)];

        NSString *phoneFiels = [[NSString alloc] initWithUTF8String:(const char *) sqlite3_column_text(statement1, 3)];

        NSLog(@"ID is=%@",idField);

        NSLog(@"Name is=%@",NameField);
        NSLog(@"Address is=%@",addressField);
        NSLog(@"Phone No. is=%@",phoneFiels);

        [idField release];
        [NameField release];
        [phoneFiels release];
        [addressField release];
    }
    sqlite3_finalize(statement1);
    sqlite3_close(contactDB);
} 
```

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-28T09:38:58.280

我们正在分享一些使用 NSMutableDictionary 来存储您的数据的来，您可以轻松地使用该代码来打印您的数据，您想要在哪里

```
if(sqlite3_open([dbPath UTF8String], &database) == SQLITE_OK)
    {
        const char *sql = "Select * from CalculateTime";

        sqlite3_stmt *insertStmt;

        if(sqlite3_prepare_v2(database, sql, -1, &insertStmt, NULL) != SQLITE_OK)
            NSAssert1(0,@"Error: Failed to prepare statement with message '%s'.",sqlite3_errmsg(database));

        arrayCountry = nil;
        arrayCountry = [[NSMutableArray alloc]init];

        arrayCity = nil;
        arrayCity = [[NSMutableArray alloc]init];

        arrayFlag = nil;
        arrayFlag = [[NSMutableArray alloc]init];

        arrayZone = nil;
        arrayZone = [[NSMutableArray alloc]init];

        NSString *str2;

        while(sqlite3_step(insertStmt)==SQLITE_ROW)
        {

            char *row;

            row = (char*)sqlite3_column_text(insertStmt, 0);
            if(row != NULL)
            {
                str2 = [NSString stringWithUTF8String:row];
                [arrayCountry addObject:str2];
            }

            row = (char*)sqlite3_column_text(insertStmt, 1);
            if(row != NULL)
            {
                str2 = [NSString stringWithUTF8String:row];
                [arrayCity addObject:str2];
            }

            row = (char*)sqlite3_column_text(insertStmt, 2);
            if(row != NULL)
            {
                str2 = [NSString stringWithUTF8String:row];
                [arrayFlag addObject:str2];
            }

            row = (char*)sqlite3_column_text(insertStmt, 3);
            if(row != NULL)
            {
                str2 = [NSString stringWithUTF8String:row];
                [arrayZone addObject:str2];
            }

        }
    } 
```

访问这些字典数据以在任何地方打印..

# php - php 会停止在 Windows 二进制文件中支持 apache 吗？

> ID：10781042
> 
> 赞同：3
> 
> 时间：2012-05-28T07:43:01.737
> 
> 标签：php, windows, apache

我注意到在最新的 5.3.13 版本中没有运行 apache 的 Windows 二进制文件。它的所有IIS。他们只有 5.2 运行 apache 的二进制文件。

[http://windows.php.net/download/](http://windows.php.net/download/)

未来的 Windows 二进制文件会全部是 IIS 吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-28T07:48:54.537

从我那里可以看到，您不能将它与来自 apache.org 的二进制文件一起使用。VC9 支持来自[Apachelounge](http://www.apachelounge.com)的二进制文件。

# objective-c - CGEventPost 不适用于某些应用程序上的退格字符

> ID：10781043
> 
> 赞同：0
> 
> 时间：2012-05-28T07:43:14.313
> 
> 标签：objective-c, cocoa, cgeventtap

*（这个问题与我最近在[这里](https://stackoverflow.com/questions/10742086/cant-simulate-backspace-button-on-some-applications-with-event-tap/10742799#10742799)发布的问题相似，只是现在我使用 CGEventPost 来模拟更多击键而不是修改当前事件）*

每次按下“h”按钮时，下面的代码都能够插入一个“a”字符，它适用于所有应用程序。

```
CGEventRef KeyHandler(CGEventTapProxy proxy, CGEventType type, CGEventRef event, void *refcon)
{
    UniCharCount actualStringLength;
    UniCharCount maxStringLength = 1;   
    UniChar chars[3];

    CGEventKeyboardGetUnicodeString(event, maxStringLength, &actualStringLength, chars);

    if (chars[0] == 'h') {

        CGEventRef keyEventDown = CGEventCreateKeyboardEvent( NULL, 1, true);
        CGEventRef keyEventUp = CGEventCreateKeyboardEvent( NULL, 1, false);

        chars[0] = 'a';
        CGEventKeyboardSetUnicodeString(keyEventDown, 1, chars);
        CGEventKeyboardSetUnicodeString(keyEventUp, 1, chars);
        CGEventSetIntegerValueField(keyEventDown, kCGKeyboardEventKeycode, 0); // 0 is key code of 'a' button
        CGEventSetIntegerValueField(keyEventUp, kCGKeyboardEventKeycode, 0);

        CGEventPost(kCGSessionEventTap, keyEventDown);
        CGEventPost(kCGSessionEventTap, keyEventUp);
        return NULL;
    }

    return event;
} 
```

如果我将 'a' 替换为退格字符，某些应用程序（例如 Mac 上的 Microsoft Excel ...）将不再识别它。你知道为什么吗？

```
CGEventRef KeyHandler(CGEventTapProxy proxy, CGEventType type, CGEventRef event, void *refcon)
{
    UniCharCount actualStringLength;
    UniCharCount maxStringLength = 1;   
    UniChar chars[3];

    CGEventKeyboardGetUnicodeString(event, maxStringLength, &actualStringLength, chars);

    if (chars[0] == 'h') {

        CGEventRef keyEventDown = CGEventCreateKeyboardEvent( NULL, 1, true);
        CGEventRef keyEventUp = CGEventCreateKeyboardEvent( NULL, 1, false);

        chars[0] = '\b';
        CGEventKeyboardSetUnicodeString(keyEventDown, 1, chars);
        CGEventKeyboardSetUnicodeString(keyEventUp, 1, chars);
        CGEventSetIntegerValueField(keyEventDown, kCGKeyboardEventKeycode, 51);
        CGEventSetIntegerValueField(keyEventUp, kCGKeyboardEventKeycode, 51);

        CGEventPost(kCGSessionEventTap, keyEventDown);
        CGEventPost(kCGSessionEventTap, keyEventUp);
        return NULL;       
    }

    return event;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-05T05:43:00.830

弄清楚了。如果我删除代码为事件设置 unicode 字符串，一切都会正常工作：

```
chars[0] = '\b';
CGEventKeyboardSetUnicodeString(keyEventDown, 1, chars);
CGEventKeyboardSetUnicodeString(keyEventUp, 1, chars); 
```

但是，我不知道为什么 Mac OS 上的某些特定应用程序会发生这种情况。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-28T08:35:57.643

"\b" 转义序列产生 ASCII 0x08。在我的测试中，当我按下删除（即退格）键时生成的事件是 ASCII 0x7f。

一般来说，这似乎是用于确定如何模拟事件的显而易见的技术。使用捕获并转储其细节的工具执行该事件。

# storage - p2p长期存储

> ID：10781044
> 
> 赞同：1
> 
> 时间：2012-05-28T07:43:14.397
> 
> 标签：storage, replication, p2p

我们正在构建一个由 3 个 32TB（每个）的地理（远）节点组成的长期保存集群。

3 个节点必须具有相同的文件（3 级冗余）。

我的想法是使用 p2p 协议来保持 3 个节点同步。我的意思是：如果有人将文件（文档）放在一个节点上（使用特定的基于 Web 的应用程序），其他 2 个节点必须自动获取它的副本（以异步方式）。

我搜索了 p2p 文件系统，但总的来说，它们似乎在许多节点中拆分文件并优化访问性能，这不是我们的情况。我们只需要一个自动复制系统。我们防止大量文件。

任何人都知道一些开源项目可以提供帮助吗？

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-16T17:37:22.530

在您的情况下，P2P 太过分了。特别是如果您的服务器具有所有公共地址。`rsync`或类似的东西会更容易实现。

# android - 错误：Android 上自签名 SSL 证书的名称不匹配

> ID：10781048
> 
> 赞同：3
> 
> 时间：2012-05-28T07:43:57.887
> 
> 标签：android, ssl, ssl-certificate, x509certificate

我正在尝试使用内置浏览器从 Android 2.3.4 访问受 SSL 保护的 Web 应用程序。

服务器证书是我使用*MAKECERT*创建并安装在服务器上的自签名证书。当我尝试访问该页面时，我从浏览器中收到一条错误消息，指出`The name of the site does not match name on the certificate`.

我已经验证并且服务器地址与我的证书的公用名完全匹配（它实际上只是一个 IP 地址）。

当我尝试在 Android 设备上访问使用非自签名证书保护的其他网站时，不会弹出该消息。

如果我在桌面上使用 IE 或 Chrome 访问同一页面 - 除了签名授权消息之外 - 我不会收到任何警告，并且一旦我在受信任的根 CA 中安装了证书，浏览器就会顺利接受该证书。

我是否应该认为该消息实际上是 Android 拒绝自签名证书？

对此我有点疑惑。

我尝试在凭据存储中安装证书，但这并没有改善这种情况。现在我不知道接下来我会尝试什么。

问题是：在创建 Android 可接受的自签名证书时，我应该遵循什么特别的事情吗？有没有人设法在没有此警告的情况下获得 Android 接受的自签名证书？

我还能尝试什么？

**-更新-布鲁诺** 的回复将我引向了正确的方向，因此我设法向前迈出了一步：我重新制作了添加 SAN 的证书（不得不放弃`MAKECERT`，**`OpenSSL`**按照[安迪·阿里斯门迪的指示](http://andyarismendi.blogspot.in/2011/09/creating-certificates-with-sans-using.html)）。

现在消息已经消失，但我[在此 SO 帖子中](https://stackoverflow.com/questions/4461360/how-to-install-trusted-ca-certificate-on-android-device)已经讨论过的“认证权威不受信任”问题中被阻止，所以我仍在努力寻找我的问题的最终解决方案 - Android 浏览器上没有弹出任何警告。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-28T09:41:16.417

> 我已经验证并且服务器地址与我的证书的公用名完全匹配（它实际上只是一个 IP 地址）。

Android 的主机名验证器比某些浏览器更严格地符合[RFC 2818 。](https://www.rfc-editor.org/rfc/rfc2818#section-3.1)根据规范，如果使用 IP 地址，它必须在*IP 地址*类型的 Subject Alternative Name 条目中：而不是 DNS 类型的 SAN 条目或 CN：

> 如果存在 dNSName 类型的 subjectAltName 扩展，则必须将其用作身份。否则，必须使用证书主题字段中的（最具体的）通用名称字段。尽管使用通用名称是现有的做法，但它已被弃用，并且鼓励证书颁发机构使用 dNSName 代替。
> 
> [...]
> 
> 在某些情况下，URI 被指定为 IP 地址而不是主机名。在这种情况下，iPAddress subjectAltName 必须出现在证书中，并且必须与 URI 中的 IP 完全匹配。

最简单的方法是使用主机名。（在证书中使用 IP 地址永远不会真正实用。）或者，生成带有 SAN IP 地址条目的证书。[（您可能对此](https://stackoverflow.com/a/8444863/372643)感兴趣。）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-28T08:52:48.970

首先，Android 2.x 上的凭证存储仅用于 VPN 和 WiFi 应用程序，浏览器看不到它。您不能在受信任的证书存储中安装自己的证书（除非您有根设备）。

您是我们在公共 IP 地址上的网络应用程序还是您通过 WiFi 访问的本地网络应用程序？您可能想查看 logcat 输出，可能有一些警告会在那里给您提示。还可以尝试从其他设备和/或模拟器（如果可能的话，使用不同的 Android 版本）并比较消息/行为。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-02-20T14:52:35.467

> 所以我仍在努力为我的问题找到最终解决方案 - Android 浏览器上没有弹出任何警告

Nikolay Elenkov 告诉您为什么不能将证书保存到 Android 上的受信任存储中。这种情况最近发生了变化，但对较旧的 Android 客户端没有帮助。有关 Android 的 Keychain 和 Keystore 的简要历史，请参阅Android 上[是否有任何系统证书存储？](https://stackoverflow.com/questions/21728577/are-there-any-system-certificates-storages-on-android)（它指的是尼古拉的两个帖子）。

因为您在 Android 浏览器中工作，所以您需要使用 Android 商店中已有的 CA。要从已受信任的 CA 获取服务器证书，请尝试[StartCom](http://www.startcom.org/)。StartCom 提供免费的 1 类证书，并且它们的根在大多数移动和桌面浏览器中都受到信任。（请记住，如果需要，他们会收取撤销费用）。

为了完整起见，如果您自己编写了客户端，那么您将提供自定义`X509TrustManager`并覆盖`checkServerTrusted`以接受您的证书。它不需要与 Keystore、Keychain 或外部 CA 进行任何交互。但是您没有该选项，因为您没有编写浏览器。

# java - Java：类中的代码重复及其 Junit 测试用例

> ID：10781050
> 
> 赞同：1
> 
> 时间：2012-05-28T07:44:16.430
> 
> 标签：java, junit, refactoring

我一直在编写通过修改对象的值来处理对象的某些字段的代码。为了测试它，我首先编写了一个 JUnit 测试用例，它递归地遍历对象的字段并确保它们被正确修改。CUT（被测类）做了类似的事情：它递归地遍历对象的字段并根据需要修改它们。

因此，递归遍历字段的代码在测试用例和 CUT 中保持不变，并且当前是重复的，这违反了 DRY。所以我有两个问题：

1）你在项目中遇到过这样的情况吗？如果是，您是否应用了 DRY，或者让此类重复保持原样？

2）如果我把这个通用代码放在一个 util 方法中，我需要编写一个测试用例来测试它，这将再次涉及递归遍历字段。那么如何在不添加任何重复的情况下解决这个问题呢？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-28T07:50:45.707

您刚刚遇到了[丑陋的镜子测试反模式](http://jasonrudolph.com/blog/2008/07/30/testing-anti-patterns-the-ugly-mirror/)。如果您的 CUT 有错误，您很可能会将其复制到您的测试用例中，本质上是验证错误是否仍然存在。

您必须向我们展示更多代码，但基本上您的测试用例应该更简单，没有`for`循环，没有条件 - 只是断言。如果您的生产代码对复杂的数据结构进行了一些花哨的遍历、反射等 - 创建一个测试 Java 对象并在单元测试中手动测试每个字段。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-28T07:49:44.037

使用访问者模式抽象遍历树，然后在测试用例和生产代码中构建访问者。并单独测试访客基础设施。

# c# - DateTimePicker 的确切日期和时间格式

> ID：10781053
> 
> 赞同：0
> 
> 时间：2012-05-28T07:44:21.257
> 
> 标签：c#, format, globalization, datetimepicker

根据[这篇文章](http://support.microsoft.com/Default.aspx?scid=kb;en-us;889834&x=18&y=19)我知道，那个 DateTimePicker 控件不反映**CurrentUICulture**
那么，我怎样才能得到它使用的*真正*文化呢？我需要它来获取多语言应用程序中 DateTimePicker 的字符串值，但格式与用户在表单上看到的格式*完全相同*（不，我不能设置“硬编码”自定义格式）。

**示例：**
当我使用本地波兰语设置在 Windows 上工作时，对于 LongTime，它是：**HH:mm:ss**并且 DateTimePicker 中的时间显示为：**09 :26:50**

现在，当我想在我的应用程序中选择不同的语言并在表单的构造函数中将文化设置更改为*US时：*

```
...
System.Globalization.CultureInfo ci = new System.Globalization.CultureInfo("en-US");
System.Threading.Thread.CurrentThread.CurrentCulture = ci;
System.Threading.Thread.CurrentThread.CurrentUICulture = ci;

InitializeComponent();
.... 
```

然后

```
MessageBox.Show(System.Globalization.DateTimeFormatInfo.CurrentInfo.LongTimePattern); 
```

显示，新的时间格式是：**h:mm:ss tt**，但 DateTimePicker 仍在显示：**09:26:50**

当我尝试获取时间字符串时：

```
dateTimePicker1.Value.ToLongTimeString() 
```

或者

```
dateTimePicker1.Value.ToString(System.Globalization.DateTimeFormatInfo.CurrentInfo.LongTimePattern) 
```

然后时间显示为：9:26: **50 AM**

所以我的问题是 - 我怎么知道 DateTimePicker 仍在使用系统的 CultureInfo("pl-PL") 或者它的显示格式是： HH:mm:ss ？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-28T08:29:36.213

DateTimePicker 是本机 Windows 控件。它使用在控制面板 + 区域和语言小程序中配置的时间格式。在我的机器上看起来像这样（我住在美国）：

![在此处输入图像描述](../Images/c2e21d43c75ca2b18fa5a6c30b8cd61e.png)

因此，找出它使用的格式的一种方法是*在更改之前*存储 Thread.CurrentCulture 值。

请注意，更改 UI 线程的文化是一件非常危险的事情。问题是程序中的任何其他线程，尤其是很少的线程池和 I/O 完成线程，仍然使用机器的默认区域性运行，如上面屏幕截图中的“管理”选项卡中配置的那样。这可能会导致难以发现的细微错误。就像在 UI 线程上创建的 SortedList 突然不再在工作线程中排序一样。.NET 4.5 将通过添加的 CultureInfo.DefaultThreadCurrentCulture 和 DefaultThreadCurrentUICulture 属性来解决此问题。

请放心，您的程序几乎没有用户真正希望以与其机器设置和母语不匹配的语言运行它。在您的 UI 中提供语言更改选项是一个演示功能，它实际上并没有被使用。

# maven - 发布 maven 项目，自动删除 SNAPSHOT 依赖项

> ID：10781054
> 
> 赞同：0
> 
> 时间：2012-05-28T07:44:23.317
> 
> 标签：maven, snapshot, maven-release-plugin

我想使用 maven 发布插件制作我的多模块 maven 项目的第一个版本。我在 release:prepare 步骤中遇到问题，因为我有 SNAPSHOT 依赖项。

```
<project ...> 

   <parent>
      <artifactId>project</artifactId>
      <groupId>ccc.aaa.bbb</groupId>
      <version>0.0.1-SNAPSHOT</version>
   </parent>

  <artifactId>common</artifactId>
  <packaging>pom</packaging>
  <name>common</name>

  <modules>
     <module>daoModule</module>
     <module>configModule</module>
     <module>exceptionModule</module>
  </modules>

   <scm>
     ...    
   </scm>
   <distributionManagement>
       <repository>...</repository>
       <snapshotRepository>...</snapshotRepository>
   </distributionManagement>
</project> 
```

并且模块将其扩展为其父级：

```
<project ...>
<parent>
   <artifactId>common</artifactId>
   <groupId>ccc.aaa.bbb</groupId>
   <version>0.0.1-SNAPSHOT</version>
</parent>

<artifactId>exceptionModule</artifactId>
  <name>exceptionModule</name>

<build>
        ... 
```

该插件将工件 0.0.1-SNAPSHOT 的版本更改为发布版本 0.0.1 ，并创建新的快照版本 id 0.0.2-SNAPSHOT。

¿ 有什么方法可以自动将**父母的版本**从 0.0.1-SNAPSHOT 更改为 0.0.1 - 将要创建的版本 -？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-28T08:23:04.627

`release:prepare`从包含您感兴趣的所有模块的聚合器项目级别执行时，它应该可以工作。因此，您的`common`、`project`工件和所有模块应该立即发布。还要看看`autoVersionSubmodules`switch 少打字。

# scala - 在延续中推断结果类型

> ID：10781056
> 
> 赞同：8
> 
> 时间：2012-05-28T07:44:32.747
> 
> 标签：scala, type-inference, continuations

是否可以从以下代码中删除某些类型：

```
import util.continuations._

object TrackingTest extends App {

  implicit def trackable(x: Int) = new {
    def tracked[R] = shift { cf: (Int => (R, Set[Int])) =>
      cf(x) match {
        case (r, ints) => (r, ints + x)
      }
    }
  }

  def track[R](body: => R @cpsParam[(R, Set[Int]), (R, Set[Int])]) = reset {
    (body, Set[Int]())
  }

  val result = track(7.tracked[Int] + 35.tracked[Int])
  assert(result == (42, Set(7, 35)))

  val differentTypes = track(9.tracked[String].toString)
  assert(differentTypes == ("9", Set(9)))
} 
```

`track`函数跟踪`tracked`对`Int`实例的调用（例如`7.tracked`）。

是否可以在隐式上推断类型参数`tracked`，因此以下将编译：

```
track(7.tracked + 35.tracked) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-10T06:13:13.520

你的问题让我想到了延续如何跟踪状态。因此，我根据您的情况对其进行了调整，并提出了以下建议：

```
import util.continuations._

object TrackingTest extends App {

  type State = Set[Int]
  type ST = State => State

  implicit class Tracked(val i: Int) extends AnyVal { 
    def tracked = shift{ (k: Int=>ST) => (state:State) => k(i)(state + i) }
  }

  def track[A](thunk: => A@cps[ST]): (A, State) = {
    var result: A = null.asInstanceOf[A]
    val finalSate = (reset {
      result = thunk
      (state:State) => state
    }).apply(Set[Int]())
    (result, finalSate)
  }

  val result = track(7.tracked + 35.tracked)
  assert(result == (42, Set(7, 35)))

  val differentTypes = track(9.tracked.toString)
  assert(differentTypes == ("9", Set(9)))
} 
```

这是使用 2.10.1，但它也适用于 2.9.1，前提是您将 2.10.x 隐式值类替换为：

```
implicit def tracked(i: Int) = new {
  def tracked = shift{ (k: Int=>ST) => (state:State) => k(i)(state + i) }
} 
```

我所做的关键更改是`tracked`没有使用任何类型推断，将`Int@cps[ST]`. 然后，CPS 插件将计算映射到适当的类型（如`String@cps[ST]`）。该状态由返回一个`State=>State`函数的延续线程化，该函数采用当前状态（整数集）并返回下一个状态。reset 的返回类型是一个从状态到状态（类型为`ST`）的函数，它将采用初始状态并返回最终状态。

最后一个技巧是使用 var 来捕获结果，同时仍然保持`reset`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-10T07:41:43.593

虽然这个问题的确切答案只能由编译器的作者给出，但我们可以通过查看 continuation 插件源代码来猜测这是不可能的。

如果您查看延续的来源，您可以看到：

```
 val anfPhase = new SelectiveANFTransform() {
    val global = SelectiveCPSPlugin.this.global
    val runsAfter = List("pickler")
  }

  val cpsPhase = new SelectiveCPSTransform() {
    val global = SelectiveCPSPlugin.this.global
    val runsAfter = List("selectiveanf")
  } 
```

anfPhase 阶段在pickler 阶段之后执行，cpsPhase 在selectiveAnf 之后执行。如果你看 SelectiveANFTransform.scala

```
abstract class SelectiveANFTransform extends PluginComponent with Transform with
  TypingTransformers with CPSUtils {
  // inherits abstract value `global' and class `Phase' from Transform

  import global._                  // the global environment
  import definitions._             // standard classes and methods
  import typer.atOwner             // methods to type trees

  /** the following two members override abstract members in Transform */
  val phaseName: String = "selectiveanf" 
```

如果我们使用 scalac -Xshow-phases，我们可以看到编译过程中的阶段：

```
parser
namer
packageobjects
typer
superaccessors
pickler
refchecks
selectiveanf
liftcode
selectivecps
uncurry
...... 
```

正如你所看到的，typer 阶段是在selectiveAnf 和selectiveCps 阶段之前应用的。应该确认类型推断发生在 typer 阶段，但如果真的是这样并且有意义，现在应该清楚为什么不能在 7.tracked 和 35.tracked 上省略 Int 类型。

现在，如果您还不满意，您应该知道编译器通过使用以下选项对“树”执行一组转换来工作，您可能会看到这些转换：

*   -Xprint：在某个阶段执行后显示你的 scala 代码
*   -Xprint: -Yshow-trees 显示你的 scala 代码和执行阶段后的树
*   -YBrowse：打开一个 GUI 来浏览两者。

# php - 在 PHPCrawl 中为特定域设置 cookie

> ID：10781059
> 
> 赞同：0
> 
> 时间：2012-05-28T07:44:50.267
> 
> 标签：php, cookies, phpcrawl

我使用[PHPCrawl](http://sourceforge.net/projects/phpcrawl/)来抓取网站，但现在我想将 cookie 添加到特定域，因为该域具有身份验证，并且我想在授权页面中获取信息。

如何将 cookie 添加到特定域？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-28T08:37:48.413

最后，我找到了一种将 cookie 添加到特定域的方法：

我将在我自己的爬虫类中重载 __construct ，如下所示：

```
class MyCrawler extends PHPCrawler 
{
    function __construct() { 
        parent::__construct();

        $s = new PHPCrawlerCookieDescriptor("localhost", "JSESSIONID", "DE7BCB89B0D5BB072357450F01415FAB");
        $f[] = $s;
        $this->PageRequest->addCookieDescriptors($f);
    }
} 
```

现在您应该有一个带有`JSESSIONID`名称和`DE7BCB89B0D5BB072357450F01415FAB`价值的 cookie。

# c# - 如何在 windows 窗体中创建 3 个拆分器

> ID：10781060
> 
> 赞同：1
> 
> 时间：2012-05-28T07:44:50.980
> 
> 标签：c#

现在我正在开发一个带有 windows 窗体 (C#) 的项目。我想把我的表格分成三部分。那么，谁能告诉我如何以窗口形式（C#）创建 3 个拆分器？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-28T07:53:36.073

3 个零件只需要 2 个分离器。将 SplitContainer 拖放到 SplitContainer 面板上。

![在此处输入图像描述](../Images/fb373c4e66716c5002282ac00f94a4e6.png)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-28T07:53:14.890

我认为最好的方法是使用[拆分容器控件](http://msdn.microsoft.com/en-us/library/h0w5ctby.aspx)或[表格布局面板](http://msdn.microsoft.com/en-us/library/h21wykkx.aspx)

# c++ - 继承C++中的重载

> ID：10781063
> 
> 赞同：0
> 
> 时间：2012-05-28T07:45:22.427
> 
> 标签：c++, inheritance, overloading

所以我在 C++ 中尝试重载时遇到了这个问题：我有这些类：

```
class Data
{
public:
    void virtual f(){cout<<"In data!"<<endl;}
};

class A: public Data
{
public:
    void f(int x){cout<<"Class A int is: "<<x<<endl;}

}; 
```

然后我做：

```
Data *D=new A();
D->f(4); 
```

我希望 Data 的 f() 函数对 A 类的 f() 函数起作用，因为我是虚拟的，但它不会。

有什么方法可以让它工作吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-28T07:46:07.747

那不是同一个函数，派生类中的函数带有一个`int`参数。

那甚至不应该编译，因为`Data`没有一个名为`f(int)`.

要使多态性起作用，您需要相同的签名：

```
class Data
{
public:
    void virtual f(int){cout<<"In data!"<<endl;}
    //              |
    //        dummy parameter
};

class A: public Data
{
public:
    void f(int x){cout<<"Class A int is: "<<x<<endl;}
}; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-28T07:57:00.067

重载时需要具有相同的参数。您的编译器将 doStuff(int a)、doStuff(String a) 和 doStuff() 视为不同的函数。确保重载时它们都具有相同的参数。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-28T07:59:29.160

重载不能跨越类边界。这是您可以使用 A 类的对象同时调用两者的方法 -

```
class Data
{
public:
    void virtual f(){cout<<"In data!"<<endl;}
    //              |
    //        dummy parameter
};

class A: public Data
{
    using Data::f;

public:
    void f(int x){cout<<"Class A int is: "<<x<<endl;}
}; 
```

# java - 使用 JiBX 的 Spring Web 服务

> ID：10781070
> 
> 赞同：0
> 
> 时间：2012-05-28T07:46:05.430
> 
> 标签：java, web-services, spring, jibx

我想使用 JiBX 创建 Spring Web 服务。我已经有了我的 Java 类。我该如何进行？谁能给我一个好的教程的链接谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-29T13:31:55.263

Hoshang，
我没有您想要的示例，但这可能会有所帮助：

*   JiBX 文档说明了如何将 java 类绑定到 xml 模式。[您可以在此处](http://www.jibx.org)找到文档。
*   [这](https://github.com/jibx/maven-plugin/tree/master/test-suite/org.jibx.test.bind)是我们源代码库中的一个实际示例。
*   Spring 有 JiBX [Here 的 OXM 映射器（参见第 8.8 节）](http://static.springsource.org/spring-ws/site/reference/html/oxm.html)，但您可能不会使用它。
*   这篇[博](http://blog.tourgeek.com/2012/04/creating-soap-and-rest-services-for.html)文一步一步地展示了如何使用蓝图创建一个xml web-service，这几乎和spring完全一样。（蓝图是 spring 编写的供应商中立规范）。
*   [您可以在此处](http://jibx.sourceforge.net/schema-library/webservices.html)找到一个非常简单的 Web 服务示例。此示例的源代码在[此处](https://github.com/jibx/schema-library/tree/master/org.opentravel/_2011B/opentravel-ws)。

我希望这有帮助！
大学教师

# c# - 如何在linq中加入4个表

> ID：10781073
> 
> 赞同：4
> 
> 时间：2012-05-28T07:46:10.977
> 
> 标签：c#, linq, entity-framework, entity-framework-4

我是 linq 和 EF 的初学者。我有 4 张桌子

货币单位

```
CurrencyUnitID    CurrencyName
-------------------------------
1                    Dolar
2                    Pond 
```

要求

```
RequestID    WayBillNo
--------------------------
1            10000
2            10001 
```

成本类型

```
CostTypeID      CostName
-------------------------------
1                 A
2                 B 
```

请求成本

```
RequestId    CostId     CurrencyUnitId     Amount   Remark
-----------------------------------------------------------
1              1              1            200
1              2              1            400
2              2              2            1000 
```

我想加入这 4 个表并得到这个结果

结果（一张表）

```
RequestId  WayBillNo  CostId    CostName  CurrencyUnitId   CurrencyUnitName  Amount   Remark
------------------------------------------------------------------------------------------
1           10000        1        A          1                 Dollar       200       
1          10000        2         B          2                 Pond         400
2          10001        1         A          0                               0
2          10001        2         B          2                Pond          1000 
```

我写这个查询

```
 var items = (from rc in context.CLEARANCE_COST
                join c in context.COST_TYPES on rc.COST_ID equals c.COST_ID 
                join d in context.CLEARANCE_REQUEST on rc.REQUEST_ID equals d.REQUEST_ID
                join f in context.CURRENCY_UNITS on rc.CURRENCY_ID equals f.CURRENCY_ID 
                select new
                           {

                               rc.COST_AMOUNT,
                               c.COST_ID,
                               c.COST_NAME,
                               d.WAYBILL_NO,
                               f.CURRENCY_NAME
                           }).ToList(); 
```

但得到这个结果（B表）

`RequestId WayBillNo CostId CostName CurrencyUnitId CurrencyUnitName Amount Remark`

* * *

```
1           10000        1        A          1                 Dollar       200       
1          10000        2         B          2                 Pond         400
2          10001        2         B          2                Pond          1000 
```

即，如果请求没有成本，则显示该请求的所有成本并设置 Amount 值 0 ，例如 A 表有 4 行，但 B 表在表 A 中有 3 行，请求 2 成本 1 设置金额 0 但在表 B 中未设置，我要设置。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-28T07:56:16.637

**编辑**

在 linq 中尝试左外连接，如下所示....

```
var query=
    from rc in RequestCost
    join c in CostType on rc.CostId    = c.CostTypeID into RCC
    from rcc in RCC.DefaultIfEmpty() 
    join r in Request on  rc.RequestID = r.RequestID  into RCR
    from rcr in RCR.DefaultIfEmpty()   
    join cu in CurrencyUnit 
    on rc.CurrencyUnitId  = cu.CurrencyUnitID into RCCU
    from rccu in RCCU..DefaultIfEmpty() 

    select new 
       { 
          RequestId = rc.RequestId,
          WayBillNo = rcr != null ? rcr.WayBillNo : "<No WayBillNo>",
          CostId = rc.CostId,
          CostName = rcc != null ? rcc.CostName : "<No CostName>",
          CurrencyUnitID= rc.CurrencyUnitID,
          CurrencyName = rccu != null ? rccu.CurrencyName: "<No CurrencyName>",
          Amount = rc.Amount != null ? rc.Amount : 0 ,
          Remark = rc.Remark != null ? rc.Remark : "<No Remark>",
       } 
```

* * *

所以根据你的表为你查询将是

```
var query=
    from rc in RequestCost
    join c in CostType on rc.CostId    = c.CostTypeID
    join r in Request on  rc.RequestID = r.RequestID    
    join cu in CurrencyUnit on rc.CurrencyUnitId  = cu.CurrencyUnitID 

    select new 
       { 
          rc.RequestId,
          r.WayBillNo,
          rc.CostId,
          c.CostName 
          rc.CurrencyUnitID,
          cu.CurrencyName,
          rc.Amount,
          rc.Remark                     
       } 
```

查看帖子以获取更多详细信息：[SQL to LINQ (Visual Representation)](http://pranayamr.blogspot.com/2010/12/sql-to-linq-visual-representation.html)

图像显示了连接在 linq 中的工作方式 ![在此处输入图像描述](../Images/4a0edf93e92e1049df078e8c3eff9034.png)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-28T08:37:22.447

在左外连接的情况下（假设 RequestCost 中的 FK 可以为空）

```
var query=
    from rc in RequestCost
    join c in CostType on rc.CostId equals c.CostTypeID into ctype
    join r in Request on  rc.RequestID equals r.RequestID into req
    join cu in CurrencyUnit on rc.CurrencyUnitId equals cu.CurrencyUnitID into unit

    select new 
       { 
          rc.RequestId,
          req.FirstOfDefault() != null ? req.FirstOfDefault().WayBillNo : null,
          rc.CostId,
          ctype.FirstOfDefault() != null ? ctype.FirstOfDefault().CostName : null,
          rc.CurrencyUnitID,
          ctype.FirstOfDefault() != null ? ctype.FirstOfDefault().CurrencyName : null,
          rc.Amount,
          rc.Remark                     
       } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-14T07:29:55.757

你可以写这段代码

```
 var items = from c in context.COST_TYPES
                    join o in context.CLEARANCE_COST .Where(d=>d.REQUEST_ID==8) on c.COST_ID equals o.COST_ID into outer
                    from o in outer.DefaultIfEmpty()
                    select new
                               {
                                   o.CLEARANCE_REQUEST.WAYBILL_NO,
                                   c.COST_NAME,
                                   o.CURRENCY_UNITS.CURRENCY_NAME,
                                   Amount=o==null?0:o.COST_AMOUNT
                               }; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-12-15T13:10:31.560

您也可以编写此代码

```
public class Request()
{
          public int RequestId    { get; set; }
          public RequestCost RequestCost { get; set; }
}

public class RequestCost ()
{
          public int RequestId    { get; set; }
          public CostType CostType { get; set; }
          public CurrencyUnit CurrencyUnit{ get; set; }
}

  var items = context.dbRequest.include("RequestCost")
                                   .include("RequestCost.CurrencyUnit")
                                  .include("RequestCost.CostType").ToList(); 
```

# python - 如何在 Matplotlib 中禁用对数图的小刻度？

> ID：10781077
> 
> 赞同：27
> 
> 时间：2012-05-28T07:46:43.660
> 
> 标签：python, matplotlib

这是一个简单的情节：

![在此处输入图像描述](../Images/455e2717d897438e8bb8abb898a9fd90.png)

1) 如何禁用刻度？2）如何减少他们的数量？

这是一个示例代码：

```
from pylab import *
import numpy as np

x = [5e-05, 5e-06, 5e-07, 5e-08, 5e-09, 5e-10]
y = [-13, 14, 100, 120, 105, 93]

def myfunc(x,p):
    sl,yt,yb,ec=p    
    y = yb + (yt-yb)/(1+np.power(10, sl*(np.log10(x)-np.log10(ec))))
    return y

xp = np.power(10, np.linspace(np.log10(min(x)/10), np.log10(max(x)*10), 100))

pxp=myfunc(xp, [1,100,0,1e-6])
subplot(111,axisbg="#dfdfdf")
plt.plot(x, y, '.', xp, pxp, 'g-', linewidth=1)   
plt.xscale('log')

plt.grid(True,ls="-", linewidth=0.4, color="#ffffff", alpha=0.5)

plt.draw()
plt.show() 
```

产生： ![在此处输入图像描述](../Images/c4c775378a25120271668f2830f085dd.png)

* * *

## 回答 #1

> 赞同：45
> 
> 时间：2012-05-28T08:03:38.097

```
plt.minorticks_off() 
```

关闭它们！

要更改它们的数量/位置，您可以使用`subsx`参数。像这样：

```
plt.xscale('log', subsx=[2, 3, 4, 5, 6, 7, 8, 9]) 
```

从[文档](http://matplotlib.sourceforge.net/api/pyplot_api.html?highlight=tick#matplotlib.pyplot.xscale)：

> subsx/subsy：在每个主要刻度之间放置子刻度的位置。应该是一个整数序列。例如，在 log10 尺度中：[2、3、4、5、6、7、8、9]
> 
> 将在每个主要刻度之间放置 8 个对数间隔的次要刻度。

* * *

## 回答 #2

> 赞同：27
> 
> 时间：2015-11-04T02:05:52.750

调用`plt.minorticks_off()`会将其应用于当前轴。（该函数实际上是一个包装器`gca().minorticks_off()`。）

您也可以以相同的方式将其应用于单个轴：

```
import matplotlib.pyplot as plt
fig, ax = plt.subplots()

ax.minorticks_off() 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-28T08:14:33.880

```
from pylab import *
import numpy as np

x = [5e-05, 5e-06, 5e-07, 5e-08, 5e-09, 5e-10]
y = [-13, 14, 100, 120, 105, 93]

def myfunc(x,p):
    sl,yt,yb,ec=p    
    y = yb + (yt-yb)/(1+np.power(10, sl*(np.log10(x)-np.log10(ec))))
    return y

xp = np.power(10, np.linspace(np.log10(min(x)/10), np.log10(max(x)*10), 100))

pxp=myfunc(xp, [1,100,0,1e-6])
ax=subplot(111,axisbg="#dfdfdf")
plt.plot(x, y, '.', xp, pxp, 'g-', linewidth=1)   
plt.xscale('log')
plt.grid(True,ls="-", linewidth=0.4, color="#ffffff", alpha=0.5)
plt.minorticks_off() # turns off minor ticks

plt.draw()
plt.show() 
```

# java - Java：同步操作与波动性有何关系？

> ID：10781079
> 
> 赞同：11
> 
> 时间：2012-05-28T07:46:51.807
> 
> 标签：java, multithreading, thread-safety, volatile

抱歉，这是一个很长的问题。

我最近一直在对多线程进行大量研究，因为我慢慢地将它实施到个人项目中。然而，可能由于大量稍微不正确的示例，在某些情况下使用同步块和波动性对我来说仍然有点不清楚。

我的核心问题是：当线程位于同步块内时，对引用和原语的更改是否会自动易失（即在主内存而不是缓存上执行），或者读取是否也必须同步才能工作适当地？

1.  **如果是这样**，同步一个简单的 getter 方法的目的是什么？*（参见示例 1）*此外，只要线程已同步任何内容，所有更改是否都会发送到主内存？例如，如果它被派去在一个非常高级的同步内的所有地方做大量工作，那么每一次更改都会对主内存进行，并且没有任何东西可以缓存，直到它再次解锁？
2.  **如果不是**，更改是否必须在同步块内显式进行，或者 java 是否可以实际使用例如 Lock 对象的使用？*（见示例 3）*
3.  **如果任**一同步对象是否需要与正在以任何方式更改的引用/原语相关（例如，包含它的直接对象）？如果安全的话，我可以通过在一个对象上同步来写入并与另一个对象一起读取吗？*（见示例 2）*

（请注意以下示例，我知道 synchronized 方法和 synchronized(this) 不受欢迎以及为什么，但对此的讨论超出了我的问题范围）

**示例 1：**

```
class Counter{
  int count = 0;

  public synchronized void increment(){
    count++;
  }

  public int getCount(){
    return count;
  }
} 
```

在这个例子中，increment() 需要同步，因为 ++ 不是原子操作。因此，两个线程同时递增可能会导致计数整体增加 1。计数原语需要是原子的（例如不是长/双/引用），这很好。

getCount() 是否需要在这里同步，为什么？我听到最多的解释是，我无法保证返回的计数是 pre-increment 还是 post-increment。但是，这似乎是对某些稍有不同的解释，那就是发现自己在错误的地方。我的意思是，如果我要同步 getCount()，那么我仍然看不到任何保证 - 现在归结为不知道锁定顺序，而不知道实际读取是否恰好在实际写入之前/之后。

**示例 2：**

下面的示例是否是线程安全的，如果您假设通过此处未显示的诡计，这些方法中的任何一个都不会被同时调用？如果每次都使用随机方法进行计数，计数会以预期的方式递增，然后被正确读取，还是锁*必须*是同一个对象？*（顺便说一句，我完全意识到这个例子是多么荒谬，但我对理论比对实践更感兴趣）*

```
class Counter{
  private final Object lock1 = new Object();
  private final Object lock2 = new Object();
  private final Object lock3 = new Object();
  int count = 0;

  public void increment1(){
    synchronized(lock1){
      count++;
    }
  }

  public void increment2(){
    synchronized(lock2){
      count++;
    }
  }

  public int getCount(){
    synchronized(lock3){
      return count;
    }
  }

} 
```

**示例 3：**

发生之前的关系是简单的 java 概念，还是 JVM 中内置的实际事物？尽管我可以保证下一个示例的概念上发生之前的关系，但如果它是内置的东西，java 是否足够聪明来接受它？我假设它不是，但这个例子实际上是线程安全的吗？如果它是线程安全的，那么如果 getCount() 没有锁定呢？

```
class Counter{
  private final Lock lock = new Lock();
  int count = 0;

  public void increment(){
    lock.lock();
    count++;
    lock.unlock();
  }

  public int getCount(){
    lock.lock();
    int count = this.count;
    lock.unlock();
    return count;
  }
} 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-05-28T07:55:10.447

是的，读取也必须同步。[这个页面](http://docs.oracle.com/javase/6/docs/api/java/util/concurrent/package-summary.html)说：

> 只有当写操作发生在读操作之前，一个线程写的结果才能保证对另一个线程的读可见。
> 
> [...]
> 
> 监视器的解锁（同步块或方法退出）发生在同一监视器的每个后续锁定（同步块或方法入口）之前

同一页说：

> “释放”同步器方法（例如 Lock.unlock、Semaphore.release 和 CountDownLatch.countDown）之前的操作发生在成功“获取”方法（例如 Lock.lock）之后的操作

所以锁提供了与同步块相同的可见性保证。

**无论您使用同步块还是锁，只有当读取器线程使用与写入器线程相同**的监视器或锁时，才能保证可见性。

*   您的示例 1 不正确：如果您想查看计数的最新值，getter 也必须同步。

*   您的示例 2 不正确，因为它使用不同的锁来保护相同的计数。

*   您的示例 3 可以。如果 getter 没有锁定，您可能会看到旧的计数值。之前发生的事情是由 JVM 保证的。JVM 必须遵守指定的规则，例如将缓存刷新到主内存。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-05-28T07:52:54.333

尝试从两个不同的简单操作的角度来看待它：

1.  锁定（互斥），
2.  内存屏障（缓存同步，指令重新排序屏障）。

进入一个`synchronized`块需要锁定和内存屏障；离开`synchronized`区块需要解锁+内存屏障；读/写一个`volatile`字段只需要内存屏障。从这些方面考虑，我认为您可以自己澄清上述所有问题。

与示例 1 一样，读取线程不会有任何类型的内存屏障。这不仅仅是在读取之前/之后查看值之间，它是关于在线程启动后**永远不会**观察到 var 的**任何变化。**

示例 2\. 是您提出的最有趣的问题。在这种情况下，JLS 确实没有给你任何保证。在实践中，您不会得到任何排序保证（就好像根本不存在*锁定*方面），但您仍将受益于内存屏障，因此您将观察到变化，这与第一个示例不同。`synchronized`基本上，这与删除和标记`int`as完全相同`volatile`（除了获取锁的运行时成本）。

关于示例 3，通过“只是一个 Java 的东西”，我觉得你有擦除泛型，只有静态代码检查才知道。这不是那样的——锁和内存屏障都是纯粹的运行时工件。事实上，编译器根本无法推理它们。

# asp.net - 在后面的代码中启用/禁用 RegularExpressionValidator

> ID：10781083
> 
> 赞同：1
> 
> 时间：2012-05-28T07:47:16.803
> 
> 标签：asp.net, vb.net

我对与 TextBox 连接的 RegularExpressionValidator 有疑问：

```
<asp:TextBox ID="tbPRCOD" runat="server" Font-Bold="True" ForeColor="Green" BackColor="White" BorderStyle="None" Width="50%"></asp:TextBox>

<asp:RegularExpressionValidator id="revPRCOD" runat="server" SetFocusOnError="True"
                                 ErrorMessage="<%$ Resources:GlobalTranslations, max20char %>" Display="Dynamic"
                                 ControlToValidate="tbPRCOD" BackColor="Transparent" Font-Bold="True"
                                 Font-Underline="True" ForeColor="Red" ValidationExpression="^[a-zA-Z0-9]{0,20}$"> 
```

在页面上我有下拉列表：

```
<asp:DropDownList ID="cmbIDFAM" runat="server" Width="98%" SkinID="mandatoryCombo" Font-Size="X-Small" AutoPostBack="true" > </asp:DropDownList></td> 
```

启动时启用验证器（如果文本框中的字符串超过 20 个字符，则验证器显示验证错误）。如果我将 DropDownList 中的选定项目更改为值为 5 的项目，那么我想关闭验证，因为对于 DropDownList 中的这个索引，我想在 TextBox (tbPRCOD) 中写入超过 20 个字符：

```
 Protected Sub cmbIDFAM_SelectedIndexChanged(ByVal sender As Object, ByVal e As System.EventArgs) Handles cmbIDFAM.SelectedIndexChanged
        If getValueFromCombo(cmbIDFAM) = 5 Then
            tbPRCOD.MaxLength = 100
            revPRCOD.Enabled = False

        Else
            tbPRCOD.MaxLength = 20
            revPRCOD.Enabled = True
        End If

    End Sub 
```

一切正常，直到我将 cmbIDFAM DropDownList 更改为第 5 项。我在 TextBox 中输入了 20 多个字符，现在 RegularExpressionValidator 已禁用，因此在验证时不会显示错误。当我在 ddl 中更改项目时，TextBox 中的字符数超过 20 个并且启用了验证器，但页面中不显示错误。为什么？如何强制验证？在 ddl 中更改项目后，我还使用函数强制验证：

```
revPRCOD.Validate() 
```

在这种情况下这无济于事。感谢帮助。垫。

# facebook-graph-api - 如果我的应用删除了它在用户墙上发布的帖子，其他人的所有喜欢和分享也会被删除吗？

> ID：10781084
> 
> 赞同：3
> 
> 时间：2012-05-28T07:47:17.380
> 
> 标签：facebook-graph-api, facebook-apps, facebook-page, facebook-wall

假设我创建了一个 FB 应用程序，无论出于何种原因，该应用程序的服务器代码都负责将故事发布到应用程序用户的墙上（使用令牌）。

现在假设我们想在以后删除那个帖子 - 很简单，对吧？因为应用程序创建了帖子，它拥有它，并且使用它最初收到的 ID 可以删除该帖子。（我认为我得到的 ID 实际上是一个“对象 ID”，指的是我的内容，而不是专门指用户墙上的帖子——对吗？）

事情是这样的。如果用户的一个或多个朋友将这个故事分享到他们自己的墙上会怎样——如果这种情况发生了很多次，并在朋友关系树中传播得越来越远怎么办。我的应用是否仍然有权删除所有这些帖子，因为它创建了原始帖子？

此外，如果原始用户自己从他们的墙上删除了帖子，但直到他/她的朋友分享了该帖子怎么办？这会产生相同的效果（到处删除），还是只会删除一个特定的帖子？如果帖子已被用户删除，我的应用程序在尝试删除帖子本身时会出错吗？

我问的原因是，如果我的应用程序删除了它在用户墙上发布的原始帖子，我希望*所有*共享的帖子或喜欢也被删除，无论它们在朋友链的哪个位置。我不想删除我的原始帖子并假设一切都很好，只是发现因为它在链中被多次共享，它仍然在某个地方可见。

如果它是相关的，我的应用程序将制作的“帖子”将需要一个自定义图像和一个特定的返回 URL - 我尝试了`/user_id/links`图形 API，但它没有工作（它有一个错误）。所以我最有可能`/user_id/feed`用来发帖。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-30T15:50:20.253

> 如果我的应用程序删除了它在用户墙上发布的原始帖子，那么*所有*共享的帖子也会从任何地方删除吗？

是的

> 如果原始用户自己从他们的墙上删除了帖子，但直到他/她的朋友分享了帖子怎么办？这会产生同样的效果吗？

是的

我怎么知道的？我测试了它。

我向测试用户 Betty 发布了状态更新

![贝蒂](../Images/b66a8c673f53f0de54fb30801e995da1.png)

然后让其他三个测试用户一个接一个地分享

![所有的朋友都分享它](../Images/668aa0f665379fcc9b41f4be7a3f0039.png)

所以 Tom 分享了它 > Joe 分享了 Tom 分享的内容 > Patricia 分享了 Joe 分享的内容

然后为了完整起见，我让贝蒂再次分享

![贝蒂再次分享](../Images/46932791633592eed6bcec2994ec406b.png)

删除后，所有测试用户的所有帖子都将消失，包括重新分享的 Betty。

只要用户通过操作链接共享，如果原始共享被删除，则所有后续共享都将被删除。

但是，如果用户手动复制它或保存照片然后重新上传，则不会。

*在文档方面，您必须咬紧牙关，并意识到 Facebook 没有全面的文档，而且并非所有 Facebook 工程师都了解 Facebook 的所有功能。有很多项目无法从 Facebook 上得到消息，而那是我测试的时候。这就是开发人员所做的。创建新的测试路径，进行覆盖，建立分支并得出结论*

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-28T07:53:52.650

如果您在用户的墙上发布链接，则无法删除共享内容，就像您发布照片一样，它将被删除

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-28T10:56:19.327

`Friend has commented on Someone's post`如果您删除帖子（无论是链接、状态更新、照片等），删除将删除对象中的所有喜欢和评论，以及与对象相关联的任何人的相关新闻源（例如，它将删除诸如此类的内容））。

但是，它不会`re-shares`从用户的时间线上删除任何该帖子。

# c - 如何读取变量 *(int*)x？

> ID：10781090
> 
> 赞同：0
> 
> 时间：2012-05-28T07:48:08.547
> 
> 标签：c

我从一个解释排序的网站得到这个。但我无法理解`*(int*)x`。在 C 程序中这样使用时如何读取变量 x？它是指向 x 指针的指针还是不同？任何帮助表示赞赏。谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-28T07:51:23.307

如果你把它分开，你可以到达那里，首先：

```
(int*)x 
```

这将转换`x`为`int*`, 指向 的指针`int`。我假设在这种情况下，`x`是一个`int`，所以数字`x`被解释为一个指针。

在下一步中：

```
*(int*)x 
```

`*`取消引用一个指针，在这种情况下是刚刚转换的`int`. 结果是一个`int`.

简而言之：将 an 解释`int`为指针并获取它指向的值。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-28T07:50:13.183

您`x`首先转换为整数指针，然后取消引用它。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-28T07:52:38.743

`*`你可以在 C 中这样思考：

*   对于类型（例如`int`），它表示**指针**
*   带有值（例如，`x`）意味着**取消引用**

所以：

*   `(int*)x`是一个指向`int`
*   `*y`是来自指向的内存地址的值`y`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-28T07:53:52.563

与其他人的答案相同，但解释不同。试着解释一下 - int* ptr = (int*)x; int y = *ptr;

# ios - glsmLoadTextureLevelBuffer 在 drawElement 时使用双倍内存

> ID：10781093
> 
> 赞同：1
> 
> 时间：2012-05-28T07:48:25.767
> 
> 标签：ios, memory, opengl-es

我从一个 1024x1024 png 文件（gfxAllocateTextureLevel）创建了一个纹理，但是当我通过 drawElement 绘制这个纹理时，由于 glsmLoadTextureLevelBuffer 的调用，内存变成了两倍！！！

* * *

尼可波拉斯，对不起，我不知道！

```
0 libSystem.B.dylib malloc<br/>
1 libGLProgrammability.dylib glsmLoadTextureLevelBuffer<br/>
2 libGLProgrammability.dylib glsmLoadTextureStructure<br/>
3 GLRendererFloat gldLoadCurrentTexture<br/>
4 GLRendererFloat gldUpdateDispatch<br/>
5 GLEngine gleDoDrawDispatchCore<br/>
6 GLEngine glDrawElements_IMM_Exec<br/>
7 OpenGLES glDrawElements<br/> 
```

这是轨道，我认为 glTexImage2D malloc 一些内存，第一次绘制时 malloc 一些内存用于缓存，有人知道这是什么过程吗？！

# android - 显示软键盘时调整 EditText 的大小

> ID：10781096
> 
> 赞同：0
> 
> 时间：2012-05-28T07:48:37.890
> 
> 标签：android, android-layout

显示软键盘时如何调整 EditText 的大小？出于兼容性原因（不同的屏幕尺寸和密度），我们是否可以将 EditText 调整为软键盘上方的“20dp”或整个屏幕可滚动的值？在 SE 上阅读许多关于使用 nut 的帖子，但它们对我没有用。

main.xml 文件如下：

```
<?xml version="1.0" encoding="utf-8"?>
    <RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
        android:layout_width="fill_parent"
        android:layout_height="fill_parent"
        android:layout_weight="1.04" >
  <Button
            android:id="@+id/Save"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_alignParentRight="true"
            android:layout_alignParentTop="true"
            android:layout_marginRight="15dp"
            android:layout_marginTop="16dp"
            android:layout_marginBottom="20dp"
            android:textColor="#ffffff"
            android:text="@string/SaveButton" />

        <EditText
            android:id="@+id/NoteTextBox"
            android:layout_width="fill_parent"
            android:layout_height="180dp"
            android:layout_alignParentLeft="true"
            android:layout_alignParentRight="true"
            android:layout_below="@+id/Save"
            android:layout_marginTop="20dp"
            android:ems="10"
            android:textColor="#ffffff"
            android:inputType="text"
            android:singleLine="false" >

            <requestFocus />

        </EditText>

    </RelativeLayout> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-28T08:16:15.267

尝试使用`android:imeOptions="flagNoExtractUi"`它可能会对您有所帮助。更多关于`imeOptions`你的信息可以[在这里阅读](http://developer.android.com/reference/android/widget/TextView.html#attr_android%3aimeOptions)

希望能帮助到你

# reverse-proxy - 在切诺基反向代理后面运行 buildbot

> ID：10781097
> 
> 赞同：0
> 
> 时间：2012-05-28T07:48:43.097
> 
> 标签：reverse-proxy, buildbot, cherokee

我正在尝试在切诺基反向代理后面运行我的 buildbot 主服务器，并将 buildbot 实例作为循环反向代理布局中切诺基的信息源。

这是 buildbot master.cfg 配置文件：-

```
# -*- python -*-
# ex: set syntax=python:

# This is a sample buildmaster config file. It must be installed as
# 'master.cfg' in your buildmaster's base directory.

# This is the dictionary that the buildmaster pays attention to. We also use
# a shorter alias to save typing.
c = BuildmasterConfig = {}

####### BUILDSLAVES

# The 'slaves' list defines the set of recognized buildslaves. Each element is
# a BuildSlave object, specifying a unique slave name and password.  The same
# slave name and password must be configured on the slave.
from buildbot.buildslave import BuildSlave
c['slaves'] = [BuildSlave("example-slave", "pass")]

# 'slavePortnum' defines the TCP port to listen on for connections from slaves.
# This must match the value configured into the buildslaves (with their
# --master option)
c['slavePortnum'] = 9989

####### CHANGESOURCES

# the 'change_source' setting tells the buildmaster how it should find out
# about source code changes.  Here we point to the buildbot clone of pyflakes.

from buildbot.changes.gitpoller import GitPoller
c['change_source'] = []
c['change_source'].append(GitPoller(
        'git://github.com/buildbot/pyflakes.git',
        workdir='gitpoller-workdir', branch='master',
        pollinterval=300))

####### SCHEDULERS

# Configure the Schedulers, which decide how to react to incoming changes.  In this
# case, just kick off a 'runtests' build

from buildbot.schedulers.basic import SingleBranchScheduler
from buildbot.schedulers.forcesched import ForceScheduler
from buildbot.changes import filter
c['schedulers'] = []
c['schedulers'].append(SingleBranchScheduler(
                            name="all",
                            change_filter=filter.ChangeFilter(branch='master'),
                            treeStableTimer=None,
                            builderNames=["runtests"]))
c['schedulers'].append(ForceScheduler(
                            name="force",
                            builderNames=["runtests"]))

####### BUILDERS

# The 'builders' list defines the Builders, which tell Buildbot how to perform a build:
# what steps, and which slaves can execute them.  Note that any particular build will
# only take place on one slave.

from buildbot.process.factory import BuildFactory
from buildbot.steps.source import Git
from buildbot.steps.shell import ShellCommand

factory = BuildFactory()
# check out the source
factory.addStep(Git(repourl='git://github.com/buildbot/pyflakes.git', mode='copy'))
# run the tests (note that this will require that 'trial' is installed)
factory.addStep(ShellCommand(command=["trial", "pyflakes"]))

from buildbot.config import BuilderConfig

c['builders'] = []
c['builders'].append(
    BuilderConfig(name="runtests",
      slavenames=["example-slave"],
      factory=factory))

####### STATUS TARGETS

# 'status' is a list of Status Targets. The results of each build will be
# pushed to these targets. buildbot/status/*.py has a variety to choose from,
# including web pages, email senders, and IRC bots.

c['status'] = []

from buildbot.status import html
from buildbot.status.web import authz, auth

authz_cfg=authz.Authz(
    # change any of these to True to enable; see the manual for more
    # options
    auth=auth.BasicAuth([("pyflakes","pyflakes")]),
    gracefulShutdown = False,
    forceBuild = 'auth', # use this to test your slave once it is set up
    forceAllBuilds = False,
    pingBuilder = False,
    stopBuild = False,
    stopAllBuilds = False,
    cancelPendingBuild = False,
)
c['status'].append(html.WebStatus(http_port=8010, authz=authz_cfg))

####### PROJECT IDENTITY

# the 'title' string will appear at the top of this buildbot
# installation's html.WebStatus home page (linked to the
# 'titleURL') and is embedded in the title of the waterfall HTML page.

c['title'] = "Pyflakes"
c['titleURL'] = "http://divmod.org/trac/wiki/DivmodPyflakes"

# the 'buildbotURL' string should point to the location where the buildbot's
# internal web server (usually the html.WebStatus page) is visible. This
# typically uses the port number set in the Waterfall 'status' entry, but
# with an externally-visible host name which the buildbot cannot figure out
# without some help.

c['buildbotURL'] = "http://localhost:8010/"

####### DB URL

c['db'] = {
    # This specifies what database buildbot uses to store its state.  You can leave
    # this at its default for all but the largest installations.
    'db_url' : "sqlite:///state.sqlite",
}
    # change any of these to True to enable; see the manual for more
    # options
    auth=auth.BasicAuth([("pyflakes","pyflakes")]), 
```

这是切诺基配置：-

![在此处输入图像描述](../Images/b371f0031d89c781aa898646bbacf50f.png)

![在此处输入图像描述](../Images/54f744e97e3b44eb63265448de1074e6.png)

![在此处输入图像描述](../Images/336d04ad42911c657a3fd2fd79420f4a.png)

不幸的是，`502 Bad gateway`当我访问我的 web url 时我得到了，但另一方面，我知道我的 buildbot 主服务器实例工作正常，因为转到相同的 web url 并附加`:8010`在 web url 后面会给我“欢迎使用 Buildbot 。 ..“ 页。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-03T06:15:33.883

您的代理与 buildbot 在同一台机器上吗？如果没有，您将需要调整 cherokee 中的 URL，以指向运行 buildbot 的机器（localhost 指向运行 cherokee 的机器）。

在任何情况下，`c['buildbotURL']`都应更改为指向 buildbot 可用的公共 URL（即 cherokee 公开的内容，而不是被代理的 URL）。

# javascript - Highchart 工具提示和来自外部函数的事件

> ID：10781102
> 
> 赞同：1
> 
> 时间：2012-05-28T07:49:26.800
> 
> 标签：javascript, highcharts, highstock

我需要为 highchart 工具提示格式化程序和事件添加外部函数，类似于下面给出的代码。如何在外部添加它。

```
 $(function(){
      var highchartObj = chart: {renderTo: 'rightBottomContainer'},xAxis: {categories: ['Jan', 'Feb', 'Mar', 'Apr', 'May', 'Jun', 'Jul', 'Aug', 'Sep', 'Oct', 'Nov', 'Dec']}, series: [{data: [29.9, 71.5, 106.4, 129.2, 144.0, 176.0, 135.6, 148.5, 216.4, 194.1, 95.6, 54.4]}]} 
      rchart = new Highcharts.Chart(highchartObj);
        rchart.Point.prototype.tooltipFormatter = function (useHeader) {
        //var point = this, series = point.series;
        return "AAAAAA";
    };

}); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-29T08:05:18.107

您可以在某处定义您的功能

```
function tooltipFormatter(){
    //your format here
} 
```

然后将此函数传递给对象内部的 Highcharts 配置对象`tooltip`，如下所示`formatter`：

```
var chart = new Highcharts.Chart(..., tooltip: { formatter: tooltipFormatter }, ...); 
```

因此，您可以将代码放在一个单独的函数中，该函数将在 Highcharts 对象中传递。

演示：http: [//jsfiddle.net/NCnS5/](http://jsfiddle.net/NCnS5/)

参数文档`formatter`：[http ://www.highcharts.com/ref/#tooltip--formatter](http://www.highcharts.com/ref/#tooltip--formatter)

# php - PHP TCPDF - 如何垂直对齐表格单元格中的文本？

> ID：10781103
> 
> 赞同：5
> 
> 时间：2012-05-28T07:49:30.367
> 
> 标签：php, vertical-alignment, tcpdf

默认情况下，表格单元格中的值（在由 TCPDF 生成的表格中）在单元格顶部垂直对齐。

有没有人找到一种将文本垂直对齐到单元格中间的简单方法？

我在网上找到了一些建议的解决方案，但这些解决方案并不理想。

例如，一个建议 (http://sourceforge.net/projects/tcpdf/forums/forum/435311/topic/4385696) 是使用 TCPDF 的 MultiCell() 方法设置每个单元格的内容，但是当您简单地想写出你的 HTML 代码然后生成 PDF。

另一个建议（http://bytethinker.com/blog/tcpdf-and-vertical-alignment-of-table-cells）是在每个单元格中放置跨度并在这些跨度中创建带有换行符的空行，以强制您的文本向下（因此朝向垂直中心），但这有点小题大做。

有没有人找到更好/更清洁的方法来实现这一目标？这么受欢迎的图书馆肯定会满足如此普遍的需求吗？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2016-04-15T15:14:42.380

如果它是静态表格...您可以在内容上方添加不可见的文本以将文本下推：

```
<td width="12%" style="text-align:center">
  <div style="font-size:10pt">&nbsp;</div>
  <b>The contents of my cell...</b>
</td> 
```

调整   的字体大小 提高或降低文本......这是一个黑客，但它确实有效。<br /> 的工作也是......但它们会不太准确......

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2012-06-20T11:30:18.437

请记住，TCPDF 无法像浏览器那样处理成熟的 HTML 和 CSS。Nicolas 在渲染最常用的 HTML 代码方面做得很好。CSS 不能放在文档顶部，必须内联。

表格必须完全手动格式化——单元格不会像在浏览器中那样自动调整大小。同样，您必须弄清楚某物的高度，并添加`<BR>`s 或调整不可见图像的大小以将其向下推。

也许有一天他会添加更多这样的功能。事实上，我觉得这门课很棒。

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2013-01-08T12:40:45.390

以下方法对我有用。1\. 在表格标签上方编写以下代码。

```
<style> td{height: 20px;line-height:10px;}</style> 
```

注意：高度应该是行高的两倍。

1.  在表格级别使用 cellpadding 属性。例如，

    单元格填充=“5”

在这两种方式中，您都需要调整高度。

* * *

## 回答 #4

> 赞同：6
> 
> 时间：2019-12-31T06:56:16.860

这对我有用：

```
<td align="center" style="height: 50px;">
<div style="vertical-align: middle;">
<p>This Is My text</p>
</div>
</td> 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2014-09-17T12:17:04.510

我想底部对齐一些 - 但不是全部 - 单元格。我发现简单地填充`<br>`不起作用。

相反，您需要使用`&nbsp;<br>`- 然后将文本向下推。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2016-03-14T09:56:44.240

我有一个表格，其中一列的字体大小不同（因为数字很大，如果不缩小就不会留在一行上），客户希望它们在单元格中垂直居中。

在尝试了我在 HTML、CSS 和 TCPDF 的历史中学到的所有技巧之后，每次嘲笑我时，我终于设计了一个如此聪明的解决方案，它没有预料到，最后我或多或少地得到了垂直单元格对齐的地方，即在单元格的中间。

我发现如果同一单元格中有图像，TCPDF 会对齐图像底部的文本。所以我制作了一个实用程序脚本来为我提供一个参数化宽度和高度的白色图像，并将其放在文本的前面。也可以只制作所需尺寸的白色图像并使用它，但我发现使用脚本和不同的参数进行试验更容易。在我的情况下，wwidth 仅为 1px，但理论上也可以将文本与图像一起推到右侧。

当然，这种方法也存在一些问题，但就我而言，所有数字都表现得很好。如果居中文本或其他列的高度变化很大，则很难找到一个好的值（尽管通过参数化可以尝试从行上每个单元格的长度计算所需的高度）。

我仍然希望至少可以在单元格中设置顶部填充或顶部边距（工作垂直对齐会更可取，但即使有任何工具也会让生活更轻松）

希望这甚至可以帮助其他一些糟糕的编码器

汉克

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2017-06-11T21:10:13.657

对标签使用内联样式`<td>`，然后改变百分比以将文本设置在 pdf 显示中所需的合适位置。例如

```
<td style="line-height: 250%;">'. $variable .'</td> 
```

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2017-09-06T07:55:13.187

添加 style="line-height:50%;" in image 标签对我有用。请试一试。就我而言，我想在表格单元格中垂直对齐图像。您可以在表格单元格中添加 div，并可以在其中添加图像或文本。下面对我有用。

`<div align="center"><img src="images/logo_example.png" border="0" height="30" width="30" style="line-height:50%;"/></div>`

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2014-05-15T18:58:49.560

也许对于较小的行高，这是一种解决方法：

`<table width="100%" cellpadding="5" cellspacing="0">`

cellpadding 值是单元格高度 / 2 。如果您需要更多空间/高度看起来不太好，否则这将是更好的解决方案： http: [//bytethinker.com/blog/tcpdf-and-vertical-alignment-of-table-cells](http://bytethinker.com/blog/tcpdf-and-vertical-alignment-of-table-cells)

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2017-06-17T13:36:51.710

您可以`<td>`使用为表格添加空间`&nbsp;<br/>`

我发现这个[链接](http://bytethinker.com/tcpdf-and-vertical-alignment-of-table-cells/)也许可以帮助你

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2019-07-11T19:11:51.997

我用跨度标签内的一个字母解决了它；例如：

```
<td><span style=\"font-size:16px;color:#FFF;\">|</span>Content</td> 
```

通过调整字体大小，我可以处理单元格的高度，并且因为文本始终是基线，所以它可以工作。

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2017-01-27T09:33:33.460

嵌套另一个 TABLE 并添加另一个 ROW。在要垂直对齐的内容之前添加一个空的 TD 并为其添加一个高度属性。这应该可以让您对垂直间距进行精细控制。

这是一个例子：

```
'<table cellpadding="0" border="0" style="border-collapse: collapse;">' .
    '<tr>' .
    '<td width="148" height="80">' .
    '<img width="128" src="' . "images/gcs_logo.svg" . '"/>' .
    '</td>' .
    '<td style="line-height:14px; font-size:11px;">' .
        '<table cellpadding="0" border="0" style="border-collapse: collapse;">' .
        '<tr style="color:#000000;">' .
        '<td height="23" style="text-decoration:underline;padding:0;"></td>' .
        '</tr>' .
        '<tr style="color:#000000;">' .
        '<td style="padding:0;">18191 Von Karman Avenue<br/>Suite 300<br/>Irvine, California 92612</td>' .
        '</tr>' .
        '</table>' .
    '</td>' .
    '</tr>' .
    '</table>'; 
```

* * *

## 回答 #13

> 赞同：-3
> 
> 时间：2015-10-29T05:36:34.623

它的工作（细胞填充）...

```
<table border="1" cellpadding="5" style="font-size:10px;"> 
```

```
$html .= '<table border="1" cellpadding="5" style="font-size:10px;">';
$html .= '<tr style="font-weight:bold;text-align:center;line-height:11px;" >';
$html .= '<th>School/College Name</th>';
$html .= '<th>Board</th>';
$html .= '<th>Language</th>';
$html .= '<th>Percentage</th>';
$html .= '<th>Place</th>';
$html .= '</tr>';
$html .= '<tr style="text-align:center;line-height:11px;font-weight:bold;font-size:8px;" >';
$html .= '<td style="vertical-align: middle;font-weight:bold;">' . $tenInfo[0]['school_college_name'] . '</td>';
$html .= '<td style="vertical-align: middle">' . $tenInfo[0]['board']. '</td>';
$html .= '<td style="vertical-align: middle">' . $tenInfo[0]['main_lang']. '</td>';
$html .= '<td style="vertical-align: middle">' . $tenInfo[0]['percentage']. '</td>';
$html .= '<td style="vertical-align: middle">' . $tenInfo[0]['school_college_place']. '</td>';
$html .= '</tr>';

$html .= '<tr style="text-align:center;line-height:11px;font-weight:bold;font-size:8px;" >';
$html .= '<td style="vertical-align: middle">' . $plusInfo[0]['school_college_name'] . '</td>';
$html .= '<td style="vertical-align: middle">' . $plusInfo[0]['board']. '</td>';
$html .= '<td style="vertical-align: middle">' . $plusInfo[0]['main_lang']. '</td>';
$html .= '<td style="vertical-align: middle">' . $plusInfo[0]['percentage']. '</td>';
$html .= '<td style="vertical-align: middle">' . $plusInfo[0]['school_college_place']. '</td>';
$html .= '</tr>';

$html .= '<tr style="text-align:center;line-height:11px;font-weight:bold;font-size:8px;" >';
$html .= '<td style="vertical-align: middle">' . $ugInfo[0]['school_college_name'] . '</td>';
$html .= '<td style="vertical-align: middle">' . $ugInfo[0]['board']. '</td>';
$html .= '<td style="vertical-align: middle">' . $ugInfo[0]['main_lang']. '</td>';
$html .= '<td style="vertical-align: middle">' . $ugInfo[0]['percentage']. '</td>';
$html .= '<td style="vertical-align: middle">' . $ugInfo[0]['school_college_place']. '</td>';
$html .= '</tr>';

$html .= '<tr style="text-align:center;line-height:11px;font-weight:bold;font-size:8px;" >';
$html .= '<td>' . $pgInfo[0]['school_college_name'] . '</td>';
$html .= '<td>' . $pgInfo[0]['board']. '</td>';
$html .= '<td>' . $pgInfo[0]['main_lang']. '</td>';
$html .= '<td>' . $pgInfo[0]['percentage']. '</td>';
$html .= '<td>' . $pgInfo[0]['school_college_place']. '</td>';
$html .= '</tr>';
$html .= '</table>';
```

# android - Android C++ 而不是 C

> ID：10781107
> 
> 赞同：3
> 
> 时间：2012-05-28T07:49:48.407
> 
> 标签：android, c++, android-ndk

我正在尝试确定使用 C++ 创建 Android 应用程序是否明智。我尝试使用 Java 来满足我的需求，但它根本没有我需要的语言功能。

我看到一堆用 C/C++ 编写的东西，但它们实际上都是“C”示例。

我想构建一个简单的 C++ 应用程序（不是“C”），以更好地了解如何在 Android 中执行此操作。我读过一些关于似乎支持 C++ 的 NDK，但我不知道到什么程度。

那里有示例 C++ 项目吗？一个在 .cpp 文件中有真正的 C++ 而不是 C 代码的？一个“Hello World”程序就可以了。简单是好的开始。

如果您想回答 C++ 如何包装“C”函数，请跳过这个问题。如果该示例未解决名称修改问题，则它不是 C++。请不要使用外部“C”。感谢您的理解。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-28T09:47:48.033

NDK 工作得很好。使用 C++ 编写 .cpp 和 .h 非常简单，使用 ndk-build 编译它们，并且您的 android 代码包括 cpp，就像本[教程](http://www.codexperiments.com/android/2010/05/android-introduction-part-2-setting-up-your-environment/)中解释的那样：

祝你好运： [第 1](http://www.codexperiments.com/android/2010/05/android-sdk-ndk-part-1-setting-up-your-environment/) [部分第 2 部分](http://www.codexperiments.com/android/2010/05/android-introduction-part-2-setting-up-your-environment/)

官方文档：[示例应用程序](http://developer.android.com/sdk/ndk/overview.html#samples)

# php - 当我尝试从服务器发送邮件时出现致命错误？

> ID：10781108
> 
> 赞同：1
> 
> 时间：2012-05-28T07:49:51.653
> 
> 标签：php, sendmail

这是我的邮件脚本，试图从我的服务器发送邮件。

```
<?php
$subject = 'This is an HTML email.';
$smtp_server = 'smtp.mydomain.com';
$from = $smtp_username = 'info@mydomail.com';
$smtp_password = 'mypassword';
$html = 'This is an <strong>HTML</strong> <i>formatted</i> email!';
$text = strip_tags($html);
$to = 'ramsai.php@gmail.com';
//$cc = array('foo@example.com');
//$bcc  array('bar@example.com', 'baz@example.com');

// send the message
$result = sendMail($subject, $smtp_server, $smtp_username, $smtp_password, $html, $text, $to);

// check to see if the message was sent properly
if ($result !== true) {
    echo 'There was an error sending the message. ('.$result.')';
} // end if the message was not sent properly
else {
    echo 'Message sent successfully.';
} // end else the message was sent properly

?> 
```

当我尝试在我的 Godaddy 服务器中运行此脚本时，我收到致命错误：致命错误：调用 /home/content/99/7916299/html/EMRXXX/EMRnew/Patient/sendmail1.php 中的未定义函数 sendMail()第 13 行

提前谢谢你，拉姆塞

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-28T07:59:24.553

**致命错误：调用未定义的函数 sendMail()**

意味着您忘记包含您的`sendMail()`用户功能。因为没有原生的php`sendMail()`函数...

您应该使用本机[mail()函数并将服务器设置为在](http://php.net/manual/en/function.mail.php)*php.ini*文件中使用 sendmail (smtp) ：

`mail($to,$subject,$content,$headers);`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-28T08:08:18.130

不 1\. 你可以使用 PHP 的原生函数 mail()。更多详情[http://www.w3schools.com/php/php_mail.asp](http://www.w3schools.com/php/php_mail.asp)

在这里，您必须在您的 php.ini 文件中设置 SMPT 详细信息，或者您可以从您的代码中覆盖它。

否 2\. 使用 PHPMailer 库。非常容易集成。你可以从[http://code.google.com/a/apache-extras.org/p/phpmailer/得到它](http://code.google.com/a/apache-extras.org/p/phpmailer/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-28T07:50:59.420

您是否包含了一些支持 sendmail 的 php 库？

如果您尝试使用操作系统命令 sendmail，则不会这样。

不建议使用 PHP 邮件功能，因此请使用[PHPMailer](http://phpmailer.worxware.com/)之类的东西。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-28T07:58:25.353

您需要找到写入方法 sendMail 定义的 php 文件，然后将其包含在内。如果碰巧它在同一个目录中，那么只需将此行添加到顶部

```
require_once 'sendmail.php' ; 
```

# json - spring3mvcportlet 填充 JSON dojo 选择

> ID：10781112
> 
> 赞同：0
> 
> 时间：2012-05-28T07:50:16.167
> 
> 标签：json, spring, dojo, portlet, populate

我是 Spring mvc3 portlet 和 dojo 的新手。我正在尝试在加载 jsp 时使用 JSON 数据填充选择下拉列表。我想使用 dojo 并在加载 jsp 时对控制器进行 ajax 调用并返回 JSON。任何提示都会有所帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-28T08:56:37.277

```
@Controller
@RequestMapping("/yourController")
public class YourController
{
  @RequestMapping(value="/combo/{id}", method=ReqestNethod.GET)
  public String getDropDownData(@ParamValue("id") long id)
  {
    List<Combo> combos = commonDao.getCombos(id);
    String json = JsonUtil.toJson(combos); // or whichever way you use
    return json;
  }
} 
```

从 dojo 向这个 url 发送请求

```
<your-context-path>/yourController/combo/1 
```

其中 1 是您的组合 ID。

我还没有检查这里的语法.. 盲写了。您可能会遇到编译错误。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-01T20:13:53.410

我得到以下格式的数据 如何填充 dojoType="xwt.widget.form.FilteringSelect" {"ValuesDTO": {"items": [{},{"default": {"size": 5},"int “：10”，“字符串”：“产品1”，“字符串”：“产品1”，“字符串”：“产品3”，“字符串”：“产品4”，“字符串”：“产品5”}]}}

我在 bean 中发送 dat--->DTO--->List

# css - CSS3 弹性盒属性

> ID：10781115
> 
> 赞同：1
> 
> 时间：2012-05-28T07:50:39.160
> 
> 标签：css, flexbox

我想在我们动态创建盒子的布局中使用弹性盒子属性。

所以我想根据计数调整自己（框）。就像只有 1 个盒子一样，它应该占用 100% 的空间，最多 3 个盒子会排成一排。如果屏幕中出现第 4 个框，则自动转到下一行。

我搜索了很多关于 flex-flow 的内容，但没有找到正确的解决方案。

请帮忙。

问候

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-19T02:25:22.100

目前仅使用新语法，Chrome（需要前缀）和 Opera：

```
#container {
    display: flex;
    flex-flow: row wrap;
}

#container > * {
    flex: 1 1 33%;
} 
```

这是一个演示：http: [//jsfiddle.net/lpd_/qwwT8/](http://jsfiddle.net/lpd_/qwwT8/)。如果您不希望在填充第一行后后续行上的项目拉伸，您可以添加：

```
#container > *:nth-child(n+4) {
    max-width: 33.33%;
    max-width: calc(100% / 3); /* To override and be more precise, if you wish */
} 
```

# html-lists - 如何在 Play! 中显示元素列表！框架？

> ID：10781116
> 
> 赞同：0
> 
> 时间：2012-05-28T07:50:43.673
> 
> 标签：html-lists, playframework-1.x

我有一个作为参数传递给`render`方法的元素列表。我没有 HTML 方面的经验，想知道如何打印列表中的所有元素？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-28T08:32:20.613

我假设您使用的是 playframework 1.x

如果您从控制器调用 render(myElements)，myElements 是一个字符串列表，它在您的视图中看起来像这样。

```
...
<ul>
  #{list myElements, as:'elem'}
    <li>&{elem}</li>
  #{/list}
</ul>
... 
```

我会建议你阅读 playframework.org 上的[文档](http://www.playframework.org/documentation/1.2.4/home)。它非常好，易于阅读。你可能会学到很多东西。如果你想学习 html，我认为[w3schools.com](http://w3schools.com/)是一个很好的起点。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-28T08:31:49.033

如果使用带有 Groovy 模板的 play 1.2.x：

```
<ul>
  #{list items:myList, as:'element'}
    <li>${element.name}</li>
  #{/list}
</ul> 
```

# solaris - Solaris 11 无法安装区域

> ID：10781120
> 
> 赞同：0
> 
> 时间：2012-05-28T07:51:08.010
> 
> 标签：solaris, zone

大家好，今天我尝试在 Oracle solaris 11 上创建区域，但是当我使用命令时：

“zoneadm -z testzone install”并得到错误

检查点执行错误：

```
 The following pattern(s) did not match any allowable packages.  Try
            using a different matching pattern, or refreshing publisher information:

                    pkg:///entire@0.5.11,5.11-0.175.0.6.0.6.0:20120410T204143Z 
```

安装失败。请参阅 /system/volatile/install.4373/install_log 的安装日志错误：自动安装失败。

任何人都可以帮助我请...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-28T10:43:07.770

这是 SRU 7 中修复的已知错误： [https ://forums.oracle.com/forums/thread.jspa?threadID=2380689](https://forums.oracle.com/forums/thread.jspa?threadID=2380689)

# c++ - 如果类具有引用数据成员，为什么默认赋值运算符不由编译器综合

> ID：10781130
> 
> 赞同：5
> 
> 时间：2012-05-28T07:51:58.700
> 
> 标签：c++

在 C++ 中，如果类具有引用数据成员，则编译器不会合成默认赋值运算符。为什么？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-28T08:43:49.563

> **在 C++ 中，如果类具有引用数据成员，则编译器不会合成默认赋值运算符。为什么？**

复制分配应该做什么定义在：

**C++03 标准 12.8/13：**

> 每个子对象都以适合其类型的方式分配：
> 
> *   如果子对象是类类型，则使用该类的复制赋值运算符（好像通过显式限定；也就是说，忽略更多派生类中任何可能的虚拟覆盖函数）；
>     
>     
> *   如果子对象是数组，则以适合元素类型的方式分配每个元素；
>     
>     
> *   如果子对象是标量类型，则使用内置赋值运算符。

简而言之，这意味着***每个成员都应该以适当的方式分配，***
这引发了一个问题，
***在课堂上分配参考成员的行为应该是什么？***
考虑以下关于引用的内容：

1.  引用本质上是不可分配的，它们一直引用它们被初始化的同一个引用^([Ref 1])。
2.  由于`#1`分配给引用不会重新分配引用，它会更改引用的值，这是非直观行为。

这里没有要强制执行的默认正确行为，而是一种相当情境的行为。因此，C++ 标准要求类的设计者处于确定这种行为的最佳位置，因此决定默认赋值运算符不应该由编译器合成，如果类有一个引用数据成员。

此决定在：
**C++03 标准 12.8/12 中指定：**

> 当为其类类型的对象分配其类类型的值或从其类类型派生的类类型的值时，隐式声明的复制赋值运算符被隐式定义。如果隐式定义了复制赋值运算符的类具有：
> .......
> — 引用类型的非静态数据成员，或
> .......

* * *

^([参考 1])
**C++03 标准 8.5.3/2：**

> **初始化后不能将引用更改为引用另一个对象**。请注意，引用的初始化与分配给它的处理方式非常不同。参数传递（5.2.2）和函数值返回（6.6.3）是初始化。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-05-28T07:53:29.933

在仅限会员的论坛上看到了讨论。由于大多数程序员都不知道答案，所以想在这里发布答案并分享。

来自 C++ 标准草案 N3337 §12.8.23：

> 如果 X 具有以下条件，则将类 X 的默认复制/移动赋值运算符定义为已删除：
> 
> *   具有非平凡对应赋值运算符且 X 是类联合类的变体成员，或
> *   const 非类类型（或其数组）的非静态数据成员，或
> *   引用类型的非静态数据成员，或
> *   无法复制/移动的类类型 M（或其数组）的非静态数据成员，因为重载决议 (13.3) 应用于 M 的相应赋值运算符会导致歧义或函数从默认赋值运算符，或
> *   无法复制/移动的直接或虚拟基类 B，因为应用于 B 的相应赋值运算符的重载解析 (13.3) 会导致歧义或从默认赋值运算符中删除或无法访问的函数，或
> *   对于移动赋值运算符，非静态数据成员或直接基类，其类型不具有移动赋值运算符且不可平凡复制，或任何直接或间接虚拟基类。

# php - Javascript PHP：Droplist不会根据其选择更改标签

> ID：10781131
> 
> 赞同：2
> 
> 时间：2012-05-28T07:51:59.350
> 
> 标签：php, javascript

我写了以下代码：

```
function chkDiscount()
  {
    $pckg_value = 0;
    plan = document.getElementById("PFirst").value; 
    if (plan === "Year") { 

        document.getElementById("discount").innerHTML = "15% discount";
        <?php
            $pckg_value = ($pckg_cost - 15) * 12; 
        ?>

    }
    if (plan === "HalfYear") { 

        document.getElementById("discount").innerHTML = "10% discount";
        <?php
            $pckg_value = ($pckg_cost - 10) * 6; 
        ?>
    }
    if (plan === "Quarter") { 

        document.getElementById("discount").innerHTML = "5% discount";
        <?php
            $pckg_value = ($pckg_cost - 5) * 3; 
        ?>
    }
  } 
```

我在其余代码中使用 $pckg_value。但它在每个选择中显示相同的值。即总是显示在最后一个 if 块中计算的值。请帮助我在每个选择上显示正确的计算。请帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-28T08:38:23.590

它的编写方式永远不会起作用。无论 JavaScript if 块如何，所有 php 块都会执行，因为 JavaScript 无法控制 php 逻辑。您需要做的是仅使用 JavaScript 设置 $pckg_value 的值，或者将整个内容更改为使用 php 来确定值。

# java - 查看 IntelliJ Idea 中使用的 Java 类的来源

> ID：10781135
> 
> 赞同：14
> 
> 时间：2012-05-28T07:52:11.217
> 
> 标签：java, intellij-idea

在 Visual Studio 开发环境中，当您使用库时，如果您有相关的 pdb，您可以在调试期间挖掘它们的源代码。我想知道当您使用 IntelliJ Idea IDE 在 Java 下开发时，有什么方法可以拥有此功能？我想看看hibernate做什么。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-05-28T08:04:23.683

当然，引用[文档](http://www.jetbrains.com/idea/webhelp/library.html)：

> 库可以选择包含库类的源代码以及相应的 API 文档。[...] 但是，它增加了使用从源代码中提取的内联文档以及直接从 IDE 查看 API 文档的能力。

该文档没有提到您可以调试外部库，这显然也是可能的。

为了添加来源选择：

*   文件 | 项目结构
*   单击库选项卡
*   选择库并单击`+`图标
*   查找包含源的 JAR 文件。

如果您使用[maven](/questions/tagged/maven "显示标记为“maven”的问题")之类的构建工具，IntelliJ 将自动下载可用源并将其附加到所有库，无需手动操作。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2018-01-26T22:15:10.053

就我而言，我必须将 JDK 源文件添加到项目中，如下所示。

转到**项目结构**-> **SDKs** ->**源路径**

使用右侧的加号，并提供 $JAVA_HOME/src.zip 文件的路径。

[![在此处输入图像描述](../Images/a1fda7eb85dc2f755429d9e415cb5541.png)](https://i.stack.imgur.com/4L79a.png)

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2014-10-18T06:07:24.573

`Project Structure`| `Libraries`（或[模块依赖关系](http://www.jetbrains.com/idea/webhelp/configuring-module-dependencies-and-libraries.html)，如果在那里定义了库）：

![项目结构](../Images/56210099f49a36d5f364c58d39b638a0.png)

然后在库选项卡中单击加号：

![图书馆](../Images/12144b72d73bbad6010e607384bf1793.png)

选择来源类型：

![添加来源](../Images/645939371ab0377d7ec1c4aa52f45eff.png)

然后你必须选择源路径并添加想要的库最后点击应用！

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-05-28T08:03:25.680

如果您使用 maven，在 maven 面板上有一个“下载 sourcec”按钮。
如果你不这样做，你需要先获取hibernate的来源，在互联网上搜索。然后附上它们：`File -> Project Structure -> Libraries -> Your hibernate lib -> and attach source`

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2017-03-26T21:14:33.663

# `Go to`➙`Implementation(s)`

没有人建议使用上下文菜单的简单路线：

1.  `import java.util.DesiredClass`
2.  *选择此导入语句*
3.  *右键单击*->**转到**->**实现**

完毕！`DesiredClass`在新选项卡中打开的源代码。

这也适用于代码正文中选定的类名。

[![具有选定类名的代码编辑器的屏幕截图，其上下文菜单项](../Images/58749235c7a185c9cf8d404f53c9221e.png)](https://i.stack.imgur.com/dBTY7.jpg)

# plone - 如何调试 portlet 呈现？

> ID：10781137
> 
> 赞同：3
> 
> 时间：2012-05-28T07:52:36.207
> 
> 标签：plone

我对 ViewPageTemplateFile() 所做的更改没有生效。

尽管 update() 是，但在显示页面时不会调用 render() 方法。

渲染方法的结果是否以某种方式缓存/记忆？

# java - Java中创建对象的方法

> ID：10781138
> 
> 赞同：1
> 
> 时间：2012-05-28T07:52:37.337
> 
> 标签：java

> **可能重复：**
> [在 Java 中创建对象的所有不同方法是什么？](https://stackoverflow.com/questions/95419/what-are-all-the-different-ways-to-create-an-object-in-java)

我在某处遇到过这样的说法，我们可以用 4 种方式在 Java 中创建对象。我熟悉两个。

1.  使用新关键字
2.  使用 newInstance() 方法

另外两个是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-28T07:56:44.853

根据[here](http://javabeanz.wordpress.com/2007/09/13/different-ways-to-create-objects/)，您可以按如下方式创建Java对象：

> *   使用 new 关键字 这是在 java 中创建对象的最常用方法。我在某处读到几乎 99% 的对象都是以这种方式创建的。
> 
> 我的对象对象 = 新的我的对象（）；
> 
> *   使用 Class.forName() 如果我们知道类的名称并且如果它有一个公共的默认构造函数，我们可以用这种方式创建一个对象。
> 
> MyObject 对象 = (MyObject) Class.forName("subin.rnd.MyObject").newInstance();
> 
> *   使用 clone() clone() 可用于创建现有对象的副本。
> 
> MyObject anotherObject = new MyObject(); MyObject 对象 = anotherObject.clone();
> 
> *   使用对象反序列化对象反序列化只不过是从其序列化形式创建一个对象。
> 
> ObjectInputStream inStream = new ObjectInputStream(anInputStream); MyObject 对象 = (MyObject) inStream.readObject();

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-28T07:55:49.093

使用反射，可以调用`instance.forName(String className)`. 还有`instance.clone()`，这是否是真正的初始化还有待商榷。

在阅读了这个主题之后，似乎只有 3 种初始化对象的方法：

> Java 语言具有三种专门用于确保正确初始化对象的机制：实例初始化程序（也称为实例初始化块）、实例变量初始化程序和构造函数。（实例初始化程序和实例变量初始化程序统称为“初始化程序”。）所有这三种机制都会导致 Java 代码在创建对象时自动执行。当您使用 new 运算符或 Class 类的 newInstance() 方法为新对象分配内存时，Java 虚拟机将确保在您可以使用新分配的内存之前运行初始化代码。如果你设计你的类，使得初始化器和构造器总是为新创建的对象产生一个有效的状态，

**参考：**

*   [artima.com](http://www.artima.com/designtechniques/initialization.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-28T07:56:59.177

有两个`newInstance`s：

*   反射`Constructor`：java.lang.reflect.Constructor.newInstance(Object...)
*   与`Class`：java.lang.Class.newInstance()

# wpf - 如何读取 WPF DataGridEditTemplate 中的组合框

> ID：10781144
> 
> 赞同：0
> 
> 时间：2012-05-28T07:53:23.657
> 
> 标签：wpf, data-binding, datagrid, combobox

我必须将项目源绑定到`ComboBox`wpf 中的 at window load 事件`DataGrid` `edititemtemplate`。那么，我怎样才能`ComboBox`从代码中调用它来绑定数据呢？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-27T12:59:01.767

```
comboBox.SelectionChanged += (a, b) =>
{
    comboBox.SelectedValue.ToString();
}; 
```

# string - NHibernate 获取和字符串 ID

> ID：10781147
> 
> 赞同：2
> 
> 时间：2012-05-28T07:53:35.590
> 
> 标签：string, nhibernate, case-sensitive

我有一个在 NHibernate 上分配了字符串 Id 的实体，当通过 Id 获取实体时我有一个小问题。

例子...

假设有这样的数据库记录......

```
Id    Description
-------------------
AAA   MyDescription 
```

现在，如果我使用搜索 ID“aaa”的“Get”方法......

```
MYENTITYTYPE entity = Session.Get<MYENTITYTYPE>("aaa") 
```

返回正确的实体，但 Id 字段（entity.Id）是“aaa”，而我希望它等于“AAA”。

总而言之，我希望“Get”方法返回与存储在数据库中的 id 相同的 id ......在相同的情况下。

有可能吗？我能怎么做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-28T14:00:31.147

有趣的问题。我的猜测是这是不可能的，因为 Id 可能在DB 调用**之前就已经存在。**考虑以下：

```
var foo = session.Load<Foo>("aaa"); //no DB call, foo is a proxy
Console.WriteLine(foo.Id); //Prints "aaa";
var bar = foo.Bar; //Forces loading
Console.WriteLine(foo.Id); //No matter what, the Id can't change at this point 
```

这说明了具有意义的主键通常是一个坏主意的另一个原因，尤其是在它们的输入不受控制的情况下。

现在，如果不`Get`使用查询，您将获得正确大小写的 Id：

```
//example with LINQ; you can use HQL, Criteria, etc
var foo = session.Query<Foo>().Single(x => x.Id == "aaa"); 
```

缺点是你总是会去数据库，即使实体已经加载。

现在，如果您将实体定义为**{Id, Code, Description}**，其中`Id`是合成 POID（我推荐**Hilo**或**Guid**）并且`Code`是现有字符串 Id，您将避免使用`Get`代码而不是查询导致的潜在错误.

# sql - SQL：为每列的记录返回审计

> ID：10781160
> 
> 赞同：0
> 
> 时间：2012-05-28T07:54:23.890
> 
> 标签：sql, sql-server, sql-server-2008

我对表中的记录进行了审核。有多个列，每个记录状态为 1 个或多个列的更改。
我需要返回一个审计结果，其中返回模式将是：（`column`id *、* alias*或*name *）*、以前的值、新值等
。问题在于每个新记录可能有多个列具有更改的数据。同时，可审计列的数量是 5，因此可以“硬编码”那里的名称和更改验证。

那么是否有可能以缩短的方式编写这样的查询，而不仅仅是使用 UNIONS 并对每一列进行 SELECT 查询并检查更改？

假设有一个包含列的表：

```
id, datetime value, int value, varchar value. 
```

如果我有 2 条记录的数据更改如下：

```
id1, value1, value1, value1
id1, value2, value1, value2 
```

那么我期待这样的审计结果：

```
id1, value1 as oldvalue, value2 as newvalue, column2name as columnname
id1, value1 as oldvalue, value2 as newvalue, column4name as columnname 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-28T18:44:43.573

如果我没有错过任何东西：

```
WITH ranked AS (
  SELECT
    ChangeDate,
    ColPK,
    Col1,
    Col2,
    Col3,
    Col4,
    Col5,
    OverallRank = ROW_NUMBER() OVER (PARTITION BY ColPK       ORDER BY ChangeDate),
    Col1Rank    = ROW_NUMBER() OVER (PARTITION BY ColPK, Col1 ORDER BY ChangeDate),
    Col2Rank    = ROW_NUMBER() OVER (PARTITION BY ColPK, Col2 ORDER BY ChangeDate),
    Col3Rank    = ROW_NUMBER() OVER (PARTITION BY ColPK, Col3 ORDER BY ChangeDate),
    Col4Rank    = ROW_NUMBER() OVER (PARTITION BY ColPK, Col4 ORDER BY ChangeDate),
    Col5Rank    = ROW_NUMBER() OVER (PARTITION BY ColPK, Col5 ORDER BY ChangeDate)
  FROM AuditTable
)
, ranked2 AS (
  SELECT
    ChangeDate,
    ColPK,
    Col1,
    Col2,
    Col3,
    Col4,
    Col5,
    Col1Group = RANK() OVER (PARTITION BY ColPK, Col1 ORDER BY OverallRank - Col1Rank),
    Col2Group = RANK() OVER (PARTITION BY ColPK, Col2 ORDER BY OverallRank - Col2Rank),
    Col3Group = RANK() OVER (PARTITION BY ColPK, Col3 ORDER BY OverallRank - Col3Rank),
    Col4Group = RANK() OVER (PARTITION BY ColPK, Col4 ORDER BY OverallRank - Col4Rank),
    Col5Group = RANK() OVER (PARTITION BY ColPK, Col5 ORDER BY OverallRank - Col5Rank),
    Col1Rank = ROW_NUMBER() OVER (PARTITION BY ColPK, Col1, OverallRank - Col1Rank ORDER BY ChangeDate),
    Col2Rank = ROW_NUMBER() OVER (PARTITION BY ColPK, Col2, OverallRank - Col2Rank ORDER BY ChangeDate),
    Col3Rank = ROW_NUMBER() OVER (PARTITION BY ColPK, Col3, OverallRank - Col3Rank ORDER BY ChangeDate),
    Col4Rank = ROW_NUMBER() OVER (PARTITION BY ColPK, Col4, OverallRank - Col4Rank ORDER BY ChangeDate),
    Col5Rank = ROW_NUMBER() OVER (PARTITION BY ColPK, Col5, OverallRank - Col5Rank ORDER BY ChangeDate)
  FROM ranked
),
unpivoted AS (
  SELECT
    r.ChangeTime,
    r.ColPK,
    x.ColName,
    ColRank = CASE x.Colname
      WHEN 'Col1' THEN Col1Group
      WHEN 'Col2' THEN Col2Group
      WHEN 'Col3' THEN Col3Group
      WHEN 'Col4' THEN Col4Group
      WHEN 'Col5' THEN Col5Group
    END,
    Value = CASE x.Colname
      WHEN 'Col1' THEN CONVERT(nvarchar(100), r.Col1)
      WHEN 'Col2' THEN CONVERT(nvarchar(100), r.Col2)
      WHEN 'Col3' THEN CONVERT(nvarchar(100), r.Col3)
      WHEN 'Col4' THEN CONVERT(nvarchar(100), r.Col4)
      WHEN 'Col5' THEN CONVERT(nvarchar(100), r.Col5)
    END
  FROM ranked2 r
    INNER JOIN (VALUES ('Col1'), ('Col2'), ('Col3'), ('Col4'), ('Col5')) x (ColName)
      ON x.ColName = 'Col1' AND Col1Rank = 1
      OR x.ColName = 'Col2' AND Col2Rank = 1
      OR x.ColName = 'Col3' AND Col3Rank = 1
      OR x.ColName = 'Col4' AND Col4Rank = 1
      OR x.ColName = 'Col5' AND Col5Rank = 1
)
SELECT
  new.ChangeTime,
  new.ColPK,
  new.ColName,
  old.Value AS OldValue,
  new.Value AS NewValue
FROM unpivoted new
  LEFT JOIN unpivoted old
    ON new.ColPK   = old.ColPK
   AND new.ColName = old.ColName
   AND new.ColRank = old.ColRank + 1 
```

基本上，这个想法是对相同值的连续组进行排名，并选择每个值的第一次出现。这是针对其值正在被审计的每一列完成的，并且这些列在该过程中是非透视的。之后，未透视的行集与自身连接，即对于每个 PK 和列名，每行都匹配其前任（基于排名）以获得最终结果集的同一行中的旧值。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-26T18:47:33.117

这是一个更简单的查询，它产生相同的期望结果，并且更容易修改以适应不同数量的列或更改列名，因为唯一的区别是 PK 列 + 每个非 PK 单行中的列`CROSS APPLY`。我必须添加一`ChangeDate`列——没有它，就无法知道插入审计表的行的顺序。

```
WITH ColValues AS (
   SELECT
      Grp = Row_Number() OVER (
         PARTITION BY H.OrderID, U.ColName ORDER BY H.ChangeDate ASC, X.Which
      ) / 2,
      H.OrderID,
      H.ChangeDate,
      U.*,
      X.Which
   FROM
      dbo.OrderHistory H
      CROSS APPLY (VALUES
         ('DeliveryDate', Convert(varchar(1000), DeliveryDate, 121)),
         ('Quantity', Convert(varchar(1000), Quantity)),
         ('SpecialNotes', Convert(varchar(1000), SpecialNotes))
      ) U (ColName, Value)
      CROSS JOIN (VALUES (1), (2)) X (Which)
)
SELECT
   V.OrderID,
   V.ColName,
   DateChanged = Max(V.ChangeDate),
   OldValue = Max(F.Value),
   NewValue = Max(T.Value)
FROM
   ColValues V
   OUTER APPLY (SELECT V.ColName, V.Value WHERE V.Which = 2) F
   OUTER APPLY (SELECT V.ColName, V.Value WHERE V.Which = 1) T
GROUP BY
   V.OrderID,
   V.ColName,
   V.Grp
HAVING
   Count(*) = 2
   AND EXISTS (
      SELECT Max(F.Value)
      EXCEPT SELECT Max(T.Value)
   )
; 
```

[在 SQL Fiddle 上查看此查询的实时演示](http://sqlfiddle.com/#!3/26b6b4/2)。

`LEAD`在 SQL 2012 中，使用or`LAG`分析函数可以更好地解决这个问题。`CROSS JOIN`and在我的查询中，`Row_Number`通过复制每一行并将这些复制的行成对分配到它们自己的组中来模拟这一点（其中每个组有两行代表相邻的审计历史记录行）。然后通过策略性地使用聚合，我们可以处理分组对以选择和比较它们的值。

此外，我最初使用 编写查询`UNPIVOT`，但遗憾的是，它不保留 NULL——在我看来，这是 Microsoft 的严重疏忽。如果需要，开发人员可以很容易地添加删除 NULL 的条件，但`UNPIVOT`在希望保留 NULL 时根本无法使用这种方式。具有讽刺意味的是，生成的代码更紧凑，更短 2 行，`CROSS APPLY`用于 UNPIVOT——现在转换和反透视只需一步而不是 2 步。

我的样本数据是：

```
ChangeDate              OrderID DeliveryDate            Quantity SpecialNotes
----------------------- ------- ----------------------- -------- ----------------------------------------------------
2013-03-01 11:28:00.000 1       2013-04-01 00:00:00.000 25       NULL
2013-03-01 11:56:00.000 1       2013-04-01 00:00:00.000 30       NULL
2013-03-05 10:18:00.000 1       2013-04-02 00:00:00.000 30       Customer called to ask for delivery date adjustment.
2013-03-01 11:37:00.000 2       2013-03-05 00:00:00.000 17       NULL 
```

结果行集：

```
OrderID ColName      DateChanged             OldValue                NewValue
------- ------------ ----------------------- ----------------------- ---------------------------------------------------
1       DeliveryDate 2013-03-05 10:18:00.000 2013-04-01 00:00:00.000 2013-04-02 00:00:00.000
1       Quantity     2013-03-01 11:56:00.000 25                      30
1       SpecialNotes 2013-03-05 10:18:00.000 NULL                    Customer called to ask for delivery date adjustment. 
```

注意：由于我的查询只有一个排名函数并且没有`JOIN`s，因此即使在非常大的表中也能表现得非常好——也许比使用`JOIN`没有支持索引的解决方案要好几个数量级。审计表最好在`PK, ChangeDate`.

# javascript - 在除一个元素之外的所有元素上禁用 iPad 触摸和按住功能

> ID：10781163
> 
> 赞同：2
> 
> 时间：2012-05-28T07:54:32.743
> 
> 标签：javascript, ipad, touch, mobile-safari

我希望能够禁用我网站上除一张图像外的所有内容的 iPad 触摸和按住功能。我已经设法使用以下方法对所有图像执行此操作：

event.preventDefault(); event.stopPropagation();

在 touchstart 和 touchmove 事件上，效果很好。但是我无法弄清楚如何为我网站上的特定图像启用此功能。

任何帮助，将不胜感激。

干杯，赫尔穆特

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-31T00:11:08.590

好的，我已经找到了一种方法来做到这一点。基本上我在这些事件语句周围设置了一个条件，如下所示：

```
if (!saveImage)
{
    event.preventDefault();
    event.stopPropagation();
} 
```

我只对那些在 touchstart 事件中调用的函数执行此操作，因为我不需要（或不想）阻止任何其他触摸事件的默认值。然后我需要做的就是适当地设置 saveImage 布尔值，这样只有当我触摸我想要保存的图像时它才是正确的（这非常简单）。

# c - 在 C 函数中分配内存

> ID：10781166
> 
> 赞同：2
> 
> 时间：2012-05-28T07:55:01.703
> 
> 标签：c, memory, memory-management, memory-leaks

它的内存浪费与 cpu 利用率问题。

如果我想合并 3 个字符串：

*   方法1：我应该取所有字符串长度（strlen）然后分配。

    ```
    char *s = malloc(strlen(s1)+strlen(s2)+strlen(s3)+1); 
    ```

或者

*   方法 2：我应该假设`1025`和分配考虑到我知道字符串永远不会超过 1025 的事实。

    ```
    #define MAX 1025
    char *s = malloc(MAX); 
    ```

请建议。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-28T07:59:52.013

为所有 3 个字符串分配内存更好。

但是如果你**100%**（加粗，因为它非常重要）确保字符串永远不会超过固定长度，那么继续。您必须预见将来是否会添加可能超过最大长度的内容，并且您必须考虑用户输入是否会以任何方式超出限制。

如果您可能不需要所有内容，您还可以分配固定缓冲区并截断字符串的其余部分（如果它太长）。

如果字符串有可能变得很长（数百 MB），那么您不应该使用这种方法。在这种情况下，解决方案取决于您的应用程序。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-28T07:57:44.343

您的 malloc 行看起来不错。

假设一个固定长度，您的另一个替代方案的问题是您稍后可能会改变您对固定长度的想法，而无需更改代码中的所有相应问题。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-28T08:01:19.737

> 方法 2：我应该假设 1025 并分配考虑到我知道字符串永远不会超过 1025 的事实。

是的，这绝对是。但你必须**百分百**确定。如果可以，总是更喜欢自动存储分配。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-28T08:06:00.213

坦率地说，如果您要选择 2，那么我建议堆栈分配（而不是 malloc）：

```
#define MAX 1025
char s[MAX]; 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-05-28T08:10:37.620

我假设所有字符串的总和将 <= 1024？

在这种情况下，您最好为 1024 分配内存（方法 2）。您可以反复使用此内存。

你的方法有问题1；您必须根据该特定实例的总数重新分配内存。如果您担心，这将增加您的 CPU 周期。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-05-28T08:13:19.707

如果你真的知道总大小永远不会超过 1025 或类似的相当小的值，如果可能的话，尽量在堆栈上分配字符串。

OTOH，如果你要使用 malloc，你不妨做一些额外的工作来弄清楚你需要预先分配多少。在这种情况下，当您走 strlen() 路线并担心效率时，至少存储 strlen() 调用的结果，并使用 memcpy() 来构建组合结果字符串而不是 str*() 函数。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2012-05-28T08:49:48.030

您需要多久执行一次此操作，一次需要在内存中保存多少个目标字符串？有可能这一切都无关紧要。但是，将其放入`char *my_strconcat3 (const char *s1, const char *s2, const char *s3);`返回新字符串的函数中。然后，如果情况发生变化，您的代码中就只有一个位置需要更改它。

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2012-05-28T08:55:25.023

在C99中，如果字符串不是那么大，我喜欢这个，

```
 len = strlen(s1)+strlen(s2)+strlen(s3)+1;
 char s[len]; 
```

It is called variable-length array in stack which is higher efficiency than malloc who allocates memory from heap.

# iphone - 如何在 IBOutletCollection 中隐藏一堆标签？

> ID：10781167
> 
> 赞同：6
> 
> 时间：2012-05-28T07:55:05.133
> 
> 标签：iphone, objective-c, ios, arrays, iboutletcollection

刚接触 Objective-C 和 iOS 开发，很想在这里帮忙！

我写了一些代码，这样

```
IBOutletCollection(UILabel) NSArray *allLabels; 
```

在 IB 中，我已将视图中的所有标签链接到此集合，我想在特定条件下隐藏它们。但是，我不知道该怎么做。显然是为了隐藏我会使用的单个标签

```
labelX.hidden = YES; 
```

但是，我不适合在没有收藏的情况下执行此操作，因为我有很多标签要隐藏。

提前感谢您的提示！

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-05-28T08:03:18.940

试试这个...

```
[allLabels setValue:@(YES) forKey:@"hidden"]; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-28T08:00:19.797

只需枚举集合并对内容做任何你想做的事情：

```
[allLabels enumerateIndexesUsingBlock:^(UILabel *label, NSUInteger idx, BOOL *stop) {
    label.hidden = YES;
}]; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-09-12T20:55:30.507

数组类型的 Swift 版本：

```
(allLabels as NSArray).setValue(NSNumber(bool: true), forKey: "hidden") 
```

# vsto - VSTO 获取存储

> ID：10781173
> 
> 赞同：2
> 
> 时间：2012-05-28T07:55:25.313
> 
> 标签：vsto, storage, outlook-addin

我正在做一个项目，主要目标是在 Outlook 的日历和我们的应用程序的日历之间进行同步。在我们的应用程序中，我们使用自定义编程语言，并*通过 dispatchId 映射 Outlook 函数*。

我的问题来了。我`StorageItem`在 Outlook 日历中使用来保存一些内部数据，但是当我尝试调用`GetStorage`方法时，它有时会以异常结束。

> **异常消息是“Incorrect function”（从捷克语“Nesprávná funkce”翻译而来）**。

我`GetStorage`在不同的文件夹（日历）中调用不同的数据存储（.pst）。当我尝试`GetStorage`直接从 vsto 插件调用方法时，它每次都有效。但是通过 COM 在我们的应用程序中调用它，这很痛苦。

我无法诱导确切的行为，它看起来像是随机发生的。

**句法：**

```
 oFolder := oNS.GetFolderFromID(OFolderID,''); // ok, folder found
  if oFolder <> nil then begin
    oStorageItem := oFolder.GetStorage('Synchronization.Info', 0); // exception
    if oStorageItem.Size > 0 then
      Result := False;
  end; 
```

**示例情况：**

第一个数据存储：

*   名为“firstCal”的日历
*   名为“secondCal”的日历

第二个数据存储：

*   名为“thirdCal”的日历

调用 getStorage：

1.  调用 firstCal.GetStorage - 异常
2.  调用 secondCal.GetStorage - 好的
3.  调用thirdCal.GetStorage - 好的

..和其他随机组合

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-10T10:54:54.880

[由于这个线程http://www.delphigroups.info/2/11/941254.html](http://www.delphigroups.info/2/11/941254.html)，我终于找到了解决方案。

“Delphi 引发错误，它不是 S_OK (0)，但 VB(Visual Basic) 检查它是否>0（这就是 SUCCEEDED 宏/函数所做的）。”

我们的自定义语言基于 Delphi。GetStorage 函数调用结果为 1，如果调用正常，我们期待 S_OK (0)。

# facebook - 关闭浏览器窗口时 Facebook/gmail 聊天如何工作？

> ID：10781178
> 
> 赞同：1
> 
> 时间：2012-05-28T07:55:49.817
> 
> 标签：facebook, browser, gmail, chat

我想知道当任何用户在没有注销的情况下关闭浏览器时，facebook 聊天是如何工作的。FB 如何知道窗口已关闭并将消息发送到收件箱而不尝试显示 ping？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-28T10:37:28.023

Facebook / GTalk 和任何其他在线聊天客户端通常使用“ping”或检​​查用户是否仍然在线/使用窗口。您可以通过每 1-2 分钟在后台触发一次 Ajax 调用来轻松完成此操作。

每次进行 ajax 调用时，更新`last_seen`数据库中的时间。如果日期/时间超过 1-2 分钟（根据您的 ajax 调用），您就知道用户已关闭浏览器或失去连接。

# jquery - 使 SVG 对象在 jQuery 中可放置

> ID：10781180
> 
> 赞同：3
> 
> 时间：2012-05-28T07:56:04.370
> 
> 标签：jquery, jquery-ui, svg, jquery-svg

我的 Web 应用程序中有一个 SVG 线（路径）对象，并且 div 是可拖动的。

我想将“可拖动” div 拖到 svg 对象中。为此，我必须将 SVG 线（路径）设为可放置。使用以下代码，我可以将 html 内容设置为可拖动/可放置。

```
 $(".path").droppable({
        accept: '.mpath',
        tolerance: 'touch',
        drop: function (event, ui) {
            alert("dropped");
        }
    }); 
```

但请帮助如何使 svg 可拖动或可放置，以便我可以拖放到 svg 路径

谢谢

# jquery - jQuery 登录 $.post

> ID：10781183
> 
> 赞同：2
> 
> 时间：2012-05-28T07:56:26.747
> 
> 标签：jquery, forms, login

我最近接触了 jQuery，这是我第一次使用它，但我已经用它在我的网站上进行了重大改进。（淡入页面、切换等）

所以基本上，我想用它制作一个登录表单，但即使在研究过它之后我也不知道如何使用 $.post 。

```
<form action="" method="post">
 <input type="text" id="username">
 <input type="password" id="password">
 <input type="submit" id="log" value="Log in">
</form> 
```

是的，这就是我现在所处的位置，我想要一个花哨的淡入淡出动画来记录日志。[或至少没有页面加载]

编辑：现在看起来像这样，它正在输出“失败”。即使我输入了正确的组合

```
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript">
$(document).ready(function (){
$("#loginform").submit(function(event) {
        event.preventDefault(); 
        $.post('login.php', function(data) {
            $('body').hide();
        $('body').html(data).show('fast');
    });
});
});
</script>
 </head>
<body>
  <div id="all">
 <form action="" method="post" id="loginform">
  <input type="text" id="username"><br>
  <input type="password" id="password"><br>
  <input type="submit" id="log" value="Log in">
</form>
</div> 
```

登录.php：

```
<?php
 $un = $_POST['username'];
 $pw = $_POST['password'];
 if($un == "huwil" and $pw == "test") {
  echo "logged.";
 } else {
   echo "failed.";
 }
?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-28T08:01:56.757

```
$("#formIdorName").submit(function(event) {
    event.preventDefault(); 
    $.post('url', function(data) { // where `url` is the php page that handles your logic
     $('.result').html(data);// `data` is returned from server
   });
});

<form action="/" id="formIdorName">
 <input type="text" name="login" />
 <input type="submit" value="submit" />
</form>

<div id='result' /> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-28T08:08:24.963

实际上可以在登录后加载页面而无需刷新，但我不确定是否与 cookie 等有关

`$.post`可以通过多种方式调用，在您的情况下，您需要：

```
$.post(url, parameters_to_send_to_server, callback_function) 
```

所以：

```
$.post('login.php', $('#formId').serialize(), function(html) {
    $('body').hide();
    $('body').html(html).show('fast');
}); 
```

`$('#formId').serialize()``form`从id获取所有数据，将其`#formId`打包成一个字符串，然后发送到服务器，因此在您的 php 中，您可以访问它，只要 AJAX 请求完成`$_POST['input_name']`，就会运行。`callback_function`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-28T08:47:21.397

关于即使使用正确的组合它也不起作用：我认为你需要一个 name 属性来 POST: `<input type="password" id="password" name="password">`。

只是您可能会考虑的一件额外的小事：您可以在同一页面上登录。

```
<?php if($_POST) { //if there's incoming POST data
 $un = $_POST['username'];
 $pw = $_POST['password'];
 if($un == "huwil" and $pw == "test") {
  echo "logged.";
 } else {
   echo "failed. <a href='/login.php'>retry</a>.";
 }
} else { //or if there's not
?>
<!--login form-->
<?php } ?> 
```

# javascript - 如何在文本区域中模拟人工插入符号？

> ID：10781185
> 
> 赞同：5
> 
> 时间：2012-05-28T07:56:40.653
> 
> 标签：javascript, jquery, textarea, caret

我想做的是类似于协作编辑器的工作方式。我想让两个人编辑同一个文档。为此，我必须模拟一个人工插入符号。我可以在文本区域的指定位置提取其他用户的添加和删除活动。

然后，我会将位置连同操作一起传输到另一个文档。我需要在发送的坐标处进行所需的更改。我已经搜索并找到了足够的方法来设置插入符号位置并在当前插入符号位置插入或删除文本，但问题是文档的插入符号移动到我进行更改的位置。

我不希望这样，我想要两个插入符号，两个用户各一个。将它们的更改传输到其他文档并在各自的位置进行更改，同时显示两个不同的插入符号。

我只需要知道我是否可以使用某些库，或者即使我必须自己制作它，那么我应该如何以及从哪里开始。我什至不知道 textarea 在浏览器中是如何表示的。如果我知道，我如何表征文本区域中的位置，然后我将位置保存在内存中并根据接收到的输入进行更改。

我希望我有道理，感谢您的帮助。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-19T06:27:34.667

你见过这个吗？

[https://github.com/benjamn/kix-standalone/](https://github.com/benjamn/kix-standalone/)

这就是谷歌文档的做法：

[https://drive.googleblog.com/2010/05/whats-different-about-new-google-docs.html](https://drive.googleblog.com/2010/05/whats-different-about-new-google-docs.html)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-20T15:45:14.857

您可以模仿具有特殊字符的插入符号并执行正则表达式来插入伙伴文本并移动他的插入符号，您可以使用真实的插入符号。这是我能想到的最简单的设计。为了得到这个想法，您可以将管道`|`用作人工插入符号。但这很容易与用户插入管道发生冲突，为避免这种情况，您可以使用某种不常见的组合，或者找到一些 unicode 字符作为插入符号。

一个真正的解决方案但更复杂的是不使用文本区域，而是使用 DIV。这意味着您需要处理所有按键事件并将手动按下的字符插入到文档中，并注册光标位置。但是通过这种方式，您可以插入您想要的插入符号数量，而不仅仅是 2 个，类似这样的东西，`<span class="caret1"></span>`您可以让它闪烁，使用 css 设置样式，为每个插入符号设置不同的颜色，等等。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-07-05T14:32:17.527

您是否尝试过来自 facebook 的 Draft.js？[https://facebook.github.io/draft-js/](https://facebook.github.io/draft-js/)

“Draft.js 是一个在 React 中构建富文本编辑器的框架，由一个不可变的模型提供支持，并抽象了跨浏览器的差异。

Draft.js 可以轻松构建任何类型的富文本输入，无论您只是希望支持一些内联文本样式，还是构建复杂的文本编辑器来撰写长篇文章。

在 Draft.js 中，一切都是可定制的——我们提供构建块，以便您完全控制用户界面。”

# node.js - expressjs 从子域中删除 cookie

> ID：10781187
> 
> 赞同：2
> 
> 时间：2012-05-28T07:56:45.510
> 
> 标签：node.js, express, session-cookies, connect

我通过子域在我的应用程序上提供所有静态内容。

但是，我的快速应用程序仍在静态内容上设置会话 cookie。我尝试按照文档设置这样的路径：

```
app.use(express.session({
    secret: 'your app secret',
    cookie: {
        domain : '.yourdomain.com'
    },
    store: new MongoStore({
        db: 'db',
        host: 'localhost',
        port:config.dbPort
    })
})); 
```

但它仍然对我不起作用。我也尝试使用 'path' ：

```
cookie: {
   path : '.yourdomain.com'
} 
```

但即使这样也不能阻止在静态内容上设置 cookie。

关于如何从所有静态内容中删除 cookie 的任何想法？

**更新：**

```
Request Headers
    Accept:text/css,*/*;q=0.1
    Accept-Charset:ISO-8859-1,utf-8;q=0.7,*;q=0.3
    Accept-Encoding:gzip,deflate,sdch
    Accept-Language:en-US,en;q=0.8
    Connection:keep-alive
    Host:cdn.yourdomain.com
    Referer:http://localhost:8888/
    User-Agent:Mozilla/5.0 (Macintosh; Intel Mac OS X 10_7_4) AppleWebKit/536.5 (KHTML, like Gecko) Chrome/19.0.1084.52 Safari/536.5

Response Headers
    Cache-Control:public, max-age=86400
    Connection:keep-alive
    Content-Encoding:gzip
    Content-Type:text/css; charset=UTF-8
    Date:Mon, 28 May 2012 09:02:09 GMT
    Last-Modified:Tue, 01 May 2012 03:57:45 GMT
    Server:nginx
    Set-Cookie:connect.sid=d9nEPGiAeSwGFUN2Ra8CGBmq.tPdTQdk7O2UUvO2q%2BEOG2%2Fgh%2FNEdIxtUZYdUN%2FtDmas; domain=www.yourdomain.com; path=/; expires=Mon, 28 May 2012 13:02:08 GMT; httpOnly
    Transfer-Encoding:chunked
    X-Cache:MISS
    X-Edge-Id:353260802 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-28T22:28:14.603

连接会话中间件以这种方式工作。无论当前主机如何，都会设置 Cookie。从性能的角度来看，这很好，但本质上会导致这样的问题。

我看到这个问题的两个解决方案：

*   使用[Connect 的 Vhost](http://www.senchalabs.org/connect/vhost.html)中间件。IMO，这是最直接的解决方案。只需创建一个单独的应用程序，`cdn.yourdomain.com`而不包括它的会话中间件。

*   围绕会话中间件创建一个包装器，以便仅将其包含在具有正确主机的请求中。这是一个非常奇怪的解决方案，并且会干扰其他中间件，例如 CSRF。

无论如何，我会说使用 Node.js 提供静态资产可能看起来很奇怪。为此，像 Nginx 这样的 Web 服务器在性能和轻便性方面是无与伦比的。理想情况下，静态请求的请求甚至不应该到达 Node.js。

--

仅供参考，第二种解决方案的代码可能如下所示（未经测试）：

```
function hostAwareSessionMiddleware(options) {
  var originalMiddleware = express.session(options);
  if(!options.cookie || !options.cookie.domain) return originalMiddleware;
  var domain = options.cookie.domain;
  if(domain[0] === '.') domain = '(.+)\.' + domain.slice(1);
  var regex = new RegExp('^' + domain.replace('.', '\\.') + '$', 'i');
  return function(req, res, next) {
    if(!req.headers.host) return next();
    if(req.headers.host.match(regex)) {
      return originalMiddleware(req, res, next);
    }
    next();
  }
}

app.use(hostAwareSessionMiddleware({
  secret: 'your app secret',
  cookie: {
    domain : 'yourdomain.com'
  },
  store: new MongoStore({
    db: 'db',
    host: 'localhost',
    port:config.dbPort
  }
})); 
```

# android - 如何在 Android 中合并音频和视频文件

> ID：10781189
> 
> 赞同：7
> 
> 时间：2012-05-28T07:56:52.640
> 
> 标签：android, video, video-capture, video-processing

我有一个小视频剪辑和一个音频文件。问题是如何编写代码将它们合并到一个文件中。我从未为 android 的多媒体应用程序编写代码，也不知道是否可以与 android 媒体框架合并。有没有第三方图书馆可以做到这一点？

我们可以在 Java 中纠正合并代码并在 Android 中调用它吗？

请指导我完成这个。谢谢

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2015-01-20T16:00:52.300

你可以试试INDE Media for Mobile，教程在这里：[https ://software.intel.com/en-us/articles/intel-inde-media-pack-for-android-tutorials](https://software.intel.com/en-us/articles/intel-inde-media-pack-for-android-tutorials)

它有一个示例演示如何用另一个 mp4 文件中的另一个音轨替换 mp4 视频文件中的音轨。它在这里： [https ://github.com/INDExOS/media-for-mobile/blob/master/Android/samples/effects/src/com/intel/inde/mp/effects/SubstituteAudioEffect.java](https://github.com/INDExOS/media-for-mobile/blob/master/Android/samples/effects/src/com/intel/inde/mp/effects/SubstituteAudioEffect.java)

在示例应用程序中，它位于音频效果下：

![在此处输入图像描述](../Images/8e2b82ddfb5f2b532c7967e87fe5367e.png)

# javascript - 是否可以使用 JQuery 或其他方法在两个浏览器窗口之间拖放一些内容？

> ID：10781194
> 
> 赞同：10
> 
> 时间：2012-05-28T07:57:23.533
> 
> 标签：javascript, jquery, drag-and-drop, jquery-ui-draggable

基本上，我有一个弹出窗口，我希望能够将 html 项目拖放回父打开器窗口。例如，如果弹出窗口上有一个可拖动的图像（基本上只是一个处理程序），一旦我将它放在父窗口的放置区中，我只需要复制一个隐藏的 ID 和/或可能的名称从弹出窗口到父窗口的图像。

我可以在同一页面拖放但跨窗口看到很多示例？是否可以？这两个窗口都打开了相同的网站，所以我想不应该有任何跨站点问题吗？

你能指出我正确的方向吗？有什么不清楚的请追问。

**编辑**

HTML5 是一种选择吗？

**另一个编辑**

有没有其他方法可以实现上述目标？即与拖放不同的方法 - 我有兴趣在这里将一些数据在一个窗口之间传输到另一个窗口。任何想法将不胜感激。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-06-13T01:26:44.810

您正在使用 HTML5 拖放 API

一个很好的描述：[DnD 基础](http://www.html5rocks.com/en/tutorials/dnd/basics/)

您甚至可以在 Firefox 和 Chrome 之间拖放内容。Safari 缺少 drop 事件，应该会在下一个版本中发布（如果我是对的，则为 6）。Opera & IE 还不支持它。

# batch-file - 如何编写bat文件来处理所有包含子目录的文件，并将它们以相同的目录结构输出到另一个目录？

> ID：10781197
> 
> 赞同：0
> 
> 时间：2012-05-28T07:57:29.617
> 
> 标签：batch-file

我有一个bat文件来处理一个目录下的所有文件，并输出到另一个目录

这是bat文件中的代码

```
@set dir1=mulit-simp\
@set dir2=mulit-trad\
@cd /d %~dp0
@if not exist %dir1% md %dir1%
@if not exist %dir2% md %dir2%
@for /f "delims=" %%i in ('dir %dir1%*.* /b') do @opencc.exe --input="%dir1%%%i" --output="%dir2%%%i"
@echo.
@echo Done!
@echo.
@pause 
```

但是这段代码无法处理子目录中的文件如何处理子目录文件，并将它们以相同的目录结构输出到另一个目录？谢谢帮助:)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-28T11:35:21.140

该`DIR /S`选项将为您提供整个文件夹层次结构。而且您还希望`/A-D`选择从输出中抑制文件夹。键入`HELP DIR`或`DIR /?`了解更多信息。

但是，我建议不要使用`FOR /F`with ，而是使用. 键入或了解更多信息。另请参阅[http://judago.webs.com/batchforloops.htm](http://judago.webs.com/batchforloops.htm)以更容易理解该命令的解释。`DIR``FOR /R``HELP FOR``FOR /?``FOR`

无论哪种方式，您还需要创建所有目标文件夹。最简单的方法是`XCOPY /T /E`在处理文件之前使用创建目标文件夹。

一些额外的提示：

*   只需放在`@echo off`顶部，而不是在每个命令前面加上`@`
*   `ECHO.`已被广泛使用多年，但实际上可能无法正常工作。使用起来更安全`ECHO(`。
*   您可能不希望您定义的环境变量在批处理完成后一直存在。放在`SETLOCAL`顶部将使变量成为临时变量，并且它们只会在批处理文件完成或`ENDLOCAL`执行之前存在。鉴于您`PAUSE`最后使用的是，我怀疑您是通过双击文件或快捷方式来运行批处理文件。如果是这样，那么命令窗口最后会关闭，变量也会随之消失。然后`SETLOCAL`不需要，但无论如何它仍然可能是一个好习惯。

这是包含所有建议的完成代码。*编辑 - 原始代码不起作用。更改以解决 tiance 的评论*

```
@echo off
setlocal
set dir1=mulit-simp
set dir2=mulit-trad
cd "%~dp0"

:: Replicate tree
if not exist "%dir1%" md "%dir1%"
if not exist "%dir2%" md "%dir2%"
xcopy /t /e "%dir1%" "%dir2%"

:: Get length of absolute path of %dir1%
<nul set /p "=%cd%\%dir1%" >getLength.tmp
for %%F in (getLength.tmp) do set len=%%~zF
del getLength.tmp

:: Process the files
for /r "%dir1%" %%F in (*) do (
  set "src=%%F"
  setlocal enableDelayedExpansion
  opencc.exe --input="!src!" --output="%dir2%!src:~%len%!"
  endlocal
)
echo(
echo Done!
echo(
pause 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-28T08:13:14.487

你试过`XCOPY sourcefolder destinationfolder /E`吗？

# python - 告诉模块首先由模块本身导入？

> ID：10781201
> 
> 赞同：0
> 
> 时间：2012-05-28T07:57:44.710
> 
> 标签：python, import, module

我为我的游戏添加了对模组的支持。任何放在特定文件夹中的 Python 模块都会在启动时自动导入。一切都很好，除了现在我编写了一个官方模组，它允许模组制作者轻松地将其模组的 GUI 设置添加到单个可切换的 GUI 框架中。他们不是被迫使用它，但它极大地简化了使用辅助功能添加 GUI 设置，并使玩家的事情更有条理和更简单。

问题是因为它本身就是一个 mod，它在启动时与其余的 mods（Python 模块）一起导入，所以如果有另一个 mod 的名字在它之前，它就不能使用我的 mod。我知道我可以在我的模块名称中添加“0_”或其他内容，但这不是很干净，而且你不能确定有人不会这样命名他自己的模块的模块。

所以我想知道是否有任何方法可以告诉 Python 首先导入模块，通过在模块本身内部指定它？我很确定没有，但谁知道呢？

我想到的一个解决方案是创建一个子文件夹，首先搜索模块。

另一个可能是将mod的代码与游戏的代码合并。不想这样做，以免给人的印象是这是添加 mod 设置的唯一方法。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-28T08:00:18.833

为什么不列出您需要加载的所有“系统”模块，这些模块将首先导入，然后再查找所有模块的子文件夹并导入这些模块？

这样，您仍然可以维护您的基本系统，然后才加载后续用户模块。

# iphone - 如何在 iOS 中卸载我们的应用时收到通知

> ID：10781203
> 
> 赞同：3
> 
> 时间：2012-05-28T07:57:48.977
> 
> 标签：iphone, ios, push, apple-push-notifications, feedback

我们正在开发一个 iPhone 应用程序，允许用户在目标用户安装我们的应用程序时通过 Apple 推送通知服务向其他人发送消息，或者在没有安装我们的应用程序时发送短信。

我们希望在我们的应用程序被卸载时立即得到通知，以便我们可以决定如何将消息发送给目标用户。

我们发现 APNS 反馈服务器有很长的延迟，不符合我们的要求。所以我们用另一种方式：当我们的服务器记录目标用户安装了我们的应用时，我们通过APNS给他发送消息，如果他30分钟内没有看到消息，我们认为他已经卸载了应用，所以我们发送通过短信。

有没有更好的办法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-25T13:20:53.623

正如 Oleg 所说，没有办法准确检测您的应用程序是否被卸载。

APNS 反馈服务为其无法传递的消息返回时间戳和推送令牌。有时，这表示卸载，但它也可以简单地表示当时只是离线的用户。反馈服务确实有一些滞后，因此不能用于时间敏感的情报收集。

根据您的要求，我会说您做得对。

一个可能对您有用也可能无效的建议是，当您求助于发送 SMS 时，包括一个链接（通过 url 处理程序）到您的应用程序。如果用户返回到您的应用程序是有意义的，则单击该链接应该会启动应用程序，并且如果您进行简单的调用，您将在服务器上获得跟踪。但是，如果在发送 SMS 后未检测到用户返回应用程序，则很有可能应用程序确实已被卸载，或者用户离线时间异常长，这可能需要其他类型的你的行动。

# c# - 显示弹出式表单时如何禁用表单？

> ID：10781204
> 
> 赞同：0
> 
> 时间：2012-05-28T07:58:01.920
> 
> 标签：c#, winforms, popup, focus

我有一个“主要”形式（`form1`）。在该表单中，我成功打开了另一个表单 ( `form2`) - 但是 - 当该表单打开时，您仍然可以控制基础表单 ( `form1`)。

我不希望用户能够这样做，并且每当他尝试单击它或其他东西时，弹出的表单 ( `form2`) 应该获得一点焦点/闪烁，并带有一些默认的 Windows 声音。我刚刚描述了如果弹出窗口是 FileSave/OpenDialog 它是如何工作的。这些对话框完全按照我希望的方式工作。

我试过设置`form2.Owner = form1;`，但没有产生预期的效果。

所以我的问题基本上是：我怎样才能获得相同的焦点/等效果。在表单上 - 在 Save/OpenDialog 上是怎样的？

谢谢，

〜Tgys

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-28T08:00:22.250

打开`form2`使用[`form2.ShowDialog()`](http://msdn.microsoft.com/en-us/library/c7ykbedk.aspx)

在`form1`课堂上

```
form2 form2Object = new form2();
form2.ShowDialog(this); 
```

这样，form1 将保留在后台并且不可点击，直到显示 form2。如果需要，您还可以从 form2 返回对话框结果。来自 MSDN 的代码。

```
 Form2 testDialog = new Form2();

   // Show testDialog as a modal dialog and determine if DialogResult = OK.
   if (testDialog.ShowDialog(this) == DialogResult.OK)
   {
      // Read the contents of testDialog's TextBox.
      this.txtResult.Text = testDialog.TextBox1.Text;
   }
   else
   {
      this.txtResult.Text = "Cancelled";
   } 
```

# java - 低频率的 Android 4.x 蓝牙问题。耳机配置文件已更改！为什么？

> ID：10781205
> 
> 赞同：2
> 
> 时间：2012-05-28T07:58:10.083
> 
> 标签：java, android, bluetooth, headset

我们正在使用从 HFP BT 点获取低频音频信号的应用程序。我们使用了运行良好的 Android 版本 3.xx。BT点被定义为耳机点当我们将android版本升级到4.xx时，BT点被定义为音频电话，低频被切断。无论如何，我们没有找到将 BT 点定义为耳机。

1.  有没有办法在 android 4.xx 中将 BT 点定义为耳机
2.  我们可以将 Android 3.xx BT 堆栈上传到 android 4.xx

谢谢

# javascript - 如何在不调整大小的情况下调整页面大小？

> ID：10781209
> 
> 赞同：0
> 
> 时间：2012-05-28T07:58:16.933
> 
> 标签：javascript, dom-events, amcharts

如何在不调整大小的情况下调整页面大小？

我有一个 Javascript，它运行以从文本文件中获取数据，然后在 Amcharts 上绘制图表。问题是图表的某些轴组件在首次绘制时丢失，并且在我尝试刷新 (F5) 时仍然丢失。

当我调整浏览器的大小时，丢失的组件都会出现，所以我想知道调整大小的作用是什么，以及在绘制图表后如何在没有实际调整大小的情况下模拟调整大小？

源代码的完整 html 版本就在这里。

```
<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01//EN" "http://www.w3.org/TR/html4/strict.dtd">
<html>
    <head>
        <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
        <title>amCharts Example</title> 
        <link rel="stylesheet" href="style.css" type="text/css">
        <script src="javascript/amcharts.js" type="text/javascript"></script>

        <script type="text/javascript">

        var chart;
            var chartData = [];

        // declaring variables
        var dataProvider;

        // this method called after all page contents are loaded
    var srcFrame;
    window.onload = function() {
        //generateChartData();
        //createChart();
        loadOuter('data.txt');
        //loadOuter('Test.txt');
        //loadCSV('data.txt');
        }

    //External content into a layer
    function loadOuter(doc) {
     srcFrame = document.getElementById("hiddenContent");
     srcFrame.src = doc;
    // workaround for missing onLoad event in IFRAME for NN6
    if (!srcFrame.onload) {

        if (srcFrame.contentDocument){
            srcContent=srcFrame.contentDocument.getElementsByTagName("BODY")[0].innerHTML;
        }
        else if (srcFrame.contentWindow){
            srcContent=srcFrame.contentWindow.document.body.innerHTML;
        }
        srcContent = srcContent.substring(5,srcContent.length-6)
        parseCSV(srcContent);
        //setTimeout("transferHTML()", 1000)
        }
}

        function parseCSV(data){ 
            //replace UNIX new lines
            data = data.replace (/\r\n/g, "\n");
            //replace MAC new lines
            data = data.replace (/\r/g, "\n");
            //split into rows
            var rows = data.split("\n");
            // create array which will hold our data:
            dataProvider = [];

            // loop through all rows
            for (var i = 0; i < rows.length; i++){
                // this line helps to skip empty rows
                if (rows[i]) {                    
                    // our columns are separated by comma
                    var column = rows[i].split(",");  

                    // column is array now 
                    // first item is date
                    var date = column[0];
                var myDate= new Date();
                var dateparse = date.split("-");
                myDate.setFullYear(dateparse[0],dateparse[1],dateparse[2]);
                //alert(myDate);
                    // second item is value of the second column
                    var value1 = column[1];
                    // third item is value of the fird column 
                    var value2 = column[2];

                    // create object which contains all these items:
            chartData.push({
                        date: myDate,
                        visits: value1,
                        hits: value2,
            });
            //var dataObject = {date:date, value1:value1, value2:value2};
                    // add object to dataProvider array
                    //dataProvider.push(dataObject);
                }
            }
            // set data provider to the chart
            chart.dataProvider = chartData;
            // this will force chart to rebuild using new data            
            chart.validateData();

        }

            // generate some random data, quite different range
            function generateChartData() {
                var firstDate = new Date();
                firstDate.setDate(firstDate.getDate() - 50);
            //alert(firstDate);
            //alert(firstDate.getDate());

                for (var i = 0; i < 50; i++) {
                    var newDate = new Date(firstDate);
                    newDate.setDate(newDate.getDate() + i);
                //alert(newDate);
                    var visits = Math.round(Math.random() * 40) + 100;
                    var hits = Math.round(Math.random() * 80) + 500;

                    chartData.push({
                        date: newDate,
                        visits: visits,
                        hits: hits,
                    });
                }
            }

            //function createChart(){
        AmCharts.ready(function () {
            //loadOuter('data.txt');
            // generate some random data first
                //generateChartData();

                // SERIAL CHART    
                chart = new AmCharts.AmSerialChart();
                chart.pathToImages = "amcharts/images/";
                chart.zoomOutButton = {
                    backgroundColor: '#000000',
                    backgroundAlpha: 0.15
                };
                chart.dataProvider = chartData;
                chart.categoryField = "date";

                // listen for "dataUpdated" event (fired when chart is inited) and call zoomChart method when it happens
                chart.addListener("dataUpdated", zoomChart);

                // AXES
                // category                
                var categoryAxis = chart.categoryAxis;
                categoryAxis.parseDates = true; // as our data is date-based, we set parseDates to true
                categoryAxis.minPeriod = "DD"; // our data is daily, so we set minPeriod to DD
                categoryAxis.dashLength = 2;
                categoryAxis.gridAlpha = 0.15;
                categoryAxis.axisColor = "#DADADA";

                // first value axis (on the left)
                var valueAxis1 = new AmCharts.ValueAxis();
                valueAxis1.axisColor = "#FF6600";
                valueAxis1.axisThickness = 2;
                valueAxis1.gridAlpha = 0;
                chart.addValueAxis(valueAxis1);

                // second value axis (on the right) 
                var valueAxis2 = new AmCharts.ValueAxis();
                valueAxis2.position = "right"; // this line makes the axis to appear on the right
                valueAxis2.axisColor = "#FCD202";
                valueAxis2.gridAlpha = 0;
                valueAxis2.axisThickness = 2;
                chart.addValueAxis(valueAxis2);

                // GRAPHS
                // first graph
                var graph1 = new AmCharts.AmGraph();
                graph1.valueAxis = valueAxis1; // we have to indicate which value axis should be used
                graph1.title = "red line";
                graph1.valueField = "visits";
                graph1.bullet = "round";
                graph1.hideBulletsCount = 30;
                chart.addGraph(graph1);

                // second graph                
                var graph2 = new AmCharts.AmGraph();
                graph2.valueAxis = valueAxis2; // we have to indicate which value axis should be used
                graph2.title = "yellow line";
                graph2.valueField = "hits";
                graph2.bullet = "square";
                graph2.hideBulletsCount = 30;
                chart.addGraph(graph2);

                // CURSOR
                var chartCursor = new AmCharts.ChartCursor();
                chartCursor.cursorPosition = "mouse";
                chart.addChartCursor(chartCursor);

                // SCROLLBAR
                var chartScrollbar = new AmCharts.ChartScrollbar();
                chart.addChartScrollbar(chartScrollbar);

                // LEGEND
                var legend = new AmCharts.AmLegend();
                legend.marginLeft = 110;
                chart.addLegend(legend);

                // WRITE
                chart.write("chartdiv");
            });

        // this method is called when chart is first inited as we listen for "dataUpdated" event
            function zoomChart() {
                // different zoom methods can be used - zoomToIndexes, zoomToDates, zoomToCategoryValues
                chart.zoomToIndexes(10, 20);
            //chart.validateData();
            //createChart();
            }

</script>

<div id="outerDisplay"></div>

<iframe  id="hiddenContent" width="200" height="200" style="position:absolute;visibility:hidden;" ></iframe>
<div id="chartdiv" style="width:600px; height:400px; background-color:#FFFFFF"></div>
</body>

</html> 
```

任何人都知道如何对其进行故障排除以使其在第一次加载时显示，而不必调整它的大小？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-08T12:57:45.817

你试过打电话`chart.validateNow()`吗？请参阅[Amcharts 参考资料](http://amcharts.com/docs/v.2/javascript_reference/amchart)。

图表将被重新绘制，在属性更改时很有用。

# android - android 似乎不支持 syscall,open()

> ID：10781210
> 
> 赞同：-2
> 
> 时间：2012-05-28T07:58:20.083
> 
> 标签：android, linux, android-ndk, linux-kernel

android是一种linux，它必须支持posix。但是，当它似乎不支持系统调用时，open()。这是测试代码，我通过NDK编译它：

```
#include <unistd.h>
#include <stdio.h>
#include<sys/types.h>
#include<sys/stat.h>
#include<fcntl.h>

void main(){
    int fd;
    char pathname[128] = "/data/pwrite.txt";
    fd = open(pathname, O_WRONLY);
    if(fd==-1){
        printf("open fail.\n");

    }
    perror("/data/pwrite.txt");
} 
```

以下是来自android的提示：

```
kaiwii@ubuntu:~$ adb shell /data/pwrite/test1
open fail.
/data/pwrite.txt: No such file or directory 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-28T08:01:08.943

我认为问题不`syscall open()`在于您试图访问`/data`. 此文件夹仅适用于有根手机或模拟器。您是否尝试将文件放入`/sdcard`文件夹中？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-28T08:21:56.320

我认为问题在于标志 - 你只使用`O_WRONLY`. 但是如果一个文件不存在，你也应该使用`O_CREAT`标志创建它。因此，如果文件不存在，您应该调用：

```
fd = open(pathname, O_WRONLY | O_CREAT); 
```

# c# - StartsWith 和数组在空白处无法正常工作

> ID：10781215
> 
> 赞同：0
> 
> 时间：2012-05-28T07:58:48.787
> 
> 标签：c#

```
_comboBoxItems array

    [0] = "01 01010304"
    [0] = "01 01230304"
    [0] = "01 01010784"
    [0] = "01 01135404"

typedSoFar = "010"

    if (_comboBoxItems[i].StartsWith(typedSoFar, StringComparison.CurrentCultureIgnoreCase))
    {
        match = _comboBoxItems[i];

        break;
    } 
```

但如果永远不是真的。为什么？例如，010 是 01 01010304 的一部分。可能是问题 StringComparison.CurrentCultureIgnoreCase？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-28T08:03:26.600

这绝不是真的，因为您的元素都不是以 010 开头的。StartsWith() 只查看从索引 0 开始的子字符串。

您应该使用 String.Contains() 代替。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-28T08:02:24.573

使用startswith()，它将总是匹配字符串输入的开始。使用 Contains() 在字符串输入中的任何位置搜索和匹配子字符串

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-28T08:17:48.460

如果您确实希望`typedSoFar`匹配没有空格的字符串的开头，请使用以下命令：

```
if (_comboBoxItems[i].StartsWith(typedSoFar.Trim())
{
    match = _comboBoxItems[i];
} 
```

以上将匹配 this`01 01010304`但不匹配 this `01 11010304`。

如果您希望 the`typedSoFar`成为字符串的一部分，请使用：

```
if (_comboBoxItems[i].Contains(typedSoFar)
{
    match = _comboBoxItems[i];
} 
```

*在你的情况下，我没有看到使用`StringComparison.CurrentCultureIgnoreCase`

# android - Android自定义View（TextView+Button+一些自定义行为）？

> ID：10781218
> 
> 赞同：3
> 
> 时间：2012-05-28T07:59:02.453
> 
> 标签：android, button, view, textview

这应该很容易做到，但不知何故，经过大约 15 分钟的搜索，我仍然无法得到答案：

我想制作一个结合 TextView 和 Button 的自定义 Android 视图，以及一些自定义的行为/方法，假设当我单击按钮时，它应该将 TextView 更改为“Hello，world！”。

我知道我必须扩展 View 类，并在 XML 中设计布局，然后做一些魔术来链接两者。你能告诉我魔法是什么吗？我知道如何在 Activity 中执行此操作，但在自定义视图中不知道。

**编辑** 好的，所以我发现我需要使用 Inflater 来使用布局中定义的子视图来膨胀我的类。这是我得到的：

```
public class MyView extends View  {

private TextView text;
private Button button;

public MyView(Context context, AttributeSet attrs) {
    super(context, attrs);
    View.inflate(context, R.layout.myview, null);
}

@Override
protected void onFinishInflate() {
    super.onFinishInflate();
    text = (TextView) findViewById(R.id.text);
    button = (Button) findViewById(R.id.button);
}
} 
```

但是，`text`和`button`子视图为空。任何想法？（XML 非常简单，没有任何花哨的编辑，我只是​​从 Eclipse 工具栏中抓取了一个 TextView 和一个 Button 并投入其中。）

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-28T10:24:14.490

好的，所以我自己的问题的答案是：（i）去吃饭，（ii）扩展`LinearLayout`而不是`View`，这使它成为 a `ViewGroup`，因此可以传递给`inflate(...)`方法，但不必重写`onLayout(...)`方法。更新后的代码将是：

```
public class MyView extends LinearLayout  {
    private TextView text;
    private Button button;

    public MyView(Context context, AttributeSet attrs) {
        super(context, attrs);
        View.inflate(context, R.layout.myview, this);
    }

    @Override
    protected void onFinishInflate() {
        super.onFinishInflate();
        text = (TextView) findViewById(R.id.text);
        button = (Button) findViewById(R.id.button);
    }
} 
```

# c# - 在jquery中获取错误作为非法调用

> ID：10781223
> 
> 赞同：0
> 
> 时间：2012-05-28T07:59:46.267
> 
> 标签：c#, javascript, jquery, ajax

我是 jquery 的新手，我显然正在尝试使用 ajax 和 jquery 从 javascript 调用 c-sharp 函数，并且我还想在调用 c-sharp 函数时传递一些参数..这就是我尝试做同样的事情：

```
var _data = {

    '_mStart': document.getElementById("St_Period"),
    '_mEnd': document.getElementById("En_Period")
};

$.ajax({
    type: "POST",
    url: "maps.aspx/myFunc",
    data: _data,
    contentType: "application/json; charset=utf-8",
    dataType: "json",
    success: function(msg) {
        alert("success!")
    }

});​ 
```

这是我在 aspx.cs 中的 webmethod

```
 [WebMethod]
    public static void myFunc(DateTime? _mStart, DateTime? _mEnd)
    {

        try
        {
            //string st = St_Period.Value.ToString();
            //string end = En_Period.Value.ToString();
            SqlConnection con=new SqlConnection("server=SWAPPS_LAP\\SQLEXPRESS;Initial Catalog=moogle;Integrated Security=True;MultipleActiveresultSets=true");
            SqlCommand cmd = new SqlCommand();
            con.Open();
            cmd = new SqlCommand("insert into MEDIA_BOOKING(ST_PERIOD,END_PERIOD,ENTERED_BY,ENTERED_ON) values(@st,@end,@by,@on)", con);
            cmd.Parameters.AddWithValue("@st", _mStart);
            cmd.Parameters.AddWithValue("@end", _mEnd);
            //cmd.Parameters.AddWithValue("@by", Session["login"].ToString());
            cmd.Parameters.AddWithValue("@on", DateTime.Now);
            cmd.ExecuteNonQuery();
            con.Close();
        }
        catch (Exception ex)
        {
            throw ex;
        }
    } 
```

当我运行代码时，出现如下错误：

```
Uncaught TypeError: Illegal invocation jquery.js:7601
jQuery.extend.param.add jquery.js:7601
buildParams jquery.js:7658
buildParams jquery.js:7653
buildParams jquery.js:7653
jQuery.extend.param jquery.js:7621
jQuery.extend.ajax jquery.js:7467
savebook maps.aspx:398
onclick 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-28T08:02:34.650

您需要传递元素值而不是 DOM 元素。

```
var _data = {
    '_mStart': document.getElementById("St_Period").value,
    '_mEnd': document.getElementById("En_Period").value
};​ 
```

**代替：**

```
var _data = {
    '_mStart': document.getElementById("St_Period"),
    '_mEnd': document.getElementById("En_Period")
};​ 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-28T08:03:32.927

假设`St_Period`and`En_Period`是 html`input`元素，您需要将值添加到数据对象而不是元素，例如：

```
 var _data = {

            '_mStart': document.getElementById("St_Period").value,
            '_mEnd': document.getElementById("En_Period").value
        }; 
```

# android - android片段是否像HTML中的iframe？

> ID：10781225
> 
> 赞同：4
> 
> 时间：2012-05-28T07:59:52.217
> 
> 标签：android, html

我知道 android 与浏览器编程完全不同。但是来自网络开发背景，我想了解应该使用哪些片段？它们是否类似于具有自己的 UI 并且可以添加到任何其他页面的 HTML 页面中的 iframe 概念？

如果不是，那么 android 片段的一般用例是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-28T08:03:45.163

是的，我认为您可以在概念层面上将它们视为相同的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-28T08:03:56.380

它们是应用程序的可重用部分。例如，您可以使用相同的片段有两个不同的活动。您可能想阅读 android 文档中的 Fragments [Design Philosophy](http://developer.android.com/guide/topics/fundamentals/fragments.html#Design)。

这里还有来自同一文档页面的简短描述：

> Fragment 表示 Activity 中的一种行为或用户界面的一部分。您可以在单个活动中组合多个片段以构建多窗格 UI 并在多个活动中重用一个片段。您可以将片段视为活动的模块化部分，它有自己的生命周期，接收自己的输入事件，并且可以在活动运行时添加或删除（有点像“子活动”，您可以在不同的活动中重复使用）。

# php - 将 html 实体作为函数参数传递

> ID：10781231
> 
> 赞同：0
> 
> 时间：2012-05-28T08:00:43.413
> 
> 标签：php, html-entities

```
<?php
$var1 = str_replace('\n', "<br/>", $var1);
$var2 = str_replace('\n', "<br/>", $var2);
$var3 = str_replace('\n', "<br/>", $var3);

/*
$var1 = nl2br($var1);
$var2 = nl2br($var2);
$var3 = nl2br($var3);
*/
?>

<a href="javascript:" class="history_link" style="color:<?php echo $color; ?>" onclick="showPopUpWindow(
   '<?php echo htmlentities($var1, ENT_QUOTES); ?>',
   '<?php echo htmlentities($var2, ENT_QUOTES); ?>',
   '<?php echo htmlentities($var3, ENT_QUOTES); ?>'
   );"> 
```

我的情况是这样的：我有一些来自数据库的文本，我需要使用标签的 onclick 事件将它作为参数传递给 JS 函数（我知道这很糟糕，但我正在处理随机的代码4年前的自由职业者，我别无选择）。我不知道文本包含什么。它可能有特殊字符（$、#、%、"、' 等），它可能包含 HTML 标签。我尝试使用 htmlentities、nl2br，将 nl 替换为 br (str_replace)，将 onclick 事件的引号更改为单引号和double 但它不起作用。我必须传递 3 个参数。

这是我的代码的一部分。任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-28T08:02:56.553

你试过`json_encode`吗？

```
<a href="javascript:" class="history_link" style="color:<?php echo $color; ?>" onclick="showPopUpWindow(
   <?php echo json_encode($var1); ?>,
   <?php echo json_encode($var2); ?>,
   <?php echo json_encode($var3); ?>
   );"> 
```

# algorithm - Prim and Kruskal's algorithms complexity

> ID：10781236
> 
> 赞同：0
> 
> 时间：2012-05-28T08:01:15.273
> 
> 标签：algorithm, minimum-spanning-tree, prims-algorithm, kruskals-algorithm

Given an undirected connected graph with weights. w:E->{1,2,3,4,5,6,7} - meaning there is only 7 weights possible. I need to find a spanning tree using Prim's algorithm in O(n+m) and Kruskal's algorithm in O( m*a(m,n)).

I have no idea how to do this and really need some guidance about how the weights can help me in here.

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-28T08:53:08.103

您可以更快地对边权重进行排序。

在 Kruskal 算法中，您不需要 O(M lg M) 排序，您只需使用计数排序（或任何其他 O(M) 算法）。所以最终的复杂度是 O(M) 用于排序和 O(Ma(m)) 用于联合查找阶段。总共是 O(Ma(m))。

对于 Prim 算法的情况。您不需要使用堆，您需要 7 个列表/队列/数组/任何东西（具有恒定时间插入和检索），每个权重一个。然后，当您正在寻找最便宜的传出边缘时，您检查这些列表之一是否为非空（来自最便宜的列表）并使用该边缘。由于 7 是一个常数，因此整个算法的运行时间为 O(M)。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-28T08:51:18.993

据我了解，回答家庭作业并不受欢迎，但这可能对其他人有用，而不仅仅是你；）

**普里姆：**

Prim 是一种寻找最小生成树 (MST) 的算法，就像 Kruskal 一样。可视化算法的一种简单方法是在一张纸上绘制图形。然后在您选择的所有节点上创建一条可移动的线（剪切）。在下面的示例中，集合 A 将是剪切内的节点。然后选择穿过切口的最小边，即从线内部的节点到外部的节点。始终选择权重最低的边缘。添加新节点后，您移动剪切，因此它包含新添加的节点。然后重复，直到所有节点都在切口内。

该算法的简短摘要是：

1.  创建一个集合 A，它将包含选定的顶点。它最初将包含一个由您选择的随机起始节点。
2.  创建另一个集合 B。它最初是空的，用于标记所有选定的边。
3.  选择一条边 E (u, v)，即从节点 u 到节点 v 的边。边 E 必须是权重最小的边，它的节点 u 在集合 A 内，而 v 不在 A 内。 (如果有几条边权重相等，则可以随机选择任何一条边）
4.  将边 (u, v) 添加到集合 B，将 v 添加到集合 A。
5.  重复步骤 3 和 4 直到 A = V，其中 V 是所有顶点的集合。
6.  集合 A 和 B 现在描述你的生成树！MST 将包含 A 中的节点，B 将描述它们如何连接。

**克鲁斯卡尔：**

Kruskal 与 Prim 相似，只是没有剪辑。所以你总是选择最小的边。

1.  创建一个集合 A，它最初是空的。它将用于存储选择的边缘。
2.  从集合 E 中选择权重最小的边 E，该边不在 A 中。 (u,v) = (v,u)，因此只能沿一个方向遍历边。
3.  将 E 添加到 A。
4.  重复 2 和 3 直到 A 和 E 相等，也就是说，直到您选择了所有边。

我不确定这些算法的确切性能，但我假设 Kruskal 为 O(E log E) 并且 Prim 的性能取决于您用于存储边缘的数据结构。如果使用二叉堆，搜索最小边比使用邻接矩阵存储最小边要快。

希望这可以帮助！

# regex - Perl 正则表达式更改容器中的所有模式

> ID：10781238
> 
> 赞同：2
> 
> 时间：2012-05-28T08:01:19.097
> 
> 标签：regex, perl

有一个字符串（仅用于测试），我想替换`<p>`div 下的所有实例，`<div id="text">`. 我怎么做 ？

我用`m`and`s`修饰符进行了测试，但徒劳无功（只有第一个被替换）。我在下面给出了我的 Perl 代码：

```
#!/usr/bin/perl
use strict;
use warnings;

my $string = <<STRING;
<div id="main">
    hellohello
    <div id="text">
        nokay.
        <p>This is p1, SHUD B replaced</p>
        Alright
        <p>This is p2, SHUD B replaced</p>
        Yes 2
        <p>this is P3, SHUD B replaced</p>
        Okay done
        bye
    </div>
    bye
    <p>this is not under the div whose id is text and SHUDN'T b replaced</p>
</div>

STRING

my $str_bak = $string;
print "Sring is : \n$string\n\n";

$string =~ s/(<div id="text">.*?)<p>(.*)(<\/p>.*?<\/div>)/$1<p style="text-align:left;">$2 $3/sig;

print "Sring now is : \n$string\n\n"; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-28T09:35:57.627

使用[XML::XSH2](http://p3rl.org/XML%3a%3aXSH2)：

```
open :F html 1.html ;
for //div[@id="text"]/p
    set @style "text-align:left;" ;
save :b ; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-28T08:15:55.560

**试试这个**

```
(?is)<p>.+?</p>(?=.*?</div>) 
```

**代码**

```
$subject =~ s!(?is)<p>.+?</p>(?=.*?</div>)!!g; 
```

**解释**

```
"
(?is)        # Match the remainder of the regex with the options: case insensitive (i); dot matches newline (s)
<p>          # Match the characters “&lt;p>” literally
.            # Match any single character
   +?           # Between one and unlimited times, as few times as possible, expanding as needed (lazy)
</p>         # Match the characters “&lt;/p>” literally
(?=          # Assert that the regex below can be matched, starting at this position (positive lookahead)
   .            # Match any single character
      *?           # Between zero and unlimited times, as few times as possible, expanding as needed (lazy)
   </div>       # Match the characters “&lt;/div>” literally
)
" 
```

**更新**

*更改您的代码如下：*

```
#!/usr/bin/perl
use strict;
use warnings;

my $string = <<STRING;
<div id="main">
    hellohello
    <div id="text">
        nokay.
        <p>This is p1, SHUD B replaced</p>
        Alright
        <p>This is p2, SHUD B replaced</p>
        Yes 2
        <p>this is P3, SHUD B replaced</p>
        Okay done
        bye
    </div>
    bye
    <p>this is not under the div whose id is text and SHUDN'T b replaced</p>
</div>

STRING

my $str_bak = $string;
print "Sring is : \n$string\n\n";

$string =~ s!(?is)<p>.+?</p>(?=.*?</div>)!!g;;

print "Sring now is : \n$string\n\n"; 
```

* * *

该脚本准确地给出了构建的目的。显示除`<p>`中的元素之外的所有内容`div`。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-28T09:19:19.403

首先我需要说我使用了这篇文章中解释的技巧[在 Perl 中将正则表达式替换作为变量传递？](https://stackoverflow.com/questions/125171/passing-a-regex-substitution-as-a-variable-in-perl)

```
#!/usr/bin/perl
use strict;
use warnings;

my $string = <<STRING;
<div id="main">
    hellohello
    <div id="text">
        nokay.
        <p>This is p1, SHUD B replaced</p>
        Alright
        <p>This is p2, SHUD B replaced</p>
        Yes 2
        <p>this is P3, SHUD B replaced</p>
        Okay done
        bye
    </div>
    bye
    <p>this is not under the div whose id is text and SHUDN'T b replaced</p>
</div>

STRING

my $str_bak = $string;
print "Sring is : \n$string\n\n";

$string =~ s/(<div id="text">.*?)<p>(.*)(<\/p>.*?<\/div>)/$1<p style="text-align:left;">$2 $3/sig;

sub modify
{
  my($text, $code) = @_;
  $code->($text);
  return $text;
}

my $new_text = modify($string, sub {
    my $div = '(<div id="text">.*?</div>)';
    $string =~ m#$div#is;
    my $found = $1;
print "found : \n$found\n\n";
    my $repl = modify ($found, sub {
         $_[0] =~ s/<p>/<p style="text-align:left;">/g
    }) ;
    $_[0] =~ s/$found/$repl/ 
});

print "Result : \n$new_text\n\n"; 
```

诀窍是使用修改子来允许对文本进行高阶处理。然后我们可以隔离`<div id="text">...</div>`并对其应用替换`<p>`。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-31T05:02:17.087

谢谢大家的帮助。

我可以找到一个正则表达式。所以我用“解决方法”做到了。这是如何：

```
while( $val =~ s/(<div id="article">.*?)<p>/$1<p style="text-align:left;">/sig )
{  } 
```

所以基本上那个正则表达式只适用于第一个匹配，这就是为什么我们在一个空的while循环中重复它（当没有更多匹配替换时循环退出）。

# c - C中面向回调的库的建议

> ID：10781240
> 
> 赞同：3
> 
> 时间：2012-05-28T08:01:19.880
> 
> 标签：c, sockets

我正在制作用于使用 C 语言控制各种嵌入式设备的小型库。我正在使用 UDP 套接字与每个设备进行通信。设备向我发送各种有趣的数据、警报和通知，同时它们发送一些由库内部使用但用户可能不感兴趣的数据。所以，我实现了一个回调方法，用户可以在每个设备上注册一个带有一些有趣事件的回调函数。现在，这个库的整体设计是这样的：-

*   我有两个线程正在运行。
*   在其中一个线程中，有一个无限`while`事件循环，它使用`select`并`non-blocking sockets`保持与每个设备的通信。
*   基本上，每次我从任何设备收到一个数据包时，我都会去掉一些无用信息的 20 个字节的标头，并添加我自己的标头，其中包含`DEVICE_ID`（`REQUES_TIME`发送时间请求以检索该数据包和`RETRIEVAL_TIME`（现在数据包实际到达的时间） ) 和`REQUEST_ID`(`REQUEST_TYPE`警报、数据、通知等)。
*   现在，这个线程（一个无限循环）将带有新标头的数据包放入环形缓冲区，然后通知其他线程（线程＃2）解析此信息。
*   在线程 #2 中，当收到通知时，它会锁定缓冲区并读取弹出数据包并开始解析它。
*   每条消息都包含一些用户可能不感兴趣的信息，因此我提供了用户回调方法来处理对用户有用的数据。

基本上，我在线程 2 中做这样的事情：-

线程#2

```
wait(data_put_in_buffer_cond)

lock(buffer_mutex)

packet_t* packet = pop_packet_from_buffer(buf);

unlock(buffer_mutex)

/* parsing the package... */
parsed_packet_t* parsed_packet = parse_and_change_endianess(packet->data);
/* header for put by thread #1 with host byte order only not parsing necessary */
header_t* header = get_header(packet);

/* thread 1 sets free callback for kind of packet it puts in buffer 
 * This not a critical section section of buffer, so fine without locks
 */
buffer.free_callback(packet);

foreach attribute in parsed_packet->attribute_list {
   register_info_t* rinfo = USER_REGISTRED_EVENT_TABLE[header->device_id][attribute.attr_id];

   /*user is register with this attribute ID on this device ID */
   if(rinfo != NULL) {
      rinof->callback(packet);
   }

   // Do some other stuff with this attribute..
}
free(parsed_packet); 
```

现在，我担心的是，如果用户实现的回调函数需要一些时间才能完成，同时我可能会因为环形缓冲区处于覆盖模式而丢弃一些数据包，会发生什么？我已经为 3 到 4 台设备测试了我的 API，如果回调函数等待相当长的时间，我看不到太多丢弃事件。我推测这种方法可能不是最好的。

如果我使用某种线程池来运行用户回调函数，它会是一个更好的设计吗？在那种情况下，我需要在将数据包发送给用户回调之前对其进行显式复制？每个数据包大约 500 到 700 字节，我每秒从每个设备收到大约 2 个数据包。任何有关改进当前设计或解决此问题的建议或意见将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-28T09:30:39.247

每个设备获得 500-700 字节根本不是问题，尤其是在您只有 3-4 个设备的情况下。即使您拥有 100 台设备，也应该不是问题。复制开销很可能可以忽略不计。因此，我的建议是：在确定缓冲区复制是您的瓶颈之前，不要尝试预先优化。

关于丢失数据包，正如您在问题中所说，您已经在使用缓冲环（我认为这类似于循环队列，对吗？）。如果队列满了，那么你只需要让线程#1 等待队列中有一些可用空间。显然，来自不同设备的更多事件可能会到达，但这应该不是问题。一旦您再次拥有空间，`select`就会让您知道您有来自不同设备的可用数据，因此您只需要处理所有这些数据。当然，为了有一个平衡的系统，您可以将队列的大小设置为尽可能减少队列满的次数的值，因此线程#1 需要等待。

# internet-explorer - 易。GridView 过滤器在 IE8 和 Opera 中不起作用（Firefox 很好）

> ID：10781241
> 
> 赞同：1
> 
> 时间：2012-05-28T08:01:23.027
> 
> 标签：internet-explorer, gridview, yii

使用 Yii 框架开发网站。

当我在 GridView 过滤器输入框中键入要搜索的关键字然后点击`Enter`- 表单未提交到服务器。但是`Tab`在输入字段外用鼠标点击或点击 - 确实有效。

问题出在 IE 和 Opera 中。火狐没问题。

**编辑**

`dInGd0nG`建议[此论坛主题](http://www.yiiframework.com/forum/index.php/topic/9732-critical-problem-in-ie-8-with-cgridview/)并提供类似问题的解决方法，但`jquery.yiigridview.js`自该解决方法发布以来代码已更改。它现在使用`on()`function 而不是`live()`.

代码现在完全不同了，我不确定自己能否想出新的解决方法。任何人都可以适应当前的补丁`jquery.yiigridview.js`吗？

因此，据我了解，这是处理过滤器输入提交的部分。

```
$(document).on('change', inputSelector, function () {
    var data = $(inputSelector).serialize();
    if (settings.pageVar !== undefined) {
        data += '&' + settings.pageVar + '=1';
    }
    $('#' + id).yiiGridView('update', {data: data});
}); 
```

它适用于 Firefox，不适用于 IE 或 Opera。

任何想法如何解决它？

**编辑 2**

我想出这个来让 IE 和 Opera 在`Enter`按键时发送过滤请求。

```
if($.browser.msie || $.browser.opera) {
    $(document).on('keypress', inputSelector, function(event){
        if(event.keyCode == 13) {
            var data = $(inputSelector).serialize();
            if (settings.pageVar !== undefined) {
                data += '&' + settings.pageVar + '=1';
            }
            $('#' + id).yiiGridView('update', {data: data});
        }
    });
} 
```

但是有点丑

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-28T13:55:43.533

这是[此处](http://code.google.com/p/yii/issues/detail?id=1031)所述的 jquery 问题。该页面也有一个工作区。也看看这个[论坛帖子](http://www.yiiframework.com/forum/index.php/topic/9732-critical-problem-in-ie-8-with-cgridview/)。

# php - SignatureDoesNotMatch Error using Amazon Web Services

> ID：10781242
> 
> 赞同：1
> 
> 时间：2012-05-28T08:01:40.440
> 
> 标签：php, curl, amazon-web-services

The code below results in an SignatureDoesNotMatch error and haven't had much luck on their forums or with support - any suggestions as to what is wrong with the below code?

```
<?php
error_reporting(E_ALL); 
ini_set("display_errors", 1); 
$AWS_ACCESS_KEY_ID = "";
$AWS_SECRET_ACCESS_KEY = "";

$base_url = "http://ecs.amazonaws.com/onca/xml?";
$url_params = array('Operation'=>"ItemSearch",'Service'=>"AWSECommerceService",
 'AWSAccessKeyId'=>$AWS_ACCESS_KEY_ID,'AssociateTag'=>"",
 'Version'=>"2011-08-01",'Availability'=>"Available",'Condition'=>"All",
 'ItemPage'=>"1",'ResponseGroup'=>"Images,ItemAttributes,EditorialReview",
 'Keywords'=>"Amazon");

// Add the Timestamp
$url_params['Timestamp'] = gmdate("Y-m-d\TH:i:s.\\0\\0\\0\\Z", time());

// Sort the URL parameters
$url_parts = array();
foreach(array_keys($url_params) as $key)
    $url_parts[] = $key."=".$url_params[$key];
sort($url_parts);

// Construct the string to sign
$string_to_sign = "GET\necs.amazonaws.com\n/onca/xml\n".implode("&",$url_parts);
$string_to_sign = str_replace('+','%20',$string_to_sign);
$string_to_sign = str_replace(':','%3A',$string_to_sign);
$string_to_sign = str_replace(';',urlencode(';'),$string_to_sign);

// Sign the request
$signature = hash_hmac("sha256",$string_to_sign,$AWS_SECRET_ACCESS_KEY,TRUE);

// Base64 encode the signature and make it URL safe
$signature = base64_encode($signature);
$signature = str_replace('+','%2B',$signature);
$signature = str_replace('=','%3D',$signature);
$signature = str_replace(';',urlencode(';'),$signature);
$url_string = implode("&",$url_parts);
$url = $base_url.$url_string."&Signature=".$signature;
print $url;

$ch = curl_init();
curl_setopt($ch, CURLOPT_URL,$url);
curl_setopt($ch, CURLOPT_RETURNTRANSFER, 1);
curl_setopt($ch, CURLOPT_TIMEOUT, 15);
curl_setopt($ch, CURLOPT_SSL_VERIFYHOST, 0);

$xml_response = curl_exec($ch);
echo $xml_response; 
    ?> 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-05-28T16:45:35.043

我收到了类似的错误消息：

```
 ["Code"]=> string(21) "SignatureDoesNotMatch"
  ["Message"]=> string(100) "Signature expired: 20130528T162908Z is now earlier than 20130528T162916Z (20130528T163416Z - 5 min.)" 
```

检查我的服务器时钟后，我发现时间不对，在同步我的服务器时钟后，`sudo ntpdate ntp.ubuntu.com`我能够毫无问题地发送电子邮件，希望对您有所帮助。

# typo3 - Typo3 4.7.0 update deprecated functions?

> ID：10781244
> 
> 赞同：0
> 
> 时间：2012-05-28T08:01:53.000
> 
> 标签：typo3

I've just updated to Typo3 4.7.0 and most of my projects gets a call to undefined error in t3lib_div::view_array? What happens to the function view_array?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-28T08:12:16.000

[自 TYPO3 4.5 起已弃用](http://api.typo3.org/typo3v4/46/html/classt3lib__div.html#a99605627a32fc19fceddcc91072868b7)-改用[t3lib_utility_Debug::](http://api.typo3.org/typo3v4/current/html/classt3lib__utility___debug.html#a8d7d403910e0e0a4a8a3660e100f5551) viewArray

正如您还可以看到它已从 4.7 中删除（在 TYPO3 中，方法在被标记为已弃用后在两个版本中被删除是正常的）

# jquery - jQuery Remove LI elements inside UL

> ID：10781251
> 
> 赞同：0
> 
> 时间：2012-05-28T08:02:14.760
> 
> 标签：jquery, html-lists, appendto

I am trying to fetch stores depending on the state the user Selects from a drop down.

```
<select name="addressInput" id="state" class="mx-stateSelect" onchange='getRetailers()'>
    <option value=""> Choose State</option>
    <option value="Alberta"> Alberta Canada</option>
    <option value="Alaska"> Alaska </option>
    <option value="Alabama">Alabama</option>
    ...
    <option value="Washington"> Washington </option>
</select> 
```

**jQuery Function**

```
function getRetailers() {
    var state = $('#state').val();
    var searchUrl = 'getRetailers.php?state=' + state;

    $.getJSON(searchUrl, function(data) {
        var items = [];

        $.each(data, function(key, val) {
            items.push('<li id="' + val.id + '"><a href="#" data-lat="' + val.lat + '" data-lng="' + val.lng + '">' + val.name + '<br/>' + val.address + ', ' + val.city + ', ' + val.zipcode + ' ' + val.stab + '</a></li>');
        });

        $('<ul/>', {
            'class' : 'mx-retailers',
            html : items.join('')
        }).appendTo('.mx-retailerResult');
    });
} 
```

This is adding another set of UL LI to the code. Where as i want to replace the old LI with the new LI i fetch from the database.

**HTML Code**

```
<div class="mx-retailerResult">
    <ul class="mx-retailers">
    </ul>
</div> 
```

I want to remove all the LI Element inside the UL and replace it with Fresh content from the database

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-28T08:16:55.260

```
$('<ul/>', {
    'class' : 'mx-retailers',
    html : items.join('')
}).appendTo('.mx-retailerResult'); 
```

上面的代码创建了一个新的 ul 元素尝试

```
$('ul.mx-retailers').html(items.join('')); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-28T08:08:42.977

This block of code you have is creating a new UL element with a class of `mx-retailers`:

```
$('<ul/>', {
            'class' : 'mx-retailers',
            html : items.join('')
        }).appendTo('.mx-retailerResult'); 
```

If you dont want to do this then replace it with the following:

```
items.join('').appendTo('.mx-retailerResult'); 
```

This will add all of your li elements into the ul with the class of `mx-retailerResult`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-28T08:28:11.843

```
$('.mx-retailerResult').html($('<ul/>', {
    'class' : 'mx-retailers',
    html : items.join('')
})); 
```

# .net - Can a wcf client be configured via markup the same way a wcf library is hosted?

> ID：10781254
> 
> 赞同：0
> 
> 时间：2012-05-28T08:02:28.067
> 
> 标签：.net, wcf-client, .net-assembly, wcf-configuration, wcf-library

Here is my understanding of how a wcf library project is hosted. Once you create a wcf library project you have your app.config as follows:

```
<?xml version="1.0" encoding="utf-8" ?>
<configuration>

  <system.web>
    <compilation debug="true" />
  </system.web>
  <!-- When deploying the service library project, the content of the config file must be added to the host's 
  app.config file. System.Configuration does not support config files for libraries. -->
  <system.serviceModel>
    <services>
      <service name="WcfLib.Service1">
        <host>
          <baseAddresses>
            <add baseAddress = "http://localhost:8732/Design_Time_Addresses/WcfLib/Service1/" />
          </baseAddresses>
        </host>
        <!-- Service Endpoints -->
        <!-- Unless fully qualified, address is relative to base address supplied above -->
        <endpoint address ="" binding="wsHttpBinding" contract="WcfLib.IService1">
          <!-- 
              Upon deployment, the following identity element should be removed or replaced to reflect the 
              identity under which the deployed service runs.  If removed, WCF will infer an appropriate identity 
              automatically.
          -->
          <identity>
            <dns value="localhost"/>
          </identity>
        </endpoint>
        <!-- Metadata Endpoints -->
        <!-- The Metadata Exchange endpoint is used by the service to describe itself to clients. --> 
        <!-- This endpoint does not use a secure binding and should be secured or removed before deployment -->
        <endpoint address="mex" binding="mexHttpBinding" contract="IMetadataExchange"/>
      </service>
    </services>
    <behaviors>
      <serviceBehaviors>
        <behavior>
          <!-- To avoid disclosing metadata information, 
          set the value below to false and remove the metadata endpoint above before deployment -->
          <serviceMetadata httpGetEnabled="True"/>
          <!-- To receive exception details in faults for debugging purposes, 
          set the value below to true.  Set to false before deployment 
          to avoid disclosing exception information -->
          <serviceDebug includeExceptionDetailInFaults="False" />
        </behavior>
      </serviceBehaviors>
    </behaviors>
  </system.serviceModel>

</configuration> 
```

You can simply create an *empty* console application project (just put a `Console.ReadLine()` in it), and add a reference to the previous project's assembly, and add the entire `services` tag as seen above. Now its hosted. It lives as long as that console application lives.

Note the pattern how the markup was written to make this work. Everything in the `<services/>` stands for a wcf service entity which is to be hosted. In this case hosting was done via conifugration via my console application.

I am looking at if I can follow a similar analogy for wcf service consumption. Can I write my wcf client using the same pattern of configuration? Ultimately I am looking at putting those configurations in a separate config file.

[Here are links of previous posts if you are interested in what made me ask this question](http://bitly.com/bundles/deostroll/k)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-28T08:40:30.060

您的服务不会自行托管。当您调试 WCF 库时，WCF 服务主机由调试器运行以托管您的服务。您必须在真实环境中手动执行此操作。

[在此处](http://msdn.microsoft.com/en-us/library/bb552363.aspx)阅读有关 WCF 服务主机的信息。

**编辑：**

并回答您的问题：是的，您可以以相同的方式配置您的客户端。看[这篇文章](http://msdn.microsoft.com/en-us/library/ms731745.aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-29T04:44:30.357

我遇到了以下SO帖子。也许我的答案就在于此……我不确定

[如何告诉 WCF 客户端从不同的配置文件中读取设置？](https://stackoverflow.com/questions/4928807/how-to-tell-wcf-client-to-read-settings-out-of-different-config-file)

# android - 如何在gridview中将播放图标与视频缩略图合并？

> ID：10781259
> 
> 赞同：-2
> 
> 时间：2012-05-28T08:02:39.683
> 
> 标签：android

我开发了一个应用程序，***我需要将视频和图像合并到一个库***中，因此我们需要通过使用视频缩略图上的视频播放图标来区分视频和图像。我不知道**如何将视频图标与视频缩略图合并，**请告诉我。

先感谢您 。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-28T08:05:54.647

使用一个[FrameLayout](http://developer.android.com/reference/android/widget/FrameLayout.html)和两个相同大小的[ImageView](http://developer.android.com/reference/android/widget/ImageView.html)。一个用于播放图标，另一个用于缩略图。它们会重叠

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-21T04:02:44.560

您可以使用扩展表面视图来播放视频。我已经使用媒体播放器和 Surface 视图完成了这项工作。

这是扩展表面视图的示例代码。

```
package com.vt.soc;

import android.content.Context;
import android.view.GestureDetector;
import android.view.MotionEvent;
import android.view.SurfaceView;
import android.util.AttributeSet;
import java.util.ArrayList;

public class TappableSurfaceView extends SurfaceView {
    private ArrayList<TapListener> listeners=new ArrayList<TapListener>();
    @SuppressWarnings("unused")
    private GestureDetector gesture=null;

    public TappableSurfaceView(Context context,
                                                            AttributeSet attrs) {
        super(context, attrs);
    }

    public boolean onTouchEvent(MotionEvent event) {
        if (event.getAction()==MotionEvent.ACTION_UP) {
            gestureListener.onSingleTapUp(event);
        }

        return(true);
    }

    public void addTapListener(TapListener l) {
        listeners.add(l);
    }

    public void removeTapListener(TapListener l) {
        listeners.remove(l);
    }

    private GestureDetector.SimpleOnGestureListener gestureListener=
        new GestureDetector.SimpleOnGestureListener() {
        @Override
        public boolean onSingleTapUp(MotionEvent e) {
            for (TapListener l : listeners) {
                l.onTap(e);
            }

            return(true);
        }
    };

    public interface TapListener {
        void onTap(MotionEvent event);
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-05-13T12:34:27.547

使用 framelayout 它会为你工作`

```
<!-- This for video thumbnail-->
<Imageview 
    layout_width="wrap_content"
    layout_height="wrap_content"/>

<!-- This for video icon in center-->
<Imageview 
    layout_width="50dp"
    layout_height="50dp"/> 
```

`

# delphi - 使用快捷键更改选项卡式笔记本中的活动页面；

> ID：10781260
> 
> 赞同：0
> 
> 时间：2012-05-28T08:02:53.380
> 
> 标签：delphi, events, global

德尔福 v7\. 我在这里学到了很多东西。人们非常愿意提供帮助。所以，我还有一个问题。

我想使用快捷键更改选项卡式笔记本的活动页面。我可以在控件内的 keydown 事件中执行此操作，但与单击笔记本上的选项卡相比，在控件内单击并不会节省任何时间。

示例 Delphi7：

```
procedure TForm1.Edit2KeyDown(Sender: TObject; var Key: Word;
  Shift: TShiftState);
begin
 if (ssCtrl in Shift) and (Upcase(Chr(key)) = 'T') then
   tabNB.PageIndex:= tabNB.PageIndex +1;
end; 
```

目标是能够使用快捷键而不必在控件的 keydown 事件中进行操作。是否可以在项目的某个全局区域编写一个允许我这样做的程序？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-28T09:38:24.303

您可以使用[如何设置热键中的提示](http://delphi.about.com/cs/adptips2001/a/bltip0601_3.htm)

或者您可以使用 JVCL Jedi 库中的 TJvApplicationHotKey 组件（免费），将其放在您的表单上，设置 Hotkey 属性，将 active 属性设置为 true，然后放置您的代码

```
tabNB.PageIndex:= tabNB.PageIndex +1; 
```

在 onHotKey 事件中。

顺便说一句，TNoteBook 是一个旧组件，您可以使用 TPageControl 作为替代。

# c++ - swig 和辅助共享库 (c++)

> ID：10781265
> 
> 赞同：2
> 
> 时间：2012-05-28T08:03:26.437
> 
> 标签：c++, python, shared-libraries, swig, undefined-symbol

我们正在使用 swig 将 python 绑定添加到 c++ 库中。我已经创建了 .i 文件并将 swig 生成的输出编译到库中。

但是，当尝试从 Python 中使用我们的库时，会出现以下错误：

```
ImportError: /home/satpal/src/alpha/USBDrDaq/examples/libUSBDrDAQ.so: undefined symbol: libusb_clear_halt 
```

如您所见，该库使用 LibUSB。.i 文件包含 libusb.h，这似乎还不够。

Python 是否也需要为 libUSB 绑定？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-28T08:10:09.347

您需要将 libUSB 链接到您正在生成的共享库中。也就是说，构建共享库的命令行应该是这样的：

```
gcc -shared example.o example_wrap.o -o _example.so -lusb 
```

注意`-lusb`最后。

# python - 来自python的python安装包

> ID：10781275
> 
> 赞同：1
> 
> 时间：2012-05-28T08:03:47.960
> 
> 标签：python, easy-install

如何从 python 安装/检查/升级 python 包？我不想在控制台中运行easy_install，我正在尝试为easy_install 制作一个包装器。

从 cli 我可以做到这一点：

```
easy_install somelib
pip install somelib 
```

我想从 python 安装软件包。前任：

```
try:
    import somelib
except ImportError:
    myFunctionInstall("somelib") 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-28T13:05:12.093

您通常*不想*这样做。`setup.py`而是在您的文件中提供适当的依赖项，并让`pip`,`easy_install`或`zc.buildout`为您执行依赖项之类的工具。部署代码的人员需要能够控制依赖项的安装*位置*，例如，将冲突的版本分开。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-05-16T15:09:46.640

你可以这样做：

```
import os

myFunctionInstall(module):
    os.system("pip install " + module)

try:
    import somelib
except ImportError:
    myFunctionInstall("somelib") 
```

您必须在系统中安装 pip。希望能帮助到你 ：）

# c# - c# - “认证或解密失败。” 在单声道中使用 twitterizer 时出错

> ID：10781279
> 
> 赞同：17
> 
> 时间：2012-05-28T08:04:04.540
> 
> 标签：c#, linux, mono, twitterizer

为什么我会收到此错误

```
Unhandled Exception: Twitterizer.TwitterizerException: Error getting response stream (Write: The authentication or decryption has failed.): SendFailure ---> System.Net.WebException: Error getting response stream (Write: The authentication or decryption has failed.): SendFailure ---> System.IO.IOException: The authentication or decryption has failed. ---> Mono.Security.Protocol.Tls.TlsException: Invalid certificate received from server. Error code: 0xffffffff800b010a
at Mono.Security.Protocol.Tls.Handshake.Client.TlsServerCertificate.validateCertificates (Mono.Security.X509.X509CertificateCollection certificates) [0x00000] in <filename unknown>:0 
at Mono.Security.Protocol.Tls.Handshake.Client.TlsServerCertificate.ProcessAsTls1 () [0x00000] in <filename unknown>:0 
at Mono.Security.Protocol.Tls.Handshake.HandshakeMessage.Process () [0x00000] in <filename unknown>:0 
at (wrapper remoting-invoke-with-check) Mono.Security.Protocol.Tls.Handshake.HandshakeMessage:Process ()
at Mono.Security.Protocol.Tls.ClientRecordProtocol.ProcessHandshakeMessage (Mono.Security.Protocol.Tls.TlsStream handMsg) [0x00000] in <filename unknown>:0 
at Mono.Security.Protocol.Tls.RecordProtocol.InternalReceiveRecordCallback (IAsyncResult asyncResult) [0x00000] in <filename unknown>:0 
--- End of inner exception stack trace ---
at Mono.Security.Protocol.Tls.SslStreamBase.AsyncHandshakeCallback (IAsyncResult asyncResult) [0x00000] in <filename unknown>:0 
--- End of inner exception stack trace ---
at System.Net.HttpWebRequest.EndGetResponse (IAsyncResult asyncResult) [0x00000] in <filename unknown>:0 
at System.Net.HttpWebRequest.GetResponse () [0x00000] in <filename unknown>:0 
at Twitterizer.WebRequestBuilder.ExecuteRequest () [0x00000] in <filename unknown>:0 
at Twitterizer.OAuthUtility.GetRequestToken (System.String consumerKey, System.String consumerSecret, System.String callbackAddress) [0x00000] in <filename unknown>:0 
--- End of inner exception stack trace ---
at Twitterizer.OAuthUtility.GetRequestToken (System.String consumerKey, System.String consumerSecret, System.String callbackAddress) [0x00000] in <filename unknown>:0 
at terminal_twitt.Program.Main (System.String[] args) [0x00000] in /home/julio/Projects/terminal-twitt/terminal-twitt/Program.cs:18 
[ERROR] FATAL UNHANDLED EXCEPTION: Twitterizer.TwitterizerException: Error getting response stream (Write: The authentication or decryption has failed.): SendFailure ---> System.Net.WebException: Error getting response stream (Write: The authentication or decryption has failed.): SendFailure ---> System.IO.IOException: The authentication or decryption has failed. ---> Mono.Security.Protocol.Tls.TlsException: Invalid certificate received from server. Error code: 0xffffffff800b010a
at Mono.Security.Protocol.Tls.Handshake.Client.TlsServerCertificate.validateCertificates (Mono.Security.X509.X509CertificateCollection certificates) [0x00000] in <filename unknown>:0 
at Mono.Security.Protocol.Tls.Handshake.Client.TlsServerCertificate.ProcessAsTls1 () [0x00000] in <filename unknown>:0 
at Mono.Security.Protocol.Tls.Handshake.HandshakeMessage.Process () [0x00000] in <filename unknown>:0 
at (wrapper remoting-invoke-with-check) Mono.Security.Protocol.Tls.Handshake.HandshakeMessage:Process ()
at Mono.Security.Protocol.Tls.ClientRecordProtocol.ProcessHandshakeMessage (Mono.Security.Protocol.Tls.TlsStream handMsg) [0x00000] in <filename unknown>:0 
at Mono.Security.Protocol.Tls.RecordProtocol.InternalReceiveRecordCallback (IAsyncResult asyncResult) [0x00000] in <filename unknown>:0 
--- End of inner exception stack trace ---
at Mono.Security.Protocol.Tls.SslStreamBase.AsyncHandshakeCallback (IAsyncResult asyncResult) [0x00000] in <filename unknown>:0 
--- End of inner exception stack trace ---
at System.Net.HttpWebRequest.EndGetResponse (IAsyncResult asyncResult) [0x00000] in <filename unknown>:0 
at System.Net.HttpWebRequest.GetResponse () [0x00000] in <filename unknown>:0 
at Twitterizer.WebRequestBuilder.ExecuteRequest () [0x00000] in <filename unknown>:0 
at Twitterizer.OAuthUtility.GetRequestToken (System.String consumerKey, System.String consumerSecret, System.String callbackAddress) [0x00000] in <filename unknown>:0 
--- End of inner exception stack trace ---
at Twitterizer.OAuthUtility.GetRequestToken (System.String consumerKey, System.String consumerSecret, System.String callbackAddress) [0x00000] in <filename unknown>:0 
at terminal_twitt.Program.Main (System.String[] args) [0x00000] in /home/julio/Projects/terminal-twitt/terminal-twitt/Program.cs:18 
The application was terminated by a signal: SIGHUP 
```

我使用 twitterizer 和 mono 2.6 for .NET 4.0 runtime for linux。我已经在我的 Windows 中使用 Visual Studio 尝试过这段代码，并且运行良好。但是当我尝试用单声道构建它时，我得到了这个错误。这是我的代码：

```
static void Main(string[] args)
{
    string requestToken = OAuthUtility.GetRequestToken("my consumer key", "my consumer secret", "oob").Token;
} 
```

* * *

## 回答 #1

> 赞同：34
> 
> 时间：2012-07-12T11:50:44.550

我遇到了同样的问题，所以简单地说我选择使用导入所有证书

```
mozroots --import --ask-remove 
```

现在我可以用推特登录了

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-05-28T11:58:17.347

请参阅 Mono 项目[wiki](http://www.mono-project.com/)：

*   SSL/TLS 上的[安全性常见问题解答；](http://www.mono-project.com/FAQ%3a_Security#Secure_Socket_Layer_.28SSL.29_.2F_Transport_Layer_Security_.28TLS.29)和

*   [尊重地使用受信任的根](http://www.mono-project.com/UsingTrustedRootsRespectfully)文章

他们将向您展示如何在您的系统（用户）上添加缺少的 x.509 证书，以及如何在您自己的应用程序中最好地处理此类情况（开发人员）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-10-02T15:06:04.600

也适用于使用 mono 和 vNext 设置 kvm - 否则你不能这样做

```
kpm restore -s https://www.myget.org/F/aspnetvnext/ 
```

非常感谢您的提示！

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-05-31T03:12:04.827

从单声道的文档：

> 请注意，如果您使用的是 Web 应用程序（即不是当前用户），则必须添加**--machine**选项，如下所示：

```
mozroots --import --ask-remove --machine 
```

*你可能想用`sudo`

# c# - 使用键移动控件

> ID：10781282
> 
> 赞同：0
> 
> 时间：2012-05-28T08:04:36.103
> 
> 标签：c#, wpf, keyboard

我正在尝试制作一个 w,a,s,d 分别为前、左、下和右的迷你游戏。

控件向上、向左、向下和向右移动，但仅移动一次。如果我按“W”、“S”、“A”或“D”键两次或三次，控件只会向上移动一次。

这是我目前用于移动控制权的代码：

```
private void moveRight(Button button)
    {
        // Gets the current position of the control
        Point relativePoint = button.TransformToAncestor(parentCanvas).Transform(new Point(0, 0));

        // Reason for having relative - relative is that its adding onto the previous point.
        Canvas.SetLeft(button, relativePoint.X - relativePoint.X + 5);

        button.Content = relativePoint;
    }

private void Window_KeyDown(object sender, KeyEventArgs e)
    {
        if (e.Key == Key.W)
        {
            moveUp(button1);
        }

        else if (e.Key == Key.A)
        {
            moveLeft(button1);
        }

        else if (e.Key == Key.S)
        {
            moveDown(button1);
        }

        else if (e.Key == Key.D)
        {
            moveRight(button1);
        }
    } 
```

请帮助或建议我如何解决这个问题。

所有帮助将不胜感激。谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-28T08:54:48.543

想通了，逻辑有点不对劲。

正确的做法是这样的：

```
private void moveRight(Button button)
    {
        // Gets the current position of the control
        Point relativePoint = button.TransformToAncestor(parentCanvas).Transform(new Point(0, 0));

        Canvas.SetLeft( button , 5 + relativePoint.X );
        button.Content = relativePoint;

     } 
```

它现在工作，谢谢

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-28T08:55:37.007

代替

```
Canvas.SetLeft(button, relativePoint.X - relativePoint.X + 5); 
```

采用

```
Canvas.SetLeft(button, relativePoint.X + 5); 
```

希望这会有所帮助。

# php - footer.php 中的 Opencart 联系表

> ID：10781286
> 
> 赞同：0
> 
> 时间：2012-05-28T08:04:52.480
> 
> 标签：php, opencart

我在 Opencart 主题的页脚中添加了一个基本的联系表单。例如我有：

```
if (($this->request->server['REQUEST_METHOD'] == 'POST') &&
(isset($this->request->post['enquiry_submit'])) && $this->validate()) { 
```

这可以按预期正常工作。现在的问题是，如果您在其他页面（例如客户注册）并尝试发送页脚联系表，我会收到大量未定义的通知。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-28T10:09:31.890

这里的问题很明显：

1.  您将代码放置在`if (($this->request->server['REQUEST_METHOD'] == 'POST') && (isset($this->request->post['enquiry_submit'])) && $this->validate()) {`可能作为最后一个处理的 FOOTER 控制器中。
2.  在处理页脚控制器之前，之前处理了更多（多达几十个）控制器
3.  几乎每个控制器都包含以下代码：`if (($this->request->server['REQUEST_METHOD'] == 'POST') && $this->validate()) {`-因此，提交表单时，页脚之前的几乎每个控制器都尝试做他们的事情......这就是为什么你有一堆`Undefined index`通知......

我建议：

1.  让页脚控制器处理表单显示
2.  在页脚模板中显示表单
3.  编辑主要联系表单控制器/模板/语言文件：
    1.  在控制器中添加新功能，`footer()`并在此处从页脚控制器移动所有提交后处理代码
    2.  将需要的东西添加到联系人模板和语言文件中
4.  在页脚的联系表单中，确保表单已提交到此 URL `http://www.youropencartsite.com/index.php?route=contact/contact/footer`：。

这样，您可以确保在提交来自页脚的联系表单时，将用户重定向到正常的联系表单，在该表单中调用一个具体方法来处理提交的数据，并且没有其他控制器参与数据处理......

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-28T11:06:54.267

将代码放在页脚的控制器中似乎是个好主意，但这确实意味着您最终将尝试发布到页脚本身以保证其每个页面都可用，这有点矫枉过正和不好实践。解决此问题的方法是：

*   获取表格以发布到联系我们表格（信息/联系方式）。这具有已经编码的好处，但确实意味着您的客户将被重定向到该页面
*   使用 AJAX 发送到联系我们表单或用于处理此问题的新控制器，并使用 JSON 发送回联系提交的结果。在我看来，这对您的客户来说是更好的选择

# php - 如何确定是否从 IF 检查功能

> ID：10781287
> 
> 赞同：0
> 
> 时间：2012-05-28T08:05:09.563
> 
> 标签：php, optimization, reflection

在其他人编写的项目中工作时，有一个函数可以检索一些数据，它的返回是带有数据的数组。

```
function getSomedata()
{
     //Get some data
     return Array();
} 
```

在代码上，这个函数在很多地方都被测试为

```
if(getSomedata())
  getSomedata(); 
```

如果不编辑每段代码，如果从 IF 语句调用该函数并返回布尔值而不是带数据的数组，我能否从**php获得通知。**

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-28T08:14:48.400

从理论上讲，您可以使用回溯来确定哪些代码调用了一段代码，并阅读和自省代码以确定函数是否在`if`语句中被调用。但我什至不打算详细说明如何做到这一点，因为这太疯狂了。

`if (function()) function()`是一种反模式，坏掉的代码，坏的，坏的，坏的。你需要纠正这种误用，而不是更加疯狂地与之抗争。如果在很多地方都使用了它，那就硬着头皮修复一次，而不必永远处理它。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-05-28T08:11:00.917

我认为您能做的最好的事情就是使用 $GLOBALS 检查数组是否已设置：

```
function getSomedata()
{
    if(!empty($GLOBALS['Arr']))
        return $Arr;

    //Get some data

    return $Arr;

} 
```

类似的东西......如果在脚本执行期间数据没有改变，它会为你工作。但我建议你修复你的代码。

# ios - 如何通过 iPhone 获取外部环境的亮度？

> ID：10781289
> 
> 赞同：0
> 
> 时间：2012-05-28T08:05:29.753
> 
> 标签：ios, brightness

众所周知，iPhone的屏幕会随着周围亮度的变化而自动调节，所以它应该先获取外界的亮度，对吧？我也那么认为。所以现在我只想通过它的 opt0-sensor 获取外部环境的亮度，但我不知道怎么做？

有人可以帮助我吗？非常感谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-28T08:33:20.037

据我所知，您可以使用相机并借助一些图像处理技术来获得亮度。否则，检测外部环境光的 iPhone 配置对于开发人员来说是相当黑盒化的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-28T08:30:30.960

不幸的是，根据[这个问题](https://stackoverflow.com/questions/6309643/is-there-a-light-sensor-on-the-iphone-and-if-so-how-can-i-read-the-data "iPhone 上是否有光传感器，如果有，如何读取数据？")，访问环境光传感器数据需要访问 App Store 上禁止的私有标头。

# bash - while 循环 BASH 中的语法错误

> ID：10781290
> 
> 赞同：1
> 
> 时间：2012-05-28T08:05:33.963
> 
> 标签：bash, background, while-loop, syntax-error

我正在尝试运行一个循环，该循环将通过以下方式在后台运行 matlab 命令：

```
while [$i -lt $p] || [$i -eq $p] do
     $i>i.txt
     echo "matlab -nojvm -r readtxt_abc;pause(1);myfunc1(a,b,c);clear" |sh &
     let i=i+1
done 
```

我得到一个错误

```
bash:syntax error near unexpected token 'done' 
```

如果有人知道错误的原因是什么，请告诉我，谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-28T08:10:06.737

```
while [ $i -lt $p ] || [ $i -eq $p ]; do
 $i>i.txt
 echo "matlab -nojvm -r readtxt_abc;pause(1);myfunc1(a,b,c);clear" |sh &
 let i=i+1
done 
```

记住这一点`[`，`]`必须被“空间”包围

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-28T08:11:09.823

方括号需要围绕它们的空格，因为它们本质上是命令而不是语法元素。当您与 . 放在`do`同一行时，您还需要一个分号`while`。

```
while [ $i -lt $p ] || [ $i -eq $p ]; do 
```

小于或等于运算符`-le`不是进行两次测试。

但是，这在 Bash 中是首选：

```
while ((i <= p)); do
     # $i>i.txt     # this line doesn't make any sense
     matlab -nojvm -r 'readtxt_abc;pause(1);myfunc1(a,b,c);clear' &    # there's no need to pipe this to sh
     ((i++))
done 
```

但是你可以让 Bash 维护你的计数器变量：

```
for ((i = 0; i <= p; i++)); do
    . . .
done 
```

也许第二行应该是：

```
echo "$i" > "$i.txt" 
```

但我不知道你为什么要这样做。

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2012-05-28T08:08:17.723

我相信你错过了一些**；**尝试：

```
while [$i -lt $p] || [$i -eq $p]; do
 $i>i.txt;
 echo "matlab -nojvm -r readtxt_abc;pause(1);myfunc1(a,b,c);clear" |sh &;
 let i=i+1;
done 
```

# objective-c - 在 UIImageView 中居中 UIActivityIndi catorView

> ID：10781291
> 
> 赞同：5
> 
> 时间：2012-05-28T08:05:38.147
> 
> 标签：objective-c, xcode, uiimageview, uiactivityindicatorview

我创建了一个自定义子类，`UIImageView`并且在一种方法中，我想在图像加载时向中心添加一个活动指示器。我正在使用以下代码，但活动监视器位于`UIImageView`. 我该怎么做才能将它准确地居中`UIImageView`？

```
UIActivityIndicatorView *indicator = [[UIActivityIndicatorView alloc] initWithActivityIndicatorStyle:UIActivityIndicatorViewStyleGray];

indicator.autoresizingMask =
UIViewAutoresizingFlexibleTopMargin |
UIViewAutoresizingFlexibleRightMargin |
UIViewAutoresizingFlexibleBottomMargin |
UIViewAutoresizingFlexibleLeftMargin;

indicator.center = self.center;

[self addSubview:indicator];    
[indicator startAnimating]; 
```

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-05-28T08:21:04.110

`center`**属性是视图在其superview**坐标空间中的坐标。所以你需要在imageView的坐标空间中设置你的指标坐标。正确的方法是：

```
indicator.center = CGPointMake(CGRectGetMidX(self.bounds), CGRectGetMidY(self.bounds)); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-28T08:26:18.023

```
indicator.center = [self convertPoint:self.center fromView:[self superview]]; 
```

因此，您只需要转换点（[UIView 类参考](http://developer.apple.com/library/ios/#documentation/uikit/reference/uiview_class/uiview/uiview.html)）：

> @property(nonatomic) CGPoint 中心讨论
> 
> **中心在其父视图**的坐标系中指定， 并以点为单位进行测量。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-28T08:17:05.420

`indicator.center = imageView.center;`

# c# - change row colour based on text

> ID：10781302
> 
> 赞同：-1
> 
> 时间：2012-05-28T08:06:30.580
> 
> 标签：c#, asp.net

hey guys im stuck on this. Just trying to change the row colour based on cell text value. this is what i have at the moment

```
protected void GridView1_RowDataBound(object sender, GridViewRowEventArgs e)
    {
        if (e.Row.RowType == DataControlRowType.DataRow)
        {
                    string value = Convert.ToString(DataBinder.Eval(e.Row.DataItem,"Field1"));

                    if (value == "Complete")
                    {
                        e.Row.BackColor = System.Drawing.Color.FromName("#c6efce");
                    }
                }
            }
        }
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-28T12:11:46.377

`Color.FromName`方法需要一个颜色名称，并且您正在传递十六进制颜色值，将其替换为：

```
using System.Drawing;
...  
e.Row.BackColor = Color.FromArgb(Convert.ToInt32("c6efce", 16)); 
```

或者

```
e.Row.BackColor = ColorTranslator.FromHtml("#c6efce"); 
```

# javascript-events - Simple thing ,how to store variables into an array?

> ID：10781306
> 
> 赞同：-1
> 
> 时间：2012-05-28T08:06:59.530
> 
> 标签：javascript-events, javascript

I have this function, i need to store some values in an array, i need t create an array variable and store them here.

I have this function :

```
function loadFriends()
{
    //get array of friends
    FB.api('/me/friends?fields=name,first_name,gender', function(response) {
        console.log(response);
        var divContainer=$('.facebook-friends');
        var testdiv = document.getElementById("test");

for(var i=0; i<response.data.length; i++){
    if(response.data[i].gender == 'male'){
         testdiv.innerHTML += response.data[i].id + '<br />';
    }
} 
```

I need to store all values of response.data[i].id in an array, as an array.. i need something like var array = [1,2,3,4] where 1,2,3,4 are the response.data[i].id ...

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-28T08:08:53.977

> 我需要将 response.data[i].id 的所有值存储在一个数组中

使用`push`：

```
var  arr = []; // Creates an empty array literal.

for(var i = 0; i < response.data.length; i++){
        arr.push(response.data[i].id);
} 
```

[**`push`在 MDN 网站上阅读**](https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/Array/push)

# rest - ASP .NET MVC 4 WebApi：手动处理 OData 查询

> ID：10781309
> 
> 赞同：57
> 
> 时间：2012-05-28T08:07:17.287
> 
> 标签：rest, odata, asp.net-mvc-4, asp.net-web-api

我有一个使用 ASP .NET MVC 4 提供的**WebAPI**制作的 Web 服务。我知道 WebAPI 工作的层会自动处理**OData 查询**（例如`$filter`、`$top`、`$skip`），但是如果我想自己处理过滤呢？ ?

[我不只是从我的数据库中返回数据](https://i.stack.imgur.com/Bgv8W.jpg)，而且我还有另一个层，它添加了一些属性、进行一些转换等。所以查询我的所有数据、转换它们并将它们返回到 WebAPI 类以进行 OData 过滤不仅仅是好的足够。这当然非常慢，而且通常是一个糟糕的想法。

那么有没有办法**将 OData 查询参数**从我的 WebAPI 入口点传播到我调用以获取和转换数据的函数？

例如，一个 GET`/api/people?$skip=10&$top=10`将在服务器上调用：

```
public IQueryable<Person> get() {
    return PersonService.get(SomethingAboutCurrentRequest.CurrentOData);
} 
```

并在`PersonService`：

```
public IQueryable<Person> getPeople(var ODataQueries) {
    IQueryable<ServerSidePerson> serverPeople = from p in dbContext.ServerSidePerson select p;
    // Make the OData queries
    // Skip
    serverPeople = serverPeople.Skip(ODataQueries.Skip);
    // Take
    serverPeople = serverPeople.Take(ODataQueries.Take);
    // And so on
    // ...

    // Then, convert them
    IQueryable<Person> people = Converter.convertPersonList(serverPeople);
    return people;
} 
```

* * *

## 回答 #1

> 赞同：42
> 
> 时间：2013-03-19T09:35:56.223

我刚刚偶然发现了这篇旧帖子，我正在添加这个答案，因为现在自己处理 OData 查询非常容易。这是一个例子：

```
[HttpGet]
[ActionName("Example")]
public IEnumerable<Poco> GetExample(ODataQueryOptions<Poco> queryOptions)
{
    var data = new Poco[] { 
        new Poco() { id = 1, name = "one", type = "a" },
        new Poco() { id = 2, name = "two", type = "b" },
        new Poco() { id = 3, name = "three", type = "c" }
    };

    var t = new ODataValidationSettings() { MaxTop = 2 };
    queryOptions.Validate(t);

    //this is the method to filter using the OData framework
    //var s = new ODataQuerySettings() { PageSize = 1 };
    //var results = queryOptions.ApplyTo(data.AsQueryable(), s) as IEnumerable<Poco>;

    //or DIY
    var results = data;
    if (queryOptions.Skip != null) 
        results = results.Skip(queryOptions.Skip.Value);
    if (queryOptions.Top != null)
        results = results.Take(queryOptions.Top.Value);

    return results;
}

public class Poco
{
    public int id { get; set; }
    public string name { get; set; }
    public string type { get; set; }
} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-05-28T09:12:20.870

来自 URL 的查询被转换为 LINQ 表达式树，然后针对您的操作返回的 IQueryable 执行该树。您可以分析表达式并以您想要的任何方式提供结果。缺点是您需要实现 IQueryable，这并不容易。如果您有兴趣，请查看此博客文章系列：http: [//blogs.msdn.com/b/vitek/archive/2010/02/25/data-services-expressions-part-1-intro.aspx](http://blogs.msdn.com/b/vitek/archive/2010/02/25/data-services-expressions-part-1-intro.aspx)。它谈到 WCF 数据服务，但 Web API 使用的过滤器表达式将非常相似。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-28T10:07:31.080

使用 Web-api 的一种方法是使用客户消息处理程序[http://www.asp.net/web-api/overview/working-with-http/http-message-handlers](http://www.asp.net/web-api/overview/working-with-http/http-message-handlers)

**编写一个自定义处理程序，如下所示：**

```
public class CustomHandler : DelegatingHandler
    {
        protected override Task<HttpResponseMessage> SendAsync(
            HttpRequestMessage request, CancellationToken cancellationToken)
        {
            return base.SendAsync(request, cancellationToken).ContinueWith(
                (task) =>
                {
                    HttpResponseMessage response = task.Result;
                    var persons = response.Content.ReadAsAsync<IQueryable<Person>>().Result;
                    var persons2 = new List<Person>(); //This can be the modified model completely different
                    foreach (var item in persons)
                    {
                        item.Name = "changed"; // here you can change the data
                        //persons2.Add(....); //Depending on the results modify this custom model
                    }
                    //overwrite the response
                    response = new HttpResponseMessage<IEnumerable<Person>>(persons2); 
                    return response;
                }
            );
        }
    } 
```

**在 global.asax.cs 中注册**

应用类中的方法：

```
static void Configure(HttpConfiguration config)
 {
     config.MessageHandlers.Add(new CustomHandler()); 
 }

protected void Application_Start()
{
     ....
     .....
     //call the configure method
     Configure(GlobalConfiguration.Configuration);
 } 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-28T12:24:53.557

我用 WCF 数据服务和 asp.net mvc 3.5 做了类似的事情，但这有点麻烦。

第一步是重写路径，以便跳过和顶部选项不会被应用两次，一次由您应用，一次由运行时应用。

我用 HttpModule 进行了重写。在您的 BeginRequest 方法中，您将拥有如下代码：

```
HttpApplication app = (HttpApplication)sender;
if (HttpContext.Current.Request.Path.Contains(YOUR_SVC))
{
    if (app.Request.Url.Query.Length > 0)
    {
        //skip questionmark
        string queryString = app.Request.Url.Query.Substring(1) 
                    .Replace("$filter=", "filter=")
                    .Replace("$orderby=", "orderby=")
                    .Replace("$top=", "top=")
                    .Replace("$skip=", "skip=");

                HttpContext.Current.RewritePath(app.Request.Path, "", queryString);
    }
} 
```

然后只需检查查询字符串并提取您需要的参数。

```
if (HttpContext.Current.Request.QueryString["filter"] != null)
    var filter = HttpContext.Current.Request.QueryString["filter"] as string; 
```

然后拆分过滤器字符串并将其解析为 sql 语句或任何其他 db 命令。在我的案例中，我使用的是 NHibernate。我还能够限制我支持的过滤器命令，这使事情变得更容易。例如，我没有进行分组。主要是比较运算符。

[OData.org](http://www.odata.org/documentation/uri-conventions#FilterSystemQueryOption)上有一个过滤器运算符列表。通过“and”和“or”将字符串拆分为单独的子句。用空格分隔每个子句，您应该得到一个 3 元素数组，其中属性名称在 [0] 中，运算符在 [1] 中，值在 [2] 中。

这些子句将以 Person 的形式出现，但我假设您将能够将它们转换为可以从数据库中提取正确结果的内容。

我最终放弃了这种方法，因为它不适用于 POSTS。我必须编写自己的 Linq 提供程序，但编写自己的过滤字符串解析器使这更容易理解。

# c# - OleDbCommand - Input string was not in a correct format

> ID：10781310
> 
> 赞同：-1
> 
> 时间：2012-05-28T08:07:22.717
> 
> 标签：c#, c#-4.0, ms-access-2007

I have a problem when running my code, an error occurs

> Input string was not in a correct format.

My code is:

```
protected void imgbtn_Save_Click(object sender, EventArgs e)
{

        OleDbCommand cmd = new OleDbCommand();
        cmd.CommandText = "update Companies set CompanyFName='" + txt_ComName.Text + "',CompanySName='" + txt_ShortName.Text + "',CompanyeMail='" + txt_email.Text + "',CompanyWebsite='" + txt_website.Text + "'where CompanyId='"+Convert.ToInt32(lblID.Text)+"'";
       // cmd.Parameters.AddWithValue("@CompanyId", Convert.ToInt32(lblID.Text));
        cmd.Connection = conn;
        OleDbDataAdapter da = new OleDbDataAdapter();
        da.UpdateCommand = cmd;

        cmd.ExecuteNonQuery();
        conn.Close();
        BindGridData();
        lblError.Font.Bold = true;
        lblError.Font.Size = 11;
        lblError.Text = "You have successfully modified the case!"; 
```

I don't know why this happens. Can anyone suggest to me why this might be?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-28T15:50:06.713

```
protected void imgbtn_Save_Click(object sender, EventArgs e)
{

        OleDbCommand cmd = new OleDbCommand();
        cmd.CommandText = "update Companies set CompanyFName='" + txt_ComName.Text + "',CompanySName='" + txt_ShortName.Text + "',CompanyeMail='" + txt_email.Text + "',CompanyWebsite='" + txt_website.Text + "'where CompanyId='"+lblID.Text+"'";
       // cmd.Parameters.AddWithValue("@CompanyId", Convert.ToInt32(lblID.Text));
        cmd.Connection = conn;
        OleDbDataAdapter da = new OleDbDataAdapter();
        da.UpdateCommand = cmd;

        cmd.ExecuteNonQuery();
        conn.Close();
        BindGridData();
        lblError.Font.Bold = true;
        lblError.Font.Size = 11;
        lblError.Text = "You have successfully modified the case!"; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-28T08:21:31.413

我会说是这样的：

```
Convert.ToInt32(lblID.Text) 
```

那是失败的。

如果`lblID.Text`实际上不是整数，则转换将失败。

在使用之前转换为整数会好得多，`TryParse`这样您就可以从无效输入中恢复：

```
int localId = 0;
if (Int32.TryParse(lblID.Text, out localId)
{
    // Carry on
}
else
{
    // Deal with error - this could be just accepting null input as 0
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-28T08:22:12.707

这段代码似乎引发了异常：

```
Convert.ToInt32(lblID.Text) 
```

运行调试器并观察其中的值`lblID.Text`- 如果它真的可以转换为`int`. 名称表明这是`Label`，所以也许你犯了一个错误，它应该是（根据以前的数据）类似于 text_ID 的东西？

# java - getting the error even after setting JAVA_HOME property

> ID：10781311
> 
> 赞同：-1
> 
> 时间：2012-05-28T08:07:24.643
> 
> 标签：java, linux, google-app-engine, java-home

This is the error that i get when i try to run the application based upon google app engine through netbeans. But i have set the `JAVA_HOME` variable :*(see the pic)*

![enter image description here](../Images/9069906dcf9893f881de7f07d0195f65.png)

```
BUILD FAILED
/home/non-admin/NetBeansProjects/Guestbook/nbproject/build-impl.xml:550: The following error occurred while executing this line:
/home/non-admin/NetBeansProjects/Guestbook/nbproject/build-impl.xml:300: Unable to find a javac compiler;
com.sun.tools.javac.Main is not on the classpath.
Perhaps JAVA_HOME does not point to the JDK.
It is currently set to "/usr/lib/jvm/java-1.6.0-openjdk-1.6.0.0/jre" 
```

Then why do i get the errors ?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-28T08:15:04.953

在终端中导出环境变量仅限于您当前的终端会话。您应该编辑主文件夹中的**.bashrc**文件以获得永久解决方案。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-28T08:23:20.743

如果您想继续使用 jdk1.7，请将 java home 添加到 /home/yourname/.bashrc 或 /etc/profile 文件 shell 代码：

```
export JAVA_HOME=/usr/java/jdk1.7.0_02
PATH=$JAVA_HOME/bin:$PATH 
```

并运行“source .bashrc”命令。

如果只运行一次，请添加 env 参数。例如：

```
env JAVA_HOME=/usr/java/jdk1.7.0_02  mvn clean install 
```

# javascript - 被函数变量的 javascript 控制台日志输出弄糊涂了

> ID：10781315
> 
> 赞同：2
> 
> 时间：2012-05-28T08:07:48.343
> 
> 标签：javascript, jquery, html

我是初学者。`javascript/jquery`如果这个问题听起来很傻，请原谅我。

在阅读[本教程](http://fuelyourcoding.com/jquery-events-stop-misusing-return-false/)时，我尝试将函数中一些变量的值写入 javascript `console`，以便更好地理解函数的工作原理

```
$(document).ready(function(){
    $("div.post h2 a").click(function () {
    var a    = $(this),
    href = a.attr('href'),
    content  = a.parent().next();
    console.log('a='+a);
    console.log('a.get(0)='+a.get(0));
    console.log('a parent='+a.parent());
    console.log('a parent.get(0)='+a.parent().get(0));
    console.log("href="+href);
    console.log('content='+content);
    content.load(href + " #content");
    return false; 
}); 
```

我稍微修改了html

```
<div class="post">
    <h2 id="h21"><a href="other/mypage.html">My Page</a></h2>
    <div class="content">
        Teaser text1...
    </div>
</div>
<div class="post">
    <h2 id="h22"><a href="other/myotherpage.html">My Other Page</a></h2>
    <div class="content">
        Teaser text2...
    </div>
</div>
}); 
```

当我点击第一个链接时，我得到这个控制台日志输出

```
a=[object Object]
a.get(0)=file:///home/me/dev/misc/other/mypage.html
a parent=[object Object]
a parent.get(0)=[object HTMLHeadingElement]
href=other/mypage.html
content=[object Object] 
```

我认为 `$(this)`函数中的表达式将是被单击的元素（即第一个`<a element`）。为什么它显示为 [object Object]。我无法弄清楚如何`a.get(0)`变成`file:///home/me/dev/misc/other/mypage.html`

同样，变量不`content`应该等于第一个 `div`（包含 Teaser text1）吗？为什么它显示为 [object Object]？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-28T08:16:04.950

这两行之间有区别：

```
console.log(content);
console.log('content=' + content); 
```

第一个只是记录`content`变量。第二个执行连接操作，在记录之前连接字符串和对象。连接字符串和对象会导致`toString`调用对象的方法，从而导致`[object Object]`. 为避免这种情况，不要进行连接，直接登录`content`。正如 mindandmedia 评论的那样，您可以通过将值作为单独的参数传递给`console.log`：

```
console.log('content=', content); 
```

`href`最后，任何具有属性的原生 DOM 链接元素都有`toString`方法。这将返回`href`值。所以`console.log('a.get(0)=' + a.get(0))`获取集合`href`中第一个元素的值`a`。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-28T08:19:07.933

> 我认为函数中的 $(this) 表达式将是被点击的元素（即第一个 <a 元素）。为什么它显示为 [object Object]。

该变量`a`包含一个 jQuery 对象，并且该`toString`方法没有被覆盖，因此它使用返回对象类型的默认实现。

> 我无法弄清楚 a.get(0) 如何变成 file:///home/me/dev/misc/other/mypage.html

这些`get`方法从 jQuery 对象返回 DOM 元素对象，元素的`toString`方法`<a>`返回链接指向的 URL。

> 同样，变量内容不应该等于第一个div（包含Teaser text1）吗？为什么它显示为 [object Object]？

该变量`content`包含一个包含该元素的 jQuery`<div>`元素。Using`content.get(0)`会给你 DOM 元素。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-28T08:14:32.100

$(this) 是一个 jQuery 对象，这就是它显示为 [object Object] 的原因。所有 jQuery 选择函数都返回一个 jQuery 对象。如上所述，您可以使用 .html() 来获取 jQuery 对象的 HTML，或者使用 .text() 来获取文本。

这是因为 jQuery 是可链接的，因此您可以执行 $(this).next().parent() 等操作。每个“链”返回一个 jQuery 对象，然后可以在其上运行另一个函数。

编辑：

作为旁注，您可以使用 $(this)[0] 返回我相信的 DOM 元素

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-28T08:15:23.380

尝试从每个控制台中删除字符串，以便只输出实际变量。

例如替换：

```
console.log('a='+a); 
```

和

```
console.log(a); 
```

等等。

# mysql - 如何忽略mysql查询中的排序规则

> ID：10781326
> 
> 赞同：2
> 
> 时间：2012-05-28T08:08:47.750
> 
> 标签：mysql, phpmyadmin

我在 mysql 表中有一个字段，其类型为 SET 和排序规则 latin general ci，我正在像这样查询

```
SELECT * FROM `tblCountry` WHERE FIND_IN_SET("KAN", `tLang`) 
```

，它在 sqlyog 中工作正常，但在 phpmyadmin 中它给了我错误

```
#1267 - Illegal mix of collations (utf8_unicode_ci,COERCIBLE) and (latin1_general_ci,IMPLICIT) for operation 'find_in_set' 
```

那么如何忽略排序规则类型，是否有任何解决方法

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-28T08:14:27.377

```
SELECT  *
FROM    tblCoutnry
WHERE   FIND_IN_SET(CAST('KAN' AS CHAR CHARACTER SET latin1) COLLATE latin1_general_ci, tlang) 
```

# c# - 使用页面索引事件在 Formview 中隐藏 Linkbutton 控件

> ID：10781332
> 
> 赞同：0
> 
> 时间：2012-05-28T08:09:15.940
> 
> 标签：c#, asp.net

我希望能够在`Formview`. 我已经定义了一个方法，这样当满足某个要求时，我设置的`Add`和`Update`链接`Delete`按钮将不会显示在我的 Formview 中。我用来实现这一点的代码与下面显示的代码相同。这在初始显示上正常工作。

但是，当使用分页控件时，并且在 Formview 中显示另一个项目时，链接按钮将再次可见。

我尝试使用`FormView1_PageIndexChanging`和`_PageIndexChanged`事件重新隐藏链接按钮，方式如下：

```
 protected void FormView1_PageIndexChanged(object sender, EventArgs e)
    {
        // Check to see if PDP requirement has been removed
        if (txtStatusMessages.Text == "PDP Required has been set to False for this User so PDP cannot be updated or signed off.")
        {
            Control lb_n = FormView1.FindControl("LinkButton_New");
            lb_n.Visible = false;
            Control lb_e = FormView1.FindControl("LinkButton_Edit");
            lb_e.Visible = false;
            Control lb_d = FormView1.FindControl("LinkButton_Delete");
            lb_d.Visible = false;
        }
    } 
```

我意识到检查文本框内容以隐藏控件的想法远非理想；但此时我只想确保可以使用此方法隐藏项目控件。

使用调试器运行此代码时，会在使用寻呼机按钮时触发该事件。可见属性正确地从 true 更改为 false。但是，链接按钮仍然可见。

有谁知道为什么这没有按预期工作？

在此先感谢，加里。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-28T10:38:55.407

我似乎已经解决了这个问题。

最初我尝试使用，它允许我取消将模式从只读更改为编辑（例如，`FormView1_ModeChanging`单击链接按钮时）。`Edit`这有效，但意味着链接按钮仍然可见。

在进一步研究这个问题时，我发现虽然我可以将 Linkbutton 可见属性设置为 false，但它们实际上被重置了。这让我认为我的问题是由于事件排序（可能使用错误的术语）并且刷新`Formview`覆盖了我的更改。

所以，我添加了一个新`HiddenField`的来存储允许编辑类型的数据，它将根据用户是否应该能够更新数据项来设置。然后我将它与 PreRender 事件一起使用，如下所示：

```
 protected void FormView1_PreRender(object sender, EventArgs e)
    {
        if (hfEditAllowed.Value == "false")
        {
            Control lb_n = FormView1.FindControl("LinkButton_New");
            lb_n.Visible = false;
            Control lb_e = FormView1.FindControl("LinkButton_Edit");
            lb_e.Visible = false;
            Control lb_d = FormView1.FindControl("LinkButton_Delete");
            lb_d.Visible = false;
        }
    } 
```

这可能不是一个理想的解决方案，但允许我根据需要管理我的 LinkBut​​tons 的显示。

希望这些信息对其他人有用！加里。

# c# - 如何使用 C# 代码获取可用 SQL Server 的列表？

> ID：10781334
> 
> 赞同：13
> 
> 时间：2012-05-28T08:09:27.523
> 
> 标签：c#, sql-server-2008

我创建了一个桌面应用程序。在应用程序启动时，我想显示本地 PC 上所有可用 SQL Server 实例的列表，并允许选择要连接的 SQL Server 名称。

无论如何要获取本地 PC 上可用的所有 SQL Server 实例名称的列表吗？

非常感谢。

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-05-28T08:11:13.213

```
string myServer = Environment.MachineName;

DataTable servers = SqlDataSourceEnumerator.Instance.GetDataSources();
for (int i = 0; i < servers.Rows.Count; i++)
{
    if (myServer == servers.Rows[i]["ServerName"].ToString()) ///// used to get the servers in the local machine////
     {
         if ((servers.Rows[i]["InstanceName"] as string) != null)
            CmbServerName.Items.Add(servers.Rows[i]["ServerName"] + "\\" + servers.Rows[i]["InstanceName"]);
         else
            CmbServerName.Items.Add(servers.Rows[i]["ServerName"].ToString());
      }
  } 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2014-03-18T06:15:54.357

```
 //// Retrieve the enumerator instance, and then retrieve the data sources.
        SqlDataSourceEnumerator instance = SqlDataSourceEnumerator.Instance;
        DataTable dtDatabaseSources = instance.GetDataSources();

        //// Populate the data sources into DropDownList.            
        foreach (DataRow row in dtDatabaseSources.Rows)
            if (!string.IsNullOrWhiteSpace(row["InstanceName"].ToString()))
                Model.DatabaseDataSourceNameList.Add(new ExportWizardChooseDestinationModel
                {
                    DatabaseDataSourceListItem = row["ServerName"].ToString()
                        + "\\" + row["InstanceName"].ToString()
                }); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-28T08:11:47.690

尝试

```
SqlDataSourceEnumerator.Instance.GetDataSources() 
```

# iphone - 如何像段控制一样使用三个按钮

> ID：10781344
> 
> 赞同：0
> 
> 时间：2012-05-28T08:10:22.633
> 
> 标签：iphone, ios, ios4

![在此处输入图像描述](../Images/b40640479899882cac8ece46c41aa756.png)嗨，谁能告诉我如何使用三个按钮来使用 iPhone 中的分段控制。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-28T08:14:54.700

放置三个带有不同标签的按钮，并用一个 IBAction 将所有三个按钮连接起来，然后利用 switch case 流根据标签做任何事情

```
 -(IBAction)segmentControleChanged:(id)sender
 {

  switch([sender tag]){

      case 1:
      {
        //Do anyting
        break;
      }

      case 2:
      {
         //Do anyting
         break;
      }

      case 3:
     {
        //Do anyting
        break;
      }

      default:
      break;
    }

} 
```

假设您有 3 个带有标签的按钮 1 , 2 ,3

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-28T12:32:33.810

在每个按钮上设置标签。

```
[button1 setTag:0];
[button2 setTag:1];
[button3 setTag:2]; 
```

然后为所有按钮放置相同的@selector 方法。

然后在您的按钮选择器方法中执行以下操作：-

```
 -(IBAction)youButtonMethod:(id)sender
{
    if([sender tag] == 0)
    {
       // your first button click
    }

    else if([sender tag] == 1)
    {
       // your second button click
    }

    else if([sender tag] == 2)
    {
       // your third button click
    }
} 
```

# python - Kivy 刷新图片

> ID：10781345
> 
> 赞同：1
> 
> 时间：2012-05-28T08:10:27.290
> 
> 标签：python, kivy

我有一个用源实例化的图像（kivy.uix.image.Image），但我更改了源文件的数据。如何刷新图像以反映新数据？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-08T11:12:40.660

硬情况，因为文件名用作缓存的关键。您可以在更改源之前清除所有缓存：

```
from kivy.cache import Cache
Cache.remove('kv.image')
Cache.remove('kv.texture')
# then change the source of the image 
```

应该没问题，但效率不高。

正如qua-non所说：

另外，如果您可以使用开发分支或等待 1.3 版本。您可以使用以下功能来实现：:

对于图像小部件 Image.reload()

对于核心图像 Image.remove_from_cache()

# java - 如果应用程序有多个登录页面，如何使用安全模块（播放框架）

> ID：10781348
> 
> 赞同：0
> 
> 时间：2012-05-28T08:10:44.683
> 
> 标签：java, security, authentication, playframework-1.x

问题 - 在我的应用程序中，我有两个不同的模块 1 - 前端视图 2 - 后端管理视图。这两个模块有两种不同的登录表单。并且两个模块的用户身份验证过程也不同。现在在 Secure.java 中，如果用户未通过身份验证，则只有一个操作/方法“login()”来呈现登录页面。那么如果用户未通过身份验证，我应该如何管理各个模块的登录页面的呈现。我可以通过自定义 Secure.java 类和 Secure 模块的路由文件来管理它。但这是一个正确的方法来做到这一点。我还有一个查询重新分级“检查”方法。根据文档，我们需要重写 Security 类中的 check 方法（从 Secure. 安全性）以检查用户的个人资料。我也做了同样的事情，即在 Admin 控制器中添加了检查注释 @Check("admin") 并覆盖了 Security 类中的方法。但是 check 方法（被覆盖的方法）永远不会被调用。为什么会这样？？我这里有什么问题吗？

这是Admin类的结构......

```
@With(Secure.class)
@Check("admin")
public class Admin extends JapidContorller {

  /**
  * An action to render the index page of the Back end admin module.
  */
  public static void index(){
     renderJapid();
  }

  /**
   * An action to render the login page of the Back end admin module.
   */
   public static void adminLogin() {
      renderJapid();
  }

  /**
   * An method to log out the logged in user.
   */
   public static void adminLogout(){
      renderJapid();
   }

} 
```

在安全课上

```
public class Security extends Secure.Security {
    public static boolean authenticate(String username, String password){
      -----------------
      -----------------
    }

    public static boolean check(String profile){
       System.out.println("[Security]  The check from security is called");
       return true;
    }
} 
```

但是，当我请求 Admin.index() 页面时，永远不会调用检查。所以在这里我需要你在两个不同的问题上的帮助。1 ) 如果应用程序有多个登录页面，那么我们应该如何使用安全模块来处理用户的身份验证。2) 被覆盖的检查方法永远不会被调用。

请在这里帮助我。它真的很紧急。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-04T11:40:27.623

您可以使用 Deadbolt 添加授权，然后在调用 DeadboltHandler#onAccessFailure 时分派到所需的登录页面。查看 integration-with-secure 示例应用程序以了解如何执行此操作。

[https://github.com/schaloner/deadbolt/tree/master/samples-and-tests/integration-with-secure](https://github.com/schaloner/deadbolt/tree/master/samples-and-tests/integration-with-secure)

# c++ - 分配给指针失败

> ID：10781351
> 
> 赞同：0
> 
> 时间：2012-05-28T08:11:01.727
> 
> 标签：c++, pointers

我只问这个问题是因为我已经将它隔离为几乎三行代码，所以很明显我只是因为缺乏经验而搞砸了：

```
Movie* ptr;
if(title == r->getItem().getTitle())
{
    ptr = &(r->getItem());
    cout << "Found: " << ptr->getTitle() << "!";
} 
```

本质上发生的事情就是`title == "The Godfather"`这样，因此这就是
`r->getItem().getTitle()`正在返回的内容。但我不明白的是，当我尝试创建一个指向`Movie`由返回的对象的指针时`r.getItem()`，我无法使用该指针。它肯定有分配给它的*东西*，但是当我尝试`ptr->getTitle()`返回 null 时。

到底是怎么回事？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-28T08:19:19.520

我认为你正在做这样的事情

```
Movie& getItem () {
   Movie m ();
   return m;
}

/* ... */

Movie * p = & (getItem ()); 
```

问题是 m 是一个堆栈对象，在 getItem 返回后会丢失。这是 C++ 中的一个常见错误。

getTitle 调用也不应该起作用，但它可能是偶然的。

您必须在堆上创建对象。

我避免这种情况的简单规则：不要完全使用 & 运算符，除非你十次没有考虑过你在做什么。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-28T08:15:22.657

您应该发布更多代码。但很可能**按值**`getItem`返回一个对象，即它返回一个*临时*对象，它是原始对象的副本。分配后 - 这个临时对象被破坏，所以你指向一个被破坏的对象，（可能）无法访问的内存。***`ptr`***

 **** * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-28T08:21:35.500

这里可能会发生很多事情：

1.  getItem() 方法可能不会直接返回 Movie 类，该方法的定义是什么？它可能是一个继承的类，其中 getTitle() 的实现方式不同。
2.  它可能会返回对类的引用，然后超出范围，导致内存错误。
3.  getTitle() 方法可能不会返回您可以流式传输的内容，它真的是一个字符串吗？该方法的定义是什么？***

# jsf-2 - 请求范围页面导航

> ID：10781354
> 
> 赞同：1
> 
> 时间：2012-05-28T08:11:08.360
> 
> 标签：jsf-2, cdi

我正在设计一个使用标准 Java EE 组件（如 JSF 2.0、CDI、EJB 和 JPA）的站点。它处于早期阶段，因此导航非常简单。问题是我在导航时很难保留一些数据。

这是`seminarController`支持bean：

`SeminarController.java`

```
@Named
@RequestScoped
public class SeminarController {
    @Inject
    private SeminarDao seminarDao;

    private int seminarID;
    private Seminar seminar;

    ...
    // Getters and setters
    ...

    public Collection<Seminar> getSeminars() {...}

    public Collection<Seminar> getUpcomingSeminars() {...}

    public void initSeminar() {
        seminar = seminarDao.findSeminar(seminarID);
    }

    public String save() {
        seminarDao.save(seminar);
        return "details";
    }
} 
```

第一页目前只是列出了一些即将举行的并且可能会引起兴趣的研讨会。

`index.xhtml`

```
 <ul>
        <ui:repeat value="#{seminarController.upcomingSeminars}" var="seminar">
            <li>
                <h:link value="#{seminar.title}" outcome="details">
                    <f:param name="id" value="#{seminar.seminarID}"/>
                </h:link>
                on
                <h:outputText value="#{seminar.eventDate}"/>
            </li>
        </ui:repeat>
    </ul> 
```

如您所见，我有一个带有链接的列表，如果我单击该链接，我将转到详细信息页面。我正在使用`f:param`将研讨会的 ID 添加到 HTTP 请求参数中。

详细信息页面显示有关即将举行的研讨会的更多详细信息（当然）。研讨会也可以通过单击链接进行编辑。

`details.xhtml`

```
<f:metadata>
    <f:viewParam name="id" value="#{seminarController.seminarID}"/>
    <f:event type="preRenderView" listener="#{seminarController.initSeminar}"/>
</f:metadata>
<ui:define name="body">

    <h2>#{seminarController.seminar.title}</h2>

    <p>
        <strong>When:</strong>
        #{seminarController.seminar.eventDate}
    </p>
    <p>
        <strong>Where:</strong>
        #{seminarController.seminar.address},
        #{seminarController.seminar.country}
    </p>
    ...
    <p>
        <h:link value="Edit" outcome="edit">
            <f:param name="id" value="#{seminarController.seminarID}"/>
        </h:link> |
        <h:link value="Back to List" outcome="index"/>
    </p> 
```

到目前为止一切顺利，一切正常。

现在我们点击链接编辑研讨会，然后进入编辑页面。我们仍在使用`f:param`当前研讨会的 id。

`edit.xhtml`

```
<f:metadata>
    <f:viewParam name="id" value="#{seminarController.seminarID}"/>
    <f:event type="preRenderView" listener="#{seminarController.initSeminar}"/>
</f:metadata>
<ui:define name="body">
    <h:form>
        <h:messages title="Please correct the errors and try again."/>
        <fieldset>
            <h:panelGroup class="editor-label" layout="block">
                <h:outputLabel value="Seminar Title:" for="title"/>
            </h:panelGroup>
            <h:panelGroup class="editor-field" layout="block">
                <h:inputText id="title" value="#{seminarController.seminar.title}"/>
                <h:message for="title" title="*"/>
            </h:panelGroup>
            ...
            <p>
                <h:commandButton value="Save" action="#{seminarController.save}">
                    <f:param id="id" value="#{seminarController.seminar.seminarID}"/>
                </h:commandButton>
            </p>
        </fieldset>
    </h:form> 
```

这是我开始遇到问题的地方。按下保存按钮时，我想返回详细信息页面。详细信息页面应显示当前研讨会以及最新更新的详细信息。问题是当按下 Save 按钮时，`seminar`对象`seminarController`是`null`.

呈现编辑视图时，研讨会对象被初始化并用于显示表单中的当前值。但是当按下保存按钮时，研讨会对象不再存在于`seminarController`. 并且该`initSeminar`方法也没有被调用。

所以问题是我应该如何设计设计-编辑-设计页面导航？

ViewScope 不起作用，因为我在按保存时导航到新视图。无论如何使用 CDI 时 ViewScope 都不存在。

任何帮助将不胜感激！

* * *

**编辑**

Seminar 类有一些在表单中看不到的字段。

`Seminar.java`

```
@Entity
public class Seminar {
    @Id
    private int seminarID;
    @Column
    private String title;
    @Column
    private Date eventDate;   // Date when the seminar occurs
    @Column
    private Date createdDate; // Not visible in forms
    ...
    // Some more fields and Getters/Setters
} 
```

* * *

**编辑2：**

我最终在`SeminarController`：

`SeminarController.java`

```
@PostConstruct
public void init() {
    if (FacesContext.getCurrentInstance().isPostback()) {
        seminar = new Seminar();
    } else {
        seminar = seminarDao.findSeminar(seminarID);
    }
}

public void setSeminarID(int seminarID) {
    if (this.seminarID != seminarID) {
        seminar = seminarDao.findSeminar(seminarID);
        this.seminarID = seminarID;
    }
}

public String save() {
    seminarDao.save(seminar);
    return "details?faces-redirect=true&includeViewParams=true";
} 
```

然后我`<h:inputHidden value="#{seminarController.seminarID}"/>`将`edit.xhtml`.

`<f:event/>`已相应更改`details.xhtml`并`edit.xhtml`调用该方法`init()`而不是旧的`initSeminar()`.

这似乎可行，尽管我不太喜欢在回发`seminar`中创建对象`new`，然后`seminarID`在设置时将其覆盖。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-28T12:11:59.290

您需要`seminar`在更新模型值阶段发生之前做好自己的准备。预渲染视图事件为时已晚。

其中一种方法是创建一个`@PostConstruct`检查当前请求是否是回发的方法，如果是，则预先创建，`Seminar`以便 JSF 有机会在更新模型值阶段调用其设置器。

```
@PostConstruct
public void init() {
    if (FacesContext.getCurrentInstance().isPostback()) {
        seminar = new Seminar();
    }
} 
```

我不确定是什么`initSeminar()`，但我认为您还需要相应地对其进行更改，以使其仅完成其工作`if (!FacesContext.getCurrentInstance().isPostback())`。

# c# - 通过属性检索进程

> ID：10781362
> 
> 赞同：1
> 
> 时间：2012-05-28T08:11:58.340
> 
> 标签：c#

我正在尝试在我的 Windows 服务的主类中定义一个属性。该属性将用于在需要时检索进程的名称。

例如：

```
public string PName
{
return SomeProcess.Name;
}

public string PID
{
return SomeProcess.ProcessId;
}

public Process SomeProcess
{
private Process[] myProcess = Process.GetProcessesByName("notepad"); //Process is underlined here with red wavy line saying "A get or set accessor method is expected"
get
{return myProcess[0];}
} 
```

问题出在注释中写的 SomeProcess 属性中。我在这里做错了什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-28T08:17:33.580

让它像这样：

```
private Process[] myProcess = Process.GetProcessesByName("notepad"); 
public Process SomeProcess
{
   get
   {
        return myProcess[0];
   }
} 
```

或者

```
public Process SomeProcess
{
   get
   {
        Process[] myProcess = Process.GetProcessesByName("notepad"); 
        return myProcess[0];
   }
} 
```

**编辑**

请注意，您需要决定何时获取进程。如果您按照我在第一个示例中显示的那样进行操作，则将在实例化类时检索该过程。第二种方法更健壮，因为它会在您询问属性值时检索该过程。

我陈述了这两个答案，因为您询问了错误的含义，并且更多的是关于私有和局部变量。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-28T08:16:01.943

试试这个：

```
public Process SomeProcess
{
    get
    {
        Process[] myProcess = Process.GetProcessesByName("notepad");
        return myProcess[0];
    }
} 
```

或这个：

```
private Process[] myProcess = Process.GetProcessesByName("notepad");

public Process SomeProcess
{
    get
    {
        return myProcess[0];
    }
} 
```

如果您想在类的其他地方使用它，请在 getter 中声明`myProcess`为局部变量，或者将其声明为类中的私有字段。`SomeProcess`您可以在字段/方法/类上使用访问器（私有/公共/等），而不是局部变量。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-28T08:17:11.673

访问器（公共/私有/受保护/内部）不能应用于函数局部变量。

[使用辅助功能级别的限制](http://msdn.microsoft.com/en-us/library/cx03xt0t%28v=vs.100%29)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-28T08:23:07.823

如果要声明私有变量，请`get`在属性中声明内部方法。根据您的代码，您需要`GetProcessesByName`在访问之前检查是否返回过程 `myProcess[0]`。您可以使用 `FirstOrDefault`如下方式避免所有这些验证。如果没有结果，它将返回 null。

```
public Process SomeProcess
{
   get
   {
        return Process.GetProcessesByName("notepad").FirstOrDefault();
   }
} 
```

其他属性也有问题。您访问的属性`SomeProcess`不检查 null。

```
public string PName
{
     return SomeProcess==null? string.Empty:SomeProcess.Name;
}

public string PID
{
     return SomeProcess==null? string.Empty:SomeProcess.ProcessId;
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-28T08:23:53.767

我认为你处于非常初级的水平，你应该参考语言代码的语法，找到下面的 C# 代码

```
 public class ProcessInfo
{
    private Process[] myProcess = Process.GetProcessesByName("notepad"); //Process is underlined here with red wavy line saying "A get or set accessor method is expected" 
    public Process SomeProcess
    {
        get
        {
            return myProcess[0];
        }
    }

    public string PName
    {
        get
        {
            return SomeProcess.ProcessName;
        }
    }

    public int PID
    {
        get
        {
            return SomeProcess.Id;
        }

    }
} 
```

# internet-explorer - 如何在 Internet Explorer 的文件菜单栏中添加条目

> ID：10781364
> 
> 赞同：1
> 
> 时间：2012-05-28T08:12:22.163
> 
> 标签：internet-explorer, add-in, ieaddon

有没有办法在 Internet Explorer 中自定义文件菜单。我正在制作一个插件，我想在文件->发送旁边添加一些东西，或者说文件->打印。

通过文档，我看到只能在 IE 中自定义帮助菜单和工具栏。但是我有一些插件可以在文件菜单中添加条目...

# php - 使用 PHP、MySQL 和 MD5 创建登录

> ID：10781365
> 
> 赞同：0
> 
> 时间：2012-05-28T08:12:32.400
> 
> 标签：php, mysql, login, hash, md5

**问题已解决。感谢所有发帖并帮助我的人。列类型很短 (varchar(25)) - 我扩展了它并能够登录。每个人的意见都受到赞赏。**

当我尝试使用我创建的测试帐户登录时遇到了一些问题。我正在尝试制作自己的 CMS。现在我已经完成了注册页面并在登录页面上工作。我在注册时有 MD5 的用户密码。当我尝试使用此帐户登录时，登录页面上生成的哈希永远不会与存储在我的 SQL 数据库中的哈希匹配。

这是我的 PHP 代码和 MySQL 查询：

```
$username = mysql_real_escape_string($_REQUEST['username']);
$password = mysql_real_escape_string($_REQUEST['password']);

$query = mysql_query("SELECT username FROM records WHERE username='".$username."'") or die(mysql_error());  
$result= mysql_fetch_array( $query );

if($result[0] == $username) {

        $query = mysql_query("SELECT password FROM records WHERE username='".$username."'") or die(mysql_error());
        $result = mysql_fetch_array( $query );
        $passHash = md5($password);

        echo "Hash: ".$passHash."<br/>";
        echo "User's hash: ".$result[0];

        if($result[0] == $passHash) {
            echo "XXXXX: WIN";
        }
        else {
           echo "fail";
        } 
```

我有一个名为“alex”的帐户，在注册页面上生成的 MD5 是“1c13465e24d91aca4d3ddaa1b”，在登录页面上生成的 MD5 哈希是“1c13465e24d91aca4d3ddaa1bc3e7027”

这是我的注册页面代码：

```
$username = mysql_real_escape_string($_REQUEST['username']);
$password = mysql_real_escape_string($_REQUEST['password']);
$md5_pass = md5($password);
mysql_real_escape_string(mysql_query("INSERT INTO records (username, password, ) VALUES('$username', '$md5_pass' ) ") or die(mysql_error())); 
```

我究竟做错了什么？我一直在这里搜索并查看：

[使用 php 和 mysql 进行 md5 哈希登录](https://stackoverflow.com/questions/9343807/md5-hash-login-with-php-and-mysql)

但没有运气。任何帮助是极大的赞赏！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-28T08:21:43.887

很可能存储密码哈希的列太短，例如`VARCHAR(25)`.
使其更大：`CHAR(32)`或`BINARY(16)`.
也可以看看：

*   [散列密码字段使用什么数据类型和长度？](https://stackoverflow.com/questions/247304/mysql-what-data-type-to-use-for-hashed-password-field-and-what-length)
*   [在 mysql 中有效存储 md5 哈希的最佳实践](https://stackoverflow.com/questions/2326584/best-practices-for-efficiently-storing-md5-hashes-in-mysql)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-28T08:20:34.733

首先，使用单个 SELECT 语句来获取您的用户数据：

```
$query = mysql_query("SELECT username FROM records WHERE username='".$username."' AND password='".md5($password)."'") or die(mysql_error()); 
```

第二点——不要使用 mysql_* 函数——它们已经过时了。切换到 PDO 或 MySQLi。

您的数据库通行证中可能有空间...

# php - Uploadify：动态FormData不会改变

> ID：10781368
> 
> 赞同：8
> 
> 时间：2012-05-28T08:12:46.343
> 
> 标签：php, upload, uploadify

基于当前的uploadify文档，它使用formData（奇怪的所有google搜索结果，ppl都使用scriptData）。问题是我尝试使用设置和 onUploadStart 事件手动更改 formData，正如这个[uploadify 文档](http://www.uploadify.com/documentation/uploadify/formdata/)所说。但是，该文件夹在到达服务器时始终保持不变（/webroot/newsletter）。它应该是（/webroot/newsletter/update），我正在以这种方式进行测试，因为稍后该值应该是动态的。任何线索这里出了什么问题？[uploadify 论坛](http://www.uploadify.com/forum/#/discussion/8211/method-settings-not-work/p1)中也有另一个问题，但目前没有答案

```
$('#file_upload').uploadify({
                            'method':'POST',
                            'formData' : { 'currentDirPath' : '/webroot/newsletter' } ,
                            'swf'      : '/js/uploadify-v3.1/uploadify.swf',
                            'uploader' : '/js/uploadify-v3.1/uploadify.php',
                            'checkExisting' : '/js/uploadify-v3.1/check-exists.php',
                            'onUploadStart' : function(file) {
                                 $("#file_upload").uploadify('settings', 'currentDirPath', "/webroot/newsletter/update");
                            } ,
                            'onUploadSuccess' : function(file, data, response) {
                                alert('The file was saved to: ' + data);
                            } 
                            // Put your options here
                        }); 
```

* * *

## 回答 #1

> 赞同：30
> 
> 时间：2012-05-29T11:08:03.577

文档是错误的。它应该是：

```
 $("#file_upload").uploadify('settings','formData' ,{'currentDirPath': /webroot/newsletter/update}); 
```

以防万一有人偶然发现这个问题。干杯。

# iphone - 从 iphone iOS 5.1.1 获取地理坐标；iphonels.py 错误——备份文件夹中缺少“Manifest.mbdx”

> ID：10781370
> 
> 赞同：1
> 
> 时间：2012-05-28T08:12:49.110
> 
> 标签：iphone, backup, ios5.1

这是一个新帖子，仅供参考。

我正在尝试从我的 iphone 中获取位置数据以进行艺术项目。我对我的 iphone 进行了备份，并试图从备份的本地副本（位于 ~/Library/Application Support/MobileSync/Backup/folder 中）中存储的数据中获取地理坐标。这是我尝试过的：

1.  [从http://petewarden.github.com/iPhoneTracker/#faq](http://petewarden.github.com/iPhoneTracker/#faq)下载了 iPhone Tracker ，但是当我编译并运行 xcode 项目时，我收到一个错误，即“consolidated.db”丢失（可能来自备份文件夹？我不知道） '不认为我错过了什么，但是有没有办法在没有下面#2的情况下生成这个db文件？）

2.  从终端下载并运行[iphonels.py](http://pastebin.com/hFAt0WQH)（将备份文件夹中的文件名转换为可读字符串？），但出现以下错误：IOError: [Errno 2] No such file or directory: 'Manifest.mbdx'

我认为问题与 #2 有关，即 iOS 5.1 不再在备份文件夹中包含 Manifest.mbdx。听起来我需要使用不需要此文件的解决方法来编辑 iphonels.py？

或者也许还有另一种方法来识别哪个文件是经度和纬度点的数据库？这个[问题](https://stackoverflow.com/questions/6569004/how-to-parse-the-manifest-mbdb-file-in-an-ios-5-0-beta-2-without-manifest-mbdx)似乎是相关的，但我不太确定。

任何帮助是极大的赞赏。

# php - 使用 Open Graph 创建民意调查？

> ID：10781379
> 
> 赞同：0
> 
> 时间：2012-05-28T08:14:07.620
> 
> 标签：php, facebook, facebook-graph-api, facebook-php-sdk

我想通过我的 Facebook 应用创建民意调查。民意调查是预先制作的，用户会将它们发布到他们的时间线。

真的希望它们显示为 Facebook 民意调查/问题已经存在。

试过这个没有成功；[https://developers.facebook.com/blog/post/635/](https://developers.facebook.com/blog/post/635/)

这可能吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-28T10:34:50.287

询问用户的`stream_publish`许可，您将能够将问题发布到他们的时间线。

您的 API 调用需要类似于：

`POST me/questions?question={your_question}&options={answers_as_json}`&allow_new_options={true|false}`

例如：

`POST me/questions?question=Do you like this Question&options=["Yes", "No"]&allow_new_options=false`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-28T13:00:44.503

您可以使用 publish_stream 权限和适当的参数向 PROFILE_ID/questions 发出 HTTP POST 请求，代表用户发布问题。

有关更多信息，请参阅[https://developers.facebook.com/docs/reference/api/user/#questions](https://developers.facebook.com/docs/reference/api/user/#questions)。

# entity-framework-4 - 实体框架和主键

> ID：10781381
> 
> 赞同：0
> 
> 时间：2012-05-28T08:14:19.647
> 
> 标签：entity-framework-4, primary-key

我正在使用实体框架，并尝试使用实体上的静态 Create 方法在数据库中创建新记录。

具体来说，数据库中有一个名为 Alleles 的表，但 CreateAllele 方法要求 Id 的值，即该表的 PK。

我真的需要提供这个吗？不是由数据库自动增加PK吗？

![这是我用 EF 表示的表](../Images/1086f1223077ccca453bcf25b8a6cce4.png)

![这是智能感知请求 PK 值](../Images/54326393c9d3c4522a2af2f746f7c2a4.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-28T17:58:07.243

如果`Id`是一`IDENTITY`列，您可以只提供一个值（例如 -1），EF 将在提交记录 ID 时将其替换为生成的键。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-28T12:04:40.680

您可以使用 SQL Management Studio 来更改列的标识值，也可以在创建脚本中包含标识属性。刷新您的实体图，应该很好。

IDENTITY 是您可以在表上设置的属性。您只能在整个表中的一列上设置此属性。SQL Server 将根据您在创建属性时提供的种子来处理此列的增量。

```
IDENTITY [ ( seed , increment ) ] 
```

Seed — 是用于加载到表中的第一行的值。

增量 — 是添加到已加载的前一行的标识值的增量值。

默认值 – (1,1)

创建新表时如何创建标识列？

```
CREATE TABLE tblEmployees
(
  ID int IDENTITY(1,1),
  Name varchar (200),
  SSN varchar(10)
) 
```

# jquery - IE中的jQuery .live（'input）在删除文本时不起作用

> ID：10781384
> 
> 赞同：2
> 
> 时间：2012-05-28T08:14:33.337
> 
> 标签：jquery, internet-explorer

基于这个问题[根据计数器的值淡入/淡出文本](https://stackoverflow.com/questions/10780756/fade-in-out-text-based-upon-value-of-counter)

我有以下标记：-

```
<textarea id="TextBox1"></textarea>
<br/>
<span id="validator" style="display:none"></span> 
```

和以下 jQuery：-

```
jQuery('#TextBox1').live('input', function() {

    var charLength = $(this).val().length;

    $('#validator').html(charLength + ' of 250 characters used');
    $('#validator').fadeInOrOut(!! charLength);

    if ($(this).val().length > 250) {
        $('#validator').html('<strong>You may only have up to 250 characters !</strong>');
    }

});

jQuery.fn.fadeInOrOut = function(status) {
    return status ? this.fadeIn() : this.fadeOut();
}; 
```

这一切在 Firefox 中运行良好，但在 IE 中，特别是从 textarea 中删除文本时，.live() 事件似乎没有被触发。

这里有一个演示上述内容的小提琴，如果您在 Firefox 中加载功能正常，请在 IE 中加载并将一些文本添加到 textarea，然后使用退格键删除一些文本。

[http://jsfiddle.net/general_exception/CsXU8/](http://jsfiddle.net/general_exception/CsXU8/)

**使用doesent**编辑**`on`似乎有所作为，错误仍然存​​在。**

 *** * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-28T08:19:52.390

根据您的 jQuery 版本，使用[.on()](http://api.jquery.com/on/)而不是 .live()，而不是绑定到`input`，仅用于`keyup`捕获事件

```
jQuery('#TextBox1').on('keyup', function() { }); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-28T08:22:58.337

您可以使用[`keyup`](http://api.jquery.com/keyup/)事件而`input`不是通常不支持的事件。您也可以使用[`on`](http://api.jquery.com/on/)而不是弃用`live`：

```
jQuery(document).on('keyup', '#TextBox1', function() {
    ...
}); 
```

**演示：http:** [//jsfiddle.net/CsXU8/10/](http://jsfiddle.net/CsXU8/10/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-28T08:20:12.537

对于 IE8/9，使用以下代码替换第一行

`jQuery('#TextBox1').on('keyup', function() {`**

# django - Django 用户在创建/权限提升方面的权利

> ID：10781387
> 
> 赞同：3
> 
> 时间：2012-05-28T08:14:46.373
> 
> 标签：django, authorization, administrator, entitlements, privilege-elevation

我遇到了以下问题：如果我给用户工作人员状态并允许他创建用户但不创建新组和分配权利，他仍然可以为另一个用户分配“管理员”权利 - 所以他可以轻松添加比自己拥有更多权利的用户！有没有人在不提供自定义用户模型/视图的情况下找到避免这种情况的方法？

我很感谢任何回应。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-28T08:41:23.443

Django 要求有权限的用户`Can add user`也有权限`Can change user`。引用[文档](https://docs.djangoproject.com/en/dev/topics/auth/)：

> 另请注意：如果您希望自己的用户帐户能够使用 Django 管理站点创建用户，则需要授予自己添加用户和更改用户的权限（即“添加用户”和“更改用户”权限）。如果您的帐户有权添加用户但不能更改用户，您将无法添加用户。为什么？因为如果您有权添加用户，您就有权创建超级用户，然后超级用户可以更改其他用户。因此 Django 需要添加和更改权限作为一项轻微的安全措施。

但是，可以通过修改`ModelAdmin`（或其形式）来限制给定用户分配的权限集。这是[一个](https://stackoverflow.com/a/471661/520779)显示如何重新定义`UserAdmin`.

我相信您的新`ModelAdmin`用户必须：a）过滤掉比您拥有更多权限的用户（因此您无法从他们那里**删除**权限）；b）修改更改用户表单，以便您无法设置`superuser`字段，并且您不允许分配的权限从列表中排除（或完全禁用整个列表 - 但我不知道这就是您真正需要的，对吧？创建一个完全没有权限的用户在 IMO 中几乎没有什么用处）。

**更新：**这是我到目前为止发现的。应该满足上述所有目标，除了权限过滤问题（它的行为就像您在问题中提出的那样 - 拒绝为无权的用户分配**任何**权限）。您可以对其进行修改以更好地满足您的需求（例如，用`.is_superuser`您希望允许/拒绝更改权限的任何逻辑替换）。

```
from django.contrib.auth.admin import UserAdmin
from django.contrib.auth.models import User

class MyUserAdmin(UserAdmin):
    def queryset(self,request):
        qs = admin.ModelAdmin.queryset(self,request)
        if request.user.is_superuser:
            return qs
        # Only allow viewing/editing users who are not superusers
        return qs.filter(is_superuser=False)
    def get_readonly_fields(self, request, obj=None):
        # Deny editing groups, permissions and the superuser status
        return () if request.user.is_superuser else ('is_superuser', 'groups', 'user_permissions')

admin.site.unregister(User)
admin.site.register(User, MyUserAdmin) 
```

# safari - FB.Canvas.setSize() 在 Safari 和 Chrome 中看起来不起作用。如何让它发挥作用？

> ID：10781393
> 
> 赞同：0
> 
> 时间：2012-05-28T08:14:54.827
> 
> 标签：safari, scrollbar, facebook-javascript-sdk, facebook-iframe, facebook-canvas

我正在创建要在 iframe 中加载的 Facebook 画布应用程序。

由于加载了动态数据，内容的高度可能会有所不同，并且无法预先设置。画布应自动调整大小以适应内容。我需要摆脱所有现代浏览器中 iframe 中的垂直滚动条。

我在应用程序的高级设置中设置“画布高度：固定为 800 像素”，并使用推荐的 FB.Canvas.setSize() 解决方案：

```
<body>
    <div id="fb-root"></div>
    <script type="text/javascript">
        window.fbAsyncInit = function () {
            FB.init({
                appId: 'NNNN', // My App ID is placed here
                status: true,
                cookie: true,
                xfbml: true
            });
            FB.Canvas.setSize();
            FB.Canvas.setAutoGrow(7);
        };

        function sizeChangeCallback() {
            FB.Canvas.setSize();
        }

        // Load the SDK Asynchronously
        (function (d) {
            var js, id = 'facebook-jssdk', ref = d.getElementsByTagName('script')[0];
            if (d.getElementById(id)) { return; }
            js = d.createElement('script'); js.id = id; js.async = true;
            js.src = d.location.protocol + "//connect.facebook.net/en_US/all.js";
            ref.parentNode.insertBefore(js, ref);
        } (document));
        ...
    </script>
    ...
</body> 
```

它在 Firefox、MSIE 9 和 Opera 中运行良好。但它不适用于 Windows 上的 WebKit 浏览器：Safari 和 Chrome。

Safari 为画布 iframe 显示以下代码：

```
<iframe class="canvas_iframe_util noresize" frameborder="0" scrolling="no" id="iframe_canvas" name="iframe_canvas" src='javascript:""' height="800" style="height: 800px; overflow-y: hidden; "></iframe> 
```

我究竟做错了什么？是否可以同时在 Firefox、MSIE、Opera、Safari 和 Chrome 中运行？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-02-13T14:24:41.420

我刚刚遇到了看似相同的问题，我认为这是一个与webkit相关的问题。经过大量调试后，我得出的结论是，如果您的页面`<html>`标签设置为`height:100%;`. 我希望这可以帮助一些可怜的灵魂。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-28T08:24:24.773

我只使用'FB.Canvas.setAutoGrow();' （在同一个地方你有它，但没有参数）自动调整我的 iframe 大小，它工作正常。滚动条也被删除。会不会是其他地方有问题？

# python - 使用 PIL 查看 tif 文件，调整大小时质量很差

> ID：10781396
> 
> 赞同：2
> 
> 时间：2012-05-28T08:15:03.553
> 
> 标签：python, resize, python-imaging-library, tiff

我希望在 python 中查看 tif 文件。我尝试使用 PIL 并调整图像大小以适合屏幕，但质量很差。im = image.resize((600, 950), Image.ANTIALIAS) 我使用 Irfanview 将 tif 转换为 jpg 并调整了 jpg 的大小，虽然 jpg 文件在 1.6m 处比 250kB 大 6 倍，但质量很好

在 Irfanview 中，我只是“另存为”而不更改任何默认设置来获取 jpg 文件。

显然，Irfanview 正在做一些 PIL 没有做的事情。

大多数建议说 ANTIALIAS 在调整大小时产生最佳质量，还有其他选择吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-28T08:46:28.313

也许您有一个调色板彩色图像（PIL 中的模式“P”）。抗锯齿不适用于这些。尝试

```
im = image.convert("RGB").resize((600, 950), Image.ANTIALIAS) 
```

您也可以尝试`BICUBIC`代替，`ANTIALIAS`看看哪个更适合您的形象。

# android - 如何在 android 中将 Pdf 页面转换为位图？

> ID：10781398
> 
> 赞同：0
> 
> 时间：2012-05-28T08:15:19.897
> 
> 标签：android

我是 android 新手，你能告诉我在 android 中将 Pdf 文件页面转换为位图的示例吗？

所以，我可以在android中显示为imageview

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-07-21T11:10:47.030

我尝试了很多 PDF 库，最快的是[Mobi PDF Viewer SDK](http://www.androidpdf.mobi/)。做这个：

```
public Bitmap getPiece(String path, String password, int importWidth, int importHeight, int piece_x, int piece_y, int piece_w, int piece_h)
    {
        Document myDoc = new PDFDocument (path); 
        myDoc. Open (path, password); 

        Bitmap result = Bitmap.createBitmap(piece_w, piece_h, Config.ARGB_8888);
        result.eraseColor(0xFFFFFFFF);

        Page page = m_doc.GetPage(pageNumber);

        float w = m_doc.GetPageWidth(pageNumber);
        ratio = importWidth/w;
        w = m_doc.GetPageWidth(pageNumber) * ratio;
        float h = m_doc.GetPageHeight(pageNumber) * ratio;

        Matrix mat = new Matrix(ratio, -ratio, -piece_x, h - piece_y);
        page.RenderToBmp(result, mat);

        page.Close();

        return result;
    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-07-08T17:31:42.867

我用这个库来做到这一点

[https://github.com/jblough/Android-Pdf-Viewer-Library](https://github.com/jblough/Android-Pdf-Viewer-Library)

指令就在那里，而且很容易实施。

# java - 在 Java swing 中切换屏幕

> ID：10781401
> 
> 赞同：4
> 
> 时间：2012-05-28T08:15:32.010
> 
> 标签：java, swing, jframe, jpanel, layout-manager

我在 Android 中为我的客户构建了大型应用程序。新项目是用 Java 为 PC 构建相同的应用程序。所以我开始使用swing进行开发。在 Android 中构建时，我使用具有内容视图的活动的类，并且我可以在活动之间切换。在 java 中，我构建了多个扩展 JFrame 的类，我希望在它们之间切换。正确的方法是什么？

这是：

```
new_class.setVisible(true);
old_class.setVisible(false); 
```

正确的方法？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-05-28T08:28:34.997

使用 Swing 的一般方法是使用适当的策略将所有 GUI 元素“屏幕”组合在一个顶级容器中（通常是 a `CardLayout`，但魔鬼在细节中）。 [此 GUI](https://stackoverflow.com/a/5630271/418556)显示了一些其他选项（`JSplitPane`& 嵌套布局）：

![](../Images/f9e492eec81701d836e83834a893afb0.png)

另请参阅[此答案](https://stackoverflow.com/a/9554657/418556)以了解许多其他选择。

* * *

*对于逻辑上位于不同*容器中的任何其他功能，请使用（可能）模态对话框或`JOptionPane`. EG[登录，从主框架弹出](https://stackoverflow.com/a/10773412/418556)：

![](../Images/f1d7eafde0ed8c95544fb732aaf8690e.png)

* * *

另一件需要考虑的事情是 Swing（带有桌面显示器）允许我们向用户提供更丰富的组件集。例如，浏览 Android SD 卡文件系统通常会通过每个目录使用一个列表来实现，并且要么更改列表的内容，要么在进入新目录时查看。在 Swing 中，您可能会为此使用单曲`JTree`。因此，桌面 GUI 工具包中对“不同屏幕”的需求比设计用于选项卡或手机的工具包要少得多。

这是[文件浏览器](https://stackoverflow.com/questions/6182110/file-browser-gui)中使用的树。

![](../Images/23cdb3ac31746680c2928b202bef1f23.png)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-28T08:18:48.747

正确的方法是从这些创建实例`JFrames`并设置它的可见性。

```
 new Fram1().setVisible(true);

 new Fram2().setVisible(true); 
```

# java - java字符串的效率

> ID：10781404
> 
> 赞同：1
> 
> 时间：2012-05-28T08:15:47.977
> 
> 标签：java, android

当我们扩展 DefaultHandler 时，我们通常会覆盖 characters 函数。

我想知道哪种方法可以更有效地提取提供的字符串...

* * *

1.  **它会使用 for 循环和 StringBuilder 吗？**

    ```
    @Override
    public void characters(char[] ch, int start, int length) throws SAXException {
        StringBuilder sb = new StringBuilder(length); 
        for(int i=start; i<start+length; i++)
            sb.append(ch[i]);
        String values = sb.toString();
    } 
    ```

2.  **它会使用一个简单的子字符串吗？**

    ```
    @Override
    public void characters(char[] ch, int start, int length) throws SAXException {
        String values = (new String(ch)).substring(start, start + length);
    } 
    ```

3.  **还有另一种方法吗？**

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-28T08:20:03.573

有[一个构造函数](http://docs.oracle.com/javase/6/docs/api/java/lang/String.html#String%28char%5B%5D,%20int,%20int%29)，它需要一个 char[] 和一个范围，如果这是您正在寻找的：

```
new String(ch, start, length); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-28T08:26:42.597

字符串类具有新的构造函数，可以满足您的要求如下

```
1) new String(char[] value)

2) new String(char[] value, int StartIndex, int numberOfCharacter) 
```

# views - 查看 Facebook 页面选项卡时出现问题

> ID：10781414
> 
> 赞同：0
> 
> 时间：2012-05-28T08:16:30.303
> 
> 标签：views, facebook-page

我需要帮助，因为现在我看不到我的 Facebook 应用程序。我没有看到页面，但我看到 css 代码不是我的，如下所示：

```
.dialog_body .dialog_option{padding:14px 0 7px 0}
.dialog_body .dialog_option input{width:13px;height:13px;padding:0;margin:0;vertical-align:bottom;position:relative;top:0;overflow:hidden}
.dialog_body .dialog_option .dialog_option_text{padding-left:5px;text-indent:-15px}
.friendshipPageLikes .mediaRow{padding-bottom:10px}
.friendshipPageLikesNoSubheader .label{display:none}
.friendshipRecommendationDoublePic{width:55px}
.fbTimelineAds .friendshipRecommendationDoublePic{width:74px}
.fbTimelineAds .friendshipRecommendationDoublePic .uiProfilePhoto{padding-right:5px}
.fbTimelineAds .uiTypeahead{margin-bottom:5px}
.friendshipRecommendationDoublePic .uiProfilePhoto{padding-right:1px}
#pagelet_friendship_wall .uiComposer ul{padding-left:5px}
#pagelet_friendship_status_text{line-height:15px;padding-top:4px;width:490px;color:#666}
.friendshipPageGroups{padding-top:8px;padding-bottom:8p 
```

这个应用程序，您可以通过智能手机清楚地看到我的帐户。

我尝试了我的业务的几个帐户，但我看到了同样的事情。可能取决于这个错误？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-05T14:04:02.160

这看起来像，它只发生在http上。当您使用 https 而不是 http 时，它会按预期工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-28T10:30:01.370

我在很多 Facebook 页面上也注意到了这一点（包括我自己的一些页面）。

它与 Facebook 更改`<iframe>`s 的 URL 有关：

```
Before: www.facebook.com/pageusername?sk=app_YOUR_APP_ID

Now:    www.facebook.com/pageusername/app_YOUR_APP_ID 
```

如果您在 Facebook 权限对话框请求中将其更改为旧问题，此问题将得到解决。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-01T08:22:38.313

对我来说，它随机无法与 Chrome 一起使用，而是与 Firefox 一起使用！可能是一些奇怪的 Javascript Facebook 错误。

还有一个错误报告，请看这里：

[http://developers.facebook.com/bugs/185936138199048?browse=search_4fc87b4f9afb20978011909](http://developers.facebook.com/bugs/185936138199048?browse=search_4fc87b4f9afb20978011909)

# mysql - 将巨大的 XML 文件导入 MySQL

> ID：10781417
> 
> 赞同：1
> 
> 时间：2012-05-28T08:16:58.413
> 
> 标签：mysql, xml, import

我正在下载一个 900mb 的 XML 文件，客户希望我将其上传到 MySQL 数据库中的单个表中。我不得不在一两周前插入一个 6mb 的文件，我将文件转换为可以在 phpmyadmin 中运行的 SQL 查询，但这需要相当长的时间。

这次我该怎么办？谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-28T08:25:00.613

我会看看文件是否可以转换为 CSV 格式。由于不处理 XML，因此导入 MySQL 表会快得多。您只需要小心为每列输入的数据类型。

如果客户端无法以 CSV 格式提供给您，并且这是一次性上传，请尝试使用 MS Excel/Libre Calc/OpenOffice Calc 自行转换。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-28T13:22:00.173

如果每周发生一次，并且 XML 和数据库结构保持不变，请使用 sax 解析器（而不是使用 Dom）生成 SQL 文件并通过 mysql 命令行导入。

mysql -u 用户 -p 数据库名称 < import.SQL

您可以在上传到服务器之前压缩 SQL 文件以更快地获取它

您可以根据需要考虑锁定表以进一步提高性能（如果系统可以处理） [http://dev.mysql.com/doc/refman/5.1/en/lock-tables.html](http://dev.mysql.com/doc/refman/5.1/en/lock-tables.html)

# c# - 为什么 DateTime.AddHours 似乎不起作用？

> ID：10781420
> 
> 赞同：20
> 
> 时间：2012-05-28T08:17:23.640
> 
> 标签：c#, .net, datetime

当我这样做时，我有相同的结果 1338161400

```
 DateTime origin = new DateTime(1970, 1, 1, 0, 0, 0, 0);
    DateTime date = DateTime.Parse(@"28/05/12 01:30");
    TimeSpan diff = date.ToUniversalTime() - origin;
    Console.WriteLine( (Math.Floor(diff.TotalSeconds)).ToString()); 
```

以及当我使用 date.AddHours(-4) 时：

```
 DateTime origin = new DateTime(1970, 1, 1, 0, 0, 0, 0);
    DateTime date = DateTime.Parse(@"28/05/12 01:30");
    date.AddHours(-4);
    TimeSpan diff = date.ToUniversalTime() - origin;
    Console.WriteLine( (Math.Floor(diff.TotalSeconds)).ToString()); 
```

我尝试像[http://www.mbari.org/staff/rich/utccalc.htm一样获得 1338168600](http://www.mbari.org/staff/rich/utccalc.htm)

更新：

谢谢我改成

```
 DateTime origin = new DateTime(1970, 1, 1, 0, 0, 0, 0);
    DateTime date = DateTime.Parse(@"28/05/2012 01:30");
    date = date.AddHours(-4);
    date = date.ToUniversalTime();
    TimeSpan diff = date - origin;
    Console.WriteLine((Math.Floor(diff.TotalSeconds)).ToString()); 
```

但我得到了 1338147000 仍然不是 1338168600

* * *

## 回答 #1

> 赞同：68
> 
> 时间：2012-05-28T08:19:42.037

日期是不可变的对象，即它们在创建后不能被修改。DateTime.AddHours 返回一个新的 DateTime 实例，该实例向后移动 4 小时，但不会修改“日期”。

采用：

```
DateTime newDate = date.AddHours(-4); 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-05-28T08:19:23.610

`AddHours`返回一个*新* `DateTime`对象，该对象是将小时数添加到原始对象上的结果。原件保持不变。

因此，您想要`date = date.AddHours(-4);`的不仅仅是`date.AddHours(-4);`

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-05-28T08:20:48.057

原始日期向后设置了 4 小时，但您没有将其设置为新日期。试试这个：

```
date = date.AddHours(-4); 
```

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2012-05-28T08:19:41.117

`AddHours`只需返回新的递增日期，使用这个：

```
date = date.AddHours(-4); 
```

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2015-10-27T19:41:59.950

DateTime 不是一成不变的。只是 DateTime 方法不会更改结构，而是返回一个新结构。

如果你这样做：

```
DateTime d1 = DateTime.Now;
DateTime d2 = DateTime.Now;
d1 = d2; 
```

然后，结构 d1 将被 d2 的值覆盖。

我不知道是否有可能拥有一个不可变的结构。

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2012-05-28T08:20:40.023

AddHours 返回新的 DateTime 对象。做这个：

```
date = date.AddHours(-4); 
```

文档：[链接](http://msdn.microsoft.com/en-us/library/system.datetime.addhours.aspx)

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2018-03-28T00:31:44.737

试试这是否有效：

```
System.DateTime today = System.DateTime.Now;
System.TimeSpan duration = new System.TimeSpan(0, 11, 0, 0);
System.DateTime answer = today.Add(duration);
System.Console.WriteLine("{0:dddd}", answer); 
```

这似乎改变了日期中的日期，也增加了小时数。

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2021-12-01T12:22:38.593

这是我的解决方案：

```
 private DateTime SetTime(DateTime datetime, string span="max")
     {
        var hour = datetime.Hour;
        var min = datetime.Minute;
        var sec = datetime.Second;
        if (span == "min")
            datetime = datetime.Add(new TimeSpan(-hour, -min, -sec));
        else
            datetime = datetime.Add(new TimeSpan(23-hour, 59-min, 59-sec));
        return datetime;
     }

     public void GetDateTimes()
     {
            var start = "1/1/2022";
            var end = "31/3/2022";
            var cultureInfo = new CultureInfo("es-ES");
            var startDate = DateTime.Parse(start, cultureInfo);
            var endDate = DateTime.Parse(end, cultureInfo);
            if (startDate > endDate)
                (startDate, endDate) = (endDate, startDate);
            startDate = SetTime(startDate, "min");
            endDate = SetTime(endDate);
            Console.Writeline($"start: {startDate} - end: {endDate}");
            // returns: start: 01/01/2022 00:00:00 - end: 31/03/2022 23:59:59
    } 
```

方法 SetTime 使您想要的。

GetDateTimes 方法防止交换开始（旧日期）和结束（新日期）。

（我从这个[问题](https://stackoverflow.com/questions/38219596/set-a-datetime-to-235959)出发。）

# mysql - 在 Rails 中禁用直接 SQL 查询

> ID：10781421
> 
> 赞同：0
> 
> 时间：2012-05-28T08:17:25.517
> 
> 标签：mysql, ruby-on-rails, activerecord

我们正在运行一个 rails+mysql 应用程序。在我的具体要求中，我希望我的所有开发人员只能通过 rails API 访问 mysql。我想禁用 ActiveRecord 之外的所有直接 mysql 查询。

这是因为我们在 activerecord 上运行了很多回调来维护数据的完整性。

如何实施？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-28T09:09:14.957

> 如何实施？

代码审查。

您不会阻止“ActiveRecord 之外的直接 mysql 查询”，因为您可以使用 ActiveRecord 进行直接 SQL 查询：

```
Model.find_by_sql("DELETE * FROM admin_table") 
```

您最好的方法可能是确保您的开发人员编写的代码遵循您确定的最佳实践。通过同行评审过程和教育来做到这一点。

# sql - 使用 CSV (SQL) 从临时表批量更新/插入

> ID：10781423
> 
> 赞同：0
> 
> 时间：2012-05-28T08:17:37.090
> 
> 标签：sql, csv

我目前正在尝试使用来自临时表的批量插入和来自 CSV 的信息，然后将此表的详细信息添加到当前表中（不必删除正确的表，因为它已经包含信息）我目前得到了这个：

请忽略一开始就删除的表，这是出于测试目的。现在，我对下一步需要做什么感到困惑，我是否只想使用更新表并声明列名并使用 FROM 语句。

```
DROP TABLE #Currencies

CREATE TABLE #Currencies(
suffix nvarchar(50) NULL,
name nvarchar(50) NULL,
iso nvarchar(50) NULL)
GO

BULK INSERT #Currencies
FROM 'C:\Documents and Settings\ntaylor\Desktop\Currencies.csv'
WITH(
FIELDTERMINATOR = ',',
ROWTERMINATOR = '\n')
GO

ALTER TABLE #Currencies
ADD version_number int NOT NULL default 1,
[precision] int NULL,
cur_id  [uniqueidentifier] NOT NULL default newid(),
exchange_rate decimal(19,5) NULL,
[default] bit NULL
GO

UPDATE #Currencies
SET [precision] = 2, exchange_rate = 1, [default] = 0

ALTER TABLE tbl_ecom_currency
ALTER COLUMN suffix nvarchar(50)

INSERT INTO tbl_ecom_currency (suffix, name, iso, version_number, [precision], cur_id, exchange_rate, [default])
SELECT  suffix, name, iso, version_number, [precision], cur_id, exchange_rate, [default]
FROM #Currencies 
```

执行此查询后，我似乎遇到了一个问题，即它正在创建表中的所有行，但它们似乎不是正确的行，因为当我单击编辑前 200 行时它们不存在但是当我选择时它似乎工作选择前 1000 行，但它每次都会创建它们，所以我现在有 1000 多行而不是 150 多行

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-28T08:44:43.380

确保您有一种将现有表与临时表链接的方法，例如在名称或 ID 上。假设您的现有表中已经有 Name，并且现有表称为 Currencies。

此时，您将需要更改您的货币表以包含新列（如果尚未这样做）。

然后按照以下方式更新货币（假设名称可用于关联货币和#Currencies）：

```
UPDATE c SET c.prefix=t.prefix, c.iso=t.iso FROM Currencies c JOIN #Currencies t ON c.Name=t.Name 
```

为了更好地理解发生了什么，请尝试使用相同 FROM 子句的 SELECT * （取决于数据库和客户端，可能存在关于重复名称的错误，在这种情况下明确命名所有列）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-28T10:12:33.270

我已经设法找到了一种工作方法，使用以下代码我能够很好地执行它。

```
DROP TABLE #Currencies

CREATE TABLE #Currencies(
prefix nvarchar(50) NULL,
name nvarchar(50) NULL,
iso nvarchar(50) NULL)
GO

BULK INSERT #Currencies
FROM 'C:\Documents and Settings\ntaylor\Desktop\Currencies.csv'
WITH(
FIELDTERMINATOR = ',',
ROWTERMINATOR = '\n')
GO

ALTER TABLE #Currencies
ADD version_number int NOT NULL default 1,
[precision] int NULL,
cur_id  [uniqueidentifier] NOT NULL default newid(),
exchange_rate decimal(19,5) NULL,
created datetime NULL,
[default] bit NULL
GO

UPDATE #Currencies
SET [precision] = 2, exchange_rate = 1, [default] = 0, created = GetDate()
GO

ALTER TABLE tbl_ecom_currency
ALTER COLUMN prefix nvarchar(50)
GO

INSERT INTO tbl_ecom_currency (prefix, name, iso, version_number, [precision], cur_id, exchange_rate, [default], created)
SELECT  prefix, name, iso, version_number, [precision], cur_id, exchange_rate, [default], created
FROM #Currencies 
```

# python - “HTTPConnectionPool”对象没有属性“get_url”

> ID：10781424
> 
> 赞同：0
> 
> 时间：2012-05-28T08:17:47.477
> 
> 标签：python, urllib3

这是我的代码：

```
import urllib3

url='http://www.google.com/'

http_pool = urllib3.connection_from_url(url)

content = http_pool.get_url('/')

print (content.info())
print ('----------------------------')
page = content.read()

print (page) 
```

错误：

```
Traceback (most recent call last):
  File "C:\python\test.py", line 24, in <module>
    content = http_pool.get_url('/')
AttributeError: 'HTTPConnectionPool' object has no attribute 'get_url' 
```

我谷歌它，但没有什么相关的。太奇怪了，我想不通...

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-28T08:25:26.310

从[`urllib3 docs`](http://readthedocs.org/docs/urllib3/en/1.2.1/pools.html#urllib3.connectionpool.HTTPConnectionPool.get_url)

```
get_url(url, fields=None, **urlopen_kw)
Deprecated since version 1.0.

Use request() instead. 
```

# ms-access - 是否可以在 MS Access 的链接表中使用下拉列表

> ID：10781426
> 
> 赞同：0
> 
> 时间：2012-05-28T08:17:56.947
> 
> 标签：ms-access, ms-access-2007

我有一个 Access 前端和一个 MySQL 后端。是否**可以**在链接表中有一个下拉列表。如果是这样，怎么做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-28T08:23:57.090

通常，您会在 Access 中的设计视图中打开表。
然后选择该字段，然后在窗口的底部，转到查找选项卡。
然后选择组合框作为显示控件，并填写所有参数。

第一次看有点复杂，建议你点进去每个属性按F1看帮助（即使每个新版本的MS产品帮助都比较差）。
[http://office.microsoft.com/en-ca/access-help/create-a-list-box-combo-box-or-drop-down-list-box-HP005240581.aspx](http://office.microsoft.com/en-ca/access-help/create-a-list-box-combo-box-or-drop-down-list-box-HP005240581.aspx)

# javascript - 获取选定的导航栏 jquery mobile

> ID：10781427
> 
> 赞同：0
> 
> 时间：2012-05-28T08:18:03.950
> 
> 标签：javascript, jquery, jquery-mobile

我是移动开发新手，我正在开发一个简单的移动应用程序。我正在使用 jquery mobile。
如何获取所选导航栏的值？
我的第一页是这样的：

```
<div data-role="page" data-title="first" id="first"  > 

         <div data-role="header" data-position="fixed" id="myheader">
         <div data-role="navbar">
         <ul>
            <li><a href="#"  class="ui-btn-active ui-state-persist">V</a></li>
            <li><a href="#"  class="ui-btn-active ui-state-persist">B</a></li>
            <li><a href="#"  class="ui-btn-active ui-state-persist">R</a></li>
            <li><a href="#"  class="ui-btn-active ui-state-persist">C</a></li>
        </ul>
        </div>
     </div>
         <div data-role="content" id="de">
         <a href="#" data-role="button" onclick="simpldial()" >Afficher</a>
    </div>
</div> 
```

函数 simpledial 是这样的：

```
function simpledial() {

    $('div #body').simpledialog2({
            mode: 'blank',
            headerText: '' ,
            headerClose: false,
            blankContent : 
              "<ul data-role='listview'>" +
                    "<li><a href='#second'>go second page</a></li>" +

              "</ul>"+
                "<a rel='close' data-role='button' href='#'>Close</a>"
          });
} 
```

第二页：

```
<div data-role="page" data-title="second" id="second"  > 

         <div data-role="header" data-position="fixed" id="myheader">

     </div>

<div data-role="content" id="dd">

        <!-- Here i want to get the selected navbar in the first page -->
    </div>

     </div> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-28T08:42:07.080

`ui-btn-active`在您发布的代码中，由于您添加的类，所有按钮都处于活动状态。

您应该**只**将该类与`ui-state-persist`您想要激活的导航一起使用。固定后，它会很简单：

```
$('a.ui-btn-active').text(); 
```

您将获得当前导航栏的文本。如果您想在应用程序的**所有**页面中选择它，您应该将该 getter 绑定到`pageBeforeCreate`事件：

```
$( '#aboutPage' ).on('pagebeforecreate',function(event){
  var currentNav = $('a.ui-btn-active').text();
  // Do fancy things with it
}); 
```

# c# - 从 ORACLE 函数中提取返回值

> ID：10781428
> 
> 赞同：2
> 
> 时间：2012-05-28T08:18:08.937
> 
> 标签：c#, oracle

我必须从 Oracle 函数中提取一个返回值，好的

这是一个函数：

```
FUNCTION set_idoc
    (Pidoctyp       in varchar2,    -- tip idoc-a
     Pdirect        in varchar2,    -- smjer idoc-a
     Psgln01        in varchar2,    -- identifikator pošiljatelja
     Prgln01        in varchar2,    -- identifikator primatelja
     Pdtdc01        in varchar2,    -- datum i vrijeme kreiranja poruke
     Pbodi01        in varchar2)    -- identifikator
return number is

Lidoc_num       NUMBER;
Lind_obr        AGR3PL_IDOC.ind_obr%TYPE;
BEGIN

    SELECT SEQ_IDOC.nextval, DECODE(Pdirect, '1', 'U', 'P')
      INTO Lidoc_num, Lind_obr
      FROM DUAL;

    INSERT INTO AGR3PL_IDOC (idoc_num, direct, idoctyp, sgln01, rgln01, dtdc01, bodi01, ind_obr)
    VALUES (Lidoc_num, Pdirect, Pidoctyp, Psgln01, Prgln01, Pdtdc01, Pbodi01, Lind_obr);

    return Lidoc_num;
EXCEPTION
    when others then raise;
END; 
```

所以我需要提取一个 Lidoc_num 值

我试过这样：

```
System.Data.OracleClient.OracleParameter Lidoc_num = new  System.Data.OracleClient.OracleParameter();
Lidoc_num.Direction = ParameterDirection.ReturnValue;
  Lidoc_num.Size = 16;
                        com1.Parameters.Add(Lidoc_num);

                        //Predaj parametre funkciji i vrati broj dokumneta iz baze
                        com1.CommandText = "TRB01.set_idoc('DOC','1','"
                                                           + sender + "','"
                                                           + reciver + "','"
                                                           + cre_date + "','"
                                                           + bod_ID + "')";
                        com1.ExecuteNonQuery();

                        Lidoc_num = com1.Parameters[0].Value; 
```

但是没有，所以我该怎么做

谢谢前面！！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-28T08:47:13.023

解决这个问题！！它必须是这样的：

```
System.Data.OracleClient.OracleParameter prm = new System.Data.OracleClient.OracleParameter();
                prm.Direction = ParameterDirection.ReturnValue;
                prm.DbType = DbType.AnsiString;
                prm.Size = 16;
                com1.Parameters.Add(prm);

                com1.CommandText = "TRB01.set_idoc('DOC','1','"
                                                   + sender + "','"
                                                   + reciver + "','"
                                                   + cre_date + "','"
                                                   + bod_ID + "')";
                com1.ExecuteNonQuery();

                Lidoc_num = com1.Parameters[0].Value.ToString(); 
```

# php - 在 php 中生成带有换行符的 csv 时出现小故障

> ID：10781431
> 
> 赞同：1
> 
> 时间：2012-05-28T08:18:25.187
> 
> 标签：php, mysql, excel, csv

我只是根据存储在 mysql 表中的数据生成一个 csv 文件。生成的 csv 在 excel 中打开时，看起来基本没问题，但只要它有换行符，excel 就会将数据放在新行上。知道如何防止这种情况吗？

样本数据

```
line 1 some data
another data 
```

CSV 生成代码：

```
header("Content-Type: text/csv; charset=UTF-8");
header("Content-Disposition: attachment; filename=\"".$MyFileName."\"");
$filename = $MyFileName;
$handle = fopen("temp_files/".$filename, "r");
$contents = fread($handle, filesize("temp_files/".$filename));
fclose($handle);
echo $contents;  
exit; 
```

我用来摆脱新行的内容片段（没有用）：

```
$pack_inst = str_replace(',',' ',$get_data->fields['pack_instruction']);
        $pack_inst = str_replace('\n',' ',$pack_inst);
        $pack_inst = str_replace('\r',' ',$pack_inst);
        $pack_inst = str_replace('\r\n',' ',$pack_inst);
        $pack_inst = str_replace('<br>',' ',$pack_inst);
        $pack_inst = str_replace('<br/>',' ',$pack_inst);
        $pack_inst = str_replace(PHP_EOL, '', $pack_inst);
        $pattern = '(?:[ \t\n\r\x0B\x00\x{A0}\x{AD}\x{2000}-\x{200F}\x{201F}\x{202F}\x{3000}\x{FEFF}]|&nbsp;|<br\s*\/?>)+';
        $pack_inst = preg_replace('/^' . $pattern . '|' . $pattern . '$/u', ' ', $pack_inst);
        $content .=','.$pack_inst; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-28T08:53:32.457

根据[RFC 4180](https://www.rfc-editor.org/rfc/rfc4180#section-2)，如果列的内容包含行分隔符 ( `\r\n`)、列分隔符 ( `,`) 或字符串分隔符 ( `"`)，则必须将内容括在双引号内`"`。当你这样做时，你必须`"`在内容中的所有字符前面加上另一个`"`. 所以下面的 CSV 内容：

```
1: OK,2: this "might" work but not recommended,"3: new
line","4: comma, and text","5: new
line and ""double"" double quotes"
1: Line 2 
```

将生成 2 行 CSV 数据，第一行包含 5 列。

说了这么多，看看[`fputcsv()`](http://php.net/manual/en/function.fputcsv.php)功能。它将为您处理最血腥的细节。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-28T08:36:14.253

您显示的不是 CSV*生成*代码，它只是您用来强制下载到浏览器的代码。无论如何，您需要解决这个问题的功能是[`fputcsv()`](http://php.net/manual/en/function.fputcsv.php)，它将自动考虑您编写的将表格数据转换为 CSV 格式的任何代码都可能不会考虑的各种边缘情况。

你说你是基于 MySQL 表中的数据，这里是创建 CSV 文件的基本框架，假设 MySQLi 扩展以程序方式使用：

```
<?php

  // Connect to database and generate file name here
  $fileName = 'file.csv';

  // Get the data from the database
  $query = "
    SELECT *
    FROM table_name
    WHERE some_column = 'Some Value'
    ORDER BY column_name
  ";
  if (!$result = mysqli_query($db, $query)) {
    // The query failed
    // You may want to handle this with a more meaningful error message
    header('HTTP/1.1 500 Internal Server Error');
    exit;
  } else if (!mysqli_num_rows($result)) {
    // The query returned no results
    // You may want to handle this with a more meaningful error message
    header('HTTP/1.1 404 Not Found');
    exit;
  }

  // Create a temporary file pointer for storing the CSV file
  $tmpFP = fopen('php://temp', 'w+');

  // We'll keep track of how much data we write to the file
  $fileLength = 0;

  // Create a column head row and write first row to file
  $firstRow = mysqli_fetch_assoc($result);
  $fileLength += fputcsv($tmpFP, array_keys($firstRow));
  $fileLength += fputcsv($tmpFP, array_values($firstRow));

  // Write the rest of the rows to the file
  while ($row = mysqli_fetch_row($result)) {
    $fileLength += fputcsv($tmpFP, $row);
  }

  // Send the download headers
  header('Content-Type: text/csv; charset=UTF-8');
  header('Content-Disposition: attachment; filename="'.$fileName.'"');
  header('Content-Length: '.$fileLength);

  // Free some unnecessary memory we are using
  // The data might take a while to transfer to the client
  mysqli_free_result($result);
  unset($query, $result, $firstRow, $row, $fileName, $fileLength);

  // Prevent timeouts on slow networks/large files
  set_time_limit(0);

  // Place the file pointer back at the beginning
  rewind(tmpFP);

  // Serve the file download
  fpassthru($tmpFP);

  // Close the file pointer
  fclose($tmpFP);

  // ...and we're done
  exit; 
```

# opengl - OpenGL 统一缓冲区 std140 布局

> ID：10781434
> 
> 赞同：3
> 
> 时间：2012-05-28T08:18:33.097
> 
> 标签：opengl, shader, uniform

我正在尝试通过 GeForce 8600 GT 上的统一块（一切都根据 GLSL“#version 330”）将整数数组传递给片段着色器。

在应用程序的一侧，我有：

```
int MyArray[7102];
…
//filling, binding, etc
…
glBufferData(GL_UNIFORM_BUFFER, sizeof(MyArray), MyArray, GL_DYNAMIC_DRAW); 
```

在我的片段着色器中，我根据块声明如下：

```
layout (std140) uniform myblock
{
int myarray[7102];
}; 
```

问题是在 glCompileShader 成功后 glLinkProgram 返回一个错误，指出它无法绑定适当的存储资源。

一些额外的事实：

1) GL_MAX_UNIFORM_BLOCK_SIZE 返回值 65536

2）如果我将元素的数量减少到 4096，它可以正常工作，并且无论我使用“int”还是“ivec4”作为数组类型都没有区别。任何高于 4096 的东西都会给我同样的“存储错误”</p>

3）如果我使用“共享”或“打包”，一切都像怀疑的那样工作

在咨询了 std140 的 GLSL 3.3 规范后，我假设对齐/填充存在问题：

“1) 如果成员是一个消耗 N 个基本机器单元的标量，则基本对齐是 N。

...

4) 如果成员是标量或向量数组，则根据规则 (1)、(2) 和 (3) 设置基对齐和数组跨度以匹配单个数组元素的基对齐，并四舍五入直到 vec4 的基本对齐。数组末尾可能有填充；数组后面成员的基本偏移量向上舍入到基本对齐的下一个倍数。”</p>

我的问题：

1）“myblock”占用的空间是 7102*4=28408 字节的 4 倍，这是真的吗？即std140将myarray的每个成员扩展为vec4，实际内存使用量为7102*4*4=113632字节，这是问题的原因吗？

2）它与“共享”或“打包”一起工作的原因是由于优化消除了这些差距？

3）也许这是一个驱动程序错误？所有事实都表明“......并向上舍入到 vec4 的基本对齐”是原因，但很难接受像 int 数组这样简单的东西在内存限制方面的效率降低了 4 倍。

4）如果它不是一个错误，那么在std140的情况下我应该如何组织和访问一个数组？我可以使用“ivec4”来优化数据分布，但是我不得不牺牲性能来代替简单的 x=myarray[i/4][i%4] 来引用每个 ivec4 的各个元素? 还是我错过了什么并且有明显的解决方案？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-28T08:56:26.900

> 1) (...) 四舍五入到 vec4 的基本对齐？（……）

是的。

> 2）它与“共享”或“打包”一起工作的原因是由于优化消除了这些差距？

是的; 只是这不是优化性能。

> 3）也许这是一个驱动程序错误？

编辑~~不。GPU 自然地与矢量化类型一起工作。打包类型需要添加进一步的指令来解/复用向量。~~自从写下这个答案以来，GPU 架构发生了重大变化。如今制造的 GPU 都是单标量架构，其设计强调强大的超标量矢量化。

> 4）如果它不是一个错误，那么在std140的情况下我应该如何组织和访问一个数组？

不要对如此大的数据使用统一的缓冲区对象。将数据放入 1D 纹理并用于`texelFetch`对其进行索引。

# git - 将用户限制在 GITHUB 上的分支

> ID：10781435
> 
> 赞同：5
> 
> 时间：2012-05-28T08:18:33.380
> 
> 标签：git, github

我们有一种情况，我们需要外部承包商在项目上做一些工作，但希望将它们限制在我们（私有）存储库上的某个分支中，并自己管理将该分支合并到发布分支中。有没有办法将用户限制在存储库的单个分支中？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-28T08:20:47.557

要求该人分叉项目并在合并时提交拉取请求。

请注意，他们的分叉将是私有的，即使他们的 github 帐户是免费计划。

# javascript - -webkit translate3d 与大元素结结巴巴

> ID：10781438
> 
> 赞同：3
> 
> 时间：2012-05-28T08:18:46.150
> 
> 标签：javascript, css, iphone-web-app, webkit-transform, translate3d

我正在使用动画元素`-webkit-transform: translate3d(x,y,z)`和立方贝泽计时功能与 iPhone 的触摸事件相结合，以制作自定义滚动方法类型的东西。

麻烦的是，如果元素（在本例中为页面 div）超过一定大小，动画会卡顿（元素停止半秒）。如果我有 320 像素的宽度和 1000 像素的高度，这一切都很好，但如果我将高度设为 2000 像素，我会遇到令人讨厌的口吃。请注意，它在开始时只会断断续续一次，几乎就像它正在加载一样，然后就很好了。

是否有任何已知的解决方法？

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-07-18T06:49:20.873

两种可能的解决方法。

首先关闭其他 CSS 属性，即位置（上、左、右、下）和不透明度。混合它们，特别是如果它们正在制作动画，可能会导致性能问题。

您可以尝试尽可能多地关闭，然后查看问题是否得到解决。如果是这样，则将它们一一重新打开，直到找到问题属性。

其次，将您的内容包装在 iframe 中。即使 iframe 设置为填充视图，当它包含非常大的图像时，它也可以显着提高性能。

# php - 如何第一次创建 mysqli 数据库？

> ID：10781440
> 
> 赞同：2
> 
> 时间：2012-05-28T08:18:54.000
> 
> 标签：php, mysqli

我正在运行一个[mysqli 教程](http://www.php.net/manual/ru/mysqli.quickstart.connections.php)中的示例。

```
$mysqli = new mysqli("localhost", "user", "password", "database");
if($mysqli->connect_errno)
{
  echo "Failed to connect to MySQL: (" . $mysqli->connect_errno . ) "
  . $mysqli->connect_error;} echo $mysqli->host_info . "\n";
} 
```

我收到了错误：

> 警告：mysqli::mysqli(): (42000/1049): /home/中的未知数据库“世界”...

我应该怎么做才能创建数据库？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-12-14T00:24:40.860

你必须使用这个：

```
$mysqli=new mysqli("localhost","user","password") or die(".........");

if($mysqli->query("Create database if not exists MyDB")){

   "Failed creating new database: ".$mysqli->connect_errno();
    die();

}

$mysqli->select_db("MyDB");
$mysqli->close(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-28T10:05:45.983

尝试这样的事情

```
$mysqli = new mysqli("localhost", "user", "password"); 
```

这样你就连接到数据库了

并将此查询使用`mysqli` `Create Database database1`

# typo3 - Typo3 4.7.0 更新破坏了我的 FE 登录？

> ID：10781441
> 
> 赞同：0
> 
> 时间：2012-05-28T08:19:00.400
> 
> 标签：typo3

我已将我的 Typo3 从 4.5.5 更新到 4.7.0，但我收到了几个已弃用的错误：

1.  错误：内容元素类型“登录”没有渲染定义！
2.  调用 t3lib_div::view_array 中的未定义错误
3.  未能包含 class.t3lib_htmlmail.php
4.  安装工具给了我“typo3/ext/ 目录不可写”，但我有正确的权利。我什至都允许了？？？？？？
5.  当我在 BE 中选择一个 CType 元素时，它会给我这个警告： PHP 警告 PHP 警告：在 /var/www/typo3_src-4.7.0/t3lib/l10n/parser/class.t3lib_l10n_parser_llphp.php 中为 foreach() 提供的参数无效第 95 行

2\. 的解决方案是使用新类 t3lib_utility_debug 但其他错误是什么？

编辑：1\. [http://lists.typo3.org/pipermail/typo3-english/2011-November/078129.html](http://lists.typo3.org/pipermail/typo3-english/2011-November/078129.html)

编辑 2：缺少类 t3lib_htmlmail 的解决方案是包含另一个类 t3lib_mail_message: require_once(PATH_t3lib .'mail/class.t3lib_mail_message.php');

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-30T09:44:37.007

1.  你已经解决了：安装系统扩展“felogin”
2.  你已经解决了：使用 t3lib_utility_debug
3.  检查错误来自哪里。通常在typo3conf/temp_* 中搜索该文件会很有帮助。
4.  如果您的网络服务器被允许写入typo3/ext/，您可以检查您的文件系统。我想，它不是。但你不需要。通常你会为typo3conf/ext/ 安装扩展。
5.  通过扩展管理器更新您的语言文件。

好吧，我知道现在为时已晚，但对于所有其他人来说，我会考虑更新：只需激活 isntall 收费中的弃用日志并首先解决该问题！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-07-03T00:10:37.137

从 4.5.X 更新到 4.7.x 也破坏了我的 felogin。原因是本地扩展安装的优先级高于系统安装。因此，如果您遇到相同的更新问题，请在“typo3conf/ext”中检查本地安装的 felogin - 并删除它以防万一。这解决了我的问题！

# local-storage - 本地存储数据检索

> ID：10781450
> 
> 赞同：2
> 
> 时间：2012-05-28T08:19:46.560
> 
> 标签：local-storage, sencha-touch-2

我正在创建一个表单，将数据保存到本地存储中。我在模型中调用代理。但我不确定如何从本地存储中获取数据。

我的代码是：

```
var model = new InfoImage.model.configure.configModel();
model.data.servname = servname;
                        model.data.port = port;
                        model.data.protocol = protocol;
                        model.data.username = username;
                        model.data.password = password;
                        model.data.domain = domain;
                        model.data.apptitle = apptitle;
                        model.data.appconfig = appconfig;
                        model.save();

                        //Ext.getStore('configStore').load();
                        users = Ext.getStore('configStore').sync();
                        var item = localStorage.getItem('servname'); 
```

我的模型是：

//定义工作项列表的数据结构

```
Ext.define('InfoImage.model.configure.configModel', {
    extend : 'Ext.data.Model',

    config : {
        //Defining the fields required in the Work Item List
        fields : [ 'servname', 'port', 'protocol', 'username', 'password',
                'domain', 'appconfig', 'apptitle', 
                'appconfig' ],

        proxy : {
            type : 'localstorage',
            id : 'configId'
        }
    }
}); 
```

`var item = localStorage.getItem('servname');`给我**“空”**的结果。我定义了一个商店，但我还没有使用它。知道我应该怎么做吗？

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-28T09:11:49.210

请访问：[http ://docs.sencha.com/touch/2-0/#!/api/Ext.data.proxy.LocalStorage](http://docs.sencha.com/touch/2-0/#!/api/Ext.data.proxy.LocalStorage)

如果您想将数据保存在本地存储中，您应该调用`yourStore.sync()`

如果您想将数据添加到存储（而不是本地存储），您应该调用`yourStore.add( object )`

然后，如果您需要使用新数据更新本地存储，您应该`yourStore.sync()`再次调用。

如果你想用本地存储中的数据填充你的存储，你应该调用`yourStore.load()`.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-28T10:06:35.030

如果您存储名为“Items”并且已加载，则可以使用这些：

```
var store = Ext.getStore('Items'); // Get the store
store.add({...}); // Add an instance of you model item
store.sync(); // Will add the item to the locastorage
var item = store.getAt(0) // Get the first item in the store
store.remove(item); // Remove the selected item from the store
store.sync(); // Will remove the item from the localstorage 
```

希望这可以帮助

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-14T08:02:00.697

```
first you define model like below
Ext.define('LoginDemo.model.User',
{
    extend:'Ext.data.Model',
    config:
    {
        identifier: 'uuid',
        fields:['name','add','mail'],
        proxy:`enter code here`
            {
                type:'localstorage',
                id:'mylogin'
            }

    }
});
then put model into store using following code

listeners:
                        {

                            tap:function()
                            {
                                Ext.Msg.alert('Hi');

                                var store = Ext.create('Ext.data.Store', 
                                {
                                    model: 'LoginDemo.model.User'

                                });

                                //loads any existing data from localStorage
                                store.load();
                                //now add some Searches
                                store.add({name: 'Deepak',add: 'Mumbai',mail:'deepakg.borade@gmail.com'},
                                          {name: 'Rahul',add: 'Pune',mail:'deepakg13.borade@gmail.com'});
                                //finally, save our Search data to localStorage
                                store.sync();
                                                                //fetch data locationwise
                                var a=store.getAt(0);
                                console.log(a);
                            }
                        } 
```

# iphone - Cocos2d 和 CocoaAsyncSocket

> ID：10781452
> 
> 赞同：0
> 
> 时间：2012-05-28T08:19:59.103
> 
> 标签：iphone, objective-c, cocos2d-iphone, cocoaasyncsocket

请帮我解决这个问题：

1 - 我创建一个 Cocos2d 项目，添加 CFNetwork.framework。

2 - 我将 CocoaAsyncSocket 库中的 GCDAsyncUdpSocket.h 和 GCDAsyncUdpSocket.m 添加到我的项目中

3 - 建造。

--->我有201错误？？？？？？.（虽然我什么都不做）。我只是从 CocoaAsyncSocket 库中添加 GCDAsyncUdpSocket.h 和 GCDAsyncUdpSocket.m 并构建。所有错误都发生在 GCDAsyncUdpSocket.m 中。

但如果我改变：

1 - 我创建一个 View 基础应用程序项目（不是 cocos2d 项目），添加 CFNetwork.framework。

2 - 我将 CocoaAsyncSocket 库中的 GCDAsyncUdpSocket.h 和 GCDAsyncUdpSocket.m 添加到我的项目中

3 - 建造。

--->>>没关系，我可以使用 GCDAsyncUdpSocket 。

如何为 cocos2d 项目添加 CocoaAsyncSocket 库（GCDAsyncUdpSocket.h 和 GCDAsyncUdpSocket.m）？

请帮我....

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-28T08:25:07.433

检查您是否正在链接`CFNetwork.framework`您的 Cocos2D 项目。

您必须修复的另一件事与 Cocos2D 不支持 ARC 相关（CocoaAsyncSocket 是一个 ARC 项目，因此您有不匹配的情况）。[要么按照这篇文章的](http://www.tinytimgames.com/2011/07/22/cocos2d-and-arc/)建议修补你的项目/Cocos2D 基础，要么安装[最新的 Cocos2D 开发分支](https://github.com/cocos2d/cocos2d-iphone/tree/develop/cocos2d)（应该可以解决这个问题）。

# android - 线性布局和重量

> ID：10781457
> 
> 赞同：0
> 
> 时间：2012-05-28T08:20:38.147
> 
> 标签：android, android-layout

我有一个带有两个 textView 的线性布局。第一个 textView 的权重为 40，第二个为 60。如何在活动代码中更改此权重？这个有可能？我想点击按钮，第一个重量应该是 70，第二个是 30。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-28T08:25:40.830

如果你正在导入一个 XML 布局并且你没有动态创建你的布局，你可以像这样抓取它：

```
TextView tv = (TextView) findViewById(R.id.your_textview_inside_the_linearlayout);    
tv.setLayoutParams(new LinearLayout.LayoutParams(LayoutParams.WRAP_CONTENT, LayoutParams.WRAP_CONTENT, 0.1f)); 
```

否则就是这样

```
TextView tv = new TextView(v.getContext());
tv.setLayoutParams(new LinearLayout.LayoutParams(LayoutParams.WRAP_CONTENT, LayoutParams.WRAP_CONTENT, 1f)); 
```

最后一个参数是重量。

# nsis - 由于 Inetc.dll，我的安装程序被检测为病毒

> ID：10781465
> 
> 赞同：0
> 
> 时间：2012-05-28T08:21:22.207
> 
> 标签：nsis

检查 inetc.dll 的代码后，我看到对 win32 wininet HttpOpenRequest 的调用正在触发 HEUR:Trojan-Downloader.Win32.Generic。我正在使用 inetc 根据用户的操作系统配置下载安装的一部分，以允许更小的安装程序。有什么办法可以避免这种误报吗？是否有其他不被标记的 inetc 替代品？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-28T18:43:25.197

通常会看到 INetC 和 NSISdl 的误报，将其报告为误报，问题应该会消失......

# vb.net - 创建一个脚本来检查文件夹中的文件数量，如果不同，然后在 Windows 中执行某些操作？

> ID：10781467
> 
> 赞同：-1
> 
> 时间：2012-05-28T08:21:33.323
> 
> 标签：vb.net, file, timer, automation

什么语言对制作一个在目录中查找并将其中的文件数量保存为变量的程序很有用，然后让它检查变量是否不等于它最初计算时的值，然后运行脚本。因为我有一个文件夹，每次更改某些内容时都会向目录添加一个新文件，所以我希望运行一个只运行 exe 的脚本。

我不知道从哪里开始，如果我应该制作一个 vb.net 应用程序，那是一个经常运行并为我执行此操作的计时器。请帮忙！！！

太感谢了。抱歉，我没有包含任何代码，我不期望代码作为回报，我只需要关于如何计划或着手去做的想法。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-28T08:26:10.740

您可以查看此类以查看目录中的更新并对各种类型的更新采取措施

[http://msdn.microsoft.com/en-us/library/system.io.filesystemwatcher.aspx](http://msdn.microsoft.com/en-us/library/system.io.filesystemwatcher.aspx)

# javascript - jQuery：在成功/错误中使用延迟对象（ajaxSetup 选项）

> ID：10781470
> 
> 赞同：0
> 
> 时间：2012-05-28T08:21:36.630
> 
> 标签：javascript, jquery, jquery-deferred

我想为所有 AJAX 请求设置全局行为，有时我需要像这样中断队列

```
$.ajaxSetup({
    success: function(data, textStatus, jqXHR) {
        if ( data.error ) { jqXHR.reject(); }
    }
});
// later
$.ajax({ some: option }).done( function(html) { do_something(html); } ); 
```

当 data.error 出现时，我想在这里完成（不要用函数（html）调用完成）

可能吗 ？或者也许存在另一种方式？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-30T22:24:31.147

您无法直接解析 jqXHR。

jqXHR 实现了 Promise 接口，可用于获取状态或添加回调，但不能用于更改状态。

参考[http://api.jquery.com/jQuery.ajax/#jqXHR](http://api.jquery.com/jQuery.ajax/#jqXHR)

你试过 $.ajaxSetup(success: defaultHandler}) 吗？但这只有在您在原始选项中提供处理程序时才有效。比如： $.ajax({url: 'someurl' , success: someHandler});

有关更多想法，请查看这是否有帮助：http: [//forum.jquery.com/topic/stop-a-deferred-callback-queue-in-progress](http://forum.jquery.com/topic/stop-a-deferred-callback-queue-in-progress)

# android - 如何使用字符串数组将两个单独的 onClick 方法添加到 Dialog 以显示两个选项？

> ID：10781473
> 
> 赞同：0
> 
> 时间：2012-05-28T08:21:46.617
> 
> 标签：android, android-dialog

```
 protected Dialog onCreateDialog(int id) {
    switch (id) {
    case Dialog_alert:

        final AlertDialog.Builder builder = new AlertDialog.Builder(this);
        final LayoutInflater li = LayoutInflater.from(this);
        builder.setTitle("Choose any option: ");

        builder.setItems(items, new DialogInterface.OnClickListener() {

            @Override
            public void onClick(DialogInterface dialog, int which) {
                setContentView(R.layout.tkentry);

                    // what to do after this..??? 
```

这是一个对话框，要求用户选择以下选项之一。'items' 是具有“更新”和“删除”选项的字符串数组。如何为它们设置单独的 onClick 方法？“更新”和“删除”不是按钮！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-28T08:37:25.007

您不需要两个单独的`onClick`方法。您必须使用`int which`才能知道正在选择哪个项目。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-28T08:36:58.797

如果您想知道选择了哪个项目，您必须将 AdapterView.OnItemSelectedListener 侦听器添加到您的 AlertDialog.Builder 对象。

```
builder.setOnItemSelectedListener (...); 
```

当一个项目被选中时，您会收到通知，以便您可以保存它，当按下确认按钮时，您可以根据所选选项采取任何您想要的操作。

# build - Qt 创建者构建失败

> ID：10781474
> 
> 赞同：0
> 
> 时间：2012-05-28T08:21:52.190
> 
> 标签：build, qt4

我在构建 Qt4 创建器时遇到问题。我有一些创建的项目，我想把它带到不同的文件夹。

我已经失败了： ![在此处输入图像描述](../Images/4f86840e259f77ec471af867dadbeaa9.png)

如果我理解得很好，这是项目设置中的某个问题。也许您持有创建它的文件夹。

谢谢你的帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-28T08:23:44.000

这可能是因为您路径中的空间：“zkouska 15.5.2012”

# c# - 从 sql express 中的给定表中查找最大值

> ID：10781479
> 
> 赞同：2
> 
> 时间：2012-05-28T08:22:27.613
> 
> 标签：c#, sql, sql-server

我正在尝试从我的数据库表中检索最新数据。我正在使用 max(columnName) 但没有我喜欢的结果。我不断得到列名而不是任何值

请帮我解决这个...

检索最大值的代码是这样的

```
 dbConnection dbCon = new dbConnection();
            con = dbCon.doConnection();

            SqlCommand cmd = new SqlCommand();

            String query = "select max(studentNo) from studentInfo;";
            cmd.Connection = con;
            cmd.CommandText = query;
            SqlDataReader reader = cmd.ExecuteReader();
            while (reader.Read())
            { 
                String x=reader["studentNo"].ToString();

            } 
```

这里的 studentNo 是我需要提取其值的列名，它是 int 类型，在我的应用程序上打印字符串 x 时，我得到 studentNo 而不是值。现在我没有解决问题的线索，因为我找不到代码有什么问题。帮我做这个

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-28T08:26:04.623

问题在于您访问值的方式，您可以在此处更改两件事。通过索引访问阅读器或在查询中适当地命名列。

```
select max(studentNo) as StudentNo from studentInfo; 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-28T08:48:23.113

您的查询输出一行和一列数据，因此您可以考虑使用`ExecuteScalar()`而不是`ExecuteReader()`：

```
dbConnection dbCon = new dbConnection();
con = dbCon.doConnection();

SqlCommand cmd = new SqlCommand();

String query = "select max(studentNo) from studentInfo;";
cmd.Connection = con;
cmd.CommandText = query;
**String x = cmd.ExecuteScalar().ToString();** 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-28T08:34:51.430

应用聚合函数后，您需要为您的选择提供别名

即从 studentInfo 中选择 max(studentNo) 为 NO

并在阅读时

字符串 x=reader["NO"].ToString();

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-28T08:32:15.513

首先，您需要为列设置正确的别名：

```
select max(studentNo) as 'studentNo' from studentInfo; 
```

其次，您可能希望将数据库分配给表：

```
select max(studentNo) as studentNo from databaseName..studentInfo; 
```

# c# - MongoDB C# BsonRepresentation of ObjectIds 数组

> ID：10781480
> 
> 赞同：2
> 
> 时间：2012-05-28T08:22:36.747
> 
> 标签：c#, mongodb, asp.net-mvc-4, asp.net-web-api, mongodb-.net-driver

我有这样的文件计划：

```
{
  "_id" : ObjectId("4fbb728d80db260988580e05"),
  "titleFull" : "Foo, Inc",
  "titleShort" : "Foo",
  "countries" : [
     ObjectId("4fba04ef80db260988f8b607"),
     ObjectId("4fba05f880db260988cd5cfd") ],
  "type" : "company"
} 
```

以及 ASP.NET MVC 4 Web API 项目中的此类：

```
public class Company
{
  [BsonRepresentation(BsonType.ObjectId)]
  public String id { get; set; }
  public String titleFull { get; set; }
  public String titleShort { get; set; }
  //[BsonRepresentation(BsonType.ObjectId)]
  //public String[] countries { get; set; } — not working
  public ObjectId[] countries { get; set; }
  public String type { get; set; }
} 
```

当我发送 GET 请求时，`/api/countries`我收到 JSON 文档（它是 mvc 反序列化）：

```
{
  "id": "4fba097e80db2609886ce7f2",
  "titleFull": "Foo, LLC",
  "titleShort": "Foo",
  "countries": [
    {
      "_increment": 16299527
      "_machine": 8444710
      "_pid": 2440
      "_timestamp": 1337591023
    },
    {
      "_increment": 13458685
      "_machine": 8444710
      "_pid": 2440
      "_timestamp": 1337591288
    }
  ],
  "type": "company"
} 
```

有没有办法像这样进行 JSON 响应：

```
{
  "id": "4fba097e80db2609886ce7f2",
  "titleFull": "Foo, LLC",
  "titleShort": "Foo",
  "countries": ["4fba04ef80db260988f8b607","4fba05f880db260988cd5cfd"],
  "type": "company"
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-29T13:21:10.817

### 给未来的读者的注意事项

Rober Stam 在 google 群组中写道：

> 反序列化代码中存在错误。在数组的情况下，[BsonRepresentation] 属性实际上应用于项目而不是数组。
> 
> 我为此创建了一张 JIRA 票证：
> 
> [https://jira.mongodb.org/browse/CSHARP-479](https://jira.mongodb.org/browse/CSHARP-479)

所以如果你有同样的问题，请追踪这张票。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-28T08:39:19.487

在响应中，不要使用 ObjectId for Country，而是使用字符串数组并添加要在 json 响应中传递的 id。

公共字符串 [] 国家 { 得到；放; }

如果你像这样使用，响应将在 json 中是这样的

“国家”：[“4fba04ef80db260988f8b607”，“4fba05f880db260988cd5cfd”]，

您正在使用 id 字段中的字符串。

# c++ - 双精度数组和堆损坏

> ID：10781481
> 
> 赞同：0
> 
> 时间：2012-05-28T08:22:43.407
> 
> 标签：c++, arrays, pointers, memory-management

我有一个像

```
template <class Type>
myFunc(Type** arrayToBeFilled); 
```

我这样称呼它：

```
double* array = NULL;
myFunc(&array); 
```

在函数内部，我使用 strtod 函数读取和解析数字：

*//这里是文件打开，获取每行的行数和双打数*

```
...
    char *inputString = new char[LONG_STRING_SIZE]; 
    char *pNext = NULL;
   (*arrayToBeFilled) = new Type[length*rowSize];

for (int i=0; i<length; i++)
    { 
        source.getline(inputString, LONG_STRING_SIZE);
        pNext = NULL;

     for (int j=0; j<rowSize; j++)
     {
         double d = strtod(inputString, &pNext);
        (*arrayToBeFilled)[i*rowSize+j] = d;
        inputString = pNext;
        pNext = NULL;
     }
    } 
```

变量 d 仅用于使用调试器进行检查 - 运行时就可以了。但是在填充数组后我尝试打印它（只是为了检查）

```
for (int i=0; i<length; i++)

    {
        for (int j=0; j<rowSize; j++)
            {
                cout<<(*arrayToBeFilled)[i*rowSize+j]<<"  ";
            }
        cout<<"\n";
    } 
```

这里出现了糟糕的输出 - 其他数字，有时是堆损坏等等。我在函数内外打印它 - 结果相同。而且我不能删除这个数组，也不能删除这个函数——运行时错误跟着我！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-28T09:26:04.073

为什么在 C++ 中使用原始 C 数组？如果您使用**STL 类**而`std::vector`不是 raw `new[]`，您的代码将变得更干净，更易于阅读和维护（例如，您不需要显式`delete[]`调用：析构函数将清理堆内存）。一般来说，在现代 C++ 中，规则是“*如果你正在编写 new 或 delete，那么你做错了*”（有一些例外）。

另请注意，使用 C++11 移动语义，您可以简单地返回`vector`而不是使用输出引用/指针参数：

```
template <typename Type>
inline std::vector<Type> myFunc()
{
    ...
} 
```

在你的函数体内，而不是你的代码

```
(*arrayToBeFilled) = new Type[length*rowSize]; 
```

写吧：

```
std::vector<Type> arrayToBeFilled(length*rowSize); 
```

然后简单地说`return arrayToBeFilled;`。

（还要注意`vector`' 可以嵌套在一起：您也可以`vector<vector<Type>>`用来制作 2D 数组，但这比单个 的效率低`vector<Type>`，后者更直接地映射到您的原始`new[]`调用。）

此外，在您发布的代码中，您在堆上创建了一个原始 C 数组，`new char[LONG_STRING_SIZE]`并将指向它的指针分配给`inputString`; 然后您`inputString`使用来自 : 的赋值进行修改，`pNext`但这样做会泄漏其指针存储在 中的初始数组`inputString`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-28T08:53:18.373

似乎您没有返回类型

```
template <class Type>
void myFunc(Type** arrayToBeFilled); 
```

你应该初始化你的函数

```
double array = NULL;
myFunc<double>(&array); 
```

同样在输入时，打印出你得到的值，通常你可能会得到一些意想不到的东西，从而导致错误。

# java - 使用 2 个线程对列表进行排序

> ID：10781495
> 
> 赞同：-1
> 
> 时间：2012-05-28T08:24:01.310
> 
> 标签：java, multithreading, sorting, arraylist

我正在做一个项目，但我没有得到这部分：

> 使用两个线程对 ArrayList 进行排序。每个线程都会有一半的列表。主线程将等待两个线程完成，然后他将负责合并来自其他两个线程的两个列表。最后，我们将有一个排序列表。合并两个列表不应该是那种常规的方式。

我尝试这样`class ListePersonne`，这个类排序`ArrayList`：

```
 Thread T1 = new ListePersonne( mylist.subList(0, unique.size()/2));
 Thread T2 = new ListePersonne(mylist.subList(unique.size()/2, unique.size())  );
 T1.start();
 T2.start(); 
```

但结果我只完成了第一部分，但没有完成第二部分

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-28T08:29:22.023

arraylist 不是线程安全的

试试矢量？

[http://developer.android.com/reference/java/util/Vector.html](http://developer.android.com/reference/java/util/Vector.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-28T08:34:19.037

1) 检查两个子列表的合并排序是否完成

2) 检查您是否使用从多个线程对数组列表的同步访问。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-28T08:41:03.477

由于这是家庭作业，我不会给你代码。这里有提示

1.  与和`Future<List>`一起使用。 允许您返回与 Runnable 不同的类型，后者不能。`Callable<List>``executor``Callable<T>`
2.  `future.get()`将阻塞直到线程完成执行。对两个线程执行此操作。
3.  一旦你有两个排序列表，合并。

不知道你的老师是否会接受这个解决方案，但万一他没有教你关于 Executor 框架的知识，但我相信你能说服他/她；）

# android - Android NDK：如何处理 Cocos2dx 中的返回键按下？

> ID：10781497
> 
> 赞同：5
> 
> 时间：2012-05-28T08:24:08.587
> 
> 标签：android, android-ndk, cocos2d-x

这个问题就是我要说的。我需要知道如何处理 android NDK 中的特殊按键`back`，例如`menu`等。我正在使用 Cocos2dX，所以如果你能给我一个 Cocos2dX 特定的答案，那就太好了。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-28T08:49:55.343

在 cocos2dx 中，每个`CCLayer`都有以下方法，这些方法可以被覆盖以向它们添加功能：

```
class CC_DLL CCKeypadDelegate
{
public:
    // The back key clicked
    virtual void keyBackClicked() {}

    // The menu key clicked. only avialble on wophone & android
    virtual void keyMenuClicked() {};
}; 
```

`CCLayer`继承自`CCKeypadDelegate`。每个屏幕都可以实现这些功能。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-11-13T11:34:35.330

在 Cocos2d-x 你必须做那个实现

```
 virtual void keyBackClicked(); 
```

还有这个

```
 this->setKeyPadEnable(true); 
```

在 .cpp 类中

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-01-20T11:53:22.567

启用键盘：`this->setKeypadEnabled(true);`

覆盖 onKeyReleased 方法： `virtual void onKeyReleased(EventKeyboard::KeyCode keyCode, Event* event);`

检查键码：

```
void GameScene::onKeyReleased(EventKeyboard::KeyCode keyCode, cocos2d::Event *event)
{
    if (keyCode == EventKeyboard::KeyCode::KEY_BACKSPACE) {
        CCLOG("You pressed back button");
    }
    else if(keyCode == EventKeyboard::KeyCode::KEY_MENU)
    {
        CCLOG("You pressed menu button");
    }
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-01-31T11:54:56.343

如果您的类不是用 继承的`CClayer`，那么您可以通过`JNI`调用来处理它。在您从功能`Cocos2dxGLSurfaceView.java`中处理返回和菜单键`onKeyDown`

```
public boolean onKeyDown(final int pKeyCode, final KeyEvent pKeyEvent) 
```

# linux - 带有变量的 sed 正则表达式以替换文件中的数字

> ID：10781498
> 
> 赞同：2
> 
> 时间：2012-05-28T08:24:10.007
> 
> 标签：linux, perl, sed

我试图通过向它们添加一个来替换我的文本文件中的数字。IE

```
sed 's/3/4/g' path.txt
sed 's/2/3/g' path.txt
sed 's/1/2/g' path.txt 
```

取而代之的是，我可以自动化它吗，即找到 /d 并在替换中添加一个。

就像是

```
sed 's/\([0-8]\)/\1+1/g' path.txt 
```

还想捕获多个数字，即`([0-9])\t([0-9])`并更改每个数字，将制表符保持在中间

谢谢

编辑 #2 使用 perl 示例，我也希望它可以处理更多数字，即

```
perl -pi~ -e 's/(\d+)\.(\d+)\.(\d+)\.(\d+)/ ($1+1)\.($2+1)\.($3+1)\.($4+1) /ge' output.txt 
```

有关使上述工作的任何提示？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-28T08:53:59.053

中不支持算术运算`sed`，但您可以在 Perl 中轻松做到这一点。

```
perl -pe 's/(\d+)/ $1+1 /ge' 
```

使用该`/e`选项，替换表达式必须是有效的 Perl 代码。因此，要处理最终更新的示例，您需要

```
perl -pi~ -e 's/(\d+)\.(\d+)\.(\d+)\.(\d+)/ $1+1 . "." $2+1 . "." . $3+1 . "." . $4+1 /ge' 
```

其中字符串被正确引用，相邻的字符串用`.`Perl 字符串连接运算符连接在一起。（算术数字在与字符串连接时也被强制转换为字符串。）

...当然，第一个脚本已经做得更优雅了，因为使用`/g`标志它已经在字符串中的任何位置将每个数字序列都增加了一个。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-28T09:59:19.230

Triplee 的 perl 解决方案是更通用的答案，但 Michal 的 sed 解决方案适用于这种特殊情况。但是，Michal 的 sed 解决方案更容易编写：

```
sed y/12345678/23456789/ path.txt 
```

并且更好地实现为

```
tr 12345678 23456789 < path.txt 
```

这完全无法处理 2 位数字（如已编辑的问题中所示）。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-28T09:06:08.143

您可以做到，`sed`但这并不容易，请参阅[此线程](https://unix.stackexchange.com/questions/36949/addition-with-sed)。

awk 也很难，[请看这个](https://unix.stackexchange.com/questions/25122/how-to-use-regrex-with-awk-for-string-replacement-in-this-example)。

我宁愿使用`perl`这个（[在@ideone的行动中可以看到类似的东西](http://ideone.com/UWdEl)）：

```
perl -pe 's/([0-8])/$1+1/e' 
```

（ideone.com 示例必须有一些循环，因为 ideone 默认情况下没有设置`-pe`。）

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-28T10:52:40.597

这可能对您有用（GNU sed 和 Bash）：

```
sed 's/[0-9]/$((&+1))/g;s/.*/echo "&"/e' file 
```

这将为每个单独的数字添加一个，以增加数字：

```
sed 's/[0-9]\+/$((&+1))/g;s/.*/echo "&"/e' file 
```

NB 这种方法充满了问题，可能会导致意想不到的结果。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-28T08:49:38.467

您不能直接添加`sed`- 您可以`awk`通过在每行中使用正则表达式匹配数字并增加值来添加，但这非常复杂。如果不需要处理任意数字但需要处理有限的集合，例如仅从 0 到 8 的单个数字，您可以将多个替换命令放在一个`sed`命令行上，用分号分隔它们：

```
sed 's/8/9/g ; s/7/8/g; s/6/7/g; s/5/6/g; s/4/5/g; s/3/4/g; s/2/3/g; s/1/2/g; s/0/1/g' path.txt 
```

# jquery - 如何复制 从一个 to another? I am using the two sided multi select found here http://www.stevefenton.co.uk/cmsfiles/assets/File/twosidedmultiselect.html and need to add the selected options in the right hand multiselect to another select list with

> ID：10781500
> 
> 赞同：55
> 
> 时间：2012-05-28T08:24:23.463
> 
> 标签：jquery

* * *

## 回答 #1

> 赞同：103
> 
> 时间：2012-05-28T08:28:47.273

```
var $options = $("#myselect > option").clone();

$('#secondSelectId').append($options); 
```

[**现场演示**](http://jsfiddle.net/7aNRZ/)

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2012-05-28T08:41:47.703

```
<select multiple="true" class="multiselect1" name="myselecttsms1">
    <option value="1" rel="0" title="One">One</option>
    <option value="2" rel="1" title="Two">Two</option>            
    <option value="4" rel="3" title="Four">Four</option>
    <option value="5" rel="4" title="Five">Five</option>
    <option value="6" rel="5" title="Six">Six</option>
</select>

<select multiple="true" class="multiselect2" name="myselecttsms2" size="6">

</select>

<button class="add">Add</button>
<button class="addAll">Add All</button>
<button class="remove">Remove</button>
<button class="removeAll">Remove All</button> 
```

**jQuery：**

```
$('.add').on('click', function() {
    var options = $('select.multiselect1 option:selected').sort().clone();
    $('select.multiselect2').append(options);
});
$('.addAll').on('click', function() {
    var options = $('select.multiselect1 option').sort().clone();
    $('select.multiselect2').append(options);
});
$('.remove').on('click', function() {
    $('select.multiselect2 option:selected').remove();
});
$('.removeAll').on('click', function() {
    $('select.multiselect2').empty();
}); 
```

**[样品锻炼](http://jsfiddle.net/dm85y/1/)**

* * *

## 回答 #3

> 赞同：9
> 
> 时间：2014-01-16T22:18:14.050

有一种更简单的方法可以做到这一点：

```
var options = $("#myOldSelect").html();
$('#myNewSelect').html(options); 
```

如果您想将新的 Select 添加到 DOM 并包含已复制的选项，这非常方便：

```
var options = $("#myOldSelect").html();
$("#domLocation").append("<select id='myNewSelect'>" + options + "</select"); 
```

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2014-02-10T05:09:11.033

```
$('#cloneBtn').click(function() {
    var $options = $("#myselect > option").clone();
    $('#second').empty();
    $('#second').append($options);
    $('#second').val($('#myselect').val());
}); 
```

这用于复制值和innerHTML。最好复制键、值和选项。即选定的值和选项。

# visual-studio-2010 - 'myfunc' : 局部函数定义是非法的

> ID：10781502
> 
> 赞同：1
> 
> 时间：2012-05-28T08:24:38.370
> 
> 标签：visual-studio-2010, visual-c++, service, programming-languages

如果它是一个 win32 控制台应用程序，我有以下代码运行良好

```
int APIENTRY _tWinMain(HINSTANCE hInstance,
                     HINSTANCE hPrevInstance,
                     LPTSTR    lpCmdLine,
                     int       nCmdShow)
{
    UNREFERENCED_PARAMETER(hPrevInstance);
    UNREFERENCED_PARAMETER(lpCmdLine);

    // TODO: Place code here.
    MSG msg;

    if( !InitBoard() )
    {
        return 1;
    }

    HWND hDialog = 0;

    hDialog = CreateDialog (hInst, 
        MAKEINTRESOURCE (IDD_MAIN), 
        0, 
        DialogProc);
    if (!hDialog)
    {
        char buf [100];
        wsprintf (buf, "Error x%x", GetLastError ());
        MessageBox (0, buf, "CreateDialog", MB_ICONEXCLAMATION | MB_OK);
        return 1;
    }

#if !defined (_WRITE_MPEG_ )
    InitBufferHandling();
    StartRTPProcess();

    // give vlc some time to get started before shoving buffers at it...
#endif

    Sleep(250);
    if( !StartAcquisition() )
        return 1;

    g_hWnd = hDialog;
    // Main message loop:
    while (GetMessage(&msg, NULL, 0, 0))
    {
        if (!IsDialogMessage(hDialog, &msg))
        {
            TranslateMessage(&msg);
            DispatchMessage(&msg);
        } 
    }

    return (int) msg.wParam;
}

BOOL CALLBACK DialogProc(HWND hwnd, UINT uMessage, WPARAM wParam, LPARAM lParam)
{
  switch (uMessage)
  {
    case WM_CLOSE:
      PostQuitMessage(0);
      return FALSE;
    case WM_COMMAND:
      switch(wParam)
      {
        case IDOK:
          ShutDownAcquisition();
          PostQuitMessage(1);
          return FALSE;

        case IDC_ABOUT:
          DialogBox(hInst, MAKEINTRESOURCE(IDD_ABOUTBOX), hwnd, About);
          return TRUE;

        default:
          break;

      }
    default:
      return FALSE;
  }
}

// Message handler for about box.
INT_PTR CALLBACK About(HWND hDlg, UINT message, WPARAM wParam, LPARAM lParam)
{
    UNREFERENCED_PARAMETER(lParam);
    switch (message)
    {
    case WM_INITDIALOG:
        return (INT_PTR)TRUE;

    case WM_COMMAND:
        if (LOWORD(wParam) == IDOK || LOWORD(wParam) == IDCANCEL)
        {
            EndDialog(hDlg, LOWORD(wParam));
            return (INT_PTR)TRUE;
        }
        break;
    }
    return (INT_PTR)FALSE;
}

int SelectBoard()
{
  DialogBox(hInst, MAKEINTRESOURCE(IDD_SELECT_BOARD), g_hWnd, SelectBoardProc);
  return g_SelectedBoard;
}

BOOL CALLBACK SelectBoardProc(HWND hDlg, UINT uMessage, WPARAM wParam, LPARAM lParam)
{
  switch (uMessage)
  {
    case WM_INITDIALOG:
      {
        int nBoards = GetBoardCount();
        SelBoard BoardInfo;
        char ButtonCaption[64];
        int  nButtonHeight = 17;

        for( int i = 0; i < nBoards; i++ )
        {
          GetBoardSelection( i, &BoardInfo );
          wsprintf( ButtonCaption, "%s %s %s", BoardInfo.szBoardName, BoardInfo.szSerialNumber, 
              BoardInfo.bClaimed ? "(Busy)" : " " );

          CreateWindowEx(  0, TEXT("BUTTON"), ButtonCaption, WS_CHILD | WS_VISIBLE | BS_AUTORADIOBUTTON,
                         7, 7 + i*nButtonHeight, 282, nButtonHeight, hDlg, (HMENU)(BOARD_RADIO_1 + i),  hInst, 0 );
        }
        g_SelectedBoard = 0;
      }
          return (INT_PTR)TRUE;

    case WM_COMMAND:
      if (HIWORD(wParam) == BN_CLICKED) 
      {
           switch (LOWORD(wParam)) 
         {
          case BOARD_RADIO_1:
          case BOARD_RADIO_1 + 1:
          case BOARD_RADIO_1 + 2:
          case BOARD_RADIO_1 + 3:
          case BOARD_RADIO_1 + 4:
          case BOARD_RADIO_1 + 5:
            g_SelectedBoard = LOWORD(wParam) - BOARD_RADIO_1;
            return TRUE;
            break;

          case IDOK:
            EndDialog(hDlg, LOWORD(wParam));
            return FALSE;

         }
      }

  }

  return FALSE;
} 
```

我想将上面的代码转换为窗口服务，所以当我这样做时：-

```
void main() 
{ 
   SERVICE_TABLE_ENTRY ServiceTable[2];
   ServiceTable[0].lpServiceName = "MemoryStatus";
   ServiceTable[0].lpServiceProc = (LPSERVICE_MAIN_FUNCTION)ServiceMain;

   ServiceTable[1].lpServiceName = NULL;
   ServiceTable[1].lpServiceProc = NULL;
   // Start the control dispatcher thread for our service
   StartServiceCtrlDispatcher(ServiceTable);  
}

// Service initialization
int InitService() 
{ 
   int result;
   result = WriteToLog("Monitoring started.");
   return(result); 
}

void ServiceMain(int argc, char** argv) 
{ 
   int error; 
   MEMORYSTATUS memory;
   char buffer[16];
   int result;

   ServiceStatus.dwServiceType = SERVICE_WIN32; 
   ServiceStatus.dwCurrentState = SERVICE_START_PENDING; 
   ServiceStatus.dwControlsAccepted   =  SERVICE_ACCEPT_STOP | SERVICE_ACCEPT_SHUTDOWN;
   ServiceStatus.dwWin32ExitCode = 0; 
   ServiceStatus.dwServiceSpecificExitCode = 0; 
   ServiceStatus.dwCheckPoint = 0; 
   ServiceStatus.dwWaitHint = 0; 

   hStatus = RegisterServiceCtrlHandler(
      "MemoryStatus", 
      (LPHANDLER_FUNCTION)ControlHandler); 
   if (hStatus == (SERVICE_STATUS_HANDLE)0) 
   { 
      // Registering Control Handler failed
      return; 
   }  
   // Initialize Service 
   error = InitService(); 
   if (error) 
   {
      // Initialization failed
      ServiceStatus.dwCurrentState = SERVICE_STOPPED; 
      ServiceStatus.dwWin32ExitCode = -1; 
      SetServiceStatus(hStatus, &ServiceStatus); 
      return; 
   } 

   // We report the running status to SCM. 
   ServiceStatus.dwCurrentState = SERVICE_RUNNING; 
   SetServiceStatus (hStatus, &ServiceStatus);

   // The worker loop of a service
   while (ServiceStatus.dwCurrentState == SERVICE_RUNNING)
   {void myfunc(HINSTANCE hInstance,
                     HINSTANCE hPrevInstance,
                     LPTSTR    lpCmdLine,
                     int       nCmdShow)
{
    UNREFERENCED_PARAMETER(hPrevInstance);
    UNREFERENCED_PARAMETER(lpCmdLine);

    // TODO: Place code here.
    MSG msg;

    if( !InitBoard() )
    {
        return 1;
    }

    HWND hDialog = 0;

    hDialog = CreateDialog (hInst, 
        MAKEINTRESOURCE (IDD_MAIN), 
        0, 
        DialogProc);
    if (!hDialog)
    {
        char buf [100];
        wsprintf (buf, "Error x%x", GetLastError ());
        MessageBox (0, buf, "CreateDialog", MB_ICONEXCLAMATION | MB_OK);
        return 1;
    }

#if !defined (_WRITE_MPEG_ )
    InitBufferHandling();
    StartRTPProcess();

    // give vlc some time to get started before shoving buffers at it...
#endif

    Sleep(250);
    if( !StartAcquisition() )
        return 1;

    g_hWnd = hDialog;
    // Main message loop:
    while (GetMessage(&msg, NULL, 0, 0))
    {
        if (!IsDialogMessage(hDialog, &msg))
        {
            TranslateMessage(&msg);
            DispatchMessage(&msg);
        } 
    }

    //return (int) msg.wParam;
    if (eventchecking)
      {
         ServiceStatus.dwCurrentState = SERVICE_STOPPED; 
         ServiceStatus.dwWin32ExitCode      = -1; 
         SetServiceStatus(hStatus, &ServiceStatus);
         return;
      }
      Sleep(SLEEP_TIME);
   }
  // return; 
}
   return;
} 
```

它给了我一个错误 C2601: 'myfunc' : 本地函数定义是非法的

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-28T08:38:34.100

从您的第二个代码块：

```
// The worker loop of a service
   while (ServiceStatus.dwCurrentState == SERVICE_RUNNING)
   {void myfunc(HINSTANCE hInstance,
                     HINSTANCE hPrevInstance,
                     LPTSTR    lpCmdLine,
                     int       nCmdShow)
{
    UNREFERENCED_PARAMETER(hPrevInstance);
    UNREFERENCED_PARAMETER(lpCmdLine); 
```

您似乎遇到了严重的剪切和粘贴错误，将 的定义粘贴`myfunc`到`ServiceMain`.

还要看看代码的末尾：

```
 Sleep(SLEEP_TIME);
   }
  // return; 
}
   return;
} 
```

缩进是错误的标志。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-28T08:37:56.973

从 while 循环中注释掉以下行 -

```
void myfunc(HINSTANCE hInstance,
                 HINSTANCE hPrevInstance,
                 LPTSTR    lpCmdLine,
                 int       nCmdShow) 
```

# eclipse - Ant buildfile 不包含 javac 任务

> ID：10781503
> 
> 赞同：15
> 
> 时间：2012-05-28T08:24:38.450
> 
> 标签：eclipse, jakarta-ee

我有 build.xml 文件，我想从现有的 Ant Buildfile 创建 Java 项目。但我有一个错误：**指定的构建文件不包含 javac 任务** 我的文件结构简单：

```
<project>
     <target ...>
     </target>
     ...
</project> 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2015-06-04T11:13:22.210

为您的 build.xml 提供 javac，如下所示：

```
<javac srcdir="src" destdir="bin" /> 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2016-03-14T17:47:53.280

正如 Puneet Pandey 指出的那样，当您的`build.xml`文件缺少`<javac>`XML 元素时会发生此错误。

文件中的`<javac>`XML 元素`build.xml`（称为[javac task](https://ant.apache.org/manual/Tasks/javac.html)）告诉编译器或 IDE（在本例中为 Eclipse）要编译源 Java 文件的位置。一旦您知道应该很清楚为什么 Eclipse 不能在`build.xml`没有`<javac>`XML 元素的情况下导入您的。

如果您不确定在哪里粘贴`<javac>`标签，我将添加一个稍微完整的示例。您将需要导航到您的`build.xml`并对其进行编辑，以使其包含标签**内**`<javac>`相应部分中的行。**`<project>`**

 **```
<project ...>
  <javac srcdir="src" destdir="bin" />
  <target ...>
  </target>
  ...
</project> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-07-31T10:54:20.987

你需要这样的东西

```
 <target name="compile">
  <javac destdir="build/classes" srcdir="src" includeantruntime="false">
    <classpath refid="compile.classpath"/>
  </javac>
  </target>

    <target name="war" depends="compile">   
  <war destfile="build/${name}.war" webxml="WebContent/WEB-INF/web.xml">
   <fileset dir="WebContent" casesensitive="no">
   </fileset>
   <lib dir="WebContent/WEB-INF/lib"/>
   <classes dir="build/classes">
   </classes>   
  </war>
</target> 
```**

# .htaccess - .htaccess - 除主页外的所有页面都使用 https 加载

> ID：10781504
> 
> 赞同：0
> 
> 时间：2012-05-28T08:24:40.803
> 
> 标签：.htaccess

我已使用以下 htaccess 文件重定向所有页面以使用 https：

```
RewriteEngine On 
RewriteCond %{HTTPS} off 
RewriteRule (.*) https://%{HTTP_HOST}%{REQUEST_URI} 
```

有没有办法可以排除主页？那么除了 www.mydomain.com 和 mydomain.com 之外的所有内容都使用 https 加载？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-28T08:33:01.803

您可以尝试在之前添加此行`RewriteRule`：

```
RewriteCond %{REQUEST_URI} !^/$ 
```

**编辑**

如果上述方法不起作用，请尝试以下方法：

```
RewriteCond %{REQUEST_URI} !^/(index\.php|)$
RewriteCond %{HTTPS} off 
RewriteRule .* https://%{HTTP_HOST}%{REQUEST_URI} [L] 
```

笔记：

1.  我假设您正在运行 PHP 应用程序服务器，因此`index.php`文档根目录中有一个文件将在有人请求时提供`/`；否则，`index\.php`用您的 DirectoryIndex 文件替换（例如`index\.html`，不要忘记反斜杠来转义点）
2.  我在重写指令中添加了一个 [L]（最后一个）标志，以使重写引擎在重写过程中在找到匹配项时停止。要了解更多信息，请参阅 Rewriterule 参考（[Apache 2.0 链接](http://httpd.apache.org/docs/2.0/mod/mod_rewrite.html#rewriterule)）

# android - 如何在android中的自定义构建布局中添加子布局

> ID：10781505
> 
> 赞同：1
> 
> 时间：2012-05-28T08:24:52.160
> 
> 标签：android, android-layout

我创建了一些 xml 布局。现在我正在创建一个包含一些元素的自定义布局（在我的 java 文件中），并希望添加之前创建的布局（xml 布局）。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-28T08:30:34.053

您可以使用`LayoutInflater`inlate 布局。`addView()`并通过方法将膨胀视图添加到您的自定义视图中

例如：

```
LayoutInflater mInflater = (LayoutInflater)getSystemService(Context.LAYOUT_INFLATER_SERVICE);
ViewGroup viewTobeLoaded = mInflater.inflate(R.layout.ilan_list_item, null);
yourView.addView(viewTobeLoaded); 
```

希望有所帮助

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-28T08:32:55.567

在新布局中使用`<include>`标签。请参阅[此处的文档。](http://developer.android.com/resources/articles/layout-tricks-reuse.html)

# c# - linq 并删除空白空间之前的所有内容（如果存在）

> ID：10781508
> 
> 赞同：0
> 
> 时间：2012-05-28T08:25:07.433
> 
> 标签：c#, linq

_comboBoxItems 是数组

```
[0] = "01 01010304"
[1] = "01 01230304"
[2] = "01 01010784"
[3] = "01 01135404" 
```

如果存在，我可以用 linq 删除空白空间之前的所有内容吗？

```
[0] = "01010304"
[1] = "01230304"
[2] = "01010784"
[3] = "01135404" 
```

或者我必须使用 foreach 然后删除数据并将其添加回数组。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-28T08:27:36.743

如果需要数组，请尝试`_comboBoxItems.Select(s => s.Split(' ').Last())`以 a结尾。`.ToArray()`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-28T08:27:14.563

采用

```
mycombobox.Items = mycombobox.Items.Select(x => x.Split(' ')[1]).ToArray(); 
```

# internet-explorer - 使用 3G 调制解调器限制网站访问（已尝试 Windows SteadyState）

> ID：10781509
> 
> 赞同：1
> 
> 时间：2012-05-28T08:25:10.427
> 
> 标签：internet-explorer, 3g, ip-restrictions

是否可以将允许的网站限制为几个预先指定的网站？

我已经尝试使用 Windows Steadystate 进行限制，但它没有限制任何内容。

我还尝试将主机文件更改为“硬编码 ip”地址，然后为 3g 调制解调器设置假 DNS 服务器。DNS 设置不会坚持 3g 调制解调器。

我还尝试在 Internet Explorer 中设置错误的代理地址，但 3g 调制解调器不支持 Internet Explorer 设置。

任何人都知道如何驯服这个 USB 3g 调制解调器 BEAST？

# php - 使用 PHP 变量从一个包含到另一个

> ID：10781511
> 
> 赞同：1
> 
> 时间：2012-05-28T08:25:31.710
> 
> 标签：php

我在一个页面上有 2 个包含。假设它们是页眉和页脚：

```
<?php
include('header.php');
include('footer.php'); 
```

我需要在页眉的页脚中使用一个变量。这可能吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-28T08:27:49.730

创建另一个包含或将 var 的逻辑放入主脚本中。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-28T08:37:12.277

除非有理由不能这样做，否则简单的解决方案是将 inc2 中使用的变量设置在 inc1 中。

当脚本包含在任何函数之外时，脚本会在全局范围内执行，因此它设置或定义的任何范围内的内容都将具有全局范围。如果脚本包含在本地范围内（例如在函数中），则脚本在同一范围内执行，因此它定义的任何内容都是本地的。请注意，包含的脚本可以访问函数的本地变量。

```
function foo($x) {
    $bar = 'bam';
    include 'script.php'; # script.php can access $x and $bar
} 
```

但是，[全局变量](http://c2.com/cgi/wiki?GlobalVariablesAreBad)可能会出现问题。更好的方法是将任务分解为单独的模块。大多数模块都是库脚本：它们只定义事物（函数、类）而不直接执行任何东西。入口点（顶层脚本）没有定义任何东西；相反，它用于连接一切并作为计算的起点。这是一个带有数据库连接的简单示例：

```
<?php
include_once('DB.php');
include_once('header.php');
include_once('footer.php');

$db = DB::connect();
header($db);
footer($db); 
```

虽然从技术上讲`$db`是一个全局变量（请注意，这只是示例代码，而不是生产代码），但不能在此脚本之外的任何地方访问它。相反，它是根据[功能](http://en.academic.ru/dic.nsf/enwiki/4622466)规则传递的（这是为安全目的而设计的，但这些规则实际上只是好的 OOP 原则）。

# knockout.js - 如果值为负，则使用淘汰赛扩展器添加警告

> ID：10781513
> 
> 赞同：2
> 
> 时间：2012-05-28T08:25:48.720
> 
> 标签：knockout.js

我有一个要求，如果我们的剔除网格中的所有数字列都为负数，则它们应该具有红色以警告用户。

我可以使用标准绑定来做到这一点，但它会向视图模型和视图添加大量代码。

我使用淘汰赛验证框架，他们使用扩展器来添加验证。

我也想做同样的事情，我查看了扩展程序示例，但它们要求您确实向视图中添加元素，验证框架以某种方式仅适用于扩展程序，我该怎么做？我的目标是只需要这样的东西来添加警告

```
this.accountBalance = ko.observable(data.AccountBalance).extend({ warnIfNegative: true }); 
```

**更新：**我在查看了验证框架之后做了这个，我不喜欢的是你需要覆盖每个绑定才能让它工作，例如我想要这个用于文本和值绑定

```
(function () {

    ko.extenders.negativeValueWarning = function (target, option) {
        target.hasWarning = ko.observable();

        function warn(newValue) {
            target.hasWarning(newValue < 0 ? true : false);
        }

        warn(target());

        target.subscribe(warn);

        return target;
    };

    var init = ko.bindingHandlers.text.init;
    ko.bindingHandlers.text.init = function (element, valueAccessor, allBindingsAccessor, viewModel, bindingContext) {

        if (init)
            init(element, valueAccessor, allBindingsAccessor, viewModel, bindingContext);

        var value = valueAccessor();
        if (value.hasWarning) {
            ko.applyBindingsToNode(element, { negativeValueWarning: value.hasWarning });
        }
    };

    ko.bindingHandlers.negativeValueWarning = {
        update: function (element, valueAccessor) {
            var warn = ko.utils.unwrapObservable(valueAccessor());
            if (warn)
                $(element).addClass("negative-warning");
            else
                $(element).removeClass("negative-warning");
        }
    };
} ()); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-28T21:52:39.333

我终于做到了，你们觉得呢？

[http://jsfiddle.net/ZYyEw/25/](http://jsfiddle.net/ZYyEw/25/)

**更新：使用计算而不是订阅**

```
ko.extenders.negativeValueWarning = function (target, option) {
    target.hasWarning = ko.observable();

    function warn(newValue) {
        if(newValue && newValue.substring) {
            newValue = parseFloat(newValue);
        }
        target.hasWarning(newValue < 0 ? true : false);
    }

    warn(target());

    target.subscribe(warn);

    return target;
}; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-28T13:29:47.617

我认为最好通过自定义活页夹。有关它们的信息，请参阅[http://knockoutjs.com/documentation/custom-bindings.html](http://knockoutjs.com/documentation/custom-bindings.html)

我在[http://jsfiddle.net/photo_tom/DzQMX/](http://jsfiddle.net/photo_tom/DzQMX/)上创建了一个小提琴，它可以满足您的需求。这个例子中的“技巧”是我重用了敲除值绑定来处理所有的实际工作。然后我添加了代码来控制控件的显示方式。它基本上是将扩展器与数据绑定器合并。

希望这可以帮助。

# objective-c - 浮点转换问题

> ID：10781514
> 
> 赞同：0
> 
> 时间：2012-05-28T08:25:50.723
> 
> 标签：objective-c, nsstring, floating-point

从字符串转换浮点数后出现问题，我的操作结果为空

NSLogs 给出正确的值，但 vitesseMoyenne 等于 null

```
-(void)setVitesseMoyenne:(float)uneDistanceTotale:(NSString*)unTempsTotal
{
    //float tempEnFloat = [unTempsTotal floatValue];

    NSLog(@"%@",unTempsTotal);

    float calculVitesseMoyenne = uneDistanceTotale / [unTempsTotal floatValue];

    NSLog(@"%f",calculVitesseMoyenne);

    vitesseMoyenne =  [NSString stringWithFormat:@"%f", calculVitesseMoyenne];
} 
```

你能看出有什么问题吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-08T10:37:30.693

我假设 vitesseMoyenne 是一个 NSString

除非您使用 ARC，否则问题是您没有保留 NSString，因此它会自动释放。*这确实意味着结果并不总是为零。

尝试

```
 vitesseMoyenne =[[NSString stringWithFormat:@"%f", calculVitesseMoyenne]retain]; 
```

并在您的课程发布时释放它。

# android - 如何在android中创建一个唯一的变量名？

> ID：10781515
> 
> 赞同：0
> 
> 时间：2012-05-28T08:26:01.077
> 
> 标签：android, for-loop

我想在地图上显示更多点。我想用“for”来做到这一点。我的问题是只显示最后一个点，因为变量：point 和 overlayItem 每次都会被覆盖。我怎样才能为这个变量取一个唯一的名字？

```
 List<Statia> arrStatia = datasourceStatia.getAllStatias();      
for (Statia s : arrStatia) {  
    String[] arrCoordonate = s.getCoord().split(",");

    GeoPoint point = new GeoPoint((int)(Double.parseDouble(arrCoordonate[1])),(int)(Double.parseDouble(arrCoordonate[0])));
    OverlayItem overlayItem = new OverlayItem(point, Double.parseDouble(arrCoordonate[1]) + "", Double.parseDouble(arrCoordonate[0]) +"");
    itemizedOverlay.addOverlay(overlayItem);  
    mapOverlays.add(itemizedOverlay);  
    mapView.postInvalidate();   

    Log.v("xxx", s.getCoord());
}

public class Statia {
    private long id;
    private String statia;
    private long idruta;
    private String coord;
    private String program;

    public long getId() {
        return id;
    }

    public void setId(long id) {
        this.id = id;
    }

    public long getIdRuta() {
        return idruta;
    }

    public void setIdRuta(long idruta) {
        this.idruta = idruta;
    }

    public String getStatia() {
        return statia;
    }

    public void setStatia(String statia) {
        this.statia = statia;
    }

    public void setCoord(String coord) {
        this.coord = coord;
    }

    public String getCoord() {
        return coord;
    }

    public void setProgram(String program) {
        this.program = program;
    }

    public String getProgram() {
        return program;
    }

    // Will be used by the ArrayAdapter in the ListView
    @Override
    public String toString() {
        return statia;
    }
}

public List<Statia> getAllStatias() {
    List<Statia> statias = new ArrayList<Statia>();

    Cursor cursor = database.query(DatabaseHelper.statiiTable,
            allColumns, null, null, null, null, null);

    cursor.moveToFirst();
    while (!cursor.isAfterLast()) {
        Statia statia = cursorToStatia(cursor);
        statias.add(statia);
        cursor.moveToNext();
    }
    // Make sure to close the cursor
    cursor.close();
    return statias;
}

private Statia cursorToStatia(Cursor cursor) {
    Statia statia = new Statia();
    statia.setId(cursor.getLong(0));
    statia.setStatia(cursor.getString(1));
    statia.setIdRuta(cursor.getInt(2));
    statia.setCoord(cursor.getString(3));
    statia.setProgram(cursor.getString(4));

    return statia;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-28T08:43:43.100

使用下面的代码，我希望它会工作。

```
 for (Statia s : arrStatia) {  
    String[] arrCoordonate = s.getCoord().split(",");

    GeoPoint point = new GeoPoint((int)(Double.parseDouble(arrCoordonate[0])),(int)(Double.parseDouble(arrCoordonate[1])));
    SimpleItemizedOverlay itemizedoverlay = new SimpleItemizedOverlay(
            drawable,<<Your Activity name >>.this);
    OverlayItem overlayItem = new OverlayItem(point, "xxx", "yyy");
    itemizedOverlay.addOverlay(overlayItem);  
    mapOverlays.add(itemizedOverlay);  
 <<your map view object>>.postInvalidate();    

} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-28T08:30:39.910

您可以将它们放入大小等于 arrStatia 的数组中。

# go - 如何在 Go 中传递多个命令？

> ID：10781516
> 
> 赞同：86
> 
> 时间：2012-05-28T08:26:00.940
> 
> 标签：go, pipe

如何在 Go 中将多个外部命令连接在一起？我已经尝试过这段代码，但我收到一条错误消息`exit status 1`。

```
package main

import (
    "io"
    "log"
    "os"
    "os/exec"
)

func main() {
    c1 := exec.Command("ls")
    stdout1, err := c1.StdoutPipe()
    if err != nil {
        log.Fatal(err)
    }

    if err = c1.Start(); err != nil {
        log.Fatal(err)
    }
    if err = c1.Wait(); err != nil {
        log.Fatal(err)
    }

    c2 := exec.Command("wc", "-l")
    c2.Stdin = stdout1

    stdout2, err := c2.StdoutPipe()
    if err != nil {
        log.Fatal(err)
    }

    if err = c2.Start(); err != nil {
        log.Fatal(err)
    }
    if err = c2.Wait(); err != nil {
        log.Fatal(err)
    }

    io.Copy(os.Stdout, stdout2)
} 
```

* * *

## 回答 #1

> 赞同：140
> 
> 时间：2015-05-19T15:04:02.190

对于简单的场景，您可以使用这种方法：

`bash -c "echo 'your command goes here'"`

例如，此函数使用管道命令检索 CPU 型号名称：

```
func getCPUmodel() string {
        cmd := "cat /proc/cpuinfo | egrep '^model name' | uniq | awk '{print substr($0, index($0,$4))}'"
        out, err := exec.Command("bash","-c",cmd).Output()
        if err != nil {
                return fmt.Sprintf("Failed to execute command: %s", cmd)
        }
        return string(out)
} 
```

* * *

## 回答 #2

> 赞同：62
> 
> 时间：2012-05-28T08:31:54.557

> StdoutPipe 返回一个管道，该管道将在命令启动时连接到命令的标准输出。Wait 看到命令退出后，管道将自动关闭。

（来自[http://golang.org/pkg/os/exec/#Cmd.StdinPipe](http://golang.org/pkg/os/exec/#Cmd.StdinPipe)）

你这样做的事实`c1.Wait`关闭了`stdoutPipe`.

我做了一个工作示例（只是一个演示，添加错误捕获！）：

```
package main

import (
    "bytes"
    "io"
    "os"
    "os/exec"
)

func main() {
    c1 := exec.Command("ls")
    c2 := exec.Command("wc", "-l")

    r, w := io.Pipe() 
    c1.Stdout = w
    c2.Stdin = r

    var b2 bytes.Buffer
    c2.Stdout = &b2

    c1.Start()
    c2.Start()
    c1.Wait()
    w.Close()
    c2.Wait()
    io.Copy(os.Stdout, &b2)
} 
```

* * *

## 回答 #3

> 赞同：58
> 
> 时间：2012-06-08T17:08:10.553

```
package main

import (
    "os"
    "os/exec"
)

func main() {
    c1 := exec.Command("ls")
    c2 := exec.Command("wc", "-l")
    c2.Stdin, _ = c1.StdoutPipe()
    c2.Stdout = os.Stdout
    _ = c2.Start()
    _ = c1.Run()
    _ = c2.Wait()
} 
```

* * *

## 回答 #4

> 赞同：8
> 
> 时间：2016-03-12T15:38:42.393

就像第一个答案一样，但是第一个命令在 goroutine 中启动并等待。这使管道保持快乐。

```
package main

import (
    "io"
    "os"
    "os/exec"
)

func main() {
    c1 := exec.Command("ls")
    c2 := exec.Command("wc", "-l")

    pr, pw := io.Pipe()
    c1.Stdout = pw
    c2.Stdin = pr
    c2.Stdout = os.Stdout

    c1.Start()
    c2.Start()

    go func() {
        defer pw.Close()

        c1.Wait()
    }()
    c2.Wait()
} 
```

* * *

## 回答 #5

> 赞同：5
> 
> 时间：2014-10-24T05:08:43.977

这是一个完整的工作示例。该`Execute`函数采用任意数量的`exec.Cmd`实例（使用[可变参数函数](https://gobyexample.com/variadic-functions)），然后循环它们正确地将标准输出的输出附加到下一个命令的标准输入。这必须在调用任何函数之前完成。

然后 call 函数开始循环调用命令，使用 defers 递归调用并确保正确关闭管道

```
package main

import (
    "bytes"
    "io"
    "log"
    "os"
    "os/exec"
)

func Execute(output_buffer *bytes.Buffer, stack ...*exec.Cmd) (err error) {
    var error_buffer bytes.Buffer
    pipe_stack := make([]*io.PipeWriter, len(stack)-1)
    i := 0
    for ; i < len(stack)-1; i++ {
        stdin_pipe, stdout_pipe := io.Pipe()
        stack[i].Stdout = stdout_pipe
        stack[i].Stderr = &error_buffer
        stack[i+1].Stdin = stdin_pipe
        pipe_stack[i] = stdout_pipe
    }
    stack[i].Stdout = output_buffer
    stack[i].Stderr = &error_buffer

    if err := call(stack, pipe_stack); err != nil {
        log.Fatalln(string(error_buffer.Bytes()), err)
    }
    return err
}

func call(stack []*exec.Cmd, pipes []*io.PipeWriter) (err error) {
    if stack[0].Process == nil {
        if err = stack[0].Start(); err != nil {
            return err
        }
    }
    if len(stack) > 1 {
        if err = stack[1].Start(); err != nil {
             return err
        }
        defer func() {
            if err == nil {
                pipes[0].Close()
                err = call(stack[1:], pipes[1:])
            }
        }()
    }
    return stack[0].Wait()
}

func main() {
    var b bytes.Buffer
    if err := Execute(&b,
        exec.Command("ls", "/Users/tyndyll/Downloads"),
        exec.Command("grep", "as"),
        exec.Command("sort", "-r"),
    ); err != nil {
        log.Fatalln(err)
    }
    io.Copy(os.Stdout, &b)
} 
```

在这个要点中可用

[https://gist.github.com/tyndyll/89fbb2c2273f83a074dc](https://gist.github.com/tyndyll/89fbb2c2273f83a074dc)

需要知道的一点是，像 ~ 这样的 shell 变量不会被插值

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2018-09-30T17:38:43.553

```
package main

import (
    ...
    pipe "github.com/b4b4r07/go-pipe"
)

func main() {
    var b bytes.Buffer
    pipe.Command(&b,
        exec.Command("ls", "/Users/b4b4r07/Downloads"),
        exec.Command("grep", "Vim"),
    )

    io.Copy(os.Stdout, &b)
} 
```

[在遇到b4b4r07的](https://github.com/b4b4r07)[这个整洁的包](https://github.com/b4b4r07/go-pipe)之前，我花了一天时间尝试使用 [Denys Séguret 的](https://stackoverflow.com/a/10781582/4379762)答案来为多个包装提供包装。`exec.Command`

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2021-05-10T01:49:23.910

我想将一些视频和音频传输到 FFplay。这对我有用：

```
package main

import (
   "io"
   "os/exec"
)

func main() {
   ffmpeg := exec.Command(
      "ffmpeg", "-i", "247.webm", "-i", "251.webm", "-c", "copy", "-f", "webm", "-",
   )
   ffplay := exec.Command("ffplay", "-")
   ffplay.Stdin, ffmpeg.Stdout = io.Pipe()
   ffmpeg.Start()
   ffplay.Run()
} 
```

[https://golang.org/pkg/io#Pipe](https://golang.org/pkg/io#Pipe)

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2021-05-15T11:41:45.703

因为构建这样的命令链可能很复杂，所以我决定为此目的实现一个小 go 库：[https ://github.com/rainu/go-command-chain](https://github.com/rainu/go-command-chain)

```
package main

import (
    "bytes"
    "fmt"
    "github.com/rainu/go-command-chain"
)

func main() {
    output := &bytes.Buffer{}

    err := cmdchain.Builder().
        Join("ls").
        Join("wc", "-l").
        Finalize().WithOutput(output).Run()

    if err != nil {
        panic(err)
    }
    fmt.Printf("Errors found: %s", output)
} 
```

在这个库的帮助下，您还可以配置标准错误转发和其他东西。

# android - 一个接一个地播放音频文件

> ID：10781522
> 
> 赞同：8
> 
> 时间：2012-05-28T08:26:27.447
> 
> 标签：android, android-mediaplayer

我有一个这样的音频文件列表，

```
int music_numbers[] = { R.raw.one, R.raw.two, R.raw.three, R.raw.four,
            R.raw.five, R.raw.six, R.raw.seven, R.raw.eight, R.raw.nine }; 
```

我需要一个一个地玩这个——当我向这个 play_numbers 方法发送 100 时——我打算明智地玩数字..

我已经做到了 - 但我无法一个接一个地做到这一点..

```
private void _play_numbers(final String i) {
    // TODO Auto-generated method stub

    mPlayer = MediaPlayer.create(PlayFileActivity.this, R.raw.payment);
    mPlayer.start();

    mPlayer.setOnCompletionListener(new OnCompletionListener() {

        @Override
        public void onCompletion(MediaPlayer mp) {
            // TODO Auto-generated method stub
            mPlayer.stop();
            myDigit = i.charAt(1) + "";

            _function_play_file(Integer.parseInt(myDigit));

        }

    });

} 
```

在 _function_play_file - 我有这个

```
void _function_play_file(int files) {

        switch (files) {
        case 0:
            mPlayer = MediaPlayer.create(this, music_numbers[0]);
            mPlayer.start();
        case 1:
            mPlayer = MediaPlayer.create(this, music_numbers[1]);
            mPlayer.start();
        case 2:
            mPlayer = MediaPlayer.create(this, music_numbers[2]);
            mPlayer.start();
        case 3:
            mPlayer = MediaPlayer.create(this, music_numbers[3]);
            mPlayer.start();
        case 4:
            mPlayer = MediaPlayer.create(this, music_numbers[4]);
            mPlayer.start();
        case 5:
            mPlayer = MediaPlayer.create(this, music_numbers[5]);
            mPlayer.start();
        case 6:
            mPlayer = MediaPlayer.create(this, music_numbers[6]);
            mPlayer.start();
        case 7:
            mPlayer = MediaPlayer.create(this, music_numbers[7]);
            mPlayer.start();
        case 8:
            mPlayer = MediaPlayer.create(this, music_numbers[8]);
            mPlayer.start();
        case 9:
            mPlayer = MediaPlayer.create(this, music_numbers[9]);
            mPlayer.start();
        case 10:
            mPlayer = MediaPlayer.create(this, music_numbers[10]);
            mPlayer.start();

        }
    } 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-28T08:44:59.017

您需要为每个设置一个 onCompletionListener 并在完成时启动下一个。

```
mPlayer.setOnCompletionListener(new MediaPlayer.OnCompletionListener() 
{
    @Override
    public void onCompletion(MediaPlayer mp) 
    {
         // Code to start the next audio in the sequence
    }
}); 
```

实现这一点的最佳方法是创建一个实现 OnCompletionListener 的类，该类处理 onCompletion 并接收下一个要播放的文件。这样你就可以在你的代码中很好地实例化它。当然，不要忘记休息；在上述情况下。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-05-28T09:05:50.727

使用队列来保存要播放的号码。

```
private void _play_numbers(final String i) {
    // e.g '100': put '1', '0', '0' in a Queue after converting to digits
    Queue queue = new LinkedList();
    //Use the add method to add items.

    myDigit = // remove next digit from queue..

    _function_play_file(myDigit);
}

void _function_play_file(int files) {
     switch(files) {
       case 0:
        mPlayer = MediaPlayer.create(PlayFileActivity.this, R.raw.payment);
        mPlayer.setOnCompletionListener(completeListener );
        mPlayer.start();
        break;
 .....
 }

OnCompletionListener completeListener = new OnCompletionListener() {

    @Override
    public void onCompletion(MediaPlayer mp) {
        mp.release();
        myDigit = // remove next digit from queue..
        if (myDigit != -1)  // if queue is not empty..
            _function_play_file(myDigit);
    }
}); 
```

}

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-28T08:54:41.903

此代码适用于我，但我将音频文件放在资产文件夹中：

```
//define a variable to be used as index.
int audioindex = 0;
//Extract the files into an array
String[] files = null;
files = assetManager.list("audiofiles");
mp.setOnCompletionListener(new OnCompletionListener(){
    // @Override
    public void onCompletion(MediaPlayer arg0) {
    // File has ended, play the next one.
   FunctionPlayFile(files[audioindex]);
   audioindex+=1; //increment the index to get the next audiofile
     }
}); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-06-13T07:11:44.710

这是在继续循环中播放歌曲的工作代码

```
public class MainActivity extends Activity 
{
    private int[] tracks = {R.raw.explosion,R.raw.pianothingy_one,R.raw.car_horn_x};
    int mCompleted = 0;

 public void onCreate(Bundle savedInstanceState) 
 {
 super.onCreate(savedInstanceState);
 setContentView(R.layout.activity_main);

 MediaPlayer mp = MediaPlayer.create(this, tracks[0]);
 mp.setOnCompletionListener(new OnCompletionListener() 
 {
     @Override
     public void onCompletion(MediaPlayer mp)
     {
         mCompleted++;
         mp.reset();
         if (mCompleted < tracks.length) 
         {
             try
             {
                 AssetFileDescriptor afd = getResources().openRawResourceFd(tracks[mCompleted]);
                 if (afd != null) 
                 {
                     mp.setDataSource(afd.getFileDescriptor(), afd.getStartOffset(), afd.getLength());
                     afd.close();
                     mp.prepare();
                     mp.start();
                 }
             }
             catch (Exception ex) 
             {
                ex.printStackTrace();
             }

         } 
         else if (mCompleted>=tracks.length) 
         {
             mCompleted =0;
             try
             {
                 AssetFileDescriptor afd = getResources().openRawResourceFd(tracks[mCompleted]);
                 if (afd != null) 
                 {
                     mp.setDataSource(afd.getFileDescriptor(), afd.getStartOffset(), afd.getLength());
                     afd.close();
                     mp.prepare();
                     mp.start();
                 }
             }
             catch (Exception ex) 
             {
                ex.printStackTrace();
             }
         }
         else
         {
             mCompleted=0;
              mp.release();
              mp = null;
         }

     }
 });

 mp.start(); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-06-02T20:57:44.330

像这样使用 PlayMedia

```
int[] soundIDs = {R.raw.yes, R.raw.eat};
PlayMedia playAudio = new PlayMedia(context,soundIDs);
playAudio.execute(); 
```

并像这样定义 PlayMedia 类

```
import android.content.Context;
import android.media.MediaPlayer;
import android.media.MediaPlayer.OnCompletionListener;
import android.os.AsyncTask;
import android.util.Log;

public class PlayMedia extends AsyncTask<Void, Void, Void> {

    private static final String LOG_TAG = PlayMedia.class.getSimpleName();

    Context context;
    private MediaPlayer mediaPlayer;
    int[] soundIDs;
    int idx =1;

    public PlayMedia(MediaPlayer mediaPlayer) {
        this.mediaPlayer = mediaPlayer;
    }
    public PlayMedia(final Context context, final int[] soundIDs) {
        this.context = context;
        this.soundIDs=soundIDs;
        mediaPlayer = MediaPlayer.create(context,soundIDs[0]);
        setNextMediaForMediaPlayer(mediaPlayer);
    }

    public void setNextMediaForMediaPlayer(MediaPlayer player){
        player.setOnCompletionListener(new OnCompletionListener() {         
            public void onCompletion(MediaPlayer mp) {
                if(soundIDs.length>idx){
                    mp.release();
                    mp = MediaPlayer.create(context,soundIDs[idx]);
                    setNextMediaForMediaPlayer(mp);
                    mp.start();
                    idx+=1;
                }               
            }
        });
    }

    @Override
    protected Void doInBackground(Void... params) {
        try {
            mediaPlayer.start();
        } catch (IllegalArgumentException e) {
            Log.e(LOG_TAG, "", e);
        } catch (SecurityException e) {
            Log.e(LOG_TAG, "", e);
        } catch (IllegalStateException e) {
            Log.e(LOG_TAG, "", e);
        }

        return null;
    }
} 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2019-02-05T20:21:16.077

对我来说，问题是我`mediaPlayer.prepare()`没有先打电话就打电话`mediaPlayer.reset()`。

现在一切都好。

* * *

## 回答 #7

> 赞同：-1
> 
> 时间：2012-05-28T08:54:03.637

```
 MediaPlayer mediaplayer = new MediaPlayer();                                
    setSound(file );    
    try {
    if(mediaplayer != null)
        {
            mediaplayer.stop();
            mediaplayer.release();
            }
            mediaplayer.setDataSource(getResources().openRawResourceFd(file)
                                             .getFileDescriptor());
            mediaplayer.prepare();  
            mediaplayer = MediaPlayer.create(getBaseContext(), now); 
            mediaplayer.start();                     
            mediaplayer.setLooping(false);
            mediaplayer.setLooping(true); //sequence playing                    

            }   catch (NullPointerException e) {                         
                    e.printStackTrace();
       } 
```

# php - 在不生成 PHP 通知的情况下访问未知数组元素的最佳方法是什么？

> ID：10781523
> 
> 赞同：3
> 
> 时间：2012-05-28T08:26:31.423
> 
> 标签：php

如果我有这个数组，

```
ini_set('display_errors', true);
error_reporting(E_ALL);

$arr = array(
  'id' => 1234,
  'name' => 'Jack',
  'email' => 'jack@example.com',
  'city' => array(
    'id' => 55,
    'name' => 'Los Angeles',
    'country' => array(
      'id' => 77,
      'name' => 'USA',
     ),
  ),
); 
```

我可以得到国家名称

```
$name = $arr['city']['country']['name']; 
```

但是如果 country 数组不存在，PHP 会产生警告：

```
Notice: Undefined index ... on line xxx 
```

当然我可以先做测试：

```
if (isset($arr['city']['country']['name'])) {
  $name = $arr['city']['country']['name'];
} else {
  $name = '';  // or set to default value;
} 
```

但这是低效的。`$arr['city']['country']['name']` 如果它不存在，那么在不生成 PHP 通知的情况下获得的最佳方法是什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-28T08:26:31.657

我从 Kohana 那里借用了下面的代码。如果键不存在，它将返回多维数组的元素或 NULL（或选择的任何默认值）。

```
function _arr($arr, $path, $default = NULL) 
{
  if (!is_array($arr))
    return $default;

  $cursor = $arr;
  $keys = explode('.', $path);

  foreach ($keys as $key) {
    if (isset($cursor[$key])) {
      $cursor = $cursor[$key];
    } else {
      return $default;
    }
  }

  return $cursor;
} 
```

给定上面的输入数组，访问它的元素：

```
echo _arr($arr, 'id');                    // 1234
echo _arr($arr, 'city.country.name');     // USA
echo _arr($arr, 'city.name');             // Los Angeles
echo _arr($arr, 'city.zip', 'not set');   // not set 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-28T09:12:17.927

`@` [错误控制运算符](http://php.net/manual/en/language.operators.errorcontrol.php)抑制表达式生成的任何错误，包括无效的数组键。

```
$name = @$arr['city']['country']['name']; 
```

# c# - 从 MySqlReader 读取

> ID：10781537
> 
> 赞同：3
> 
> 时间：2012-05-28T08:27:46.623
> 
> 标签：c#, .net, mysql

出于某种原因，我在谷歌中找不到一个很好的答案，为什么这段代码有效：

```
MySqlConnection connection = new MySqlConnection("Databaseyeshuv1");
MySqlCommand command = connection.CreateCommand();
MySqlDataReader Reader;
command.CommandText =
  "SELECT * FROM `MASADE_FEA_bak2` WHERE `marom_num`        equals `3`";
connection.Open();
Reader = command.ExecuteReader();
while (Reader.Read())
{
  string line = Reader.GetString(1);
  this.שטח_קומה_מחושב.Text = line;
}
connection.Close(); 
```

这是我得到的错误：

> System.ArgumentException：初始化字符串的格式不符合从索引 0 开始的规范。在 System.Data.Common.DbConnectionOptions.GetKeyValuePair(String connectionString, Int32 currentPosition, StringBuilder buffer, Boolean useOdbcRules, String& keyname, String& keyvalue) 在 System .Data.Common.DbConnectionOptions.ParseInternal(Hashtable parsetable, String connectionString, Boolean buildChain, Hashtable synonyms, Boolean firstKey) 在 System.Data.Common.DbConnectionOptions..ctor(String connectionString, Hashtable synonyms, Boolean useOdbcRules) 在 System.Data。 Common.DbConnectionStringBuilder.set_ConnectionString(String value) 在 MySql.Data.MySqlClient.MySqlConnection.set_ConnectionString(String value) 在 MySql.Data.MySqlClient.MySqlConnection..ctor(String connectionString) 在 MyApp7.UI.Controls。ShowMASADE_FEA_bak2.KomotMASADE_FEA_bak2TableControlRow.Setשטח_קומה_מחושב()

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-28T09:04:28.083

我认为您在代码中犯了很多错误：

1.  该字符串`"Databaseyeshuv1"`应该是连接字符串值，而不是名称。您应该编写一些代码来从配置文件中获取该值。看看[这里](http://msdn.microsoft.com/en-us/library/ms178411.aspx)
2.  在您的命令文本中，应该使用`=`而不是`equals`并删除字符 quoting `3`，所以只使用数字 3 。

# jsp - 在 liferay 的视图中显示控制器数据

> ID：10781539
> 
> 赞同：3
> 
> 时间：2012-05-28T08:28:01.363
> 
> 标签：jsp, view, controller, liferay

我到处找都找不到，或者我的搜索不够好。无论如何，这是我的问题。如何在 liferay MVC 中显示和/或将数据从控制器传输到视图 jsp 文件？即如果变量“var”在控制器java 类中包含值“This is a variable”，我如何在jsp 文件中显示和/或访问它？或者让它变得简单......我们如何将值从控制器传递到liferay MVC中的jsp视图？

感谢您的任何建议

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-28T09:28:07.297

根据您使用的框架，有几个选项可以实现这一点。（Liferay MVC Portlet、Spring Portlet、JSF）

对于这个答案，我假设您使用 MVC Portlet：

让我们来看看大家最喜欢的例子 hello world：

```
public class HelloWorldPortlet extends MVCPortlet{

    @Override
    public void doView(RenderRequest renderRequest, RenderResponse renderResponse) throws IOException, PortletException {

        renderRequest.setAttribute("helloMessage", "Hello World");
        super.doView(renderRequest, renderResponse);
    }

} 
```

* * *

**现在这将无法开箱即用！**

在您的 portlet.xml 更改中：

```
<portlet-class>com.liferay.util.bridges.mvc.MVCPortlet</portlet-class> 
```

到：

```
<portlet-class>**Your Package structure**.HelloWorldPortlet</portlet-class> 
```

* * *

视图.jsp

```
<%@ taglib uri="http://java.sun.com/portlet_2_0" prefix="portlet" %>
<%@ taglib uri="http://java.sun.com/jstl/core_rt" prefix="c" %>

<portlet:defineObjects />

<%-- Option A --%>
<h1>
    <c:out value="${helloMessage}" />
</h1>

<%-- Option B --%>
<% 
        String message = (String)request.getAttribute("helloMessage");
%>
<h1>
    <%= message %>
</h1> 
```

* * *

自定义动作：

查看.jsp

```
<portlet:actionURL name="worldHello" var="worldpageURL" />

<aui:a href="${worldpageURL}">World hello</aui:a>

<h2><c:out value="${worldHello}"/></h2> 
```

HelloWorldPortlet

```
public class HelloWorldPortlet extends MVCPortlet{

    @Override
    public void doView(RenderRequest renderRequest, RenderResponse renderResponse) throws IOException, PortletException {

        renderRequest.setAttribute("helloMessage", "Hello World");
        super.doView(renderRequest, renderResponse);
    }

    public void worldHello(ActionRequest request, ActionResponse renderResponse){
        request.setAttribute("worldHello", "World Hello");
    }
} 
```

根据您的评论，最好调查一下：

[http://www.liferay.com/community/liferay-projects/liferay-faces/documentation](http://www.liferay.com/community/liferay-projects/liferay-faces/documentation) 由于基于 JSF 的 portlet 可能是未来的主要焦点

[http://www.liferay.com/community/blogs?p_p_id=115&p_p_lifecycle=0&p_p_state=normal&p_p_mode=view&_115_struts_action=%2Fblogs_aggregator%2Fview_entry&_115_entryId=13443886](http://www.liferay.com/community/blogs?p_p_id=115&p_p_lifecycle=0&p_p_state=normal&p_p_mode=view&_115_struts_action=%2Fblogs_aggregator%2Fview_entry&_115_entryId=13443886)

# c# - ASP.NET MVC - 用户管理图片文件夹（FTP？）

> ID：10781541
> 
> 赞同：1
> 
> 时间：2012-05-28T08:28:20.573
> 
> 标签：c#, asp.net-mvc

我正在开发一个 ASP.NET MVC 应用程序，我需要一个包含图像的每个用户文件夹（包括子文件夹）。我正在寻找一种简单的方法来管理此类图像库（文件夹上传、单个图像上传、删除、显示）。

画廊本身不是应用程序的关键功能，也不必花哨（无需评论等）

现在，我正在考虑每个用户的 FTP 帐户。然而，

1.  有没有办法设置从 c# 代码到 ftp 文件夹的大小限制？
2.  “普通用户”如何上传他的图片文件夹？有没有免费的 FTP 图片管理插件？

还是有更简单的方法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-28T09:18:22.837

对于文件夹的大小，使用代码

网络

```
Dim Klasor As DirectoryInfo = New DirectoryInfo(Server.MapPath("~/Content"))
Dim Boyut As Decimal
For Each dr In Klasor.GetFiles
   Boyut += dr.Length
Next 
```

Vb 到 C# :(

```
DirectoryInfo Klasor = new DirectoryInfo(Server.MapPath("~/Content"));
    decimal Boyut = default(decimal);
    foreach (object dr_loopVariable in Klasor.GetFiles) {
        dr = dr_loopVariable;
        Boyut += dr.Length;
    } 
```

关闭对 http 上的文件夹的访问，使用授权成员资格。查询只接受会员自己的文件夹。使用授权读写操作..

示例阅读：Vb.Net

```
 Function FileReturn() As FileResult
            Dim fi As New FileInfo(Server.MapPath("~/UserFiles/{UserID}/me.png"))
            Return File(fi.OpenRead, "image/png") 
//and for download Return File(fi.OpenRead, "image/png").FileDownloadName("me.png download") or Return File(fi.OpenRead, "image/png","meee")
        End Function 
```

转换 C#：

```
public FileResult FileReturn()
{
    FileInfo fi = new FileInfo(Server.MapPath("~/UserFiles/{UserID}/me.png"));
    return File(fi.OpenRead, "image/png");
    //and for download Return File(fi.OpenRead, "image/png").FileDownloadName("me.png download") or Return File(fi.OpenRead, "image/png","meee")
} 
```

我很抱歉 vb.net 代码

# c - 使用“make”编译 C 源代码

> ID：10781542
> 
> 赞同：0
> 
> 时间：2012-05-28T08:28:28.453
> 
> 标签：c, makefile, c-preprocessor

我正在尝试使用他们的合并源和“autoconf”从这里为 Windows 64 位编译 sqlite3：[http ://www.sqlite.org/sqlite-amalgamation-3071201.zip](http://www.sqlite.org/sqlite-amalgamation-3071201.zip)

有人在我之前的问题上发布了[Need 64-bit SQLite DLL for managed C# application](https://stackoverflow.com/questions/10691657/need-64-bit-sqlite-dll-for-managed-c-sharp-application)一些预处理器定义了我需要使用：

*   WIN64 NDBUG
*   _视窗
*   _USRDLL
*   NO_TCL
*   _CRT_SECURE_NO_DEPRECATE
*   线程安全=1
*   TEMP_STORE=1
*   SQLITE_MAX_EXPR_DEPTH=0

我四处寻找，试图找出如何真正做到这一点——我是这一切的新手。我记得 Linux 有一个“make”工具，所以我启动了我的 Ubuntu VM，安装了 make 和 gcc，然后在一个新目录中准备了源代码。

通过阅读其他帖子和 Internet 文章，我收集了一些提示，预处理器定义可以进入 Makefile，因此我在 Makefile.in 中的所有其他定义之后的某个地方执行了此操作，以将定义添加到我找到的 CFLAGS 变量中：

```
CFLAGS+=-DWIN64 NDEBUG
CFLAGS+=-D_WINDOWS
CFLAGS+=-D_USRDLL
CFLAGS+=-DNO_TCL
CFLAGS+=-D_CRT_SECURE_NO_DEPRECATE
CFLAGS+=-DTHREADSAFE=1
CFLAGS+=-DTEMP_STORE=1
CFLAGS+=-DSQLITE_MAX_EXPR_DEPTH=0 
```

我做了 a `bash configure`then a `make`，它很高兴地做了一些事情。但是，现在目录中唯一的二进制/目标文件是 shell.o 和 sqlite3.o。现在据我所知，这些需要首先链接以获得一些可行的机器代码 - 所以它们不是我想要的。我期待一个DLL文件出现在某个地方，或者至少是类似的东西。

我究竟做错了什么？

**更新** 我最初使用的是 CFLAGS:=，我认为是附加的，但结果应该是 +=。现在它给出了以下错误 - ar: sqlite3.o: No such file or directory

# ruby-on-rails - Rails 3.2在过滤器之前在应用程序控制器中获取对象

> ID：10781544
> 
> 赞同：0
> 
> 时间：2012-05-28T08:28:32.410
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3, inheritance, activerecord

我正在尝试在我的 _before_filter_ 中使用一个与 http 参数中的 a`ApplicationController`匹配的用户对象，例如：`user_id`

```
before_filter :fetch_user

def fetch_user
  if params[:user_id].present?
    @user = User.find(params[:user_id])
  end
  rescue ActiveRecord::RecordNotFound
  # user not found
end 
```

这在所有继承自`ApplicationController` **的控制器中都适用于我，除了称为 UsersController 的控制器**似乎`@user`以`nil`某种方式设置为。

这种行为的原因可能是什么？这是标准行为吗？如何避免/禁用它？

**更新：**

我总是将调用的参数传递`user_id`给控制器​​。如果我`exact same before filter`直接将它包含在 UsersController 中，它就可以工作！UsersController 中没有其他过滤器

**更新 2：**

用于用户控制器的路由

```
match ':user_id' => 'users#show' 
```

用户控制器代码：

```
 def show
    if @user     
      render :text => "user not nil"
    else
      render :text => "user nil"
   end
  end 
```

在 user_id 参数中传递的 id 肯定有一个用户，因为

谢谢你的帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-28T08:38:49.187

在 UsersController 中的 point.1，您将 params[:id] 作为 user_id

point.2 使用 find_by_id 来避免救援 ActiveRecord::RecordNotFound，它安全地返回 nil

所以...

```
def fetch_user
  user_id = controller_name=='users' ? params[:id] : params[:user_id]
  @user ||= User.find_by_id user_id
end 
```

# specflow - 使用 SpecFlow 创建行测试

> ID：10781545
> 
> 赞同：1
> 
> 时间：2012-05-28T08:28:34.860
> 
> 标签：specflow, rowtest

我正在尝试使用 SpecFlow 和 Microsoft 内置测试框架创建行测试，这些内容如下：

```
场景大纲：测试计算器
  鉴于我已在计算器中输入 <x>
  我已经在计算器中输入了 <y>
  当我按添加
  那么结果应该是屏幕上的 <result>

例子：
  | x | 是 | 结果|
  | 1 | 2 | 3|
  | 2 | 2 | 4|

```

我面临的问题是，给定方案大纲中的任何步骤，都会为示例表中的每个值自动生成一个单独的步骤方法。我希望能够为每个步骤实现一个接收输入值作为参数的通用方法，但它似乎不起作用。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-29T08:57:30.680

最后，它看起来像预期的那样工作，我缺少的是输入参数占位符周围的引号：

```
场景大纲：测试计算器
  鉴于我在计算器中输入了“<x>”
  我已经在计算器中输入了“<y>”
  当我按添加
  那么结果应该是屏幕上的“<result>”

例子：
  | x | 是 | 结果|
  | 1 | 2 | 3|
  | 2 | 2 | 4|

```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-07T14:09:52.773

我在 VS 2012 中遇到了同样的问题。我认为这可能是 SpecFlow 的一个错误，因为当我将 Scenario Outline 更改为仅是一个 Scenario 时，它会正确生成所有内容。所有文档都说您不必将占位符括在引号中。

简而言之，我的解决方案是将其更改为 Scenario 以生成步骤。但别忘了，你必须把它改回 Scenario Outline 才能编译。这对我有用。

# php - 加载后将下拉列表重置为原始列表

> ID：10781549
> 
> 赞同：0
> 
> 时间：2012-05-28T08:28:54.067
> 
> 标签：php, javascript, jquery

```
<select id="ddl" name="ddl">
  <option value="Col">loading</option>
</select>
<select id="ddlCol" name="ddlCol">
  <option value="Col">loading</option>
</select>
<select id="ddlCol2" name="ddlCol">
  <option value="Col">loading</option>
</select>
$("#ddl").change(function(){
  $("#ddlcol").load(Test1.html);
});
$("#ddlcol").change(function(){
  $("#ddlcol2").load(Test2.html);
}); 
```

现在我有 3 个下拉列表。当我的第一个下拉列表选择`dll`字段时。 在我选择一个值后将`ddlCol`被加载`test1.html``ddlCol``ddlcol2``test2.html`

我想知道的是，如果我选择第一个下拉列表如何重置`ddlcol2`为其默认值？例子

> ddl
> 
> 苹果
> 
> 橙子
> 
> 梨
> 
> ddlCol
> 
> 1美元
> 
> 2美元
> 
> 3 美元
> 
> ddlCol2
> 
> 红色的
> 
> 绿
> 
> 紫色的
> 
> 选择苹果。
> 
> ddlCol 更改
> 
> 1美元
> 
> 1.50 美元
> 
> 2美元
> 
> 选择 1 美元
> 
> ddlCol2 更改
> 
> 蓝色的
> 
> 粉色的
> 
> 现在选择梨
> 
> 我的 ddlCol2 将重置回
> 
> 红色的
> 
> 绿
> 
> 紫色的

. 我将如何重置它？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-28T09:01:06.883

当需要重新加载它们时，您需要相应地触发它们。

```
var refreshColThenCol2 = function(){
  $("#ddlcol").load(url, refreshCol2);
};

var refreshCol2 = function(){ 
  $("#ddlcol2").load(url);
};

$("#ddl").change(refreshColThenCol2);
$("#ddlcol").change(refreshCol2); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-29T01:23:04.057

```
var refreshColThenCol2 = function(){
   $("#ddlCol1").html($("#ddl2").html());
}; 
```

我认为以这种方式加载要好得多

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-10-09T15:42:37.187

简单有效的功能，适合我。\ 将其插入您希望使用它的页面上的一些脚本标签之间。

```
window.onload=function() {
  document.getElementById("IDofyourdropdown").selectedIndex = 0;
} 
```

# keyboard-shortcuts - 如何使用按钮创建虚拟键单击

> ID：10781550
> 
> 赞同：1
> 
> 时间：2012-05-28T08:29:04.770
> 
> 标签：keyboard-shortcuts

我正在尝试通过 C# 在 Metro 风格应用程序中使用 UI 按钮（“Capture”）创建虚拟键单击（PrintScreen）。并将图像保存为位图或 StorageFile。如何创建一个事件来做到这一点？我正在尝试使用PrintScreen，但我只在Windows.System下找到了枚举VirtualKey.Snapshot，但我不知道如何使用它。

或者是否有任何 API 或方法可以直接用于保存 PrintScreen 图像？我发现了一些 VS 论坛，但它只适用于 .NET [http://social.msdn.microsoft.com/Forums/en/csharpgeneral/thread/79efecc4-fa6d-4078-afe4-bb1379bb968b](http://social.msdn.microsoft.com/Forums/en/csharpgeneral/thread/79efecc4-fa6d-4078-afe4-bb1379bb968b)

```
using System.Drawing;  
using System.Drawing.Imaging; 

private void PrintScreen()
{  
    Bitmap printscreen = new Bitmap(Screen.PrimaryScreen.Bounds.Width, Screen.PrimaryScreen.Bounds.Height);
    Graphics graphics = Graphics.FromImage(printscreen as Image);

    graphics.CopyFromScreen(0, 0, 0, 0, printscreen.Size);
    printscreen.Save(@"C:\Temp\printscreen.jpg", ImageFormat.Jpeg);
} 
```

# c#-4.0 - 在 C# 中使用 linq 解析 xml 元素时遇到问题

> ID：10781559
> 
> 赞同：1
> 
> 时间：2012-05-28T08:29:44.813
> 
> 标签：c#-4.0, linq-to-xml

我有一个这样的 xml

```
<rootnode>

<lvl1>AIT</lvl1>

<lvl2>
<a>0</a>
<b> 111</b> 
</lvl2>

</rootnode> 
```

xml解析代码如下

```
public class accountlist
        {
            public string lvl1 { get; set; }
            public List<string> b { get; set; }                
        } 

List<accountlist> questions = (from c in xmlDoc.Descendants("rootnode")
                                           select new accountlist
                                        {
                                            lvl1 = c.Element("rootnode").Value,
                                            b = (from q in c.Descendants("lvl2").Elements("b").Elements("a") where q.Element("a").Value == "0"
                                                             select q.Value).ToList(),
                                        }).ToList(); 
```

我的输出应该是这样的

```
lvl1 = AIT
b = 111 
```

请帮我......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-28T09:02:39.413

尝试以下查询。

```
 var doc = XElement.Parse(@"<rootnode><lvl1>AIT</lvl1><lvl2><a>0</a><b> 111</b> </lvl2></rootnode>");

    var questions = from c in doc.DescendantsAndSelf("rootnode")
                    select new accountlist
                               {
                                   lvl1 = c.Element("lvl1").Value,
                                    b = (from q in c.Descendants("lvl2") where q.Element("a").Value == "0"
                                                     select q.Element("b").Value).ToList()
                               }; 
```

看起来您将在结果集中获得 b 列表，如果您需要 lvl1 和 b 的简单值，那么

```
 var question2 = from c in doc.DescendantsAndSelf("rootnode")
                            select new
                            {
                                lvl1 = c.Element("lvl1").Value,
                                b =  c.Descendants("lvl2").Elements("b").FirstOrDefault().Value
                            }; 
```

# regex - 正则表达式匹配没有给定前缀的特定字符串

> ID：10781561
> 
> 赞同：71
> 
> 时间：2012-05-28T08:29:55.353
> 
> 标签：regex

我需要匹配所有包含值且没有给定前缀的行。

示例：我想要包含`word`没有前缀的所有行`prefix`

所以：

```
foobar -> no match
prefix word -> no match
prefix word suffix -> no match
word -> MATCH
something word -> MATCH 
```

到目前为止我已经尝试过：

```
(?!prefix)word 
```

似乎没有做我想做的事

* * *

## 回答 #1

> 赞同：109
> 
> 时间：2012-05-28T08:32:04.283

你可能需要

```
(?<!prefix )word 
```

（也许会照顾好空间）。

`(?!)`是一个消极的前瞻，但在你的情况下，你需要一个消极的后瞻（即`(?<!)`）。

# android - 设置操作栏的下拉菜单不可见

> ID：10781562
> 
> 赞同：2
> 
> 时间：2012-05-28T08:30:07.943
> 
> 标签：android, android-layout, android-intent, android-emulator, android-actionbar

我在我的应用程序中使用 Android 原生操作栏。我通过以下方式创建了操作栏的下拉菜单：

```
@Override
public boolean onCreateOptionsMenu(Menu menu) {
    MenuInflater inflater = getMenuInflater();
    inflater.inflate(R.menu.actionbar_menu, menu);      
    return true;
} 
```

对于某些页面，我想**隐藏**操作栏下拉菜单。如何做到这一点？似乎没有直接的方法可以将此下拉菜单的可见性设置为 false ...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-28T09:16:03.537

通过将操作栏下拉菜单中的每个菜单项设置为不可见，我自己设法解决了这个问题：

```
@Override
public boolean onCreateOptionsMenu(Menu menu) {
    MenuInflater inflater = getMenuInflater();
    inflater.inflate(R.menu.actionbar_menu, menu); 

    menu.getItem(2).setVisible(false);
    menu.getItem(3).setVisible(false);     

    return true;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-28T08:34:12.953

您应该在创建活动时尝试更改操作栏的导航模式...

```
actionbar.setNavigationMode(ActionBar.NAVIGATION_MODE_STANDARD); 
```

# c# - UrlReferrer 到底是什么意思？

> ID：10781563
> 
> 赞同：7
> 
> 时间：2012-05-28T08:30:13.147
> 
> 标签：c#, asp.net, request

UrlReferrer( `Request.UrlReferrer`& `Request.UrlReferrer.OriginalString`) 到底是什么意思？
我写了这些代码：

```
 if (Request.UrlReferrer != null)
    {
        User_Info.Add(!string.IsNullOrEmpty(Request.UrlReferrer.OriginalString) ? Request.UrlReferrer.OriginalString : string.Empty);//6:UrlReferrer
    }
    else
    {
        User_Info.Add(string.Empty);
    } 
```

当用户尝试登录管理区域时，我只知道 ReturnUrl 查询字符串。
所以在 web.config 中`<authentication mode="Forms">`
，现在我们有了 UrlReferrer 服务器端代码。
我想收集有关我网站用户的一些信息，例如 User-Agent 、 User-Browser 、 Session-ID 等……
但我真的不知道 UrlReferrer 到底做了什么，它总是为空。 （我认为是因为使用错误）
请你给我一个简单的例子来理解。

感谢关注

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-05-28T08:33:05.640

引用：

> 访问网页时，引​​荐来源网址或引荐页面是上一个网页的 URL，从该网址跟随链接。

有关更多信息，您可以访问[http://en.wikipedia.org/wiki/HTTP_referer](http://en.wikipedia.org/wiki/HTTP_referer)

如果您有人打开浏览器并输入您的站点地址（无需按链接即可到达），则它可能为空

# php - 如何将cookie从html表单设置为php

> ID：10781565
> 
> 赞同：-1
> 
> 时间：2012-05-28T08:30:21.770
> 
> 标签：php, html, cookies

我想在页面加载时读取 cookie，并且我希望能够在用户按下表单上的提交按钮时保存它们。

由于服务器端脚本在 html 加载之前运行，我不知道如何将用户信息从表单发送到`setcookie()`

例如：

```
 <form id="loginForm" name="loginForm" method="post" action="login-exec.php">
          <div><input name="login" type="text" class="textfield" id="login" /></div>
          <div><input name="password" type="password" class="textfield" id="password" /></div>
          <div><input type="checkbox" name="checkbox" value="true" id="checkbox" /> Remember me</td></div>
    </form> 
```

这是用于设置 cookie 的函数：

```
setcookie(name, value, expire, path, domain); 
```

`$value`选中复选框时，如何将表单中的信息放入变量中？我需要检查 html 或 php 中的复选框值吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-28T08:57:32.797

您必须在**login-exec.php**中使用**$_POST**变量来执行此操作，该变量将包含您的表单数据：

```
<?php
if (isset($_POST['checkbox'])) {
    // guessing how to retrieve the other fields is left as an exercise
    // setcookie('name', 'value');
}
?> 
```

但是，正如其他人所说，您真的应该阅读一些有关如何制作安全的记住我系统的文章（或询问 SO！）。

# c++ - 在 Visual Studio 上编译 FFTW 需要帮助

> ID：10781566
> 
> 赞同：-1
> 
> 时间：2012-05-28T08:30:25.767
> 
> 标签：c++, fftw

我需要在带有 C++ 的 Visual Studio 2008 上使用 FFTW。我是编程新手，我需要关于如何编译它以及如何创建 .lib 文件以与我的程序一起使用的说明。谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-28T08:36:35.150

只需按照说明进行操作

[http://www.fftw.org/install/windows.html](http://www.fftw.org/install/windows.html)

然后，如果您有具体问题，请在此处提问。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-28T08:33:59.673

[http://www.fftw.org/fftw3_doc/Installation-on-non_002dUnix-systems.html#Installation-on-non_002dUnix-systems](http://www.fftw.org/fftw3_doc/Installation-on-non_002dUnix-systems.html#Installation-on-non_002dUnix-systems)

# java - 如何设置自定义主体类

> ID：10781570
> 
> 赞同：1
> 
> 时间：2012-05-28T08:30:34.760
> 
> 标签：java, jboss6.x, jaas

我正在尝试在 JBoss 6.1 Final 中使用自定义主体类。从[JBoss 文档](http://docs.jboss.org/jbosssecurity/docs/6.0/security_guide/html/Login_Modules.html)看来，我必须添加该行

```
 <principalClass="es.caib.gesma.browseldap.LdapPrincipal"/> 
```

进入 login-config.xml 文件，但不清楚具体在哪里。我在我的应用程序策略定义中尝试了几个位置，但它总是会导致抛出异常。

我尝试过的地方（一次一个）是：

```
<application-policy name="GesManPolicy">
                                          <----- Here
  <authentication>
                                          <----- Here
    <login-module code="es.caib.gesma.browseldap.BrowseLdapLoginModule" flag="required">
                                          <----- And here
    <module-option name="java.naming.factory.initial">com.sun.jndi.ldap.LdapCtxFactory</module-option> 
    ... 
```

我每次得到的例外是

```
10:17:05,359 WARN  [XMLLoginConfigImpl] End loadConfig, failed to load config: vfs:/C:/desarrollo/jboss-6.1.0.Final/server/default/conf/login-config.xml:
org.jboss.security.auth.login.ParseException: Encountered " <ANY> "<?xml "" at line 1, column 1\. Was expecting one of:
<EOF>
<IDENTIFIER> ...
at org.jboss.security.auth.login.SunConfigParser.generateParseException(SunConfigParser.java:415) [:3.0.0.CR2]
at org.jboss.security.auth.login.SunConfigParser.jj_consume_token(SunConfigParser.java:352) [:3.0.0.CR2]
at org.jboss.security.auth.login.SunConfigParser.config(SunConfigParser.java:99) 
.... 
```

知道我应该在哪里/如何设置自定义主体吗？

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-08T12:34:35.147

最后，JBoss 文档是错误的。使用`module-option`模块的 （*这是否意味着主体不是由容器传递给模块，而是由模块创建的？*）它可以工作。

```
<module-option name="principalClass">es.caib.gesma.browseldap.LdapPrincipal</module-option> 
```

如果你正在检查这个，下一个麻烦你将得到带有这个对象（而不是 SimplePrincipal 副本）的 JBoss 容器。为此，您的模块必须将您的主体对象添加到 中`RolesSets`，如下所示：

```
protected Group[] getRoleSets() throws LoginException {
  SimpleGroup callerPrincipal = new SimpleGroup("CallerPrincipal");
  callerPrincipal.addMember(this.getIdentity()); <--- YOUR PRINCIPAL OBJECT
  Group[] roleSets = { userRoles , callerPrincipal };
  return roleSets;
} 
```

# c# - 确定 WebBrowser 是否使用插件来显示文件而不是下载

> ID：10781573
> 
> 赞同：1
> 
> 时间：2012-05-28T08:30:51.547
> 
> 标签：c#, webbrowser-control

在 WebBrowser 中可以看到一些文件（pdf、kml 等）。在某些浏览器上，有一个 activeX 插件来处理这些文件，而在其他浏览器上，文件正在被下载。

有没有办法强制下载文件？

我正在使用经典的 WebBrowser 控件和 Watin。

# hibernate - 无法使用休眠从表中删除数据

> ID：10781575
> 
> 赞同：0
> 
> 时间：2012-05-28T08:30:59.840
> 
> 标签：hibernate

我在网上试过很多方法，但都不行。我想使用休眠从数据库中删除数据，但出现此错误严重：无法删除或更新父行：外键约束失败（`sakila`. `comanda`, CONSTRAINT `comanda_ibfk_1`FOREIGN KEY ( `IDPRODUS`) REFERENCES `produs`( `IDPRODUS`)) 严重：无法同步数据库状态与会话

comanda 表示订单，produs 表示产品

这是代码：

```
 private void StergeButtonActionPerformed(java.awt.event.ActionEvent evt) {
    try{
        org.hibernate.Transaction tx = session.beginTransaction();

        int idprodus = ((Produs)IdProdusComboBox.getSelectedItem()).getIdprodus();
        Produs produs = (Produs) session.get(Produs.class, idprodus);

        session.delete(produs);

        tx.commit();
    }catch(Exception e){
        System.out.println(e.getMessage());
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-28T08:48:53.037

这只是意味着删除产品是不可能的，因为它会破坏数据库中的外键约束。您有产品订单，但您正尝试删除该产品。你将如何遵守命令？你必须决定：

*   要么在删除产品之前删除引用产品的订单
*   或者您将订单保留在数据库中，但这些订单不得再引用该产品。

不执行上述任何操作都会使数据库处于不一致的状态：不存在的产品订单。数据库中的外键约束确保了这种不一致的状态是不可能的。

# php - 分支如何进行通知？

> ID：10781577
> 
> 赞同：4
> 
> 时间：2012-05-28T08:31:22.617
> 
> 标签：php, javascript, facebook-graph-api

昨天 BranchOut 在顶部栏中通知我有朋友加入了这个应用程序，并询问我是否想接收来自 Branchout 的通知。

如果我理解得很好，有两种通知： - 用户到用户：显示在顶部栏中 - 应用程序到用户：显示在应用程序左栏中

所以，我的问题是……有人知道他们是怎么做到的吗？

谢谢！

![打印屏幕](../Images/4f013a341386dfeb32689bda2e4e9d7c.png)

这正是 BranchOut 向我展示的信息

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-28T10:27:09.840

这可能是以下两个原因之一：

BranchOut 可以使用 Facebook 的独家通知功能。

Facebook 正在推广 Friends 最近安装的应用程序。在这种情况下，因为朋友安装了 BranchOut 应用程序。

# performance - MongoDB 性能。嵌入式文档搜索速度

> ID：10781578
> 
> 赞同：1
> 
> 时间：2012-05-28T08:31:33.043
> 
> 标签：performance, node.js, mongodb

我在徘徊是什么让 MongoDB 更快。有一些父文档，里面有大量的嵌入文档，或者有很多父文档，里面有很少的嵌入文档。

这个问题只涉及查询速度。我不关心重复信息的数量，除非你告诉我它会影响搜索速度。（不知道MongoDb会不会自动索引Id）

例子：

拥有以下实体，每个实体只有一个 Id 字段：

*   班级（8个不同的班级）
*   学生（100个不同的学生）

为了将学生与班级联系起来，如果我能充分利用 MongoDB 的速度：

*   将所有学生存储在数组中，在他们参加的课程中
*   在每个学生的内部，我都保存了他们参加的课程的数组。

这个例子只是一个例子。真实情况将涉及数千份文件。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-28T08:54:41.903

> 我将在给定班级中搜索特定学生。

如果是这样，您应该有一个 Student 集合，其中一个字段设置为类（只是类 id 可能比嵌入和复制的类文档更好）。

否则，您将无法正确查询学生：

```
db.students.find ({ class: 'Math101', gender: 'f' , age: 22 }) 
```

将按预期工作，而将学生存储在他们参加的课程中

```
{ _id: 'Math101', student: [
     { name: 'Jim', age: 22 } , { name: 'Mary', age: 23 }
  ] } 
```

有（除了重复）查询的问题

```
db.classes.find ( { _id: 'Math101', 'student.gender': 'f', 'student.age': 22 }) 
```

将为您提供*所有*学生的数学课，只要其中至少有一名女学生和至少一名 22 岁的学生（可能是男性）。

您只能获取主要文档的列表，它将包含*所有*未过滤的嵌入文档，[另请参阅此相关问题](https://stackoverflow.com/questions/2138454/filtering-embedded-documents-in-mongodb)。

> 我不知道 MongoDb 是否自动索引 Id

唯一的自动索引是`_id`“主”文档的主键。嵌入文档的任何`_id`字段都不会自动索引，但您可以手动创建这样的索引。

# c# - 尝试在 Visual Studio 中将 javascript 中的插入值调用到 sql server 时出现内部服务器错误 500

> ID：10781579
> 
> 赞同：1
> 
> 时间：2012-05-28T08:31:35.893
> 
> 标签：c#, javascript, jquery, ajax, json

我在 javascript 中有一个代码，它在 c-sharp 中调用了一个 webmethod，下面给出了 javascript 代码和 web 方法

javascript代码：

```
var _data = {

            '_mStart': document.getElementById("St_Period").value,
            '_mEnd': document.getElementById("En_Period").value
        };

                  $.ajax({
                      type: "POST",
                      url: "maps.aspx/myFunc",
                      data: _data,
                      contentType: "application/json; charset=utf-8",
                      dataType: "json",
                      success: function(msg) {
                        alert("success!")
          }

        }); 
```

网页方式：

```
 [WebMethod]
    public static void myFunc(DateTime? _mStart, DateTime? _mEnd)
    {

        try
        {

            SqlConnection con=new SqlConnection("server=SWAPPS_LAP\\SQLEXPRESS;Initial Catalog=moogle;Integrated Security=True;MultipleActiveresultSets=true");
            SqlCommand cmd = new SqlCommand();
            con.Open();
            cmd = new SqlCommand("insert into MEDIA_BOOKING(ST_PERIOD,END_PERIOD,ENTERED_BY,ENTERED_ON) values(@st,@end,@by,@on)", con);
            cmd.Parameters.AddWithValue("@st", _mStart);
            cmd.Parameters.AddWithValue("@end", _mEnd);

            cmd.Parameters.AddWithValue("@on", DateTime.Now);
            cmd.ExecuteNonQuery();
            con.Close();
        }
        catch (Exception ex)
        {
            throw ex;
        }
    } 
```

但是当我运行代码时，我得到一个错误

```
POST http://localhost:50060/moogle/maps.aspx/myFunc 500 (Internal Server Error) jquery.js:8102
jQuery.ajaxTransport.send jquery.js:8102
jQuery.extend.ajax jquery.js:7580
savebook maps.aspx:398
onclick 
```

我有一种预感，也许参数有问题，也许它们的格式不正确？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-28T08:34:27.127

您没有为`@by`参数提供值。尝试在 catch 语句中添加断点以查看错误是什么。如果您没有到达那个阶段，请尝试发布请求正文，以便人们可以看到请求是什么，并以更多的细节来回答。

# html - HTML/DOM：颜色/bgColor；16 种 HTML 颜色以外的值会给出（不可）预测的结果吗？

> ID：10781583
> 
> 赞同：0
> 
> 时间：2012-05-28T08:32:01.320
> 
> 标签：html, dom, background-color

在浏览器中运行此代码，如果未输入颜色，则呈现“绿色”（未定义）。

随机/垃圾值导致黑色背景...
...不选择或透明给出白色（空）

```
<HTML>
<HEAD>
<TITLE>Document Object Demo</TITLE>
</HEAD>
<BODY>
<SCRIPT LANGUAGE=Javascript>
var sAnswer = window.prompt("Please enter your favourite color : choose from the following Yellow, Green, Red, Blue, Pink, Orange, Black, Gray")
document.bgColor = sAnswer
document. write ("<H1>Welcome " + sAnswer + ":-)!!</H1><HR>We are very happy to demonstrate the usage of <I> document. write</I>. Do remember to view the source!<P>")
</SCRIPT>
</BODY>
</HTML> 
```

我用IE9...！

为什么会这样？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-28T08:51:24.093

您遇到此问题是因为浏览器将尝试解析您将 bgColor 设置为...

现在你的 Javascript 相当有问题，我想不出你想要这样做的原因，但你的代码应该看起来更像这样。

```
(function () {
    // Prompts the user to give an answer, this prevents further code execution
    var sAnswer = window.prompt("Please enter your favourite color : choose from the following Yellow, Green, Red, Blue, Pink, Orange, Black, Gray");

    // Takes care of all falsy valuyes, 0, null, undefined, false
    // Ideally some more validation on the input should be done
    if(sAnswer) {
        document.body.style.backgroundColor = sAnswer;
        document.write ("<h1>Welcome " + sAnswer + ":-)!!</h1><hr><p>We are very happy to demonstrate the usage of <i> document. write</i>. Do remember to view the source!</p>");
    } else {
        document.write ("<p>You did not fill in a valid answer! Refresh.</p>");
    }
}()); 
```

或者继续问这个问题，直到给出一个有效的答案..（相当邪恶的imo）

```
(function () {
    var sAnswer;

    do {
        sAnswer = window.prompt("Please enter your favourite color : choose from the following Yellow, Green, Red, Blue, Pink, Orange, Black, Gray")
    } while ( !sAnswer );

    document.body.style.backgroundColor = sAnswer;
    document.write ("<h1>Welcome " + sAnswer + ":-)!!</h1><hr><p>We are very happy to demonstrate the usage of <i> document. write</i>. Do remember to view the source!</p>");

}()); 
```

代码未经测试但相当有信心它应该可以工作：p

**编辑，它是如何变成绿色的？**

简而言之，`undefined`被类型转换为可用于设置`bgColor`属性的字符串，该属性又被解析并解释为颜色，从而使无效的十六进制字符计入`0`. [阅读此内容以获得更深入的解释](http://scrappy-do.blogspot.com/2004/08/little-rant-about-microsoft-internet.html)。

Internet Explorer 使用了这种解释，其他浏览器也使用了这种解释，以免破坏向后兼容性。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-28T08:38:50.220

没有诸如默认颜色之类的东西。在不同的浏览器中有不同的默认 css 样式（请参阅[浏览器的默认 CSS 样式表](https://stackoverflow.com/questions/32875/browsers-default-css)）。

对于您的代码，您很可能应该检查用户提供的答案 set 是否有意义`bgColor`。

此外，此属性已被弃用：[https](https://developer.mozilla.org/en/DOM/document.bgColor) ://developer.mozilla.org/en/DOM/document.bgColor 。

您可能应该通过以下方式设置背景：`document.body.style.backgroundColor`.

# facebook - 用户不能再喜欢我的应用了

> ID：10781587
> 
> 赞同：1
> 
> 时间：2012-05-28T08:32:27.547
> 
> 标签：facebook, button, facebook-likebox

我的画布页面中有一个类似框，直到本月它一直运行良好。它决定不再工作。

截屏：
![](../Images/419a5cefdb1f7b0cdaf63237be4fa419.png)

这是我使用的一段代码：

```
<fb:like-box href="https://www.facebook.com/apps/application.php?id=129443657150865" width="260" show_faces="false" border_color="" stream="false" header="true"></fb:like-box> 
```

而且flash游戏会得到用户是否按下like。但是现在，它什么都没有了，甚至连点赞按钮都不会出现。这个月刚刚发生了什么？

编辑：同时，我用游戏页面中的按钮替换了“赞”按钮。这不是我想要的，但总比没有好。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-28T10:25:30.463

由于 Facebook 删除了所有应用粉丝页面，因此“赞”按钮不适用于您的应用简介页面。`Advanced`相反，您必须从您的应用设置选项卡中创建一个新的粉丝页面（查找`App Page`带有`Create Facebook Page`按钮的设置）。

见：http: [//developers.facebook.com/blog/post/611/](http://developers.facebook.com/blog/post/611/)

# pdf - 正确地将pdf转换为ps，反之亦然

> ID：10781588
> 
> 赞同：5
> 
> 时间：2012-05-28T08:32:35.040
> 
> 标签：pdf, ghostscript, postscript, file-conversion

我正在使用“pdftops”将 .pdf 文件转换为 .ps 文件，然后使用“ps2pdf”进行反向过程（poppler-utils）。问题是从 .ps 文件创建 .pdf 文件时，文本看起来不错，但是当我尝试复制它时，字符非常奇怪（就像它们已损坏）。我在其他文件上使用了这些工具很长时间，效果很好。我也试过“pdftohtml -xml”来创建一个.xml文件，文本没问题（字符提取正确）。

1.  转换可能有什么问题？也许如果我使用“pdftops”和“ps2pdf”，是否有一些需要更改的选项？
2.  如果我创建 .xml 输出，有没有办法从 .xml 文件创建 .pdf 文件？

编辑：“pdffonts original.pdf”的输出 ![pdffonts_output_originalpdf](../Images/64250a1a3da17479cfdc1748518fdd81.png)

“roundtripped.pdf”的输出 ![pdffonts_output_roundtrippedpdf](../Images/ed316e190231b4aceecaf5c3f5e02a48.png)

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-28T13:16:53.893

我只是介绍 PS->PDF 转换...（我假设您*的反之亦然*的短语并不意味着指向同一个文件的*“往返”*转换 [PDF->PS- >PDF]，但*任何*PS 文件的一般转换方向。对吗？）

首先，很可能您`ps2pdf`只是一个 shellscript，它在内部使用带有一些默认参数的 Ghostscript 命令来完成实际工作。`ps2pdf`更容易使用。Ghostscript 有更多的选择，但它更难学习。 `ps2pdf`如果您使用 Ghostscript，它会带走很多潜在的控制权。（您可以使用 -- 调整一些参数，`ps2pdf`但是您已经非常接近运行真正的 Ghostscript 命令了......）

其次，如果不确切知道你的 PS 输入文件的条件如何，很难给你好的建议：*你的 PS 是否嵌入了它使用的字体？它们是哪种字体？等等*

第三，Ghostscript 获得了很多额外的功能和控制，并且在过去几年中消除了一些在输出 PDF 方面的错误或弱点。那么，*您系统上安装的 Ghostscript 版本是什么？*（请记住，调用 Ghostscript，如果没有本地安装的可执行文件`ps2pdf`，它将无法工作。）`gs`

您无法从 PDF 复制文本的一个可能原因可能是最终使用并嵌入到您的 PDF 文件中的字体类型（和编码）。*您可以告诉我们有关您生成的 PDF 的哪些字体详细信息？* （尝试`pdffonts your.pdf`找出 - *pdffonts*也是您提到的 Poppler 实用程序的一部分。）

您可以尝试使用此（完整）Ghostscript 命令进行 PS->PDF 转换并检查它会将您带到哪里：

```
gs \
  -o output.pdf \
  -sDEVICE=pdfwrite \
  -dPDFSETTINGS=/prepress \
  -dHaveTrueTypes=true \
  -dEmbedAllFonts=true \
  -dSubsetFonts=false \
  -c ".setpdfwrite <</NeverEmbed [ ]>> setdistillerparams" \
  -f input.ps 
```

# jquery - 访问 jquery 对象的 TagName

> ID：10781593
> 
> 赞同：4
> 
> 时间：2012-05-28T08:32:59.833
> 
> 标签：jquery, tagname

我想知道 jquery 对象的 tagName ，我试过：

```
 var obj = $("<div></div>");
   alert($(obj).attr("tagName")); 
```

这个警报告诉我`undefined`。我在做什么错？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-05-28T08:34:51.540

`tagName`是底层 DOM 元素的属性，而不是属性，因此您可以使用[`prop`](http://api.jquery.com/prop)jQuery 访问/修改属性的方法：

```
alert($(obj).prop('tagName')); 
```

Better, however, is to directly access the DOM property:

```
alert(obj[0].tagName); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-28T08:34:00.010

您需要访问底层 DOM 节点，因为 jQuery 对象没有`tagName`属性，`tagName`也不是属性，也不是属性：

```
var obj = $("<div></div>");
alert(obj[0].tagName); 
```

请注意，我还在第二行删除了对 jQuery 的调用，因为`obj`它已经是一个 jQuery 对象。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-28T08:34:01.313

`tagName`是一个原生 DOM 元素属性，它不是 jQuery 本身的一部分。考虑到这一点，使用`$()[0]`jQuery 选择器获取 DOM 元素，如下所示：

```
var obj = $("<div></div>");
alert(obj[0].tagName); 
```

[**示例小提琴**](http://jsfiddle.net/RoryMcCrossan/Hd5Jn/1)

# sql-server - 如何使用 MSSQL 在存储过程中加入多个选择？

> ID：10781595
> 
> 赞同：1
> 
> 时间：2012-05-28T08:33:04.550
> 
> 标签：sql-server, tsql, stored-procedures, join

我有一个包含动态生成表的数据库。我正在编写一个存储过程来对生成的表执行查询，我需要在查询分析器工具（或类似工具）中查看结果。

我目前拥有的是：

```
DECLARE @TableName sysname

DECLARE TableNameCursor CURSOR FOR
SELECT TableName FROM [xxxTables] WHERE xxx...

OPEN TableNameCursor
FETCH NEXT FROM TableNameCursor INTO @TableName

WHILE @@FETCH_STATUS = 0
BEGIN
    DECLARE @Query nvarchar
    SET @Query = 'SELECT * FROM ' + @TableName
    EXEC sp_executesql @Query

    -- This is executed as long as the previous fetch succeeds.
    FETCH NEXT FROM TableNameCursor INTO @TableName
END 
```

但由于我有多个选择，我没有得到输出。如何修复存储过程以显示结果？

所有的桌子都有相同的布局，所以我可以加入它们。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-28T09:46:57.860

除非这只是在此处发布脚本时产生的错字，否则我可能终于找到了问题所在。您尚未指定`@Query`变量的最大长度：

```
DECLARE @Query nvarchar 
```

在这种情况下，最大长度默认为`1`，根据[手册](http://msdn.microsoft.com/en-us/library/ms186939.aspx "nchar 和 nvarchar (Transact-SQL)")：

> 在**数据定义或变量声明语句中***`n`*未指定时，默认长度为 1 。未使用 CAST 函数指定时，默认长度为 30 。***`n`***

 **当您将查询字符串分配给 时`@Query`，它只存储第一个字符。自然，当您稍后尝试执行查询时，它不会返回任何内容，而是会产生错误。

您可以通过指定最大长度来修复它。在 SQL Server 2005 或更高版本中，它可以是显式数字（最多 4000）或`max`：

```
DECLARE @Query nvarchar(max) 
```

在早期版本`max`中不支持，因此只需使用明确的数字：

```
DECLARE @Query nvarchar(4000) 
```**

# .net - 使用 SQL 在 .NET WinForms 应用程序上更改日期格式的最简单方法是什么？

> ID：10781597
> 
> 赞同：1
> 
> 时间：2012-05-28T08:33:07.147
> 
> 标签：.net, sql, winforms, date

我们在 .NET 中开发了一个大型 winforms 应用程序，客户要求以不同的日期格式查看信息。

我们遇到的问题是，如果我们将本地区域设置设置为客户端的日期格式，SQL 代码会到处乱跑，因为传递给 SQL 的日期不再是 SQL 所期望的格式。

有没有办法解决这个问题，而不必像这样到处更改我的代码？MySqlProvider.SaveLoginDate(theDate.ToString("dd/MM/yyyy");

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-28T08:46:38.933

最好在代码的用户界面部分处理日期格式和日期解析，以便`DateTime`在与数据库通信时处理值。在格式化和解析日期时指定文化或格式字符串。

此外，如果您的用户位于不同的时区，将日期存储为 UTC 也是一个好主意。使用`ToLocalTime`and`ToUniversalTime`在 UTC 和本地时区之间进行转换。

# javascript - 语法错误：Javascript 中出现意外标记/将数据发布到 amazon s3

> ID：10781598
> 
> 赞同：1
> 
> 时间：2012-05-28T08:33:07.463
> 
> 标签：javascript, syntax, amazon-s3, yui

这是我使用 yui 上传器的一部分：

```
function upload() {
    if (fileID != null) {
        uploader.upload(fileID, "http://url",
        'POST',
        {   AWSAccessKeyId: "keyhere",
            acl: "public-read",
            key: "queue/${filename}",
            policy: "somestring",
            Content-Type: "",
            success_action_redirect: "http://urlhere",
            signature: "sigstring"
        },
        'file');
        fileID = null;
    }
} 
```

“Content-Type”导致语法错误。我可以看到问题。但是**我发布到的 amazon s3 存储桶需要这个变量名**。所以我没有选择用下划线替换减号或使用 CamelCase 概念。

如何提交“Content-Type”作为变量名？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-28T08:36:05.430

使用双引号：

```
 {   AWSAccessKeyId: "keyhere",
        acl: "public-read",
        key: "queue/${filename}",
        policy: "somestring",
        "Content-Type": "",
        success_action_redirect: "http://urlhere",
        signature: "sigstring"
    }, 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-28T08:36:13.530

将密钥放在引号中：

```
 "Content-Type": "", 
```

# postgresql - 创建接受任何类型参数的函数（如 concat）

> ID：10781599
> 
> 赞同：1
> 
> 时间：2012-05-28T08:33:16.523
> 
> 标签：postgresql, create-function

如何创建接受任何类型参数的函数。

我可以像这样创建函数： `CREATE FUNCTION test(anyelement,anyelement) ...`

但是当我调用它时，我必须提出相同类型的参数：

```
SELECT test(1,2); -- ok 
```

但：

```
SELECT test('lalala',2); -- error 
```

我可以创建一个函数来接受任何类型的参数，然后将它们转换为字符串并用这个字符串做一些事情。

那么，我可以创建看起来像的函数吗`concat(str "any" [, str "any" [, ...] ])`

UPD：更新了第二个示例

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-28T09:20:54.507

有一个简单的替代方案。每种类型都可以转换为`text`. 您可以只创建一个函数：

```
CREATE FUNCTION test(text, text [,text [, ...]]) ... 
```

并称之为：

```
SELECT test('lalala'::text,2::text); 
```

只需将每个参数显式转换为文本即可。

# facebook - 如何允许用户在另一个登录时登录新的 fb 帐户

> ID：10781603
> 
> 赞同：1
> 
> 时间：2012-05-28T08:33:41.803
> 
> 标签：facebook, facebook-graph-api, facebook-login

我正在使用 Facebook api。我想从 facebook 获取用户数据。用户可以一次添加注册多个 Facebook 帐户。

我的问题是：如果用户在 Facebook 帐户中登录一次并想添加另一个帐户。它不会从现有帐户中自动注销。我想从现有的登录页面注销用户并将其重定向到 Facebook 登录页面

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-28T08:41:34.633

使用 javascript api 调用：

```
FB.logout(function(response) {
  alert("user is now logged out");
}); 
```

如果您使用的是 PHP-SDK

```
header("Location: " . $facebook->getLogoutUrl(array('next'=>"http://domain.com/wheretoredirectafterlogout.html"))); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-28T10:20:30.763

您可以调用 FB.logout 函数，然后直接调用 FB.login 函数，例如

```
function logout_and_login() {
  FB.logout(function(response) {
    FB.login( function() {
      // do something
    });
  });
} 
```

然后您可以根据需要将该功能添加到按钮/链接。

# bash - 添加到 tar 存档后删除文件

> ID：10781609
> 
> 赞同：63
> 
> 时间：2012-05-28T08:34:05.727
> 
> 标签：bash, unix, compression, tar

GNU tar 可以将许多文件添加到存档中，并在添加时删除每个文件吗？

当没有足够的磁盘空间来保存整个 tar 存档和原始文件时，这很有用 - 因此不可能在以通常的方式创建存档后简单地手动删除文件。

* * *

## 回答 #1

> 赞同：93
> 
> 时间：2012-05-28T08:50:46.967

对于 GNU tar，使用[选项](https://linux.die.net/man/1/tar) `--remove-files`.

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-11-28T19:45:30.420

我有一个任务 - 存档文件，然后在没有 GNU 选项的情况下将其删除到安装了“tar”的操作系统中。

### 方法：

使用“xargs”

假设我们有一个包含文件的目录。
需要在一周内将所有文件移动到 tar 中并将其删除。
我做了一个存档（arc.tar）并向其中添加了文件。（您可以每次尝试创建新存档）

### 解决方案：

```
find ./ -mtime +7 | xargs -I % sh -c 'tar -rf arc.tar % && rm -f %' 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2019-02-21T14:36:59.523

对于非 GNU tar，您可以使用“-u”循环处理每个文件的文件

```
tar -cf archive.tar afile
for myfile in dir/*.ext
do
    tar -uf archive.tar $myfile && rm $myfile || echo "error tar -uf archive.tar $myfile"
done 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-28T09:03:05.417

我不确定您是否可以在不先解压缩的情况下将文件添加到 bzip2 档案中。然而，这是我刚刚想到的一种解决方案（给你伪算法）：

```
1\. For each [file] in [all small files]
    1.1 compress [file] into [file].bz2
    1.2 (optionally verify the process in some way)
    1.3 delete [file]
2\. For each [bzfile] in [all bzip files from step 1]
    2.1 append to tar (tar rvf compressedfiles.tar [bzfile]
    2.2 (optionally verify the process in some way)
    2.3 delete [bzfile] 
```

现在您应该有一个 tar 文件，其中包含单独的所有文件 bzip2:ed 文件。问题是 bzip2 给单个文件增加了多少开销。这需要测试。

# php - 使用 PHPExcel 编辑上传的 XLSX 文件值

> ID：10781612
> 
> 赞同：1
> 
> 时间：2012-05-28T08:34:25.523
> 
> 标签：php, phpexcel, xlsx

是否可以使用 PHPExcel 编辑上传的 xlsx 文件？我可以使用此功能读取上传的文件：

```
<?php
require_once('Classes/PHPExcel.php');
$objReader = PHPExcel_IOFactory::createReader('Excel2007');
$objReader->setReadDataOnly(true);
$objPHPExcel = $objReader->load("Ataskaita2.xlsx");
$objWorksheet = $objPHPExcel->setActiveSheetIndex(0);
echo '<table border=1>' . "\n";
foreach ($objWorksheet->getRowIterator() as $row) {
  echo '<tr>' . "\n";
  $cellIterator = $row->getCellIterator();
  $cellIterator->setIterateOnlyExistingCells(false); 
  foreach ($cellIterator as $cell) {
    echo '<td>' . $cell->getValue() . '</td>' . "\n";
  }
  echo '</tr>' . "\n";
}
echo '</table>' . "\n";

?> 
```

但我还需要编辑这些单元格有没有办法在文本字段中显示这些单元格并在编辑后将其保存回来？谢谢你的建议！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-28T08:48:11.947

您可以使用 PHPExcel 读取电子表格文件；更改单元格中的值等；并再次保存文件......但它没有为您提供漂亮的 GUI。它是一个库，供您从 PHP 脚本操作电子表格数据，但如果您想与 GUI 前端交互，您的 PHP 脚本必须提供表单文本字段。

就个人而言，我会编写一个自定义 HTML 编写器来生成您已阅读的电子表格作为表单而不是简单的显示来呈现给前端用户，然后在 POST 上执行一个脚本来重新读取文件，并使用用户在表单中所做的任何更改，然后保存。

# ruby-on-rails - 哪个gem用于在rails 3中生成pdf文件

> ID：10781616
> 
> 赞同：4
> 
> 时间：2012-05-28T08:34:50.143
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3, pdf-generation

我想在 rails 3.0.0 中生成 pdf 文件。请告诉我使用哪个 gem 来生成 pdf 文件。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-28T08:46:17.610

你可以使用大虾：[http ://rubygems.org/gems/prawn](http://rubygems.org/gems/prawn)

[你可以在这里](http://railscasts.com/episodes/153-pdfs-with-prawn)看到它是如何完成的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-28T10:00:12.100

[https://github.com/pdfkit/PDFKit](https://github.com/pdfkit/PDFKit)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-28T09:59:31.757

此外，您可以尝试使用[DocRaptor](http://docraptor.com/)，当然不是免费的，但它们很酷。

# jquery - 使用 jQuery 切换宽度

> ID：10781620
> 
> 赞同：13
> 
> 时间：2012-05-28T08:35:14.903
> 
> 标签：jquery

如何用动画切换 div 的宽度？

HTML：

```
<div id="toggle-button"></div>
<div id="toggle"></div>​ 
```

CSS：

```
#toggle{
  height:200px;
  width:200px;
  background:red;
}
#toggle-button{
  height:20px;
  width:20px;
  background:blue;
} 
```

jQuery：

```
$(document).ready( function(){
  $('#toggle-button').click( function() {
    $('#toggle').toggle(function() {
      $('#toggle').animate({width:"200px"});
    }, function() {
      $('#toggle').animate({width:"300px"});
    });
  });
});​ 
```

不起作用的示例：http: [//jsfiddle.net/ZfHZV/1/](http://jsfiddle.net/ZfHZV/1/)

编辑：我的目标是在单击蓝色 div 时更改宽度

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-05-28T08:38:46.363

试试这个：

```
$(document).ready( function(){
    $('#toggle-button').click( function() {
        var toggleWidth = $("#toggle").width() == 300 ? "200px" : "300px";
        $('#toggle').animate({ width: toggleWidth });
    });
}); 
```

[**示例小提琴**](http://jsfiddle.net/RoryMcCrossan/ZfHZV/7/)

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-05-28T08:39:33.620

老兄！你的代码有效，你只是不明白它的作用......

```
 $('#toggle-button').click( function() { // Execute when the toggle button is clicked.
    $('#toggle').toggle(function() {      // Attach toggle function that fire different
                                          // callback when clicked.
      $('#toggle').animate({width:"200px"});
    }, function() {
      $('#toggle').animate({width:"300px"});
    });
  }); 
```

单击蓝色 div，然后单击红色 div 几次，看看它是如何工作的。

请注意，您最好附加切换点击回调，`one`而不是`click`避免多次点击回调：

```
 $('#toggle-button').one('click', function() {
    $('#toggle').toggle(function() {
        $('#toggle').animate({width:"200px"});
    }, function() {
        $('#toggle').animate({width:"300px"});
    });
  }); 
```

[**现场演示**](http://jsfiddle.net/ZfHZV/9/)

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-05-28T08:40:05.500

有两个 jQuery 方法称为`toggle`. 一个切换可见性，这在这里不相关。另一个应用点击处理程序，它交替触发函数。这就是你正在使用的。但是，你用错了。

你实际上在做的是等待`#toggle-button`被点击，然后你绑定一个点击处理程序到`#toggle`. 所以动画会`#toggle`在第一次点击后的任何时候出现`#toggle-button`。（多次点击后情况会变得更加复杂`#toggle-button`。

您想`toggle`直接使用`#toggle-button`：

```
$('#toggle-button').toggle(function() { //fired the first time
  $('#toggle').animate({width:"200px"});
}, function() { // fired the second time 
  $('#toggle').animate({width:"300px"});
}); 
```

[工作代码](http://jsfiddle.net/ZfHZV/5/)（注意，因为你从 200px 开始，第一次点击似乎什么都不做）

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2015-12-07T05:52:48.127

试试这个：它适用于所有版本的 Jquery || jQuery 1.10.1 || 到 || jQuery 2.1.4 ||

脚本

```
 <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.10.1/jquery.min.js"></script>
    <script>
            $(document).ready( function(){
            $('#toggle-button').click( function() {
            var toggleWidth = $("#toggle").width() == 800 ? "0px" : "800px";
            $('#toggle').animate({ width: toggleWidth });
            });
            });
    </script> 
```

```
$(document).ready( function(){
    $('#toggle-button').click( function() {
        var toggleWidth = $("#toggle").width() == 800 ? "0px" : "800px";
        $('#toggle').animate({ width: toggleWidth });
    });
});
```

```
#toggle{
    height:200px;
    width:0px;
    background:red;
}
```

```
<script src="https://ajax.googleapis.com/ajax/libs/jquery/2.1.1/jquery.min.js"></script>
<h1>Toggle Width with jQuery</h1>
<input id="toggle-button" type="button" value="Click me!"/>
<div id="toggle"></div>
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2017-08-08T11:08:52.220

使用 JQuery 2.1.1 并使用 CSS 设置宽度和过渡。也适用于百分比宽度、颜色变化等。

```
$('#button-enlarge').on('click', function () {
  $('.box').toggleClass('expanded');
});
```

```
.box.expanded {
  background-color: #e99;
  transition: all .3s;
  width: 100%;
}
.box {
  width: 40%;
  transition: all .3s;
  background-color: #f00;
  color: #fff;
  height: 140px;
}
#button-enlarge { 
 padding: 10px 15px;
 border: 1px solid #999;
 display: inline-block;
}
```

```
<script src="https://ajax.googleapis.com/ajax/libs/jquery/2.1.1/jquery.min.js"></script>
<div id="button-enlarge">Click here</div>
<div class="box">box</div>
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2018-12-18T20:08:51.257

### 类型强制警告

使用`$("#toggle").width() == 800`可能会导致意外的类型强制。

相反，请考虑使用以下内容：

```
var foo = $("#toggle").width();
var bar = foo === 0 ? "100%" : "0"; 
```

**请注意**`===`将 的值`input.width()`与数值基元进行比较的类型和值比较运算符`0`。As`input.width()`求值为原始类型*number*的值，当它等于`0`这个条件时将返回`true`。

使用值比较运算符的做法`==`避开了 JavaScript 类型系统，这有可能导致意外错误。尽管在条件语句中的危险性较小，但仍然存在意外行为的风险。有关类型强制的更多信息，请参阅[本文](https://medium.freecodecamp.org/js-type-coercion-explained-27ba3d9a2839)。

* * *

## 回答 #7

> 赞同：-1
> 
> 时间：2014-12-23T22:57:50.133

`$('#toggle-button').one('click', function() { $('#toggle').animate({ width: 'toggle'}, 1000); });` 这将 0 切换到您定义的宽度

我试过这个并且工作

```
$("#searchIcon").click(function(){
var toggleWidth = "0px";
if($("#searchbox").width() == 118)
{
    toggleWidth="0px";
}
else
{
    toggleWidth="120px";
}
$('#searchbox').animate({ width: toggleWidth }); 
```

});

# php - 查找字符串 beetwen 两个元素

> ID：10781621
> 
> 赞同：-3
> 
> 时间：2012-05-28T08:35:23.373
> 
> 标签：php, string, search

> **可能重复：**
> [如何使用 PHP 解析和处理 HTML？](https://stackoverflow.com/questions/3577641/how-to-parse-and-process-html-with-php)

我得到带有 file_get_content 的页面，我想以任何方式提取页面中的所有链接来做到这一点？或者我可以使用 str 和 start 和 end phares 来获取这样的目标字符串：

```
$str=fdgdfbfbmnlmnjkl njnkhvnbn j<a href="http://www.google.com">google</a>
$link=str($str,"start","END")??????????
EX : $link=str($str,"http://www","com")=Res=>http://www.google.com or google? 
```

或者

```
$str=file_get_content("http://www.google.com");
    $link=str($str,"start","END")??????????
    EX : $link=str($str,"http://www","com")=Res=>http://www.google.com or google? 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-28T08:55:33.777

前段时间我遇到了同样的问题。这个解决方案对我来说效果很好。

```
 $string = "Hello World, <a href='http://www.google.com'>Google</a> ! Search also on <a href='http://www.bing.com'>Bing</a>";

 preg_match_all('#\bhttps?://[^\s()<>]+(?:\([\w\d]+\)|([^[:punct:]\s]|/))#', $string, $match);

 $matches = $match[0];

 foreach($matches as $var)
 {    
     print($var."<br>"); 
 } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-28T08:52:55.860

您应该使用 DOM 方法从 HTML 中提取内容 - 使用正则表达式会[导致疯狂](https://stackoverflow.com/a/1732454/6782)：

```
<?php
    $dom = new DOMDocument;
    $dom->loadHTMLFile('http://www.google.com/');

    $a = $dom->getElementsByTagName('a');
    foreach ($a as $e) {
        echo $e->getAttribute("href") . "\n";
    }
?> 
```

# xml - ActiveSync xml 规则

> ID：10781623
> 
> 赞同：1
> 
> 时间：2012-05-28T08:35:48.080
> 
> 标签：xml, client, activesync

我正在尝试开发一个客户端以使用 Activesync 协议连接到 Microsoft 交换服务器。现在我知道了如何组成 Activesync HTTP 标头以及如何在 xml 和 wbxml 之间传输。但我仍然不知道如何根据 Activesync 命令生成 xml 字符串。这是一个示例：对于 FolderSync 命令，这是为其生成的 xml 字符串：

```
<?xml version="1.0" encoding="utf-8"?> 
<FolderSync xmlns="FolderHierarchy:">
<SyncKey>2</SyncKey>
</FolderSync> 
```

有什么规律？任何人都可以帮忙吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-06T14:28:19.333

这是您需要用于同步的协议序列的一个很好的解释：

[http://msdn.microsoft.com/en-us/library/ee238029%28v=EXCHG.80%29.aspx](http://msdn.microsoft.com/en-us/library/ee238029%28v=EXCHG.80%29.aspx)

另一个，特定于文件夹同步：http: [//msdn.microsoft.com/en-us/library/ee159766%28v=exchg.80%29.aspx](http://msdn.microsoft.com/en-us/library/ee159766%28v=exchg.80%29.aspx)

基本上，您需要按特定顺序发送 Http/WBXML 命令，否则它们将被拒绝。所以首先你需要像这样发送一个 FolderSync 命令：

```
<?xml version="1.0" encoding="utf-8" ?>
<FolderSync xmlns="FolderHierarchy">
    <SyncKey>0</SyncKey>
</FolderSync> 
```

让 Exchange 返回一个好的 SyncKey。然后在下一个 Sync 或 getItemEstimate 命令中解析并使用此 SyncKey。

# javascript - 如何将此脚本的设置保存在 cookie 中并使其依赖于另一个？

> ID：10781628
> 
> 赞同：2
> 
> 时间：2012-05-28T08:36:12.907
> 
> 标签：javascript, jquery, css, cookies

我正在尝试制作一个按钮，一旦点击就可以切换网站背景。当然，设置需要保存在一个 cookie 中，才能坚持下去。

如何组合这两个脚本，以便单击按钮后，它与背景保持切换状态？还是依赖于身体类“点击”？

我找到了一种在 cookie 中切换和保存背景的方法：

```
$(document).ready(function() {
var body_class = $.cookie('body_class');
if(body_class) {
    $('body').attr('class', body_class);
}
$("#switch").click(function() {
    $("body").toggleClass('clicked');
    $.cookie('body_class', $('body').attr('class'));
}); 
```

});

按钮从 switch_on.png 切换到 switch_off.png，如下所示：

```
$(function(){
$(".toggle-swap").click(function() {
if ($(this).attr("class") == "toggle-swap") {
  this.src = this.src.replace("switch_on.png","switch_off.png");
} else {
  this.src = this.src.replace("switch_off.png","switch_on.png");
}
$(this).toggleClass("on");
}); 
```

});

我的按钮：

```
<div id="switch"><a href="#"><img class="toggle-swap" src="../img/switch_on.png" alt=""></a></div> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-28T11:08:01.530

我会将它组合成一个函数，例如：

```
$(function() {
    // Create a variable for the current state
    var body_class;

    // Cache some elements
    var $body = $('body'), $switch = $('.toggle-swap');

    // Define a function that toggles background + button
    var toggleBodyClass = function(event) {
        // Toggle the images
        if (body_class) {
            $switch[0].src = $switch[0].src.replace("switch_off.png","switch_on.png");
            body_class = '';
        } else {
            $switch[0].src = $switch[0].src.replace("switch_on.png","switch_off.png");
            body_class = 'clicked';
        }

        // Toggle some css classes (body + button)
        $body.toggleClass('clicked');
        $switch.toggleClass('on');

        // Update the cookie
        $.cookie('body_class', body_class);

        // Prevent the browsers default behavior
        if (event) event.preventDefault();
    };

    // Set the initial state
    if ($.cookie('body_class')) {
        toggleBodyClass();
    }

    // Bind the event handler
    $switch.click(toggleBodyClass);
}); 
```

# ios - UIWebView 不再显示最后的推文

> ID：10781632
> 
> 赞同：2
> 
> 时间：2012-05-28T08:36:23.367
> 
> 标签：ios, twitter, uiwebview, widget

我使用方法 loadHTMLString 在 UIWebView 中显示推文，而在 html 中我使用 twitter 小部件。代码一直运行良好，直到昨天。现在显示的是白屏，而不是最后的推文。

```
html=@"<script charset=\"utf-8\" src=\"http://widgets.twimg.com/j/2/widget.js\"></script>    <script>    new TWTR.Widget({    version: 2,    type: 'profile',    rpp: 4,    interval: 30000,    width: 250,    height: 300,    theme: {    shell: {    background: '#333333',    color: '#ffffff'    },    tweets: {    background: '#000000',    color: '#ffffff',    links: '#4aed05'    }    },    features: {    scrollbar: false,    loop: false,    live: false,    behavior: 'all'    }    }).render().setUser('chetassofa').start();    </script>";
[self.webView loadHTMLString:html baseURL: nil];
[self.webView setDelegate:self]; 
```

PS 如果我将小部件插入在线 html 编辑器，它会显示推文。[http://htmledit.squarefree.com/](http://htmledit.squarefree.com/)

html代码：

```
<script charset="utf-8" src="http://widgets.twimg.com/j/2/widget.js"></script>
<script>
new TWTR.Widget({
  version: 2,
  type: 'profile',
  rpp: 4,
  interval: 30000,
  width: 250,
  height: 300,
  theme: {
    shell: {
      background: '#333333',
      color: '#ffffff'
    },
    tweets: {
      background: '#000000',
      color: '#ffffff',
      links: '#4aed05'
    }
  },
  features: {
    scrollbar: false,
    loop: false,
    live: false,
    behavior: 'all'
  }
}).render().setUser('user').start();
</script> 
```

# c++ - C++ 将变量传递给 System() WINAPI（无 MFC）

> ID：10781633
> 
> 赞同：1
> 
> 时间：2012-05-28T08:36:25.363
> 
> 标签：c++, variables, formatting, system

这可能是一个显而易见的答案，但我对 C++ 几乎没有经验。我正在尝试将文件的位置传递给系统，以便它运行它。

我使用的代码：

```
 char test[20] = "C:\\";

        system("PAUSE & cd "+test[]+" & ping.text & PAUSE"); 
```

这是行不通的。这就是我在java中做事的方式。我将如何将字符数组测试放入该系统字符串？任何帮助甚至是可能的解决方案的链接都会有很大的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-28T08:44:09.297

原始字符串不能与. 连接`+`。改用`std::string`：

```
std::string test = "C:\\";
std::string command = "PAUSE & cd " + test + " & ping.text & PAUSE";
system(command.c_str()); 
```

请注意，在传递`std::string`to时`system`，您需要调用`c_str()`，因为`system()`需要一个原始字符串。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-28T09:24:03.753

我已经设法使用以下代码解决了这个问题：

```
 char testing[500];  // create char array
        strcpy (testing, "PAUSE & cd "); // copy the string into the char array
        strcat (testing, test); 
        strcat (testing, " & ping.text & PAUSE");
        system(testing); 
```

由于我对 C++ 相对缺乏经验，我不确定这是否是处理事情的“最佳”方式，但它让我的代码正常工作而没有问题。如果有人有任何信息要添加到此解决方案中，我将更新此答案。

# iphone - 调整绘图视图的大小绘制苹果示例

> ID：10781635
> 
> 赞同：0
> 
> 时间：2012-05-28T08:36:27.520
> 
> 标签：iphone, xcode, ipad, uiimageview, drawing

我正在尝试调整绘图应用程序的苹果示例（使用触摸）以使用缩放视图而不是全屏视图，无论我尝试将图像缩放到不同大小时，线条都没有在正确的位置绘制，上我刷我的手指，它画得越低。

例如，如果我尝试在视图的下半部分绘制它可以很好地绘制手指触摸的线，如果我尝试在视图的上半部分绘制它会在我的手指触摸的位置绘制下面的线。

任何人都可以指出我应该改变什么以使代码正常工作？

如果我将下面的代码更改为 1004 而不是 500 一切正常）

我使用的代码是：

```
//CLASS IMPLEMENTATIONS:
- (void)viewDidLoad
{
[super viewDidLoad];
drawImage = [[UIImageView alloc] initWithImage:nil];
drawImage.frame = CGRectMake(0, 350, 768, 500);
drawImage.backgroundColor=[UIColor blackColor];
[self.view addSubview:drawImage];
self.view.backgroundColor = [UIColor lightGrayColor];
mouseMoved = 0;
// Do any additional setup after loading the view from its nib.
}
- (void)touchesBegan:(NSSet *)touches withEvent:(UIEvent *)event {

mouseSwiped = NO;
UITouch *touch = [touches anyObject];

if ([touch tapCount] == 2) {
    drawImage.image = nil;

    return;
}

lastPoint = [touch locationInView:self.view];
lastPoint.y -= 20;

}

- (void)touchesMoved:(NSSet *)touches withEvent:(UIEvent *)event {
mouseSwiped = YES;

UITouch *touch = [touches anyObject];   
CGPoint currentPoint = [touch locationInView:self.view];
currentPoint.y -= 20;

UIGraphicsBeginImageContext(self.view.frame.size);
[drawImage.image drawInRect:CGRectMake(0, 0, self.view.frame.size.width, self.view.frame.size.height)];
CGContextSetLineCap(UIGraphicsGetCurrentContext(), kCGLineCapRound);
CGContextSetLineWidth(UIGraphicsGetCurrentContext(), 5.0);
CGContextSetRGBStrokeColor(UIGraphicsGetCurrentContext(), 1.0, 0.0, 0.0, 1.0);
CGContextBeginPath(UIGraphicsGetCurrentContext());
CGContextMoveToPoint(UIGraphicsGetCurrentContext(), lastPoint.x, lastPoint.y);
CGContextAddLineToPoint(UIGraphicsGetCurrentContext(), currentPoint.x, currentPoint.y);
CGContextStrokePath(UIGraphicsGetCurrentContext());
drawImage.image = UIGraphicsGetImageFromCurrentImageContext();
UIGraphicsEndImageContext();

lastPoint = currentPoint;

mouseMoved++;

if (mouseMoved == 10) {
    mouseMoved = 0;
}

}

- (void)touchesEnded:(NSSet *)touches withEvent:(UIEvent *)event {

UITouch *touch = [touches anyObject];

if ([touch tapCount] == 2) {
    drawImage.image = nil;
    return;
}

if(!mouseSwiped) {
    UIGraphicsBeginImageContext(self.view.frame.size);
    [drawImage.image drawInRect:CGRectMake(0, 350, self.view.frame.size.width, self.view.frame.size.height)];
    CGContextSetLineCap(UIGraphicsGetCurrentContext(), kCGLineCapRound);
    CGContextSetLineWidth(UIGraphicsGetCurrentContext(), 5.0);
    CGContextSetRGBStrokeColor(UIGraphicsGetCurrentContext(), 1.0, 0.0, 0.0, 1.0);
    CGContextMoveToPoint(UIGraphicsGetCurrentContext(), lastPoint.x, lastPoint.y);
    CGContextAddLineToPoint(UIGraphicsGetCurrentContext(), lastPoint.x, lastPoint.y);
    CGContextStrokePath(UIGraphicsGetCurrentContext());
    CGContextFlush(UIGraphicsGetCurrentContext());
    drawImage.image = UIGraphicsGetImageFromCurrentImageContext();
    UIGraphicsEndImageContext();
}
} 
```

# c - 将函数调用为 fun() 和 fun 有什么区别？

> ID：10781636
> 
> 赞同：3
> 
> 时间：2012-05-28T08:36:27.797
> 
> 标签：c, function

我遇到了一段代码，如下所示

`qsort(array, 10, sizeof(int), sort);`

这里 sort 又是一个函数。但我总是觉得任何被调用的函数都应该`()`在函数名之后，或者我错过了什么。

我只是想知道这将如何工作以及调用这些函数有什么区别。谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-28T08:38:58.147

```
qsort(array, 10, sizeof(int), sort); 
```

这传递了一个指向函数“sort”的指针，以便函数“qsort”可以调用这个函数。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-28T08:40:08.640

该函数未被调用，它作为函数指针传递。[请参阅 C 和 C++ 中的函数指针](http://www.cprogramming.com/tutorial/function-pointers.html)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-28T08:39:39.607

您将指向函数的指针传递`sort`给 function `qsort`，以便`qsort`可以将该函数用作比较函数。

正确的语法应该包括一个`&`before `sort`（因为`sort`是一个函数，而不是一个指针，所以我们需要引用它），但是编译器无论如何都会为你“添加”它。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-28T08:44:45.177

如果您查看 C 语法（例如在 C 标准中），您会发现有一个运算符写为`()`，它是**函数调用运算符**。它类似于**数组下标运算符** `[]`，因为它应用于标识符，在这种情况下，是函数的名称。如果函数的标识符后面没有函数调用运算符，则该标识符表示*指向*该函数的指针。所以现在很清楚，`qsort`最后一个参数是：指向比较函数的指针。每当需要比较两个元素时，它都会调用其最后一个 arg 指向的函数。

`sort`您示例中的函数称为**回调**函数，`qsort`将其回调（多次，使用不同的参数）。

# mysql - 使用 LIKE 和 WHERE 子句显示完整表

> ID：10781637
> 
> 赞同：2
> 
> 时间：2012-05-28T08:36:31.343
> 
> 标签：mysql, sql-like

我需要只使用一个查询来选择没有视图的表名范围：

例子：

```
SHOW FULL TABLES LIKE '%table%' WHERE "Table_type"<>'VIEW' 
```

MySQL 不允许在一个查询中使用这两个运算符，它使用`Tables_in_(mydbname)`包含 DB 名称的愚蠢的列名，而不是使用像“Table_name”这样的简单列名。问题是我不知道数据库名称，所以我不能使用以下查询：

```
SHOW FULL TABLES WHERE "Table_type"<>'VIEW' AND "Tables_in_????" LIKE '%table%' 
```

最好使用数字而不是名称，例如：

```
SHOW FULL TABLES WHERE COLUMN(1) LIKE '%table%' AND COLUMN(2) <>'VIEW' 
```

但没有这样的功能。

我不能使用 INFORMATION_SCHEMA 因为对这个表的访问可能会受到托管服务提供商的限制（或者我错了？）而且我的应用程序是为了广泛分发。

你会给我什么建议？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-28T08:38:29.830

查询[`INFORMATION_SCHEMA`](http://dev.mysql.com/doc/refman/5.6/en/information-schema.html)，特别是[`TABLES`](http://dev.mysql.com/doc/refman/5.6/en/tables-table.html)和[`COLUMNS`](http://dev.mysql.com/doc/refman/5.6/en/columns-table.html)表对您来说很有趣。

一个例子：

```
SELECT *
  FROM INFORMATION_SCHEMA.TABLES t
  JOIN INFORMATION_SCHEMA.COLUMNS c
    ON t.TABLE_CATALOG = c.TABLE_CATALOG
   AND t.TABLE_SCHEMA = c.TABLE_SCHEMA
   AND t.TABLE_NAME = c.TABLE_NAME
 WHERE [some field] LIKE '%some_value%'
   AND ... 
```

# povray - 如何仅在 PovRay 中计算法向量到最小二乘平面

> ID：10781639
> 
> 赞同：3
> 
> 时间：2012-05-28T08:36:35.540
> 
> 标签：povray

是否可以仅使用 PovRay 计算由点集定义的平面的法线向量（正确的点集超过 3 个点）？目前我正在使用通过最小二乘平面的雅可比特征值计算的外部程序。

不必将此步骤切换到不同的程序，而只需使用 PovRay 的内部程序，仍然会很好。

克里斯

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-31T09:39:13.050

在这里，我假设平面的位置是已知的，并且您想要计算法线向量。我不回答首先如何计算这架飞机的问题。

(3D) 空间中由三个点（例如 A、B、C）定义的平面的法线向量可以用两个向量 a=AC 和 b=BC 的叉积来计算（在下图中，点 A 和 B将分别位于箭头 a 和 b 的尖端。点 C 位于两个向量的起点）。我还假设这些点不在一条线上。

结果向量垂直于 a 和 b，因此它垂直于给定平面。

要获得长度为 1 的向量，您必须将其除以它的长度。现在问题来了：在 POVRay 中，我假设您在某些变量中有坐标。然后（省略任何#declare 语句）计算法线向量（inices 1、2、3 对应于 x、y、z 方向的分量）：

n1 = a2*b3 - a3*b2；

n2 = a3*b1 - a1*b3；

n3 = a1*b2 - a2*b1；

向量 n 的长度 L 为 L=sqrt(n1*n1 + n2*n2 + n3*n3)。现在你将每个分量除以 L，你就有了单位长度的法线向量。

法向量的方向取决于三个点在平面上的排列方式。逆时针表示法向量从平面向上（或向外），反之亦然。我用它来检查一个表面是否可见（即它的法向量指向相机所在的点或远离相机的点）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-07-10T20:41:19.590

下面是 povray 格式的 Jacobi 算法。我希望，这对某人有用。例如，在由 5 个点 Pts[0..4] 定义的最小二乘平面中绘制一个环。点的坐标需要在第 3 行初始化。当然，如果计数不是 5，则需要在第 2 行更改变量 NoPts。

```
#declare ooo=<0,0,0>;
#declare NoPts=5; 
#declare Pts=array[NoPts]{p1,p2,p3,p4,p5}

// compute centroid              
#declare Centroid=ooo;
#declare i = 0;
#while(i < NoPts )
  #declare Centroid = Centroid+Pts[i];
  #declare i = i + 1;
#end
#declare Centroid = Centroid / NoPts;

// Move points to centroid
#declare nPts=array[NoPts]{ooo,ooo,ooo,ooo,ooo}
#declare i = 0;
#while(i < NoPts )
  #declare nPts[i] = Pts[i] -  Centroid;
  #declare i = i + 1;
#end                   

#declare SM=array[3][3]{ {0,0,0}, {0,0,0}, {0,0,0} } // 2nd momentum matrix for coordinates moved to the centroid
#declare EV=array[3][3]{ {1,0,0}, {0,1,0}, {0,0,1} } // eigen vectors 

#declare i = 0;
#while(i < NoPts )
  #declare SM[0][0] = nPts[i].x  * nPts[i].x  + SM[0][0];
  #declare SM[0][1] = nPts[i].x  * nPts[i].y  + SM[0][1];
  #declare SM[0][2] = nPts[i].x  * nPts[i].z  + SM[0][2];
  #declare SM[1][1] = nPts[i].y  * nPts[i].y  + SM[1][1];
  #declare SM[1][2] = nPts[i].y  * nPts[i].z  + SM[1][2];
  #declare SM[2][2] = nPts[i].z  * nPts[i].z  + SM[2][2];
  #declare i = i + 1;
#end                   
#declare SM[1][0] = SM[0][1];
#declare SM[2][0] = SM[0][2];
#declare SM[2][1] = SM[1][2];

// =============== JACOBI rotation                               

#declare tol = 0.00000001; // tolerance
#declare iterMax = 8;
#declare summ = 0; // control sum

#declare l = 0;            //  ----------- sanity check 
#while(l < 3 )
  #declare m = 0;
  #while(m < 3 )
      #declare summ = summ + abs(SM[l][m]);   
      #declare m = m + 1;     
  #end    
  #declare l = l + 1;     
#end

#if (summ < 0.00005)
  #debug concat("=============== STH WRONG \n")       
#end 

#declare j=0;
#while(j < iterMax)
   #declare ssum = 0;
   #declare amax = 0;
   #declare row=1;
   #while(row < 3)     // ------- loop over rows
     #declare col=0;
     #while(col < row)     // ------- loop over columns
              #declare atmp = abs(SM[row][col]);    
              #if(atmp > amax)
                #declare amax = atmp;
              #end
              #declare ssum = ssum + atmp;
              #if(atmp < amax * 0.1)
                 #declare col = 5; 
              //#end 
              #else
                 #if(abs(ssum / summ) > tol )       //   --- only for "huge" elements ;-)
                    #declare th = atan(2 * SM[row][col] / (SM[col][col] - SM[row][row])) / 2;
                    #declare sin_th = sin(th);
                    #declare cos_th = cos(th); 
                    #declare k=0;
                    #while(k < 3)
                      #declare tmp2 = SM[k][col];                        
                      #declare SM[k][col] =  cos_th * tmp2 + sin_th * SM[k][row];
                      #declare SM[k][row] = -sin_th * tmp2 + cos_th * SM[k][row];
                      #declare tmp2 = EV[k][col];
                      #declare EV[k][col] =  cos_th * tmp2 + sin_th * EV[k][row];
                      #declare EV[k][row] = -sin_th * tmp2 + cos_th * EV[k][row];
                      #declare k = k + 1;
                    #end   
                    #declare SM[col][col] =  cos_th * SM[col][col] + sin_th * SM[row][col];
                    #declare SM[row][row] = -sin_th * SM[col][row] + cos_th * SM[row][row];
                    #declare SM[col][row] = 0;
                    #declare k=0;
                    #while(k < 3)
                      #declare SM[col][k] = SM[k][col];
                      #declare SM[row][k] = SM[k][row];
                      #declare k = k + 1;
                    #end  
                 #end  // end of loop for huge elements
              #end
        #declare col = col + 1; 
     #end // end col
     #declare row = row + 1; 
  #end  //end row
  #declare j = j + 1;  // ' ------- next iteration if not bigger than iterMAX   
#end                                     
// =============== end JACOBI

// find EV with the smallest eigenvalue
#declare EVmin = 10000; 
#declare k=0;
#while (k < 3)
  #if(SM[k][k] < EVmin)
    #declare EVmin = SM[k][k];
    #declare EVindex = k;
  #end
  #declare k=k+1;
#end   

// TEST - draw the ring   

#declare ringRadius=1;
#declare    w = < EV[0][EVindex], EV[1][EVindex], EV[2][EVindex] >;      
object{ 
      torus { ringRadius*.75, Dash_Radius texture { Bond_Texture  } }
      Reorient_Trans(<0, 1, 0>,w)
      translate Centroid
      } 
```

# tomcat - 用 asm 动态生成字节

> ID：10781640
> 
> 赞同：1
> 
> 时间：2012-05-28T08:36:43.333
> 
> 标签：tomcat, jvm, classloader, bytecode

我使用 asm 来实现代理模式。
例如：
原来的类是test.service.Service

```
public class ProxyFactory{
    public static Object generateProxy(Class<?> argument){
        //do generate use asm. 
        //generate a proxyClass that extends argument
        //and override the sayHello() method
        //and than invoke System.out.println("anything") before we call super.sayHello()
        Class<?> class = proxyClass;
        return class.newInstance();
    }
}

public class Service implements IService{
    @Override
    public List<String> sayHello(){
        List<String> list = new ArrayList<String>();
        list.add("stackoverflow user");
        return list;
    }
}

public class Action extends ActionSupport{

     private IService service = ProxyFactory.generateProxy(Service.class);

} 
```

当我请求此操作时，将是一个例外：

java.lang.reflect.InvocationTargetException
at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
... at java.lang.Thread.run(Thread.java:619)
原因：java.lang.NoClassDefFoundError: test.service。 Service
at java.lang.ClassLoader.defineClass1(Native Method)
...
... 40 更多
原因：java.lang.ClassNotFoundException: test.service.Service
at java.net.URLClassLoader$1.run(URLClassLoader.java:200 )
在 java.security.AccessController.doPrivileged(Native Method)
...
在 java.lang.ClassLoader.loadClass(ClassLoader.java:252)
在 java.lang.ClassLoader.loadClassInternal(ClassLoader.java:320)
... 43更多的

这似乎是 tomcat 类加载器的问题，因为如果我将其作为应用程序运行，上述所有代码都可以工作，有人能帮我解决它吗？
感谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-29T01:11:11.370

自己解决，实际上，正如我所料，问题是由类加载器引起的。
这是在代码之前：

```
byte[] b = class byte code...
ClassLoder loader = ClassLoader.getSystemClassLoader();
Class<?> cls = Class.forName("java.lang.ClassLoader");
java.lang.reflect.Method method = cls.getDeclaredMethod(
                "defineClass", new Class[] { String.class, byte[].class,
                        int.class, int.class });
method.setAccessible(true);
Object[] args = new Object[] { sc.getName(), b, new Integer(0),
                    new Integer(b.length) };
clazz = (Class<?>) method.invoke(loader, args); 
```

现在我使用 Thread.currentThread().getContextClassLoader() 代替
ClassLoader.getSystemClassLoader();

这意味着我们可以使用 tomcat 类加载器来定义我们的类，这样就可以找到我们的 Web
应用程序类“test.service.Service”

# c# - 如何确定我在列表中引用的子类？

> ID：10781641
> 
> 赞同：2
> 
> 时间：2012-05-28T08:36:47.347
> 
> 标签：c#, oop, abstraction

我有一个大约 100 个对象的列表，这些对象恰好是瓷砖。它看起来像这样：

```
 List<Tile> Tiles; 
```

在我的代码的其他地方，我有派生自 tile 基类的类，我将在此示例中使用 house：

```
 public class house : Tile 
```

在顶部列表中，我向数据结构添加了不同类型的图块：

```
 Tiles.add(new house());
 Tiles.add(new church()); //ect. ect. 
```

我的问题是，如果我通过像 for 循环这样的控制结构在哪里引用该列表，我怎么知道哪些瓷砖是教堂或房屋。基本上我需要比较两个不同类型的瓷砖。甚至有可能知道我引用的是哪个子类吗？我确信对此有一个简单的解释，但是在面向对象编程方面我不是很精通，所以我什至不完全确定在寻求帮助时我应该寻找什么。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-28T08:40:37.110

这里有多种选择

*   您可以使用`is`/`as`检查特定对象以查看它是否属于特定类型
*   您可以添加一个鉴别器 - 可能是一个枚举属性，例如`.TileType`（比较：Expression.NodeType）
*   你可以改为使用一种`virtual`方法，这样你就**不需要**知道类型是什么：你只需说“做你的类型在这里做的任何事情”（即调用虚拟方法）

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-28T08:39:22.013

您可以使用“is”运算符 - “Tiles[index] is house”

但总的来说，这是一件坏事——**你打破了 oop 原则**

你应该怎么做才能在派生类上实现方法，这样他们就会知道如何自己做逻辑，你就不必使用“is”运算符。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-28T08:39:50.163

好吧，你可以这样做：

```
foreach (var house in Tiles.OfType<house>()) { .. 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-28T08:38:55.330

```
foreach (Tile tile in Tiles)
{
    if (tile is house)
    {
        // do things
    }
} 
```

您可以使用上面的 is 关键字。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-28T08:40:17.153

用于`Object.GetType()`获取当前实例的类型。

[参考 MSDN 链接](http://msdn.microsoft.com/en-us/library/system.object.gettype.aspx)

# javascript - 用于机器人的 Eclipse 中登录页面的脚本

> ID：10781642
> 
> 赞同：1
> 
> 时间：2012-05-28T08:36:51.810
> 
> 标签：javascript

你能告诉我如何使用robotium工具在eclipse中为android应用程序编写登录页面脚本吗？

# c# - c# xna编程spritebatch错误

> ID：10781652
> 
> 赞同：1
> 
> 时间：2012-05-28T08:37:27.393
> 
> 标签：c#, visual-studio-2010, xna, xna-4.0

```
using System;
using System.Collections.Generic;
using System.Linq;
using Microsoft.Xna.Framework;
using Microsoft.Xna.Framework.Audio;
using Microsoft.Xna.Framework.Content;
using Microsoft.Xna.Framework.GamerServices;
using Microsoft.Xna.Framework.Graphics;
using Microsoft.Xna.Framework.Input;
using Microsoft.Xna.Framework.Media;

namespace Project
{
    /// <summary>
    /// This is the main type for your game
    /// </summary>
    public class Game1 : Microsoft.Xna.Framework.Game
    {
        GraphicsDeviceManager graphics;
       SpriteBatch spriteBatch;
        Texture2D myTexture;
        Rectangle myRectangle;

        public Game1()
        {
            graphics = new GraphicsDeviceManager(this);
            Content.RootDirectory = "Content";
        }

        /// <summary>
        /// Allows the game to perform any initialization it needs to before starting to run.
        /// This is where it can query for any required services and load any non-graphic
        /// related content.  Calling base.Initialize will enumerate through any components
        /// and initialize them as well.
        /// </summary>
        protected override void Initialize()
        {
            // TODO: Add your initialization logic here

            base.Initialize();
        }

        /// <summary>
        /// LoadContent will be called once per game and is the place to load
        /// all of your content.
        /// </summary>
        protected override void LoadContent()

        {

            // Create a new SpriteBatch, which can be used to draw textures.
            //spriteBatch = new SpriteBatch(GraphicsDevice);

            Texture myTexture = Content.Load<Texture2D>("character");

            myRectangle = new Rectangle(10, 100, 30, 50);
            // TODO: use this.Content to load your game content here
        }

        /// <summary>
        /// UnloadContent will be called once per game and is the place to unload
        /// all content.
        /// </summary>
        protected override void UnloadContent()
        {
            // TODO: Unload any non ContentManager content here
        }

        /// <summary>
        /// Allows the game to run logic such as updating the world,
        /// checking for collisions, gathering input, and playing audio.
        /// </summary>
        /// <param name="gameTime">Provides a snapshot of timing values.</param>
        protected override void Update(GameTime gameTime)
        {
            // Allows the game to exit
            if (GamePad.GetState(PlayerIndex.One).Buttons.Back == ButtonState.Pressed)
                this.Exit();

            // TODO: Add your update logic here

            base.Update(gameTime);
        }

        /// <summary>
        /// This is called when the game should draw itself.
        /// </summary>
        /// <param name="gameTime">Provides a snapshot of timing values.</param>
        protected override void Draw(GameTime gameTime)
        {
            GraphicsDevice.Clear(Color.Black);

            // TODO: Add your drawing code here
            spriteBatch.Begin();

            spriteBatch.Draw(myTexture,myRectangle,Color.White);

            spriteBatch.End();

            base.Draw(gameTime);
        }
    }
} 
```

NullReferenceExcerption 在此代码中未处理，调试将开始，但会收到这样的错误消息

你调用的对象是空的。哪个点`spriteBatch.begin()` ，它包含很多链接等

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-28T08:45:35.987

您已将此行注释掉，这导致您的 spriteBatch 永远不会被初始化。

```
//spriteBatch = new SpriteBatch(GraphicsDevice); 
```

# forms - 发送表单时听写“发件人”电子邮件地址

> ID：10781653
> 
> 赞同：1
> 
> 时间：2012-05-28T08:37:29.770
> 
> 标签：forms

我在下面有一个表格，其中包含必填字段，并在用户填写时通过电子邮件发送给公司。问题是发件人电子邮件地址显示为我们的服务器名称，有没有办法规定发件人地址是什么？

这些是控制数据的字段：

```
$to = the_field('email_address');
$subject = "UKHG contact enquiry";
$companyname_field = $_POST['companyname'];
$fullname_field = $_POST['fullname'];
$email_field = $_POST['email'];
$tel_field = $_POST['tel'];
$enquiry_field = $_POST['enquiry']; 
```

这是完整的表格：

```
<div id="contactform">
<script language="JavaScript">
<!--

/***********************************************
* Required field(s) validation v1.10- By NavSurf
* Visit Nav Surf at http://navsurf.com
* Visit http://www.dynamicdrive.com/ for full source code
***********************************************/

function formCheck(formobj){
    // Enter name of mandatory fields
    var fieldRequired = Array("fullname", "email", "tel", "enquiry");
    // Enter field description to appear in the dialog box
    var fieldDescription = Array("Name", "Email", "Telephone", "Enquiry");
    // dialog message
    var alertMsg = "Please complete the following fields:\n";

    var l_Msg = alertMsg.length;

    for (var i = 0; i < fieldRequired.length; i++){
        var obj = formobj.elements[fieldRequired[i]];
        if (obj){
            switch(obj.type){
            case "select-one":
                if (obj.selectedIndex == 0 || obj.options[obj.selectedIndex].text == ""){
                    alertMsg += " - " + fieldDescription[i] + "\n";
                }
                break;
            case "select-multiple":
                if (obj.selectedIndex == -1){
                    alertMsg += " - " + fieldDescription[i] + "\n";
                }
                break;
            case "text":
            case "textarea":
                if (obj.value == "" || obj.value == null){
                    alertMsg += " - " + fieldDescription[i] + "\n";
                }
                break;
            default:
            }
            if (obj.type == undefined){
                var blnchecked = false;
                for (var j = 0; j < obj.length; j++){
                    if (obj[j].checked){
                        blnchecked = true;
                    }
                }
                if (!blnchecked){
                    alertMsg += " - " + fieldDescription[i] + "\n";
                }
            }
        }
    }

    if (alertMsg.length == l_Msg){
        return true;
    }else{
        alert(alertMsg);
        return false;
    }
}
// -->
</script>
<form class="form" onsubmit="return formCheck(this);" method="POST" action="<?php the_permalink(); ?>">
    <table border="0" style="float:left;">
        <tbody>
            <tr>
                <td>
                <p>Company Name:</p>
                </td>
                <td>&nbsp;</td>
                <td><input type="text" name="companyname" id="companyname" /></td>
            </tr>
            <tr>
                <td>
                <p>Your Name<span style="color:red;">*</span>:</p>
                </td>
                <td>&nbsp;</td>
                <td><input type="text" name="fullname" id="fullname" /></td>
            </tr>
            <tr>
                <td>
                <p>E-mail<span style="color:red;">*</span>:</p>
                </td>
                <td>&nbsp;</td>
                <td><input type="text" name="email" id="email" /></td>
                <td colspan="2">&nbsp;</td>
            </tr>
            <tr>
                <td>
                <p>Telephone<span style="color:red;">*</span>:</p>
                </td>
                <td>&nbsp;</td>
                <td><input type="text" name="tel" id="tel" /></td>
                <td colspan="2">&nbsp;</td>
            </tr>
            <tr>
                <td valign="top">
                <p>Enquiry<span style="color:red;">*</span>:</p>
                </td>
                <td>&nbsp;</td>
                <td><textarea name="enquiry"></textarea></td>
                <td colspan="2">&nbsp;</td>
            </tr>
            <tr>
                <td colspan="4">
                    <button class="blue medium awesome awesomeforward" type="submit" name="submit">Send message</button>               
                </td>
            </tr>            
        </tbody>
    </table>

<? if(isset($_POST['submit'])) { 

$to = the_field('email_address');
$subject = "UKHG contact enquiry";
$companyname_field = $_POST['companyname'];
$fullname_field = $_POST['fullname'];
$email_field = $_POST['email'];
$tel_field = $_POST['tel'];
$enquiry_field = $_POST['enquiry'];

$body = "Hello,\n\n You have an enquiry from the website, please see the details below:\n\n Name: $fullname_field\n Company Name: $companyname_field\n E-Mail: $email_field\n Tel: $tel_field\n Message:\n $enquiry_field\n\n Please reply to the enquiry asap.\n\n Kind Regards \n";

mail($to, $subject, $body);

echo "</br>Thank you for getting in touch, we will contact you shortly.";

} ?>
</form>
</div> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-28T08:45:18.657

您可以通过传入一个额外的标头在 PHP 邮件命令中设置它：

```
$header = 'From: email@domain.com';
mail($to, $subject, $body, $header); 
```

# android - Android - 每个应用程序的 IP 流量统计

> ID：10781655
> 
> 赞同：1
> 
> 时间：2012-05-28T08:37:35.383
> 
> 标签：android

是否可以访问 Android 上运行的每个应用程序生成的实时 IP 流量统计信息？

如果做不到这一点，是否有运行在可以收集这些信息的设备上的透明代理软件之类的东西？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-28T11:00:41.643

> 是否可以通过运行在 Android 上的每个应用程序访问实时 IP 流量统计生成器？

在较新的 Android 设备上，您可以从`TrafficStats`.

# linux - 使用安装在远程服务器上的系统上的 OpenCV - ubuntu

> ID：10781659
> 
> 赞同：-2
> 
> 时间：2012-05-28T08:37:51.127
> 
> 标签：linux, ubuntu, opencv, ubuntu-11.10, remote-server

我问了一个类似的问题，但我没有从那个问题中得到太多。

我正在尝试在远程服务器上编译 C++ 代码。我需要 OpenCV 库，但它没有安装在服务器上。有没有办法使用我自己系统上安装的库来编译我的代码？

我使用的是 Ubuntu 11.10，服务器也是基于 Linux 的。

谢谢你

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-28T12:03:14.920

您可能需要在程序中包含 OpenCV 的静态库。请参阅有关如何执行此操作的问题：[如何使用静态库编译 OpenCV 应用程序](https://stackoverflow.com/questions/9141817/how-to-compile-opencv-application-with-static-libraries)

# c++ - C++：当你有指针时，为什么需要引用？

> ID：10781661
> 
> 赞同：27
> 
> 时间：2012-05-28T08:38:02.943
> 
> 标签：c++, pointers, reference

> **可能重复：**
> [C++：何时使用引用与指针](https://stackoverflow.com/questions/7058339/c-when-to-use-references-vs-pointers)
> [运算符重载是否可以在没有引用的情况下工作？](https://stackoverflow.com/questions/8007832/could-operator-overloading-have-worked-without-references)

我忍不住了，但这个基本问题一直在我脑海中浮现：为什么 C++ 有引用，而你也可以使用指针呢？

我知道在某些情况下，它们*会*稍微安全一些，而且通常它们会使代码更漂亮，但从技术上讲没有区别，对吧？那么在任何情况下我无法使用指针并且必须使用引用吗？
我想看看何时使用引用是不可避免的*具体*例子。

**免责声明：**
我在 StackOverflow 上没有找到任何答案，这*不是*关于语法差异的问题。我想知道为什么 C++ 语言首先引入了引用。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-05-28T08:44:50.463

*   单独使用指针你不能正确地`pass-by-reference`或`return-by-reference`.
*   有些方法需要参考。您将如何实现复制构造函数？
*   有时您需要强制使用别名。你不能用指针来做到这一点——它们可以被改变。引用不能绑定到不同的东西。因此，当您初始化一个引用时，您保证它将在其范围内引用同一个对象。
*   安全问题
*   ( `const`) 引用可以绑定到临时对象。要创建一个临时指针，您需要在传递给它的方法中释放它。但你无法判断它是暂时的还是不在里面。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-05-28T08:44:40.073

运算符重载。使用“通过引用传递”的指针会给你不可接受的语法。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-05-28T08:54:28.977

如果你有一个指针作为参数，你必须检查它是否为 NULL。对于参考文献，您必须进行检查。这就是为什么这个人自己在 C++ 中引用的原因 - [http://www.stroustrup.com/bs_faq2.html#pointers-and-references](http://www.stroustrup.com/bs_faq2.html#pointers-and-references)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-28T08:48:15.130

```
class A{
public:
    A(int i){}
};

void foo(const A& a){};
void foo2(const A* pa){};
int main (void)
{
  foo(1);
  foo2(1); //invalid
  return (0);
} 
```

我知道的一种情况。用户不需要管理引用对象，编译器可以销毁它。由于指针要求用户明确删除它。对于 foo2，很难管理临时生命周期。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-28T08:46:39.840

例子：

```
my_type *get_some_data();
...
my_type *data = get_some_data(); 
```

允许做`delete data`而

```
my_type &get_some_data();
...
my_type &data = get_some_data(); 
```

无法删除。

# linux - 是否有任何脚本/工具可以从 apache 访问日志文件中测量 tps？

> ID：10781662
> 
> 赞同：1
> 
> 时间：2012-05-28T08:38:12.060
> 
> 标签：linux, apache

我发现的大多数工具都基于 Apache 访问日志文件来测量流量或其他用户统计信息。是否有脚本或工具可以根据此文件测量 tps（每秒事务数）或 hps（每秒点击数）。每分钟测量相同的值是可以接受的。

谢谢，阿林

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-28T17:53:19.317

试试 awstats，我过去用过它，它非常有用。我不记得它是否显示开箱即用的 tps，但它可以定制以满足您的要求。

# php - Yii 框架数据库关系

> ID：10781669
> 
> 赞同：1
> 
> 时间：2012-05-28T08:38:46.217
> 
> 标签：php, activerecord, yii

我在定义类关系时遇到问题。

在此之前，让我向您展示我的数据库结构

```
 Agent table
    id
    username
    password

    Views table
    id
    agent_id
    accessor_id 
```

一个代理可以允许很多代理查看他们的帖子。表格视图包含代理所有者和允许查看其发布的代理的数据。

我对视图模型的关系声明声明如下：

```
/**
 * @return array relational rules.
 */
public function relations() {
    // NOTE: you may need to adjust the relation name and the related
    // class name for the relations automatically generated below.
    return array(
        'agents' => array(self::BELONGS_TO, 'Agent', 'agent_id'),
    );
} 
```

我对代理模型的关系声明声明如下：

```
/**
 * @return array relational rules.
 */
public function relations() {
    // NOTE: you may need to adjust the relation name and the related
    // class name for the relations automatically generated below.
    return array(
        'groups'=>array(self::BELONGS_TO, 'Group', 'group_id'),
        'views' => array(self::BELONGS_TO, 'View', 'agent_id'),
    );
} 
```

当我尝试运行应用程序时收到以下错误。

```
The relation "views" in active record class "Agent" is specified with an invalid foreign key "agent_id". There is no such column in the table "agents". 
```

我该如何解决这个问题？请帮忙。谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-28T09:09:41.067

agent->views 不是`BELONGS_TO`关系。它是`HAS_ONE`或`HAS_MANY`：

```
'views' => array(self::HAS_ONE, 'View', 'agent_id'), 
```

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2012-05-28T09:39:37.863

您应该只需要在视图模型中定义关系...

```
public function relations() {
    // NOTE: you may need to adjust the relation name and the related
    // class name for the relations automatically generated below.
    return array(
        'agents' => array(self::BELONGS_TO, 'Agent', 'agent_id'),
    );
} 
```

并且不需要在代理模型中定义关系..

在控制器端你可以找到这样的记录......

```
$model = View::model()->with('agents')->findAll(); 
```

在这个 $model 你有所有的视图记录和代理..

希望这对你有用..

# asp.net-mvc-3 - 是否可以仅在 ASP.NET MVC 中为经过身份验证的用户启用会话状态？

> ID：10781677
> 
> 赞同：3
> 
> 时间：2012-05-28T08:38:59.137
> 
> 标签：asp.net-mvc-3, session, session-state

MVC3 添加了一个使用`[SessionState(SessionStateBehavior.Disabled)]`属性制作无会话控制器的好机会。这很好但不灵活，因为您不能为每个控制器方法设置会话状态，也不能按条件启用它。

是否可以仅为经过身份验证的用户或通过其他一些自定义条件启用会话状态？即 PHP 有一个很棒的特性。 `if (!isset($_SESSION)) session_start();` 能找到类似的东西就好了

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-28T08:43:39.280

您可以覆盖默认控制器工厂，更具体地说是[GetControllerSessionBehavior](http://msdn.microsoft.com/en-us/library/system.web.mvc.icontrollerfactory.getcontrollersessionbehavior.aspx)方法：

```
public class MyControllerFactory : DefaultControllerFactory
{
    protected override SessionStateBehavior GetControllerSessionBehavior(RequestContext requestContext, Type controllerType)
    {
        if (controllerType == null)
        {
            return SessionStateBehavior.Default;
        }

        if (requestContext.HttpContext.User.Identity.IsAuthenticated)
        {
            // enable session if there's an authenticated user
            return SessionStateBehavior.Required;
        }

        return SessionStateBehavior.Disabled;
    }
} 
```

并`Application_Start`用自定义控制器工厂替换默认控制器工厂：

```
ControllerBuilder.Current.SetControllerFactory(new MyControllerFactory()); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-28T11:42:58.190

如何**禁用每个控制器方法的会话状态**。即使对于这样的流程，它也能正常工作：

1.  启用会话的请求方法
2.  禁用会话的请求方法
3.  启用会话的请求方法 - 保留值（我不明白为什么，但确实如此）

    ```
     /// <summary>
      /// Enable session if there's an authenticated user or method in controller is marked with <see cref="SessionAttribute" /> or controller class is marked within <see cref="SessionAttribute" /> or <see cref="SessionStateAttribute" />
      /// </summary>
      public class AuthSessionControllerFactory : DefaultControllerFactory
      {

        protected override SessionStateBehavior GetControllerSessionBehavior(RequestContext requestContext, Type controllerType)
        {
          if ( controllerType == null ) return SessionStateBehavior.Default;

          return requestContext.HttpContext.User.Identity.IsAuthenticated
            ? SessionStateBehavior.Required
            : GetDefaultSessionBehavior( requestContext, controllerType );
        }

     private static readonly ConcurrentDictionary<string, SessionStateBehavior> _sessionStateCache = new ConcurrentDictionary<string, SessionStateBehavior>();
     protected SessionStateBehavior GetDefaultSessionBehavior(RequestContext requestContext, Type controllerType)
     {
      if ( !requestContext.RouteData.Values.Keys.Contains( "action" ) ) return SessionStateBehavior.Required;
      var act = requestContext.RouteData.Values["action"].ToString();

      return _sessionStateCache.GetOrAdd( controllerType + act,
        (type => {
          var typeCopy = controllerType;

          //get current action
          var methods = typeCopy.GetMethods().Where( m => m.Name == act ).ToArray();
          foreach (var method in methods) {

            //look for SessionAttribute on the method
            var attr = Attribute.GetCustomAttribute( method, typeof( SessionAttribute ), false );
            if ( attr != null ) return (( SessionAttribute )attr).Behavior;

            //support default SessionState behavior
            var controllerattr = typeCopy.GetCustomAttributes( typeof( SessionStateAttribute ), true )
              .OfType<SessionStateAttribute>().FirstOrDefault();
            if ( controllerattr == null ) 
            {
              var controllerattrCustom = typeCopy.GetCustomAttributes( typeof( SessionAttribute ), true )
                .OfType<SessionAttribute>().FirstOrDefault();
              if ( controllerattrCustom != null ) return controllerattrCustom.Behavior;
            } else
              return controllerattr.Behavior;
          }
          return SessionStateBehavior.Disabled;

        }) );
    } 
    ```

    }

`Application_Start()`在 Global.asax的方法中注册它

```
ControllerBuilder.Current.SetControllerFactory( new AuthUserSessionControllerFactory() ); 
```

这是一个 SessionAttribute 类 - 它看起来像 MS 的 SessionStateAttribute - 唯一的区别是方法允许使用这个

```
[AttributeUsage( AttributeTargets.Class | AttributeTargets.Method, AllowMultiple = false, Inherited = true )]
  public sealed class SessionAttribute : Attribute
  {

    public SessionAttribute(SessionStateBehavior behavior)
    {
      Behavior = behavior;
    }

    public SessionStateBehavior Behavior { get; private set; }
  } 
```

# javascript - jquery mobile ajax跳转到另一个页面但css不起作用

> ID：10781678
> 
> 赞同：0
> 
> 时间：2012-05-28T08:39:10.650
> 
> 标签：javascript, jquery-mobile

这是一个示例页面A跳转页面B，页面B有自己的css引用，当页面A到B时，

css 不生效，例如：

 ``/* page A start */

```
<head>
    <link rel="stylesheet" href="jquery.mobile.css" />
    <script src="jquery.mobile.js"></script>
</head>
<body>
    <div data-role="page">
       <a  href="B.html" data-role="button" data-theme="a">this is A</a>
    </div>
</body> 
```

/* page A end */

/* page B start */

```
<head>
    <link rel="stylesheet" href="jquery.mobile.css" />
    <script src="jquery.mobile.js"></script>
    <style>
        a{
            color : red !important;
         }
        #a{
           height : 100px;
           width : 100px;
            color : red;
         }
    </style>
</head>
<body>
    <div data-role="page" >
      <a  href="A.html" data-role="button" data-theme="a">this is B</a>
      <div id="a">bbb</div>
    </div>
</body> 
```

/* page B end */`  `当 A 用 ajax 跳转到 B 时，颜色不会改变 'div' 没有设置高度和宽度，所以我

find 把''标签放在'div' data-role="page" 里面有效果，但是还有其他的吗

解决办法解决吗？也使用 ajax 和样式放在 B 页面中

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-28T09:35:42.360

将样式标签放在正文部分。

```
<body>
<style>
    a{
        color : red !important;
     }
    #a{
       height : 100px;
       width : 100px;
        color : red;
     }
</style>
</body> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-28T20:22:08.453

当 JQM 通过 ajax 加载第二个页面时，它会忽略该`<head>`部分中的所有内容。这包括脚本和 css。最好的解决方案是创建您自己的外部 css 文件，该文件包含在每个页面中。您可能在想，如果它忽略了里面的所有内容，我为什么要这样做`<head>`。好吧，这是为了以防有人重新加载页面或通过链接（电子邮件或社交网站）进入该页面。当你这样做时，你需要更具体地使用你的 CSS。IE

```
#page2 a{
    color : red !important;
}
#page2 #a{
   height : 100px;
   width : 100px;
   color : red;
} 
`````

# c# - 我的目录更改后谁是谁

> ID：10781684
> 
> 赞同：1
> 
> 时间：2012-05-28T08:39:41.760
> 
> 标签：c#

我想知道是否有任何方法可以让我记录谁访问过我的文件并对文件服务器中的文件进行了任何更改的信息？此应用程序仅供本地使用，我必须使用 C#Express，因为我买不起专业版或终极版。C# Express 根本没有启用 WCF 的功能。但我不会做任何与 Web 服务相关的事情。谢谢你的想法。

# javascript - CSS、Javascript 和 HTML 的集成

> ID：10781685
> 
> 赞同：1
> 
> 时间：2012-05-28T08:39:44.963
> 
> 标签：javascript, html, css

我对网页设计的想法完全为零。

如果你去[http://caroufredsel.frebsite.nl/examples/carousel-lightbox-tooltip.php](http://caroufredsel.frebsite.nl/examples/carousel-lightbox-tooltip.php)你会发现CSS、JavaScript和HTML代码已经分开提到了。我如何整合它们？CSS 和 JavaScript 应该放在 head 标签内吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-28T08:45:51.760

你需要有类似的东西

```
<link rel="stylesheet" href="css/style.css">
<script src="js/script.js"></script> 
```

在 .html 文件的头部内。

如果您可以将 JavaScript 不是放在头部，而是放在 body 标记的末尾，那就更好了。

这意味着你有

*   .html 文件
*   一个名为 css 的文件夹，其中包含一个 style.css 文件，您在其中拥有...当然是所有 CSS
*   一个名为 js 的文件夹，其中包含一个 script.js 文件，其中有您的 JavaScript 代码

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-28T08:49:06.837

是的，您是正确的，它们可以集成到**Head Section**中。

例如：

```
<style type="text/css">

    /* Place the contents of the file.css here */

</style>

<script type="text/javascript">

    // Place the contents of the file.js here.

</script> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-28T08:51:50.627

如果有必要，您可以将所有代码放在一个文件中。

以非常简化的方式：

```
<html>
    <head>
        <script>/*javascript goes here*/</script>
        <style>/*css goes here*/</style>
    </head>
    <body>/*content goes here*/</body>
</html> 
```

# c++ - Qt - 将 qreal 转换为 double

> ID：10781689
> 
> 赞同：4
> 
> 时间：2012-05-28T08:40:08.063
> 
> 标签：c++, qt, double

我正在使用 Ubuntu 11.10、Qt 4、Qwt 6.0.1

问题是，通常一切正常，来自 Qwt 的示例编译没有任何问题，但是当我尝试从 QPointF.x 转换为 double 时出现错误。有趣的是（在 x86 上）qreal 应该是对 double 的重新定义......

这是不起作用的（

```
QPointF pt;
pt.setX(1.0);
pt.setY(2.0);
double px=pt.x; 
```

编译器返回错误：

```
error: argument of type ‘qreal (QPointF::)()const {aka double (QPointF::)()const}’ does not match ‘double’ 
```

我在做傻事吗？

简而言之：

我需要将其转换为在继承自 QwtSeriesData 的类中使用，以在点之间进行自定义插值（在这种情况下，它不会是简单的线性插值）。为此我需要方法

```
double y(double x) const 
```

这将返回给定 x 的函数值

当我简化它以使用它编译的 QwtSeriesData 时。为此，只需实施

```
QPointF sample(size_t i) const
size_t size() const 
```

但正如我所说，我需要自定义插值，所以实现从 QwtSyntheticPointData 继承的接口似乎是最好的选择。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-05-28T08:43:33.460

QPointF 是一个类（不是结构），[`QPointF::x()`](http://qt-project.org/doc/qt-4.8/qpointf.html#x)是一个方法，而不是公共成员。尝试：

```
double px = pt.x(); 
```

# c++ - 如何解压缩已经在 C 中加载到内存中的 zip 文件？

> ID：10781693
> 
> 赞同：3
> 
> 时间：2012-05-28T08:40:24.337
> 
> 标签：c++, c, zip, unzip

我正在编写一个服务器，它从客户端接收一个 zip 文件，然后解压缩该文件。当我收到 zip 文件时，我将其存储到内存中。

我找到并尝试了一些库来压缩一个 zip 文件，比如 zlib 和 minizip，但是它们都解压了一个存在于磁盘上的文件，而不是来自内存。

我不想暂时将文件保存到磁盘中并提取它，它效率不高。

如何从内存中解压文件？我在 Windows 上编写 C 和 C++。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-28T09:14:58.550

看看[libarchive](http://libarchive.github.com/) 它支持 zip 格式。

在内存中提取档案的示例：

```
struct archive *a = archive_read_new();
archive_read_support_compression_gzip(a);
archive_read_support_format_tar(a);
r = archive_read_open_memory(a, buff, sizeof(buff)); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-28T08:45:55.143

zlib 支持内存中的 inflate() 和 deflate() 函数。[你可以从这里](http://www.zlib.net/manual.html)阅读如何

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2018-03-29T02:48:28.643

libzip（基于 zlib）具有从内存打开存档的功能。示例代码[在 github 上](https://github.com/aseprite/libzip/blob/master/examples/in-memory.c)。

```
src = zip_source_buffer_create(data, size, 1, &error)
za = zip_open_from_source(src, 0, &error) 
```

# asp.net-mvc-3 - Razor 视图的指令列表

> ID：10781696
> 
> 赞同：3
> 
> 时间：2012-05-28T08:40:38.503
> 
> 标签：asp.net-mvc-3, razor, directive

```
@using
@model 
```

在 Razor 视图的顶部还可以使用哪些指令？在`.aspx`视图中，我们可以在视图顶部使用数十个指令，并且由于 Razor 是新事物，因此 Internet 上许多关于 ASP.NET MVC 的文章`.aspx`都使用语言进行讨论，其中一些使用指令。例如在[本文](http://www.thegecko.org/index.php/2010/06/pluggable-mvc-2-0-using-mef-and-strongly-typed-views/)中，需要一个`Assembly`指令才能使其工作。我解决了这个问题，但经过一些搜索后，无法在 Razor 视图中找到可能的指令列表及其解释。

这样的清单存在吗？还是我仍然在想着旧的方式并且遗漏了关于 Razor的一些东西，`@using`并且`@model`是我们在 Razor 视图中拥有的唯一指令？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-28T08:48:15.203

```
@inherits MyViewPage<IndexModel> 
```

`MyViewPage`应该来源于`System.Web.Mvc.WebViewPage<TModel>`

# powershell - 使用 PowerShell 转换 Unix 时间

> ID：10781697
> 
> 赞同：15
> 
> 时间：2012-05-28T08:40:59.173
> 
> 标签：powershell, epoch, unix-timestamp

我正在使用 PowerShell [SQLite](http://en.wikipedia.org/wiki/SQLite)模块解析 SQLite 数据库，并创建和修改了几个返回值，这两个值都是 Unix 时间的。

我想做的是以某种方式将其转换为“人类时间”。为了便于阅读，我删除了一些其他 SQL 查询。

```
Import-Module SQLite
mount-sqlite -name GoogleDrive -dataSource E:\Programming\new.db
$cloud_entry = Get-ChildItem GoogleDrive:\cloud_entry

foreach ($entry in $cloud_entry)
{
    $entry.created
} 
```

输出看起来像一大列 Unix 时间戳：

```
1337329458 
```

*更新*：我最终选择了以下内容：

```
$ctime = $entry.created
[datetime]$origin = '1970-01-01 00:00:00'
$origin.AddSeconds($ctime) 
```

* * *

## 回答 #1

> 赞同：30
> 
> 时间：2012-05-28T08:45:27.547

请参阅*[将 Unix 时间戳转换为 .NET DateTime](http://codeclimber.net.nz/archive/2007/07/10/convert-a-unix-timestamp-to-a-.net-datetime.aspx)*。

您可以在 PowerShell 中轻松重现这一点。

```
$origin = New-Object -Type DateTime -ArgumentList 1970, 1, 1, 0, 0, 0, 0
$whatIWant = $origin.AddSeconds($unixTime) 
```

* * *

## 回答 #2

> 赞同：19
> 
> 时间：2014-01-20T13:00:41.940

```
Function Convert-FromUnixDate ($UnixDate) {
   [timezone]::CurrentTimeZone.ToLocalTime(([datetime]'1/1/1970').AddSeconds($UnixDate))
}

$niceTime = Convert-FromUnixDate $ctime

PS C:\> $niceTime

Friday, 18 May 2012 8:24:18 p.m. 
```

* * *

## 回答 #3

> 赞同：12
> 
> 时间：2018-11-06T16:26:49.637

采用：

```
(([System.DateTimeOffset]::FromUnixTimeSeconds($unixTime)).DateTime).ToString("s") 
```

`FromUnixTimeMilliseconds`也可用。

ToString("s"): Sortable: *"模式反映了定义的标准 (ISO 8601)"*

参考：*[标准日期和时间格式字符串，可排序（“s”）格式说明符](https://docs.microsoft.com/en-us/dotnet/standard/base-types/standard-date-and-time-format-strings#Sortable)*

* * *

## 回答 #4

> 赞同：8
> 
> 时间：2016-03-22T11:39:50.797

```
$date = get-date "1/1/1970"
$date.AddSeconds($unixTime).ToLocalTime() 
```

* * *

## 回答 #5

> 赞同：5
> 
> 时间：2018-01-15T14:32:48.860

一个简单的单行：

```
(Get-Date "1970-01-01 00:00:00.000Z") + ([TimeSpan]::FromSeconds($unixTime)) 
```

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2021-08-04T06:19:01.510

没有带来任何新东西，而是 Fredrics 的一个 pipable 版本的回答：

```
function epoch() { 
    Param( 
        [Parameter(ValueFromPipeline)]$epochTime,
        [Switch]$Ms
    ) 
    Process { 
        if ($Ms) {
            [System.DateTimeOffset]::FromUnixTimeMilliseconds($epochTime)
        } else {
            [System.DateTimeOffset]::FromUnixTimeSeconds($epochTime)
        }
    } 
} 
```

```
"1628043561861" | epoch -Ms

DateTime      : 04.08.2021 02:19:21
UtcDateTime   : 04.08.2021 02:19:21
LocalDateTime : 04.08.2021 04:19:21
Date          : 04.08.2021 00:00:00
Day           : 4
DayOfWeek     : Wednesday
DayOfYear     : 216
Hour          : 2
Millisecond   : 861
Minute        : 19
Month         : 8
Offset        : 00:00:00
Second        : 21
Ticks         : 637636403618610000
UtcTicks      : 637636403618610000
TimeOfDay     : 02:19:21.8610000
Year          : 2021 
```

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2012-05-28T09:02:31.417

```
$ctime = $entry.created
[datetime]$origin = '1970-01-01 00:00:00'
$origin.AddSeconds($ctime) 
```

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2020-04-21T11:06:52.093

我想确定我是从 UTC 计算的，所以我添加了`SpecifyKind`：

```
$epochStart = New-Object -Type DateTime -ArgumentList 1970, 1, 1, 0, 0, 0, 0
$epochStart = [DateTime]::SpecifyKind($epochStart,[DateTimeKind]::Utc)

$DateTimeUTC = $epochStart.AddSeconds($UnixTimestamp) 
```

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2021-10-08T13:18:11.610

我发现建议的解决方案都没有解决我的需求。所以我调整并提出以下建议：

```
function ConvertFrom-UnixTime {
    [CmdletBinding(DefaultParameterSetName = "Seconds")]
    param (
        [Parameter(Position = 0, 
            ValueFromPipeline = $true, 
            Mandatory = $true,
            ParameterSetName = "Seconds")]
        [int]
        $Seconds,

        [Parameter(Position = 0, 
            ValueFromPipeline = $true, 
            Mandatory = $true, ParameterSetName = "Miliseconds")]
        [bigint]
        $Miliseconds
    )
    Begin {
        $date = (Get-Date "1970-01-01 00:00:00.000Z")
    }
    Process {
        switch ($PSCmdlet.ParameterSetName) {
            "Miliseconds" {
                $date = $date.AddMilliseconds($Miliseconds)
            }
            Default {
                $date = $date.AddSeconds($Seconds);
            }
        }
    }
    End {
        $date
    }
}
Set-Alias -Name epoch -Value ConvertFrom-UnixTime 
```

用法：

```
1633694244| epoch
1633694244565 | epoch 
```

两个输出：

```
8\. oktober 2021 12:57:24 
```

# excel - 如何将字符串从 Excel 导入 MATLAB？

> ID：10781700
> 
> 赞同：1
> 
> 时间：2012-05-28T08:41:18.503
> 
> 标签：excel, matlab, file-io, import

我想将一行标题从 Excel 导入 matlab，然后将每个标题放入 MATLAB 中相应变量的名称中。如下图所示，我将所有变量导入矩阵'X'，然后我想一一导入表头以重命名所有列。有没有办法做到这一点？ ![在此处输入图像描述](../Images/fc80d9a3e7963375d07f5a5dcec65902.png)

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-28T09:38:28.610

请参阅[xlsread](http://www.mathworks.nl/help/techdoc/ref/xlsread.html)的文档；您必须加载所有数据：

来自 matlab 文档：示例

*从 myExample.xlsx 请求数字数据、文本和未处理（原始）数据的副本：*

```
[ndata, text, alldata] = xlsread('myExample.xlsx')

ndata =
     1     2     3
     4     5   NaN
     7     8     9

text = 
    'First'    'Second'    'Third'
    ''         ''          ''     
    ''         ''          'x'    

alldata = 
    'First'    'Second'    'Third'
    [    1]    [     2]    [    3]
    [    4]    [     5]    'x'    
    [    7]    [     8]    [    9] 
```

如果您知道标题在哪些单元格中，您还可以指定从 excel 文件中读取的范围：

```
[~, headers, ~ ] = xlsread('myExample.xlsx','A1:C1'); 
```

这给出（对于上面使用的示例数据^^）：

```
headers = 
    'First'    'Second'    'Third' 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-28T08:48:26.113

您可以使用工作区 GUI 或`help xlsread`.

您还可以通过首先`a = cell(1)`从命令提示符创建一个空元胞数组，然后双击变量并从 Excel 复制/粘贴到其中（使用“粘贴 Excel 数据”）来复制和粘贴数据。

# java - 随机误差。“javax.servlet.ServletException：java.lang.NoSuchFieldError：deferredExpression”

> ID：10781701
> 
> 赞同：0
> 
> 时间：2012-05-28T08:41:20.553
> 
> 标签：java, hibernate, tomcat, spring-mvc

```
javax.servlet.ServletException: java.lang.NoSuchFieldError: deferredExpression
    org.apache.jasper.servlet.JspServlet.service(JspServlet.java:275)
    javax.servlet.http.HttpServlet.service(HttpServlet.java:717)
    org.springframework.web.servlet.view.InternalResourceView.renderMergedOutputModel(InternalResourceView.java:238)
    org.springframework.web.servlet.view.AbstractView.render(AbstractView.java:250)
    org.springframework.web.servlet.DispatcherServlet.render(DispatcherServlet.java:1063)
    org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:801)
    org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:719)
    org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:644)
    org.springframework.web.servlet.FrameworkServlet.doGet(FrameworkServlet.java:549)
    javax.servlet.http.HttpServlet.service(HttpServlet.java:617)
    javax.servlet.http.HttpServlet.service(HttpServlet.java:717) 
```

**我随机收到此错误**。我随时都会收到此错误，如果我重新启动我的 tomcat，它就会消失！！！！我在本地系统中没有收到此错误，但是当我在 Web 服务器上运行我的项目时收到此错误。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-08-08T09:53:16.710

**deferredExpression** *错误*主要是由于您的应用程序中有不同版本的 jar 重复或相同的 jar。如果您将删除这些冲突，它将不会再次显示

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-29T11:22:27.507

该错误是因为您在类路径中有多个不同版本的 JSTL 库。

您可以删除：

*   标准.jar
*   标准 1.1.2.jar
*   jstl-1.1.2.jar
*   jstl.jar

# linux-kernel - phys_to_virt() 函数在启动屏幕中引入了延迟，从而导致图像闪烁。如何删除这个？

> ID：10781706
> 
> 赞同：1
> 
> 时间：2012-05-28T08:41:51.573
> 
> 标签：linux-kernel, framebuffer

在我的引导加载程序中，我在启动板时显示了一些图像。现在当内核启动开始时，我使用这个地址并执行

```
phys_to_virt(bootloaderfb); 
```

由于这个原因，我在图像中看到了一个小闪烁，然后是目标引导。如何消除这种闪烁？

# crystal-reports - 循环遍历水晶报告中的表格

> ID：10781709
> 
> 赞同：0
> 
> 时间：2012-05-28T08:42:12.180
> 
> 标签：crystal-reports, crystal-reports-xi

我有 2 个链接表要报告： - 第一个保留解决方案并链接到第二个。重要的字段是解决方案、类型、类型 ID - 第二个包含有关类别的信息。要使用的字段是 typeID、type、parentTypeID、treeLvl。parentTypeID 是指结构中更高级别的类型ID。

我需要获得解决方案和类型来重新创建整个树结构。目前，我使用左外连接将第二个表链接到自身 5 次，但想在循环中进行。

我正在考虑这些方面的事情，但需要它起作用：

```
numberVar level := {KBTYPES.TREELVL};
stringVar currentType;
numberVar type;
while level >= 1 do 
(
currentType := {KBTYPES.TYPE} & currentType;
type := {KBTYPES.ParentKBTypeId};
{KBTYPES.KB_TYPEID} := type;
level -1;
);
currentType 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-28T10:13:22.387

我很有信心说你想做的事情是不可能的。类型会改变还是该表相当静态？有很多价值观吗？您可以考虑将键/值对实际带入循环函数中。

你的数据源是什么？您可能有更好的机会在源头实现这一目标（使用存储过程/函数/视图）

我没有测试过，但这是谷歌使用公用表表达式的第一个结果：http: [//mycodingexperience.blogspot.co.uk/2011/04/common-table-expression-cte-and-tree.html](http://mycodingexperience.blogspot.co.uk/2011/04/common-table-expression-cte-and-tree.html)

# testing - 复制较差的 Wi-Fi 进行测试

> ID：10781712
> 
> 赞同：2
> 
> 时间：2012-05-28T08:42:17.953
> 
> 标签：testing, networking, wifi, bandwidth

我想测试一个需要互联网连接的 iPad 应用程序。我想坐在路由器旁边的办公桌上，针对较差的 wifi 连接进行测试。如何复制一个非常差的 wifi 连接？用锡纸包裹路由器？尝试限制路由器连接到互联网的速度？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-30T17:24:46.210

最后，我在 Mac 上使用 Xcode 中的 iOS 模拟器测试了该应用程序，然后使用出色的 Network Link Conditioner 工具（Xcode 附带）根据需要调整我的网络速度。工作了一个款待。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-29T09:15:07.333

进行这些测试的更好方法是使用射频隔离室。

您是否尝试将接入点的功率级别降至最低？

另一方面，如果您想拥有一个糟糕的 Wi-Fi 环境，请在同一频道上从另一个接入点产生大量干扰。

# c# - 根据用户选择获取记录

> ID：10781713
> 
> 赞同：0
> 
> 时间：2012-05-28T08:42:18.500
> 
> 标签：c#, asp.net, sql

我有一个 SQL 数据库，我在 C# 中使用 ASP.net。

我有一个下拉框，它选择的项目数据绑定到数据库中的表。基本上，我需要获取所选记录的 ID。

不太确定最好的方法是什么。我只能考虑使用下拉框显示的 SelectedIndex 属性来选择第 n 行。

ID 是唯一标识符类型。请注意，增量 INT 的 ID 不会使用，因为可能会删除记录。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-28T09:02:22.187

当 DropDown 的 SelectedItem 更改时，您是否指定了将返回哪个字段值？您应该分配字段名称以确保在您选择下拉框中的项目时返回分配的字段值。试试这样的 -

```
cmbList.DataSource = Your Table or DataSet;
cmbList.DataMember = "ColumnName to be displayed in the DropDownList";
cmbList.DataTextField = "ColumnName to be displayed in the DropDownList";
cmbList.DataValueField = "ColumnName to be returned as SelectedValue in the DropDownList";
cmbList.DataBind(); 
```

然后用于`DropDownList.SelectedValue`获取您想要的字段值作为 DropDown 的选择结果。希望这可以帮助。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-28T08:47:10.373

dropdowlist.SelectedValue 将为您提供在 dropdowlist 中选择的项目。dropdowlist.SelectedItem.Text 将为您提供在 dropdowlist 中选择的项目的文本。

```
protected void dropdowlist_SelectedIndexChanged(object sender, EventArgs e)
{
    int ID = dropdowlist.SelectedValue;
    ---PUT YOUR SELECT CODE HERE----
} 
```

请记住在您的 .aspx 页面中将 dropdowlist Autopostback 属性设置为 true。

```
<asp:DropDownList ID="dropdowlist" runat="server" AutoPostBack="True" ></asp:DropDownList> 
```

# linux - 如何登录 SmartDashBoard？

> ID：10781714
> 
> 赞同：0
> 
> 时间：2012-05-28T08:42:22.650
> 
> 标签：linux, checkpoint

我在我的 VirtualBox 上安装了 CheckPoint SecurePlatform R75.20。我配置了它。现在为了**创建**一个 OPSEC 应用程序并继续维护一个 LEA 服务器，我需要登录到**SmartDash** Board。我将我（即我的 ip）定义为**GUI 客户端**，并尝试使用**管理员用户名和密码**登录 SmartDash Board （这是需要做的）。但是登录被拒绝说“主机是 owm 或用户不是 GUI 客户端”。就我而言，主机已启动，因为我正在 ssh 进入它，并且我已经明确提到我的 ip 作为 GUI 客户端。

我哪里出错了？谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-25T11:45:51.970

为了能够登录到 CheckPoint SmartCenter，您必须：

*   可以通过网络访问从您的机器到 SmartCenter 的 TCP 端口 18190 (CPMI)（因为它在您自己的 LAB 网络上，您可能已经拥有了）。

*   用户名/密码，您在安装过程中创建或稍后可以使用命令“cpconfig”并转到菜单选项“Administrator”添加或修改。（注意：使用 cpconfig 只能定义 1 个管理员。未来的管理员在 SmartDashboard 中定义）。

*   您的 IP 地址必须在 GUI 客户端列表中。您可以通过使用 SSH 登录 SmartCenter 机器来修改此设置，输入命令“cpconfig”并转到菜单选项“GUI Clients”。

# objective-c - UITableView 阴影

> ID：10781716
> 
> 赞同：2
> 
> 时间：2012-05-28T08:43:02.680
> 
> 标签：objective-c, ios, uitableview, uianimation

我想问你，如果有人知道如何在表格视图的末尾创建一个阴影，如下图所示（单击 href :)）。最好的祝福

马丁

[带阴影的应用](http://i.stack.imgur.com/ngGFd.jpg)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-28T10:19:40.447

顶部渐变的代码，别忘了导入 QuartzCore/QuartzCore.h`.view`是视图控制器出口视图（UIView），表格视图是它的子视图。

```
- (void)viewDidLoad
{
    UIView *gradientView = [[[UIView alloc] initWithFrame:CGRectMake(0, 0, 320, 50)] autorelease];
    CAGradientLayer *gradient = [CAGradientLayer layer];
    [gradient setFrame:gradientView.bounds];
    gradient.colors = [NSArray arrayWithObjects:(id)[[UIColor blackColor] CGColor], (id)[[UIColor clearColor] CGColor], nil];
    [self.view.layer addSublayer:gradient];
    [super viewDidLoad];
} 
```

或者您可以随时绘制渐变图像并将其添加为子视图（在滚动视图之后的根视图上，而不是直接在滚动视图上以防止图像滚动）。

# xml - 如何使用 grep 在 xml 标签中查找信息？

> ID：10781717
> 
> 赞同：20
> 
> 时间：2012-05-28T08:43:05.467
> 
> 标签：xml, regex, shell, grep

我正在编写一个 bash 脚本来从 xml 文件中提取一些信息。我正在使用`grep`这个。

为了找到我需要的信息，我运行：

```
grep -oP "<title>(.*)</title>" temp.xml 
```

我得到一个匹配列表，其中包括`<title>`标签。

如何使用 grep获取仅包含`title`标签内文本但**不**包含标签的列表？`title`

* * *

## 回答 #1

> 赞同：37
> 
> 时间：2012-05-28T10:50:58.623

既然你已经使用了`grep -P`，为什么不使用它的功能呢？

```
grep -oP '(?<=<title>).*?(?=</title>)' 
```

在一般情况下，XPath 是正确的解决方案，但对于玩具场景，是的，Virginia，它可以做到。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-05-28T09:55:08.573

我不明白你为什么要为此使用 grep，虽然它可以用一个简单的 XPath 表达式来解决：

```
//title/text() 
```

XPath 有许多命令行工具，它们通常与操作系统捆绑在一起。

[Stack Overflow 上](https://stackoverflow.com/q/15461737/1407656)对这个问题的回答列出了许多这样的工具。

这里的问题`grep`是它是一个通用的文本处理工具，它不知道任何 XML 结构。对于一个非常简单的场景，您可以[让它工作](https://stackoverflow.com/a/10783395/1407656)。如果文档很复杂，或者如果您在一个脚本中使用它，该脚本可以存活数月或数年，而不仅仅是一次性工作，您最终可能会对结果感到抱歉。

XPath 可以很容易地区分出现在文档中不同上下文中的类似名称的标签。

```
<article>
    <author>
        <name>Jon Doe</name>
        <title>Chief Editor</title>
    </author>
    <title>On the Benefits of grep</title>
    <publicationDate>2018-02-12</publicationDate>
    <text>blah blah blah</text>
</article> 
```

如果您使用此处发布的任何其他答案，则提取本文档所代表的文章标题`grep`将失败。从技术上讲，您可以编写正则表达式来获得所需的内容，但使用 XPath 会容易得多。

```
/article/title/text() 
```

如果您知道您正在处理一个琐碎的文档并且格式没有改变，或者如果这是您可以快速验证结果的一次性工作，您可以`grep`按照其他人的解释进行。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-05-28T09:10:18.760

这不是最好的解决方案，我会在 bash 中搜索 XML lib，但你可以这样做：

```
grep -oP "<title>(.*)</title>" temp.xml | cut -d ">" -f 2 | cut -d "<" -f 1 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2019-01-16T06:17:11.343

```
grep -oP "<foo>(.*)</foo>" "XML.xml" | sed -n 's/.*<foo>\([^<]*\)<\/foo>.*/\1/p' >> "foo.txt" 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-02-11T15:25:50.793

[您可以按照Tom](https://stackoverflow.com/users/1407656/tom)的回答中的建议使用 xpath 安装 xgrep

[人 xgrep](http://manpages.ubuntu.com/manpages/precise/man1/xpath.1p.html)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2021-02-27T02:01:21.930

您可以使用以下任何命令来获取标签之间的值。

`grep -oP '(>).*?(?=</title>)' test.xml | cut -d ">" -f 2`
`grep -oP '(?<=title>).*(?=</title)' test.xml`
`awk -F "[><]" '/title/{print $3}' test.xml`

# ios - 在 iOS 上，有没有办法在使用 UIGraphicsBeginImageContextWithOptions 创建 ImageContext 后获取它的大小？

> ID：10781718
> 
> 赞同：3
> 
> 时间：2012-05-28T08:43:07.107
> 
> 标签：ios, uikit, core-graphics, graphicscontext

如果使用以下方法创建图像上下文：

```
UIGraphicsBeginImageContextWithOptions(CGSizeMake(768, 768), YES, 1.0); 
```

以后有没有办法获得上下文的大小？从上下文中获取图像时肯定有大小，但是在绘制时，是否还有一种方法可以获取它的宽度和大小？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-28T09:05:44.793

对于上面的位图上下文，您可以使用：

```
CGContextRef context = UIGraphicsGetCurrentContext();
size_t width = CGBitmapContextGetWidth(context);
size_t height = CGBitmapContextGetHeight(context); 
```

# c++ - C++ 加速键不起作用

> ID：10781719
> 
> 赞同：4
> 
> 时间：2012-05-28T08:43:11.257
> 
> 标签：c++, winapi, mingw, accelerator

我无法让加速器工作。我正在使用 C++。

在我的窗口设置并显示后。

```
MENUITEMINFOW mAbout;
mAbout.cbSize = sizeof(MENUITEMINFO);
mAbout.fMask  = MIIM_TYPE | MIIM_ID;
mAbout.wID    = (UINT) ID_ABOUT;
mAbout.fType  = MFT_STRING;
mAbout.dwTypeData = (LPWSTR)L"&About";

InsertMenuItemW(HelpMenu,   0, TRUE, &mAbout); 
```

我的菜单运行良好，并调用我的“关于”框，没有问题。

现在，在消息循环之前，我加载了加速器：

```
// Load accelerators.
 HACCEL hAccelerators = LoadAcceleratorsW(hInstance, MAKEINTRESOURCEW(IDR_ACCELERATOR)); 
```

然后我的主要消息循环：

```
while(GetMessageW(&msg, NULL, 0, 0) > 0) {
    if (! TranslateAcceleratorW(msg.hwnd, hAccelerators, &msg)) {
        TranslateMessage(&msg);
        DispatchMessageW(&msg);
    }
} 
```

我的 WndProc 消息句柄（同样，从菜单中工作）

```
case WM_COMMAND: {
    if (HIWORD(wParam) == 0) {
        if (LOWORD(wParam) == 101) {
            testDialog(hInstance ,hWnd,(LPSTR)"Testing");
        }
        if (LOWORD(wParam) == ID_ABOUT) {
            DialogBox(hInstance, MAKEINTRESOURCE(IDD_ABOUTDIALOG), hWnd, &AboutDialogProc);
            return 0;
        }
    }
    break;
} 
```

我的 resource.rc 文件：

```
//
// Accelerator resources
//
LANGUAGE LANG_NEUTRAL, SUBLANG_NEUTRAL
IDR_ACCELERATOR ACCELERATORS
{
    "a",    ID_ABOUT, VIRTKEY, ALT
} 
```

和我的 resource.h 文件：

```
#define IDR_ACCELERATOR                         122
#define ID_ABOUT                                401 
```

而且......好吧，Alt-a 不会调出 about 框。我已经浏览了整个 Microsoft 网站，并且非常小心，但我找不到任何明显的不同之处。

我在 Windows 7（64 位）上使用 MinGW 并在应用程序中编译 Unicode。

其他一切都有效，但这个，我错过了什么？？？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-28T17:18:20.800

找到了！

来自： http: [//msdn.microsoft.com/en-us/library/windows/desktop/ms646373 (v=vs.85).aspx](http://msdn.microsoft.com/en-us/library/windows/desktop/ms646373(v=vs.85).aspx)

> 为了区分此函数发送的消息与菜单或控件发送的消息，WM_COMMAND 或 WM_SYSCOMMAND 消息的 wParam 参数的高位字包含值 1。

这就是问题所在，我正在检查 wParam 的值是否为 0，我没有发现它是`1`由`TranslateAcceleratorW`

```
if (HIWORD(wParam) == 0) {
    if (LOWORD(wParam) == 101) {
        testDialog(hInstance ,hWnd,(LPSTR)"Testing");
    }
    if (LOWORD(wParam) == ID_ABOUT) {
        DialogBox(hInstance, MAKEINTRESOURCE(IDD_ABOUTDIALOG), hWnd, &AboutDialogProc);
        return 0;
    }
} else if (HIWORD(wParam) == 1) {    // Accelerator input 
    if (LOWORD(wParam) == ID_ABOUT) {
        DialogBox(hInstance, MAKEINTRESOURCE(IDD_ABOUTDIALOG), hWnd, &AboutDialogProc);
        return 0;
    }
} 
```

哎呀，这是一个很小的细节。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-05-28T08:58:16.930

在您的 resource.rc 中，尝试删除 VIRTKEY。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-05-28T09:14:36.333

您应该尝试在 .rc 中放置 0x41 而不是“a” 这是“A”的 ascii 代码（大写...）

# c# - 带有静态构造函数的单例模式有什么优点？

> ID：10781726
> 
> 赞同：0
> 
> 时间：2012-05-28T08:43:44.490
> 
> 标签：c#, .net, design-patterns, singleton

我有一些代码，如下所示。我想这是`Singleton`模式。为什么我需要一个静态构造函数。还有这个有什么好处？感谢您的回复 ...

```
 public sealed class Myclass
  {
    static Myclass()
    {
        Myclass.Application = new Myclass();
    }

    protected Myclass()
    {

    }

    static Myclass _application;

    public static Myclass Application
    {
        get { return Myclass._application; }
        protected set { Myclass._application = value; }
    }

    string _name;

    public string Name
    {
        get { return _name}
        protected set { _name= value; }
    }
 } 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-28T08:48:33.570

*首先，这个类有一个受保护*的构造函数有点奇怪。考虑到它是密封的，这不是一个致命的缺陷，但它显然很奇怪。

此代码与静态变量初始化器的几乎等效使用之间存在[潜在的时序差异：](http://csharpindepth.com/Articles/General/BeforeFieldInit.aspx)

```
static readonly Myclass _application = new Myclass(); 
```

（当然，在这种情况下不需要二传手。）

但是，您不能使用自动实现的属性来做到这一点。

*以某种*形式使用静态初始化可以让你“自由”线程安全——你不需要做任何锁定来获得延迟初始化。

您可能会发现我的[单例实现文章](http://csharpindepth.com/Articles/General/Singleton.aspx)对更多选项很感兴趣。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-28T08:56:26.323

您必须在某处创建类的实例，这可以在静态构造函数中，也可以在获取实例的属性中。

无论如何，这不是您找到的一个好的代码示例。

*   `protected`即使它是，它也有成员`sealed`，这只会使代码混乱。他们应该是`private`。
*   如果您查看该`Name`属性，您会发现无法设置它，所以它始终是`null`.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-28T08:45:35.907

除了 Jon Skeet 的回答指出的线程安全之外，静态构造函数与 get 方法的惰性实例化相比没有直接的优势。尽管您没有指定任何内容，但这可能与您的情况相关，也可能不相关。它只是使代码看起来不同，但会产生相同的功能。

单例模式的“优点”是允许轻松访问类的单个实例，基本上是一种“全局”可访问的类实例。

我说“优势”，因为有很多关于单例模式是反模式的讨论。我在篱笆上。在小型应用程序中，这可以正常运行，并且大多数建议的替代解决方案都涉及依赖注入框架（通常有时具有“单例”的生命周期！），这在较小的应用程序上可能不切实际。

请注意，拥有一个`sealed`有`protected`成员的类是没有意义的——密封的类不能被继承。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-28T08:46:18.607

如果您以这种方式编写，您可以使用 *auto*属性而不实际*实现*它。

像这样说：

```
 public sealed class Myclass
 {
        static Myclass()
        {
            Myclass.Application = new Myclass();
        }

       .....
        public static Myclass Application {get;set;}
        ...

} 
```

基本上，如果不是这样，就没有任何*实际优势：代码风格。*

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-28T08:48:33.567

在这里使用类型 ctor 可以保证单例实例将被初始化一次。在实现惰性单例初始化时，双重检查锁模式更简单，但它有同样的缺点 - 创建单例可能非常昂贵，并且在应用程序生命周期内可能永远不会使用单例。

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2012-05-28T08:48:57.050

在加载程序集期间调用它的静态构造函数...

**编辑：** 谢谢乔恩我错了......现在我明白C#中的静态构造函数被指定为仅在创建类的实例或引用静态成员时执行..

# django - 这段代码如何？GET 方法和 Q 对象

> ID：10781730
> 
> 赞同：-1
> 
> 时间：2012-05-28T08:44:31.550
> 
> 标签：django, django-q

这段代码如何？一步步

```
keyword = request.GET['keyword']
for l in keyword.split():
    q = q | (
        Q(title__icontains=smart_str(l)) |
        Q(content__icontains=smart_str(l)) 
        )
    result = News.objects.filter(q) 
```

每一行发生了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-28T11:08:36.647

您从 GET 调用中收到一个关键字列表，然后将其拆分为一个关键字列表。

您遍历关键字，并为每个关键字构建一个存储在 q 中的 OR 查询。您正在数据库中查询在标题或内容中找到关键字的新闻对象。

在最后一行中，您将过滤掉与您的查询匹配的新闻项目。

您可以在此处找到有关 Q 参数的更多信息：[https ://docs.djangoproject.com/en/dev/topics/db/queries/#complex-lookups-with-q-objects](https://docs.djangoproject.com/en/dev/topics/db/queries/#complex-lookups-with-q-objects)

该| char 表示或。

# windows-phone-7 - Windows phone 7 中的滚动查看器不起作用

> ID：10781733
> 
> 赞同：1
> 
> 时间：2012-05-28T08:44:37.470
> 
> 标签：windows-phone-7, scrollviewer

我是 windows phone 7 开发的新手。我已经启动了一个使用滚动查看器的应用程序。这是我的代码：

```
 <!--TitlePanel contains the name of the application and page title-->

        <!--ContentPanel - place additional content here-->
        <ScrollViewer>                
            <StackPanel Margin="0,150,0,0">
                <toolkit:PhoneTextBox Hint="UserName" Name="txtUsername" Width="auto" HintStyle="{StaticResource HintCustomStyle}" LengthIndicatorVisible="True" DisplayedMaxLength="6" ></toolkit:PhoneTextBox>
                <toolkit:PhoneTextBox Name="txtFname" Hint="First Name" Width="auto" HintStyle="{StaticResource HintCustomStyle}" LengthIndicatorVisible="True" DisplayedMaxLength="20"></toolkit:PhoneTextBox>
                <toolkit:PhoneTextBox Name="txtLastName" Hint="Last Name" Width="auto" HintStyle="{StaticResource HintCustomStyle}" LengthIndicatorVisible="True" DisplayedMaxLength="20"></toolkit:PhoneTextBox>
                <toolkit:PhoneTextBox Hint="Password" Name="txtPassword" Width="auto" HintStyle="{StaticResource HintCustomStyle}" LengthIndicatorVisible="True" DisplayedMaxLength="6" ></toolkit:PhoneTextBox>
                <toolkit:PhoneTextBox Hint="Cofirm Password" Name="txtConfirmPassword" Width="auto" HintStyle="{StaticResource HintCustomStyle}" LengthIndicatorVisible="True" DisplayedMaxLength="6" LostFocus="txtConfirmPassword_LostFocus"></toolkit:PhoneTextBox>
                <toolkit:PhoneTextBox Hint="Emplyee ID" Name="txtEmployeeID" Width="auto" HintStyle="{StaticResource HintCustomStyle}" LengthIndicatorVisible="True" DisplayedMaxLength="6"></toolkit:PhoneTextBox>
                <Button Content="Create QR Code and Sign Up" Name="btnCreateQR" Width="auto" Click="btnCreateQR_Click">
                    <Button.Background>
                        <ImageBrush ImageSource="\assests\backgroungimages\btnImage.jpg" Stretch="UniformToFill"></ImageBrush>
                    </Button.Background>
                </Button>
            </StackPanel>
        </ScrollViewer>
    </Grid>

</Grid> 
```

在模拟器中，页面不滚动。如果我滚动按住鼠标按钮，然后它会滚动，但释放鼠标按钮后会恢复到原来的状态....请帮助任何人....在此致谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-28T09:05:21.540

没有提到滚动查看器内的堆栈面板的高度。仅当滚动查看器内的控件超过其高度时才支持滚动。因此，您最好将滚动查看器和堆栈面板的高度设置为 1500 或您需要的其他值。

```
<Grid x:Name="ContentPanel" Grid.Row="1" Margin="12,0,12,0" Background="Black">
        <ScrollViewer Height="1500">
            <StackPanel Height="1500" Margin="0,150,0,0">
                <TextBox  Name="txtUsername" Width="auto" />
                <TextBox Name="txtFname"  Width="auto"/>
                <TextBox Name="txtLastName"  Width="auto" />
                <TextBox  Name="txtPassword" Width="auto" />
                <TextBox  Name="txtConfirmPassword" Width="auto" />
                <TextBox  Name="txtEmployeeID" Width="auto" />

            </StackPanel>
        </ScrollViewer>
    </Grid> 
```

试试这个效果很好

# python - 如何将数据从一个python文件返回到另一个python文件

> ID：10781738
> 
> 赞同：1
> 
> 时间：2012-05-28T08:44:49.507
> 
> 标签：python, file, return-value

我正在使用一个 python 文件。我想调用另一个python代码。有什么方法可以将数据从第二个 python 代码返回到调用 python 代码。任何类似函数的东西都会将值返回给调用函数。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-28T09:01:51.543

我必须承认我没有看到问题：

`test1.py`：

```
def myfunc():
    return "spam!" 
```

`test2.py`：

```
import test1
print(test1.myfunc()) 
```

运行时输出`test2.py`：

```
spam! 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-28T08:49:16.410

将所有内容放入类和函数中，并阅读大量有关[导入模块的内容](http://docs.python.org/tutorial/modules.html)

# python - 内存使用情况，如何释放内存

> ID：10781741
> 
> 赞同：2
> 
> 时间：2012-05-28T08:45:05.943
> 
> 标签：python, memory, memory-management, memory-leaks

我正在使用 python，并且在索引文档（用于搜索引擎）时需要大量 RAM，在我停止索引过程后，内存仍然是满的（比如 8gb 的 RAM）。这很糟糕，因为我需要我的搜索引擎一直工作，而不是在我完成索引时重置操作系统。有没有什么有效的方法来管理巨大的数组、字典和列表，以及如何释放它们。有任何想法吗？

我在stackoverflow上也看到了一些关于它的问题，但它们很旧：

[Python 内存占用与堆大小](https://stackoverflow.com/questions/1194416/python-memory-footprint-vs-heap-size)

[在 Python 中分析内存分配（支持 Numpy 数组）](https://stackoverflow.com/questions/3372444/profile-memory-allocation-in-python-with-support-for-numpy-arrays)

信息：

```
free -t
             total       used       free     shared    buffers     cached
Mem:          5839       5724        114          0         15       1011
-/+ buffers/cache:       4698       1141
Swap:         1021        186        835
Total:        6861       5910        950

top | grep python 

 3164 root      20   0 68748  31m 1404 R   17  0.5  53:43.89 python                                                                     
 6716 baddc0re  20   0 84788  30m 1692 S    0  0.5   0:06.81 python     

 ps aux | grep python

root      3164 57.1  0.4  64876 29824 pts/0    R+   May27  54:23 python SE_doc_parse.py
baddc0re  6693  0.0  0.2  53240 16224 pts/1    S+   00:46   0:00 python index.py

uptime

01:02:40 up  1:43,  3 users,  load average: 1.22, 1.46, 1.39

sysctl vm.min_free_kbytes

vm.min_free_kbytes = 67584 
```

真正的问题是，当我启动脚本时，索引速度很快，但是当使用量增加时，它变得越来越慢。

```
Document wikidoc_18784 added on 2012-05-28 01:03:46 "fast"
wikidoc_18784
-----------------------------------
Document wikidoc_21934 added on 2012-05-28 01:04:00 "slower"
wikidoc_21934
-----------------------------------
Document wikidoc_22903 added on 2012-05-28 01:04:01 "slower"
wikidoc_22903
-----------------------------------
Document wikidoc_20274 added on 2012-05-28 01:04:10 "slower"
wikidoc_20274
-----------------------------------
Document wikidoc_23013 added on 2012-05-28 01:04:53  "even more slower"
wikidoc_23013 
```

文档的大小最多为一页或两页文本。10页的索引大约需要2-3秒。

Tnx大家的帮助:)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-28T08:56:04.197

您的问题不可能与过多的内存使用有关。系统使用的内存越多，运行速度就*越快*。这就是我们向系统*添加*内存以提高其性能的原因。如果您认为使用更少的内存会以某种方式使系统更快，请取出一些内存。这将迫使它使用更少的内存。但是，毫不奇怪，如果你这样做，它会变慢。

系统保持内存在使用中，因为它需要努力释放内存。而且没有任何好处，因为空闲内存没有任何作用。不是说今天用一半，明天就可以用两倍。如果系统需要内存来做某事，它可以轻松地将内存直接从一个用途转移到另一个用途——它不需要大量空闲的内存。

现代操作系统仅保留少量可用内存来应对某些类型的异常情况，即它们无法将内存从一种用途转移到另一种用途。在 Linux 上，您可以使用以下命令了解系统需要多少可用内存：`sysctl vm.min_free_kbytes`. 您可能会发现这大致就是您拥有的可用内存量——这很好，因为这正是系统所需要的。

所以你不需要或不想释放内存。你想弄清楚为什么你的系统很慢。

**更新**：从您的新信息来看，它看起来像是`SE_doc_parse.py`在猛烈撞击 CPU。如果可能的话，我会考虑优化该代码。

**更新**：似乎它是一种效率低下的字典算法，用于超出其打算扩展到的大小并占用 CPU。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-28T09:57:13.030

从讨论来看，您似乎只是将数据存储在一个巨大的字典中（我通常不会直面地说；））也许将数据偏移到像 redis 这样的适当数据库中可能会减少 python 的内存使用量。它还可能使您的数据更高效、更快速地使用。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-28T09:27:37.467

我猜你的程序变慢了，至少有以下原因之一：

*   您的内存开始交换，数据从 RAM 传输到磁盘，反之亦然。解决方案确实是您的程序使用更少的内存。
*   您使用的算法与数据大小的比例很差。在这种情况下，寻找更好的算法显然是解决方案。

在这两种情况下，我们都需要查看您的一些代码（它本质上是什么），以便提供更具体的解决方案。

常见的解决方案包括

*   使用 Python`del`来指示不再需要变量。
*   使用迭代器而不是列表（迭代器不使用太多内存）。

# silverlight - 单击 RowHeader 时，当前行应该是可编辑的，单击 columnHarder 时，所有行的当前列应该是可编辑的

> ID：10781743
> 
> 赞同：0
> 
> 时间：2012-05-28T08:45:13.970
> 
> 标签：silverlight, mvvm, datagrid

我有一个silverlight DataGrid，默认情况下在页面加载时数据网格的所有单元格都应该是只读的。我有2个问题，有人可以帮助我吗？

1.单击 RowHeader 当前行应该是可编辑的 2\. 单击 columnHarder 时所有行的当前列应该是可编辑的

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-18T17:26:17.787

这可能无法解决您的全部问题，但应该可以部分解决。

这是为了使数据网格中的列只读

```
DataGrid.Columns[7].IsReadOnly = true; 
```

显然，可以从事件更改属性，但数据网格没有行/列标题事件处理程序。在不引入任何新的 gui 元素（如按钮）和改变应用程序的感觉的情况下，自定义控件似乎是一种可行的方法。

# function - 每个使用 Win32 API 的打印功能等效项的汇编程序在启动时都会崩溃。我怎样才能解决这个问题？

> ID：10781749
> 
> 赞同：2
> 
> 时间：2012-05-28T08:45:44.727
> 
> 标签：function, assembly, binary, call

我最近尝试使用 Win32 二进制文件（这是我的一个大项目）。因此，经过几周的研究，我现在对 Assembly 的工作原理、它如何转换为二进制代码以及 x86/x64 操作码的工作原理有了深入的了解。

难题的最后一块是弄清楚如何正确调用 Win32 API 方法。实际上，我在这里问了一个与此相关的问题，我得到的答案是，我应该尝试编译执行​​此操作的程序集或 C 程序。所以我继续在Assembly中尝试了这个（顺便说一下我正在使用FASM）：

```
format PE console
entry start

section '.idata' import data readable writable
    include 'win32a.inc'

    library kernel,'kernel32.dll'

    import kernel,\
           GetStdHandle,'GetStdHandle',\
           WriteConsoleA,'WriteConsoleA'

section '.data' data readable writable
    string db 'Hello!', 0h
    output dd ?

section '.code' code readable executable
    start:  push -11
            call GetStdHandle

            pushd 0
            pushd output
            pushd 7
            pushd string
            pushd eax
            call WriteConsoleA 
```

这实际上是该代码的许多版本之一。主要问题是，当我调用诸如“ExitProcess”之类的方法时，通常是 kernel32.dll 库中的其他函数，事情似乎解决了。令我烦恼的是IO功能...

我不明白这段代码有什么问题，我没有收到任何编译时错误，尽管当我运行它时，它只是崩溃了。

所以我的下一个想法是，因为这不起作用，所以在 C 中尝试同样的方法。我使用 Cygwin 作为编译器和链接器......

```
#include <windows.h>

int WINAPI WinMain(HINSTANCE hInstance, HINSTANCE hPrevInstance, LPSTR lpCmdLine, int nCmdShow) {
    MessageBox(NULL, "Hello, world!", "Test", MB_OK);
    return 0;
} 
```

这段代码产生了相同的结果，应用程序崩溃了。

现在，我不是在寻找任何 C/C++ 代码。我最初感兴趣的问题是了解在 x86/x64 二进制（汇编）代码中调用 extern 库函数的样子。但我将非常感谢有关此主题的任何资源。

先感谢您。

-汤姆·S。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-28T19:31:01.303

您的问题是您需要`ExitProcess`在最后调用才能正确结束该过程。由于您没有这样做，因此代码当前将继续执行并最终出现段错误，因为它试图执行垃圾字节。

# zend-framework - 致命错误：创建模型类的对象时未捕获异常“Zend_Controller_Dispatcher_Exception”

> ID：10781753
> 
> 赞同：1
> 
> 时间：2012-05-28T08:46:03.803
> 
> 标签：zend-framework

我是zend框架的新手。我在模型文件夹中创建了 Users.php。模型文件夹的代码如下。

```
<?php
include("Zend/Db/Table/Abstract.php");
include("Zend/Db/Table/Row/Abstract.php");
    class users extends Zend_Db_Table_Abstract {
        protected $_name = 'users';
        protected $_rowClass = 'Application_Model_DbTable_User';

        public function fetchUsers() {
            $select = $this->select();
            //$select->where('completed = 0');
            $select->order(array('date_created DESC', 'user_id ASC'));
            return $this->fetchAll($select);
        }
        public function insert_user1(array $data) {
            echo "called";
        }
    }

    class Application_Model_DbTable_User extends Zend_Db_Table_Row_Abstract {
        public function insert_user(array $data) {
        print_r($data);
        //$obj = new users();
        }   
    }
?> 
```

我已经创建了一个表单，并且从控制器中，我将从表单获取的数据传递给模型，以便模型随后将该数据插入数据库中。

但是如果我尝试创建用户类的对象它会产生一个致命错误。

```
Fatal error: Uncaught exception 'Zend_Controller_Dispatcher_Exception' with message 'Invalid controller specified (error) 
```

如果我尝试创建一个 Application_Model_DbTable_User 类，它可以正常工作，当我调用该类的方法时，它也可以正常工作，但是当我想将数据插入数据库时​​，它会产生如上所述的致命错误。

这是我的控制器代码。

```
$data = array('first_name' => $request->getParam('first_name'),
              'last_name' => $request->getParam('last_name'),
                            'country' => $request->getParam('country'),
                            'address' => $request->getParam('address'),
                            'username' => $request->getParam('user_name'),
                            'password' => $request->getParam('password'),
                            'password' => $request->getParam('address'),
                            'date_created' => date('Y-m-d H:i:s')
              );
            //$tasksGateway = new users();

            $obj = new Application_Model_DbTable_User();
            $obj->insert_user($data); 
```

这是确切的错误：

```
exception 'Zend_Db_Table_Exception' with message 'No adapter found for users' in C:\wamp\www\alancer\library\Zend\Db\Table\Abstract.php:755 Stack trace: #0 C:\wamp\www\alancer\library\Zend\Db\Table\Abstract.php(739): Zend_Db_Table_Abstract->_setupDatabaseAdapter() #1 C:\wamp\www\alancer\library\Zend\Db\Table\Abstract.php(268): Zend_Db_Table_Abstract->_setup() #2 C:\wamp\www\alancer\application\models\DBTable\Users.php(22): Zend_Db_Table_Abstract->__construct() #3 C:\wamp\www\alancer\application\controllers\UserController.php(55): Application_Model_DbTable_User->insert_user(Array) #4 C:\wamp\www\alancer\library\Zend\Controller\Action.php(516): UserController->processAction() #5 C:\wamp\www\alancer\library\Zend\Controller\Dispatcher\Standard.php(295): Zend_Controller_Action->dispatch('processAction') #6 C:\wamp\www\alancer\library\Zend\Controller\Front.php(954): Zend_Controller_Dispatcher_Standard->dispatch(Object(Zend_Controller_Request_Http), Object(Zend_Controller_Response_Http)) #7 C:\wamp\www\alancer\library\Zend\Controller\Front.php(212): Zend_Controller_Front->dispatch() #8 C:\wamp\www\alancer\web_root\index.php(35): Zend_Controller_Front::run('../application/...') #9 {main} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-28T09:39:15.587

我认为您已`ErrorController.php`在默认模块中首先删除或未创建它。现在发生的事情是发生了一些应用程序错误，因此 ZF 正在将控制器转移到，`ErrorController.php`但由于它不存在，所以您会遇到这样的致命错误。

错误控制器应包含

```
class ErrorController extends Zend_Controller_Action
{

    public function errorAction()
    {
        $errors = $this->_getParam('error_handler');

        if (!$errors || !$errors instanceof ArrayObject) {
            $this->view->message = 'You have reached the error page';
            return;
        }

        switch ($errors->type) {
            case Zend_Controller_Plugin_ErrorHandler::EXCEPTION_NO_ROUTE:
            case Zend_Controller_Plugin_ErrorHandler::EXCEPTION_NO_CONTROLLER:
            case Zend_Controller_Plugin_ErrorHandler::EXCEPTION_NO_ACTION:
                // 404 error -- controller or action not found
                $this->getResponse()->setHttpResponseCode(404);

                $this->view->message = 'Page not found';
                break;
            default:
                // application error
                $this->getResponse()->setHttpResponseCode(500);

                $this->view->message = 'Application error';
                break;
        }

        // conditionally display exceptions
        if ($this->getInvokeArg('displayExceptions') == true) {
            $this->view->exception = $errors->exception;
        }

        $this->view->request   = $errors->request;
    }

} 
```

更新

您不能创建直接扩展 Zend_Db_Table_Row_Abstract 的类的实例，而是应该使用表对象来这样做，例如

```
$user = new  Users();
$user->createRow()->insert_user($data); 
```

代替

```
$obj = new Application_Model_DbTable_User();
            $obj->insert_user($data); 
```

# android-ndk - 关于 android NDK 中 iostream 的问题

> ID：10781766
> 
> 赞同：1
> 
> 时间：2012-05-28T08:47:03.207
> 
> 标签：android-ndk, iostream

```
While trying to execute a program based on C++ in android via NDK platform, the compilation is giving error that 'iostream' and 'vector' header files are not found, as I have included both of them in my C++ code.
M using android-ndk-r5b and compiling it with Cygwin.
I have seen most of the header files (even iostream & vector) in the folder **root\android-ndk-r5b\sources\cxx-stl\gnu-libstdc++\include\** but dont know why its still showing the error.
I have to fetch some header files(*.h) and some cpp files also for my program, also guide me where to place the header files & how to mention them in make file.
My android make file is:

**ANDROID.MK**

LOCAL_PATH := $(call my-dir)

include $(CLEAR_VARS)

LOCAL_MODULE    := NDK1
FILE_LIST := $(wildcard $(LOCAL_PATH)/*.cpp) 
LOCAL_SRC_FILES := $(FILE_LIST:$(LOCAL_PATH)/%=%) 
APP_STL := gnustl_static
APP_STL := stlport_static

include $(BUILD_SHARED_LIBRARY) 
```

我已经搜索但仍然没有找到如何在这个 android.mk 中指定头文件的命令！提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-28T19:57:05.317

`APP_STL`指令需要进入`Application.mk`文件。

请仔细阅读文档（在 docs/CPLUSPLUS-SUPPORT.html 文件中）：

> 但是，您可以通过将变量 APP_STL 设置为 Application.mk 中的其他内容来选择不同的实现，例如：
> 
> APP_STL := stlport_static

# c# - volatile变量的值在多线程中不会改变

> ID：10781772
> 
> 赞同：3
> 
> 时间：2012-05-28T08:47:21.543
> 
> 标签：c#, multithreading, .net-4.0, backgroundworker, volatile

我有一个在后台运行的 winform 应用程序，`BackgroundWorker`它有一个无限循环，每小时执行一次。我的 UI`Form`类是这样的：

```
public partial class frmAutoScript : Form
{
    private volatile bool _isDownloading = false;
    private bool IsDownloading { get { return this._isDownloading; } set { this._isDownloading = value; } }

    public frmAutoScript()
    {
        InitializeComponent();
        this.RunAutoSynchronization();
    }

    private void RunAutoSynchronization()
    {
        bool isDownloading = this.IsDownloading;

        BackgroundWorker bgwDownloader = new BackgroundWorker();
        bgwDownloader.WorkerReportsProgress = true;
        bgwDownloader.ProgressChanged += (sndr, evnt) =>
        {
            if (evnt.ProgressPercentage == 2)
                isDownloading = this.IsDownloading;
            else
            {
                this.IsDownloading = evnt.ProgressPercentage == 1;
                isDownloading = this.IsDownloading;
            }
        };
        bgwDownloader.DoWork += (sndr, evnt) =>
            {
                while (true)
                {
                    if (DateTime.Now.Hour == 16 &&
                        DateTime.Now.Minute == 0)
                    {
                        try
                        {
                            bgwDownloader.ReportProgress(2);
                            if (!isDownloading)
                            {
                                bgwDownloader.ReportProgress(1);
                                new Downloader().Download();
                            }
                            bgwDownloader.ReportProgress(0);
                        }
                        catch { }
                    }

                    System.Threading.Thread.Sleep(60000);
                }
            };
        bgwDownloader.RunWorkerAsync();
    }
} 
```

在那`frmAutoScript`，我还有一个名为的按钮，单击该按钮`btnDownload`时，它将下载并更改`volatile`varialbe的值`_isDownloading`。按钮的事件是这样的：

```
private void btnDownload_Click(object sender, EventArgs e)
{
    if (IsDownloading)
        MessageBox.Show("A download is currently ongoing. Please wait for the download to finish.",
            "Force Download", MessageBoxButtons.OK, MessageBoxIcon.Exclamation);
    else
    {
        this.IsDownloading = true;
        BackgroundWorker bgwDownloader = new BackgroundWorker();
        bgwDownloader.DoWork += (sndr, evnt) =>
        {
            try
            {
                new Downloader().Download();
            }
            catch(Exception ex)
            {
                MessageBox.Show("An error occur during download. Please contact your system administrator.\n Exception: " +
                    ex.GetType().ToString() + "\nError Message:\n" + ex.Message + " Stack Trace:\n" + ex.StackTrace, "Download Error!", MessageBoxButtons.OK, MessageBoxIcon.Error);
            }
        };
        bgwDownloader.RunWorkerCompleted += (sndr, evnt) =>
        {
            this.IsDownloading = false;
        };
        bgwDownloader.RunWorkerAsync();
    }
} 
```

但是当我单击按钮`btnDownload`并且`_isDownloading`设置为`true`时，当系统时间点击时`4:00 PM`，即使设置为 true ，`new Downloader().Download();`也会再次执行。`_isDownloading`为什么会这样？

我的代码在 C# 框架 4 中，项目在 winforms 中，在 Visual Studio 2010 Pro 中构建。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-28T08:52:46.967

您的代码不是针对该`volatile`字段进行测试 - 它是针对 进行测试`isDownloading`，这*看起来*像一个“本地”，但（因为它被捕获）实际上是一个常规（非`volatile`）字段。所以：要么使用某种内存屏障，要么强制它成为易失性读取。`isDownloading` ***或更简单地说：完全***摆脱，并检查财产。

顺便说一句，缓存击败属性`volatile`不是关键字**的**意图，而是：结果。它会工作，但我*个人建议编写代码以***按意图**而不是结果工作，也许使用简单的`lock`或类似`Interlocked`.

# java - 用于 Java 的 Akka EventBus 示例

> ID：10781773
> 
> 赞同：8
> 
> 时间：2012-05-28T08:47:22.600
> 
> 标签：java, akka, event-bus

需要一些关于如何在 Java（不是 Scala！）中使用 Akka 提供的 EventBus 的建议。网站上的文档似乎不完整：[http ://doc.akka.io/docs/akka/2.0.1/java/event-bus.html](http://doc.akka.io/docs/akka/2.0.1/java/event-bus.html)

据我了解，应该创建actor以对特定消息做出反应，例如：

```
final ActorSystem actorSystem = ActorSystem.create("ServerEvents");
final ActorRef actor = actorSystem.actorOf(new Props(SeverEventHandler.class));
actorSystem.eventStream().subscribe(actor,ServerMessage.class); 
```

但是现在还不清楚如何向事件总线发送消息。

有人可以分享一些好的教程/示例/等吗？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-06-11T13:01:20.897

我认为你只是短线：

```
final ActorSystem actorSystem = ActorSystem.create("ServerEvents");
final ActorRef actor = actorSystem.actorOf(new Props(SeverEventHandler.class));
actorSystem.eventStream().subscribe(actor,ServerMessage.class);

actorSystem.eventStream().publish(new ServerMessage()); <<== add this 
```

虽然 ServerEventHandler 应该类似于

```
public class ServerEventHandler extends UntypedActor {
  @Override
  public void onReceive(final Object message) {
    System.out.println("Got event in thread: " + Thread.currentThread().getName());
    System.out.println("Event: " + message);
  }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-09-03T08:37:12.553

我不确定@Jan Goyvaerts 的代码是否仍然是最新的，截至 2019 年 9 月，这条线不起作用：

```
final ActorRef actor = actorSystem.actorOf(new Props(SeverEventHandler.class)); 
```

我认为现在这样做的正确方法可能是：

```
ActorRef newActor = system.actorOf(Props.create(AATestAkkaEventBus.class)); 
```

这个我也不是很清楚，如有错误请指正

# javascript - 如何在 designmode=on 中保护 HTML 元素

> ID：10781776
> 
> 赞同：3
> 
> 时间：2012-05-28T08:47:40.633
> 
> 标签：javascript, html, iframe, contenteditable, designmode

我有一个打开了设计模式的 iFrame。在文档中，我有几个“特殊”元素，用户可以通过菜单选择粘贴这些元素（在更广泛的应用程序中使用的自定义字符/标识符/描述是固定的）。如果用户选择或删除它们，我需要保护这些 html 元素不被修改并将它们视为一个实体。一个示例 iframe 如下所示：

```
<iframe>
    <html dir="ltr">
        <head></head>
        <body class="editableDoc">
            <p>Here is a <span class="special readonly">SPECIAL</span> character</p>
        </body>
    </html>
</iframe> 
```

设计模式可以编辑整个身体内容，这正是我需要的。

保护“只读”跨度的最佳方法是什么？我能给出的最佳描述是，我希望跨度及其内容被视为所有用户文本操作（即移动光标、选择、删除）的单个字符。我已经尝试在 span 元素上设置 contenteditable="false"，这确实有很多想要的效果，但它在 IE8/9 中效果不佳，并且在其他浏览器中还有其他较小的问题。另外，我不确定在同一个解决方案中混合设计模式和 contenteditable 是一个好主意。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-11-27T01:56:50.680

你可以`contentEditable=false`这样使用：

```
<body contenteditable>
    <p>Here is a <span contenteditable='false'>SPECIAL</span> character</p>
</body> 
```

无论它是否在 iframe 中，这都有效。它适用于 Chrome 和 Firefox——考虑到它没有前缀，可能也适用于最近的 IE。

演示：[http ://codepen.io/bfred-it/pen/bGhaC](http://codepen.io/bfred-it/pen/bGhaC)

这里有一个类似的问题：[contenteditable=false inside contenteditable=true block is still editable in IE8](https://stackoverflow.com/questions/7522848/contenteditable-false-inside-contenteditable-true-block-is-still-editable-in-ie8)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-19T02:56:14.560

使用CSS 属性的`read-only`值来保护 Firefox 和 Chrome 中的跨度：`user-modify`

```
<iframe src="about:blank" srcdoc="<body contenteditable><span style='-webkit-user-modify: read-only; -moz-user-modify: read-only;'>Hi</span></body>">
</iframe> 
```

# c - C：将变量传递给函数会返回错误

> ID：10781777
> 
> 赞同：1
> 
> 时间：2012-05-28T08:47:56.250
> 
> 标签：c, function, pointers

我正在使用一些带有嵌入式设备的 C，目前正在测试一些代码以从 SD 卡读取文件详细信息。我正在使用专有 API，但我会尽可能地删除它。

与其解释，我将尝试让代码自己说话：

```
 char* getImage() {
  int numFiles = //number of files on SD card
  for(int i=0; i<numFiles;i++) {
    \\lists the first file name in root of SD
    char *temp = SD.ls(i, 1, NAMES);
      if(strstr(temp, ".jpg") && !strstr(temp, "_")) {
        return temp;
      }
  }
  return NULL;
}

void loop()
{
  \\list SD contents
  USB.println(SD.ls());
  const char * image = getImage();
  if(image != NULL) {
    USB.println("Found an image!");
    USB.println(image);
    int byte_start = 0;
    USB.print("Image Size: ");
    **USB.println(SD.getFileSize(image));
    USB.println(SD.getFileSize("img.jpg"));**
} 
```

底部的两行是麻烦的。如果我传递一个文字字符串，那么我会完美地获得文件大小。但是，如果我传递字符串（由图像变量表示），那么我会得到一个光荣的 -1。任何想法为什么？

为清楚起见，打印出来的图像确实显示了正确的文件名。

编辑：我知道在 C 中返回一个 char 并更好地修改传递给函数的变量是不受欢迎的。我也使用了这种方法，下面是代码示例，结果相同：

```
char * image = NULL;
getSDImage(&image, sizeof(image));
void getSDImage(char ** a, int length) {
  int numFiles = SD.numFiles();
  for(int i=0; i<numFiles;i++) {
    char *temp = SD.ls(i, 1, NAMES);
      if(strstr(temp, ".jpg") && !strstr(temp, "_")) {
        *a = (char*)malloc(sizeof(char) * strlen(temp));
        strcpy(*a, temp);
      }
  }
} 
```

编辑 2：条目的链接在这里：[SD.ls](http://www.libelium.com/api/waspmote/classWaspSD.html#03ddd9babfc6deec16ed0ad6353bde6e)和文件大小函数的链接：[SD.getFileSize](http://www.libelium.com/api/waspmote/classWaspSD.html#28b399161bbe29149691544b1fda7f4f)

从返回来看，问题似乎出在文件大小函数上，因为返回是 -1（不是 0），并且在列出 SD 的根目录时会返回结果。

谢谢！

更新：我添加了一个空终止字符串的检查（这似乎是一个问题），这已在 getSDImage 函数中得到解决，具有以下内容：

```
 void getSDImage(char ** a, int length) {
      int numFiles = SD.numFiles();
      for(int i=0; i<numFiles;i++) {
        char *temp = SD.ls(i, 1, NAMES);
          if(strstr(temp, ".jpg") && !strstr(temp, "_")) {
            *a = (char*)malloc(sizeof(char) * strlen(temp));
            strncpy(*a, temp, strlen(temp)-1);
            *a[strlen(*a)-1] = '\0';
          }
      }
} 
```

这似乎有效，我的标准输出结果很好，大小现在不显示为错误指示 -1 而是 -16760。我想我应该发布更新，以防有人有任何想法，但我的假设是这与文件名字符串有关。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-28T09:07:11.313

您的代码有几处可能有问题：
1）您可能传递了“不可见”字符，例如空格。请确保您传递的字符串完全相同，即逐个字符打印，包括空终止，并查看它们是否相同。
2) API 返回的值和其他 API 使用的值可能与预期不同。我建议（如果可能的话）您查看 API 源代码。如果您可以编译 API 本身，那么应该很容易找到问题（检查 API getFileSize() 从参数中得到什么）。根据您发送的 API 文档，检查`buffer[DOS_BUFFER_SIZE]`您从中获得 -1 后存储的值。

**编辑**（在查看 API 源代码之后）：
在第 00657 行**（** func `find_file_in_dir`）你有：
if(strcmp(dir_entry->long_name, name) == 0)
这似乎是你在使用字符串时会有不同回复的唯一原因文字而不是从您的函数中获取名称。因此，您很可能没有传递相同的值（即，您要么传递不可见的字符，要么缺少字符串终止）。
最后一点：在每个代码到 SD API 之前检查缓冲区 [DOS_BUFFER_SIZE] 的内容。

我希望这有帮助。

亲切的问候，
博

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-28T09:13:54.463

这：

```
 if(strstr(temp, ".jpg") && !strstr(temp, "_")) {
    *a = (char*)malloc(sizeof(char) * strlen(temp));
    strcpy(*a, temp);
  } 
```

坏了，它没有为终结器分配空间并导致缓冲区溢出。

你应该使用：

```
*a = malloc(strlen(temp) + 1); 
```

不需要`malloc()`在 C 中强制转换返回值，并且`sizeof (char)`始终为 1。

# time - armcc（keil uVision4）：如何让 time() 从 RTC 返回时间？

> ID：10781780
> 
> 赞同：0
> 
> 时间：2012-05-28T08:48:06.970
> 
> 标签：time, libc, keil, armcc

我是一名相当习惯于使用免费工具在 Linux 上使用嵌入式系统的开发人员。现在我发现自己在一个使用 Windows 上的 Keil 编译器的项目中（armcc、uVision4 ......我发现这方面的东西的命名有点令人困惑:)。

使用的硬件上有一个实时时钟，但它总是通过其 I2C 接口直接访问。由于各种原因（主要是代码的可移植性），我想将它连接到标准`time()`函数。

我该怎么做呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-28T15:17:45.023

如 Keil 的 libc[手册](http://infocenter.arm.com/help/index.jsp?topic=/com.arm.doc.dui0475c/Cihedgag.html)中所述，您应该`time()`自己重新实现。

因此，您的`time()`实现应该从 RTC 读取时间并将其转换为 Unix 纪元时间。

# php - 查找当前时间和时间戳字段之间的差异

> ID：10781784
> 
> 赞同：-3
> 
> 时间：2012-05-28T08:48:16.150
> 
> 标签：php, timestamp

我有一个 php 脚本，应该在每 15 分钟后从数据库中删除数据。

现在在数据库表中我有一个字段时间戳，它存储每次修改字段时的当前时间戳。

每 15 分钟后，我想检查当前时间与时间戳字段中存储的值之间的差异。

我试过`if((time()-$row['timestamp'])>900)`//( 900 是秒)

这不起作用，因为时间戳字段还存储日期和当前时间。我该如何进行

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-28T09:16:53.633

如果您使用 MySQL`TIMESTAMP`数据类型存储时间，那么最好使用对`TIMESTAMP`数据进行操作的 MySQL 函数。[`TIMESTAMPDIFF()`](http://dev.mysql.com/doc/refman/5.5/en/date-and-time-functions.html#function_timestampdiff)将非常合适，因为它还允许为结果定义单位。

```
SELECT TIMESTAMPDIFF(MINUTE, `my_timestamp_column`, NOW()) FROM `my_table` 
```

`my_timestamp_column`将返回自value以来经过的分钟数（整数） 。将它与 PHP cron 脚本或简单地与页面上的每个请求结合以实现目标：

```
DELETE FROM `my_table`
WHERE TIMESTAMPDIFF(MINUTE, `my_timestamp_column`, NOW()) > 15 
```

此外，您可能需要阅读手册的[日期和时间函数](http://dev.mysql.com/doc/refman/5.5/en/date-and-time-functions.html)部分以了解其他一些解决方案。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-28T08:50:18.170

使用数据库完全处理这个问题是最容易的。使用 CURR_TIME 获取当前时间戳，然后使用 TIMEDIFF() 生成条件

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-28T08:53:49.027

您已经提到`$row['timestamp']`以格式存储值。`datetime`因此要将其转换为时间戳，请使用`strtotime()`函数。所以现在你的代码将是，

```
if((time()-strtotime($row['timestamp']))>900) //( 900 is the seconds) 
```

我希望这有帮助

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-05-28T08:54:33.860

您也可以使用 SQL 来执行此操作：

```
DELETE FROM `table` WHERE `timestamp` < UNIX_TIMESTAMP() - 60 * 15 
```

# ios - 使用 OCMock 将代码块作为参数的存根方法

> ID：10781787
> 
> 赞同：5
> 
> 时间：2012-05-28T08:48:20.837
> 
> 标签：ios, block, stub, ocmock

有没有一种存根方法的方法，它将块作为参数？例如方法：

```
- (void)reverseGeocodeLocation:(CLLocation *)location completionHandler:(CLGeocodeCompletionHandler)completionHandler; 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-29T17:54:22.280

是的。最简单的方法是接受任何东西：

```
id mockGeocoder = [OCMockObject mockForClass:[CLGeocoder class]];
[[mockGeocoder stub] reverseGeocodeLocation:[OCMOCK_ANY] completionHandler:[OCMOCK_ANY]]; 
```

如果你想验证一个特定的块是否被传入，它会变得有点棘手。一种选择是让你的完成处理程序成为你的类的属性，在你初始化你的类时初始化它，并让测试直接匹配它：

```
// in your class
@property(copy)CLGeocodeCompletionHandler completionHandler;

// in your class's init method
self.completionHandler = ^(NSArray *placemark, NSError *error) {
    //
}

// using the completion handler
[geocoder reverseGeocodeLocation:location completionHandler:self.completionHandler];

// the test
id mockGeocoder = [OCMockObject mockForClass:[CLGeocoder class]];
[[mockGeocoder stub] reverseGeocodeLocation:[OCMOCK_ANY] completionHandler:yourClass.completionHandler]; 
```

# c# - 从另一个应用程序 C# 读取列表框内容

> ID：10781790
> 
> 赞同：3
> 
> 时间：2012-05-28T08:48:25.863
> 
> 标签：c#, wpf, .net-4.0

这篇旧的 stackoverflow[帖子](https://stackoverflow.com/questions/1771558/read-items-from-control-in-another-application)问的问题与我的问题几乎相同，但是使用 Spy++ 我已经获得了控件句柄 ID。怎么办？:)

我不确定这个过程叫什么，我可以从 .net 应用程序获取另一个应用程序控件的内容，因此我在旧谷歌机器上的结果没有多大成功。

我有一个带有列表框的 MFC 应用程序，其中包含使用 WPF C# 应用程序自动执行任务所需的数据。我宁愿不使用外部库，并且一旦我找到该过程并让我的 C# 应用程序查看相应的列表控件来执行我需要的操作，我不认为它会太费力。

任何人都可以请我指出我应该查找的正确方向或提供一些代码让我开始。在这一点上，我被困住了，我的小项目非常依赖于此。我也不想使用 OCR。

谢谢，

灰

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-28T12:04:41.680

要从 Win32 ListBox 控件中获取文本，您必须使用专门针对该控件的消息和函数，这是一个参考：

[http://msdn.microsoft.com/en-us/library/windows/desktop/ff485971%28v=vs.85%29.aspx](http://msdn.microsoft.com/en-us/library/windows/desktop/ff485971%28v=vs.85%29.aspx)

在您的情况下，您应该首先查看列表框中有多少项目`LB_GETCOUNT`，然后为每个项目获取文本`LB_GETTEXT`。

这是将返回列表中的项目的方法，参数是 ListBox 控件窗口句柄：

```
[DllImport("user32.dll", CharSet = CharSet.Auto, SetLastError = false)]
static extern IntPtr SendMessage(IntPtr hWnd, uint Msg, IntPtr wParam, StringBuilder lParam); 
const int LB_GETCOUNT = 0x018B;
const int LB_GETTEXT = 0x0189;

private List<string> GetListBoxContents(IntPtr listBoxHwnd)
{
  int cnt = (int)SendMessage(listBoxHwnd, LB_GETCOUNT, IntPtr.Zero, null);
  List<string> listBoxContent = new List<string>();
  for (int i = 0; i < cnt; i++)
  {
    StringBuilder sb = new StringBuilder(256);
    IntPtr getText = SendMessage(listBoxHwnd, LB_GETTEXT, (IntPtr)i, sb);
    listBoxContent.Add(sb.ToString());
  }
  return listBoxContent;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-28T09:50:21.483

[这个问题](https://stackoverflow.com/questions/5078025/how-can-i-read-data-from-controls-on-window-in-a-different-application)的答案应该让你开始。谷歌`P/Invoke`和`FindWindow()`/`GetWindowText()`系列方法。

希望有帮助。

# asp.net-mvc - ASP.NET MVC - 如何从 FileResult 获取文件？

> ID：10781792
> 
> 赞同：1
> 
> 时间：2012-05-28T08:48:30.697
> 
> 标签：asp.net-mvc

短版：我有一个返回 FileResult 的第三方 MVC 扩展。我希望能够在将文件返回给客户端之前对其进行处理。我怎样才能做到这一点？

如果您对无聊的细节感兴趣，请阅读以下内容：

我将 Devexpress XtraReports 用于报告目的。问题是它的 PDF 导出很糟糕，但 RTF 的效果很好。我想创建动作和结果过滤器，它会欺骗 DevExpress 生成 rtf 而不是 pdf（完成），并使用其他第三方库将 rtf 转换为 pdf。唯一的问题是我需要从 FileResult 获取 rtf 文件并返回我自己的 FileResult 以及转换后的内容。

//编辑：现在的代码如下所示：

```
 public virtual ActionResult ReportExport(TParameters parameters)
        {
            return DevExpress.Web.Mvc.ReportViewerExtension.ExportTo(this.GetReport(parameters));    
        } 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-28T11:59:58.510

您说您正在使用返回 a 的第三方 MVC 扩展，`FileResult`并且您希望访问包含在结果中的文件详细信息。

如果您看到`FileResult`，它是一个抽象类，我只知道 MVC 中提供了三个内置实现（我不知道其他实现）`FileContentResult`：`FileStreamResult`和`FilePathResult`.

所有这些类都提供公共属性来访问文件的详细信息。例如。`FileContentResult`包含一个名为的公共属性，`FileContents`它以字节数组的形式返回文件的内容。

第三方扩展可以返回`FileResult`内置类型的任何实现，或者（如果您无法访问这些类型）它们自己的类型。您可以检查返回`FileResult`的实例的类型并进行相应的转换以访问文件详细信息。

```
var fileResult = ... returned by the MVC extension

if(fileResult is FileContentResult)
{
   var fileContentResult = fileResult as FileContentResult;   
   var fileContent = fileContentResult.FileContents;
   // process the file
}
else if(fileResult is FileStreamResult)
{
   var fileStreamResult = fileResult as FileStreamResult;
   var fileStream = fileStreamResult .Stream;
   //...
}
else if(fileResult is FilePathResult) // this result only contains the path 
                                      // of the file name
{
  //...
} 
```

如果您想让这些东西可重用，您可以实现一个自定义文件结果，该结果采用`FileResult`构造函数中的扩展返回并覆盖该`WriteFile`方法。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-28T09:09:17.927

FileResult 可能会将文件内容写入响应流。您可以通过过滤器使用标准 ASP.NET 响应流。详情见这篇古文：

[http://www.4guysfromrolla.com/articles/120308-1.aspx](http://www.4guysfromrolla.com/articles/120308-1.aspx)

或者，您可以创建自己的 ActionResult，使用带有假响应流的自定义 HttpContext 调用 DevExpress FileResult，这是您进行转换的地方。

# spring-mvc - 速度设置 $layout 不起作用

> ID：10781795
> 
> 赞同：0
> 
> 时间：2012-05-28T08:48:34.907
> 
> 标签：spring-mvc, velocity, template-engine

我将 Velocity 与 Spring MVC 一起使用，每件事在我的模板中运行良好，但设置布局，我试图定义不同的布局并在我的模板中使用它们，但 $layout 对我没有任何作用。我是否使用错误的方式设置布局？

这是我的布局文件：（layout1.vm）

```
<!DOCTYPE HTML>
<html>
  <head>
    <title>$!page_title</title>
  </head>
  <body>
<h1>This is Layout #1</h1>
<div>
  $screen_content
</div>
  </body>
</html> 
```

这是我的模板 (hello.vm) 将扩展此布局：

```
#set( $layout = "layout1.vm" )

<ul>
#foreach ($name in $namelist)
  <li>${name}</li>
#end
</ul> 
```

这两个文件都位于同一目录中，我非常感谢有关解决此问题的任何帮助或建议

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-29T14:35:37.337

您是否使用 Spring 的 VelocityLayoutViewResolver（或类似的东西？） Spring MVC 中的默认 Velocity 视图解析器不支持布局分辨率。

# python - Django 和设计带有体育课的应用程序

> ID：10781796
> 
> 赞同：2
> 
> 时间：2012-05-28T08:48:35.133
> 
> 标签：python, database, django, database-design, web-applications

我想在 django 中设计 Web 应用程序来预订体育课。我在设计它时遇到了一些问题，因为我不知道这些问题通常是如何解决的。

所以每周有一次体育课，周一晚上 19​​ 点，只有 20 人可以参加。应该可以在一周前预订，所以如果上课时间是 5 月 28 日 19:00，那么从 5 月 21 日 00:00 开始就可以预订。

现在有一些问题：
1\. 一个类应该是模型中的一个对象（一个记录），对吗？但是应该是一种课（所以每周一上课是一个记录）还是在特定日期上课（所以一周一节课是一个记录，3周后，我们有这个课的3个记录） ?
2\. 如何创建这些记录？我应该自动复制今天的课程，将日期更改为 +1 周吗？如何解决这些问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-20T08:28:34.870

好吧，您可以创建一个模型来代表体育课的当前时间表（时间表），以及另一个模型来代表某一天的特定记录。

例如：

```
class ClassType(models.Model):
    name = models.CharField(u"Class name", max_length = 120)
    schedule_day = models.IntegerField(u"Day of week")
    schedule_time = models.TimeField(u"Time")
    max_attend = models.IntegerField(u"Maximum attendants")

class ClassRecord(models.Model):
    type = models.ForeignKey(ClassType, verbose_name = "Class type")
    date = models.DateTime("Scheduled date")
    attendants = models.ManyToManyField(User) #don't forget to import it 
```

因此，如果它们将来会发生变化，您可以指定时间表和课程类型。您可以创建一个命令（请参阅 django 文档中的 manage.py 命令），该命令将为下周创建一个 ClassRecord 并将此命令设置在 cron（或 celery 例如）上，因此它将每周运行一次并在需要时创建新记录.

# ajax - 花式框：显示部分视图

> ID：10781797
> 
> 赞同：0
> 
> 时间：2012-05-28T08:48:39.883
> 
> 标签：ajax, asp.net-mvc, fancybox

我有以下js代码：

```
 function getSelectedPlace(form) { 
        var places = 1           
            $(form).find(":input").each(function () {
                if ($(this).attr("name") === "Signed_Order_B64") {
                    $.ajax({
                        type: 'POST',
                        url: '/MyController/MyAction',
                        data: "id=" + places,
                        success: function (response) {
                            if (response.Result) {
                                ret = response.Message;
                                result = true;
                                $("input[type=hidden][name=email]").val(response.Email);
                                $("input[type=hidden][name=appendix]").val(response.Appendix);
                            } else {

                                // show fancybox
                                result = false;
                            }
                        },
                        error: function () {
                            result = false;
                        },
                        async: false
                    });

                    $(this).val(ret);
                }
            });
            if (!result) {
                $(submitButton).attr("value", btnText);
                setStateFotBuyButton(false);
            }
            return result;
        } 
```

我有块`if`声明`success`。我想在`else`块中显示部分视图。我怎样才能做到这一点？谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-28T09:38:25.693

不完全确定“部分视图”是什么意思，但你可以做

```
} else {
 $.fancybox(response,{
  // fancybox options here
 }); // fancybox
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-28T09:00:10.550

您可以使用`content`允许您将 fancybox 的内容设置为任何 html 的开关：

```
$.fancybox({
    content: response
}); 
```

# c - fwrite理解

> ID：10781799
> 
> 赞同：0
> 
> 时间：2012-05-28T08:48:51.893
> 
> 标签：c, fwrite, wdk

我正在编写驱动程序并使用 fwrite 将数据记录到文件中。我有一个使用 fwrite 的记录器类。现在我传递指针和大小，但写入文件的数据似乎是 161 字节，而我传递 160 作为长度（通过 ref 调用作为记录器类函数的 arg - fwrite 包装器）。在 5/6 例中，写入 160 字节，但在 1 例中，写入 161 字节。我无法理解如何。

附加信息：我在Win7上。使用VS/DDK，使用Notepad++十六进制编辑器查看数据，数据用'\n'分隔数据标签，以便在记事本中也可以看到。

代码：

```
size_t AbhiLogger :: addData(const void * data, size_t length)  {
    if(m_pFile== NULL)
        return E_BADFILE;

    return fwrite(data, 1,length, m_pFile);
} 
```

AbhiLogger 封装了路径、文件名和扩展名以及文件句柄。原因是您可以更改名称/extn/path 任何或全部，它会将句柄关联到关闭前一个文件后新打开的句柄。

# c# - 如何从表适配器获取正在执行的 SQL 查询？

> ID：10781801
> 
> 赞同：4
> 
> 时间：2012-05-28T08:48:55.960
> 
> 标签：c#, sql, tableadapter

> **可能重复：**
> [如何从 SqlCommand-Object 获取生成的 SQL 语句？](https://stackoverflow.com/questions/265192/how-to-get-the-generated-sql-statement-from-a-sqlcommand-object)

我想知道如何检索表适配器为记录目的而执行的 SQL 查询。

例如：

输入：

```
RandomTableAdapter tableAdapter = new RandomTableAdapter();
tableAdapter.Insert("val","val","val","val"); 
```

输出：

我要记录的是插入语句，它是由表适配器生成的，用于执行插入命令。

```
Insert INTO RandomTable VALUES ('val', 'val', 'val', 'val'); 
```

我怎样才能做到这一点？有人对此有什么建议吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-28T10:34:16.793

您可以使用此解决方法将 ParameterName 替换为它的值，但它不好，因为您需要自己管理值格式，并且它可能很慢
，并且您需要在执行 Insert 后获取参数

代码：

```
var usersTableAdapter = new testDataSetTableAdapters.usersTableAdapter();

            usersTableAdapter.Insert(4, "home", "origin", "email@host.com", "realname", "spec", 1, "username", "usernick", "whereform");
            var cmd = usersTableAdapter.Adapter.InsertCommand;
            var text = cmd.CommandText;
            var sb = new StringBuilder(text);
            foreach (SqlParameter cmdParam in cmd.Parameters)
            {
                if (cmdParam.Value is string)
                    sb.Replace(cmdParam.ParameterName, string.Format("'{0}'", cmdParam.Value));
                else
                    sb.Replace(cmdParam.ParameterName, cmdParam.Value.ToString());
            }
            Console.WriteLine(sb.ToString()); 
```

# tsql - TSQL - 如何将查询作为变量执行？

> ID：10781808
> 
> 赞同：19
> 
> 时间：2012-05-28T08:49:41.793
> 
> 标签：tsql, variables

```
DECLARE @query as varchar(200);
SET @query = 'SELECT COUNT(*) FROM table'; 
```

如何执行`@query`，另外，在分配变量时有没有办法直接存储查询结果？

* * *

## 回答 #1

> 赞同：32
> 
> 时间：2012-05-28T08:53:34.470

您可以使用[`sp_executesql`](http://msdn.microsoft.com/en-us/library/ms188001.aspx)with`output`参数来检索标量结果。

```
DECLARE @query as nvarchar(200), @count int;
SET @query = N'SELECT @count = COUNT(*)  FROM table';

EXEC sp_executesql @query, 
                   N'@count int OUTPUT', 
                   @count = @count OUTPUT

SELECT @count AS [@count] 
```

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2012-05-28T08:52:47.963

你可以这样做：

```
exec (@query) 
```

或者，最好是这样：

```
execute sp_executesql @query 
```

有关详细信息，请查看[此 MSDN 文章](http://msdn.microsoft.com/en-us/library/ms188001.aspx)。

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2018-09-19T18:24:55.300

试试这个 ：
``declare @query as varchar(200) select @query = COUNT(*) from table``

# javascript - 制作 Facebook 权限窗口模式

> ID：10781812
> 
> 赞同：0
> 
> 时间：2012-05-28T08:50:09.357
> 
> 标签：javascript, facebook, modal-dialog

我正在使用来自 Facebook JS SDK 的标准代码来获取应用程序的权限（这是一个具有电子邮件权限的示例）：

```
FB.login(function(response) {
    if (!response.authResponse) {
        //user refused to grant permissions, redirect to the 'index' page
        window.location = "/";
    }
}, {scope:"email"}); 
```

当用户试图进入应用程序的页面时（上面的功能是页面加载），会弹出权限请求窗口，但可以移动甚至放入图标，而用户仍然可以查看页面。是否有任何方法可以将权限请求窗口分配为模式窗口？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-28T10:17:12.683

`getLoginUrl()`您可以使用PHP SDK 中的函数让用户登录。这会将用户重定向到完整的 Facebook 登录页面，然后在完成后将其重定向回您的应用程序。

例如`https://www.facebook.com/dialog/oauth?client_id={app_id}&redirect_uri={redirect_url}`

# visual-studio-2010 - 如何在 Visual Studio 中打印 AnkhSVN 的日志历史记录

> ID：10781815
> 
> 赞同：0
> 
> 时间：2012-05-28T08:50:24.450
> 
> 标签：visual-studio-2010, svn, ankhsvn

我在 Visual Studio 中使用 AnkhSVN subversion 构建了一个项目。我想在文本文件或 Word 文档中打印所有日志消息。有谁知道如何做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-14T19:17:15.787

这还不可能。您可以使用命令行工具或 TortoiseSVN 执行此操作

# url - 树分类资源的 RESTful url

> ID：10781816
> 
> 赞同：0
> 
> 时间：2012-05-28T08:50:28.983
> 
> 标签：url, rest, tree, hierarchical-data

我有一个经典的数据模型，其中项目按层次结构树结构分类：

```
example.com/myanimals/pet/dog/{mydog_ID}
example.com/myanimals/pet/cat/{mycat_ID}
example.com/myanimals/birds/{mybirds_ID} 
```

我想公开一个可通过上述 URL 寻址的 RESTful API。

*   当 URL 的最后一个元素是一个项目时，我必须显示该项目以及可能的项目类别的子类别
*   如果最后一个元素是类别，我必须显示其项目及其子类别的列表。

如果我正在处理一个类别或一个项目，那么两种不同的行为。我在 java 上使用 RESTLet 库，现在我的问题是：

1.  通过（理论上）无限的类别路径来处理资源是否是一种 RESTful 方法？
2.  对于这样的数据模型，以 RESTful 方式对 URL 建模的最佳方法是什么？

另一个问题可能是，使用该设计，我必须解析 Animal 之后的所有字符*，*然后测试最后一个元素是类别本身还是项目，最后以适当的表示处理资源。这也意味着我有一个用于类别和项目的命名空间，并且我必须确保类别和项目具有唯一的名称。

**更新**

好的，最后我完成了这个设计：

```
/animals -> read all animals
GET /animals/categories/cat1/cat2 -> read all animals (as a list) and/or subcategories of cat2 (parameterized with query param)
/animals/name -> handle specific animal
/animals/categories -> read root categories
PUT/DELETE/POST /animals/categories/cat1/cat2 -> handle all subcategories of cat2
/animals/tags/tag -> read list of all animals labeled with this tag 
```

*   在第一个设计中，命名空间类别和动物**是冲突**的：路由创建元素存在一个关键问题：POST /informationmodels 应该被路由到动物创建或类别创建？
*   使用 URL 设计 /animals/cat1/cat2/.../animalname 之类的文件系统，如果客户端正在获取动物项目或类别，然后是项目列表，则客户端现在不会这样做。

上面的解决方案似乎正确处理了这些问题，您只需要知道没有名称*类别*或*标签*的动物将是可寻址的，因为这些是保留关键字。

# linux - 导出在我的 shell 脚本中不起作用

> ID：10781824
> 
> 赞同：74
> 
> 时间：2012-05-28T08:51:14.907
> 
> 标签：linux, shell, variables, terminal

我有两个脚本 1.sh 和 2.sh。

1.sh如下：

```
#!/bin/sh
variable="thisisit"
export variable 
```

2.sh如下：

```
#!/bin/sh
echo $variable 
```

根据我阅读的内容，这样做（导出）可以从另一个 shell 脚本访问变量。但这在我的脚本中不起作用。有人可以帮忙吗。提前致谢。

* * *

## 回答 #1

> 赞同：156
> 
> 时间：2012-05-28T08:54:17.537

如果你正在执行你的文件`sh 1.sh`，`./1.sh`那么你正在一个子shell中执行它。

如果您希望在当前 shell 中进行更改，您可以执行以下操作：

```
. 1.sh
# OR
source 1.sh 
```

请考虑通过[参考文档](http://ss64.com/bash/source.html)。

*“当使用`source`[或`.`] 运行脚本时，它在现有的 shell 中运行，脚本创建或修改的任何变量在脚本完成后仍然可用。相反，如果脚本运行为`filename`，则单独的子 shell（带有完全独立的变量集）将被生成以运行脚本。”*

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2012-05-28T08:52:42.470

`export`将变量放在执行 shell 的环境中，以便将其传递给脚本执行的进程，但不会传递给调用脚本的进程或任何其他进程。尝试执行

```
#!/bin/sh
FOO=bar
env | grep '^FOO=' 
```

和

```
#!/bin/sh
FOO=bar
export FOO
env | grep '^FOO=' 
```

看看效果`export`。

要从 to 获取变量`1.sh`，`2.sh`请调用`2.sh`from`1.sh`或 import `1.sh`in `2.sh`：

```
#!/bin/sh
. ./1.sh
echo $variable 
```

# java - KeyFactory.generatePublic 来自硬编码的 X.509 证书

> ID：10781828
> 
> 赞同：2
> 
> 时间：2012-05-28T08:51:45.373
> 
> 标签：java, android, x509

我需要将我的应用程序划分为应用程序和扩展程序。因此，我以 Google Play 下载器库（android-sdk\extras\google\play_apk_expansion\downloader_sample）为例。项目构建良好，但它在

```
byte[] decodedKey = Base64.decode(encodedPublicKey);
KeyFactory keyFactory = KeyFactory.getInstance(KEY_FACTORY_ALGORITHM); // "RSA"
return keyFactory.generatePublic(new X509EncodedKeySpec(decodedKey));<code> 
```

, 在字符串 keyFactory.generatePublic 上。它来自 src\com\google\android\vending\licensing\LicenseChecker.java (android-sdk\extras\google\play_licensing\library\src) 错误：

```
E/AndroidRuntime(523): java.lang.IllegalArgumentException: java.security.spec.InvalidKeySpecException: java.lang.IllegalArgumentException: Bad sequence size: 3 
```

键看起来像：

```
private static final String BASE64_PUBLIC_KEY =
"MIIB5TCCAU6gAwIBAgIET45f9zANBgkqhkiG9w0BAQUFADA3MQswCQYDVQQGEwJVUzEQMA4GA1UE" +
"ChMHQW5kcm9pZDEWMBQGA1UEAxMNQW5kcm9pZCBEZWJ1ZzAeFw0xMjA0MTgwNjMyMjNaFw00MjA0" +
"MTEwNjMyMjNaMDcxCzAJBgNVBAYTAlVTMRAwDgYDVQQKEwdBbmRyb2lkMRYwFAYDVQQDEw1BbmRy" +
"b2lkIERlYnVnMIGfMA0GCSqGSIb3DQEBAQUAA4GNADCBiQKBgQDh2IN5HhCp1X+gLaga06VXr/MZ" +
"JpkzhxMdg5yWyOkj50ZDCPywAh8LcNEih9XjYswAXwRHxZpUy9VFqgGcku33AAdHxyK7KK4ge7u5" +
"a7KY11CJhxMUbOGezGldMUTwBA0ZSuObfW402I4Y4ciAsMrOnhZqSTI/tTdAWv6cPTiJQQIDAQAB" +
"MA0GCSqGSIb3DQEBBQUAA4GBAAZ89R7OMtkQnGpE6s/crqUMysAXOaHktrr6mV/4VknoLHWJUsRg" +
"iv34rAFpd1SDg0HS8HklIymcwFkrewwx9MzryYtZEdBjvo2EeTz5u8nxQNz9sqChaya0oSXB/VI8" +
"nZBnoJ+n5Zbj7QfIgG7thrT4+n4pIDO83+E6zVW6RnIh"; 
```

如果我将密钥更改为随机字符串，我会得到：

```
E/AndroidRuntime(478): java.lang.IllegalArgumentException: java.security.spec.InvalidKeySpecException: java.lang.ClassCastException: com.android.org.bouncycastle.asn1.DERApplicationSpecific cannot be cast to com.android.org.bouncycastle.asn1.ASN1Sequence 
```

我试图生成密钥规范，它不会导致错误，但这不是我需要的：

```
RSAPublicKeySpec pubKeySpec = new RSAPublicKeySpec(new BigInteger("12345678", 16), new BigInteger("11", 16));
KeyFactory keyFactory = KeyFactory.getInstance(KEY_FACTORY_ALGORITHM);
return keyFactory.generatePublic(pubKeySpec); 
```

我重新检查了证书的生成和导出。看起来是正确的。密钥对生成：

```
keytool.exe -genkey -keyalg "RSA" -keysize 2048 -v -keystore key2.store -storepass <storepwd> -keypass <keypwd> 
```

， 出口

```
keytool.exe -export -rfc -storepass <storepwd> -keystore key2.store -file key222.cer 
```

是调试代码。我将在发布时使用来自 Google Play 的公钥。硬编码 x.509 证书并在应用程序中使用它的正确方法是什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-28T09:18:02.800

这不是一个有效的编码公钥，它似乎是一个 Android 调试证书。请注意，公钥 != 证书，尽管证书确实包含公钥。另请注意，任何两个随机 BigInteger 都不构成有效的密钥对（至少它们必须是素数）。要解析一个实际的证书，你需要这样的东西：

```
FileInputStream fis = new FileInputStream(filename);
BufferedInputStream bis = new BufferedInputStream(fis);

CertificateFactory cf = CertificateFactory.getInstance("X.509");
Certificate cert = cf.generateCertificate(bis); 
```

你到底想做什么？

# c - 使用 rabin karp 算法对文件进行切片

> ID：10781832
> 
> 赞同：3
> 
> 时间：2012-05-28T08:52:18.563
> 
> 标签：c, algorithm, rabin-karp

[我编写了 ac 程序，该程序应该使用Rabin Karp 算法](http://en.wikipedia.org/wiki/Rabin%E2%80%93Karp_algorithm)将文件切成块。这是您可以在[此处](http://haishibai.blogspot.fr/2011/03/slicing-files-dynamically-c.html)找到的 ac# 程序的改编版本。

它似乎有效，但仍然存在问题。平均块大小不是预期的。

用法如下：

rabin Prime WindowSize 边界标记文件

在哪里 ：

Rabin 是可执行文件的名称。

素数是一个高素数。例如 100007

WindowSize 是滚动窗口的大小。例如 48

BoundaryMarker 是指纹中设置为 0 的位数

文件是要处理的文件

如果我将 BoundaryMarker 设置为 13，我希望平均块大小为 8K。事实上，它们都不在 8K 左右。

我很难弄清楚我的程序出了什么问题？你能帮助我吗 ？

谢谢

```
#include <stdio.h>
#include <stdlib.h>
#include <unistd.h>
#include <fcntl.h>

unsigned char* buffer;
int windowSize;
int writePointer = 0;
int readPointer = 0;
int dataSize = 0;

unsigned char PushChar(unsigned char c)

{ if (++writePointer >= windowSize) writePointer=0;
  buffer[writePointer]=c;
  dataSize++;
  return(c);
}

unsigned char PopChar(void)

{ if (++readPointer >= windowSize) readPointer=0;
  dataSize--;
  return(buffer[readPointer]);
}

int main(int argc, char *argv[])

{ int fd;
  unsigned char c;

  unsigned long Q;
  unsigned long D=256;
  unsigned long pow=1;
  int i,k,boundary,boundaryMarker,index;
  unsigned char s; 

  if (argc != 5) 
  { printf("\nUsage : rabin Prime WindowSize BoundaryMarker File\n\nwhere :\n");
    printf("Prime is a high prime number. For instance 100007\n\n");
    printf("WindowSize is the size of rolling window. For instance 48\n\n");
    printf("BoundaryMarker is the number of bits set to 0 in a fingerprint\n\n");
    printf("File is the file to process\n\n");
    return(1);
  }

  sscanf(argv[1],"%lu",&Q);
  sscanf(argv[2],"%d",&windowSize);
  sscanf(argv[3],"%d",&boundaryMarker);

  for(i=1,boundary=1;i<=boundaryMarker;i++) boundary=boundary*2;
  boundary --;

  //printf("Q = %lu windowSize = %d boundary = %d\n",Q,windowSize,boundary);

  if ((buffer=(unsigned char*) malloc (sizeof(unsigned char)*windowSize))==NULL) return(1);

  for (k=1; k < windowSize; k++) pow=(pow*D)%Q;
  //printf("pow value %lu\n",pow);

  unsigned long sig=0;
  int lastIndex=0;

  if ((fd=open(argv[4],O_RDONLY))<0) exit(1);

  for (i=0; i <windowSize; i++)
  { read(fd,&c,1);
    PushChar(c);
    sig=(sig*D + (unsigned long)c) %Q;
  }

  //printf("sig value = %lu\n",sig);

  index=0; lastIndex=0;

  while (read(fd,&c,1))
  { 
    s=PopChar();
    //printf("sig = ( %lu + %lu - %lu * %lu %% %lu ) %lu",sig,Q,pow,(unsigned long) s,Q,Q);
    sig = (sig + Q - pow*(unsigned long)s%Q)%Q;
    //printf(" = %lu\n",sig);
    s=PushChar(c);
    //printf("sig2 = ( %lu * %lu + %lu ) %% %lu",sig,D,(unsigned long) s,Q);
    sig = (sig*D + (unsigned long)s)%Q;
    //printf(" = %lu\n",sig);
    index++;
    if ((sig & boundary )==0)
       { if (index - lastIndex >= 2048)
         { printf("sig & boundary = %lu & %lu Index=%d chunk size=%d\n",sig,boundary,index,index-lastIndex);
           lastIndex=index;
     }
       }
    else if (index -lastIndex >=65536)
            { printf("sig & boundary = %lu & %lu Index=%d chunk size=%d\n",sig,boundary,index,index-lastIndex);
              lastIndex=index;
            }
  }
  printf("Index=%d chunk size=%d\n",index,index-lastIndex);

  close(fd);
  return 1;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-10-23T20:21:19.050

在 BoundaryMarker = 13 的情况下运行你的代码，在一兆字节的随机数据上给了我 104 个块，平均块大小为 10082 字节。这与预期的 8192 相差不远。

然而，较小的 BoundaryMarker 值显示出更明显的偏差；*例如，将其设置为 10，平均块大小为 3049 字节，与预期的 1024 相去甚远。设置 BoundaryMarker = 5 产生的平均块大小为2077*字节，甚至远不及预期的 32 字节大小。

更仔细地查看您的代码，这种偏差的明显原因在于以下代码（为清晰起见重新格式化）：

```
if ((sig & boundary ) == 0)
{ if (index - lastIndex >= 2048)
  { printf("sig & boundary = %lu & %lu Index=%d chunk size=%d\n",sig,boundary,index,index-lastIndex);
    lastIndex=index;
  }
}
else if (index - lastIndex >= 65536)
{ printf("sig & boundary = %lu & %lu Index=%d chunk size=%d\n",sig,boundary,index,index-lastIndex);
  lastIndex=index;
} 
```

抑制距前一个边界小于 2048 字节的`if (index - lastIndex >= 2048)`块边界，有效地将小于 2048 字节的块与下一个块合并。`else if (index - lastIndex >= 65536)`同时，检查会*强制*一个人为的块边界，以防止任何块增长超过 65536 字节。

如果这种行为（强制所有块至少为 2048 且最多为 65536 字节长）不是您想要的，您可以简单地删除这些检查，将代码简化为：

```
if ((sig & boundary ) == 0)
{ printf("sig & boundary = %lu & %lu Index=%d chunk size=%d\n",sig,boundary,index,index-lastIndex);
  lastIndex=index;
} 
```

实际上，对于 BoundaryMarker = *n*，至少对于*n* ≤ 12 左右，进行此更改会产生非常接近 2 ^(*n字节的平均块大小。*)

 **对于*n* = 13，似乎确实存在明显的向下偏差，我怀疑这是由于素数 100007 仅约为边界模 2 ^(13)的 12.2 倍。由于签名值或多或少地以素数为模随机分布，因此当进一步减少模 2 ^(13)时，额外的 0.2 会导致它们略微偏向较小的值（包括零） 。

这种偏差可以通过使用更大的素数轻松修复，例如 2 ^(31) -1 = 2147483647。事实上，切换到这个素数会使平均块大小更接近 8192。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2015-10-21T08:11:36.107

您可以尝试更新 BoundaryMarker 的值，可以得到不同的长度。我以这种方式使用RB：[github链接](https://github.com/lxlenovostar/kernel_test/blob/master/model/kernel_hash/chunk.c)。而且我认为长度实际上取决于内容。**

# mysql - 如何加快大量节点的路径查找？

> ID：10781840
> 
> 赞同：1
> 
> 时间：2012-05-28T08:52:50.860
> 
> 标签：mysql, drupal, query-optimization, pathauto

在我为 Drupal 6 站点上的所有节点生成 34000 个 url 别名后，使用 pathauto，该站点开始工作非常缓慢，每个页面加载超过 2 秒。我真的希望我的网站对搜索引擎友好，所以如果每个节点都有自己的 URL，基于它的标题会更好。有什么方法可以加快 drupal 页面别名查找的速度吗？我尝试为 table 上的所有字段创建索引`url_alias`，但没有帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-28T15:35:23.517

您需要使用[Pressflow](http://pressflow.org/)或此补丁[http://drupal.org/node/456824](http://drupal.org/node/456824)

# jquery - 显示一个表单并隐藏另一个在 IE 中不起作用

> ID：10781846
> 
> 赞同：2
> 
> 时间：2012-05-28T08:53:22.940
> 
> 标签：jquery, forms, internet-explorer, show-hide

我想要的只是在隐藏另一个表格时显示一个表格。我试过 .toggle()、.hide()、.show()、.css(display) 等。

我所知道的是它在 FF 中完美运行，而不是在 IE 中，但是当我评论其中一行时，它适用于另一行。原始代码是：

```
$('#form_registro_men').hide();
$('#form_registro_adul').show(); 
```

就如此容易。我还尝试了第二个代码行的 setTimeOut，但它也不起作用。至少知道如何解决问题吗？？？非常感谢！！！：）

添加一些 og HTML

```
 <form method="post" action="./framework/Registro" class="form_registro" id="form_registro_men"  style="display: block">
        <fieldset id='camp_obl'>
                    ...... 
```

```
<form method="post" action="./framework/Registro"  class="form_registro" id="form_registro_adul" style="display: none">
    <fieldset id='camp_obl'>
        .....
</form> 
```

这是两种形式，我试图隐藏第一种并显示第二种，反之亦然。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-28T12:37:38.690

我终于以某种方式解决了...我只是在每个表单之前添加了一个 div 并显示和隐藏它们...我不知道这是否是最好的解决方案...仍然不知道为什么它不适用于表格，但至少我可以继续工作：S

# javascript - 在表格中创建提交按钮

> ID：10781851
> 
> 赞同：0
> 
> 时间：2012-05-28T08:53:36.140
> 
> 标签：javascript, jquery, submit

我`Jquery`用来遍历一个数组并为数组中的每个元素创建一个新的表格行。
在每一行的末尾，我想要一个带有 value 的提交按钮`Add To Cart`。

这是一些相关的代码：

```
var addToCartCell = document.createElement('td');
$(tableRow).append(addToCartCell); 
```

要添加提交按钮，到目前为止我已经尝试过：

```
$("<input type='submit' value='Add To Cart'").appendTo(addToCartCell); 
```

和，

```
$(addToCartCell).append("<input type='submit' value='Add To Cart'"); 
```

但无济于事

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-28T08:57:20.000

在每种情况下，您都缺少一个右尖括号。尝试：

```
$(addToCartCell).append('<input type="submit" value="Add To Cart">'); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-28T08:58:05.887

你错过了结束`/>`

```
$("<input type='submit' value='Add To Cart' />").appendTo(addToCartCell); 
```

# c - 找到第 n 个 count-and-say 序列元素

> ID：10781852
> 
> 赞同：4
> 
> 时间：2012-05-28T08:53:37.793
> 
> 标签：c, string, algorithm

```
Given a problem, the count-and-say sequence is the sequence of integers beginning as     follows:
1, 11, 21, 1211, 111221, ... 
```

1 被读出为“一个 1”或 11。11 被读出为“两个 1”或 21。21 被读出为“一个 2，然后一个 1”或 1211。给定一个整数 n，生成第 n 个序列。

我已经通过扫描每个字符串并相应地生成下一个字符串来制定解决方案它需要时间为 O(nm) 其中 m 是最大字符串的长度，n 是给定的数字

这里是代码

```
void countnsay(char str[][1000],int n)
{
int i=1,k;
int j=0;
while(i<=(n-1))
{
//scan str[i-1]
j=0;
k=0;        //for building the new string array 
while(j<strlen(str[i-1]) )
    {
    char c=str[i-1][j];
    int cnt=1;

    while(c==str[i-1][++j])
    cnt++;

    str[i][k++]=cnt+48;
    str[i][k++]=c;

    }
str[i][k]='\0';
i++;

}
printf("%s",str[n-1]);  
}

int main()
{
int n=5;
char str[1000][1000];
strcpy(str[0],"1");
countnsay(str,n);
return 0;
} 
```

这个问题能有更好的解决方案吗？请提供一些建议/提示。提前感谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-28T09:00:33.187

您可以使用动态编程。一段时间后，您会遇到已经计算过的现有子字符串。您可以保留已计算序列的映射：

```
1 -> 11
11 -> 21 
```

现在你需要计算`1211`.

你先去争取`1`，你已经知道了`11`。

你遇到的`2`。你没有这个，所以计算`12`并将其添加到地图中：

```
2 -> 12 
```

您遇到`11`的 ，同样，您在地图中具有`21`。

连接这些，你得到

```
111221 
```

和新地图

```
1 -> 11
11 -> 21
2 -> 12 
```

编辑：您只寻找连续相同的数字，所以只保留那些在地图上。

# c# - Timer 比 System.Threading.Timer 更可靠

> ID：10781853
> 
> 赞同：8
> 
> 时间：2012-05-28T08:53:38.737
> 
> 标签：c#, .net, timer

我目前以 10 秒的间隔使用 System.Threading.Timer。每次定时器触发时，我都会添加一小段代码写入文件，虽然大部分时间它会按时触发，但有时（大概是在购买应用程序的其余部分时）无法触发 30或 40 秒，然后快速连续地一次又一次地开火。

我可以在 .NET 3.5 中使用更可靠的计时器吗？

定时器设置如下

```
Timer someTimer = new Timer(new TimerCallback(SomeMethod), null, 0, 10000); 
```

...回调是：

```
private static void SomeMethod(object state) 
```

但是，很难提供比这更多的代码，因为 Timer 通常会正确触发。当它嵌入到一个大型应用程序中（大约 100,000 行左右），多个线程被触发时，左、右和中心，你慢慢开始看到计时器间歇性地触发。我看过几篇帖子暗示 ThreadPool 可能已用尽，所以我目前正在查看这是否是我正在经历的。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-05-28T09:03:49.793

在 .net 中引用不同的计时器类

![.net 中的不同 Timer 类](../Images/8f6dd8a08e05afe44c6f0db81b092a2b.png)

.NET 中有三个计时器类，称为“计时器”。听起来您使用的是 Windows 窗体，但实际上您可能会发现 System.Threading.Timer 类更有用 - 但要小心，因为它会回调池线程，因此您无法直接与您的窗体交互回调。

**更准确的计时器 - 根据 MSDN**

Windows 窗体计时器组件是单线程的，精度限制为 55 毫秒。如果您需要更准确的多线程计时器，请使用 System.Timers 命名空间中的 Timer 类。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-05-28T09:38:44.667

这听起来就像线程池饥饿。寻找在线程池中运行的长时间运行/阻塞作业，或者使用异步 io 重写，或者在长时间运行 CPU 密集型作业的情况下，根本不要在线程池中运行这些作业。在自己的线程上运行它们或使用后台工作者。

# javascript - 在 $.ajax() 函数中分配一个变量

> ID：10781855
> 
> 赞同：0
> 
> 时间：2012-05-28T08:53:52.783
> 
> 标签：javascript, jquery, scope

我想在 $.ajax() 函数中分配一个变量，以便下次调用该函数时它仍然可用...

这可能吗？

`var xxx = 1;`没有做这项工作。

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-28T08:55:16.607

变量必须存储在静态位置，例如隐藏输入或数据属性中。

```
$('#hiddenId').val(1);
// Or
$('#someFooId').data('last-ajax-value', 1); 
```

下次调用该函数时，使用它来获取先前的值：

```
var lastValue = $('#hiddenId').val();
// Or
var lastValue = $('#someFooId').data('last-ajax-value'); 
```

[`data`文档：](http://api.jquery.com/data/)

> 描述：存储与匹配元素关联的任意数据

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-28T09:06:13.480

我认为您应该这样做并*避免*为此进行DOM操作...

```
(function($){
    var YourApp = {
        var your_vault : "",

        binders : function(){
            $('#button').on('click',YourApp.ajaxRequest);
        },
        ajaxRequest : function() {
            // Do something with YourApp.your_vault     
            $.ajax({
                url: 'http://someurl.com',
                succes: function(){
                    // Modifying your value:
                    YourApp.your_vault = 'A wonderfull new value';
                }
            });
        }
    };
    YourApp.binders();
})(jQuery); 
```

由于我没有来自您的应用程序的真实代码，因此我无法提供更准确的代码，但我认为您会明白的。

关键思想是范围。每当您将 var 置于较高范围内时，您都可以在较低范围内对其进行修改，**而无需**使用`var`关键字。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-28T09:01:20.877

如果您的变量是在全局级别定义的，那么它可以在许多地方使用。

您需要了解[变量作用域](http://javascript.about.com/library/bltut07.htm)，这同样适用于 javascript，无论它在哪个函数中运行。

# asp.net - 什么用作 asp.net 会员后端？RavenDB 或 SqlServer

> ID：10781856
> 
> 赞同：5
> 
> 时间：2012-05-28T08:53:55.203
> 
> 标签：asp.net, sql-server-2008, asp.net-membership, ravendb

我有一个项目，其中大部分数据计划保存在 RavenDB 中。问题是会员资格。我在 RavenDB 中找不到任何（受信任的、受团队支持、流行的）会员提供程序，我不想创建自定义的（我不确定我是否可以创建一个与 asp.net 的默认值一样完美的） . 所以我认为唯一的方法是使用 sql server 数据库与 RavenDB 一起支持会员操作。

那么有没有我错过的 ravenDB 会员提供程序？

我对这个解决方案（使用 2 个数据库）感到不舒服。我感谢任何建议或解决方案。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-28T10:20:01.963

> 那么有没有我错过的 ravenDB 会员提供程序？

github上有这个：

[https://github.com/martijnboland/RavenDBMembership](https://github.com/martijnboland/RavenDBMembership)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-28T10:27:27.850

我认为这不一定是最好的选择...

但作为另一种观点，您或许可以尝试使用基于 XML 的成员资格提供程序。几年前我使用过一个非常小的定制 CMS，它没有数据库后端。

它可能不适合您，因为我猜测选择 RavenDB 的原因是因为它的可扩展性等，即您可能没有建立一个小型站点 - 但值得一提以防万一。

# javascript - 保护 AJAX API

> ID：10781861
> 
> 赞同：0
> 
> 时间：2012-05-28T08:54:15.200
> 
> 标签：javascript, jquery, security, api

我有一个 API (1)，我在其上使用自己的 AJAX API (2) 构建了一个 Web 应用程序。这样做的原因是不公开源 API。但是，Web 应用程序使用 AJAX（通过 JQuery）从其 AJAX API 获取新数据，检索到的数据当前是 XML。最近，我使用授权算法保护了主要 API (1)。但是，我也想保护 Web 应用程序，使其无法被解析。目前正在对其进行解析以获取用于调用 AJAX API 的哈希，该 API 返回 XML。

我的问题：如何提高安全性并减少其他人能够解析我的 Web 应用程序的可能性。我唯一的想法是：停止发送 XML，而是发送 HTML。使用闪光灯（但是，这不是一个选项）。

我知道由于该站点是公开的，并且无法实现登录，因此很难拒绝访问机器人（非合法用户）。此外，Flash 不是一种选择......它永远不会；）

*编辑*
我所指的 Web 应用程序：[https ://bikemap.appified.net/](https://bikemap.appified.net/)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-28T09:06:14.410

这有点奇怪。您希望锁定您自己的 Web 应用程序所依赖的系统来工作。这几乎总是灾难的根源。

Web 应用程序应该总是被边缘化，所以真正的安全必须来自服务器；缓送、会话令牌、限制等。

如果这已经到位，我看不出有什么理由应该在你自己的 Web 应用程序中跳过箍来给机器人一个更艰难的时间......除非你真的想将人类与机器人分开;-)

减少重构痛苦的一种方法是将`$.ajax`函数包装在一段代码中，该代码可以签署传出请求（或以某种方式向其中添加字段）......然后缩小/模糊该代码并希望它不会得到解码这么快。

# wpf - 一个视图可以有两个视图模型作为它的数据上下文吗？

> ID：10781863
> 
> 赞同：7
> 
> 时间：2012-05-28T08:54:23.313
> 
> 标签：wpf, xaml, binding

我在一个视图中有两个数据网格，但作为这些数据网格的 ItemsSource 的集合位于不同的视图模型中。那么是否可以将这两个数据网格与两个不同视图模型中的集合绑定？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-05-28T09:01:14.730

寻求结合两者的视图模型：

```
public class ViewModelA {
    public ObservableCollection<CustomClass> Items { get; set; }
    /* properties, etc. */
}

public class ViewModelB {
    /* properties, etc. */
}

public class CombiningViewModel {
    public ViewModelA A { get; set; }
    public ViewModelB B { get; set; }
} 
```

绑定可以像

```
<DataGrid ItemsSource="{Binding A.Items}">
    <!-- Sample, not complete -->
</DataGrid> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-28T09:03:56.117

不，不是直接的。不过，您确实有选择：

您可以将视图的 DataCONtext 设置为自身，然后通过单独的属性公开每个视图模型并绑定到这些属性：

```
public class MyView : Window 
{
    public MyView()
    {
        this.DataContext = this;
    }

    public ViewModel1 FirstViewModel { get; set; }

    public ViewModel2 SecondViewModel { get; set; }

} 
```

或者，您可以创建一个包装器视图模型，它要么扩展（继承）其中一个视图模型，要么将它们都包装起来并呈现适当的属性：

```
public class MyCompositeViewModel
{
    public ViewModel1 FirstViewModel { get; set; }

    public ViewModel2 SecondViewModel { get; set; }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-28T09:00:02.183

您可以为每个 DataGrid 而不是容器视图设置 DataContext。

```
<Grid>
   <DataGrid ... DataContext="..." />
   <DataGrid ... DataContext="..." />
</Grid> 
```

或者不要使用 DataContext 并直接绑定到模型

```
<DataGrid ItemsSource="{Binding Source={StaticResource ...}}" /> 
```

# android - Android 相对布局组件对齐

> ID：10781869
> 
> 赞同：0
> 
> 时间：2012-05-28T08:54:37.917
> 
> 标签：android, android-layout

请验证以下相对布局

```
 RelativeLayout objRLActionBar=new RelativeLayout(this);
        objRLActionBar.setId(2534);
        RelativeLayout.LayoutParams objRLActionBarParams=new RelativeLayout.LayoutParams(LayoutParams.FILL_PARENT,(int) (screenHeight*layoutHeights[1]));
        objRLActionBarParams.addRule(RelativeLayout.BELOW,objRLTitleBar.getId()); 
        objRLActionBar.setBackgroundColor(Color.parseColor("#2e4862"));

        ImageView objIVActivityIcon = new ImageView(this);
        objRLActionBar.setId(25324);
        RelativeLayout.LayoutParams objIVActivityIconParams=new RelativeLayout.LayoutParams(LayoutParams.WRAP_CONTENT,LayoutParams.WRAP_CONTENT);
        objIVActivityIconParams.addRule(RelativeLayout.ALIGN_PARENT_LEFT,objRLActionBar.getId());
        objIVActivityIcon.setLayoutParams(objIVActivityIconParams);
        objIVActivityIcon.setImageResource(R.drawable.home_def);
        objIVActivityIcon.setPadding(2, 0, 2, 0);
        objRLActionBar.addView(objIVActivityIcon);  

        ImageView objIVSeperator = new ImageView(this);
        objIVSeperator.setId(25342);
        RelativeLayout.LayoutParams objIVSeperatorParams=new RelativeLayout.LayoutParams(1,LayoutParams.FILL_PARENT);
        objIVSeperatorParams.addRule(RelativeLayout.RIGHT_OF,objIVActivityIcon.getId());
        objIVSeperator.setLayoutParams(objIVSeperatorParams);
        objIVSeperator.setImageResource(R.drawable.separator);
        objIVSeperator.setBackgroundColor(Color.parseColor("#1f3449"));  
        objRLActionBar.addView(objIVSeperator);  

        TextView objTVPageName = new TextView(this);
        RelativeLayout.LayoutParams objTVPageNameParams=new RelativeLayout.LayoutParams(LayoutParams.WRAP_CONTENT,LayoutParams.WRAP_CONTENT);
        objTVPageNameParams.addRule(RelativeLayout.RIGHT_OF,objIVSeperator.getId());
        objTVPageName.setLayoutParams(objTVPageNameParams);
        objTVPageName.setTextColor(Color.WHITE);
        objTVPageName.setTextSize(TypedValue.COMPLEX_UNIT_PX,18+sizeAdjust);
        objTVPageName.setText("House Details"); 
        objTVPageName.setTypeface(null, Typeface.BOLD);
        objTVPageName.setPadding(2, 0, 2, 0);
        objRLActionBar.addView(objTVPageName);  

        objRLBody.addView(objRLActionBar,objRLActionBarParams); 
```

输出如下图所示 ![在此处输入图像描述](../Images/241b75466b7169bfe20ab3ebda5a48a0.png)

图像与文本重叠，“分隔图像”排在第一位！我需要按 objIVActivityIcon、objIVSeperator、objTVPageName 的顺序排列的组件。上面的代码有什么问题请帮忙...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-28T09:12:29.537

```
objRLActionBar.setId(25324); 
```

应该

```
objIVActivityIcon.setId(25324); 
```

# mysql - 比较并选择三个最佳结果

> ID：10781878
> 
> 赞同：0
> 
> 时间：2012-05-28T08:55:21.940
> 
> 标签：mysql, database

我在下面有四个表表名：

1.  名称_tbl
2.  Sports_tbl
3.  Arts_tbl
4.  科学_tbl

所有的表都由一个唯一的 id 连接，比如 'name_id'，它是表 'Name_tbl' 的主键。现在我将查询一个名称（在 Name_tbl 中）并假设它返回 10 个结果。我必须根据存储在“Sports_tbl、Arts_tbl、Science_tbl”中的平均得分显示 3 个最好的三个结果。那么使用 Mysql 的最佳解决方案是什么。由于第一个实例返回的结果可以达到 100 或更多。

谢谢，任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-28T09:29:32.767

试试这个（假设数字存储在每个表的分数列中）：

```
SELECT name_tbl.*, ( (arts_tbl.score+science_tbl.score+sports_tbl.score)/3 ) as avg_score
FROM name_tbl 
LEFT JOIN arts_tbl ON name_tbl.name_id = arts_tbl.name_id 
LEFT JOIN sports_tbl ON name_tbl.name_id = sports_tbl.name_id 
LEFT JOIN science_tbl ON name_tbl.name_id = science_tbl.name_id 
ORDER BY avg_score DESC
LIMIT 3 
```

# javascript - 我在 Three.js 中的 SpotLights 和阴影做错了什么

> ID：10781879
> 
> 赞同：0
> 
> 时间：2012-05-28T08:55:23.283
> 
> 标签：javascript, 3d, webgl, shadow, three.js

我有一个非常简单的场景，其中有一个 .dae 网格，网格下方有一个 7000*7000 的平面。我希望它被高光照亮`SpotLight`，所以网格会在地面上投下阴影。但是，好像有什么东西坏了！不管我把它放多高`SpotLight`，它都不会点亮飞机！此外，当它位于一个小正方形（周长）时，它只会稍微点亮网格。

你可以在这里看到情况： ![截图1，几乎一切都是黑暗的](../Images/9988019430b26aacadd02488a1727e32.png)

一旦我移动网格（一个怪物），它就不会再亮了。

这就是我实例化灯光的方式：

```
// create a spotlight
self.spotLight = new THREE.SpotLight();

// set its position
self.spotLight.position.y = 1000; //I recon it needs to be relatively high so it lights up everything
self.spotLight.position.x = 0; //(0, 0) are the coordinates where the mesh is spawned, and are the center of the plane
self.spotLight.position.z = 0;
self.spotLight.castShadow = true; 
```

飞机是这样制造的：

```
//The plane.
self.plane = new THREE.Mesh(new THREE.PlaneGeometry(self.groundSize, self.groundSize), new THREE.MeshLambertMaterial({color: 0x5C8A00}));
self.plane.receiveShadow = true;
self.plane.position.x = 0;
self.plane.position.y = -26;
self.plane.position.z = 0; 
```

另外，这是另一张图片，这一次，我添加了很多`PointLights`：

![截图2，一切都亮了。](../Images/ece66a4601760d7fdb4b9c321dda584e.png)

你可以看到阴影是如何消失的！

现在，我在这里做错了什么？AFAIK，光应该在各个方向均匀分散！此外，还有一个问题，我似乎无法在场景中添加多个 SpotLights！如果我这样做，一切都会完全减慢 - 这是故意的吗？也许是因为我对它们都启用了阴影...

@Neil，您的代码中也会发生同样的事情！

![在此处输入图像描述](../Images/7fd7b5063a7faba86783c04d8076370b.png)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-29T13:29:57.910

我创建了一个[jsfiddle](http://jsfiddle.net/SCXNQ/123/)，显示了一个带有 Lambert 材料的平面和一个正在投射阴影的旋转立方体，也许你可以看到与你的不同的地方。

**编辑**

尝试使用一些参数，我可以在演示中停止剪辑：

```
spotLight.shadowCameraFov = 70; 
```

更新[演示](http://jsfiddle.net/SCXNQ/123/)和移动[演示](http://jsfiddle.net/SCXNQ/124/)

# javascript - 动态创建的 iframe 触发 onload 事件两次

> ID：10781880
> 
> 赞同：37
> 
> 时间：2012-05-28T08:55:24.883
> 
> 标签：javascript, iframe

我动态创建了一个 iframe，发现这个 iframe 触发了两次 onload 事件。

```
var i=0;
frameOnload=function(){
  console.log(i++);  
};

var ifr=document.createElement("iframe");  
ifr.src="javascript:(function(){document.open();document.write('test');document.close();})();";
ifr.onload=frameOnload;  
document.body.appendChild(ifr); 
```

为什么我终于是1？
如何防止 iframe 的 onload 两次，而不是将 onload 函数指向自身内部的 null？

* * *

## 回答 #1

> 赞同：66
> 
> 时间：2013-04-08T13:33:40.497

我也遇到了同样的问题，但没有得到任何答案，所以我自己测试了。

如果在 iframe 附加到正文之前附加 onload 事件，则 iframe onload 事件将在 webkit 浏览器 ( safari/chrome ) 中触发两次。

因此，您可以通过以下方式更改代码来防止 iframe 加载两次。

```
document.body.appendChild(ifr);
ifr.onload=frameOnload; // attach onload event after the iframe is added to the body 
```

然后，您只会得到一个 onload 事件，即文档真正加载的事件。

* * *

## 回答 #2

> 赞同：23
> 
> 时间：2016-07-19T13:10:58.800

扩展投票最多的答案：*如果您无法控制将事物附加到 DOM 的时间和方式——例如，在使用框架时*（我们在 Angular 应用程序中发生了这种情况）——*您可能想要尝试以下解决方案。*

我进行了繁重的跨浏览器测试，发现了以下解决方法：**检查传递给`onload`回调的参数并`evt.target.src`在事件侦听器中进行检查。**

```
iframe.onload = function(evt) {
    if (evt.target.src != '') {
        // do stuff
    }
} 
```

（如果您从 HTML 调用全局方法，请记住传入`event`您的 HTML 标记`<iframe onload="window.globalOnLoad(event)">`：）

`evt.target.src`根据我的测试，在第一次调用`''`中只能在 webkit 中是（空字符串）。`onload`

# *不同情况下 iframe 加载行为的研究*

```
iframe.onload = function(evt){
    console.log("frameOnload", ++i);
    console.log("src = '" + evt.target.src + "'");
}; 
```

## 具有常规 URL 的 iframe 加载行为

```
// Chrome:  onload 1 src='', onload 2 src=requestedSrc
// IE11:    onload 1 src=requestedSrc
// Firefox: onload 1 src=requestedSrc
document.body.appendChild(iframe);
iframe.src = "http://www.example.org/"; 
```

## 带有 404 URL 的 iframe 加载行为

```
// Chrome:  onload 1 src='', onload 2 src=requestedSrc
// IE11:    onload 1 src=requestedSrc
// Firefox: onload 1 src=requestedSrc
document.body.appendChild(iframe);
iframe.src = "http://www.example.org/404"; 
```

## 具有不可解析（在 DNS 级别）URL 的 iframe 加载行为

```
// Chrome:  onload 1 src='', onload 2 src=requestedSrc
// IE11:    onload 1 src=requestedSrc
// Firefox: onload NEVER triggered!
document.body.appendChild(iframe);
iframe.src= 'http://aaaaaaaaaaaaaaaaaaaaaa.example/'; 
```

## 在附加到 DOM 之前`iframe.src`显式设置为的iframe 加载行为`about:blank`

```
// Chrome:  onload 1 src='about:blank', onload 2 src=requestedSrc
// IE11:    onload 1 src=requestedSrc
// Firefox: onload 1 src=requestedSrc
iframe.src = "about:blank";
document.body.appendChild(iframe);
iframe.src = "http://www.example.org/"; 
```

## `iframe.src`在附加到 DOM 之前显式设置为 javascript 表达式的iframe 加载行为

```
// Chrome:  onload 1 src='javascript:void 0', onload 2 src=requestedSrc
// IE11:    onload 1 src=requestedSrc
// Firefox: onload 1 src=requestedSrc
iframe.src = "javascript:void 0";
document.body.appendChild(iframe);
iframe.src = "http://www.example.org/"; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2018-11-29T10:15:45.763

我在异步加载的样式表上遇到过这种情况，比如这个。

```
<link rel="preload" href="stylesheet.css" as="style" onload="this.rel='stylesheet'"> 
```

我发现最简单的解决方案是让事件自行删除：

```
<link rel="preload" href="stylesheet.css" as="style" onload="this.removeAttribute('onload'); this.rel='stylesheet'"> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-07-19T08:34:23.433

FWIW，虽然我能够`onload`在 where `iframe.src`is的情况下重现双倍`javascript:`，但我无法使用普通的 HTTP URL 重现它（onload 发生了一次）。但是，当您更改调用顺序以便`iframe.src`在附加到正文之后设置时，就会发生双重加载（同样，仅限 webkit）：

```
var i = 0;

var iframe = document.createElement("iframe");
iframe.onload = function(){
  console.log("frameOnload", ++i);
};
document.body.appendChild(iframe);
iframe.src = "http://www.example.org/";
//iframe.src = "http://www.example.org/404";

// double onload! 
```

当我**在附加之前****分配`src`**时，我接到一个`onload`电话。

```
var i = 0;

var iframe = document.createElement("iframe");
iframe.onload = function(){
  console.log("frameOnload", ++i);
};
iframe.src = "http://www.example.org/";
//iframe.src = "http://www.example.org/404";
document.body.appendChild(iframe);

// only one onload 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2019-06-19T08:02:18.560

这里的代码很好用！

信用：@Dave Stolie [https://coderanch.com/t/443223/languages/Frames-loading-refresh](https://coderanch.com/t/443223/languages/Frames-loading-refresh)

```
<html>  
 <head>  
   <script type="text/javascript">  
     function loadFrame()  
     {
        var url="http://www.google.com";
        alert(document.getElementById("theFrame").src);

        if (document.getElementById("theFrame").src != url)
        {
            alert("loading");
            document.getElementById("theFrame").src = url;  
        }
     }  
   </script>  
   </head>  
   <body onLoad="loadFrame();">  
   <iframe id="theFrame" src="x"/>
  </body>  
  </html> 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2020-06-08T14:59:21.083

基于@jakub.g 的回答：

从框架内部，`evt.target.src`hack 不起作用。但我发现我可以改为检查`evt.target.title`. 第二次`DOMContentLoaded`被触发，`evt.target`指向正在加载的文档，所以这会起作用：

```
document.addEventListener('DOMContentLoaded', function(evt) {
  if (evt.target.title !== myPageTitle) {
    // Work around for Webkit browsers trigging this event twice om iframes
    return
  }
  // DOM content loaded, for real
} 
```

即使在 Internet Explorer 中，这种行为似乎也是一致的（保存旧版本没有`.addEventListener`

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2021-02-26T12:47:45.343

我在 vue.js 2.6.12 中遇到了这个问题，
我通过检查 event.target.url 是否与 iframe 的 onload 函数中的 src url 匹配来处理它。

```
<template>
           <iframe
                @load="onLoad"
                :src="embedUrl"
                ref="cardNumber"
                frameborder="0"
                scrolling="no"
                width="100%"
                height="100%"
                align="left"
            ></iframe>
</template>

<script>
export default {
...,
methods: {
onLoad (event) {
    // considerting iframe to be loaded if the event.target.url matches the src url
    if(event.target.src === this.embedUrl)) {
      // instructions after loading
    } 
   }
 }
}
</script> 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2021-03-18T06:36:32.990

```
Register for onload event after appending iframe. This solves my problem.
document.body.appendChild(ifr);
ifr.onload=frameOnload;  

E.G:
iframeContainer.appendChild(iframe)
  iframe.onload = function() {
    console.log("iframe onload called")
  iframeContainer.appendChild(iframe)
  iframe.onload = function() {
    console.log("iframe onload called")
  }  

  } 
```

# java - 或匹配的正则表达式

> ID：10781886
> 
> 赞同：1
> 
> 时间：2012-05-28T08:55:34.547
> 
> 标签：java, regex

我有一个可以以任一结尾的字符串

```
"/" 
```

或者

```
"/?secure=true" 
```

我需要验证它。我试过这个

```
\b(/(/?secure=true)?)\b 
```

但我没有找到与正则表达式匹配的匹配项。然而，随着

```
^(/(\$secure=true)?)$ 
```

找到匹配。但这在我的情况下无济于事，因为我要验证的字符串将以诸如`"thisismystring/"`or之类的字符作为前缀`"thisismystring/?secure=true"`。

我想知道该怎么做。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-28T08:58:26.740

您需要使用管道符号 (|) 来指定或：

```
(/|/\?secure=true)$ 
```

您还需要像这里一样转义问号，并且应该指定字符串结尾的“$”而不是字符串开头的“^”。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-05-28T09:00:11.917

两种情况都将包含

```
/ 
```

所以这不应该在可选部分。

你把可选部分放在（）？

并用反斜杠转义问号

```
/(\?secure=true)? 
```

为了表明它应该以此结尾，你把 $ 放在最后

```
/(\?secure=true)?$ 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-28T09:00:35.430

可以这样做：

```
/(\?secure=true)?$ 
```

# xml - 嵌入式 Linux 上的 RESTful Web 服务实现（c/c++）

> ID：10781894
> 
> 赞同：2
> 
> 时间：2012-05-28T08:56:25.137
> 
> 标签：xml, rest

我正在研究嵌入式 Linux（在 BeagleBone 上运行），我希望 RESTful Web 服务能够在我的板上运行。

我的目标是将数据（以 XML 格式）发送/接收到网络服务器。

我的 ARM 板上不支持 Java，那么我可以使用哪个源包来实现 RESTful？

我正在尝试工作人员，但它似乎没有工作。欢迎任何关于 RESTful 的帮助。

# sql-server - 使用 MSSQL 在 Windows 7 上进行字符编码

> ID：10781898
> 
> 赞同：1
> 
> 时间：2012-05-28T08:56:39.663
> 
> 标签：sql-server, delphi, windows-7, character-encoding

早些时候，我在 Delphi 7 中开发了一个连接到 MSSQL 服务器的应用程序。
在 Windows 7 上，某些字符`(ő, ű)`是错误的，它显示`o`和`u`.
MSSQL的整理好，客户端的区域设置好（包括非unicode程序的设置）。
我使用 UniDAC 组件进行数据库连接。

我认为程序无法正确读取区域设置（我不知道为什么，可能是因为不推荐使用的 windows API）并且组件将字符编码设置为默认值。

有人可以帮我解决这个问题。有什么办法可以为连接手动设置字符编码？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-28T19:29:26.383

问题是 Delphi 7 不支持 unicode。

您需要使用支持 Unicode（Delphi 2009）的 Delphi 版本默认使用它们。

请参阅：[在 Delphi 7 中使用 Unicode 字符串以](https://stackoverflow.com/questions/2281223/working-with-unicode-strings-in-delphi-7)
获得一些帮助，但我怀疑 Delphi-7 的 db-driver 是否支持宽字符串。

# javascript - 单击后如何制作翻转棒？

> ID：10781902
> 
> 赞同：0
> 
> 时间：2012-05-28T08:57:24.737
> 
> 标签：javascript, jquery, css, cookies, sprite

我正在使用图像精灵进行按钮导航。我希望它们在被点击后保持“滚动”（即使在更改站点时）。当再次单击它们时，它们应该恢复正常。

我对javascript真的很陌生，但肯定有办法让它工作。

一个按钮如下所示：

```
<a class="contact" href="#" >Contact</a> 
```

和 css，让它们滚动：

a.联系{

```
display: block;  
width: 30px;  
height: 31px;
margin-right:39px;
float:right;
background: url(../img/navcontact.png) no-repeat bottom;
text-indent: -10000px; 
```

}

一：悬停。联系{

```
background-position: 0 0; 
```

}

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-28T09:04:08.693

使用 jQuery。这是演示 - [http://jsfiddle.net/VLqq6/](http://jsfiddle.net/VLqq6/)

# zebra-printers - 带 CPCL 的 Zebra 打印机中的自动换行/回车

> ID：10781903
> 
> 赞同：3
> 
> 时间：2012-05-28T08:57:25.843
> 
> 标签：zebra-printers

我正在使用 Zebra 打印机 MZ 320 通过蓝牙进行打印。我有一些比纸更宽的文本，我希望它们分几行打印。现在，当文本超出页面宽度时，它只是与同一行上的先前打印文本重叠打印。我希望打印机添加回车，有什么命令可以做到这一点吗？

# c - 使用三重指针将内存分配给 3D 数组

> ID：10781904
> 
> 赞同：4
> 
> 时间：2012-05-28T08:57:28.960
> 
> 标签：c, pointers, memory-management, multidimensional-array

我必须使用三重指针将内存分配给 3D 数组。

```
#include <stdio.h>
int main()
{
    int m=10,n=20,p=30;
    char ***z;
    z = (char***) malloc(sizeof(char**)*m*n*p);
    return 0;
} 
```

这是正确的做法吗？（我认为我所做的是不正确的。）

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-28T09:03:42.017

要完全分配 3D 动态数组，您需要执行以下操作：

```
#include <stdio.h>
#include <stdlib.h>

int main()
{
    int m=10,n=20,p=30;
    char ***z;

    z = malloc(m * sizeof(char **));
    assert(z != NULL);
    for (i = 0; i < m; ++i)
    {
        z[i] = malloc(n * sizeof(char *));
        assert(z[i] != NULL);
        for (j = 0; j < n; ++j)
        {
            z[i][j] = malloc(p);
            assert(z[i][j] != NULL);
        }
    }
    return 0;
} 
```

释放数据留给读者作为练习。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-05-28T09:04:51.877

无需`malloc()`在 C 中强制转换 , 的返回值。

如果您希望`m * n * p`直接存储字符（并自己计算地址），那么您当然不应该按 a 的大小来缩放分配 `char **`。

你的意思是：

```
int m = 10, n = 20, p = 30;
char *z = malloc(m * n * p * sizeof *z); 
```

这将分配 10 * 20 * 30 = 6000 字节。这可以看作是形成一个高度的立方体，`p`沿垂直轴的每个“切片”都是`n * m`字节。

由于这是用于手动寻址，因此您不能使用 eg`z[k][j][i]`来索引，而必须使用`z[k * n * m + j * m + i]`.

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-28T11:58:59.780

如果您不需要在单个连续块中分配内存（IME 是通常的情况），您可以执行以下操作：

```
char ***z;
z = malloc(sizeof *z * m); // allocate m elements of char **
if (z)
{
  int i;
  for (i = 0; i < m; i++)
  {
    z[i] = malloc(sizeof *z[i] * n); // for each z[i], 
    if (z[i])                        // allocate n elements char *
    {
      int j;
      for (j = 0; j < n;j++)
      {
        z[i][j] = malloc(sizeof *z[i][j] * p); // for each z[i][j], 
        if (z[i][j])                           // allocate p elements of char
        {
           // initialize each of z[i][j][k]
        }
      }
    }
  }
} 
```

请注意，您需要以相反的顺序释放此内存：

```
for (i = 0; i < m; i++)
{
  for (j = 0; j < n; j++)
    free(z[i][j];
  free(z[i]);
}
free(z); 
```

如果您*确实*需要将内存分配到一个连续的块中，那么您有几个选择。您可以分配一个块并手动计算偏移量：

```
char *z = malloc(sizeof *z * m * n * p); // note type of z!
...
z[i * m + j * n + k] = some_value(); 
```

当你完成后，你只需要做一个`free`：

```
free(z); 
```

如果您有支持可变长度数组的 C99 编译器或 C11 编译器，则可以执行以下操作：

```
int m=..., n=..., p=...;
char (*z)[n][p] = malloc(sizeof *z * m); 
```

这声明`z`为指向`n`x`p`数组的指针`char`，我们分配`m`这样的元素。内存是连续分配的*，*您可以使用普通的 3-d 数组索引语法 ( `z[i][j][k]`)。像上面的方法一样，你只需要一个`free`调用：

```
free(z); 
```

如果您没有支持 VLA 的 C99 编译器或 C11 编译器，则需要 make`n`和`p`编译时常量，例如

```
#define n 20
#define p 30 
```

否则最后一种方法是行不通的。

**编辑**

`m`在这种情况下，不需要是编译时常量，只需`n`and `p`。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-28T09:04:14.930

您将需要以下嵌套循环 -

```
z = (char**)malloc(sizeof(char*) * m);
for (int i = 0; i < m; ++i)
{
    *(z + i) = (char*)malloc(sizeof(char*) * n);
    for (int j = 0; j < n; ++j)
    {
        *(*(z + i)) = (char)malloc(p);
    }
} 
```

可能在语法上不准确，但应该是这样的。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-28T09:05:01.687

你`sizeof(char)`不想要`sizeof(char**)`，因为后者会给你一个指针的大小，在大多数现代系统上它将是 4 个字节，而不是你期望的 1 个字节。

# django - 如何在 Django 视图中进行多次保存对象调用，但只提交一次

> ID：10781911
> 
> 赞同：1
> 
> 时间：2012-05-28T08:58:01.523
> 
> 标签：django, model, save, commit

我有一个 Django 视图，在其中我在*多个*`my_model.save()`位置（有条件地）调用单个对象。是一个普通的模型类。*`my_model`*

 *`save()`在 Django 中一次提交，因此，在最坏的情况下，数据库会被多次命中。为了防止这种情况，我定义了一个布尔变量`save_model`并将其设置为`True`在对象修改的情况下。在我的视图结束时，我检查这个布尔值并调用`save`我需要的对象。

有没有更简单的方法来做到这一点？我尝试将 Djangos`transaction.commit_on_success`作为视图装饰器，但无论如何保存调用似乎都会排队并提交。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-28T09:05:32.373

您可以在代码中的任何地方使用事务支持，Django 文档明确表示：

> 尽管下面的示例使用视图函数作为示例，但这些装饰器和上下文管理器可以在您需要处理事务的代码中的任何位置使用

但这不是交易的目的。您可以使用一些现有的应用程序来摆脱布尔变量，例如[django-dirtyfields](https://github.com/smn/django-dirtyfields)。

但它闻起来像一个糟糕的设计。为什么需要`save`多次调用？你确定没有办法只调用一次吗？

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-28T09:06:23.573

您可以查看[django-dirtyfields](http://code.activestate.com/pypm/django-dirtyfields/)。

只需将`DirtyFieldsMixin`其用作模型的 mixin。然后，您将能够`obj.is_dirty()`在执行`save()`.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-28T09:08:36.287

可以有两种方法......但它们是相似的......第一个是`save()`在返回响应之前调用。

```
def my_view(request):
    obj = Mymodel.objects.get(...)
    if cond1:
        obj.attr1 = True
    elif cond2:
        obj.attr2 = True
    else:
        obj.attr1 = False
        obj.attr2 = False
    obj.save()
    return ....... 
```

第二个是你的方法......

但是没有其他方法可以做到这一点，除非您定义自己的装饰器或做一些其他方法，但实际上您需要检查您的模型是否有任何修改（或者您想保存对数据的更改）。*

# c# - 按自定义顺序对字符串数组进行排序

> ID：10781914
> 
> 赞同：4
> 
> 时间：2012-05-28T08:58:15.820
> 
> 标签：c#, sorting, arrays

我想以我提到的相同顺序对字符串数组中的一组固定字符串进行排序，例如“文本文件”、“图像文件”、“音频文件”、“视频文件”、“应用程序文件”、“其他文件” .

Example1，如果我的字符串数组输入是这样的

```
inputval[0] = "Other files";
inputval[1] = "Image files";
inputval[2] = "Text files"; 
```

我的输出数组应该有这样的值

```
outputval[0] = "Text files";
outputval[1] = "Image files";
outputval[2] = "Other files"; 
```

示例2，如果我的字符串数组输入是这样的

```
inputval[0] = "Application files";
inputval[1] = "Image files";
inputval[2] = "Video files"; 
```

我的输出数组应该有这样的值

```
outputval[0] = "Image files";
outputval[1] = "Video files";
outputval[2] = "Application files"; 
```

请有人可以帮助我实现这一目标

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-05-28T09:15:36.267

`IComparer<string>`这种使用提供给`Array.Sort`作品的粗略实现。有各种潜在的缺点，但我会把这些留给你（比如字符串需要完全匹配，否则它们将无法正确排序）。

它只是使用代表正确顺序的内部字符串列表，然后将它们在该列表中的序数相互比较。

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;

namespace ConsoleApplication61
{
    class Program
    {
        static void Main(string[] args)
        {
            string[] files = new[] { "Audio Files", "Text Files", "Video Files", "Other Files", "Application Files" };
            Array.Sort(files, new FileComparer());
            Console.Read();
        }
    }

    class FileComparer : IComparer<string>
    {
        static List<string> OrderedFiles = new List<string> { "Text Files", "Image Files", "Audio Files", "Video Files", "Application Files", "Other Files" };

        public int Compare(string x, string y)
        {
            int xi = OrderedFiles.IndexOf(x);
            int yi = OrderedFiles.IndexOf(y);

            if (xi > yi)
                return 1;

            if (xi < yi)
                return -1;

            return 0;
        }
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-28T09:07:58.247

实现 an`ICompare`然后您可以使用`OrderBy`with an`ICompare`来获得您的自定义排序。查看[MSDN ICompare 文章](http://msdn.microsoft.com/en-us/library/bb549422)

即类似的东西，

```
public class MyCompare : ICompare<string>
{
    // Because the class implements IComparer, it must define a 
    // Compare method. The method returns a signed integer that indicates 
    // whether s1 > s2 (return is greater than 0), s1 < s2 (return is negative),
    // or s1 equals s2 (return value is 0). This Compare method compares strings. 
    public int Comapre(string s1, string s2)
    {
        // custom logic here
    }
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-28T09:09:03.017

因为你想要的东西不是很清楚。所以我考虑到不会有重复`inputval`。

```
string[] fixed_array =  { "Text files", "Image files", "Audio files", 
                        "Video files", "Application Files", "Other files" }; 
```

让我们说

```
inputval[0] = "Other files";
inputval[1] = "Image files";
inputval[2] = "Text files"; 
```

做这个

```
string[] outputval =
          fixed_array.Select(x => inputval.Contains(x) ? x : "-1")
                     .Where(x => x != "-1").ToArray(); 
```

`outputval`也会如此

```
outputval[0] = "Text files";
outputval[1] = "Image files";
outputval[2] = "Other files"; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-28T09:10:04.547

只需在开头附加数字的字符串并将其添加到排序列表中..

比如“0，文本文件”，“1，图像文件”，“2，音频文件”，“3，视频文件”，“4，应用程序文件”，“4，其他文件”

然后在使用时删除“，”之前的字符串..

# css - 如果 a 无法更改背景颜色 有一个特定的 id

> ID：10781916
> 
> 赞同：0
> 
> 时间：2012-05-28T08:58:24.937
> 
> 标签：css, html-lists, stylesheet

我有一个无序列表，其中每个`<li>`都有不同的 ID 和白色背景。现在当 id = me ( `<li id="me">`) 它应该将背景颜色更改为红色而不是白色。

请看我的小提琴：http: [//jsfiddle.net/mauricederegt/s2dHJ/](http://jsfiddle.net/mauricederegt/s2dHJ/)

我试过了：

```
#overview li, #me {
blabla
}
#me {
    background-color: #FF0000;
} 
```

和

```
#overview li, #me li {
blabla
}
#me li{
    background-color: #FF0000;
} 
```

等，但没有一个工作

希望有一个解决方案。

亲切的问候，

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-28T09:01:02.077

像这样写：

```
#overview #me {
    background-color: #FF0000;
} 
```

因为权力`#overview li`多了呢`#me`。所以对于覆盖我们必须像这样定义`#overview #me`。

检查这个[http://jsfiddle.net/s2dHJ/2/](http://jsfiddle.net/s2dHJ/2/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-28T09:00:41.207

试试这个：

```
#me {
    background-color: #FF0000 !important;
} 
```

看[这里](http://jsfiddle.net/s2dHJ/1/)

尽管我不建议使用 ，但`!important`您似乎有其他样式覆盖了您想要的样式。要么修复所有样式，以便它们继承您希望它们的方式，要么如图所示强制它。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-28T09:02:52.040

给 div 容器一个类而不是一个 id。ID 比 CSS 中的类要严格得多。因此，ID 会覆盖其继承类的属性。

```
<div class="overview">
    <ul>
        <li id="1234">
             This one should have a WHITE bg    
        </li>
        <li id="me">
             This one should have a RED bg    
        </li>
        <li id="567">
            This one should have a WHITE bg    
        </li>
    </ul>
</div>​

.overview {
   padding-top: 30px;
   background-color: #2daebf;
   height: 468px;
   width: 182px;
}
.overview li {
   list-style: none;
   float: left;
   width: 160px;
   padding: 3px;
   background-color: #FFF;
   border-radius: 3px;
   margin: 0 7px 3px 7px;
} 
```

# image - 无法使用 lighttpd 和 tomcat 获取静态文件

> ID：10781932
> 
> 赞同：2
> 
> 时间：2012-05-28T09:00:11.527
> 
> 标签：image, tomcat, rewrite, alias, lighttpd

我正在使用 lighttpd 和运行在后面的 tomcat。我希望 lighttpd 处理所有静态文件，如图像/css。这是我的配置：

```
$HTTP["host"] =~ "www.example.com" {
    alias.url = ( "/images_deal/" => "/home/deal/projects/deal/images/" )   
    alias.url += ( "/statics_deal/" => "/home/deal/workspace2/dolo/statics/" )  
    proxy.server = ( "" =>                 
        ( "tomcat" =>
            (
                "host" => "127.0.0.1",
                "port" => 8080,
                "fix-redirects" => 1
             )
        )
    )
}

server.modules = (  "mod_access",  "mod_alias",  "mod_redirect",  "mod_rewrite",) 
```

问题是我无法访问像[http://www.example.com/images_deal/img.png这样的 url 上的图像](http://www.example.com/images_deal/img.png)

我编写了一个新的 lighthttpd 配置，可以访问静态文件，但现在的问题是我无法直接访问我的 tomcat 上下文，我的意思是：将所有请求 www.example.com 重写为 www.example.com/dolo/ 之前将其传递给 tomcat（因为 tomcat 有多个上下文。新配置

```
 alias.url = (
        "/images_deal" => "/home/deal/projects/deal/images/",
        "/statics_deal/"      => "/home/deal/workspace2/dolo/statics/",
    )
  $HTTP["url"] !~ "^(/statics_deal/|/images_deal/)" {
   url.rewrite-once = ( "^/(.*)" => "/dolo/$1", )      
   proxy.server = ( "" =>
                 ( "tomcat" =>
                   (
                     "host" => "127.0.0.1",
                     "port" => 8080,
                     "fix-redirects" => 1
                   )
                 )
              )
  }
} 
```

# javascript - 当我只知道它是“名称”属性时，如何通过 jQuery 设置输入元素的值

> ID：10781934
> 
> 赞同：1
> 
> 时间：2012-05-28T09:00:17.947
> 
> 标签：javascript, jquery

我需要重置一些只有唯一名称（不是唯一 ID）的文本框。我用 jQuery 尝试过，但我的代码似乎什么也没做：

```
$('input[name=customergroupname]').value=""; 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-28T09:03:53.420

试试这个：

```
$('input[name="customergroupname"]').val(""); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-28T09:04:27.337

使用 jQuery`val`函数获取和设置包裹在 jQuery 对象中的表单元素的值：

```
$('input[name="customergroupname"]').val(""); 
```

`.value`只能用于 DOM 元素，如下所示：

```
$('input[name="customergroupname"]').eq(0).value ="";

$(...)       // This is a jQuery object.
$(...)[n]    // This is a DOM object in the nth place in the set.
$(...).eq(n) // This is a DOM object in the nth place in the set. 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-28T09:08:29.830

**工作演示** [http://jsfiddle.net/vN74v/2/](http://jsfiddle.net/vN74v/2/)

**代码**

```
$('#hullk').click(function(){ // in example when you click the button
    $('input[name="customergroupname"]').val("");
});
​ 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-28T09:15:20.187

根据[DOM 2 级规范](http://www.w3.org/TR/html5/the-form-element.html#the-form-element)，您可以访问：

```
document.forms["foo"].elements["customergroupname"].value = ''; 
```

如果`formName`and`fieldName`是常量而不是变量，则可以使用文字语法：

```
document.forms.foo.elements.customergroupname.value = ''; 
```

* * *

## 回答 #5

> 赞同：-3
> 
> 时间：2012-05-28T09:05:22.043

尝试：

```
$('input[name="customergroupname"]').value=""; 
```

我已经用`customergroupname`引号括起来了。

非常真实，我把引号弄混了。现已编辑。

# objective-c - iOS：addObserver 和 superview 查询

> ID：10781936
> 
> 赞同：4
> 
> 时间：2012-05-28T09:00:30.877
> 
> 标签：objective-c, ios, xcode, uiview

我有一个名为 subview1 的 uiview。根据某些情况，我将其作为子视图添加到其他几个视图中。现在我有以下代码

```
[subView1 addObserver:self forKeyPath:@"superview" options:NSKeyValueObservingOptionNew context:nil]; 
```

我的问题是 obserValueForKeypath 函数永远不会被调用

```
 -(void)observeValueForKeyPath:(NSString *)keyPath ofObject:(id)object change:(NSDictionary *)change context:(void *)context{
if (self.subView1 == (UIView*)object) {
        if ([keyPath isEqualToString:@"superview"]) {
            NSLog(@"superview changed %@",change);

        }
    }
} 
```

我在这里做错什么了吗。

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-05-28T09:09:06.760

只需检查它是否首先进入 if block ，问题可能就在那里。此外，如果它在不同的类中，请检查您是否为要设置观察者的变量声明了属性。

# html - 如何使用 CSS 在图像之间交叉淡入淡出？

> ID：10781939
> 
> 赞同：1
> 
> 时间：2012-05-28T09:00:34.100
> 
> 标签：html, css, transitions

我完全按照教程进行操作，而不是从 Print_tab.png 褪色到 Print_tab_hover.png，它只是褪色为白色。有什么办法可以解决这个问题（不使用 javascript）？

这是我使用的代码：

HTML：

```
 <div id="print"
     <img class="bottom" src="images/print_tab_hover.png"  />
     <img class="top" src="images/print_tab.png"  />
    </div> 
```

CSS：

```
 #print {
    position:relative;
    width: 300px;
    height: 169px;
    margin: 0 auto;
    }

    #print img {
    position: absolute;
    left: 0;
    -webkit-transition: opacity 1s ease-in-out;
    -moz-transition: opacity 1s ease-in-out;
    -o-transition: opacity 1s ease-in-out;
    -ms-transition: opacity 1s ease-in-out; 
    transition: opacity 1s ease-in-out;
    }

    #print img.top:hover {
    opacity: 0;
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-30T22:34:05.420

这有效：

```
#print {
    position:relative;
    width: 200px;
    height: 120px;
    margin: 0 auto;
    background-image: url(http://fc06.deviantart.net/images2/i/2004/07/e/7/Firefox_dock_icon.png);
}

#print img {
    position: absolute;
    left: 0;
    width: 200px;
    -webkit-transition: opacity 1s ease-in-out;
    -moz-transition: opacity 1s ease-in-out;
    -o-transition: opacity 1s ease-in-out;
    -ms-transition: opacity 1s ease-in-out; 
    transition: opacity 1s ease-in-out;
}

#print img.top:hover {
    opacity: 0;
}

<div id="print">
   <img class="top" src="http://lanscaping-ideas.com/wp-content/uploads/2012/04/Landscape-Paintings-2.jpg"  />
</div> 
```

只需为#print 设置默认背景并淡入新图像，反之亦然。

# c++ - 禁用 QGraphicsWebView 滚动条

> ID：10781943
> 
> 赞同：2
> 
> 时间：2012-05-28T09:00:58.740
> 
> 标签：c++, qt, mobile, scrollbars

我想禁用`QGraphicsWebView`. 它在[文档](http://qt-project.org/doc/qt-4.8/qgraphicswebview.html)中说：

> “...如果网页内容大于此，如果没有明确禁用滚动条将显示。”

我似乎找不到禁用滚动条的方法。
我需要禁用滚动条，因为我想在拖动时实现滚动并且我不想显示它们。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-28T09:21:56.653

您可以在 QWebFrame 上设置滚动条行为。你可能想要的是这样的：

```
QWebFrame* frame = webView->page()->mainFrame();
frame->setScrollBarPolicy( Qt::Horizontal, Qt::ScrollBarAlwaysOff );
frame->setScrollBarPolicy( Qt::Vertical, Qt::ScrollBarAlwaysOff ); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-28T09:07:29.667

页面本身需要有适当的 CSS 以防止出现滚动条，例如`body {overflow: hidden}`.

如果您无法控制页面内容，[resizeToContents](http://qt-project.org/doc/qt-4.8/qgraphicswebview.html#resizesToContents-prop)可能是您要查找的属性。

# mahout - Mahout 安装

> ID：10781945
> 
> 赞同：1
> 
> 时间：2012-05-28T09:01:05.937
> 
> 标签：mahout

这是我在主干目录中执行 mvn clean install 时遇到的错误。一些测试失败并且没有安装核心。关于什么可能出错的任何建议？我已经安装了 maven，并且我知道它已正确安装，因为 mvn --version 有效。

这是整个输出：

```
[INFO] Scanning for projects...
[WARNING] 
[WARNING] Some problems were encountered while building the effective model for org.apache.mahout:mahout-integration:jar:0.7-SNAPSHOT
[WARNING] 'dependencies.dependency.(groupId:artifactId:type:classifier)' must be unique: ${project.groupId}:mahout-core:jar -> duplicate declaration of version (?) @ line 121, column 17
[WARNING] 
[WARNING] It is highly recommended to fix these problems because they threaten the stability of your build.
[WARNING] 
[WARNING] For this reason, future Maven versions might no longer support building such malformed projects.
[WARNING] 
[INFO] ------------------------------------------------------------------------
[INFO] Reactor Build Order:
[INFO] 
[INFO] Apache Mahout
[INFO] Mahout Build Tools
[INFO] Mahout Math
[INFO] Mahout Core
[INFO] Mahout Integration
[INFO] Mahout Examples
[INFO] Mahout Release Package
[INFO]                                                                         
[INFO] ------------------------------------------------------------------------
[INFO] Building Apache Mahout 0.7-SNAPSHOT
[INFO] ------------------------------------------------------------------------
[INFO] 
[INFO] --- maven-clean-plugin:2.4.1:clean (default-clean) @ mahout ---
[INFO] Deleting /opt/ibm/biginsights/trunk/target
[INFO] 
[INFO] --- maven-remote-resources-plugin:1.1:process (default) @ mahout ---
[INFO] Setting property: classpath.resource.loader.class => 'org.codehaus.plexus.velocity.ContextClassLoaderResourceLoader'.
[INFO] Setting property: velocimacro.messages.on => 'false'.
[INFO] Setting property: resource.loader => 'classpath'.
[INFO] Setting property: resource.manager.logwhenfound => 'false'.
[INFO] 
[INFO] --- maven-install-plugin:2.3.1:install (default-install) @ mahout ---
[INFO] Installing /opt/ibm/biginsights/trunk/pom.xml to /root/.m2/repository/org/apache/mahout/mahout/0.7-SNAPSHOT/mahout-0.7-SNAPSHOT.pom
[INFO]                                                                         
[INFO] ------------------------------------------------------------------------
[INFO] Building Mahout Build Tools 0.7-SNAPSHOT
[INFO] ------------------------------------------------------------------------
[INFO] 
[INFO] --- maven-clean-plugin:2.4.1:clean (default-clean) @ mahout-buildtools ---
[INFO] Deleting /opt/ibm/biginsights/trunk/buildtools/target
[INFO] 
[INFO] --- maven-resources-plugin:2.4.3:resources (default-resources) @ mahout-buildtools ---
[INFO] Using 'UTF-8' encoding to copy filtered resources.
[INFO] Copying 6 resources
[INFO] 
[INFO] --- maven-compiler-plugin:2.3.2:compile (default-compile) @ mahout-buildtools ---
[INFO] No sources to compile
[INFO] 
[INFO] --- maven-resources-plugin:2.4.3:testResources (default-testResources) @ mahout-buildtools ---
[INFO] Using 'UTF-8' encoding to copy filtered resources.
[INFO] skip non existing resourceDirectory /opt/ibm/biginsights/trunk/buildtools/src/test/resources
[INFO] 
[INFO] --- maven-compiler-plugin:2.3.2:testCompile (default-testCompile) @ mahout-buildtools ---
[INFO] No sources to compile
[INFO] 
[INFO] --- maven-surefire-plugin:2.8.1:test (default-test) @ mahout-buildtools ---
[INFO] No tests to run.
[INFO] Surefire report directory: /opt/ibm/biginsights/trunk/buildtools/target/surefire-reports

-------------------------------------------------------
 T E S T S
-------------------------------------------------------
There are no tests to run.

Results :

Tests run: 0, Failures: 0, Errors: 0, Skipped: 0

[INFO] 
[INFO] --- maven-jar-plugin:2.3.1:jar (default-jar) @ mahout-buildtools ---
[INFO] Building jar: /opt/ibm/biginsights/trunk/buildtools/target/mahout-buildtools-0.7-SNAPSHOT.jar
[INFO] 
[INFO] --- maven-install-plugin:2.3.1:install (default-install) @ mahout-buildtools ---
[INFO] Installing /opt/ibm/biginsights/trunk/buildtools/target/mahout-buildtools-0.7-SNAPSHOT.jar to /root/.m2/repository/org/apache/mahout/mahout-buildtools/0.7-SNAPSHOT/mahout-buildtools-0.7-SNAPSHOT.jar
[INFO] Installing /opt/ibm/biginsights/trunk/buildtools/pom.xml to /root/.m2/repository/org/apache/mahout/mahout-buildtools/0.7-SNAPSHOT/mahout-buildtools-0.7-SNAPSHOT.pom
[INFO]                                                                         
[INFO] ------------------------------------------------------------------------
[INFO] Building Mahout Math 0.7-SNAPSHOT
[INFO] ------------------------------------------------------------------------
[INFO] 
[INFO] --- maven-clean-plugin:2.4.1:clean (default-clean) @ mahout-math ---
[INFO] Deleting /opt/ibm/biginsights/trunk/math/target
[INFO] 
[INFO] --- mahout-collection-codegen-plugin:1.0:generate (default) @ mahout-math ---
[INFO] Writing to /opt/ibm/biginsights/trunk/math/target/generated-sources/org/apache
[INFO] 
```

......

```
[INFO] --- maven-resources-plugin:2.4.3:resources (default-resources) @ mahout-math ---
[INFO] Using 'UTF-8' encoding to copy filtered resources.
[INFO] skip non existing resourceDirectory /opt/ibm/biginsights/trunk/math/src/main/resources
[INFO] 
[INFO] --- maven-compiler-plugin:2.3.2:compile (default-compile) @ mahout-math ---
[INFO] Compiling 347 source files to /opt/ibm/biginsights/trunk/math/target/classes
[INFO] 
[INFO] --- maven-resources-plugin:2.4.3:testResources (default-testResources) @ mahout-math ---
[INFO] Using 'UTF-8' encoding to copy filtered resources.
[INFO] Copying 2 resources
[INFO] 
[INFO] --- maven-compiler-plugin:2.3.2:testCompile (default-testCompile) @ mahout-math ---
[INFO] Compiling 118 source files to /opt/ibm/biginsights/trunk/math/target/test-classes
[INFO] 
[INFO] --- maven-surefire-plugin:2.8.1:test (default-test) @ mahout-math ---
[INFO] Surefire report directory: /opt/ibm/biginsights/trunk/math/target/surefire-reports

-------------------------------------------------------
 T E S T S
-------------------------------------------------------
Running org.apache.mahout.math.als.AlternatingLeastSquaresSolverTest
Tests run: 4, Failures: 0, Errors: 0, Skipped: 0, Time elapsed: 0.803 sec
Running org.apache.mahout.math.TestSparseMatrix
Tests run: 57, Failures: 0, Errors: 0, Skipped: 0, Time elapsed: 0.19 sec
Running org.apache.mahout.math.decomposer.hebbian.TestHebbianSolver
Tests run: 1, Failures: 0, Errors: 0, Skipped: 0, Time elapsed: 6.991 sec
Running org.apache.mahout.math.decomposer.lanczos.TestLanczosSolver
Tests run: 3, Failures: 0, Errors: 0, Skipped: 0, Time elapsed: 6.078 sec
Running org.apache.mahout.math.PivotedMatrixTest
Tests run: 58, Failures: 0, Errors: 0, Skipped: 0, Time elapsed: 0.287 sec
Running org.apache.mahout.math.TestDenseVector
Tests run: 39, Failures: 0, Errors: 0, Skipped: 0, Time elapsed: 0.016 sec
Running org.apache.mahout.math.TestSparseColumnMatrix
Tests run: 57, Failures: 0, Errors: 0, Skipped: 0, Time elapsed: 0.015 sec
Running org.apache.mahout.math.TestDenseMatrix
Tests run: 57, Failures: 0, Errors: 0, Skipped: 0, Time elapsed: 0.014 sec
Running org.apache.mahout.math.list.ShortArrayListTest
Tests run: 18, Failures: 0, Errors: 0, Skipped: 0, Time elapsed: 0.012 sec
Running org.apache.mahout.math.list.ByteArrayListTest
Tests run: 18, Failures: 0, Errors: 0, Skipped: 0, Time elapsed: 0.419 sec
Running org.apache.mahout.math.list.LongArrayListTest
Tests run: 18, Failures: 0, Errors: 0, Skipped: 0, Time elapsed: 0.007 sec
Running org.apache.mahout.math.list.IntArrayListTest
Tests run: 18, Failures: 0, Errors: 0, Skipped: 0, Time elapsed: 0.005 sec
Running org.apache.mahout.math.list.CharArrayListTest
Tests run: 18, Failures: 0, Errors: 0, Skipped: 0, Time elapsed: 0.006 sec
Running org.apache.mahout.math.list.FloatArrayListTest
Tests run: 18, Failures: 0, Errors: 0, Skipped: 0, Time elapsed: 0.006 sec
Running org.apache.mahout.math.list.DoubleArrayListTest
Tests run: 18, Failures: 0, Errors: 0, Skipped: 0, Time elapsed: 0.005 sec
Running org.apache.mahout.math.VectorTest
Tests run: 20, Failures: 0, Errors: 0, Skipped: 0, Time elapsed: 0.009 sec
Running org.apache.mahout.math.stats.OnlineSummarizerTest
Tests run: 2, Failures: 0, Errors: 0, Skipped: 0, Time elapsed: 0.055 sec
Running org.apache.mahout.math.stats.OnlineExponentialAverageTest
Tests run: 2, Failures: 0, Errors: 0, Skipped: 0, Time elapsed: 0.006 sec
Running org.apache.mahout.math.stats.LogLikelihoodTest
Tests run: 5, Failures: 0, Errors: 0, Skipped: 0, Time elapsed: 0.016 sec
Running org.apache.mahout.math.QRDecompositionTest
Tests run: 3, Failures: 0, Errors: 0, Skipped: 0, Time elapsed: 0.041 sec
Running org.apache.mahout.math.TestSingularValueDecomposition
Tests run: 9, Failures: 0, Errors: 0, Skipped: 0, Time elapsed: 0.005 sec
Running org.apache.mahout.math.TestSparseRowMatrix
Tests run: 57, Failures: 0, Errors: 0, Skipped: 0, Time elapsed: 0.015 sec
Running org.apache.mahout.math.TestOrderedIntDoubleMapping
Tests run: 2, Failures: 0, Errors: 0, Skipped: 0, Time elapsed: 0.001 sec
Running org.apache.mahout.math.TestRandomAccessSparseVector
Tests run: 39, Failures: 0, Errors: 0, Skipped: 0, Time elapsed: 0.011 sec
Running org.apache.mahout.math.solver.TestConjugateGradientSolver
Tests run: 3, Failures: 0, Errors: 0, Skipped: 0, Time elapsed: 0.012 sec
Running org.apache.mahout.math.solver.LSMRTest
Tests run: 1, Failures: 0, Errors: 0, Skipped: 0, Time elapsed: 0.002 sec
Running org.apache.mahout.math.solver.EigenDecompositionTest
Tests run: 4, Failures: 0, Errors: 0, Skipped: 0, Time elapsed: 0.155 sec
Running org.apache.mahout.math.jet.random.engine.MersenneTwisterTest
Tests run: 3, Failures: 0, Errors: 0, Skipped: 0, Time elapsed: 0.006 sec
Running org.apache.mahout.math.jet.random.GammaTest
Tests run: 3, Failures: 0, Errors: 0, Skipped: 0, Time elapsed: 1.589 sec
Running org.apache.mahout.math.jet.random.ExponentialTest
Tests run: 6, Failures: 0, Errors: 0, Skipped: 0, Time elapsed: 0.832 sec
Running org.apache.mahout.math.jet.random.NegativeBinomialTest
Tests run: 1, Failures: 0, Errors: 0, Skipped: 0, Time elapsed: 0.074 sec
Running org.apache.mahout.math.jet.random.NormalTest
Tests run: 4, Failures: 0, Errors: 0, Skipped: 0, Time elapsed: 0.267 sec
Running org.apache.mahout.math.jet.stat.ProbabilityTest
Tests run: 3, Failures: 0, Errors: 0, Skipped: 0, Time elapsed: 0.015 sec
Running org.apache.mahout.math.jet.stat.GammaTest
Tests run: 5, Failures: 0, Errors: 0, Skipped: 0, Time elapsed: 0.128 sec
Running org.apache.mahout.math.PermutedVectorViewTest
Tests run: 2, Failures: 0, Errors: 0, Skipped: 0, Time elapsed: 0.004 sec
Running org.apache.mahout.math.TestVectorView
Tests run: 35, Failures: 0, Errors: 0, Skipped: 0, Time elapsed: 0.032 sec
Running org.apache.mahout.math.map.OpenByteShortHashMapTest
Tests run: 17, Failures: 0, Errors: 0, Skipped: 0, Time elapsed: 0.008 sec
Running org.apache.mahout.math.map.OpenCharFloatHashMapTest
Tests run: 17, Failures: 0, Errors: 0, Skipped: 0, Time elapsed: 0.007 sec
Running org.apache.mahout.math.map.OpenShortShortHashMapTest
Tests run: 17, Failures: 0, Errors: 0, Skipped: 0, Time elapsed: 0.007 sec
Running org.apache.mahout.math.map.OpenDoubleShortHashMapTest
Tests run: 17, Failures: 0, Errors: 0, Skipped: 0, Time elapsed: 0.008 sec
Running org.apache.mahout.math.map.OpenFloatLongHashMapTest
Tests run: 17, Failures: 0, Errors: 0, Skipped: 0, Time elapsed: 0.007 sec
Running org.apache.mahout.math.map.OpenIntFloatHashMapTest
Tests run: 17, Failures: 0, Errors: 0, Skipped: 0, Time elapsed: 0.007 sec
Running org.apache.mahout.math.map.OpenShortObjectHashMapTest
Tests run: 17, Failures: 0, Errors: 0, Skipped: 0, Time elapsed: 0.008 sec
Running org.apache.mahout.math.map.OpenObjectIntHashMapTest
Tests run: 19, Failures: 0, Errors: 0, Skipped: 0, Time elapsed: 0.05 sec
Running org.apache.mahout.math.map.OpenFloatCharHashMapTest
Tests run: 17, Failures: 0, Errors: 0, Skipped: 0, Time elapsed: 0.007 sec
Running org.apache.mahout.math.map.OpenDoubleByteHashMapTest
Tests run: 17, Failures: 0, Errors: 0, Skipped: 0, Time elapsed: 0.006 sec
Running org.apache.mahout.math.map.OpenByteFloatHashMapTest
Tests run: 17, Failures: 0, Errors: 0, Skipped: 0, Time elapsed: 0.006 sec
Running org.apache.mahout.math.map.OpenIntObjectHashMapTest
Tests run: 17, Failures: 0, Errors: 0, Skipped: 0, Time elapsed: 0.006 sec
Running org.apache.mahout.math.map.OpenIntIntHashMapTest
Tests run: 17, Failures: 0, Errors: 0, Skipped: 0, Time elapsed: 0.006 sec
Running org.apache.mahout.math.map.OpenDoubleObjectHashMapTest
Tests run: 17, Failures: 0, Errors: 0, Skipped: 0, Time elapsed: 0.008 sec
Running org.apache.mahout.math.map.OpenDoubleDoubleHashMapTest
Tests run: 17, Failures: 0, Errors: 0, Skipped: 0, Time elapsed: 0.007 sec
Running org.apache.mahout.math.map.OpenByteByteHashMapTest
Tests run: 17, Failures: 0, Errors: 0, Skipped: 0, Time elapsed: 0.007 sec
Running org.apache.mahout.math.map.OpenCharCharHashMapTest
Tests run: 17, Failures: 0, Errors: 0, Skipped: 0, Time elapsed: 0.007 sec
Running org.apache.mahout.math.map.OpenFloatByteHashMapTest
Tests run: 17, Failures: 0, Errors: 0, Skipped: 0, Time elapsed: 0.006 sec
Running org.apache.mahout.math.map.OpenShortDoubleHashMapTest
Tests run: 17, Failures: 0, Errors: 0, Skipped: 0, Time elapsed: 0.007 sec
Running org.apache.mahout.math.map.OpenIntDoubleHashMapTest
Tests run: 17, Failures: 0, Errors: 0, Skipped: 0, Time elapsed: 0.005 sec
Running org.apache.mahout.math.map.OpenCharDoubleHashMapTest
Tests run: 17, Failures: 0, Errors: 0, Skipped: 0, Time elapsed: 0.007 sec
Running org.apache.mahout.math.map.OpenDoubleIntHashMapTest
Tests run: 17, Failures: 0, Errors: 0, Skipped: 0, Time elapsed: 0.113 sec
Running org.apache.mahout.math.map.OpenShortLongHashMapTest
Tests run: 17, Failures: 0, Errors: 0, Skipped: 0, Time elapsed: 0.007 sec
Running org.apache.mahout.math.map.OpenByteIntHashMapTest
Tests run: 17, Failures: 0, Errors: 0, Skipped: 0, Time elapsed: 0.006 sec
Running org.apache.mahout.math.map.OpenObjectDoubleHashMapTest
Tests run: 19, Failures: 0, Errors: 0, Skipped: 0, Time elapsed: 0.008 sec
Running org.apache.mahout.math.map.OpenLongShortHashMapTest
Tests run: 17, Failures: 0, Errors: 0, Skipped: 0, Time elapsed: 0.007 sec
Running org.apache.mahout.math.map.OpenIntByteHashMapTest
Tests run: 17, Failures: 0, Errors: 0, Skipped: 0, Time elapsed: 0.007 sec
Running org.apache.mahout.math.map.OpenCharShortHashMapTest
Tests run: 17, Failures: 0, Errors: 0, Skipped: 0, Time elapsed: 0.007 sec
Running org.apache.mahout.math.map.OpenObjectShortHashMapTest
Tests run: 19, Failures: 0, Errors: 0, Skipped: 0, Time elapsed: 0.008 sec
Running org.apache.mahout.math.map.OpenLongFloatHashMapTest
Tests run: 17, Failures: 0, Errors: 0, Skipped: 0, Time elapsed: 0.007 sec
Running org.apache.mahout.math.map.OpenLongLongHashMapTest
Tests run: 17, Failures: 0, Errors: 0, Skipped: 0, Time elapsed: 0.006 sec
Running org.apache.mahout.math.map.OpenDoubleFloatHashMapTest
Tests run: 17, Failures: 0, Errors: 0, Skipped: 0, Time elapsed: 0.006 sec
Running org.apache.mahout.math.map.OpenCharObjectHashMapTest
Tests run: 17, Failures: 0, Errors: 0, Skipped: 0, Time elapsed: 0.007 sec
Running org.apache.mahout.math.map.OpenObjectFloatHashMapTest
Tests run: 19, Failures: 0, Errors: 0, Skipped: 0, Time elapsed: 0.007 sec
Running org.apache.mahout.math.map.OpenShortFloatHashMapTest
Tests run: 17, Failures: 0, Errors: 0, Skipped: 0, Time elapsed: 0.006 sec
Running org.apache.mahout.math.map.OpenByteCharHashMapTest
Tests run: 17, Failures: 0, Errors: 0, Skipped: 0, Time elapsed: 0.124 sec
Running org.apache.mahout.math.map.OpenDoubleCharHashMapTest
Tests run: 17, Failures: 0, Errors: 0, Skipped: 0, Time elapsed: 0.006 sec
Running org.apache.mahout.math.map.OpenFloatShortHashMapTest
Tests run: 17, Failures: 0, Errors: 0, Skipped: 0, Time elapsed: 0.005 sec
Running org.apache.mahout.math.map.OpenIntLongHashMapTest
Tests run: 17, Failures: 0, Errors: 0, Skipped: 0, Time elapsed: 0.005 sec
Running org.apache.mahout.math.map.OpenShortIntHashMapTest
Tests run: 17, Failures: 0, Errors: 0, Skipped: 0, Time elapsed: 0.005 sec
Running org.apache.mahout.math.map.OpenShortByteHashMapTest
Tests run: 17, Failures: 0, Errors: 0, Skipped: 0, Time elapsed: 0.005 sec
Running org.apache.mahout.math.map.OpenIntShortHashMapTest
Tests run: 17, Failures: 0, Errors: 0, Skipped: 0, Time elapsed: 0.005 sec
Running org.apache.mahout.math.map.OpenObjectCharHashMapTest
Tests run: 19, Failures: 0, Errors: 0, Skipped: 0, Time elapsed: 0.006 sec
Running org.apache.mahout.math.map.OpenByteDoubleHashMapTest
Tests run: 17, Failures: 0, Errors: 0, Skipped: 0, Time elapsed: 0.006 sec
Running org.apache.mahout.math.map.OpenObjectLongHashMapTest
Tests run: 19, Failures: 0, Errors: 0, Skipped: 0, Time elapsed: 0.006 sec
Running org.apache.mahout.math.map.OpenByteLongHashMapTest
Tests run: 17, Failures: 0, Errors: 0, Skipped: 0, Time elapsed: 0.005 sec
Running org.apache.mahout.math.map.OpenByteObjectHashMapTest
Tests run: 17, Failures: 0, Errors: 0, Skipped: 0, Time elapsed: 0.006 sec
Running org.apache.mahout.math.map.OpenShortCharHashMapTest
Tests run: 17, Failures: 0, Errors: 0, Skipped: 0, Time elapsed: 0.005 sec
Running org.apache.mahout.math.map.OpenLongObjectHashMapTest
Tests run: 17, Failures: 0, Errors: 0, Skipped: 0, Time elapsed: 0.006 sec
Running org.apache.mahout.math.map.OpenFloatFloatHashMapTest
Tests run: 17, Failures: 0, Errors: 0, Skipped: 0, Time elapsed: 0.006 sec
Running org.apache.mahout.math.map.OpenCharLongHashMapTest
Tests run: 17, Failures: 0, Errors: 0, Skipped: 0, Time elapsed: 0.006 sec
Running org.apache.mahout.math.map.OpenLongIntHashMapTest
Tests run: 17, Failures: 0, Errors: 0, Skipped: 0, Time elapsed: 0.019 sec
Running org.apache.mahout.math.map.OpenLongDoubleHashMapTest
Tests run: 17, Failures: 0, Errors: 0, Skipped: 0, Time elapsed: 0.005 sec
Running org.apache.mahout.math.map.OpenDoubleLongHashMapTest
Tests run: 17, Failures: 0, Errors: 0, Skipped: 0, Time elapsed: 0.006 sec
Running org.apache.mahout.math.map.OpenFloatObjectHashMapTest
Tests run: 17, Failures: 0, Errors: 0, Skipped: 0, Time elapsed: 0.007 sec
Running org.apache.mahout.math.map.OpenLongByteHashMapTest
Tests run: 17, Failures: 0, Errors: 0, Skipped: 0, Time elapsed: 0.005 sec
Running org.apache.mahout.math.map.OpenFloatIntHashMapTest
Tests run: 17, Failures: 0, Errors: 0, Skipped: 0, Time elapsed: 0.005 sec
Running org.apache.mahout.math.map.OpenFloatDoubleHashMapTest
Tests run: 17, Failures: 0, Errors: 0, Skipped: 0, Time elapsed: 0.005 sec
Running org.apache.mahout.math.map.OpenCharByteHashMapTest
Tests run: 17, Failures: 0, Errors: 0, Skipped: 0, Time elapsed: 0.005 sec
Running org.apache.mahout.math.map.OpenIntCharHashMapTest
Tests run: 17, Failures: 0, Errors: 0, Skipped: 0, Time elapsed: 0.005 sec
Running org.apache.mahout.math.map.OpenCharIntHashMapTest
Tests run: 17, Failures: 0, Errors: 0, Skipped: 0, Time elapsed: 0.006 sec
Running org.apache.mahout.math.map.OpenLongCharHashMapTest
Tests run: 17, Failures: 0, Errors: 0, Skipped: 0, Time elapsed: 0.006 sec
Running org.apache.mahout.math.map.OpenObjectByteHashMapTest
Tests run: 19, Failures: 0, Errors: 0, Skipped: 0, Time elapsed: 0.007 sec
Running org.apache.mahout.math.MurmurHashTest
Tests run: 6, Failures: 0, Errors: 0, Skipped: 0, Time elapsed: 0.008 sec
Running org.apache.mahout.math.MurmurHash3Test
Tests run: 1, Failures: 0, Errors: 0, Skipped: 0, Time elapsed: 0.003 sec
Running org.apache.mahout.math.CholeskyDecompositionTest
Tests run: 4, Failures: 0, Errors: 0, Skipped: 0, Time elapsed: 0.944 sec
Running org.apache.mahout.math.TestSequentialAccessSparseVector
Tests run: 39, Failures: 0, Errors: 0, Skipped: 0, Time elapsed: 0.032 sec
Running org.apache.mahout.math.set.OpenDoubleHashSetTest
Tests run: 9, Failures: 0, Errors: 0, Skipped: 0, Time elapsed: 0.002 sec
Running org.apache.mahout.math.set.OpenShortHashSetTest
Tests run: 9, Failures: 0, Errors: 0, Skipped: 0, Time elapsed: 0.002 sec
Running org.apache.mahout.math.set.OpenIntHashSetTest
Tests run: 9, Failures: 0, Errors: 0, Skipped: 0, Time elapsed: 0.002 sec
Running org.apache.mahout.math.set.OpenCharHashSetTest
Tests run: 9, Failures: 0, Errors: 0, Skipped: 0, Time elapsed: 0.001 sec
Running org.apache.mahout.math.set.OpenFloatHashSetTest
Tests run: 9, Failures: 0, Errors: 0, Skipped: 0, Time elapsed: 0.002 sec
Running org.apache.mahout.math.set.OpenLongHashSetTest
Tests run: 9, Failures: 0, Errors: 0, Skipped: 0, Time elapsed: 0.002 sec
Running org.apache.mahout.math.set.OpenByteHashSetTest
Tests run: 9, Failures: 0, Errors: 0, Skipped: 0, Time elapsed: 0.002 sec
Running org.apache.mahout.math.TestMatrixView
Tests run: 48, Failures: 0, Errors: 0, Skipped: 0, Time elapsed: 0.051 sec
Running org.apache.mahout.math.ssvd.SequentialBigSvdTest
Tests run: 3, Failures: 0, Errors: 0, Skipped: 0, Time elapsed: 0.019 sec
Running org.apache.mahout.common.RandomUtilsTest
Tests run: 7, Failures: 0, Errors: 0, Skipped: 0, Time elapsed: 0.016 sec

Results :

Tests run: 1867, Failures: 0, Errors: 0, Skipped: 0

[INFO] 
[INFO] --- maven-jar-plugin:2.3.1:jar (default-jar) @ mahout-math ---
[INFO] Building jar: /opt/ibm/biginsights/trunk/math/target/mahout-math-0.7-SNAPSHOT.jar
[INFO] 
[INFO] --- maven-jar-plugin:2.3.1:test-jar (default) @ mahout-math ---
[INFO] Building jar: /opt/ibm/biginsights/trunk/math/target/mahout-math-0.7-SNAPSHOT-tests.jar
[INFO] 
[INFO] --- maven-source-plugin:2.1.2:jar-no-fork (attach-sources) @ mahout-math ---
[INFO] org already added, skipping
[INFO] org/apache already added, skipping
[INFO] org/apache/mahout already added, skipping
[INFO] org/apache/mahout/math already added, skipping
[INFO] org/apache/mahout/math/list already added, skipping
[INFO] org/apache/mahout/math/function already added, skipping
[INFO] org/apache/mahout/math/map already added, skipping
[INFO] org/apache/mahout/math/set already added, skipping
[INFO] Building jar: /opt/ibm/biginsights/trunk/math/target/mahout-math-0.7-SNAPSHOT-sources.jar
[INFO] org already added, skipping
[INFO] org/apache already added, skipping
[INFO] org/apache/mahout already added, skipping
[INFO] org/apache/mahout/math already added, skipping
[INFO] org/apache/mahout/math/list already added, skipping
[INFO] org/apache/mahout/math/function already added, skipping
[INFO] org/apache/mahout/math/map already added, skipping
[INFO] org/apache/mahout/math/set already added, skipping
[INFO] 
[INFO] --- maven-install-plugin:2.3.1:install (default-install) @ mahout-math ---
[INFO] Installing /opt/ibm/biginsights/trunk/math/target/mahout-math-0.7-SNAPSHOT.jar to /root/.m2/repository/org/apache/mahout/mahout-math/0.7-SNAPSHOT/mahout-math-0.7-SNAPSHOT.jar
[INFO] Installing /opt/ibm/biginsights/trunk/math/pom.xml to /root/.m2/repository/org/apache/mahout/mahout-math/0.7-SNAPSHOT/mahout-math-0.7-SNAPSHOT.pom
[INFO] Installing /opt/ibm/biginsights/trunk/math/target/mahout-math-0.7-SNAPSHOT-tests.jar to /root/.m2/repository/org/apache/mahout/mahout-math/0.7-SNAPSHOT/mahout-math-0.7-SNAPSHOT-tests.jar
[INFO] Installing /opt/ibm/biginsights/trunk/math/target/mahout-math-0.7-SNAPSHOT-sources.jar to /root/.m2/repository/org/apache/mahout/mahout-math/0.7-SNAPSHOT/mahout-math-0.7-SNAPSHOT-sources.jar
[INFO]                                                                         
[INFO] ------------------------------------------------------------------------
[INFO] Building Mahout Core 0.7-SNAPSHOT
[INFO] ------------------------------------------------------------------------
[INFO] 
[INFO] --- maven-clean-plugin:2.4.1:clean (default-clean) @ mahout-core ---
[INFO] Deleting /opt/ibm/biginsights/trunk/core/target
[INFO] 
[INFO] --- maven-resources-plugin:2.4.3:resources (default-resources) @ mahout-core ---
[INFO] Using 'UTF-8' encoding to copy filtered resources.
[INFO] Copying 1 resource
[INFO] 
[INFO] --- maven-compiler-plugin:2.3.2:compile (default-compile) @ mahout-core ---
[INFO] Compiling 645 source files to /opt/ibm/biginsights/trunk/core/target/classes
[INFO] 
[INFO] --- maven-antrun-plugin:1.6:run (default) @ mahout-core ---
[WARNING] Parameter tasks is deprecated, use target instead
[INFO] Executing tasks

main:
     [copy] Copying 1 file to /opt/ibm/biginsights/trunk/core/target/classes
[INFO] Executed tasks
[INFO] 
[INFO] --- maven-resources-plugin:2.4.3:testResources (default-testResources) @ mahout-core ---
[INFO] Using 'UTF-8' encoding to copy filtered resources.
[INFO] Copying 6 resources
[INFO] 
[INFO] --- maven-compiler-plugin:2.3.2:testCompile (default-testCompile) @ mahout-core ---
[INFO] Compiling 228 source files to /opt/ibm/biginsights/trunk/core/target/test-classes
[INFO] 
[INFO] --- maven-surefire-plugin:2.8.1:test (default-test) @ mahout-core ---
[INFO] Surefire report directory: /opt/ibm/biginsights/trunk/core/target/surefire-reports

-------------------------------------------------------
 T E S T S
-------------------------------------------------------
Running org.apache.mahout.cf.taste.hadoop.als.ParallelALSFactorizationJobTest
Tests run: 2, Failures: 0, Errors: 0, Skipped: 0, Time elapsed: 43.663 sec 
```

...

```
Running org.apache.mahout.math.hadoop.stochasticsvd.LocalSSVDPCADenseTest
Tests run: 1, Failures: 0, Errors: 1, Skipped: 0, Time elapsed: 11.226 sec <<< FAILURE!
Running org.apache.mahout.math.hadoop.stochasticsvd.LocalSSVDSolverDenseTest
Tests run: 2, Failures: 0, Errors: 0, Skipped: 0, Time elapsed: 49.06 sec
Running org.apache.mahout.math.hadoop.stochasticsvd.LocalSSVDSolverSparseSequentialTest
Tests run: 1, Failures: 0, Errors: 1, Skipped: 0, Time elapsed: 11.181 sec <<< FAILURE!
Running org.apache.mahout.math.hadoop.stochasticsvd.SSVDCommonTest
Tests run: 1, Failures: 0, Errors: 0, Skipped: 0, Time elapsed: 0.014 sec 
```

... 测试运行：1，失败：0，错误：0，跳过：0，经过时间：0.016 秒运行 org.apache.mahout.classifier.df.tools.VisualizerTest 测试运行：3，失败：2，错误： 0，跳过：0，经过时间：0.012 秒 <<< 失败！运行 org.apache.mahout.classifier.df.data.DataTest 测试运行：10，失败：0，错误：0，跳过：0，经过时间：0.184 秒 ... 运行 org.apache.mahout.fpm.pfpgrowth。 FPGrowthSyntheticDataTest 测试运行：2，失败：0，错误：0，跳过：0，经过时间：126.143 秒运行 org.apache.mahout.fpm.pfpgrowth.PFPGrowthTest 测试运行：2，失败：0，错误：2，跳过： 0，经过的时间：11.852 秒 <<< 失败！运行 org.apache.mahout.fpm.pfpgrowth.PFPGrowthRetailDataTest 测试运行：2，失败：0，错误：2，跳过：0，经过时间：14.917 秒 <<< 失败！运行 org.apache.mahout.fpm.pfpgrowth.fpgrowth.FrequentPatternMaxHeapTest 测试运行：1，失败：0，错误：0，跳过：0，经过时间：0.088 秒...结果：

```
Failed tests: 
  testTreeVisualize(org.apache.mahout.classifier.df.tools.VisualizerTest): expected:<
  testForestVisualize(org.apache.mahout.classifier.df.tools.VisualizerTest): expected:<Tree[1]:

Tests in error: 
  runPCATest1(org.apache.mahout.math.hadoop.stochasticsvd.LocalSSVDPCADenseTest): Bt job unsuccessful.
  testSSVDSolverPowerIterations1(org.apache.mahout.math.hadoop.stochasticsvd.LocalSSVDSolverSparseSequentialTest): Bt job unsuccessful.
  testStartParallelFPGrowth(org.apache.mahout.fpm.pfpgrowth.PFPGrowthTest): Job failed!
  testStartParallelFPGrowthInSteps(org.apache.mahout.fpm.pfpgrowth.PFPGrowthTest): Job failed!
  testRetailDataMinSup100(org.apache.mahout.fpm.pfpgrowth.PFPGrowthRetailDataTest): Job failed!
  testRetailDataMinSup100InSteps(org.apache.mahout.fpm.pfpgrowth.PFPGrowthRetailDataTest): Job failed!

Tests run: 674, Failures: 2, Errors: 6, Skipped: 1 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-28T11:11:33.267

如果不发布有关失败的任何详细信息，我认为没有人可以帮助您进行调试。您只发布了一个摘要。

你可以跳过测试`mvn -DskipTests ...`

# language-agnostic - 通过组合两种颜色确定接收到的 RGBA 颜色

> ID：10781953
> 
> 赞同：9
> 
> 时间：2012-05-28T09:01:34.537
> 
> 标签：language-agnostic, colors, rgba

我有两种颜色定义为 RGBA（在我的具体示例中，其中一种是 [alpha 为 0.85 的白色] 和 [57、40、28 的 alpha 为 0.25]。第二种颜色绘制在第一种颜色上（即白色与 alpha是背景，第二种颜色用于绘图）。我怎样才能确定组合的 RGBA 颜色是什么？我需要一次性完成 - 所以任何工具都可以（例如，我很高兴在 Photoshop 中画一些东西，看看结果如何）。

我有几套要组合，但不要太多。任何指针？谢谢。

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2012-05-28T09:30:55.730

使用[Painter 算法](http://en.wikipedia.org/wiki/Painter%27s_algorithm)时，大多数颜色合成是使用[Porter-Duff](http://keithp.com/~keithp/porterduff/p253-porter.pdf) “Over”模式完成的：

产生的阿尔法：

```
αr = αa + αb (1 - αa) 
```

产生的颜色分量：

```
Cr = (Ca αa + Cb αb (1 - αa)) / αr 
```

所以对于你的例子：

```
alpha = 0.25 + 0.85 * (1 - 0.25)                        = 0.8875

red   = (57 * 0.25 + 255 * 0.85 * (1 - 0.25)) / 0.8875  = 199.2
green = (40 * 0.25 + 255 * 0.85 * (1 - 0.25)) / 0.8875  = 194.4
blue  = (28 * 0.25 + 255 * 0.85 * (1 - 0.25)) / 0.8875  = 191.1 
```

请参阅有关 alpha 合成的[维基百科文章。](http://en.wikipedia.org/wiki/Alpha_compositing)

# android - Android , Widget , 从一个小部件中获取所有组件

> ID：10781954
> 
> 赞同：0
> 
> 时间：2012-05-28T09:01:41.563
> 
> 标签：android, textview

我正在创建一个带有一些文本视图和一些图像视图的小部件。

当我想将字体应用于所有文本视图时，我需要一一获取 id 并相应地设置字体或颜色。

但是我如何从布局中获取所有文本视图组件，以便我可以通过迭代组件来为它们设置颜色？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-28T09:36:18.443

尝试这个

```
for( int i = 0; i < myLayout.getChildCount(); i++ ){
  if( myLayout.getChildAt( i ) instanceof TextView ){
    (TextView) myLayout.getChildAt( i ).setTextColor(#FF0000);
  }
} 
```

myLayout 是你的 ViewGroup

# xpath - xpath 在 BizTalk 业务流程中返回 null

> ID：10781957
> 
> 赞同：1
> 
> 时间：2012-05-28T09:01:50.377
> 
> 标签：xpath, biztalk, biztalk-2010, orchestration

我有一条消息（MsgPortConfig）：

```
<NewTable>
  <InternalID>1</InternalID> 
  <InterfaceId>INT079</InterfaceId> 
  <PortName>PortArchiveNewStartersDestination</PortName> 
  <Type>FILE</Type> 
  <Address>file://c:\test\out\archive\destination\NewStarters%MessageID%.txt</Address> 
</NewTable> 
```

当我尝试使用以下命令通过 xpath 访问值时，它总是返回 null。

```
VarXPath = "/*[local-name()='NewTable']/*[local-name()='Address']/text()";
VarDynamicPortFilePath = xpath(MsgPortConfig, VarXPath); 
```

我不知道我还能如何做到这一点，使用[XPathBuilder](http://www.bubasoft.net/Product/XpathBuilder)之类的应用程序检查语法可以正常工作，但在 BizTalk 中却不行。我错过了什么？谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-28T09:50:37.330

采用：

```
VarXPath = "string(/*[local-name()='NewTable' and namespace-uri()='']/*[local-name()='Address' and namespace-uri()=''])"; 
```

# domain-driven-design - 事件溯源和重建逻辑

> ID：10781959
> 
> 赞同：0
> 
> 时间：2012-05-28T09:01:55.433
> 
> 标签：domain-driven-design, cqrs, event-sourcing

我是事件溯源的新手，我对从事件流中重建对象有点困惑。

我相信我们需要按时间顺序运行加载所有发生的事件以重建对象状态。所以例如

如果我有一个名为客户的对象。

```
Public class Customer
{
   public void Correctname(string firstName,string lastName)
    {
        CustomerNameChanged(new nameChangedEvent(firstName,lastName);
    }
} 
```

如果客户更改了两次名称，我们将在事件日志中存储两次事件，当我将事件重建为对象时，我将获得两次事件。是否需要采取上一个事件或归档事件，以便我们不再重新运行最后一个事件

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-28T09:31:12.807

您可以将这两个事件重新应用到 Customer 对象。因为您按时间顺序应用它们，所以 Customer 对象将处于正确的当前状态。如果您担心应用的事件数量不再代表当前状态，您应该查看[快照](http://thinkbeforecoding.com/post/2010/02/25/Event-Sourcing-and-CQRS-Snapshots)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-28T09:33:29.423

重建对象时，您处理该对象的整个事件流。就性能而言，这通常不是问题，即使对于大量事件也是如此。您可以通过使用[Rolling Snapshots](http://cqrs.wordpress.com/documents/events-as-storage-mechanism/)来缓解这种情况。

使用快照，您可以将对象的状态存储在事件流的特定点。重建只是加载快照+拍摄快照后发生的事件。

# android - 如何使用 Hint = String 类型和 IME 键盘(android:inputType) = number 实现 EditText？

> ID：10781960
> 
> 赞同：0
> 
> 时间：2012-05-28T09:01:56.770
> 
> 标签：android, android-edittext, hint

我有一个 EditText，它有一个提示字段，上面写着“请输入一个数字”。我想要的 IME 键盘是数字类型，即。只允许数字！

问题是如果我在 xml 布局中使用以下内容：

```
<EditText>
...
android:inputType="number"
android:hint="Please Enter a 10 digit number"
</EditText> 
```

提示不会显示，因为 EditText 中只允许使用数字。

如何实现兼具以下两种功能的解决方案： 1\. 文字/字符串中的提示 2\. 输入允许的类型（IME 键盘）类型编号？

**编辑**

是的，我正在使用重力和单线属性，通过查看评论我猜这是因为 SDK 中的一个已知错误。我在 2.3 版本的手机上测试它。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-28T09:12:31.410

检查语法。它适用于两者..

```
 <EditText android:id="@+id/ed"
     android:layout_width="fill_parent"
     android:layout_height="wrap_content"
     android:inputType="number"
     android:hint="Please Enter a 10 digit number"/> 
```

# javascript - 向特定的 id 数组发送应用请求对话框

> ID：10781961
> 
> 赞同：1
> 
> 时间：2012-05-28T09:02:00.373
> 
> 标签：javascript, facebook, facebook-graph-api, facebook-javascript-sdk

我正在尝试向我在 facebook 上的朋友发送请求对话框，但对一些选定的朋友，我创建了一个数组，我只需要向该数组上的 id 发送邀请，我已经构建了此代码，但它不起作用。

看起来它停止了我所有页面的性能

```
//function to load friends
function loadFriends()
{
    //get array of friends
    FB.api('/me/friends?fields=name,first_name,gender', function(response) {

        console.log(response);
        var divContainer=$('.facebook-friends');
                         var testdiv = document.getElementById("test");

for(var i=0; i<response.data.length; i++){
    if(response.data[i].gender == 'male'){
         testdiv.innerHTML += response.data[i].first_name + response.data[i].id + '<br />';
    }
}

var  arr = []; // Creates an empty array literal.
  for(var i=0; i<response.data.length; i++){
    arr.push(response.data[i].id);
  }
  newInvite(arr); // Call your function and pass the friends array

    });
}

function newInvite(arr){
     FB.ui({ method: 'apprequests',
  message: 'Penelope for WAS',
  filters: ['app_non_users'],
  to:arr.join(',')

});
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-28T10:05:08.320

您应该使用逗号分隔的列表作为`to`参数，而不是数组。

```
FB.ui({
  method: 'apprequests',
  message: 'Penelope for WAS',
  filters: ['app_non_users'],
  to:arr.join(',')
}); 
```

您的代码在处理 JavaScript 变量范围时也有错误。

`newInvite`是一个缺少`arr`变量定义的函数（并且`arr`不在全局范围内，您应该将其传递给它，`newInvite`以便您的函数内部可以使用它。

```
function newInvite(arr){
  FB.ui({
    method: 'apprequests',
    message: 'Penelope for WAS',
    filters: ['app_non_users'],
    to:arr.join(',')
  });
) 
```

当然，您应该将朋友 ID 数组传递给函数：

```
FB.api('/me/friends', {fields:'name,first_name,gender'}, function(response) {
  var  arr = []; // Creates an empty array literal.
  for(var i=0; i<response.data.length; i++){
    arr.push(response.data[i].id);
  }
  newInvite(arr); // Call your function and pass the friends array
}); 
```

# c# - 动态更改按钮回发网址 asp.net

> ID：10781962
> 
> 赞同：1
> 
> 时间：2012-05-28T09:02:15.400
> 
> 标签：c#, asp.net, postbackurl

是否可以动态更改按钮回发 url 属性？例如，我有 3 页，即`salesListing.aspx`,`orderlisting.aspx`和`createDetail.aspx`.

和允许用户导航到`salesListing`页面。但是在我有一个后退按钮。`orderlisting``createDetail``createDetail.aspx`

后退按钮是否可以检测哪些页面导致回发？而且，当用户点击后退按钮时，后退按钮会保存记录并将其带回上一页吗？

例如，用户单击 orderlisting，然后单击 createDetail 页面。当他单击后退按钮时，后退按钮保存用户 ID 并将用户带回订单列表。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-28T09:21:06.437

一个选项就是使用 javascript`history`对象。

在您的按钮上，输入代码`OnClientClick="javascript: history.go(-1); return false;"`

这将只是转到上一页。

```
<asp:Button id="btnClick" runat="Server" text="Back" OnClientClick="javascript: history.go(-1); return false;" /> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-28T09:26:52.380

`Request.UrlReferrer.ToString();`在第一页加载时使用并存储它。

```
if( !IsPostBack ) 
```

`{ ViewState["PreviousPageUrl"] = Request.UrlReferrer.ToString(); }`

重定向到第二页后，如果您想返回

获取`ViewState["PreviousPageUrl"]`价值并返回使用`Response.Redirect(ViewState["PreviousPageUrl"].ToString())`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-28T09:07:14.373

您可以使用链接按钮，如果您使用的是母版页，则根据所在页面分配相关的导航 URL。就像你有一个链接按钮

```
<asp:HyperLink ID="HyperLink8" NavigateUrl="Login.aspx"
                            runat="server">Login</asp:HyperLink> 
```

并且在您后面的代码中可以更改其 URL。

```
if (Session["User"] != null)
{
    HyperLink8.Text = "Logout";
    HyperLink8.NavigateUrl = "Logout.aspx";
}
else
{
    HyperLink8.Text = "Login";
    HyperLink8.NavigateUrl = "Login.aspx";
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-28T09:16:33.927

我已经编写了一个项目，它将自动为您管理所有向后导航，[http://navigation.codeplex.com/](http://navigation.codeplex.com/)。

您将页面配置为状态列表。在每个状态下方是到不同状态的可能转换。例如，您的配置将是：

```
<state key="sales" page="~/salesListing.aspx">
    <transition key="next" to="create"/>
</state>
<state key="order" page="~/orderListing.aspx">
    <transition key="next" to="create"/>
</state>
<state key="create" page="~/createDetail.aspx"/> 
```

然后在代码中，从 salesListing 移动到您编写的 createDetail：

```
StateController.Navigate("Next"); 
```

要从 createDetail 返回到 salesListing，您可以编写：

```
StateController.NavigateBack(1); 
```

如果您有兴趣或需要任何帮助，请告诉我。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-28T10:29:35.003

使用普通的 html 按钮并添加 history.back() 函数。

<input type="button" Value="Back" onClick="History.back();">

这将适用于所有浏览器，不需要服务器端代码/回发。

快乐编码！！！

# c# - 使用 Moq.It.IsAny 测试以某事开头的字符串

> ID：10781965
> 
> 赞同：38
> 
> 时间：2012-05-28T09:02:22.703
> 
> 标签：c#, .net, unit-testing, moq

例如，是否可以使用 Moq 来表示方法接受以“ABC”开头的字符串。

作为一个例子是这样的：

```
logger.Verify(x => x.WriteData(Moq.It.IsAny<string>().StartsWith("ABC")), Times.Exactly(3)); 
```

那不会编译，但希望它能说明我的观点

* * *

## 回答 #1

> 赞同：61
> 
> 时间：2012-05-28T09:03:44.567

尝试：

```
logger.Verify(x => x.WriteData(Moq.It.Is<string>(str => str.StartsWith("ABC"))), Times.Exactly(3)); 
```

你可以看到另一个 It.Is 的例子：

```
// matching Func<int>, lazy evaluated
mock.Setup(foo => foo.Add(It.Is<int>(i => i % 2 == 0))).Returns(true); 
```

来自 Moq 文档：[https ://github.com/Moq/moq4/wiki/Quickstart](https://github.com/Moq/moq4/wiki/Quickstart)

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-05-28T09:04:21.167

尝试使用：

```
Moq.It.Is<string>(x => x.StartsWith("ABC")) 
```

# joomla-template - 无法在 Joomla 2.5 模板中正确检测 Frontpage

> ID：10781967
> 
> 赞同：3
> 
> 时间：2012-05-28T09:02:33.233
> 
> 标签：joomla-template, joomla2.5, frontpage

我在 Joomla 文档中看到了在 Joomla 2.5 中创建模板时检测您是否在 Frontpage 中的方法。这是代码：

```
<?php 
$app = JFactory::getApplication(); 
$menu = $app->getMenu(); 
if ($menu->getActive() == $menu->getDefault()) { 
    echo 'This is the front page'; 
} 
?> 
```

这在您位于主页（或单击主页菜单）时有效，但我在主页中有一个滑块，并且我在滑块中链接到不在应用程序任何菜单项中的文章。当我加载这篇文章时，上面的代码会像我在首页一样返回。我想如果我不点击任何菜单项， $menu->getActive() 不会改变。

有什么建议吗？提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-28T15:04:19.537

你可以做一件事来解决这个问题。创建所有链接在滑块中的文章链接的隐藏菜单。通过创建隐藏菜单，链接将被初始化，$menu->getActive() 将对所有链接起作用。希望它对你有用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-06-10T14:13:32.177

我希望补充目前的答案并提供一些说明。

为了检测菜单选择，需要将页面分配给菜单项。如果这是一个隐藏菜单，那么指向名为“我的页面”的此类页面的链接将是：

**/index.php/my-page** - “my-page” 是该项目的菜单标题别名

但是，如果想要在同一页面的**面包屑**中显示正确的层次结构，则必须在隐藏菜单中复制菜单层次结构。

例如，如果“我的页面”在“我的文章”主菜单项下，则应在隐藏菜单中添加“我的文章”项，类型为：菜单项别名，位于菜单类型字段的系统子菜单中。我的页面项应该是我的文章的子菜单项。

隐藏菜单中的“我的文章”菜单项必须具有与主菜单中相同的不同的菜单别名，因此指向“我的页面”的新链接如下所示：

**/index.php/my-articles2/我的页面**

要创建隐藏菜单，只需创建另一个菜单。是否为它创建一个模块并不重要，但如果这样做了，那么就不应该为该模块分配任何位置。

# java - 如何在 Hadoop 中显式指定 map 节点或 reduce 节点

> ID：10781968
> 
> 赞同：1
> 
> 时间：2012-05-28T09:02:38.520
> 
> 标签：java, hadoop, mapreduce

是否有任何 .xml 文件或类似文件明确指定我要运行 Map 任务或 Reduce Task 的节点。如果这是依赖于 hadoop 架构，那么如何指定节点。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-30T04:52:59.230

不，没有这样的功能。

我怀疑是否会创建这样的功能，因为这会破坏可伸缩性和容错特性。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-28T09:23:30.023

您无需指定要在其上运行任务的节点。Hadoop map-reduce 自己完成。

# cocoa-touch - 当我 makeKeyAndVisible 时两个 UIViewController 之间的动画

> ID：10781971
> 
> 赞同：0
> 
> 时间：2012-05-28T09:03:04.200
> 
> 标签：cocoa-touch, cocoa

我正在尝试制作动画以在我拥有的两个 UIViewController 之间切换。但是当动画运行时，旧的 UIViewController 是白色的。

```
 // viewController is the new UIViewController 
[UIView animateWithDuration:0.6 
        delay:0 
    options:UIViewAnimationOptionCurveLinear 
        animations:^(void){
             [viewController.view setTransform:CGAffineTransformMakeTranslation(0, -460)];
        }
        completion:^(BOOL finished){
             if (finished){
                //
             }
        }
    ];

    [[[[UIApplication sharedApplication] delegate] window] setRootViewController:viewController];
    [[[[UIApplication sharedApplication] delegate] window] makeKeyAndVisible]; 
```

我有一个始终具有 UIViewController 的对象：

```
@interface ManagerViews : NSObject {

    UIViewController *oneController;
    UIViewController *twoController;
    ...
}
@property(nonatomic, retain) UIViewController *oneController;
@property(nonatomic, retain) UIViewController *twoController;
... 
```

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-28T09:07:41.513

您是否尝试将旧的 UIViewController 设置为“nil”或（我的 Objective-C 专业知识有点生疏）重置？

# c# - 在标签标题或源 Visual Studio 加载项下添加文件

> ID：10781975
> 
> 赞同：0
> 
> 时间：2012-05-28T09:03:20.860
> 
> 标签：c#, visual-studio-2010, visual-studio

使用以下代码，我可以将新文件添加到 Visual Studio 项目中。

```
 DTE dte = GetService(typeof(DTE)) as DTE;
            System.Array theProjects = (System.Array)dte.ActiveSolutionProjects;
            EnvDTE.Project theProject = null;
            if (theProjects.Length > 0)
            {
                theProject = (EnvDTE.Project)(theProjects.GetValue(0));
                EnvDTE.ProjectItem projItem = null;
                projItem  = theProject.ProjectItems.AddFromFile(@"E:\Avinash\test.cpp");
            } 
```

但是如果我必须添加一个`header file`，我如何在`header`标签下添加它。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-28T21:01:56.953

If I correctly understand what you are trying to do, I think you mean that you want to add your header files in the header folder. If it's already there you have to look for it among the items for your project. I.e. you have to loop looking for the ProjectItem with the name you are looking for. If it's not already there, you can add it using the AddFolder of ProjectItemsCollection, which returns the newly created ProjectItem. In either case you end up with a ProjectItem representing the headers folder. Now you can add your file to the ProjectItems of this object instead of the ProjectItems of the Project. Something like this:

```
theProject = (EnvDTE.Project)(theProjects.GetValue(0));
EnvDTE.ProjectItem projItem = null;
EnvDTE.ProjectItem hdrProjItem = theProject.ProjectItems.AddFolder("Header files", null);
projItem  = hdrProjItem.ProjectItems.AddFromFile(@"E:\Avinash\test.cpp"); 
```

Anyway, I still think a template could avoid you much effort and pain

# windows-8 - 如何在 Windows 8 HTML 应用程序中正确地进行分页和管理内存？

> ID：10781976
> 
> 赞同：1
> 
> 时间：2012-05-28T09:03:38.300
> 
> 标签：windows-8

我有一个我认为在许多应用程序中很常见的要求：分页。我选择使用“按下加载 10 个以上”模式，我认为它在 Metro 应用程序中看起来更好，而不是使用页码。

我面临的问题与内存有关。我加载了前 10 个项目，其中包含一些图像，当我按下“加载更多”时，我注意到应用程序的内存按比例增加，显然是因为加载了图像。它很快就会达到 150MB 内存限制，操作系统实际上可能会杀死该应用程序。

我在想的是，在您滚动到下一页后，是否有某种方法可以将不再可见的图像从内存中卸载。这由 iOS 使用 GetCell 方法优雅地处理，但在 Windows 8 Javascript 模型中是否存在等效模式？

谢谢， 提莫

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-28T22:37:51.667

Metro 风格的应用程序通常使用数据虚拟化进行无限滚动。查看Metro 风格应用程序中的数据虚拟化[构建会话：](http://www.buildwindows.com/)

*   [使用 XAML 构建精美的集合和列表应用程序](http://channel9.msdn.com/Events/BUILD/BUILD2011/APP-517T)
*   [使用 XAML 构建数据驱动的集合和列出应用程序](http://channel9.msdn.com/Events/BUILD/BUILD2011/APP-912T)
*   [在 HTML5 中构建精美的集合和列表应用程序](http://channel9.msdn.com/Events/BUILD/BUILD2011/APP-209T)
*   [使用 HTML5 中的 ListView 构建数据驱动的集合和列表应用程序](http://channel9.msdn.com/Events/BUILD/BUILD2011/APP-210T)

例如：[HTML ListView 使用数据源示例](http://code.msdn.microsoft.com/windowsapps/ListView-custom-data-4dcfb128)

# php - 使用带有标头的 php 下载在 IE8 上不起作用

> ID：10781977
> 
> 赞同：3
> 
> 时间：2012-05-28T09:03:39.410
> 
> 标签：php, header, download, phpexcel

我正在尝试下载带有 php 标头的动态生成的 excel 文件：

```
$filename = "assets.xls";
header('Content-Type: application/vnd.ms-excel');
header("Content-Disposition: attachment;filename=$filename");
header('Cache-Control: max-age=0');
$objWriter = PHPExcel_IOFactory::createWriter($objPHPExcel, 'Excel5');
$objWriter->save('php://output'); 
```

但这在 IE8 上不起作用（但在其他一些带有 IE8 的电脑上工作？？？！！）。IE8 尝试下载 export.php 文件而不是 assets.xls。知道为什么 IE8 会这样做吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-28T09:09:00.833

尝试[按照 HTTP 规范](http://www.w3.org/Protocols/rfc2616/rfc2616-sec19.html#sec19.5.1)正确格式化标头，在文件名和文件名之间使用空格`;`和`filename`引号：

```
header('Content-Disposition: attachment; filename="' . $filename . '"'); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2014-01-06T06:32:51.013

我遇到了同样的问题。我使用以下方法来解决问题。

```
header("Cache-Control: private");
header("Content-Type: application/vnd.ms-excel");
header("Content-disposition: attachment; filename=$filename"); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-19T20:30:10.677

我有一个类似的问题。我在 Content-Deposition 标头之前添加了以下标头。

```
header("Content-type: text/csv");
header("X-Download-Options: noopen");
header("Content-Disposition: attachment; filename=\"ExcelFileName.csv\""); 
```

它似乎对我有用。但是，您必须先保存文件。你不能马上打开。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-01T19:46:26.357

我有完全相同的问题！刚刚通过删除“Content-Type”标头使其工作，所以我猜 IE8 不能很好地与该类型一起使用..？目前还不确定最好的选择是什么，但这绝对是我的球员。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-01T14:32:54.463

**尝试这个：**

```
$filename   =   'Excel_Sheet_'.date('Ymd').".xls";

header("Cache-Control: public");
header("Content-Description: File Transfer");
header("Content-Disposition: attachment; filename=$filename");
header("Content-Type: application/vnd.ms-excel; "); 
header("Content-Transfer-Encoding: binary");
header('Cache-Control: max-age=0');
ob_clean();
$objWriter = PHPExcel_IOFactory::createWriter($objPHPExcel, 'Excel5');
$objWriter->save('php://output');
exit; 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2016-02-17T17:34:24.247

在试图解决一个类似的问题一整个下午后，我发现了这个设置

`header("Cache-Control: private");`

是最好的解决方案。我已经尝试过确保`Content-Length`,`Content-Type`并`Content-Disposition`已设置并正确格式化。问题实际上是**新的 IE8 窗口和选项卡**似乎不像第一次发生时通过 PHP 标头发送的下载。在初次尝试后重试文件时，它工作正常（在我的情况下）。

`Cache-Control`如上所述设置后，我的所有链接在 IE8 中都可以正常工作。

# c# - C# - 从基本方法完全返回

> ID：10781993
> 
> 赞同：7
> 
> 时间：2012-05-28T09:04:31.307
> 
> 标签：c#, inheritance, methods, base, derived

我有一个`void Action()`在派生类中被覆盖的虚拟基方法。

Action 的第一步是调用`base.Action()`. 如果基本方法中发生某种情况，我不希望处理派生方法的其余部分。

我想知道是否有一个关键字或设计模式可以让我从基方法中退出派生方法。

目前我正在考虑将 void 更改为 bool 并将其用作流控制，但我想知道是否还有其他设计模式可以使用。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-28T09:06:46.870

这是错误的“情况”吗？如果是这样，只需让它抛出异常，并且不要在覆盖范围内捕获异常。

如果这不是错误情况，那么使用返回类型确实听起来像是一种前进的方式，但它可能不适合您的上下文 - 我们真的不知道您想要实现什么。

另一种选择是使用[*模板方法模式*](http://en.wikipedia.org/wiki/Template_method_pattern)：

```
public abstract class FooBase
{
    public void DoSomething()
    {
        DoUnconditionalActions();
        if (someCondition)
        {
            DoConditionalAction();
        }
    }

    protected abstract void DoConditionalAction();
} 
```

如果您不想使基类抽象，则可以将其设为受保护的虚拟方法，该方法在基类中不执行任何操作，并在适当的情况下在派生类中被覆盖。注意`DoSomething`这里*不是*虚拟的。

如果这些选项听起来都不合适，您需要向我们提供有关您要实现的目标的更具体信息。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-28T09:10:01.003

不要将它与 `void`返回类型一起使用，但可以这样做，比如`bool`

```
public class Base
{
    public virtual bool Action()
    {
       ..
       return boolean-value.
    }
}

public class Child : Base
{
    public override bool Action()
    {
       if(!base.Action()) 
         return false;

       ....
       return boolean-value;
    }
} 
```

或者，如果这是一个例外情况，请提出一个例外，就像其他人建议的那样。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-28T09:07:40.500

在基本方法中抛出异常。它将退出调用它的每个方法，直到它被捕获。

# java - 将泽西岛与 RMI 集成

> ID：10781995
> 
> 赞同：0
> 
> 时间：2012-05-28T09:04:42.980
> 
> 标签：java, jersey, rmi

我有一个 Java Jersey 项目，我正在其中运行一个应用程序。另一方面，我有一个项目，如果有一个 RMI 应用程序，我怎样才能将这两个应用程序一起工作。换句话说，我如何将 RMI/IIOP 集成到 Jersey 应用程序中。

我在想这样的事情：

```
@Path("/items")
public class ItemsResource {
    @Context
    UriInfo uriInfo;
    @Context
    Request request;
        Stuber s = new Stuber();

    @GET
    public Response get() throws RemoteException {
        } 
```

如果我在 Jersey 项目中有一个外部类，它将作为客户端与 RMI/IIOP 连接

```
public class Stuber {
    Context ic;
    iRemoteLogic logic;

    public Stuber() {
        super();

        Object objref;

            try {
                ic = new InitialContext();

                objref = ic.lookup("LogicService");
                System.out.println("Client: Obtained a ref. to Hello server.");

                logic = (iRemoteLogic) PortableRemoteObject.narrow(
                        objref, iRemoteLogic.class); 
```

我应该向 Stuber 类添加什么才能作为 RMI/IIOP 客户端工作？

谢谢 ：）

注意：我按照[本教程](http://docs.oracle.com/javase/1.4.2/docs/guide/rmi-iiop/tutorial.html)学习 RMI/IIOP

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-28T09:46:10.303

您需要在某处提供`iRemoteService`通过 RMI/IIOP（即`PortableRemoteObject`）导出的实现，并通过 JNDI 将其注册为`LogicService`. 我怀疑后者是否可行：您肯定需要为 JNDI 提供协议和主机。

# python-3.x - 运行 CGI 脚本

> ID：10781998
> 
> 赞同：0
> 
> 时间：2012-05-28T09:04:59.973
> 
> 标签：python-3.x

我已经为 python 中的登录页面编写了 cgi 脚本，但我不熟悉运行 CGI 脚本？请帮助我提供运行脚本的步骤？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-30T03:48:01.593

询问您的网络主机：

1）对于一个简单的“你好，世界”脚本（我假设在 Python 中）可以在他们的服务器上运行

2）你需要存储文件的位置（在服务器文件系统中）

3）你需要给它命名（例如：index.py 或 .py 或其他）

4) 脚本文件需要具备哪些权限（向他们询问您可以使用的“setfacl”命令），以及

5) 调用它的 URL 是什么

如果其中任何一项稍有错误，您的脚本将无法运行。如果一切顺利，那么您的 CGI 脚本将返回一个“Hello, world”网页。

那时，您一次一点地修改您的脚本，对它的每一步进行测试，直到它完成您想要它做的事情。