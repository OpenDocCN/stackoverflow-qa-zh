# StackOverflow 问答 12094000-12094999

# java - 从文件中读取 unicode 数据

> ID：12094000
> 
> 赞同：0
> 
> 时间：2012-08-23T14:31:26.933
> 
> 标签：java

默认编码为 ISO-8859-1

```
 BufferedReader bis = new BufferedReader(new InputStreamReader(new FileInputStream("file having unicode characters"),"UTF-8"));
    String strTemp = bis.readLine();// on debugging strTemp is having actual unicode data

    System.out.println(strTemp);// uses default encoding which is ISO-8859-1,So not printing   ///actual data

   PrintStream psTemp = new PrintStream(System.out, true, "UTF-8");
   psTemp.println(strTemp);// here i am giving encoding as UTF-8,still not printing unicode data. 
```

即使我在 PrintStream 构造函数中将编码为 UTF-8，我也无法打印 unicode 数据，如果我将默认编码从 ISO-8859-1 更改为 UTF-8，它也可以工作。为什么会这样？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-23T14:38:07.613

> 如果我将默认编码从 ISO-8859-1 更改为 UTF-8，它可以工作。为什么会这样？

我希望这可行，因为它告诉您的控制台/外壳/任何显示字符的东西都需要 UTF-8 字符。如果默认行为是期望 ISO-8859-1，那么发送 UTF-8 将不起作用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-23T14:39:45.720

你在 Eclipse 控制台上打印吗？还是在壳里？尝试打印到文件并检查结果。

例如，Windows shell 仅限于“cp850”字符集。问题可能是由 OS shell 而不是 JVM 引起的。

# objective-c - NSDecimalNumber 的 NSDecimalNumber 次幂

> ID：12094011
> 
> 赞同：4
> 
> 时间：2012-08-23T14:32:01.187
> 
> 标签：objective-c, ios, xcode, math, nsdecimalnumber

我有两个 NSDecimalNumbers，我需要将一个应用到另一个的幂，最初这段代码使用双精度数，我可以使用 pow() 函数计算它，如下所示：

```
double result = pow(value1, value2); 
```

我遇到的问题是我将代码转换为使用 NSDecimalNumbers，虽然它们包含 toThePowerOf 方法，但它只接受 int 值。目前我对这个问题的唯一解决方案是临时转换 NSDecimalNumbers 但这会导致精度损失。

```
double value1 = [decimal1 doubleValue];
double value2 = [decimal2 doubleValue];

double result = pow(value1, value2);
NSDecimalNumber *decimalResult = [[NSDecimalNumber alloc] initWithDouble:result]; 
```

有没有办法我可以用 NSDecimalNumbers 来做这个计算而不会失去精度？

我需要它来处理非整数值，例如：

```
value1 = 1.06
value2 = 0.0277777777 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-23T15:21:27.953

正如 Joe 指出的那样，如果您想为正整数幂执行此操作，您可以使用`NSDecimalPower()`从您的 NSDecimalNumber 派生的 NSDecimal 结构（出于[性能原因](https://stackoverflow.com/questions/1704504/what-is-the-right-choice-between-nsdecimal-nsdecimalnumber-cfnumber/1710277#1710277)，我个人更喜欢使用这些结构）。

对于使用负整数和小数值的更一般情况，我有一些我从 Dave DeLong 的 DDMathParser 库中修改的代码。他已经删除了这个库的 NSDecimal 部分，但是你可以找到[这个支持的最后一次提交](https://github.com/davedelong/DDMathParser/commit/6121b9d8c3651bcafeb8d89063471b1ba2aa9d3c)。我将 Dave 的指数支持扩展到以下函数：

```
extern NSDecimal DDDecimalPower(NSDecimal d, NSDecimal power) {
    NSDecimal r = DDDecimalOne();
    NSDecimal zero = DDDecimalZero();
    NSComparisonResult compareToZero = NSDecimalCompare(&zero, &power);
    if (compareToZero == NSOrderedSame) {
        return r;
    }
    if (DDDecimalIsInteger(power))
    {
        if (compareToZero == NSOrderedAscending)
        {
            // we can only use the NSDecimal function for positive integers
            NSUInteger p = DDUIntegerFromDecimal(power);
            NSDecimalPower(&r, &d, p, NSRoundBankers);
        }
        else
        {
            // For negative integers, we can take the inverse of the positive root
            NSUInteger p = DDUIntegerFromDecimal(power);
            p = -p;
            NSDecimalPower(&r, &d, p, NSRoundBankers);
            r = DDDecimalInverse(r);
        }
    } else {
        // Check whether this is the inverse of an integer        
        NSDecimal inversePower = DDDecimalInverse(power);
        NSDecimalRound(&inversePower, &inversePower, 34, NSRoundBankers); // Round to 34 digits to deal with cases like 1/3

        if (DDDecimalIsInteger(inversePower))
        {
            r = DDDecimalNthRoot(d, inversePower);
        }
        else
        {
            double base = DDDoubleFromDecimal(d);
            double p = DDDoubleFromDecimal(power);
            double result = pow(base, p);
            r = DDDecimalFromDouble(result);
        }        
    }
    return r;
} 
```

这将对直接映射到根的正整数幂、负整数幂和分数幂进行精确计算。但是，它仍然依靠浮点计算来计算不完全落入其中一个箱的分数幂。

不幸的是，这需要他的一些其他支持功能才能工作。因此，我上传了提供此功能的他的[_DDDecimalFunctions.h](http://sunsetlakesoftware.com/sites/default/files/_DDDecimalFunctions.h)和[_DDDecimalFunctions.m的增强版本。](http://sunsetlakesoftware.com/sites/default/files/_DDDecimalFunctions.m)它们还包括 NSDecimal 三角函数、对数和其他一些函数。目前在切线实现上存在一些收敛问题，这就是为什么我还没有完成关于此的公开帖子。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-06-13T06:15:29.390

我最近遇到了同样的问题，并开发了我自己的函数来做到这一点。函数 has 将计算任何基数，只要它产生一个真实的答案，如果它确定一个真实的答案不能被计算它返回`NSDecimalnumber.notANumber`

我已经发布了我的解决方案作为对我发布的相同问题的答案，所以[这里](https://stackoverflow.com/questions/24174239/how-does-the-pow-function-work)是链接。

# php - 如何在cli执行php代码？

> ID：12094012
> 
> 赞同：-1
> 
> 时间：2012-08-23T14:32:03.050
> 
> 标签：php

我想在 cli 上运行简单的代码并检查 php 设置 max_execution_time 的值。当然，我可以在 php.ini 或 .htaccess 中查看。我尝试使用 cli

```
php -a
echo ini_get('max_execution_time'); 
```

但它总是返回 0。有没有办法在 cli 上检查它？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-23T15:29:08.737

你得到的原因`0`是因为你是`echo`ing 的结果`ini_set('max_execution_time')`。

根据[手册](http://php.net/manual/en/function.ini-set.php)，`ini_set()`需要***两个***参数，并`FALSE`在失败时返回。通过只提供一个参数，您会导致函数`FALSE`每次都返回。

如果你想得到**你**`max_execution_time`应该调用的值[`ini_get()`](http://php.net/manual/en/function.ini-get.php)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-23T14:34:22.670

您可以使用以下内容检查执行时间

```
linux-1:~$ php -i | grep max_execution
max_execution_time => 0 => 0 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-23T14:35:14.240

我认为您在这里要做的是从 ini 配置中**获取值。**为此，您需要使用[`ini_get()`](http://www.php.net/manual/en/function.ini-get.php)

最大执行时间为零仅意味着没有限制。脚本永远不会超时。这是从命令行运行 PHP 时的默认行为

取自[文档](http://us.php.net/manual/en/info.configuration.php#ini.max-execution-time)-

> ### max_execution_time -
> 
> 这设置了脚本在被解析器终止之前允许运行的最长时间（以秒为单位）。这有助于防止编写不佳的脚本占用服务器。默认设置为 30。**从命令行运行 PHP 时，默认设置为 0。**

# eclipse - Unity3D和QCAR项目“Unable to find QCARWrapper”导入Eclipse后报错

> ID：12094013
> 
> 赞同：1
> 
> 时间：2012-08-23T14:32:05.133
> 
> 标签：eclipse, unity3d, qcar-sdk

我制作了一个 Unity3D+QCAR 项目并尝试将其导入 eclipse，但是当我在手机上运行 apk 时，LogCat 上出现错误“无法找到 QCARWrapper”，并且相机未激活。

你知道我该如何解决这个问题吗？

提前致谢。

# xml - XPath - 确定一棵树是否只有一种类型的“叶”节点

> ID：12094018
> 
> 赞同：1
> 
> 时间：2012-08-23T14:32:25.727
> 
> 标签：xml, xslt, xpath, xpathnavigator

我需要一个 XPath 表达式来验证 XML 列表元素是否只有某种类型的节点。例子：

我需要知道列表是否只有图像。

```
<?xml version="1.0" encoding="UTF-8"?>

<mc type="group"> 
  <mc type="list"> 
    <mc type="group"> 
      <mc type="image"/> 
    </mc>  
    <mc type="group"> 
      <mc type="image"/> 
    </mc>  
    <mc type="group"> 
      <mc type="image"/> 
    </mc>  
    <mc type="group"> 
      <mc type="image"/> 
    </mc> 
  </mc> 
</mc> 
```

上面的 XML 是 TRUE

```
<?xml version="1.0" encoding="UTF-8"?>

<mc type="group"> 
  <mc type="list"> 
    <mc type="group"> 
      <mc type="image"/> 
    </mc>  
    <mc type="group"> 
      <mc type="image"/> 
      <mc type="text"/>
    </mc>  
    <mc type="group"> 
      <mc type="image"/> 
    </mc>  
    <mc type="group"> 
      <mc type="image"/> 
    </mc> 
  </mc> 
</mc> 
```

上面的 XML 是 FALSE

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-23T16:01:15.223

**使用**：

```
not(//mc[not(mc) and @type[not(. = 'image')]]) 
```

`true()`当且仅当不存在其属性`mc`的 string-value 与 string 不同的“叶子”元素时，这将评估为。`type``"image"`

**解释**：正确使用“*[双重否定法](http://en.wikipedia.org/wiki/Double_negation)*”。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-23T14:38:17.930

您可以检查`not(/mc/mc[@type = 'list']//mc[not(@type = 'image')])`是否从文档节点开始作为上下文节点，或者`not(.//mc[not(@type = 'image')])`是否从具有属性的`mc`元素开始。`type="list"`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-23T14:40:44.957

您可以使用一个或多个的否定：`not(one-or-more(mc[not(@type = 'image')]))`或类似的。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-23T15:20:57.993

或者愚蠢/简单的方法，检查所有 mc 元素，如果它们不是图像/组/列表：

```
not(//mc[not(@type = ("image", "group", "list"))]) 
```

# r - 使用 r 中距离的 data.frame 创建一个“不均匀”的距离矩阵

> ID：12094019
> 
> 赞同：1
> 
> 时间：2012-08-23T14:32:31.000
> 
> 标签：r, matrix, dataframe, distance

我有一个距离数据框，我想用它来创建热图。为此，我必须首先从 data.frame 创建一个距离对象。我的 data.frame 是“不均匀的”，即我将一个站点的 2 个物种与另一个站点的 3 个物种进行比较：

```
 df<-data.frame("Sp1"=rep(c("a","b","c"),2),"Sp2"=c(rep("d",3),rep("e",3)),"Dist"=1:6)

  Sp1 Sp2 Dist
1   a   d    1
2   b   d    2
3   c   d    3
4   a   e    4
5   b   e    5
6   c   e    6 
```

我已尝试调整先前的答案，但似乎不起作用我的距离矩阵将不均匀，即 3x2 矩阵

```
 dij2 <- with(df, Dist)

 names <- with(df, unique(c(as.character("Sp1"), as.character("Sp2"))))

 dij3 <- with(df, structure(Dist,
                        Size = length(names),
                        Labels = names,
                        Diag = FALSE,
                        Upper = TRUE,
                       method = "user",
                        class = "dist")) 
```

感谢您对此事的任何建议

# javascript - Javascript元标记日期比较和重定向

> ID：12094020
> 
> 赞同：0
> 
> 时间：2012-08-23T14:32:36.570
> 
> 标签：javascript, meta-tags

我正在尝试在页面加载之前读取元标记过期，如果它已经过期而不显示此页面，则重定向到其他 url。我的过期标签看起来像这样`<META HTTP-EQUIV="Expires" CONTENT="Tue, 21 Aug 2012 14:30:00 GMT">`

我完成当前日期的方式我认为我无法将我的元标记日期与它进行比较。有人可以告诉我我必须修改什么才能使其正常工作。谢谢

```
<body onload="compareDate()"> 

function getExpiresContent() { 
   var metas = document.getElementsByTagName('meta'); 

   for (i=0; i<metas.length; i++) { 
      if (metas[i].getAttribute("property") == "Expires") { 
         return metas[i].getAttribute("content"); 
      } 
   } 

    return "";
}

function compareDate(){
   var expiresDateString = getExpiresContent();
   var expiresDate= new Date(expiresDateString);
   var currentDate = new Date();
   var day = currentDate.getDate();
   var month = currentDate.getMonth() + 1;
   var year = currentDate.getFullYear();
   var today = ("<b>" + day + "/" + month + "/" + year + "</b>");

   if (expiresDate < today){
    window.navigate(”top.jsp”);
   }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-23T15:28:32.830

如果您想在页面加载之前捕获它，则需要在 HEAD 中使用脚本块。将您的函数放在脚本块中，然后在之后立即调用您的函数：

```
<script type='text/javascript'>
function getExpiresContent() {
...
}

function compareDate() {
...
)

compareDate()
</script> 
```

为了比较日期，您需要获取“过期”值并构建一个日期对象（不是字符串），然后将其与当前日期进行比较。

请参阅有关数据对象如何工作的出色解释：

[http://www.elated.com/articles/working-with-dates/](http://www.elated.com/articles/working-with-dates/)

# c# - 替换包含特定文本但仅在特定行的所有文件中的字符串

> ID：12094021
> 
> 赞同：1
> 
> 时间：2012-08-23T14:32:38.457
> 
> 标签：c#, file-io, full-text-search, replace

我需要获取包含字符串 MySettings.xru 的目录及其子目录中的所有 *.config 文件。

在找到的所有这些文件中，仅在包含字符串 MySettings.xru 的行上，我需要将文本 db001 替换为 db002。

因此，例如，如果我有：

```
RandomSettings.xru someOtherWords Database=db001 blah, blah, blah...
MySettings.xru Lalala Database=db001 blah, blah, blah...
YourSettings.xru Hey yo Database=db001 blah, blah, blah... 
```

结果应该是：

```
RandomSettings.xru someOtherWords Database=db001 blah, blah, blah...
MySettings.xru Lalala Database=db002 blah, blah, blah...
YourSettings.xru Hey yo Database=db001 blah, blah, blah... 
```

谢谢！

更新：自己解决了。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-23T15:33:02.443

这是我的解决方案：

```
string[] filePaths = Directory.GetFiles(@"C:\test\", "*.config", SearchOption.AllDirectories);

int counter = 0;
string currentFile = string.Empty;
string currentLine = string.Empty;
string updatedLine = string.Empty;

foreach (string file in filePaths)
{
    currentFile = File.ReadAllText(file);

    if (currentFile.Contains("MySettings.xru"))
    {
        counter++;
        Debug.Print("Found in " + file);

        using (StreamReader streamReader = new StreamReader(file))
        {
            while (!streamReader.EndOfStream)
            {
                currentLine = streamReader.ReadLine();

                if (currentLine.Contains("MySettings.xru"))
                {
                    updatedLine = currentLine.Replace("db001", "db002");

                    break;
                }
            }
        }

        currentFile = currentFile.Replace(currentLine, updatedLine);

        // If file is ReadOnly then remove that attribute.
        FileAttributes attributes = File.GetAttributes(file);
        if ((attributes & FileAttributes.ReadOnly) == FileAttributes.ReadOnly)
            File.SetAttributes(file, attributes ^ FileAttributes.ReadOnly);

        using (StreamWriter streamWriter = new StreamWriter(file))
        {
            streamWriter.Write(currentFile);
        }
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-08-06T15:52:16.060

在上面的回答中；

> string[] filePaths = Directory.GetFiles(@"C:\test\", *.config",SearchOption.AllDirectories);

指定搜索模式和搜索选项对我不起作用（无论出于何种原因）。然而，简单地提及搜索目录也可以解决问题。

> string[] filePaths = Directory.GetFiles(searchDirectory);

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-01-16T11:20:54.503

将此评论仅视为提示：如果您有 Visual Studio，则可以在解决方案中包含文件夹并使用 Visual Studio 的搜索和替换功能。祝你好运

# c# - C#：如何以编程方式检查 Web 服务是否已启动并正在运行？

> ID：12094024
> 
> 赞同：20
> 
> 时间：2012-08-23T14:32:46.280
> 
> 标签：c#, asp.net, .net, wcf, web-services

我需要创建一个 C# 应用程序来监控一组 Web 服务是否启动并运行。用户将从下拉列表中选择服务名称。程序需要用对应的服务 URL 进行测试，并显示服务是否在运行。最好的方法是什么？我正在考虑的一种方法是测试我们是否能够下载 wsdl。有没有更好的办法？

注意：此应用程序的目的是用户只需要知道服务名称。他不需要记住/存储服务的相应 URL。

我需要这个 C# 应用程序的网站版本和桌面应用程序版本。

注意：现有服务使用 WCF。但将来可能会添加非 WCF 服务。

注意：我的程序不会知道（或不感兴趣）服务中的操作。所以我不能调用服务操作。

参考

1.  [如何在不使用 ping 的情况下检查 Web 服务是否已启动并运行？](https://stackoverflow.com/questions/10206951/how-to-check-if-a-web-service-is-up-and-running-without-using-ping)
2.  [C程序-如何检查Web服务是否正在运行](https://stackoverflow.com/questions/6077392/c-program-how-do-i-check-if-a-web-service-is-running)

* * *

## 回答 #1

> 赞同：40
> 
> 时间：2012-08-23T14:54:11.053

这不能保证功能，但至少您可以检查与 URL 的连接：

```
var url = "http://url.to.che.ck/serviceEndpoint.svc";

try
{
    var myRequest = (HttpWebRequest)WebRequest.Create(url);

    var response = (HttpWebResponse)myRequest.GetResponse();

    if (response.StatusCode == HttpStatusCode.OK)
    {
        //  it's at least in some way responsive
        //  but may be internally broken
        //  as you could find out if you called one of the methods for real
        Debug.Write(string.Format("{0} Available", url));
    }
    else
    {
        //  well, at least it returned...
        Debug.Write(string.Format("{0} Returned, but with status: {1}", 
            url, response.StatusDescription));
    }
}
catch (Exception ex)
{
    //  not available at all, for some reason
    Debug.Write(string.Format("{0} unavailable: {1}", url, ex.Message));
} 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2017-10-25T12:10:12.890

我可能回答得太晚了，但这种方法对我有用。我使用 Socket 来检查进程是否可以连接。如果您尝试检查连接 1-3 次，则 HttpWebRequest 有效，但如果您的进程将运行 24 小时并且不时需要检查将不再工作的网络服务器可用性，因为会抛出 TimeOut 异常。

```
Socket socket = new Socket(AddressFamily.InterNetwork, SocketType.Stream, ProtocolType.Tcp);
                var result = socket.BeginConnect("xxx.com", 80, null, null);
                bool success = result.AsyncWaitHandle.WaitOne(3000,false); // test the connection for 3 seconds
                var resturnVal = socket.Connected;
                if (socket.Connected)
                    socket.Disconnect(true);
                socket.Dispose();
                return resturnVal; 
```

# iterator - 扁平化迭代器是什么意思？

> ID：12094028
> 
> 赞同：0
> 
> 时间：2012-08-23T14:32:57.037
> 
> 标签：iterator, flatten

我想知道展平例如展平迭代器的迭代器意味着什么。你能告诉我吗？是否有任何 C/Java/Python 习语？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-23T14:38:30.660

在这种情况下，展平意味着去除嵌套。例如，一个整数数组（每个元素都是一个数组的数组）是嵌套的；如果我们将它展平，我们会得到一个整数数组，其中包含相同顺序的相同值，但在单个数组中彼此相邻，而不是分成几个数组`[[1 2] [3 4]] -> [1 2 3 4]`：与迭代器、其他集合和更深的嵌套（字符串迭代器集合的数组）的区别相同。

至于习语，实际上并不多——这不是一项常见的任务，而且通常很简单。请注意，对于常规数组（所有嵌套数组的大小相同），`nested[i][j]`等价于`nested[i * INNER_ARRAY_SIZE + j]`. 这有时用于避免嵌套，特别是在将数组视为引用类型的语言中，因此如果嵌套它们，则需要许多单独分配的数组。在 Python 中，您可以使用[`itertools.chain(*iterable_of_iterables)`](http://docs.python.org/py3k/library/itertools.html#itertools.chain).

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-26T16:02:52.087

扁平化意味着移除序列类型的嵌套。Python 提供`itertools.chain(*iterables)`了这个目的（http://docs.python.org/library/itertools.html#itertools.chain）。

# android - 滚动时禁用 ListView 中的复选框

> ID：12094030
> 
> 赞同：0
> 
> 时间：2012-08-23T14:33:03.353
> 
> 标签：android, listview

我有一个`ListView`每个地方`ListItem`都有一个`CheckBox`布局。当 a`CheckBox`被激活并滚动出可见区域时，它就会被停用。我知道`ListView`重用了`Views`并且我必须`CheckBoxes`在我的`getView()`方法中保存状态，但是我有两个问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-23T14:36:15.113

您正在尝试在字符串上调用 setSelected。您需要在复选框上调用它。变量“list”是字符串的 ArrayList。

在这两种情况下，您都试图在 String 类型上调用 Checkbox 方法。您需要在复选框上调用它们。

**编辑

您需要在 getView 中执行以下操作：

1.  如果convertView 不为null，则通过调用convertView 子级的适当方法将其状态保存到“viewholder”类。如果 convertView 为空，您正在尝试执行此操作，这是错误的。
2.  如果 convertView 为 null，那么它不是一个回收的视图，也没有什么可保存的。

基本上，您的代码应如下所示：

```
@Override
public View getView(final int position, View convertView, ViewGroup parent) {
    ViewHolder viewHolder = null;
    if (convertView == null) {
        LayoutInflater inflator = (LayoutInflater) context.getSystemService(Context.LAYOUT_INFLATER_SERVICE);
        convertView = inflator.inflate(R.layout.listitem, parent, false);
    } else {
        //you should change viewHolder to simply store a boolean, rather than the entire checkbox. It should just store whether or not the checkbox was checked.
        viewHolder = new ViewHolder();
        viewHolder.text = (TextView) convertView.findViewById(R.id.listcontent);
        viewHolder.isChecked = ((CheckBox) convertView.findViewById(R.id.cb)).isChecked();
        //do whatever else here
    }
    return convertView;
} 
```

# lsf - LSF - 获取已提交作业的 ID

> ID：12094035
> 
> 赞同：12
> 
> 时间：2012-08-23T14:33:11.577
> 
> 标签：lsf

假设我使用类似`bsub pwd`. 现在我想获取该工作的工作 ID，以便为下一个工作建立依赖关系。有什么方法可以让 bsub 返回作业 ID？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-23T14:41:52.680

作为参考，这是迄今为止我能想到的最佳解决方案。它利用了 bsub 将包含 ID 的行写入 STDOUT 的事实。

```
function nk_jobid {
    output=$($*)
    echo $output | head -n1 | cut -d'<' -f2 | cut -d'>' -f1
} 
```

用法：

```
jobid=$(nk_jobid bsub pwd) 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2013-09-12T15:11:52.783

Nils 和 Andrey 分别在 shell 和 C/C++ 环境中给出了这个特定问题的答案。出于构建依赖关系的目的，您还可以使用 -J 命名您的作业，然后根据作业名称构建依赖关系：

```
bsub -J "job1" <cmd1>
bsub -J "job2" <cmd2>
bsub -w "done(job1) && done(job2)" <cmd> 
```

[这里](https://stackoverflow.com/questions/12944237/lsf-bsub-how-to-specify-a-single-wrap-up-job-to-be-run-after-all-others-fin)有更多信息。

这也适用于作业数组：

```
bsub -J "ArrayA[1-10]" <cmd1>
bsub -J "ArrayB[1-10]" <cmd2>
bsub -w "done(ArrayA[3]) && done(ArrayB[5])" <cmd> 
```

您甚至可以进行逐个元素的依赖。以下作业的第*i*个元素仅在相应元素`ArrayB`达到`DONE`状态时运行：

```
bsub -w "done(ArrayB[*])" -J "ArrayC[1-10]" <cmd3> 
```

`-w` [您可以在此处](http://www-01.ibm.com/support/knowledgecenter/SSETD4_9.1.3/lsf_command_ref/bsub.w.1.html?lang=en)找到有关您可以指定的各种内容的更多信息。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-05-12T15:19:07.470

如果您使用 C++，您可以使用[lsblib](http://www.ccs.miami.edu/hpc/lsf/7.0.6/api_ref/)、 LSF C API 来提交作业。输入和输出是结构。特别是，输出结构包含作业 ID。

```
#include <lsf/lsbatch.h>    
LS_LONG_INT lsb_submit (struct submit *jobSubReq, struct submitReply *jobSubReply) 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-26T07:54:05.213

```
$jobid = "0"
bsub pwd > $jobid
cat $jobid 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-11-25T16:01:07.387

如果你只是想在提交后查看JOBID，大部分时候我只会使用bhist 或bhist -l 来查看正在运行的作业和详细信息。

```
$ bhist
Summary of time in seconds spent in various states:
JOBID   USER    JOB_NAME  PEND    PSUSP   RUN     USUSP   SSUSP   UNKWN   TOTAL
8664    F14r3   sample       2       0    187954  0       0       0       187956 
```

# java - 索引越界异常发生

> ID：12094037
> 
> 赞同：-2
> 
> 时间：2012-08-23T14:33:22.847
> 
> 标签：java, exception, indexoutofboundsexception

在下面的代码中，我收到以下错误：

```
java.lang.IndexOutOfBoundsException: Index: 1, Size: 1 
```

复制的ppList.size() 的大小为1

```
for (int domainData = 0; domainData < copiedppList.size(); domainData++) {
    if (domainData == 0) {
        firstValue.setNewValue(firstValue.getFieldValue());
        DomainItemFieldHistory oldValue = copiedppList.get(domainData + 1);
        if (firstValue.getFieldID().equals(oldValue.getFieldID())) {
            firstValue.setOldValue(oldValue.getFieldValue());
        }
    }
} 
```

以下行导致上述问题：

```
DomainItemFieldHistory oldValue = copiedppList.get(domainData + 1); 
```

我怎样才能避免这种情况？
可以添加什么条件来防止错误？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-23T14:35:17.513

将终止条件更改为`copiedppList.size() - 1`将防止越界异常。

数组索引是从零开始的，所以最后一个有效索引是`size() - 1`. 发布的代码可以迭代`size() - 1`但进行以下调用：

```
copiedppList.get(domainData + 1); 
```

导致异常。

如果循环必须遍历所有元素，那么您需要保护`+ 1`调用。例如：

```
if (domainData < copiedppList.size() - 1)
{
    copiedppList.get(domainData + 1); // This is now safe, assuming
                                      // nothing reduces the size of
                                      // copiedppList since the if check.
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-23T14:35:26.660

删除 +1。

`DomainItemFieldHistory oldValue = copiedppList.get(domainData)`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-23T14:35:28.637

你需要做出改变：

*   要么`get(domainData + 1);`=>`get(domainData);`
*   或`for (int domainData = 0; domainData < copiedppList.size(); domainData++)`=>`for (int domainData = 0; domainData < copiedppList.size() - 1; domainData++)`

原因：您的列表从 0 索引到 size - 1，因此在循环的最后一次迭代中，您尝试调用`list.get(size)`which 失败，因为没有这样的元素。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-23T14:35:45.167

如果`copiedppList.size() = 1`，则只有索引 0 有效

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-08-23T14:37:53.633

> 复制的ppList.size() 的大小为1

`.get(domainData + 1);`将导致它在超过指定大小的索引位置 [1] 处询问数据。

留着它`.get(domainData);`

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-08-23T14:43:00.703

自从

复制的ppList.size() 是`0`

所以在这种情况下你无法访问

```
copiedppList.get(domainData + 1); 
```

什么时候`domainData == 0`

您需要检查集合中是否有多个条目：

```
if (domainData == 0 && copiedppList.size() > 1) { 
```

# asp.net - Visual Studio 网站调试服务器

> ID：12094039
> 
> 赞同：1
> 
> 时间：2012-08-23T14:33:24.993
> 
> 标签：asp.net, asp.net-mvc, visual-studio, debugging, web-applications

我正在研究大学网站上的几页。因此，我必须从其他人更新它们的地方提取大量脚本、样式表、图像等。所有这些包含都合并到我要拉入 MVC 布局页面的 HTML 片段中。问题是，其中的所有路径都如下所示`src="/oit/includes/foo.css">`：我们在这里和那里使用几个不同的服务器，所以我想这是为了跨服务器、子域等的可移植性。那个代码不是我的。关键是，当我想调试我的网站时，它不会找到`localhost:1337/oit/includes...`等等。有没有办法让调试器认为我的页面在大学网络服务器上，或者我每次都必须发布这个？

我正在使用 Visual Studio 2012。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-24T06:08:36.423

您可以直接从正确的服务器引用资源，而不是使用相对 url：

```
<link rel="stylesheet" type="text/css" href="http://someserver/oit/includes/foo.css" /> 
```

# php - 在会话中保存数据库排序

> ID：12094043
> 
> 赞同：1
> 
> 时间：2012-08-23T14:33:40.187
> 
> 标签：php, database, sqlite, session

感谢stackoverflow上的人们，我在几天内就掌握了使用php进行数据库（sqlite）控制的大部分方面！！！并设法建立了一个基本的 crud cms。我现在正在做一些小的改进并坚持“在会话中保存数据库排序”。当我单击页面然后返回时，会话未保存。我到目前为止，这似乎是一个令人沮丧的绊脚石。这就是我所拥有的：

```
 session_start(); 
        $_SESSION['sort'] = $_GET['sort'];
        $savedsort = $_SESSION['sort']; // store session data

if(!empty($_GET['sort']) && ctype_alnum(trim($_GET['sort'])))
$sort = trim($_GET['sort']);?> ///if page is empty

    //links to sort data
<h2><?php echo $savedsort;?></h2>
        <table border="0" align="center" cellpadding="8" cellspacing="0" id="show"><tr><th width="5"><a href="?sort=id">ID</a></th><th>IMG</th><th><a href="?sort=name">NAME</a></th>
        <th width="10"><a href="?sort=cat">CAT</a></th></tr>

    //query string
    ///////////////////////////////////////sort columns ////////////////////////////////
    if($sort == $savedsort){
    $result = $db->query("SELECT * FROM '$table1' ORDER BY '$savedsort' ");
    }
    else{$result = $db->query("SELECT * FROM '$table1' ORDER BY id ");}
    //////////////////////////////////////////////////////////////////////////////////////
    foreach($result as $row){ 
```

...任何指针都非常感谢。提前致谢。

**现在保存在会话变量中，谢谢，**但不会更新查询字符串

```
session_start();
 if (isset($_GET['srt'])) 
{ $_SESSION['srt'] = $_GET['srt']; } 
$srt = $_SESSION['srt'];
<tr><th width="5"><a href="?srt=id">ID</a></th><th>IMG</th><th><a href="?srt=name">NAME</a></th><th width="10"><a href="?srt=menu">CAT</a></th>........

 $srtd = $db->query("SELECT * FROM '$table1' ORDER BY '$srt' "); ////////////////////////////////////////////////////////////////////////////////‌​////// foreach($srtd as $row){ $id=$row['id']; 
```

但是这种方法有效：上面的代码可以吗？

```
///////////////////////////////////////sort columns ////////////////////////////////
if ($srt=='name'){$srtd = $db->query("SELECT * FROM '$table1' ORDER BY name ");}
elseif($srt=='id'){$srtd = $db->query("SELECT * FROM '$table1' ORDER BY id ");}
elseif($srt=='menu'){$srtd = $db->query("SELECT * FROM '$table1' ORDER BY menu ");}
else{$srtd = $db->query("SELECT * FROM '$table1' ORDER BY id ");}
////////////////////////////////////////////////////////////////////////////////////// 
```

谢谢那个尼克 ;-) 奇怪的是我在这个查询中使用了单引号，它可以工作`$dropdown = $db->query("SELECT * FROM '$table2' WHERE menu = '$menu'");`，但从现在开始我将使用反引号

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-23T14:44:17.387

您`$_SESSION['sort'] = $_GET['sort'];`每次访问该页面时都在分配，因此如果`$_GET['sort']`未设置，则它只会更改`$_SESSION['sort']`为空值。

将其更改为：

```
if (isset($_GET['sort'])) {
  $_SESSION['sort'] = $_GET['sort'];
} 
```

它应该可以工作

编辑：

您的查询应更新为：

```
SELECT * FROM `$table1` ORDER BY `$srt` 
```

请注意使用反引号 ` 而不是单引号。反引号用于表名，引号用于字符串。

# javascript - Javascript touchend（滚动）事件在ios 4的UIWebView中不起作用

> ID：12094045
> 
> 赞同：2
> 
> 时间：2012-08-23T14:33:41.043
> 
> 标签：javascript, ios4, scroll, touch-event

我在 UIWebView 中使用 touchend 事件如下：

```
window.ontouchend=function(touchEvent)
{
   ...
} 
```

我用它来跟踪 UIWebView 内的滚动，这个事件通常在 iOS 5+ 中工作，但这个事件在 iOS 4 中不起作用！如何在 iOS 4 的 javascript 中跟踪 touchend 事件？

预先感谢您的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-24T13:50:52.710

我没有找到在 iOS 4 中使用此 JS 代码的方法所以我决定将此代码留给 iOS 5，但对于早期的 iO​​S 版本，我从这个问题中做出了决定： [How to intercept touches events on a MKMapView or UIWebView objects ?](https://stackoverflow.com/questions/1049889/how-to-intercept-touches-events-on-a-mkmapview-or-uiwebview-objects)

在我的 viewController 中，我编写了以下代码：

```
NSString *sysVersion=[[UIDevice currentDevice] systemVersion];
NSArray *sysVersionParse=[sysVersion componentsSeparatedByString:@"."];
int versionNum=[[sysVersionParse objectAtIndex:0] intValue]; //detect ios version
if (versionNum<5)
{
    WildcardGestureRecognizer * tapInterceptor = [[WildcardGestureRecognizer alloc] init];
    tapInterceptor.touchesEndCallback = ^(NSSet * touches, UIEvent * event)
    {
        NSString *jsString = [[NSString alloc] initWithFormat:@"window.ontouchend();"];
        [webview stringByEvaluatingJavaScriptFromString:jsString];
    };
    //and similarly for the other touch actions
    [webview addGestureRecognizer:tapInterceptor];
} 
```

我希望有人能派上用场！

# javascript - javascript结合公共和私人window.onload

> ID：12094047
> 
> 赞同：0
> 
> 时间：2012-08-23T14:33:46.010
> 
> 标签：javascript, namespaces

我目前在构建网站时正在学习 javascript 命名空间，并且我有以下要求：我想将我的所有代码设为私有，以便页面上的其他公共脚本（可能是广告，我在这个阶段不太确定）无法覆盖或更改我的 javascript。我预见的问题是公共脚本可能会使用`window.onload`，我不希望它们覆盖我的私有版本的`window.onload`. 我还是想让他们跑`window.onload`。

到目前为止，我有以下布局：

```
//public code not written by me - i'm thinking this will be executed first
window.onload = function() {
    document.getElementById('pub').onclick = function() {
        alert('ran a public event');
    };
};

//private code written by me
(function() {
    var public_onload = window.onload; //save the public for later use
    window.onload = function() {
        document.getElementById('priv').onclick = function() {
            a = a + 1
            alert('ran a private event. a is ' + a);
        };
    };
    if(public_onload) public_onload();
    var a = 1;
})(); 
```

我有很多关于这个的问题......

首先，这是编写我的 javascript 代码的好结构，还是有更好的结构？（我打算将我的所有代码都放在匿名函数中）。我的私人代码真的是私人的，还是有办法让公共 javascript 访问它？我猜这个问题的答案是“是的 - 使用棘手的评估技术。不要嵌入你不信任的代码”，但我想知道如果是这样的话该怎么做。

其次，当我单击公共链接时，不会触发该事件。为什么是这样？

最后，如果我注释掉该`if(public_onload) public_onload();`行，那么`a`当我单击私有按钮时会正确返回。但如果我把这条线留在 then`a`的价值是 nan。为什么是这样？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-23T14:51:04.407

# scala - scala类型'提取'

> ID：12094049
> 
> 赞同：2
> 
> 时间：2012-08-23T14:33:49.190
> 
> 标签：scala, types, type-systems, unboxing

这可能不是最正确的术语，但我所说的 boxed type 是指`Box[T]`type `T`。`Option[Int]`盒装的也是如此`Int`。

如何提取这些类型？我天真的尝试：

```
//extractor
type X[Box[E]] = E //doesn't compile. E not found

//boxed
type boxed = Option[Int]

//unboxed
type parameter = X[boxed] //this is the syntax I would like to achieve
implicitly[parameter =:= Int] //this should compile 
```

有没有办法做到这一点？除了 Apocalisp 博客之外，我很难找到有关 Scala 中类型级元编程的说明。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-23T15:21:53.057

我只能想象两种情况。要么你使用类型参数，然后如果你使用这种更高种类的类型，例如作为方法的参数，你将在方法泛型中复制它的类型参数：

```
trait Box[E]

def doSomething[X](b: Box[X]) { ... } // parameter re-stated as `X` 
```

或者你有类型成员，那么你可以在每个实例中引用它们：

```
trait Box { type E }

def doSomething(b: Box) { type X = b.E } 
```

...或一般来说

```
def doSomething(x: Box#E) { ... } 
```

所以我认为你需要根据你真正想要实现的目标来重写你的问题。

# audio - 如何充当输入或输出音频设备？

> ID：12094052
> 
> 赞同：0
> 
> 时间：2012-08-23T14:33:57.097
> 
> 标签：audio, operating-system, emulation

我只是一个我可能制作的应用程序的规划阶段，我遇到了一个挑战。为了实现我的目标，我觉得我的程序需要充当操作系统的麦克风和扬声器。我正在考虑为 Windows 和 OS X 制作我的程序，所以我的问题如下：

我在两个操作系统中需要哪些库才能让他们认为我的程序是音频设备？我需要能够模拟音频输入和输出。在 Windows 上，我感觉它可能是 DirectX 或其他东西，而在 OS X 上我不知道。

此外，如果存在这样的库，并且您有一个建议，也请建议一个文档来源。=)

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-23T17:24:53.967

你让你的程序成为一个实际的设备并为它编写一个设备驱动程序。

对于 Windows 上的设备驱动程序开发，请访问[http://msdn.microsoft.com/en-us/library/windows/hardware/gg487428.aspx](http://msdn.microsoft.com/en-us/library/windows/hardware/gg487428.aspx)

对于 Os X 上的设备驱动程序开发，请从[https://developer.apple.com/library/mac/navigation/index.html#section=Topics&topic=Drivers%2C%20Kernel%2C%20%26amp%3B%20Hardware](https://developer.apple.com/library/mac/navigation/index.html#section=Topics&topic=Drivers%2C%20Kernel%2C%20%26amp%3B%20Hardware)

# android - 不使用广播接收器处理从警报管理器发送的 IntentServices 时，是否需要获取唤醒锁？

> ID：12094056
> 
> 赞同：3
> 
> 时间：2012-08-23T14:34:05.497
> 
> 标签：android, intentservice, wakelock

我一直在阅读有关从广播接收器启动服务的信息。在这种情况下，我必须获取一个 WakeLock，直到 Intent 由 IntentService 处理。

当我直接从包装到 pendingIntent 中的 AlarmManager 调用 IntentService 时会怎样？在这种情况下，没有广播接收器...意图直接转发到服务的 onHandleIntent。那么，我在哪里获得锁呢？真的需要吗？？？一切似乎都很好。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-23T14:43:21.453

An`IntentService`只是一个线程服务。您将需要获取唤醒锁。Commonsguy 在`WakefulIntentService` [这里](https://github.com/commonsguy/cwac-wakeful)很可爱。

他的 IntentService 为您获取了一个唤醒锁，因此如果您从 AlarmService 调用它，它将唤醒获取唤醒并在工作完成后释放它。

我已经使用它分配了，效果很好，并且源在 Github 上，所以你可以看到它是如何工作的。

# rspec - 使用 mongoid 制造 - 参数数量错误

> ID：12094058
> 
> 赞同：0
> 
> 时间：2012-08-23T14:34:11.467
> 
> 标签：rspec, mongoid, fabrication-gem

我正在使用 Mongoid。我有一个对象：

```
class Employee
  include Mongoid::Document

    field :name_first,      type: String
    field :name_last,       type: String
    field   :name_other,        type: Array,    default: []
    field :title,                   type: String
    field :education,           type: Hash,     default: {}
    field :languages,           type: Array,    default: []
    field :phone,                   type: Hash,     default: {}
    field :address,             type: Hash,     default: {}
    field :email,                   type: Array,    default: []
    field :url,                     type: Array,    default: []
    field :history,             type: Array,    default: []
    field :profile,             type: String
    field :social_media,    type: Hash,     default: {}
    field :last_contact,    type: Time
    field :signed_up,           type: Date

    belongs_to :user
    belongs_to :practice
end 
```

而且，我正在尝试使用 Fabrication，但遇到了问题。宝石安装良好。在 /spec/fabricators/employee_fabricator.rb 我有

```
Fabricator :employee do

end 
```

在 my_controller_spec.rb 我有：

```
describe CasesController do

    describe "viewing cases" do
    before(:each) do
        Fabricate(:employee)
    end

    it "allows viewing the cases index page" do
        get 'index'
        response.should_not be_success
    end
    end
end 
```

当我在终端中运行“rspec spec”时，我得到：

```
Failures:

  1) CasesController viewing cases allows viewing the cases index page
     Failure/Error: Fabricate(:employee)
     ArgumentError:
       wrong number of arguments (2 for 1) 
```

这里发生了什么？我尝试了各种排列，其中一些会引发其他错误，但没有任何运行。不调用 Fabricate(:employee) 行，它按预期运行，但到目前为止只有空测试......

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-05T17:00:37.263

我在使用活动记录时遇到了同样的问题。

我发现 Fabrication gem 2.6 版将第二个属性传递给 active_record/base.rb 初始化程序：{:without_protection=>true}

这种变化似乎在 Rails 3.2 中（我在 3.0 上）。新参数在 2.0.2 版本中开始由 Fabrication gem 传递，所以我将 gem 文件中的 fabric gem 降级到 2.0.1，直到我们将 Rails 升级到 3.2

所以，基本上，我的建议是将 Fabrication gem 降级到 2.0.1 或将 Rails 升级到 3.2

# javascript - 在 .js 文件上使用 Ajax 获取 JSONP

> ID：12094069
> 
> 赞同：0
> 
> 时间：2012-08-23T14:34:37.050
> 
> 标签：javascript, jquery, ajax, json, jsonp

我尝试使用跨域保存 à json 文件中的数据。所以我使用 jsonp 但文件的扩展名为 .js，所以当我尝试使用 $.ajax 和 dataType 时：'jsonp' 我在控制台中有一个错误：Uncaught SyntaxError: Unexpected token 该文件被解释为 javascript 文件，请求失败. 您是否有在没有此错误的情况下获取数据的想法。

```
$.ajax({
    url : 'http://domaine.com/file.js',
    contentType: "application/json; charset=utf-8",
    dataType : 'jsonp',
    success : function(data){
        console.log(data);
        // no enter in this callback
    },
    complete: function(data1, data2, data3){
        // no data from file.js
    }
}); 
```

当我检查正在加载的脚本中的页面时，我发现了 file.js，我可以看到所有信息，但是由于它被视为 javascript 文件而出现错误。

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-23T14:39:16.987

将您的 json 转换为正确的 jsonp

```
jsonpcallback({"this":"is","my":"json"}) 
```

然后使用给定的回调请求它：

```
<script>
    function jsonpcallback(data) {
        console.log(data);
    }
</script>
<script src="http://domain.com/file.js"></script> 
```

你当然也可以用 jQuery 来做：

```
$.ajax({
    url: "http://domain.com/file.js",
    dataType: "jsonp",
    jsonpCallback: "jsonpcallback",
    success: handler,
    complete: handler,
    error: handler
}); 
```

# database - Drupal 数据库数据解析

> ID：12094072
> 
> 赞同：0
> 
> 时间：2012-08-23T14:34:46.467
> 
> 标签：database, drupal

我直接通过 Drupal 数据库工作，因为视图没有我正在寻找的东西，而且我遇到了 Drupal 存储数据的方式。它给了我这个块

```
a:6:{s:5:"label";s:4:"Body";s:6:"widget";a:4:{s:4:"type";s:26:"text_textarea_with_summary";s:8:"settings";a:2:{s:4:"rows";i:20;s:12:"summary_rows";i:5;}s:6:"weight";i:-4;s:6:"module";s:4:"text";}s:8:"settings";a:3:{s:15:"display_summary";b:1;s:15:"text_processing";i:1;s:18:"user_register_form";b:0;}s:7:"display";a:2:{s:7:"default";a:5:{s:5:"label";s:6:"hidden";s:4:"type";s:12:"text_default";s:8:"settings";a:0:{}s:6:"module";s:4:"text";s:6:"weight";i:0;}s:6:"teaser";a:5:{s:5:"label";s:6:"hidden";s:4:"type";s:23:"text_summary_or_trimmed";s:8:"settings";a:1:{s:11:"trim_length";i:600;}s:6:"module";s:4:"text";s:6:"weight";i:0;}}s:8:"required";b:0;s:11:"description";s:0:"";} 
```

如果有人可以帮助阐明第一个“6”在开始时代表什么，`a:6:{...`以及是否有一种传统的方法来解析这些信息或查询它。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-23T14:44:16.440

这是一个 PHP 序列化值。开头的“a:6”表示它包含一个由六个元素组成的数组。要解析数据，只需执行以下操作：

```
$data = unserialize("thatlongstring");
print_r($data); 
```

# c# - 在 HtmlAgilityPack 中复制 HtmlNode？

> ID：12094076
> 
> 赞同：1
> 
> 时间：2012-08-23T14:35:07.557
> 
> 标签：c#, xpath, html-agility-pack

我正在使用 HTML Agility Pack 在同一页面上做两件不同的事情。
对于第一个，我需要删除脚本、样式等元素。但是对于第二个，我必须保留所有元素。

因为我不能在第一部分之前做第二部分，所以我首先在寻找一种复制对象的方法，这样我就可以保存第二部分的所有元素。那是我尝试过的代码，但是出于某种原因，我没有得到其中的节点。

```
 HtmlDocument HTMLdoc = new HtmlDocument();
        HTMLdoc.LoadHtml(sFetch);

        //duplicate document node
        var webPage = HtmlNode.CreateNode("<html></html>");
        webPage.CopyFrom(HTMLdoc.DocumentNode,true); 
```

我想到的另一种方法是反转选择我要删除的所有元素的xpath。所以我将能够只选择它们而无需真正从对象中删除元素。但我不知道如何使用 XPath“not()”函数来反转我的查询。那是我的 XPath 查询：

```
"//script | //style | //iframe | //select | //textarea | //comment() | //a[@href]" 
```

感谢您的时间和帮助:)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-09-18T16:37:33.453

我正在做类似的事情。我必须获取此信息，然后将其转换为 XML。这是您需要的：

```
 HtmlAgilityPack.HtmlDocument htmlDoc = new HtmlAgilityPack.HtmlDocument();
        htmlDoc.LoadHtml(sfetch);

        HtmlNodeCollection page = htmlDoc.DocumentNode.SelectNodes("//table");//whatever tags your are looking for in your doc

        foreach (HtmlNode value in page)
        {
            richTxtboxFilteredHTML.Text += value.InnerText;
        } 
```

如果您要进一步处理此问题，则需要继续引用每个 HtmlNode。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-23T15:05:10.933

这是您的 XPath 表达式的*反转版本：*

```
var nodes = doc.DocumentNode
    .SelectNodes("//node()[not(self::script or self::style or self::iframe or self::select or self::textarea or self::comment() or self::a[@href])]")
    .ToList(); 
```

这将选择除脚本、样式等之外的节点。

# java - JSF 会话故障转移和部分状态保存

> ID：12094077
> 
> 赞同：13
> 
> 时间：2012-08-23T14:35:07.393
> 
> 标签：java, jsf, weblogic

在 JSF 2.0.9、Weblogic 10.3.4 上运行。我们现在在生产环境中运行 JSF，但遇到了会话复制和故障转移的一些问题。我们正在为我们的 bean 使用 viewscope，并且我确保它们是可序列化/瞬态的，并且瞬态变量实际上是无状态的。但是会话故障转移不起作用。我已经进行了广泛的测试并通过在 web.xml 中设置以下参数来设法使其工作

```
 <context-param>
        <param-name>javax.faces.STATE_SAVING_METHOD</param-name>
        <param-value>client</param-value>
    </context-param>

    <context-param>
        <param-name>javax.faces.PARTIAL_STATE_SAVING</param-name>
        <param-value>false</param-value>
    </context-param> 
```

如果我设置`STATE_SAVING_METHOD`为`server`我在故障转移时得到一个视图过期异常。如果我设置为`client`with `PARTIAL_STATE_SAVING`to`true`我会收到以下错误：

```
java.lang.IndexOutOfBoundsException: Index: 0, Size: 0
    at java.util.ArrayList.RangeCheck(ArrayList.java:547)
    at java.util.ArrayList.get(ArrayList.java:322)
    at javax.faces.component.AttachedObjectListHolder.restoreState(AttachedObjectListHolder.java:165)
    at javax.faces.component.UIComponentBase.restoreState(UIComponentBase.java:1433)
    at com.sun.faces.application.view.StateManagementStrategyImpl$1.visit(StateManagementStrategyImpl.java:265)
    at com.sun.faces.component.visit.FullVisitContext.invokeVisitCallback(FullVisitContext.java:151)
    at javax.faces.component.UIComponent.visitTree(UIComponent.java:1507)
    at javax.faces.component.UIComponent.visitTree(UIComponent.java:1521)
    at com.sun.faces.component.visit.VisitUtils.doFullNonIteratingVisit(VisitUtils.java:75)
    at com.sun.faces.application.view.StateManagementStrategyImpl.restoreView(StateManagementStrategyImpl.java:282)
    at com.sun.faces.application.StateManagerImpl.restoreView(StateManagerImpl.java:181)
    at com.sun.faces.application.view.ViewHandlingStrategy.restoreView(ViewHandlingStrategy.java:123)
    at com.sun.faces.application.view.FaceletViewHandlingStrategy.restoreView(FaceletViewHandlingStrategy.java:448)
    at com.sun.faces.application.view.MultiViewHandler.restoreView(MultiViewHandler.java:148)
    at com.sun.faces.lifecycle.RestoreViewPhase.execute(RestoreViewPhase.java:187)
    at com.sun.faces.lifecycle.Phase.doPhase(Phase.java:101)
    at com.sun.faces.lifecycle.RestoreViewPhase.doPhase(RestoreViewPhase.java:111)
    at com.sun.faces.lifecycle.LifecycleImpl.execute(LifecycleImpl.java:118)
    at javax.faces.webapp.FacesServlet.service(FacesServlet.java:508)
    at weblogic.servlet.internal.StubSecurityHelper$ServletServiceAction.run(StubSecurityHelper.java:227)
    at weblogic.servlet.internal.StubSecurityHelper.invokeServlet(StubSecurityHelper.java:125)
    at weblogic.servlet.internal.ServletStubImpl.execute(ServletStubImpl.java:301)
    at weblogic.servlet.internal.TailFilter.doFilter(TailFilter.java:27)
    at weblogic.servlet.internal.FilterChainImpl.doFilter(FilterChainImpl.java:57)
    at weblogic.servlet.internal.RequestEventsFilter.doFilter(RequestEventsFilter.java:27)
    at weblogic.servlet.internal.FilterChainImpl.doFilter(FilterChainImpl.java:57)
    at weblogic.servlet.internal.WebAppServletContext$ServletInvocationAction.wrapRun(WebAppServletContext.java:3730)
    at weblogic.servlet.internal.WebAppServletContext$ServletInvocationAction.run(WebAppServletContext.java:3696)
    at weblogic.security.acl.internal.AuthenticatedSubject.doAs(AuthenticatedSubject.java:321)
    at weblogic.security.service.SecurityManager.runAs(SecurityManager.java:120)
    at weblogic.servlet.internal.WebAppServletContext.securedExecute(WebAppServletContext.java:2273)
    at weblogic.servlet.internal.WebAppServletContext.execute(WebAppServletContext.java:2179)
    at weblogic.servlet.internal.ServletRequestImpl.run(ServletRequestImpl.java:1490)
    at weblogic.work.ExecuteThread.execute(ExecuteThread.java:256)
    at weblogic.work.ExecuteThread.run(ExecuteThread.java:221) 
```

所以我的问题是：

*   是`STATE_SAVING_METHOD`- `client`& `PARTIAL_STATE_SAVING`-`false`我要让故障转移工作的唯一方法吗？
*   客户端/错误组合的成本是多少。这个内存/cpu广泛吗？
*   这是一个错误吗？如果是，它会在 2.1 或 2.2 中解决吗？

提前致谢。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-04-12T09:40:44.783

我终于完成了这项工作，但并非没有一些额外的东西。首先，我在 web.xml 中添加了以下内容（是的，agressive 拼写错误）：

```
 <context-param>
        <param-name>com.sun.faces.enableAgressiveSessionDirtying</param-name>
        <param-value>true</param-value>
    </context-param> 
```

客户端保存现在是服务器，部分状态保存仍然是错误的（真的根本不起作用）

其次，在实现了一个 HttpSessionAttributeListener 之后，我发现`com.sun.faces.renderkit.ServerSideStateHelper.LogicalViewMap`在会话中保持状态的那个只被添加了一次，并且再也没有被删除/添加/替换。因此，尽管它在本地会话中被更新，但这些更改从未复制到第二个 jvm。Weblogic 文档声明必须在会话属性上调用 setAttribute 才能使复制工作。为了解决这个问题，我创建了一个阶段监听器，如下所示：

```
public class ViewPhaseListener implements PhaseListener {

    public void afterPhase(PhaseEvent phaseEvent)
    {

    }

    public void beforePhase(PhaseEvent phaseEvent)
    {
        HttpServletRequest request = ((HttpServletRequest) phaseEvent.getFacesContext().getExternalContext().getRequest());
        HttpSession session = request.getSession();

        session.setAttribute("com.sun.faces.renderkit.ServerSideStateHelper.LogicalViewMap", session.getAttribute("com.sun.faces.renderkit.ServerSideStateHelper.LogicalViewMap"));

    }

    public PhaseId getPhaseId()
    {
        return PhaseId.RENDER_RESPONSE;
          //To change body of implemented methods use File | Settings | File Templates.
    }
} 
```

这只是在每次请求后替换属性并确保它复制。另外一点，我将使用以下内容限制存储在视图中的数据：

```
<context-param>
        <param-name>com.sun.faces.numberOfViewsInSession</param-name>
        <param-value>3</param-value>
    </context-param>

    <context-param>
        <param-name>com.sun.faces.numberOfLogicalViews</param-name>
        <param-value>1</param-value>
    </context-param> 
```

希望这可以帮助任何有同样问题的人。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-06T17:25:39.710

会话复制应该由负载平衡器处理，因为 JSF 应用程序只知道它部署到的节点上的上下文。因此，将 STATE_SAVING_METHOD 设置为*client*或*server*无关紧要。

在我看来，您的负载平衡器配置不正确。如果您使用 Apache HTTP Server 作为代理，请参阅以下链接以获取有关会话粘性的更多信息：

[http://httpd.apache.org/docs/2.2/mod/mod_proxy_balancer.html](http://httpd.apache.org/docs/2.2/mod/mod_proxy_balancer.html)

我建议设置*ProxySet stickysession=ROUTEID*看看是否能解决问题。

# php - 从服务器 php 下载文件

> ID：12094080
> 
> 赞同：16
> 
> 时间：2012-08-23T14:35:08.550
> 
> 标签：php

我有一个 URL，用于保存我工作中的一些项目，它们主要是 MDB 文件，但也有一些 JPG 和 PDF。

我需要做的是列出该目录中的每个文件（已经完成）并为用户提供下载它的选项。

使用 PHP 是如何实现的？

* * *

## 回答 #1

> 赞同：41
> 
> 时间：2012-08-23T14:42:08.693

要读取目录内容，您可以使用[readdir()](http://php.net/manual/en/function.readdir.php)并在我的示例中使用脚本`download.php`来下载文件

```
if ($handle = opendir('/path/to/your/dir/')) {
    while (false !== ($entry = readdir($handle))) {
        if ($entry != "." && $entry != "..") {
            echo "<a href='download.php?file=".$entry."'>".$entry."</a>\n";
        }
    }
    closedir($handle);
} 
```

`download.php`您可以强制浏览器发送下载数据，并使用basename [()](http://no.php.net/basename)确保客户端不会传递其他文件名，例如`../config.php`

```
$file = basename($_GET['file']);
$file = '/path/to/your/dir/'.$file;

if(!file_exists($file)){ // file does not exist
    die('file not found');
} else {
    header("Cache-Control: public");
    header("Content-Description: File Transfer");
    header("Content-Disposition: attachment; filename=$file");
    header("Content-Type: application/zip");
    header("Content-Transfer-Encoding: binary");

    // read the file from disk
    readfile($file);
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2019-12-05T07:41:45.077

这是不会下载coupt文件的代码

```
$filename = "myfile.jpg";
$file = "/uploads/images/".$filename;

header('Content-type: application/octet-stream');
header("Content-Type: ".mime_content_type($file));
header("Content-Disposition: attachment; filename=".$filename);
while (ob_get_level()) {
    ob_end_clean();
}
readfile($file); 
```

我已经包含了 mime_content_type ，它将返回文件的内容类型。

为了防止文件下载损坏，我添加了 ob_get_level() 和 ob_end_clean();

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-23T14:41:25.440

如果可以从浏览器访问该文件夹（不在 Web 服务器的文档根目录之外），那么您只需输出指向这些文件位置的链接。如果它们在文档根目录之外，您将需要有链接、按钮等指向 PHP 脚本，该脚本处理从它们的位置获取文件并流式传输到响应。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2017-05-22T05:48:19.403

这是一个更简单的解决方案，可以列出目录中的所有文件并下载它。

在你的 index.php 文件中

```
<?php
$dir = "./";

$allFiles = scandir($dir);
$files = array_diff($allFiles, array('.', '..')); // To remove . and .. 

foreach($files as $file){
     echo "<a href='download.php?file=".$file."'>".$file."</a><br>";
} 
```

scandir() 函数列出指定路径内的所有文件和目录。它适用于 PHP 5 和 PHP 7。

现在在download.php

```
<?php
$filename = basename($_GET['file']);
// Specify file path.
$path = ''; // '/uplods/'
$download_file =  $path.$filename;

if(!empty($filename)){
    // Check file is exists on given path.
    if(file_exists($download_file))
    {
      header('Content-Disposition: attachment; filename=' . $filename);  
      readfile($download_file); 
      exit;
    }
    else
    {
      echo 'File does not exists on given path';
    }
 } 
```

# xpages - Xpage控件即使为false也显示只读模式

> ID：12094086
> 
> 赞同：0
> 
> 时间：2012-08-23T14:35:17.727
> 
> 标签：xpages

这是片段

```
<xp:repeat id="agendaRepeat" rows="30" var="agenda" indexVar="agendaIndex">

        <xp:this.value><![CDATA[#{javascript:var r = document1.getItemValue("AgendaHeading");
return (typeof r == 'string') ? [r] : r;}]]></xp:this.value>
        <xp:inputHidden id="agendaGuideReferenceHiddenRepeat" />

                <xp:inputText id="agendaGuideHeaderInput"
                    styleClass="agendaGuideHeaderInput" value="#{agenda}">

<!-- inputTextarea1 DOES NOT WORK -->               
                        <xp:inputTextarea id="inputTextarea1"
                            styleClass="agendaGuideSubtextInput"
                            value="#{javascript:document1.getItemValue('AgendaText').get(agendaIndex)}"
                            readonly="false">

                        </xp:inputTextarea>

</xp:repeat> 
```

该控件始终以只读方式显示，如果我将其绑定如下

```
document1.AgendaText[index] 
```

然后它显示得很好，因为它在重复控制中所以我不能这样做，因为它一直向我显示一个异常：

```
Error getting property '0' from bean of type java.lang.String 
```

因为该字段中必须至少有 2 个项目才能显示...我正在使用多值字段...

那么如果我选择第一个选项，为什么它不显示为可编辑字段。我将非常感谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-24T07:19:50.843

就像评论中提到的 Toby 一样，当您使用 SSJS 作为输入字段的值时，输入字段永远不可编辑。你必须使用表达语言。

当您使用表达式语言并且该项目为空或只有一个值时，您无法使用索引对其进行寻址。

为了避免上述错误并有一个可编辑的字段，您可以在重复中放置两个 inputTextareas，一个绑定到“document1.AgendaText[agendaIndex]”，另一个绑定到“document1.AgendaText”。然后，您可以使用 render 属性来使用相应的 inputTextareas，具体取决于它是多值项还是单值项（请参见下面的示例代码）。

示例代码：

```
<xp:inputTextarea id="inputTextarea_multiValue" styleClass="agendaGuideSubtextInput" readonly="false">
    <xp:this.rendered><![CDATA[#{javascript:@Elements( document1.getItemValue('AgendaText') ) > 1;}]]></xp:this.rendered>
    <xp:this.value><![CDATA[#{document1.AgendaText[agendaIndex]}]]></xp:this.value>
</xp:inputTextarea>

<xp:inputTextarea id="inputTextarea_singleValue" value="#{document1.AgendaText}" styleClass="agendaGuideSubtextInput" readonly="false">
    <xp:this.rendered><![CDATA[#{javascript:@Elements( document1.getItemValue('AgendaText') ) <= 1;}]]></xp:this.rendered>
</xp:inputTextarea> 
```

# ios - Google Map/Places API 是否与 iOS 6 兼容？

> ID：12094090
> 
> 赞同：0
> 
> 时间：2012-08-23T14:35:29.430
> 
> 标签：ios, google-maps, mapkit, apple-maps

Google Map/Places API 是否与 iOS 6 兼容？我正在使用 iOS 6 API，但我对 Apple Maps 将如何支持 Google Maps 感到非常困惑。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-23T14:38:15.033

只要您只使用 Apple 框架，MapKit 就会在 iOS 6 中自动使用 Apple 地图，但功能保持不变！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-23T19:49:06.430

请记住，Google 的 TOS 声明您只能在他们的地图上使用他们的数据。如果您使用他们的 Javascript API，然后将该数据放在 iOS6 中的 Apple 地图上，您将违反这些条款。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-23T15:43:21.793

如果您在 WWDC 上查看 Apple 的演示，您会发现 Apple 带有自己的地图图块并聚合来自 Yelp 的内容。

谷歌出局了。地图应用程序不支持。MapKit 不支持。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-20T09:15:43.057

有趣的是，我发现...

使用 Google Maps JavaScript API v3（html5 构建的应用程序，例如基于 phonegap）的应用程序从这一重大变化中幸存下来！

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-20T06:44:35.767

我认同 ：）

[https://developer.apple.com/library/ios/#releasenotes/General/RN-iOSSDK-6_0/_index.html](https://developer.apple.com/library/ios/#releasenotes/General/RN-iOSSDK-6_0/_index.html)

地图 在 iOS 6 及更高版本中，Map Kit 建立在 Apple 托管的新基础架构之上。较早的 iOS 版本将继续使用 Google 的服务。

# html - 我的导航栏的 CSS 帮助

> ID：12094092
> 
> 赞同：0
> 
> 时间：2012-08-23T14:35:34.460
> 
> 标签：html, css, menu

我准备了我的导航栏的小提琴：

[http://jsfiddle.net/88r9G/](http://jsfiddle.net/88r9G/)

目前，悬停底部边框比活动状态窄，我看不到如何修复它，想知道这里的大师是否可以提供一些帮助？

**HTML**

```
<!-- Forgive the messy markup - wordpress output -->
<div class="wpbook_header">
    <div id="underlinemenu" class="clearfix">
       <ul>
           <li class="page_item page-item-67 current_page_item"><a id="load-home-page" href="#">Home</a></li>
           <li class="page_item page-item-69"><a id="load-blog-list" href="#">The Blogs</a></li>
           <li class="page_item page-item-60"><a id="load-authors-page" href="#">Meet the Bloggers</a></li>
           <li class="page_item page-item-2"><a id="load-gallery" href="#">Gallery</a></li>
           <li class="page_item page-item-271"><a id="load-faqs" href="#">FAQs</a></li>
           <li class="page_item page-item-168"><a id="load-compform" href="#">Competition</a></li>                        
       </ul>
   </div>
</div>​ 
```

**CSS**

```
#underlinemenu {
    font-family: arial, helvetica;
    padding: 0;
    margin: 0;
    padding-bottom: 30px;
    font-size: 14px;
}

#underlinemenu ul {
    float: left;
    font-weight: bold;
    width: 770px;
    height: 57px;
    background-color: #242129;
    margin: -1px 0 -30px 0;
}

#underlinemenu ul li {
    display: inline;
    float: left;
    color: white;
    padding: 21px 30px 0px 8px;
}

.current_page_item {
    color: white;
    padding: 21px 10px 15px 5px !important;
    margin: 0 30px 0 3px;
    border-bottom: 5px solid white;
}

#underlinemenu ul li a {
    color: white;
    font-weight: bold;
    text-decoration: none;
    padding: 5px;
}

#underlinemenu ul li a:hover {
    color: #408261;
    padding-bottom: 15px;
    border-bottom: 5px solid #408261;
} 
```

​</p>

另外，如果有人可以就如何将其转换为熔岩灯样式菜单（底部边框动画在悬停元素下方）提供建议，那将是惊人的，但如果没有，我可以将其保存以备后问.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-23T14:49:01.620

您当前正在将活动项目的白线应用于 li，同时将悬停项目的绿线应用于 a。因为你的 li 有填充，a 和他的父母不一样，所以底部边框没有那么宽。有几个解决方案：

*   将边框底部的悬停效果应用于`li`. 请注意，您必须在不同的选择器中应用文本的颜色，因为它不会被悬停触发，`li`因为`a`不继承父级的颜色。
*   从您的 , 中删除左右填充`li`，以使嵌套`a`具有相同的宽度。请注意，这是 imo 的最佳解决方案，否则您将在 边缘产生悬停效果`li`，单击不会触发链接。大链接也更好，绝对是在平板电脑和其他东西上。此外，您还必须将活动状态边界设置`a`为 。我更新了你的小提琴来证明我的意思：http: [//jsfiddle.net/88r9G/8/](http://jsfiddle.net/88r9G/8/)

至于效果，我真的不明白你在追求什么。也许你可以尝试展示一些东西，或者确实发布一个带有详细解释的新问题......

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-23T14:48:03.033

我已经删除了很多我认为不必要的样式 - 请[在此处查看更新的 JSFiddle](http://jsfiddle.net/88r9G/3/)。特别注意：

*   所有的填充/边距现在都在一个元素上。
*   我们正在更改`li`悬停时元素的边框，而不是`a`元素。

至于动画，如果你只是为现代浏览器开发，我会研究 CSS3 动画和转换，否则 JavaScript 动画可能是你最好的选择。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-23T14:53:03.023

我制作了`li`和`a`作为具有绿色和蓝色背景的块元素。每个`li`元素占用的面积等于相应`a`元素占用的面积。`a`但是当我们悬停时，我们会改变元素的高度。

作为变体（参见演示：http: [//jsfiddle.net/88r9G/7/](http://jsfiddle.net/88r9G/7/)）：

```
#underlinemenu {
    margin: 0;
    padding: 0;
    font-size: 14px;
}

#underlinemenu ul {
    width: 770px;
    height: 57px;
}

#underlinemenu ul li {
    display: block;
    float: left;
    height: 57px;
    background-color: #408261;
}

#underlinemenu .current_page_item {
    background-color: white;
}

#underlinemenu .current_page_item a {
    height: 52px;
}

#underlinemenu ul li a {
    display: block;
    height: 57px;
    padding: 0px 10px 0px 10px;
    color: white;
    background-color: #242129;

}

#underlinemenu ul li a:hover {
    height: 52px;
    color: #408261;
}
​ 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-23T15:18:09.457

使用 Css 选择器的简单答案：

```
#underlinemenu ul li:not(.current_page_item) a:hover {
    color: #408261;
    padding-bottom: 15px;
    border-bottom: 5px solid #408261;
} 
```

希望能帮助到你！

# c# - 正则表达式替换找到的项目

> ID：12094093
> 
> 赞同：0
> 
> 时间：2012-08-23T14:35:41.060
> 
> 标签：c#, regex

我有大文本。我需要找到一个 URL 并将找到的文本替换为另一个文本。

这是一个例子：

```
http://cdn.example.com/content/dev/images/some.png
http://cdn.example.com/content/qa/images/some.png
http://cdn.example.com/content/preprod/images/some.png 
```

到

```
http://cdn.example.com/content/qa/images/some.png
http://cdn.example.com/content/preprod/images/some.png
http://cdn.example.com/content/live/images/some.png 
```

我需要找到 url 段并替换找到的段。我有以下代码：

```
Regex rxCdnReplace = new Regex(@"http://cdn.example.com/content/(\w+)/", RegexOptions.Multiline | RegexOptions.IgnoreCase);
rxCdnReplace.Replace(str,new MatchEvaluator(CdnRename.ReplaceEvaluator)) 
```

我怎样才能用正则表达式做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-23T14:41:36.707

试试这个正则表达式：

```
(?<=content\/).+(?=\/images) 
```

它返回 content/ 和 /images 之间的值

例如，对于`http://cdn.example.com/content/dev/images/some.png` 正则表达式返回的链接`dev`，您应该替换为`qa`

```
using System;
using System.Text.RegularExpressions;

class Program
{
    static void Main()
    {
    // This is the input string we are replacing parts from.
    string input = "http://cdn.example.com/content/dev/images/some.png";

    // Use Regex.Replace to replace the pattern in the input.
      string output = Regex.Replace(input, "(?<=content\/).+(?=\/images)", "qa");

    // Write the output.
    Console.WriteLine(input);
    Console.WriteLine(output);
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-23T14:41:07.087

如果您的字面意思是您需要将这些特定字符串的出现更改为下面显示的字符串，您可以执行以下操作：

```
str = str.Replace("http://cdn.example.com/content/qa/images/some.png", "http://cdn.example.com/content/preprod/images/some.png") 
```

但是，我认为这不是您所追求的（正如您提到的正则表达式），所以我认为您需要更具体地了解需要更改的内容。

# objective-c - 如何从另一个类访问 xib 中的 UIPicker？

> ID：12094094
> 
> 赞同：0
> 
> 时间：2012-08-23T14:35:40.100
> 
> 标签：objective-c, ios, cocoa, interface-builder

我`UIPickerView`在 XIB 中有一个，并且我有修改此视图中其他元素的事件：

```
- (void) pickerView: (UIPickerView *) pickerView didSelectRow: (NSInteger) row inComponent: (NSInteger) component {
    [self.definitionBeep play];
   self.glossaryTerm.text = [[self.dataSource objectAtIndex:row]objectAtIndex:0];
   self.glossaryDefinition.text = [[self.dataSource objectAtIndex:row]objectAtIndex:1];
} 
```

然后我有另一个`View`不是用 IB 构建的，以编程方式构建的，可以从我的访问`ViewController.m`如下：

```
- (IBAction)someTouchElement:(id)sender{

    if(myWebScroller == nil) {
        myWebScroller = [[MyWebScroller alloc]
                               initWithFrame: CGRectMake(15, mainControl.frame.origin.y, mainControl.frame.size.width, mainControl.frame.size.height)
                               title:@"     MY TITLE"
                               category:myCat];
        [self.view addSubview: myWebScroller];
    }
} 
```

在 内`MyWebScroller`，我正在监听点击并能够成功地对它们进行干预。我想要做的是改变 the 的值`UIPickerView`并让它改变`glossaryTerms`'s 的值，如上所示。

如果您需要更多说明，请发表评论，我会相应地更新问题。谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-27T10:25:44.993

扩展伦纳德要求你做的事情..

要收听通知，您需要为其注册一个观察者。因此您可以在 ViewDidLoad: 或 Viewcontroller.m 的 ViewWillAppear 中执行此操作

> [[NSNotificationCenter defaultCenter] addObserver:self 选择器:@selector(NotificationPosted:) name:@"ClickedInWebView" object:nil];

然后在 Viewcontroller.m 中。执行方法“**通知发布**”

> -(void)NotificationPosted:(NSNotification *)notification {
> 
> > ```
> > NSLog(@"Something happened");
> > //change the picker here.
> >  } 
> > ```

之后，在 webView.m 中，您可以在想要更改选取器视图中的值时发布通知。

> [[NSNotificationCenter defaultCenter] postNotificationName:@"ClickedInWebView" object:nil userInfo:nil]

;

或者，您也可以通过 NSDictionary 传递 NSString 或 NSNumber。

> NSDictionary *userInfo = [NSDictionary dictionaryWithObjectsAndKeys:value, @"keyName", nil]; [[NSNotificationCenter defaultCenter] postNotificationName:@"ClickedInWebView" object:nil userInfo:userInfo];

然后，您可以在该实现方法中的视图控制器中使用此字典。使用`notification.userinfo`.

# sql-server - 更改在 Visual Studio 中显示的多维数据集操作的列名称

> ID：12094097
> 
> 赞同：1
> 
> 时间：2012-08-23T14:35:45.617
> 
> 标签：sql-server, visual-studio, mdx, cube

标题基本概括了所有内容。我有一个包含数据的多维数据集，但我还没有找到更改列名的方法。

它们以非常丑陋的方式出现，例如 [cubeName].[$dimension.columnName]。我已经尝试了我所知道的所有内容以及我在网络上找到的所有内容，但似乎没有任何效果。

在大多数情况下，我尝试做的是在 Actions 选项卡中创建一个 Action 并在其中编写一些 MDX 查询语言。没有任何结果。就好像这个动作永远不会运行一样。

有谁知道如何做到这一点？我花了大约 3 天的时间试图弄清楚这一点。谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-28T09:26:37.263

CodePlex 上的 ASSP（分析服务存储过程）可以做到这一点。

[http://asstoredprocedures.codeplex.com/wikipage?title=Drillthrough](http://asstoredprocedures.codeplex.com/wikipage?title=Drillthrough)

由于多选和 Excel/SSAS 交互的方式，看起来它可能不适用于 Excel。不过值得一看。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-11T21:36:45.603

我假设您不能编辑多维数据集本身来重命名项目？或者甚至添加一个虚拟维度（有效地创建每个成员的副本，但使用不同的命名标准）？也许创建一个新的虚拟立方体，它充当原始立方体的视图，但更改名称？

# c# - 在 nhibernate 中映射多对多时出错

> ID：12094098
> 
> 赞同：0
> 
> 时间：2012-08-23T14:35:46.520
> 
> 标签：c#, fluent-nhibernate

嗨，我有这个 c# 代码：

```
 var criteria = GetSession().CreateCriteria<Indicatore>();

 List<string> dpsirs  //passed as a parameter

 // I want to select all [indicatore] that have [dpsrir] in my list dpsirs
 if (dpsirs.Count > 0) {
   criteria.CreateCriteria("IndicatoriDpsir", "Dpsir", JoinType.InnerJoin);
   criteria.Add(Restrictions.In("Dpsir.Dpsir", dpsirs)); 
 } 
```

当我选择数据时

```
var indicatori = criteria.List<Indicatore>(); 
```

我有这个错误：

```
Exception occurred getter of Mappings.Dpsir.DpsirId
Object does not match target type. 
```

我的映射类是：

```
public class Indicatore {
....
public virtual IList<IndicatoreDpsir> IndicatoriDpsir { get; set; }
....
}

public class IndicatoreMap : ClassMap<Indicatore> {
....
this.HasMany(x => x.IndicatoriDpsir).KeyColumn("INDICATORE_PFK");
}

public class IndicatoreDpsir {
  public virtual Indicatore Indicatore { get; set; }
  public virtual Dpsir Dpsir { get; set; }
}

public class IndicatoreDpsirMap : ClassMap<IndicatoreDpsir> 
  public IndicatoreDpsirMap() {
   Table("R_INDICATORI_DPSIR");
   LazyLoad();
   CompositeId()
   .KeyReference(x => x.Indicatore, "INDICATORE_PFK")
   .KeyReference(x => x.Dpsir, "DPSIR_PID");
  }
}

public class Dpsir {    
  public Dpsir() {
    IndicatoriDpsir = new List<IndicatoreDpsir>();
  }    
  public virtual string DpsirId { get; set; }
  public virtual IList<IndicatoreDpsir> IndicatoriDpsir { get; set; }
  public virtual string DescrizioneIt { get; set; }
  public virtual string DescrizioneFr { get; set; } 
}

public class DpsirMap : ClassMap<Dpsir> {    
 public DpsirMap() {
  Table("D_DPSIR");
  LazyLoad();
  Id(x => x.DpsirId).GeneratedBy.Assigned().Column("DPSIR_ID");
  Map(x => x.DescrizioneIt).Column("DESCRIZIONE_IT").Not.Nullable().Length(128);
  Map(x => x.DescrizioneFr).Column("DESCRIZIONE_FR").Not.Nullable().Length(128);
  HasMany(x => x.IndicatoriDpsir).KeyColumn("DPSIR_PID");
 }
} 
```

**笔记**

奇怪的是，我有一个相同的情况。唯一的两个区别是，在我的类 Dpsir 中，键是**字符串**类型（而不是**int**）并且是分配的（而不是身份）

有什么建议么？

谢谢

萨拉

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-29T08:39:45.907

在限制中明确指定 id：`"Dpsir.Dpsir.DpsirId", dpsirs.Select(d => d.DpsirId).ToArray()`

# java - 第三级逗号（没有得到正确的标题）

> ID：12094102
> 
> 赞同：0
> 
> 时间：2012-08-23T14:35:57.453
> 
> 标签：java, html, css, jsf-2, styles

我正在使用 jsf 2.0 创建 Web 应用程序。我有命令按钮，样式如下。

我所拥有的是

```
style="#{patentInfo.photoType.contains('application')?'visibility:visible;background-image: url(DisplayImage?mainID=tempo1;id=1)':'visibility:hidden;' 
```

在下面的**DisplayImage.java**中是我所拥有的

```
String mainID = request.getParameter("mainID");
String whatString = request.getParameter("id");
System.out.println("mainID=="+mainID+", whatString=="+whatString); 
```

我期待的输出是

```
mainID==tempo1, whatString==1 
```

但是我得到它

```
mainID==tempo1;id=1, whatString==null
              ^^^^^ 
```

这意味着我需要使用第三个分隔符，例如 ", ' 之后`url(DisplayImage?mainID=tempo1;id=1)`

即类似的东西

```
url(@DisplayImage?mainID=tempo1;id=1@)
    ^                               ^ 
```

只是好奇，我们有像倒逗号这样的第三级分隔符吗？

请建议我该怎么做？

* * *

## 编辑 1

如果我像下面这样使用，它可以完美地工作，因为我只使用了 2 个级别作为“和”。

```
style="background-image: url('DisplayImage?mainID=tempo1;id=1')" 
```

我需要第三级的解决方案。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-23T14:42:58.240

URL 参数分隔符是`?`和`&`。您可以使用`url(DisplayImage?mainID=tempo1&id=1)`

# android - 如何使用 Jenkins 写入 Android 模拟器

> ID：12094104
> 
> 赞同：0
> 
> 时间：2012-08-23T14:36:01.983
> 
> 标签：android, android-emulator, continuous-integration, jenkins, file-permissions

首先，我假设问题是由于 Jenkins 没有写入 Android Emulator 的权限。所以这可能是我想知道的第一件事。但这是我正在做的事情的背景，还请注意，所有这些在 Jenkins 之外都可以正常工作。需要注意的另一件事是我已将 Jenkins 设置为作为服务运行。

我有一份在 Jenkins 中运行的工作 PULL_SCREENSHOT 安装应用程序并在 Android 模拟器上运行一些测试，正如我所说的我正在使用适用于 Jenkins 的 Android 模拟器插件。在 Jenkins 作业的模拟器配置部分，我使用的是使用 ADB.exe 创建的现有设备。我遇到的问题是测试应该使用此代码创建一个屏幕截图目录。

```
final String path = Environment.getExternalStorageDirectory()+ "/screenshots/";

                            File dir = new File(path);

                            if (!dir.exists()) 
                            {
                                dir.mkdirs();
                            } 
```

但是这个目录没有创建，我查看了文件系统，看看它是否出现在与正常不同的地方，但没有运气。

这是来自 Jenkins 控制台的错误。

*\users\jamiemirl.jenkins\jobs\PULL_SCREENSHOTS\workspace>adb pull /sdcard/screenshots c:/screenshots/ 远程对象 '/sdcard/screenshots' 不存在 \users.jenkins\jobs\PULL_SCREENSHOTS\workspace>exit 1 Build步骤“执行 Windows 批处理命令”将构建标记为失败已完成：FAILURE*

# python - 在 pyqt 和 python(x,y) matplotlibwidget 中单击按钮显示图形

> ID：12094107
> 
> 赞同：0
> 
> 时间：2012-08-23T14:36:10.017
> 
> 标签：python, matplotlib, pyqt, qt-designer, pythonxy

我用 qt 设计器制作了一个 gui 并使用 pyqt。我添加了一个 matplotlibwidget，它随 python(x,y) 包一起提供。如何通过单击 GUI 上的按钮来显示图形？谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-11T08:35:07.217

我希望这能帮到您：

```
class MyClass(QtGui.QMainWindow):
    def __init__(self,parent = None):
        QtGui.QWidget.__init__(self, parent)
        self.ui = PYQTMainWindow.Ui_MainWindow()
        self.ui.setupUi(self)
        ...
        self.connect(self.ui.myButton, QtCore.SIGNAL('clicked()'), self.DisplayGraph)
        #next line will work too:
        #self.ui.myButton.clicked(self.DisplayGraph)

    def DisplayGraph(self):
        #... set your graph here the way you want 
```

# solr - Solr - 通配符搜索因词干方法而异

> ID：12094108
> 
> 赞同：0
> 
> 时间：2012-08-23T14:36:13.093
> 
> 标签：solr, wildcard, stemming

我有 2 个版本的 solr 在我的机器上工作。说`SolrVer1`和`SolrVer2`

`SolrVer1`已经应用了以下关于字段类型的词干提取方法`text_en_splitting`

```
<filter class="solr.KeywordMarkerFilterFactory" protected="protwords.txt" ignoreCase="true"/>
 <filter class="solr.PorterStemFilterFactory" ignoreCase="true"/> 
```

`SolrVer2`已经应用了以下关于字段类型的词干提取方法`text_en_splitting`

```
<filter class="solr.SnowballPorterFilterFactory" language="English" protected="protwords.txt"/> 
```

它对于常规搜索几乎相同，但是在使用通配符搜索时，通配符搜索不会给出语法上的结果 `SolrVer1`

与搜索类似 ，与 .相比`ray*`，返回的数据非常少。当我观察结果时，我发现它不返回只有and的数据。`SolrVer1``SolrVer2``SolrVer1``ray``rays`

我不知道我应该`SnowballPorterFilterFactory`在哪里使用，我应该在哪里使用`PorterStemFilterFactory`。它们的优缺点是什么？

任何人都可以对这种行为有所了解吗？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-23T22:09:53.520

需要知道词干分析器输出什么`ray`，`rays`.

尝试使用 Porter 词干分析器在线工具对它们进行词干：http: [//qaa.ath.cx/porter_js_demo.html](http://qaa.ath.cx/porter_js_demo.html)。它输出`rai`！这就是你没有得到任何`ray*`与 Porter stemmer 匹配的原因。

这是雪球词干分析器的工具：http: [//snowball.tartarus.org/demo.php](http://snowball.tartarus.org/demo.php)。这输出`ray`，这就是你得到结果的原因`ray`。`rays`

您可能需要阅读此内容以比较两个词干分析器：[http ://snowball.tartarus.org/texts/introduction.html](http://snowball.tartarus.org/texts/introduction.html)

看起来像雪球一样是为了解决波特的这些缺点而设计的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-24T07:34:31.263

[分析仪](http://wiki.apache.org/solr/AnalyzersTokenizersTokenFilters#Analyzers)

```
On wildcard and fuzzy searches, no text analysis is performed on the search word. 
```

由于在查询时没有对通配符搜索进行分析，因此在查询期间将应用词干分析器。
结果会有所不同，具体取决于词干分析器产生的内容。

# multithreading - R 多线程数据库访问

> ID：12094112
> 
> 赞同：3
> 
> 时间：2012-08-23T14:36:19.007
> 
> 标签：multithreading, r, rmysql

我有一堆需要并行完成的计算。在这个计算中，数据库是通过一个全局通道访问的。所以它是这样的：

```
library(doMC)
registerDoMC(2)
channel <<- connect_to_database()
results <- foreach(i=indexes) %dopar% {
    data <- get_data_from_db(channel)
    result <- do_computations(data)
} 
```

但是他们我得到了这个错误：

```
task 1 failed - "cannot open the connection" 
```

原因很可能是因为线程同时访问通道。有没有办法在 get_data_from_db 周围放置一个互斥锁？或者创建更多连接并在访问之前检查是否有免费连接？有什么建议么？

非常感谢！

---------------编辑-------------- 现在我正在为每个索引创建一个连接。但我现在收到此错误：

```
task 1 failed - "expired MySQLConnection"

library(doMC)
registerDoMC(2)
channel<<-list()
for(i=indexes){
   channel[[i]] <-connect_to_database(...)
}

results <- foreach(i=indexes) %dopar% {
    data <- get_data_from_db(channel[[ind]])
    result <- do_computations(data)
} 
```

# wcf - WCF 在客户端和服务器上都有证书（消息安全和 wsHttpBinding）

> ID：12094113
> 
> 赞同：7
> 
> 时间：2012-08-23T14:36:20.453
> 
> 标签：wcf, certificate, wshttpbinding

我正在尝试在客户端和服务器上设置具有证书身份验证的 WCF 服务。我正在经历地狱，遍历所有可能的错误消息。

这里的最终目标是使用证书对双方进行身份验证。我将为每个客户颁发一个特定的证书（希望）让我能够将他们区分开来。

到目前为止，我有以下配置文件：

## 服务器配置文件

```
<configuration>
    <system.serviceModel>
        <services>
            <service name="ServiceApiImplementation" behaviorConfiguration="myBehaviour">
                <host>
                    <baseAddresses><add baseAddress="http://localhost:9110/MyService"/></baseAddresses>
                </host>
                <endpoint address="" binding="wsHttpBinding" contract="IServiceAPI" bindingName="SOAP12Binding">
                    <identity>
                        <certificateReference findValue="ServerCertificate" storeName="My" storeLocation="LocalMachine" x509FindType="FindBySubjectName"/>
                    </identity>
                </endpoint>
            </service>
        </services>
        <bindings>
            <wsHttpBinding>
                <binding name="SOAP12Binding" receiveTimeout="00:02:00" closeTimeout="00:01:00" openTimeout="00:01:00" sendTimeout="00:01:00">
                    <security mode="Message">
                        <message clientCredentialType="Certificate" negotiateServiceCredential="false" establishSecurityContext="false" />
                    </security>
                </binding>
            </wsHttpBinding>
        </bindings>
        <behaviors>
            <serviceBehaviors>
                <behavior name="myBehaviour">
                    <serviceMetadata httpGetEnabled="true" />
                    <serviceDebug includeExceptionDetailInFaults="true" />
                    <serviceCredentials>
                        <serviceCertificate findValue="ServerCertificate" storeName="My" storeLocation="LocalMachine" x509FindType="FindBySubjectName" />
                        <clientCertificate>
                            <authentication certificateValidationMode="ChainTrust" revocationMode="NoCheck"/>
                        </clientCertificate>
                    </serviceCredentials>
                </behavior>
            </serviceBehaviors>
        </behaviors>
    </system.serviceModel>
</configuration> 
```

## 客户端配置文件

```
<system.serviceModel>
    <client>
        <endpoint address="http://localhost:9110/MyService" binding="wsHttpBinding" 
                  bindingConfiguration="SOAP12Binding_IServiceAPI" contract="IServiceAPI" 
                  behaviorConfiguration="behaviour1" name="SOAP12Binding_IServiceAPI">
            <identity>
                <!-- Value obtained when "Adding a Service Reference in visual studio" -->
                <certificate encodedValue="xxxxxxxxxxxxx" />
            </identity>
        </endpoint>
    </client>
    <behaviors>
        <endpointBehaviors>
            <behavior name="behaviour1">
                <clientCredentials>
                    <clientCertificate findValue="ClientCertificate" storeLocation="CurrentUser" storeName="My" x509FindType="FindBySubjectName"/>
                    <serviceCertificate>
                        <defaultCertificate findValue="ServerCertificate" storeName="My" storeLocation="LocalMachine" x509FindType="FindBySubjectName" />
                        <authentication certificateValidationMode="ChainTrust" trustedStoreLocation="LocalMachine" revocationMode="NoCheck" />
                    </serviceCertificate>
                </clientCredentials>
            </behavior>
        </endpointBehaviors>
    </behaviors>
    <bindings>
        <wsHttpBinding>
            <binding name="SOAP12Binding_IServiceAPI">
                <security mode="Message">
                    <message clientCredentialType="Certificate"  negotiateServiceCredential="false" establishSecurityContext="false" />
                </security>
            </binding>
        </wsHttpBinding>
    </bindings>
</system.serviceModel> 
```

我已经为客户端和服务器生成了一个 rootCA 和几个证书，获得了适当的权限并将它们放入存储中（LocalMachine 和 CurrentUSer 都绝望了）。据我所知，这一点是有效的。

调用服务时会出现问题。最新的错误是：

> 从另一方收到不安全或不正确安全的故障。有关故障代码和详细信息，请参阅内部 FaultException。
> 
> 无法处理该消息。这很可能是因为操作“http://tempuri.org/IServiceAPI/MyMethod”不正确，或者因为消息包含无效或过期的安全上下文令牌，或者因为绑定之间存在不匹配。如果服务由于不活动而中止通道，则安全上下文令牌将无效。要防止服务过早中止空闲会话，请增加服务端点绑定的接收超时。

甚至（上一个错误）

> 传出消息的身份检查失败。预期的身份是'身份（ [http://schemas.xmlsoap.org/ws/2005/05/identity/right/possessproperty：http://schemas.xmlsoap.org/ws/2005/05/identity/claims/upn](http://schemas.xmlsoap.org/ws/2005/05/identity/claims/upn) )' 用于 'http://localhost:9110/MyService' 目标端点。

错误消息根据我在配置文件中的实验而有所不同。现在，客户端和服务器都在同一台机器上运行，因此，至少，我希望每个应用程序都会通过 rootCA 对另一个应用程序进行身份验证。

请注意，我正在使用 Message Security 和 wsHttpBinding，因为它们似乎是正确的选择。除了发布标准 JAVA 框架可以使用的服务外，我没有任何大的限制。

谁能帮我解决这个烂摊子？

任何帮助将不胜感激

问候，

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-08T01:45:45.460

我设法解决了我原来的问题。

关于双向证书认证，我发现下面的codeproject文章提供了一个工作演示： http: [//www.codeproject.com/Articles/36683/9-simple-steps-to-enable-X-509-certificates- on-WCF#Step%201:-%20Create%20client%20and%20server%20certificates](http://www.codeproject.com/Articles/36683/9-simple-steps-to-enable-X-509-certificates-on-WCF#Step%201%3a-%20Create%20client%20and%20server%20certificates "代码项目文章")

诚然，这个例子使用了对等信任，但到目前为止，无论如何我都无法让一个工作原型正常工作。从这一点开始，我预见到的唯一陷阱是将证书链存储在适当的位置，并为您的项目正在运行的用户提供对私钥的访问权限。有关如何授予证书私钥权限的说明，请参阅本文：http: [//msdn.microsoft.com/en-us/library/ff647171.aspx#Step6](http://msdn.microsoft.com/en-us/library/ff647171.aspx#Step6)

对于问题的第二部分：*如何在 WCF 服务中区分客户端证书？*，您可以使用以下代码获取客户端的证书指纹：

```
X509Certificate2 certificate = null;

if(ServiceSecurityContext.Current.AuthorizationContext.ClaimSets == null)
    throw new Exception("No claim set");

foreach(var claim in ServiceSecurityContext.Current.AuthorizationContext.ClaimSets)
    if(claim is X509CertificateClaimSet)
    {
        X509CertificateClaimSet xcset = claim as X509CertificateClaimSet;
        certificate = xcset.X509Certificate;
        break;
    }

if(certificate == null)
    throw new Exception("No X509 certificate found");

string clientCertificateThumbprint = certificate.Thumbprint; 
```

这将获得客户端的指纹，该指纹对于您向其颁发证书的每个客户端都是不同的。当然，所有其他证书数据都是可用的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-23T17:21:37.930

> 无法处理该消息。这很可能是因为操作“http://tempuri.org/IServiceAPI/MyMethod”不正确，或者因为消息包含无效或过期的安全上下文令牌，或者因为绑定之间存在不匹配。如果服务由于不活动而中止通道，则安全上下文令牌将无效。要防止服务过早中止空闲会话，请增加服务端点绑定的接收超时。

这表明服务请求正在超时。请参阅 Windows 事件查看器或在您的服务上启用日志记录。请参阅：http: [//msdn.microsoft.com/en-us/library/ms732023.aspx](http://msdn.microsoft.com/en-us/library/ms732023.aspx)

> 传出消息的身份检查失败。预期的身份是'身份（[http://schemas.xmlsoap.org/ws/2005/05/identity/right/possessproperty：http://schemas.xmlsoap.org/ws/2005/05/identity/claims/upn](http://schemas.xmlsoap.org/ws/2005/05/identity/claims/upn) )' 用于 'http://localhost:9110/MyService' 目标端点。

这表明您的`indentity`节点错误地指向了错误的位置。自生成证书后，您是否更改了服务的位置？事后搬家无效。

# sql - 带有更新子查询的 Sqlite 注入

> ID：12094116
> 
> 赞同：1
> 
> 时间：2012-08-23T14:36:31.567
> 
> 标签：sql, sqlite, sql-injection

我正在尝试运行以下查询：

```
 query = """SELECT id, password_hash, salt FROM users
           WHERE username = '{0}' LIMIT 1""".format(username) 
```

用这个“用户名”

```
 ' OR username IN ((SELECT 
(UPDATE users SET password_hash="hash") FROM users)) -- 
```

但我收到此错误：

```
OperationalError: near "UPDATE": syntax error 
```

**我究竟做错了什么？**

这不是因为准备好的语句或任何东西，因为该查询有效：

```
 ' OR username IN ((SELECT username FROM users)) -- 
```

我在一个名为 stripe-ctf.com 的网站上合法地这样做并用于学习目的。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-27T18:11:07.140

要运行多个语句，您通常会使用“;”将它们分开，例如

`SELECT id, password_hash, salt FROM users WHERE username = 'bob'; UPDATE users SET password_hash='hash' WHERE username='bob';`

但是，您将无法注入它；secretvault.py 第 88 行的调用`cursor.execute(query)`不允许您执行多个语句（请参阅[文档](http://docs.python.org/library/sqlite3.html#sqlite3.Cursor.execute)：*execute() 只会执行单个 SQL 语句。*）

不过，您走在正确的道路上……我不会给出答案，但我鼓励您查看 SQLite [SELECT](http://www.sqlite.org/lang_select.html)文档。尝试研究“强制” SELECT 语句返回附加值的方法。

祝你好运！

# java - 在另一个作业启动并正在运行后，新贵启动作业有延迟

> ID：12094118
> 
> 赞同：2
> 
> 时间：2012-08-23T14:36:40.917
> 
> 标签：java, ubuntu, solr, init, upstart

我第一次尝试使用暴发户。我有两个要启动的 java 程序。第一个是在 jetty 上运行的 solr 搜索服务器，第二个是自定义爬虫，应该在 solr 服务器启动后启动。

我的爬虫初始化脚本如下所示：

```
description     "crawler"
author ""

start on runlevel [2345]
stop on runlevel [!2345]

respawn

script
    cd /home/crawler
    java -Duser.timezone=Europe/Berlin  -jar crawler.jar
end script 
```

现在对于 solr 服务器，我写了这个：

```
description     "server"

start on starting crawler
stop on runlevel [!2345]

respawn

script
    cd /home/server/version0.1/example
    java -Duser.language=en -Dsolr.clustering.enabled=true -Duser.country=US  -Dfile.encoding=UTF-8 -jar start.jar
end script 
```

两者都开始了，所以它似乎可以工作，但我希望在 2 秒的延迟后启动爬虫，让服务器有时间启用一切。任何人都知道如何做到这一点？您如何看待这两个新贵脚本是他们还好还是我错过了什么？（我是一个完全初始化的菜鸟）

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-08T01:43:40.557

替换**开头**为**started**

```
start on started crawler 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-01T23:50:47.093

我认为添加 a`sleep 2`会使脚本暂停 2 秒，应该是一个解决方案。

# objective-c - 使用objective c将html字符串插入sqlite db

> ID：12094120
> 
> 赞同：0
> 
> 时间：2012-08-23T14:36:43.693
> 
> 标签：objective-c, ios

我正在使用下面的代码片段将 html 字符串插入 sqlite db，我的代码工作正常，但是当我检索相同的 html 字符串并在 web 视图中显示时它不会呈现，一些数据正在被修改，任何人都可以帮助如何插入长 html 字符串到数据库中。

> const char *sql = "插入文章 (art_id,sub_cat_id,art_title,art_details) 值(?, ?, ?, ?)";
> 
> ```
>  if(sqlite3_prepare_v2(database, sql, -1, &addStmt, NULL) != SQLITE_OK)
>                         NSAssert1(0, @"Error while creating add statement. '%s'", sqlite3_errmsg(database));
> 
>                     sqlite3_bind_text(addStmt, 1, [[tuser objectForKey:@"art_id"] UTF8String], -1, SQLITE_TRANSIENT);
>                     sqlite3_bind_text(addStmt, 2, [[tuser objectForKey:@"sub_cat_id"] UTF8String], -1, SQLITE_TRANSIENT);
>                     sqlite3_bind_text(addStmt, 3, [[tuser objectForKey:@"art_title"] UTF8String], -1, SQLITE_TRANSIENT);
>                     sqlite3_bind_text(addStmt, 4, [[tuser objectForKey:@"art_details"] UTF8String], -1, SQLITE_TRANSIENT);
> 
>                     if(SQLITE_DONE != sqlite3_step(addStmt))
>                         NSAssert1(0, @"Error while inserting data. '%s'", sqlite3_errmsg(database));
>                     else
>                         //SQLite provides a method to get the last primary key inserted by using sqlite3_last_insert_rowid
>                         //coffeeID = sqlite3_last_insert_rowid(database);
> 
>                         //Reset the add statement.
>                         sqlite3_reset(addStmt); 
> ```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-23T17:36:14.490

单引号可能会导致问题。由于它是 HTML，因此您可以将单引号替换为 & apos; 或者您可以像这里显示的那样“加倍”单引号，以便 sqlite 可以使用它：

```
 NSString *artdetails = [tuser objectForKey:@"art_details"];
    NSString *arttitle = [tuser objectForKey:@"art_title"];

    NSString *ad = [artdetails stringByReplacingOccurrencesOfString:@"'" withString:@"''"];    
    NSString *at = [arttitle stringByReplacingOccurrencesOfString:@"'" withString:@"''"]; 
```

...

```
 sqlite3_bind_text(addStmt, 3, [at UTF8String], -1, SQLITE_TRANSIENT);
    sqlite3_bind_text(addStmt, 4, [ad UTF8String], -1, SQLITE_TRANSIENT); 
```

ETC

# knockout.js - 所选项目不起作用 KnockoutJS

> ID：12094122
> 
> 赞同：1
> 
> 时间：2012-08-23T14:36:49.163
> 
> 标签：knockout.js, knockout-mapping-plugin, knockout-2.0

我是 KnockoutJS 的新手，我遇到了一些问题。

我不明白为什么**selectedOf**在点击后没有更新。

有人能发现我做错了什么吗？

```
<div>
    <ul data-bind="foreach: Ofs">
        <li data-bind="text: Number, click: $root.selectOf" style="cursor:pointer"/>
    </ul>
    <strong>Item clicked: </strong><span data-bind="text: selectedOf.Number" />
</div>

<script type"text/javascript">
    var OfsModel = function (initialData) {
        //console.log(initialData);
        var self = this;
        self.CurrentState = ko.observable(initialData.CurrentState);
        self.Ofs = ko.observableArray(initialData.Ofs);
        self.selectedOf = ko.observable();

        self.selectOf = function (of) {
            //console.log(of);
            self.selectedOf(of);
            //console.log(self.selectedOf());
        }
    }

    var initialData = '{"Ofs":[{"Client":"A","Number":"1","Qty":10,"QtyRejected":5,"StopReason":"","ModifiedOn":"\/Date(1345732172456)\/","IsHighlighter":false,"SequencesAvailable":[{"Id":1,"Name":"Seq1"},{"Id":2,"Name":"Seq2"},{"Id":3,"Name":"Seq3"}],"SelectedSequence":null},{"Client":"B","Number":"2","Qty":20,"QtyRejected":0,"StopReason":"too much work","ModifiedOn":"\/Date(1345732172457)\/","IsHighlighter":false,"SequencesAvailable":[{"Id":1,"Name":"Seq1"},{"Id":2,"Name":"Seq2"}],"SelectedSequence":null},{"Client":"C","Number":"3","Qty":30,"QtyRejected":0,"StopReason":"","ModifiedOn":"\/Date(1345732172457)\/","IsHighlighter":false,"SequencesAvailable":[{"Id":1,"Name":"Seq1"}],"SelectedSequence":null}],"CurrentState":""}';

    var vw = $.parseJSON(initialData);
    ko.applyBindings(new OfsModel(vw));
</script> 
```

编辑：我把代码放在[http://jsfiddle.net/muek/KBeZ3/2/](http://jsfiddle.net/muek/KBeZ3/2/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-23T14:59:59.610

当您访问 的`Number`属性时`selectedOf`，您需要首先通过将其作为不带参数的函数调用来获取可观察对象的值`selectedOf().Number`。

但是，如果您在`selectedOf`填充之前执行此操作，则会导致尝试访问`Number`未定义值时出错。

解决这个问题的一个好方法是使用`with`绑定之类的东西来设置元素子元素的范围。它还可以防止空值。这看起来像：

```
<div data-bind="with: selectedOf">
    <strong>Item clicked: </strong><span data-bind="text: Number" />
</div> 
```

这是一个示例：http: [//jsfiddle.net/rniemeyer/ecDgD/](http://jsfiddle.net/rniemeyer/ecDgD/)

`Number`或者，您可以为防止 null 或绑定之类的值创建一个计算的 observable`data-bind="text: selectedOf() ? selectedOf().Number : 'none'"`

# css - 如何在 IE 6 中固定元素的高度，并允许隐藏内容滚动到视图中？

> ID：12094128
> 
> 赞同：0
> 
> 时间：2012-08-23T14:37:18.820
> 
> 标签：css, internet-explorer-6

IE 6 将 CSS`height`属性视为`min-height`，即如果一个元素已`height: 500px`应用到它，但其内容高于 500px，则该元素将变得更高以适应它们。

我试图给一个元素一个固定的高度，并添加一个滚动条以允许在必要时将内容滚动到视图中。

如何让 IE 6 尊重`height`分配给它的内容，并允许将内容滚动到视图中？

`.myelement {height: 500px; overflow-y: scroll;}`适用于其他浏览器，但不适用于 IE 6。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-23T14:51:27.810

这应该可行，我已经在 IE6 中对其进行了测试：

[http://jsfiddle.net/tmq3r/](http://jsfiddle.net/tmq3r/)

只需设置一个高度并给它溢出：自动

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-23T14:52:53.517

`overflow-y:scroll;`应该也适用于 IE6。

```
<div id='test' style="position:absolute; top:10px;left:50px; width:500px; height:200px;background-color: #ffffff; overflow-y: scroll;">
    <div  style="position: absolute; top: 10px; height: 650px; left: 50px; width: 500px;background-color: #000000;"></div>
</div> 
```

# cocoa - 我将如何基于此数据模型形成提取结果谓词？

> ID：12094131
> 
> 赞同：0
> 
> 时间：2012-08-23T14:37:19.860
> 
> 标签：cocoa, core-data, nsfetchrequest

![在此处输入图像描述](../Images/f3f1bf63235c83c45f275c5c9031d98d.png)

我将如何返回与食谱相关的所有成分，特别是从属于事件的食谱中？然后按过道订购？

进一步说明：

用户有一个食谱对象的“食谱书”，它与成分有关系。用户在计划准备食谱时会将食谱与事件相关联。我试图提取的数据是属于食谱的成分列表，属于事件，由 Aisle 排序。基本上是一个“杂货清单”。

关于 Event 对象的进一步解释：Events 允许重复的配方。假设我要连续 3 天（3 个单独的事件）吃一个煎鸡蛋（成分 =“1 个新鲜鸡蛋”），我希望购物清单包含 3 次“1 个新鲜鸡蛋”——每个事件一个实例。

这是我的 fetch 请求，它没有返回任何结果 - 我认为问题的症结在于谓词：

```
NSFetchRequest *request = [[NSFetchRequest alloc] init];

NSEntityDescription *entity = [NSEntityDescription entityForName:@"Ingredient"    inManagedObjectContext:[self managedObjectContext]];
[request setEntity:entity];

// get ingredients of recipes that belong to events
[request setPredicate:[NSPredicate predicateWithFormat:@"Ingredient.recipe == Event.recipe"]];

// sort by "aisle"
NSSortDescriptor *sortDescriptorCategory = [NSSortDescriptor sortDescriptorWithKey:@"aisle" ascending:YES];
request.sortDescriptors = [NSArray arrayWithObjects:sortDescriptorCategory, nil];

// create nsfrc with "aisle" as sectionNameKeyPath
NSFetchedResultsController *frc = [[NSFetchedResultsController alloc] initWithFetchRequest:request managedObjectContext:self.managedObjectContext sectionNameKeyPath:@"aisle" cacheName:@"MyFRCCache"];
frc.delegate = self;
NSError *error = nil;
if (![frc performFetch:&error]) {
    NSLog(@"Unresolved error %@, %@", error, [error userInfo]);
    abort();
}
self.fetchedResultsController = frc; 
```

感谢Martin R的问题，我进一步充实了这个问题。这是一些示例数据和所需的输出：

## 食谱

Z_PK = 1, ZTITLE = "燕麦片"
Z_PK = 2, ZTITLE = "花生酱和果冻三明治"
Z_PK = 3, ZTITLE = "烤奶酪三明治"
Z_PK = 4, ZTITLE = "炖牛肉"
Z_PK = 5, ZTITLE = "汉堡包”
......加上更多不会包含在获取结果中的食谱......

## 事件

Z_PK = 1, ZTITLE = "早餐 1", ZRECIPE = 1
Z_PK = 2, ZTITLE = "午餐 1", ZRECIPE = 2
Z_PK = 3, ZTITLE = "晚餐", ZRECIPE = 4
Z_PK = 4, ZTITLE = "早餐 2 ", ZRECIPE = 1 // 注意重复配方
Z_PK = 5, ZTITLE = "Lunch 2", ZRECIPE = 3
Z_PK = 6, ZTITLE = "Dinner 2", ZRECIPE = 5

## 成分

Z_PK = 1, ZTITLE = "1 杯燕麦片", ZRECIPE = 1, ZAISLE = 4
Z_PK = 2, ZTITLE = "2 杯牛奶", ZRECIPE = 1, ZAISLE = 2
Z_PK = 3, ZTITLE = "2 块白面包" , ZRECIPE = 2, ZAISLE = 5
Z_PK = 4, ZTITLE = "1 汤匙果冻", ZRECIPE = 2, ZAISLE = 4
Z_PK = 5, ZTITLE = "1 汤匙花生酱", ZRECIPE = 2, ZAISLE = 4
Z_PK = 6, ZTITLE = "2 块黑麦面包", ZRECIPE = 3, ZAISLE = 5
Z_PK = 7, ZTITLE = "1 块奶酪片", ZRECIPE = 3, ZAISLE = 2
Z_PK = 8, ZTITLE = "1 磅烤肉" , ZRECIPE = 4, ZAISLE = 3
Z_PK = 9, ZTITLE = "2 个胡萝卜", ZRECIPE = 4, ZAISLE = 1
Z_PK = 10, ZTITLE = "2 个土豆", ZRECIPE = 4, ZAISLE = 1
Z_PK = 11,ZTITLE = "1 个汉堡面包", ZRECIPE = 5, ZAISLE = 5
Z_PK = 12, ZTITLE = "1/4 磅汉堡", ZRECIPE = 5, ZAISLE = 3

## 走道

Z_PK = 1, ZTITLE = "农产品", ZDISPLAYORDER = 1
Z_PK = 2, ZTITLE = "乳制品", ZDISPLAYORDER = 2
Z_PK = 3, ZTITLE = "肉类", ZDISPLAYORDER = 3
Z_PK = 4, ZTITLE = "干货和罐头食品", ZDISPLAYORDER = 4
Z_PK = 5, ZTITLE = "面包店", ZDISPLAYORDER = 5

## 期望的输出（按 Aisle ZDISPLAYORDER 排序，粗体项目为章节标题）

**生产**
-2 胡萝卜
-2 土豆
**乳制品**
-2 杯牛奶
-2 杯牛奶 // 第二项，因为配方有两个实例
-1 奶酪片
**肉类**
-1 磅。夹头烤
-1/4 磅汉堡
**干货和罐头食品**
-1 杯燕麦片
-1 杯燕麦片//第二道菜，因为有两个配方实例
-1 汤匙。果冻
-1 汤匙花生酱
**面包店**
-2 块白面包
-2 块黑麦面包
-1 汉堡包

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-23T18:05:03.240

我想你会想要一个谓词：

```
recipe.events.@count > 0 
```

这会让你`Ingredients`在任何适用`Recipes`于任何`Event`.

或者，如果您正在寻找用于`Ingredients`任何`Recipe`特定的`Event`，那将是：

```
[NSPredicate predicateWithFormat:@"ANY recipe.events = %@", specificEvent] 
```

您的排序描述符可能是`aisle.displayOrder`，而不仅仅是`aisle`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-23T19:24:00.727

提取请求不能（据我所知）返回同一托管对象的重复条目。因此，我拥有的最接近的解决方案如下。

取出所有成分并根据 将它们分成几部分`aisle.displayOrder`。在每个部分中，按照自己的显示顺序对成分进行排序：

```
NSSortDescriptor *sort1 = [NSSortDescriptor sortDescriptorWithKey:@"aisle.displayOrder" ascending:YES];
NSSortDescriptor *sort2 = [NSSortDescriptor sortDescriptorWithKey:@"displayOrder" ascending:YES];
request.sortDescriptors = [NSArray arrayWithObjects:sort1, sort2, nil];

NSFetchedResultsController *controller = [[NSFetchedResultsController alloc] initWithFetchRequest:request
    managedObjectContext:self.managedObjectContext
    sectionNameKeyPath:@"aisle.displayOrder"
    cacheName:@"fetchControllerCache"]; 
```

对于每种成分，您可以计算事件的数量（并将其显示在您的表格中）：

```
int numberOfEvents = theIngredient.recipe.events.count; 
```

# php - 如何将参数传递给脚本

> ID：12094132
> 
> 赞同：1
> 
> 时间：2012-08-23T14:37:23.020
> 
> 标签：php, magento

我正在“分叉” php 代码，启动脚本以在后台运行，从而允许浏览器应用程序继续运行而无需等待响应。

我希望能够将参数传递给这样的脚本。

假设我有一个数组，我希望有问题的脚本可以访问，我怎么能把它传递过去？

```
$test = array(1,2,3);

//for windows i do the following which works well enough 
pclose(popen("start php /path/to/script.php ","r")); 
```

或者对于一些 linux 发行版：

```
exec('php -f /path/to/script.php >/dev/null 2>&1 &'); 
```

所以首先，是否可以将我的数组传递给该脚本？如果它可以让脚本访问它，我怎么能访问该脚本中传递的变量？

（坐在这里困惑，考虑通过值/引用传递变量......）

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-23T15:01:57.387

尼古拉斯·布朗几乎是对的。但我认为，这将是您正在寻找的解决方案的第二部分。
正如您可能已经知道的那样，您可以从控制台调用程序并传递程序可能期望的任何参数：

```
>php -f /path/to/program arg1[ arg2 ... argN] >/dev/null 2>&1 & 
```

因此，当您将字符串传递给`exec()`为什么不只是“插入”您的数组作为参数然后执行它时

```
$test = array(1,2,3);
$args = implode($test, " ");
$prog = 'php -f /path/to/script.php ' . $args . ' >/dev/null 2>&1 &'
exec($prog); 
```

这是 Nicolas Brown 提到的教程中的一些内容。在您的`script.php`中，您可以从中获取参数`$argv[]`

```
$myParam1 = $argv[1];
$myParam2 = $argv[2]; 
```

请注意，在 argv[0] 中是程序的名称。这正是他们在教程中首先要做的原因`arry_shift($argv)`，以摆脱第一个元素（程序的名称和路径）。
希望能帮助到你！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-23T14:44:12.273

使用 $argv 变量

[您可以从本教程](http://www.techrepublic.com/article/control-your-scripts-with-command-line-php/5889263)中找到一个示例

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-24T04:48:28.823

向@Havelock +1 以获得彻底的答案 - 只是想发布一些额外的实施建议。

实际上，我最近必须完全实现这一点 :) 我采用的实现路径是到`serialize()`数组并将其作为命令行参数传递给 PHP 脚本。这允许您将任意参数传递给脚本，而无需对参数解析进行太多维护工作。

我认为序列化为 json 甚至可能比 PHP 序列化更友好一些。如果你走那条路，并且如果 windows / linux 兼容性对你的应用程序很重要（无论是本地开发环境还是其他环境），请务必在两个环境中测试你的序列化有效负载。

Windows 似乎不喜欢有效载荷中的引号。

哦，为了可调试性，请确保在您的 PHP 脚本中进行一些良好的日志记录 - 这种解决方案适合于有趣的调试会话。

# c# - 在 2 个表的 1 个列表视图中显示数据

> ID：12094135
> 
> 赞同：0
> 
> 时间：2012-08-23T14:37:31.627
> 
> 标签：c#, mysql, listview

我在 mysql 中有 2 个表，我试图在 1 个列表视图中显示它们 - 这可能吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-23T14:40:21.897

是的，它确实。查看[JOIN](http://dev.mysql.com/doc/refman/5.0/en/join.html) MySQL 手册。

# android - 在 Android 中使用 XMPP 服务器发送/接收好友请求

> ID：12094136
> 
> 赞同：4
> 
> 时间：2012-08-23T14:37:32.690
> 
> 标签：android, xmpp, chat

我正在创建一个基于 XMPP 聊天 Messenger 的应用程序。现在我们需要在应用程序中实现一些自定义功能，例如在 Messenger 中发送/接收好友请求。我们怎么能做到这一点？

```
roster = _connection.getRoster();
roster.createEntry(userID, nickname, null); 
```

目前我们正在使用这种方法，但它直接在我的信使联系人列表中添加了联系人。现在我想问是否有任何新的朋友请求像 BBM (Blackberry Messenger)。那么它应该在直接添加到当前正在发生的联系人列表之前要求确认。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-07-29T07:58:29.070

我可以帮你。我有功能齐全的消息传递应用程序。我假设您使用 Smack 或 Asmack 作为 XMPP 库。

添加好友

```
Presence request = new Presence(Presence.Type.subscribe);
        packet.setTo("john@ejabberd.org");
        mXMPPConnection.sendPacket(packet); 
```

接受请求

```
Presence accept = new Presence(Presence.Type.subscribed);
                    accept.setTo("john@ejabberd.org");
                    mXMPPConnection.sendPacket(accept); 
```

问我是否还需要其他东西:) 干杯

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-09-05T19:25:24.593

发送好友请求/邀请 [user1@domain],

```
Presence presence = new Presence(Presence.Type.subscribe);
presence.setTo("user2@domain");
connection.sendStanza(presence); 
```

接受好友请求/邀请 [user2@domain],

```
Presence presence = new Presence(Presence.Type.subscribed);
presence.setTo("user1@domain.com");
connection.sendStanza(presence); 
```

每次用户 2 登录时，服务器都会向用户 2 发送订阅状态数据包，直到用户 2 针对该请求发送任何响应。

# speech-recognition - 整合 HTK 结果

> ID：12094145
> 
> 赞同：0
> 
> 时间：2012-08-23T14:37:59.327
> 
> 标签：speech-recognition, htk

祝大家好日子，

我是语音识别的新手。

现在，我正在与 HTK 合作处理语音识别。我的结果准确率为 55%。我想问一下：

1.  我可以整合 HTK 结果来制作实时识别器吗？
2.  那么我应该如何处理才能制作实时识别器？

任何帮助将不胜感激。谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-27T19:36:58.317

HTK 实时识别器称为 ATK。您可以从 HTK 网站下载它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-10-10T08:27:38.797

对于小词汇量的任务你可以使用 HTK 的`HVite`工具，对于大词汇量的语音识别你可以使用`HDecode`. 它是单独下载和安装的，并且具有不同的许可条款。您可以`HDecode`在 HTK Book 中了解更多信息。您将需要用于连续语音识别的语言模型或用于识别有限的语音命令集的语法文件。

# inno-setup - INNO SETUP : 编译限制

> ID：12094146
> 
> 赞同：2
> 
> 时间：2012-08-23T14:38:01.753
> 
> 标签：inno-setup

我想创建一个常量，然后，在setupfile case常量中是否添加文件设置为On或Off

例子 ：

```
#define ForLS "0"
[Files]
;Only for LS :
If (ForLS=="1")
{
    Source: D:\Exec\Starter.exe; DestDir: {app}\Starter; Flags: ignoreversion
    Source: D:\Exec\M2.exe; DestDir: {app}\M54; Flags: ignoreversion
}
;For All
Source: D:\Exec\M1.exe; DestDir: {app}\Starter; Flags: ignoreversion` 
```

原因是例如 M2 很重（10Mo），并不是每个人都需要

谢谢你的帮助

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-23T14:46:31.090

您可以使用定义本身，包括源是否已定义：

```
;#define ForLS // remove ';' to define

..

[Files]
#ifdef ForLS
Source: D:\Exec\Starter.exe; DestDir: {app}\Starter; Flags: ignoreversion
Source: D:\Exec\M2.exe; DestDir: {app}\M54; Flags: ignoreversion
#endif
Source: D:\Exec\M1.exe; DestDir: {app}\Starter; Flags: ignoreversion` 
```

# php - 将 CSV 字符串从 Javascript 传递到 PHP

> ID：12094147
> 
> 赞同：2
> 
> 时间：2012-08-23T14:38:02.333
> 
> 标签：php, javascript, csv, dhtmlx

我正在尝试将我的 DHTMLX 网格导出到 CSV 文件。我已经设置了它的框架，但是我遇到了一个问题，如果我尝试导出超过 ~25 行，它就会失败。没有错误信息或任何东西。下面是我的代码：

Javascript

```
myGrid.csvParser = myGrid.csvExtParser;
myGrid.setCSVDelimiter('|');
myGrid.csv.row = "endOfRow";

var gridCsvData = myGrid.serializeToCSV();

$.post("data/export.php?csvdata="+gridCsvData); 
```

PHP

```
$csvData = $_REQUEST['csvdata'];

$csv = explode('endOfRow',$csvData);

$myfile = "grid.csv";

$fh = fopen($myfile, 'w') or die("can't open file");

foreach($csv as $line) {
   fputcsv($fh, explode('|',$line),',','"');
}

fclose($fh);

//Redirect output to a client's web browser (csv)
header("Content-type: text/csv");
header("Content-Disposition: attachment; filename=grid.csv");
header("Pragma: no-cache");
header("Expires: 0");

readfile('grid.csv'); 
```

任何帮助表示赞赏。我认为这是 POST 上的某种大小限制问题，我尝试将 .htaccess 文件中的限制修改为 20MB。正如我所说，这仅适用于几行（<25），但是一旦我尝试导出更多内容，它就永远不会生成 .csv 文件。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-23T14:58:00.377

我猜`$.post`（来自 jQuery 对吗？）不能处理这么大的 url。您应该添加一个可以作为 HTTP POST 查询参数处理的参数：

```
$.post(
  "data/export.php", 
  { 
    csvdata: gridCsvData
  }
); 
```

# python - Decode SIP messages with Python

> ID：12094148
> 
> 赞同：3
> 
> 时间：2012-08-23T14:38:06.910
> 
> 标签：python, sip, decode, pcap

I need python script that can sniff and decode SIP messages in order to check their correctness. As a base for this script I use python-libpcap library for packets sniffing. I can catch UDP packet and extract SIP payload from it, but I don't know how to decode it. Does python has any libraries for packets decoding? I've found only dpkt, but as I understood it can't decode SIP. If there are no such libraries how can I do this stuff by hands?

Thank you in advance!

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-03T12:51:32.543

Finally I did this with help of pyshark from the sharktools (http://www.mit.edu/~armenb/sharktools/). In order to sniff IP packages I used scapy instead of libpcap.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-24T20:03:19.937

The [twisted](http://twistedmatrix.com/trac/) framework for python includes some support for SIP. However it appears to be written for RFC 2543, not RFC 3261.

The [dpkt](http://code.google.com/p/dpkt/) library has some basic SIP support.

Another approach would be to use a parser generator like ANTLR to parse the SIP message. ANTLR can create python-based parsers. I wouldn't be surprised to find an ANTLR grammar for SIP available on the web, though I didn't find one in my first few minutes of searching.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-24T20:33:40.027

Since your needs seems pretty custom, I would suggest to do it yourself. The syntax is defined in the BNF grammar at the end of the [RFC 3261](http://www.ietf.org/rfc/rfc3261.txt). You may want to validate only what you need and not the whole grammar because it is quite huge.

Try to procceed by steps. If you try to handle everything in the same function you will end up with a huge and complex function. Try to generate data at each steps to simplify processing. For example, at the first step, you could read each line of the packet and make pairs of header/content. This makes a more friendly data structure that can be refined further.

Like yotommy said, you could use ANTLR but it wouldn't be my choice unless you are very familiar with it. The grammar is massive and won't be easy to represent using ANTLR.

# python - WebElement 上的 Selenium WebDriver“find_element_by_xpath”

> ID：12094153
> 
> 赞同：8
> 
> 时间：2012-08-23T14:38:27.113
> 
> 标签：python, html, find, selenium-webdriver

我正在尝试使用以下行查找元素：

```
elements = driver.find_elements_by_xpath("//div[@class='Display']") 
```

一旦我有了元素，我知道有两个“显示”，我希望能够使用第二个并在其中找到一个特定元素，如下所示：

```
title = elements[1].find_element_by_xpath("//div[@class='Title']") 
```

但是，它总是恢复使用第一个。我已经完成了它，它正在为“显示”找到 2 个元素，所以我不确定我做错了什么。

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-08-23T14:43:07.997

我想你想要这个：

```
elements = driver.find_elements_by_xpath("//div[@class='Display']")
title = elements[1].find_elements_by_xpath(".//div[@class='Title']") 
```

# java - Java中使用接口的方法重载

> ID：12094156
> 
> 赞同：4
> 
> 时间：2012-08-23T14:38:30.553
> 
> 标签：java, overloading

我有一种行为，我不理解 Java 中的重载。

这是我的代码：

```
interface I {}

class A implements I {}

class B {
   public void test(I i) {}

   public void test (A a) {}
} 
```

当我调用以下行时：

```
 I a = new A();
 b.test(a); 
```

我认为被调用的方法会是`test(A)`，但显然它是`test(I)`.

我不明白为什么。在运行时我的变量`a`是 A 甚至 A 继承了 I。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-23T14:40:30.073

因为即使您有 A 类型的对象，引用类型也是 I。

A a = 新 A();

将调用方法`test (A a) {}`

根据 JLS 第 15 章：

> 在编译时选择最具体的方法；它的描述符决定了在运行时实际执行的方法。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-23T14:41:22.370

该变量`a`是类型的`I`——如果您要使用`A a = new A();`它，将使用正确的重载方法。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-23T15:13:56.463

考虑以下场景：

```
 interface Animal { }

    class Dog implements Animal{ public void dogMethod() {} }

    class Cat implements Animal{ public void catMethod() {} }

    public class Test {
        public static void test (Animal a) { System.out.println("Animal"); }

        public static void test (Dog d) { System.out.println("Dog"); }

        public static void test (Cat c) { System.out.println("Cat"); }

        public static void main(String[] args) {
            Animal a = new Cat();
            Animal d = new Dog();

            test(a);
        }
    } 
```

如果 test(a) 仅仅因为它包含对 Cat 对象的引用而打印“Cat”而不是（正确地）“Animal”，那么您将能够在 Animal 对象上调用 catMethod()，这没有任何意义。Java 根据类型而不是变量引用的内容来选择最适用的方法。

# php - 在处理 PHP 时加载 SOAP 响应

> ID：12094159
> 
> 赞同：1
> 
> 时间：2012-08-23T14:38:43.037
> 
> 标签：php, soap

有人知道我是否可以在请求进行时输出 PHP SOAP 响应，我尝试了一些严重的事情但没有结果，这似乎是不可能的，这可能吗？

所以我的问题是，当 SOAP 仍在进行中时，如何输出 SOAP 请求的结果？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-23T14:50:53.643

您无法阅读`results which the server sent back already`肥皂响应。肥皂响应装在一个信封中，类似于一封真正的邮政信函。两者都是一条消息，一旦发送，您就可以打开并阅读它。当“其余的仍在到达”时，无法阅读一封邮政信函的第一页。

另一方面，如果您正在调用多个 Soap 服务，那么您可以异步执行此操作，并在特定的 Soap 响应信封完成交付后立即显示每个 Soap 响应。这就像常规的异步 ajax 处理一样，没有任何附加内容。

# linux - 具有功能的linux cron脚本未运行

> ID：12094162
> 
> 赞同：0
> 
> 时间：2012-08-23T14:38:53.297
> 
> 标签：linux, bash, cron, ubuntu-server

我正在尝试将脚本作为 cron 中的作业运行。

剧本：

```
echo "Defining function"
function talkMe() {
        echo "me"
}
echo "Start talking"
talkMe 
```

cron 作业：

```
0 18 * * * /scripts/talk.sh > /tmp/talk.log 
```

cron 错误：

```
Aug 23 11:24:01 database CRON[8497]: (root) CMD (/scripts/talk.sh > /tmp/talk.log)
Aug 23 11:24:01 database CRON[8494]: (CRON) error (grandchild #8497 failed with exit status 2) 
```

测试日志：

```
Defining function 
```

在我尝试更改 ROOT 密码之前，该脚本运行良好：

```
sudo su
passwd <my new pass for root> 
```

此命令似乎没有效果，ROOT 继续使用旧密码......但是在此命令之后，出现了 CRON 问题！

如何解决 CRON 问题，以正确运行脚本？

注意：手动运行脚本，一切正常！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-23T15:00:33.920

你的剧本没有 she-bang 台词。将此行插入脚本顶部：

```
#!/bin/bash 
```

脚本可能由使用不同语法定义函数的不同 shell 运行。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-23T15:00:33.863

尝试跟随一个。还检查 /var/log/cron 日志

```
0 18 * * * /bin/bash /scripts/talk.sh > /tmp/talk.log 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-23T17:24:43.267

@choroba 指出了主要问题：您的脚本没有 shebang，所以您不知道它在哪个 shell 中运行。次要问题是`function`非标准的 - bash 容忍（即忽略）它，但其他一些 shell 会呕吐它：

```
$ function talkMe() {
sh: Syntax error: "(" unexpected
$ echo $?
2 
```

（请注意，此处的退出状态与日志中的内容相匹配。）

解决任一问题应该足以使其正常工作，但最好同时解决这两个问题：

```
#!/bin/bash
echo "Defining function"
talkMe() {
    echo "me"
}
echo "Start talking"
talkMe 
```

# delphi - delphi如何使用TNMSMTP组件发送邮件

> ID：12094163
> 
> 赞同：1
> 
> 时间：2012-08-23T14:39:00.373
> 
> 标签：delphi

我正在尝试使用 TNMSMTP 组件使用 lotus notes 发送电子邮件。我应该遵循哪些步骤来通过应用程序连接莲花笔记。有 2 个属性，一个是 Host，另一个是 User id。我应该在我没有得到的属性中提到什么。任何人都可以请帮忙。谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-23T14:53:50.353

对于主机，您通常可以只使用 Domino 服务器的名称（Notes 客户端连接到的服务器 - 您可以从命令窗口按名称 ping 的服务器）。您可以通过查看邮件数据库所在的服务器来查看名称，或者在首次登录 Notes 时查看状态栏的左下部分。

对于用户 ID，它是您用于登录 Notes 以访问您的邮箱和日历的名称。

但是，要使其工作，您的 Domino 服务器必须配置为允许发送 SMTP 邮件。他们中的大多数都不是，AFAIK，以防止恶意软件通过服务器发送垃圾邮件。

# codeigniter - 使用 codeigniter 发送邮件

> ID：12094164
> 
> 赞同：2
> 
> 时间：2012-08-23T14:39:04.813
> 
> 标签：codeigniter

我有一个表格，用户可以将他们的消息发送到不同的邮件 ID。该表单具有发件人、收件人、主题等字段。用户将在“发件人”字段中提供他们的邮件 ID，在“收件人”字段中提供收件人的邮件 ID。问题是我无法发送邮件，尽管我认为我的代码没问题。CodeIgniter 是否允许以这种方式发送电子邮件？

**控制器**

```
class Email_send extends CI_Controller {   

    function Email_send()
    {
        parent::__construct();
        $this->load->library('email');
        $this->load->helper('url');
        $this->load->helper('form');
    }

    function index()
    { 
        $config = Array(
            'protocol' => 'smtp',
            'smtp_host' => 'ssl://smtp.googlemail.com',
            'smtp_port' => 465,
            'subject'  => $this->input->post('subject'),
            'message'  => $this->input->post('message'),
            'from'    => $this->input->post('from'),
            'to'  => $this->input->post('to'),
        );

        $this->load->library('email', $config);
        $this->email->set_newline("\r\n");

        $this->email->initialize($config);

        $this->email->from($config['subject']);
        $this->email->to($config['to']); 

        $this->email->subject($config['from']);
        $this->email->message($config['message']);  

        if($this->email->send())
        {
            $this->load->view('success_em');
        }

        else
        {
            show_error($this->email->print_debugger());
        }
    }
} 
```

**看法**

```
 echo form_open('Email_send', $attributes); ?>

<p>
        <label for="from">Your mail ID <span class="required">*</span></label>
        <?php echo form_error('from'); ?>
        <br /><input id="name" type="text" name="from"value="<?php echo set_value('from'); ?>"  />
</p>

<p>
        <label for="to">To <span class="required">*</span></label>
        <?php echo form_error('to'); ?>
        <br /><input id="to" type="text" name="to" value="<?php echo set_value('to'); ?>"  />
</p>

<p>
        <label for="subject">Subject of the mail<span class="required">*</span></label>
        <?php echo form_error('subject'); ?>
        <br /><input id="subject" type="text" name="subject"  value="<?php echo set_value('subject'); ?>"  />
</p>

<p>
        <label for="message">Your Message<span class="required">*</span></label>
        <?php echo form_error('message'); ?>
        <br /><textarea id="message" style="width:300px; height:80px" type="text" name="message"  value="<?php echo set_value('message'); ?>"  /></textarea> 
```

**错误**

```
The following SMTP error was encountered: 530-5.5.1 Authentication Required. Learn more at 530 5.5.1 http://support.google.com/mail/bin/answer.py?answer=14257 ko8sm6157345pbc.40
502 5.5.1 Unrecognized command. ko8sm6157345pbc.40
The following SMTP error was encountered: 502 5.5.1 Unrecognized command. ko8sm6157345pbc.40
Unable to send email using PHP SMTP. Your server might not be configured to send mail using this method.

User-Agent: CodeIgniter
Date: Thu, 23 Aug 2012 14:54:54 +0000
From: 
Return-Path: 
To: xxxxx@gmail.com
Subject: =?utf-8?Q?xxxxx@hotmail.com?=
Reply-To: "hello" 
X-Sender: hello
X-Mailer: CodeIgniter
X-Priority: 3 (Normal)
Message-ID: <5036443e415e4>
Mime-Version: 1.0

Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 8bit

hello 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-23T15:05:40.100

我认为您不需要在传递给初始化电子邮件类的对象中添加`subject`, `message`, `from`, 。`to``config`

尝试删除这些并按照 Hatem 的建议包含 SMTP 身份验证密钥。

**例如**

```
$config = Array(
    'protocol' => 'smtp',
    'smtp_host' => 'ssl://smtp.googlemail.com',
    'smtp_port' => 465,
    'smtp_user' => 'user@gmail.com';
    'smtp_pass' => 'yourpassword';  
); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-23T14:51:56.510

您需要先进行身份验证。你错过了这两个参数：

```
$config['smtp_user'] = "user@gmail.com";
$config['smtp_pass'] = 'yourpassword'; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-23T15:05:11.070

您需要先进行身份验证。你错过了这两个参数：

```
$config['smtp_user'] = "user@gmail.com";
$config['smtp_pass'] = 'yourpassword'; 
```

将它们添加到其他配置旁边。

# c# - 详细信息视图中的评估/绑定下拉列表

> ID：12094171
> 
> 赞同：1
> 
> 时间：2012-08-23T14:39:25.857
> 
> 标签：c#, asp.net, data-binding, detailsview

我在详细信息视图中有一个下拉列表，它从一个表中获取其值并将所选值绑定到另一个表。我遇到的问题是，每当回发发生时，我从中获取 ddl 值的表就会更改回默认读取。这使得选择的值总是更改为 null （这是列表的第一个值）

我试过把 !IsPostBack 放在 page_load 中：

```
 if (!IsPostBack)
   {
        DetailsView1.DataBind();
   } 
```

我确实有第二个 ddl，它依赖于第一个列表，但那个工作正常，它是第一个始终为空且不会保存所选值的列表。

这是第一个ddl：

```
 <asp:DropDownList ID="DropDownList1" runat="server" AppendDataBoundItems="True" 
    AutoPostBack="True" DataSourceID="SQLLEAVECODE" DataTextField="LEAVETYPE" 
    DataValueField="LEAVECODE" Height="18px" style="text-transform:uppercase;"
    onselectedindexchanged="DropDownList1_SelectedIndexChanged"
    SelectedValue='<%# bind("reqleavecode") %>' Width="145px">
    <asp:ListItem></asp:ListItem>
  </asp:DropDownList> 
```

我似乎无法弄清楚这一点，我认为这可能与我的绑定有关。

```
 public string lvtype;
    public string lvrequest;

    private DataSet GetData()
    {
        ConnectionStringSettingsCollection cssc = ConfigurationManager.ConnectionStrings;

        var sql = "SELECT LEAVETYPE, LEAVECODE FROM TESTBWTIME.BWLVTYPE ORDER BY LEAVECODE";

        using (iDB2Connection conn = new iDB2Connection(GetConnectionString()))
        {
            conn.Open();

            using (iDB2Command cmd = new iDB2Command(sql, conn))
            {
                cmd.DeriveParameters();

                using (iDB2DataAdapter da = new iDB2DataAdapter(cmd))
                {
                    DataSet ds = new DataSet();
                    da.Fill(ds);

                    return ds;
                }
            }
        }
    }

    private String GetConnectionString()
    {
        ConnectionStringSettingsCollection cssc = ConfigurationManager.ConnectionStrings;

        return cssc["connStringNET"].ToString();
    }

    protected void Page_Load(object sender, EventArgs e)
    {
        DropDownList ddl1 = (DropDownList)(DetailsView1.FindControl("DropDownList6"));
        DropDownList ddl2 = (DropDownList)(DetailsView1.FindControl("DropDownList5"));
        DataSet ds = GetData();
        if (!Page.IsPostBack)
        {
            ddl1.DataSource = ds;
            ddl1.DataBind();
            lvtype = ddl1.SelectedValue;

            ddl2.DataSource = ds;
            ddl2.DataBind();
            lvrequest = ddl2.SelectedValue;
        }
        else
        {
            lvtype = ddl1.SelectedValue;
            lvrequest = ddl2.SelectedValue;
        }
       } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-23T15:03:01.817

我遇到了同样的问题，我使用以下技术解决了它。请根据您的需要修改此代码。基本上，您需要在顶部有两个变量，即该类的全局变量。然后您可以在 Postback 中获取下拉列表的选定值和选定的索引更改事件，如下所示；

```
public string vendorId;
public string categoryId;

protected void Page_Load(object sender, EventArgs e)
{
    if (!Page.IsPostBack)
    {
        dropDownListVendor.DataSource = CatalogAccess.GetVendors();
        dropDownListVendor.DataBind();
        vendorId = dropDownListVendor.SelectedValue;

        dropDownListCategory.DataSource = CatalogAccess.GetCategoriesInVendor(vendorId);
        dropDownListCategory.DataBind();
        categoryId = dropDownListCategory.SelectedValue;
    }
    else
    {
        vendorId = dropDownListVendor.SelectedValue;
        categoryId = dropDownListCategory.SelectedValue;
    }
}

protected void dropDownListVendor_SelectedIndexChanged(object sender, EventArgs e)
{
    if (Page.IsPostBack)
    {
        dropDownListCategory.DataSource = CatalogAccess.GetCategoriesInVendor(vendorId);
        dropDownListCategory.DataBind();
    }
} 
```

# c - 将NULL转换为C中的结构指针？

> ID：12094174
> 
> 赞同：8
> 
> 时间：2012-08-23T14:39:38.250
> 
> 标签：c, pointers, casting, struct

将 NULL 转换为 C 中的结构指针有什么好处吗？

例如：

```
typedef struct List
{
....
} List;

List *listPtr = ((List *) NULL) ; 
```

来自 PostgreSQL 源的示例：

```
#define NIL                     ((List *) NULL) 
```

[http://doxygen.postgresql.org/pg__list_8h_source.html](http://doxygen.postgresql.org/pg__list_8h_source.html)

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-08-23T14:47:12.800

在赋值示例中，显式强制转换没有任何意义。但是，您的问题似乎实际上与`#define NIL ((List *) NULL)`宏有关，其可用性超出了赋值范围。

一个可能有意义的地方是将它传递给可变参数函数或没有原型声明的函数。该标准`NULL`可以以其他方式定义为`0`or`0L`或`((void *) 0)`or ，这意味着它在这种无类型的上下文中可能会有不同的解释。显式转换将确保它被正确解释为指针。

例如，这通常是无效的（行为未定义）

```
void foo();

int main() {
  foo(NULL);
}

void foo(List *p) {
  /* whatever */
} 
```

同时用

```
foo(NIL); 
```

使其有效。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-08-23T14:41:28.787

没有 null 是 null，它是你可以得到的 null，你可能认为零是相当 null，但与 null 相比，这只是花生。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-08-23T14:41:24.963

> 将 NULL 转换为 C 中的结构指针有什么好处吗

没有。应该很简单：

```
List *listPtr = NULL; 
```

此外，如果对象具有静态存储（例如，像全局变量），您甚至不需要将其初始化为 NULL。

# javascript - 获取数组的长度 - 打印不正确的值

> ID：12094176
> 
> 赞同：0
> 
> 时间：2012-08-23T14:39:38.700
> 
> 标签：javascript, extjs4

我有一个名为`arr`. 我正在向它添加项目 ( `arr.push(val)`) 并将值打印为 1 ( `arr.length`) - 当我仅添加 1 个项目时它会打印 1。

但是，当我添加 2 个值/项目（`arr.push(val)`）时，我仍然得到结果，`1`而不是`2`。

```
var arr=[];
arr.push(val);
console.log(arr.length);
console.log(arr); 
```

当我添加**1 个**值时，我得到`console.log(arr);`as`One`

当我添加**2**值时，我得到`console.log(arr);`as的输出`One,Two`（但长度打印为 1）

为什么是这样 ？我该如何解决这个问题。

**更新**

```
checkBox: function (val) {

var arr=[];
arr.push(val.name);
console.log(arr.length);
console.log(arr);

} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-23T14:53:34.847

每次调用该函数时，您都在重新实例化您的数组。因此它只会包含当前值。您应该尝试：

```
var arr      = [],
    checkbox = function(val) {
        arr.push(val);
        console.log(arr.length);
    };

checkbox('hello');
checkbox('moto'); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-23T14:49:21.740

可能您正在将字符串或数组推入该数组！

以下作品：

```
arr.push("one","two"); // -> arr =["one","two"] 
```

这也可以，但只将一个元素放入数组中

```
arr.push("one,two"); // -> arr =["one,two"] <- the first element is a string "one,two" 
```

这与将字符串推入数组的方式相同：

```
arr.push(["one","two"]); // arr = [["one","two"]] <- the first element is an array ["one,two"] 
```

如果它是一个字符串，则需要先将其拆分（例如，当它是名称时）并将值放入第一个数组中`concat()`

```
var a = [];
var name = "John Doe";
var b = name.split(" "); // creates an array ["John","Doe"]
a.concat(b); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-23T14:50:06.050

向数组添加两个元素应始终正确更新其长度属性，无论您是一次添加一个元素还是将它们添加到一个组中。

获得长度差异的唯一方法是将这两个值添加为数组或单个字符串，在这种情况下，原始数组中只有 1 个元素，并且该元素将是包含 2 个元素的数组或单个字符串。

```
var blah = [];
blah.push('foo');
blah.push('bar');
console.log(blah.length); // 2

var boo = [];
boo.push('foo', 'bar');
console.log(boo.length); // 2

var baz = [];
baz.push(['foo', 'bar']);
console.log(baz.length); // 1 
```

[http://jsfiddle.net/EcHtU/](http://jsfiddle.net/EcHtU/)

# google-chrome - Chrome 开发者工具控制台 - 一些记录的对象周围的括号是什么？

> ID：12094178
> 
> 赞同：0
> 
> 时间：2012-08-23T14:39:42.383
> 
> 标签：google-chrome, logging, console

我在这个 jsFiddle 中将一些对象、数组、字符串记录到 Chrome 控制台：

[http://jsfiddle.net/RkXqg/](http://jsfiddle.net/RkXqg/)

一些控制台对象在它们周围有括号 [] .. 其他没有..

括号是什么意思？...如果控制台对象与 DOM 分离，它看起来会有所不同吗？等等...找不到关于此的文档..

非常感谢..

![在此处输入图像描述](../Images/f76c8e22c77ba7d59efd6f5ee90ed694.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-26T03:20:17.873

jQuery 会将所有匹配项的数组返回给您传递给 $ 函数的选择器。如果要访问 DOM 对象本身，请从数组中访问该索引： $('selector')[0]

# svn - 源代码控制 (SVN) 最佳实践

> ID：12094180
> 
> 赞同：2
> 
> 时间：2012-08-23T14:39:44.683
> 
> 标签：svn, version-control

我正在寻找一些关于使用 SVN 的建议（可能不是特定于 SVN）。

我们只是刚刚开始使用源代码控制，因为公司现在开始有点增长（我知道我知道，我们应该一直在使用它;-)）。

每个项目都有不同的文件，您可能希望从源代码管理中排除，即内容图像、dll 文件等，但有一些具体的示例我不完全确定如何处理。

1) SQL DB 文件 - 我正在考虑单独备份这些文件（作为我们备份例程的一部分），然后在每个分支中让开发人员签入更改脚本

2) DLL 在 bin 文件夹中。我只考虑签入那些属于申请的一部分，而不是任何应该存在于 GAC 中的内容。其次，我打算从另一个本地项目中排除 dll 所在的任何地方，该项目本身处于源代码控制之下？

您可以提供的任何建议将不胜感激。

谢谢艾尔

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-23T14:53:53.517

包括不是由构建创建的所有内容，基本上是在构建之后留下的所有内容`make clean`

外部库和 dll 非常适合包含在 SVN 中，因此如果您升级这些组件，您总是可以重新创建早期版本。任何测试或样本数据都是如此。

SVN 有效地仅存储差异和文件更改时，因此通常没有问题，包括大量静态数据

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-23T14:49:46.763

关于

*   SQL 数据库文件

您的想法是正确的...这应该单独备份，您可以创建分支来保留它们。

*   DLL 在 bin 文件夹中

我假设单个项目所需的所有 DLL 都应该在存储库中的项目中可用，以便您的工作单元完整。

此外，每个项目都应该在存储库中拥有自己的......不建议在项目源代码控制中保持重叠。

## 编辑

自己的存储库意味着单独`trunk`的，`branches`并且`tags`对于每个项目。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-23T14:50:32.677

对于 1) 应该有通用的“设置脚本”为您在源代码管理中拥有的每个修订版填充一个新的数据库。可选的变更脚本很好，但请确保您可以通过一个步骤轻松设置整个数据库。

“实时”数据的备份当然不应该存在于存储库中。

关于 2)，这听起来像是你在用 .Net 做一些事情。在这种情况下，我建议在项目文件的某处处理 DLL，因为它们是构建依赖项。请记住，在指定项目依赖项时，MSBuild 可以很好地“拉取”所有必需的依赖程序集。

在我看来，“build”（或“bin”）文件夹不应该包含任何内容。它仅在项目建成时填充。

# java - 在 Hibernate 映射 OneToMany 关系的过程中

> ID：12094182
> 
> 赞同：0
> 
> 时间：2012-08-23T14:39:46.357
> 
> 标签：java, hibernate, hibernate-mapping

`A`让我们以两个实体和为例`B`。每个`A`可能有许多关联`B`的 s。每个`B`都与一个 相关联`A`。我将这种与 Hibernate 的关系表示如下：

```
@Entity
public class A {

    @Id
    @GeneratedValue(strategy = GenerationType.AUTO)
    @Column(name = "AId")
    private Long id;

    @Column(name = "AName", nullable = false, unique = true)
    private String name;

    @OneToMany(cascade = CascadeType.ALL)
    @JoinTable(name = "A_B", joinColumns = { @JoinColumn(name = "AId") }, inverseJoinColumns = { @JoinColumn(name = "BId") })
    private Set<B> bs = new HashSet<B>();

}

@Entity
public class B {

    @Id
    @GeneratedValue(strategy = GenerationType.AUTO)
    @Column(name = "BId")
    private Long id;

    @Column(name = "BName")
    private String name;

    @ManyToOne(optional = false)
    @JoinColumn(name = "BA")
    private A a;

} 
```

当我从这个映射生成数据库时，这就是我得到的：

*   表`A`。
*   `A_B`具有 2 列的连接表：`AId`和`BId`。`AId`并且`BId`属于主键。`OneToMany`并且由于从`A`to存在关联`B`（即，一个`A`可能有许多关联`B`的 s，而一个`B`与恰好一个关联`A`），因此在 上添加了唯一约束`BId`。
*   包含列的表`B`，包括`BA`哪个是 table 的关键`foreign`引用列。`AId``A`

关于`join table`,

*   为什么 Hibernate 以`OneToMany`这种方式映射关系？
*   它可以简单地将主键定义为由一列 ( `BId`) 组成，并且将执行相同的规则。
*   以这种方式完成映射是否有原因？
*   这种映射的优点/缺点是什么？

我准确地说我正在使用`Hibernate 4.1.6.Final`.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-23T15:16:12.197

我看到您正在尝试映射双向关联：从 A 到 B，从 B 到 A。

> 关于连接表，为什么 Hibernate 以这种方式映射 OneToMany 关系？

因为您指定了一个连接表。您可以在没有它的情况下映射 @OneToMany 关系：

```
@OneToMany(cascade = CascadeType.ALL)
@JoinColumn(name = "AId", nullable = false)
private Set<B> bs = new HashSet<B>(); 
```

或者更好，因为你有一个双向关联：

```
@OneToMany(cascade = CascadeType.ALL, mappedBy = "a")  
private Set<B> bs = new HashSet<B>(); 
```

...

```
@ManyToOne(optional = false)  
@JoinColumn(name = "AId", nullable = false)  
private A a; 
```

关于

> 以这种方式完成映射是否有原因？这种映射的优点/缺点是什么？

当您有一个可选的一对多时，与连接表的映射很有用，例如，如果 B 可能没有 A。它允许您避免 B 表上的可为空的 AId 列。

# java - Java：如何查看密码的所有可用提供程序？

> ID：12094183
> 
> 赞同：0
> 
> 时间：2012-08-23T14:39:47.543
> 
> 标签：java

对于指定的密码，比如 RSA/ECB/PKCS1Padding，我如何查看可用的提供程序？我需要按名称引用它，这可用于 getInstance(String transformation, String provider) 重载。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-23T14:59:44.493

```
 Provider[] provides=Security.getProviders("Cipher.RSA");
    for (int i = 0; i < provides.length; i++) {
        System.out.println("provider:"+provides[i].getName());            
    } 
```

# java - 为什么我的应用程序崩溃了？

> ID：12094185
> 
> 赞同：0
> 
> 时间：2012-08-23T14:39:49.823
> 
> 标签：java, android

我正在制作一个安卓井字游戏应用程序。当我在**GS2**上运行应用程序时，应用程序崩溃。我不知道问题出在哪里，所以这是我的**onCreate()**方法。（我还没有添加任何方法，我的应用程序才刚刚启动..）：

```
super.onCreate(savedInstanceState);
    setContentView(R.layout.main);
    Typeface font = Typeface.createFromAsset(getAssets(), "coolvetica.ttf");
    final Button button1 = (Button) findViewById(R.id.button1);
    final Button button2 = (Button) findViewById(R.id.Button01);
    button1.setTypeface(font);
    button2.setTypeface(font);
    button1.setOnClickListener(new View.OnClickListener() {
        public void onClick(View v) {
            button1.setBackgroundResource(R.drawable.startbuttonpressed);
        }
    });
    button2.setOnClickListener(new View.OnClickListener() {
        public void onClick(View v) {
            button2.setBackgroundResource(R.drawable.resetbuttonpressed);
            // Perform action on click
        }
    }); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-23T14:50:40.630

可能会发生许多事情中的一件。除非您发布您的 logcat 输出，否则这里的任何人都无法说出。您发布的 logcat 不是错误日志。

两件事之一正在发生。

1.  您的其中一个 id 实际上不在您膨胀的 xml 布局中
2.  您的“资产”目录中没有字体

# ios - 将 b 完成按钮添加到数字键盘

> ID：12094187
> 
> 赞同：0
> 
> 时间：2012-08-23T14:40:03.053
> 
> 标签：ios, xcode, ios5

我已经阅读了很多关于此的问题，但找不到解决方案。

我只是不会在我的 NumberPad 上添加完成按钮

```
- (void)viewDidLoad
{
    [[NSNotificationCenter defaultCenter] addObserver:self
                                             selector:@selector(keyboardDidShow:)
                                                 name:UIKeyboardWillShowNotification
                                               object:nil];

    [super viewDidLoad];
    // Do any additional setup after loading the view.
}

- (void)addButtonToKeyboard {
    NSLog(@"call");
    // create custom button
    UIButton *doneButton = [UIButton buttonWithType:UIButtonTypeCustom];
    doneButton.frame = CGRectMake(0, 163, 106, 53);
    doneButton.adjustsImageWhenHighlighted = NO;

    [doneButton setImage:[UIImage imageNamed:@"doneup.png"] forState:UIControlStateNormal];
    [doneButton setImage:[UIImage imageNamed:@"donedown.png"] forState:UIControlStateHighlighted];

    [doneButton addTarget:self action:@selector(doneButton:) forControlEvents:UIControlEventTouchUpInside];
    // locate keyboard view
    UIWindow* tempWindow = [[[UIApplication sharedApplication] windows] objectAtIndex:1];
    UIView* keyboard;

    NSLog(@"%d", [tempWindow.subviews count]);

    for(int i=0; i<[tempWindow.subviews count]; i++) {
        NSLog(@"found");

        keyboard = [tempWindow.subviews objectAtIndex:i];
        [keyboard addSubview:doneButton];
    }
}

- (void)keyboardDidShow:(NSNotification *)note {
    // if clause is just an additional precaution, you could also dismiss it
    if ([[[UIDevice currentDevice] systemVersion] floatValue] >= 3.2) {
        [self addButtonToKeyboard];
    }
} 
```

这段代码：

NSLog(@"%d", [tempWindow.subviews count]);

始终为 0，因此它根本不添加按钮……知道吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-09T00:43:56.477

真正的解决方案是创建一个包含所有按钮的视图 (12)。然后只需将其动画化到屏幕外即可。使用之前的海报方法，iOS 的任何更新都会破坏功能，如果你有任何严肃的应用程序，你不希望这样。您的客户可能会发疯，您的应用程序会被替代安装。

不利的一面是，您需要绘制一些像样的图形，但要保证在 Apple 有官方方法让这种情况发生之前一直工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-23T14:49:11.710

有一个很棒的教程可以完全满足您的需求所以请访问： http: [//www.neoos.ch/blog/37-uikeyboardtypenumberpad-and-the-missing-return-key](http://www.neoos.ch/blog/37-uikeyboardtypenumberpad-and-the-missing-return-key)

尝试添加

```
 if([[keyboard description] hasPrefix:@"UIKeyboard"] == YES)
        [keyboard addSubview:doneButton]; 
```

在你的

```
for(int i=0; i<[tempWindow.subviews count]; i++) {
    NSLog(@"found");

    keyboard = [tempWindow.subviews objectAtIndex:i];
    [keyboard addSubview:doneButton];
} 
```

所以这应该是你的结果：

```
for(int i=0; i<[tempWindow.subviews count]; i++) {
    NSLog(@"found");

    keyboard = [tempWindow.subviews objectAtIndex:i];
    if([[keyboard description] hasPrefix:@"UIKeyboard"] == YES)
        [keyboard addSubview:doneButton];   
} 
```

或者您可以只使用您将在这篇文章中找到的扩展 [https://stackoverflow.com/a/4355795/1578508](https://stackoverflow.com/a/4355795/1578508)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-23T15:54:49.640

this my working code for this, it has been **used on real iPhone only**, I've never tested on Simulator, I'm hoping it will help on you.

```
- (void)keyboardWillShow:(NSNotification *)notification {
    UIWindow *_keyboardWindow = nil;
    for (UIWindow *_testWindow in [[UIApplication sharedApplication] windows]) {
        if (![[_testWindow class] isEqual:[UIWindow class]]) {
            _keyboardWindow = _testWindow;
            break;
        }
    }

    UIView *_foundKeyboard = nil;
    for (UIView *_possibleKeyboard in [_keyboardWindow subviews]) {
        if ([[_possibleKeyboard description] hasPrefix:@"<UIPeripheralHostView"]) {
            if ([[[[_possibleKeyboard subviews] objectAtIndex:0] description] hasPrefix:@"<UIKeyboard"]) {
                _foundKeyboard = _possibleKeyboard;
                break;
            }
        } else if ([[_possibleKeyboard description] hasPrefix:@"<UIKeyboard"]) {
            _foundKeyboard = _possibleKeyboard;
            break;
        }
    }

    if (_foundKeyboard) {
        if (_doneButton == nil) {
            _doneButton = [UIButton buttonWithType:UIButtonTypeCustom];
            _doneButton.frame = CGRectMake(0, 163, 106, 53);
            _doneButton.adjustsImageWhenHighlighted = false;
            [_doneButton.titleLabel setFont:[UIFont boldSystemFontOfSize:19.f]];
            [_doneButton setTitle:@"DONE" forState:UIControlStateNormal];
            [_doneButton setTitleColor:[UIColor colorWithRed:77.f/256.f green:84.f/256.f blue:98.f/256.f alpha:1.f] forState:UIControlStateNormal];
            [_doneButton setTitleShadowColor:[UIColor whiteColor] forState:UIControlStateNormal];
            [_doneButton.titleLabel setShadowOffset:CGSizeMake(1.f, 1.f)];
            [_doneButton setTitle:@"DONE" forState:UIControlStateHighlighted];      
            [_doneButton addTarget:self action:@selector(buttonKeyBoardDoneTouchedUpInside:) forControlEvents:UIControlEventTouchUpInside];
        }
        if (_doneButton.superview == nil) {
            [_foundKeyboard addSubview:_doneButton];
        }
    }
} 
```

# c# - 如何将绑定标记扩展从内联转换为元素语法？

> ID：12094188
> 
> 赞同：1
> 
> 时间：2012-08-23T14:40:03.617
> 
> 标签：c#, .net, wpf, xaml, multibinding

我是一个完整的 .NET/C# nublet。我继承了一些使用 XAML 为窗口定义 UI 的代码，并且我正在尝试与一些现有的 XML 垃圾进行交互。这可能是一个非常简单的问题；我只是不知道谷歌是什么。

我有一个要基于布尔值禁用的文本框。我可以用这段代码做到这一点：

清单 A：

```
<TextBox x:Name="ServerNameTextBox" ... IsEnabled="{Binding ServerName.Editable}" /> 
```

当我想将它基于一个变量*和*一个复选框时，问题就来了。我已经阅读过 IMultiValueConverter 并为此写了一篇，但我不确定如何指定绑定，因为格式会发生变化。

清单 B：

```
<TextBox x:Name="ServerNameTextBox" ... >
    <TextBox.IsEnabled>
        <Binding ElementName="CheckBoxServerNameEnabled" Path="IsChecked" />
        <Binding ??? />
     </TextBox.IsEnabled>
</TextBox> 
```

为了做出与第一行相同的引用，问号中需要写什么？告诉我清单 A 中使用的绑定类型被称为什么类型的加分。

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-23T14:44:57.943

`{Binding ServerName.Editable}`是（[在这种情况下](https://stackoverflow.com/a/9383001/546730)）等价于 `{Binding Path=ServerName.Editable}`

所以在你的`MultiBinding`你有

```
<MultiBinding Converter="...">
    <Binding ElementName="CheckBoxServerNameEnabled" Path="IsChecked"/>
    <Binding Path="ServerName.Editable"/>
</MultiBinding> 
```

在[标记扩展](http://msdn.microsoft.com/en-us/library/system.windows.markup.markupextension.aspx)中，未命名的参数被传递给构造函数，`Binding`具有一个[接受路径](http://msdn.microsoft.com/en-us/library/ms597578.aspx)的构造函数。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-23T14:42:02.880

您快到了。检查[http://msdn.microsoft.com/en-us/library/system.windows.data.multibinding.aspx](http://msdn.microsoft.com/en-us/library/system.windows.data.multibinding.aspx)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-04-04T19:40:39.227

由于标记扩展类派生自`Binding`，因此我能够替换 XML 元素标记。例如：

前：

```
 <local:FolderBox Text="{xset:XSettings Folders.BuildRoot}"/> 
```

后：

```
 <local:FolderBox>
      <local:FolderBox.Text>
         <MultiBinding Converter="{StaticResource Precedence}" Mode="TwoWay">
            <xset:XSettings Prefix="Folders.BuildRoot" BindNow="True"/>
            <Binding ElementName="BuildRoot" Path="Text"/>
         </MultiBinding>
      </local:FolderBox.Text>
   </local:FolderBox> 
```

但是，现在调用构造函数时不带参数。所以我不得不使用“ConstructorArgument”，最后一个“BindNow”参数用于逻辑运行构造函数代码。例如：

```
public class XSettingsExtension : Binding
{
   [ConstructorArgument("Prefix")]
   public string Prefix { get; set; }

   private bool _BindingSet;
   [ConstructorArgument("BindNow")]
   public bool BindNow
   {
      get { return this._BindingSet; }
      set { this._BindingSet = value; SetBinding(); }
   } 
```

# exception - JasperReports 异常加载 jrxml 文件

> ID：12094192
> 
> 赞同：0
> 
> 时间：2012-08-23T14:40:18.023
> 
> 标签：exception, hadoop, jasper-reports, hive

当我调用我的代码时：

```
JasperDesign jasperDesign = JRXmlLoader.load(reportTemplate); 
```

它打印以控制台错误，然后向我抛出异常：

```
ERROR extensions.DefaultExtensionsRegistry: Error instantiating extensions registry for queryexecuters.hive from jar:file:/C:/Users/GDantimi/workspace/ProvaJasper/lib/js-hive-datasource-1.1.jar!/jasperreports_extension.properties

net.sf.jasperreports.engine.JRRuntimeException: Could not load class com.jaspersoft.hadoop.hive.HiveQueryExecuterExtensionsRegistryFactory
at net.sf.jasperreports.engine.util.ClassUtils.instantiateClass(ClassUtils.java:63) 
```

我搜索了那个图书馆，但我没有找到任何东西。

# php - 如何在 php/magento 中动态创建数组

> ID：12094195
> 
> 赞同：1
> 
> 时间：2012-08-23T14:40:24.920
> 
> 标签：php, magento, magento-1.7

我试过下面的代码

```
<?php

foreach ($_wishlistitemCollection as $_wishlistitem):
    $_product  = $_wishlistitem->getProduct();
    $imgpath   = $this->helper('catalog/image')->init($_product, 'small_image');
    $physpaths = array($imgpath);
endforeach;
?>
<?php

for ($i = 0; $i < 5; $i++) {
    echo $physpaths[$i];
}
?> 
```

没有错误，但问题是它没有显示 array 中的所有元素`$physpaths`。

请帮助我如何确保`$physpaths`包含所有元素或简单地指出我犯了错误的地方。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-23T14:45:08.440

很近 ;）

```
<?php
$physpaths = array();
foreach ($_wishlistitemCollection as $_wishlistitem):
    $_product  = $_wishlistitem->getProduct();
    $imgpath   = $this->helper('catalog/image')->init($_product, 'small_image');
    $physpaths[] = $imgpath;
endforeach;
?>
<?php

for ($i = 0; $i < 5; $i++) {
    echo $physpaths[$i];
}
?> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-23T14:45:01.967

为了在新索引处将值附加到数组，您应该使用`array_push()`或`[]`：

```
<?php
foreach(...) :
    .
    .
    .
    // use this
    $physpaths[] = $imgpath;
    // or this
    array_push($physpaths, $imgpath);
    // NOT BOTH
endforeach; 
```

然后，不要循环遍历每个数组索引并使用`echo`，只需使用`var_dump()`：

```
echo "<pre>";
var_dump($physpaths);
echo "</pre>"; 
```

**提示：**您应该`$physpaths`在`foreach`.

```
$physpaths = array();

foreach(...):
    .
    .
    .
endforeach; 
```

# ruby-on-rails - 您可以将语言环境文件放入 gem 中吗？

> ID：12094197
> 
> 赞同：0
> 
> 时间：2012-08-23T14:40:28.383
> 
> 标签：ruby-on-rails

我正在尝试在多个应用程序中使用相同的语言环境文件。它们可以包含在宝石中吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-24T22:24:50.817

这绝对是可行的，我使用[https://github.com/svenfuchs/rails-i18n](https://github.com/svenfuchs/rails-i18n)作为基线

# jira - Confluence 问答插件

> ID：12094199
> 
> 赞同：7
> 
> 时间：2012-08-23T14:40:30.340
> 
> 标签：jira, confluence

我想在 Confluence 中有问答模块，其中一名员工会就他遇到的问题提出问题，而另一名员工会做出回应。我想在那里进行评级，每个人都可以对问题和答案进行上下投票。我希望它与 stackoverflow.com 几乎相同。

Atlassian Marketplace 上是否有可用的插件？我试图用谷歌搜索它，但我没有运气。

谢谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-23T16:04:37.797

好吧，当 Atlassian 想要这样的应用程序时，他们选择使用[OSQA](http://www.osqa.net/)而不是 Confluence。这就是[Atlassian Answers](http://answers.atlassian.com)的强大功能。

# c++ - 去除四面体网格中内部元素的算法

> ID：12094200
> 
> 赞同：3
> 
> 时间：2012-08-23T14:40:36.947
> 
> 标签：c++, opengl, glut

我在 OpenGL 中渲染一个四面体网格。每个四面体的每个面都使用一个三角形绘制（每个四面体总共有 4 个三角形）。我正在寻找一种简单的方法来移除网格的内部元素。例如，如果网格的形状是一个单位球体（以原点为中心），我可以平均四面体中每个面的三个坐标，并且只绘制与原点距离最大的面。这将产生一个球壳。

我正在使用的网格比球体更复杂:)。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-23T21:25:04.680

我相信，根据你的描述，当一个面只是一个四面体的一部分时，它就是壳的一部分。您可以通过为面的每个点创建连接点列表来找到面所属的四面体的数量。然后只需找出每个列表中有多少点在所有三个列表中是共同的 - 这是一个面/三角形所属的四面体的数量。

我能想到的高级伪代码是：

```
bool isPartOfShell(Triangle triangle)
{ 
  foreach(Point p in triangle)
    make a list of all connected points in p

  x = the number of points common in all lists

  return x == 1;
} 
```

# java - 为什么 TransformedCollection 不实现 hashCode？

> ID：12094202
> 
> 赞同：4
> 
> 时间：2012-08-23T14:40:52.977
> 
> 标签：java, collections, guava

我希望两个相同的转换产生具有相同`hashCode`. 我想使用这个属性来检查我的对象是否以有意义的方式发生了变化。

不幸的是，Guava 的`TransformedCollection extends AbstractCollection`which ( 不像`AbstractList`) 没有实现`hashCode`或等于，`TransformedCollection`也没有这样的尝试。

*   我们不能根据`hashCode`迭代器的顺序或类似的返回值来计算 a 吗？
*   或者那仍然不能保证相同`hashCodes`？
*   也许我们可以以某种无法解决`TransformedCollection`的方式解决这个问题`AbstractCollection`？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-08-23T14:51:39.570

不幸的是，没有明智的方法来定义`Collection.hashCode`. 集合可以是 a`Set`或 a `List`（或其他东西），并且两者`hashCode`以不兼容的方式定义。

此外，出于同样的原因，对于 `transformedCollection1.equals(transformedCollection2)`. 它可以忽略顺序，也可以不忽略（Set 或 List 语义）。更糟糕的是，返回`Collection`的只是一个视图，这`equals`将是非常低效的。

我建议使用类似的东西`ImmutableList.copyOf(transformedCollection)`并使用它。

# android - 如何在默认导航一个 Geopoint 中设置用户当前位置？

> ID：12094205
> 
> 赞同：0
> 
> 时间：2012-08-23T14:40:59.427
> 
> 标签：android, google-maps, gps, driving-directions

我想将我的当前位置设置为我的一个 Geopoint 中的默认位置。如果我想获取从我当前位置到另一个位置的方向路径，我想在我的一个位置显示默认当前位置。

这是查找用户当前位置的代码：

```
public class WhereIActivity extends MapActivity{

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_where_i);

 MapView myMapView=(MapView)findViewById(R.id.myMapView);

        mapController=myMapView.getController();

       myMapView.displayZoomControls(false);

       mapController.setZoom(17);

       myMapView.setStreetView(true);
       myMapView.setTraffic(true);

LocationManager locationManager; 
        String context = Context.LOCATION_SERVICE; 
        locationManager = (LocationManager)getSystemService(context); 

        Criteria crta = new Criteria(); 
        crta.setAccuracy(Criteria.ACCURACY_FINE); 
        crta.setAltitudeRequired(false); 
        crta.setBearingRequired(false); 
        crta.setCostAllowed(true); 
        crta.setPowerRequirement(Criteria.POWER_LOW); 
        String provider = locationManager.getBestProvider(crta, true); 

     // String provider = LocationManager.GPS_PROVIDER; 
        Location location = locationManager.getLastKnownLocation(provider); 
        updateWithNewLocation(location); 

        locationManager.requestLocationUpdates(provider, 2000, 10, locationListener); 
        } 

 private final LocationListener locationListener = new LocationListener() 
    { 

    @Override 
    public void onLocationChanged(Location location) { 
    updateWithNewLocation(location); 
    } 

    @Override 
    public void onProviderDisabled(String provider) { 
    updateWithNewLocation(null); 
    } 

    @Override 
    public void onProviderEnabled(String provider) { 
    } 

    @Override 
    public void onStatusChanged(String provider, int status, Bundle extras) { 
    } 

    }; 

private void updateWithNewLocation(Location location) { 
        String latLong;
        TextView myLocation; 
        myLocation = (TextView) findViewById(R.id.myLocation); 

        String addressString = "no address found"; 

        if(location!=null) { 

            positionOverlay.setLocation(location);

            Double geoLat=location.getLatitude()*1E6;
            Double geoLng=location.getLongitude()*1E6;
            GeoPoint point=new GeoPoint(geoLat.intValue(),geoLng.intValue());

            mapController.animateTo(point);

        double lat = location.getLatitude(); 
        double lon = location.getLongitude(); 
        latLong = "Lat:" + lat + "\nLong:" + lon; 

double lattitude = location.getLatitude(); 
        double longitude = location.getLongitude(); 

        Geocoder gc = new Geocoder(this,Locale.getDefault()); 
        try { 
        List<Address> addresses= gc.getFromLocation(lattitude, longitude, 1); 
        StringBuilder sb = new StringBuilder(); 
        if(addresses.size()>0) { 
        Address address=addresses.get(0);
        for(int i=0;i<address.getMaxAddressLineIndex();i++)
            sb.append(address.getAddressLine(i)).append("\n");
        sb.append(address.getLocality()).append("\n"); 
        sb.append(address.getPostalCode()).append("\n"); 
    sb.append(address.getCountryName()); 
    } 
        addressString = sb.toString(); 
        } 
        catch (Exception e) { 
        } 
        } else { 
        latLong = " NO Location Found "; 
        } 

        myLocation.setText("Your Current Position is :\n"+ latLong + "\n"+  addressString ); 
    }

@Override
    protected boolean isRouteDisplayed() {
        // TODO Auto-generated method stub
        return false;
    }
    } 
```

如何在方向路径中设置此用户当前位置默认值：

```
Intent intent = new Intent(android.content.Intent.ACTION_VIEW,
                Uri.parse("http://maps.google.com/maps/?daddr=my+street+address"));
                intent.setClassName("com.google.android.apps.maps", "com.google.android.maps.MapsActivity");
                startActivity(intent); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-24T04:57:14.740

请仔细阅读此链接。此代码在我的应用程序中成功运行

[http://ckpatel.blog.com/category/android-gps/](http://ckpatel.blog.com/category/android-gps/)

此代码用于绘制路径，我认为获取位置代码是正确的，但请检查移动设备。谢谢

# php - Yii 框架：提交传递参数上的 chtml::button

> ID：12094206
> 
> 赞同：1
> 
> 时间：2012-08-23T14:41:00.730
> 
> 标签：php, yii

> CHtml::button('Update',array('submit' => array('link/update', array('id'=>$data->linkId)))

提交的网址

> localhost/yiiTest2/index.php?r=link/update&0%5Bid%5D=5

如何删除这个 0%5B 和 %5D????

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-23T17:09:43.637

`submit`yu are usin的语法是错误的。试试这个

```
CHtml::button('Update',array('submit' => array('link/update', 'id'=>$data->linkId))) 
```

# scala - 在Scala中随机拆分数组

> ID：12094208
> 
> 赞同：3
> 
> 时间：2012-08-23T14:41:09.817
> 
> 标签：scala, random, collect

我正在 Scala 中构建决策树系统，但我的数据中的某些条目具有相同的属性。我通过实现“随机”节点类型解决了这个问题，允许查询随机选择要遍历的分支，但是在尝试随机拆分其余示例时出现“MatchError”。我当前的代码：

```
def splitRandom(examples: Array[String]): Array[String]={
        examples.collect {case x if(r.nextInt(100) < 50) => x}
} 
```

“examples”是一个字符串数组，每个字符串是一行，包含一个数据条目及其所有属性。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-23T14:50:03.517

`collect`不是随机行为的好选择，因为可以对相同的条件进行两次评估（第一次在 an 上`isDefinedAt`，然后第二次计算值）；如果它第一次说真，第二次说假——在同一个输入上——匹配会被打乱。改用`filter`：

```
examples.filter(_ => r.nextInt(100) < 50) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-11-16T09:48:35.700

有一个解决方案适合您的问题：

```
import util.Random
val shuffled = Random.shuffle(your_array)
val (first, second) = shuffled.splitAt(your_position) 
```

当我想要一个 rdd.randomSplit 对应的 Scala 列表或数组时，我发现了这个技巧

如果需要，您可以进行一些类型转换

# security - 向用户描述我对 bcrypt 的使用是否不安全？

> ID：12094209
> 
> 赞同：0
> 
> 时间：2012-08-23T14:41:10.880
> 
> 标签：security, passwords, password-protection, bcrypt, password-encryption

密码安全是许多人关心的问题。

我想包含一个“了解我们的密码安全性”链接，说明我们使用 bcrypt 进行密码散列以及它是如何工作的。

公开此信息是否会导致任何安全问题或降低我的系统安全性？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-23T14:49:27.187

> “系统安全不应依赖于实施或其组件的保密性。”

您指的是[通过默默无闻的安全](http://en.wikipedia.org/wiki/Security_through_obscurity)性。假设——除了密钥——加密系统即使是已知的也应该保持安全。如果您依赖实施的保密性，您应该转移到另一个系统。

在散列的情况下，如果不存在已知的反散列方法，则系统是安全的。使用您的哈希算法的人越多，随着时间的推移，它就越安全。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-23T14:54:38.913

它不应该使您的系统更安全，因为这些算法是公开的，并且您希望通过默默无闻来避免安全性。但是，攻击者对您所做的和使用的内容了解得越少越好。

导致问题的最可能情况是攻击者发现库中的漏洞。如果他们不知道您使用它，那么他们就无法使用它来对付您。

# database - 使用两个 dfs 的唯一标识符将数据框中的所有列按不同数据框中的列划分

> ID：12094210
> 
> 赞同：2
> 
> 时间：2012-08-23T14:41:17.227
> 
> 标签：database, r, merge, transform, match

基本上我需要执行的是将我的国家变量转换为人均项，即将所有值除以该国的人口。

所以我有`df`：

```
country <- c("A","B","C","D")
income <- c(10,20,30,40)
cars <- c(100,200,300,400)
df <- data.frame(country,income,cars) 
```

我想将所有列除以`dfpop$pop`

```
pop <- c(1,2,3,4)

dfpop <- data.frame(country,pop) 
```

有任何想法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-23T15:25:23.540

由于每个国家/地区只有一个观察值，因此不需要汇总数据，只需使用`df/variable`

考虑到@lselzer 上面指出的合并，您可以尝试：

```
 DF <- merge(df, dfpop)
 DF[,-c(1,4)]/DF[,4]
  income cars
1     10  100
2     10  100
3     10  100
4     10  100 
```

但也没有使用`merge`：

```
df[,-1]/pop
  income cars
1     10  100
2     10  100
3     10  100
4     10  100 
```

使用的好处`merge`是国家名称的匹配，这将确保您将 country 的每个变量除以 country`A`的人口`A`。第二种方法不能确保国家变量的匹配，所以你必须小心使用这种方法。

# java - Java 转大写忽略 HTML 特殊字符

> ID：12094212
> 
> 赞同：1
> 
> 时间：2012-08-23T14:41:22.563
> 
> 标签：java, html, string, encoding, html-manipulation

如何将字符串转换为大写 String.toUpperCase() 忽略特殊字符`&nbsp;`和所有其他字符。问题是它变成了 &NBSP; 并且浏览器不会将它们识别为特殊的 HTML 字符。

我想出了这个，但它并不涵盖所有特殊字符：

```
public static String toUpperCaseIgnoreHtmlSymbols(String str){
    if(str == null) return "";
        str = str.trim();
    str = str.replaceAll("(?i)&nbsp;"," ");
    str = str.replaceAll("&quot;","&#34;");
    str = str.replaceAll("&amp;","&#38;");
    //etc.
    str = str.toUpperCase();
    return str;
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-23T14:59:27.407

您是只对跳过 HTML 实体感兴趣，还是也想跳过标签？大块的 javascript 呢？URL 在链接中？

如果您需要支持这种东西，您将无法避免使用“真正的”HTML 解析器而不是正则表达式。例如，使用[jsoup](http://jsoup.org)解析文档，操作生成的 Document，并将其转换回 HTML：

```
private String upperCase(String str) {
    Document document = Jsoup.parse(str);
    upperCase(document.body());
    return document.html();
}

private void upperCase(Node node) {
    if (node instanceof TextNode) {
        TextNode textnode = (TextNode) node;
        textnode.text(textnode.text().toUpperCase());
    }
    for (Node child : node.childNodes()) {
        upperCase(child);
    }
} 
```

现在：

```
upperCase("This is some <a href=\"http://arnout.engelen.eu\">text&nbsp;with&nbsp;entities</a>"); 
```

将产生：

```
<html>
  <head></head>
  <body>
    THIS IS SOME 
    <a href="http://arnout.engelen.eu">TEXT&nbsp;WITH&nbsp;ENTITIES</a>
  </body>
</html> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-23T14:57:24.857

您可以使用此正则表达式将字符串拆分为不同的组

```
(.+?)(&[^ ]+?;) 
```

第一部分匹配特殊字符之前的文本，第二部分匹配特殊字符。

完成后，您可以仅将第一组转换为大写，重复字符串的所有匹配项。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-23T14:58:05.257

我认为您的想法是正确的，将所有命名实体替换为其数字等价物。

这是 W3C 的 HTML4 实体列表：http: [//www.w3.org/TR/html4/sgml/entities.html](http://www.w3.org/TR/html4/sgml/entities.html)

您可以将其格式化为一个包含两列的表格，而无需太多工作。（请注意，该链接上有三个表格。）我会这样做，然后读入表格，您可以轻松地从命名转换为数字并返回。

# javascript - 将值 inner.Width 和 inner.Height 应用于主体

> ID：12094228
> 
> 赞同：0
> 
> 时间：2012-08-23T14:42:01.020
> 
> 标签：javascript, jquery, screen-resolution

基本问题...

如何将innerWidth 和innerHeight 的值应用于body，使其适应屏幕分辨率？！使其响应。

你怎么用 Javascript/jquery 写这个？！如果可能，例如...

编辑//// 这将是代码？

这会让魔术发生吗？！？！

```
$(window).load(function() {
     var h = $(window).height();
     var w = $(window).width();

     $('body').css({"height": h+'px', "width": w+'px'});
}); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-23T14:45:21.973

> `.innerWidth()` 方法返回元素的宽度，包括左右填充，以像素为单位。此方法不适用于`window`和`document`对象；对于这些，请`.width()`改用。

```
var h = $(window).height();
var w = $(window).width();

$('body').css({"height": h+'px', "width": w+'px'}); 
```

# jquery-mobile - 需要在页面重新加载后触发的 JQM 事件

> ID：12094231
> 
> 赞同：2
> 
> 时间：2012-08-23T14:42:13.827
> 
> 标签：jquery-mobile

是否有一个事件会在同一页面转换（刷新页面？）我尝试过之后触发`$(document).bind('pageinit'), pageshow, etc...`

```
 $.mobile.changePage("#myPage", { allowSamePageTransition : true, reloadPage: true } ); 
```

# mysql - 从不规则格式的字符串中间返回数字

> ID：12094232
> 
> 赞同：1
> 
> 时间：2012-08-23T14:42:13.457
> 
> 标签：mysql, regex, string, substring

我在 MySQL 数据库中有一个字段，其中包含所购产品的项目描述。其中一些是简单的英语描述，另一些是零件编号，还有一些仍然是零件编号，后跟描述。我已经使用 replace() 从字符串中删除了所有空格和破折号。

> 数据如下所示：

```
1938420985390asdfih
1234812934810dflkasd
asdfasldkjfaasdfjasd
asd;flkjaklsdf
adfsdf1234073927357sdapjfas
1/4sdikhsd 
```

> 我想返回：

```
1938420985390
1234812934810
(null)
(null)
1234073927357
(null) 
```

我真正需要的是编写一个 SQL 来返回 13 位数的零件编号，而不是额外的字母/字符。我希望它也返回实际数字，而不是匹配/不匹配的 1 或 0。

我尝试使用 REGEXP 函数（有人建议`regexp ('\d{13}')`或`regexp ('\p{13}')`但这些不起作用。[这些返回 0 或 1，而不是匹配的字符串部分。] 有什么建议吗？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-23T14:58:20.223

这是 MySQL 中的一项重要任务，没有用于返回正则表达式匹配的内置函数。但是因为您正在寻找正好 13 位数字，所以您可以这样做（显然将其扩展到您需要检查的位置数......

```
-- setup test
CREATE TABLE t (foo VARCHAR(30));
INSERT INTO t VALUES 
('1938420985390asdfih')
,('1234812934810dflkasd')
,('asdfasldkjfaasdfjasd')
,('asd;flkjaklsdf')
,('adfsdf1234073927357sdapjfas')
,('1/4sdikhsd')

SELECT CASE
       WHEN SUBSTR(foo,1,13) REGEXP '^[0-9]{13}$' THEN SUBSTR(foo,1,13)
       WHEN SUBSTR(foo,2,13) REGEXP '^[0-9]{13}$' THEN SUBSTR(foo,2,13)
       WHEN SUBSTR(foo,3,13) REGEXP '^[0-9]{13}$' THEN SUBSTR(foo,3,13)
       WHEN SUBSTR(foo,4,13) REGEXP '^[0-9]{13}$' THEN SUBSTR(foo,4,13)
       WHEN SUBSTR(foo,5,13) REGEXP '^[0-9]{13}$' THEN SUBSTR(foo,5,13)
       WHEN SUBSTR(foo,6,13) REGEXP '^[0-9]{13}$' THEN SUBSTR(foo,6,13)
       WHEN SUBSTR(foo,7,13) REGEXP '^[0-9]{13}$' THEN SUBSTR(foo,7,13)
       WHEN SUBSTR(foo,8,13) REGEXP '^[0-9]{13}$' THEN SUBSTR(foo,8,13)
       WHEN SUBSTR(foo,9,13) REGEXP '^[0-9]{13}$' THEN SUBSTR(foo,9,13)
       END AS digits
  FROM t

-------------------
1938420985390
1234812934810
(NULL)
(NULL)
1234073927357
(NULL) 
```

不，它不漂亮。但是您应该能够扩展它以有效地“扫描”合理长度的字符串。

注意：正则表达式检查整个 13 个字符的子字符串是否正好由 13 个字符组成，每个字符都是一个十进制数字（0 到 9）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-23T14:52:15.303

如此处所述，MySQL 可能不支持取回匹配的值 - [MySQL 正则表达式与 REGEXP 运算符](http://www.regular-expressions.info/mysql.html)。但是，如链接中所述，您可以像这样使用第 3 方库：[UDF Repository for MySQL](http://www.mysqludf.org/lib_mysqludf_preg/)，它允许您使用`PREG_CAPTURE`.

有关更多信息，这个[StackOverflow 链接](https://stackoverflow.com/questions/5361457/mysql-return-matching-pattern-in-regexp-query)似乎已经处理了这个问题。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-04-03T14:01:35.100

如果每个条目仅包含一个数字代码实例，则此实例有效：

```
SELECT CASE WHEN LENGTH(firstNumber(foo)) > 3 THEN firstNumber(foo) ELSE '' END AS result
FROM t 
```

有两点值得一提：

1.  数字的长度必须至少有一定的长度，比如 3 位，这样我们就可以避免第 6 行 '1/4sdikhsd' 中的 1 之类的结果；
2.  函数[firstNumber](https://stackoverflow.com/questions/9395178/how-to-find-the-first-number-in-a-text-field-using-a-mysql-query)被修改为返回文本，但实际上是相同的：

    ```
    DELIMITER //
    CREATE FUNCTION firstNumber(s TEXT)
        RETURNS TEXT
        COMMENT 'Returns the first integer found in a string'
    DETERMINISTIC
    BEGIN

    DECLARE token TEXT DEFAULT '';
    DECLARE len INTEGER DEFAULT 0;
    DECLARE ind INTEGER DEFAULT 0;
    DECLARE thisChar CHAR(1) DEFAULT ' ';

    SET len = CHAR_LENGTH(s);
    SET ind = 1;
    WHILE ind <= len DO
        SET thisChar = SUBSTRING(s, ind, 1);
        IF (ORD(thisChar) >= 48 AND ORD(thisChar) <= 57) THEN
            SET token = CONCAT(token, thisChar);
        ELSEIF token <> '' THEN
            SET ind = len + 1;
        END IF;
        SET ind = ind + 1;
    END WHILE;

    IF token = '' THEN
        RETURN '';
    END IF;

    RETURN token;

    END //    DELIMITER ; 
    ```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2019-06-01T20:40:59.040

您正在寻找的功能是[REGEXP_SUBSTR()](https://dev.mysql.com/doc/refman/8.0/en/regexp.html#function_regexp-substr)：

```
SELECT REGEXP_SUBSTR(`dirty_value`,'[0-9]+') AS `clean_value` FROM `the_table`; 
```

注意：我对其进行了测试并且可以工作；我正在使用 MySQL Server v8.0（不确定它在以前的版本中是否有效）。

祝你好运！

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2016-06-15T17:12:59.460

而不是`mysql`你可以`grep`在linux中使用命令轻松完成

```
grep [0-9] foo.txt 
```

然后创建表并将其加载到mysql中。

# android - ShareActionProvider - 绘图应用程序的 setShareIntent

> ID：12094234
> 
> 赞同：4
> 
> 时间：2012-08-23T14:42:22.990
> 
> 标签：android

我正在开发一个绘图应用程序，我希望允许用户在电子邮件、社交网络等中分享他的绘图。我知道，有一个**ShareActionProvider**类，但它存在一个大问题。

我的应用程序内容更新迅速，因此我无法在`setShareIntent()`每次用户开始或结束绘图时调用。很明显，当用户按下分享按钮时应该创建意图。但是，不幸的是，没有点击监听器或类似的东西。这是一个问题。

有什么解决办法吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-13T11:00:54.037

将操作栏添加到您的应用程序。

然后你可以在操作栏中添加一个“分享”图标：

```
<item android:id="@+id/action_share"
  android:icon="@android:drawable/ic_menu_share" ... /> 
```

和

```
public boolean onOptionsItemSelected(MenuItem item) {
  switch (item.getItemId()) {
    case R.id.action_share:
      Intent intent = new Intent(Intent.ACTION_SEND);
      intent.setType("image/jpeg");
      intent.putExtra(Intent.EXTRA_SUBJECT, "Subject text");
      intent.putExtra(Intent.EXTRA_TEXT, "Detailed description");
      intent.putExtra(Intent.EXTRA_STREAM, getPubliclyAccessibleUriOfAnImage());
      startActivity(Intent.createChooser(intent, "Share my dynamic image"));
      return true; 
```

使用 MENU 项目可能是另一种解决方案，但它不是很时髦。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-09-15T17:17:59.407

**这个答案没有解决方案，如果不完全滚动你自己，我认为这个任务是不可能的。**

我完全同意，它应该在需要时使用侦听器提取数据，但同时它以这种方式工作，因为它只显示可以处理意图的应用程序。

这意味着您必须在能够共享它之前提供意图，让[`<intent-filter>`](http://developer.android.com/guide/topics/manifest/intent-filter-element.html)s 做他们的事情并过滤不兼容的活动。当过滤器包含[`<data>`](http://developer.android.com/guide/topics/manifest/data-element.html)过滤 Uri 和 MimeType 的元素时，就会出现问题。

让我们尝试解决这个问题。

## 使用 OnShareTargetSelectedListener

[@hannes arch](https://stackoverflow.com/a/14583997/253468)在做某事，但答案中缺少答案，这将是`doSomeStuff`' 的实现。

啊，它返回布尔值，让我们更新意图并执行 a`startActivity(intent)`并返回`true`以表示我们处理了它。事实证明，它`ShareActivityChooserModelPolicy`忽略了 的返回值`onShareTargetSelected`，所以我们不能使用它。

这样做是可行的，但它会对具有不同内容（原始意图和修改后的）的相同活动开放。对用户不太友好。

## 延长`ShareActionProvider`

并复制所需的逻辑`ShareActivityChooserModelPolicy`并返回从侦听器返回的值。这样我们`return true`就可以工作了。相反，它没有。我们失去了拥有选定应用程序历史记录的能力。

## 延长`ShareActionProvider`拍摄 2

我试了又试，没有办法扩展这个类，即使有讨厌的反射和`setAccessible`调用。它太僵硬了。

## 复制`ShareActionProvider`

和相关的类。不，它不会工作，它有一些 Android 内部类依赖。

## 结束语

我只是想知道什么

> 该行为是可扩展的，ShareActionProvider 的扩展可以根据历史文件（如果合适）执行不同的行为和排名。

表示来自[https://developer.android.com/guide/topics/ui/actionbar.html](https://developer.android.com/guide/topics/ui/actionbar.html)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-29T13:24:40.763

这是我的方式

```
@Override
public boolean onCreateOptionsMenu(Menu menu) {
    getMenuInflater().inflate(R.menu.mymenu, menu);

    MenuItem actionItem = menu.findItem(R.id.mymenu_item);
    ShareActionProvider actionProvider = (ShareActionProvider) actionItem.getActionProvider();
    actionProvider.setShareHistoryFileName(ShareActionProvider.DEFAULT_SHARE_HISTORY_FILE_NAME);       actionProvider.setOnShareTargetSelectedListener(new ShareActionProvider.OnShareTargetSelectedListener() {

    public boolean onShareTargetSelected(ShareActionProvider source,
                Intent intent) {
            doSomeStuff();//TODO
            return false;
    }} );
    actionProvider.setShareIntent(createShareIntent());

    MenuItem overflowItem = menu.findItem(R.id.mymenu_item);
    ShareActionProvider overflowProvider = (ShareActionProvider) overflowItem.getActionProvider();
    overflowProvider.setShareHistoryFileName(ShareActionProvider.DEFAULT_SHARE_HISTORY_FILE_NAME);
    overflowProvider.onPerformDefaultAction();
    overflowProvider.setShareIntent(createShareIntent());

    return super.onCreateOptionsMenu(menu);
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-11-01T16:20:55.033

我在 android.support.v7.app.ActionBarActivity 衍生物中遇到了类似的问题（尽管我认为这种方法应该适用于任何活动）并且我覆盖了 onPrepareOptionsMenu 并得到了你想要的效果：

```
private ShareActionProvider actionProvider;
@Override
public boolean onCreateOptionsMenu(Menu menu) {
    getMenuInflater().inflate(R.menu.mymenu, menu);

    // get the share menu item
    MenuItem actionItem = menu.findItem(R.id.share_menu_item);
    actionProvider = (ShareActionProvider) actionItem.getActionProvider();

    return true;
}
@Override
public boolean onPrepareOptionsMenu(Menu menu) {
    if (actionProvider != null) {
        actionProvider.setShareIntent(createShareIntent());
    }
    return super.onPrepareOptionsMenu(menu);
}

private Intent createShareIntent() {
    // ripped from @nicolas-raoul answer
    Intent intent = new Intent(Intent.ACTION_SEND);
    intent.setType("image/jpeg");
    intent.putExtra(Intent.EXTRA_SUBJECT, "Subject text");
    intent.putExtra(Intent.EXTRA_TEXT, "Detailed description");
    intent.putExtra(Intent.EXTRA_STREAM, getPubliclyAccessibleUriOfAnImage());
    return intent;
} 
```

另请参阅：[片段内的 Android setShareIntent](https://stackoverflow.com/questions/10362120/android-setshareintent-within-fragment)

# css - 这个媒体查询有什么问题？

> ID：12094236
> 
> 赞同：0
> 
> 时间：2012-08-23T14:42:27.973
> 
> 标签：css, media-queries

> **可能重复：**
> [媒体查询有什么问题？](https://stackoverflow.com/questions/12060657/whats-wrong-with-the-media-query)

[W3C 标准文档](http://www.w3.org/TR/css3-mediaqueries/)说：

> 当指定的媒体特征之一未知时，用户代理将媒体查询表示为“不是全部”。

然后它给出了以下示例：

```
<link rel="stylesheet" media="screen and (max-weight: 3kg) and (color), (color)" href="example.css" /> 
```

然后它说第一个媒体查询将被表示为“不是全部”并评估为假，第二个媒体查询的评估就像第一个媒体查询没有被指定一样有效。

为什么会这样。我希望这是因为未指定最大重量的 3kg 值。但是，除了“未知媒体特征值”之外，我看不到任何未知的媒体特征，这在文档中的“未知媒体特征”之后单独讨论。我认为这个例子应该放在“未知媒体特征值”之下，而不是放在“未知媒体特征”之下。

# ruby-on-rails - 从 Rails 模型设置会话而不是邪恶

> ID：12094238
> 
> 赞同：0
> 
> 时间：2012-08-23T14:42:34.910
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3

我正在玩[http://railscasts.com/episodes/250-authentication-from-scratch](http://railscasts.com/episodes/250-authentication-from-scratch)并在尝试进行一些重构时遇到了问题。

该应用程序只需设置以下内容即可登录用户：

```
session[:user_id] = user.id 
```

目前这位于控制器中。我只想在 User 对象上有两种方法。一种称为登录，一种称为注销。这意味着如果我更改登录的实现，那么只有一个地方可以更改代码，并且使其更具可读性。最简单的解决方案显然是将其添加到用户模型中：

```
def login
  session[:user_id] = user.id
end 
```

众所周知，在 Rails 模型中无法访问会话。我们显然可以在应用程序控制器上创建这两个方法并传入用户对象，但这看起来有点难看，实现这个简单用例的推荐方法是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-23T14:47:53.563

推荐的方法是不要将这样的代码放在模型中。

我意识到这并不能回答实际问题，但没有推荐的方法在模型中实现这一点。模型仅用于数据库访问，它们本身不应该用于与 http 会话进行交互。

识别和维护“current_user”是控制器的明确责任（在 MVC 模式中）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-23T14:56:21.617

一种选择是给用户一个可以登录/注销的类、类实例或过程。

用户类只需要调用一个类方法/proc，所有关于登录/注销发生的细节*都*封装在类/proc中。

这也将登录/注销的*想法*与 Rails 隔离开来，因此可以在 GUI 应用程序（例如，JRuby/Swing）或命令行应用程序中使用相同的模型。这有多容易/多难也取决于您的模型。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-05-15T02:10:46.033

也许你可以在模型中引发一个异常，并在 Controller 中使用rescue_from 捕获它。与您对 CanCan 所做的类似。

# xampp - 为什么用户帐户设置会干扰我的计算机中我的站点的管理页面

> ID：12094239
> 
> 赞同：0
> 
> 时间：2012-08-23T14:42:35.727
> 
> 标签：xampp

为什么来自 XAMPP 的这条消息会扰乱网站的管理员页面？

> 重要的！
> 
> 由于系统上激活了用户帐户控制 (UAC)，XAMPP 的某些功能可能会受到限制。使用 UAC 请避免将 XAMPP 安装到 C:\Program Files (x86)（缺少写权限）。或在此设置后使用 msconfig 停用 UAC。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-23T14:51:59.510

只需按照消息中的建议进行操作即可！

将 XAMPP 安装在不受 UAC 保护的目录中，因此不在`C:\Program Files (x86)`,`C:\Program Files`或`C:\Windows`. 例如，您可以使用`C:\xampp`.

# http - 同时读取多个 URL

> ID：12094240
> 
> 赞同：1
> 
> 时间：2012-08-23T14:42:36.993
> 
> 标签：http, matlab, asynchronous

我有一个通过 HTTP 收集数据的专有数据库。由于我无法控制的原因，每个 HTTP 查询都可能需要很长时间，尽管多个请求似乎并没有减慢这个过程。我想同时在某种线程中请求其中的许多。是否有使用 Matlab 在 Matlab 中异步请求多个 URL 的方法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-24T05:49:34.130

由于 MATLAB 支持 Java，您可以简单地使用 Java 的多线程工具。例如，请参阅[本教程](http://www.osmanoglu.org/computing/1-matlabjavamultitreading)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-24T00:35:53.410

您可以使用 parfor 作为：

```
parfor n = 1:taskNum   
    {do urlread job here}
end 
```

我以这种方式将谷歌财务数据蜘蛛网到我的数据库中。

# ssis - 检查从平面文件到 sql server 表的列

> ID：12094242
> 
> 赞同：0
> 
> 时间：2012-08-23T14:42:41.680
> 
> 标签：ssis, text-files

我正在文本文件中获取数据，其中标题行（具有列名），列分隔符为 | ，现在在加载文件之前，我需要检查平面文件的列名是否与目标表匹配。我怎样才能在脚本任务中做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-23T16:19:46.200

了解您为什么要这样做会很有帮助。如果您的目标是通过在导入文件之前检查文件的格式是否正确来避免导入错误，那么您可以考虑尝试加载它并捕获任何错误的替代方法。

无论如何，这在许多情况下都是[一种有用的策略](http://oranlooney.com/lbyl-vs-eafp/)，因为如果您因意外原因出现错误，则预先检查将无济于事，但是以适当的方式捕获和记录错误将帮助您处理未考虑过的错误情况。另一个原因——在这种情况下可能不适用——是在检查成功和包或程序运行的下一步之间总是有可能发生变化。在每种情况下哪种方法更有意义取决于您的整体程序逻辑、编程语言等。这已在 SO[之前](https://stackoverflow.com/questions/404795/lbyl-vs-eafp-in-java)讨论过。

但是，如果您确实需要预先进行此检查，您可以将任务分解为几个较小的任务：从文件中获取列名；把它们从桌子上拿下来；比较它们等。如果您尝试在这些较小的步骤上工作，并在遇到问题时提出更具体的代码、错误等问题，您可能会得到更有用的答案。

# c# - 带有 Code-First EF 的 ASP.net MVC3 中的多线程

> ID：12094243
> 
> 赞同：4
> 
> 时间：2012-08-23T14:42:44.950
> 
> 标签：c#, asp.net, multithreading, asp.net-mvc-3, entity-framework

一直在为我的应用程序寻找多线程解决方案，但是`NullReferenceException`当我尝试时不断出现随机错误，而不是当我连续运行每个错误并且一切顺利时。

我正在做的是计算从一个地方到另一个地方的旅程，然后计算回程。回程计算只是使用相同的过程，只是换了出发地和目的地。

在带有实体框架的 ASP.net MVC3 应用程序中使用多线程执行此操作听起来可行吗？我看过一些似乎 EF 存在问题的文章，但这些听起来只是当 DBContexts 在页面上共享时才会出现问题，而我在需要访问数据库的所有区域都使用了 Using 语句. 有人在这里有经验吗？

到目前为止，我拥有的基本相关代码是这样的：

```
var outboundJourneyTask = Task.Factory.StartNew(() => BuildJourney(true));
var returnJourneyTask = Task.Factory.StartNew(() => BuildJourney(false));
Task.WaitAll(outboundJourneyTask, returnJourneyTask); 
```

我希望每个任务都能重新开始，但由于空引用异常，我相信在第二个线程中，它正在尝试使用第一个内置的数组，当它找不到某些元素时，它抛出错误。

这听起来可能吗？有人知道这样做的更好方法吗？

编辑：我正在尝试一种不同的线程方法（见下文），但我的数组确实发生了一些奇怪的事情——以不同的方式循环它们并抛出错误

```
Thread t1 = new Thread(ThreadMethod1);   
t1.Start();

Thread t2 = new Thread(ThreadMethod2);
t2.Start();

void ThreadMethod1(object state)
{
    BuildJourney(false);
    ManualResetEvent mre = (ManualResetEvent)state;
    mre.Set();
}
void ThreadMethod2(object state)
{
    BuildJourney(true);
    ManualResetEvent mre = (ManualResetEvent)state;
    mre.Set();
} 
```

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-23T16:14:47.620

“这听起来可行吗……？” 是的，当然。

易于实施......也许不是。

`Thread t1 = new Thread(ThreadMethod1)`

是在 .net 4+ 框架中进行多线程处理的一种过时但不一定已弃用的方法。从您发布的内容来看，没有任何迹象表明您不能使用任务。任务工厂是在 TPL 中管理任务的更现代的方式，但我个人发现它有一些怪癖。如果我是你，我会尝试这样做：

```
 Task T = new Task(() =>
                {
                   BuildJourney(true);
                });
                Task T2 = T.ContinueWith((antecedent) =>
                {
                     BuildJourney(false);
                }); 
```

这将确保 T2 仅在 T1 回来时运行。不过，正如 Ladislav 所说，BuildJourney 方法可能不是线程安全的。这至少会让你更进一步确定你的线程故障在哪里。您可能想要调查正确的异步和多线程调试。它比简单的 F5 稍微复杂一些。像pluralsight 和代码项目这样的网站有很好的调试和编写.net 线程编程的教程。

你在这里有一个很好的开始。祝你好运！

# c# - 如何使用 Designer 功能成功继承 TypeConverter

> ID：12094247
> 
> 赞同：2
> 
> 时间：2012-08-23T14:42:52.677
> 
> 标签：c#, .net, visual-studio-2010, designer, typeconverter

我有一个使用一些属性制作的 GaugeScale 类。此类包含在 GDI+ 绘制的仪表周围显示完整比例的必要信息。

我有一个 Gauge 控件，它使用 GaugeDrawer 来渲染它的框架。

GaugeDrawer 是可以像常规组件一样在设计器时使用的组件

框架可以由 CircularGaugeDrawer（制作精美的汽车 RPM 仪表）或 ThermometerDrawer 渲染......

无论如何，两者都使用具有一些复杂属性（GaugeScaleInterval[] 和 float）的 GaugeScale，我想知道是否有办法让 Visual Studio 的设计器实例化和显示这些属性。它将使这种控制方式的创建对用户来说不那么复杂。

所以我想知道如何教设计师如何使用抽屉组件。如果 TypeConverter 是解决方案。如何让它们对 Visual Studio 的设计者有用

编辑：

这整个东西都是针对 WinForm 环境的。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-23T15:46:43.950

你还没有说出来，但我猜你正在使用 WinForms (system.windows.forms)。

在这个主题中，TypeConverters 通常将文本/字符串表示转换为/从可以分配给属性的具体对象。

请参阅文章[http://msdn.microsoft.com/en-us/magazine/cc164145.aspx](http://msdn.microsoft.com/en-us/magazine/cc164145.aspx) - 除了显示 int 和 enum 属性外，还有一个很好的介绍性教程如何编写自定义类`Hand`以及`HandConverter`如何公开窗体设计器的属性窗口中的 usch 类型的属性。

请注意，TypeConverter 可以在属性级别和广告级别注册。类级别最适合具有全球通用转换器的简单结构，例如自定义数字/颜色/等。更复杂的情况可能会在属性级别注册不同的类型转换器，从而相同类型“手”的三个属性可能使用不同的转换逻辑。

那是针对 TypeConverters 的。这不是唯一的选择。属性窗口比这更强大。例如，您肯定见过颜色选择器。除了 TypeConverters，您还可以注册 Editors 和 IIRC，甚至是整个设计师。初学者请参见此处：http: [//msdn.microsoft.com/en-us/library/ms171840.aspx](http://msdn.microsoft.com/en-us/library/ms171840.aspx)

旁注：
尽管在 WPF/XAML 爆发后 WinForms 似乎有点“死”，但旧框架及其设计时功能有时会让您感到惊讶。例如 - XAML 宣传称为“附加属性”的新功能 - 在这里也很容易实现它们。甚至核心本地化组件也使用该功能 :) 但是，这可能是一个非常无情的环境，并且很容易使 VisualStudio 不稳定。再加上一直很糟糕的 .Designer.cs 处理，表单代码的某些部分有时可能会意外消失。在与编辑一起玩之前，请进行备份。TypeConverters 更安全！

# python - 如何在python中获取列表列表的统计信息？

> ID：12094251
> 
> 赞同：4
> 
> 时间：2012-08-23T14:43:01.493
> 
> 标签：python, list, statistics

我有一个列表列表：

```
[[1,2], [1,2,4], [1,2,3,4], [4,5,6], [1,9], [1,2,4]] 
```

我想获得以下格式的列表统计信息：

```
number of lists with 2 elements : 2
number of lists with 3 elements : 3
number of lists with 4 elements : 1 
```

这样做的最好（最pythonic）方法是什么？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-23T14:45:02.257

我会使用[collections.defaultdict](http://docs.python.org/library/collections.html#collections.defaultdict)：

```
d = defaultdict(int)
for lst in lists:
   d[len(lst)] += 1 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-08-23T14:45:10.493

```
for k, v in sorted(collections.Counter(len(i) for i in list_of_lists).iteritems()):
    print 'number of lists with %s elements : %s' % (k, v) 
```

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2012-08-23T14:46:49.277

```
>>> from collections import Counter
>>> seq = [[1,2], [1,2,4], [1,2,3,4], [4,5,6], [1,9], [1,2,4]]
>>> for k, v in Counter(map(len, seq)).most_common():
        print 'number of lists with {0} elements: {1}'.format(k, v)

number of lists with 3 elements: 3
number of lists with 2 elements: 2
number of lists with 4 elements: 1 
```

# linux - 如何使别名在运行时工作？

> ID：12094252
> 
> 赞同：1
> 
> 时间：2012-08-23T14:43:03.647
> 
> 标签：linux, bash, shell, centos, alias

我知道如果我早点创建别名，我可以将此别名定义放在 /etc/profile 中，但现在我别无选择，因为一些构建操作正在进行中。我可以在新的 bash 上使用 alias wget='wget -c' ，但它不适用于现在正在构建操作中的 bash，那么有什么方法可以使别名对其他打开的 bash 起作用？

也许我可以将/usr/bin/wget 移动到/usr/bin/tmp/wget，然后在/usr/bin/wget 上创建一个sh 文件，这个文件的内容是/usr/bin/tmp/wget $1

这尤其适用于只有一个变量的情况，但如果有 2 个或更多变量，该脚本如何工作？

或者有没有更好的方法来使别名工作，或者其他可以产生相同效果的方法，就像那个 sh 文件（如何更改这个文件以使其支持更多变量？）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-23T14:45:02.683

您可以将该行添加`continue = on`到 ~/.wgetrc。[有关更多信息，请参阅文档](http://www.gnu.org/software/wget/manual/html_node/Wgetrc-Commands.html)。

如果要将重试限制设置为 3，请添加`tries = 3`到 ~/.wgetrc

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-23T14:46:04.680

您可以使用`"$@"`代替`$1`which 将复制所有参数，而不仅仅是第一个。

# c# - 将 ASMX 服务移至 WCF 基本绑定服务

> ID：12094256
> 
> 赞同：1
> 
> 时间：2012-08-23T14:43:09.200
> 
> 标签：c#, .net, wcf, web-services

我有如下所示的 asmx 服务：

```
[WebService(Namespace = "http://www.zzz.com/ema/xml/")]
[WebServiceBinding(ConformsTo = WsiProfiles.BasicProfile1_1)]
[System.ComponentModel.ToolboxItem(false)]
public class AService : System.Web.Services.WebService, IAServiceSoap 
```

IAServiceSoap 接口如下所示

```
 [WebService(Namespace = "http://www.zzz.com/ema/xml/")]
    [WebServiceBinding(ConformsTo = WsiProfiles.BasicProfile1_1)]
    [System.ComponentModel.ToolboxItem(false)]
    public class AService : System.Web.Services.WebService, IAServiceSoap

/// <remarks/>
[System.CodeDom.Compiler.GeneratedCodeAttribute("wsdl", "2.0.50727.42")]
[System.Web.Services.WebServiceBindingAttribute(Name = "AsmbServiceSoap", Namespace = "http://www.zzz.com/ema/xml/")]
[System.Xml.Serialization.SoapIncludeAttribute(typeof(SOAPXmlEventEntry))]
public interface IAsmbServiceSoap {

    /// <remarks/>
    [System.Web.Services.WebMethodAttribute()]
    [System.Web.Services.Protocols.SoapRpcMethodAttribute("http://www.zzz.com/ema/xml/Login", RequestNamespace="http://www.zzz.com/ema/xml/", ResponseNamespace="http://www.zzz.com/ema/xml/")]
    void Login(string url, string id, int ClientType, out int ClientID);

}

/// <remarks/>
[System.CodeDom.Compiler.GeneratedCodeAttribute("wsdl", "2.0.50727.42")]
[System.SerializableAttribute()]
[System.Diagnostics.DebuggerStepThroughAttribute()]
[System.ComponentModel.DesignerCategoryAttribute("code")]
[System.Xml.Serialization.SoapTypeAttribute(Namespace="http://www.zzz.com/ema/xml/")]
public partial class SOAPXmlEventEntry {

    private int datatypeField;

    private string dataField;

    private int idField;

    /// <remarks/>
    public int datatype {
        get {
            return this.datatypeField;
        }
        set {
            this.datatypeField = value;
        }
    }

    /// <remarks/>
    public string data {
        get {
            return this.dataField;
        }
        set {
            this.dataField = value;
        }
    }

    /// <remarks/>
    public int id {
        get {
            return this.idField;
        }
        set {
            this.idField = value;
        }
    }
} 
```

问题是我如何将看起来像这样的东西移动到具有基本绑定的 WCF webservice ？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-23T15:14:49.550

我模拟了如果使用控制台应用程序在 WCF 中实现您的服务会是什么样子。只要您使用 .NET 4.0，WCF 的简化配置就会负责为您的服务主机创建端点。由于主机的基本 url 基于 http 协议，“basicHttpBinding”将用作默认绑定。

对于客户端代码，您需要做的就是使用用于创建 ServiceHost 的 URL 添加服务引用。在这种情况下，我添加了一个服务引用并将其放在命名空间“AService”中。

主机代码：

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;
using System.ServiceModel;
using System.ServiceModel.Description;

namespace WcfHost
{
    [ServiceContract(Namespace="http://www.zzz.com/ema/xml/")]
    public interface IAsmbServiceSoap
    {
        [OperationContract]
        void Login(string url, string id, int ClientType, out int ClientID); 
    }

    public class AService : IAsmbServiceSoap
    {
        #region IAsmbServiceSoap Members

        public void Login(string url, string id, int ClientType, out int ClientID) {
            ClientID = 100;
            // do work
        }

        #endregion
    }

    class Program
    {
        static void Main(string[] args) {

            ServiceHost serviceHost = new ServiceHost(typeof(AService), new Uri("http://localhost:8000/AService"));

            ServiceMetadataBehavior metadataBehavior = new ServiceMetadataBehavior() { HttpGetEnabled = true };
            serviceHost.Description.Behaviors.Add(metadataBehavior);

            serviceHost.Open();

            Console.WriteLine("Open for communication.  Press ENTER to close.");
            Console.ReadLine();

            serviceHost.Close();
        }
    }
} 
```

示例客户端代码：

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;

namespace WcfClient
{

    class Program
    {
        static void Main(string[] args) {

            AService.AsmbServiceSoapClient client = new AService.AsmbServiceSoapClient();

            int clientId = client.Login("http://www.someurl.com", "test", 1);

            Console.WriteLine(clientId);
            Console.ReadLine();
        }
    }
} 
```

# php - 重新定义数组，搜索并返回 $var

> ID：12094259
> 
> 赞同：0
> 
> 时间：2012-08-23T14:43:21.970
> 
> 标签：php, arrays

我有这个数组：

```
Array
(
[0] => Array
    (
        [id] => 70170b60a4
        [name] => vip
    )

[1] => Array
    (
        [id] => 355a5f8cbd
        [name] => TEST LIST2
    )

[2] => Array
    (
        [id] => d1c2deef1d
        [name] => test list
    )

) 
```

我称之为$listInfo。

现在我想从这个数组中获取信息并创建一个新的，如下所示：

```
 Array
( 
 [70170b60a4] => vip
 [355a5f8cbd] => TEST LIST2
 [d1c2deef1d] => test list
) 
```

我这样做：

```
foreach ($listinfo as $key) {
$list = array($key['id'] => $key['name'] );
} 
```

然后我想返回vip的值（id）：

```
$listId = array_search('vip', $list); 
```

我的问题是 foreach 循环只创建一个数组，其中包含第一个数组中的最后一个值。所以我得到：

```
Array
(
     [d1c2deef1d] => test list
) 
```

谁能告诉我我做错了什么？我想要那里第一个数组中的所有值。非常感谢您的帮助。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-23T14:45:42.653

在您的`foreach`循环中，您每次都在创建一个新数组。

尝试这个：

```
$list = array();

foreach ($listinfo as $key) {
    $list[$key['id']] = $key['name'];
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-23T14:47:55.127

每次执行循环时都会创建一个新数组，试试这个：

```
$list = array();//make the array, once and only once
foreach ($listinfo as $key)
{
    $list[$key['id']] = $key['name'];//assign new key, new value to EXISTING array
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-23T14:45:52.583

那是因为您正在重新定义`$list`每个循环迭代。你想要做的是：

```
$list = array();
foreach($listinfo as $a) {
   $list[$a['id']] = $a['name'];
} 
```

# google-maps - 如何在信息窗口中添加往返此处的简单方向

> ID：12094260
> 
> 赞同：1
> 
> 时间：2012-08-23T14:43:23.473
> 
> 标签：google-maps, google-maps-api-3

我正在将我的 Google 多点地图从版本 2 移动到 3。我可以在单击时显示图标并打开新窗口，这很好，但在版本 2 中，当信息窗口打开时有一个选项“到这里和从这里的路线”。单击此处或从此处时，将出现一个文本字段，例如，您可以输入城镇名称。单击按钮时，用户会被发送到新窗口中的 Google 地图。我似乎无法找到这样的选择。这是我在版本 2 上的脚本：

```
// The info window version with the "to here" form open
    to_htmls[i] = html + '<br>Directions: <b>To here</b> - <a href="javascript:fromhere(' + i + ')">From here</a>' +
       '<br>Start address:<form action="http://maps.google.com/maps" method="get" target="_blank">' +
       '<input type="text" SIZE=40 MAXLENGTH=40 name="saddr" id="saddr" value="" /><br>' +
       '<INPUT value="Get Directions" TYPE="SUBMIT">' +
       '<input type="hidden" name="daddr" value="' + point.lat() + ',' + point.lng() + 
              // "(" + name + ")" + 
       '"/>';
    // The info window version with the "to here" form open
    from_htmls[i] = html + '<br>Directions: <a href="javascript:tohere(' + i + ')">To here</a> - <b>From here</b>' +
       '<br>End address:<form action="http://maps.google.com/maps" method="get"" target="_blank">' +
       '<input type="text" SIZE=40 MAXLENGTH=40 name="daddr" id="daddr" value="" /><br>' +
       '<INPUT value="Get Directions" TYPE="SUBMIT">' +
       '<input type="hidden" name="saddr" value="' + point.lat() + ',' + point.lng() +
              // "(" + name + ")" + 
       '"/>';
    // The inactive version of the direction info
    html = html + '<br><br>Directions: <a href="javascript:tohere('+i+')">To here</a> - <a href="javascript:fromhere('+i+')">From here</a>'; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-25T17:40:11.660

[这](http://www.geocodezip.com/v3_MW_example_map4.html)是[Mike Williams 的 Google Maps v2 教程](http://econym.org.uk/gmap/basic4.htm)中出现的代码页面之一，已翻译为 v3。

# jboss7.x - JBOSS Standalone HornetQ Multicast 集群在集群中抛出循环

> ID：12094261
> 
> 赞同：1
> 
> 时间：2012-08-23T14:43:24.917
> 
> 标签：jboss7.x, hornetq

我在下面提供了我的消息传递配置。谁能告诉我为什么会发生集群中的hornetq循环。在所有情况下，我们在启动服务器之前删除了数据和临时目录。所有服务器都以 localhost 作为绑定地址启动。

任何人都可以指定我们是否需要为`<local-bind-port>`集群中的所有节点保持相同。

我们已经使用 JBOSS 7.1.1 Final 配置了 Multicast Cluster (HornetQ)。当我们在 3 个单独的物理服务器中启动 3 个 JBOSS 服务器实例时，它开始使用此消息加载我的日志

> 18:38:14,325 INFO [org.hornetq.core.server.cluster.impl.BridgeImpl]（线程 13（HornetQ-server-HornetQServerImpl::serverUUID=458fb681-ed23-11e1-8bbf-c42c031d96aa-23095497））网桥 ClusterConnectionBridge @1a3fe65 [name=sf.config-cluster.3afb4e60-ed20-11e1-831c-109add44c09e，queue=QueueImpl[name=sf.config-cluster.3afb4e60-ed20-11e1-831c-109add44c09e，postOffice=PostOfficeImpl [server=HornetQServerImpl ::serverUUID=458fb681-ed23-11e1-8bbf-c42c031d96aa]]@192b987 targetConnector=ServerLocatorImpl (identity=(Cluster-connection-bridge::ClusterConnectionBridge@1a3fe65 [name=sf.config-cluster.3afb4e60-ed20-11e1-831c -109add44c09e, queue=QueueImpl[name=sf.config-cluster.3afb4e60-ed20-11e1-831c-109add44c09e, postOffice=PostOfficeImpl [server=HornetQServerImpl::serverUUID=458fb681-ed23-11e1-8bbf-c42c031d96aa]]@192b987 targetConnector=ServerLocatorImpl [initialConnectors=[org-hornetq-core-remoting-impl-netty-NettyConnectorFactory?port=5445&host=localhost], discoveryGroupConfiguration=null]]:: ClusterConnectionImpl@30045119[nodeUUID=458fb681-ed23-11e1-8bbf-c42c031d96aa, connector=org-hornetq-core-remoting-impl-netty-NettyConnectorFactory?port=5445&host=localhost, address=jms, server=HornetQServerImpl::serverUUID=458fb681 -ed23-11e1-8bbf-c42c031d96aa])) [initialConnectors=[org-hornetq-core-remoting-impl-netty-NettyConnectorFactory?port=5445&host=localhost], discoveryGroupConfiguration=null]] 已连接ClusterConnectionImpl@30045119[nodeUUID=458fb681-ed23-11e1-8bbf-c42c031d96aa, connector=org-hornetq-core-remoting-impl-netty-NettyConnectorFactory?port=5445&host=localhost, address=jms, server=HornetQServerImpl::serverUUID=458fb681 -ed23-11e1-8bbf-c42c031d96aa])) [initialConnectors=[org-hornetq-core-remoting-impl-netty-NettyConnectorFactory?port=5445&host=localhost], discoveryGroupConfiguration=null]] 已连接ClusterConnectionImpl@30045119[nodeUUID=458fb681-ed23-11e1-8bbf-c42c031d96aa, connector=org-hornetq-core-remoting-impl-netty-NettyConnectorFactory?port=5445&host=localhost, address=jms, server=HornetQServerImpl::serverUUID=458fb681 -ed23-11e1-8bbf-c42c031d96aa])) [initialConnectors=[org-hornetq-core-remoting-impl-netty-NettyConnectorFactory?port=5445&host=localhost], discoveryGroupConfiguration=null]] 已连接
> 
> 18:38:14,388 WARN [org.hornetq.core.server.cluster.impl.ClusterConnectionImpl] (Thread-4 (HornetQ-client-global-threads-20937207)) MessageFlowRecordImpl [nodeID=3afb4e60-ed20-11e1-831c-109add44c09e , 连接器=org-hornetq-core-remoting-impl-netty-NettyConnectorFactory?port=5445&host=localhost, queueName=sf.config-cluster.3afb4e60-ed20-11e1-831c-109add44c09e, queue=QueueImpl[name=sf.config -cluster.3afb4e60-ed20-11e1-831c-109add44c09e, postOffice=PostOfficeImpl [server=HornetQServerImpl::serverUUID=458fb681-ed23-11e1-8bbf-c42c031d96aa]]@192b987, isClosed=false, firstReset=true]::远程队列绑定 jms.queue.extractorQueue458fb681-ed23-11e1-8bbf-c42c031d96aa 已经在邮局绑定了。最可能的原因是您的集群中有一个循环，因为集群最大跳数太大，或者您有多个集群连接到使用重叠地址的相同节点
> 
> 18:38:14,391 WARN [org.hornetq.core.server.cluster.impl.ClusterConnectionImpl] (Thread-4 (HornetQ-client-global-threads-20937207)) MessageFlowRecordImpl [nodeID=3afb4e60-ed20-11e1-831c-109add44c09e , 连接器=org-hornetq-core-remoting-impl-netty-NettyConnectorFactory?port=5445&host=localhost, queueName=sf.config-cluster.3afb4e60-ed20-11e1-831c-109add44c09e, queue=QueueImpl[name=sf.config -cluster.3afb4e60-ed20-11e1-831c-109add44c09e, postOffice=PostOfficeImpl [server=HornetQServerImpl::serverUUID=458fb681-ed23-11e1-8bbf-c42c031d96aa]]@192b987, isClosed=false, firstReset=true]::远程队列绑定 jms.queue.outputQueue458fb681-ed23-11e1-8bbf-c42c031d96aa 已经在邮局绑定了。最可能的原因是您的集群中有一个循环，因为集群最大跳数太大，或者您有多个集群连接到使用重叠地址的相同节点
> 
> 18:38:14,395 WARN [org.hornetq.core.server.cluster.impl.ClusterConnectionImpl] (Thread-4 (HornetQ-client-global-threads-20937207)) MessageFlowRecordImpl [nodeID=3afb4e60-ed20-11e1-831c-109add44c09e , 连接器=org-hornetq-core-remoting-impl-netty-NettyConnectorFactory?port=5445&host=localhost, queueName=sf.config-cluster.3afb4e60-ed20-11e1-831c-109add44c09e, queue=QueueImpl[name=sf.config -cluster.3afb4e60-ed20-11e1-831c-109add44c09e, postOffice=PostOfficeImpl [server=HornetQServerImpl::serverUUID=458fb681-ed23-11e1-8bbf-c42c031d96aa]]@192b987, isClosed=false, firstReset=true]::远程队列绑定 jms.queue.expiryQueue458fb681-ed23-11e1-8bbf-c42c031d96aa 已经在邮局绑定了。最可能的原因是您的集群中有一个循环，因为集群最大跳数太大，或者您有多个集群连接到使用重叠地址的相同节点
> 
> 12:11:35,018 INFO [org.hornetq.core.server.cluster.impl.BridgeImpl]（线程 20（HornetQ-server-HornetQServerImpl::serverUUID=9287734d-eced-11e1-b554-c42c031d96aa-11515472））网桥 ClusterConnectionBridge @17f9401 [name=sf.config-cluster.ffb4ee03-ecec-11e1-86b2-109add44c09e，queue=QueueImpl[name=sf.config-cluster.ffb4ee03-ecec-11e1-86b2-109add44c09e，postOffice=PostOfficeImpl [server=HornetQServerImpl ::serverUUID=9287734d-eced-11e1-b554-c42c031d96aa]]@cdd17f targetConnector=ServerLocatorImpl (identity=(Cluster-connection-bridge::ClusterConnectionBridge@17f9401 [name=sf.config-cluster.ffb4ee03-ecec-11e1-86b2 -109add44c09e, queue=QueueImpl[name=sf.config-cluster.ffb4ee03-ecec-11e1-86b2-109add44c09e, postOffice=PostOfficeImpl [server=HornetQServerImpl::serverUUID=9287734d-eced-11e1-b554-c42c031d96aa]]@cdd17f targetConnector=ServerLocatorImpl [initialConnectors=[org-hornetq-core-remoting-impl-netty-NettyConnectorFactory?port=5445&host=localhost], discoveryGroupConfiguration=null]]:: ClusterConnectionImpl@20566889[nodeUUID=9287734d-eced-11e1-b554-c42c031d96aa, connector=org-hornetq-core-remoting-impl-netty-NettyConnectorFactory?port=5445&host=localhost, address=jms, server=HornetQServerImpl::serverUUID=9287734d -eced-11e1-b554-c42c031d96aa])) [initialConnectors=[org-hornetq-core-remoting-impl-netty-NettyConnectorFactory?port=5445&host=localhost], discoveryGroupConfiguration=null]] 已连接ClusterConnectionImpl@20566889[nodeUUID=9287734d-eced-11e1-b554-c42c031d96aa, connector=org-hornetq-core-remoting-impl-netty-NettyConnectorFactory?port=5445&host=localhost, address=jms, server=HornetQServerImpl::serverUUID=9287734d -eced-11e1-b554-c42c031d96aa])) [initialConnectors=[org-hornetq-core-remoting-impl-netty-NettyConnectorFactory?port=5445&host=localhost], discoveryGroupConfiguration=null]] 已连接ClusterConnectionImpl@20566889[nodeUUID=9287734d-eced-11e1-b554-c42c031d96aa, connector=org-hornetq-core-remoting-impl-netty-NettyConnectorFactory?port=5445&host=localhost, address=jms, server=HornetQServerImpl::serverUUID=9287734d -eced-11e1-b554-c42c031d96aa])) [initialConnectors=[org-hornetq-core-remoting-impl-netty-NettyConnectorFactory?port=5445&host=localhost], discoveryGroupConfiguration=null]] 已连接
> 
> 12:11:32,673 INFO [org.hornetq.core.server.cluster.impl.BridgeImpl]（线程 3（HornetQ-server-HornetQServerImpl::serverUUID=9287734d-eced-11e1-b554-c42c031d96aa-11515472））网桥 ClusterConnectionBridge @147e4f0 [name=sf.config-cluster.2ab34008-eced-11e1-ad90-109add5d2b6e，queue=QueueImpl[name=sf.config-cluster.2ab34008-eced-11e1-ad90-109add5d2b6e，postOffice=PostOfficeImpl [server=HornetQServerImpl ::serverUUID=9287734d-eced-11e1-b554-c42c031d96aa]]@1074938 targetConnector=ServerLocatorImpl (identity=(Cluster-connection-bridge::ClusterConnectionBridge@147e4f0 [name=sf.config-cluster.2ab34008-eced-11e1-ad90 -109add5d2b6e, queue=QueueImpl[name=sf.config-cluster.2ab34008-eced-11e1-ad90-109add5d2b6e, postOffice=PostOfficeImpl [server=HornetQServerImpl::serverUUID=9287734d-eced-11e1-b554-c42c031d96aa]]@1074938 targetConnector=ServerLocatorImpl [initialConnectors=[org-hornetq-core-remoting-impl-netty-NettyConnectorFactory?port=5445&host=localhost], discoveryGroupConfiguration=null]]:: ClusterConnectionImpl@20566889[nodeUUID=9287734d-eced-11e1-b554-c42c031d96aa, connector=org-hornetq-core-remoting-impl-netty-NettyConnectorFactory?port=5445&host=localhost, address=jms, server=HornetQServerImpl::serverUUID=9287734d -eced-11e1-b554-c42c031d96aa])) [initialConnectors=[org-hornetq-core-remoting-impl-netty-NettyConnectorFactory?port=5445&host=localhost], discoveryGroupConfiguration=null]] 已连接ClusterConnectionImpl@20566889[nodeUUID=9287734d-eced-11e1-b554-c42c031d96aa, connector=org-hornetq-core-remoting-impl-netty-NettyConnectorFactory?port=5445&host=localhost, address=jms, server=HornetQServerImpl::serverUUID=9287734d -eced-11e1-b554-c42c031d96aa])) [initialConnectors=[org-hornetq-core-remoting-impl-netty-NettyConnectorFactory?port=5445&host=localhost], discoveryGroupConfiguration=null]] 已连接ClusterConnectionImpl@20566889[nodeUUID=9287734d-eced-11e1-b554-c42c031d96aa, connector=org-hornetq-core-remoting-impl-netty-NettyConnectorFactory?port=5445&host=localhost, address=jms, server=HornetQServerImpl::serverUUID=9287734d -eced-11e1-b554-c42c031d96aa])) [initialConnectors=[org-hornetq-core-remoting-impl-netty-NettyConnectorFactory?port=5445&host=localhost], discoveryGroupConfiguration=null]] 已连接

配置是：

```
 <hornetq-server>
            <clustered>true</clustered>
            <persistence-enabled>true</persistence-enabled>
            <cluster-user>myconfig</cluster-user>
            <cluster-password>mycluster</cluster-password>
            <journal-file-size>102400</journal-file-size>
            <journal-min-files>2</journal-min-files>

            <connectors>
                <netty-connector name="netty" socket-binding="messaging"/>
                <in-vm-connector name="in-vm" server-id="5"/>
            </connectors>

            <acceptors>
                <netty-acceptor name="netty" socket-binding="messaging"/>
                <in-vm-acceptor name="in-vm" server-id="5"/>
            </acceptors>

            <broadcast-groups>
                <broadcast-group name="bg-config">
                    <local-bind-port>9877</local-bind-port>
                    <group-address>224.1.22.1</group-address>
                    <group-port>9876</group-port>
                    <broadcast-period>5000</broadcast-period>
                    <connector-ref>
                        netty
                    </connector-ref>
                </broadcast-group>
            </broadcast-groups>

            <discovery-groups>
                <discovery-group name="dg-config">
                    <group-address>224.1.22.1</group-address>
                    <group-port>9876</group-port>
                    <refresh-timeout>10000</refresh-timeout>
                </discovery-group>
            </discovery-groups>

            <cluster-connections>
                <cluster-connection name="config-cluster">
                    <address>jms</address>
                    <connector-ref>netty</connector-ref>
                    <forward-when-no-consumers>true</forward-when-no-consumers>
                    <max-hops>1</max-hops>
                    <discovery-group-ref discovery-group-name="dg-config"/>
                </cluster-connection>
            </cluster-connections>

            <security-settings>
                <security-setting match="#">
                    <permission type="send" roles="guest"/>
                    <permission type="consume" roles="guest"/>
                    <permission type="createNonDurableQueue" roles="guest"/>
                    <permission type="deleteNonDurableQueue" roles="guest"/>
                </security-setting>
            </security-settings>

            <address-settings>
                <address-setting match="#">
                    <dead-letter-address>jms.queue.DLQ</dead-letter-address>
                    <expiry-address>jms.queue.ExpiryQueue</expiry-address>
                    <redelivery-delay>500</redelivery-delay>
                    <max-delivery-attempts>5000</max-delivery-attempts>
                    <max-size-bytes>10485760</max-size-bytes>
                    <address-full-policy>BLOCK</address-full-policy>
                    <message-counter-history-day-limit>10</message-counter-history-day-limit>
                </address-setting>
            </address-settings>

            <jms-connection-factories>
                <connection-factory name="InVmConnectionFactory">
                    <connectors>
                        <connector-ref connector-name="in-vm"/>
                    </connectors>
                    <entries>
                        <entry name="java:/ConnectionFactory"/>
                    </entries>
                    <connection-ttl>-1</connection-ttl>
                </connection-factory>
                <connection-factory name="RemoteConnectionFactory">
                    <connectors>
                        <connector-ref connector-name="netty"/>
                    </connectors>
                    <entries>
                        <entry name="RemoteConnectionFactory"/>
                        <entry name="java:jboss/exported/jms/RemoteConnectionFactory"/>
                    </entries>
                    <connection-ttl>-1</connection-ttl>
                </connection-factory>
                <pooled-connection-factory name="hornetq-ra">
                    <transaction mode="xa"/>
                    <connectors>
                        <connector-ref connector-name="in-vm"/>
                    </connectors>
                    <entries>
                        <entry name="java:/JmsXA"/>
                    </entries>
                </pooled-connection-factory>
            </jms-connection-factories>

            <jms-destinations>
                <jms-queue name="testQueue">
                    <entry name="queue/test"/>
                    <entry name="java:jboss/exported/jms/queue/test"/>
                </jms-queue>
                <jms-queue name="expiryQueue">
                    <entry name="queue/ExpiryQueue"/>
                    <entry name="java:jboss/exported/jms/queue/ExpiryQueue"/>
                </jms-queue>
                <jms-topic name="testTopic">
                    <entry name="topic/test"/>
                    <entry name="java:jboss/exported/jms/topic/test"/>
                </jms-topic>
            </jms-destinations>
        </hornetq-server>
    </subsystem> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-18T14:51:18.103

错误是指网络中的多播配置。

您可以停止在 hornetq 设置上添加上述配置的错误消息：

```
<cluster-connection name="my-cluster">
    <reconnect-attempts>2</reconnect-attempts>
    ...
</cluster-connection>

-1 = infinity (default)
2 = 2 times 
```

但我没有用这个。我将多播地址更改为 224.0.0.1 而不是默认的 231.7.7.7，如下所示：

```
<socket-binding-group name="full-ha-sockets" default-interface="public">
    ...
    <socket-binding name="messaging-group" port="0" multicast-address="${jboss.messaging.group.address:224.0.0.1}" multicast-port="${jboss.messaging.group.port:9876}"/>
    ...
</socket-binding-group> 
```

# c# - Web 服务返回空白页而不是 JSON 对象

> ID：12094263
> 
> 赞同：3
> 
> 时间：2012-08-23T14:43:45.790
> 
> 标签：c#, .net, json, wcf

我第一次被要求开发一个 WCF Web 服务作为一个项目。Web 服务相当简单，它应该只返回一个 JSON 对象。问题是浏览器（chrome、firefox）在尝试使用浏览器测试服务时显示空白页面。WcfTestClient 正确显示 JSON 输出。

附件是我的代码和 Web.config

那么我做错了什么？提前致谢。

**网络配置：**

```
<?xml version="1.0"?>
<configuration>
  <system.serviceModel>
    <services>
      <service name="WcfService3.Service1" behaviorConfiguration="WcfService3.Service1Behavior">
        <!-- Service Endpoints -->
        <endpoint address="" binding="wsHttpBinding" contract="WcfService3.IService1">
          <identity>
            <dns value="localhost"/>
          </identity>
        </endpoint>
        <endpoint address="mex" binding="mexHttpBinding" contract="IMetadataExchange"/>
      </service>
    </services>
    <behaviors>
      <serviceBehaviors>
        <behavior name="WcfService3.Service1Behavior">
          <serviceMetadata httpGetEnabled="true"/>
          <serviceDebug includeExceptionDetailInFaults="false"/>
        </behavior>
      </serviceBehaviors>
    </behaviors>
  </system.serviceModel>
</configuration> 
```

**IService1.cs：**

```
namespace WcfService3
{
    [ServiceContract]
    public interface IService1
    {
        [OperationContract]
        string GetData(string username, string password);
    }

    [DataContract]
    public class Data
    {
        [DataMember]
        public string Username { get; set; }

        [DataMember]
        public string Password { get; set; }
    }
} 
```

**服务1.svc.cs：**

```
namespace WcfService3
{
    public class Service1 : IService1
    {
        [WebInvoke(Method = "GET", 
        RequestFormat = WebMessageFormat.Json,
        ResponseFormat = WebMessageFormat.Json,
        UriTemplate = "data/{user}/{pass}")]
        public string GetData(string user, string pass)
        {
            Data UserData = new Data()
            {
                Username = user,
                Password = pass
            };

            MemoryStream stream = new MemoryStream();
            DataContractJsonSerializer ser = new DataContractJsonSerializer(typeof(Data));
            ser.WriteObject(stream, UserData);
            string json = Encoding.Default.GetString(stream.ToArray());
            return json;
        }  
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-23T15:02:45.010

尝试以下操作：

```
namespace WcfService3
{
    public class Service1 : IService1
    {
        [WebInvoke(Method = "GET", 
        RequestFormat = WebMessageFormat.Json,
        ResponseFormat = WebMessageFormat.Json,
        UriTemplate = "data/{user}/{pass}")]
        public Data GetData(string user, string pass)
        {
            Data UserData = new Data()
            {
                Username = user,
                Password = pass
            };

            return UserData;
        }  
    }
} 
```

您将响应格式定义为 Json，因此 Wcf 服务会将您的返回对象转换为 Json。（如果我是对的）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-23T15:02:59.970

要在 webbrowser 中使用，您需要实现 webHttpBinding 而不是或与 wsHttpBinding 一起实现。

```
<services> 
  <service name="WcfService3.Service1" behaviorConfiguration="WcfService3.Service1Behavior"> 
    <!-- Service Endpoints --> 
    <endpoint address="" binding="webHttpBinding" behaviorConfiguration="webBehavior" contract="WcfService3.IService1"> 
      <identity> 
        <dns value="localhost"/> 
      </identity> 
    </endpoint> 
    <endpoint address="mex" binding="mexHttpBinding" contract="IMetadataExchange"/> 
  </service> 
</services> 
```

也在配置中：

```
 <endpointBehaviors> 
    <behavior name="webBehavior"> 
      <webHttp /> 
    </behavior> 
  </endpointBehaviors> 
```

# identity - 权限不足的同步引擎

> ID：12094264
> 
> 赞同：0
> 
> 时间：2012-08-23T14:43:46.823
> 
> 标签：identity

我有这个问题，迫切需要一个答案。几个星期以来，我一直在努力解决这个问题。我将一组用户同步到具有属性的元节中（我们称其为 AppUser 设置为 true/false）。我想要做的是，当在 FIM 中创建用户时，我希望 FIM 查看这个值并将用户放入特定的集合中。我尝试在片场使用基于标准的成员资格。这对我不起作用。我可能以错误的方式做这件事，或者它可能与 MPR 有关。提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-15T14:56:42.467

您的解决方案是正确的，因此它应该可以正常工作。

但是，请注意，据我所知，集合的成员列表每天重建一次。您可以直接在集合中预览列表并且应该能够看到它们（因为在这种情况下请求是动态完成的）。

# java - 分析 JAAS 的示例程序

> ID：12094265
> 
> 赞同：0
> 
> 时间：2012-08-23T14:43:49.893
> 
> 标签：java, exception, profiling, jaas

我正在尝试分析此处的 JAAS 示例程序。（http://www.devx.com/getHelpOn/Article/9915/0/page/4）。我下载了代码并运行它。没有分析它运行得很好。运行该程序的命令如下所示：

```
java -cp SimpleAction.jar:SimpleAuthz.jar:SimpleLogMod.jar -Djava.security.manager -Djava.security.policy==SimpleJAAS.policy -Djava.security.auth.login.config==SimpleJAAS.config  com.gabhart.security.SimpleAuthz 
```

但是当我尝试使用 java 代理运行它（对其进行分析）时，它给了我如下异常：

```
java.security.AccessControlException: access denied (java.util.PropertyPermission ch.usi.dag.jborat.liblist read)
    at java.security.AccessControlContext.checkPermission(AccessControlContext.java:374)
    at java.security.AccessController.checkPermission(AccessController.java:546)
    at java.lang.SecurityManager.checkPermission(SecurityManager.java:532)
    at java.lang.SecurityManager.checkPropertyAccess(SecurityManager.java:1285)
    at java.lang.System.getProperty(System.java:650)
    at ch.usi.dag.jborat.agent.JavaAgent.premain(JavaAgent.java:19)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
    at java.lang.reflect.Method.invoke(Method.java:597)
    at sun.instrument.InstrumentationImpl.loadClassAndStartAgent(InstrumentationImpl.java:323)
    at sun.instrument.InstrumentationImpl.loadClassAndCallPremain(InstrumentationImpl.java:338) 
```

但是程序运行良好，分析器不产生输出。我使用的 java profiler 并没有被广泛使用。它正确地描述了其他 java 程序/应用程序，但不是这个。

我使用以下命令与分析器一起运行示例 JAAS 程序：（请注意，它是从脚本文件中复制的）

```
 **java  -javaagent:lib/jborat-agent.jar \
     -Dch.usi.dag.jborat.exclusionList="conf/exclusion.lst" \
      -Dch.usi.dag.jborat.liblist="conf/lib.lst" \
       -Dch.usi.dag.jp2.outputFilePrefix="JAAZexample_output" \
       -Dch.usi.dag.jborat.instrumentation="ch.usi.dag.jp2.instrument.AddInstrumentation" \
       -Dch.usi.dag.jp2.dumpers="ch.usi.dag.jp2.dump.xml.XmlDumper" \
         -Dch.usi.dag.jborat.codemergerList="conf/codemerger.lst" \
          -Xbootclasspath/p:./lib/Thread_JP2.jar:lib/jborat-runtime.jar:lib/jp2-runtime.jar/jp2.jar/jborat-agent.jar/jborat.jar**:SimpleAction.jar:SimpleAuthz.jar:SimpleLogMod.jar \
          -Djava.security.manager -Djava.security.policy==SimpleJAAS.policy \
          -Djava.security.auth.login.config==SimpleJAAS.config  com.gabhart.security.SimpleAuthz 
```

有人可以告诉我为什么抛出指定的异常以及为什么我的探查器不产生输出吗？

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-23T15:06:57.393

您已启用 SecurityManager (-Djava.security.manager) 并指定了特定的安全策略 (-Djava.security.policy==SimpleJAAS.policy)。您的代理代码违反了该安全策略，因此失败。您需要在策略文件中添加一个授权部分，以允许代理执行它需要执行的操作。

出于测试目的，您可能会在您的安全策略中添加类似这样的内容（将允许代理做任何它想做的事情）：

```
grant codeBase "file:lib/jborat-agent.jar" {
  permission java.security.AllPermission;
}; 
```

您可能需要调整 codeBase 行以包含所有必要的 jar。

显然，在一个真正安全的应用程序中，您可能不想这样做，而是授予代理它执行所需的最低权限。

# java - 停止代码直到满足条件

> ID：12094268
> 
> 赞同：4
> 
> 时间：2012-08-23T14:43:56.210
> 
> 标签：java, conditional-statements, wait, joptionpane, thread-sleep

如何创建一个函数或组件等来停止所有正在运行的代码，直到满足条件？

例如，与 JOptionPane 相同的方式，如果我有这个，例如：

```
JOptionPane.showInputDialog(null, "Hello", "Title", 1); 
```

在函数等中，然后打印到控制台，直到我关闭 JOptionPane 才会打印。

我猜这个组件有某种内置的线程设置来做到这一点，但我怎么能用我自己的函数复制它呢？

所以比如说我想让 JFrames 延迟一切，直到它被关闭，所以它就像一个 JOptionPane。

或者例如有一个函数，该函数有多个输入，这些输入得到更新，并且在它内部对这些输入进行了一些数学运算，如果它是某个值，则返回一个布尔值，但除此之外的所有其他内容都被暂停，直到返回真正的布尔值。

我猜解决方案是某种线程设置，但我对 Java 还很陌生，当我过去编写代码时，我并没有真正使用过线程，所以我还不能创建一个好的停止-启动/暂停-运行风格的功能系统。

有没有人有任何建议如何实现这个或更好的代码示例来显示这种类型的事情？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-23T14:51:44.250

您创建一个监视器（这只是一个简单的`Object`）

```
public static final Object monitor = new Object();
public static boolean monitorState = false; 
```

现在你创建一个等待方法

```
public static void waitForThread() {
  monitorState = true;
  while (monitorState) {
    synchronized (monitor) {
      try {
        monitor.wait(); // wait until notified
      } catch (Exception e) {}
    }
  }
} 
```

以及解锁服务员的方法。

```
public static void unlockWaiter() {
  synchronized (monitor) {
    monitorState = false;
    monitor.notifyAll(); // unlock again
  }
} 
```

所以当你想做一些花哨的事情时，你可以这样做：

```
new Thread(new Runnable() {
  @Override
  public void run() {
    // do your fancy calculations
    unlockWaiter();
  }
}).start();

// do some stuff    
waitForThread();    
// do some stuff that is dependent on the results of the thread 
```

当然，有很多可能性，这只是一个版本的如何去做。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-23T15:00:43.670

你试过让线程休眠吗？

简单到`Thread.sleep(timeInMilliseconds)`

[在这里](http://docs.oracle.com/javase/tutorial/essential/concurrency/sleep.html)检查

# email - 网站电子邮件地址标准选项/技术

> ID：12094275
> 
> 赞同：0
> 
> 时间：2012-08-23T14:44:19.267
> 
> 标签：email, html-email

我正在设计一个网站，我想在网站上显示和电子邮件地址。现在在许多网站上，您可以单击电子邮件地址，然后 Outlook、gmail 或任何客户端都会弹出电子邮件地址预先插入该邮件客户端。其他页面可让您在网页内键入您的电子邮件内容，并通过某些邮件服务器将电子邮件发送到网站上的电子邮件地址。我知道您可以为此使用带有 php 的 Swift 邮件程序...

现在有哪些标准做法？此外，是否可以检测用户是否登录到 gmail（例如）并随后在新邮件中打开网站电子邮件地址作为他/她的收件人？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-23T14:49:41.633

你可以做任何一个。您描述的前一种情况可能是最简单的。您可以创建`<a href="mailto:your@email.com">E-mail us!</a>`打开用户默认电子邮件客户端的链接；或者您可以创建一个表单并在您的情况下使用 PHP 来发送邮件。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-23T14:50:49.603

1)`mailto:email@addy.here`是本机 HTML 技术，它需要客户端邮件客户端，就像您提到的那样。

2) 使用`<form>`标签和发送电子邮件服务器端的其他技术是一种替代方式，但您需要在此场景中处理更多情况。

a) 您需要注意网页/服务器的安全性。有许多黑客技术允许黑客通过您的网站发送垃圾邮件。

b）不要忘记托管的限制。可能有每天的电子邮件限制，这可能会给您带来麻烦。

因此，请根据您网站的需求和流量选择方法。

# uri - 符号 3 URI 到 RDF/XML

> ID：12094277
> 
> 赞同：3
> 
> 时间：2012-08-23T14:44:22.233
> 
> 标签：uri, converter, rdf, n3, n-triples

我正在尝试通过 rdf:about 转换器将 n3 文件转换为 rdf/xml。不幸的是，某些 URI 具有特殊字符，例如：. -> 基因：01.01.01 % -> 基因：fog2/zfpm2 | -> 基因：17867|203045

转换器将此示例记录为符号 3 语法错误。我到处寻找可以帮助我制定约定的转义字符，但没有成功。有谁知道我如何在 URI 中表示这些特殊字符？有没有其他转换器可以让我继续这个约定？

如果我删除这些 URI，我的文件将正常转换。提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-23T20:27:41.517

最可靠的方法是完整地写出 URI。因此，如果您有：

```
@prefix gene: <http://example.com/>

gene:fog2/zfpm rdfs:label "something". 
```

改写为：

```
@prefix gene: <http://example.com/>

<http://example.com/fog2/zfpm> rdfs:label "something". 
```

请注意，此表示法中甚至不允许使用某些字符（例如，空格）。在这种情况下，需要使用[百分比编码](http://en.wikipedia.org/wiki/Percent-encoding)来处理它们：

```
<http://example.com/fog2/zfpm%20xyz> rdfs:label "something". 
```

这里的空间已被百分比编码为`%20`.

最新的[Turtle](http://www.w3.org/TR/turtle/)规范（Turtle 是 W3C 的非标准 N3 的标准化版本）还允许将*其中一些*特殊字符转义为反斜杠：

```
gene:fog2\/zfpm rdfs:label "something". 
```

但这还没有被广泛实施，旧的工具/服务将不支持它。rdfabout.com 转换器肯定不支持它。

[顺便说一下， triplr.org](http://triplr.org/)比 rdfabout.com 好。

# bash - 使用 bash 命令将标头前缀到标准输出？

> ID：12094278
> 
> 赞同：5
> 
> 时间：2012-08-23T14:44:22.170
> 
> 标签：bash, shell, unix

我刚刚在一个站点上看到了一个示例，该示例将 awk 命令的输出通过管道传输到以下命令：

```
(echo "this is a header";cat -) 
```

这有效地在输出顶部添加了标题字符串。看起来 - 代表那里的标准输出。这个构造是什么？带括号，然后是 cat -? 这是如何工作的，这似乎很有用，但这是我第一次看到它..

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-23T14:49:04.190

`-`通常可用于表示`stdin`接受文件名参数的命令行选项。请注意， 的效果`cat -`与 plain 相同`cat`，即两个版本都可以读取`stdin`。

括号使 shell 在[sub-shell](http://tldp.org/LDP/abs/html/subshells.html)中运行命令。`(...)`本质上是`bash -c '...'`如果外壳是`bash`. 这样做是因为在`xyz | echo "..."; cat`输出中`xyz`会被输入`echo`并丢失。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-08-23T16:21:14.250

此处使用括号是一种“分组构造”——详见[bash 参考手册](http://www.gnu.org/software/bash/manual/bashref.html#Command-Grouping)

类似的构造使用大括号：

```
{ echo "this is a header"; cat -; } 
```

这是不同的语法，需要大括号和尾随分号周围的空格。

使用大括号和括号的区别在于：大括号中的命令列表在您*当前*的 shell 中运行，括号中的命令列表在*子shell*中运行。如果您希望命令列表更改您的环境，这一点很重要——当子shell 退出时，环境更改将丢失。

# java - 反映更改而无需重新部署应用程序

> ID：12094279
> 
> 赞同：2
> 
> 时间：2012-08-23T14:44:22.907
> 
> 标签：java, jakarta-ee, deployment, web-deployment

即使我需要修改其中一个网页中的一行，我也必须将整个项目从 netbeans 重新部署到 GAE。这似乎并不好。我在网站中使用的几个*应用程序上下文*变量*（我通过我的 cpanel 将一些轻量数据存储在应用程序上下文变量*中）丢失了。有什么方法可以在某些网页上进行更改而无需重新部署整个项目？我正在使用 google appengine 作为我的应用程序服务器。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-23T14:50:20.290

您可以为此使用[JRebel](http://zeroturnaround.com/software/jrebel/)。一个例子（虽然使用 Eclipse）[here](http://androidisland.blogspot.com/2010/09/appengine-jrebel-and-eclipse-getting.html)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-23T14:50:28.213

我建议你看看 JRebel。我没有亲自使用过它，但已经研究过使用它。它完全符合您的要求。

[http://zeroturnaround.com/software/jrebel/](http://zeroturnaround.com/software/jrebel/)

# c++ - Qt - 从 base64 解码二进制序列

> ID：12094280
> 
> 赞同：0
> 
> 时间：2012-08-23T14:44:27.080
> 
> 标签：c++, qt, base64

我正在尝试解码一个 base64 编码的字符串，其中包含一些二进制数据。字符串有时只包含一个字符。不幸的是，函数 QByteArray::fromBase64() 仅适用于较大的输入字符串。

此代码适用于较大的输入字符串：

```
QByteArray text = QByteArray::fromBase64("ykw8");

unsigned int val = 0;
for(int i = 0; i < text.length(); i++)
    val |= (text.data()[text.length() - i - 1] & 0xff)  << (i*8); 
```

之后`val`包含 13257788，这是“ykw8”中编码的正确数据。但是，如果我提交“u”作为 fromBase64() 的参数，则结果数组 ( `text`) 的大小为 0。因此该变量`val`也包含 0，尽管它应该是 46。

我已经尝试填充输入字符串，即“u==”和类似的，但大小`text`始终为0。那么如何正确地从Base64（）解码短字符串？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-24T08:47:03.820

如果您坚持将“u”作为 base64 编码结果，则最接近的有效 base64 是“uA==”。但它不会解码为 46 (00101110) 而是 184 (10111000) 。Base64 需要完整的 24 位组才能正确运行。如果输入中没有足够的位，则*在右侧*补零。第一个 6 位组是“u”，第二个是全零，但它仍然有来自原始数据的 2 位，所以它不是“=”填充而是“A”。

阅读[RFC 2405](http://www.ietf.org/rfc/rfc2045.txt)，第 6.8 章“Base64 内容传输编码”

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2018-01-05T01:57:18.467

因为 Qt 不检查 base64 解码的输入的有效性，所以这里有一个测试字符串是否类似于 base64 格式的示例。

```
bool isB64(QString input){
    if(input.length() % 4 != 0)
        return false;
    if(QRegExp("^[A-Za-z0-9+/]+$").indexIn(input, QRegExp::CaretAtZero) == -1 &&
            QRegExp("^[A-Za-z0-9+/]+=$").indexIn(input, QRegExp::CaretAtZero) == -1 &&
            QRegExp("^[A-Za-z0-9+/]+==$").indexIn(input, QRegExp::CaretAtZero) == -1)
        return false;
    return true;
} 
```

# asp.net - 删除标签 影响

> ID：12094284
> 
> 赞同：0
> 
> 时间：2012-08-23T14:44:45.643
> 
> 标签：asp.net, html, center

如何删除`<center>`标签？

我`<center>`在 MasterPage 中设置了所有 ContentPlaceHolder，因此所有正文 aspx 页面都是默认的中心。如何在不删除 masterPage 中的`<center>`标签的情况下删除/取消该效果？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-23T14:51:26.760

HTML5 不支持该标签，并且正在折旧。您应该为您的问题寻找另一种解决方案。

您可以使用带有属性“Text-align:center”的类的 div 标签来代替中心标签。然后在子标签中声明“Text-align:Left”或类似的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-23T14:49:00.200

```
center {
float: left; } 
```

只需根据您的需求进行调整（如其他答案中所述，如保证金：自动）。

最好的方法是在自定义 CSS 中声明这一点（假设您正在谈论 SharePoint 2007/2010）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-23T14:49:39.730

您的问题是一个很好的例子，说明为什么不推荐使用该`center`标签并且根本不应该使用该标签。HTML 不应该决定事物的外观。

如果您不关心标准合规性，您可以向`center`标签添加样式以使其向左浮动。我建议用相应样式替换它 `div`。

# c# - PantaRei.Classes.Enums.ProductTypeA1Enum.Types' 是一个“类型”，在给定的上下文中无效

> ID：12094285
> 
> 赞同：0
> 
> 时间：2012-08-23T14:44:46.090
> 
> 标签：c#, enums, foreach

我有这段代码必须遍历枚举并进行一些计算。

这是枚举

```
namespace PantaRei.Classes.Enums
{
    public class ProductTypeA1Enum
    {
        #region Reports Enum

        public enum Types
        {
            [StringValue("K01")]
            K01 = 1,
            [StringValue("K03")]
            K03 = 2,
            [StringValue("K05")]
            K05 = 3,
            [StringValue("M01")]
            M01 = 4
        }

        #endregion
    }
} 
```

这是我的函数，它将枚举作为参数键入枚举

```
GetData(ref secA1, ddr, ddrs, ProductTypeA1Enum.Types); 
```

这是我遍历枚举的代码

```
 public static void GetData(ref Dars secA1, Ddr ddr, Ddrs ddrs, Enum pTypes)
            {
                Array typesEnum = Enum.GetValues(pTypes.GetType());

                foreach (var types in typesEnum)
                {
                    string pType = StringEnum.GetStringValue((Enum) types);

                    secA1.OpBal = ddrs.Out.Sum(o => o.Amount);

secA1.MiCaCol +=
                ddr.Rec.Where(
                    rec =>
                    ddr.Acc.Exists(
                        acc =>
                        acc.Contract == rec.Contract && !acc.TransactionType.Equals("D9") && rec.ProductType == pType)).
                    Sum(rec => rec.Amount);
             }               
     } 
```

这是我得到的错误

```
PantaRei.Classes.Enums.ProductTypeA1Enum.Types' is a 'type', which is not valid in the given context 
```

错误来自这里

```
GetData(ref secA1, ddr, ddrs, **ProductTypeA1Enum.Types**); 
```

Types 是一个枚举，那么为什么会出现此错误？有任何想法吗？Tks提前瑞马丁斯

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-23T14:47:35.863

你应该这样做：

```
GetData(ref secA1, ddr, ddrs, typeof(ProductTypeA1Enum.Types)); 
```

和

```
public static void GetData(ref Dars secA1, Ddr ddr, Ddrs ddrs, Type pTypes)
{
    Array typesEnum = Enum.GetValues(pTypes);

    // ....
} 
```

# c# - NuGet VS 2012 ServicePointManager 不支持使用 https 方案的代理

> ID：12094287
> 
> 赞同：24
> 
> 时间：2012-08-23T14:44:48.450
> 
> 标签：c#, nuget, visual-studio-2012

我最近从VS2012 RC升级到RTM，自从升级到RTM后，我就无法再访问nuget了。我在“管理 NuGet 包”窗口中收到以下错误。

```
The ServicePointManager does not support proxies with the https scheme. 
```

我在上一个堆栈溢出问题中查看了[此处](https://stackoverflow.com/questions/8196629/error-in-downloading-webactivator-with-nuget)提供的解决方案，但它不适用于我，因为我不在防火墙后面（当然不应该由[http://whatismyipaddress.com/proxy-check](http://whatismyipaddress.com/proxy-check)验证）。我还可以看到 RSS 提要/VS 可以访问其他网络资源，在上一个问题中，问题与所有 VS 互联网流量有关，而不仅仅是我的情况下的 NuGet。

有什么想法可能导致这种情况，或者如何恢复对 NuGet 的访问？我在工作的机器和家里的个人电脑上都试过这个，效果都一样。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-10-12T17:26:31.127

解决方案在这个答案中：

[Visual Studio 2010 nuget 错误：基础连接已关闭：无法为 SSL/TLS 安全通道建立信任关系](https://stackoverflow.com/questions/8972497/visual-studio-2010-nuget-error-the-underlying-connection-was-closed-could-not)

该问题与默认 Nuget 包源上的错误 SSL 证书有关。

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2016-06-23T16:58:11.473

我开始在我的一台机器上的 VS2015 中得到这个。我在 myget 上有一个额外的包提要，它不断地要求我提供凭据，即使输入正确的凭据也失败了。帮助我的是通过删除这两个 nuget 文件夹来清除 nuget 缓存和配置：

*   %APPDATA%\NuGet
*   %LOCALAPPDATA%\NuGet

之后我重新启动了 Visual Studio 并再次添加了我的自定义包源。

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2014-07-03T09:41:20.143

如果您在 Internet 设置中有代理设置，也会发生这种情况。

* * *

## 回答 #4

> 赞同：6
> 
> 时间：2016-07-15T15:59:43.267

我不确定我的 nuget 使用历史中发生了什么，但我最终卡住了为我的开发机器使用代理。让它工作。

1-打开提琴手

2-转到`%AppData%\NuGet\NuGet.config`

包源

```
<packageSources>
    <add key="nuget http" value="http://www.nuget.org/api/v2/" />
    <add key="nuget.org" value="https://www.nuget.org/api/v2/" />
</packageSources> 
```

3-配置

```
<config>
    <add key="HTTP_PROXY" value="http://127.0.0.1:8888" />
  </config> 
```

4-利润。

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2017-04-27T11:08:11.203

我也遇到了同样的问题，因为我刚刚关闭了提琴手并重新启动了 Visual Studio 来解决问题

* * *

## 回答 #6

> 赞同：4
> 
> 时间：2016-05-12T09:01:12.157

一个很晚的答案，但是在 VS 2015 中恢复 Nuget 包时，我得到了完全相同的消息。似乎上次我重新启动我的机器时我没有停止 Fiddler，而且 Fiddler 似乎留下了一些有趣的状态. 当我开始并从 Fiddler 退出时，问题就消失了。

* * *

## 回答 #7

> 赞同：3
> 
> 时间：2015-05-19T23:50:40.147

检查您的系统环境变量中的`http_proxy`和`https_proxy`。NuGet 会首先查看它们（如果存在）。如果这些代理环境变量以 开头`https`，NuGet 将失败。修复它们并重新启动计算机（重新启动 Visual Studio 对我不起作用）。

您可以通过打开包管理器控制台来验证这一点：

```
Get-Childitem env:http_proxy
Get-Childitem env:https_proxy 
```

如果您想在不重新启动计算机的情况下快速使其工作，请在包管理器控制台中手动设置代理：

```
$env:http_proxy = "http://your.proxy.com:1234"
$env:https_proxy = "http://your.proxy.com:1234" 
```

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2018-10-02T12:52:12.083

**NuGet VS 2015 ServicePointManager 不支持使用 https 方案的代理**

问题不在于代理，因为在我的情况下代理已被删除。因此必须更改 Visual Studio 配置文件。但在其他情况下，答案也可能在于根据您的情况更改配置文件。

去：`C:\Program Files (x86)\Microsoft Visual Studio 14.0\Common7\IDE`

找到配置文件`devenv.exe.config`并在管理员模式下编辑：

```
 <defaultProxy enabled="false" useDefaultCredentials="true">  
            <proxy bypassonlocal="True" proxyaddress="http://proxy.somesite.nl" />  
        </defaultProxy> 
```

设置 enabled="false" 或根据您的需要调整该部分。

更改后重新启动 VS。

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2019-11-25T10:39:35.297

我只是通过安装 Fiddler 得到了这个。我尝试启动它并退出以确保它没有运行但仍然无法让 Nuget 工作。一定还有一些其他的钩子。

# c# - 使用 SqlMembershipProvider 和自定义 SQL 数据库覆盖 ValidateUser()

> ID：12094295
> 
> 赞同：1
> 
> 时间：2012-08-23T14:45:07.287
> 
> 标签：c#, asp.net, sql-server, membership-provider

我希望使用它已经在我的网络上使用的 SQL 数据库，所以我编写了代码来覆盖`ValidateUser()`：

```
public override bool ValidateUser(string username, string password)
{
    return true;
} 
```

我已将其设置为返回 true，暂时不检查我的数据库，只是为了测试它的理论。

这就是我需要做的所有事情，还是还有更多工作要做才能与其他功能正常工作，例如存储用户名信息以便以后检索，或者我只是将这些信息存储在会话变量中？

一旦这个函数返回 true，它的用户是否有效地通过了身份验证？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-23T14:56:47.013

如果您已经从[`SqlmembershipProvider`](http://msdn.microsoft.com/en-us/library/system.web.security.sqlmembershipprovider.aspx).

如果你想覆盖[`ValidateUser`](http://msdn.microsoft.com/en-us/library/system.web.security.membership.validateuser.aspx)（例如记录无效的登录尝试），你不需要手动存储用户（他存储在数据库中并通过 cookie 识别）并且可以通过[`Membership.GetUser`](http://msdn.microsoft.com/en-us/library/system.web.security.membership.getuser.aspx).

例如：

```
public override bool ValidateUser(string username, string password)
{
    // check in database with SqlmembershipProvider
    bool isValid = base.ValidateUser(username, password);
    // get user from database
    var user = Membership.GetUser(username);
    if(isValid)
    {
        // ...
    }
    else{
        // log wrong attempt if you want
    }
    return isValid;
} 
```

# android - Android：从小部件打开意图，但其他人仍然打开

> ID：12094299
> 
> 赞同：0
> 
> 时间：2012-08-23T14:45:10.173
> 
> 标签：android, android-intent, android-widget

好的，所以从我的简单小部件中，我有一个按钮可以打开应用程序的主要意图。

```
Intent active = new Intent(context, Home.class);
        active.setClassName(Global.appclass, Global.appclass + Global.appEntryPoint); 
        active.putExtra("WidgetInput", mValue);

        PendingIntent actionPendingIntent = PendingIntent.getActivity(context,1, active, 0);
        remoteViews.setOnClickPendingIntent(R.id.btnWidgetValue, actionPendingIntent);
        appWidgetManager.updateAppWidget(thisWidget, remoteViews); 
```

这个意图是透明的，只有一个编辑文本框和确定按钮。当有人按下确定按钮时，我希望它返回到小部件。

但是，如果应用程序在用户按下小部件上的按钮之前正在运行，那么透视意图会加载到主应用程序的顶部，因此您可以在后台看到主应用程序屏幕。我如何关闭所有意图，除了我正在加载的意图。

希望我能解释清楚。

目的是为主屏幕小部件提供一个输入框，但它看起来就在主屏幕上方，没有其他任何东西，如果主应用程序没有在后台运行，它就可以完美运行。

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-24T07:33:40.743

好的，我需要做的就是为 Intent 使用这两个标志，这样可以确保新的 Intent 是唯一运行的。

```
active.setFlags(Intent.FLAG_ACTIVITY_CLEAR_TOP| Intent.FLAG_ACTIVITY_SINGLE_TOP); 
```

# jquery - 快速收缩时jQuery调整iframe停止

> ID：12094300
> 
> 赞同：2
> 
> 时间：2012-08-23T14:45:19.107
> 
> 标签：jquery, html, iframe, resizable

我正在使用 jQuery 中的 resizable() 函数来调整 div 的大小，该 div 包含一个 iframe，其宽度和高度设置为 100%（以填充 div 的空间）。我遇到的问题是，当我在任一方向向内调整大小（缩小 div）时 - 如果我将鼠标移动得太快，它会失去抓取（使 div 固定）并且不再调整大小，直到我将鼠标重新对准角落。

扩展 div 时效果很好，我可以通过快速移动鼠标来做到这一点，但是必须小心移动 div 以确保它不会卡住，这很烦人。

有任何想法吗？

非常感谢。

编辑：

我已将示例上传到我的网站： [http ://stefandunn.co.uk/concepts/drag&drop/](http://stefandunn.co.uk/concepts/drag&drop/)

只需单击“网页”小部件并调整其大小。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-23T14:51:50.647

过去我有同样的问题，我发现的解决方案/黑客是这样的：

```
$("yourObjectToResize").resizable({
    //containment: 'parent',
    minWidth: 400,
    minHeight: 200,
    start: function () {
        $(".widget_box").each(function (index, element) {
            var d = $('<div class="iframeCover" style="zindex:99;position:absolute;width:100%;top:0px;left:0px;height:' + $(element).height() + 'px"></div>');
            $(element).append(d);
        });
    },
    stop: function () {
        $('.iframeCover').remove();
    }
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-23T14:51:37.527

没有一个活生生的例子很难说，但我认为这是因为 iframe 本身中的其他悬停/鼠标事件。调整大小时，您可以尝试查看以下选项：

```
.preventDefault();
.stopPropagation();
.stopImmediatePropagation(); 
```

好的，快速浏览一下，我认为如果您使用`start:`事件 on `.resizeable()`，将网页 div 的 z-index 设置在 iframe 的 z-index 上方，然后将其放回`stop:`事件下方，您应该会很好。

嗯，我认为 z-index 不起作用，请在 .resizable() 的启动事件中尝试上面的选项；

如果以后有时间，我会尝试设置适当的测试并为您寻找。

# asp.net - 选择 SSL 证书时要知道什么

> ID：12094305
> 
> 赞同：2
> 
> 时间：2012-08-23T14:45:38.837
> 
> 标签：asp.net, ssl, ssl-certificate

我在市场上购买 SSL 证书/Web 托管服务。这是我购买并希望了解它们的第一个 SSL 证书。对于将其表单数据转储到 smtp 请求的站点。我希望对此传输进行加密。他们是任何人都可以给我的关于购买正确的 SSL 证书来完成类似事情的建议吗？
此外，如果有人对此有任何推荐阅读，我将不胜感激。

我的印象是我需要我之前问过的问题中的这个 SSL 证书。

[如何使用 SMTP 发送安全电子邮件](https://stackoverflow.com/questions/11681026/how-to-send-a-secure-e-mail-using-smtp)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-23T15:00:01.190

这完全取决于您要完成的工作。如果您只需要对流量进行 SSL 加密，那么诸如 RapidSSL 之类的较便宜的网站之一就可以了。这些不会检查您是否是您所说的人，而只是检查您是否有权访问要为其购买证书的域。如果您正在运行一个站点，您希望您的用户确定他们正在处理他们认为自己是谁，那么来自任何主要供应商的 EV SSL 产品都会将地址栏变成绿色。这些产品将需要额外的验证检查，并且需要更长的时间才能发布。

最后，许多主要 SSL 产品的转销商价格比零售价要便宜得多——通过转销商购买可能比直接从主要品牌之一购买更划算，即使您得到的价格完全相同产品。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-23T14:52:56.300

在获得 SSL 证书之前，您可能会发现一些值得阅读的信息。

[重要的事情，你应该在安装-an-ssl-certificate 之前知道](http://support.hostgator.com/articles/ssl-certificates/important-things-you-should-know-before-installing-an-ssl-certificate)

我试图将此放在评论中，但由于某种原因该选项不存在。无论如何，希望它有所帮助！

# ruby - 检索特定 SQL 行的问题

> ID：12094306
> 
> 赞同：0
> 
> 时间：2012-08-23T14:45:40.637
> 
> 标签：ruby, sqlite

我正在尝试检索数据库中的特定行，设置如下：

```
CREATE TABLE "Rules" ("credit" BOOL NOT NULL , "debit" BOOL NOT NULL , "product_code" INTEGER, "frequency" INTEGER, "percentage" FLOAT, "limit" FLOAT, "below" BOOL, "above" BOOL, "price" FLOAT) 
```

我的代码是：

```
class Process_Rules

    def initialize()
            @rules = Array.new() {Array.new()}
    end

    def process()

        db = SQLite3::Database.open "Checkout.sqlite"
        #############################################

        productRules = db.execute "SELECT product_code FROM Rules WHERE product_code NOT NULL"

        @rules.push([])

        for i in 0..productRules.length

            @rules[0].push(productRules[i])
        end

        #############################################

        limitRules = db.execute "SELECT limit FROM Rules" #ERRORSOME HERE, PREVIOUS SQL STATEMENT EXECUTES FINE

        #############################################

        db.close()
    end
end 
```

错误：

```
in 'initialize': near 'limit': syntax error (SQLite3::SQLException) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-23T14:52:48.620

由于 LIMIT 是关键字，因此您必须引用它：

```
SELECT "limit" FROM Rules 
```

# ruby-on-rails - 在 RBenv 设置上使用 Monit 管理 Resque 工作人员

> ID：12094311
> 
> 赞同：0
> 
> 时间：2012-08-23T14:45:51.163
> 
> 标签：ruby-on-rails, resque, monit, rbenv

我正在尝试设置 Monit 来管理 Resque 工作人员，但它无法开始说`/home/deployer/.rbenv/shims/bundle: line 4: exec: rbenv: not found` 我已经检查过它是否以`deployer`用户身份运行命令，如果我直接通过 SSH 复制和粘贴命令，一切正常。下面是我的监视器配置。谢谢！

```
检查进程 resque_worker_1
  使用 pidfile CURRENT_PATH/tmp/pids/resque_worker_1.pid
  启动程序 = "/usr/bin/env HOME=/home/deployer RACK_ENV=production PATH=/home/deployer/.rbenv/shims:/usr/local/bin:/usr/local/ruby/bin:/usr/ bin:/bin:$PATH /bin/sh -l -c 'cd CURRENT_PATH; bundle exec rake environment resque:work RAILS_ENV=production QUEUE=high,normal,low VERBOSE=1 PIDFILE=CURRENT_PATH/tmp/pids/resque_worker_1.pid >> CURRENT_PATH/log/resque_worker_.log 2>&1'"
    作为 uid 部署者和 gid 管理员
  stop program = "/bin/sh -c 'cd CURRENT_PATH && kill -9 $(cat tmp/pids/resque_worker_1.pid) && rm -f tmp/pids/resque_worker_1.pid; exit 0;'"
    作为 uid 部署者和 gid 管理员
  如果 totalmem 在 10 个周期内大于 300 MB 然后重新启动 # 吃掉内存？
  组 resque_workers

```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-05-12T16:23:13.653

我看到该主题是在 2012 年创建的，但我遇到了类似的问题，并且该主题在 google 中排名最高。

问题是具有受限环境的 monit 启动命令（env -i PATH=/bin:/usr/bin:/sbin:/usr/sbin /bin/sh 来模拟）。

要将 monit 与 rbenv 一起使用，您必须在 bundle exec 命令之前指定正确的路径。

**PATH=/home/[USER]/.rbenv/bin:/home/[USER]/.rbenv/shims:$PATH bundle exec ...**

独角兽的例子：

```
check process unicorn_dev with pidfile /home/wizville/app/dev.wizville.fr/shared/pids/unicorn.pid
  group dev
  start program =  "/bin/bash -c 'cd /home/wizville/app/dev.wizville.fr/current && PATH=/home/wizville/.rbenv/bin:/home/wizville/.rbenv/shims:$PATH bundle exec unicorn -c config/unicorn.rb -D'" as uid "wizville"
  stop program = "/bin/bash -c 'kill -s QUIT `cat /home/wizville/app/dev.wizville.fr/shared/pids/unicorn.pid`'"
  depends on mysql 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-27T22:00:14.433

我不确定这是否有帮助，但是在我的 monitrc 起始行中，我必须首先 su 到我想在其下运行的用户。我没有尝试使用 uid 和 gid 标志来知道它是否运作良好，所以这可能是一个答案。

我记得和你有同样的问题......一切都从命令行工作，但不是当 monit 会做它的事情。

例如，在我的 monitrc 中，我使用以下内容监控 arsendmail：

```
#arsendmail_rails3
# 监视和发送来自 rails 应用程序的邮件的守护进程
使用 pidfile /var/www/rak/log/ar_sendmail.pid 检查进程 ar_sendmail
启动程序“/bin/su - mike && /bin/bash -c 'cd /var/www/rak && ar_sendmail_rails3 -b1000 -d -e production'”
停止程序“/bin/ps -ef | /bin/grep ar_sendmail_rails3 | /bin/grep -v grep | /usr/bin/awk '{ /usr/bin/print $2}' | /usr/bin/xargs /bin /杀死 -9"

```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-01-14T11:09:09.443

这对我有用。

检查进程 app_resque_worker 与 pidfile <%= resque_pid%> start program = "/usr/bin/env HOME=/home/subcaster RACK_ENV=production PATH=/home/subcaster/.rvm/rubies/ruby-2.0.0-p247/ bin/ruby:/usr/local/bin:/usr/local/ruby/bin:/usr/bin:/bin:$PATH /bin/sh -l -c \'cd <%= current_path %>; bundle exec rake 环境 resque:work RAILS_ENV=production 背景=yes QUEUE=* PIDFILE=<%= resque_pid %>\'"

停止程序 = "kill -9 `cat <%= resque_pid%>` && rm -f <%= resque_pid%>"

如果 totalmem 在 10 个周期内大于 2000 MB，则重新启动

# wcf - 没有听众的区别 和一个

> ID：12094317
> 
> 赞同：0
> 
> 时间：2012-08-23T14:46:25.600
> 
> 标签：wcf, configuration, filter, resharper, trace

我已经看到很多示例，其中在配置文件中`<source>`设置了一个节点以`<System.Diagnostics>`进行跟踪，如下所示：

```
 <source name="System.ServiceModel" switchValue="Information, ActivityTracing" propagateActivity="true">
    <listeners>
      <clear/>
      <add name="SharedListener">
        <filter type="" />
      </add>
    </listeners>
  </source> 
```

`<filter>`这与删除节点有什么区别：

```
 <source name="System.ServiceModel" switchValue="Information, ActivityTracing" propagateActivity="true">
    <listeners>
      <clear/>
      <add name="SharedListener"/>
    </listeners>
  </source> 
```

如果是这样，是什么？`type`除了额外的代码行和 Resharper 的解决方案范围分析抱怨空属性外，这没什么大不了的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-29T16:38:01.400

没有区别，只是 XML 行数更少。

# perl - 如何为我的 Module::Starter 模块声明依赖项？

> ID：12094318
> 
> 赞同：2
> 
> 时间：2012-08-23T14:46:25.220
> 
> 标签：perl, cpan

我已经开始用`module-starter`. 现在，我发现它将依赖于一个非核心模块。我应该在哪里注意这种依赖关系？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-23T14:58:30.633

`module-starter``Makefile.PL`使用[ExtUtils::MakeMaker](http://search.cpan.org/perldoc?ExtUtils%3a%3aMakeMaker)的安装程序 ( ) 。您需要添加

```
PREREQ_PM => {
    'Some::Prereq' => 0,
}, 
```

到`WriteMakefile`其中的调用的参数列表。

# jquery - URL 未知字符添加到请求数据

> ID：12094319
> 
> 赞同：0
> 
> 时间：2012-08-23T14:46:29.077
> 
> 标签：jquery, http

我想将 URL 发送到服务器。URL 是加密的，服务器会识别它。不幸的是，一些字符被添加到 URL 中，这里是：/event/seq/1/onclick。这怎么发生的？我正在使用 JQuery，也许这是造成这种行为的原因？提前致谢。

[HTTPS：//xxx.xxx.xx：8445 / m4idat / JSP /远程/ remotelogin.jsf PARAMS = wMeqn％2BszV9PZd4petW％2B8cMbVHm34j5Q4e8qEGBFErqx8uIKiC0LezhJxWJzdYKUG4ISHkbgDGah0b1％2FpX14BXCsA％2FjMe4MJ3S7rL28HACgb0mfh8xqJDEubgbsWDZ2Wy8l2qAUHtQ2uyJ2TucbiUMZwhkiJYgy0ph9ciLLBaTfuI9Ax％2Bpv7bMs7MbqXIkbkb5GKmRTbjYV％2FUIQYUxbWsxg％3D％3D /事件/ SEQ / 1 /的onclick](https://xxx.xxx.xx:8445/m4idat/jsp/remote/remotelogin.jsf?params=wMeqn%2BszV9PZd4petW%2B8cMbVHm34j5Q4e8qEGBFErqx8uIKiC0LezhJxWJzdYKUG4ISHkbgDGah0b1%2FpX14BXCsA%2FjMe4MJ3S7rL28HACgb0mfh8xqJDEubgbsWDZ2Wy8l2qAUHtQ2uyJ2TucbiUMZwhkiJYgy0ph9ciLLBaTfuI9Ax%2Bpv7bMs7MbqXIkbkb5GKmRTbjYV%2FUIQYUxbWsxg%3D%3D/event/seq/1/onclick)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-24T21:58:58.083

您可以通过在 Firebug 或内置 Chrome Inspector 调试器中的有问题调用之前添加断点来准确查看 jquery（以及一般的 javascript）中发生的情况。然后一步一步地执行，同时观察感兴趣的变量的值。

您甚至可以在执行此操作时切换到非缩小的“调试”jquery 文件，以防万一您最终跟踪到 jquery 本身。

# html - 如何设计 input type="file" 按钮的样式？

> ID：12094321
> 
> 赞同：2
> 
> 时间：2012-08-23T14:46:30.997
> 
> 标签：html

如何设计`<input type="file">`按钮的样式？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-23T14:49:05.193

好容易！

通常，您不能像设置其他元素那样设置它的样式。解决方法确实存在，但没有一个是完全令人满意的。

见[http://www.quirksmode.org/dom/inputfile.html](http://www.quirksmode.org/dom/inputfile.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-23T14:49:15.663

你不能通过CSS。您需要使用隐藏文件上传显示的 JavaScript 覆盖。

以[http://www.quirksmode.org/dom/inputfile.html](http://www.quirksmode.org/dom/inputfile.html)为例

# ios - 区域监控

> ID：12094322
> 
> 赞同：0
> 
> 时间：2012-08-23T14:46:32.803
> 
> 标签：ios, ios5, regions

谁能告诉我iOS5区域监控功能有多准确。即当我进入一个区域时，它可以使用我的 GPS 位置进行监控吗？

另外，我可以在任何给定时间配置的最大区域数是多少。

谢谢你的帮助

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-21T07:16:21.987

对于 ios 5 来说如此准确：应该是从 1 到 150 m，ios 6：1 到 400m

每个应用程序的最大区域数 20。

通知不是即时的，还有其他的东西，比如缓冲区域等等。

根据苹果：

> 在 iOS 6 中，半径在 1 到 400 米之间的区域在 iPhone 4S 或更高版本的设备上效果更好。（在 iOS 5 中，半径在 1 到 150 米之间的区域在 iPhone 4S 和更新版本的设备上效果更好。）在这些设备上，应用程序可以期望在平均 3 到 5 分钟内收到相应的区域进入或区域退出通知，如果不早点。

[http://developer.apple.com/library/mac/#documentation/CoreLocation/Reference/CLLocationManager_Class/CLLocationManager/CLLocationManager.html#//apple_ref/occ/instm/CLLocationManager/startMonitoringForRegion](http://developer.apple.com/library/mac/#documentation/CoreLocation/Reference/CLLocationManager_Class/CLLocationManager/CLLocationManager.html#//apple_ref/occ/instm/CLLocationManager/startMonitoringForRegion)：

# mysql - 匹配 MySQL 中单词/后缀的相似/变体

> ID：12094326
> 
> 赞同：4
> 
> 时间：2012-08-23T14:46:55.107
> 
> 标签：mysql, sql, match

我如何匹配 MySQL 中单词的变体，例如搜索 accountancy 应该匹配 accountant、accountants、accounting 等。我在共享主机上，所以不能向 MySQL 添加任何功能，例如 levenshtein。

我想要类似于 Google在搜索“会计课程”时**如何****匹配“****会计课程**”和“会计课程”的内容。[例子](https://www.google.com/search?q=accopunty%20course&ie=utf-8&oe=utf-8&aq=t&rls=org.mozilla%3aen-GB%3aunofficial&client=firefox-a&channel=fflb#hl=en&sugexp=les;&gs_nf=1&tok=ftDNvSv6wwuE-qs40cy62w&pq=accouncay%20course&cp=18&gs_id=cp&xhr=t&q=accountant%20courses&pf=p&client=firefox-a&hs=X2F&rls=org.mozilla%3aen-GB%3aunofficial&channel=fflb&sclient=psy-ab&oq=accountant%20courses&gs_l=&pbx=1&bav=on.2,or.r_gc.r_pw.r_qf.&fp=505ac51441bb0ee9&biw=1050&bih=1534)。

 ****我的服务器语言是 php，如果它只能在那里实现而不是在 SQL 中实现的话。

目前的声明如下。

```
SELECT 
  pjs.title,
  MATCH (pjs.title) AGAINST ('accountancy' IN NATURAL LANGUAGE MODE WITH QUERY EXPANSION) AS rel1,
  MATCH (pjs.description) AGAINST ('accountancy' IN NATURAL LANGUAGE MODE WITH QUERY EXPANSION) AS rel2,
  MATCH (
    pjs.benefits,
    pjs.experienceRequirements,
    pjs.incentives,
    pjs.qualifications,
    pjs.responsibilities,
    pjs.skills
  ) AGAINST ('accountancy' IN NATURAL LANGUAGE MODE WITH QUERY EXPANSION) AS rel3
FROM
  pxl_jobsearch AS pjs 
ORDER BY (rel1 * 5) + (rel2 * 1.5) + (rel3) DESC; 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-11T07:44:30.613

MySQL 不擅长全文搜索，您可能希望使用其他引擎。我最喜欢的是 Sphinx ( [http://sphinxsearch.com/](http://sphinxsearch.com/) )，但也有其他的。大多数这些支持都是开箱即用的。

如果您有大型表并且要使用词干提取，那么 MySQL 的性能可能会非常糟糕。

如果你不能使用 Sphinx，看看这个 php 脚本[http://tartarus.org/~martin/PorterStemmer/php.txt](http://tartarus.org/~martin/PorterStemmer/php.txt)

有了这个，您可以使用词干提取和词干搜索。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-07T15:41:05.047

MySQL的`SOUNDEX()`功能非常接近。[在此处](http://dev.mysql.com/doc/refman/5.0/en/string-functions.html#function_soundex)阅读更多相关信息。

**例子：**

```
create table test(id int auto_increment, a varchar(255), primary key(id));
insert into test(a) values
('accountancy'),
('accountant'),
('accountants'),
('accounting'),
('accountingc'),
('becounting'),
('asdf'),
('this is a test');

select 
test.*,
SOUNDEX(a),
SOUNDEX('accountancy')
FROM
test 
WHERE a SOUNDS LIKE 'accountancy'; 
```

如果这不能解决它，那么 levenshtein 算法就是要走的路。与您的数据库管理员交谈，他允许您创建函数。如果他这样做了，这就是解决方案（我没有编写函数，归功于匿名）：

```
DELIMITER //
CREATE FUNCTION levenshtein( s1 VARCHAR(255), s2 VARCHAR(255) )
RETURNS INT
DETERMINISTIC
BEGIN
DECLARE s1_len, s2_len, i, j, c, c_temp, cost INT;
DECLARE s1_char CHAR;
-- max strlen=255
DECLARE cv0, cv1 VARBINARY(256);
SET s1_len = CHAR_LENGTH(s1), s2_len = CHAR_LENGTH(s2), cv1 = 0x00, j = 1, i = 1, c = 0;
IF s1 = s2 THEN
RETURN 0;
ELSEIF s1_len = 0 THEN
RETURN s2_len;
ELSEIF s2_len = 0 THEN
RETURN s1_len;
ELSE
WHILE j <= s2_len DO
SET cv1 = CONCAT(cv1, UNHEX(HEX(j))), j = j + 1;
END WHILE;
WHILE i <= s1_len DO
SET s1_char = SUBSTRING(s1, i, 1), c = i, cv0 = UNHEX(HEX(i)), j = 1;
WHILE j <= s2_len DO
SET c = c + 1;
IF s1_char = SUBSTRING(s2, j, 1) THEN
SET cost = 0; ELSE SET cost = 1;
END IF;
SET c_temp = CONV(HEX(SUBSTRING(cv1, j, 1)), 16, 10) + cost;
IF c > c_temp THEN SET c = c_temp; END IF;
SET c_temp = CONV(HEX(SUBSTRING(cv1, j+1, 1)), 16, 10) + 1;
IF c > c_temp THEN
SET c = c_temp;
END IF;
SET cv0 = CONCAT(cv0, UNHEX(HEX(c))), j = j + 1;
END WHILE;
SET cv1 = cv0, i = i + 1;
END WHILE;
END IF;
RETURN c;
END// 
```

> 再次测试数据：

```
create table leven(id int auto_increment, a varchar(255), primary key(id));
insert into leven(a) values
('accountancy'),
('accountant'),
('accountants'),
('accounting'),
('accountingc'),
('becounting'),
('asdf'),
('this is a test')
;

select
leven.*,
levenshtein(leven.a, 'accountancy')
from
leven
where levenshtein(leven.a, 'accountancy') <= 3 /*or any value you like*/ 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-07T16:03:42.600

搜索引擎通过实施一种称为[词干提取](http://en.wikipedia.org/wiki/Stemming)的文本处理技术来做到这一点。有很多库可以为您实现这一点，我个人有[Snowball stemmer](http://snowball.tartarus.org/)，它做得很好。

我对 MySql 的全文搜索功能不够熟悉，但您可以尝试将词干算法应用于搜索词。对于您的“会计课程”示例，Snowball 词干分析器返回“帐户课程”。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-23T14:54:39.093

我不太了解`MATCH`，当我想选择具有变化的列时，我执行以下操作

```
SELECT pjs.title
FROM pxl_jobsearch AS pjs
WHERE pjs.title LIKE 'account%' 
```

我主要在 SQL Server 中工作，但也做一些 MySQL。我想这也适用于 MySQL。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-07T15:53:05.253

您可以使用 SQL `SOUNDEX()`，这对您的需求非常有用：它搜索**听起来相同**的单词，而不是语法上接近的单词。您可以使用两种非常相似的方法。

*   识别常见的后缀并将它们替换`%`为`LIKE`子句中的 a：使用您的示例，`accountancy`将变为`account%`.
*   编写一个包含您需要的所有变体的“字典”，并将其用于 PHP（`stristr()`函数）：因此，`accountancy`将生成一个类似于`WHERE value='accountancy' or value='accountant' or value='accountancies'`.****

# multithreading - 使用 ManualResetEvent 进行 MSTest 多线程 - 尝试访问未加载的 AppDomain 错误

> ID：12094328
> 
> 赞同：4
> 
> 时间：2012-08-23T14:46:59.883
> 
> 标签：multithreading, visual-studio, mstest, appdomain

我正在运行一个单元测试来测试涉及 ManualResetEvents 的功能。

实际的单元测试（和真实的代码）本身运行成功。但是，在单元测试完成后，我得到一个**AppDomainUnloadedException was unhandled** - **Attempted to access an unloaded AppDomain**错误。

起初我认为这可能是由于其他一些代码，但经过进一步调查，它似乎与这里的多线程使用有关？

我尝试了一些我发现的建议，例如将执行模式设置为MTA等，但错误仍然存​​在。

有没有办法解决这个问题，或者至少在成功的单元测试运行结束时抑制这个错误发生？

# widget - 寻找与 iGoogle 的默认原生 RSS 小工具相当的现有 iGoogle/OpenSocial 小工具

> ID：12094329
> 
> 赞同：0
> 
> 时间：2012-08-23T14:47:04.073
> 
> 标签：widget, rss, opensocial

iGoogle 的标准 RSS 提要小工具不是 OpenSocial，因此不能嵌入到其他网站中。所以我希望在某个地方已经有替代解决方案可用。

在[iGoogle 的小工具列表中](http://www.google.com/ig/directory?synd=open)，还有其他 RSS 小工具，但它们似乎都没有谷歌默认的 iGoogle 原生工具那么好。

标准小工具与大多数其他小工具的主要区别在于能够通过单击故事旁边的箭头来扩展标题并查看更多文章。还有一个干净的布局。

它必须是与 OpenSocial 兼容的小部件/小工具。

（我知道 iGoogle 将关闭，这与我的需求无关。）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-04T13:28:51.133

`MyYahoo`：在设置速度、“正常工作”以及面向普通用户或新手用户的小部件方面，总体上是 iGoogle 的最佳替代品。似乎不导入 opml，但可以手动支持 rss 提要可以设置与 igoogle 或 netvibes 相同的 rss 提要最多支持 9 个选项卡。每个标签都有一个广告 只支持雅虎搜索 没有维基百科搜索小部件 支持在雅虎提供的小部件中显示股票投资组合报价相同的。可以使用上传的图片作为壁纸。可以使背景透明。可以分别为主题的所有部分设置背景和文本颜色。有颜色的光谱选择器。无法输入十六进制代码。用于配置主题的非常用户友好的界面。

[这是如何开始使用它](http://developer.yahoo.com/myyahoo/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-27T18:08:12.257

尝试[**使用 Skim.Me**](http://skim.me)作为嵌入 iGoogle 的 RSS 小工具的替代方案

# knockout.js - 如何使用敲除为视图模型动态生成 html 模板

> ID：12094332
> 
> 赞同：0
> 
> 时间：2012-08-23T14:47:19.803
> 
> 标签：knockout.js

我是淘汰框架的新手。

我有这个视图模型

```
 {"PagesList":
[{"QuestionList":
    [
        {"ParentQid":191,"QuestionId":192,"QuestionText":"Enter Question Text","QuestionType":2,"OptionsList":
        [
            {"QuestionId":192,"OptionId":95,"OptionText":"Option1"},
            {"QuestionId":192,"OptionId":96,"OptionText":"Option2"}
        ]
        },
        {"ParentQid":191,"QuestionId":193,"QuestionText":"Enter Question Text","QuestionType":2,"OptionsList":
        [
            {"QuestionId":193,"OptionId":97,"OptionText":"Option1"},
            {"QuestionId":193,"OptionId":98,"OptionText":"Option2"}
        ]
        },
        {"ParentQid":191,"QuestionId":194,"QuestionText":"Enter Question Text","QuestionType":2,"OptionsList":
        [
            {"QuestionId":194,"OptionId":99,"OptionText":"Option1"},
            {"QuestionId":194,"OptionId":100,"OptionText":"Option2"}
        ]
        }
    ],"PageId":191,"PageName":0
}]
  } 
```

我想生成一个完全一样的 html 模板。

```
 <div>
<div id="191" type="page">
    <div id="192" type="question" parentqid="191">
        <label>
            Enter ur Question Text</label>
        <div>
            <div id="95" questionid="192">
                <input type="radio" id="r_95" />
                <label for="r_95">
                    Option1</label>
            </div>
            <div id="96" questionid="192">
                <input type="radio" id="r_96" />
                <label for="r_96">
                    Option1</label>
            </div>
        </div>
    </div>
    <div id="193" type="question" parentqid="191">
        <label>
            Enter ur Question Text</label>
        <div>
            <div id="97" questionid="193">
                <input type="radio" id="r_97" />
                <label for="r_97">
                    Option1</label>
            </div>
            <div id="98" questionid="193">
                <input type="radio" id="r_98" />
                <label for="r_98">
                    Option1</label>
            </div>
        </div>
    </div>
    <div id="194" type="question" parentqid="191">
        <label>
            Enter ur Question Text</label>
        <div>
            <div id="99" questionid="194">
                <input type="radio" id="r_99" />
                <label for="r_99">
                    Option1</label>
            </div>
            <div id="100" questionid="194">
                <input type="radio" id="r_100" />
                <label for="r_100">
                    Option1</label>
            </div>
        </div>
       </div>
    </div>
  </div> 
```

我正在尝试这样。ajax 调用是

```
 $.ajax({
    url: "/authorsurvey/LoadSurveyQuestions?SurveyId=151",
    type: 'post',
    success: function (result) {
        ViewModel = ko.mapping.fromJS(result); 
        ko.applyBindings(ViewModel, document.getElementById('sMain'));
      }
    }); 
```

和模板 html 是

```
 <script type="text/x-jquery-tmpl" id="layoutpages">
        <div data-bind="attr: {id: PageId }" type="pages">

    <div class="questiontype"  style="height: 40px; padding-top: 4px;">
        <label class="questiontype" data-bind="attr: {id: PageId()+'_plabel' }" >Add New Question</label>
    </div>
    <div   data-bind="template: {name:'qtp2', foreach: QuestionList}">
    </div>
    </div>
  </script>
  <script type="text/x-jquery-tmpl" id="qtp2">
 <div data-bind="attr: {id: QuestionId }" type="pages">

    <div class="questiontype"  style="height: 40px; padding-top: 4px;">
        <label class="questiontype" data-bind="attr: {id: QuestionId()+'_plabel',text:QuestionText()}" ></label>
    </div>
   </div>
 </script>

<div id="sMain">
   <div id="pages" data-bind="template: {name:'layoutpages', foreach: PagesList}">
   </div>
 </div> 
```

有什么捷径可以做到吗？

谢谢你的帮助 ？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-27T14:12:36.640

尝试将文本绑定移到 attr 绑定之外。

```
 <label data-bind="attr : {text: QuestionText()}" ></label> <!--does not work -->
  <label data-bind="text: QuestionText"></label> <!--does work --> 
```

有关示例，请参见[http://jsfiddle.net/dtiemstra/wRg88/11/](http://jsfiddle.net/dtiemstra/wRg88/11/)

# javascript - 如何制作asp文本框的按键事件？

> ID：12094336
> 
> 赞同：7
> 
> 时间：2012-08-23T14:47:34.493
> 
> 标签：javascript, jquery, asp.net, keypress

大家好，我正在编写各种 asp 文本框控件的计算。我希望通过按键事件完成我的计算。下面的代码我正在使用但不工作

.aspx 页面

```
<asp:TextBox ID="txtMaintCost onkeypress="calculateFinanceDetail(); return false;" runat="server"></asp:TextBox> 
```

.js 文件

```
function calculateFinanceDetail() {
            var txtMaintCost = $('input[id$=txtMaintCost]').val();
            var txtInstallCost = $('input[id$=txtInstallCost]').val();
            var txtFreightCost = $('input[id$=txtFreightCost]').val();
} 
```

它没有在按键事件上调用javascript函数......如果有人有任何想法，请帮助我......

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-08-23T15:04:22.730

缺少`"`文本框 id 的末尾。

改变

```
<asp:TextBox ID="txtMaintCost onkeypress="calculateFinanceDetail(); return false;" runat="server"></asp:TextBox> 
```

到

```
<asp:TextBox ID="txtMaintCost" onkeypress="calculateFinanceDetail(); return false;" runat="server"></asp:TextBox> 
```

尝试使用服务器控件的 ClientID。您可能没有用于服务器端控件的[静态 ID 。](http://msdn.microsoft.com/en-us/library/1d04y8ss.aspx)如果您有固定的 ID，则不必使用通配符。

```
function calculateFinanceDetail() {
      var txtMaintCost = $('input[id=<%=txtMaintCost.ClientID%>]').val();
      var txtInstallCost = $('input[id=<%=txtInstallCost.ClientID%>]').val();
      var txtFreightCost = $('input[id=<%=txtFreightCost.ClientID%>]').val();
} 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-08-23T14:51:33.783

您在这里缺少引号`ID="txtMaintCost onkeypress="`，应该是`ID="txtMaintCost" "onkeypress="`

# java - Java 数组解析

> ID：12094338
> 
> 赞同：0
> 
> 时间：2012-08-23T14:47:35.063
> 
> 标签：java, arrays, parsing

我已将文件读入数组，但想知道如何解析该数组中的某些值。

我的代码：

```
 ...
        try{
             ...
             String strLine;
             String delims= "[ ]+";
             //parsing it
             ArrayList parsedit = new ArrayList();
             while((strLine=br.readLine())!=null){
                 System.out.println("Being read:");
                 System.out.println(strLine);
                 parsedit.add(strLine.split(delims));
             }
             System.out.println("Length:" + parsedit.size());
             in.close();   
             ... 
```

我正在阅读的文件是这样的：

```
a b c d e f g
1 2 3 4 5 6 7
1 4 5 6 3 5 7
1 4 6 7 3 2 5 
```

这使得输出如下：

```
How many files will be input? 1
Hey, please write the full path of the input file number1! 
/home/User/Da/HA/file.doc
Being read:
a b c d e f g 
Being read:
1 2 3 4 5 6 7 
...
Length:4 
```

我想解析出这些数据，只剩下第一个和第五个值，这样它就会变成这样：

```
a e
1 5 
```

有没有人有关于如何去做的建议？编辑：根据一些建议，我将代码更改为：

```
public static void main(String[] args) {
        System.out.print("How many files will be input? ");
        Scanner readIn=new Scanner(System.in);
        int input=readIn.nextInt();
        int i=1;
        while(i<=input){
            System.out.println("Hey, please write the full path of the input file number" + i + "! ");
            Scanner fIn=new Scanner(System.in);
            String fileinput=fIn.nextLine();
          try{
             FileInputStream fstream=new FileInputStream(fileinput);
             DataInputStream in=new DataInputStream(fstream);
             BufferedReader br=new BufferedReader(new InputStreamReader(in));
             String strLine;
             String delims= "[ ]+";
             ArrayList parsedit = new ArrayList();
             while((strLine=br.readLine())!=null){
                 System.out.println("Being read:");
                 System.out.println(strLine);
                 parsedit.add(strLine.split(delims));
             }
             String[] splits=strLine.split(delims);
             System.out.println("Length:" + splits.length);
             in.close();   
        }
        catch(Exception e){
            System.err.println("Error: " + e.getMessage());
        }
        i++;
    }
  }
} 
```

这不会返回任何错误，但它似乎并没有完全一样。我错过了什么愚蠢的东西吗？输出是这样的：

```
How many files will be input? 1
Hey, please write the full path of the input file number1! 
/home/User/Da/HA/file.doc
Being read:
a b c d e f g 
Being read:
1 2 3 4 5 6 7 
... 
```

但是尽管我有一条线告诉我数组长度，但它从未被打印出来，这告诉我我最终打破的比我修复的要多。你知道我可能会错过/忘记什么吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-23T14:51:47.643

该`split()`函数返回一个字符串数组，表示从原始字符串获得的标记。

所以，你想要的是只保留第一个和第 5 个令牌（splits[0] & splits[4]）：

```
 String[] splits = strLine.split(delims); 
  //use the splits[0] & splits[4] to create the Strings you want 
```

关于您的更新，请替换：

```
 while((strLine=br.readLine())!=null){
             System.out.println("Being read:");
             System.out.println(strLine);
             parsedit.add(strLine.split(delims));
 } 
```

有了这个：

```
 while((strLine=br.readLine())!=null){
             System.out.println("Being read:");
             String splits[] = strLine.split(delims);
             System.out.println(splits[0]+" "+splits[4]);
             parsedit.add(splits);
 } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-23T14:51:37.610

你可以试试这个

```
String[] line = s.split("\\s+"); 
```

这样，您的所有元素都将按顺序存储在数组中`line`。这将允许您访问您想要的任何元素。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-23T14:52:36.560

您只需要从返回的 中获取第一个和第五个`String[]`值`strLine.split(delims)`。

（我假设您知道您在当前代码中正在做什么。您假设每一行将包含相同数量的“列”，由至少 1 个空格字符分隔。无论如何，这是一个公平的假设。）

# php - 每个页面主题的不同侧边栏

> ID：12094339
> 
> 赞同：0
> 
> 时间：2012-08-23T14:47:36.740
> 
> 标签：php, navigation, sidebar

开始：不是 Wordpress！只是普通的旧 PHP。这是我正在尝试做的事情：

我的页面顶部有一个水平导航栏，其中包含“主页、关于、信息、联系方式”链接

大多数页面还有一个垂直导航栏，侧边栏。如果我在主页上，则不需要显示侧边栏。如果我在“关于”页面上，则必须有一个带有各种其他主题的侧边栏。联系页面需要显示一个带有路线描述和联系表格链接等的侧边栏。

我正在考虑使用 $GLOBAL 变量来实现这一点，并将诸如`$GLOBAL['sidebar] = 'home'` `$GLOBAL['sidebar'] = 'contact'`etc... 之类的东西放在每一页的顶部。在将呈现我的侧边栏的 PHP 文件中，我将使用 if 结构来查看需要呈现的侧边栏。但是我一直被教导使用全局变量是错误的，不应该使用。在那之后，我的思绪转移到了 $SESSION 变量上，但这实际上是完全相同的，但有一些额外的问题，比如 session_start() 等。

我是自学 PHP 的，所以我不知道什么可以最好地用来解决这个特定的（我认为很常见的）“问题”。任何有关此事的见解将不胜感激。谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-23T14:58:00.073

解决方案在很大程度上取决于您已经设置代码结构的方式，但更笼统地说，我通常这样做的方式是：

将侧边栏作为模板的一部分包含在每个页面上。

按照以下方式设置侧边栏：

```
<?php
if (sizeof($sidebarModules)>0) {
  ?>
  <div id="sidebar">
  <?php
    if (in_array('contact',$sidebarModules)) {
    // display contact form
  }
  if (in_array('route',$sidebarModules)) {
    // display route description
  }
  if (in_array('login',$sidebarModules)) {
    // display login
  }
  ?>
  <\div>
  <?php
}
?> 
```

然后在每一页的顶部确保你定义了数组`$sidebarModules`。就像是：

```
<?php
  $sidebarModules = array(
    'contact',
    'login',
    'description'
  );
?> 
```

我不确定这是否是最好的解决方案，但过去它对我来说效果很好。

编辑：

或者如果您的模板以标准约定命名，则可以更有效地执行此操作，例如：

```
<?php
if (sizeof($sidebarModules)>0) {
  ?>
  <div id="sidebar">
  <?php
    foreach ($sidebarModules as $module) { // loop round all modules
      include($module.'_tpl.php'); // include module template
    }
  ?>
  <\div>
  <?php
}
?> 
```

# jquery - jquery .post 事件增量触发

> ID：12094341
> 
> 赞同：0
> 
> 时间：2012-08-23T14:47:38.357
> 
> 标签：jquery, ajax, forms, .post

我正在尝试在我的网站上建立一个评论系统。我管理 ajax 部分，评论从表单提交到调用的 php 文件，然后将数据存储在 mysql db 中。存储后的数据被附加到已经存在的评论中。

我遇到的问题是，如果您在同一页面的前一条评论之后发表另一条评论，则下一条评论会添加两次。再做一次，下一个被添加三遍，依此类推。我想我在某个地方弄错了 jquery，但似乎找不到它。

这是我正在使用的表格：

```
 <form class="short style" id="postnewscomment" name="postnewscomment" onsubmit="javascript:postnewscomments();">
    <textarea style="width:95%;" name="commenttext" required data-required="true" placeholder="Uw comment" /></textarea>
    <input type="hidden" name="task" value="addcomment" />
    <input type="hidden" name="postername" value="<? echo $_SESSION['user_id']; ?>" />
    <input type="hidden" name="newsid" value="<? echo $newsid; ?>" />
    <div class="button">
        <button value="postnews" name="Submit" type="submit">Add Comment</button>
    </div>
    </form> 
```

这是由表单调用的我的 jquery 代码：

```
function postnewscomments() {
    $("#postnewscomment").submit(function(e){    
        e.preventDefault();  
    var hasError = false;
        var url = "postnewscomments.php";
    var texttopost =    "#postnewscomment"; 
    if(hasError == false) {
        $.post(url, $(texttopost).serialize() ,function(data) {
            $(data).hide().appendTo("#newscomment").fadeIn(1000);
        // code to reset form values to empty
                $( '#postnewscomment' ).each(function(){
                this.reset();
        });
             });
    }
     return false;
     });
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-23T14:51:36.700

看`submit()`方法：

> 将事件处理程序绑定到“提交”JavaScript 事件，或在元素上触发该事件。

所以它应该只被调用一次（当页面加载时）而不是每次提交。

[http://api.jquery.com/submit/](http://api.jquery.com/submit/)

# zeromq - 关于面向消息的中间件的图表/表格

> ID：12094342
> 
> 赞同：4
> 
> 时间：2012-08-23T14:47:40.757
> 
> 标签：zeromq, tibco, tibco-ems, tibco-rv

你们知道一个图表或dable，它可以给出一个简短而简洁但仍然完整且相对最新的现有协议及其细节的视图？（即：ZeroMQ、Rendez-Vous、EMS、...所有这些！:)）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-02-24T17:09:55.137

这只是关于开源解决方案：http: [//blog.x-aeon.com/2013/04/10/a-quick-message-queue-benchmark-activemq-rabbitmq-hornetq-qpid-apollo/](http://blog.x-aeon.com/2013/04/10/a-quick-message-queue-benchmark-activemq-rabbitmq-hornetq-qpid-apollo/)

不喜欢商业的！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-02-13T09:44:01.963

面向消息的中间件是一个很大的话题，可能有超过 50-100 种不同的实现。不幸的是，每个人整理一份清单都有一个议程（比如以最好的方式展示他的产品或他最喜欢的产品）。但是，为了简化您的搜索，问自己以下问题可能会有所帮助：

*   JMS 与否？（EMS 是，Rendezvous 否）
*   无经纪人？（ZeroMQ 是，其他没有）
*   免费还是商业？

一旦您了解更多，请浏览一些博客，例如：[https](https://bravenewgeek.com/dissecting-message-queues/) ://bravenewgeek.com/dissecting-message-queues/，http : [//supercoderz.in/amqp-zeromq-jms-tibco-rv-and-so- on-which-messaging-system-to-use/](http://supercoderz.in/amqp-zeromq-jms-tibco-rv-and-so-on-which-messaging-system-to-use/)或 checkout[您使用哪种 JMS 实现？](https://stackoverflow.com/questions/123817/which-jms-implementation-do-you-use)- 我的议程;-)

# css - 避免嵌套滚动条

> ID：12094343
> 
> 赞同：0
> 
> 时间：2012-08-23T14:47:47.073
> 
> 标签：css

我希望有人能推荐一个我实际上从未见过的用户界面。

我有很多数据需要显示在固定高度的滚动 div 中，为了使其更可口，客户希望子数据显示在可以展开和关闭的手风琴 div 中。

问题是子数据也可能很长，并且需要一个固定的标题，以便用户了解每列中的内容。请看小提琴：http: [//jsfiddle.net/J5qFA/34/](http://jsfiddle.net/J5qFA/34/)

您将不得不稍微发挥您的想象力，但将灰色条视为可扩展 div 上的标题，标记为“已扩展”的标题是已单击的标题，显示其内容。（请注意，展开一个标题会关闭任何打开的 div。）

黑条是数据标题，黄色内容是数据。

有没有办法让黑条“粘”在滚动窗口的顶部，这样当用户向下导航黄色内容时它总是可见的？请注意，它不应出现在任何灰色标题的顶部，因此如果用户向下滚动以查看更多黄色数据，则只需要粘在滚动窗口的顶部即可。

如果没有，是否有更好的方法来确保黑色标题始终在黄色数据上方可见？

哦，显然我不想嵌套滚动条！

希望这是有道理的！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-23T14:57:38.280

给黄色数据div一个固定的高度和overflow-y:auto。

[http://jsfiddle.net/J5qFA/35/](http://jsfiddle.net/J5qFA/35/)

我还删除了溢出：在外部滚动

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-11T13:28:52.773

好吧，不知道是否有更好的方法，但一种方法（我会想到）是使用[jQuery scroll](http://api.jquery.com/scroll/)，而不是根据屏幕的位置使用 `window.pageYOffset`and附加黑条类`window.scrollTo(0, y)`。

我猜你可能有3种情况：

*   黑条位于屏幕顶部下方 - 照常显示。
*   黑条在屏幕顶部上方，它的 div 是屏幕 - 使用`position: fixed;`
*   黑条在上面以及它的 div - 与 1 相同。

抱歉，但我现在没有时间编写代码，但如果您选择这样做，我将很乐意提供帮助。

无论如何祝你好运！

# map - 谷歌融合强度图：俄罗斯的价值/着色不起作用

> ID：12094344
> 
> 赞同：-1
> 
> 时间：2012-08-23T14:47:51.100
> 
> 标签：map, geocoding, google-fusion-tables

我正在尝试使用 Google Fusion Tables 创建强度图。大多数国家/地区的值显示正常，但出于某种原因，俄罗斯的值没有出现在“世界”视图中。当我将视图切换到 Region: 'Russian Federation' 时，它工作正常（尽管颜色不正确）。

我尝试从俄罗斯更改为俄罗斯联邦、RU 等，但我一直遇到同样的问题。

谢谢你的建议

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-24T15:08:42.923

如[文档中所述](http://support.google.com/fusiontables/bin/answer.py?hl=en&answer=173438)，您必须使用[两位数的国家/地区代码](http://en.wikipedia.org/wiki/ISO_3166-1_alpha-2)才能使强度图起作用。

我复制了您的表格并用“RU”替换了“Russia”，然后它就可以工作了：

*   [地图](https://www.google.com/fusiontables/embedviz?viz=GVIZ&t=MAP&gco_region=world&gco_dataMode=regions&containerId=gviz_canvas&q=select%20gvizcountry%28col0%29,%20col1,%20col0%20from%201yroo2IdDs41DlsgLHKCAVGXfaIpstXWXMiNKcvk&qrs=%20where%20gvizcountry%28col0%29%20%3E=%20&qre=%20and%20gvizcountry%28col0%29%20%3C=%20&qe=%20limit%2043&width=500&height=300)
*   [桌子](https://www.google.com/fusiontables/DataSource?docid=1yroo2IdDs41DlsgLHKCAVGXfaIpstXWXMiNKcvk)

# javascript - 部分不工作的主干 JST 模板

> ID：12094346
> 
> 赞同：0
> 
> 时间：2012-08-23T14:47:54.100
> 
> 标签：javascript, backbone.js, underscore.js

[我阅读了关于主干模式](http://ricostacruz.com/backbone-patterns/)中的 JST 模板和部分，并试图在我的项目中实现。
这是我的模板代码：我正在使用带有 Underscore js 和 CoffeeScript 的 Backbone js -

```
App.Abc.JST = {}
App.Abc.JST['person/contact'] = _.template '''
  <h4>Something</h4><a href="dev.app.com/<%= itemTemplate() %>"><%= itemTemplate() %></a>
  <b><%= itemTemplate() %></b>
'''

itemTemplate: _.template '''
  Common Code here
''' 
```

我收到错误：`itemTemplate is not defined`。
难道我做错了什么？。谢谢你的时间。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-06T07:54:42.803

无论如何，我最终会这样做：

```
App.Abc.JST = {}
App.Abc.JST['person/contact'] = _.template '''
  <h4>Something</h4><a href="dev.app.com/<%= App.Abc.JST['itemTemplate']() %>"><%= App.Abc.JST['itemTemplate']() %></a>
  <b><%= App.Abc.JST['itemTemplate']() %></b>
'''

App.Abc.JST['itemTemplate']: _.template '''
  Common Code here
''' 
```

它工作得很好，我猜将 JST 与 Partials 混合会导致问题。

# sql-server - 一对零或一关系 ASP.NET MVC

> ID：12094358
> 
> 赞同：0
> 
> 时间：2012-08-23T14:48:28.217
> 
> 标签：sql-server, entity-framework, relationship

我有一个带有 EF 的 ASP.NET MVC 4 应用程序，但我没有使用 CodeFirst。我希望我的 SQL 表看起来像这样：

订单 1 ---- 0...1 OrdersWithShipment

```
CREATE TABLE Orders (
OrderId int NOT NULL IDENTITY(1,1),
OrderDate date NOT NULL,
OrderNo int NOT NULL,
ShipmentId Int NULL
CONSTRAINT [Orders_PK] PRIMARY KEY CLUSTERED 
(
   [OrderId] ASC
))

CREATE TABLE OrdersWithShipment (
ShipmentId int NOT NULL IDENTITY(1,1),
OrderId int NULL,
ShipmentDate date NOT NULL 
CONSTRAINT [OrdersWithShipment_PK] PRIMARY KEY CLUSTERED 
(
[ShipmentId] ASC
)) 
```

**问**：我需要做什么（在 SQL 和 EF 中）才能建立 1 --- 0...1 关系？

编辑：我可以使用唯一的过滤索引[链接吗](https://stackoverflow.com/questions/8116409/enforcing-zero-or-one-to-one-relationship-on-sql-database)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-23T14:58:13.863

EF 不支持唯一键（主键除外），因此您不会通过此设置实现一对一的关系。如果你想要一对一的关系，你必须从表和表中删除列，`OrderId`并将你的外键约束直接放在表中。这将为 EF 建立一对一的关系，其中是与 的关系的主表。`OrderWithShipment``ShipmentId``Orders``ShipmentId``OrdersWithShipment``Orders``OrdersWithShipment`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-23T15:08:57.313

这是`1..0-1`在 SQL 中定义的方式（`ShipmentId`从两个表中删除）：

```
CREATE TABLE Orders (
OrderId int NOT NULL IDENTITY(1,1),
OrderDate date NOT NULL,
OrderNo int NOT NULL,
CONSTRAINT [Orders_PK] PRIMARY KEY CLUSTERED 
  ( [OrderId] ASC )
) ;

CREATE TABLE OrdersWithShipment (
OrderId int NOT NULL,
ShipmentDate date NOT NULL, 
CONSTRAINT [OrdersWithShipment_PK] 
  PRIMARY KEY CLUSTERED 
  ( [OrderId] ASC ),
CONSTRAINT [Orders_OrdersWithShipment_FK] 
  FOREIGN KEY 
    ( [OrderId] )
  REFERENCES [Orders] 
    ( [OrderId] )
) ; 
```

# asp.net - CSRF 对非表单发布请求的保护

> ID：12094361
> 
> 赞同：0
> 
> 时间：2012-08-23T14:48:36.990
> 
> 标签：asp.net, csrf

在隐藏的表单字段中实现 CSRF 令牌是 CSRF 对表单发布请求的标准保护。

但是，您将如何为 GET 请求实现此功能？或者 ajax 请求 POST json 数据而不是 x-www-form-urlencoded 请求正文？这些类型的事情都是根据具体情况处理的吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-15T20:03:47.323

[OWASP](https://www.owasp.org/index.php/Cross-Site_Request_Forgery_%28CSRF%29_Prevention_Cheat_Sheet)关于 CSRF 和 GET 请求这样说：

> 理想的解决方案是仅在 POST 请求中包含 CSRF 令牌，并修改具有状态更改影响的服务器端操作以仅响应 POST 请求。这实际上是 RFC 2616 对 GET 请求的要求。如果保证敏感的服务器端操作只响应 POST 请求，则无需在 GET 请求中包含令牌。

此外，OWASP 指出：

> 此控件的许多实现包括 GET (URL) 请求中的质询令牌 [...]**虽然此控件确实有助于降低 CSRF 攻击的风险，但唯一的每个会话令牌正在为 GET 请求公开**。GET 请求中的 CSRF 令牌可能会在多个位置泄露：浏览器历史记录、HTTP 日志文件、指出记录 HTTP 请求第一行的网络设备，以及受保护站点链接到外部站点时的引用标头。

这里的问题是，如果用户的令牌被泄露，你仍然很容易受到攻击——而且泄露令牌太容易了。我不确定您的问题是否有一个很好的答案，不涉及将所有这些 GET 请求转换为 POST 请求。

值得注意的是，ASP.NET WebForms 中的 Viewstate 功能确实提供了一些针对 CSRF[的保护，尽管它非常有限](https://www.owasp.org/index.php/Cross-Site_Request_Forgery_%28CSRF%29_Prevention_Cheat_Sheet#Viewstate_.28ASP.NET.29)- 事实上，它也只保护 POSTback 请求。

为了更简单地说明这一点，您不应该使用 GET 请求作为任何函数的入口点，这些函数除了返回只读资源以供浏览器呈现之外，还执行其他操作。所以不要让 AJAX 脚本对像`transferMoney.aspx?fromAcct=xyz&toAcct=abc&amount=20`.

HTTP 规范[明确](http://www.faqs.org/rfcs/rfc2616.html)指出 HTTP GET 请求不应有副作用。尽可能保持 GET 请求[幂等](http://en.wikipedia.org/wiki/Idempotence)被认为是最佳实践。

我写[了一篇](http://kylehodgson.com/2013/01/08/asp-netmvc-web-security-basics-csrf/)关于保护 ASP.NET MVC 免受 CSRF 攻击的文章，它阐明了`AntiForgeryToken`在您的站点上应用 POST 控制器方法的实用方法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-10-22T10:15:23.123

这取决于您应用的 CSRF 保护模式。首先，CSRF 适用于**改变状态**的端点。如果您是 GET 请求更改状态，那么我建议您将它们修改为 POST。话虽如此，这是一个有效的观点。

保存 Tokens 的理想位置是在 AUTH Header 中。这是跨 FORM-POST、AJAX 和 GET 请求的最低公分母。您当然可以将 Token 存储在 Cookie 中，但是当应用于多域站点时，这种设计存在漏洞。

您可以在 FORM-POST 期间从隐藏字段中解析 Token 而不会出现问题。改变这一点没有多大意义。假设您的**GET**请求是使用 AJAX 调用的，您可以利用 JQuery 的***ajaxSetup***方法在每个 AJAX 请求上自动插入 Token：

```
$.ajaxSetup({
        beforeSend: function(xhr) {
            xhr.setRequestHeader("Authorization", "TOKEN " + myToken);
        }
    }); 
```

有一种相对较新的模式获得了关注，称为加密令牌模式。它在[这里](http://insidethecpu.wordpress.com/2013/09/23/encrypted-token-pattern/)有详细描述，也在官方的[OWASP CSRF Cheat Sheet](https://www.owasp.org/index.php/Cross-Site_Request_Forgery_%28CSRF%29_Prevention_Cheat_Sheet#Encrypted_Token_Pattern)上。还有一个名为[ARMOR](https://github.com/daishisystems/Daishi.Armor)的工作实现，它可以为您提供您在各种类型的请求中寻找的灵活性。

# asp.net - Response.Redirect 不起作用。线程中止异常

> ID：12094363
> 
> 赞同：1
> 
> 时间：2012-08-23T14:48:52.900
> 
> 标签：asp.net, response.redirect, threadabortexception

我的代码中有重定向问题。网上提出的解决方案都没有对我有用。基本上我的代码是这样的（不是实际代码，只有描述）：

```
protected void btnCool_Click(object sender, EventArgs e)
{
    GetDataFromInterface();
    GetDataSpecificDataFromDB();
    SaveDataOnSession();
    Response.Redirect("SomePage.aspx", false);
    Context.ApplicationInstance.CompleteRequest();
 } 
```

一切都执行得很好，但是在方法执行之后我只是被扔到登录页面。在 VS 的输出窗口中，我看到：*“在 mscorlib.dll 中发生了 'System.Threading.ThreadAbortException' 类型的异常，但未在用户代码中处理*。”

这是一些额外的信息：

*   我没有使用 try catch 块。
*   我在此页面上没有任何 UpdatePanel，在母版页上也没有。
*   Application_Error 甚至不会触发。
*   **我什至还有第二个按钮，它做几乎相同的事情（带来其他数据）并成功重定向到另一个页面（相同的代码）**
*   在执行期间，我没有更改 Web.Config 中的任何内容。

**编辑：**为了澄清。无论如何都会抛出该异常。重定向到所需页面不起作用（这意味着我的应用程序中有一个死部分。我无法访问它。）。相反，我被从应用程序中抛出。

拜托，请帮我解决这个问题。我真的没有更多可以遵循的线索，所以任何建议都可能会有所帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-24T07:23:31.113

是的，默认情况下。下面提到了这种情况的最佳实践

```
protected void btnCool_Click(object sender, EventArgs e)
{
    try{
    GetDataFromInterface();
    GetDataSpecificDataFromDB();
    SaveDataOnSession();
    Response.Redirect("SomePage.aspx", false);
    Context.ApplicationInstance.CompleteRequest();
     }
    catch(ThreadAbortException Thrdex)
    {}
    catch(Exception ex)
    {
    //Handle exception
    }
 } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-24T07:42:08.367

好的。我发现了这个问题。这是 PICNIC 的经典案例。该页面没有实现允许访问特定类型用户的接口。好吧，至少我学到了很多关于重定向和异常的知识。

非常感谢您的关注和回答！！

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-23T14:51:12.353

是的你是。

这是设计使然

[http://support.microsoft.com/kb/312629](http://support.microsoft.com/kb/312629)

# javascript - 是否可以隐藏 javascript 确认对话框？

> ID：12094364
> 
> 赞同：1
> 
> 时间：2012-08-23T14:48:56.363
> 
> 标签：javascript, alert, prompt, confirm

我正在开发一个 Greasmonkey 脚本，我需要隐藏/抑制一个确认框。这是代码：

```
setInterval(function () {

        bla bla bla

        var Element = document.getElementById("id");
        Element.click();

        bla bla bla

    }, 2000); //Perform Actions x2000MS = 2.0Secs

} 
```

当脚本单击元素时，浏览器会显示一个停止脚本的确认框。我怎样才能删除它？

我试过`window.confirm = function () {};`没有成功。我能做些什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-23T14:55:20.783

您可以使用覆盖浏览器中的默认警报功能

```
window.alert = function() {}; 
```

但我认为通常警报是针对人类的，不应被覆盖

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-08-23T14:57:54.123

本质上，当`confirm`调用该方法时，拥有它`return false`：

```
window.confirm = function() { return false; }; 
```

这将删除任何默认行为。

# android - Android Soundpool 加载（字符串路径，int 优先级）

> ID：12094370
> 
> 赞同：4
> 
> 时间：2012-08-23T14:49:04.843
> 
> 标签：android, audio, resources, soundpool

我正在尝试从android加载声音。声音在下`res/raw/myownsound.wav`。我知道我已经可以使用以下方法加载声音：

```
 soundPool.load(context, R.raw.myownsound, 1) 
```

出于定制目的，我想使用以下方法加载它：

```
 soundPool.load("res/raw/myownsound", 1) 
```

...但我收到以下错误：`error loading res/raw/myownsound`。我还尝试了以下方法：

```
 soundPool.loadSound("android.resource://upg.GraphismeBase/raw/myownsound", 1) 
```

..但我也得到一个错误：`error loading android.resource://upg.GraphismeBase/raw/myownsound`

使用 soundPool.load(path, priority) 的正确方法是什么？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-23T14:55:16.017

在项目中创建文件夹结构

```
/assets/sounds/data/ 
```

然后在那里复制你的wav文件。

```
// Declare globally if needed
int mySoundId;
SoundPool soundPool = new SoundPool(5, AudioManager.STREAM_MUSIC, 0 );
AssetManager am = this.getAssets();

//Use in whatever method is used to load the sounds
try {
    mySoundId = soundPool.load(am.openFd("sounds/data/myownsound"), 1);
} catch (IOException e) {
    // TODO Auto-generated catch block
    e.printStackTrace();
} 
```

可以试试这个（不确定它的工作原理）：

```
SoundPool mySoundPool = new SoundPool(4, AudioManager.STREAM_MUSIC, 0);
    int myAudioFile = getResId("claps", R.raw.class);
    try{
        mySoundPool.load(context.getActivity(),myAudioFile,1);
    } catch (Exception e){
        message = String.valueOf(e);
    }

public static int getResId(String variableName, Class<?> c) {
    Field field = null;
    int resId = 0;
    try {
        field = c.getField(variableName);
        try {
            resId = field.getInt(null);
        } catch (Exception e) {
            e.printStackTrace();
        }
    } catch (Exception e) {
        e.printStackTrace();
    }
    return resId;
} 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-09-03T21:52:28.783

使用名为`mContext`. 它通过在运行时获取标识符 id 按名称加载资源。

```
int sound_id = mContext.getResources().getIdentifier("myownsound", "raw",
                                                     mContext.getPackageName());
soundPool.load(mContext, sound_id, 1); 
```

它还可以加载drawables或xml文件，例如通过`"raw"`替换`"drawable"`或`"xml"`。

# iphone - 在 CGPath 之间着色

> ID：12094378
> 
> 赞同：2
> 
> 时间：2012-08-23T14:49:35.360
> 
> 标签：iphone, objective-c, ios, ipad, core-graphics

我正在我的应用程序中构建一个绘图类型工具。

它从用户那里获取一个触摸点并在这些点之间画线。如果用户创建了 3 个或更多的接触点，它会将最后一个点连接到第一个点。

代码的摘录是：

```
startPoint = [[secondDotsArray objectAtIndex:i] CGPointValue];
    endPoint = [[secondDotsArray objectAtIndex:(i + 1)] CGPointValue];
    CGContextAddEllipseInRect(context,(CGRectMake ((endPoint.x - 5.7), (endPoint.y - 5.7)
                                                   , 9.0, 9.0)));
    CGContextDrawPath(context, kCGPathFill);
    CGContextMoveToPoint(context, startPoint.x, startPoint.y);
    CGContextAddLineToPoint(context, endPoint.x, endPoint.y);
    CGContextStrokePath(context); 
```

我希望在这些路径中包含的区域“着色”。我应该看什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-23T14:57:30.363

您需要使用`CGContextFillPath`API。但是，您应该注意如何定义路径：

*   从调用`CGContextMoveToPoint`初始点开始
*   继续绘制除结束段以外的所有段`CGContextAddLineToPoint`
*   用 关闭路径`CGContextClosePath`。不要在最后一段上添加线到点。

的调用`CGContextFillPath`将生成一条使用您之前设置的填充颜色着色的路径。

这是一个例子：

```
CGPoint pt0 = startPoint = [[secondDotsArray objectAtIndex:0] CGPointValue];
CGContextMoveToPoint(context, pt0.x, pt0.y);
for (int i = 1 ; i < noOfDots ; i++) {
    CGPoint next = [[secondDotsArray objectAtIndex:i] CGPointValue];
    CGContextAddLineToPoint(context, next.x, next.y);
}
CGContextClosePath(context);
CGContextFillPath(context); 
```

# php - 我该如何解决这个 php mysql 循环？

> ID：12094384
> 
> 赞同：-1
> 
> 时间：2012-08-23T14:49:45.720
> 
> 标签：php, mysql

```
<?

$sql = dbquery("SELECT `id`, `title`, `description` FROM `content` LIMIT 0,12 ");
while ($row = mysql_fetch_array($sql)) {
    $id          = $row["id"];
    $title       = $row["title"];
    $description = $row["description"];
    $content     = '
    <div class="description-box">
    <p>page id: ' . $id . '</p>
    <p>' . $title . '</p>
    <p>' . $description . '</p>
    </div>';
}

echo $content;
?> 
```

// 注意：div class="description-box"

// 我如何在每 3 个输出 div 之后将其替换为：div class="description-box nopadding"？

html生成代码示例：

```
<div class="description-box nopadding">
// content
</div>
<div class="description-box">
// content
</div>
<div class="description-box">
// content
</div>
<div class="description-box">
// content
</div> 
```

// 然后再次使用 div`nopadding`

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-23T14:52:25.163

```
<div class="description-box'.(($c++%3==0)?' nopadding':'').'"> 
```

记得初始化`$c`

这很简单：

如果`$c`除以 3 的余数等于 0 添加`' nopadding'`字符串，否则添加`''`搅拌

```
0 % 3 == 0 // add
1 % 3 == 1
2 % 3 == 2
3 % 3 == 0 // add
4 % 3 == 1
... 
```

句法：

```
echo true ? "it's true" : "it's false"; // it's true
echo (5 % 3); // 2, remainder of 5/3 division
$c = 0;
echo $c++; // 0
echo $c;   // 1 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-23T14:55:20.737

```
<?
$sql = dbquery("SELECT `id`, `title`, `description` FROM `content` LIMIT 0,12 ");
$counter = 0; 
while($row = mysql_fetch_array($sql)){  
$id = $row["id"];   
$title = $row["title"];
$description = $row["description"];
if($counter%3 == 0)
{
 $div = '<div class="description-box nopadding">'
}
else
{
 $div = '<div class="description-box">';
}
 content = $div.'
 <p>page id: '.$id.'</p>
 <p>'.$title.'</p>
 <p>'.$description.'</p>
 </div>';
 $counter++;
}

echo $content;  ?> 
```

# c++ - 在不使用专门化语法的情况下，为不同类型实现不同类型的模板类方法是否有效？

> ID：12094387
> 
> 赞同：13
> 
> 时间：2012-08-23T14:49:49.590
> 
> 标签：c++

我正在审查同事的代码并发现了这一点：

头文件：

```
template<class T>
class MyClass
{
  void Execute();
} 
```

cp文件：

```
void MyClass<int>::Execute()
{
  // something
}

void MyClass<string>::Execute()
{
  // something else
} 
```

代码专门化了函数，但没有使用模板专门化语法。我想它工作正常，但它有效吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-23T14:54:54.663

是的，专门化模板类的方法是完全有效的。

**但是你的语法是错误的，它应该是：（**对不起，没有看到你`template<>`最初错过了。只是假设它在那里，并认为你在询问成员函数专业化。）

```
template<>
void MyClass<int>::Execute()
{
  // something
}
template<>
void MyClass<string>::Execute()
{
  // something else
} 
```

您只需要在标题中声明这些。如果您也在标题中实现它们，则需要标记它们`inline`以防止多重定义。

调用方法时，调用最适合调用的版本。否则，默认。

在您的情况下，如果您使用类专门化模板`X`并尝试调用`Execute`，您将收到链接器错误，因为您没有提供默认实现，也没有提供 for 的专门`Execute`化`X`。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-08-23T15:00:46.507

这个问题已经回答了，但让我提请注意三个案例之间的细微差别。

### 案例一：专业化

**标题：**

```
template <typename T> struct Foo
{
    void f() { /* stuff */ }
};

template <> void Foo<int>::f(); 
```

**来源：**

```
template <> void Foo<int>::f() { /* ... */ } 
```

在这种情况下，`Foo<T>::f()`可以调用任何`T`. 一般情况的定义是从模板自动生成的；的定义`Foo<int>::f()`是提供的。标题中的特殊化会提醒*每个*使用翻译单元要查找单独的符号，而不是使用模板。

* * *

### 案例 2：定义

**标题：**

```
template <typename T> struct Foo
{
    void f();
}; 
```

**来源：**

```
template <> void Foo<int>::f() { /* ... */ } 
```

在这种情况下，*只能* `Foo<int>::f()`使用；其他一切都会导致链接器错误。由于模板中没有函数的定义，每次使用模板都会产生一个新的符号，并且只有一个 for`Foo<int>::f()`由所示的翻译单元提供。

* * *

### 案例 3：严重错误

**标题：**

```
template <typename T> struct Foo
{
    void f() { /* stuff */ }
}; 
```

**来源：**

```
template <> void Foo<int>::f() { /* ... */ } 
```

这违反了一个定义规则，因为现在有多个定义`Foo<int>::f()`。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-08-23T15:00:11.880

这是显式特化的旧语法。但令我惊讶的是，您使用的编译器仍然接受它（g++ 在 4.0 左右停止）。要符合要求，您需要在专业化前面加上`template <>`.

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-08-23T15:00:48.533

回答最初写的标题中的问题：绝对。在专业化中拥有一组完全不相关的成员也是有效的。

回答代码中的问题：在我看来就像一个编译器错误。`template <>`是必需的。

# string - 在 VBA for Excel 中，当字符串包含“&”时，如何操作页眉/页脚

> ID：12094388
> 
> 赞同：3
> 
> 时间：2012-08-23T14:49:56.847
> 
> 标签：string, syntax, excel, header, vba

我有一段代码写入页面的标题部分。问题是写入标头的字符串偶尔会包含一个“&”符号。这会干扰代码，因为 VBA 会自动将 & 和后面的字符视为一段代码，即使它是字符串的一部分。

```
ActiveSheet.PageSetup.CenterHeader = "&B&14 Cool New Header for &16 &I" & vbNewLine & aString 
```

当 aString 中没有“&”符号时，一切都很好。我得到一个粗体，大小为 14 的顶行，然后是大小为 16 的斜体 aString 文本在第二行。

如果 aString 类似于“B&S Company of Greatness”，则标题将出现“Company of Greatness”，因为字符串中包含“&S”。

我怎样才能解决这个问题？我会在字符串中搜索 '&S 并通过插入另一个 &S 来手动补偿以将其取消，但 &S 可能不是唯一出现的 '&' 符号。

解决这个问题的最佳方法是什么？通过告诉 excel 仅将 aString 读取为字符串值并且不要不正确地应用其内容，是否会帮助正确调暗事物？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-23T14:54:18.740

您需要通过向字符串中的每个实例添加第二个＆符号来转义＆符号，如下所示：

```
aString = Replace(aString, "&", "&&")

ActiveSheet.PageSetup.CenterHeader = "&B&14 Cool New Header for &16 &I" & _
    vbNewLine & aString 
```

# azure - Azure 上的自定义 FileResult：浏览器永远等待

> ID：12094389
> 
> 赞同：2
> 
> 时间：2012-08-23T14:49:59.760
> 
> 标签：azure, asp.net-mvc-4, openxml, closedxml

我有一个将 Excel 作为自定义 FileResult 返回的操作。我的解决方案基于[ClosedXml](http://closedxml.codeplex.com/)库（内部使用 OpenXml）。我的 XlsxResult 类使用服务器上的只读 .xlsx 文件作为模板。然后它将模板传递到一个内存流中，该内存流被操作并使用 ClosedXml 保存回来。最后，内存流被写入响应。

这在 Cassini 和 IIS Express 上都可以正常工作，但在 azure 上部署时失败，没有任何错误。我遇到的唯一影响是发送到服务器的请求永远不会得到任何响应。我还在等待60分钟左右后发生的事情......

**我的行动：**

```
[OutputCache(Location= System.Web.UI.OutputCacheLocation.None, Duration=0)]
public FileResult Export(int year, int month, int day) {
    var date = new DateTime(year, month, day);
    var filename = string.Format("MyTemplate_{0:yyyyMMdd}.xlsx", date);

    //return new FilePathResult("~/Content/templates/MyTemplate.xlsx", "application/vnd.openxmlformats-officedocument.spreadsheetml.sheet");

    var result = new XlsxExportTemplatedResult("MyTemplate.xlsx", filename, (workbook) => {
            var ws = workbook.Worksheets.Worksheet("My Export Sheet");
            ws.Cell("B3").Value = date;
            // Using a OpenXML's predefined formats (15 stands for date)
            ws.Cell("B3").Style.NumberFormat.NumberFormatId = 15;
            ws.Columns().AdjustToContents(); // You can also specify the range of columns to adjust, e.g.
            return workbook;
        });
    return result;
} 
```

**我的文件结果**

```
public class XlsxExportTemplatedResult : FileResult
{
    // default buffer size as defined in BufferedStream type
    private const int BufferSize = 0x1000;

    public static readonly string TEMPLATE_FOLDER_LOCATION = @"~\Content\templates";

    public XlsxExportTemplatedResult(string templateName, string fileDownloadName, Func<XLWorkbook, XLWorkbook> generate)
        : base("application/vnd.openxmlformats-officedocument.spreadsheetml.sheet") {
        this.TempalteName = templateName;
        this.FileDownloadName = fileDownloadName;
        this.Generate = generate;
    }

    public string TempalteName { get; protected set; }
    public Func<XLWorkbook, XLWorkbook> Generate { get; protected set; }

    protected string templatePath = string.Empty;
    public override void ExecuteResult(ControllerContext context) {
        templatePath = context.HttpContext.Server.MapPath(System.IO.Path.Combine(TEMPLATE_FOLDER_LOCATION, this.TempalteName));
        base.ExecuteResult(context);
    }

    //http://msdn.microsoft.com/en-us/library/office/ee945362(v=office.11).aspx
    protected override void WriteFile(System.Web.HttpResponseBase response) {
        FileStream fileStream = new FileStream(templatePath, FileMode.Open, FileAccess.Read);
        using (MemoryStream memoryStream = new MemoryStream()) {
            CopyStream(fileStream, memoryStream);
            using (var workbook = new XLWorkbook(memoryStream)) {
                Generate(workbook);
                workbook.Save();
            }
            // At this point, the memory stream contains the modified document.
            // grab chunks of data and write to the output stream
            Stream outputStream = response.OutputStream;
            byte[] buffer = new byte[BufferSize];
            while (true) {
                int bytesRead = memoryStream.Read(buffer, 0, BufferSize);
                if (bytesRead == 0) {
                    // no more data
                    break;
                }
                outputStream.Write(buffer, 0, bytesRead);
            }
        }
        fileStream.Dispose();
    }

    static private void CopyStream(Stream source, Stream destination) {
        byte[] buffer = new byte[BufferSize];
        int bytesRead;
        do {
            bytesRead = source.Read(buffer, 0, buffer.Length);
            destination.Write(buffer, 0, bytesRead);
        } while (bytesRead != 0);
    }

} 
```

所以我错过了什么（显然我是）。

**请注意：**

1.  Azure 中没有缺少 dll，因为我使用 Windows Azure 工具 1.7 的 RemoteAccess 功能进行了检查
2.  我的出口不是一项繁重的长期任务。
3.  当我将操作更改为仅返回带有模板 xlsx 的 FilePathResult 时，它在 azure 上工作。但是我需要在返回文件之前对其进行处理，因为您可能会怀疑:-)

坦克。

> **更新：** 在我广泛登录我的代码后，在 ClosedXml“保存”方法调用中执行挂起，没有错误。但仍然没有错误。WADLogsTable 的摘要：
> 
> *   从路径打开模板文件：E:\sitesroot\0\Content\templates\MyTemplate.xlsx
> *   从路径打开的模板： E:\sitesroot\0\Content\templates\MyTemplate.xlsx 只是
> *   将模板复制到可编辑的内存流。复制的字节数：15955，位置：15955
> *   修改了内存中的excel文档。
> *   当它调用 workbook.Save(); 时它挂起 这是一个 ClosedXml 方法调用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-26T19:02:04.930

我面临与您完全相同的错误情况。我无法针对您的具体情况提供解决方案，并且我知道您切换了轨道，但是在经历了您所面临的同样令人沮丧的步骤之后，我想为您（或其他人）的答案“铺平道路” .

进入 Visual Studio 中的包管理器控制台，并使用 MVC 好东西（路由）安装 Elmah：

```
 Install-Package elmah.MVC 
```

现在，在您的根 web.config 中，更新您的 Elmah 条目。它可能在文件的末尾，如下所示：

```
 <elmah></elmah> 
```

更新那个坏男孩以允许远程访问并设置您的日志路径：

```
 <elmah>
      <security allowRemoteAccess="1" />
      <errorLog type="Elmah.XmlFileErrorLog, Elmah" logPath="~/app_data/elmah" />
    </elmah> 
```

现在，将其推送到 Azure。

最后，访问您的站点，强制错误，然后导航到[http://your-site-here.azurewebsites.net/elmah](http://your-site-here.azurewebsites.net/elmah)，您将看到错误的确切原因。

***Elmah真是太棒了。***

*愚蠢的忏悔：*对我来说，错误不在第三方代码中，而是在我的连接字符串中，我没有设置`MultipleActiveResultsSets`为 true。我必须做的另一个修复是在调用 ToList() 后将我的实体传递给该库上的一个内部方法，将其保留为 IQueryable 使该方法失效。

# iphone - iphone全屏导航栏位移

> ID：12094390
> 
> 赞同：1
> 
> 时间：2012-08-23T14:50:01.677
> 
> 标签：iphone, uiview, uinavigationcontroller, uinavigationbar

我实现了一个应用程序全屏图像显示正常。

几秒钟后导航栏和状态栏被隐藏，现在如果我关闭应用程序并再次打开它，导航栏将在屏幕顶部移动，状态栏与导航栏重叠

我想我必须改变一些关于 CGRect 框架的东西

请帮我

```
#import "KTPhotoScrollViewController.h"
#import "KTPhotoBrowserDataSource.h"
#import "KTPhotoBrowserGlobal.h"
#import "KTPhotoView.h"

const CGFloat ktkDefaultPortraitToolbarHeight   = 44;
const CGFloat ktkDefaultLandscapeToolbarHeight  = 33;
const CGFloat ktkDefaultToolbarHeight = 44;

#define BUTTON_DELETEPHOTO 0
#define BUTTON_CANCEL 1

@interface KTPhotoScrollViewController (KTPrivate)
- (void)setCurrentIndex:(NSInteger)newIndex;
- (void)toggleChrome:(BOOL)hide;
- (void)startChromeDisplayTimer;
- (void)cancelChromeDisplayTimer;
- (void)hideChrome;
- (void)showChrome;
- (void)swapCurrentAndNextPhotos;
- (void)nextPhoto;
- (void)previousPhoto;
- (void)toggleNavButtons;
- (CGRect)frameForPagingScrollView;
- (CGRect)frameForPageAtIndex:(NSUInteger)index;
- (void)loadPhoto:(NSInteger)index;
- (void)unloadPhoto:(NSInteger)index;
- (void)trashPhoto;
- (void)exportPhoto;
@end

@implementation KTPhotoScrollViewController

@synthesize statusBarStyle = statusBarStyle_;
@synthesize statusbarHidden = statusbarHidden_;
@synthesize my_img, imgURL;

- (void)dealloc 
{
   [nextButton_ release], nextButton_ = nil;
   [previousButton_ release], previousButton_ = nil;
   [scrollView_ release], scrollView_ = nil;
   [toolbar_ release], toolbar_ = nil;
   [photoViews_ release], photoViews_ = nil;
   [dataSource_ release], dataSource_ = nil;  
   [super dealloc];
}

- (id)initWithDataSource:(id <KTPhotoBrowserDataSource>)dataSource andStartWithPhotoAtIndex:(NSUInteger)index 
{
   if (self = [super init]) {
     startWithIndex_ = index;
     dataSource_ = [dataSource retain];

     // Make sure to set wantsFullScreenLayout or the photo
     // will not display behind the status bar.
     [self setWantsFullScreenLayout:YES];

     BOOL isStatusbarHidden = [[UIApplication sharedApplication] isStatusBarHidden];
     [self setStatusbarHidden:isStatusbarHidden];

     self.hidesBottomBarWhenPushed = YES;
   }
   return self;
}

- (void)loadView 
{
   [super loadView];

   CGRect scrollFrame = [self frameForPagingScrollView];
   UIScrollView *newView = [[UIScrollView alloc] initWithFrame:scrollFrame];
   [newView setAutoresizingMask:UIViewAutoresizingFlexibleWidth|UIViewAutoresizingFlexibleHeight];
   [newView setDelegate:self];

   UIColor *backgroundColor = [dataSource_ respondsToSelector:@selector(imageBackgroundColor)] ?
                                [dataSource_ imageBackgroundColor] : [UIColor blackColor];  
   [newView setBackgroundColor:backgroundColor];
   [newView setAutoresizesSubviews:YES];
   [newView setPagingEnabled:YES];
   [newView setShowsVerticalScrollIndicator:NO];
   [newView setShowsHorizontalScrollIndicator:NO];

   [[self view] addSubview:newView];

   scrollView_ = [newView retain];

   [newView release];

   nextButton_ = [[UIBarButtonItem alloc] 
                  initWithImage:[UIImage imageNamed:@"nextIcon.png"]
                  style:UIBarButtonItemStylePlain
                  target:self
                  action:@selector(nextPhoto)];

   previousButton_ = [[UIBarButtonItem alloc] 
                      initWithImage:[UIImage imageNamed:@"previousIcon.png"]
                      style:UIBarButtonItemStylePlain
                      target:self
                      action:@selector(previousPhoto)];

    UIBarButtonItem *msgButton = nil;
    UIBarButtonItem *exportButton = nil;

    exportButton = [[UIBarButtonItem alloc] initWithBarButtonSystemItem:UIBarButtonSystemItemAction 
                                                                 target:self
                                                                 action:@selector(exportPhoto)];

    msgButton = [[UIBarButtonItem alloc] initWithBarButtonSystemItem:UIBarButtonSystemItemBookmarks 
                                                                 target:self
                                                                 action:@selector(msgPhoto)];

//    UIImage *image = [UIImage imageNamed:@"Icon-Small"];
//    UIButton *myMuteButton = [UIButton buttonWithType:UIButtonTypeCustom];
//    myMuteButton.bounds = CGRectMake( 0, 0, image.size.width, image.size.height );    
//    [myMuteButton setImage:image forState:UIControlStateNormal];
//    [myMuteButton addTarget:self action:@selector(trashPhoto) forControlEvents:UIControlEventTouchUpInside];    
//    UIBarButtonItem *myMuteBarButtonItem = [[UIBarButtonItem alloc] initWithCustomView:myMuteButton];   

    UIBarItem *space = [[UIBarButtonItem alloc] initWithBarButtonSystemItem:UIBarButtonSystemItemFlexibleSpace target:nil action:nil];
    NSMutableArray *toolbarItems = [[NSMutableArray alloc] initWithCapacity:7];

    if (exportButton) [toolbarItems addObject:exportButton];

    [toolbarItems addObject:space];
    [toolbarItems addObject:previousButton_];
    [toolbarItems addObject:space];
    [toolbarItems addObject:nextButton_];
    [toolbarItems addObject:space];

     if (msgButton) [toolbarItems addObject:msgButton];

//    [toolbarItems addObject:myMuteBarButtonItem];
//    [myMuteBarButtonItem release];

    CGRect screenFrame = [[UIScreen mainScreen] bounds];
    CGRect toolbarFrame = CGRectMake(0, 
                                     screenFrame.size.height - ktkDefaultToolbarHeight, 
                                     screenFrame.size.width, 
                                     ktkDefaultToolbarHeight);
    toolbar_ = [[UIToolbar alloc] initWithFrame:toolbarFrame];
    [toolbar_ setAutoresizingMask:UIViewAutoresizingFlexibleWidth | UIViewAutoresizingFlexibleHeight | UIViewAutoresizingFlexibleTopMargin | UIViewAutoresizingFlexibleRightMargin];
    [toolbar_ setBarStyle:UIBarStyleBlackTranslucent];
    [toolbar_ setItems:toolbarItems];
    [[self view] addSubview:toolbar_];

    if (msgButton) [msgButton release];
    if (exportButton) [exportButton release];
    [toolbarItems release];
    [space release];
}

- (void) ShowAlert:(NSString*)title MyMsg:(NSString*)msg{
    UIAlertView * alert = [[UIAlertView alloc] initWithTitle:title message:msg delegate:self cancelButtonTitle:@"Ok" otherButtonTitles:nil];
    [alert show];
    [alert autorelease];   
}

- (void)setTitleWithCurrentPhotoIndex 
{
   NSString *formatString = NSLocalizedString(@"%1$i of %2$i", @"Picture X out of Y total.");
   NSString *title = [NSString stringWithFormat:formatString, currentIndex_ + 1, photoCount_, nil];
   [self setTitle:title];
}

- (void)scrollToIndex:(NSInteger)index 
{
   CGRect frame = scrollView_.frame;
   frame.origin.x = frame.size.width * index;
   frame.origin.y = 0;
   [scrollView_ scrollRectToVisible:frame animated:NO];
}

- (void)setScrollViewContentSize
{
   NSInteger pageCount = photoCount_;
   if (pageCount == 0) {
      pageCount = 1;
   }

   CGSize size = CGSizeMake(scrollView_.frame.size.width * pageCount, 
                            scrollView_.frame.size.height / 2);   // Cut in half to prevent horizontal scrolling.
   [scrollView_ setContentSize:size];
}

- (void)viewDidLoad 
{
   [super viewDidLoad];

   photoCount_ = [dataSource_ numberOfPhotos];
   [self setScrollViewContentSize];

   // Setup our photo view cache. We only keep 3 views in
   // memory. NSNull is used as a placeholder for the other
   // elements in the view cache array.
   photoViews_ = [[NSMutableArray alloc] initWithCapacity:photoCount_];
   for (int i=0; i < photoCount_; i++) {
      [photoViews_ addObject:[NSNull null]];
   }
}

- (void)didReceiveMemoryWarning 
{
    // Releases the view if it doesn't have a superview.
    [super didReceiveMemoryWarning];

    // Release any cached data, images, etc that aren't in use.
}

- (void)viewWillAppear:(BOOL)animated 
{
   [super viewWillAppear:animated];

   // The first time the view appears, store away the previous controller's values so we can reset on pop.
   UINavigationBar *navbar = [[self navigationController] navigationBar];
   if (!viewDidAppearOnce_) {
      viewDidAppearOnce_ = YES;
      navbarWasTranslucent_ = [navbar isTranslucent];
      statusBarStyle_ = [[UIApplication sharedApplication] statusBarStyle];
   }
   // Then ensure translucency. Without it, the view will appear below rather than under it.  
   [navbar setTranslucent:YES];
   [[UIApplication sharedApplication] setStatusBarStyle:UIStatusBarStyleBlackTranslucent animated:YES];

   // Set the scroll view's content size, auto-scroll to the stating photo,
   // and setup the other display elements.
   [self setScrollViewContentSize];
   [self setCurrentIndex:startWithIndex_];
   [self scrollToIndex:startWithIndex_];

   [self setTitleWithCurrentPhotoIndex];
   [self toggleNavButtons];
   [self startChromeDisplayTimer];
}

- (void)viewWillDisappear:(BOOL)animated 
{
  // Reset nav bar translucency and status bar style to whatever it was before.
  UINavigationBar *navbar = [[self navigationController] navigationBar];
  [navbar setTranslucent:navbarWasTranslucent_];
  [[UIApplication sharedApplication] setStatusBarStyle:statusBarStyle_ animated:YES];
  [super viewWillDisappear:animated];
}

- (void)viewDidDisappear:(BOOL)animated 
{
   [self cancelChromeDisplayTimer];
   [super viewDidDisappear:animated];
}

- (void)deleteCurrentPhoto 
{
   if (dataSource_) {
      // TODO: Animate the deletion of the current photo.

      NSInteger photoIndexToDelete = currentIndex_;
      [self unloadPhoto:photoIndexToDelete];
      [dataSource_ deleteImageAtIndex:photoIndexToDelete];

      photoCount_ -= 1;
      if (photoCount_ == 0) {
         [self showChrome];
         [[self navigationController] popViewControllerAnimated:YES];
      } else {
         NSInteger nextIndex = photoIndexToDelete;
         if (nextIndex == photoCount_) {
            nextIndex -= 1;
         }
         [self setCurrentIndex:nextIndex];
         [self setScrollViewContentSize];
      }
   }
}

- (void)toggleNavButtons 
{
   [previousButton_ setEnabled:(currentIndex_ > 0)];
   [nextButton_ setEnabled:(currentIndex_ < photoCount_ - 1)];
}

#pragma mark -
#pragma mark Frame calculations
#define PADDING  20

- (CGRect)frameForPagingScrollView 
{
   CGRect frame = [[UIScreen mainScreen] bounds];
   frame.origin.x -= PADDING;
   frame.size.width += (2 * PADDING);
   return frame;
}

- (CGRect)frameForPageAtIndex:(NSUInteger)index 
{
   CGRect bounds = [scrollView_ bounds];
   CGRect pageFrame = bounds;
   pageFrame.size.width -= (2 * PADDING);
   pageFrame.origin.x = (bounds.size.width * index) + PADDING;
   return pageFrame;
}

#pragma mark -
#pragma mark Photo (Page) Management

- (void)loadPhoto:(NSInteger)index
{
   if (index < 0 || index >= photoCount_) {
      return;
   }

   id currentPhotoView = [photoViews_ objectAtIndex:index];
   if (NO == [currentPhotoView isKindOfClass:[KTPhotoView class]]) {
      // Load the photo view.
      CGRect frame = [self frameForPageAtIndex:index];
      KTPhotoView *photoView = [[KTPhotoView alloc] initWithFrame:frame];
      [photoView setScroller:self];
      [photoView setIndex:index];
      [photoView setBackgroundColor:[UIColor clearColor]];

      // Set the photo image.
      if (dataSource_) {
         if ([dataSource_ respondsToSelector:@selector(imageAtIndex:photoView:)] == NO) {
            UIImage *image = [dataSource_ imageAtIndex:index];
            [photoView setImage:image];
         } else {
            [dataSource_ imageAtIndex:index photoView:photoView];
         }
      }

      [scrollView_ addSubview:photoView];
      [photoViews_ replaceObjectAtIndex:index withObject:photoView];
      [photoView release];
   } else {
      // Turn off zooming.
      [currentPhotoView turnOffZoom];
   }
}

- (void)unloadPhoto:(NSInteger)index
{
   if (index < 0 || index >= photoCount_) {
      return;
   }

   id currentPhotoView = [photoViews_ objectAtIndex:index];
   if ([currentPhotoView isKindOfClass:[KTPhotoView class]]) {
      [currentPhotoView removeFromSuperview];
      [photoViews_ replaceObjectAtIndex:index withObject:[NSNull null]];
   }
}

- (void)setCurrentIndex:(NSInteger)newIndex
{
   currentIndex_ = newIndex;

    if(newIndex>=0){
        myUrl   = [dataSource_ imageURLAtIndex:currentIndex_ photoView:[photoViews_ objectAtIndex:currentIndex_]];
        myDescr = [dataSource_ imageDESCRAtIndex:currentIndex_ photoView:[photoViews_ objectAtIndex:currentIndex_]];
        img_Title =[dataSource_ imageimg_TitleAtIndex:currentIndex_ photoView:[photoViews_ objectAtIndex:currentIndex_]];
    }

   [self loadPhoto:currentIndex_];
   [self loadPhoto:currentIndex_ + 1];
   [self loadPhoto:currentIndex_ - 1];
   [self unloadPhoto:currentIndex_ + 2];
   [self unloadPhoto:currentIndex_ - 2];

   [self setTitleWithCurrentPhotoIndex];
   [self toggleNavButtons];
}

#pragma mark -
#pragma mark Rotation Magic

- (void)updateToolbarWithOrientation:(UIInterfaceOrientation)interfaceOrientation 
{
   CGRect toolbarFrame = toolbar_.frame;
   if ((interfaceOrientation) == UIInterfaceOrientationPortrait || (interfaceOrientation) == UIInterfaceOrientationPortraitUpsideDown) {
      toolbarFrame.size.height = ktkDefaultPortraitToolbarHeight;
   } else {
      toolbarFrame.size.height = ktkDefaultLandscapeToolbarHeight+1;
   }

   toolbarFrame.size.width = self.view.frame.size.width;
   toolbarFrame.origin.y =  self.view.frame.size.height - toolbarFrame.size.height;
   toolbar_.frame = toolbarFrame;
}

- (void)layoutScrollViewSubviews
{
   [self setScrollViewContentSize];

   NSArray *subviews = [scrollView_ subviews];

   for (KTPhotoView *photoView in subviews) {
      CGPoint restorePoint = [photoView pointToCenterAfterRotation];
      CGFloat restoreScale = [photoView scaleToRestoreAfterRotation];
      [photoView setFrame:[self frameForPageAtIndex:[photoView index]]];
      [photoView setMaxMinZoomScalesForCurrentBounds];
      [photoView restoreCenterPoint:restorePoint scale:restoreScale];
   }

   // adjust contentOffset to preserve page location based on values collected prior to location
   CGFloat pageWidth = scrollView_.bounds.size.width;
   CGFloat newOffset = (firstVisiblePageIndexBeforeRotation_ * pageWidth) + (percentScrolledIntoFirstVisiblePage_ * pageWidth);
   scrollView_.contentOffset = CGPointMake(newOffset, 0);

}

- (BOOL)shouldAutorotateToInterfaceOrientation:(UIInterfaceOrientation)interfaceOrientation 
{
   return YES;
}

- (void)willRotateToInterfaceOrientation:(UIInterfaceOrientation)toInterfaceOrientation 
                                duration:(NSTimeInterval)duration 
{
   // here, our pagingScrollView bounds have not yet been updated for the new interface orientation. So this is a good
   // place to calculate the content offset that we will need in the new orientation
   CGFloat offset = scrollView_.contentOffset.x;
   CGFloat pageWidth = scrollView_.bounds.size.width;

   if (offset >= 0) {
      firstVisiblePageIndexBeforeRotation_ = floorf(offset / pageWidth);
      percentScrolledIntoFirstVisiblePage_ = (offset - (firstVisiblePageIndexBeforeRotation_ * pageWidth)) / pageWidth;
   } else {
      firstVisiblePageIndexBeforeRotation_ = 0;
      percentScrolledIntoFirstVisiblePage_ = offset / pageWidth;
   }    

}

- (void)willAnimateRotationToInterfaceOrientation:(UIInterfaceOrientation)toInterfaceOrientation
                                         duration:(NSTimeInterval)duration 
{
   [self layoutScrollViewSubviews];
   // Rotate the toolbar.
   [self updateToolbarWithOrientation:toInterfaceOrientation];

   // Adjust navigation bar if needed.
   if (isChromeHidden_ && statusbarHidden_ == NO) {
      UINavigationBar *navbar = [[self navigationController] navigationBar];
      CGRect frame = [navbar frame];
      frame.origin.y = 20;
      [navbar setFrame:frame];
   }
}

- (void)didRotateFromInterfaceOrientation:(UIInterfaceOrientation)fromInterfaceOrientation 
{
   [self startChromeDisplayTimer];
}

- (UIView *)rotatingFooterView 
{
   return toolbar_;
}

#pragma mark -
#pragma mark Chrome Helpers

- (void)toggleChromeDisplay 
{
   [self toggleChrome:!isChromeHidden_];
}

- (void)toggleChrome:(BOOL)hide 
{
   isChromeHidden_ = hide;
   if (hide) {
      [UIView beginAnimations:nil context:nil];
      [UIView setAnimationDuration:0.4];
   }

   if ( ! [self isStatusbarHidden] ) {     
     if ([[UIApplication sharedApplication] respondsToSelector:@selector(setStatusBarHidden:withAnimation:)]) {
       [[UIApplication sharedApplication] setStatusBarHidden:hide withAnimation:NO];
     } else {  // Deprecated in iOS 3.2+.
       id sharedApp = [UIApplication sharedApplication];  // Get around deprecation warnings.
       [sharedApp setStatusBarHidden:hide animated:NO];
     }
   }

   CGFloat alpha = hide ? 0.0 : 1.0;

   // Must set the navigation bar's alpha, otherwise the photo
   // view will be pushed until the navigation bar.
   UINavigationBar *navbar = [[self navigationController] navigationBar];
   [navbar setAlpha:alpha];

   [toolbar_ setAlpha:alpha];

   if (hide) {
      [UIView commitAnimations];
   }

   if ( ! isChromeHidden_ ) {
      [self startChromeDisplayTimer];
   }
}

- (void)hideChrome 
{
   if (chromeHideTimer_ && [chromeHideTimer_ isValid]) {
      [chromeHideTimer_ invalidate];
      chromeHideTimer_ = nil;
   }
   [self toggleChrome:YES];
}

- (void)showChrome 
{
   [self toggleChrome:NO];
}

- (void)startChromeDisplayTimer 
{
   [self cancelChromeDisplayTimer];
   chromeHideTimer_ = [NSTimer scheduledTimerWithTimeInterval:5.0
                                                       target:self 
                                                     selector:@selector(hideChrome)
                                                     userInfo:nil
                                                      repeats:NO];
}

- (void)cancelChromeDisplayTimer 
{
   if (chromeHideTimer_) {
      [chromeHideTimer_ invalidate];
      chromeHideTimer_ = nil;
   }
}

#pragma mark -
#pragma mark UIScrollViewDelegate

- (void)scrollViewDidScroll:(UIScrollView *)scrollView 
{
   CGFloat pageWidth = scrollView.frame.size.width;
   float fractionalPage = scrollView.contentOffset.x / pageWidth;
   NSInteger page = floor(fractionalPage);
    if (page != currentIndex_) {
        [self setCurrentIndex:page];
    }
}

- (void)scrollViewWillBeginDragging:(UIScrollView *)scrollView 
{
   [self hideChrome];
}

#pragma mark -
#pragma mark Toolbar Actions

- (void)nextPhoto 
{
   [self scrollToIndex:currentIndex_ + 1];
   [self startChromeDisplayTimer];
}

- (void)previousPhoto 
{
   [self scrollToIndex:currentIndex_ - 1];
   [self startChromeDisplayTimer];
}

- (void)msgPhoto 
{
    UIAlertView *alert = [[UIAlertView alloc] initWithTitle:img_Title message:myDescr  delegate:self cancelButtonTitle:@"OK" otherButtonTitles:nil];
    [alert show];
    [alert release];
}

- (void)imageSavedToPhotosAlbum:(UIImage *)image didFinishSavingWithError:(NSError *)error contextInfo:(void *)contextInfo {  

    NSString *message;  
    NSString *title;  
    if (!error) {  
        title = @"Done";  
        message = @"image copied to your local gallery";  
    } else {  
        title = @"Error";  
        message = [error description];  
    }  
    UIAlertView *alert = [[UIAlertView alloc] initWithTitle:title message:message delegate:nil cancelButtonTitle:@"OK" otherButtonTitles:nil];  
    [alert show];  
    [alert release];  
}  

- (void)actionSheet:(UIActionSheet *)actionSheet clickedButtonAtIndex:(NSInteger)buttonIndex 
{
    if (buttonIndex == 0) {
        //save to gallery
        UIImage *imageB = [UIImage imageWithData: [NSData dataWithContentsOfURL: [NSURL URLWithString: myUrl]]];
        UIImageWriteToSavedPhotosAlbum(imageB, self, @selector(imageSavedToPhotosAlbum: didFinishSavingWithError: contextInfo:), nil);

    } else if (buttonIndex == 1) {
        //email

        MFMailComposeViewController *mailComposer = [[MFMailComposeViewController alloc] init];
        mailComposer.mailComposeDelegate = self;
        mailComposer.toolbar.barStyle = UIBarStyleBlack;
        mailComposer.title = @"Your title here";
        [[mailComposer navigationBar] setTintColor:[UIColor colorWithRed:124.0/255 green:17.0/255 blue:92.0/255 alpha:1]]; 

        if ([MFMailComposeViewController canSendMail]) {

            [mailComposer setSubject:@"Look at a great image"];
            [mailComposer setMessageBody:[NSString stringWithFormat:@"%@",myUrl] isHTML:NO];

            UIImage *imageB = [UIImage imageWithData: [NSData dataWithContentsOfURL: [NSURL URLWithString: myUrl]]];
            NSData *exportData = UIImageJPEGRepresentation(imageB ,1.0);
            [mailComposer addAttachmentData:exportData mimeType:@"image/jpeg" fileName:img_Title];

            [self presentModalViewController:mailComposer animated:YES];
        }

        //release the mailComposer as it is now being managed as the UIViewControllers modalViewController.
        [mailComposer release];

    } else if (buttonIndex == 2) {
        //cancel

    }

    [self startChromeDisplayTimer];
}

- (void)mailComposeController:(MFMailComposeViewController*)controller didFinishWithResult:(MFMailComposeResult)result error:(NSError*)error 
{
    [self dismissModalViewControllerAnimated:YES];

    if (result == MFMailComposeResultFailed) {
        UIAlertView *alert = [[UIAlertView alloc] initWithTitle:@"Error" message:@"Failed to send message" delegate:self cancelButtonTitle:@"OK" otherButtonTitles:nil];
        [alert show];
        [alert release];
    }
}

- (void) exportPhoto
{ 

    if ([dataSource_ respondsToSelector:@selector(exportImageAtIndex:)])
        [dataSource_ exportImageAtIndex:currentIndex_];

    [self startChromeDisplayTimer];

    UIActionSheet *actionSheet = [[UIActionSheet alloc] initWithTitle:@"Actions"
                                                             delegate:self
                                                    cancelButtonTitle:@"Cancel"
                                               destructiveButtonTitle:nil
                                                    otherButtonTitles:@"Save to gallery", @"Email",nil];
    [actionSheet showInView:[self view]];
    [actionSheet release];     
}

@end 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-23T15:39:26.560

首先，如果您想显示状态栏，请告诉我。

如果您不想显示然后，在**控制器的****nib**中，您可以选择它的**视图**，并在其属性下将**StatusBar**设置为**NONE**，直到它不会显示状态栏...并且您可以将 vew 大小设置为 (320*480)否则状态栏将是 (320*460) 并且 20 像素将保留给状态栏。

 ******其他方法（不使用上述方法）

也可以通过将属性**UIStatusBarHidden**属性设置为**YES**来隐藏**info.plist**中的 StatusBar 。（在应用启动时隐藏状态栏）

 ****以编程方式可以完成，在 appDelegate 的**applicationDidFinishLaunching**方法中添加一行，

```
 [[UIApplication sharedApplication] setStatusBarHidden:YES animated:NO]; 
```**********

# php - 通过浏览器调用时 Gearman 客户端权限被拒绝

> ID：12094392
> 
> 赞同：0
> 
> 时间：2012-08-23T14:50:04.940
> 
> 标签：php, gearman

我正在尝试与 Gearman 并行转换多个项目 - 我希望多个用户同时点击一个 URL 并在后台异步处理他们的项目。

我尝试（从浏览器）调用以下内容：

```
 $this->client = new GearmanClient();
    $this->client->addServer("127.0.0.1");

    $this->client->ping('Test'); 
```

结果是：

> 警告：GearmanClient::ping(): flush(Permission denied) connect -> libgearman/connection.cc:696

知道是什么导致了权限错误吗？如果我通过 CLI 调用代码，工作正常...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-29T14:46:32.833

SELinux 是问题所在：

> SELinux 正在阻止 /usr/sbin/httpd 对 tcp_socket 进行 name_connect 访问

解决了：

```
setsebool -P httpd_can_network_connect=1 
```

# visual-studio-2010 - 如何在未安装 BizTalk Server 的情况下开发 BizTalk Server 项目？

> ID：12094395
> 
> 赞同：1
> 
> 时间：2012-08-23T14:50:07.900
> 
> 标签：visual-studio-2010, visual-studio, biztalk, biztalk-2010

我有 Visual Studio 2010 和 BizTalk Server 2010。我需要卸载 BizTalk。是否可以继续使用 Visual Studio 进行 BizTalk 开发？如果是这样，我该怎么办？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-26T15:07:43.293

从 BizTalk Server 2010 开始，Microsoft 将其完全免费用于开发和测试目的。只有 BizTalk Server 是免费的，Visual Studio 和 SQL 等依赖组件不免费。不支持 SQL Express (http://blogs.digitaldeposit.net/saravana/post/2009/06/01/BizTalk-Server-with-SQLEXPRESS.aspx)。

您还需要记住，您可以将 BizTalk Server 与您的 MSDN 订阅一起用于开发和测试目的。看看这个。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-23T19:22:30.490

您不能完全卸载 BizTalk 并继续在 Visual Studio 中为 BizTalk 开发，因为完全卸载 BizTalk 将删除开发人员工具和 SDK。如果要删除 BizTalk *Server*组件，可以这样做：

1.  在您的控制面板中，选择*程序和功能*或（如果您的设置按类别组织）选择*卸载程序*。
2.  双击*Microsoft BizTalk Server 2010 Developer Edition*（假设安装了版本和版本）。
3.  Microsoft BizTalk Server 2010 安装向导将打开。
4.  确保选中*Modify*单选按钮，然后按*Next*按钮。
5.  在*Component Installation页面上，取消选中除**Developer Tools 和 SDK*之外的所有可用组件。然后按*下一步*按钮。
6.  在摘要页面上，选择*安装*以继续删除功能。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-24T13:08:52.237

我不知道有免费版本的 BizTalk。

nonnb 的评论有助于解决我的许可证问题。

> 这对我来说似乎没有意义 - 如果您需要继续开发 Biztalk 项目，如果没有本地 Biztalk 将会很困难（BizTalk 开发版是免费的，如果您愿意，可以使用 SQL Express）。Biztalk 部署框架 (biztalkdeployment.codeplex.com/discussions) 可能有助于部署到远程服务器。– nonnb 2 天前

# oracle - 如何为数据库实例再添加一个 SID？甲骨文

> ID：12094398
> 
> 赞同：1
> 
> 时间：2012-08-23T14:50:12.253
> 
> 标签：oracle, sid

我想为数据库再添加一个 SID？怎么做？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-23T15:26:55.873

你不能。Oracle 数据库只有一个 SID。您可以为数据库[创建多个服务名称。](http://docs.oracle.com/cd/B19306_01/rac.102/b28759/configwlm.htm#CACFEADG)我不确定你为什么想要拥有多个 SID，但我怀疑你想做的任何事情都可以通过使用服务名称来完成。

# python - Django 1.4 静态文件未找到错误

> ID：12094401
> 
> 赞同：0
> 
> 时间：2012-08-23T14:50:20.817
> 
> 标签：python, django, django-staticfiles, django-1.4

> **可能重复：**
> [尝试在开发服务器上提供 django 静态文件 - 未找到](https://stackoverflow.com/questions/12026010/trying-to-serve-django-static-files-on-development-server-not-found)

我刚刚进入 Python 和 django 的世界，我无法使用 STATIC_URL 设置我的 URL，我目前正在使用 django 1.4 进行本地开发。我阅读了[django 静态文件文档](https://docs.djangoproject.com/en/1.4/howto/static-files/)，似乎已经添加了所有需要的内容，但仍然出现 404 错误。我已经阅读了与此相关的其他关于 SO 的问答，并尝试了各种方法，但无法使其发挥作用。

我从控制台得到的错误

```
http://localhost:8000/blog/static/js/src/models/myfile.js 404 (NOT FOUND) 
```

我的 index.html 页面是其他页面扩展的主页，它具有以下脚本：

```
<script src="{{ STATIC_URL }}/js/src/models/myfile.js"></script> 
```

在查看了关于 SO 的其他问题和答案后，我尝试通过添加来编辑我的视图，因为我的 archive.html 正在呈现数据：

```
from django.template import RequestContext
...
return render_to_response('archive.html', {'categories' : resultSet, 'data': queryData}, context_instance=RequestContext(request)) 
```

我的目录结构 -

```
mysite
|-- manage.py
|-- mysite
    |-- __init__.py
    |-- settings.py
    |-- urls.py
    |-- wsgi.py
 |-- blog
    |-- __init__.py
    |-- models.py
    |-- tests.py
    |-- views.py
    |-- temapltes
        |-- archive.html
        |-- base.html
    |-- static
        |-- js
        |-- myfile.js 
```

我的设置.py

```
MEDIA_ROOT = ''
MEDIA_URL = ''
STATIC_ROOT = ''
STATIC_URL = '/static/'
STATICFILES_DIRS = (
    'C:/Python27/Scripts/mysite/blog/static',
# A Bit confused on the path here
)
STATICFILES_FINDERS = (
    'django.contrib.staticfiles.finders.FileSystemFinder',
    'django.contrib.staticfiles.finders.AppDirectoriesFinder',
)
TEMPLATE_CONTEXT_PROCESSORS = (
    "django.core.context_processors.auth",
    "django.core.context_processors.debug",
    "django.core.context_processors.i18n",
    "django.core.context_processors.media",
    'django.core.context_processors.static',
)
TEMPLATE_DIRS = ( )

INSTALLED_APPS = (
    #..
    'django.contrib.staticfiles',
    'blog',
) 
```

我想我拥有所需的一切，但仍然没有运气。

我哪里出错了，我对设置“STATICFILES_DIRS”路径有点困惑，我怎么能在我的本地机器上让它工作

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-23T15:00:48.320

您应该更改目录结构：

**应用级别：**

```
/blog/static/blog/js 
```

**项目级别：**

```
/static/js 
```

同样在 Django 1.4 中，为了方便起见，您可以使用静态标签：

```
{% load static %}
<img src="{% static 'js/abacadabra.js' %}" /> 
```

最后但并非最不重要的一点是，您可能希望避免硬编码路径，因此请更改：

```
STATICFILES_DIRS = (
    'C:/Python27/Scripts/mysite/blog/static',
) 
```

到：

```
PROJECT_ROOT = os.path.dirname(os.path.abspath(__file__))

STATICFILES_DIRS = (
    os.path.join(PROJECT_ROOT, 'static'),
) 
```

# jquery - Youtube API - 通过 ajax 上传视频

> ID：12094406
> 
> 赞同：0
> 
> 时间：2012-08-23T14:50:37.703
> 
> 标签：jquery, ajax, file-upload, youtube, youtube-api

我正在使用标准 Zend Youtube 库将视频上传到 Youtube。它运行良好，但我需要上传程序无需刷新即可工作。

我试图实现它，但我总是得到： **302 Found** response from youtube upload url, **400 Missing token** was sent to my script

创建上传器的方法

```
public static function showUploadForm($presenter, $id, $name, $comment) {

    $yt = self::getYt(); // these are the account settings

    // create a new VideoEntry object
    $myVideoEntry = new Zend_Gdata_YouTube_VideoEntry();

    $myVideoEntry->setVideoTitle($name);
    $myVideoEntry->setVideoDescription($comment);
    // The category must be a valid YouTube category!
    $myVideoEntry->setVideoCategory('People');

    // Set keywords. Please note that this must be a comma-separated string
    // and that individual keywords cannot contain whitespace
    $myVideoEntry->SetVideoTags('hockey');

    $tokenHandlerUrl = 'http://gdata.youtube.com/action/GetUploadToken';
    $tokenArray = $yt->getFormUploadToken($myVideoEntry, $tokenHandlerUrl);
    $tokenValue = $tokenArray['token'];
    $postUrl = $tokenArray['url'];

    // place to redirect user after upload
    $nextUrl = $presenter->link('//User:videoUploaded', array('id' => $id)); //framework action

    // build the form
    $form = '<form id="youtubeUploader" class="ajaxSetVideoData" action="' . $postUrl . '?nexturl=' . $nextUrl .
            '" method="post" enctype="multipart/form-data">' .
            '<input id="file" name="file" type="file" />' .
            '<input name="submit" type="submit" value="send" />' .
            '<input name="token" type="hidden" value="' . $tokenValue . '"/>'.
            '</form>' .
            '<br />';
    return $form;
} 
```

提前非常感谢。

**编辑**：我发现只有输入“令牌”作为参数发送到 youtube URL。

**EDIT2**：AJAX 和文件上传有问题。有了这个插件，它就可以工作了：http: [//malsup.com/jquery/form/#code-samples](http://malsup.com/jquery/form/#code-samples)

但是现在在两个脚本中仍然得到 302 Found，但是 URL 中的“状态”是 200（第二行），这没关系 - 视频也上传了。 ![在此处输入图像描述](../Images/211deecaa49f4ff14532a619b05fb064.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-23T15:18:09.460

AJAX 和文件上传存在问题。有了这个插件，它就可以工作了：

[http://malsup.com/jquery/form/#code-samples](http://malsup.com/jquery/form/#code-samples)

**已解决**：解决方案是您应该使用 IFRAME 作为异步上传。看这里：

[Youtube IFRAME 上传器](https://stackoverflow.com/questions/4752366/youtube-api-direct-upload-and-return-url-possibly-in-ajax)

# c# - 哪种原生 dotNet 数据类型最适合传送 SQL Server hierarchyId 值？

> ID：12094408
> 
> 赞同：3
> 
> 时间：2012-08-23T14:50:43.510
> 
> 标签：c#, .net, sql-server, sql-server-2008, hierarchyid

具体来说，我们有一个接受 hierarchyId 作为参数的 SQL Server 存储过程，通常我们在存储过程上有一个 SOAP 层，允许通过 SOAP 调用它们。

SOAP 服务是使用 C# 方法上的 [WebMethod] 属性实现的，并且这些方法是使用通常很好地映射到 SQL 服务器类型的本机 dotNet 类型定义的。

目前我不确定在 C# WebMethod 中使用什么数据类型来接受一个 hierarchyId。也许我应该使用“/1/2/3”形式的层次结构路径字符串和一个函数来将其解析为可以传递给存储过程的[SqlHierarchyId 。](http://msdn.microsoft.com/en-us/library/microsoft.sqlserver.types.sqlhierarchyid%28v=sql.105%29.aspx)

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-08-23T14:50:43.510

使用字符串并使用[SqlHierarchyId.Parse()解析它](http://msdn.microsoft.com/en-us/library/microsoft.sqlserver.types.sqlhierarchyid.parse%28v=sql.105%29.aspx)

# php - 是否有任何简单的方法可以将 $options 传递到 symfony2 中，而不是在新建/编辑所有操作时

> ID：12094410
> 
> 赞同：0
> 
> 时间：2012-08-23T14:50:46.920
> 
> 标签：php, forms, symfony

我在我的 FormType 中使用它

```
->add('Task', 'entity', array(
                 'class' => 'Task',
                 'query_builder' => function(EntityRepository $er) use ($options) {
                                     return $er->createQueryBuilder('t') 
                                     ->where('t.id = :id')
                                     ->setParameter('id',$options['id']) 
```

现在为了让它工作，我需要在控制器的表单类型中传递 id

```
$form = $this->createForm(new TaskType(), $task,array('id' => $id)); 
```

现在它可以很好地显示我的所有选项。但后来我忘记了我也需要在`newAction`控制器的功能中放入同样的东西。

我还需要在 EditAction 和 Update 操作中添加相同的内容

所以这意味着我必须在四个地方重复这一点。

此外，如果我有 4 行计算，`$id`那么我必须在四个地方重复所有这些步骤。

最重要的是，当我编辑我的表单时，我的选择没有在我的选择框中预先选择。

然后我必须先设置对象，然后再显示在编辑表单中。

但是，如果我在没有任何这样的查询的情况下使用它

```
->add('user') 
```

然后它可以毫无问题地工作，也可以使用编辑功能。

难道我做错了什么

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-24T07:40:20.580

存在于newAction`id`中，我想它不依赖于用户，也不是从 url 中检索到的。在这种情况下：

## **案例 1：没有从 url 中检索到 id：**

**解决方案 1：**将 entityManager 直接注入表单并执行表单中的逻辑，这样您就不必在控制器中重复此操作。

1-直接在表单中执行逻辑。`id`在构造函数中添加检索您所需的服务。

2-将表单声明为服务，并注入所需的服务（通常是entityManager）以`id`直接获取。

**解决方案2：** 在实体管理器中生成逻辑。创建一个接受`id`并为您创建表单的函数。这样，您总是在不同的控制器中使用相同的功能。

## **案例2：从url中获取id：**

如果它是从 url 获得的，您仍然必须在选项中传递 id 或在构造函数中传递 id。将 id 作为选项传递并不一定意味着您正在重复您的代码。它只是成为必需品，所以必须这样做。

# c - C中的积分提升和平衡有什么区别？

> ID：12094412
> 
> 赞同：0
> 
> 时间：2012-08-23T14:50:52.880
> 
> 标签：c, c99, c89, misra

积分提升和平衡有什么区别。我们是否可以总结这两条规则，即任何类型在执行任何操作之前都转换为至少 int 或 unsigned int 类型（逻辑运算符 &&、||、! 除外），如果任何操作数的类型更大，则转换为更大的类型比 int ?

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-27T07:00:25.980

“积分促销”是旧的C90术语，正式的标准术语是*整数促销*。

整数提升是适用于任何时候将小整数类型（bool、char、short 及其有符号等价物）用作表达式中的操作数的规则。

C11 6.3.1.1/4

> 如果 int 可以表示原始类型的所有值（受宽度限制，对于位域），则该值将转换为 int；否则，它将转换为无符号整数。这些被称为整数促销。整数提升不会改变所有其他类型。

“平衡”是一个非正式术语，指的是一组称为*通常算术转换*的规则。它们说明了操作中每个操作数的所有隐式类型提升是如何完成的。请注意，整数提升是通常算术转换的一部分：

C11 6.3.1.8

> 首先，如果任一操作数的对应实数类型为 long double，则将另一个操作数转换为对应实数类型为 long double 的类型，而不改变类型域。
> 
> 否则，如果任一操作数的对应实数类型为双精度，则将另一个操作数转换为对应实数类型为双精度的类型，而不改变类型域。
> 
> 否则，如果任一操作数的对应实数类型为浮点数，则将另一个操作数转换为对应实数类型为浮点数的类型，而不改变类型域。
> 
> **否则，对两个操作数都执行整数提升。**然后将以下规则应用于提升的操作数：
> 
> 如果两个操作数具有相同的类型，则不需要进一步转换。
> 
> 否则，如果两个操作数都具有有符号整数类型或都具有无符号整数类型，则具有较小整数转换等级的类型的操作数将转换为具有较高等级的操作数的类型。
> 
> 否则，如果无符号整数类型的操作数的等级大于或等于另一个操作数类型的等级，则将有符号整数类型的操作数转换为无符号整数类型的操作数的类型。
> 
> 否则，如果有符号整数类型的操作数的类型可以表示无符号整数类型的操作数类型的所有值，则将无符号整数类型的操作数转换为有符号整数类型的操作数的类型。
> 
> 否则，两个操作数都转换为与带符号整数类型的操作数类型对应的无符号整数类型。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-08-23T15:00:12.490

标准中有两个不同的东西，但没有一个叫做平衡：

> 如果 an`int`可以表示原始类型的所有值（受宽度限制，对于位域），则该值将转换为`int`; 否则，将其转换为`unsigned int`. 这些被称为 *整数促销*.58) 所有其他类型都不受整数促销的影响。

……

> **6.3.1.8 通常的算术转换**许多期望算术类型的操作数的运算符会以类似的方式导致转换和产生结果类型。目的是确定操作数和结果的通用实数类型。

应用于不同类型表达式的运算符的一般思想是将操作数转换为精度损失较小的类型。例如 if `a`is `float`and `b`is double，因为总和在加法之前`a + b` `a`被转换为`double`。类似 if `c`is`unsigned long`它首先转换为`double`for `c + b`。

# ruby-on-rails - Rails 中关联对象的反规范化总和

> ID：12094416
> 
> 赞同：0
> 
> 时间：2012-08-23T14:50:58.527
> 
> 标签：ruby-on-rails

我正在使用 rails 3.0 开发礼品注册表应用程序。该应用程序允许多个客人为礼物捐款。在展示礼物时，我需要显示剩余金额，如果已支付总金额，我需要显示已购买的物品。

对于性能，我想对总贡献的总和以及项目的状态进行非规范化。

看起来很简单，但是当我试图弄清楚如何以一种完全封装的方式将它放入模型中并且在所有情况下都可以工作时，事情变得比我预期的要复杂得多。

我尝试了几种不同的方法，包括对项目和贡献之间的关联进行回调，但最终以对贡献对象的回调结束。

项目.rb

```
class Item < ActiveRecord::Base
  # decimal amount

  # decimal total_contributed
  # boolean purchased
  has_many :contributions, :inverse_of => :item

  def set_total_contributed
    self.total_contributed = 0
    contributions.each do |cont|
      self.total_contributed += cont.amount
    end
    purchased = self.total_contributed >=  amount
  end
end 
```

订单.rb

```
class Order < ActiveRecord::Base
  has_many :contributions, :inverse_of => :order, :dependent => :destroy
end 
```

贡献.rb

```
class Contribution < ActiveRecord::Base
  belongs_to :item, :inverse_of => :contributions
  belongs_to :order, :inverse_of => :contributions

  after_create do |cont|
    item.set_total_contributed
    item.save
  end

  after_destroy do |cont|
    item.contributions.delete(cont)
    item.set_total_contributed
    item.save
  end
end 
```

这似乎在我需要它的情况下工作，但感觉不对。

首先，我必须在销毁回调中手动更新贡献关联的事实似乎很奇怪。

此外，仅当对象被持久化时，非规范化值才会正确更新。

所以问题是，我怎样才能做得更好，这种情况的最佳实践是什么？

# c# - Issues with Magnification API

> ID：12094418
> 
> 赞同：6
> 
> 时间：2012-08-23T14:50:58.980
> 
> 标签：c#, magnification-api

I am having issues with the Magnification API provided my Microsoft. This is an API that is written in C++ so to use it with C# you must use a series of .dll imports as described in [this question](https://stackoverflow.com/questions/2276949/vista-win7-magnification-api-in-net).

My issue came after I had the magnification working. I was using my mouse to magnify a predefined area of the screen, the magnification was set in a rectangle, the rectangle filled a WinForm, I placed the form on top of my mouse (mouse in center of form), and the form would follow my mouse around the screen.

About 80% of the time, the app will launch with a black screen. I tried many different types of updates but can't find a fix. The magnification will not show up, it will only show a black screen. Nothing on the from will show up, only a black screen. In summary, only a black screen will show up, BECAUSE of the Magnification API.

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-23T15:33:32.333

The problem has to deal with Windows 32 and 64 bit systems. There's [a Forum post about this problem](http://social.msdn.microsoft.com/Forums/en-US/windowsaccessibilityandautomation/thread/fdf965da-4d15-4da6-bf40-4f31168c72bf/).

I changed the Build of my project from x86 to Any CPU - fixed the problem, no coding needed.

In Visual Studio 2010: In the Solution Explorer right click your project > choose Properties > choose the Build tab > and under Platform Target choose "Any CPU".

# javascript - 如何确定用户是否使用 jQuery 滚动到 HTML 容器的末尾？

> ID：12094421
> 
> 赞同：3
> 
> 时间：2012-08-23T14:51:02.677
> 
> 标签：javascript, jquery, html, css, scroll

如何确定用户在可滚动容器中是向上滚动还是向下滚动？

jQuery 是否提供任何机制？

CSS：

```
#container {
    display: block;
    width: 250px;
    height: 25px;
    background: green;
}
#scrolling {
    width: 250px;
    height: 300px;
    backround: red;
    overflow: auto;
} 
```

[http://jsfiddle.net/Hmaf2/2/](http://jsfiddle.net/Hmaf2/2/)

非常感谢！

拍

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-23T14:55:00.483

```
$('#somediv').scrollTop() 
```

会告诉你从上到下的位置

-编辑-

```
$('#somediv').scroll(function(){
    if($('#somediv').scrollTop()==0){
        console.log('top')
    }
}) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-23T14:57:03.427

是的，您可以访问可滚动容器的当前[滚动顶部](http://api.jquery.com/scrollTop/)值。

[这里工作的是 jsFiddle。](http://jsfiddle.net/Hmaf2/4/)

```
$('#scrolling').scroll(function() {
   var scrollTop = $(this).scrollTop();
   console.log(scrollTop);
});​ 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-23T16:01:23.673

可以[通过比较](https://stackoverflow.com/questions/6271237/detecting-when-user-scrolls-to-bottom-of-div-with-jquery)div的高度、可滚动高度和滚动偏移量来测试滚动位置：

```
$(document).ready(function(){
    $('#scrolling').scroll(function(){
        var scrollTop = $(this).scrollTop();
        var iheight = $(this).innerHeight();
        var sheight = this.scrollHeight;
        var text = '';
        if (scrollTop <= 5) {
            text = 'top';
        }
        else if (scrollTop+5 >= sheight-iheight) {
            text = 'bottom';
        }
        else {
            text = scrollTop+' middle ('+iheight+','+sheight+')';
        }
        $('#result').text(text);
    });
}); 
```

[fiddle](http://jsfiddle.net/Hmaf2/6/)
这个例子从 div 的边距的顶部和底部保留了 5 个像素。

# sockets - chrome扩展程序和桌面应用程序之间的通信？

> ID：12094423
> 
> 赞同：8
> 
> 时间：2012-08-23T14:51:11.070
> 
> 标签：sockets, google-chrome

我正在开发一个需要与桌面应用程序（非网络）通信的 chrome 扩展程序。该应用程序使用 winsocks，因此理想情况下，chrome 扩展应该使用一些原始套接字 API 进行输入/输出。不过，套接字 API 似乎仍然是实验性的。我还有哪些其他选择？在一个类似的 Firefox 扩展中，我使用了 nsISocketTransportService、nsIScriptableInputStream 和 nsIInputStreamPump 来达到目的。我正在寻找一些铬的等价物。谢谢。

# c# - 具有许多条件的下拉列表 - 从数据库中选择

> ID：12094425
> 
> 赞同：0
> 
> 时间：2012-08-23T14:51:15.503
> 
> 标签：c#, sql-server, algorithm

我想解决问题。我试图做算法，在那里我可以建立一个查询。例如，如果我有 1 或 2 个条件，我可以在具有字符串格式的编程开关上构建我的算法。（图1）

![图。 1](../Images/504bc91785c1c73e648d9ef79d6c6e4a.png)

但如果我想要超过 2 个条件，我会有很多变体。（图 2） ![图。 2](../Images/e11e02903c014f2ee496c36be9bdd42c.png)

我只想从数据库中选择具有不同条件的 SELECT。也许有人知道我应该用什么方法来构建很多不同的条件？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-23T15:20:44.903

只要他们始终查询/过滤相同的非规范化集合，您就可以编写 WHERE 子句构建器，但您需要独立处理每个字段/运算符/值和子句。

字段组合框中的每个值都应对应`table.field`于集合中的一个名称，运算符组合框中的每个值都对应于要添加到子句的 SQL 运算符，并且您输入的值会出现问题，因为您需要区分数字和字符串，格式不带或带单引号。此外，还需要考虑日期格式。

您可能还会让人们对没有意义的字段和运算符进行组合。“之后”对日期有意义，但对电子邮件地址没有意义。考虑通过字段选择的数据类型来限制您在运算符组合中的选择。

# jquery - 粘性页脚将内容推送到页面下方

> ID：12094426
> 
> 赞同：0
> 
> 时间：2012-08-23T14:51:19.367
> 
> 标签：jquery, html, css, footer, sticky-footer

我试图从这里设置粘性页脚

这是 jsfiddle [http://jsfiddle.net/pbhE8/](http://jsfiddle.net/pbhE8/)

还有我的网站：http: [//22twenty.com/Test](http://22twenty.com/Test)

如您所见，页脚被推到内容的基础之外。

我不能再发布链接了，但我相信你可以从发布的网站上获取 css，以及你可能需要的任何其他内容。

希望有人可以帮助

丹佛

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-23T23:34:18.823

我假设您想要做的是让页脚 div 贴在页面底部，但不与页面中间的任何内容重叠。我以前没有使用过“粘性页脚”，但我已经在几个网站上这样做了，这就是我所做的（实际上来自几周前我在这里提出的一个问题。

创建一个`<div>`围绕整个网站内容的内容。将此 div 的 css 设置为：

```
#wrapper {
min-height: 100%;
width: 100%;
position: absolute;
} 
```

为页面中间创建一个内容 div，您的网站的主要内容将与 css 一起使用：

```
#maincontent {
width: 'some width';
height: 'some height';
margin-bottom: 'the height of the footer'
overflow: auto;
} 
```

然后将您的页脚 div 嵌入到带有 css 的“底部”div 中：

```
#bottom {
width: 100%;
position: absolute;
bottom: 0;
} 
```

然后，只要主要内容 div 的边距与页脚 div 的高度相同，它们就不会重叠，但页脚将位于“底部”div 内，该 div 被“卡”在浏览器窗口的底部。

希望这有助于让我知道您是否有任何问题或需要进一步的帮助。

# c# - Web API 控制器不适用于 ASP.NET Web 窗体中的 POST/PUT/DELETE

> ID：12094438
> 
> 赞同：4
> 
> 时间：2012-08-23T14:51:43.923
> 
> 标签：c#, asp.net, rest, jquery, webforms

您好我在尝试使用 Ajax 的 Web API 控制器发布/放置/删除对象时遇到问题。无论我尝试什么，我的`Hello`对象都是 Post/Put as 。`id = 0``hello = null`

我正在做的任何事情都会导致这种行为？

```
//ServicingController.cs
using System.Collections.Generic;
using System.Diagnostics;
using System.Web.Http;

namespace ServicingWebApi.Api
{
    public class ServicingController : ApiController
    {
        public class Hello
        {
            public int id { get; set; }
            public string hello { get; set; }

            public override string ToString()
            {
                return string.Format("id: {0}, hello {1}", id, hello);
            }
        }

        // GET api/<controller>
        public IEnumerable<string> Get()
        {
            return new[] { "value1", "value2" };
        }

        // GET api/<controller>/5
        public string Get(int id)
        {
            return "value";
        }

        // POST api/<controller>
        public void Post(Hello stuff)
        {
            Debug.Write(stuff.ToString());
        }

        // PUT api/<controller>/5
        public void Put(int id, Hello stuff)
        {
            Debug.Write(stuff.ToString());
        }

        // DELETE api/<controller>/5
        public void Delete(int id)
        {
            Debug.Write(string.Format("Deleted id: {0}", id));
        }
    }
} 
```

服务页面.aspx

```
<%@ Page AutoEventWireup="true" CodeBehind="ServicingPage.aspx.cs" Inherits="ServicingWebApi.ServicingPage" Language="C#" %>

<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml">
<head runat="server">
    <title></title>
    <script type="text/javascript" src="Scripts/jquery-1.7.2.min.js"></script>
    <script type="text/javascript">
      $(document).ready(function () {

        //Get
        $('#get').click(function (e) {
          e.preventDefault();
          $.getJSON("api/Servicing");
        });

        //Get Single
        $('#getsingle').click(function (e) {
          e.preventDefault();
          $.getJSON("api/Servicing/" + 1);
        });

        //Post
        $('#post').click(function (e) {
          e.preventDefault();
          var data = JSON.stringify({
            stuff: {
              id: 1,
              hello: "World"
            }
          });
          $.ajax({
            url: "api/Servicing",
            type: "POST",
            contentType: "application/json;charset=UTF-8",
            data: data
          });
        });

        //Put
        $('#put').click(function (e) {
          e.preventDefault();
          var data = JSON.stringify({
            stuff: {
              id: 1,
              hello: "World"
            }
          });
          $.ajax({
            url: "api/Servicing/" + 1,
            type: "PUT",
            contentType: "application/json;charset=UTF-8",
            data: data
          });
        });

        //Delete
        $('#delete').click(function (e) {
          e.preventDefault();
          $.ajax({
            url: "api/Servicing/" + 1,
            type: "DELETE",
            contentType: "application/json;charset=UTF-8",
          });
        });
      });
    </script>
</head>
<body>
    <form id="form1" runat="server">
    <div>
      <button id="get">Get Hello</button>
      <button id="getsingle">Get a Hello</button>
      <button id="post">Post Hello</button>
      <button id="put">Put Hello</button>
      <button id="delete">Delete Hello</button>
    </div>
    </form>
</body>
</html> 
```

全球.asax

```
using System;
using System.Web;
using System.Web.Http;
using System.Web.Routing;

namespace ServicingWebApi
{
    public class Global : HttpApplication
    {

        protected void Application_Start(object sender, EventArgs e)
        {
            RouteTable.Routes.MapHttpRoute(
                "DefaultApi",
                "api/{controller}/{id}",
                new {id = RouteParameter.Optional}
                );
        }

        protected void Session_Start(object sender, EventArgs e)
        {

        }

        protected void Application_BeginRequest(object sender, EventArgs e)
        {

        }

        protected void Application_AuthenticateRequest(object sender, EventArgs e)
        {

        }

        protected void Application_Error(object sender, EventArgs e)
        {

        }

        protected void Session_End(object sender, EventArgs e)
        {

        }

        protected void Application_End(object sender, EventArgs e)
        {

        }
    }
} 
```

包.config

```
<?xml version="1.0" encoding="utf-8"?>
<packages>
  <package id="AspNetWebApi" version="4.0.20710.0" />
  <package id="Microsoft.AspNet.WebApi" version="4.0.20710.0" />
  <package id="Microsoft.AspNet.WebApi.Client" version="4.0.20710.0" />
  <package id="Microsoft.AspNet.WebApi.Core" version="4.0.20710.0" />
  <package id="Microsoft.AspNet.WebApi.WebHost" version="4.0.20710.0" />
  <package id="Microsoft.Net.Http" version="2.0.20710.0" />
  <package id="Microsoft.Web.Infrastructure" version="1.0.0.0" />
  <package id="Newtonsoft.Json" version="4.5.8" />
  <package id="System.Json" version="4.0.20126.16343" />
</packages> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-23T15:00:52.407

试试这种数据格式

```
var data = JSON.stringify({ id: 1, hello: "World" }); 
```

# oracle - 使用 Oracle 的 Simple.Data

> ID：12094449
> 
> 赞同：0
> 
> 时间：2012-08-23T14:52:05.110
> 
> 标签：oracle, simple.data

我创建了一个基本的控制台应用程序，用于在 Oracle 服务器上使用 Simple.Data。但是，在尝试打开连接时出现以下错误：“未找到 ADO 提供程序”。

我安装了以下 NuGet 包：

*   Simple.Data.Core（版本 0.17.0.1）
*   Simple.Data.Ado（版本 0.17.0.1）
*   Simple.Data.Oracle（版本 0.17.0.0）
*   Oracle Data Provier for .NET (ODP.NET) x86（版本 112.3.0）（也尝试了 x64 但无济于事）

这是我的代码：

```
class Program
{
    static void Main(string[] args)
    {
        string connectionString = ConfigurationManager.ConnectionStrings["MyConnectionString"].ConnectionString;
        var db = Database.OpenConnection(connectionString); // this is where I get the error
        var list = db.MyTable.All().ToList();
    }
} 
```

应用程序配置：

```
<?xml version="1.0" encoding="utf-8"?>
<configuration>
  <connectionStrings>
    <add name="MyConnectionString" connectionString="user id=SomeUser;password=SomePwd;data source=MyTNS" />
  </connectionStrings>
  <runtime>
    <assemblyBinding xmlns="urn:schemas-microsoft-com:asm.v1">
      <dependentAssembly>
        <assemblyIdentity name="Oracle.DataAccess" publicKeyToken="89b483f429c47342" culture="neutral" />
        <bindingRedirect oldVersion="0.0.0.0-4.112.3.0" newVersion="4.112.3.0" />
      </dependentAssembly>
    </assemblyBinding>
  </runtime>
</configuration> 
```

MyTNS 确实存在。

我错过了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-23T14:57:27.853

你错过了这个`providerName`属性。

```
<connectionStrings>
    <add name="MyConnectionString" 
         connectionString="user id=SomeUser;password=SomePwd;data source=MyTNS" 
         providerName="Oracle.DataAccess.Client"
         />
  </connectionStrings> 
```

# python - 我无法打印文件的内容

> ID：12094450
> 
> 赞同：0
> 
> 时间：2012-08-23T14:52:07.357
> 
> 标签：python

我有这个代码：

```
# -*- coding: utf-8 -*-
import random
import os, glob

guessesTaken = 0

print('Hello! What is your name?')
name = raw_input()
number = random.randint(1, 20)
print('Well, ' + name + ', I am thinking of a number between 1 and 20.')

while guessesTaken < 6:
    print('Take a guess.') 
    guess = raw_input()
    guess = int(guess)

    guessesTaken = guessesTaken + 1

    if guess < number:
        print('Your guess is too low.')

    if guess > number:
        print('Your guess is too high.')

    if guess == number:
        break

if guess == number:
    guessesTaken = str(guessesTaken)
    print('Good job, ' + name + '! You guessed my number in ' + guessesTaken + ' guesses!')

xa=len(name)
#has= str(name) + '    ' + str(guessesTaken) + 

f='toplevel.data'
with open("f", "a") as myfile:
    myfile.write('name')
    myfile.write(': ')
    myfile.write(name)
    myfile.write('          ')

    if len(name)>7:
        myfile.write((xa-7)*' ')
    elif len(name)==7:
        myfile.write(40*' ')
    else:
        myfile.write((7-xa)*' ')
    myfile.write('score')
    myfile.write(': ')
    myfile.write(guessesTaken) 
```

我有下一个问题，我想在这段代码的末尾打印 toplevel.data 的内容，但我不这样做。
谢谢你的帮助。
`#('gfdsgdgdfgdfgdfgdfgdfgsdgdfgdfgdfgdfgdfgfdgdfgdsfgfdgdfgdfgdfgdfgdfgdfgdfgdf')`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-23T14:55:28.393

首先，您可能想要替换`with open("f", "a") as myfile`为`with open(f, "a") as myfile`. 然后，在脚本的末尾，添加以下内容：

```
with open(f) as myfile:
    print myfile.read() 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-23T14:55:18.437

您正在写入一个名为`"f"`

```
with open(f, "a") as myfile: 
```

或者

```
with open('toplevel.data',"a") as myfile 
```

# android - Android App base 64 公钥

> ID：12094455
> 
> 赞同：12
> 
> 时间：2012-08-23T14:52:23.253
> 
> 标签：android, android-lvl

如何获取（或查看）Android app base 64 公钥？我有许可证文件，并且我之前已经发布了我的应用程序。

我需要许可密钥。

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2015-09-28T02:03:26.237

要查找您的应用程序的公共许可密钥，请执行以下步骤...

1.) 从您发布应用的地方登录到 Google Play 开发者控制台

2.) 在应用程序列表中单击您的应用程序

3.) 点击左侧菜单中的开发者工具

3.) 选择服务和 API

4.) 在许可和应用内计费下，您将看到公钥

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-23T14:55:59.900

要向应用程序添加许可，您必须获取发布者帐户的许可公钥并将其复制到您的应用程序中。以下是查找您帐户的许可公钥的方法：

转至 Google Play 发布者网站并登录。确保您登录到发布（或将发布）您许可的应用程序的帐户。在帐户主页中，找到“编辑个人资料”链接并单击它。在“编辑配置文件”页面中，找到“许可”窗格，如下所示。您的许可公钥在“公钥”文本框中给出。

来源 [http://developer.android.com/guide/google/play/licensing/adding-licensing.html](http://developer.android.com/guide/google/play/licensing/adding-licensing.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-23T14:56:29.637

您的 base64 字符串可能是 X509EncodedKeySpec。我只能猜测。如果是这样，您应该对字符串进行base64解码以获得字节[]。然后从这个字节[]构造一个X509EncodedKeySpec。然后创建一个RSA KeyFactory的实例，并使用这个KeyFactory的generatePublic()方法获取一个PublicKey。然后可以将此公钥传递给 Cipher.init()

# javascript - 函数的“this”无效范围

> ID：12094457
> 
> 赞同：0
> 
> 时间：2012-08-23T14:52:27.807
> 
> 标签：javascript

我有以下功能：

```
 function a() {
    var d = {
      foo : "text"
    };
    for(var b in c) {
      if(c.hasOwnProperty(b)) {
        d[b] = function() {
          return c[b].apply(this, arguments);
        };
      }
    }
    return d;
  }

  var c = {
    a : function() { alert(this.foo); },
    b : function() { return this.a(); }
  }

  a().a(); // nothing happens

  // but the following works :
  var c = {
    a : function() { alert(this.foo); }
  }

  a().a(); // output : text 
```

`this`我认为这是因为`.apply`方法。我怎样才能解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-23T15:01:08.773

它不起作用，因为函数“a”中的迭代器变量“b”由每个闭包**共享。**

试试这个：

```
for(var b in c) {
  if(c.hasOwnProperty(b)) {
    d[b] = function(b) {
      return function() { return c[b].apply(this, arguments); };
    }(b);
  }
} 
```

[这是作为 jsfiddle 的工作版本。](http://jsfiddle.net/Pointy/gSJC4/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-23T15:06:01.800

a() 在全局范围内执行。当您调用 c[b].apply(this, arguments) 时，它也会在全局范围内执行。for循环从后往前迭代，它首先遇到b，它在全局范围内执行b，在全局范围内调用a，在c上循环，在全局范围内调用b，...

结果：RangeError：超出最大调用堆栈大小

# c++ - Creating a graph using Boost Graph library

> ID：12094458
> 
> 赞同：0
> 
> 时间：2012-08-23T14:52:29.277
> 
> 标签：c++, boost, graphviz, boost-graph

I am new to graph theory and graph concept. I am workign on something, that requires me to create a mesh(Undirected graphs) with n number of nodes. Once the structure is created, I would be running various algorithms on the structure, to find a shortest path from a node to other. No for this I have decided to use Boost graph librabry. I read through the online documentation. The online documentation is good but at the same time not sufficient. I went through various examples online and everywhere, they import the graph from Graphviz.

If i am not wrong, we have to manually draw or write a dot program to get a graph in Graphviz and import in .dot format(Please correct me if i am wrong)

But is there a way in Boost where I could create a graph, instead of importing it from GraphViz? And I would let user to decide the number of vertices in it, instead of pre-defining it.

Any help would be very much appreciated. Thanks a ton in advance.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-23T15:02:23.363

这可能不是很正确，但我之前给出了一个回应。

[https://stackoverflow.com/a/3100220/202083](https://stackoverflow.com/a/3100220/202083)

您可以了解如何以编程方式添加节点和边。

我希望这足以让你开始。

# facebook - 获取聊天对话的 FQL 查询

> ID：12094464
> 
> 赞同：4
> 
> 时间：2012-08-23T14:52:43.377
> 
> 标签：facebook, chat, history, facebook-fql

这是代码。结果我想看到我的对话和我朋友的对话。对于对话历史记录功能我该怎么做？

```
SELECT message_id, thread_id, author_id, body, created_time, viewer_id 
FROM message WHERE thread_id IN 
(SELECT thread_id, subject, recipients FROM thread WHERE folder_id =0 )
AND author_id = 'xxxxxxxxxxxxxxx' ORDER BY created_time DESC LIMIT 0,25 
```

此代码仅返回我的朋友数据。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-23T16:54:20.777

您已将返回的评论限制为仅由您的朋友撰写的评论。

改变

```
AND author_id = FRIEND_ID 
```

至

```
AND (author_id = FRIEND_ID OR author_id = me()) 
```

在查询的 `WHERE 子句中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-02-04T08:19:03.267

使用您的原始查询获取 thread_id，然后尝试此 fql 查询。我认为 thread_id 属于整个对话

```
SELECT message_id, thread_id,source,author_id,body,created_time,viewer_id FROM
message WHERE thread_id=THREAD_id AND (author_id=FRIEND_ID OR 
author_id=me() )  ORDER BY created_time DESC LIMIT 0,25 
```

# c++ - 和号和方括号优先

> ID：12094471
> 
> 赞同：4
> 
> 时间：2012-08-23T14:53:02.550
> 
> 标签：c++, c, operators, operator-precedence

我看到很多程序员在表达式周围使用括号，例如：

```
&(tab[i]) /* I use `&tab[i]`. */ 
```

我认为没有必要，因为`[]`运算符的优先级高于`&`运算符。那么，他们为什么要使用括号呢？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-08-23T14:55:22.900

为了清楚起见。不是每个人都记住了所有的运算符优先级。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-08-23T14:56:51.070

我想说，主要有两个原因：

*   程序员不确定运算符优先级和防御性代码
*   让每个读者（可能没有记住优先顺序）绝对清楚发生了什么

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-23T14:56:30.840

确实没有必要，因为后缀运算符总是比一元运算符具有更高的优先级。

使用括号的人`&(tab[i])`使用它们的原因与他们在表达式中使用它的原因相同`(8 * 5) / 2`。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-08-23T14:57:46.427

在最近的一个问题中，有人不得不破译`--p---> x < 0`. 就像您的代码一样，根据 C++ 解析规则，该代码是明确的。

然而，人类并不总是记住所有这些复杂的规则，因此许多程序员养成了在其他人（或他们自己）可能不完全清楚的情况下使用括号的习惯。它记录了代码的真正意图。

这是一件好事™</p>

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-08-23T14:56:09.860

因为他们发现它更清楚？特别是对于这样的事情：

```
int *a[]; 
```

那是指向整数数组的指针还是指向整数的指针数组？

# php - 主页上的类别图像

> ID：12094473
> 
> 赞同：0
> 
> 时间：2012-08-23T14:53:07.170
> 
> 标签：php, magento

我正在使用下面的代码，它将我的所有子类别从我的主要产品类别拉到主页上。

我需要能够以某种方式在`getName`函数下提取子类别的类别图像。我已经尝试过之前提到的一些方法，但都没有奏效。

如果有帮助，我正在使用 1.7.0。

```
<?php $_helper = Mage::helper('catalog/category') ?>
<?php $_categories = $_helper->getStoreCategories() ?>
<?php $currentCategory = Mage::registry('current_category') ?>
<?php if (count($_categories) > 0): ?>
<ul>
    <?php foreach($_categories as $_category): ?>
        <li> 
            <?php $_category = Mage::getModel('catalog/category')->load($_category->getId()); ?>
            <?php $_subcategories = $_category->getChildrenCategories() ?>
            <?php if (count($_subcategories) > 0): ?>
                <ul>
                    <?php foreach($_subcategories as $_subcategory): ?>

                        <li class="item">
                            <a href="<?php echo $_helper->getCategoryUrl($_subcategory) ?>">
                                <?php echo $_subcategory->getName() ?>

                            </a>
                        </li>
                    <?php endforeach; ?>
                </ul>
            <?php endif; ?>
        </li>
    <?php endforeach; ?>
</ul>
<?php endif; ?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-23T15:40:30.350

设法通过将代码更改为下面来实现它

```
<?php
//gets all sub categories of parent category 'Brands'
$cats = Mage::getModel('catalog/category')->load(27)->getChildren();
$catIds = explode(',',$cats);

$categories = array();
foreach($catIds as $catId) {
    $category = Mage::getModel('catalog/category')->load($catId); 
    $categories[$category->getName()] = array(
        'url' => $category->getUrl(),
        'img' => $category->getImageUrl()
    );
}

ksort($categories, SORT_STRING);
?>
<?php foreach($categories as $name => $data): ?>
        <li class="item">
            <a href="<?php echo $data['url']; ?>" title="<?php echo $name; ?>">
            <div style="font:12px/15px Arial,Helvetica,sans-serif; margin-bottom:10px;"><?php echo $name; ?></div>
                <img class="cat-image" src="<?php echo $data['img']; ?>" />
            </a>
        </li>   
    <?php endforeach; ?> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-23T15:46:09.697

你需要在 getName 函数下写这样的东西

```
<img src="<?php echo $_subcategory->getImageUrl()"> 
```

# acs - 尽管拥有 ACS 令牌，但无法自动进行身份验证

> ID：12094474
> 
> 赞同：0
> 
> 时间：2012-08-23T14:53:08.803
> 
> 标签：acs

我正在将 Azure ACS 配置为在我的应用程序中配置为 IdP 的“Google”。我的要求是我不希望每次尝试登录我的应用程序时都显示 IdP 登录页面。我已将我的 ACS 令牌生命周期设置为最长期限，以便我的令牌在一天内有效。

当我第一次登录我的应用程序并在 Google 登录页面中选择“保持登录”时，我可以登录我的应用程序。我现在关闭浏览器，重新打开应用程序，在没有任何凭据请求的情况下成功重定向到应用程序主页。（因为 ACS 内部使用内部创建的会话令牌，它将在下一个请求中使用）

但是，如果我没有在 IdP 登录页面中选择“保持登录”并继续执行相同的步骤，则会要求我提供凭据。知道为什么会这样吗？有没有办法可以操纵会话令牌并验证之前发给我的 ACS 令牌？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-24T23:01:33.597

当您在 Google 上选择“保持登录”时，它会写入一个永久性 cookie，这意味着即使您关闭浏览器，您也会保持登录状态。默认情况下，您的应用程序的 cookie 的范围是会话（假设您使用的是 WIF）。当您关闭并重新打开浏览器时，原始令牌和 cookie 就消失了。您的浏览器会重定向到 ACS，后者会重定向到 Google，由于 Google cookie 存在持久性，它会再次将您重定向回来。使用 Fiddler 或 HttpWatch 运行会话应该表明，即使您选择“保持登录”，您仍会被发送回 ACS 和 Google 并获得新令牌。

听起来您想要的是您的 RP 来“记住”用户，这样他们就不必在令牌生命周期内再次登录。为此，您的联合 cookie（其中包含令牌的）需要设置为持久性，而不是会话。如果您使用的是 WIF，这可以使用FederationAuthenticationModule 上的[CookieHandler 配置来完成（请参阅](http://msdn.microsoft.com/en-us/library/gg638729.aspx)[PersistentSessionLifetime](http://msdn.microsoft.com/en-us/library/microsoft.identitymodel.web.cookiehandler.persistentsessionlifetime.aspx)）。

# r - 获得 R 中分布最均匀的条目

> ID：12094475
> 
> 赞同：0
> 
> 时间：2012-08-23T14:53:11.307
> 
> 标签：r, bioinformatics

我的问题如下：
我`data.frame`在 R 中有一个包含坐标的，例如

```
SNP1  chr1  123456  
SNP2  chr1  156895  
SNP3  chr1  550000  
... 
```

现在我想指定一个区域（例如 chr1:100000-500000）和多个`SNP`s ( `n`) 并找到`n` `SNP`该区域中分布最均匀的那些 s。

我有一个脚本，可以将区域分成`n-1`几块，然后选择最靠近这些块边界的 SNP。它还可以排除`SNP`被命名两次并获得下一个最接近的 s，`SNP`但仍然可能有更好的解决方案来选择它们均匀分布（也许通过某种方式最大化它们之间的总距离，但 s 的总数`SNP`非常高？）。

# php - 计算给定时间戳和偏移量的 DST 是否处于活动状态

> ID：12094477
> 
> 赞同：1
> 
> 时间：2012-08-23T14:53:21.213
> 
> 标签：php, timezone, dst

给定一个相对于 UTC 的 unix 时间戳和时区偏移量（例如 -5），是否可以计算 DST 是否处于活动状态？

我可以做类似的事情：

```
<?php
  echo 'DST enabled? ' . date('I', 1345731453) ."<br>"; 
?> 
```

但我看不到如何传递偏移量或时区。

鉴于特定国家/地区支持 DST，我还猜测时区和偏移量之间存在差异？

欣赏任何想法。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-23T15:06:34.637

正确，您需要从 date 和 tz 开始确定偏移量。

在 5.3+ 中，您可以获得开始/结束期间的转换，因此您可以对两者都使用时间戳，如下所示：

```
$inputTime = $your_unix_timestamp;
$inputTZ = new DateTimeZone('Europe/London'); 

$transitions = $inputTZ->getTransitions($inputTime,$inputTime); 
$offset = $transitions[0]['offset']; 
```

`$offset`是相关时间的 DST 偏移量

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-23T15:05:33.340

获取时区：

```
$old_zone = ini_get('date.timezone'); 
```

将其更改为您想要的：

```
ini_set('date.timezone', 'Europe/Brussels'); 
```

还原：

```
ini_set('date.timezone', $old_zone); 
```

PHP 时间戳始终为 UTC。根据您的时区设置，它确定显示的时间。

# sqlite - 当sqlite中的任何一个可以为空时，如何在多列上设置唯一约束

> ID：12094479
> 
> 赞同：3
> 
> 时间：2012-08-23T14:53:28.820
> 
> 标签：sqlite

当sqlite中的任何一个可以为空时，如何在多列上设置唯一约束？

例如，我制作了 unique("col1","col2","col3") 并尝试了`insert into tablename values("abc","def",null)`两次它已经插入了两行。当第三列为空时，唯一约束不起作用。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-23T15:28:33.060

在 sqlite 中，所有 null 都是差异。我认为解决此问题的最佳方法是将列 c 设置为不为空的特殊默认值。然后使用默认值（例如0，''）来表示null。

# 编辑 1

您可以轻松将此解决方案扩展到任何列

```
create table test (
    a text not null default "",
    b text not null default "",
    c text not null default ""
); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-09-23T07:32:44.763

您可以创建一个触发器来执行此操作：

```
CREATE TRIGGER col1_col2_col3null_unique
BEFORE INSERT ON MyTable
FOR EACH ROW
WHEN col1 IS NOT NULL
 AND col2 IS NOT NULL
 AND col3 IS NULL
BEGIN
    SELECT RAISE(ABORT, 'col1/col2/col3 must be unique')
    FROM MyTable
    WHERE col1 = NEW.col1
      AND col2 = NEW.col2
      AND col3 IS NULL;
END; 
```

对于三列中每个可能的 NULL 组合，您需要一个这样的触发器。此外，如果可能有将此类列更改为 NULL 的 UPDATE，那么您也需要这些触发器。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2016-11-28T13:21:18.630

从版本 3.9.0 (2015-10-14) 开始，您可以在表达式上使用索引 ( [https://www.sqlite.org/expridx.html](https://www.sqlite.org/expridx.html) ) 并使用例如`COALESCE`函数将`null`值转换为某种形式的后备值：

```
CREATE UNIQUE INDEX IX_Unique ON Table1 (
    COALESCE(col1, ""), 
    COALESCE(col2, ""), 
    COALESCE(col3, "")
); 
```

# objective-c - 这种特定的音频操作需要什么 iOS 框架

> ID：12094482
> 
> 赞同：2
> 
> 时间：2012-08-23T14:53:38.150
> 
> 标签：objective-c, ios, xcode, avfoundation, core-audio

在我坐下来阅读有关 CoreAudio 的整本书之前，我想知道它是否是我学习的最佳框架，或者 AVFoundation 是否可以满足我的需要。我希望能够下载位于远程服务器上的 MP3 的一小部分，比如说 20 秒的文件，最好不要先下载整个文件然后修剪它。

然后我想将 2 个音频轨道分层，然后将它们作为一个文件反弹。

我是否需要深入研究 CoreAudio 或者 AVFoundation 可以这样吗？建议非常感谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-23T15:43:59.357

文件的下载部分由您决定，但如果您想将 2 个或多个音频文件混合为一个，AVFoundation 可能是最简单的方法，`AVAssetExportSession`用于进行导出和`AVMutableAudioMix`混合。有一些例子一个简单的编辑器的代码漂浮在苹果文档中，但似乎找不到它，如果我找到了，我会发布链接..

这是一种实际进行混合的方法，请记住，我也在此处添加视频，_audioTracks 和 _videoTracks 是其中包含 AVAssets 的可变数组

```
-(void)createMix
{

    CGSize videoSize = [[_videoTracks objectAtIndex:0] naturalSize];
    AVMutableComposition *composition = [AVMutableComposition composition];
    AVMutableVideoComposition *videoComposition = nil;
    AVMutableAudioMix *audioMix = nil;

    composition.naturalSize = videoSize;

    AVMutableCompositionTrack *compositionVideoTrack = [composition addMutableTrackWithMediaType:AVMediaTypeVideo preferredTrackID:kCMPersistentTrackID_Invalid];
    AVMutableCompositionTrack *compositionAudioTrack = [composition addMutableTrackWithMediaType:AVMediaTypeAudio preferredTrackID:kCMPersistentTrackID_Invalid];

    AVAsset *videoAsset=[_videoTracks objectAtIndex:0];
   CMTimeRange  timeRangeInAsset = CMTimeRangeMake(kCMTimeZero, [videoAsset duration]);
        AVAssetTrack *clipVideoTrack = [[videoAsset tracksWithMediaType:AVMediaTypeVideo] objectAtIndex:0];
        [compositionVideoTrack insertTimeRange:timeRangeInAsset ofTrack:clipVideoTrack atTime:kCMTimeZero error:nil];

        AVAssetTrack *clipAudioTrack = [[videoAsset tracksWithMediaType:AVMediaTypeAudio] objectAtIndex:0];
        [compositionAudioTrack insertTimeRange:timeRangeInAsset ofTrack:clipAudioTrack atTime:kCMTimeZero error:nil];

    NSMutableArray *trackMixArray = [NSMutableArray array];

    if(_audioTracks && _audioTracks.count>0)
    {
        for(AVAsset *audio in _audioTracks)
        {
          //     CMTimeRange  timeRangeInAsset = CMTimeRangeMake(kCMTimeZero, [audio duration]);
           // AVAssetTrack *clipAudioTrack = [[audio tracksWithMediaType:AVMediaTypeAudio] objectAtIndex:0];
            //[compositionAudioTrack insertTimeRange:timeRangeInAsset ofTrack:clipAudioTrack atTime:kCMTimeZero error:nil];

            NSInteger i;
            NSArray *tracksToDuck = [audio tracksWithMediaType:AVMediaTypeAudio]; // before we add the commentary

            // Clip commentary duration to composition duration.
            CMTimeRange commentaryTimeRange = CMTimeRangeMake(kCMTimeZero, audio.duration);
            if (CMTIME_COMPARE_INLINE(CMTimeRangeGetEnd(commentaryTimeRange), >, [composition duration]))
                commentaryTimeRange.duration = CMTimeSubtract([composition duration], commentaryTimeRange.start);

            // Add the commentary track.
            AVMutableCompositionTrack *compositionCommentaryTrack = [composition addMutableTrackWithMediaType:AVMediaTypeAudio preferredTrackID:kCMPersistentTrackID_Invalid];
            [compositionCommentaryTrack insertTimeRange:CMTimeRangeMake(kCMTimeZero, commentaryTimeRange.duration) ofTrack:[[audio tracksWithMediaType:AVMediaTypeAudio] objectAtIndex:0] atTime:commentaryTimeRange.start error:nil];

            CMTime rampDuration = CMTimeMake(1, 2); // half-second ramps
            for (i = 0; i < [tracksToDuck count]; i++) {
                AVMutableAudioMixInputParameters *trackMix = [AVMutableAudioMixInputParameters audioMixInputParametersWithTrack:[tracksToDuck objectAtIndex:i]];
                [trackMix setVolumeRampFromStartVolume:1.0 toEndVolume:0.2 timeRange:CMTimeRangeMake(CMTimeSubtract(commentaryTimeRange.start, rampDuration), rampDuration)];
                [trackMix setVolumeRampFromStartVolume:0.2 toEndVolume:1.0 timeRange:CMTimeRangeMake(CMTimeRangeGetEnd(commentaryTimeRange), rampDuration)];
                [trackMixArray addObject:trackMix];

            }

        }
    }

     // audioMix.inputParameters = trackMixArray;

    if (videoComposition) {
        // Every videoComposition needs these properties to be set:
        videoComposition.frameDuration = CMTimeMake(1, 30); // 30 fps
        videoComposition.renderSize = videoSize;
    }

    AVAssetExportSession *session = [[AVAssetExportSession alloc] initWithAsset:composition presetName:AVAssetExportPreset1280x720];
    session.videoComposition = videoComposition;
    session.audioMix = audioMix;

    NSUInteger count = 0;
    NSString *filePath;
    do {
        filePath = NSTemporaryDirectory();

        NSString *numberString = count > 0 ? [NSString stringWithFormat:@"-%i", count] : @"";
        filePath = [filePath stringByAppendingPathComponent:[NSString stringWithFormat:@"Output-%@.mp4", numberString]];
        count++;
    } while([[NSFileManager defaultManager] fileExistsAtPath:filePath]);      

    session.outputURL = [NSURL fileURLWithPath:filePath];
    session.outputFileType = AVFileTypeQuickTimeMovie;

     [session exportAsynchronouslyWithCompletionHandler:^
     {
         dispatch_async(dispatch_get_main_queue(), ^{
             NSLog(@"Exported");
             if(session.error)
             {
                 NSLog(@"had an error %@", session.error);
             }
             if(delegate && [delegate respondsToSelector:@selector(didFinishExportingMovie:)])
             {
                 [delegate didFinishExportingMovie:filePath];
             }

     });
     }];

} 
```

希望能帮助到你..

丹尼尔

# ruby - Rails / ruby 使用给定距离和从起点开始的方位计算新坐标

> ID：12094484
> 
> 赞同：4
> 
> 时间：2012-08-23T14:53:40.350
> 
> 标签：ruby, ruby-on-rails-3, geolocation, geometry

是否有一种简单的、非数学类的和确定的方法可以在 ruby​​/rails 中执行此操作，其中输入为：

```
1) An Initial Geo-Coordinate 
2) A Bearing
3) A Distance in the Bearing's Direction 
```

输出是一个新的`Geo-Coordinate`

我看过[Ruby Geocoder Gem](http://www.rubygeocoder.com/)，但它没有这样做。

谢谢！

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-23T15:45:10.693

在谷歌中首次点击“距离方位”：[计算纬度/经度点之间的距离、方位等](http://www.movable-type.co.uk/scripts/latlong.html#destPoint)

JavaScript 代码在 Ruby 中运行良好：

```
lat1 = 0.9250245 # starting point's latitude (in radians)
lon1 = 0.0174532 # starting point's longitude (in radians)
brng = 1.67551   # bearing (in radians)
d    = 124.8     # distance to travel in km
R    = 6371.0    # earth's radius in km

lat2 = Math.asin( Math.sin(lat1)*Math.cos(d/R) + 
          Math.cos(lat1)*Math.sin(d/R)*Math.cos(brng) )
# => 0.9227260710962849                  

lon2 = lon1 + Math.atan2(Math.sin(brng)*Math.sin(d/R)*Math.cos(lat1), 
                 Math.cos(d/R)-Math.sin(lat1)*Math.sin(lat2))
# => 0.0497295729068199      

# NB. Ensure that all values are cast to floats 
```

# openlayers - 选择特征控制 OpenLayers

> ID：12094495
> 
> 赞同：3
> 
> 时间：2012-08-23T14:54:22.460
> 
> 标签：openlayers

我一直在使用 OpenLayers，我制作了一个图层树（所有图层都是矢量图层），所有这些图层都有特征，我想要通过选择控件选择这些特征。

我制作了选择功能控件，但问题是当我关闭其中一个图层时（我正在从地图中删除图层以将其关闭），**图标仍然存在，就好像它根本没有关闭...**

我几乎尝试了所有方法，但我不知道为什么会发生这种情况......

有谁知道如何解决这个问题？？？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-23T16:18:48.257

每次停用控件时，您都可以从图层中删除所有功能，而不是删除图层。

# jquery - IE 中的 Tiptip 插件问题

> ID：12094497
> 
> 赞同：0
> 
> 时间：2012-08-23T14:54:29.460
> 
> 标签：jquery, internet-explorer, tooltip

我们正在使用 jquery 的 Jquery tip tip 插件来显示工具提示

我们有树（使用 Jstree-延迟加载）。树节点将仅在单击全部展开按钮时打开。所以树的内容是动态加载的。

为了显示工具提示，我们使用了tiptip

```
 $('a[title]').live('mouseover', function() {
    $(this).tipTip(); 
    $(this).trigger('mouseenter'); 
}); 
```

但在 IE 中，它使用 title 属性和 Tip Tip 插件显示 IE 工具提示（默认）。我们不需要 IE 默认工具提示。请帮助如何避免这种情况

问候哈里

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-16T07:58:26.680

尝试更改属性..现在您使用属性标题..尝试使用自定义更改..尝试更改标题属性，例如...“tiptip”属性..

# javascript - 你能给一个模态窗口（使用 Twitter-Bootstrap）一个 z-index 吗？

> ID：12094498
> 
> 赞同：1
> 
> 时间：2012-08-23T14:54:28.693
> 
> 标签：javascript, jquery, twitter-bootstrap, qtip2

我有一个使用 Qtip2 的表单，如果用户使用无效值提交表单，则 qTips 会正确触发（到目前为止还不错）。但是，假设用户想要点击触发模态窗口出现的按钮，模态窗口出现在表单上方但在 qtips 下方。所以，我在想，只要给 Modal 窗口一个更高的 z-index 值。

[带有 qTip 的模态示例](http://farm9.staticflickr.com/8290/7844787446_57cd3f89a6.jpg)

有没有其他人遇到过这种行为，你做了什么来解决它？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-23T15:49:22.117

最新版本的 bootstrap 显示模态的 z-index 为 1050。我相信 qTip2 的默认 z-index 为 15001，并且从那里开始更高。您必须提高模态的 z-index。

已编辑：删除了不正确的信息。

# c - 将点阵打印机连接到嵌入式 CPU

> ID：12094499
> 
> 赞同：0
> 
> 时间：2012-08-23T14:54:31.417
> 
> 标签：c, embedded

我想将任何 80 列点阵打印机与我的嵌入式设备连接，该设备由 LPC1768 臂控制器开发，带有我自己的微型内核。我需要为此提供驱动程序信息。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-26T08:45:38.163

大多数点阵式打印机使用 RS-232 或 Centronics/ [IEEE 1284](http://en.wikipedia.org/wiki/IEEE_1284)并行端口（有些可能同时支持）。因此，如果您确实需要支持*“任何 80 列点阵打印机”*，那么您将需要在硬件上同时支持这两者。

这些打印机通常会接受纯 ASCII 文本和控制字符，而无需任何特殊的驱动程序或配置。但是，如果您需要使用特殊功能，例如[NLQ](http://en.wikipedia.org/wiki/NLQ#Near_Letter_Quality_.28NLQ.29)、斜体、粗体、浓缩和图形，那么您将需要了解特定打印机的命令语言，其中有几种主要是制造商特定的，因此每种打印机都有不同的驱动程序需要支持的打印机或打印机语言。支持多种打印机的通用打印机语言是[ESC/P](http://en.wikipedia.org/wiki/ESC/P)。

# jquery - jquery .click 被多次调用

> ID：12094503
> 
> 赞同：12
> 
> 时间：2012-08-23T14:54:42.287
> 
> 标签：jquery

使用 jQuery 尝试设置 div 的“单击”方法时，我得到了意想不到的结果。请看[这个 jsfiddle](http://jsfiddle.net/fkMf9/)。请务必打开控制台窗口。单击该词几次并观察控制台输出。当 click 函数只应该被调用一次时，它会被多次调用。

最后注释掉的代码工作得很好。难道我做错了什么？我是 jQuery 的新手。

这是代码：

```
function toggleDiv(status)
{
    console.log("toggleDiv(" + status + ")");
    if (status) {
        $("#test").html("Goodbye");
    }
    else  {
        $("#test").html("Hello");
    }
    $("#test").click(function() {
        toggleDiv(!status);
    });

    // Non-jquery method works fine....
    //document.getElementById("test").onclick = function () {
    //    toggleDiv(!status);
    //}
}​ 
```

更新：看起来有很多方法可以给这只猫剥皮。这里真正的问题是我不理解jQuery“点击”函数添加了另一个处理程序。我认为它取代了当前的处理程序。

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-08-23T14:56:18.153

`.click()`每次您继续单击它时，您都会设置一个新的eventHandler（这反过来会创建更多的事件）。附带说明一下，尽量不要`onclick / onmouseover / onmouseout / etc`在 DOM 元素上使用事件。在 Internet Explorer 中，这些创建脚本块（如果您使用 Visual Studio，您可以清楚地看到。具有数千个这样的页面会极大地降低性能！

看起来您正在尝试实现这一目标：

[**jsFiddle 演示**](http://jsfiddle.net/74AYy/5/)

```
$("#test").on('click', function() {
    var this$   = $(this),
        _status = !!this$.data('status'); // force to boolean
                  // ^will default to false since we have no data-status attribute yet

    this$.html(_status ? 'Hello' : 'Goodbye')
         .data('status', !_status);
});​ 
```

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2012-08-23T14:56:06.143

`click`您正在递归地一遍又一遍地重新注册处理程序。

一个正确的解决方案（许多可能的变化）是这样的：

```
$(function() {
    var status = false;

    $('#test').click(function() {
        status = !status;
        $(this).html(status ? 'Goodbye' : 'Hello');
    });
}); 
```

然后您需要`onclick`从 HTML 中删除该属性 - 混合 DOM0 和 DOM3 事件处理并不好。

见[http://jsfiddle.net/alnitak/8aBxp/](http://jsfiddle.net/alnitak/8aBxp/)

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2012-08-23T15:02:43.567

jQuery click 函数不会覆盖以前的单击处理程序，而是将新的单击处理程序添加到队列中。因此，当再次调用 click 时，会添加一个新的 click 处理程序以及所有旧的 click 处理程序。

为了防止这种情况，您只需要在定义新的处理程序之前清除旧的处理程序。

```
function toggleDiv(status)
{
    console.log("toggleDiv(" + status + ")");
    if (status) {
        $("#test").html("Goodbye");
    }
    else  {
        $("#test").html("Hello");
    }

    $("#test").unbind();

    $("#test").click(function() {
        toggleDiv(!status);
    });
}​ 
```

您可能还想查看[.toggle() 事件处理程序](http://api.jquery.com/toggle-event/)。

**更新**：为了更清楚`.toggle()`，这也将做你想要的：

```
$("#test").toggle(
    function(event) { $(event.target).html("Goodbye"); },
    function(event) { $(event.target).html("Hello"); }
); 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-08-23T14:56:49.833

很可能您正在运行`toggleDiv`多次，导致单击事件被多次绑定。`toggleDiv`在函数外绑定点击事件。

```
var status = false;
function toggleDiv()
{
    console.log("toggleDiv(" + status + ")");
    if (status) {
        $("#test").html("Goodbye");
    }
    else  {
        $("#test").html("Hello");
    }
    status = !status;
}​
$("#test").click(function() {
    toggleDiv(status);
}); 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-08-23T15:06:33.413

最干净的解决方案是：http: [//jsfiddle.net/kannix/fkMf9/4/](http://jsfiddle.net/kannix/fkMf9/4/)

```
 $("#test").click(function() {
     $(this).text(($(this).text() == "Hello") ? "Goodbye" : "Hello");
 }); 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-08-23T14:57:35.663

您应该在函数之外绑定`click`事件。`toggleDiv`当前代码将`click`在每次`$('#test')`点击其中的元素时注册新的事件处理程序，并呈指数增长（因为所有先前`click`的处理程序都会生成一个新的`click`处理程序，因此每次点击处理程序的数量都会翻倍）。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2012-08-23T14:58:12.713

在您的 if 之后，您将另一个点击事件添加到`#test`. 单击时它将调用所有单击处理程序。您可能根本不需要它，因为`onclick`它在 html 中定义。

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2013-06-17T03:57:30.467

同样的问题也发生在我身上。Joseph Erickson 关于 unbind() 的回答有效。如果有帮助，以下是我的代码中如何多次调用 onclick 事件的摘要：

*   AJAX 调用正在更新表的 tbody。tbody 内容是完全动态的。
*   表行被批量检索（通过服务器端捕获）。
*   一个特定的表数据（td）有一个超链接，它有一个与之关联的点击事件。（作为 AJAX 回调函数的一部分添加的点击事件）
*   现在，每次调用 AJAX 时，都会将一个点击事件关联到 td.
*   因此，许多次 AJAX 被调用，许多点击处理程序被附加到 td.

我按照约瑟夫埃里克森的建议解决了这个问题。在 AJAX 回调中，我现在这样做： $(".msgLinkDiv").unbind(); (".msgLinkDiv").click(function(e){do my stuff});

# r - 如何选择 persp() 中构面的颜色？

> ID：12094505
> 
> 赞同：1
> 
> 时间：2012-08-23T14:54:48.237
> 
> 标签：r, graphics

这个问题是关于`graphics::persp`。我试图弄清楚`colors`参数中的值应用于构面的顺序。例如，我想做类似于 中的`drape`参数的事情`lattice::wireframe`，其中​​颜色是 z 值的函数。我尝试了一个简单的例子：

```
gairy<- matrix(rep(1,61^2),nr=61)
gairy[20:40,20:40]<-10
fairy<- matrix(nc=61,nr=61)
fairy[,]<-rainbow(20)[gairy]
persp(gairy,col=fairy) 
```

（希望这可行——从工作中发帖的选择有限）
[https://plus.google.com/photos/102564725150183579541/albums/5779881398012083153](https://plus.google.com/photos/102564725150183579541/albums/5779881398012083153)

但是颜色分配出现在相当奇怪的地方。从这个和其他实验中我很确定颜色不会应用于任何行或列顺序的序列。任何人都可以对此有所了解，即如何订购我的“颜色”数组以匹配数据？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-23T15:29:28.460

我怀疑传递给的主矩阵`persp`表示节点的高度，而颜色指的是**面**——即颜色矩阵的维度应该比节点高度矩阵的维度小一。回收可能会给你带来奇怪的结果。

例如，这看起来很合理：

```
persp(matrix(1:16,nrow=4),col=rainbow(9)) 
```

# c++ - 没有可用的 MIDI 端口

> ID：12094508
> 
> 赞同：1
> 
> 时间：2012-08-23T14:54:59.233
> 
> 标签：c++, ubuntu, midi

我正在尝试配置我的 midi 设置，以便可以在我的笔记本电脑中使用 midi IO。我开始胆怯：

```
jackd -R -P 70 -d alsa -p 256 -n 3 -r 44100 
```

然后通过做

```
aplaymidi -l 
```

我得到：

```
Port    Client name                      Port name
14:0    Midi Through                     Midi Through Port-0
128:0    TiMidity                         TiMidity port 0
128:1    TiMidity                         TiMidity port 1
128:2    TiMidity                         TiMidity port 2
128:3    TiMidity                         TiMidity port 3 
```

胆小的服务器上似乎有 4 个端口可用。但是，当我尝试查找输出端口时，我的 C++ 应用程序没有找到任何东西（它使用 Rtmidi 库）。

```
int main(){

RtMidiOut *midiout = 0;
midiout = new RtMidiOut();
std::vector<unsigned char> message;
midiout->openVirtualPort();

unsigned int nPorts = midiout->getPortCount();

if (nPorts == 0) {
    std::cout << "No ports available!\n";
    return;
}
std::cout << "\nThere are " << nPorts << " MIDI output ports available.\n";
} 
```

# pylons - 在 jinja2 中获取请求 URI？

> ID：12094521
> 
> 赞同：2
> 
> 时间：2012-08-23T14:55:23.233
> 
> 标签：pylons, jinja2

我正在使用 Jinja2 模板开发 Pylons 项目。我想测试 Jinja2 模板中的请求 URI 和/或控制器 - 是否有等效于 getRequestUri() 调用的方法？我可以在所有控制器方法中将上下文变量设置为标志来做我想做的事，但这似乎有点像在我的每一个房子钥匙上写我的家庭地址......即不是正确的做法它。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-23T19:11:46.757

解决方案：不完全是函数调用，但我可以针对 url.environ.PATH_INFO 进行测试。它只给了我 URL 路径，而不是主机名，而且我不知道它会给我查询字符串，但它给了我我需要的东西。

# c# - 从嵌套 ToolStripMenuItem 检索时 ContextMenuStrip.Owner 属性 null

> ID：12094528
> 
> 赞同：12
> 
> 时间：2012-08-23T14:55:36.843
> 
> 标签：c#, .net, winforms, contextmenustrip

我有`ContextMenuStrip`两个`ToolStripItem`s 的设置。第二个`ToolStripItem`有两个额外的嵌套`ToolStripItem`s。我将其定义为：

```
ContextMenuStrip cms = new ContextMenuStrip();
ToolStripMenuItem contextJumpTo = new ToolStripMenuItem();
ToolStripMenuItem contextJumpToHeatmap = new ToolStripMenuItem();
ToolStripMenuItem contextJumpToHeatmapStart = new ToolStripMenuItem();
ToolStripMenuItem contextJumpToHeatmapLast = new ToolStripMenuItem();

cms.Items.AddRange(new ToolStripItem[] { contextJumpTo,
                                         contextJumpToHeatmap});
cms.Size = new System.Drawing.Size(176, 148);

contextJumpTo.Size = new System.Drawing.Size(175, 22);
contextJumpTo.Text = "Jump To (No Heatmapping)";

contextJumpToHeatmap.Size = new System.Drawing.Size(175, 22);
contextJumpToHeatmap.Text = "Jump To (With Heatmapping)";
contextJumpToHeatmap.DropDownItems.AddRange(new ToolStripItem[] { contextJumpToHeatmapStart, 
                                                                  contextJumpToHeatmapLast });

contextJumpToHeatmapStart.Size = new System.Drawing.Size(165, 22);
contextJumpToHeatmapStart.Text = "From Start of File";

contextJumpToHeatmapLast.Size = new System.Drawing.Size(165, 22);
contextJumpToHeatmapLast.Text = "From Last Data Point"; 
```

`ToolStripMenuItem`然后我为我想要响应的三个 s 的点击事件设置了一个事件监听器。以下是方法（我只列出了三种方法中的两种）：

```
void contextJumpTo_Click(object sender, EventArgs e)
{
    // Try to cast the sender to a ToolStripItem 
    ToolStripMenuItem menuItem = sender as ToolStripMenuItem;
    if (menuItem != null)
    {
        // Retrieve the ContextMenuStrip that owns this ToolStripItem 
        ContextMenuStrip owner = menuItem.Owner as ContextMenuStrip;
        if (owner != null)
        {
            // Get the control that is displaying this context menu 
            DataGridView dgv = owner.SourceControl as DataGridView;
            if (dgv != null)
                // DO WORK
        }
    } 
}

void contextJumpToHeatmapStart_Click(object sender, EventArgs e)
{
    // Try to cast the sender to a ToolStripItem 
    ToolStripMenuItem menuItem = sender as ToolStripMenuItem;
    if (menuItem != null)
    {
        // Retrieve the ToolStripItem that owns this ToolStripItem 
        ToolStripMenuItem ownerItem = menuItem.OwnerItem as ToolStripMenuItem;
        if (ownerItem != null)
        {
            // Retrieve the ContextMenuStrip that owns this ToolStripItem 
            ContextMenuStrip owner = ownerItem.Owner as ContextMenuStrip;
            if (owner != null)
            {
                // Get the control that is displaying this context menu 
                DataGridView dgv = owner.SourceControl as DataGridView;
                if (dgv != null)
                    // DO WORK
            }
        }
    }
} 
```

这是我遇到的问题：

我的`contextJumpTo_Click`方法效果很好。我们一直到我确定`DataGridView`点击来自哪里，我可以继续。但是，它`contextJumpTo` `ToolStripMenuItem`不是`ContextMenuStrip`.

但是我的方法`contextJumpToHeatmapStart_Click`不起作用。当我到达我确定的那一行时`owner.SourceControl`，它`SourceControl`是空的，我无法继续。现在我知道这`ToolStripMenuItem`是嵌套在 my 中的另一个之下`ContextMenuStrip`，但为什么我的`SourceControl`属性突然为空`ContextMenuStrip`？

如何获得`SourceControl`for a 嵌套`ToolStripMenuItem`for a `ContextMenuStrip`？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-08-23T17:13:25.487

我相信这是一个错误。

我试图爬上工具条父项列表以找到 ContextStripMenu 所有者，它有效，但 SourceControl 属性始终为空。

看起来常见的解决方法是在打开上下文菜单时设置控件：

```
private Control menuSource;

cms.Opening += cms_Opening;

void cms_Opening(object sender, CancelEventArgs e) {
  menuSource = ((ContextMenuStrip)sender).SourceControl;
} 
```

然后你的代码基本上变成了这样：

```
DataGridView dgv = menuSource as DataGridView;
if (dgv != null) {
  // do work
} 
```

# iis-7 - 在浏览器中键入 localhost 会引发 HTTP 401.2 UnAuthorized 错误：IIS 7.5

> ID：12094529
> 
> 赞同：1
> 
> 时间：2012-08-23T14:55:37.227
> 
> 标签：iis-7, iis-7.5, localhost

当我在浏览器中键入 localhost 时，我看不到通常会显示的 IIS 页面，而是抱怨 HTTP 401.2 UnAuthorized 错误。我正在运行 IIS 7.5。

我尝试更改 C:\Windows\System32\drivers\etc 中的主机文件以包含

```
127.0.0.1       localhost 
```

（不带#号）

还有什么我需要做的才能让这个工作。请帮忙。

详细的错误信息

```
Module  IIS Web Core
Notification    AuthenticateRequest
Handler StaticFile
Error Code  0x80070005
Requested URL   http://localhost:80/
Physical Path   C:\inetpub\wwwroot
Logon Method    Not yet determined
Logon User  Not yet determined 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-23T15:07:37.053

看起来像一个身份验证问题。启用了哪种类型的身份验证？你是怎么处理的？

如果您不需要身份验证，请检查是否**仅启用匿名身份验证。**并确保 IIS 应用程序池工作线程可以访问保存您网站的文件夹。

# python - 过滤 django 新闻帖子

> ID：12094530
> 
> 赞同：2
> 
> 时间：2012-08-23T14:55:40.270
> 
> 标签：python, django

我是 Django 新手，我有一篇新闻文章，在同一个模板上，我在右侧有一个部分显示所有最新文章。但是，当您在主要新闻帖子之一上时，它也会显示在右侧的“最新新闻”选项卡中。

我很确定我需要使用 .exclude 过滤掉正在显示的那个。但是我不知道 django 如何知道正在显示哪个帖子。

如果您需要查看我的代码，请询问。我只使用基本模型/视图来输出数据。

显示最新 3 个帖子的行：

```
other_news = NewsPost.objects.filter(live=True, categories__in=post.categories.all).distinct().order_by("-posted")[:3] 
```

模板代码：

```
<div class='related_article_wrapper'>
            {% if other_news %}
                {% for news in other_news %}

                <div class="article_snipppet_wrap">

                    <img class="article_icon" src="/media/images/article_icon.png"  alt="" />
                        <p>{{news.title}}</p>
                        <span><a href="{{news.get_absolute_url}}">{{news.posted|date:"d/m/y"}} &#187;</a></span>

                </div>

            {% endfor %}
            <span><a style="text-decoration: none; href="/news-hub/news/">View all news &#187;</a></span>
            {% endif %}

            </div> 
```

谢谢，

乔什

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-23T15:36:41.773

只需添加`.exclude(id=post.id)`到您的过滤器链：

```
other_news = NewsPost.objects.exclude(id=post.id).filter(live=True,    
    categories__in=post.categories.all).distinct().order_by("-posted")[:3] 
```

[`exclude()`](https://docs.djangoproject.com/en/1.4/ref/models/querysets/#django.db.models.query.QuerySet.exclude)采用与 相同格式的参数`filter()`，它只是做相反的事情！

# javascript - 在函数内部完成时，对 JQuery 对象调用过滤器方法不起作用

> ID：12094531
> 
> 赞同：0
> 
> 时间：2012-08-23T14:55:42.320
> 
> 标签：javascript, jquery

我对 jQuery 尤其是 javascript 的了解一直非常有限，我正在努力变得更好。

考虑到这一点，我正在尝试创建某种“可扩展的验证框架”，因为我可以创建一个带有验证函数及其错误消息的对象，将其推送到一个数组中，然后调用所有这些方法并报告来自那些失败的。

所以首先我做了一些非常简单的事情，只是为了看看基本的验证是这样的：

```
var selectedTourDate = $("#tourDate").val();
var list = $("#bookedTourDate *");

var isDateBooked = list.filter(function () {
    return (this.innerHTML == selectedTourDate) ;
}).length !== 0;

if (isDateBooked) {
    alert("Date invalid");
    return;
} 
```

这工作正常。

然后我创建了我的“框架”，它是这样的：

```
function Validator(fn, errorMessage) {
    this.validationFunction = fn;
    this.errorMessage = errorMessage;
};

var validationRunner = {
    validators: [],
    errorMessages: [],
    validationResult: true,

    addValidation: function (validator) {
        validationRunner.validators.push(validator);
    },

    validate: function () {
        for (var validator = 0; validator < validationRunner.validators.length; validator++) {
            if (validationRunner.validators[validator] instanceof Validator) {
                var result = validationRunner.validators[validator].validationFunction();
                validationResult = validationRunner.validationResult && result;

                if (!result)
                    validationRunner.errorMessages.push(validationRunner.validators[validator].errorMessage);
            }
        }
    },

    getErrorMessage: function () {
        var message = "<ul>";

        for (var errorMessage = 0; errorMessage > validationRunner.errorMessages.length; errorMessage++) {
            message += "<li>" + errorMessage + "</li>";
        }

        message += "</ul>";
        return message;
    }
} 
```

然后修改第一块代码如下：

```
var selectedTourDate = $("#tourDate").val();
var list = $("#bookedTourDate *");

var tmp = new Validator(function () {
    return list.filter(function () {
         return (this.innerHTML == selectedTourDate);
    }).length !== 0;
}, "Date already booked");

validationRunner.addValidation(tmp);
validationRunner.validate();
var msg = validationRunner.getErrorMessage(); 
```

这根本不起作用。

似乎问题在于在此声明中：

> 返回（this.innerHTML == selectedTourDate）；

“this”是 Validator 对象，而不是列表中的 html 元素，这让我感到困惑，因为它应该在“filter”方法的函数内部。

有没有办法纠正这个问题，所以我可以在这里完成我想要做的事情？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-23T15:18:43.777

`this`确实有正确的值，但 . 中有一些错误`getErrorMessage function`。

要检查的值`this`不要依赖调试器的“监视变量”函数，而是执行一个`console.log`它将在代码执行的特定点为您提供值。

我的变化：

```
 for (var errorMessage = 0; errorMessage < validationRunner.errorMessages.length; errorMessage++) {
        message += "<li>" + validationRunner.errorMessages[errorMessage] + "</li>";
    } 
```

该`errorMessage`变量只是一个索引，而不是实际的错误消息。您还使用了“大于”而不是“小于”符号。

这是[一个小提琴](http://jsfiddle.net/sbBTx/4/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-23T15:20:11.530

这很奇怪，因为这应该是每个[jquery api](http://api.jquery.com/filter/)的当前 DOM 元素。

不过，该函数应该将索引作为参数。那么试试呢

```
return list.filter(function (i) {
  return (list.get(i).innerHTML == selectedTourDate);
}).length !== 0; 
```

# curl - 为什么 cURL 不适用于 IIS7 上的 Windows 身份验证？

> ID：12094535
> 
> 赞同：32
> 
> 时间：2012-08-23T14:55:56.613
> 
> 标签：curl, windows-authentication

我正在尝试访问 Windows 身份验证背后的服务。我以为我可以像传递 HTTP 基本身份验证凭据一样传递凭据，但它不起作用。当我执行以下操作时，我收到 401 错误，我绝对确定密码是正确的。

```
curl --user username:password http://example.com 
```

为什么这不起作用？

* * *

## 回答 #1

> 赞同：47
> 
> 时间：2012-08-23T14:55:56.613

如果您使用的是 Windows 身份验证，则需要使用 NTLM：

```
curl --ntlm --user username:password http://example.com 
```

* * *

## 回答 #2

> 赞同：37
> 
> 时间：2015-02-20T15:28:33.653

您还可以将用户名和密码字段留空 ( `-u :`)，curl 将使用您当前环境中的凭据：

```
curl --ntlm -u : http://example.com 
```

根据[文档](http://curl.haxx.se/docs/manpage.html)（下`-u, --user`）

> 如果您使用启用了 Windows SSPI 的 curl 二进制文件并执行 Kerberos V5、Negotiate、NTLM 或 Digest 身份验证，那么您可以通过使用此选项指定单个冒号来告诉 curl 从您的环境中选择用户名和密码：“-u :” .
> 
> [启用 Kerberos 的二进制文件](https://skanthak.homepage.t-online.de/curl.html)

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2017-04-14T23:04:46.307

我只想补充一点，授权可能包括几个重定向，并且第二个或后续请求可能需要 NTLM 身份验证，但不是第一个。在这种情况下，这里的答案将不起作用。

问题是，CURL*仅使用第一个请求*发送凭据，而您可能需要它们用于第二个请求。要通过所有请求传递凭据，请使用该`--location-trusted`选项。

来自 CURL 文档（[`-L`选项](https://curl.haxx.se/docs/manpage.html#-L)）：

> 使用身份验证时，curl 仅将其凭据发送到初始主机。如果重定向需要 curl 到不同的主机，它将无法拦截用户+密码。另请参阅 --location-trusted 以了解如何更改此设置。

这份重要说明帮助我在公司网站上进行了授权。希望对其他人有所帮助。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2018-06-19T09:46:11.917

我和你有同样的问题，但是我通过调整 iis 服务器配置来进行身份验证，启用 HTTP 基本或摘要身份验证，完成后，你可以使用最简单的身份验证，对不起我的英语不好

# powershell - 为自定义 Powershell 提供程序设置一键安装

> ID：12094544
> 
> 赞同：0
> 
> 时间：2012-08-23T14:56:18.303
> 
> 标签：powershell, provider, snap-in, pssnapin

我创建了一个自定义 Powershell 提供程序。但是，目前人们必须执行几个步骤才能使其在用户的计算机上运行：

1.  配置 Powershell 以针对 .Net 4 运行（在 c:\Windows\System32\WindowsPowerShell\v1.0 中添加配置文件）
2.  添加自定义格式化程序（到 System32 的 c:\Windows\System32\WindowsPowerShell\v1.0）。
3.  注册管理单元。

其余设置步骤由自定义 powershell 脚本完成。

我想知道是否有人可以分享他们在简化流程方面的经验。理想情况下，我希望人们从单个命令运行（理想情况下是完成上述所有步骤的 CommandLet。

有没有人可以分享任何链接或建议或最佳实践？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-28T12:12:59.913

我发现以下片段可能会有所帮助。

**VS 命令提示符变量**

对于 Visual Studio 命令，您可以尝试 Lee Holmes 的[http://poshcode.org/2176](http://poshcode.org/2176)或 Powershell Communit 扩展 (PSCVX)。都来自[https://superuser.com/questions/104868/run-visual-studio-command-line-tools-in-windows-powershell](https://superuser.com/questions/104868/run-visual-studio-command-line-tools-in-windows-powershell)。

之后，它只是格式化程序和/或注册管理单元。

**配置 Powershell 以使用 .Net4**

[如何使用 .NET 4 运行时运行 PowerShell？](https://stackoverflow.com/questions/2094694/how-can-i-run-powershell-with-the-net-4-runtime)

# objective-c - NSDictionary objectAtIndex 上的 SIGABRT：无法识别的选择器

> ID：12094550
> 
> 赞同：0
> 
> 时间：2012-08-23T14:56:29.800
> 
> 标签：objective-c, ios, cocoa-touch, nsarray, catiledlayer

我在这里遇到了一个奇怪的错误。我有一个名为 __ImageData 的数组：

```
static NSArray *__ImageData = nil;
NSString *path = [[NSBundle mainBundle] pathForResource:@"ImageData" ofType:@"plist"];
NSData *plistData = [NSData dataWithContentsOfFile:path];
NSString *error; NSPropertyListFormat format;
_ImageData = [NSPropertyListSerialization propertyListFromData:plistData
                                              mutabilityOption:NSPropertyListImmutable
                                                        format:&format
                                              errorDescription:&error]; 
```

当我 NSLog 出数组的内容时，我得到这个输出：

```
2012-08-23 16:36:35.573 CAT[28814:c07] {
    "Item 0" =     {
        height = 7121;
        name = Map1;
        width = 8556;
    };
    "Item 1" =     {
        height = 7121;
        name = Map2;
        width = 8556;
    };
    "Item 2" =     {
        height = 7121;
        name = Map3;
        width = 8556;
    };
} 
```

但是当我 NSLog out 时`NSLog(@"%@", [__ImageData objectAtIndex:0]);`，我得到了这个异常：

```
2012-08-23 16:36:35.573 CAT[28814:c07] -[__NSCFDictionary objectAtIndex:]: 
unrecognized selector sent to instance 0x719d0f0
2012-08-23 16:36:35.574 CAT[28814:c07] *** Terminating app due to uncaught exception 
'NSInvalidArgumentException', reason: '-[__NSCFDictionary objectAtIndex:]: 
unrecognized selector sent to instance 0x719d0f0'
*** First throw call stack: 
```

ETC..

我不知道如何到达这个数组中的一个对象.. 似乎 objectAtIndex 找不到任何索引，甚至没有索引：0，即使里面有数据.. 有人知道如何获取它吗？我正在使用 Apple 的 PhotoScroller 模板，使用`CATiledLayer`. 我认为整个事情有点时髦，但每个人都说我们应该将它用于大图像。对于巨大的图像，任何人都有比 CATiledLayer 更好的解释或想法吗？（8556*7121 像素）。

为什么我会从 NSArray 得到 Dictionary-error？做的时候`NSDictionary *dict = [__ImageData objectAtIndex:0]`，我也得到了同样的例外。

斯蒂安。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-23T15:21:47.427

`_ImageData`不是数组，而是字典。要显示字典的第一个元素，您可以执行以下操作：

```
NSLog(@"%@", [_ImageData objectForKey:@"Item 0"]); 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2015-03-30T17:12:58.813

我使用 JSON 数组遇到了同样的问题。我的解决方法是将其转换为 NSDictionary，如下所示：

```
[(NSDictionary *)json objectForKey:@"detail"]; 
```

或者你可以这样做：

```
NSDictionary *dict = (NSDictionary *)array; 
```

# python - 在后台线程 python/pygtk 中运行计算

> ID：12094555
> 
> 赞同：4
> 
> 时间：2012-08-23T14:56:46.120
> 
> 标签：python, multithreading, pygtk, python-imaging-library, gil

有没有办法在耗时的指令期间在后台运行 python 线程而不锁定 python 的其余部分？

我正在尝试在 python (pygtk) 应用程序的后台线程中进行耗时的计算。我了解线程是如何工作的。问题是每次我在任何线程中运行昂贵的操作（例如：PIL 的 image.load() 用于大图像）时，它都会阻塞所有 python 线程，直到操作完成，即使它位于单独的线程中。

那么，有没有办法在后台运行 python 线程而不锁定 python 的其余部分？（只要他们不锁定我的 GUI，我不在乎他们需要多长时间。我只是不能让我的 GUI 一次无响应几秒钟）。使用睡眠语句不起作用，因为我的问题是需要很长时间的单个命令（如 image.load()）。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-23T17:06:06.790

由于您使用的是 pygtk，所以您打电话了`threads_init()`吗？

对于较新的版本：

```
>>> from gi.repository import GObject
>>> GObject.threads_init() 
```

对于老年人：

```
>>> import gobject
>>> gobject.threads_init() 
```

还要确保你没有从你的线程中调用任何 GUI 方法，否则你的应用程序会以奇怪的方式中断。一个简单的方法是使用`GObject.idle_add`：

> idle_add(callable, user_data=None, priority=None) -> source id callable接收(user_data)
> 
> 每当没有更高优先级的事件挂起到默认主循环时，添加一个要调用的可调用对象。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-23T15:31:41.180

为了在后台进行处理，您还可以使用 python 的子进程。它将创建一个 sub_process （独立于原始执行），您可以使用 .poll 在特定时间间隔检查该过程是否已完成。如果您运行 .communicate 则整个进程将等待子进程完成。另外，您可以参考此文档：[-threading-subprocess](https://bitbucket.org/daybreaker/kaist-cs443/src/247f9ecf3cee/tools/manage.py)

我也相信有一些方法可以解决你的问题，只需在 python 中使用普通线程即可。

# c++ - 应用程序的错误应用程序名称问题

> ID：12094557
> 
> 赞同：0
> 
> 时间：2012-08-23T14:56:46.547
> 
> 标签：c++, visual-studio-2005

我有一个如下所示的代码

```
if ((client == NULL) || (client->type == Leave_Agent)) { 
```

但是当我用以下代码更改它时，我在事件日志中收到错误修改后的代码如下所示

```
if (((client == NULL)|| (client->type == Leave_Agent)) && (client->type == 0)) { 
```

事件日志中的错误是

```
Faulting application name: test.exe, version: 8.0.16.0, time stamp: 0x5036427e 
```

任何人都可以指导我如何解决这个问题，这会停止我的应用程序。 && 运算符会在 c++ 中产生任何问题？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-23T15:00:03.147

> ```
> if (((agent == NULL)|| (agent->type == SPUES_ntAgent)) && (agent->type == 0)) 
> ```

如果代理是，`NULL`那么左侧`&&`将始终为真并且`agent->type`将始终被访问。因此，`NULL`代理确保`NULL`取消引用。

您应该更改您的代码以确保它仅在**它不为 NULL 时才被取消引用。**

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-23T14:59:49.323

我认为您想移动 () 以便在指针为 NULL 时永远不会取消引用：

```
if ((agent == NULL)|| ((agent->type == SPUES_ntAgent) && (agent->type == 0))) { 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-23T15:00:12.757

问题是你可以达到这个

```
agent->type == 0 
```

当`agent==NULL`.

在不知道您期望什么行为的情况下，我无法评论如何解决。至少你应该确保`agent`如果它是`==NULL`.

# magento - magento - “无效的块类型”异常

> ID：12094558
> 
> 赞同：0
> 
> 时间：2012-08-23T14:56:49.410
> 
> 标签：magento, magento-1.4, magento-1.5, magento-1.6, magento-1.7

我在自己的客户模块中创建了一个新块，这是 config.xml：

```
<?xml version="1.0"?>
<config>
    <modules>
        <Nauba_Customer>
            <version>1.6.2.0.3</version>
        </Nauba_Customer>
    </modules>
    <global>
        <resources>
            <nauba_customer_setup>
                <setup>
                    <module>Nauba_Customer</module>
                </setup>
            </nauba_customer_setup>
        </resources>
        <blocks>
            <nauba_customer>
                <class>Nauba_Customer_Block</class>
            </nauba_customer>
            <customer>
                <rewrite>
                    <form_register>Nauba_Customer_Block_Form_Register</form_register>
                </rewrite>  
            </customer>
        </blocks>  
        <models>
            <customer>
                <rewrite>
                    <customer>Nauba_Customer_Model_Customer</customer>
                </rewrite>
            </customer>
        </models>    
    </global>  
    <frontend>
        <routers>
            <customer>
                <args>
                    <modules>
                        <Nauba_Customer before="Mage_Customer">Nauba_Customer</Nauba_Customer>
                    </modules>
                </args>
            </customer>
        </routers>
    </frontend>         
</config> 
```

现在我试图在主页中调用它，所以我在 page.xml 布局中指定了它：

```
<!-- this is only the home page section -->

<page_homepage translate="label">
    <label>Homepage</label>
    <reference name="root">
        <!--reference name="head">
            <action method="removeItem"><type>skin_css</type><name>css/styles.css</name></action>
            <action method="removeItem"><type>skin_css</type><name>css/styles-ie.css</name></action>
            <action method="removeItem"><type>skin_css</type><name>css/widgets.css</name></action>
            <action method="removeItem"><type>skin_css</type><name>css/print.css</name></action>                
        </reference-->

        <block type="page/html" name="category_links" template="page/html/category_links.phtml" />

        <block type="cms/block" name="homepage_slider_image_1" as="homepage_slider_image_1">
            <action method="setBlockId"><block_id>homepage_slider_image_1</block_id></action>
        </block>
        <block type="cms/block" name="homepage_slider_image_2" as="homepage_slider_image_2">
            <action method="setBlockId"><block_id>homepage_slider_image_2</block_id></action>
        </block>
        <block type="cms/block" name="homepage_slider_image_3" as="homepage_slider_image_3">
            <action method="setBlockId"><block_id>homepage_slider_image_3</block_id></action>
        </block>
        <block type="cms/block" name="homepage_slider_image_4" as="homepage_slider_image_4">
            <action method="setBlockId"><block_id>homepage_slider_image_4</block_id></action>
        </block>

        <block type="cms/block" name="homepage_event_banner_1" as="homepage_event_banner_1">
            <action method="setBlockId"><block_id>homepage_event_banner_1</block_id></action>
        </block>
        <block type="cms/block" name="homepage_event_banner_2" as="homepage_event_banner_2">
            <action method="setBlockId"><block_id>homepage_event_banner_2</block_id></action>
        </block>
        <block type="cms/block" name="homepage_event_banner_3" as="homepage_event_banner_3">
            <action method="setBlockId"><block_id>homepage_event_banner_3</block_id></action>
        </block>
                    <block type="nauba_customer/list_ordercrosssell" name="ordercrosssell" as="ordercrosssell" template="nauba_customer/list/ordercrosssell.phtml">   

                    </block>
        <action method="setTemplate"><template>page/home.phtml</template></action>
        <!-- Mark root page block that template is applied -->
        <action method="setIsHandle"><applied>1</applied></action>
        <action method="setLayoutCode"><name>page_homepage</name></action>
    </reference>        
</page_homepage> 
```

但是当我在主模板中调用它时它不起作用：

```
($this->getChildHtml('ordercrosssell')) 
```

我也尝试通过以下方式创建它：

```
$this->getLayout()->createBlock('ordercrosssell') 
```

但它会引发此异常“**无效块类型**”。有什么帮助吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-24T04:33:07.817

createBlock() 方法将接收整个块别名 ( `nauba_customer/list_ordercrosssell`)，而不仅仅是`ordercrosssell`. getChildHtml() 可以接受的原因只是`ordercrosssell`因为子块的名称是在布局xml中定义的。

不完全确定您的 layout.xml 可能有什么问题，但您可能应该在别名中删除下划线。因此，为了便于使用，不要`nauba_customer`只使用`naubacustomer`或理想情况下稍微短一些的东西。

我不是 100% 确定这是否是一个问题，但总的来说，最好遵循@Herve 提到的现有约定，在类别名中使用下划线与斜线，b/c 事情可能会有点毛茸茸。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-02-27T12:40:22.870

在某些情况下（Magento 1.9），如果我们忘记在块 PHP 文件中使用构造函数，然后将其放入，问题将得到修复：

```
 protected function _construct()
    {
        parent::_construct();
    } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-10-09T19:50:49.587

在其他一些情况下（Magento 1.9），如果我们有错误的文件权限/所有权，我们会得到同样的异常。修复权限/所有权解决了它。希望它可以节省别人几个小时...

# browser - 如何更改整个网络中单个字母的颜色？

> ID：12094561
> 
> 赞同：0
> 
> 时间：2012-08-23T14:56:49.590
> 
> 标签：browser, text, colors

我正在进行一项实验，我们试图训练人们成为联觉者（他们对与数字或字母相关的颜色有额外的经验）。

我想知道是否有人对修改 Web 浏览器（例如 firefox）的最简单方法有一些建议，以便在他们访问的任何网页上始终以特定颜色显示 10 个字母 AJ？

非常感激

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-23T15:02:31.873

有很多方法可以做到这一点（跨浏览器）：

例如，您可以在样式表中定义一个 -element 以具有不同的颜色。加载文档时，您可以通过 JavaScript/jQuery 检查整个文档（但仅检查标签的内容，例如 ）以查找您指定的字母，并在它们周围添加 -tag fe。

不是最好的解决方案，而是一种方法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-23T15:20:45.637

看看[Greasemonkey](https://addons.mozilla.org/en-US/firefox/addon/greasemonkey/ "Greasemonkey 插件")，这是一个 FireFox 插件，旨在做这种事情。[http://userscripts.org/](http://userscripts.org/)上有很多预制脚本，其中一些看起来可以帮助您弄清楚如何编写自己的脚本以重新着色单个字母。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-23T16:24:52.247

这里只是一个潜在解决方案的 beta 版本的蓝图初步形式的抽象粗略草案：使用`javascript:`书签中的链接前缀，如下所示。

1.  在书签工具栏中创建一个新条目
2.  在 URL 输入中，复制/粘贴以下行：`javascript:var html = document.body.innerHTML; html = html.replace(/([a-j])/ig, '<span style="color: red;">$1</span>'); while(html.match(/(<[^>]*)<[^>]+>([^<]+)<\/[^>]+>([^>]*>)/g) != null) {html = html.replace(/(<[^>]*)<[^>]+>([^<]+)<\/[^>]+>([^>]*>)/g, '$1$2$3');} document.body.innerHTML = html;`
3.  为您的书签命名（例如“AJ to red”）并保存
4.  您现在可以访问任何网站并单击该书签，这会将 a 和 j 之间的所有字母变为红色

以更消化的方式：

```
// get the content of the body
var html = document.body.innerHTML;
// surround any letter between a and j by a <span></span>
html = html.replace(/([a-j])/ig, '<span style="color: red;">$1</span>');
// but it also replaces a-j letters within html tags
while(html.match(/(<[^>]*)<[^>]+>([^<]+)<\/[^>]+>([^>]*>)/g) != null) {
    // so if there are html tags within other html tags, delete the created <span></span>
    html = html.replace(/(<[^>]*)<[^>]+>([^<]+)<\/[^>]+>([^>]*>)/g, '$1$2$3');
}
// and replace the innerHTML of the body
document.body.innerHTML = html; 
```

这真的不是最终的解决方案，但是，是的，也许你可以努力改进结果。

PS：不要尝试使用IE ...

# java - Log4j 2.0 和 SLF4J 以及 Java 日志框架永无止境的未来

> ID：12094564
> 
> 赞同：39
> 
> 时间：2012-08-23T14:57:02.543
> 
> 标签：java, logging, log4j, slf4j, logback

所以我今天才发现 Log4J 2.0 现在正在积极开发中，有一个 alpha 版本，据说会取代 logback。

现在在我的应用程序中，我有近 4 个可能更多的日志框架：

*   Java 实用程序日志记录
*   日志4j
*   slf4j
*   logback（由于 maven 提供的 hack 而被忽略）
*   公共日志记录（由于 maven 提供的 hack 而被忽略）
*   而且tomcat有自己的JULI适配器

我一直在使用 log4j (1.2.x)，因为坦率地说，我只是不需要新人的*功能*，但我最近很想切换到 SLF4J，主要是**因为我不想重写我复杂的 log4j 配置文件转换为新格式**（logback）。

现在我的问题是我应该针对什么进行编码，考虑到 log4j 2.0，SLF4J 是未来的正确选择。

*看来我应该坚持使用旧的 log4j ( `1.2.x`)，因为它是最低公分母？*

**更新：**在进一步检查 log4j 2.0 时，虽然非常相似，但配置似乎与 log4j 1.2 不向后兼容。看起来logback是最好的选择。

* * *

## 回答 #1

> 赞同：34
> 
> 时间：2012-08-23T15:46:01.350

**免责声明**：我是 log4j、slf4j 和 logback 项目的创始人，但与 log4j 2.0 无关。

据我了解，尽管有它的名字，log4j 2.0 与 log4j 1.x 有很大不同。就用户 API 而言，log4j 2.0 在很大程度上与 log4j 1.x 不兼容。Log4j 2.0 为 log4j 1.x 提供了一个适配层，目前 (2012-08) 是[`undocumented`](http://logging.apache.org/log4j/2.x/log4j12-api/api.html).

* * *

## 回答 #2

> 赞同：16
> 
> 时间：2012-08-23T15:00:22.757

这是一个主观问题。

我建议使用 slf4j，因为如果你需要的话，它可以使用 log4j 作为后端。

您可能会使用许多组件，这些组件可能都使用不同的日志记录 API。能够通过这些 API 将输出合并到单个输出路由中是件好事。

# c# - 如何将没有扩展名的 DICOM 文件转换为 .png 文件或 .jpg 文件？

> ID：12094570
> 
> 赞同：2
> 
> 时间：2012-08-23T14:57:28.850
> 
> 标签：c#, jpeg, dicom

我有一个简单的 C# 控制台应用程序，它将 dicom 文件放入流中，然后将该流复制到 .jpg 文件中。我的代码创建了文件，但我无法查看图像。下面是我正在使用的代码。

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;
using System.Drawing;
using System.IO;
using System.Windows.Forms;
using rzdcxLib;
using System.Drawing.Imaging;

namespace ConsoleApplication1
{
    class Program
    {
       public static void CopyStream(Stream input, Stream output) { 
            byte[] buffer = new byte[8 * 1024];
            int len;
            while ((len = input.Read(buffer, 0, buffer.Length)) > 0) { 
                output.Write(buffer, 0, len); 
            } 
        } 
        static void Main(string[] args)
        {
            Stream myStream = 
             new FileStream("F:\\MIS\\JLoren\\Projects\\" + 
                             "814-Convert for Chandra\\DICOM\\Test\\IM1",
                            FileMode.Open, 
                            FileAccess.Read);
            Stream OutPut = 
             new FileStream("F:\\MIS\\JLoren\\Projects\\" +
                            "814-Convert for Chandra\\DICOM\\Test\\IM1.jpg", 
                            FileMode.Create, 
                            FileAccess.Write);
            CopyStream(myStream, OutPut);
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-23T15:14:07.893

[在此处](http://www.codeproject.com/Articles/36014/DICOM-Image-Viewer)查看有关 DICOM 图像格式以及如何使用 C# 读取 DICOM 图像的信息。请注意，这些图像通常是 16 位灰度，这意味着 8bpp（每通道）监视器格式无法以全色范围显示这些图像。您必须为您的特定转换选择[“窗口”和“级别”的值。](http://www.eyephysics.com/Madena/MadenaDICOM.html)修复这些值可能会导致您在转换后的图像中丢失信息。请参阅：[Hounsfeld 单位](http://en.wikipedia.org/wiki/Hounsfield_scale)。

此外 - DICOM 的核心原则之一是图像是无损的。在继续进行 JPG 转换之前，请确保这对于您的目的是可以接受的。PNG应该没问题。

# xml - 不使用服务引用将 XML 文件发布到 Web 服务

> ID：12094574
> 
> 赞同：2
> 
> 时间：2012-08-23T14:57:45.597
> 
> 标签：xml, vb.net, web-services, post, soap

我正在尝试调试一些在我们的 Web 服务中遇到问题的一些 vb 代码。我正在尝试使用 vb .net 提交 XML 文件以尽可能地模仿 VB 代码，因为我没有非 .Net VB IDE。在项目中使用 Web 引用时，我没有遇到此问题。

这是我试图在 VB .Net 中模拟的 VB 代码

```
Dim oHttp As WinHttp.WinHttpRequest
Set oHttp = New WinHttp.WinHttpRequest

Call oHttp.Open("POST", m_URL, False)
oHttp.setRequestHeader "Content-Type", " text/xml"
Call oHttp.send(request)
Call oHttp.waitForResponse
'Process response
Dim response As String
response = oHttp.responseText
Set oHttp = Nothing 
```

到目前为止，这是我的代码：

```
 Dim request As WebRequest = WebRequest.Create("http://localhost/service/service.asmx")
    Dim xml As String = String.Empty
    Dim sr As New StreamReader("c:\xmlfile.xml")
    xml = sr.ReadToEnd
    sr.Close()
    sr.Dispose()

    Dim bytesToWrite As Byte() = Encoding.ASCII.GetBytes(xml)

    request.Method = "POST"
    request.ContentLength = bytesToWrite.Length
    request.ContentType = "text/xml"
    request.Headers.Add("SOAPAction", "[web service url]/Submit")

    Dim newStream As Stream = request.GetRequestStream()
    newStream.Write(bytesToWrite, 0, bytesToWrite.Length)
    newStream.Close()

    Dim response As HttpWebResponse = DirectCast(request.GetResponse(), HttpWebResponse)
    Dim dataStream As Stream = response.GetResponseStream()
    Dim reader As New StreamReader(dataStream)

    Dim responseFromServer As String = reader.ReadToEnd() 
```

我的 Web 服务正在接收请求，但对象为空

# ruby-on-rails - Rails Facebook 头像到 data-uri

> ID：12094577
> 
> 赞同：2
> 
> 时间：2012-08-23T14:57:46.380
> 
> 标签：ruby-on-rails, ruby, facebook, ruby-on-rails-3

我正在尝试通过 auth 提取 facebook 头像。这就是我正在做的事情：

```
def image_uri
  require 'net/http'
  image = URI.parse(params[:image]) # https://graph.facebook.com/565515262/picture
  fetch = Net::HTTP.get_response(image)
  based = 'data:image/jpg;base64,' << Base64.encode64(fetch)
  render :text => based
end 
```

我收到以下错误（新错误 - 已编辑）：

```
Connection reset by peer 
```

我试过谷歌搜索，我似乎无法得到解决方案，有什么想法吗？

**我基本上是在寻找 PHP 的确切功能`file_get_contents()`**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-23T15:08:26.777

在解析之前尝试转义 URI：

`URI.parse URI.escape(params[:image])`

确保它`params[:image]`确实包含您要解析的 uri……我会改为传递用户 ID 并将其插入到 uri 中。

`URI.parse URI.escape("https://graph.facebook.com/#{params[:image]}/picture)"`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-23T15:13:11.987

1.  使用静态字符串“https://graph.facebook.com/565515262/picture”时是否会引发相同的错误

2.  当你做的时候它说什么

    ```
    render :text => params[:image] 
    ```

3.  如果以上两个都不能回答您的问题，那么请尝试指定使用 HTTPS-

    ```
    uri = URI('https://secure.example.com/some_path?query=string')
    Net::HTTP.start(uri.host, uri.port, :use_ssl => uri.scheme == 'https').start do |http|
        request = Net::HTTP::Get.new uri.request_uri
        response = http.request request # Net::HTTPResponse object
    end 
    ```

假设您使用的是 ruby​​ < 1.9.3，您还必须

```
require 'net/https' 
```

如果您使用的是 ruby​​ 1.9.3，则无需执行任何操作。

**编辑**

如果您使用的是最新版本，则只需执行以下操作：

```
open(params[:image]) # http://graph.facebook.com/#{@user.facebook_id}/picture 
```

# java - 使用 HttpUrlConnection 时可以禁用 Nagle 的算法吗？

> ID：12094583
> 
> 赞同：2
> 
> 时间：2012-08-23T14:57:54.530
> 
> 标签：java, android

我正在使用 HttpUrlConnection 与服务器通信。延迟非常重要，在使用 WireShark 分析 tcpdump 日志后，我得出的结论是 Nagle 的算法存在问题。

我知道可以通过设置 TCP_NODELAY 选项来禁用 Nagle 的算法，但是在使用 HttpUrlConnection 时我无法弄清楚如何做到这一点......这可能吗？

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-23T15:06:33.433

我注意到[Socket](http://docs.oracle.com/javase/1.4.2/docs/api/java/net/Socket.html)允许您通过[setTcpNoDelay()](http://docs.oracle.com/javase/1.4.2/docs/api/java/net/Socket.html#setTcpNoDelay%28boolean%29)执行此操作。

因此，如果您可以访问底层套接字，或者（不幸地）重新编码 HTTP URL 连接，那么您可能很幸运。

更好的解决方案可能是使用[HttpClient](http://hc.apache.org)。[HttpConnectionParams](http://hc.apache.org/httpclient-3.x/apidocs/org/apache/commons/httpclient/params/HttpConnectionParams.html)公开了这个信息（我承认我不熟悉 Android，所以我不知道你是否可以使用这个选项）

# wordpress - Wordpress 的 Time.ly 日历插件的 Z-index 问题？

> ID：12094588
> 
> 赞同：0
> 
> 时间：2012-08-23T14:58:07.937
> 
> 标签：wordpress, calendar, popup, z-index

我正在尝试完成一个站点，但我似乎无法弄清楚为什么日历上的弹出摘要位于日历底部的订阅按钮后面。我假设这是一个 z-index 问题，但我无法弄清楚为什么 z-index css 样式都不起作用。

日历页面的测试 url 是[http://powhatan.idtestsite.com/events](http://powhatan.idtestsite.com/events)。要查看我所指的内容，请转到日历底部并将鼠标悬停在“事件 2”上。您会看到它位于订阅按钮的后面。

任何帮助都是极好的！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-24T21:17:32.007

我在我的 CSS 中添加了以下内容，并添加了与我的日历相关的所有其他 z-index 样式，它就像一个魅力：

`#ai1ec-calendar-view-container { z-index: 1 !important; }`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-23T20:56:48.883

多么神秘！您在两个元素上都设置了位置和 z-index...

不知道它有多大帮助或伤害，但我确实注意到 z-index 在 FF 14 中的行为与预期的一样。在 Chrome 中，我看到了与您报告的行为相同的行为。也许这可以帮助您追踪它。

**编辑：**

我找到了一个解决方案 - 将 btn z-index 设置为小于 0（我使用了 -1），它在 Chrome 中的行为与预期一致。这与绝对定位的最低 z 索引项目和相对定位的最高项目有关。有时，即使索引设置正确，那些绝对定位的元素也会写在相对定位的元素之上。

# c# - 在带有存储过程的按钮中使用委托

> ID：12094597
> 
> 赞同：0
> 
> 时间：2012-08-23T14:58:52.723
> 
> 标签：c#, stored-procedures, delegates

我正在尝试编写代码进行付款并更新状态。在下面的代码中，我已经完成了提交付款的逻辑，它工作正常，但我无法更新状态。状态是`Item_Order`表中的一列，付款后必须更新

我的代码是：

```
 delegate void PaymentDone();

    public void paySave()
    {
        SqlConnection conn1 = new SqlConnection();
        try
        {

            conn1.ConnectionString = " 
            server=.\\ms2k5;database=Info_Connect;Trusted_Connection=true";
            conn1.Open();

            SqlCommand insertPayment = new SqlCommand("Delegate_SP", conn1);
            insertPayment.CommandType = CommandType.StoredProcedure;

            string currentDate = DateTime.Today.ToString();

            if (Convert.ToDateTime(payDate.Text) >= Convert.ToDateTime(currentDate))
            {

                insertPayment.Parameters.Add("@reciptId", SqlDbType.VarChar);
                insertPayment.Parameters["@reciptId"].Value = fullfill.Text;

                insertPayment.Parameters.Add("@payDate", SqlDbType.DateTime);
                insertPayment.Parameters["@payDate"].Value =   
                Convert.ToDateTime(payDate.Text);

                insertPayment.Parameters.Add("@balPay", SqlDbType.Float);
                insertPayment.Parameters["@balPay"].Value = Convert.ToDouble(balace.Text) - Convert.ToDouble(amnt1.Text);

                insertPayment.Parameters.Add("@payDone", SqlDbType.Float);
                insertPayment.Parameters["@payDone"].Value =    
                Convert.ToDouble(amnt1.Text);

                insertPayment.Parameters.Add("@fullfillID_FK", SqlDbType.VarChar);
                insertPayment.Parameters["@fullfillID_FK"].Value = fullfill.Text;

                insertPayment.Parameters.Add("@clintID_FK", SqlDbType.Int);
                insertPayment.Parameters["@clintID_FK"].Value = 
                (clintId_FK.Text).ToString();

                insertPayment.Parameters.Add("@operation", SqlDbType.VarChar);
                insertPayment.Parameters["@operation"].Value = 3;

                insertPayment.ExecuteNonQuery();

            }
            else
            {
                MessageBox.Show("Payment Date Should be later than Full Order Date");
            }
        }
    }

    public void payUpdate()
    {
        SqlConnection conn1 = new SqlConnection();
        try
        {
            conn1.ConnectionString = " 
            server=.\\ms2k5;database=Info_Connect;Trusted_Connection=true";
            conn1.Open();

            SqlCommand insertStaus = new SqlCommand("Delegate_SP", conn1);
            insertStaus.CommandType = CommandType.StoredProcedure;

            insertStaus.Parameters.Add("@status", SqlDbType.VarChar);
            insertStaus.Parameters["@status"].Value = "RUNING";

           if (balace.Text.Equals("0"))
            {

            insertStaus.Parameters.Add("@status", SqlDbType.VarChar);
            insertStaus.Parameters["@status"].Value = "CLOSE";
            }
            else
            {
              insertStaus.Parameters.Add("@status", SqlDbType.VarChar);
             insertStaus.Parameters["@status"].Value = "RUNING";
            }

            MessageBox.Show("3");

            insertStaus.Parameters.Add("@operation", SqlDbType.VarChar);
            insertStaus.Parameters["@operation"].Value = 2;

            insertStaus.ExecuteNonQuery();
        }
    } 
```

我的存储过程是

```
ALTER PROCEDURE [dbo].[Delegate_SP]
@reciptId varchar(50)=null,
@balPay float,
@payDone float=null,
@payDate datetime=null, 
@fullfillId_FK varchar(50)=null,
@clintId_FK int=null,
@status varchar(50)=null,
@operation int,
@fullfillId varchar(50)=null

 AS

BEGIN
-- SET NOCOUNT ON added to prevent extra result sets from
-- interfering with SELECT statements.
SET NOCOUNT ON;

if @operation=3

BEGIN
UPDATE Recipt set balPay=@balPay where reciptId=@reciptId
 if @@rowcount=0

insert into Recipt(reciptId,balPay,payDone,payDate,fullfillId_FK,clintId_FK)values
               (@reciptId,@balPay,@payDone,@payDate,@fullfillId_FK,@clintId_FK)

 update Item_Full set totCost=(select balPay from Recipt) where fullfillId=@reciptId

 END
if @operation=2

 BEGIN
  UPDATE Item_Order set status=@status where orderId=@reciptId
END
END 
```

问题是我`tdsparser`在方法中遇到异常`payUpdate`......该`paySave`方法工作正常

# blackberry - 黑莓 OS 5：PersistentStore.getPersistentObject 返回 null？

> ID：12094599
> 
> 赞同：1
> 
> 时间：2012-08-23T14:58:59.640
> 
> 标签：blackberry, persistent

`PersistentStore.getPersistentObject`返回空？

我正在使用随机键来检索对象形式 PersistentStore

```
persist = PersistentStore.getPersistentObject( KEY ); 
```

在模拟器（OS 5）上工作正常，当我将签名的代码带到设备时（BB OS 5.0 Bold 8900）

由于某种原因，这将返回 null，无一例外。随后，我在 PersistentStore/persist 上调用的任何 API 都会返回 null 而不会出现异常，即使 persist 为 null 也是如此。

我不确定这是否是 Eclipse 调试器的事情，但即使调试器显示对象为空。代码中应用的空值检查似乎失败了，这意味着代码将这些对象视为非空值。呼！！！这怎么可能？

在此代码中，persist 显示为 null，safetyTable 和 orderedkeys 也是如此。但是，代码中的 null 检查失败。

稍后在代码中，当我尝试访问有序键时，这些键再次为空！！！两天来一直在努力解决这个问题，任何指针都会非常有帮助。

```
persist = PersistentStore.getPersistentObject( KEY );
persistOrderedKeys = PersistentStore.getPersistentObject(KEY_ORDERED_KEYS);
safetyTable = (Hashtable)persist.getContents();
orderedKeys = (Vector)persistOrderedKeys.getContents();
if (safetyTable == null)
{
    safetyTable = new Hashtable();
    persist.setContents(safetyTable);
    persist.commit();
}
if (orderedKeys==null)
{
    orderedKeys=new Vector();
    if (safetyTable.size() > 0)
    {
        Enumeration addressKeys = safetyTable.keys();
        while(addressKeys.hasMoreElements())
        {
            orderedKeys.addElement((String)addressKeys.nextElement());
        }
    }
    persistOrderedKeys.setContents(orderedKeys);
    persistOrderedKeys.commit();
} 
```

# python - 在基于 sqlalchemy 的 Web 应用程序中将 db_session 相关语句放在哪里？

> ID：12094605
> 
> 赞同：2
> 
> 时间：2012-08-23T14:59:42.240
> 
> 标签：python, model, sqlalchemy, flask-sqlalchemy

我正在使用烧瓶和 sqlalchemy 创建一个 Web 应用程序。

我对放置 db_session 相关语句（如 db_session.add()）感到困惑。我正在考虑两种方法。一种是在模型本身中创建一个 add() 函数并完全封装 sqlalchemy 部分。另一种方法是从控制器调用这些函数。在查看许多模型示例时，我可以看到大多数情况下使用了第二种方法。哪种方法更好/正确，为什么？

**eg1) 在模型本身中**

```
class Events(db.Model):
    id = db.Column(db.Integer, primary_key=True)
    title = db.Column(db.String(128))
    .
    .
    .

    def add(self):
        db.session.add(self)
        db.session.commit()

    def delete(self):
        db.session.delete(self)
        db.session.commit()

class EventsAPI(MethodView):
    def get(self, event_id):
        e = Events()
        e.title = 'testing'
        e.add()
    .
    .
    . 
```

**2) 在控制器中**

```
class Events(db.Model):
    id = db.Column(db.Integer, primary_key=True)
    title = db.Column(db.String(128))
    .
    .
    .

class EventsAPI(MethodView):
    def get(self, event_id):
        e = Events()
        e.title = 'testing'
        db.session.add(e)
        db.session.commit()
    .
    .
    . 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-23T19:31:09.447

在第二种情况下，您可以在一个事务中保存多条记录，并在出现问题时回滚它。对我来说，主要在控制器中使用 session 似乎是合乎逻辑的，至少这是我在之前的项目中所做的。主要是因为事务和错误处理代码看起来更明确。

另一方面，您可以使用子事务，并且 Django ORM 具有`model.save`,`model.delete`功能。这样控制器看起来更干净。

总是有利有弊。我建议编写几个不同的控制器，看看哪种方法更适合您的项目。不要忘记处理异常。如果您决定使用第一种方法，请为所有模型方法创建一个通用的 BaseModel 类。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-23T19:25:44.113

一般来说，是的，您应该将它们放在视图/控制器中。原因是应用程序的逻辑应该在View/Controller中。通常，您将通过您的视图/控制器添加/删除/删除/更新等，这就是您应该放置所有这些的地方。

# opengl - TriangleList 与 TriangleStrip

> ID：12094607
> 
> 赞同：12
> 
> 时间：2012-08-23T14:59:46.073
> 
> 标签：opengl

在 TriangleStrip 和 TriangleList 之间，哪一个执行得更快？

我刚刚读到的一些有趣的东西说：“我使用三角形列表的方法得到了大约 780fps，而使用三角形条的方法只有 70fps”。我没有关于他到底在做什么的详细信息，但据此，他使用 TriangleList 获得了大约 10 倍的帧速率。我发现这违反直觉，因为该列表包含更多顶点数据。

有谁知道为什么 TriangleList 可能比 Strip 快得多的技术原因？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-08-23T15:19:36.953

三角带是内存优化，**而不是**速度优化。在过去的某个时候，当系统内存和视频内存之间的总线带宽是数据密集型应用程序的主要瓶颈时，是的，它也可以节省时间，但这种情况已经很少见了。此外，旧硬件中的转换缓存非常小，因此普通条带缓存比优化不佳的索引列表更好。

三角形列表可以与三角形条带相同或更有效的原因是索引。鉴于您正在正确优化几何图形和三角形顺序，索引让硬件以一种非常可见的方式转换和缓存顶点。此外，在需要大量退化三角形的非常复杂的网格中，条带将比索引列表更慢并且占用更多内存。

我必须说我有点惊讶你的例子显示了一个数量级的差异。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-08-24T07:44:38.330

三角形列表可以比条带快得多，因为它通过轻松地将顶点数据批处理在一起来节省绘制调用。绘图调用很昂贵，因此使用条带节省的内存有时不值得降低性能。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-15T12:07:18.243

索引三角形列表通常会赢..

这是一个简单的规则。计算您将上传到显卡的顶点数。如果三角形列表（准确地说是索引三角形列表）的顶点少于与三角形带相同的数据，那么它可能会运行得更快。

如果在这两种情况下顶点的数量非常接近，那么条带可能会运行得更快，因为它没有索引列表的开销，但我希望这也是特定于驱动程序的。

Non-Indexed triangle lists are almost always worst case (3 verts per triangle, no sharing) unless you are just dealing with disjoint quads which will also cost 6 verts per quad using degenerate stripping. In that case, you get each quad for 4 verts with indexed triangle lists so it probably wins again but you'd want to test on your target hardware I think.

# c++ - 挂钩 OpenGL 帮助（4 - 5 个问题）

> ID：12094610
> 
> 赞同：0
> 
> 时间：2012-08-23T14:59:55.020
> 
> 标签：c++, opengl

好的，所以我已经使用我自己的 glwrapper 成功地连接了所有的 OpenGL 函数。我遇到的问题是英特尔/Nvidia 与 ATI 的对比。我正在连接模型并为每个模型生成 ID，这样我就可以知道正在渲染什么。

以下是我目前拥有的信息+差异：

```
glPushMatrix()

glMultMatrixf({0.70710671, 0, 0.70710683, 0}
{0, 1, 0, 0}
{-0.70710683, 0, 0.70710671, 0}
{26368, -1125, 28416, 1})

glBindBufferARB(GL_ARRAY_BUFFER, 56)
glBufferSubDataARB(GL_ARRAY_BUFFER, 0, 11544, 0x0B2DF6EC)
glGenBuffersARB(1, 0x0AE6231C)
glBindBufferARB(GL_ARRAY_BUFFER, 65)
glBufferDataARB(GL_ARRAY_BUFFER, 11544, 0x0B2DF6EC, GL_STATIC_DRAW)   
glGenBuffersARB(1, 0x0AE6231C)
glBindBufferARB(GL_ELEMENT_ARRAY_BUFFER, 66)
glBufferDataARB(GL_ELEMENT_ARRAY_BUFFER, 7020, 0x0B2DF6EC, GL_STATIC_DRAW) 
```

//上面的一切都是由两个显卡完成的。下面是问题所在。

```
glBindBufferARB(GL_ARRAY_BUFFER, 56)         //Intel/Nvidia makes this NULL.
glVertexPointer(3, GL_FLOAT, 12, 0x00000000) //Intel/NVidia makes this Not 0x00000.
glEnableClientState(GL_VERTEX_ARRAY)
glDisableClientState(GL_NORMAL_ARRAY)
glBindBufferARB(GL_ARRAY_BUFFER, 65)
glColorPointer(4, GL_UNSIGNED_BYTE, 12, 0x00000000)
glEnableClientState(GL_COLOR_ARRAY)
glTexCoordPointer(2, GL_FLOAT, 12, 0x00000004)
glEnableClientState(GL_TEXTURE_COORD_ARRAY)
glDrawElements(GL_TRIANGLES, 3510, GL_UNSIGNED_SHORT, 0x00000000) 
```

我想知道为什么要为 Nvidia && Intel 卡的 bindbuffer 调用清空而不是清空顶点指针，而在 ATI 上，一切都如上所示。

有什么不同？另外我的第二个问题是，如果我存储了指向顶点和索引的指针（保证它们不会被删除），我怎样才能得到每个顶点？

例子：

```
VBO CurrentBuffer;
std::vector<VBO> Buffers;

Hook_glBufferDataARB(GLenum target, GLsizeiptrARB size, const GLvoid *data, GLenum usage)
{
    CurrentBuffer.target = target;
    CurrentBuffer.size = size;
    CurrentBuffer.usage = usage;     //To figure out if it's indices array or vertex array.
    CurrentBuffer.data = data;       //Let us assume that this pointer is never deleted.

    (*original_BufferDataArb)(target, size, data, usage);
}

Hook_glVertexPointer(GLint size, GLenum type, GLsizei stride, const GLvoid *pointer)
{
    CurrentBuffer.VNull = (pointer == NULL) ? true : false;
    CurrentBuffer.VPointer = pointer;  //This can be both null or not null.
    CurrentBuffer.VSize = size;
    CurrentBuffer.Vtype = type;
    CurrentBuffer.Stride = stride;
    Buffers.push_back(CurrentBuffer);

    (*original_VPointer)(size, type, stride, pointer);
}

void Hook_glDrawElements(GLenum mode, GLsizei count, GLenum type, const GLvoid *indices)
{
    if (mode == GL_TRIANGLES)
    {
        const GLfloat* Pointer = static_cast<const GLfloat*>(Buffers.back().VPointer);  //Assuming it isn't NULL.
        for (int I = 0; I < count / 3; ++I)  //For each triangle.
        {
            int X = *(reinterpret_cast<const GLfloat*>(reinterpret_cast<const char*>(Pointer)));
            int Y = *(reinterpret_cast<const GLfloat*>(reinterpret_cast<const char*>(Pointer) + (Buffers.back().Stride)) + 1);
            int Z = *(reinterpret_cast<const GLfloat*>(reinterpret_cast<const char*>(Pointer) + (2 * Buffers.back().Stride)) + 2);
        }
    }

    (*original_DrawElements)(mode, count, type, indices);
} 
```

我是否正确地迭代指针？此外，如果 vertexpointer 为空，有没有办法可以使用 bufferdata 使用来获取每个顶点？我读到我可以做到：

```
if (CurrentBuffer.VNull)
{
    GLfloat* IndexPointer = Buffers[Buffers.size()].data;      //Index pointer is GL_Element_Array_Buffer
    GLfloat* VertexPointer = Buffers[Buffers.size() - 1].data; //Vertex pointer is GL_Array_Buffer

    for (int I = 0; I < TriangleCount; ++I)
    {
        int X = *VertexPointer[IndexPointer[I]];
        int Y = *VertexPointer[IndexPointer[I]] + 1;
        int Z = *VertexPointer[IndexPointer[I]] + 2;
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-23T15:37:20.960

> ```
> glBindBufferARB(GL_ARRAY_BUFFER, 56)         //Intel/Nvidia makes this NULL.
> glVertexPointer(3, GL_FLOAT, 12, 0x00000000) //Intel/NVidia makes this Not 0x00000. 
> ```

您确定吗，在您的 Intel/NVidia 案例中，程序没有主动设置这些值。空值作为 glVertexPointer 的数据参数只有在绑定了缓冲区对象时才有意义。然而，如果没有绑定缓冲区对象，例如通过使用 ID 为 0 的 glBindBuffer 调用取消绑定，则 glVertexPointer 的数据参数必须是非空指针。

# python - Python：“模块”对象不可调用

> ID：12094613
> 
> 赞同：2
> 
> 时间：2012-08-23T15:00:00.687
> 
> 标签：python, exception

我定义了一个异常类

```
#####UNIQUE CONSTRAINT EXCEPTION#########################################################3
class UniqueConstraintException (Exception):
    def __init__(self, value):
        self.value = value

    def __str__(self):
        return repr('Failed unique property. Property name: ' + self.value) 
```

文件名为：“UniqueConstraintException.py”，包名：“exception”

我正在以这种方式导入和使用它：

```
from exception import UniqueConstraintException

raise UniqueConstraintException(prop_key) 
```

并得到这个错误：

```
TypeError: 'module' object is not callable 
```

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-08-23T15:01:28.363

这就是为什么要保持模块名称小写的原因。:-)

```
from exception.UniqueConstraintException import UniqueConstraintException 
```

您导入了模块，没有在模块内部定义的类。

# dojo - Dojo 解析器更改按钮 ID

> ID：12094617
> 
> 赞同：0
> 
> 时间：2012-08-23T15:00:07.427
> 
> 标签：dojo

我有以下代码，直接来自教程：

```
<!DOCTYPE HTML>
  <head>
    <link rel="stylesheet" href="js/dijit/themes/claro/claro.css" />
    <script src="js/dojo/dojo.js" data-dojo-config="async: 1, parseOnLoad: 1"></script>
    <script>
      require(["dojo/_base/fx", "dojo/on", "dojo/dom", "dojo/parser", "dojo/domReady!"], function(fx, on, dom, parser) 
      {
        var fadeOutButton = dom.byId("fadeOutButton"),
            fadeInButton = dom.byId("fadeInButton"),
            fadeTarget = dom.byId("fadeTarget");

        on(fadeOutButton, "click", function(evt)
        {
          fx.fadeOut({ node: fadeTarget }).play();
        });

        on(fadeInButton, "click", function(evt)
        {
          fx.fadeIn({ node: fadeTarget }).play();
        });

      });           
    </script>       
  </head>
  <body class="claro">
    <button data-dojo-type="dijit/form/Button" type="button" id="fadeOutButton">Fade block out</button>
    <button data-dojo-type="dijit/form/Button" type="button" id="fadeInButton">Fade block in</button>

    <div id="fadeTarget" style="background: red; height: 256px">
      A red block
    </div>  
  </body>
</html> 
```

我的目标是让 Dojo 样式化按钮。据我所知，这是由解析器完成的。这样做的问题是解析器将更改按钮元素的 id，因此不会触发事件。如果我从 0 中删除`dojo/parser`或`require`更改`parseOnLoad`为 0，按钮会起作用，但它们不是样式。使用上面的代码，按钮被设置了样式但不起作用。有可能两者兼得吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-23T15:25:02.370

我想我想通了——我必须使用`registry.byId`而不是`dom.byId`

# ruby-on-rails - 从 url 中删除资源

> ID：12094621
> 
> 赞同：1
> 
> 时间：2012-08-23T15:00:12.350
> 
> 标签：ruby-on-rails, ruby-on-rails-3

我有一些嵌套资源（命名空间、页面和评论），并且 url 看起来像这样： `http://example.com/namespaces/objects/pages/super-page`- 它太长了。

从路线中删除资源名称的最佳方法是什么？我想得到类似的东西： `http://example.com/objects/super-page/`

更新：命名空间控制器中只有`show`动作。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-23T15:22:06.017

您可以在资源上设置路径属性

```
 resources :pages, :path => '' do 
```

[我发现这篇文章对自定义我的 url 的http://jasoncodes.com/posts/rails-3-nested-resource-slugs](http://jasoncodes.com/posts/rails-3-nested-resource-slugs)很有帮助

还有一个很棒的宝石可以摆脱 id 和自定义 slug，friendly_id，[http://railscasts.com/episodes/314-pretty-urls-with-friendlyid](http://railscasts.com/episodes/314-pretty-urls-with-friendlyid)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-24T08:48:05.513

您可以`shallow`在路由中使用参数，例如：

```
resources :namespaces, :shallow => true do
  resources :objects do
    resources :pages
  end
end 
```

然后你可以使用类似的路线

```
page_path(1) #=> '/pages/1'
object_page_path(1,1) #=> '/object/1/pages/1'
namespace_page_path(1, 1) #=> '/namespace/1/pages/1' 
```

# git - 恢复没有分支的提交

> ID：12094622
> 
> 赞同：4
> 
> 时间：2012-08-23T15:00:16.853
> 
> 标签：git

我将一个包含 git 存储库的目录复制到另一个位置。我对一些文件进行了一些更改并提交了。然后我尝试推送这些更改，但我被告知我不在分支中（似乎移动存储库导致了这种情况）。所以，认为这是正确的做法，我切换到我的主分支。我所有的更改都消失了。我想，没问题，我将合并最后一次提交，一切都会好起来的。但我在任何地方都找不到这个提交。当我做 git log 时，它没有显示出来。如何找到此提交并合并其更改？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-23T15:17:10.590

好的，我找到了答案。我需要使用 git reflog，而不是 git log。这给了我提交号，我可以合并它

# c# - 设置窗口比例

> ID：12094633
> 
> 赞同：0
> 
> 时间：2012-08-23T15:00:53.590
> 
> 标签：c#, wpf, xaml

我想在窗口上设置一些比例，比如高度 = 宽度的一半。我想让它自适应，因为我必须考虑多种屏幕尺寸。如果窗口对于屏幕来说太大，我会用最大高度和宽度来管理它。

但是我在网上搜索并没有找到任何东西：D

**编辑**：

我已经尝试过`SizeToContent="WidthAndHeight"`，但是由于我有标签，因此窗口大小会根据标签的内容发生变化。如果可能的话，我更喜欢固定尺寸。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-23T15:05:55.437

如何在 C# 中获取当前系统分辨率：

```
int hght = Screen.PrimaryScreen.WorkingArea.Height;
int wght = Screen.PrimaryScreen.WorkingArea.Height; 
```

如何设置表格大小的高度和宽度：

在 Form 的 Page_Load() 事件上编写以下代码

```
this.Width = Screen.PrimaryScreen.WorkingArea.Width;
this.Height = Screen.PrimaryScreen.WorkingArea.Height ; 
```

[如何在 .NET 中开发独立于分辨率的 Windows 应用程序](http://dotnetaid.com/2012/04/10/how-to-develop-resolution-independent-windows-application-in-net/)

# java - 从java中的套接字读取错误

> ID：12094634
> 
> 赞同：0
> 
> 时间：2012-08-23T15:00:56.993
> 
> 标签：java, sockets

在套接字的一侧，我知道数据正确地进入了套接字。

我建立了一个连接：

```
Connection sr = new Connection();
Server server = new Server("NAME", Interger.parseInt(port));
server.setIp(ip);
sr.setServer(server); 

//I know my server connection code is correct because I can send and receive data in 
//other areas of my program just fine

InputStream is = null;

try
{
  is = sr.getChannel().socket().getInputStream();

  BufferedReader br = new BufferedReader(new InputStreamReader(is));
  StringBuffer text = new StringBuffer();

  int k =0;

  while(k != -1)
  {
    k = br.read();
    text.append((char) k);
  }
}
catch(Exception e)
{
  //no errors ever get thrown
} 
```

然后我只收到了大约一半的数据，即我发送的总共 21398 个字节中的 10989 个字节。它读取的字节数会有所不同，但数据总是以 `..., "values": ["`我发送的数据结尾，看起来像 , `..., "values": ["", ""]`。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-23T15:16:20.390

继续阅读，直到获得所有数据。这个问题最近大约每周出现一次。无法保证网络会立即显示您的所有数据。

您需要继续阅读，直到获得所有数据。你怎么知道发送了多少数据？您可能应该在客户端/服务器之间建立一个小协议，定义要发送多少数据，服务器读取那个小标题并继续读取，直到收到完整的消息。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-23T15:22:09.587

不知道这是否可以帮助你：

```
int k =0;

while((k = br.read()) != -1){
   text.append((char) k);
} 
```

1）在您的情况下，它正在检查 next `iteration`，这可能导致将不可表示的字符（`char`-1）附加到`text`.

2）永远不要`catch block`空着，可能有一些`execption`。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-08-23T16:22:22.680

因此，因为我的套接字发送端是在 c++ 中，所以我不小心将一个空 ASCII 值传递到套接字中。并且在套接字的 java 端没有记录，如果读取遇到空值，它会将其视为文件结尾。所以它过早地结束了流，因为它达到了空值。

# java - java正则表达式特殊字符

> ID：12094635
> 
> 赞同：2
> 
> 时间：2012-08-23T15:00:58.293
> 
> 标签：java, regex, roman-numerals

我正在使用以下正则表达式在字符串中查找罗马数字：

```
^M{0,4}(CM|CD|D?C{0,3})(XC|XL|L?X{0,3})(IX|IV|V?I{0,3})$ 
```

如何更改它以检测除句点之外的任何特殊字符之前或之后的罗马数字？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-23T15:08:32.543

我会试试这个表达：

```
^[@!#%^*()_&-]?M{0,4}(CM|CD|D?C{0,3})(XC|XL|L?X{0,3})(IX|IV|V?I{0,3})[@!#%^*()_&-]?$ 
```

`[@!#%^*()_&-]?`开头和结尾的表达式匹配评论中列表中的零个或一个特殊字符。

# lua - 如何在 Corona sdk 中使用 admob 广告？

> ID：12094647
> 
> 赞同：2
> 
> 时间：2012-08-23T15:01:44.833
> 
> 标签：lua, coronasdk

如何在电晕应用程序中使用 admob 广告？我开发了一个完全免费的游戏。所以描述了将 admob 广告集成到我的应用程序中？并给我示例代码

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-08-31T19:18:36.647

现在 Carona 允许您实施广告，并且没有那么难。无需专业版或企业版。

这是一个例子：

[电晕-admob-示例](https://github.com/coronalabs/plugins-sample-ads-admob)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-23T22:32:00.860

您需要购买 Corona Enterprise 并将其附加在本机代码上。

由于我不拥有 Corona Enterprise，因此我无法为您提供示例代码。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2016-02-26T04:29:06.807

现在 The`AdMob plugin`提供了简单的集成`AdMob ads with Corona Application`。你可以在这里找到插件官方文档

[https://docs.coronalabs.com/plugin/ads-admob-v2/](https://docs.coronalabs.com/plugin/ads-admob-v2/)

有关了解 Corona 广告系统的详细教程，请查看此链接

[https://coronalabs.com/blog/2014/07/15/tutorial-implementing-admob-v2/](https://coronalabs.com/blog/2014/07/15/tutorial-implementing-admob-v2/)

如果你想使用`multiple Ad Networks`，这里有详细的官方教程

[https://coronalabs.com/blog/2013/11/19/tutorial-using-multiple-ad-networks/](https://coronalabs.com/blog/2013/11/19/tutorial-using-multiple-ad-networks/)

以及带有示例 Admob 插件代码的 Corona 应用程序示例代码

[https://github.com/coronalabs/plugins-sample-ads-admob](https://github.com/coronalabs/plugins-sample-ads-admob)

继续编码

# php - 为 SEo 添加 H1 标签

> ID：12094649
> 
> 赞同：-1
> 
> 时间：2012-08-23T15:01:47.757
> 
> 标签：php, joomla, seo, joomla2.5

[H1、H2 标签、SEO 和 google Adwords](https://stackoverflow.com/questions/7783569/h1-h2-tag-seo-and-google-adwords)

我不知道在网页中添加 H1 对 SEO 有何帮助，但我需要让我的公司网站支持 SEO，而且我使用的是 Joomla 2.5。正如许多人所说，h1 应该在每个页面上只使用一次。我按照 Joomla 文档的步骤在 php 中为页面标题添加静态文本。所以我想现在我只需要添加

```
<h1> <?php some code to get page title 
</h1> 
```

这足以支持 SEO 吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-23T15:14:10.437

是的，这就足够了。您也可以使用其他级别的标题标签来表示子标题或子页面。

# javascript - HTML5 视频标签格式

> ID：12094650
> 
> 赞同：0
> 
> 时间：2012-08-23T15:01:49.103
> 
> 标签：javascript, video-streaming, html5-video, progressive-download

所以我正在尝试编写一个服务器以将视频流式传输到 html5/javascript 中的客户端，如果可能的话，我想使用 html5 中已经存在的视频标签框架。话虽如此，我找不到流格式的好来源。我认为它可以使用渐进式下载（这也是 youtube 的工作方式？），但我找不到任何给定渐进式下载数据包的标头应该是什么样子。

有人可以指出有关视频标签流实际格式的一些信息的方向吗？我也不是 100% 致力于使用视频标签的想法，所以如果有人有更好的选择，那也很棒！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-23T15:06:58.827

您只需要一个 HTTP 服务器（例如 Apache 或 Nginx）来提供 MP4 视频文件的渐进式下载。

# java - 调用其他方法和不可变实例

> ID：12094651
> 
> 赞同：1
> 
> 时间：2012-08-23T15:01:50.623
> 
> 标签：java, immutability

这是一个来自考试过去试卷的问题。我已经完成了这个问题并且它有效。但是，我觉得我的实现可能很弱，例如我在整个 Gregorian 类中使用静态。

给了我三种我认为合适的写法（在公历类中），每种方法都有一个场景。我在 Gregorian 类中的三个方法上使用 static 是否正确。

此外，日、月和年字段是不可变的，是否将它们设置为足够私有？（一旦创建，字段值就不能更改）

```
public class Date {

private int day;// needs to be immutable?
private String month;// needs to be immutable?
private int year;// needs to be immutable?

public Date(int theDay, String theMonth, int theYear) {
    this.day = theDay;
    this.month = theMonth;
    this.year = theYear;
}

public int getDay() {
    return day;
}

public String getMonth() {
    return month;
}

public int getYear() {
    return year;
} 
```

`}`

`public class Gregorian {`

```
public static Date d;

public static boolean leapYear(){

    if(d.getYear() %400==0 || (d.getYear()%4==0 && d.getYear()%100!=0)){
        return true;
    }else{
        return false;
    }
}

public static int getGregorianDateNumber(){
    int a = (d.getYear()*384)*(32+d.getDay());
    return a;
}

public static int getISO8601Date(){
    int b = (d.getYear()*367)+d.getDay();
    return b;
}

public static void main (String[] args){
    d = new Date(9, "June", 8);
    System.out.println(getGregorianDateNumber());
    System.out.println(getISO8601Date());
    System.out.println(leapYear());
} 
```

`}`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-23T16:24:34.033

而不是静态方法和静态字段`d`使它们全部非静态。

```
public class Gregorian {
    private final Date d;

    public Gregorian(Date d_) {
        this.d = d_;
    }

    public boolean isLeapyear() {
        ... // implemented as above
    }

    ... // Other methods as above, but all non-static.
} 
```

主要如下：

```
public static void main (String[] args){
    Date d = new Date(9, "June", 8);
    Gregorian g = new Gregorian(d);
    System.out.println(g.getGregorianDateNumber());
    System.out.println(g.getISO8601Date());
    System.out.println(g.leapYear());
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-23T15:03:14.517

默认情况下，字符串是不可变的。

```
private int day;// needs to be immutable?
private int year;// needs to 
```

不是您定义的不可变字段。他们的状态可以改变。使它们成为最终的。

注意：使引用最终并不意味着不能更改对象状态（在您的情况下，此注释无关紧要，因为您没有引用对象）。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-23T15:17:29.120

我同意 thinksteep - 在您的字段中添加“final”将有助于防止它们被更改。没有二传手强化了这一点。

另外，我想指出的是

```
private String month;// needs to be immutable? 
```

可以创建任何东西，从“一月”到“派”。如果我可以建议，请将其更改为枚举并建立几个月的允许值。

```
public enum MonthName {
    JAN,FEB,MAR,APR,MAY,JUN,JUL,AUG,SEP,OCT,NOV,DEC;
} 
```

将您的 Date 类更改为以下内容：

```
private final int day;
private final MonthName month;
private final int year;

public Date(int theDay, MonthName theMonth, int theYear) {
    this.day = theDay;
    this.month = theMonth;
    this.year = theYear;
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-23T15:28:58.873

两者`day`和`year`都是原语，并且已经有`int`可用的不可变版本，`Integer`您可以使用它。

第二件事是，而不是静态引用`Date`in `Gregorian`，将 the`Date`作为参数传递给每个`static`方法。你可以保证线程安全。

# java - SWT 表单或对话框

> ID：12094653
> 
> 赞同：1
> 
> 时间：2012-08-23T15:01:51.803
> 
> 标签：java, eclipse, swt

我正在开始一个仅使用 SWT 的项目。
我从未使用过 SWT，所以我正在努力学习其中的细节。
我想创建一个基本对话框窗口（我将其称为使用 Swing 但不确定 SWT 的对话框）。
该窗口将是用户单击菜单操作后首先看到的内容。该窗口最终将具有执行操作的按钮，它还将具有一个表格查看器。这基本上就像用户从主应用程序打开一个小应用程序。

在 Swing 中 - 我将只创建一个对话框类并添加一个 tablelistener。但是对于 SWT，我不确定它是对话框还是表单还是什么。

我应该使用什么来创建这个基本 SWT 窗口？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-23T15:45:06.430

SWT 中有很多有用的对话框。我通常扩展 FormDialog，但您可以查看 Eclipse 捆绑代码来学习。请看下面的例子：

```
public class SomeDialog extends FormDialog {

  public SomeDialog(Shell shell) {
    super(shell);
  }

  @Override
  protected void createFormContent() {
  }
} 
```

另一个可能对您有很大帮助的提示。在 Windows 上，您可以打开一个对话框或聚焦一个视图或编辑器，然后按`ALT`+ `SHIFT`+`F1`打开插件间谍，它将向您显示该小部件源代码的路径。

# actionscript-3 - 在 break 之前退出 switch/case 函数；

> ID：12094655
> 
> 赞同：1
> 
> 时间：2012-08-23T15:01:53.877
> 
> 标签：actionscript-3, flash, switch-statement

当我到达证明任何术语向量 answer1 不同于任何术语向量 rightAnswer1 的行时，我需要离开函数开关/案例（在条件范围内：“answer1[i1]！= rightAnswer1[i1]”）

```
switch (currentFrame)
{
    case 1:
        for (var i1:int = 0; i1 < 8; i1++)
        {
            if (answer1[i1] != rightAnswer1[i1])
            {                   
                anyArray[currentFrame - 1] = 2;
                trace("Answer " + i1 + " is wrong!");
                break; // I need to leave the switch/case function here
            }
        }

        trace("Answer is right!");
        anyArray[currentFrame - 1] = 1;

        break;

    case 2:
        for (var i2:int = 0; i2 < 3; i2++)
        {
            if (answer2[i2] != rightAnswer2[i2])
            {                   
                anyArray[currentFrame - 1] = 2;
                break;
            }
        }           
        anyArray[currentFrame - 1] = 1;
        break;

    default:
        trace("ERROR");
    break;
}

if (anyArray[currentFrame - 1] == 1)
    light.play();
else
    error.play(); 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-23T15:09:20.590

将标签传递给 break 语句，指示要突破的范围：

```
outside:
switch (currentFrame)
{
    case 1:
        for (var i1:int = 0; i1 < 8; i1++)
        {
            if (answer1[i1] != rightAnswer1[i1])
            {                   
                anyArray[currentFrame - 1] = 2;
                trace("Answer " + i1 + " is wrong!");
                break outside; 
            }
        }

        trace("Answer is right!");
        anyArray[currentFrame - 1] = 1;

        break; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-23T20:31:21.430

虽然您可以添加*cleong*回答的标签，但我建议避开它们，因为它们往往会使代码不必要地复杂化。每次您认为需要添加标签时，可能有一种更清晰、更清晰的方式来处理这种情况。

例如：在这段特定的代码中，您可以编写一个处理验证的函数，从而消除对标签的需求并消除您案例中的所有冗余。

```
switch (currentFrame)
{
    case 1:
        validateAnswer(answer1, rightAnswer1);
        break;

    case 2:
        validateAnswer(answer2, rightAnswer2);
        break;

    default:
        trace("ERROR");
        break;
} 
```

……剪……

```
private function validateAnswer(userAnswer:Array, rightAnswer:Array):Boolean
{
    for (var i:int = 0; i < rightAnswer.length; i++)
    {
        if (userAnswer[i] != rightAnswer[i])
        {                   
            anyArray[currentFrame - 1] = 2; //assuming that anyArray and currentFrame are class members
            return false;
        }
    }           
    anyArray[currentFrame - 1] = 1;
    return true;
} 
```

我相信这样你的代码会更具可读性、可扩展性和更不容易出错。

# javascript - 带有 jquery/javascript 的桌面样式 UI

> ID：12094657
> 
> 赞同：0
> 
> 时间：2012-08-23T15:02:03.277
> 
> 标签：javascript, javascript-framework

所以我即将开始一个项目，我需要使用 javascript 绘制矩形框来表示关系数据库中的信息（和关系）。想想像**balsalmiq**或**mysql workbench**这样的 GUI 工具。我将取回数据和关系的 json 表示，我基本上需要绘制矩形框，其中连接表示关系并用数据填充框。数据将是财务数据，因此例如当证券下跌 3% 时，我需要反映这一点。用户也可以更新值，这些值会被持久化。

从我目前的研究来看，我认为可以将**AngularJS/EmberJS**之类的东西用作视图层，并与一些**jquery**混合以方便 dom 操作。后端将在 java 中完成，但我计划在 rails 中进行快速试验，因为它很容易启动和运行。

我对 JS 有很好的理解，但没有做过任何大规模的应用程序......所以非常欢迎您的评论、见解或示例。谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-23T15:08:51.723

你可能想看看像 ExtJS 这样的东西 - 你可以在这里了解更多信息[http://www.sencha.com/](http://www.sencha.com/)

# sql - SQL INNER QUERY 在 UPDATE 查询中返回多个值

> ID：12094658
> 
> 赞同：5
> 
> 时间：2012-08-23T15:02:08.487
> 
> 标签：sql, sql-server, sql-update, inner-query

我有一个要使用另一个表的记录来更新的表，我这样做是为了将信息从一个系统（数据库）带到另一个系统（数据库）。场景有点复杂，但我迫切需要帮助`:-s`

有 3 个表-`component`和`scan``stage_link`

**零件**

```
component_id  stage_id
------------  --------
1              NULL
2              NULL
3              NULL
4              NULL
5              NULL 
```

**扫描**

```
scan_id  component_id  scanner_id           date_scanned
-------  ------------  ----------  -----------------------
 1         1           scanner_a    2012-01-01 07:25:15.125
 2         1           scanner_b    2012-01-02 08:14:05.456
 3         2           scanner_a    2012-01-01 12:05:45.465
 4         3           scanner_a    2012-01-01 19:45:12.536
 5         1           scanner_c    2012-01-03 23:33:54.243
 6         2           scanner_b    2012-01-02 11:59:12.545 
```

**stage_link**

```
stage_link_id  scanner_id  stage_id
    -------     ----------  ----------  
       1         scanner_a    1   
       2         scanner_b    1    
       3         scanner_c    2    
       4         scanner_d    2    
       5         scanner_e    2   
       6         scanner_f    3 
```

我需要根据最新扫描`update`的表格`component`和`set`字段。`stage_id`根据所涉及的扫描仪，每次扫描都会将组件带到一个阶段。我已经为`update`table编写了以下查询`component`，但它会抛出一个错误说；

`Subquery returned more than 1 value. This is not permitted when the subquery follows '='`

查询是；

```
UPDATE component
SET stage_id = (select stage_id
                from(
                    select scn.scanner_id, sl.stage_id
                    from scan scn
                    INNER JOIN stage_link sl ON scn.scanner_id = sl.scanner_id
                    where scn.date_scanned = (  select temp_a.max_date 
                                                from (  SELECT x.component_id, MAX(x.date_scanned) as max_date
                                                        FROM scan x
                                                        where component_id = x.component_id 
                                                        GROUP BY x.component_id
                                                      ) as temp_a
                                                where component_id = temp_a.component_id)
                    ) as temp_b
                ) 
```

我正在努力`MS SQL Server`并希望使用不使用`PHP`任何语言或任何其他语言来解决这个问题。

我已经尝试了一天来完成这项工作，但仍然没有办法完成这项工作。任何帮助将不胜感激！

非常感谢你:-)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-23T16:23:11.850

在不使用相关子查询的情况下检查这一点：

```
UPDATE  Com
SET     stage_id = Temp4.stage_id
FROM    dbo.component Com
        INNER JOIN 
        ( 
            SELECT Temp2.component_id ,SL.stage_id
            FROM   dbo.stage_link SL
            INNER JOIN (
                            SELECT component_id ,scanner_id
                            FROM   scan
                            WHERE  date_scanned IN (
                                SELECT  MaxScanDate
                                FROM    
                                ( 
                                    SELECT component_id , MAX(date_scanned) MaxScanDate
                                    FROM scan
                                    GROUP BY component_id
                                ) Temp 
                            )
                        ) Temp2 ON Temp2.scanner_id = SL.scanner_id
        ) Temp4 ON Com.component_id = Temp4.component_id 
```

输出：

```
component_id stage_id
------------ -----------
1            2
2            1
3            1
4            NULL
5            NULL 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-23T15:12:30.230

好吧，您的子查询返回多个值。一种简单的方法是进行聚合：

```
SET stage_id = (select max(stage_id)
. . . 
```

一个可能的原因是因为在最近的日期进行了多次扫描。由于您只能选择一个，给定上下文，那么 MIN 或 MAX 就足够了。

但是，我认为真正的原因是您没有相关子查询的正确别名。我认为这些行：

```
where component_id = x.component_id
where component_id = temp_a.component_id 
```

应该包括别名，可能是：

```
where component.component_id = x.component_id
where component.component_id = temp_a.component_id 
```

如果这还不够，你需要解释你想要什么。您是否希望查询从最近的日期返回随机扫描？您想在最近日期更新所有扫描的组件吗？

您需要对此进行进一步调查。尝试这样的事情：

```
select scn.scanner_id, sl.stage_id, count(*)
from scan scn INNER JOIN
     stage_link sl
     ON scn.scanner_id = sl.scanner_id join
     (SELECT x.component_id,
             MAX(x.date_scanned) as max_date
      FROM scan x
      GROUP BY x.component_id
     ) cmax
     on scn.component_id = cmax.component_id
where scn.date_scanned = cmax.maxdate 
group by scn.scanner_id, sl.stage_id
order by count(*) desc 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-23T15:35:40.977

这需要一个 OLAP 函数才能工作：

```
UPDATE Component SET Component.stage_id = Stage_Link.stage_id
FROM Component
JOIN (SELECT component_id, scanner_id, 
             ROW_NUMBER() OVER(PARTITION BY component_id 
                               ORDER BY date_scanned DESC) rownum
      FROM Scan) Scan
  ON Scan.component_id = Component.component_id
     AND Scan.rownum = 1
JOIN Stage_Link
  ON Stage_Link.scanner_id = Scan.scanner_id
WHERE Component.stage_id IS NULL 
```

这会生成以下结果集：

```
Component
component_id   stage_id
========================
1              2
2              1
3              1
4              null
5              null 
```

（我也有一个有效的 SQL Fiddle[示例](http://www.sqlfiddle.com/#!3/530c5/6)。）

# jquery - JQuery中的动态数字

> ID：12094659
> 
> 赞同：1
> 
> 时间：2012-08-23T15:02:09.793
> 
> 标签：jquery, asp.net

我不知道为什么我在搜索这个时遇到了这么多麻烦，看起来很容易，但我找不到任何信息。

基本上，我希望根据字段中的数字来更新我的 ASP.net 表单上的控件。

因此，如果我有 0x0= 它会显示 0，如果我将数字更改为 5x5= 它会自动显示 25（一旦我完成输入）

编辑：我真的没有一个好的代码示例，这是我想要的一个示例。

```
<asp:textbox></asp:textbox>X<asp:textbox></asp:textbox> = <asp:label text="value of the last two being changed dynamically" /> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-23T15:08:20.193

下面将计算输入`=`符号时的输入，并将该值替换为计算结果。

所以：

*   `5*5=`将被替换为`25`
*   `5x5=`将被替换为`25`
*   `5+5=`将被替换为`10`

* * *

```
$("input").keyup(function(){
       var $this = $(this);
        if ($this.val().indexOf("=")>=0){
           $this.val(eval($this.val().replace("=", "").replace("x","*")));
        }            
    }); 
```

[http://jsfiddle.net/QP8ay/1/](http://jsfiddle.net/QP8ay/1/)

此方法用于`eval()`将字符串转换为计算。然而，这不是很安全：

[为什么使用 JavaScript eval 函数是个坏主意？](https://stackoverflow.com/questions/86513/why-is-using-the-javascript-eval-function-a-bad-idea)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-23T15:10:58.630

## 与`try..catch`_`eval()`

我在[JSFiddle](http://jsfiddle.net/hU7kz/)上创建了一个不安全的示例，它可以满足您的要求，但不是在插入符号仍在输入框上时等待结果，而是附加到`blur`事件，以便在您将焦点切换到控件之外时评估值。

它的作用是这样的：

```
$("input").blur(function(evt) {
    try {
        var val = eval(this.value);
        this.value = val;
    }
    catch (e) {}
}); 
```

它尝试评估输入框的内容，如果能够这样做，则将内容替换为结果。这意味着你可以向它扔任何东西，只要`eval`能咀嚼它。

我说不安全，因为代码没有检查任何可能导致黑洞吞噬宇宙的内容...... ;)

### 例子

*   `1 + 2 * 3`会变**7**
*   `universe`会留下它作为**宇宙**
*   `010+1`将更改为**9**（因此它也可以使用八进制）
*   `0xf *2 +3`将返回**33**（看起来也是十六进制）
*   等等

## 实施您的方式以使其更安全

这当然只是一个开始。如果您希望**x**成为乘数，则必须在输入字符串中进行一些替换，而我的示例没有这样做。但这样做非常简单。

如果您只想进行特定的计算也是如此，因此您不允许创建对象或日期或任何东西......

在您的情况下可能不受欢迎的一个示例是，如果您输入

```
alert(new Date()) 
```

它当然会执行此代码并显示一个警告框。是否允许这样做取决于您。如果您要将原始数据发布到服务器，您当然希望严格清理输入。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-23T15:08:07.770

您应该能够绑定到`change event`并获取源输入的值，然后使用它来填充您的其他控件，例如

```
 $('#inputSource').on('change', function(e) {        
       var value = $(this).val();
       if (value.match('=')) {
           value = value.replace('=','');
           numbers = value.split('x');
         if (numbers.length > 1) {
           $('#controlToBeUpdated').val(parseInt(numbers[0]) * parseInt(numbers[1]));
         }
       }
    }; 
```

当然，您需要添加一些验证以确保值是数字等。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-23T15:36:39.080

我会使用以下内容：

```
$(function() {
    "use strict";
    var valid = /^[\d]+[x\/\*+\-][\d]+=$/i;

    $("#calc").on("keyup", function( e ) {
        var $this = $(this);
        if ( e.keyCode === 48 ) {
            if ( valid.test(this.value) ) {
                $this.val(eval($this.val().replace("=", "").replace("x","*")));
            }
        }
    });
}); 
```

由于**eval 是邪恶的**和不安全的，最好先检查这个计算是否真的**有效**。还要检查是否按下了实际`=`的键。

请参阅以下小提琴：http: [//jsfiddle.net/sQVe/DSDQ2/](http://jsfiddle.net/sQVe/DSDQ2/)

# python - 用于将 stdout 和 stderr 捕获到文件并在后台运行进程的 shell 脚本

> ID：12094662
> 
> 赞同：2
> 
> 时间：2012-08-23T15:02:20.853
> 
> 标签：python, stdout, stderr

我在 /etc/init.d 中有一个 shell 脚本，它启动一个 python 脚本，这是那一行：

```
/pathto/python /pathto/file.py >>/pathto/stdout_stderr.log 2>&1 & 
```

计划是将stdout和stderr捕获到一个文件中，并在后台运行该进程

我在日志中看到了来自 python 子进程的信息（例如来自 aplay），但没有来自 python print 的输出

该计划是保持python简单和可重用，但我更愿意改变我在shell脚本中的方法......

# python - os.remove 去哪儿了？

> ID：12094663
> 
> 赞同：13
> 
> 时间：2012-08-23T15:02:21.733
> 
> 标签：python

我已经使用 Python 很长时间了，并且在我的办公室里运行着许多脚本。我使用一些特别的脚本来备份然后删除数据。在这些脚本中，我使用`os.remove`函数。

我的问题是：**os.remove 函数将项目删除到哪里？**

*   它会立即从高清中删除它们吗？
*   我知道他们不会去回收站
*   它是否只是删除了项目的链接，但以某种方式将其保留在 HD 上？

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2012-08-23T15:05:53.730

`os.remove` 将调用操作系统的`unlink`功能，并从磁盘中删除文件。

从技术上讲，操作系统/文件系统可能只是将扇区标记为空闲，并从目录中删除文件条目，但这取决于文件系统的实现。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-08-23T15:03:11.943

它只是从硬盘中删除它们

# jquery - jQuery datepicker 的最大日期

> ID：12094668
> 
> 赞同：2
> 
> 时间：2012-08-23T15:02:43.217
> 
> 标签：jquery, datepicker

谁能看到这里出了什么问题，我正在尝试从计算日期的 php 变量中设置 datepicker 的最大日期。

我用过：

```
$ac_start_date = 01-08-2012
$ac_start_date = 20120801 
```

但两者都不起作用。

```
 $(document).ready(dialogForms);
function dialogForms() {    
 $('a.menubutton').click(function() {
    var a = $(this);
    $.get(a.attr('href'),function(resp){
      var dialog = $('<div>').attr('id','formDialog').html($(resp).find('form:first').parent('div').html());
      $('body').append(dialog);
      dialog.find(':submit').hide();
      dialog.dialog({
        title: a.attr('title') ? a.attr('title') : '',
        modal: true,
        buttons: {
          'Save': function() {
                submitFormWithAjax($(this).find('form'));
                location.reload();      
                $(this).dialog('close');
                },
          'Cancel': function() {$(this).dialog('close');}
        },
        close: function() {$(this).remove();},
        width: 600,
        height: 500,        
        show: "fade",
        hide: "fade"
      });

      // do initialization here
        $("#startdate").datepicker({
            dateFormat: 'dd-mm-yy',
            minDate: 'tomorrow',
            maxDate: new Date("<?php echo $ac_end_date; ?>")
        });
      // do initialization here
        $("#enddate").datepicker({
            dateFormat: 'dd-mm-yy',
            minDate: 'tomorrow',
            maxDate: new Date("<?php echo $ac_end_date; ?>")
        });

    }, 'html');
    return false;
  });
} 
```

**编辑** 答案的修改版本

```
var ac_end_date = '07-31-2012'; // you want this to start out as a string
var ac_end_parsed = Date.parse(ac_end_date); // parse into milliseconds
var today = new Date().getTime(); // baseline

console.log(ac_end_date);
console.log(ac_end_parsed);
console.log(today);

var aDayinMS = 1000 * 60 * 60 * 24; 
console.log(aDayinMS);

// Calculate the difference in milliseconds
var difference_ms = Math.abs(today - ac_end_parsed);
console.log(difference_ms);

// Convert back to days and return
var DAY_DIFFERENCE = Math.round(difference_ms/aDayinMS); 
console.log(DAY_DIFFERENCE);

// do initialization here
$("#startdate").datepicker({
            changeMonth: true,
            changeYear: true,
            yearRange: '0:+100',
            minDate: '+1d',         
            maxDate: '+' + DAY_DIFFERENCE + 'd'
});

// do initialization here
$("#enddate").datepicker({
            changeMonth: true,
            changeYear: true,
            yearRange: '0:+100',
            minDate: '+1d',         
            maxDate: '+' + DAY_DIFFERENCE + 'd'
}); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-23T15:10:48.330

这可以更容易地完成，如下所示：

[**更新(8/29) jsFiddle DEMO**](http://jsfiddle.net/3E7Fv/4/)

只需将 minDate 设置为明天的 +1d （+1 天）...解析您的日期，即为 Days，查看距**今天**还有多少天，并将其设置为`maxDate`.

```
var $ac_start_date = '08-27-2012',
    $ac_start_date_flip = '2012-08-27',
    $ac_start_parsed = Date.parse($ac_start_date),
    _today = new Date().getTime();

// For Opera and older winXP IE n such
if (isNaN($ac_start_parsed)) { 
    $ac_start_parsed  = Date.parse($ac_start_date_flip);
}

var _aDayinMS = 1000 * 60 * 60 * 24; 

// Calculate the difference in milliseconds
var difference_ms = Math.abs($ac_start_parsed - _today);

// Convert back to days and return
var DAY_DIFFERENCE = Math.round(difference_ms/_aDayinMS); 

$('.datepicker').datepicker({ 
    changeMonth: true,
    changeYear: true,
    yearRange: '0:+100',
    minDate: '+1d',
    maxDate: '+' + DAY_DIFFERENCE + 'd'
}); 
```

瞧 :)

# vb.net - Vb.net 将所有声明的按钮添加到我的表单

> ID：12094671
> 
> 赞同：0
> 
> 时间：2012-08-23T15:02:48.140
> 
> 标签：vb.net, winforms

我想将所有声明的按钮添加到我的表单中

就像是：

```
dim btn1,btn2,btn3 as new button

for each btn as button in declared.buttons
me.controls.add(btn)
next 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-23T15:14:26.427

您可以像这样添加按钮：

```
For i As Integer = 1 To 150
    Dim btn As New Button()
    btn.Name = "btn" + i.ToString()
    Controls.Add(btn)
Next 
```

稍后，您可以像这样访问按钮：

```
Dim btn As Button = CType(Controls("btn1"), Button) 
```

但是，如果您需要动态加载这么多控件，您可能需要重新考虑您的设计。在大多数情况下，这听起来是个坏主意。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-23T15:26:26.530

您可以使用以下方式获取您声明的所有按钮：

```
Dim buttons = From fi In Me.GetType().GetFields(BindingFlags.Instance Or BindingFlags.NonPublic)
   Where fi.FieldType Is GetType(Button)
   Select CType(fi.GetValue(Me), Button) 
```

在我的头顶上..仍在努力..但你明白了吗？

# memory-management - kzalloc() - 一次调用的最大大小？

> ID：12094673
> 
> 赞同：2
> 
> 时间：2012-08-23T15:02:52.147
> 
> 标签：memory-management, linux-kernel, kernel

我们可以在一次调用中使用 kzalloc() 分配的最大大小是多少？

这是一个非常常见的问题。另外请让我知道我是否可以验证该值。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-24T01:29:19.370

上限（可以在单个 kmalloc / kzalloc 请求中分配的字节数）是一个函数：处理器 - 实际上是页面大小 - 以及伙伴系统空闲列表的数量 (MAX_ORDER)。

在 x86 和 ARM 上，标准页面大小为 4 Kb，MAX_ORDER 为 11，单次调用的 kmalloc 上限为 4 MB！

详细信息，包括解释和测试代码，在这里：http: [//kaiwantech.wordpress.com/2011/08/17/kmalloc-and-vmalloc-linux-kernel-memory-allocation-api-limits/](http://kaiwantech.wordpress.com/2011/08/17/kmalloc-and-vmalloc-linux-kernel-memory-allocation-api-limits/)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-23T15:35:19.933

与 kmalloc() 没有什么不同。这是您应该问（或搜索）的问题，因为 kzalloc 只是一个设置 GFP_ZERO 的薄包装器。

最多大约 PAGE_SIZE（至少 4k）没问题：p。除此之外......你说得对，很多人都问过，这绝对是你必须考虑的事情。显然它取决于内核版本 - 曾经有一个硬性 128k 限制，但现在已经增加（或者可能完全放弃）。不过，这只是硬性限制，您实际可以获得的内容取决于给定的系统。（而且非常肯定在内核版本上）。

也许阅读[vmalloc和kmalloc有什么区别？](https://stackoverflow.com/questions/116343/what-is-the-difference-between-vmalloc-and-kmalloc)

您始终可以通过检查 kzalloc() 的返回值来“验证”分配，但到那时您可能已经记录了分配失败的回溯。除此之外，不 - 我认为没有提前检查的好方法。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-11-07T09:31:25.220

但是，这取决于您的内核版本和配置。这些限制通常位于 linux/slab.h 中，通常描述如下（本示例在 linux 2.6.32 下）：

```
#define KMALLOC_SHIFT_HIGH  ((MAX_ORDER + PAGE_SHIFT - 1) <= 25 ? \
                             (MAX_ORDER + PAGE_SHIFT - 1) : 25)
#define KMALLOC_MAX_SIZE    (1UL << KMALLOC_SHIFT_HIGH)
#define KMALLOC_MAX_ORDER   (KMALLOC_SHIFT_HIGH - PAGE_SHIFT) 
```

您可以使用以下代码测试它们：

```
#include <linux/module.h>
#include <linux/slab.h>
int init_module()
{

    printk(KERN_INFO "KMALLOC_SHILFT_LOW:%d, KMALLOC_SHILFT_HIGH:%d, KMALLOC_MIN_SIZE:%d, KMALLOC_MAX_SIZE:%lu\n",
            KMALLOC_SHIFT_LOW,  KMALLOC_SHIFT_HIGH, KMALLOC_MIN_SIZE, KMALLOC_MAX_SIZE);
    return 0;
}

void cleanup_module()
{
    return;
} 
```

最后，linux 2.6.32 32bits下的结果是：3,22,8,4194304，表示最小大小为8字节，最大大小为4MB。

PS。也可以查看kmalloc分配的实际内存大小，只需要使用ksize()，即

```
void *p = kmalloc(15, GFP_KERNEL);
printk(KERN_INFO "%u\n", ksize(p)); /* this will print "16" under my kernel */ 
```

# javascript - Javascript 中“var”声明的变量和“this”创建的属性有什么区别？

> ID：12094676
> 
> 赞同：6
> 
> 时间：2012-08-23T15:03:07.940
> 
> 标签：javascript

首先使用 var

```
 function testCode(some) 
    {
         var something = some;
    } 
```

第二个使用这个

```
function testCode2(some) 
{
     this.something = some ;
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-23T15:08:48.337

在第一个函数中，`something`是一个*私有*（局部）变量，这意味着它在函数之外完全不可访问；而在第二个中，它是一个*公共*实例变量。设置变量的上下文取决于您调用函数的方式：

```
> testCode2("foo"); // this will refer to document.window
> something
"foo"

>> var obj = new testCode2("foo"); // this will refer to the new object
>> something
ReferenceError: something is not defined
>> obj.something
"foo" 
```

### 参考：

*   [JavaScript](http://javascript.crockford.com/private.html)中的私有成员，Douglas Crockford 着

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-23T15:19:54.237

如果将这些函数用作函数，则 this 关键字将使变量变为静态。如果函数被调用两次，this.something 仍然有它的值，而第一个主题将在函数完成执行后擦除变量数据。

如果您将它们用作类构造函数，则 var 将定义一个私有变量，这将声明一个公共变量。

看到这个小提琴：http: [//jsfiddle.net/UUFuX/1/](http://jsfiddle.net/UUFuX/1/)

# wcf - 你如何模拟 WCF 服务中的查询字符串？

> ID：12094680
> 
> 赞同：0
> 
> 时间：2012-08-23T15:03:16.257
> 
> 标签：wcf, query-string, moq

我有一个 WCF 服务，它的方法依赖于从 http 请求的查询字符串中读取值（OData）。我正在尝试编写将模拟值注入查询字符串的单元测试，然后当我调用该方法时，它将使用这些模拟值而不是由于请求上下文不可用而出错。

我尝试过使用[WCFMock](http://wcfmock.codeplex.com/)（基于 Moq），但是我看不到从它提供的 WebOperationContext 设置或获取查询字符串的方法。

有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-24T13:38:42.797

我最终使用 IOC 模式来解决这个问题，创建了一个 IQueryStringHelper 接口，该接口被传递到服务的构造函数中。如果它没有被传入，那么它将默认使用“真正的” QueryStringHelper 类。运行测试用例时，它会使用重载的服务构造函数来传入 TestQueryStringHelper 实例，它允许您为查询字符串设置模拟值。

这是查询字符串帮助程序代码。

```
public interface IQueryStringHelper {
        string[] GetParameters();
    }

    public class QueryStringHelper : IQueryStringHelper {
        public string[] GetParameters() {
            var properties = OperationContext.Current.IncomingMessageProperties;
            var property = properties[HttpRequestMessageProperty.Name] as HttpRequestMessageProperty;
            string queryString = property.QueryString;
            return queryString.Split('&');
        }
    }

    public class TestQueryStringHelper : IQueryStringHelper {
        private string mockValue;

        public TestQueryStringHelper(string value) {
            mockValue = value;
        }

        public string[] GetParameters() {
            return mockValue.Split('&');
        }
    } 
```

以及服务实现：

```
 public partial class RestService : IRestService {
            private IAuthenticator _auth;
            private IQueryStringHelper _queryStringHelper;

            public RestService() : this(new Authenticator(), new QueryStringHelper()) {
            }

            public RestService(IAuthenticator auth, IQueryStringHelper queryStringHelper = null) {
                _auth = auth;
                if (queryStringHelper != null) {
                    _queryStringHelper = queryStringHelper;
                }
            }
} 
```

以及如何从测试用例中使用它：

```
string odata = String.Format("$filter=Id eq guid'{0}'", "myguid");
var service = new RestService(m_auth,new TestQueryStringHelper(odata));
var entities = service.ReadAllEntities(); 
```

希望这对其他人有帮助。

# objective-c - 带有缩放目标 c 的图像上方的按钮

> ID：12094681
> 
> 赞同：0
> 
> 时间：2012-08-23T15:03:20.127
> 
> 标签：objective-c, uiview, uiimageview, uibutton, zooming

我需要显示一个图像，在它上面有一些按钮对应于图像的某些可点击区域，问题是图像具有缩放功能，当我缩放图像时，按钮不会与图片保持在同一个位置. 解决方案是使用 Apple PhotoScroller 示例中使用的 ImageScrollView 类。无论缩放如何，该按钮都会出现在正确的位置。

就像示例一样，我使用 ScrollView 来显示多个图像，这些图像由 ImageScrollView 类显示。

该类在.H文件中声明了一个UIView，但是在实现文件中，显示图片的方法，将UIView转换为UIImageView

```
imageView = [[UIImageView alloc] initWithImage: image]; 
```

然后创建我的按钮并添加到 imageView。

```
 amazon = [UIButton buttonWithType: UIButtonTypeRoundedRect];
 amazonia.frame = CGRectMake (92,240,109,142);
 [amazon addTarget: self action: @ selector (selectState :) forControlEvents: UIControlEventTouchUpInside];
 [imageView addSubview: amazon]; 
```

我的问题是按钮不响应按钮事件，它出现在正确的位置和所有内容，但不响应按钮事件。

有任何想法吗？也欢迎有关如何在图像上实现这些可点击区域的想法。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-23T15:27:51.080

确保设置`imageView.userInteractionEnabled = YES`！

希望有帮助。

# c++ - 敏捷中数据类和逻辑类的区别

> ID：12094682
> 
> 赞同：-3
> 
> 时间：2012-08-23T15:03:30.313
> 
> 标签：c++, coding-style, agile

我一直在阅读一本关于干净编码的敏捷书，主要是用 Java 和 c# 编写的。考虑区分数据类和逻辑/对象类的概念。我在 c++ 中有以下情况，我无法确定哪个变体是干净的代码。我有一个带有一些属性的 Plane 类，当只有其中一个属性发生变化时，这些属性会发生变化，所以

**第一种方法**

```
class Plane3D {
   public:
      BBox bbox;
      float l,w,h;
      void setbbox(BBox bbox) {
         this->bbox = bbox;
         recalculateLWH();
      }
      void setLWH(float l, float w, float h) {
          //set here
          recalculateBBOX();
      }
}; 
```

这对我来说很有意义，因为对于用户来说，他只是调用一种方法，而不必关心类的内部工作。但这违反了数据类，因为它包含逻辑现在

**第二种方法**

```
class Plane3D {
   public:
     BBox bbox;
     float l,w,h;
     void setbbox(BBox bbox) {
             this->bbox = bbox;
          }
     void setLWH(float l, float w, float h) {
      //set here LWH
     }  
};

int main() {
  BBox bbox;//init here
  Plane plane;
  plane.setBBox(bbox);
  recalculateLWH(plane);
} 
```

现在第二种方法实际上将数据类与实现分开，但它增加了类用户的责任并迫使他进行额外的调用。据我了解，第二种方法是敏捷 POV 中的正确方法，但我发现第一种方法使用起来更合乎逻辑。

我想知道这两种方法中哪一种更适合你们理解和使用

问候

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-08-23T15:45:49.833

在这种情况下，我认为您应该更喜欢第一种方法而不是第二种方法。

*   您的方法调用应该将对象从一种正确状态转换为另一种正确状态。在您调用后使用第二种方法，您`setBBox(bbox);`的对象确实会移动到一些不正确的状态。

但是“逻辑类方式”可以在另一种情况下发生。

*   考虑您应该将飞机:) 从机库移动到着陆跑道。现在很自然地会引入新的类命名`Tractor`并像使用它一样使用它`tractor.move(plane)`

# facebook - Facebook Open Graph Action + Rails：返回 JSON 或 HTML

> ID：12094683
> 
> 赞同：1
> 
> 时间：2012-08-23T15:03:39.613
> 
> 标签：facebook, ruby-on-rails-3

我已经按照 Ryan Bates 的精彩教程实现了 Facebook 的 Open Graph：[http ://railscasts.com/episodes/363-facebook-open-graph](http://railscasts.com/episodes/363-facebook-open-graph)

但是，当 Facebook 抓取我的网站以检索`og`参数时，它看起来像是在要求 JSON 格式。这是一个问题，因为我已经使用 JSON 来返回数据用于其他目的。我可以通过`format.html`. 我检查了请求对象，我看到了这个 ACCEPT 标头：

```
'HTTP_ACCEPT' */* 
```

但是，这导致我的应用程序执行`format.json`. 我玩弄了格式响应的顺序，它仍然请求`format.json`.

```
respond_with(@project) do |format|
    format.html { render 'show'}
    format.json { render 'show'}
    format.js { render 'show'}
end 
```

有任何想法吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-23T20:31:53.647

经过大量试验和错误后，我发现使用 Accept Header `*/*`，如果您使用的是 ，则`respond_with`需要确保`respond_to`控制器顶部的 与您想要的顺序相匹配...在我的情况下，这是对的：

```
class ProjectsController < ApplicationController
  respond_to :html
  respond_to :json
  respond_to :js,
  ... 
```

这不是

```
class ProjectsController < ApplicationController
  respond_to :json
  respond_to :html
  respond_to :js,
  ... 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-08-25T18:57:26.057

非常感谢！

注意，您可能还需要更改顺序：

```
 respond_to do |format|
  format.json { render :json => @this.to_json }
  format.html
end 
```

至：

```
 respond_to do |format|
  format.html
  format.json { render :json => @this.to_json }
end 
```

正如在 facebook 打开图形爬虫中所说的那样，[在 Rails 操作中触发 json 响应](https://stackoverflow.com/questions/11112467/facebook-open-graph-crawler-triggering-json-response-in-rails-actions)

# php - MySQL按天自动增量？

> ID：12094689
> 
> 赞同：-2
> 
> 时间：2012-08-23T15:04:10.130
> 
> 标签：php, mysql

如何每天减少 MySQL 字段？

如：

field1= 30 和 24 小时后 -> field1=29 直到 0。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-23T15:07:47.167

您可能最好将当前日期放在数据库中，然后使用[DATEDIFF](http://dev.mysql.com/doc/refman/5.1/en/date-and-time-functions.html#function_datediff)获取此后的日期。您甚至可以执行 30 - DATEDIFF，然后按照您想要的方式获得数字。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-23T15:06:47.397

您可以执行一个 Unix *cron 作业（*[这里](https://stackoverflow.com/questions/120228/php-running-scheduled-jobs-cron-jobs)有一些信息），它将每天执行您的 PHP 脚本。

# windows-phone - 如何制作本地化应用程序？

> ID：12094690
> 
> 赞同：-1
> 
> 时间：2012-08-23T15:04:10.647
> 
> 标签：windows-phone

我想让我的应用本地化，但我不知道从哪里开始。我看了一下msdn指南，但我并没有真正理解。我的应用程序将本地化为意大利语、法语和英语。有人可以帮我吗？？谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-27T14:28:50.757

通过快速的网络搜索可以找到很多关于此的教程。[包括像这样的分步教程](http://www.windowsphonegeek.com/articles/Localizing-a-Windows-Phone-app-Step-by-Step)。将来，在提出如此广泛的问题之前，您可能会包括您尝试过的内容或查看其他资源。如果我没记错的话，通常的地方也有分步视频教程。

# .net - Visual Studio 2012 随机报告：“找不到引用的组件 X”

> ID：12094692
> 
> 赞同：19
> 
> 时间：2012-08-23T15:04:13.143
> 
> 标签：.net, visual-studio-2012, .net-4.5

我最近将解决方案从 VS 2010 和 .NET 4.0 迁移到 VS 2012 和 .NET 4.5，并将其重新定位。然而，现在突然和随机 VS 2012 报告几乎所有跨项目引用为：

```
"The referenced component X could not be found" (warning) 
```

现在，我知道这是不正确的。首先是因为我可以在为程序集引用设置的目录中看到程序集，其次因为当我打开“添加引用”对话框时，警告突然消失了，程序集引用上的黄色警告图标也是如此

进行完全重建会清除警告，然后它将保持这种状态一段时间，然后随机再次显示相同的警告。

有人见过这个吗？可能是什么原因，我该如何解决？

编辑：我在 VS 2010 中没有看到这种奇怪的行为

编辑：报告警告以引用同一解决方案中的其他项目。

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-08-24T10:58:14.233

它是由并行构建引起的。将“最大并行项目构建数”设置为 1 将解决该问题。

另请参阅：[http ://social.msdn.microsoft.com/Forums/en-US/msbuild/thread/a9ac83eb-14b3-4bd2-bc51-7c2ae7363c46](http://social.msdn.microsoft.com/Forums/en-US/msbuild/thread/a9ac83eb-14b3-4bd2-bc51-7c2ae7363c46)

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-05-23T18:04:48.373

我刚刚在 31 个项目中遇到了类似的问题，结果证明是框架版本不匹配 - 你应该检查框架版本依赖项。

就我而言，4.0 库无法构建，因为它依赖于 4.5 库，并且无法解析 4.5 库中的类型。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-23T15:29:34.240

在项目版本升级后的 VS 2008 和 2010 中有时会看到这种行为。通常再次删除和添加引用可以解决问题。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-17T13:38:20.623

如果你也有这个问题，请投票“我可以重现这个”。

[https://connect.microsoft.com/VisualStudio/feedback/details/759434/vs2012-parallel-build-produces-many-the-referenced-component-could-not-be-found-warnings](https://connect.microsoft.com/VisualStudio/feedback/details/759434/vs2012-parallel-build-produces-many-the-referenced-component-could-not-be-found-warnings)

我们在 VS 2012 中有 75 个项目不断地解决它。

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2017-04-29T12:10:49.307

在解决方案中添加另一个相同类型的项目。稍等片刻。问题将得到解决。删除新添加的项目。

# c++ - C++，联合与类继承

> ID：12094694
> 
> 赞同：5
> 
> 时间：2012-08-23T15:04:18.777
> 
> 标签：c++, class, inheritance, unions

我有一个特定的问题，我被困在哪种方法比另一种更好：

具有枚举的结构，定义联合成员中的数据或一组具有继承的类

示例代码如下：

**基于联合的结构**

```
 typedef union TokenValue{
   bool bValue;
   long lvalue;
   double dvalue;
   std::string svalue;
   }

  class Token{
  public:
   TokenType type;
   TokenValue value;
   }; 
```

**类继承**

```
class TokenBase{
public:
  TokenType type;
  };

class TokenNumber: public TokenBase{
public:
bool isInt;
long lvalue;
double dvalue;
};

class TokenString: public TokenBase{
 public:
  std::string svalue;
 }; 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-23T15:16:27.877

这种类型的设计称为有[区别的联合或标记联合](http://en.wikipedia.org/wiki/Tagged_union)。您可以在 Google 上搜索“C++ 有区别的联合”以查看此类设计的几个示例和方法。

AC`union`通常被认为对 C++ 来说有点低级和不安全。正如[Pete Becker 所说](https://stackoverflow.com/a/12094861/25507)，`union`基于您的解决方案应该提供访问器，而不是直接暴露不安全的`union`成员。 `union`s 还有一个缺点，在 C++11 之前，它们不能包含非 POD 数据结构（所以 no `std::string`）。

基于继承的解决方案的优点是您可以开始使用多态性（例如，添加一个虚拟`PrintTo`方法）。（当然，您可以通过向基于 - 的解决方案添加一个`PrintTo`方法来完成类似的结果，但这是非 OO 的。）`union``switch``TokenType`

基于-`union`的解决方案可能比基于继承的解决方案更轻量级（否`vtable`）。对于像词法分析器令牌这样的低级事物，这可能更可取。

如果允许使用第三方库，我强烈建议您查看[Boost.Variant](http://www.boost.org/doc/libs/release/doc/html/variant.html)以获得更多 C++ 方法来区分联合。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-08-23T15:13:45.663

你的班级`Token`实现了所谓的“有区别的联合”。但是它的成员不应该是公开的；这使得在不更新类型标志的情况下更改存储在联合中的类型变得太容易了。相反，提供重载的访问器来存储和读取值。存储`bool`值的访问器也应该设置类型标志；对于其他访问者也是如此。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-23T15:09:30.257

if any/or: 默认情况下，您应该支持继承。工会可能存在风险并且容易被滥用。该语言在继承方面具有良好的语法和语义。

这个联合的普遍问题是你必须定义大量的实现细节，这些细节通常是从你那里抽象出来的——构造、销毁、模式、活动成员……</p>

正如评论所建议的那样 - 您应该详细说明您的问题以获得更具体的解决方案。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-23T15:15:52.750

几乎总是，继承是 C++ 中的首选方法。我能想到的唯一首选联合的情况是数据采用相同数量的位，但您还不知道解释这些位的正确方法。例如，您正在从可能是有符号或无符号 int 的套接字中读取原始位流，您将在后面的上下文中找到它。即使这样，通常也有更简洁的方法来实现它。

# titanium - Ti.StoreKit 和订阅

> ID：12094697
> 
> 赞同：0
> 
> 时间：2012-08-23T15:04:31.677
> 
> 标签：titanium, appcelerator, storekit

有没有人有一个使用 Ti.Storekit 每月订阅的好流程？您如何存储或处理数据以查明用户订阅是否已过期或信誉良好？我是 Ti.StoreKit 的新手，非常感谢任何帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-23T19:09:17.680

StoreKit 现在是免费的。在这里获取：[https ://marketplace.appcelerator.com/apps/794?1042752485](https://marketplace.appcelerator.com/apps/794?1042752485)

只需非常严格地遵循手册，就可以了。如果您有任何具体问题，请具体询问。

# javascript - 闭包编译器、 Backbone 和元编程

> ID：12094698
> 
> 赞同：1
> 
> 时间：2012-08-23T15:04:35.613
> 
> 标签：javascript, backbone.js, google-closure-compiler

我正在尝试在高级模式下使用 Backbone.js 和 Closure Compiler。`Backbone.Model`我编写了一个方便的函数，它为我的 s using创建 getter/setter `Backbone.Model.defaults`，它看起来像这样：

```
some.defaultProperties = function(ctor) {
    if (!ctor.prototype.defaults)
        return;
    var defattr = function(name) {
        return {
            get: function() {
                return this.get(name);
            },
            set: function(val) {
                var diff = {};
                diff[name] = val;
                return this.set(diff);
            }
        };
    };
    var props = {};
    for (var attr in ctor.prototype.defaults) {
        if (ctor.prototype.defaults.hasOwnProperty(attr))
            props[attr] = defattr(attr);
    }
    Object.defineProperties(ctor.prototype, props);
}; 
```

等效于 CoffeeScript 此处[http://srackham.wordpress.com/2011/10/16/getters-and-setters-for-backbone-model-attributes/](http://srackham.wordpress.com/2011/10/16/getters-and-setters-for-backbone-model-attributes/)

现在回到高级模式下的 Closure Compiler。它似乎不喜欢它，因为我正在使用普通的属性访问语法访问那些，即。`model.color`而不是`model.get('color')`，这就是重点。但是 Closure 正在破坏这些，因此我得到`undefined`的不是我的价值。有什么解决方法吗？（除了重写所有要使用的东西`get('attrname')`）？

**更新**当然，这将如何`Backbone.Model.hasChanged`与其他方法一起使用字符串文字作为属性名称。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-23T15:35:06.500

您正在使用引用的语法定义您的属性：

```
props[attr] 
```

但是当您尝试通过点语法访问它们时，就会出现问题：

```
model.color 
```

在 ADVANCED_OPTIMAZATIONS 中，一个基本规则是您必须一致地引用属性。请参阅[https://developers.google.com/closure/compiler/docs/api-tutorial3#propnames](https://developers.google.com/closure/compiler/docs/api-tutorial3#propnames)

听起来最简单的答案可能是对这些属性使用带引号的语法：

```
model['color'] 
```

但是，您将失去此类属性的所有重命名和死代码消除。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-23T23:54:58.630

您动态创建的任何属性在高级模式下都是“外部”的，您有三种选择：(1) 使用带引号的访问（如 Chad 建议的那样）或 (2) 创建外部或 (3) 使用简单模式并放弃属性重命名和全局死代码删除。

# c# - Web 服务方法调用超时，元数据请求工作正常

> ID：12094699
> 
> 赞同：1
> 
> 时间：2012-08-23T15:04:39.857
> 
> 标签：c#, .net, wcf, web-services, timeout

我有一个不响应方法调用的**WCF 服务。**在客户端，当我调用任何方法时都会超时。

有趣的是，当我在 Visual Studio 上更新参考时，它工作正常。它按预期响应元数据请求。

查看 Windows**事件日志**（在服务器上），我看到了消息`App Pool exceeded time limits during shut down`。

并查看**IIS 日志**，我看到消息，应用程序池的名称在`Connection_Abandoned_By_AppPool FooBar`哪里。`FooBar`

谁能告诉我为什么我的 WCF 服务没有响应客户端请求？

* * *

这是服务器上的**web.config**：

```
<?xml version="1.0"?>
<configuration>
  <startup useLegacyV2RuntimeActivationPolicy="true">
    <supportedRuntime version="v4.0" sku=".NETFramework,Version=v4.0"/>
  </startup>

  <system.web>
    <compilation debug="true" targetFramework="4.0" />
  </system.web>

  <system.serviceModel>
    <behaviors>
      <serviceBehaviors>
        <behavior name="FooBarBehaviors">
          <!-- To avoid disclosing metadata information, set the value below to false and remove the metadata endpoint above before deployment -->
          <serviceMetadata httpGetEnabled="true"/>
          <!-- To receive exception details in faults for debugging purposes, set the value below to true.  Set to false before deployment to avoid disclosing exception information -->
          <serviceDebug includeExceptionDetailInFaults="true"/>
        </behavior>
      </serviceBehaviors>
    </behaviors>

    <bindings>
      <basicHttpBinding>
        <binding name="FooBarBinding">
          <readerQuotas maxArrayLength="1048576" />
        </binding>
      </basicHttpBinding>
    </bindings>

    <services>
      <service name="FooBarSvc.FooBar" behaviorConfiguration="FooBarBehaviors">
        <endpoint contract="FooBarSvc.FooBar" binding="basicHttpBinding" bindingConfiguration="FooBarBinding" address="" />
      </service>
    </services>
  </system.serviceModel>

</configuration> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-24T13:45:22.747

I figured out that it was a problem with a component I'm using. The web service is fine, but the component hangs, making the method call to take forever to return, therefore, being abandoned and causing timeouts on client side.

# facebook - FACEBOOK LIKE（网址。从一致的网址提供这些资源）

> ID：12094700
> 
> 赞同：5
> 
> 时间：2012-08-23T15:04:51.527
> 
> 标签：facebook, facebook-like

我想解决这个问题...我收到以下错误或速度性能警告

以下资源具有相同的内容，但来自不同的 URL。从一致的 URL 提供这些资源以节省 1 个请求和 25.2KiB。

```
http://static.ak.facebook.com/connect/xd_arbiter.php?version=10
https://s-static.ak.facebook.com/connect/xd_arbiter.php?version=10 
```

我在下面尝试了很多，但仍然收到相同的警告

js.src = "https://connect.facebook.net/en_GB/all.js#xfbml=1";

js.src = "http://connect.facebook.net/en_GB/all.js#xfbml=1";

js.src = "//connect.facebook.net/en_GB/all.js#xfbml=1";

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-23T15:09:19.840

这是 Facebook 使用的内容交付网络的一项操作。他们决定从哪里为您提供内容。你无法控制它的来源。

如果您真的想维护某个资源的恒定 URL，您可能想尝试在本地提供该文件。将其下载到您的服务器并手动指定 URL。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-23T15:22:28.190

# android - 创建支持多屏的应用程序（2.2 及以上）

> ID：12094702
> 
> 赞同：2
> 
> 时间：2012-08-23T15:05:04.083
> 
> 标签：android, android-layout, android-intent, exception-handling, multiscreen

> 块引用

我正在成功创建我的第一个应用程序。但是现在我面临的一个问题是，当我在 android 2.2 中运行我的应用程序时，它会成功运行。但是当我以 3.0 或 4.0 启动它时，它会崩溃。

我在谷歌上找到但对此并不完全了解。所以我在这里寻求帮助。

请帮我找到这个。

提前致谢。

-玛扬克

> 当我在 4.0 版本中运行我的应用程序时，我的应用程序停止了，当运行 2.2 成功运行时......问题是什么......在 4.0 中不幸的是你的应用程序已经停止并且应用程序关闭了这个问题对我有什么帮助......

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-02T12:13:40.907

您必须对清单给予许可。如果没有，那么

```
<uses-sdk android:minSdkVersion="8" 
  android:targetSdkVersion="15" /> 
```

授予此权限。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-23T15:17:59.890

您首先阅读[本文](http://developer.android.com/guide/practices/screens_support.html) 是为了创建具有多种支持的应用程序。您可以在menifeast文件中声明，例如

```
<uses-sdk android:minSdkVersion="8" 
      android:targetSdkVersion="15" /> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-06T04:40:02.570

这个问题是 7 个月大的。仍然，如果有人通过在 android 上查看 NetworkOnMainThreadException 来访问此页面，这就是答案。

如果您的应用程序具有发送 HTTPGet / HTTPPost 调用等网络操作，则不支持从 Android 3.0（Honey Comb）直接在主线程上发送网络调用，因为它可能会停止主线程（UI 线程）执行直到网络调用响应，因为网络调用可能需要很长时间并且无法加载 UI，这对用户体验很烦人。

因此，发送网络调用可以在单独的线程或 Android API 提供类（[AsyncTask](http://developer.android.com/reference/android/os/AsyncTask.html)）上。

对 android 开发人员的另一项建议是

> 在最新版本上开始编码并将 min sdk 版本保持在尽可能低的水平（我个人使用 min SDK-8 和 Target SDK - latest），这样您将收到弃用警告并且您的应用程序可以在最新的 android 设备上运行（至少直到开发时的最新设备）。

# vim - 为 vim 自动补全递归地包含一个目录

> ID：12094708
> 
> 赞同：4
> 
> 时间：2012-08-23T15:05:16.653
> 
> 标签：vim

我使用源代码基本目录中的 vim。在编辑单个文件时，我希望自动完成考虑此目录（和子目录）中每个文件的每个单词。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-23T16:05:19.903

完成由`'complete'`选项控制。使用该`k`标志，您可以让 Vim 扫描文件。`**`通配符代表递归下降到子目录。瞧：

```
:set complete=k**/* 
```

当您想保留其他默认位置（其他缓冲区、包含文件等）时，请使用`:set complete+=`来添加。

* * *

或者，由于这对于默认值来说太慢了，您可以使用 'dictionary' 选项并使用 Ctrl-X Ctrl-K 补全：

```
:set dictionary=**/* 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-08-23T16:05:27.703

```
:argadd **/* 
```

这将递归地将所有文件加载到缓冲区中，并且完成将考虑它们。请注意，这将加载所有文件，包括您可能不想添加的文件，例如二进制文件或 CVS 目录中的文件。像下面这样更细粒度的 glob 可能是一个好主意。

```
:argadd **/*.cpp 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-23T16:26:13.327

我认为更好的方法是使用[Exuberant CTags](http://ctags.sourceforge.net/)在您的目录系统中生成一个标签文件。

`tags`对于初学者，在源代码的根目录中构建文件：

> ctags -R。

这可能会比您喜欢的更多，但您可以使用更多命令行选项对其进行调整。

设置您的`tags`选项以引用此文件（“标签”是默认名称），或用于`set tags=./tags;/`搜索您的目录树到找到的第一个标签文件。请参阅`:help file-searching`以了解`;/`向上搜索的语法。

最后，确保 't' 在您的完整选项中。默认情况下它在那里，但请检查`set complete?`. 如果它不在那里，`set complete+=t`将它放在那里。

我个人从我的选项中删除了“i”和“d” `'complete'`，因为磁盘访问很烦人，即使输入 CTRL_Y（是，接受完成）或 CTRL_N（否，拒绝完成）或继续正常输入会停止搜索。如果所有包含的文件都在您的标签文件中，您将立即找到完成。

# javascript - 让 Javascript 与 Grails 进行 KML 对话

> ID：12094711
> 
> 赞同：1
> 
> 时间：2012-08-23T15:05:22.503
> 
> 标签：javascript, grails, openlayers

我有一个控制器对 Web 服务进行休息调用。它以 KML 文件响应，然后我需要获取响应并将其发送到打开的图层。我知道如何从控制器调用 Web 服务，但是如何在 .js 文件中使用它？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-24T06:52:17.137

稍微调整一下[openlayers/KML 示例](http://openlayers.org/dev/examples/kml-layer.html)，其中“grails URL”是您的控制器/动作的 URL，它在响应中返回一些 KML：

```
var map = new OpenLayers.Map({
    div: "map",
    layers: [
        new OpenLayers.Layer.WMS(
            "WMS", "http://vmap0.tiles.osgeo.org/wms/vmap0",
            {layers: "basic"}
        ),
        new OpenLayers.Layer.Vector("KML", {
            strategies: [new OpenLayers.Strategy.Fixed()],
            protocol: new OpenLayers.Protocol.HTTP({
                url: **<grails URL>**
                format: new OpenLayers.Format.KML({
                    extractStyles: true, 
                    extractAttributes: true,
                    maxDepth: 2
                })
            })
        })
    ],
    center: new OpenLayers.LonLat(-112.169, 36.099),
    zoom: 11
}); 
```

显然，您需要根据自己的需要调整其他配置（中心、缩放等）。

# ios - 如何检测 iOS 版本？

> ID：12094713
> 
> 赞同：1
> 
> 时间：2012-08-23T15:05:25.757
> 
> 标签：ios

> **可能重复：**
> [我们如何以编程方式检测设备在哪个 iOS 版本上运行？](https://stackoverflow.com/questions/7848766/how-can-we-programmatically-detect-which-ios-version-is-device-running-on)

我们有一个有注册表单的网站。在这种形式中，我们有一个文件上传按钮。如您所知，当有人通过 iOS 设备访问我们的网站时，他们无法上传文件，因为 iOS 不支持通过 safari 上传文件。现在我们发现 iOS6 允许用户通过 safari 上传照片。现在的问题是我们不知道有多少人会更新到iOS6。那么我们如何检测访问者正在运行哪个版本的 iOS，然后向他们显示警告或弹出消息呢？

我们想检测该站点是否被iOS5.1或更低版本访问并显示一条弹出消息“您的软件版本不支持文件上传。请更新到iOS 6或下载我们的应用程序以上传您的图像”

有什么帮助吗？谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-23T15:09:07.477

[http://zsprawl.com/iOS/2012/05/check-the-ios-version-with-javascript/](http://zsprawl.com/iOS/2012/05/check-the-ios-version-with-javascript/)

那里有一个教程，这是我能找到的最新教程（2012 年 5 月），因为我知道许多方法不适用于较新的 IOS，但值得一试！:)

# android - Android OptionsMenu 隐藏第一项

> ID：12094715
> 
> 赞同：1
> 
> 时间：2012-08-23T15:05:30.200
> 
> 标签：android, menu, menuitem, options-menu, android-optionsmenu

伙计们。

这就是问题所在。假设我的菜单上有三个项目。我希望第一个不可见（如透明）但同时占用空间。第二个和第三个正常显示。

谢谢

编辑：

我的菜单上有三个项目。我有垂直排列的菜单，所以像这样：

```
Menu:    
Item1
Item2
Item3 
```

现在，我希望第一个项目是不可见的（仍然在那里消耗空间，但肉眼不可见）。所以它现在看起来像这样：

```
Menu:

Item2
Item3 
```

你看，它仍然存在，但它的任何部分都不可见。（背景颜色设置为透明，无文字等）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-23T15:14:31.967

我认为菜单项只有两个选项 - setVisible(false) 将其删除（不占用空间），或 setEnabled(false)，使选项变灰但仍然可见。

如果你真的想让它占用空间，也许你可以在你想要隐藏但仍然占用空间的菜单项上尝试 setTitle("") 和 setEnabled(false) 的组合。

例如，

```
menu.getItem(0).setTitle("");
menu.getItem(0).setEnabled(false); 
```

这样，该项目将在那里，但它将被禁用，因此单击它不会触发其操作。

# c# - 在新选项卡中打开 pdf 流时打开打印对话框

> ID：12094727
> 
> 赞同：2
> 
> 时间：2012-08-23T15:06:18.290
> 
> 标签：c#, asp.net-mvc, asp.net-mvc-3, pdf

使用 MVC3，并有一个表单发布数据，其中包含要从报表服务器生成为 pdf 的报表到控制器。我的控制器返回`File(pdfstream, "application/pdf")`，pdf 在新选项卡中打开。当带有 pdf 的选项卡打开时，有什么方法可以让浏览器显示打印对话框？

# sql - 编写 SQL 日志过程

> ID：12094728
> 
> 赞同：0
> 
> 时间：2012-08-23T15:06:19.147
> 
> 标签：sql, sql-server, sql-server-2005

我需要编写一个简单的 SQL 日志过程，可以这样调用：

```
Log("This is my param1 = {0}, param2 = {1} and param3('{2}')", 
     @param1, @param2, @param3) 
```

输出应重定向到 SQL Server "C:\output.txt" 上的文件

是否可以使用这种具有***可变***数量参数的过程以及如何使用？

也许我可以使用

```
exec master..xp_cmdshell 'echo created > c:\output.txt'
exec master..xp_cmdshell 'echo appended data >> c:\output.txt'
exec master..xp_cmdshell 'echo more data >> c:\output.txt' 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-23T15:24:14.880

只要参数个数有限，就可以在 SQL server 中使用可为空的参数来实现可选参数

所以

```
create proc prcLog
    @Format varchar(1000),
    @p1 varchar(100) = null,
    @p2 varchar(100) = null,
    @p3 varchar(100) = null,
    ....

exec prcLog '{0}', 'a'
exec prcLog '{0} : {1}', 'a', 'b' 
```

考虑到文件 IO 和字符串操作的数量，CLR 存储过程可能是更好的选择

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-23T15:14:16.800

首先，SQL Server 的 T-SQL 不允许*像 Java 支持*的那样为存储过程提供可变数量的参数。但由于 SQL Server 2005 具有 XML 数据类型，您可以使用您的参数构建一个简单的 XML，并将其作为第二个参数发送，首先是带有占位符的日志语句。在您的存储过程中，您可以从 XML 中读取这些值。

其次，xp_cmdshell 要求您具有“sa”权限，afaik。相反，您可以将这些日志语句写入临时表并获取由管理员创建的存储过程，该过程采用表名和文件路径并将表的内容转储到指定的文件路径。

*根据以下评论之一编辑了关于可变数量参数的评论*

# tsql - SSRS 2005 将参数传递给 SQL Server 2000 存储过程

> ID：12094729
> 
> 赞同：0
> 
> 时间：2012-08-23T15:06:27.790
> 
> 标签：tsql, reporting-services, sql-server-2000

下面是我从网上找到的示例构建的代码，我找不到链接，但在此堆栈溢出问题的答案中引用了该代码：[为 Reporting Services 中的单个参数传递多个值](https://stackoverflow.com/questions/512105/passing-multiple-values-for-a-single-parameter-in-reporting-services)。

这是我现在在存储过程中使用的 SQL 代码，这是一个很长的过程，所以我将其总结为我正在处理的部分，并添加了`DECLARE`and `SET`for `@EMPLOYEES`，它们作为参数从 SSRS 传递到使代码片段运行。

```
DECLARE @EMPLOYEES varchar(8000)

-- EMPLOYEES is a comma separated list of EMPLOYEE IDS 
-- FROM SSRS Report Parameters. Each ID is 12 characters
-- And there are 806 Employees to choose from, which 
-- when all are selected, the Comma separated string grows 
-- to 11,193 characters, much longer than 8000
SET @EMPLOYEES = 'EMP000000001,EMP000000002,EMP000000003'

CREATE TABLE #EMPLOYEEIDS
(
   EMPLOYEEID varchar(100) NOT NULL
)

DECLARE @CharIndex AS int
DECLARE @Piece AS varchar(100)

-- FILL THE #EMPLOYEEIDS TABLE WITH THE COMMA SEPARATED EMPLOYEE IDS
SELECT @CharIndex = 1
WHILE @CharIndex > 0 AND LEN(@EMPLOYEES) > 0
BEGIN
   SELECT @CharIndex = CHARINDEX(',', @EMPLOYEES)
   IF @CharIndex > 0
      SELECT @Piece = LEFT(@EMPLOYEES, @CharIndex - 1)
   ELSE
      SELECT @Piece = @EMPLOYEES

   INSERT INTO #EMPLOYEEIDS (EMPLOYEEID) VALUES (@Piece)
   SELECT @EMPLOYEES = RIGHT(@EMPLOYEES, LEN(@EMPLOYEES) - @CharIndex)
END

SELECT * FROM #EMPLOYEEIDS

DROP TABLE #EMPLOYEEIDS 
```

我有 6 组多值，它们都工作得很好，直到我发现报告缺少员工的大部分数据，我发现`VARCHAR(8000)`在选择报告参数上的所有员工时溢出（有超过 800 个）。报告会运行，SQL 会愉快地将这些字符截断`VARCHAR`为 8000 个字符，并且四分之一的 IDS 没有被解析。

所以我尝试将其切换`VARCHAR`为文本字段，当该字段设置为 TEXT 时，任何解析功能都不起作用。我收到如下错误：

> 消息 8116，级别 16，状态 2，过程 usp_QualityMonitoring_AllProfiles_SelectWithParameters，第 89 行
> 参数数据类型文本对于左函数的参数 1 无效。

这是可以理解的，我知道许多可以使用的功能`VARCHAR`将无法使用`TEXT`. 因此，当我使用 a 时，SQL 会截断 8000 个字符后的所有内容`VARCHAR`，如果我将其切换为`TEXT`.

*   我必须将多值参数从 SSRS 传递到可以支持这么多选项的 SQL Server 存储过程，还有哪些其他选项？
*   或者有没有办法修复存储过程中的代码来解析`TEXT`而不是`VARCHAR`？

注意：我原本以为运行 Stored Proc 的 SQL Server 是 2005，但我确定它不是：

```
SELECT @@VERSION
-- Microsoft SQL Server  2000 - 8.00.2039 (Intel X86)   May  3 2005 23:18:38   Copyright (c) 1988-2003 Microsoft Corporation  Standard Edition on Windows NT 5.2 (Build 3790: Service Pack 2) 
```

# google-maps-api-3 - google.maps.LatLngBounds () 问题

> ID：12094734
> 
> 赞同：-1
> 
> 时间：2012-08-23T15:06:42.357
> 
> 标签：google-maps-api-3

我正在尝试查找矩形中是否存在纬度和经度。我使用了以下代码，但它有一些问题我不知道。

```
 function test(boxes) {
for (var i = 0; i < boxes.length; i++) {

        var bounds = new google.maps.LatLngBounds (box[i]); 
        if (bounds.contains(new google.maps.LatLng(22.7287, 75.8654))) {
            alert("i am here");
        // marker is within bounds
        }
        else {
            alert("out of box");
        }
        }
} 
```

如果我将构造函数值传递为 0.0,0.0，它会起作用，而如果我使用 box[i]，它不会执行，而 box[i] 具有边界，例如 (17.788,72.828),(21.2620,73.4602)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-24T06:52:15.130

根据您的评论（您确实应该更新问题），这应该有效：

```
function test(boxes) {
  for (var i = 0; i < boxes.length; i++) {
    if (boxes[i].contains(new google.maps.LatLng(22.7287, 75.8654))) {
        alert("i am here");
    // marker is within bounds
    }
    else {
        alert("out of box");
    }
  }
} 
```

# solr - solr 分页和分组

> ID：12094736
> 
> 赞同：0
> 
> 时间：2012-08-23T15:06:47.277
> 
> 标签：solr, lucene

我正在使用 LucidWorks 和 Solr 在一个大型且多样化的 Web 应用程序中实现搜索，该应用程序具有许多不同类型的页面。该规范要求按页面类型分组的单个搜索结果页面，并在每个组中对搜索结果进行分页。

我可以很容易地用这样的东西分组

```
q=[searchterm]&group=true&group.field=[pagetypefield] 
```

它返回很好的分组结果。

我也可以这样做：

```
q=[searchterm]&group=true&group.field=[pagetypefield]&group.offset=[x]&group.limit=[y] 
```

这将从结果 x 开始每组得到 y 个结果

但是，我希望能够为每组提供偏移量和限制，因为我可能希望获得第 1 组的结果 0-4 和第 2 组的结果 5-9。

的值`[pagetypefield]`是已知值的列表，因此我可以执行多个查询，例如：

```
q=[searchterm]&group=true&group.query=[pagetypefield]:[value]&group.offset=[x]&group.limit=[y] 
```

对于每个已知值`[pagetypefield]`

或者不使用 group.offset ，在我的示例中为两个组获取结果 0-9 并丢弃我不需要的结果。

我真的不喜欢这两个选项，但我无法在文档中找到一种方法来指定每个组的偏移量和限制。

任何建议将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-24T08:55:55.040

我从 LucinWorks 得到确认，我想做的事情是不可能的，他们推荐了多重搜索解决方案，因为第一次搜索将被 chached，因此后续搜索会非常快。

我想我最终要做的是将搜索结果分组，为每个组获取前 n 个结果，然后使用 ajax 对每个组进行分页。

# php - 从某个父 ID 开始创建菜单树

> ID：12094743
> 
> 赞同：1
> 
> 时间：2012-08-23T15:07:22.900
> 
> 标签：php, menu, tree

我有一个数据库表布局，类似于此处的示例 [http://blog.ideashower.com/post/15147134343/create-a-parent-child-array-structure-in-one-pass](http://blog.ideashower.com/post/15147134343/create-a-parent-child-array-structure-in-one-pass)

我还应用了该站点的代码来创建完整的菜单项树

但是，当我想开始从选定的父级打印树时，我完全不知道如何修改脚本。因此，使用该链接中的表格示例，我希望能够显示北美菜单项的子树（但不显示北美本身）。我知道我需要将一个参数（父 ID）传递给该函数并操作 $thisref 数组，但我坚持到底如何

```
$refs = array();
$list = array();

$sql = "SELECT item_id, parent_id, name FROM items ORDER BY name";
$result = mysql_query($sql);

while($data = @mysql_fetch_assoc($result)) {

 $thisref = &$refs[ $data['item_id'] ];
 $thisref['parent_id'] = $data['parent_id'];
 $thisref['name'] = $data['name'];

 if ($data['parent_id'] == 0) {
     $list[ $data['item_id'] ] = &$thisref;
 } else {
     $refs[ $data['parent_id'] ]['children'][ $data['item_id'] ] = &$thisref;
 }
} 
```

# asp.net-mvc-4 - VS 2010 上的 MVC4，使用 Nuget for Foundation Framework

> ID：12094744
> 
> 赞同：0
> 
> 时间：2012-08-23T15:07:23.150
> 
> 标签：asp.net-mvc-4

下载并安装 MVC4 。使用默认 MVC4 站点创建 Internet 应用程序。我已经使用可用的 NuGet 包安装了 Foundation Framework。它从基础 css 中提取我的课程，但在 IE 中没有视觉变化。使用 NuGet 后，文件已自动添加并在我的应用程序中添加了捆绑包。

任何人有同样的问题，或者我错过了什么。MVC4 看起来与 MVC3 不同......

# asp.net - 使用 Webmatrix 中设计的 SQL Server ASP.NET 更改 grid.column 中的日期格式

> ID：12094757
> 
> 赞同：1
> 
> 时间：2012-08-23T15:07:56.643
> 
> 标签：asp.net, sql-server, webmatrix, date-format

我真的一直在尝试使用 Webmatrix 在表格中获取短日期格式。尽管我的列`StartDate`在 SQL Server 数据库中定义为日期（不是日期/时间），但 Windows Azure 以某种方式将其转换为日期/时间字段。除了我现在想删除所有午夜时间以简单地显示`dd/mm/yy`日期格式之外，不会打扰我。

我显然没有尝试过所有的组合，或者在编码中遗漏了一些东西，但是`grid.Column`一旦我添加了格式选项，该行就拒绝编译。

```
 @grid.GetHtml( 
        tableStyle: "grid",
        headerStyle: "head",
        alternatingRowStyle: "alt",
        columns: grid.Columns(
        grid.Column("StartDate", header:"StartDate")
        )
    ) 
```

基于在这个论坛上提出的类似问题，我已经尝试了所有这些：

```
 grid.Column("StartDate", header:"StartDate", format:@<text>@item.StartDate.ToString("dd/mm/yy")</text>))
    grid.Column("StartDate", header:"StartDate", format:@@<text>@item.StartDate.ToString("dd/mm/yy")</text>))
    grid.Column("StartDate", header:"StartDate", format: "{0:d}")
    grid.Column("StartDate", header:"StartDate", format: "{0:dd/mm/yy}") 
```

如果有人能指出我哪里出错了，我将不胜感激。我只是一个新手，所以我希望这是愚蠢的。

谢谢，

戴夫。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-07T13:19:48.390

此 WebGrid 列格式适用于我：

```
grid.Column("StartDate", header:"StartDate", format: @<text>@item.StartDate.ToString("dd/MM/yy")</text>)) 
```

在您的第一次尝试中，只需将 mm 替换为 MM（如 AVD 所建议的）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-23T15:14:09.373

`mm`是几分钟。更改为`MM`。

```
grid.Column("StartDate", header:"StartDate", format: "{0:dd/MM/yy}") 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-10-01T14:32:24.223

有同样的问题。这对我有用：

```
grid.Column("StartDate", "StartDate", format: (item) => string.Format("{0:dd/MM/yy}", item.StartDate)) 
```

# javascript - 如何使用 jQuery 绕过具有指定类和两个条件的元素的函数

> ID：12094760
> 
> 赞同：0
> 
> 时间：2012-08-23T15:08:00.850
> 
> 标签：javascript, jquery

在标题中很难说...所以我有这个代码：

```
var class_main_content = $('.main_content ul').attr('class');
var xml_element_name = $(xml).find(class_main_content)[0].nodeName.toLowerCase();
var no_option = $('.no_option').attr('class');
if ((class_main_content) == xml_element_name){
   ...
}
else if ($(class_main_content) == (no_option)){
   ...
} 
```

我有一些动作的第一个条件 - 一切都很好，接下来我有第二个条件，第一个条件也被执行，但我需要为带有类的元素做一些事情`.no_option`。当此元素具有来自第一个条件和第二个条件的两个类时，问题就会增长。如何通过第一个条件并为第二个条件做某事？:)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-23T15:20:12.660

与其获取`class`属性并将其与事物进行比较，不如使用[`hasClass`](http://api.jquery.com/hasClass/)JQuery 函数：

```
var main_content=$('.main_content ul');
if(main_content.hasClass('something')) {
    do_something();
}
if(main_content.hasClass('no_option')) {
    do_something_else();
} 
```

你当然可以做反向测试：

```
if(!main_content.hasClass('no_option')) ... 
```

# python - Python - 字典理解中的元组解包

> ID：12094764
> 
> 赞同：13
> 
> 时间：2012-08-23T15:08:14.070
> 
> 标签：python, dictionary, iterable-unpacking, dictionary-comprehension

我正在尝试编写一个将表单字符串`'A=5, b=7'`转换为 dict的函数`{'A': 5, 'b': 7}`。以下代码片段是在主`for`循环内发生的 - 它们将字符串的单个部分转换为单个 dict 元素。

这可以：

```
s = 'A=5'
name, value = s.split('=')
d = {name: int(value)} 
```

这不是：

```
s = 'A=5'
d = {name: int(value) for name, value in s.split('=')}
ValueError: need more than 1 value to unpack 
```

为什么我不能在字典理解中解包元组？如果我得到这个工作，那么我可以轻松地将整个函数变成一个紧凑的 dict 理解。

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-08-23T15:10:26.290

在您的代码中，`s.split('=')`将返回列表：`['A', '5']`。遍历该列表时，每次都会返回一个字符串（第一次是`'A'`，第二次是`'5'`），因此您不能将该单个字符串解压缩为 2 个变量。

你可以试试： `for name,value in [s.split('=')]`

更有可能的是，您有一个要拆分的可迭代字符串——然后您的 dict 理解变得简单（2 行）：

```
 splitstrs = (s.split('=') for s in list_of_strings) 
 d = {name: int(value) for name,value in splitstrs } 
```

当然，如果你对 1-liners 很着迷，你可以把它结合起来，但我不会。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-08-23T15:18:19.200

当然你可以这样做：

```
>>> s = 'A=5, b=7'
>>> {k: int(v) for k, v in (item.split('=') for item in s.split(','))}
{'A': 5, ' b': 7} 
```

但在这种情况下，我只会使用这个更具命令性的代码：

```
>>> d = {}
>>> for item in s.split(','):
        k, v = item.split('=')
        d[k] = int(v)

>>> d
{'A': 5, ' b': 7} 
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-08-23T15:18:59.683

有些人倾向于相信你会因为使用而下地狱`eval`，但是......

```
s = 'A=5, b=7'
eval('dict(%s)' % s) 
```

或者更好的是，为了安全起见（感谢 mgilson 指出）：

```
s = 'A=5, b=7'
eval('dict(%s)' % s, {'__builtins__': None, 'dict': dict}) 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-08-23T15:13:39.520

这段代码怎么样：

```
a="A=5, b=9"
b=dict((x, int(y)) for x, y in re.findall("([a-zA-Z]+)=(\d+)", a))
print b 
```

输出：

```
{'A': 5, 'b': 9} 
```

此版本也适用于其他形式的输入，例如

```
a="A=5 b=9 blabla: yyy=100" 
```

会给你

```
{'A': 5, 'b': 9, 'yyy': 100} 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-08-23T15:14:32.077

请参阅 mgilson 对错误发生原因的回答。为了实现你想要的，你可以使用：

```
d = {name: int(value) for name,value in (x.split('=',1) for x in s.split(','))} 
```

要考虑空格，请`.strip()`根据需要使用（例如：）`x.strip().split('=',1)`。

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2012-08-23T15:18:16.827

```
>>> strs='A=5, b=7'

>>> {x.split('=')[0].strip():int(x.split('=')[1]) for x in strs.split(",")}
{'A': 5, 'b': 7} 
```

为了可读性，您应该使用普通的 for-in 循环而不是理解。

```
strs='A=5, b=7'
dic={}
for x in strs.split(','):
  name,val=x.split('=')
  dic[name.strip()]=int(val) 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-08-23T15:21:21.693

这个怎么样？

```
>>> s
'a=5, b=3, c=4'
>>> {z.split('=')[0].strip(): int(z.split('=')[1]) for z in s.split(',')}
{'a': 5, 'c': 4, 'b': 3} 
```

# javascript - 在 Html 文档中显示“ ”

> ID：12094768
> 
> 赞同：-2
> 
> 时间：2012-08-23T15:08:19.047
> 
> 标签：javascript, html

我需要向我的用户展示他们如何将我的小部件嵌入到他们的网站上。为此，我需要在 Html 页面上显示类似上面的内容，但是当我尝试这样做时，它只是将我的小部件加载到我放置上述内容的那个页面中代码。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-23T15:09:51.777

```
&lt;script src="some.js"&gt;&lt;/script&gt; 
```

通常，要在 HTML 中使用特殊字符，您可以将它们替换[为命名字符引用](https://developer.mozilla.org/en-US/docs/HTML/Introduction#Named_character_references)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-23T15:12:56.833

您必须使用[html 实体](http://www.w3schools.com/html/html_entities.asp)

你必须写`&lt;script& src='some.js'&gt;&lt;/script&gt;`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-23T15:13:15.697

您需要对特殊字符使用实体以防止它们被解析。像这样的东西

```
&lt;script src='some.js'&gt;&lt;/script&gt; 
```

作为旁注，我建议您看一下`<code>`标签，这是在网页上显示代码的有用东西。它不会阻止您必须转换为实体，但它有助于您的格式（默认使用等宽字体，但可以根据您的意愿设置样式）并且非常适合 SEO。

# android - Android：水平滚动视图中的拖放问题

> ID：12094780
> 
> 赞同：1
> 
> 时间：2012-08-23T15:08:53.033
> 
> 标签：android, animation, drag-and-drop

我有一个名为 A 的**容器视图**。我想通过拖放 + 动画交换 2 个视图：X、Y

X在scrollview之外，Y在L里面，L在scrollview里面：

X

年年年年

我的目标是：将 Y 拖到 X 位置并放下，Y 会飞到 X，X 会飞到 Y。简单！

我这样做：

> 1.  A.removeView(X)
> 2.  为 X 设置新位置
> 3.  L.addView(X)
> 4.  //做动画...
> 5.  对 Y 做同样的事情

在一个漂亮的动画之后，我看到一切都很好，X，Y 交换它的位置。但是当我滚动视图 L 时，**我没有看到 X 附加到 L**（就像 X 和 L 是不同的层......）

任何知道这一点的人请帮助我。谢谢！

# authentication - 用户关闭选项卡/浏览器时如何在 grails 中注销？

> ID：12094781
> 
> 赞同：1
> 
> 时间：2012-08-23T15:08:54.687
> 
> 标签：authentication, grails

我正在使用 grails 1.3.5，当用户关闭浏览器或打开我的应用程序的所有选项卡时，我需要自动从我的应用程序中注销用户。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-23T15:45:41.037

虽然没有特别可靠的方法可以做到这一点（在*任何*Web 框架中，而不仅仅是 Grails），但有一些相当老套的方法可以*接近*这一点，尽管有一些*巨大的*权衡。

通常，由于您有一个默认会话超时，因此当他们的会话由于未收到与其会话关联的请求而到期时，用户将被注销（通常）。此行为可以根据您的安全环境进行更改，但我们假设您使用的是（合理的）默认值。

~~当您的应用程序在其中打开时没有窗口/选项卡时，此会话到期注销~~可用于模拟注销它们。为此，您可以使用一小段 JavaScript，以您指定的任何时间间隔不断“ping”您的服务器，以保持会话“活动”并保持它们处于登录状态。设置这些 ping 的紧密程度是负载之间的权衡您的服务器以及他们可以关闭浏览器并重新打开它并仍然保持登录状态的时间窗口。

就像我说的，这*很*hacky，但它很实用。

# perl - perlbrew 可以与 cygwin 一起使用吗？

> ID：12094783
> 
> 赞同：7
> 
> 时间：2012-08-23T15:09:02.350
> 
> 标签：perl, cygwin, perlbrew

在网上搜索，我几乎没有发现 perlbrew 在 cygwin 上工作的证据。我当前问题的具体情况是：

使用最新安装的 cygwin（包括 perl 5.14.2），我正在尝试使用从 Web（不是 CPAN）安装的最新 perlbrew 安装 perl-5.14.2。在../dist/threads-shared/t/shared_attr.t...ok 打印到 build.log 之后，我遇到了问题。这是在 WinXP Pro 2002 SP3 上。以前在其他版本的 cygwin（包括 perl 5.10.1）上使用 perlbrew 的尝试也失败了，但在其他地方。

我在 blogs.perl.org 上对 Reini Urban 的博客发表了评论，并在 github 上为 App-perlbrew 发布了一个问题/错误，但还没有回复。

有没有希望我可以让 perl 在 cygwin 上构建？如果没有，我该怎么做才能解决它并仍然使用 perlbrew（统一我的环境，以便我的 cygwin 环境使用 perlbrew，就像我的 linux 环境一样）？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-23T15:26:42.650

`perlbrew`可以工作并且`perl`可以在 Cygwin 上构建，但有一些单元测试挂起的小烦恼（正如您所发现的那样）。`ps`密切关注构建过程的输出，并使用and杀死几分钟内不做任何事情的测试（通常与线程相关）`kill`。即使少数测试没有通过，也`perlbrew`应该（敲木头）运行。`make install`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-29T17:49:10.177

我从来没有在cygwin下运行过perlbrew。但作为一种解决方法，也许可以尝试[pleenv](https://github.com/tokuhirom/plenv)。当我上次尝试它时，它在 cygwin 下开箱即用。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-11-23T00:55:36.430

2018 年更新 - perlbrew 在 Cygwin 上对我来说很好用。然而，perlbrew 安装的 perls 将没有系统 Perl 所具有的补丁。[我在https://github.com/cxw42/perlbrew-on-cygwin](https://github.com/cxw42/perlbrew-on-cygwin)有一个示例 repo，展示了我如何构建最新的 Cygwin 系统 perl 并将其安装为 perlbrew perl。

简而言之，使用前缀、站点前缀和供应商前缀设置为来构建 Perl`~/perl5/perlbrew/perls/perl-<version>`将生成 Perl 树。您可以将该 Perl 树放入`~/perl5/perlbrew/perls/`中，perlbrew 会将其作为可用的 Perl 拾取。

# objective-c - 检索特定数据

> ID：12094788
> 
> 赞同：0
> 
> 时间：2012-08-23T15:09:18.137
> 
> 标签：objective-c

我是 xcode 的新手.. 我很想了解如何从 XML 中检索数据.. 这是我坚持了好几天的草稿代码.. 我设法显示了一个 XML 代码列表

XML 代码：

```
<find>
<set_number>038881</set_number>
<no_records>000138874</no_records>
<no_entries>000007000</no_entries>
</find> 
```

但是，现在我在从这个 xml 中仅检索 set_number 时遇到了一些困难......由于机密目的，我将其留空的 URL.. 所以不要介意......最后两个代码导致我的应用程序强制关闭。 。 帮助！！

```
 NSString *URL = [NSString stringWithFormat:@""];

 NSMutableData *receivedData = [[[NSMutableData alloc] initWithContentsOfURL:[NSURL URLWithString:URL] ]autorelease];            
 NSString *theRecord = [[[NSString alloc] initWithData:receivedData encoding:NSUTF8StringEncoding] autorelease];

  NSString *path = [theRecord valueForKey: @"set_number"];
     NSLog(@"File Data: %@", path); 
```

我尝试在底部添加此代码..

```
 if ([theRecord isEqualToString:@"no_records"]){ 

        NSLog(@"Contents of URL: %@", theRecord); 
} 
```

然后我也尝试调试我的代码..没有显示错误..相反它们显示0作为输出..我想知道是不是因为我的 no_records 是一个整数？但是我已将记录分配为字符串..这就是他们无法显示的原因吗？

* * *

我尝试在底部添加此代码..

```
 `if ([theRecord isEqualToString:@"no_records"]){ 

        NSLog(@"Contents of URL: %@", theRecord); 
}` 
```

然后我也尝试调试我的代码..没有显示错误..相反它们显示0作为输出..我想知道是不是因为我的 no_records 是一个整数？但是我已将记录分配为字符串..这就是他们无法显示的原因吗？请帮忙！！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-23T15:16:58.887

要解析您的 XML，请使用 NSXMLParser 类。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-27T09:43:42.437

NSString *path = [theRecord valueForKey:@"set_number"];

theRecord 是一个不能使用 valueForKey 的 NSString 实例。您应该首先解析您的 xml 字符串并从标签中获取您想要的内容。或者你应该在你的字符串中获取子字符串。

# html - 使用 XSLT 将图像插入 html 页面而不使用外部资源

> ID：12094792
> 
> 赞同：0
> 
> 时间：2012-08-23T15:09:27.937
> 
> 标签：html, xslt

我刚刚收到了一个非常疯狂的任务，即编写一个 xsl 文件，该文件应该提供一个 html 页面作为输出。

诀窍是唯一允许使用的外部资源是 css 文件。该页面包含许多无法使用 css 生成的元素的图像。我知道有一种方法可以将图像嵌入到 XSL 文件中，例如 Base64 代码。

有没有办法将这些图像插入到生成的 html 中？%)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-23T16:14:51.870

为什么不能使用[CSS 嵌入图像示例](http://www.websiteoptimization.com/speed/tweak/inline-images/)？还有许多其他可用示例：[https ://www.google.ch/search?q=css+embedded+image](https://www.google.ch/search?q=css+embedded+image)

# php - 循环和数组从数据库接收数据

> ID：12094794
> 
> 赞同：0
> 
> 时间：2012-08-23T15:09:34.317
> 
> 标签：php

我从我的数据库中恢复了一些信息，然后我使用以下方法转换为数组：

```
<?php $clients = explode(",",$data['comptes']) ; ?>

<?php $clients = explode(",",$data['comptes']) ;
    for ( $i = 0; $i < count( $clients ); $i++ ) { 
 echo '<option value="'.trim($clients[$i]).',">'.trim($clients[$i]).'</option>'; 
} ?> 
```

然后我会在选择列表中显示所有内容。

在整个表格不为空之前，它会显示`print_r()`：

```
Array (
    [0] => 1566 
    [1] => 1599 
    [2] =>
) 
```

然后对于选择列表，我正在执行以下代码：

但它没有返回我最后的选择列表是空的，我看不到我在哪里犯了错误，因为我没有错误消息。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-23T15:18:45.763

我真的在猜测，但你可能在`$data['comptes']`. 尝试

```
$clients = explode(",", trim($data['comptes'], ',')); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-23T15:21:38.010

```
<?php 
    $clients = explode(",",$data['comptes']) ;

    echo '<select id="selectboxname" name="selectboxname">';

    for ( $i = 0; $i < count( $clients ) - 1; $i++ ) 
    { 
        echo '<option value="'.trim($clients[$i]).',">'.trim($clients[$i]).'</option>'; 
    } 

    echo '</select>';
?> 
```

确保你有

```
<select> </select> 
```

四舍五入你的选择。

# jira - 将文件附加到 jira 问题时自动创建注释

> ID：12094798
> 
> 赞同：0
> 
> 时间：2012-08-23T15:09:51.670
> 
> 标签：jira, jira-plugin

每当附件附加到 Jira 中的问题时，我想自动创建评论。

评论应显示该附件的超链接

任何人都可以请帮助如何在 Jira 中完成此操作。

在此先感谢，纳伦。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-23T19:53:47.750

JIRA 为您提供了在将文件附加到问题时添加评论的选项。听起来您希望评论是必需的而不是可选的？并在评论中有指向附件的链接。我的第一个想法是，这听起来像是一个新的问题操作，它扩展了插件中的 AttachFile 操作。

# ruby-on-rails - JSON Gem 无法在 Windows 上构建

> ID：12094801
> 
> 赞同：0
> 
> 时间：2012-08-23T15:10:03.620
> 
> 标签：ruby-on-rails, windows, gem, cygwin

好的，在 Windows XP 上使用 DevKit 安装了一个非常基本的 Ruby 1.9.3。

当我尝试做 a`rails new myapp`时，它会安装 json 并死掉。

```
Installing json (1.7.5) with native extensions C:\devkit\bin\make.exe: *** Couldn't reserve space for cygwin's heap, Win32 error 6

Gem::Installer::ExtensionBuildError: ERROR: Failed to build gem native extension.

        C:/Ruby193/bin/ruby.exe extconf.rb
creating Makefile

make
      0 [main] us 0 init_cheap: VirtualAlloc pointer is null, Win32 error 487
AllocationBase 0x0, BaseAddress 0x60E90000, RegionSize 0x170000, State 0x10000
C:\devkit\bin\make.exe: *** Couldn't reserve space for cygwin's heap, Win32 error 6

Gem files will remain installed in C:/Ruby193/lib/ruby/gems/1.9.1/gems/json-1.7.5 for inspection.
Results logged to C:/Ruby193/lib/ruby/gems/1.9.1/gems/json-1.7.5/ext/json/ext/generator/gem_make.out
An error occured while installing json (1.7.5), and Bundler cannot continue.
Make sure that `gem install json -v '1.7.5'` succeeds before bundling. 
```

我尝试手动安装和几个旧版本，但没有骰子。还将我的 devkit 更新到 RubyInstaller.org 的最新版本，以防万一出现问题，但也没有运气

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-23T15:27:32.410

我找到了这个页面： http: [//support.code-red-tech.com/CodeRedWiki/VirtualAllocPointerNull](http://support.code-red-tech.com/CodeRedWiki/VirtualAllocPointerNull)，它说某些安装中的 msys.dll 版本不起作用，但是用附件替换我就解决了。

# c++ - StrRetToBuf 函数的链接器错误

> ID：12094802
> 
> 赞同：0
> 
> 时间：2012-08-23T15:10:06.487
> 
> 标签：c++, windows, visual-c++, mfc, windows-shell

所以我有这个错误： Error 1 error LNK2019: unresolved external symbol _ *imp* _StrRetToBufW@16 referenced in function _wmain

我包括：

```
 #include "stdafx.h"
 #include <shlobj.h>
 #include <shlwapi.h>
 #include <iostream> 
```

我这样调用函数：

```
 StrRetToBuf(&strDispName, pidlItems, pszDisplayName, MAX_PATH); 
```

所以有一个链接器错误。有什么修复吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-23T15:12:23.307

您应该将您的项目与`Shlwapi.lib`. 它是`StrRetToBuf`驻留的 DLL 的导入库。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-23T15:12:37.150

[`StrRetToBuf()`](http://msdn.microsoft.com/en-us/library/windows/desktop/bb773426%28v=vs.85%29.aspx)必须链接的状态的参考页`Shlwapi.lib`。

# asp.net - 需要对 ASP.NET 应用程序的建议

> ID：12094803
> 
> 赞同：1
> 
> 时间：2012-08-23T15:10:09.453
> 
> 标签：asp.net, jquery-ui, jquery, asp.net-ajax, ajaxcontroltoolkit

我想在我的 aspx 页面上使用更多的客户端脚本。我不是这方面的专家，我对这些选择有点不知所措。首先，让我说明页面显示的内容以及我想要完成的内容。

**页面：** 页面包含一个 GridView（在左侧），它从数据库中为用户可以请求的不同类型的产品提取数据。例如，假设我们有桌子、椅子和沙发。

**我要完成的内容：** 当用户单击 GridView 的一行（比如说“表格”）时，该选定行的 ID 和标题将复制到页面右侧的手风琴窗格中（或类似的显示）。手风琴窗格的标题将是“产品：表”。当手风琴展开时，用户可以选择指定表格的颜色和大小（通过复选框、文本框等）。所以本质上这是这个页面右侧的购物车功能。

我还应该指出，我希望手风琴中的每个窗格都有一个“删除”按钮，以便可以动态删除它。

这种情况下的最佳选择是什么？我应该使用 jQuery、AJAX（AJAX 控制工具包？）、组合还是不同的工具？预先感谢您的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-23T21:29:13.413

我会使用[knockoutJs](http://knockoutjs.com/)，因为它易于使用，具有合理的文档和良好的在线支持。乍一看，它看起来也比骨干容易（我不知道骨干）。

除非我也有，否则我不会使用 AJAX 控制工具包。我讨厌 ajax 工具包，因为一切都是“通过魔法”发生的，一旦你走出简单演示中显示的路径，你就死定了。

Knockout 确实需要一点时间投入，但我认为它对于需要适度使用 JavaScript 的 Web 应用程序来说是一个很好的框架。

# macos - 对于 Netbeans 6.9.1 上的 rmagic 2.13.1，捆绑程序失败

> ID：12094809
> 
> 赞同：0
> 
> 时间：2012-08-23T15:10:29.030
> 
> 标签：macos, imagemagick, rmagick

我是 RoR 的初学者并尝试设置 Netbeans IDE。有人可以帮我解决 Netbeans 中 rmagick 的捆绑器错误吗？

我有以下ROR开发环境：

```
Qadeers-MacBook:gems Qadeer$ rvm info
ruby-1.9.3-p194:
  system:
    uname:       "Darwin Qadeers-MacBook.xxxxxx.com 11.4.0 Darwin Kernel Version 11.4.0"
    bash:        "/bin/bash => GNU bash, version 3.2.48(1)-release (x86_64-apple-darwin11)"
    zsh:         "/bin/zsh => zsh 4.3.11 (i386-apple-darwin11.0)"
  rvm:
    version:      "rvm 1.15.5 (stable) by Wayne E. Seguin <wayneeseguin@gmail.com>, Michal Papis <mpapis@gmail.com> [https://rvm.io/]"
    updated:      "21 hours 49 minutes 4 seconds ago"
  ruby:
    interpreter:  "ruby"
    version:      "1.9.3p194"
    date:         "2012-04-20"
    platform:     "x86_64-darwin11.4.0"
    patchlevel:   "2012-04-20 revision 35410"
    full_version: "ruby 1.9.3p194 (2012-04-20 revision 35410) [x86_64-darwin11.4.0]"
  homes:
    gem:          "/Users/Qadeer/.rvm/gems/ruby-1.9.3-p194"
    ruby:         "/Users/Qadeer/.rvm/rubies/ruby-1.9.3-p194"
  binaries:
    ruby:         "/Users/Qadeer/.rvm/rubies/ruby-1.9.3-p194/bin/ruby"
    irb:          "/Users/Qadeer/.rvm/rubies/ruby-1.9.3-p194/bin/irb"
    gem:          "/Users/Qadeer/.rvm/rubies/ruby-1.9.3-p194/bin/gem"
    rake:         "/Users/Qadeer/.rvm/gems/ruby-1.9.3-p194@global/bin/rake"
  environment:
    PATH:         "/Users/Qadeer/.rvm/gems/ruby-1.9.3-p194/bin:/Users/Qadeer/.rvm/gems/ruby-1.9.3-p194@global/bin:/Users/Qadeer/.rvm/rubies/ruby-1.9.3-p194/bin:/Users/Qadeer/.rvm/bin:/usr/bin:/bin:/usr/sbin:/sbin:/usr/local/bin:/usr/local/Cellar/ruby/1.9.3-p194/bin:/usr/X11/bin:/usr/local/git/bin"
    GEM_HOME:     "/Users/Qadeer/.rvm/gems/ruby-1.9.3-p194"
    GEM_PATH:     "/Users/Qadeer/.rvm/gems/ruby-1.9.3-p194:/Users/Qadeer/.rvm/gems/ruby-1.9.3-p194@global"
    MY_RUBY_HOME: "/Users/Qadeer/.rvm/rubies/ruby-1.9.3-p194"
    IRBRC:        "/Users/Qadeer/.rvm/rubies/ruby-1.9.3-p194/.irbrc"
    RUBYOPT:      ""
    gemset:       "" 
```

我正在使用 Netbeans IDE 6.9.1 并且有一个 gem 依赖项

```
gem "rmagick", ">= 1.15.17" 
```

当我使用捆绑器在我的 gemfile 中安装依赖项时，它失败并出现错误

```
Installing rmagick (2.13.1) with native extensions 
Gem::Installer::ExtensionBuildError: ERROR: Failed to build gem native extension.

        /Users/Qadeer/.rvm/rubies/ruby-1.9.3-p194/bin/ruby extconf.rb 
checking for Ruby version >= 1.8.5... yes
extconf.rb:128: Use RbConfig instead of obsolete and deprecated Config.
checking for /usr/bin/gcc-4.2... yes
checking for Magick-config... no
Can't install RMagick 2.13.1\. Can't find Magick-config in /usr/bin:/bin:/usr/sbin:/sbin

*** extconf.rb failed ***
Could not create Makefile due to some reason, probably lack of
necessary libraries and/or headers.  Check the mkmf.log file for more
details.  You may need configuration options.

Provided configuration options:
        --with-opt-dir
        --with-opt-include
        --without-opt-include=${opt-dir}/include
        --with-opt-lib
        --without-opt-lib=${opt-dir}/lib
        --with-make-prog
        --without-make-prog
        --srcdir=.
        --curdir
        --ruby=/Users/Qadeer/.rvm/rubies/ruby-1.9.3-p194/bin/ruby
Gem files will remain installed in /Users/Qadeer/.rvm/rubies/ruby-1.9.3-p194/lib/ruby/gems/1.9.1/gems/rmagick-2.13.1 for inspection.
Results logged to /Users/Qadeer/.rvm/rubies/ruby-1.9.3-p194/lib/ruby/gems/1.9.1/gems/rmagick-2.13.1/ext/RMagick/gem_make.out
An error occured while installing rmagick (2.13.1), and Bundler cannot continue.
Make sure that `gem install rmagick -v '2.13.1'` succeeds before bundling. 
```

所以，我直接使用命令成功安装了gem

```
Qadeers-MacBook:gems Qadeer$ gem install rmagick -v '2.13.1'
Building native extensions.  This could take a while...
Successfully installed rmagick-2.13.1
1 gem installed
Installing ri documentation for rmagick-2.13.1...
Installing RDoc documentation for rmagick-2.13.1... 
```

请注意，尽管上述操作成功，但我仍然看不到在 netbeans ruby​​ 平台屏幕中已安装的 gem 列表中列出的 gem。不知道为什么..

我已经知道 ImageMagick 已安装在我的机器上

```
Qadeers-MacBook:gems Qadeer$ ruby -rRMagick -e "puts Magick::Long_version"
This is RMagick 2.13.1 ($Date: 2009/12/20 02:33:33 $) Copyright (C) 2009 by Timothy P. Hunter
Built with ImageMagick 6.7.7-6 2012-08-23 Q16 http://www.imagemagick.org
Built for ruby 1.9.3
Web page: http://rmagick.rubyforge.org
Email: rmagick@rubyforge.org 
```

对 Magick-config 文件进行定位会导致以下路径，因为它是使用 brew 安装的。

```
Qadeers-MacBook:gems Qadeer$ locate Magick-config
/usr/local/Cellar/imagemagick/6.7.7-6/bin/Magick-config
/usr/local/Cellar/imagemagick/6.7.7-6/share/man/man1/Magick-config.1
/usr/local/bin/Magick-config
/usr/local/share/man/man1/Magick-config.1 
```

问题是，我如何告诉 netbeans 使用上述路径中的 Magick-config 而不是只查看 /usr/bin:/bin:/usr/sbin:/sbin ？

任何帮助深表感谢..！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-01T08:41:57.170

这就是答案.. !!! 在我发布它几分钟后，我发现[这个链接](http://yasrails.blog33.fc2.com/blog-entry-10.html)是中文的。虽然我不会说中文，但我只能按照屏幕更新配置文件并重新启动 netbeans。瞧，改变奏效了。解决方案只是 Netbeans 需要 /usr/local/bin 的扩展路径变量，其中存在 Magick-config 文件。完成此操作后，IDE 就可以安装 rmagick。谢谢，希望这对以后的人有用..

# jquery - asp.net 应用程序的弹出窗口

> ID：12094817
> 
> 赞同：-4
> 
> 时间：2012-08-23T15:10:53.747
> 
> 标签：jquery, asp.net, ajax, jquery-ui

我正在开发一个 asp.net 应用程序，我需要一个像这样的弹出窗口：

[http://www.popupdomination.com/demo/](http://www.popupdomination.com/demo/)

是一些jquery插件还是什么。这可以与asp.net页面一起使用吗？我需要在所有页面上显示它。页面有一个共同的母版页。

我知道 ajaxtoolkit 有一个模态控件，但我需要这样。请建议

问候， 阿西夫

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-23T17:24:56.580

ASP.NET 不支持任何弹出窗口，PHP 等任何其他语言也不支持。简而言之，ASP.NET 没有消息框或对话框。请注意，ASP 页面是在 Web 浏览器中呈现的。

产生弹出窗口的最接近的是 JavaScript。但是 JavaScript 弹出窗口非常简单，因此无法格式化。

这里的弹窗其实是一个模拟弹窗的Div。样式通过 JavaScript 应用以创建弹出对话框效果。

```
<div class="lightbox-top">
    <div class="lightbox-top-content">
    <p class="heading">Get my FREE 7 day fitness eCourse</p>

    <div class="bullet-listx">
       <ul class="bullet-list">                        
       <li>Achieve Ultimate fitness level</li>                        
       <li>Attract beautiful women</li>                        
       <li>Just two hours of "work" per day</li>                        
       <li>Get the body you want</li>                    
       </ul>
    <div class="clear"></div>
        </div>
</div>
    </div> 
```

# android - 如何修改短信管理器？

> ID：12094820
> 
> 赞同：-1
> 
> 时间：2012-08-23T15:10:59.240
> 
> 标签：android

我想修改 SmsManager 使其能够接受上下文。我可以这样做吗？如果是，我该怎么办？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-23T15:15:25.737

SmsManager 是电话库的一部分。我不建议直接扩展它，因为它们倾向于锁定系统的这些部分。我可以推荐的是创建自己的包装类，其中包含一个 SmsManager 和 Context 变量。然后你可以公开一个接口来实现你想要做的任何事情。

# c# - 使用更新的有界文本字段更改对象字段

> ID：12094826
> 
> 赞同：1
> 
> 时间：2012-08-23T15:11:26.893
> 
> 标签：c#, asp.net-mvc, data-binding

我怎么解决这个问题：

```
private void SetupBindings()
{    
        MyObj = new MyObjClass();
        MyObjSource.DataSource = typeof(MyObjClass);
        MyObjSource.Clear();
        MyObjSource.Add(new MyObjClass());
        txtMyField1.DataBindings.Add(new Binding("Text", MyObjSource, "MyField1", true));
}

private void blablabla()
{
        // I need here update MyField1 of current MyObjSource object 
        // txtMyField1 text value must be updated
} 
```

PS 如果 MyObjSource 中只存储一个对象，可以使用吗？

```
MyObjSource.DataSource = new MyObjClass() 
```

# matlab - matlab中使用的双轴

> ID：12094827
> 
> 赞同：0
> 
> 时间：2012-08-23T15:11:31.550
> 
> 标签：matlab, axes

我在 matlab 中使用 plotyy 在同一个图中绘制两个数据集。左右轴的范围不同。但我只是发现在右轴上，似乎显示了两组不同的比例。我认为其中一个确实来自左轴。

```
t=-1:0.02:1; 
y=sin(t); 
y1=2*sech(t); 
[AX, H] =plotyy(t, y, t, y1); 
ylim(AX(2), [0 3.25]); 
set(AX(2), 'YTickMode', 'auto') 
```

在网上搜索后，我发现关闭盒子也可以解决问题。但问题是关闭盒子会导致顶部水平线也消失。无论如何都要去除多余的刻度并保留框架吗？谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-23T16:02:30.177

这是可能的并且不是非常困难，这是一个基于您的测试代码的说明性示例图![基于您的示例的数字](../Images/32eebd4d6390ff52063b92e5e15642cf.png)

我所做的是添加**第三个轴**（在这种情况下，我通过走捷径来实现这一点 - 我两次调用 plotyy 导致第一个轴上有一条额外的蓝线，而第二个轴上有一条绿线）。

这个想法是关闭第一个和第二个轴的边界框，然后为第三个轴打开它。这导致顶部轴为您提供左侧垂直轴，第二个为右侧垂直轴，第三个为顶部水平轴。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-23T15:44:16.713

我认为没有简单的方法可以做你想做的事。如果关闭该框（以消除右侧的蓝色刻度线），则顶部水平线将消失：

```
set(AX(1), 'Box','off') 
```

如果你愿意，你可以用以下方法重新画线：

```
line([-1, 1], [1, 1]) 
```

或更一般地说：

```
lims = get(AX(1),{'XLim','YLim'});
line(lims{1}, lims{2}([2 2])) 
```

# php - mod_rewrite 友好的 URL 与 404 冲突

> ID：12094835
> 
> 赞同：0
> 
> 时间：2012-08-23T15:12:09.277
> 
> 标签：php, .htaccess, mod-rewrite, http-status-code-404, http-status-code-301

我一直在为我的 mod_rewrite 苦苦挣扎，我以为我已经破解了它……</p>

我的 CMS 使用 post.php?s= 生成博客文章 URL，我一直在尝试删除 URL 的这一部分，以便它们很好且用户友好。这是我的 mod_rewrite：

```
<ifModule mod_rewrite.c>

DirectoryIndex index.php index.html

ErrorDocument 404 http://tempertemper.net/error.php

RewriteEngine On

RewriteCond %{ENV:REDIRECT_STATUS} 200
RewriteRule ^ - [L]

RewriteCond %{HTTP_HOST} ^www.tempertemper\.net$
RewriteCond %{REQUEST_URI} !cron.php
RewriteRule ^(.*)$ http://tempertemper.net/$1 [R=301,L]

RewriteCond %{QUERY_STRING} ^s=(.+)$
RewriteRule post.php /%1? [R=301,L]

RewriteRule ^resources /archive? [R=301,L]

RewriteCond %{REQUEST_URI} !post.php
RewriteRule ^([a-zA-Z0-9_-]+)$ post.php?s=$1

</ifModule> 
```

不幸的是，它似乎将所有未找到的页面定向到空白 post.php 页面而不是 error.php 页面。

我的网站在这里：[http](http://tempertemper.net) ://tempertemper.net ，这是一个不存在的 URL [http://tempertemper.net/this-url-does-not-exist](http://tempertemper.net/this-url-does-not-exist)

它应该带你到[http://tempertemper.net/error](http://tempertemper.net/error)

谢谢参观 ：）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-24T18:22:12.633

因为您正在重定向所有适合该`[a-zA-Z0-9_-]+`模式的路径，所以这只会将查询字符串发送到您的 post.php 脚本`s=this-url-does-not-exist`。因此，由您的 PHP 脚本 post.php 检查是否`this-is-not-a-url`存在，因为 Apache 不可能知道哪些博客文章 ID 值有效，哪些无效。

作为旁注，我建议使用`/blog/2012-08-24-whatever`作为您提供给访问者的路径，而不是`/2012-08-24-whatever`. 这样，您可以为其他功能保留路径，例如，`/images`每次需要创建新的实用程序路径时，不必在 .htaccess 文件中编写新的异常。

# php - PHP set_time_limit() 不起作用，安全模式已关闭

> ID：12094839
> 
> 赞同：2
> 
> 时间：2012-08-23T15:12:23.580
> 
> 标签：php

我尝试通过禁用 PHP 脚本中的时间限制

```
set_time_limit(0); 
```

但它不起作用；在系统默认设置为 30 秒后脚本仍会中止。`max_execution_time`设置（由 after 显示）`phpinfo()`仍然`set_time_limit(0)`显示主值和本地值 30 秒。它还显示安全模式已关闭。

你知道出了什么问题吗？它是在 CentOS 6.2 和 Apache 2.2.15 上运行的 PHP 5.3.3 ~~(cli) 。~~

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-27T21:39:58.777

我现在能够解决问题。原因是

```
php_admin_value max_execution_time "30" 
```

...在*虚拟主机*配置中。如果在此处设置，则 PHP 脚本不能覆盖时间限制。解决方案是将其设置在 php.ini 而不是 Apache 配置中-允许覆盖...

```
max_execution_time = 30 
```

或为 apache 配置中的某些目录定义异常，例如

```
<Directory /path/to/my/scripts>
  php_admin_value max_execution_time "600"
</Directory> 
```

我还尝试使用 <Files> 指令为单个文件定义异常，但这不起作用。

# c# - Exception.ToString() 上的 OutOfMemory 异常

> ID：12094841
> 
> 赞同：-1
> 
> 时间：2012-08-23T15:12:36.150
> 
> 标签：c#, .net, exception, exception-handling, error-handling

下面是来自 .NET 应用程序的一些日志记录输出。

```
Error in MainFunction.
Message: Exception of type 'System.OutOfMemoryException' was thrown.
InnerException: 
StackTrace:    at System.Text.StringBuilder.ToString()
   at System.Diagnostics.StackTrace.ToString(TraceFormat traceFormat)
   at System.Environment.GetStackTrace(Exception e, Boolean needFileInfo)
   at System.Exception.GetStackTrace(Boolean needFileInfo)
   at System.Exception.ToString(Boolean needFileLineInfo)
   at System.Exception.ToString()
   [the rest of the trace is removed] 
```

对应于以下应用程序代码行。以下是在一个 catch 块中，并将字符串返回给实际抛出的方法：

```
private void MainFunction()
{
   ...

   try
   {
      string doc = CreateXMLDocument(); // <- Out of Memory throws here
   }
   catch (Exception ex)
   {
      CoreLogging("Error in MainFunction.", ex);
   }
}

private string CreateXMLDocument()
{
   try
   {
      //Some basic and well constrained XML document creation:
      ...
   }
   catch (Exception ex)
   {
      return "Exception message: " + ex.ToString();  // <- This is the last line of the trace
   }
} 
```

我该怎么办？显然`Exception.Message`应该用来代替`Exception.ToString()`，但我仍然想理解这一点。做

*   在 System.Text.StringBuilder.ToString()
*   在 System.Diagnostics.StackTrace.ToString（TraceFormat traceFormat）

是否意味着 CreateXMLDocument 中异常的堆栈跟踪如此庞大导致 OutOfMemory？我很想知道这将如何发生，因为 CreateXMLDocument 中绝对没有循环调用，这是我能想到的唯一可能导致巨大堆栈跟踪的事情。

有没有其他人遇到过类似的情况？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-23T16:12:03.537

我有点猜测：

1) CLR 引发 OutOfMemoryException。2) 你捕捉到这个异常并调用`.ToString`它 3)`ToString()`尝试为堆栈跟踪分配内存但是......没有内存并且另一个`OutOfMemoryException`被提升。

在评论中，您说 XML 文档有几百 KB，如果您的服务器在 32 位上运行，这*可能*是一个问题，因为 LOH 的碎片。

# ruby-on-rails - 如何在我的 Gemfile 中找出哪些 gem 依赖于 termios？

> ID：12094843
> 
> 赞同：2
> 
> 时间：2012-08-23T15:12:37.220
> 
> 标签：ruby-on-rails, rubygems, ruby-on-rails-3.2

在进行新部署之前，我已经更新了所有的 gem，包括 Rails 3.2.8。但是，我的应用程序现在已损坏，因为正在尝试安装 gem "termios" 0.9.4 版。

显然，0.9.4 不适用于我拥有的任何计算机或服务器。有一些较新的版本，特别是 0.9.6，但它们不会发布在 bundler 寻找 gem 的任何地方。

Github 上有一些版本，但它们被神秘地重命名为“ruby-termios”。好吧，我的 Gemfile 中的一些 gem 不是在寻找 ruby​​-termios。它正在寻找termios。失败。

我怎样才能找出哪个 gem 正在尝试安装它，以便我可以查看它是否可以被攻击？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-23T16:05:58.830

检查您的 Gemfile.lock - 它列出了所有 gem 及其依赖项。只要您过去能够安装这些 gem，您就可以知道该依赖项来自何处。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-23T16:03:33.967

该`gem`命令将为您转储依赖关系树。

`$ gem dependency`

或者，如果您只想检查特定的宝石。

`$ gem dependency foo`

# .net - 在使用 SQLite 32 位和 64 位时创建通用设置

> ID：12094849
> 
> 赞同：1
> 
> 时间：2012-08-23T15:12:59.857
> 
> 标签：.net, sqlite, installation, 64-bit, 32-bit

我的客户有一个使用 SQLite 在 .NET 中创建的现有应用程序。他们创建了一个单独的代码库并创建了两种不同的设置，其中一种使用 32 位 SQLite 用于 32 位操作系统，另一种使用 64 位 SQLite 用于 64 位操作系统。他们将其作为 CD 中的产品提供，因此他们现在的要求是合并两个设置，以便可以在单个 CD 中提供它，并降低维护和维护两个构建的成本。

我不知道这里是否有任何出路，因为我是这个地区的新手。有人可以帮忙吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-24T07:13:30.740

多种商业设置创作工具支持混合 32/64 位安装程序。这是一个可以帮助您入门的列表： [http ://en.wikipedia.org/wiki/List_of_installation_software](http://en.wikipedia.org/wiki/List_of_installation_software)

我推荐 Advanced Installer 或 InstallShield。

一般的方法是将 32 位和 64 位元素添加到您的安装程序中，并根据目标机器调整它们。安装工具还使用内部机制自动检测 32 位和 64 位机器并相应地调整安装。

# ios - UIPopover 中的 UITableView 在显示键盘时隐藏内容

> ID：12094850
> 
> 赞同：1
> 
> 时间：2012-08-23T15:13:09.297
> 
> 标签：ios, uitableview, uipopovercontroller

我在 UIPopoverController 中嵌入了一个 UITableView，如下所示。

![PopoverController 处于“正常”状态](../Images/35b35143d525e98464ebfe408aaa43ee.png)

当我选择一个单元格时，单元格中的 textField 变为 firstResponder。但不是保持表格视图滚动到顶部，而是所有内容都消失了（即使不超过 4 个单元格）。如果发生这种情况，滚动到顶部是不可能的。关闭键盘后一切正常。

![显示键盘时的 PopoverController](../Images/5aeb613a5c88fc34aef0f9deb96345cd.png)

以下代码不能解决问题：

```
- (void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath {
    CRShoppingListItemCell *cell = (CRShoppingListItemCell *) [tableView   cellForRowAtIndexPath:indexPath];
    cell.itemTextField.enabled = YES;
    cell.itemTextField.delegate = self;
    [cell.itemTextField becomeFirstResponder];
    [tableView scrollToNearestSelectedRowAtScrollPosition:UITableViewScrollPositionNone animated:YES];
    [tableView deselectRowAtIndexPath:indexPath animated:YES];
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2017-12-09T00:44:45.793

我的猜测是你没有使用 UITableViewController。在该控制器的 viewWillAppear 中，它检查 isInViewControllerThatHandlesKeyboardAvoidance （私有），其中一个控制器是弹出框控制器。因此，如果是这样，那么当表格全屏时您通常想要的键盘避免行为被关闭。

# c# - 如何从 WCF 获取数据（异步）？

> ID：12094851
> 
> 赞同：4
> 
> 时间：2012-08-23T15:13:08.063
> 
> 标签：c#, .net, wcf, asynchronous

我得到了使用 WCF 从服务器请求数据的代码。

例如：

```
 public static Company LoadCompanyInfo(Guid session)
    {
        var client = new QualerServiceClient("QualerService");
        return client.GetCompanyInfo(session);
    } 
```

我需要让我的 wpf 应用程序异步运行这些代码。

我尝试：

```
 public static Company LoadCompanyInfoAsync(Guid session)
    {
        var client = new QualerServiceClient("QualerService");
        client.BeginGetCompanyInfo(session, new AsyncCallback(EndLoadCompanyInfoAsync), client);

        // How to Get Data from AsyncCallback function?
        return null;
    }

    private static void EndLoadCompanyInfoAsync(IAsyncResult r)
    {
        var client = r.AsyncState as QualerServiceClient;
        var result = client.EndGetCompanyInfo(r);
        // how to return the result value ??
    } 
```

但我不知道如何从回调函数返回数据。

我有方法：

*   BeginGetCompanyInfo 和 EndGetCompanyInfo

*   获取公司信息异步

和事件：

*   获取公司信息已完成。

**问题**：

1.  如何从回调方法中获取数据？

2.  `GetCompanyInfoAsync`和 和有什么不一样`Begin\End`？

3.  最佳实践：如何异步执行方法，使我的 WPF 应用程序的 GUI 不冻结？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-23T16:56:17.327

我假设您使用的是 VS2012。

首先，如果您的目标是 .NET 4.0，则安装（通过 NuGet）Async Targeting 包。如果您的目标是 .NET 4.5，则无需做任何特别的事情。

接下来，重新创建您的客户端代理。现有的//`Begin`端点将被单个`End`.`Async``Task<Company> GetCompanyInfoAsync(Guid)`

现在你可以像这样使用它：

```
public static Task<Company> LoadCompanyInfoAsync(Guid session)
{
  var client = new QualerServiceClient("QualerService");
  return client.GetCompanyInfoAsync(session);
}

public async void ButtonClickOrWhatever(...)
{
  var company = await LoadCompanyInfoAsync(mySession);
  // Update UI with company info.
} 
```

旧的`Begin`/`End`方法对使用的是异步编程模型 (APM)。旧的`Async`/`event`对使用基于事件的异步编程模型 (EAP)。新`Async`方法使用基于任务的异步编程模型 (TAP)。我的博客上有更多关于[`async`WCF的信息。](http://nitoprograms.blogspot.com/2012/08/async-wcf-today-and-tomorrow.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-23T16:16:28.727

您可以将异步 CTP 用于 .net 4，它将在 5 中成为 .net 的一部分。

它在 C# 中添加了两个新关键字 async 和 await 关键字。
您使用 async 关键字标记方法或 lamda 并返回一个 `Task`或`Task<T>`

当你调用你的方法时，你会这样称呼它

```
var result = await LoadCompanyInfo(sessionId); 
```

[异步 CTP](http://msdn.microsoft.com/en-us/vstudio/async.aspx)

```
 public static async Task<Company> LoadCompanyInfo(Guid session)
    {
      Company result = default(Company);
      await TaskEx.Run(()=>{
      var client = new QualerServiceClient("QualerService");
      result = client.GetCompanyInfo(session);
      });

     return result;
    } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-23T16:26:43.573

Use [TPL](http://msdn.microsoft.com/en-us/library/dd321448.aspx):

```
Task t = TaskFactory.FromAsync(
             beginMethod: BeginGetCompanyInfo,
             endMethod: EndGetCompanyInfo,
             arg1: session,
             state: null);
t.ContinueWith(result =>
    {
        // handle result
    }); 
```

# wpf - 数据网格的模板

> ID：12094852
> 
> 赞同：0
> 
> 时间：2012-08-23T15:13:11.217
> 
> 标签：wpf

```
<DataGrid AutoGenerateColumns="False" Height="200" Margin="0,63,0,0" Name="dataGrid1" MouseDoubleClick="dataGrid1_MouseDoubleClick">
    <DataGrid.Columns>
        <DataGridTextColumn Header="Hospital Name" Width="100" Binding="{Binding hosp_name}"/>
         <DataGridTextColumn Header="Order Number" Width="100" Binding="{Binding ordID}"/>
         <DataGridTextColumn Header="Order Date" Width="*" Binding="{Binding placedDate}"  />
    </DataGrid.Columns>    
</DataGrid> 
```

嘿伙计们，我是 wpf 的新手，我怎样才能把它变成一个模板，这样我就可以在每次以编程方式创建一个新选项卡时渲染它？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-23T15:16:32.840

将其包装在 a 中[`DataTemplate`](http://msdn.microsoft.com/en-us/library/system.windows.datatemplate.aspx)并将其分配`ContentTemplate`为`TabControl`.

# java - 如何使用 Mule 3.2 JAXB 转换器将 XML 列表转换为对象？

> ID：12094854
> 
> 赞同：0
> 
> 时间：2012-08-23T15:13:12.697
> 
> 标签：java, list, jaxb, transform, mule

如果我从 JMS 队列中读取此 XML 并使用**mulexml:jaxb-xml-to-object-transformer**将其转换为 carType Java，我需要如何设置我的 Java 类以将此信息放入稍后可以使用的列表中.

```
<carTypes>
 <car>
 <name>Toyota</name>
 <color>red</color>
 </car>
 <car>
 <name>Ford</name>
 <color>Blue</color>
 </car>
</carTypes> 
```

我正在尝试这样的事情，但它不起作用

```
 package org.mule.jaxb.model;

 import javax.xml.bind.annotation.XmlElement;
 import javax.xml.bind.annotation.XmlRootElement;

 @XmlRootElement(name = "carTypes")
 public class Cars{
   List<String> cars;

   @XmlElement(name="car")
   public List<String> getCars() {
       return cars;
   }

   public void setCars(List<String> cars) {
       this.cars = cars;
   }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-23T15:47:20.633

该`cars`属性应该是 type`List<Car>`而不是`List<String>`。那么你的`Car`类型应该有两个属性： `name`和`color`.

**了解更多信息**

*   [http://wiki.eclipse.org/EclipseLink/Examples/MOXy/GettingStarted/TheBasics](http://wiki.eclipse.org/EclipseLink/Examples/MOXy/GettingStarted/TheBasics)

# sql - 在 SQL 查询中使用 APEX 应用程序项

> ID：12094856
> 
> 赞同：4
> 
> 时间：2012-08-23T15:13:33.257
> 
> 标签：sql, oracle, oracle-apex

我调用了两个 APEX 应用程序项`AI_TABLE`，`AI_ERROR`我需要在 SQL 查询中使用它们。不知道如何使用它们，也找不到这个教程，即使它看起来很简单......

```
SELECT *
FROM :AI_TABLE a
WHERE a.ERROR_TEXT = :AI_ERROR 
```

理想情况下，我希望它以交互式报告格式显示。谢谢您的帮助！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-23T15:32:50.540

本地 SQL不能`:AI_TABLE`在运行时绑定表名，需要使用动态 PL/SQL；或在 Apex 创建类型的报告区域`SQL Query (PL/SQL function body returning SQL query)`：

```
RETURN 'SELECT * FROM '|| :AI_TABLE || ' a WHERE a.ERROR_TEXT = ' || :AI_ERROR; 
```

# db2 - CONCATENATION，smallint，integer转换成整数列

> ID：12094859
> 
> 赞同：2
> 
> 时间：2012-08-23T15:13:39.780
> 
> 标签：db2, concatenation, mainframe

DB2 V9 z/os

背景：我有一个 4 列的表定义为`(col1 int, col2 smallint, col3 int, col4 date)`

第 1 行的值为 (1,123,456,2012-08-23)

当我执行以下操作时：

```
SELECT CAST(col2 AS VARCHAR(5)) CONCAT CAST(col3 AS VARCHAR(5))
  FROM db.T1 
 WHERE col1 = 1; 
```

返回值 123456，这正是我想要的。

当我执行以下操作时：

```
UPDATE db.table2
   SET col3 = SELECT CAST(col2 AS VARCHAR(5)) CONCAT CAST(col3 AS VARCHAR(5))
  FROM db.T1 
 WHERE col1 = 1; 
```

错误是：

> SQL0408N 值与其赋值目标的数据类型不兼容。目标名称是“col3”。SQLSTATE=42821

我了解该错误是由于尝试将 varchar 插入整数。我还可以做些什么？我尝试过使用各种 CAST 语句，但无法将值插入 col3。我需要显示加入的值，如上所示。

任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-23T15:16:50.660

将所有演员表包装为决赛`cast( ... as integer)`应该有效：

```
UPDATE db.table2 
SET col3 = SELECT CAST(
        CAST(col2 AS VARCHAR(5)) CONCAT CAST(col3 AS VARCHAR(5)) 
    AS INTEGER)
FROM db.T1 
WHERE col1 = 1; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2021-10-17T12:17:37.980

取决于您的小整数的最大值，您可以将它们转换为 base-9，然后与“9”连接。

```
CONCAT( IFNULL(CONV(sint1, 10, 9),''), 
        '9', 
        IFNULL(CONV(tint2, 10, 9),'')
      ) AS combined 
```

另一种选择，也取决于你的小整数的最大值，到PAD-LEFT，其中一个为零。

```
CONCAT(
         sint1, 
         LPAD(tint2,3,0)
) AS combined 
```

查看完整代码和解释：[https ://mdb-blog.blogspot.com/2021/10/mysql-joincombine-2-smallinttinyint.html](https://mdb-blog.blogspot.com/2021/10/mysql-joincombine-2-smallinttinyint.html)

# xcode - 如何将本地化语言添加到 Xcode 4.4？

> ID：12094860
> 
> 赞同：8
> 
> 时间：2012-08-23T15:13:43.997
> 
> 标签：xcode, localization

参考本指南： [如何使用 Xcode 4 本地化我的应用程序？](https://stackoverflow.com/questions/5349066/how-to-localize-my-app-with-xcode-4)

我注意到在本地化下，我的 Xcode 4.4 没有显示 [+] 按钮：

![在此处输入图像描述](../Images/65b42e004323265366fd1c1a6007d90f.png)

**如何将语言添加到本地化列表？**

**注意：**我没有使用 IB。我纯粹需要一个带有游戏翻译字符串的本地化字符串文件。

到目前为止我的解决方法：我手动创建了 de.lproj 文件夹，将字符串文件复制到 de.lproj 中，将其添加到 Xcode 并且 Xcode 确实将该文件识别为德语。Xcode 还将德语添加到本地化列表中。我想知道是否有更简单的方法（从 Xcode 中）而不是手动复制和添加文件？

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2012-08-23T18:41:43.303

从项目导航器中选择您的项目以打开项目编辑器。从项目编辑器的左侧选择您的项目。单击编辑器顶部的信息按钮。您应该会看到一个本地化列表以及一个用于添加本地化的按钮。单击添加按钮并选择一种语言。将打开一个工作表，让您选择要本地化的文件。

# c++ - cin 和 switch 奇怪的行为

> ID：12094862
> 
> 赞同：0
> 
> 时间：2012-08-23T15:13:50.483
> 
> 标签：c++, switch-statement, cin

所以我在使用`cin`and`switch`语句时遇到了一些问题。首先，程序提示输入`int`：

```
cout << "How many registers would you like to use?: ";
cin >> kassor; 
```

稍后，要求用户做出选择：

```
 cout << endl << "Press \"S\" to run the queue simulator and/or make a timestep." << endl;
    cout << "Press \"Q\" to quit." << endl << endl;
    cout << "Choice: ";
    cin >> choice;

    switch (choice)
    {
        case 's':
        case 'S':
        {
            cout << "test";
            nya = newCustomers();
            break;
        }
        case 'q':
        case 'Q':
        {
            return 0;
        }
    } 
```

在这里，'q' 选项可以正常工作，但 's' 选项不能。它“挂起”，好像还在等待输入。我尝试了各种`cin.ignore()`等等，但无济于事。

令我困惑的是

```
switch (choice)
{
    case 's':
    case 'S':
    {
        cout << "test";
        nya = newCustomers();
        break; 
```

什么都不提供，但以下内容：

```
switch (choice)
    {
        case 's':
        case 'S':
        {
            cout << "test";
            cin.ignore(1024, '\n');
            nya = newCustomers();
            break; 
```

输出“测试”。

我的主要问题是：是问题`cin`还是在`case: s`？

提前致谢 ：

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-23T15:27:00.780

看起来该函数`newCustomers`在输入`choice`. 这可以解释为什么`ignore`调用“修复”了问题，这是@TheBuzzSaw 在评论中建议的解决方案。

为了更清楚地看到这一点，请更改

```
cout << "test"; 
```

至

```
cout << "test\n"; 
```

或者

```
cout << "test" << std::endl; 
```

在某些系统上，控制台是行缓冲的，因此在程序写入换行符之前您不会看到任何输出。插入`endl`会刷新输出缓冲区，因此即使后续代码挂起，您也应该看到该消息。或将其更改为：

```
cerr << "test\n"; 
```

`cerr`更积极地刷新缓冲区，正是因为它用于您不想错过的错误输出。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-23T15:28:40.670

**简短的回答：** 我相信 cin 在某处失败，或者它是意外行为的原因，如果没有更多代码，我无法查明它。

**编辑：**我不能对你的帖子发表评论，所以我想我会在这里发帖。“挂起”可能是一个无限循环。如果您正在做类似我正在做的事情并循环获取输入并且无法清除错误位 cin 将不断失败。如果您每次请求输入时都没有计算某些内容，那么它可能只是静静地坐在那里循环通过输入收集功能。在所有循环中放置断点，并使用调试器单步执行以验证您的循环都不是无限循环。

尝试添加 std::cin.clear(); 在第二个测试用例中的 .ignore() 之前。看看这是否会停止你的悬挂。

**解释：**

cin 可能会失败。这可能会导致奇怪的行为。它失败的一种常见方法是，如果您正在读入一个整数并且您获得了字符输入。一旦 cin 失败，它就会设置一个失败位，从那时起，cin 的行为就不会像你期望的那样。

我建议不要使用裸露的 cin >> 选项，因为它可能会失败并且您不会知道。我会将其抽象为一种可以获取所需正确输入的方法。

我个人保留了一个小型实用程序库 (.h) 和 .cpp，以包含在我使用我已经编码的常见功能的项目中。

我有一个 readIntBetween() 函数，它接受 2 个整数并从标准输入中读取这两个数字之间的整数。如果用户没有提供正确的输入（整数上下界，或包含字符的输入），我会要求他们重新输入。

在这个函数中，我确保在检测到故障时清除故障位，并且我忽略了诸如 200 个字符之类的内容以“刷新”它。

这是我的 readIntBetween 函数的代码。我希望它可以帮助您诊断错误并修复它：

```
int readIntBetween(int lower, int upper, std::string prompt)
{
    bool goodVal = false;
    int value = -1;
    do
    {
        std::cout << prompt ;
        std::cin >> value;

        if ( value >= lower && value <= upper)//check to make sure the value is in between upper and lower
            goodVal = true;
        else
        {
            if(std::cin.fail())
            {
                std::cout << "\tError - invalid format for integer number" << std::endl;

                //clear all status bit including fail bit
                std::cin.clear();

                //flush input buffer to discard invalid input
                std::cin.ignore(1000, '\n');

            }
            else
            std::cout << "Value is not valid, must be between " << lower<<" and "<<upper<<"."<<std::endl;
        }

    }while(!goodVal);
    return value;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-23T15:38:20.927

如果您`cin`在循环中使用，我建议使用不同的方法。

```
char buffer[64];
cin.getline(buffer, 64);

char choice = buffer[0];

switch (choice)
{
    ...
} 
```

您可能`cin`没有被重置，并且任何无关的字符都被输入到后续的输入请求中。获取更多输入并仅处理其第一个字符。

# android - 所有应用程序的 Android addProximityAlert

> ID：12094863
> 
> 赞同：0
> 
> 时间：2012-08-23T15:13:51.283
> 
> 标签：android, locationmanager

我想在设备进入固定区域时显示活动。我在接收器（GpsAlarmRecivier）中有 startActivity。下面的代码有效，但是当我关闭 Activity 时，它会崩溃。我知道这是因为我必须注销接收者。

但我想对所有应用程序使用 addProximityAlart，即使在关闭我的活动之后（例如，移到上一个）。是否可以 ？

```
Intent myIntent = new Intent("gpsup.namespace.ProximityAlert");             

PendingIntent proximityIntent = PendingIntent.getBroadcast(cxt, 0, myIntent, 0);

locationManager.addProximityAlert(records.get(pos).x, records.get(pos).y, records.get(pos).r,  
-1, proximityIntent);

IntentFilter filter = new IntentFilter("gpsup.namespace.ProximityAlert");
actv.getApplicationContext().registerReceiver(new GpsAlarmReceiver(), filter); 
```

我想使用 addProximityAlert，即使我关闭活动，当我创建接收者时。感谢您的任何建议。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-23T15:22:54.610

我不相信有办法在您的应用程序中直接注册系统 GPSBroadcastReceiver。如果是这种情况，你可以把它放在你的清单中，当更新出来时它会得到解决，然后你可以在执行检查后触发你的自定义意图。

我相信这实际上是他们不允许这样做的原因（我可能错了）。如果 GPS 更新出来时每个应用程序都被唤醒，那将是有问题的。他们会在后台打电池。

我可以给出的一个建议是创建一个服务来监听您的 GPS 更新，然后广播您的意图。虽然你可以让它永远在后台运行，但它的生命周期肯定比 Activity 更长。

# c# - 用键值对（B）中匹配键的值替换键值对（A）的值？

> ID：12094867
> 
> 赞同：3
> 
> 时间：2012-08-23T15:14:08.610
> 
> 标签：c#, dictionary

我在 C# 中有 2 个字典（键值对对象）。我想将字典 A 与 B 进行比较，并对**两个字典中的任何键**执行以下操作：
1\. 将字典 A 中的值替换为字典 B 中的值
2\. 从字典 B 中删除匹配键

一个例子如下：

初始字典：

```
A={" Key1:value1 "," Key2:value2 "}
B={" Key3:bla "," key1:hello "," Key4:bla "," Key2:world "} 
```

之后：

```
A={" Key1:hello "," Key2:world "}
B={" Key3:bla "," Key4:bla "} 
```

我想知道做到这一点的最佳方法，我确信这可以在 LINQ 中实现，但我仍然只是一个初学者，非常感谢任何帮助。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-23T15:32:35.817

不确定 Ani 的答案去了哪里，但这里有一个类似的解决方案：

```
foreach (var k in A.Keys.ToList())
{
    if (B.ContainsKey(k))
    {
        A[k] = B[k];
        B.Remove(k);
    }
} 
```

**编辑**它看起来像原始代码`InvalidOperationException`在通过`foreach`循环时抛出一个，认为该集合已被修改。有关详细信息，请参阅[此问题](https://stackoverflow.com/questions/1070766/editing-dictionary-values-in-a-foreach-loop)。 `ToList()`是必须的。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-23T15:45:24.863

这是另一个稍微紧凑的选项：

```
 var keys = dictionaryA.Keys.Where(x => dictionaryB.Keys.Contains(x)).ToArray();
    foreach(var key in keys)
    {
         dictionaryA[key] = dictionaryB[key];
         dictionaryB.Remove(key);
    } 
```

# c - 用 C 语言为 pic18f1xk22 设置 ADC

> ID：12094869
> 
> 赞同：2
> 
> 时间：2012-08-23T15:14:09.037
> 
> 标签：c, embedded, pic18

初学者尝试学习 ADC 设置，但不幸的是，大多数在线示例都是针对其他 pic18 模型的，而且我没有 adc.h 定义作为资源。（或者不是 C 代码。）真的不想被灌输一个答案，但如果有人能建议一些很棒的演练、在线资源等。我真的很感激，谢谢！

此外，我编写的这个伪代码的任何帮助都会很棒。可能有错误......不知道我是否在正确的轨道上。

```
//configure port
    //disable pin output driver (TRIS) - same thing as clear?
    //configure pin as analog
//configure adc module
    //set ADC conversion clock
    // configure voltage reference
    //select adc input channel
        //CH0-CH12 of ADCON0
    // select result format
        //select data format using the ADFM bit of the ADCON1 register                                                 
           //select aquisition delay  
    // turn on ADC module
        //enable A/D converter by setting the ADON bit of the ADCON0 register                                                     
//start conversion by setting GODONE bit of ADCON0 register
    //GODONE = 1;

// read ADC result
    //read the ADRESH and ADRESL registers
//clear the adc interrupt flag (optional) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-24T14:08:07.313

还不完美，但大部分都弄明白了。休息应该不会太难。。现在主要是需要实现中断。

```
 TRISc = 0x01; // disable tri-state    
    ANSEL = 0xFF;//setting to analog
    ADCON1 = 0x00;//Voltage References Set
    ADCON2 = 0x00;// left justified ADFM, set Acquisition Time and Conversion Clock
    ADCON0 = 0x11;// Analog Channel Select, GODONE set, Enable ADC

    //TODO:interrupt ADIF bit in the PIR1 register
    ADIF = 0;
    ADIE = 1;
    GODONE = 1;
    while(GODONE) {};

    adcValue = ADRESH;
    adcValue <<= 8;
    adcValue |= ADRESL;

    while(1){} 
```

# java - Spring Beans：扫描转换器，注入 CustomConversionServiceFactory

> ID：12094871
> 
> 赞同：6
> 
> 时间：2012-08-23T15:14:15.103
> 
> 标签：java, spring, configuration, javabeans

我有一个我正在注册的 MyAppConversionServiceFactoryBean ：

```
<bean id="conversionService" class="com.MyProject.MyAppConversionServiceFactoryBean">
    <property name="messageSource" ref="messageSource"/>
    <property name="converters">
        <set>
            <bean class="com.MyProject.XRepresentationConverter" />
            <bean class="com.MyProject.YRepresentationConverter" />
            <bean class="com.MyProject.ZRepresentationConverter" />
        </set>
    </property>
</bean> 
```

我可以继续列出我们写入此列表的每个转换器，但我希望能够对其进行配置，这样就没有必要了，并且转换器会以某种方式自动向我的工厂注册。

*侧边栏 1：*如果自定义工厂无法做到这一点，那么默认的 spring 是否可以？

*Sidebar 2：*如果第一部分和 Sidebar 1 都不可能，是否可以`@Autowired`将 conversionService 转换为转换器（以便他们可以轻松地相互调用）？`@Autowired ConversionService conversionService`由于在conversionService 仍在忙于创建服务时无法将其连接到对象，因此尝试之前给我带来了问题。

*注意：我们使用的是 Spring，而不是 Spring MVC。我无法控制这一点，因此不幸的是，该路线上的任何解决方案都将无法使用。我几乎可以更改有关配置和 Java 类的任何其他内容，但不能更改总体工具。*

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-23T15:59:42.887

@Vikdor 对这个问题的评论为我指明了正确的方向。

`@Autowired`Spring 显然能够（我亲自问过的人都不知道这一点）通过带有注释的扫描过程收集 bean 的集合。为了达到与帖子中的配置相同的效果，我需要这样做：

`applicationContent.xml`一定有：

```
<context:component-scan base-package="com.MyProject"/>
<bean id="conversionService" class="com.MyProject.MyAppConversionServiceFactoryBean" /> 
```

`MyAppConversionServiceFactoryBean.java`：

```
public class MyAppConversionServiceFactoryBean implements
        FactoryBean<ConversionService>, InitializingBean {

    @Autowired
    private Set<BaseConverter> converters;

} 
```

然后我所有的转换器现在都有`@Component`注释。

[相关文档`@Autowired`](http://static.springsource.org/spring/docs/2.5.x/reference/beans.html#beans-autowired-annotation)确实简要提到它可以用来收集一种类型的所有 bean，但我不知道如果没有[Grzegorz Oledzki 的这个线程](https://stackoverflow.com/questions/2799316/how-to-collect-and-inject-all-beans-of-a-given-type-in-spring-xml-configuration)，它可以完成任何收集类型，它解决了我的问题的通用形式，但把它带到了哲学的道路上。

# jquery - 为什么 jquery .change() 甚至不会在后续事件中触发？

> ID：12094873
> 
> 赞同：0
> 
> 时间：2012-08-23T15:14:16.040
> 
> 标签：jquery

我有以下代码：

```
$('#calendarAppointmentStartTime').change(function() {
    $('#conflicts').empty();
    $('input[type=checkbox]').each(function() {
        var sThisVal = (this.checked ? "1" : "0");
        if (sThisVal == "1") {
            $(this).removeAttr("disabled");
            $('#resourceConflicts' + $(this).val()).empty();
        }
    });

    calculateScheduleEndTime();
    $('input[type=checkbox]').each(function() {
        var sThisVal = (this.checked ? "1" : "0");
        if (sThisVal == "1") {
            conflictChecker($(this).val());
        }
    });
});​ 
```

问题如下： calendarAppointmentStartTime 第一次更改时，代码被触发。第二个更改也会触发，但任何后续更改事件似乎都不会触发。我无法弄清楚发生了什么。在我添加第二个 $('#conflicts').html() 和第一个输入复选框迭代之前，它确实有效。

谁能看到我可能遗漏的任何东西？我真的可以用一双新鲜的眼睛。

编辑：复选框的相关HTML（有很多所以我只包括1：

```
<input id="Resource10" type="checkbox" onclick="conflictChecker(10)" value="10"name="resources">    
John Doe
<br/>
Conflicts:
<span id="resourceConflicts10">0</span> 
```

在另一个地方：

```
<td>
<div id="conflicts"></div>
</td> 
```

和 calendarstarttime 输入框：

conflictChecker 方法将内容添加到冲突 div，并根据在相关开始时间找到的冲突数量禁用复选框。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-23T17:04:12.550

多谢你们！

我确实解决了。这归结为我在用例中缺少的一些逻辑。

用户可以单击复选框以选择资源，然后更改运行冲突检查器方法的时间。冲突检查器方法将禁用复选框并根据 ajax 返回“取消选中”它。将根据冲突在冲突 div 和 resourceConflicts10（基于 resourceID 的 10 个更改）中设置值。第二次 starttime 再次更改，代码必须运行另一个冲突检查并启用所有复选框并清除 div 中的通知。

我错过了冲突导致复选框“未选中”的事实，因此以下代码：

```
var sThisVal = (this.checked ? "1" : "0");
    if (sThisVal == "1") {
        $(this).removeAttr("disabled");
        $('#resourceConflicts' + $(this).val()).empty();
    } 
```

需要更改为以下内容：

```
 $(this).removeAttr("disabled");
        $('#resourceConflicts' + $(this).val()).empty(); 
```

还有一些其他更改，但这是使更改正常工作的更改。

再次感谢所有自愿提供帮助的人。现在我会因为最初没有通过每一行并在我发布问题之前更加努力地思考它而自责。我现在感觉自己像个量油尺。

# ms-access - VB6 ADO 连接问题，即使没有连接处于活动状态，Jet 也会中止

> ID：12094874
> 
> 赞同：0
> 
> 时间：2012-08-23T15:14:19.223
> 
> 标签：ms-access, vb6, database-connection, legacy

我正在维护一个使用 Access 作为 DB 的旧版 VB6 应用程序。对于某个客户端，我在处理数据时遇到了奇怪的错误。我收到此错误：

```
2012-08-23 17:04:49 The Microsoft Jet database engine stopped the process because you and another user are attempting to change the same data at the same time. 
```

但我确定我是唯一一个运行该程序的人，所以我怀疑由于错误而在程序中某处保持打开状态的连接。该应用程序非常非常丑陋......有没有办法让我看到有多少连接处于活动状态？我该怎么做才能确保只有一个连接处于活动状态？只需确保关闭所有已打开的连接？

您可以通过我的方式传递任何其他想法或提示吗？谢谢

# spring - Spring MVC：使用组件扫描和 Hibernate 设置注释驱动的 URL

> ID：12094879
> 
> 赞同：2
> 
> 时间：2012-08-23T15:14:45.307
> 
> 标签：spring, spring-mvc

我是春天的新手。我尝试创建的是一个 Spring MVC webapp

1.  注释驱动的 URL
2.  休眠

而且*似乎*有冲突。

我发现在 Spring 3.0 中设置注释驱动的 URL 的唯一方法是使用具有如下配置的调度程序：

```
<?xml version="1.0" encoding="UTF-8"?>
<beans xmlns="http://www.springframework.org/schema/beans"
   xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
   xmlns:p="http://www.springframework.org/schema/p"
   xmlns:mvc="http://www.springframework.org/schema/mvc"
   xmlns:context="http://www.springframework.org/schema/context"
   xsi:schemaLocation="http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans-3.0.xsd
   http://www.springframework.org/schema/mvc http://www.springframework.org/schema/mvc/spring-mvc-3.0.xsd
   http://www.springframework.org/schema/context http://www.springframework.org/schema/context/spring-context-3.0.xsd">

<context:component-scan base-package="app.controllers" />

<mvc:annotation-driven />

<bean id="viewResolver"
      class="org.springframework.web.servlet.view.InternalResourceViewResolver"
      p:prefix="/WEB-INF/jsp/"
      p:suffix=".jsp" />
</beans> 
```

这必须使用`component-scan`. 正确的？

问题是：要使用我的注释类，我还必须将它们加载到我的`applicationContext.xml`via`<context:component-scan base-package="app.data.*" />`

（我没有设法将它们全部正确地包含在`applicationContext.xml`via`<bean class="…" />`中。这可能不应该是要走的路。）

一旦我`component-scan`在这两个地方都可以使我的 URL 正常工作（而不仅仅是在 中`applicationContext.xml`），我就会收到此错误：

```
Context initialization failed
org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'itemsController': Injection of autowired dependencies failed; nested exception is org.springframework.beans.factory.BeanCreationException: Could not autowire field: private app.data.service.ItemService app.controllers.ItemsController.itemService; nested exception is org.springframework.beans.factory.NoSuchBeanDefinitionException: No matching bean of type [app.data.service.ItemService] found for dependency: expected at least 1 bean which qualifies as autowire candidate for this dependency. Dependency annotations: {@org.springframework.beans.factory.annotation.Autowired(required=true)}
    at org.springframework.beans.factory.annotation.AutowiredAnnotationBeanPostProcessor.postProcessPropertyValues(AutowiredAnnotationBeanPostProcessor.java:288)
    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.populateBean(AbstractAutowireCapableBeanFactory.java:1074)
    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:517)
    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:456)
    at org.springframework.beans.factory.support.AbstractBeanFactory$1.getObject(AbstractBeanFactory.java:293)
    at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:222)
    at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:290)
    at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:192)
    at org.springframework.beans.factory.support.DefaultListableBeanFactory.preInstantiateSingletons(DefaultListableBeanFactory.java:585)
    at org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:895)
    at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:425)
    at org.springframework.web.context.ContextLoader.createWebApplicationContext(ContextLoader.java:282)
    at org.springframework.web.context.ContextLoader.initWebApplicationContext(ContextLoader.java:204)
    at org.springframework.web.context.ContextLoaderListener.contextInitialized(ContextLoaderListener.java:47)
    at org.apache.catalina.core.StandardContext.listenerStart(StandardContext.java:4723)
    at org.apache.catalina.core.StandardContext$1.call(StandardContext.java:5226)
    at org.apache.catalina.core.StandardContext$1.call(StandardContext.java:5221)
    at java.util.concurrent.FutureTask$Sync.innerRun(FutureTask.java:303)
    at java.util.concurrent.FutureTask.run(FutureTask.java:138)
    at java.util.concurrent.ThreadPoolExecutor$Worker.runTask(ThreadPoolExecutor.java:886)
    at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:908)
    at java.lang.Thread.run(Thread.java:662)
Caused by: org.springframework.beans.factory.BeanCreationException: Could not autowire field: private app.data.service.ItemService app.controllers.ItemsController.itemService; nested exception is org.springframework.beans.factory.NoSuchBeanDefinitionException: No matching bean of type [app.data.service.ItemService] found for dependency: expected at least 1 bean which qualifies as autowire candidate for this dependency. Dependency annotations: {@org.springframework.beans.factory.annotation.Autowired(required=true)}
    at org.springframework.beans.factory.annotation.AutowiredAnnotationBeanPostProcessor$AutowiredFieldElement.inject(AutowiredAnnotationBeanPostProcessor.java:508)
    at org.springframework.beans.factory.annotation.InjectionMetadata.inject(InjectionMetadata.java:84)
    at org.springframework.beans.factory.annotation.AutowiredAnnotationBeanPostProcessor.postProcessPropertyValues(AutowiredAnnotationBeanPostProcessor.java:285)
    ... 21 more
Caused by: org.springframework.beans.factory.NoSuchBeanDefinitionException: No matching bean of type [app.data.service.ItemService] found for dependency: expected at least 1 bean which qualifies as autowire candidate for this dependency. Dependency annotations: {@org.springframework.beans.factory.annotation.Autowired(required=true)}
    at org.springframework.beans.factory.support.DefaultListableBeanFactory.raiseNoSuchBeanDefinitionException(DefaultListableBeanFactory.java:924)
    at org.springframework.beans.factory.support.DefaultListableBeanFactory.doResolveDependency(DefaultListableBeanFactory.java:793)
    at org.springframework.beans.factory.support.DefaultListableBeanFactory.resolveDependency(DefaultListableBeanFactory.java:707)
    at org.springframework.beans.factory.annotation.AutowiredAnnotationBeanPostProcessor$AutowiredFieldElement.inject(AutowiredAnnotationBeanPostProcessor.java:480)
    ... 23 more 
```

也许这个双打`component-scan`不好？如果是，你能告诉我如何解决它吗？或者是别的什么？

这是我的`applicationContext.xml`：

```
<?xml version="1.0" encoding="UTF-8"?>
<beans xmlns="http://www.springframework.org/schema/beans"
   xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
   xmlns:context="http://www.springframework.org/schema/context"
   xmlns:tx="http://www.springframework.org/schema/tx"
   xmlns:aop="http://www.springframework.org/schema/aop"
   xsi:schemaLocation="
      http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans-3.0.xsd
      http://www.springframework.org/schema/context http://www.springframework.org/schema/context/spring-context-3.0.xsd
      http://www.springframework.org/schema/aop http://www.springframework.org/schema/aop/spring-aop-3.0.xsd
      http://www.springframework.org/schema/tx http://www.springframework.org/schema/tx/spring-tx-3.0.xsd">

    <context:component-scan base-package="app.*" />

   <!-- Needed for Autowiring -->
   <context:annotation-config />

   <!-- MySQL DataSource -->
   <bean id="dataSource" class="com.mchange.v2.c3p0.ComboPooledDataSource">
      <property name="driverClass" value="com.mysql.jdbc.Driver" />
      <property name="jdbcUrl" value="jdbc:mysql://localhost:3306/test" />
      <property name="user" value="user" />
      <property name="password" value="pw" />
   </bean>

   <!-- Hibernate SessionFactory -->
    <bean id="sessionFactory" class="org.springframework.orm.hibernate4.AnnotationSessionFactoryBean">
      <property name="dataSource" ref="dataSource" />
      <property name="hibernateProperties">
         <value>
            hibernate.hbm2ddl.auto=update
            hibernate.dialect=org.hibernate.dialect.MySQL5Dialect
         </value>
      </property>
   </bean>

   <!-- Transaction Management -->
   <tx:annotation-driven transaction-manager="txManager"/>
   <bean id="txManager" class="org.springframework.orm.hibernate4.HibernateTransactionManager">
      <property name="sessionFactory" ref="sessionFactory" />
   </bean>
</beans> 
```

预先感谢您的帮助！（我希望信息足够。）

**[编辑]**

这就是我的`web.xml`样子：

```
<?xml version="1.0" encoding="UTF-8"?>
<web-app version="3.0" xmlns="http://java.sun.com/xml/ns/javaee" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://java.sun.com/xml/ns/javaee http://java.sun.com/xml/ns/javaee/web-app_3_0.xsd">

    <display-name>Spring Plus Hibernate 4</display-name>
    <context-param>
        <param-name>contextConfigLocation</param-name>
        <param-value>/WEB-INF/applicationContext.xml</param-value>
    </context-param>

    <listener>
            <listener-class>org.springframework.web.context.ContextLoaderListener</listener-class>
    </listener>

    <servlet>
            <servlet-name>new-dispatcher</servlet-name>
            <servlet-class>org.springframework.web.servlet.DispatcherServlet</servlet-class>
            <load-on-startup>1</load-on-startup>
    </servlet>

    <servlet-mapping>
            <servlet-name>new-dispatcher</servlet-name>
            <url-pattern>*.html</url-pattern>
    </servlet-mapping>

    <context-param>
            <param-name>contextConfigLocation</param-name>
            <param-value>/WEB-INF/new-dispatcher-servlet.xml</param-value>
    </context-param>

    <!-- Static files
    http://stackoverflow.com/questions/4169266/where-to-place-images-css-in-spring-mvc-app -->
    <servlet-mapping>
        <servlet-name>default</servlet-name>
        <url-pattern>*.css</url-pattern>
        <url-pattern>*.js</url-pattern>
        <url-pattern>*.png</url-pattern>
        <url-pattern>*.gif</url-pattern>
        <url-pattern>*.jpg</url-pattern>
        <url-pattern>*.jpeg</url-pattern>
    </servlet-mapping>
</web-app> 
```

**[编辑 2]** 像@jelies 提议的那样编辑了我的 web.xml，现在我得到了这个堆栈跟踪：

```
Context initialization failed
org.springframework.beans.factory.BeanDefinitionStoreException: Unexpected exception parsing XML document from ServletContext resource [/WEB-INF/applicationContext.xml]; nested exception is java.lang.NoClassDefFoundError: org/aopalliance/intercept/MethodInterceptor
    at org.springframework.beans.factory.xml.XmlBeanDefinitionReader.doLoadBeanDefinitions(XmlBeanDefinitionReader.java:412)
    at org.springframework.beans.factory.xml.XmlBeanDefinitionReader.loadBeanDefinitions(XmlBeanDefinitionReader.java:334)
    at org.springframework.beans.factory.xml.XmlBeanDefinitionReader.loadBeanDefinitions(XmlBeanDefinitionReader.java:302)
    at org.springframework.beans.factory.support.AbstractBeanDefinitionReader.loadBeanDefinitions(AbstractBeanDefinitionReader.java:143)
    at org.springframework.beans.factory.support.AbstractBeanDefinitionReader.loadBeanDefinitions(AbstractBeanDefinitionReader.java:178)
    at org.springframework.beans.factory.support.AbstractBeanDefinitionReader.loadBeanDefinitions(AbstractBeanDefinitionReader.java:149)
    at org.springframework.web.context.support.XmlWebApplicationContext.loadBeanDefinitions(XmlWebApplicationContext.java:124)
    at org.springframework.web.context.support.XmlWebApplicationContext.loadBeanDefinitions(XmlWebApplicationContext.java:93)
    at org.springframework.context.support.AbstractRefreshableApplicationContext.refreshBeanFactory(AbstractRefreshableApplicationContext.java:130)
    at org.springframework.context.support.AbstractApplicationContext.obtainFreshBeanFactory(AbstractApplicationContext.java:467)
    at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:397)
    at org.springframework.web.context.ContextLoader.createWebApplicationContext(ContextLoader.java:282)
    at org.springframework.web.context.ContextLoader.initWebApplicationContext(ContextLoader.java:204)
    at org.springframework.web.context.ContextLoaderListener.contextInitialized(ContextLoaderListener.java:47)
    at org.apache.catalina.core.StandardContext.listenerStart(StandardContext.java:4723)
    at org.apache.catalina.core.StandardContext$1.call(StandardContext.java:5226)
    at org.apache.catalina.core.StandardContext$1.call(StandardContext.java:5221)
    at java.util.concurrent.FutureTask$Sync.innerRun(FutureTask.java:303)
    at java.util.concurrent.FutureTask.run(FutureTask.java:138)
    at java.util.concurrent.ThreadPoolExecutor$Worker.runTask(ThreadPoolExecutor.java:886)
    at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:908)
    at java.lang.Thread.run(Thread.java:662)
Caused by: java.lang.NoClassDefFoundError: org/aopalliance/intercept/MethodInterceptor
    at java.lang.ClassLoader.defineClass1(Native Method)
    at java.lang.ClassLoader.defineClassCond(ClassLoader.java:631)
    at java.lang.ClassLoader.defineClass(ClassLoader.java:615)
    at java.security.SecureClassLoader.defineClass(SecureClassLoader.java:141)
    at org.apache.catalina.loader.WebappClassLoader.findClassInternal(WebappClassLoader.java:2820)
    at org.apache.catalina.loader.WebappClassLoader.findClass(WebappClassLoader.java:1150)
    at org.apache.catalina.loader.WebappClassLoader.loadClass(WebappClassLoader.java:1645)
    at org.apache.catalina.loader.WebappClassLoader.loadClass(WebappClassLoader.java:1523)
    at org.springframework.transaction.config.AnnotationDrivenBeanDefinitionParser$AopAutoProxyConfigurer.configureAutoProxyCreator(AnnotationDrivenBeanDefinitionParser.java:118)
    at org.springframework.transaction.config.AnnotationDrivenBeanDefinitionParser.parse(AnnotationDrivenBeanDefinitionParser.java:79)
    at org.springframework.beans.factory.xml.NamespaceHandlerSupport.parse(NamespaceHandlerSupport.java:73)
    at org.springframework.beans.factory.xml.BeanDefinitionParserDelegate.parseCustomElement(BeanDefinitionParserDelegate.java:1338)
    at org.springframework.beans.factory.xml.BeanDefinitionParserDelegate.parseCustomElement(BeanDefinitionParserDelegate.java:1328)
    at org.springframework.beans.factory.xml.DefaultBeanDefinitionDocumentReader.parseBeanDefinitions(DefaultBeanDefinitionDocumentReader.java:135)
    at org.springframework.beans.factory.xml.DefaultBeanDefinitionDocumentReader.registerBeanDefinitions(DefaultBeanDefinitionDocumentReader.java:93)
    at org.springframework.beans.factory.xml.XmlBeanDefinitionReader.registerBeanDefinitions(XmlBeanDefinitionReader.java:493)
    at org.springframework.beans.factory.xml.XmlBeanDefinitionReader.doLoadBeanDefinitions(XmlBeanDefinitionReader.java:390)
    ... 21 more
Caused by: java.lang.ClassNotFoundException: org.aopalliance.intercept.MethodInterceptor
    at org.apache.catalina.loader.WebappClassLoader.loadClass(WebappClassLoader.java:1678)
    at org.apache.catalina.loader.WebappClassLoader.loadClass(WebappClassLoader.java:1523)
    ... 38 more
24.08.2012 10:09:17 org.apache.catalina.core.StandardContext startInternal
SCHWERWIEGEND: Error listenerStart
24.08.2012 10:09:17 org.apache.catalina.core.StandardContext startInternal
SCHWERWIEGEND: Context [/spring_hibernate4_demo] startup failed due to previous errors
24.08.2012 10:09:17 org.apache.coyote.AbstractProtocol start
INFO: Starting ProtocolHandler ["http-bio-8084"]
24.08.2012 10:09:17 org.apache.coyote.AbstractProtocol start
INFO: Starting ProtocolHandler ["ajp-bio-8009"]
24.08.2012 10:09:17 org.apache.catalina.startup.Catalina start
INFO: Server startup in 7923 ms
24.08.2012 10:09:17 org.apache.catalina.util.LifecycleBase stop
INFO: The stop() method was called on component [StandardEngine[Catalina].StandardHost[localhost].StandardContext[/spring_hibernate4_demo]] after stop() had already been called. The second call will be ignored.
24.08.2012 10:09:18 org.springframework.web.context.ContextLoader initWebApplicationContext
INFO: Root WebApplicationContext: initialization started
24.08.2012 10:09:18 org.springframework.context.support.AbstractApplicationContext prepareRefresh
INFO: Refreshing Root WebApplicationContext: startup date [Fri Aug 24 10:09:18 CEST 2012]; root of context hierarchy
24.08.2012 10:09:18 org.springframework.beans.factory.xml.XmlBeanDefinitionReader loadBeanDefinitions
INFO: Loading XML bean definitions from ServletContext resource [/WEB-INF/applicationContext.xml]
24.08.2012 10:09:18 org.springframework.web.context.ContextLoader initWebApplicationContext
SCHWERWIEGEND: Context initialization failed
org.springframework.beans.factory.BeanDefinitionStoreException: Unexpected exception parsing XML document from ServletContext resource [/WEB-INF/applicationContext.xml]; nested exception is java.lang.NoClassDefFoundError: org/aopalliance/intercept/MethodInterceptor
    at org.springframework.beans.factory.xml.XmlBeanDefinitionReader.doLoadBeanDefinitions(XmlBeanDefinitionReader.java:412)
    at org.springframework.beans.factory.xml.XmlBeanDefinitionReader.loadBeanDefinitions(XmlBeanDefinitionReader.java:334)
    at org.springframework.beans.factory.xml.XmlBeanDefinitionReader.loadBeanDefinitions(XmlBeanDefinitionReader.java:302)
    at org.springframework.beans.factory.support.AbstractBeanDefinitionReader.loadBeanDefinitions(AbstractBeanDefinitionReader.java:143)
    at org.springframework.beans.factory.support.AbstractBeanDefinitionReader.loadBeanDefinitions(AbstractBeanDefinitionReader.java:178)
    at org.springframework.beans.factory.support.AbstractBeanDefinitionReader.loadBeanDefinitions(AbstractBeanDefinitionReader.java:149)
    at org.springframework.web.context.support.XmlWebApplicationContext.loadBeanDefinitions(XmlWebApplicationContext.java:124)
    at org.springframework.web.context.support.XmlWebApplicationContext.loadBeanDefinitions(XmlWebApplicationContext.java:93)
    at org.springframework.context.support.AbstractRefreshableApplicationContext.refreshBeanFactory(AbstractRefreshableApplicationContext.java:130)
    at org.springframework.context.support.AbstractApplicationContext.obtainFreshBeanFactory(AbstractApplicationContext.java:467)
    at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:397)
    at org.springframework.web.context.ContextLoader.createWebApplicationContext(ContextLoader.java:282)
    at org.springframework.web.context.ContextLoader.initWebApplicationContext(ContextLoader.java:204)
    at org.springframework.web.context.ContextLoaderListener.contextInitialized(ContextLoaderListener.java:47)
    at org.apache.catalina.core.StandardContext.listenerStart(StandardContext.java:4723)
    at org.apache.catalina.core.StandardContext$1.call(StandardContext.java:5226)
    at org.apache.catalina.core.StandardContext$1.call(StandardContext.java:5221)
    at java.util.concurrent.FutureTask$Sync.innerRun(FutureTask.java:303)
    at java.util.concurrent.FutureTask.run(FutureTask.java:138)
    at java.util.concurrent.ThreadPoolExecutor$Worker.runTask(ThreadPoolExecutor.java:886)
    at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:908)
    at java.lang.Thread.run(Thread.java:662)
Caused by: java.lang.NoClassDefFoundError: org/aopalliance/intercept/MethodInterceptor
    at java.lang.ClassLoader.defineClass1(Native Method)
    at java.lang.ClassLoader.defineClassCond(ClassLoader.java:631)
    at java.lang.ClassLoader.defineClass(ClassLoader.java:615)
    at java.security.SecureClassLoader.defineClass(SecureClassLoader.java:141)
    at org.apache.catalina.loader.WebappClassLoader.findClassInternal(WebappClassLoader.java:2820)
    at org.apache.catalina.loader.WebappClassLoader.findClass(WebappClassLoader.java:1150)
    at org.apache.catalina.loader.WebappClassLoader.loadClass(WebappClassLoader.java:1645)
    at org.apache.catalina.loader.WebappClassLoader.loadClass(WebappClassLoader.java:1523)
    at org.springframework.transaction.config.AnnotationDrivenBeanDefinitionParser$AopAutoProxyConfigurer.configureAutoProxyCreator(AnnotationDrivenBeanDefinitionParser.java:118)
    at org.springframework.transaction.config.AnnotationDrivenBeanDefinitionParser.parse(AnnotationDrivenBeanDefinitionParser.java:79)
    at org.springframework.beans.factory.xml.NamespaceHandlerSupport.parse(NamespaceHandlerSupport.java:73)
    at org.springframework.beans.factory.xml.BeanDefinitionParserDelegate.parseCustomElement(BeanDefinitionParserDelegate.java:1338)
    at org.springframework.beans.factory.xml.BeanDefinitionParserDelegate.parseCustomElement(BeanDefinitionParserDelegate.java:1328)
    at org.springframework.beans.factory.xml.DefaultBeanDefinitionDocumentReader.parseBeanDefinitions(DefaultBeanDefinitionDocumentReader.java:135)
    at org.springframework.beans.factory.xml.DefaultBeanDefinitionDocumentReader.registerBeanDefinitions(DefaultBeanDefinitionDocumentReader.java:93)
    at org.springframework.beans.factory.xml.XmlBeanDefinitionReader.registerBeanDefinitions(XmlBeanDefinitionReader.java:493)
    at org.springframework.beans.factory.xml.XmlBeanDefinitionReader.doLoadBeanDefinitions(XmlBeanDefinitionReader.java:390)
    ... 21 more 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-23T16:14:05.787

在你的`applicationContext.xml`：

```
<context:component-scan base-package="app" /> 
```

代替：

```
<context:component-scan base-package="app.*" /> 
```

对于第一个，您还将包括嵌套包。

参考[这里](http://static.springsource.org/spring/docs/3.1.x/spring-framework-reference/html/beans.html#beans-scanning-autodetection)。

**编辑**（`web.xml`添加）：

`<context-param/>`with`<param-name>contextConfigLocation</param-name>`被复制了两次，使用不同的路径指向你的 Spring 配置文件。尝试将第二个放在`new-dispatcher`servlet 中`init-param`：

```
<servlet>
    <servlet-name>new-dispatcher</servlet-name>
    <servlet-class>org.springframework.web.servlet.DispatcherServlet</servlet-class>
    <init-param>
        <param-name>contextConfigLocation</param-name>
        <param-value>/WEB-INF/new-dispatcher-servlet.xml</param-value>
    </init-param>
    <load-on-startup>1</load-on-startup>
</servlet> 
```

希望它有效！

# c# - 开始安卓开发

> ID：12094881
> 
> 赞同：-4
> 
> 时间：2012-08-23T15:14:48.927
> 
> 标签：c#, android, eclipse, sdk, ide

早上，我主要是一名 C# 程序员，我非常擅长 C# 编程，我想开始开发 android 应用程序。

所以我有两种方法：

*   Java方式
*   C#方式[首选]

我是个新手，我不知道应该用什么工具来开发 java。我想知道我应该使用什么版本的 eclipse 以及开发没有任何问题的外部工具 id 是什么。

如果我使用 C# 开发，但我只安装 Mono Develop 并且它需要许可证并且它很复杂，我也更喜欢，所以如果有任何免费的 IDE，请建议它。

我不介意学习 Java，因为它与 C# 非常相似，也是一种 OOP 语言。

提前致谢

编辑：有一个名为：Eclipse for Mobile Developers 的 Eclipse 版本，这是我需要的吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-23T15:17:34.640

[http://developer.android.com/training/index.html](http://developer.android.com/training/index.html)

从这里开始。这真的很容易理解。

下载最新版本的eclipse for java（如果我是你，我会学习java，这并不难，从长远来看，它对你的开发会更容易）。

下载这个： http: [//www.eclipse.org/downloads/packages/eclipse-classic-42/junor](http://www.eclipse.org/downloads/packages/eclipse-classic-42/junor)

只使用标准的 eclipse 就可以了 - 这是我使用的。

# javascript - 创建 d3.js 径向图

> ID：12094886
> 
> 赞同：1
> 
> 时间：2012-08-23T15:15:05.100
> 
> 标签：javascript, json, charts, d3.js

我正在尝试使用以下数据和以下方法创建一个非常简单的 d3.js 径向图表。我一直收到错误`Uncaught TypeError: Cannot read property 'length' of undefined`，还有其他人遇到过同样的问题吗？

**用户数据**

```
var userData = [
    {
        'key':'social',
        'value':1.1,
        'y':1.1,
        'y0':1.1
    },
    {
        'key':'focus',
        'value':1.1,
        'y':1.1,
        'y0':1.1
    },
    {
        'key':'activity',
        'value':1.1,
        'y':1.1,
        'y0':1.1
    }
]; 
```

**附加图表**

```
svg.selectAll(".userData")
      .data(userData)
    .enter().append("path")
      .attr("class", "userData")
      .attr("d", function(d) { return area(d.values); })
      .style("fill","newColor")
      .style("opacity",.6)
      .style("stroke","pink")
      .style("stroke-width",7); 
```

**目前生产：**

![在此处输入图像描述](../Images/2d2023f28a2c0fa36d9697a5b006f3c8.png)

**尝试添加轴**

```
svg.selectAll(".axis")
      .data(d3.range(angle.domain()[1]))
    .enter().append("g")
      .attr("class", "axis")
      .attr("transform", function(d) { return "rotate(" + angle(d) * 180 / Math.PI + ")"; })
    .call(d3.svg.axis()
      .scale(radius.copy().range([-5, -radius]))
      .ticks(5)
      .orient("left"))
    .append("text")
      .attr("y", 
        function (d) {
          if (window.innerWidth < 455){
            return -(window.innerHeight * .335);
          }
          else{
            return -(window.innerHeight * .335);
          }
        })
      .attr("dy", ".71em")
      .attr("text-anchor", "middle")
      .text(function(d, i) { return capitalMeta[i]; })
      .attr("style","font-size:16px;")
      .style("fill", function(d,i) {
        if ($.inArray(meta[i], unhealthyArray) != -1) {
           return "red";
       } else {
           return "black";
        }
    }); 
```

# c# - MVC + WCF + TDD 或 DDD 架构

> ID：12094887
> 
> 赞同：5
> 
> 时间：2012-08-23T15:15:05.197
> 
> 标签：c#, asp.net-mvc-3, wcf, tdd, domain-driven-design

我们又来到了十字路口。

我想至少在接下来的 3 年内尝试实现一种简单、经过验证的方法来构建我的应用程序。每次我要开始一个项目时，感觉就像是第一次，因为这些天来创建网站的“方式”太多了。

我有这个示例代码，我是从我购买的这个包中获得的，叫做 Design Pattern Framework 4 C#。在他们拥有的多个项目中，有一个叫做“设计模式在行动”。您可以从这里下载它[https://skydrive.live.com/redir?resid=B853B0DB724C30E5!16735&authkey=!AOeHSAWa_P4vzzU](https://skydrive.live.com/redir?resid=B853B0DB724C30E5!16735&authkey=!AOeHSAWa_P4vzzU)

我的问题是，在您查看该解决方案之后，关于此示例，什么是好的，坏的，您会保留什么，您会删除什么，什么是不必要的等等？

我知道他们试图展示多个客户以及多个 DAO。但总的来说，这种架构会成为您将其视为“模板”的架构吗？谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-23T15:34:06.203

系统架构很像建筑架构：

*   没有一种“正确”的方式
*   每个人对“最好”都有自己的看法
*   “最佳”架构取决于上下文和需求
*   风格和方法会随着时间而改变

选择架构有很多因素：

*   上市时间——你需要多长时间才能完成？
*   可维护性——你会是唯一维护它的人吗？开源？
*   可扩展性——它是一个封闭的还是开放的系统？
*   可扩展性 - 简单实用程序还是企业级？
*   平台 - 网络或本地？台式机还是手机？

综上所述，如果您能想出一个适合您未来 3 年将要进行的每个项目的包罗万象的框架，我会感到惊讶。将 MVC、WFC、TDD、DDD 等视为可用于构建满足该情况需求~~的~~~~**正确**~~**系统的工具。**

 **我的意见是：只要适合特定情况，使用任何你能理解的概念（必要时可以教给其他人）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-24T12:20:15.043

> 我的问题是，在您查看该解决方案之后，关于此示例，什么是好的，坏的，您会保留什么，您会删除什么，什么是不必要的等等？

快速浏览后，这就是我要说的：

*   关于您问题上的 DDD 标签，这显然不是域驱动的架构。除了一些简单的验证规则和 DDD 架构的许多基本构建块（聚合、值对象等）外，业务对象看起来很[乏味。](http://martinfowler.com/bliki/AnemicDomainModel.html)

*   除非我遗漏了什么，否则大多数业务操作都是 CRUD 操作，它并不能真正代表现实世界的企业应用程序。

*   有一个胖 Service 层和一个胖 ActionService 类，它基本上似乎处理了应用程序的所有用例。好消息是，它以不可知的方式处理用例（据我所知，它操作的 Request 和 Response 对象是独立于交付机制的）。肥胖是不太可取的，因为该课程包含太多责任（[SRP](http://en.wikipedia.org/wiki/Single_responsibility_principle)）。

*   在客户端使用存储库和在服务器端使用 DAO 似乎很奇怪，但为什么不呢？

*   如果它真的是测试驱动的，为什么不包括所有单元测试而不仅仅是一个样本呢？

除此之外，这些层设计得很好，并且正如多个表示层所显示的那样，用一个前端替换另一个前端或一个持久存储替换另一个应该不难。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-23T15:55:55.863

1.  选一个。
2.  试试看。
3.  如果不适合您，请重构/更改。

最重要的是确保您使用可重构的模式。如果您使用 TDD 并发现可以注入依赖项、伪造品等，那么这将简化重构过程。三年对于使用任何给定的模式来说都是很长的时间。一位朋友说，如果你不看 6 个月前的代码并认为它​​很烂，那么你可能学得还不够 :)**

# java - 如何计算每个复选框中的所有真假值

> ID：12094891
> 
> 赞同：1
> 
> 时间：2012-08-23T15:15:27.347
> 
> 标签：java, checkbox, count, jframe

:) 对不起最后一个问题 :)

我将如何实际计算每个复选框的所有真假值并打印它这是我制作的 GUI..

[![图形用户界面](../Images/3cc82c571e6196072bd3058d62cee18c.png)](https://i.stack.imgur.com/mul19.jpg)

例如，在约翰的回答中，项目 1,2 和 5 是正确的，3 和 4 是错误的。我想在分数文本区域中打印所有正确的，错误在错误文本区域中。我想计算所有的每个人的正确和错误..并打印出来

并且还计算每个项目中的所有正确并打印在下面..

复选框的 True 值是正确的，复选框的 false 值或未选中的值是错误的

这是我得到逻辑的地方

[![逻辑](../Images/4cbe2033a826f82601444d648a10d83b.png)](https://i.stack.imgur.com/sUBC5.jpg)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-23T15:17:56.687

您需要将个人的复选框放置在数组或集合中。

遍历它们并计算真值的数量。

# javascript - 显示/隐藏列表项 if 语句 div

> ID：12094892
> 
> 赞同：0
> 
> 时间：2012-08-23T15:15:34.380
> 
> 标签：javascript, html, dojo

我是 javascript 的新手，尤其是 dojo，我被困住了，我假设任务很简单，但我就是无法解决它。

基本上我想做的是以下几点：

当我单击一个列表项时，我应该被发送到另一个视图。我正在这样做：

```
<li data-dojo-type="dojox.mobile.ListItem"
            data-dojo-props="moveTo:'#'" onClick="transitionTo('#recommend',1);">Recommend App</li> 
```

现在 id=recommend` 的 div 有 2 个列表项。

```
<div id="recommend" data-dojo-type="dojox.mobile.ScrollableView">
        <div class="belowTab" style="width: 100%;">&nbsp;</div>
            <ul data-dojo-type="dojox.mobile.RoundRectList">
                <li data-dojo-type="dojox.mobile.ListItem">via Email</li>
                <li data-dojo-type="dojox.mobile.ListItem"
                    data-dojo-props="moveTo:'#'" onClick="postToWall();">via Facebook</li>
</div>
            </ul> 
```

如果某些特定函数返回true，我想让两个列表项都可见，否则隐藏第二个列表项并仅显示第一个。我想知道逻辑以及如何实现将 if 语句与 div 集成在一起的想法

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-25T22:36:03.763

有一种创建事件钩子作为标记的方法记录很差，我将在这里演示。但是，最好在您的代码库中创建一个函数，然后将其设置为 dojoProps 属性，例如`function myonclick() { ... }`and `<div data-dojo-type="dijit._Widget" data-dojo-props="onClick: myonclick"></div>`。

为此，您需要弄清楚`View`小部件提供了哪些事件。执行此操作的简单方法是简单地打开`dojotoolkit-src/dojox/mobile/View.js`文件 - 您正在寻找的可能是`onStartView || onBeforeTransitionIn`？

通过标记，我们现在为 onBefore.. 创建 dojo/method，以便您可以操作列表中的子项。顺便说一句，你有一个杂散的结束`</div>`标签。

```
<div id="recommend" data-dojo-type="dojox.mobile.ScrollableView">
    <div class="belowTab" style="width: 100%;">&nbsp;</div>
    <ul data-dojo-type="dojox.mobile.RoundRectList">
        <li data-dojo-type="dojox.mobile.ListItem">via Email</li>
        <li data-dojo-type="dojox.mobile.ListItem"
              data-dojo-props="moveTo:'#'" onClick="postToWall();">via Facebook</li>
    </ul>

    <script type="dojo/method" event="onBeforeTransitionIn" args="moveTo, dir, transition, context, method">
          // onBeforeTransitionIn(moveTo, dir, transition, context, method):
          var listWidget = dijit.byNode(dojo.query("#recommended ul")[0]);
          // say you have a function with true/false return, if item should show
          dojo.forEach(listWidget.getChildren(), function(Item, idx) {
              dojo.style(Item.domNode, {
                   display: showItem(Item) ? '' : 'none'
              });
          });
    </script>
</div> 
```

# cocoa - NSArrayController 重新排列对象错误

> ID：12094894
> 
> 赞同：1
> 
> 时间：2012-08-23T15:15:37.517
> 
> 标签：cocoa, nsarraycontroller

我在使用 NSArrayController rerangeObjects 函数时遇到了问题 - 这个函数是从一些后台踏板调用的，有时应用程序会因错误而崩溃：'endUpdates 调用时没有 beginUpdates'。

我如何检测 arrayController 是否在当前时刻重新排列对象并将下一个重新排列添加到队列或取消当前重新排列并运行新的？

这个问题可能有另一种解决方案吗？

**添加了编辑代码：**

```
TableController implementation:

- (void)setContent{//perfoms on main thread
     //making array of content and other functions for setting-up content of table
     //...
     //arrayController contains objects of MyNode class
     //...
     //end of setting up. Call rearrangeObjects
     [arrayController rearrangeObjects];
}

- (void)updateItem:(MyNode *)sender WithValue:(id)someValue ForKey:(NSString *)key{
     [sender setValue:someValue forKey:key];
     [arrayController rearrangeObjects];//exception thrown here
}

MyNode implementation:

- (void)notifySelector:(NSNotification *)notify{
     //Getted after some processing finished
     id someValue = [notify.userInfo objectForKey:@"observedKey"];
     [delegate updateItem:self WithValue:someValue ForKey:@"observedKey"];
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-23T17:14:18.177

不要那样做。AppKit（`NSArrayController`属于）通常不是线程安全的。相反，用于`-performSelectorOnMainThread:...`更新您的 UI（包括`NSArrayController`）。总是在主线程上进行更新。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-05-02T15:22:53.370

约书亚和丹的解决方案是正确的。您很有可能在后台线程中对模型对象执行操作，然后该线程会触及数组控制器，从而触及表格。

NSTableView 本身不是线程安全的。只需添加“beginUpdates/endUpdates”对就可以暂时避免竞争条件。然而，就像 Fin 指出的那样，出于性能原因进行这对更新可能会很好，但这对崩溃没有帮助。

要查找崩溃的根源，请在代码中添加一些断言 ![NSThread currentThread].mainThread - 特别是在您触摸数组控制器的内容之前的任何地方。这将帮助您隔离问题。或者，继承 NSTableView 并在某个键中添加断言，例如覆盖`-numberOfRows`（在更改时经常调用）和调用 super.

-corbin
AppKit/NSTableView

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-03-21T13:16:35.410

我通过在我的 UI 初始化开始时添加它来解决这个问题

```
[myTableView beginUpdates]; 
```

然后在持久存储完全加载后的最后：

```
[myTableView endUpdates]; 
```

这也使应用程序启动得更好，因为它不必不断地从 MOC 重新加载所有负载。

# multithreading - 在 Windows Phone 7 上等待 WebRequest

> ID：12094895
> 
> 赞同：0
> 
> 时间：2012-08-23T15:15:41.017
> 
> 标签：multithreading, windows-phone-7, httpwebrequest

我正在使用 OAuth2 在 Windows Phone 7 中使用 Google API 做一些工作。

在调用 API 之前，我需要更新访问令牌（如果需要）。

我遇到的问题是等待更新令牌的异步请求完成，然后再继续调用 API。

我已经让它与下面的代码一起工作，但我对它不满意。我正在寻找一种更好的替代方法，而不是在 while 循环中简单地轮询变量。

```
 /// <summary>
    /// Calls the API.
    /// </summary>
    /// <param name="callback">The callback.</param>
    /// <param name="api">The API.</param>
    /// <param name="queryStrings">The query strings.</param>
    public static void CallApi(AsyncCallback callback, string api, Dictionary<string, string> queryStrings = null)
    {
        var uri = new Uri(string.Format("{0}{1}{2}", ApiBaseUrl, api, queryStrings.ToQueryString()));

        if (accessTokenExpires < DateTime.Now.AddSeconds(300))
        {
            RefreshAccessToken();
        }

        // Start new thread so we don't lock up the UI thread while waiting
        var thread = new Thread(
            () =>
                {
                    // Wait for the access token to be updated
                    while (accessTokenExpires < DateTime.Now.AddSeconds(300)) ;

                    var request = WebRequest.CreateHttp(uri);
                    request.Headers["Authorization"] = string.Format("OAuth {0}", accessToken);
                    request.BeginGetResponse(callback, request);
                });

        thread.Start();
    }

    /// <summary>
    /// Refresh the access token.
    /// </summary>
    private static void RefreshAccessToken()
    {
        if (Config.GoogleOAuthRefreshToken == string.Empty)
        {
            // TODO - Present the OAuth popup to the user
            return;
        }

        var uri = new Uri(GetTokenUrl);

        var request = WebRequest.CreateHttp(uri);
        request.Method = "POST";
        request.ContentType = "application/x-www-form-urlencoded";

        request.BeginGetRequestStream(RefreshToken_GetRequest, request);
    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-23T18:02:14.947

我认为你已经开始了你需要的东西，但只需要充分利用 WebRequest 的异步特性。这是如何做到这一点的示例

```
public static void CallApi(AsyncCallback callback, string api, Dictionary<string, string> queryStrings = null)
{
    var uri = new Uri(string.Format("{0}{1}{2}", ApiBaseUrl, api, queryStrings.ToQueryString()));

    RefreshAccessToken(() =>
        {
            var request = WebRequest.CreateHttp(uri);
            request.Headers["Authorization"] = string.Format("OAuth {0}", accessToken);
            request.BeginGetResponse(callback, request);
        });
}

private static void RefreshAccessToken(Action callback)
{
    if(IsTokenExpired() == false)
    {
        if(callback != null) callback();
        return;
    }
    if (Config.GoogleOAuthRefreshToken == string.Empty)
    {
        // TODO - Present the OAuth popup to the user
        return;
    }

    var uri = new Uri(GetTokenUrl);

    var request = WebRequest.CreateHttp(uri);
    request.Method = "POST";
    request.ContentType = "application/x-www-form-urlencoded";

    request.BeginGetRequestStream(asyncResult =>
    {
        // Do anything for POST
        request.BeginGetResponse(asyncResult2 =>
        {
            // Read stream, and process
            if(callback != null) callback();
        }, null);
    }, request);
}

private bool IsTokenExpired()
{
    return accessTokenExpires < DateTime.Now.AddSeconds(300);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-23T16:52:18.373

您是否考虑过使用[Async-CTP](http://msdn.microsoft.com/en-us/vstudio/async.aspx)或 VS 2012 将此逻辑转换为 Task.Delay 调用？它甚至可能对您的网络请求代码有所帮助。

# foursquare - Foursquare 场地变化的历史数据

> ID：12094896
> 
> 赞同：0
> 
> 时间：2012-08-23T15:15:42.157
> 
> 标签：foursquare

有没有人知道从 Foursquare 场地获取历史位置信息的方法。问题是，如果我查看用户签入历史并且其中一个场所已更改地址，则无法通过 api 获取旧地址/位置。对于基于该数据构建的应用程序，这意味着当一个场所在移动之前移动所有签到时，将获得错误的场所信息。

有没有人想出一种方法来获取该信息（如果用户在更改之前已经验证了我们的服务，因为我们已经存储了它，但是在我们无法访问它之后，这显然不是问题）？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-23T20:52:04.547

无法访问旧的位置信息，但信息只会随着时间的推移而变得更好。如果您遇到场地的位置信息变得不太准确的情况，您应该标记该场地，超级用户社区将尝试修复它。

# css - 更改 IE 中的选项文本颜色

> ID：12094897
> 
> 赞同：0
> 
> 时间：2012-08-23T15:15:43.900
> 
> 标签：css, internet-explorer, select, colors

我试图在选择输入选项中强制文本颜色，它适用于世界上的每个浏览器，但客人什么，是的，IE 仍然不关心样式表中的颜色。

你们知道如何强制 IE 使我的文本颜色像我希望的那样吗

这就是我的期望

![在此处输入图像描述](../Images/ca8246d92e4a54ed6d833b2a13b9e0b8.png)

这就是 IE 所做的

![在此处输入图像描述](../Images/0ab12343caf9669b78ece5bf4f6794e6.png)

**CSS**

```
#footer .findProduct select{background: transparent; border:0; color:#fff!important; font-weight:700; text-transform: uppercase;  font-family: 'Crimson Text',serif; }
#footer .findProduct select option{color:#000!important; text-transform: uppercase;} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-23T15:40:18.250

使用 css 样式化选择只是一个坏主意。在所有浏览器中都无法正确设置它们的样式。你所能做的就是用js模仿选择框。有可用的框架和插件。基本上他们会隐藏选择并用列表或类似选择的东西替换它们，您可以完全设置样式。在后台，他们将更新与列表同步的选择，以使您的表单在提交时仍然有效。您也可以自己做类似的事情（最好使用 jQuery），如果您对它有点熟悉，应该不会很难。

我猜您在屏幕截图中使用的自定义箭头按钮不起作用...

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-08-23T15:19:03.440

您的 css 规则相互矛盾，将它们更改为：

```
#footer .findProduct select{background: transparent; color: #fff; border:0; font-weight:700; text-transform: uppercase;  font-family: 'Crimson Text',serif; }
#footer .findProduct select option{color:#000 !important; text-transform: uppercase;} 
```

演示：http: [//jsfiddle.net/dan_barzilay/tJZek/](http://jsfiddle.net/dan_barzilay/tJZek/)

# r - 使用预测包中的 TBATS 模型回归量

> ID：12094900
> 
> 赞同：1
> 
> 时间：2012-08-23T15:15:50.113
> 
> 标签：r, forecasting

有谁知道是否可以在 R`forecast`包中使用带有 TBATS 模型的回归器？

从帮助文件看来，您可以为 ARMA 添加其他参数，并且由于 ARIMA 采用回归量（即`xreg = X`），我想知道如果我`using.arma.erros=TRUE`在 TBATS 模型中使用 ARMA（），是否可以将回归量传递给 TBATS。

我仍然是一个相当新的 R 用途，所以我非常感谢任何指导。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-23T23:47:16.483

不，那是不可能的。该`xreg`参数将在为误差选择 ARMA 模型的顺序时使用，但在进行估计和预测时将被忽略。

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2015-10-30T13:39:14.727

我认为 TBATS 不接受回归量，但只接受一个回归量，那就是时间，可能是几天、几小时、几年等

# sqlite - Flash Builder Mobile 4.5 - 使用数据 sqlite 填充列表

> ID：12094903
> 
> 赞同：0
> 
> 时间：2012-08-23T15:16:10.223
> 
> 标签：sqlite, flash-builder

`

```
<fx:Script>
    <![CDATA[
        import mx.collections.ArrayCollection;
        import spark.events.ViewNavigatorEvent;     

        protected var sqlConnection:SQLConnection;

        protected function view1_viewActivateHandler(event:ViewNavigatorEvent):void
        {
            sqlConnection = new SQLConnection();
            sqlConnection.open(File.applicationStorageDirectory.resolvePath("euro.db"));
            getAllGiberish();
        }

        protected function getAllGiberish():void
        {
            var stmt:SQLStatement = new SQLStatement();
            stmt.sqlConnection = sqlConnection;
            stmt.text = "SELECT esteso FROM generale GROUP BY nazione, esteso HAVING nazione = 'Austria'";
            stmt.execute();
            list.dataProvider = new ArrayCollection(stmt.getResult().data);         
        }       

    ]]>

</fx:Script>

<s:List id="list" x="4" y="5" width="306" height="274" /> 
```

因为我没有在列表中得到任何数据？我做错了什么？我在 generale 表 id、valore、moneta、esteso 中有 4 个字段

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-16T15:10:29.033

我不是专家，但我首先认为 SQL 语句可能格式错误，我认为它用于聚合函数，所以会

```
SELECT esteso FROM generale WHERE nazione = 'Austria' GROUP BY nazione, esteso; 
```

虽然我刚刚注意到这是从 8 月 23 日开始的，但您可能已经对其进行了排序。

杰克

# ruby - 猴子补丁类方 法

> ID：12094905
> 
> 赞同：1
> 
> 时间：2012-08-23T15:16:14.557
> 
> 标签：ruby, class, monkeypatching

我正在尝试在[ActiveShipping UPS 类](https://github.com/Shopify/active_shipping/blob/master/lib/active_shipping/shipping/carriers/ups.rb)中进行一些猴子修补。

我需要添加一个类级别的方法（以 开头`.self`），所以这就是我想要做的：

```
module ActiveMerchant
  module Shipping
    class UPS < Carrier
      def self.process_request(receiver, sender, packages, options = {})
        # some code
      end

      def regular_method
        "foobar"
      end
    end
  end
end 
```

不幸的是，当我尝试使用它时：

```
 ActiveMerchant::Shipping::UPS.process_request(receiver etc) 
```

我收到一个错误：

```
NoMethodError: undefined method `process_request' for ActiveMerchant::Shipping::UPS:Class
        from (irb):6
        from C:/Ruby19/bin/irb.bat:19:in `<main>' 
```

`process_request`原始类中没有命名类方法。

在 gem 中提供的原始 UPS 类中，定义了一种静态方法`self.retry_safe = true` ，我可以毫无错误地使用它。

我也可以`regular_method`在创建 UPS 类的实例后使用。

**提供了更多详细信息：**
我正在使用 Rails 2.3 ( :-( ) 和 Ruby 1.9.2。我对环境没有影响。

猴子补丁代码在下`plugins/my_plugin/lib/active_shipping/ext/carriers/ups.rb`

在 /active_shipping 我有一个名为 extensions.rb 的文件，其中有：

```
require 'active_shipping'

require_relative 'ext/carriers'
require_relative 'ext/carriers/ups' 
```

它处理正确加载所有内容（我想基于`regular_method`我问题中第一块代码的行为）。

我尝试在我的一个控制器中调用 process_request。这部分有点棘手，因为我正在使用这样的东西：

`MyModel.courier_service.process_request(parameters)`

其中`courier_service`, 在这种情况下持有`ActiveMerchant::Shipping::UPS`类。

我仍然是 Ruby 的新手，不知道我应该提供什么样的细节。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-04T08:39:09.187

也许你想用另一种方式来做

文件patch_classes.rb：

```
module ActiveMerchant展开
  模块运输
    模块类方法
      def self.process_request(receiver, sender, packages, options = {})
        # 一些代码
      结尾
    结尾

    模块实例方法
      def 常规方法
        “美食吧”
      结尾
    结尾

    def self.included（接收者）
      receiver.extend 类方法
      receiver.send :include, InstanceMethods
    结尾
  结尾
结尾

```

然后你必须加载你的类“ActiveMerchant::Shipping::UPS”，然后你可以通过你的方法将你的方法附加到你的类

```
Rails.configuration.to_prepare 做
  require_dependency [[ActiveMerchant::Shipping::UPS 的文件]]
  需要'patch_classes'）
  ActiveMerchant::Shipping::UPS.send(:include, ::ActiveMerchantExpand::Shipping)
结尾

```

这是来自rails插件的写作，我希望这会有所帮助。

关于 tingel2k

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-23T15:42:30.417

您是否明确`require`提交了猴子补丁？如果您只是将它放在您的应用程序或 lib 路径下而不需要，它不会加载，因为常量`ActiveMerchant::Shipping::UPS`是在 gem 中定义的并且它不会触发依赖解析机制。

# ruby-on-rails - Rails 与委托方法的关联。AR 可能的错误？

> ID：12094910
> 
> 赞同：1
> 
> 时间：2012-08-23T15:16:24.367
> 
> 标签：ruby-on-rails, activerecord, polymorphic-associations

[将此问题](https://stackoverflow.com/questions/12011941/rails-nested-delegate-attributes-not-being-updated)隔离到它自己的 rails 应用程序中：并添加了一个[git repo](https://github.com/ScotterC/delegate-association-rails-bug)作为示例

模块：

```
module SeoMeta

  def self.included(base)
    base.extend(ClassMethods)
    base.send :include, InstanceMethods
  end

  module ClassMethods

    def is_seo_meta

      has_one :meta,
        class_name: SeoMetum,
        as:         :metumable,
        dependent:  :destroy,
        autosave:   true

      delegate :browser_title,     :meta_description, :meta_author,
               :meta_keywords,     :browser_title=,   :meta_keywords=,
               :meta_description=, :meta_author=,
               to: :meta

      after_save :save_meta_tags!

      attr_accessible :browser_title,    :meta_keywords,
                      :meta_description, :meta_author

    end

  end

  module InstanceMethods

    class << self
      def included(base)
        base.module_eval do

          alias :original_meta_method :meta

        end
      end
    end

    def meta
      find_meta || build_meta
    end

    def find_meta
      @meta ||= ::SeoMetum.where(metumable_type: self.class.name, metumable_id: self.id).first
    end

    def build_meta
      @meta ||= ::SeoMetum.new(metumable_type: self.class.name, metumable_id: self.id)
    end  

    def save_meta_tags!
      meta.metumable_id ||= self.id
      meta.save
    end

  end
end 
```

楷模：

```
class User < ActiveRecord::Base
  include SeoMeta
  is_seo_meta

  has_many :collections
  accepts_nested_attributes_for :collections

  def collection
    default_collection = self.collections.first
    default_collection ||= self.collections.create
    default_collection
  end
end

class Collection < ActiveRecord::Base
  include SeoMeta
  is_seo_meta
  belongs_to :user

end

class SeoMetum < ActiveRecord::Base
  attr_accessible :browser_title, :meta_author, :meta_description, :meta_keywords,
                  :metumable, :metumable_id, :metumable_type
  belongs_to :metumable, polymorphic: true
end 
```

Rspec 测试：

```
 context "user and collection" do
    context 'responds to' do
      it 'meta_description' do
        user.collection.respond_to?(:meta_description).should be_true
      end

      it 'browser_title' do
        user.collection.respond_to?(:browser_title).should be_true
      end
    end

    context 'individual allows us to assign to' do
      it 'meta_description' do
        the_collection = user.collection
        the_collection.meta_description = 'This is my description of the user for search results.'
        the_collection.meta_description.should == 'This is my description of the user for search results.'
      end

      it 'browser_title' do
        the_collection = user.collection
        the_collection.browser_title = 'An awesome browser title for SEO'
        the_collection.browser_title.should == 'An awesome browser title for SEO'
      end
    end

    context 'allows us to assign to' do
      it 'meta_description' do
        user.collection.meta_description = 'This is my description of the user for search results.'
        user.collection.meta_description.should == 'This is my description of the user for search results.'
      end

      it 'browser_title' do
        user.collection.browser_title = 'An awesome browser title for SEO'
        user.collection.browser_title.should == 'An awesome browser title for SEO'
      end
    end

    context 'allows us to update' do
      it 'meta_description' do
        user.collection.meta_description = 'This is my description of the user for search results.'
        user.collection.save

        user.collection.reload
        user.collection.meta_description.should == 'This is my description of the user for search results.'
      end

      it 'browser_title' do
        user.collection.browser_title = 'An awesome browser title for SEO'
        user.collection.save

        user.collection.reload
        user.collection.browser_title.should == 'An awesome browser title for SEO'
      end
    end
  end 
```

前四个测试通过，后四个失败。我认为这可能是 Rails 多态关联的错误，但我不确定如何进一步隔离它。对我的模块设计的评论也很受欢迎。

最好的，斯科特

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-23T17:39:29.290

您的代码中的问题出在这个地方：

```
class User
  #Other stuff

  #HERE!
  def collection
    default_collection = self.collections.first
    default_collection ||= self.collections.create
    default_collection
  end
end 
```

每次调用`collection`方法时，都会在数据库中查找第一个集合。因此，即使您`user.collection.meta_description = "abc"`稍后在调用`user.collection`它时设置了一些值，它也不是同一个集合对象，因为它是从数据库中进行的新查找。因此，所有未保存到数据库的属性都消失了。您可以通过查看日志来看到这一点 - 每次调用`user.collection`时都会对 db 进行新的访问，并且每次调用`user.collection.object_id`时都会得到不同的值。

您可以通过执行类似的操作来修复它

```
def collection
  return @collection if @collection
  default_collection = self.collections.first
  default_collection ||= self.collections.create
  @collection = default_collection
end 
```

# ruby - 在 Camping 中清理用户输入

> ID：12094912
> 
> 赞同：0
> 
> 时间：2012-08-23T15:16:27.993
> 
> 标签：ruby, web-applications, camping

在 Camping 中，如何清理用户输入？

```
@input.user 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-29T11:29:00.090

你说的“消毒”是什么意思？

如果您使用 ActiveRecord 插入/查询数据，则应该为您处理清理：

```
class UserX
  def get
    @user = User.where(:name => @input.name).first
  end
end 
```

如果您正在考虑对 HTML 进行清理，Markaby 应该会为您处理：

```
def user
  h1 @input.name     # This is automatically escaped
  h1 { @input.name } # This is not escaped
end 
```

# excel - 使用多个条件并基于顺序查找值

> ID：12094913
> 
> 赞同：0
> 
> 时间：2012-08-23T15:16:28.757
> 
> 标签：excel, lookup

我有一个数据表（在这种情况下是房产租金），并且希望根据租金仅返回前三名租户。所有属性数据都保存在同一张表中，每个属性都有一个唯一的引用，可以用作查找值。

输入

```
Property    Property name Tenant code Tenant    Rent
bb107       Property 1    t0000610    Tenant 1  115,000.00
bb107       Property 1    t0000515    Tenant 2  120,000.00
bb107       Property 1    t0000630    Tenant 3  125,000.00
bb107       Property 1    t0000565    Tenant 4  130,000.00
bb107       Property 1    t0000579    Tenant 5  145,000.00
bb110       Property 2    t0000520    Tenant 6  220,000.00
bb110       Property 2    t0000604    Tenant 7  215,000.00
bb110       Property 2    t0000588    Tenant 8  230,000.00
bb110       Property 2    t0000586    Tenant 9  185,000.00
bb110       Property 2    t0000611    Tenant 10 250,000.00
bb110       Property 2    t0000568    Tenant 11 235,000.00
bb115       Property 3    t0000562    Tenant 12 85,000.00
bb115       Property 3    t0000631    Tenant 13 65,000.00
bb115       Property 3    t0000532    Tenant 14 70,000.00
bb115       Property 3    t0000589    Tenant 15 72,500.00
bb115       Property 3    t0000556    Tenant 16 78,750.00
bb115       Property 3    t0000613    Tenant 17 55,000.00
bb115       Property 3    t0000524    Tenant 18 67,500.00 
```

有人可以告诉我我应该在我的工作表上使用的论点 a) 引用我的查找表中仅与我的特定属性相关的单元格。我有 mnay 属性（100+）并且不能为每个属性定义一个名称。b) 如何返回前 3 个条目的租户引用。一旦我知道前 3 个租户，我总是可以查找其他值。

输出应该是这样的：

物业 1

```
bb107   Property 1  t0000579    Tenant 5    145,000.00
bb107   Property 1  t0000565    Tenant 4    130,000.00
bb107   Property 1  t0000630    Tenant 3    125,000.00 
```

属性 2

```
bb110   Property 2  t0000611    Tenant 10   250,000.00
bb110   Property 2  t0000568    Tenant 11   235,000.00
bb110   Property 2  t0000588    Tenant 8    230,000.00 
```

财产 3

```
bb115   Property 3  t0000562    Tenant 12   85,000.00
bb115   Property 3  t0000556    Tenant 16   78,750.00
bb115   Property 3  t0000589    Tenant 15   72,500.00 
```

另一个问题是，如果我给一些条目一个特定的参考，我怎么能只把这些条目拉到我的输出页面上。我正在努力为 excel 提供多个用于输出的标准（即查找属性 1，然后查找最高值租金，然后查找第二高（或手动输入的代码）等....

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-23T16:57:21.963

*   您可以在第二张工作表中使用数据透视表，其中包含字段**属性、属性名称、租户代码、**行级别的租户和数据区域**中的租金总和。**
*   由于您在行级别拥有所有关键字段，因此没有聚合
*   在最低级别（**租户**）上，您将高级字段选项更改为“**按租金总和降序排序**”和“ **Top10 AutoShow On** ”/显示**前 3 个**/使用字段“**租金总和**”
*   现在您过滤所需的租户名称voi-la ...应该是它

# cuda - 如何将 NVidia Visual Profiler 与 OpenCL（在 Linux 上）一起使用？

> ID：12094917
> 
> 赞同：5
> 
> 时间：2012-08-23T15:16:43.743
> 
> 标签：cuda, opencl

我正在尝试使用 nvvp 来分析 opencl 内核。我正在运行带有 GTX 580 的 ubuntu 12.04 64b 并已验证 CUDA 工具包工作正常（我可以运行和分析 cuda 代码）。尝试调试我的 opencl 代码时，我得到：
`Warning: No CUDA application was profiled, exiting`
任何提示？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2016-11-03T04:45:05.343

Nvidia 的视觉分析器 (nvvp) 可用于分析 OpenCL 程序，但它比直接在 CUDA 中进行分析更痛苦。

[布里斯托大学的Simon McIntosh 的](https://twitter.com/simonmcs)高性能计算小组提出了最初的解决方案（[这里](http://uob-hpc.github.io/2015/05/27/nvvp-import-opencl.html)），我可以验证它是否有效。

我将总结基础知识：

*   首先，必须设置环境变量 COMPUTE_PROFILE，这是通过`COMPUTE_PROFILE=1`
*   其次，`COMPUTE_PROFILE_CONFIG`必须提供一个，我使用的样本（称为 nvvp.cfg）包含：

    ```
    profilelogformat CSV
    streamid
    gpustarttimestamp
    gpuendtimestamp 
    ```

*   接下来执行实际的分析，在这种情况下，我将分析一个名为 HuffFramework 的 OpenCL 应用程序，使用：

    ```
    COMPUTE_PROFILE=1 COMPUTE_PROFILE_CONFIG=nvvp.cfg ./HuffFramework 
    ```

*   然后这会生成一系列 opencl_profile_*.log 文件，其中 * 是线程数。

*   nvvp 无法加载这些日志文件，因为所有内核函数符号都有前导`OPENCL_`而不是预期的`CUDA_`，因此用快速脚本替换这些符号，如下所示：

    ```
    sed 's/OPENCL_/CUDA_/g' opencl_profile_0.log > cuda_profile_0.log 
    ```

*   最后 cuda_profile_0.log 现在可以通过 nvvp 导入，通过启动 nvvp 并转到 File->Import...->Command-line Profiler，将其指向 cuda_profile_0.log 就可以了！

[![在此处输入图像描述](../Images/c20a9081a7d67ec8942f0fbf3ac35ce5.png)](https://i.stack.imgur.com/csqfA.png)

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-08-23T15:47:56.077

nvvp 只能分析 CUDA 应用程序。

# java - 在我的 Java 应用程序中集成 IM/聊天功能

> ID：12094921
> 
> 赞同：2
> 
> 时间：2012-08-23T15:16:54.810
> 
> 标签：java, xmpp, chat, smack, msn

我有兴趣将聊天功能作为应用程序的一部分。
我感兴趣的是：

1.  我想让我的应用程序实例充当*对等*点，即我不希望也编写一些服务器模块来处理消息通信
2.  我希望它能够与现有的 IM 帐户一起使用。例如，某人可以使用他的`MSN`帐户或他可能拥有的任何其他客户帐户使用它，就像他将使用的`MSN Messenger`一样`Tor client`等

我搜索了一下，发现有一些 Java MSN 库可用，还有一些其他支持 IM 的库，例如`SMACK`等`JABBER`（不确定那是什么），但我不确定后者是否可以用于`2`我提到的选项。
我的偏好`2`是因为我假设用户可以通过这种方式进行聊天，无论他身在何处，而在其他解决方案中，我假设需要一些网络基础设施，例如具有可路由 IP 等。我在这里错了吗？
有人对 Java IM 库有经验吗？例如是否有任何问题，例如不同的 MSN 版本或其他什么？（不知道协议是否经常更改对我来说很重要）。
什么是我的要求的最佳路径/选项？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-24T15:02:30.123

我会采用基于 Jabber 的方法。Jabber（也称为 XMPP）是一个开放协议，有很多实现，支持[通过传输连接到其他 IM 服务](http://en.wikipedia.org/wiki/Extensible_Messaging_and_Presence_Protocol#Connecting_to_other_protocols)。这样您就不必处理对 Windows Live 协议的更改。您可以依靠开源社区为您提供该功能。

编辑：看来，[Windows Live 甚至允许本地 XMPP 访问](http://windowsteamblog.com/windows_live/b/windowslive/archive/2011/12/14/anyone-can-build-a-windows-live-messenger-client-with-open-standards-access-via-xmpp.aspx)。

如果您愿意，您可以随时设置自己的 Jabber 服务器，以提供与现有用户帐户的更紧密集成。在这种情况下，您不需要编写整个服务器。

# css - z-index IE8 不起作用，而在 FF 中它是

> ID：12094924
> 
> 赞同：0
> 
> 时间：2012-08-23T15:17:09.417
> 
> 标签：css, internet-explorer-8, z-index

我遇到了一个与 IE8 中的 z-index 相关的问题。

这是小提琴：

[http://fiddle.jshell.net/uFPBz/show/](http://fiddle.jshell.net/uFPBz/show/)

第一个问题是我想向您展示的问题正在处理中，有一些我看不到的东西正在修复它。

但是，如果我保存整个小提琴页面并在 IE8 中打开，问题又回来了。所以，我喜欢WTF？

当您将鼠标悬停在预览图像上时，会显示一个更大的图像。但是这个 LARGER PREVIEW 的底部隐藏在鼠标悬停框下方的 BOX 小图像后面。

这只发生在 IE8 中，largerPreviewBox 的 z-index 为 3，而 ImgThumbBox 的 z-index 为 2。

阅读此内容：[http](http://caffeineoncode.com/2010/07/the-internet-explorer-z-index-bug/) ://caffeineoncode.com/2010/07/the-internet-explorer-z-index-bug/和这个[IE 6 & IE 7 Z-Index 问题](https://stackoverflow.com/questions/672228/ie-6-ie-7-z-index-problem/3998006#3998006)我认为这些 z-index 属性无关紧要，因为它们在其他级别。但我不知道如何解决它。

如果您下载HTML并自己查看会更好：

[http://www.filefactory.com/file/417sp9zi1lhp/n/HTML_Error_tar_gz](http://www.filefactory.com/file/417sp9zi1lhp/n/HTML_Error_tar_gz)

非常感谢！

编辑：

问题图片：

![IE 8 z-index 出错](../Images/5acbde6873a29f296713fc141a7f5d01.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-29T13:22:15.863

更新文档类型

它会正常工作。

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"> 
```

我在ie8上测试过

否则您可以按 f12 并检查您的浏览器模式和文档模式:-)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-27T17:53:53.237

您只能使用 CSS 和更少的 HTML 行来完成您的任务。请参阅[JSFiddle](http://jsfiddle.net/rFayX/)。

在您的情况下，HTML 是：

```
<div class="container">         
  <img src="imagenes/thumb.jpg" alt="Miniatura">   
</div> 
```

你可以使用这个CSS：

```
div.container{
  position:relative; 
  display:inline-block; 
  float:left;    
  width: 122px;
  height: 160px; }    
div.container > img {
  position:relative;
  width: 122px;
  height: 160px;    
  display:block;}

div.container > img:hover {
  position: absolute;
  left: 50%;
  margin-left: -150px;
  top: 50%;
  margin-top: -175px;

  width: 300px;
  height: 350px;
  border:1px solid black;
  //use other styles....
} 
```

# c# - 在 WCF 服务构造函数中发送参数 - 错误

> ID：12094927
> 
> 赞同：2
> 
> 时间：2012-08-23T15:17:11.047
> 
> 标签：c#, wcf, constructor, initialization

我试图在创建过程中将一个对象传递给 WCF 服务 - 'MasOperationsService'。但我遇到一个错误，无法弄清楚原因。

我正在[从这里尝试这段代码](http://social.msdn.microsoft.com/Forums/en-US/wcf/thread/8f18aed8-8e34-48ea-b8be-6c29ac3b4f41)......

```
[ServiceBehavior(InstanceContextMode = InstanceContextMode.Single)] 
public class MasOperationsService : IMasOperations
{
    public MasOperationsService()
        : this("INVALID")  
    {  
        throw new InvalidOperationException("This should never be called");  
    }  

    public MasOperationsService(string name)
    {

    }

    //public CoAuthorSearchResult ExtractCoAuthorsFromAuthor(long AuthorCellId, uint LevelsToExtract)
    //{
    //    //throw new NotImplementedException("Running This At Proxy, This should now query Slaves!!");
    //    return new CoAuthorSearchResult();
    //}
}

public class MyInstanceProvider : IInstanceProvider
{
    public object GetInstance(InstanceContext instanceContext, Message message)
    {
        string name = message.Headers.GetHeader<string>("Name", "http://my.namespace");
        if (name != null)
        {
            return new MasOperationsService("Service " + name);
        }
        else
        {
            return new MasOperationsService("Service with no name");
        }
    }
    public object GetInstance(InstanceContext instanceContext)
    {
        return new MasOperationsService("Service with no name");
    }
    public void ReleaseInstance(InstanceContext instanceContext, object instance)
    {
    }
}
public class MyServiceBehavior : IServiceBehavior
{
    MyInstanceProvider myProvider = new MyInstanceProvider();
    public void AddBindingParameters(ServiceDescription serviceDescription, ServiceHostBase serviceHostBase, Collection<ServiceEndpoint> endpoints, BindingParameterCollection bindingParameters) { }
    public void ApplyDispatchBehavior(ServiceDescription serviceDescription, ServiceHostBase serviceHostBase)
    {
        foreach (ChannelDispatcher cd in serviceHostBase.ChannelDispatchers)
        {
            foreach (EndpointDispatcher ed in cd.Endpoints)
            {
                ed.DispatchRuntime.InstanceProvider = this.myProvider;
            }
        }
    }
    public void Validate(ServiceDescription serviceDescription, ServiceHostBase serviceHostBase) { }
} 
```

MasOperationsService() 是服务类。客户端代码是 LaunchWcfService()

```
public void LaunchWcfService()
    {
        string baseAddress = "http://localhost:8733/Design_Time_Addresses/MASService/Service1";
        ServiceHost host = new ServiceHost(typeof(MasOperationsService), new Uri(baseAddress));
        host.AddServiceEndpoint(typeof(IMasOperations), GetBinding(), "");
        host.Description.Behaviors.Add(new MyServiceBehavior());
        host.Open();
        Console.WriteLine("Host opened");

        ChannelFactory<IMasOperations> factory = new ChannelFactory<IMasOperations>(GetBinding(), new EndpointAddress(baseAddress));
        IMasOperations proxy = factory.CreateChannel();

        using (OperationContextScope scope = new OperationContextScope((IContextChannel)proxy))
        {
            OperationContext.Current.OutgoingMessageHeaders.Add(MessageHeader.CreateHeader("Name", "http://my.namespace", "Name 1"));
            //Console.WriteLine(proxy.Hello("foo"));
            OperationContext.Current.OutgoingMessageHeaders.RemoveAll("Name", "http://my.namespace");
            OperationContext.Current.OutgoingMessageHeaders.Add(MessageHeader.CreateHeader("Name", "http://my.namespace", "Name 2"));
            //Console.WriteLine(proxy.Hello("bar"));
        }

        ((IClientChannel)proxy).Close();
        factory.Close();

        Console.Write("Press ENTER to close the host");
        Console.ReadLine();
        host.Close();  
    }

    static Binding GetBinding()
    {
        BasicHttpBinding result = new BasicHttpBinding();
        return result;
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-23T16:27:33.233

你的问题是你设置了`InstanceContextMode = InstanceContextMode.Single`. 此模式指定在所有服务请求中使用单个服务实例。在这种情况下，WCF 框架会在您实例化 ServiceHost 时实例化您的服务的该单例实例，甚至在您尝试插入您的自定义 InstanceProvider 并为所有后续请求使用此相同实例之前。

我不确定您要做什么，但如果所有这一切的最终目的是让您的自定义标头的值在任何服务实现方法中都可用，那么您最好为方法输入参数使用基类使用 MessageContract 而不是 Datacontract。

```
[ServiceContract]
public interface IMasOperations
{
    [OperationContract]
    CoAuthorSearchResult ExtractCoAuthorsFromAuthor(ExtractCoAuthorsFromAuthorRequest request);
}

[ServiceBehavior(InstanceContextMode = InstanceContextMode.Single)]
public class MasOperationsService : IMasOperations
{    
    public CoAuthorSearchResult  ExtractCoAuthorsFromAuthor(ExtractCoAuthorsFromAuthorRequest request)
    {
        Console.WriteLine("Name header accessed inside WS implementation though request.Name. Value = {0}.", request.Name);
        return new CoAuthorSearchResult();
    }
}

[MessageContract]
public class BaseRequest
{
    [MessageHeader]
    public string Name { get; set; }
}

[MessageContract]
public class ExtractCoAuthorsFromAuthorRequest : BaseRequest
{
    [MessageBodyMember]
     public long AuthorCellId { get; set; }

    [MessageBodyMember]
    public uint LevelsToExtract { get; set; }
}

[MessageContract]
public class CoAuthorSearchResult { }

public class Program
{
    static readonly Binding _binding = new BasicHttpBinding();

    public static void Main(string[] args)
    {
        string baseAddress = "http://localhost:8733/Design_Time_Addresses/MASService/Service1";
        ServiceHost host = new ServiceHost(typeof(MasOperationsService), new Uri(baseAddress));
        host.AddServiceEndpoint(typeof(IMasOperations), _binding, string.Empty);
        host.Open();
        Console.WriteLine("Host opened");

        ChannelFactory<IMasOperations> factory = new ChannelFactory<IMasOperations>(_binding, new EndpointAddress(baseAddress));
        IMasOperations channel = factory.CreateChannel();

        CoAuthorSearchResult result = channel.ExtractCoAuthorsFromAuthor(new ExtractCoAuthorsFromAuthorRequest
        {
            Name = "http://my.namespace",
            AuthorCellId = 0,
            LevelsToExtract = 1,
        });

        ICommunicationObject o = channel as ICommunicationObject;
        if (o != null)
        {
            if (o.State == CommunicationState.Opened)
            {
                o.Close();
            }
            else
            {
                o.Abort();
            }
        }

        factory.Close();

        Console.Write("Press ENTER to close the host");
        Console.ReadLine();
        host.Close();  
    }
} 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-08-23T15:23:03.137

默认情况下，WCF 使用无参数构造函数。为了使用另一个构造函数，您应该实现`IInstanceProvider`接口。

你可以参考下面的问题。

[如何将值传递给我的 wcf 服务的构造函数？](https://stackoverflow.com/questions/2454850/how-do-i-pass-values-to-the-constructor-on-my-wcf-service/2455039#2455039)

# asp.net-mvc - 路由不起作用 - URL 中的 ASP.NET MVC 3 本地化语言环境

> ID：12094929
> 
> 赞同：0
> 
> 时间：2012-08-23T15:17:16.773
> 
> 标签：asp.net-mvc, asp.net-mvc-3, localization, internationalization, routes

我正在根据路由数据本地化我的 MVC3 站点。例如，`http://domain/fr`应该以法语显示该站点，并且`http://domain`应该默认为英语……以下是我在 Global.ascx 中注册我的路线的方式。

我的问题是这`http://domain/fr/Home/Index`会起作用，但`http://domain/Home/Index`会显示资源未找到错误，并且通过调查它告诉我路由表正在将“Home”映射到 {lang}

我错过了什么？

```
public static void RegisterRoutes(RouteCollection routes)
    {
        routes.IgnoreRoute("{resource}.axd/{*pathInfo}");

        routes.IgnoreRoute("favicon.ico");

        routes.MapRoute(
            "LogOn", // Route name
            "Account/{action}", // URL with parameters
            new { controller = "Account", action = "LogOn" } // Parameter defaults
        );

        routes.MapRoute(
            "Localization", // Route name
            "{lang}/{controller}/{action}", // URL with parameters
            new { UrlParameter.Optional, controller = "Home", action = "Index"} // Parameter defaults
        );

        routes.MapRoute(
            "Default", // Route name
            "{controller}/{action}", // URL with parameters
            new { controller = "Home", action = "Index"} // Parameter defaults
        );

    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-23T15:29:15.183

```
routes.MapRoute(
            "Default", // Route name
            "{controller}/{action}", // URL with parameters
            new { controller = "Home", action = "Index"}, // Parameter defaults
            new { controller = "[a-zA-Z]{3,}" } //regexp constraint on controller name
        );

routes.MapRoute(
            "Localization", // Route name
            "{lang}/{controller}/{action}", // URL with parameters
            new { UrlParameter.Optional, controller = "Home", action = "Index"} // Parameter defaults
        ); 
```

应该可以解决问题，前提是您的所有控制器名称都超过 2 个字符 :)

# responsive-design - 现有网站的响应式设计

> ID：12094931
> 
> 赞同：1
> 
> 时间：2012-08-23T15:17:19.153
> 
> 标签：responsive-design

从现有网站创建移动/平板电脑网站的最佳做法是什么？

我一直在研究响应式网页设计，但似乎我需要从头开始重新创建该网站，因为该网站的标签和设计都很糟糕。

我正在考虑为使用响应式设计的移动/平板电脑创建一个单独的站点，但显示旧站点供人们在台式机上浏览。

你认为最好的解决方案是什么？你有过响应式网页设计的好/坏经历吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-23T15:25:17.033

我[建议](http://foundation.zurb.com)哪个是 RWD（响应式网页设计）的一个很好的框架。它支持从手机到宽屏平板电脑。这是一个关于框架[的案例研究。](http://www.flite.com/)

# google-docs - 将alternateLink(/edit) 更改为embedLink(/preview)

> ID：12094932
> 
> 赞同：0
> 
> 时间：2012-08-23T15:17:23.593
> 
> 标签：google-docs, google-drive-api

根据[https://developers.google.com/drive/v2/reference/files](https://developers.google.com/drive/v2/reference/files)（文件），我希望使用**embedLink**通过 IFrame 在网页中显示文件。

embedLink 似乎只适用于某些文件类型，主要是 Google Docs 格式和视频；格式为[https://docs.google.com/document/d/1EmwDVqmUBAYcjz/](https://docs.google.com/document/d/1EmwDVqmUBAYcjz/)**预览**

备用链接始终可用，格式为[https://docs.google.com/document/d/1EmwDVqmUBAYcjz/](https://docs.google.com/document/d/1EmwDVqmUBAYcjz/)**编辑**

由于 embedLink 值并不总是可用，我可以用 /preview 替换 /edit 并使用它吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-23T16:19:05.307

`alternateLink`当您想在适当的 Google 查看器中打开文件时，可以使用。但是，强烈建议不要手动构建 URL。

相反，您应该始终检索文件元数据，然后使用您需要的特定字段的值。不保证 URL 格式，因此如果您尝试猜测这些链接，您的应用程序可能随时中断。

# java - 为 Windows Azure 生成证书

> ID：12094933
> 
> 赞同：0
> 
> 时间：2012-08-23T15:17:28.067
> 
> 标签：java, azure, certificate

我想生成证书、公钥、私钥和所有其他需要的东西，以便通过 java 代码连接 Windows Azure。我更喜欢只使用 keytool。我怎么做？

Java 代码需要一个带有私钥的 JKS 文件。

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-24T01:45:35.247

Keytool 可以在一定程度上帮助您，但是 Keytool 和 OpenSSL 的组合将为您提供将基于 Java 的应用程序连接到 Windows Azure 所需的一切（管理门户以及启用 SSL 的 Web 应用程序。

请按照文档将[密钥从“keytool”迁移到“OpenSSL”](http://www.herongyang.com/crypto/Migrating_Keys_keytool_to_OpenSSL.html)

1.  使用“keytool”生成私钥和公钥对。
2.  使用“keytool”从 PrivateKeyEntry 导出自签名证书。
3.  使用“keytool”显示证书的详细信息。
4.  使用“OpenSSL”查看“keytool”导出的证书。
5.  编写“DumpKey.java”以从“keytool”密钥库文件中转储密钥对。
6.  使用“OpenSSL”将转储的密钥对从二进制转换为 Base64 编码。
7.  使用“OpenSSL”查看从“keytool”密钥库文件转储和转换的密钥对。

# c# - 如何从 ormlite SaveAll() 调用中获取 id

> ID：12094935
> 
> 赞同：5
> 
> 时间：2012-08-23T15:17:27.987
> 
> 标签：c#, ormlite-servicestack

我正在使用 ORMLite 来保存一些对象，类似于：

```
var graphs = Builder<UserGraph>.CreateListOfSize(10)
            .And(x => x.UserId = User.Id)
            .Build();

Db.SaveAll(graphs); 
```

有没有办法让每个对象的 id 属性自动设置。如果没有，有没有办法获取所有插入对象的 ID？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-09-20T13:53:43.217

您可以将 AutoIncrement 属性添加到您的 Id 属性：

```
[AutoIncrement]
public int UserId{ get; set; } 
```

# c# - 如何在没有焦点的情况下突出显示/选择 wpf 文本框中的文本？

> ID：12094937
> 
> 赞同：22
> 
> 时间：2012-08-23T15:17:35.013
> 
> 标签：c#, wpf, textbox, selectedtext

我想在文本框未聚焦时突出显示 wpf 文本框中的选定文本。在我的应用程序中，我的文本框永远不会获得焦点，并且每个键输入都是手动完成的。

我想知道当文本框没有聚焦时是否有办法突出显示选定的文本？

任何帮助，将不胜感激！

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-10-21T15:30:34.540

您可以使用以下代码来实现您的目的：

```
textBoxToHighlight.Focus();
textBoxToHighlight.Select(0, textBoxToHighlight.Text.Length); 
```

希望这可以帮助。

* * *

## 回答 #2

> 赞同：15
> 
> 时间：2013-03-18T13:45:47.593

另一种选择：

```
textBoxName.SelectAll(); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2020-12-20T17:03:35.193

我真的很喜欢这种选择：

```
textbox.Focus();
textbox.SelectionStart = 0;
textbox.SelectionLength = textbox.Text.Lenght; 
```

# c++ - 如何关闭 std::fixed 并返回默认 C++ 设置

> ID：12094938
> 
> 赞同：8
> 
> 时间：2012-08-23T15:17:35.853
> 
> 标签：c++

我的代码：

```
std::vector<double> thePoint(4);
thePoint[0] = 86;
thePoint[1] = -334.8836574; 
thePoint[2] = 24.283;
thePoint[3] = 345.67675;

ofstream file1(tempFileName, ios::trunc);
file1 << std::setprecision(16)              << thePoint[0] << " ";
file1 << std::fixed << std::setprecision(2) << thePoint[1] << " ";
file1 << std::setprecision(16)              << thePoint[2] << " ";
file1 << std::setprecision(16)              << thePoint[3]; 
```

我得到：

86 -334.88 24.28300000000000 345.6767500000000

我想：

86 -334.88 24.283 345.67675

与其他挑剔代码的接口需要奇怪的格式。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-08-23T15:20:16.850

你应该做这个：

```
file1 << std::fixed << std::setprecision(2) << thePoint[1] << " ";
file1.unsetf(ios_base::fixed);
file1 << std::setprecision(16)              << thePoint[2]; 
```

`floatfield`格式标志可以采用它的两个可能值中的任何一个（使用操纵器和`fixed`）`scientific`，或者不采用它们（使用`ios_base::unsetf`）。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-08-23T16:32:37.200

您可以通过将 floatfield 强制为空值来做到这一点：

```
file1.setf( std::ios_base::fmtflags(), std::floatfield ); 
```

然而，在实践中，很少有人愿意这样做。通常的协议是保存格式标志，并在您完成时恢复它们：

```
std::ios_base::fmtflags originalFlags = file1.flags();
//  ...
file1.flags( originalFlags ); 
```

当然，您通常会在实际程序中使用 RAII 来执行此操作。您的工具箱中应该有一个`IOSave`类，它将在其构造函数中保存标志、精度和填充字符，并在析构函数中恢复它们。

`std::setprection`直接使用等也不是很好的做法。更好的解决方案是定义您自己的操纵器，名称如`pression`or `volume`，并使用它们。这是一种逻辑标记，意味着您可以从一个中心位置控制例如印刷的格式，而不是让它遍布整个程序。如果您编写自己的操纵器，让它们在完整表达式的末尾恢复原始格式参数相对容易。（操纵器对象将是临时对象，在完整表达式结束时被破坏。）

# php - 追加销售和关联产品选项卡错误 - 迁移后

> ID：12094939
> 
> 赞同：1
> 
> 时间：2012-08-23T15:17:36.943
> 
> 标签：php, mysql, magento

我们有一个多商店 Magento 安装，我们从 VPS 转移到专用的 ubuntu 服务器。

我们只是复制文件并通过 HeidiSQL 导出工具将数据库传输到新服务器。

一切似乎都运行良好，期待现在我们发现追加销售和关联产品选项卡无法正常运行。我点击了它们，它像往常一样显示“请稍候”加载屏幕，但它只是停留在同一个地方。甚至 url 都没有改变。

这是我们实际使用的两个选项卡，其余选项卡工作正常。我敢肯定这不是巧合，因为正是两个选项卡中包含数据，所以我猜肯定存在某种冲突。

问题是，我该如何调试它？或者有人知道它有什么问题吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-03T12:14:23.263

原来这是一个 PHP 兼容性问题。新服务器有不同的版本。在我的 VPS 上安装了相同的版本，然后它就可以工作了。

# .net - 始终在 Windows 窗体 .net 中保持一个对另一个的控制

> ID：12094940
> 
> 赞同：1
> 
> 时间：2012-08-23T15:17:48.343
> 
> 标签：.net, winforms, layout, controls, z-order

假设有两个重叠的控件：

*   对照A
*   控制 B

我想在所有情况下都保持控制 A 优于控制 B。

控件 B 的 z 顺序可以通过调用`BringToFront()`或通过调用在 parent 中设置其索引来动态更改`Parent.SetChildIndex(ControlB, 0)`。因此，无论何时发生这种情况，我都希望控件 A 出现在控件 B 的前面。

我正在寻找 z 顺序更改时发生的一些事件，以便我可以将 Control A 放在前面。有没有这样的事件？或者有什么方法可以做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-23T20:41:09.783

不喜欢在 Paint Events 上发送垃圾邮件。尤其是当控件离开屏幕时不会发送 WM_PAINT，因此操作可能不会在您的代码期望的时间发生。

一种更可控的方法是在 Controls 位置更改时进行处理。

更改您的控件以从中派生（将基类更改为您使用的任何内容）并设置字段：

```
firstControl.ChildControl = secondControl;

public class AlwaysParentingControl : TextBox
{
    private const Int32 WM_WINDOWPOSCHANGED = 0x47;
    public Control ChildControl { get; set; }

    protected override void WndProc(ref Message m)
    {
        if( m.Msg == WM_WINDOWPOSCHANGED && ChildControl != null)
            ChildControl.BringToFront();

        base.WndProc(ref m);
    }
} 
```

# objective-c - 将子视图添加到左下角

> ID：12094953
> 
> 赞同：0
> 
> 时间：2012-08-23T15:18:48.870
> 
> 标签：objective-c, subview

我正在尝试在右下角添加一个按钮作为子视图。它适用于 x、y 坐标，但我认为这不是一个好方法。

我需要将按钮添加到视图的左下角。

![在此处输入图像描述](../Images/1e7186abe9606f9bd0c09e10c7e2affe.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-23T15:23:09.037

只需使用 cgrectmake 这样直接设置 x 和 y 即可：

CGRectMake(x,self.view.bounds.size.height-offsetfrombottom,....);

这将是左按钮右按钮也应该有 self.view.bounds.size.width-rightSideOffset for x

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-23T15:27:38.837

这将通过使用`autoresizingMask`按钮的属性来工作。取决于你想要什么：

**左下角：**

```
yourButton.autoresizingMask = UIViewAutoresizingFlexibleRightMargin| UIViewAutoresizingFlexibleTopMargin; 
```

**右下角：**

```
 yourButton.autoresizingMask = UIViewAutoresizingFlexibleLeftMargin| UIViewAutoresizingFlexibleTopMargin; 
```

如果您旋转设备，您的按钮将停留在其角落。

您仍然需要设置一次按钮的坐标（通过设置`frame`or`center`属性），例如当您的视图加载到 viewController 中时。

# php - PHP stream_copy_to_stream 在本地服务器上无法正常工作

> ID：12094955
> 
> 赞同：2
> 
> 时间：2012-08-23T15:18:56.483
> 
> 标签：php, xmlhttprequest, valums-file-uploader

我正在使用 Valums File Uploader 使用 XHR 上传文件。我使用的脚本在我的实时服务器上运行良好，而它在我的本地服务器上失败了。相关代码如下：

```
 $input = fopen("php://input", "r");   
    $temp = tmpfile();
    $realSize = stream_copy_to_stream($input, $temp);
    fclose($input);

    if ($realSize != $this->getSize()){            
        return false;
    }

    $target = fopen($path, "w");        
    fseek($temp, 0, SEEK_SET);
    stream_copy_to_stream($temp, $target);
    fclose($target);
    chmod($path, 0644); 
```

问题是 $realSize 在我的本地服务器上是空的，而它在我的实时服务器上确实有值。因此，在本地服务器上，它会在大小检查时中断。我怀疑这是服务器配置问题，但我不完全知道要查找什么。有人能指出我正确的方向吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-24T10:13:37.757

我找到了罪魁祸首。tmpfile() 无法创建临时文件，因为临时文件夹的权限不允许写入。`sys_get_temp_dir()`使用Made this directory writable找到了临时文件夹的位置，一切又开始了！

# jquery - 滚动到 div 中内容的底部

> ID：12094958
> 
> 赞同：-2
> 
> 时间：2012-08-23T15:19:02.263
> 
> 标签：jquery, css

我有一个 div，它是一个聊天窗口。当人们发送消息并将它们附加到内容的末尾时，我希望内容滚动到底部（因此最新的聊天消息可见）。

```
<div id="chat">

</div><!--chat end--> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-23T15:31:21.213

您可以使用 jQuery.scrollTop()。

[http://api.jquery.com/scrollTop/](http://api.jquery.com/scrollTop/)

希望能帮助到你。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-23T15:36:18.930

您可以将 CSS 值设置为容器`scrollTop`的内容高度（或`scrollHeight`）。

这是示例代码，我在这个小提琴中使用了它：http: [//jsfiddle.net/aHx2Z/](http://jsfiddle.net/aHx2Z/)

```
// get the new height of the chat window
var height = $('#chat_window')[0].scrollHeight;
$('#chat_window').animate({scrollTop:height}, 1000); // you could use .css() instead if you don't want it to animate 
```

# javascript - jQuery Else / If 防止继承样式

> ID：12094961
> 
> 赞同：0
> 
> 时间：2012-08-23T15:19:15.470
> 
> 标签：javascript, jquery, html, css, width

我想知道如何防止元素在 else / if 断点中保留相同的内联样式。

我正在做的是尝试根据窗口宽度更改样式。与 CSS 媒体查询非常相似的方法，除了我需要增加一个数值，这是我不能用 CSS 做的事情，因此 jQuery。

当我进入最后的 else if - 我对前 5 篇文章应用不透明度时 - 如果我将浏览器的大小调整回小于 720 像素，这些文章会保留不透明度，这是我不想要的。

任何帮助是极大的赞赏。

```
$(document).ready(function() {
    function checkWidth() {
        var windowSize = $(window).width();
        if (windowSize >= 1 && windowSize <= 479) {
            var posTop = 0;
            $('#main article').each(function() {
                $(this).css('top', posTop + 'px');
                posTop += 160;
            });
        } else if (windowSize >= 480 && windowSize <= 719) {
            var posTop = 0;
            $('#main article').each(function() {
                $(this).css('top', posTop + 'px');
                posTop += 240;
            });
        } else if (windowSize >= 720 && windowSize <= 959) {
            $('#main article').slice(0, 5).each(function() {
                $(this).css('opacity', 0.4);
            });
        }
    }
    // Execute on load
    checkWidth();
    // Bind event listener
    $(window).resize(checkWidth);
});​ 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-23T15:25:15.693

在函数`$('#main article').css('opacity', 1);`开头添加。`checkWidth`顺便说一句，你应该重命名这个函数，因为它所做的并不是它听起来的样子。并且不需要`posTop`变量和最后一个`each`循环。我的变体进行了一些重构：

```
$(document).ready(function() {
    function changeStylesDependsOnWidth() {
        $('#main article').css('opacity', 1);

        var windowSize = $(window).width();

        if (windowSize >= 1 && windowSize <= 479) {
            $('#main article').each(function(i) {
                $(this).css('top', i * 160 + 'px');
            });
        } else if (windowSize >= 480 && windowSize <= 719) {
            $('#main article').each(function(i) {
                $(this).css('top', i * 240 + 'px');
            });
        } else if (windowSize >= 720 && windowSize <= 959) {
            $('#main article').slice(0, 5).css('opacity', 0.4);
        }
    }

    changeStylesDependsOnWidth();
    $(window).resize(changeStylesDependsOnWidth);
});​ 
```

# c - C读取二进制文件

> ID：12094966
> 
> 赞同：7
> 
> 时间：2012-08-23T15:19:32.710
> 
> 标签：c, file, binaryfiles

> **可能重复：**
> [“while(!feof(file))”总是错误的](https://stackoverflow.com/questions/5431941/while-feof-file-is-always-wrong)

如果我将数组写入输出文件并关闭文件，然后再次打开文件并读取所有内容，直到到达文件结尾，虽然文件只包含 4 个数字，但程序将读取并打印 5 个数字，为​​什么?

程序输出：

```
a[0] = 4
a[1] = 7
a[2] = 12
a[3] = 34
a[4] = 34 
```

save.bin（带有十六进制编辑器）

```
04000000 07000000 0C000000 22000000 
```

* * *

```
#include <stdio.h>
#include <stdlib.h>
#define path "save.bin"

int main(void)
{
  FILE *f=NULL;
  int a[]={4,7,12,34},i,n=4,k;
  f=fopen(path,"wb");
  if(f==NULL)
  {
    perror("Error");
    exit(1);
  }
  for(i=0;i<n;i++)  // or I could use fwrite(a,sizeof(int),n,f);
    fwrite(&a[i],sizeof(int),1,f);
  fclose(f);
  f=fopen(path,"rb");
  if(f==NULL)
  {
    perror("Error");
    exit(1);
  }
  i=0;
  while(!feof(f))
  {
    fread(&k,sizeof(int),1,f);
    printf("a[%d] = %d\n",i,k);
    i++;
  }
  printf("\n");
  fclose(f);
  return 0;
} 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-08-23T15:22:48.587

`feof(fp)`*仅当您尝试读取*文件末尾之后才变为假（即非零值） 。这应该可以解释为什么输入的循环比您预期的多一个。

从[文档](http://man7.org/linux/man-pages/man3/feof.3.html)中：

```
 The function feof() tests the end-of-file indicator for the stream
  pointed to by stream, returning nonzero if it is set.  The end-of-
  file indicator can be cleared only by the function clearerr(). 
```

另请阅读帖子：[为什么“while (!feof (file))”总是错误的？](https://stackoverflow.com/questions/5431941/while-feof-file-is-always-wrong)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-23T15:21:26.607

```
while(!feof(f))
{
    fread(&k,sizeof(int),1,f);
    printf("a[%d] = %d\n",i,k);  /** THIS ASSUMES fread() WAS SUCCESSFUL. **/
    i++;
} 
```

在调用后立即检查文件结尾`fread()`或检查 的返回值`fread()`，它返回读取的项目数，在这种情况下应该是`1`。循环的可能重组：

```
while(1 == fread(&k,sizeof(int),1,f))
{
    printf("a[%d] = %d\n",i,k);
    i++;
} 
```

在循环检查`feof()`以确保达到 EOF 并且循环由于其他一些故障而没有结束之后。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-23T15:31:54.123

我也有同样的问题。试试这个：

```
i=0;
  while(true)
  {
    fread(&k,sizeof(int),1,f);
    if(feof(f))
        break;

    printf("a[%d] = %d\n",i,k);
    i++;
  } 
```

除非您已阅读文件末尾，否则显然 feof 不会返回 true。我在将数组写入二进制文件时所做的是首先写入大小，所以我知道在读回它时我将要读取的确切数据量。

# html - Sublime Text 2 & Zen Coding : 如何编写多重嵌套

> ID：12094969
> 
> 赞同：0
> 
> 时间：2012-08-23T15:19:35.077
> 
> 标签：html, css, sublimetext2

输出 ：

```
<div id="header"></div>
<div id="body">
    <hello>
        <world></world>
    </hello>
</div> 
```

对应于：

```
div#header+div#body>hello>world 
```

使用什么命令来获得如下输出？

```
<div id="header">
    <hello2>
        <world2></world2>
    </hello2>
</div>
<div id="body">
    <hello>
        <world></world>
    </hello>

</div> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-23T15:26:05.857

您可以使用括号来创建嵌套元素组：

`(#header>hello2>world2)+(#body>hello>world)`

实际上，在这个例子中，第二组括号不是必需的，因为第一组创建了第一组，这就足够了：

`(#header>hello2>world2)+#body>hello>world`

# javascript - asp.net AjaxControlToolkit CalendarExtender：从客户端以编程方式设置显示月份

> ID：12094981
> 
> 赞同：0
> 
> 时间：2012-08-23T15:20:14.217
> 
> 标签：javascript, asp.net, ajaxcontroltoolkit

有没有办法设置日历扩展器，或者我可以调用一种方法，以便在单击目标文本框时始终显示包含所选日期的月份？我找到了设置所选日期的方法，但这不会自动显示所选日期的月份。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-23T15:23:34.417

您可以处理`onClientShown`事件：

```
<cc1:calendarextender ID="Calendarextender1"
    OnClientShown="clientShown" ... 
```

例如：

```
<script type="text/javascript">
    function clientShown(sender, args) {
        var extender= $find('Calendarextender1');
        sender.set_visibleDate(extender._selectedDate);
        // the following is just to show you some other interesting methods
        //sender.set_todaysDate(extender._selectedDate);
        //sender.set_selectedDate(extender._selectedDate);
    }
</script> 
```

恐怕没有文档，所以请尝试一下。

# ruby - 从 Heroku 调整 Amazon S3 上的图像大小

> ID：12094982
> 
> 赞同：2
> 
> 时间：2012-08-23T15:20:14.687
> 
> 标签：ruby, image-processing, heroku, amazon-s3, imagemagick

*   我在 Amazon S3 存储桶中有很多 JPEG 图像。
*   我有一个在 Heroku 上运行的 Rails 应用程序，它知道图像的文件名。
*   rails 应用程序不负责将文件上传到 S3。事实上，反过来：文件被 POST 到 S3，然后通过[http://aws.amazon.com/articles/1434/](http://aws.amazon.com/articles/1434/)`success_action_redirect`通知Rails 应用程序文件名

**Rails 应用程序需要图像的灰度缩略图副本。** 所以我正在考虑在 Rails 应用程序中编写一个 rake 任务来生成副本。

我的问题是：

1.  Imagemagick 是否在 Heroku 上可用并受支持？
2.  如果是这样，是否有任何关于如何在 Heroku 上使用 Imagemagick 的文档？
3.  如果是这样，我是否必须将文件从 S3 下拉到 tmp 目录，制作副本然后上传回 S3？
4.  如果是这样，我会产生 Amazon S3 数据传输费用吗？

    或者...

5.  有没有更好的办法？:)

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-23T17:20:17.020

1.  是的
2.  它是标准的 imagemagick，imagemagick 文档就足够了。
3.  是的，这就是这样做的方法。您下载图像，对其进行处理，然后将其发送回 S3。一旦你的进程退出，本地文件就会消失。
4.  不

...

1.  我不这么认为:)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-23T15:50:34.587

如果您已经拥有图像本身的链接，则可以查看[Magickly 。](https://github.com/afeld/magickly)但是，我不确定是否为此收取数据传输费用。您始终可以使用[CarrierWave](https://github.com/jnicklas/carrierwave)来处理上传到 S3 以及调整大小和图像处理。

**编辑**我再次查看了您的问题，发现您的存储桶中已经有很多 JPEG，所以我认为您要寻找的是第一个。您可以使用 Magickly 或使用后台工作人员在本地处理调整大小。无论哪种方式，取决于如何选择去做，你必须得到图像本身，除非你有一个图像的直接链接。

# c# - 如何运行特定的 DOS 命令

> ID：12094985
> 
> 赞同：1
> 
> 时间：2012-08-23T15:20:17.230
> 
> 标签：c#

我尝试了各种可能的方法来通过 C# 运行这个特定的 DOS 命令。我不想使用批处理文件。无论我尝试什么，它只会从打印机名称中获取第一个单词，而不是整个名称，在这种情况下，它说 Printer POS is not connected 而不是说 Printer POS Lexmark is not connected。错误可能是什么？多谢你们！

DOS命令是：

```
rundll32 printui, PrintUIEntry /o /n "POS Lexmark" 
```

我的代码如下：

```
string command = string.Format("/c rundll32 printui, PrintUIEntry /o /n" + " POS Lexmark"); 
ProcessStartInfo cmdsi = new ProcessStartInfo("cmd.exe");
cmdsi.Arguments = command;
cmdsi.CreateNoWindow = false;
Process cmd = Process.Start(cmdsi); 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-23T15:21:55.960

您忘记在 POS Lexmark 周围加上引号：

```
string command = string.Format("/c rundll32 printui, PrintUIEntry /o /n" + "\" POS Lexmark\""); 
```

# java - Tomcat / JKS / Keytool - 重新生成私钥？

> ID：12094986
> 
> 赞同：1
> 
> 时间：2012-08-23T15:20:21.560
> 
> 标签：java, ssl, keytool, jks

是否可以使用 keytool 或等效工具在 .JKS 密钥库中重新生成私钥？

我已获得证书和 JKS 密钥库，但在导入证书时，用于生成 CSR 的私钥似乎已被删除。

我可以看到如何使用新的私钥创建新的密钥库，但这与 CSR 或证书不匹配。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-23T15:39:36.283

不，这就是非对称密码学的重点：在只知道公钥（包含在 CSR 和证书中）的情况下，无法生成私钥。

如果您只能从 CSR 或证书重新生成私钥，那么任何人都可以冒充证书颁发给的实体。

如果您丢失了您的私钥，您只需创建一个新的密钥对、提交一个新的 CSR 并获得一个新的证书。一些 CA 允许在初始证书有效期内作为其合同的一部分免费进行此类重新键入。

* * *

**编辑：**只是为了澄清什么是企业社会责任。

要申请 X.509 证书，您必须：

*   生成公钥/私钥对。从本质上讲，公钥可以公开分发，因为获得私钥是不够的（至少不是在合理的时间内）。
*   将该公钥与您的身份信息一起提交给证书颁发机构。这可以使用以下方法完成：
    *   证书签名请求（CSR，PKCS#10），其中包含您的公钥和您希望在证书中包含的数据（例如您想要的主题 DN）。虽然与证书中的数据非常相似，但这些数据应该主要由 CA 用于识别请求本身，因为 CA 正常工作应该检查他们在证书中放入的内容，而不是盲目地将 CSR 变成证书。CSR 本身使用与证书中的公钥匹配的私钥进行签名。它实际上非常类似于自签名 X.509 证书（没有颁发者信息和有效日期），但不是一个。
    *   SPKAC 或 CRMF 用于浏览器内证书应用程序。
*   然后，CA 获取此 CSR（或等效项）并在此过程之外进行必要的验证，以审查它想要嵌入到您的证书中的信息，并颁发您的证书（通过使用自己的私钥对其进行签名）。它有效地保证了您的公钥（从 CSR 中提取）和它嵌入证书中的信息（例如，您的姓名和/或该证书所属的域名）之间的绑定。它会将您的证书发回给您。

然后，您必须将此证书与与其公钥匹配的私钥一起使用。一些工具使用单独的文件执行此操作，也可以将证书导入回密钥库中的私钥条目。

没有私钥的 CSR 或证书是没有用的。您可以很容易地再次创建一个新的 CSR，但您还需要创建一个新的密钥对。CSR 中最重要的部分是公钥，并且要拥有与之匹配的私钥。否则，您可以丢弃 CSR。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-23T15:26:29.203

> 是否可以使用 keytool 或等效工具在 .JKS 密钥库中重新生成私钥？

可以，但要重新生成私钥和 CSR。CSR 被提交给 CA，CA 为您提供了一个新的公钥。

> 您可以随时使用以下命令重新导入密钥库：

```
keytool.exe" -import -keystore "%JAVA_HOME%\jre\lib\security\cacerts" -file .\certificate.cer 
```

确保您还将证书导入到较新 JDK 版本的两个路径：

C:\Program Files\Java\jdk1.6.0_31

较新的版本还部署了一个单独的 JRE：

C:\程序文件\Java\jre6

不这样做可能会导致日志中出现以下异常：

```
Caused by: javax.net.ssl.SSLHandshakeException: sun.security.validator.ValidatorException: PKIX path building failed: sun.security.provider.certpath.SunCertPathBuilderException: unable to find valid certification path to requested target 
```

要重新生成您的私钥和 CSR，您可以使用以下命令：

```
$ openssl req -new -newkey rsa:2048  -nodes -keyout private.key -out signing request.csr -config openssl.conf 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-01-27T12:58:39.517

我遇到了同样的麻烦（我的私钥被意外从密钥库中删除了），只有一种方法可以恢复它：用备份替换密钥库文件 (*.jks)。因此，我建议始终对与 SSL 相关的所有文件进行备份，如果您在密钥库中错误地删除了任何内容，只需将文件替换为旧文件即可。

# asp.net-mvc - 如何从 viewdata.modelstate 获取所有错误

> ID：12094987
> 
> 赞同：2
> 
> 时间：2012-08-23T15:20:26.443
> 
> 标签：asp.net-mvc, validation, asp.net-mvc-4

我正在尝试做一些自定义错误处理程序。我们有 4 个选项卡（使用 JQuery 选项卡），它们都是从一个大型模型构建的。为简单起见，模型如下所示：

```
myModel.HomeInfo
myModel.PhoneNumbers
myModel.Addresses
myModel.PersonalDetails 
```

每个部分都是一个包含各种信息的对象。它们都具有属性并验证消息。

在页面顶部（选项卡上方）我想显示一些顶级错误，我的意思是“myModel”对象上的属性错误。这在我执行以下操作时有效：

```
foreach (ModelState state in viewData.ModelState.Values) 
```

当我做：

```
@Html.ValidationSummary(false) 
```

在我看来，我从四个对象及其所有子对象（超过 10 个）中得到了所有错误。但是当我自己经历错误时（上面的代码），我只得到 2 个错误，（只有“myModel”的错误，而不是它的子属性）。

我尝试使用 ILSPY 来查看验证摘要在做什么并复制它。相信我的代码几乎是一行一行的，但它仍然只有两个错误。

当我使用@Html.ValidationSummary() 时，我不知道发生了什么魔法。

我想知道的是如何获取我自己的整个对象的所有错误，以便能够在每个选项卡上显示一些错误。

为了澄清，这里是我的基本模型：

```
public class MemberProfileModel
{
    [CompanyTabValid]
    public CompanyInformationModel CompanyInformation { get; set; }
    [ContactTabValid]
    public ContactInformationModel ContactInformation { get; set; }
    [InvoiceTabValid]
    public InvoiceInformationModel InvoiceInformation { get; set; }
    [TabProductIdentificationMarkValid]
    public ProductIdentificationMarkModel ProductIdentificationMark { get; set; }
 }

public class CompanyTabValid : ValidationAttribute
{
    protected override ValidationResult IsValid(object value, ValidationContext context)
    {
        var model = value as CompanyInformationModel;
        if(model == null) throw new ArgumentNullException("value");

        var failed = new ValidationResult("Company information incomplete.");

        return model.IsValid ? ValidationResult.Success : failed;
    }
}

public class ContactInformationModel : BaseModel
{
    public ContactInformationModel()
    {
        PrimarySiteAddress = new AddressInformation();
        PrimarySiteContact = new ContactInformation();
        RegisteredOfficeAddress = new AddressInformation();
        RegisteredOfficeContact = new ContactInformation();

    }
    public override void Validate()
    {
        IsValid = PrimarySiteAddress.IsValid &&
                  PrimarySiteContact.IsValid &&
                  RegisteredOfficeAddress.IsValid &&
                  RegisteredOfficeContact.IsValid;
    }
    public AddressInformation PrimarySiteAddress { get; set; }
    public ContactInformation PrimarySiteContact { get; set; }
    public AddressInformation RegisteredOfficeAddress { get; set; }
    public ContactInformation RegisteredOfficeContact { get; set; }

}

public class AddressInformation : BaseModel
{
    public int Id { get; set; }
    public Guid MemberId { get; set; }
    /// <summary>
    /// This property is only here to make EF happy, do not use
    /// </summary>
    public int LocationTypeValue { get; set; }
    public LocationType LocationType { get { return (LocationType) LocationTypeValue; }  set { LocationTypeValue = (int) value;  } }

    [Required(AllowEmptyStrings = false, ErrorMessage = "Address Line 1 required.")]
    [Display(Name = "Address Line 1 *")]
    public string AddressLine1 { get; set; }

    [Display(Name = "Address Line 2")]
    public string AddressLine2 { get; set; }

    [Display(Name = "Address Line 3")]
    public string AddressLine3 { get; set; }

    [Required(AllowEmptyStrings = false, ErrorMessage = "Town required.")]
    [Display(Name = "Town *")]
    public string Town { get; set; }

    [Required(AllowEmptyStrings = false, ErrorMessage = "County required.")]
    [Display(Name = "County *")]
    public string County { get; set; }

    [Display(Name = "Country *")]
    public string Country { get; set; }

    [RequiredOneOfTwo("InterationalPostCode", ErrorMessage="PostCode or international PostCode are required.")]
    [Display(Name = "Post Code *")]
    public string PostCode { get; set; }

    [RequiredOneOfTwo("PostCode", ErrorMessage = "International PostCode or PostCode are required.")]
    [Display(Name = "International Post Code *")]
    public string InterationalPostCode { get; set; }

    public override void Validate()
    {

        if (string.IsNullOrEmpty(AddressLine1))
        {
            this.IsValid = false;
            return;
        }
        else if (string.IsNullOrEmpty(Town))
        {
            this.IsValid = false;
            return;
        }
        else if (string.IsNullOrEmpty(County))
        {
            this.IsValid = false;
            return;
        }
        else if (string.IsNullOrEmpty(Country))
        {
            this.IsValid = false;
            return;
        }
        else if (string.IsNullOrEmpty(PostCode) && string.IsNullOrEmpty(InterationalPostCode))
        {
            this.IsValid = false;
            return;
        }

        this.IsValid = true;
        return;
    }
} 
```

我已经展示了一个验证属性的示例（我们的一些是自定义的，一些是正常的），在这个示例中，顶级 MemberProfileModel = myModel，ContactInformationModel 是它的子节点之一，它又具有自己的对象，例如 AddressInformation。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-29T10:35:28.523

我发现了为什么这对我不起作用。像往常一样，是我傻了。因为模型有多个层/级别，即model.someobject.someotherobject.someproperty，当我调用tryValidateModel时，它会验证顶层而不是内层。

解决方案是确保它们都被调用：

```
 TryValidateModel(mp);
            TryValidateModel(mp.ContactInformation.PrimarySiteAddress);
            TryValidateModel(mp.ContactInformation.RegisteredOfficeAddress); 
```

所以我的解决方案是创建一个方法来在每个对象级别上调用 try validate 或创建一个反射方法来为我做这件事。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-24T12:26:58.237

在页面的发布事件中，在控制器中添加以下内容：

```
[HttpPost]
public ActionResult Create(TestViewModel testViewModel)
{
// If not Valid
if (!ModelState.IsValid)
{
   return this.View(testViewModel)
}
...
} 
```

并且不要忘记将您所需的和/或其他验证添加到您的视图模型访问方法中：

```
[Required(ErrorMessageResourceType = typeof(Resources.MyProject), ErrorMessageResourceName = "validation_Test")]
public virtual string HomeInfo { get; set; } 
```

在您看来：

```
<div class="editor-row">
        <div class="editor-label">
            @Html.LabelFor(model => model.HomeInfo)
        </div>
        <div class="editor-field">
            @Html.EditorFor(model => model.HomeInfo)
            @Html.ValidationMessageFor(model => model.HomeInfo)
        </div>
</div> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-06-18T02:34:27.690

我从这里得到这个： [http ://www.unknownerror.org/opensource/aspnet/Mvc/q/stackoverflow/1352948/how-to-get-all-errors-from-asp-net-mvc-modelstate](http://www.unknownerror.org/opensource/aspnet/Mvc/q/stackoverflow/1352948/how-to-get-all-errors-from-asp-net-mvc-modelstate)

```
public static List<string> GetErrorListFromModelState
                                              (ModelStateDictionary modelState)
{
      var query = from state in modelState.Values
                  from error in state.Errors
                  select error.ErrorMessage;

      var errorList = query.ToList();
      return errorList;
} 
```

# javascript - 输入（提交）按钮的设置值

> ID：12094989
> 
> 赞同：2
> 
> 时间：2012-08-23T15:20:30.467
> 
> 标签：javascript, asp.net-mvc-3

伙计们，我是 JavaScript 新手，所以不确定错误在哪里。基本上我的cshtml中有两个提交按钮。一个 ID = 电子邮件，另一个 ID = 短信。我已经设置了 value=" "。我在表单中使用这些按钮。

我想做的是；通过单击这些按钮，我想向它们传递一个值，以便我可以在模型和控制器中使用该值，就像在 switch 语句中一样。尝试了各种方法，但仍然传递空值。请指教！

```
function GetVal() {
    var input = document.getElementsByTagName('input');
    for (i = 0; i < input.length; i++) {
        if (input[i].type == 'submit') {
            if (input[i].id == 'email') {
                //input[i].value = 'submitEmail';
                //input[i].setAttribute("value", "subEmail");
                document.getElementById("email").setAttribute("subEmail", "value");
                break;
            }
        }
    }
}

<input id="email" type="submit" class="@( Model.UnsubscribedEmail == null ? "unsubscribe" : "subscribe")" onclick="GetVal();" /> 
```

**模型**

```
public static void susbscription(MyModel model, string submitButton)
    {
     switch (submitButton)
        {
            case "subEmail":
            //Code here
            break;
         }
     } 
```

**控制器**

```
[HttpPost]
public ActionResult MarketingPreferences(MyModel model, string submitButton)
    {
        MarketingPreferencesModel.susbscription(model, submitButton);

        return View(model);
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-23T15:45:44.513

尝试这个：

```
<input id="email" type="submit" name="submitButton" onclick="GetVal(this);" class="@( Model.UnsubscribedEmail == null ? "unsubscribe" : "subscribe")"  /> 
```

在 JavaScript 中：

```
function GetVal(element) {
    element.value = "subEmail";
} 
```

在行动：

```
public ActionResult MarketingPreferences(MyModel model, string submitButton)
{
    MarketingPreferencesModel.susbscription(model, submitButton);

    return View(model);
} 
```

# vb.net - 如何使用应用程序设置来存储 MySQL 数据库连接信息？

> ID：12094991
> 
> 赞同：0
> 
> 时间：2012-08-23T15:20:34.083
> 
> 标签：vb.net

我正在创建一个内部应用程序，并且一直对数据库连接字符串进行硬编码。但是，这一次我想做一些不同的事情，让用户能够从应用程序中输入信息。

我发现我可以将变量存储在应用程序设置中并从代码中调用它们，但我不知道如何在连接字符串中调用它们。

这是代码：

```
Dim dbConn As New MySqlConnection
dbConn.ConnectionString = "Server=172.43.96.271;Port=3306;Uid=someone;
Password=theirpassword;Database=thedb" 
```

希望我能很好地解释自己？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-23T15:29:10.303

您必须为此使用用户设置。而且，如果您希望用户输入连接字符串的单独部分（服务器、帖子、用户名、密码和数据库），则必须为每个部分创建一个设置条目，然后从这些值构造连接字符串.

这是一篇很好的文章：[应用了用户设置](http://www.codeproject.com/Articles/25829/User-Settings-Applied)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-23T16:26:38.990

You can simply concatenate the string together, or better yet, use the `String.Format` method:

```
dbConn.ConnectionString = String.Format("Server={0};Port={1};Uid={2};Password={3};Database={4}", My.Settings.Server, My.Settings.Port, My.Settings.Uid, My.Settings.Database) 
```

If you were using MS SQL, I'd recommend using the `SqlConnectionStringBuilder` class to do it, but since you're using MySql, it doesn't really apply. You may be able to use it anyway, though.

# c# - 等待事件处理程序完成后再继续

> ID：12094992
> 
> 赞同：1
> 
> 时间：2012-08-23T15:20:42.643
> 
> 标签：c#, asp.net, events, user-controls

假设我有一个名为 A 的用户控件，它执行以下操作：

```
Page_Load:
    List<object> myList = PrepareList();
    ListPrepared(this, new AArgs(myList)); // Event that lets subscribers modify the list.
    OperateOnAndDisplayList(myList); 
```

A 的一个实例保存在订阅 ListPrepared 事件并修改创建的列表的页面中。显然，我希望页面的处理程序在我操作并显示列表之前完成，因为它正在修改列表以确保完整性。我将如何实施呢？（或者这是一个可怕的想法，因为它暴露了列表，因此需要外部元素了解列表才能修改它？）

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-23T15:27:31.493

事件是同步引发的。这意味着事件的所有订阅者都将在`OperateOnAndDisplayList`调用方法之前执行他们的代码。这也意味着如果`myList`被任何事件订阅者修改，则该修改对事件发布者也是可见的。如果这不是您想要的，您应该在引发事件之前创建列表的副本，并且只发送带有事件的`EventArgs`.

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-23T15:27:44.560

如果事件处理程序在其所有代码完成后返回，那么您不必担心它。事件只是调用方法的一种方式。它与异步操作没有直接关系。

# javascript - 修改一个滑动的javascript div

> ID：12094997
> 
> 赞同：0
> 
> 时间：2012-08-23T15:20:59.703
> 
> 标签：javascript, jquery, html, popup

我从网上得到了一些代码来制作一个盒子滑入。但是它从左上角滑入，我希望它从底部滑入。我将 css 位置从 top:-200px 更改为 bottom:-200px 并更改了更改位置的代码部分

```
{
    popup.style.top = (currentTop + speed) + "px";
    keepMoving = true;
} 
```

到

```
{
    popup.style.bottom = (currentTop + speed) + "px";
    keepMoving = true;
} 
```

现在它不起作用。我看不到我应该做什么变量。这是完整的代码（如果我把它们改回'top'就可以了）

```
<html>
<head>
<title>Moving Pop Up Samplet</title>

<style>

#popup 
{
height:200px; 
width:200px; 
border:1px solid #000; 
background:#CC9900;
position:absolute;
bottom:-200px;
left:-200px;
}

</style>

<script>

var timer = null;
var speed = 3; //1 is  slow
var endTop = 0;
var endLeft = 0;

//******************************************************
// Simple little function to get Elements as an object
//******************************************************
function getEl(id)
{
var el = document.getElementById(id);
return el;
}
//******************************************************
// Function to show Elements
//******************************************************
function showEl(id)
{
getEl(id).style.display ="";
 }
   //******************************************************
  // Function to hide Elements
     //******************************************************
   function hideEl(id)
 {
getEl(id).style.display ="none";
  }

   //******************************************************
   // Function to move Element
     //******************************************************
    function moveEl(id)
    {
var popup = getEl(id);
var currentTop = parseInt(popup.offsetTop);
var currentLeft = parseInt(popup.offsetLeft);

var keepMoving = false;
//Move
if (currentTop <= endTop)
{
    popup.style.bottom = (currentTop + speed) + "px";
    keepMoving = true;
}
if(currentLeft <= endLeft)
{   
    popup.style.left = (currentLeft + speed) + "px";
    keepMoving = true;
}
if (keepMoving)
{
    startMove(id);
}
else
{
    endMove();
}
  }
   //******************************************************
   // Function to start the move
      //******************************************************
     function startMove(id)
    {
timer = setTimeout("moveEl('"+id+"')", 1);
   }
  //******************************************************
    // Function to end the move
 //******************************************************
  function endMove()
{
clearTimeout(timer);
 }

 </script>

</head>
<body onload="startMove('popup');">
<!-- POP UP DIV -->
<div id="popup">
<center><span onclick="hideEl('popup');" style="cursor:pointer;"> Close</span></center>
</div>
<!--END  POP UP DIV -->

<center><span onclick="startMove('popup');" style="cursor:pointer;"> Show Pop Up</span></center>

</body>
</html> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-23T15:23:37.167

而不是从头开始写一些东西考虑使用jQuery的[slideToggle](http://api.jquery.com/slideToggle/)方法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-23T15:56:46.550

你只需要稍微调整一下你的不平等。

鉴于javascript中没有偏移底部属性，即使您想从底部进入，仍然使用顶部值会更容易。

```
function moveEl(id) {
    var popup = getEl(id);

    var currentTop = parseInt(popup.offsetTop);
    var currentLeft = parseInt(popup.offsetLeft);

    var keepMoving = false;
    //Move
    if (currentTop >= endTop) {
        popup.style.top = (currentTop - speed) + "px";
        keepMoving = true;
    }
    if (currentLeft <= endLeft) {
        popup.style.left = (currentLeft + speed) + "px";
        keepMoving = true;
    }
    if (keepMoving) {
        startMove(id);
    }
    else {
        endMove();
    }
} 
```

这是一个有效的[jsFiddle](http://jsfiddle.net/PFafk/)。

如果您考虑该函数检查它是否已完成的方式，并且`speed`每次都添加变量，那么您应该能够与此相比单步执行原始版本并查看逻辑是如何工作的。