# StackOverflow 问答 12131000-12131999

# php - SP插入后，下一页有一个空结果，直到重新加载

> ID：12131011
> 
> 赞同：15
> 
> 时间：2012-08-26T14:40:19.227
> 
> 标签：php, mysql, stored-procedures, mysqli

我有一个将数据插入数据库的存储过程（从现在开始为 SP）（SaveClient，见下文）。当 SP 完成后，我将 PHP 页面重定向到另一个列出条目的 PHP 页面（FetchObjectList，见下文）。在我重新加载/刷新页面之前，该列表不会返回新创建的记录。

存储过程`COMMIT`最后有一个，我在调用 SP 后关闭 PHP 代码中的数据库连接，并检查错误但没有出错。

该页面本身返回一个 200 状态码，这意味着它没有被缓存，因此也不能与浏览器相关。

当前的解决方法是`sleep(1)`在 PHP 代码中，但是当代码上线时，我不知道它是否足够。我当然宁愿让 MySQL 提供正确的结果集。

*编辑：我正在使用 PHP 的 MySQLi 对象接口，知道可能会有用。;)*

我的开发计算机安装了 PHP 5.2.17、MySQL 5.0.51a (InnoDB) 和 Apache 2.2.17，并在 Windows 7 x64 上运行。

**更新**

将以下行添加`CALL FetchObjectList('client_tbl', NULL, NULL, 1, 'client_tbl.name ASC', NULL, NULL);`到 SaveClient 的末尾。结果集中在呈现的结果集中没有新创建的客户端。

**更新 2**

我尝试使用[这里](https://stackoverflow.com/questions/181894/mysql-force-not-to-use-cache-for-testing-speed-of-query)`SQL_NO_CACHE`看到的但无济于事。

我现在将直接在 PHP 中尝试相同的 SQL，而不是调用 SP。

**9 月 3 日至 20 日更新**

到目前为止，我已经尝试了任何合理的答案/评论，但没有任何运气。我今天尝试更新我的 PHP 和 MySQL 版本（因为我今天了解到实时服务器将在 PHP 5.3.something 和 MySQL 5.1.something 上运行）但没有让它工作。我需要更新 PHP 以获得更新的`php_mysqli.dll`/`libmysql.dll`因为我得到的仅支持 5.0.51a 并且可能存在我的问题，因为实际数据库中没有任何工作。我尝试了`libmysql.dll`从 MySQL 安装无济于事。

请注意，我还更改了包含的 PHP 代码，因为我实际上复制了错误的调用 the`user_tbl`而不是 the 的代码`client_tbl`，并且还简化了它（删除了多查询），但结果仍然相同。

我不知道赏金会发生什么，如果它恢复给我，我会再次添加它。

**存储过程 SaveClient**

```
DELIMITER //

DROP PROCEDURE IF EXISTS work.SaveClient//

CREATE PROCEDURE work.SaveClient(
        IN ObjectID INT,
        IN UserID INT,
        IN ClientName VARCHAR(60),
        IN VersionFrom DATETIME,
        IN VersionTo DATETIME)
root:BEGIN

DECLARE EXIT HANDLER FOR SQLEXCEPTION ROLLBACK;

/* 
    Default values ---------------------------------------------------------------------------------------------------------
*/
    # Used to block INSERT/UPDATEs
    SET @DoChanges      = TRUE;

    SET @Fields     = '*';
    SET @Version        = NULL;
    SET @UserVersion    = NULL;
    SET @DateNow        = NOW();
    SET @VersionActive  = CONCAT(
        '( ( NOW() BETWEEN ', 
        'version_from AND ', 
        'version_to ) OR ( ', 
        'version_from < NOW() AND ', 
        'version_to IS NULL ) )'
    );

    IF VersionFrom IS NULL THEN
        SET VersionFrom = @DateNow;
    END IF;

/*
    Search for client ------------------------------------------------------------------------------------------------------
*/
    IF ObjectID IS NOT NULL THEN
        SET @Client = CONCAT(
            'SELECT version INTO @Version FROM client_tbl WHERE object_id = ',
            ObjectID,
            ' AND ',
            @VersionActive
        );
        PREPARE stmt FROM @Client;
        EXECUTE stmt;
        DEALLOCATE PREPARE stmt;

        # Check if there are any changes
        IF @Version IS NOT NULL THEN
            SELECT name INTO @Name FROM client_tbl WHERE name = ClientName AND version = @Version;
            IF @Name = ClientName THEN 
                SET @errorMsg = "Duplicate entry";
                SET @errorCode = "S0000002";
                SELECT @errorCode, @errorMsg;
                LEAVE root;
            END IF;
        END IF;

    END IF;
/*
    Search for user ---------------------------------------------------------------------------------------------------------
*/
    # Create this as a function
    IF UserID IS NOT NULL THEN
        SET @User = CONCAT(
            'SELECT version INTO @UserVersion FROM user_tbl WHERE object_id = ',
            UserID,
            ' AND ',
            @VersionActive
        );
        PREPARE stmt FROM @User;
        EXECUTE stmt;
        DEALLOCATE PREPARE stmt;
    END IF;

    IF @UserVersion IS NULL THEN
        SET @errorMsg = "User is missing";
        SET @errorCode = "U0000099";
        SELECT @errorCode, @errorMsg;
        LEAVE root;
    END IF;

/*
    Add the client ---------------------------------------------------------------------------------------------------------
*/
    # Close the current version
    IF @Version IS NOT NULL THEN 
        IF @DoChanges = TRUE THEN 
            CALL UpdateVersion(
                ObjectID, 
                UserID, 
                @Version, 
                @DateNow, 
                'client_tbl'
            );
            SET @Version = @Version + 1;
        END IF;
    ELSE
        SET @Version = 1;
    END IF;

    IF @DoChanges = TRUE THEN 

        IF ObjectID IS NULL THEN
            INSERT INTO 
                object_tbl 
                (
                    object_class_id, 
                    created,
                    created_by
                )
                VALUES(
                    2,
                    NOW(),
                    UserID
                )
            ;
            SET ObjectID = LAST_INSERT_ID();
        END IF;

        INSERT INTO 
            client_tbl 
            (
                object_id, 
                version, 
                version_from, 
                version_to, 
                changed, 
                changed_by, 
                name
            ) 
            VALUES(
                ObjectID,
                @Version,
                VersionFrom,
                NULL,
                @DateNow,
                UserID,
                ClientName
            )
        ;
    END IF;

    COMMIT;
END //

DELIMITER ; 
```

**存储过程 FetchObjectList**

```
DELIMITER //

DROP PROCEDURE IF EXISTS work.FetchObjectList//

CREATE PROCEDURE work.FetchObjectList(
        IN ObjectType VARCHAR(60),
        IN ObjectSubType VARCHAR(60),
        IN ObjectSubID INT,
        IN IsActive INT,
        IN OrderBy VARCHAR(100),
        IN SetStart INT,
        IN MaxResults INT)
root:BEGIN

DECLARE EXIT HANDLER FOR SQLEXCEPTION ROLLBACK;

    # Allow the "JSON" output be a max of 8kb
    SET GLOBAL group_concat_max_len = 8096;

/* 
    Default values ---------------------------------------------------------------------------------------------------------
*/
    SET @Fields     = '*';
    SET @VersionWhere   = '1'; # Get everything
    SET @Special        = '';
    SET @OrderBy        = '';
    SET @SetStart       = '';
    SET @MaxResults     = '';
    SET @JoinIn     = '';

    IF IsActive = 1 THEN
        SET @VersionWhere = CONCAT(
            '( NOW() BETWEEN ', 
            ObjectType, 
            '.version_from AND ', 
            ObjectType, 
            '.version_to OR ( ', 
            ObjectType, 
            '.version_from < NOW() AND ', 
            ObjectType, 
            '.version_to IS NULL ) )'
        );
    END IF;

    IF OrderBy != '' THEN
        SET @OrderBy = CONCAT(
                'ORDER BY ', 
                OrderBy
        );
    END IF;

/*
    Specials for each type -------------------------------------------------------------------------------------------------
*/

/*
    - Clients ------------
*/

    IF ObjectType = 'client_tbl' THEN
        SET @Fields = '
            *, 
            client_tbl.object_id AS object_id, 
            (
                SELECT 
                    COUNT(*) AS Total 
                FROM 
                    client_user_privilege_tbl cup 
                WHERE 
                    cup.client_id = client_tbl.object_id 

            ) AS usercount
        ';
    END IF;
/*
    - Configuration ------------
*/

    IF ObjectType = 'configuration_tbl' THEN
        SET @Fields = '
            *
        ';
    END IF;
/*
    Add upp the query to run -----------------------------------------------------------------------------------------------
*/
    SET @Query = CONCAT(
        'SELECT ',
        @Fields,
        ' FROM ', 
        ObjectType, 
        ' ',
        @JoinIn, 
        ' WHERE ', 
        @VersionWhere,
        ' ',
        @Special, 
        @OrderBy

    );

    PREPARE stmt FROM @Query;

    EXECUTE stmt;

    DEALLOCATE PREPARE stmt;

    COMMIT;

END //

DELIMITER ; 
```

**PHP 代码片段（9 月 20 日更新）**

```
$query = "CALL FetchObjectList('client_tbl', NULL, NULL,  1, NULL, NULL, NULL)";
addTrace($query);

$rs = $db->query($query);
if( $rs ) {
    addTrace('Query done -> Results: ' . $rs->num_rows);
    while($r = $rs->fetch_assoc()){
        $fetchArray[] = $r;
    }
    $count = $rs->num_rows;
    $rs->close();
    $db->next_result();
} else {
    addTrace('Query failed -> ' . $db->error);
    flushTrace();
    exit;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-18T17:10:46.393

由于它是 mysql 的一个相当陈旧的版本，因此这与错误相关并不会让我感到惊讶，但我会 - 在你的地方 - 想知道的一件事是这是否可以通过**根本不**使用事务来工作。（例如，自动提交 = 开启）。

对于该版本 5.0，我还将检查查询缓存并将其全部禁用而不是每个查询（请参阅 SHOW VARIABLES LIKE 'have_query_cache'; SET GLOBAL query_cache_size =0; ）。这至少会消除那些在这个问题中发挥作用的人，重现（或尝试）问题，看看是否有任何改变。如果没有，我会开始搜索特定的错误，特别是当查询缓存被禁用并且它仍然在不使用事务的情况下执行此操作时。

我验证了对 5.0 mysql (innodb) 的支持。

*   innodb_flush_log_at_trx_commit = 1
*   innodb_flush_method = O_DIRECT

在您的 my.cnf 中专门设置这些选项，最重要的一项。他们很好地解释了那些做什么。

见[http://dev.mysql.com/doc/refman/5.0/en/innodb-parameters.html#sysvar_innodb_flush_log_at_trx_commit](http://dev.mysql.com/doc/refman/5.0/en/innodb-parameters.html#sysvar_innodb_flush_log_at_trx_commit)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-20T11:37:59.997

mysql_query 的问题在于它不支持多个结果集。这正是您的存储过程所做的——它们往往返回多个结果集。每当您调用 SP 时，退出状态都会秘密地携带在（空）结果集中。如果您将它与您自己的过程输出相加，则查询中的某些结果集将被您的 PHP 检索代码忽略。当您尝试运行另一个查询时，待处理的结果集仍将在缓冲区中。

# c++ - 宏中的附加逗号

> ID：12131012
> 
> 赞同：4
> 
> 时间：2012-08-26T14:40:25.613
> 
> 标签：c++, c

[C++ 宏的可选参数](https://stackoverflow.com/questions/3046889/optional-parameters-with-c-macros)

为什么此线程中的其中一条消息的作者在此处的宏中使用附加逗号？

```
#define PRINT_STRING_MACRO_CHOOSER(...) \
    GET_4TH_ARG(__VA_ARGS__, PRINT_STRING_3_ARGS, \
                PRINT_STRING_2_ARGS, PRINT_STRING_1_ARGS, ) 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-26T14:49:51.203

这样做是为了`GET_4TH_ARG`始终提供其可变参数（这是语言的要求）。

例如，没有它，

`PRINT_STRING_MACRO_CHOOSER("Hello, World")`

会扩大到

`GET_4TH_ARG("Hello, World", PRINT_STRING_3_ARGS, PRINT_STRING_2_ARGS, PRINT_STRING_1_ARGS)`

而不是

`GET_4TH_ARG("Hello, World", PRINT_STRING_3_ARGS, PRINT_STRING_2_ARGS, PRINT_STRING_1_ARGS,)`

第一种形式不提供任何可变参数（因此不会是有效的调用），而第二种形式确实为`GET_4TH_ARG`.

来自 C++ 标准`[cpp.replace]/4`：

> 如果宏定义中的标识符列表不以省略号结尾，则调用类函数宏时的参数数量（包括那些不包含预处理标记的参数）应等于宏定义中的参数数量。否则，调用中的参数应该多于宏定义中的参数（不包括...）。...

# android - 在 Android 中使用后退按钮正确退出 PlayN 游戏

> ID：12131013
> 
> 赞同：3
> 
> 时间：2012-08-26T14:40:40.810
> 
> 标签：android, exit, playn

我无法使用后退按钮正确退出 PlayN GameActivity。

我正在使用以下代码：

```
public class Loader extends GameActivity {
    public void main(){
        PlayN.run(new Game());  
    }

    @Override
    public boolean onKeyDown(int keyCode, KeyEvent event) {
        if (keyCode == KeyEvent.KEYCODE_BACK) {
            finish();
        }
        return super.onKeyDown(keyCode, event);
    }
} 
```

但这还不够正确。

GameActivity 关闭，但如果您再次运行游戏，它将显示具有两个工作线程（前一个和当前）的同一游戏的两个副本，并且在根层中，您将看到根层的两个副本。

我真的很愚蠢，但是如何正确地完成（）以完全从内存中销毁所有内部线程/侦听器/层/音频的 GameActivity？

* * *

这个

```
@Override
public boolean onKeyDown(int keyCode, KeyEvent event){
    if (keyCode == KeyEvent.KEYCODE_BACK) {
        this.finish();
    }
    return super.onKeyDown(keyCode, event);
} 
```

仅当您没有在游戏中使用**PlayN.assets().getSound(...).play() 时才有效**，否则所有 Activity 在退出时都会崩溃。

我为此找到了一个小解决方法，您应该通过以下方式覆盖 GameActivity 中的 onDestroy 方法：

```
@Override
public void onDestroy() {
    super.onStop();
    try {
        super.onDestroy();
    } catch (IllegalStateException e) {
        android.util.Log.e("Easy", "JVM: playn.android.AndroidCompressedSound.MediaPlayer melts my brain!.");
    }
} 
```

但仍然不知道为什么会发生这种异常。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-26T16:53:22.397

首先，尝试使用：this.finish(); 而不是完成（）；

或使用以下技术：

像这样覆盖当前活动的 onDestroy：

```
 @Override
protected void onDestroy() {
    super.onDestroy();
    System.runFinalizersOnExit(true);
    System.exit(0);

} 
```

并调用它，即 this.onDestroy();

Imp：它会杀死与你的应用程序相关的所有正在进行的进程！

# c++ - 如何在 C++ 中正确使用#ifndef #define #endif

> ID：12131019
> 
> 赞同：3
> 
> 时间：2012-08-26T14:41:19.093
> 
> 标签：c++, include, compiler-errors

我正在做一个需要以下结构的项目： ![在此处输入图像描述](../Images/8a48ed8b86f10ed2a28c3ac3acb862fa.png)

2 个 CPP 文件包含类，这些类需要 H 文件 1 中的裸函数。类和裸函数需要 H 文件 2 中的变量。

我可以拆分 CPP 文件，以便它们使用 2 个单独的文件，其中包含 nakes 和他们需要的变量。但我更喜欢使用这种结构。

看起来编译器跳过了#ifndef命令，我对问题进行了测试：

主要的：

```
#include <iostream>

//1>CPPFile2.obj : error LNK2005: "bool Test1" (?Test1@@3_NA) already defined in CPPFile1.obj
//1>CPPFile2.obj : error LNK2005: "bool Test2" (?Test2@@3_NA) already defined in CPPFile1.obj

int main()
{
} 
```

CPP文件1：

```
#include <iostream>
using namespace std;

#include "HFile1.h" 
```

CPP文件2：

```
#include <iostream>
using namespace std;

#include "HFile2.h" 
```

H文件1：

```
#include "HFile2.h"

#pragma once
#ifndef Name1
#define Name1

//Use test1, this workes fine
//Use test2, this workes fine

#endif 
```

H文件2：

```
#pragma once
#ifndef Name2
#define Name2

bool Test1 = false;
bool Test2 = false;

#endif 
```

#ifndef #define #endif 结构怎么可能不能正常工作？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-26T14:48:22.570

您的问题是第二个标题是*定义*变量，而不仅仅是*声明*它们。程序中必须有一个*定义*，因此编译失败。这与包含守卫无关，因为包含守卫仅在单个翻译单元内进行保护。在您的情况下，每个 .cpp 文件都包含标题，因此分别定义相同的变量。

解决方案是仅在标头中*声明*变量并在*单个*翻译单元中定义它们：

```
#ifndef Name2
#define Name2
extern bool Test1;
extern bool Test2;
#endif
// single .cpp
bool Test1 = false;
bool Test2 = false; 
```

虽然整个事情都有一些代码气味。您可能想要*重新设计*您的解决方案。在大多数情况下，使用全局变量并不是一个好的解决方案。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-26T14:48:08.557

您收到*链接*错误；这与包括警卫无关。您已经在两个目标文件中定义了`Test1`和。`Test2`相反，您需要确保只有一个目标文件*定义*它，而另一个目标文件定义`extern`它。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-26T14:56:53.167

永远不要在头文件中定义变量。您应该在 .cpp 中定义它，然后如果您想从另一个 .cpp 文件访问它，请创建一个带有“extern”的头文件。

文件1.cpp

```
bool Test1 = false; //define a var in your .cpp 
```

文件1.h

```
extern bool Test1; //extern it in your header 
```

文件2.cpp

```
#include "File1.h" //include the header of the variable

void Somefunction()
{
    if (Test1) //use the variable
    {
    //someting 
    }

} 
```

然而，使用全局变量通常是一种不好的做法......

# java - Android - 防止 WebView 在旋转时重新加载

> ID：12131025
> 
> 赞同：102
> 
> 时间：2012-08-26T14:42:12.057
> 
> 标签：java, android, android-webview

当我旋转屏幕时，WebView 会重新加载整个页面。我不能拥有这个，因为我的一些内容包含动态/随机材料。当前，当屏幕旋转时，会从 loadUrl() 方法重新加载原始 URL。

知道我的代码有什么问题吗？

***MainActivity.java***

```
package com.mark.myapp;

import android.app.Activity;
import android.os.Bundle;
import android.util.Log;
import android.view.KeyEvent;
import android.view.Menu;
import android.webkit.WebView;
import android.webkit.WebViewClient;

public class MainActivity extends Activity {

    WebView web;
    String webURL = "http://www.google.co.uk/";

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);

        if (savedInstanceState != null)
            ((WebView)findViewById(R.id.web)).restoreState(savedInstanceState);

        web = (WebView) findViewById(R.id.web);
        web.getSettings().setJavaScriptEnabled(true);
        web.loadUrl(webURL);
        web.setPadding(0, 0, 0, 0);
        web.getSettings().setLoadWithOverviewMode(true);
        web.getSettings().setUseWideViewPort(true);
        web.getSettings().setSupportZoom(true);
        web.getSettings().setBuiltInZoomControls(true);

        web.setWebViewClient(new HelloWebViewClient());
    }

    @Override
    public boolean onCreateOptionsMenu(Menu menu) {
        getMenuInflater().inflate(R.menu.activity_main, menu);
        return true;
    }

    private class HelloWebViewClient extends WebViewClient {
        public boolean shouldOverrideUrlLoading(WebView web, String url) {
            web.loadUrl(url);
            return true;
        }
    }

    public boolean onKeyDown(int keyCode, KeyEvent event) {
        if ((keyCode == KeyEvent.KEYCODE_BACK) && web.canGoBack()) {
            web.goBack();
            return true;
        }
        return super.onKeyDown(keyCode, event);
    }

} 
```

***AndroidManifest.xml***

```
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
    package="com.mark.myapp"
    android:versionCode="1"
    android:versionName="1.0" >

    <uses-sdk
        android:minSdkVersion="8"
        android:targetSdkVersion="15" />

    <application
        android:icon="@drawable/ic_launcher"
        android:label="@string/app_name"
        android:theme="@style/AppTheme" >
        <activity
            android:name=".MainActivity"

            android:configChanges="orientation|keyboardHidden">
            <intent-filter>
                <action android:name="android.intent.action.MAIN" />

                <category android:name="android.intent.category.LAUNCHER" />
            </intent-filter>
        </activity>
    </application>
    <uses-permission android:name="android.permission.INTERNET"/>
</manifest> 
```

* * *

## 回答 #1

> 赞同：116
> 
> 时间：2012-08-26T14:50:18.487

我认为主要问题是您调用 web.loadUrl(webURL); 当 savedInstanceState != null

**编辑**

尝试：

```
if (savedInstanceState == null)
{
  web.loadUrl(webURL);
} 
```

**EDIT2**：您还需要 onSaveInstanceState 和 onRestoreInstanceState 覆盖。

```
@Override
protected void onSaveInstanceState(Bundle outState )
{
super.onSaveInstanceState(outState);
web.saveState(outState);
}

@Override
protected void onRestoreInstanceState(Bundle savedInstanceState)
{
super.onRestoreInstanceState(savedInstanceState);
web.restoreState(savedInstanceState);
} 
```

注意：还请在您的 Activity 中添加您的 AndroidManifest.xml android:configChanges="orientation|screenSize" 谢谢

* * *

## 回答 #2

> 赞同：67
> 
> 时间：2013-10-24T09:21:18.670

**编辑：** **找到更合适的解决方案。**

**新的：**

在`AndroidManifest.xml`

```
<?xml version="1.0" encoding="utf-8"?>
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
    package="com.Example.WebviewSample">
    <application
        <activity android:name=".WebViewActivity"
            <!-- ADD THIS -->
            android:configChanges="orientation|screenSize">
        </activity>
    </application>
</manifest> 
```

在`WebViewActivity.java`文件中将此添加到`onCreate()`方法

```
@Override
protected void onCreate(@Nullable Bundle savedInstanceState) {
    wView = (WebView) findViewById(R.id.webView);
    if (savedInstanceState == null) {
        wView.loadUrl("https://google.com");
    }
} 
```

也更新`onSaveInstanceState`

```
@Override
protected void onSaveInstanceState(Bundle outState)
{
    super.onSaveInstanceState(outState);
    wView.saveState(outState);
} 
```

和`onRestoreInstanceState`

```
@Override
protected void onRestoreInstanceState(Bundle savedInstanceState)
{
    super.onRestoreInstanceState(savedInstanceState);
    wView.restoreState(savedInstanceState);
} 
```

**老的：**

不需要java编码。在清单文件中使用它。

```
 android:configChanges="keyboard|keyboardHidden|orientation|screenLayout|uiMode|screenSize|smallestScreenSize" 
```

像：

```
<application
    android:allowBackup="true"
    android:icon="@drawable/ic_launcher"
    android:label="@string/app_name"
    android:theme="@style/AppTheme" >
    <activity
        android:name="com.Example.WebviewSample.webviewsample"
        android:configChanges="keyboard|keyboardHidden|orientation|screenLayout|uiMode|screenSize|smallestScreenSize"
        android:label="@string/app_name" >
        <intent-filter>
            <action android:name="android.intent.action.MAIN" />

            <category android:name="android.intent.category.LAUNCHER" />
        </intent-filter>
    </activity>        
</application> 
```

* * *

## 回答 #3

> 赞同：22
> 
> 时间：2015-01-15T15:48:57.120

在标签中（清单）

```
android:configChanges="orientation|screenSize" 
```

* * *

## 回答 #4

> 赞同：15
> 
> 时间：2015-07-14T07:31:14.993

添加`android:configChanges="orientation|screenSize"`清单对我有用

```
<activity
            android:name="com.example.HelloWorld.WebActivity"
            android:label="@string/title_activity_web"
            android:configChanges="orientation|screenSize" >
</activity> 
```

* * *

## 回答 #5

> 赞同：8
> 
> 时间：2016-12-09T23:13:48.050

我不相信这会再奏效了。在我的情况下，使用恢复状态`WebView.restore(Bundle savedInstanceState)`仍然会触发重新加载 url。

查看[文档](https://developer.android.com/reference/android/webkit/WebView.html#restoreState(android.os.Bundle))，`restoreState()`您会看到它说：

> 如果在此 WebView 有机会建立状态（加载页面、创建后退/前进列表等）之后调用它，则可能会产生不良副作用。

和

> 请注意，此方法不再恢复此 WebView 的显示数据。

向@e4c5 的道具在他的[回答中指出我正确的方向](https://stackoverflow.com/a/32867602/)

当然，极端的做法是防止方向变化触发活动破坏/创建。如何做到这一点的文档是[here](https://developer.android.com/guide/topics/resources/runtime-changes.html#HandlingTheChange)

* * *

## 回答 #6

> 赞同：7
> 
> 时间：2014-08-25T16:00:39.490

在清单中添加此代码

```
<activity 
     ...
     android:configChanges="orientation|screenSize"> 
```

* * *

## 回答 #7

> 赞同：5
> 
> 时间：2017-10-05T14:34:34.543

将其放在 Manifest.xml 文件活动中：

```
android:configChanges="orientation|screenSize" 
```

这是一个例子：

```
<activity android:name=".MainActivity"
          android:label="@string/app_name"
          android:theme="@style/AppTheme.NoActionBar"
          android:configChanges="orientation|screenSize">
          <intent-filter>
                <category android:name="android.intent.category.DEFAULT" />
          </intent-filter>
</activity> 
```

* * *

## 回答 #8

> 赞同：4
> 
> 时间：2014-03-18T11:20:13.810

覆盖该`onConfigChange`方法以避免在方向更改时重新加载数据

关于您在`AndroidMainfest`文件中的活动。

```
android:configChanges="orientation|keyboardHidden" 
```

并且在您的 WebView 设置中也有这些

```
webview.getSettings().setCacheMode(WebSettings.LOAD_CACHE_ELSE_NETWORK);
webview.setLayerType(View.LAYER_TYPE_SOFTWARE, null);
webview.loadUrl("Your URL To Load"); 
```

* * *

## 回答 #9

> 赞同：4
> 
> 时间：2017-10-05T11:12:12.327

在你的清单文件中试试这个：

```
android:configChanges="keyboard|keyboardHidden|orientation|screenLayout|uiMode|screenSize|smallestScreenSize" 
```

* * *

## 回答 #10

> 赞同：4
> 
> 时间：2017-11-21T08:04:37.067

如此处所引[，](https://developer.android.com/guide/topics/resources/runtime-changes.html#HandlingTheChange)

> 注意：从 Android 3.2（API 级别 13）开始，当设备在纵向和横向之间切换时，“屏幕尺寸”也会发生变化。因此，如果您想在为 API 级别 13 或更高级别（由 minSdkVersion 和 targetSdkVersion 属性声明）进行开发时防止由于方向更改而导致运行时重新启动，则除了“orientation”值之外，还必须包含“screenSize”值。也就是说，您必须声明 android:configChanges="orientation|screenSize"。但是，如果您的应用程序以 API 级别 12 或更低级别为目标，那么您的 Activity 始终会自行处理此配置更改（此配置更改不会重新启动您的 Activity，即使在 Android 3.2 或更高版本的设备上运行时也是如此）。

设置`android:configChanges="orientation|screenSize"`您的活动将解决此问题。

另外，请注意以下事项

> 请记住：当您声明您的活动以处理配置更改时，您有责任重置您提供替代方案的任何元素。如果您声明您的活动来处理方向更改并且具有应该在横向和纵向之间更改的图像，则必须在 onConfigurationChanged() 期间将每个资源重新分配给每个元素。

* * *

## 回答 #11

> 赞同：4
> 
> 时间：2018-08-27T14:54:10.080

这个解决方案对我很有效：

(1) 在 AndroidManifest.xml 中添加这一行 android:configChanges="keyboard|keyboardHidden|orientation|screenLayout|uiMode|screenSize|smallestScreenSize"

像这样（和上面的答案一样）

```
<application
    android:allowBackup="true"
    android:icon="@mipmap/ic_launcher"
    android:label="@string/app_name"
    android:roundIcon="@mipmap/ic_launcher_round"
    android:supportsRtl="true"
    android:theme="@style/AppTheme">
    <activity
        android:name=".MainActivity"
        android:configChanges="keyboard|keyboardHidden|orientation|screenLayout|uiMode|screenSize|smallestScreenSize"
        android:label="@string/app_name"
        android:theme="@style/AppTheme.NoActionBar">
        <intent-filter>
            <action android:name="android.intent.action.MAIN" />

            <category android:name="android.intent.category.LAUNCHER" />
        </intent-filter>
    </activity>
</application> 
```

(2) 然后在 MainActivity.java 中验证 savedInstanceState

```
@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);
    mainContext = getApplicationContext();
    ----
    myWebView = (WebView) findViewById(R.id.webView);
    prepareWebView();
    myWebView.addJavascriptInterface(myJavaScriptInterface, "WEB2Android");

    if (savedInstanceState == null) {
        myWebView.post(new Runnable() {
            @Override
            public void run() {
                myWebView.loadUrl("http://www.appbiz.ro/foto_konta");
            }
        });
    }
    ----
} 
```

(3) 然后：

```
@Override
public void onConfigurationChanged(Configuration newConfig) {
    super.onConfigurationChanged(newConfig);
}

@Override
protected void onSaveInstanceState(Bundle outState )
{
    super.onSaveInstanceState(outState);
    myWebView.saveState(outState);
}

@Override
protected void onRestoreInstanceState(Bundle savedInstanceState)
{
    super.onRestoreInstanceState(savedInstanceState);
    myWebView.restoreState(savedInstanceState);
} 
```

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2020-03-01T09:44:53.920

在 Androidmanifest.xml 中添加：

```
<activity android:name=".MyActivity"
    android:configChanges="orientation|screenSize|screenLayout|keyboardHidden"> 
```

现在，当这些配置之一发生更改时，`MyActivity`不会重新启动。相反，`MyActivity`收到对 的调用`onConfigurationChanged()`。

添加这个：

```
@Override
public void onConfigurationChanged(Configuration newConfig) {
    super.onConfigurationChanged(newConfig);

    // Checks the orientation of the screen
    if (newConfig.orientation == Configuration.ORIENTATION_LANDSCAPE) {
        Toast.makeText(this, "landscape", Toast.LENGTH_SHORT).show();
    }
    else if (newConfig.orientation == Configuration.ORIENTATION_PORTRAIT) {
        Toast.makeText(this, "portrait", Toast.LENGTH_SHORT).show();
    }
} 
```

# php - 如何使用 PHP 从 foreach 循环中返回超过 1 个值

> ID：12131031
> 
> 赞同：2
> 
> 时间：2012-08-26T14:43:34.660
> 
> 标签：php, function

这是我的功能

```
function GetUser($id)
{
    global $pdo;
    $stmt = $pdo->prepare('SELECT lname,fname,mi FROM user WHERE id = :id LIMIT 1');
    $stmt->execute(array(':id'=>$id));
    foreach($stmt as $name){
        $lname = $name['lname'];
        $lname = $name['fname'];
        $mi = $name['mi'];
    }

    return //what to put here?
} 
```

这是我使用该功能的代码

```
include 'function.php';
$names = GetUser($_SESSION['id']);
//what's next? 
```

如何从函数中检索 $lname、$fname 和 $mi？需要任何帮助和建议。谢谢 ：）

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-26T14:47:39.977

对于初学者，不要使用[`global`关键字](https://stackoverflow.com/questions/11923272/use-global-variables-in-a-class/11923384#11923384)，而是注入您需要的变量。其次，你为什么不返回一个数组？：

```
function getUser($pdo, $id)
{
    $stmt = $pdo->prepare('SELECT lname,fname,mi FROM user WHERE id = :id LIMIT 1');
    $stmt->execute(array(':id'=>$id));

    $result = array();
    foreach($stmt as $name){
        $result['lname'] = $name['lname'];
        $result['fname'] = $name['fname'];
        $result['mi']  = $name['mi'];
    }

    return $result;
}

$result = getUser($pdo, 1);
var_dump($result); 
```

请注意，这只会返回**最后一个**结果。如果你想要这一切：

```
function getUser($pdo, $id)
{
    $stmt = $pdo->prepare('SELECT lname,fname,mi FROM user WHERE id = :id LIMIT 1');
    $stmt->execute(array(':id'=>$id));

    return $stmt->fetchAll();
}

$result = getUser($pdo, 1);
var_dump($result); 
```

另请注意，我已使您的函数名称以普通字母而不是大写字母开头。“正常”的命名约定是类以大写开头，但函数/方法以正常开头。

如果您想根据第一个解决方案检索信息，您将执行以下操作：

```
echo $result['lname']; 
```

如果您想根据第二种解决方案检索信息，您将执行以下操作：

```
echo $result[0]['lname']; 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-26T14:59:08.427

```
function GetUser($id)
{
    global $pdo;
    $stmt = $pdo->prepare('SELECT lname,fname,mi FROM user WHERE id = :id LIMIT 1');
    $stmt->execute(array(':id'=>$id));
    foreach($stmt as $name){
        $lname = $name['lname'];
        $lname = $name['fname'];
        $mi = $name['mi'];
    }

    return array(
        "$lname" => $lname,
        "$fname" => $fname,
        "$mi" => $mi
     );
} 
```

这是下一部分：

```
include 'function.php';
$myArray = GetUser($_SESSION['id']);
$fname = $myArray["$fname"];
$lname = $myArray["$lname"];
$mi = $myArray["$mi"]; 
```

或者：

```
include 'function.php';
$myArray = GetUser($_SESSION['id']);
$fname = $myArray[0];
$lname = $myArray[1];
$mi = $myArray[2]; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-26T14:48:23.517

```
return array(
    "lname" => $lname,
    "fname" => $fname,
    "mi" => $mi
); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-26T14:48:42.830

```
function GetUser($id) {
    global $pdo;
    $stmt = $pdo->prepare('SELECT lname,fname,mi FROM user WHERE id = :id LIMIT 1');
    $stmt->execute(array(':id'=>$id));
    return $stmt;
}

include 'function.php';
$names = GetUser($_SESSION['id']);
foreach($names as $name){
    $lname = $name['lname'];
    $lname = $name['fname'];
    $mi = $name['mi'];
} 
```

未经测试，但我认为它应该工作

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-08-26T14:49:25.980

```
function GetUser($id)
{
    global $pdo;
    $stmt = $pdo->prepare('SELECT lname,fname,mi FROM user WHERE id = :id LIMIT 1');
    $stmt->execute(array(':id'=>$id));
   return count($stmt)==1?$stmt[0]:null; //you may have nothing returned from the database so return null
} 
```

然后：

```
include 'function.php';
$names = GetUser($_SESSION['id']);
if ($names){   //if this is not null then get the properties
echo $names['fname'];
echo $names['lname'];
echo $names['mi'];
} 
```

# android - 蓝牙配件和安卓开放配件协议

> ID：12131033
> 
> 赞同：4
> 
> 时间：2012-08-26T14:43:38.910
> 
> 标签：android, bluetooth, adk, accessory

我正在开发一个应与蓝牙配件（条形码扫描仪）通信的 Android 应用程序。我试图了解 ADK 和 AOA 协议 2.0 对我来说意味着什么。我已阅读 ADK 2012 指南并观看了 Google I/O 2012 ADK 会议视频。

请检查我的问题并验证我的答案：

1.  在 Android 应用程序中是否有任何事情要做才能遵守 Android Open Accessories 协议 2.0？
    我的回答：不，只需执行常规蓝牙连接（如此处所述：http: [//developer.android.com/guide/topics/connectivity/bluetooth.html](http://developer.android.com/guide/topics/connectivity/bluetooth.html)）

2.  蓝牙配件固件中是否需要做些什么才能使其符合 Android Open Accessories 协议 2.0？
    我的回答：不，什么都没有。

3.  与蓝牙配​​件通信时，Android设备是否应该切换到“配件模式”？
    我的回答：不，“附件模式”仅适用于 USB 附件。

4.  是否有蓝牙配件支持的 Android ADK 设备列表（USB 配件有这样的列表：[哪些 android 设备支持 ADK/开放配件](https://stackoverflow.com/questions/7256263/which-android-devices-support-the-adk-open-accessory)）？
    我的回答：不，任何支持蓝牙的设备。

5.  如果我不使用 Arduino，我可以从 ADK 和 AOA 中获得什么吗？
    我的回答：不，不是蓝牙配件。

谢谢。

# c++ - 编译 OpenGL 着色器会导致语法错误

> ID：12131034
> 
> 赞同：1
> 
> 时间：2012-08-26T14:44:03.307
> 
> 标签：c++, opengl, shader

我有两个简单的着色器（顶点和片段）

# 顶点着色器

```
#version 330 core

//=============================================
//---[Structs/Vertex Data]---------------------
//=============================================

layout(location = 0) in vec3 vertexPosition_modelspace;

//=============================================
//---[Variables]-------------------------------
//=============================================

uniform mat4 projection;
uniform mat4 view;

//=============================================
//---[Vertex Shader]---------------------------
//=============================================

void main()
{
   gl_Position = projection * view * vertexPosition_modelspace;
} 
```

# 片段着色器

```
#version 330 core

//=============================================
//---[Output Struct]---------------------------
//=============================================

out vec3 colour;

//=============================================
//---[Fragment Shader]-------------------------
//=============================================

void main()
{
    colour = vec3(1, 0, 0);
} 
```

我正在尝试编译它们，但出现以下错误

*错误 C0000：语法错误，意外 $undefined，在标记“未定义”处需要“::”*

我相信这可能与我阅读文件的方式有关。这是顶点着色器文件的示例

```
std::string VertexShaderCode = FindFileOrThrow(vertex_file_path);
std::ifstream vShaderFile(VertexShaderCode.c_str());
std::stringstream vShaderData;
vShaderData << vShaderFile.rdbuf();
vShaderFile.close(); 
```

然后使用编译该文件

```
char const *VertexSourcePointer = VertexShaderCode.c_str();
glShaderSource(VertexShaderID, 1, &VertexSourcePointer , NULL);
glCompileShader(VertexShaderID); 
```

如何有效地读取文件并避免这些错误？

编辑：

正确编译：

```
const std::string &shaderText = vShaderData.str();
GLint textLength = (GLint)shaderText.size();
const GLchar *pText = static_cast<const GLchar *>(shaderText.c_str());
glShaderSource(VertexShaderID, 1, &pText, &textLength);
glCompileShader(VertexShaderID); 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-26T15:04:14.090

`VertexShaderCode`是您的*文件名*，而不是着色器字符串。那还在`vShaderData`。您需要从 中复制字符串`vShaderData`，然后将其输入`glShaderSource`.

# php - PDF document error using Zend_Pdf

> ID：12131038
> 
> 赞同：2
> 
> 时间：2012-08-26T14:44:55.277
> 
> 标签：php, zend-framework, magento, magento-1.7, zend-pdf

In magento1.7, I have tried something like below in my custom controller.

```
public function getPDF()
{
$imagePath=C:\Users\.........;
$image = Zend_Pdf_Image::imageWithPath($imagePath);
$page->drawImage($image, 40,764,240, 820);
.
.
.
$pdf->pages[] = $page;
$pdf->save("mydoc.pdf");
} 
```

There's no error in it. It generates PDF with image but the PDF document is saved in magento folder instead in My downloads folder. After doing some research, I found some following chunk of lines and added them after $pdf->pages[] = $page;.

```
 $pdfString = $pdf->render();
  header("Content-Disposition: attachment; filename=myfile.pdf");
  header("Content-type: application/x-pdf");
  echo $pdfString; 
```

Now it generates PDF in My Downloads folder. When I try to open it. It throws error saying : Adobe reader couldn't open myfile.pdf because it's not either a supported file type or because the file has been damaged............ Do this happens,when we try to open PDF document generated on localhost or there's some other reason. Please let me know, why this error occurs and also provide me a solution to resolve it.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-20T15:34:26.627

您的问题可能是由于同时调用 save() 和 render() 造成的。

save() 实际上调用了 render()，问题可能是由于尝试渲染 PDF 两次。

这也是一种资源浪费，如果您需要保存文件，最好先保存文件，然后将该文件直接提供给用户。

您可以在普通的旧 PHP 中执行此操作（使用 passthru 或 readfile），尽管 Zendframework 中有一些方法可以更好地执行此操作，您可以查看:)

```
// .. create PDF here.. 
$pdf->save("mydoc.pdf");

$file = 'mydoc.pdf';

if (file_exists($file)) {
    header('Content-Description: File Transfer');
    header('Content-Type: application/octet-stream');
    header('Content-Disposition: attachment; filename='.basename($file));
    header('Content-Transfer-Encoding: binary');
    header('Expires: 0');
    header('Cache-Control: must-revalidate');
    header('Pragma: public');
    header('Content-Length: ' . filesize($file));
    ob_clean();
    flush();
    readfile($file);
    exit;
}
?> 
```

如果您的代码在 Magento 控制器中：

```
 $this->getResponse()
        ->setHttpResponseCode(200)
        ->setHeader('Pragma', 'public', true)
        ->setHeader('Cache-Control', 'must-revalidate, post-check=0, pre-check=0', true)
        ->setHeader('Content-type', $contentType, true)
        ->setHeader('Content-Length', filesize($file))
        ->setHeader('Content-Disposition', 'attachment; filename="'.$fileName.'"')
        ->setHeader('Last-Modified', date('r'));

    $this->getResponse()->clearBody();
    $this->getResponse()->sendHeaders();

    $ioAdapter = new Varien_Io_File();
    if (!$ioAdapter->fileExists($file)) {
        Mage::throwException(Mage::helper('core')->__('File not found'));
    }
    $ioAdapter->open(array('path' => $ioAdapter->dirname($file)));
    $ioAdapter->streamOpen($file, 'r');
    while ($buffer = $ioAdapter->streamRead()) {
        print $buffer;
    }
    $ioAdapter->streamClose();
    exit(0); 
```

# android - 从 Android OAuth2 访问 Google Cloud Storage

> ID：12131044
> 
> 赞同：9
> 
> 时间：2012-08-26T14:45:54.943
> 
> 标签：android, google-api, oauth-2.0, google-cloud-storage

我正在尝试设计一个从我的谷歌云存储帐户下载适当声音文件的应用程序。该应用程序不访问用户帐户，而是我自己的帐户。

我的阅读使我相信最合适的模型是服务帐户 [https://code.google.com/p/google-api-java-client/wiki/OAuth2#Service_Accounts](https://code.google.com/p/google-api-java-client/wiki/OAuth2#Service_Accounts)

不幸的是，开发人员决定不提供 Android 示例。他们确实提供了一个简单的 Java 示例，它可以工作 [http://samples.google-api-java-client.googlecode.com/hg/storage-serviceaccount-cmdline-sample/instructions.html?r=default](http://samples.google-api-java-client.googlecode.com/hg/storage-serviceaccount-cmdline-sample/instructions.html?r=default)

我试图将其用于 Android 并遇到了问题。

```
GoogleCredential credential =
        new GoogleCredential.Builder().setTransport(HTTP_TRANSPORT)
            .setJsonFactory(JSON_FACTORY).setServiceAccountId(SERVICE_ACCOUNT_EMAIL)
            .setServiceAccountScopes(STORAGE_SCOPE)
            .setServiceAccountPrivateKeyFromP12File(new File("key.p12")).build(); 
```

在 Google 的示例中，他们传递了 key.p12 文件，但是在 Android 上，当我将文件放在 res/raw 文件夹中时，我访问它的唯一方法似乎是作为输入流。我找不到将文件传递给 JSON 的优雅方法。

这一切都让我相信我一定做错了什么。我应该使用 key.p12 我应该使用“服务帐户模型”吗？有没有例子/

谢谢瑞恩

* * *

更新我设法实现了让它工作的目标，但我的解决方案对我来说感觉很笨拙，我确信这不是预期的方式

我所做的是将 key.p12 添加为作为输入流打开的原始/资源。然后我使用示例中的库将其转换为私钥。

[http://www.flexiprovider.de/examples/ExampleSMIMEsign.html](http://www.flexiprovider.de/examples/ExampleSMIMEsign.html)

我的代码看起来像这样

```
Security.addProvider(new de.flexiprovider.core.FlexiCoreProvider());
    // Next, we have to read the private PKCS #12 file, since the the
    // private key used for signing is contained in this file:
    DERDecoder dec = new DERDecoder(getResources().openRawResource(
            R.raw.key));
    PFX pfx = new PFX();
    try {
        pfx.decode(dec);
        SafeBag safeBag = pfx.getAuthSafe().getSafeContents(0)
                .getSafeBag(0);
        PKCS8ShroudedKeyBag kBag = (PKCS8ShroudedKeyBag) safeBag
                .getBagValue();
        char[] password = "my password from google api".toCharArray();
        privKey = kBag.getPrivateKey(password);
        new AsyncLoadStorage(this).execute();
    } catch (ASN1Exception e) { 
```

但整个事情都很丑陋，我想要一个更清洁的解决方案

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2014-02-01T21:01:09.837

谷歌文档实际上非常具有误导性。他们没有更新他们的控制台链接（继续要求你寻找“注册应用程序”链接，它不存在），他们的 GCS JAVA api 在 Android 中不起作用（GcsService service = GcsServiceFactory.createGcsService() ;)。似乎他们希望您仅从 App 引擎访问 GCS。

所以，这是一个人需要做的：

*   您可能不希望用户必须登录 GCS 或 Google（想想 Snapchat 应用程序）。
*   但是您仍然需要身份验证，因此您的数据并不完全公开；它只能通过您的应用程序访问。
*   您需要一个服务帐户 P2K 文件，您可以将其与应用程序捆绑在一起，这样您的用户就不必在任何地方登录。
*   在[https://cloud.google.com/console/project](https://cloud.google.com/console/project)中，点击项目 > APIs & Auth > Credentials > Create new Client ID > Service Account。这将让您下载 P2K 文件。
*   将其存储在 res/raw/private_key.p2k 中，然后使用以下代码验证您的 android 应用以查询 GCS。

这对我来说没有任何问题：

```
 String STORAGE_SCOPE = "https://www.googleapis.com/auth/devstorage.read_write";
        JsonFactory JSON_FACTORY = JacksonFactory.getDefaultInstance();

        Log.d("testing", "checking if I can create a credential");
        httpTransport = AndroidHttp.newCompatibleTransport();
        KeyStore keystore = KeyStore.getInstance("PKCS12");
        keystore.load(resources_.openRawResource(R.raw.gcs_privatekey),
                "password".toCharArray());

        PrivateKey key = (PrivateKey) keystore.getKey("privatekey", "password".toCharArray());

        GoogleCredential credential = new GoogleCredential.Builder()
                .setTransport(httpTransport)
                .setJsonFactory(JSON_FACTORY)
                .setServiceAccountPrivateKey(key)
                .setServiceAccountId(SERVICE_ACCOUNT_EMAIL)
                .setServiceAccountScopes(Collections.singleton(STORAGE_SCOPE))
                // .setServiceAccountUser(SERVICE_ACCOUNT_EMAIL)
                // .setClientSecrets(CLIENT_ID, CLIENT_SECRET)
                .build();
        credential.refreshToken();

        String URI = "https://storage.googleapis.com/" + BUCKET_NAME;
        HttpRequestFactory requestFactory = httpTransport.createRequestFactory(credential);
        GenericUrl url = new GenericUrl(URI);
        HttpRequest request = requestFactory.buildGetRequest(url);
        HttpResponse response = request.execute();
        String content = response.parseAsString();
        Log.d("testing", "response content is: " + content);
        new Storage.Builder(httpTransport, JSON_FACTORY, credential)
                .setApplicationName("appname").build(); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2014-09-19T20:29:15.820

这是我将 inputStream 键转换为 PrivateKey 对象的操作：

```
PrivateKey serviceAccountPrivateKey = SecurityUtils.loadPrivateKeyFromKeyStore(SecurityUtils.getPkcs12KeyStore(), MyClass.class.getResourceAsStream("/privatekey.p12"), "notasecret", "privatekey", "notasecret");

    // Build service account credential.
    GoogleCredential credential = new GoogleCredential.Builder().setTransport(httpTransport)
        .setJsonFactory(jsonFactory)
        .setServiceAccountId(ACCOUNT_ID)
        .setServiceAccountScopes(Collections.singleton(StorageScopes.DEVSTORAGE_FULL_CONTROL))
        //.setServiceAccountPrivateKeyFromP12File(f)
        .setServiceAccountPrivateKey(serviceAccountPrivateKey)
        .build(); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-22T05:48:50.403

我不知道您的确切情况，但是您能否将这些文件完全公开，以便下载它们根本不需要身份验证？

# drupal-6 - Lightbox2 和 youtube 视频

> ID：12131054
> 
> 赞同：1
> 
> 时间：2012-08-26T14:48:10.703
> 
> 标签：drupal-6, lightbox2

我正在寻找一个示例，通过它我可以了解如何在 drupal 的 lightbox2 中打开 youtube 视频。

任何类型的帮助表示赞赏。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-08-23T01:23:32.823

您可以使用这些模块轻松完成（**对于 Druplal 7**）

*   媒体
*   媒体视频嵌入
*   彩盒
*   嵌入式媒体领域
*   媒体彩盒

也许还有更多，例如需求，但使用这些模块，您可以完成工作。**您必须安装所有这些模块。**colorbox 模块需要 jquery.colorbox-min.js 插件。

你要做的是：

1.  启用彩盒配置的“彩盒加载”
2.  使用“嵌入式视频”字段为您的内容类型创建一个新字段
3.  在该字段的显示设置中，选择“带有颜色框的缩略图”以达到该效果
4.  如果它不起作用，那么您缺少模块或 js 插件，或者配置错误，或者您需要等待 Media Internet 字段获取缩略图

哦，这是一个例子：[http ://sunumusic.com/videos](http://sunumusic.com/videos)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-26T16:26:12.550

您可以通过使用 rel 属性来实现这一点。

```
<a href='http://path/to/your/youtube/vid' rel='lightframe'><img src='/path/to/video/thumbnail.jpg' /></a> 
```

# java - how to avoid recursive url-decoding

> ID：12131055
> 
> 赞同：0
> 
> 时间：2012-08-26T14:48:14.920
> 
> 标签：java, urlencode, urldecode

I am writing something like an image proxy where I receive URLs from my site front-end, and I download images , re-size them, and return smaller images for the front end and client to download from the "proxy". This means I need to take care of all-sorts of url patterns, this is why I chose to decode the given url and than encode it using URIUtils.decode:

```
private String fixUrl(String fromUrl) throws URIException {
    fromUrl = URIUtil.decode(fromUrl);
    fromUrl = URIUtil.encodeQuery(fromUrl);
    return fromUrl;
} 
```

This should help me take care of urls that are already encoded. My problem is that some of the urls are double encoded, and from what I saw, URIUtils.decode, performs recursive decode and this means that in cases of double encoded urls I will get a bad url that does not work.

Is there a simple way to decode only once?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-26T14:56:20.733

我会尝试检查 URL 是否仍然包含 character `%`。如果它不包含任何`%`内容，则不会对其进行编码，您可以停止解码过程。

# c++ - 与 std::mutex 相比，其他互斥体包装库的优势是什么？

> ID：12131058
> 
> 赞同：6
> 
> 时间：2012-08-26T14:48:23.867
> 
> 标签：c++, multithreading, locking, mutex, standard-library

C++ 标准库提供`std::mutex (lock, unlock, try_lock)`了可以在多线程环境中工作的功能。

此外，我还听说过有关`Boost::mutex`提供相同功能的包装库（例如）的讨论（例如`lock, unlock, try_lock`）。

我的问题是，使用这样的包装库比标准的有什么优势？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-08-26T14:54:44.617

`std::mutex`，`std::thread`而线程库的其他元素仅在 C++11 中可用。`boost::mutex`等人早于 C++11。所以优点是如果你没有 C++11 支持，你可以使用它们。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-26T15:12:42.727

虽然 juanchopanza 指出了对问题 (+1) 的最直接答案，但在它们包装的类型上`std::mutex` *引入*的一件事是使用异常。对于大多数人/环境/需求来说，这将被认为是一件好事。在某些情况下，您可能不需要异常依赖。在那种情况/环境下，`std::mutex`接口可能不是一个选项或不可取的。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-26T15:15:08.657

一些包装器，如 TBB 和 PPL，提供比标准库更多的功能。

1.  自己使用 pthreads/CreateThread = 编写自己的`malloc`.
2.  使用`std::thread`= `malloc`/ `free`。
3.  使用 TBB/PPL = `std::vector`/ `std::unique_ptr`。

# java - 将 Java.Util.Date 转换为 Java.Sql.Date 时出错

> ID：12131068
> 
> 赞同：13
> 
> 时间：2012-08-26T14:49:59.987
> 
> 标签：java, datetime, time, casting

> **可能重复：**
> [如何将 java.util.date 转换为 java.sql.date？](https://stackoverflow.com/questions/530012/how-to-convert-java-util-date-to-java-sql-date)

我在我的函数上发现错误，它在从 DatatypeFactory df 初始化 newInstance() 方法后显示错误结果，我收到另一个错误：

```
java.lang.ClassCastException: java.util.Date cannot be cast to java.sql.Date 
```

我只是从

```
java.util.Date into java.SQL.Date 
```

然后铸造：

```
Date dateStarting  = (Date) jDateChooserStart.getDate();
Date dateEnding    = (Date) jDateChooserEnd.getDate(); 
```

如何解决这个问题？

（之前的帖子：[Convert jcalendar Date into XMLGregorianCalendar Getting Null Value](https://stackoverflow.com/questions/12130680/convert-jcalendar-date-into-xmlgregoriancalendar-getting-null-value)）

* * *

## 回答 #1

> 赞同：32
> 
> 时间：2012-08-26T14:52:36.053

无法从to*投射*。您需要从一种类型*转换*为另一种类型：`java.util.Date``java.sql.Date`

 *```
java.util.Date utilStartDate = jDateChooserStart.getDate();
java.sql.Date sqlStartDate = new java.sql.Date(utilStartDate.getTime()); 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-08-26T14:53:10.203

从类转换异常中，您可以看到这是 2 种不同的类型，不能从一种转换到另一种。要从 转换`java.util.Date`为`java.sql.Date`，您可以使用：

```
java.util.Date date = new java.util.Date();
java.sql.Date sqlDate = new java.sql.Date(date.getTime()); 
```*

# java - Get elements of SOAP response

> ID：12131071
> 
> 赞同：2
> 
> 时间：2012-08-26T14:50:29.183
> 
> 标签：java, soap, xml-parsing, saaj

When I send a `SOAP request` using `SAAJ API`, I would receive a large `SOAP response`, in which I need to search for some nodes.

I am using following code but it just show the name of first node of body (`HotelListResponse` which has many children) and I have noticed that the loop just iterates once, (as shown in commented section).

*In short: I need to know how to search for some nodes (preferably by their name) in a variable which its type is SOAPMessage. Thanks*

```
SOAPMessage sm = response;   //this is the response

sm.writeTo(System.out);    //response is shown successfully in console

SOAPBody ReBody = sm.getSOAPBody();
Iterator sentIt = ReBody.getChildElements(); //create an iterator on elements
int counter=0;

while(sentIt.hasNext())
{
  SOAPBodyElement sentSBE = (SOAPBodyElement)sentIt.next();
  Iterator sentIt2 = sentSBE.getChildElements();
  SOAPElement sentSE = (SOAPElement)sentIt2.next();

   String sentID = sentSE.getNodeName();  //result is HotelListResponse
   counter++;  
  //System.out.println("sentID:"+sentID);
}
System.out.println("counter"+counter); //result is 1 
```

# forms - Set the current birthday from data in CakePHP

> ID：12131072
> 
> 赞同：0
> 
> 时间：2012-08-26T14:50:30.270
> 
> 标签：forms, default-value, cakephp-2.1

I'm using this way to set the birthday in CakePHP, but when i turn back in the page I always get the current day date, so if I save the page without touch it, i get the today date as birthday:

```
<?php
$attributes = array (
    'minYear' => date('Y') - 100,
    'maxYear' => date('Y') - 0,
    'label'=> false,
    'default' => $user['Profile']['birthday'],
    'value'=>$user['Profile']['birthday'] // how to set the previous saved data?
);
$options = array (
    'id' => 'birthday',
    'after' => '<div class="message">Inserisce la tua data di nascita</div>'
);
echo $this->Form->input('Profile.birthday', $attributes, $options);
?> 
```

How can i set the previous saved data from the database to the form?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-29T12:32:23.820

这种类型的输入以这种格式存储数据：

您可以将值以这种格式放入控制器中：

```
$this->request->data['Profile']['birthday']['year'] ='xxxx'; 
$this->request->data['Profile']['birthday']['month']='xx';
$this->request->data['Profile']['birthday']['day'] = 'xx'; 
```

它将自动显示为在视图中选择。

询问是否不适合您

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-27T20:14:32.287

根据您的问题，我假设您正在编写某种编辑表单。在这种情况下，CakePHP 应该在您的输入中自动设置保存的表单数据。您应该能够保存地丢弃`default`并`value`在您的-array 中`$options`。

调试`$this->form->data`看看数据是否存在。否则你应该检查你的控制器代码。

顺便说一句：输入函数的签名是[`public function input($fieldName, $options = array())`](http://api20.cakephp.org/view_source/form-helper#line-942)，因此您可能希望将`$options`-array 中的值合并到`$attributes`-array。

# jquery-mobile - jQuery mobile datebox: any API documentation?

> ID：12131078
> 
> 赞同：1
> 
> 时间：2012-08-26T14:51:39.223
> 
> 标签：jquery-mobile, datebox, daterangepicker

I am trying to use jquery.mobile datebox as a datepicker for my jquery mobile app... I find some difficulties finding a page with the full APIs specification... For example, I do not fully understand the option "useInlineHideInput", but I can't find any documentation about it... Is there any jQuery mobile datebox API documentation available?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-26T16:17:07.483

You can find [here](http://dev.jtsage.com/jQM-DateBox2/demos/fullopt.html) the full options list for the latest version jQM Datebox 2.

You can find information about the useInlineHideInput option [here](http://dev.jtsage.com/jQM-DateBox1/demos/opt/dialog.html). It seems that this option is available in jQM Datebox 1\. In version 2 you can force DateBox to display inline with 'useInline' and 'hideInput' set to 'true'.

To understand the functionality of the specific option put the following HTML in a file and change the options value from true to false.

```
<html> 
    <head> 
        <title></title> 
        <meta name="viewport" content="width=device-width, initial-scale=1"> 
        <link rel="stylesheet" type="text/css" href="http://code.jquery.com/mobile/latest/jquery.mobile.min.css" />
        <link rel="stylesheet" type="text/css" href="http://dev.jtsage.com/cdn/datebox/latest/jqm-datebox.min.css" /> 
        <script type="text/javascript" src="http://code.jquery.com/jquery-1.7.1.min.js"></script> 
        <script type="text/javascript" src="http://code.jquery.com/mobile/latest/jquery.mobile.min.js"></script>
       <script type="text/javascript" src="http://dev.jtsage.com/cdn/datebox/latest/jquery.mobile.datebox.min.js"></script>
    </head> 
    <body> 
        <div data-role="page">
            <label for="mydate">Some Date</label>
            <input name="mydate" id="mydate" type="date" data-role="datebox" data-options='{"useInline": true, "useInlineHideInput": true}'>
        </div>
    </body>
</html>​ 
```

I hope this helps.

# ruby-on-rails - Omniauth、Devise、Open ID、CanCan - 我应该在什么时候以及什么时候为 Rails API 应用程序使用哪种解决方案

> ID：12131079
> 
> 赞同：4
> 
> 时间：2012-08-26T14:51:39.190
> 
> 标签：ruby-on-rails, openid, authorization, oauth-2.0, omniauth

所以我正在开发一个 Rails 应用程序——主要服务于 API，我想通过一个好的授权系统来锁定它。我创建了渲染 HTML 的 Rails 应用程序，为此我使用了 Devise 和 CanCan。这次我想为我的客户提供 JSON。我基本上有以下要求：

1.  需要一个强大的授权系统
2.  用户应该能够使用现有的应用程序登录，例如 facebook、twitter、linked in 和 google
3.  应该有可用的全栈授权

现在这是我编写的第一个提供 API 的应用程序，所以我开始研究，到目前为止，我发现了人们使用的以下解决方案：

1.  我见过人们使用带有 CanCan 的 Devise
2.  我见过人们谈论使用 Oauth2 [http://railscasts.com/episodes/353-oauth-with-doorkeeper?autoplay=true](http://railscasts.com/episodes/353-oauth-with-doorkeeper?autoplay=true)
3.  我听说过……“使用门卫”
4.  我听说使用...“使用omniauth”

所以基本上我 1 天的研究基本上只是让我更加困惑。当我使用这些以及我的要求时，我将使用哪种组合！我很难理解字母汤，有人能帮我理解吗

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-26T15:32:41.923

Devise 是适用于所有类型的 Rails 应用程序的身份验证引擎。Devise 允许针对用户名/密码进行身份验证、令牌身份验证（适用于 API）和 oauth 提供者（例如 Google、Facebook 等）。这显然允许您拒绝访问 API，除非用户通过您提供的服务之一登录。

CanCan 是一个授权系统，它将在 Devise 之上运行，允许用户根据他们在系统中的角色访问系统的某些部分。CanCan 有一个非常灵活的 DSL 提供`can`和`cannot`方法来允许或拒绝访问视图或控制器操作。

如果您想在 API 之上推出自己的 oauth 解决方案，Doorkeeper 是一个 oauth 提供者的瑰宝。如果您希望您的应用程序以与 Google 或 Facebook 相同的方式为用户提供身份验证端点，这将是这样的。从你上面所说的，我认为情况并非如此。

鉴于您在上面提供的要求，我相信 Devise 和 CanCan 将是我会选择的路线。这将允许用户首先通过用户名/密码或某些 oauth 提供者进行身份验证，然后允许令牌身份验证以访问您的 API。然后，您可以通过 CanCan 锁定对特定操作的访问。

# asp.net-mvc - MVC3 MapRoute在没有区域的控制器名称和相等的区域名称之间不明确

> ID：12131080
> 
> 赞同：2
> 
> 时间：2012-08-26T14:51:48.470
> 
> 标签：asp.net-mvc, asp.net-mvc-3, maproute

这是我在根目录下的控制器（无区域）：

*   家
*   成员

我的领域是：

+一般

*   控制器1
*   控制器2

+会员

*   管理
*   成员

因此`Login`，在添加成员区域之前，我的操作在成员控制器中（在根目录中），一切都很好，但知道我收到此 url 的 404 错误（http://MyProject.dev/members/login?ReturnUrl=%2f）

那么如何定义一个 MapRoute 来解决这个问题呢？

**更新**

我在 Main 试试这个`Global.asax`：

```
routes.MapRoute(
             "newLogMaproute",
             "members/login{*pathInfo}",
             new { area = "", controller = "Members", action = "Login"}
        ); 
```

但是有一个错误：`A path segment that contains more than one section, such as a literal section or a parameter, cannot contain a catch-all parameter.`

我试试这个：

```
routes.MapRoute(
             "newLogMaproute",
             "members/login/{*pathInfo}",
             new { area = "", controller = "Members", action = "Login"}
        ); 
```

但是这个返回了 404。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-26T15:32:46.527

这里发生的情况是区域注册发生在您的成员路由之前，因此区域路由始终优先。

我通过在 Global.asax 中创建以下内容在测试应用程序中修复了此问题：

```
 public static void RegisterPreAreaRoutes(RouteCollection routes)
  {
     routes.MapRoute(
     "Members", // Route name
     "members/login", // URL with parameters
     new { controller = "members", action = "login" } // Parameter defaults
   );
  } 
```

然后在 Application_Start 中确保在注册区域*之前*映射此路由：

```
 protected void Application_Start()
  {
     RegisterPreAreaRoutes(RouteTable.Routes);
     AreaRegistration.RegisterAllAreas();
     RegisterGlobalFilters( GlobalFilters.Filters );
     RegisterRoutes( RouteTable.Routes );
  } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-05-07T20:13:26.470

您需要为您所在地区定义自定义路线。不是很好。之后你可能会遇到问题。最好不要产生歧义。

不要忘记使用 new string[] 在 rotes 配置中定义命名空间：

```
 routes.MapRoute(
     "Members", // Route name
     "members/login", // URL with parameters
     new { }, // Parameter defaults
     new[] { "WebApp.Controllers" } // Namespaces for find 
   ); 
```

# nhibernate - nhibernate legacy database extra columns

> ID：12131081
> 
> 赞同：0
> 
> 时间：2012-08-26T14:51:48.840
> 
> 标签：nhibernate

I have legacy database. I need to add nhibernate but for several columns in a table. How can I make nhibernate not to complain that there are no properties for some columns. In the future it is possible that new columns will be added, but they are not needed in my project. How can I do this ?

Regards, Darko

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-26T17:07:42.887

如果这些数据库列可以为*空*，或者它们具有*默认值*，那么您应该不会有任何问题。当您考虑它时，当您尝试对表执行 SQL INSERT 时也是如此。

只需将您需要的列映射到类的属性。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-26T17:10:17.200

如果您只需要阅读，请不要映射它们；

否则，如果需要写入它们，则需要映射它们（如果它们不可为空或没有默认值），以便提供数据库所需的值。

# php - php从文件夹中获取jpg文件作为数组

> ID：12131084
> 
> 赞同：3
> 
> 时间：2012-08-26T14:52:17.707
> 
> 标签：php, random

帮我从数组中的文件夹中获取文件。我正在尝试`array`从文件夹中获取所有 jpg 文件名`images`。然后使用`rand`随机更改c​​ss背景。

arry 文件夹中的 JPG 文件；

```
$images=array("image1.jpg", "image2.jpg"); 
```

然后使用`rand`随机加载图像

```
echo '<style>body{background:url('.$images[array_rand($images)].')no-repeat;'; 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-26T22:26:13.653

将目录传递给[scandir](http://php.net/manual/en/function.scandir.php)以获取该目录中所有文件的数组。也许使用[array_filter](http://php.net/manual/en/function.array-filter.php)然后按文件扩展名过滤掉任何非图像。

```
 $files = scandir( '/image/path' );

    function images_only( $file )
    {
      return preg_match( '/\.(gif|jpg|png)$/i', $file );
    }

    $files = array_filter( $files, 'images_only' ); 
```

**$files**现在应该只包含来自图像路径的图像。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-26T14:59:41.280

把它[通通](http://us3.php.net/glob)

**用 array_rand 修复**编辑****

 **```
$images = glob("images/*.jpg");
// may want to verify that the $images array has elements before echoing
echo '<style>body{background:url('.$images[array_rand($images)].') no-repeat;'; 
```**

# c# - 使用c#以BLOB格式显示存储在MySql数据库中的图像

> ID：12131087
> 
> 赞同：1
> 
> 时间：2012-08-26T14:52:52.857
> 
> 标签：c#, mysql

我正在使用以下函数将图像存储在数据库中

```
 void SaveImage(byte[] image)
        {
            MySqlConnection con = new MySqlConnection(db);//new connection is made
            con.Open();

                string cmdText = "INSERT INTO Picture(RoomNo ,pic )VALUES ('" + RoomNo.Text + "',?Image)";
                MySqlCommand cmd = new MySqlCommand(cmdText, con);
                cmd.Parameters.Add("?Image", image);
                cmd.ExecuteNonQuery();

        } 
```

在main中，我正在调用这样的函数

```
 using (var ms = new MemoryStream())
            {
                picbox.Image.Save(ms, System.Drawing.Imaging.ImageFormat.Jpeg);
                SaveImage(ms.ToArray());
            } 
```

我不知道如何在图片框中显示它..有人可以帮助我吗？？？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-26T14:58:53.803

您在使用 Windows 窗体吗？并且您必须将字节数组转换为图像才能在图片框中显示它。

```
public Image byteArrayToImage(byte[] byteArrayIn)
{
    MemoryStream ms = new MemoryStream(byteArrayIn);
    Image returnImage = Image.FromStream(ms);
    return returnImage;
} 
```

以及如何将 Image 转换为字节数组。我希望这个问题不存在。您可以使用：

```
 private byte[] ImageToByteArray(string ImageFile)
    {
        FileStream stream = new FileStream(
              ImageFile, FileMode.Open, FileAccess.Read);
        BinaryReader reader = new BinaryReader(stream);

        // Convert image to byte array.
        byte[] photo = reader.ReadBytes((int)stream.Length);

        return photo;
    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-26T14:58:05.120

使用 Image 方法（FromStream）设置您的图像图片框

```
 yourPictureBox.Image = Image.FromStream(ms); 
```

# css - 为什么这个被访问的主播总是紫色的？

> ID：12131089
> 
> 赞同：5
> 
> 时间：2012-08-26T14:53:08.690
> 
> 标签：css, html

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-08-26T14:57:40.237

`a:selected`从您的 css 定义中删除。那为我修好了。没听说过`:selected`。它在任何地方都有记录吗？

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-08-26T14:57:20.670

因为`a:selected`不存在。去掉它！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-26T15:03:25.400

# ruby-on-rails - 具有多个条目的搜索表单 collection_select

> ID：12131091
> 
> 赞同：0
> 
> 时间：2012-08-26T14:54:01.863
> 
> 标签：ruby-on-rails, ruby-on-rails-3, search

对于允许用户通过输入演员姓名来搜索电影的电影网站，我[在 Advanced Search Forms 上引用了 Railscast](http://railscasts.com/episodes/111-advanced-search-form)，但在同一参数中搜索多个条目时遇到了困难。（即多个演员条目）。

下面的代码允许选择多个actor，但我不确定如何重写模型代码以允许多个actor_id。

反馈将不胜感激！

**搜索/new.html.erb**

```
<%= f.label :actor_id %>
<%= f.collection_select :actor_id, Actor.order(:name), :id, :name, {}, {:multiple => true}%> 
```

**搜索.rb**

```
def movies
  @movies ||= find_movies
end

private
  def find_movies
    movies = movies.where(actor_id: actor_id)
  end 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-26T17:06:27.787

由于您将这些查询保存在数据库中，请尝试此操作

```
 def find_movies
     movies = Movie.order(:name)
     movies = movies.where(actor_id: actor_id) if actor_id.present?
  end 
```

无需保存查询，您就可以实现它

在你的 search.rb

```
 def find_movies(actors)
       movies = Movie.where(:actor_id => actors)
    end 
```

然后在您发送参数的控制器操作中

```
 find_movies(params[:actor_id]) 
```

编辑

从你的actor_id中提取id使用这个

```
 ["actor_id", ["", "1", "2"]][1].delete_if {|f| f == ""} 
```

所以你的方法应该是这样的

```
 def find_movies
      ids = self.actor_id[1].delete_if {|f| f == ""}
      movies = Movie.order(:name)
      movies = movies.where(actor_id: ids) if actor_id.present?
  end 
```

# excel - 如何确定当前行？

> ID：12131093
> 
> 赞同：0
> 
> 时间：2012-08-26T14:54:04.337
> 
> 标签：excel, formatting, excel-formula, conditional-formatting

如果 B 列中的文本是某些值，我正在使用条件格式尝试更改 A 列中单元格的颜色。目前我的三个公式是这样的：

```
=$B$2="Low"
=$B$2="Good"
=$B$2="High" 
```

我需要一种快速将其推送到所有 50 列的方法，因此我想如果我可以将公式更改为以下公式，它会起作用我只是不知道如何：

```
=$B$ThisCellsRow()="Low"
=$B$ThisCellsRow()="Good"
=$B$ThisCellsRow()="High" 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-26T15:03:34.637

您正在使用绝对单元格引用（`$`地址中的），这会阻止 Excel 在您添加/删除行和移动公式时调整地址。如果`$B2`改为使用，则当您向下拖动公式时，Excel 可以将其调整为`$B3`、`$B4`等`$B5`。使用这种格式，`B`列保持不变，而行部分是灵活的。

# c# - 哪个 sql server 版本最适合首先使用实体 框架代码快速保存数据？

> ID：12131099
> 
> 赞同：1
> 
> 时间：2012-08-26T14:55:04.380
> 
> 标签：c#, .net, database, entity-framework, ef-code-first

我对数据库主题很陌生，我希望我的问题没问题。

我想首先使用实体​​框架代码构建一个带有数据库的应用程序。

关于我将拥有的数据库的信息：

*   每天都会创建一个新数据库。
*   一个数据库将包含大约 9 个表，每个表最多有 50 列。
*   总 DB 文件大小应约为 2GB。
*   该应用程序将每天连续保存数据 7 小时。

在应用程序中将有 2 个线程 - 一个用于创建数据并将其放入缓冲区，另一个用于从缓冲区获取数据并将其保存在数据库中。

我的主要要求是该`SaveChanges()`功能将尽可能快地完成，因为每天需要保存大量数据，并且我担心“保存数据”线程不会像“创建数据”那样快线程，因此缓冲区将溢出。

我应该使用哪个 sql server 版本？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-26T15:00:16.197

最快的将是最昂贵的——即支持最多内存、最多内核、最多 CPU 的那个（假设你给了它所有的硬件来使用，否则它并不重要）。在同一块硬件上，除了许可之外，各种版本（CE 除外）都应该以相同的性能水平运行。问题真的应该是，哪一个足够快……我们没有足够的信息来回答这个问题。否则，您可能会在软件许可证（和硬件）上投入大量资金来获得您可能不需要的性能和/或通过优化和/或更改某些代码可以获得的性能。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-26T15:06:31.047

您应该能够使用几乎任何版本的 SQL Server。下面是 SQL Server 上当前版本的比较表：http: [//msdn.microsoft.com/en-us/library/cc645993](http://msdn.microsoft.com/en-us/library/cc645993(v=SQL.110).aspx) (v=SQL.110).aspx 如果你看那里，express 版本只允许 10GB数据库的限制。因此，快速版本似乎不错，但如果您接近 10GB 或希望它更快一点，请查看标准版本。

# c# - 运行 ProgId 动词的命令

> ID：12131100
> 
> 赞同：2
> 
> 时间：2012-08-26T14:55:10.780
> 
> 标签：c#, .net, windows, winapi, com

有没有一种方法可以执行 progid 动词的命令，而无需在注册表中挖掘并进行字符串操作？

使用 ShObjIdl.idl 我可以运行以下命令来获取默认浏览器的 ProgId：

```
var reg = new ShellObjects.ApplicationAssociationRegistration();

string progID;
reg.QueryCurrentDefault("http", ShellObjects.ASSOCIATIONTYPE.AT_URLPROTOCOL, ShellObjects.ASSOCIATIONLEVEL.AL_EFFECTIVE, out progID); 
```

这给了我“ChromeHTML.FHXQEQDDJYXVQSFWM2SVMV5GNA”。在注册表中，我可以看到这个 progid 具有以下 shell/open/command：

```
"C:\Users\Paul\AppData\Local\Google\Chrome\Application\chrome.exe" -- "%1" 
```

是否有一个 API 可以将 ProgId 以及动词和参数传递给它并运行它？

我走的一条路线是使用 ShellExecuteEx：

```
var shellExecuteInfo = new SHELLEXECUTEINFO();
shellExecuteInfo.cbSize = Marshal.SizeOf(shellExecuteInfo);
shellExecuteInfo.fMask = SEE_MASK_CLASSNAME;
shellExecuteInfo.hwnd = IntPtr.Zero;
shellExecuteInfo.lpVerb = "open";
shellExecuteInfo.lpFile = "google.com";
shellExecuteInfo.nShow = SW_SHOWNORMAL;
shellExecuteInfo.lpClass = "http";

ShellExecuteEx(ref shellExecuteInfo); 
```

但是，由于 Window 正在检查 lpFile，因此失败并出现“Windows 找不到”错误，我不想发生这种情况，因为它与 URL 无关（来自：http: [//blogs.msdn.com/b/ oldnewthing/archive/2010/07/01/10033224.aspx](http://blogs.msdn.com/b/oldnewthing/archive/2010/07/01/10033224.aspx)）

* * *

这是我想出的解决方案：

```
 private static void Main(string[] args)
    {
        if (!OpenUrlInDefaultBrowser("google.com"))
            Console.WriteLine("An error happened");
    }

    [DllImport("Shlwapi.dll")]
    private static extern int AssocQueryString(ASSOCF flags, ASSOCSTR str, string pszAssoc, string pszExtra, StringBuilder pszOut, ref uint pcchOut);

    private enum ASSOCF
    {
        ASSOCF_NONE = 0x00000000
    }

    private enum ASSOCSTR
    {
        ASSOCSTR_COMMAND = 1
    }

    [DllImport("Shell32.dll", CharSet=CharSet.Auto)]
    private static extern int SHEvaluateSystemCommandTemplate(string pszCmdTemplate, out string ppszApplication, out string ppszCommandLine, out string ppszParameters);

    private static bool OpenUrlInDefaultBrowser(string url)
    {
        string browserProgId;
        if (!GetDefaultBrowserProgId(out browserProgId))
            return false;

        string browserCommandTemplate;
        if (!GetCommandTemplate(browserProgId, out browserCommandTemplate))
            return false;

        string browserExecutable;
        string parameters;
        if (!EvaluateCommandTemplate(browserCommandTemplate, out browserExecutable, out parameters))
            return false;

        parameters = ReplaceSubstitutionParameters(parameters, url);

        try
        {
            Process.Start(browserExecutable, parameters);
        }
        catch (InvalidOperationException) { return false; }
        catch (Win32Exception) { return false; }
        catch (FileNotFoundException) { return false; }

        return true;
    }

    private static bool GetDefaultBrowserProgId(out string defaultBrowserProgId)
    {
        try
        {
            // midl "C:\Program Files (x86)\Windows Kits\8.0\Include\um\ShObjIdl.idl"
            // tlbimp ShObjIdl.tlb
            var applicationAssociationRegistration = new ApplicationAssociationRegistration();
            applicationAssociationRegistration.QueryCurrentDefault("http", ShellObjects.ASSOCIATIONTYPE.AT_URLPROTOCOL, ShellObjects.ASSOCIATIONLEVEL.AL_EFFECTIVE, out defaultBrowserProgId);
        }
        catch (COMException)
        {
            defaultBrowserProgId = null;
            return false;
        }
        return !string.IsNullOrEmpty(defaultBrowserProgId);
    }

    private static bool GetCommandTemplate(string defaultBrowserProgId, out string commandTemplate)
    {
        var commandTemplateBufferSize = 0U;
        AssocQueryString(ASSOCF.ASSOCF_NONE, ASSOCSTR.ASSOCSTR_COMMAND, defaultBrowserProgId, "open", null, ref commandTemplateBufferSize);
        var commandTemplateStringBuilder = new StringBuilder((int)commandTemplateBufferSize);
        var hresult = AssocQueryString(ASSOCF.ASSOCF_NONE, ASSOCSTR.ASSOCSTR_COMMAND, defaultBrowserProgId, "open", commandTemplateStringBuilder, ref commandTemplateBufferSize);
        commandTemplate = commandTemplateStringBuilder.ToString();

        return hresult == 0 && !string.IsNullOrEmpty(commandTemplate);
    }

    private static bool EvaluateCommandTemplate(string commandTemplate, out string application, out string parameters)
    {
        string commandLine;
        var hresult = SHEvaluateSystemCommandTemplate(commandTemplate, out application, out commandLine, out parameters);

        return hresult == 0 && !string.IsNullOrEmpty(application) && !string.IsNullOrEmpty(parameters);
    }

    private static string ReplaceSubstitutionParameters(string parameters, string replacement)
    {
        // Not perfect but good enough for this purpose
        return parameters.Replace("%L", replacement)
                         .Replace("%l", replacement)
                         .Replace("%1", replacement);
    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-26T18:44:55.950

这里的基本错误是您`http://`从`FileName`. 添加它，一切都会好起来的。

```
shellExecuteInfo.lpFile = "http://google.com"; 
```

你根本不需要设置`lpClass`。`lpFile`以开头的事实`http://`决定了类别。

* * *

与其打电话给`ShellExecuteEx`自己，不如为自己`Process`做：

```
ProcessStartInfo psi = new ProcessStartInfo();
psi.FileName = @"http://google.com";
psi.UseShellExecute = true;
Process.Start(psi); 
```

甚至：

```
Process.Start(@"http://google.com"); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-27T02:34:50.147

显式类不会删除`lpFile`引用有效资源（文件或 URL）的要求。类指定了资源应该如何执行（而不是从文件类型或 URL 协议中推断出类），但您仍然必须传递一个有效的资源。`google.com`被视为文件名，因为它不是 URL，并且该文件不存在，因此您会收到“未找到”错误。

您尝试做的一般情况比仅提取命令行更复杂，因为大多数浏览器使用 DDE 而不是命令行作为它们的主要调用。（命令行是 DDE 失败时的后备。）

但是如果你真的要执行一个命令行，你可以使用`AssocQueryString`来获取`ASSOCSTR_COMMAND`，然后执行插入 via`SHEvaluateSystemCommandTemplate`来获取命令行来执行。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-04-29T18:44:39.113

我的代码包括检查以防止一些常见错误...希望它有所帮助:-)

```
using System;
using System.Diagnostics;
using System.IO;
using System.Runtime.InteropServices;
using System.Text;

namespace HQ.Util.Unmanaged
{
    /// <summary>
    /// Usage: string executablePath = FileAssociation.GetExecFileAssociatedToExtension(pathExtension, "open");
    /// Usage: string command FileAssociation.GetExecCommandAssociatedToExtension(pathExtension, "open");
    /// </summary>
    public static class FileAssociation
    {
        /// <summary>
        /// 
        /// </summary>
        /// <param name="ext"></param>
        /// <param name="verb"></param>
        /// <returns>Return null if not found</returns>
        public static string GetExecCommandAssociatedToExtension(string ext, string verb = null)
        {
            if (ext[0] != '.')
            {
                ext = "." + ext;
            }

            string  executablePath = FileExtentionInfo(AssocStr.Command, ext, verb);

            // Ensure to not return the default OpenWith.exe associated executable in Windows 8 or higher
            if (!string.IsNullOrEmpty(executablePath) && File.Exists(executablePath) &&
                !executablePath.ToLower().EndsWith(".dll"))
            {
                if (executablePath.ToLower().EndsWith("openwith.exe"))
                {
                    return null; // 'OpenWith.exe' is th windows 8 or higher default for unknown extensions. I don't want to have it as associted file
                }
                return executablePath;
            }
            return executablePath;
        }

        /// <summary>
        /// 
        /// </summary>
        /// <param name="ext"></param>
        /// <param name="verb"></param>
        /// <returns>Return null if not found</returns>
        public static string GetExecFileAssociatedToExtension(string ext, string verb = null)
        {
            if (ext[0] != '.')
            {
                ext = "." + ext;
            }

            string executablePath = FileExtentionInfo(AssocStr.Executable, ext, verb); // Will only work for 'open' verb
            if (string.IsNullOrEmpty(executablePath))
            {
                executablePath = FileExtentionInfo(AssocStr.Command, ext, verb); // required to find command of any other verb than 'open'

                // Extract only the path
                if (!string.IsNullOrEmpty(executablePath) && executablePath.Length > 1) 
                {
                    if (executablePath[0] == '"')
                    {
                        executablePath = executablePath.Split('\"')[1];
                    }
                    else if (executablePath[0] == '\'')
                    {
                        executablePath = executablePath.Split('\'')[1];
                    }
                }
            }

            // Ensure to not return the default OpenWith.exe associated executable in Windows 8 or higher
            if (!string.IsNullOrEmpty(executablePath) && File.Exists(executablePath) &&
                !executablePath.ToLower().EndsWith(".dll"))
            {
                if (executablePath.ToLower().EndsWith("openwith.exe"))
                {
                    return null; // 'OpenWith.exe' is th windows 8 or higher default for unknown extensions. I don't want to have it as associted file
                }
                return executablePath;
            }
            return executablePath;
        }

        [DllImport("Shlwapi.dll", SetLastError = true, CharSet = CharSet.Auto)]
        static extern uint AssocQueryString(AssocF flags, AssocStr str, string pszAssoc, string pszExtra, [Out] StringBuilder pszOut, [In][Out] ref uint pcchOut);

        private static string FileExtentionInfo(AssocStr assocStr, string doctype, string verb)
        {
            uint pcchOut = 0;
            AssocQueryString(AssocF.Verify, assocStr, doctype, verb, null, ref pcchOut);

            Debug.Assert(pcchOut != 0);
            if (pcchOut == 0)
            {
                return "";
            }

            StringBuilder pszOut = new StringBuilder((int)pcchOut);
            AssocQueryString(AssocF.Verify, assocStr, doctype, verb, pszOut, ref pcchOut);
            return pszOut.ToString();
        }

        [Flags]
        public enum AssocF
        {
            Init_NoRemapCLSID = 0x1,
            Init_ByExeName = 0x2,
            Open_ByExeName = 0x2,
            Init_DefaultToStar = 0x4,
            Init_DefaultToFolder = 0x8,
            NoUserSettings = 0x10,
            NoTruncate = 0x20,
            Verify = 0x40,
            RemapRunDll = 0x80,
            NoFixUps = 0x100,
            IgnoreBaseClass = 0x200
        }

        public enum AssocStr
        {
            Command = 1,
            Executable,
            FriendlyDocName,
            FriendlyAppName,
            NoOpen,
            ShellNewValue,
            DDECommand,
            DDEIfExec,
            DDEApplication,
            DDETopic
        }
    }
} 
```

# utf-8 - mod_jk utf-8 字符集设置

> ID：12131101
> 
> 赞同：2
> 
> 时间：2012-08-26T14:55:11.700
> 
> 标签：utf-8, character-encoding, tomcat7, apache, mod-jk

我在 Ubuntu 中运行 httpd + mod_jk + 2 个 tomcat 服务器。当我以非拉丁语言提交表单时，我在数据库中得到垃圾。如果我通过 Tomcat 直接绕过 httpd 提交相同的表单，一切看起来都很好。以下是我的配置：

/etc/apache2/conf.d/charset：

> AddDefaultCharset UTF-8

Tomcat1：

> < 连接器端口="8080" 协议="AJP/1.3" connectionTimeout="20000" redirectPort="8443" URIEncoding="UTF-8" />

Tomcat2：

> < 连接器端口="9080" 协议="AJP/1.3" connectionTimeout="20000" redirectPort="9443" URIEncoding="UTF-8" />

JDBC连接：

> jdbc:mysql://localhost:3306/myapp?useEncoding=true&characterEncoding=UTF-8

/etc/apache2/mods-available/jk.conf（我设置负载均衡器的同一个文件）

> JkOptions +ForwardURICompatUnparsed

我错过了什么吗？谢谢你！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-27T23:13:48.647

我发现了我的问题，我将 HTTP 连接器与在 Tomcat 的 server.xml 中声明了两次的 AJP 连接器混合在一起。第二个声明甚至不包括属性 URIEncoding。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2017-04-06T12:23:08.160

```
<Connector URIEncoding="UTF-8" port="8009" protocol="AJP/1.3" connectionTimeout="10000" keepAliveTimeout="10000" redirectPort="8443"/> 
```

对我来说很好

# android - WebView textarea 不允许用户输入值

> ID：12131102
> 
> 赞同：2
> 
> 时间：2012-08-26T14:55:15.150
> 
> 标签：android, android-webview

我在 android 的 webview 中使用 textarea。当用户单击 textarea 时，keybpard 会弹出，但用户无法在其中输入任何文本。

这是我的代码

```
super.onCreate(savedInstanceState);
setContentView(R.layout.activity_main);
df = (WebView) findViewById(R.id.webView1);
df.getSettings().setJavaScriptEnabled(true);
df.getSettings().setLightTouchEnabled(true);
df.getSettings().setSaveFormData(true);
df.getSettings().setDomStorageEnabled(true);
df.loadUrl("file:///android_asset/index.html");
df.requestFocus(); 
```

在桌面浏览器中运行相同的文件时，我可以编辑 textarea 中的内容。

# javascript - 如何按名称对四方场地进行排序（即排序

> ID：12131120
> 
> 赞同：1
> 
> 时间：2012-08-26T14:58:16.757
> 
> 标签：javascript, json, sorting, foursquare

我正在使用foursquare 场地API 在我的Web 应用程序中填充选择菜单和列表。我想按名称的字母顺序对场地进行排序。

这是来自foursquare API的JSON响应，它有一些场所：

```
[ { "reasons": { "count": 1, "items": [ { "summary": "This spot is popular on foursquare", "type": "general", "reasonName": "globalInteractionReason" } ] }, "venue": { "id": "4c6ee03fb5a5236a74744b52", "name": "Peninsular Paper Dam", "contact": {}, "location": { "address": "1265 Leforge Rd", "crossStreet": "at Huron River Rd", "lat": 42.256628, "lng": -83.623933, "distance": 892, "postalCode": "48198", "city": "Ypsilanti", "state": "MI", "country": "United States", "cc": "US" }, "categories": [ { "id": "4bf58dd8d48988d165941735", "name": "Scenic Lookout", "pluralName": "Scenic Lookouts", "shortName": "Scenic Lookout", "icon": { "prefix": "https://foursquare.com/img/categories_v2/parks_outdoors/sceniclookout_", "suffix": ".png" }, "primary": true } ], "verified": false, "stats": { "checkinsCount": 31, "usersCount": 12, "tipCount": 0 }, "likes": { "count": 0, "groups": [] }, "specials": { "count": 0, "items": [] }, "photos": { "count": 2, "groups": [] } } }, { "reasons": { "count": 1, "items": [ { "summary": "This spot is popular on foursquare", "type": "general", "reasonName": "globalInteractionReason" } ] }, "venue": { "id": "4ba58202f964a520cb0d39e3", "name": "Benito's Pizza", "contact": { "phone": "7349610707", "formattedPhone": "(734) 961-0707" }, "location": { "address": "1088 N Huron River Dr", "lat": 42.256532, "lng": -83.629082, "distance": 1035, "postalCode": "48197", "city": "Ypsilanti", "state": "MI", "country": "United States", "cc": "US" }, "categories": [ { "id": "4bf58dd8d48988d1ca941735", "name": "Pizza Place", "pluralName": "Pizza Places", "shortName": "Pizza", "icon": { "prefix": "https://foursquare.com/img/categories_v2/food/pizza_", "suffix": ".png" }, "primary": true } ], "verified": false, "stats": { "checkinsCount": 50, "usersCount": 34, "tipCount": 0 }, "url": "http://www.benitospizza.com/", "likes": { "count": 0, "groups": [] }, "menu": { "type": "foodAndBeverage", "url": "https://foursquare.com/v/benitos-pizza/4ba58202f964a520cb0d39e3/menu", "mobileUrl": "https://foursquare.com/v/4ba58202f964a520cb0d39e3/device_menu" }, "specials": { "count": 0, "items": [] }, "photos": { "count": 0, "groups": [] } } } ] 
```

我可以使用以下代码解析此响应：

```
for (var i = 0; i < venues.length; i++) {
   name = venues[i]['venue']['name'];
   category = venues[i]['venue']['categories'][0]['name'];
   icon = venues[i]['venue']['categories'][0]['icon']['prefix'];
   icon = icon.slice(0, -1); // remove trailing "_" character
   icon = icon + venues[i]['venue']['categories'][0]['icon']['suffix'];
   address = venues[i]['venue']['location']['address'];
   city = venues[i]['venue']['location']['city'];
   state = venues[i]['venue']['location']['state'];
   distance_meters = venues[i]['venue']['location']['distance'];
   distance_miles = distance_meters / 1609.34;
   distance_miles = Math.round(distance_miles*100)/100;
   x = 1; // in the product use i for index below
   HTMLmarkupList += "<li><a href=\"#lister_" + x + "\"><img src=\"" + icon + "\" class=\"ui-li-thumb\" style=\"margin: 23px 10px\" onerror=\"ImgError(this);\">" + "<h3 style=\"margin-left: -40px\">" + name + "</h3><p style=\"margin-left: -40px\">" + category + "</p><p style=\"margin-left: -40px\">" + address + ", " + city + ", " + state + "</p><p style=\"margin-left: -40px\">" + distance_miles + " miles from you.</p></a></li>";

   HTMLmarkupSelect += "<option value\"" + i + "\">" + name + "</option>";
} 
```

现在，选择的值只是 i，但由于我需要将其他变量与名称一起存储在我的数据库中，我可能会更新每个选择选项中的值以包括地址、城市、州、等等......我提到这一点是因为如果我只在选择中使用名称，我可以构建一个名称数组并使用 javascript 排序方法。

任何人都可以帮助如何按名称按字母顺序对场地进行排序？谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-26T15:00:24.690

信息：

*   [http://www.w3schools.com/jsref/jsref_sort.asp](http://www.w3schools.com/jsref/jsref_sort.asp)

例子：

```
venues.sort(function(a,b){
  if(a.venue.name == b.venue.name) return 0;
  return (a.venue.name < b.venue.name) ? -1 : 1;
}); 
```

# c# - 如何单击特定的 div 并从中获取信息 asp.net c#

> ID：12131122
> 
> 赞同：2
> 
> 时间：2012-08-26T14:58:16.187
> 
> 标签：c#, asp.net, .net

我正在为时间表制作一张桌子并将div放在桌子上。人们可以通过单击其中一个来进行新的约会`div`。

单击 div 时，我正在更改活动视图。我需要在 div 中嵌入信息，以便可以在数据库中使用它，并且我想知道单击了哪个 div。

我该如何解决这个问题？这是我的代码：

```
HtmlGenericControl div = new HtmlGenericControl("DIV");
div.Style.Add(HtmlTextWriterStyle.Width, "60px");
div.Style.Add(HtmlTextWriterStyle.MarginTop, "1px");
div.Style.Add(HtmlTextWriterStyle.BackgroundColor, "green");
div.Style.Add(HtmlTextWriterStyle.Height, last * 40 + "px");
div.Attributes.Add("onclick", "somefunction()");
div.Style.Add("cursor", "pointer");
bul.Controls.Add(div); 
```

`bul`是一个表格单元格，我在其中放置了一个 DIV。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-26T15:09:58.760

不要忘记在你的 div 服务器控件中设置一个 ID

请参阅此 url，它解释了如何在 javascript 中引用您的服务器控件：

[http://encosia.com/2007/08/08/robust-aspnet-control-referencing-in-javascript/](http://encosia.com/2007/08/08/robust-aspnet-control-referencing-in-javascript/)

文章摘录：

```
$get('<%= yourdiv.ClientID %>')

<script>
  alert('yourdiv has a value of: ' + $get('<%= yourdiv.ClientID %>').value);
</script> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-26T15:36:31.223

```
> .answer {
width:20px;
height:20px;
border-color:Red;
border:1px;
background-color:Green;

HtmlGenericControl div = new HtmlGenericControl("DIV");
div.ID = "testDiv";
div.Attributes.Add("class", "answer");
div.Attributes.Add("onclick", "somefunction(this)");
this.Controls.Add(div);  // this code shlould be on pageload

 <script language="javascript">
        function somefunction(obj)
        {
            alert(obj.id);
        } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-26T15:42:36.343

恕我直言，您需要重新考虑您的方法。我认为您需要将解决方案分成 3 个不同的部分：

1- 服务器端代码：它将获取有关当前约会的信息，并保存您的受众可能创建的新约会。

2- 标记代码：它应该包含标记的基本构建块，而不是像@Senfo 所建议的那样从服务器端代码生成所有内容。

3-您应该使用一些客户端代码（Javascript）以便在普通视图模式和创建视图模式之间切换。

4-如果你不想使用客户端代码，你应该用 2 个属性装饰你的 div 以便能够在你的 C# 代码中处理它们：

*   ID（每个 div 应该是唯一的）
*   `Runat="Server"`属性

我知道我的解决方案并不完整，但考虑到这是一道作业题，我认为最好引导你走上正确的道路，而是让你按照这些原则继续前进。我认为你可以做到，你现在应该创建一个更清洁的解决方案。

如果您仍然无法弄清楚，我会尝试给您举个例子，但我的建议是深呼吸，并从您自己开始 :)

# regex - 在 Perl 中替换特定的捕获组而不是整个正则表达式

> ID：12131134
> 
> 赞同：12
> 
> 时间：2012-08-26T14:59:50.500
> 
> 标签：regex, perl, replace, capture-group

我有一个带有捕获组的正则表达式，它与我在更广泛的上下文中想要的内容相匹配。然后我采取捕获组`$1`并将其用于我的需要。这很容易。

`s///`但是，当我只想用替换的内容而`$1`不是整个正则表达式替换时，如何使用捕获组呢？

例如，如果我这样做：

```
$str =~ s/prefix (something) suffix/42/ 
```

`prefix`并被`suffix`移除。相反，我想`something`替换为,`42`同时保持原样。`prefix``suffix`

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-08-26T15:07:19.173

据我了解，您可以使用不消耗字符的前瞻或后视。或者将数据保存在组中，只删除您要查找的内容。例子：

具有前瞻性：

```
s/your_text(?=ahead_text)//; 
```

分组数据：

```
s/(your_text)(ahead_text)/$2/; 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-26T15:09:51.763

如果您只需要替换一个捕获，那么使用`@LAST_MATCH_START`and `@LAST_MATCH_END`(with `use English`; see `perldoc perlvar`) with`substr`可能是一个可行的选择：

```
use English qw(-no_match_vars);
$your_string =~ m/aaa (bbb) ccc/;
substr $your_string, $LAST_MATCH_START[1], $LAST_MATCH_END[1] - $LAST_MATCH_START[1], "new content";
# replaces "bbb" with "new content" 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-19T17:39:23.070

这是一个老问题，但我发现下面更容易替换以 to 开头的`>something`行`>something_else`。适合更改 fasta 序列的标题

```
 while ($filelines=~ />(.*)\s/g){
        unless ($1 =~ /else/i){
                $filelines =~ s/($1)/$1\_else/;
        }

  } 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2021-05-12T10:02:29.167

我使用这样的东西：

```
s/(?<=prefix)(group)(?=suffix)/$1 =~ s|text|rep|gr/e; 
```

例子：

在以下文本中，我想规范化空格，但**仅限**于`::=`：

```
some    text     := a   b        c d   e   ; 
```

这可以通过以下方式实现：

```
s/(?<=::=)(.*)/$1 =~ s|\s+| |gr/e 
```

结果：

```
some    text     := a b c d e ; 
```

解释：

`(?<=::=)`: 匹配的后向断言`::=`

`(.*)`: 之后的一切`::=`

`$1 =~ s|\s+| |gr`：使用捕获的组标准化空白。请注意`r`确保不尝试修改`$1`只读的修饰符。使用不同的子定界符 ( `|`) 来不终止替换表达式。

`/e`：将替换文本视为 perl 表达式。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2021-06-27T14:16:41.967

使用[环视断言](https://perldoc.perl.org/perlre#Lookaround-Assertions)。引用文档：

> 环顾断言是零宽度模式，它匹配特定模式而不将其包含在`$&`. 正断言在其子模式匹配时匹配，负断言在其子模式失败时匹配。Lookbehind 将文本匹配到当前匹配位置，lookahead 匹配当前匹配位置之后的文本。

如果字符串的开头具有固定长度，则可以这样做：

```
s/(?<=prefix)(your capture)(?=suffix)/$1/ 
```

但是，[`?<=`](https://perldoc.perl.org/perlre#(?%3C=pattern))它不适用于可变长度模式（从 Perl 5.30 开始，它接受长度小于 255 个字符的可变长度模式，这允许使用`|`，但仍然阻止使用`*`）。解决方法是使用[`\K`](https://perldoc.perl.org/perlre#%5CK)而不是`(?<=)`：

```
s/.*prefix\K(your capture)(?=suffix)/$1/ 
```

# mysql - 从 mysql 数据库查询日期范围内的记录，但不是星期天

> ID：12131137
> 
> 赞同：0
> 
> 时间：2012-08-26T15:00:13.157
> 
> 标签：mysql

您好，我想查询某个日期范围内过去 14 天的 MySQL 数据库。而不是星期天。

该表包含具有“日期”数据类型的列。

请帮忙。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-26T15:04:48.653

```
WHERE DATEDIFF(CURDATE(), table.date) <= 14
AND WEEKDAY(table.date) != 6 #6 is sunday 
```

[http://dev.mysql.com/doc/refman/5.5/en/date-and-time-functions.html](http://dev.mysql.com/doc/refman/5.5/en/date-and-time-functions.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-26T15:29:19.717

```
SELECT
    t.*
FROM 
    tableX AS t
WHERE 
    t.dateColumn >= CURDATE() - INTERVAL 14 DAY
  AND 
    WEEKDAY(t.dateColumn) <> 6 ; 
```

# windows - MinGW/MSYS 下的 Gnu Octave 构建错误

> ID：12131144
> 
> 赞同：2
> 
> 时间：2012-08-26T15:00:38.457
> 
> 标签：windows, compiler-errors, mingw, octave

我正在尝试为 Windows 构建 Gnu Octave。我构建了所有主要依赖项而没有太多问题。配置过程进行得很好。但是当我尝试运行时`make`（经过一些源代码修改以克服一些错误），它触发了大量像这样的错误

```
./.libs/liboctinterp.a(liboctinterp_la-octave.o): In function `safe_source_file':
C:\MinGW\sources\octave-3.6.2\src/octave.cc:312: undefined reference to `___cxa_begin_catch' 
```

在线上

```
libtool: link: gcc -g -O2 -pthread -DHAVE_CONFIG_H -mieee-fp -Wall -W -Wshadow -Wformat -Wpointer-arith -Wmissing-prototypes -Wstrict-prototypes -Wwrite-strings -Wcast-align -Wcast-qual -g -O2 -pthread -pthread -g -O2 -pthread -o .libs/octave.exe main.o  ./.libs/liboctinterp.a /mingw/sources/octave-3.6.2~~/liboctave/.libs/liboctave.a -L=c:/mingw/bin/../lib/gcc/mingw32/4.7.0 -L=c:/mingw/bin/../lib/gcc -L=c:/mingw/bin/../lib/gcc/mingw32/4.7.0/../../../../mingw32/lib -L=c:/mingw/bin/../lib/gcc/mingw32/4.7.0/../../.. -lfltk_gl -lfltk -lole32 -luuid -lcomctl32 -LC:/MinGW/lib /mingw/lib/libfontconfig.dll.a -L=C:/MinGW/lib /mingw/lib/libfreetype.dll.a -lz -lbz2 /mingw/lib/libexpat.dll.a -lopengl32 -lglu32 ../liboctave/.libs/liboctave.a /mingw/sources/octave-3.6.2~~/libcruft/.libs/libcruft.a /mingw/lib/libarpack.a /mingw/lib/libfftw3.a -lreadline -ltermcap /mingw/lib/libpcre.dll.a ../libcruft/.libs/libcruft.a -llapack -lblas -lgfortran -lquadmath -liberty -lgdi32 -lws2_32 -luser32 -lkernel32 -pthread -L/mingw/lib 
```

我将制作日志转储到一个文件中，该文件大约为 39MB！只是充满了上面的错误。如果有人可以帮助我克服这个问题，我将非常感激。

# javascript - typeof 调用以字符串形式传递的名称的函数

> ID：12131146
> 
> 赞同：3
> 
> 时间：2012-08-26T15:00:48.947
> 
> 标签：javascript, typeof

我正在尝试为页面上的所有字段创建一个通用的单击事件函数，该函数主要检查目标是否为空白或包含用户输入的值。但是，我希望这个通用函数检查是否存在更具体的函数，如果找到，则允许它处理目标值的验证。例子：

```
function genValueCheck(event) {
   var af = event.target.id+'_checkValue';
   if (typeof af == 'function') runFunction(af,[event]); // logic specific to this field
   else { 
      // logic for checking for blanks, etc which applies to all fields
   }
} 
```

但是，在上面的示例中，typeof 返回 'string'，因为它正在检查 typeof 'af'，而不是 'af' 包含的内容，即函数的名称。

我正在尝试做的事情可能吗？

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-26T15:02:59.287

那是因为`af` *是*一个字符串。如果您的函数存在于全局范围内，请使用`window[af]`. 这应该适合你：

```
function genValueCheck(event) {
   var af = event.target.id+'_checkValue';
   if (typeof window[af] == 'function') runFunction(af,[event]); // logic specific to this field
   else { 
      // logic for checking for blanks, etc which applies to all fields
   }
} 
```

[演示](http://jsfiddle.net/VHjT9/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-26T15:22:51.970

创建一个包含所有函数的对象，以免污染全局命名空间，然后使用括号表示法检索它：

```
var validators = {};
validators.checker1 = function() { ... };

function genValueCheck(event) {
    var af = event.target.id+'_checkValue';
    if (typeof validators[af] == 'function') {
        validators[af](event); // logic specific to this field
    } else { 
    // logic for checking for blanks, etc which applies to all fields
    }
} 
```

# android - 如何在没有 android SDK 的情况下创建 Android 小部件？

> ID：12131147
> 
> 赞同：-2
> 
> 时间：2012-08-26T15:01:12.250
> 
> 标签：android, android-widget

如何在不使用 Android SDK 的情况下创建 Android 小部件？我尝试仅使用 Java 和 Android sdk 创建它，但它崩溃了。

AndroidManifest.xml：

```
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
package="com.durden.telecomwidget"
android:versionCode="1"
android:versionName="1.0">

<uses-sdk android:minSdkVersion="14" android:targetSdkVersion="15" />

<application android:label="@string/app_name"
    android:icon="@drawable/ic_launcher"
    android:theme="@style/AppTheme">

    <reciever android:name="TelecomBalance">
        <intent-filter>
            <action android:name="android.appwidget.action.APPWIDGET_UPDATE"></action>
        </intent-filter>
        <meta-data android:name="android.appwidget.provider"
            android:resource="@xml/widgetinfo" />
    </reciever>
</application> 
```

小部件信息.xml：

```
<appwidget-provider xmlns:android="http://schemas.android.com/apk/res/android"
android:minWidth="294dp"
android:minHeight="72dp"
android:updatePeriodMillis="86400000"
android:initialLayout="@layout/main"
android:configure="com.example.android.ExampleAppWidgetConfigure" 
android:resizeMode="horizontal|vertical"> 
```

@layout/main.xml：

```
 <?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="schemas.android.com/apk/res/android"
        android:layout_width="fill_parent"
        android:orientation="vertical"
        android:background="@android:color/white"
        android:layout_gravity="center"
        android:layout_height="wrap_content">

<TextView android:id="@+id/widget_textview"
                android:text="Hello Widget"
                android:layout_height="wrap_content"
                android:layout_width="wrap_content"
                android:layout_gravity="center_horizontal|center"
                android:textColor="@android:color/black"/>
</LinearLayout> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-26T15:14:56.953

我没有给你一个具体的答案，你的问题一开始就很模糊，但我可以为你指出一个我认为会有所帮助的方向：[阅读源代码，Luke](http://www.codinghorror.com/blog/2012/04/learn-to-read-the-source-luke.html)，[这](http://grepcode.com/file/repository.grepcode.com/java/ext/com.google.android/android/4.0.1_r1/android/widget/TextView.java#TextView.onDraw%28android.graphics.Canvas%29)是 SDK 绘制`TextView`. 它会让你深入了解你需要做什么。

# django - 分解一小段 HTML [django]

> ID：12131148
> 
> 赞同：3
> 
> 时间：2012-08-26T15:01:36.637
> 
> 标签：django, templates, django-templates

我可以用 Django 模板分解一小段 html 代码吗？

例如，我有很多这样的图像：

```
<img src="/xxxx/xxxx/xxxxxx.jpg"> 
```

我可以用 替换它`{{ image_xxx }}`吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-26T15:08:48.960

是的。我建议为它创建一个[自定义模板标签](https://docs.djangoproject.com/en/dev/howto/custom-template-tags/)。请参阅有关*包含标签*的部分。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-26T15:10:30.413

创建[自定义模板标签](https://docs.djangoproject.com/en/dev/howto/custom-template-tags/)：

```
from django import template

register = template.Library()

@register.simple_tag
def image_by_value(value):
    return "/xxxx/xxxx/xxxxxx.jpg" 
```

您可以在模板中使用它，如下所示：

```
<img src="{% image_by_value 001 %}"> 
```

然后将该值`001`传递给变量`value`，您可以使用它来构造包含图像路径的字符串（即`"/xxxx/xxxx/xxxxxx.jpg"`）。

# jquery - 同步 jQuery 背景和元素动画

> ID：12131149
> 
> 赞同：3
> 
> 时间：2012-08-26T15:01:59.660
> 
> 标签：jquery, css, jquery-animate, background-position

我在下面的小提琴中说明了我的问题；[http://jsfiddle.net/6CTMs/](http://jsfiddle.net/6CTMs/)

的背景`wrapper`是​​一个中间有一个白洞的图像。然后这个孔被`block`元件覆盖。

现在我想为背景和向上移动的块设置动画。我同时动画背景位置（通过包含的背景位置动画插件）和元素的`top`属性。`block`

但是，至少在我的 Win7 上的 Chrome 21.0.1180.79 上，这两个动画并不完全同步。似乎每隔一帧动画，底部都会显示一条白色条带（显示下面的一个像素高的孔切片），而每隔一帧则没有。

我怎样才能避免这种情况？

在子元素中包含背景图像并仅为其顶部属性设置动画在我的情况下不是一个选项。我也不能让元素高一个像素或任何类似的“黑客” - 尺寸和动画需要精确。

作为旁注，我认为这个问题可能与[我早期的问题](https://stackoverflow.com/q/12078635/951402)有关，该问题从未完全解决。

**编辑：**我在这里分叉了小提琴；[http://jsfiddle.net/3r26H/1/](http://jsfiddle.net/3r26H/1/)似乎有效，但看起来它在动画结束时留下了一个像素。我也不知道这是否会在非 Webkit 浏览器中产生新问题。这个解决方案有多洁净？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-26T16:39:04.233

根据这个线程：[JQuery 同步动画](https://stackoverflow.com/questions/1594077/jquery-synchronous-animation)不可能在 JQuery 中同步两个动画。您可以做的是“手动”为整个事物设置动画，`requestAnimationFrame`在每一帧使用并进行正确的计算，以便两个元素同步。

# css - 当我在 html 5 地理位置应用程序上插入标题时，谷歌地图 CSS 滚动问题

> ID：12131153
> 
> 赞同：1
> 
> 时间：2012-08-26T15:02:38.580
> 
> 标签：css, html, google-maps

您需要为此网络应用程序使用 Chrome 才能查看地图。我在我的谷歌地图顶部添加了一个 44 像素的固定标题，该标题设置为 100% x 100% 以占据全屏。现在地图正在垂直滚动，底部的高度看起来太高了 44 像素。我需要地图是剩余屏幕区域的 100% x 100%，没有滚动。我究竟做错了什么？

这是我的测试页面：

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-07T17:24:14.697

问题不是地图 div 标签而是标题 div，我有一个 br 打破了额外的行空间。

# mysql - 在mysql查询中获取记录的偏移量

> ID：12131154
> 
> 赞同：1
> 
> 时间：2012-08-26T15:02:45.960
> 
> 标签：mysql

我对可以按几列中的任何一列排序的表有一些查询，以及结果集中一行的 id。如何获取下一条或上一条记录（或完整结果集中 id 的偏移量）。

IE。假设我有下表

```
ID First_Col Second_Col Name
1   34        24         John
2   40        22         James
3   48        5          Hugh 
```

如果按 first_col 排序，并且给定 id 2，则下一条记录将为 3，但如果按 Second_Col 排序，则下一条记录将为 1。

给定 sortBy 表达式（传递给我的函数）和 id，我怎样才能轻松找到下一条记录？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-26T15:24:26.893

这应该有效：

```
SELECT
*
FROM
names
WHERE
Second_Col > (SELECT Second_Col FROM names WHERE ID = 2)
ORDER BY
Second_Col 
LIMIT 1 
```

见[http://sqlfiddle.com/#!2/fac71/3](http://www.sqlfiddle.com/#!2/fac71/3)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-26T15:21:03.547

你在这里：[http ://sqlfiddle.com/#!3/d8761/5](http://sqlfiddle.com/#!3/d8761/5)

可能它可以更有效地完成，但它有效：

```
SELECT T.ID from TBL T WHERE 
T.SECOND_COL=
(SELECT MIN(TT.SECOND_COL) FROM TBL TT WHERE TT.SECOND_COL>(SELECT TTT.SECOND_COL FROM TBL TTT WHERE ID=2)) 
```

# c++ - 如何实现 STL 容器中对象的快速释放？

> ID：12131157
> 
> 赞同：4
> 
> 时间：2012-08-26T15:02:58.507
> 
> 标签：c++, visual-studio, memory-management, c++11

> **TL/DR**：在 Visual Studio 2012 RC 上使用发布设置编译时，如何`std::vector<std::string>`实现如此快速的释放？

我编写了一个`strung`行为类似于`std::string`练习的类，实现了基本的复制和移动语义。

```
class strung
{
private:
    size_t length_;
    char* data_;

public:
    // -------- Constructors --------

    strung() : length_(0), data_(nullptr) {};

    strung(const char* c_str)
    {
        length_ = strlen(c_str);
        data_ = new char[length_];
        ::std::copy(c_str, c_str + length_, data_);
    };

    inline explicit strung(size_t length) : length_(length)
    {
        data_ = new char[length_];
    };

    strung(size_t length, char value) : length_(length)
    {
        data_ = new char[length_];
        ::std::fill(data_, data_ + length_, value);
    };

    // -------- Copy/move-constructors --------

    strung(const strung& old)
    {
        data_ = new char[old.length_];
        ::std::copy(old.data_, old.data_ + old.length_, data_);
        length_ = old.length_;
    };

    strung(strung&& old)
    {
        data_ = old.data_;
        length_ = old.length_;
        // Even though it is a rvalue, its destructor will still be called,
        // so we would like to prevent our data from being freed.
        old.data_ = nullptr;
    };

    // -------- Assignment operators --------

    inline strung & operator =(const strung& old)
    {
        if (this != &old)
        {
            delete[] data_;
            data_ = new char[old.length_];
            ::std::copy(old.data_, old.data_ + old.length_, data_);
            length_ = old.length_;
        }
        return *this;
    };

    strung & operator =(strung&& old)
    {
        if (this != &old)
        {
            delete[] data_;
            data_ = old.data_;
            length_ = old.length_;
            old.data_ = nullptr;
        }
        return *this;
    };

    // -------- Array operators (no bounds checking by design) --------

    inline char& operator[](size_t pos)
    {
        return data_[pos];
    };

    inline const char& operator[](size_t pos) const
    {
        return data_[pos];
    };

    // -------- Insertion operator for `ostream`s --------

    inline friend ::std::ostream &operator<<(::std::ostream &out, const strung& source)
    {
        out.write(source.data_, source.length_);
        return out;
    };

    // -------- Various functions --------

    inline const size_t length() const
    {
        return length_;
    }

    // -------- Poor man's iterators --------

    char* begin()
    {
        return data_;
    };

    char* end()
    {
        return data_ + length_;
    };

    // -------- Destructor --------

    inline ~strung()
    {
        delete[] data_;
    };
}; 
```

我尝试比较`std::string`和`strung`使用这段代码的性能：

```
double time(const std::function<void(void)> &func)
{
    using namespace std::chrono;
    auto t1 = high_resolution_clock::now(); 
    func();
    auto total = duration_cast<nanoseconds>(high_resolution_clock::now()-t1);
    return static_cast<double>(total.count()) / 1000000.;
}

template<typename T>
void test(const int num)
{
    double allocation_time, full_time;

    full_time = time([&] {
        std::vector<T> container;

        allocation_time = time([&] {
            container.reserve(num);

            for (int i=0; i < num; i++)
            {
                container.emplace_back(rand() % 10 + 1,'\0');

                for (char &chr : container.back())
                    chr = ('A' + rand() % ('Z' - 'A' + 1) );
            }
        });
    });

    std::cout << "Full time: " <<  full_time << " miliseconds" << std::endl 
        << "Allocation time: " << allocation_time << " miliseconds" << std::endl 
        << "Deallocation time: " << full_time - allocation_time << " miliseconds" << std::endl;
}

int main()
{
    std::cout << "-------- std::string --------" << std::endl;
    test<std::string>(500000);
    std::cout << "-------- strung --------" << std::endl;
    test<strung>(500000);
    return EXIT_SUCCESS;
} 
```

结果如下：

**调试 (x86-64)**

```
-------- std::string --------
Full time: 51050.9 miliseconds
Allocation time: 1853.11 miliseconds
Deallocation time: 49197.8 miliseconds
-------- strung --------
Full time: 52404 miliseconds
Allocation time: 4886.28 miliseconds
Deallocation time: 47517.7 miliseconds 
```

**发布 (x86-64):**

```
-------- std::string --------
Full time: 113.007 miliseconds
Allocation time: 107.006 miliseconds
Deallocation time: 6.0004 miliseconds
-------- strung --------
Full time: 47771.7 miliseconds
Allocation time: 356.02 miliseconds
Deallocation time: 47415.7 miliseconds 
```

* * *

分配速度是可以理解的，因为我并没有对类做太多优化，但是释放速度更有趣。

对 Debug 设置的测试表明，对于两者来说，解除分配同样复杂`std::string`（`strung`尽管仍然非常慢），但是对 Release 设置的测试使得解除分配`std::string`非常快，同时`strung`保持完全相同。考虑到' 的析构函数几乎是微不足道的，如何`std::string`实现如此快速的释放。`strung`

一开始我以为`std::string`是优化成nop，所以根本不执行deallocation，但是当我去掉`strung`的析构函数时，后者还是快了很多，所以这可能不是这样的。

我希望我的释放速度很快，那么我该怎么做才能达到类似的释放速度？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-08-26T15:06:51.543

微软的`std::string`实现使用了一种叫做“小字符串优化”的东西。这意味着它`std::string`实际上包含一个 15 个字符的字符串 (a `char[16]`)。如果给定一个短于 16 个字符的字符串，则将其存储在该内部存储器中。所以在这些情况下没有进行动态内存分配。

您`strung` *总是*动态分配字符串。这意味着它的析构函数将始终释放它。`std::string`，如果足够小，两者都不会。

# python - 在python中导入36列进行绘图，第一列是日期

> ID：12131160
> 
> 赞同：1
> 
> 时间：2012-08-26T15:03:16.723
> 
> 标签：python, date, matplotlib, genfromtxt

我正在尝试为多口井绘制水位水道。数据位于文本文件中，第一列格式为日期`'yyyymmdd'`。在这种特殊情况下，还有 35 个其他列带有浮点数。

我一直在尝试使用`genfromtxt`，但我不想定义所有 36 个 dtype。

我尝试`dtype=None`使用转换器，但随后收到消息说转换器已锁定且无法更新。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-26T16:18:37.500

我很惊讶您不能使用[`np.genfromtxt`](http://docs.scipy.org/doc/numpy/user/basics.io.genfromtxt.html)参数`converter`将您的第一列转换为：

*   一个`np.datetime64`对象（正如@DSM 所建议的，前提是您有足够近的 numpy 版本（> 1.6.1））
*   一个`np.object`，与一个`converter`作为：

    `converter={0:lambda d: datetime.datetime.strptime(d,"%Y%m%d")`

如果您不想定义`dtype`自己，可以使用`dtype=None`. 不过，这并不是一个好主意，因为这个选项比给出明确的`dtype`. 但正如文档告诉你的那样，你可以使用一个元组来定义你的`dtype`，所以像：

```
dtype=tuple([np.datetime64] + [float]*35) 
```

或者

```
dtype=tuple([np.object] + [float]*35) 
```

可以工作。

# html - 在 Firefox 中导航项未呈现在正确位置

> ID：12131163
> 
> 赞同：2
> 
> 时间：2012-08-26T15:03:25.303
> 
> 标签：html, css, firefox, navigation, background-image

我在[本网站](http://nickputman.com/)的导航栏中使用树叶作为项目的背景图像。在 Chrome 和 Safari 中一切看起来都很好，但在 Firefox 中，三个叶子在 x 轴上的不同位置呈现，如下图所示：

![在此处输入图像描述](../Images/5530e6905e11cb49cc2dbbbba6a846c4.png)

唯一在正确位置渲染的叶子是“关于我”叶子。'home' 叶的渲染比应有的低约 20px，而 'contact' 叶的渲染低约 5px。我想知道是否有人可以发现为什么会这样？

叶子和css的html如下：

**HTML**

```
<nav>
    <a href="/index.html" id="home"><img class='hoverImg_normal' src='images/bodhi-leaf-brown.png'/><img class='hoverImg_highlight' src='images/bodhi-leaf-green.png'/><img class='text home' src='images/home.png'/></a>
    <a href="about.html" id="about"><img class='hoverImg_normal' src='images/bodhi-leaf-brown.png'/><img class='hoverImg_highlight' src='images/bodhi-leaf-green.png'/><img class='text about' src='images/about.png'/></a>
    <a href="contact.html" id="contact"><img class='hoverImg_normal' src='images/bodhi-leaf-brown.png'/><img class='hoverImg_highlight' src='images/bodhi-leaf-green.png'/><img class='text' src='images/contact.png'/></a>
</nav> 
```

**CSS**

```
nav{
    text-align:center;
    height:170px;
}
nav a{
    width:115px;
    height:170px;
    display:inline-block;
    margin: 0 50px;
}

nav a>img{
    width:115px;
    height:170px;
}

nav a>img.hoverImg_normal{
    position:relative;
    left:0;
    z-index:2;/*Put image behind text*/
}

nav a>img.hoverImg_highlight{
    position:relative;
    left:0;
    top:-174px;/*5 + 1 for text*/
    opacity:0;
    transition: 1s;
    -moz-transition: 1s; /* Firefox 4 */
    -webkit-transition: 1s; /* Safari and Chrome */
    -o-transition: 1s; /* Opera */
    z-index:2;
}

nav a:hover>img.hoverImg_highlight{
    opacity:1;
}

nav a>img.text {
    position: relative;
    z-index: 3;
    width: auto;
    height: auto;
    top:-267px;
}

.about {
    margin-top: 3px;
}

.home {
    margin-top: 8px;
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-26T15:23:17.753

有两个问题：

1.  您的文本图像高度不同，您应该尝试使用三个相同高度的图像
2.  由于 .about 和 .home 类的 margin-top 不同，使用相同的图像高度仍然会导致不同的位置。此外，.contact 类没有定义，与 home 和 about 的文本相比，contact text-image 的属性中没有“contact”类。

还有一件事：您应该为图像使用替代文本，例如：

```
<img class='text home' src='images/home.png' alt='home' /> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-26T15:41:47.990

使用绝对定位而不是用​​负值向上拉图像`top`。很容易做到，因为你已经包含了**jQuery**。下面的代码片段`top`根据和 images'的`top`值计算适当的值：`#main``height`

```
var lft = [397, 617, 836];//I calculated those using jQuery
var cur = 0;
$(document).ready(function() {
    $(".hoverImg_highlight").each(function() {
        var tp = parseInt($("#main").offset().top, 10) - praseInt($(this).height(), 10);
        $(this).css({position: 'absolute', top: tp, left: lft[cur]});
        cur ++;
    });
}); 
```

我可能在这里或那里有一个错字，但我希望这会有所帮助！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-26T16:18:35.443

看看这个jsfiddle。这是您正在做的事情的基本版本。（我认为） [http://jsfiddle.net/sheriffderek/6HcdC/](http://jsfiddle.net/sheriffderek/6HcdC/)

# apache - RewriteRule 使 OAuth 授权失败

> ID：12131164
> 
> 赞同：2
> 
> 时间：2012-08-26T15:03:30.550
> 
> 标签：apache, tomcat, mod-rewrite, oauth

我在服务器 A 上使用 RewriteRule 重定向到服务器 B。如果我直接向 B 发送请求，则授权是可以的，但是如果我将请求发送到 A，重定向到 B，则授权失败。

RewireRule 是：

```
RewriteRule ^somePath/(.*)$ http://some-server-address/main/$1 [L] 
```

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-15T10:47:05.820

尝试以下重写规则（注意 QSA）：

```
RewriteRule ^somePath/(.*)$ http://some-server-address/main/$1 [QSA,L] 
```

但是它只适用于 GET 请求...... POST 非常棘手

# java - read localhost POP3 inbox with javax.mail

> ID：12131166
> 
> 赞同：3
> 
> 时间：2012-08-26T15:03:37.747
> 
> 标签：java, email, jakarta-mail, postfix-mta, dovecot

What is the Java analogue for:

```
thufir@dur:~$ 
thufir@dur:~$ 
thufir@dur:~$ telnet localhost 110
Trying 127.0.0.1...
Connected to localhost.
Escape character is '^]'.
+OK Dovecot ready.
user thufir
+OK
pass password
+OK Logged in.
stat
+OK 16 84695
retr 1
+OK 4978 octets
Return-Path: <thufir@dur.bounceme.net>
X-Original-To: thufir@dur
Delivered-To: thufir@dur
Received: from dur.bounceme.net (localhost [127.0.0.1])
    (using TLSv1 with cipher DHE-RSA-AES128-SHA (128/128 bits))
    (No client certificate requested)
    by dur.bounceme.net (Postfix) with ESMTPS id E6A58180508
    for <thufir@dur>; Sun, 26 Aug 2012 06:48:47 -0700 (PDT)
Message-Id: <1027505969.1345988926766.JavaMail.thufir@dur.bounceme.net>
To: thufir@dur
Subject: Google Developers Expert: recognizing and rewarding top developers
Mime-Version: 1.0
Content-Type: multipart/mixed; boundary="----=_Part_0_2465937.1345988926695"
Date: Sun, 26 Aug 2012 06:48:47 -0700 (PDT)
From: thufir@dur.bounceme.net

------=_Part_0_2465937.1345988926695
Content-Type: text/html
Content-Transfer-Encoding: 7bit

<img height="80" src="http://2.bp.blogspot.com/-vC8YT1LrWbw/UAW2oUAlvXI/AAAAAAAABt8/Xp5ZDiHi6JQ/s1600/
...
------=_Part_0_2465937.1345988926695--

.
quit
+OK Logging out.
Connection closed by foreign host.
thufir@dur:~$ 
```

I'm getting:

```
init:
Deleting: /home/thufir/NetBeansProjects/leafnode_postfix/build/built-jar.properties
deps-jar:
Updating property file: /home/thufir/NetBeansProjects/leafnode_postfix/build/built-jar.properties
Compiling 1 source file to /home/thufir/NetBeansProjects/leafnode_postfix/build/classes
compile:
run:
DEBUG: nntp: newsrc loading /home/thufir/.newsrc
DEBUG: nntp: newsrc load: 1 groups in 27ms
Show INBOX for thufir@localhost
Exception in thread "main" javax.mail.NoSuchProviderException: Invalid protocol: null
    at javax.mail.Session.getProvider(Session.java:468)
    at javax.mail.Session.getStore(Session.java:546)
    at javax.mail.Session.getStore(Session.java:531)
    at javax.mail.Session.getStore(Session.java:520)
    at net.bounceme.dur.leafnode_postfix.MailClient.checkInbox(Unknown Source)
    at net.bounceme.dur.leafnode_postfix.Main.readMail(Unknown Source)
    at net.bounceme.dur.leafnode_postfix.Main.<init>(Unknown Source)
    at net.bounceme.dur.leafnode_postfix.Main.main(Unknown Source)
Java Result: 1
BUILD SUCCESSFUL (total time: 1 second) 
```

Presumably the problem is that I'm not logging into the dovecot POP3 server correctly? How do I pass login credentials?

```
package net.bounceme.dur.leafnode_postfix;

import java.io.IOException;
import static java.lang.System.out;
import java.util.Properties;
import javax.mail.*;
import javax.mail.internet.InternetAddress;
import javax.mail.internet.MimeBodyPart;
import javax.mail.internet.MimeMessage;
import javax.mail.internet.MimeMultipart;

public class MailClient extends Authenticator {

    public static final int SHOW_MESSAGES = 1;
    public static final int CLEAR_MESSAGES = 2;
    public static final int SHOW_AND_CLEAR =
            SHOW_MESSAGES + CLEAR_MESSAGES;
    protected String from;
    protected Session session;
    protected PasswordAuthentication authentication;

    public MailClient(UserHost userHost) {
        String user = userHost.getUser();
        String host = userHost.getHost();
        boolean debug = userHost.isDebug();
        from = user + '@' + host;
        authentication = new PasswordAuthentication(user, user);
        Properties props = new Properties();
        props.put("mail.user", user);
        props.put("mail.host", host);
        props.put("mail.debug", debug ? "true" : "false");
        props.put("mail.store.protocol", "pop3");
        props.put("mail.transport.protocol", "smtp");
        session = Session.getDefaultInstance(props);
    }

    @Override
    public PasswordAuthentication getPasswordAuthentication() {
        return authentication;
    }

    public void sendMessage(Message post) throws MessagingException, IOException {
        Message message = new MimeMessage(session);
        InternetAddress address = new InternetAddress("thufir@dur");
        message.setRecipient(Message.RecipientType.TO, address);
        message.setSubject(post.getSubject());
        Multipart mp = new MimeMultipart();
        BodyPart part = new MimeBodyPart();
        part.setContent(post.getContent(), "text/html");
        mp.addBodyPart(part);
        message.setContent(mp);
        Transport.send(message);
    }

    public void checkInbox(int mode)
            throws MessagingException, IOException {
        if (mode == 0) {
            return;
        }
        boolean show = (mode & SHOW_MESSAGES) > 0;
        boolean clear = (mode & CLEAR_MESSAGES) > 0;
        String action =
                (show ? "Show" : "")
                + (show && clear ? " and " : "")
                + (clear ? "Clear" : "");
        out.println(action + " INBOX for " + from);
        Store store = session.getStore();
        store.connect();
        out.println(store.getDefaultFolder());
        Folder root = store.getDefaultFolder();
        Folder inbox = root.getFolder("inbox");
        inbox.open(Folder.READ_WRITE);
        Message[] msgs = inbox.getMessages();
        if (msgs.length == 0 && show) {
            System.out.println("No messages in inbox");
        }
        for (int i = 0; i < msgs.length; i++) {
            MimeMessage msg = (MimeMessage) msgs[i];
            if (show) {
                System.out.println("    From: " + msg.getFrom()[0]);
                System.out.println(" Subject: " + msg.getSubject());
                System.out.println(" Content: " + msg.getContent());
            }
            if (clear) {
                msg.setFlag(Flags.Flag.DELETED, true);
            }
        }
        inbox.close(true);
        store.close();
        System.out.println();
    }
} 
```

Incidentally, sending messages to localhost, or dur, works fine. The full [FQDN](http://en.wikipedia.org/wiki/Fqdn) is dur.bounceme.net, although just dur seems to suffice in many cases. I'm just doing everything on one box, nothing over the intertubes.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-26T15:21:09.007

First of all, it appears the email you're sending to is invalid. You have `thufir@dur`, did you possibly mean something like `thufir@dur.com`?

Second, you need to hand the Session proper information. You need to make the following changes:

```
 authentication = new PasswordAuthentication(user, *pass*);//You must hand it username and pass, not two usernames like before
    Properties props = new Properties();
    props.put("mail.user", user);
    props.put("mail.host", host);
    props.put("mail.debug", debug ? "true" : "false");
    props.put("mail.store.protocol", pop3Provider);//an example provider is pop.gmail.com, or I think aol is pop.aol.com, many follow that pattern, this is used for reading inbox/incoming messages (hence the store)
    props.put("mail.transport.protocol", smtpProvider);//follows same as above, but smtp not pop, this is used for outgoing messages (hence the transport)
    session = Session.getDefaultInstance(props); 
```

I think that's your main issue, tell me how that works

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-26T18:07:42.673

Try using [Session.getInstance instead of Session.getDefaultInstance](http://www.oracle.com/technetwork/java/javamail/faq/index.html#commonmistakes).

# c - printf() 中的任意数量的参数。这在 C 编程中叫什么？

> ID：12131167
> 
> 赞同：0
> 
> 时间：2012-08-26T15:04:05.733
> 
> 标签：c

当我们使用`printf()`不同数量的参数时，例如

```
printf("Hello");

printf("%d",a);

printf("%d%d",b,c); 
```

为什么这不称为“重载”（使用相同的方法执行不同的任务）？如果是重载，那么为什么不将 C 视为面向对象的编程语言？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-26T15:05:56.017

这称为[可变参数函数](http://en.wikipedia.org/wiki/Variadic_function)，而不是重载。重载与面向对象无关。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-26T15:05:53.587

> 为什么这不称为“重载”

因为您使用**的是相同的功能**：

```
int printf(const char *restrict format, ...); 
```

重载的一个先决条件是具有相同名称的不同函数/方法。在这里，我们只有**一个功能**，尽管由于 varargs 功能而非常通用。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-26T15:05:43.073

这不是方法重载。它只是[`printf`](http://www.cplusplus.com/reference/clibrary/cstdio/printf/)接收一个可选[`vargs`](http://www.eskimo.com/%7Escs/cclass/int/sx11b.html)的作为第二个参数，即变量参数列表。

> int printf ( const char * 格式, ... );
> 
> 将格式化数据打印到标准输出 将格式化为格式参数指定的数据序列写入标准输出 (stdout)。在格式参数之后，该函数需要至少与格式中指定的一样多的附加参数。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-26T15:13:28.807

面向对象编程是指一种范式，包括封装、消息传递、继承和多态。换句话说，OO 意味着定义一个`class`具有被*覆盖*`virtual`的函数。这与重载不同，*重载*是根据参数的类型在函数中执行不同的操作。

 **`printf()`所做的既不是重载*也不*是*覆盖*。这是一个可变长度的参数列表。**

# jquery - 来自另一个处理程序的 jQuery On()

> ID：12131173
> 
> 赞同：-1
> 
> 时间：2012-08-26T15:04:57.813
> 
> 标签：jquery, selector

我有这个 js Fiddle ..

[http://jsfiddle.net/E7MSN/101/](http://jsfiddle.net/E7MSN/101/)

如果您在文本框内单击并按回车键，则会获得一组选项，您可以使用向上和向下箭头浏览项目。

如果您单击添加链接然后尝试导航，您只能通过静态预定义的导航。你能帮我找到解决这个问题的方法吗？

谢谢

完整代码如下

HTML

```
<input type="text" id="autofill"/>
    <a href='#' class='add'>ADD</a>
 <div class="services">
<div class="items">
    <ul>                           
        <li class="mail-icon selected"><a href="#" id="mail">mail</a></li>
        <li class="forum-icon"><a href="#" id="forum">lang</a></li>
        <li class="chat-icon"><a href="#" id="chat">chat</a></li>
    </ul>
</div>
</div> 
```

JS

```
 $(document).ready(function () {

 $(".add").click(function(){
      $(".items").append("<li>Item</li>");
 });

 });

 $("#autofill").keydown(function(e) {
     if (e.keyCode == 13) { // enter
         if ($(".services").is(":visible")) {
             selectOption();
         } else {
             $(".services").show();
         }
         menuOpen = !menuOpen;
     }
     if (e.keyCode == 38) { // up
         var selected = $(".selected");
         $(".services li").removeClass("selected");
         if (selected.prev().length == 0) {
             selected.parent().children().last().addClass("selected");
         } else {
             selected.prev().addClass("selected");
         }
     }
     if (e.keyCode == 40) { // down
         var selected = $(".selected");
         $(".services li").removeClass("selected");
         if (selected.next().length == 0) {
             selected.parent().children().first().addClass("selected");
         } else {
             selected.next().addClass("selected");
         }
     }
 });

 $(".services li").mouseover(function() {
     $(".services li").removeClass("selected");
     $(this).addClass("selected");
 }).click(function() {
     selectOption();
}); 

function selectOption() {
    $("#autofill").val($(".selected a").text());
    $(".services").hide();
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-26T15:11:33.760

代替：

```
$(".services li").mouseover(function ... ) 
```

和

```
$('.services').on('mouseover', 'li', function... ) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-26T15:14:09.323

您`li`在`ul`, 替换...

```
$(".items").append("<li>Item</li>"); 
```

和

```
$(".items ul").append("<li>Item</li>"); 
```

# javascript - 当页面居中时，带有输入字段的jQuery-ui滑块句柄不起作用

> ID：12131174
> 
> 赞同：2
> 
> 时间：2012-08-26T15:05:01.890
> 
> 标签：javascript, jquery, jquery-ui, jquery-plugins, jquery-ui-slider

我试图让输入字段跟随 jQuery 把手栏的把手栏。它在使用最佳答案时以某种方式正确工作：[Jquery UI slider 如何使框跟随处理程序？](https://stackoverflow.com/questions/8582564/jquery-ui-slider-how-to-make-a-box-follow-the-handler)

但是当将滑块放在带有`margin:0 auto;`and的容器内时，它不能正常工作`position:relative;`

[你可以在这里](http://jsfiddle.net/z3xV3/147/)看到我在说什么

任何帮助或建议表示赞赏，但我真的需要我的网站居中。

在此先感谢，饼干将得到奖励

编辑：我希望输入出现在车把下方

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-26T16:01:20.373

我想这就是你需要的：[FIDDLE](http://jsfiddle.net/z3xV3/150/)

您只需在代码中更改此行：

```
label.css('left', thumb.offset().left - (label.width() - thumb.width())/ 2); 
```

对此：

```
label.css('left', thumb.position().left - (label.width() / 2)); 
```

# mpeg-4 - 提取 I 帧和 DC 系数

> ID：12131176
> 
> 赞同：0
> 
> 时间：2012-08-26T15:05:19.903
> 
> 标签：mpeg-4

如何从 MPEG-4 视频中提取 I 帧和 DC 系数？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-26T16:47:07.207

如果您只想要 I 帧，请使用 ffmpeg 提取它们。您可以使用 -vf select="eq(pict_type\,PICT_TYPE_I)" 选项仅获取 I 图片。要获得直流系数，您必须修改解码器源代码才能将其取出。我不认为你会直接找到一个工具给你。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-10-15T10:53:03.413

通过使用此命令，我可以提取 I 帧

```
ffmpeg -i input.flv -vf "select='eq(pict_type,PICT_TYPE_I)'" -vsync vfr thumb%04d.png 
```

# c++ - 在线 C++ 编译器：为我输出二进制文件？

> ID：12131180
> 
> 赞同：-3
> 
> 时间：2012-08-26T15:06:01.240
> 
> 标签：c++, linux, compiler-construction, executable

是否有任何网站可以让我上传我的源代码，它会返回可以从 Linux 运行的二进制文件？

我不擅长使用 Linux，这种服务对我来说是救命稻草。

我知道 codepad.org，但据我所知，它只输出这些程序的文本。我需要下载它在编译时生成的可执行文件。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-08-26T15:08:56.727

我不知道有任何这样的网站（我也不一定相信它可能会返回给我）。

有什么理由不能只编译自己的源代码？任何程序员都应该知道如何编译他们编写的源代码。设计/编写代码很困难，编译很简单（而且比上传/下载文件更容易:)

假设您的 C++ 源代码使用`.cpp`扩展名保存，只需执行以下操作：

```
 g++ yourprog.cpp 
```

它将生成一个具有默认名称的二进制可执行文件，`a.out`只需键入即可执行

```
 ./a.out 
```

在提示下。

如果您想启用所有警告（一个好主意），您将添加`-Wall`命令行开关。要命名可执行文件，请使用`-o`(for output) 开关。以下是使用这两种方法编译程序的示例：

```
 g++ -Wall yourprog.cpp -o prog 
```

这会编译源代码，`yourprog.ccp`启用完整的警告消息，并生成一个名为`prog`（您可以选择任何名称）的可执行文件。在提示符下以与上一个可执行文件相同的方式执行它： `./prog`

如果您使用`.C`扩展名，只需替换上面`.C`。`.cpp`

这里有更多编译 C++ 程序的[例子，这里有一个](http://www.network-theory.co.uk/docs/gccintro/gccintro_54.html)[教程](http://pages.cs.wisc.edu/~beechung/ref/gcc-intro.html)。最后是[gcc/g++ 手册页](http://www.manpagez.com/man/1/g++-4.0/)

请注意，正如@MagnusHoff 的有用评论所指出的，如果您还没有可用的编译器和相关工具，您可能必须安装它们。@MagnusHoff 在下面的评论中为 Ubuntu 提供了说明，您的具体情况可能会因您使用的发行版而异。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-26T15:16:01.157

您可以使用 Ubuntu 软件中心提供的代码块（它是免费的，我认为您也可以找到其他发行版的版本）。 [http://www.codeblocks.org/](http://www.codeblocks.org/) 我觉得这个界面很容易习惯。祝你好运！

# ajax - “值”未在 JSF2-AJAX 环境中更新

> ID：12131185
> 
> 赞同：0
> 
> 时间：2012-08-26T15:07:36.367
> 
> 标签：ajax, jsf-2

我的环境：W7、Eclipse Indigo 3.7.2、Tomcat 6.0.35、jdk 1.7.02、jsf 2.0(Mojarra 2.03)、JSTL 1.2。尝试为更复杂的情况实现级联下拉列表，作为最终试验，我编写了一个非常简单的 xhmtl，它从 selecOneMenu 中选择一个项目，并通过 f:ajax 条目立即将其内容放入 outputText 中。菜单显示正确，但是，当我更改选择时，outputText 没有任何反应。我不知道哪里错了：你能帮帮我吗？谢谢。

```
 <!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"                                    
      "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">                                    

  <html xmlns="http://www.w3.org/1999/xhtml"                                                        
    xmlns:ui="http://java.sun.com/jsf/facelets"                                                     
    xmlns:h="http://java.sun.com/jsf/html"                                                          
    xmlns:f="http://java.sun.com/jsf/core"                                                          
    xmlns:p="http://primefaces.org/ui">                                                             

  <ui:composition template="/WEB-INF/template/BasicTemplate.xhtml">                                 
    <ui:define name="content">                                                                      
        <f:view>                                                                                      
        <h:form>                                                                                      
            <h:selectOneMenu id="firstDropDown" value="#{twoMenusBean.first}" style="width: 110px; ">   
                    <f:selectItems value="#{twoMenusBean.items}" />                                         
                    <f:ajax render="secondDropDown" immediate="true" ></f:ajax>                             
            </h:selectOneMenu>                                                                          

                <h:outputText id="secondDropDown" value="#{twoMenusBean.first}" ></h:outputText>          

            </h:form>                                                                                   
        </f:view>                                                                                     
    </ui:define>                                                                                    
  </ui:composition>                                                                                 
  </html> 
```

豆子：

```
package myJava;

  @ManagedBean (name="twoMenusBean")                                   
  @SessionScoped                                                       

  public class twoMenusBean  {                                         

    private List<String> menu1List = new ArrayList<String>();          
    private String first;                                              

    public  twoMenusBean(){                                            

            menu1List.add("item 1");                                       
            menu1List.add("item 2");                                       
            first ="item 1";                                               
    }                                                                  
    public String getFirst(){                                          
        return first;                                                    
    }                                                                  
    public void setFirst(String first){                                
        this.first = first;                                              
    }                                                                  

    public List<SelectItem> getItems(){                                
        List<SelectItem> x = new ArrayList<SelectItem>();                
        for (int i = 0; i < menu1List.size() ;i++) {                     
            x.add(new SelectItem(menu1List.get(i),menu1List.get(i)));      
        }                                                                
        return x;                                                        
    }                                                                  
  } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-03T13:00:44.783

删除`immediate="true"`：它具有跳过字段更新的副作用（`setFirst`不会被调用）。

# snmp - NET-SNMP-TUTORIAL-MIB snmpget dosnt work

> ID：12131187
> 
> 赞同：1
> 
> 时间：2012-08-26T15:07:44.247
> 
> 标签：snmp, net-snmp

I have c++ application running on Ubuntu. I need to add support to monitoring few application scalar values by snmp. I tried to follow the [snmp-net set tutorials](http://www.net-snmp.org/wiki/index.php/TUT%3asnmpset) , but it didnt work for me.

At the end of the tutorial i run this:

```
/usr/local/sbin/snmpd -f -L -d -p 9999 
```

In another terminal run this:

```
snmpget -v2c -c tutget localhost:9999 NET-SNMP-TUTORIAL-MIB::nstAgentModuleObject.0 
```

but i get: Timeout: No Response from localhost:9999.

however run this:

```
snmptranslate -Td -M+. -mNET-SNMP-TUTORIAL-MIB -IR nstAgentModuleObject 
```

return the MIB DESC.

in addtional try to run with MIB location like this, return the same.

```
snmpget -v2c -c tutget -M+ -mNET-SNMP-TUTORIAL-MIB localhost:9999 NET-SNMP-TUTORIAL-MIB::nstAgentModuleObject.0 
```

Thank you!!!!!

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-27T10:24:42.810

Tweak the /etc/init.d/snmpd script so that it runs the binary /usr/local/sbin/snmpd, rather than /usr/sbin/snmpd.

than i run : /etc/init.d/snmpd start

and now it worked (without the 9999 port).

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-26T21:27:09.473

Your `snmpget` doesn't know where to look for your MIBs. You need to add -M+/mib_dir/ to your snmpconf before you can do an explicit include of your MIB module.

Example:

snmpget -v2c -M+../mib/ -m+ALL -c tutget localhost:9999

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-07-02T13:36:00.540

please try

```
sudo /usr/local/sbin/snmpd -f -L -d -p 9999 
```

you need root permission to setup a new port

9999 is just a temporal port, if you are not comfortable with this, just try this command

```
sudo pkill snmpd ;  sudo snmpd -LS 0-6 d 
```

you need to kill the previous snmpd service before you start a new one. I used the net-tutorial package, so I can't use such command

```
sudo service snmpd stop
sudo service snmpd start
sudo service snmpd restart 
```

but if you are using the ubuntu or Unix-like download package, you can use such command

# java - OpenGL ES 2.0 - 需要性能/优化？

> ID：12131189
> 
> 赞同：0
> 
> 时间：2012-08-26T15:07:54.417
> 
> 标签：java, android, opengl-es-2.0

我正在绘制大约 30 - 80 个带纹理的平面（正方形） - 背景、玩家、敌人、子弹等。
所有平面都移动和缩放，有些 + 旋转，有些有动画纹理。

我认为，对于 CPU 或 GPU 来说，这并不太难，但在较慢/较旧的设备上，它的性能相对较低——例如在 Galaxy ACE 上。

拜托，你能看看我的代码，我在做什么错或脏吗？或者可以优化什么？
谢谢你。

这是我的 onSurfaceCreated、onSurfaceChanged 和 onDrawFrame：

```
public void onSurfaceCreated(GL10 glUnused, EGLConfig config) { 
  ..
  // load and prepare all textures 
  ..

  GLES20.glClearColor(0.0f, 0.0f, 0.0f, 0.0f);  
  GLES20.glEnable(GLES20.GL_CULL_FACE);             
  GLES20.glDisable(GLES20.GL_DEPTH_TEST);       
  GLES20.glEnable(GLES20.GL_TEXTURE_2D);            

  GLES20.glDisable(GL10.GL_DITHER);
  GLES20.glDisable(GL10.GL_LIGHTING);
  final float eyeX = 0.0f; final float eyeY = 0.0f; final float eyeZ = 1.5f;       
  final float lookX = 0.0f; final float lookY = 0.0f; final float lookZ = -3.0f;
  final float upX = 0.0f; final float upY = 1.0f; final float upZ = 0.0f;
  Matrix.setLookAtM(mViewMatrix, 0, eyeX, eyeY, eyeZ, lookX, lookY, lookZ, upX, upY, upZ);  

  mProgramHandle = GLES20.glCreateProgram();    

  final String vertexShader =
  "uniform mat4 u_MVPMatrix;         \n"                       
  + "attribute vec4 a_Position;      \n"                            
  + "attribute vec2 a_TexCoordinate; \n"    
  + "attribute float a_AlphaValue;   \n"
  + "varying vec2 v_TexCoordinate;   \n"            
  + "varying float v_AlphaValue;     \n"
  + "void main()                     \n"                                
  + "{                               \n"                          
  + "   v_TexCoordinate = a_TexCoordinate;      \n"  
  + "   v_AlphaValue = a_AlphaValue;            \n"
  + "   gl_Position = u_MVPMatrix * a_Position; \n"
  + "}                                          \n";        

  final String fragmentShader =
  "precision lowp float;                \n"         
  + "uniform sampler2D u_Texture;       \n"     
  + "varying vec2 v_TexCoordinate;      \n"     
  + "varying float v_AlphaValue;        \n"             
  + "void main()                        \n"     
  + "{                                  \n"
  + "   gl_FragColor = texture2D(u_Texture, v_TexCoordinate); \n"             
  + "   gl_FragColor.a *= v_AlphaValue; \n"
  + "}                                  \n";            

  final int vertexShaderHandle = ShaderHelper.compileShader(GLES20.GL_VERTEX_SHADER, vertexShader);     
  final int fragmentShaderHandle = ShaderHelper.compileShader(GLES20.GL_FRAGMENT_SHADER, fragmentShader);       
  mProgramHandle = ShaderHelper.createAndLinkProgram(vertexShaderHandle, fragmentShaderHandle, new String[] {"a_Position", "a_TexCoordinate", "a_AlphaValue"});

  GLES20.glUseProgram(mProgramHandle);  
  mMVPMatrixHandle = GLES20.glGetUniformLocation(mProgramHandle, "u_MVPMatrix");
  mMVMatrixHandle = GLES20.glGetUniformLocation(mProgramHandle, "u_MVMatrix");
  mPositionHandle = GLES20.glGetAttribLocation(mProgramHandle, "a_Position");
}   

public void onSurfaceChanged(GL10 glUnused, int width, int height) {    
  GLES20.glViewport(0, 0, width, height);
  float ratio = (float) width / height;
  Matrix.frustumM(mProjectionMatrix, 0, -ratio, ratio, -1, 1, 1, 1000);
}   

public void onDrawFrame(GL10 glUnused) {
  GLES20.glClear(GLES20.GL_COLOR_BUFFER_BIT);
  GLES20.glEnable(GLES20.GL_BLEND); 
  GLES20.glBlendFunc(GLES20.GL_SRC_ALPHA, GLES20.GL_ONE_MINUS_SRC_ALPHA);
  updateGame();

  // all planes are saved in Vector<Mesh> children          
  int size = children.size();
  for (int i = 0; i < size; i++)
  {
    children.get(i).Draw(renderer);
  }
} 
```

并在“平面”对象中绘制（渲染器）：

```
public void Draw(Renderer renderer)
{                       
  if (!Visible) return; // no visible object, no need draw
  mTextureCoordinateHandle = GLES20.glGetAttribLocation(renderer.mProgramHandle, "a_TexCoordinate");
  GLES20.glBindTexture(GLES20.GL_TEXTURE_2D, mBrickDataHandle); 
  mAlphaHandle = GLES20.glGetAttribLocation(renderer.mProgramHandle, "a_AlphaValue");       
  GLES20.glVertexAttrib1f(mAlphaHandle, alpha);

  // texture animation
  renderer.mPlaneTextureCoords[(byte)indexAnim].position(0); 
  GLES20.glVertexAttribPointer(mTextureCoordinateHandle, mTextureCoordinateDataSize, GLES20.GL_FLOAT, false, 0, renderer.mPlaneTextureCoords[(byte)indexAnim]);
  indexAnim++;

  renderer.mPlanePositions.position(0); 
  GLES20.glVertexAttribPointer(Renderer.mPositionHandle, renderer.mPositionDataSize, GLES20.GL_FLOAT, false, 0, renderer.mPlanePositions);        
  GLES20.glEnableVertexAttribArray(Renderer.mPositionHandle);                       

  if (angleZ == 0) // no rotating plane -> no need setRotateM
  {
    Matrix.setIdentityM(renderer.mModelMatrix, 0);
    Matrix.translateM(renderer.mModelMatrix, 0, x, y, z);
    Matrix.scaleM(renderer.mModelMatrix, 0, scaleX, scaleY, 1);
  }
  else // rotating plane
  {
    float[] mt = new float[16];
    Matrix.setIdentityM(mt, 0);
    Matrix.translateM(mt, 0, x, y, z);
    Matrix.scaleM(mt, 0, scaleX, scaleY, 1);
    Matrix.setRotateM(mRotZMatrix, 0, angleZ, 0, 0, 1);
    Matrix.multiplyMM(renderer.mModelMatrix, 0, mt, 0, mRotZMatrix, 0);
  }

  Matrix.multiplyMM(renderer.mMVPMatrix, 0, renderer.mViewMatrix, 0, renderer.mModelMatrix, 0);   
  GLES20.glUniformMatrix4fv(renderer.mMVMatrixHandle, 1, false, renderer.mMVPMatrix, 0);                

  //Matrix.multiplyMM(renderer.mMVPMatrix, 0, renderer.mProjectionMatrix, 0, renderer.mMVPMatrix, 0);
  Matrix.multiplyMM(renderer.mTemporaryMatrix, 0, renderer.mProjectionMatrix, 0, renderer.mMVPMatrix, 0); // little bit faster (?)
  System.arraycopy(renderer.mTemporaryMatrix, 0, renderer.mMVPMatrix, 0, 16);

  GLES20.glUniformMatrix4fv(renderer.mMVPMatrixHandle, 1, false, renderer.mMVPMatrix, 0); // pass in the combined matrix
  GLES20.glEnableVertexAttribArray(mTextureCoordinateHandle);        
  GLES20.glDrawArrays(GLES20.GL_TRIANGLES, 0, 6);  
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-26T15:57:32.817

我认为您不想在绘图循环中多次调用 glGet*，因为它可能是一个缓慢的操作。

您可以在对象内本地缓存属性位置吗？或者我想知道为什么当每个对象都使用相同的着色器时，你甚至要为每个对象设置属性位置。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-30T07:26:23.583

如果您在较新版本的 Android SDK（例如 v16）上运行，您可以使用分析器找出问题所在：

[http://developer.android.com/tools/debugging/debugging-tracing.html](http://developer.android.com/tools/debugging/debugging-tracing.html)

但乍一看，我可以看到几件事：

1.  另一位响应者强调说您`glGetAttribLocation`在绘图调用中调用，您不需要在每次绘图时都这样做。一旦设置了“程序”，就可以获得这些引用，只要该程序不改变（即你不改变着色器），它们就不会改变。同样与调用`glEnableVertexAttribArray`

2.  考虑使用纹理图集。每次调用都`glBindTexture`可能导致 VRAM 中的状态更改，这是一个缓慢的操作。纹理图集只是包含所有（或许多）或您的纹理（例如精灵）的单个图像。当您指定纹理坐标时，您只需指定一个介于 0 和 1 之间的值，表示单个精灵在图集中的位置。如果您想使用这种方法，您将不得不“打包”您的地图集，这样您就不会浪费空间。有一些工具可以做到这一点（例如 TexturePacker）。这意味着更少（可能只有一个）调用`glBindTexture`

3.  您将 MVP 矩阵传递了两次，`glUniformMatrix4fv`这是不必要的。在发送后更改发送到着色器的矩阵将没有任何效果（即初始设置操作将被覆盖），因为该矩阵仅在着色器在调用中执行时使用`glDrawArrays`

4.  我最近发现这`setRotateM`非常慢。我也需要在这个地方找到其他选择！

5.  你的最后一个`System.arrayCopy`是不必要的。您可以链接矩阵乘法而不需要临时。矩阵。模型 * 视图 = MV，然后 MV * 投影 = MVP

如果您还没有，您还应该查看本教程：

[http://www.learnopengles.com/android-lesson-one-getting-started/](http://www.learnopengles.com/android-lesson-one-getting-started/)

如果你决定走 3rd 方游戏引擎的路线，IMO libgdx 是迄今为止最好的：

[http://libgdx.badlogicgames.com/](http://libgdx.badlogicgames.com/)

它是免费的、开源的，并且非常注重性能。话虽如此，我也决定自己构建，因为我不需要 libgdx 提供的广泛功能，但我不得不说，我编写的每一行代码都让我停下来质疑这个决定；）

祝你好运。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-26T15:43:39.143

您以前是否考虑过使用游戏引擎？他们中的一些人能够用更少的代码来处理这种任务，压力 =P

最初学习游戏引擎会花费您更多的时间，但之后会为您节省数百小时。为游戏而设计，它们通常可以很好地处理大量对象而不会牺牲性能，即使在旧设备上也是如此。

这不是您问题的直接解决方案，但也许它可以在以后帮助您^。^这是Android游戏引擎的大量列表 [http://mobilegameengines.com/android/game_engines](http://mobilegameengines.com/android/game_engines)

如果你喜欢开源游戏引擎，你可能会喜欢这些，我只使用过其中的一些，但我发现 AndEngine 是最容易上手的，它绝对强大到可以处理 30-80 个对象。 [http://ntt.cc/2011/05/08/8-open-source-android-game-engines.html](http://ntt.cc/2011/05/08/8-open-source-android-game-engines.html)

# php - php简单的html dom解析img html5属性？

> ID：12131190
> 
> 赞同：13
> 
> 时间：2012-08-26T15:07:54.877
> 
> 标签：php, html, simple-html-dom

如何使用[简单的 html dom](http://simplehtmldom.sourceforge.net/manual.htm) 解析`img`html5 属性：`data-original`

```
$htmls = '<img class="lazy" alt="Nubifragio a Verbania , ferite 2 turiste  Gravi danni, chiesto stato di calamità    foto" title="Nubifragio a Verbania , ferite 2 turiste  Gravi danni, chiesto stato di calamità    foto" data-original="http://www.repubblica.it/images/2012/08/26/130634575-506cc9ae-11b8-4a53-920c-539a3811e46b.jpg" src="http://www.repubblica.it/static/images/homepage/2012/lazy.png" width="130" height="98" style="display: inline; ">';
$html = str_get_html($htmls);
$fata = $html->find('img'); 
foreach($fata as $newimage){
    echo $newimage->data-original; //0
    echo $newimage->src; //http://www.repubblica.it/static/images/homepage/2012/lazy.png
} 
```

我可以得到属性`src`，但`data-original`返回`0`

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2012-08-26T15:13:49.483

```
$newimage->data-original; 
```

方法

```
$newimage->data - original; 
```

一种解决方法是尝试：

```
$property = 'data-original';
$newimage->$property; 
```

或者，使用替代语法：

```
$newimage['data-original']; 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2014-10-25T04:59:27.383

仅供参考：

我试过了：

```
$newimage['data-original']; 
```

但这对我有用：

```
$property = 'data-original';
$newimage->$property; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2022-01-20T12:10:04.273

使用**大括号**会更**有效**：

```
$newimage->{'data-original'}; 
```

另一个例子：

```
<?php
   class foo {
     var $bar = 'I am bar.';
     var $arr = array('I am A.', 'I am B.', 'I am C.');
     var $r   = 'I am r.';
   }

   $foo = new foo();
   $bar = 'bar';
   $baz = array('foo', 'bar', 'baz', 'quux');
   echo $foo->$bar . "\n";
   echo $foo->{$baz[1]} . "\n";

   $start = 'b';
   $end   = 'ar';
   echo $foo->{$start . $end} . "\n";

   $arr = 'arr';
   echo $foo->{$arr[1]} . "\n";

?> 
```

阅读更多关于**用大括号括起来的变量的**信息： [PHP 文档：变量](https://www.php.net/manual/en/language.variables.variable.php#language.variables.variable)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2018-05-24T04:16:17.047

**希望这会奏效**

$thumbs= $video->find('img[class=image]', 0)->{data-original};

# oracle - 游标是否将 SELECT 结果记录集存储在内存中？

> ID：12131191
> 
> 赞同：4
> 
> 时间：2012-08-26T15:07:57.023
> 
> 标签：oracle, caching, plsql, database-cursor

从一本书，我读过

> 每当您执行 SQL 语句时，Oracle 都会打开一个内存区域，在其中解析和执行命令。该区域称为光标。

它适用于显式和隐式游标。但我对另一件事感到好奇——游标是否可以被视为 Oracle 返回最终记录集并将其用作获取记录的源的中间位置（在内存中）？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-26T15:40:07.393

Oracle 将从磁盘检索到的记录存储在一个称为 DB 缓冲区高速缓存的已分配内存区域中。但这些是记录*块*，然后过滤以准备最终结果集。同一张表上的任何其他查询都可以使用这些缓存记录，而不是进入磁盘。概念指南中有更多关于 Oracle 内存体系结构的内容。 [在这里阅读。](http://docs.oracle.com/cd/E11882_01/server.112/e25789/memory.htm#i10093)

现在你所说的略有不同。Oracle +can+ 缓存单个结果集。至少它可以从 11g 开始，并且仅在企业版中。显然，只有为频繁运行且结果不会很快过时的查询缓存集才有意义。数据库无法弄清楚这一点，这就是为什么我们必须告诉它要缓存哪些结果集。 [了解更多](http://docs.oracle.com/cd/E11882_01/server.112/e25789/memory.htm#sthref1791)。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-08-26T15:49:59.123

游标是指向从查询返回的中间数据集的指针。它包含用于生成和访问结果的状态信息。来自[概念文档](http://docs.oracle.com/cd/E11882_01/server.112/e25789/memory.htm#BGBCICEI)：

> 游标是特定私有 SQL 区域的名称或句柄。如图 14-5 所示，您可以将游标视为客户端的指针和服务器端的状态。

查询的结果是 a`result set`并且由游标指向。它存储在临时位置，无论是在内存中还是在磁盘上。从[概念文档](http://docs.oracle.com/cd/E11882_01/server.112/e25789/physical.htm#CNCPT1112)：

> 临时表空间仅在会话期间包含模式对象。本地管理的临时表空间有临时文件（temp files），这些临时文件是特殊文件，旨在存储散列、排序和其他操作中的数据。当内存空间不足时，临时文件也会存储结果集数据。

# zend-framework - 在 php.ini 中包含路径不更新 - 在 zend 设置下

> ID：12131192
> 
> 赞同：2
> 
> 时间：2012-08-26T15:08:39.103
> 
> 标签：zend-framework, php

我一直在尝试更新我的包含路径以包含 phpDocumentor，但无论我在 php.ini 文件中放置了什么，phpInfo 都会显示相同的信息。

有谁知道 Zend 从哪里获取它的包含路径？

我已经发布了关于设置 PHPdocumentor 的问题（进行中）

[https://stackoverflow.com/questions/12130630/phpdocumentor-cannot-open-php-doc-in-a-zend-setup](https://stackoverflow.com/questions/12130630/phpdocumentor-cannot-open-php-doc-in-a-zend-setup)

但是其他 Zend 用户可能对我无法在 PHP.ini 中更新包含路径的问题感兴趣，所以我想我会将这个次要问题删除到另一篇文章中。

我在 php.ini (windows) 中的包含路径看起来像这样......

```
include_path = ".;c:\Program Files (x86)\PHP\includes;\c:\Program Files (x86)\Zend\ZendServer\lib;\C:\Program Files (x86)\PHP\PEAR;\c:\zendServer\rental\public\phpDocumentor-2.0.0a10" 
```

但是 Zend 服务器上的 PHP 信息看起来像这样（本地）......

```
C:\Program Files (x86)\Zend\ZendServer\GUI/library;C:\Program Files (x86)\Zend\ZendServer\GUI/application\CE/models 
```

和（主）

C:\Program Files (x86)\Zend\ZendServer\share\ZendFramework\library

我尝试重新启动服务器和计算机无效，因此 Zend 似乎从其他地方获取其包含设置。过去有没有人遇到过这种情况？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-26T15:57:43.280

在我看来，您已经在 中安装了一个 PHP 实例`C:\Program Files (x86)\PHP`，并且在`C:\Program Files (x86)\Zend\ZendServer`.
Zend Server 与它自己的 Apache 和 PHP 版本捆绑在一起。
Zend 服务器的 PHP.INI 配置文件应该位于`C:\Program Files (x86)\Zend\ZendServer\etc\php.ini`.
更改配置文件后，您必须重新启动 Zend Server Apache 实例以激活更改。也许最简单的方法是从 Zend Server Web 管理控制台，通过从 Zend Server 所在的机器访问 url
应该可以访问（如果您在安装过程中没有为 Web 服务器指定自定义端口）`http://localhost/ZendServer`居住。
Zend Server 的 PHP.INI 配置也可以从 Web 管理控制台修改。
查看[此页面](http://devzone.zend.com/1389/getting-started-with-zend-server-ce/)以获取有关如何开始使用 Zend Server 的更多信息。

# java - “import foo.*”不应该也包含子包“foo.bar.*”吗？

> ID：12131195
> 
> 赞同：7
> 
> 时间：2012-08-26T15:09:05.407
> 
> 标签：java, oop, import, package

学习 Java 时，我想到了许多教程的一个对我来说相当混乱的属性。考虑示例教程中的以下两个导入：

```
import java.awt.*;
import java.awt.event.*; 
```

第一行显然是导入 java.awt 包，第二行是 awt 的子包。**但是 asterix 不应该包含所有子包吗？**因此，第一行应该可以解决问题-不需要第二行吗？如果没有：那么**asterix 的真正目的/用途是什么？**

例如，`SELECT * FROM foo`在 MySQL 中使用从表中选择所有字段，也许我很愚蠢地认为这自然是这种情况。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-08-26T15:11:15.673

不，包裹被视为一个整体。尽管将它们分层考虑通常很有用，但 Java 语言或编译中没有表示`java.awt.event` *属于* `java.awt`.

您与 SQL 表的比较并不完全正确，因为 SQL 数据库中没有子表之类的东西。相反，假设您有一个代表所有类的表，其中包含以下条目：

```
ID | Package   | Name
--------------------------
1  | awt       | SomeClassName1
2  | awt.event | SomeClassName2 
```

现在，如果你想获得 awt 课程，你会说：

```
SELECT * FROM MyTable WHERE Package = 'awt' 
```

您不会期望这会给您两个条目，只是因为包名称*以 开头* `awt`，对吗？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-26T15:11:29.543

[在这里](https://stackoverflow.com/questions/11834602/is-this-how-java-package-imports-are-supposed-to-work/11834637#11834637)查看我的答案（和我的评论）。通配符只能深入 1 级，而不是子包

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-26T15:15:08.583

每个包名（“abc”）都是一个独立的包。具有相似命名前缀的两个包（例如“abc”和“abd”）是该语言的独立包，既用于命名空间也用于访问控制。

当然，对于人类来说，这代表了包之间可能存在的关系。

# google-drive-api - 使用 Google Drive API/SDK 插入新文件夹和文件

> ID：12131196
> 
> 赞同：0
> 
> 时间：2012-08-26T15:09:06.840
> 
> 标签：google-drive-api, google-drive-realtime-api

我想使用 c# 自动执行以下过程： 1\. 从预定义的文件夹中获取文件 2\. 将所述文件上传到 Google 驱动器帐户文件夹，如有必要，创建新文件夹 确定所述文件夹的永久链接将所述链接存储在数据库中。授权的 gdrive 用户将点击链接打开文件

这可以使用 API 或 SDK 完成吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-26T22:59:53.353

这是用于使用 Google API 的 .NET/C# SDK： [http ://code.google.com/p/google-api-dotnet-client/](http://code.google.com/p/google-api-dotnet-client/)

以下是将该 SDK 与 Google Drive API 结合使用的具体示例： [https ://developers.google.com/drive/examples/dotnet](https://developers.google.com/drive/examples/dotnet)

# linux - 编写一个简单的 bash 之类的命令提示符，支持自动完成（处理 tab 键）

> ID：12131199
> 
> 赞同：3
> 
> 时间：2012-08-26T15:09:39.307
> 
> 标签：linux, perl, command-prompt

我试图实现一个简单的 shell 提示符，它只需要处理内部命令，我试过`Term::ReadLine`了，但是它不像 bash 那样处理 Tab 键，所以我想知道我现在还能做什么。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-26T16:03:05.553

快速搜索 CPAN 产量[`Term::Completion`](https://metacpan.org/module/Term%3a%3aCompletion)和[`Term::Complete`](https://metacpan.org/module/Term%3a%3aComplete)

```
use Term::Completion qw( Complete );

my $result = Complete($prompt, @choices); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-28T15:54:06.323

`Term::Readline`是 readline 接口的许多可能实现的工厂包装器。你得到的默认是一个在纯 perl 中实现的相当小的一个，称为`Term::Readline::Perl`; 它缺少制表符完成之类的东西。

但是，如果您安装`Term::Readline::Gnu`，它确实具有制表符，并且应该优先使用 pureperl ，由`Term::Readline`.

# excel - VBA 中的日期/时间比较

> ID：12131201
> 
> 赞同：1
> 
> 时间：2012-08-26T15:09:57.923
> 
> 标签：excel, vba, date, time, comparison

目标：Excel 工作表包含活动列表。目标是比较两个活动的日期/时间。我需要确定两者之间是否有任何重叠。B 列包含每个活动的开始日期和时间，C 列包含每个活动的结束日期和时间。

```
ActivityOneStartTime = Range("B41").Value

ActivityOneEndTime = Range("C41").Value

ActivityTwoStartTime = Range("B32").Value

ActivityTwoEndTime = Range("C32").Value

If ActivityOneStartTime >= ActivityTwoStartTime Then

    If ActivityOneStartTime < ActivityTwoEndTime Then

        booScheduleConflict = True

    End If

End If

If ActivityOneEndTime <= ActivityTwoEndTime Then

    If ActivityOneEndTime > ActivityTwoStartTime Then

        booScheduleConflict = True

    End If

End If 
```

当然，上述方法是行不通的。因此，在尝试了其他一些不成功的方法之后，我开始逐步设置比较第一年、几个月、几天、几小时、几分钟的案例报表，但我确信有更简单的方法。

提前感谢您在此挑战中提供的任何帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-07-02T14:20:13.810

它可以通过使用 TimeValue 属性来完成。这是示例：

```
Dim date1 As Date
Dim date2 As Date
Dim date3 As Date

date1 = TimeValue(Range("A1").Text)
date2 = TimeValue(Range("B1").Text)
date3 = TimeValue(Range("C1").Text)

If date3 >= date1 And date3 <= date2 Then
     'Yes!
Else
     'No!
End If 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-26T15:35:11.053

像这样：

```
ActivityOneStartTime = Range("B41").Value
ActivityOneEndTime = Range("C41").Value
ActivityTwoStartTime = Range("B32").Value
ActivityTwoEndTime = Range("C32").Value

If ActivityOneStartTime < ActivityTwoEndTime Then
    If ActivityOneEndTime > ActivityTwoStartTime Then

        booScheduleConflict = True

    End If    
End If 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-26T19:58:43.677

我认为您的问题是确定测试重叠的逻辑。

尝试这个

```
booScheduleConflict = Not(ActivityOneEndTime <= ActivityTwoStartTime or _
                          ActivityOneStartTime >=  ActivityTwoEndTime) 
```

# c# - 在 c# 中执行的批处理文件不符合预期

> ID：12131205
> 
> 赞同：1
> 
> 时间：2012-08-26T15:10:36.887
> 
> 标签：c#, batch-file, batch-processing

我在 c:\ 上有一个批处理文件。当我通过双击它执行它时，一切正常。

批处理文件所做的就是这样。

1) 它在同一目录上执行 .exe。2) 将输出重定向到同一目录中的文本文件。

.bat 包含

```
 parse.exe > "temp.txt" 
```

但是，当我通过 C# 执行批处理文件时，根本没有创建 temp.txt。（批处理文件似乎在运行。）

我使用了以下 C# 代码。

```
 Process p = new Process();
             // Redirect the output stream of the child process.
             p.StartInfo.UseShellExecute = false;
             p.StartInfo.RedirectStandardOutput = true;
             p.StartInfo.FileName = "c://resource//auto.bat";
             p.Start();

             // Read the output stream first and then wait.
             string output = p.StandardOutput.ReadToEnd();
             p.WaitForExit(); 
```

我要去哪里错了？谢谢你的建议。

**编辑**

当我把批处理文件改成这样的时候，

parse.exe > "c:\temp.txt" 而不是 parse.exe > "temp.txt"

创建一个临时文件。但是，它不包含 parse.exe 的输出。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-26T15:22:06.277

我首先在批处理文件中使用完全限定的文件名，即

c:\parse.exe > "c:\temp.txt"

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-26T15:35:11.033

```
 process.StartInfo.WorkingDirectory = @"c:\"; 
```

您还可以在批处理文件中设置绝对路径，该路径将立即生效

pathofparse\parse.exe yourpath\"temp.txt";

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-26T15:12:30.717

看起来您正在重定向输出，这可能会阻止输出转到您希望创建的文件。

你试过了`p.StartInfo.RedirectStandardOutput = false`吗？

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-26T15:34:22.890

您可以尝试设置工作目录。该文件可能正在创建，只是不在您认为的位置。值得一试...

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-08-26T16:40:47.623

如果要将输出写入包含批处理文件的目录，最好明确指定目录，例如：

```
parse.exe > "%~dp0temp.txt" 
```

# codeigniter - 使用 CodeIgniter 进行社交身份验证

> ID：12131208
> 
> 赞同：2
> 
> 时间：2012-08-26T15:10:59.450
> 
> 标签：codeigniter, openid

我有一个项目，我应该使用 CodeIgniter 集成 Facebook 登录和 Twitter 登录按钮，我想知道最好的方法是什么？由于该项目将来需要更多社交登录按钮（如 LinkedIn 、 Google 等）。

我听说过 OpenID 和 JanRain。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-13T12:01:49.600

您可以使用 Phil Sturgeon 的 Oauth/Oauth v2 Codeigniter 库。

*   [https://github.com/philsturgeon/codeigniter-oauth](https://github.com/philsturgeon/codeigniter-oauth)
*   [https://github.com/philsturgeon/codeigniter-oauth2](https://github.com/philsturgeon/codeigniter-oauth2)

Oauth v2 是要走的路。使用起来更容易、更清洁。目前支持：

*   Facebook
*   四方
*   GitHub
*   谷歌
*   贝宝
*   Instagram
*   声云
*   视窗直播
*   YouTube

Oauth v1 是一个可以使用的 PITA，但恐怕一些流行的社交网站还没有提供 Oauth v2 API

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-10-25T09:04:25.217

查看 -

1)[混合认证](http://hybridauth.sourceforge.net/)

2)[奥帕斯](http://opauth.org/)

# ms-access - 创建表单以在多个表中添加记录

> ID：12131211
> 
> 赞同：12
> 
> 时间：2012-08-26T15:11:17.077
> 
> 标签：ms-access, ms-access-2003

我是新手（我只有 2003 版），我快疯了。还要考虑到我一般是 DB 的新手，所以现在我很困惑......请帮忙。我正在尝试设计一个数据库来对我拥有的所有书籍进行分类。我创建了表格并设置了关系[![我的数据库的图像](../Images/3ce87dfc021adae48f37c981c5f22efd.png)](https://i.stack.imgur.com/nqoJh.png) ; 我有一些与“书籍”相关的表格，其中一个是多对多关系（例如作者：每本书可以有多个作者，每个作者可以“拥有”多本书），还有一些其他的表格在一个简单的一对多关系中。许多（例如书籍类型：一本书只能属于一种类型，但可以有许多该类型的书籍。现在我想创建一个表单（如果需要，可以使用子表单）来填充我的表格。我想能够添加新书并从现有作者中进行选择或重新添加作者；对于一对多关系中的数据也是如此。

我怎样才能做到这一点？

我真的迷路了，我是否需要多个表单并将它们添加为主要表单的子表单，我需要查询，还是什么？

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-08-26T17:13:00.143

上述设计需要四个子窗体。每个子表单都应基于以书 id 作为链接子字段和主字段的联结表，以及基于第二个表 id 的相关表的组合框。

例如，您的第一个子表单是 Authors，它所基于的表是 Libri_Autori

```
Link Master Field: Id
Link Child Field: SchedaLibro 
```

组合框：

```
Control Source: SchedaAutore
Row Source : SELECT Id, Nome FROM Autori
Bound Column: 1
Column Count : 2
Column Widths : 0, 2 
```

创建您的图书表单，然后开始添加子表单，向导将为您完成大部分工作。

要将记录添加到 authors 表中，您需要将 Limit To List 设置为 Yes 并在 Not In List 事件上运行代码。我喜欢使用一个小的弹出表单将项目添加到“背景”表中。使用 Access 2010 可能会更容易，因为您可以设置[ListItemsEditForm](http://msdn.microsoft.com/en-us/library/office/bb215732(v=office.12).aspx)

* * *

1、书本窗体，就在添加子窗体之前。请注意，选择了使用控制向导。这是默认设置，所以除非您取消选择它，否则应该没问题。

![步骤 1 使用向导](../Images/8b2ad4536b35e58cd21614ae04e93280.png)

添加子表单的各种向导步骤 ![添加子表单的向导步骤](../Images/7f52b9a2ca14e2b1f5f57bb963440962.png)

选择子表单域

![选择子表单域](../Images/1ed1ccea1091748de787d49d1be6fc0e.png)

选择链接子字段和主字段

![选择链接子字段和主字段](../Images/4fff682e58948a004e41e684e828e040.png)

显示以黄色突出显示的子窗体控件和控件属性的窗体

![子控制](../Images/79d6a886fb77cfd4eb9cbe13ed436f58.png)

2、添加组合

您可以通过右键单击并自己设置属性来将子表单向导添加的字段更改为组合...

![右键单击以更改为组合](../Images/a623a13bafd9922d00c81fd9d681316f.png)

...或者您可以删除现有控件并使用向导添加组合。第一步是选择组合的类型。

![步骤 1 组合类型](../Images/3492ae3af246d785420119cb0e3e8ee1.png)

第二步是选择表或查询

![步骤 2 选择表或查询](../Images/2afef5d4622f1f8d9e2798ed9efb51a1.png)

第三步是选择字段

![步骤 3 选择字段](../Images/8be1393f333ced83080ce1ca9e23fabb.png)

第四步选择排序顺序这里不显示，这是第五步，就是设置列宽

![第 4 步跳过，第 5 步设置列宽](../Images/76adfefe39dacf395cb64bb0f9b0ea0e.png)

第六步是设置控制源

![Step 6 设置控制源](../Images/8120904064b2f51e81c341c98bb47f85.png)

您最终将得到一个包含所示属性的组合框

![子表单组合和属性](../Images/5870ba4caaf6c94f13e73c8d12ab2373.png)

**最终形式**

![最终形式](../Images/9403f897be3074c393edd53f3aaa2bed.png)

# jquery - 如何更改 JQuery 以使用标签而不是文本框？

> ID：12131212
> 
> 赞同：0
> 
> 时间：2012-08-26T15:11:28.187
> 
> 标签：jquery, gridview

我们只是从这个文本框中更改我们的 gridView 元素：

```
<asp:TextBox runat="server" ID="curDate"></asp:TextBox> 
```

到下面的这个标签：

```
<asp:Label ID="curDate" runat="server"></asp:Label> 
```

下面的 jQuery 与文本框配合得很好，但我怎样才能改变它来工作上面的标签？

```
<script type="text/javascript"> 

    function CheckBox_Click() { 
        $('#' + '<%=gridView1.ClientID %>' + ' tr:has(:checkbox:checked)  td:nth-child(5) input:text').each(function () { 
            $(this).attr("value",new Date()); 
        }); 

    } 

    </script> 
```

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-26T15:17:45.577

```
$('#' + '<%=gridView1.ClientID %>' + ' tr:has(:checkbox:checked)  td:nth-child(5) label').each(function () { 
        $(this).text(new Date()); 
    }); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-26T23:21:46.867

尝试这样（我不是 asp.net 开发人员，但主要是我使用代码）：

```
<asp:Label ID="curDate" runat="server" CssClass="theLabel"></asp:Label> 
```

你的jQuery是这样的：

```
$('#' + '<%=gridView1.ClientID %>' + ' tr:has(:checkbox:checked) .theLabel').each(function () { 
        $(this).text(new Date()); 
    }); 
```

使用相同的想法，您也可以在 gridView 面板中设置一个“唯一”CssClass（它是面板吗？），因此它将是新的选择器（即`CssClass="theGrid"`）并将 jquery 更改为以下内容：

```
$('.theGrid tr:has(:checkbox:checked) .theLabel').each(function () { 
        $(this).text(new Date()); 
    }); 
```

# javascript - 如何在对话框中显示javascript变量？

> ID：12131218
> 
> 赞同：0
> 
> 时间：2012-08-26T15:11:39.010
> 
> 标签：javascript, jquery, jquery-ui

我有一个搜索表单，可以显示与搜索过滤器匹配的人员列表。显示搜索结果后，我需要一个链接 (id=names_list)，单击该链接时会显示一个对话框，其中显示人员姓名列表。

我不明白为什么这段代码不起作用：

```
 <a id="names_list" href="#">Names list</a>

    {% for person in persons %}
       <a class="name_for_mylist">{{ person | name }}</a>
    {% endfor %}

    <script>        
            $(document).ready(function()    
            {
                $("#names_list").click(function(event){
                    event.preventDefault();
                    var list = "";
                    $(".name_for_mylist").each(function(){
                        list += $(this).html() + "; ";
                    });
                    var box=list.dialog({ title: "Names list" });
                    box.show();
                });
            });
    </script> 
```

非常感谢你的帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-26T15:19:57.037

`list`是一个字符串，它没有方法`.dialog`。

你应该像下面这样：

```
$(document).ready(function () {
    $("#names_list").click(function (event) {
        event.preventDefault();
        var list = "";
        $(".name_for_mylist").each(function () {
            list += $(this).html() + "; ";
        });
        $('<div>').html(list).appendTo('body').dialog({
            title: "Names list"
        });
    });
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-26T15:14:41.773

```
var liste = "";
$(".name_for_mylist").each(function(){
  list += $(this).html() + "; ";
}); 
```

您声明了 liste 变量，并且您正在将 $(this).html() 添加到列表变量中。

尝试更改`list+= $(this).html()+ ';';`为 `liste+= $(this).html()+ ';';`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-26T15:15:10.153

改变这个

```
var box=list.dialog({ title: "Names list" }); 
```

对此

```
var box=$(list).dialog({ title: "Names list" }); 
```

你可以把该死的放在 jquery 包装器中的任何东西附近。

~~大约一半通过你的javascript，~~

 ~~```
var liste = ""; 
```~~ 

~~“列表”末尾的额外“e”~~

# android - 知道嵌入式系统是使用 glibc 还是仿生？

> ID：12131219
> 
> 赞同：5
> 
> 时间：2012-08-26T15:12:04.487
> 
> 标签：android, embedded-linux, glibc, bionic

例如 android 使用的是仿生而不是 glibc，但如何确定它是真的使用仿生[http://en.wikipedia.org/wiki/Bionic_(software)](http://en.wikipedia.org/wiki/Bionic_(software))，而不是 glibc？

我可以在 /proc 文件系统中找到此信息，还是有任何命令可以告诉当前系统上使用了仿生？

顺便说一句，嵌入式系统上是否有可能拥有多个 c lib？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-26T19:06:55.820

如果您的代码需要根据是否与 Bionic 或 Glibc 链接而表现出不同的行为，则可以而且必须在编译时确定。Bionic 和 Glibc 无论如何都不是二进制兼容的，因此您需要在编译时提交一组头文件。

```
#if __BIONIC__
/* Bionic-specific code */    
#elif __GLIBC__
/* Glibc-specific code */
#else
#error "This C library is not supported"
#endif 
```

您不会在其中找到任何信息，`/proc`因为`/proc`其中包含有关内核的信息，而不是有关 C 库的信息。

理论上，可以在一个系统上放置任意数量的 C 库。然而，这在嵌入式系统上是非常不寻常的，因为这些系统通常会尽量减少代码大小。我期望多个 C 库的唯一系统是在嵌入式开发人员的机器上，如果该开发人员碰巧不是交叉编译（这首先是罕见的）。而且Bionic只用在Android上，Android上也只有Bionic用，所以所有Android系统都有Bionic，其他系统没有Bionic。非 Android Linux 系统有一些其他的库，要么是 Glibc，要么是（在嵌入式系统上）一些其他的 libc，例如 uClibc 或 Dietlibc。

# mongodb - 使用 Doctrine ODM (MongoDB) 绑定参数

> ID：12131220
> 
> 赞同：0
> 
> 时间：2012-08-26T15:12:08.160
> 
> 标签：mongodb, doctrine-orm, doctrine-odm

有没有办法在 Doctrine ODM MongoDB 查询期间绑定参数？

```
$path = $this->objectManager->getRepository("MyBundle:MyDocument")
    ->findOneBy(array("slug" => new MongoRegex("/^slug/")))
; 
```

这将不必在上面出现 slug 的地方进行字符串连接。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-27T04:31:44.770

简而言之，您通常不必担心与[SQL 注入](http://en.wikipedia.org/wiki/Sql_injection)相同类别的字符串注入问题，因为发送到 MongoDB 服务器的请求是对象格式 ( [BSON](http://bsonspec.org/) )，而不是像 SQL 这样的字符串格式。

典型的 SQL 注入攻击涉及操纵将连接到 SQL 查询字符串中的变量。SQL 绑定参数是通过转义和/或类型检查限制可接受值的变量的占位符。在 BSON 格式中，查询的各个方面以对象格式保存，该格式将值的范围限制为该字段。

如果您正在为[服务器端 JavaScript](http://www.mongodb.org/display/DOCS/Server-side+Code+Execution)执行（例如在`$where`查询中）传递值，则在过滤用户提供的输入时必须小心谨慎。通常不鼓励使用服务器端 JavaScript，因为它可能会对性能产生一些不利影响。

有关更多信息，请参阅 MongoDB wiki 页面[我是否必须担心 SQL 注入](http://www.mongodb.org/display/DOCS/Do+I+Have+to+Worry+About+SQL+Injection)。当然，MongoDB 中实际上没有 SQL 支持，所以这个页面更恰当地命名为“我应该担心参数注入攻击”;-)。

# spring - Spring mvc + security - 会话范围的bean

> ID：12131223
> 
> 赞同：1
> 
> 时间：2012-08-26T15:12:42.707
> 
> 标签：spring, spring-security

我有一个使用 spring-security 的 Web 应用程序。

spring security 为我们的用户创建会话。是否可以告诉 Spring Security 在会话对象中存储一些引用以供将来查找？如果是这样，是否可以使用 xml 和/或注释，或者我是否需要扩展某些类或使用弹簧安全“扩展点”之一？

如果无法使用 spring-security 向会话添加某些属性的正确方法是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-26T16:39:24.773

我不是弹簧安全模块的专业知识，但据我所知，如果弹簧安全为您创建会话，那么在控制器（假设）上，您可以使用 request.getSession() 来处理 HttpSession 对象。

关于在会话中添加属性，您可以使用一些在 HttpSession 中创建一些上下文。上下文将是一个对象（bean），它将具有所有 setter/getter 来获取所需的值。

# ruby-on-rails - 无法启动 Rails 服务器和控制台 - (crack/xml) LoadError

> ID：12131226
> 
> 赞同：2
> 
> 时间：2012-08-26T15:12:58.507
> 
> 标签：ruby-on-rails, console

我在网上搜索了所有内容，但无法找到解决此错误的方法。每次我尝试启动 rails 服务器，甚至是 rails 控制台时，我都会得到一个`crack/xml (LoadError)`. 任何人有任何他们认为可以帮助我正确启动和运行轨道的建议吗？

```
Construct Coverage: rails s
/Users/Construct/.rvm/gems/ruby-1.9.3-p194@coverage/gems/ap-0.1.1/lib/ap.rb:2:in `require': cannot load such file -- crack/xml (LoadError)
    from /Users/Construct/.rvm/gems/ruby-1.9.3-p194@coverage/gems/ap-0.1.1/lib/ap.rb:2:in `<top (required)>'
    from /Users/Construct/.rvm/gems/ruby-1.9.3-p194@global/gems/bundler-1.1.5/lib/bundler/runtime.rb:68:in `require'
    from /Users/Construct/.rvm/gems/ruby-1.9.3-p194@global/gems/bundler-1.1.5/lib/bundler/runtime.rb:68:in `block (2 levels) in require'
    from /Users/Construct/.rvm/gems/ruby-1.9.3-p194@global/gems/bundler-1.1.5/lib/bundler/runtime.rb:66:in `each'
    from /Users/Construct/.rvm/gems/ruby-1.9.3-p194@global/gems/bundler-1.1.5/lib/bundler/runtime.rb:66:in `block in require'
    from /Users/Construct/.rvm/gems/ruby-1.9.3-p194@global/gems/bundler-1.1.5/lib/bundler/runtime.rb:55:in `each'
    from /Users/Construct/.rvm/gems/ruby-1.9.3-p194@global/gems/bundler-1.1.5/lib/bundler/runtime.rb:55:in `require'
    from /Users/Construct/.rvm/gems/ruby-1.9.3-p194@global/gems/bundler-1.1.5/lib/bundler.rb:119:in `require'
    from /Users/Construct/Dropbox/rails_projects/Coverage/config/application.rb:7:in `<top (required)>'
    from /Users/Construct/.rvm/gems/ruby-1.9.3-p194@coverage/gems/railties-3.2.1/lib/rails/commands.rb:53:in `require'
    from /Users/Construct/.rvm/gems/ruby-1.9.3-p194@coverage/gems/railties-3.2.1/lib/rails/commands.rb:53:in `block in <top (required)>'
    from /Users/Construct/.rvm/gems/ruby-1.9.3-p194@coverage/gems/railties-3.2.1/lib/rails/commands.rb:50:in `tap'
    from /Users/Construct/.rvm/gems/ruby-1.9.3-p194@coverage/gems/railties-3.2.1/lib/rails/commands.rb:50:in `<top (required)>'
    from script/rails:6:in `require'
    from script/rails:6:in `<main>' 
```

我试图安装破解 gem 然后运行 ​​bundler 但我仍然得到同样的错误，即使在终端重新启动后也是如此。所以我不确定如何解决这种情况。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-07-26T02:57:02.757

我得到了@apneadiving 解决方案。

我也尝试更换

```
gem 'ap' 
```

和

```
gem 'awesome_print' 
```

在 Gemfile 中。

这似乎也有效。

更新：似乎ap可能是awesome_print gem的html/xml版本。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-08-26T15:40:57.097

可以肯定的是：错误源于 ap gem，[这一行](https://github.com/drcapulet/ap/blob/master/lib/ap.rb#L2)。

它使用crack/xml 作为依赖，但它没有在gemfile 中声明为依赖，子捆绑器不知道应该添加它。

怎么修？

*   在 gem 文件中添加 gem `crack`，在`ap`gem之前

*   或更改 ap gem 源代码

# build - Jenkins 中的条件配置

> ID：12131229
> 
> 赞同：0
> 
> 时间：2012-08-26T15:13:12.363
> 
> 标签：build, hudson, jenkins

我有一个 Jenkins 配置 X，它每晚触发一次，应该从另一个配置 Y 复制最后成功的构建工件并处理它。

如果自上次成功运行 conf X 以来没有成功运行作业 Y（因此 - 没有要处理的新工件），我想以某种方式阻止触发器。

你知道一个很好的简单方法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-27T05:46:46.457

您可能会发现一些有用的插件条件构建步骤 [https://wiki.jenkins-ci.org/display/JENKINS/Conditional+BuildStep+Plugin](https://wiki.jenkins-ci.org/display/JENKINS/Conditional+BuildStep+Plugin) 和参数化触发器 [https://wiki.jenkins-ci.org/display /JENKINS/参数化+触发器+插件](https://wiki.jenkins-ci.org/display/JENKINS/Parameterized+Trigger+Plugin)

# java - 如何通知 Web 服务器响应长轮询？

> ID：12131233
> 
> 赞同：0
> 
> 时间：2012-08-26T15:13:38.620
> 
> 标签：java, jakarta-ee

我们有一个 Web 服务器、一个客户端应用程序和一个与之响应的服务器应用程序。下图描述了结构。

![在此处输入图像描述](../Images/92cdcdababcf23b0e4651fce411c2f49.png)

系统是这样工作的：用户在客户端应用程序上更改了一些东西，例如更改一本书的标题。它将向服务器应用程序发送一个 TCP/IP 包。我期望的结果是在网络浏览器中显示的书名应该总是自动更改。据我所知，网络浏览器应该与网络服务器保持一个长轮询请求。我的问题是服务器应用程序如何通知 Web 服务器有关更改？我应该使用什么样的技术？

所有的应用程序都是用 Java 编写的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-26T15:20:40.537

我建议你使用 JMS 队列。当 Web 浏览器转向服务器执行长轮询时，它应该到达连接到队列并调用阻塞`receive()`方法的 servlet。当客户端应用程序通知服务器应用程序时。应将适当的消息发送到队列中。此时阻塞`receive()`将返回，servlet 将向 Web 浏览器发送更新消息并返回阻塞`receive()`状态，直到发送下一个通知。

为避免会话之间的不匹配，您可以使用动态队列或（更好）一个带有可以等于当前会话 ID 的选择器的队列。

消息可以发送到使用 JSON 序列化的 Web 客户端。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-26T15:27:31.363

“彗星”专为长轮询http请求而设计。有关详细信息，请参阅： [http://en.wikipedia.org/wiki/Comet_(programming)](http://en.wikipedia.org/wiki/Comet_%28programming%29) 。Comet有一些实现，例如：Nginx + mod_push，你的Server-app发送一个http到Nginx推送一个msg，然后通过nginx发送到浏览器。

# c# - 使用 SQL Server CE 4.0 的简单实体查询慢

> ID：12131241
> 
> 赞同：1
> 
> 时间：2012-08-26T15:15:00.807
> 
> 标签：c#, entity-framework, sql-server-ce

我使用 SQL Server Compact Edition 4.0 作为我的数据库并使用实体框架。我有一个 DataGrid 可以进行一些计算（使用 8 列 x 10 行的测试数据，每行执行一次计算，因此只执行 10 次）。

如果我使用任何实体查询，则 calc 方法会明显变慢。当我删除它们时，结果是即时的（无法辨别时间延迟）。

考虑这一行代码：

```
Account a = (from accounts in context.Account select accounts).FirstOrDefault(); 
```

我没有这样做，而是`context.Account`在点击执行计算的方法之前从中获取数据并将其放入列表中：

```
List<Account> accountsTable = context.Account.ToList(); 
```

然后用这行替换上面的代码行，除了查询列表而不是实体之外，它做同样的事情：

```
Account a = (from accounts in accountsTable select accounts).FirstOrDefault(); 
```

使用该`List<Account>`方法没有性能下降。

我知道使用实体会查询数据库并产生一些开销 - 但使用本地数据库（即没有网络问题等）和 10 行数据，我会认为它可以忽略不计。

我看过这篇文章：[SQL Server CE 4.0 Entity Framework，查询运行速度非常慢（与 SQL Server CE 3.5 相比）](https://stackoverflow.com/questions/9674177/sql-server-ce-4-0-entity-framework-query-runs-realy-slow-compared-with-sql-ser)，但这不是这里的问题。

我一定错过了一些简单的东西 - 如果有人能启发我，我将非常感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-08T23:32:35.237

使用以下内容时是否有性能提升：

```
using System.Linq;
Account a = context.Account.FirstOrDefault(); 
```

我怀疑您的查询首先解决（到列表），然后传递给 FirstOrDefault。我相信`FirstOrDefault`直接运行会导致您的代码读取更少的记录，从而获得更好的性能。

# mysql - 带有选择的sql语句

> ID：12131246
> 
> 赞同：-2
> 
> 时间：2012-08-26T15:15:10.373
> 
> 标签：mysql, sql

我有这个我无法开始工作的 SQL 语句，我不确定我做错了什么。

这是 SQL：

```
INSERT INTO data
(id_user,id_inf)
VALUES
(
 (SELECT userid FROM t4_adsmanager_ads WHERE userid NOT IN (select id_user from data) ),
 (SELECT id     FROM t4_adsmanager_ads WHERE id     NOT IN (select id_inf from data))
) 
```

因为我想做的是`t4_adsmanager_ads`我有用户创建的广告

假设`t4_adsmanager_ads`id = 47 的用户有 id = 1,2,3 的广告

在数据表中我有

```
 id   id_inf   id_user 
```

我希望它是那样的

```
 id   id_inf   id_user
         50     1        47
         51     2        47
         52     3        47 
```

编辑：我的错误是没有错误只是没有工作thx

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-26T15:59:58.373

您当前的语法要求子选择仅返回一条记录，而您的示例中并非如此。

我建议您在复合列的表中创建一个`UNIQUE`索引：`data``(id_user, id_inf)`

```
ALTER TABLE data ADD UNIQUE INDEX (id_user, id_inf); 
```

然后你只需要使用[`INSERT ... SELECT`](http://dev.mysql.com/doc/en/insert-select.html)修饰符`IGNORE`：

```
INSERT IGNORE INTO data (id_user, id_inf) SELECT userid, id FROM t4_adsmanager_ads; 
```

# ruby-on-rails-3 - 将 Rails 集成到 jekyll 中

> ID：12131247
> 
> 赞同：1
> 
> 时间：2012-08-26T15:15:13.627
> 
> 标签：ruby-on-rails-3, jekyll

我是新来的铁路。我已经用 jekyll 设置了一些页面。现在我想把这两件事结合起来。第一种方法：[博客](https://github.com/zbruhnke/bloggy)。

我必须为体育俱乐部建立一个主页，所以我需要：

*   几个（大部分）静态页面（jekyll 在这里工作正常）。
*   一些动态页面（时间表、结果等）是从可下载的 xml 中即时计算出来的。
*   活动日历...

通过 bloggy，我集成了 jekyll，但仍然与 rails 有所分离。现在的问题。我如何使用 jekyll（我真的很喜欢）并使用例如

```
<%= stylesheet_link_tag    "application", :media => "all" %> 
```

或 jekyll 帖子中的其他特定于 Rails 的内容。

有什么建议么？我是否误解了一些一般概念？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-30T14:57:38.973

您正在尝试做一些超出 jekyll（和博客）范围的事情。具体来说，您正在尝试使用 jekyll 创建动态页面。

我没有使用博客，但我的网站使用 jekyll。从我理解[博客概述](http://www.engineyard.com/blog/2012/introducing-bloggy-a-simple-way-to-add-a-jekyll-blog-to-any-rails-application/)的方式来看，它实际上所做的只是将 jekyll 的输出推送到您的 rails 应用程序的“公共”目录中。文件仍然以完全静态的方式提供。可能有一种方法可以让 Rails 在“公共”文件上运行一些进程，但这将是跨目的的。将 Rails 用于任何需要具有任何级别的服务器端动态处理的东西。将 Jekyll 用于任何可以完全烘焙并作为具有零服务器端动态处理的平面文件的内容。（当然，Rails 可以提供平面文件，但 jekyll 没有服务器端处理组件。）

综上所述，根据您要执行的操作，客户端动态操作绝对在 jekyll 的范围内。例如，使用 javascript 来确定客户端特征并调用适当的样式表。所以，要么设置你的 Rails 应用程序来渲染任何需要动态输出的文件，要么想办法用 javascript 来做。

* * *

*顺便说一句：如果您认为使用 jekyll 的最佳方法，您可以让它只为每个页面生成内容区域（例如，仅生成`<body>`或特定`<div>`标签），然后将这些部分包含在 rails 中，这些部分将负责包装这页纸。这似乎会增加开销，但我确信它可以工作。*

# javascript - Javascript window.open 中的 UTF8 字符串被 UIWebview 的 shouldStartLoadWithRequest 拦截

> ID：12131249
> 
> 赞同：0
> 
> 时间：2012-08-26T15:15:59.967
> 
> 标签：javascript, objective-c, utf-8, uiwebview

我的 UIWebview 中有一个带有 JS 的页面，用于向我的 Obj C 代码发送一些非英语文本。当我对我在 Obj C 代码中收到的内容进行 NSlog 时，我得到了乱码输出。有人可以看到这里出了什么问题：

JS代码：

```
window.open("http://nothing.com?ST=nǐ",null); 
```

对象 C 代码：

```
- (BOOL)webView:(UIWebView*)webView shouldStartLoadWithRequest:(NSURLRequest*)request navigationType:(UIWebViewNavigationType)navigationType {

   NSLog([[request URL] absoluteString]);
   return YES;

} 
```

控制台输出：

[http://nothing.com?ST](http://nothing.com?ST) =n㽲79

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-26T16:01:44.333

您将字符串*用作*. `NSLog()`和

```
NSLog(@"%@", [[request URL] absoluteString]); 
```

你会得到预期的输出。

详细解释：ǐ的UTF-8序列是C7 90。in的内容`[[request URL] absoluteString]`是`shouldStartLoadWithRequest`

> [http://nothing.com/?ST=n%C7%90](http://nothing.com/?ST=n%C7%90)

如果将其用作格式字符串，“%C”将被随机字符替换。

要摆脱百分比转义，请使用

```
NSString *url = [[[request URL] absoluteString] stringByReplacingPercentEscapesUsingEncoding:NSUTF8StringEncoding]; 
```

# sql - 两列作为主键或一列作为PK +索引？

> ID：12131251
> 
> 赞同：0
> 
> 时间：2012-08-26T15:16:04.103
> 
> 标签：sql, database, postgresql, primary-key, normalization

此表包含用户的照片（缩略图和完整）。
大多数查询都会有一个“WHERE user_id =？” 健康）状况。

```
CREATE TABLE photos (
  "photo_id" serial, -- serial is postgres' autoincrement
  "user_id" integer not null, -- foreign key to users table
  "filename_thumbnail_50" varchar not null,
  "filename_thumbnail_75" varchar not null, -- 75px x 75px thumbnail
  "filename_full" varchar not null,
  PRIMARY KEY ("photo_id", "user_id")
); 
```

这个用例的最佳设计和/或性能设计是什么：
- 像上面的例子一样的两列主键？
- 一个主键 (photo_id) 和 user_id 上的索引？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-26T15:30:11.223

主键应遵循您的*业务规则*，仅此而已。由于这样的照片没有“真实”（即自然）主键，因此使用序列作为 PK 绝对有意义。

扩展主键`user_id`没有任何意义，也没有任何目的（因为`photo_id`无论如何都是唯一的，你只会增加索引维护的开销）。由于`user_id`是索引中的第二列，它不太可能用于限制`user_id`（不是不可能但不太可能）的查询

所以我会坚持使用 PK`photo_id`并添加一个索引`user_id`（无论如何，索引外键列总是一个好主意）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-26T15:29:56.510

所写的主键不能用于按 user_id 进行搜索，因为 user_id 是键中的第二列。

您的第二个选项是最好的 - 仅 photo_id 上的主键，因为这是记录的唯一标识符，并在 user_id 上为您的查询添加单独的索引。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-26T15:34:33.503

如果您有自动递增的 ID，我认为您不需要 user_id 作为主键。你为什么不在 user_id 上使用外键到你的用户表（我猜你有一个）？

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-26T16:07:08.153

如果您有一个专门用于识别目的的列（在本例中为 photo_id），则不需要第二个键列。

如果您的情况可能有多个具有相同 photo_id 和不同 user_ids 的记录，那么我认为最好有一个中间表来创建多对多关系并保留单个主键。例如：

```
CREATE TABLE photos (
  "photo_id" serial, 
  -- other columns
  PRIMARY KEY ("photo_id")
);

CREATE TABLE users (
  "user_id" serial, 
  -- other columns
  PRIMARY KEY ("user_id")
);

CREATE TABLE photos_users (
  "photo_user_id" serial, 
  "photo_id" integer, -- not sure if this datatype is correct for postgres
  "user_id" integer, -- not sure if this datatype is correct for postgres
  PRIMARY KEY ("photo_user_id")
); 
```

据我所知 - 如果有问题的表没有特定的 id 列，则需要第二个键列，如果只使用 1 个键，则可能存在重复。下面是一个例子：

```
CREATE TABLE Person (
    "FirstName" varchar NOT NULL,
    "LastName" varchar NOT NULL,
    "PostalCode" varchar NOT NULL,
    PRIMARY KEY ("FirstName", "LastName", "PostalCode")
); 
```

在上述情况下`FirstName`，它的唯一性不足以作为主键， and 也不会`FirstName`，`LastName`因此在这种情况下，至少会使用 3 列。当然，最好有一个`ID`or`PersonID`列并将其用作主键。

就性能而言，主键不会产生太大影响。担心索引。确保将在`WHERE`子句中使用的任何列或`JOIN`或`AGGREGATE`具有索引。

# video - opencv 2.4中的ffmpeg

> ID：12131252
> 
> 赞同：1
> 
> 时间：2012-08-26T15:16:28.630
> 
> 标签：video, opencv, ffmpeg

我正在使用opencv，但它非常适合它将打开的视频类型。我有 2.4 版的 opencv，它显然内置了 ffmpeg 支持，尽管它不能正确打开任何电影文件，obj.grab() 返回 false，retrieve(frame,0) 返回 NULL。所以在我看来 FFmpeg 工作不正常，我需要做些什么来打开它，从互联网搜索人们似乎暗示从 2.4 开始它不是问题（尽管显然不是）。任何帮助，所有其他线程似乎都无法为我提供答案。

（Windows 7、Visual Studio 2010、opencv 2.4）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-26T22:25:42.673

我有同样的问题，通过将 opencv_ffmpeg241.dll 复制到我的可执行文件工作目录来解决它。一开始我没有意识到它丢失了，因为我只是复制了 DLL 的调试版本（文件名末尾有一个“d”），但是这个只是一种风格。当我运行我的程序时，也没有“缺少 DLL”错误，打开 VideoCaptures 只是不起作用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-26T15:52:46.643

它可能不是您要寻找的答案，但是我在使用 2.4 时遇到了类似的问题，当我改用 2.3 版本时，它又可以正常工作了。我不知道问题是什么，我只知道这解决了我的问题。hth..

# android - canvas.drawBitmap() 时使用油漆和将油漆设置为空有什么区别

> ID：12131256
> 
> 赞同：4
> 
> 时间：2012-08-26T15:16:52.473
> 
> 标签：android, android-canvas

我注意到每个`canvas.drawBitmap()`都有一个`Paint`参数。
API 文档总是说*可能为空。用于绘制位图的颜料。* 但是，投入和不投入有什么区别`null`？我尝试使用自定义油漆，但将油漆设为空似乎没有区别。

感谢您的任何回复。

# java - 在 Java 中存储 IP 地址

> ID：12131258
> 
> 赞同：-1
> 
> 时间：2012-08-26T15:17:01.780
> 
> 标签：java, arraylist, pcap, jnetpcap

我想从 pcap 文件中存储 Java 中的 IP 地址列表（我也可以从 pcap 文件和 ipaddresses 列表中获取所有数据包信息），然后比较这些 IP 地址以进行端口扫描检测。我不知道如何将 IP 地址存储在 list 或 array 中。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-26T15:24:14.280

只需创建一个新的 ArrayList，并向其中添加元素

```
List<InetAddress> myList = new ArrayList<InetAddress>();//make a new list
myList.add(blah);//add element
myList.add(blah2);//add element
myList.add(blah3);//add alement
//Store to follow, sounds like you can do that but not the list part so i wont put that here 
```

# ruby-on-rails-3 - Rails 3：获取关联表之间的属性以及如何在模型类中调用这些属性

> ID：12131259
> 
> 赞同：0
> 
> 时间：2012-08-26T15:17:39.880
> 
> 标签：ruby-on-rails-3, activerecord, associations, paperclip

我有 4 桌联赛、分区、球队和教练。这些表之间的关系被描述为一个联赛有很多分区，一个分区有很多球队但一个球队只有一个教练。我还想通过与团队相关的部门查询团队的联赛。

我目前的设置：

```
class League < ActiveRecord::Base
  has_many :divisions
  has_many :teams, :through => :divisions, :readonly => true
  has_many :coaches, :through => :teams, :readonly => true
end

class Division < ActiveRecord::Base
  belongs_to :league
  has_many :teams
end 
```

我应该提到这一点，我正在使用回形针上传团队徽标。但是，当我想将存储路径更改为：/public/assets/images/teams/[division_name]/:style/:basename.:extension 时，我不知道如何获取要使用的团队的部门名称用于文件系统存储的路径和 url。

```
class Team < ActiveRecord::Base
  belongs_to :division
  belongs_to :league
  belongs_to :stadium

  has_many :players
  has_one :coach

  has_attached_file :logo, :styles => { :large => "120x180>", :thumb => "100x100>", :tiny => "25x25>" },  
      :url => "/assets/images/teams/#{name}/:style/:basename.:extension",  
      :path => ":rails_root/public/assets/images/teams/#{name}/:style/:basename.:extension"

end

class Coach < ActiveRecord::Base
  belongs_to :division
  belongs_to :league
  belongs_to :stadium
  belongs_to :team
end 
```

到目前为止我的问题：

1.  我设置正确吗？我想查询联赛或分区的教练和球队是非常重要的。
2.  在 Team 类中，我想定义一个方法（或任何它调用的方法），它返回团队的部门名称，以将该部门名称包含到存储配置的 url 和路径中，如上所述。

任何帮助将非常感激！

**更新：**我尝试`self.division.name`在 team.rb 类中使用来获取团队部门的名称：

```
has_attached_file :logo, :styles => { :large => "120x180>", :thumb => "100x100>", :tiny => "25x25>" },  
      :url => "/assets/images/teams/#{self.division.name}/:style/:basename.:extension",  
      :path => ":rails_root/public/assets/images/teams/#{self.division.name}/:style/:basename.:extension" 
```

但是，我收到此错误消息：

```
`method_missing': undefined method `division' for #<Class:0x10c6a2900> (NoMethodError) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-26T19:44:01.627

我不确定这是否是您想要的，但获取关联对象非常容易：

```
# in team.rb
self.division.name #self is not required

# in division.rb
self.teams.first.name 
```

但是你不需要`has_many :teams, :through => :divisions`在你的 League 类中，因为它已经与 Division 相关联，而 Division 又与 Team 相关联。在设置多对多关联时，您只能使用“has_many through”。

```
# in league.rb
self.divisions.first.teams.first 
```

你也可以用它`asset_path('teams/my-name/some-file.jpg')`来获取你的图像，但我想这只能在你的视图、助手和控制器中访问。

# codeigniter - 使用 codeigniter input-> post 访问字段值数组

> ID：12131261
> 
> 赞同：0
> 
> 时间：2012-08-26T15:17:50.313
> 
> 标签：codeigniter

我尽一切努力让下面的代码与codeigniter一起工作。

```
$arrival_date = $_POST['arrival_date'][$re_id] 
```

这是我在codeigniter中所做的：

```
$arrival_date = $this->input->post('arrival_date'[$re_id]);
$arrival_date = $this->input->post('arrival_date')[$re_id];
$arrival_date = $this->input->post('arrival_date[$re_id]'); 
```

以上三个代码都失败了。

任何人都知道如何在codeigniter中做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-26T15:24:25.453

```
$x = $this->input->post('arrival_date');
$arrival_date = $x[$re_id]; 
```

如果表单中的数组看起来像`name="arrival_date[re_id]"`，那么

```
$arrival_date = $x['re_id']; 
```

如果您也出示表格，我可以提供更多帮助。

# javascript - 将文本字段限制为三个数字

> ID：12131262
> 
> 赞同：0
> 
> 时间：2012-08-26T15:17:52.230
> 
> 标签：javascript

如果输入的字符超过三个，我想检查我的 textField。

```
if(e.source.length > 3){       
    // I want only the first three numbers and other digits should be removed. 
} 
```

我尝试使用`e.source.value.replace(RegularExpression,e.source.value(0,3))`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-26T15:22:06.057

```
<input type="text" maxlength="3" />
<textarea maxlength="3"></textarea> 
```

[演示](http://jsfiddle.net/7FLbw/)，不需要 JS

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-26T15:21:05.047

这很简单：

```
var text = document.getElementById('textboxID');
if(text.value.length>3){
//do something
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-26T15:20:43.343

你可以使用`var a = "something"; var b = a.slice(0,3);`

# xcode - 如何在单点触控中关闭模态视图控制器

> ID：12131263
> 
> 赞同：1
> 
> 时间：2012-08-26T15:17:55.417
> 
> 标签：xcode, ipad, xamarin.ios

我已经使用故事板在单点触控中设计 UI。我有一个按钮，一旦你点击它，它将使用 PerformSegue 移动到另一个视图控制器，segue 作为模态工作，所以它会弹出一个表单。

我的问题是我`barbuttonitem`在导航栏中包含取消但我无法关闭或关闭此模式。

你们能帮帮我吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-29T12:40:29.693

您需要在按钮上添加委托并在此委托中关闭您的模态视图：

```
yourButton.Clicked += (sender, e) => {
        this.DismissModalViewControllerAnimated(true);
}); 
```

对于 pushin 视图，我使用这个：

```
this.NavigationController.PushViewController (
        yourView, true
); 
```

我希望这有帮助。

# c# - 在 ASP.net 中使用 ConcurrentDictionary

> ID：12131264
> 
> 赞同：1
> 
> 时间：2012-08-26T15:17:57.083
> 
> 标签：c#, asp.net, multithreading, concurrency, parallel-processing

我写了以下代码

```
public static class QuizSessionBL
    {
        #region Private Data

        private static ConcurrentDictionary<int, QuizData> _data = new ConcurrentDictionary<int, QuizData>();

        #endregion

        #region Public Methods

        public static void AddOrUpdate(QuizData pQuizData)
        {
            _data.AddOrUpdate(pQuizData.Quiz.QuizId, pQuizData,
            (key, existingVal) =>
            {
                return existingVal;
            });
        }

        public static bool Retrieve(int pQuizId, out QuizData pQuizData)
        {
            return _data.TryGetValue(pQuizId, out pQuizData);
        }

        public static void Remove(int pQuizId)
        {
            QuizData qd;
            _data.TryRemove(pQuizId, out qd);
        }

        #endregion
    } 
```

我的目标是：

1.  每次都在不查询数据库的情况下向学生提供内存测验数据。
2.  测验管理员开始测验时将调用 AddOrUpdate() 方法
3.  管理员要关闭测验时将调用 Remove() 方法。

例如，如果 3 门课程的 30 名学生（每门课程 10 名）同时调用 Retrieve() 方法，则 _data 集合应该只有 3 个条目，每门课程一个。

所以基本上我想知道上面代码的效率，或者我应该添加更多的东西。我期待在逻辑/概念方面而不是讨论方面的答案。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-27T14:17:01.580

您的示例看起来不错，因为字典中只有 1 个具有相同 ID 的项目。但是 ConcurrentDictionary 只会确保添加/删除是线程安全的。如果两个学生获得相同的 QuizData 对象并对其进行修改，他们将相互覆盖，除非每个 QuizData 对象内/周围都有线程安全性。

# .htaccess - 重定向包含问号的 URL

> ID：12131265
> 
> 赞同：0
> 
> 时间：2012-08-26T15:17:58.677
> 
> 标签：.htaccess, mod-rewrite, redirect, http-status-code-301

有必要移动我博客的位置，我正在努力确保我通过旧链接捕获所有链接并将它们重定向到新链接。

博客已从[http://example.com/](http://example.com/)移至[http://example.com/blog/](http://example.com/blog/)

URL 用于生成帖子名称之前的日期（默认情况下），我决定不这样做，以保持 URL 令人难忘。

问题是有一个？原始 URL 中的字符（我正在使用的 CMS 生成的默认 URL，它会导致重定向出现问题：

```
RewriteRule ^post.php?s=2012-01-01-blog-post$ /blog/blog-post? [R=301,L] 
```

所以我需要逃避？不知何故，但我不知道怎么做！

我可以使用更通用的重定向来避免 ? 但这会重定向到列表页面，而不是文章本身：

```
RewriteRule ^post.php$ http://tempertemper.net/blog/? [R=301,L] 
```

我如何让它阅读？作为 URL 的一部分！？

谢谢参观！

马丁:)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-26T16:41:55.863

我认为您需要使用 RewriteCond 来检查是否存在 QUERY_STRING 值，然后假设查询字符串与您的博客模式匹配，捕获博客名称，然后在 RewriteRule 中使用捕获的值。像这样的东西：

```
RewriteCond ${QUERY_STRING} ^s=[0-9]{4}-[0-9]{2}-[0-9]{2}-(.*)$
RewriteRule ^post.php$ /blog/%1 [R=permanent,L] 
```

%1 指的是匹配 RewriteCond 中的第一个捕获模式（除非 RewriteCond 匹配，否则 RewriteRule 不会触发）。

这是必要的原因是 RewriteRule 无法将查询字符串视为请求路径的一部分，因此您必须在 RewriteRule 之前使用 RewriteCond 检查（并捕获）查询字符串。

# iis - 在 IIS 中禁用 HTTP OPTIONS、TRACE、HEAD、COPY 和 UNLOCK 方法

> ID：12131266
> 
> 赞同：25
> 
> 时间：2012-08-26T15:18:01.997
> 
> 标签：iis, web-config

出于安全原因，我想通过应用程序级别禁用这些方法，所以我有这个`web.config`文件：

```
<configuration>
    <location path="index.php">
    <system.webServer>
                <directoryBrowse enabled="false" />
    </system.webServer>

    <system.web>
        <authorization>
            <deny verbs="OPTIONS" users="*" />
            <deny verbs="TRACE" users="*" />
            <deny verbs="HEAD" users="*" />
            <deny verbs="PROPFIND" users="*" />
            <deny verbs="COPY" users="*" />
            <deny verbs="LOCK" users="*" />
            <deny verbs="UNLOCK" users="*" />
            <deny verbs="PROPPATCH" users="*" />
            <deny verbs="MKCOL" users="*" />
            <deny verbs="MOVE" users="*" />
            <deny verbs="DELETE" users="*" />
        </authorization>
    </system.web>

  </location>
</configuration> 
```

但这不起作用 - 有什么想法吗？

* * *

## 回答 #1

> 赞同：41
> 
> 时间：2015-03-27T16:48:25.567

最后我找到了这个问题的另一个答案。这对我有用。只需将以下数据添加到您的 webconfig 文件中。

```
<configuration>
 <system.webServer>
  <security>
   <requestFiltering>
    <verbs allowUnlisted="true">
     <add verb="OPTIONS" allowed="false" />
    </verbs>
   </requestFiltering>
  </security>
 </system.webServer>
</configuration> 
```

更多信息，您可以访问这个网站：[http ://www.iis.net/learn/manage/configuring-security/use-request-filtering](http://www.iis.net/learn/manage/configuring-security/use-request-filtering)

如果你想测试你的网站，它是否工作......你可以使用“ **HttpRequester** ”mozilla firefox插件。对于这个插件：[https ://addons.mozilla.org/En-us/firefox/addon/httprequester/](https://addons.mozilla.org/En-us/firefox/addon/httprequester/)

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-09-03T06:28:11.230

这对我有用，但只有在强制特定动词由默认处理程序处理之后。

```
<system.web>
...
  <httpHandlers>
  ... 
    <add path="*" verb="OPTIONS" type="System.Web.DefaultHttpHandler" validate="true"/>
    <add path="*" verb="TRACE" type="System.Web.DefaultHttpHandler" validate="true"/>
    <add path="*" verb="HEAD" type="System.Web.DefaultHttpHandler" validate="true"/> 
```

您仍然使用与上面相同的配置，但还强制使用默认处理程序处理动词并进行验证。来源：[http ://forums.asp.net/t/1311323.aspx](http://forums.asp.net/t/1311323.aspx)

一个简单的测试方法就是拒绝 GET 并查看您的站点是否加载。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2019-08-30T14:08:55.173

这个禁用所有虚假动词，只允许 GET 和 POST

```
<system.webServer>
  <security>
    <requestFiltering>
      <verbs allowUnlisted="false">
    <clear/>
    <add verb="GET" allowed="true"/>
    <add verb="POST" allowed="true"/>
      </verbs>
    </requestFiltering>
  </security>
</system.webServer> 
```

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2018-01-11T19:54:24.967

对于任何使用 IIS 管理器寻找 UI 选项的人。

1.  在 IIS 管理器中打开网站
2.  转到**请求过滤**并打开请求过滤窗口。
3.  转到**动词**选项卡并将 HTTP 动词添加到“允许动词...”或“拒绝动词...”。这允许在“拒绝动词..”集合中添加 HTTP 动词。

**IIS 管理器中的请求过滤窗口** [![IIS 管理器中的请求过滤窗口](../Images/76f2756cbbace178a57a8cc9f90317e4.png)](https://i.stack.imgur.com/qoN4J.png)

**添加动词...或拒绝动词...** [![在此处输入图像描述](../Images/51d1971e8f684d9b8f35d92766dc6610.png)](https://i.stack.imgur.com/AAaHI.jpg)

# .net - ZipPackage 创建多个文件的 ZIP - 有什么问题吗？

> ID：12131267
> 
> 赞同：1
> 
> 时间：2012-08-26T15:18:15.243
> 
> 标签：.net

我的 ASP.NET 应用程序必须创建一个包含多个文件的 ZIP 文件。我不想使用外部库。在 .NET 中，我只找到了 ZipPackage。它总是自动添加文件'[Content_Types].xml'，但这对我来说是可以接受的。但是 - 我没有忽略 ZipPackage 的任何其他可能的问题吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-26T15:26:28.950

你也可以使用 Gzipstream 或 deflatestream

[http://msdn.microsoft.com/en-us/library/system.io.compression.gzipstream.aspx](http://msdn.microsoft.com/en-us/library/system.io.compression.gzipstream.aspx)

# html - primefaces - 可从 有效但不可见

> ID：12131268
> 
> 赞同：2
> 
> 时间：2012-08-26T15:18:20.083
> 
> 标签：html, css, jsf, primefaces, draggable

我正在为显示在`<p:dataTable>`. 该功能运行良好，并且 ajax 调用也在进行中。

唯一的问题是当从数据表中拖动图像时，它不会显示被拖动到其他 html 组件上的图像......即它隐藏在其他 html 组件后面。我也为我的 dataTable 和其他组件尝试`overflow:visible`过，但还没有运气。

我什至删除了页面中的布局。仍然没有运气。这有关系`<p:dataTable>`吗？

使用素面 3.3.1

**jsf页面代码：**

```
<html xmlns="http://www.w3.org/1999/xhtml" 
  xmlns:ui="http://java.sun.com/jsf/facelets" 
  xmlns:h="http://java.sun.com/jsf/html" 
  xmlns:f="http://java.sun.com/jsf/core"
  xmlns:p="http://primefaces.org/ui">

<h:head>
    <title>Img</title>
</h:head>

<h:body>

    <h:form>

        <p:scrollPanel>
            <p:layout fullPage="true" >

                <p:layoutUnit position="north" minSize="100">

                </p:layoutUnit>

                <p:layoutUnit position="west" maxSize="200" minSize="200">

                    <p:dataTable var="img"
                                 value="#{orderBean.userMedia.mediaList}"
                                 id="dataTableID">
                        <p:column>

                            <p:graphicImage id="imgID" value="#{img.thumbNail.getString('url')}"/>
                            <p:draggable for="imgID" revert="true"/>

                        </p:column>

                    </p:dataTable>

                </p:layoutUnit>

                <p:layoutUnit position="center">

                    <p:outputPanel >

                        <p:panel id="outputPanelID" style="background: red; width: 100%;height: 100%">

                        </p:panel>

                        <p:droppable for="outputPanelID">
                            <p:ajax listener="#{orderBean.onDropImage}"/>
                        </p:droppable> 

                    </p:outputPanel>

                </p:layoutUnit>

                <p:layoutUnit position="south" minSize="60">

                </p:layoutUnit>

            </p:layout>
        </p:scrollPanel>

    </h:form>  

</h:body> 
```

正如您在屏幕截图中看到的那样。图像正在被拖动，并且后端侦听器也被调用，但被拖动的图像位于其他 html 组件下方。不知道我错过了什么。

**谢谢。**

截图： ![拖动发生但在其他 html 组件下方](../Images/d7a899c6f1ac9363a7d1fe270c514e6a.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-04T08:23:10.917

我找到了一个适合我的解决方案。诀窍是在拖动期间操纵中心布局单元中的 z-index。
下面的代码实现了这一点：

```
// Enable visibility for drag-and-drop items in Primefaces layout container <p:layoutUnit position="center">
$(".ra-page-pool-items-panel .ui-draggable").draggable({
    start: function() {
        $(".ui-layout-pane-center").each(function(){
            my.centerZIndex = $(this).css("z-index");
            $(this).css({"z-index": 0});
        });
    },

    stop: function() {
        $(".ui-layout-pane-center").each(function(){
            $(this).css({"z-index": my.centerZIndex});
        });
    }
}); 
```

所以这里都是：jsf（提示：hfx:pageItem 是一个私有组件）：

```
<h:form id="f">
<p:layout>
    <p:layoutUnit id="west" position="west" size="200" header="PAGE POOL" resizable="true" collapsible="true">
        <t:div styleClass="ra-page-pool-items-panel">
            <t:dataList id="dl" var="ppp" value="#{bean.pagePoolPages}">
                <hfx:pageItem id="ppp" model="#{ppp}" />
                <p:draggable for="ppp" revert="true" zindex="10" />
            </t:dataList>
        </t:div>
    </p:layoutUnit>

    <p:layoutUnit id="center" position="center" header="PAGE LIST">
        <t:div id="itemsPanel" styleClass="ra-page-list-items-panel">
            <t:dataList id="dl" var="plp" value="#{bean.pageListPages}">
                <hfx:pageItem id="plp" model="#{plp}" />
                <p:draggable for="plp" revert="true" zindex="10" />
            </t:dataList>
        </t:div>
    </p:layoutUnit>
</p:layout> 
```

此外还有一个 Javascript WebUI 初始化函数 WebUIUtils.initWebUI()，它在页面 init 上调用。

```
$(function(){WebUIUtils.initWebUI();});

var WebUIUtils = {
    centerZIndex: 0,

    initWebUI: function() {
        var my = this;

        // Enable visibility for drag-and-drop items in Primefaces layout container <p:layout>
        $(".ui-layout-unit .ui-layout-unit-content").each(function(){
            $(this).css({background: "red", overflow: "visible"});
        });

        // Enable visibility for drag-and-drop items in Primefaces layout container <p:layoutUnit position="center">
        $(".ra-page-pool-items-panel .ui-draggable").draggable({        // Do it only for the west items draggables
            start: function() {
                $(".ui-layout-pane-center").each(function(){
                    my.centerZIndex = $(this).css("z-index");
                    $(this).css({"z-index": 0});
                });
            },

            stop: function() {
                $(".ui-layout-pane-center").each(function(){
                    $(this).css({"z-index": my.centerZIndex});
                });
            }
        });
    }
}; 
```

希望这可以帮助

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-03T15:01:51.223

我正在研究类似的问题。

我还有一个`p:layout`带有两个布局单元的容器，`west`并且`center`. 我在两个容器中都有图像，并且想在两个容器之间拖放它们。

现在我发现了如何使中心的可拖动对象在其容器外可见。您必须将溢出设置为在布局单元内容上可见

```
$(".ui-layout-unit .ui-layout-unit-content ")
.each(function(){
    $(this).css({overflow: "visible"});
}); 
```

使它们可见。

但是这种方法只适用于`center`容器而不适用于`west`容器。我试图找出如何使`west`可拖动对象在`center`容器中也可见。

也许这些信息目前有帮助。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-29T13:38:59.183

您是否尝试设置`z-index`on `<p:draggable>`？

例如，尝试设置`zindex="10000"`为高`z-index`。如果可行，您可以尝试 1000 或 100。

# backbone.js - 刷新骨干应用程序上的页面会导致错误

> ID：12131272
> 
> 赞同：1
> 
> 时间：2012-08-26T15:18:57.973
> 
> 标签：backbone.js

我有一个显示内容列表的主干应用程序。该应用程序在使用链接等浏览它时工作正常，但我注意到当我在 chrome 中刷新浏览器时，我开始看到一条错误消息“未捕获的 TypeError：无法读取 null 的属性‘href’”此错误发生在主干.js 的第 969 行。

导致此错误的代码正在通过以下代码循环执行：

```
this._checkUrlInterval = setInterval(this.checkUrl, this.interval); 
```

有谁知道是什么原因造成的？我正在使用以下代码启动主干历史记录：

```
Backbone.history.start(); 
```

我的应用程序是使用骨干网、require.js 和 jquery mobile 构建的，但是如果我删除 jquery mobile 依赖项，我仍然会看到相同的错误，所以不要认为它与 jquery mobile 有任何关系。

任何帮助将不胜感激

亲切的问候

布赖恩

# jquery - Twitter Bootstrap - 选项卡 - URL 不变

> ID：12131273
> 
> 赞同：113
> 
> 时间：2012-08-26T15:19:06.007
> 
> 标签：jquery, twitter-bootstrap

我正在使用 Twitter Bootstrap 及其“标签”。

我有以下代码：

```
<ul class="nav nav-tabs">
    <li class="active"><a data-toggle="tab" href="#add">add</a></li>
    <li><a data-toggle="tab" href="#edit" >edit</a></li>
    <li><a data-toggle="tab" href="#delete" >delete</a></li>
</ul> 
```

选项卡工作正常，但在 URL 中未添加#add、#edit、#delete。

当我删除`data-toggle`URL 更改时，但选项卡不起作用。

有什么解决方案吗？

* * *

## 回答 #1

> 赞同：280
> 
> 时间：2012-08-27T08:43:48.997

试试这个代码。它将选项卡 href 添加到 url + 基于页面加载时的哈希打开选项卡：

```
$(function(){
  var hash = window.location.hash;
  hash && $('ul.nav a[href="' + hash + '"]').tab('show');

  $('.nav-tabs a').click(function (e) {
    $(this).tab('show');
    var scrollmem = $('body').scrollTop() || $('html').scrollTop();
    window.location.hash = this.hash;
    $('html,body').scrollTop(scrollmem);
  });
}); 
```

* * *

## 回答 #2

> 赞同：49
> 
> 时间：2014-03-04T00:26:33.157

完整的解决方案需要三个组件：

1.  如果 URL 中有哈希，则在加载页面时显示正确的选项卡。
2.  更改选项卡时更改 URL 中的哈希。
3.  当 URL 中的哈希更改时更改选项卡（后退/前进按钮），并确保第一个选项卡循环正确。

我不认为这里的任何评论，也不是公认的答案，可以处理所有这些情况。

由于涉及的内容很多，我认为它作为一个小型 jQuery 插件是最简洁的：[https ://github.com/aidanlister/jquery-stickytabs](https://github.com/aidanlister/jquery-stickytabs)

您可以像这样调用插件：

```
$('.nav-tabs').stickyTabs(); 
```

我为此写了一篇博文，[http://aidanlister.com/2014/03/persisting-the-tab-state-in-bootstrap/](http://aidanlister.com/2014/03/persisting-the-tab-state-in-bootstrap/)

* * *

## 回答 #3

> 赞同：30
> 
> 时间：2012-08-26T15:59:25.713

Using`data-toggle="tab"` *要求*插件处理选项卡，在执行此操作时会调用`preventDefault`事件（[github 上的代码](https://github.com/twitter/bootstrap/blob/v2.1.0/js/bootstrap-tab.js#L130)）。

您可以使用自己的选项卡激活，并让事件通过：

```
$('.nav-tabs a').click(function (e) {
    // No e.preventDefault() here
    $(this).tab('show');
}); 
```

而且您必须删除该属性`data-toggle="tab"`

如果您有疑问，请查看[文档。](http://twitter.github.com/bootstrap/javascript.html#tabs)

* * *

## 回答 #4

> 赞同：13
> 
> 时间：2013-10-03T08:24:00.273

由于您的锚元素已经更改了 url 哈希，因此监听[onhashchange](https://developer.mozilla.org/en-US/docs/Web/API/Window.onhashchange)事件是另一个不错的选择。正如@flori 已经提到的，此方法适用于浏览器后退按钮。

```
var tabs$ = $(".nav-tabs a");

$( window ).on("hashchange", function() {
    var hash = window.location.hash, // get current hash
        menu_item$ = tabs$.filter('[href="' + hash + '"]'); // get the menu element

    menu_item$.tab("show"); // call bootstrap to show the tab
}).trigger("hashchange"); 
```

最后，在定义监听器之后触发事件也将有助于在页面加载时显示正确的选项卡。

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2013-08-29T09:40:37.527

我对您的问题的解决方案：

首先为每个链接添加新`data-value`属性，如下所示：`a`

```
<ul class="nav nav-tabs">
    <li class="active">
        <a data-toggle="tab" href="#tab-add" data-value="#add">add</a>
    </li>
    <li>
        <a data-toggle="tab" href="#tab-edit" data-value="#edit">edit</a>
    </li>
    <li>
        <a data-toggle="tab" href="#tab-delete" data-value="#delete">delete</a>
    </li>
</ul> 
```

其次，更改选项卡的 id，例如 from `add`to `tab-add`，也更新 hrefs 以包含`tab-`前缀：

```
<div class="tab-content">
    <div class="tab-pane" id="tab-add">Add panel</div>
    <div class="tab-pane" id="tab-edit">Edit panel</div>
    <div class="tab-pane" id="tab-delete">Panel panel</div>
</div> 
```

最后是js代码：

```
<script type="text/javascript">
    $(function () {
        var navTabs = $('.nav-tabs a');
        var hash = window.location.hash;
        hash && navTabs.filter('[data-value="' + hash + '"]').tab('show');

        navTabs.on('shown', function (e) {
            var newhash = $(e.target).attr('data-value');
            window.location.hash = newhash;
        });
    })
</script> 
```

这是[jsFiddle](http://jsfiddle.net/UEmxE/) - 但由于 jsFiddle 使用了 iframe，它不起作用，但您可以阅读我的解决方案的源代码。

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2014-10-07T17:41:41.530

带有 Bootstrap 3 选项卡的 CakePHP 也存在同样的问题，而且当我使用外部 URL 和锚点发送时，它会跳转到丢失我的菜单的部分，在查看了许多解决方案后，这...

感谢：[http ://ck.kennt-wayne.de/2012/dec/twitter-bootstrap-how-to-fix-tabs](http://ck.kennt-wayne.de/2012/dec/twitter-bootstrap-how-to-fix-tabs)

```
$(document).ready(function()
 {  
//Redirecciona al tab, usando un prefijo al cargar por primera vez, al usar redirect en cake #_Pagos    
//Redirecciona al tab, usando #Pagos
/* Automagically jump on good tab based on anchor; for page reloads or links */
 if(location.hash) 
  {
     $('a[href=' + location.hash + ']').tab('show');         
  }

//Para evitar el bajar al nivel del tab, (al mostrarse el tab subimos)
$('a[data-toggle="tab"]').on('shown.bs.tab', function(e) 
{
    location.hash = $(e.target).attr('href').substr(1);
    scrollTo(0,0);      
});

//Actualiza el URL con el anchor o ancla del tab al darle clic
 /* Update hash based on tab, basically restores browser default behavior to
 fix bootstrap tabs */
$(document.body).on("click", "a[data-toggle]", function(event) 
  {
    location.hash = this.getAttribute("href");
  });

//Redirecciona al tab, al usar los botones de regresar y avanzar del navegador.
/* on history back activate the tab of the location hash if exists or the default tab if no hash exists */   
$(window).on('popstate', function() 
{
  //Si se accesa al menu, se regresa al tab del perfil (activo default), fixed conflict with menu
  //var anchor = location.hash || $("a[data-toggle=tab]").first().attr("href");
  var anchor = location.hash;
  $('a[href=' + anchor + ']').tab('show');

});   

});//Fin OnReady 
```

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2013-09-24T09:44:37.653

还有一种简单的方法可以对哈希更改做出反应（例如后退按钮）。只需将 hashchange 事件侦听器添加到 tomaszbak 解决方案：

```
$(function(){
  // Change tab on load
  var hash = window.location.hash;
  hash && $('ul.nav a[href="' + hash + '"]').tab('show');

  $('.nav-tabs a').click(function (e) {
    $(this).tab('show');
    var scrollmem = $('body').scrollTop();
    window.location.hash = this.hash;
    $('html,body').scrollTop(scrollmem);
  });

  // Change tab on hashchange
  window.addEventListener('hashchange', function() {
    var changedHash = window.location.hash;
    changedHash && $('ul.nav a[href="' + changedHash + '"]').tab('show');
  }, false);
}); 
```

* * *

## 回答 #8

> 赞同：2
> 
> 时间：2020-05-16T07:54:28.100

我知道 OP 说使用 JQuery，但您可以简单地使用 vanilla JS 来做到这一点：

```
document.querySelectorAll('ul.nav a.nav-link').forEach(link => {
    link.onclick = () => window.history.pushState(null, null, link.attributes.href.value);
}); 
```

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2016-07-21T07:42:40.767

我正在使用 Bootstrap 3.3.* 并且上述解决方案都没有帮助我，甚至标记为答案一。我刚刚添加了下面的脚本并工作了。

```
$(function(){
    var hash = document.location.hash;
    if (hash) {
       $('.navbar-nav a[href="' + hash + '"]').tab('show');
    }
    $('a[data-toggle="tab"]').on('click', function (e) {
       history.pushState(null, null, $(this).attr('href'));
    });
}); 
```

希望这对您有所帮助。

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2013-11-24T23:50:25.863

最简单的，假设您使用[此处](http://getbootstrap.com/javascript/#tabs)`data-toggle="tab"`描述的文档化语法：

```
$(document).on('shown.bs.tab', function(event) {
  window.location.hash = $(event.target).attr('href');
}); 
```

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2014-06-05T18:07:47.313

对于那些使用 Ruby on Rails 或任何其他服务器端脚本的用户，您需要使用`anchor`路径选项。这是因为一旦页面加载，它就没有可用的 URL 哈希。您将希望通过链接或表单提交提供正确的选项卡。

```
<%= form_for @foo, url: foo_path(@foo, anchor: dom_id(foo)) do |f| %>
# Or
<%= link_to 'Foo', foo_path(@foo, anchor: dom_id(foo)) %> 
```

如果您使用前缀来防止窗口跳转到 id：

```
<%= form_for @foo, url: foo_path(@foo, anchor: "bar_#{dom_id(foo)}") do |f| %> 
```

然后是 CoffeeScript：

```
 hash = document.location.hash
  prefix = 'bar_'
  $('.nav-tabs a[href=' + hash.replace(prefix, '') + ']').tab 'show' if hash
  $('.nav-tabs a').on 'shown.bs.tab', (e) ->
    window.location.hash = e.target.hash.replace '#', '#' + prefix 
```

或 JavaScript：

```
var hash, prefix;

hash = document.location.hash;
prefix = 'bar_';

if (hash) {
  $('.nav-tabs a[href=' + hash.replace(prefix, '') + ']').tab('show');
}

$('.nav-tabs a').on('shown.bs.tab', function(e) {
  window.location.hash = e.target.hash.replace('#', '#' + prefix);
}); 
```

这应该在 Bootstrap 3 中工作。

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2016-03-23T13:15:38.887

感谢**@tomaszbak**的原始解决方案，但是由于我的编辑被拒绝并且我无法对他的帖子发表评论，但我将在此处留下稍微改进且更具可读性的版本。

它基本上做同样的事情，但如果解决了我与他的跨浏览器兼容性问题。

```
$(document).ready(function(){
   // go to hash on window load
   var hash = window.location.hash;
   if (hash) {
       $('ul.nav a[href="' + hash + '"]').tab('show');
   }
   // change hash on click
   $('.nav-tabs a').click(function (e) {
       $(this).tab('show');
       if($('html').scrollTop()){
           var scrollmem = $('html').scrollTop(); // get scrollbar position (firefox)
       }else{
           var scrollmem = $('body').scrollTop(); // get scrollbar position (chrome)
       }
       window.location.hash = this.hash;
       $('html,body').scrollTop(scrollmem); // set scrollbar position
   });
}); 
```

* * *

## 回答 #13

> 赞同：0
> 
> 时间：2016-04-11T09:03:05.610

这是一个使用选项`history.pushState`，您可以使用浏览器历史记录返回上一个选项卡

```
 $(document).ready(function() {
  // add a hash to the URL when the user clicks on a tab
  $('a[data-toggle="tab"]').on('click', function(e) {
    history.pushState(null, null, $(this).attr('href'));
  });
  // navigate to a tab when the history changes
  window.addEventListener("popstate", function(e) {
    var activeTab = $('[href=' + location.hash + ']');
    if (activeTab.length) {
      activeTab.tab('show');
    } else {
      $('.nav-tabs a:first').tab('show');
    }
  });
}); 
```

* * *

## 回答 #14

> 赞同：0
> 
> 时间：2016-06-30T16:05:07.373

以上都不适合我，所以这是我的工作方式：

1.  添加`class="tab-link"`到所有需要此功能的链接
2.  将以下代码添加到您的 javascript：

```
    window.addEventListener
    (
        '流行状态'，
        函数（事件）
        {
            tab_change();
        }
    );

    函数 tab_change()
    {
        var hash = window.location.hash;
        hash && $( 'ul.nav a[href="' + hash + '"]' ).tab( 'show' );

        $( '.tab-link' ).click
        (
            函数（e）
            {
                $( 这个 ).tab( '显示' );

                var scrollmem = $( 'body' ).scrollTop() || $('html').scrollTop();
                window.location.hash = this.hash;
                $('html,body').scrollTop(scrollmem);

                $( 'ul.nav-tabs a[href="' + window.location.hash + '"]' ).tab( 'show' );
            }
        );
    }

```

* * *

## 回答 #15

> 赞同：-2
> 
> 时间：2012-12-04T19:50:24.583

这也修复了使用 jquery 和 bootstrap 时一个非常模糊的选项卡 a href 不触发

```
<script src="//ajax.googleapis.com/ajax/libs/jquery/1.8.3/jquery.min.js"></script> 

<script type="text/javascript">
$('.nav-tabs a').click(function (e) {
    // No e.preventDefault() here.
    $(this).tab('show');
});
</script>

<script src="//netdna.bootstrapcdn.com/twitter-bootstrap/2.2.1/js/bootstrap.min.js"></script> 
```

# android - 当持有它的 Activity/Service 终止或完成时，wake_locks 是否会自动释放？

> ID：12131274
> 
> 赞同：4
> 
> 时间：2012-08-26T15:19:11.983
> 
> 标签：android, android-activity, android-service, wakelock

我知道最好的做法`wake_lock`是在不再需要 a 时立即释放它，但是如果`Activity`or `Service`，例如，在释放锁之前已经完成或停止，会发生什么情况？是系统自动释放的吗？我认为在这种情况下系统应该自动释放它们，但我在 API 文档上找不到任何东西。

**编辑：添加了更多信息**

查看`PowerManager.WakeLock`文档，我看到默认情况下，wake_locks 是*引用计数*的（`setReferenceCounted` [在此处](http://developer.android.com/reference/android/os/PowerManager.WakeLock.html#setReferenceCounted%28boolean%29)阅读），即如果我们在活动中检索唤醒锁，`PowerManager.WakeLock wl = pm.newWakeLock(PowerManager.PARTIAL_WAKE_LOCK, "myWakeLock"); wl.acquire();`然后`wl`保存它的引用变量超出范围，那么唤醒锁被释放是因为它的引用计数变为零……对吗？

**编辑：上面的错误理解**

我想我误解了上面的引用计数概念......它应该意味着如果我获得两次锁并只释放一次，那么引用计数为1并且尚未释放锁。如果它没有被引用计数，那么我可以获取 x 次，然后通过一次释放它被释放。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2015-08-07T07:15:40.457

网络上似乎有很多关于此的错误信息。在 Android API 中公开的 WakeLock 有一个相当复杂的生命周期，除了超级勤奋地管理它之外，真的没有别的办法。

如果活动或服务在您没有释放唤醒锁的情况下停止，则状态未定义。如果您检查代码（[https://android.googlesource.com/platform/frameworks/base/+/master/core/java/android/os/PowerManager.java](https://android.googlesource.com/platform/frameworks/base/+/master/core/java/android/os/PowerManager.java)，搜索“class WakeLock”），您会看到它们当它们被垃圾收集时被释放。

然而，“当它们被垃圾收集时”是一个非常松散的陈述。在实践中，Lollipop 之前的设备似乎对唤醒锁的 GC 非常慢（出于实际目的，我们可以假装它根本没有发生），但是在具有 ART 运行时的 post-Lollipop 设备上，流浪的 WakeLock 似乎是在一个几秒钟。

关于引用计数的问题，您可以在 Android 代码中看到锁被释放，而不管它有多少计数。

如果你把责任归咎于 Android 代码，你还可以看到这些年来它并没有太大变化——所以这一切都归结为 GC 的行为方式。因此，您需要勤奋，将锁存储在您的活动/服务的字段中，并在应用程序生命周期的合理位置释放/获取。但是，如果可能的话，您不应该使用唤醒锁，而应该使用 Gatekeeper 在其他答案之一中链接到的 Force Screen On 技巧。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-26T15:28:51.787

只有当进程被销毁时，唤醒锁才会被释放。只是通过完成服务/活动`wake_lock`不会被释放。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-26T15:29:35.287

我相信这个答案将帮助您实现跨越式[强制屏幕打开](https://stackoverflow.com/questions/2131948/force-screen-on)

PowerManager API 声明您应该尽快释放唤醒锁，众所周知，使用 PowerManager API 会消耗更多电池。同样在它的 API 中它指出：

> *如果您持有部分唤醒锁，CPU 将继续运行，不管任何定时器，甚至在用户按下电源按钮后。在所有其他唤醒锁中，CPU 将运行，但用户仍然可以使用电源按钮使设备进入睡眠状态。

[http://developer.android.com/reference/android/os/PowerManager.html](http://developer.android.com/reference/android/os/PowerManager.html)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-07-05T21:15:22.697

如[this answer](https://stackoverflow.com/a/16258624/281545)中所述，如果*进程*被杀死，那么是的，唤醒锁被释放。但是，如果服务或活动正常完成而没有发布，答案应该是否定的。

# java - 目录阅读器小程序在 Eclipse 中加载，但不在浏览器中

> ID：12131275
> 
> 赞同：0
> 
> 时间：2012-08-26T15:19:19.297
> 
> 标签：java, security, browser, applet, directory

我对编程相当陌生，我刚刚编写了一个小程序程序，它应该列出目录中的文件。该小程序在 Eclipse 中运行良好，但问题是当我尝试在 GUI 加载的浏览器中运行该小程序时，该小程序不会像在 Eclipse 中那样响应。任何帮助将不胜感激。:)

```
import java.awt.BorderLayout;
import java.awt.Color;
import java.awt.Font;
import java.awt.event.ActionEvent;
import java.awt.event.ActionListener;
import java.io.File;
import javax.swing.JApplet;
import javax.swing.JTextArea;
import javax.swing.JTextField;

public class DirReader extends JApplet{

private JTextArea outputWindow;

private JTextField dirPath;
private String path;
private Font font;
private File folder;
private File[] listOfFiles;

public void init(){

    font = new Font("Times New Roman", Font.PLAIN, 16);

    dirPath = new JTextField("Enter Directory Path");
    dirPath.setFont(font);

    outputWindow = new JTextArea();
    outputWindow.setEditable(false);
    outputWindow.setFont(font);
    outputWindow.setBackground(Color.DARK_GRAY);
    outputWindow.setForeground(Color.ORANGE);           

    add(dirPath, BorderLayout.NORTH);
    add(outputWindow, BorderLayout.CENTER);

    setSize(400,750);

    dirPath.addActionListener(
        new ActionListener(){
            public void actionPerformed(ActionEvent event) {
                path = dirPath.getText();
                folder = new File(path);
                listOfFiles = folder.listFiles();
                System.out.println("Directory path set");
                ListOfFiles();
            }               
        }
    );

    System.out.println("Progam Intilized:");
}

public void ListOfFiles(){

    outputWindow.setText(null);

    try{
        for(int counter = 0 ; counter < listOfFiles.length ; counter++ ){               

            if(listOfFiles[counter].isFile()){  
                outputWindow.append("[FILE] " + listOfFiles[counter].getName()+ "\n");
                System.out.println("[FILE] " + listOfFiles[counter].getName());
            }
            else if(listOfFiles[counter].isDirectory()){
                outputWindow.append("[DIR] " + listOfFiles[counter].getName() + "\n");
                System.out.println("[DIR] " + listOfFiles[counter].getName());
            }                           
        }
    }catch(Exception e){
        System.out.println("Error: Directory could not be found.");

        outputWindow.setText("Error: Could not find directory.");
    }
}
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-26T16:06:00.150

当然它在浏览器中不起作用

因为

当小程序在浏览器中作为安全预防措施运行时，无法读取本地文件系统上的文件。

**解决方案**

使您的程序作为**桌面应用程序**在桌面上运行而不是**小程序**在浏览器中运行

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-26T23:27:40.660

1.  不受信任的小程序无法获取目录列表
2.  受信任的小程序无法在服务器（仅客户端）上获取目录列表。
3.  要让小程序在服务器上获得文件列表，需要明确告知文件是什么。两种常见的方式是：
    *   添加文件列表作为小程序的参数。
    *   让小程序访问服务器端功能以获取文件列表。

顺便提一句：

```
}catch(Exception e){ 
```

应该变成..

```
}catch(Exception e){
    e.printStackTrace(); //... 
```

请务必弄清楚如何访问[Java 控制台](http://www.java.com/en/download/help/javaconsole.xml)以查看输出。在没有这些信息的情况下调试小程序就像戴着眼罩调试一样。

# objective-c - 如何覆盖故事板中定义的 UIBarButtonItem 触发的 segue

> ID：12131276
> 
> 赞同：0
> 
> 时间：2012-08-26T15:19:23.280
> 
> 标签：objective-c, ios, uistoryboard

我在故事板 iPhone 应用程序中有一个 UIViewController，我需要在多个地方重用它。在情节提要中，有一个 UIBarButtonItem 触发了另一个控制器的 segue。但是，在某些情况下，我想覆盖按钮的行为以连接到不同的视图控制器。我在想必须有一种方法可以使用指定目标视图控制器的消息来初始化视图控制器，或者在控制器初始化之后但在它被推送之前设置一些属性？

一个挑战似乎是无法以编程方式定义转场（基于我目前所读的内容），而且我认为我不能在情节提要的同一个视图控制器上拥有多个转场。所以我可能需要做这样的事情：

```
[self presentModalViewController:myNewVC animated:YES]; 
```

...而不是使用segue，但我不确定如何覆盖情节提要中定义的按钮的行为来做到这一点。

任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-26T15:49:28.983

只需为某些条件创建一个`IBAction`和一个`BOOL`来选择应该实例化哪个视图控制器。

```
 UIViewController *viewController;
    if (someCondition) {
        viewController = [self.storyboard instantiateViewControllerWithIdentifier:@"someViewID"];
    }else{
        viewController = [self.storyboard instantiateViewControllerWithIdentifier:@"someOtherID"];
    }
    [self presentViewController:viewController animated:YES completion:nil]; 
```

# c# - WebClient 登录名和密码

> ID：12131281
> 
> 赞同：2
> 
> 时间：2012-08-26T15:20:12.497
> 
> 标签：c#, webclient

我需要在网络上输入用户名/密码[https://secure.domaintools.com/log-in/?logout](https://secure.domaintools.com/log-in/?logout)

```
HtmlAgilityPack.HtmlDocument doc = new HtmlAgilityPack.HtmlDocument();
NameValueCollection nameValues = new NameValueCollection();
ServicePointManager.Expect100Continue = false;
nameValues.Add("username", "ipdnstest@gmail.com");
nameValues.Add("password", "ipdnstest");
using (var wc = new WebClient())
{
    wc.UploadValues("https://secure.domaintools.com/log-in/?logout", nameValues);
    wc.Headers["User-Agent"] = "MOZILLA/5.0 (WINDOWS NT 6.1; WOW64) APPLEWEBKIT/537.1 (KHTML, LIKE GECKO) CHROME/21.0.1180.75 SAFARI/537.1";
    string page = wc.DownloadString("https://secure.domaintools.com/my-account/");
    doc.LoadHtml(page);
    doc.Save("f.htm");
} 
```

但是在文件“f.htm”中仍然是[https://secure.domaintools.com/log-in/?logout](https://secure.domaintools.com/log-in/?logout) web，所以我没有登录成功

你能帮我解决这个问题吗？登录名/密码是真实的。

# php - Apache 默认脚本，dosnt 显示名称

> ID：12131282
> 
> 赞同：0
> 
> 时间：2012-08-26T15:20:20.723
> 
> 标签：php, apache, .htaccess, mod-rewrite

所以问题很简单，例如，如果您调用站点 www.example.com，那么 apache 服务器将调用默认脚本，通常是 index.htm 或 index.php 等。但是，该脚本不会显示在 URL 栏中（即 www.example.com/index.php)，而只是 example.com。这通常不是问题，但我正在为 SEO（搜索引擎优化）开发无参数 URL。因此，页面上的链接，如 href="contact" 将调用 example.com/contact 而不是 example.com/index/contact（索引做聪明的事情，注意 php 扩展是隐藏的）。

我的想法是强制 Apache 显示默认脚本名称，有人知道该怎么做吗？否则我愿意接受建议。（最好避免在 .htaccess 中使用 mod_rewrite）

提前致谢 ：）

# iphone - 目标 c - 我如何在 iphone 上打开 ics 文件

> ID：12131283
> 
> 赞同：0
> 
> 时间：2012-08-26T15:20:24.123
> 
> 标签：iphone, objective-c, calendar, icalendar

我已经为周数构建了一个应用程序，并且我已经制作了一个包含周数的 ics 文件，但是如何使用 Objective-C 打开它以便订阅日历？

我不知道我怎么能做到这一点。有没有我可以使用的框架，或者什么？

我努力了：

```
NSString *ical = [NSString stringWithContentsOfURL:
                 [NSURL URLWithString:@"http://xxxxxxxxxxx.xx/apps-iphone/weeknumber/ical/ical.ics"] encoding:NSUTF8StringEncoding error:NULL]; 
```

但我可以用它打开它。

它需要看起来像这样：

![](../Images/cc780ff8b973857b2eb1ec044f731efc.png)

希望你能理解我。:)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-27T00:31:02.843

我假装您的应用程序中有 .ics 文件，对吗？有了这个 .ics 文件，您想打开 Safari 并收到警报吗？

看看[EventKit](https://developer.apple.com/library/ios/#documentation/DataManagement/Conceptual/EventKitProgGuide/Introduction/Introduction.html)框架。您可以将您的应用程序与用户的日历集成。来自 EventKit 的编程指南：

> Event Kit 不仅允许您的应用程序检索用户现有的日历和提醒数据，还允许您的应用程序为他们的任何日历创建新的事件和提醒。此外，Event Kit 允许用户编辑和删除他们的事件和提醒（统称为“日历项目”）。更高级的任务，例如添加警报或指定重复事件，也可以使用 Event Kit 来完成。如果从您的应用程序外部发生对日历数据库的更改，Event Kit 能够通过通知检测更改，以便您的应用程序可以适当地采取行动。使用 Event Kit 对日历项目所做的更改会自动同步到关联的日历（CalDAV、Exchange 等）。

作为替代方案，您可以使用以下代码打开它：

```
[[UIApplication sharedApplication] openURL:[NSURL URLWithString:@"http://addressToYourics.ics"]]; 
```

但是，不幸的是，您无法使用 Safari 打开捆绑文件，因此我建议您使用 EventKit 库。

看看另一个问题：
[有没有日历控件可以用于 iPhone 应用程序？](https://stackoverflow.com/questions/3634000/is-there-a-calendar-control-we-can-use-for-iphone-apps)
[如何以编程方式在 iOS 上添加日历订阅？](https://stackoverflow.com/questions/7597051/how-to-programmatically-add-calendar-subscriptions-on-ios)

# visual-c++ - 如果选项卡顺序已更改，如何在 MFC 中检查正确的单选按钮

> ID：12131289
> 
> 赞同：1
> 
> 时间：2012-08-26T15:20:46.107
> 
> 标签：visual-c++, com, mfc, radio-button, activex

我有这个带有一组单选按钮的 COM 控件，这些单选按钮与一个整数变量相关联，以识别选中的单选按钮。

这个关联的变量是通过 DoPropExchange() 保存/加载的，因此，向后兼容是必须的，即旧版本保存的选中单选按钮应该能够转移到较新版本，即使在较新版本中，选项卡单选按钮的顺序已更改。

但是在我向组中添加了额外的单选按钮并更改了选项卡顺序后，当我尝试加载此控件的旧版本时，没有选中单选按钮！我在调试模式下运行它，发现关联的整数已正确加载。

提前致谢！詹姆士

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-27T05:18:15.637

正如您所提到的，这些按钮与正确的组和选项卡顺序配合得很好。然而在任何时候每个按钮仍然是一个窗口，[`BM_SETCHECK`](http://msdn.microsoft.com/en-us/library/windows/desktop/bb775989%28v=vs.85%29.aspx)适用的，[`CButton::SetCheck`](http://msdn.microsoft.com/en-us/library/31deb72x%28v=vs.100%29.aspx)是MFC wrapper。

您可以单独更新按钮检查状态，尤其是。处理`BN_CLICKED`来自所有单选按钮的通知并分别更新所有其他单选按钮的检查状态。

您可能需要正确检查按钮：

```
INT m_nIndex;
// ...
// (there a power from above loads nIndex from persistent storage)
// ...
CButton* pButton1 = (CButton*) GetDlgItem(IDC_RADIO1);
CButton* pButton2 = (CButton*) GetDlgItem(IDC_RADIO2);
CButton* pButton3 = (CButton*) GetDlgItem(IDC_RADIO3);
pButton1->SetCheck(m_nIndex == 0);
pButton1->SetCheck(m_nIndex == 1);
pButton1->SetCheck(m_nIndex == 2); 
```

# ruby-on-rails - 仅在填充时验证表单字段

> ID：12131296
> 
> 赞同：1
> 
> 时间：2012-08-26T15:21:32.417
> 
> 标签：ruby-on-rails, validation, model

我有一个可选的表单字段，但如果它完成，我想验证它是一个整数值。在我的模型中，我有：

```
validates :number_of_employees, numericality: { only_integer: true } 
```

这可行，但是当我提交值未完成的表单时，它会引发错误，因为它不是数字。我收集您可以在 validates 语句中放置 if 条件，但不确定这是否是处理此问题的正确方法或检查存在的语法是什么。

任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-26T15:23:47.097

`:if`允许空字段通过验证的惯用方法是使用选项，而不是使用[`:allow_blank`](http://guides.rubyonrails.org/active_record_validations_callbacks.html#allow_blank)选项。除了验证器之外的所有验证器都是通用的`presence`。

```
validates :number_of_employees, numericality: { only_integer: true, allow_blank: true } 
```

# c# - 如何动态创建动作 在运行时？

> ID：12131301
> 
> 赞同：13
> 
> 时间：2012-08-26T15:22:10.877
> 
> 标签：c#, .net, generics, reflection, delegates

我希望能够在运行时执行以下等效操作：

```
var action = new Action<ANYTHING AT RUNTIME>(obj => Console.WriteLine("Called = " + obj)); 
```

我知道我需要为 Action 获取正确的类型，但不确定如何使用 Delegate.Create 获取最终位。`Type`表示动作定义中的 T。

```
var actionType = typeof(Action<>).MakeGenericType(Type);
var constructor = actionType.GetConstructors()[0];
var @delegate = Delegate.CreateDelegate(actionType, <WHAT GOES HERE>); 
```

人们似乎缺少的一点是我正在尝试创建一个无法静态指定 T 的 Action 实例，因为它是从派生自 Attribute 的类中使用的 - 这意味着 T 可以是任何东西，并且不能定义为通用定义

干杯

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-22T06:29:45.907

如果您知道您需要执行的操作是什么以及如何执行它而不管类型如何（如您的示例中所示），为什么不创建一个执行操作的通用方法并以这种方式创建您的委托呢？

```
class Program
{
    public static void Perform<T>(T value)
    {
        Console.WriteLine("Called = " + value);
    }

    public static Delegate CreateAction(Type type)
    {
        var methodInfo = typeof (Program).GetMethod("Perform").MakeGenericMethod(type);
        var actionT = typeof (Action<>).MakeGenericType(type);
        return Delegate.CreateDelegate(actionT, methodInfo);
    }

    static void Main(string[] args)
    {
        CreateAction(typeof (int)).DynamicInvoke(5);
        Console.ReadLine();
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-19T23:05:17.153

您可以使用以下代码，如果可以将类型转换为对象，则它可以工作：

```
Action<object> func = o => Console.WriteLine("Called = " + o.GetType().Name);
var actionType = typeof(Action<>).MakeGenericType(type);
var constructor = actionType.GetConstructors()[0];
var @delegate = Delegate.CreateDelegate(actionType, func.Method); 
```

但是，如果类型是枚举或其他值类型，它将不起作用。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-02-07T14:57:28.443

感谢“@prashanth”的建议，感谢 dynamic 关键字，我设法动态创建和调用具有运行时类型的 Action<>：

```
 public Action<dynamic> GetDynamicAction(/* some params */)
        {
            return oDyn =>
            {
                //here is the action code with the use of /* some params */
            };
        } 
```

带有基本动作处理程序的示例：

```
public class ActionHandler
{
     public ReturnType DoAction<T>(Action<T> t)
     {
         //whatever needed
     }
} 
```

用例：

```
/* some params */ = Any runtime type specific data (in my case I had a Type and a MethodInfo passed as parameters and that were called in the action)

var genericMethod = actionHandler.GetType().GetMethod(nameof(ActionHandler.DoAction));
var method = genericMethod.MakeGenericMethod(runtimeGenericType);

var actionResult = (ReturnType) method.Invoke(actionHandler, new object[]
                    {
                        GetDynamicAction(/*some params*/)
                    }
                ); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2021-06-09T09:18:03.523

创建一个泛型方法以生成具有所需泛型参数的 Action：

```
private Action<T> CreateAction<T>() => 
             new Action<T>(obj => Console.WriteLine("Called = " + (object)obj)); 
```

像这样称呼它：

```
var action = GetType()
            .GetMethod(nameof(CreateAction), BindingFlags.NonPublic | BindingFlags.Instance)
            ?.MakeGenericMethod(type)
            ?.Invoke(this, new object[]{}); 
```

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2012-09-09T12:34:35.540

使用以下代码创建一个委托，该委托在类型参数中后期绑定。另请参阅[如何：使用反射检查和实例化泛型类型](http://msdn.microsoft.com/en-us/library/b8ytshk6.aspx)。

```
abstract class ActionHelper {

    protected abstract Delegate CreateActionImpl();

    // A subclass with a static type parameter
    private class ActionHelper<T> : ActionHelper {
        protected override Delegate CreateActionImpl() {
            // create an Action<T> and downcast
            return new Action<T>(obj => Console.WriteLine("Called = " + (object)obj));
        }
    }

    public static Delegate CreateAction(Type type) {
        // create the type-specific type of the helper
        var helperType = typeof(ActionHelper<>).MakeGenericType(type);
        // create an instance of the helper
        // and upcast to base class
        var helper = (ActionHelper)Activator.CreateInstance(helperType);
        // call base method
        return helper.CreateActionImpl();
    }
}

// Usage
// Note: The "var" is always "Delegate"
var @delegate = ActionHelper.CreateAction(anyTypeAtRuntime); 
```

也就是说，我不建议使用这种方法。相反，使用

```
Action<object> action = obj => Console.WriteLine("Called = " + obj); 
```

它提供

*   相同的功能。

    您的原始代码`"Called = " + obj"`调用`.ToString()`参数。以上也一样。

*   没有性能差异。

    如果`obj`参数是值类型，则两个变体都执行装箱操作。第一个中的装箱并不明显，而是`"Called = " + obj"`装箱值类型。

*   更短，更不容易出错。

* * *

## 回答 #6

> 赞同：-2
> 
> 时间：2012-08-26T16:37:17.347

简短的回答是创建一个委托`MyActionDelegate`，然后使用：

```
delegate void MyActionDelegate(T arg);
Delegate @delegate = new MyActionDelegate((a) => Console.WriteLine(a)); 
```

这是一个使用泛型类的工作示例：

```
public class MyClass<T>
{
    public delegate void ActionDelegate(T arg);

    public void RunGenericAction(T arg)
    {
        var actionType = typeof(Action<>).MakeGenericType(typeof(T));
        var constructor = actionType.GetConstructors()[0];
        Delegate @delegate = new ActionDelegate((a) => { Console.WriteLine(arg); });
        var inst = (Action<T>)constructor.Invoke(new object[] { 
            @delegate.Target,  
            @delegate.Method.MethodHandle.GetFunctionPointer() 
        });
        inst(arg);
    }
} 
```

像这样使用它，输出`123`到控制台：

```
var c = new MyClass<int>();
c.RunGenericAction(123); 
```

您会注意到我将两个参数传递给`Constructor.Invoke`; 这是因为事实证明，委托参数实际上编译为两个参数：函数的目标对象和指向函数的指针。我不能因为那里花哨的步法而受到赞扬。[从这个关于如何使用反射传递委托参数的优秀答案中](https://stackoverflow.com/q/6234038/1001985)“借用”信息。

# jquery - 如何根据 alt 属性检查图像是否存在？

> ID：12131304
> 
> 赞同：3
> 
> 时间：2012-08-26T15:22:18.610
> 
> 标签：jquery, jquery-selectors

如果我想将另一个图像附加到此列表中。

```
<img src="1.jpg" alt="apple"> 
```

如果`apple`已经在此列表中，则什么也不做。有没有办法可以使用 jQuery 进行检查？

我尝试使用查找， `var existItem = $("#targetBox").find(" not sure what to put here ")`

```
<div id="test">
  <img src="1.jpg" alt="apple">
  <img src="2.jpg" alt="banana">
  <img src="3.jpg" alt="grape">
</div> 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-26T15:23:54.337

是的，使用以下方法检查是否*存在*这样的图像：

```
if ($("#test img[alt='apple']").length) {
} 
```

然后，添加另一个图像：

```
$("<img>").attr("src", "4.jpg").attr("alt", "orange").appendTo("#test"); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-26T15:25:14.477

您可以为此使用 jQuery 的属性选择器 -

```
if ($("#targetBox").find("img[alt='THE_NEW_IMAGE_ALT']").length){

} 
```

此代码查找`alt`属性等于的图像`THE_NEW_IMAGE_ALT`。它检查结果是否为空（检查长度）。如果没有返回元素（长度 = 0），则没有具有相同`alt`参数的其他图像。

您可以使用相同的代码来测试任何属性的任何值。例如，如果您想根据`src`属性测试图像是否存在，您只需将选择器更改为如下所示 -`find("img[src='THE_IMAGE_SRC']")`

参考 -

*   [jQuery 属性选择器](http://api.jquery.com/attribute-equals-selector/)

# php - 将多维数组数据插入 MySQL DB

> ID：12131305
> 
> 赞同：1
> 
> 时间：2012-08-26T15:22:19.613
> 
> 标签：php, mysql, multidimensional-array

我需要将数组数据插入 MySQL DB。下面提供了我的代码。问题是`query`等于

> 插入`MyTab`（数组）值（数组，数组，数组，数组，数组，数组，数组，数组，数组，数组，数组）

那么，为什么我得到`Array`而不是数组值？

```
$columns = array();
    $values = array();

    $columns[] = array('Num','appearanceTime');

    $curr_time = new DateTime();
    while($row=mysql_fetch_assoc($result_arr)) {
        $values[] = array($row['Num_arr'],$curr_time);
    }

    $cols = implode(",",$columns);
    $vals = implode(",",$values);

$query = "INSERT INTO `MyTab` ($cols) VALUES ($vals)"; 
```

更新此代码在行返回内部服务器错误`$vals = implode(...)`。

$columns = array('Num','appearanceTime','earliestTime'); $values = 数组（）；

```
$curr_time = new DateTime();
while($row=mysql_fetch_assoc($result_arr)) {
    $values[] = array($row['Num_arr'],$curr_time,$row['ETA']);
}

$cols = implode(",",$columns);

function get_values($arr) {
return '(' . implode(',', $arr) . ')';
}

$vals = implode(',', array_map('get_values', $values));

$query_queue = "INSERT INTO `MyTab` ('" . $cols . "') VALUES ('" . $vals . "')"; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-26T15:29:48.453

数组中的值是数组。你也需要`implode`他们每个人：

```
$vals = implode(',', array_map(function($arr) {
    return '(' . implode(',', $arr) . ')';
}, $values)); 
```

至于列，我想你想要：

```
$columns = array('Num','appearanceTime');
$values = array(); 
```

不是：

```
$columns = array();
$values = array();

$columns[] = array('Num','appearanceTime'); 
```

您还需要引用所有内容以将其放入查询中。如果可以的话，您应该使用 PDO 或 MySQLi 和准备好的语句`mysql_`。

* * *

鉴于 PHP 5.2，第一个示例需要更改为：

```
function implode_comma($arr) {
    return '(' . implode(',', $arr) . ')';
}

# ...

$vals = implode(',', array_map('implode_comma', $values)); 
```

# javascript - 尝试将 haml-coffee 与 expressJS 应用程序一起使用时出现奇怪的错误

> ID：12131306
> 
> 赞同：0
> 
> 时间：2012-08-26T15:22:28.207
> 
> 标签：javascript, node.js, express, substring, syntax-error

这是我`app.js`遵循[haml-coffee 指南](https://github.com/netzpirat/haml-coffee#using-with-express)的文件：

```
// misc requirements
var express = require('express')
  , routes = require('./routes')
  , http = require('http')
  , path = require('path');

// setup app
var app = express();

// set default engine to haml-coffee
app.engine( 'hamlc', require('haml-coffee'.__express ));

// configure misc stuff
app.configure(function(){
  app.set('port', process.env.PORT || 3000); // set localhost port to 3000
  app.set('views', __dirname + '/views');    // setup views (templates)
  app.set('view engine', 'hamlc');           // use haml-coffee as default templating engine
  app.set('title', 'Learn Some Code');       // set the website title

  app.use(express.favicon());                // favicon handling
  app.use(express.logger('dev'));            // logging

  app.use(express.bodyParser());
  app.use(express.methodOverride());

  app.use(app.router); // use the router
  app.use(express.static(path.join(__dirname, 'public')));
});

// only configure this for development
app.configure('development', function(){
  app.use(express.errorHandler());
});

app.get('/', routes.index);

http.createServer(app).listen(app.get('port'), function(){
  console.log("Express server listening on port " + app.get('port'));
}); 
```

但是当我跑步时`node app.js`......我得到了这个奇怪的错误：

```
module.js:236
  var start = request.substring(0, 2);
                      ^
TypeError: Cannot call method 'substring' of undefined
    at Function.Module._resolveLookupPaths (module.js:236:23)
    at Function.Module._resolveFilename (module.js:328:31)
    at Function.Module._load (module.js:280:25)
    at Module.require (module.js:362:17)
    at require (module.js:378:17)
    at Object.<anonymous> (/Users/chris/src/learnsomecode/app.js:11:22)
    at Module._compile (module.js:449:26)
    at Object.Module._extensions..js (module.js:467:10)
    at Module.load (module.js:356:32)
    at Function.Module._load (module.js:312:12) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-26T17:44:24.873

Your require has a slight typo in it. Change

```
app.engine( 'hamlc', require('haml-coffee'.__express )); 
```

to

```
app.engine( 'hamlc', require('haml-coffee').__express ); 
```

`'haml-coffee'.__express` resolves to `undefined`, which makes `require(undefined)` throw the `Cannot call method 'substring' of undefined` error.

# mootools - 如何在 Mootools 1.4 中互连（侦听器/动作）单独的元素？

> ID：12131307
> 
> 赞同：0
> 
> 时间：2012-08-26T15:22:33.643
> 
> 标签：mootools

我对 mootools 1.4 和多个单独元素之间的交互有一点问题。我有一个这样的菜单：

```
<div id="links">
<a class="readmore" href="#1" title="1">Read More</a>
<a class="readmore" href="#2" title="2">Read More</a>
<a class="readmore" href="#2" title="3">Read More</a>
...
</div> 
```

还有一个像这样的元素：代码 PHP：

```
<div id="content">
<div id="1">Lorem Ipsum</div>
<div id="2">Lorem Ipsum</div>
<div id="3">Lorem Ipsum</div>
...
</div> 
```

两者的长度相同（菜单的每个链接都有一个对应的 div 元素）。我需要做的是在每个菜单链接上创建一个侦听器，以便在单击它时显示 div。这就是我的问题所在，因为目前我使用菜单链接的标题来打开具有相同 ID 的 div。我认为这不是性能最高的，也许我可以在一个循环中使用 index 完成所有这些操作？

其他小问题（根本不那么重要）：如何在一行代码中的 2 个元素上添加相同的事件（如果用户单击不同的按钮，以避免代码行的乘积来做完全相同的事情）？

非常感谢 ！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-26T19:14:02.450

可以做几件事。

### - 事件委托

想法：将单个事件附加到菜单项的父项，该事件取决于匹配事件条件的子 el

所以：

```
document.id('links').addEvent('click:relay(a.readmore)', function(event, element){
    var id = element.get('title');
    // do something.
}); 
```

缺点是您需要读取 id，但如果它们的顺序正确，您可以从目标 els 中删除 id。

```
(function() {    
    var els = document.getElements('#content div');

    document.id('links').addEvent('click:relay(a.readmore)', function(event, element){
        var id = element.get('title'),
            hint = els[id-1];

        showHint(hint);
    });
}()); 
```

就是这样。附加事件较少。

### - 循环附加事件具有对索引的引用，它将匹配目标

```
(function() {    
    var els = document.getElements('#content div'),
        clickHandler = function(trigger, target){

        };

    document.getElements('#links a').each(function(element, index){
        element.addEvent('click', function(event) {
            event.stop();
            clickHandler(this, els[index]));
        });
    });
}()); 
```

这样做的好处是，您不需要提示 els 上的 id，也不需要标题标签或任何源代码。缺点是，每个链接都有自己的点击事件。

# c - 存储大小未知

> ID：12131308
> 
> 赞同：0
> 
> 时间：2012-08-26T15:22:47.183
> 
> 标签：c, linux, linux-kernel, linux-device-driver, ioctl

这是 IOCTL 开关盒的一部分。我收到以下错误？

错误：“数据”的存储大小未知错误：“mesg”未声明（在此函数中首次使用）

```
case PASS_STRUCT:

        struct mesg{
            int pIDs[SIZE];
            int niceVal;
        };

        struct mesg data;

        ret = copy_from_user(&data, arg, sizeof(data));
        if(ret < 0){
            printk("PASS_STRUCT\n");
            return -1;  
        }

        printk("Message PASS_STRUCT : %d\n",data.niceVal);
        break; 
```

SIZE 值在创建消息之前设置。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-26T15:25:04.387

> ```
> struct mesg{
>     int pIDs[SIZE];
>     int niceVal;
> }; 
> ```
> 
> SIZE 值在创建消息之前设置。

在 C`SIZE`中需要是一个真正的编译时常量才能像这样使用它。就像是：

```
#define SIZE 10 
```

您还应该将结构声明移到`switch`.

# asp.net - ASP.NET 自定义 Web 控件样式 呈现样式规则

> ID：12131312
> 
> 赞同：0
> 
> 时间：2012-08-26T15:23:21.853
> 
> 标签：asp.net, css, inheritance, custom-controls

我有一个继承自 ASP.NET 按钮控件的自定义 Web 控件。在渲染方法覆盖中，我渲染了我自己的 HTML 输出 (div)。问题是如何以最正确的方式呈现该控件的样式属性。

我可以简单地遍历 for / foreach 循环中的样式集合并将其写入 HTMLTextWriter，但也许 .NET 有一个内置方法可以将样式定义写入 htmlwriter？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-26T16:34:03.143

听起来你想要的是`ApplyStyle()`方法：

```
var style = new Style();
style.ForeColor = System.Drawing.Color.Red;
style.BackColor = System.Drawing.Color.Yellow;

var ctrl = new WebControl();
ctrl.ApplyStyle(style); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-26T17:02:55.820

解决方案是在 ASP.NET WebControl 中使用 CssStyleCollection 对象的 Value 属性。 [http://msdn.microsoft.com/en-us/library/system.web.ui.cssstylecollection.value.aspx](http://msdn.microsoft.com/en-us/library/system.web.ui.cssstylecollection.value.aspx)

# javascript - 在 IE 中查找表格行号

> ID：12131316
> 
> 赞同：0
> 
> 时间：2012-08-26T15:23:53.477
> 
> 标签：javascript, internet-explorer

我使用以下语句查找表行数，它在 Firefox 和 Chrome 中运行良好，但在 IE 中总是返回 1，出了什么问题？

```
document.getElementById('<%=tblBasket.ClientID %>').rows.length 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-26T15:27:30.243

尝试：

```
document.getElementById('<%=tblBasket.ClientID %>').getElementsByTagName('tr').length 
```

# java - java.util.Calendar 线程是否安全？

> ID：12131324
> 
> 赞同：26
> 
> 时间：2012-08-26T15:24:37.657
> 
> 标签：java, calendar

我一直在假设既不是线程安全的`Date`也不`Calendar`是线程安全的，但是，在最近的一次讨论中，一位同事告诉我`Calendar`是线程安全的。

所以，我做了一些研究，并没有想出任何东西。有很多人认为它是线程安全的，也有很多人认为它不是线程安全的。而且，最重要的是，文档并没有以某种方式说明任何事情，没有 for `Calendar`，甚至也没有 for `Date`。

那么，它是什么？

* * *

## 回答 #1

> 赞同：37
> 
> 时间：2012-08-26T16:20:16.053

这是Java 7中[Calendar](http://www.docjar.com/html/api/java/util/Calendar.java.html)和[GregorianCalendar](http://www.docjar.com/html/api/java/util/GregorianCalendar.java.html)源代码的链接

如果您阅读代码，您将看到没有一个实例方法是同步的，并且没有一个实例字段是`volatile`. 您还将看到，即使是字段`get`方法也可能导致 Calendar 实例发生变异。而且由于没有执行同步，不同的线程可能会在这样的变异操作之后看到日历对象字段的陈旧版本。

作为记录，字段 get 方法中的突变操作发生在 / 调用此方法期间：

```
 1555 protected void complete()
 1556       {
 1557           if (!isTimeSet)
 1558               updateTime();
 1559           if (!areFieldsSet || !areAllFieldsSet) {
 1560               computeFields(); // fills in unset fields
 1561               areAllFieldsSet = areFieldsSet = true;
 1562           }
 1563       } 
```

简而言之，`Calendar`该类不是线程安全的，`GregorianCalendar`也不是因为它继承了非线程安全的字段和方法。

但不要只相信我的话。自己分析源代码。

* * *

> 而且，最重要的是，文档没有以任何方式说明任何内容，对于日历，甚至对于日期都没有。

如果 javadocs 没有指定类的线程安全性，那么您应该*假设*它不是线程安全的。*（特别是如果类在设计*上是可变的。）

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-08-26T16:15:28.533

Oracle 的文档没有提到线程安全：[http](http://docs.oracle.com/javase/7/docs/api/java/util/Calendar.html) ://docs.oracle.com/javase/7/docs/api/java/util/Calendar.html 。

OpenJDK 源代码（build b147）`java.util.Calendar`以非线程安全的方式实现，例如：

```
public void setTimeInMillis(long millis) {
  // skipped
  time = millis;
  isTimeSet = true;
  areFieldsSet = false;
  computeFields();
  areAllFieldsSet = areFieldsSet = true;
} 
```

我认为可以安全地假设该类**不是**线程安全的。

# php - Symfony 在哪里存储用户特定的设置？

> ID：12131332
> 
> 赞同：0
> 
> 时间：2012-08-26T15:25:42.837
> 
> 标签：php, symfony

例如标题、数据库主机、分机。并且能够通过现场表格进行编辑。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-27T06:55:14.330

在数据库中，我猜。

如果要存储各种数据类型和复杂性的设置，可以使用像[MongoDB](http://www.mongodb.org/)这样的 NoSQL 数据库。您可以将数字、字符串、数组、对象等存储在一个集合中；在关系数据库中，您必须序列化数组和对象，或者通过连接表来增加复杂性。还有一个用于 MongoDB的[捆绑包。](http://symfony.com/doc/master/bundles/DoctrineMongoDBBundle/index.html)

# iphone - intvalue 和 floatValue 的问题

> ID：12131333
> 
> 赞同：0
> 
> 时间：2012-08-26T15:25:48.297
> 
> 标签：iphone

一个计算器。每次我点击一个数字按钮时，标签都会附加到一个“displaystring”nsmutable 字符串。我注意到，在为相同的数字输入 11 位数字后，floatValue 或 intValue 函数给了我同样的错误。

self.lbldisplay.text 正确显示 displaystring 的内容。但是 intValue 或 floatValue 甚至 NSCanner 实用程序在输入 10 位数字后返回相同的错误

这是代码和日志：

```
// original  
[self.displayString appendString: [NSString stringWithFormat: @"%i", [sender tag]]];

else { // new entry      
    //origin test
    [self.displayString setString:@""];
    [self.displayString appendString: [NSString stringWithFormat: @"%i", [sender tag]]];
    bIsTypingANumber = TRUE;
}

//  fCurrentNumber = [self.displayString floatValue];
//   [self display:fCurrentNumber];
// self.lblDisplay.text = displayString;

NSString *numberString; 

NSString *str = [NSString stringWithString:displayString];

NSScanner *theScanner = [NSScanner scannerWithString:str];

[theScanner scanUpToCharactersFromSet:[NSCharacterSet decimalDigitCharacterSet] intoString:nil];
[theScanner scanCharactersFromSet:[NSCharacterSet decimalDigitCharacterSet] intoString:&numberString];

NSLog(@"Attempts: %i", [numberString integerValue]);

self.lblDisplay.text = str; 
```

输出：

```
2012-08-26 17:23:34.264 Pilots Fuel[4989:f803] Attempts: 1
2012-08-26 17:23:34.400 Pilots Fuel[4989:f803] Attempts: 11
2012-08-26 17:23:34.552 Pilots Fuel[4989:f803] Attempts: 111
2012-08-26 17:23:34.800 Pilots Fuel[4989:f803] Attempts: 1111
2012-08-26 17:23:34.936 Pilots Fuel[4989:f803] Attempts: 11111
2012-08-26 17:23:35.072 Pilots Fuel[4989:f803] Attempts: 111111
2012-08-26 17:23:35.216 Pilots Fuel[4989:f803] Attempts: 1111111
2012-08-26 17:23:35.344 Pilots Fuel[4989:f803] Attempts: 11111111
2012-08-26 17:23:35.488 Pilots Fuel[4989:f803] Attempts: 111111111
2012-08-26 17:23:35.632 Pilots Fuel[4989:f803] Attempts: 1111111111
2012-08-26 17:23:35.776 Pilots Fuel[4989:f803] Attempts: 2147483647
2012-08-26 17:23:36.056 Pilots Fuel[4989:f803] Attempts: 2147483647 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-26T15:38:25.957

这是因为您溢出了整数数据类型，它只能保存从 -2147483648 到 2147483647（大小为 32 位）的值。数据类型可以保存更大的`double`值，但最终会丢失精度。

尝试

```
NSLog(@"Attempts: %lli", [numberString longLongValue]); 
```

这将使用 64 位精度并允许更多位数。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-26T15:40:28.673

欢迎来到 SO。请写出清楚地说明您的问题的问题。此外，如果您提供代码示例，请确保它们的格式正确，以便其他人更容易阅读。

请注意，您正在使用`int`并且`float`两者都有大小限制。它们不能代表所有可能的数字。您可以使用双精度和 64 位整数，但它们也有限制。如果您真的需要更大的数字，请查看是否`NSDecimalNumber`适合您的用例。它确实有一个限制（虽然相当大）。

如果您需要更大的数字，则需要使用支持任意大数字的库。

# java - 如果和开始错误

> ID：12131334
> 
> 赞同：0
> 
> 时间：2012-08-26T15:25:57.517
> 
> 标签：java, if-statement, while-loop

我的代码有问题。我的代码的逻辑是，当它找不到我输入的用户名时，会出现一个确认框，真正发生的是当在一行中找到输入的用户名时，它没有启动确认框“没关系”，但它继续搜索每一行并初始化 else {statement} 顺便说一句，我的 else 语句是确认框。

我的代码编写的示例 data.dat

```
shawn | qwerty1234
cloe | password1234
jones | shittybrix 
```

当我输入“shawn”时，它会启动我的 if 语句“没关系”，但它会继续在整个字符串中搜索，并且输入的用户名“shawn”变得不等于 cloe 和 jones，它会启动 else 语句，分别给我两个确认框。我想避免这个错误，但我不知道如何。 **REGISTER.JAVA 中出现错误**

这是我的登录代码：

```
package login;

import java.awt.HeadlessException;
import java.awt.event.ActionEvent;
import java.awt.event.ActionListener;
import java.io.*;
import javax.swing.JOptionPane;

public class Login extends javax.swing.JFrame {

    public Login() {
        initComponents0();
    }

    @SuppressWarnings("unchecked")
    private void initComponents0() {

        jLabel1 = new javax.swing.JLabel();
        jLabel2 = new javax.swing.JLabel();
        uname = new javax.swing.JTextField();
        jLabel3 = new javax.swing.JLabel();
        login = new javax.swing.JButton();
        reset = new javax.swing.JButton();
        pwd = new javax.swing.JPasswordField();
        setDefaultCloseOperation(javax.swing.WindowConstants.EXIT_ON_CLOSE);
        jLabel1.setFont(new java.awt.Font("Tahoma", 0, 18)); // NOI18N
        jLabel1.setText("Login Pane");
        jLabel2.setText("User Name:");
        jLabel3.setText("Password:");
        login.setText("Login");
        login.addActionListener(new ActionListener() {
            @Override
            public void actionPerformed(ActionEvent e) {
                String un = uname.getText();
                try {
                    try (BufferedReader br = new BufferedReader(new Filereader("data.dat"))) {
                        String strLine;
                        while ((strLine = br.readLine()) != null) {
                            if (strLine.startsWith(un)) {
                                JOptionPane.showMessageDialog(null, "Hello: " + un, "Registration", JOptionPane.INFORMATION_MESSAGE);
                            } else {
                                int sel = JOptionPane.showConfirmDialog(null, "It seems that you haven't registered yet? \n Lunch Registration Pane?", "Admin", JOptionPane.INFORMATION_MESSAGE);
                                if (sel == JOptionPane.YES_OPTION) {
                                    java.awt.EventQueue.invokeLater(new Runnable() {
                                        @Override
                                        public void run() {
                                            new Register().setVisible(true);
                                        }
                                    });
                                }
                            }
                        }
                    }
                } catch (IOException | HeadlessException ez) {
                    JOptionPane.showMessageDialog(null, "A null file was created in order to \n avoid File Catch errors", "Admin", JOptionPane.INFORMATION_MESSAGE);
                    File file = new File("data.dat");
                    try {
                        try (FileWriter writer = new FileWriter(file, true)) {
                            String data0 = "null";
                            String data1 = "null";
                            writer.write(data0 + " | " + data1 + "\n");
                        }
                    } catch (IOException | HeadlessException z) {
                        JOptionPane.showMessageDialog(null, e);
                    }
                }
            }
        });
        reset.setText("Reset Field");

        javax.swing.GroupLayout layout = new javax.swing.GroupLayout(getContentPane());
        getContentPane().setLayout(layout);
        layout.setHorizontalGroup(
                layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
                .addGroup(layout.createSequentialGroup()
                .addContainerGap()
                .addGroup(layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING, false)
                .addComponent(jLabel1)
                .addGroup(layout.createSequentialGroup()
                .addComponent(jLabel2)
                .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED)
                .addComponent(uname, javax.swing.GroupLayout.PREFERRED_SIZE, 300, javax.swing.GroupLayout.PREFERRED_SIZE))
                .addGroup(layout.createSequentialGroup()
                .addComponent(jLabel3)
                .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.UNRELATED)
                .addGroup(layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
                .addGroup(layout.createSequentialGroup()
                .addComponent(login, javax.swing.GroupLayout.PREFERRED_SIZE, 137, javax.swing.GroupLayout.PREFERRED_SIZE)
                .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED, javax.swing.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE)
                .addComponent(reset, javax.swing.GroupLayout.PREFERRED_SIZE, 137, javax.swing.GroupLayout.PREFERRED_SIZE))
                .addComponent(pwd))))
                .addContainerGap(30, Short.MAX_VALUE)));
        layout.setVerticalGroup(
                layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
                .addGroup(layout.createSequentialGroup()
                .addContainerGap()
                .addComponent(jLabel1)
                .addGap(18, 18, 18)
                .addGroup(layout.createParallelGroup(javax.swing.GroupLayout.Alignment.BASELINE)
                .addComponent(jLabel2)
                .addComponent(uname, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE))
                .addGap(18, 18, 18)
                .addGroup(layout.createParallelGroup(javax.swing.GroupLayout.Alignment.BASELINE)
                .addComponent(jLabel3)
                .addComponent(pwd, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE))
                .addGap(18, 18, 18)
                .addGroup(layout.createParallelGroup(javax.swing.GroupLayout.Alignment.BASELINE)
                .addComponent(login)
                .addComponent(reset))
                .addContainerGap(javax.swing.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE)));

        pack();
    }

    /**
     * @param args the command line arguments
     */
    public static void main(String args[]) {
        java.awt.EventQueue.invokeLater(new Runnable() {
            @Override
            public void run() {
                new Login().setVisible(true);
            }
        });
    }
    // Variables declaration - do not modify
    private javax.swing.JLabel jLabel1;
    private javax.swing.JLabel jLabel2;
    private javax.swing.JLabel jLabel3;
    private javax.swing.JButton login;
    private javax.swing.JPasswordField pwd;
    private javax.swing.JButton reset;
    private javax.swing.JTextField uname;
    // End of variables declaration
} 
```

这是我在确认框中单击“是”时启动的注册码

```
/*
 * To change this template, choose Tools | Templates
 * and open the template in the editor.
 */
package login;

import java.awt.HeadlessException;
import java.awt.event.ActionEvent;
import java.awt.event.ActionListener;
import java.io.File;
import java.io.FileWriter;
import java.io.IOException;
import javax.swing.JOptionPane;

/**
 *
 * @author Jfetizanan
 */
class Register extends javax.swing.JFrame {

    /**
     * Creates new form GUIREG
     */
    public Register() {
        initComponents();
    }

    /**
     * This method is called from within the constructor to initialize the form.
     * WARNING: Do NOT modify this code. The content of this method is always
     * regenerated by the Form Editor.
     */
    @SuppressWarnings("unchecked")
    private void initComponents() {
        jLabel1 = new javax.swing.JLabel();
        jLabel2 = new javax.swing.JLabel();
        unamereg = new javax.swing.JTextField();
        jLabel3 = new javax.swing.JLabel();
        pwdreg = new javax.swing.JTextField();
        submit = new javax.swing.JButton();
        resetreg = new javax.swing.JButton();
        setDefaultCloseOperation(javax.swing.WindowConstants.EXIT_ON_CLOSE);
        jLabel1.setFont(new java.awt.Font("Tahoma", 0, 18)); // NOI18N
        jLabel1.setText("Registration Pane");
        jLabel2.setText("User Name:");
        jLabel3.setText("Password:");
        submit.setText("Submit");
        submit.addActionListener(new ActionListener() {
            @Override
            public void actionPerformed(ActionEvent e) {
                System.out.println("Runned");
                File file = new File("data.dat");
                try {
                    try (FileWriter writer = new FileWriter(file, true)) {
                        String data0 = unamereg.getText();
                        String data1 = pwdreg.getText();
                        writer.write(data0 + " | " + data1 + "\n");
                    }
                    JOptionPane.showMessageDialog(null, "Registered", "Registration", JOptionPane.INFORMATION_MESSAGE);
                } catch (IOException | HeadlessException z) {
                    JOptionPane.showMessageDialog(null, e);
                }
            }
        });
        resetreg.setText("Reset Field");

        javax.swing.GroupLayout layout = new javax.swing.GroupLayout(getContentPane());
        getContentPane().setLayout(layout);
        layout.setHorizontalGroup(
                layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
                .addGroup(layout.createSequentialGroup()
                .addContainerGap()
                .addGroup(layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING, false)
                .addComponent(jLabel1)
                .addGroup(layout.createSequentialGroup()
                .addComponent(jLabel2)
                .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED)
                .addComponent(unamereg))
                .addGroup(layout.createSequentialGroup()
                .addComponent(jLabel3)
                .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.UNRELATED)
                .addGroup(layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
                .addComponent(pwdreg)
                .addGroup(layout.createSequentialGroup()
                .addComponent(submit, javax.swing.GroupLayout.PREFERRED_SIZE, 139, javax.swing.GroupLayout.PREFERRED_SIZE)
                .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.UNRELATED)
                .addComponent(resetreg, javax.swing.GroupLayout.PREFERRED_SIZE, 139, javax.swing.GroupLayout.PREFERRED_SIZE)
                .addGap(0, 0, Short.MAX_VALUE)))))
                .addContainerGap(42, Short.MAX_VALUE)));
        layout.setVerticalGroup(
                layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
                .addGroup(layout.createSequentialGroup()
                .addContainerGap()
                .addComponent(jLabel1)
                .addGap(18, 18, 18)
                .addGroup(layout.createParallelGroup(javax.swing.GroupLayout.Alignment.BASELINE)
                .addComponent(jLabel2)
                .addComponent(unamereg, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE))
                .addGap(18, 18, 18)
                .addGroup(layout.createParallelGroup(javax.swing.GroupLayout.Alignment.BASELINE)
                .addComponent(jLabel3)
                .addComponent(pwdreg, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE))
                .addGap(18, 18, 18)
                .addGroup(layout.createParallelGroup(javax.swing.GroupLayout.Alignment.BASELINE)
                .addComponent(submit)
                .addComponent(resetreg))
                .addContainerGap(javax.swing.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE)));

        pack();
    }
    /**
     * @param args the command line arguments
     */
    // Variables declaration - do not modify
    private javax.swing.JLabel jLabel1;
    private javax.swing.JLabel jLabel2;
    private javax.swing.JLabel jLabel3;
    private javax.swing.JTextField pwdreg;
    private javax.swing.JButton resetreg;
    private javax.swing.JButton submit;
    private javax.swing.JTextField unamereg;
    // End of variables declaration
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-26T15:30:26.153

设法通过那个大混乱找到问题。在弹出说 hello 'blah' 的 if 语句中，您需要使其脱离 while 循环，并移动 else 语句。将 else 语句中的内容复制到 while 循环之外（只是因为它不匹配第一个人，并不意味着它不会匹配后面的人，所以不要对他们大喊大叫直到最后）。所以有这样的：

```
BufferedReader br = new BufferedReader(
        new InputStreamReader(fstream));
String strLine;
boolean registered = false;
while ((strLine = br.readLine()) != null) {
    if (strLine.startsWith(un)) {
        registered = true;
        break;
    }
}
if(registered) {
    //blah
} else {
    //blah
} 
```

此外，您应该将午餐注册更改为启动注册；）

回应您的评论，这是由于这一行：

```
 setDefaultCloseOperation(javax.swing.WindowConstants.EXIT_ON_CLOSE); 
```

你在你的两个框架中都有它，它说一旦你关闭它就停止它。您希望将其用于您的登录框架（如果他们关闭登录窗口，请停止程序），但不适用于注册窗口。为此，您只需要`javax.swing.WindowConstants.DISPOSE_ON_CLOSE`，它表示它将在关闭框架时处理框架（良好的清理）。如果所有帧都被释放，JVM 将结束（假设没有其他线程正在运行），因此只要 Login 保持打开状态，它就不会退出。

# django - 在 Django 中进行涉及 ForeignKey 的查询

> ID：12131337
> 
> 赞同：0
> 
> 时间：2012-08-26T15:26:11.327
> 
> 标签：django

对最后一个问题道歉。应该更好地表达它。

我有三个班级，学生和另一个成人和成人档案。我想进行查询，以便获取所有来自美国的成年人，但必须使用 Student 类来完成。这是因为我的查询集是 Student.objects.all() 并且基于这个查询集，我想从 US 获取所有成年人（通过 AdultProfile）。这是一个代码示例，而原始代码更复杂、更长。这个例子显示了问题的要点。

```
class Student(models.Model):
   name = models.CharField(max_length=255)
   birthday= models.DateField(blank=True,null=True)

class Adult(models.Model):
   user = models.OneToOneField(User)
   parent= models.ForeignKey(Student,related_name="relationships")

class AdultProfile(models.Model):
   country = models.CharField(max_length=2)
   adult = models.OneToOneField(Adult,related_name='profile') 
```

在这方面需要一些帮助..希望我这次措辞更好......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-26T16:50:36.037

您将无法从查询集中执行此操作`Student`。从 Student 类中获得 Adult 对象的唯一方法是通过其 reverse-related-accessor:来自**Student 实例**`student_instance.relationships.all()`。

您的 django ORM 旅行中缺少的要素可能是您可以通过其`related_name`（或默认情况下为模型名称）查询相关对象（FK、OneToOne）。

```
student_qs = Student.objects.all() # some query
adults_in_us = Adult.objects.filter(parent__in=student_qs, profile__country='US') 
```

# core-data - 新项目新模型 NSPersistentDocument 这个 NSPersistentStoreCoordinator 没有持久存储

> ID：12131338
> 
> 赞同：1
> 
> 时间：2012-08-26T15:26:14.990
> 
> 标签：core-data, nspersistentdocument, nspersistentstore

我一直在搜索 stackoverflow 和谷歌搜索几个小时。我做了一个简单的项目来处理 Core Data 和绑定。它在模型中添加了一个实体，但它不再工作了。每当我尝试将数据添加到新文档时，我都会收到“此 NSPersistentStoreCoordinator 没有持久存储它无法执行保存操作”。我遵循了我能找到的每一条建议，但没有运气。

最后，我制作了一个新项目（基于 NSPersistentDocument），并从头开始制作了一个新模型。在我第一次运行项目之前，我确保模型是完美的。

在WindowControllerDidLoadNib中：项目调用方法添加数据。在 addData 例程之前，我记录了 ManagedObjectContext 和 ManagedObjectModel。它们都不是零。

我仍然得到这个 %$&#@! 错误。

有没有人对此有任何新的想法？

编辑：这可能是因为从未保存过新的无标题文档吗？如果是这样，你如何解决这个问题？您可以保存无标题的文档吗？你真的想要吗？

不久前我在文件导入时遇到了类似的问题。由于我拥有完全控制权，我命名并保存了文档，然后我能够保存上下文。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-27T14:10:12.780

正如我在上面的评论中指出的那样，至少在 Mountain Lion 中，您必须至少保存一次文档，然后才能保存上下文。我做了一些实验，我更改的少量数据通过自动保存保留，而不保存上下文。我已将 saveContext 方法更改为以下内容：

```
- (void)saveContext {

    if (![self fileURL]) {
        NSLog(@"Can't save context.  No file name has been set.");
        return;
    } 
    NSError *error = nil;
    if (![self.managedObjectContext save:&error]) {
        [NSApp presentError:error];
        NSLog(@"Error userInfo: %@",[error userInfo]);
        abort();
    }
} 
```

# php - 如何在 PHP 表单的结果中使用 strip_tags 和 htmlentities 的组合？

> ID：12131343
> 
> 赞同：1
> 
> 时间：2012-08-26T15:26:32.177
> 
> 标签：php, html, encoding, html-encode, strip-tags

我构建了一个 CMS，允许用户通过网络表单上传数据。而且我正在尝试找到一种方法，在我将它们插入我的数据库之前，我可以同时使用它们`html_entities()`和`strip_tags`表单的结果。
显然这段代码不能正常工作：

```
 $name_article  = $_POST["name"];
    $add_to_db     = htmlentities(strip_tags($name_article,"<br/><br>")); 
```

它导致在 html 实体中编码**想要**`<br/>`的标签，比如`&lt;br/&gt;`你如何避免这种情况？

PS：在[这里](https://stackoverflow.com/questions/5788314/php-strip-tags-and-htmlentities)看了类似的问题没有得到有效的答案。

# c++ - dlclose 无法关闭共享库

> ID：12131344
> 
> 赞同：1
> 
> 时间：2012-08-26T15:26:33.630
> 
> 标签：c++, linux, shared-libraries

我在Linux中遇到了以下问题。我有一些使用外部库的应用程序（该应用程序未与它链接）。我打开库`dlopen`并使用其中的一些符号。当我尝试卸载库时出现问题`dlclose`，我仍然看到加载的库`/proc/.../maps`。

更多的是尝试使用以下内容：

```
...
while(dlclose(module) == 0);
... 
```

导致无限循环并且库仍然被加载。

有没有办法检查/找到谁拥有图书馆？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-26T18:17:20.627

来自“人 dlclose”：

```
The function dlclose() decrements the reference count on the dynamic
library handle handle.  If the reference count drops to zero and no
other loaded libraries use symbols in it, then the dynamic library
is unloaded. 
```

您很可能与“没有其他加载的库使用符号”条款发生冲突。

最好的办法是使用 运行`LD_DEBUG=bindings`，然后查看哪些其他库绑定到您要卸载的库。

另请参阅[此](https://stackoverflow.com/questions/10430624/replace-a-dynamic-shared-library-in-run-time)问题。

# jquery-ui - jQuery UI Collision - 检测未碰撞的 div

> ID：12131345
> 
> 赞同：1
> 
> 时间：2012-08-26T15:26:52.600
> 
> 标签：jquery-ui

我对 JavaScript 很陌生，所以如果这个问题很幼稚/很明显，请原谅我。我正在使用 jQuery UI 拖放（以及来自该站点的 jQuery 碰撞检测库：http: [//eruciform.com/static//jquerycollision/jquery-collision-drag-collision-example.html](http://eruciform.com/static//jquerycollision/jquery-collision-drag-collision-example.html)）。虽然我在检测哪些 div 相互碰撞时没有问题（并且用 ($(this).collisions(".collisionclass")).each(function() ...)）对所说的 div 做一些事情，但我没有无法找到未相互碰撞的 div 列表或目标碰撞器，至少不是一个优雅的解决方案（原因是我想对那些剩余的未碰撞 div 执行其他操作）。

有谁知道一种优雅的方法来查找哪些 div 没有碰撞而不诉诸蛮力（例如，将所有这些 div 添加到集合中，并且每次发生碰撞事件时检查原始集合中的哪些不在生成的碰撞集合中)? 通过上面链接的示例源代码似乎只是在碰撞的原始 div 部分上添加和删除动态 div 覆盖，但这并没有告诉我如何检测未碰撞的 div ...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-27T19:35:56.553

您可以使用 jquery [not](http://api.jquery.com/not/)方法。

```
var not_collided = $(".item").not(".collisionclass") 
```

从技术上讲，如果它们具有“collisionclass”类，这将检查所有项目，但是在您获得大量项目之前它仍然有效。

# c - C中的strcat不兼容类型错误

> ID：12131347
> 
> 赞同：2
> 
> 时间：2012-08-26T15:26:57.650
> 
> 标签：c, string, strcat, incompatibletypeerror

我有一个形式为 2d 的字符数组`arr[][]`。我需要在该数组的末尾添加一个字符，有时在该数组的第 i 行或第 j 行的开头添加一个字符。这是代码片段：

```
 arr[j] = strcat(arr[j],")");
 arr[i] = strcat("(",arr[i]); 
```

当我编译代码时，我收到错误：分配中的类型不兼容。现在我假设`arr[j]`并且`arr[i]`是字符串。我哪里错了？换句话说，将字符追加或添加到字符串开头的最佳做法是什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-26T15:34:42.277

首先，您不能将`char *`返回的 by分配`strcat`给现有的数组行。

但更重要的是，`strcat`不使用连接结果分配新字符串，而是在第一个字符串中就地执行连接。返回值始终是第一个字符串，只是为了方便。所以，在第一种情况下，你只需要这样做：

```
strcat(arr[j],")"); 
```

（假设`arr[j]`对于添加的字符足够大）

第二种情况更复杂，因为您必须在`)`现有字符串的开头添加 。例如，您可以在单独的缓冲区中执行操作，然后将其复制回`arr[j]`using `strcpy`，或者将字符串的整个内容向前移动一个字符并手动添加括号：

```
memmove(arr[j]+1, arr[j], strlen(arr[j]));
arr[j][0]='('; 
```

* * *

从您的错误中，我担心您认为这`char *`就像其他语言中的字符串类，但可惜不是那样的。请记住，在 C 中，字符串只是愚蠢的字符数组，不要指望像高级语言那样有任何花哨的商品。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-26T15:55:53.517

PL。看看下面的简单示例是否有帮助，

```
#include<stdio.h>
#include<stdlib.h>
#include<string.h>

int main(int argc, char* argv[])
{
    char myarray[2][10], *temp;

    //Populating something in the array
    strcpy(myarray[0], "string1");
    strcpy(myarray[1], "string2");
    printf("%s\n", myarray[0]);
    printf("%s\n", myarray[1]);

    //Adding something at the end of the string..
    //Be careful to check if the source is large enough.
    //Also consider using strncat
    strcat(myarray[0], ")");
    printf("Appended at the end %s\n", myarray[0]);

    //Append at the beginning
    //Here you can use a temporary storage.
    //And pl. do the required error handling for insufficent space.
    temp = malloc(strlen(myarray[1]) + strlen("(") +1);
    strcat(temp, "(");
    strcat(temp, myarray[1]);
    strcpy(myarray[1], temp);
    printf("Appended at the beginning  %s\n", myarray[1]);
    free(temp);
    return 0;
} 
```

# php - 如何使用在 PHP 中存储为类成员的回调函数？

> ID：12131349
> 
> 赞同：2
> 
> 时间：2012-08-26T15:27:18.197
> 
> 标签：php

考虑以下代码，它是将回调函数存储为成员，然后使用它的方案：

```
class MyClass {
  function __construct($callback) {
    $this->callback = $callback;
  }

  function makeCall() {
    return $this->callback();
  }
}

function myFunc() {
  return 'myFunc was here';
}

$o = new MyClass(myFunc);
echo $o->makeCall(); 
```

我希望`myFunc was here`得到回应，但相反我得到：

```
Call to undefined method MyClass::callback() 
```

谁能解释这里出了什么问题，以及我可以做些什么来获得所需的行为？

万一这很重要，我使用的是 PHP 5.3.13。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-26T15:32:42.007

您可以将`makeCall`方法更改为：

```
function makeCall() {
  $func = $this->callback; 
  return $func();
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-26T15:35:33.560

将其作为字符串传递并通过[call_user_func](http://php.net/manual/en/function.call-user-func.php)调用它。

```
class MyClass {
  function __construct($callback) {
    $this->callback = $callback;
  }

  function makeCall() {
    return call_user_func($this->callback);
  }
}

function myFunc() {
  return 'myFunc was here';
}

$o = new MyClass("myFunc");
echo $o->makeCall(); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-26T15:58:09.297

关于 PHP 的一件重要的事情是它通过语法而不是符号的内容来识别符号的类型，因此您需要明确说明您所指的内容。
在许多语言中，您只需编写：

```
myVariable
myFunction
myConstant
myClass
myClass.myStaticMethod
myObject.myMethod 
```

解析器/编译器知道每个符号的含义，因为它只需知道分配给它们的内容就知道它们所指的内容。
然而，在 PHP 中，您需要使用语法让解析器知道您指的是什么“符号命名空间”，因此通常您编写：

```
$myVariable
myFunction()
myConstant
new myClass
myClass::myStaticMethod()
$myObject->method() 
```

但是，如您所见，这些是调用而不是引用。要在 PHP 中传递对函数、类或方法的引用，使用组合的字符串和数组语法：

```
'myFunction'
array('myClass', 'myStaticMethod')
array($myObject, 'myMethod') 
```

在您的情况下，您需要使用*'myFunc'*代替*myFunc*让 PHP 知道您正在传递对函数的引用，而不是检索*myFunc*常量的值。

另一个后果是，当您编写 $myObject->callback() 时，PHP会因为括号而假定*callback是一个方法，并且***它不会尝试循环一个 property**。
为了达到预期的结果，您需要将属性*回调*的副本/引用存储在局部变量中，并使用以下语法：

```
$callback = $this->callback;
return $callback(); 
```

**由于美元符号和**括号，将其标识为闭包；或使用 call_user_func 函数调用它：

```
call_user_func($this->callback); 
```

另一方面，它是一个*需要*回调的内置函数。

# c++ - 具有 qobject 基础的多重继承

> ID：12131357
> 
> 赞同：7
> 
> 时间：2012-08-26T15:28:07.357
> 
> 标签：c++, qt, inheritance

代码示例：

```
class TestOne : public QWidget // To fix this i need to modify  class QWidget : public virtual QObject{}; which belongs to qt
{
  // ...
};

class TestTwo : public virtual QObject
{
  // ...
};

class Test : public TestOne, public TestTwo
{
 // ...
}; 
```

还有什么其他方法可以解决这个问题？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-08-26T16:41:52.490

QObject 不是为多重继承而设计的。`QObject`不支持来自另一个 QObjects 的多重继承。如果你从两个类继承只有第一个可以是 QObject 而第二个不是根据[http://qt-project.org/doc/qt-4.8/moc.html](http://qt-project.org/doc/qt-4.8/moc.html)

> 不支持使用 QObject 进行虚拟继承。

您可以在两个 QObject 之间建立关联并在它们之间转发信号。

您可以以不需要信号/插槽并且不从 QObject 继承的方式抽象您的常用功能。然后继承它。然后将 MI 中的 QObject 免费课程与您的课程混合。您可以通过来自 Derived QObject 的信号/插槽将调用转发给那些继承的方法

# c# - C#中重写的虚方法

> ID：12131359
> 
> 赞同：2
> 
> 时间：2012-08-26T15:28:26.037
> 
> 标签：c#

在“The C# Programming Language”一书中，Eric Lippert 提到了这一点：

*这里的一个微妙点是，被覆盖的虚方法仍然被认为是引入它的类的方法，而不是覆盖它的类的方法。*

这句话的意义何在？为什么重写的虚方法被认为是引入它的类的方法（或以其他方式），因为除非您正在处理派生类，否则永远不会调用重写的方法？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-26T15:38:47.133

当您有一个类型的引用指向不同类型的对象时，这很重要。

例子：

```
public class BaseClass {
  public virtual int SomeVirtualMethod() { return 1; }
}

public class DerivedClass : BaseClass {
  public override int SomeVirtualMethod() { return 2; }
}

BaseClass ref = new DerivedClass();
int test = ref.SomeVirtualMethod(); // will be 2 
```

因为虚方法是基类的成员，所以可以使用基类类型的引用来调用覆盖方法。如果不是，则需要派生类型的引用来调用覆盖方法。

当您隐藏一个方法而不是覆盖它时，该隐藏方法是派生类的成员。根据引用的类型，您将调用原始方法或阴影方法：

```
public class BaseClass {
  public int SomeMethod() { return 1; }
}

public class DerivedClass : BaseClass {
  public new int SomeMethod() { return 2; }
}

BaseClass ref = new DerivedClass();
int test = ref.SomeMethod(); // will be 1

DerivedClass ref2 = ref;
int test2 = ref2.SomeMethod(); // will be 2 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-26T16:58:54.483

以下是这本书的完整引用：

> 这里的一个微妙点是，被覆盖的虚方法仍然被认为是引入它的类的方法，而不是覆盖它的类的方法。在某些情况下，重载决策规则更喜欢派生类型的成员而不是基类型中的成员；覆盖方法不会“移动”该方法在此层次结构中所属的位置。
> 
> 在本节的开头，我们注意到 C# 在设计时考虑了版本控制。这是有助于防止“脆弱的基类综合症”导致版本控制问题的功能之一。

完整的引用清楚地表明，Eric Lippert 专门谈论*方法重载*，而不仅仅是虚拟方法的工作方式。

例如，考虑以下程序：

```
class Base
{
    public virtual void M2(int i) { }
}

class Derived : Base
{
    public void M1(int i) { Console.WriteLine("Derived.M1(int)"); }
    public void M1(float f) { Console.WriteLine("Derived.M1(float)"); }

    public override void M2(int i) { Console.WriteLine("Derived.M2(int)"); }
    public void M2(float f) { Console.WriteLine("Derived.M2(float)"); }

    public static void Main()
    {
        Derived d = new Derived();
        d.M1(1);
        d.M2(1);
    }
} 
```

我认为许多开发人员会惊讶于输出是

```
派生的.M1(int)
Derived.M2（浮点数）
```

即使是更好的匹配，为什么还要`d.M2(1)`调用？`Derived.M2(float)``Derived.M2(int)`

当编译器确定`M1`in`d.M1(1)`指的是什么时，编译器会看到这两者`M1(int)`和`M1(float)`都被引入 in `Derived`，因此这两个重载都是适用的候选者。编译器选择`M1(int)`over`M1(float)`作为整数参数的最佳匹配`1`。

当编译器确定`M2`in`d.M2(1)`指的是什么时，编译器会看到`M2(float)`in 被引入`Derived`并且是适用的候选者。根据重载决议规则，“如果派生类中的任何方法适用，则基类中的方法不是候选方法”。因为`M2(float)`适用，所以这条规则防止`M2(int)`成为候选人。即使`M2(int)`是整数参数的更好匹配，即使它在 中被覆盖`Derived`，它仍然被认为是`Base`.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-26T15:54:10.583

了解重写的虚方法属于引入它的类，而不是重写它的类，可以更容易地理解类成员的绑定方式。除了使用`dynamic`对象时，C# 中的所有绑定都在编译时解析。如果 a`BaseClass`声明了一个虚拟方法`foo`并`DerivedClass:BaseClass`覆盖了`foo`，那么尝试调用`foo`类型变量的代码`BaseClass`将始终绑定到虚拟方法 "slot" `BaseClass.foo`，而虚拟方法 "slot" 又将指向实际`DerivedClass.foo`方法。

在处理泛型时，这种理解尤其重要，因为在 C# 中，与 C++ 不同，泛型类型的成员是根据泛型的约束来绑定的，而不是根据具体的泛型类型。例如，假设有一个`SubDerivedClass:DerivedClass`创建了一个`new virtual`方法`foo()`，一个定义了一个方法`DoFoo<T>(T param) where T:BaseClass {param.foo();}`。即使方法被调用`param.foo()`为. 如果在调用之前将参数强制转换为，则调用将绑定到，但编译器无法判断何时生成比更具体的内容，它无法绑定到 中不存在的任何内容。`BaseClass.foo``DoFoo<SubDrivedClass>(subDerivedInstance)``SubDerivedClass``foo``SubDrivedClass.foo()``DoFoo<T>``T``BaseClass``BaseClass`

顺便说一句，如果一个类可以同时覆盖一个基类成员并创建一个新成员，那么有时它会很有用。例如，给定一个`ReadableFoo`具有一些抽象只读属性的抽象基类，如果一个类`MutableFoo`既可以为该属性提供覆盖并定义具有相同名称的读写属性，那将很有帮助。不幸的是，.net 不允许这样做。鉴于这样的限制，最好的方法可能是`ReadableFoo`提供一个具体的非虚拟只读属性，该属性调用`protected abstract`具有不同名称的方法来获取值。这样，派生类可以用读写属性（调用相同的虚拟方法进行读取，或调用新的（可能是虚拟的）写入方法）隐藏只读属性。

（以下未经测试）

```
class BaseClass
{
    public virtual void foo() {Console.WriteLine("BaseClass.Foo");
}
class DerivedClass:BaseClass
{
    public override void foo() {Console.WriteLine("Derived.Foo");
}
class SubDerivedClass:DerivedClass
{
    public new virtual void foo() {Console.WriteLine("SubDerived.Foo");
}
class MegaDerivedClass:SubDerivedClass
{
    public override void foo() {Console.WriteLine("MegaDerived.Foo");
}
void DoFoo1<T>(T param) where T:BaseClass 
    {
        param.foo();
}
void DoFoo1<T>(T param) where T:SubDerivedClass 
    {
        param.foo();
}
void test(void)
{
    var megaDerivedInstance = new MegaDerivedClass();
    DoFoo1<MegaDerivedClass>(megaDerivedInstance);
    DoFoo2<MegaDerivedClass>(megaDerivedInstance);
} 
```

SubDerivedClass 有两个虚拟`foo()`方法：`BaseClass.foo()`和`SubDerivedClass.foo()`. A`MegaDerivedClass`具有相同的两种方法。`SubDerivedClass()`请注意，尝试覆盖的派生类`foo`将覆盖`SubDerivedClass.foo()`并且不会影响`BaseClass.foo()`；使用上述声明，没有任何派生`SubDerivedClass`可以覆盖`BaseClass.Foo`. 另请注意，将其实例`SubDerivedClass`或其子类强制转换为`DerivedClass`或`BaseClass`将公开`BaseClass.foo`用于调用的虚拟方法。

顺便说一句，如果方法声明`SubDerivedClass`已经是`friend new virtual void foo() {Console.WriteLine("SubDerived.Foo");`，则同一程序集中的其他类将无法覆盖`BaseClass.foo()`（因为任何覆盖尝试`foo()`都会覆盖`SubDerivedClass.foo()`），但是从程序集外部派生的类`SubDerivedClass`将看不到`SubDerivedClass.foo()`并因此可以覆盖`BaseClass.foo()`。

# post - 带有大文件的 libCURL Multipart POST

> ID：12131361
> 
> 赞同：1
> 
> 时间：2012-08-26T15:28:35.967
> 
> 标签：post, libcurl, large-files, large-file-upload

我需要使用多部分 POST 请求上传一个大文件（>2 GB）。源文件可以使用 unicode 符号命名。问题是 libcurl 不支持 windows 中的 unicode wfopen，所以我无法以通常的方式完成此任务，例如

```
curl_formadd(&formpost, &lastptr,
  CURLFORM_COPYNAME, fieldname,
  CURLFORM_FILENAME, filename,
  CURLFORM_FILE, full_path_to_file,
  CURLFORM_CONTENTTYPE, "application/octet-stream",
  CURLFORM_END); 
```

我发现我可以将 curl_formadd 的 CURLFORM_STREAM 选项与 CURLOPT_READFUNCTION 结合使用。现在我需要通过 CURLFORM_CONTENTSLENGTH 选项手动设置文件大小，但是当我需要设置“long long”文件大小时，它只接受“long”作为参数。浏览 curl 手册后，我发现了一些 CURLOPT_POSTFIELDSIZE_LARGE 选项，但在我的情况下它什么也没做。多部分请求系统似乎忽略了这个参数。我不知道该怎么办，我不想放弃 unicode 名称或大文件支持。

# c# - LINQ / XPath - 如何使用 xPAth 语句动态加载？

> ID：12131363
> 
> 赞同：0
> 
> 时间：2012-08-26T15:28:52.480
> 
> 标签：c#, linq, xpath

我有一个类似于以下内容的 XML 文件：

```
<root>
   <parent label="parent1">
      <child label="child1">
         <element1>data</element1>
         <element2>data</element2>
         ...
         <grandchildren>
             <grandchild label="grandchild1">
                 <elementa>data</elementa>
                 <elementb>data</elementb>
             </grandchild>
         </grandchildren>
      </child>
      <child label="child2">
         <element1>data</element1>
         <element2>data</element2>
         ...
         <grandchildren>
             <grandchild label="grandchild2">
                 <elementa>data</elementa>
                 <elementb>data</elementb>
             </grandchild>
         </grandchildren>
      </child>
   </parent>
</root> 
```

XML 用作树视图的数据源。用户可以在那里选择一个父级，父级的属性将显示在一个列表视图中（它使用 LINQdataview 作为数据源）。我正在使用 linq 查询提取数据。但是，我想在单独的控件（Telerik 网格）中显示 GrandChildren。

我在 listview 单元格中创建了一个新的 XMLDataSource，它将从孩子的 xPAth（我在代码中添加的内容，见下文）以及预期的网格中提取其数据。网格设置为将 XMLDataSource 作为其 DataSourceID。

这是我用来在 Selecting 事件中提取数据的代码：

```
protected void listsSource_Selecting(object sender, LinqDataSourceSelectEventArgs e) {
    XElement rootElement = XElement.Load(MapPath(TreeSource.DataFile));

    parentElement = rootElement.XPathSelectElement("//parent[@label='" + tvw.SelectedNode.Text + "']");

    var query = from element in parentElement.DescendantsAndSelf("child")
        select new {
            element1 = element.Element("element1").Value,
            element2 = element.Element("element1").Value,                               
            xPathAddress = "//parent[@label='" + tvw.SelectedNode.Text + "']",
            grandchildrenXPath = "//parent[@label='" + tvwMaterials.SelectedNode.Text + "']" + "/grandchildren"
    };

    e.Result = query;
} 
```

这是来自 ASPX 的代码：

```
<td rowspan="7" style="border-style: solid; border-width: thin" align="center">
    <telerik:RadGrid ID="gridRelatives" runat="server" DataSourceID="XmlRelatives" >
                                </telerik:RadGrid>
    <asp:XmlDataSource ID="XmlRelatives" runat="server"
        DataFile="~/XML/Data/relatives.xml" xPath='<%# Eval("grandchildrenPath") %>'></asp:XmlDataSource>
</td> 
```

但是，这会导致“无法在数据源中的项目中找到任何可绑定属性”错误，我猜这是因为尝试动态加载 XML，导致它在 ListSource 选择事件触发时不会触发。

我应该改为在单独的查询语句中加载数据，还是我忽略了一些相当简单的事情？

任何帮助将不胜感激，因为这已经让我难倒了一段时间:)

谢谢。

更新：

尝试向选择代码添加第二个 linq 查询，以尝试设置第二个 XMLDataSource 的 XPath 部分，但这给了我另一个错误。代码：

```
var query2 = from element in parentElement.DescendantsAndSelf("child")
    select new {
        grandchildrenXPath = "//parent[@label='" + tvw.SelectedNode.Text + "']" + "/grandchildren"
    };
myThickness.XPath = query2.ToString();
myThickness.DataBind(); 
```

错误：

'System.Linq.Enumerable+WhereSelectEnumerableIterator `2[System.Xml.Linq.XElement,<>f__AnonymousType3`1[System.String]]' 的令牌无效。

评论新行让事情再次起作用。

我仍然希望为此找到解决方案。我认为动态构建 xPath 将是完成此任务的好方法，但显然这是行不通的。我在这里没有看到什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-29T05:16:50.933

我最终通过添加一个新的 XMLDataSource 并将其加载到 listsSource_Selecting 事件中找到了一种解决方法。

我之前尝试过这样做，但是这次将代码放在了提供 ListView 的 LINQ 查询之上。这不会再引发任何错误。

# php - 如何显示数据库中的图像？

> ID：12131368
> 
> 赞同：1
> 
> 时间：2012-08-26T15:29:21.917
> 
> 标签：php, mysql

图像无法从 php 中的数据库显示，并且会引发此类错误。当我执行此代码时，会发生此类错误图像无法显示，因为它包含错误。图像存储在 mysql 数据库中，字段类型为 BLOB。IT 没有找到任何解决方案来避免此错误。

```
<?php
require_once('database/db.class.php');
$objDatabase=new db_class();
$objDatabase->connect();
$sql="SELECT id,firstname,lastname,sex,email,userimage,ext,city,state,username FROM t_users WHERE username='".$_SESSION['username']."'";
$totalRow=$objDatabase->select($sql);
if($row=$objDatabase->get_row($totalRow, 'MYSQL_BOTH'))
    {
        $userArray=array('id'=>$row['id'],'firstname'=>$row['firstname'],'lastname'=>$row['lastname'],'sex'=>$row['sex'],'email'=>$row['email'],'userimage'=>$row['userimage'],'ext'=>$row['ext'],'city'=>$row['city'],'state'=>$row['state'],'username'=>$row['username']);
    }

?>

  <table cellspacing="10px" width="100%">
  <tr>
  <td width="23%" style="vertical-align:top">
  <?php
    header("Content-type: image/{$userArray['ext']}");
    header("Content-Length: " . strlen($userArray['userimage']));
    echo  $userArray['userimage'];
  ?>
 </td>
</tr>
</table> 
```

上传图片代码

```
@list(, , $imtype, ) = getimagesize($_FILES['photo']['tmp_name']);
    // Get image type.
    // We use @ to omit errors

if ($imtype == 3) // cheking image type
$ext="png";   // to use it later in HTTP headers
elseif ($imtype == 2)
$ext="jpeg";
elseif ($imtype == 1)
    $ext="gif";
else
$msg = 'Error: unknown file format';

   $img = file_get_contents($_FILES['photo']['tmp_name']);
$img = mysql_real_escape_string($img);
        // Preparing data to be used in MySQL query

$data=array('firstname'=>$_REQUEST['firstname'],'lastname'=>$_REQUEST['lastname'],'sex'=>$_REQUEST['gender'],'email'=>$_REQUEST['email'],'userimage'=>$img,'ext'=>$ext,'city'=>$_REQUEST['city'],'state'=>$_REQUEST['state'],'zipcode'=>$_REQUEST['zipcode'],'username'=>$_REQUEST['usernameText'],'password'=>$_REQUEST['passwordText']);
$result=$objDatabase->insert_array('t_users',$data);    

 <input name="photo" type="file" id="photo"> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-26T15:42:36.597

好吧，这不是这样做的方法，只需像往常一样存储图像，然后将路径存储在数据库中。

如果你确实想这样做，你需要创建一个新文件，叫做 image.php，然后把

```
<?php

require_once('database/db.class.php');

$objDatabase=new db_class();
$objDatabase->connect();
$sql="SELECT id,firstname,lastname,sex,email,userimage,ext,city,state,username FROM t_users WHERE username='".$_SESSION['username']."'";
$totalRow=$objDatabase->select($sql);

if($row=$objDatabase->get_row($totalRow, 'MYSQL_BOTH'))
{
    $userArray=array('id'=>$row['id'],'firstname'=>$row['firstname'],'lastname'=>$row['lastname'],'sex'=>$row['sex'],'email'=>$row['email'],'userimage'=>$row['userimage'],'ext'=>$row['ext'],'city'=>$row['city'],'state'=>$row['state'],'username'=>$row['username']);
}

header("Content-type: image/{$userArray['ext']}");
header("Content-Length: " . strlen($userArray['userimage']));
echo  $userArray['userimage'];
?> 
```

进入该文件。

然后在表中使用

```
<img src='/image.php ?>' alt='' /> 
```

但是不要，只需将路径存储在数据库中即可，您很少将二进制数据存储在不是文件系统的数据库中，原因我不会在这里讨论。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-26T15:43:19.470

**编辑**- 我忘了包括：base64 文件将比 BLOB 大得多。

* * *

尝试将其保存为 base64 而不是 BLOB。

这是我在[http://www.php.net/manual/en/function.base64-encode.php上找到的一个函数](http://www.php.net/manual/en/function.base64-encode.php)

```
function base64_encode_image ($filename=string,$filetype=string) {
    if ($filename) {
        $imgbinary = fread(fopen($filename, "r"), filesize($filename));
        return 'data:image/' . $filetype . ';base64,' . base64_encode($imgbinary);
    }
} 
```

当您从数据库中检索图像时，它将作为 base64 字符串，您可以将字符串直接放入 HTML 中的 src="" 属性中（无需解码）。浏览器可以解析 base64 并显示图像。

# amazon-ec2 - 使用 cloudfoundry 控制台将战争部署到 EC2

> ID：12131374
> 
> 赞同：0
> 
> 时间：2012-08-26T15:30:11.457
> 
> 标签：amazon-ec2, cloud-foundry

我一直在努力使用控制台通过 cloudfoundry 将 java 应用程序部署到 Amazon EC2 实例中，如关于 cloudfoundry 的截屏视频中所述。 [http://classic.cloudfoundry.com/screencasts.html](http://classic.cloudfoundry.com/screencasts.html) 但只是未能通过从本地文件系统中选择战争来获得可以部署的控制台，如视频中所述。

什么是正确的 URL，我可以在其中找到类似于视频中显示的控制台？而且我已经尝试注册网址[http://classis.cloudfoundry.com](http://classis.cloudfoundry.com)，但即使在 4 天后也没有收到团队的批准或确认邮件..

最近有没有人遇到过类似的问题？如果是，请帮忙！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-28T01:04:25.477

Cloud Foundry Classic 服务（位于[http://classic.cloudfoundry.com](http://classic.cloudfoundry.com)）不再接受新帐户。

# wordpress - Wordpress 可视化编辑器显示 html

> ID：12131377
> 
> 赞同：1
> 
> 时间：2012-08-26T15:31:28.977
> 
> 标签：wordpress

在完成一个 Wordpress 网站并将其移动到网站的另一个目录后，可视化编辑器消失了，而是开始显示 HTML，同时文本是白色的。我尝试了来自 Wordpress 支持论坛的不同建议，但没有任何帮助，而且每个人似乎都有不同的答案。

有谁知道可能发生了什么以及如何解决它？

谢谢！

# ios - 初始 UIviewController

> ID：12131380
> 
> 赞同：-1
> 
> 时间：2012-08-26T15:31:57.033
> 
> 标签：ios, uiview, uiviewcontroller, uitabbarcontroller

我开始创建tabBarApplication，现在我需要设置我最初创建的新UIViewController。它是一个新控制器，不属于tabBar ViewControllers。我没有使用故事板。

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-26T15:38:25.853

我建议您使用 UINavigationController 作为应用程序的基础，将初始视图作为根视图控制器，然后在必要时推送 tabView。

要设置主视图控制器，请编辑 AppDelegate.m 文件

```
UIWindow *win = [[UIWindow alloc] initWithFrame:[[UIScreen mainScreen] bounds]];

/* here you should create your controller and asign it to the variable named controller */

[win addSubview:controller.view];
[win makeKeyAndVisible]; 
```

我相信您不能将 tabBar 控制器推送到导航控制器中，因此您可能必须将标签栏嵌入到另一个视图中。我在我的应用程序中做了类似的事情。

# objective-c - 旋转设备时自动调整大小 (iOS)

> ID：12131382
> 
> 赞同：0
> 
> 时间：2012-08-26T15:32:14.403
> 
> 标签：objective-c, ios, xcode, rotation

我目前正在与以下问题作斗争。也许你们当中有人知道答案。我认为这并不难，但我不知道为什么会这样。

这是问题所在：

首先一切看起来都应该，但是在旋转设备之后......

![在此处输入图像描述](../Images/d74b8861f1984d17e30310e2d5be7778.png)

..导航栏下的文本字段消失了...有什么想法吗？:)

![在此处输入图像描述](../Images/d17824592419bd4db384d726c155d4ab.png)

# javascript - 将主要网站转换为 javascript 应用程序

> ID：12131383
> 
> 赞同：7
> 
> 时间：2012-08-26T15:32:15.277
> 
> 标签：javascript, backbone.js, seo

我会很感激你的意见。我负责重新开发一个流量很大的主要网站。在过去的几个月里，我一直在使用 Backbone.js 开发应用程序。过去几周我一直在研究 Backbone 是否适合重新开发新网站。

我最初关心的是搜索引擎优化。[在这里](http://lostechies.com/derickbailey/2011/09/26/seo-and-accessibility-with-html5-pushstate-part-2-progressive-enhancement-with-backbone-js/)找到了一篇很棒的帖子，讨论了渐进式增强和一堆帮助解决的 stackoverflow 问题。我似乎无法摆脱这样一种感觉，即构建一个静态站点并使用 Backbone 对其进行增强是一项壮举，并且需要更多时间。

现在我的问题是，我们是否还没有通过必须构建必须禁用 javascript 的站点的阶段？我们的网站对屏幕阅读器等仍然有效吗？

我的想法是将服务器中的相关元 seo 信息提供到我的主 app.html 文件中，以便搜索引擎仍然能够抓取不同的 url。Backbone 应用程序将从您访问的与应用程序相关的任何 URL 启动。

我刚刚访问了新的 hulu.com，似乎想不出为什么不将网站重新开发成 Backbone 应用程序的理由。如果不是我访问过的所有网站，大多数网站如果没有 js 将无法运行。在禁用 js 的情况下访问 hulu.com，您将能够明白我的意思。所以最后，建立一个没有 js 就无法运行的网站是否安全，以上内容是否足以满足 SEO？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-26T16:08:50.747

我想对此会有很多意见。这是我的。

作为默认的思维方式，我总是发现向后兼容和优雅的后备很重要。我通常认为一个网站应该能够实现它的主要目的：提供内容（内容销售）。

但是.. 如果目的又名内容是提供某种功能，例如在线计算器或绘图应用程序。那么用户将已经需要并期望启用诸如 javascript 之类的东西。在这些情况下，我很乐意使用 javascript 让设计/布局变得更轻松。想想像jsfiddle这样的网站：谁会关心这个网站是否因为javascript被禁用而没有正确显示它的ui..没有人。

至于搜索引擎优化：我认为有很多事情会影响这一点。如果你卖苹果并且拥有 apples.com 域名，那么无论如何你都差不多。同样，内容销售，这是大多数引擎试图索引的方式。

除此之外，在这个（可怕的）时代和互联网时代，最流行的搜索引擎将对用户的搜索结果进行过滤和排名......所以如果一个人想为搜索引擎优化一个网站......[那么你尝试优化谁的个人气泡（搜索结果）？！？](http://dontbubble.us/).

我对语义编码、可维护并且具有相当稳定的可预见未来的东西更有信心（而不是每 6 个月左右一次又一次地重建相同的东西）。更简单地说：使核心/基础“简单”到“总是”以有用的方式呈现，然后使用 javascript 和 css-edge-technology 添加香料来调整内容。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-26T16:32:34.577

你有没有研究过node.js？因为无论如何您将视图渲染移植到 javascript。让更多的组件说同一种语言会更友好一些。加上异步处理模型释放了线程进程通常会导致的大量服务器压力。线程进程花费大量时间（和功率）等待执行。但是在 javascript 中，人们通常会设置回调方法。因此，node 不再等待前一个进程完成，而是留下一个回调方法在需要时执行，同时应用程序的其余部分仍在全速前进。

节点也很轻。您可以将它与其他服务器端技术一起使用，并且不会占用太多空间。它有一些非常强大的功能，但就我个人而言，我发现它最适合视图渲染（毕竟它是 javascript）。它还使设置服务器和路由变得非常容易。因此，设置您在第 4 段中提到的内容将是小菜一碟。

无论如何，这是我的 2 美分。

# mysql - 仅在数据的特定更改时触发

> ID：12131384
> 
> 赞同：1
> 
> 时间：2012-08-26T15:32:15.483
> 
> 标签：mysql, sql, triggers

有人帮我写了以下内容：

```
CREATE TRIGGER update_stats AFTER UPDATE ON user_hours FOR EACH ROW
INSERT INTO hours_statistics (user_id, opportunity_id, completed_hours) VALUES
(OLD.user_id, OLD.opportunity_id, -OLD.completed_hours),
(NEW.user_id, NEW.opportunity_id, +NEW.completed_hours)
ON DUPLICATE KEY UPDATE
completed_hours = completed_hours + VALUES(completed_hours); 
```

但是，触发器应仅针对以下情况运行：

```
UPDATE user_hours JOIN user_calendar USING (user_calendar_id, opportunity_id)
SET    user_hours.completed_hours = agreed_hours,
user_hours.hours_committed = 'completed'
WHERE  user_hours.hours_committed = 'accepted' 
AND user_hours.completed_hours IS NULL
AND user_calendar.date_start = CURRENT_DATE(); 
```

就目前而言，如果手动调整管理员或用户的 completed_hours，更新触发器仍会运行。我想在代码中添加一些 IF 语句，但我的尝试都未能创建触发器。

我正在寻找类似的东西：

```
CREATE TRIGGER update_stats AFTER UPDATE ON user_hours FOR EACH ROW
IF hours_committed = 'completed' THEN
INSERT INTO hours_statistics (user_id, opportunity_id, completed_hours) VALUES
(OLD.user_id, OLD.opportunity_id, -OLD.completed_hours),
(NEW.user_id, NEW.opportunity_id, +NEW.completed_hours)
ON DUPLICATE KEY UPDATE
completed_hours = completed_hours + VALUES(completed_hours);
END IF
END 
```

任何人都可以提供帮助，除非满足特定条件，否则不希望触发器运行，这让我们需要的代码工作很烦人，但这会在运行调整查询之外的几天内造成问题。

提前致谢。

标记

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-26T15:35:53.417

触发器将始终运行，您需要将该条件添加到触发器的主体中，并比较新更新的列 ( `new.column`)：

```
DELIMITER //

CREATE TRIGGER update_stats AFTER UPDATE ON user_hours 
FOR EACH ROW
BEGIN
  IF NEW.hours_committed = 'completed' THEN
    INSERT INTO hours_statistics (user_id, opportunity_id, completed_hours) VALUES
      (OLD.user_id, OLD.opportunity_id, -OLD.completed_hours),
      (NEW.user_id, NEW.opportunity_id, +NEW.completed_hours)
    ON DUPLICATE KEY UPDATE
      completed_hours = completed_hours + VALUES(completed_hours);
  END IF;
END// 
```

# android - Android 市场过滤器 Google API 级别

> ID：12131395
> 
> 赞同：0
> 
> 时间：2012-08-26T15:33:47.290
> 
> 标签：android, google-maps-api-3, google-api

我正在开发一个使用`MapView`,的应用程序`MapActivity`，所以我需要在清单等中添加 google api 库。

我正在使用 Eclipse IDE，当我在 HTC Desire 上启动我的应用程序时，Eclipse 提示我该设备与我的应用程序不兼容。

我给你一些细节：

我`minSdkVersion`在清单文件中是 4 (1.6)，我的设备运行的是 2.3.7 版本的 Android。我已经开发了一些不使用 google api 的应用程序，一切都按预期进行。

那么，为什么 Eclipse 会这样说呢？是针对 Google 的 Api 库的吗？

如果我将我的应用程序部署到 Play 商店，它会可见吗？适用于哪些设备？

谢谢。

# backbone.js - 下划线 isObject() 有时不起作用

> ID：12131406
> 
> 赞同：2
> 
> 时间：2012-08-26T15:35:30.643
> 
> 标签：backbone.js, underscore.js

当我使用nodeUnit为Backbone模型编写单元测试时，发生了一些奇怪的事情，问题可以总结为：

```
var Player = Backbone.Model.extend({});
var player = new Player({name: 'Jacky'}); 
```

然后我更新玩家名称：player.set('name', 'Scott')。但是我发现name属性根本没有更新（这个模型没有验证功能），还有奇怪的属性像：[0]：n，[1]：a，[2]：m，[3]： e.

如果我将更新方法更改为 player.set({name: 'Scott'})，它工作正常。

我做了一些快速调查，发现 Backbone.Model.set 方法依赖于 Underscore.isObject() 方法，后者实现为：

```
 _.isObject = function(obj) {
    return obj === Object(obj);
  }; 
```

我在 nodeUnit 测试用例中调用了 isObject() 方法，在第一种情况下它工作正常，但在后一种情况下，它不能按预期工作，例如 isObject('name') 将返回 true 而不是预期的 false。

有人知道是什么原因造成的吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-26T19:05:34.673

你能确定你使用的是最新版本的 Backbone 吗？旧版本中的 Backbone 不支持`set`方法 ( `.set(key, value)`) 的快捷版本，并且只允许具有属性/值对的对象作为参数。

*（我相信它是在 0.9 中添加的）*

# android - Android VideoView 直播电视流 (HLS)

> ID：12131408
> 
> 赞同：5
> 
> 时间：2012-08-26T15:35:32.357
> 
> 标签：android, android-videoview, http-live-streaming

我正在尝试开发用于电视流媒体（HLS）的应用程序。使用下面的代码，我在 2.3.3、3.0 和 4.0.1 版本的 Android 设备上测试了流，但遇到了几个问题。在 Android 2.3.3 上，流播放超过 1 分钟，然后停止。在 Android 3.0 上运行良好，在 Android 4.0.3 上显示消息“无法播放此文件”（如果我没记错的话）。所以我的问题是：如何在这些设备的以太上播放流，而不会出现流播放问题？或者我在哪里可以阅读更多关于这些问题的解决方案（试图搜索但没有发现任何有用的信息）？

Main_Activity 中的代码：

```
 @Override
    public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);
    VideoView player = (VideoView)findViewById(R.id.player);
    String httpLiveUrl = "http://aj.lsops.net/live/aljazeer_en_high.sdp/playlist.m3u8";
    //for Android 2.3.3 I used httplive:// prefix
    player.setVideoURI(Uri.parse(httpLiveUrl));
    player.setMediaController(new MediaController(this));
    player.requestFocus();
    player.start();
}

@Override
public boolean onCreateOptionsMenu(Menu menu) {
    getMenuInflater().inflate(R.menu.activity_main, menu);
    return true;
} 
```

xml中的代码：

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
xmlns:tools="http://schemas.android.com/tools"
android:layout_width="match_parent"
android:layout_height="match_parent" >

<VideoView
    android:id="@+id/player"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_centerHorizontal="true" />
</RelativeLayout> 
```

对不起，如果我的英语很差。谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-01-15T18:36:14.060

这不会解决所有的流媒体问题。但是您应该做的一件事是`player.start()`在 MediaPlayer 准备好时调用。[此 SO 帖子](https://stackoverflow.com/questions/18482018/mediaplayer-error-38-0)的选定答案在 MediaPlayer 对象上设置了一个侦听器，以便它`start()`在`onPrepared(MediaPlayer mp)`被调用时运行。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-09-05T08:47:17.820

Insert this Code to AndroidManifest.xml

```
<uses-permission android:name="android.permission.INTERNET" /> 
```

# ruby-on-rails - Rails 有办法处理 has_one 连接表吗？

> ID：12131412
> 
> 赞同：0
> 
> 时间：2012-08-26T15:36:14.060
> 
> 标签：ruby-on-rails, ruby, activerecord, associations

考虑以下模型设置：

```
Model A
  has one B1, type: B
  has one B2, type: B

Model B
  has many A 
```

我希望能够从事这项工作：

```
class Motorcycle < ActiveRecord::Base
  has_one :front_tire, class_name: "Tire"
  has_one :back_tire, class_name: "Tire"
end

class Tire < ActiveRecord::Base
  has_many :motorcycles
end 
```

最终结果是我能够做到这一点：

```
m = Motorcycle.new
ft = Tire.new
bt = Tire.new
m.front_tire = ft
m.back_tire = bt
m.save
Tire.first.motorcycles #=> [...] 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-26T16:25:21.820

您不能`has_many`与 配对`has_one`，`has_*`需要与`belongs_to`（当然除了`has_many :through`）配对。

因此，您需要更改为`motorcycle` `belongs_to`:`front_tire`或创建第三个连接模型。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-26T16:38:32.490

我认为您正在寻找基本[的 Single-table Inheritance](http://api.rubyonrails.org/classes/ActiveRecord/Base.html#label-Single+table+inheritance)，因为前轮胎和后轮胎确实不是一回事，而是特定类型的轮胎。为此，您需要在表中添加一个`type`字符串列`tires`，并声明该类的两个子`Tire`类：

```
class Motorcycle < ActiveRecord::Base
  belongs_to :front_tire
  belongs_to :back_tire
end

class Tire < ActiveRecord::Base
end

class FrontTire < Tire
  has_many :motorcycles
end

class BackTire < Tire
  has_many :motorcycles
end 
```

这将允许您使用`Tire.first`，它会返回一个`FrontTire`or的实例`BackTire`，它会有很多`motorcycles`. 这满足您的`Tire.first.motorcycles`要求。

```
m = Motorcycle.new
ft = FrontTire.new # id 1
bt = BackTire.new  # id 2
m.front_tire = ft
m.back_tire = bt
m.save
Tire.first.motorcycles # returns FrontTire #1

# Or, find specifically by tire type
FrontTire.first.motorcycles # all motorcycles with this front-tire
BackTire.first.motorcycles  # all motorcycles with this back-tire 
```

或者，您可以简单地使用通用`tires`关系，因为前轮胎和后轮胎是不同的类：

```
class Motorcycle
  has_many :tires
end

class Tire < ActiveRecord::Base
end

class FrontTire < Tire
  has_many :motorcycles, foreign_key: :tire_id
end

class BackTire < Tire
  has_many :motorcycles, foreign_key: :tire_id
end 
```

Npw`Motorcycle.first.tires`将返回一个包含两个对象的数组，一个是 a 的`FrontTire`实例，一个是 a 的实例`BackTire`。您可能希望添加一个验证器以防止将多个前/后轮胎分配给同一辆摩托车。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-26T15:47:22.117

这根本没有经过测试，但是这样的事情怎么样：

```
has_many :motorcycles,
         :class_name => 'Motorcycle',
         :finder_sql => proc { "select * from motorcycles
                         where front_tire_id = #{id} OR
                         back_tire_id = #{id}" } 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-26T16:18:46.657

我认为这样的事情应该有效

```
class Tire < ActiveRecord::Base
  belongs_to :motorcycle
end 
```

更改`has_many :motercycles`为`belongs_to :motorcycle`

`Motorcycle`有很多轮胎（通过`has_one`） `Tires`属于`motorcycle`

或者你可以使用类似的东西

```
class Motorcycle < ActiveRecord::Base
  has_many :tires
end

class Tire < ActiveRecord::Base
  belongs_to :motorcycle
end 
```

包含`Tire`一个`column position`wich 可以保存正面或背面的值

你可以在模型中创建一些常量来维护那些像

```
class Tire < ActiveRecord::Base
 FROUT 1
 BACK 2
 #....
end 
```

这只是另一种选择:)

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2012-08-26T17:55:52.843

我设法用这组代码解决了它：

```
class Motorcycle < ActiveRecord::Base
  has_many :tire_brands
  has_one :front_tire, class_name: "Tire"
  has_one :back_tire, class_name: "Tire"
end

class Tire < ActiveRecord::Base
  belongs_to :motorcycle
  belongs_to :tire_brand
end

class TireBrand < ActiveRecord::Base
  has_many :tires
  has_many :motorcycles, through: :tires
end 
```

# mongodb - Pymongo 使用字典更新/更新

> ID：12131414
> 
> 赞同：-1
> 
> 时间：2012-08-26T15:36:25.373
> 
> 标签：mongodb, dictionary, pymongo, upsert

我有一个数据字典，例如：

```
dict = [{'name': 'test', 'domain': 'www.example.com', 'rawdata':'dbe318e7'},
{'name': 'test2', 'domain': 'www.example.com', 'rawdata':'dbe318e8'},
{'name': 'test3', 'domain': 'www.example.com', 'rawdata':'dbe318e8'}] 
```

我想使用 pymongo 对 mongodb 进行 upsert，其中 'rawdata' 应该是唯一的，并且我可以使用它：

```
for x in dict:
            myColl.update({'rawdata': x['rawdata']}, x, True) 
```

但这是最好的方法，还是有一个更简单的 upsert 而不在字典上循环？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-26T15:49:15.690

没有其他方法，因为您需要为字典的每个项目提供不同的搜索条件。所以答案是否定的——这与 RDBMS 的行为没有什么不同。

# powershell - PowerShell 3 中的成员枚举如何工作？

> ID：12131416
> 
> 赞同：2
> 
> 时间：2012-08-26T15:36:27.403
> 
> 标签：powershell, powershell-3.0

在 PoweShell 2 中，我们做了：

```
Get-ChildItem | ForEach-Object {$_.LastWriteTime} | Sort-Object 
```

在 Powershell 3 中，我们这样做：

```
(Get-ChildItem).LastWriteTime | Sort-Object 
```

但是它是如何工作的，我在 MSDN 上阅读[了这篇](https://devblogs.microsoft.com/powershell/new-v3-language-features/)博文，他们说它更快，因为 foreach 循环没有运行？那么它如何枚举属性呢？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-08-26T19:46:02.310

PowerShell 正在为我们做艰苦的工作，它在内部循环集合。我喜欢称其为“隐式 foreach”。假设您指定的成员存在于每个对象上，如果您指定的成员是一个属性，您将取回它的值。如果它是一个方法，它会调用每个对象的方法。

在 v2 中，要获取所有进程名称，您必须自己处理循环：

```
Get-Process | Foreach-Object {$_.Name} 
```

在 v3 中，等价于：

```
(Get-Process).Name 
```

同样适用于方法。要杀死名称以 note* 开头的所有进程：

```
(Get-Process note*).Kill() 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-26T17:40:12.830

博客说 foreach-object cmdlet 没有运行。现在它由语言引擎而不是 cmdlet 来处理，从而使其更快。它究竟是如何工作的是内部实现细节，我认为这不是你真正想知道的。

# ruby-on-rails - Rails 与连接表的多态关联

> ID：12131420
> 
> 赞同：0
> 
> 时间：2012-08-26T15:37:01.240
> 
> 标签：ruby-on-rails, polymorphic-associations

我有一张叫做食谱的桌子和一张叫做配料的桌子。成分可以连接到食物或食谱（一个食谱可以包含其他食谱）。我已经用它的食物部分实现了它，但我不确定如何实现它的食谱部分。我创建了另一个表，称为它的食物部分，称为 recipe_as_ingredients，当使用当前食谱中选择作为成分的食谱保存食谱时，我将需要填充该表。如果为食谱删除了行，我可能必须在每次保存之前更新表并手动删除行。有没有更好的方法来实现它？

以下是模型：

```
class Recipe < ActiveRecord::Base
  has_many :ingredients
end

class Ingredient < ActiveRecord::Base
  belongs_to :element, :polymorphic => true
  belongs_to :recipe
end

class Food < ActiveRecord::Base
  has_many :ingredients, :as => :element
end

class RecipeAsIngredient < ActiveRecord::Base
  has_many :ingredients, :as => :element
end 
```

我在保存之前在函数中手动设置了元素类型，因此我需要将配方与成分类似，但请确保 recipe_as_ingredient 包含连接到成分的记录：

```
self.element_id = numid.id
self.element_type = 'Food' 
```

ps 如果没有 recipe_as_ingredients 连接表，我无法连接配方，因为它无法保存记录，因为配方既是主记录又是详细记录，并且 id 字段始终为零。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-26T22:30:03.723

你是如此接近。

移动：has_many :ingredients, :as => :element

进入配方模型。

RecipeAsIngrident 应该存在。如果你想获取食谱中使用的所有食物，那么你需要一个食谱上的函数来总结后代。这将是一个计算的总数，因此您不需要回调来更新总数等，但是我会添加逻辑以防止删除用于其他用途的配方。

询问您是否需要更多说明。

# php - 如何将 setInterval 与 mouseenter 结合使用？

> ID：12131421
> 
> 赞同：2
> 
> 时间：2012-08-26T15:37:10.767
> 
> 标签：php, javascript, jquery, ajax, refresh

我正在尝试使 div 使用 ajax 刷新。代码本身已经实现并且已经运行。我希望 div 每 30 秒刷新一次，但仅在活动选项卡上。据我了解，无论选项卡是否正在使用，setInterval 都会每次刷新。我想将 mouseenter（或暗示用户在网站上处于活动状态的某种其他类型的用户交互）与 setInterval 结合起来，这样 setInterval 在不活动时不会被触发。

目前我有这段代码在初始页面加载时效果很好。在前 30 秒内没有刷新，在 div 上的 mouseenter 之前也没有刷新。然而，在最初的 30 秒后，它会在每个 mouseenter 上刷新。

```
$(document).ready(function(){

    $("#container").hide();
    $("#loading").show();
    $("div#refresh").load('example.com/load.php', function(){ $("#container").show(); $("#loading").hide(); });

    function refresh() {
        $("#refresh").mouseenter(function() {
        //  $("#container").hide();
            $("#loading").show();
            $("div#refresh").load('example.com/load.php', function(){ $("#container").show(); $("#loading").hide(); });
        });
        clearInterval(intervalID);
    }

    var intervalID = setInterval(refresh, 30000); // Will alert every 30 second.
    // clearInterval(intervalID); // Will clear the timer.

}); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-26T15:50:19.607

只需设置鼠标光标在您想要的选项卡中的时间间隔，并在它在外面时清除它：

```
var intervalID, lastRefresh = 0;
$("#refresh").mouseenter(function() {
    var diff = new Date().getTime() - lastRefresh;
    intervalID = setTimeout(function() {
        refresh();
        intervalID = setInterval(refresh, 30000);
    }, 30000 - diff);
}).mouseleave(function() {
    clearInterval(intervalID);
});

function refresh() {
    $("#loading").show();
    $("div#refresh").load('example.com/load.php',
            function(){ $("#container").show(); $("#loading").hide(); });
    lastRefresh = new Date().getTime();
} 
```

现在在`<div>`鼠标进入其边界内的那一刻刷新一次，从那一刻起每 30 秒刷新一次。当鼠标离开时停止`<div>`。

如果鼠标再次进入，它会检查最后一次`refresh`调用该函数的时间。如果不到 30 秒，它会等到 30 秒过去。

**专业提示**：`clearInterval`还清除由 生成的定时事件`setTimeout`，就像`clearTimeout`取消一样`setInterval`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-26T15:53:06.033

试试这个：

```
$(document).ready(function(){
    var intervalID;
    $("#container").hide();
    $("#loading").show();
    $("div#refresh").load('example.com/load.php', function(){ $("#container").show(); $("#loading").hide(); });

function refresh() {
        //  $("#container").hide();
            $("#loading").show();
            $("div#refresh").load('example.com/load.php', function(){ $("#container").show();     $("#loading").hide(); });
    }

 $("#refresh").mouseenter(function() {
     intervalID= setInterval(refresh, 30000); 
  });

$("#refresh").mouseleave(function() {
  clearInterval(intervalID);
 }); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-26T15:56:14.180

```
$(function(){
    var intervalID;
    $("#container").hide();
    refresh();

    function refresh() {
        $("#loading").show();
        $("div#refresh").load('example.com/load.php', function(){
            $("#container").show(); 
            $("#loading").hide(); 
        });
    }
    $("#refresh").on({
        mouseenter: function() {
            intervalID = setInterval(refresh, 30000);
        },
        mouseleave: function() {
            clearInterval(intervalID);    
        }
    });
}); 
```

​</p>

# php - 在 PHP 生成后使用 CSS 在主要类别旁边显示子类别

> ID：12131423
> 
> 赞同：1
> 
> 时间：2012-08-26T15:37:19.430
> 
> 标签：php, jquery, html, css, twitter-bootstrap

1：我的数据库中有一个类别的层次表： ![在此处输入图像描述](../Images/7838a79656c53b3643e53d0af46ac0c4.png)
2：我制作了这个 PHP 脚本，将这个表转换为 HTML：[http://pastie.org/4591869](http://pastie.org/4591869)

3：HTML 如下所示：

```
<script>
                    function toggleSubCategories(button) {
                        button = $(button);
                        button.parent().next().each(function() {
                            $(this).css('display') == 'none' ? $(this).css('display', 'inline') : $(this).css('display', 'none');
                        });
                    }
                </script>
                <div id="catlist">
                    <li>
                        <button onclick="toggleSubCategories(this)" class="btn btn-primary">Lots</button>
                    </li>
                    <ul style="display: inline; ">
                        <li>
                            <button onclick="toggleSubCategories(this)" class="btn btn-info">Town Lots</button>
                        </li>
                        <li>
                            <button onclick="toggleSubCategories(this)" class="btn btn-info">Bux Lots</button>
                        </li>
                        <li>
                            <button onclick="toggleSubCategories(this)" class="btn btn-info">Wild Lots</button>
                        </li>
                    </ul>
                    <li>
                        <button onclick="toggleSubCategories(this)" class="btn btn-primary">Items</button>
                    </li>
                    <ul>
                        <li>
                            <button onclick="toggleSubCategories(this)" class="btn btn-info">Blocks</button>
                        </li>
                        <li>
                            <button onclick="toggleSubCategories(this)" class="btn btn-info">Tools</button>
                        </li>
                        <ul>
                            <li>
                                <button onclick="toggleSubCategories(this)" class="btn btn-success">Enchanted</button>
                            </li>
                            <li>
                                <button onclick="toggleSubCategories(this)" class="btn btn-success">Normal</button>
                            </li>
                        </ul>
                    </ul>
                    <li>
                        <button onclick="toggleSubCategories(this)" class="btn btn-primary">Services</button>
                    </li>
                    <ul style="display: none; ">
                        <li>
                            <button onclick="toggleSubCategories(this)" class="btn btn-info">Trader Services</button>
                        </li>
                        <li>
                            <button onclick="toggleSubCategories(this)" class="btn btn-info">Constructor Services</button>
                        </li>
                        <li>
                            <button onclick="toggleSubCategories(this)" class="btn btn-info">Politician Services</button>
                        </li>
                    </ul>
                    <li>
                        <button onclick="toggleSubCategories(this)" class="btn btn-primary">Labour</button>
                    </li>
                </div> 
```

4：我也有这个 CSS 文件：

```
#catlist {
    list-style: none;
    display: block;
}

#catlist ul {
    list-style: inherit;
    display: none;
}

#catlist ul li {
    display: block;
    list-style: inherit;
}

#catlist button {
    width: 200px;
    height: 50px;
    margin: 5px;
    font-size: 2.5em;
    display: inline;
} 
```

5：目前看起来像这样（在我点击第一个主要类别后）： ![在此处输入图像描述](../Images/75059005e7efcd7bab153e392ec987ea.png) 6：但我希望它像这样： ![在此处输入图像描述](../Images/102b75327fef989c4a19fcf27e840b6d.png)

我究竟做错了什么？我真的把我的头发拉出来了。
我正在使用 CSS3、HTML5、JQuery、PHP 和 Twitter Bootstrap。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-26T16:40:32.157

您需要更改`#catlist ul`. 做：

```
#catlist { position: relative; }
#catlist ul { position: absolute; top: 0; left: 220px; } 
```

尚未测试，但应该可以工作。下次使用代码而不是图片添加 jsfiddle，这将让我们使用您的确切代码并解决您的问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-26T15:49:12.710

我想你正在寻找垂直 CSS 菜单，看看[这个页面](http://users.tpg.com.au/j_birch/plugins/superfish/#examples)

# php - 正则表达式不适用于空字符串

> ID：12131424
> 
> 赞同：1
> 
> 时间：2012-08-26T15:37:23.373
> 
> 标签：php, regex

我想获取单个字符串之间的内容，但是，如果内容为空，则我的正则表达式失败...

```
<?PHP
$string = "
blaat = 'Some string with an escaped \' quote'; // some comment.
empty1 = ''; // omg! an empty string!
empty2 = ''; // omg! an empty string!
";

preg_match_all( '/(?<not>\'.*?[^\\\]\')/ims', $string, $match );

echo '<pre>';
print_r( $match['not'] );
echo '</pre>';
?> 
```

这将作为输出：

```
Array
(
    [0] => 'Some string with an escaped \' quote'
    [1] => ''; // omg! an empty string!
empty2 = '
) 
```

我知道这个问题可以用下面的正则表达式来解决，我想我正在寻找一个真正的解决方案，而不是为每个异常提供修复......

```
preg_match_all( '/((\'\')|(?<not>\'(.*?[^\\\])?\'))/ims', $string, $match ); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-26T16:17:08.157

```
<?php
$string = "
blaat = 'Some string with an escaped \' quote'; // some comment.
empty1 = ''; // omg! an empty string!
empty2 = ''; // omg! an empty string!
not_empty = 'Another non empty with \' quote'; 

";

$parts = preg_split("/[^']*'(.*)'.*|[^']+/", $string, 0, PREG_SPLIT_DELIM_CAPTURE | PREG_SPLIT_NO_EMPTY);

print_r($parts); 
```

将输出

```
大批
(
    [0] => 一些带有转义 \' 引号的字符串
    [1] => 另一个非空的 \' 引号
)

```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-26T23:55:03.553

```
<?PHP
$string = "
blaat = 'Some string with an escaped \' quote'; // some comment.
empty1 = ''; // omg! an empty string!
empty2 = ''; // omg! an empty string!
";

preg_match_all( '/(?<not>
    \'          #match first quote mark
    .*?         #match all characters, ungreedy
    (?<!\\\)    #use a negative lookbehind assertion
    \'
    )
/ixms', $string, $match );

echo '<pre>';
print_r( $match['not'] );
echo '</pre>';

?> 
```

为我工作。我还添加了 /x freespacing 模式以将其隔开一点，使其更易于阅读。

# java - Play 2 - 没有助手的模板

> ID：12131425
> 
> 赞同：2
> 
> 时间：2012-08-26T15:37:30.777
> 
> 标签：java, html, templates, scala, playframework-2.0

```
@inputText(
                signupForm("email"), '_label -> "Email",
                '_help -> "Enter a valid email address."
            ) 
```

我将如何用纯 html 编写这个？

我不知道如何将值添加到 signupForm，以便我可以在控制器中使用它`bindfromRequest()` （在 html 中）

编辑：

我通常使用这种方法

```
final static Form<User> signupForm = form(User.class); 
```

和绑定过程

```
Form<User> filledForm = signupForm.bindFromRequest(); 
```

我的渲染形式如下所示：

```
<div class="control-group ">
  <label class="control-label" for="email">Email</label>
  <div class="controls">

    <input type="text" id="email" name="email" value="" >

    <span class="help-inline"></span>
  </div>
</div> 
```

这对我有用，我只是好奇如何使用纯 html，所以我可以创建自己的小帮手。

编辑2：

```
public static Result blank() {
        return ok(form.render(signupForm));
    } 
```

并在模板本身

```
@(signupForm: Form[User]) 
```

编辑3：

我不知道这是否有帮助，但助手看起来像这样。（对于输入文本）我只是不知道这意味着什么，scala 对我来说看起来真的很神秘。

```
@(field: play.api.data.Field, args: (Symbol,Any)*)(implicit handler: FieldConstructor, lang: play.api.i18n.Lang)

@input(field, args:_*) { (id, name, value, htmlArgs) =>
    <input type="text" id="@id" name="@name" value="@value" @toHtmlArgs(htmlArgs)>
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-26T15:44:38.627

使用您的浏览器检查 Play 编码的源代码并将 HTML 复制/粘贴到您的模板中。

通常，您最感兴趣的是将值正确插入手动创建的字段：

```
<input type="text" name="email" value='@signupForm.field("email").value' /> 
```

设置正确的`name`属性也很重要，否则填写`Form`控制器将失败。

编辑：

当然，在空白操作中，您的 signupForm 是空的，所以没有价值是正常的，在接下来的操作中，让我们命名它`saveBlank`，您需要用请求的数据填写表单，验证并保存。如果表单中存在错误，您需要`form.scala.view`使用从先前请求绑定到表单的数据再次呈现：

```
public static Result saveBlank(){
    signupForm = signupForm.bindFromRequest();
    if (signupForm.hasErrors()){
        return badRequest(form.render(signupForm));
    }

    User user = new User();
    user = signupForm.get();
    user.save();

    return ok("user saved);
} 
```

当然，如果您想编辑现有用户，则必须使用 DB 中的数据预填充它，即：

```
public static Result edit(Long id){
    signupform = signupForm.fill(User.find.byId(id));
    return ok(form.render(signupForm));
} 
```

（注意：我只是从头顶写的，所以请检查是否有错别字或错误）

最后，您不需要在每种情况下都使用 Form 对象，您还可以使用`DynamicForm`：

```
public static Result saySomething(){
    DynamicForm df = form().bindFromRequest();
    return("you entered :" + df.get("email"));
} 
```

甚至在一行中：

```
public static Result sayShorter(){
    return("you entered :" + form().bindFromRequest().get("email"));
} 
```

# iphone - 点击选定行时关闭 UIPickerView

> ID：12131426
> 
> 赞同：1
> 
> 时间：2012-08-26T15:37:33.123
> 
> 标签：iphone, objective-c, ios, uipickerview

我正在使用 UIPickerView 让用户从几个选项中进行选择，当我显示选择器时，我滚动到最后一个选定的行。

当用户选择一行时，我希望始终关闭选择器（即使用户点击已选择的行），我也会在`didSelectRow`方法中关闭选择器。

问题是，如果用户重新选择所选行，`didSelectRow`则不会调用该方法，因此我无法关闭选择器。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-26T15:42:17.917

一种解决方案是创建 UIPickerView 的子类并覆盖该`touchesEnded:withEvent:`方法：

```
- (void)touchesEnded:(NSSet *)touches withEvent:(UIEvent *)event {
    [super touchesEnded:touches withEvent:event];
    // dismiss the picker view here, either directly, or you could notifiy
    // the delegate with a custom message:
    if ([self.delegate respondsToSelector:@selector(pickerViewShouldDismiss:)]) {
        [self.delegate pickerViewShouldDismiss:self];
    }
} 
```

或者你可以添加[`UITapGestureRecognizer`](http://developer.apple.com/library/ios/documentation/UIKit/Reference/UITapGestureRecognizer_Class/Reference/Reference.html)一个`UIPickerView`：

```
UITapGestureRecognizer *tapGR = [UITapGestureRecognizer alloc] initWithTarget:self
                                 action:@selector(pickerViewTapped];
[pickerView addGestureRecognizer:tapGR]; 
```

进而：

```
- (void)pickerViewTapped {
    // dismiss the picker.
} 
```

`UIPickerView`尽管这不会干扰处理水龙头的方式，但我不确定 100% 。

# java - 模拟人类鼠标移动的 Java Robot 类

> ID：12131427
> 
> 赞同：10
> 
> 时间：2012-08-26T15:37:38.583
> 
> 标签：java, awt, mouse

我正在做一个关于远程控制的项目，将光标的 conrdinate x 和 y 从客户端发送到服务器。

但

```
robot.mouseMove(x,y); 
```

只会将光标移动到特定点而不将光标从原始点移动

我找到了这个简单的算法来模拟鼠标的持续移动

```
for (int i=0; i<100; i++){
   int x = ((end_x * i)/100) + (start_x*(100-i)/100);
 int y = ((end_y * i)/100) + (start_y*(100-i)/100);
 robot.mouseMove(x,y);
} 
```

但是这个算法还是太简单了，只是慢慢地从一个点移动到另一个点，还是不像人类的行为。

我已经阅读了一些关于网络远程控制的开源代码，我发现这个项目 [http://code.google.com/p/java-remote-control/](http://code.google.com/p/java-remote-control/) 正在使用从 MouseListener 类调用 MosueMovement 的方法，他们使用它来执行“拖动”。

我想知道有没有人知道这样做的更好方法？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-08-26T15:46:12.460

如果你想让人工动作自然，我认为有几点需要考虑：

1.  人类鼠标的移动通常是轻微的弧线，因为鼠标手围绕手腕旋转。此外，水平运动的弧线比垂直运动更明显。
2.  人类倾向于朝着大方向前进，经常越过目标，然后又回到实际目标。
3.  朝向目标的初始速度非常快（因此出现了前面提到的过冲），然后为了精确瞄准而稍慢一些。但是，如果光标最初靠近目标，则不会发生快速移动（也不会发生过冲）。

不过，这在算法中制定起来有点复杂。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2018-10-20T22:20:02.323

对于未来的任何人：我为 Java 开发了一个模仿人类鼠标移动的库。运动中的噪声/锯齿状、正弦曲线、位置过冲等。另外，编写库时考虑了扩展和配置的可能性，因此如果默认解决方案与案例不匹配，任何人都可以对其进行微调。现在可以从 Maven Central 获得。

[https://github.com/JoonasVali/NaturalMouseMotion](https://github.com/JoonasVali/NaturalMouseMotion)

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-08-26T15:59:00.937

看看我写的这个例子。您可以对此进行改进以模拟 Joey 所说的内容。我写得很快，有很多地方可以改进（算法和类设计）。请注意，我只处理从左到右的运动。

```
import java.awt.AWTException;
import java.awt.MouseInfo;
import java.awt.Point;
import java.awt.Robot;

public class MouseMoving {

    public static void main(String[] args) {
        new MouseMoving().execute();
    }

    public void execute() {
        new Thread( new MouseMoveThread( 100, 50, 50, 10 ) ).start();
    }

    private class MouseMoveThread implements Runnable {

        private Robot robot;
        private int startX;
        private int startY;
        private int currentX;
        private int currentY;
        private int xAmount;
        private int yAmount;
        private int xAmountPerIteration;
        private int yAmountPerIteration;
        private int numberOfIterations;
        private long timeToSleep;

        public MouseMoveThread( int xAmount, int yAmount,
                int numberOfIterations, long timeToSleep ) {

            this.xAmount = xAmount;
            this.yAmount = yAmount;
            this.numberOfIterations = numberOfIterations;
            this.timeToSleep = timeToSleep;

            try {

                robot = new Robot();

                Point startLocation = MouseInfo.getPointerInfo().getLocation();
                startX = startLocation.x;
                startY = startLocation.y;

            } catch ( AWTException exc ) {
                exc.printStackTrace();
            }

        }

        @Override
        public void run() {

            currentX = startX;
            currentY = startY;

            xAmountPerIteration = xAmount / numberOfIterations;
            yAmountPerIteration = yAmount / numberOfIterations;

            while ( currentX < startX + xAmount &&
                    currentY < startY + yAmount ) {

                currentX += xAmountPerIteration;
                currentY += yAmountPerIteration;

                robot.mouseMove( currentX, currentY );

                try {
                    Thread.sleep( timeToSleep );
                } catch ( InterruptedException exc ) {
                    exc.printStackTrace();
                }

            }

        }

    }

} 
```

# java - android通过C获取屏幕大小

> ID：12131429
> 
> 赞同：7
> 
> 时间：2012-08-26T15:37:56.297
> 
> 标签：java, android, android-ndk

我想通过 c 获得屏幕尺寸。我知道 jni 支持从 c 调用 java。但是有没有人知道另一种方法？我的意思是从低级模块获取屏幕大小而不调用 java.lang.

```
import android.app.Activity;
import android.os.Bundle;
import android.util.Log;
import android.view.Menu;

public class MainActivity extends Activity
{

    @Override
    public void onCreate(Bundle savedInstanceState)
    {
    super.onCreate(savedInstanceState);
    Log.v("getWidth", Integer.toString(getWindowManager().getDefaultDisplay().getWidth()));
    Log.v("getHeight", Integer.toString(getWindowManager().getDefaultDisplay().getHeight()));
    }
} 
```

我认为 /dev/graphics 与我的问题有关

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-26T22:18:49.370

是的，您可以从 /dev/graphics/fb0 获取屏幕分辨率，但是（至少在我的手机上），读取权限仅限于 root 和“图形”组中的用户。无论如何，您可以执行以下操作（为清楚起见，删除了错误检查）：

```
// ... other standard includes ...
#include <sys/ioctl.h>
#include <linux/fb.h>

//...

struct fb_var_screeninfo fb_var;
int fd = open("/dev/graphics/fb0", O_RDONLY);
ioctl(fd, FBIOGET_VSCREENINFO, &fb_var);
close(fd);
// screen size will be in fb_var.xres and fb_var.yres 
```

我不确定这些是否被视为“公共”NDK 接口，因为我不知道 Google 是否认为“Android 在 Linux 上运行并使用 Linux Framebuffer 接口”是公共 API 的一部分，但它似乎确实工作。

如果您确实想确保它是可移植的，您可能应该有一个调用 Java WindowManager API 的 JNI 后备。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-24T14:39:20.797

您不需要缓冲区，但如果您从 java 传入 Surface，则*可以*使用 ANativeWindow 类。

```
void Java_com_justinbuser_nativecore_NativeMethods_setSurface(JNIEnv * env, jobject this, jobject surface){
        ANativeWindow nativeWindow = ANativeWindow_fromSurface(env, surface);
    int width =  ANativeWindow_getWidth(renderEngine->nativeWindow);
    int height = ANativeWindow_getHeight(renderEngine->nativeWindow);
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-06-05T20:43:41.000

您还可以在`APP_CMD_INIT_WINDOW`本机活动中像这样处理“应用程序命令”时获取窗口大小：

```
static void engine_handle_cmd(struct android_app* app, int32_t cmd) {
struct engine* engine = (struct engine*)app->userData;
switch (cmd) {
case APP_CMD_INIT_WINDOW:
    if (engine->app->window != NULL) {
        int width = ANativeWindow_getWidth(engine->app->window);
        int height = ANativeWindow_getHeight(engine->app->window);
    } 
```

如果您想知道如何设置结构和回调`main.c`，请查看示例 NDK 项目。`native-activity``engine``engine_handle_cmd`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2019-10-25T18:08:12.250

对于像我这样正在寻找纯 C++ 方法的人来说，阅读`/dev/graphics/fb0`并不能可靠地工作。在许多设备上，它返回一个不正确的结果（在我的设备上它返回 640 X 400）。

对于无法使用`ANativeWindow`or的情况，这是一个问题`ANativeWindow_Buffer`，例如在本机二进制可执行文件中。

**什么对我有用：**

假设您有一部已root 的手机，您可以处理以下命令的输出以可靠地读取分辨率。

```
su -c dumpsys display | grep mBaseDisplayInfo 
```

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2012-08-27T21:19:18.040

要获得屏幕分辨率，您必须使用 struct `ANativeWindow_Buffer`：

```
typedef struct ANativeWindow_Buffer {
    // The number of pixels that are show horizontally.
    int32_t width;

    // The number of pixels that are shown vertically.
    int32_t height;

    // The number of *pixels* that a line in the buffer takes in
    // memory.  This may be >= width.
    int32_t stride;

    // The format of the buffer.  One of WINDOW_FORMAT_*
    int32_t format;

    // The actual bits.
    void* bits;

    // Do not touch.
    uint32_t reserved[6];
} ANativeWindow_Buffer; 
```

要获得它使用功能`ANativeWindow_lock`：

```
/**
 * Lock the window's next drawing surface for writing.
 */
int32_t ANativeWindow_lock(ANativeWindow* window, ANativeWindow_Buffer* outBuffer, ARect* inOutDirtyBounds); 
```

这是[文档](http://mobilepearls.com/labs/native-android-api/)。

如果您正在寻找此功能的用法，请查看名为 的 android-ndk 示例`native-plasma`。

* * *

## 回答 #6

> 赞同：-3
> 
> 时间：2018-06-19T18:45:46.113

这对我有用：

```
DisplayMetrics displaymetrics = new DisplayMetrics();
getWindowManager().getDefaultDisplay().getMetrics(displaymetrics);
int height = displaymetrics.heightPixels;
int width = displaymetrics.widthPixels; 
```

# php - 来自网页的解析结果包含无效的格式文本？

> ID：12131434
> 
> 赞同：0
> 
> 时间：2012-08-26T15:39:23.633
> 
> 标签：php, parsing, html-parsing

在这里，我正在尝试解析网页并获取内容.. [http://www.reuters.com/finance/stocks/companyOfficers?symbol=AOS](http://www.reuters.com/finance/stocks/companyOfficers?symbol=AOS)

这是我的[代码](http://codepad.org/yovOddYi)，它与附加的示例结果一起进行解析。

现在，如果您在示例结果数组中看到，在描述字段中，一些细节的格式无效.. 例如。原始“描述”在网页中包含 (“Bemis”)，但在解析结果中显示为 (├ó┬Ç┬£Bemis├ó┬Ç┬¥)（参见示例结果中的描述字段）。检查 url 的页面源并尝试搜索“Bemis”。可能是什么原因..如何解决它.? 我也试过

```
$html_source = str_replace('“','"',$html_source); 
$html_source = str_replace('”','"',$html_source); 
```

但无法正确处理.. 帮我修改代码，使其给出正确的解析结果。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-26T18:29:46.280

在代码的第 5 行之后添加它对我有用：

```
// First, replace UTF-8 characters.
$html_source = str_replace(
 array("\xe2\x80\x98", "\xe2\x80\x99", "\xe2\x80\x9c", "\xe2\x80\x9d", "\xe2\x80\x93", "\xe2\x80\x94", "\xe2\x80\xa6"),
 array("'", "'", '"', '"', '-', '--', '...'),
 $html_source);

// Next, replace their Windows-1252 equivalents.
$html_source = str_replace(
 array(chr(145), chr(146), chr(147), chr(148), chr(150), chr(151), chr(133)),
 array("'", "'", '"', '"', '-', '--', '...'),
 $html_source); 
```

感谢@Wolfe 在这个 SO 线程中：[Devilish curly quotes](https://stackoverflow.com/questions/12007613/devilish-curly-quotes)

# c++ - QT中QAudioInput bufferSize()和bytesReady()的关系

> ID：12131439
> 
> 赞同：2
> 
> 时间：2012-08-26T15:40:10.167
> 
> 标签：c++, qt, audio, buffer

我试图了解 QT 中 QAudioInput 类的 bufferSize() 和 bytesReady() 之间的关系。假设我有：

```
m_audioInput = new QAudioInput(m_Inputdevice, m_format, this);
bs = m_audioInput->bufferSize();
br = m_audioInput->bytesReady(); 
```

当我查看`bs`and的值`br`（这些是默认值并且我没有更改缓冲区大小）时，我看到它`bs`比`br`. 所以看起来有一个缓冲区可以保存 5 个音频输入数据块。我的问题：

这是一个循环缓冲区吗？如果我有这些：

```
m_input = m_audioInput->start();
connect(m_input, SIGNAL(readyRead()), SLOT(myFunc())); 
```

然后当我执行读取时：

```
MainClass::myFunc()
{
   qint64 l = m_input->read(m_buffer.data(), br);
   .
   .
 } 
```

1.  它是否以循环方式从缓冲区读取？即，如果我在发出 a 之后执行读取 2 次`readyRead()`，缓冲区指针是否从 1 个块移动到第二个块（如果它总共有 5 个块）？
2.  是否有关于缓冲区指针的文档，如果它是循环缓冲区等？
3.  是否有指向缓冲区的自动读写指针？我需要照顾那些，还是自动得到照顾？

非常感谢与此相关的任何帮助和指针。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-27T08:45:11.117

我真的不明白你的用例。首先，我想当你打电话时

```
br = m_audioInput->bytesReady(); 
```

你要么在`QAudio::ActiveState`要么`QAudio::IdleState`。否则`br`只是垃圾。

> 所以看起来有一个缓冲区可以保存 5 个音频输入数据块。

[样本](http://en.wikipedia.org/wiki/Sampling_%28signal_processing%29#Audio_sampling)是音频数据的单位。如果你的意思是 5 个样本，那么它是不正确的。`block`当涉及到非编码数据时，也没有音频之类的东西。

您可以计算缓冲区中有多少秒（或毫秒）的音频：

*   缓冲区大小/样本大小给出#samples
*   1/采样频率为您提供以秒为单位的样本大小
*   样本大小 x #以秒为单位对缓冲区大小进行采样。
*   那是单声道模式（一个通道）。您需要除以通道数

在 Qt 中：

```
 BuffersizeSeconds = (int)((1.0/m_format->sampleRate())
                             *(m_audioInput->bufferSize()/m_format->sampleSize())
                             *(1.0/m_format->channelCount())
                             ); 
```

# php - How to get the DIC from within a data fixture (or anywhere else)?

> ID：12131440
> 
> 赞同：1
> 
> 时间：2012-08-26T15:40:11.183
> 
> 标签：php, symfony, dependency-injection, symfony-2.1

I want to use a [data fixture](http://symfony.com/doc/master/bundles/DoctrineFixturesBundle/index.html) to create users for testing purposes.

The problem is I need the FOS' user manager:

```
$userManager = $container->get('fos_user.user_manager'); 
```

And for that I need the container. So how do I get it? It's not like when inside a controller, I can't do `$this->get('fos_user.user_manager')`.

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-26T17:21:04.270

The easiest [solution](http://symfony.com/doc/master/bundles/DoctrineFixturesBundle/index.html#using-the-container-in-the-fixtures) is to extend Symfony\Component\DependencyInjection\ContainerAware.

```
<?php

namespace SomeCompany\SomeBundle\DataFixtures\MongoDB;

use Doctrine\Common\DataFixtures\FixtureInterface;
use Doctrine\Common\Persistence\ObjectManager;

use Symfony\Component\DependencyInjection\ContainerAware;
use Symfony\Component\DependencyInjection\ContainerInterface;

use SomeCompany\SomeBundle\Document\User;

class LoadUsers extends ContainerAware implements FixtureInterface
{   
    /**
     * {@inheritDoc}
     */
    public function load(ObjectManager $manager)
    {
        $userManager = $this->container->get('fos_user.user_manager');
        $user = $userManager->createUser();

        $user->setUsername('myuser');
        $user->setEmail('a@a.com');

        $user->setPlainPassword('mypass');
        $user->addRole('ROLE_USER');
        $user->setEnabled(true);
        $userManager->updateUser($user);
    }
} 
```

If you are already extending another class, then you have to implement the ContainerAwareInterface, which takes just a few extra lines of code.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-22T14:24:26.063

Unfortunately, this only works of you use the console. Loading fixtures via the API does not work well with container awareness and leads to errors, freezes and other issues.

# mysql - 数据库中的数据库（表设计）

> ID：12131443
> 
> 赞同：1
> 
> 时间：2012-08-26T15:40:39.520
> 
> 标签：mysql, sql, sql-server, oracle, postgresql

> **可能重复：**
> [动态创建表的数据库设计](https://stackoverflow.com/questions/12127814/database-design-to-create-tables-on-the-fly)

我需要在数据库中创建一个数据库。这个问题与[此](https://stackoverflow.com/questions/12127814/database-design-to-create-tables-on-the-fly)有关。我将尝试详细解释我正在尝试做的事情并提供代码示例。基本上，我希望能够在数据库中创建动态表。例如，我将有一个网页，允许用户使用列和数据创建自己的表。这是我想出的数据库设计：

```
aColumn
aDataType
aRow
aTable
zBit
zDateTime
zMoney
zNumber
zText 
```

以 a 开头的表是`z`特定数据进入的数据，例如整数、日期时间值等。aColumn 是属于特定表的列。aRow 标识 aTable 中的特定行。这是数据库设计：

```
aTable: Id, name
aColumn: Id, Name, aTable, aDataType
aDataType: Id, Name
aRow: Id, aTable
zBit: Id, aRow, aColumn, Data(Bit)
zDateTime: Id, aRow, aColumn, Data (DateTime)
zMoney: Id, aRow, aColumn, Data (Money)
zNumber: Id, aRow, aColumn, Data (INT)
zText: Id, aRow, aColumn, Data (nvarchar(MAX)) 
```

这是我用来启动和运行它的一些示例数据：

**一张桌子**

```
Id          Name
1           Users 
```

**a列**

```
Id          Name           aTable       aDataType
1           Name           1            2
2           UserId         1            1
3           Occupation     1            2 
```

**数据类型**

```
Id          Name
1           Number
2           Text 
```

**一排**

```
Id          aTable
1           1
2           1 
```

**一个号码**

```
Id          aRow           aColumn      Data
1           1              1            1245
2           2              2            56 
```

**文本**

```
Id          aRow           aColumn      Data
1           1              1            Sara
2           2              1            Jake 
```

所有其他 z* 表为空白

这是创建动态表的查询：

```
select t.[Id] as [Table], c.Name as [Column], dt.Name as [DataType], r.[Id] as [Row], cast(v.Data as nvarchar(MAX)) as Data from [pod].[dbo].[aTable] t
INNER JOIN [pod].[dbo].[aColumn] c on t.Id = c.[aTable]
INNER JOIN [pod].[dbo].[aDataType] dt on c.[aDataType] = dt.Id
INNER JOIN [pod].[dbo].[aRow] r on t.[Id] = r.[aTable]
INNER JOIN [pod].[dbo].[zBit] v on c.[Id] = v.aColumn and r.[Id] = v.[aRow]
UNION ALL
select t.[Id] as [Table], c.Name as [Column], dt.Name as [DataType], r.[Id] as [Row], cast(v.Data as nvarchar(MAX)) as Data from [pod].[dbo].[aTable] t
INNER JOIN [pod].[dbo].[aColumn] c on t.Id = c.[aTable]
INNER JOIN [pod].[dbo].[aDataType] dt on c.[aDataType] = dt.Id
INNER JOIN [pod].[dbo].[aRow] r on t.[Id] = r.[aTable]
INNER JOIN [pod].[dbo].[zDateTime] v on c.[Id] = v.aColumn and r.[Id] = v.[aRow]
UNION ALL
select t.[Id] as [Table], c.Name as [Column], dt.Name as [DataType], r.[Id] as [Row], cast(v.Data as nvarchar(MAX)) as Data from [pod].[dbo].[aTable] t
INNER JOIN [pod].[dbo].[aColumn] c on t.Id = c.[aTable]
INNER JOIN [pod].[dbo].[aDataType] dt on c.[aDataType] = dt.Id
INNER JOIN [pod].[dbo].[aRow] r on t.[Id] = r.[aTable]
INNER JOIN [pod].[dbo].[zMoney] v on c.[Id] = v.aColumn and r.[Id] = v.[aRow]
UNION ALL
select t.[Id] as [Table], c.Name as [Column], dt.Name as [DataType], r.[Id] as [Row], cast(v.Data as nvarchar(MAX)) as Data from [pod].[dbo].[aTable] t
INNER JOIN [pod].[dbo].[aColumn] c on t.Id = c.[aTable]
INNER JOIN [pod].[dbo].[aDataType] dt on c.[aDataType] = dt.Id
INNER JOIN [pod].[dbo].[aRow] r on t.[Id] = r.[aTable]
INNER JOIN [pod].[dbo].[zMoney] v on c.[Id] = v.aColumn and r.[Id] = v.[aRow]
UNION ALL
select t.[Id] as [Table], c.Name as [Column], dt.Name as [DataType], r.[Id] as [Row], cast(v.Data as nvarchar(MAX)) as Data from [pod].[dbo].[aTable] t
INNER JOIN [pod].[dbo].[aColumn] c on t.Id = c.[aTable]
INNER JOIN [pod].[dbo].[aDataType] dt on c.[aDataType] = dt.Id
INNER JOIN [pod].[dbo].[aRow] r on t.[Id] = r.[aTable]
INNER JOIN [pod].[dbo].[zNumber] v on c.[Id] = v.aColumn and r.[Id] = v.[aRow]
UNION ALL
select t.[Id] as [Table], c.Name as [Column], dt.Name as [DataType], r.[Id] as [Row], cast(v.Data as nvarchar(MAX)) as Data from [pod].[dbo].[aTable] t
INNER JOIN [pod].[dbo].[aColumn] c on t.Id = c.[aTable]
INNER JOIN [pod].[dbo].[aDataType] dt on c.[aDataType] = dt.Id
INNER JOIN [pod].[dbo].[aRow] r on t.[Id] = r.[aTable]
INNER JOIN [pod].[dbo].[zText] v on c.[Id] = v.aColumn and r.[Id] = v.[aRow] 
```

这是此查询的一部分：

```
select t.[Id] as [Table], c.Name as [Column], dt.Name as [DataType], r.[Id] as [Row], cast(v.Data as nvarchar(MAX)) as Data from [pod].[dbo].[aTable] t
INNER JOIN [pod].[dbo].[aColumn] c on t.Id = c.[aTable]
INNER JOIN [pod].[dbo].[aDataType] dt on c.[aDataType] = dt.Id
INNER JOIN [pod].[dbo].[aRow] r on t.[Id] = r.[aTable]
INNER JOIN [pod].[dbo].[zText] v on c.[Id] = v.aColumn and r.[Id] = v.[aRow] 
```

正如您在此处看到的，一条数据（z* 表）由一行和一列标识。当我运行这个查询时，我得到这个：

**结果**

```
Table       Column         DataType     Row           Data
1           UserId         Number       1             1245          
1           UserId         Number       2             56
1           Name           Text         1             Sara
1           Name           Text         2             Jake 
```

**这是我想要的结果：（如果列未知**，我不确定如何将这些行转换为列）

```
Row         UserId       Name
1           1245         Sara
2           56           Jake 
```

* * *

**大问题** 该表假设有 3 列还记得吗？

**a列**

```
Id          Name           aTable       aDataType
1           Name           1            2
2           UserId         1            1
3           Occupation     1            2 
```

* * *

所以我最终的预期结果是：

```
Row         UserId       Name         Occupation
1           1245         Sara         NULL
2           56           Jake         NULL 
```

在结果中，我还需要对列进行排序。这甚至可能吗。哪些数据库支持这种功能。我对任何可以做到这一点的数据库都持开放态度。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-26T15:50:26.003

然后，您可能希望查看数据的[实体属性值模型 (EAV)](http://en.wikipedia.org/wiki/Entity%E2%80%93attribute%E2%80%93value_model)设计。

基本上，您可以拥有一个带有表名的表，以及表上的一些其他元数据。

然后，您可以为这些行中的每一行创建一个表以包含列数据，例如数据类型和名称。

然后，您有一个表格，您可以在其中将每列的值放在一个长表格中。

这允许您动态创建表，或动态添加/删除行。

有关关系和 EAV 的比较，您可以查看以下问题：

[实体属性值数据库与严格的关系模型电子商务](https://stackoverflow.com/questions/870808/entity-attribute-value-database-vs-strict-relational-model-ecommerce-question)

但是，如果您想获得这些数据的关系视图，那么您将需要创建触发器来帮助使视图保持最新，这可能需要大量工作才能使其正常工作。如果您不需要关系视图，那么您应该没问题。

另一种方法是使用 NoSQL 数据库 ( [http://en.wikipedia.org/wiki/NoSQL](http://en.wikipedia.org/wiki/NoSQL) )，因为不必设置架构，因此您只需存储该行所需的列.

在这一点上，我会采用 NoSQL 方式，因为有许多数据库可以工作，而且你需要做的重新发明是最小的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-27T02:00:17.373

对于问题的最后一部分，您要问如何对 EAV 模式进行[交叉表查询。](http://en.wikipedia.org/wiki/Cross_tabulation)一些数据库通过对 SQL 标准的扩展来支持这一点，而另一些则根本不支持。为了可移植性，您必须在您的应用程序中执行此操作。PostgreSQL为此[在 tablefunc 扩展](http://www.postgresql.org/docs/current/static/tablefunc.html)中提供了交叉表函数。

如果你走[EAV](http://en.wikipedia.org/wiki/Entity%E2%80%93attribute%E2%80%93value_model)的道路，你迟早会后悔的。它在某些有限的情况下很有用，但它不适合关系模型，并会导致很多痛苦和问题，其中最重要的是性能很差。

改为考虑：

*   如果可能的话，重新设计，这样你就不需要动态模式。在您的情况下可能不可能，因为您的明确要求是基于 Web 的数据库应用程序的用户可编辑模式，但在大多数情况下，这是正确的选择。

*   `ALTER TABLE`使用,等动态创建/删除模式`CREATE TABLE`。一些数据库在这方面比其他数据库要好得多。PostgreSQL 的事务 DDL 可以提供很多帮助。需要小心以避免这成为性能和维护的噩梦，但如果您尝试使用动态结构对关系数据库进行建模，这可能是最明智的选择。

*   针对类似 EAV 的查询进行了优化的键/值存储；请参阅[键/值存储](http://en.wikipedia.org/wiki/NoSQL#Key-value_store)。请注意，这些系统中有许多不提供完整的 ACID 语义，并且可能具有有限的查询语言，因此您可以在应用程序中做更多的工作。

*   在数据库中存储 XML 或 JSON。您可以使用关系数据库来做到这一点，但使用文档数据库可能会更好。适用与 K/V 商店相同的警告。如果您在应用程序中执行所有查询逻辑并且您的数据大小不太大，则此方法可以正常工作。

*   在需要时使用PostgreSQL 等特定于数据库的功能`hstore`来支持任意键/值存储，并在不需要 k/v 的情况下使用标准关系设计。如果您希望将关系作为输出，它仍然是一个主要的 PITA，它涉及低效的交叉表查询和连接。

[克里斯](https://stackoverflow.com/users/571563/chris-shain)提出了一个很好的观点：你的整个设计非常可疑。请参阅：[内部平台效应](http://en.wikipedia.org/wiki/Inner-platform_effect)和[TDWTF 对其的看法](http://thedailywtf.com/Articles/The_Inner-Platform_Effect.aspx)。说真的，不要去那里。

# android - StackOverflowError 关闭选项卡活动的 dbhelper

> ID：12131446
> 
> 赞同：0
> 
> 时间：2012-08-26T15:40:58.003
> 
> 标签：android

我有一个`TabActivity`和两个与同一个数据库相关的列表的活动。

我看到子活动的方法在's`onDestroy()`之前被调用，所以我的子活动方法是：`TabActivity``onDestroy()``onDestroy()`

```
listAdapter.getCursor().close();
dataSource = null; 
```

而 tabActivity 是：

```
DBHelper.getHelper(getApplicationContext()).close(); 
```

`DBHelper`单例类在哪里扩展`SQLiteOpenHelper`。

`TabActivity`的`onDestroy()`导致堆栈溢出错误...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-26T17:03:05.763

我的错...我调用了我的方法 close() （因此覆盖了原始方法）并且在方法定义中我没有调用 super.close() （为了实际关闭数据库）而是调用了被覆盖的方法，从而导致了无休止的递归！

# asp.net-mvc-3 - MVC 3/4 将参数从控制器传递到另一个控制器

> ID：12131447
> 
> 赞同：0
> 
> 时间：2012-08-26T15:41:03.230
> 
> 标签：asp.net-mvc-3, asp.net-mvc-4

我有一个登录表单，它要求输入用户名、密码、令牌ID（每个用户都知道他的令牌，他们得到它来访问 API）。我希望能够获取他们输入的令牌 API 并将其传递给 /Home/Index。这样做的最佳方法是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-26T15:46:51.027

好的，首先你有一个用户将进入的视图`UserName`，`Password`所以`TokenId`让视图有一个如下所示的模型。

```
public class LoginModel{

public string UserName{get; set;} 
public string Password{get; set;}
public string TokenId{get; set;}
} 
```

从视图中您可以返回这个模型，它将保存所有这些值。

现在，当您需要将这些值传递给您时，`Home/Index`您可以将表单提交给`Index`操作。

```
public ActionResult Index(LoginModel model)
{
 string gotcha = model.TokenId;
} 
```

但是，如果您想将表单提交给不同的操作，例如控制器“登录”，然后将此值传递给不同的控制器，您可以执行类似的操作。

```
// defined in Login Controller
public ActionResult Index(LoginModel model)
{
 TempData["TokenId"] = model.TokenId;
 return RedirectToAction("Dashboard","Account");
}

// defined in Account Controller
public ActionResult Dashboard()
{
 string gotVal = TempData["TokenId"]

} 
```

还有更多方法可以在两个动作之间传递值，请参阅[此链接](https://stackoverflow.com/a/3364045/1182982)

# rest - 包含身份验证秘密和应用 ID 的 URL

> ID：12131451
> 
> 赞同：0
> 
> 时间：2012-08-26T15:41:45.753
> 
> 标签：rest, uri

我们收到了创建 REST api 的请求。我对我们客户提供的示例感到有些困惑。正如您在下面看到的，他们已经在@ 之前的 URL 中识别了 app_id 和 secret。URI 的其余部分看起来像我所期望的。

这是有效的吗？我想这可能是我以前从未见过的一些奇怪的 cURL 格式。

```
https://{application_id}:{api_secret}@api.example.com/entity/{entity_id}/ 
https://{application_id}:{api_secret}@api.example.com/entity/{entity_id}/entity_locations/{locations_id}/ 
```

只是看看是否有人以前见过这种格式？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-26T15:59:09.103

URI 由[多个部分组成](http://en.wikipedia.org/wiki/URI_scheme#Generic_syntax)，其中一个是**权限**部分，可以包含可选`username:password`元素。

完整的方案是：

```
scheme://username:password@domain:port/path?query_string#fragment_id 
```

这样，您的 REST api 将保持**无状态**[不依赖于以前的应用程序状态，例如在会话中存储内容]。但我建议您不要明确地使用该`username:password@stuff`路由，而是依赖[Basic HTTP Auth](http://en.wikipedia.org/wiki/Basic_access_authentication)，因此至少以 Base64 编码发送凭据。

* * *

编辑：现在您要询问有关 BasicAuth 的简短说明-事情是这样的：

*   您提出请求`http://johndoe:12345@service/api/foo/bar`；
*   凭证好吗？好的，您会得到`200 OK`适当的响应；
*   他们不是吗？你得到`401 Unauthorized`回应。

在后一种情况下，**浏览器**[或执行请求的任何其他程序/脚本] 应该通过登录弹出窗口提示用户。

通常浏览器会要求您缓存凭据而不是每次都询问它们，但这并不意味着它们不会被发送 - 只是对受保护资源的每个请求都带有这样的标头：

```
Authorization Basic base64encode(username:password) 
```

您对字符串`base64encode`进行编码的自定义方式在哪里。`username:password`

# c# - 从另一个线程 _and_ 类更新 WinForm 控件

> ID：12131453
> 
> 赞同：3
> 
> 时间：2012-08-26T15:42:03.380
> 
> 标签：c#, winforms, multithreading, class, controls

我正在制作一个 WinForms 程序，它需要单独的线程为了可读性和可维护性，我已将所有非 GUI 代码分成不同的类。该类还“生成”另一个类，该类进行一些处理。但是，我现在遇到了需要从在不同类中启动的线程更改 WinForms 控件（将字符串附加到文本框）的问题

我四处搜索，找到了不同线程和不同类的解决方案，但并非两者兼而有之，提供的解决方案似乎不兼容（对我而言）

然而，这可能是最大的“线索”：[How to update UI from another thread running in another class](https://stackoverflow.com/questions/9602567/how-to-update-ui-from-another-thread-running-in-another-class)

类层次结构示例：

```
class WinForm : Form
{
    ...
    Server serv = new Server();
}

// Server is in a different thread to winform
class Server
{
    ...
    ClientConnection = new ClientConnection();
}

// Another new thread is created to run this class
class ClientConnection
{
    //Want to modify winform from here
} 
```

我知道事件处理程序可能是要走的路，但我不知道在这种情况下如何做（我也愿意接受其他建议；））

任何帮助表示赞赏

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-08-26T16:25:45.987

您从哪个班级更新表单并不重要。WinForm 控件必须在创建它们的同一线程上更新。

因此，Control.Invoke 允许您在控件自己的线程上执行方法。这也称为异步执行，因为调用实际上是排队并单独执行的。

[从 msdn](http://msdn.microsoft.com/en-us/library/a1hetckb.aspx)看这篇文章，例子和你的例子差不多。单独线程上的单独类更新窗体上的列表框。

----- 更新在这里你不必将它作为参数传递。

在您的 Winform 类中，有一个可以更新控件的公共委托。

```
class WinForm : Form
{
   public delegate void updateTextBoxDelegate(String textBoxString); // delegate type 
   public updateTextBoxDelegate updateTextBox; // delegate object

   void updateTextBox1(string str ) { textBox1.Text = str1; } // this method is invoked

   public WinForm()
   {
      ...
      updateTextBox = new updateTextBoxDelegate( updateTextBox1 ); // initialize delegate object
    ...
    Server serv = new Server();

} 
```

从 ClientConnection 对象中，您必须获得对 WinForm:Form 对象的引用。

```
class ClientConnection
{
   ...
   void display( string strItem ) // can be called in a different thread from clientConnection object
   {
         Form1.Invoke( Form1.updateTextBox, strItem ); // updates textbox1 on winForm
   }
} 
```

在上述情况下，'this' 没有通过。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-08-26T16:17:43.337

你可以使用 backgroundworker 来创建你的其他线程，它可以让你轻松处理你的 GUI

[http://msdn.microsoft.com/en-us/library/cc221403(v=vs.95).aspx](http://msdn.microsoft.com/en-us/library/cc221403(v=vs.95).aspx)

# php - PHPUnit 和模拟对象不起作用

> ID：12131454
> 
> 赞同：2
> 
> 时间：2012-08-26T15:42:07.050
> 
> 标签：php, object, mocking, phpunit, stubs

我不确定我做错了什么，或者它是 PHPUnit 和模拟对象的错误。基本上我正在尝试测试是否在触发`$Model->doSomething()`时被调用。`$Model->start()`

我在 VirtualBox 中使用 Ubuntu，并通过 pear 安装 phpunit 1.1.1。

完整代码如下。任何帮助将不胜感激，这让我发疯。

```
<?php
require_once 'PHPUnit/Autoload.php';

class Model
{
    function doSomething( ) {
        echo 'Hello World';
    }

    function doNothing( ) { }

    function start( ) {
        $this->doNothing();
        $this->doSomething();
    }
}

class ModelTest extends PHPUnit_Framework_TestCase
{
    function testDoSomething( )
    {
        $Model = $this->getMock('Model');
        $Model->expects($this->once())->method('start'); # This works
        $Model->expects($this->once())->method('doSomething'); # This does not work
        $Model->start();
    }
}
?> 
```

PHPUnit 的输出：

```
There was 1 failure:

1) ModelTest::testDoSomething
Expectation failed for method name is equal to <string:doSomething> when invoked 1 time(s).
Method was expected to be called 1 times, actually called 0 times.

FAILURES!
Tests: 1, Assertions: 1, Failures: 1. 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-26T20:26:33.153

如您所见，您需要告诉 PHPUnit 要模拟哪些方法。另外，我会避免对您直接从测试中调用的方法产生期望。我会这样写上面的测试：

```
function testDoSomething( )
{
    $Model = $this->getMock('Model', array('doSomething');
    $Model->expects($this->once())->method('doSomething');
    $Model->start();
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-27T23:48:24.860

只是为了解释为什么大卫哈克尼斯的答案有效，如果你没有指定 $methods 参数，`getMock`那么类中的*所有*函数都会被模拟。顺便说一句，您可以通过以下方式确认：

```
class ModelTest extends PHPUnit_Framework_TestCase
{
    function testDoSomething( )
    {
        $obj = $this->getMock('Model');
        echo new ReflectionClass(get_class($obj));
        ...
    }
} 
```

那么，为什么会失败呢？因为你的`start()`函数也被嘲笑了！即您给出的函数体已被替换，因此您的`$this->doSomething();`行永远不会运行。

因此，当您的类中有任何函数需要保留时，您必须明确给出所有其他函数的列表。

# ruby-on-rails - 使用 FactoryGirl 在 Capybara 的 rspec 测试中未填充 collection_select

> ID：12131455
> 
> 赞同：1
> 
> 时间：2012-08-26T15:42:13.743
> 
> 标签：ruby-on-rails, rspec, capybara, factory-bot, rspec-rails

我正在尝试使用 capybara 测试从 collection_select 元素中选择一个值，并且由于某种原因，在运行 rspec 时填充 collection_select 的数据不存在，但在运行 rails 应用程序时却存在。

例子：

**html定义**

```
<%= form_for(@notification) do |f| %>

    <%= f.label :device, "Select a Device to notify:" %>
    <%= f.collection_select :device_id, Device.all, :id, :device_guid, prompt: true %>

<% end %> 
```

**rspec 定义**

```
describe "NotificationPages" do

  subject { page }

  let(:device) { FactoryGirl.create(:device) }
  let(:notification) { FactoryGirl.create(:notification, device: device) }

  describe "new notification" do
    before { visit new_notification_path }

    let(:submit) { "Create Notification" }

    describe "with valid information" do
      before do
        select(device.device_guid, from: 'notification_device_id')
        fill_in "Message", with: "I am notifying you."
      end

      it "should create a notification" do
        expect { click_button submit }.to change(Notification, :count).by(1)
      end
    end
  end
end 
```

运行测试时，我收到以下错误消息：

```
Capybara::ElementNotFound: cannot select option, no option with text 'device_guid' in select box 'notification_device_id' 
```

看起来`Device.all`collection_select 中的调用在测试期间没有返回任何内容。关于我做错了什么的任何想法？

谢谢，佩里

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-14T05:28:10.453

强制对 let 进行早期评估的更好方法是使用 !，如下所示：

```
let!(:device) { FactoryGirl.create(:device) } 
```

这样你就不需要额外的代码行。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-26T16:10:51.960

在您访问 new_notification_path 时，数据库中没有设备。发生这种情况是因为 let 是惰性求值的，所以它定义的方法在您第一次调用它时被调用，这在您的测试中仅在您执行`select(device.device_guid ...)`语句时发生。

为确保在访问路径之前创建设备，您可以在 before 块中调用“设备”。

```
before do
  device
  visit new_notification_path
end 
```

# ruby-on-rails-3 - 登录重定向后设计 - 双重渲染错误

> ID：12131467
> 
> 赞同：4
> 
> 时间：2012-08-26T15:43:19.040
> 
> 标签：ruby-on-rails-3, devise

我正在使用 rails 3.2 和 Devise（最新版本）

主要思想是在登录后测试当前登录用户的一些变量。因此，例如，如果用户有待创建地址，我想重定向新地址路径。但我得到的是双重渲染错误。

这是代码

```
class ApplicationController < ActionController::Base
  protect_from_forgery

 # Devise: Where to redirect users once they have logged in
  def after_sign_in_path_for(resource)

        if current_user.is? :company_owner
            if $redis.hget(USER_COMPANY_KEY, current_user.id).nil?
                redirect_to new_owner_company_path and return
            else
                @addr_pending = $redis.hget(PENDING_ADDRESS_KEY,current_user.id)
                unless @addr_pending.nil? || !@addr_pending
                     redirect_to owner_company_addresses_path  and return
                end
            end
        end
        root_path
  end
end 
```

我的路线定义

```
 root :to => "home#index"
    devise_for :users, :controllers => { 
    :omniauth_callbacks => "users/omniauth_callbacks" 
  }
    resources :users, :only => :show

    namespace :owner do
        resource :company  do # single resource /owner/company
            get 'thanks'
            get 'owner' #TODO: esto hay que sacarlo de aquí y forme parte del login
            resources :addresses
        end
    end 
```

因此，当我使用创建了 pedding 地址的用户登录时，我得到

```
"render and/or redirect were called multiple times in this action. Please note that you may only call render OR redirect, and at most once per action. Also note that neither redirect nor render terminate execution of the action, so if you want to exit an action after redirecting, you need to do something like "redirect_to(...) and return". 
```

出什么问题了？

```
 redirect_to owner_company_addresses_path  and return 
```

所以，我只想重定向到新的地址路径。我不明白为什么我会收到错误消息。

提前致谢。

- - 编辑 - -

似乎只需要返回一个路径（我认为使用 redirect_to 和 return 就足够了，但事实并非如此）

```
def after_sign_in_path_for(resource)

        @final_url = root_path
        if current_user.is? :company_owner
            if $redis.hget(USER_COMPANY_KEY, current_user.id).nil?
                @final_url = new_owner_company_path
            else
                @addr_pending = $redis.hget(PENDING_ADDRESS_KEY,current_user.id)
                unless @addr_pending.nil? || !@addr_pending
                     @final_url = owner_company_addresses_path
                end
            end
        end
        @final_url
  end 
```

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-08-26T20:05:10.623

您应该删除`redirect_to`方法调用和`return`语句。`after_sign_in_path_for`应该只返回一个路径：

例如：

```
def after_sign_in_path_for(resource)
  new_owner_company_path
end 
```

# c++ - 如何在 C++ 中集成一个函数

> ID：12131468
> 
> 赞同：-6
> 
> 时间：2012-08-26T15:43:18.230
> 
> 标签：c++

我正在学习 C++，但找不到以下问题的答案：

我有一个公式，可以根据用户输入计算两个数字的结果​​。

*   包含此公式的头文件（“.h”）应该如何？
*   如何从源代码（“.cpp”）中获取公式？
*   如何将结果传递给源代码（“.cpp”）？

对于你们这些老前辈来说，这不是一个话题。我在哪里可以找到关于 C++ 的好教程？

问候，迪诺

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-26T15:53:44.377

最好的教程可以在书中找到。有很多关于 SO 的主题以及好书推荐。

在 C++ 中，独立函数应该分组在命名空间中或作为`static`类成员（但前提是它们在逻辑上连接到类）。

对于您的情况，我会选择`namespace`. 尽管如此，还是有 3 种可能性，其中 2 种是可取的：

1）在头文件中*声明*函数并在源文件中*定义它：*

```
//formulas.h
#ifndef FORMULAS_H
#define FORMULAS_H
namespace Formulas
{
   int myFormula(int,int);
};
#endif 
```

预处理器指令包括警卫（你可以用谷歌搜索）。在此之后，您在源文件中定义它：

```
//formulas.cpp

#include "formulas.h"
namespace Formulas
{
    int myFormula(int, int)
    {
       //....
       return 42;
    }
} 
```

2）在头文件中声明和定义函数为`inline`（这将防止函数的多个定义）。通常使用频繁调用的相对较小的函数来完成，以防止调用开销并允许更好的优化：

```
//formulas.h
#ifndef FORMULAS_H
#define FORMULAS_H
namespace Formulas
{
   inline int myFormula(int,int)
   {
       //...
       return 42;
   }
};
#endif 
```

3) 在头文件中声明和定义函数，标记它`static`。这不是首选，因为它将为每个包含标题的翻译单元创建函数的副本。

要使用该函数，您只需要包含声明它的标头并调用它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-26T15:45:53.773

头文件 (*.h)

```
int add(int a, int b); 
```

cpp 文件顶部的源文件 (*.cpp)

```
#include "yourheader.h" 
```

然后在 cpp 文件中的任何位置

```
...
int result=add(5,6);
... 
```

# c# - 如何通过 linq to xml 选择元素

> ID：12131469
> 
> 赞同：0
> 
> 时间：2012-08-26T15:43:31.293
> 
> 标签：c#, xml, linq-to-xml

我如何通过 linq to xml 选择`ip`和`port`元素形成这个 xml 文件

```
<?xml version="1.0" encoding="utf-8"?>
<settings>
  <IncomingConfig>
    <ip>10.100.101.18</ip>
    <port>5060</port>
  </IncomingConfig>
  <Device>
    <username>tarek</username>
    <AgentName>tarek</AgentName>
    <password>ffff</password>

  </Device>
  <Device>
    <username>adf</username>
    <AgentName>adf</AgentName>
    <password>fadsf</password>

  </Device>
</settings> 
```

我写了这段代码但不工作

```
 XDocument doc = XDocument.Load(CONFIGURATION_FULL_PATH);
            var port = int.Parse(doc.XPathSelectElement("port").Value);
            var localIpAdres = doc.XPathSelectElement("ip").Value; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-26T15:51:14.677

如果您已将文件加载到`doc`变量中，您只需要

```
string localIpAddress = doc.Root.Element("IncomingConfig").Element("ip").Value;
string port = doc.Root.Element("IncomingConfig").Element("port").Value; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-26T15:52:09.317

尝试

```
doc.XPathSelectElement("//port").Value 
```

参数必须是 XPath 表达式。

# python - 交叉验证的附加拟合参数

> ID：12131472
> 
> 赞同：4
> 
> 时间：2012-08-26T15:43:49.433
> 
> 标签：python, machine-learning, scikit-learn, cross-validation

使用`scikit-learn`时，有没有办法将附加参数传递`fit`给分类器的方法`cross_val_score`？例如，您将如何为分类器指定`sample_weight`or ：`class_prior``MultinomialNB`

[`scikit-learn`的页面关于`MultinomialNB`](http://scikit-learn.org/dev/modules/generated/sklearn.naive_bayes.MultinomialNB.html)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-26T17:11:15.340

我按照建议做了，并自己实现了该功能，该功能已添加到 0.13 版本中，如下所示`fit_params`：

[https://scikit-learn.org/stable/modules/generated/sklearn.model_selection.cross_val_score.html](https://scikit-learn.org/stable/modules/generated/sklearn.model_selection.cross_val_score.html)

# ruby-on-rails - 如何设置 Sunspot 以搜索字符序列而不是单词？

> ID：12131473
> 
> 赞同：3
> 
> 时间：2012-08-26T15:44:00.573
> 
> 标签：ruby-on-rails, sunspot, sunspot-rails

我想了解 Sunspot 在标准模式下是否在全文搜索中搜索单词或字符序列，以及如何使其搜索序列。

例如，我有以下设置：

```
class User < ActiveRecord::Base
   searchable do
      text :email
   end
end 
```

与一个`User`电子邮件“panayotis@matsinopoulos.gr”

以下查询：

```
search = User.search do 
   fulltext 'matsinopoulos'
end 
```

不会带来任何结果，而：

```
search = User.search do
   fulltext 'panayotis@matsinopoulos.gr'
end 
```

带来。

太阳黑子是否有任何配置设置来匹配字符序列而不是单词？

或者，我做错了什么？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-27T11:01:02.140

一、需要配置文件：

```
solr/conf/schema.xml 
```

标准输入：

```
<fieldType name="text" class="solr.TextField" omitNorms="false">
  <analyzer>
    <tokenizer class="solr.StandardTokenizerFactory"/>
    <filter class="solr.StandardFilterFactory"/>
    <filter class="solr.LowerCaseFilterFactory"/>
  </analyzer>
</fieldType> 
```

必须转向：

```
<fieldType name="text" class="solr.TextField" omitNorms="false">
  <analyzer type="index">
    <tokenizer class="solr.StandardTokenizerFactory"/>
    <filter class="solr.StandardFilterFactory"/>
    <filter class="solr.LowerCaseFilterFactory"/>
    <filter class="solr.NGramFilterFactory"
            minGramSize="3"
            maxGramSize="30"/>
  </analyzer>
  <analyzer type="query">
    <tokenizer class="solr.StandardTokenizerFactory"/>
    <filter class="solr.StandardFilterFactory"/>
    <filter class="solr.LowerCaseFilterFactory"/>
  </analyzer>`
</fieldType> 
```

可以在此处找到有关 Solr 配置的非常好的参考：

[http://techbot.me/2011/01/full-text-search-in-in-rails-with-sunspot-and-solr/](http://techbot.me/2011/01/full-text-search-in-in-rails-with-sunspot-and-solr/)

但是，请注意，当涉及到与此参考匹配的部分单词时，它只会对单词`EdgeNGramFilterFactory`的开头进行索引。为了使 Solr 匹配单词的任何部分，`NGramFilterFactory`需要使用 。

另请注意，我们已设置`minGramSize`to`3`和`maxGramSize`to `30`。因此，长度小于 3 或大于 30 的模式将不会在查询中返回。

# autocomplete - Sublime Text 2 如何用引号/自动配对包装选择

> ID：12131475
> 
> 赞同：1
> 
> 时间：2012-08-26T15:44:25.530
> 
> 标签：autocomplete, editor, textmate, text-editor, sublimetext2

我刚刚从 Textmate 2 切换到 Sublime Text 2。我认为输入单引号或括号会自动生成第二个引号或括号，光标位于两者之间（“自动配对”就是他们所说的，Textmate2 默认这样做）但这没有发生。

我看到`preferences->settings-Default`有一些 JSON 配置似乎正在做我需要的事情，但事实并非如此。我没有更改任何此默认配置。

有人可以帮我添加`preferences->settings-User`我需要为所有常见标签启用自动配对的配置`"'{[(`吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-26T16:20:35.300

现在我正在使用客户的笔记本电脑并从我的闪存驱动器运行 Sublime Text 2 便携式版本。没有安装额外的包，默认设置。一切都按预期工作：

1.  当我输入单引号或双引号、方括号、方括号或大括号时，它会添加一个右括号并将光标放在中间。
2.  当我选择 smth 并按下上述任何一个键时，它会用一对适当的引号或括号围绕选择。

检查您的设置>默认，寻找这个：

```
// Controls auto pairing of quotes, brackets etc
"auto_match_enabled": true, 
```

它在89号线附近。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-26T16:00:58.783

不是您问题的直接答案..但我在 ST2 中安装了一些插件并且自动配对工作正常。

我不确定哪个插件负责它。如果您希望我分享插件列表，请告诉我。

# magento - Magento中产品的多个属性

> ID：12131479
> 
> 赞同：1
> 
> 时间：2012-08-26T15:45:04.780
> 
> 标签：magento

我需要在 magento 中为多个属性配置产品。

例如，我的产品是一件 T 恤。需要配置以下属性。

1.  尺寸（小号、中号、大号、XL 和 XXL）
2.  颜色（灰色、白色、绿色等）

尽管我设法创建了这些属性，但我如何根据每种尺寸和颜色维护特定 T 恤的库存。

我想为每种尺寸和颜色单独处理库存。例如

*   T 恤 1 - 黄色 - XL - 10 件
*   T 恤 1 - 黄色 - L - 10 件
*   T 恤 1 - 黑色 - XL - 10 件
*   T 恤 1 - 黑色 - L - 10 件

Magento 应该只显示产品库存中的可用属性。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-27T09:41:13.377

这种类型的产品称为可配置产品。它在 Magento 中处理得很好。查看以下页面以获取有关 Magento 可配置产品的知识。

[http://www.magentocommerce.com/knowledge-base/entry/creating-a-configurable-product](http://www.magentocommerce.com/knowledge-base/entry/creating-a-configurable-product) [http://www.magentoadvisor.com/magento-products/complex-magento-products-part-3-configurable-products /](http://www.magentoadvisor.com/magento-products/complex-magento-products-part-3-configurable-products/)

要使用自动更改产品图像管理产品颜色大小，请使用以下扩展

[http://www.magentocommerce.com/magento-connect/color-views-plus-magento-extension.html](http://www.magentocommerce.com/magento-connect/color-views-plus-magento-extension.html) 官方演示：[http ://demo.temgra.com/index.php/color-views-plus/color-意见加-magento-extension-magento-plug-in.html](http://demo.temgra.com/index.php/color-views-plus/color-views-plus-magento-extension-magento-plug-in.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-26T16:13:10.127

您正在寻找 Magento 所谓的可配置产品。仅产品属性仅存储有关产品的信息；它们根本不影响库存。使用可配置产品，您实际上会为每种尺寸和颜色的组合（称为“关联产品”）提供单独的简单产品。这些将不会在您的店面中单独可见（除非您希望它们可见），但它们将通过逻辑“可配置产品”收集在一起。然后，您可以跟踪每个简单产品的库存。

[Magento](http://go.magento.com/support/kb/entry/name/creating-a-configurable-product/)的这份文档详细解释了如何设置可配置产品。（这些说明实际上是针对他们的托管平台 Magento Go，但几乎没有差异。）

# c - 节点，按值传递，C 中奇怪的字符串行为

> ID：12131481
> 
> 赞同：0
> 
> 时间：2012-08-26T15:45:42.323
> 
> 标签：c, string

所以我有一个自制的双链表实现，它被用作排队器的替代品。（用 C 语言实现，这是一种我公认的弱点）。

我的节点类型定义：

```
typedef struct Node
{
    char *name;
    int data;
    int recurring;
    struct Node *next;
    struct Node *prev;
}node; 
```

它说“一个节点有一个名称，一个数据点，无论它是否重复以及指向前一个和下一个节点的指针”

像这样的插入功能

```
node * insertFromTail(node *tail, int data, int recurring, char *name)
{
    node *newNode;
    node *oldNext;
    node *origTail = tail;
    /*assume *pointer points to tail of list*/
    /*printf("tail data is %d\n", tail->data);
    printf("before loop\n");*/
    while(tail->prev != NULL && tail->data > data)
    {
        /*printf("inside while loop\n");*/
        tail = tail -> prev;
    }
    /*printf("after loop\n");*/
    /*if we are looking at a no item list or tail*/
    if(tail->next == NULL)
    {
        /*printf("pointer is tail\n");*/
        return insert(tail, data, recurring, name);
    }
    else /*tail pointer points at item before the point of insertion*/
    {
        /*printf("default case\n");
        printf("pointer data is %d\n", tail->data);*/
        oldNext = tail->next;
        newNode = (node *)malloc(sizeof(node));
        newNode->data = data;
        newNode->recurring = recurring;
        newNode->name = name;
        oldNext -> prev = newNode;
        newNode -> next = oldNext;
        tail -> next = newNode;
        newNode -> prev = tail;
        return origTail;
    }
} 
```

带内部插件

```
node * insert(node *tail, int data, int recurring, char *name)
{
        /* Allocate memory for the new node and put data in it.*/
        tail->next = (node *)malloc(sizeof(node));
        (tail->next)->prev = tail;
        tail = tail->next;
        tail->data = data;
        tail->recurring = recurring;
        tail->name = name;
        tail->next = NULL;
        return tail;
} 
```

它传递了列表的尾部、数据点、下一个项目将出现的时间以及项目的名称。

如果我们从一个空节点开始，并且具有 NULL prev 和 next 引用（一个虚拟节点），我添加三个唯一节点和一个名为 ADD 的函数，该函数调用 insertFromTail 从 stdIn 获取输入

```
int main()
{
    node *start,*temp,*tail;
    start = (node *)malloc(sizeof(node));
    temp = start = tail;
    temp->next = NULL;
    temp->prev = NULL;
    if(strcmp(command, "ADD") == 0)
    {
        scanf("%d",&argTime);
        scanf("%s",&argName);
        tail = insertFromTail(head, argTime, 0, *argName);
    }
} 
```

输入如下：

```
INPUT: 
ADD 10 Gin
ADD 20 Vodka
ADD 30 Rum
PRINT 
```

我会得到一个输出

```
OUTPUT:
Rum 10
Rum 20
Rum 30 
```

这是一个错误，因为所需的输出是 OUTPUT: Gin 10 Vodka 20 Rum 30

我感觉这与字符串如何传递到节点有关，但正如您所看到的，我很难过。这是任务中剩下的最后一件事，其他一切都运行良好，所以我决定在这里询问是否有人可以推动我走上正确的道路。提前感谢您的帮助:)

PS对不起，一切都不好，我睡眠不足:(

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-26T15:47:51.887

简短的回答：您需要复制该名称：

```
tail->name = strdup(name); 
```

更长的答案：在每次迭代中，您都存储相同的指针。您正在存储它，然后下次再次写入它。因此，您最终会得到 3 个相同的指针，指向您最后输入的任何内容。

一个简单的解决方法是复制字符串并存储一个副本：正是这样`strdup`做的。但是，如果您的实现缺少`strdup`，您可以尝试：

```
tail->name = malloc(strlen(name) + 1);
strcpy(tail->name, name); 
```

*   不要忘记检查错误
*   不要`free`在某个时候忘记记忆

# .net - 或改变词边界的行为

> ID：12131482
> 
> 赞同：0
> 
> 时间：2012-08-26T15:45:48.250
> 
> 标签：.net, regex, c#-4.0

在第一个 Debug 下方返回 'unsbuscrib''d，第二个返回 unsbuscrib''d。不同的是领先的'。

我想要的是让双方都返回 unsbuscrib'd。

```
 string textText = " 'unsbuscrib''d' ";
    Regex rTest = new Regex(@"\b(ab)|(['\w]+)\b");
    if (rTest.IsMatch(textText))
    {
        Debug.WriteLine(rTest.Match(textText).Value);
    }
    rTest = new Regex(@"\b(['\w]+)\b");
    if (rTest.IsMatch(textText))
    {
        Debug.WriteLine(rTest.Match(textText).Value);
    } 
```

感谢 Guffa，修复是 @"\b((ab)|(['\w]+))\b"

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-26T15:51:37.000

这是因为第一个正则表达式匹配`\b(ab)`or `(['\w]+)\b`。

它将在开头包含撇号，因为它使用第二部分，在开头没有单词边界的要求。

第二个正则表达式的开头需要一个单词边界，空格和撇号之间没有单词边界。第一个单词边界在撇号和字母之间`u`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-26T15:51:24.707

字母数字字符和非字母数字字符之间的单词边界匹配，因此它匹配and`\b` [但](http://www.regular-expressions.info/wordboundaries.html)`'`不`u`匹配`<space>`and `'`。

你的交替将第一个正则表达式分成

```
\b(ab)   |   (['\w]+)\b 
```

也许你的意思是

```
\b(?:(ab)|(['\w]+))\b 
```

# iphone - 在 Iphone 上播放声音的最简单方法是什么？

> ID：12131486
> 
> 赞同：0
> 
> 时间：2012-08-26T15:46:17.437
> 
> 标签：iphone

在 Iphone 上播放声音的最简单方法是什么？我有一个 mp3 文件，我宁愿保留它，不要将其转换为其他格式。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-26T15:49:56.457

我所知道的播放 MP3 文件的最简单方法是使用`AVAudioPlayer`该类。基本上，只需执行（跳过错误检查、设置委托以检测完成等）：

```
NSURL* soundUrl = [[NSBundle mainBundle] URLForResource:@"soundFile" withExtension:@"mp3"];
AVAudioPlayer* player = [[AVAudioPlayer alloc] initWithContentsOfURL:soundUrl error:&err];
[player play]; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-26T16:15:28.157

首先将 AVFoundation Framework 添加到项目中 [Goto Target> 右键单击​​项目>Build Phases>Link Binary with Library> 点击 +> 选择 AVFoundation> Add]

```
// get file path
NSString *soundPath = [[NSBundle mainBundle] pathForResource: fileNameToPlay ofType:@"mp3"];

// allocate and refer to file
AVAudioPlayer *player =[[AVAudioPlayer alloc] initWithContentsOfURL:[NSURL fileURLWithPath: soundPath] error: NULL];

// set delegate
player. delegate = self; 

// play
[player play]; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-26T17:34:29.570

显然这结果是一团糟，但我找到了解决方案。我正在运行 XCode 4.4.1。

以下是对我有用的步骤：

1.  将 mp3 文件从 finder 拖到 XCode 项目 -> 支持文件中。确保复制文件。假设文件名为 sound.mp3。
2.  将 AVFoundation 框架添加到您的项目中。
3.  # 导入 <AVFoundation/AVFoundation.h>

4.  @property (strong) AVAudioPlayer* soundPlayer;
5.  使用以下代码初始化播放器并播放 mp3： NSURL *chemin = [NSURL fileURLWithPath:[NSString stringWithFormat:@"%@/sound.mp3", [[NSBundle mainBundle] resourcePath]]]; NSError *错误；self.soundPlayer = [[AVAudioPlayer alloc] initWithContentsOfURL:chemin error:&error]; [self.soundPlayer 播放];

现在在这一点上，我遇到了一个异常，这里描述了：[AVFoundation iOS 5](https://stackoverflow.com/questions/7779851/avfoundation-ios-5) 简而言之，这意味着模拟器中可能存在一个不应该在设备上发生的错误。就我而言，我打开了所有异常，这阻止了我的代码执行。您应该做的是删除抛出所有异常的选项。

此外，在我的情况下，距离它第一次播放声音需要 3-5 秒，所以当你没有立即听到声音时请耐心等待。第一次播放后，它会立即播放。

# pdf - 提交 PDF 文件并保存在 ColdFusion 中

> ID：12131487
> 
> 赞同：1
> 
> 时间：2012-08-26T15:46:20.027
> 
> 标签：pdf, coldfusion

我需要用户能够使用他们的浏览器在 PDF 文件中填写表单，然后，当他们单击 PDF 文件表单中的提交按钮时，将使用他们在表单中输入的内容保存一个新的 PDF 文件。

我一直在参考的主要示例之一是 Adob​​e 关于此主题的帮助部分，但运气不佳：http: [//help.adobe.com/en_US/ColdFusion/9.0/Developing/WSc3ff6d0ea77859461172e0811cbec11c2b-7ffa.html](http://help.adobe.com/en_US/ColdFusion/9.0/Developing/WSc3ff6d0ea77859461172e0811cbec11c2b-7ffa.html)

我提供的 PDF 文件没有与之关联的提交操作。因此，我打开 LiveCycle 设计器并找到提交按钮并将以下代码添加到其中：

```
<submit format="pdf" target="http://localhost:8500/pdfforms/pdfreceiver.cfm" textEncoding="UTF-16" xdpContent="pdf datasets xfdf"/> 
```

当然，将目标更改为我本地服务器上的正确位置。然后，当我使用这部分代码时：

```
<cfpdfform source="#PDF.content#" action="read" result="fields"/>
<cfdump var="#fields#"> 
```

我收到一条错误消息：

```
Element CONTENT is undefined in PDF. 
```

我还尝试在 Adob​​e Acrobat X Pro 中打开它并设置提交整个 PDF 文件的操作，但这也不起作用。如果有帮助的话，我在 Windows 7 上使用 ColdFusion 9。在此先感谢您的帮助！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-26T16:29:54.200

您不使用 CFPDFFORM 来阅读提交 PDF 的结果。PDF 表单应该对目标页面执行 FORM POST，就像 html Web 表单一样。

您可以通过在 FORM 范围上执行 CFDUMP 来查看表单的结果：

```
<cfdump var="#form#"> 
```

然后，您使用各种方法解析该信息并将其存储在数据库中。

# ruby - 将值限制为最大值

> ID：12131491
> 
> 赞同：3
> 
> 时间：2012-08-26T15:47:27.390
> 
> 标签：ruby, math

```
@a = 200
@b = 1

@c = @a / @b 
```

`@c`将等于 200。如何设置最大值为`@c`100？

```
if @c = 99, do nothing
if @c = 100, do nothing
if @c > 100, make @c 100 
```

在 SQL 中，这是`LEAST`函数。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-26T15:49:26.300

[`Enumerable#min`](http://ruby-doc.org/core-1.9.3/Enumerable.html#method-i-min)作品：

```
[@c, 100].min 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-08-26T16:02:17.123

```
case @c
 when  99
   ##   do something
 when  100
   ##   do something
 else
  @c = 100 if @c > 100 
  # or
  @c = [@c, 100].min # inspired by minitech answer
end 
```

# java - 在所有其他数组列表中获取数组列表项的最快方法

> ID：12131495
> 
> 赞同：0
> 
> 时间：2012-08-26T15:47:58.390
> 
> 标签：java, arraylist, inner-join

我正在寻找一种智能且快速的方法来仅获取所有其他数组列表中的多个数组列表（存储在哈希图中）的值。

例如 [a] = 1, 2, 3, 4, 5 [b] = 1, 3 [c] = 3

结果 = 3

在 Java 中实现这一目标的最快方法是什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-26T15:58:32.333

您可以使用ArrayLists来使用[Collections.retainAll ：](http://docs.oracle.com/javase/7/docs/api/java/util/Collection.html#retainAll%28java.util.Collection%29)

```
list1.retainAll(list2);
list1.retainAll(list3); 
```

但请记住，您将更改`list1`.

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-26T15:54:25.737

在[谷歌番石榴](http://code.google.com/p/guava-libraries/)中：

```
 // assuming you have List<List<?>> lists that is non-empty
  Set<?> result = Sets.newLinkedHashSet(lists.get(0));
  for (int i = 1; i < lists.size(); i++) {
    result.retainAll(ImmutableSet.copyOf(lists.get(i)));
  }

  return result; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-26T15:54:36.393

遍历它们，并将任何相同的添加到新的数组列表中。

```
 List commons = new ArrayList();
    for(int i=0; i < list1.size() && i < list2.size(); i++) {
        Object list1val = list1.get(i);
        Object list2val = list2.get(i);
        if((list1val == null && list2val == null) ||
                (list1val != null && list1val.equals(list2val)))
                commons.add(list1val);
    }
} 
```

# ios - 我想在我的 iOS 游戏中构建一个大规模的社交异步游戏模式，有没有 iOS API 呢？

> ID：12131497
> 
> 赞同：4
> 
> 时间：2012-08-26T15:48:28.017
> 
> 标签：ios, game-center, gamekit

我现在正在构建我的第二个游戏，我想知道是否有一个 iOS API 可以帮助我构建一个社交异步游戏。我以前使用过 GameCenter（用于排行榜），但我不认为 GameCenter 可以用于此目的。

我可以使用任何开源组件吗？类似于 Facebook SDK 的东西？我需要让游戏在服务器上运行吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-27T07:39:45.370

您实际上可以将 GameCenter 用于您想要构建的一些东西。例如，有一个用于匹配和回合制游戏的内置机制。您可以查看[GKTurnBasedMatch](http://developer.apple.com/library/ios/#documentation/GameKit/Reference/GKTurnBasedMatch_Ref/Reference/Reference.html)了解更多信息。

但是，GameCenter 确实有其局限性。Andrew Plotkin有一篇很棒的[博客文章](http://gameshelf.jmac.org/2012/03/apples-turn-based-game-api-and-what-it-needs/)描述了他构建基于 GameCenter 的回合制游戏的经验。简而言之，使用 GameCenter 有点令人费解，比赛中的一名玩家需要不断地保持游戏状态（因为它都是基于客户端的），并且没有办法让两名玩家同时行动。此外，玩家退出游戏也存在问题（Apple 没有提供放弃游戏或跳过某人回合的机制）。

您总是可以走很长的路并使用自己的服务器来实现游戏。您将需要构建多种机制，例如注册、匹配、推送通知集成、存储，当然还有客户端到服务器的通信。

另一个需要考虑的选择是使用[Nextpeer 的 SDK](http://developers.nextpeer.com)。他们为希望加入“与朋友一起玩”功能的游戏提供了完整的解决方案，而且它是免费的。他们负责匹配、推送通知和所有服务器端逻辑。游戏本身只需要实现一些简单的方法，例如开始游戏、报告分数和结束游戏。这很容易，他们在这里有一个[简单的截屏视频](https://vimeo.com/44447806)，展示了如何做到这一点。

# android - 无效的预览表面android视频录制

> ID：12131508
> 
> 赞同：6
> 
> 时间：2012-08-26T15:49:46.783
> 
> 标签：android, android-camera

我有一个服务，我尝试将服务记录视频归档。

启动服务的活动：

```
public static SurfaceView mSurfaceView;
public static SurfaceHolder mSurfaceHolder;
public static Camera mCamera;
@Override
public void onCreate(Bundle savedInstanceState) 
{
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);
    mSurfaceView = (SurfaceView) findViewById(R.id.surfaceView1);
    mSurfaceHolder = mSurfaceView.getHolder();
    mSurfaceHolder.setType(SurfaceHolder.SURFACE_TYPE_PUSH_BUFFERS);
    mSurfaceHolder.addCallback(this);
    Intent intent = new Intent(MainActivity.this, RecordService.class);
    intent.addFlags(Intent.FLAG_ACTIVITY_NEW_TASK);
    startService(intent);
    finish();
} 
```

服务：

```
private MediaRecorder mMediaRecorder;
private SurfaceView mSurfaceView;
private SurfaceHolder mSurfaceHolder;
private boolean mRecordingStatus;
private Camera mServiceCamera;
private Size  mPreviewSize;

@Override
public void onCreate() 
{
    mRecordingStatus = false;
    mSurfaceView = MainActivity.mSurfaceView;
    mSurfaceHolder = MainActivity.mSurfaceHolder;
    mServiceCamera=MainActivity.mCamera;
    InitCamera();
    super.onCreate();
}
@Override
public int onStartCommand(Intent intent, int flags, int startId) 
{
    super.onStartCommand(intent, flags, startId);
    if (!mRecordingStatus)
        StartRecord();
    else
        StopRecord();

    return START_STICKY;
}
private void InitCamera()
{
    mServiceCamera = Camera.open();
    Camera.Parameters p = mServiceCamera.getParameters();

    final List<Size> listSize = p.getSupportedPreviewSizes();
    mPreviewSize = listSize.get(2);
    p.setPreviewSize(mPreviewSize.width, mPreviewSize.height);
    p.setPreviewFormat(PixelFormat.YCbCr_420_SP);
    mServiceCamera.setParameters(p);
    try 
    {
        mServiceCamera.setPreviewDisplay(mSurfaceHolder);
        mServiceCamera.startPreview();
    }
    catch (IOException e) 
    {

        e.printStackTrace();
    }

    mServiceCamera.unlock();
}
private void StartRecord()
{
    try
    {
        mMediaRecorder = new MediaRecorder();
        mMediaRecorder.setCamera(mServiceCamera);
        mMediaRecorder.setAudioSource(MediaRecorder.AudioSource.MIC);
        mMediaRecorder.setVideoSource(MediaRecorder.VideoSource.CAMERA);
        mMediaRecorder.setOutputFormat(MediaRecorder.OutputFormat.MPEG_4);
        mMediaRecorder.setAudioEncoder(MediaRecorder.AudioEncoder.DEFAULT);
        mMediaRecorder.setVideoEncoder(MediaRecorder.VideoEncoder.DEFAULT);
        mMediaRecorder.setOutputFile(Environment.getExternalStorageDirectory().getPath()+File.separator+ "video.mp4");
        mMediaRecorder.setVideoFrameRate(30);
        mMediaRecorder.setVideoSize(mPreviewSize.width, mPreviewSize.height);
        mMediaRecorder.setPreviewDisplay(mSurfaceHolder.getSurface());

        mMediaRecorder.prepare();
        mMediaRecorder.start(); 

        mRecordingStatus = true;

        Toast toast = Toast.makeText(getBaseContext(), "Recording",1000);
        toast.show();
    }
    catch (IOException e) 
    {
        Toast toast = Toast.makeText(getBaseContext(), e.getMessage(),2000);
        toast.show();
    }
} 
```

当我在我的 Galaxy 上调试代码时，我得到了 toast（在 StartRecord() 方法中）“无效的预览表面”

如何修复？

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2014-03-06T02:35:24.163

您看到的原因是因为您`mMediaRecorder.setPreviewDisplay(mSurfaceHolder.getSurface());`在创建表面之前执行。添加延迟碰巧有效，但不是处理此问题的正确方法。

该线 `mSurfaceHolder = mSurfaceView.getHolder();` 不会立即创建曲面。事实上，SurfaceHolder 提供了一个回调接口，让您知道何时创建了表面。

该行`mSurfaceHolder.addCallback(this);`应位于您创建的类的构造函数中，该类扩展 SurfaceView 并实现 SurfaceHolder.Callback。然后，您可以覆盖 SurfaceHolder.Callback 接口的回调方法，以便您的代码在表面创建后执行。这是一个例子：

```
public class CameraPreview extends SurfaceView implements SurfaceHolder.Callback {

private SurfaceHolder surfaceHolder;

public CameraPreview(Context context, VideoHandler vh) {
    super(context);
    videoHandler = vh;

    // Install a SurfaceHolder.Callback so we get notified when the
    // underlying surface is created and destroyed.
    surfaceHolder = getHolder();
    surfaceHolder.addCallback(this);
    // deprecated setting, but required on Android versions prior to 3.0
    if(Build.VERSION.SDK_INT < Build.VERSION_CODES.HONEYCOMB)
        surfaceHolder.setType(SurfaceHolder.SURFACE_TYPE_PUSH_BUFFERS);
}

@Override
public void surfaceCreated(SurfaceHolder holder) {
    // Perform actions that require Surface to have been created here e.g.
    // mMediaRecorder.setPreviewDisplay(holder.getSurface()); etc.

}

@Override
public void surfaceDestroyed(SurfaceHolder holder) {
    // Take care of releasing camera preview etc.
}

@Override
public void surfaceChanged(SurfaceHolder holder, int format, int w, int h) {
    // Handle changes
}

} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-29T11:33:05.907

我不得不延迟执行 MediaRecorder 启动。这意味着在 中`onResume`，我创建了一个处理程序并对其进行调用`postDelayed`。我知道，它仍然是同一个线程，但它对我有用。

# android - 如何调试Android的NFC实现？

> ID：12131513
> 
> 赞同：6
> 
> 时间：2012-08-26T15:50:26.067
> 
> 标签：android, gdb, nfc

这个问题可以分解成多个较小的问题。最终结果将是能够使用 gdb 等调试器在 Galaxy Nexus (Android 4.1) 设备的 C/C++ NFC 实现中设置断点，以检查其内部状态。

1.  是否可以将 Galaxy Nexus 设备上的库替换为包含调试符号的库？
2.  是否可以使用 gdb 来调试 Android 设备的 C/C++ 实现？
3.  是否可以交叉编译 Android 的 NFC 实现？
4.  有没有人在另一个图书馆尝试类似的东西的例子？

**更新：** [植根设备](http://forum.xda-developers.com/showthread.php?t=1614827)和[编译 Jellybean](http://forum.xda-developers.com/showthread.php?t=1762641)总体上进展顺利，但有一些小错误。事实上，在 libnfc makefile 中有一些[非常好的标志，可以在通信时启用广泛的输出。](http://omapzoom.org/?p=platform/external/libnfc-nxp.git;a=blob;f=Android.mk;hb=HEAD#l114)

但是仍然存在调试问题。要调试 libnfc（外部/libnfc-nxp），我必须使用最有可能是 Nfc 管理器（包/应用程序/Nfc）的库将自己附加到进程。要调试应用程序，我必须设置[可调试标志](http://developer.android.com/guide/topics/manifest/application-element.html#debug)。如果我重建 Nfc 管理器，则签名与设备上已安装的签名不匹配，这意味着`adb install -r <file>`无法正常工作。`adb uninstall com.android.nfc`也不行。当我尝试安装新的apk时，使用简单地删除apk的硬方法`/system/app`会产生错误。`INSTALL_FAILED_SHARED_USER_INCOMPATIBLE`此时 Nfc 根本不起作用，我不得不重新刷新库存图像。

还有其他想法如何调试 libnfc 库吗？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-08-26T19:58:11.297

一般来说，答案是肯定的。完整的 Android NFC 实现是[Android 开源项目](http://source.android.com/source/downloading.html)的一部分。回答您问题的特定部分：

1.  是的，您需要解锁引导加载程序并根您的设备才能以读/写模式挂载系统分区，这样您就可以更换 NFC 库。
2.  是的，您应该能够使用 gdb 进行远程调试。不过，我实际上从未这样做过。
3.  是的，只需下载 Android 源代码并编译 NFC 堆栈的相关部分。相关部分位于`packages/apps/Nfc`（NFC 管理器）、`external/libnfc-nxp`（C 库）、`frameworks/base/core/java/android/nfc`（Java NFC API）和`vendor/nxp`（NFC 芯片固件）中。
4.  是的，请参阅[如何使用 GDBSERVER 在 Android 上调试应用程序？](https://stackoverflow.com/questions/2056717/how-to-debug-an-app-on-android-with-gdbserver)或[https://www.google.com/search?q=remote+gdb+android](https://www.google.com/search?q=remote+gdb+android)。（这个问题也可能是相关的：[Remote debugging with Android emulator](https://stackoverflow.com/questions/1754162/remote-debugging-with-android-emulator)）

# windows - Cygwin nfs 服务器

> ID：12131514
> 
> 赞同：0
> 
> 时间：2012-08-26T15:50:36.127
> 
> 标签：windows, linux, ubuntu, cygwin, nfs

我想在 windows(desktop) 上设置一个 nfs 服务器并使用 ubuntu(laptop) 作为客户端。

我已经在 Windows 上安装了 cygwin 和 nfs-server，但我无法从 linux 安装任何东西。

来自 cygwin 的 /etc/export 包含：

```
/mnt/d 192.168.0.100(ro) 
```

在我的笔记本电脑上，我使用 showmount 得到以下结果：

```
showmount -e 192.168.0.101
Export list for 192.168.0.101:
/mnt/d 192.168.0.100 
```

如果我尝试安装，我会得到这个：

```
sudo mount -t nfs  192.168.0.101:/mnt/d d
mount.nfs: Connection timed out 
```

如果我在 /etc/exports 中放一个 *，我会得到：

```
sudo mount -t nfs 192.168.0.101:/mnt/d d
mount.nfs: access denied by server while mounting 192.168.0.101:/mnt/d 
```

请帮忙 ：（

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-26T16:40:04.457

HTH： [http ://stromberg.dnsalias.org/~strombrg/NFS-troubleshooting-2.html](http://stromberg.dnsalias.org/~strombrg/NFS-troubleshooting-2.html)

# cakephp - 如何仅在 CakePHP 2.1 中使用后端授权？

> ID：12131515
> 
> 赞同：0
> 
> 时间：2012-08-26T15:50:37.930
> 
> 标签：cakephp, authorization, cakephp-2.1

我想用 CakePHP 2.1 构建一个应用程序，用户只需要登录到后端（使用自定义前缀）而不是前端。

我知道可以在每个操作的基础上使用 执行此操作[`$this->Auth->allow()`](http://book.cakephp.org/2.0/en/core-libraries/components/authentication.html#making-actions-public)，但我想基于[前缀](http://book.cakephp.org/2.0/en/development/routing.html#prefix-routing)执行此操作。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-26T15:50:37.930

要实现这一点，您可以按照[Authentification Tutorial](http://book.cakephp.org/2.0/en/tutorials-and-examples/blog-auth-example/auth.html)中的“标准”步骤进行操作，只需`beforeFilter()`在`AppController`.

```
function beforeFilter() {
  if(isset($this->Auth)) {
    if(isset($this->params['admin']) && $this->params['admin']) {
      $this->Auth->allow('admin_login'); // allow backend login only
    } else {
      $this->Auth->allow(); // allow everything in frontend
    }
  }
} 
```

这将允许用户在您的应用程序中执行所有操作，除了带有前缀的所有操作`admin`。唯一允许的操作是`admin_login`它可能驻留在某种用户控制器上，以使后端用户能够登录。

如果您使用多个前缀，请小心为每个需要身份验证的前缀定义此项。

# javascript - 在 IE 中获取表格单元格内容

> ID：12131517
> 
> 赞同：1
> 
> 时间：2012-08-26T15:50:57.103
> 
> 标签：javascript, internet-explorer

我可以在 Firefox 中使用以下语句获取表格单元格内容，但在 IE 中没有运气：

```
document.getElementById('<%=tblBasket.ClientID %>').rows[i].cells[0].innerText 
```

我也测试了innerHTML，再次没有运气，我认为我打电话的方式`.rows[i].cells[0].`有一个问题，对IE没有任何帮助，我在这里做错了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-26T16:21:22.233

```
var table = document.getElementById('<%=tblBasket.ClientID %>');
var rows  = table.getElementsByTagName('tr');
var cols  = rows[i].getElementsByTagName('td');
var col   = cols[0];
var html  = col.innerHTML; 
```

和单线：

```
document.getElementById('<%=tblBasket.ClientID %>').getElementsByTagName('tr')[i].getElementsByTagName('td')[0].innerHTML 
```

# ember.js - 获取当前路线的上下文

> ID：12131523
> 
> 赞同：1
> 
> 时间：2012-08-26T15:51:19.573
> 
> 标签：ember.js, ember-old-router

我已经使用 ember 路由器在我的 ember 应用程序中实现了一个搜索字段。我的路由器的相关部分如下所示：

```
question: Em.Route.extend({
  route: '/?query=:query'
  connectOutlets: function(router, context) {
    query = context['query'],
    articles = App.get('defaultStore').findQuery(App.Article, {"query": query})
    router.get('helpController').connectOutlet('articlesSearch', 'articlesSearch', articles)
  }
}) 
```

我想将我的搜索字段的值绑定到当前路线的上下文。我找到了一种在我的控制器中使用在我的控制器中实现的`stateMetaFor`方法来执行此操作的方法，如下所示：

```
query: function() {
  router = App.get('router')
  state = router.findStateByPath(router.get('currentState'), 'help.question')

  if (router.get('currentState') == state) {
    stateMeta = router.stateMetaFor(state)
    return stateMeta['context']['query]
  }

  return ''
}.property('App.router.currentState').cacheable() 
```

我对这种方法不满意，因为 1）它使用了未记录的`findStateByPath`方法，以及 2）因为它需要 stateMeta 对象的内部知识。有一个更好的方法吗？如果没有，应该有吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-28T14:39:31.450

在视图中显示信息的正确方法是使其在控制器上可用，并将视图绑定到该控制器。

在这种情况下，惯用的做法是在 上设置一个`query`属性`helpController`：

```
router.set('helpController.query', query); 
```

# python - Google Latitude API 返回 0 个位置历史记录结果

> ID：12131527
> 
> 赞同：0
> 
> 时间：2012-08-26T15:51:59.607
> 
> 标签：python, google-api-python-client, google-latitude

我正在尝试使用[Google Latitude API](https://developers.google.com/latitude/)的 v1（通过 OAuth 2.0）检索我的位置历史记录，特别是[list](https://developers.google.com/latitude/v1/location/list)方法。

当尝试检索两个时间戳之间的记录时，我没有得到任何位置。但是，我可以检索我最近的位置（约 860 个，仅在过去 24 小时内）。尝试在与“最近”集中返回的位置相同的时间段内检索位置也会返回零结果。

有谁知道我在这里做错了什么，或者问题在于纬度？我可以通过这种方式检索我的位置记录吗？

## 已解决：指定的开始和结束时间戳需要以毫秒为单位

以下是我用来帮助将`datetime`对象转换为毫秒的一些函数：

```
def dt_from_epoch(epoch):
    epoch = int(epoch)
    secs = epoch/1000
    mils = epoch - (secs*1000)

    dt = datetime.datetime.fromtimestamp(secs)
    dt.replace(microsecond=mils*1000)
    return dt

def dt_to_mils(dt):
    return int((time.mktime(dt.timetuple())*1000) + (dt.microsecond/1000)) 
```

## 原始示例

### 测试用例脚本：

```
# Service obtained in the usual OAuth 2.0 way using oauth2client and
# apiclient.discovery.build.
# Scope used: https://www.googleapis.com/auth/latitude.all.best

print "## Retrieve most recent history"
locs = service.location().list(granularity='best', max_results=1000).execute()
first = locs['items'][len(locs['items'])-1]
last= locs['items'][0]

first = datetime.datetime.fromtimestamp(int(first['timestampMs'][:-3]))
last = datetime.datetime.fromtimestamp(int(last['timestampMs'][:-3]))

print "%s - %s: %d" % (first.strftime('%Y-%m-%d %H:%M:%S'),
    last.strftime('%Y-%m-%d %H:%M:%S'), len(locs['items']))

print "## Retrieve history between %s and %s" % (
    first.strftime('%Y-%m-%d %H:%M:%S'), last.strftime('%Y-%m-%d %H:%M:%S'))

locs = service.location().list(
    granularity='best',
    min_time=int(time.mktime(first.timetuple())),
    max_time=int(time.mktime(last.timetuple())),
    max_results=1000
).execute()

results = len(locs['items']) if 'items' in locs else 0
print "%s - %s: %d" % (first.strftime('%Y-%m-%d %H:%M:%S'),
    last.strftime('%Y-%m-%d %H:%M:%S'), results) 
```

### 脚本输出：

```
## Retrieve most recent history
2012-08-25 23:02:12 - 2012-08-26 15:37:09: 846
## Retrieve history between 2012-08-25 23:02:12 and 2012-08-26 15:37:09
2012-08-25 23:02:12 - 2012-08-26 15:37:09: 0 
```

### “最近历史”的 JSON 输出：

```
{
  "data": {
    "kind": "latitude#locationFeed",
    "items": [
      {
        "kind": "latitude#location",
        "timestampMs": "1345995443316",
        "latitude": (latitude),
        "longitude": (longitude)
      },
    (continues...)
    ]
  }
} 
```

### “X 和 Y 之间的历史”的 JSON 输出：

```
{
 "data": {
    "kind": "latitude#locationFeed"
  }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-31T18:13:06.557

看起来您以秒为单位而不是毫秒（自纪元以来）传递。具体来说，请注意您如何用 [:-3] 除以 1000 ...

# node.js - 任何可以使访问 Google API 作为 NodeJS 的服务帐户更简单的库？

> ID：12131529
> 
> 赞同：3
> 
> 时间：2012-08-26T15:52:23.000
> 
> 标签：node.js, cryptography, oauth-2.0, google-docs-api, google-drive-api

**背景：** 我的想法是创建一个完全用 nodejs 编写的内容为主的网站（想想新闻文章或博客文章）。由于特别是在 Google Drive（Google Docs）上创建内容非常简单，我想做的是让 Nodejs 从 Google Docs 中检索网站的内容。

**挑战：**据我所知，按照 Google 的说法，正确的做法是创建一个[服务帐户](https://code.google.com/p/google-api-java-client/wiki/OAuth2?hl=es-#Service_Accounts)，以便应用程序可以访问存储在 Google Drive 上的文件，而无需用户以确认的形式进行干预。Google 为服务器到服务器的请求提供了三个库——java、python 和 php。有谁知道 Node 社区已经写过类似的东西？我知道[node-oauth](https://github.com/ciaranj/node-oauth)但我已经搜索了它的来源，并没有找到任何引用私钥的东西，这是服务器到服务器交互所必需的，我认为这是不支持的。写一个也是一种选择，但如果可能的话，我想避免这种情况。看看 Google 编写的 Java Oauth2 客户端库就很清楚这不是一件容易的事。

提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-28T02:15:18.630

这是我发现的一个用于创建 JSON Web 令牌的库：[JWCrypto](https://github.com/mozilla/jwcrypto)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-01-09T14:54:43.043

我知道这个线程很旧，但如果其他人到达这里寻找答案：谷歌正在开发一个官方模块来访问他们所有的 API。它的 alpha 版本所以要小心，但它看起来非常漂亮 - [github 存储库](https://github.com/google/google-api-nodejs-client/)

# javascript - jQuery.Event('keydown') 在输入字段上不起作用

> ID：12131533
> 
> 赞同：1
> 
> 时间：2012-08-26T15:52:50.587
> 
> 标签：javascript, jquery

我正在尝试`keydown`在输入字段上模拟事件，代码正在运行，但我没有在文本字段中看到字符，这是我的代码：

```
$el.focus();
var keyCodes = _process.value.toCharCode(); // array of keyCodes to insert (e.g [117,118,119])
for(var i = 0, len = keyCodes.length; i < len; i++){
    var e = jQuery.Event('keydown');
    e.which = keyCodes[i];
    $el.trigger(e); // $el is my `input` text field
} 
```

此代码在 Chrome/IE/Firefox 中不起作用......我做错了什么？我看到了很多相同的例子，即使在 jquery 文档中......

# c# - 使用实体框架构建一个简单的多线程通讯引擎

> ID：12131535
> 
> 赞同：1
> 
> 时间：2012-08-26T15:53:08.943
> 
> 标签：c#, multithreading, entity-framework

我了解多线程和使用线程池的概念。我试图弄清楚的一个概念是如何跟踪每个线程上发送的电子邮件。所以想象一下，每个线程负责提取 x 条记录，遍历这些电子邮件，应用电子邮件模板，然后将电子邮件保存到提取目录。显然，我需要一种方法来告诉每个线程不要拉取与另一个线程相同的数据。

我想的一个解决方案是对数据进行分页，有一个全局变量或数组来跟踪已经发送到的页面，让每个线程检查该变量并从下一个可用页面开始。我能想到的唯一问题是如果数据发生变化，那么可用页面可能会不同步。

另一种解决方案是在数据库中设置一个布尔值，以确定一个帐户是否已通过电子邮件发送。因此，EF 将提取 X 条记录并将这些记录更新为准备发送电子邮件。这样，每个查询只会查找尚未准备好通过电子邮件发送的电子邮件。

如果可能的话，我想获得一些其他建议，或者扩展我提供的解决方案。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-26T16:01:56.377

鉴于您有一天可能希望扩展到多个应用服务器，内存同步实现也可能不足以保证电子邮件不重复。

最简单的解决方法之一是在数据库级别实现批处理机制。

在一个工作单元下

*   读取 N x 记录，使用*悲观*锁定（即防止其他线程同时读取相同的电子邮件）
*   用批次 ID（或`IsProcessed`指标）标记这些记录
*   将记录返回到您的应用程序

例如，SQL 服务器中的批处理 PROC 可能看起来像（假设 table = dbo.Emails，它有一个 PK EmailId 和一个已处理的指示符 BIT 字段`IsProcessed`）：

```
CREATE PROC dbo.GetNextBatchOfEmails
AS
    BEGIN
        -- Identify the next N emails to be batched. UPDLOCK is to prevent another thread batching same emails
        SELECT top 100 EmailId 
        INTO #tmpBatch
            FROM dbo.Emails WITH (UPDLOCK)
            WHERE IsProcessed = 0

        -- Stamp emails as sent. Assumed that PROC is called under a UOW. The batch IS the UOW
        UPDATE e
            SET e.IsProcessed = 1
            FROM dbo.Emails e
            INNER JOIN #tmpBatch t
                on e.EmailId = t.EmailId

        -- Return the batch of emails to caller
        SELECT e.*
            FROM dbo.Emails e
            INNER JOIN #tmpBatch t
                on e.EmailId = t.EmailId
    END 
```

Then expose the PROC as an EF Function Import mapped to your Email Entity. Under a `TransactionScope` ts, you can then call the EF Function Import, and send emails, and call ts.Complete() on success.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-26T16:27:30.450

In addition to nonnb's method, you can accomplish it all in one statement if you wish if you are using SQL Server 2005+.

```
;WITH q AS
(
   SELECT TOP 10 * 
   FROM dbo.your_queue_table
   WHERE
       IsProcessing = 0
   --you can obviously include more filtering criteria to meet your needs
)

UPDATE q WITH (ROWLOCK, READPAST)
SET IsProcessing = 1
OUTPUT INSERTED.* 
```

There is also some great information located [here](http://rusanu.com/2010/03/26/using-tables-as-queues/) about using database tables as queues.

# php - php页面抓取任务

> ID：12131536
> 
> 赞同：0
> 
> 时间：2012-08-26T15:53:28.163
> 
> 标签：php, facebook, drupal, screen-scraping, simple-html-dom

我在我的 Drupal 自定义模块中使用 Simple HTML DOM 库在我的项目中执行任务。

该任务只是模仿 Facebook 的操作，当我们粘贴文章 url 时，FB 会废弃该 url 并返回文章的一部分作为描述和图像。

我的问题是，在很多`<p>`标签之间选择文章的第一部分并在页面中的所有图片之间选择正确图片的算法是什么！

我知道 FB 使用`:OG`标签，但如果 OG 标签不存在，我需要开发一种算法来选择这些信息。

谢谢大家的支持，祝您有美好的一天。

问候。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-26T16:13:45.627

我认为图像是图像的尺寸。Th 采用超过 100x100 像素左右的第一张图像。

与文本可能类似。剥离内联 HTML 标签，获取第一个块元素文本（或者可能只是段落），然后就可以了。

# tumblr - 使用每个帖子的布尔值向 Tumblr 帖子添加独特的类

> ID：12131538
> 
> 赞同：0
> 
> 时间：2012-08-26T15:53:46.437
> 
> 标签：tumblr

我知道可以在 Tumblr 主题中创建博客范围的 meta-if 布尔变量（例如 {block:IfNotReversePagination}），但是是否可以为单个帖子做类似的事情？

例如：我希望能够为*照片*帖子创建几种不同的宽度，似乎最简单的方法是在帖子的*编辑*屏幕中设置一个复选框，标记为*宽照片*或类似的东西，我可以用来在主题标记中添加一个类。

这可能吗？如果没有，还有其他方法可以完成类似的事情吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-27T19:34:59.423

在每个帖子的基础上，您可以为帖子输入标签。假设您在帖子上输入宽幅照片作为标签，您可以使用`{TagsAsClasses}`帖子上的模板标签来检查它。

```
<article class="{TagsAsClasses}"></article> 
```

如果您不希望该标签显示在帖子的标签列表中，您可以通过 JS 将其删除（尽管它仍会显示在 Tumblr 仪表板中）。

# objective-c - Segue 代码无法从 Apress 书籍开始 iOS 5 第 10 章故事板上工作

> ID：12131543
> 
> 赞同：0
> 
> 时间：2012-08-26T15:54:23.313
> 
> 标签：objective-c, ios, xcode

首先，让我说我对 Objective-C 和 iOS 编程很陌生，所以如果这个问题的答案对你们来说是显而易见的，请原谅我。

所以我现在正在阅读 Apress 开始 iOS 5 书和第 10 章关于情节提要，在尝试运行其中一个示例时遇到以下问题。

据我了解，这段代码应该将任务文本从列表传递到下一页的文本输入字段。这是书中的代码，但是在尝试构建和运行代码时出现此错误：在“BIDTaskListController *”类型的对象上找不到属性“tableView”。

```
- (void)prepareForSegue:(UIStoryboardSegue *)segue sender:(id)sender 
{ 
    UIViewController *destination = segue.destinationViewController;

    if ([destination respondsToSelector:@selector(setDelegate:)]) { 
        [destination setValue:self forKey:@"delegate"];
    }

    if ([destination respondsToSelector:@selector(setSelection:)]) {
        // prepare selection info
        NSIndexPath *indexPath = [self.tableView indexPathForCell:sender]; // Error on this line
        id object = [self.tasks objectAtIndex:indexPath.row];
        NSDictionary *selection = [NSDictionary dictionaryWithObjectsAndKeys:
                                  indexPath, @"indexPath", 
                                  object, @"object",
                                  nil];
        [destination setValue:selection forKey:@"selection"]; 
    }
} 
```

另外，顺便说一下，我正在运行 Xcode 4.4。任何帮助将非常感激。谢谢。

问候，蒂姆

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-26T21:06:38.563

您必须将此代码放在 UITableViewController 中，可能您正在使用 UIViewController，因此您没有对 tableview 的引用，或者您可以将 UITableView 添加到您的 UIViewController 并将 IBOutlet 连接到它。

# algorithm - 学生组合块设计

> ID：12131546
> 
> 赞同：0
> 
> 时间：2012-08-26T15:54:40.930
> 
> 标签：algorithm, math, combinatorics, sports-league-scheduling-problem

我和我的同学正在准备一场比赛。我负责将他们中的 60 人分成 6 人一组。团队成员将每周轮换。我想以这样一种方式将他们组合在一起，这样在下一次切换时，同一团队的两名成员不会去另一个团队。谷歌搜索并检查 stackover flow 我发现了一个与此类似的问题（忘记标记 URL :()。根据提供的答案，我得出以下结论：每个人都必须与 59 人坐在一起。在每个班次中这个人必须和另外 5 个人坐在一起。所以我有 59/5 种方法可以让一个人坐下来满足我的约束。因为 59/5 不是整数，所以这是不可能的。

1.  我的假设是否正确？
2.  是否有可能使用诸如回溯之类的技术来实现解决方案？如果是这样，谁能告诉我如何实现这样的解决方案？

提前致谢 ！！！！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-26T16:06:49.140

这是一个例子。某一周的任何学生都不会与前一周的任何队友在同一支球队中结束。

*   Team 0 的玩家前往：T0、T1、T2、T3、T4、T5
*   Team 1 的玩家前往：T1、T2、T3、T4、T5、T6
*   第 2 队的选手前往：T2、T3、T4、T5、T6、T7
*   第 3 队的选手前往：T3、T4、T5、T6、T7、T8
*   第 4 队的选手前往：T4、T5、T6、T7、T8、T9
*   第 5 队的玩家前往：T5、T6、T7、T8、T9、T0
*   第 6 队的选手前往：T6、T7、T8、T9、T0、T1
*   第 7 队的选手前往：T7、T8、T9、T0、T1、T2
*   第 8 队的选手前往：T8、T9、T0、T1、T2、T3
*   第 9 队的选手前往：T9、T0、T1、T2、T3、T4

# objective-c - Mountain Lion：通过在其图标上拖动文件来启动应用程序会导致奇怪的启动延迟和过程中的其他问题

> ID：12131547
> 
> 赞同：1
> 
> 时间：2012-08-26T15:54:43.863
> 
> 标签：objective-c, cocoa, osx-mountain-lion

重现此问题的快速方法（ML，Xcode 441）：
- 新 Cocoa 应用程序（所有项目选项“关闭”）
- 添加带有“角色 > 查看器”和“扩展 > *”的文档类型
- 将以下代码添加到 appDelegate ：

```
- (BOOL)application:(NSApplication *)sender openFile:(NSString *)path
{
    NSLog(@"%@", path);
    return YES;
} 
```

> “运行” ... -> 快速启动时间，窗口立即可见。
> 现在通过在其图标上拖动文件来启动应用程序... -> 快速启动 (-applicationDidFinishLaunching:)，但窗口出现大约需要五秒钟！

这 5 秒会发生什么？

一个简单的解决方法似乎是这样的：

```
- (void)applicationDidFinishLaunching:(NSNotification *)aNotification
{
    [_window makeKeyAndOrderFront:self];
} 
```

现在，即使通过在其图标上拖动文件来启动应用程序，该窗口也会立即可见。
但是此解决方法无法解决其他问题：

- 现在在 MainMenu.xib 中将窗口设置为“全屏>主窗口”

>“构建”

>通过在其图标上拖动文件来启动应用程序，等待 5 秒钟，输入“全屏”-模式->没有问题，没有重绘问题（退出“全屏”，退出）

>通过在其图标上拖动文件启动应用程序，立即进入“全屏”-模式->显示问题：有没有亚麻背景，而是全屏状态的窗口作为缩放动画背后的背景可见！？（留在“全屏”，退出）

> 通过双击启动应用程序 -> 应用程序毫无问题地返回“全屏”模式（停留在“全屏”，退出）

> 通过在其图标上拖动文件来启动应用程序 -> 应用程序窗口进入全屏-state (-windowDidEnterFullScreen:)，但没有“空间更改”，因此全屏窗口不可见。并且不可能立即切换到该空间（例如通过单击应用程序图标）。您必须等待 5 秒才能执行此操作！

所以看起来即使是这些全屏问题也与我们一开始看到的 5 秒延迟有关！？

这是山狮虫（似乎不会以这种方式在 Lion 中发生）还是这是预期的行为？我错过了一些非常明显的东西吗？有解决方法吗？
即使在应用程序启动时，我也需要我的应用程序可靠地进入全屏模式！有没有办法做到这一点？

非常感谢！

# c# - 如何使用 Linq to XML 检查 XML 子元素是否存在

> ID：12131548
> 
> 赞同：18
> 
> 时间：2012-08-26T15:54:54.970
> 
> 标签：c#, xml, linq-to-xml

如何`IncomingConfig`通过使用 linq to xml 检查元素是否存在？

```
<?xml version="1.0" encoding="utf-8"?>
<settings>
  <IncomingConfig>
    <ip>10.100.101.18</ip>
    <port>5060</port>
  </IncomingConfig>
  <Device>
    <username>tarek</username>
    <AgentName>tarek</AgentName>
    <password>ffff</password>
  </Device>
  <Device>
    <username>adf</username>
    <AgentName>adf</AgentName>
    <password>fadsf</password>
  </Device>
</settings> 
```

* * *

## 回答 #1

> 赞同：28
> 
> 时间：2012-08-26T15:57:53.690

```
bool b = xdocument.Descendants("IncomingConfig").Any(); 
```

# android - 是否有 API 可以在全球范围内接收“指针位置”或“触摸位置”？

> ID：12131549
> 
> 赞同：1
> 
> 时间：2012-08-26T15:54:55.530
> 
> 标签：android

在 ICS 中有一个新设置“显示指针位置”。是否有用于获取触摸位置数据的 API？

**编辑：**叹息..请假设我不是在尝试编写恶意软件。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-26T16:07:50.020

您可以通过类似的方法在自己的活动中获取自己的触摸位置数据`onTouchEvent()`。出于明显的安全原因，您无法获取其他应用程序的触摸位置数据。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-09T03:12:47.580

谷歌工程师对安卓平台的评论：[https ://groups.google.com/forum/#!msg/android-platform/_O-mZNasjj4/r6rKePd5u1YJ](https://groups.google.com/forum/#!msg/android-platform/_O-mZNasjj4/r6rKePd5u1YJ)

# ios - 调整包含 TextView 的 UIView

> ID：12131552
> 
> 赞同：0
> 
> 时间：2012-08-26T15:55:17.700
> 
> 标签：ios, uiview, textview, customization

有没有办法在自定义 UIView 中插入 TextView，然后根据 TextView 中的行数调整 UIView 的大小？看起来像消息应用程序中的消息气泡的东西（我相信它们也是单元格）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-26T16:09:33.153

这是 Alex Barinov 的一个 git 项目，它实现了您希望使用`UITableView`. 使用表格视图，您可以轻松地将下一个聊天“气泡”动态添加到屏幕底部并将旧内容向上推送。

[http://alexbarinov.github.com/UIBubbleTableView/](http://alexbarinov.github.com/UIBubbleTableView/)

# wordpress - wordpress 查询帖子 - 几种帖子类型和几种分类法

> ID：12131553
> 
> 赞同：0
> 
> 时间：2012-08-26T15:55:22.513
> 
> 标签：wordpress, taxonomy

各位，请帮帮我。尝试了不同的方法，但仍然没有效果。
在 WordPress 3 中有几种帖子类型：剪辑、事件、专辑和帖子（wordpress 默认）和几个自定义分类艺术家，值说“史密斯”、“琼斯”和“小戈登杰弗里肯辛托三世”。（或 id 12、17 和 22）
如何查询所有列出类型的帖子，其中至少附加了一位艺术家？

```
$args = array (
    'artists' => array('Smith', 'Jones', 'Gordon Jeffrey Kensingtor III jr.'),
    'post_type' => array('posts', 'clips, 'albums', 'events')
);
$related = new WP_QUERY($args); 
```

它不起作用。我究竟做错了什么？非常感谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-26T16:35:11.043

你试试这个

```
$args = array(
    'post_type' => array('post', 'clips', 'albums', 'events'),
    'tax_query' => array(
         array(
             'taxonomy' => 'artists',
             'field' => 'slug',
             'terms' => array('Smith', 'Jones', 'Gordon Jeffrey Kensingtor III jr.')
         )
    )
);
$related = new WP_Query( $args ); 
```

# android - android:name 中的前导点真的需要吗？

> ID：12131555
> 
> 赞同：9
> 
> 时间：2012-08-26T15:55:24.787
> 
> 标签：android, manifest

> **可能重复：**
> [注册活动时的“点”是什么](https://stackoverflow.com/questions/4834122/whats-the-dot-for-when-registering-an-activity)

在所有 Android 示例中，Activity、Services 等的名称都以点开头：

```
<activity android:name=".MyActivity" /> 
```

我忘了在所有 Android 项目中都这样做——但它们确实工作得很好。

我的问题：这个前导点真的需要吗？

**编辑：**这是我的一个应用程序中的一个小快照示例。这个应用程序完美。它不使用限定名称，也不使用点：

```
<activity
        android:exported="false"
    android:name="Tankvorgaenge" >

    <intent-filter>
        <action android:name="android.intent.action.SEARCH" />
    </intent-filter>

    <meta-data
        android:name="android.app.searchable"
        android:resource="@xml/searchable" />
</activity>

<activity android:name="Tankvorgangdetails" />
<activity android:name="Tankvorgangdetailsbearbeiten" />
<activity android:name="TankvorgangUebersicht" />
<activity android:name="Verbrauch" />

<service android:name="MyService" /> 
```

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2012-08-26T19:21:11.180

当且仅当指定的类不是应用程序中子包的一部分时，省略点并且不完全限定包/类名称才有效。

如果您的应用程序包名称是`com.example.myapp`，并且您有一个活动类`com.example.myapp.MyActivity`：

1.  `android:name="MyActivity"`将工作。
2.  `android:name=".MyActivity"`将工作。
3.  `android:name="com.example.myapp.MyActivity"`将工作。

但是，如果您在源代码树中的子包中有相同的应用程序包和活动类，例如`com.example.myapp.myactivities.MyActivity`事情发生了变化。

1.  `android:name=".myactivities.MyActivity"`将工作
2.  `android:name="com.example.myapp.myactivities.MyActivity"`将工作
3.  `android:name="MyActivity"` **不管用**
4.  `android:name="myactivities.MyActivity"` **不管用**

3 不起作用，因为这将推断出您所指的类名实际上`com.example.myapp.MyActivity`就像上面的第一个示例一样。找不到具有此名称的类，您将收到错误消息。

4 不起作用，因为它看起来像一个完全限定的类名，即系统会将其解释为`myactivities.MyActivity`是完全限定名本身，而不是`com.example.myapp.myactivities.MyActivity`.

您需要此处的前导点来说明您使用的是相对路径，而不是绝对路径。如果您只指定一个完全没有包信息的类名，系统会推断该类位于应用程序包层次结构的根部。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-26T16:01:15.587

点是使用应用程序提供的相对路径`package_name`。您可以替换`.MyActivity`为`com.yourActivityPackage.MyActivity`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-26T16:02:20.803

是的，`activity[android:name]`应该指定一个完全限定的`package.Class`，或者如果它以点开头，那么它会附加到`application`的包中。

查看[文档](http://developer.android.com/guide/topics/manifest/activity-element.html#android%3aname)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-26T15:59:37.523

这是必需的。它是包名的缩写。android:name 应该指定完整的类名。通过放置一个前导点，我们可以表明以下类名在清单中上面声明的“包”内。

# javascript - Piwik 跟踪脚本可在除 IE8 及以下的所有浏览器上运行

> ID：12131557
> 
> 赞同：0
> 
> 时间：2012-08-26T15:55:31.070
> 
> 标签：javascript, matomo

我在电子商务网站收据页面上有一个跟踪脚本。该脚本只是从 DOM 中获取产品信息并使用 Piwik 电子商务跟踪功能对其进行跟踪。这适用于除 Internet Explorer 8 及以下版本之外的所有浏览器。几个星期以来，我一直在试图弄清楚脚本出了什么问题。我已经在虚拟收据页面上对其进行了本地测试，它在 IE 中运行良好，但它没有在实时页面上跟踪 IE 5-8 的任何销售。

跟踪脚本通过 OpenTag 标记插入到收据页面，piwik.js 也是如此，但我使用的是异步跟踪器，因此这不应该成为问题，因为除 IE 之外的所有浏览器都确认。

这是通过 OpenTag 注入的代码：

```
<script type="text/javascript" src="//ajax.googleapis.com/ajax/libs/jquery/1.8.0/jquery.min.js"></script>
<script type="text/javascript">
    // Closure that supports jQuery
    (function($) {
        // Function for removing everything from a string except numbers and
        // returning that number as an integer
        var num = function(text) {
            return parseInt(text.replace(/[^0-9]/g, ''));
        };

        // Trims whitespace from before and after a string. "  hello  " => "hello"
        var trim = function(text) {
            return text.replace(/^\s+|\s+$/g, '');
        };

        // Run on document ready
        $(function() {

            // Ready a reference to Piwik async queue
            _paq = _paq || [];

            // Referansenummeret
            var order_id = num(
                $('span#ctl00_CPHCnt_McInPlaceEdYourRefNbr_McInPlaceEdYourRefNbr')
                .closest('p').text()
            );

            // Hent verdien som ligger etter "Total:"
            // var total = num(
            //     $('span#ctl00_CPHCnt_HandlevognProdukListe1_McInPlaceEdTotInclAVT2_McInPlaceEdTotInclAVT2')
            //     .closest('tr').children('td:last-child').text()
            // );
            var total = 0;

            // Hent verdien som ligger etter "Sum:"
            var sub_total = num(
                $('span#ctl00_CPHCnt_HandlevognProdukListe1_McInPlaceEditorSum_McInPlaceEditorSum')
                .closest('tr').children('td:last-child').text()
            );

            // Hent verdien som ligger etter "Herav mva:"
            var mva = num(
                $('table.CartSummaryTable .TotalValue').closest('tr').next()
                .children('td:last-child').text()
            );

            // Hent verdien som ligger etter "Frakt inkl. evt. gebyr:"
            var shipping = num(
                $('span#ctl00_CPHCnt_HandlevognProdukListe1_McInPlaceEdFreightInclFee_McInPlaceEdFreightInclFee')
                .closest('tr').children('td:last-child').text()
            );

            // Cheat solution - the total doesn't have a 100% hitrate so just
            // add the sub_total and shipping together.
            total = sub_total + shipping;

            // Iterate over the product rows and extract the information
            $('table#ProductList tr.VerticalText').each(function(index, row) {
                var sku = trim($('td:first-child', row).text());
                var prod_name = trim($('div.ProduktDesc span', row).text());
                var categories = [];
                var price = num($('td:nth-child(5)', row).text());
                var quant = num($('td:nth-child(4)', row).text());

                // Extrapolate categories from the product link URL
                var path = $('.ProduktDesc a', row).attr('href').split('/');
                for(var i = 2; i < path.length - 1; i++)
                {
                    categories.push(path[i]);
                }

                // Track this product
                _paq.push(['addEcommerceItem', sku, prod_name, categories, price, quant]);
            });

            // Track this order
            _paq.push(['trackEcommerceOrder', order_id, total, sub_total, mva, shipping, false]);
        });
    }(window.jQuery.noConflict(true)));
</script> 
```

在 StackOverflow 上询问是我最后的手段，我一辈子都想不通为什么这没有跟踪 Internet Explorer 5-8 的任何销售情况。

我会接受导致我解决此问题的第一个答案。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-03T07:11:23.427

我们想通了。事实证明 OpenTag 正在将 URL “//ajax.googleapis.com/ajax/libs/jquery/1.8.0/jquery.min.js” 转换为 “////ajax.googleapis.com/ajax/libs/jquery /1.8.0/jquery.min.js”仅在 Internet Explorer 中。我们通过使用 JavaScript 找出协议来解决它。

# php - Apache2 的 CakePHP 2.x 虚拟主机文件

> ID：12131560
> 
> 赞同：1
> 
> 时间：2012-08-26T15:56:01.753
> 
> 标签：php, cakephp, apache2, ubuntu-12.04

有没有人有一个关于 CakePHP 2.x 和 Apache2 的生产服务器/测试服务器虚拟主机文件的好例子？

我曾希望它会包含在 Cake 文档中，但我能找到的最接近的是这个；[http://book.cakephp.org/2.0/en/installation/advanced-installation.html](http://book.cakephp.org/2.0/en/installation/advanced-installation.html)。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-26T18:08:57.903

试试这个： http: [//www.dereuromark.de/2011/05/29/working-with-domains-locally/](http://www.dereuromark.de/2011/05/29/working-with-domains-locally/)

# c - 将一个字节移位超过 8 位

> ID：12131568
> 
> 赞同：4
> 
> 时间：2012-08-26T15:57:30.217
> 
> 标签：c, bit-manipulation

在[这里](http://rclermont.blogspot.tw/2010/02/convert-long-into-byte-array-in-cc.html) 从字节缓冲区转换回无符号长整数时：

```
 unsigned long int anotherLongInt;

  anotherLongInt = ( (byteArray[0] << 24) 
                   + (byteArray[1] << 16) 
                   + (byteArray[2] << 8) 
                   + (byteArray[3] ) ); 
```

其中 byteArray 被声明为`unsigned char byteArray[4];`

问题：

我以为`byteArray[1]`只是一个无符号字符（8位）。当左移 16 位时，这不是将所有有意义的位移出并用 0 填充整个字节吗？显然它不是8位的。也许它正在移动连续 4 个字节的整个 byteArray？但我不明白这是如何工作的。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-26T15:59:10.127

在那个算术上下文中**`byteArray[0]`被提升为**`int`or `unsigned int`，所以这种转变是合法的，甚至可能是明智的（我喜欢`unsigned`在做按位处理时只处理类型）。

> 6.5.7 移位运算符
> 
> 对每个操作数执行整数提升。结果的类型是提升的左操作数的类型。

和整数促销：

> 6.3.1.1
> 
> 如果 int 可以表示原始类型的所有值，则该值将转换为 int；否则，它将转换为无符号整数。这些被称为*整数促销*。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-26T16:03:55.643

unsigned char 在移位时被隐式转换为 int。不确定它到底是什么类型，这取决于平台和编译器。为了得到你想要的，显式转换字节更安全，这也使它更便携，读者可以立即看到你打算做什么：

```
unsigned long int anotherLongInt;

anotherLongInt = ( ((unsigned long)byteArray[0] << 24) 
               + ((unsigned long)byteArray[1] << 16) 
               + ((unsigned long)byteArray[2] << 8) 
               + ((unsigned long)byteArray[3] ) ); 
```

# playframework-2.0 - Ebean 能否正确生成 Microsoft SQL Server DDL？

> ID：12131573
> 
> 赞同：2
> 
> 时间：2012-08-26T15:57:36.027
> 
> 标签：playframework-2.0, azure-sql-database, ddl, ebean

我使用 Microsoft 的驱动程序成功连接了 Windows Azure DB，并且通常通信正常，但是我发现 Ebean 生成的 DDL 与它使用的示例不兼容 MS 的规范，`auto_increment`而`identity`不是永远不要尝试使用字段等`nvarchar`。`ntext`

实际上，目前我正在手动管理我的 Azure 架构，但我只是好奇是否`Ebean`可以做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-26T21:34:16.183

通过查看 Ebean 源代码，似乎对[MsSQL 没有很好的支持](http://grepcode.com/file/repo1.maven.org/maven2/org.avaje/ebean/2.7.3/com/avaje/ebean/config/dbplatform/MsSqlServer2005Platform.java)，因为几乎没有做任何调整。

您应该考虑对其进行调整以适应您的需要并向 Ebean 人员提交补丁。

此外，您可以尝试使用自己的[DatabasePlatform](http://grepcode.com/file/repo1.maven.org/maven2/org.avaje/ebean/2.7.3/com/avaje/ebean/config/dbplatform/DatabasePlatform.java)实现，并将其设置在[Ebean ServerConfig](http://grepcode.com/file/repo1.maven.org/maven2/org.avaje/ebean/2.7.3/com/avaje/ebean/config/ServerConfig.java#ServerConfig.setDatabasePlatform%28com.avaje.ebean.config.dbplatform.DatabasePlatform%29)中。

有关信息，可以在[此处](http://grepcode.com/file/repo1.maven.org/maven2/org.avaje/ebean/2.7.3/com/avaje/ebeaninternal/server/core/DatabasePlatformFactory.java)找到检测数据库类型的工厂。

# java - 在eclipse中将字体导出到jar

> ID：12131584
> 
> 赞同：2
> 
> 时间：2012-08-26T15:59:03.653
> 
> 标签：java, eclipse, fonts, export

我正在尝试导出字体，这样您就不必安装字体来运行它在 eclipse 中运行的游戏，但导出它不起作用

文件夹结构如下：

```
Project_name
   /src
      -Core(package)
      -game(package)
   /Fonts
      -Origin-Light.ttf 
```

我使用以下命令加载字体：

```
font = Font.createFont(Font.TRUETYPE_FONT,
                       new FileInputStream("./Fonts/Origin-Light.ttf")); 
```

在eclipse中它工作得很好，但导出似乎没有加载字体

编辑：jar文件中的结构：

```
/core
  - main.class
  - ....
/Fonts
  - Origin-Light.ttf
/game
  - otherclasses.class
/META-INF
  - MANIFEST.MF
/org
  /eclipse
    some more folders 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-26T16:01:37.537

将字体文件夹放在源文件夹中，我相信这就是问题所在：

```
Project_name
  /src
     /Fonts
        -Origin-Light.ttf
     -Core(package)
     -game(package) 
```

聊天中解决，最终代码：

```
try { 
    font = Font.createFont(Font.TRUETYPE_FONT, 
            trial.class.getClassLoader().getResourceAsStream("Fonts/Origin-Light.ttf")); 
} catch (Exception e) { 
    e.printStackTrace();
} 
```

# arrays - Perl：将数组的 2 个哈希与另一个数组进行比较

> ID：12131585
> 
> 赞同：1
> 
> 时间：2012-08-26T15:59:05.947
> 
> 标签：arrays, perl, hash

我已经用 Perl 编写了下面的代码，但它没有给出理想的输出。我正在处理一个数组和两个数组哈希之间的比较。

给定示例输入文件：

```
1) file1.txt
   A6416    A2318
   A84665   A88 
```

2) hashone.pl

```
%hash1=(
A6416=>['E65559', 'C11162.1', 'c002gnj.3',],
A88=>['E77522', 'M001103', 'C1613.1', 'c001hyf.2',],
A84665=>['E138347', 'M032578', 'C7275.1', 'c009xpt.3',],
A2318=>['E128591', 'C43644.1', 'C47705.1', 'c003vnz.4',],
); 
```

3) hashtwo.pl

```
%hash2=(
15580=>['C7275.1', 'E138347', 'M032578', 'c001jnm.3', 'c009xpt.2'],
3178=>['C1613.1', 'E77522','M001103', 'c001hyf.2', 'c001hyg.2'],
24406=>['C11162.1', 'E65559', 'M003010', 'c002gnj.2'],
12352=>['C43644.1', 'C47705.1', 'E128591','M001458', 'c003vnz.3'],
); 
```

我的目标是实现所描述的任务：

从 file1.txt 中，我必须在 %hash1 中找到对应的 ID。例如，A6416 (file1.txt) 是 %hash1 中的键。接下来，我必须在 %hash2 中找到 A6416 ['E65559', 'C11162.1', 'c002gnj.3',] 的值。如果在 %hash2 中找到大多数（超过 50%）值，我将 A6416 替换为 %hash2 中的相应键。

```
Example:
A6416 A2318 
A84665 A88

Output:
24406 12352
15580 3178 
```

请注意 %hash1 和 %hash2 的键是不同的（它们不重叠）。但是值是相同的（它们重叠）。

```
#!/usr/bin/perl -w
use strict;
use warnings;
open FH, "file1.txt" || die "Error\n";
my %hash1 = do 'hashone.pl';     
my %hash2 = do 'hashtwo.pl';  
chomp(my @array=<FH>);

foreach my $amp (@array)
{
    if ($amp =~ /(\d+)(\s?)/)
    {
        if (exists ($hash1{$1}))
        {
            for my $key (keys %hash2) 
            {
                for my $i ( 0 .. $#{ $hash2{$key} } ) 
                {
                    if ((@{$hash1{$1}}) eq ($hash2{$key}[$i]))
                    { 
                    print "$key";
                    }
                }
           }
        }
    }
}   
close FH;
1; 
```

高度赞赏有关此问题的任何指导。谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-26T16:08:20.150

我认为你应该倒置`%hash2`成这个结构：

```
$hash2{'C7275.1'} = $hash2{'E138347'} = $hash2{'M032578'}
                  = $hash2{'c001jnm.3'} = $hash2{'c009xpt.2'} = 15580;
$hash2{'C1613.1'} = $hash2{'E77522'} = $hash2{'M001103'}
                  = $hash2{'c001hyf.2'} = $hash2{'c001hyg.2'} = 3178;
$hash2{'C11162.1'} = $hash2{'E65559'}
                   = $hash2{'M003010'} = $hash2{'c002gnj.2'} = 24406;
$hash2{'C43644.1'} = $hash2{'C47705.1'} = $hash2{'E128591'}
                   = $hash2{'M001458'} = $hash2{'c003vnz.3'} = 3178; 
```

这样您就可以更有效地执行这些查找，而不必遍历*.*`%hash2`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-27T22:55:37.970

基于 ruakh 和 zock 的响应，这里是构建 hash2 查找表所需的代码

```
#!/usr/bin/perl
use strict;
use warnings;
use Data::Dumper;

my %hash2=(
15580=>['C7275.1', 'E138347', 'M032578', 'c001jnm.3', 'c009xpt.2'],
3178=>['C1613.1', 'E77522','M001103', 'c001hyf.2', 'c001hyg.2'],
24406=>['C11162.1', 'E65559', 'M003010', 'c002gnj.2'],
12352=>['C43644.1', 'C47705.1', 'E128591','M001458', 'c003vnz.3'],
);

# Build LUT for hash2
my %hash2_lut;
foreach my $key (keys %hash2)
{
    foreach my $val (@{$hash2{$key}})
    {
        $hash2_lut{$val} = $key
    }
}

print Dumper(\%hash2_lut); 
```

请选择 ruakh 的帖子作为答案，只是想为您澄清代码。使用`Data::Dumper`...它是你的朋友。

这是输出：

```
$VAR1 = {
      'C47705.1' => '12352',
      'M032578' => '15580',
      'E138347' => '15580',
      'E77522' => '3178',
      'C7275.1' => '15580',
      'c001jnm.3' => '15580',
      'E65559' => '24406',
      'C1613.1' => '3178',
      'M001458' => '12352',
      'c002gnj.2' => '24406',
      'c009xpt.2' => '15580',
      'c001hyf.2' => '3178',
      'C43644.1' => '12352',
      'E128591' => '12352',
      'c001hyg.2' => '3178',
      'M003010' => '24406',
      'c003vnz.3' => '12352',
      'C11162.1' => '24406',
      'M001103' => '3178'
    }; 
```

# php - 我需要帮助将 PHP 脚本的输出显示到图像顶部的 DIV 标记中

> ID：12131589
> 
> 赞同：0
> 
> 时间：2012-08-26T15:59:15.010
> 
> 标签：php, css, html

我想在其 DIV 标记内的图像“folderContents05.jpg”顶部显示文件夹内容。PHP 脚本应该输出它所在目录的文件夹内容。脚本本身可以正常工作，但是当我在 html 中使用它或调用脚本时，我似乎无法显示任何内容。

这是HTML-

```
<head>
<title>index</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<link href="style.css" rel="stylesheet" type="text/css">
<!-- End Save for Web Styles -->
</head>
<body style="background-color:#353535; margin-top: 0px; margin-bottom: 0px; margin-left: 0px; margin-right: 0px;">
<!-- Save for Web Slices (index.psd) -->
<div id="wrapper">
<div id="Table_01">
<div id="folderContents01">
<img src="images/folderContents01.jpg" width="359" height="120" alt="">
</div>
<div id="folderContents02">
<img src="images/folderContents02.jpg" width="591" height="150" alt="">
</div>
<div id="folderContents03">
<img src="images/folderContents03.jpg" width="359" height="30" alt="">
</div>
<div id="folderContents04">
<img src="images/folderContents04.jpg" width="126" height="460" alt="">
</div>
<div id="folderContents05">
<img src="images/folderContents05.jpg" width="698" height="396" alt="">
</div>
<div id="folderContents06">
<img src="images/folderContents06.jpg" width="126" height="460" alt="">
</div>
<div id="folderContents07">
<img src="images/folderContents07.jpg" width="698" height="64" alt="">
</div>
<div id="folderContents08">
<img src="images/folderContents08.jpg" width="950" height="90" alt="">
</div>
</div>
</div>
<!-- End Save for Web Slices -->
</body>
</html> 
```

和php脚本

```
<?php
$count = 0;
if ($handle = opendir('.')) {
while (false !== ($file = readdir($handle))) {
if ($file != "." && $file != "..") {$count++;
print("<a href=\"".$file."\">".$file."</a><br />\n");
}
}
closedir($handle);
}
?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-26T16:25:21.290

这是你想要的吗？

```
<div id="folderContents05" style="position: relative">
  <img src="images/folderContents05.jpg" width="698" height="396" alt="">
  <div style="position: absolute; left: 0; top: 0; z-index: 100">
  <?php
   $count = 0;
   if ($handle = opendir('.')) {
     while (false !== ($file = readdir($handle))) {
       if ($file != "." && $file != "..") {
         $count++;
         print("<a href=\"".$file."\">".$file."</a><br />\n");
       }
     }
   closedir($handle);
   }
  ?>
  </div>
</div> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-26T16:11:20.847

您必须将“文件夹内容”图像作为 div 的背景，并通过 php 本身生成 HTML 标记，类似于下面的代码

```
if ($file != "." && $file != "..") {$count++;
print(<div id="folderContents +i">
</div>) 
```

并放置一个计数器，以便您可以使用它来生成（folderContents1、folderContents2 等）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-26T16:23:19.880

`style= "z-index: 0"`在您的标签上使用`<img>`并将 PHP 更改为：

```
<?php
$count = 0;
if ($handle = opendir('.')) {
echo '<div style="z-index: 1">';
while (false !== ($file = readdir($handle))) {
if ($file != "." && $file != "..") {$count++;
print("<a href=\"".$file."\">".$file."</a><br />\n");
}
}
echo '</div>';
closedir($handle);
}
?> 
```

使用 z-index 为元素建立“在顶”的顺序

# jquery - 如何组合使用 .on 的两个 jQuery 选择？

> ID：12131598
> 
> 赞同：1
> 
> 时间：2012-08-26T16:00:39.027
> 
> 标签：jquery

我有这个 jQuery：

```
$('#detail')
.on('click', '.deleteLink', function () {
    dialog(this);
    return false;
})
$('#detail')
.on('click', '.editLink', function () {
    dialog(this);
    return false;
}) 
```

有没有办法将这些结合起来。抱歉，我根本不知道 jQuery。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-26T16:04:22.900

使用逗号选择器将其绑定到两者的父级：

```
// Instead of body, you might want a more specific common parent
$('body').on('click', '#detailD .deleteLink, #detail .editLink', function () {
    dialog(this);
    return false;
}); 
```

或者您可以简单地创建一次函数：

```
var handler = function () {
    dialog(this);
    return false;
};
$('#detailD').on('click', '.deleteLink', handler);
$('#detail').on('click', '.editLink', handler); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-26T16:10:56.243

用 匹配两个选择器`,`，就像在 CSS 中一样：

```
$('#detail').on('click', '.deleteLink, .editLink', function () {
    dialog(this);
    return false;
}); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-26T16:13:59.823

我相信假设 .deleteLink 是您的选择器的子元素，这将起作用

 `````
$('#detailD > .deleteLink, #detail > .deleteLink')
    .on('click', function () {
        dialog(this);
        return false;
    });​ 
`````

# bash - vim ConqueTerm 运行 bpython LookupError

> ID：12131607
> 
> 赞同：1
> 
> 时间：2012-08-26T16:01:48.270
> 
> 标签：bash, vim, bpython

我正在尝试在我的 VIM ConqueTerm 中运行 bpython，但出现以下错误：

```
 Traceback (most recent call last):stebin  <F9> Pager  <F2> Show Source
  File "/usr/local/bin/bpython", line 8, in <module>
    load_entry_point('bpython==0.10.1', 'console_scripts', 'bpython')()
  File "/Library/Python/2.7/site-packages/bpython/cli.py", line 1756, in main
    banner=banner)
  File "/Library/Python/2.7/site-packages/bpython/cli.py", line 1658, in curses_wrapper
    return func(stdscr, *args, **kwargs)
  File "/Library/Python/2.7/site-packages/bpython/cli.py", line 1708, in main_curses
    clirepl = CLIRepl(main_win, interpreter, statusbar, config, idle)
  File "/Library/Python/2.7/site-packages/bpython/cli.py", line 261, in __init__
    repl.Repl.__init__(self, interp, config)
  File "/Library/Python/2.7/site-packages/bpython/repl.py", line 355, in __init__
    self.rl_history.load(pythonhist, getpreferredencoding())
  File "/Library/Python/2.7/site-packages/bpython/repl.py", line 208, in load
    with codecs.open(filename, 'r', encoding, 'ignore') as hfile:
  File "/System/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/codecs.py", line 884, in open
    info = lookup(encoding)
LookupError: unknown encoding: 
```

我正在使用 MacVim 和 Bash。

# android - 我在模拟器上打开 Android 应用程序强制立即关闭

> ID：12131608
> 
> 赞同：-2
> 
> 时间：2012-08-26T16:01:48.637
> 
> 标签：android

我在旧帖子上遇到了类似的问题..纠正了它们。仍然遇到强制关闭问题。请帮忙。

以下哪项是正确的？

```
Button continueButton = (Button) findViewById(R.id.continue_button); 
```

或者

`View continueButton = findViewById(R.id.continue_button);`

他们之间有什么区别？

* * *

```
package org.example.sudoku;

import android.os.Bundle;

import android.view.View.OnClickListener;
import android.app.Activity;
import android.view.Menu;
import android.widget.Button;

public class Sudoku extends Activity {

    @Override
    public void onCreate(Bundle savedInstanceState) {

        super.onCreate(savedInstanceState);    
        setContentView(R.layout.main);

       Button continueButton = (Button) findViewById(R.id.continue_button);
       continueButton.setOnClickListener((OnClickListener) this);

       Button aboutButton = (Button)findViewById(R.id.about_button);
       aboutButton.setOnClickListener((OnClickListener) this);

       Button newButton = (Button)findViewById(R.id.new_game_button);
       newButton.setOnClickListener((OnClickListener) this);

       Button exitButton = (Button)findViewById(R.id.exit_button);
       exitButton.setOnClickListener((OnClickListener) this);

    }

    @Override
    public boolean onCreateOptionsMenu(Menu menu) {
        getMenuInflater().inflate(R.menu.main, menu);
        return true;
    }

} 
```

* * *

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-26T16:04:58.923

两者都是正确的，因为`Button`是 的子类`View`。但是您通常必须使用它`Button`，以便您可以向其添加侦听器和其他东西。

你真的应该看看你的应用程序的 logcat 输出。在那里，您会找到一个堆栈跟踪，可以帮助您识别问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-26T16:12:31.187

我认为问题出在您在按钮上设置点击侦听器的方式上。您使用它，但您的活动类没有实现该接口。我建议你这样做：

```
 View.OnClickListener clickHandler = new View.OnClickListener() {
    public void onClick(View v) {

    }
  }

  Button continueButton = (Button) findViewById(R.id.continue_button);
  continueButton.setOnClickListener(clickHandler);+- 
```

# c# - 正则表达式获取指定单词后的第一个单词

> ID：12131610
> 
> 赞同：1
> 
> 时间：2012-08-26T16:01:58.550
> 
> 标签：c#, regex

我是 Regex 世界的新手，想在示例中的单词之后找到第一个序列：

```
ALEEA NARCISELOR BL. A3 NR. 1 SC. B AP. 68 
```

我想找到后面的第一个词`NR`，在这种情况下是`1`，但可能是`A1`或`A`，但在这种情况下是`1`。

什么是正则表达式。

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-26T16:07:56.027

您可以使用的模式：

```
(?<=NR\.)\s?\w+ 
```

演示：[示例](http://regexr.com?31uqc)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-26T16:05:22.677

这应该做

```
(?<=(\s|^)NR\.\s*).*?(?=\s|$) 
```

# c# - 需要帮助在 SQL Server / MongoDB（具有层次结构）（在 C# 中）中创建 2 个相同的数据库

> ID：12131611
> 
> 赞同：0
> 
> 时间：2012-08-26T16:02:00.937
> 
> 标签：c#, sql-server, mongodb, mongodb-.net-driver

我正在创建一个简单的应用程序，它可以让我测试 SQL Server 与 MongoDB 的查询速度（在 C# 中）。为此，我需要创建两个相同且相当大的数据库（假设每个数据库有 1 百万条记录），其中涉及一些层次结构。

我的目标是在这里做一些非常简单的事情，每个实体都有id、名称和2-3个类别供搜索（例如颜色、形状等）。当然，树结构是必须的，就像目录树一样，一个实体可能是多个实体的子实体。

任何人都对如何创建和填充这样的 2 个数据库有一些简单的想法？

我正在考虑在 C# 中使用一些巨大的迭代同时创建两个数据库，并将随机值放入两者中，而不是创建一个数据库并将其合并到另一个数据库。

提前谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-26T18:07:03.320

MongoDB，比如那里的几个 NoSql 数据库，是非关系数据库，所以你不能真正比较它们，它们是针对不同的案例场景的。

我所做的是我有一个连接到 MS SQL 实例的管理界面，当用户点击**发布**时，我从 25 个不同的表中收集所有信息，并使用运行 LIVE 网站所需的相关数据创建一条记录.

有一些 NoSQL 方法，例如[MapReduce](http://en.wikipedia.org/wiki/MapReduce)，允许您加入文档集合，但它永远不会像关系数据库中的 JOIN。

# php - 如何测量客户端和服务器之间使用的网络带宽？

> ID：12131615
> 
> 赞同：7
> 
> 时间：2012-08-26T16:02:22.090
> 
> 标签：php, ios, networking, network-programming

我有一个从服务器获取 JSON 响应的客户端。我想计算多少请求/响应将消耗我从网络托管公司分配的传输津贴（例如每月 100GB）。

我如何测量/计算这个？

我假设我只需要测量一次，因为消息的长度和格式是一致的。

我可以控制客户端/服务器/网络。所有人都可以独特地专注于这项任务。客户端是 IOS 应用程序，服务器是 PHP REST Web 服务（在 Windows 上）。两者都在我的局域网上。

我对此一无所知，到目前为止刚刚使用`strlen()`. 这甚至朝着正确的方向前进吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-26T17:14:27.443

JSON 字符串的长度只为您提供传输的网络数据包中有效负载字段的大小。该数据域可以封装在一个HTTP包中，HTTP包在传输前需要放入IP包中。这些数据包中的每一个都具有有助于总传输长度的报头字段。

因此，要进行精确估计，您应该首先使用 Wireshark 或等效工具找到响应数据包的实际长度。如果这是您的应用程序的唯一请求类型，您可以将带宽划分为服务器应用程序的响应大小，以获得达到限制的最大请求数。但是，如果您的 Web 应用程序具有多个可从客户端访问的网页，则通常情况并非如此，因为任何访问（浏览）都会导致从服务器到客户端的数据传输。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-26T18:40:50.760

我会推荐使用[Charles Proxy](http://www.charlesproxy.com)。它是调试通过 HTTP 交换的各种信息的宝贵工具。您可以使用它来跟踪与您的 iPhone/iPod/iPad 以及模拟器之间的所有 HTTP/s 通信。

不幸的是，它不适用于大多数 Android 设备，因为它们并不真正支持配置系统范围的 HTTP 代理。对于这些情况和非基于 HTTP 的通信，我建议使用[WireShark](http://www.wireshark.org)。

在极少数情况下，由于我仍不清楚的原因，Charles 在 iOS 设备上很少会因基于 HTTP 的连接而失败——典型的例子是 GoogleAnalytics。对于那些，我再次推荐 WireShark。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-26T17:14:34.207

您的 Apache 日志将包含每个请求的字节数，但假设您想要一个完整的 PHP 解决方案，请将其添加到脚本的开头：

```
<?php
    function log_input() {
        # get raw post data
        $length = strlen(file_get_contents('php://input'));

        if (function_exists('apache_request_headers')) {
            # quick, but not accurate
            $length += strlen(serialize(apache_request_headers()));
        } else {
            # add fudge for HTTP/1.1 etc
            $length += strlen($_SERVER['QUERY_STRING']) + 14;
            foreach ($_SERVER as $k => $v) {
                if (preg_match('/^HTTP/i', $k)) {
                    $length += strlen($k) + strlen($v);
                }
            }
        }

        $s = sprintf("%s\t%s\n", date('c'), $length);
        file_put_contents('/tmp/input.log', $s, FILE_APPEND);
    }           

    function log_output() {
        $s = sprintf("%s\t%s\n", date('c'), ob_get_length());
        file_put_contents('/tmp/output.log', $s, FILE_APPEND);
    }

    log_input();
    register_shutdown_function('log_output'); 
    ob_start();

?>
<html> .... 
```

# c++ - ＃包括 Visual c++ 2010 无法正常工作

> ID：12131619
> 
> 赞同：0
> 
> 时间：2012-08-26T16:03:10.403
> 
> 标签：c++, visual-c++, namespaces, std, using

我知道标题有点模糊，但我现在想不出更好的标题。我的代码摘录如下所示：

```
#include<iostream>
#include<fstream>
int main(){
ifstream f("cuvinte.txt");
f.getline(cuvant);
return 0;
} 
```

当我想从“cuvinte.txt”中读取下一个单词时，我会写 f.getline(cuvant); 但我收到以下错误

```
error C2661: 'std::basic_istream<_Elem,_Traits>::getline' : no overloaded function takes 1 arguments 
```

我不知道问题是什么，前一阵子我偶然发现了这个问题，但仍然无法解决。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-26T16:07:49.020

> 我不知道问题是什么，前一阵子我偶然发现了这个问题，但仍然无法解决。

给[参考](http://en.cppreference.com/w/cpp/io/basic_istream/getline)！

```
basic_istream& getline( char_type* s, std::streamsize count ); 
```

您需要提供大小，即`cuvant`.

```
f.getline(cuvant, size);
                  ^^^^ 
```

* * *

### 编辑

另一种方法是使用更现代的仪器：

```
string cuvant;
getline(f, cuvant); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-26T16:51:42.150

您对各种形式的 getline 的熟悉程度似乎有些动摇。这里有几个简单的用法供大家参考：

```
#include <iostream>
#include <string>
#include <sstream>
#include <fstream>

using namespace std;

int main()
{
    string filepath = "test.txt";               // name of the text file
    string buffer;                              // buffer to catch data in
    string firstLine;                           // the first line of the file will be put here

    ifstream fin;

    fin.open(filepath);                         // Open the file
    if(fin.is_open())                           // If open succeeded
    {
        // Capture first line directly from file
        getline(fin,firstLine,'\n');            // Capture first line from the file.
        cout << firstLine << '\n';              // Prove we got it.

        fin.seekg(0,ios_base::beg);             // Move input pointer back to the beginning of the file.

        // Load file into memory first for faster reads,
        // then capture first line from a stringstream instead
        getline(fin,buffer,'\x1A');             // Capture entire file into a string buffer
        istringstream fullContents(buffer);     // Put entire file into a stringstream.
        getline(fullContents,firstLine,'\n');   // Capture first line from the stringstream instead of from the file.
        cout << firstLine << '\n';              // Prove we got it.

        fin.close();                            // Close the file
    }

    return 0;
} 
```

使用以下示例文件：

```
This is the first line.
This is the second line.
This is the last line. 
```

您将获得以下输出：

```
This is the first line.
This is the first line. 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-26T16:08:03.703

的原型`getline`是：

```
istream& getline (char* s, streamsize n );
istream& getline (char* s, streamsize n, char delim ); 
```

所以，正如错误信息明确指出的那样，你不能用一个参数来调用它......

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-26T16:14:58.033

假设`cuvant`是`std::string`，正确的调用是

```
std::getline(f, cuvant); 
```

# php - xpath 无法获取属性值

> ID：12131624
> 
> 赞同：-1
> 
> 时间：2012-08-26T16:04:19.940
> 
> 标签：php, xpath

那么htmo代码是这样的：

```
 <a href="javascript:my_win('.......'">
<img src="...." border=0>
<font color="red">title
</a>
</font> 
```

我只想为那些href包含单词的a识别颜色：

```
javascript:my_win 
```

这是我的查询：

```
$xpath->query('//a[contains(@href,"javascript:my_win")]/font'); 
```

但我什么也没得到。

如果我的查询更改为这个，我通常会得到所有的href，所以没有拼写错误的机会。

```
$elements = $xpath->query('//a'); 
```

如果我的查询更改为此 Every colot 正在打印出来。

```
$elements = $xpath->query('//a/font'); 
```

整个代码在这里：

```
$elements = $xpath->query('//a[contains(@href,"javascript:my_win")]/font');

foreach ( $elements as $element ) {

$str1=$element->getAttribute('color');

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-26T16:22:55.853

使用该`@`字符来引用 XPath 中的属性：

```
//a[contains(@href, 'some required text')] 
```

刚写`href`的时候，XPath 处理器会寻找一个名为的子元素`<href>`，其文本内容包含指定的字符串。

# java - 图像加解密

> ID：12131627
> 
> 赞同：0
> 
> 时间：2012-08-26T16:04:47.650
> 
> 标签：java, image, encryption, aes

我想对图像文件进行加密和解密。但是，当我运行此代码时，它给了我这个错误

```
Exception in thread "main" java.lang.ClassCastException: javax.crypto.CipherInputStream cannot be cast to javax.imageio.stream.ImageOutputStream
at encypt.com.trial.main(trial.java:82) 
```

当我试图打开sheepTest.png 图像时，它无法打开，因为文件似乎已损坏、损坏或太大。

我已经尝试了很多方法，但我仍然找不到错误。有人可以帮我解决错误吗？谢谢你。

```
public class trial {
   public static void main(String[] arg) throws Exception {

   // Scanner to read the user's password. The Java cryptography
   // architecture points out that strong passwords in strings is a
   // bad idea, but we'll let it go for this assignment.
   Scanner scanner = new Scanner(System.in);
   // Arbitrary salt data, used to make guessing attacks against the
   // password more difficult to pull off.
   byte[] salt = { (byte) 0xc7, (byte) 0x73, (byte) 0x21, (byte) 0x8c,
           (byte) 0x7e, (byte) 0xc8, (byte) 0xee, (byte) 0x99 };

   {
     File inputFile = new File("sheep.png");
      BufferedImage input = ImageIO.read(inputFile);
      Cipher cipher = Cipher.getInstance("AES/CBC/PKCS5Padding");
      SecretKeyFactory keyFac = SecretKeyFactory.getInstance("PBEWithMD5AndDES");
     // Get a password from the user.
     System.out.print("Password: ");
     System.out.flush();
     PBEKeySpec pbeKeySpec = new PBEKeySpec(scanner.nextLine().toCharArray());          
     // Set up other parameters to be used by the password-based
     // encryption.
     PBEParameterSpec pbeParamSpec = new PBEParameterSpec(salt, 20);
     SecretKey pbeKey = keyFac.generateSecret(pbeKeySpec);
     // Make a PBE Cyhper object and initialize it to encrypt using
     // the given password.
     Cipher pbeCipher = Cipher.getInstance("PBEWithMD5AndDES");
     pbeCipher.init(Cipher.ENCRYPT_MODE, pbeKey, pbeParamSpec);
     FileOutputStream output = new FileOutputStream("sheepTest.png");
     CipherOutputStream cos = new CipherOutputStream(
            output, pbeCipher);
       //File outputFile = new File("image.png");
         ImageIO.write(input,"PNG",cos);
      cos.close();          

   }
   // Now, create a Cipher object to decrypt for us. We are repeating
   // some of the same code here to illustrate how java applications on
   // two different hosts could set up compatible encryption/decryption
   // mechanisms.
  {
       File inputFile = new File("sheepTest.png");
         BufferedImage input = ImageIO.read(inputFile);
       // Get another (hopefully the same) password from the user.
      System.out.print("Decryption Password: ");
       System.out.flush();
       PBEKeySpec pbeKeySpec = new PBEKeySpec(scanner.next().toCharArray());
       // Set up other parameters to be used by the password-based
       // encryption.
       PBEParameterSpec pbeParamSpec = new PBEParameterSpec(salt, 20);
       SecretKeyFactory keyFac = SecretKeyFactory
               .getInstance("PBEWithMD5AndDES");
       SecretKey pbeKey = keyFac.generateSecret(pbeKeySpec);
       // Make a PBE Cyper object and initialize it to decrypt using
       // the given password.
       Cipher pbeCipher = Cipher.getInstance("PBEWithMD5AndDES");
       pbeCipher.init(Cipher.DECRYPT_MODE, pbeKey, pbeParamSpec);
       // Decrypt the ciphertext and then print it out.
       /*byte[] cleartext = pbeCipher.doFinal(ciphertext);
       System.out.println(new String(cleartext));*/
       FileInputStream output = new FileInputStream("sheepTest.png");
       CipherInputStream cos = new CipherInputStream(
              output, pbeCipher);
        ImageIO.write(input,"PNG",(ImageOutputStream) cos);
        cos.close();

   }
   }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-26T16:12:24.967

首先，不要命名您的 FileInputStream 输出。其次，问题是您尝试在此处将 CipherInputStream 转换为图像输出流（如错误所示）：

```
ImageIO.write(input,"PNG",(ImageOutputStream) cos); 
```

这不起作用，因为 CipherInputStream 不是 ImageOutputStream。

* * *

好吧，发现你的命名还有一个问题；我认为您命名正确，但使用了错误的类；将您的最后几行更改为：

```
 FileOutputStream output = new FileOutputStream("sheepTest.png");
        CipherOutputStream cos = new CipherOutputStream(output, pbeCipher);
        ImageIO.write(input, "PNG", cos);
        cos.close(); 
```

对于写出**，**你想使用一个 OutputStream （或 FileOutputStream 或 Cipher 或任何你需要的）。

# asp.net - sql server中bulkinsert之前的验证

> ID：12131631
> 
> 赞同：0
> 
> 时间：2012-08-26T16:05:11.667
> 
> 标签：asp.net, sql-server-2005

我想从包含大约十万条记录的文本文件中导入数据

我正在使用批量插入这样做

```
BULK
INSERT vw_bulk_insert_test
FROM '\\server\c$\csvtext.txt'--\\server\SQLEXPRESS\csvtest.txt'
WITH
(FIRSTROW=2,
check_CONSTRAINTS,
FIELDTERMINATOR = '~',
ROWTERMINATOR = '\n'
)
GO 
```

但是在插入之前，我想在不使用游标的情况下验证每一列的值。就像第二行将包含除 unit_number(Column) 之外的所有字段的值一样，那么它应该创建一个错误日志，指定缺少 unit_number 值。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-26T16:55:06.510

就个人而言，我会批量插入临时表，然后使用 TSQL 或 TSQL 以为此目的创建的存储过程的形式将临时表中的内容验证/转换到最终将驻留的表中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-26T16:49:38.537

你有这个语法

```
BULK INSERT 
   [ database_name . [ schema_name ] . | schema_name . ] [ table_name | view_name ] 
      FROM 'data_file' 
     [ WITH 
    ( 
   [ [ , ] BATCHSIZE = batch_size ] 
   [ [ , ] CHECK_CONSTRAINTS ] 
   [ [ , ] CODEPAGE = { 'ACP' | 'OEM' | 'RAW' | 'code_page' } ] 
   [ [ , ] DATAFILETYPE = 
      { 'char' | 'native'| 'widechar' | 'widenative' } ] 
   [ [ , ] FIELDTERMINATOR = 'field_terminator' ] 
   [ [ , ] FIRSTROW = first_row ] 
   [ [ , ] FIRE_TRIGGERS ] 
   [ [ , ] FORMATFILE = 'format_file_path' ] 
   [ [ , ] KEEPIDENTITY ] 
   [ [ , ] KEEPNULLS ] 
   [ [ , ] KILOBYTES_PER_BATCH = kilobytes_per_batch ] 
   [ [ , ] LASTROW = last_row ] 
   [ [ , ] MAXERRORS = max_errors ] 
   [ [ , ] ORDER ( { column [ ASC | DESC ] } [ ,...n ] ) ] 
   [ [ , ] ROWS_PER_BATCH = rows_per_batch ] 
   [ [ , ] ROWTERMINATOR = 'row_terminator' ] 
   [ [ , ] TABLOCK ] 
   [ [ , ] ERRORFILE = 'file_name' ] 
    )] 
```

# javascript - jQuery 图像预加载

> ID：12131634
> 
> 赞同：3
> 
> 时间：2012-08-26T16:05:27.500
> 
> 标签：javascript, jquery, image-preloader

我有一个 Web 应用程序，其中有一些图像。

开始时会在我的页面中显示一个叠加层，并且会在所有图像加载时自动淡出。

我需要这样的东西

它的粗略代码

```
var image1="image1.jpg";
var image2="image2.jpg";
var image4="image4.jpg";

image1 & image2 & image4 loaded then fadeout #preload and show content. 
```

请帮助我......我试过这个..但没有工作..

```
var img1 = new Image();
img1.src = "../images/wall.jpg";

img1.onload = function() {
    alert("loaded");
}; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-26T16:12:26.693

```
var images_loading = $('img').length;
$('img').load(function(){
  if(!--images_loading) {
    // all images loaded
  }
}); 
```

请注意，您不能`display:none`用来隐藏图像。

使用`display:none`将阻止您的浏览器下载图像。`visibility:hidden`取而代之的是用户。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-26T16:16:35.893

[试试这个小提琴](http://jsfiddle.net/fWD5M/)。我主要使用原始 javascript 来制作它。

如果你愿意，你可以使用 jQuerys`.load`替换`onload`函数，并[追加](http://api.jquery.com/append/)替换`appendChild`

# c# - 铸造衍生A 到 BaseA

> ID：12131645
> 
> 赞同：0
> 
> 时间：2012-08-26T16:07:15.823
> 
> 标签：c#, generics, casting

我正在编写一个事件系统，并且在尝试存储不同泛型类型的事件时遇到了一个绊脚石。

事件定义如下：

```
public delegate void EventHandler<EventInfo>(object sender, EventInfo eventInfo) where EventInfo : IEventInfo;

public interface IEventInfo { }

public interface IEvent<EventInfo> where EventInfo : IEventInfo
{
    void Publish(object sender, EventInfo e);
    void Subscribe(EventHandler<EventInfo> evtHandler);
    void Unsubscribe(EventHandler<EventInfo> evtHandler);
}

public class Event<EventInfo> : IEvent<EventInfo> where EventInfo : IEventInfo
{
    private event EventHandler<EventInfo> eventHandler;

    public void Publish(object sender, EventInfo e)
    {
        if (eventHandler != null)
            eventHandler(sender, e);
    }

    public void Subscribe(EventHandler<EventInfo> evtHandler)
    {
        this.eventHandler -= evtHandler;
        this.eventHandler += evtHandler;
    }

    public void Unsubscribe(EventHandler<EventInfo> evtHandler)
    {
        this.eventHandler -= evtHandler;
    }
} 
```

这个模型似乎适用于订阅和发布，但我实现自己的事件类的主要原因是我可以将它与事件聚合器一起使用，从而使我能够解耦我的组件：

```
public class EventAggregator
{
    private IDictionary<Type, IEvent<IEventInfo>> dictionary;

    public EventAggregator()
    {
        this.dictionary = new Dictionary<Type, IEvent<IEventInfo>>();
    }

    public EventType GetEvent<EventType>() where EventType : class, IEvent<IEventInfo>, new()
    {
        IEvent<IEventInfo> evt;
        Type evtType = typeof(EventType);
        if (!dictionary.TryGetValue(evtType, out evt))
            dictionary[evtType] = evt = new EventType();
        return evt as EventType;
    }
} 
```

上述函数不适用于派生`EventInfo`类。例如：

```
public class FooEventInfo : IEventInfo { }
public class FooEvent : Event<FooEventInfo> { }

EventAggregator ea = new EventAggregator();
var x = ea.GetEvent<FooEvent>(); // Error 3: The type 'TestEvent' cannot be used as type parameter 'EventType' in the generic type or method 'EventAggregator.GetEvent<EventType>()'. There is no implicit reference conversion from 'TestEvent' to 'IEvent<IEventInfo>'. 
```

鉴于和`TestEvent : Event<TestEventInfo>`，为什么这个演员会失败？`Event<TestEventInfo> : IEvent<TestEventInfo>``TestEventInfo : IEventInfo`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-26T16:37:13.390

因为`Event<FooEventInfo>`不兼容`IEvent<IEventInfo`。

如果你有一个`T'`派生自的类型`T`，那并不意味着`A<T'>`派生自或以任何方式兼容`A<T>`！

举这个例子

```
class Animal { ... }
class Dog : Animal { ... }
class Cat : Animal { ... }

List<Animal> animals = new List<Dog>(); // Seems to be possible
animals.Add(new Dog());
animals.Add(new Cat()); // Crashhhh! 
```

添加一个`Cat`to`animals`应该是可能的，但是因为该列表实际上是一个狗列表，所以您会将 a 添加`Cat`到`Dog`-list 中！因此这两种类型不能兼容！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-26T16:13:15.830

在我看来，您遇到了 C# 不支持协方差的事实。看一下[这篇](http://buiba.blogspot.com/2009/06/so-i-get-onto-phone-for-my-first-job.html)文章，了解 C# 中的协变/逆变，以及他提出的（丑陋的）解决方法。

[这](http://blogs.msdn.com/b/ericlippert/archive/2007/10/16/covariance-and-contravariance-in-c-part-one.aspx)是对所讨论概念的更深入解释。

# c# - 从 CodeIgniter 迁移到 ASP.NET - 不了解默认控制器操作

> ID：12131646
> 
> 赞同：0
> 
> 时间：2012-08-26T16:07:15.097
> 
> 标签：c#, asp.net-mvc

我对 CodeIgniter 很熟悉，所以我不是新手，但是当我使用 C#/.NET 迁移到 MVC 时，我确实觉得自己像一个新手。我希望调用下面的控制器会正确地将 URL 的斜杠分隔参数绑定到控制器输入参数。例如：我希望`http://localhost/Download/51`给 fileID=51。但是，当我运行它时，调用控制器时 fileID 为空。任一 HttpGet 都需要带有 ? 的查询字符串？和 & 或需要以某种方式修改路由以正确绑定。请帮忙？

```
[HttpGet]
    public ActionResult Download(String fileID)                
    {
    ....// http://localhost/Download/51 
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-26T16:09:11.157

使用`id`which 是您在以下配置中配置的默认路由参数名称`Global.asax`：

```
[HttpGet]
public ActionResult Download(string id)
{
    ....// http://localhost/Download/51 
} 
```

或更改您的路由配置，以便`fileID`使用：

```
routes.MapRoute(
    "Default",
    "{controller}/{action}/{fileid}",
    new { controller = "Home", action = "Index", fileid = UrlParameter.Optional }
); 
```

另请查看[以下内容](http://www.asp.net/mvc/overview/controllers-and-routing)以获取有关路由的更多详细信息。

# ajax - Ajax 错误请求返回“false”而不是文本

> ID：12131654
> 
> 赞同：0
> 
> 时间：2012-08-26T16:08:04.390
> 
> 标签：ajax, asp.net-mvc-3

在 FireBug 我看到

```
 "NetworkError: 500 Internal Server Error -
 http://hostname:5987/controllerName/PageName?input=asdf%20%3Cd%20" 
```

代码

```
 $.ajax({
                url: url,
                dataType: 'json',
                type: 'GET',
                success: function (data) {
                    alert("Success message " + data);
                },
                error: function () {
                    alert('An Error occured.  Invalid characters include '<'');
                }
            }); 
```

失败时，我希望看到我的错误消息，但消息却显示为“假”。如何解决此问题以显示我的错误？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-26T16:15:21.590

我认为你只是在你的错误函数中有一个错字，你最终会比较两个字符串`<`，在这种情况下返回`false`；

```
alert('An Error occured.  Invalid characters include '<''); 
```

应该是；

```
alert('An Error occured.  Invalid characters include \'<\''); 
```

# ruby-on-rails - ruby 中的条件语句

> ID：12131656
> 
> 赞同：1
> 
> 时间：2012-08-26T16:08:17.823
> 
> 标签：ruby-on-rails, syntax

我正在尝试在 rails 中编写 Helper 方法，但它会抛出以下行的错误

```
#if button_source.kind_of?(Array) then list = button_source else list = button_source.sort 
```

完整的代码

```
def buttons(model_name, target_property, button_source)
html = ''
list = ''
if button_source.kind_of?(Array) then list = button_source else list = button_source.sort end
list = button_source.sort
list.each do|x|
    html << radio_button(model_name, target_property, x[1])
    html << h(x[0])
    html << '<br />'
end
    return html
end 
```

请帮我解决这个问题，谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-26T16:15:12.543

您在 if 语句的末尾缺少 end 。

# jquery - 从 jquery $.ajax 到 angular $http

> ID：12131659
> 
> 赞同：122
> 
> 时间：2012-08-26T16:08:40.073
> 
> 标签：jquery, ajax, angularjs, cross-domain, angular-http

我有这段 jQuery 代码可以很好地跨源：

```
jQuery.ajax({
    url: "http://example.appspot.com/rest/app",
    type: "POST",
    data: JSON.stringify({"foo":"bar"}),
    dataType: "json",
    contentType: "application/json; charset=utf-8",
    success: function (response) {
        console.log("success");
    },
    error: function (response) {
        console.log("failed");
    }
}); 
```

现在我试图将其转换为 Angular.js 代码，但没有成功：

```
$http({
    url: "http://example.appspot.com/rest/app",
    dataType: "json",
    method: "POST",
    data: JSON.stringify({"foo":"bar"}),
    headers: {
        "Content-Type": "application/json; charset=utf-8"
    }
}).success(function(response){
    $scope.response = response;
}).error(function(error){
    $scope.error = error;
}); 
```

任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：202
> 
> 时间：2012-08-26T16:40:49.257

AngularJS 调用 $http 的方式如下所示：

```
$http({
    url: "http://example.appspot.com/rest/app",
    method: "POST",
    data: {"foo":"bar"}
}).then(function successCallback(response) {
        // this callback will be called asynchronously
        // when the response is available
        $scope.data = response.data;
    }, function errorCallback(response) {
        // called asynchronously if an error occurs
        // or server returns response with an error status.
        $scope.error = response.statusText;
}); 
```

或者可以使用快捷方法更简单地编写：

```
$http.post("http://example.appspot.com/rest/app", {"foo":"bar"})
.then(successCallback, errorCallback); 
```

有很多事情需要注意：

*   AngularJS 版本更简洁（尤其是使用 .post() 方法）
*   AngularJS 将负责将 JS 对象转换为 JSON 字符串并设置标题（这些是可定制的）
*   回调函数分别被命名（`success`也`error`请注意每个回调的参数） - 在 Angular v1.5 中已弃用
*   改用`then`函数。
*   更多`then`使用信息可以在[这里找到](https://stackoverflow.com/questions/35329384/why-are-angular-http-success-error-methods-deprecated-removed-from-v1-6)

以上只是一个简单的示例和一些提示，请务必查看 AngularJS 文档以获取更多信息： http: [//docs.angularjs.org/api/ng.$http](http://docs.angularjs.org/api/ng.$http)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-09-16T14:32:09.483

我们可以在 AngularJs 中使用 http 服务来实现 ajax 请求，这有助于从远程服务器读取/加载数据。

$http服务方法如下，

```
 $http.get()
 $http.post()
 $http.delete()
 $http.head()
 $http.jsonp()
 $http.patch()
 $http.put() 
```

示例之一：

```
 $http.get("sample.php")
        .success(function(response) {
            $scope.getting = response.data; // response.data is an array
    }).error(){

        // Error callback will trigger
    }); 
```

[http://www.drtuts.com/ajax-requests-angularjs/](http://www.drtuts.com/ajax-requests-angularjs/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-03-30T10:08:49.900

你可以使用这个：

下载“角后修复”：“^0.1.0”

然后在声明 Angular 模块时将“httpPostFix”添加到您的依赖项中。

参考：[https ://github.com/PabloDeGrote/angular-httppostfix](https://github.com/PabloDeGrote/angular-httppostfix)

* * *

## 回答 #4

> 赞同：-5
> 
> 时间：2014-03-11T16:31:29.517

您可以使用 $.param 分配数据：

```
 $http({
  url: "http://example.appspot.com/rest/app",
  method: "POST",
  data: $.param({"foo":"bar"})
  }).success(function(data, status, headers, config) {
   $scope.data = data;
  }).error(function(data, status, headers, config) {
   $scope.status = status;
 }); 
```

看看这个：[AngularJS + ASP.NET Web API 跨域问题](https://stackoverflow.com/questions/11786562/angularjs-asp-net-web-api-cross-domain-issue)

# delphi - 如何在运行时获取表单实例？

> ID：12131665
> 
> 赞同：3
> 
> 时间：2012-08-26T16:09:46.387
> 
> 标签：delphi, delphi-xe2

在我的应用程序中，我需要以多个表单显示数据，这些表单具有完全相同的 VCL、事件和过程，因为这些表单的数量取决于我的应用程序，所以我无法在设计时创建所有这些表单。

或者如何在运行时多次复制表单？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-26T16:29:50.550

假设您的表单被声明为 TForm2，您可以轻松地创建 10 个这样的实例：

```
var 
  myForms: TArray<TForm2>;
  I: Integer;
begin
  SetLength(myForms, 10);
  for I:=0 to 9 do begin
    myForms[I] := TForm2.Create(Application);  // Application will free the forms on exit
    myForms[I].Show;
  end;
end; 
```

如果您不需要访问表单实例，您可以完全省略数组并编写：

```
var 
  I: Integer;
begin
  for I:=0 to 9 do begin
    TForm2.Create(Application).Show;  // Application will free the forms on exit
  end;
end; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-26T18:59:13.780

要创建数量不定的表格，您可以使用此代码..

```
private
   MyForm: array of TForm;

procedure TForm1.CreateForms(Sender: TObject);
begin
  SetLength(MyForm, Length(MyForm) + 1);
  MyForm[Length(MyForm) - 1] := TForm1.Create(Self);
  MyForm[Length(MyForm) - 1].Name := 'Form' + IntToStr(Length(MyForm));
  MyForm[Length(MyForm) - 1].Caption := 'Form' + IntToStr(Length(MyForm));
  MyForm[Length(MyForm) - 1].Show;
end; 
```

# php - 级联下拉框

> ID：12131666
> 
> 赞同：2
> 
> 时间：2012-08-26T16:10:11.860
> 
> 标签：php, javascript, mysql, dynamic, cascadingdropdown

我使用了各种脚本并尝试修改它们以适应我的数据库，但这就是我想要实现的

MySQL 数据库，单表“Carlist”

我想整理一个表单，用户将从数据库中选择“Make”，然后过滤“Model”的第二个下拉框，然后第三个下拉框将过滤掉该特定模型的不同变体。

MY 数据库具有 Make、Model 和 Version 字段

```
Box 1: SELECT DISTINCT Make FROM Carlist SORT BY Make
Box 2: SELECT Distinct Model FROM Carlist WHERE Make=$Make SORT BY Model
Box 3: SELECT DISTINCT Version FROM Carlist WHERE Make=$Make AND Model=$Model SORT BY Version 
```

我还想设置一个机制，在前一个框被选中之前，无法选择第二个和第三个框

我遇到的所有脚本都使用数据库中的多个表，目前我的数据库有超过 1500 条记录。

如果有人对此有任何有用的链接或建议，那就太好了，如上所述，我试图修改其他人的脚本但没有成功，但这些脚本是为多个表设计的

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-26T16:42:00.393

假设您正在尝试填写 HTML 表单，请使用 Ajax 在每次选择后从数据库中获取适当的下拉框值。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-28T11:16:36.450

得到了解决方案，代码如下：

```
<?php 
/* Written for Khaoskreations 2010-06-13 */

//db connect code
require "config.php"; // Your Database details

$query = "SELECT * FROM Carlist ";
$result = mysql_query($query);

//==============================================================================build arrays from db
$Make = array();
$Model = array();
$Version = array();

if (!$result) echo "Error: ".mysql_error();
else {
    $Make_group = "";
    $Model_group = "";
    $num = mysql_num_rows($result);

    for ($i = 0;$i<$num;$i++) {
        $r = mysql_fetch_array($result);

        if ($r['Make'] != $Make_group) {
            $Make[$r['Make']] = $r['Make'];
            $Model[$r['Make']][$r['Model']] = $r['Model'];
            $Version[$r['Make']][$r['Model']][$r['Version']] = $r['Version'];

            $Make_group = $r['Make'];
            $Model_group = $r['Make'];
        } else if ($r['Model'] != $Model_group) {
            $Model[$r['Make']][$r['Model']] = $r['Model'];
            $Version[$r['Make']][$r['Model']][$r['Version']] = $r['Version'];

            $Model_group = $r['Make'];
        } else {
            $Version[$r['Make']][$r['Model']][$r['Version']] = $r['Version'];
        }
    }
}

//==============================================================================create scripts
$script = "\n<script type='text/javascript'>\n";
//build last name array
$script .= "var Make = new Array(";
$list = "";
foreach ($Make as $key => $val) {
    $list .= " \"".$val."\",";
    //echo $val ."<br />";
}
$list = substr($list, 0, -1);
$list .= " );\n";
$script .= $list;
$list = "";
//build Model array
$script .= "\nvar Model = new Array();";
foreach ($Model as $Maken => $fary) {
    $list .= "\nModel[\"".$Maken."\"] = new Array(";
    foreach ($fary as $key => $value) {
        $list .= " \"". $value . "\",";
    }
    $list = substr($list, 0, -1);
    $list .= " );";
}

$script .= $list;
$list = "";
//build Version array
$list = "\nvar Version = new Array();";
foreach ($Version as $Maken => $fary) {
    $list .= "\nVersion[\"".$Maken."\"] = new Array();";
    foreach ($fary as $Modeln => $aary) {
        $list .= "\nVersion[\"".$Maken."\"][\"".$Modeln."\"] = new Array(";
        foreach ($aary as $key => $value) {
            $list .= " \"" . $value . "\",";
        }
        $list = substr($list, 0, -1);
        $list .= " );";
    }
}
$script .= $list;

//script functions to update tiers

$script .= <<< EOSCRIPT

function resetForm(theForm) {
    theForm.Makes.options[0] = new Option("--- Select Make ---", "");
    for (var i=0; i<Make.length; i++) {
        theForm.Makes.options[i+1] = new Option(Make[i], Make[i]);
    }
    theForm.Makes.options[0].selected = true;

    theForm.Models.options[0] = new Option("--- Select Model ---", "");
    theForm.Models.options[0].selected = true;
    theForm.Version.options[0] = new Option("--- Select Version ---", "");
    theForm.Version.options[0].selected = true;
    document.getElementById("selectbox").innerHTML = "";
}

function reloadForm(theForm,Manufacturer,product,specific) {
    theForm.Makes.options[0] = new Option("--- Select Version ---", "");
    for (var i=0; i<Make.length; i++) {
        theForm.Makes.options[i+1] = new Option(Make[i], Make[i]);
        if (Manufacturer == Make[i]) theForm.Makes.options[i+1].selected = true;
    }
    document.getElementById("selectbox").innerHTML = "here";

    var fn = Model[Manufacturer];

    theForm.Models.options.length = 0;
    for (var i=0; i<fn.length; i++) {
        theForm.Models.options[i] = new Option(fn[i], fn[i]);
        if (product == fn[i]) {
            theForm.Models.options[i].selected = true;
        }
    }

    var Versions = Version[Manufacturer][product];

    theForm.Version.options.length = 0;
    for (var i=0; i<Versions.length; i++) {
        theForm.Version.options[i] = new Option(Versions[i], Versions[i]);
        if (specific == Versions[i][0]) {
            theForm.Version.options[i].selected = true;
        }
    }
    document.getElementById("selectbox").innerHTML = "You selected person #"+specific;
}

function updateproducts(theForm) {
    var lname = theForm.Makes.options[theForm.Makes.options.selectedIndex].value;
    var fnames = Model[lname];

    theForm.Models.options.length = 0;
    for (var i=0; i<fnames.length; i++) {
        theForm.Models.options[i] = new Option(fnames[i], fnames[i]);
    }

    var findex = theForm.Models.options[theForm.Models.options.selectedIndex].value;
    var Versions = Version[lname][findex];

    theForm.Version.options.length = 0;
    for (var i=0; i<Versions.length; i++) {
        theForm.Version.options[i] = new Option(Versions[i], Versions[i]);
    }
    theForm.Version.options[0].selected = true;
}

function updateVersion(theForm) {
    var lname = theForm.Makes.options[theForm.Makes.options.selectedIndex].value;
    var findex = theForm.Models.options[theForm.Models.options.selectedIndex].value;
    var Versions = Version[lname][findex];

    theForm.Version.options.length = 0;
    for (var i=0; i<Versions.length; i++) {
        theForm.Version.options[i] = new Option(Versions[i], Versions[i]);
    }
    theForm.Version.options[0].selected = true;
}

</script>

EOSCRIPT;

$reload_script = "";
if ($_POST['Makes'] != "" && $_POST['Models'] != "") {
    $reload_script .= "<script type='text/javascript'> "
            ."reloadForm(document.vehicleform,'".$_POST['Makes']."','".$_POST['Models']."',".$_POST['Version'].");"
            ."</script>";
} else {
    $reload_script .= "<script type='text/javascript'>"
            ."resetForm(document.vehicleform);"
            ."</script>";
}

//============================================================================== build page

$page = <<< EOPAGE
<html>
    <head>
        {$script}
    </head>
    <body>
        <form method="post" action="test3.php" name='vehicleform'>
            <select name='Makes' onchange="updateproducts(this.form)"></select><BR>
            <select name="Models" onchange="updateVersion(this.form)"></select><BR>
            <select name="Version"></select>
            <input type='button' value='Reset' onclick='resetForm(document.vehicleform)'/>
            <input type='submit' value='Reload'/>
        </form>
        <div id='selectbox'></div>
        {$reload_script}
    </body>
</html>

EOPAGE;

echo $page;

?> 
```

# javascript - 在动画记录发布动画值之前存储宽度值

> ID：12131667
> 
> 赞同：1
> 
> 时间：2012-08-26T16:10:14.277
> 
> 标签：javascript, jquery

它有点晚了，如果我犯了一个愚蠢的错误，请原谅我。出于某种原因，以下代码：

```
$(".myClass").each(function(){
    widths[$(this).attr("id")] = $(this).width();   
    if ($(this).attr("id")  != $(clickedExpand).attr("id"))
    {
        $(this).animate({
            width: '10px'
        });
    }

}); 
```

数组初始化为

```
var widths = new Array(); 
```

在代码的前面。出于某种原因，尽管我在动画开始之前记录了宽度，但我在数组中获得了动画后的值。似乎动画结束了，然后值被记录下来。我试图将它从函数中取出并将其包装在另一个 .each 中，但我得到了相同的结果。

任何帮助将不胜感激！

整个代码：

```
var slateWidths = {};
$(".slateExpand").click(function(){
    var clickedExpand = $(this).closest(".slate");

    $(".slate").each(function(){
        slateWidths[$(this).attr("id")] = $(this).outerWidth();   
        if ($(this).attr("id")  != $(clickedExpand).attr("id"))
        {
            $(this).animate({
                width: '10px'
            });
            $(this).find($('.slateExpand')).hide();
        }

    });

    $(this).text("Restore");
    $(this).removeClass("slateExpand").addClass("slateRestore");
    $(".slateRestore").on("click",function(){

        $(".slate").each(function()
        {
            alert(slateWidths[$(this).attr("id")]);
            //var width = slateWidths[$(this).attr("id")];
            $(this).animate({
                width: slateWidths[$(this).attr("id")]
                });
        });
    });
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-26T16:30:25.413

```
// first of all save all widths for all .slate
var slateWidths = {};
$(".slate").each(function(){
    slateWidths[$(this).attr("id")] = $(this).width();
});

$(".slateExpand").click(function(){
    var $slate = $(this).closest('slate');    

    if($slate.hasClass('hidden')) {

        $slate.animate({
            width: slateWidths[$slate.attr('id')]
        });
        $(this).text("hide");
        $slate.removeClass("hidden")        
    }else{

        $slate.animate({
            width: '10px'
        });
        $(this).text("Restore");
        $slate.addClass("hidden")
    }    
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-26T16:42:29.847

好的，如果您遇到类似的问题，有一个简单的解决方案。问题是尽管类发生了变化，但点击并没有从 div 中解除事件的绑定。结果，它首先重新运行记录宽度的代码。这会导致动画无法播放，因为现在之前的宽度与当前的宽度相同。要解决这个问题，只需添加

```
 $("theDiv").unbind("click); 
```

删除事件处理程序。这将防止触发上一个类的单击事件。

# c - 未分配指向 C 样式字符串的指针

> ID：12131668
> 
> 赞同：2
> 
> 时间：2012-08-26T16:10:33.403
> 
> 标签：c

```
#include <stdio.h>

int main() {
    char *t = "hello world";
   puts(t);
   //printf("%s", t);
   t = "goodbye world";
   puts(t);
} 
```

t 的内存没有分配，那么为什么我在运行它时没有出现段错误？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-26T16:12:44.493

t 是一个指针，所以你只是让 t 指向另一个字符串。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-08-26T16:12:51.780

因为字符串文字是在程序内存中静态分配的 - 您不需要显式地为它们分配内存。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-26T16:40:11.683

内存分配给*;* `t`为其分配了足够的内存来保存指针（通常，在 32 位程序中为 4 个字节，在 64 位程序中为 8 个字节）。

此外，初始化`t`确保指针指向某处：

```
char *t = "hello world"; 
```

字符串文字也在某处分配了空间。通常，这是在内存的只读部分，所以你真的应该使用`const char *t = "hello world";`，即使你不使用显式`const`，你也不应该尝试修改`t`指向的字符串。但是编译器的问题是确保`t`指向有效的地方。

同样，赋值后：

```
t = "goodbye, Cruel World!"; 
```

该变量指向编译器分配的空间。只要您不滥用它（并且您的代码没有），这很好。

会让你陷入麻烦的是这样的事情：

```
char *t;
puts(t);   // t is uninitialized; undefined behaviour
t = 0;     // equivalently, t = NULL;
puts(t);   // t contains the null pointer; undefined behaviour 
```

未初始化的局部变量可以包含任何值；你无法可靠地预测会发生什么。在某些机器上，它可能包含空指针并导致崩溃，但这不是您可以依赖的。

空指针不指向任何有效的东西，因此取消引用空指针会导致未定义的行为，而且这种未定义的行为通常会导致崩溃。（经典地，在 DEC VAX 机器上，您在地址零处得到一个零字节而不是崩溃。这（部分）导致[亨利斯宾塞的](http://www.seebs.net/c/10com.html) [十诫](http://www.lysator.liu.se/c/ten-commandments.html)之一“全世界都不是 VAX”——以及“你不应该跟随 NULL 指针，因为混乱和疯狂在它的尽头等待着你。”）

因此，在您的程序中，内存被分配`t`并`t`初始化并分配为指向（只读）字符串常量，因此程序没有任何借口崩溃。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-08-26T16:35:31.663

`t`这里是一个指向匿名字符串第一个字符的指针，它可以在只读内存中。一个好主意是将指针声明为指向的指针`const char`：

```
const char *t = "hello world"; 
```

另请参见[此处](http://c-faq.com/decl/strlitinit.html)。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-08-26T16:38:13.703

编译器需要分配的所有内存`t`是 32 位系统上的 4 个字节。请记住，它只是一个指针。在前几行中，它指向“hello world”，但之后您将其更改为指向“goodbye world”。C 将为您定义的字符串分配足够的内存并将指针传递给您，以便您可以指向它们。你不必担心这一点。还要记住，这些字符串是静态的和只读的，这意味着你不能安全地说`t[4] = 'b';`.

# java - java.net.BindException：权限被拒绝为 root

> ID：12131673
> 
> 赞同：2
> 
> 时间：2012-08-26T16:11:05.043
> 
> 标签：java, exception, port

我在[http://docs.oracle.com/javase/tutorial/networking/sockets/clientServer.html](http://docs.oracle.com/javase/tutorial/networking/sockets/clientServer.html)关注 Oracle 的 ServerSide Socket 教程。我使用他们提供的来源：

*   [http://docs.oracle.com/javase/tutorial/networking/sockets/examples/KnockKnockServer.java](http://docs.oracle.com/javase/tutorial/networking/sockets/examples/KnockKnockServer.java)
*   [http://docs.oracle.com/javase/tutorial/networking/sockets/examples/KnockKnockProtocol.java](http://docs.oracle.com/javase/tutorial/networking/sockets/examples/KnockKnockProtocol.java)

但是，当我尝试运行 KnockKnockServer 时，我得到一个 IOException 然后服务器打印

```
Could not listen on port: 4444. 
```

我`e.printStackTrace()`在 IOException catch 块中添加了一个，并得到：

```
[beni@mackerel:~]$ \sudo java KnockKnockServer
Creating socket
Could not listen on port: 4444.
java.net.BindException: Permission denied
    at java.net.PlainSocketImpl.socketBind(Native Method)
    at java.net.PlainSocketImpl.bind(PlainSocketImpl.java:383)
    at java.net.ServerSocket.bind(ServerSocket.java:328)
    at java.net.ServerSocket.<init>(ServerSocket.java:194)
    at java.net.ServerSocket.<init>(ServerSocket.java:106)
    at KnockKnockServer.main(KnockKnockServer.java:41) 
```

请注意，我以 root 身份运行它并尝试打开端口 4444。为什么我仍然收到 Permission denied 错误？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-26T20:35:31.030

我设法解决了这个问题。我放开了手！安装在我的系统上，但禁用了菜单栏中的所有规则。KnockKnockServer 仍然无法打开端口。现在我已经卸载了 Hands Off！完全，并且可以像往常一样打开端口。

这仍然有点令人惊讶，因为我总是能够`nc -l 4444`使用 C 程序打开相同的套接字端口，但不能使用 Java。但与此同时，Hands Off 并没有问我是否要允许我的 KnockKnockServer 打开一个端口。

我会跟进 Hands Off 支持，也许他们可以提供帮助。

谢谢，问候本尼迪克特

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-26T16:36:17.780

我能想到的唯一解释是 SELinux 拒绝了绑定。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-26T16:37:06.133

4444 端口被另一个程序使用。

转到任务管理器和进程选项卡检查任何 javaw.exe 正在运行。结束程序。然后运行你的程序

# java - 将变量从一个 jframe 传递到另一个而不关闭它们

> ID：12131676
> 
> 赞同：1
> 
> 时间：2012-08-26T16:11:21.677
> 
> 标签：java, swing, jframe

我正在制作数据库应用程序，我正在为这个问题苦苦挣扎一周。我也不确定如何发布我的问题的标题，但我希望你能理解。我有两个框架：城市和国家。

城市框架：

![在此处输入图像描述](../Images/132747e1c57093dd7b13a2f5d90a8707.png) 国家框架：

![在此处输入图像描述](../Images/c53baf993c3c65ef21f2289131e9a0d1.png)

当我单击城市框架中的“搜索”按钮时，它会打开一个国家框架。当我点击国家框架中的表格时，它通过这种方法将选定行和列“国家”中的值传递到变量 tableValCountry 中：

```
table.addMouseListener(new MouseListener(){

        @Override
        public void mouseClicked(MouseEvent e) {
            int selRow = table.getSelectedRow();

            String tableValCountry = (String)table.getValueAt(selRow, 1);
        }

        @Override
        public void mouseEntered(MouseEvent e) {
        }

        @Override
        public void mouseExited(MouseEvent e) {
        }

        @Override
        public void mousePressed(MouseEvent e) {
        }

        @Override
        public void mouseReleased(MouseEvent e) {
        }}); 
```

然后我想将该 tableValCountry 变量传递给 City 框架并通过单击添加按钮更新其中一个文本字段。我怎样才能做到这一点？提前致谢。

PS我可以用getter和setter来做到这一点，但我需要在我的城市框架中有一些“获取”按钮来检索值（我不想这样做）。并且城市框架必须始终可见。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-26T16:15:12.950

Swing 的做法是让搜索面板实现一个`getSelectedCountry()`方法和一个侦听器列表，当用户选择国家/地区时通知这些侦听器。

当用户单击搜索时，您的主组件将创建搜索面板并将自己注册为搜索面板事件的侦听器。事件处理程序将获取搜索面板的选定国家并填充文本字段。

搜索面板实现只需要在用户选择国家时通知其所有侦听器。

我认为[这篇文章](http://today.java.net/pub/a/today/2007/02/22/how-to-write-custom-swing-component.html)很好地涵盖了它。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-26T23:37:21.607

请参阅[使用多个 JFrame，好/坏做法？](https://stackoverflow.com/a/9554657/418556)

对于这个用例，模式对话框将是完美的。对话框设置为可见后，可以查询该行的值。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-09-08T19:01:49.237

我面临同样的问题，但我的替代解决方案是线程机制

# silverlight - 将网络摄像头视频流式传输到 IIS Live Smooth Streaming 发布点

> ID：12131681
> 
> 赞同：0
> 
> 时间：2012-08-26T16:12:12.627
> 
> 标签：silverlight, iis, live-streaming, smooth-streaming

有没有关于如何捕获网络摄像头视频并将其发送到 IIS 直播流畅流发布点的教程？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-26T16:58:41.317

非常简单：首先 - 您需要在您的网络摄像头工作的 PC 上安装 Expression Encoder 4 PRO（请注意，Expression 4 PRO 的评估版本无法在流畅的流媒体中运行，因此您必须获得 PRO 版本）。

在 IIS 服务器上设置发布点后 - 您需要将 ISML 的 URL 复制到 Expression Encoder 4 PRO 中“输出”选项卡下的“发布点”字段。

我猜你知道如何配置编码比特率。如果没有，请告诉我。

之后，只需单击开始即可。您可以通过将 URL 应用到您提供给编码器的相同 ISML 来开始在 Silverlight 上观看实时视频。

摩西

# c# - 使 VScroll 禁用而不是隐藏在 ListView 中

> ID：12131692
> 
> 赞同：0
> 
> 时间：2012-08-26T16:13:50.813
> 
> 标签：c#, .net, winforms, winapi, user-interface

有没有办法让垂直滚动条看起来被禁用而不是隐藏在 ListView 中？提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-26T16:22:28.640

![在此处输入图像描述](../Images/b475ad752146192c55b2b3f94f0a5232.png)在您的设计器中设置 ListView 右侧的 vscrollbar 控件，并使其属性启用为 false

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-26T16:36:42.230

[您可以通过P/Invoke调用本机](http://pinvoke.net/default.aspx/user32/ShowScrollBar.html)[ShowScrollBar](http://msdn.microsoft.com/en-us/library/windows/desktop/bb787601%28v=vs.85%29.aspx) API来强制显示滚动条：

```
[DllImport("user32.dll")]
[return: MarshalAs(UnmanagedType.Bool)]
public static extern bool ShowScrollBar(IntPtr hWnd, int wBar, [MarshalAs(UnmanagedType.Bool)] bool bShow); 
```

# iphone - 是否可以通过蓝牙从 iPhone 连接到外部设备。目标设备不是 iPhone

> ID：12131694
> 
> 赞同：6
> 
> 时间：2012-08-26T16:14:03.203
> 
> 标签：iphone, ios, bluetooth

我想开发一个玩具车，我可以用 iPhone 来控制它。我的玩具车有蓝牙接口。所以我想知道是否可以从我的 iPhone 连接到它。玩具车不是 MFi（为 iPhone/iPod/iPad 制作）程序。

我的 iPhone 模式是 iPhone 4S。

如果不可能，有没有其他方法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-28T08:07:56.023

如果不加入 Apple 的 Made for iPhone (MFi) 计划，您的选择实际上是 WiFi 或蓝牙 LE。WiFi 更耗电，除非您在选择芯片时非常小心，否则很难实现。低功耗蓝牙仅支持 iPhone 4S 和新 iPad（即第三代）；它可能会在未来的 iOS 设备中得到支持，例如新 iPhone 和传闻已久的“迷你”iPad。

仅蓝牙 4.0 是不够的，据我了解，它需要是蓝牙 4.0 LE（低能耗变体）。iOS 5.0 SDK 和更高版本的`CoreBluetooth`框架提供了对此类设备的支持。请参阅[Apple 关于`CoreBluetooth`框架](https://developer.apple.com/library/ios/#documentation/CoreBluetooth/Reference/CoreBluetooth_Framework/_index.html#//apple_ref/doc/uid/TP40011295)的文档[需要免费开发者注册]。

# jpa - JPQL NamedQuery：来自@ElementCollection 引用的@Embeddable 类的访问属性

> ID：12131697
> 
> 赞同：0
> 
> 时间：2012-08-26T16:14:23.573
> 
> 标签：jpa, eclipselink, jpql, embeddable

以下命名查询

```
 <named-query name="fix.getByProblem">
        <query>
            SELECT f
            FROM Fix f JOIN f.solved s
            WHERE s.id IN :ids
        </query>
    </named-query> 
```

应该返回解决至少一个给定问题的所有修复程序，但失败并显示错误消息

> 异常描述：编译查询时出错 [fix.getByProblem]：
> 
> SELECT f FROM Fix f JOIN f.solved s WHERE s.id IN :ids
> 
> ]，类 [ProblemHandle] 的未知状态或关联字段 [id]。

模型如下：（简化）

修复.java

```
@ElementCollection
@CollectionTable(name = "FIX_SOLVED", schema = SCHEMA_NAME, joinColumns = {@JoinColumn(name = "SOURCE_VERSION", referencedColumnName = "version")})
@AttributeOverrides({ @AttributeOverride(column = @Column(name = "SOLVED_ID", nullable = true), name = "id") })
private Collection<ProblemHandle> solved; 
```

问题句柄.java

```
@Embeddable
@Access(AccessType.PROPERTY)
public class ProblemHandle {
    private Long id;
...
} 
```

问题.java

```
 @Entity(name = Problem.ENTITY_NAME)
    @Access(value = AccessType.FIELD)
    @Table(name = Problem.TABLE_NAME, schema = Problem.SCHEMA_NAME)
    @IdClass(ProblemHandle.class)
    public class Problem {
        public static final String ENTITY_NAME = "problem";
        public static final String SCHEMA_NAME = "X";
        public static final String TABLE_NAME = "PROBLEM";

        @Id
        @Column(name="id", nullable = false)
        private Long id;
...
} 
```

我怎样才能在不改变模式的情况下实现这一点，例如使用句柄？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-27T14:53:25.563

你有@Access(AccessType.PROPERTY)，所以你的属性的名字来自你的get方法，而不是变量。您的 get 方法的名称是什么？

尝试删除 @Access(AccessType.PROPERTY)

另外，你用的是什么版本？尝试使用 2.4 版本。

# java - GWT - CssResource 不运行

> ID：12131705
> 
> 赞同：-1
> 
> 时间：2012-08-26T16:15:13.673
> 
> 标签：java, gwt, cssresource

我对 GWT 中的 CssResource 没什么问题。我想更改 AbsolutePanel 和标签的样式，但它不运行。当我使用 setStyleName 方法添加样式类时，什么也没有发生。

在这段代码中，我使用了一个资源：

```
public CustommerView() {
        MyResource cssResource = GWT.create(MyResource.class);
        MyCss myCss = cssResource.css();

        AbsolutePanel basePanel = new AbsolutePanel();

        initWidget(basePanel);
        basePanel.setStyleName(myCss.rootPanel());

        Label label = new Label();
        label.setText("Im label");
        label.setStyleName(myCss.label());
        basePanel.add(label);

    } 
```

这是我扩展 CssResource 的接口：

```
public interface MyCss extends CssResource {
    /**
     * Method for return command button class name
     * @return command button class name
     */
     public String rootPanel();

     public String label();
} 
```

这是我的 css 文件，它位于文件系统上的 MyCss 接口旁边：

```
.rootPanel {
   position:absolute !important; 
   top:0px;
   left:0px;
   background-color:yellow !important;
   height: 20px !important;
   width: 18px !important;  
}

.label {
  color:red;    
} 
```

客户视图是 GWT Composite。当我想继续查看时，我只需在演示者中调用 RootPanel.get("mainArea").add(view.asWidget)。mainArea 是 div 元素。

当我在 web inf 的 css 文件中粘贴 css 类时，一切运行正常。有人可以告诉我如何解决这个问题吗？谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-26T16:17:53.523

`ensureInjected()`电话不见了。

# python - 无法在 pyObjC 中的对象上调用方法

> ID：12131709
> 
> 赞同：1
> 
> 时间：2012-08-26T16:15:36.333
> 
> 标签：python, delegates, quicktime, pyobjc, qtkit

当我`setDelegate_`在我的 pyObjC 代码中调用时，我得到一个`AttributeError: 'tuple' object has no attribute 'setDelegate_'`.

我的代码如下所示：

```
def createMovie(self):
        attribs = NSMutableDictionary.dictionary()
        attribs['QTMovieFileNameAttribute'] = '<My Filename>'
        movie = QTMovie.alloc().initWithAttributes_error_(attribs, objc.nil)
        movie.setDelegate_(self) 
```

**编辑**

我发现我不能对电影对象使用任何实例方法。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-20T14:05:35.957

选择器“initWithAttributes:error:”在 Objective-C 中有两个参数，第二个是传递引用的输出参数。Python 没有按引用传递的参数，因此 PyObjC 将该值作为第二个返回值返回，这就是该选择器的 Python 包装器返回一个元组的原因。这是一种通用机制，也可与其他具有按引用传递参数的方法一起使用。

在 Objective-C 中：

```
QTMovie* movie;
NSError* error = nil;

movie = [[QTMovie alloc] initWithAttributes: attribs error:&error]
if (movie == nil) {
   // do something with error 
} 
```

在 Python 中：

```
movie, error = QTMovie.alloc().initWithAttributes_error_(attribs, None)
if movie is None:
  # do something with error 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-26T19:49:11.803

从您的评论来看，它看起来`QTMovie.alloc().initWithAttributes_error_`实际上返回了一个双元素元组，其中您想要的对象作为第一个元素，而其他对象在第二个元素中（可能是错误？）

您应该能够像这样访问您的对象：

```
(movie, error) = QTMovie.alloc().initWithAttributes_error_(attribs, objc.nil) 
```

# sql - SQL INNER JOIN DISTINCT

> ID：12131710
> 
> 赞同：1
> 
> 时间：2012-08-26T16:15:38.267
> 
> 标签：sql, join, distinct, inner-join

我有表格**PRODUCTS**和**LISTINGS**。执行以下查询时：

```
SELECT DISTINCT *
FROM products
INNER JOIN listings
ON products.product_number=listings.product_number 
```

这是“搜索”功能：

```
WHERE products.product_number !='' 
AND listings.monthly_price BETWEEN '0' AND '10' 
```

这将返回其中一个产品列表的双重条目。为什么**DISTINCT**不起作用？

**编辑**

产品：

```
product_number, make, model model_number, colour, processor, battery_standby, battery_talk, camera, flash, screen_size, screen_res, memory 
```

清单：

```
listing_number, featured, date, member_id, network, length, product_number, monthly_price, minutes, texts, data, image1 
```

本质上，我想`listings`通过它们`PRODUCT_NUMBER`到`product`表来创建与表匹配的结果行​​。这是为了更精确的电话列表网站的搜索功能。

更具体地说，搜索功能使用`products`表格进行搜索，然后`listings`表格显示有关电话列表的有用信息。

**回答**

```
SELECT DISTINCT *
FROM listings
INNER JOIN products
ON products.product_number=listings.product_number 
```

以上成功了；简单地交换桌子。我还在 中插入了几行`listings`，“问题”就消失了。即使它没有解决，它也不再发生......不知道问题是什么。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-26T19:51:48.837

我相信你只是期望从中得到一些东西`DISTINCT`是行不通的......

假设您有一个`Products`带有`ID`and的表，以及带有,的`Name`表（FK to Listing_date`（只是为了让事情在这里更简单......）`Listings``ID``ProductID``Products), and`

进一步假设您的表`Products`有条目：

```
ID     Name
 1     Foobar
 2     Bazfoo 
```

并且表`Listings`有条目

```
ID    ProductID   ListingDate
 1        1         2012-01-01
 2        1         2012-03-01
 3        2         2012-04-01 
```

如果您加入这两个表并应用`DISTINCT`

```
 SELECT DISTINCT ProdID = p.ID, p.Name, ListingID = l.ID, l.ListingDate
 FROM dbo.Products p
 INNER JOIN dbo.Listings l ON l.ProductID = p.ID 
```

你期待什么结果？？

结果将是：

```
ProdID  Name   ListingID  ListingDate
 1     Foobar     1         2012-01-01 
 1     Foobar     2         2012-03-01
 2     Bazfoo     3         2012-04-01 
```

`DISTINCT`关键字应用于**所有列**- 只有当结果集中的**所有列**都相同时，才会过滤掉一行。

从您的评论中，我被引导相信您期望包含`ID = 1`并且`Name = Foobar`应该排除的“重复”产品。情况**并非**如此——查看结果集——如果你查看所有四列，那两行`ProdID = 1`并不**相同**——因此，它们都会出现。

这就是`DISTINCT`关键字被定义为工作的方式。

如果您想“过滤掉” ID=1 的重复产品 -`Listings`您希望表中的两个条目中的哪一个显示在结果集中？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-26T16:30:11.877

如果有 2 个列表加入单个产品的记录，那么这将产生您所看到的内容：

选择 distinct 是在内部连接的结果上完成的

我会使用公共连接值从每个表中选择 * 并查看结果

高温高压

伊恩

# java - GUI - 更改 JFrame 的颜色

> ID：12131723
> 
> 赞同：1
> 
> 时间：2012-08-26T16:17:29.390
> 
> 标签：java, swing, user-interface, background, jframe

我是 Java 新手，在实现 GUI 时需要您的帮助。下面是一个猜谜游戏代码。有用。

```
 import javax.swing.*;
  import java.awt.*;
  import java.awt.event.ActionEvent;
  import java.awt.event.ActionListener;
  import java.util.Random;

  public class GuessGame extends JFrame {
     private JTextField guessTextField;
     private JLabel introLabel, guessLabel, clueLabel;
     private JButton enterB, playAgainB;

     private int randomNumber;

     public GuessGame() {
        super("Guessing Game!");
        setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);

        //Creates components
        enterB = new JButton("Guess");
        playAgainB = new JButton("Quit");
        introLabel = new JLabel("I have a number between 1 and 1000.");
        guessLabel = new JLabel("Can you guess my number? Please enter your guess:");

        clueLabel = new JLabel("");
       // comment2 = new JLabel(" ");
        guessTextField = new JTextField(5);

        //content pane
        Container c = getContentPane();
        setLayout(new FlowLayout());

        //adding component to the pane
        c.add(introLabel);
        c.add(guessLabel);
        c.add(guessTextField);
        //c.add(comment2);
        c.add(enterB);
        c.add(playAgainB);
        c.add(clueLabel);

        //enterB.setMnemonic('G');
        //playAgainB.setMnemonic('Q');

        setSize(350, 200);
        setLocationRelativeTo(null);
        setVisible(true);
        //setResizable(false);

        initializeNumber();

        //creating the handler
        GuessButtonHandler ghandler = new GuessButtonHandler(); //instantiate new object
        enterB.addActionListener(ghandler); // add event listener

        QuitButtonHandler qhandler = new QuitButtonHandler();
        playAgainB.addActionListener(qhandler);
     }

     private void initializeNumber() {
        randomNumber = new Random().nextInt(1000) + 1;
        System.out.println(randomNumber);
     }

     class QuitButtonHandler implements ActionListener {
        public void actionPerformed(ActionEvent e) {
           System.exit(0);
        }
     }

     class GuessButtonHandler implements ActionListener {
        public void actionPerformed(ActionEvent e) {
           int getUserInput;
           int diff;
           int Difference;
           try {
              getUserInput = Integer.parseInt(guessTextField.getText().trim());      

              if (getUserInput == randomNumber) {
                  clueLabel.setText("                              Correct!");
              }
              if (getUserInput > randomNumber) {
                 clueLabel.setText("                           Too High");
              } else {
                 clueLabel.setText("                           Too Low");
              }

           } 
           catch (NumberFormatException e1) {
              clueLabel.setText("Enter a VALID number!");
           }
        }

     }

     public static void main(String args[]) {
        //instantiate gueesgame object
         GuessGame app = new GuessGame();

     }
  } 
```

但是，窗口的颜色应该变为红色或蓝色。请帮我处理这段代码。我是 Java 新手，它的语法。我真的很感谢你的帮助。谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-26T16:27:41.977

你可以使用：

```
current = Integer.parseInt(guessTextField.getText().trim()); 
if (!firstTime) {
    if (getUserInput > previous) {
        getContentPane().setBackground(Color.red);
    } else {
        getContentPane().setBackground(Color.blue);
    }
} 
```

其中`firstTime`和`previous`是类成员变量。

`previous`如果**不满足**`getUserInput == randomNumber`，不要忘记分配。

 ****更新：**

您将背景设置为蓝色两次：

```
if (getUserInput < randomNumber) {
   clueLabel.setText("Too Low");
   getContentPane().setBackground(Color.blue); <------ remove this extra call
   previous = getUserInput;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-26T16:33:15.233

一个代码胜过千言万语......

```
 if (current_Input > previous) {
    c.setBackground(Color.red);
 } else {
    c.setBackground(Color.blue);
 } 
```**

# android - 无法从我的应用程序启动浏览器

> ID：12131726
> 
> 赞同：0
> 
> 时间：2012-08-26T16:18:05.117
> 
> 标签：android, url, browser

当我使用这段代码时：

```
Intent browserIntent = new Intent(Intent.ACTION_VIEW, Uri.parse("http://www.google.com/"));
startActivity(browserIntent); 
```

我收到这些错误消息：

```
08-26 18:14:35.305: E/AndroidRuntime(9427): FATAL EXCEPTION: main
08-26 18:14:35.305: E/AndroidRuntime(9427): java.lang.RuntimeException: Unable to start activity ComponentInfo{com.android.browser/com.android.browser.BrowserActivity}: java.lang.RuntimeException: Parcelable encounteredClassNotFoundException reading a Serializable object (name = dev.socialnet.server.Server)
08-26 18:14:35.305: E/AndroidRuntime(9427):     at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1651)
08-26 18:14:35.305: E/AndroidRuntime(9427):     at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:1667)
08-26 18:14:35.305: E/AndroidRuntime(9427):     at android.app.ActivityThread.access$1500(ActivityThread.java:117)
08-26 18:14:35.305: E/AndroidRuntime(9427):     at android.app.ActivityThread$H.handleMessage(ActivityThread.java:935)
08-26 18:14:35.305: E/AndroidRuntime(9427):     at android.os.Handler.dispatchMessage(Handler.java:99)
08-26 18:14:35.305: E/AndroidRuntime(9427):     at android.os.Looper.loop(Looper.java:130)
08-26 18:14:35.305: E/AndroidRuntime(9427):     at android.app.ActivityThread.main(ActivityThread.java:3691)
08-26 18:14:35.305: E/AndroidRuntime(9427):     at java.lang.reflect.Method.invokeNative(Native Method)
08-26 18:14:35.305: E/AndroidRuntime(9427):     at java.lang.reflect.Method.invoke(Method.java:507)
08-26 18:14:35.305: E/AndroidRuntime(9427):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:912)
08-26 18:14:35.305: E/AndroidRuntime(9427):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:670)
08-26 18:14:35.305: E/AndroidRuntime(9427):     at dalvik.system.NativeStart.main(Native Method)
08-26 18:14:35.305: E/AndroidRuntime(9427): Caused by: java.lang.RuntimeException: Parcelable encounteredClassNotFoundException reading a Serializable object (name = dev.socialnet.server.Server)
08-26 18:14:35.305: E/AndroidRuntime(9427):     at android.os.Parcel.readSerializable(Parcel.java:2026)
08-26 18:14:35.305: E/AndroidRuntime(9427):     at android.os.Parcel.readValue(Parcel.java:1897)
08-26 18:14:35.305: E/AndroidRuntime(9427):     at android.os.Parcel.readMapInternal(Parcel.java:2083)
08-26 18:14:35.305: E/AndroidRuntime(9427):     at android.os.Bundle.unparcel(Bundle.java:208)
08-26 18:14:35.305: E/AndroidRuntime(9427):     at android.os.Bundle.getBundle(Bundle.java:1078)
08-26 18:14:35.305: E/AndroidRuntime(9427):     at android.content.Intent.getBundleExtra(Intent.java:3843)
08-26 18:14:35.305: E/AndroidRuntime(9427):     at com.android.browser.BrowserActivity.handleWebSearchIntent(BrowserActivity.java:1463)
08-26 18:14:35.305: E/AndroidRuntime(9427):     at com.android.browser.BrowserActivity.onCreate(BrowserActivity.java:488)
08-26 18:14:35.305: E/AndroidRuntime(9427):     at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1050)
08-26 18:14:35.305: E/AndroidRuntime(9427):     at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1615)
08-26 18:14:35.305: E/AndroidRuntime(9427):     ... 11 more
08-26 18:14:35.305: E/AndroidRuntime(9427): Caused by: java.lang.ClassNotFoundException: dev.socialnet.server.Server
08-26 18:14:35.305: E/AndroidRuntime(9427):     at java.lang.Class.classForName(Native Method)
08-26 18:14:35.305: E/AndroidRuntime(9427):     at java.lang.Class.forName(Class.java:234)
08-26 18:14:35.305: E/AndroidRuntime(9427):     at java.io.ObjectInputStream.resolveClass(ObjectInputStream.java:2564)
08-26 18:14:35.305: E/AndroidRuntime(9427):     at java.io.ObjectInputStream.readNewClassDesc(ObjectInputStream.java:1823)
08-26 18:14:35.305: E/AndroidRuntime(9427):     at java.io.ObjectInputStream.readClassDesc(ObjectInputStream.java:811)
08-26 18:14:35.305: E/AndroidRuntime(9427):     at java.io.ObjectInputStream.readNewObject(ObjectInputStream.java:2039)
08-26 18:14:35.305: E/AndroidRuntime(9427):     at java.io.ObjectInputStream.readNonPrimitiveContent(ObjectInputStream.java:916)
08-26 18:14:35.305: E/AndroidRuntime(9427):     at java.io.ObjectInputStream.readObject(ObjectInputStream.java:2262)
08-26 18:14:35.305: E/AndroidRuntime(9427):     at java.io.ObjectInputStream.readObject(ObjectInputStream.java:2217)
08-26 18:14:35.305: E/AndroidRuntime(9427):     at android.os.Parcel.readSerializable(Parcel.java:2020)
08-26 18:14:35.305: E/AndroidRuntime(9427):     ... 20 more
08-26 18:14:35.305: E/AndroidRuntime(9427): Caused by: java.lang.NoClassDefFoundError: dev.socialnet.server.Server
08-26 18:14:35.305: E/AndroidRuntime(9427):     ... 30 more
08-26 18:14:35.305: E/AndroidRuntime(9427): Caused by: java.lang.ClassNotFoundException: dev.socialnet.server.Server in loader dalvik.system.PathClassLoader[/system/framework/twframework.jar:/system/framework/sec_feature.jar:/system/framework/sechardware.jar:/system/app/Browser.apk]
08-26 18:14:35.305: E/AndroidRuntime(9427):     at dalvik.system.PathClassLoader.findClass(PathClassLoader.java:240)
08-26 18:14:35.305: E/AndroidRuntime(9427):     at java.lang.ClassLoader.loadClass(ClassLoader.java:551)
08-26 18:14:35.305: E/AndroidRuntime(9427):     at java.lang.ClassLoader.loadClass(ClassLoader.java:511)
08-26 18:14:35.305: E/AndroidRuntime(9427):     ... 30 more 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-26T16:27:04.957

我觉得 AndroidManifest.xml 中缺少您的活动，如下所示：

```
<activity
            android:name="dev.socialnet.server.Server"
            android:label="@string/app_name">

        </activity> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-18T13:06:51.827

我设法通过从意图中删除包含类名的额外内容来解决问题。就我而言，它是“clazz=com.example.ExampleActivity”。为了删除额外的内容，我在我的活动的 startActivity 方法中执行了此操作。

```
@Override
public void startActivity( final Intent intent, final Bundle options )
{
    intent.removeExtra( "clazz" );
    super.startActivity( intent, options );
} 
```

仅供参考：我在通过覆盖 WebViewClient 的 shouldOverrideUrlLoading 从 Web 视图打开链接（mailto 和 http）时遇到了问题。

希望这对某人有所帮助（花了我大约 2.5 小时才找到解决方案）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-26T16:22:37.523

试试这个。

```
final Intent intent = new Intent(Intent.ACTION_VIEW).setData(Uri.parse(url));
activity.startActivity(intent); 
```

或者..

```
Uri uriUrl = Uri.parse("http://www.google.com/");   
Intent launchBrowser = new Intent(Intent.ACTION_VIEW, uriUrl);
startActivity(launchBrowser); 
```

# r - 使用 R 将 CSV 文件切割成不同的列

> ID：12131728
> 
> 赞同：1
> 
> 时间：2012-08-26T16:18:15.397
> 
> 标签：r, csv, data-manipulation, traminer

[这是使用 R 透视 CSV 文件](https://stackoverflow.com/questions/11873279/pivoting-a-csv-file-using-r)的后续问题。

在那个问题中，我想根据列（repository_name）中的值将单个列（类型）分成几列。使用了以下输入数据。

```
 type          created_at repository_name
1         IssuesEvent 2012-03-11 06:48:31       bootstrap
2         IssuesEvent 2012-03-11 06:48:31       bootstrap
3   IssueCommentEvent 2012-03-11 07:03:57       bootstrap
4   IssueCommentEvent 2012-03-11 07:03:57       bootstrap
5   IssueCommentEvent 2012-03-11 07:03:57       bootstrap
6        IssuesEvent 2012-03-11 07:03:58        bootstrap
7         WatchEvent 2012-03-11 07:18:45        hogan.js
8         WatchEvent 2012-03-11 07:18:45        hogan.js
9         WatchEvent 2012-03-11 07:18:45        hogan.js
10   IssueCommentEvent 2012-03-11 07:03:57      bootstrap 
```

完整的 CSV 文件可在[https://github.com/aronlindberg/VOSS-Sequencing-Toolkit/blob/master/twitter_exploratory_analysis/all_events.csv](https://github.com/aronlindberg/VOSS-Sequencing-Toolkit/blob/master/twitter_exploratory_analysis/all_events.csv)上找到。

这是 CSV 前 30 行的 dput()：

```
structure(list(type = structure(c(3L, 3L, 3L, 3L, 3L, 3L, 2L, 
2L, 2L, 3L, 3L, 3L, 4L, 4L, 4L, 4L, 4L, 4L, 4L, 4L, 4L, 1L, 1L, 
1L, 4L, 4L, 4L, 2L, 2L, 2L), .Label = c("ForkEvent", "IssueCommentEvent", 
"IssuesEvent", "WatchEvent"), class = "factor"), created_at = structure(c(1L, 
1L, 1L, 2L, 2L, 2L, 3L, 3L, 3L, 4L, 4L, 4L, 5L, 5L, 5L, 6L, 6L, 
6L, 7L, 7L, 7L, 8L, 8L, 8L, 9L, 9L, 9L, 10L, 10L, 10L), .Label = c("2012-03-11 06:48:31", 
"2012-03-11 06:52:50", "2012-03-11 07:03:57", "2012-03-11 07:03:58", 
"2012-03-11 07:15:44", "2012-03-11 07:18:45", "2012-03-11 07:19:01", 
"2012-03-11 07:23:56", "2012-03-11 07:32:43", "2012-03-11 07:38:52"
), class = "factor"), repository_name = structure(c(1L, 1L, 1L, 
1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 2L, 2L, 2L, 1L, 
1L, 1L, 1L, 1L, 1L, 3L, 3L, 3L, 1L, 1L, 1L), .Label = c("bootstrap", 
"hogan.js", "twemproxy"), class = "factor")), .Names = c("type", 
"created_at", "repository_name"), class = "data.frame", row.names = c(NA, 
-30L)) 
```

提出此代码的@flodel 很好地回答了这个问题。

```
data.split <- split(events.raw$type, events.raw$repository_name)
data.split

list.to.df <- function(arg.list) {
  max.len  <- max(sapply(arg.list, length))
  arg.list <- lapply(arg.list, `length<-`, max.len)
  as.data.frame(arg.list)
}

df.out <- list.to.df(data.split)
df.out 
```

但是，现在我想对列表进行排序，以便每个 repo（repository_name）的事件（类型）每月按一列排序（从“created_at”列中提取），如下所示：

```
 bootstrap_2012_03   bootstrap_2012_04    hogan.js_2012_03
1    IssuesEvent          PushEvent          PushEvent
2    IssuesEvent          IssuesEvent        IssuesEvent
3    OssueCommentEvent    WatchEvent         IssuesEvent 
```

其他一些假设是：

*   时间戳仅用于排序，不需要跨行同步
*   即使“IssuesEvent”重复 10 次，我也需要保留所有这些，因为我将使用 R 包 TraMineR 进行序列分析
*   列可以不等长
*   不同存储库的列之间没有关系（“repository_name”）
*   同一存储库不同月份的数据完全独立

我怎样才能在 R 中做到这一点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-26T17:20:29.357

与其按`repository_name`列拆分，不如先创建一个结合`repository_name`了月份的新列：

```
events.raw$month      <- format(as.Date(events.raw$created_at), "%Y_%m")
events.raw$repo.month <- paste(events.raw$repository_name,
                               events.raw$month, sep = "_")

head(events)
#          type          created_at repository_name   month        repo.month
# 1 IssuesEvent 2012-03-11 06:48:31       bootstrap 2012_03 bootstrap_2012_03
# 2 IssuesEvent 2012-03-11 06:48:31       bootstrap 2012_03 bootstrap_2012_03
# 3 IssuesEvent 2012-03-11 06:48:31       bootstrap 2012_03 bootstrap_2012_03
# 4 IssuesEvent 2012-03-11 06:52:50       bootstrap 2012_03 bootstrap_2012_03
# 5 IssuesEvent 2012-03-11 06:52:50       bootstrap 2012_03 bootstrap_2012_03
# 6 IssuesEvent 2012-03-11 06:52:50       bootstrap 2012_03 bootstrap_2012_03 
```

然后使用我上次建议的相同方法：

```
data.split <- split(events.raw$type, events.raw$repo.month)

list.to.df <- function(arg.list) {
  max.len  <- max(sapply(arg.list, length))
  arg.list <- lapply(arg.list, `length<-`, max.len)
  as.data.frame(arg.list)
}

df.out <- list.to.df(data.split)
head(df.out)
#    bootstrap_2012_03 hogan.js_2012_03 twemproxy_2012_03
# 1        IssuesEvent       WatchEvent        WatchEvent
# 2        IssuesEvent       WatchEvent        WatchEvent
# 3        IssuesEvent       WatchEvent        WatchEvent
# 4        IssuesEvent             <NA>              <NA>
# 5        IssuesEvent             <NA>              <NA>
# 6        IssuesEvent             <NA>              <NA> 
```

# javascript - 需要即兴发挥这个独特的数组功能

> ID：12131733
> 
> 赞同：0
> 
> 时间：2012-08-26T16:19:33.130
> 
> 标签：javascript, jquery, arrays

我正在使用以下代码来检测数组中的唯一数字。

```
// Array
var sortBp = [ 700, 500, 500, 501, 600];

// Find Unique Numbers
Array.prototype.unique = function(){
    var bpAllArrays = this;
    var uniqueArrays = [];
    for(var i=bpAllArrays.length;i--;){
        var uniqueArray = bpAllArrays[i];  
        if($.inArray( uniqueArray, uniqueArrays )===-1){
            uniqueArrays.unshift(uniqueArray);
        }
    }
    return uniqueArrays;
}

// Append Only Unique Numbers
$.each(sortBp.unique(), function(index, value) {
    $("body").append(value);
}); 
```

这段代码工作正常。这是工作小提琴：http: [//jsfiddle.net/ScPbe/](http://jsfiddle.net/ScPbe/)

但我想添加另一个功能来检测：

如果数组中存在非常下一个数字，则删除较高的数字并仅附加较低的数字。

示例： [ 500, 501 ] 在这种情况下，我只想将 500 视为唯一编号而不是 501

所以最终结果应该类似于：

```
[ 700, 500, 600] 
```

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-26T17:24:55.667

最后，我想出了以下代码。它检查数组中的当前值是否比上一个值大 1

这是小提琴：http: [//jsfiddle.net/ScPbe/5/](http://jsfiddle.net/ScPbe/5/)

```
 // Array
    var sortBp = [ 700, 500, 500, 501, 600, 601, 610,612];

    // Find Unique Numbers
    Array.prototype.unique = function(){
        var bpAllArrays = this;
        var uniqueArrays = [];
        for(var i=bpAllArrays.length;i--;){
            var uniqueArray = bpAllArrays[i];  
            if($.inArray( uniqueArray, uniqueArrays )===-1){
                uniqueArrays.unshift(uniqueArray);
            }
        }
        return uniqueArrays;
    }

    // Append Only Unique Numbers
    var arr = sortBp.unique();
    $.each(arr, function(index, value) {
        // Chect if Current Value > Prev by 1
        var prev = arr[index - 1];
        if (value - prev !== 1 ) {
             $('body').append(" "+value);
        }
    }); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-26T19:26:37.070

假设双精度值一个接一个地出现（不能出现在数组中的任何位置），这个解决方案会简单得多：

```
var sortBp = [ 700, 500, 500, 501, 600, 900, 900, 901];

for (var cur, last, i=0; i<sortBp.length; i++) {
    cur = sortBp[i];
    if (cur === last || cur === last + 1)
        continue;
    $('body').append(" "+cur);
    last = cur;
} 
```

与[`jQuery.each`](http://api.jquery.com/jQuery.each/)：

```
var last;
$.each(sortBp, function(i, cur) {
    if (cur === last || cur === last + 1)
        return;
    $('body').append(" "+cur);
    last = cur;
}); 
```

使用 es5 的优雅解决方案[`.reduce`](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Array/Reduce)（可能需要填充）：

```
var display = [];
sortBp.reduce(function(last, cur) {
    if (cur === last || cur === last+1)
        return last;
    display.push(cur);
    return cur;
}, undefined);
$('body').append(display.join(" ")); 
```

# php - 如何对 Facebook 生日 API 的结果进行排序

> ID：12131734
> 
> 赞同：0
> 
> 时间：2012-08-26T16:19:37.160
> 
> 标签：php, facebook, api

我用它来按生日获取朋友列表：

`$frnd = $facebook ->api('/me/friends?fields=id,name,birthday&access_token='.$access_token);`

如何对结果进行排序并仍将其保持在相同的结构下？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-27T11:40:31.247

感谢您的评论 - 这帮助我找到了正确的方向，这就是答案：

```
 $frnd = $facebook ->api('/me/friends?fields=id,name,birthday&access_token='.$access_token);

        $arr = $frnd["data"];
        function so ($a, $b) {
            $a_dt = explode("/",$a['birthday']); // dt[0] is month, dt[1] is day
            $b_dt = explode("/",$b['birthday']); // dt[0] is month, dt[1] is day

            $a_dt_time = mktime(0,0,0,$a_dt[0],$a_dt[1], date("y"));
            $b_dt_time = mktime(0,0,0,$b_dt[0],$b_dt[1], date("y"));

            return ($a_dt_time < $b_dt_time) ? -1 : 1;
        }
        uasort($arr, 'so');

        $frnd["data"] = $arr;
        // debug: print_r($arr); 
```

# javascript - 对 couchdb 数据库/视图中的所有文档运行脚本/查询

> ID：12131735
> 
> 赞同：0
> 
> 时间：2012-08-26T16:19:39.693
> 
> 标签：javascript, couchdb, batch-processing

我最近发现了 CouchDB，它非常适合我今天的工作。使用 Futon 接口并调用 http API 工作正常，但缺少一些东西。

在我的应用程序设计过程中，我有时想对数据库中的所有文档进行一些更改。作为一个简化的例子，假设我所有的文档都有一个名为“type”的字段，我决定选择字符串作为类型而不是数字。

现在我得把蒲团里的所有文件都翻一遍，把字符串改成数字，这是一项愚蠢的工作。

另一个例子是删除所有适用于特定条件的文档。

完美的解决方案是某种引擎，它可以为每个文档调用一个 javascript 函数，我可以返回文档的新值。

这存在吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-27T10:44:44.057

您需要的一切都已经存在：[API](http://wiki.apache.org/couchdb/HTTP_Document_API)。请注意，Futon 也只是 API 的一个包装器。

不确定您使用什么中间件（node?、php?），但如果您熟悉 API，应该很容易：

1.  获取所有文件
2.  更改字段“类型”（字符串而不是数字）
3.  保存文档（使用[_bulk_docs](http://wiki.apache.org/couchdb/HTTP_Bulk_Document_API)）

# php - pdo 不从 mysql 函数中读取字符串

> ID：12131736
> 
> 赞同：4
> 
> 时间：2012-08-26T16:19:47.807
> 
> 标签：php, mysql, pdo

我正在使用以下代码`String`从 mysql 函数中读取 a：

```
<?php
print_r($_POST);
try {
    $dbh = new PDO("mysql:dbname=mydb;host=myhost", "myuser", "mypass" );

    $value = $_POST['myLname'];

    print $value ;
    //print $dbh ;

    $stmt = $dbh->prepare("CALL check_user_exists(?)");
    $stmt->bindParam(1, $value, PDO::PARAM_STR | PDO::PARAM_INPUT_OUTPUT, 50);

    // call the stored procedure
    $stmt->execute();

    print "procedure returned $value\n";

    echo "PDO connection object created";
    $dbh = null;

} catch(PDOException $e) {
    echo $e->getMessage();
}
?> 
```

这不是读取返回值，但是如果我读取值 usimg mysql* 如下：

```
<?php

$dbhost='myhost';
        $dbuser='mydb';
        $dbpassword='mypass';
        $db='mydb';

        $con=mysql_connect($dbhost, $dbuser, $dbpassword) or die("Could not connect: " . mysql_error()); ;
        mysql_select_db($db,$con);
        $qry_str = "select check_user_exists('chadhass@hotmail.com')";

        $rset = mysql_query($qry_str) or exit(mysql_error());
                $row = mysql_fetch_assoc($rset);
                mysql_close($con);
        foreach($row as $k=>$v)
        {
            print $k.'=>'.$v;
        }

?> 
```

这会正确返回。知道我错过了什么吗？

功能 ：

```
CREATE
FUNCTION `check_user_exists`(in_email
VARCHAR(100)) RETURNS varchar(1) CHARSET utf8
READS SQL DATA
BEGIN
DECLARE vcount INT;
DECLARE vcount1 INT;
SELECT COUNT(*) INTO vcount FROM USERS
WHERE USEREMAIL=in_email;
IF vcount=1 then
SELECT COUNT(*) INTO vcount1 FROM USERS
WHERE USEREMAIL=in_email and isactive=1;
if vcount1=1 then
return('1');
else
return('0');
end if;
ELSE
RETURN('2');
END IF;
END 
```

适用于 PDO 的代码 ::

```
<?php
//print_r($_POST);
try {
    $dbh = new PDO(PDO("mysql:dbname=mydb;host=myhost", "myuser", "mypass" ); 

    $value = $_POST['myLname'];

    $result = $dbh->prepare("select check_user_exists(?) as retval");
    $result->bindParam(1, $value, PDO::PARAM_STR, 2);
    $result->setFetchMode(PDO::FETCH_CLASS, 'stdClass');
    $result->execute();
    $obj = $result->fetch();

print($obj->retval);

    echo "PDO connection object created";
    $dbh = null;
    }
catch(PDOException $e)
    {
    echo $e->getMessage();
    }

?> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-26T19:26:42.263

原因是，您没有从查询中获取结果。

```
$result = $stmt->fetchAll(PDO::FETCH_ASSOC); 
```

# rack - 如何将 url 路由到 Rack 中的 CGI 脚本？

> ID：12131737
> 
> 赞同：3
> 
> 时间：2012-08-26T16:20:06.303
> 
> 标签：rack

我有一个应用程序，其中有一个`htdocs`包含静态文件的文件夹和几个 CGI 脚本`httpd/cgi-bin`。我如何使用 Rack`config.ru`来服务这个应用程序？

我的当前`config.ru`：

```
map "/check" do
  What here  ("httpd/cgi-bin/check_wrapper.sh")
end

run Rack::Directory.new("htdocs") 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-07T05:56:31.307

您可以使用[反引号](http://www.ruby-doc.org/core-1.9.3/Kernel.html#method-i-60)来运行命令并获取输出。

```
map "/check" do
  run Proc.new { |env| [200, {"Content-Type" => "text/html"}, [`./httpd/cgi-bin/check_wrapper.sh`] ] } 
end

run Rack::Directory.new("htdocs") 
```

# python - 在 stdout 和 stderr 以外的地方打印

> ID：12131739
> 
> 赞同：1
> 
> 时间：2012-08-26T16:20:15.473
> 
> 标签：python, printing

目前，我可以将信息打印到 stdout 和 stderr，但我想打印有关进度的信息并将其打印到 stdout、stderr 和其他地方。这可能吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-26T16:24:52.623

您可以使用该[`logging`](http://docs.python.org/howto/logging.html#logging-basic-tutorial)模块将信息同时记录到不同的地方：

```
import logging

logger = logging.getLogger('your_logger')
logger.setLevel(logging.INFO)

file_handler = logging.FileHandler('errors.log')
file_handler.setLevel(logging.ERROR)
logger.addHandler(file_handler)

stream_handler = logging.StreamHandler()
stream_handler.setLevel(logging.INFO)
logger.addHandler(stream_handler)

logger.warning('I am a warning')
logger.error('I will be printed, but written to the log file as well')
logger.info('I am an info message') 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-26T16:22:02.133

据我所知，控制台的输出只能通过 stdout 和 stderr 来。

你想打印到文件，然后你可以这样做

```
 with open('outfile.txt', 'w') as f:
       f.write('this is a test') 
```

或者，如果您更喜欢使用`print`：

```
 print >> f, 'this is a test' 
```

`outfile.txt`在上面的示例中，打开了一个名为的文件以进行`w`仪式访问。这意味着任何已经存在的数据都将被写入其中的新数据清除。如果你想追加你会以`a`模式打开文件。有关更多信息，请参阅[open() 的文档](http://docs.python.org/library/functions.html#open)。

打开的文件需要关闭，使用该`with`结构会为您处理（并且在遇到异常时也会关闭文件）。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-08-26T16:21:41.280

使用名为 write() 的方法创建一个类，然后您可以使用

```
print 'text' >> Printer() 
```

将“文本”打印到 Printer() 对象（python 2.x）或

```
print('text', file=Printer()) 
```

在 python 3.x 中

# javascript - 自定义 dojo 验证样式

> ID：12131742
> 
> 赞同：0
> 
> 时间：2012-08-26T16:20:19.357
> 
> 标签：javascript, dojo, dijit.form

我正在使用验证文本框，这似乎工作正常 - 但我想在字段下方显示一条消息，在文本框上显示 2px 红色边框，而不是带有感叹号的正方形，右侧带有感叹号的红色圆盘 --- 如何我可以解决这个问题吗？

我在想这是一个自定义小部件或一系列自定义小部件，因为我需要类似的功能/显示来选择从 [日期] 到 [日期] 的字段和日期范围

我只使用了大约一周的dojo，所以请耐心等待。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-27T06:50:12.550

使用 CSS 重新设置样式。作为示例，${theme} = nihilo

```
<style>
.nihilo .dijitValidationIcon {
   background-image: url(...)
}
nihilo .dijitError {
  border-color: red;
  border-width: 2px;
}
.nihilo .dijitErrorFocused {

}
</style> 
```

要使用 invalidMessage 重新定位工具提示，您需要在 ValidationTextBox 的构造函数中执行此操作。

要设置的属性是`tooltipPosition`。如果下面没有空间，则将测试下一个位置数组是否有足够的空间，然后再测试下一个等。

```
new dijit.form.ValidationTextBox({
  ...
  tooltipPosition: ['below', 'right', 'above', 'left']
}) 
```

# c++ - 混合 C 和 C++ 代码会在 GCC 中产生意外行为

> ID：12131744
> 
> 赞同：3
> 
> 时间：2012-08-26T16:21:15.537
> 
> 标签：c++, c, compiler-errors

我在当前的 C++ 项目中通过包含外部头文件来使用旧版 C 代码：

```
extern "C" {
# include "ANN/ANN_4t70P1.h"
# include "ANN/ANN_4t70P2.h"
# include "ANN/ANN_4t70P3.h"
# include "ANN/ANN_4t70P4.h"
} 
```

头文件如下所示：

```
extern int ANN_4t70P1(float *in, float *out, int init);

static struct {
  int NoOfInput;    /* Number of Input Units  */
  int NoOfOutput;   /* Number of Output Units */
  int(* propFunc)(float *, float*, int);
} ANN_4t70P1REC = {8,3,ANN_4t70P1}; 
```

C 代码是由一个古老的批处理文件创建的，不能使用 C++ 编译器进行编译。不过，此实现适用于 Windows 和 Mac OS。但是，当我在 Linux 上使用 gcc 和 g++ 编译代码并运行应用程序时，ANN_4t70P1REC 返回不正确的值。

链接项目时是否有任何我错过的特殊链接器标志？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-18T11:30:10.947

你是什​​么意思：

> C 代码是由一个古老的批处理文件创建的，不能使用 C++ 编译器进行编译

您是否使用不同编译器生成的目标文件进行链接？如果是这样，请尝试使用以下命令检查您的目标文件：

```
readelf -h <objectname> 
```

检查是否有不同的 ABI。如果代码是由非常旧的 GCC <3.3/3.4 生成的，则与较新版本的链接可能会出现问题。

您确定在链接期间没有任何警告吗？

# java - 可视化数组列表

> ID：12131751
> 
> 赞同：1
> 
> 时间：2012-08-26T16:22:14.850
> 
> 标签：java, swing, arraylist, jpanel, layout-manager

我的 JFrame 中有一个大型 JPanel，其中包含“Pages”的数组列表 - 扩展 JPanel 的数据类型，它默认包含 JPanel“区域”，高度等于它的子项的累积值（默认情况下它没有）和 BOX。填充物（首选高度是“页面”的全高）。因此，默认情况下，整个“页面”都充满了填充物，当我向“区域”添加元素时，填充物会减少。

另外，我有一个包含 JPanel 的数组列表。它们是进入“区域”的元素。当我添加它们时，当填充物的高度变为零时，我创建一个新的“页面”并将最后一个元素（它“越界”）移动到它上面。基本上，它的工作原理应该类似于 MS Word。

现在抓住了。用户可以从文档的任何部分自由添加和删除这些元素。问题是，如何将元素添加到“区域”上的随机点？可能会通过调用附加到另一个元素的 keylistener 来进行添加，所以我会知道哪两个元素之间是随机放置的元素。

是否有可用于此的布局管理器，还是应该以其他方式完成？哪一条路？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-26T16:46:30.370

如果我正确理解您的问题，您是在尝试在某个位置插入组件而不是附加它？

如果这是您的问题，您可能需要使用 BoxLayout 和 java 的 swing 容器的 add(component, index) 方法。当然，您可能需要再次将一些子元素移动到下一页，并递归地将下一页的子元素移动到之后的页面。

```
import javax.swing.BoxLayout;
import javax.swing.JFrame;
import javax.swing.JLabel;
import javax.swing.JPanel;

public class AddAt {
    public static void main(String[] args) {
        JFrame frame = new JFrame();
        JPanel panel = new JPanel();
        panel.setLayout(new BoxLayout(panel, BoxLayout.Y_AXIS));
        JLabel one = new JLabel("one");
        JLabel two = new JLabel("two");
        JLabel between = new JLabel("between");

        frame.add(panel);
        panel.add(one);
        panel.add(two);
        panel.add(between, 1);

        frame.pack();
        frame.setVisible(true);
    }
} 
```

结果是： ![面板顺序正确的 JFrame](../Images/5dd6fecd682c2904d3801b37bd2eb228.png)

# php - 使用 Adob e AIR 下载文件的最佳方式

> ID：12131752
> 
> 赞同：0
> 
> 时间：2012-08-26T16:22:15.767
> 
> 标签：php, actionscript-3, air, flex4

我正在创建 adobe AIR 应用程序，它向 php 页面发出请求以备份网站和 mysql 并将其存储在网站上。如果我想下载该备份，最好的方法是什么？使用 FTP 套接字通信或使用 URLStream 和 FileStream。请记住，备份文件将很大。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-03T08:50:02.177

我会使用 URLStream 和 FileStream。我用它来下载大文件很多次，如果正确实施，效果很好。

# c# - WebRequest 挂起用户界面

> ID：12131758
> 
> 赞同：2
> 
> 时间：2012-08-26T16:22:55.910
> 
> 标签：c#, .net, multithreading, httpwebrequest

我正在使用 WebRequest 进行简单的请求，并且应用程序只是挂起，直到响应返回。我该如何解决？

我已经阅读了很多主题，他们都说要使用线程。我不知道如何使用它们；谁能提供以下不挂起用户界面的示例？

```
private string SimpleRequest(String url)
{
    WebRequest request = WebRequest.Create(url);
    WebResponse response = request.GetResponse();
    Stream stream = response.GetResponseStream();
    StreamReader reader = new StreamReader(stream);
    string result = reader.ReadToEnd();
    stream.Dispose();
    reader.Dispose();
    return result;
}

private void button1_Click(object sender, EventArgs e)
{
    String googleHtml = simpleRequest("https://facebook.com");
} 
```

谢谢！

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-26T16:39:58.927

如果您使用的是 c# 5.0，那就太容易了

```
public async void Test1()
{
      WebClient wc = new WebClient();
      richTextBox1.Text =  await wc.DownloadStringTaskAsync("https://facebook.com");
} 
```

您可以将您的方法转换`awaitable`为

```
private Task<string> simpleRequest(String url)
{
    return Task.Factory.StartNew(() =>
        {
            WebRequest request = WebRequest.Create(url);
            WebResponse response = request.GetResponse();
            Stream stream = response.GetResponseStream();
            StreamReader reader = new StreamReader(stream);
            string result = reader.ReadToEnd();
            stream.Dispose();
            reader.Dispose();
            return result;
        });
} 
```

并称为

```
public async void Test2()
{
      richTextBox1.Text =  await simpleRequest("https://facebook.com");
} 
```

对于较低版本的 C#，请参阅其他答案。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-26T16:27:08.470

您正在主 UI 线程上进行网络访问。UI 有一个循环和更新 UI 的主线程。如果您在该线程上进行网络访问，UI 将不会更新，并且它会显示为挂起，直到您的方法返回并且循环可以继续。

考虑在后台线程上做你的工作。在 .net 中实现此目的的一种简单方法是 BackgroundWorker 类。

官方文档有一个很好的用法示例：

[http://msdn.microsoft.com/en-us/library/system.componentmodel.backgroundworker.aspx](http://msdn.microsoft.com/en-us/library/system.componentmodel.backgroundworker.aspx)

> BackgroundWorker 类允许您在单独的专用线程上运行操作。下载和数据库事务等耗时的操作可能会导致您的用户界面 (UI) 在运行时似乎停止响应。当您需要响应式 UI 并且面临与此类操作相关的长时间延迟时，BackgroundWorker 类提供了一种方便的解决方案。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-08-26T16:30:25.170

您可以使用 a`BackgroundWorker`来使用除 UI 线程之外的另一个线程。[这是一个示例](http://www.codeproject.com/Articles/20627/BackgroundWorker-Threads-and-Supporting-Cancel)。

您还可以取消或显示进度：

```
public partial class fmMain : Form
{
    private void btnrunBackgroundWorker_Click( object sender, EventArgs e )
    {
        // Create a background worker
        BackgroundWorker bw = new BackgroundWorker();
        bw.DoWork += new DoWorkEventHandler( bw_DoWork );

        // run in another thread
        bw.RunWorkerAsync();     
    }

    private void bw_DoWork( object sender, DoWorkEventArgs e )
    {
        String facebookHtml = simpleRequest("https://facebook.com");
    }
} 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-08-26T16:41:14.373

您应该使用[**BackgroundWorker**](http://msdn.microsoft.com/en-us/library/system.componentmodel.backgroundworker.aspx)，这样您的*主 UI 线程就不会挂起！*

```
private void button1_Click(object sender, EventArgs e)
{
    backgroundWorker1.RunWorkerAsync("https://facebook.com"); // start async operation
}
private void backgroundWorker1_DoWork(object sender, DoWorkEventArgs e)
{
    e.Result = simpleRequest(e.Argument.ToString()); // set result in async operation
}
private void backgroundWorker1_RunWorkerCompleted(object sender, RunWorkerCompletedEventArgs e)
{
    if (e.Error == null)
    {
        // show result here
        // or access/manage result here
        MessageBox.Show(e.Result.ToString());
    }
    else
    {
        // manage/show error
        MessageBox.Show(e.Error.Message);
    }
}
private String simpleRequest(String url)
{
     // your code goes here
} 
```

您也可以实现**backgroundWorker1_ProgressChanged**，以便用户可以看到加载网站的进度。[（旁注：有关ProgressChanged 和 Context](https://stackoverflow.com/questions/12121708/why-doesnt-a-backgroundworker-need-invoke-in-the-progresschanged-event-handler/12121804#12121804)的详细信息，请参阅此问题）

# json - Sinatra 控制器参数方法在 JSON 发布请求中为空

> ID：12131763
> 
> 赞同：27
> 
> 时间：2012-08-26T16:23:36.847
> 
> 标签：json, sinatra

我有一个 Sinatra 应用程序，并且在我的大多数控制器中，json 都会进入并在 params 对象中自动获取。但是，我有一个根本不获取参数的 post 操作，除非我使用 before 方法来拉取 request.body 参数，将它们解析为 JSON 并将它们合并到 params 哈希中。

这是控制器以及过滤器方法：

```
before do
  if request.request_method == "POST"
    body_parameters = request.body.read
    params.merge!(JSON.parse(body_parameters))
  end
end

post '/locations/new' do
  content_type :json
  puts "params after post params method = #{params.inspect}"
  ... other code ...
end 
```

我看到的输出基本上是控制器动作中的参数实际上是正确的。但是，如果我注释掉之前的调用，则参数为空。

之前本身感觉就像一个黑客。无论如何，我都希望那些参数会进来……我一定在里面做错了什么，但我不知道那是什么。

任何帮助将不胜感激......

* * *

## 回答 #1

> 赞同：36
> 
> 时间：2012-08-27T08:46:57.450

为了回答这个问题，我们首先要查看一些 HTTP 请求（它们只不过是简单`telnet`的“消息”；这可以很容易地手动重新创建）。首先，当你提交一个普通的 HTML 时会发生什么`<form>`？该`POST`请求看起来与此非常相似（可能带有一些额外的参数，但我们现在不需要担心）：

```
POST /submit-form HTTP/1.1
Host: localhost
Content-Type: application/x-www-form-urlencoded
Content-Length: 12

name=JohnDoe 
```

逐个字符地键入该字符（将 替换`/sample-form`为任何表单操作的 URL，并`Host`替换为您的 IP 或主机名）将与您的浏览器发送的内容相同。从中学习的重要一点是参数语法：`formname=formvalue`. **Sinatra 使用这种语法将`POST`请求的主体解释为`params`散列！**因此，与此基本不兼容的 JSON 请求不会**因此**出现在`params`哈希中。

但是，您在`before`块中所做的事情显示了正确的解决方案。而`params`从上面将是`{'name' => 'JohnDoe'}`，`request.body.read`将返回原始主体，`name=JohnDoe`。

知道了这一点，就可以理解为什么您的“hacky”解决方案有效：`POST`请求的原始主体由 解释`JSON.parse`，然后被插入到空`params`哈希中。它看起来很hacky的原因是因为`params`在这个例子中是一个不必要的中间人。以下应该做的工作：

```
post '/locations/new' do
    @json = JSON.parse(request.body.read)
    # @json now contains a hash of the submitted JSON content
end 
```

但是，实施更好实践的解决方案要么仅在提供 JSON 内容时响应，要么在提交标准表单时以不同方式响应。如上面的 HTTP`POST`请求示例所示，HTML 表单用`application/x-www-form-urlencoded`MIME 类型标识，而 JSON 用`application/json`. 如果您想了解有关检查`POST`请求的 MIME 类型的详细信息，请查看这个问题，其中包含有关如何使用 Sinatra 执行此操作[的一些很好的答案！](https://stackoverflow.com/q/8225689)

* * *

## 回答 #2

> 赞同：15
> 
> 时间：2012-09-02T08:17:17.660

有一个类似的问题： [Posting JSON params from java to sinatra service](https://stackoverflow.com/questions/12229855/posting-json-params-from-java-to-sinatra-service)

我找到了一个更好的解决方案来处理它，通过添加一个中间件来为我做同样的事情。我使用了 rack-contrib gem。以下是我在代码中所做的更改：

**编辑：**使用 git 获取特定版本，当内容类型为`application/json;charset=UTF-8`

**宝石文件：**

```
gem 'rack-contrib', git: 'git@github.com:rack/rack-contrib', ref: 'b7237381e412852435d87100a37add67b2cfbb63' 
```

**配置.ru：**

```
use Rack::PostBodyContentTypeParser 
```

来源：[https ://www.jaywiggins.com/2010/03/29/Using-Rack-middleware-to-parse-JSON/](https://www.jaywiggins.com/2010/03/29/Using-Rack-middleware-to-parse-JSON/)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2019-09-06T19:29:36.600

派对迟到了，但如果还有人需要的话——

添加到 goyalankit 的答案：如果您尝试对此进行测试（例如使用 RSpec），它可能无法正常工作，因为标准测试设置不使用中间件。

要在测试中使用中间件：

```
# spec_helper.rb

OUTER_APP = Rack::Builder.parse_file("config.ru").first

module RSpecMixin
  include Rack::Test::Methods
  def app
    OUTER_APP # typically this might just be Sinatra::Application
  end
end

RSpec.configure do |config|
  config.include RSpecMixin
end 
```

以及示例用法：

```
it 'is ok' do
  post '/', { key: 'value' }.to_json, { 'CONTENT_TYPE' => 'application/json' }
  expect(last_response).to be_ok
end 
```

还有我的 config.ru：

```
require 'rack/contrib'
require './app'

use Rack::PostBodyContentTypeParser
run Sinatra::Application 
```

# c# - 在报告查看器条件下，打印按钮不显示在 Firefox 中

> ID：12131765
> 
> 赞同：2
> 
> 时间：2012-08-26T16:23:52.577
> 
> 标签：c#, asp.net, firefox, .net-4.0, reportviewer

我正在使用 VS 2010 开发 Web 应用程序，并且正在开发它的报告 Microsoft Report 查看器，我的大问题是我想在“Mozilla Firefox 浏览器”中打印报告 - 并且打印按钮未显示在 Firefox 上。

是否有任何功能让我能够在 Firefox 中打印我的报告？？？

我需要你的帮助教授们:) ...编程没有问题:)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-09-30T09:33:52.460

打印按钮是一个 Active X 控件，仅适用于 Internet Explorer。

查看我写的这篇[文章](http://www.codicode.com/art/cross_browser_printing_with_asp_net_reportviewer.aspx)，解释如何为 ms reportviewer 添加客户端打印（在所有浏览器上）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-31T02:02:31.690

Perhpas 这可能会有所帮助

[打印按钮未出现在 Firefox 中](https://stackoverflow.com/questions/7385923/the-print-button-doesnt-appear-in-firefox)

检查此以及

[SQL Reporting Services - Mozilla 中未显示打印按钮](https://stackoverflow.com/questions/951009/sql-reporting-services-print-button-not-shown-in-mozilla)

# python - Python - 使用时间戳、timedelta 进行日期和时间比较

> ID：12131766
> 
> 赞同：22
> 
> 时间：2012-08-26T16:24:22.243
> 
> 标签：python, timedelta

在过去的一个小时里，我一直在研究 Python 文档和许多 SO 问题；请原谅我是另一个被 Python 时差之谜所困的 Python 新手。

我的目标是**确定当前时间和某个日期/时间之间的差异，无论是在过去/未来，并返回一个可行的格式，例如秒。**

例如，如果输入是下午 2:00 和下午 4:00（现在），我希望它说“-7200”，表示事件发生在两小时前。如果输入是周五下午 4:00（现在）和周日下午 5:00，则输出应该是“176400”秒，表示从现在开始的两天零一小时。

这是我尝试过的事情...

*   我的第一个版本是一个函数，它采用字符串时间戳并将其拼凑成多个变量，然后将它们进行比较。它很笨重，有很多错误，我想如果我把它贴在这里我会负责程序员的吐槽。

*   我偶然发现了这个神奇的 timedelta 函数并探索了文档和 SO，但我不认为它符合我的要求。

*   我的想法是将两个时间戳转换为自纪元以来的秒数，然后减去，但如果减法的顺序错误（如果事件在未来，则情况不同），这会成为一个问题，我想添加 if 语句来检查秒的符号会很笨重，需要避免。

这是我当前的代码（仍然需要修复“双向”比较），来自先前解决的 SO 问题：

```
now = time.strftime("%a %b %d %H:%M:%S %Y")
then = time.ctime(os.path.getmtime("x.cache"))
tdelta = datetime.strptime(now, '%a %b %d %H:%M:%S %Y') - datetime.strptime(then, '%a %b %d %H:%M:%S %Y') 
```

而且我觉得我应该能够以某种方式从中提取秒数，就像在这个问题中一样： [Python's timedelta: Can't I just get in any time unit I want the value of the entire Difference？](https://stackoverflow.com/questions/500168/pythons-timedelta-cant-i-just-get-in-whatever-time-unit-i-want-the-value-of-t)

但我不知道如何连接这些点。

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：35
> 
> 时间：2012-08-26T16:28:05.703

你应该可以使用

```
tdelta.total_seconds() 
```

获得您正在寻找的价值。这是因为`tdelta`它是一个[`timedelta`](http://docs.python.org/library/datetime.html#timedelta-objects)对象，对象之间的任何差异也是如此`datetime`。

几点注意事项：

1.  使用`strftime`其次`strptime`是多余的。您应该能够使用[`datetime.now`](http://docs.python.org/library/datetime.html#datetime.datetime.now).
2.  同样，使用`time.ctime`后跟`strptime`是比需要更多的工作。您应该能够`datetime`使用[`datetime.fromtimestamp`](http://docs.python.org/library/datetime.html#datetime.datetime.fromtimestamp).

所以，你的最终代码可能是

```
now = datetime.now()
then = datetime.fromtimestamp(os.path.getmtime("x.cache"))
tdelta = now - then
seconds = tdelta.total_seconds() 
```

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2012-08-26T16:28:36.537

这种方法有什么问题？

```
>>> from datetime import datetime
>>> a = datetime.now()
>>> b = datetime.now() # after a few seconds
>>> delta = a-b
>>> delta.total_seconds()
-6.655989 
```

请注意，[`total_seconds`](http://docs.python.org/library/datetime.html#datetime.timedelta.total_seconds)仅在 Python 2.7 < 中可用，但根据文档是：

> 等效于 (`td.microseconds + (td.seconds + td.days * 24 * 3600) * 10**6) / 10**6`在启用真正除法的情况下计算。

这会产生完全相同的结果。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-26T17:02:41.657

几个月前我遇到了同样的问题。您正在寻找的是 datetime.timedelta 和 datetime.datetime.fromtimestamp()。这是一个如何使用它们来解决您的问题的示例。

```
import datetime
import time
t1 = time.time()
#do something to kill time or get t2 from somewhere
a = [i for i in range(1000)]
t2 = time.time()
#get the difference as datetime.timedelta object
diff=(datetime.datetime.fromtimestamp(t1) - datetime.datetime.fromtimestamp(t2))
#diff is negative as t2 is in the future compared to t2
print('difference is {0} seconds'.format(abs(diff.total_seconds()))) 
```

# wcf-ria-services - 使用 Visual Studio 2012 构建的 Silverlight WCF Ria 服务应用程序在为成员创建用户表时失败

> ID：12131768
> 
> 赞同：1
> 
> 时间：2012-08-26T16:24:44.943
> 
> 标签：wcf-ria-services, visual-studio-2012, membership, silverlight-5.0

我正在 Windows 8 和 Visual Studio 2012 下使用 RIA 服务创建 Silverlight 5 应用程序。我添加了一个指向我的数据库的模型，创建了域服务，一切正常。
现在我需要添加成员功能，因此我正在考虑使用旧的 aspnet_regsql 来添加 ASP.NET 子系统所需的新表、视图、存储过程等。
我在这里了解到[http://dotnet.dzone.com/articles/stronger-password-hashing-net](http://dotnet.dzone.com/articles/stronger-password-hashing-net)不再使用 aspnet_regsql 并且现在使用通用提供程序。
但是，我的数据库已经包含一个名为 Users 的表，因此在我尝试登录新创建的应用程序后（如此处建议：[ASP.NET Universal Providers and Session State](https://stackoverflow.com/questions/11105759/asp-net-universal-providers-and-session-state)），其他表已创建，但用户表没有（因为它已经存在）。
然后，当我尝试运行应用程序并创建新用户时，应用程序在默认 UserRegistrationService.cs 文件的第 62 行崩溃，该文件显示：
Membership.CreateUser(user.UserName, password, user.Email, user.Question, user.回答，true，null，out createStatus);
该错误的内部异常是：
列名“ApplicationId”无效。\r\n列名“UserName”无效。\r\n列名“ApplicationId”无效。\r\n列名“UserName”无效。\r\n列无效名称“IsAnonymous”。\r\n列名称“LastActivityDate”无效。

我认为问题在于未创建用户表。但我不知道如何解决这个问题。

有什么建议么？
谢谢大家！
特雷克斯

# c# - C# .Net 为 windows live writer 编写插件，我的插件无法加载

> ID：12131775
> 
> 赞同：2
> 
> 时间：2012-08-26T16:25:21.390
> 
> 标签：c#, .net, windows-live-writer

我是 .Net 的新手，我现在正在尝试为 windows live writer 编写一个插件，因为我更喜欢使用它而不是使用网络编辑器来发布博客。我想开发一些小插件供我日常使用。但是在我创建了一个类库项目并按照一些开发人员描述的步骤构建它之后，WLW 没有加载插件，所以我不知道如何调试。

我的代码：

```
using System;
using System.Collections.Generic;
using System.Text;
using WindowsLive.Writer.Api;
using System.Windows.Forms;

namespace Insert_Colorful_Table
{
    [WriterPluginAttribute
        ("f7581112-dddd-47c9-9db0-46987a2aaae1",
        "Insert Colorful Table",
        Description = "Helps you create a beautiful table.",
        ImagePath = "icon.gif",        
        PublisherUrl = "http://ggicci.blog.163.com")]
    [InsertableContentSource("Insert Colorful Table")]

    public class Plugin : ContentSource
    {
        public override DialogResult CreateContent
            (IWin32Window dialogOwner, ref string content)
        {
            content = @"<table><tr><td>Ggicci</td></tr></table>";
            return DialogResult.OK;
        }
    }
} 
```

我确实配置了项目的“构建事件”并将图像的“构建操作”设置为“嵌入式资源”。构建我的项目时没有发生错误。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-27T06:16:26.750

好的，我已经弄清楚出了什么问题。**Windows Live Writer 支持使用 Microsoft .NET Framework 1.1 或 2.0 版构建的插件。Writer 要求用户拥有 .NET 2.0 才能安装应用程序。**但我使用的是 .NET 4.0。因此，当我将目标框架更改为 2.0 时，它运行良好。

# php - 通过表单发送 HTML 代码

> ID：12131776
> 
> 赞同：2
> 
> 时间：2012-08-26T16:25:21.390
> 
> 标签：php, html, pdf, mpdf

我很困惑。

[我尝试使用MPDF](http://mpdf1.com)导出 html 页面。我看到了例子，如何使用它是这样的：

```
<?php    
$html = '
<h1><a name="top"></a>mPDF</h1>
<p>P: Nulla felis erat, imperdiet eu, ullamcorper non, nonummy quis, elit. Suspendisse potenti. Ut a eros at ligula vehicula pretium. Maecenas feugiat pede vel risus. Nulla et lectus. </p>';

include("../mpdf.php");

$mpdf=new mPDF(); 

$mpdf->WriteHTML($html);
$mpdf->Output();
exit;
?> 
```

因此，我必须将 html 代码放入变量中，然后 mpdf 类将生成 pdf 文件。

我有这样的问题：

我想在用户提交表单后打印一个用 php 动态生成的页面。这是一个报告页面。用户选择他们想要的特定时间段，页面将显示报告。

所以，我必须在用户提交表单后获取生成的 html 代码。我正在`ob_get_contents()`这样做，然后将其与表单一起发送到上面有 mpdf 脚本的 php 页面，比如 pdf.php。

这是我在pdf.php的代码：

```
<?php
include("../mpdf.php");

$mpdf=new mPDF(); 

$htmlx = "$_POST[htmlx]";
$mpdf->WriteHTML($htmlx);
$mpdf->Output();
exit;
?> 
```

pdf 已创建，但无法正确显示（创建的 pdf 无法正确显示 html 页面）。

我认为可能生成的 html 代码是错误的，mpdf 不理解 html 代码。所以我尝试这样：

我尝试复制生成的 html 代码并制作 php 页面，就像上面我展示的示例一样。生成的pdf正确显示页面！

我不明白为什么会发生这种情况。也许我不能通过 php 中的表单发送 html 代码？

我很抱歉我的英语不好。我确实希望你能理解我的问题并能解决帮助我解决它。谢谢你。

编辑：

这是我发送 html 代码的表单：

```
<?php
$html = ob_get_contents();
$html = str_replace('"','\"',$html);

?>
<form action="pdf.php" method="POST" enctype="multipart/form-data">
    <input type="submit" value="Print to PDF">
    <textarea name="htmlx" style="display:; width: 100%; height:300px;" readonly><?= $html ?></textarea>
</form> 
```

编辑

这是我生成的 html 的示例：

```
<style>
*{
    font-family: arial;
}
body{
    background: #fff;
}
table#myTable{
    border:solid 7px #eee;
    -moz-border-radius: 7px;
    -webkit-border-radius: 7px;
    -khtml-border-radius: 7px;
    border-radius: 7px;
    behavior: url(/files/border-radius.htc);
}
#myTable th{
    font: normal 11pt 'century gothic';
    cursor:pointer;
    background: #ccc;
    padding: 8px 15px 8px 15px;
    color:#000
}
#myTable th.header {
    padding: 8px 15px 8px 15px;
    background: #eee;
    cursor: pointer;
    font-weight: bold;
    background-repeat: no-repeat; 
    background-position: center right;
    padding-right: 20px;
    margin-left: -1px;
    color:#fff
}
#myTable th.headerSortUp {
    background-image: url(/template/default/images/asc.gif);
    background-color: #eee;
    color:#fff
}
#myTable th.headerSortDown {
    background-image: url(/template/default/images/desc.gif);
    background-color: #eee;
    color:#fff
}
#myTable tr {
    border:solid 1px #3e6189;
}
#myTable td {
    background:#f9f9f9;
    padding: 8px 15px 8px 15px;
    border:solid 1px #f0f0f0;
    font-size: 9pt
}
@media print
  {
  .blabla{
    display:none;
  }
  }
</style>

</head>

<body>
<script>
function printPage() { print(); }
</script>

    <table cellpadding="3" cellspacing="1" border="0" width="100%" id="myTable">
        <tr class="bgTransUng25">
            <th width="5">No</th>
            <th width="70">Pembelian</th>
            <th width="100">Oleh</th>
            <th width="70">Tanggal</th>
            <th width="">Detail Pembelian</th>
            <th width="70">Paket Pengiriman</th>
        </tr>
            <tr class="bgTransWht71" align="center">
            <td align="right">1.</td>
            <td>00122</td>
            <td>Iko Uwais</td>
            <td align="right">2 Jul 2012</td>
            <td>

                <table cellpadding="3" cellspacing="1" border="0" width="100%">
                                    <tr class="bgTransWht25" align="center">
                        <td align="left">Kaos BW 9500 003</td>
                        <td align="right" width="70">3  pcs</td>
                        <td width="100"><div style="text-align:left">Rp.<div style="float:right; text-align:right">285.000</div></div></td>
                    </tr>
                                        <tr class="bgTransWht25" align="center">
                        <td align="left">Kaos BW 9500 003</td>
                        <td align="right" width="70">7  pcs</td>
                        <td width="100"><div style="text-align:left">Rp.<div style="float:right; text-align:right">665.000</div></div></td>
                    </tr>
                                        <tr class="bgTransWht25" align="center">
//and so on... 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-03-05T09:35:39.597

你应该试试`stripslashes()`，为我工作：

```
$mpdf->WriteHTML( stripslashes($htmlx) ); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-02-13T21:17:08.177

我认为问题是...

“展示：;”

完全删除它。显示应默认为至少显示文本区域的内容。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-26T17:21:28.390

代替

```
$html = str_replace('"','\"',$html); 
```

和：

```
$html = htmlentities($html); 
```

HTML 不使用反斜杠进行转义，它使用实体代码。

# c# - 带有 Linq 的实体框架

> ID：12131777
> 
> 赞同：0
> 
> 时间：2012-08-26T16:25:21.883
> 
> 标签：c#, linq, entity-framework

我有以下方法。我需要按方法返回 var tynames 那么该方法的返回类型是什么`List<string>`或其他什么以及`FirstOrDefault()`.

提前感谢您的回复

```
public static List<string> AppType()
{
    var context = new Dll_IssueTracking.IssuTrackingEntities();// Object context defined in Dll_IssuTracking DLL

    var query = from c in context.ApplicationTypes//Query to find TypeNames
                select new { c.TypeName };
    var **TypeNames** = query.FirstOrDefault();
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-26T16:30:27.557

[`FirstOrDefault`](http://msdn.microsoft.com/en-us/library/bb340482.aspx)如果查询没有返回结果，则返回找到的第一个元素，或者返回默认值（在这种情况下为 null）。在这种情况下，方法的返回值应该是`ApplicationType`：

```
public static ApplicationType AppType()   
{
    var context = new Dll_IssueTracking.IssuTrackingEntities(); // Object context defined in Dll_IssuTracking DLL

    var query = from c in context.ApplicationTypes //Query to find TypeNames
                    select new { c.TypeName };
    return query.FirstOrDefault();
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-26T16:29:30.793

`FirstOrDefault`返回序列中的第一个元素，在此示例中 ApplicationTypes 是您的序列，如果序列不包含任何元素，则为默认值。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-26T16:35:55.687

`FirstOrDefault`是一个扩展方法，看起来像这样：

```
public T FirstOrDefault>T>(this IEnumerable<T> query)
{
    return query.Any() ? query.First() : default(T);
} 
```

因此，如果它不为空，则返回序列中的第一个元素，如果序列为空，则返回类型的默认值。

例如，如果您有`Enumerable<LinqEntity>`，那么很可能`default(LinqEntity)`是`null`。如果你有类似的东西，`Enumerable<int>`那`default(int)`就是0。

# html - 我们如何将密码验证为 css

> ID：12131788
> 
> 赞同：2
> 
> 时间：2012-08-26T16:26:44.453
> 
> 标签：html, validation, password-protection

如果“确认密码”字段文本与“密码”文本相同，如何显示“有效”图标？类似于示例中的名称和电子邮件字段。这是电子邮件验证和名称的css代码：

```
input[type=text]:required:valid,[type=email]:required:valid,textarea:required:valid{
background:url(valid.png) 90% center no-repeat #FFF ; 
} 
```

示例：http: [//data.imagup.com/10/1160658139.JPG](http://data.imagup.com/10/1160658139.JPG)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-27T09:17:53.327

CSS**不是**一种编程语言。

您必须使用 Javascript 在服务器端甚至客户端验证您的字段。

使用现代浏览器中当前的 HTML5 实现，您可以检查输入的值。但据我所知，您不能仅使用纯 css 检查相同的值。

```
<input type="password" id="pass" name="pass" required pattern="[A-Z]{3}[0-9]{4}"
     title="Password numbers consist of 3 uppercase letters followed by 4 digits."/> 
```

看看[**约束验证 api**](http://dev.w3.org/html5/spec/association-of-controls-and-forms.html#the-constraint-validation-api)

这是一个示例，说明如何使用上述 api 检查电子邮件的相似性。

```
<label>Email:</label>
<input type="email" id="email_addr" name="email_addr">

<label>Repeat Email Address:</label>
<input type="email" id="email_addr_repeat" name="email_addr_repeat" oninput="check(this)">

<script>
    function check(input) {
        if (input.value != document.getElementById('email_addr').value) {
            input.setCustomValidity('The two email addresses must match.');
        } else {
            // input is valid -- reset the error message
            input.setCustomValidity('');
        }
    }
</script> 
```

# video - 如何在ffmpeg中禁用字幕解码

> ID：12131789
> 
> 赞同：33
> 
> 时间：2012-08-26T16:27:01.890
> 
> 标签：video, stream, ffmpeg, video-encoding, subtitle

我正在尝试使用**FFMpeg将一些包含***视频*、*音频*和*字幕*流的视频文件转换为另一种格式。但是，ffmpeg 抱怨*字幕*格式 - 它无法解码流。由于我不需要这个字幕流，我想知道如何在转换过程中禁用字幕流解码？

 **** * *

## 回答 #1

> 赞同：67
> 
> 时间：2012-08-29T09:49:57.970

我终于找到了答案。

有这样的选项`-sn`可以禁用从输入流中解码字幕。音频和视频解码也有类似的选项：`-an`和`-vn`分别。

事实证明，还有另一种方法可以实现这一目标。可以使用该`-map`选项来选择要解码哪些流。`-map`因此，在选项中省略字幕流就可以了。

例如，如果一个电影文件有 3 个流：

*   流 0：视频
*   流 1：音频
*   流 2：字幕

FFmpeg 的转换命令可能如下所示：

```
ffmpeg -i <input file> -sn -vcodec <video codec> -acodec <audio codec>  <output file> 
```

或者

```
ffmpeg -i <input file> -vcodec <video codec> -acodec <audio codec> -map 0:0 -map 0:1  <output file> 
```

前一个命令行*取消选择*字幕流（可能是全部，如果有的话），而后一个命令行只*选择*需要解码的流。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2020-06-16T20:03:28.343

要在不重新编码视频和音频的情况下删除字幕流，最短的命令是：

`ffmpeg -i input.mkv -sn -c copy output.mkv`

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2020-06-16T21:18:35.890

使用*负映射*来省略字幕并保留其他所有内容：

```
ffmpeg -i input.mkv -map 0 -map -0:s -c copy output.mkv 
```

*   `-map 0`选择所有流。这是推荐的，因为默认的[流选择](https://ffmpeg.org/ffmpeg.html#Stream-selection)行为只为每种流类型选择 1 个流。
*   `-map -0:s`是取消选择所有字幕流的负映射。
*   `-c copy`启用仅重新复用并避免重新编码的[流复制模式。](https://ffmpeg.org/ffmpeg.html#Stream-copy)***

# iphone - uiscrollview 没有弹到顶部

> ID：12131792
> 
> 赞同：2
> 
> 时间：2012-08-26T16:27:15.127
> 
> 标签：iphone, ios, xcode

我不明白为什么会这样。如果我将应用程序拖到页面的底部并释放，它会弹起..但不是一直到顶部..

```
- (void)viewDidLoad
{
    [super viewDidLoad];

    [_scroller setScrollEnabled:YES];
    [_scroller setContentSize:CGSizeMake(320, 750)];
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-26T16:33:03.803

这通常表明您的滚动视图的`contentSize`属性设置为小于在屏幕上显示所有内容所需的实际值。调整`contentSize.y`到高于 750 的值，看看这是否能解决问题。

# doctrine-orm - 从 Zend Framework 2 Form 发布的 id 加载子对象的最佳方法是什么

> ID：12131798
> 
> 赞同：0
> 
> 时间：2012-08-26T16:27:44.067
> 
> 标签：doctrine-orm, zend-framework2

我有 2 个类，Widget 和 Person。Widget 类引用 Person 的一个实例作为它的所有者。它们通过教义2从数据库中存储/检索。

我创建了一个 Zend Framework 2 表单来输入 Widget 的详细信息，其中包括一个选择，您可以在其中选择 Widget 的所有者，此 Form 元素回发要在所有者处设置的 Person 对象的 id。

在当前状态下，Widget 类的 setOwner() 方法将采用 Person 或 id 类型的对象，然后可以使用 Doctrine2 实体管理器从数据库中加载该对象。

虽然这可行，但我认为这不是最好的方法，因为 Widget 对象正在处理来自数据库的加载，并且它需要访问实体管理器才能执行此操作。

据我目前了解，我可以做到这一点的唯一两种方法是我让它工作的方式，或者通过创建一个新的 Hydrator 来在对对象进行 Hydrating 之前将对象从数据库中取出，或者是否有另一种方法？

我希望架构尽可能整洁，所以我想知道人们认为在 ZF2 中实现这一点的最佳方式是什么？

这是我目前拥有的设置：

```
class Widget {
    protected $id;
    protected $name;
    protected $owner;

    // Doctrine Entity Manager
    protected $entityManager;

   public function __construct($entityManager)
   {
       $this->entityManager = $entityManager;
   }

    // methods, getters & setters

    public function setOwner($owner)
    {
        if (is_object($owner) && $owner instanceof Person)
        {
            $this->owner = $owner;
        }
        else if (is_scalar($owner)
        {
            $this->owner = $this->entityManager->find('Person', $owner);
        }
    }
}

class Person {
    protected $id;
    protected $name;

    // other member variables & methods
} 
```

# php - php 使用带有 mb_split 的正则表达式来实现带有 UTF8 的 str_split 功能

> ID：12131799
> 
> 赞同：1
> 
> 时间：2012-08-26T16:27:53.267
> 
> 标签：php, regex

我正在尝试将字符串拆分为数组。我试过 str_split() 但问题是像“äüöÄÜÖß”这样的字符不起作用（它们变成了问号）

所以我试图对 mb_split() 做同样的事情，但我不知道如何获得正确的正则表达式。

你能帮我么？

这是代码：

```
$arr = mb_split("\.", $str); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-26T16:32:10.257

你可以试试：

```
$arr = preg_split('//u', $str, -1, PREG_SPLIT_NO_EMPTY); 
```

对于`/u`修饰符，请参见[http://php.net/manual/en/reference.pcre.pattern.modifiers.php](http://php.net/manual/en/reference.pcre.pattern.modifiers.php)：

*"u (PCRE8) 此修饰符打开与 Perl 不兼容的 PCRE 的附加功能。模式字符串被视为 UTF-8。此修饰符可用于 Unix 上的 PHP 4.1.0 或更高版本以及 win32 上的 PHP 4.2.3。自 PHP 4.3.5 起检查模式的 UTF-8 有效性。”*

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-26T16:47:39.717

行。就是这样：

```
$arr = preg_split('//u', $str, -1, PREG_SPLIT_NO_EMPTY); 
```

# php - 我的功能在课堂外工作，但不在课堂内

> ID：12131803
> 
> 赞同：0
> 
> 时间：2012-08-26T16:28:36.810
> 
> 标签：php

我觉得我在这里遗漏了一些明显的东西。我有一堂课如下：

```
<?php

class files
{
public function getDirectoryList($directory)
{
    // create an array to hold directory list
    $results = array();

    // create a handler for the directory
    $handler = opendir($directory);

    // open directory and walk through the filenames
    while($file = readdir($handler)) 
    {

        // if the file isn't this directory or the parent, add it to the results.
        if($file != "." && $file != "..")
        {
            $results[] = $file;
        }
    }

    // tidy up: close the handler
    closedir($handler);

    //done
    return $results;
}
}

?> 
```

现在我将类包含在另一个文件中，并且我正在执行以下操作：

```
$fileListing = new files();
$fileListing->getDirectoryList('education'); 
```

我没有得到任何结果。如果我将该函数从类中取出并将其放入此文件中，则可以通过以下方式获得结果：

```
$fileListing = getDirectoryList('education'); 
```

# objective-c - 目标 C 服务器

> ID：12131804
> 
> 赞同：-2
> 
> 时间：2012-08-26T16:28:38.047
> 
> 标签：objective-c, ios, nsurlconnection

我想知道是否有任何方法可以在位于服务器盒上的 Objective C 中设置服务器。

有些人告诉我，将表单发布到 HTML 页面以获取信息或 .ASPX Web 服务可能比实际服务器要慢。

我如何设置一个用目标 c 编写的服务器程序，我将向它发送消息并得到响应。

例如，我向服务器发送字符串：

添加（2,8）；

我在服务器上做了一些字符串操作工作，最终将两者相加并发回响应：

10

我知道这听起来很晦涩，对此的需求将是独一无二的，但我只是想找到一种响应速度比日常 HTML Post 更快的数据传输协议。

这将有助于我玩 iPhone 上的游戏，这些游戏的喋喋不休比慢 NSURLConnections 所允许的要多得多。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-26T16:37:55.073

听起来你在很多事情上都搞混了。您不会将表单发布到 HTML，并且 ASP.NET Web 服务确实在实际服务器上运行。

如果我对您的理解正确，那么您要避免的不是那些东西，而是 HTTP 的开销？对于游戏，通常使用 UDP，或者如果您需要更可靠的连接，则使用 TCP。

你用什么语言来实现你的游戏的服务器部分是无关紧要的——它不一定是Objective-C。

如果您要提高效率，则发送服务器必须解析的字符串有点傻 - 您应该定义数据包结构而不是解析文本。Apple 的开发人员库中有一些采用这种方法的 GameKit 示例，您应该查看它们以了解数据包是如何构造的。

# android - Android上运行的UDP服务器，当网络中断和备份时怎么办？

> ID：12131806
> 
> 赞同：1
> 
> 时间：2012-08-26T16:28:52.727
> 
> 标签：android, networking

我有一个 UDP 服务器作为我的 Android 手机上的服务运行，我是否必须在每次互联网出现故障并备份时重新启动它？

# dojo - 更改 ItemFileWriteStore URL，获取数据并刷新 Grid

> ID：12131808
> 
> 赞同：-1
> 
> 时间：2012-08-26T16:29:07.340
> 
> 标签：dojo, dojox.grid.datagrid

我有一个带有 ItemFileWriteStore 的 EnhancedGrid。在网格上调用 startup() 后，我使用以下代码将其隐藏：

dojo.style(grid.domNode, 'display', 'none');

然后单击一个按钮，我更改了此网格的商店 URL，并尝试使用以下代码刷新商店并显示网格：

```
store.save();
store.close();
store.url='AjaxPopulate.json?os_type='+dijit.byId('osType').get('value');
store.save();

store.fetch({query:{id: '*'}});
dojo.style(grid.domNode, 'display', '');
grid.store.close();
grid.setStore(store); 
```

上面的代码适用于 Firefox 和 Chrome，但不适用于 IE8 和 IE9。我只是在 IE 开发人员工具控制台中收到“对象错误”消息。

请。帮助我确定上述代码的任何问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-27T06:42:49.433

[如何重新加载商店](http://dojotoolkit.org/reference-guide/1.8/dojo/data/ItemFileReadStore.html#reloading-refreshing-itemfilereadstore-from-a-url-dojo-toolkit-1-4)

如果最初使用“数据”属性（通过构造函数）填充存储，您也应该设置`clearOnClose: true`。

的使用`.save()`仅适用于更改了某些设置 (isDirty) 并且需要将这些设置传播到服务器的 ItemFileWriteStore。也就是说，您不需要 .save 在已关闭的商店上（尽管 url 已更改，但未运行 fetch 并且肯定没有任何项目已更改）。

试试下面的代码，你只需要`grid`组件来完成它，因为在网格上调用`.render()`会让它重新加载它的数据。

```
// save if dirty, otherwise we cannot close a store unless its reset
grid.store.save(); 
// close store, this should clear data
grid.store.close();
// set new URL
grid.store.url = '??';
// rerun fetch XHR
// reload grid data with new items (no need to setStore as its same object reused)
grid.store.fetch({query:{id: '*'}, onComplete: function() {grid.render}}); 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-08-27T10:33:13.473

问题是我有来自服务器的无效 JSON 带有一个额外的逗号。

IE 在这些事情上非常具体。

感谢所有查看并尝试回复的人。

# c - 我对从 txt 文件中读取内容感到非常困惑

> ID：12131809
> 
> 赞同：2
> 
> 时间：2012-08-26T16:29:18.983
> 
> 标签：c

抱歉，我是 c 的新手，我想从 txt 文件中读取这些数据。

```
A 7
c 5
y 6
U 9
j 4
Z 3
z 5
0 
```

这是我的代码

```
 while(feof(input)==0){
    char c;
    int num;
    fscanf(input,"%c%d",&c,&num);
    printf("%c:%d\n",c,num);
} 
```

但是控制台中的结果与txt文件不同结果是

打开文件完成

```
A:7

:7
c:5

:5
y:6

:6
U:9

:9
j:4

:4
Z:3

:3
z:5

:0 
```

我的代码是正确的，不是吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-26T16:31:48.843

> ```
> fscanf(input,"%c%d",&c,&num); 
> ```
> 
> 我的代码是正确的，不是吗

你不吃换行符。将其更改为：

```
fscanf(input,"%c%d ",&c,&num);
                  ^ 
```

作为解释，每一行都以一个字符结尾，`'\n'`. 如果你不做任何事情，`%c`会尝试阅读它，你会得到令人困惑的结果。一个便宜的技巧是添加一个空白区域`fscanf`，使其在一`%c%d`对夫妇之后吃掉所有空白。

### 编辑

根据 Peter Kowalski 的评论：

> 不应该是 fscanf(input,"%c %d ",&c,&num); ? 我在 %c 和 %d 之间添加了额外的空间

这个问题问得好。事情是**忽略前导空格**`%d`的说明符之一。无论流中有多少空白，都会将它们吃掉并丢弃。因此，前面的空白是隐含的。**`scanf``%d`**

 *** * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-08-26T16:32:47.917

你还需要吃换行符。

```
fscanf(input,"%c%d\n",&c,&num); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-26T16:31:20.617

快速修复：只需`printf()`从

```
 printf("%c:%d\n",c,num); 
```

至

```
 printf("%c %d",c,num); 
```

还有其他方法，例如调整您的 current `scanf()`，这会更好，因为它可以从源头解决问题（您正在阅读并保留换行符）。

或者，您可以只阅读整行而不将其解析为组件并将其打印出来。**

# ruby-on-rails - 铁路私人协会

> ID：12131810
> 
> 赞同：8
> 
> 时间：2012-08-26T16:29:27.840
> 
> 标签：ruby-on-rails, ruby, activerecord, associations

我有两个 ActiveRecord 模型：

```
class Foo < ActiveRecord::Base
  has_many :bars,:dependent=>:destroy
end

class Bar < ActiveRecord::Base
  belongs_to :foo
end 
```

我的设计规定`Bar`需要关联到`Foo`，但`Foo`仅关联到`Bar`数据库依赖项 - 以确保在`Foo`删除 的实例时，所有关联的实例`Bar`也将被删除。除此之外，使用的代码`Foo`不应该知道`Bar`，并且我不希望可以从`Foo`对象访问关联方法。

我试过在声明`private`之前`has_many`声明`Foo`，但它不起作用（我猜它只适用于直接用`def`...声明的方法）。

有没有办法使关联成为私有，或者在不创建`Bar`关联的情况下实现数据库依赖`Foo`？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-08-26T16:42:15.063

您必须在调用*之后*`private`放置声明，因为直到那时才定义关联的方法：*`has_many`*

 *```
class Foo < ActiveRecord::Base
  has_many :bars, :dependent => :destroy
  private :bars, :bars=
end

Foo.first.bars
#=> #<NoMethodError: private method `registrations' called for #<Foo:0x007fc767adca88>> 
```*

# java - 如何在同一台机器上用 Java 测试广播 udp 数据包？

> ID：12131815
> 
> 赞同：4
> 
> 时间：2012-08-26T16:29:57.440
> 
> 标签：java, networking, udp, real-time

我可以在我的机器上执行 UDP 广播数据包吗？我没有网络，我只有便宜的 linux 盒子。我想让一台服务器广播一个数据包，*而同一台机器上的*两个或多个客户端接收它们。那可能吗？我使用什么 IP？

* * *

@gravyface 给了我希望，但我尝试了：1）服务器发送到 127.255.255.255:54321，客户端监听 0.0.0.0:54321。2) 服务器发送到 127.255.255.255:54321 和客户端监听 127.0.0.1:54321。3) 服务器发送到 127.255.255.255:54321 和客户端监听 127.255.255.255:54321。**他们都没有工作！**:(

OBS：我正在使用 REUSE_ADDR 和 SO_BROADCAST 选项。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-16T02:10:58.230

我能够确认 127.255.255.255 在 Linux (Ubuntu) 上有效，在 Mac (Snow Leopard) 上无效。如果您知道如何在 Mac 上执行此操作，请告诉我。:)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-26T16:38:14.767

您可以使用具有不同虚拟地址的虚拟网络适配器。例如，在 Windows 中，您可以在 Linux 中使用[Microsoft Loopback](http://support.microsoft.com/kb/839013)或[TUN/TAP](http://en.wikipedia.org/wiki/TUN/TAP)。

另一种解决方案是使用 VirtualBox 等虚拟化软件创建内部网络，但这需要稍快的机器。如果您只能负担（因为它是一个便宜的盒子）单个虚拟机，您可以启用 1-4 个网络适配器，这将允许您在虚拟设备的每个虚拟适配器上单独绑定不同的 UDP 客户端。

# java - 在 MacOS 上找不到命令错误

> ID：12131822
> 
> 赞同：0
> 
> 时间：2012-08-26T16:30:46.363
> 
> 标签：java, macos, google-app-engine, terminal

当我这样做时`ls`，会列出我的命令。所以这意味着我在正确的道路上。
但是当我尝试执行时出现错误`dev_appserver.sh: command not found` （我对 Mac OS 终端很陌生。）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-26T16:35:20.613

首先，检查`dev_appserver.sh`权限，然后尝试执行`./dev_appserver.sh`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-10-05T09:29:17.307

// ===== macOS Catalina 10.15.7 的解决方案 =====

1.  找到 vue 的目录在`/Users/[username]/.npm-global/bin`

2.  打开 bash 配置文件`sudo nano ~/.bash_profile`

3.  添加`export PATH=$PATH:/Users/[username]/.npm-global/bin`

4.  退出 (control + x) > 保存 (Y) > Enter (return) > 重启终端

// ========== 为我工作 ==========

# c# - 序列化的目的

> ID：12131824
> 
> 赞同：2
> 
> 时间：2012-08-26T16:31:19.837
> 
> 标签：c#, serialization

我知道序列化是将对象转换为字节码的一种方法，但是这种机制的目的是什么？例如可以用来保存游戏状态吗？（通过序列化地图、播放器等对象）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-26T16:34:19.507

这里有4个原因。

1.  如果您有两台机器运行相同的代码，并且它们需要通信，那么一种简单的方法是让一台机器使用它想要传输的信息构建一个对象，然后将该对象序列化到另一台机器。这不是最好的沟通方式，但它可以完成工作。

2.  如果您想将特定操作的状态存储在数据库中，可以轻松地将其序列化为字节数组，并存储在数据库中以供以后检索。

3.  如果您需要一个对象的精确副本，并且不想麻烦编写自己的专用 clone() 类，只需将对象序列化为字节数组，然后将其反序列化为另一个对象即可实现此目的目标。

4.  真的只是上面的一个应用，但有时一个对象需要 10 分钟来构建，而反序列化只需要 10 秒。因此，与其在内存中保留巨大的对象，不如通过序列化将其缓存到文件中，并在以后需要时将其读取。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-26T16:46:05.867

> 在计算机科学中，在数据存储和传输的上下文中，序列化是将数据结构或对象状态转换为可以存储的格式（例如，在文件或内存缓冲区中，或通过网络连接链路传输）的过程) 并且稍后在相同或另一个计算机环境中“复活”。

序列化的输出格式并不总是字节数组，它可以是 XML、JSON、简单文本或任何其他可以完全或部分描述给定对象状态的格式。

这个过程的应用数不胜数。

*   保存/加载功能大部分时间都是使用序列化完成的。
*   Web 服务使用 XML/JSon 序列化在组件之间传输数据
    。
*   二进制序列化可用于通过网络传输对象数据。
*   撤消/重做功能也使用序列化/反序列化来保存对象的旧状态，尽管还有其他方法。

基本上，序列化用于存储需要稍后检索状态的单个数据对象。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-26T16:34:04.857

这样对象就可以被持久化或传输。

[http://msdn.microsoft.com/en-us/library/7ay27kt9(v=vs.71).aspx](http://msdn.microsoft.com/en-us/library/7ay27kt9(v=vs.71).aspx)

> 序列化是将对象的状态转换为可以***持久化或传输***的形式的过程。序列化的补充是反序列化，它将流转换为对象。这些过程一起使数据可以轻松存储和传输。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-08-26T16:34:25.467

您经常需要序列化对象，也就是说，以稍后会补充的形式“保存”，或者通过网络传输它们。这可能是用户的偏好、应用程序的状态、文档、发送到服务的命令等......

你在这里有链接：http: [//msdn.microsoft.com/fr-fr/library/7ay27kt9.aspx](http://msdn.microsoft.com/fr-fr/library/7ay27kt9.aspx)

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-08-26T16:39:31.137

它本质上允许您保存任何对象的状态，以便可以“使相同的实例（对象）恢复生机”。IE所有实例变量都被保存。所以是的，使用它来保存玩家、他的统计数据、库存等都是使用序列化的好例子。

但是请记住，当您序列化一个对象时，序列化对象引用的所有对象也会被序列化。并且任何这些被引用对象引用的所有其他对象也被序列化。等等等等。因此，为了使序列化正常工作，任何可能绑定到序列化对象的潜在对象也必须是可序列化的。

另请注意，不会保存静态变量。此外，您不希望保存的实例变量可以标记为*瞬态*。

# php - 与会话/cookie 相关的未定义变量

> ID：12131832
> 
> 赞同：0
> 
> 时间：2012-08-26T16:32:46.857
> 
> 标签：php

我有一个允许持久登录和常规会话的登录表单。长话短说，当用户在他们的帐户中时，他们可以更改密码、电子邮件和其他东西。但为此，我需要先从他们的会话或 cookie 中获取他们的用户名（这样我才能进行正确的 SQL 查询）。

我尝试使用以下代码这样做：

```
if(isset($_SESSION['username']))
{
    $username = $_SESSION['username'];
}
else
if(isset($_COOKIE['username']))
{
    $username = $_COOKIE['username'];
} 
```

但是，如果我尝试回显 $username，我会不断收到“未定义的变量”。**这是为什么？**

我注意到如果我放一个 session_start(); 在顶部。我得到了正确的会话用户名，但当然不是 cookie。**我该如何解决？**

奇怪的部分（对我来说）是我在另一个页面中得到了完全相同的代码（那个部分）并且用户名不是未定义的。

PS：如果有不清楚的地方或需要更多信息，请告诉我。

**编辑**

我试过这个：

```
 function accountValidation()
{
    if(isset($_SESSION['username']))
    {
        $username = $_SESSION['username'];
    }

    else if(isset($_COOKIE['username']))
    {   
        $cookie = $_COOKIE['username'];
        $explode = explode(' - ', $cookie);
        $username = $explode['0'];
    }
         echo $username;
}

accountValidation(); 
```

它起作用了......所以如果我把它放到一个函数中然后调用它，它会起作用吗？！有什么区别？为什么它需要进入一个函数才能工作？？？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-26T16:36:41.677

如果您设置了某些 cookie，您可以在下次重新加载时使用它。因为在调用页头时设置了 $_COOKIE。您将无法从设置 cookie 的同一页面检索 cookie。我希望你明白我的意思。如果不让我知道，我会举一个更好的例子。

## 编辑：

例子

```
<?php
    session_start();  
    $_SESSION['test'] = 'test1success';  
    echo $_SESSION['test'];// would display test1success  
    if (!isset($_COOKIE['test2']))  
    {
        setcookie("test2", "test2success", time()+3600);
    }  
    echo $_COOKIE['test2'];  
    // wont display test2success when you load the page for first time
    // reload it & it would display test2success
?> 
```

**说明：**
您首先需要了解的是，cookie 在页面加载时存储在您的 PC（浏览器）上。客户端（即浏览器）将 cookie 标头发送到服务器并执行页面。在页面执行期间由 set_cookie 设置的值是在客户端 PC 上设置的，并且服务器不知道刚刚设置的新值 - 除非您重新加载页面并发送回 cookie 标头。

# java - Android：SQLiteDatabase 列不存在错误

> ID：12131835
> 
> 赞同：-1
> 
> 时间：2012-08-26T16:32:56.940
> 
> 标签：java, android, database, sqlite

我在为我的程序创建和加载数据库时遇到了错误。我收到“没有这样的列：负责：，编译时：SELECT id, name, responsibility, priority FROM tasks”的错误

有人可以指出我做错了什么。谢谢

```
public class TasksSQLiteOpenHelper extends SQLiteOpenHelper {

public static final int VERSION = 1;
public static final String DB_NAME  = "tasks_db.sqlite";
public static final String TASKS_TABLE  = "tasks";
public static final String TASK_ID = "id";
public static final String TASK_NAME = "name";
public static final String TASK_COMPLETE  = "complete";
public static final String TASK_RESPONSIBLE  = "responsible";
public static final String TASK_PRIORITY  = "priority";

public TasksSQLiteOpenHelper(Context context) {
    super(context, DB_NAME, null, VERSION);
}

@Override
public void onCreate(SQLiteDatabase db) {
    dropAndCreate(db);
}

protected void dropAndCreate(SQLiteDatabase db) {
    db.execSQL("drop table if exists " + TASKS_TABLE + ";");
    createTables(db);
}

protected void createTables(SQLiteDatabase db) {
    db.execSQL(
            "create table " + TASKS_TABLE +" (" +
            TASK_ID + " integer primary key autoincrement not null," +
            TASK_NAME + " text," +
            TASK_COMPLETE + " text," +
            TASK_RESPONSIBLE + " text" +
            TASK_PRIORITY + " integer" +
            ");"
        );
}
} 
```

-

```
public class TaskManagerApplication extends Application {

private SQLiteDatabase database;
private ArrayList<Task> currentTasks;

@Override
public void onCreate() {
    super.onCreate();
    TasksSQLiteOpenHelper helper = new TasksSQLiteOpenHelper(this);
    database = helper.getWritableDatabase();
    if (null == currentTasks) {
        loadTasks();
    }
}

private void loadTasks() {
    currentTasks = new ArrayList<Task>();
    Cursor tasksCursor = database.query(TASKS_TABLE, new String[] {
            TASK_ID, 
            TASK_NAME,
            TASK_RESPONSIBLE,
            TASK_PRIORITY,
            TASK_COMPLETE}, null, null, null, null, String.format("%s,%s", TASK_COMPLETE, TASK_NAME));
    tasksCursor.moveToFirst();
    Task t;
    if (! tasksCursor.isAfterLast()) {
        do {
            int id = tasksCursor.getInt(0);
            String name  = tasksCursor.getString(1);
            String priority  = tasksCursor.getString(2);
            String responsible = tasksCursor.getString(3);
            String boolValue = tasksCursor.getString(4);
            boolean complete = Boolean.parseBoolean(boolValue);
            t = new Task(name, priority, responsible);
            t.setId(id);
            t.setComplete(complete);
            currentTasks.add(t);
        } while (tasksCursor.moveToNext());
    }

    tasksCursor.close();
}
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-26T16:36:42.643

您的`CREATE TABLE`;中有错字

```
db.execSQL(
    "create table " + TASKS_TABLE +" (" +
    TASK_ID + " integer primary key autoincrement not null," +
    TASK_NAME + " text," +
    TASK_COMPLETE + " text," +
    TASK_RESPONSIBLE + " text" + // <--- missing a comma
    TASK_PRIORITY + " integer" +
    ");"
); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-26T16:39:56.770

您的代码中有一个小的输入错误。更正版本：

```
db.execSQL(
    "create table " + TASKS_TABLE +" (" +
    TASK_ID + " integer primary key autoincrement not null," +
    TASK_NAME + " text," +
    TASK_COMPLETE + " text," +
    TASK_RESPONSIBLE + " text," + 
    TASK_PRIORITY + " integer" +
   ");"
 ); 
```

# javascript - RequireJS 加载我不想加载的资源

> ID：12131840
> 
> 赞同：1
> 
> 时间：2012-08-26T16:33:28.277
> 
> 标签：javascript, requirejs

我在我的应用程序中使用 RequireJS，但不太了解它工作的所有方面。

我有`main.js`文件，其中描述了依赖关系。我已经`Backbone.Router`启动并运行了组件，它触发了不同的`application`类（负责创建主视图的类）。你可以[在这里](https://github.com/alexanderbeletsky/candidate/tree/master/src/Candidate.Nancy.Selfhosted/Client/scripts)看到一些代码。

我可以通过 requireJS 看到：即使某些视图还没有被“必需”（意味着明确调用 require('./subviews/view)），它仍然被加载并在其中加载所有模板（我使用 requireJS 文本插件） . 如果我正在添加新应用程序，但它的子视图尚未准备好，但我从未使用过该应用程序 - 仍然加载不存在的子视图并且我收到 404 错误。

不确定我解释清楚了一切，但希望你明白了。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-26T22:28:51.727

看起来您正在使用[CommonJS 糖化形式的 define()](http://requirejs.org/docs/whyamd.html#sugar)。请注意，这只是为了方便包装 Node/CommonJS 代码，但 AMD 模块不像 Node 模块那样运行。

AMD 加载程序将在模块的工厂函数中扫描 require('') 调用，并确保加载所有模块。否则，通过执行 a 同步访问该模块`require('./apps/DashboardApp');`将在浏览器中失败，因为文件 IO 默认为异步网络 IO。

如果你想延迟加载某些脚本，那么你需要使用 require 的回调形式：

```
require(['./apps/DashboardApp'], function (DashboardApp) {
}); 
```

但此调用是异步调用，因此您必须相应地调整模块的公共 API。

所以基本上，如果你想按需加载依赖项，考虑到浏览器中文件 IO 的异步性质，需要回调形式。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-26T16:59:25.660

因为 RequireJS 加载了所有必需的依赖项。通过快速查看您的代码，我看到您加载了路由模块并且路由具有：

```
var ViewManager = require('ViewManager'); 
```

这意味着它将加载 ViewManager、ViewManager 指定的依赖项以及这些模块需要的其他依赖项。本质上，当您包含 require(...) 时，它与指定依赖项相同。这将由 RequireJS 转换为

`define(['ViewManager'], ...)`

# javascript - Javascript变量未定义和onchange不起作用

> ID：12131845
> 
> 赞同：-1
> 
> 时间：2012-08-26T16:34:40.747
> 
> 标签：javascript, variables, undefined, onchange

我是 Javascript 的初学者，所以专家很容易解决这个问题。我正在研究这个：[http](http://www.3dsbuzz.com/receng/test.php) ://www.3dsbuzz.com/receng/test.php源代码如下。

这个想法是，将图像拖到白框中会向文本框添加一个值，然后触发 mysql 查询并显示一些数据。但是我有两个问题：

1）将图片拖入白框时，不显示图片的value属性，只显示“未定义”。

2）当我硬编码一个值而不是使用变量（在第 17 行）时，它会很好地进入文本框，但不会触发 mysql 查询，尽管如果您直接在框中键入它会触发。

```
<html>
<head>
<style type="text/css">
#div1 {width:175px;height:97px;border:1px solid #aaaaaa;}
</style>
<script type="text/javascript">
function drag(ev){
    ev.dataTransfer.setData("Text",ev.target.id);
}
function allowDrop(ev){
    ev.preventDefault();
}
function drop(ev){
    ev.preventDefault();
    ev.target.appendChild(document.getElementById(ev.dataTransfer.getData("Text")));
    var newtext = document.dragme.value;
    document.myform.users.value += newtext;
}
function showUser(str){
if (str==""){
  document.getElementById("txtHint").innerHTML="";
  return;
  }
xmlhttp=new XMLHttpRequest();
xmlhttp.onreadystatechange=function(){
    if (xmlhttp.readyState==4 && xmlhttp.status==200){
    document.getElementById("txtHint").innerHTML=xmlhttp.responseText;
    }
}
xmlhttp.open("GET","getuser.php?q="+str,true);
xmlhttp.send();
}
</script>
</head>
<body>
<form name="myform">
<input type="text" name="users" onchange="showUser(this.value)">
</form>
<div id="txtHint"><b>Type "49" or "50" in the box above</b></div>
<br>
<div id="div1" ondrop="drop(event)" ondragover="allowDrop(event)"></div>
<br />
<img id="49" name="dragme" value="49" src="http://www.3dsbuzz.com/wp-content/uploads/2012/06/mutantmuddsthumb.jpg" draggable="true" ondragstart="drag(event)" />
<img id="50" name="dragme" value="50" src="http://www.3dsbuzz.com/wp-content/uploads/2011/09/layton-thumb.jpg" draggable="true" ondragstart="drag(event)" />
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-26T16:43:11.797

不应该

```
var newtext = document.draging.value; 
```

是

```
var newtext = document.dragimg.value; 
```

因为没有定义拖动。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-26T16:49:06.397

1）图像没有内在`value`属性。要么您必须使用`getAttribute`该值，要么由于 id 和 value 相同，因此只需获取已删除图像的 id：

```
function drop(ev){
    ev.preventDefault();
    ev.target.appendChild(document.getElementById(ev.dataTransfer.getData("Text")));
    var newtext = ev.dataTransfer.getData("Text");
    document.myform.users.value += newtext;
} 
```

2) 只有在用户更改值时才会调用更改处理程序，而不是在脚本更改值时调用。您必须手动触发它：

```
showUser(newtext); 
```

# entity-framework - 通过 Wcf DataService 保存相关对象时遇到问题

> ID：12131846
> 
> 赞同：1
> 
> 时间：2012-08-26T16:34:43.243
> 
> 标签：entity-framework, c#-4.0, wcf-data-services, foreign-key-relationship

首先，我使用实体框架创建了 WCF 数据服务。

在客户端我尝试执行以下操作

```
var user = (from u in ctx.FysPosUsers
                       where u.Username == "test"
                        select u).SingleOrDefault();

            ForumUser forumUser = new ForumUser();
            forumUser.DisplayName = "tester";
            forumUser.TagLine = "A random tagLine";
            forumUser.User = user;
            ctx.AddToForumUsers(forumUser);
            ctx.SaveChanges(); 
```

但是当我尝试保存上下文时，我收到以下错误：

“EntityContext.ForumUsers”中的实体参与“ForumUser_User”关系。找到 0 个相关的“ForumUser_User_Target”。1 'ForumUser_User_Target' 是预期的。

任何想过如何解决这个问题的人都会非常感激:)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-27T18:55:54.857

您是否尝试在 SaveChanges 之前添加以下行：

ctx.SetLink(forumUser, "用户", 用户);

希望这可以帮助。谢谢普拉蒂克

# c# - 无法加载文件或程序集'：此程序集由比当前加载的运行时更新的运行时构建，无法加载

> ID：12131850
> 
> 赞同：18
> 
> 时间：2012-08-26T16:35:14.987
> 
> 标签：c#, linq-to-entities, asp.net-4.0

我的解决方案中有 3 个项目：BL、DL 和 UI。这三个项目的目标框架都是>NET 4；我通过查看每个项目的属性页仔细检查了这一点。当我尝试在托管环境中运行网站时收到以下错误消息，但在本地运行时却没有。

```
Could not load file or assembly 'BL' or one of its dependencies. This assembly is built by a runtime newer than the currently loaded runtime and cannot be loaded. 
```

提前致谢！

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2013-08-27T09:44:29.333

- 转到 IIS。-默认网站->您的应用程序目录->高级设置->应用程序池->设置您的版本（例如 ASP.NET v4.0）-刷新您的应用程序目录并浏览它。完成。

* * *

## 回答 #2

> 赞同：15
> 
> 时间：2012-08-26T16:37:47.577

您必须更新您的 web 服务扩展以允许 IIS 中的框架 4.0。要为 ASP.NET 4.0 启用 Web 服务扩展：

1.  单击开始，单击控制面板，单击系统安全，单击管理工具，然后单击 Internet 信息服务 (IIS) 管理器。
2.  如果您需要连接到远程 IIS 服务器，请右键单击 Internet 信息服务节点并单击连接...选项。
3.  如有必要，键入远程 IIS 服务器的计算机名称和凭据。
4.  单击 Web 服务扩展文件夹。安全锁定控制台出现在右侧的框架中。
5.  在 Web 服务扩展窗口中，右键单击 ASP.NET v4.X.XXXX，然后单击允许。

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2014-10-02T18:21:58.923

当我尝试将我的应用程序从 .NET 3.5 升级到 .NET 4.5 时，我收到了同样的错误。当我恢复更改时（出现错误，我稍后会弄清楚）我收到了错误：

```
Could not load file or assembly 'XmlSerializers' or one of its dependencies. This assembly is built by a runtime newer than the currently loaded runtime and cannot be loaded. 
```

这个 dll 在我项目的 bin 文件夹中。当我删除它时，应用程序正常运行。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2014-04-09T08:22:10.510

您可能还必须运行 ASP.NET IIS 注册工具 (Aspnet_regiis.exe) -[更多详细信息请点击此处](http://msdn.microsoft.com/en-us/library/k6h9cz8h%28v=vs.100%29.aspx)

```
C:\Windows\Microsoft.NET\Framework\v4.0.30319>aspnet_regiis.exe -i 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2021-09-29T03:24:10.357

[![应用程序配置](../Images/ff7f10f051f8085ad728a89d3ba7be66.png)](https://i.stack.imgur.com/WVKWT.png) 检查 app.config 文件中的这一行以查看 .NET Framework 版本是否正确，如果不正确，请将其更改为应用程序属性中设置的版本。

# android - android蓝牙聊天示例代码在手机上崩溃

> ID：12131853
> 
> 赞同：1
> 
> 时间：2012-08-26T16:35:30.863
> 
> 标签：android, crash, bluetooth, chat, sample

当我尝试在我的手机（android 2.3.7）上运行 android 的蓝牙聊天示例代码时，如果蓝牙关闭，它会打开蓝牙，但随后会立即崩溃。示例代码有问题吗？谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-10-09T09:59:57.263

我有同样的问题。我认为 Android Manifest 文件没有“android:targetSdkVersion”。我手动把它放进去，我的问题就解决了。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-17T08:49:28.800

BluetoothChat 没有问题...我认为您的 Android 版本不同或您已删除 android 权限

```
<uses-permission android:name="android.permission.BLUETOOTH_ADMIN" />
<uses-permission android:name="android.permission.BLUETOOTH" /> 
```

# sql - 复杂的 SQL 查询

> ID：12131855
> 
> 赞同：0
> 
> 时间：2012-08-26T16:35:46.157
> 
> 标签：sql

有谁知道如何构造以下查询：

表：

```
TBL_GAME                 id,      name
TBL_CATEGORY             id,      name
LU_GAME_TO_CATEGORY      gameid,  catid
LU_GAME_TO_EVENT         eventid, gameid 
```

所以，基本上`Categories`有很多游戏。

`Events`有很多游戏。

我想生成一个报告，显示`Categories`列出的有多少`Games`在`Events`. 按金额降序排列。

这可能吗 ？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-26T17:05:26.303

```
SELECT
       c.id                 as catId,
       c.name               as catName,
       g.id                 as gameId,
       g.name               as gameName,
       sum(ge.INT_QUANTITY) as totalQuantities
FROM
       TBL_CATEGORY         as c,
       TBL_GAME             as g,
       LU_GAME_TO_CATEGORY  as gc,
       LU_GAME_TO_EVENT     as ge
WHERE
       c.id = gc.catId     AND
       g.id = gc.gameId    AND
       g.id = ge.gameId
GROUP BY
       c.id,
       g.id
ORDER BY
       totalQuantities desc,
       c.name,
       g.name 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-26T16:45:12.957

```
SELECT A.ID, SUM(D.INT_QUANTITY) AS YourSum
FROM TBL_CATEGORY A --Adapt your selected columns 
INNER JOIN LU_GAME_TO_CATEGORY B ON A.id = B.catid
INNER JOIN TBL_CATEGORY C ON B.gameid = C.id
INNER JOIN LU_GAME_TO_EVENT  D ON C.gameid = D.gameid
GROUP BY A.ID
ORDER BY YourSum DESC; 
```

这里我不调整金额，因为列不存在。您必须在目标表中添加金额列

# php - 如何将转义数据从 MySQL 导入 JSON？

> ID：12131859
> 
> 赞同：0
> 
> 时间：2012-08-26T16:36:08.250
> 
> 标签：php, mysql, json

在我的 MySQL 数据库中，我有以下行：

`\"test\"`| `\'test\'`|`\'test\'` `\"test\"`

如果我将其导入 JSON，我将得到：

```
[
    "\"test\"",
    "\'test\'",
    "\'test\' \"test\""
] 
```

这将在 JSONLint 中生成错误：

```
Parse error on line 2:
...    "\"test\"",    "\'test\'",    "\'t
----------------------^
Expecting 'STRING', 'NUMBER', 'NULL', 'TRUE', 'FALSE', '{', '[' 
```

为什么下面的代码不会在 JSONLint 中产生错误？

```
[
    "\"test\"",
    "\\'test\\'",
    "\\'test\\' \"test\""
] 
```

以及如何从 MySQL 导入数据（通过 PHP）以获得上述结果？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-26T16:57:46.267

在 MySQL 的结果集上使用`json_encode`（PHP 中的内置函数）。

**小例子**

```
$a = Array(
    '\"test\"',
    '\'test\'',
    '\'test\' \"test\"'
);
echo json_encode($a); 
```

*输出*

```
[
    "\"test\"",
    "'test'",
    "'test' \"test\""
] 
```

该函数会在 JSONLint 接收数据之前清理您发送给它的所有数据。

阅读更多关于[json_encode](http://php.net/json_encode)的内容。

# javascript - 表单中的 CSS、HTML 格式

> ID：12131864
> 
> 赞同：0
> 
> 时间：2012-08-26T16:36:31.547
> 
> 标签：javascript, html, css

我一直在尝试创建一个由下拉列表中的复选框组成的 HTML 表单。我已经能够完成这部分。但是当你点击一个特定的下拉菜单时，剩下的下拉菜单会向下移动。在第二次单击时，下拉列表会折叠并返回到原来的位置。请帮我纠正这个问题。如果复选框可见，我试图保持下拉列表的位置不变。

[我想要实现的是类似于http://www.luxuryretreats.com/](http://www.luxuryretreats.com/)左侧的过滤器。将不胜感激任何建议！

这是代码。

```
<html>
<head>
    <script type="text/javascript">
    function ExposeList1() {
        var showstatus = document.getElementById('ScrollCountry').style.display;
        if (showstatus == 'none') {
            document.getElementById('ScrollCountry').style.display = "block";
        } else {
            document.getElementById('ScrollCountry').style.display = 'none';
        }
    }
    function ExposeList2() {
        var showstatus = document.getElementById('Scrollguests').style.display;
        if (showstatus == 'none') {
            document.getElementById('Scrollguests').style.display = "block";
        } else {
            document.getElementById('Scrollguests').style.display = 'none';
        }
    }
    function ExposeList3() {
        var showstatus = document.getElementById('Scrollminprice').style.display;
        if (showstatus == 'none') {
            document.getElementById('Scrollminprice').style.display = "block";
        } else {
            document.getElementById('Scrollminprice').style.display = 'none';
        }
    }
    function ExposeList4() {
        var showstatus = document.getElementById('Scrollmaxprice').style.display;
        if (showstatus == 'none') {
            document.getElementById('Scrollmaxprice').style.display = "block";
        } else {
            document.getElementById('Scrollmaxprice').style.display = 'none';
        }
    }
</script>
</head>
<body>
    <form action="trying.php" method="post">
        <img src="original1.png" onmouseover="this.src='onhover1.png'"
            onmouseout="this.src='original1.png'" onclick="ExposeList1()">
        <div>
            <div id="ScrollCountry"
                style="height: 150; width: 200px; overflow: auto; border: 1px solid blue; display: none">
                <input type="checkbox" id="scb1" name="c1" value="Mexico">Mexico<br>
                <input type="checkbox" id="scb2" name="c2" value="Belize">Belize<br>
                <input type="checkbox" id="scb3" name="c3" value="Jamaica">Jamaica<br>
                <input type="checkbox" id="scb4" name="c4" value="Thailand">Thailand<br>
                <input type="checkbox" id="scb5" name="c5"
                    value="Turks &amp; Caicos">Turks &amp; Caicos<br>
                <br />
            </div>
        </div>

        <img src="original2.png" onmouseover="this.src='onhover2.png'"
            onmouseout="this.src='original2.png'" onclick="ExposeList2()">
        <div>
            <div id="Scrollguests"
                style="height: 150; width: 200px; overflow: auto; border: 1px solid blue; display: none">
                <input type="checkbox" id="n1" name="n1" value="4">2 - 4<br>
                <input type="checkbox" id="n2" name="n2" value="6">4 - 6<br>
                <input type="checkbox" id="n3" name="n3" value="8">6 - 8<br>
                <input type="checkbox" id="n4" name="n4" value="10">8 -
                10<br> <input type="checkbox" id="n5" name="n5" value="30">10+<br>
                <br />
            </div>
        </div>

        <img src="original3.png" onmouseover="this.src='onhover3.png'"
            onmouseout="this.src='original3.png'" onclick="ExposeList3()">
        <div>
            <div id="Scrollminprice"
                style="height: 150; width: 200px; overflow: auto; border: 1px solid blue; display: none">
                <input type="checkbox" id="mn1" name="mn1" value="200">200<br>
                <input type="checkbox" id="mn2" name="mn2" value="300">300<br>
                <input type="checkbox" id="mn3" name="mn3" value="400">400<br>
                <input type="checkbox" id="mn4" name="mn4" value="500">500<br>
                <input type="checkbox" id="mn5" name="mn5" value="600">600<br>
                <br />
            </div>
        </div>
        <img src="original4.png" onmouseover="this.src='onhover4.png'"
            onmouseout="this.src='original4.png'" onclick="ExposeList4()">
        <div>
            <div id="Scrollmaxprice"
                style="height: 150; width: 200px; overflow: auto; border: 1px solid blue; display: none">
                <input type="checkbox" id="mx1" name="mx1" value="600">600<br>
                <input type="checkbox" id="mx2" name="mx2" value="700">700<br>
                <input type="checkbox" id="mx3" name="mx3" value="800">800<br>
                <input type="checkbox" id="mx4" name="mx4" value="900">900<br>
                <input type="checkbox" id="mx5" name="mx5" value="1000">1000<br>
            </div>
        </div>
        <input type="submit" />
    </form>
</body>
</html> 
```

​</p>

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-26T16:42:36.697

您应该`position: absolute`在下拉列表中添加一个。这样，另一个下拉菜单不会受到您打开/关闭另一个下拉菜单的影响。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-26T16:43:22.370

不要使用`display`属性，而是使用`visibility`属性（可见性 = 可见 | 隐藏）。无论是否显示，这都会保留 DIV 所需的空间。

[jsfiddle](http://jsfiddle.net/3vS2G/)上的修改版本。

# php - 如何在 symfony 中使用 UniversalClassLoader？

> ID：12131872
> 
> 赞同：0
> 
> 时间：2012-08-26T16:37:13.927
> 
> 标签：php, symfony

Symfony 在其自动加载器中使用类加载器类。我见过使用 UniversalClassLoader 而不是 classLoader 类的教程。例如，添加外部库需要通用类加载器..

```
$loader = require __DIR__.'/../vendor/autoload.php'; 
```

这一行得到一个 classLoader 类。在这种情况下如何使用 UniversalclassLoader？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-27T20:32:30.753

在`Symfony2.0`Symfony 中使用了自己的[ClassLoader Component](http://symfony.com/doc/current/components/class_loader.html)。您可以在我刚刚提供的链接上找到有关如何使用此类的文档。
但是这个类是在`app/autoload.php`文件中初始化的，并不是你引用的那个文件。

`Symfony2.1`使用[composer](http://getcomposer.org/)来处理依赖关系。Composer 自动添加一个类加载器以轻松自动加载加载所有依赖项。此类在`vendor/autoload.php`您引用的文件中初始化。关于这个类加载器的文档可以在[作曲家文档](http://getcomposer.org/doc/01-basic-usage.md#autoloading)中找到。

# regex - 正则表达式——只有零或一个's'

> ID：12131873
> 
> 赞同：0
> 
> 时间：2012-08-26T16:37:16.803
> 
> 标签：regex, preg-match

我有一个名字，“foo bar”，在任何字符串中，`foo`, `foos`,`bar`都`bars`应该匹配。

我认为这应该像这样工作：`(foo|bar)s?`. 我也尝试了其他一些正则表达式，但它们都是这样的。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-26T17:11:11.840

`(foo|bar)s?`是正确的...

您应该使用像`\b(foo|bar)s?\b`. 否则它也会匹配`hihellofoos`。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-26T17:13:15.890

您的问题似乎反映了您为什么在`foosss`. 请注意在字符串中查找匹配项和匹配整个字符串之间的区别。

您有几种处理方法，正确的选择取决于您的应用程序。

*   将正则表达式锚定到整个输入行或输入：`^(foo|bar)s?$`
*   将正则表达式锚定到一个单词：`\b(foo|bar)s?\b`
*   一些 API（但不是`preg_match`）有一个单独的函数来匹配整个字符串。

# java - JVM/AS 监控工具

> ID：12131877
> 
> 赞同：2
> 
> 时间：2012-08-26T16:37:53.160
> 
> 标签：java, jboss, ejb, websphere

我正在研究有助于在应用程序生产期间监视 JVM（内存、处理器、线程数）和/或 Application Server 资源的使用（请求、池中 EJB 的数量等）的工具。

我只知道 jconsole 和 VisualVM

你还知道什么？你使用什么目的？

非常感谢=]

* * *

感谢您到现在为止的答案。有人知道一些监视 WebLogic 的工具吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-27T19:46:42.133

也试试 JavaMelody。

[https://code.google.com/p/javamelody/](https://code.google.com/p/javamelody/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-26T18:11:00.370

jhat - 在服务器上获取内存转储

jstack - 获取所有当前线程的跟踪信息并查看是否存在死锁

jmap - 用于堆摘要视图

jstat - 性能统计

这些工具是基于控制台的，并且易于在没有 GUI 的服务器上使用

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-27T05:38:18.893

WAS ISC 具有内置的 PMI（性能监控基础设施）——它允许收集您提到的每台服务器的所有性能数据。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-27T07:55:15.733

您可以查看 RHQ 平台。它不仅允许您管理和监控 JVM，还允许您管理和监控许多其他服务。当您使用一些 JBoss 服务器时，这些解决方案特别有用。

但它也相当复杂，更适合生产环境。

这是链接：[http ://www.jboss.org/rhq](http://www.jboss.org/rhq)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-18T20:11:44.447

IBM 用于 Websphere Monitoring 的官方工具是**IBM Tivoli Composite Application Manager for Application Diagnostics (ITCAM for AD)**，它与**​​IBM Tivoli Monitoring (ITM)**平台一起为您提供生产服务器中发生的情况以及警报的完整画面，历史数据，事件发生时的一些动作等。

或者，您可以尝试使用[Support Assistant](http://www-01.ibm.com/software/support/isa)提供的 Health Center 等解决方案，或使用 Nagios 等开源监控系统并使用可以监控 Websphere 环境的插件。

如果您只想快速解决问题而不需要带有警报、历史数据等的完整监控产品，您可以使用**Performance Viewer**应用程序（位于管理控制台的监控和调整 > 性能查看器 > 当前活动中）来获取所有你提到的指标。

# objective-c - 所有布尔值 YES 或所有布尔值 NO 的简写？

> ID：12131879
> 
> 赞同：4
> 
> 时间：2012-08-26T16:37:58.607
> 
> 标签：objective-c, math, boolean, logic

通常在我的代码中，我需要检查 x 个布尔值的状态是否全部为真或所有布尔值都为假。所以我这样做：

```
BOOL first, second, third;
if((first && second && third) || (!first && !second && !third))
     //do something 
```

作为一个懒惰的程序员，我想知道这种查询是否有一些数学简写，而不是每次都必须输入整个内容？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-26T16:44:03.887

所有布尔值相同的简写是测试（成对）相等性：

```
(first==second && second==third) 
```

当然，您可以将其扩展为任意数量的布尔值，将`N-1`相等检查与*and*运算符结合使用。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-26T18:15:43.267

如果这是您经常需要的东西，那么您最好使用整数并单独读取位。

例如，而不是：

```
BOOL x; // not this
BOOL y; // not this
BOOL z; // not this 
```

...而不是位字段（因为它们的布局是实现定义的）：

```
unsigned int x : 1; // not this
unsigned int y : 1; // not this
unsigned int z : 1; // not this 
```

...**使用单个字段**，例如：

```
unsigned int flags; // do this 
```

...并将**每个值分配给一个位**；例如：

```
enum { // do this
  FLAG_X = (1 << 0),
  FLAG_Y = (1 << 1),
  FLAG_Z = (1 << 2),
  ALL_FLAGS = 0x07 // "all bits are on"
}; 
```

然后，要测试“全部为假”，您只需说“ `if (!flags)`”，要测试“全部为真”，您只需说“ `if (flags == ALL_FLAGS)`”，其中`ALL_FLAGS`是将所有有效位设置为 1 的数字。其他位运算符可用于设置或测试单个位为需要。

请注意，此技术的上限为 32 个布尔值，然后您必须执行更多操作（例如，创建一个额外的整数字段来存储更多位）。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-26T17:17:44.323

检查总和是否为 0 或等于布尔数：

```
((first + second + third) % 3 == 0) 
```

这适用于任意数量的参数。

（但不要把这个答案当真，认真去做。）

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-26T18:05:18.413

在谈到谓词时，您通常可以通过使用两个变量进行量化操作来简化逻辑 - 全称量化（对所有人）和存在量化（存在）。

```
BOOL allValues = (value1 && value2 && value3);
BOOL anyValue = (value1 || value2 || value3);

if (allValues || !anyValue) {
   ... do something
}
```

如果您在数组中有很多布尔值，这也将起作用 - 您可以创建一个`for`评估这两个变量的循环。

# perl - 查找已为 Debian 和 Redhat 打包的 Perl 模块

> ID：12131882
> 
> 赞同：3
> 
> 时间：2012-08-26T16:38:19.993
> 
> 标签：perl, package, debian, redhat

我正在研究制作一个使用许多模块的 Perl 应用程序到 Debian 和/或 Redhat 包中。目前，我认为“最干净”的方法是在可能的情况下引用已经为给定发行版打包的模块。

另一种方法是使用 CPAN，可能会有一些重复，@INC 等问题。

但是，我可以在这里找到或查询 Debian 软件包列表：http: [//pkg-perl.alioth.debian.org/cpan2deb/](http://pkg-perl.alioth.debian.org/cpan2deb/)但我目前找不到 Redhat/Fedora 的等价物。另外，我真的不知道 cpan2deb 是否具有权威性和最新性。

如果有另一种干净的方法可以做到这一点，我也欢迎任何其他想法。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-26T18:12:31.090

Debian Perl Group 是您在 Debian 世界上的最佳选择。他们不仅截获 Debian 的所有传播模块包，而且还试图使它们保持最新。

请参阅此页面：

[http://qa.debian.org/developer.php?login=pkg-perl-maintainers@lists.alioth.debian.org](http://qa.debian.org/developer.php?login=pkg-perl-maintainers@lists.alioth.debian.org)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-26T17:17:33.600

有[cpanspec](http://cpanspec.sourceforge.net/)，但几年没碰过。我似乎记得 cpan2rpm 但我对那个没有太多经验。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-26T22:38:30.330

> > 另一种方法是使用 CPAN，可能会有一些重复，@INC 等问题。

我有一个为 debian 打包的 perl 程序，它具有大量依赖项。为方便起见，我选择了一种肮脏的混合方法，其中包含一些打包的模块作为依赖项，以及一个作弊后门 CPAN 安装，它从我的安装后脚本运行。我配置了我的应用程序 META.yml 的副本，然后重新检查我的依赖项。

1.`debian/rules`文件制作META.yml的副本：

```
 override_dh_auto_install:
dh_auto_install; \
cp META.yml etc/;\ 
```

2.`debian/libmyapp-perl.install`然后安装META.yml：

```
etc/META.yml /usr/share/myapp/etc/ 
```

3.`debian/libmyapp-perl.postinstall`然后交叉检查依赖关系：

```
echo "Cross checking with cpan";
for m in `perl -Mstrict -MYAML::Syck -e'my $r = YAML::Syck::LoadFile("/usr/share/myapp/etc/META.yml")->{requires}; for (grep {$_ ne "perl"} (sort keys %$r)) {eval "use $_ $r->{$_}"; print "$_\n" if $@}'`; do
   # would prefer App::cpanminus, but that's not packaged for debian either?
   PERL_MM_USE_DEFAULT=1 perl -MCPAN -e "install $m";
 done 
```

不完全干净，但是一种安装依赖 debian 包和一些 CPAN 模块的混合的快速方法。

# jquery - 我可以结合这两个 jQuery 块吗？

> ID：12131886
> 
> 赞同：0
> 
> 时间：2012-08-26T16:38:55.187
> 
> 标签：jquery

我的代码中有这些块：

```
$.fn.dataTableExt.afnSortData['dom-text'] = function (oSettings, iColumn) {
    var aData = [];
    $('td:eq(' + iColumn + ') input', oSettings.oApi._fnGetTrNodes(oSettings)).each(function () {
        aData.push(this.value);
    });
    return aData;
}

$.fn.dataTableExt.afnSortData['dom-data-rk'] = function (oSettings, iColumn) {
    var aData = [];
    $('td:eq(' + iColumn + ')', oSettings.oApi._fnGetTrNodes(oSettings)).each(function () {
        aData.push($(this).attr('data-rk'));
    });
    return aData;
} 
```

这是什么意思：$.fn.dataTableExt 我不熟悉 $.fn。

我也可以将这两者结合起来吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-26T16:46:13.740

和属性不同`dom-text`，`dom-data-rk`因此您不能将它们 100% 组合到同一个块中。此外，功能实现略有不同：

*   `'td:eq(...) input'`与`'td:eq(...)'`,
*   `aData.push(this.value)`与`aData.push($(this).attr('data-rk')`。

使用 jQuery.extend：

```
$.extend($.fn.dataTableExt.afnSortData, {
  'dom-text': function(oSettings, iColumn) { ... },
  'dom-data-rk': function(oSettings, iColumn) { ... }
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-26T16:52:56.767

您可以做的是使用`$.each`包含差异的对象。然后每个函数的通用代码路径可以相同。但是，考虑到函数已经很简洁并且存在一些差异，实际上并没有更简洁的解决方案：

```
$.each({
  'dom-text': {
    selector: function(i) { return 'td:eq(' + i + ') input'; },
    item: function(elem) { return elem.value; }
  },
  'dom-data-rk': {
    selector: function(i) { return 'td:eq(' + i + ')'; },
    item: function(elem) { return $(elem).data('rk'); }
  }
}, function(key, descriptor) {
  $.fn.dataTableExt.afnSortData[key] = function(oSettings, iColumn) {
    var aData = [];

    $(oSettings.oApi._fnGetTrNodes(oSettings))
      .find(descriptor.selector(iColumn))
      .each(function () {
          aData.push(descriptor.item(this));
      });

    return aData;
  };
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-26T16:49:19.717

由于它们具有不同的输入和输出，因此将它们组合起来并不是一个好主意。从我所见，第一个获取指定列的输入值，并将它们添加到数组中。第二个获取属性名称 data-rk 并将它们添加到数组中。

如果你真的必须将它们组合起来，你可以将输出添加到不同的列表中，但是你必须使用 IFs 语句来检查它是哪种类型的排序，这将是一种......

# ms-access - 在 MS 访问中执行计算

> ID：12131888
> 
> 赞同：0
> 
> 时间：2012-08-26T16:39:12.567
> 
> 标签：ms-access, vba

在 MS 访问中进行一些计算以通过用户输入表单存储在绑定表中的正确方法是什么我应该使用 VBA 还是简单地从访问。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-26T16:49:46.613

例如，您可以直接在文本框中进行简单计算。如果您将控制源设置为“=A*B”之类的内容，您将`A * B`在文本框中看到结果。但是，在 VBA 中，您可以编写可以重用的更复杂的函数（甚至来自文本框“=MyFunction(A,B)”）。

在 VBA 函数中，您可以将中间结果存储在变量中、执行循环等。您甚至可以实现一些错误处理。否则这是不可能的。

与将计算分散到表单和报告中的数十个控件上相比，如果您将代码保存在模块中的中心位置，它会使您的应用程序更易于维护。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-26T16:50:02.483

一般规则是您不应该存储计算。如果必须将计算写入绑定文本框，则必须使用 VBA。如果您使用的是 MS Access 2010，则可以使用[计算列](http://msdn.microsoft.com/en-us/library/office/ff945943.aspx)。

# java - Android - 启动与已知设备的蓝牙连接

> ID：12131891
> 
> 赞同：1
> 
> 时间：2012-08-26T16:39:25.543
> 
> 标签：java, android, bluetooth

我在 Android 开发者网站上阅读了很多关于蓝牙的内容，但我无法理解一件事，我如何使用我在 ListView 中获得的他的 mac 地址与配对（或绑定）设备建立连接。只是为了看看我的代码是否有效（OnItemClickListner 部分），我使用一个按钮来显示 mac 地址。但我想做的是使用 OnItemClickListener 启动与所选设备的连接。（我希望我的解释清楚）

这是我的代码的至少一部分。 [http://pastie.org/4591835](http://pastie.org/4591835)

事情是我不知道如何使用 rfcomm 来做我想做的事。

有人可以向我解释一下吗？

我的代码的目的是将我的 android 手机连接到我的 Arduino 并通过一些按钮向它发送信件，例如：按钮 Led 1 将向我的 arduino 发送“A”等等。

提前致谢 ！

```
 package com.jon.arduino.remote;

import java.util.Set;
import android.os.Bundle;
import android.app.Activity;
import android.bluetooth.BluetoothAdapter;
import android.bluetooth.BluetoothDevice;
import android.content.Intent;
import android.view.Menu;
import android.view.View;
import android.widget.AdapterView;
import android.widget.ArrayAdapter;
import android.widget.Button;
import android.widget.ListView;
import android.widget.TextView;

public class NextActivity extends Activity {

    // Variables & constantes
    BluetoothAdapter mBluetoothAdapter = BluetoothAdapter.getDefaultAdapter();
    private ArrayAdapter<String> deviceslist;
    public static String EXTRA_DEVICE_ADDRESS = "device_address";

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_device_list);
        setupUI();
        searchbtdevices();
    }

    /////////////////////////////////////////////////////////////////// 
    private void searchbtdevices() {

        Set<BluetoothDevice> pairedDevices = mBluetoothAdapter.getBondedDevices();
        // If there are paired devices
        if (pairedDevices.size() > 0) {
            // Loop through paired devices
            for (BluetoothDevice device : pairedDevices) {
                // Add the name and address to an array adapter to show in a ListView
                deviceslist.add(device.getName() + "\n" + device.getAddress());
                                                         }
                                        } 

                           }

    /////////////////////////////////////////////////////////////////// 
    /*private void connecttobt() 
    {

    }*/

    /////////////////////////////////////////////////////////////////// 
    private void setupUI() {

        final Button btnmacaddress = (Button) findViewById(R.id.btnmacaddress);
        final ListView bt_deviceslist = (ListView) findViewById(R.id.bt_deviceslist);
        deviceslist = new ArrayAdapter<String>(this, android.R.layout.simple_list_item_1);
        bt_deviceslist.setAdapter(deviceslist);

        bt_deviceslist.setOnItemClickListener(new AdapterView.OnItemClickListener() {
               public void onItemClick(AdapterView<?> list, View v, int pos, long id) {

                   mBluetoothAdapter.cancelDiscovery();
                   String info = ((TextView) v).getText().toString();

                        // Attempt to extract a MAC address
                        String macaddress = info.substring(info.length() - 17);

                        // Create the result Intent and include the MAC address
                        Intent intent = new Intent();
                        intent.putExtra(EXTRA_DEVICE_ADDRESS, macaddress);

                        mBluetoothAdapter.cancelDiscovery();
                    //  connecttobt();

                        btnmacaddress.setText(macaddress);
                                                                                    }});                
                            }
    ///////////////////////////////////////////////////////////////////                                                                                 
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-28T02:56:52.383

我做了一些类似于你想做的事情，并且有两个例子可以在以下位置找到：

[http://digitalhacksblog.blogspot.com/2012/05/arduino-to-android-basic-bluetooth.html](http://digitalhacksblog.blogspot.com/2012/05/arduino-to-android-basic-bluetooth.html)

[http://digitalhacksblog.blogspot.com/2012/05/arduino-to-android-turning-led-on-and.html](http://digitalhacksblog.blogspot.com/2012/05/arduino-to-android-turning-led-on-and.html)

第一个示例展示了如何使用名为 BlueTerm 的程序将文本从 Android 发送到 Arduino。这显示了 Android 和 Arduino 进行通信的基本设置。

第二个示例是 Android 上的一个程序，它可以打开和关闭 Arduino 上的 LED。这显示了如何通过程序在两个设备之间进行通信。

这些示例包含 Android 和 Arduino 所需的所有代码。

希望这可以帮助。

# ios - 如果要调用 prepareForDeletion，是否总是要调用 willTurnIntoFault？

> ID：12131898
> 
> 赞同：0
> 
> 时间：2012-08-26T16:39:52.907
> 
> 标签：ios, core-data

现在我将清理代码都放入`-willTurnIntoFault`和`-prepareForDeletion`. 但似乎每一个`-prepareForDeletion`电话总有一个陪伴`-willTurnIntoFault`。所以我想知道我是否可以只将清理代码放在`-willTurnIntoFault`.

# vb.net - ScriptMethod 未定义....VB.NET

> ID：12131903
> 
> 赞同：1
> 
> 时间：2012-08-26T16:40:10.880
> 
> 标签：vb.net, ajaxcontroltoolkit

我继承了一个 ASP.NET 2.0 VB 网站。我收到与 AJAX 相关的错误：

```
 Imports System.Web.Script.Services
  <WebMethod()> _
  <ScriptMethod(ResponseFormat:=ResponseFormat.Json)> _ 
```

我得到的错误之一是：

```
 Type 'ScriptMethod' is not defined. 
```

我从 Microsoft 下载了 AJAX 扩展，并添加了对 System.Web.Extensoins.dll 的引用，但我仍然收到错误消息。我在哪里可以获得旧的 AJAX 库以便我可以构建这个站点？谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-27T14:16:26.640

您必须拥有的进口是这些：

```
 Imports System.Web
  Imports System.Web.Services
  Imports System.Xml
  Imports System.Web.Services.Protocols
  Imports System.Web.Script.Services 
```

我引用的dll是：

*   System.Web.Extensions
*   System.Web.Extensions.Design
*   牛顿软件.Json

# php - PHP：跨度标签的正则表达式

> ID：12131905
> 
> 赞同：0
> 
> 时间：2012-08-26T16:40:15.813
> 
> 标签：php, regex, preg-match

那是我的代码：

```
preg_match('/\<span id\="([a-zA-Z0-9\s]+?)\"\>([a-zA-Z0-9\s]+?)\<\/span\>/', '<span id="1">test</span> <span id="2">test1</span>', $match);

    var_dump($match); 
```

但是为什么在 $match 数组中只有 id=1 和测试？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-26T16:42:43.137

我相信您正在寻找[preg_match_all](http://php.net/preg-match-all)。

# java - 将 nvarchar 转换为日期时间时出错

> ID：12131907
> 
> 赞同：1
> 
> 时间：2012-08-26T16:40:32.877
> 
> 标签：java, sql-server, stored-procedures

我想从我的 java 程序中执行我的 MSSQL 存储过程，方法是提供两个日期作为参数，以便在这两个日期之间进行选择。所以在java代码中我是这样进行的：

```
"EXEC [dbo].[MyProcedure] " + "'"+ dateFrom+"'" ,"'"+dateTo"'" 
```

我已经像这样在 sql server 过程中声明了我的参数：`@collected_date1 datetime, @collected_date2 datetime`。我选择了这样的两个日期：

```
SELECT @date1 = Convert(varchar(23),@collected_date1,121)
SELECT @date2= Convert(varchar(23),@collected_date2, 121) 
```

但是我有这个消息错误：`Error converting data type nvarchar to datetime`

请问你能帮帮我吗 ？谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-26T16:45:56.787

在上面的语句中你声明了变量

@collected_date1 日期时间，@collected_date2 日期时间

当你设置你将数据类型转换为 varchar 所以它给你错误

如果要设置为 datetime 数据类型，则应使用

```
SELECT @date2= Convert(datetime,@collected_date2, 121)  ; 
```

# c# - 为什么不能更改 Monotouch.Dialog.TableView.Background 颜色

> ID：12131910
> 
> 赞同：1
> 
> 时间：2012-08-26T16:40:43.390
> 
> 标签：c#, ios, xamarin.ios, monotouch.dialog

为什么不能`MonoTouch.Dialog.TableView.Background`变色？我正在使用 MonoTouch.Dialog 的 Elements API。还是灰色的！

```
class MyDialogViewController : DialogViewController {

public MyDialogViewController (RootElement root) : base (root)
{
}

public override void LoadView ()
{
    base.LoadView ();
    TableView.BackgroundColor = UIColor.Clear;
    UIImage background = UIImage.FromFile ("Mybackground.png");
    ParentViewController.View.BackgroundColor = UIColor.FromPatternImage (background);
}
}

public partial class MyVC: UINavigationController
{
    public void CreateTestUI()
    {

            var menu = new RootElement("MyMenu"){
            new Section ("test"){
                new StringElement("Test", delegate() { }), ...

        var dv = new MyDialogViewController (menu) {
            Autorotate = true
        };

        // add the nav controller to the window
        this.PushViewController (dv, true); 
      }
  } 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-29T09:37:40.937

在 iPad 中，必须添加这一行：`TableView.BackgroundView = null;`

现在它运作良好，感谢 poupou，感谢所有人。

```
 public override void LoadView()
   {
        base.LoadView();
        TableView.BackgroundView = null;
        TableView.BackgroundColor = UIColor.Black;
   } 
```

# java - 在一个词中寻找一个字符。char 是单击的按钮

> ID：12131915
> 
> 赞同：1
> 
> 时间：2012-08-26T16:41:14.217
> 
> 标签：java, netbeans

来自stackoverflow的人通过给我更合适的正确代码来帮助我编写按钮代码......但问题是我想在刽子手程序中使用此代码，当有人点击按钮时，它必须扫描一个单词并打印“是，字母在单词中”或“否，字母不在单词中”

我在stackoverflow中遇到了一些这样做的代码，但我不知道如何使这些人的代码适应我的按钮代码

创建按钮的代码（据我所知）：

```
public CharSearch(){

super(BoxLayout.Y_AXIS);
    for(char i = 'A'; i <= 'Z'; i++){
        String buttonText = new Character(i).toString();
        JButton button = getButton(buttonText);
        add(button);
    }
}

public JButton getButton(final String text){
    final JButton button = new JButton(text);
    button.addActionListener(new ActionListener(){
        public void actionPerformed(ActionEvent e) {
            JOptionPane.showMessageDialog(null, "You have clicked: "+text);
            //If you want to do something with the button:
            button.setText("Clicked"); // (can access button because it's marked as final)
        }
    });
    return button 
```

然后是我找到的代码（我也会发布链接）：

```
if(original.indexOf(button)!=-1){
    JOptionPane.showConfirmDialog(panel, "Your word does contain" + button );
}
else{
    JOptionPane.showConfirmDialog(panel, "There is no" + button );
} 
```

[如何检查单个字符是否出现在字符串中？](https://stackoverflow.com/questions/506105/how-can-i-check-if-a-single-character-appears-in-a-string)

问题是我如何让这两个代码一起工作，我尝试过融合它们，但是我得到了 indexOf 的错误

```
if(original.indexOf(button)!=-1){ 
```

我还将发布我的完整代码：

```
import java.awt.*;
import javax.swing.*;
import java.awt.event.*;

public final class CharSearch extends Box{
int i =0;
int error = 0;
static JPanel panel;
String original = "Dinosaur";
JLabel label = new JLabel();
String secret = new String(new char[original.length()]).replace('\0', '-');

public CharSearch(){

super(BoxLayout.Y_AXIS);
    for(char i = 'A'; i <= 'Z'; i++){
        String buttonText = new Character(i).toString();
        JButton button = getButton(buttonText);
        add(button);
    }
}

public JButton getButton(final String text){
    final JButton button = new JButton(text);
    button.addActionListener(new ActionListener(){
        public void actionPerformed(ActionEvent e) {
            JOptionPane.showMessageDialog(null, "You have clicked: "+text);
            //If you want to do something with the button:
            button.setText("Clicked"); // (can access button because it's marked as final)
        }
    });
    return button;

    if(original.indexOf(button)!=-1){
    JOptionPane.showConfirmDialog(panel, "Your word does contain" + button );
    }
 else{
    JOptionPane.showConfirmDialog(panel, "There is no" + button );
 }

}

public static void main(String[] args){
    EventQueue.invokeLater(new Runnable(){
        public void run(){
           JFrame frame=new JFrame();
            frame.setDefaultCloseOperation( JFrame.EXIT_ON_CLOSE );
            frame.setContentPane(new CharSearch());
            frame.pack();
            frame.setVisible(true);
            new CharSearch();
        }
    });
}
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-26T16:43:50.080

将按钮更改为 button.getText() （假设按钮的文本就像 b 或 c 一样），或者如果您将它们全部按其字符命名，则可能是 getName（这可能会更好，因为它允许您使用不同的东西按钮显示的文本，例如按钮可能是“选择 c”，但名称为“c”，它仍然可以工作）

# ruby-on-rails - 仅设计电子邮件确认

> ID：12131922
> 
> 赞同：1
> 
> 时间：2012-08-26T16:42:05.747
> 
> 标签：ruby-on-rails

我是 Rails 的新手，我开始使用 Devise， - 这是一个很棒的宝石，但我不明白如何只做电子邮件确认？在注册页面上仅显示电子邮件的字段...和密码在此电子邮件上发送。

我看到了这个页面： [https ://github.com/plataformatec/devise/wiki/How-To:-Email-only-sign-up](https://github.com/plataformatec/devise/wiki/How-To%3a-Email-only-sign-up)

但出了点问题.. 我问是否有关于这个问题的详细指南或视频或专门针对 DEVISE 的详细视频教程

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-26T22:18:51.960

你可以在 Devise 上找到 Railscast：

*   [#209 介绍设计](http://railscasts.com/episodes/209-introducing-devise)
*   [#210 定制设计](http://railscasts.com/episodes/210-customizing-devise)

# sql - 在查询之间引用字段值

> ID：12131924
> 
> 赞同：0
> 
> 时间：2012-08-26T16:42:19.387
> 
> 标签：sql, ms-access-2010, calculated-field

我试图通过使用查询在 Access 中创建计算。目前，一个查询计算“MPP Oil”（最大生产潜力）的值，另一个查询需要使用该值来计算“未分配损失”。这些计算使用来自基本查询“PEBaseQuery”的公司/资产/年份数据。计算未分配损失的其他输入值是使用 ID 引用的……不过，我的代码似乎有些问题，请帮忙！

```
SELECT 
    qb1.CompanyName, 
    qb1.AssetName, 
    qb1.Year, 
    (qb3.MPPOilRevised 
     - SUM(qb1.DatapointValue) 
     - SUM(qb2.DatapointValue * 1000000)) AS Result
FROM 
    ((PEBaseQuery AS qb1 
    INNER JOIN PEBaseQuery AS qb2 
    ON qb1.Year = qb2.Year AND qb1.AssetName=qb2.AssetName)
    INNER JOIN PE_MPPOilRevised AS qb3 
    ON qb1.Year = qb3.Year AND qb1.AssetName=qb3.AssetName)
WHERE 
    qb1.DatapointID in (2033, 2035, 2043, 2037, 2031) 
AND qb2.DatapointID=2003
GROUP BY qb1.CompanyName, qb1.AssetName, qb1.Year; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-26T17:04:59.540

根据您在评论中提到的错误：

> 错误“您尝试执行的查询不包含指定表达式 'CompanyName' 作为聚合函数的一部分”

使用聚合函数需要您按 SELECT 列表中出现的列而不是聚合列进行分组。

**编辑：**

我认为这就是你要找的：

```
SELECT
    qb1.CompanyName, 
    qb1.AssetName, 
    qb1.Year, 
    qb3.MPPOilRevised - TotalDataPointValue - TotalDataPointValueFactor
FROM
    ((
        SELECT 
            qb1.CompanyName, 
            qb1.AssetName, 
            qb1.Year, 
            SUM(qb1.DatapointValue) 'TotalDataPointValue',
            SUM(qb2.DatapointValue * 1000000) 'TotalDataPointValueFactor'
        FROM 
            (PEBaseQuery AS qb1 
            INNER JOIN PEBaseQuery AS qb2 
            ON qb1.Year = qb2.Year AND qb1.AssetName = qb2.AssetName)
        WHERE 
            qb1.DatapointID in (2033, 2035, 2043, 2037, 2031) 
        AND qb2.DatapointID = 2003
        GROUP BY qb1.CompanyName, qb1.AssetName, qb1.Year
    ) qb1
    INNER JOIN PE_MPPOilRevised AS qb3 
    ON qb1.Year = qb3.Year AND qb1.AssetName=qb3.AssetName) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-26T17:04:24.837

创建聚合查询时，每个选定的字段都必须进行聚合或分组。

尝试：

```
SELECT 
    qb1.CompanyName, 
    qb1.AssetName, 
    qb1.Year, 
    (qb3.MPPOilRevised 
     - SUM(qb1.DatapointValue) 
     - SUM(qb2.DatapointValue * 1000000)) AS Result
FROM 
    PEBaseQuery AS qb1 
    INNER JOIN PEBaseQuery AS qb2 
    ON qb1.Year = qb2.Year AND qb1.Assetname=qb2.AssetName
    INNER JOIN PE_MPPOilRevised AS qb3 
    ON qb1.Year = qb3.Year AND qb1.Assetname=qb3.AssetName
WHERE 
    qb1.DatapointID in (2033, 2035, 2043, 2037, 2031) 
AND qb2.DatapointID=2003;
GROUP BY
    qb1.CompanyName, 
    qb1.AssetName, 
    qb1.Year 
```

# c - 仅使用返回的指针获取 malloc 的大小

> ID：12131925
> 
> 赞同：7
> 
> 时间：2012-08-26T16:42:21.567
> 
> 标签：c, arrays, pointers, malloc, sizeof

我希望能够改变数组的大小，所以我以这种方式创建了一个：

```
int* array;
array = malloc(sizeof(int)*10);//10 integer elements 
```

我可以像往常一样使用它，但是当我尝试像这样找到它的大小时：

```
size = sizeof(array)/sizeof(int); 
```

我得到答案 1，因为它没有将其识别为指向数组

如何获得数组的大小？（我知道它在技术上不是一个数组，但有没有办法计算出分配的内存块的整个大小？）

我假设我在描述中所说的内容是否正确？如果我在技术上对某事有错误，请纠正我。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-08-26T16:47:07.647

指针**是**指针，而不是数组。它永远不能被“识别为数组”，*因为它不是数组*。

记住数组的大小完全取决于*您。*

例如：

```
struct i_must_remember_the_size
{
    size_t len;
    int * arr;
};

struct i_must_remember_the_size a = { 10, NULL };
a.arr = malloc(a.len * sizeof *a.arr); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-26T16:47:04.073

首先，sizeof() 返回一个“类型”的大小；它对分配的内存一无所知。

其次，没有办法获得 malloc()ed 块的大小，除非您想深入了解编译器运行时库的内部结构。这绝对不是一个好主意，特别是因为在其他地方记住大小是没有问题的——你可以在内存块前面加上另一个项目来存储大小，或者你可以单独存储它。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-08-26T16:45:39.217

没有标准的方法来做你所要求的。一些编译器可能为此提供了一个函数，或者其他一些分配器可能有这样一个函数，但是，正如已经说过的，没有任何标准。

请注意，`sizeof`应用于数组不起作用，因为它将指针“识别为来自数组”：它只是将其参数识别为数组（`sizeof`是数组不会衰减为指向其第一个元素的指针的少数上下文之一); 一旦你的数组衰减到一个指针`sizeof`，只会产生指针的大小。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-08-26T16:45:48.693

在 C 标准和可移植中，这是不可能的。请注意，一些编译器提供了非标准扩展（跟踪它，例如`msize`）。

此外，`sizeof`运算符不能告诉您块的大小，因此它会产生指针的大小（请记住，它`sizeof`在编译时操作，除了可变长度数组）。

因此，您必须保持分配的大小，例如在数据结构中，例如：

```
#include <stddef.h>

typedef struct {
    int   *p;
    size_t n;
} array; 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-08-26T18:42:35.503

使用指向数组的指针类型而不是指向元素的指针类型：

```
int (*parray)[10] = malloc(sizeof *parray); 
```

然后`sizeof *parray`为您提供所需的答案，但您需要使用`*`运算符访问数组，如`(*parray)[i]`（或等效地，尽管令人困惑，`parray[0][i]`）。请注意，在现代 C 中，`10`可以用变量替换。

# asp.net-mvc-3 - 如何在视图中引入静态值 - C# MVC 3

> ID：12131927
> 
> 赞同：1
> 
> 时间：2012-08-26T16:42:30.050
> 
> 标签：asp.net-mvc-3

在我的主要观点中，我有以下几点：

```
<body style="background-image: url(../Content/themes/base/images/sos.png)"> 
```

我希望管理员可以使用 AdminModel 访问此 url，而不是在这里使用字符串 url。像这样的东西：

```
<body style="background-image: @AdminModel.BackgroundImage> 
```

我的 AdminModel 目前看起来像这样：

```
public class AdminModel
    {
        public int DateId { get; set; }
        public DateTime Date { get; set; }
        public string BackgroundPath { get; set; }
    } 
```

其中 DateId 和 Date 是 DateTime 表的字段。我不想将 BackgroundPath 添加为表格字段，因为它只会携带一个值。那么有没有更好的方法来实现这一目标？这样管理员可以在需要时更改背景 url？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-26T16:51:35.287

您将不得不使用与此非常相似的东西：

```
<body style="background-image: url(@(AdminModel.BackgroundImage))"> 
```

另一方面，您可能希望使用此处介绍的*更好*（主观）解决方案： [Action Image MVC3 Razor](https://stackoverflow.com/questions/4896439/action-image-mvc3-razor)

希望这可以帮助

# database-design - 算法/数据库规模缩放分析

> ID：12131928
> 
> 赞同：1
> 
> 时间：2012-08-26T16:42:34.917
> 
> 标签：database-design, complexity-theory, analysis

我无法找到解释我的数据模型大小要求的公式。

我将有一个标签列表。在示例中，标签只是数字。
标签总是排序的，不存在重复的。

3 个数字的所有可能的标签组合：

```
1:2:3
1:2
1:3
2:3
1
2
3 
```

4个数字：

```
1:2:3:4
1:2:3
1:2:4
1:3:4
2:3:4
1:2
1:3
1:4
2:3
2:4
3:4
1
2
3
4 
```

我计算的一些值：

```
1=>1
2=>3
3=>7
4=>15
5=>29
6=>70 
```

n 个标签最多有多少行（如上）？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-26T17:04:31.067

这是一个组合问题：您想要选择“N 中的 1 项”+“N 中的 2 项”+“N 中的 3 项”+ ...最多“N 中的 N 项”的方式数之和。

N 中 N 的可能组合之和为 2^N，因此数据库中的行将为 2^N-1（因为空组合不是有效行）。

有关组合总和的详细说明，请参见[这篇文章](http://uk.answers.yahoo.com/question/index?qid=20110115181754AAHKuQt)。

您也可以从集合的角度来考虑这一点——您想要一组 N 个项目的子集数（不包括空集）。

# android - 滑动手势启动同一活动的多个实例

> ID：12131933
> 
> 赞同：0
> 
> 时间：2012-08-26T16:43:02.817
> 
> 标签：android, android-activity, swipe-gesture

我正在尝试实现一个基于选项卡的视图，其中用户可以使用滑动手势在选项卡之间切换。但是，同一活动的多个实例会在滑动时打开。我怎样才能防止这种情况？谢谢

```
public boolean onTouch(View v, MotionEvent event) {
    switch(event.getAction() & MotionEvent.ACTION_MASK){

    case MotionEvent.ACTION_DOWN:
        initialx=event.getX();
        initialy=event.getY();
        break;

    case MotionEvent.ACTION_UP:
        break;

    case MotionEvent.ACTION_MOVE:
        finalx=event.getX();
        finaly=event.getY();

        if (initialx>(finalx+150.0)){

            RadioGroup Options = (RadioGroup) findViewById(R.id.vOptions);
            int selectedId = Options.getCheckedRadioButtonId();
            final EditText QuestionNo = (EditText)findViewById(R.id.vnumberofquestions);
            final EditText Time = (EditText)findViewById(R.id.vtimeperquestion);

            if ((QuestionNo.getText().toString().equals(" ")) || (Time.getText().toString().equals("")) ||(selectedId==-1)) { 
                Intent intenta=new Intent(VerbalSelect.this, TabDisplay.class );
                intenta.putExtra("index", 0);
                startActivity(intenta);
            }
            else {   
                RadioButton selectedButton = (RadioButton) findViewById(selectedId);
                String testtype = (String) selectedButton.getText(); 
                int questionno = Integer.parseInt(QuestionNo.getText().toString());
                int timeperquestion = Integer.parseInt(Time.getText().toString());
                long timeroffset = questionno*timeperquestion;
                Intent intent=new Intent(VerbalSelect.this, Main.class);

                intent.putExtra("testtype", testtype);
                intent.putExtra("timeroffset",timeroffset);
                intent.putExtra("questionno","1");
                intent.putExtra("questionlimit", questionno);
                startActivity(intent);
            }
            break;
        }
    }
    return true;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-26T18:17:20.087

[`ViewPager`](http://developer.android.com/reference/android/support/v4/view/ViewPager.html)在 Android 支持库中查看。您在现有的 Android 设备上看到的大多数这种形式的 UI 都使用这个组件。

每个页面都被实现为`Fragment`Views 或布局，而不是完整的 Activity。这允许在页面之间进行干净的滑动和动画，并避免您拥有多个活动的问题。

要提供与选项卡的集成，您可以使用[`PagerTabStrip`](http://developer.android.com/reference/android/support/v4/view/PagerTabStrip.html)开箱即用的方式，或者对于更传统样式的选项卡，请参阅 SDK 随附的 Support4Demos 示例中的代码示例。它可以在`<sdk>/extras/android/compatibility/v4/samples/Support4Demos`您安装 SDK 的任何位置找到。该`FragmentTabsPager`演示是您正在寻找的。

# apache-flex - Flex - 如何显示可滚动文本并捕获单击/焦点事件以允许添加新文本？

> ID：12131936
> 
> 赞同：0
> 
> 时间：2012-08-26T16:43:30.417
> 
> 标签：apache-flex, events, textarea, flash-builder

在 flex（flash builder 4.6）中，我有 as:TextArea 框，我已将其设置为可编辑 =“false”。这允许我向用户显示文本，并且文本框是可滚动的（但他们无法编辑现有文本）。

我在我的表单中添加了一个按钮，它会弹出一个简单的自定义组件，允许用户输入一些文本，然后通过捕获一个自定义事件，我将该文本添加到我的 TextArea。

这可行，但我也希望用户能够单击实际文本区域以弹出我的自定义文本输入对话框。

我尝试添加一个 FocusIn 事件处理程序。这可行，但问题是我在修改文本时似乎也会抛出 FocusIn。因此，当用户单击时，我的对话框会打开，但是当他们单击以关闭我的对话框时，它会立即弹回打开...

所以，我想我需要一些方法来知道这是否实际上是在文本区域上单击鼠标，或者可能有不同的方法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-26T23:08:12.170

好的，RIAstar 是正确的——我发誓我尝试了点击事件，但它不能正常工作，但我又试了一次，它似乎工作得很好。谢谢！

# php - php检查2个时间变量之间的范围

> ID：12131937
> 
> 赞同：0
> 
> 时间：2012-08-26T16:43:48.293
> 
> 标签：php, time, range

我在检查时间范围时遇到了问题。

例子

```
<?php

$starthour = '08'; //Starting work hour
$finishhour = '23'; //Finishing work hour
$extrapaidhours = 0; //Counting extrapaying hours

if($starthour <= 5) {
    if($starthour==5) { $extrapaidhours += 5; }
    else { $extrapaidhours += 5 - $starthour; }
}

if($starthour > 22) {
    $extrapaidhours += 24 - $starthour;
}

if($finishhour <= 5) {
    if($finishhour==5) { $extrapaidhours += 5; }
    else { $extrapaidhours += 5 - $finishhour; }
}

if($finishhour > 22) {
    $extrapaidhours += 24 - $finishhour;
}

echo $extrapaidhours; 
```

我有点堆叠，我认为我的逻辑做错了。我正在尝试获取 22-05 之间的时间。

也许有人从 21:00 到 05:00 开始工作，他在这个范围内有额外的带薪时间，即从 22:00 到 05:00 的 7 小时。

我该如何处理。谢谢你们。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-27T11:46:27.937

I like to play around with less popular PHP functions and non-standard approaches:)

```
<?php
$start_hour = '19'; //Starting work hour
$finish_hour = '08'; //Finishing work hour
$extra_paid_hours = array(22, 23, 0, 1, 2, 3, 4, 5); //list of extra paid hours

if ($start_hour <= $finish_hour) {
    $hours = range(intval($start_hour), intval($finish_hour));
} else {
    $hours = array_merge(range(intval($start_hour), 23), range(0, intval($finish_hour)));
}

$extra_paid_hours_count = array_reduce($hours, function($accum, $hour) use($extra_paid_hours) {
        $accum += in_array($hour, $extra_paid_hours) ? 1 : 0;
        return $accum;
    }, 0);

echo $extra_paid_hours_count; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-27T10:49:26.190

这是一个可能的解决方案。

我们必须考虑两种不同的情况：

第一个：`$starthour < $finishhour -> $starthour`并且`$finishhour`在同一天 第二个：`$starthour > $finishhour -> $starthour`并且`$finishhour`在两个不同的日子

此解决方案仅使用一个`if`/`else`语句和`max`/`min`函数用于其余部分

```
<?php
    $starthour = '08';      //Starting work hour
    $finishhour = '23';     //Finishing work hour
    $extrapaidhours = 0;    //Counting extrapaying hours

    if ($starthour < $finishhour) 
        $extrapaidhours += (min($finishhour,5)-min($starthour,5))
                        + (max($finishhour,22)-max($starthour,22));
    else
        $extrapaidhours += (5-min(5,$starthour))
                        + (24-max(22,$starthour))
                        + min(5,$finishhour)
                        +(max($finishhour,22)-22);
    echo $extrapaidhours;
?> 
```

# android - 什么是 ICS_R1 ICS_R2？

> ID：12131942
> 
> 赞同：5
> 
> 时间：2012-08-26T16:44:36.620
> 
> 标签：android

是时候更新我的 SDK... 我启动了 SDK Manager 认为这将是一个简单的过程，但我被那里的众多选项难住了。

![在此处输入图像描述](../Images/36c1237bc0c34c58cfbaef2166db76a7.png)

例如，我想要的只是能够针对 Android 4.0.3 (API 5) 构建和测试，但除了`SDK Platform`我看到的`ICS_R1`和`ICS_R2`. 这些是什么？我需要它们吗？

另外，为什么Android 4.0.4 没有出现在那里？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-26T16:55:58.373

> 我看到 ICS_R1 和 ICS_R2。这些是什么？

这些是“摩托罗拉 ICS R1/2 SDK 附加组件：用于手机仿真”软件包，也可从[http://developer.motorola.com/tools/resources/ 获得](http://developer.motorola.com/tools/resources/)

> 摩托罗拉 SDK 插件在添加到 Android™ SDK 时，允许您在模拟的摩托罗拉手机上运行和调试您的应用程序。

* * *

> 我需要它们吗？

不，除非您想对摩托罗拉设备做一些特定的事情。

> 另外，为什么Android 4.0.4 没有出现在那里？

4.0.4 是 AFAIK 只是针对特定设备的错误修复版本，而不是真正的独立版本。运行 4.0.4 的设备将与 4.0.3 兼容并使用相同的 API 级别

# java - Java 中的类加载器

> ID：12131945
> 
> 赞同：2
> 
> 时间：2012-08-26T16:44:53.440
> 
> 标签：java, class, classloader

类加载器是分层的。子类加载器要求父类加载类，如果父类不能加载类，则子类加载，从而保持唯一性。父类加载的所有类都可以被子类加载器访问，但反之则不然。我的脑海中出现了一个问题：child 要求 parent 加载类，但由于某些问题，parent 无法加载，所以 child 将其加载到 JVM 中。在某些时候，父级需要该类，并且显然父级无法看到 JVM 中加载了哪些子类加载器的类，那么父级是否也会在 JVM 中加载该类？同一个类的唯一性怎么办？问题如何解决？任何好的指针将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-26T16:53:42.320

> 父级无法加载，因此子级将其加载到 JVM 中

由于两个原因，父级可能无法加载该类：物理上找不到类或它预计会出现一些暂时性故障。在前一种情况下`ClassLoader`会抛出一个`ClassNotFoundException`并且永远不会改变。在后者中，父类会抛出一个不同的异常，从而中断子类加载器。所以这种情况绝不应该发生。

> 同一个类的唯一性怎么办？

不是在这种情况下，但在技术上这是可能的，尤其是在具有复杂类加载器层次结构的应用程序服务器中。本质上两个类加载器可以加载同一个类，它们是不兼容的（你可以得到`ClassCastException`）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-14T12:21:20.300

相等的类必须在以下所有方面都相等： 1\. 类的名称应该相同 2\. 包的名称应该相同 3\. 加载该类的 classLoader 必须相同。

所以不是同一个classLoader加载的类不是同一个类！这样你就可以在同一个应用服务器中导入两个不同版本的 jar，这是由不同的类加载器完成的。

希望能帮助到你...

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-26T16:55:37.950

在您的情况下，JVM 中将有两个具有相同名称但`Class`实例不同的类。这些类在各个方面都被认为是不同的。当您尝试分配引用“跨类加载器”时，您将获得类似

```
Cannot cast class Foo to class Foo 
```

这不是理论上的问题——这种异常在 Java EE/EJB 域中时不时出现。

# octave - 八度：比较两个向量

> ID：12131946
> 
> 赞同：4
> 
> 时间：2012-08-26T16:44:58.223
> 
> 标签：octave

我有这个向量：

```
t = 1: 10 % t = 1 2 3 ..10

A= [3 4 5] % a column vector 
```

如果我输入：

```
(3 == t) 
```

我得到结果：

```
0 0 1 0 0 0 0 0 0 0 % it means: 1 at location equals, and 0 at others 
```

我想对向量 a 执行此操作，这意味着它将获取向量 A 中的每个元素并比较并返回另一个向量。所以在这种情况下，结果将是一个 3×10 的矩阵。

但是这一行会导致错误：`A==t`.

当然，我可以通过使用 for 循环来做到这一点，但我想对这个操作进行矢量化。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-26T17:54:14.080

您正在寻找的是功能`ismember`

```
octave> t = 1:10
t =
    1    2    3    4    5    6    7    8    9   10

octave> A = ismember (t, [2 3 4])
A =
   0   1   1   1   0   0   0   0   0   0 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-16T14:41:39.563

使用 octave 的广播能力，它存在于 3.6.3 中（不确定何时引入），您可以简单地说：

```
A'==t 
```

如果您希望它产生与 carandraug 的命令相同的结果`ismember`，您只需添加一个“any”，如下所示：

```
any(A'==t) 
```

对于较小的向量，这种方法比 ismember 方法快得多。

```
octave:209> tic; for i=1:10000 B=ismember(t,A); end; toc;
Elapsed time is 1.5 seconds.
octave:211> tic; for i=1:10000 B=any(A'==t); end; toc;
Elapsed time is 0.2 seconds. 
```

注意：如果你的 octave 版本不支持广播，或者你想让它与旧版本兼容，A'==t 可以替换为 bsxfun(@eq,A',t)。

# php - 24小时后从Mysql中删除数据

> ID：12131947
> 
> 赞同：2
> 
> 时间：2012-08-26T16:45:10.627
> 
> 标签：php, mysql

您好，我正在开发一个数据库，我想删除 24 小时前的数据...

我正在使用 now() 插入数据.....这是我的插入代码

```
INSERT INTO counter_ads (page,ip,time) VALUES ( '$page', '$ref', NOW()) 
```

如果时间列早于 24 小时，任何人都可以帮助我，它应该被删除......使用 mysql 查询。我想要类似的东西

```
DELETE FROM counter_ads WHERE NOW()-24 > time 
```

我知道这行不通，但是像这样

谢谢

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-08-26T16:47:22.500

```
DELETE FROM counter_ads WHERE time < NOW() - INTERVAL 24 HOUR 
```

如果需要，您还可以考虑使用 MySQL 的[事件调度](http://dev.mysql.com/doc/en/events.html)程序自动化这样的过程。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-26T16:47:39.860

```
DELETE FROM counter_ads WHERE `time` < NOW() - interval 1 day 
```

# generics - Possibility using generic variables in C#

> ID：12131949
> 
> 赞同：1
> 
> 时间：2012-08-26T16:45:20.407
> 
> 标签：generics, variables

I have an interface IDatabase that interfaces a few different ways to access a database. For example using RESTful, or MySqlDirectConnect.

Next I have a class foo that has member variables A, B, C that need to pull there data out of the database.

```
public class foo
{
    private string a;
    private int b;
    private int c;
} 
```

Originally, I was going to create a Get method for every single member variable. Using Generics, you specify what interface you want to use.

```
public string GetA<T>() where T: IDatabase
{
   //example might be GetA<RESTful>();
}

public int GetB<T>() where T: IDatabase
{
   //example might be GetB<MySQL>();
} 
```

and so on....

problem I see is that if the database changes I have to go back and change all these methods. In some cases class foo might have around 20 variables with a Get() method for each.

So I would like to create a really generic GetValue() where I can specify both the interface and the variable i would like to query for.

something along the lines of:

```
public object GetValue<T>(the class variable I want to query) where T: IDatabase
{
    //query database using type T and return it to the variable specified
} 
```

I would like to avoid having a conditional for every member variable inside the method.

So is this possible?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-26T16:56:28.297

Generics don't seem like a good fit here at all. You want an interface `IDatabase` (as you have) which has multiple implementations: `RestfulDb`, `MySqlDb`, etc.

IDatabase can then have a method: `object GetValue(string name)` and you provide the concrete implementation of this in each class derived from `IDatabase`.

If you are using generics then how would your code in `GetValue<T>` know which instance of the MySql database you want to go after -- all it has is a type.

You might want to check out how a project like [NHibernat](http://nhforge.org/wikis/reference2-0en/architecture.aspx)e deals with this.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-26T16:57:24.653

Declare an interface :

```
public interface IDataProvider<T>
{
    T Get()
} 
```

then implement one provider per data source and class type

```
public class FootRestProvider : IDataProvider<Foo>
{
    public Foo Get()
    {
        // implement logic to get foos from rest
     }
}

public class FooMySqlProvider : IDataProvider<Foo>
{
    public Foo Get()
    {
        // implement logic to get foos from mysql
    }
} 
```

Finally, if properties of Foo come from different sources; merge them in another class :

```
public class FooMerger
{
    // fill this list from constructor
    private IList<IDataProvider<Foo>> providers;

    public Foo Get()
    {
        var foosToMerge = providers.Select( x => x.Get() ).

        // implement merging logic here 
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-26T20:13:56.473

Here is a great solution I worked out

```
public void GetValue<T>(string property) where T: IDatabase, new()
{
    IDatabase database = new T();
    database.RegisterObserver(this);

    string FROM = typeof(theCurrentClass).Name;
    string SELECT = editProperty = property;
    string WHERE = "1";

    database.Select(new Query(SELECT, FROM, WHERE));        
}

private string fieldName;  //contains the name of the field I want to edit

void IObserver.Update(object data)
{       
    FieldInfo field = this.GetType().GetField(fieldName, BindingFlags.NonPublic | BindingFlags.Instance);

    if(field != null)
    {
        field.SetValue(this, data);         
    }
} 
```

EDIT: I finally figured it out, just updated the above code with the final answer

# javascript - Javascript 在其他函数中重用变量

> ID：12131951
> 
> 赞同：0
> 
> 时间：2012-08-26T16:45:30.800
> 
> 标签：javascript, variables, global-variables

如何在函数二中重用变量 y？我已阅读有关此主题的信息，但最简单的解决方案是什么？

```
function one(){
    y = 2 
}

function two(){
    x = y * 2 
}​ 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-26T16:48:29.567

做你要求的最直接的方法是将它们放在另一个函数中，你在声明它时立即调用它（注意关闭函数`()`之后`}`），并在新函数的范围内声明变量。两个内部函数都可以查看和修改它们的值。

您还需要在包装函数*之外*声明包含内部函数本身的变量，以便它们对想要调用它们的代码可见。

```
var one, two;

(function() {
  var x, y;

  one = function() {
    y = 2;
  };

  two = function() {
    y = y * 2;
  };
}())

one();
two(); 
```

另一种常见的方法是使用对象及其属性而不是变量：

```
var myObject = {
  one: function() {
    this.y = 2;
  },
  two: function() {
    this.x = this.y * 2;
  }
}

myObject.one();
myObject.two(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-26T18:15:17.573

确实，我想封装每个函数的逻辑。

```
var y=3;
var x=3;

function one(){
    var y = 2;
    return y;

}

function two(){
    var y = one();
    var x = y * 2;
    return x;
}

document.write(one());
document.write(two());​ 
```

如果上面的代码解决了我的问题，那么当函数一有多个变量时它是如何工作的。假设我在函数二中需要 50 个唯一变量。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-26T16:47:30.500

声明要在其他函数中使用的全局变量，例如

```
var y=0;
function one()
{
    y=2 

}

function two()
{
    x=y*2 
}​ 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-26T16:52:38.537

大概是你想封装每个函数的逻辑，你想让函数二使用函数一的返回值？这样的事情可能是有道理的：

```
function one(){
    var y = 2;
    return y;
}

function two(){
    var y = one();
    var x = y * 2;
}​ 
```

如果你想完成一些不同的事情，那么你需要添加更多细节。

请注意，通过省略`var`您是在全局隐式声明您的变量，这是一个禁忌。

# c# - 抓取链接到某个网站的锚元素

> ID：12131954
> 
> 赞同：0
> 
> 时间：2012-08-26T16:45:41.830
> 
> 标签：c#, xpath, html-agility-pack

我试图在页面上找到链接到某个域的任何链接，然后获取链接`href`标签。

目前我正在这样做：

```
foreach(HtmlAgilityPack.HtmlNode link in entryNode.SelectNodes("//a[@href='*site.com*']"))
{
    MessageBox.Show(imageLink.InnerHtml);
} 
```

但我得到了这个例外：

> 你调用的对象是空的。

我也试过`//a[@href=*site.com*]`没有运气，它说这是一个无效的令牌。

我需要在页面上找到链接到某个域的任何链接的 XPath 表达式是什么？另外，我将如何提取它们的`href`属性（如果可能，在相同的 XPath 表达式中）。

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-26T17:09:36.860

XPath 有一个`contains`方法，所以很简单：

```
var urls = new List<Uri>();
var url = new Uri("http://stackoverflow.com/questions/12131954/");
using (var client = new WebClient())
{
  var doc = new HtmlDocument();
  doc.Load(client.OpenRead(url));
  var links = doc.DocumentNode.SelectNodes("//a[contains(@href,'stackoverflow.com')]");
  foreach (var link in links)
  {
    var uri = new Uri(url, link.Attributes["href"].Value); //fixes relative Urls
    if (uri.Scheme.StartsWith("http"))
    {
      urls.Add(uri);
    }
  }
  Console.WriteLine(urls);
} 
```

或者您可以使用 Linq 获取链接

```
var links = doc.DocumentNode.Descendants("a")
  .Where(a => a.Attributes["href"] != null
      && a.Attributes["href"].Value.ToLower().Contains("stackoverflow.com")); 
```

此外，您似乎是从子节点匹配的，如果您想使用相同的 XPath，则必须在字符串的开头添加一个点`.//a[]`

# iphone - 在 iOS URL 方案中传递带有特殊字符的文本确实会破坏 url

> ID：12131959
> 
> 赞同：0
> 
> 时间：2012-08-26T16:46:13.817
> 
> 标签：iphone, ios, url

我正在尝试使用我的 url 方案，以便我可以做到`myapp://message=XXX`

`XXX`要传递给我的应用程序的文本在哪里。

问题是，如果链接包含诸如此类的字符，则链接不会传递文本……在没有这些字符的情况下一切正常`éàü`后，URL 就会中断。`myapp://`

如何解决这个问题？

编辑：

它无法修复。

如果 URL 来自另一个网站，那么实际上没有什么可以做的......不幸的是...... afaik

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-26T16:49:54.493

用于`stringByAddingPercentEscapesUsingEncoding:`对消息进行百分比编码。

# ruby-on-rails - Kaminari 和 Rails 分页 - 未定义的方法“num_pages”

> ID：12131965
> 
> 赞同：1
> 
> 时间：2012-08-26T16:46:39.803
> 
> 标签：ruby-on-rails, kaminari

这是我的控制器：

```
def show        
    @user = User.find(params[:id])
    @microposts = @user.microposts.page(params[:page])
end 
```

如果我不向 show.html.erb 添加以下代码，这将正常工作：

```
<%= paginate @microposts %> 
```

它给出以下错误：

```
undefined method `num_pages' for #<ActiveRecord::Relation:0x007fc2ca54b228> 
```

我怎样才能解决这个问题？使用 Rails 3.2.8 和 Kaminari 0.13.0

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-27T03:34:59.700

我得到了我的答案。我用谷歌搜索，发现 kaminari 与 will_paginate 有一些问题，所以我运行了以下命令来卸载 will_paginate

```
gem uninstall will_paginate 
```

还重新启动 rails 服务器，现在它工作正常。

谢谢大家。

# java - Hibernate Mass Insert/update：这是一个好方法吗？

> ID：12131981
> 
> 赞同：5
> 
> 时间：2012-08-26T16:48:47.380
> 
> 标签：java, sql, hibernate, jdbc

我目前正在我们基于休眠的应用程序中进行性能和内存调整，以进行大批量/批量导入。我们基本上是在导入一个包含产品数据的 CSV 文件，其中一些产品是新的（插入）和一些存在（更新）。

我现在的重点是选择一种策略来找出要更新哪些实体以及要插入哪些实体，而无需对 CSV 文件中的每一行进行检查（如果存在则选择）。

我目前的做法是这样的：

1.  构建数据库内所有对象的哈希图。
2.  遍历 CSV 并使用 hashmap 来决定是更新还是插入。

这种方法效果很好，测试证明它比对每一行进行这样的单个 IF EXISTS 检查要快很多。

如果数据库中有很多实体，我担心的是内存大小。

现在我考虑使用上述方法的轻微变化，我想知道意见。基本上我想做的是对多行进行多批 IF EXISTS 检查（例如`SELECT FROM table where sku IN (sku1, sku2, sku3)`）

这是一些伪代码：

```
1\. Database contains: db{sku1, sku2,sku3,sku5}

2\. file contains: file {sku1, sku2, sku3, sku6}

3\. Expected result: 
   updates: {sku1, sku2, sku3}
   inserts{sku6}

4\. Algorithm

   have a map to keep database entities which need updates
   updatemap {}
   now iterate over the file in e.g. batches of 2 rows (for demo purposes)
   1st iteration: foreach (select where sku IN (sku1, sku2) limit 2) as elem
    -> updatemap.add(elem)  -> elem is asumed to be a persistent entity here
    -> myDAO.update(elem)   -> executes Spring's getHibernateTemplate().update() under the hood

   -> updatemap contents after 1st loop {sku1, sku2}

   2nd iteration: foreach (select where sku IN (sku3, sku6) limit) 2 as elem
    -> updatemap.add(elem)    
    -> myDAO.update(elem)

   -> updatemap contents after 3nd loop {sku1, sku2, sku3} 
```

顺便说一句：我也已经假设像`(if i % 30 == 0) session.flush; session.clear();`

现在我们知道所有更新的元素。所有不在 updatemap 中的 skus 基本上都是插入，我们可以使用简单的集合算术来确定这些

> 文件 {sku1, sku2, sku3, sku6} - updatemap {sku1, sku2, sku3} = newinserts {sku6}

现在我们可以继续插入剩余的 CSV 行。

**结论** 我的假设是，由于文件内容的分块，我可以限制使用的内存量。与最初的方法相比，我有更多的 SELECT 语句，但如果数据库中已经有数千个实体，我可以更好地控制内存使用。

您对此有何想法？还有哪些其他有效的方法可以找出要更新哪些实体以及要批量插入哪些实体？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-26T17:28:11.060

我遇到了完全相同的问题，涉及数百万条记录，并且几乎和您一样解决了它。对旁观者来说可能不明显的一个限制是我们不能使用常规的 Hibernate 方式的 load-mutate-update，因为这会产生过多的冗余流量。

仔细阅读后，我的方法与您的方法不同，因为除了处理单个块之外，我不保留任何信息。在进行下一个之前，我会完整处理该块，包括所有插入和更新。只有这样，您才能拥有可扩展的解决方案。

对我来说最薄弱的一点是使用`executeUpdate`，它不会使用 JDBC 批处理 API。我计划进行自定义实现，但对于我的特定用例，结果证明我不需要`executeUpdate`每个块使用超过一个。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-26T19:04:32.230

我的想法

1）当你这样做时 `SELECT FROM table where sku IN (sku1, sku2, sku3) )`

当找不到 sku 时，每个查询都可能进行全表扫描，如果您对 n 中的剩余实体执行此操作，最坏的情况可能需要 n * 表扫描。

也许更简单的方法是为 csv 中的所有实体创建一个重复表（可能只是 skus 的一列并执行 MINUS 以插入新的 skus）

```
 select sku from dup_table
  MINUS  //(EXCEPT for Mysql)
 select sku from table` 
```

您可以将这些记录保存到新表 (dup_table2) 中并在 dup_table 上执行另一个 MINUS 将更新 sku。但是这些运算符是特定于数据库的，我不确定看到了多少性能提升。但是恕我直言，看起来比`where in`条款更好的选择（尤其是当 csv 列表变大时）

# excel - 在 Excel 中使用合并的列标题

> ID：12131982
> 
> 赞同：2
> 
> 时间：2012-08-26T16:48:52.280
> 
> 标签：excel, r

> **可能重复：**
> [将带有两个标头的 csv 读入 data.frame](https://stackoverflow.com/questions/11987103/read-csv-with-two-headers-into-a-data-frame)

我是 R 新手，正在努力使用 R 分析一些数据。数据恰好是 Excel 格式，现在我正在努力寻找一种将其转换为 R 友好格式的方法。

问题是列标题已合并单元格，因此实际上标题有两行。我想将其转换为一组正常的一维向量，添加一个额外的列和一行。让我用一个例子来解释：

目前，excel 格式如下所示：

```
 |  H  |  J  | 
Y |M |F |M |F | 
== == == == == 
Y1|V1|V2|V3|V4| 
```

H,J 是合并的列标题，它们中的每一个都跨越列 M 和 F。

= 表示上面的行是标题行

鉴于 H,J 都是 R 下的元素，我想将其转换为具有正常标题和两行的列格式，如下所示

```
Y |R |M |F |
== == == ==
Y1|H |V1|V2|
Y1|J |V3|V4| 
```

有谁知道如何做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-26T18:05:28.803

首先，一些假设：

*   合并的标题位于 CSV 的第一行
*   合并的标题从 CSV 的第二列开始
*   CSV 重复第二行中的变量名称（第一列中的变量除外）

第二，你的数据。

```
temp = c(",\"H\",,\"J\",", 
         "\"Y\",\"M\",\"F\",\"M\",\"F\"", 
         "\"Y1\",\"V1\",\"V2\",\"V3\",\"V4\"") 
```

第三，[这个答案的](https://stackoverflow.com/a/11987810/1270695)*略微*修改版本。

```
# check.names is set to FALSE to allow variable names to be repeated
ONE = read.csv(textConnection(temp), skip=1, check.names=FALSE,
               stringsAsFactors=FALSE)
GROUPS = read.csv(textConnection(temp), header=FALSE, 
                  nrows=1, stringsAsFactors=FALSE)
GROUPS = GROUPS[!is.na(GROUPS)]

# This can be shortened, but I've written it this way to show how
#   it can be generalized. For instance, if 3 columns were repeated
#   instead of 2, the rep statement could be changed to reflect that
names(ONE)[-1] = paste0(names(ONE)[-1], ".",
                        rep(GROUPS, each=(length(names(ONE)[-1])/2))) 
```

第四，数据的实际重塑。

```
TWO = reshape(ONE, direction="long", ids=1, varying=2:ncol(ONE))
# And, here's the output.
TWO
#      Y time  M  F id
# 1.H Y1    H V1 V2  1
# 1.J Y1    J V3 V4  1 
```

# javascript - 检查访问者是否使用带有 HTML 的 Android 手机？

> ID：12131984
> 
> 赞同：2
> 
> 时间：2012-08-26T16:49:03.310
> 
> 标签：javascript, android, html

有没有一种使用 HTML/Javascript 来检查访问者是否使用 Android 手机的方法，有时我会在论坛上看到这个，当你在 Android 手机上打开论坛时，它会弹出一个窗口，说该论坛有一个应用程序，人们如何做到这一点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-26T16:56:30.333

理论上，以下将起作用。

```
if (navigator.userAgent.match(/android/ig)) {
    // Android only code
} 
```

不过，这被认为是不好的做法（UA 嗅探）。读取[浏览器检测不正确](http://c.nath.is/J1Oo)。但是，这不适用于您的情况，因为您使用它来寻找某种设备，而不是作为一种形式的[功能检测](https://stackoverflow.com/questions/1294586/browser-detection-versus-feature-detection)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-26T18:50:31.350

检测 Android 用户代理时，请先阅读这篇文章：[http ://android-developers.blogspot.com/2010/12/android-browser-user-agent-issues.html](http://android-developers.blogspot.com/2010/12/android-browser-user-agent-issues.html)

简而言之，如果 Android 用户代理不包含子字符串“Mobile”，则它是平板电脑或其他大屏幕设备，如果您为他们提供手机大小的页面，用户可能会对您感到恼火。:)

# vim - 在vim中组合文件类型命令？

> ID：12131985
> 
> 赞同：1
> 
> 时间：2012-08-26T16:49:04.430
> 
> 标签：vim, file-type

我正在使用来自 vim wiki 的示例 vimrc，其中包含“filetype indent plugin on”。我想知道这是否与设置“filetype plugin on”和“filetype indent on”相同，还是我必须在单独的命令中打开“filetype plugin”？

“filetype plugin indent on”是否与“filetype indent plugin on”相同？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-26T16:57:25.703

它们可以单独提供：

```
filetype plugin on
filetype indent on 
```

这与单行命令相同：`filetype indent plugin on`, 或`filetype plugin indent on`.

任一命令，然后`filetype indent plugin on`打开文件类型检测：`filetype on`.

`plugin`并且`indent`是两个独立的`filetype`标志。键入只是`:filetype`为了查看标志的各个状态。

# jquery - jQuery同位素居中

> ID：12131989
> 
> 赞同：22
> 
> 时间：2012-08-26T16:49:09.530
> 
> 标签：jquery, centering, jquery-isotope

> **可能重复：**
> [如何在 DIV 中居中 DIV？](https://stackoverflow.com/questions/114543/how-to-center-div-in-div)

请看下面的图片：

![在此处输入图像描述](../Images/3b679f050a5b30b9c0c9413103577e88.png)

如何使灰色方块在红色容器 div 内水平居中？这都是用同位素制成的，所以请记住这一点。

提前致谢。

![在此处输入图像描述](../Images/9a797868b47917f28823ac54d106b857.png) ![在此处输入图像描述](../Images/e97db8ea0823bc55de14fb955d4e85dd.png)

即使父（红色）div 总是在中间对齐，灰色的、较小的也不是。在顶部图像中，当它们在单个列中对齐时，该列应位于包装器（红色）div 的正中间。

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2012-08-26T18:05:32.210

为 Isotope 实现居中实际上非常简单（刚刚完成了一个在移动触摸设备和桌面设备上看起来不错的网站）。您只需在本块末尾的常用同位素代码**之前**包含来自 David DeSandro 存储库的这段代码

```
<!-- centered layout extension http://isotope.metafizzy.co/ --> 

<script type="text/javascript">
$.Isotope.prototype._getCenteredMasonryColumns = function() {

    this.width = this.element.width();

    var parentWidth = this.element.parent().width();

    var colW = this.options.masonry && this.options.masonry.columnWidth || // i.e. options.masonry && options.masonry.columnWidth

    this.$filteredAtoms.outerWidth(true) || // or use the size of the first item

    parentWidth; // if there's no items, use size of container

    var cols = Math.floor(parentWidth / colW);

    cols = Math.max(cols, 1);

    this.masonry.cols = cols; // i.e. this.masonry.cols = ....
    this.masonry.columnWidth = colW; // i.e. this.masonry.columnWidth = ...
};

$.Isotope.prototype._masonryReset = function() {

    this.masonry = {}; // layout-specific props
    this._getCenteredMasonryColumns(); // FIXME shouldn't have to call this again

    var i = this.masonry.cols;

    this.masonry.colYs = [];
        while (i--) {
        this.masonry.colYs.push(0);
    }
};

$.Isotope.prototype._masonryResizeChanged = function() {

    var prevColCount = this.masonry.cols;

    this._getCenteredMasonryColumns(); // get updated colCount
    return (this.masonry.cols !== prevColCount);
};

$.Isotope.prototype._masonryGetContainerSize = function() {

    var unusedCols = 0,

    i = this.masonry.cols;
        while (--i) { // count unused columns
        if (this.masonry.colYs[i] !== 0) {
            break;
        }
        unusedCols++;
    }

    return {
        height: Math.max.apply(Math, this.masonry.colYs),
        width: (this.masonry.cols - unusedCols) * this.masonry.columnWidth // fit container to columns that have been used;
    };
};
</script> 
```

然后你像往常一样设置同位素

```
<script type="text/javascript">
$(function() {
    var $container = $('#container');
    // the usual stuff for layouting, sorting, filtering, limiting clicks to zones...
</script> 
```

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2012-08-26T17:51:24.687

找到最简单的解决方案。使用 Isotope 中的“砌体”布局：

```
$container.isotope({ 
  itemSelector: '.pbox', 
  layoutMode: 'masonry',
  masonry: { 
    isFitWidth: true 
  }
}); 
```

# css - 响应式 CSS - 如何在使用 iPhone 访问我的网站时自动调整填充？

> ID：12131996
> 
> 赞同：0
> 
> 时间：2012-08-26T16:49:50.500
> 
> 标签：css

这是我网站的链接：daisy.camorada.com 在`<style>`标签内有这个：

```
body {
padding-top: 60px;
padding-bottom: 40px;
}
.sidebar-nav {
padding: 9px 0;
} 
```

我有这个，以便信息不会在顶部的导航栏后面，但是，正如您在下面的屏幕截图中看到的那样，当我使用 iPhone 访问我的网站时，顶部的填充（我认为这是问题）太多了，因为它会向下推导航栏。

如何让导航栏在普通浏览器和 iphone 中都显示在顶部？！我不认为这与我的其他 .css 文件有冲突问题。在此先感谢您的帮助！

[iphone和普通浏览器的截图](http://i.stack.imgur.com/imUug.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-26T17:02:46.897

问题是 iOS`position: fixed;`直到 iOS 5 才支持。请参阅[移动 Safari 中的固定定位](https://stackoverflow.com/questions/743123/fixed-positioning-in-mobile-safari)。您必须`position: absolute;`与一些`@media`查询一起使用，才能有选择地将样式应用于移动浏览器。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-26T17:05:57.840

这是因为 iPhone 处理填充的方式不同（/愚蠢地）。您想删除 Body 填充并将其替换为：

```
top:60px;
position:absolute; 
```

# php - 简单的 jQuery 进度条百分比

> ID：12131999
> 
> 赞同：13
> 
> 时间：2012-08-26T16:49:55.557
> 
> 标签：php, jquery, progress-bar

我一直在尝试找到一个简单的教程，该教程显示了如何为我的文件上传添加进度百分比的基础知识，我已经构建了我的文件上传部分，所以我不想要两者都附带的插件，我想成为能够自己编写进度条，但我需要一些关于如何做到这一点的帮助。我想了解它是如何工作的，我不只是想要一些可以为我完成这一切的插件。

任何帮助将不胜感激，谢谢！

我只是对如何获取文件上传的百分比感兴趣，而不是对进度条本身感兴趣。我希望能够有一个准确的百分比。

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-08-26T16:57:08.700

看这里：

[http://jquery.malsup.com/form/progress.html](http://jquery.malsup.com/form/progress.html)

试试这个：-

**这是我的 html 代码**

```
<!doctype html>
<head>
<title>File Upload Progress Demo #1</title>
<style>
body { padding: 30px }
form { display: block; margin: 20px auto; background: #eee; border-radius: 10px; padding: 15px }

.progress { position:relative; width:400px; border: 1px solid #ddd; padding: 1px; border-radius: 3px; }
.bar { background-color: #B4F5B4; width:0%; height:20px; border-radius: 3px; }
.percent { position:absolute; display:inline-block; top:3px; left:48%; }
</style>
</head>
<body>
    <h1>File Upload Progress Demo #1</h1>
    <code>&lt;input type="file" name="myfile"></code>
        <form action="upload.php" method="post" enctype="multipart/form-data">
        <input type="file" name="uploadedfile"><br>
        <input type="submit" value="Upload File to Server">
    </form>

    <div class="progress">
        <div class="bar"></div >
        <div class="percent">0%</div >
    </div>

    <div id="status"></div>

<script src="http://ajax.googleapis.com/ajax/libs/jquery/1.7/jquery.js"></script>
<script src="http://malsup.github.com/jquery.form.js"></script>
<script>
(function() {

var bar = $('.bar');
var percent = $('.percent');
var status = $('#status');

$('form').ajaxForm({
    beforeSend: function() {
        status.empty();
        var percentVal = '0%';
        bar.width(percentVal)
        percent.html(percentVal);
    },
    uploadProgress: function(event, position, total, percentComplete) {
        var percentVal = percentComplete + '%';
        bar.width(percentVal)
        percent.html(percentVal);
    },
    complete: function(xhr) {
     bar.width("100%");
    percent.html("100%");
        status.html(xhr.responseText);
    }
}); 

})();       
</script>

</body>
</html> 
```

**我的PHP代码**

```
<?php
$target_path = "uploads/";

$target_path = $target_path . basename( $_FILES['uploadedfile']['name']); 

if(move_uploaded_file($_FILES['uploadedfile']['tmp_name'], $target_path)) {
    echo "The file ".  basename( $_FILES['uploadedfile']['name']). 
    " has been uploaded";
} else{
    echo "There was an error uploading the file, please try again!";
}
?> 
```