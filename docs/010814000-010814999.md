# StackOverflow 问答 10814000-10814999

# javascript - HTMLAjaxCommandButton 的使用问题

> ID：10814008
> 
> 赞同：0
> 
> 时间：2012-05-30T09:58:11.950
> 
> 标签：javascript, ajax, button, command

我正在使用 HTMLAjaxCommandButton 并设置了方法表达式以进行操作。单击此按钮时，将调用相应的操作，但我现在尝试的是在调用绑定方法之前提交表单。为此，我使用 HTMLAjaxCommandButton 的 setOnClick 方法为表单提交提供 Javascript。这在 Firefox 中运行良好，但在 Chrome 中存在问题。原因是动作表达式也会转换为 Button 上的 onClick 方法中存在的 Ajax 调用。所以，实际上我们现在有两种方法从 onClick 中被调用。Chrome 不喜欢这样！

任何人都知道它或处理这种情况的更好方法。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-21T10:06:36.077

问题已解决。我为 HtmlAjaxCommandButton 删除了 setAjaxSingle 和 setImmediate。现在，一切正常。我们不需要 javascript 来提交表单。

# iphone - 如何对其中的标签和子标签进行平滑的 XML 解析......？

> ID：10814009
> 
> 赞同：0
> 
> 时间：2012-05-30T09:58:16.807
> 
> 标签：iphone

我还必须以 XML 格式解析标签和子标签的数量，那么在解析和获取要显示的数据时如何使其平滑？

请提出正确的解析方法。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-30T10:03:54.643

//使用 NSXMLParser

```
NSXMLParser *parser = [[NSXMLParser alloc]initWithContentsOfURL:[NSURL URLWithString:@"YOUR_URL"]];
[parser setDelegate:self];
[parser parse]; 
```

// 下面是将为您获取数据的委托

```
-(void)parser:(NSXMLParser *)parser didStartElement:(NSString *)elementName namespaceURI:(NSString *)namespaceURI qualifiedName:(NSString *)qName attributes:(NSDictionary *)attributeDict{

if([elementName isEqualToString:@"forecast_conditions"]){
    getData = YES; // getData is a bool which is NO initialy
}

if(getData)
{
    if([elementName isEqualToString:@"day_of_week"])
        NSLog(@"%@",[attributeDict objectForKey:@"data"]);

    if([elementName isEqualToString:@"low"])
        NSLog(@"%@",[attributeDict objectForKey:@"data"]);

    if([elementName isEqualToString:@"high"])
        NSLog(@"%@",[attributeDict objectForKey:@"data"]);

    if([elementName isEqualToString:@"icon"])
        NSLog(@"%@",[attributeDict objectForKey:@"data"]);

    if([elementName isEqualToString:@"condition"])
        NSLog(@"%@",[attributeDict objectForKey:@"data"]);
     }
}

  -(void)parser:(NSXMLParser *)parser foundCharacters:(NSString *)string{

    }

  -(void)parser:(NSXMLParser *)parser didEndElement:(NSString *)elementName namespaceURI:(NSString *)namespaceURI qualifiedName:(NSString *)qName{

        if([elementName isEqualToString:@"forecast_conditions"]){
           getData = NO;
       }

   } 
```

# matlab - MATLAB：具有条件着色的散点图

> ID：10814010
> 
> 赞同：1
> 
> 时间：2012-05-30T09:58:20.347
> 
> 标签：matlab

我有一个`data`5 列的大矩阵。第 5 列包含许多零。我想为`scatter(data(:,4),data(:,5))`第 5 列中的值为零的点/行设置不同的颜色。

然后，我将绘制不同列但条件相同的散点图，即不同颜色，其中第 5 列中的值为零。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-30T10:14:41.217

您可以轻松地将不同的颜色标志设置为函数中的第四个参数：

```
scatter(d(:,4), d(:,5), 7, d(:,5)==0); 
```

这里`d(:,4)`和`d(:,5)`是点的坐标，`7`是点的大小，`d(:,5)==0`是颜色标志（对于不同的值`d(:,5)`，选择不同的颜色）。

# android - 按下 Mapview 的内置缩放控件时会调用 SingleTapUp

> ID：10814017
> 
> 赞同：0
> 
> 时间：2012-05-30T09:58:42.643
> 
> 标签：android, android-mapview, gesture

在我的地图视图中，在 SingleTapUp 中使用了 geocding。每当使用 mapview 的缩放控件时，singleTapUp 也会被调用。任何克服这种情况的建议。

我的主要方法中的代码

```
 public static TextView info;
 private MapController mapController;
private MapView mapView;
public LocationManager orgManager;
private MyOverlays itemizedoverlay, blackmarker;
public boolean gps_enabled = false;
public boolean network_enabled = false;
public Criteria c;
public String bestProvider;

public double orginLongitude, orginLatitude, destLongtitude, destLatitude,
currLatitude, currLongtitude, lat, lon;
public boolean isLongPress= false, GPSfix = false;

Location originLocation = new Location("source");
Location currLocation = new Location("current");
Location destinationLocation = new Location("destination");
Location fixlocation= new Location("fix");

NotificationManager nm;
Vibrator v;
MediaPlayer mp = new MediaPlayer();

private TextToSpeech myTTS;
private int MY_DATA_CHECK_CODE = 0;
private List<Overlay> mapOverlays;
private Projection projection;

GestureDetector gestureScanner;
long lastGesture = System.currentTimeMillis();

GeoPoint markerPoint = null;
private int count = 0;
MyLocationOverlay mo;

public GeoPoint source;

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.map_layout);

    info = (TextView) findViewById(R.id.infopane);
    mapView = (MapView) findViewById(R.id.mapView);
    //Button myloc = (Button)findViewById(R.id.myloc);

    info.setText("Please Tap on the Map");

    orgManager = (LocationManager) this
            .getSystemService(Context.LOCATION_SERVICE);

    mapView.setBuiltInZoomControls(true);
    mapView.setSatellite(true);
    markerPoint = null;
    mapController = mapView.getController();
    mapController.setZoom(16); // Zoom 1 is world view
    mapView.invalidate();

    mo = new MyLocationOverlay(MapClass.this, mapView);
    mapView.getOverlays().add(mo);

    mapOverlays = mapView.getOverlays();
    projection = mapView.getProjection();

    Drawable drawable = this.getResources()
            .getDrawable(R.drawable.mark_red);
    Drawable black_marker = this.getResources().getDrawable(
            R.drawable.marker_black);
    itemizedoverlay = new MyOverlays(drawable);
    blackmarker = new MyOverlays(black_marker);

    try {
        gps_enabled = orgManager.isProviderEnabled(LocationManager.GPS_PROVIDER);
        Log.i("success", "Gps:" + String.valueOf(gps_enabled)+ "N/w:" + String.valueOf(network_enabled) );
    } catch (Exception ex) {

        Log.i("sample", "sample");
    }

    if (!gps_enabled) {
        Log.i("failure", "Gps:" + String.valueOf(gps_enabled)+ "N/W:" + String.valueOf(network_enabled) );
        final AlertDialog.Builder builder = new AlertDialog.Builder(MapClass.this);
        builder.setTitle("Attention!");
        builder.setMessage("Sorry, location is not determined. Please open app after enabling GPS & wireless networks").setCancelable(false).setPositiveButton("OK", new OnClickListener() {

            public void onClick(DialogInterface dialog, int which) {
                // TODO Auto-generated method stub
                startActivity(new Intent(
                        android.provider.Settings.ACTION_LOCATION_SOURCE_SETTINGS));
                finish();

            }
        });

        AlertDialog alert = builder.create();  
        alert.show();  
    }

    if(gps_enabled){

        orgManager.requestLocationUpdates(LocationManager.GPS_PROVIDER, 0, 0, this);
        fixlocation = orgManager.getLastKnownLocation(LocationManager.GPS_PROVIDER);

        Log.i("fix", String.valueOf(fixlocation.getLatitude() + fixlocation.getLongitude()));

        if (fixlocation!=null){
            originLocation.setLatitude(fixlocation.getLatitude());
            originLocation.setLongitude(fixlocation.getLongitude());
            Log.i("origin fix", String.valueOf(originLocation.getLatitude() + originLocation.getLongitude()));
            GPSfix = true;
        }else Toast.makeText(MapClass.this, "", Toast.LENGTH_SHORT).show(); 
    }

    if (GPSfix) {

        // double a = originLocation.getLatitude();
        // double b = originLocation.getLongitude();

        source = new GeoPoint(
                (int) ((fixlocation.getLatitude()) * 1E6),
                (int) ((fixlocation.getLongitude()) * 1E6));
        mapController.animateTo(source);
        mapView.getMapCenter();
        createMarker();
        Toast.makeText( MapClass.this," Source GPS Values Latitude: "
                + fixlocation.getLatitude() + " Longitude: "
                + fixlocation.getLongitude(), Toast.LENGTH_SHORT).show();

    }
    else Toast.makeText(MapClass.this, "Wait for GPS", Toast.LENGTH_SHORT).show();

    gestureScanner = new GestureDetector(this, this);

} 
```

手势扫描方法中的代码。

*   长按

    ```
    @Override
    public void onLongPress(final MotionEvent e) {
        // TODO Auto-generated method stuMapClass Toast.makeText(MapClass.this,
        // "LongPress", Toast.LENGTH_SHORT)

        AlertDialog.Builder alertDialog = new AlertDialog.Builder(MapClass.this);

        // Setting Dialog Title
        alertDialog.setTitle("Alert!!");

        // Setting Dialog Message
        alertDialog.setMessage("Do you want to select this as destination");

        // Setting Positive "Yes" Button
        alertDialog.setPositiveButton("YES",
                new DialogInterface.OnClickListener() {
            @Override
            public void onClick(DialogInterface dialog, int which) {
                // Write your code here to execute after dialog

                String add = "";

                GeoPoint geopoint = mapView.getProjection().fromPixels(
                        (int) e.getX(), (int) e.getY());
                // latitude
                lat = geopoint.getLatitudeE6() / 1E6;
                // longitude
                lon = geopoint.getLongitudeE6() / 1E6;

                Geocoder geoCoder = new Geocoder(getBaseContext(),
                        Locale.getDefault());
                try {
                    List<Address> addresses = geoCoder.getFromLocation(
                            geopoint.getLatitudeE6() / 1E6,
                            geopoint.getLongitudeE6() / 1E6, 1);

                    if (addresses.size() > 0) {
                        for (int i = 0; i < addresses.get(0)
                                .getMaxAddressLineIndex(); i++)
                            add += addresses.get(0).getAddressLine(i)
                            + "\n";
                    }

                    Toast.makeText(getBaseContext(), add,
                            Toast.LENGTH_SHORT).show();
                } catch (IOException ioe) {
                    ioe.printStackTrace();
                }

                mapOverlays.add(new MyOverlay((originLocation
                        .getLatitude()),
                        (originLocation.getLongitude()), lat, lon));

                destinationLocation.setLatitude(lat);
                destinationLocation.setLongitude(lon);

                String distance = Float.toString((originLocation
                        .distanceTo(destinationLocation) / 1000));
                createblack();
                count++;

                Toast.makeText(getBaseContext(), distance + "kms",
                        Toast.LENGTH_SHORT).show();

                info.setText("Selected destination is " + "\n" + add
                        + "\n" + " The journey distance is " + distance
                        + " Kms ");

                mapView.postInvalidate();
                isLongPress = true;

                mapController.animateTo(source);
                mapView.getMapCenter();

            }

            private void createblack() {
                // TODO Auto-generated method stub
                GeoPoint p = new GeoPoint((int) (lat * 1E6),
                        (int) (lon * 1E6));
                OverlayItem overlayitem = new OverlayItem(p,
                        "Destination", "");
                blackmarker.addOverlay(overlayitem);
                mapView.getOverlays().add(blackmarker);
            }
        });
        // Setting Negative "NO" Button
        alertDialog.setNegativeButton("NO",
                new DialogInterface.OnClickListener() {
            @Override
            public void onClick(DialogInterface dialog, int which) {
                // Write your code here to execute after dialog
                Toast.makeText(getApplicationContext(),
                        "You clicked on NO", Toast.LENGTH_SHORT).show();
                dialog.cancel();
            }
        });

        // Showing Alert Message
        alertDialog.show();

    } 
    ```

    *   OnsingeTapup

    @覆盖

public boolean onSingleTapUp(MotionEvent arg0) { // TODO 自动生成的方法存根

```
 Log.i("SingleTap", arg0.toString());

        GeoPoint geopoint = mapView.getProjection().fromPixels(
                (int) arg0.getX(), (int) arg0.getY());

        Geocoder geoCoder = new Geocoder(getBaseContext(), Locale.getDefault());
        try {
            List<Address> addresses = geoCoder.getFromLocation(
                    geopoint.getLatitudeE6() / 1E6,
                    geopoint.getLongitudeE6() / 1E6, 1);

            String add = "";
            if (addresses.size() > 0) {
                for (int i = 0; i < addresses.get(0).getMaxAddressLineIndex(); i++)
                    add += addresses.get(0).getAddressLine(i) + "\n";
            }

            if (count == 0) {

                info.setText("The location you have selected is" + "\n" + add
                        + "\n" + "To confirm it longpress the location");
            } else
                Toast.makeText(getBaseContext(), add, Toast.LENGTH_SHORT)
                .show();
        } catch (IOException ioe2) {
            ioe2.printStackTrace();
        }
        return true;
    } 
```

另外使用了一个覆盖类来放置标记..

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-04T15:37:10.683

由于缺少重要部分，因此调试代码有点困难，但我建议您查看以下对类似 StackOverflow 问题的答案：

[https://stackoverflow.com/a/2990749/376016](https://stackoverflow.com/a/2990749/376016)

在 MapView 上识别手势的建议解决方案是创建一个仅处理触摸事件的自定义叠加层，并将其作为第一个叠加层插入。使用这种方法，我能够创建一个小型测试应用程序，该应用程序使用了您的大部分代码，并且正确地忽略了在 MapView 上缩放手势的捏合。

# android - pageViewer 中的动画

> ID：10814018
> 
> 赞同：1
> 
> 时间：2012-05-30T09:58:43.517
> 
> 标签：android

我在我的项目 pageViewer 中有我显示照片的地方。如何自动滑动到下一张照片？我想在 2 秒后更改下一张照片的页面。这是android中的任何解决方案还是我应该创建动画？我试试这个：

```
 final int i=0;
    while(i < adapter.getCount() ){
    handler.postDelayed(new Runnable() {
    public void run() {
        viewPager.setCurrentItem(i);
    }
},2000);
    i++;
    } 
```

但我`i`必须是最终的，我不知道如何设置CurrentItem 总是 i+1 来显示下一张照片。任何想法我该怎么做？

# facebook - 从 AS3 网站分享 url 到 Facebook

> ID：10814019
> 
> 赞同：1
> 
> 时间：2012-05-30T09:58:43.873
> 
> 标签：facebook, actionscript, sharing

我正在尝试从 Flash as3 网站共享 URL，但无法使其正常工作...我尝试了此处给出的两种方式：[如何在 AS3 中创建共享按钮](https://stackoverflow.com/questions/2511918/how-to-create-a-share-button-in-as3)

第一个作品：

```
import flash.net.navigateToURL;
import flash.net.URLVariables;
import flash.net.URLRequest;
import flash.net.URLRequestMethod;

share_btn.addEventListener(MouseEvent.CLICK, shareClickHandler);

function shareClickHandler(evt:MouseEvent):void
{
    var varsShare:URLVariables = new URLVariables();
    varsShare.u = 'http://domain.com/pageN.html';
    varsShare.t = 'Title Page';

    var urlFacebookShare:URLRequest = new URLRequest('http://www.facebook.com/sharer.php');
    urlFacebookShare.data = varsShare;
    urlFacebookShare.method = URLRequestMethod.GET;

    navigateToURL(urlFacebookShare, '_blank');
} 
```

但是，帖子说：

```
In order to use a picture add the following Metatags:
<meta name="title" content="my title" />
<meta name="description" content="my description" />
<link rel="image_src" href="images/thumbnail_image.jpg" /> 
```

但是如何？？？？

第二个解决方案显示了如何添加参数：

```
var req:URLRequest = new URLRequest();
req.url = "http://www.facebook.com/dialog/feed";
var vars:URLVariables = new URLVariables();
vars.app_id = "000000000000"; // your application's id
vars.link = "http://YourSite.com";
vars.picture = "https://www.google.com/intl/en_com/images/srpr/logo3w.png";
vars.name = "name name";
vars.caption = "caption caption caption";
vars.description = "description description description";
vars.message = "message message message message message";
vars.redirect_uri = "http://YourSite.com";
req.data = vars;
req.method = URLRequestMethod.GET;
navigateToURL(req, "_blank"); 
```

但它没有使用 Facebook 共享器.....我尝试了许多不同的方法来组合这两种解决方案，但除了奇怪的 url 不起作用之外我什么也没得到......

拜托，有人可以帮我解决这个问题，或者告诉我如何使用第二种解决方案，但与共享者一起使用？

非常感谢您的帮助

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-09-04T20:33:49.877

这是我从 AS3 中的按钮使用共享对话框的方式。希望对你有帮助

```
import flash.net.navigateToURL;

share_btn.addEventListener(MouseEvent.CLICK, shareClickHandler);

function shareClickHandler(evt:MouseEvent):void
{
    var fb_title = "titulo";
    var fb_desc = "descripcion";
    var fb_url = "http://mibff.com.mx/";
    var fab_img = "http://mibff.com.mx/MiBFF_new.jpg";
    var facebookSharer:String = "http://www.facebook.com/sharer.php?s=100&p[title]=" + fb_title + "&p[summary]=" + fb_desc + "&p[url]=" + fb_url + "&p[images][0]=" + fab_img;
    var jscommand:String = "window.open('" + facebookSharer + "','win','width=626,height=316,toolbar=no,scrollbars=no,resizable=no');";
    var sharer:URLRequest = new URLRequest("javascript:" + jscommand + " void(0);");
    navigateToURL(sharer,"_self");

    //trace(facebookSharer);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-30T10:33:07.270

您需要将 OpenGraph 元标记添加到您尝试共享的页面（`http://domain.com/pageN.html`在上面的示例中）。您在问题中给出的元标记应该添加到那里，以便 Facebook 共享脚本可以获取它。

在 HTML 代码的`<head>`和标记之间添加以下代码：`</head>`

```
<meta name="title" content="my title" />
<meta name="description" content="my description" />
<link rel="image_src" href="images/thumbnail_image.jpg" /> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-03T14:22:38.823

我通常做的 - 我创建一个 facebook 应用程序 - 使用 Facebook 登录的网站，添加应用程序域，然后在你的 html 中添加这个 javascript 函数：

```
function postToFacebook(link){              
                var caption = encodeURIComponent("this is cool");
                var name = encodeURIComponent("My cool Site");
                var pathToPicture = "http://yoursite.com/coolpicture.jpg";
                var redirect = "http://yoursite.com/redirect.html";
                var id = "123456789098876"; // your application id
                var theLink = link; // the link you want to share - this is passed as a variable from flash, similary you can pass any variables from  flash    

                var fbencoded = "http://www.facebook.com/dialog/feed?app_id=" + id + "&link=" + theLink + "&picture=" + pathToPicture + "&name=" + name +   "&caption=" + caption+ "&redirect_uri=" + redirect;
                window.open(fbencoded, "_blank");        
} 
```

在 Flash 中，只要您想分享，只需调用此 javascript 函数，新窗口将与 facebook 分享窗口一起打开：

```
ExternalInterface.call("postToFacebook", "http://mysite.com/#/cool-page") 
```

这样，您可以将任何变量传递给该函数。例如，每当有人分享时，您都可以拥有不同的图片，而仅使用元标签是不可能的.....

唯一的事情是您必须创建该 redirect.html - 它必须在您的域内，并且链接到您的应用程序。在重定向中，你可以有一些简单的东西：

```
<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<head>
    <title></title>
    <meta http-equiv="REFRESH" content="0;url=http://www.facebook.com">
</head>
<body>

</body>
</html> 
```

它只会将用户重定向到 facebook。希望这可以帮助。

# ruby-on-rails - Ruby URI::InvalidURIError: bad URI(is not URI?) 除了编码

> ID：10814021
> 
> 赞同：4
> 
> 时间：2012-05-30T09:58:47.660
> 
> 标签：ruby-on-rails, ruby, uri

我知道这是一个常见错误，我正在使用已知的解决方案，但它仍然给我同样的错误：

```
require 'open-uri'
url = "http://website.com/dirs/filex[a]"

safeurl = URI.parse(URI.encode(url))
... 
```

给`URI::InvalidURIError: bad URI(is not URI?):`

我知道它的`[`和`]`字符导致了这个。但是 URI.encode 没有做任何事情

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-05-30T10:15:56.460

我认为您的意思是要求 uri，而不是 open-uri。此外，[根据文档](http://www.ruby-doc.org/stdlib-1.9.3/libdoc/uri/rdoc/URI/Escape.html)，您可以指定带有额外字符的第二个参数进行编码。尝试通过`[]`那里。

此解决方案的代码为：

```
safeurl = URI.parse(URI.encode(url, "[]")) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-31T14:41:20.497

我在这里遇到同样的问题。我用这种方法来解决这个问题：

```
require 'cgi'
url = "http://website.com/dirs/filex[a]"

safeurl = URI.parse(CGI.escape(url).gsub("%3A", ":").gsub("%2F", "/")) 
```

我没有要求 uri，而是使用 CGI 类来转义无效字符，但是 CGI 会转义所有内容，包括冒号和正斜杠，所以在我使用 gsub 将它们取回之后。

# ruby - 如何在 ruby 中进行排序

> ID：10814025
> 
> 赞同：-3
> 
> 时间：2012-05-30T09:59:04.783
> 
> 标签：ruby

在我的表中，我有 first_name、middle_name 和 last_name 字段。我想按 Aplhabetical 顺序显示 First_name Middle_name Last_name。对于某些记录 first_name 可能为空白，对于某些记录 last_name 可能为空白，对于某些记录 middle_name 可能为空白。如果 first_name 空白需要显示中间名和姓氏，如果 middle_name 空白需要显示名字和姓氏，如果 last_name 空白需要显示名字和中间名。最后我想按字母顺序显示列表。我想如何处理这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-30T10:17:07.587

在您的情况下可能的解决方案。

您应该检测第一个**`non blank`**属性：

```
class YourModel < ActiveRecord::Base
 def representation
   [first_name, middle_name, last_name].detect{ |r| r.present? }.downcase
 end
end 
```

**获取对象：**

```
@objects = YourModel.all 
```

**排序对象：**

```
@objects.sort! { |a,b| a.representation <=> b.representation } 
```

* * *

方法**`present?`**从**`Rails 2.2.1`**版本开始可用。

[http://apidock.com/rails/v2.2.1/Object/present%3F](http://apidock.com/rails/v2.2.1/Object/present%3F)

根据评论中的讨论：**`present?`**与 相同**`!blank?`**。

```
# File activesupport/lib/active_support/core_ext/object/blank.rb, line 19
def present?
  !blank?
end 
```

**`blank?`**是 的别名**`empty?`**。

```
def empty?
  all? { |k, v| v && v.empty? && !v.is_a?(String) }
end 
```

# php - header() 不能在非常特定的行中工作

> ID：10814026
> 
> 赞同：-1
> 
> 时间：2012-05-30T09:59:09.150
> 
> 标签：php, html

我有 2 个`li`标签结合`PHP`用于字典目的：

```
<li <?php echo "title='".$this->text['tt-statistics']."'" ;?> ><a <?php if($location == "analytics") {echo 'id="current"';  } ?> href="analytics-dash.php"><?php echo $this->text['statistics'];?></a></li>         
<li <?php echo "title='".$this->text['tt-logins']."'" ;?>  ><a <?php if($location == "settings") {echo 'id="current"';  } ?> href="settings-producer.php"><?php echo $this->text['manage-logins'];?></a></li> 
```

如果我在第一个`header()`之后`$this->text['statistics'];`（在第一个末尾`li`）放一个命令，就像这样：

```
<li <?php echo "title='".$this->text['tt-statistics']."'" ;?> ><a <?php if($location == "analytics") {echo 'id="current"';  } ?> href="analytics-dash.php"><?php echo $this->text['statistics']; header('Location: http://www.example.com/');?></a></li>
<li <?php echo "title='".$this->text['tt-logins']."'" ;?>  ><a <?php if($location == "settings") {echo 'id="current"';  } ?> href="settings-producer.php"><?php echo $this->text['manage-logins'];?></a></li> 
```

标头命令工作正常。

但是如果我把它放在第二个开头`li`，就像这样：

```
<li <?php echo "title='".$this->text['tt-statistics']."'" ;?> ><a <?php if($location == "analytics") {echo 'id="current"';  } ?> href="analytics-dash.php"><?php echo $this->text['statistics'];?></a></li>
<li <?php header('Location: http://www.example.com/'); echo "title='".$this->text['tt-logins']."'" ;?>  ><a <?php if($location == "settings") {echo 'id="current"';  } ?> href="settings-producer.php"><?php echo $this->text['manage-logins'];?></a></li> 
```

它不起作用。

我知道标头**“必须在发送任何实际输出之前调用”**。但我不明白为什么或在哪里打印弄乱`header()`这两个地方之间的输出。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-30T10:03:28.803

您示例的第一个字符实际上是已经发送的输出。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-30T10:03:36.607

您的输出在`<?php`标记之前开始。

# mongodb - 如何从 Kettle 的输入源中自动获取所有字段？

> ID：10814029
> 
> 赞同：0
> 
> 时间：2012-05-30T09:59:24.260
> 
> 标签：mongodb, etl, kettle

我将使用 Pentaho Kettle ETL 工具将 MongoDB 集合中的数据导出为另一种输出格式以进行统计分析。**我试图弄清楚是否可以让 Kettle 自动导出特定集合文档中存在的所有字段？**

我必须为非平凡的文档手动创建一个转换过程，但有些字段非常简单，可以自动获取。我想知道在水壶中是否有可能，以及如何做到这一点。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-20T16:29:39.727

4.3 版本带有 MongoDB 输入步骤，并默认获取一个集合，允许使用 xpath 表达式进行查询。

它位于设计选项卡下，然后单击“大数据”文件夹。

# app-store - mach_star 和应用商店

> ID：10814032
> 
> 赞同：1
> 
> 时间：2012-05-30T09:59:36.350
> 
> 标签：app-store, osx-snow-leopard

如果使用 mach_star 进行代码注入，将 Mac 应用程序发送到 App Store 会有任何问题吗？苹果会批准这个应用程序吗？Mac App Store 中有没有使用 mach_star 的应用程序？提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-30T10:02:41.193

有一个非官方的检查清单（[AppStore Checklist](http://www.makayama.com/checklist.html)），其中第 25 项是关于解释代码的。这不是您提到的确切内容，但这可能是拒绝您的应用程序的原因。

# c# - 通用服务的 Autofac xml 配置

> ID：10814036
> 
> 赞同：1
> 
> 时间：2012-05-30T09:59:39.970
> 
> 标签：c#, dependency-injection, inversion-of-control, autofac

我有一个`BaseRepository<T>`实现类`IRepository`和一个名为 Customer 的类。

我有一个绑定指定为

```
builder.RegisterType<BaseRepository<Customer>>().As<IRepository>(); 
```

如何使用 Autofac 将此绑定移动到 xml 配置。

这是我尝试过的：

```
<component 
    type="MyProject.BaseRepository, MyProject"
    service="MyProject.IRepository, MyProject">
    <parameters>
        <parameter name="connectionString"
            value="MyConnectionString" />
    </parameters>
</component> 
```

该参数用于传递构造函数参数。实际上我在baserepository的构造函数中有参数

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2017-10-26T05:48:59.060

```
{
  "components": [{
    "type": "MyProject.BaseRepository, MyProject",
    "services": [{
      "type": "MyProject.IRepository`1[[Customer, mscorlib]], MyProject"
    }]
  }]
} 
```

更多阅读：[http ://docs.autofac.org/en/latest/configuration/xml.html](http://docs.autofac.org/en/latest/configuration/xml.html)

# c# - 共享代码，但需要不同的结果，具体取决于执行的客户端

> ID：10814038
> 
> 赞同：1
> 
> 时间：2012-05-30T09:59:51.107
> 
> 标签：c#, .net

我被要求研究一个包含 3 个项目的解决方案。2 个独立的客户端和 1 个通用代码项目。在公共代码项目（在 2 个客户端之间共享）中，我需要一个方法，根据正在执行的客户端返回稍微不同的结果。

我可以做一个部分课程来解决这个问题。还有其他可能更好的方法吗？

我无法重构解决方案以完全分离项目:-(

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-30T10:04:16.970

向此方法传递一个额外的参数，告诉它如何以不同的方式运行和调用它。

# c++ - c++向量实现-移动构造函数-移动vs前进

> ID：10814042
> 
> 赞同：3
> 
> 时间：2012-05-30T10:00:08.080
> 
> 标签：c++, c++11, move, forward, rvalue-reference

在 MSVC2010 下，`vector`类的移动构造函数定义如下：

```
vector(_Myt&& _Right)
    : _Mybase(_Right._Alval)
    {   // construct by moving _Right
    _Assign_rv(_STD forward<_Myt>(_Right));
    } 
```

由于还有一个复制构造函数的定义，我想我们永远不会`vector(_Myt&& _Right)`使用左值引用作为参数调用。

所以我想知道是否在这里，这条线：

```
_Assign_rv(_STD forward<_Myt>(_Right)); 
```

可以替换为：

```
_Assign_rv(_STD move<_Myt>(_Right)); 
```

无副作用

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-30T10:03:47.990

是的，对于没有引用限定符的类型`T`，两者`std::forward<T>`和`std::forward<T&&>`都只是花哨的说法`std::move`。

# css - 防止子元素溢出父元素的最大高度

> ID：10814043
> 
> 赞同：1
> 
> 时间：2012-05-30T10:00:10.783
> 
> 标签：css, html, layout

我正在尝试生成一个布局，其中我有一个具有身体百分比高度的 div。此外，我还想使用`max-height`.

在父级内部，我想创建一些具有更多子元素的列，所有这些都适合父级的高度（或最大高度）。

请看这个例子：http: [//jsfiddle.net/k6rfr/2/](http://jsfiddle.net/k6rfr/2/)

问题是子元素（每个高度为 50%）匹配`height`父元素而不是`max-height`.

有没有办法让子元素匹配`max-height`而不是`height`？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-30T11:26:45.990

虽然这不是您可能需要的，但它可以解决您的问题：

[http://jsfiddle.net/k6rfr/3/](http://jsfiddle.net/k6rfr/3/)

我将最大高度直接放在子元素中，省略了第二个包装器元素。您在这里遇到的问题是您必须在两个不同的地方定义高度。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-30T11:03:37.223

我认为错误在于给定的块“外部”高度为 60% 可能与您在 300px 之后写的内容不对应。这是不正确的。如果您删除指定百分比的高度，块将落入到位。或者输入正确的比例高度和最大高度。

# ruby-on-rails - favicon.ico 的不合理路由错误

> ID：10814047
> 
> 赞同：0
> 
> 时间：2012-05-30T10:00:18.697
> 
> 标签：ruby-on-rails, rails-routing

我刚刚为现有的复杂网站编写了导入/导出功能。它的设置方式是在 games/5 show 动作中，我有一个“导入”和一个“导出”按钮。这些导致适当命名的控制器操作，这些操作执行导入/导出，然后`render :action => show`再次执行。

单击导出操作会显示“我们很抱歉，但出了点问题”消息，并且 production.log 给出

```
Started GET "/games/3/export" for 212.87.32.10 at 2012-05-30 09:30:18 +0000
Processing by GamesController#export as HTML
  Parameters: {"id"=>"3"}

Started GET "/favicon.ico" for 212.87.32.10 at 2012-05-30 09:30:50 +0000

ActionController::RoutingError (No route matches [GET] "/favicon.ico"):
  actionpack (3.2.2) lib/action_dispatch/middleware/debug_exceptions.rb:21:in `call'
  actionpack (3.2.2) lib/action_dispatch/middleware/show_exceptions.rb:56:in `call'
  railties (3.2.2) lib/rails/rack/logger.rb:26:in `call_app'
  railties (3.2.2) lib/rails/rack/logger.rb:16:in `call'
  ... 
```

当有数百个页面使用相同的模板时，为什么 Rails 只抱怨这一操作中的 favicon？考虑到我正在渲染相同的旧“显示”动作，为什么它至少不会在“显示”页面上抱怨？为什么缺少图形会导致“我们很抱歉，但出了点问题”消息？

我的网站图标实际上是在异地托管的，application.html.erb 中的链接是

```
<link rel="shortcut icon" href="http://www.wooga.com/wp-content/themes/wooga-dev/images/favicon.ico" type="image/x-icon" /> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-30T10:08:08.533

这不是“Rails 在一次操作中抱怨 favicon.ico”，而是“Web 浏览器尝试获取此应用程序没有的 favicon.ico”。尝试挖掘为什么您的浏览器需要它？您是否从此操作中返回其他内容？挖掘 Chrome Inspector/Firebug 的网络选项卡，检查响应标头/正文，检查您的浏览器何时尝试获取 favicon.ico 文件（可能是在响应正文返回之前，因为它花费了太长时间？）

另外关于你的最后一个问题：

> 为什么缺少图形会导致“我们很抱歉，但出了点问题”消息？

Rails 不知道“/favicon.ico”应该返回图像文件。这是带有 404 响应的标准请求，默认情况下返回“我们很抱歉...”消息。

# java - 从网络服务器获取相关城市数据到设备

> ID：10814048
> 
> 赞同：-1
> 
> 时间：2012-05-30T10:00:21.703
> 
> 标签：java, php, android, mysql, xml

我知道有数百个关于此的问题，但我需要得到所有这些问题的答案。

**我的应用程序摘要（不是我的问题）：** 一个应用程序，它有一个地图，它创建了许多标记（兴趣点）。当用户走进标记时，它会触发有关该地点的信息。该信息包括地点的标题、使用 sdcard 中的图像的幻灯片、一些音频（带控件）和一个小文本描述。

**现在我的大问题是：**我需要创建将所有这些数据下载到我的设备的最佳方式！

我想过使用 PHP 创建的 XML 文件下载所有数据库。
为什么我认为这不会按我想要的方式工作。
我需要过滤我希望用户下载的信息。

好吧，用户只需要勾选他想要下载的信息，例如几个有信息的城市。

为此，我想创建一个这样的对话框

![多选](../Images/037f64b6b97e7741b6200279469f866d.png)

用户选择想要的城市后，应用程序必须根据选择的城市接收信息。

我在这里试图找到最佳方法的答案。

我所拥有的只是一个具有以下结构的 MySQL 数据库：
`id | name | radius | coords`

我认为通过添加有关与其相关的城市的列将锻炼。

关于信息数据，它将具有以下文件夹结构：
`/sdcard/{app_name}/{id_of_the_point}/{.jpg/.mp3/.txt}`

对于 sdcard，我将所有这些信息压缩在一个 zip 中，并考虑将其下载到设备上并将其提取到 sdcard 中的某个位置。

发布所有信息，我需要你们给我这样做的最佳实践！

提前致谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-31T11:11:00.520

``您需要使用扩展覆盖类的类，例如（请注意，此代码用于获取 json 而不是 xml）

```
public class LocationOverlay extends ItemizedOverlay<OverlayItem> {

private ArrayList<OverlayItem> overlayItemList = new ArrayList<OverlayItem>();
Context context;

public LocationOverlay(Drawable marker, Context c) {
    super(boundCenterBottom(marker));
    // TODO Auto-generated constructor stub
    populate();
    context = c;
}

@Override
protected boolean onTap(int index) {

    Toast.makeText(context,
            "Touch on marker: \n" + overlayItemList.get(index).getTitle(),
            Toast.LENGTH_LONG).show();
    // code for passing storeid's
    OverlayItem item = overlayItemList.get(index);
    String idex = (item.getTitle());
    Intent idtent = new Intent(context, StoreDetails.class);
    idtent.putExtra("&", idex);
    context.startActivity(idtent);
    return true;

}

public void addItem(GeoPoint p, String title) {
    OverlayItem newItem = new OverlayItem(p, title, null);
    overlayItemList.add(newItem);
    populate();

}

@Override
protected OverlayItem createItem(int i) {
    // TODO Auto-generated method stub
    return overlayItemList.get(i);
}

@Override
public int size() {
    // TODO Auto-generated method stub
    return overlayItemList.size();
} 
```

现在只需在您显示地图的班级中，执行此操作

```
Double jlat = j4.getDouble("Latitude");
                    Double jlon = j4.getDouble("Longitude");
                    Log.v("Latitude", jlat + "n");
                    Log.v("Longitude", jlon + "n");

                    // Get the distance between lat long
                    Location locationA = new Location("point A");

                    locationA.setLatitude(slat);
                    locationA.setLongitude(slon);

                    Location locationB = new Location("point B");

                    locationB.setLatitude(jlat);
                    locationB.setLongitude(jlon);

                    distance = (int) locationA.distanceTo(locationB);
                    String str = " (" + String.valueOf(distance) + " meters)";
                    Log.v("Distance", str);

                    // adjust drawable params
                    Drawable marker = getResources().getDrawable(
                            android.R.drawable.star_big_on);
                    Drawable user = getResources().getDrawable(
                            android.R.drawable.arrow_down_float);
                    int userWidth = user.getIntrinsicWidth();
                    int userHeight = user.getIntrinsicHeight();
                    user.setBounds(0, userHeight, userWidth, 0);
                    int markerWidth = marker.getIntrinsicWidth();
                    int markerHeight = marker.getIntrinsicHeight();
                    marker.setBounds(0, markerHeight, markerWidth, 0);

                    // refernc to overlay class
                    LocationOverlay myItemizedOverlay = new LocationOverlay(
                            marker, MapActivity.this);
                    LocationOverlay myItemizedOverlay1 = new LocationOverlay(
                            user, MapActivity.this);
                    mapView.getOverlays().add(myItemizedOverlay);
                    mapView.getOverlays().add(myItemizedOverlay1);

                    // create geopoint for user
                    GeoPoint usr = new GeoPoint((int) (slat * 1e6),
                            (int) (slon * 1e6));
                    // add overlay(user) to user's location
                    myItemizedOverlay1.addItem(usr, "User");
                    mc.animateTo(usr); 
```

并且在上面的类中，您可以在用户点击地理点时添加任何类型的处理程序..

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-07-11T14:30:48.897

到目前为止，我还没有从事过这个项目。

所以经过所有的研究，我找到了最好的方法。

我使用 JSON :)

首先，使用 json 数据填充多选对话框（处理它）
其次，选择后，使用 json，获取与所选城市关联的所有数据。

我的问题现在消失了！:)

# php - Google Analytics 和 GAPI 返回不同的流量类型值（中等）

> ID：10814051
> 
> 赞同：0
> 
> 时间：2012-05-30T10:00:29.020
> 
> 标签：php

这就是我使用 GAPI 的方式：

```
 $ga->requestReportData('van tatán tó?', array('date','medium'),array('visits'), null, null, null,null, 1, 60000);
    foreach ($ga->getResults() as $result)
    {
        switch ($result->getMedium())
        {
            case 'referral' : $visitTypes['referral'] = $visitTypes['referral'] + $result->getVisits(); break;
            case '(none)'   : $visitTypes['direct']   = $visitTypes['direct'] + $result->getVisits(); break;
            case 'organic'  : $visitTypes['organic']  = $visitTypes['organic'] + $result->getVisits(); break;
        }
    } 
```

现在它返回了很好的数字，根据谷歌分析的百分比很好 - 但它不精确。有了这个，我得到 [191, 336, 74] 而 GA 返回 [197, 341, 79)。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-01T15:23:30.400

我在这里看到两个问题：

1.  “max_results”不能大于 1000，因此您可能没有收到所有记录。（还有一个地方写着 10 000，但我再也找不到链接了）。您的限制是 60 000，但您仍然没有超过允许的最大值。您可能需要多个请求才能提取所有记录。 [http://code.google.com/p/gapi-google-analytics-php-interface/wiki/GAPIDocumentation](http://code.google.com/p/gapi-google-analytics-php-interface/wiki/GAPIDocumentation)

2.  您正在使用 2 个维度：“日期”和“中”，这可能会产生很多结果（参见上面的第 1 点）。我没有看到正在使用的“日期”维度。

例如，为了检索自然访问，我使用了：

```
$dimensions = array('medium');
$metrics    = array('visits');
$filters    = 'medium==organic';
$ga->requestReportData('my_profile_id',$dimensions,$metrics,'',$filters,$startDate = 'some_start_date',$endDate = 'some_end_date',$start_index=1,$max_results=1);
echo $ga->getVisits(); 
```

我使用 $ga->getVisits() 因为它检索总数，我不必遍历所有结果并对它们进行排序。

用您自己的值替换“my_profile_id”、“some_start_date”和“some_end_date”。

我希望这有帮助

# asp.net-mvc-3 - 在当前页面中加载不同的 html 而无需重新加载/刷新

> ID：10814055
> 
> 赞同：1
> 
> 时间：2012-05-30T10:00:45.893
> 
> 标签：asp.net-mvc-3, single-page-application

我正在查看这个网站，我对开发人员如何在不重新加载当前页面的情况下设法在单个页面中加载不同的 html 感兴趣...

这是网站：[http](http://demos.kendoui.com/web/validator/index.html) ://demos.kendoui.c​​om/web/validator/index.html ...

例如，如果您单击框架部分中的全球化，您可以看到 url 发生了变化，主体也发生了变化，但页面的一部分仍然存在（顶部）并且当前页面没有重新加载......

我刚开始从事网络开发，我想知道这种技术......我希望你能分享给我......谢谢:)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-30T11:17:22.490

它正在使用 ajax 部分更新。您向服务器发送请求并获取页面的一部分，然后将其放置在某个元素中，例如 div 中。

普通的：

```
<html>
   <head>
   <head>
   <body>
      <div id="divToUpdate"></div>
      @Ajax.ActionLink("Call Partial", "MyAction", "MyController", AjaxOptions{ UpdateTargetId = "divToUpdate" })
   <body>
</html> 
```

部分的：

```
 <span> here is my partial view which will be placed in "divToUpdate" div after clicking "Call Partial" Link </span> 
```

# php - jQuery Ajax 返回成功，尽管 PHP 发送了错误（DOM 问题？）

> ID：10814058
> 
> 赞同：0
> 
> 时间：2012-05-30T10:00:50.347
> 
> 标签：php, jquery, ajax, request

我现在用 jQuery Ajax-Request 挣扎了一段时间。我正在构建一个分步评级表。实际上，每个步骤都将提交一个表单（当前步骤将被传输到 PHP，只有对该步骤重要的数据将被验证）。

**问题：**

Ajax 调用被提交了很多次而没有重新加载页面。尽管 ajax 调用（登录到 Firebug 控制台）返回了正确的值（例如，如果 PHP 验证失败则出错）jQuery 仍然首先选择旧的返回值（例如，旧的错误或成功）并再次检查代码。

**代码**

这是我的jQuery函数..

```
 $(ajax_cont).find(':submit').live('mouseup keyup',function(){

        submitButton  = $(this);

    });

    $(ajax_cont).live("submit", function(d) {

        var index = submitButton.attr("id").substring(9);

        d.preventDefault();

        var str = $(this).serialize() + "&step=" + index;
        var uri = ajax_default;

        $.ajax({

            type: "POST",
            cache: false,
            asynch: false,
            url: uri,
            data: str,
            success: function(data) {

                $(".step_slider_container").ajaxComplete(function(event, request, settings) {

                    if(data.success) {

                        alert("jaa");

                        var next_step = "";

                        $(ajax_cont).parent().find(".error").html("").hide();
                        $(ajax_cont).find(".error_input").removeClass("error_input");

                        next_step = data.next;

                        console.log(data.next);

                        step_check = $(ajax_cont).find(".step_check").val();

                        if(step_check.indexOf(next_step) == -1) {

                            step_check = step_check + "," + next_step;

                        }

                        $(ajax_cont).find(".step_check").val(step_check);

                        var enabled_array = step_check.split(',');

                        $.each(enabled_array, function(enabled_index, enabled_value) {

                            if(enabled_array[enabled_index].length > 0) {

                                tmp_div = enabled_array[enabled_index];

                                $("body").find(".step_" + tmp_div).removeClass("disabled");

                            }

                        });

                        // Show - Hide Container

                        var id = "#step_" + next_step;

                        fadeDiv(id);

                        if(next_step == 3) {

                            preview_rating();
                            setHeight(ajax_cont.height());

                        }

                        // Navigation

                        $("body").find(".step").removeClass("step_active");
                        $("body").find(".step_" + next_step).addClass("step_active");

                    }

                    if(data.error) {

                        next_step = "";

                        $(ajax_cont).find(".error_input").removeClass("error_input");

                        error       =   data.error;
                        error_ids   =   data.error_id;

                        $.each(error_ids, function(index, value) {

                            id = "#" + error_ids[index];

                            $(id).addClass("error_input");

                        });

                        $(ajax_cont).parent().find(".error").html("<p>" + error + "</p>").show();

                        setHeight(ajax_cont.height());

                    }

                });

            },
            dataType: "json"

        });

        return false;

    }); 
```

我希望有人能找到问题的答案.. 似乎让我发疯:(

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-30T10:07:13.870

我同意@thecodeparadox - 代码墙。太多的代码和太少的代码一样糟糕:-)

纯粹按照您所说的，听起来您有多个 AJAX 提交，并且您正在使用来自较旧请求的响应。尝试使用 Ajax Manager [http://www.protofunc.com/scripts/jquery/ajaxManager/](http://www.protofunc.com/scripts/jquery/ajaxManager/)之类的东西，它可以让您排队和取消请求。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-30T10:13:26.210

我可以看到您的代码存在一些问题：

a) 您在 ajax 调用的成功事件中设置 ajaxSuccess 事件... b) 您`data.success`用于确定它是否成功，这不会因为 PHP 错误而改变。

相反，您应该这样做：

```
$(ajax_cont).find(':submit').live('mouseup keyup',function(){

    submitButton  = $(this);

});

$(ajax_cont).live("submit", function(d) {

    var index = submitButton.attr("id").substring(9);

    d.preventDefault();

    var str = $(this).serialize() + "&step=" + index;
    var uri = ajax_default;

    $.ajax({

        type: "POST",
        cache: false,
        asynch: false,
        url: uri,
        data: str,
        success: function(data) {

            if(data.success) {

                alert("jaa");

                var next_step = "";

                $(ajax_cont).parent().find(".error").html("").hide();
                $(ajax_cont).find(".error_input").removeClass("error_input");

                next_step = data.next;

                console.log(data.next);

                step_check = $(ajax_cont).find(".step_check").val();

                if(step_check.indexOf(next_step) == -1) {

                    step_check = step_check + "," + next_step;

                }

                $(ajax_cont).find(".step_check").val(step_check);

                var enabled_array = step_check.split(',');

                $.each(enabled_array, function(enabled_index, enabled_value) {

                    if(enabled_array[enabled_index].length > 0) {

                        tmp_div = enabled_array[enabled_index];

                        $("body").find(".step_" + tmp_div).removeClass("disabled");

                    }

                });

                // Show - Hide Container

                var id = "#step_" + next_step;

                fadeDiv(id);

                if(next_step == 3) {

                    preview_rating();
                    setHeight(ajax_cont.height());

                }

                // Navigation

                $("body").find(".step").removeClass("step_active");
                $("body").find(".step_" + next_step).addClass("step_active");

            }

            if(data.error) {

                next_step = "";

                $(ajax_cont).find(".error_input").removeClass("error_input");

                error       =   data.error;
                error_ids   =   data.error_id;

                $.each(error_ids, function(index, value) {

                    id = "#" + error_ids[index];

                    $(id).addClass("error_input");

                });

                $(ajax_cont).parent().find(".error").html("<p>" + error + "</p>").show();

                setHeight(ajax_cont.height());

            }

        },
        error : function()
        {
            alert('there was an error parsing the json, or processing your request');
        },
        dataType: "json"

    });

    return false;

}); 
```

请注意，我已删除该事件并为您的 ajax 请求`ajaxSuccess`实现了一个事件。`error`

# xcode - Xcode 让模拟器从我正在处理的视图开始

> ID：10814059
> 
> 赞同：0
> 
> 时间：2012-05-30T10:00:57.990
> 
> 标签：xcode, ios-simulator

时间是宝贵的。在 Xcode 模拟器上运行您的应用程序时，有没有办法开始直接显示您当前正在处理的子视图？

谢谢卢卡

# javascript - javascript神奇地将一个空var插入一个新数组/改变它的长度？

> ID：10814060
> 
> 赞同：0
> 
> 时间：2012-05-30T10:00:58.253
> 
> 标签：javascript, arrays, insert, var

所以我有一段这样的代码：

```
this.convertParametersToGroups = function (nodes) {

        self.selectedParametersGroup([]);
        var emptyParametersList = [];

        var pos = 0;
        var group;
        var tempParametersGroup = [];         
                            // tempParametersGroup: Array[1]
                            // 0: undefined   

        $.each(nodes, function (key, val) {
            emptyParametersList.push(0);
            group = self.convertNodeToParameterGroup(val);
            group.position = pos;
            tempParametersGroup.push(group);
            pos++;
        });

        self.selectedParametersGroup(tempParametersGroup);

        return emptyParametersList;
    }; 
```

当我重新排序声明时，注释结果不会改变。当我在 $.each 循环中有“组”时，它在第一次迭代中插入了一个未定义的值，然后执行回调中的第一条语句。

但是，当我像这样更改他们的名字时：

```
this.convertParametersToGroups = function (nodes) {

        self.selectedParametersGroup([]);
        var emptyParametersList = [];

        var pos = 0;
        var g;
        var tempParametersGr = [];         
                            // tempParametersGr: Array[0]

        $.each(nodes, function (key, val) {
            emptyParametersList.push(0);
            g = self.convertNodeToParameterGroup(val);
            g.position = pos;
            tempParametersGr.push(g);
            pos++;
        });

        self.selectedParametersGroup(tempParametersGr);

        return emptyParametersList;
    }; 
```

它在评论中工作。似乎javascript以某种方式将“组”名称映射到数组的“组”后缀并插入它或强制长度增加。我是否缺少某些已知的语言功能或...？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-30T11:00:38.380

你可以尝试这样调试，应该很清楚 undefined 是什么时候真正添加到数组中的：

```
function makeClone( arr ) {
    return JSON.parse( JSON.stringify( arr ) );
}

this.convertParametersToGroups = function (nodes) {

        self.selectedParametersGroup([]);
        var emptyParametersList = [];

        var pos = 0;
        var group;
        var tempParametersGroup = [];

        console.log( "before loop", makeClone( tempParametersGroup ) );

        $.each(nodes, function (key, val) {
            console.log( "before iteration", key, makeClone( tempParametersGroup ) );
            emptyParametersList.push(0);
            group = self.convertNodeToParameterGroup(val);
            group.position = pos;
            tempParametersGroup.push(group);
            pos++;
            console.log( "after iteration", key, makeClone( tempParametersGroup ) );
        });

        console.log( "after loop", makeClone( tempParametersGroup ) );

        self.selectedParametersGroup(tempParametersGroup);

        return emptyParametersList;
    }; 
```

# android - 在 ICS 上打开套接字的问题

> ID：10814062
> 
> 赞同：1
> 
> 时间：2012-05-30T10:01:02.657
> 
> 标签：android

所以我在制作新插座时遇到了问题。我有这个程序可以在姜饼上完美运行，但是自从我的 HTC sense xe 更新到 ICS 后，每次我尝试打开套接字时程序都会崩溃。我有一个程序将陀螺仪数据发送到本地网络上的服务器。自从出现这个问题以来，我已经将我的代码减少到仍然会导致问题的最小组件，所以就在这里。

```
package com.mytesting;

import java.net.Socket;
import android.app.Activity;
import android.os.Bundle;
import java.io.*;
import java.net.*;

public class SocketTestingActivity extends Activity {
    /** Called when the activity is first created. */
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);      
        try {
            Socket clientSocket = new Socket("192.168.1.7", 23000);
        } catch (UnknownHostException e1) {
            // TODO Auto-generated catch block
            e1.printStackTrace();
        } catch (IOException e1) {
            // TODO Auto-generated catch block
            e1.printStackTrace();
        }

    }
} 
```

我已经包括：

```
<uses-permission android:name="android.permission.INTERNET" /> 
```

在清单文件中。

在 ICS 之前，所有这些东西都运行良好。现在，当我运行程序时，我只收到消息“不幸的是，SocketTesting 已停止”。

有谁知道我做错了什么，我对android编程和一般的java编程都很陌生。

感谢您的帮助，伙计们。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-30T10:07:21.227

在 ICS 中，您不能在 UI 线程上执行网络操作。将其移动到单独的线程或使用[AsyncTask](http://developer.android.com/reference/android/os/AsyncTask.html)。

# c# - 计算用户点击后退按钮的次数（Windows Phone）

> ID：10814064
> 
> 赞同：0
> 
> 时间：2012-05-30T10:01:09.020
> 
> 标签：c#, windows-phone-7

在我的 Windows Phone 应用程序中，我需要计算用户从当前页面单击返回按钮的次数。可能吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-30T10:08:30.437

你有没有这样尝试过。

```
int counter =0;

protected override void OnBackKeyPress
                  (System.ComponentModel.CancelEventArgs e)
{
    base.OnBackKeyPress(e);

    counter++;

    textbox1.text = counter.tostring();

    navigation process;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-30T10:04:40.997

BackButtonPress 有一个事件

```
protected override void OnBackKeyPress(System.ComponentModel.CancelEventArgs e) 
```

# silverlight - Silverlight 控件的行为因主机服务器而异

> ID：10814065
> 
> 赞同：0
> 
> 时间：2012-05-30T10:01:09.967
> 
> 标签：silverlight, iis

我在本地机器和网络服务器上都运行了一个 silverlight 应用程序。我的本地机器安装了 IIS 7.5 的 windows 7 pro，站点从 Visual Studio 开始，以本地 IIS 服务器为目标。网络服务器安装了 windows server 2k8 R2，也安装了 IIS 7.5

当我在本地机器上的 IE 中打开这些 silverlight 应用程序时，几个控件的行为略有不同。例如，我们的一个文本框有一个默认值和一个最小值和最大值的检查。

如果用户在从 win 7 机器加载的 silverlight 应用程序的此文本框中键入 200，则不会发生任何事情。（使用 http://[ipadress]/[sitename] 而不是 localhost）如果您在从 win 2k8 加载的 silverlight 应用程序中执行相同操作，则该值会自动调整（正如预期的那样）

这种行为差异的原因可能是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-30T10:24:47.313

Silverlight 应用程序本身是打包在 XAP 容器中的二进制文件。这本身与服务器无关。然而，相当普遍的是，您的本地 Web 浏览器缓存中可能有一个较旧的 XAP，并且您实际上可以运行较旧版本的应用程序。尝试清除浏览器缓存。

# c# - MonoTouch 运行时测试，看看它是否在模拟器中运行

> ID：10814068
> 
> 赞同：5
> 
> 时间：2012-05-30T10:01:29.397
> 
> 标签：c#, xamarin.ios, simulator

可能真的很简单，但我找不到答案 - 我如何在运行时进行检查（使用 MonoTouch）以确保我在 iPhone 模拟器中（或不在）？

谢谢

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-05-30T10:14:40.160

你可以这样做：

```
using MonoTouch.ObjCRuntime;
static bool InSimulator ()
{
    return Runtime.Arch == Arch.SIMULATOR;
} 
```

这是从这里：[http ://docs.xamarin.com/ios/recipes/General/Projects/Environment_Checks](http://docs.xamarin.com/ios/recipes/General/Projects/Environment_Checks)

# ruby - Ruby 中 PBEWithMD5AndDES 的实现

> ID：10814071
> 
> 赞同：4
> 
> 时间：2012-05-30T10:01:44.680
> 
> 标签：ruby, encryption, cryptography

我正在尝试获得一个在 Java 世界中显然很流行的加密库的 ruby​​ 实现——PBEWithMD5AndDES

有谁知道如何使用 openssl 或其他开源 gem 来执行与这种格式兼容的加密/解密？

**更新：**

我使用 gem [chilkat](https://rubygems.org/gems/chilkat) 来实现它，但它是付费的，我需要一个开源解决方案。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-08-16T06:26:49.600

我知道它已经很老了，但是我遇到了同样的问题并且刚刚解决了它，所以在这里进行加密，其中 salt 是你的 salt sting，passkey 是你的密码密钥字符串，迭代是你想要使用的迭代次数

```
def encrypt_account_number
cipher = OpenSSL::Cipher::Cipher.new("DES")
cipher.encrypt
cipher.pkcs5_keyivgen passkey, salt,iterations,digest
encrypted_account_number =  cipher.update(account_number)
encrypted_account_number << cipher.final
Base64.encode64(encrypted_account_number )
end

def decrypt_account_number
cipher = OpenSSL::Cipher::Cipher.new("DES")
base_64_code = Base64.decode64(account_number)
cipher.decrypt
cipher.pkcs5_keyivgen passkey, salt,iterations,digest

decrypted_account_number = cipher.update base_64_code
decrypted_account_number << cipher.final
decrypted_account_number
end 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-30T22:51:20.297

假设 ruby​​ 具有 DES 实现，您不需要实际实现 PBEWithMD5andDES。您需要实现的是密钥派生功能（您从密码中获取密钥的人），然后使用适当的模式和填充将该派生密钥提供给 DES。

值得庆幸的是，密钥派生功能在实施中并不是特别安全关键，因此您可以自己安全地完成。根据[rfc](https://www.rfc-editor.org/rfc/rfc2898)，PBEwithMD5AndDES 实际上是在 CBC 模式下与 DES 一起使用的 PBKDF1（一种 ker 派生函数）。

PBKDF1 看起来并不难实现。看起来你可以用一个 for 循环和一个 md5 调用来做到这一点。

请注意，由于 Java 和 Ruby 中可能使用不同的填充方案，您可能仍然会得到一些奇怪的结果。我假设规范是 pkcs 1.5 填充，但快速浏览一下，我无法确认这一点

> [5.1 PBKDF1](https://www.rfc-editor.org/rfc/rfc2898#section-5.1)
> 
> PBKDF1 应用一个散列函数，它应该是 MD2 [6]、MD5 [19] 或 SHA-1 [18]，以派生密钥。派生密钥
> 的长度受哈希函数输出长度的限制，MD2 和 MD5 为 16 个八位字节，SHA-1 为 20 个八位字节。
> PBKDF1 与PKCS #5 v1.5 中的密钥派生过程兼容。
> 
> 仅推荐 PBKDF1 与现有应用程序兼容，因为它生成的密钥对于 某些应用程序
> 可能不够大。
> 
> PBKDF1 (P, S, c, dkLen)
> 
> 选项：散列底层散列函数
> 
> 输入：P 密码，八位字节字符串 S salt，八位字节字符串 c 迭代计数，正整数 dkLen 派生密钥的八位字节预期长度，正整数，对于 MD2 或 MD5 最多为 16，对于 SHA-1 最多为 20
> 
> 输出：DK 派生密钥，一个 dkLen-octet 字符串
> 
> 脚步：
> 
> ```
>  1\. If dkLen > 16 for MD2 and MD5, or dkLen > 20 for SHA-1, output
>      "derived key too long" and stop.
> 
>   2\. Apply the underlying hash function Hash for c iterations to the
>      concatenation of the password P and the salt S, then extract
>      the first dkLen octets to produce a derived key DK:
> 
>                T_1 = Hash (P || S) ,
>                T_2 = Hash (T_1) ,
>                ...
>                T_c = Hash (T_{c-1}) ,
>                DK = Tc<0..dkLen-1>
> 
>   3\. Output the derived key DK. 
> ```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-03-07T11:50:08.843

为了它的价值，我发布了我的 python 代码，它确实有效（我有大量使用 org.jasypt.util.text.BasicTextEncryptor 完成的加密值，我需要解密它们。）

```
import base64
import hashlib
from Crypto.Cipher import DES

"""
Note about PBEWithMD5AndDES in java crypto library:

Encrypt:
  Generate a salt (random): 8 bytes
  <start derived key generation>
  Append salt to the password
  MD5 Hash it, and hash the result, hash the result ... 1000 times
  MD5 always gives us a 16 byte hash
  Final result: first 8 bytes is the "key" and the next is the "initialization vector"
  (there is something about the first 8 bytes needing to be of odd paraity, therefore
  the least significant bit needs to be changed to 1 if required. We don't do it, 
  maybe the python crypto library does it for us)
  <end derived key generation>

  Pad the input string with 1-8 bytes (note: not 0-7, so we always have padding)
    so that the result is a multiple of 8 bytes. Padding byte value is same as number of 
    bytes being padded, eg, \x07 if 7 bytes need to be padded.
  Use the key and iv to encrypt the input string, using DES with CBC mode.
  Prepend the encrypted value with the salt (needed for decrypting since it is random)
  Base64 encode it -> this is your result

Decrypt:
  Base64 decode the input message
  Extract the salt (first 8 bytes). The rest is the encoded text.
  Use derived key generation as in Encrypt above to get the key and iv
  Decrypt the encoded text using key and iv
  Remove padding -> this is your result

(I only have implemented decrypt here since that's all I needed, 
but encrypt should be straighforward as well)

"""

def get_derived_key(password, salt, count):
    key = password + salt
    for i in range(count):
        m = hashlib.md5(key)
        key = m.digest()
    return (key[:8], key[8:])

def decrypt(msg, password):
    msg_bytes = base64.b64decode(msg)
    salt = msg_bytes[:8]
    enc_text = msg_bytes[8:]
    (dk, iv) = get_derived_key(password, salt, 1000)
    crypter = DES.new(dk, DES.MODE_CBC, iv)
    text = crypter.decrypt(enc_text)
    # remove the padding at the end, if any
    return re.sub(r'[\x01-\x08]','',text) 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-07-30T09:58:59.157

我已经从 user3392439 更新了 python 脚本，支持加密。希望对您有所帮助。

```
import base64
import hashlib
import re
import os
from Crypto.Cipher import DES

"""
Note about PBEWithMD5AndDES in java crypto library:

Encrypt:
  Generate a salt (random): 8 bytes
  <start derived key generation>
  Append salt to the password
  MD5 Hash it, and hash the result, hash the result ... 1000 times
  MD5 always gives us a 16 byte hash
  Final result: first 8 bytes is the "key" and the next is the "initialization vector"
  (there is something about the first 8 bytes needing to be of odd paraity, therefore
  the least significant bit needs to be changed to 1 if required. We don't do it,
  maybe the python crypto library does it for us)
  <end derived key generation>

  Pad the input string with 1-8 bytes (note: not 0-7, so we always have padding)
    so that the result is a multiple of 8 bytes. Padding byte value is same as number of
    bytes being padded, eg, \x07 if 7 bytes need to be padded.
  Use the key and iv to encrypt the input string, using DES with CBC mode.
  Prepend the encrypted value with the salt (needed for decrypting since it is random)
  Base64 encode it -> this is your result

Decrypt:
  Base64 decode the input message
  Extract the salt (first 8 bytes). The rest is the encoded text.
  Use derived key generation as in Encrypt above to get the key and iv
  Decrypt the encoded text using key and iv
  Remove padding -> this is your result

(I only have implemented decrypt here since that's all I needed,
but encrypt should be straighforward as well)

"""

def get_derived_key(password, salt, count):
    key = password + salt
    for i in range(count):
        m = hashlib.md5(key)
        key = m.digest()
    return (key[:8], key[8:])

def decrypt(msg, password):
    msg_bytes = base64.b64decode(msg)
    salt = msg_bytes[:8]
    enc_text = msg_bytes[8:]
    (dk, iv) = get_derived_key(password, salt, 1000)
    crypter = DES.new(dk, DES.MODE_CBC, iv)
    text = crypter.decrypt(enc_text)
    # remove the padding at the end, if any
    return re.sub(r'[\x01-\x08]','',text)

def encrypt(msg, password):
    salt = os.urandom(8)
    pad_num = 8 - (len(msg) % 8)
    for i in range(pad_num):
        msg += chr(pad_num)
    (dk, iv) = get_derived_key(password, salt, 1000)
    crypter = DES.new(dk, DES.MODE_CBC, iv)
    enc_text = crypter.encrypt(msg)
    return base64.b64encode(salt + enc_text)

def main():
    msg = "hello, world"
    passwd = "mypassword"
    s = encrypt(msg, passwd)
    print s
    print decrypt(s, passwd)

if __name__ == "__main__":
    main() 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2016-04-22T09:06:23.550

对于@cooljohny

我真的不记得这段代码是如何工作的，但我 99% 肯定它确实如此。我通过仔细挖掘 pbewithmd5anddes 的 Java 实现中的规范来编写它，并针对它测试这个 python。我将这段代码准确地交付给了客户，并且对他们来说效果很好。我在粘贴之前更改了常量，但仅此而已。您应该能够确认它产生与 Java lib 相同的加密输出，然后在 ruby​​ 中复制它。祝你好运！

```
import base64
from Crypto.Cipher import DES
from passlib.utils.pbkdf2 import pbkdf1

password = 'xxxxxxx'
iterations = 22
salt_bytes = [19,15,78,45,34,90,12,11]

# convert saltBytes to a string
salt_string = ''.join([chr(a) for a in salt_bytes])

# a sample request
raw_data = '''{"something":"to","encrypt":"here"}'''

# from the standard...
padding_value = (8 - (raw_data.__len__() % 8))
padding_data = chr(padding_value) * padding_value
padded_data = raw_data + padding_data

# 22 iterations, 16 is the # of bytes in an md5 digest
pbkres = pbkdf1(password, salt_string, iterations, 16, 'md5')

# split the digest into two 8-byte halves
# this gives the DES secret key and initializing vector
des_key, iv = pbkres[0:8], pbkres[8:16]

# encrypt with DES
cipher = DES.new(des_key, DES.MODE_CBC, iv)
cmsg = cipher.encrypt(padded_data)

# and base64 encode
base64.b64encode(cmsg) 
```

# iphone - 集成 Sharekit 后 iPhone 应用程序未在设备上运行

> ID：10814072
> 
> 赞同：0
> 
> 时间：2012-05-30T10:01:45.507
> 
> 标签：iphone, ios, xcode4.3, sharekit

我在我的 iPhone 应用程序中集成了 ShareKit 2.0。之后我无法在设备上运行它。但是当我在模拟器上运行它时没有错误。在设备上运行时控制台中显示以下错误消息。

```
dyld: Symbol not found: _NSURLIsExcludedFromBackupKey
  Referenced from: /var/mobile/Applications/231C92DC-765F-47AA-BF5A-7A4AEF708C94/MyAppName.app/MyAppName
  Expected in: /System/Library/Frameworks/CoreFoundation.framework/CoreFoundation
 in /var/mobile/Applications/231C92DC-765F-47AA-BF5A-7A4AEF708C94/MyAppName.app/MyAppName 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-30T12:17:12.160

我想这发生在旧的 iOS < 5.1

ShareKit github问题跟踪器上的修复[正在进行讨论](https://github.com/ShareKit/ShareKit/pull/394)，并带有提示。很快就会修复。

编辑：修复已合并到主控。请更新。

# eclipse - Eclipse IDL 编译

> ID：10814074
> 
> 赞同：0
> 
> 时间：2012-05-30T10:01:56.010
> 
> 标签：eclipse, eclipse-plugin

我在 Eclipse 中添加了 orb 插件并创建了一个 IDL 文件。我将 IDL 编译器配置到具有 IDL 文件的项目中。当我右键单击 IDL 文件时，有一个选项如下， **CORBA->Compile CORBA Stubs**但是当我选择该选项没有发生任何事情，所以如何在 Eclipse 中编译 IDL 文件并生成 Java 文件。请提供是否有任何步骤/程序可以遵循来编译 IDL 文件并生成 Java 源文件

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-22T08:19:42.657

打开命令行并转到您拥有 IDL 文件的目录并运行此行

```
idlj -fall nameOfIdlFile.idl 
```

例如，如果您的 idl 文件被命名`HelloWorld.idl`

```
idlj -fall HelloWorld.idl 
```

运行上述命令行后，在您的根文件夹中，它将生成 java 类，即：

*   HelloWorld.java
*   HelloWorldPOA.java
*   HelloWorldStub.java
*   HelloWorldHelper.java
*   HelloWorldOperations.java
*   HelloWorldHolder.java。

希望这会对您或将来遇到相同问题的任何人有所帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-10-31T14:00:45.543

I am also having trouble with CORBA IDL compilation under Eclipse. The CORBA IDL compiler generates an error in the Eclipse error log = “Unhandled event loop exception” due to a “java.lang.NoClassDefFoundError: org/openorb/compiler/IdlCompiler” exception.

The above answer may work for "HelloWorld", but CORBA IDL files are a super-set of standard IDL syntax and have their own unique keywords like "typeprefix" and "local".

Therefore they must be compiled using the IDL compiler org.openorb.compiler.IdlCompiler.

One way to do this is using the ANT compiler. A sample ANT XML script would read:

```
 <target name="idl" depends="compiler" 
description="Generate java classes from idl." 
unless="nobuild.idl" >
<java classname="org.openorb.compiler.IdlCompiler" fork="yes">
  <arg line="-silence -all -I ${idl} -d ${gensrc}/main ${idl}/orb.idl ${idl}/interop.idl ${idl}/misc.idl ${idl}/openorb.idl"/>
  <classpath refid="project.class.path" />
  <sysproperty key="openorb.home" file="src" />
</java> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-12-04T11:44:27.673

我知道线程现在有一些时间。但也许我无论如何都可以帮助别人。

对我来说，这个问题与配置有关。我所要做的就是选择项目，进入 Project->Properties，然后选择 IDL 编译。

在“编译选项”选项卡上选择我需要的选项，然后在“编译器”选项卡上，明确选择“OpenORB”。

然后它起作用了！:)

# iphone - 删除行时崩溃

> ID：10814076
> 
> 赞同：0
> 
> 时间：2012-05-30T10:02:07.240
> 
> 标签：iphone, objective-c, ios, xcode, uitableview

在我的表格视图类中使用以下方法，我正在尝试删除表格视图的一行

```
- (NSInteger)numberOfSectionsInTableView:(UITableView *)tableView
{
    return 1;
}

- (NSInteger)tableView:(UITableView *)tableView numberOfRowsInSection:(NSInteger)section
{
    return [arrUserData count];
}

- (void)setEditing:(BOOL)editing animated:(BOOL)animated
{
    [super setEditing:editing animated:animated];
    [self.tableView setEditing:editing animated:YES];   
}

- (void)tableView:(UITableView *)tv commitEditingStyle (UITableViewCellEditingStyle)editingStyle forRowAtIndexPath:(NSIndexPath *)indexPath 
{
    if(editingStyle == UITableViewCellEditingStyleDelete) 
    {
        [self.tableView deleteRowsAtIndexPaths:[NSArray arrayWithObject:indexPath] withRowAnimation:UITableViewRowAnimationFade];
        [arrUserData removeObjectAtIndex:indexPath.row];
    }
} 
```

我在表中有大约 40 行，当我单击任何行上的红色删除按钮时，它在这一行崩溃

```
[self.tableView deleteRowsAtIndexPaths:[NSArray arrayWithObject:indexPath] withRowAnimation:UITableViewRowAnimationFade]; 
```

带有以下崩溃日志

```
2012-05-30 14:58:45.835 testDeleteRow[3276:207] *** Terminating app due to uncaught exception 'NSInternalInconsistencyException', reason: 'Invalid update: invalid number of rows in section 0\.  The number of rows contained in an existing section after the update (41) must be equal to the number of rows contained in that section before the update (41), plus or minus the number of rows inserted or deleted from that section (0 inserted, 1 deleted).' 
```

谁能告诉我如何解决这个问题，谢谢提前

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-30T10:07:26.963

实际上，您需要在删除时更新数据源`cells`。如果您使用的是`array`用于填充，`table`那么在此行之后 -

```
[self.tableView deleteRowsAtIndexPaths:[NSArray arrayWithObject:indexPath] withRowAnimation:UITableViewRowAnimationFade]; 
```

您需要同时从中删除`index`对象`array`。中的行数也`section`应该减少 1。如果你在那里返回`array`计数，那么它将被自动处理。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-30T10:17:17.227

当您从 tableview 中删除行时，您的数据源不会更新。假设您的表在删除前包含 10 行，那么删除后它将仅包含 9 行，而您的数据源仍然包含 10 个值。所以您必须删除已删除的明确地来自数据源的值。

# c# - 使用 System.Windows.Application.SetCookie 创建持久 cookie 失败？

> ID：10814080
> 
> 赞同：1
> 
> 时间：2012-05-30T10:02:23.403
> 
> 标签：c#, .net, wpf, cookies

我正在尝试创建一个持久性 cookie。这是代码：

```
string expires = string.Format("{0} GMT", DateTime.Now.AddHours(1).ToString("ddd, dd-MMM-yyyy HH:mm:ss"));
string newCookie = string.Format("Cookie1=ValueToStore; expires={0}", expires);

Uri location = new Uri("http://www.mysite.com/Application");

System.Windows.Application.SetCookie(location, newCookie);
string theSetCookie = System.Windows.Application.GetCookie(location); 
```

字符串`theSetCookie`应该包含 cookie 中的所有数据，不是吗？但是它只包含`Cookie1=ValueToStore;`. 我错过了什么？为什么没有到期日期并使其成为持久性cookie？

*注意：我在 Windows 7 中使用 Internet Explorer 9*

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-30T10:35:40.527

过期时间戳不是 Cookie 值的一部分。当你设置 cookie 时，你设置了一些给定的参数（Expires），但是当你读取它时，你只读取了值。

cookie 过期不应驱动您的应用程序中的任何逻辑：

*   如果由于某个时间已经过去而不再有效，那么这应该反映在到期中
*   如果应该使 cookie 具有更长的过期时间，则可以在不知道现有过期时间的情况下进行设置
*   如果您想删除过期时间（制作会话 cookie），您可以在不设置过期时间的情况下再次设置它

这些场景都不需要知道过期时间戳。

# asp.net - javascript 函数检查身份验证时 ASP.NET 中的用户身份验证

> ID：10814081
> 
> 赞同：0
> 
> 时间：2012-05-30T10:02:24.833
> 
> 标签：asp.net

*请为此问题建议或更改一些合适的标题，因为我找不到*

我正在使用 Facebook 来允许用户对我的网站进行身份验证。

我使用 Facebook 登录按钮，不知何故我发现用户是否经过身份验证。

我正在用 ASP.NET 4.0 开发我的网站

我检查用户是否通过 Javascript 进行身份验证。

问题是我应该如何告诉我的服务器该用户已通过身份验证并分配一些 ASP.NET 角色。由于安全原因，我不能使用 Ajax，并且可能是模拟攻击。该站点将来可能会进行交易，因此需要降低安全性。

现在我所做的是使用 javascript 创建一个会话并重定向到其他页面，然后分配角色，但我对这种方法不满意

任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-30T10:19:23.313

最简单的方法是使用 Page 方法和 Page 方法在服务器上调用您的服务或直接进行身份验证。

[http://www.geekzilla.co.uk/View7B75C93E-C8C9-4576-972B-2C3138DFC671.htm](http://www.geekzilla.co.uk/View7B75C93E-C8C9-4576-972B-2C3138DFC671.htm)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-30T10:51:04.020

为了解决这个问题，在 facebook 成功验证用户身份后，我使用一些参数回发网站。

```
 FB.api('/me', function (response) {

                    res_id = (response.id);

                    __doPostBack('SetSessionVariable', res_id + "$" + response.first_name + "$"+ response.last_name);

                    var uid = response.authResponse.userID;
                    var accessToken = response.authResponse.accessToken;

                }); 
```

在代码中我这样做：

```
 string eventTarget = (this.Request["__EVENTTARGET"] == null) ? string.Empty : this.Request["__EVENTTARGET"];
                string eventArgument = (this.Request["__EVENTARGUMENT"] == null) ? string.Empty : this.Request["__EVENTARGUMENT"];

                if (eventTarget == "SetSessionVariable")
                {
                    // Authenticate User
                 } 
```

# qt - QDialog & shadow 可能吗？

> ID：10814082
> 
> 赞同：1
> 
> 时间：2012-05-30T10:02:28.240
> 
> 标签：qt, shadow, qwidget, qdialog

是否可以在自定义 QDialog 中绘制背景阴影？

我想在自定义 QDialog 后面添加一个浅色阴影。

谢谢

# mysql - MySQL 正则表达式搜索

> ID：10814083
> 
> 赞同：1
> 
> 时间：2012-05-30T10:02:29.290
> 
> 标签：mysql, search

我制作了一个运行良好的搜索引擎，但我希望它忽略数据库条目中的符号。

例如，我搜索 A*BC

在数据库中，我有一列包含 ABC。

我希望它带回这张唱片，即使它里面有符号。

我该怎么做？

* * *

嗨，我试过了，但它不起作用。

这是我的代码：

```
$query = '%' . rawurlencode($queryRaw) . '%' ;

        $queryClean = ereg_replace("[^A-Za-z0-9]", "%", $query) ;

        $result = $dbh->prepare("SELECT supplier_details.id as supid, name, languages.languages, countries.country
                                 FROM supplier_details, languages, countries
                                 WHERE languageRef = languages.id
                                 AND countryRef = countries.id
                                 AND (name LIKE ? OR name LIKE ?)
                                 LIMIT 50") ;
            $result->bindParam(1, $query, PDO::PARAM_INT) ;
            $result->bindParam(2, $queryClean, PDO::PARAM_INT) ;
        $result->execute() ; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-30T10:03:49.013

```
select * 
from tbl
where clmn like '%A%B%C%' 
```

# image-processing - 如何检测图像中存在哪个对象。？

> ID：10814089
> 
> 赞同：4
> 
> 时间：2012-05-30T10:02:50.663
> 
> 标签：image-processing, opencv, computer-vision

我已经给出了创建一个应用程序的任务，其中给出了图像，我必须检测该图像中存在哪个对象（在有限对象列表中）。在一个图像中只存在一个对象或在一个图像中没有对象图片。应用程序应该能够识别对象（如果存在）（任何列出的对象）如果应用程序（程序）可以计算特定对象出现在图像中的概率（来自对象列表）就足够了。

谁能建议如何解决这个问题？开放简历？

实际上，任务是从图像中识别徽标（一些公司，如可口可乐、百事可乐、戴尔等）（如果存在任何来自徽标列表（有限的说 100））

我该怎么做这个项目？请帮忙。！！！！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-30T13:10:57.863

有很多方法可以做到这一点，但我最喜欢的一种是为每个对象构建一个特征集，然后在图像中匹配它。

您可以使用[SIFT](http://opencv.willowgarage.com/documentation/cpp/feature_detection.html#sift)为每个对象构建关键点向量。通过将 SIFT 应用于每张图片，您将获得每张图片的一组描述符（例如图片、对象、...）。

当你得到你要处理的图像时，使用[FAST](http://opencv.willowgarage.com/documentation/cpp/features2d_feature_detection_and_description.html)来检测点，对每组不同的描述符做[cvMatchTemplate ()。](http://opencv.willowgarage.com/documentation/c/object_detection.html)概率最高的将告诉您检测到了哪个对象。如果所有概率都太低，那么您可能在图像上没有任何对象。

这只是我喜欢的一种方法，但它非常先进、精确、快速。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-30T10:16:34.160

我建议您在尝试做某事之前搜索并阅读该主题[。](http://www.google.com)您要执行[对象识别](http://en.wikipedia.org/wiki/Outline_of_object_recognition)或徽标识别。已经有[关于这个](https://stackoverflow.com/questions/2074956/logo-recognition-in-images)的问题了。

[这是 Opencv 的起点](http://opencv.willowgarage.com/documentation/cpp/object_recognition.html)

整个过程花了我半分钟的时间搜索。也许这就是您应该开始搜索的内容

# php - 删除 iframe

> ID：10814090
> 
> 赞同：-3
> 
> 时间：2012-05-30T10:02:53.550
> 
> 标签：php, redirect, iframe

不知道如何解决这个问题，但我发现这段代码可以正常工作。但是我不希望 iframe 中的重定向！基本上我想要的是将登录用户重定向到他自己的目录，只有他可以访问它，这有意义吗？

```
if($session->logged_in){

<echo"
iframe id=\"login-form\" frameborder=\"0\" scrolling=\"no\" width=\"100%\"     src=\"$serverroot.$session->directory/abc.php\" height=\"400\" align=\"left\"></iframe><br   /> 
"; 
```

应该足够简单（虽然不适合我...... :)

有谁愿意插手吗？！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-30T10:04:25.490

因此，只需进行标头重定向：

```
header("Location: {$serverroot}{$session->directory}/abc.php");
exit; // just in case you have more code beneath you don't want to execute. 
```

# java - 预填充 Hibernate L1 缓存

> ID：10814092
> 
> 赞同：0
> 
> 时间：2012-05-30T10:03:01.677
> 
> 标签：java, hibernate, caching, servlets

我只使用带有 L1（会话）缓存的 Hibernate。我想知道是否可以预先填充它。

假设我有一个`Item`表，其中每个项目都有自己的雄猫）。`id``from Item where id = :id`

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-05-30T10:15:28.347

是的，这是可能的。您将执行一次您的选择（不使用 where 条件并且不使用结果列表），然后数据将在会话的一级缓存中，直到您清除会话或将其丢弃。

但是在这种情况下，如果会话本身从其缓存中丢弃预加载的数据，您将无法控制（这不是功能问题，只是性能问题，而且我感觉我使用的休眠版本从来没有所以）。如果您想要完全控制，您可以将预加载的数据存储在静态变量（List 或 Map 实例）中，并编写一个从该静态变量而不是从数据库中读取的服务。顺便说一句，在您的环境中，对这个静态变量的访问必须是同步的。

# linux - 为什么 linux 重定向会截断文件？

> ID：10814096
> 
> 赞同：2
> 
> 时间：2012-05-30T10:03:06.873
> 
> 标签：linux, shell, command-line

我有一个名为“test.txt”的文件，如下所示：

```
hello world 
```

它只是一个“hello world”字符串。如果我使用 perl 正则表达式：

```
perl -pe "s/hello/bye/g" test.txt 
```

它说：

```
bye world 
```

但如果我尝试将该文件重定向到自身：

```
perl -pe "s/hello/bye/g" test.txt > test.txt 
```

结果文件为空。为什么？以及如何在文件上“过滤”正则表达式？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-30T10:06:15.117

`perl`接受`-i`就地参数。这样，您可以使用 perl 程序处理文件并立即将其写回。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-30T10:04:48.600

由于重定向，它会在应用程序有机会读取文件之前打开文件进行写入。而是重定向到一个临时文件，然后重命名它。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-30T10:04:46.787

重定向发生在您的 shell 解析命令行时。这发生在实际命令执行之前，因此您重定向到的文件在您有机会阅读之前被覆盖。

# django - 如何清除/维护 django-sentry 数据库？

> ID：10814097
> 
> 赞同：31
> 
> 时间：2012-05-30T10:03:20.183
> 
> 标签：django, sentry, data-cleaning

我正在使用 django-sentry 来跟踪网站中的错误。我的问题是数据库变得太大了。'message' 表和 'groupedmessage' 是相关的

有没有办法清除旧条目和特定消息或将哨兵表添加到 django 的管理员？

* * *

## 回答 #1

> 赞同：51
> 
> 时间：2014-04-14T16:40:32.173

使用清理命令。有两个参数可用：

*   天数（默认值：30）- 指示对象必须有多久才能被清理
*   project - 指示要删除的项目，因为您可以在单个哨兵服务器中配置许多项目（默认值：全部）

像这样使用它（`--config`现在已删除）：

```
# sentry --config=sentry.conf.py cleanup --days 360
sentry cleanup --days 360 
```

**或**带有可选项目参数，它必须是整数：

```
# sentry --config=sentry.conf.py cleanup --days 360 --project 1
sentry cleanup --days 360 --project 1 
```

在发现清理命令之前，我还可以使用 django ORM 手动执行此操作：

```
#$source bin/activate
#$sentry --config=sentry.conf.py shell
from sentry.models import Event, Alert
Event.objects.all().count()
Alert.objects.all().count() 
```

查看哨兵模型以查询其他对象。从这里您可以在对象上使用 .save()、.remove() 等 django ORM 命令。[在此处](https://github.com/getsentry/sentry/tree/master/src/sentry/models)查看可用的哨兵模型。如果您需要粒度，即修改对象，这种方法会更灵活一些。cleanup 命令缺少的一件事是告诉您它删除了多少对象，而是将已删除的对象转储到屏幕上。

我的清理脚本如下所示，我使用 cron @monthly 运行它：

```
#!/bin/bash
date
cd /var/web/sentry
source bin/activate
# exec sentry --config=sentry.conf.py cleanup --days 360 #--project 1
# UPDATE: You can now drop the --config param
exec sentry cleanup --days 360 
```

* * *

## 回答 #2

> 赞同：15
> 
> 时间：2018-04-26T22:14:23.447

这是您使用 dockerized Sentry 实例执行清理的方式，该实例具有官方指南中的`docker-compose.yml`默认[值](https://docs.sentry.io/server/installation/docker/)：

```
$ # Go to a directory containing the docker-compose.yml:
$ cd sentry-config  
$ docker-compose run --rm worker cleanup --days 90 
```

考虑阅读帮助：

```
$ docker-compose run --rm worker help
$ docker-compose run --rm worker cleanup --help 
```

使用 cron 定期执行清理。运行`crontab -e`并添加以下行：

```
0 3 * * *  cd sentry-config && docker-compose run --rm worker cleanup --days 30 
```

* * *

**不要忘记**`VACUUM FULL {{relation_name}};`通过在 Postgres 容器中运行来回收磁盘空间：

```
$ docker exec -it {{postgres_container_id} /bin/bash
$ psql -U postgres
postgres=# VACUUM FULL public.nodestore_node;    
postgres=# VACUUM FULL {{ any large relation }};
postgres=# VACUUM FULL public.sentry_eventtag; 
```

您可以在`VACUUM FULL;`不指定关系的情况下运行，但这会锁定整个数据库。所以我建议一对一地清理关系。[这就是你如何找到你最大的关系的大小。](https://wiki.postgresql.org/wiki/Disk_Usage)

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2012-08-20T05:33:15.203

有一个[清理](http://sentry.readthedocs.org/en/latest/cli/index.html#cleanup)命令。不幸的是，它的行为似乎没有记录，但[代码注释](https://github.com/getsentry/sentry/blob/master/src/sentry/management/commands/cleanup.py)非常有用。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2014-05-21T22:14:36.823

要继续 radtek 的有用答案，如果您只想删除特定错误，我发现最简单的方法是在`Group`对象上调用 delete：

```
from sentry.models import Group
Group.objects.filter(culprit__contains='[SEARCH TERM]').delete() 
```

`[SEARCH TERM]`您要删除的错误消息中出现的一些文本在哪里。

# php - PHP 正则表达式不能让它工作？

> ID：10814102
> 
> 赞同：3
> 
> 时间：2012-05-30T10:03:38.357
> 
> 标签：php, regex

我正在尝试制作一个正则表达式来匹配某个标准，但我无法让它按照我想要的方式工作。

我目前的正则表达式是

```
'/S(?:[0-9]){2}E(?:[0-9]){2}/i' 
```

我想做的是符合以下条件

一个`S`

至少一位数`0-9`

一个可选的数字，可以是`0-9`

一个`E`

至少一位数`0-9`

一个可选的数字，可以是`0-9`

如果可能的话，我还希望它能够匹配双数而不是单数，我按照互联网上的教程编写了正则表达式，但认为我遗漏了一些东西。

谢谢...

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-30T10:09:32.040

尝试这个：

```
<?php

$reg = "#S\d{1,2}E\d{1,2}#";

$tests = array('S11E22', 'S1E2', 'S11E2', 'S1E22', 'S111E222', 'S111E', 'SE', 'S0E0');

foreach ($tests as $test) {
    echo "Testing $test... ";
    if (preg_match($reg, $test)) {
        echo "Match!";
    } else {
        echo "No Match";
    } 
    echo "\n";
} 
```

输出：

```
Testing S11E22... Match!
Testing S1E2... Match!
Testing S11E2... Match!
Testing S1E22... Match!
Testing S111E222... No Match
Testing S111E... No Match
Testing SE... No Match
Testing S0E0... Match! 
```

解释：

```
 $reg = "#S\d{1,2}E\d{1,2}#";
          ^ ^  ^  ^ ^  ^
          | |  |  | |  |
    Match S |  |  | |  One or two times
  Match digit  |  | Match a digit
One or two times  Match the letter E 
```

**编辑**

或者你可以用类似的东西来做到这一点

```
$reg = '#S\d\d?E\d\d?#'; 
```

也就是说，S 后面跟着一个数字，可能后面跟着另一个数字`?`……以此类推。

# javascript - 仅按属性选择元素

> ID：10814103
> 
> 赞同：2
> 
> 时间：2012-05-30T10:03:39.647
> 
> 标签：javascript, jquery

> **可能重复：**
> [JQuery，有没有办法选择页面上具有特定属性的所有元素？](https://stackoverflow.com/questions/4333720/jquery-is-there-a-way-to-select-all-elements-on-the-page-with-a-specific-attrib)

我的代码

```
<html>
    <body>
        <script>
            $(function(){
                $("No idea what to write here").remove();
            });
        </script>

        <button data-fun="a">Remove</button>
        <div data-fun="b">Remoave</div>
        <span data-fun="c">Remdove</span>
        <strong data-fun="d">Rdemove</strong>
        <b data-fun="e">Remosve</b>
        <p data-fun="f">Remoe</p>
        <div>Not Remove</div>
    </body>
</html> 
```

`data-fun`无论元素是什么，值是什么，我都想删除所有具有该属性的元素`data-fun`。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-30T10:04:39.047

你可以试试这个：

```
$(function() {
     $("[data-fun]").remove();
}) 
```

**[工作样本](http://jsfiddle.net/MyUtF/)**

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-30T10:06:54.137

**演示** [http://jsfiddle.net/JfBvG/](http://jsfiddle.net/JfBvG/)

**代码**

```
$(function(){
$("[data-fun]").remove();
});​ 
```

# oracle - Aqua Data Studio 中的 PL/SQL 错误

> ID：10814108
> 
> 赞同：2
> 
> 时间：2012-05-30T10:03:54.097
> 
> 标签：oracle, plsql

我正在尝试在 Aqua Data Studio 8.0.22 中执行下一个代码：

```
--  Add a new role for cashier.
declare 
    roleEntityID "Entity"."EntityID"%type;
begin
    select "EntityID_SEQ".NEXTVAL into roleEntityID from dual;
    insert into "Entity" ("EntityID") values(roleEntityID);
    insert into "Role" ("RoleID", "Name", "DisplayName") values (roleEntityID, 'Cashier', 'Cashier');
end; 
```

但不幸的是，我遇到了一些错误，首先是：

> > [错误] 脚本行：1-3 -------------- ORA-06550：第 3 行，第 41 列：PLS-00103：遇到预期以下之一时的符号“文件结尾”：
> 
> := ( ; 非空范围默认字符 脚本第 3 行，语句第 3 行，第 41 列

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-30T19:02:34.273

Depending on how this is being run (as a script?), you may need to end the PLSQL block with a forward slash:

```
declare
--...
begin
--...
end;
/ 
```

And to show you that your code should work exactly as-is (on Oracle 11GR2; the script output from SQL Developer apparently doesn't show the semicolons after the `create` or `select` statements or the slash on the line after the `end;` but all were present in the original buffer):

```
> create sequence "EntityID_SEQ"
sequence "EntityID_SEQ" created.
> create table "Entity"("EntityID" number)
table "Entity" created.
> create table "Role"("RoleID" number, "Name" varchar2(30), "DisplayName" varchar2(30))
table "Role" created.
> declare 
    roleEntityID "Entity"."EntityID"%type;
begin
    select "EntityID_SEQ".NEXTVAL into roleEntityID from dual;
    insert into "Entity" ("EntityID") values(roleEntityID);
    insert into "Role" ("RoleID", "Name", "DisplayName") values (roleEntityID, 'Cashier', 'Cashier');
end;
anonymous block completed
> select * from "Entity"
EntityID               
---------------------- 
1                      

 1 rows selected 

> select * from "Role"
RoleID                 Name                           DisplayName                    
---------------------- ------------------------------ ------------------------------ 
1                      Cashier                        Cashier                        

 1 rows selected 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-30T18:52:49.310

尝试删除引号。不知道你为什么把它们放在那里

# database - 是否可以将数据库序列用于 Grails 应用程序中的非 PK 字段？

> ID：10814110
> 
> 赞同：1
> 
> 时间：2012-05-30T10:03:56.057
> 
> 标签：database, grails, grails-orm, sequence

在我的应用程序中，我需要数据库中特定字段的唯一值。该字段必须是整数类型。所以我想知道是否可以在该字段中使用序列？以及如何在我的 GORM 域类中实现它？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-30T10:37:25.767

有关如何[使用序列](http://grails.org/doc/latest/ref/Database%20Mapping/id.html)，请参阅 grails 文档。取决于序列的来源（（oracle/postgres）序列号生成器类型/数据库表）

```
static mapping = {
    intField1 generator:'sequence', params:[sequence:'sequence_name']
    intField2 generator:'sequence', params:[table: 'hi_value', column: 'next_value', max_lo: 100]
} 
```

# oracle - 如何检查游标是否返回oracle中的任何记录？

> ID：10814111
> 
> 赞同：14
> 
> 时间：2012-05-30T10:03:56.383
> 
> 标签：oracle, database-cursor

我有一个使用游标的以下存储过程。根据游标是否返回任何记录，我需要进行一些处理。

但我不确定如何检查游标是否返回任何记录。

```
CREATE OR REPLACE PROCEDURE SP_EMPLOYEE_LOOKUP_BY_EMP_ID
(
      IN_USER_ID IN NUMBER, 
      IN_EMPLOYEE_ID NUMBER,
      IN_HC_AS_ON_DATE VARCHAR2,
      emp_cursor OUT SYS_REFCURSOR
) 
IS 

 CURSOR employees IS 
    SELECT  * FROM EMPLOYEE e; 

BEGIN    

if(record exist ) then 

 FOR employee IN employees
  LOOP  

        // do something  

  END LOOP; 
else if employees is empty then 
     // do something else 

END; 
```

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2012-05-30T11:14:12.380

不打开游标就无法检查游标是否返回记录。
（见[这里](http://asktom.oracle.com/pls/apex/f?p=100:11:0::::P11_QUESTION_ID:96612348060#6441370332689)）
所以你可以有一些快速查询只是为了看看是否有记录（例如使用计数），

或者，您可以这样做：

```
CREATE OR REPLACE PROCEDURE SP_EMPLOYEE_LOOKUP_BY_EMP_ID
(
      IN_USER_ID IN NUMBER, 
      IN_EMPLOYEE_ID NUMBER,
      IN_HC_AS_ON_DATE VARCHAR2,
      emp_cursor OUT SYS_REFCURSOR
) 
IS 

 is_found_rec boolean := false;    

 CURSOR employees IS 
    SELECT  * FROM EMPLOYEE e; 

BEGIN    

 FOR employee IN employees
  LOOP  

    is_found_rec := true;

        // do something  

  END LOOP; 

 if not is_found_rec then 
     // do something else 
 end if;

END; 
```

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2012-05-30T10:10:16.743

我认为只有`FETCH`. 尝试使用

```
if myCursor%found then
// some body
end if; 
```

但是，如果有人知道另一种方式，请纠正我。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2017-10-19T15:59:10.723

我喜欢这种方式：

```
DECLARE

    CURSOR my_cur
    IS
    SELECT 'a' AS a FROM DUAL WHERE 1=1;

    my_rec my_cur%rowtype;

BEGIN
    OPEN my_cur;
    LOOP

        FETCH my_cur INTO my_rec;

        IF my_cur%NOTFOUND
        THEN
            IF my_cur%ROWCOUNT=0
            THEN
                -- do stuff when cursor empty
                DBMS_OUTPUT.PUT_LINE('NOTFOUND,RC=0' || '_' || my_cur%ROWCOUNT || '_' || my_rec.a);
            END IF;
            EXIT;
        ELSE
                -- do stuff when cursor not empty
            DBMS_OUTPUT.PUT_LINE('FOUND,RC>0' || '_' || my_cur%ROWCOUNT || '_' || my_rec.a);
        END IF;

    END LOOP;
    CLOSE MY_CUR;
END; 
```

光标为 1=1（非空）时的输出：

```
FOUND,RC>0_1_a 
```

光标为 1=0（空）时的输出：

```
NOTFOUND,RC=0_0_ 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2020-09-03T14:35:35.877

341/5000 一种解决方案是使用反向逻辑。例如，不可能问：

```
IF my_record IS NULL THEN
   do something;
END IF; 
```

或者

```
IF my_record.my_attibute IS NULL THEN
   do something;
END IF; 
```

相反，可以问：

```
IF my_record.my_attibute IS NOT NULL THEN
   go on processing;
ELSE
   do something;
END IF; 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2019-10-02T19:18:47.887

我喜欢使用包含游标的相同选择查询并选择它返回到变量中的计数。然后，您可以评估变量以确定下一步要做什么。例如，您有一个像这样的光标：

```
CURSOR c_example IS 
    SELECT field1
        ,field2
        ,field3
    FROM table1 a
    WHERE a.field1 LIKE '%something%'; 
```

在打开游标进行任何处理之前，将游标结果计数选择为变量。

```
SELECT count(*)
INTO v_exampleCount
FROM table1 a
WHERE a.field1 LIKE '%something%'; 
```

现在，再次打开光标之前，请执行以下操作：

```
IF exampleCount>0 THEN

    FOR example IN c_example
    LOOP
        ....
    END LOOP;  --end example loop

    ....

END IF;  --end example if 
```

# php - PHPExcel 输出乱码

> ID：10814114
> 
> 赞同：2
> 
> 时间：2012-05-30T10:04:05.137
> 
> 标签：php, phpexcel

我正在尝试 PHPExcel 附带的简单示例 -01simple.xls- 我得到了乱码输出。它（LibreOffice）要导入它认为字符集是西欧 DOS/OS2-861.icelandic 的文件，输出是这样的

╨╧αí▒ß ■ ╗ ╠╤B░=╝%r8X"1▄ÉCalibriα⌡ ╗ ╠╤*+éÇü┴âä&ffffffµ?'ffffffµ?(Φ?)Φ?í"dXX333333╙?333333╙?U} $ }$ }$ }$ ² ² ² ²

> ╢@gg 根

它可能很简单，但我不知道

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-27T03:23:05.383

尝试重新上传 phpexcel，并将 ftp 中的传输类型设置为自动。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-16T13:17:00.003

还要确保删除文件的所有 BOM。这个脚本非常适合它！[http://code.google.com/p/bomremover/](http://code.google.com/p/bomremover/)

# php - 如何在 PHP 中使用邮件发送我的输入

> ID：10814118
> 
> 赞同：0
> 
> 时间：2012-05-30T10:04:18.203
> 
> 标签：php

我有两个问题：

1.  他没有发送我在表格中填写的姓名。
2.  他只发送我作为产品和数量放入的最后一件事。

例如：如果我输入`Naam: TOM, Productnaam: Zwart 26, aantal: 4`，然后单击`toevoegen`，它就会出现。然后我输入`Naam: TOM, Productnaam: Zwart 11 , aantal : 5`，然后`toevoegen`再次单击，它出现在另一个订单的下方。然后当我发送它时，一切都很顺利，但是当我看到我的邮件时，这就是我得到的：

`Naam: 5 x Zwart 11`

对这些问题有帮助吗？

```
 <?php
    include "authenticatie1_p88";
    ?>
    <?php

    ini_set("SMTP", "smtp.olvgroeninge.be");
    ini_set("smtp_port", 25);
    ini_set ("sendmail_from", "johan.dejonckheere@sintamandscollege.be");
    session_start();

    // Toevoegen
    if( isset( $_GET['ADD'] ) && ereg('^[1-9][0-9]*$', $_GET['aantal'])) {
    $_SESSION['winkelwagen'][$_GET['ID']] = $_GET['aantal'];}

    // Verwijderen
    if( isset( $_GET['DEL'] ) ) {
    unset($_SESSION['winkelwagen'][$_GET['ID']]);}

    // Alles verwijderen
    if( isset( $_GET['EMP'] ) ) {
    unset($_SESSION['winkelwagen']);}

    // Laat lijst zien
    if( isset( $_SESSION['winkelwagen'] ) ) {
    foreach ( $_SESSION['winkelwagen'] as $key=>$val ) {
    echo "$val x $key<br>";}}

    //Verzend de bestelling naar het emailadres
    if( isset( $_GET['VER'] ) ) {
    $boodschap2 = print_r( $key, true );
    $boodschap = "Naam: ".$_GET["naam"]."$val x $key";
        mail("nielbutaye@gmail.com","Uw inkt bestelling", $boodschap);
        echo "Uw gegevens zijn verstuurd";}
    ?>
    <form><table width="200" border="0" align="center">
      <tr>
        <td><img src="images/hewlett-packard-51626ae-hp-26-hp51626a.jpg" width="350" height="350" /></td>
        <td><img src="images/hewlett-packard-c4810a-hp-11-hpc4810a.jpg" width="350" height="350" /></td>
        <td><img src="images/intktpatroona.jpg" width="400" height="400" /></td>
      </tr>
      <tr>
        <td>Product: Zwart 26</td>
        <td>Product: Zwart 11</td>
        <td>Product: Gekleurd 57</td>
      </tr>
    </table>

      <p>Naam: 
      <input type="text" name="naam" value="<?php echo $_POST["naam"] ?>"><br>
        Product:
      <input type="text" name="ID"><br>
        Aantal:
      <input type="text" name="aantal"><br>
      <input type="submit" name="ADD" value="Toevoegen">
      <input type="submit" name="DEL" value="Verwijderen">
      <input type="submit" name="EMP" value="Legen">
      <input type="submit" name="VER" value="Verzenden">
      </p>
    </form> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-30T12:15:18.900

您在邮件发送部分中使用`$val`and`$key`表明您认为您仍处于`foreach`循环中，但事实并非如此。尝试用这个替换：

```
//Verzend de bestelling naar het emailadres
if( isset( $_GET['VER'] ) ) {

    $boodschap2 = '';
    foreach ( $_SESSION['winkelwagen'] as $key=>$val ) {
        $boodschap2 .= "$val x $key<br>";}
    }

    $boodschap = "Naam: " . $_GET["naam"] . '<br>' .  $boodschap2;
    mail("nielbutaye@gmail.com","Uw inkt bestelling", $boodschap);
    echo "Uw gegevens zijn verstuurd";
} 
```

希望这可以帮助。

# wpf - 使用现有画笔设置背景

> ID：10814119
> 
> 赞同：1
> 
> 时间：2012-05-30T10:04:23.303
> 
> 标签：wpf, xaml

想象一下我有这个刷子：

```
<SolidColorBrush x:Key="MySolidDarkBackground" Color="{DynamicResource DarkBackgroundColorTop}" /> 
```

如何将此画笔用于滚动查看器背景但具有不同的不透明度？

```
<ScrollViewer VerticalScrollBarVisibility="Auto" Grid.Row="1">
            <ScrollViewer.Background>
                < ??? >
            </ScrollViewer.Background>
</ScrollViewer> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-30T10:09:49.643

您要么必须创建第二个 Brush 资源并使用它：

```
<SolidColorBrush x:Key="MyTransparentDarkBackground" Opacity="0.5" Color="{DynamicResource DarkBackgroundColorTop}" />
<ScrollViewer Background="{DynamicResource MyTransparentDarkBackground}" /> 
```

或者你可以重用动态颜色资源：

```
<ScrollViewer>
  <ScrollViewer.Background>
    <SolidColorBrush Opacity="0.5" Color="{DynamicResource DarkBackgroundColorTop}" />
  </ScrollViewer.Background>
</ScrollViewer> 
```

# iphone - 如何在 iOS 中更改 ePub Book 的字体颜色和字体样式？

> ID：10814124
> 
> 赞同：4
> 
> 时间：2012-05-30T10:04:39.077
> 
> 标签：iphone, objective-c, ios, ipad, epub

我创建了支持 pdf 和 ePub 格式的书籍应用程序。在该应用程序中，pdf 仅显示为图像，并且 ePub 在 webview 中打开，因为 EPUB 只是存储在带有 XML 清单的 zip 文件中的 XHTML。现在，我想更改 ePub 书页的**字体样式**和**字体颜色**。可能吗？如果可能的话，那么我该如何实现呢？我搜索了很多，但没有得到任何适当的解决方案。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-30T10:35:57.200

我找到了解决方案。我制作了一个字符串并使用 Java 字符串进行评估

这是我写的：

```
NSString *varMySheet = @"var mySheet = document.styleSheets[0];";

NSString *addCSSRule =  @"function addCSSRule(selector, newRule) {"
"if (mySheet.addRule) {"
"mySheet.addRule(selector, newRule);"                               // For Internet Explorer
"} else {"
"ruleIndex = mySheet.cssRules.length;"
"mySheet.insertRule(selector + '{' + newRule + ';}', ruleIndex);"   // For Firefox, Chrome, etc.
"}"
"}";

NSString *insertRule1 = [NSString stringWithFormat:@"addCSSRule('html', 'padding: 0px; height: %fpx; -webkit-column-gap: 0px; -webkit-column-width: %fpx;')", webView.frame.size.height, webView.frame.size.width];
NSString *insertRule2 = [NSString stringWithFormat:@"addCSSRule('p', 'text-align: justify;')"];
NSString *setTextSizeRule = [NSString stringWithFormat:@"addCSSRule('body', '-webkit-text-size-adjust: %d%%;')", currentTextSize];
NSString *setHighlightColorRule = [NSString stringWithFormat:@"addCSSRule('highlight', 'background-color: yellow;')"];

    // this is what change the text style 

NSString *insertRule3 = [NSString stringWithFormat:@"addCSSRule('html, body, div, p, span, a', 'font-family: arial;')"];
NSString *changeColor = [NSString stringWithFormat:@"addCSSRule('html, body, div, p, span, a', 'color: #1122CC;')"];

[webView stringByEvaluatingJavaScriptFromString:varMySheet];

[webView stringByEvaluatingJavaScriptFromString:addCSSRule];

[webView stringByEvaluatingJavaScriptFromString:insertRule1];

[webView stringByEvaluatingJavaScriptFromString:insertRule2];

[webView stringByEvaluatingJavaScriptFromString:setTextSizeRule];

[webView stringByEvaluatingJavaScriptFromString:setHighlightColorRule];
    [webView stringByEvaluatingJavaScriptFromString:insertRule3];
    [webView stringByEvaluatingJavaScriptFromString:changeColor]; 
```

# jsf - 如何在 JSF 中为 bean 中的组件注册事件监听器？

> ID：10814126
> 
> 赞同：3
> 
> 时间：2012-05-30T10:04:40.313
> 
> 标签：jsf, listener

有没有办法在像 bean 这样的中心点为组件注册事件侦听器？

这样的事情可能吗？

```
@PostConstruct
public void setup() {
    FacesContext facesContext = FacesContext.getCurrentInstance();
    UIViewRoot view = facesContext.getViewRoot();
    view.getComponentByName("toolBar:save").addActionListener(com.sample.SaveListener);
    view.getComponentByName("form:save").addActionListener(com.sample.SaveListener);
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-30T13:16:05.383

并非所有组件都必须在 bean 的（后）构造期间可用。每当 EL 第一次需要解析时，就会构建 bean `#{bean}`，这可能为时过早。而是在预渲染视图事件期间执行此操作。

将以下标签添加到您的视图中：

```
<f:event type="preRenderView" listener="#{bean.setup}" /> 
```

然后，您可以使用该方法完成必要的工作：

```
public void setup() {
    UIViewRoot view = FacesContext.getCurrentInstance().getViewRoot();
    ((UICommand) view.findComponent("toolBar:save")).addActionListener(new com.sample.SaveListener());
    ((UICommand) view.findComponent("form:save")).addActionListener(new com.sample.SaveListener());
} 
```

# php - MYSQL 请求 | 按年和月分组日期

> ID：10814129
> 
> 赞同：2
> 
> 时间：2012-05-30T10:04:43.493
> 
> 标签：php, mysql, json

我的问题是：我有一个 mysql 表：事件并且想获得特殊格式的 json_string。

```
 id   event
    1    2010-01-01 00:00:00 
    2    2010-07-02 00:00:00 
    3    2011-01-04 00:00:00 
    4    2012-01-30 00:00:00 
    5    2012-03-15 00:00:00 
... 
```

我需要获取 json 字符串：

```
{"events":[
   {"2010":
      {
       "1":{"id":1,"event":2010-01-01 00:00:00},
       "7":{"id":2,"event":2010-07-02 00:00:00}
      },
   },
   {"2011:
      {
       "1":{"id":3,"event":2012-01-30 00:00:00}
      },
   },
   {"2012:
      {
       "1":{"id":4,"event":2011-01-04 00:00:00},
       "3":{"id":5,"event":2012-03-15 00:00:00},
      },
   }
]} 
```

我的代码如下：

```
$result = DB::query('SELECT id, event FROM events');
 $events = array();
 while($event = $result->fetch_object()) {
     // the following statement won't get desired results
     $events[] = $event;
 }

 return array(
    'events' => json_encode($events);
 ); 
```

如何更改我的代码以获取上述 JSON 字符串？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-30T10:09:02.993

只是`substr()`事件日期所需的部分，并使用它来构造多维数组：

```
while($event = $result->fetch_object()) {
    $year = substr($event->event, 0, 4);
    $month = (int)substr($event->event, 5, 2);

    $events[$year][$month][] = $event;
} 
```

# java - 编译器警告对 Web 应用程序性能有任何影响吗

> ID：10814131
> 
> 赞同：1
> 
> 时间：2012-05-30T10:04:46.877
> 
> 标签：java, performance, jsp, web-applications, javac

作为一个懒惰的程序员，我通常会忽略**Jsp**和**Java**代码中的编译器警告。

我可以通过认为缺少 JavaScript、验证和其他东西可以在运行时解决来证明**JSP警告的合理性。**但需要确定。

但我总是被**Java**警告取笑，比如

*   [通用类型] 是原始类型。应该参数化对泛型类型 [GENERIC TYPE] 的引用。

*   字段 [FIELD NAME] 永远不会在本地读取。

还有更多。

我的问题是

## 警告对性能有影响吗？

*   如果不是，那为什么编译器一直在喊？是在帮我们写好代码吗？
*   如果可能，那么哪些类型的警告不应该被忽视？
*   如果是，（内存可能）那么它有多深？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-31T14:05:26.397

编译器警告几乎总是提醒您潜在的意外行为或不必要的代码。实际上，它们不会影响代码的运行时性能。编写性能不佳的代码（*更*容易做到）是一个更大的担忧。

就未使用的局部变量而言，某些编译器可能会对此进行优化，而根本不分配内存进行赋值。但是，产生结果的语句仍然需要执行，因为它们可能包含副作用。

有一些方法可以关闭您承认对您的代码不重要的各种类型的编译器警告（例如，“应该声明一个 serialVersionUID”警告是一种常见的警告，但通常并不特别适用）。您可以使用每个类/方法/字段的 @SuppressWarnings 注释来执行此操作，或者您可以通过向其提供选项在编译器级别执行一次。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-30T10:08:31.767

> 如果不是，那为什么编译器一直在喊？是在帮助我们写出好的代码吗？

绝对如此。大多数警告都是“最佳实践......未实践” :) 例如，如果 Java 现在提供泛型，为什么要使用原始类型？

你可能有理由忽视它们。然后许多 IDE 让您可以关闭这些警告。

# html - 如何在sencha touch中实现邮件、通话功能

> ID：10814134
> 
> 赞同：3
> 
> 时间：2012-05-30T10:04:51.543
> 
> 标签：html, extjs, sencha-touch, sencha-touch-2

我有一个示例 sencha 触摸应用程序，试图实现电子邮件、呼叫和 SMS 功能，但是在运行应用程序时它没有打开电子邮件窗口或呼叫窗口。请问我能知道正确的语法来使它工作吗？

示例代码：

```
Ext.define('Sample.view.ContactsView', {
  extend:'Ext.Panel',
  requires:[
    'Ext.form.FieldSet',
    'Ext.field.Text'
  ],

  alias:"widget.contactpage",
  initialize:function () {
    this.callParent(arguments);
  },

  config:{
    items:[
      {
        xtype:'titlebar',
        title:'Contact Us'
      },
      {
        xtype:'panel',
        layout:'hbox',

        items:[
          {
            xtype:'button',
            flex:1,
            id:'smsButton',
            handler:function(){
              document.location.href = 'sms:464646'
            }
          },
          {
            xtype:'spacer'
          },
          {
            xtype:'button',
            text: 'Phone',
            id:'callMeButton',
            flex:1,
            handler:function(){
              document.location.href = 'tel:+1-800-555-1234'
            }
          }
        ]
      },
      {
        xtype:'button',
        text:'Email',
        id: 'emailButton',
        handler:function(){
          document.location.href = 'mailto:webmaster@example.com'
        }
      }
    ]
  },
}); 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-30T12:13:43.497

使用 window.open() 方法。

```
window.open('tel:+1-800-555-1234');
window.open('mailto:webmaster@example.com'); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-12-11T06:42:11.683

你可以通过使用`<a>`标签来做到这一点

对于电话号码

```
<a href="tel:+1-800-555-1234">+1-800-555-1234</a> 
```

对于电子邮件

```
<a href="mailto:webmaster@example.com">webmaster@example.com</a> 
```

点击链接将自动召唤安卓和 iOS 中的电话应用程序或电子邮件应用程序。

# xml - 在 XStream 中重载类加载

> ID：10814136
> 
> 赞同：1
> 
> 时间：2012-05-30T10:04:59.610
> 
> 标签：xml, classloader, xstream, netbeans-platform

我正在 NetBeans 平台应用程序中实现保存/加载。我正在使用 XStream 序列化为 XML。

但是我有反序列化的问题。当我使用 ObjectInputStream 时，我以这种方式重新加载了它：

```
public class NBSystemClassLoaderObjectInputStream extends ObjectInputStream
{
    public NBSystemClassLoaderObjectInputStream(InputStream in) throws IOException
    {
        super(in);
    }

    @Override
    public Class resolveClass(ObjectStreamClass desc) throws IOException, ClassNotFoundException
    {
        try
        {
            ClassLoader currentTccl = Thread.currentThread().getContextClassLoader();
            return currentTccl.loadClass(desc.getName());
        } catch (Exception e)
        {
        }
        return super.resolveClass(desc);
    }
} 
```

所以它会使用 NB Platform 的特性来寻找一个类。如何以相同的方式覆盖 XStream 类加载？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-31T11:52:15.130

XStream 有两个有用的实例方法：getClassLoader 和 setClassLoader。最后一个可用于为 XStream 实例提供所需的 ClassLoader

# xslt - 转换具有“名称”属性的元素所需的 xslt

> ID：10814137
> 
> 赞同：3
> 
> 时间：2012-05-30T10:05:07.190
> 
> 标签：xslt

我的xml：要转换的输入xml

```
 <content>    
                     <conditionalText name="Masked_Account_Number">
                          <text>
                             Hi 2<dynamicVariable name="asked_Account"/> is needed.
                         </text>
                     </conditionalText>

                     <dynamicInclude name="xyz" />
                </content> 
```

所以我必须使用上面的xml，识别所有包含'name'的标签作为属性，提取它的值并创建标签'name'，在它下面，它应该有'a'标签，格式如下：

在输入 xml 中包含“名称”作为其属性的所有标签的转换输出应为：

```
 <name>
                                <a href="#" id="dynamicvariable" 
                                   name="value of name attribute"                   
                                   xmlns="http://www.w3.org/1999/xhtml">[value of name attribute]
                                </a>
                          </name> 
```

并且仅对于输入 xml 文件的“dynamicVariable”标签，它应该只创建“a”标签作为

输入 xml 的“dynamicVariable”标签的转换输出应如下所示：

```
 <a href="#" id="dynamicvariable" 
                                name="value of name attribute"                   
                            xmlns="http://www.w3.org/1999/xhtml">[value of name attribute]
                      </a> 
```

所以转换后我的输出xml应该看起来像

```
 <content1>
                     <conditionalText>
                         <text>
                           Hi 2
                           <a href="#" id="dynamicvariable" 
                               name="asked_Account"                   
                               xmlns="http://www.w3.org/1999/xhtml">[asked_Account]
                           </a>is needed
                        </text>

                         <name>
                           <a href="#" id="dynamicvariable"                                 
                             name="Masked_Account_Number"                   
                             xmlns="http://www.w3.org/1999/xhtml">[Masked_Account_Number]
                           </a>
                        </name>
                  </conditionalText>

                  <dynamicInclude>
                      <name>
                         <a href="#" id="dynamicvariable" name="xyz"                   
                            xmlns="http://www.w3.org/1999/xhtml">[xyz]
                         </a>
                     </name>
                  </dynamicIncude>
          </content1> 
```

XSLT 尝试如下： 我采用了两个模板。第一个模板将识别所有包含“名称”的标签作为它们的属性并提取它的值并以格式创建为

```
 <name>
                                  <a href="#" id="dynamicvariable" 
                                    name="value of name attribute"                   
                                   xmlns="http://www.w3.org/1999/xhtml">[value of name attribute]
                                  </a>
                                </name> 
```

第二个模板将覆盖第一个模板，它将仅识别名称为“dynamicVariable”的标签并提取其“名称”属性值并创建格式为的标签

```
 <a 
                              href="#" id="dynamicvariable" 
                              name="value of name attribute"                   
                             xmlns="http://www.w3.org/1999/xhtml">[value of name attribute]
                            </a> 
```

所以我的最终xslt如下：

```
 <?xml version="1.0" encoding="utf-8"?>
           <xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
             <xsl:output method="xml" indent="yes"/>

               <xsl:template match="content/*">
                    <content1>
                      <xsl:apply-templates />
                    </content1>
              </xsl:template>

           <xsl:template  match= "*/@name" >
                   <name>
                      <a href ='#'  id="dynamicvariable" xmlns="http://www.w3.org/1999/xhtml" >
                          <xsl:copy-of select="@*"/>
                              [<xsl:value-of select="@name"/>]
                      </a>
                  </name>

                 <xsl:for-each select="child::*">
                    <xsl:if test="name()='text'">
                          <text>
                            <xsl:apply-templates />
                           </text>
                     </xsl:if>
                  </xsl:for-each>
      </xsl:template>

                <xsl:template  match= "*[name()='dynamicVariable']" >
                  <a href ='#'  id="dynamicvariable" xmlns="http://www.w3.org/1999/xhtml" >
                     <xsl:copy-of select="@*"/>
                       [<xsl:value-of select="@name"/>]
                  </a>
                </xsl:template>

        </xsl:stylesheet> 
```

但没有得到所需的转换后的 xml。谁能帮我吗 。并且具有条件文本元素的转换后的 xml 文件应该具有与转换后的 xml 中指定的相同顺序的子子项。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-31T12:11:22.197

**这种转变**：

```
<xsl:stylesheet version="1.0"
 xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
 <xsl:output omit-xml-declaration="yes" indent="yes"/>
 <xsl:strip-space elements="*"/>

 <xsl:template match="node()|@*">
     <xsl:copy>
       <xsl:apply-templates select="node()|@*[not(name()='name')]"/>
       <xsl:apply-templates select="@name"/>
     </xsl:copy>
 </xsl:template>

 <xsl:template match="*/@name">
   <name>
     <a href="#" id="dynamicvariable"
        name="{.}"
        xmlns="http://www.w3.org/1999/xhtml">[<xsl:value-of select="."/>]
     </a>
   </name>
 </xsl:template>

 <xsl:template match="dynamicVariable">
   <a href="#" id="dynamicvariable"
      name="{@name}"
      xmlns="http://www.w3.org/1999/xhtml">[<xsl:value-of select="@name"/>]
   </a>
 </xsl:template>
</xsl:stylesheet> 
```

**应用于提供的 XML 文档时：**

```
<content>
  <conditionalText name="Masked_Account_Number">
    <text>
      Hi 2<dynamicVariable name="asked_Account"/> is needed.
    </text>
  </conditionalText>

  <dynamicInclude name="xyz" />
</content> 
```

**产生想要的（重命名`content`留给读者作为练习），正确的结果**：

```
<content>
   <conditionalText>
      <text>
      Hi 2<a xmlns="http://www.w3.org/1999/xhtml" href="#" id="dynamicvariable" name="asked_Account">[asked_Account]
   </a> is needed.
    </text>
      <name>
         <a xmlns="http://www.w3.org/1999/xhtml" href="#" id="dynamicvariable" name="Masked_Account_Number">[Masked_Account_Number]
     </a>
      </name>
   </conditionalText>
   <dynamicInclude>
      <name>
         <a xmlns="http://www.w3.org/1999/xhtml" href="#" id="dynamicvariable" name="xyz">[xyz]
     </a>
      </name>
   </dynamicInclude>
</content> 
```

# android - 使用私有类作为 Javascript 接口

> ID：10814139
> 
> 赞同：0
> 
> 时间：2012-05-30T10:05:16.020
> 
> 标签：android, webview

是否可以使用私有内部类作为 Javascript 接口`WebView`？

```
public class WebController{

    private WebView wv;
    public WebController(WebView wv){
        this.wv=wv;
        this.wv.addJavascriptInterface(new JSInterface(), "Android");
    }

    private class JSInterface{

        void someMethod(){ /* ... */ }        

    }

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-30T10:13:08.960

是的，可以使用私有内部类作为 jsInterface，如下所示：

```
public class JavascriptInterfaceActivity extends Activity {
    /** Called when the activity is first created. */

    WebView wv;

    JavaScriptInterface JSInterface;

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);
        wv = (WebView)findViewById(R.id.webView1);

        wv.getSettings().setJavaScriptEnabled(true);
        // register class containing methods to be exposed to JavaScript

        JSInterface = new JavaScriptInterface(this);
        wv.addJavascriptInterface(JSInterface, "JSInterface"); 

        wv.loadUrl("file:///android_asset/myPage.html");

    }

    public class JavaScriptInterface {
        Context mContext;

        /** Instantiate the interface and set the context */
        JavaScriptInterface(Context c) {
            mContext = c;
        }

        public void changeActivity()
        {
            Intent i = new Intent(JavascriptInterfaceActivity.this, nextActivity.class);
            startActivity(i);
            finish();
        }
    }
} 
```

这是html页面：

```
<html>
<head>
<script type="text/javascript">
function displaymessage()
{
JSInterface.changeActivity();
}
</script>
</head>

<body>
<form>
<input type="button" value="Click me!" onclick="displaymessage()" />
</form>
</body>
</html> 
```

希望这可以帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-07T19:51:37.120

是的 - 这是可能的。看起来Java反射在这里起作用。

# c# - 错误; 指数超出范围。必须是非负数且小于

> ID：10814140
> 
> 赞同：2
> 
> 时间：2012-05-30T10:05:16.383
> 
> 标签：c#, gridview, tcp

```
foreach (TcpConnectionInformation info in tcpConnections)
{
    dataGridView1.Rows[0].Cells[1].Value =info.LocalEndPoint.Address.ToString();
} 
```

我正在使用此代码将值放入 gridview 但发生此错误。

> IndexOutOfRangeException - 索引超出范围。必须是非负数且小于集合的大小。

参数名称：索引

感谢和问候

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-30T10:12:28.250

**index**参数指的是 Rows[0] 或 Cells[1 ]

请检查 dataGridView1 中是否至少有一行，并且第一行至少有 2 个单元格。

# android - 如何使用谷歌图表 API

> ID：10814142
> 
> 赞同：8
> 
> 时间：2012-05-30T10:05:17.970
> 
> 标签：android, google-api

我在[此使用谷歌图表 API](http://chart.apis.google.com/chart?cht=p3&chs=500x200&chd=e%3aTNTNTNGa&chts=000000,16&chtt=A%20Better%20Web&chl=Hello%7CHi%7Canas%7CExplorer&chco=FF5533,237745,9011D3,335423&chdl=Apple%7CMozilla%7CGoogle%7CMicrosoft)

我如何在 android 应用程序中使用此图表？

这是我的代码

```
public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);

       String url =  "http://chart.apis.google.com/chart?cht=p3&chs=500x200&chd=e:TNTNTNGa&chts=000000,16&chtt=A+Better+Web&chl=Hello|Hi|anas|Explorer&chco=FF5533,237745,9011D3,335423&chdl=Apple|Mozilla|Google|Microsoft";
        WebView mCharView = (WebView) findViewById(R.id.char_view);
        mCharView.loadUrl(url);
    } 
```

和 XML

```
<?xml version="1.0" encoding="utf-8"?>

<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:orientation="vertical" >

<WebView android:id="@+id/char_view"
android:layout_width="fill_parent"
android:layout_height="fill_parent"
android:visibility="visible"/>

    <TextView
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:text="@string/hello" />

</LinearLayout> 
```

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-05-30T10:17:00.373

如果您想像@Rajesh 所说的那样加载图表，则必须使用网络视图，然后通过以下方式加载图表的网址：

```
webview.loadUrl(CHART_URL); 
```

添加到您的清单

```
<uses-permission android:name="android.permission.INTERNET"></uses-permission> 
```

但是，如果您正在寻找如何在 android 中绘制饼图，您可以查看本[教程](http://www.artfulbits.com/articles/samples/aicharts/sample-viewer.aspx?sample=piesample)，它附有示例代码

![在此处输入图像描述](../Images/540acb0c6fb9bcd79004fe6a219cfd6d.png)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-11-02T15:45:38.807

记得在你的 webview 中启用 javascript！

```
webview.getSettings().setJavaScriptEnabled(true); 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-05-30T10:10:35.710

使用 a[`WebView`](http://developer.android.com/reference/android/webkit/WebView.html)显示任何 Web 内容。

```
webview.loadUrl(CHART_URL); 
```

# android - android ndk jni No implementation found 错误

> ID：10814143
> 
> 赞同：4
> 
> 时间：2012-05-30T10:05:27.307
> 
> 标签：android, android-ndk, java-native-interface

我正在使用 android 并尝试在我的应用程序中使用一些本机代码。

这是应用程序代码的框架：

```
package A.B;
/*
import statements
*/

public class C extends Activity{

public void onCreate(...){
    ....
    foo();
    ....
}

public int foo(){
    .....
    data(a, b);
    .....
}

public int data(a, b){
    GetValues(a, b);
}

static{
    System.loadLibrary("baz");
}

public native int GetValues(int[] a, int b);
} 
```

本机方法签名是这样的：

```
JNIEXPORT jint JNICALL

Java_A_B_C_GetValues(JNIEnv *env, jobject obj, jintArray arr, jint b){

....

....

} 
```

运行 logcat 时出现：W/dalvikvm(799): No implementation found for native LA/B/C;.GetValues ([IJ)I

ndk 文档没有严格提到创建头文件，所以我没有

android.mk 文件的内容：

```
LOCAL_PATH := $(call my-dir)

include $(CLEAR_VARS)

LOCAL_MODULE    := baz
LOCAL_SRC_FILES := baz.cpp

include $(BUILD_SHARED_LIBRARY) 
```

提前致谢。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-05-30T11:31:38.967

由于您的本机文件是 .cpp 文件，我猜您将需要使用 extern "C"。[为什么](https://stackoverflow.com/questions/1041866/in-c-source-what-is-the-effect-of-extern-c)和[为什么](http://www.velocityreviews.com/forums/t284485-extern-c-and-jni.html)

# javascript - 无法从位于隐藏行单元格中的选择元素中获取 selectedIndex

> ID：10814145
> 
> 赞同：0
> 
> 时间：2012-05-30T10:05:34.040
> 
> 标签：javascript, html, dom, select, datatables

我正在使用 DataTable 并且我试图让一些过滤功能与位于表格单元格中的选择元素一起使用。

通过在位于每列下方的输入字段中输入文本来进行过滤。然后过滤器功能检查该列的所有单元格中的选定文本，如果在一个单元格中没有找到匹配项，则隐藏相关行。

加载表格后，它会过滤表格一次。问题是在清除过滤器时，它不起作用。原因似乎与我将 selectedIndex 用于位于暂时不可见的行中的选择 DOM 对象有关。

“qu_owner_xxx”是选择元素的 ID。

```
var el1 = document.getElementById("qu_owner_4");     //Visible, works like a charm
console.log("ID 1 " + el1.id);                       //ID is printed
console.log("EL 1 " + el1.selectedIndex);                           
var el2 = document.getElementById("qu_owner_17");    //Hidden, returns null
console.log("ID 2 " + el2.id);                       //Not reaching here
console.log("EL 2 " + el2.selectedIndex) ;           //Not reaching here
str = el.options[el.selectedIndex].text;             //Just for showing how to get the string used for filtering later 
```

问题是单元格的数据作为纯 html 传递给过滤器函数，而不是作为对象。我可以从执行*$(aData[i2]).attr('id')*的那部分获取 id，其中 aData 是表格行。但是使用 jQuery 时，与使用实际的 DOM 对象（例如 selectedIndex）相比，您似乎无法获得一些信息，尤其是当您必须从 html 中“重新创建”对象时。

如何从隐藏选择框/行的选定值中获取文本？甚至可能吗？

* * *

**更新**

我在[jsfiddle](http://jsfiddle.net/92Wg8/1/)测试了我的理论，但它实际上可以从隐藏的行/选择中检索信息。但毫无疑问，在我的过滤器功能中，未显示的行是失败的。

我的过滤器函数（DataTable 在过滤时调用此函数）

```
$.fn.dataTableExt.afnFiltering.push(
                function( oSettings, aData, iDataIndex ) {

                var ret = true;    

                    //Loop through all input fields i tfoot that has class 'sl_filter' attached                                              
                   $('tfoot .sl_filter').each(function(i, obj){

                       //$(this) can be used. Get the index of this colum.
                       var i2 = $("tfoot input").index($(this));                           

                       //Create regexp to math
                       var r = new RegExp($(this).val(), "i");

                       var str = "";
                       if(i2 == 5){//This is just during development, don't want to care about other columns with select element so just doing things on this column

                            //Here I just pick two id, one that I know is visible and one that is not
                           var el1 = document.getElementById("qu_owner_4");     //Visible, works like a charm
                           console.log("ID 1 " + el1.id);                       //ID is printed
                           console.log("EL 1 " + el1.selectedIndex);            //selectedIndex is printed            
                           var el2 = document.getElementById("qu_owner_17");    //Hidden, returns null
                           console.log("ID 2 " + el2.id);                       //Not reaching here
                           console.log("EL 2 " + el2.selectedIndex) ;           //Not reaching here

                           //This is how I intended to get it working, but fail
                           var el = document.getElementById($(aData[i2]).attr('id'));                                                      
                           str = el.options[el.selectedIndex].text; //String to be used for comparing

                       }

                       /*Test to see if there is a match or if the input value is the default 
                         (the initial value of input before it has any fokus/text) */                           
                       if(r.test(str) || $(this).val()=="Search"){
                           //Return true only exits this function
                           return true;
                       }else{

                           /*Return false returns both function an .each. Retain 'false' in a variable scoped
                             to be reached outside the .each */                                
                           ret = false;
                           return false;
                       }
                   });
                   //Return true or false
                    return ret;                        
                }
            ); 
```

aData = 行。aData[x] 给了我该行单元格 x 的单元格内容。对于选择元素，它是原始 html。

this = 我输入的搜索字符串的输入字段。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-30T10:36:05.190

当然，您可以从所选值中获取文本！
这是一种方法（可能不是最好的，但有效）：

```
 $('select').change(function() {
       var selectedValue = jQuery(this).val();
       var selectedText = '';

       jQuery(this).children('option').each(function() {
          if (jQuery(this).val() == selectedValue) {
             selectedText = jQuery(this).text();
          }
       });
    }); 
```

该`selectedText`变量将包含来自所选值的文本。

见[这里](http://jsfiddle.net/hhGut/ "这里")。

# c# - 如何获取将在给定请求时调用的控制器操作的 MethodInfo？

> ID：10814147
> 
> 赞同：7
> 
> 时间：2012-05-30T10:05:41.423
> 
> 标签：c#, asp.net-mvc-2, asp.net-mvc-routing

由于用户角色不正确，我有一个负责处理 403 的控制器和操作。它可以访问`RequestContext`导致异常的原始文件。

我想做的是用他们所做的描述来装饰我的行为，然后允许用户通知他们的经理，请求访问，包括电子邮件中的描述。

那么，**我怎样才能算出在给定 a 时会调用什么动作`RequestContext`？**

显然，这比从中获取控制器和动作名称更复杂，`RouteData`因为通常存在动作方法等的重载。

一旦我有了，`MethodInfo`就很容易获得属性等。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-07-18T22:01:12.150

这是适合您的扩展方法。如果您在控制器上进行依赖注入（非无参数构造函数），则需要使用反射枚举控制器构造函数，或使用 IOC 容器来实例化控制器，而不是使用 Activator.CreateInstance。此外，这可以很容易地修改为使用类似的上下文，如 ExceptionContext 或 HttpContext。

```
public static class RequestContextExtensions
{
    public static MethodInfo GetActionMethod(this RequestContext requestContext)
    {
        Type controllerType = Assembly.GetExecutingAssembly().GetTypes().FirstOrDefault(x => x.Name == requestContext.RouteData.Values["controller"].ToString());
        ControllerContext controllerContext = new ControllerContext(requestContext, Activator.CreateInstance(controllerType) as ControllerBase);
        ControllerDescriptor controllerDescriptor = new ReflectedControllerDescriptor(controllerType);
        ActionDescriptor actionDescriptor = controllerDescriptor.FindAction(controllerContext, controllerContext.RouteData.Values["action"].ToString());
        return (actionDescriptor as ReflectedActionDescriptor).MethodInfo;
    }
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-30T13:13:16.390

试图回顾性地解决它有点像蠕虫，因为您可能需要使用反射来发现正确的方法 - 将所需的数据`HttpContext.Items`作为授权的代码的一部分插入可能会更简单失败？然后它可以从您的处理方法中通过`RequestContext.HttpContext.Items`.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-24T08:05:35.783

我已经回答了我自己的问题，这与此非常相似。

*   问题：[我如何获得一个动作的 MethodInfo、给定的动作、控制器和区域名称？](https://stackoverflow.com/questions/13042819/how-do-i-get-the-methodinfo-of-an-action-given-action-controller-and-area-name)
*   答案：[https ://stackoverflow.com/a/13044838/195417](https://stackoverflow.com/a/13044838/195417)

如果这仍然是你的兴趣，也许我可以更深入地研究它。

我的问题不是从您的 URL 开始，而是从控制器和操作名称以及 http 方法（GET、POST ...）开始。

# php - php函数所需参数混淆

> ID：10814149
> 
> 赞同：2
> 
> 时间：2012-05-30T10:05:48.160
> 
> 标签：php, function, arguments

我正在寻找`Required Parameter`PHP 函数签名中的 a的确切类型

仅使用 NULL 初始化参数是否使其成为可选参数？IE

```
function foo($optional=NULL, $OptionalOrRequired="Optional Or Required", $required){} 
```

我对第二个参数感到困惑，它是必需参数还是可选参数？

**更新**

我`reflection`用来获取函数的所有和必需的参数

```
public function getPlayer($params=3, $c){}
// results
$reflection->getNumberOfParameters()            ->   2
$reflection->getNumberOfRequiredParameters()    ->   2 // it should be one

public function getPlayer($params=3, $c, $x=NULL)
// results
$reflection->getNumberOfParameters()            ->   3
$reflection->getNumberOfRequiredParameters()    ->   2 
```

当我得到一个默认值在需要之前的答案时，这是反射函数为所需参数返回错误计数的原因吗？

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-30T10:18:52.220

“可选”参数只是具有默认值的参数，该值是否是`null`, `false`，字符串（等）无关紧要 - 如果函数参数具有默认值，则它是可选的。

但是，将可选参数放在必需参数之前是没有意义的，因为您必须给前面的参数一些值（即使它是`null`）才能“获取”所需参数 - 所以最后一个参数之前的所有参数'required' 参数实际上是必需的。

一些例子：

```
// Bad
function bad($optional = 'literally anything', $required) {}

bad('required arg');              // This breaks - 'missing argument 2'
bad('something', 'required arg'); // This works - both parameters are needed

// Good
function($required, $optional = 'literally anything') {}

good('required arg');              // This works just fine, last argument has a default
good('required arg', 'something'); // Also works fine, overrides 'literally anything' 
```

**更新 RE：反射**

如上所述，在必需参数之前放置一个“可选”参数有效地使该“可选”参数成为必需参数，因为必须为其提供一个值才能满足方法签名。

例如，如果第一个参数有默认值，而第二个参数没有（如`bad`上面的函数），我们需要传递第二个参数，所以我们也需要传递第一个参数，所以两者都是“必需的”。如果后续参数具有默认值，则仍然只需要前 2 个参数。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-30T10:08:30.930

PHP 中的可选参数*后面*不能有必需参数。可选参数必须始终遵循必需的参数（如果有）。任何提供了默认值的参数（例如`$param = 'default'`）都是可选的，任何没有默认值的参数都是必需的。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-05-30T10:08:37.793

进一步我的评论。

```
function test($required, $optional = null)
{

}

test(); // throws an error stating $required is missing
test('a'); // sets $required to 'a' and $optional is null
test('a', 'b'); // sets $required to 'a' and $optional to 'b' 
```

# android - 从索引中隐藏目录图像

> ID：10814151
> 
> 赞同：0
> 
> 时间：2012-05-30T10:05:58.270
> 
> 标签：android

我们可以将 Android 目录中的图像隐藏在图库中的索引中吗？我尝试在那里以编程方式创建 .nomedia，但它不起作用。有什么想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-30T10:10:32.407

是的，您可以通过使用**getExternalFilesDir(null)**而不是**Environment.getExternalStorageDirectory()来做到这一点**

你可以看到开发者[文档](http://developer.android.com/reference/android/content/Context.html#getExternalFilesDir%28java.lang.String%29)。

此功能来自 API level-8。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-30T10:17:53.110

使用点* *(.yourfoldername)*重命名或创建您的文件夹名称* 这将隐藏包含在图库中的索引的图像

希望帮助

# objective-c - 如何在 Objective C 中使用分数进行计算

> ID：10814152
> 
> 赞同：1
> 
> 时间：2012-05-30T10:06:14.857
> 
> 标签：objective-c, ios

我是 Objective C 的新手，我开始学习 iOS 开发的基础知识。

如何在 Objective C 中轻松计算分数？

> **示例 1：** 1/8000 * 60
> 
> **示例 2：** 1/640 / 1/400

我也需要将结果（如果它 < 1）作为分数。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-30T10:35:19.090

我想我会实现一个新类，说它`Fraction`有两个属性，分子和分母。然后，我将实现以下四个（或更多，如果需要）功能：

```
- (Fraction*) add:(Fraction*)operand;
- (Fraction*) subtract:(Fraction*)operand;
- (Fraction*) multiply:(Fraction*)operand;
- (Fraction*) divide:(Fraction*)operand;
- (Fraction*) invert;
+ (Fraction*) fractionByAdding:(Fraction*)op1 to:(Fraction*)op2;
+ (Fraction*) fractionBySubtracting:(Fraction*)op1 from:(Fraction*)op2;
+ (Fraction*) fractionByMultiplying:(Fraction*)op1 with:(Fraction*)op2;
+ (Fraction*) fractionByDuviding:(Fraction*)op1 by:(Fraction*)op2;
+ (Fraction*) fractionByInverting:(Fraction*)operand; 
```

在这些方法中，做你在学校学过的常用算术。如果分子和分母都有公约数，请记住简化。

编辑：这些功能之一的示例实现：

```
- (Fraction*) add:(Fraction*)operand {
    return [Fraction fractionByAdding:self to:operand];
}

+ (Fraction*) fractionByAdding:(Fraction*)op1 to:(Fraction*)op2 {
    int num = (op1.numerator * op2.denominator) + (op2.numerator * op1.denominator);
    int denom = op1.denominator * op2.denominator;
    return [[Fraction alloc] initWithNumerator:num andDenominator:denom];
} 
```

或者，您可以添加一个`reduce`or`simplify`方法，也可能添加一个`allowReducible`属性和一个`isIrreducible`方法。您还可以实现`isEqual`和`compareTo`方法。A`description`应该只将“a/b”打印为`NSString`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-30T10:19:48.517

您可以使用类型转换。

```
 int x = 1;
 int y = 8000;
 int z = 60;

 float result  =  ((float)x) / y * z; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-30T10:36:29.540

您可以使用`float`变量来计算十进制数。但是，没有直接的方法可以得到分数的计算结果，你总是会得到另一个`float`，即十进制数。有一些算法可以将十进制数转换为分数，但这不是 Objective-C 的语言特性。

# c# - 在 C# 中生成随机数，声明种子和最小间隔和最大间隔

> ID：10814155
> 
> 赞同：1
> 
> 时间：2012-05-30T10:06:16.783
> 
> 标签：c#

我已经定义了这样的方法：

```
private String getRadndomNumber(int min, int max) {
    Random rnd = new Random((int) DateTime.Now.Ticks & 0x0000FFFF);
    return Convert.ToString(rnd.Next(min,max));
} 
```

我正在定义种子和 min,max 间隔，我想知道 SEED 值在这里是否有帮助？

tnx :)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-30T10:16:47.697

种子值是否有帮助取决于您要做什么！

您正在使用`DateTime.Now.Ticks & 0xFFFF`作为种子，这意味着*（i）*您将种子基于当前时间，并且*（ii）*您将种子限制为 0 到 65535 之间的值。通常，这些都不是特别好主意。系统时钟的粒度约为 15 毫秒（iirc），因此在相同的 15 毫秒“段”内对您的方法的任何调用都将导致使用相同的种子。

如果您没有将显式种子传递给`Random`构造函数，那么它会有效地`Environment.TickCount & 0x7FFFFFFF`用作种子。所以它仍将基于当前时间，但它的范围比您的自定义种子要宽得多：0 到 2147483647。

从[构造函数的](http://msdn.microsoft.com/en-us/library/ctssatww.aspx)[文档`Random(Int32)`](http://msdn.microsoft.com/en-us/library/ctssatww.aspx)...

> 为不同的`Random`对象提供相同的种子值会导致每个实例产生相同的随机数序列。

从[构造函数的](http://msdn.microsoft.com/en-us/library/h343ddh9.aspx)[文档`Random()`](http://msdn.microsoft.com/en-us/library/h343ddh9.aspx)...

> 默认种子值来自系统时钟并且具有有限的分辨率。因此，`Random`通过调用默认构造函数连续创建的不同对象将具有相同的默认种子值，因此将产生相同的随机数集。这个问题可以通过使用单个`Random`对象生成所有随机数来避免。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-30T10:07:40.913

Seed 可以帮助您生成一个随机数，它是用于他们的随机算法的基数。每次使用相同的种子可能会导致一组可预测的“随机”数字按顺序出现。

从 MS 文档：

> “如果您的应用程序需要不同的随机数序列，请使用不同的种子值重复调用此构造函数。产生唯一种子值的一种方法是使其与时间相关。例如，从系统时钟派生种子值。但是，系统时钟可能没有足够的分辨率来为这个构造函数的不同调用提供不同的种子值。”

默认构造函数使用系统时钟作为种子，但在同一滴答中创建的多个实例可能会导致生成器之间出现可预测的数字。

# c1-cms - 在 Composite C1 中编辑页面时使用像 TinyMCE 这样的增强型编辑器

> ID：10814156
> 
> 赞同：1
> 
> 时间：2012-05-30T10:06:22.500
> 
> 标签：c1-cms

是否可以在 Composite C1 中覆盖用于编辑页面的基本编辑器，并使用像 TinyMCE 这样的增强型文本编辑器来代替它？请建议实施它所涉及的步骤。谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-30T10:28:00.743

Composite C1 已经在使用 TinyMCE。工具栏已经过简化并适应 Composite C1 功能（如媒体存档、内部链接和 C1 功能访问），但核心是相当最新的 TinyMCE。

有一种自定义工具栏的方法，如下所述：http: [//docs.composite.net/Console/CustomizingVisualEditor](http://docs.composite.net/Console/CustomizingVisualEditor)

# java - 处理中的 Arraylist（新手）

> ID：10814158
> 
> 赞同：-1
> 
> 时间：2012-05-30T10:06:31.370
> 
> 标签：java, processing

我试图不绘制另一个按钮顶部。

*   我画了第一个按钮。一切安好
*   我尝试在第一个按钮的顶部绘制第二个按钮。它不让我。一切安好。
*   我尝试在第二个按钮的顶部绘制第三个按钮。它不让我。一切安好。

问题是它只记得我画的最后一个按钮。当我在绘制第三个按钮后尝试在第一个按钮上绘制时；它让我做到了。

我能做什么，它会记住所有的按钮。

按钮类：

```
class Node {

  int node_x;  // x Position
  int node_y;  // y Position
  int node_w;   // width
  int node_h;   // height
  String node_name;  // name of the node
  boolean mouseOverButton; // if mouse is over button

    Node(int temp_node_x, int temp_node_y, int temp_node_number) {

    node_x = temp_node_x;
    node_y = temp_node_y;
    node_w = 100;
    node_h = 36;
    node_name = Integer.toString(temp_node_number);  //integer to string
    mouseOverButton = false;
  }

  void display() {
    rectMode(CENTER);
    if (mouseOverButton) {
      fill (YELLOW);
    }else {
      fill(MID_GRAY);
    }

    rect(node_x, node_y, node_w, node_h);    //button
    fill(BLACK);    //text color black
    text(node_name, node_x, node_y+6); //button text
    rectMode(CORNER); // reset
  }

  boolean overButton() {

    if (mouseX >= node_x -50  && mouseX <= node_x + 50 && mouseY >= node_y -18 && mouseY <= node_y + 18) {
      mouseOverButton = true;
      //Returns true back to main program
      return mouseOverButton;
    }
    else {
      mouseOverButton = false;
      //Returns false back to main program
      return mouseOverButton;
    }
  } 
```

鼠标按下

```
 if (mouseY >= 25 && current_tab == "Node") {
    if ( ((mouseX > 50) && (mouseY > 50)) && ((mouseX < 490) && (mouseY < 340))  ) {     // Do not create the node edge of the window

      for (int i = 0; i < listofNodes.size();i++) {         // Loop through the ArrayList.            
        Node currentNode = (Node) listofNodes.get(i);       // To be able to access the methods for the ArrayList element at the position 'i'
        if (currentNode.overButton()) { 
          onit = true;
        }
        else {
          onit = false;
        }
      }
      if (!onit) {
        listofNodes.add(new Node(mouseX, mouseY, nodecounter++));  // create a new button
      }
    } 

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-30T15:10:04.337

我所要做的就是在 onit 为真时添加一个休息

# objective-c - 证书签名验证失败

> ID：10814159
> 
> 赞同：0
> 
> 时间：2012-05-30T10:06:31.847
> 
> 标签：objective-c, ios, x509certificate, mdm

当我尝试将证书上传到[https://identity.apple.com/pushcert/](https://identity.apple.com/pushcert/)时，它告诉我签名无效。

[我按照移动设备管理器文档和http://www.softhinker.com/in-the-news/iosmdmvenendorcsrsigning](http://www.softhinker.com/in-the-news/iosmdmvendorcsrsigning)一步一步进行操作。我正在使用 C#.NET

plist_encoded 文件的格式是正确的。

```
//Load signing certificate from MDM_pfx.pfx, this is generated using signingCertificatePrivate.pem and SigningCert.pem.pem using openssl
var cert = new X509Certificate2(MY_MDM_PFX, PASSWORD, X509KeyStorageFlags.Exportable);
//RSA provider to generate SHA1WithRSA
//Signed private key - PushCertSignature
var crypt = (RSACryptoServiceProvider)cert.PrivateKey;
var sha1 = new SHA1CryptoServiceProvider();
byte[] data = Convert.FromBase64String(csr);
byte[] hash = sha1.ComputeHash(data);
//Sign the hash
byte[] signedHash = crypt.SignHash(hash, CryptoConfig.MapNameToOID("sha1RSA"));
hashedSignature = Convert.ToBase64String(signedHash);

//Read Certificate Chain
String mdm = signCSR.readCertificate(mdmCertificate);
String intermediate = signCSR.readCertificate(intermediateCertificate);
String root = signCSR.readCertificate(rootCertificate);

StringBuilder sb = new StringBuilder(); ;
sb.Append(mdm);
sb.Append(intermediate);
sb.Append(root);

signCSR.PushCertWebRequest(csr, sb.ToString(), hashedSignature); 
```

我不确定在 MDM_pfx.pfx 中放置什么。我所做的是生成 cst 以上传到企业 iOS 配置门户，然后下载证书生成一个。
然后我导出了我生成的 CSR 的私钥并将其导出为 .pfx 文件。这是我使用的文件。

这是正确的方法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-30T10:29:25.800

您必须上传到[https://identity.apple.com/pushcert/](https://identity.apple.com/pushcert/)的不仅仅是证书，而是带有证书链的 plist (XML)。提供了一个示例 Java 应用程序 (http://www.softhinker.com/in-the-news/iosmdmvendorcsrsigning)，您应该可以将其用作参考。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-01T09:45:06.823

我通过使用解决了这个问题： C:\Program Files (x86)\GnuWin32\bin>openssl pkcs12 -export -out mdmapnspfx.pfx - inkey mdmpk.pem -in mdm.pem

密钥不正确，我没有使用 mdm.pem 证书，因为它是自签名的。

# javascript - 我可以在内容脚本中使用 chrome.tabs.captureVisibleTab() 吗？

> ID：10814161
> 
> 赞同：0
> 
> 时间：2012-05-30T10:06:35.307
> 
> 标签：javascript, google-chrome, google-chrome-extension

我想在内容脚本中使用 chrome.tabs.captureVisibleTab() ，但它不起作用！我怎样才能做到这一点？谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-30T19:22:15.773

在[本文档](http://code.google.com/chrome/extensions/content_scripts.html)中，它说内容脚本**不能**

> 使用 chrome.* API（chrome.extension 的部分除外）

它还说

> 内容脚本可以间接使用 chrome.* API
> 
> 通过与他们的父分机交换消息

[观看此视频](http://www.youtube.com/watch?v=B4M_a7xejYI&feature=player_embedded)可以了解如何间接使用 chrome.* API 。希望这可以帮助。

# c++ - 如何在 gdb 中获取数据成员的值？

> ID：10814170
> 
> 赞同：4
> 
> 时间：2012-05-30T10:07:10.210
> 
> 标签：c++, gdb

嗨，我目前正在通过 GDB 在 linux 机器上调试我的代码库。我目前面临从类的对象 ptr 获取数据成员值的问题。要打印对象 ptr 的位置，我们可以使用“p”（打印）或“显示”命令。

例如：我有这样的课

```
class abc
{
    string a;
}; 
```

所以在我的代码中，如果我使用类 abc 的指针，那么

```
abc* objPtr = new abc(); 
```

所以在上面的行中断后，我将得到 objPtr，现在我想检查数据成员 a (abc::a) 值的值。我怎么能这样做？

```
(gdb) p objPtr
$2 = {px = 0x3ba6430690, pn = {pi_ = 0x3ba6430698}} 
```

此外，是否有不同的方法来检查列表/向量的数据成员？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-30T10:36:56.000

我得到了答案。

```
$p/a objPtr->datamember->[if datamember also has some data member then we can call it in recurcion / can also call member function]. 
```

对于列表/向量，我们可以参考 [http://sourceware.org/ml/gdb/2008-02/msg00064/stl-views.gdb](http://sourceware.org/ml/gdb/2008-02/msg00064/stl-views.gdb)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-30T10:12:05.277

你可以试试：

```
$ p abc->c_str() 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-04-27T20:14:21.137

```
p objPtr->a 
```

将打印变量的数据成员类型和值`a`

# java - Java 注解无法从上层类访问受保护的静态字段

> ID：10814176
> 
> 赞同：4
> 
> 时间：2012-05-30T10:07:36.990
> 
> 标签：java, compiler-construction, annotations, jdk1.6

此代码有效吗？

```
public abstract class A {
   protected static final String c = "my const";
}

@myAnnotation(value=A.c)
public class B extends A {

} 
```

`Eclipse`JDK 1.6.0.23 接受这一点，但`Maven`JDK 1.6.0.23 的 2.2.1 向我显示以下编译错误：

> c 在 A 中具有受保护的访问权限

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-31T00:06:47.417

感谢@adranale 的评论，我在[访问控制](http://docs.oracle.com/javase/specs/jls/se5.0/html/names.html#6.6.2)的 Java 语言规范部分找到了不同的答案。我认为它不应该以这种方式工作，但有关“受保护”的相关文本显示

令 C 为声明受保护成员 m 的类。只有在 C 的子类 S 的主体内才允许访问。

类的主体是大括号中的所有代码。类注释在大括号之外，因此它们无权访问。有趣的是，这种逻辑不适用于类体内的方法、参数、字段或局部变量注释。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-30T10:18:44.857

您尝试用“const”填充的注释尝试通过使用无法工作的受保护从外部访问类。Eclipse 使用它自己的编译器，因此您应该尝试在 Eclipse 中进行干净的重建以查看它是否正常工作。我认为不会。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-30T12:13:46.527

我想我明白这里发生了什么。注释的实例实际上是具有唯一静态初始化程序的接口。注释规范在顶部添加的唯一内容是语法糖和指向方法、类或字段的链接。因此，当您键入时`value=c.A`，几乎就像在注释中添加静态初始化程序一样。注释不是 A 的子类，因此拒绝访问。受保护的访问包括包访问，因此当您将 A 移动到与 B 相同的包中时，注释也与 A 在同一个包中。它可以访问。非常好的问题，我认为两个编译器的行为应该是相同的。我认为 Eclipse 将允许您自定义将其视为错误的内容，以便您可以让他们同意两者都使用不受欢迎的、更具限制性的行为。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-30T10:30:46.460

`A`只有当两者都`B`属于同一个包时，此代码才会编译。

# performance - 相对于 translateZ(0) 的 CSS 性能

> ID：10814178
> 
> 赞同：106
> 
> 时间：2012-05-30T10:07:44.027
> 
> 标签：performance, css, translate-animation

`transform: translateZ(0)`许多博客已经表达了通过使用加速动画和过渡来“欺骗”GPU 认为元素是 3D 的性能提升。我想知道以下列方式使用此转换是否有影响：

```
* {
    -webkit-transform: translateZ(0);
    -moz-transform: translateZ(0);
    -ms-transform: translateZ(0);
    -o-transform: translateZ(0);
    transform: translateZ(0);
} 
```

* * *

## 回答 #1

> 赞同：106
> 
> 时间：2012-05-30T10:26:37.330

CSS 转换创建一个新的堆叠上下文和包含块，如[规范中所述。](http://www.w3.org/TR/css3-transforms/#transform-property)用简单的英语来说，这意味着应用了转换的固定位置元素将更像绝对定位元素，并且`z-index`值很可能会被搞砸。

如果你看一下[这个演示](http://dabblet.com/gist/2463684)，你就会明白我的意思。第二个 div 应用了一个转换，这意味着它创建了一个新的堆叠上下文，并且伪元素堆叠在顶部而不是底部。

所以基本上，不要那样做。仅在需要优化时应用 3D 变换。`-webkit-font-smoothing: antialiased;`是另一种在不产生这些问题的情况下利用 3D 加速的方法，但它仅适用于 Safari。

* * *

## 回答 #2

> 赞同：30
> 
> 时间：2012-05-30T10:51:42.337

如果您想要暗示，[在某些情况下，Google Chrome 的性能在启用硬件加速的情况下会很糟糕](https://stackoverflow.com/questions/10014461/why-does-enabling-hardware-acceleration-in-css3-slow-down-performance/10114994#10114994)。奇怪的是，将“技巧”更改为`-webkit-transform: rotateZ(360deg);`工作正常。

我不相信我们曾经弄清楚为什么。

* * *

## 回答 #3

> 赞同：15
> 
> 时间：2014-09-18T21:01:33.750

它强制浏览器使用硬件加速来访问设备的图形处理单元 (GPU) 以使像素飞行。另一方面，Web 应用程序在浏览器的上下文中运行，这使软件可以完成大部分（如果不是全部）渲染，从而减少了转换的动力。但是 Web 一直在迎头赶上，现在大多数浏览器供应商都通过特定的 CSS 规则提供图形硬件加速。

使用`-webkit-transform: translate3d(0,0,0);`将让 GPU 为 CSS 过渡采取行动，使它们更平滑（更高的 FPS）。

**Note:** `translate3d(0,0,0)` does nothing in terms of what you see. It moves the object by 0px in x,y and z axis. It's only a technique to force the hardware acceleration.

Good read here: [http://www.smashingmagazine.com/2012/06/21/play-with-hardware-accelerated-css/](http://www.smashingmagazine.com/2012/06/21/play-with-hardware-accelerated-css/)

* * *

## 回答 #4

> 赞同：7
> 
> 时间：2014-05-09T14:32:15.903

我可以证明`-webkit-transform: translate3d(0, 0, 0);`会弄乱新`position: -webkit-sticky;`财产的事实。使用我正在处理的左抽屉导航模式，我想要的带有 transform 属性的硬件加速与我的顶部导航栏的固定位置相混淆。我关闭了变换，定位工作正常。

幸运的是，我似乎已经启用了硬件加速，因为我`-webkit-font-smoothing: antialiased`启用了 html 元素。我在 iOS7 和 Android 中测试了这种行为。

* * *

## 回答 #5

> 赞同：5
> 
> 时间：2013-09-10T20:51:21.177

在移动设备上将所有内容发送到 GPU 会导致内存过载并使应用程序崩溃。我在 Cordova 的一个 iPad 应用程序上遇到了这个问题。最好只将所需的项目发送到 GPU，即您专门移动的 div。

更好的是，使用 3d~~过渡~~变换来制作像 translateX(50px) 这样的动画，而不是 left:50px；

# iphone - NSCache 不起作用

> ID：10814182
> 
> 赞同：0
> 
> 时间：2012-05-30T10:08:15.387
> 
> 标签：iphone, objective-c, ios, xcode, nscache

我正在编写一个需要在缓存中存储一​​些图像的应用程序。我正在尝试用 NSCache 来做，代码似乎很好，但不要将图像保存在缓存中。我有这个代码：

缓存是全局的，在 .h 中声明： `NSCache *cache;`

```
-(UIImage *)buscarEnCache:(UsersController *)auxiliarStruct{
    UIImage *image;
    [[cache alloc] init];

    NSLog(@"cache: %i", [cache countLimit]);
    if ([cache countLimit] > 0) { //if [cache countLimit]>0, it means that cache isn't empty and this is executed
        if ([cache objectForKey:auxiliarStruct.thumb]){    
            image = [cache objectForKey:auxiliarStruct.thumb];
        }else{ //IF isnt't cached, is saved
            NSString *imageURLString = [NSString stringWithFormat:@"http://mydomain.com/%@",auxiliarStruct.thumb];
            NSURL *imageURL = [NSURL URLWithString:imageURLString];
            NSData * imageData = [NSData dataWithContentsOfURL:imageURL];
            image = [UIImage imageWithData:imageData];
            [cache setObject:image forKey:auxiliarStruct.thumb];
        }        
    }else{ //This if is executed when cache is empty. IS ALWAYS EXECUTED BECAUSE FIRST IF DOESN'T WORKS CORRECTLY
        NSString *imageURLString = [NSString stringWithFormat:@"http://mydomain.com/%@",auxiliarStruct.thumb];
        NSURL *imageURL = [NSURL URLWithString:imageURLString];
        NSData * imageData = [NSData dataWithContentsOfURL:imageURL];
        image = [UIImage imageWithData:imageData];
        [cache setObject:image forKey:auxiliarStruct.thumb];
    }
    return image;
} 
```

这个函数在其他函数中被调用：

```
 UIImage *image = [self buscarEnCache:auxiliarStruct]; 
```

这是有效的，因为图像显示在屏幕上但没有保存在缓存中，我认为失败的行是：

`[cache setObject:image forKey:auxiliarStruct.thumb]; //auxiliarStruct.thumb is the name of the image`

有人知道为什么缓存不起作用吗？谢谢！！

ps：对不起我的英语，我知道这很糟糕

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-30T10:27:49.293

每次`buscarEnCache:`调用该方法时，都会使用以下行创建一个新的缓存对象：

```
[[cache alloc] init]; 
```

因此，旧缓存刚刚泄漏，不再可用。

将 放在`cache = [[NSCache alloc] init];`类的 init 方法中。

* * *

无需检查 countLimit。

```
-(UIImage *)buscarEnCache:(UsersController *)auxiliarStruct{
    UIImage *image = [cache objectForKey:auxiliarStruct.thumb];

    if (!image) {    
        NSString *imageURLString = [NSString stringWithFormat:@"http://mydomain.com/%@",auxiliarStruct.thumb];
        NSURL *imageURL = [NSURL URLWithString:imageURLString];
        NSData * imageData = [NSData dataWithContentsOfURL:imageURL];
        image = [UIImage imageWithData:imageData];
        [cache setObject:image forKey:auxiliarStruct.thumb];
    }

    return image;
} 
```

您可能希望将图像的获取放在在另一个线程中运行的方法中并返回某种占位符图像。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-30T10:30:07.643

除了@rckoenes 提供的答案之外，您无论如何都没有正确分配缓存实例；它应该是：

```
cache = [[NSCache alloc] init]; 
```

应该将哪个移到您的`init`方法中。

# xml - 从 XML 节点中提取 XML 文档

> ID：10814197
> 
> 赞同：0
> 
> 时间：2012-05-30T10:09:12.947
> 
> 标签：xml, xslt

我收到一个 XML 文档，其中一个节点中有另一个 XML 文档。像这样的例子：

```
<?xml version="1.0" encoding="UTF-8"?>
<root>
    <doc>&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;&lt;root&gt;&lt;content&gt;&lt;/content&gt;&lt;/root&gt;</doc>
</root> 
```

到目前为止，我一直在将标签的值读取到一个字符串，然后将其加载到另一个 XML 文档中。

现在的问题是我遇到了特殊字符的编码问题，如 ä,ö,ü...

有没有办法使用 xslt 来解决提取 xml 文档的任务？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-30T10:15:29.273

您是否尝试使用：

```
<xsl:value-of disable-output-escaping='yes' select="/root/doc" /> 
```

?

# sql-server-express - 如何使用 SQL express 2008 检查 SharePoint Foundation 中的可用大小

> ID：10814199
> 
> 赞同：0
> 
> 时间：2012-05-30T10:09:28.303
> 
> 标签：sql-server-express, space, sharepointfoundation2010

我安装了 SharePoint Foundation。我也安装了 SQL express 2008。我有 4 GB 的限制。一段时间后，我几乎用尽了所有可用空间。

接下来，我安装了 SQL express 2008 R2（R2 应该给我 10 GB 的数据库限制）。我想检查一切是否正常，但我不知道在哪里检查空闲尺寸。

我可以检查我花了多少钱，但我无法检查我还有多少空间。

有人可以帮忙吗。

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-31T17:46:42.767

无法直接检查数据库大小限制，但是 SQL Server Express 的版本决定了限制。SQL Server 2008 R2 Express 或更高版本最多允许 10 GB 的数据库大小，而早期版本仅允许 4 GB。

如果您仍有疑问，并想确认您的 SQL Server 2008 R2 Express 实例允许 10 GB 数据库，只需创建一个新数据库并将一堆数据插入其中。

# list - 何时在 F# 中使用序列而不是列表？

> ID：10814203
> 
> 赞同：89
> 
> 时间：2012-05-30T10:09:33.697
> 
> 标签：list, f#

我知道[列表](http://msdn.microsoft.com/en-us/library/dd233224.aspx)实际上包含值，而[序列](http://msdn.microsoft.com/en-us/library/dd233209.aspx)是`IEnumerable<T>`. 在实际的 F# 开发中，什么时候应该使用序列而不是列表？

以下是我可以看到序列何时会更好的一些原因：

*   与需要 .NET 的其他 .NET 语言或库交互时 `IEnumerable<T>`。
*   需要表示一个无限序列（在实践中可能并没有真正有用）。
*   需要惰性评估。

还有其他人吗？

* * *

## 回答 #1

> 赞同：105
> 
> 时间：2012-05-30T10:31:08.783

我认为您对何时选择的总结`Seq`非常好。以下是一些额外的要点：

*   `Seq`编写函数时默认使用，因为它们适用于任何 .NET 集合
*   如果`Seq`您需要高级功能，例如`Seq.windowed`或`Seq.pairwise`

我认为`Seq`默认选择是最好的选择，那么我什么时候选择不同的类型呢？

*   当您需要使用模式进行`List`递归处理时使用 （以实现标准库中不可用的一些功能）`head::tail`

*   `List`当您需要一个可以逐步构建的简单不可变数据结构时使用
    （例如，如果您需要在一个线程上处理列表 - 以显示一些统计信息 - 并在收到时同时继续在另一个线程上构建列表更多值，即来自网络服务）

*   当您使用`List`短列表时使用列表是最好的数据结构，如果该值通常表示一个*空列表*，因为它在这种情况下非常有效。

*   `Array`当您需要大量值类型时使用
    （数组将数据存储在平坦的内存块中，因此在这种情况下它们的内存效率更高）

*   `Array`当您需要随机访问或更高性能（和缓存局部性）时使用

* * *

## 回答 #2

> 赞同：30
> 
> 时间：2012-05-30T15:22:22.450

也更喜欢`seq`以下情况：

*   您不想同时将所有元素保存在内存中。

*   性能并不重要。

*   您需要在枚举之前和之后做一些事情，例如连接到数据库并关闭连接。

*   您没有连接（重复`Seq.append`将堆栈溢出）。

喜欢`list`什么时候：

*   元素很少。

*   你会提前和斩首很多。

对并行性既不好`seq`也不`list`好，但这并不一定意味着它们也不好。例如，您可以使用其中之一来表示一小群要并行完成的单独工作项。

* * *

## 回答 #3

> 赞同：13
> 
> 时间：2012-05-30T11:13:31.710

只是一点点：`Seq`并且`Array`比`List`并行性更好。

您有多种选择：来自 F# PowerPack 的 PSeq、[Array.Parallel](http://fsharppowerpack.codeplex.com/SourceControl/changeset/view/68767#685096)[模块](http://msdn.microsoft.com/en-us/library/ee821135.aspx)和[Async.Parallel](http://msdn.microsoft.com/en-us/library/ee353779.aspx)（异步计算）。由于其顺序性（`head::tail`组合），列表对于并行执行来说很糟糕。

* * *

## 回答 #4

> 赞同：8
> 
> 时间：2017-10-04T21:40:56.927

list 更实用，对数学更友好。当每个元素相等时，2 个列表相等。

序列不是。

```
let list1 =  [1..3]
let list2 =  [1..3]
printfn "equal lists? %b" (list1=list2)

let seq1 = seq {1..3}
let seq2 = seq {1..3}
printfn "equal seqs? %b" (seq1=seq2) 
```

[![在此处输入图像描述](../Images/a8eb66d8530419f52716d4fc4af55ed4.png)](https://i.stack.imgur.com/IvE0q.png)

* * *

## 回答 #5

> 赞同：6
> 
> 时间：2012-05-31T06:26:59.910

您应该始终`Seq`在您的公共 API 中公开。在您的内部实现中使用`List`和。`Array`

# sql - 从日志表中获取昨天的记录

> ID：10814205
> 
> 赞同：0
> 
> 时间：2012-05-30T10:09:35.520
> 
> 标签：sql, performance, sql-server-2005, date, time

设想：

具有大量记录（200 万）的带有时间戳字段的日志表。除了作为主键的 ID 之外没有索引，并且索引（或任何其他持久对象）的创建是不可能的

我想选择昨天的所有记录。

我知道有几种方法可以做到这一点，我只想对“最佳”方式提出意见，最好的意思是最快的。

这里的诀窍是时间戳的“时间”，因为如果现在是上午 11 点，我会执行以下操作：

```
where modifiedDate between dateadd(dd,-1,getdate()) and getdate() 
```

我只会从昨天的 11 点获取记录，并将从今天获取数据

它的 sql 2005 所以没有“日期”数据类型

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-30T10:19:50.310

```
SELECT *
FROM  myTable
WHERE modifiedDate >= dateadd(day,datediff(day,0,GETDATE()),-1)
    AND modifiedDate < dateadd(day,datediff(day,0,GETDATE()),0) 
```

[SQL Fiddle](http://sqlfiddle.com/#!3/229e0/2) with Demo

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-30T10:18:06.167

```
SELECT  *
FROM    mytable
WHERE   modifiedDate >= DATEADD(dd, -1, CAST(FLOOR(CAST(GETDATE() AS FLOAT)) AS DATETIME))
        AND modifiedDate < CAST(FLOOR(CAST(GETDATE() AS FLOAT)) AS DATETIME)) 
```

# javascript - 在html页面的一些热点处禁用onTouchListener

> ID：10814206
> 
> 赞同：3
> 
> 时间：2012-05-30T10:09:39.013
> 
> 标签：javascript, android, touch-event

在我的项目中，我有一个`WebView`显示 html 页面的项目。在那个 html 页面中使用 javascript 已经创建了热点，因此在点击热点时会弹出通知。在我的本机代码中已经实现[了](https://stackoverflow.com/questions/10811131/touchevent-executing-both-if-and-else-part)`onTouchListener`这样.`OnTouchListener`

任何人都可以帮我解决这个问题吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-31T17:31:25.760

现在，我可能有这个倒退......但从你的问题听起来你不想**在**`onTouchListener`热点被触摸时生效......只有在热点之外的区域被触摸时。如果相反，只需反转下面的条件。

好的。当触摸发生时，您`onTouchListener`会收到一个包含触摸详细信息的事件对象……特别是`clientX`和`clientY`，它表示触摸本身的坐标。

在这个监听器中，如果上面的触摸坐标不在您的热点中，您只会执行所需的代码。如果是我，我会将每个热点建模为一个正方形，其中`x1`, `x2`, `y1`,`y2`表示角的坐标。然后侦听器在热点上循环检查（`clientX`在和之间并且`x1`在`x2`和`clientY`之间）。如果在循环中的任何点此条件为真，则您的触摸发生在热点内，因此您的侦听器应返回 false 或以其他方式退出而不执行您的特殊代码。`y1``y2`

**编辑**：我想我误解了你的问题。也许你根本没有问 JavaScript...

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-31T19:02:05.397

你需要`onTouchListener`Android端吗？如果没有，就不要实现它，所有的触摸事件都会到达 WebView，最后到达你的网页。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-11T06:35:51.917

经过多次尝试和破解，终于找到了问题的答案。

解决方法在于调用OntouchListener函数`HTML`，无法通过 `Android`。

谢谢您的帮助

# c# - 在没有 WPF 应用程序对象的情况下全局处理 WPF 异常

> ID：10814208
> 
> 赞同：1
> 
> 时间：2012-05-30T10:09:47.673
> 
> 标签：c#, wpf, vba, exception-handling, interop

WPF 提供了一种非常方便的方法来处理意外异常：我只需将处理程序附加到[Application.DispatcherUnhandledException 事件](http://msdn.microsoft.com/en-us/library/system.windows.application.dispatcherunhandledexception.aspx)，所有未处理的异常都会这样：

```
Application.Current.DispatcherUnhandledException += (sender, e) => {
    // Show message, log exception, etc.
}; 
```

这适用于*WPF 应用程序项目*。现在，我有一个**带有 WPF windows 的库**，它是从**非 WPF 应用程序**调用的（它是一个旧版 VBA 应用程序，并且 WPF 库可以通过 COM 互操作访问）。

所以，问题是：我可以创建、打开和显示 WPF 窗口（这工作正常），但*我没有`Application`实例*。`Application.Current`是`null`。我使用 WPF 类，但我在 WPF 应用程序框架之外操作它们。

目前，此解决方案的唯一缺点是 WPF 窗口事件处理程序代码中的异常被无声地吞噬：

```
void Button_click(sender as object, e as RoutedEventArgs) {
    ...
    // some exception occurs here, but nobody hears her scream
    ...
} 
```

我不喜欢那样。我想记录它们并显示错误消息。

**我的问题**：有没有办法在这种情况下全局捕获未处理的异常，或者我是否必须在我编写的每个 WPF 窗口事件处理程序代码中添加一个通用的 try-catch-log 块？

我试过的：

*   附加到`AppDomain.CurrentDomain.UnhandledException`. 不工作。例外没有到达那里。
*   阅读 MSDN 有关 WPF 和 Win32 互操作的相关部分（[参考 1](http://msdn.microsoft.com/en-us/library/ms742474.aspx)、[参考 2](http://msdn.microsoft.com/en-us/library/ms742522.aspx)、[参考 3](http://msdn.microsoft.com/en-us/library/ms744829.aspx)）。那里没有提到例外情况。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-30T10:21:21.030

附加到`Dispatcher`：

```
Dispatcher.CurrentDispatcher.DispatcherUnhandledException += (sender, e) => { 
    // Show message, log exception, etc. 
}; 
```

如果尚不存在调度程序，则访问`CurrentDispatcher`会自动创建一个单例调度程序，该调度程序也将被 WPF 窗口使用。

# c - 如何更改通过端口的字节传输

> ID：10814216
> 
> 赞同：0
> 
> 时间：2012-05-30T10:10:28.773
> 
> 标签：c, serial-port, dos

如何更改通过端口的字节传输？

*   是：打断。
*   需要：根据民意调查。                                        

插件-> [http://pastie.org/3994352](http://pastie.org/3994352)

客户：

```
#include <stdio.h>
#include <conio.h>
#include <dos.h>
#include "comm.h"  // Connect module

void main(void)
{
   char cmd[128];

   /* Set the COM port */
   printf("Adjustable com-port ...\n");
   OpenSerial(COM_1, SER_BAUD_9600, SER_STOP_2 | SER_BITS_8 | SER_PARITY_EVEN);

   printf("Submitting a request for a connection ...\n");
   WriteSer(0xFF);

   while (1)
   {
      if (kbhit())
      {
         int c = getche();
         if (c == 13) putch(10);
         WriteSer(c);
      }

      if (DataReadyCount())
      {
         int c = ReadQueue();
         if (c == 0xFF) break;

         putch(c);
      }
   }

   printf("Ending a connection ...\n");
   CloseSerial();
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-30T10:42:18.243

我在网上找到了一个可能有价值的示例，至少在展示轮询与中断驱动方法方面。请注意，中断方法需要调用`setvect`, `outportb`，保存旧中断并恢复它等。

接下来不要问 TSR。:)

```
// http://ragestorm.net
// serial communications example
// interrupt driven/polled method
#include <dos.h>
#include <conio.h>
#include <stdio.h>

// serial port base addresses:
#define COM1 (0x3f8)
#define COM2 (0x2f8)

// stack size for interrupt
#define STACK_SIZE 1024

// serial ports registers:

// receive buffer
#define RBR (0x0)
// transmitter hold
#define THR (0x0)
// interrupt enable
#define IER (0x1)
// interrupt identification
#define IIR (0x2)
// fifo control
#define FCR (0x2)
// line control
#define LCR (0x3)
// modem control
#define MCR (0x4)
// line status
#define LSR (0x5)
// modem status
#define MSR (0x6)
// scratch-pad
#define SPR (0x7)

// divisor lsb byte
#define DIVLSB (0x0)
// divisor msb byte
#define DIVMSB (0x1)

// possible irqs for com ports
int com_irqs[4] = {4, 3, 4, 3};

// the com port addr being used
int used_com_addr = 0;

// the irq being used if interrupt driven
int used_com_irq = 0;

// interrupt driven or polling method?
int intr_used = 0;

// built in stack for interrupt usage
unsigned char recv_stack[STACK_SIZE];
unsigned char* next_char = recv_stack;

// old handler address
void interrupt (*old_handler)(...) = NULL;
void interrupt new_handler(...);

// get com address from bios
unsigned short get_com_addr(int com_no)
{
 if ((com_no <= 0) || (com_no >= 5)) return -1;

 // bios seg addr
 unsigned char* biosaddr = (unsigned char *)0x400;

 // set irq according to com number
 used_com_irq = com_irqs[com_no - 1];

 // retreive addresses bios
 return *(unsigned short*)&biosaddr[(com_no -  1) << 1];
}

// detect the uart type of the used com prot addr
// this is mainly to know if fifo is available.
// 0: no uart found, 1: 8250, 2: 16450 or 8250(with spr), 3: 16550, 4: 16550A
int detect_uart_type()
{
 char old_data = 0;

 // check UART presentation by checking loopback mode
 old_data = inportb(used_com_addr + MCR);
 outportb(used_com_addr + MCR, 0x10);
 if ((inportb(used_com_addr + MSR) & 0xf0)) return 0;
 outportb(used_com_addr + MCR, 0x1f);
 if ((inportb(used_com_addr + MSR) & 0xf0) != 0xf0) return 0;
 outportb(used_com_addr + MCR, old_data);

 // write values to scratch pad and readback
 old_data = inportb(used_com_addr + SPR);
 outportb(used_com_addr + SPR, 0x55);
 if (inportb(used_com_addr + SPR) != 0x55) return 1;
 outportb(used_com_addr + SPR, 0xAA);
 if (inportb(used_com_addr + SPR) != 0xAA) return 1;
 outportb(used_com_addr + SPR, old_data);

 // enable fifo and determine version by part identification
 outportb(used_com_addr + FCR, 1);
 old_data = inportb(used_com_addr + FCR);
 outportb(used_com_addr + FCR, 0);

 if ((~old_data & 0x80)) return 2; // 16450
 if ((~old_data & 0x40)) return 3; // 16550
 return 4; // 16550a +
}

// inits the serial com port with a specific baud rate,
// using interrupt or polling method.
void init_com_port(int com_no, long baudrate, int intr = 0)
{
 // calculate divisor relative to the baudrate
 short divisor = (long)115200 / baudrate;

 used_com_addr = get_com_addr(com_no);

 if (used_com_addr == 0) {

    printf("no valid com port!\n");
    return ;
 }
 printf("serial com port addr 0x%x", used_com_addr);
 if (intr)
    printf(" [irq %d, ", used_com_irq);
 else printf("[");

 int uart_type = detect_uart_type();
 switch(uart_type) {
    //case 0: break; // port must be found already by bios.
    case 1: printf("8250"); break;
    case 2: printf("16450"); break;
    case 3: printf("16550"); break;
    case 4: printf("16550a"); break;
 }

 printf("] is initialized!\n");

 intr_used = intr;

 disable();

 // turn off interrupts
 outportb(used_com_addr + 1, 0);

 // set dlab bit, so we can update the divisor
 outportb(used_com_addr + LCR, 0x80);

 // set divisor lsb
 outportb(used_com_addr + DIVLSB, divisor & 0xff);
 // set msb
 outportb(used_com_addr + DIVMSB, (divisor >> 8) & 0xff);

 // frame: 8 data bits, no parity and 1 stop bit
 outportb(used_com_addr + LCR, 0x3);

 // set RTS | DTR | OUT2(if intr) to inform remote system that we are ready
 outportb(used_com_addr + MCR, 0x3 | ((intr == 1) << 3));

 // support interrupt?
 if (intr) {

    // save old serial port interrupt handler address
    old_handler = getvect(8 + used_com_irq);
    setvect(8 + used_com_irq, new_handler);

    // enable serial port irq at pic
    outportb(0x21, inportb(0x21) & ~(1 << used_com_irq));

    // let the interrupt be triggered upon data arrival
    outportb(used_com_addr + IER, 1);

 } else {
    // no interrupt should be triggered
    outportb(used_com_addr + IER, 0);
 }

 // does the uart support fifo?
 if (uart_type == 4) {
    // set fifo buffer of 14 bytes, clear receive and transmit fifo's
    outportb(used_com_addr + FCR, 0xc7);
 }

 // clear delta bits
 inportb(used_com_addr + LSR);

 // clear incoming byte
 inportb(used_com_addr + RBR);

 enable();
}

// the serial port interrupt handler
// called upon received data only
// saves data in a stack
void interrupt new_handler(...)
{
 unsigned char status = 0;
 disable();

 // read iir and msr to acknowledge the uart
 inportb(used_com_addr + IIR);
 inportb(used_com_addr + MSR);

 // as long as data is arriving, put it in the stack
 do {
    // read status register
    status = inportb(used_com_addr + LSR) & 0x1;

    if (status & 1) {
     // read data from com port to the stack
     *next_char++ = inportb(used_com_addr + RBR);
     // overlap offset in case the stack is full
     next_char = ((next_char - recv_stack) % STACK_SIZE) + recv_stack;
    }
 }while (status & 1);

 enable();
 // let the pic know we are done
 outportb(0xa0, 0x20);
 outportb(0x20, 0x20);
}

// send a byte to the initialized com port
void send_byte(unsigned char ch)
{
 // make sure the connection is alive
 if (inportb(used_com_addr + MSR) & 0x80 == 0) return;

 // make sure the transmit hold register is empty
 while (inportb(used_com_addr + LSR) & 0x20 == 0) ;

 // send the character
 outportb(used_com_addr + THR, ch);
}

// receive a byte from the initialized com port
unsigned char recv_byte(int* is_read)
{
 int i;

 *is_read = 0;
 if (intr_used)
    if (next_char > recv_stack)
    {
     *is_read = 1;
     return *--next_char;
    } else return 0;

 // is data set ready high?
 for (i = 5; i > 0; i--)
    if (inportb(used_com_addr + MSR) & 0x20) break;
 if (!i) return -1;

 // is there anything to read?
 for (i = 5; i > 0; i--)
    if (inportb(used_com_addr + LSR) & 0x1) break;
 if (!i) return -2;

 *is_read = 1;
 return inportb(used_com_addr + RBR);
}

// enter loop-mode for debugging and testing.
void enter_loop_mode()
{
 outportb(used_com_addr + MCR, inportb(used_com_addr + MCR) | 0x10);
}

// exit a loop mode, change to transimtter/receiver mode
void exit_loop_mode()
{
 outportb(used_com_addr + MCR, inportb(used_com_addr + MCR) & ~0x10);
}

// shut down serial port connection
void shutdown_com_port()
{
 disable();

 if (intr_used) {

    // set the old handler
    setvect(8 + used_com_irq, old_handler);

    // disable used serial port interrupt at pic
    outportb(0x21, inportb(0x21) | (1 << used_com_irq));
 }

 // disable serial port interrupt
 outportb(used_com_addr + IER, 0);

 // disable interrupt, RTS and DTR
 outportb(used_com_addr + MCR, 0);

 outportb(used_com_addr + FCR, 0);

 enable();
}

int main()
{
 clrscr();
 init_com_port(1, 9600, 1);

 for(;;) {
    if (kbhit()) {
     int c = getch();
     if (c == 27) break;
     printf("%c", c);
     send_byte(c);
    }
    int b = 0;
    unsigned char c = recv_byte(&b);
    if (b) printf("%c", c);
 }

 shutdown_com_port();
 return 1;
} 
```

# java - Java：将 WSDL 解析为接口

> ID：10814217
> 
> 赞同：-1
> 
> 时间：2012-05-30T10:10:29.233
> 
> 标签：java, wsdl

我正在处理的项目要求我接收一个 WSDL，对其进行解析，然后输出一个适当的接口。我该怎么做呢？我假设可以读取 WSDL 文件，获取适当的信息，然后以编程方式将其写入 .java 文件。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-30T10:11:41.483

尝试使用[wsimport](http://docs.oracle.com/javase/6/docs/technotes/tools/share/wsimport.html)生成您的类。

# css - 我在图像顶部有一个 p-tag。为什么我不能设置 p-tag 的背景颜色？

> ID：10814218
> 
> 赞同：0
> 
> 时间：2012-05-30T10:10:29.487
> 
> 标签：css

看起来好像 p-tag 的“背景”在图像后面。例如，请参见此处图像顶部带有内容 Projektnamn 的 t-tag：

[http://dev.nuagency.se/illustrators/beata-boucht/](http://dev.nuagency.se/illustrators/beata-boucht/)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-30T10:13:08.860

给`position:relative`你的`P`标签。像这样写：

```
.mygallery p {
    background: none repeat scroll 0 0 white;
    color: black;
    margin: -50px 0 0;
    padding-left: 10px;
    position: relative;
    text-transform: capitalize;
} 
```

# java - JSF 两个必需的 h:inputText（异或）

> ID：10814224
> 
> 赞同：1
> 
> 时间：2012-05-30T10:10:48.523
> 
> 标签：java, jsf

我希望需要 2 个 imputText：如果重视电子邮件，则不需要手机，反之亦然。我能怎么做？

谢谢。

```
 <h:inputText required="true" id="usEmail" size="20"
                    value="#{rwUser.usEmail}" />

                <h:message for="usEmail" style="color:red" />

                    <h:outputText value="#{msg.mobilephone}" styleClass="textMessage" />

                <h:inputText id="usMobilephone" size="20"
                    value="#{rwUser.usMobilephone}" />

                <h:message for="usMobilephone" style="color:red" /> 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-05-30T13:53:23.040

几种方式。

*   将组件绑定`UIInput`到视图，并在第一个的required属性中，检查第二个的提交值，在第二个的required属性中，检查第一个的值（组件即按照它们出现的顺序处理看法）。

    ```
    <h:inputText binding="#{usEmail}" ... required="#{empty usMobilePhone.submittedValue}" />    
    <h:inputText binding="#{usMobilePhone}" ... required="#{empty usEmail.value}" /> 
    ```

*   检查请求参数映射中是否存在提交的值。

    ```
    <h:inputText binding="#{usEmail}" ... required="#{empty param[usMobilePhone.clientId]}" />    
    <h:inputText binding="#{usMobilePhone}" ... required="#{empty param[usEmail.clientId]}" /> 
    ```

    或者使用硬编码的客户端 ID：

    ```
    <h:form id="form">
        <h:inputText id="usEmail" ... required="#{empty param['form:usMobilePhone']}" />    
        <h:inputText id="usMobilePhone" ... required="#{empty param['form:usEmail']}" /> 
    ```

*   使用[OmniFaces](http://omnifaces.org) [`<o:validateOneOrMore>`](http://showcase.omnifaces.org/validators/validateOneOrMore)。

    ```
    <h:inputText id="usEmail" ... />    
    <h:inputText id="usMobilePhone" ... />
    <o:validateOneOrMore components="usEmail usMobilePhone" showMessageFor="@all" /> 
    ```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-30T13:24:21.993

您还可以使用`binding`获取从一个组件到另一个组件的引用：

```
<h:inputText required="true" id="usEmail" binding="usEmail" 
    size="20" value="#{rwUser.usEmail}" required="#{empty usMobilePhone.value}" />    

<h:inputText id="usMobilephone" size="20" value="#{rwUser.usMobilephone}" 
    binding="usMobilePhone" required="#{empty usEmail.value}"/> 
```

注意是`usEmail.value`指`UIComponent`inputText对应的对象，而不是托管bean的值。

如果这不起作用，由于 JSF 生命周期，您可能需要替换`value`为`submittedValue`-`UIComponent.value`直到验证成功后才会设置，并且 `submittedValue`实际上是随表单提交发布的。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-30T12:30:48.987

我认为`<o:validateOneOrMore>`OmniFaces 是您所需要的。[另请`<o:validateOneOrMore>`](http://showcase.omnifaces.org/validators/validateOneOrMore)参阅[陈列柜](http://showcase.omnifaces.org/validators/validateOneOrMore)。

# php - 使用 AJAX 和 jQuery 自动选择下拉列表

> ID：10814228
> 
> 赞同：0
> 
> 时间：2012-05-30T10:11:02.947
> 
> 标签：php, ajax, jquery

我有 3 个下拉列表。1) 类型 2) 持续时间 3) 等级

```
<select name="passenger_type_of_pass" class="pass">
    <option value="">- - Type - -</option>
    <?
       $result_type_of_pass = myquery($type_of_pass);                                           
       while($row = mysql_fetch_array($result_type_of_pass))
       {
          echo "<option value=\"" . $row['product_name'] . "\">" . $row['product_name'] . "</option>";  
       }
    ?>
</select>

<select name="passenger_duration" class="duration">
    <option>--Duration--</option>
</select>

<select name="passenger_class" class="class">
    <option>--Class--</option>
</select> 
```

使用 jQuery，我让它们更新，因为每个选择框中都有变化。

```
 $(".pass").change(function()
        {
            var pass=$(this).val();
            var dataString = 'pass='+ pass;

            $.ajax
            ({
                type: "GET",
                url: "duration.php",
                data: dataString,
                cache: false,
                success: function(html)
                {
                    $(".duration").html(html);
                }
            });

        });

        $(".duration").change(function()
        {
            var duration=$(this).val();
            var pass=$(".pass").val();
            var dataString = 'pass='+ pass + '&duration=' + duration;

            $.ajax
            ({
                type: "GET",
                url: "class.php",
                data: dataString,
                cache: false,
                success: function(html)
                {
                    $(".class").html(html);
                }
            });

        }); 
```

我想以这样一种方式更改此代码，即一旦我选择“type_of_pass”，“持续时间”下拉列表就会被填充，并且顶部选项也会被选中！使用这个自动选择的持续时间，用于搜索类的 jQuery 将运行并填充选择的顶部选项。

目前使用我的代码，我必须更改持续时间以填充类。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-30T10:12:38.440

在填充它们后触发更改事件

```
$('.duration').change(): 
```

**代码：**

```
$.ajax({
    type: "GET",
    url: "duration.php",
    data: dataString,
    cache: false,
    success: function(html) {
        $(".duration").html(html);
        $(".duration").change(); // here to trigger a change
    }
}); 
```

要设置您可以执行的任何特定选项

```
$('.duration option:eq(1)').prop('selected', true); // here I set the second option 
```

**[演示](http://jsfiddle.net/feWaY/1/)**

# c# - 在会话中存储鼠标坐标并添加到 xml 字符串（C# .NET MVC）

> ID：10814234
> 
> 赞同：1
> 
> 时间：2012-05-30T10:11:22.237
> 
> 标签：c#, xml, session

基本上我的目标是使用 JQuery 将 x & y 鼠标坐标回传到我的控制器，其中 2 个值被添加到数组/列表中，然后添加到会话中。

在构建一个包含每个坐标的 XML 字符串之前，我想遍历一系列 60 次单击（以及随后回发到控制器）。

类似这样的东西：

```
<xml>
<click1>
 <xpos>45</xpos>
 <ypos>55</ypos>
</click1>
<click2>
 <xpos>45</xpos>
 <ypos>55</ypos>
</click2>
</xml> 
```

我不确定在每次回发后如何最好地存储单个鼠标点击，我认为会话和多维数组/列表可能对此有好处？对于如何将会话转换回列表并根据需要组装 XML，我也有点困惑。

谁能指出我正确的方向？

非常感谢！

赛克斯。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-15T14:25:11.240

我通过创建一个类型的 Dictionary 来解决这个问题，其中 MouseCoordinates 指的是一个接受 xposition 和 yposition 的 2 个字符串值的类。

然后，我将 Dictionary 放入一个会话中，当我需要为其添加新值时，将其重新转换为 Dict。

最后，在检索所有值的点击周期结束时，我遍历了字典。

我希望这段代码可以帮助某人：

```
var coords = new Dictionary<int, MouseCoordinates>();

HttpContext.Session.Add("coords", coords);

// Accessing Dictionary From Session
var coords = (Dictionary<int, MouseCoordinates>)HttpContext.Session["coords"];

// Adding Values using a integer stage that's posted back to the controller
coords.Add(currentStage, new MouseCoordinates { xposition = xpos, yposition = ypos });

// Looping through the session at the end of the cycle
            foreach (var ords in coords)
            {
                var qnode = ords.Key;
                var xvalue = ords.Value.xposition;
                var yvalue = ords.Value.yposition;
            } 
```

# spring - 正确使用@SessionAttribute 注解

> ID：10814239
> 
> 赞同：2
> 
> 时间：2012-05-30T10:11:46.223
> 
> 标签：spring, http, session

我很难理解 @SessionAttribute 注释的正确用法。

我想知道@SessionAttribute 是用于存储用户身份验证对象还是用于存储仅存在于会话中的表单对象。

我想在调用处理程序之前检查用户是否已登录。

我真的很混淆这三个类对象。会话范围 bean @SessionAttribute HttpSession

请给出一个正确的例子来说明@SessionAttribute 的用法和每一个的优点/缺点

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-30T13:24:17.837

@SessionAttribute 用于在会话中临时存储模型对象。示例包括存储一组搜索条件或存储多页向导的数据。

如果您在检查身份验证状态之后，虽然理论上您可能会使用 @SessionAttribute 破解某些东西，但使用 Spring Security 会好得多。如果您没有适当的安全解决方案，还有许多其他身份验证和授权问题您没有解决。

# r - 使用形状时缺少 geom_point 的绘图符号

> ID：10814241
> 
> 赞同：3
> 
> 时间：2012-05-30T10:11:51.593
> 
> 标签：r, ggplot2

我必须显然遗漏了一些简单的东西，或者这是一个小错误。当使用 shape=factor 时，geom_point () 总是缺少绘图符号。使用 color=factor 时不会发生这种情况。感谢你的帮助。这是一个测试代码。

```
test <- data.frame(let=sample(LETTERS,7), id=c(1:7), y=c(id*7))

ggplot(data=test, aes(x=id, y=y))+
geom_point(aes(shape=let), size=6) 
```

“请注意这里的缺失点（仅 6 出 7），因为其中一个符号缺失，这通常是按字母顺序排列的最后一个因素”

```
ggplot(data=test, aes(x=id, y=y))+
geom_point(aes(color=let), size=6) 
```

“这里我们看到 7 个不同颜色的点”

谢谢，VJ

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-30T10:22:28.517

那是因为`scales::shape_pal`定义了最多 6 个值；尝试添加`scale_shape_manual(values=1:7)`

# android - AChart 引擎日程表背景自定义

> ID：10814242
> 
> 赞同：1
> 
> 时间：2012-05-30T10:11:52.060
> 
> 标签：android, achartengine

我想知道是否可以在 Achart Engine 中自定义拨号图表的背景？
我想要一个像车速表这样的背景，必须有一些指示颜色，比如红色、黄色和绿色，如果我能确定每个指示必须从哪个值开始和结束，那就更好了。
我们可以从任何地方获得任何示例代码吗？
高级感谢所有建议，答案，示例代码

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-29T08:52:27.913

你不能用 AChartEngine 做到这一点。但是您可以从 SVN 签出代码并按您需要的方式对其进行自定义。

# oracle - 插入数据忽略数据库上的约束

> ID：10814243
> 
> 赞同：2
> 
> 时间：2012-05-30T10:11:54.820
> 
> 标签：oracle, oracle11g, validation, nullable

我的应用程序有一个复杂的数据模型，其中多个表具有复杂的关系。UI 负责验证用户输入。但是，我有一个要求，用户希望暂时保存他的数据（有点像草稿），以便他可以继续对其进行更改一段时间，直到他满意为止。在这种情况下，验证不需要在那里，因为他可能不会立即输入一些强制性属性。虽然在这种情况下我可以轻松关闭验证，但数据库级别的 NON NULL 约束和参照完整性不允许我这样做。

做这种事情的其他合理方法是什么？由于涉及的表格太多，我不希望复制它们以让用户在一些临时表格中插入数据，直到最终确定他的草稿。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-30T10:28:34.673

看看可延迟的约束：

```
create table daa_delete_me (col1 number not null deferrable);

alter session set constraints = deferred;

insert into daa_delete_me values (null); -- succeeds

commit; -- fails

insert into daa_delete_me values (null);

update daa_delete_me set col1 = 1;

commit; -- succeeds 
```

# ios - Facebook iOS 集成登录窗口

> ID：10814245
> 
> 赞同：0
> 
> 时间：2012-05-30T10:12:07.760
> 
> 标签：ios, facebook

我想把 iOS Facebook 集成。所以我正在使用新的 Facebook SDK，所以在这个链接提供的这个 Facebook 教程文档中，如下所示。

[http://developers.facebook.com/docs/mobile/ios/build/](http://developers.facebook.com/docs/mobile/ios/build/)

足够了，否则我们必须在 git hub 中添加诸如 HAckbook 示例之类的功能。我们必须在哪个视图中编码。

我按照 facebook 教程 ios 发现错误日志如下。

> 2012-05-30 16:15:09.573 ComleX1App[6121:12203]-[ComleX1AppAppDelegate_iPhone logoutButtonClicked]：无法识别的选择器发送到实例 0xc559ba0
> 
> 2012-05-30 16:15:09.574 ComleX1App [6121:12203] ***由于未捕获的异常“NSInvalidArgumentException”而终止应用程序，原因：“-[ComleX1AppAppDelegate_iPhone logoutButtonClicked]：无法识别的选择器发送到实例 0xc559ba0”
> 
> *** First throw call stack: (0x15e3022 0x1774cd6 0x15e4cbd 0x1549ed0 0x1549cb2 0x15e4e99 0x61f14e 0x61f0e6 0x6c5ade 0x6c5fa7 0x6c5266 0x6443c0 0x6445e6 0x62adc4 0x61e634 0x1d3def5 0x15b7195 0x151bff2 0x151a8da 0x1519d84 0x1519c9b 0x1d3c7d8 0x1d3c88a 0x61c626 0x21e9 0x2165 0x1) terminate called throwing an exception(lldb)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-30T13:15:31.310

没有实际查看代码，您调用选择器的 logoutButton 似乎在它可以调用实际方法之前被释放。您可以发布一些代码以查看失败的地方吗？

# linux - 在 Linux 中使用 GCOV_PREFIX 在所需位置创建 *.gcda 文件？

> ID：10814252
> 
> 赞同：2
> 
> 时间：2012-05-30T10:12:45.083
> 
> 标签：linux, gcov

我在使用 GCOV_PREFIX 环境变量时遇到问题。

我在构建机器上使用的编译器版本 - gcc 版本 3.4.6 20060404 (Red Hat 3.4.6-3)

我在构建机器上使用“fprofile-arcs –ftest-coverage”编译我的源文件（*.c），它在以下位置

/A B C D

/a/b 安装在以下目录“/tmp/test/a/b”中的测试机器上。在测试机器上，当我执行可执行文件时，需要使用相同的目录结构“a/b/c/d”来创建 *.gcda 文件。由于它不可用，因此我收到此类错误“profiling:/a/b/c/d/xyz.gcda:Cannot open”。

但我不想在我的测试机中创建相同的目录结构。

我想在我的测试机器中创建一个目录（/tmp/gcovfiles），并且我希望在 /tmp/gcovfiles 位置创建 gcda 文件。

我尝试使用环境变量 GCOV_PREFIX 和 GCOV_PREFIX_STRIP。但它没有任何效果。可能是我没有正确使用它。

能否请你帮忙？

# magento-1.5 - 具有从集合中检索性别值的 Magento 登录模型电子邮件 ID

> ID：10814272
> 
> 赞同：0
> 
> 时间：2012-05-30T10:14:11.237
> 
> 标签：magento-1.5

我是 magento 的新手。如何通过传递登录电子邮件 ID 加载客户集合以检索性别值？

谢谢。

Praksah

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-30T13:27:38.210

Afaik，Magento 没有明确的客户电子邮件 ID，只有电子邮件地址。

要检索给定电子邮件地址的性别，您可以使用：

```
$oCustomer = Mage::getModel('customer/customer')
    ->setWebsiteId(1)
    ->loadByEmail('example@example.com');

var_dump($oCustomer->getGender()); 
```

`setWebsiteId(1)`只有在网站范围内运行时才需要该部分。

# jquery - jquery mousemove 无法正常工作

> ID：10814281
> 
> 赞同：1
> 
> 时间：2012-05-30T10:14:55.950
> 
> 标签：jquery, event-handling, mousemove

我必须做一些事情，比如当用户移动鼠标时会出现一些东西，两秒钟后它会隐藏起来**（比如[flickr slideshow](http://www.flickr.com/photos/eddielaw/sets/72157603487858748/show/)）**。我将 jquery`.mousemove`事件与`slideDown and slideUp`. 在调用时`slides functions`，我还传递了一个回调函数，该函数在 2 秒后将其隐藏。

**问题**：在第一次鼠标移动时它会出现，然后在 2 秒后隐藏。但是在鼠标移动之后，它在 1000 次中只出现一次。为什么？

**jQuery代码**：

```
var prevDate = 0; // keep this as a global variable 

$('#slides').mousemove(function(e) {
    var date = new Date().getTime();
    if(date - prevDate > 300){
        $('#up').slideDown('normal',function (){
            $('#up').delay(2000).slideUp('normal');
        });
        $('#down').slideDown('normal',function (){
            $('#down').delay(2000).slideUp('normal');
        });
            prevDate = date;
    }
}); 
```

slides 是一个宽度和高度为 100%`#up and #down`的 div，是我想要显示和隐藏的两个 div。

[你可以在这里](http://jsfiddle.net/knoxxs/3rZMM/2/)看到整个代码。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-30T12:40:21.917

**在看到您提供的 fickr 链接后，我终于明白了您要做什么**

* * *

您希望在鼠标移动**时同时**`mouse moves`显示顶部和底部面板并继续显示面板。然后你想**在鼠标停止移动 2 秒后将它们隐藏起来**。

 ****现在这里是解决方案：

```
$("document").ready(function(e) {
    var onmousestop = function() {
        $('#up').slideUp('normal');
        $('#down').slideUp('normal');
    };    
    var timer;    
    $('#slides').mousemove(function(e) {
        $('#up').slideDown('normal');
        $('#down').slideDown('normal');
        clearTimeout(timer);
        timer = setTimeout(onmousestop, 2000);
    });
});​ 
```

还可以在[http://jsfiddle.net/3rZMM/9/中找到解决方案](http://jsfiddle.net/3rZMM/9/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-30T10:42:31.587

你能捕捉悬停事件而不是鼠标移动吗？

```
//divs show up on mouse move
$('#slides').hover(function(e) {
    $('#up').slideDown('fast',function (){
        $('#up').delay(1000).slideUp('fast');
    });
    $('#down').slideDown('fast',function (){
        $('#down').delay(1000).slideUp('fast');
    });
    }, function(e){});
});​ 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-30T12:39:04.477

尝试`.mouseover()`改用。看看更新的小提琴 - [http://jsfiddle.net/3rZMM/6/](http://jsfiddle.net/3rZMM/6/)****

# c# - 为什么连接空字符串有效但调用“null.ToString()”无效？

> ID：10814282
> 
> 赞同：133
> 
> 时间：2012-05-30T10:15:12.387
> 
> 标签：c#, .net, string, null

这是有效的 C# 代码

```
var bob = "abc" + null + null + null + "123";  // abc123 
```

这不是有效的 C# 代码

```
var wtf = null.ToString(); // compiler error 
```

为什么第一个陈述有效？

* * *

## 回答 #1

> 赞同：166
> 
> 时间：2012-05-30T10:19:02.970

**第一个工作的原因：**

来自[MSDN](https://docs.microsoft.com/en-us/dotnet/csharp/how-to/concatenate-multiple-strings)：

> 在字符串连接操作中，C# 编译器将空字符串视为空字符串，但它不会转换原始空字符串的值。

有关[+ 二元运算符](https://docs.microsoft.com/en-us/dotnet/csharp/language-reference/operators/addition-operator#string-concatenation)的更多信息：

> 当一个或两个操作数都是字符串类型时，二元 + 运算符执行字符串连接。
> 
> 如果字符串连接的操作数为 null，则替换为空字符串。`ToString`否则，通过调用从类型 object 继承的虚拟方法，将任何非字符串参数转换为其字符串表示形式。
> 
> 如果`ToString`返回`null`，则替换为空字符串。

**第二个错误的原因是：**

[null（C# 参考）](https://docs.microsoft.com/en-us/dotnet/csharp/language-reference/keywords/null) - null 关键字是表示空引用的文字，它不引用任何对象。null 是引用类型变量的默认值。

* * *

## 回答 #2

> 赞同：109
> 
> 时间：2012-05-30T10:17:32.157

因为`+`C# 中的运算符在内部转换为`String.Concat`，这是一个静态方法。`null`而这个方法恰好像一个空字符串一样对待。如果您查看`String.Concat`Reflector 中的源代码，您会看到：

```
// while looping through the parameters
strArray[i] = (str == null) ? Empty : str;
// then concatenate that string array 
```

（MSDN 也提到它：http: [//msdn.microsoft.com/en-us/library/k9c94ey1.aspx](http://msdn.microsoft.com/en-us/library/k9c94ey1.aspx)）

另一方面，`ToString()`是一个实例方法，你不能调用它`null`（应该使用什么类型`null`？）。

* * *

## 回答 #3

> 赞同：30
> 
> 时间：2012-05-30T10:19:43.743

第**一个样本**将被翻译成：

```
var bob = String.Concat("abc123", null, null, null, "abs123"); 
```

该`Concat`方法检查输入并将 null 转换为空字符串

第二**个样本**将被翻译成：

```
var wtf = ((object)null).ToString(); 
```

所以`null`这里会产生一个引用异常

* * *

## 回答 #4

> 赞同：11
> 
> 时间：2012-05-30T10:28:46.477

您的代码的第一部分就像在`String.Concat`,

这是添加字符串时 C# 编译器调用的内容。"`abc" + null`被翻译成`String.Concat("abc", null)`,

在内部，该方法替换`null`为`String.Empty`. 所以，这就是为什么你的第一部分代码不会抛出任何异常。就像

```
var bob = "abc" + string.Empty + string.Empty + string.Empty + "123";  //abc123 
```

并且在代码的第二部分中抛出异常，因为“null”不是对象，**null 关键字是表示空引用的文字，**它不引用任何对象。null 是引用类型变量的默认值。

' `ToString()`' 是一种可以由对象实例调用但不能由任何文字调用的方法。

* * *

## 回答 #5

> 赞同：9
> 
> 时间：2012-05-30T14:39:59.890

在 .net 之前的 COM 框架中，任何接收到字符串的例程都必须在处理完字符串后释放它。因为在例程中传入和传出空字符串是很常见的，并且因为尝试“释放”空指针被定义为合法的无操作操作，Microsoft 决定让空字符串指针表示空字符串。

为了与 COM 兼容，.net 中的许多例程会将空对象解释为空字符串的合法表示。通过对 .net 及其语言的一些细微更改（最显着的是允许实例成员指示“不作为虚拟调用”），Microsoft 可以使`null`声明类型 String 的对象表现得更像空字符串。如果微软这样做了，它也必须做出`Nullable<T>`一些不同的工作（以便允许`Nullable<String>`--他们无论如何都应该做的事情）和/或定义一个`NullableString`几乎可以与 互换的类型`String`，但不会考虑`null`作为有效的空字符串。

实际上，在某些情况下 a`null`将被视为合法的空字符串，而在其他情况下则不会。这不是一个非常有用的情况，但程序员应该注意的情况。一般来说，如果is ，表单的表达式`stringValue.someMember`会失败，但大多数接受字符串作为参数的框架方法和运算符都会将其视为空字符串。`stringValue``null``null`

* * *

## 回答 #6

> 赞同：5
> 
> 时间：2012-05-31T12:19:23.817

`'+'`是中缀运算符。像任何运算符一样，它实际上是在调用一个方法。你可以想象一个非中缀版本`"wow".Plus(null) == "wow"`

实施者已经决定这样的事情......

```
class String
{
  ...
  String Plus(ending)
  {
     if(ending == null) return this;
     ...
  }
} 
```

所以..你的例子变成

```
var bob = "abc".Plus(null).Plus(null).Plus(null).Plus("123");  // abc123 
```

这与

```
var bob = "abc".Plus("123");  // abc123 
```

null 在任何时候都不会成为字符串。所以`null.ToString()`没有什么不同 `null.VoteMyAnswer()`。;)

* * *

## 回答 #7

> 赞同：3
> 
> 时间：2012-05-30T10:18:21.960

我猜是因为它是一个不引用任何对象的**文字。**`ToString()`需要一个`object`.

* * *

## 回答 #8

> 赞同：3
> 
> 时间：2012-06-19T12:49:22.620

有人在这个讨论帖中说，**你不能无中生有。** （我认为这是一个很好的短语）。但是**是的 - 你可以**:-)，如以下示例所示：

```
var x = null + (string)null;     
var wtf = x.ToString(); 
```

工作正常，根本不会抛出异常。唯一的区别是您需要将其中一个空值转换为字符串 - 如果您删除**(string)**转换，则该示例仍可编译，但会引发运行时异常：“运算符 '+' 在键入“<null>”和“<null>”。

**注意**在上面的代码示例中，x 的值并不像您预期​​的那样为空，在您将其中一个操作数转换为字符串后，它实际上是一个空字符串。

* * *

另一个有趣的事实是，在 C#/.NET中，如果您考虑不同的数据类型，处理**方式`null`并不总是相同的。**例如：

```
int? x = 1;  //  string x = "1";
x = x + null + null;
Console.WriteLine((x==null) ? "<null>" : x.ToString()); 
```

关于代码片段的**第一行**`x`：如果是一个可以为空的整数变量（即`int?`）包含 value `1`，那么您将`<null>`返回结果。如果它是带有 value 的字符串（如注释中所示）`"1"`，那么您将`"1"`返回而不是`<null>`.

**注意**也很有趣：如果您使用`var x = 1;`第一行，那么您会遇到运行时错误。为什么？因为赋值会将变量`x`转换`int`为不可为空的数据类型。编译器在这里不假设`int?`，因此在`null`添加的第二行中失败。

* * *

## 回答 #9

> 赞同：2
> 
> 时间：2012-05-30T10:20:01.553

添加`null`到字符串被简单地忽略。`null`（在您的第二个示例中）不是任何对象的实例，因此它甚至没有`ToString()`方法。这只是一个字面意思。

* * *

## 回答 #10

> 赞同：1
> 
> 时间：2012-05-30T10:21:09.210

因为连接字符串`string.Empty`之间没有区别。`null`您也可以将 null 传递给`string.Format`。但是您试图在 上调用一个方法`null`，这总是会导致 a`NullReferenceException`并因此产生编译器错误。
如果出于某种原因你真的想这样做，你可以编写一个扩展方法，检查`null`然后返回`string.Empty`. 但是只有在绝对必要时才应该使用这样的扩展名（在我看来）。

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2015-10-31T07:59:25.013

一般来说：根据规范接受 null 作为参数可能有效，也可能无效，但在 null 上调用方法总是无效的。

* * *

这就是为什么 + 运算符的操作数在字符串的情况下可以为空的其他主题。这是一种 VB 的东西（对不起，伙计们），让程序员的生活更轻松，或者假设程序员不能处理空值。我完全不同意这个规范。'unknown' + 'anything' 应该仍然是 'unknown'...

# c# - 急切加载比使用 NHibernate 的延迟加载慢

> ID：10814284
> 
> 赞同：1
> 
> 时间：2012-05-30T10:15:25.753
> 
> 标签：c#, nhibernate, orm

我有一个这样的对象结构：`Box`has many `Item`has many `Ingredient`。当我调用某个方法时，必须填充所有集合才能执行任务。我认为在这种情况下急切地加载集合会更好，但在我的测试中，懒惰地加载它们的速度最小。A`Box`大约有 200 `Item`，而后者又大约有 400 `Ingredient`。

当必须填充所有集合时，为什么使用 NHibernate (3.3) 急切加载会变慢？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-30T11:34:27.537

有几个变量可以通过改变不同获取模式的工作方式来影响性能。如果您要一次性获取所有内容，请考虑返回的行数将是 nBoxes * nItemsPerBox * nIngredientsPerItem。

你的意思是单品有400种成分？如果是这样，对于一个 1 * 200 * 400 = 80000 行的盒子。在这种情况下，框信息将重复 80000 次，每个项目将重复 400 次。大量数据要传输。

如果在 NHibernate 中打开 SQL 日志记录，实际涉及的查询是什么？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-30T10:24:31.690

您是否真的确定，对于每个盒子，都会访问 items 属性，而对于每个项目，又会访问成分属性？
否则，您不会通过延迟加载检索相同数量的数据。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-30T10:19:17.087

因为它必须从一个表和一个子表中加载所有行。不幸的是，Hibernate 并不总是以最聪明的方式做到这一点。您可以使用自定义查询来更有效地加载数据。但是你必须问一个问题，你真的想要所有这些行吗？

# asp.net-mvc-3 - 清除子项删除父项

> ID：10814290
> 
> 赞同：0
> 
> 时间：2012-05-30T10:15:59.770
> 
> 标签：asp.net-mvc-3, entity-framework

我有三个相关的表。日历 1...* CalendarUser *...1 用户。当我在编辑日历视图中编辑了 CalendarUsers 后，我将 ViewModel 发布回控制器。这是我的控制器代码：

```
 [HttpPost]
    public ActionResult Edit(int id, CreateCalendarViewModel cvm)
    {
        long userId = long.Parse(User.Identity.Name);

        db.Calendars.Attach(cvm.CurrentCalendar);
        cvm.Users= DbExtensions.GetUserList(userId);

        if (ModelState.IsValid)
        {
            ////Remove the deselected users
            cvm.CurrentCalendar.CalendarUsers.Clear();

            //Get the names from the selected users
            var selectedUsers = from u in cvm.Users
                                where cvm.SelectedUsers.Contains(u.Key)
                                select new KeyValuePair<long, string>(long.Parse(u.Key), u.Value);

            foreach (var selectedUser in selectedUsers)
            {

                User user = db.Users.Find(selectedUser.Key);

                //If usr does not exist create a new
                if (user == null)
                {
                    db.Users.Add(new User
                    {
                        UserId = selectedUser.Key,
                        Name = selectedUser.Value,
                        Expires = DateTime.Now,
                        AccessToken = string.Empty
                    });
                }

                //Add the binding to the calendar
                cvm.CurrentCalendar.CalendarUsers.Add(new CalendarUser
                {
                    CalendarId = cvm.CurrentCalendar.CalendarId,
                    UserId = selectedUser.Key
                });
            }

            db.Entry(cvm.CurrentCalendar).State = EntityState.Modified;

            db.SaveChanges();

        }

        return View(cvm);
    } 
```

这是我的课程：

```
public partial class Calendar 
{ 
    public Calendar() 
    { 
        this.CalendarUsers = new HashSet<CalendarUser>(); 
    } 

    public int CalendarId { get; set; } 
    public string CalendarTitle { get; set; } 
    public string CalendarDescription { get; set; } 
    public long UserId { get; set; } 

    public virtual User User { get; set; } 
    public virtual ICollection<CalendarUser> CalendarUsers { get; set; } 
} 

public partial class CalendarUser 
{ 
    public int CalendarUserId { get; set; } 
    public int CalendarId { get; set; } 
    public long UserId { get; set; } 
    public Nullable<bool> IsAdmin { get; set; } 

    public virtual Calendar Calendar { get; set; } 
    public virtual User User { get; set; } 
} 

public partial class User 
{ 
   public User() 
   { 
       this.Calendars = new HashSet<Calendar>(); 
       this.CalendarUsers = new HashSet<CalendarUser>(); 
   } 

   public long UserId { get; set; } 
   public string Name { get; set; } 

   public virtual ICollection<Calendar> Calendars { get; set; } 
   public virtual ICollection<CalendarUser> CalendarUsers { get; set; } 
} 
```

出于某种原因，当我保存更改时，日历也被删除了？我搜索了一下，但似乎没有人有同样的问题？我做错了吗？有没有更好的方法来更新/删除相关实体？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-01T11:06:01.267

似乎我忘记在包含用户 id 的视图中包含一个隐藏字段，结果是当我更新日历时，它使用 Id = 0 保存，因此在视图中为指定用户隐藏了对象。心理提示：始终在数据库中验证实际发生的情况。

当我在视图和控制器之间来回发送对象时，我还需要研究发生了什么。有时它似乎可以自行管理，有时我需要自己指定所有字段。

# jasper-reports - 如何在碧玉报告中设置打印excel文件

> ID：10814292
> 
> 赞同：0
> 
> 时间：2012-05-30T10:16:09.380
> 
> 标签：jasper-reports, ireport

将报告导出到 Excel 后打印预览文件时，我的 Excel 出现问题。我打印文件时如何设置文件，它会根据A4纸自动修复大小？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-22T11:55:51.273

```
 HSSFPrintSetup printSetup = sheet.getPrintSetup();
    sheet.getPrintSetup().setFitWidth((short) 1);
    sheet.getPrintSetup().setFitHeight((short) 0);
    sheet.setAutobreaks(true);
    printSetup.setLandscape(true);

    HSSFFooter footer = sheet.getFooter();
    footer.setCenter("Page " + HSSFFooter.page() + " of "+ HSSFFooter.numPages()); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-12-01T14:46:25.440

我也遇到了这个问题：尽管报告页面格式配置为 A4（即 842 * 595 像素），但`A4`没有显示导出到 Excel 并打开打印预览。`Letter`

在 Excel 导出期间，Jasper 以（从 JasperReports 6.2.0 开始）的`private final short getSuitablePaperSize()`方法计算和设置纸张大小。`net.sf.jasperreports.engine.export.JRXlsExporter`

由于`JRParameter.IS_IGNORE_PAGINATION`标志已打开，因此计算无法正常工作。使用此标志，Jasper 将整个报表视为一页，因此页面大小和页面宽度不再与报表页面格式中定义的相同。

离开产生正确`JRParameter.IS_IGNORE_PAGINATION`的`false`打印预览（在 A4 中）。

# objective-c - 如何检查应用程序/二进制文件的另一个实例是否已在运行

> ID：10814293
> 
> 赞同：2
> 
> 时间：2012-05-30T10:16:10.147
> 
> 标签：objective-c, macos, osx-lion, osx-snow-leopard, command-line-tool

我正在使用 Objective-c 在 Mac 中编写命令行应用程序

在应用程序启动时，我想检查同一应用程序的另一个实例是否已经在运行。如果是，那么我应该等待它完成或退出当前实例或退出另一个实例等。

有没有办法做到这一点？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-31T00:19:30.327

标准的 Unix 解决方案是创建一个“运行文件”。当您启动时，您尝试创建该文件并将您的 pid 写入它（如果它不存在）；如果确实存在，请从中读取 pid，如果有一个正在运行的程序具有该 pid 和您的进程名称，请等待/退出/无论如何。

问题是，你把那个文件放在哪里，你怎么称呼它？

好吧，首先，您必须确定“已经运行”的确切含义。显然不是“世界上的任何地方”，但它可以是从“当前机器上的任何地方”到“当前桌面会话中”的任何东西。（例如，如果用户 A 启动您的程序，暂停它，然后用户 B 出现并通过快速用户切换接管计算机，她应该能够运行程序吗？）

对于该问题的任何合理答案，都有一个明显的路径名模式。例如，在 Mac 上，/tmp 在系统范围内共享，而 $TMPDIR 特定于给定会话，因此，例如 /tmp/${ARGV[0]}.pid 是表示“只有一个在机器上复制，句号”，而 ${TMPDIR}/${ARGV[0]}.pid 是说“每个会话只有一个副本”的好方法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-30T12:00:09.630

执行此操作的简单但常见的方法是检查进程列表以获取可执行文件的名称。

`ps - A | grep <your executable name>`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-31T05:32:40.363

谢谢@abarnert。

这就是我目前实施的方式。在 main() 开始时，我会检查二进制文件自己的目录中是否存在名为 .lock 的文件（我正在考虑将其移动到 /tmp）。如果是，则应用程序退出。

如果没有，它将创建文件。在应用程序结束时，.lock 文件被删除

我还没有将 pid 写入该文件，但在需要退出前一个实例时我会这样做（目前我还不需要它，但将来可能需要它）。我认为可以使用 PID 检索

```
int myPID=[[NSProcessInfo processInfo] processIdentifier]; 
```

该程序将由作为根守护程序运行的自定义调度程序调用。所以它将以root身份运行。

看到答案，我会假设没有解决问题的直接方法。

# google-apps-script - 如何以编程方式检索库的版本号？

> ID：10814294
> 
> 赞同：1
> 
> 时间：2012-05-30T10:16:19.543
> 
> 标签：google-apps-script

我想在保存新版本时更新电子表格中的单元格，但我找不到检索版本号的方法...

**更新**：我创建了一个[问题](http://code.google.com/p/google-apps-script-issues/issues/detail?id=1369)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-30T18:19:28.060

目前，没有办法检索此信息。请在[问题跟踪器](http://code.google.com/p/google-apps-script-issues/issues/list)中提出此问题，并确保包含有关您的特定用例的详细信息。例如，您希望能够检索有关所有版本的信息还是仅检索最新版本的信息？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-07T13:07:15.087

如果您愿意编写一个小的 Apps 脚本，您可以使用属性函数之一，脚本属性或用户属性。这些在此处进行了描述：[https ://developers.google.com/apps-script/service_properties](https://developers.google.com/apps-script/service_properties)

我使用脚本属性将版本号附加到运行脚本时创建的文件中，因此不完全是您要问的问题，而是相关的。

# java - 如何确保保存和解析对象字符串表示的格式正确关联

> ID：10814295
> 
> 赞同：0
> 
> 时间：2012-05-30T10:16:20.127
> 
> 标签：java, regex, format

我正在制作一个小型棋盘游戏程序，它需要将棋盘的状态保存到文件中，然后从文件中读取并重新创建棋盘。

我将此功能委托给下面显示的类。我想实现这一点，以便在 SQUARE_FORMAT 常量中捕获棋盘正方形的保存格式及其坐标，并在 LOAD_REGEX 常量中捕获用于读取相同信息的正则表达式。两者都应该在代码中相互关联，并且能够在视觉上破译（我的意思是一个人应该能够清楚地看到它们与相同的数据相互关联）

在 Java 代码中是否有这样的习惯用法或模式？

```
public class BoardPersistenceUtility {

    private final String SQUARE_SAVE_FORMAT = "";
    private fial String LOAD_REGEX = "";

    public void save(PrintWriter writer, Board board) {

    }

    public Board load(BufferedReader reader) {
        // Implement
        return null;
    }
} 
```

**更新1：**

再次阅读我的问题时，我想这可能有点令人困惑，关于我到底在寻找什么。我正在特别寻找表示 SQUARE_SAVE_FORMAT 的正确方法，以便它与正则表达式 LOAD_REGEX 明确相关。

SQUARE_SAVE_FORMAT 理想情况下是一个使用特殊字符/变量的字符串，这些特殊字符/变量将被实际值替换，结果将保存到文件中。LOAD_REGEX 是将用于从文件中读取内容的相应正则表达式。正则表达式将使用捕获组，因此我可以根据从捕获组获得的值重新创建原始对象。

我的问题是，围绕创建这样的字符串对的习语是什么——其中一个是用于保存数据的格式字符串，另一个是在读取该数据时使用的正则表达式。

**更新 2：**

再想一想，我想我已经能够更好地澄清我的问题了。

如果您查看这两个字符串，SQUARE_SAVE_FORMAT 是一个格式字符串，将在 String.format() 中用于为板上的正方形创建文本，并将其保存在文件中。常量 SQUARE_LOAD_REGEX 是一个正则表达式，用于读取行并将相关部分捕获到命名组中，因此我可以重新创建原始对象。（对不起，如果我的正则表达式稍微不正确......我很快写了一些东西，但我需要刷新一些正则表达式原则以确保这确实是我需要的）

如果你从视觉上看这两个字符串，很难将它们关联在一起。也许是因为我们没有任何 Java 格式字符串中的命名变量。我们能做的最好的事情是指定 %i ，其中 i 是参数的索引。

我想了解是否有任何成语或模式来表示这样的字符串对，其中一个用于将某些数据格式化为文本，另一个用于读取相同的文本并解析它的部分。

```
public class BoardPersistenceUtility {

    private final String SQUARE_SAVE_FORMAT = 
                  "%d,%d:%b-%s";
    private final String SQUARE_LOAD_REGEX = 
                  "^(?<row>\d*),(?<col>\d*):(?<mine>true|false)-(?<status>\w)$";

    public void save(PrintWriter writer, Board board) {

    }

    public Board load(BufferedReader reader) {
        // Implement
        return null;
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-30T10:21:52.890

注意：你调用`SQUARE_SAVE_FORMAT`和`LOAD_REGEX`它们不是“常量”，因为你没有声明它们`static final`。最好保持术语清晰:-)

链接这两者的最简单方法是定义一个将两者都包含为（最终）字段的类。如果您计划定义多个这样的信息对，您可以定义该类的多个实例，每个实例对应一种格式。

如果您真的想将它们保留为常量，最好将封闭类定义为`enum`. 请注意，Java`enum`也可能包含方法，因此您可以选择在枚举实例本身中将保存/加载逻辑实现为[策略](http://en.wikipedia.org/wiki/Strategy_pattern)，并以多态方式调用它们，这可能有助于简化代码。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-30T10:22:16.590

在您的代码中添加注释以说明它们是相关的、它们是如何相关的、它们的用途，以及如果一个被更改，另一个应该相应地修改。

实施单元测试以确保可以加载保存的板。

确保您的构建和发布过程运行单元测试，并且如果其中一个未通过则失败。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-30T10:55:04.773

我仍然不确定你的意思，但需要格式化，所以回答而不是评论。

首先，这些名字几乎是完全不相关的——以某种方式与它们相关。

```
SQUARE_DATA_STORE
SQUARE_DATA_REGEX 
```

其次，如果只有一种格式，那么区分已保存数据的“样式”是没有意义的——如果有`BoardPersistenceUtility`多种格式，那么该信息将被捕获在持久性实用程序子类中，例如`SquareFormatPersister`或其他东西。

第三，根据您的文本，一个字符串是实际存储数据的位置。另一个是正则表达式。在这种情况下，两者*永远不会*“视觉上相似”——任何复杂的正则表达式永远不会（非常）看起来像它们可以表示的字符串。（在这种情况下，我们没有任何线索，因为我们当然不知道棋盘数据会是什么样子。）

如果您的代码如此不言自明，以至于读者无法通过您的注释和您的代码找出这两个字段是相关的，那么就出现了可怕的错误。我很难想象这段代码如此复杂，以至于他们的关系无法简单地传达。

* * *

*更新后编辑*

答案仍然是否定的。

您可以使用模板机制为字段提供名称，类似于您的正则表达式中使用的名称。这也可能使代码更加不言自明，因为您将使用命名值（如“row”或“col”）填充模板上下文。

您可以使用真正的解析器/生成器，但是那里的复杂性有点太多了。

您可以使用 DSL（内部使用 Groovy、JRuby、JavaScript 等或外部，这使我们回到解析）并以这种方式编写代码块。

IMO 你想多了，并且高估了感知的复杂性：除了模板解决方案，IMO*可能*会过度设计难度，你最好写一两个句子，这应该足以关联加载和保存格式的“字段”。

# cassandra - Cassandra system.migrations 和 system.schemas columnfamily - 配置要保留的数据的 ttl

> ID：10814300
> 
> 赞同：1
> 
> 时间：2012-05-30T10:16:40.827
> 
> 标签：cassandra

我在我的 Cassandra 集群中进行频繁的 Schema 更改。这会导致 cassandra/data/system 目录中的 Migrations-hc* 和 Schema-hc* 文件非常大。

有谁知道是否有办法配置要保存在这些列族中的模式历史数据量？这些数据默认存储多长时间？

非常感谢！

# bash - 尝试连接时出现卷曲错误

> ID：10814301
> 
> 赞同：1
> 
> 时间：2012-05-30T10:16:43.203
> 
> 标签：bash, curl, testflight

我一直使用 curl 命令，现在我遇到了一些问题。

我这样做`curl --verbose https://testflightapp.com` 了，但失败了。结果是： `About to connect() to testflightapp.com port 80 (#0) Trying 110.173.143.147...Operation timed out`

如果我在浏览器上手动尝试就可以了。

任何解决方案？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-30T10:22:55.623

curl 似乎转到了错误的端口：您正在请求一个 https URL，默认情况下，该 URL 在端口 443 上，而 curl 将转到 80。

检查您是否有支持 HTTPS 的 curl 版本（具有 openssl/tls 绑定）。

干杯，里卡多

# jquery - 如何使用 javascript 显示 jquery 页面？

> ID：10814307
> 
> 赞同：1
> 
> 时间：2012-05-30T10:17:03.717
> 
> 标签：jquery, jquery-ui

这是我的问题，我称之为这个方法，它的作用是

使用 jQuery 在服务器上发布一些数据，我想使用从服务器收到的结果显示页面，并且快速的东西 **loginSubmit() 调用 loginPostData**，loginSubmit 创建一个 json 对象并将其传递给 loginPostData

这是来自javascript的一段代码

```
function loginPostData(jsonRequest)
{
    $.post("http://localhost:8080/edserve/MobileServlet", 
            JSON.stringify( jsonRequest), 
            function(data) 
            {
                var obj = JSON.stringify(data);
                //var object = JSON.parse(json_text);
                //alert(obj);
                alert(obj);
                if(data.status=="success")
                {
                    //display main page
                                  //$('#mainMenu').show(); <-- this does not give desired result
                }
                else
                {
                    if(data.message=="user not verified")
                    {
                        //display verification page
                    }   
                    if(data.message=="no user exist with this usname")
                    {
                        //set focus to username
                        $("#username").focus();
                    }   
                }   
        }, "json");
} 
```

页面结构是这样的

```
<div data-role="page" id="login">
    // other page content
            <div id="divrightButton">

            <!-- calling loginSubmit which calls loginPostData-->   
            <a class="bluebutton" href="#" onclick="loginSubmit(); return false;">Login</a>

            </div>
        </form>
</div>

<!--main page-->
<div data-role="page" id="mainMenu">

     Main menu
</div> 
```

成功时如何显示主菜单，html的整个代码在不同div的单个文件中

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-31T11:13:19.980

使用此代码重定向/显示特定的 div 元素

`$.mobile.changePage("#mainMenu",{allowSamePageTransition: true });`

并下载以下 css 文件，它是页面/div 元素之间转换的必要条件

[jquery.mobile.transitions.css](https://github.com/jquery/jquery-mobile/blob/ca9df1197a9748ee7448fb9b28c14c41d80d4601/themes/default/jquery.mobile.transitions.css)

# iphone - 如何使用 MPMoviePlayerController 播放视频？

> ID：10814308
> 
> 赞同：7
> 
> 时间：2012-05-30T10:17:03.843
> 
> 标签：iphone, objective-c, ios, mpmovieplayercontroller, mpmovieplayer

我正在使用以下代码使用 MPMoviePlayerController 播放视频，但未播放视频。谁能告诉我为什么？

```
NSArray *paths = NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES);
NSString *documentsDirectory = [paths objectAtIndex:0];
NSString *filePath = [documentsDirectory stringByAppendingPathComponent:@"/one.mp4"];

NSString *mediaPath = [[[NSBundle mainBundle]resourcePath] stringByAppendingPathComponent:filePath];

    MPMoviePlayerController *moviePlayer = [[MPMoviePlayerController alloc] initWithContentURL:[NSURL fileURLWithPath:mediaPath]];

    [[moviePlayer view] setFrame:[[self view] bounds]];
    [[self view] addSubview: [moviePlayer view]];

    moviePlayer.scalingMode = MPMovieScalingModeAspectFit;

    [moviePlayer play]; 
```

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-06-08T18:13:09.673

这很奇怪，但是如果您将 MPMoviePlayerController 设为属性而不是局部变量，它似乎可以正常工作。似乎在幕后发生了什么事。我认为这与ARC有关。你在用ARC吗？

您过度附加路径也是一个问题：

```
// You've already got the full path to the documents directory here.
NSString *filePath = [documentsDirectory stringByAppendingPathComponent:@"/one.mp4"];
// Now you're appending the full path to the documents directory to your bundle path
NSString *mediaPath = [[[NSBundle mainBundle]resourcePath] stringByAppendingPathComponent:filePath]; 
```

当我在模拟器中运行您的代码时，路径如下所示：

> /Users/mlong/Library/Application Support/iPhone Simulator/5.1/Applications/8CFB9B94-BD6A-442C-A525-573FE343506D/VidoePlayer.app/Users/mlong/Library/Application Support/iPhone Simulator/5.1/Applications/8CFB9B94-BD6A -442C-A525-573FE343506D/Documents/one.mp4

应该是这样的：

> /Users/mlong/Library/Application Support/iPhone Simulator/5.1/Applications/8CFB9B94-BD6A-442C-A525-573FE343506D/Documents/one.mp4

所以只需删除这一行：

```
NSString *mediaPath = [[[NSBundle mainBundle]resourcePath] stringByAppendingPathComponent:filePath]; 
```

然后将您的播放器实例更改为：

```
_moviePlayer = [[MPMoviePlayerController alloc] initWithContentURL:[NSURL fileURLWithPath:filePath]];

[[_moviePlayer view] setFrame:[[self view] bounds]];
[[self view] addSubview: [_moviePlayer view]];

_moviePlayer.scalingMode = MPMovieScalingModeAspectFit;

[_moviePlayer play]; 
```

因此，您应该将 MPMoviePlayerController 添加为包含视图控制器的属性。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-30T10:54:22.153

好吧，应用程序包和文档目录之间有很大的区别。我建议你看看那个。

首先，视频存储在哪里？

如果您的视频位于文档目录中，请不要将文档目录路径附加到包路径。

只需尝试使用`filePath`变量：

```
NSArray *paths = NSSearchPathForDirectoriesInDomains(NSDocumentDirectory,NSUserDomainMask, YES);
NSString *documentsDirectory = [paths objectAtIndex:0];
NSString *filePath = [documentsDirectory stringByAppendingPathComponent:@"/one.mp4"];

MPMoviePlayerController *moviePlayer = [[MPMoviePlayerController alloc] initWithContentURL:[NSURL filePath]]; 
```

但是，如果该文件位于应用程序包中（您已将其添加到 XCode 中的项目中），则应使用`jinx`响应内容。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-03T09:34:59.460

```
moviePlayer = [[MPMoviePlayerController alloc] initWithContentURL:url];  
        [moviePlayer.view setFrame:CGRectMake(//set rect frame)];
        moviePlayer.controlStyle =  MPMovieControlStyleDefault; 
        moviePlayer.shouldAutoplay=YES;
        moviePlayer.repeatMode = NO;  
        [moviePlayer setFullscreen:YES animated:NO]; 
        [moviePlayer prepareToPlay];
[self.view addsubview:movieplayer.view];

  [[NSNotificationCenter defaultCenter] addObserver:self selector:@selector(MPMoviePlayerLoadStateDidChange:) name:MPMoviePlayerLoadStateDidChangeNotification object:nil];

- (void)MPMoviePlayerLoadStateDidChange:(NSNotification *)notification {

    if ((moviePlayer.loadState & MPMovieLoadStatePlaythroughOK) == MPMovieLoadStatePlaythroughOK) {
//add your code

    }
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-02-19T07:43:17.147

在将播放器添加为当前视图的子视图之后，使用我们要播放的视频的 URL（它可以是设备的本地文件的路径或实时 URL。）初始化播放器。

MPMoviePlayerController 类支持的视频格式如下

1.  .mov .mpv .3gp .mp4

我不确定这篇文章对你有多大帮助。我是新来的。**[我按照本文](http://freefeast.info/general-it-articles/play-a-video-using-mpmovieplayercontroller/)**中提供的分步说明进行了工作

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-30T10:24:45.073

尝试直接询问您的捆绑包，而不是手动设置文件路径

```
NSString *path = [[NSBundle mainBundle] pathForResource:@"name" ofType:@"mov"]; 
```

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2012-05-30T10:38:20.910

```
MPMoviePlayerController *moviePlayer = [[MPMoviePlayerController alloc] initWithContentURL:[NSURL fileURLWithPath:mediaPath]];
    [[NSNotificationCenter defaultCenter] addObserver:self selector:@selector(movieFinishedCallback:) name:MPMoviePlayerPlaybackDidFinishNotification object:moviePlayer]; 
```

希望帮助它

* * *

## 回答 #7

> 赞同：-1
> 
> 时间：2013-06-03T09:24:17.223

我花了几分钟来调试问题，但答案很简单。这是交易：

*   如果你想 MPMoviePlayerViewController 从一个 web URL 播放，使用这个： NSURL *url = [NSURL URLWithString:@" [https://www.test.com/anyMovie.mp4](https://www.test.com/anyMovie.mp4) "];

*   如果您希望 MPMoviePlayerViewController 从 App Bundle 播放它，请使用： NSString *moviePath = [[NSBundle mainBundle] pathForResource:@"anyMovie" ofType:@"m4v"]; NSURL *url = [NSURL fileURLWithPath:moviePath];

其余部分相同，但您必须按如下方式设置此属性“movieSourceType”：

```
MPMoviePlayerViewController *moviePlayerView = [[MPMoviePlayerViewController alloc] initWithContentURL:url];
moviePlayerView.moviePlayer.movieSourceType = MPMovieSourceTypeFile;
[self presentViewController:moviePlayerView animated:YES completion:^{}]; 
```

# apache - 如何区分为 ACE 中的目标配置的软件/捆绑包

> ID：10814310
> 
> 赞同：0
> 
> 时间：2012-05-30T10:17:09.627
> 
> 标签：apache, osgi, target, gateway, agent

我有 2 个捆绑包 A 和 B，使用 Apache ACE 我已在以下步骤中将这些捆绑包配置到目标。

1.  为目标提供 A（版本 1.0.0）
2.  为目标提供 B（版本 1.0.0）
3.  将 B（具有版本 2.0.0）配置到目标（升级先前版本的步骤 2）

当我访问（http://localhost:8080/deployment/gatewayid/versions）

我得到以下结果

1.0.0
2.0.0
3.0.0

管理代理如何确定哪个版本属于哪个软件？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-28T17:34:29.913

每次为目标配置的工件集发生变化时，ACE 都会为目标创建一个新版本。要实际查看版本中的内容，目标上的管理代理需要获取版本。然后您获得的部署包包含您需要的所有元数据（即工件及其版本的列表）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-31T08:07:34.050

当在与目标包相同的 OSGi 框架中运行时，您可以使用[BundleContext](http://www.osgi.org/javadoc/r4v43/core/org/osgi/framework/BundleContext.html)获取包，并询问它们安装的版本。就像是，

```
for (Bundle b : bundleContext) {
    System.out.println("Found bundle " + b.getSymbolicName() + " in version " + b.getVersion());
} 
```

如果您还需要知道这个包是否已经从部署包中安装，您可以向它询问它的`getLocation()`; `osgi-dp:`根据部署管理规范，这将以 开头。

# jquery - 无法选择/jquery 来运行事件

> ID：10814311
> 
> 赞同：1
> 
> 时间：2012-05-30T10:17:15.643
> 
> 标签：jquery, jquery-chosen

我正在尝试制作一个像这里一样的标签系统，但如果在数据库中找不到标签，我希望能够允许用户提交它。

我正在使用选择（[此处](http://harvesthq.github.com/chosen/)）和 jquery。我已经选择了我想要的工作方式，但我无法运行我的 .click() 事件。有任何想法吗？

谢谢

```
<form>
<select multiple="multiple" id="jqtags" style="width:400px;height:30px !important;">
    <?php getTags(); ?>
</select>
<input type="submit" />
</form> 
```

```
$(document).ready(function(){
    c.init.page();
});
$('form').submit( function() {
    var tags = $('#jqtags').val()
    return false;
});
$("#jqtags").chosen();

$('.no-results').click(function() {
    alert('123');
}); 
```

.no-results 是由 selected 生成的，如果有帮助，页面加载时不存在

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-30T10:20:28.050

> .no-results 是由 selected 生成的，并且在页面加载时不存在

那就是问题所在。因为当您尝试绑定事件时元素不在 DOM 中，所以它不会被绑定。您可以将事件委托给 DOM 树的上层。[jQuery`on`方法](http://api.jquery.com/on/)允许您通过传入选择器来执行此操作。

如果`.no-results`被添加为`form`元素的后代，你可以这样做：

```
$("form").on("click", ".no-results", function() {
    alert('123');
}); 
```

这是可行的，因为 DOM 事件往往会从它们起源的元素中冒出树。如果将事件处理程序绑定在祖先元素上，则在冒泡到达该元素时会捕获它。该`on`方法检查源是否与选择器匹配，如果匹配则执行事件处理程序。

# javascript - IE9 的 JavaScript (jquery) 附加问题

> ID：10814313
> 
> 赞同：0
> 
> 时间：2012-05-30T10:17:17.617
> 
> 标签：javascript, jquery, css, internet-explorer, append

我正在使用 jquery 向我的网站添加快速菜单。我的源代码是这样的：

```
var span = $('body').append('<span id="quickmenu">');
       $('#quickmenu').css('position','fixed')
              .css('background-color','white')
              .css('border','4px solid black')
              .css('border-left','0px solid black')
              .css('top','15px')
              .css('left','0px')
              .css('font-family','Calibri')
              .css('font-size','14px')
              .css('line-height','0px')
              .css('color','#777777')
              .css('text-align','center'); 
```

我的问题是，在 FF 和 Chrome 中一切正常，但 IE9 没有向我显示任何内容。

所以我在访问上述代码后尝试了一些警报（）......：

```
alert('I run'); // I run
alert(span); // [object Object]
alert($("#quickmenu")); // [object Object] 
alert(span == $("#quickmenu")); // false 
```

所以我似乎是被创造出来的，但没有显示出来？！

我真的不知道那里出了什么问题，.... 控制台在 FF 和 IE9 中没有显示错误

有任何想法吗 ？！：-/

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-30T10:50:47.537

我相信代码运行得太早了。您需要将代码包装在文档就绪函数中：

```
jQuery(document).ready(function() {

//your code goes here

}); 
```

实际上，我会将您的功能更改为如下所示：

```
 jQuery(document).ready(function(e) {   
    var span = $('<span id="quickmenu" >')
        .css({
            'position':'fixed',
             'background-color':'white',
             'border':'4px solid black',
             'border-left':'0px solid black',
             'top':'15px',
             'left':'0px',
             'font-family':'Calibri',
             'font-size':'14px',
             'line-height':'0px',
             'color':'#777777',
             'text-align':'center'
        })
        .appendTo($("body"));
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-22T18:44:35.340

正如 Smoki 在评论中指出的那样。

从以下切换：`$("#target").append(my_dom_element);`

至：`my_dom_element.appendTo("#target");`

似乎可以解决问题。

我正在使用一个大型但未编写脚本的元素，该元素是从外部文件导入并提前变成一个元素的。然后追加将失败。切换到使用该`.appendTo()`方法有效。所以我会冒险猜测`.append()`当被要求附加复杂元素时 IE 代码会混淆。尽管它可能很容易就是将它附加到使它感到困惑的东西。

(jQuery 1.8.2)

# java - 从 Rhino 脚本中访问 Java 特权操作

> ID：10814314
> 
> 赞同：3
> 
> 时间：2012-05-30T10:17:19.227
> 
> 标签：java, javascript

如何从在 Java 中的 Rhino 中运行的 JavaScript 执行本地文件？我会考虑在 Rhino 环境中工作的任何方法。我目前对该问题的探索如下。

我正在通过 java.lang.Runtime.exec 尝试这个，在 Mozilla“Scripting Java”教程的帮助下我可以访问它。但是，这是一个受限制的操作，因此直接调用它会产生访问控制异常。

为了解决这个问题，我需要使用 AccesController.doPrivileged 方法。下面是在 Java 中使用它的示例；

```
AccessController.doPrivileged(new PrivilegedAction() {
          public Object run() {
             // Code goes here. Any permission checks within this
             // run method will require that the intersection of the
             // callers protection domain and the snapshot's
             // context have the desired permission.
          } 
```

障碍是在 javascript 中复制 PrivilegedAction 的构造。

```
var ourRuntime = Packages.java.lang.Runtime.getRuntime();
//ourRuntime.exec("notepad.exe") //will raise Access Control Exception
var controller = Packages.java.security.AccessController.doPrivileged
var action = new Packages.java.security.PrivilegedAction(ourRuntime.exec("notepad.exe"))         // somehow make this wwrk
controller.doPrivileged(action) 
```

[Mozilla 脚本 Java](http://www.mozilla.org/rhino/ScriptingJava.html)

[java.securit.AccessController](http://docs.oracle.com/javase/1.4.2/docs/api/java/security/AccessController.html)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-30T10:29:16.263

我以这种方式成功启动了 KWrite（例如）。我基本上将 Runtime 对象暴露给嵌入式 JavaScript 解释器。

```
public class RunBasicScript {

public static void main(String[] args) {

    // Get a handle to the JavaScript context
    Context cx = Context.enter();

    try 
    {
        // Set up the standard JavaScript objects
        // like Object, Function etc.
        Scriptable scope = cx.initStandardObjects();

        // Make Runtime.getRuntime available to our JavaScript code
        Object exec = Context.javaToJS(Runtime.getRuntime(), scope);
        ScriptableObject.putProperty(scope, "exec", exec);

        // Build our awesome script
        String script = "exec.exec('kwrite');";

        // Now we execute the script
        Object obj = cx.evaluateString(scope, script, "Testing", 1, null);
    } 
    catch (Exception e) 
    {
        System.err.println("Error : " + e);
    }
    finally 
    {
        // We need to exit the Context.
        Context.exit();
    }
} 
```

}

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-30T10:24:30.097

[Java 6 脚本API](http://docs.oracle.com/javase/6/docs/technotes/guides/scripting/index.html)支持 Rhino ，因此您可以使用 doPrivileged 包装脚本的 eval 并以必要的权限执行整个脚本。结合 doPrivileged 的​​ java 脚本 API 示例在[这里](http://worldwizards.blogspot.com/2009/08/java-scripting-api-sandbox.html)

# windows - 为什么我的 RCP 应用程序没有在 Windows 中显示？

> ID：10814324
> 
> 赞同：3
> 
> 时间：2012-05-30T10:18:02.870
> 
> 标签：windows, eclipse-rcp, splash-screen

我创建了一个带有交互式启动画面的 RCP 应用程序，用于登录我的系统。我在 Mac 上构建它，应用程序运行良好，但是当我为 Windows 创建新产品配置并运行应用程序时，它启动时没有启动，控制台中也没有出现错误。

飞溅处理程序代码如下

```
/**
 * The splash screen controller for the RCP application. This has been modified to also act as a login screen for the 
 * application. Failure to correctly authenticate results in the application termination.
 */
package com.myproject.plugins.core.splashHandlers;

import java.net.MalformedURLException;

import org.eclipse.jface.dialogs.MessageDialog;
import org.eclipse.swt.SWT;
import org.eclipse.swt.events.SelectionAdapter;
import org.eclipse.swt.events.SelectionEvent;
import org.eclipse.swt.layout.FillLayout;
import org.eclipse.swt.layout.FormAttachment;
import org.eclipse.swt.layout.FormData;
import org.eclipse.swt.layout.FormLayout;
import org.eclipse.swt.widgets.Button;
import org.eclipse.swt.widgets.Composite;
import org.eclipse.swt.widgets.Label;
import org.eclipse.swt.widgets.Shell;
import org.eclipse.swt.widgets.Text;
import org.eclipse.ui.splash.AbstractSplashHandler;

/**
 * The splash handler overrides the default RCP splash handler.
 * @since 3.3
 */
public class InteractiveSplashHandler extends AbstractSplashHandler {

    /**
     * Composite container for login form.
     */
    private Composite loginComposite;

    /**
     * Text box input for login username.
     */
    private Text usernameTextBox;

    /**
     * Text box input for login password.
     */
    private Text passwordTextBox;

    /**
     * OK button for submission of the login form.
     */
    private Button okButton;

    /**
     * Cancel button for cancelling the login attempt and exiting the application.
     */
    private Button cancelButton;

    /**
     * Simple boolean flag to store login success/status.
     */
    private boolean isAuthenticated;

    /**
     * SWT form label for username.
     */
    private Label usernameLabel;

    /**
     * SWT form label for password.
     */
    private Label passwordLabel;

    /**
     * Form/layout data for username label. 
     */
    private FormData usernameLabelFormData;

    /**
     * Form/layout data for password label.
     */
    private FormData passwordLabelFormData;

    /**
     * Form/layout data for username text box.
     */
    private FormData usernameTextBoxFormData;

    /**
     * Form/layout data for password text box.
     */
    private FormData passwordTextBoxFormData;

    /**
     * Form/layout data for OK button.
     */
    private FormData okButtonFormData;

    /**
 * Constructor for the splash handler.
     */
    public InteractiveSplashHandler() {
        passwordTextBox = null;
        cancelButton = null;
        isAuthenticated = false;
    }

    /**
     * Initialiser for the splash screen.
     * @see org.eclipse.ui.splash.AbstractSplashHandler#init(org.eclipse.swt.widgets.Shell)
     */
    public void init(final Shell splash) {
        /**
         * Initialising the parent SplashHandler with the splash shell.
         */
        super.init(splash);

        /**
         * Configure the shell UI layout.
         */
        configureUISplash();

        /**
         * Create UI components.
         */
        createUI();

        /**
         * Create UI listeners.
         */
        createUIListeners();

        /**
         * Force the splash screen to layout.
         */
        splash.layout(true);

        /**
         * Keep the splash screen visible and prevent the RCP application from loading until the close button is 
         * clicked.
         */
        doEventLoop();
    }

    /**
     * Create the event loop for the splash to prevent the application load from completion, and hold it at the splash 
     * until the login event is successful.
     */
    private void doEventLoop() {
        Shell splash = getSplash();
        while (isAuthenticated == false) {
            if (splash.getDisplay().readAndDispatch() == false) {
                splash.getDisplay().sleep();
            }
        }
    }

    /**
     * Create the UI listeners for all the form components.
     */
    private void createUIListeners() {
        /**
         * Create the OK button listeners.
         */
        createUIListenersButtonOK();

        /**
         * Create the cancel button listeners.
         */
        createUIListenersButtonCancel();
    }

    /**
     * Listeners setup for the cancel button.
     */
    private void createUIListenersButtonCancel() {
        cancelButton.addSelectionListener(new SelectionAdapter() {
            public void widgetSelected(SelectionEvent e) {
                handleButtonCancelWidgetSelected();
            }
        });     
    }

    /**
     * Handles the cancel action by shutting down the RCP application.
     */
    private void handleButtonCancelWidgetSelected() {
        /**
         * Abort the loading of the RCP application.
         */
        getSplash().getDisplay().close();
        System.exit(0);     
    }

    /**
     * Listeners setup for the OK button.
     */
    private void createUIListenersButtonOK() {
        okButton.addSelectionListener(new SelectionAdapter() {
            public void widgetSelected(SelectionEvent e) {
                handleButtonOKWidgetSelected();
            }
        });
    }

    /**
     * Handles the OK button being pressed and the login attempted.
     */
    private void handleButtonOKWidgetSelected() {
        String username = usernameTextBox.getText();
        String password = passwordTextBox.getText();

        AuthenticationClient client = new AuthenticationClient();

        if (username.equals("") || password.equals("")) {
            MessageDialog.openError(getSplash(), 
                "Authentication Failed",  //$NON-NLS-1$
                "A username and password must be specified to login.");  //$NON-NLS-1$
        } else {
            try {
                if (client.authenticate(username, password)) {
                    isAuthenticated = true;
                } else {
                    MessageDialog.openError(getSplash(), 
                        "Authentication Failed",  //$NON-NLS-1$
                        "The details you entered could not be verified.");  //$NON-NLS-1$
                }
            } catch (MalformedURLException e) {
                MessageDialog.openError(getSplash(), 
                    "Authentication Failed",  //$NON-NLS-1$
                    "Service responded with an error.");  //$NON-NLS-1$
            }
        }
    }

    /**
     * Calls the individual UI component creation functions.
     */
    private void createUI() {
        /**
         * Create the login panel.
         */
        createUICompositeLogin();

        /**
         * Create the user name label.
         */
        createUILabelUserName();

        /**
         * Create the user name text widget.
         */
        createUITextUserName();

        /**
         * Create the password label.
         */
        createUILabelPassword();

        /**
         * Create the password text widget.
         */
        createUITextPassword();

        /**
         * Create the OK button.
         */
        createUIButtonOK();

        /**
         * Create the cancel button.
         */
        createUIButtonCancel();
    }       

    /**
     * Creates the SWT component for the cancel button.
     */
    private void createUIButtonCancel() {
        /**
         * Create the button.
         */
        cancelButton = new Button(loginComposite, SWT.PUSH);
        okButtonFormData.right = new FormAttachment(cancelButton, -6);

        FormData cancelButtonFormData = new FormData();
        cancelButtonFormData.left = new FormAttachment(0, 392);
        cancelButtonFormData.right = new FormAttachment(100, -10);
        cancelButtonFormData.bottom = new FormAttachment(100, -10);
        cancelButton.setLayoutData(cancelButtonFormData);

        cancelButton.setText("Cancel");
    }

    /**
     * Creates the SWT component for the OK button.
     */
    private void createUIButtonOK() {
        /**
         * Create the button.
         */
        okButton = new Button(loginComposite, SWT.PUSH);
        passwordTextBoxFormData.bottom = new FormAttachment(okButton, -6);

        okButtonFormData = new FormData();
        okButtonFormData.left = new FormAttachment(0, 279);
        okButtonFormData.bottom = new FormAttachment(100, -10);
        okButton.setLayoutData(okButtonFormData);

        okButton.setText("OK");
    }

    /**
     * Creates the SWT component for the password text box.
     */
    private void createUITextPassword() {
        /**
         * Create the text widget.
         */
        int style = SWT.PASSWORD | SWT.BORDER;
        passwordTextBox = new Text(loginComposite, style);

        passwordLabelFormData.right = new FormAttachment(passwordTextBox, -6);

        passwordTextBoxFormData = new FormData();
        passwordTextBoxFormData.right = new FormAttachment(100, -10);
        passwordTextBoxFormData.left = new FormAttachment(0, 279);
        passwordTextBox.setLayoutData(passwordTextBoxFormData);
    }

    /**
     * Creates the SWT component for the password label.
     */
    private void createUILabelPassword() {
        /**
         * Create the label.
         */
        passwordLabel = new Label(loginComposite, SWT.NONE);

        passwordLabelFormData = new FormData();
        passwordLabelFormData.top = new FormAttachment(usernameLabel, 11);
        passwordLabel.setLayoutData(passwordLabelFormData);

        passwordLabel.setText("&Password:");
    }

    /**
     * Creates SWT component for the username text box.
     */
    private void createUITextUserName() {
        /**
         * Create the text widget.
         */
        usernameTextBox = new Text(loginComposite, SWT.BORDER);

        usernameLabelFormData.top = new FormAttachment(usernameTextBox, 3, SWT.TOP);
        usernameLabelFormData.right = new FormAttachment(usernameTextBox, -6);

        usernameTextBoxFormData = new FormData();
        usernameTextBoxFormData.top = new FormAttachment(0, 233);
        usernameTextBoxFormData.right = new FormAttachment(100, -10);
        usernameTextBoxFormData.left = new FormAttachment(0, 279);
        usernameTextBox.setLayoutData(usernameTextBoxFormData);
    }

    /**
     * Creates SWT component for the username label.
     */
    private void createUILabelUserName() {
        /**
         * Create the label
         */
        usernameLabel = new Label(loginComposite, SWT.NONE);
        usernameLabelFormData = new FormData();
        usernameLabel.setLayoutData(usernameLabelFormData);
        usernameLabel.setText("&User Name:");
    }

    /**
     * Creates SWT component for the login composite.
     */
    private void createUICompositeLogin() {
        /**
         * Create the composite and set the layout.
         */
        loginComposite = new Composite(getSplash(), SWT.BORDER);
        loginComposite.setLayout(new FormLayout());
    }

    /**
     * Configures the splash screen SWT/UI components.
     */
    private void configureUISplash() {
        /**
         * Configure layout
         */
        FillLayout layout = new FillLayout(); 
        getSplash().setLayout(layout);

        /**
         * Force shell to inherit the splash background
         */
        getSplash().setBackgroundMode(SWT.INHERIT_DEFAULT);
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-23T13:35:56.973

奇怪的是，位图（在 Photoshop/Mac 中创建）图像在 Eclipse 中被视为损坏，但在所有图形应用程序（包括 Photoshop/Win）中都可以正常打开。我在 MS Paint 中打开了该文件并保存而没有更改。飞溅开始工作正常。

如果您收到此错误，请检查您的位图！

# c# - 使用 MVVM 的 WPF：使用 RelativeSource 进行数据绑定

> ID：10814327
> 
> 赞同：10
> 
> 时间：2012-05-30T10:18:16.880
> 
> 标签：c#, wpf, c#-4.0, mvvm, mvvm-light

我有一个控件，在该控件中我有一个带有数据模板的资源：

```
 <DataTemplate DataType="{x:Type local:FlowModel}">
    <Image Source="{Binding RelativeSource={RelativeSource FindAncestor, AncestorType={x:Type vm:MainViewModel}}, Path=MainViewModel.ImagePath}"/>
  </DataTemplate>

 xmlns:vm="clr-namespace:CortexMonitoringTool.ViewModel" 
```

我将 vm 设置为我的 ViewModel 文件夹，我正在实现 mvvm。我无法让我的绑定工作，我不确定为什么不。

有人能告诉我我的相对绑定是否正确，它是否真的可以在我的 MainViewModel 类中看到我的属性“ImagePath”？

```
public String ImagePath
    {
        get
        {
            return _imagePath;
        }
        set
        {
            if (_imagePath == value)
            {
                return;
            }
            _imagePath = value;
            RaisePropertyChanged("ImagePath");
        }
    } 
```

谢谢你。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-05-30T10:40:36.307

嗨，我设法让它工作。

```
 <DataTemplate DataType="{x:Type local:FlowModel}">
    <Image Source="{Binding RelativeSource={RelativeSource FindAncestor, AncestorType={x:Type Window}}, Path=DataContext.ImagePath}"/>
  </DataTemplate> 
```

我将我的 AncestorType 更改为“Window”，它已准备好绑定到我的 MainViewModel，然后使用“DataContext”。在我的路径中能够看到我的财产。

希望这对其他人有帮助！

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-05-30T11:36:53.037

您的视图模型不是您的可视树的一部分。所以 find 祖先类型在那里不起作用。并且如果您找到具有数据上下文的根父级，那么您可以使用它的属性与 like 绑定。

```
<Image Source={...... Path=DataContext.MyProperty}"/> 
```

# ruby-on-rails - 更改文本验证 Rails 3

> ID：10814335
> 
> 赞同：0
> 
> 时间：2012-05-30T10:18:57.353
> 
> 标签：ruby-on-rails, ruby-on-rails-3

我想做以下任何想法

我有一个带有两个字段的 Products 模型，都是字符串。

姓名 职位

如果数据库中的 Positions 字段为空，我希望在产品的索引页面上以红色显示名称。

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-30T10:37:31.820

创建**`helper`**方法来检查**对象**是否是`blank?`

```
def set_css_class(object, css_class)
  " #{css_class}" if object.blank?
end 
```

在你的调用它**`View`**：

```
<div class="name <%= set_css_class(@poroduct.position, 'red') %>">
  <%= @product.name %>
</div> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-30T10:43:35.540

```
<span class="<%= product.position.nil? ? "red" : "blue" %>">
  <%= product.name %>
</span> 
```

更新：

假设您有类似评论中提供的代码，请将其修改为：

```
<td>
  <%= link_to admin_printer_path(printer), :class => 'ico' do %>
    <b<%= ' class="error"' unless printer.position? %>><%= printer.name %></b>
  <% end %>
</td> 
```

并在标题中的 css 文件/部分中添加（或根据您的结构进行修改）：

```
.error { color: red; } 
```

# neo4j - 用于查看 Neo4j 数据库的 GUI 工具

> ID：10814336
> 
> 赞同：39
> 
> 时间：2012-05-30T10:19:01.693
> 
> 标签：neo4j

是否有一个 GUI 工具可以让您直观地查看 Neo4j 数据库的内容。

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2012-05-30T17:32:55.657

最简单的方法是启动 neo4j 服务器并通过 webadmin 查看您的图表：http: [//docs.neo4j.org/chunked/stable/tools-webadmin.html](http://docs.neo4j.org/chunked/stable/tools-webadmin.html)

* * *

## 回答 #2

> 赞同：21
> 
> 时间：2012-05-31T13:12:44.687

[Gephi](http://gephi.org/)可以连接到 Neo4j 数据库，并提供了一个非常强大的可视化平台，尽管有一点学习曲线。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-01-08T12:43:29.780

有一种新的解决方案可以使用 Web 浏览器探索 Neo4j 图形数据库的内容：http: [//linkurio.us/](http://linkurio.us/)

它允许您按属性搜索节点、检查节点、单击扩展邻域...

Disclamer：我是 Linkurious 和 Gephi 的联合创始人。

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2013-07-09T12:59:17.247

[Neoclipse](http://eclipse.neo4j.org/)是一个很棒的工具。也看看[这里](https://github.com/neo4j/neoclipse)。

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2013-08-28T15:30:03.760

您可以考虑使用我们的应用程序[movies.graphalchemist.com](http://movies.graphalchemist.com/)进行演示。

我们通常在商业智能场景中部署我们的解决方案，但是如果您发现它非常适合您的用例，请随时联系我们。

提到的其他应用程序运行良好，我们在内部将其中一些用于特定的事情......

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2013-01-09T09:21:17.033

最好使用它自己的网络界面。

# c# - 解决数学逻辑，将数字从第一个和第二个数字的数字放在第三个数字中

> ID：10814342
> 
> 赞同：2
> 
> 时间：2012-05-30T10:19:13.190
> 
> 标签：c#, c, algorithm, logic, business-logic

我有两个号码。

```
First Number is 2875 &
Second Number is 852145 
```

现在我需要一个创建第三个数字的程序。

```
Third Number will be 2885725145 
```

逻辑是

```
First digit of third number is first digit of first number.  
Second digit of third number is first digit of second number.  
Third digit of third number is second digit of first number.  
Fourth digit of third number is second digit of second number; 
```

很快。

如果任何数字有剩余的数字，那么最后应该附加。

我不想将 int 转换为字符串。

```
int CreateThirdNumber(int firstNumber, int secondNumber)
{

} 
```

那么任何人都可以建议我解决这个问题吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-30T10:20:58.647

> 我不想将 int 转换为字符串。

为什么？

不转换为字符串

> 使用模数和除法运算符。

随着转换为字符串

> 将它们转换为字符串。使用 .Substring() 在字符串中提取和附加值。将附加的字符串转换为整数。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-30T12:19:36.743

首先一点建议：如果您`int`在 C# 中使用，那么您的示例中的值 (2885725145) 大于`int.MaxValue;`（因此在这种情况下您应该使用`long`而不是`int`）。无论如何，这里是您的示例的代码，没有字符串。

```
 int i1 = 2875;
        int i2 = 852145;
        int i3 = 0;

        int i1len = (int)Math.Log10(i1) + 1;
        int i2len = (int)Math.Log10(i2) + 1;

        i3 = Math.Max(i1, i2) % (int)Math.Pow(10, Math.Max(i1len, i2len) - Math.Min(i1len, i2len));

        int difference = (i1len - i2len); 
        if (difference > 0)
            i1 /= (int)Math.Pow(10, difference);
        else
            i2 /= (int)Math.Pow(10, -difference);

        for (int i = 0; i < Math.Min(i1len, i2len); i++)
            {
            i3 += (i2 % 10) * (int)Math.Pow(10, Math.Max(i1len, i2len) - Math.Min(i1len, i2len) + i * 2);
            i3 += (i1 % 10) * (int)Math.Pow(10, Math.Max(i1len, i2len) - Math.Min(i1len, i2len) + i * 2 + 1);
            i1 /= 10;
            i2 /= 10;
            } 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-30T10:32:14.273

这里有一点可以为您提供指导：

说你有号码`2875`。首先，你需要确定它的长度，然后，*提取*第一个数字

这可以很容易地计算出来：

```
int iNumber = 2875;
int i = 10;
int iLength = 0;

while (iNumber % i <= iNumber){
    iLength++;
    i *= 10;
}

// iNumber is of length iLength, now get the first digit,
// using the fact that the division operator floors the result
int iDigit = iNumber / pow(10, iLength-1);
// Thats it! 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-30T12:59:33.750

我不明白你为什么不想使用字符串（是作业吗？）。无论如何，这是另一种可能的解决方案：

```
 long CreateThirdNumber(long firstNumber, long secondNumber)
    {
        long firstN = firstNumber;
        long secondN = secondNumber;
        long len1 = (long)Math.Truncate(Math.Log10(firstNumber));
        long len2 = (long)Math.Truncate(Math.Log10(secondNumber));
        long maxLen = Math.Max(len1, len2);
        long result = 0;
        long curPow = len1 + len2 + 1;
        for (int i = 0; i <= maxLen; i++)
        {
            if (len1 >= i)
            {
                long tenPwf = (long)Math.Pow(10, len1 - i);
                long firstD = firstN / tenPwf;
                firstN = firstN % tenPwf;
                result = result + firstD * (long)Math.Pow(10, curPow--);
            }
            if (len2 >= i)
            {

                long tenPws = (long)Math.Pow(10, len2 - i);
                long secondD = secondN / tenPws;
                result = result + secondD * (long)Math.Pow(10, curPow--);
                secondN = secondN % tenPws;
            }
        }
        return  result;
    } 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-30T14:20:46.567

这解决了它：

```
#include <stdio.h>

int main(void)
{

  int first = 2875,second = 852145;
  unsigned int  third =0;
  int deci,evenodd ,tmp ,f_dec,s_dec;

  f_dec = s_dec =1;
  while(first/f_dec != 0 || second/s_dec != 0) {
    if(first/f_dec != 0) {
       f_dec *=10;

    }
    if( second/s_dec != 0) {
      s_dec *= 10;
    }

  }
  s_dec /=10; f_dec/=10;

  deci = s_dec*f_dec*10;

  evenodd =0;tmp =0;
  while(f_dec != 0 || s_dec !=0 )  {
    if(evenodd%2 == 0 && f_dec !=0 ) {
      tmp = (first/f_dec);
      first -=(tmp*f_dec);

      tmp*=deci;

      third+=tmp;
      f_dec/=10;
      deci/=10;
    }

    if(evenodd%2 != 0 && s_dec != 0) {
      tmp= (second/s_dec);
      second -=(tmp*s_dec);
      //printf("tmp:%d\n",tmp);

      tmp*=deci;

      third += tmp;
      s_dec/=10;
      deci/=10;
    }

    evenodd++;
  }
  printf("third:%u\ncorrct2885725145\n",third);
return 0;

} 
```

输出：

```
third:2885725145
corrct2885725145 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-05-30T16:06:17.343

```
#include <stdio.h>

long long int CreateThirdNumber(int firstNumber, int secondNumber){
    char first[11],second[11],third[21];
    char *p1=first, *p2=second, *p3=third;
    long long int ret;

    sprintf(first,  "%d", firstNumber);
    sprintf(second, "%d", secondNumber);
    while(1){
        if(*p1)
            *p3++=*p1++;
        if(*p2)
            *p3++=*p2++;
        if(*p1 == '\0' && *p2 == '\0')
            break;
    }
    *p3='\0';
    sscanf(third, "%lld", &ret);
    return ret;
}
int main(){
    int first = 2875;
    int second = 852145;
    long long int third;
    third = CreateThirdNumber(first, second);
    printf("%lld\n", third);

    return 0;
} 
```

# c# - Fluent NHibernate M2M 映射（[One] 到 [Many - Many] 到 [One]）

> ID：10814348
> 
> 赞同：2
> 
> 时间：2012-05-30T10:19:25.110
> 
> 标签：c#, orm, fluent-nhibernate

我已经在“整个”internetz 中搜索了这个问题，而且由于它相当复杂，所以很难搜索。尝试搜索“Fluent NHibernate Many to Many with a bridge table with extra columns”等...

好的，为了更容易解释我可以参考的一些表格。表：用户，表：函数，表：User_Has_Function。

一个用户可以有很多功能，一个功能可以有很多用户，这在桥表User_Has_Function中链接。桥表具有仅与关系相关的额外列。

无论如何，iv 发现 FNH 没有任何自动解决方案，基本上你必须使用从 User 到 User_Has_Function 的一对多关系以及从 User_Has_Function 到 Function 的多对一关系，因此“[One] 到 [Many - Many]到[一个]”。

我已经像在这个链接[http://sessionfactory.blogspot.com/2010/12/many-to-many-relationships-with.html](http://sessionfactory.blogspot.com/2010/12/many-to-many-relationships-with.html)中一样解决了它，显然只是使用 FNH 类映射而不是 xml。

但我对解决方案不满意，我真的必须手动完成所有这些工作才能使此功能正常运行吗？同样，现在它在桥接表中插入重复项。

在我的脑海中，我做错了什么，因为我无法想象没有对此的支持。只需使用 SaveAndUpdate()，不会插入重复项，当我删除实体时，关系也会被删除，如果没有留下关系，则删除实体本身等。

好的，这是我的实体和映射，我对 Fluent NHibernate 非常陌生，所以如果我做错了什么，请不要大喊大叫。:)

实体：

```
public class XUser
{
    public virtual int Id { get; set; }
    ...
    public virtual IList<XUserHasXFunction> XUserHasXFunctions { get; set; }

    public XUser()
    {
        XUserHasXFunctions = new List<XUserHasXFunction>();
    }

    public virtual void AddXFunction(XFunction xFunction, int isActive)
    {
        var xUserHasXFunction = new XUserHasXFunction()
                                    {
                                        XUser = this,
                                        XFunction = xFunction,
                                        DeployedDate = DateTime.Now
                                    };
        XUserHasXFunctions.Add(xUserHasXFunction);
        xFunction.XUserHasXFunctions.Add(xUserHasXFunction);
    }

    public virtual void RemoveXFunction(XFunction xFunction)
    {
        var xUserHasXFunction = XUserHasXFunctions.Single(x => x.XFunction == xFunction);
        XUserHasXFunctions.Remove(xUserHasXFunction);
        xFunction.XUserHasXFunctions.Remove(xUserHasXFunction);
    }
}

public class XFunction
{
    public virtual int Id { get; set; }
    ...
    public virtual IList<XUserHasXFunction> XUserHasXFunctions { get; set; }

    public XFunction()
    {
        XUserHasXFunctions = new List<XUserHasXFunction>();
    }

    public virtual void AddXUser(XUser xUser, int isActive)
    {
        var xUserHasXFunction = new XUserHasXFunction()
                                    {
                                        XUser = xUser,
                                        XFunction = this,
                                        DeployedDate = DateTime.Now
                                    };
        XUserHasXFunctions.Add(xUserHasXFunction);
        xUser.XUserHasXFunctions.Add(xUserHasXFunction);
    }

    public virtual void RemoveXUser(XUser xUser)
    {
        var xUserHasXFunction = XUserHasXFunctions.Single(x => x.XUser == xUser);
        XUserHasXFunctions.Remove(xUserHasXFunction);
        xUser.XUserHasXFunctions.Remove(xUserHasXFunction);
    }
}

public class XUserHasXFunction
{
    public virtual int Id { get; set; }
    public virtual XUser XUser { get; set; }
    public virtual XFunction XFunction { get; set; }
    public virtual DateTime DeployedDate { get; set; }
} 
```

映射：

```
public class XUserMap : ClassMap<XUser>
{
    public XUserMap()
    {
        Id(x => x.Id, "ID").GeneratedBy.Sequence("SEQ").Column("ID");
        Table("XUSER");
        ...
        HasMany(x => x.XUserHasXFunctions).Cascade.All();
    }
}

public class XFunctionMap : ClassMap<XFunction>
{
    public XFunctionMap()
    {
        Id(x => x.Id, "ID").GeneratedBy.Sequence("SEQ").Column("ID");
        Table("XFUNCTION");
        ...
        HasMany(x => x.XUserHasXFunctions).Cascade.All();
    }
}

public class XUserHasXFunctionMap : ClassMap<XUserHasXFunction>
{
    public XUserHasXFunctionMap()
    {
        Id(x => x.Id, "ID").GeneratedBy.Sequence("SEQ").Column("ID");
        Table("USER_HAS_FUNCTION");
        Map(x => x.DeployedDate, "DEPLOYED_DATE");

        References(x => x.XUser).ForeignKey("XUSER_ID").Cascade.SaveUpdate();
        References(x => x.XFunction).ForeignKey("XFUNCTION_ID").Cascade.SaveUpdate();
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-30T11:07:21.730

我不明白“我真的必须做所有这些手动工作”部分。什么“所有这些手工工作”？那里没有什么特别的。映射很简单，c# 代码不必对持久性做任何事情，它是简单的旧 OO 设计。

如果您得到重复的行，则您的映射有问题。这可能是因为未映射为逆的逆集合。

如果您不需要从 Function 导航到 User，这很容易。如博客中所述，将关系映射为实体，或者更简单地将其映射为复合元素。

（对不起，我不懂流利）

```
<bag name="Functions" table="User_Has_Function">
  <key column="UserId" />
  <composite-element>
    <many-to-one class="Function"/>
  </composite-element>
</bag> 
```

* * *

**编辑：**

从评论：

> 我所说的手动工作是手动获取和检查以从用户或功能中删除和添加关系。

您是在谈论保持关系一致性所需的 Add 和 Remove 方法吗？这是简单的 OO 设计。如果你没有 NHibernate，你就必须写完全一样的（给定相同的类模型）。

> 从函数中删除用户使其一直级联到用户等等......

不会。删除级联会在删除对象时发生。当你删除一个用户时，你应该级联 user_has_function。从那里，您可能会或可能不会级联这些功能。另一个方向也一样。还有“cascade-all-delete-orphans”的概念。这意味着除了常规级联之外，从集合中删除对象时会自动删除它。这不是级联的。这是一种非常基本的垃圾收集。如果您想在您的情况下使用它，则不应将其同时应用于 user->user_has_function 集合和 function->user_has_function 集合，因为它会尝试删除该对象两次。

不要忘记将两个集合反向映射。如果不这样做，您可能会收到重复的条目。

确保三个映射（user->user_has_function 集合、function->user_has_function 和 user_has_function 类映射）使用相同的表名和外键名。

您不需要弄乱复合键。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-30T10:40:26.200

不久前，我对用户、组、user_group 做了类似的事情，最后不得不使用一种让两个对象都存在于两边的 hacky 方法，并且还手动选择保存或更新。

我不认为有一种很好的*方式*来做你想做的事，我同意从数据库的角度来看这是相当合乎逻辑的事情，但从建模的角度来看是一种痛苦。

因为我还假设您必须为 user_has_function 表使用复合键，以确保您可以为多个用户提供多个功能。我认为大多数人都试图避免并最终使用代理键或其他方法。

我知道这不是一个答案，但是当我发布它时，我从未找到同一个问题的*真正*答案。

这是我不久前发布的一个类似问题：

[Nhibernate复合键问题](https://stackoverflow.com/questions/5304667/nhibernate-composite-key-question)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-31T11:27:12.833

我最终使用 ISet 而不是 ILists 中的关系。ISet 不允许重复，但 IList 允许。要使用 ISet，您必须为存储在 ISet 中的对象覆盖 Equals 和 GetHashCode 方法。

我从 XUser 和 XFunction 级联而不是相反，最终当我因为级联删除一个实体时，所有 3 个表中的每条记录都被删除。

这是我解决它的方法。

实体：

```
public class XUser
{
    public virtual int Id { get; set; }
    ...
    public virtual ISet<XUserHasXFunction> XUserHasXFunctions { get; set; }

    public XUser()
    {
        XUserHasXFunctions = new HashedSet<XUserHasXFunction>();
    }

    public virtual void AddXFunction(XFunction xFunction, int isActive)
    {
        var xUserHasXFunction = new XUserHasXFunction()
                                    {
                                        XUser = this,
                                        XFunction = xFunction,
                                        IsActive = isActive,
                                        DeployedDate = DateTime.Now
                                    };
        if (XUserHasXFunctions.Contains(xUserHasXFunction) && xFunction.XUserHasXFunctions.Contains(xUserHasXFunction))
        {
            return;
        }
        XUserHasXFunctions.Add(xUserHasXFunction);
        xFunction.XUserHasXFunctions.Add(xUserHasXFunction);
    }

    public virtual void RemoveXFunction(XFunction xFunction)
    {
        var xUserHasXFunction = XUserHasXFunctions.Single(x => x.XFunction == xFunction);
        XUserHasXFunctions.Remove(xUserHasXFunction);
        xFunction.XUserHasXFunctions.Remove(xUserHasXFunction);
    }
}

public class XFunction
{
    public virtual int Id { get; set; }
    ...
    public virtual ISet<XUserHasXFunction> XUserHasXFunctions { get; set; }

    public XFunction()
    {
        XUserHasXFunctions = new HashedSet<XUserHasXFunction>();
    }

    public virtual void AddXUser(XUser xUser, int isActive)
    {
        var xUserHasXFunction = new XUserHasXFunction()
                                    {
                                        XUser = xUser,
                                        XFunction = this,
                                        IsActive = isActive,
                                        DeployedDate = DateTime.Now
                                    };
        if (XUserHasXFunctions.Contains(xUserHasXFunction) && xUser.XUserHasXFunctions.Contains(xUserHasXFunction))
        {
            return;
        }
        XUserHasXFunctions.Add(xUserHasXFunction);
        xUser.XUserHasXFunctions.Add(xUserHasXFunction);
    }

    public virtual void RemoveXUser(XUser xUser)
    {
        var xUserHasXFunction = XUserHasXFunctions.Single(x => x.XUser == xUser);
        XUserHasXFunctions.Remove(xUserHasXFunction);
        xUser.XUserHasXFunctions.Remove(xUserHasXFunction);
    }
}

public class XUserHasXFunction
{
    public virtual int Id { get; set; }
    ...
    public virtual DateTime DeployedDate { get; set; }

    public override bool Equals(object obj)
    {
        if (obj == null)
            return false;
        var t = obj as XUserHasXFunction;
        if (t == null)
            return false;
        return XUser == t.XUser && XFunction == t.XFunction;
    }

    public override int GetHashCode()
    {
        return (XUser.Id + "|" + XFunction.Id).GetHashCode();
    }
} 
```

映射：

```
public class XUserMap : ClassMap<XUser>
{
    public XUserMap()
    {
        Id(x => x.Id, "ID").GeneratedBy.Sequence("SEQ").Column("ID");
        Table("XUSER");
        ...
        HasMany(x => x.XUserHasXFunctions).KeyColumn("XUSER_ID").Cascade.All();
    }
}

public class XFunctionMap : ClassMap<XFunction>
{
    public XFunctionMap()
    {
        Id(x => x.Id, "ID").GeneratedBy.Sequence("SEQ").Column("ID");
        Table("XFUNCTION");
        ...
        HasMany(x => x.XUserHasXFunctions)KeyColumn("XFUNCTION_ID").Cascade.All();
    }
}

public class XUserHasXFunctionMap : ClassMap<XUserHasXFunction>
{
    public XUserHasXFunctionMap()
    {
        Id(x => x.Id, "ID").GeneratedBy.Sequence("SEQ").Column("ID");
        Table("XUSER_HAS_XFUNCTION");
        ...
        Map(x => x.DeployedDate, "DEPLOYED_DATE");

        References(x => x.XUser).Column("XUSER_ID");
        References(x => x.XFunction).Column("XFUNCTION_ID");
    }
} 
```

用法：

```
To add relations.
xFunction.AddXUser(xUser, isActive); //visa versa if you like to add a function to a user...
dao.Store(xFunction); //to actually add the relation in the db

now to remove relation
xFunction.RemoveXUser(xUser); //Realtion is removed but neither of the objects xFunction or xUser
dao.Store(xFunction); //...same

to remove a user and its relations.
dao.delete(xUser); //but the xFunction object it was connected to is not removed
//if you want the xFunction object to be removed you have to do that manually. 
```

# javascript - 在鼠标悬停事件jquery上显示什么边框

> ID：10814350
> 
> 赞同：0
> 
> 时间：2012-05-30T10:19:47.377
> 
> 标签：javascript, jquery

```
 $(document).ready(function () {
        $("[data-role=content]").not("#ft").children().live({ 
        mouseover: function () { $(this).css({ border: "1px solid gray" }); }, 
        mouseleave: function () { $(this).css({ border: "0" }); } });
    }); 
```

这是行不通的。没有显示边框。谁能告诉我我错在哪里？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-30T10:24:20.330

从[`.live`文档](http://api.jquery.com/live/)中：

> 不支持链接方法。例如，`$("a").find(".offsite, .external").live( ... );`无效且无法按预期工作。

因此`$(...)....children().live()`不会工作。

改用[`.on`](http://api.jquery.com/on/)：

```
$("[data-role=content]").not("#ft").on( {
    mouseover: function () { 
        $(this).css({ border: "1px solid gray" }); 
    }, 
    mouseleave: function () { 
        $(this).css({ border: "0" }); 
    }
}, '[data-role=content] > *'); 
```

不幸的是，似乎不可能仅用`> *`作事件委托的选择器。当然`[data-role=content] > *`只有在 `[data-role=content]`元素没有嵌套的情况下才能正常工作。

[**演示**](http://jsfiddle.net/LZMkA/)

# python - 使用 scipy 对样本进行离散积分

> ID：10814353
> 
> 赞同：6
> 
> 时间：2012-05-30T10:19:56.380
> 
> 标签：python, integration, scipy, integral

我正在尝试从labview移植到python。

在labview 中有一个函数“Integral x(t) VI”，它将一组样本作为输入，执行样本的离散积分并根据辛普森规则返回一个值列表（曲线下的区域）。

我试图在 scipy 中找到一个等效的函数，例如 scipy.integrate.simps，但是这些函数将整个样本集的总*积分*作为浮点数返回。

如何获得积分值列表而不是积分值的总和？

我只是以错误的方式看待问题吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-05-30T11:26:33.803

我认为您可能稍微不正确地使用[scipy.integrate.simps](http://docs.scipy.org/doc/scipy/reference/generated/scipy.integrate.simps.html#scipy.integrate.simps)。返回的 面积是（传递的第一个参数）`scipy.integrate.simps`下的总面积。`y`第二个参数是可选的，是 x 轴的样本值（每个 y 值的实际 x 值）。IE：

```
>>> import numpy as np
>>> import scipy
>>> a=np.array([1,1,1,1,1])
>>> scipy.integrate.simps(a)
4.0
>>> scipy.integrate.simps(a,np.array([0,10,20,30,40]))
40.0 
```

我想你想在不同限制之间返回同一曲线下的区域？为此，您需要传递所需的曲线部分，如下所示：

```
>>> a=np.array([0,1,1,1,1,10,10,10,10,0])
>>> scipy.integrate.simps(a)
44.916666666666671
>>> scipy.integrate.simps(a[:5])
3.6666666666666665
>>> scipy.integrate.simps(a[5:])
36.666666666666664 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2016-09-05T13:46:00.373

SciPy 中只有一种方法可以进行累积积分，`scipy.integrate.cumtrapz()`只要您不需要特别使用辛普森规则或其他方法，它就可以满足您的需求。为此，您可以按照建议始终自己编写循环。

# java - robolectric 测试中的链接活动

> ID：10814355
> 
> 赞同：1
> 
> 时间：2012-05-30T10:20:04.523
> 
> 标签：java, android, testing, robolectric

我正在尝试在交互活动通信中推送我的测试，并检查例如在正确登录后，我产生了正确的活动（来自 2 个可能的活动）。

这是我的代码的样子：

```
@RunWith(GuiceRobolectricJUnitRunner.class)
public class LoginActivityTest {
@Inject
private LoginActivity activity;
@Inject
private ExplorerActivity startedActivity ;
@Inject
private Context context;

private Button loginButton;
private EditText login;
private EditText password;

@Before
public void setUp() throws Exception {
    activity.onCreate(null);
    loginButton = (Button) activity.findViewById(R.id.identification_login_button);
    login = (EditText) activity.findViewById(R.id.txtLogin);
    password = (EditText) activity.findViewById(R.id.txtPassword);

}

@Online
@Test
public void shouldExploreWhenLoginIsCorrect() throws Exception {
    assertNotNull(activity);
    login.setText("test@test.com");
    password.setText("test");
    activity.setIntent(new Intent());
    loginButton.performClick();
    ShadowActivity shadowActivity = Robolectric.shadowOf(activity);
    Intent startedIntent = shadowActivity.getNextStartedActivity();
    ShadowIntent shadowIntent = Robolectric.shadowOf(startedIntent);
    assertEquals(shadowIntent.getIntentClass(), ExplorerActivity.class);
//      startedActivity.setIntent(startedIntent);
//      startedActivity.onCreate(null);

    }
} 
```

我的问题是我无法从 shadowintent 中检索已启动的活动。有没有办法我可以实现这样的目标？此外，我没有看到任何探索活动的痕迹，我想知道 Robolectric 是否正在努力对每个产卵过程进行沙箱处理。我真的很喜欢 robolectric 中的链式活动测试示例。谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-20T15:59:34.230

由于是3个月前，您可能已经找到了答案，如果没有，您可以使用`newInstance()`已有的，然后照常继续。

```
ExplorerActivity explorerActivity = (ExplorerActivity) shadowIntent.getIntentClass().newInstance();
explorerActivity.setIntent(startedIntent);
explorerActivity.onCreate(null); 
```

# java - 如果电话响铃，则暂停应用程序

> ID：10814359
> 
> 赞同：1
> 
> 时间：2012-05-30T10:20:18.470
> 
> 标签：java, android

刚刚完成我的媒体播放器应用程序，但如果我的应用程序正在运行并且电话响了，它会继续播放。有什么办法可以在电话响起时暂停播放器，并在通话结束后恢复播放？或者，如果电话响起，可能会退出应用程序？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-30T10:24:03.367

几个建议

[http://www.vogella.com/articles/AndroidServices/article.html](http://www.vogella.com/articles/AndroidServices/article.html)

[在通话中暂停音乐播放器，并在 android 通话后再次恢复播放](https://stackoverflow.com/questions/1838055/pause-music-player-on-a-phone-call-and-again-resume-it-after-phone-call-in-andro)

[电话响起时暂停歌曲](https://stackoverflow.com/questions/6016800/pause-song-when-phone-rings)

# wcf - 如何配置 wcf 端点？

> ID：10814360
> 
> 赞同：0
> 
> 时间：2012-05-30T10:20:20.987
> 
> 标签：wcf, wcf-client

```
 <system.serviceModel>
    <services>
      <service
          name="myClass.IService1"  behaviorConfiguration="myService">
        <endpoint
          name="ep1"
          address="http://localhost:57582/Service1.svc"
          contract="IService1"
          binding="basicHttpBinding"
          />
        <endpoint 
             address="mex"
             binding="mexHttpBinding"
             contract="IMetadataExchange" />
      </service>
    </services>

    <behaviors>
      <serviceBehaviors>
        <behavior name="myService">
          <serviceMetadata httpGetEnabled="true" />
          <serviceDebug includeExceptionDetailInFaults="false" />
        </behavior>
      </serviceBehaviors>
    </behaviors>
    <serviceHostingEnvironment multipleSiteBindingsEnabled="true" />
  </system.serviceModel> 
```

但我仍然收到以下错误:: 无法添加服务。服务元数据可能无法访问。确保您的服务正在运行并公开元数据。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-30T10:42:51.367

1.  您的服务名称`IService1`- 这看起来实际上可能是合同。如果您使用的是普通模板，则删除 `I`from`IService1`

2.  如果您是 IIS 托管，则可以删除`address`.svc 文件的位置，因为该位置自动成为该地址。

3.  合约需要完全限定，包括合约接口的命名空间

有了这个，您的元数据应该从`<.svc file location>?wsdl`

# jquery - jQuery UI datepicker 修改文本节点

> ID：10814362
> 
> 赞同：1
> 
> 时间：2012-05-30T10:20:22.823
> 
> 标签：jquery, jquery-ui, jquery-ui-datepicker

我想在有日期选择器时修改给定日期的文本节点。

例如我有这样的观点：

![日期选择器视图](../Images/6fa97c72c700fe010e90144133bdb52e.png)

我希望能够访问给定日期的文本节点，所以要修改它，看起来像这样：![在此处输入图像描述](../Images/1cccc9f6b098af6d2d6d02bc0a33964c.png)

# python - 将峰度应用于 python 中的分布

> ID：10814363
> 
> 赞同：3
> 
> 时间：2012-05-30T10:20:27.370
> 
> 标签：python, statistics, scipy, distribution

我有一个数据集，格式为

频率、方向、归一化功率谱密度、扩散、偏度、峰度

我可以使用[scipy 中偏态正态分布](https://stackoverflow.com/a/5885349/1135883)的最佳答案中的代码来可视化特定记录的分布，但我不确定如何将峰度值应用于分布？

```
from scipy import linspace
from scipy import pi,sqrt,exp
from scipy.special import erf
from pylab import plot,show

def pdf(factor, x):
    return (100*factor)/sqrt(2*pi) * exp(-x**2/2)

def cdf(x):
    return (1 + erf(x/sqrt(2))) / 2

def skew(x,e=0,w=1,a=0, norm_psd=1):
    t = (x-e) / w
    return 2 / w * pdf(norm_psd, t) * cdf(a*t)

n = 540
e = 341.9 # direction
w = 59.3 # spread
a = 3.3 # skew
k = 4.27 # kurtosis
n_psd = 0.5 # normalised power spectral density
x = linspace(-90, 450, n) 

p = skew(x, e, w, a, n_psd)
print max(p)
plot(x,p)
show() 
```

**编辑：**我从我的标题中删除了偏斜正态，因为我认为实际上不可能将峰度值应用于上述分布，我认为需要不同的分布，因为涉及方向，循环统计的分布可能更合适?

感谢下面的答案，我可以使用下面代码中演示的 pdf_mvsk 函数应用峰度，不幸的是，我的偏斜值导致了负 y 值，但答案满足了我的问题。

```
import numpy as np
import matplotlib.pyplot as plt
import statsmodels.sandbox.distributions.extras as extras

pdffunc = extras.pdf_mvsk([341.9, 59.3, 3.3, 4.27])
range = np.arange(0, 360, 0.1)
plt.plot(range, pdffunc(range))
plt.show() 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-30T17:37:26.217

如果您有均值、标准差、偏斜和峰度，那么您可以使用 Gram-Charlier 展开来构建具有这些矩的近似正态分布。

前段时间我对此进行了调查， scipy.stats 有一个错误的功能并被删除。

我不记得这是什么状态，因为很久以前我把它放在 statsmodels 沙箱 [http://statsmodels.sourceforge.net/devel/generated/statsmodels.sandbox.distributions.extras.pdf_mvsk .html#statsmodels.sandbox.distributions.extras.pdf_mvsk](http://statsmodels.sourceforge.net/devel/generated/statsmodels.sandbox.distributions.extras.pdf_mvsk.html#statsmodels.sandbox.distributions.extras.pdf_mvsk)

# java - 一个用于打印国际化、人性化时间段的库（带有舍入）？

> ID：10814367
> 
> 赞同：1
> 
> 时间：2012-05-30T10:20:34.543
> 
> 标签：java, datetime, internationalization

是否有以人们说话的方式打印时间段的库？我的意思是，它应该将以精确的时间单位给出的时间段转换为具有一定程度不精确性的“口述”时间段，例如：

*   360 天 -> “1 年”，
*   32 天 -> "1 个月",
*   385 天 -> 1 年 1 个月"

JodaTime 通过切断所有“零”持续时间部分来解决这个问题，但它甚至不能将几天变成几个月：

```
 PeriodFormatterBuilder builder = new PeriodFormatterBuilder().
        appendYears().appendSuffix(" year(s) ").
        appendMonths().appendSuffix(" month(s) ").
        appendDays().appendSuffix(" day(s)");

    MutablePeriod almostOneYear = new MutablePeriod(0, 0, 0, 360, 0, 0, 0, 0);

    StringBuffer durationInWords = new StringBuffer();
    builder.toPrinter().printTo(durationInWords, almostOneYear, Locale.ENGLISH);

    System.out.println(durationInWords.toString()); 
```

产生“360 天”，甚至不是“n 个月 m 天”（n，m — 取决于什么是“标准”年）。也许我用错了？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-01T15:01:12.670

不要认为有一个图书馆。为什么不创建一个简单的函数来为你做这件事，比如：

```
 public static String toHumanFormat(int totalDays){
    int years = totalDays / 356;
    int months = (totalDays % 356) / 30;
    int days = totalDays % 356 % 30;
    return MessageFormat.format("{0,choice,0#|1#1 year|1<{0} years} " +
            "{1,choice,0#|1#1 month|1<{1} months} " +
            "{2,choice,0#|1#1 day|1<{2} days}",
            years, months, days).trim();
  } 
```

# c++ - C++ 中快速、简单的 CSV 解析

> ID：10814368
> 
> 赞同：9
> 
> 时间：2012-05-30T10:20:39.280
> 
> 标签：c++, csv, standard-library

我正在尝试解析一个简单的 CSV 文件，其数据格式如下：

```
20.5,20.5,20.5,0.794145,4.05286,0.792519,1
20.5,30.5,20.5,0.753669,3.91888,0.749897,1
20.5,40.5,20.5,0.701055,3.80348,0.695326,1 
```

所以，一个非常简单且固定格式的文件。我将此数据的每一列存储到一个 STL 向量中。因此，我尝试使用标准库保持 C++ 方式，并且我在循环中的实现看起来像：

```
string field;
getline(file,line);
stringstream ssline(line);

getline( ssline, field, ',' );
stringstream fs1(field);
fs1 >> cent_x.at(n);

getline( ssline, field, ',' );
stringstream fs2(field);
fs2 >> cent_y.at(n);

getline( ssline, field, ',' );
stringstream fs3(field);
fs3 >> cent_z.at(n);

getline( ssline, field, ',' );
stringstream fs4(field);
fs4 >> u.at(n);

getline( ssline, field, ',' );
stringstream fs5(field);
fs5 >> v.at(n);

getline( ssline, field, ',' );
stringstream fs6(field);
fs6 >> w.at(n); 
```

问题是，这非常慢（每个数据文件有超过 100 万行），在我看来有点不雅。是否有使用标准库的更快方法，或者我应该只使用 stdio 函数？在我看来，整个代码块将减少为一个 fscanf 调用。

提前致谢！

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-05-30T10:30:46.783

使用 7 个字符串流，当你只用一个肯定没有帮助的时候。表现。试试这个：

```
string line;
getline(file, line);

istringstream ss(line);  // note we use istringstream, we don't need the o part of stringstream

char c1, c2, c3, c4, c5;  // to eat the commas

ss >> cent_x.at(n) >> c1 >>
      cent_y.at(n) >> c2 >>
      cent_z.at(n) >> c3 >>
      u.at(n) >> c4 >>
      v.at(n) >> c5 >>
      w.at(n); 
```

如果您知道文件中的行数，则可以在读取之前调整向量的大小，然后`operator[]`使用`at()`. 这样可以避免边界检查，从而获得一点性能。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-30T10:33:18.277

我相信主要的瓶颈（抛开基于 getline() 的非缓冲 I/O）是字符串解析。由于您有“，”符号作为分隔符，您可以对字符串执行线性扫描并将所有“，”替换为“\0”（字符串结束标记，零终止符）。

像这样的东西：

```
// tmp array for the line part values
double parts[MAX_PARTS];

while(getline(file, line))
{
    size_t len = line.length();
    size_t j;

    if(line.empty()) { continue; }

    const char* last_start = &line[0];
    int num_parts = 0;

    while(j < len)
    {
        if(line[j] == ',')
        {
           line[j] = '\0';

           if(num_parts == MAX_PARTS) { break; }

           parts[num_parts] = atof(last_start);
           j++;
           num_parts++;
           last_start = &line[j];
        }
        j++;
    }

    /// do whatever you need with the parts[] array
 } 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-30T11:58:20.847

我不知道这是否会比接受的答案更快，但如果您想尝试一下，我还是可以发布它。[您可以通过使用一些fseek 魔法](https://stackoverflow.com/questions/238603/how-can-i-get-a-files-size-in-c)知道文件的大小，使用单个读取调用加载文件的全部内容。这将比多次读取调用快得多。

然后你可以做这样的事情来解析你的字符串：

```
//Delimited string to vector
vector<string> dstov(string& str, string delimiter)
{
  //Vector to populate
  vector<string> ret;
  //Current position in str
  size_t pos = 0;
  //While the the string from point pos contains the delimiter
  while(str.substr(pos).find(delimiter) != string::npos)
  {
    //Insert the substring from pos to the start of the found delimiter to the vector
    ret.push_back(str.substr(pos, str.substr(pos).find(delimiter)));
    //Move the pos past this found section and the found delimiter so the search can continue
    pos += str.substr(pos).find(delimiter) + delimiter.size();
  }
  //Push back the final element in str when str contains no more delimiters
  ret.push_back(str.substr(pos));
  return ret;
}

string rawfiledata;

//This call will parse the raw data into a vector containing lines of
//20.5,30.5,20.5,0.753669,3.91888,0.749897,1 by treating the newline
//as the delimiter
vector<string> lines = dstov(rawfiledata, "\n");

//You can then iterate over the lines and parse them into variables and do whatever you need with them.
for(size_t itr = 0; itr < lines.size(); ++itr)
  vector<string> line_variables = dstov(lines[itr], ","); 
```

# c# - 从列表框中删除多个项目；在 XML 中更新

> ID：10814370
> 
> 赞同：1
> 
> 时间：2012-05-30T10:21:02.487
> 
> 标签：c#, winforms, linq-to-xml

我使用 XML 文件来存储 ListBox 中的内容并在其中显示内容。

这是一个示例 XML 文件；

```
<?xml version="1.0" encoding="utf-8" standalone="yes"?>
<Root>
<Entry>
<Details>0</Details>
</Entry>
<Entry>
<Details>1</Details>
</Entry>
<Entry>
<Details>2</Details>
</Entry>
<Entry>
<Details>3</Details>
</Entry>
<Entry>
<Details>4</Details>
</Entry>
<Entry>
<Details>5</Details>
</Entry>
<Entry>
<Details>6</Details>
</Entry>
</Root> 
```

用户可以选择 ListBox 上的值（选择模式为 MultiExtended）并删除它们。

我的问题是，展示比解释好；

精选项目——

![选定项目](../Images/4617938c03c34f20e305c0ad70d6da12.png)

按下 Del 键后——

![删除的项目](../Images/521874b25419501886384ada1b2c0aa4.png)

XML 文件的内容与 ListBox 相同。

当我全选并按删除时，结果更加奇怪。

难道我做错了什么 ？

如何获取多个项目的索引并正确处理？

这是我的代码：

```
using System;
using System.Collections.Generic;
using System.ComponentModel;
using System.Data;
using System.Drawing;
using System.Linq;
using System.Text;
using System.Xml.Linq;
using System.Windows.Forms;

namespace XML_ListBox
{
    public partial class Form1 : Form
    {
        string path = "Test.xml";
        public Form1()
        {
            InitializeComponent();
            LoadFile();
        }

        private void LoadFile()
        {
            XDocument xdoc = XDocument.Load(path);
            foreach (var el in xdoc.Root.Elements())
            {
                listBox1.Items.Add(el.Element("Details").Value);
            }
        }

        private void OnDelete(object sender, KeyEventArgs e)
        {
            XElement root = XElement.Load(path);

            if (e.KeyCode == Keys.Delete)
            {
                foreach (Object index in listBox1.SelectedIndices)
                {
                    root.Elements("Entry").ElementAt((int)index).Remove();
                    listBox1.Items.RemoveAt((int)index);
                }

                root.Save(path);
            }
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-30T10:28:58.217

您的代码尝试按索引删除项目，但是每次您删除索引为 X 的项目时，索引 X+1 的项目将移动到索引 X。因此，每次删除索引 = 0 的项目时索引为 5 的项目变为索引 4。

您可以尝试对索引进行排序：

```
if (e.KeyCode == Keys.Delete)
{
  foreach (int index in listBox1.SelectedIndices.Cast<int>().OrderByDescending(i=>i))
  {
    root.Elements("Entry").ElementAt(index).Remove();
    listBox1.Items.RemoveAt(index);
  }

  root.Save(path);
} 
```

但是删除项目的首选方法是通过键值而不是索引值删除

# jquery - 将 jQuery 表单数据传递给 js 变量

> ID：10814377
> 
> 赞同：1
> 
> 时间：2012-05-30T10:21:45.520
> 
> 标签：jquery, variables, redirect

我目前有这段代码来阻止正常的表单提交，而是从 API 检索所需的输出。但是，然后我尝试将此数据设置为变量，以便单击按钮可以重定向到那里（输出数据是 URL）。我有以下代码，但它似乎不起作用。有什么想法吗？

```
var tourl;
$("form#surlform").submit(function(){
        var url = $("input#url").val(); 
        $.get("api/create.php?url=" + url, function(data) {
                $("input#url").val(data);
                $("input#url").select();
                $('#button').hide();
                $('#hbutton').show();
                var tourl = data;
            });

        return false;
    });
    });
$('#hbutton').bind('click', function() {
        window.location = tourl;
    }); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-30T10:24:59.747

您需要`bind`在成功事件处理程序中移动调用：

```
$.get("api/create.php?url=" + url, function(data) {
    $("input#url").val(data);
    $("input#url").select();
    $('#button').hide();
    $('#hbutton').show();
    var tourl = data;
    $('#hbutton').bind('click', function() {
        window.location = tourl;
    });
}); 
```

首先，`tourl`范围是成功事件处理程序。它在该功能之外不可用。

`tourl`其次，由于您发出 AJAX 请求，`undefined`直到该请求返回响应。唯一确定`tourl`已分配其值的方法是等到回调执行任何依赖于它的操作。

如评论中所述，如果多次执行 AJAX 请求，这会将多个事件处理程序绑定到您的按钮。为了解决这个问题，您可以在绑定新事件处理程序之前取消绑定事件处理程序。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-30T10:24:09.617

您正在封闭范围内定义一个新变量。改变

```
var tourl = data; 
```

到

```
tourl = data; 
```

然后将其分配给全局变量。

# windows-phone-7 - Facebook offline_access 弃用，在 Windows Phone 上如何处理？

> ID：10814378
> 
> 赞同：1
> 
> 时间：2012-05-30T10:21:49.693
> 
> 标签：windows-phone-7, facebook-c#-sdk, facebook-oauth, facebook-access-token

我正在开发一个使用 Facebook API 的 Windows Phone 应用程序。为此，我需要用户登录并授权我的应用程序，以便我可以获得 access_token。我已经这样做了，效果很好。

**问题：**如何在下次启动应用程序时继续使用 Facebook API，而无需用户再次登录？

**我做什么：**当用户登录时，我保存 access_token 和过期时间。稍后，我可以在进行 API 调用时使用 access_token。这一切都很好。

**问题：**由于 offline_access 不再工作，我获得的访问令牌有效期为 60 天。这意味着 60 天后他们将停止工作。我可以在不要求用户再次登录的情况下更新这些令牌吗？

**我的研究：** 我阅读了文档，但似乎只提到了 Android 和 iOS。虽然我认为 Windows Phone 会类似，但我不知道该怎么做。这些其他平台的 Facebook 库具有以下内容：

```
facebook.extendAccessTokenIfNeeded(this, null); 
```

我无法为 Windows Phone 找到类似的方法。虽然我在某处读到这实际上不适用于 Android，但它暗示必须有办法做到这一点。

我读到了允许更新访问令牌的新端点，但它似乎只能将短期令牌扩展到长期令牌。对我来说，这里的文档（第 4 节）有点不清楚： [https ://developers.facebook.com/roadmap/offline-access-removal/](https://developers.facebook.com/roadmap/offline-access-removal/)

任何帮助表示赞赏，谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-30T10:29:47.863

按照您提供的链接上的离线访问删除指南进行操作。它具有 API 调用，可用于为用户获取长期访问令牌 - 这是`offline_access`.

具体请参见场景 4。

从理论上讲，Windows Mobile 应该属于 Exception 2 / 3。看看 Windows Mobile SDK 是否可以选择以类似于 iOS 和 Android 的方式访问 access_token。

# iphone - 直接使用NSString

> ID：10814380
> 
> 赞同：2
> 
> 时间：2012-05-30T10:21:55.787
> 
> 标签：iphone, objective-c, nsstring

我发现我通常直接使用 NSString ，例如：

```
 self.text = @"word";
 label.text = @"word";
 function(@"word"); 
```

我认为直接使用 NSString 是一种错误的方式，因为 @"word" 在使用后会有 2 的 retainCount。那正确吗？

@"" 的 retainCount 到底是什么？它是自动释放对象还是保留为 1？

更重要的是，我遇到了一些内存泄漏，如下图所示：

![在此处输入图像描述](../Images/12353b7b31d8e328a95d0761a5a850ef.png)

我怀疑它与直接使用 NSString 有关。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-30T10:25:09.933

本质上，NSString 字面量的保留计数是无限的。这些对象的内存由编译器在编译时保留，并且在您的应用程序运行期间永远不会被释放，无论您尝试保留或释放它们的频率如何。

这是另一个很好的例子，为什么关心保留计数是错误的。您应该只关心黄金内存管理规则：如果您拥有一个对象的所有权（使用`alloc`、或） `new`，您必须稍后释放或自动释放它。否则，你不会。`copy``retain`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-30T10:26:46.253

引用[字符串编程指南](https://developer.apple.com/library/mac/#documentation/Cocoa/Conceptual/Strings/Articles/CreatingStrings.html#//apple_ref/doc/uid/20000148-CJBCJHHI)

> 在源代码中创建字符串对象的最简单方法是使用 Objective-C 的 @"..." 构造：
> 
> NSString *temp = @"/tmp/scratch";
> 
> 请注意，以这种方式创建字符串常量时，应避免使用 7 位 ASCII 字符以外的任何字符。这样的对象是在编译时创建的，并且存在于程序的整个执行过程中。编译器使此类对象常量在每个模块的基础上都是唯一的，并且它们永远不会被释放，尽管您可以像处理任何其他对象一样保留和释放它们。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-30T10:27:02.957

不，直接使用 @"" 来声明一个自动释放的 NSString 是件好事。但是 NSString 以特定的方式保留，并且实际上不可能知道在运行时正在做什么。有时您可能会有奇怪的保留计数。不要担心您的 48 字节泄漏......它与您的 nsstring 无关。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-30T10:41:56.680

> @"word" 使用后的 retainCount 为 2。那正确吗？

不，这完美地说明了为什么考虑保留计数是一个内部实现细节是不好的。您可以将字符串文字视为可执行映像“拥有”的字符串，因此它们不会消失。您应该像对待任何其他 Objective-C 对象一样对待它们。

如果您确实偷偷看了一下字符串文字的保留计数，您会发现它被设置为一个非常大的数字（类似于 an 的最大值`NSInteger`）。这被视为特殊值，`retain`并且`release`它们不会改变。

字符串文字的内存在编译时作为二进制映像的一部分分配。它永远不会消失。您的内存泄漏不是因为这个。

# vb.net - 这可以在类扩展中设置属性吗？

> ID：10814386
> 
> 赞同：0
> 
> 时间：2012-05-30T10:22:16.040
> 
> 标签：vb.net, reflection, attributes, extension-methods

这可以`<Attributes>`在类扩展中的方法上使用吗？

这是A类

```
Public Class Goblin
  Inherits Monster

  Enum goblinsRole
    Chief
    Grount
  End Enum

  Public Property name As String
  Public Property role As goblinsRole

  Private healthPoints As Integer

  Public Sub New(into As Integer)
     healthPoints = into
  End Sub

 Public Sub hitBy(damage As Integer)
    <...>
 End Sub

 <ValidationMethod()>
 Public Function checkByTheWitchDoctor()
    <...>
 End Function

 <ValidationMethod()>
 Public Function isAlive()
    <...>
 End Function
End Class 
```

这是此类 A 的扩展

```
Module ModuleExtension

 <ValidationMethod()>
 <Extension()>
  Public Sub PrintDateOfDeath(ByVal aGoblin As DomainModelFake.Goblin)
    <...>
  End Sub

 <Extension()>
 <ValidationMethod()>
  Public Function smashedByAGrount(ByVal aGoblin As DomainModelFake.Goblin) As Boolean
     <...>
  End Function

End Module 
```

当我使用反射来获取使用此属性标记的方法时，我只获取位于 A 类定义中的方法列表，而不获取位于扩展中的方法列表。

概括地说，这意味着我只看到：

*   checkByTheWitchDoctor()
*   活着（）

但我**没有**看到：

*   PrintDateOfDeath()
*   粉碎ByAGrount()

**这是反射的正常行为吗？它不搜索扩展名？**

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-30T13:19:47.640

我假设您尝试找到`Goblin`该类的所有方法，如果是这种情况，那么是的，这是反射的正常行为。

扩展方法**不是**它们设计的类型的成员。如果你这样做`Type.[GetType]("Goblin").GetMethods()`，你只会得到那里定义的方法。

扩展方法只不过是用特殊属性修饰的静态（在 VB 中共享）方法。所以如果你想找到那些，你需要获取`ModuleExtension`.

如果您不知道`ModuleExtension`运行时的名称，您可以尝试在程序集中查找所有静态类型，并在这些静态方法中搜索标有 an`ExtensionAttribute`并接受 type 的第一个参数的静态方法`Goblin`。

# android - 应用程序在 3.0 中崩溃，但在 2.3.3 中运行良好

> ID：10814393
> 
> 赞同：2
> 
> 时间：2012-05-30T10:22:38.220
> 
> 标签：android, sockets, android-3.0-honeycomb

大家好，我正在尝试创建一个使用套接字连接的应用程序，我遇到了一些示例，当我在 2.3.3 上运行下面的代码时，它运行良好，在 3.0 中同样崩溃。

```
package com.simple.client;

import android.app.Activity;
import java.io.DataInputStream;
import java.io.DataOutputStream;
import java.io.IOException;
import java.net.Socket;
import java.net.UnknownHostException;

import android.app.Activity;
import android.os.Bundle;
import android.view.View;
import android.widget.Button;
import android.widget.EditText;
import android.widget.TextView;
import android.os.Bundle;

public class SimpleClientActivity extends Activity {
EditText textOut;
TextView textIn;
/** Called when the activity is first created. */
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);
    textOut = (EditText)findViewById(R.id.textout);
    Button buttonSend = (Button)findViewById(R.id.send);
    textIn = (TextView)findViewById(R.id.textin);
    buttonSend.setOnClickListener(buttonSendOnClickListener);
}

Button.OnClickListener buttonSendOnClickListener
= new Button.OnClickListener(){

public void onClick(View arg0) {
// TODO Auto-generated method stub
Socket socket = null;
DataOutputStream dataOutputStream = null;
DataInputStream dataInputStream = null;

try {
 socket = new Socket("172.16.2.172", 8899);
 dataOutputStream = new DataOutputStream(socket.getOutputStream());
 dataInputStream = new DataInputStream(socket.getInputStream());
 dataOutputStream.writeUTF(textOut.getText().toString());
 textIn.setText(dataInputStream.readUTF());
} catch (UnknownHostException e) {
 // TODO Auto-generated catch block
 e.printStackTrace();
} catch (IOException e) {
 // TODO Auto-generated catch block
 e.printStackTrace();
 e.printStackTrace();
}
finally{
 if (socket != null){
  try {
   socket.close();
  } catch (IOException e) {
   // TODO Auto-generated catch block
   e.printStackTrace();
  }
 }

 if (dataOutputStream != null){
  try {
   dataOutputStream.close();
  } catch (IOException e) {
   // TODO Auto-generated catch block
   e.printStackTrace();
  }
 }

 if (dataInputStream != null){
  try {
   dataInputStream.close();
  } catch (IOException e) {
   // TODO Auto-generated catch block
   e.printStackTrace();
   }
  }
 }
}};
} 
```

我已经尝试了所有但无法弄清楚发生了什么，

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-30T10:27:38.003

我的猜测是，由[StrictMode.ThreadPolicy](http://developer.android.com/reference/android/os/StrictMode.ThreadPolicy.html)引起的错误。在 android 3.0 中，您不能在同一个 UI 线程中访问网络。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-30T10:40:41.300

您的布局是否有多个资源文件夹？如果是，也许你没有相关的布局。

# phpmyadmin - 通过phpmyadmin登录mysql失败

> ID：10814426
> 
> 赞同：0
> 
> 时间：2012-05-30T10:24:50.963
> 
> 标签：phpmyadmin

以下是我在配置文件中修改的详细信息：

```
$cfg['Servers'][$i]['host']          = 'localhost';
$cfg['Servers'][$i]['port']          = '';
$cfg['Servers'][$i]['socket']        = '';
$cfg['Servers'][$i]['connect_type']  = 'tcp';
$cfg['Servers'][$i]['extension']     = 'mysqli';
$cfg['Servers'][$i]['compress']      = FALSE; 
$cfg['Servers'][$i]['controluser']   = '';
$cfg['Servers'][$i]['controlpass'] = '';
$cfg['Servers'][$i]['auth_type']     = 'config';
$cfg['Servers'][$i]['user']          = 'pma';
$cfg['Servers'][$i]['password']      ='pmapass'; 
```

我在 mysql 中为 pma 创建了一个帐户

以下是我为 pma 运行的权限脚本：

授予所有权限*。*到“pmapass”标识的“pma”@“localhost”；

但是，当我尝试使用 [http://][localhost]/[phpmyadmin] 登录（去掉 url 中的方括号）并将 pma 对作为凭据传递时，我会继续重定向到 index.php地址栏中的 guid 类型的东西，除了用户名/密码框外，屏幕上没有任何消息指示

MySql 版本是 5.5.24，在 xp 机器上运行。

我在上述步骤中遗漏了什么吗？有人可以就上述问题给我建议吗

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-05T13:03:57.023

检查服务器和客户端上的日期。

那里的不匹配可能会导致浏览器丢弃您的 cookie，从而有效地立即将您注销。

# android - OnActivityResult 未在 TabGroupActivity 中调用

> ID：10814428
> 
> 赞同：0
> 
> 时间：2012-05-30T10:24:54.887
> 
> 标签：android, tabs, activitygroup

我有一个带有四个选项卡的选项卡活动

首页->Tab1->Activity1->Activity2![在此处输入图像描述](../Images/78c6e47593f4480ee0268e3838e3154e.png)

在 Activity2 我有一个文本框。当我单击文本框时，我正在显示 CalenderActivity，如下所示 ![活动2](../Images/d85689c3eaab6ac5cb2ebd571e002224.png)

单击日期时，必须在文本框中显示日期；为此，我在 Activity3 中编写 onActivityResult 但这不是调用。我必须做什么才能在文本框中显示日期？我正在使用 TabGroupActivity 在单个选项卡中的活动之间导航...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-30T08:40:33.460

您将子活动称为

```
getParent().startActivityForResult(schedule, req_code); 
```

并在 tabgropActivity 的 onActivityresult() 中编写你想做的功能

# javascript - 使用 box2d 创建关节以将身体固定到另一个身体

> ID：10814431
> 
> 赞同：1
> 
> 时间：2012-05-30T10:25:07.803
> 
> 标签：javascript, html, box2d

我想创建一个固定在地面上的弹射器，因为稍后我将使用鼠标关节旋转它这是我将弹射器固定到地面的代码

{

var revJointDef = new Box2D.Dynamics.Joints.b2RevoluteJointDef;

```
revJointDef.Initialize(ground,catapult,b2Vec2(catapult_height,ground_height));  

revJointDef.enableMotor = true;    

revJointDef.enableLimit = true;   

revJointDef.motorSpeed  = -1260;    

revJointDef.lowerAngle  = 0.15;    

revJointDef.upperAngle  = 1.30;   

revJointDef.maxMotorTorque = 4800; 
```

问题是关键点，我认为 b2Vec2(catapult_height,ground_height) 是错误的，我应该把什么作为参数？

# android - 当应用程序被删除时，PendingIntents 会发生什么？

> ID：10814432
> 
> 赞同：6
> 
> 时间：2012-05-30T10:25:07.900
> 
> 标签：android, uninstallation, android-pendingintent

正如标题所暗示的，我有兴趣了解 Android 对已从设备中删除的应用程序创建的 PendingIntents 做了什么。

到目前为止，我的研究涉及使用 AlarmManager 和未决意图设置警报。在正常情况下，一切都按预期工作。为了测试卸载案例，我使用 AlarmManager 和 PendingIntent 为将来的某个时间点设置了一个警报，然后删除该应用程序。我观察到*似乎*什么都没有发生 - 例如，logcat 没有显示我的 PendingIntent 尝试启动使用缺少的类的错误。

我找不到这方面的文档，所以想知道是否有人知道这方面的知识或我可以参考的链接。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-30T10:32:33.833

据我所知，即使应用程序退出，挂起的意图也会运行，但使用卸载的应用程序删除无法运行此挂起的意图，因为应用程序缓存目录和应用程序数据已被删除，[pendingIntent](http://developer.android.com/reference/android/app/PendingIntent.html)

# php - 你能发现 foreach() 错误的根源吗？

> ID：10814440
> 
> 赞同：0
> 
> 时间：2012-05-30T10:25:51.657
> 
> 标签：php, scripting

我正在编写一个脚本来将 MySQL 查询导出为 CSV 文件。到目前为止一切顺利，除了我得到第二个`foreach()`语句的无效参数！我尝试使用`mysql_data_seek`，但这并没有解决问题。AFAK`$row`是一个数组，所以它应该可以工作。

```
<?php

$conn = mysql_connect("12**strong text**7.0.0.1", "root", "root") or die(mysql_error());
mysql_select_db("database", $conn); 

if(isset($_POST['submit']))
{
    $filename = 'uploads/'.strtotime("now").'.csv';

    $fp = fopen($filename,"w");

    $sql = mysql_query("SELECT * FROM master") or die(mysql_error());
    $row = mysql_fetch_assoc($sql);

    $seperator = "";
    $comma = "";

    foreach($row as $name => $value)
    {
        $seperator .= $comma . '' .str_replace('','""',$name);
        $comma = ",";
    }

    $seperator .= "\n";

    fputs($fp,$seperator);

    mysql_data_seek($sql, 0);

    while( $row = mysql_fetch_assoc($sql) );
    {
        $seperator = "";
        $comma = "";
        foreach($row as $name => $value)
        {
            $seperator .= $comma . '' .str_replace('','""',$value);
            $comma = ",";
        }
        $seperator .= "\n";
        fputs($fp,$seperator);
    }
    fclose($fp);
}

?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-30T11:50:30.350

我不明白为什么你添加了第一个 foreach 循环，你的代码应该如下

```
<?php

$conn = mysql_connect("12**strong text**7.0.0.1", "root", "root") or die(mysql_error());
mysql_select_db("database", $conn); 

if(isset($_POST['submit']))
{
    $filename = 'uploads/'.strtotime("now").'.csv';

    $fp = fopen($filename,"w");

    $sql = mysql_query("SELECT * FROM master") or die(mysql_error());
    while( $row = mysql_fetch_assoc($sql) );
    {
        $seperator = "";
        $comma = "";
        foreach($row as $name => $value)
        {
            $seperator .= $comma . '' .str_replace('','""',$value);
            $comma = ",";
        }
        $seperator .= "\n";
        fputs($fp,$seperator);
    }
    fclose($fp);
}

?> 
```

# .net - 限制数字字符数量的正则表达式是什么？

> ID：10814441
> 
> 赞同：3
> 
> 时间：2012-05-30T10:26:09.170
> 
> 标签：.net, regex, expresso

无法找出正则表达式问题。

我们正在寻找 2 个数字，然后是连字符或空格，然后是 6 个数字。只能是 6 个数字，因此 6 个数字后必须有一个字母字符或一些标点符号或空格，*或者 6 个数字必须位于字符串的末尾。*

字符串中的其他位置允许使用其他数字，只要它们是分开的即可。

所以，这些应该匹配：

```
foo 12-123456 bar  
12-123456 bar  
foo 12-123456  
foo12-123456bar  
12-123456bar  
foo12-123456  
12-123456bar 99
foo12-123456 99 
```

这些不应该匹配：

```
123-12345 bar  
foo 12-1234567  
123-12345bar  
foo12-1234567 
```

这是我们使用的：

`\D\d{2}[-|/\ ]\d{6}\D`

在[Expresso](http://www.ultrapico.com/Expresso.htm)中这很好。

但是在我们的 .net 应用程序中实际运行时，这种模式无法匹配 6 个数字位于字符串末尾的示例。

试过这个：

`\D\d{2}[-|/\ ]\d{6}[\D|$]`

它仍然不匹配

```
foo 12-123456 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-30T10:51:58.493

我会重申你的模式

> 只能是 6 个数字，因此 6 个数字后必须有一个字母字符或一些标点符号或空格，或者 6 个数字必须位于字符串的末尾。

到

> 必须只有 6 个数字，所以第六个数字后面不能有数字

然后使用**否定的前瞻断言**来表达这一点。同样，在模式的开头使用**否定的后向断言**来表示前两位数字之前的任何内容都不是数字。一起：

```
var regex = new Regex(@"(?<!\d)\d{2}[- ]\d{6}(?!\d)");

var testCases = new[]
                    {
                        "foo 12-123456 bar",
                        "12-123456 bar",
                        "foo 12-123456",
                        "foo12-123456bar",
                        "12-123456bar",
                        "foo12-123456",
                        "123-12345 bar",
                        "foo 12-1234567",
                        "123-12345bar",
                        "foo12-1234567",
                    };

foreach (var testCase in testCases)
{
    Console.WriteLine("{0} {1}", regex.IsMatch(testCase), testCase);
} 
```

根据需要，这会产生 6 个`True`s，然后是 4 个`False`s。

断言`(?<!\d)`和`(?!\d)`分别说“这里之前没有数字”和“这里后面没有数字”。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-30T11:01:23.527

这应该这样做：

```
(^|\D)\d{2}[- ]\d{6}($|\D) 
```

它查找行首或非数字，然后是您提到的 2-6 或 2 6 模式，然后是行尾或另一个非数字。

用 perl 编辑和测试，匹配前 8 个，而不是下 4 个。

C# 可能有 RegEx 的其他规范。我不确定是否或哪些更改是必要的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-30T10:40:10.883

好的，根据您进一步编辑的问题，答案如下所示：`^(?:.*?\D+?)?(\d{2}[-|/\ ]\d{6})(?:\D+?.*?)?$`它匹配所有字符串并捕获数字。

**upd**：添加了一些代码来测试并显示匹配。

```
MessageBox.Show(Regex.Replace(
  "1 foo 12-123456 bar\r\n12-123456 bar\r\nfo23o 12-123456\r\nfoo12-123456bar3\r\n" +
  "12-123456bar\r\nfoo12-123456\r\n\r\nThese should not match:\r\n\r\n" +
  "123-12345 bar\r\nfoo 12-1234567\r\n123-12345bar\r\nfoo12-1234567",
  @"^(?:.*?\D+?)?(\d{2}[-|/\ ]\d{6})(?:\D+?.*?)?$",
  @"[match, cap: '$1']",
  RegexOptions.Multiline
)); 
```

# c++ - 如何使用 .Call 将 3D 数组从 R 传递到 C++

> ID：10814442
> 
> 赞同：1
> 
> 时间：2012-05-30T10:26:12.540
> 
> 标签：c++, r

我找不到如何做到这一点。我在 R 中有一个 3D 数组，我想在 C++ 中使用它。有人可以帮忙吗？非常感谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-30T13:22:14.700

您已经找到了`.Call()`允许您将[R](http://www.r-project.org)对象传递给 C++ 的接口。然后你有（至少）两个选择：

1.  通过 R API 使用 C 和宏，如 R 附带的“编写 R 扩展”手册中所述。它有效，很多人使用它，并且已经通过了时间的考验。这也有点乏味，至少对我来说是这样。

2.  通过我们的[Rcpp](http://cran.r-project.org/package=Rcpp)包和它在 R API 之上提供的 API 使用 C++。对于多维数组，我们没有太多的例子，但是可以做到。在内部，这些当然只是具有维度属性的连续向量。

3.  您还可以使用[Rcpp](http://cran.r-project.org/package=Rcpp)转到具有适当“立方体”类型的 RcppArmadillo，这是从 2d 矩阵到 3d 的概括——请参阅[Armadillo](http://cran.r-project.org/package=RcppArmadillo)[文档](http://arma.sf.net)。

**编辑：** 这是一个最小的例子：

```
R> library(inline)
R> f <- cxxfunction(signature(ms="numeric"), plugin="Rcpp", body='
+   Rcpp::NumericVector m(ms);
+   return m.attr("dim");
+ ')
R> A <- array(1:8, c(2,2,2)) # 3-d array
R> f(A)                      # call C++ function defined above to get dim array
[1] 2 2 2
R> 
```

除了返回您传入的数组的维度向量之外，它并没有做太多的事情。对于实际访问，您可能必须手动计算维度步幅——我们根本没有看到对矩阵以外的任何东西有太多需求。上次我需要这个时，我只是通过[RcppArmadillo](http://cran.r-project.org/package=RcppArmadillo)`arma::cube`从[犰狳](http://arma.sf.net)中使用过。

# jpa - 在 LocalBean 中同时使用 EntityManager 和 DataSource

> ID：10814443
> 
> 赞同：0
> 
> 时间：2012-05-30T10:26:12.577
> 
> 标签：jpa

我想在一个 bean 中做一些预定的 JDBC 工作。

我得到了。

```
Internal Exception: java.sql.SQLException: Error in allocating a connection.
Cause: java.lang.IllegalStateException: Local transaction already has 1 non-XA Resource:
cannot add more resources.
Error Code: 0 
```

```
@LocalBean @Stateless
class MyBean {

    public void doJPA() {
    }

    @Schedule
    public void doJDBC() {
    }

    @PersistentContext
    EntityManager entityManager;

    @Resource
    DataSource dataSource;
} 
```

我做错什么了吗？

我只需要把豆子分开吗？

谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-30T14:39:02.013

如果您使用与 JPA 相同的 DataSource，则服务器应该为您提供相同的连接，因此您不应收到此错误。您是否使用不同的数据源？

您还可以使用 unwrap() 从 EntityManager 获取 JDBC 连接

见， [http://wiki.eclipse.org/EclipseLink/Examples/JPA/EMAPI#Getting_a_JDBC_Connection_from_an_EntityManager](http://wiki.eclipse.org/EclipseLink/Examples/JPA/EMAPI#Getting_a_JDBC_Connection_from_an_EntityManager)

# android - 在启动应用程序时关闭设备音乐

> ID：10814445
> 
> 赞同：1
> 
> 时间：2012-05-30T10:26:15.457
> 
> 标签：android, audio, android-ndk, android-mediaplayer, cocos2d-android

我正在开发具有背景音乐的应用程序。我现在面临的问题是，如果我在我的 android 设备上播放一首歌曲然后启动我的应用程序，音乐在后台播放，我的应用程序背景音乐也随之开始。两个音乐文件都会播放。我想要做的就是在已经播放的设备音乐上覆盖我的应用音乐。是否有一个 AudioSessionCategory 可供选择，就像 iOS 一样？

当我使用 Cocos2dx 时，我可以做些什么来解决这个问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-30T10:58:50.473

也许我错了，但你只需要在`onResume()`你的应用程序的`Activity`. 你可以使用它`AudioManager`

[这](http://developer.android.com/training/managing-audio/audio-focus.html#RequestFocus)是有关更多信息的文章。

# android - 在我退出活动并重新启动之前，我的 Android SQLite DB 查询不会返回新插入的数据

> ID：10814446
> 
> 赞同：0
> 
> 时间：2012-05-30T10:26:30.090
> 
> 标签：android, sqlite, sqliteopenhelper

我在我的 android 应用程序中使用 SQLite DB 来存储足球运动员并维护他们所属的名单。管理这些花名册的活动能够打开 2 个对话窗口，1 个用于将当前花名册保存到数据库，1 个用于从数据库加载现有花名册。

保存花名册然后打开加载花名册的对话框时，在我对现有花名册的查询中找不到新保存的花名册。如果我退出活动并重新启动它，则会列出新的名册并且可以正常加载。

这是在数据库中查询现有名册名称的代码

```
public String[] fetchRosterNames() {        

    String query = "SELECT "+ _ID + ", " + ROSTER_NAME + ", COUNT(" + ROSTER_NAME + ") As `NUM_PLAYERS`" +
            " FROM " + TABLE_NAME + 
            " GROUP BY " + ROSTER_NAME;
    SQLiteDatabase db = getReadableDatabase();
    Cursor cursor = db.rawQuery(query, null);

    ArrayList<String> rosterNames = new ArrayList<String>();
    if(cursor.getCount() > 0){
        while(!cursor.isLast()){
            cursor.moveToNext();
            rosterNames.add(cursor.getString(1));
        }
    }       
    cursor.close();
    db.close();
    return rosterNames.toArray(new String[rosterNames.size()]);
} 
```

这是将花名册插入数据库的代码 public void insertRoster(String roster_name, LeagueRoster roster){

```
 SQLiteDatabase db = getWritableDatabase();
    Iterator<Player> players = roster.getFullRoster();

    while(players.hasNext()){

        Player player = players.next();         

        ContentValues values = new ContentValues();
        Log.e("MySQLiteHelper: insertRoster()", player.getName());

        values.put(PlayerStats.NAME.name(), player.getName());
        values.put(PlayerStats.POSITION.name(), player.getPosition().name());
        values.put(PlayerStats.TEAM.name(), player.getTeam().name());           
        values.put(ROSTER_NAME, roster_name);   

        db.insertOrThrow(TABLE_NAME, null, values);
    }

    db.close();
} 
```

最后，这是我的活动中创建两个不同对话框的代码

```
protected Dialog onCreateDialog(int id){

    AlertDialog.Builder builder = new AlertDialog.Builder(this);

    switch(id) {
    case 1:         
        final MySQLiteHelper rosterData = new MySQLiteHelper(this);
        final String[] items = rosterData.fetchRosterNames();
        builder.setTitle("Select the roster you would like to load");
        builder.setItems(items, new DialogInterface.OnClickListener(){

            @Override
            public void onClick(DialogInterface dialog, int which) {
                Log.e("Roster Names Dialog", items[which]);
                LeagueRoster loadedRoster = rosterData.fetchRoster(items[which]);
                if(loadedRoster != null){
                    roster = loadedRoster;
                    db.setRoster(roster);
                    redrawTables();
                }
            }               
        });

        dialog = builder.create();
        break;
    case 2:
    default:
        LayoutInflater inflater = (LayoutInflater)getSystemService(LAYOUT_INFLATER_SERVICE);
        View saveRosterView = inflater.inflate(R.layout.saveroster_dialog, null);
        builder.setView(saveRosterView);

        final EditText nameField = (EditText)saveRosterView.findViewById(R.id.saveroster_dialog_editText);
        Button saveButton = (Button)saveRosterView.findViewById(R.id.saveroster_dialog_button);

        saveButton.setOnClickListener(new OnClickListener(){

            @Override
            public void onClick(View v) {
                MySQLiteHelper rosterData = new MySQLiteHelper(RosterActivity.this);
                String rosterName = nameField.getText().toString();
                rosterData.insertRoster(rosterName, roster);
                dialog.dismiss();
            }               
        });

        dialog = builder.create();
        break;
    }
    return dialog;
} 
```

如果有人有任何想法，我将非常感谢您对这个问题的帮助......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-30T23:42:32.310

好的，我发现了问题所在。它与 Android 如何处理 Dialogs 而不是 SQLite 有关。从Android文档...

[http://developer.android.com/guide/topics/ui/dialogs.html](http://developer.android.com/guide/topics/ui/dialogs.html)

> 如果您使用 onCreateDialog(int) 来管理对话框的状态（如上一节所述），那么每次关闭对话框时，Activity 都会保留 Dialog 对象的状态。如果您决定不再需要此对象或者清除状态很重要，那么您应该调用 removeDialog(int)。这将删除>任何对该对象的内部引用，如果显示对话框，它将关闭它。

确保每次按下我的加载按钮时都完全重新创建对话框修复了问题。以前 SQLite 查询没有重新运行，因此无法为对话框提供新数据。

感谢大家的帮助！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-30T10:40:07.360

很奇怪，但每次插入后尝试 db.commit() ？

# active-directory - 当用户登录到 Windows AD 环境时，会查找哪个属性？

> ID：10814447
> 
> 赞同：0
> 
> 时间：2012-05-30T10:26:32.843
> 
> 标签：active-directory

当用户登录到 Windows Active Directory 环境时，他/她的密码将根据 AD 服务器进行验证。我的问题是什么属性与登录名匹配？是 userPrincipalName 还是 uid 或其他？

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-22T21:18:24.797

在 Jakob 给了我线索之后，我用谷歌搜索了 SAMAccountName，然后我找到了 userPrincipalName。samAccountName 似乎适用于 Windows 2K 和旧系统。有关详细信息，请参阅[http://msdn.microsoft.com/en-us/library/windows/desktop/ms679635%28v=vs.85%29.aspx](http://msdn.microsoft.com/en-us/library/windows/desktop/ms679635%28v=vs.85%29.aspx)。

# jquery - 添加和更改按钮上的相同滑块单击

> ID：10814449
> 
> 赞同：0
> 
> 时间：2012-05-30T10:26:43.247
> 
> 标签：jquery

我的页面上有两个按钮。谁能建议我如何在按钮单击时添加 jquery 滑块。我还需要在第二次单击按钮时进行更改，例如将滑块 1 更改为滑块 2。我用ajax尝试过，但失败了。提前谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-30T10:38:19.247

首先，没有任何代码很难告诉你，

其次，我不知道 ajax 是否会帮助您滑动您想要的图像，请参阅滑块正在使用`setInterval()`功能意味着您的图像将在一段时间后更改有关更多详细信息，请参阅此处的基本示例[setInterval](http://www.jquery4u.com/jquery-functions/setinterval-example/#.T8X3nbAjFK8)

对于点击事件，只需执行以下操作：

```
var startSlide = setInterval(function(){}, yourtime); 
```

如果您想点击开始，请执行以下操作：

```
$('#yourid').click(function(){
var startSlide = setInterval(function(){ //do your stuff }, yourtime);
}); 
```

如果您想在任何事件上停止此滑块，那么这样做`clearInterval(startSlide)`会停止您的滑块。

希望对你有帮助

# python - 如何在 Python 中访问类内的全局变量

> ID：10814452
> 
> 赞同：81
> 
> 时间：2012-05-30T10:26:53.350
> 
> 标签：python, scope, global

我有这个：

```
g_c = 0

class TestClass():
    global g_c
    def run(self):
        for i in range(10):
            g_c = 1
            print(g_c)

t = TestClass()
t.run()

print(g_c) 
```

我如何才能真正修改我的全局变量 g_c？

* * *

## 回答 #1

> 赞同：129
> 
> 时间：2012-05-30T10:28:36.770

通过`global`在访问它的函数中声明它：

```
g_c = 0

class TestClass():
    def run(self):
        global g_c
        for i in range(10):
            g_c = 1
            print(g_c) 
```

[Python 文档](https://docs.python.org/3/reference/simple_stmts.html#the-global-statement)是这样说的，关于`global`声明：

> 全局语句是适用于整个当前代码块的声明。

* * *

## 回答 #2

> 赞同：23
> 
> 时间：2012-05-30T10:29:29.000

您需要`global`在函数内移动声明：

```
class TestClass():
    def run(self):
        global g_c
        for i in range(10):
            g_c = 1
            print(g_c) 
```

该语句告诉 Python 编译器对该名称的任何分配（和[其他绑定操作](https://docs.python.org/reference/executionmodel.html#naming-and-binding)）都将更改全局命名空间中的值；默认设置是将分配给函数中任何位置的任何名称放在本地命名空间中。该声明仅适用于当前范围。

由于您从未`g_c`在*class body*中分配 to，因此将语句放在那里没有任何效果。该`global`语句仅适用于它所使用的范围，而不适用于任何嵌套范围。请参阅[`global`声明文档](https://docs.python.org/3/reference/simple_stmts.html#the-global-statement)，该文档的开头为：

> 全局语句是适用于整个当前代码块的声明。

嵌套函数和类不是当前代码块的一部分。

我将在此处插入关于使用全局变量共享更改状态的强制性警告：不要这样做，这会使您的代码状态更难推理、更难测试、更难重构等。如果您*必须*共享一个改变单例状态（整个程序中的一个值）然后至少使用一个*类属性*：

```
class TestClass():
    g_c = 0

    def run(self):
        for i in range(10):
            TestClass.g_c = 1
            print(TestClass.g_c)  # or print(self.g_c)

t = TestClass()
t.run()

print(TestClass.g_c) 
```

注意我们如何仍然可以从外部访问相同的值，命名空间到`TestClass`命名空间。

* * *

## 回答 #3

> 赞同：9
> 
> 时间：2016-08-18T01:25:43.870

我知道使用全局变量有时是最方便的事情，尤其是在使用类使最简单的事情变得如此困难的情况下（例如，`multiprocessing`）。我在声明全局变量时遇到了同样的问题，并通过一些实验解决了这个问题。

`g_c`类中的函数未更改的原因是对`run`内部全局名称的引用`g_c`并未在函数中精确建立。Python 处理全局声明的方式实际上是相当棘手的。该命令`global g_c`有两个作用：

1.  `"g_c"`将键输入到内置函数可访问的字典中的前提条件， `globals()`. 但是，在为其分配值之前，该键不会出现在字典中。

2.  （可能）改变 Python`g_c`在当前方法中查找变量的方式。

对 (2) 的全面理解特别复杂。首先，它只是潜在地改变，因为如果`g_c`在方法中没有对名称进行赋值，那么 Python 默认会在`globals()`. 这实际上是一件相当普遍的事情，就像在代码开头一直导入的方法模块中引用的情况一样。

但是，如果赋值命令出现在方法中的*任何位置*，Python 默认会`g_c`在局部变量中查找名称。即使在实际分配之前发生引用也是如此，这将导致经典错误：

```
UnboundLocalError: local variable 'g_c' referenced before assignment 
```

现在，如果声明`global g_c`出现在方法中的*任何位置*，即使在任何引用或赋值之后，Python 也会默认`g_c`在全局变量中查找名称。但是，如果您感觉实验性的并将声明放在引用之后，您将收到警告：

```
SyntaxWarning: name 'g_c' is used prior to global declaration 
```

如果你仔细想想，Python 中全局声明的工作方式显然与 Python 的正常工作方式是一致的。只是当您真正希望全局变量起作用时，规范变得烦人。

这是一个总结我刚才所说的代码的代码（还有一些观察）：

```
g_c = 0
print ("Initial value of g_c: " + str(g_c))
print("Variable defined outside of method automatically global? "
      + str("g_c" in globals()))

class TestClass():
    def direct_print(self):
        print("Directly printing g_c without declaration or modification: "
              + str(g_c))
        #Without any local reference to the name
        #Python defaults to search for the variable in globals()
        #This of course happens for all the module names you import

    def mod_without_dec(self):
        g_c = 1
        #A local assignment without declaring reference to global variable
        #makes Python default to access local name
        print ("After mod_without_dec, local g_c=" + str(g_c))
        print ("After mod_without_dec, global g_c=" + str(globals()["g_c"]))

    def mod_with_late_dec(self):
        g_c = 2
        #Even with a late declaration, the global variable is accessed
        #However, a syntax warning will be issued
        global g_c
        print ("After mod_with_late_dec, local g_c=" + str(g_c))
        print ("After mod_with_late_dec, global g_c=" + str(globals()["g_c"]))

    def mod_without_dec_error(self):
        try:
            print("This is g_c" + str(g_c))
        except:
            print("Error occured while accessing g_c")
            #If you try to access g_c without declaring it global
            #but within the method you also alter it at some point
            #then Python will not search for the name in globals()
            #!!!!!Even if the assignment command occurs later!!!!!
        g_c = 3

    def sound_practice(self):
        global g_c
        #With correct declaration within the method
        #The local name g_c becomes an alias for globals()["g_c"]
        g_c = 4
        print("In sound_practice, the name g_c points to: " + str(g_c))

t = TestClass()
t.direct_print()
t.mod_without_dec()
t.mod_with_late_dec()
t.mod_without_dec_error()
t.sound_practice() 
```

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2017-04-04T17:37:19.863

```
class flag:
    ## Store pseudo-global variables here

    keys=False

    sword=True

    torch=False

## test the flag class

print('______________________')

print(flag.keys)
print(flag.sword)
print (flag.torch)

## now change the variables

flag.keys=True
flag.sword= not flag.sword
flag.torch=True

print('______________________')

print(flag.keys)
print(flag.sword)
print (flag.torch) 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2018-02-22T06:24:08.410

在类中使变量成为全局变量非常简单：

```
a = 0

class b():
    global a
    a = 10

>>> a
10 
```

# xcode - 合并项目

> ID：10814455
> 
> 赞同：0
> 
> 时间：2012-05-30T10:27:06.633
> 
> 标签：xcode, merge, cocos2d-iphone, projects

我想为 iPad 创建书籍。我还想编写一个应用程序，可以访问这些书籍并允许我添加更多书籍，而无需重新下载整个应用程序。

我的想法是有一个显示所有可用书籍的主要项目。然后为每本书单独下载一个单独的项目（如子项目）。

这可能吗？如果是这样，我将如何将主项目与“子项目”合并？

如果没有，我将如何实现这一目标？

我在一个名为“儿童交互式触控书”的应用程序上看到了类似的东西

我正在使用 xcode 4.3 和 cocos2d。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-30T10:48:58.743

就 Xcode 项目而言，这些应用程序都将是独立的 Xcode 项目。您唯一可以（并且应该）共享的是通用代码，例如 cocos2d 库。为此，您可以为常用代码创建一个静态库目标。

至于您的主应用程序，请记住，您不能指示 App Store 代表您下载另一个应用程序。用户体验必须是，一旦用户点击一本书下载它，他就会被带到 App Store 应用程序，在那里他可以下载这本书。

万一我误解了您，并且您希望所有书籍都在同一个应用程序中，您需要实施应用程序内购买来解锁或下载其他内容。无论您如何为该应用程序设置 Xcode 项目，如果您添加一本新书或对现有书进行修改，用户将始终需要为您的应用程序下载更新。除非您实施内容下载。但这与 Xcode 中的项目设置无关。

# android - 如何使用 CookieStore 在 HttpUrlConnection 中获取 cookie？

> ID：10814462
> 
> 赞同：5
> 
> 时间：2012-05-30T10:28:08.790
> 
> 标签：android, cookies, httpurlconnection, cookiestore

在我的`Application`课堂上，我执行以下操作：

```
public class MyApplication extends Application {
    private static HttpURLConnection conn = null;
    public static CookieStore cookieStore;
    public static HttpContext localContext;
    public static DefaultHttpClient client = new DefaultHttpClient();

    @Override
    public void onCreate() {
        // TODO Auto-generated method stub
        super.onCreate();
        CookieSyncManager.createInstance(this);
        cookieStore = new BasicCookieStore();
        localContext = new BasicHttpContext();
        localContext.setAttribute(ClientContext.COOKIE_STORE, cookieStore);
    }
    ...
} 
```

我在某些方面有联系`Runnable`：

```
HttpURLConnection conn = null;
URL url;
try {
    url = new URL(requestUrl);
    conn = (HttpURLConnection) url.openConnection();                
    if (Integer.parseInt(Build.VERSION.SDK) < Build.VERSION_CODES.FROYO) {
        System.setProperty("http.keepAlive", "false");
    }
    conn.setConnectTimeout(8000);
    conn.setRequestMethod(method);
    conn.setInstanceFollowRedirects(false);
    conn.setRequestProperty("Content-Type","application/x-www-form-urlendcoded");

    MyApplication app = (MyApplication) mContext.getApplicationContext();

*******************************************     
    if(app.cookieStore.getCookies()!=null){
        conn.setRequestProperty("Cookie", app.cookieStore.getCookies().toString());
        Log.d("tag", "cookie get " +  cookie.getCookie(mContext.getString(R.string.host_url))); 
    }   
********** this part not work **********    

    Map m = conn.getHeaderFields();
    if (m.containsKey("Set-Cookie")) {
        String cookies = "";
        Collection c = (Collection) m.get("Set-Cookie");
        for (Iterator i = c.iterator(); i.hasNext();) {
            cookies += (String) i.next() + ",";
        }
        cookie.setCookie(mContext.getString(R.string.host_url), cookies);
        Log.d("tag", "cookie set " +  cookies);
    }   
} catch(...) { ... } 
```

我`Cookiee`通过使用`cookieStore`并设置了cookies，但我什么也没得到，它返回`null`。
**怎么用`CookieStore`？**

一些例子和答案给出了这个：

```
List<Cookie> cookies =  app.client.getCookieStore().getCookies(); 
```

它也`null`为我返回。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2016-04-01T15:38:22.000

使用它来设置cookies。

首先，设置cookieManager：

```
 cookieManager = new java.net.CookieManager();
    CookieHandler.setDefault(cookieManager);
    cookieManager.setCookiePolicy(CookiePolicy.ACCEPT_ALL); 
```

接下来，通过 setRequestProperty() 将 cookie 设置为 HttpUrlConnection

```
 if (cookieManager.getCookieStore().getCookies().size() > 0) {

            List<HttpCookie> cookies = cookieManager.getCookieStore().getCookies();

            if (cookies != null) {
                for (HttpCookie cookie : cookies) {
                    conn.setRequestProperty("Cookie", cookie.getName() + "=" + cookie.getValue());
                }
            }
        } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-06-03T02:12:49.170

设置饼干：

```
conn.setRequestProperty("Cookie", "cookieName=cookieValue; domain=www.test.com"); 
```

获取饼干：

```
Map<String, List<String>> headerFields = conn.getHeaderFields();
List<String> cookiesHeader = headerFields.get("Set-Cookie");
if(cookiesHeader != null){
    String cookie = cookiesHeader.get(0);
    HttpCookie httpCookie = HttpCookie.parse(cookie).get(0);
    String name = httpCookie.getName(); 
    String value = httpCookie.getValue();
    String domain = httpCookie.getDomain();
} 
```

# c# - 如何动态填充树视图（C#）

> ID：10814466
> 
> 赞同：6
> 
> 时间：2012-05-30T10:28:35.413
> 
> 标签：c#, winforms, treeview

我有一个包含 3 列、ID、Name 和 ParentID 的表。ID 列包含运行号，它也用作主键。ID 也将是节点的**名称**属性。Name 列包含将成为树节点的**Text**属性的字符串，而 ParentID 是包含节点的父 ID 的列。

这就是我的桌子的样子：

```
ID     Name   ParentID
======================
1      A      0
2      A1     1
3      B      0
4      C      0
5      A2     1
6      B1     3 
```

此表显示节点 A 是节点 A1 和 A2 的父节点。ParentID 等于“0”表示节点的父节点是根节点（硬编码）。例如，节点 A、B 和 C 是根节点的子节点。

在填充树视图之前，我按 ParentID 对行进行排序。我使用这两种方法填充树视图（此处的 TreeNode 节点是正在填充到树中的子节点）：

```
 private void SearchParent(TreeView tree, String parentID, TreeNode node)
    {
        // Post: call TraverseParent method to search parent

        TreeNodeCollection collection = tree.Nodes;

        // Search parent recursively
        foreach (TreeNode n in collection)
        {
            TraverseParent(n, parentID, node);
        }
    }

    private void TraverseParent(TreeNode potentialParent, String parentID, TreeNode node)
    {
        // Post: search for parent. When parent is found add child to parent

        // am i the parent that you're looking for?
        if (parentID.CompareTo(potentialParent.Name) == 0)
        {
            // found me! i'm your parent!

            // add child to parent
            potentialParent.Nodes.Add(node);

            // update that the parent for child has been found
            parentFound = true;
        }
        else
        {
            // i'm not your parent

            // continue to look for parent recursively
            foreach (TreeNode n in potentialParent.Nodes)
            {
                TraverseParent(n, parentID, node);
            }
        }
    } 
```

一切都很好，直到我通过使节点 A 成为节点 C 的子节点来拖放节点并将更改提交到数据库。

现在我的数据库表如下所示：

```
ID     Name   ParentID
======================
1      A      4
2      A1     1
3      B      0
4      C      0
5      A2     1
6      B1     3 
```

下次我运行应用程序时，它无法将节点 A1 和 A2 填充到树中，因为它找不到它们的父节点。这是因为当我在填充树视图之前根据 ParentID 对行进行排序时，行的排序如下：

```
ID     Name   ParentID
======================
3      B      0
4      C      0
2      A1     1
5      A2     1
6      B1     3
1      A      4 
```

这样，即使在创建节点 A 之前，我的应用程序也会尝试将 A1 和 A2 节点填充到树中。因此，应用程序找不到节点 A1 和 A2 的父节点。

因此，任何人都可以告诉我解决此错误的方法还是有更好的方法来动态填充树视图？

谢谢。

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-05-30T10:36:23.220

您应该使用递归来填充它。

承诺的例子：

```
public partial class Form1 : Form
    {
        private class ItemInfo
        {
            public int ID;
            public int ParentID;
            public string Name;
        }

        public Form1()
        {
            InitializeComponent();
            FillTreeView();
        }

        private void FillTreeView()
        {
            var items = new List<ItemInfo>()
            {
                new ItemInfo(){ID = 1, ParentID = 4, Name = "A"},
                new ItemInfo(){ID = 2, ParentID = 1, Name = "A1"},
                new ItemInfo(){ID = 3, ParentID = 0, Name = "B"},
                new ItemInfo(){ID = 4, ParentID = 0, Name = "C"},
                new ItemInfo(){ID = 5, ParentID = 1, Name = "A2"},
                new ItemInfo(){ID = 6, ParentID = 3, Name = "B1"},
            };

            FillNode(items, null);
        }

        private void FillNode(List<ItemInfo> items, TreeNode node)
        {
            var parentID = node != null
                ? (int)node.Tag
                : 0;

            var nodesCollection = node != null
                ? node.Nodes
                : treeView1.Nodes;

            foreach (var item in items.Where(i => i.ParentID == parentID))
            {
                var newNode = nodesCollection.Add(item.Name, item.Name);
                newNode.Tag = item.ID;

                FillNode(items, newNode);
            }
        }
    } 
```

# android - 当我在 EditText（密码）中按 Enter 时，它会转到一个新行，然后如果执行 setOnEditorActionListener

> ID：10814471
> 
> 赞同：2
> 
> 时间：2012-05-30T10:28:49.813
> 
> 标签：android

当我在 EditText（密码）中按 Enter 时，它会转到一个新行，然后如果执行 setOnEditorActionListener，那么我的密码将不正确（bcz 添加了 Enter）。有什么解决方案吗？

编辑：当我添加：android：singleLine =“true”时，手机键盘中的“Enter”按钮将替换为“Done”，所以当我添加android：singleLine =“true”时如何保留“Enter”按钮。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-30T11:25:55.640

您可以设置最大长度或强制单行。

强制单行：

```
<EditText android:singleLine="true" /> 
```

设置最大长度：

```
<EditText android:maxLength="12" /> 
```

希望有帮助

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-30T10:34:07.107

设置密码的最大长度

```
android:maxLength="12" 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-30T10:35:59.060

使用以下行：

```
 android:lines="1" 
```

# jsp - 如何在 Facelets 文件中包含 JSP 文件？

> ID：10814472
> 
> 赞同：1
> 
> 时间：2012-05-30T10:28:50.993
> 
> 标签：jsp, include, facelets

如何将`.jsp`文件包含到 facelet 中？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-30T14:29:21.960

默认情况下不支持此功能。您需要为此创建一个自定义组件。[您可以在此博客](http://jdevelopment.nl/facelets-legacy-jsp/)和[此答案](https://stackoverflow.com/questions/6106703/how-to-include-a-jsp-page-in-a-facelets-page/6110516#comment14077633_6110516)中找到完整的示例。[OmniFaces](http://omnifaces.org)组件库为此提供了一个可重用的组件[`<o:resourceInclude>`](http://showcase.omnifaces.org/components/resourceInclude)。

```
<html ... xmlns:o="http://omnifaces.org/ui">
...
<o:resourceInclude path="/foo.jsp" /> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-30T10:34:14.663

XHTML 中内置的唯一包含机制是[框架](http://www.w3.org/TR/html4/present/frames.html)和[Xinclude](http://www.w3.org/TR/xinclude/)（我怀疑它们在客户端中几乎没有支持）。

一般来说，如果你想做包含并且你的平台支持 JSP，那么你会将请求的页面作为 JSP 处理并使用它来执行包含。

# mysql - 带有参数的数据集查询在报表生成器中不起作用

> ID：10814477
> 
> 赞同：4
> 
> 时间：2012-05-30T10:29:13.790
> 
> 标签：mysql, dataset, parameterized, reportbuilder

下图显示了没有变量的查询及其结果：

![在此处输入图像描述](../Images/a6bc3259be6fe9e4fa99058dbe7990e3.png)

下一个显示带有变量和不同结果的相同查询：

![在此处输入图像描述](../Images/7dfab11baded086d1f44abe60cc12e31.png)

这是在查询执行之前设置参数的方式：

![在此处输入图像描述](../Images/20f21b83c291008c99776cdfa9eb0812.png)

我也尝试过设置不带*''*的参数，但它会产生相同的结果。

关于发生了什么的任何线索？任何帮助将不胜感激。

注意：DBMS 是 MySql

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-05-31T12:55:32.570

这个奇怪的问题是由于 SSRS 是通过 ODBC 连接器连接到 MySQL 的；因此，查询参数应定义为`?`，它们的名称为`Parameter1`, `Parameter2`, 等... 按出现顺序

来源：[http ://www.tek-tips.com/viewthread.cfm?qid=1354185](http://www.tek-tips.com/viewthread.cfm?qid=1354185)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-07-30T20:17:54.333

在 Report Builder 3.0 中，您可以使用以下语法在数据集查询中使用参数：WHERE sql_column_name = (@Parameter_name_in_ReportBuilder)

示例：SELECT * from [dbName].[dbo].[TableName] WHERE Account=(@Parameter1)

在运行报表之前，您需要在数据集属性 - 参数中配置一个名为 Parameter1 的参数（在本示例中，将其更改为您的参数名称）。值字段应设置为参数之一

# node.js - 如何调试 NodeJS 中的套接字挂起错误？

> ID：10814481
> 
> 赞同：59
> 
> 时间：2012-05-30T10:29:30.900
> 
> 标签：node.js, sockets, http, debugging

我收到以下错误：

```
events.js:48
        throw arguments[1]; // Unhandled 'error' event
        ^
Error: socket hang up
    at createHangUpError (http.js:1091:15)
    at Socket.onend (http.js:1154:27)
    at TCP.onread (net.js:363:26) 
```

在节点 v0.6.6 中，我的代码有多个 http.request 和 .get 调用。请提出一些方法来跟踪导致套接字挂起的原因，以及它是在哪个请求/调用上。谢谢

* * *

## 回答 #1

> 赞同：44
> 
> 时间：2012-07-18T13:06:40.847

**快速而肮脏的开发解决方案**：

使用 [longjohn](https://github.com/mattinsler/longjohn)，您将获得包含异步操作的长堆栈跟踪。

**干净和正确的解决方案**：从技术上讲，在节点中，每当[你发出一个`'error'`事件并且没有人听它时，它就会抛出](http://nodejs.org/api/all.html#events_class-eventemitter). 为了让它不抛出，在它上面放一个监听器并自己处理它。这样，您可以使用更多信息记录错误。

~~要为一组调用设置一个侦听器，您可以使用[域](http://nodejs.org/api/all.html#all_domain) 并在运行时捕获其他错误。确保与 http(Server/Client) 相关的每个异步操作与代码的其他部分相比位于不同的[域](http://nodejs.org/api/all.html#all_domain)`error`上下文中，域将自动侦听事件并将其传播到它自己的处理程序。所以你只听那个处理程序并获取错误数据。[您还可以免费获得更多信息。](http://nodejs.org/api/all.html#all_additions_to_error_objects)~~（域已弃用）。

正如`Mike`建议的那样，您还可以设置`NODE_DEBUG=net`或使用[strace](https://stackoverflow.com/q/174942/774086)。它们都为您提供节点在内部执行的操作。

* * *

## 回答 #2

> 赞同：20
> 
> 时间：2014-01-30T21:39:29.360

此外，您可以设置`NODE_DEBUG`环境变量以`net`获取有关所有套接字正在做什么的信息。这样，您可以隔离哪个远程资源正在重置连接。

* * *

## 回答 #3

> 赞同：12
> 
> 时间：2014-12-03T10:04:57.247

In addition to ftft1885's answer

```
http.get(url, function(res)
{
    var bodyChunks = [];

    res.on('data', function(chunk)
    {
        // Store data chunks in an array
        bodyChunks.push(chunk);
    }).on('error', function(e)
    {
        // Call callback function with the error object which comes from the response
        callback(e, null);
    }).on('end', function()
    {
        // Call callback function with the concatenated chunks parsed as a JSON object (for example)
        callback(null, JSON.parse(Buffer.concat(bodyChunks)));
    });
}).on('error', function(e) {
    // Call callback function with the error object which comes from the request
    callback(e, null);
}); 
```

When I had this "socket hang up" error, it was because I wasn't catching the requests errors.

The `callback` function could be anything; it all depends on the needs of your application. Here's an exemple of a callback logging data with `console.log` and logging errors with `console.error`:

```
function callback(error, data) {
    if (error) {
        console.error('Something went wrong!');
        console.error(error);
    }
    else {
        console.log('All went fine.');
        console.log(data);
    }
} 
```

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2013-03-16T03:36:03.513

利用

```
req.on('error',function(err){}) 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-10-11T08:53:46.110

很可能您的服务器套接字连接在所有 http.ServerResponse 对象结束之前以某种方式关闭。确保在处理传入连接之前已停止所有传入请求（传入连接与传入 HTTP 请求不同）。

# python - 在 Python 2.7 中将字符串更改为字节类型

> ID：10814483
> 
> 赞同：13
> 
> 时间：2012-05-30T10:29:42.980
> 
> 标签：python, types, version, byte

在 python 3.2 中，我可以轻松更改对象的类型。例如 ：

```
x=0
print(type (x))
x=bytes(0)
print(type (x)) 
```

它会给我这个：

```
<class 'int'>
<class 'bytes'> 
```

但是，在 python 2.7 中，似乎我不能使用相同的方式来做到这一点。如果我执行相同的代码，它会给我这个：

```
<type 'int'>
<type 'str'> 
```

我该怎么做才能将类型更改为字节类型？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-05-30T10:30:42.167

您没有更改类型，而是为变量分配了不同的值。

您还遇到了 python 2.x 和 3.x 之间的根本区别之一；大大简化了 2.x 类型`unicode`已替换`str`类型，它本身已重命名为`bytes`. 它恰好可以在您的代码中工作，因为最近版本的 Python 2 添加`bytes`了别名，`str`以简化编写在两个版本下都可以工作的代码。

换句话说，您的代码按预期工作。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-05-30T10:53:47.113

*我该怎么做才能将类型更改为字节类型？*

你不能，在 Python 2.7 中没有像 'bytes' 这样的类型。

来自 Python 2.7 文档（5.6 序列类型）：“有七种序列类型：字符串、Unicode 字符串、列表、元组、字节数组、缓冲区和 xrange 对象。”

来自 Python 3.2 文档（5.6 序列类型）：“有六种序列类型：字符串、字节序列（字节对象）、字节数组（字节数组对象）、列表、元组和范围对象。”

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-05-30T10:31:53.837

在 Python 2.x 中，`bytes`只是 的别名`str`，所以一切都按预期工作。此外，您不会在此处更改任何对象的类型——您只是将名称重新绑定`x`到不同的对象。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2018-11-30T18:28:31.090

可能不完全是您需要的，但是当我需要获取字节 d8 的十进制值（它是一个在文件中给出偏移量的字节）时，我做了：

```
a = (data[-1:])          # the variable 'data' holds 60 bytes from a PE file, I needed the last byte
                         #so now a == '\xd8'  , a string
b = str(a.encode('hex')) # which makes b == 'd8' , again a string
c = '0x' + b             # c == '0xd8' , again a string
int_value = int(c,16)    # giving me my desired offset in decimal: 216

                         #I hope this can help someone stuck in my situation 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2019-10-30T10:39:01.983

只是一个例子来强调将常规字符串转换为二进制字符串并返回的过程：

```
sb = "a0" # just string with 2 characters representing a byte
ib = int(sb, 16) # integer value (160 decimal)
xsb = chr(ib) # a binary string (equals '\xa0') 
```

现在倒退

```
back_sb = xsb.encode('hex')
back_sb == sb # returns True 
```

# wpf - 设计时和运行时之间的字体更改（VS 2010 和 wpf）

> ID：10814485
> 
> 赞同：0
> 
> 时间：2012-05-30T10:29:47.077
> 
> 标签：wpf, visual-studio-2010

当我在 Visual Studio 中使用 wpf 创建窗口或自定义控件时，使用的默认字体是 Segoue UI 12（至少在 Windows 7 上）。当我执行应用程序时，真正使用的字体是 Verdana 13，稍微大一点，所以一些标志被剪掉了，用户体验是一种很差的格式外观和感觉。不知道如何更改 VS 2010 中的默认字体，以及它是否是实现将我在设计阶段看到的内容与用户在运行时看到的内容对齐的最佳方式。我在整个解决方案中检查了“Verdana”这个词，但没有找到，所以我很确定这种奇怪的行为不是由于作为动态资源应用的样式造成的。

谢谢你的帮助

菲利波

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-30T14:33:54.393

默认情况下，WPF 在运行时使用系统字体。如果您想始终使用 Segoe UI，可以将 FontFamily 属性设置为“Segoe UI”。

# php - var_dump 到字符串

> ID：10814488
> 
> 赞同：-5
> 
> 时间：2012-05-30T10:30:01.997
> 
> 标签：php

我有一个 curl 帖子的 var_dump 输出我想将此 var_dump 输出解析为 stinrg

var_dump 输出就像

```
a:3:{s:6:"status";s:1:"1";s:3:"msg";s:32:"Transaction Fetched Successfully";s:19:"transaction_details";a:1:{i:100003105;a:9:{s:8:"mihpayid";s:7:"4169799";s:10:"request_id";N;s:12:"bank_ref_num";N;s:3:"amt";s:6:"349.00";s:4:"disc";s:4:"0.00";s:4:"mode";s:1:"-";s:7:"retries";i:0;s:6:"status";s:7:"pending";s:14:"unmappedstatus";s:9:"initiated";}}} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-30T10:34:26.530

它是[序列化](http://php.net/manual/en/function.serialize.php)的结果，所以你需要的是 [unserialzie](http://www.php.net/manual/en/function.unserialize.php)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-30T10:45:34.993

一个选项是：

```
$myStringVar=var_export($var, true); 
```

[http://php.net/manual/en/function.var-export.php](http://php.net/manual/en/function.var-export.php)

问候！

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2012-05-30T10:33:16.613

你可以这样做`var_export`：

```
$stringDump = var_export($var, true); 
```

`true`用于返回字符串而不是回显。

# c# - 如果在处理后调用 Stop()，WPF StoryBoard 不会开始

> ID：10814491
> 
> 赞同：0
> 
> 时间：2012-05-30T10:30:18.237
> 
> 标签：c#, wpf, animation, storyboard

我有一个包含图像的按钮，我希望该图像在执行某些代码时旋转，然后在此处理结束时停止。

如果我开始故事板，我的代码几乎可以工作，但是当我添加 sb.Stop() 行时，动画永远不会开始。

这是我的代码：

```
private void refreshPostIt(int postItIndex)
    {
        Button btn = // Button to rotate

        Storyboard sb = new Storyboard();
        DoubleAnimation rotate = new DoubleAnimation();
        rotate.From = 0;
        rotate.To = 360;
        rotate.RepeatBehavior = RepeatBehavior.Forever;

        RotateTransform rt = new RotateTransform();
        btn.RenderTransformOrigin = new Point(0.5, 0.5);
        btn.RenderTransform = rt;
        Storyboard.SetTarget(rotate, btn);
        Storyboard.SetTargetName(rotate, btn.Name);
        Storyboard.SetTargetProperty(rotate, new PropertyPath("(UIElement.RenderTransform).(RotateTransform.Angle)"));
        sb.Children.Add(rotate);
        sb.Begin(this, true);

        // Some code which can take several seconds

        sb.Stop();
    } 
```

我被困住了。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-30T14:39:12.313

我有一个适合我的解决方案。

```
private void refreshPostIt()
    {
        // Button btn; is defined somewhere else

        Storyboard sb = new Storyboard();
        DoubleAnimation rotate = new DoubleAnimation();
        rotate.From = 0;
        rotate.To = 360;
        rotate.RepeatBehavior = RepeatBehavior.Forever;

        RotateTransform rt = new RotateTransform();
        btn.RenderTransformOrigin = new Point(0.5, 0.5);
        btn.RenderTransform = rt;
        Storyboard.SetTarget(rotate, btn);
        Storyboard.SetTargetName(rotate, btn.Name);
        Storyboard.SetTargetProperty(rotate, new PropertyPath("(UIElement.RenderTransform).(RotateTransform.Angle)"));
        sb.Children.Add(rotate);
        sb.Begin(btn, true);

            // Do your stuff here (Not in the UI Thread)
            // Maybe use a semaphore to lock the sb.Stop(btn)

        sb.Stop(btn);
    } 
```

整个示例代码：

```
public partial class Window1 : Window
{
    Button btn;
    Storyboard sb;
    public Window1()
    {
        btn = new Button();
        InitializeComponent();
        this.grid.Children.Add(btn);
        refreshPostIt();
    }

    private void refreshPostIt()
    {
        // Button btn; is defined somewhere else

        sb = new Storyboard();
        DoubleAnimation rotate = new DoubleAnimation();
        rotate.From = 0;
        rotate.To = 360;
        rotate.RepeatBehavior = RepeatBehavior.Forever;

        RotateTransform rt = new RotateTransform();
        btn.RenderTransformOrigin = new Point(0.5, 0.5);
        btn.RenderTransform = rt;
        Storyboard.SetTarget(rotate, btn);
        Storyboard.SetTargetName(rotate, btn.Name);
        Storyboard.SetTargetProperty(rotate, new PropertyPath("(UIElement.RenderTransform).(RotateTransform.Angle)"));
        sb.Children.Add(rotate);
        sb.Begin(btn, true);

        BackgroundWorker asd = new BackgroundWorker();
        asd.DoWork += new DoWorkEventHandler(asd_DoWork);
        asd.RunWorkerCompleted += new RunWorkerCompletedEventHandler(asd_RunWorkerCompleted);
        asd.RunWorkerAsync();

    }

    void asd_RunWorkerCompleted(object sender, RunWorkerCompletedEventArgs e)
    {
        if (sb != null)
        {
            sb.Stop(btn);
        }
    }

    void asd_DoWork(object sender, DoWorkEventArgs e)
    {
        Thread.Sleep(2000);
    }
} 
```

好的，我想在这里解释一下我认为您的问题。当您使用 UI-Thread 进行“工作”时，它无法更新您的 UI，虽然不会为旋转设置动画，但在完成“工作”后，在开始和停止动画之间，最后会有时间要更新 UI，请调用停止动画。这导致不显示任何动画。您需要将您的工作放在不同的线程中以防止这种情况发生。

希望有帮助。

# javascript - 单击按钮时删除可拖动功能

> ID：10814493
> 
> 赞同：2
> 
> 时间：2012-05-30T10:30:21.917
> 
> 标签：javascript, jquery

在这个小提琴中 - [http://jsfiddle.net/adrianjsfiddlenetuser/zyUkd/35/](http://jsfiddle.net/adrianjsfiddlenetuser/zyUkd/35/)我试图在单击“删除可拖动”按钮时删除所有以 .myDivs 为样式的 div 的可拖动功能。

函数调用 `$('.myDivs').draggable('disable');` 似乎没有实现这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-30T10:46:09.370

首先，您的`click`处理程序是由一个`$(document).ready()`函数组成的，这意味着即使 DOM 没有完全加载，它也可以附加。然后，您没有使元素可拖动，`draggable`而是使用`sortable`，因此您应该使用`$(elements).sortable('disable')`：

```
$(document).ready(function() {
    var els = $('.connected');
    els.sortable({
        connectWith : ".connected",
        items       : ".myDivs:not(.excludeThisCss)"
    }).disableSelection();

    $("#button").click(get);

    function get() {
        els.sortable('disable'); 
    }
}); 
```

您在此处更新的 JSFiddle：http: [//jsfiddle.net/zyUkd/38/](http://jsfiddle.net/zyUkd/38/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-30T10:41:26.687

问题是

```
$("#button").click(get); 
```

不在正确的位置，它必须在 onload 事件处理程序中。因此，您的代码必须如下所示：

```
$(function() {
    $( ".connected" ).sortable({
        connectWith : ".connected",
        items       : ".myDivs:not(.excludeThisCss)"
    }).disableSelection();

    $("#button").click(get);
});

 function get() {
    $('.myDivs').draggable('disable'); 
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-30T11:04:19.063

```
$(function() {
    $( ".connected" ).sortable({
        connectWith : ".connected",        
        items       : ".myDivs:not(.excludeThisCss)"
    }).disableSelection();

   $("#button").click(function(){
   $( ".connected" ).sortable( "option", "disabled", true );
    });

}); 
```

# c# - C# 中的异步递归是否安全（async ctp/.net 4.5）？

> ID：10814496
> 
> 赞同：21
> 
> 时间：2012-05-30T10:30:33.953
> 
> 标签：c#, sockets, async-ctp

在带有 async ctp 或 vs.net 2011 beta 的 C# 中，我们可以编写如下递归代码：

```
public async void AwaitSocket()
{
    var socket = await this.AcceptSocketAsync(); //await socket and >>return<< to caller
    AwaitSocket(); //recurse, note that the stack will never be deeper than 1 step since await returns..
    Handle(socket); // this will get called since "await" returns
} 
```

在这个特定的示例中，代码 async 等待一个 tcp 套接字，一旦它被接受，它将递归并异步等待另一个。

这似乎工作正常，因为等待部分将使代码返回给调用者，因此不会导致堆栈溢出。

所以这里有两个问题：

1.  如果我们忽略这个示例中我们正在处理套接字的事实。以这种方式进行无堆栈递归可以吗？还是我缺少缺点？

2.  从 IO 的角度来看，上面的代码是否足以处理所有传入的请求？我的意思是只等待一个，一旦被接受就开始等待另一个。某些请求会因此而失败吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-30T11:08:07.693

从上面的讨论中，我想这样的方法将是最好的方法。请反馈

```
public async void StartAcceptingSockets()
{
    await Task.Yield(); 
    // return to caller so caller can start up other processes/agents
    // TaskEx.Yield in async ctp , Task.Yield in .net 4.5 beta

    while(true)
    {
        var socket = await this.AcceptSocketAsync();
        HandleAsync(socket); 
        //make handle call await Task.Yield to ensure the next socket is accepted as fast 
        //as possible and dont wait for the first socket to be completely handled
    } 
}

private async void HandleAsync(Socket socket)
{
      await Task.Yield(); // return to caller

      ... consume the socket here...
} 
```

# c++ - 检查是否在没有外部链接的情况下创建了对象

> ID：10814497
> 
> 赞同：0
> 
> 时间：2012-05-30T10:30:38.933
> 
> 标签：c++, linker, external

如果对象实例创建为静态而没有外部链接，是否存在执行链接时间约束检查的任何方式，反之亦然？

例如：

```
// test.cpp

// correct
namespace{
static MyObject obj;
}

//test.h

struct Obj
{
    // wrong
    static MyObject m_obj;
} 
```

在这种情况下，链接错误作为诊断消息是可以的。

据我了解，不可能在编译时创建类似的东西。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-30T12:37:17.580

不好的方式，但你可以使用宏（我不认为这是你需要的）

```
#define MyObject MyObject
...
#ifdef MyObject
#error somemessagethere
#endif 
```

* * *

或者只需在 .h 文件中的声明之前键入 extern

我记得，在函数外部使用的静态关键字意味着变量/函数实例应该只存在于当前模块中。

# c# - MVC3 和会话可扩展性

> ID：10814502
> 
> 赞同：4
> 
> 时间：2012-05-30T10:30:54.533
> 
> 标签：c#, asp.net-mvc-3, session, scalability

我正在构建一个 MVC 3 应用程序，并且对一个示例场景有疑问。

我有两个实体 -`Order`和`OrderDetails`. 订单数据在一个页面上填写，在其他三个页面上添加、编辑、删除详细信息。一旦订单和详细信息填写完毕，我会将这组数据保存到数据库中。

如您所见，在用户工作期间和将数据保存到数据库之前，我需要将订单和详细信息数据存储到某种内存或类似对象中。

现在，如果我将这个对象存储在其中，`Session`那么我将破坏可伸缩性——应用程序不能跨越多台机器。

是否有一种模式或方法允许可扩展性并执行描述的场景？

*注意：Sql-Server Session State 以外的解决方案*

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-30T10:39:59.090

看看**状态服务器会话**

*StateServer 模式，它将会话状态存储在称为 ASP.NET 状态服务的单独进程中。这可确保在重新启动 Web 应用程序时保留会话状态，并且还使会话状态可用于 Web 场中的多个 Web 服务器。*

[http://msdn.microsoft.com/en-us/library/ms178586.aspx](http://msdn.microsoft.com/en-us/library/ms178586.aspx)

# sql - SQL - 使用动态函数计算列

> ID：10814504
> 
> 赞同：4
> 
> 时间：2012-05-30T10:31:00.337
> 
> 标签：sql, sql-server, sql-server-2005

我正在尝试创建一组要写入文件的数据，它本质上是一个由许多不同表中的各种字段组成的报告，有些列需要对它们进行一些处理，有些可以刚刚被选中。

不同的用户可能希望对某些列执行不同的处理，并且在未来，我可能需要为计算列添加额外的函数。

我正在考虑最简洁/最灵活的方法来存储和使用这些计算列可能需要的所有不同功能，我脑子里有两个想法，但我希望可能有更多我缺少明显的解决方案。

举一个简单但有点奇怪的例子，一个 Staff 表：

```
Employee |    DOB           |   VacationDays
Frank    |    01/01/1970    |   25
Mike     |    03/03/1975    |   24
Dave     |    05/02/1980    |   30 
```

我想我要么最终得到一个像这样的查询

```
SELECT NameFunction(Employee, optionID),
       DOBFunction(DOB, optionID),
       VacationFunction(VacationDays, optionID),
from Employee 
```

对于用户定义的函数，optionID 将在函数内部的 case 语句中用于决定要执行的处理。

或者我想使用其他函数的查找表来定制返回数据的方式：

```
ID  |    Name                  |   Description
1   |    ShortName             |   Obtains 3 letter abbreviation of employee name
2   |    LongDOB               |   Returns DOB in format ~ 1st January 1970
3   |    TimeStampDOB          |   Returns Timestamp for DOB
4   |    VacationSeconds       |   Returns Seconds of vaction time
5   |    VacationBusinessHours |   Returns number of business hours of vacation 
```

哪个看起来更整洁，但我不确定如何制定查询，大概是使用动态 SQL？有明智的选择吗？

这些函数将用于几千行。

我找到的最接近的答案是在这个线程中： [Call dynamic function name in SQL](https://stackoverflow.com/questions/10557258/call-dynamic-function-name-in-sql)

我不是动态 SQL 的忠实粉丝，尽管在这种情况下，我认为这可能是获得我想要的结果的最佳方式？

任何答复表示赞赏，谢谢，克里斯

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-30T10:39:25.323

我会选择第二种解决方案。您甚至可以在查找表中使用真实存储的过程名称。

```
create proc ShortName (
    @param varchar(50)
)as
begin
    select 'ShortName: ' + @param
end
go

declare @proc sysname = 'ShortName'

exec @proc 'David' 
```

如上例所示，exec的第一个参数（即过程名）可以是参数。这说明了所有关于动态 sql 的常见警告......

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-30T11:21:34.157

最后，你应该选择更快的那个，所以你应该尝试两种方式（以及任何其他人可能想出的方式）然后再决定。

我更喜欢第一个选项，只要您的函数没有对表格的额外选择。如果不打算在不同的报表中重用它们，您甚至可能不需要用户定义的函数。

我更喜欢仅使用 Dynamic SQL 来提高查询的性能，例如添加动态排序或添加/删除复杂的 WHERE 条件。

但这些都是主观意见，最好的办法是尝试、比较和决定。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-30T13:19:18.853

实际上，这不是什么更快的问题。这是一个让代码更简洁的问题，特别是对于添加新功能（新列、新列格式、重新排序）。

不要将您的第二种方法视为“使用动态 SQL”，因为这往往具有负面含义。相反，将其视为一种数据驱动的方法。您想要构建一个表来描述用户可以获得的列和格式。这很棒！然后，用户可以提供列列表，您将拥有一个神奇的存储过程，它将来自用户的信息与元数据表中的信息结合起来，并产生所需的结果。

我是数据驱动方法的忠实拥护者，而动态 SQL 是迄今为止我发现的用于实现它们的最佳 SQL 工具。

# jquery - jquery日期选择器在asp.net web表单中不起作用

> ID：10814506
> 
> 赞同：5
> 
> 时间：2012-05-30T10:31:04.960
> 
> 标签：jquery, asp.net, jquery-ui

以下日期选择器不适用于 asp.net Web 表单。我更改了很多次代码，甚至其他示例都无法正常工作，甚至创建新页面来测试仍然无法正常工作。

```
<%@ Page Language="C#" AutoEventWireup="true" CodeFile="test.aspx.cs" Inherits="test" %>

<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml">
<head runat="server">
    <title></title>
    <script src="http://ajax.googleapis.com/ajax/libs/jquery/1.6/jquery.min.js" type = "text/javascript"></script>
    <script src="http://ajax.googleapis.com/ajax/libs/jqueryui/1.8/jquery-ui.min.js" type = "text/javascript"></script>
    <link href="http://ajax.googleapis.com/ajax/libs/jqueryui/1.8/themes/base/jquery-ui.css" rel = "Stylesheet" type="text/css" /> 
    <script type="text/javascript">

//Code Starts
$(document).ready(function() {

     $('#Text1').datepicker();
      $('#<%=txtBookDate.ClientID %>').datepicker();
});​

</script>
</head>

<body>
    <form id="form1" runat="server">
    <div>
     <asp:TextBox ID="txtBookDate" runat="server"></asp:TextBox><input id="Text1" type="text" />
    </div>
    </form>
</body>
</html> 
```

jsFiddler 上的示例正在运行

[http://jsfiddle.net/ANdUK/3/](http://jsfiddle.net/ANdUK/3/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-30T10:37:05.297

问题可能是 id 以某种方式更改，因为它们位于表单内。您应该检查生成的 id 并使用它。顺便说一句，jsfiddle 上的示例在没有 jQuery UI 的情况下不起作用

编辑尽量不要在脚本标签中放置空格，并尝试在表单之外进行正常输入

```
<script src="http://ajax.googleapis.com/ajax/libs/jquery/1.6/jquery.min.js" type="text/javascript"></script>
<script src="http://ajax.googleapis.com/ajax/libs/jqueryui/1.8/jquery-ui.min.js" type="text/javascript"></script> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-30T10:52:31.140

在以下代码行中的最后一个分号之后：

```
$(document).ready(function() {

     $('#Text1').datepicker();
      $('#<%=txtBookDate.ClientID %>').datepicker();
});​ 
```

你有某种狡猾的性格。删除它，你会很高兴的。

# android - 从 Android App 访问数据库

> ID：10814510
> 
> 赞同：0
> 
> 时间：2012-05-30T10:31:14.813
> 
> 标签：android, database-connection, httprequest

我有一个以登录名开头的应用程序。此过程涉及联系在线数据库。现在成功登录后，我想进一步访问数据库（读取一些数据/写入其他内容）。是否建议再次建立另一个连接。这意味着每次我需要访问一些数据时，我应该建立一个 http 连接吗？或者我应该在检查登录凭据时阅读所有必需的数据并避免经常进行 http 连接？

出于显而易见的原因，执行 http 请求是一个坏主意，但有没有办法避免它？

其次，我应该如何使用第一个连接的实例。我的意思是，每次我想访问数据库时，我都应该登录吗？或者我可以使用一开始在登录操作期间建立的连接实例吗？

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-30T10:49:21.997

正如 Reto Meier 在他的书中所描述的那样。这是您的应用程序实现净流量经济并节省用户资金的良好行为。

在我看来，您应该始终尝试缓存来自 Internet 的数据并对其进行大量更新。

# javascript - 我的地图上的集群不工作

> ID：10814513
> 
> 赞同：-1
> 
> 时间：2012-05-30T10:31:35.877
> 
> 标签：javascript, google-maps-api-3, markerclusterer

我正在尝试使用 JS 和 VB.NET 中的 Google Maps API v3 作为地图的服务器端数据数组制作地图。我的地图在没有集群的情况下成功加载，但是当我尝试在地图上应用集群时，我的标记变得不可见并且不显示在地图上。
这是我制作地图和集群的代码

```
<script src="http://www.google.com/jsapi"></script>

    <script type="text/javascript">
      var script = '<script type="text/javascript" src="http://google-maps-utility-library-v3.googlecode.com/svn/trunk/markerclusterer/src/markerclusterer';
      if (document.location.search.indexOf('compiled') !== -1) {
        script += '_compiled';
      }
      script += '.js"><' + '/script>';
      document.write(script);
    </script>  
 <script type="text/javascript">
  google.load('maps', '3', {
        other_params: 'sensor=false'
      });

      google.setOnLoadCallback(initialize);

 var map; 
 var markers = [];    
 var markerClusterer = null;
 function initialize() {
 var GPS = <%=GPS %>
 var map_center = new google.maps.LatLng(31.2330555556,72.3330555556);
     var myOptions = {
      zoom: 6,
      scaleControl:true,
      pancontrol: true,
      streetViewControl: true,
      center: map_center,
      mapTypeControl: true,
      mapTypeControlOptions: {
      style: google.maps.MapTypeControlStyle.DROPDOWN_MENU
    },
      mapTypeId: google.maps.MapTypeId.HYBRID
    }    
    map = new google.maps.Map(document.getElementById("map_canvas"), myOptions);
    var infowindow = new google.maps.InfoWindow();

    var image = 'ico/gn.png';
        for(var i=0; i<GPS.length; i++)
         {

         var marker=new google.maps.Marker({
         position:GPS[i].GPS,
         draggable:true,
         icon:image,
         Info: '<table frame=box><tr><td align="Left"><font face="Arial" size=2 color=#336699>Shop Name:</td><td align="Left"><font face="Arial" size=2>'+ GPS[i].SHOP + '</font></td></tr><tr>'+
          '<td align="Left"><font face="Arial" size=2 color=#336699>Owner:</td><td align="Left"><font face="Arial" size=2>'+ GPS[i].OWNER + '</font></td></tr>'+
          '<td align="Left"><font face="Arial" size=2 color=#336699>Mobile:</td><td align="Left"><font face="Arial" size=2>'+ GPS[i].MOBILE + '</font></td></tr>'+
          '<tr><td align="Left"><font face="Arial" size=2 color=#336699>Distributer:</td><td align="Left"><font face="Arial" size=2>'+ GPS[i].DIST + '</font></td></tr><tr>'+
          '<tr><td align="Left"><font face="Arial" size=2 color=#336699>Region:</td><td align="Left"><font face="Arial" size=2>'+ GPS[i].REGION + '</font></td></tr>'+
          '<tr><td align="Left"></td><td align="Left"><font face="Arial" size=2 color=#336699><a target=_blank href=http://221.120.216.52/elp/sfpl.php?ccode=01&amp;&regno='+ GPS[i].REGNO +'>View</a></td></tr>'+
          '</table>',
          title:GPS[i].SHOP + '(' +GPS[i].DIST + ' )'
         });
         markers.push(marker);
         google.maps.event.addListener(markers[i], 'click', function() {
            infowindow.setContent(this.Info);
            infowindow.open(map,this);
            }); 
         }
         markerClusterer = new MarkerClusterer(map,markers,
         {
         maxZoom:5
         });
         }

    </script> 
```

任何人？请帮助我摆脱这个问题，并告诉我我的代码中究竟缺少什么。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-30T14:26:23.070

我不确定你的问题是什么。当我更换

```
var GPS = <% GPS %> 
```

和：

```
var pos1 = new google.maps.LatLng(31.2330555556,72.3330555556);
var pos2 = new google.maps.LatLng(30.5,71.1);
var pos3 = new google.maps.LatLng(32.4,73.4);

  var test = {
    GPS: pos1,
    SHOP: 'Blah',
    OWNER: 'bob',
    REGION: 'pakistan',
    DIST: 1
 }

 var test2 = {
    GPS: pos2,
    SHOP: 'Blawefah',
    OWNER: 'cat',
    REGION: 'pakistan',
    DIST: 2
 }

 var test3 = {
    GPS: pos3,
    SHOP: 'Blsdfah',
    OWNER: 'fred',
    REGION: 'pakistan',
    DIST: 3
 }

 var GPS = new Array();
 GPS[0] = test;
 GPS[1] = test2;
 GPS[2] = test3; 
```

我得到了我的三个测试标记。当我缩小这三个标记消失并出现一个标记簇时，数字为 3（表示簇中标记的数量）。

你确定你的 GPS 阵列是从 VB 中正确填充的吗？

# git - “gnutls_handshake() failed(): A TLS packet was received with unexpected length was received” 在学校

> ID：10814514
> 
> 赞同：7
> 
> 时间：2012-05-30T10:31:45.380
> 
> 标签：git, networking, ubuntu, ssl, https

这个问题发生在我的 Ubuntu 12.04，Git 版本 1.7.9.5

当我通过我们学校的网络使用带有 HTTPS 协议的 Git 时，总是出现错误消息**“错误：gnutls_handshake() failed: A TLS packet was received...” 。**

根据Wireshark解析包的结果，Git-client在第四步通过**SSL协议**发送一个Hello包，在第五步收到一个`RST/ACK`错误。

但是在正常的网络环境中，Git 在第四步通过**TLSv1 协议**发送一个 Hello 数据包，然后在收到`ACK`数据包后就像一个魅力。

我想看看我们奇怪的网络环境是哪里出了问题，还是Git引起的？

附件是 Wireshark 在两种网络环境中的结果：

**错误的环境**

![在错误环境中](../Images/64464a48ebbe9172433d554d79415573.png)

**正确的环境**

![在正确的环境中](../Images/a594b099c2a72e0034b849e337e1d6a4.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-08-15T13:31:07.743

看起来您的 HTTPS 流量确实有问题。

在处理具有强制门户身份验证的网络或试图通过向您发送自定义证书来窥探您的流量的代理时，我遇到了此消息。

# facebook - Facebook Graph API：区分“链接”和“状态”的目的是什么？“read_stream”和“friends_status”权限

> ID：10814516
> 
> 赞同：3
> 
> 时间：2012-05-30T10:31:51.793
> 
> 标签：facebook, facebook-graph-api

我正在构建一个使用 facebook 用户朋友的共享链接作为输入的功能。

寻找获得所有这些链接的最佳方式我偶然发现了以下问题：

共享链接在 Graph API 中由*[链接](https://developers.facebook.com/docs/reference/api/link/)*类型或*[状态](https://developers.facebook.com/docs/reference/api/status/)*类型的对象（其中消息包含链接）表示。

我感到困惑的是，为了获得这些链接，需要不同的权限：前者的 read_stream （这很突兀），后者的 Friends_status 。

这有道理吗？*状态*不是*链接*的超集吗？或者我在这里错过了什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-30T10:48:43.597

`friends_status`除非您计划阅读用户朋友的链接状态，否则您不需要。您只需要请求`read_stream`许可。这将使您可以阅读用户墙上的任何内容，即使它是由朋友发布的。

# java - 如何通过 HttpPost 方法发送文本？

> ID：10814518
> 
> 赞同：2
> 
> 时间：2012-05-30T10:31:56.700
> 
> 标签：java, text, connection, apache-httpclient-4.x

我不知道如何使用 HTTPCLIENT (java // apache) 库发送一些文本。我需要通过文本向服务器发送参数。任何想法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-30T10:50:01.123

假设你有`some-remote-server`你的远程服务器地址和`some-servlet`你的远程 servlet，它接受`param1`等`param2`.. 其各自的值根据请求而定。如果远程 servlet 接受 GET 调用，您可以使用下面的方法发送请求；

```
 HttpClient httpClient = new HttpClient();
  GetMethod getMethod = new GetMethod(); //You could use PostMethod if servlet accept POST

  String request ="http://some-remote-server/some-servlet?param1=value1&param2=value2";
  httpClient.getHttpConnectionManager().getParams().setConnectionTimeout(5000);
  getMethod.setURI(new URI(request, false, null));
  ... 
```

然后像这样接收来自远程 servlet 的响应返回；

```
ObjectInputStream ois = new ObjectInputStream(getMethod.getResponseBodyAsStream());
ois.readObject(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-30T10:37:38.420

如果您可以更改工具，请尝试[使用 RestClient Tool](http://marketplace.eclipse.org/content/rest-client) for eclipse。它对测试 RESTful Web 服务有很好的支持。它可以选择指定，

1.  标头参数，
2.  查询参数，
3.  主体
4.  请求类型（GET、POST、PUT、DELETE、HEAD、OPTIONS、TRACE）

# linux - 如何从linux中删除busybox？

> ID：10814522
> 
> 赞同：1
> 
> 时间：2012-05-30T10:32:09.703
> 
> 标签：linux, linux-kernel, boot, bootloader, u-boot

我有一块 Leopard 板（带有 DM368 Ti 处理器）正在运行。（Uboot + Linux Kernel + root fs）

现在，问题是，我不再需要busybox（目前在那里）..所以我删除了它。（从/bin/busybox）并重新启动了电路板，但启动时会出现错误消息 - `Kernel panic - not syncing: No init found`

还有什么我必须删除才能让它工作的吗？还是我做错了什么？

任何帮助！谢谢。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-30T10:34:58.823

BusyBox 充当系统上的“init”进程；如果您删除它，那么您需要找到一个新`init`的来替换它。

# regex - 周期和空间的正则表达式

> ID：10814525
> 
> 赞同：0
> 
> 时间：2012-05-30T10:32:17.433
> 
> 标签：regex, vb.net

我想写一个正则表达式来验证输入。输入具有以下格式：

```
N. Crystal

O. J. Faucon

A. V. E. David 
```

`"^[A-Z. ]*+([a-zA-Z])*$"`不管用。我怎样才能匹配上面的例子？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-30T10:51:24.557

.NET 正确地抱怨嵌套量词。`*`并且`+`是多余的，删除一个。

```
^[A-Z. ]*([a-zA-Z])*$ 
```

此外，`*`在这里使用似乎相当不直观，除非您真的想接受空输入。实际上，您不希望*至少有一个*角色吗？（我们也可以删除多余的括号，因为分组没有意义。）

```
^[A-Z. ]+[a-zA-Z]+$ 
```

最后，它接受几乎所有内容，例如“BAR... FOOxyz”。您可能想要更精确：

```
^([A-Z]\. )+[a-zA-Z]+$ 
```

现在第一组明确匹配一个首字母（即一个大写字母后跟一个点和一个空格），它匹配多个，但至少一个。

# google-chrome-extension - 在选项卡中查看 URL 并阻止它，这样它就不会在发送之前被调用或更改

> ID：10814528
> 
> 赞同：3
> 
> 时间：2012-05-30T10:32:57.293
> 
> 标签：google-chrome-extension

我想通过提供 URL 地址来阻止要调用的 URL，例如：

这不起作用，但是像这样。

```
$.watch("http://www.test.com/alter.php",function(){
    //It was called here
    return false; //This in this scenario would block the URL to be called, it would cancel its request, it wouldn't even send the request, it would cancel before it access the web.
}); 
```

是否可以阻止 URL，使其在通过 Google 扩展程序在选项卡中调用之前不会被调用或更改其请求？

提前致谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-30T14:44:02.127

您可以在阻塞模式下使用 chrome.webRequest 的[onBeforeRequest](http://code.google.com/chrome/extensions/webRequest.html#event-onBeforeRequest)方法来取消导航。

您的清单需要声明“webRequest”和“webRequestBlocking”的权限。

然后添加一个挂钩 onBeforeRequest 的后台脚本并仅取消该 URL 的导航：

```
chrome.extension.onBeforeRequest.addListener(function() { return {cancel: true} },
  { urls: ["http://www.test.com/alter.php"] },
  ["blocking"]
); 
```

# qt - 在 QWizard 中，下一个按钮不能接受按键事件，但接受鼠标按下事件？

> ID：10814529
> 
> 赞同：0
> 
> 时间：2012-05-30T10:33:07.037
> 
> 标签：qt, mouseevent, wizard, qt4.7, qkeyevent

我有一个类继承 QWizard，并添加 2 个独立的 QWizardPage(s)。在转到下一页之前，我想在第一页上做一些工作（即检查互联网连接）。用户可以通过鼠标单击“下一步”按钮，或者直接通过键盘按回车键，因为“下一步”按钮默认为焦点。所以我为按钮安装了一个事件过滤器：

**按钮(QWizard::NextButton)->installEventFilter(this);**

然后在向导类中实现事件处理代码：

```
bool MyWizard::eventFilter(QObject *watched, QEvent *event)
{
    if (watched == button(QWizard::NextButton))
    {
        if (currentId() == startPageId)
        {
            if (event->type() == QEvent::KeyPress)
            {
                QKeyEvent *keyEvent = static_cast<QKeyEvent *>(event);
                if (keyEvent->key() == Qt::Key_Return || keyEvent->key() == Qt::Key_Enter)
                {
                    // Do something. Cannot be reached.
                }
            }
            else if (event->type() == QEvent::MouseButtonPress)
            {
                // Do something. Can be reached.
            }
        }
    }    
    return QWizard::eventFilter(watched, event);
} 
```

正如我多次尝试的那样，单击鼠标始终可以使我的事件处理代码运行，但按键无济于事。另一个奇怪的事情是，在按钮上按下鼠标而不释放，然后移开并释放，向导停留在第一页，现在我可以按下键，一切都好。

任何人都可以帮助找到原因，这是一个 Qt 错误吗？如何使关键事件正常工作？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-30T11:13:27.617

在不安装事件过滤器的情况下尝试另一个简单的解决方案。在您的主应用程序中使用 QkeyPressEvent。

```
void YourAppClass::keyPressEvent(QKeyEvent *e)
{
     if(Nextbutton->hasFocus() && e->key()== Qt::Key_Return || e->key() == Qt::Key_Enter)
     {
     Do your job//I guarantee this will be reached upon pressing return with button focus
     }
} 
```

您可以在 nextbutton 的 clickevent() 中添加鼠标单击功能。

# java - 如何在 map-reduce 中从 hdfs 读取多个图像文件作为输入？

> ID：10814534
> 
> 赞同：2
> 
> 时间：2012-05-30T10:33:20.633
> 
> 标签：java, hadoop, mapreduce

```
private static String[] testFiles = new String[]     {"img01.JPG","img02.JPG","img03.JPG","img04.JPG","img06.JPG","img07.JPG","img05.JPG"};
 // private static String testFilespath = "/home/student/Desktop/images";
private static String testFilespath ="hdfs://localhost:54310/user/root/images";
//private static String indexpath = "/home/student/Desktop/indexDemo";
private static  String testExtensive="/home/student/Desktop/images";

public static class MapClass extends MapReduceBase
implements Mapper<Text, Text, Text, Text> {
private Text input_image = new Text();
private Text input_vector = new Text();
    @Override
public void map(Text key, Text value,OutputCollector<Text, Text> output,Reporter       reporter) throws IOException {

 System.out.println("CorrelogramIndex Method:");  
       String featureString;
int MAXIMUM_DISTANCE = 16;
AutoColorCorrelogram.Mode mode = AutoColorCorrelogram.Mode.FullNeighbourhood;
for (String identifier : testFiles) {
            try (FileInputStream fis = new FileInputStream(testFilespath + "/" +    identifier)) {
  //Document doc = builder.createDocument(fis, identifier);
//FileInputStream imageStream = new FileInputStream(testFilespath + "/" + identifier);
BufferedImage bimg = ImageIO.read(fis);
 AutoColorCorrelogram vd = new AutoColorCorrelogram(MAXIMUM_DISTANCE, mode);
                 vd.extract(bimg);
               featureString = vd.getStringRepresentation();
               double[] bytearray=vd.getDoubleHistogram();
              System.out.println("image: "+ identifier + " " + featureString );

        }
             System.out.println(" ------------- ");
input_image.set(identifier);
input_vector.set(featureString);
   output.collect(input_image, input_vector);
              }

     }
   }

  public static class Reduce extends MapReduceBase
  implements Reducer<Text, Text, Text, Text> {

    @Override
public void reduce(Text key, Iterator<Text> values,
                   OutputCollector<Text, Text> output, 
                   Reporter reporter) throws IOException {
  String out_vector="";

  while (values.hasNext()) {
   out_vector.concat(values.next().toString());
 }
  output.collect(key, new Text(out_vector));
  }
}

static int printUsage() {
System.out.println("image_mapreduce [-m <maps>] [-r <reduces>] <input> <output>");
ToolRunner.printGenericCommandUsage(System.out);
return -1;
}

@Override
  public int run(String[] args) throws Exception {
JobConf conf = new JobConf(getConf(), image_mapreduce.class);
conf.setJobName("image_mapreduce");

// the keys are words (strings)
conf.setOutputKeyClass(Text.class);
// the values are counts (ints)
conf.setOutputValueClass(Text.class);

conf.setMapperClass(MapClass.class);        
//  conf.setCombinerClass(Reduce.class);
conf.setReducerClass(Reduce.class);

List<String> other_args = new ArrayList<String>();
for(int i=0; i < args.length; ++i) {
  try {
    if ("-m".equals(args[i])) {
      conf.setNumMapTasks(Integer.parseInt(args[++i]));
    } else if ("-r".equals(args[i])) {
      conf.setNumReduceTasks(Integer.parseInt(args[++i]));
    } else {
      other_args.add(args[i]);
    }
  } catch (NumberFormatException except) {
    System.out.println("ERROR: Integer expected instead of " + args[i]);
    return printUsage();
  } catch (ArrayIndexOutOfBoundsException except) {
    System.out.println("ERROR: Required parameter missing from " +
                       args[i-1]);
    return printUsage();
  }
}

   FileInputFormat.setInputPaths(conf, other_args.get(0));
    //FileInputFormat.setInputPaths(conf,new    Path("hdfs://localhost:54310/user/root/images"));
FileOutputFormat.setOutputPath(conf, new Path(other_args.get(1)));

JobClient.runJob(conf);
return 0;
}

 public static void main(String[] args) throws Exception {
int res = ToolRunner.run(new Configuration(), new image_mapreduce(), args);
System.exit(res);
 }

} 
```

`我正在编写一个程序，它将多个图像文件作为输入，存储在 hdfs 中并在 map 函数中提取特征。如何指定在 FileInputStream（一些参数）中读取图像的路径？或者有什么方法可以读取多个图像文件？

我想要做的是： -- 以 hdfs 中的多个图像文件作为输入 -- 在 map 函数中提取特征。-- 迭代地减少。请帮助我编写代码或更好的方法。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-30T10:56:16.507

研究使用[HIPI 库](http://hipi.cs.virginia.edu/)- 它将图像集合存储到 ImageBundle 中（这比将单个图像文件存储在 HDFS 中更有效）。他们也有几个例子。

至于您的代码，您需要指定您计划使用的输入和输出格式。没有当前的输入格式可以传递整个文件，但是您可以扩展 FileInputFormat 并创建一个发出`<Text, BytesWritable>`对的 RecordReader，其中键是文件名，值是图像文件的字节。

事实上*[Hadoop - The Definitive Guide](http://books.google.com/books?id=Nff49D7vnJcC&pg=PA206&lpg=PA206&dq=hadoop%20whole%20file%20input%20format&source=bl&ots=IieySt5zWv&sig=RzWxqzrxDHXmhHsCnYOOieUVOCk&hl=en&sa=X&ei=kBHGT9GsH_L46QGPkdmcBg&ved=0CF4Q6AEwBQ#v=onepage&q=hadoop%20whole%20file%20input%20format&f=false)*有一个这种精确输入格式的例子：

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-07-04T10:07:28.073

如果您想将所有图像作为输入发送到 MR 任务，只需将 conf.setFileInputPath() 设置为输入目录如果您想在特定文件夹中发送选择性图像您可以在设置 conf.设置文件输入路径（）；

一种方法是为每个图像创建一个 Path[] 。或者只是将其设置为所有路径的逗号分隔字符串。浏览以下文档

[http://hadoop.apache.org/docs/current/api/org/apache/hadoop/mapred/FileInputFormat.html](http://hadoop.apache.org/docs/current/api/org/apache/hadoop/mapred/FileInputFormat.html)

还有一件事，您必须将 Map 输入格式设置为 Text，ByteArray 从该 ByteArray 输入中获取图像特征，而不是创建新的文件输入流。

# python - 我可以在 Python 中迭代一个类吗？

> ID：10814535
> 
> 赞同：30
> 
> 时间：2012-05-30T10:33:34.080
> 
> 标签：python

我有一个类在类变量中跟踪其实例，如下所示：

```
class Foo:
    by_id = {}

    def __init__(self, id):
        self.id = id
        self.by_id[id] = self 
```

我想做的是遍历类的现有实例。我可以这样做：

```
for foo in Foo.by_id.values():
    foo.do_something() 
```

但它看起来像这样更整洁：

```
for foo in Foo:
    foo.do_something() 
```

这可能吗？我尝试定义一个 classmethod `__iter__`，但这没有用。

* * *

## 回答 #1

> 赞同：32
> 
> 时间：2012-05-30T10:41:56.900

如果你想迭代*类*，你必须定义一个支持迭代的元类。

x.py：

```
class it(type):
    def __iter__(self):
        # Wanna iterate over a class? Then ask that class for iterator.
        return self.classiter()

class Foo:
    __metaclass__ = it # We need that meta class...
    by_id = {} # Store the stuff here...

    def __init__(self, id): # new isntance of class
        self.id = id # do we need that?
        self.by_id[id] = self # register istance

    @classmethod
    def classiter(cls): # iterate over class by giving all instances which have been instantiated
        return iter(cls.by_id.values())

if __name__ == '__main__':
    a = Foo(123)
    print list(Foo)
    del a
    print list(Foo) 
```

正如您最后看到的，删除实例不会对对象本身产生任何影响，因为它保留在`by_id`字典中。`weakref`当你

```
import weakref 
```

然后做

```
by_id = weakref.WeakValueDictionary() 
```

. 这样，只要有一个“强”引用保存它，这些值就会保留，例如`a`在这种情况下。之后`del a`，只有指向该对象的弱引用，所以它们可以被 gc'ed。

由于有关`WeakValueDictionary()`s 的警告，我建议使用以下内容：

```
[...]
    self.by_id[id] = weakref.ref(self)
[...]
@classmethod
def classiter(cls):
    # return all class instances which are still alive according to their weakref pointing to them
    return (i for i in (i() for i in cls.by_id.values()) if i is not None) 
```

看起来有点复杂，但要确保你得到的是对象而不是`weakref`对象。

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2012-05-30T10:45:32.577

魔术方法总是在类中查找，因此添加`__iter__`到类不会使其可迭代。然而，该类是其元类的一个实例，因此元类是定义该`__iter__`方法的正确位置。

```
class FooMeta(type):
    def __iter__(self):
        return self.by_id.iteritems()

class Foo:
    __metaclass__ = FooMeta
    ... 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2015-08-21T21:46:57.283

试试这个：

您可以创建一个具有全局范围的列表，在主模块中定义一个列表，如下所示：

```
fooList = [] 
```

然后加：

```
class Foo:
  def __init__(self):
    fooList.append(self) 
```

到foo 类的**init**

然后每次创建 Foo 类的实例时，它都会被添加到 fooList 列表中。

现在您所要做的就是像这样遍历对象数组

```
for f in fooList:
    f.doSomething() 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2015-08-23T03:37:34.837

您可以创建一个类列表，然后在 init 方法中调用 append，如下所示：

```
class Planet:
  planets_list = []

  def __init__(self, name):
     self.name = name
     self.planets_list.append(self) 
```

用法：

```
p1 = Planet("earth")
p2 = Planet("uranus")

for i in Planet.planets_list:
    print(i.name) 
```

# java - 线程“主”java.lang.UnsatisfiedLinkError 中的异常：动态链接库 (DLL) 初始化例程失败

> ID：10814536
> 
> 赞同：1
> 
> 时间：2012-05-30T10:33:35.857
> 
> 标签：java, c++, winapi, dll, java-native-interface

这是一个非常有趣的问题。*在本机*代码打印它的一些语句后，我得到了提到的异常。抛出的异常是：

```
hookThreadHandle is not NULL

hookThreadHandle is not NULL
Exception in thread "main" java.lang.UnsatisfiedLinkError: W:\elita\jnitesters\
workspace\c\MyHook\bin\Debug\MyHook.dll: A dynamic link library (DLL) initialization r
outine failed
    at java.lang.ClassLoader$NativeLibrary.load(Native Method)
    at java.lang.ClassLoader.loadLibrary0(Unknown Source)
    at java.lang.ClassLoader.loadLibrary(Unknown Source)
    at java.lang.Runtime.loadLibrary0(Unknown Source)
    at java.lang.System.loadLibrary(Unknown Source)
    at keylogger.TestKeys.main(TestKeys.java:12) 
```

前两个语句`hookThreadHandle is not NULL`是`dll`初始化失败的语句！为什么它在实际找到`dll`然后打印语句后抛出异常。?

什么是`A dynamic link library (DLL) initialization routine failed`异常？它意味着什么？

*Java 代码：*

```
package keylogger;

public class TestKeys {
private static int i = 0;
private native void setWinHook();
private native void unregisterWinHook();

public static void main(String args[]) {

    //TestKeys o = new TestKeys();

    System.loadLibrary("MyHook"); // load the library that registers the hook

    Runnable r = new Runnable() {
        @Override
        public void run() {
            try {
                System.out.println("Sleeping for 10 seconds..");
                Thread.sleep(10000);
            }catch(Exception exc) {
                exc.printStackTrace();
            }
        }
    };
    new Thread(r,"new thread").start();       
 }
} 
```

*C代码：*

```
#include <stdio.h>
#include <windows.h>
#include <w32api.h>
#include "keylogger_TestKeys.h"

static HHOOK handleKeyboardHook = NULL;
HINSTANCE hInst = NULL;
static DWORD hookThreadId = 0;
static HANDLE hookThreadHandle = NULL;
BOOL WINAPI installHook(HINSTANCE hinstDLL, DWORD fwdReason, LPVOID lpvReserved);

static LRESULT CALLBACK LowLevelKeyboardProc(int nCode, WPARAM wParam, LPARAM lParam) {

 printf("You pressed the key !\n");

 return CallNextHookEx(handleKeyboardHook, nCode, wParam, lParam);
}

BOOL WINAPI DllMain( HINSTANCE hinstDLL, DWORD fwdReason, LPVOID lpvReserved) {
  LPTHREAD_START_ROUTINE lpStartAddress = &installHook;
  hookThreadHandle = CreateThread(NULL, 0, lpStartAddress, NULL, 0, &hookThreadId);
  if(hookThreadHandle == NULL) {
    printf("\nhookThreadHandle is NULL\n");
  } else {
      printf("\nhookThreadHandle is not NULL\n");
   }
}

JNIEXPORT void JNICALL Java_keylogger_TestKeys_unregisterWinHook
 (JNIEnv *env, jobject obj) {
   if(handleKeyboardHook != NULL) {
     UnhookWindowsHookEx(handleKeyboardHook);
     printf("Keyboard hook successfully unregistered !");
   } else {
       printf("Coudn't Unhook the keyboard hook !");
     }
 }

BOOL WINAPI installHook(HINSTANCE hinstDLL, DWORD fwdReason, LPVOID lpvReserved) {

handleKeyboardHook = SetWindowsHookEx(WH_KEYBOARD_LL, LowLevelKeyboardProc, hinstDLL, 0);
MSG msg;

while(GetMessage(&msg, NULL, 0, 0))
{
  TranslateMessage(&msg);
  DispatchMessage(&msg);
}
return msg.wParam; 
```

}

可能是什么原因 ？[CMD 上的输出](http://i49.tinypic.com/23ldvg5.jpg)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-30T10:50:59.953

`DllMain`应该返回一个`BOOL`指示它是否成功的。来自[MSDN](http://msdn.microsoft.com/en-us/library/windows/desktop/ms682583%28v=vs.85%29.aspx)：

> 当系统`DllMain`使用该值调用函数时，如果成功或初始化失败`DLL_PROCESS_ATTACH`，则函数返回。如果返回值是when因为进程使用函数而被调用，则返回。（系统会立即使用您的入口点函数调用并卸载 DLL。）如果返回值是在进程初始化期间调用的when ，则进程会因错误而终止。要获取扩展的错误信息，请调用。`TRUE``FALSE``FALSE``DllMain``LoadLibrary``LoadLibrary``NULL``DLL_PROCESS_DETACH``FALSE``DllMain``GetLastError`

您的函数缺少必要的`return`语句。

# java - java - 如何在java中比较两个hasmap而不考虑它们的键？

> ID：10814538
> 
> 赞同：-3
> 
> 时间：2012-05-30T10:33:38.220
> 
> 标签：java, hashmap

> **可能重复：**
> [如何在 java 中比较两个哈希图？](https://stackoverflow.com/questions/10813196/how-to-compare-two-hashmaps-in-java)

嗨，我有两个不同的地图，它们的值如下

地图，

```
1.=============Employee=================

Key : 1_10 : Value : 13/04/2012
Key : 1_11 : Value : 18/04/2012
Key : 1_12 : Value : 19/04/2012
Key : 1_14 : Value : 23/04/2012
Key : 1_13 : Value : 20/04/2012
Key : 1_16 : Value : 25/04/2012
Key : 1_1  : Value : 02/04/2012
Key : 1_15 : Value : 24/04/2012
Key : 1_18 : Value : 27/04/2012
Key : 1_3  : Value : 04/04/2012
Key : 1_17 : Value : 26/04/2012
Key : 1_2  : Value : 03/04/2012
Key : 1_5  : Value : 06/04/2012
Key : 1_19 : Value : 30/04/2012
Key : 1_4  : Value : 05/04/2012
Key : 1_7  : Value : 10/04/2012
Key : 1_6  : Value : 09/04/2012
Key : 1_9  : Value : 12/04/2012
Key : 1_8  : Value : 11/04/2012

2.=============Working day=================

Key : 27 : Value : 27/4/2012
Key : 02 : Value : 02/4/2012
Key : 26 : Value : 26/4/2012
Key : 19 : Value : 19/4/2012
Key : 11 : Value : 11/4/2012
Key : 04 : Value : 04/4/2012
Key : 30 : Value : 30/4/2012
Key : 06 : Value : 06/4/2012
Key : 13 : Value : 13/4/2012
Key : 09 : Value : 09/4/2012
Key : 03 : Value : 03/4/2012
Key : 23 : Value : 23/4/2012
Key : 20 : Value : 20/4/2012
Key : 16 : Value : 16/4/2012
Key : 10 : Value : 10/4/2012
Key : 18 : Value : 18/4/2012
Key : 25 : Value : 25/4/2012
Key : 17 : Value : 17/4/2012
Key : 12 : Value : 12/4/2012
Key : 24 : Value : 24/4/2012
Key : 05 : Value : 05/4/2012 
```

我只想比较这两个哈希映射并给出映射中不存在的值而不是另一个。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-30T11:01:18.737

假设 map1 是您的第一张地图的哈希图，而 map2 是您的第二张地图的哈希图。然后，

```
Collection<String> c1 = map1.values();
c1.removeAll(map2.values());  // this one removes all the values from c1 which are also in map2.
Iterator<String> it = c1.iterator();
while (it.hasNext()) {
    System.out.println(it.next());
} 
```

因此，您会得到 map1 包含的值，而 map2 不包含的值。

# c++ - C++ 比较双打

> ID：10814540
> 
> 赞同：1
> 
> 时间：2012-05-30T10:33:48.187
> 
> 标签：c++, comparison, double

将 < 或 > 与双打一起使用是否有任何已知问题？

```
d1 > d2

d2 > d1 
```

我找不到任何表明这将是一个问题的东西。

但是，我认为由于平等问题，这将是一个问题，我将不得不使用 Epsilon 使用“几乎相等”的逻辑：

```
d1 >= d2

d2 >= d1 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-30T10:36:18.717

`>`并`<`完全按预期工作；如果 的值`d1`大于 的值`d2`，`d1 > d2`则将是`true`（反之亦然）。问题（如果有的话）是`d1`并且`d2`可能不是您期望的值。

但是，替换`>`为`>=`将更改恰好一个值的行为`d1`（对于 的固定值`d2`）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-30T10:36:44.660

`d1`唯一的问题是，如果有两个变量并且`d2`您认为它们具有相同的价值，您可能会得到“误报” 。在这种情况下，如果您这样做`d1 > d2`，则表达式有可能评估为真。

# c++ - 使用 Socket 发送 POST 请求，但会占用大量内存

> ID：10814541
> 
> 赞同：-1
> 
> 时间：2012-05-30T10:33:51.757
> 
> 标签：c++, c, sockets

这个长代码使用 Socket 发送一个 POST 请求，整个代码没有任何抱怨，但我现在面临的是，它消耗了大量的 cpu 功率，使用了太多的内存（RAM）

我可以看到这一点，因为我的笔记本电脑很快就变热了，并且通过查看我的 mac。

我试图找到错误或在哪里，那个非常大的内存问题是，但不能。我已经花了一个多月的时间试图自己修复它，但老实说，我不知道我在做什么。

我是如此绝望，以至于我采取了各种释放方式..即使它错了..只是想看看是否能做出改变，但什么也没做..

所以现在我不知道出了什么问题或如何解决这个问题，请帮助我......</p>

使用 select 更新代码，时刻...尝试先清理它

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-30T10:39:27.513

第一件事：不要混合 malloc() 和 delete[]。它们可能会或可能不会引用相同的内存分配器。所以使用 malloc()/free() 或 new char[]/delete[] 对。

问题就在这里（在 Database() 函数中）：你有一个可怕的 memleak。不要为结果传递分配这样的内存。更好地使用缓冲区。您的程序是多线程的，因此请使用堆栈上的缓冲区。不要对您未分配的任何内容调用 delete[]（var 声明，如“char Buf[100];”*不是*分配）。

新版本（我省略了 main() 和 strip() 函数。还有包括）：

```
#define MAX_ECHO_SIZE (1024)
#define MAX_RESPONSE_SIZE (1024)

void process_http(int sockfd, const char *host, const char *page, const char *poststr, char* OutResponse)
 {
    char* ptr;
    char sendline[MAXLINE + 1], recvline[MAXLINE + 1];
    ssize_t n;

    snprintf(sendline, MAXSUB, 
         "POST %s HTTP/1.0\r\n"  // POST or GET, both tested and works. Both HTTP 1.0 HTTP 1.1 works, but sometimes 
         "Host: %s\r\n"     //oth HTTP 1.0 HTTP 1.1 works, but sometimes HTTP 1.0 works better in localhost type
         "Content-type: application/x-www-form-urlencoded\r\n"
         "Content-length: %d\r\n\r\n"
         "%s\r\n", page, host, (unsigned int)strlen(poststr), poststr);

    if (write(sockfd, sendline, strlen(sendline))>= 0) 
    {
        while ((n = read(sockfd, recvline, MAXLINE)) > 0) 
        {
            recvline[n] = '\0';

            if(fputs(recvline,stdout) ==EOF) { cout << ("fputs erros"); }
            ptr = strstr(recvline, "\r\n\r\n");
            strip(ptr, "\r\n\r\n");

            // check len for OutResponse here ?
            snprintf(OutResponse, 6000,"%s", ptr);
        }
    }
}

int Database( const char * hname,  const char * page,  const char * var, const char * poststr,  int  port, char* EchoResponse, int MaxEchoLen){

    char url[MAXLINE];
    char response[MAX_RESPONSE_SIZE];

    snprintf(url, MAXLINE, "%s=%s", var, poststr);

    short int sockfd ;
    struct sockaddr_in servaddr;
    struct hostent *hptr;
    char str[MAXLINE];
    char** pptr;

    hptr = gethostbyname(hname);

    sockfd = socket(AF_INET, SOCK_STREAM, 0);

    if (!hptr) {
        cout << ("host not found\n");
        return -1; // "host not found";
    }

    if (hptr->h_addrtype == AF_INET && (pptr = hptr->h_addr_list) != NULL) {
        inet_ntop(hptr->h_addrtype, *pptr, str, sizeof(str)); 
    }
    if (sockfd  >= 0  ) {
        bzero(&servaddr, sizeof(servaddr));
        servaddr.sin_family = AF_INET;
        servaddr.sin_port = htons(port);
        inet_pton(AF_INET, str, &servaddr.sin_addr);

        if (connect(sockfd, (SA *) & servaddr, sizeof(servaddr)) < 0) {
            return -2; // "Server down, connect error";
        }
        else {
            process_http(sockfd, hname, page, url, &response[0], MAX_RESPONSE_SIZE);

            int len = strlen(response)+1;
            if(len >= MaxEchoLen) { return -3; /* buffer too small*/ }

            // Copy the contents with
            strcpy(EchoResponse, response);

            /// You must not free all of char[] allocated on stack
            close(sockfd);

            return 0; // OK
        }
    }
}

void *multithreading1( void *ptr ) {
    char LocalEchoResponse[MAX_ECHO_SIZE];

    while (1) {
            int RetCode = Database("2.107.xx.xxx", "/ajax.php", "submit", "HEllo WORLD", 80, &LocalEchoResponse[0], MAX_ECHO_SIZE);
            /// check the error
    }   
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-30T10:37:08.793

strip_copy 中有相当大的内存泄漏。你在 return 之后放的任何东西都不会被执行。我很惊讶编译器没有抱怨这个。process_http() 函数中的同样问题。

像这样修复它：

```
static void strip_copy(char const *s, char *buf, const char * SPACE)
{
    if (buf)
    {
        char *p = buf;
        char const *q;
        int n;
        for (q = s; *q; q += n + strspn(q+n, SPACE))
        {
            n = strcspn(q, SPACE);
            strncpy(p, q, n);
            p += n;
        }
        *p++ = '\0';
        buf = (char*)realloc(buf, p - buf);
    }
}

// Then call it like this
char *buf = new[1 + strlen(s)];
strip_copy(s, buf, ' ');
// use buf
delete [] buf; 
```

并在 process_http()

```
const char*  process_http(int sockfd, const char *host, const char *page, const char *poststr)
{
    ....
    // delete here only what you dynamically 
    // allocated with new() BEFORE the return
    return response; // n
} 
```

并且不要将 malloc() 与 delete() 混合：

*   malloc() 与 free() 一起使用
*   new() 与 delete() 一起使用

这与使用的内存无关，但不是直接调用 read()/write()，您应该使用 select() 来知道它何时准备好被读取或写入。这是一个相关的问题：[https ://stackoverflow.com/a/10800029/1158895](https://stackoverflow.com/a/10800029/1158895)

# jquery - Jquery Webservice方法调用

> ID：10814545
> 
> 赞同：0
> 
> 时间：2012-05-30T10:34:15.580
> 
> 标签：jquery, ajax, json, gridview

我是 Jquery 和 Ajax 的新手。我正在调用 Web 服务并获取 XML 数据作为输出。我想将 XML 数据转换为数组，以便我可以将此数据与 AJAX GRIDVIEW 绑定。我已经发布了 js 代码、webmethod 的结果和所需的结果。将 XML 转换为数组的任何方式。谢谢你的帮助。

JS代码是：

```
var jsonText = $.toJSON(subc);
            $.ajax(
            {
                type: "POST",
                url: "frmFeesCollection.aspx/ServerSideMethod",
                data: "{paraml: '" + jsonText + "'}",
                contentType: "application/json; charset=utf-8",
                dataType: "json",
                async: true,
                cache: false,
                success:function(result)
                {
                    var gridView = $find('<%= grdpopup.ClientID %>');
                    //Converting of XML to array here
                    var data = new Array();
                    gridView.set_dataSource(data);
                    gridView.dataBind();
                },
                error: function(err) {
                     alert('Error:' + err.responseText + '  Status: ' + err.status);
                }
           }); 
```

Web 服务的结果如下所示：

```
<NewDataSet>  
<Table>
<SUBCAT>1</SUBCAT>
<PENDF>1</PENDF>
<PAIDM>1000.00</PAIDM>
</Table>
<Table>
<SUBCAT>1</SUBCAT>
<PENDF>1</PENDF>
<PAIDM>5000.00</PAIDM>
</Table>
<Table>
<SUBCAT>6</SUBCAT>
<PENDF>1</PENDF>
<PAIDM>1000.00</PAIDM>
</Table>
<Table>
<SUBCAT>6</SUBCAT>
<PENDF>1</PENDF>
<PAIDM>6000.00</PAIDM>
</Table>
</NewDataSet> 
```

所需的数组将是这样的：

```
data[0] = { SUBCAT: 1, PENDF: 1,PENDM: 1000.00};
data[1] = { SUBCAT: 1, PENDF: 1,PENDM: 5000.00};
data[2] = { SUBCAT: 6, PENDF: 1,PENDM: 1000.00 };
data[3] = { SUBCAT: 1, PENDF: 1,PENDM: 6000.00}; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-30T10:59:39.830

谢谢你们的努力。终于找到了这个方法，现在效果很好。

```
success:function(result)
                {
                    var gridView = $find('<%= grdpopup.ClientID %>');
                    var xmlDoc = $.parseXML(result);
                    var xml = $(xmlDoc);
                    var customers = xml.find("Table");
                    var data = new Array();

                    $.each(customers, function (index, value) 
                    {
                        var s =$(this).find("SUBCAT").text();
                        var p =$(this).find("PENDF").text();
                        var pm = $(this).find("PAIDM").text();
                        data[index] = { SUBCAT: s, PENDF: p,PAIDM: pm };
                    });
                    gridView.set_dataSource(data);
                    gridView.dataBind();
                    }, 
```

# mysql - 我无法在我的 mysql 数据库中看到任何表的外键

> ID：10814548
> 
> 赞同：0
> 
> 时间：2012-05-30T10:34:27.933
> 
> 标签：mysql, key, cascade

mysql 新手，很多人都告诉过，不需要在 mysql 中创建外键？表关系将如何保持一致并且级联将如何完成？我在哪里可以找到有关在我的 mysql 表上创建的外键的信息？desc table_name 或 show create table_name 未提供任何信息....

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-30T10:38:15.997

MySQL 中的外键仅适用于 InnoDB 表。它们*确实*出现在`SHOW CREATE TABLE`. 您可能实际上没有定义外键，因为 MySQL 会默默地*忽略*`column type REFERENCES othertable(column)`语法；只有单独`FOREIGN KEY (column) REFERENCES othertable(column)`的外键定义在`CREATE TABLE`.

相关阅读：[MySQL 文档中的 CREATE TABLE](http://dev.mysql.com/doc/refman/5.1/en/create-table.html)（搜索“内联引用规范”）

# android - 如何在android的共享首选项中存储图像路径？

> ID：10814551
> 
> 赞同：-4
> 
> 时间：2012-05-30T10:34:42.883
> 
> 标签：android, image, sharedpreferences

我有一个要存储在共享首选项中的图像路径。

1.  如何将路径存储在共享首选项中？
2.  如何从共享首选项中检索图像路径？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-30T10:50:22.153

您所要做的就是将您的图像转换为它的 Base64 字符串表示形式：

```
Bitmap realImage = BitmapFactory.decodeStream(stream);
ByteArrayOutputStream baos = new ByteArrayOutputStream();
realImage.compress(Bitmap.CompressFormat.JPEG, 100, baos);   
byte[] b = baos.toByteArray(); 

String encodedImage = Base64.encodeToString(b, Base64.DEFAULT);
textEncode.setText(encodedImage);

SharedPreferences shre = PreferenceManager.getDefaultSharedPreferences(this);
Editor edit=shre.edit();
edit.putString("image_data",encodedImage);
edit.commit(); 
```

然后，在检索时，将其转换回位图：

```
SharedPreferences shre = PreferenceManager.getDefaultSharedPreferences(this);
String previouslyEncodedImage = shre.getString("image_data", "");

if( !previouslyEncodedImage.equalsIgnoreCase("") ){
    byte[] b = Base64.decode(previouslyEncodedImage, Base64.DEFAULT);
    Bitmap bitmap = BitmapFactory.decodeByteArray(b, 0, b.length);
    imageConvertResult.setImageBitmap(bitmap);
} 
```

但是，我必须告诉你，Base64 支持只是最近才包含在 API8 中。要针对较低的 API 版本，您需要先添加它。幸运的是，[这个](http://androidcodemonkey.blogspot.com/2010/03/how-to-base64-encode-decode-android.html)人已经有了所需的教程。

另外我必须告诉你，这是一个复杂的过程，shareprefrence 仅用于存储少量数据，例如用户名和密码，你也可以使用这种方法：

将图像路径（来自 sdcard）存储到这样的共享首选项中 -

```
SharedPreferences shre = PreferenceManager.getDefaultSharedPreferences(this);
Editor edit=shre.edit();
edit.putString("imagepath","/sdcard/imh.jpeg");
edit.commit(); 
```

要加载您的图像路径，您可以使用它

```
final SharedPreferences sharedPreference = getSharedPreferences(
                "pref_key", MODE_PRIVATE);
        if (sharedPreference.contains("imagepath")) {
            String mFilePath = sharedPreference.getString(imagepath,
                    null);
        } 
```

获得路径后，您可以使用：

```
File imgFile = new  File(mFilePath);
if(imgFile.exists()){

    Bitmap myBitmap = BitmapFactory.decodeFile(imgFile.getAbsolutePath());

    ImageView myImage = (ImageView) findViewById(R.id.imageviewTest);
    myImage.setImageBitmap(myBitmap);

} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-30T10:38:56.263

将路径存储为**字符串**。

```
Editor e = PreferenceManager.getDefaultSharedPreferences(getBaseContext()).edit();
e.putString("your_preference", your_path.toString());
e.commit(); 
```

这也被问过很多次，因此 -1

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-30T10:41:34.177

```
final SharedPreferences sPreference = getSharedPreferences(
                "pref_key", MODE_PRIVATE);
        final Editor spEditor = sPreference.edit();
        spEditor.putString("img_path", mFileName);
        spEditor.commit(); 
```

上面的代码对于将图像路径保存到共享首选项中很有用。现在要检索图像路径，请使用以下内容：

```
final SharedPreferences sharedPreference = getSharedPreferences(
                "pref_key", MODE_PRIVATE);
        if (sharedPreference.contains("img_path")) {
            mFileName = sharedPreference.getString(img_path,
                    null);
        } 
```

# jsf - Tomcat @Resource 注释 API 注释在 Tomcat 7 中停止工作

> ID：10814557
> 
> 赞同：-2
> 
> 时间：2012-05-30T10:34:53.267
> 
> 标签：jsf, tomcat, annotations, tomcat6, tomcat7

多年来，我一直在使用 Tomcat 6.0.26-6.0.35 和 JSF 2 Mojarra，直到 2.1.2 的各种版本，我已经使用了几个月。我有几个请求范围和会话范围的 bean，代码如下：

```
private @Resource(name="jdbc/cLabs", mappedName="jdbc/cLabs") DataSource cLabs; 
```

它已正确注入到我使用过的每个版本的 Tomcat 6 中。我也有其他类型的`@Resource`也不起作用，所以不仅仅是`DataSource resources.`我尝试切换到 Tomcat 7.0.27，突然这些结构都不再起作用了。资源未注入。我也有其他类型的`@Resource`也不起作用，所以它不仅仅是`DataSource`资源。然而，在每种情况下，命名的资源确实存在，并且可以通过例如

```
new InitialContext().lookup("java:comp/env/jdbc/cLabs"); 
```

[它们由 context.xml 中的元素定义]

这当然是皇家 PITA，因为我在一两年前花了一些时间将后者替换为前者。我必须用 Tomcat 7 编织一些其他魔法咒语才能让它再次工作吗？

请注意，资源*被*正确地注入到 Servlet 中，因此它并没有被完全破坏。Tomcat 和 JSF 之间的一些交互。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2014-02-24T03:52:30.063

我的猜测是某些原因导致 org.apache.catalina.core.DefaultInstanceManager 忽略注释，因为面需要 @PostConstruct 方法与 @Resource 字段分开处理。我创建了一个适用于使用@Resource 注释的字段的解决方法。

将以下内容添加到 web.xml：

```
<context-param>
    <param-name>com.sun.faces.injectionProvider</param-name>
    <param-value>com.example.faces.Tomcat7InjectionProvider</param-value>
</context-param> 
```

并将该类添加到您的源中：

```
package com.example.faces;

import java.lang.reflect.Field;

import javax.annotation.Resource;
import javax.naming.Context;
import javax.naming.InitialContext;
import javax.servlet.ServletContext;

import org.apache.catalina.util.Introspection;

import com.sun.faces.spi.InjectionProviderException;
import com.sun.faces.vendor.WebContainerInjectionProvider;

public class Tomcat7InjectionProvider extends WebContainerInjectionProvider {

    public Tomcat7InjectionProvider(ServletContext servletContext) {
    }

    @Override
    public void inject(Object managedBean) throws InjectionProviderException {
        if (managedBean != null) {
            // see org.apache.catalina.core.DefaultInstanceManager
            Field[] fields = Introspection.getDeclaredFields(managedBean.getClass());
            for (Field field : fields) {
                // field may be private
                field.setAccessible(true);
                if (field.isAnnotationPresent(Resource.class)) {
                    Resource annotation = null;
                    try {
                        annotation = field.getAnnotation(Resource.class);
                        Context ctx = new InitialContext();
                        Object resource = ctx.lookup("java:comp/env/" + annotation.name());
                        field.set(managedBean, resource);
                    } catch (Exception e) {
                        throw new InjectionProviderException("cannot find resource " + annotation.name(), e);
                    }
                }
            }
        }
    }
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-11-18T03:34:32.707

回答我自己的问题，@JeffE 答案的改进版本。基本问题是：

1.  A`Tomcat6InjectionProvider`由 JSF 2.0 提供，但在某些时候被删除。
2.  正如 JeffE 指出的那样，默认`WebContainerInjectionProvider`不处理 @Resource 注释。

您可以在没有上下文条目的情况下克服此问题`web.xml`，如下所示：

1.  创建一个名为的文件`META-INF/services/com.sun.faces.spi.injectionprovider`并向其中添加以下行：

    ```
    com.sun.faces.vendor.Tomcat7InjectionProvider:org.apache.catalina.core.DefaultInstanceManager 
    ```

    这一行的意思是，如果部署中存在第二个类，则将第一个类用作注入提供程序。上面的第二个类是 Tomcat 7 的一部分。

2.  编译以下类。

此版本包含对 JeffE 版本的许多改进。具体来说：

*   它根据`@Resource`和`@Resources`Javadoc的要求处理超类
*   它在类级别处理`@Resource`和注释`@Resources`
*   它根据Javadoc`@Resource`的要求处理带有 注释的方法`@Resource`
*   它按照Javadoc的要求正确处理 s 的空属性或缺失`name`属性`@Resource``@Resource`
*   它恢复了`Field`的原始访问权限
*   它不依赖于 Tomcat 类。

如果更改包名称，请调整上面的包名称。

```
package com.sun.faces.vendor;

import com.sun.faces.spi.DiscoverableInjectionProvider;
import com.sun.faces.spi.InjectionProviderException;
import java.lang.reflect.Field;
import java.util.logging.Level;
import java.util.logging.Logger;
import javax.annotation.Resource;
import javax.naming.Context;
import javax.naming.InitialContext;
import javax.naming.NamingException;
import javax.servlet.ServletContext;

/**
 * @author Jeff E
 * @author Esmond Pitt Improvements named above.
 * 
 * @see javax.annotation.Resource
 *
 * @see <a href="http://stackoverflow.com/a/21978577/207421">This StackOverflow
 * answer, although what org.apache.catalina.util.Introspection may be and where
 * it lives remains a mystery.</a>
 */
public class Tomcat7InjectionProvider
    extends DiscoverableInjectionProvider
{
    private Logger logger = Logger.getLogger(this.getClass().getName());
    private ServletContext  servletContext;

    private WebContainerInjectionProvider   delegate = new WebContainerInjectionProvider();

    public Tomcat7InjectionProvider(ServletContext servletContext)
    {
        logger.config("constructed");
        this.servletContext = servletContext;
    }

    @Override
    public void inject(Object managedBean) throws InjectionProviderException
    {
        logger.log(Level.CONFIG, "managedBean={0}", new Object[]{managedBean.getClass().getName()});
        Class<?> clazz = managedBean.getClass();
        do
        {
            List<Resource>  classResources = new LinkedList<>();
            // Process class-level @Resources and @Resource
            if (clazz.isAnnotationPresent(Resources.class))
            {
                Resources annotation = clazz.getAnnotation(Resources.class);
                for (Resource resource : annotation.value())
                {
                    classResources.add(resource);
                }
            }
            if (clazz.isAnnotationPresent(Resource.class))
            {
                Resource    annotation = clazz.getAnnotation(Resource.class);
                classResources.add(annotation);
            }
            for (Resource annotation : classResources)
            {
                String  name = annotation.name();
                // Make sure the resource exists.
                try
                {
                    Context ctx = new InitialContext();
                    Object resource = ctx.lookup("java:comp/env/" + name);
                }
                catch (NamingException exc)
                {
                    throw new InjectionProviderException("checking class resource " + annotation.name()+" of "+clazz.getName(), exc);
                }
            }
            // Process fields with @Resource
            // see org.apache.catalina.core.DefaultInstanceManager
//            Field[] fields = Introspection.getDeclaredFields(managedBean.getClass());
            Field[] fields = managedBean.getClass().getDeclaredFields();
            for (Field field : fields)
            {
                if (field.isAnnotationPresent(Resource.class))
                {
                    Resource annotation = field.getAnnotation(Resource.class);
                    String name = annotation.name();
                    logger.log(Level.CONFIG, "injecting @Resource(name=\"{2}\") into {0}.{1}", new Object[]
                        {
                            managedBean.getClass().getName(), field.getName(), name
                        });
                    try
                    {
                        Context ctx = new InitialContext();
                        Object resource;
                        if (name != null && name.length() > 0)
                        {
                            resource = ctx.lookup("java:comp/env/" + name);
                        }
                        else
                        {
                            resource = ctx.lookup(clazz.getName() + "/" + field.getName());
                        }
                        // field may be private
                        boolean accessibility = field.isAccessible();
                        try
                        {
                            field.setAccessible(true);
                            field.set(managedBean, resource);
                        }
                        finally
                        {
                            field.setAccessible(accessibility);
                        }
                    }
                    catch (NamingException | IllegalAccessException exc)
                    {
                        throw new InjectionProviderException("injecting resource " + annotation.name()+" into "+clazz.getName()+"."+field.getName(), exc);
                    }
                }
            }
            // Process methods with @Resource
            for (Method method : clazz.getDeclaredMethods())
            {
                if (method.isAnnotationPresent(Resource.class)
                && method.getName().startsWith("set")
                && method.getName().length() > 3
                && method.getReturnType() == void.class
                && method.getParameterTypes().length == 1)
                {
                    // It's a setter with @Resource
                    Resource annotation = method.getAnnotation(Resource.class);
                    String name = annotation.name();
                    logger.log(Level.CONFIG, "injecting @Resource(name=\"{2}\") via {0}.{1}", new Object[]
                        {
                            managedBean.getClass().getName(), method.getName(), name
                        });
                    try
                    {
                        Context ctx = new InitialContext();
                        Object resource;
                        if (name != null && name.length() > 0)
                        {
                            resource = ctx.lookup("java:comp/env/" + name);
                        }
                        else
                        {
                            name = method.getName().substring(3);
                            name = name.substring(0,1).toLowerCase()+name.substring(1);
                            resource = ctx.lookup(clazz.getName() + "/" + name);
                        }
                        // method may be private
                        boolean accessibility = method.isAccessible();
                        try
                        {
                            method.setAccessible(true);
                            method.invoke(managedBean, resource);
                        }
                        finally
                        {
                            method.setAccessible(accessibility);
                        }
                    }
                    catch (NamingException | IllegalAccessException | InvocationTargetException exc)
                    {
                        throw new InjectionProviderException("injecting resource " + annotation.name()+" via "+clazz.getName()+"."+method.getName(), exc);
                    }
                }
            }
        } while ((clazz = clazz.getSuperclass()) != Object.class);
    }

    @Override
    public void invokePostConstruct(Object managedBean) throws InjectionProviderException
    {
        logger.log(Level.CONFIG, "managedBean={0}", new Object[]{managedBean});
        delegate.invokePostConstruct(managedBean);
    }

    @Override
    public void invokePreDestroy(Object managedBean) throws InjectionProviderException
    {
        logger.log(Level.CONFIG, "managedBean={0}", new Object[]{managedBean});
        delegate.invokePreDestroy(managedBean);
    }
} 
```

E&OE

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-06-28T20:42:57.140

另一种可能性，但我认为不太可能；您是`metadata-complete="true"`在 web.xml 还是 web-fragment.xml 文件中使用。

已定义的 metadata-complete：metadata-complete 属性定义此模块的此部署描述符和其他相关部署描述符（例如，Web 服务描述符）是否完整，或者是否应检查此模块可用并与此应用程序一起打包的类文件用于指定部署信息的注释。如果 metadata-complete 设置为“true”，则部署工具必须忽略任何指定部署信息的注释，这些注释可能存在于应用程序的类文件中。如果未指定 metadata-complete 或设置为“false”，则部署工具必须检查应用程序的类文件中的注释，如规范所指定的。

示例 web.xml：

```
<?xml version="1.0" encoding="UTF-8"?>
<web-app metadata-complete="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns="http://java.sun.com/xml/ns/javaee" xmlns:web="http://java.sun.com/xml/ns/javaee/web-app_2_5.xsd" xsi:schemaLocation="http://java.sun.com/xml/ns/javaee http://java.sun.com/xml/ns/javaee/web-app_3_0.xsd" id="WebApp_ID" version="3.0">
  <display-name>ResourceTest</display-name>
  <welcome-file-list>
    <welcome-file>index.html</welcome-file>
    <welcome-file>index.htm</welcome-file>
    <welcome-file>index.jsp</welcome-file>
    <welcome-file>default.html</welcome-file>
    <welcome-file>default.htm</welcome-file>
    <welcome-file>default.jsp</welcome-file>
 </welcome-file-list>
</web-app> 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2013-06-27T16:50:33.040

抱歉，由于代表，我无法发表评论，否则我会要求对您看到的错误/等进行更多说明。话虽如此，我已经使用 java 完整版“1.6.0_51-b11-457”对 Tomcat 7.0.27 和 Tomcat 7.0.41 进行了测试，并且能够使用 @Resource。

上下文.xml

```
<?xml version="1.0" encoding="UTF-8"?>
<Context>
  <Resource name="jdbc/Sample" auth="Container"
      type="javax.sql.DataSource" username="nbuser" password="nbuser"
      driverClassName="org.apache.derby.jdbc.ClientDriver" 
      url="jdbc:derby://localhost/Sample"
      maxActive="8" maxIdle="4"/>
</Context> 
```

资源测试.java

```
import java.io.IOException;
import java.io.PrintWriter;
import java.sql.Connection;
import java.sql.ResultSet;
import java.sql.Statement;

import javax.annotation.Resource;
import javax.servlet.ServletException;
import javax.servlet.annotation.WebServlet;
import javax.servlet.http.HttpServlet;
import javax.servlet.http.HttpServletRequest;
import javax.servlet.http.HttpServletResponse;
import javax.sql.DataSource;

@WebServlet("/ResourceTest")
public class ResourceTest extends HttpServlet {
  private static final long serialVersionUID = 1L;
  @Resource(name="jdbc/Sample")
  private DataSource ds;

public ResourceTest() {
    // TODO Auto-generated constructor stub
}

protected void doGet(HttpServletRequest request,
        HttpServletResponse response) throws ServletException, IOException {
    // TODO Auto-generated method stub
    PrintWriter out = response.getWriter();
    out.println("<body>");

    try {
        //Context initCtx = new InitialContext();
        //Context envCtx = (Context) initCtx.lookup("java:comp/env");
        //DataSource ds = (DataSource) envCtx.lookup("jdbc/Sample");
        Connection conn = ds.getConnection();
        Statement s = conn.createStatement();
        s.execute("Select * From \"NBUSER\".\"Friends\"");
        ResultSet rs = s.getResultSet();
        while (rs.next()) {
            out.println(rs.getString("NAME") + " is my friend.");
        }
        conn.close();
    } catch (Exception ex) {
        ex.printStackTrace();
    }

    out.println("</body>");

}

/**
 * @see HttpServlet#doPost(HttpServletRequest request, HttpServletResponse
 *      response)
 */
protected void doPost(HttpServletRequest request,
        HttpServletResponse response) throws ServletException, IOException {
    // TODO Auto-generated method stub
}

} 
```

# ruby - Selenium Webdriver 中的 ScriptError 救援？

> ID：10814558
> 
> 赞同：2
> 
> 时间：2012-05-30T10:34:56.270
> 
> 标签：ruby, selenium, selenium-webdriver

我在 Selenium Web 驱动程序中编写了一个代码来测试我网站的“联系我们”页面的健康状况。

代码工作正常。我的进一步目标是：

1.  使用 Rescue（在此脚本失败时获取错误消息。特别是在函数 >“def test_contact_us_screen_shot”中执行期间未找到某些元素时）。

代码供参考。

```
require 'rubygems'
require "selenium-webdriver"
require "test/unit"

class ContactUsScreenShot < Test::Unit::TestCase

  def setup
    @driver = Selenium::WebDriver.for :firefox
    @base_url = "http://www.mycompany.com"
    @driver.manage.timeouts.implicit_wait = 30
    @verification_errors = []
  end

  def teardown
    @driver.quit
    assert_equal [], @verification_errors
  end

  def test_contact_us_screen_shot
    @driver.get(@base_url + "/contact_us")
    #This method will take screenshot and  save it in the same folder from where script is executed.
    @driver.save_screenshot("./screen1.png")
    puts "screen shot taken"
    assert_equal "mycompany.com - Discuss your requirements to Outsource Software Product Development, Offshore Software Testing,", @driver.title
    @driver.find_element(:id, "compan").clear
    @driver.find_element(:id, "company").send_keys "My Company"
    @driver.find_element(:id, "first_name").clear
    @driver.find_element(:id, "first_name").send_keys "Mrityunjay"
    @driver.find_element(:id, "last_name").clear
    @driver.find_element(:id, "last_name").send_keys "Chauhan"
    @driver.find_element(:id, "email").clear
    @driver.find_element(:id, "email").send_keys "mrityunjay@gmail.com"
    @driver.find_element(:id, "phone1").clear
    @driver.find_element(:id, "phone1").send_keys "9999999999"
    @driver.find_element(:id, "addr1").clear
    @driver.find_element(:id, "addr1").send_keys "306 Office Address"
    @driver.find_element(:id, "addr2").clear
    @driver.find_element(:id, "addr2").send_keys "Office Address"
    @driver.find_element(:id, "city").clear
    @driver.find_element(:id, "city").send_keys "Dehradun"
    @driver.find_element(:id, "state").clear
    @driver.find_element(:id, "state").send_keys "UK"
    Selenium::WebDriver::Support::Select.new(@driver.find_element(:id, "country")).select_by(:text, "India")
    @driver.find_element(:id, "zip").clear
    @driver.find_element(:id, "zip").send_keys "248001"
    @driver.find_element(:id, "website").clear
    @driver.find_element(:id, "website").send_keys "http://www.mycompany.com"
    @driver.find_element(:id, "comments").clear
    @driver.find_element(:id, "comments").send_keys "This is the Testing Script for Contact Us page. Please Ignore.\nThanks,\nMrityunjay Chauhan"
    @driver.find_element(:name, "submit").click
    assert_equal "mycompany.com - Discuss your requirements to Outsource Software Product Development, Offshore Software Testing,", @driver.title
    begin
      rescue Exception => e
      puts e.message
      @driver.save_screenshot("./error1.png")
  end
  puts "I am Here"
    end

   def element_present?(how, what)
    @driver.find_element(how, what)
    true
  rescue Selenium::WebDriver::Error::NoSuchElementError
    false
  end

  def verify(&blk)
    yield
  rescue Test::Unit::AssertionFailedError => ex
    @verification_errors << ex
  end
end 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-31T20:27:35.767

[这是一个答案](https://stackoverflow.com/questions/9527702/webdriver-kicks-the-bucket-on-find-element)——只需使用“find_elements”代替它给出一个空数组而不是抛出异常。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-30T14:53:12.897

你的意思是这样的吗

```
begin
    @driver.find_element(:name, "submit") 
rescue
    @driver.save_screenshot("Submit_button_not_present.png")
    assert_match "true","false","Your error message"
end 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-06-04T11:03:12.470

以下救援代码在我的代码中运行良好......

```
rescue Exception => e
        puts e.message
        puts "Element Not Found"
        @driver.save_screenshot("./Test-Results/Contact_Us_Error.png")
        puts "I am Here"
    end #rescue 
```

在救援中，我们可以使用 Log 来跟踪错误。为此，我们必须生成日志文件。代码如下：

首先在代码开头将 log 定义为：

```
# Here I have created a log file in my "Test-Result" folder
$log = Logger.new('./Test-Results/logfile.log') 
```

接下来，我们将使用下面给出的代码将错误消息移动到我们的日志文件中：

```
rescue Exception => e
            $log.error "This is the Error occurred when Element/s not found: #{e}"
            @driver.save_screenshot("./Test-Results/Contact_Us_Error.png")
            puts "I am Here"
        end #rescue 
```

日志将是这样的：E，[2012-06-04T16:03:44.546875 #796] 错误 - ：找不到元素时出错！：无法找到元素：{“method”：“id”，“selector ":"公司"}

# http-headers - 为什么？输出缓存自动禁用 IIS 7.5 中的浏览器缓存

> ID：10814564
> 
> 赞同：5
> 
> 时间：2012-05-30T10:35:30.337
> 
> 标签：http-headers, iis-7.5

在 IIS 7.5 中，当我没有启用输出缓存时，我的 php 脚本成功地在 Cache-Control 标头中设置了浏览器缓存：

Cache-Control: max-age=43200,public
Content-Type: text/html
Expires: Wed, 30 May 2012 22:15:18 GMT
服务器: Microsoft-IIS/7.5
X-Powered-By: PHP/5.4.3
日期：星期三，2012 年 5 月 30 日 10:15:18 GMT
连接：关闭
内容长度：5105

但是，如果我为 .php 文件启用输出缓存，我会得到以下标头：

Cache-Control: no-cache,max-age=43200,public
Content-Type: text/html
Expires: Wed, 30 May 2012 22:25:34 GMT
服务器: Microsoft-IIS/7.5
X-Powered-By: PHP/ 5.4.3
日期：2012 年 5 月 30 日，星期三 10:25:34 GMT
连接：关闭

（注意“no-cache”在我的 php 脚本工作之前被添加到 Cache-Control 中）

我发现，如果为文件类型启用了输出缓存，则无法防止将“无缓存”添加到 Cache-Control 键中。我试图在 web.config 文件中做到这一点：

```
 <customHeaders>
            <remove name="X-Powered-By" />
    <remove name="Cache-Control" />
            <add name="Cache-Control" value="public" />
        </customHeaders> 
```

那是行不通的。为什么这必须如此相互排斥？我想同时启用输出缓存和浏览器缓存。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-05-30T22:03:18.177

不幸的是，IIS 管理器界面不允许您使用输出缓存模块支持的所有功能。这些功能之一是设置间接控制缓存控制标头的缓存位置。您必须手动编辑您的 web.config 才能更改它。语法如下：

```
<caching>
    <profiles>
        <add extension=".php" ..... location="Any" />
    </profiles>
</caching> 
```

该`<add />`标签将有更多选项，具体取决于您希望缓存如何工作。重要的部分是添加`location="..."`属性。支持以下值，它们控制缓存控制标头，如下所示：

`Any`或`Downstream`=`public`

`ServerAndClient`或`Client`=`private`

`None`或`Server`或 空 =`no-cache`

由于默认情况下该`location`属性不存在，因此 IIS 默认会`Cache-Control: no-cache`在启用输出缓存时发送标头。有关输出缓存和支持的功能的更多信息，请参见：[IIS7 中的响应缓存](http://blogs.iis.net/ksingla/archive/2006/11/16/caching-in-iis7.aspx)

# php - UTF-8 html5 网页编码

> ID：10814573
> 
> 赞同：1
> 
> 时间：2012-05-30T10:36:17.027
> 
> 标签：php, apache, html, utf-8, character-encoding

我正在尝试总体上掌握 UTF-8 和字符集编码，但这很棘手

这段代码：

```
<?php
header('Content-type: text/html; charset=utf-8');
?>
<!doctype html>
<html lang="da">
<head>
<title>UTF-8 test</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
</head>
<body>
<div>
<p>UTF-8 æøå tést Señor!</p>
</div>
</body>
</html> 
```

输出：

```
UTF-8 ��� t�st Se�or! 
```

本地服务器和多个公共站点（所有 Apache）上的结果相同 我需要更改 php 中的某些内容吗？还是阿帕奇？还是我的文本编辑器？（记事本++）

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-30T10:38:23.567

您的文本编辑器未保存为 UTF-8。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-30T10:40:54.550

我认为您应该更改记事本++的字符编码，您可以在“编码”菜单下进行更改。

你可以检查你的状态栏的右上角你的文件的编码。

# javascript - 如何从 javascript 调用 url 并从 url 获取到 javascript 的响应？

> ID：10814576
> 
> 赞同：2
> 
> 时间：2012-05-30T10:36:24.397
> 
> 标签：javascript, ajax, html

我想用一个参数从 javascript 调用 url，然后 url 必须给出该特定请求的响应。

响应实际上是这样的：

```
{"success":true,
 "result":  {"token":"4fc5ef2bd77a3","serverTime":1338371883,"expireTime":1338372183}
} 
```

如果我直接在浏览器中尝试这个 url，我可以很容易地得到相同的响应。但是通过 javascript 它不起作用。

我已经发布了我的示例代码用于测试目的，但没有回应。

所以请帮助我如何打电话和得到回复？

提前致谢。

```
<html>
    <head>
        <script type="text/javascript">
            function getResponse()
            {
                var uname=document.testform.uname.value;

                $.ajax({
                type: 'POST',
                url: 'http://192.168.2.113/crm/webservice.php?operation=getchallenge&username='+uname,
                data: {},
                dataType: 'json',
                success: function(data) 
                { alert('got here with data'); },
                error: function() { alert('something bad happened'); }
                });

            }
        </script>
        <title>Test</title>
    </head>
    <body>
        <form name="testform" method="post">
            <div id="main" border="5" style="width:100%; height:100%;">
                <div id="sub" style="width:50%; height:50%;align:center;">
                    Username:<input type="text" name="uname">
                    <input type="button" name="ok" value="submit" onclick="getResponse();">
                </div>
            </div>
        </form>
    </body>
</html> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-30T10:50:32.963

gdoron 说您忘记在代码中包含 jQuery 的原因之一。但主要是您使用的是跨域名的ajax，这是问题所在。如果您在浏览器中键入 url，它将正常工作，因为它将直接从浏览器请求站点。但是你不能像这样使用 ajax 跨域发送请求。

如果您想从不同的网站获取数据，我建议您查看 JSONP 或 ajax 跨域。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-30T19:49:30.030

这可能会帮助您：

```
<html>
<head>
    <script src="http://code.jquery.com/jquery-latest.js"></script>

</head>
<body>

<div id="div1" hidden="true"> </div>

<button>Get External Content</button>

<script>
    $("#div1").load('http://192.168.2.113/crm/webservice.php?operation=getchallenge&username='+uname);

    $(document).ready(function(){
        $("button").click(function(){
            var t=$("#div1").text();
            alert(t);

        });
    });

</script>
</body>
</html> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-30T10:38:36.203

您没有包含 jQuery 库...

将此添加到顶部`<head>`：

```
<script src="http://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js"></script> 
```

如果您检查控制台是否有错误，您将看到`$`未定义的错误。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-30T10:44:44.387

`data`您传递给函数的参数`success`包含您的响应，并且当您返回 JSON 时，很容易访问任何部分。

```
// (inside your ajax call)
success: function(data) {
    alert(data.result.token);
    alert(data.result.serverTime);
    alert(data.result.expireTime);
}, 
```

# c - 开关盒在 C 中无法正常工作

> ID：10814580
> 
> 赞同：2
> 
> 时间：2012-05-30T10:36:33.037
> 
> 标签：c

在我的程序中有一个小问题。

当我按 2 或 3 或 4 时，它会正确显示，但之后当我按 a 或 b 或 c 等时，它将显示前一个结果，而不是打印无效选项。

我怎样才能解决这个问题？

```
 #include <stdio.h>
    #include <string.h>

    typedef struct vehicle
    {
    char name[100];
    char lice_no[25];
    int vehicle_type;
    char cmpny_name[100];
    int menu_year;
     }record;

    int main(void)
    {
    int i,choice;
    FILE *fp1,*fp2;
    char oname[100];
    record det,det1;
    int recsize;
    char c;

    fp1 = fopen("record.dat" , "r+");
    if(fp1 == NULL)
    {
        fp1 = fopen("record.dat" , "w+");
        if(fp1 == NULL)
        {
            printf("error in opening file : \n");
            return -1;
        }
    }
    recsize = sizeof(det);

    do
    {
        printf("\t\"enter the choice\"\n");

        printf("1 : adding the record\n");
        printf("2 : delete the record\n");
        printf("3 : editing the record\n");
        printf("4 : display the record\n");
        printf("5 : exit the program\n");

        fflush(stdin);
        scanf("%d" , &choice);
        scanf("%c" , &c);

        switch(choice)
        {
            case 1 :
            {
                    printf("In this add logic\n")
                break;
            }
            case 2 :
            {
                printf("In this case delete logic\n");
                break;
            }
            case 3 :
            {
                printf("In this case edit logic\n");
                                break;
            }
            case 4 :
            {
                printf("display logic\n");
                break;
            }
            case 5 :
            {
                printf("exit logic\n");
                break;
            }
            default :
            {
                printf("\"Invalid option\"\n");
                break;
            }
        }
    }
    while(1);
    return 0;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-30T10:41:01.477

看起来您将数字放入 Choice 中，将字符放入 c 中。但是您只在开关中使用了 Choice var，您永远不会检查 C var。

所以本质上，如果你点击一个字母，它会将它存储在 C var 中，然后再次使用 Choice 中的旧值。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-30T10:45:08.730

嗯，您的代码中的错误之一是：

```
scanf("%c" , &c); 
```

因为，scanf 函数要求用户在将字符存储到其各自的变量之前按下回车键。

**因此，如果编译器读取该行：**

```
scanf("%c" , &c); 
```

它会读取您的输入，PLUS，ENTER。
因此，强制 scanf 函数将您的输入 PLUS ENTER 存储到您的字符变量中。

如果您使用 getche() 或 getch() 而不是使用 scanf() 函数会更好，并且请不要使用：

```
scanf("%c" , &c); 
```

因为它会产生错误。

* * *

**getche() 或 getch() 函数的使用示例：**

```
c=getche(); //waits for a keypress and stores it on a variable
c=getch();  //waits for a keypress and stores it on a variable 
```

两者之间的区别在于 getche() 显示您的按键，而 getch() 不显示。

* * *

注意：别忘了放

```
#include<conio.h> 
```

* * *

添加信息：如果您仍想继续使用 scanf() 函数，只需确保将您喜欢的变量声明为：

```
char c[20]; 
```

那么你可以使用：

```
scanf("%s", &c); 
```

但是您的变量最多只能容纳 19 个字符，就像我们在您的字符数组上声明的那样。

总结是不要使用：

```
scanf("%c", &c); 
```

因为，它会影响您的其他 scanf() 函数。:)

* * *

解决方案（剧透警告）：

```
#include <stdio.h>
#include <string.h>
#include <conio.h>

typedef struct vehicle
{
    char name[100];
    char lice_no[25];
    int vehicle_type;
    char cmpny_name[100];
    int menu_year;
}record;

int main(void)
{
    int i; //removed choice from int
    FILE *fp1,*fp2;
    char oname[100];
    record det,det1;
    char choice; //made the variable choice a character
    int recsize;
    char c;

fp1 = fopen("record.dat" , "r+");
if(fp1 == NULL)
{
    fp1 = fopen("record.dat" , "w+");
    if(fp1 == NULL)
    {
        printf("error in opening file : \n");
        return -1;
    }
}
recsize = sizeof(det);

do
{
    printf("\t\"enter the choice\"\n");

    printf("1 : adding the record\n");
    printf("2 : delete the record\n");
    printf("3 : editing the record\n");
    printf("4 : display the record\n");
    printf("5 : exit the program\n");

    fflush(stdin);
    choice = getche(); // or getch()

    switch(choice) //changed the target character
    {
        case '1' : //changed the case from 1 to '1'
        {
                printf("In this add logic\n");
                break;
        }
        case '2' : //changed the case from 2 to '2'
        {
            printf("In this case delete logic\n");
            break;
        }
        case '3' : //changed the case from 3 to '3'
        {
            printf("In this case edit logic\n");
                            break;
        }
        case '4' : //changed the case from 4 to '4'
        {
            printf("display logic\n");
            break;
        }
        case '5' : //changed the case from 5 to '5'
        {
            printf("exit logic\n");
            break;
        }
        default :
        {
            printf("\"Invalid option\"\n");
            break;
        }
    }
}
while(1);
return 0;
} 
```

* * *

您还可以使用 switch 来比较字符。只需更改值

```
case 1: 
```

到

```
case '1': 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-30T10:39:15.750

`scanf`返回您不检查的值。

当与`%d`说明符一起使用时 - 它应该解析一个整数。由于您输入了一个非整数值 -`scanf`返回一个错误代码，并且`choice`没有更改

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-08-07T08:28:39.237

这是因为在 c 中，当您将字符读取为整数时 (scanf("%d" , &choice);) 它需要字符的 ascii 代码，例如 a = 97, b = 98 c = 99 d = 100 如果你想将 a 读为 1 b 读为 2 等，您将不得不添加一些额外的代码来告诉程序该数字是否等于 abcd 的 ascii 代码，或者 e 用 96 减去它，这样您就得到了 1,2,3..

# image-resizing - phpThumb 图像大小调整错误

> ID：10814584
> 
> 赞同：0
> 
> 时间：2012-05-30T10:36:56.153
> 
> 标签：image-resizing, phpthumb

我已经花了一整天的时间，无法弄清楚我哪里出错了。

我正在尝试调整一些图像的大小，然后将它们写入一个文件夹，以便可以压缩和下载它们。

使用 phpThumb Demo -> phpThumb.demo.object.php 时，我可以让图像调整大小、重命名然后保存到另一个目录中。这是因为源图像、phpThumb 类和最终图像目标目录都在同一个文件夹中。

但是，我现在已经更改了目录结构，因此正在从管理子域调用 phpThumb.class.php 文件，并且需要从图像子域中获取图像，然后将其保存到图像或管理域中的目录中，所以我可以让他们稍后写入 ZIP 文件。

我只是一直在出错，无法确定从这里去哪里。任何人都可以帮忙吗？

这是php：

```
require_once('../phpThumb/phpthumb.class.php');

// create phpThumb object
$phpThumb = new phpThumb();

// create 3 sizes of thumbnail
$thumbnail_widths = array(160, 320, 1000);
$capture_raw_data = false; // set to true to insert to database rather than render to screen or file (see below)
foreach ($thumbnail_widths as $thumbnail_width) {

    // this is very important when using a single object to process multiple images
    $phpThumb->resetObject();

    // set data source -- do this first, any settings must be made AFTER this call
    $phpThumb->setSourceFilename('/home/server/domains/images.testdomain.co.uk/public_html/high-res/CM015585.jpg');

    // PLEASE NOTE:
    // You must set any relevant config settings here. The phpThumb
    // object mode does NOT pull any settings from phpThumb.config.php
    $phpThumb->setParameter('config_document_root', '/home/server/domains/images.testdomain.co.uk/public_html/');
    $phpThumb->setParameter('config_cache_directory', '/home/server/domains/images.testdomain.co.uk/public_html/phpThumb/cache/');      

    $phpThumb->setParameter('w', $thumbnail_width);

    // set options (see phpThumb.config.php)
    // here you must preface each option with "config_"
    $phpThumb->setParameter('config_output_format', 'jpg');
    $phpThumb->setParameter('config_imagemagick_path', '/usr/local/bin/convert');   

    // generate & output thumbnail
    $output_filename = 'zip_temp/_'.$thumbnail_width.'.'.$phpThumb->config_output_format;
    echo $output_filename;
    if ($phpThumb->GenerateThumbnail()) { // this line is VERY important, do not remove it!
        $output_size_x = ImageSX($phpThumb->gdimg_output);
        $output_size_y = ImageSY($phpThumb->gdimg_output);
        if ($output_filename || $capture_raw_data) {
            if ($capture_raw_data && $phpThumb->RenderOutput()) {
                // RenderOutput renders the thumbnail data to $phpThumb->outputImageData, not to a file or the browser
                //mysql_query("INSERT INTO `table` (`thumbnail`) VALUES ('".mysql_escape_string($phpThumb->outputImageData)."') WHERE (`id` = '".$id."')");
            } elseif ($phpThumb->RenderToFile($output_filename)) {
                // do something on success
                echo 'Successfully rendered:<br><img src="http://images.testdomain.co.uk/zip_temp/'.$output_filename.'">';
            } else {
                // do something with debug/error messages
                echo 'Failed (size='.$thumbnail_width.'):<pre>'.implode("\n\n", $phpThumb->debugmessages).'</pre>';
            }
            $phpThumb->purgeTempFiles();
        } else {
            $phpThumb->OutputThumbnail();
        }
    } else {
        // do something with debug/error messages
        echo 'Failed (size='.$thumbnail_width.').<br>';
        echo '<div style="background-color:#FFEEDD; font-weight: bold; padding: 10px;">'.$phpThumb->fatalerror.'</div>';
        echo '<form><textarea rows="10" cols="60" wrap="off">'.htmlentities(implode("\n* ", $phpThumb->debugmessages)).'</textarea></form><hr>';
    }

} 
```

以下是错误：

```
phpThumb() v1.7.11-201108081537 in file "phpthumb.class.php" on line 216
* phpThumb() v1.7.11-201108081537 in file "phpthumb.class.php" on line 216
* setSourceFilename(/home/server/domains/images.testdomain.co.uk/public_html/high-res/CM015585.jpg) set $this->sourceFilename to "/home/server/domains/images.testdomain.co.uk/public_html/high-res/CM015585.jpg" in file "phpthumb.class.php" on line 262
* Leaving $this->config_imagemagick_path as (/usr/local/bin/convert) because !is_execuatable(realpath($this->config_imagemagick_path)) () in file "phpthumb.class.php" on line 1162
*                   file_exists(/usr/local/bin/convert) = 0 in file "phpthumb.class.php" on line 1165
* file_exists_ignoreopenbasedir(/usr/local/bin/convert) = 0 in file "phpthumb.class.php" on line 1166
*                       is_file(/usr/local/bin/convert) = 0 in file "phpthumb.class.php" on line 1167
*                 is_executable(/usr/local/bin/convert) = 0 in file "phpthumb.class.php" on line 1168
* ImageMagickThumbnailToGD() aborting because cannot find convert in $this->config_imagemagick_path (/usr/local/bin/convert), and `which convert` returned (which: no convert in (/bin:/usr/bin)) in file "phpthumb.class.php" on line 1198
* $AvailableImageOutputFormats = array(text;ico;bmp;wbmp;gif;png;jpeg) in file "phpthumb.class.php" on line 923
* $this->thumbnailFormat set to $this->config_output_format "jpeg" in file "phpthumb.class.php" on line 934
* $this->thumbnailQuality set to "75" in file "phpthumb.class.php" on line 951
* ResolveFilenameToAbsolute() NOT prepending $this->config_document_root (/home/server/domains/images.testdomain.co.uk/public_html/) to $filename (/home/server/domains/images.testdomain.co.uk/public_html/high-res/CM015585.jpg) resulting in ($AbsoluteFilename = "/home/server/domains/images.testdomain.co.uk/public_html/high-res/CM015585.jpg") in file "phpthumb.class.php" on line 1060
* $this->sourceFilename set to "/home/server/domains/images.testdomain.co.uk/public_html/high-res/CM015585.jpg" in file "phpthumb.class.php" on line 852
* phpThumb() v1.7.11-201108081537
http://phpthumb.sourceforge.net

Error messages disabled in file "phpthumb.class.php" on line 3847
* setCacheDirectory() starting with config_cache_directory = "/home/server/domains/images.testdomain.co.uk/public_html/phpThumb/cache/" in file "phpthumb.class.php" on line 958
* setting config_cache_directory to realpath(/home/server/domains/images.testdomain.co.uk/public_html/phpThumb/cache) = "/home/server/domains/images.testdomain.co.uk/public_html/phpThumb/cache" in file "phpthumb.class.php" on line 986
* $this->config_cache_directory is not writable (/home/server/domains/images.testdomain.co.uk/public_html/phpThumb/cache) in file "phpthumb.class.php" on line 997
* SetCacheFilename() _src set from md5($this->sourceFilename) "/home/server/domains/images.testdomain.co.uk/public_html/high-res/CM015585.jpg" = "688d3d8dc707794f27b6ef6db51ee9a2" in file "phpthumb.class.php" on line 3240
* SetCacheFilename() _par set from md5(_w160_dpi150_q75) in file "phpthumb.class.php" on line 3273
* starting ExtractEXIFgetImageSize() in file "phpthumb.class.php" on line 3035
* GetImageSize(/home/server/domains/images.testdomain.co.uk/public_html/high-res/CM015585.jpg) says image is x in file "phpthumb.class.php" on line 3045
* GetImageSize("/home/server/domains/images.testdomain.co.uk/public_html/high-res/CM015585.jpg") failed in file "phpthumb.class.php" on line 3078
* $this->useRawIMoutput=true after checking $UnAllowedParameters in file "phpthumb.class.php" on line 1315
* ImageMagickThumbnailToGD() aborting because ImageMagickCommandlineBase() failed in file "phpthumb.class.php" on line 2006
* ImageMagickThumbnailToGD() failed in file "phpthumb.class.php" on line 3085
* SetOrientationDependantWidthHeight() starting with ""x"" in file "phpthumb.class.php" on line 3014
* SetOrientationDependantWidthHeight() setting w="160", h="0" in file "phpthumb.class.php" on line 3030
* EXIF thumbnail extraction: (size=0; type=""; 0x0) in file "phpthumb.class.php" on line 3142
* starting SourceImageToGD() in file "phpthumb.class.php" on line 3400
* starting ImageCreateFromFilename(/home/server/domains/images.testdomain.co.uk/public_html/high-res/CM015585.jpg) in file "phpthumb.class.php" on line 3315
* empty $filename or GetImageSize(/home/server/domains/images.testdomain.co.uk/public_html/high-res/CM015585.jpg) failed in file "phpthumb.class.php" on line 3364
* Populating $rawimagedata in file "phpthumb.class.php" on line 3372
* cannot fopen(/home/server/domains/images.testdomain.co.uk/public_html/high-res/CM015585.jpg) in file "phpthumb.class.php" on line 3383
* Not using EXIF thumbnail data because $this->exif_thumbnail_data is empty in file "phpthumb.class.php" on line 3471
* $this->gdimg_source is still empty in file "phpthumb.class.php" on line 3523
* ImageMagickThumbnailToGD() failed in file "phpthumb.class.php" on line 3525
* phpThumb() v1.7.11-201108081537
http://phpthumb.sourceforge.net

Error messages disabled in file "phpthumb.class.php" on line 3847
* SourceImageToGD() failed in file "phpthumb.class.php" on line 342 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-27T10:04:21.670

打开文件 phpthumb/phpthumb.class.php 并更改第 141 行：

```
var $config_disable_debug = true; 
```

至

```
var $config_disable_debug = false; 
```

重新访问原始页面，这次应该会出现实际的错误消息

# jquery - jQuery 图像调整大小适用于 Chrome 和 Safari，但不适用于 Firefox 12

> ID：10814588
> 
> 赞同：0
> 
> 时间：2012-05-30T10:37:21.353
> 
> 标签：jquery, css, firefox, media-queries, image-resizing

我正在使用 jQuery 和媒体查询来调整我的图像大小，它在 Chrome 和 Safari 中运行良好，但 Firefox 似乎无法识别高度值，并且根本没有调整图像大小，只是裁剪它。我试着用萤火虫四处寻找，但我不确定是 CSS 还是 jQuery 才是问题所在。

该站点具有响应式水平滚动布局。最初，我根据每个媒体查询中的设置宽度和自动高度调整图像大小。这要求所有图像具有相同的宽度并在某些情况下被裁剪，因此我将其更改为设定的高度以允许按比例调整大小。

Chrome 截图： http: [//lizbmorrison.net/chrome.png](http://lizbmorrison.net/chrome.png)

火狐截图： http: [//lizbmorrison.net/firefox.png](http://lizbmorrison.net/firefox.png)

我发现这篇文章：[works in chrome but not firefox - jquery](https://stackoverflow.com/questions/5941244/works-in-chrome-but-not-firefox-jquery)但我不确定它是否适用于我的情况。

HTML/PHP：

```
<div id="page-wrap"> 
...
<?php }
        foreach ( $attachments as $attachment ) { ?>
            <td>
            <div class="preview">
                <div class="post_image">
                    <a href="<?php echo wp_get_attachment_url( $attachment->ID, 'large' ); ?>" class="fancybox"  title="<?php echo $attachment->post_title; ?>">
                    <ul id="overlay">
                        <li><span>
                            <?php echo wp_get_attachment_image( $attachment->ID, 'postfull' ); ?>
                        </span></li>
                    </ul></a>
                </div>
            </div>
            </td>
    <?php } ?>
</div> 
```

CSS：

```
#page-wrap {
   position: relative;
   float: left;
   padding-top: 190px;
   padding-left: 30px;
   z-index: 1;
   overflow: visible;
}
table, tr, td {
   margin: 0;
   padding: 0;
   border: 0;
   top: 0;
   left: 0;
}
table tr { 
   vertical-align: top; 
}
.preview {
   margin-right: 20px;
}
.post_image { 
   margin: 0;
   padding: 0;
   position: relative;
   float: left;
   display: inline;
}
.post_image img {
   width: auto;
   height: 100%;
   background-color: #000;
}
#overlay {
   position: relative;
   overflow: hidden;
   text-align: center;
}
/* 768px to 900px */
@media screen and (max-height: 910px) { .post_image { height: 480px; } }
/* 900px to 1050px */
@media screen and (min-height: 911px) and (max-height: 940px) { .post_image { height: 630px; } }
/* 1050px and above */
@media screen and (min-height: 941px) { .post_image { height: 660px; } } 
```

jQuery：

```
$(document).ready(function() {
// Image overlay
$('#overlay span').bind('mouseover', function(){
    $(this).parent('li').css({position:'relative'});
    var img = $(this).children('img');
    $('<div />').text(' ').css({
        'height': img.height(),
        'width': img.width(),
        'background-color': 'black',
        'position': 'absolute',
        'top': 0,
        'left': 0,
        'opacity': 0.4
    }).addClass("over").prepend('<div id="overlay"><div class="overlay_arrow">&#x25B6;</div></div>').bind('mouseout', function(){
        $(this).remove();
    }).insertAfter(this);
});
});

$(window).load(function() {
// Image width
$('.post_image').each(function() { 
    'use strict';
    var newW = ((($(this).find('img').width()) / ($(this).find('img').height())) * $(this).height()) + 'px';
    $(this).css('width', newW);
});
});

$(window).resize(function() {
// Image width
$('.post_image').each(function() { 
    'use strict';
    var newW = ((($(this).find('img').width()) / ($(this).find('img').height())) * $(this).height()) + 'px';
    $(this).css('width', newW);
});
}); 
```

我最近才开始编写自己的 JS，因此请随时指出是否有更好的方法。感谢您花时间看这个！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-04T10:32:10.660

只需要添加`max-width`并`max-height`确保安全：

```
$(window).load(function() {
// Image widths
$('.post_image').each(function() { 
    'use strict';
    var newW = ((($(this).find('img').width()) / ($(this).find('img').height())) * $(this).height()) + 'px';
    var newH = $(this).height() + 'px';
    $(this).css('width', newW);
    $(this).find('img').css('max-width', newW).css('max-height', newH);
});
});

$(window).resize(function() {
// Image widths
$('.post_image').each(function() { 
    'use strict';
    var newW = ((($(this).find('img').width()) / ($(this).find('img').height())) * $(this).height()) + 'px';
    var newH = $(this).height() + 'px';
    $(this).css('width', newW);
    $(this).find('img').css('max-width', newW).css('max-height', newH);
});
}); 
```

# javascript - KDE plasmoid ind 自动刷新

> ID：10814589
> 
> 赞同：0
> 
> 时间：2012-05-30T10:37:24.023
> 
> 标签：javascript, kde, plasmoid

我正在尝试用 JavaScript 编写 KDE4 plasmoid，但没有成功。因此，我需要通过 HTTP 获取一些数据并将其显示在 Label 中。这很好，但我需要定期刷新（每 10 秒一次），它不起作用。

我的代码：

```
inLabel = new Label();
var timer= new QTimer();
var job=0;
var fileContent="";

function onData(job, data){
   if(data.length > 0){
      var content = new String(data.valueOf());
      fileContent += content;
   }
}

function onFinished(job) {
  inLabel.text=fileContent;
}

plasmoid.sizeChanged=function()
{
    plasmoid.update();
}

timer.timeout.connect(getData);
timer.singleShot=false;
getData();
timer.start(10000);

function getData()
{
    fileContent="";
    job = plasmoid.getUrl("http://192.168.0.10/script.cgi");
    job.data.connect(onData);
    job.finished.connect(onFinished);
    plasmoid.update();
} 
```

它获取一次脚本，并且在 10 秒后不刷新它。我的错误在哪里？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-30T11:51:31.373

它至少在这里工作得很好（从 gi​​t master 运行最近的构建），getData() 正在按预期调用。您能在控制台中看到任何错误吗？

编辑：问题是 getUrl() 为 KIO::get() 显式设置 NoReload ，这导致它从缓存加载数据，而不是强制从服务器重新加载。解决方案是向 URL 添加一个查询参数，以使其强制重新加载。

# c++ - cvCalcOpticalFlowPyrLK 输入图像大小

> ID：10814591
> 
> 赞同：0
> 
> 时间：2012-05-30T10:37:27.953
> 
> 标签：c++, opencv, opticalflow

使用 时`cvCalcOpticalFlowPyrLK`，对于某些输入图像大小，生成的金字塔似乎是错误的。我在文档中找不到任何关于良好输入图像大小的参考。尽管如此，它还是找到了要点。有谁知道这是怎么发生的以及如何解决这个问题？

```
#include <opencv/highgui.h>
#include <opencv/cv.h>
#include <iostream>

#define SHOW_IMAGE(image) { \
  cvNamedWindow(#image, CV_WINDOW_AUTOSIZE); \
  cvShowImage(#image, image); \
}

const CvScalar COLOR_GREEN = { { 0.0, 255.0, 0.0, 255.0 } };
const CvScalar COLOR_RED = { { 255.0, 0.0, 0.0, 255.0 } };

void drawPoint(IplImage* image, const float x, const float y, const CvScalar& color) {
  cvCircle(image, cvPoint(x, y), 3, color, -1, 8);
}

void drawPoints(IplImage* image, const CvPoint2D32f* points, const char* status, int count) {
  for (int i = 0; i != count; ++i) {
    if (status[i] == 1) {
      drawPoint(image, points[i].x, points[i].y, COLOR_GREEN);
    } else {
      drawPoint(image, points[i].x, points[i].y, COLOR_RED);
    }
  }
}

using namespace std;

int main( int argc, char** argv ) {
  /* load samples */
  IplImage* src0 = cvLoadImage( "test0.png" );
  IplImage* src1 = cvLoadImage( "test1.png" );
  CvSize size = cvSize(src0->width, src0->height);
  /* allocate grey images and convert to grey */
  IplImage* prev = cvCreateImage(size, 8, 1);
  cvCvtColor(src0, prev, CV_RGB2GRAY);
  IplImage* curr = cvCreateImage(size, 8, 1);
  cvCvtColor(src1, curr, CV_RGB2GRAY);
  /* allocate pyramids */
  IplImage* prevPyr = cvCreateImage(size, 8, 1);
  IplImage* currPyr = cvCreateImage(size, 8, 1);
  /* set previous features */
  const CvPoint2D32f prevFeatures[] = {{133, 133}, {364, 133}, {364, 322}, {133, 322}};
  /* allocate current features */
  CvPoint2D32f currFeatures[] = {{0, 0}, {0, 0}, {0, 0}, {0, 0}};
  int count = 4;
  CvSize winSize = cvSize(20, 20);
  int level = 3;
  char status[4];
  CvTermCriteria criteria = cvTermCriteria(CV_TERMCRIT_ITER | CV_TERMCRIT_EPS, 20, 0.03);
  int flags = 0;
  cvCalcOpticalFlowPyrLK(
    /* previous image    */prev
    /* current image     */, curr
    /* previous pyramid  */, prevPyr
    /* current pyramid   */, currPyr
    /* previous features */, prevFeatures
    /* current features  */, currFeatures
    /* features count    */, count
    /* win_size          */, winSize
    /* level             */, level
    /* status            */, status
    /* track error       */, 0
    /* criteria          */, criteria
    /* flags             */, flags);
  drawPoints(src0, prevFeatures, status, count);
  drawPoints(src1, currFeatures, status, count);
  SHOW_IMAGE(src0);
  SHOW_IMAGE(src1);
  SHOW_IMAGE(currPyr);
  SHOW_IMAGE(prevPyr);
  /* wait any key */
  while (cvWaitKey(1) == -1);
  return 0;
} 
```

（如果使用 gcc，您可以使用 编译和运行它`g++ pyr.cpp -o pyr -lcv -lcvaux && ./pyr`）

**带有 640x480 图像的屏幕截图** ![带有 640x480 图像的屏幕截图](../Images/daa23bacd7b7c8f5aa1a02a608c95a43.png)

**带有 631x480 图像的屏幕截图** ![631x480 截图](../Images/23a337edcaf55a1154ef6a7ba6640506.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-16T21:16:00.723

似乎分配的内存存在对齐错误。IplImage 对齐到 4 个字节。也许金字塔初始化不足，请参阅文档（ (image_width+8)*image_height/3 字节的总大小就足够了）。

# bash - UNIX 中的列操作

> ID：10814596
> 
> 赞同：1
> 
> 时间：2012-05-30T10:37:44.053
> 
> 标签：bash, unix, filter, ksh

我有两个这样的字段

Field1 : Field2 - 我将它们存储在这样的文件中：

```
X : 1234
X : 4321
Y : 123
Z : 1234
Z : 4321
Z : 357 
```

我想把它变成这样：

```
X : 1234
    4321
Y : 123
Z : 1234 
    4321
    357 
```

对于给定的 field1，field2 将不同，即 X 不能有 1234 和 1234，但两个不同的 field1 可以有相同的 field2，例如 X 和 Z 有 1234 和 4321。

如何使用 BASH/KSH 过滤我的输入文件以获取所需的输出文件？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-30T10:49:51.230

```
awk -F' *: *' '{if(x!=$1)x=$1;else $1="   "}1' input.txt 
```

### 输出：

```
X : 1234
    4321
Y : 123
Z : 1234
    4321
    357 
```

# asp.net - Ajax 日历控制工具包样式表

> ID：10814597
> 
> 赞同：0
> 
> 时间：2012-05-30T10:37:49.293
> 
> 标签：asp.net, vb.net, ajaxcontroltoolkit

![在此处输入图像描述](../Images/4822028618fcafa9e330fc6b01bb4e8d.png)

```
 <style>
                .ajax__calendar .ajax__calendar_invalid .ajax__calendar_day
                 {
                  background-color:gray;
                  color:White;
                  text-decoration:none;
                  cursor:default;
                  } 
```

我应用了样式，它不起作用，我想更改禁用日期的样式，，，

因此，如果有人有任何提示，请帮助我。

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-30T10:52:44.633

如果您正在谈论的日期不在当月，则显示为不同的样式，那么您可以使用类更改样式；

```
.ajax__calendar .ajax__calendar_other .ajax__calendar_day{
    background-color: #fff; border-color: #fff; color: #646464;
} 
```

如果这不是您想要的，那么这里是样式的完整列表：

[Ajax 控件工具包日历样式](http://www.asp.net/ajaxLibrary/ACTCodeSamples/WebResource.axd?d=RVYtgrUS9cWE07tuJoB1a2eK5rdm4QdvqH76lAsXbGDzm-srFYap5c02FaOGgIb4OMZzeXRKKAnzMHyv1mB3CRqD_RsNXCgC1J_wL7K2-UEsUTkdhgbI_XabkflOuEU1j9iBj5puFjwiFB805a03qA2&t=634085729415898654)

# javascript - 创建一个动态 html 文件并在谷歌应用脚 本中执行它

> ID：10814598
> 
> 赞同：1
> 
> 时间：2012-05-30T10:37:52.707
> 
> 标签：javascript, excel, google-apps-script, vba

我正在尝试将各种 Excel 应用程序迁移到 Google Apps。它们根据各种excel数据和参数生成html和javaScript，以创建一个本地html文件，然后由浏览器打开。

我知道这是一个很长的镜头，但是任何人都可以想出一种在 Google Apps 脚本中模仿这种行为的方法吗？即 - 在客户端上创建一个文件并在浏览器会话中获取它。

[这是我的意思的应用程序类型的示例](http://ramblings.mcpher.com/Home/excelquirks/d3/sankey)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-31T15:11:29.520

您可以使用[DocsListApp.createFile](https://developers.google.com/apps-script/class_docslist#createFile)在用户的 Google Drive 上创建新的 HTML 文件，但我不相信您可以直接从 Drive 提供 HTML。或者，您可以使用 SitesApp 在 Google 站点上使用您想要的 HTML 创建一个新页面，使用[Site.addWebPage](https://developers.google.com/apps-script/class_site#createWebPage)。最后，您可能想要查看 UiApp 或 UI Builder 中可用的小部件，看看您是否可以使用这些小部件来代替自定义 HTML。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-08T06:22:00.910

刚看到这个：

[https://googledrive.com/host/0B716ywBKT84AMXBENXlnYmJISlE/GoogleDriveHosting.html](https://googledrive.com/host/0B716ywBKT84AMXBENXlnYmJISlE/GoogleDriveHosting.html)

上传到公共 Google Drive 文件夹的 HTML 文件以 HTML 格式提供，链接可通过“预览”按钮获得。

到目前为止，它不适用于仅移动到该文件夹​​的 Google Drive 文件，但可能适用于通过 createFile 脚本在那里创建的文件。

# character-encoding - 字符 #\u009C 无法在字符集 CHARSET:CP1252 中表示 - 如何修复它

> ID：10814605
> 
> 赞同：0
> 
> 时间：2012-05-30T10:38:17.010
> 
> 标签：character-encoding, common-lisp

正如主题中已经指出的那样，我收到以下错误：

```
Character #\u009C cannot be represented in the character set CHARSET:CP1252 
```

试图打印出由返回的字符串`drakma:http-request`，据我了解错误代码，问题是 Windows 编码（CP1252）不支持此字符。因此，为了能够处理它，我可能/必须转换整个字符串。

我的问题是**什么包/库支持有效地将字符串转换为某些字符集？**

一个类似的问题是[this one](https://stackoverflow.com/questions/6143418/exception-handling-for-common-lisp-package-enumeration)，但在我的情况下忽略错误无济于事。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-31T08:55:59.113

Drakma 已经完成了“转换字符串”的工作：毕竟，当它从一些随机的网络服务器读取时，它只是得到一个字节流。然后它必须将其转换为 lisp 字符串。您可能想绑定`*drakma-default-external-format*`到其他东西，尽管我不记得允许的值是什么。也许像`:utf-8`什么？

# cocoa - 自定义 IKImageBrowserView 组外观时烦人的三角形

> ID：10814610
> 
> 赞同：0
> 
> 时间：2012-05-30T10:38:27.010
> 
> 标签：cocoa, ikimagebrowserview

我正在尝试更改 IKImageBrowserView 的组标题的外观。我已经看到我们可以使用 IKImageBrowserGroupHeaderLayer 提供自定义 CALayer

> > [自定义 IKImageBrowserView 组外观](https://stackoverflow.com/questions/8268797/customizing-ikimagebrowserview-group-appearance)

但每次我这样做时，我都会被这个小三角形卡住，它会显示出来并且动画不正确

你对此有什么指示吗？它是一个错误吗？有解决方法吗？

谢谢 ：）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-16T13:24:12.023

这将很快得到修复......这是可可中的一个错误。在问题跟踪器 Id 上关闭它：D

苹果在撰写本文时提供了一种解决方法，并且在 10.8.2 中已修复

# iphone - 图像裁剪给出图像的错误部分

> ID：10814612
> 
> 赞同：3
> 
> 时间：2012-05-30T10:38:32.540
> 
> 标签：iphone, ios, uiimageview, uiimage, core-animation

我编写代码来裁剪图像，但我得到的是图像的另一部分，而不是给定的矩形。

```
CGImageRef cr = CGImageCreateWithImageInRect([imageCrop.image CGImage], rectangle.frame);
    imageCrop.frame=rectangle.frame;
    imageCrop.image = [[[UIImage alloc] initWithCGImage:cr] autorelease];
    CGImageRelease(cr); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-30T10:47:15.157

如果您收到图像的另一部分，可能是因为您提供的`imageOrientation`财产价值。`UIImage`在裁剪之前考虑图像方向。

图像方向会影响图像数据在绘制时的显示方式。默认情况下，图像以“向上”方向显示。但是，如果图像具有关联的元数据（例如 EXIF 信息），则此属性包含该元数据指示的方向。有关此属性的可能值列表，请参阅[UIImageOrientation](http://developer.apple.com/library/ios/documentation/uikit/reference/UIImage_Class/Reference/Reference.html#//apple_ref/doc/uid/TP40006890-CH3-DontLinkElementID_2)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-30T14:28:42.127

```
 //  Try using following line of code-

    CGImageRef cr = CGImageCreateWithImageInRect([imageCrop.image CGImage], rectangle.frame);
    imageCrop.image =[UIImage imageWithCGImage:croppedCGImage scale:1.0f orientation:self.imageOrientation];
     CGImageRelease(cr); 
```

# iphone - 从 NSMutableArray 中删除为空的值

> ID：10814614
> 
> 赞同：3
> 
> 时间：2012-05-30T10:38:35.377
> 
> 标签：iphone, objective-c, xcode, ios5

我有这个数组，我想删除里面有 @"" 或没有的值。我想保持数组的值和他的新长度。这怎么可能？

```
array:{
"24_7" = 1;
"abo_ok" = "";
city = "";
"compte_ok" = "";
country = FR;
"credit_card" = "Mastercard, Visa";
"date_creation" = "2011-11-05 18:01:56";
"debut_abo" = "";
dst = "992.565700179622";
email = "";
"fin_abo" = "";
"h_saturday" = "";
"h_sunday" = "";
"h_week" = "";
handicapped = "Malades assis";
hours = "";
id = 614;
"id_driver" = 614;
"info_compl" = "";
languages = "";
"location_lat" = "48.6823";
"location_long" = "6.17818";
luggage = 0;
luxury = "";
name = "Taxi";
nbvotes = "";
passengers = 4;
query = 8;
score = 9;
"special_trip" = "A\U00e9roport, Colis";
status = 2;
"tel_1" = 0383376537;
"tel_2" = "";
vehicles = "";
votes = "";
} 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-05-30T10:53:38.143

```
[myMutableArray removeObject: @""]; 
```

从数组 中删除**所有**出现的。[-removeObject 的文档在这里](https://developer.apple.com/library/mac/documentation/Cocoa/Reference/Foundation/Classes/NSMutableArray_Class/Reference/Reference.html#//apple_ref/doc/uid/20000138-BABDAJBB)。`@""`

另外，如果您真的有评论中提到的可变字典

```
NSArray* keysToGo = [myDictionary allKeysForObject: @""];
[myDictionary removeObjectsForKeys: keysToGo]; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-30T10:58:45.940

尝试这个

```
NSMutableSet* set = [NSMutableSet setWithArray:array];
[set removeObject:@""];
NSArray *result =[set allObjects];
NSLog(@"%@",result); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-30T10:46:30.950

您可以遍历整个数组并检查每个值的长度。如果值的长度<=0，则从数组中删除该对象。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-30T10:42:09.103

只需遍历数组并删除每个长度为 0 的字符串：

```
for(int idx = 0; idx < array.count; idx++) {
    if([[array objectAtIndex:idx] isKindOfClass:[NSString class]]) { //type check
        if(((NSString*)[array objectAtIndex:idx]).length == 0) { //test for string length

            //finally, pull out that string
            [array removeObjectAtIndex:idx]; 

            //because we removed an object, we have to decrement the 
            //counter to avoid skipping the next string
            idx--; 
        }
    }
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2016-06-20T07:34:05.493

可以使用 NSMutableArray 的 removeObjectIdenticalTo: 方法，如下

```
[yourMutArray removeObjectIdenticalTo:[NSNull null]]; 
```

删除空值。无需迭代。

# php - 使用 php preg_replace 删除尾随行

> ID：10814617
> 
> 赞同：0
> 
> 时间：2012-05-30T10:38:44.483
> 
> 标签：php, preg-replace, eol

[我知道在@this post](https://stackoverflow.com/questions/709669/how-do-i-remove-blank-lines-from-text-in-php)之前已经问过这个问题，但我也试图在最后去掉空行。

我在用：

```
function removeEmptyLines($string)
{
return preg_replace("/(^[\r\n]*|[\r\n]+)[\s\t]*[\r\n]+/", "\n", $string);
} 
```

在任何组合中都可以很好地工作，但是：

```
 aadasdadadsad
 adsadasdasdas
 (empty line here) 
```

我正在尝试对返回的数组执行 count() ，但由于它用 a 替换`\n`了`\n\`，所以它不起作用。我在上面的帖子中尝试了其他一些示例，但没有一个有效。

我的其他功能（到目前为止）

```
function checkEmails($value) {

$value = removeEmptyLines($value);

$data = explode("\n", $value);
$count = count($data);

return $count;

 } 
```

基本上它是一个表单的文本区域发布到自己，如果有人在整行之后点击输入，它仍然计算空白行。

任何帮助将非常感激，

谢谢！

特雷

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-30T10:48:30.187

PHP 的[trim](http://www.php.net/trim)函数默认执行此操作：

```
$string = trim($string); 
```

如果您只想从字符串的开头或结尾剥离，`ltrim()`您也可以使用其中一个。`rtrim()`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-30T10:55:59.687

尝试：

```
preg_replace('/^[\r\n]+|[\r\n]+$/m', '', $string); 
```

[看到它工作](http://codepad.org/xR3ie8me)

如果您还想从行中去除前导/尾随空格，请将出现的两个替换`[\r\n]`为`\s`。另请注意，我单引号的表达式字符串这一事实很重要。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-30T10:45:03.443

您可以改为使用

```
rtrim($string, "\n"); 
```

# java - 运行Tomcat+Mysql的最低系统要求是什么

> ID：10814624
> 
> 赞同：2
> 
> 时间：2012-05-30T10:39:13.643
> 
> 标签：java, mysql, tomcat

我需要一个虚拟专用服务器或 Java 托管我的 Java 投资组合 Web 应用程序（这意味着 < 10 个在线用户）。如果我购买 VDS 300Mhz、256 RAM，我可以运行 Tomcat 和 Mysql 或 Glassfish，还是不可以？最低要求是什么？如何计算 100、1000 个用户的 thtm？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-30T10:44:03.630

这对于运行几乎任何涉及 Java servlet 容器和数据库的东西来说都太小了。这一切都取决于您的应用程序做什么以及它是如何实现的。使用预期的用户数量对您的应用程序进行负载测试，查看它是否有效，测量响应时间，并相应地选择您的设置。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-31T07:21:40.773

256 MB RAM VDS 太小，无法运行 Java 和相关产品。基本上，如果您购买带有 WHM/CPanel 等优化控制面板的 VDS，CP 和 OS 将默认使用 92 到 100 MB RAM。因此，您几乎没有 150 MB RAM 来运行 JAVA 和您的应用程序。

我建议您从 512 MB RAM VPS 服务器开始。选择可立即扩展的云服务器。具有 512 MB RAM 的云几乎不会花费您每月 20 到 25 美元。我在[512 MB 的 linux](http://www.accuwebhosting.com/linux-cloud.html) cloud 上运行我的一些 24 x 7 hoovers 。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-30T10:44:37.543

我不会说有最低要求，但是 256 RAM 不足以容纳更大的东西。目前使用 MySQL 和 Tomcat 在 600 MB RAM 上运行我的应用程序，这还不够。

您可以通过提供本地 Tomcat`Xmx128m`和`XX:PermGenSize=64m`（将其余部分留给 MySQL 和操作系统）来模拟它，并使用 100 个用户执行 JMeter 测试。

# testing - 在 Symfony 2 中编写可测试的服务并推动 DiC 的使用

> ID：10814630
> 
> 赞同：0
> 
> 时间：2012-05-30T10:39:33.537
> 
> 标签：testing, dependency-injection, symfony, doctrine-orm

我需要在**服务**`MyEntityRepository`中调用我的一些方法。我已经看到了一些关于注入以获取所需存储库的示例：**`@doctrine.orm.default_entity_manager`**

 **```
namespace Acme\HelloBundle\Service;     

use Doctrine\ORM\EntityManager;

Class MyService
{
    private $entityManager;

    public function __construct(EntityManager $entityManager)
    {
        $this->entityManager = $entityManager;
    }

    public function doStuff()
    {
        $repo = $this->entityManager->getRepository('AcmeHelloBundle:MyEntity');

        // Do stuff
    }
} 
```

使用此服务定义：

```
my_service:
  class: Acme\HelloBundle\Service\MyService
  arguments: ['@doctrine.orm.default_entity_manager'] 
```

**问题**是此代码可测试吗？为了将来的测试目的而注入会更好`MyEntityRepository`（使用模拟对象作为存储库）？

```
namespace Acme\HelloBundle\Service;

use Acme\HelloBundle\Repository\MyEntityRepository;

Class MyService
{
    private $er;

    public function __construct(MyEntityRepository $er) { $this->er = $er; }

    public function doStuff()
    {
        $repo = $this->er;

        // Do stuff
    }
} 
```

使用：

```
my_entity_repository:
  class: Acme\HelloBundle\Repository\MyEntityRepository
  factory_service: doctrine.orm.default_entity_manager
  factory_method: getRepository
  arguments: ['Acme\HelloBundle\Entity\MyEntity']

my_service:
  class: Acme\HelloBundle\Service\MyService
  arguments: ['@my_entity_repository'] 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-30T22:09:41.750

我认为实体存储库比实体管理器更容易模拟，因为您必须模拟 getRepository 才能返回实体存储库模拟，因此在这两种情况下，您都必须创建一个实体存储库模拟。

但这并不是我认为第二种解决方案更好的唯一原因：您的依赖关系通过这种方式更加清晰，可以看到您的类真正需要什么（实体管理器其他方法未使用）。

使用第二种解决方案会使对象的创建更加复杂，但这是 DIC 可以解决的问题。**

# twitter-bootstrap - bootstrap btn-group 保持内联

> ID：10814632
> 
> 赞同：1
> 
> 时间：2012-05-30T10:39:57.077
> 
> 标签：twitter-bootstrap

[http://jsfiddle.net/rt3kx/9/](http://jsfiddle.net/rt3kx/9/)

表中的每个按钮组被分成两行。

虽然我知道 Bootstrap 并非设计为只是添加水的框架，并且定义我自己的风格会解决问题，但在这种情况下，我想看看是否有没有自定义的解决方案。

这是一种解决方法：

[http://jsfiddle.net/rt3kx/10/](http://jsfiddle.net/rt3kx/10/)

本质上，它的作用是通过使用为表格单元格提供更多空间

```
<td class="span2"> 
```

然而，这不是一个优雅的解决方案，因为单元占用的空间超出了必要的空间。

有人可以提出更好的解决方案吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-30T13:05:33.487

创建具有固定宽度的您自己的样式并将其应用于该 btn-group div。Bootstrap 旨在由使用它的人进行扩展，因此并非所有事情都必须使用 bootstrap 类来完成。

制作一个单独的 CSS 文件，添加一个固定宽度的类，然后将其应用到您的 div。

# ajax - 如何强制流水线

> ID：10814637
> 
> 赞同：0
> 
> 时间：2012-05-30T10:40:23.083
> 
> 标签：ajax, http, firefox, google-chrome

有没有办法告诉现代浏览器
对我的 ajax 请求使用 http 管道？

PS：据我了解，目前只有 Opera 默认使用http 1.1 流水线，但 需要以特殊方式配置
firefox 和 chrome

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-30T14:29:49.043

跨浏览器没有标准的方法来做到这一点（我假设你正在谈论在你的 Javascript 代码中这样做）。[关于 HTTP Pipelining 的维基百科文章](http://en.wikipedia.org/wiki/HTTP_pipelining)似乎很好地解释了它。

HTTP 协议中也没有办法请求客户端实现流水线。

# c# - 通过流处理不同的类类型

> ID：10814639
> 
> 赞同：1
> 
> 时间：2012-05-30T10:40:29.927
> 
> 标签：c#, network-programming

我正在编写一个基于 TCP 连接的 DLL。
基本前提是它可以被任何客户端使用，所有客户端需要做的就是提供一个 IP 地址和一个端口号，然后 dll 负责连接、传输消息、检测断开连接等。 dll 公开了 3 个事件`Connected`，客户`Disconnected`端`MessageReceived`只需连接到这些即可使用它。DLL 还定义了一个基`Message`类，客户端可以从该基类继承，然后将他们自己的类/对象传递到 DLL 以进行发送/接收。

在 dll 中，我定义了一个`Packet`-class 和支持类型：

```
[Serializable]
internal class Packet
{
    private MessageType _type;
    private MessageItem _item;

    public MessageType MYtpe
    {
        get
        {
             return _type;
        }
        set
        {
            _type = value;
        }
    }

     //similar for MessageItem
     // ...
} 
```

枚举：

```
public enum MessageType
{
    None,
    PollItem,
    Binary1,
    Binary2
} 
```

对象/类发送的基类：

```
public abstract class MessageItem
{
} 
```

我的低级，发送类，代码，隐藏在DLL中，然后就是这个（没有错误处理）

```
internal bool SendPacket(Packet p)
{
    bool sentOk = false;
    BinaryFormatter bin = new BinaryFormatter();
    try
    {
         bin.Serialize(theNetworkStream, p);
    }
    catch etc..
} 
```

`ReadPacket`基本上是相反的。

dll 公开了一个函数供客户端使用，该函数构造数据包并调用上面的发送函数

```
public void SendMessage(MessageType type, MessageItem message) 
```

现在为客户。因为我在 DLL 中定义了 2 个二进制枚举类型，所以我可以在我的客户端代码中使用 2 个单独的类。

例如

```
public class Employee : MessageItem
{
     string name;
     //etc
} 
```

并且说：

```
public class Car : MessageItem
{
    string Model;
    //etc
} 
```

这一切都有效，我可以通过以下方式接收两种类型中的任何一种：

```
if(myConnection.NextMessageType() == MessageType.Binary1)
{
     Employee e = (Employee)myConnection.ReadMessage();
}
if(myConnection.NextMessageType() == MessageType.Binary2)
{
    Car c = (Car)myConnection.ReadMessage();
} 
```

只要客户端总是发送`Employee`类型 as`binary1`和`Car`as `binary2`。

如果我想发送第三种类型的对象/类，此时我必须进入 dll，添加一个枚举；`binary3`，重建 dll，然后我可以在我的客户端中再次派生并在`if`上面的接收代码中使用第 3 个子句。

```
if(myConnection.NextMessageType() == MessageType.Binary3)
{
    Animal a = (Animal)myConnection.ReadMessage();
} 
```

所以终于到了我的问题！

有没有一种方法可以避免重建 DLL，但客户端可以通过 DLL 发送任意数量的不同类类型，并且 DLL 中的发送/接收机制（对客户端隐藏）仍然有效？我还认为，一长串的`if messagetype == 1, 2 3`etc 突出了一个糟糕的设计，但我想不出更好的设计会是什么。

如果你到了这一步并且明白我在问什么，谢谢！真的很感激一个解决方案。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-30T11:30:59.813

最简单的解决方案是将 MessageType 枚举更改为字符串并完全摆脱枚举。改变：-

```
public void SendMessage(MessageType type, MessageItem message) 
```

变成：-

```
public void SendMessage(MessageItem message) 
```

然后将 SendPacket 更改为：

```
internal bool SendPacket(Packet p)
{
  bool sentOk = false;
  BinaryFormatter bin = new BinaryFormatter();
  try
  {
    bin.write (p.MessageItem.GetType ().Name); // or whatever the write/serialise function is called
    bin.Serialize(theNetworkStream, p);
  }
  catch etc..
} 
```

然后，接收方首先读取字符串，然后使用反射创建该类型的对象，然后反序列化为该对象，以伪代码形式：

```
string message_type = ethernet.readstring ();
Type item_type = convert_name_to_object_type;
ConstructorInfo constructor = item_type.GetConstructor ();
object item = constructor.Invoke ();
ethernet.Deserialise (item);
invoke MessageReceived event (item); 
```

最后一部分可以使用 a`SortedDicationary <message type name, message handler delegate>`将消息分派给正确的处理程序（但这会强制处理程序将 MessageItem 参数类型转换为正确的消息类型）。或者，再次使用反射找到一种名为“HandleEthernetMessage”的方法，该方法采用通过以太网接收的类型的一个参数。`SortedDicationary <message type name, method info>`在运行时会更快并克服第一个 SortedDictionary 问题。

# iphone - 所有相同精灵（精灵数组）上的 ccTouch 事件

> ID：10814644
> 
> 赞同：1
> 
> 时间：2012-05-30T10:40:45.377
> 
> 标签：iphone, xcode4, cocos2d-iphone, touch

我刚刚从一个教程开始学习 Cocos2d。我想随机飞行“蝙蝠”，当我触摸屏幕上的任何位置时，所有蝙蝠都聚集在我的触摸位置，它们再次开始随机飞行。
这是我的代码：

```
-(id) init
{
if( (self=[super init])) {

    [[CCSpriteFrameCache sharedSpriteFrameCache] addSpriteFramesWithFile:@"Bat.plist"];

    //Bats Array Initialization
    bats = [[NSMutableArray alloc] init];

    //Add bats using a batch node.
    CCSpriteBatchNode *batch1 = [CCSpriteBatchNode batchNodeWithFile:@"Bat.png" capacity:10];
    [self addChild:batch1 z:2 tag:TAG_BATS];

    //Make them start flying up.
    for(int x=0; x<5; x++){
        //Create SimpleAnimObject of bat
        bat1 = [SimpleAnimObj spriteWithBatchNode:batch1 rect:CGRectMake(0,0,48,48)];
        [batch1 addChild:bat1];
        [bat1 setPosition:ccp(arc4random()%900+40, arc4random()%600+50)];
        [bat1 setScale:0.6f];

        float flappingSpeed = [self makeBatFlyUp:bat1];
        bat1.velocity = ccp((arc4random()%1000)/500 + 0.2f, 0.1f/flappingSpeed);

        [bats addObject:[NSValue valueWithPointer:bat1]];
        [bat1 retain];

        //Set the bat's direction based on x velocity.
        if(bat1.velocity.x > 0){
            bat1.flipX = YES;
        }
    }

    self.isTouchEnabled = YES;
    [self schedule:@selector(step:)];

}
return self;
}
-(float)makeBatFlyUp:(SimpleAnimObj*)bat {
CCSpriteFrameCache * cache = [CCSpriteFrameCache sharedSpriteFrameCache];

float delay = (float)(arc4random()%5+5)/150;
CCAnimation *animation = [[CCAnimation alloc] initWithName:@"simply_bat_fly" delay:delay];

int num = arc4random()%9+1;
for(int i=1; i<=9; i+=1){
    [animation addFrame:[cache spriteFrameByName:[NSString stringWithFormat:@"b%i.tiff",num]]];
    num++;
    if(num > 9){ num = 1; }
}       

[bat stopAllActions];
[bat runAction:[CCRepeatForever actionWithAction: [CCAnimate actionWithAnimation:animation]]];

bat.animationType = BAT_FLYING_UP;

return delay;
} 
```

在触摸事件中：

```
-(BOOL)ccTouchBegan:(UITouch *)touch withEvent:(UIEvent *)event{

CGPoint touchLocation = [touch locationInView:[touch view]];
touchLocation = [[CCDirector sharedDirector] convertToGL:touchLocation];
touchLocation = [self convertToNodeSpace:touchLocation];

float velocityBat =  1024/3.0 ;

CGPoint moveDifference = ccpSub(touchLocation,bat1.position );
float distanceMove = ccpLength(moveDifference);
float moveduration = distanceMove /   velocityBat;

// here i have to use Array but i don't know how to use array to access all same sprites.

self.moveAction = [CCSequence actions:                          
                   [CCMoveTo actionWithDuration:moveduration position:touchLocation],
                   [CCCallFunc actionWithTarget:self selector:@selector(bearMoveEnded)],
                   nil
                   ];
[bat1 runAction:moveAction];

return YES;
} 
```

蝙蝠正常飞行，但是当我在屏幕上触摸时，只有一只蝙蝠跟随我的触摸事件，其他蝙蝠继续随机移动。
有人能帮我一下吗？如果我错过任何事情或我错在哪里？

谢谢！！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-30T10:52:31.050

您对正在使用的蝙蝠只有一个引用：`bat1`变量。您需要使用 bats 数组来访问所有的 bat。

另外，去掉这`[bat1 retain]`条线，因为通过将每个 bat 添加到 bats 数组中，它已经被保留了。Cocos 节点在调用`addChild:node`.

# css - 铬浏览器：如何设置打印参数（A4 / A3，方向等）？

> ID：10814645
> 
> 赞同：2
> 
> 时间：2012-05-30T10:40:46.153
> 
> 标签：css, printing, chromium

使用 window.print() 时有什么方法可以添加打印参数？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-07T11:10:05.917

您可以使用 CSS3 规则：

```
@page {
  size: A4 portrait;
  margin: 27mm 16mm 27mm 16mm;
  counter-increment: page;
  @bottom-right {
    content: "Page " counter(page) " of " counter(pages);
  }
} 
```

但是一些用户代理不支持`pages`计数器，并且会忽略包含该计数器的任何内容，因此要覆盖所有 UA，请执行以下操作：

```
@page {
  size: A4 portrait;
  margin: 27mm 16mm 27mm 16mm;
  counter-increment: page;
  @bottom-right {
    content: "Page " counter(page);
    content: "Page " counter(page) " of " counter(pages);
  }
} 
```

[在此处](http://www.w3.org/TR/2004/CR-css3-page-20040225/#page-size-prop)阅读有关 CSS3 分页媒体模块的更多信息

# css - 同时悬停两个悬停元素

> ID：10814653
> 
> 赞同：1
> 
> 时间：2012-05-30T10:41:29.520
> 
> 标签：css, hover, less

嗨，我遇到了一个问题..我有一个 CSS 代码...

```
.inner-inline .game-main:hover, .game-main strong a:hover {
    color: #FFFFFF;
} 
```

在这里，我想要那个“.game-main”，它是一个悬停在它上面的 div，它会改变文本的颜色，但我也想悬停它里面的元素，它是一个锚标签，同时 div 悬停......我已经用谷歌搜索了这，可能是[LESS](http://lesscss.org)是解决方案，但我无法为它修复合格的代码......

请你能帮忙..??

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-30T10:48:44.703

":hover" 伪类不需要是 css 选择器的最后一部分。您可以执行以下操作：

```
.game-main:hover, .game-main:hover a {
    color: #fff;
} 
```

如果没有看到您的 html，很难更精确。

# json - ExtJS - 网格面板未加载嵌套 JSON

> ID：10814654
> 
> 赞同：0
> 
> 时间：2012-05-30T10:41:30.067
> 
> 标签：json, extjs, grid, store

你好，我的 JSON 是：（格式化以便更好地阅读）

```
{"status":{"status":0,"msg":"Ok","protocolversion":"extjs.json"},
"list":[{"getLogfiles":[
{"key":"0","value":"...lugin\/monitor\/files\/x_worker_error.log"},
{"key":"1","value":"...les\/x-worker01-progress.log.1331769600"},
{"key":"2","value":"...\/application\/x\/plugin\/monitor\/files\/Test.log"},
{"key":"3","value":"...ind\/plugin\/monitor\/files\/logfile_for_navi_test.log"},
{"key":"4","value":"...lugin\/monitor\/files\/logfilefilter_worker_error.log"}]
}]
} 
```

此 json 数据已成功加载，我可以在 console.log() 上打印它，但它没有加载到我的商店：

```
 ...
   Ext.define( 'Xxx.plugins.monitor.store.GridLogfiles', {
      extend  : 'Ext.data.Store',
      mixins: [ 
         'Deft.mixin.Injectable'
      ],

      model: 'Xxx.plugins.monitor.model.GridLogfiles',

      proxy   : {
         type       : 'ajax',
         url        : 'xxx',
         extraParams: {
            user      : 'test',
            pass      : 'test',
            vers      : 'extjs.json',
            module    : 'monitor',
            func      : 'getLogfiles'
         },
         reader     : {
            type: 'json',
            root: 'list[0].getLogfiles',
            // root: 'list',
            successProperty:false
         } 
      }
     , autoLoad: true

   } );
... 
```

我都试过`root: 'list'`了`root: 'list[0].getLogfiles`

在`console.log()`数据下找到`rawData (obj) -> list (array) -> 0 -> getLogfiles (array) -> 0, 1, 2 -> key, value`

怎么了？谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-30T15:01:05.123

所以我修复它：

`root: 'list'`

并将 Json 更改为：

```
{"status":{"status":0,"msg":"Ok","protocolversion":"extjs.json"},"list":[{"key":"0","value":"...lugin\/monitor\/files\/logfilefilter_worker_error.log"},{"key":"1","value":"...les\/logfilefilter-worker01-progress.log.1331769600"},{"key":"2","value":"...\/application\/x\/plugin\/monitor\/files\/Test.log"},{"key":"3","value":"...ind\/plugin\/monitor\/files\/logfile_for_navi_test.log"},{"key":"4","value":"...lugin\/monitor\/files\/logfilefilter_worker_error.log"},{"key":"5","value":"...les\/logfilefilter-worker01-progress.log.1331769600"},{"key":"6","value":"...\/application\/x\/plugin\/monitor\/files\/Test.log"},{"key":"7","value":"...lugin\/monitor\/files\/logfilefilter_worker_error.log"},{"key":"8","value":"...les\/logfilefilter-worker01-progress.log.1331769600"},{"key":"9","value":"...\/application\/x\/plugin\/monitor\/files\/Test.log"}]} 
```

并使用`Ext.create()`而不是 DeftJs`inject: {}`

谢谢您的帮助。

# android - 音频文件抛出 IllegalStateException

> ID：10814655
> 
> 赞同：1
> 
> 时间：2012-05-30T10:41:30.627
> 
> 标签：android

我在这里读过任何一个问题，但没有一个能解决我的问题。我正在尝试播放媒体文件，但它说：

> E/MediaPlayer(554)：在状态 8 中调用 prepareAsync W/System.err(554)：java.lang.IllegalStateException W/System.err(554)：在 android.media.MediaPlayer.prepare(Native Method)

我找不到问题出在哪里。在模拟器上工作（抛出异常），在平板电脑上强制关闭。我看过一篇文章说我不应该使用准备方法，但如果我不这样做，什么都不会改变。

这是代码和错误：

```
 MediaPlayer player = MediaPlayer.create(MyAct.this, R.raw.zboo);
        player.setLooping(false); 

        try {
            player.prepare();
        } catch (IllegalStateException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        } catch (IOException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        }

        player.start(); 
```

> E/MediaPlayer(522)：在状态 8 中调用 prepareAsync
> 
> W/System.err(554): java.lang.IllegalStateException
> 
> W/System.err(554): 在 android.media.MediaPlayer.prepare(Native Method)

提前致谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-30T10:52:30.783

首先，您不需要调用 prepare()，因为无论如何这都是通过 create 完成的。来自 Android 文档；

```
MediaPlayer mediaPlayer = MediaPlayer.create(context, R.raw.sound_file_1);
mediaPlayer.start(); // no need to call prepare(); create() does that for you 
```

其次，如果情况需要您进行准备，请改用 prepareAsync()，否则 UI 可能会挂起。异步准备在后台线程上进行准备部分，并在完成后返回结果。[Android 文档对此有更多说明。](http://developer.android.com/guide/topics/media/mediaplayer.html)

检查您的媒体文件以确保它可以播放。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-10-06T09:55:09.037

我面临着同样的问题。当我一一编写这四种方法而不是在这四行之间放置一些逻辑（代码）时，它就解决了。

```
mediaPlayer.reset();
mediaPlayer.setDataSource("songpath");
mediaPlayer.prepare();
mediaPlayer.start(); 
```

> 您想在调用 mp.prepare() 之前编写 mp.reset() 并且所有方法都逐行调用

# sql - SQLite 括号“不起作用”

> ID：10814663
> 
> 赞同：12
> 
> 时间：2012-05-30T10:41:57.290
> 
> 标签：sql, sqlite

在 SQLite 版本 3.7.12.1（控制台）中，此查询不起作用：

```
(SELECT * FROM A
UNION
SELECT * FROM B)
EXCEPT
(SELECT * FROM A
INTERSECT
SELECT * FROM B); 
```

错误信息

> 错误：第 1 行附近：“（”附近：语法错误

此查询适用于 SQL Server Management Studio。其他带括号的查询确实按预期工作。我错过了什么吗？

编辑：澄清：

```
SELECT * FROM A;     <-- works
(SELECT * FROM A);   <-- does not work [Error: near line 1: near "(": syntax error]
SELECT * FROM A WHERE A.id IN (SELECT B.id FROM B);   <-- works, so no fundamental issues with brackets and sqlite... 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-05-31T07:06:17.340

似乎 SQLite 不喜欢将组合（子）查询（带有 , 或 的查询`UNION`）括`UNION ALL`起来：`EXCEPT``INTERSECT`

*   这**不起作用**：

    ```
    (SELECT 1 AS v
    UNION
    SELECT 2)
    EXCEPT
    SELECT 1 
    ```

*   这**也**不起作用：

    ```
    SELECT 1 AS v
    UNION
    (SELECT 2
    EXCEPT
    SELECT 1) 
    ```

（但[两者都](http://sqlfiddle.com/#!6/9eecb7db59d16c80417c72d1e1f4fbf1/12066) [适用](http://sqlfiddle.com/#!6/9eecb7db59d16c80417c72d1e1f4fbf1/12068)于 SQL Server。）

如果没有括号，则各个子选择会按顺序组合，也就是说，与其他 SQL 产品中的任何操作符都没有固有的优先级。（例如，这个

```
SELECT 1 AS v
UNION
SELECT 2
INTERSECT
SELECT 3 
```

[`1`](http://sqlfiddle.com/#!6/9eecb7db59d16c80417c72d1e1f4fbf1/12071)在 SQL Server 中[返回](http://sqlfiddle.com/#!6/9eecb7db59d16c80417c72d1e1f4fbf1/12071)`INTERSECT`（因为首先执行），而在 SQLite 中[没有返回。）](http://sqlfiddle.com/#!5/9eecb7/5966)

唯一的解决方法似乎是将要组合的部分用作子查询，[如下所示](http://sqlfiddle.com/#!5/a1c03/1)：

```
SELECT *
FROM (
  SELECT * FROM A
  UNION
  SELECT * FROM B
)
EXCEPT
SELECT *
FROM (
  SELECT * FROM A
  INTERSECT
  SELECT * FROM B
) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-30T10:44:11.853

```
((SELECT * FROM A)
UNION
(SELECT * FROM B))
EXCEPT
((SELECT * FROM A)
INTERSECT
(SELECT * FROM B)); 
```

# javascript - DIV jQuery 中至少需要一个输入

> ID：10814667
> 
> 赞同：1
> 
> 时间：2012-05-30T10:42:10.137
> 
> 标签：javascript, jquery

我的表格有 5 个输入

我需要从他们的输入中检查至少一个必须使用 JQuery 在 Button Click 上填写。

```
<div id='myForm'>
    <input name="baz" type="text" />
    <input name="bat" type="text" />
    <input name="bab" type="text" />
    <select name="foo">
        <option value=""></option>
        <option value="1">1</option>
        <option value="2">2</option>
    </select>
    <select name="bar">
        <option value=""></option>
        <option value="1">1</option>
        <option value="2">2</option>
    </select>
     <input type='button' value='submit' onclick='return chk();'/>
</div>

<script>
         function chk()
         {
               // i need to check here
                  alert('i wan to to check it here')
         }
</script> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-30T10:45:53.690

```
(function() {
   var valid = false;

   $('#myForm').submit(function(evt) {   

      $(this).find('input[type="text"], select').each(function() {
         if ($(this).val() !== "") {
            valid = true;
         }
      });

      if (!valid) { 
          evt.preventDefault(); 
         /* stop form submission (and tell the user to fill at
          * least one field 
          */ 
      }
   });
}()); 
```

小提琴示例：http: [//jsfiddle.net/Tcg3U/3/](http://jsfiddle.net/Tcg3U/3/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-30T11:11:31.133

```
$('input[value="submit"]').on('click', function(e) {
   e.preventDefault();
   if ($('input, select').not('[type="button"]').filter(function() {
     return this.value.trim()!="";
      }).length) {
        alert('valid');
           //$("#myForm").submit()
    }
}); 
```

[小提琴](http://jsfiddle.net/adeneo/Tcg3U/5/)

# java - PrimeFaces confirmDialog 不适用于 InternetExplorer

> ID：10814668
> 
> 赞同：1
> 
> 时间：2012-05-30T10:42:11.867
> 
> 标签：java, jsf-2, primefaces

我在 WebSphere Application Server 8 上使用 PrimeFaces 3.2 和 MyFaces 2.0.2。

我有一个在 Firefox 中运行良好的确认对话框。但是当我想将它与 Internet Explorer（版本 6、7、8）一起使用时，我无法使用它，因为应该遮挡背景的图层也会遮挡确认对话框。

有谁知道解决方案？

此致

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-30T10:51:19.023

尝试添加`appendToBody="true"`到您的`p:confirmDialog`,

还有……是在里面`Tab`还是什么？因为把它拿出来也应该能解决你的问题......

尝试重新建模您的页面，以便表单位于对话框内而不是相反......

类似这样的事情[Re：问题：对话框嵌套对话框与 modal=true](http://forum.primefaces.org/viewtopic.php?f=3&t=19001#p59289)

# sql-server - 启动时 SQL Server 错误消息框

> ID：10814674
> 
> 赞同：0
> 
> 时间：2012-05-30T10:42:24.033
> 
> 标签：sql-server, sql-server-2008, reporting-services

每次我重新启动机器时，我都会看到附加的错误消息。这似乎是最近发生的，因为我将 SQL Server Express Edition（带有高级服务）升级到 SQL Server Developer Edition。

我也无法访问我的 Reporting Services 配置管理器，当我输入我的本地计算机名称并单击查找时，它显示“无效类”

有谁知道这两者是否相关以及问题似乎是什么？![在此处输入图像描述](../Images/cc0c72d41fa7199076723b8e2a538965.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-31T10:34:13.360

你能打开

```
Start Menu > All Programs > Microsoft SQL Server > Configuration Tools > SQL Server Configuration Tools 
```

检查您的**SQL Server**和**Reporting Services**是否已启动？如果它们停止，您必须启动它们，某些 Anti Visures 可能会关闭 SQL Server 正在使用的端口

当您确保您正在运行 SQL Server 和报告服务时，您必须打开

```
Start Menu > All Programs > Microsoft SQL Server > Configuration Tools > SQL Server Reporting Service Configuration Manager 
```

并检查您是否可以连接到 Reoprting Services，让我知道发生了什么，我会继续

# c# - 获取当前 gridview.rows.count

> ID：10814677
> 
> 赞同：0
> 
> 时间：2012-05-30T10:42:30.300
> 
> 标签：c#, .net, visual-studio-2010

我有一个gridview，当用户单击表单上的按钮时，我在其中设置数据源。我试图使用相同的 button_click 事件获取 gridview 的行数，但它返回设置数据源之前的行数，即 0。我使用

```
strCount = gvReturned.Rows.Count.Tostring(); 
```

任何提示表示赞赏。

谢谢

吨

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-30T10:45:35.083

尝试监听 DataSourceChanged 事件

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-30T10:44:39.957

试着打电话

```
 gvReturned.DataBind() 
```

在设置源之后但在请求计数之前..

# xslt - XSLT 分组和删除重复项

> ID：10814684
> 
> 赞同：1
> 
> 时间：2012-05-30T10:42:59.723
> 
> 标签：xslt, xslt-2.0, saxon, xslt-grouping

我有以下 XML 输入文件：

```
<mappings>
    <mapping>
        <key>6718</key>
        <value attribute="content_type">Info Page</value>
    </mapping>
    <mapping>
        <key>35905</key>
        <value attribute="content_type">Press releases</value>
    </mapping>
    <mapping>
        <key>6718</key>
        <value attribute="content_type">Info Page</value>
    </mapping>
    <mapping>
        <key>36941</key>
        <value attribute="content_type">Press releases</value>
    </mapping>
    <mapping>
        <key>24920</key>
        <value attribute="content_type">Press releases</value>
    </mapping>
    <mapping>
        <key>40244</key>
        <value attribute="content_type">Press releases</value>
    </mapping>
    <mapping>
        <key>36639</key>
        <value attribute="content_type">Press releases</value>
    </mapping>
    <mapping>
        <key>1861</key>
        <value attribute="content_type">Press releases</value>
    </mapping>
    <mapping>
        <key>2280</key>
        <value attribute="content_type">Press releases</value>
    </mapping>
    <mapping>
        <key>42062</key>
        <value attribute="content_type">Press releases</value>
    </mapping>
</mappings> 
```

我想生成以下 XML：

```
<reductions>
    <reduction>
        <group>Info Page</group>
        <key>6718</key>
    </reduction>
    <reduction>
        <group>Press releases</group>
        <key>35905</key>
        <key>36941</key>
        <key>24920</key>
        <key>40244</key>
        <key>36639</key>
        <key>1861</key>
        <key>2280</key>
        <key>42062</key>
    </reduction>
</reductions> 
```

因此，输入 XML 中的键需要根据输入 XML 中的值节点的值在输出 XML 中进行分组。还需要删除重复项，输入 XML 包含值为 6718 的键两次，输出 XML 仅一次。

我将 XSLT 2.0 与 Saxon 9 HE 一起使用。

有人可以帮帮我吗？

[编辑]

```
<?xml version="1.0" encoding="UTF-8"?>
<xsl:transform 
    version="2.0" 
    xmlns:xsl="http://www.w3.org/1999/XSL/Transform"
    xmlns:xs="http://www.w3.org/2001/XMLSchema"
    exclude-result-prefixes="xs">

    <xsl:template match="/">
        <xsl:variable name="mappings">
            <mappings>
                <xsl:apply-templates select="resource/R"/>
            </mappings>
        </xsl:variable>
        <reductions>
            <xsl:apply-templates select="$mappings/*"/>
        </reductions>
    </xsl:template>

    <xsl:template match="R">
        <mapping>
            <key><xsl:value-of select="MT[@N='content_id']/@V"/></key>
            <value>
                <xsl:attribute name="attribute">content_type</xsl:attribute>
                <xsl:value-of select="MT[@N='content_type']/@V"/>
            </value>
        </mapping>
        <!--mapping>
            <key><xsl:value-of select="MT[@N='content_id']/@V"/></key>
            <value>
                <xsl:attribute name="attribute">modified_timestamp</xsl:attribute>
                <xsl:value-of select="format-dateTime(MT[@N='modified_timestamp']/@V, '[Y0001]-[M01]-[D01]')"/>
            </value>
        </mapping-->
    </xsl:template>

    <xsl:template match="mapping">
        <xsl:for-each-group select="." group-by="value">
            <reduction>
                <group><xsl:value-of select="current-grouping-key()"/></group>
                <xsl:for-each-group select="current-group()/key" group-by=".">
                    <xsl:copy-of select="."/>
                </xsl:for-each-group>
            </reduction>
        </xsl:for-each-group>
    </xsl:template>

</xsl:transform> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-30T10:54:43.867

这是一个使用`for-each-group`两次的样式表：

```
<xsl:stylesheet version="2.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">

<xsl:output indent="yes"/>

<xsl:template match="mappings">
  <reductions>
    <xsl:for-each-group select="mapping" group-by="value">
      <reduction>
        <group><xsl:value-of select="current-grouping-key()"/></group>
        <xsl:for-each-group select="current-group()/key" group-by=".">
          <xsl:copy-of select="."/>
        </xsl:for-each-group>
      </reduction>
    </xsl:for-each-group>
  </reductions>
</xsl:template>

</xsl:stylesheet> 
```

[编辑] 当我使用 Saxon 9.4 HE 对输入运行发布的样式表时

```
<mappings>
    <mapping>
        <key>6718</key>
        <value attribute="content_type">Info Page</value>
    </mapping>
    <mapping>
        <key>35905</key>
        <value attribute="content_type">Press releases</value>
    </mapping>
    <mapping>
        <key>6718</key>
        <value attribute="content_type">Info Page</value>
    </mapping>
    <mapping>
        <key>36941</key>
        <value attribute="content_type">Press releases</value>
    </mapping>
    <mapping>
        <key>24920</key>
        <value attribute="content_type">Press releases</value>
    </mapping>
    <mapping>
        <key>40244</key>
        <value attribute="content_type">Press releases</value>
    </mapping>
    <mapping>
        <key>36639</key>
        <value attribute="content_type">Press releases</value>
    </mapping>
    <mapping>
        <key>1861</key>
        <value attribute="content_type">Press releases</value>
    </mapping>
    <mapping>
        <key>2280</key>
        <value attribute="content_type">Press releases</value>
    </mapping>
    <mapping>
        <key>42062</key>
        <value attribute="content_type">Press releases</value>
    </mapping>
</mappings> 
```

我得到结果

```
<reductions>
   <reduction>
      <group>Info Page</group>
      <key>6718</key>
   </reduction>
   <reduction>
      <group>Press releases</group>
      <key>35905</key>
      <key>36941</key>
      <key>24920</key>
      <key>40244</key>
      <key>36639</key>
      <key>1861</key>
      <key>2280</key>
      <key>42062</key>
   </reduction>
</reductions> 
```

据我了解您的要求，这是正确的。

# xamarin.android - 在 Monodroid 中隐藏 Imageview

> ID：10814685
> 
> 赞同：0
> 
> 时间：2012-05-30T10:43:05.940
> 
> 标签：xamarin.android

我正在尝试使用以下代码在 monodroid 中隐藏图像视图。

Imagview 图像 = FindViewbyId(Resource.Id.UserImage); image.Visibility = ViewStates.Invisible；

但是图像在表格中是可见的。我也尝试在 RunonMainUiThread 中调整代码片段。结果还是一样。

请帮助我纠正问题

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-02T09:32:42.360

如果您的意思是现在图像视图所在的位置只有一个空白空间，请尝试`Visibility`将`ViewStates.Gone`.

如果 imageview 仍然显示图片，请尝试创建一个隐藏 imageview 的小型示例应用程序。如果它不起作用，请提交一个错误。

# django - Symfony2 - git部署项目哪些目录

> ID：10814686
> 
> 赞同：0
> 
> 时间：2012-05-30T10:43:10.183
> 
> 标签：django, deployment, symfony

我曾经使用 git 将 Django 项目部署到生产环境中。
在那里我只需要跟踪整个*应用程序*。

现在我正在使用 Symfony2 创建一个新项目，试图尊重标准结构。
我想知道用 git 部署它的最佳实践。

基本上有几个主要文件夹我在其中进行修改

```
Symfony/app/
Symfony/src/Me/
Symfony/web/ 
```

我应该只跟踪那些目录还是整个`Symfony`结构？
我应该找到一种方法将我的整个项目放入一个 Bundle 中吗？

也许是愚蠢的问题，我是 Symfony 的新手。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-30T11:41:06.833

[Symfony 2 Cookbook](http://symfony.com/doc/current/cookbook/workflow/new_project_git.html)中有一个使用 Git的简单方法。

# objective-c - Objective c - 在drawRect中绘制圆角图像

> ID：10814690
> 
> 赞同：4
> 
> 时间：2012-05-30T10:43:22.053
> 
> 标签：objective-c, uitableview, uiimage, rounded-corners, drawrect

我有一个`UITableViewCell`带有`UIImage`as 属性的子类。
我想在 drawRect 中绘制图像，并且要高效，因为这是一个表格视图单元格。

我知道如何按原样绘制图像：

```
-(void)drawRect:(CGRect)aRect 
{
    CGRect rect = self.bounds;

    [self.image drawInRect:rect];
} 
```

但是我怎样才能用圆角绘制图像并保持效率呢？

顺便说一句，我不想​​使用`UIImageView`然后设置图层角半径，因为它接缝会损害性能。

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-05-30T10:51:27.597

您需要创建一个剪切路径：

```
CGContextRef ctx = UIGraphicsGetCurrentContext();
CGContextSaveGState(ctx);
CGPathRef clippath = [UIBezierPath bezierPathWithRoundedRect:rect cornerRadius:radius].CGPath;
CGContextAddPath(ctx, clippath);
CGContextClip(ctx);
[self.image drawInRect:rect];
CGContextRestoreGState(ctx); 
```

# java - 西班牙语字符显示不正确？

> ID：10814692
> 
> 赞同：2
> 
> 时间：2012-05-30T10:43:25.533
> 
> 标签：java, gwt, internationalization, gxt

我正在使用 GWT。我实施了国际化以支持西班牙语。但西班牙字符没有正确显示。例如：**Teléfono Buscar**显示为 。 ![在此处输入图像描述](../Images/714a899c8f7d3bef6be87effe6503f8a.png)（请参阅 Tel 后的一些垃圾字符）。我正在使用 IE 浏览器。

我需要配置任何进一步的设置吗？谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-30T11:10:55.130

我怀疑这可能是因为您的编辑器没有使用`UTF-8`编码。

如果您使用的是 Eclipse，您可以`UTF-8`通过`*.properties`转到`Window > Preferences > General > Content Types`.

只需确保将`Default encoding`值更改`UTF-8`为如下所示。

![在此处输入图像描述](../Images/133610bfb982fa087cf118e59d495d11.png)

任何文本编辑器都会有类似的设置，包括`vi`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-30T11:19:49.540

由于您的字符串来自属性文件，您的 ResourceBundle 可能是 PropertyResourceBundle 的一个实例，它创建一个 java.util.Properties 的空实例，然后通过“加载”方法之一加载属性文件来填充该实例。PropertyResourceBundle 有两个构造函数，一个接受 InputStream，一个接受 Reader。构造函数只需调用相应的“加载”方法。

请注意，采用 InputStream 的“加载”方法假定属性文件的字符编码为 ISO 8859-1 (Latin1)。您可以通过两种方式解决此问题：

1.  确保正在调用 PropertyResourceBundle 的属性构造函数，该构造函数采用 Reader。使用适当的字符编码构造阅读器。
2.  使用 Unicode 转义符 (\uxxxx) 对属性文件中的非 ASCII 字符进行编码。

# javascript - ajax 加载在 ie 中不起作用

> ID：10814693
> 
> 赞同：0
> 
> 时间：2012-05-30T10:43:27.743
> 
> 标签：javascript, ajax, internet-explorer, jquery

好的，所以我有一个我必须为一个项目做的投资组合，首页只是一个带有加载器的 div，当你登陆首页时，它会检测屏幕大小并选择使用 ajax 拉入的内容。

我这样做是因为 iPad/Mobile 网站非常简单，而且我没有足够的时间制作另一个网站，所以它只是一个非常简单的版本。

我的问题是它在 Internet Explorer 中根本不起作用。它似乎加载了内容，但加载后没有做任何功能，例如应用插件和隐藏加载器。

当它开始计算图像时，我有一种感觉它崩溃了，所以我想知道我是否可以使用 Modernizer 来检测它的 Internet Explorer 并执行更简单的加载功能，还是我的代码有问题？

该网站的链接是[http://chris-g.dmlive.co.nz/](http://chris-g.dmlive.co.nz/)

并且加载函数如下

```
function loadSites(){

    var $winHeight = $window.height();  
    var $winWidth = $window.width();    

        if($window.width() >= 1025) {
            // is desktop so load all scripts and set heights to window height
            var $loadCont = $('.full-page');                
            var sourceTarget = '#ninja';
            var pageUrl='http://chris-g.dmlive.co.nz/ninja/';

            $loadCont.load(pageUrl+" "+sourceTarget, function(){

                var $slide = $('.slide');
                var $ninja = $('#ninja');

                //var $imgs = $(this).find("img");
                var $imgs = $ninja.find("img");
                $imgs.hide();
                var loadCounter = 0;
                var nImages = $imgs.length;
                $imgs.load(function () {
                    loadCounter++;
                    if(nImages === loadCounter) {

                        // all the images have loaded
                        // reveal them, remove the loading indicator
                        $imgs.show(); 
                        $slide.css({'height':$winHeight});  
                        $('#ninja-content').show();
                        $('.page-loader').fadeOut(500);                         
                        $ninja.interactiveScrolling();
                        $('#intro').parallaxScrolling();
                        $('#contact-form').formValidation();                            
                        $('#portfolio').portfolioAnimations();
                        callPopAnimations();

                    }

                // trigger load event if images have
                // been cached by the browser
                }).each(function () {
                    if(this.complete) {
                        $(this).trigger("load");   
                    }
                }); 

            }), function(){

            };  // end ajax load

        } else {
            // is a touch device so load in the stripped back site
            var $loadCont = $('.full-page');                
            var sourceTarget = '#basic-content';
            var pageUrl='http://chris-g.dmlive.co.nz/basic-page/';

            $loadCont.load(pageUrl+" "+sourceTarget, function(){

                var $basicContent = $('#basic-content');

                //var $imgs = $(this).find("img");
                var $imgs = $basicContent.find("img");
                $imgs.hide();
                var loadCounter = 0;
                var nImages = $imgs.length;
                $imgs.load(function () {
                    loadCounter++;
                    if(nImages === loadCounter) {

                        // all the images have loaded
                        // reveal them, remove the loading indicator
                        $imgs.show(); 
                        $('#portfolio').loadProjectBasic();
                        $('#contact-form').formValidation();    
                        $('.page-loader').fadeOut(500);
                        $('#ninja-content').show();
                    }

                // trigger load event if images have
                // been cached by the browser
                }).each(function () {
                    if(this.complete) {
                        $(this).trigger("load");   
                    }
                }); 

            }); // end ajax load

        }   // end if window width  

}   // end loadSites 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-02T21:52:43.953

好的，所以我最终在头脑中制作了一个变量，并决定如果您使用 Internet Explorer，您将不会获得预加载，有点 hacky 但需要完成它，因为它是一个学校作业的网站。

```
<script>isExplorer = false;</script>    
<!--[if IE]>
    <script>isExplorer = true;</script>
<![endif]-->    

and then adding an if statement to my jQuery 

    function loadSites(callback){

        var $winHeight = $window.height();  
        var $winWidth = $window.width();    

            if($window.width() >= 1025) {
                // is desktop so load all scripts and set heights to window height
                var $loadCont = $('.full-page');                
                var sourceTarget = '#ninja';
                var pageUrl='http://chrisgjones.com/ninja/';

                $loadCont.load(pageUrl+" "+sourceTarget, function(){

                    var $slide = $('.slide');
                    var $ninja = $('#ninja');
                    var $ninjaCont = $('#ninja-content');
                    var $pageLoader = $('.page-loader');                    
                    var $intro = $('#intro');
                    var $contactForm = $('#contact-form');
                    var $portfolio = $('#portfolio');

                    if(isExplorer == true){

                        //alert('is ie');
                        $slide.css({'height':$winHeight});  
                        $ninjaCont.show();
                        $ninja.interactiveScrolling();
                        $intro.parallaxScrolling();
                        $contactForm.formValidation();                          
                        $portfolio.loadProjectBasic();
                        //callPopAnimations();
                        $pageLoader.hide();                                                 

                    }else if(isExplorer == false){

                        //alert('is not ie');
                        //var $imgs = $(this).find("img");
                        var $imgs = $ninja.find("img");
                        $imgs.hide();
                        var loadCounter = 0;
                        var nImages = $imgs.length;
                        $imgs.load(function () {
                            loadCounter++;
                            if(nImages === loadCounter) {

                                // all the images have loaded
                                // reveal them, remove the loading indicator
                                $imgs.show(); 
                                $slide.css({'height':$winHeight});  
                                $ninjaCont.show();
                                $ninja.interactiveScrolling();
                                $intro.parallaxScrolling();
                                $contactForm.formValidation();                          
                                $portfolio.portfolioAnimations();
                                callPopAnimations();
                                //$('.page-loader').hide();     
                                callback.call();                                                    

                            }   // end counter

                        // trigger load event if images have
                        // been cached by the browser
                        }).each(function () {
                            if(this.complete) {
                                $(this).trigger("load");   
                            }   // end cache trigger load
                        }); // end each 

                    }   // end if is explorer or good browser

                }); // end load

            } else {
                // is a touch device so load in the stripped back site
                var $loadCont = $('.full-page');                
                var sourceTarget = '#basic-content';
                var pageUrl='http://chrisgjones.com/basic-page/';

                $loadCont.load(pageUrl+" "+sourceTarget, function(){

                    var $basicContent = $('#basic-content');

                    //var $imgs = $(this).find("img");
                    var $imgs = $basicContent.find("img");
                    $imgs.hide();
                    var loadCounter = 0;
                    var nImages = $imgs.length;
                    $imgs.load(function () {
                        loadCounter++;
                        if(nImages === loadCounter) {

                            // all the images have loaded
                            // reveal them, remove the loading indicator
                            $imgs.show(); 
                            $('#portfolio').loadProjectBasic();
                            $('#contact-form').formValidation();    
                            $('.page-loader').hide();
                            $('#ninja-content').show();
                        }

                    // trigger load event if images have
                    // been cached by the browser
                    }).each(function () {
                        if(this.complete) {
                            $(this).trigger("load");   
                        }   // end cache trigger load
                    }); // end each

                }); // end ajax load

            }   // end if window width  

    }   // end loadSites 
```

# php - PHP 中的 @fopen 不支持相对 URL

> ID：10814698
> 
> 赞同：0
> 
> 时间：2012-05-30T10:43:58.667
> 
> 标签：php, url, fopen, relative-path

为什么 PHP 不支持相对 URL？

这可以用其他编程语言来完成吗？那服务器端可以微快速检测吗？

```
$urla="http://cdn.domain.net";
$urlb="//cdn.domain.net";

if(@fopen($urla,"r")){
// I work
}

if(@fopen($urlb,"r")){
// I do not work
} 
```

既然我提到了它，许多主要的 PHP 不能像这样工作，或者由于服务器端的原因我猜不支持 - 也许 C 库中需要修改 CORE PHP？（[什么是相对 URL？](https://stackoverflow.com/questions/550038/is-it-valid-to-replace-http-with-in-a-script-src-http)）

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-30T10:45:08.480

> 为什么 PHP 不支持相对 URL？

因为它没有一个相对的基本 URL（尽管*可以*从请求 URI 计算出来……但仅适用于由 HTTP 请求触发的 PHP 脚本）。

…如果它支持相对 URI，`fopen`那么它就不能支持相对文件路径，因为它们无法区分。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-30T11:23:29.413

> 为什么 PHP 不支持相对 URL？

相对 URL 支持需要相对 URL 相对的基本 URL。请参见[*4.2。*RFC 3986 URI 通用语法中的*相对参考*](https://www.rfc-editor.org/rfc/rfc3986#section-4.2)。

考虑到这一点，有一个可用的 PHP 库实际上确实支持相对 URL，并且它与`fopen`. 它被称为[`Net_URL2`](http://pear.php.net/package/Net_URL2/)：

```
require_once('Net/URL2.php'); # or configure your autoloader

$baseUrl = 'http://cdn.domain.net';

$hrefRelativeOrAbsolute = '//cdn.domain.net';

$baseUrl = new Net_URL2($baseUrl);

$urlAbsolute = (string) $baseUrl->resolve($hrefRelativeOrAbsolute); 
```

参见[使用 php domdocument 添加根路径的问题](https://stackoverflow.com/questions/7442292/problem-with-adding-root-path-using-php-domdocument)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-30T10:57:39.053

此功能所需的 url 中的协议指示，它是一种语言结构，指示包装器，与链接中的示例不同。

为什么需要它以及如何使用可以在 php 文档[php wrappers中找到](http://www.php.net/manual/en/wrappers.php)

# c++ - C++ 可变参数模板异常示例

> ID：10814705
> 
> 赞同：12
> 
> 时间：2012-05-30T10:44:32.500
> 
> 标签：c++, templates, gcc, c++11, variadic

下面的构造是什么意思？

```
#include <iostream>

template <int ...> struct s;

int main() {
    int i = s<,>::xxx;

    std::cout << i << std::endl;
} 
```

它由 gcc 4.4.5+ 编译，执行时输出`0`。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-05-30T11:07:42.650

我将程序重写为：

```
template <int ...> struct s;

int main() {
    int i = s<,>::xxx;

    return i;
} 
```

并使用`-S`-switch 对其进行编译，以获得我清理为以下内容的程序集输出：

```
main:
        pushq   %rbp
        movq    %rsp, %rbp
        movl    -4(%rbp), %eax
        popq    %rbp
        ret 
```

现在，我的 asm 有点生疏了，但唯一重要的代码似乎是`movl -4(%rbp), %eax`，它将返回值设置为它可以从中读取的任何内容`i`。换句话说，程序只是简单地返回`main`进入函数时堆栈顶部的任何内容。这似乎证实了@jrok 的评论，即初始化`i`被某种方式忽略了。没有为`s<,>::xxx`mystical 表达式生成代码。

底线；这看起来像一个编译器错误。编译器应该给出错误消息。

确凿的旁注：我得到了相同的程序集输出`int main() { int i; return i; }`。

# php - 如何在 MediaFire 中创建文件管理器

> ID：10814706
> 
> 赞同：0
> 
> 时间：2012-05-30T10:44:33.967
> 
> 标签：php, ftp, file-manager

我想知道如何创建一个文件管理器来上传、下载、编辑等文件，例如 MediaFire、Rapidshare 中的文件。谁能告诉我怎么做？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-30T10:49:22.433

从我的角度来看，您需要以下内容：

*   云中的服务器结构。
*   一个很好的网络应用程序。

现在，尝试在您的问题中更具体一些会很有趣。

问候！

# php - Zend 菜单扩展

> ID：10814708
> 
> 赞同：0
> 
> 时间：2012-05-30T10:44:38.147
> 
> 标签：php, zend-framework, navigation, zend-view, zend-navigation

我正在一个带有“普通”菜单和子菜单的网站上工作。

这是引导程序中适用于导航的方法：

**引导程序.php**

```
protected function _initNavigation()
{        
    $view = $this->getResource('view');

    $view->addHelperPath(APPLICATION_ROOT . '/library/Pcw/View/Helper/Navigation', 'Pcw_View_Helper_');          

    $config = new Zend_Config_Xml(APPLICATION_PATH . '/configs/navigation.xml', 'nav');

    $navigation = new Zend_Navigation($config);

    $view->navigation($navigation);

    $menuPartial = array('menu.phtml', 'default');        
    $view->navigation()->menu()->setPartial($menuPartial);

    $subMenuPartial = array('submenu.phtml', 'default');        
    $view->navigation()->subMenu()->setPartial($subMenuPartial);
} 
```

**library/Pcw/View/Helper/Navigation/SubMenu.php**

```
class Pcw_View_Helper_Navigation_SubMenu extends Zend_View_Helper_Navigation_Menu
{
    public function subMenu(Zend_Navigation_Container $container = null)
    {
        return parent::menu($container);
    }
} 
```

根据 Stackoverflow 上的文档和主题，这种结构应该可以工作，但是会出现以下错误：

```
Fatal error:  Uncaught exception 'Zend_Navigation_Exception' with message 'Bad method call: Unknown method Zend_Navigation::subMenu' in /home/prj/domains/prjon.nl/library/Zend/Navigation/Container.php:366
Stack trace:
#0 [internal function]: Zend_Navigation_Container-&gt;__call('subMenu', Array)
#1 [internal function]: Zend_Navigation-&gt;subMenu()
#2 /home/prj/domains/prjon.nl/library/Zend/View/Helper/Navigation/HelperAbstract.php(503): call_user_func_array(Array, Array)
#3 /home/prj/domains/prjon.nl/library/Zend/View/Helper/Navigation.php(132): Zend_View_Helper_Navigation_HelperAbstract-&gt;__call('subMenu', Array)
#4 /home/prj/domains/prjon.nl/Application/Bootstrap.php(410): Zend_View_Helper_Navigation-&gt;__call('subMenu', Array)
#5 /home/prj/domains/prjon.nl/Application/Bootstrap.php(410): Zend_View_Helper_Navigation-&gt;subMenu()
#6 /home/prj/domains/prjon.nl/library/Zend/Application/Bootstrap/BootstrapAbstract.php(669): Bootstrap-&gt;_initNavigation() in /home/prj/domains/prjon.nl/library/Zend/Navigation/Container.php on line 366 
```

错误很明显：找不到和调用方法 subMenu，但我创建了负责处理子菜单的助手。

有谁知道我做错了什么？

提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-31T09:20:11.077

这就是我这样做的方式，希望它有意义。我省略了 ACL 和 Auth 集成（这是一个很棒的功能）。

假设我想要一个带有“home”和“admin”的顶部菜单，以及“admin”部分的子菜单。

在我的引导程序中：

```
protected function _initNavigation()
{
    $container = new Zend_Navigation();

    // or in xml etc
    $pages = array(
                array('label' => 'Home', 'controller' => 'index', 'action' => 'index'),
                array('label' => "Admin", 'controller' => 'admin', 'id' => 'admin', 'pages' => array(
                        array('label' => "Add an account", 'controller' => 'admin', 'action' => 'createuser'),
                        array('label' => "Clear cache", 'controller' => 'admin', 'action' => 'clearcache')
                        )
                )
    );

    $container->addPages($pages);

    Zend_Registry::set('Zend_Navigation', $container);
    return $container;
} 
```

然后在我的布局中显示主菜单：

```
$container = Zend_Registry::get('Zend_Navigation');
$this->navigation()->menu()->renderMenu($container,array('minDepth' => 0, 'maxDepth' => 0)) 
```

（检查文档以获取所有 renderMenu 选项，非常灵活。您可以使用 'maxDepth' => 1 轻松使用管理子菜单进行翻转）

然后在我的管理模板中，显示子菜单：

```
$container = Zend_Registry::get('Zend_Navigation');
$found = $container->findById('admin');
echo $this->navigation()->menu()->renderMenu($found,array('minDepth' => 0)) 
```

这样，视图渲染与引导程序分离，我不需要局部视图或自定义视图助手。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-31T07:19:26.310

我只是使用不同的路径语法，它适用于我的视图助手，addHelper() 应该与导航助手一起使用。

```
$view->addHelperPath(APPLICATION_ROOT . '/library/Pcw/View/Helper/Navigation', 'Pcw_View_Helper_'); 
```

改成：

```
$view->addHelperPath('/../library/Pcw/View/Helper/Navigation', 'Pcw_View_Helper_'); 
```

对我有用，希望对你也有用。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-24T10:20:15.673

我在插件文件中的代码（ROOT/Application/SubmenuPlugin.php）：

```
$view = Zend_Controller_Front::getInstance()->getParam('bootstrap')->getResource('view');

$submenuPartial = array('submenus/'.$currentControllerName.'.phtml', 'default'); //$currentControllerName defined a couple of lines ago             

$view->addHelperPath(APPLICATION_ROOT . '/library/Pcw/View/Helper', 'Pcw_View_Helper_');
$view->navigation()->submenu()->setPartial($submenuPartial); 
```

位置子菜单：ROOT/Application/views/scripts/submenus/

位置子菜单查看助手：ROOT/library/Pcw/View/helper/Submenu.php

这对你有帮助吗？

# iphone - 如何为图像设置动画，就像它的到来一样。例如：在天空中移动。苹果手机

> ID：10814711
> 
> 赞同：0
> 
> 时间：2012-05-30T10:44:48.573
> 
> 标签：iphone, ios, macos, ipad, sdk

**如何为图像设置动画，使其看起来像是向用户走来。例如：在天空中移动**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-30T11:09:33.237

请查看此解决方案

```
-(IBAction)showSignInView:(id)sender{
    signInView.hidden = NO;
    [self initialDelayEnded:Your View ];
}
-(void)initialDelayEnded:(UIView *)view {
    view.transform = CGAffineTransformScale(CGAffineTransformIdentity, 0.3, 0.3);
    view.alpha = 1.0;
    [UIView beginAnimations:nil context:nil];
    [UIView setAnimationDuration:kTransitionDuration/1.5];
    [UIView setAnimationDelegate:self];
    [UIView setAnimationDidStopSelector:@selector(bounce1AnimationStopped:)];
    view.transform = CGAffineTransformScale(CGAffineTransformIdentity, 1.1, 1.1);
    [UIView commitAnimations];
}

- (void)bounce1AnimationStopped:(UIView *)view {
    [UIView beginAnimations:nil context:nil];
    [UIView setAnimationDuration:kTransitionDuration/2];
    [UIView setAnimationDelegate:self];
    [UIView setAnimationDidStopSelector:@selector(bounce2AnimationStopped:)];
    view.transform = CGAffineTransformScale(CGAffineTransformIdentity, 1.0, 1.0);
    [UIView commitAnimations];
}

- (void)bounce2AnimationStopped:(UIView *)view {
    [UIView beginAnimations:nil context:nil];
    [UIView setAnimationDuration:kTransitionDuration/2];
    view.transform = CGAffineTransformIdentity;
    [UIView commitAnimations];
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-30T10:58:08.797

使用淡入和淡出动画图像 -

```
- (IBAction)showHideView:(id)sender
{
// Fade out the view right away
[UIView animateWithDuration:1.0
    delay: 0.0
    options: UIViewAnimationOptionCurveEaseIn
    animations:^{
         imageView.alpha = 0.0;
    }
    completion:^(BOOL finished){
        // Wait one second and then fade in the view
        [UIView animateWithDuration:1.0
             delay: 1.0
             options:UIViewAnimationOptionCurveEaseOut
             animations:^{
                imageView.alpha = 1.0;
             }
             completion:nil];
    }];
} 
```

请参阅 - [http://developer.apple.com/library/ios/#documentation/windowsviews/conceptual/viewpg_iphoneos/animatingviews/animatingviews.html](http://developer.apple.com/library/ios/#documentation/windowsviews/conceptual/viewpg_iphoneos/animatingviews/animatingviews.html)

# html - 在 Android 应用程序中更快地加载 HTML 文件

> ID：10814712
> 
> 赞同：-1
> 
> 时间：2012-05-30T10:44:49.363
> 
> 标签：html, performance, load

通过单击图像立即加载特定的 HTML 页面，但加载需要几秒钟。请告诉我如何尽快避免/减少等待时间和显示页面。使用了 CSS 并修改了 HTML 页面以使其更轻，但仍然没有用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-30T22:58:01.260

[使用Photoshop](http://inobscuro.com/tutorials/optimizing-images-for-web-35/)优化您的图像。如果您没有 Photoshop，请使用[在线服务](http://www.imageoptimizer.net/Pages/Home.aspx)。

不要使用任何内联 CSS 或 JavaScript，指向外部文件。

例如

```
<link rel="stylesheet" type="text/css" href="test.css" />
<SCRIPT language="JavaScript" SRC="http://someplace.com/jxt1.js"></SCRIPT> 
```

[将您的 JavaScript](https://stackoverflow.com/q/196702/773263)移到

```
</body> 
```

导致 HTML 在脚本运行之前加载。

# javascript - jQuery 按内容模式选择

> ID：10814715
> 
> 赞同：0
> 
> 时间：2012-05-30T10:45:06.990
> 
> 标签：javascript, jquery, regex, string, jquery-selectors

我需要选择 < div > 中具有模式匹配时间戳格式的所有段落 < p >，例如：

```
<p>[22:48]</p> 
```

或者

```
<p>[22:48 - Subject Line]</p> 
```

这怎么能用 jQuery 来完成？

**更新**

时间的有效格式：

```
1:24
24:59
1:24:01 
```

时间格式无效：

```
24:70 [70 is not possible]
56:123 [last segment must have 2 digits from 00 - 59] 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-30T10:47:39.913

```
$('div p').filter(function(){
    return $(this).text().match(/\[\d{2}:\d{2}.*\]/);
}); 
```

[**现场演示**](http://jsfiddle.net/nmhL5/)

**更新：**

使用这个`regex`：

```
/^\[\d*:?[0-6]?[0-9]:[0-6][0-9]\D?.*\]$/ 
```

# android - Android：以编程方式在RelativeLayout中添加textViews

> ID：10814718
> 
> 赞同：2
> 
> 时间：2012-05-30T10:45:16.110
> 
> 标签：android, android-layout, textview

我有一个 RelativeLayout，我想插入一些 textViews。

这是代码：

```
 <RelativeLayout
    android:id="@+id/JournalSearchListView"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:minHeight="30dp"
    android:layout_below="@+id/JournalsSearchTextView"
    android:orientation="vertical" 
    android:cacheColorHint="#00000000">

    <ProgressBar
        android:id="@+id/JournalSearchProgressBar"
        style="?android:attr/progressBarStyleSmall"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_centerHorizontal="true"
        android:layout_centerVertical="true" />

</RelativeLayout> 
```

以及我如何以编程方式执行此操作：

```
RelativeLayout journals = (RelativeLayout) findViewById(R.id.JournalSearchListView);
RelativeLayout.LayoutParams params1 = new RelativeLayout.LayoutParams(LayoutParams.WRAP_CONTENT, LayoutParams.WRAP_CONTENT);  
for (int i=0;i< authorNames.size();i++) {
    TextView tv = new TextView(this);
    tv.setId(i); 
    tv.setText(authorNames.get(i));
    tv.setTextColor(Color.BLACK);
    Integer a = tv.hashCode();
    map.put(a,authorNames.get(i));
    params1.addRule(RelativeLayout.BELOW, tv.getId());
    journals.addView(tv, params1);
    tv.setOnClickListener(new OnClickListener() {
         public void onClick(View v) {
             System.out.println("Clicked "+ map.get(v.hashCode()) );    
         }
    });   
} 
```

但问题是每个 textView 都与其他 textView 处于相同的位置。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-30T10:50:49.750

`params1.addRule(RelativeLayout.BELOW, tv.getId());`

您将其设置为低于自身？
如果您希望它们在彼此下方，请这样做：

```
RelativeLayout journals = (RelativeLayout);
findViewById(R.id.JournalSearchListView);
LinearLayout lL = new LinearLayout(context);
lL.setOrientation(LinearLayout.VERTICAL);

for (int i=0;i< authorNames.size();i++) {
    TextView tv = new TextView(this);
    tv.setId(i); 
    tv.setText(authorNames.get(i));
    tv.setTextColor(Color.BLACK);
    Integer a = tv.hashCode();
    map.put(a,authorNames.get(i));

    if(i!=0){
        params1.addRule(RelativeLayout.BELOW, i-1);
    }

    tv.setOnClickListener(new OnClickListener() {
        public void onClick(View v) {
            System.out.println("Clicked "+ map.get(v.hashCode()) ); 
        }
    });

    lL.addView(tv);   

}

journals.addview(lL); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-30T10:49:01.963

```
params1.addRule(RelativeLayout.BELOW, tv.getId());
journals.addView(tv, params1); 
```

这基本上是说*“将文本视图放在自身下方”*。这当然是行不通的，所以所有的视图都将在RelativeLayout 中采用默认位置。使用您之前添加的 TextView*的 id（或者如果您插入第一个元素，则使用进度条的 id）*。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-12-03T12:09:52.863

```
// Every UI object must have a layout parameter
        int widthContent = RelativeLayout.LayoutParams.WRAP_CONTENT;
        int heightContent = RelativeLayout.LayoutParams.WRAP_CONTENT;

        // Create relative layout
        RelativeLayout.LayoutParams rlParamsName = new RelativeLayout.LayoutParams(widthContent,heightContent);
        rlParamsName.setMargins(10, 0, 0, 0);   

        // Create a linear layout to add new object as vertical
        LinearLayout lL = new LinearLayout(context);
        lL.setOrientation(LinearLayout.VERTICAL);

        for (int i=0;i< 3;i++) {

            // Every time create new object of text view 
            TextView objDonateTextView = new TextView(this);
            objDonateTextView.setLayoutParams(rlParamsName);
            objDonateTextView.setText("Donate");
            objDonateTextView.setId(i);
            objDonateTextView.setTypeface(null, Typeface.BOLD);
            objDonateTextView.setTextColor(0xFF000000);

            lL.addView(objDonateTextView);

        }

        //Add button number two to the activity.
        RelativeLayout rl = (RelativeLayout)findViewById(R.id.row_special);   
        rl.addView(lL); 
```

//vKj

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-30T10:48:05.463

可以使用 addRule 功能相同

```
 RelativeLayout layout = (RelativeLayout)findViewById(R.id.slidingDrawerContent);
 RelativeLayout.LayoutParams lp = new RelativeLayout.LayoutParams(
 RelativeLayout.LayoutParams.WRAP_CONTENT, RelativeLayout.LayoutParams.WRAP_CONTENT );

    for (int i=0; i<4; i++) {
         Button btn = new Button(this);
         btn.setId(i);
         btn.setText("some_text");

         lp.addRule(RelativeLayout.RIGHT_OF, <Id>);

         layout.addView(tv2, lp); 
    } 
```

# machine-learning - kNN：训练、测试和验证

> ID：10814731
> 
> 赞同：7
> 
> 时间：2012-05-30T10:45:53.717
> 
> 标签：machine-learning, computational-geometry, classification, knn

我从 10 个类中提取图像特征，每个类有 1000 张图像。由于我可以提取 50 个特征，因此我正在考虑在这里找到最佳的特征组合。训练集、验证集和测试集划分如下：

```
Training set = 70%
Validation set = 15%
Test set = 15% 
```

我在验证集上使用前向特征选择来找到最佳特征组合，最后使用测试集来检查整体准确性。有人可以告诉我我做得对吗？

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2012-05-30T12:48:23.257

因此，*kNN*是构建/测试监督机器学习模型的一般工作流程的一个*例外。*特别是，通过 kNN 创建*的模型*只是放置在某个度量空间中的可用标记数据。

换句话说，对于 kNN，*没有训练步骤，因为没有*要构建的模型。模板匹配和插值是 kNN 中发生的所有事情。

*也没有验证步骤*。验证根据训练数据测量模型准确性，作为迭代次数（训练进度）的函数。该经验曲线的向上移动证明了过度拟合，并指示了训练应该停止的点。换句话说，因为没有建立模型，所以没有什么要验证的。

但是您仍然可以测试——即，使用模型中隐藏了目标（标签或分数）的数据来评估预测的质量。

但即使是测试，kNN 与其他监督机器学习技术也略有不同。特别是，对于 kNN，预测的质量当然取决于数据量，或者更准确地说是密度（每单位体积的点数）——即，如果您要通过平均 2-3 来预测未知值点最接近它，那么如果您的点接近您希望预测的点，它会有所帮助。因此，*保持测试集的大小较小*，或者更好的是使用 k 折交叉验证或留一法交叉验证，这两种方法都可以为您提供更彻底的模型测试，但不会以减小大小为代价你的 kNN 邻居人口。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2018-10-15T10:52:01.983

kNN is not trained. All of the data is kept and used at run-time for prediction, so it is one of the most time and space consuming classification method. Feature reduction can reduce these problems. Cross validation is a much better way of testing then train/test split.

# azure - 数据库抽象-Azure Table

> ID：10814732
> 
> 赞同：-1
> 
> 时间：2012-05-30T10:46:02.763
> 
> 标签：azure, azure-table-storage

我将数据存储在 Azure 表中。在当前工作代码中，我将表存储连接放在控制器中。但老板似乎对此并不满意。我们需要以控制器独立于获取输入的方式来抽象数据库。将来我们可能会改用普通的Sql。这就是为什么老板肯定想要这种抽象。让迁移更容易！

任何帮助或提示。tnx

已编辑.... 在使用 azure 表存储时寻找最佳实践。我真的需要制作一个干净的控制器并且只使用函数调用。寻找任何教程。tnx 提前

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-30T11:09:42.757

在抽象出 Windows Azure 表存储时应该小心，尤其是当您对数据库使用相同的抽象时。表存储不是数据库。

数据库允许您使用事务，但表存储中的“事务”完全不同（例如，单个分区上限制为 100 条记录）。数据库有索引，但在表存储中，您需要使用分区键和行键进行优化。表存储实体不能大于 1MB，查询时间有限，...（更多信息在这里：http: [//msdn.microsoft.com/en-us/library/windowsazure/dd179338.aspx](http://msdn.microsoft.com/en-us/library/windowsazure/dd179338.aspx)）

如果您将所有这些隐藏在抽象层中并使其像数据库一样工作，您可能无法充分利用表存储的功能。如果您仍然需要创建一个抽象，请创建一个涵盖所有表存储功能并处理其限制的抽象。

一个好的起点是查看 AzureToolkit：[http ://azuretoolkit.codeplex.com/SourceControl/changeset/view/46c9fb9ff82a#Source%2fAzureToolkit%2fIAzureTable.cs](http://azuretoolkit.codeplex.com/SourceControl/changeset/view/46c9fb9ff82a#Source%2fAzureToolkit%2fIAzureTable.cs)

# php - PHP utf-8 按字符读取文件

> ID：10814733
> 
> 赞同：0
> 
> 时间：2012-05-30T10:46:04.657
> 
> 标签：php, utf-8

我在处理带有 utf-8 编码的 php 文件时遇到了一些严重的问题。我需要逐个字符或逐行读取文件，并带有固定的小块。我尝试使用**fgetc**和**fgets**但以 utf8 编码的字符被分成几个“*字符*”而不是一个。我正在尝试找到一个解决方案，它甚至可能是一个仅包含 Unicode 字符的小“*字符串*”，但必须从文件中正确读取。

我想使用的伪代码：

```
while ( ($c == read_utf8_char($file)) != false ) {
    if ($c == 'ó') do_something();
} 
```

我会很感激你的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-30T10:51:27.967

```
function mb_str_split($string) { 
    return preg_split('/(?<!^)(?!$)/u', $string ); 
} 

$chars = mb_str_split($file);

foreach ($chars as $c) {
    if ($c == 'ó') do_something();
} 
```

*~ 来源：[http ://www.php.net/manual/en/function.mb-split.php#99851](http://www.php.net/manual/en/function.mb-split.php#99851)*

# java - DataSource.setLoginTimeout 和 DriverManager.setLoginTimeout 全局？

> ID：10814735
> 
> 赞同：3
> 
> 时间：2012-05-30T10:46:16.187
> 
> 标签：java, database, jdbc

当我在数据源上设置登录超时时，它有什么作用？它会在后台调用 DriverManager.setLoginTimeout() 吗？问这个是因为我很好奇是否真的可以设置每个数据源的登录超时。假设我有不同的 DBMS 想要连接，并且这些 DB 具有不同的响应能力，那么期望不同的连接超时容限是合理的，对吧？

如果答案是肯定的，那么 DriverManager.setLoginTimeot() 方法是否有充分的理由是静态的？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-30T13:58:05.390

This property should be per `DataSource` (although as far as I can see there is no explicit mention of this in the JDBC spec). The DataSource implementation of some drivers don't even use DriverManager when creating connections.

Be aware though that the value set on the DriverManager will need to be explicitly used by the driver, as DriverManager itself does nothing with the value (except store it). For example the PostgreSQL driver only uses the DriverManager value if no explicit timeout was configured in the JDBC url, Properties object or DataSource properties.

The reason for `DriverManager.setLoginTimeout()` is that you do not control which Driver is actually being used by the DriverManager(*) so the only way to control it is through the DriverManager.

(*) except of course by the drivers you added to the classpath (and in Java 5 or earlier: which you explicitly loaded).

# javascript - 推迟 Google Maps API 回调

> ID：10814738
> 
> 赞同：1
> 
> 时间：2012-05-30T10:46:28.987
> 
> 标签：javascript, jquery, google-maps, google-maps-api-3, jquery-deferred

我目前正在构建一个使用 google maps api v3 的小部件。它的设置过程如下所示：

1.  注入 jQuery
2.  注入html结构
3.  注入 googlemaps api（仅加载 bootstrap .js 文件，该文件再次加载实际的 main.js）&& 加载地图数据
4.  加载 googlemaps api 后立即设置基本地图
5.  加载地图数据后立即将其应用到地图上（例如设置标记）

我的问题是我可以设置一个[回调](https://developers.google.com/maps/documentation/javascript/tutorial#asynch)方法以在 google api 完成加载时触发。我想开始加载我的数据，一旦加载地图并且数据请求成功（或失败）应用数据。我正在使用[jQuery 的 Deferred Object](http://api.jquery.com/category/deferred-object/)，代码看起来像这样：

主要部分：

```
jQuery.when(
    fn.getData()
)
.then(function(resolvedArgs) {
    gmap.setData(resolvedArgs['data']);
    gmap.addMarkerOverlay();
})
.fail(function(jqXHR, textStatus) {
    var message = textStatus + ': loading data';
    fn.showInfoBox(message);
}); 
```

GoogleMaps 部分（同源策略解决方法，这是负责加载外部脚本的函数的基本返回）：

```
return jQuery.Deferred(function(deferred) {
    var scriptTag = document.createElement('script');
    scriptTag['type'] = 'text/javascript';
    scriptTag['src'] = 'googlemapsapiurl&callback=setupGoogleMap';
    scriptTag['async'] = true;
    document.getElementsByTagName("head")[0].appendChild(scriptTag);
    scriptTag['onload'] = scriptTag['onreadystatechange'] = function() {
        if (!this.readyState || this.readyState === "loaded" || this.readyState === 'complete') {
            deferred.resolve();
        }
    };
}).promise(); 
```

第二个谷歌地图部分：

```
var setupGoogleMap = function() {
    jQuery('.container').trigger('googleMapsReady');
}; 
```

和...

```
jQuery('.container').on('googleMapsReady', function(event) {
    fn.setupGoogleMap();
}); 
```

我不知道将 google api 请求放在哪里，因为它是 google 端的一个两步加载过程。也许我可以阻止jQuery Deferred的默认成功resolve（）调用并在google api回调方法中解决Deferred？有任何想法吗？

# sql - 使用 JOIN 查询更快地删除

> ID：10814745
> 
> 赞同：3
> 
> 时间：2012-05-30T10:46:44.757
> 
> 标签：sql, join, oracle10g, sql-delete

我在 Oracle 10g 中有这个查询：

```
 DELETE FROM "BMAN_TP1"."CELLS_ITEM" TABLE1
 WHERE EXISTS (
     SELECT "CELLS_ITEM".*
     FROM "BMAN_TP1"."CELLS_ITEM"
     INNER JOIN "BMAN_TP1"."CELLS" ON ("CELLS_ITEM"."SET_ID"="CELLS"."SET_ID") AND ("CELLS_ITEM"."META_CELL_ID"="CELLS"."META_CELL_ID")
     INNER JOIN "BMAN_TP1"."META_CELLS" ON ("CELLS"."META_CELL_ID"="META_CELLS"."META_CELL_ID")
     WHERE ("META_CELLS"."UDA_ID" = variable)
     AND (TABLE1."SET_ID" = "CELLS_ITEM"."SET_ID")
     AND (TABLE1."META_CELL_ID" = "CELLS_ITEM"."META_CELL_ID")
) 
```

目前删除 50K 记录大约需要 10 秒（表中大约有 100K 记录）

我知道它会重复 100K 次选择查询，这会减慢它的速度。
TABLE1 也有两个字段的 PK，这使事情变得更加复杂。

有什么想法可以让它更快吗？

编辑：

尝试了这个，但它几乎相同：

```
DELETE FROM "BMAN_TP1"."CELLS_ITEM" TABLE1
WHERE EXISTS (
    SELECT "META_CELL_ID"
    FROM "BMAN_TP1"."META_CELLS"
    WHERE ("META_CELLS"."UDA_ID"=55823)
    AND (TABLE1."META_CELL_ID" = "META_CELLS"."META_CELL_ID")
) 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-30T11:07:41.510

在不知道您的架构的情况下，很难说，但是在子查询中使用要从中删除的表似乎没用。我会写：

```
DELETE FROM BMAN_TP1.CELLS_ITEM TABLE1
WHERE EXISTS (
    SELECT CELLS.META_CELL_ID
    FROM BMAN_TP1.CELLS 
    INNER JOIN BMAN_TP1.META_CELLS ON (CELLS.META_CELL_ID=META_CELLS.META_CELL_ID)
    WHERE (META_CELLS.UDA_ID = variable)
        AND (TABLE1.SET_ID = CELLS_ITEM.SET_ID)
        AND (TABLE1.META_CELL_ID = CELLS_ITEM.META_CELL_ID)
) 
```

**编辑**：以上内容现已过时，因为您修改了您的`DELETE`声明。请忽略它。

但是另一个想法：如果在 CELLS_ITEM 上定义了触发器，您可以尝试禁用它们。他们可以长时间咀嚼更大的删除，我是第一手知道的。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-30T11:02:40.610

第一个可能的答案：只需在 SET_ID、META_CELL_ID 上的 CELLS_ITEM 表中添加一个索引

第二个可能的答案：尝试标准 SQL 语法：

```
DELETE "BMAN_TP1"."CELLS_ITEM"
  FROM BMAN_TP1"."CELLS_ITEM"  
 INNER JOIN "BMAN_TP1"."CELLS" ON ("CELLS_ITEM"."SET_ID"="CELLS"."SET_ID") AND ("CELLS_ITEM"."META_CELL_ID"="CELLS"."META_CELL_ID")  
 INNER JOIN "BMAN_TP1"."META_CELLS" ON ("CELLS"."META_CELL_ID"="META_CELLS"."META_CELL_ID")  
 WHERE ("META_CELLS"."UDA_ID" = variable) 
```

-- **编辑**

好的，如果 Oracle 确实不接受标准 SQL 方式（听起来很奇怪），那么您可以尝试使用 IN：

```
DELETE "BMAN_TP1"."CELLS_ITEM"
 WHERE (SET_ID, META_CELL_ID) IN (SELECT SET_ID, META_CELL_ID
                                    FROM BMAN_TP1"."CELLS_ITEM"  
                                         INNER JOIN "BMAN_TP1"."CELLS" ON ("CELLS_ITEM"."SET_ID"="CELLS"."SET_ID") AND ("CELLS_ITEM"."META_CELL_ID"="CELLS"."META_CELL_ID")  
                                         INNER JOIN "BMAN_TP1"."META_CELLS" ON ("CELLS"."META_CELL_ID"="META_CELLS"."META_CELL_ID")  
                                   WHERE ("META_CELLS"."UDA_ID" = variable)  ) 
```

但我认为 EXISTS 查询应该比这个更快......这将使添加索引答案成为您的最佳选择。但可以肯定的是，首先尝试这种新方法。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-30T13:51:33.113

试试这个：

```
DELETE FROM (SELECT TABLE1.* FROM "BMAN_TP1"."CELLS_ITEM" TABLE1
                INNER JOIN (
                    SELECT "META_SET_ID", "META_CELL_ID"
                    FROM "BMAN_TP1"."META_CELLS"
                    WHERE "UDA_ID"=55823
                ) j ON TABLE1."SET_ID" = j."META_SET_ID" AND TABLE1."META_CELL_ID" = j."META_CELL_ID"
            ) 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-06T11:11:53.110

我现在无法测试所以不确定，因为我现在无法访问 Oracle DB，但在某些情况下 rowid 可能会更快：

```
 DELETE "BMAN_TP1"."CELLS_ITEM"
 WHERE rowid IN (SELECT rowid
                                    FROM BMAN_TP1"."CELLS_ITEM"  
                                         INNER JOIN "BMAN_TP1"."CELLS" ON ("CELLS_ITEM"."SET_ID"="CELLS"."SET_ID") AND ("CELLS_ITEM"."META_CELL_ID"="CELLS"."META_CELL_ID")  
                                         INNER JOIN "BMAN_TP1"."META_CELLS" ON ("CELLS"."META_CELL_ID"="META_CELLS"."META_CELL_ID")  
                                   WHERE ("META_CELLS"."UDA_ID" = variable)  ) 
```

# javascript - 使用 Java 脚本 sdk 的 Facebook API 发布操作

> ID：10814748
> 
> 赞同：1
> 
> 时间：2012-05-30T10:47:14.273
> 
> 标签：javascript, facebook-graph-api

我真的在为 facebook api 苦苦挣扎。A 创建了一个应用程序、一个对象和一个操作，我想测试以在我的流中发布，（我知道公开发布必须由 facebook 授权，但作为我的应用程序的管理员，我可以测试它）。但它不工作。这是脚本：

```
<html xmlns="http://www.w3.org/1999/xhtml" dir="ltr" lang="en-US"
  xmlns:fb="https://www.facebook.com/2008/fbml"> 
<head prefix="og: http://ogp.me/ns# subhinajjar: 
              http://ogp.me/ns/apps/subhinajjar#">
<title>OG Tutorial App</title>
<meta property="fb:app_id" content="452488354765730" /> 
<meta property="og:type" content="subhinajjar:article" /> 
<meta property="og:title" content="3eesho" /> 
<meta property="og:image" content="https://3eesho.com/public/admin/logo.png" /> 
<meta property="og:description" content="3eesho reading club" /> 
<meta property="og:url" content="https://3eesho.com/">

<script type="text/javascript">
function postreads()
{
  FB.api(
    '/me/subhinajjar:read?article',
    'post',
    { article: 'https://3eesho.com/articles/2346/-' },
    function(response) {
       if (!response || response.error) {
          alert('Error occured');
       } else {
          alert('read was successful! Action ID: ' + response.id);
       }
    });
 }
</script>
</head>
<body>
<div id="fb-root"></div>
<script>
window.fbAsyncInit = function() {
  FB.init({
    appId      : '452488354765730', // App ID
    status     : true, // check login status
    cookie     : true, // enable cookies to allow the server to access the session
    xfbml      : true  // parse XFBML
  });
};

// Load the SDK Asynchronously
(function(d){
  var js, id = 'facebook-jssdk'; if (d.getElementById(id)) {return;}
  js = d.createElement('script'); js.id = id; js.async = true;
  js.src = "//connect.facebook.net/en_US/all.js";
  d.getElementsByTagName('head')[0].appendChild(js);
}(document));
</script>

<h3>Stuffed Cookies</h3>
<p>
<img title="3eesho reading club" 
     src="https://3eesho.com/public/admin/logo.png" 
     width="550"/>
</p>

<br>
<form>
<input type="button" value="read" onclick="postreads()" />
</form>

<fb:activity actions="subhinajjar:read"></fb:activity>

</body>
</html> 
```

但我总是有这个消息：错误一致。这让我发疯。我希望是否有任何机构可以修改此代码给我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-30T10:54:21.347

尝试将 API 调用的 URL 更改为`FB.api`：（`'/me/subhinajjar:read'`即删除文章，因为无论如何您都会将其作为数据发布）。

在`response`块中，提醒错误以查看将操作发布到 Facebook 时实际发生的情况。您的代码应如下所示：

```
function postreads()
{
  FB.api(
    '/me/subhinajjar:read',
    'post',
    { article: 'https://3eesho.com/articles/2346/-' },
    function(response) {
       if (!response || response.error) {
          // show the error
          alert( response.error );
       } else {
          alert('read was successful! Action ID: ' + response.id);
       }
    });
 } 
```

如果这不起作用，请尝试使用内置读取操作：

```
 FB.api(
    '/me/news.reads',
    'post',
    { article: 'https://3eesho.com/articles/2346/-' },
    function(response) {
       if (!response || response.error) {
          // show the error
          alert( response.error );
       } else {
          alert('read was successful! Action ID: ' + response.id);
       }
    });
 } 
```

# jquery - jQuery 绑定：函数在事件之前运行

> ID：10814751
> 
> 赞同：0
> 
> 时间：2012-05-30T10:47:19.173
> 
> 标签：jquery, events, binding

我正在尝试理解 jQuery 中的事件绑定。我写了一个简单的代码如下：

```
<html>

<script language="javascript" src="jquery.js"></script>

<body>
<form>
<input type="button" name="bu1" value="click me">
</form>
</body>

<script language="javascript">
jQuery("input[type='button']").bind('click',alert('Hello'));
</script>

</html> 
```

当我运行页面时，警报会在加载时发生，而不是在我单击按钮时发生。谁能帮我理解我哪里出错了？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-30T10:48:27.303

```
jQuery("input[type='button']").bind('click', function () {
    alert('Hello');
}); 
```

您需要传递一个函数，而不是调用它。所以在上面的代码中我添加了一个匿名函数，它调用警报。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-30T10:48:47.700

您应该将函数作为第二个参数传递

```
jQuery("input[type='button']").bind('click', function() {
    alert('Hello')
}); 
```

否则，javascript 会运行`alert('Hello')`以获取函数的第二个参数的`bind`值，因此您会在窗口中显示警报。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-30T10:50:48.673

```
<script language="javascript">
 jQuery(function(){
      jQuery("input[type='button']").bind('click',function(){
      alert('Hello')
   })
 })

</script> 
```

在里面做

```
Jquery(function(){

}) 
```

并编辑

```
 jQuery("input[type='button']").bind('click',function(){
          alert('Hello')
       }) 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-30T10:53:33.773

是的，将它包装在一个函数中，我也会添加 event.preventDefault() ：

```
jQuery("input[type='button']").bind('click', function(e) { 
  e.preventDefault();        
  alert('Hello');
}); 
```

抢

# java - 在 Java 中使用 CardLayout

> ID：10814755
> 
> 赞同：1
> 
> 时间：2012-05-30T10:47:42.480
> 
> 标签：java, swing, awt, cardlayout

我目前正在尝试制作带有菜单的游戏。菜单看起来像这样。 [http://puu.sh/xGoC](http://puu.sh/xGoC)

理想情况下，当我按下按钮时，它会带我进入游戏。游戏看起来是这样的。 [http://puu.sh/xGoV](http://puu.sh/xGoV)

我目前在我的主类中初始化一个 JFrame()，它运行菜单类或游戏类（两者都是 JPanel）。

我将如何使用 CardLayout 来制作它，以便我可以初始化游戏菜单，当我单击一个按钮时，将面板更改为游戏面板？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-30T11:19:37.807

我为你准备了一些示例代码，它并不完美，但它应该可以工作。基本上，您想在布局管理器上使用 NEXT 或 PREVIOUS 调用。

由于只有两个面板，我只使用 NEXT 调用来循环浏览它们。如果您阅读 Swing 文档，这可能是最好的，这可行，但您也可能有其他要求。

```
import java.awt.CardLayout;

public class CardLayoutUsage extends javax.swing.JFrame {

    public CardLayoutUsage() {
        initComponents();
    }

    /**
     * This method is called from within the constructor to initialize the form.
     * WARNING: Do NOT modify this code. The content of this method is always
     * regenerated by the Form Editor.
     */
    @SuppressWarnings("unchecked")
    // <editor-fold defaultstate="collapsed" desc="Generated Code">
    private void initComponents() {

        containerPanel = new javax.swing.JPanel();
        menuPanel = new javax.swing.JPanel();
        jButton2 = new javax.swing.JButton();
        gamePanel = new javax.swing.JPanel();
        jButton1 = new javax.swing.JButton();

        setDefaultCloseOperation(javax.swing.WindowConstants.EXIT_ON_CLOSE);

        containerPanel.setLayout(new java.awt.CardLayout());

        menuPanel.setBackground(new java.awt.Color(153, 255, 255));

        jButton2.setText("Go to Game");
        jButton2.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                jButton2ActionPerformed(evt);
            }
        });

        javax.swing.GroupLayout menuPanelLayout = new javax.swing.GroupLayout(menuPanel);
        menuPanel.setLayout(menuPanelLayout);
        menuPanelLayout.setHorizontalGroup(
            menuPanelLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
            .addGroup(javax.swing.GroupLayout.Alignment.TRAILING, menuPanelLayout.createSequentialGroup()
                .addContainerGap(135, Short.MAX_VALUE)
                .addComponent(jButton2)
                .addGap(149, 149, 149))
        );
        menuPanelLayout.setVerticalGroup(
            menuPanelLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
            .addGroup(javax.swing.GroupLayout.Alignment.TRAILING, menuPanelLayout.createSequentialGroup()
                .addContainerGap(141, Short.MAX_VALUE)
                .addComponent(jButton2)
                .addGap(134, 134, 134))
        );

        containerPanel.add(menuPanel, "card2");

        gamePanel.setBackground(new java.awt.Color(255, 255, 204));

        jButton1.setText("Go to Menu");
        jButton1.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                jButton1ActionPerformed(evt);
            }
        });

        javax.swing.GroupLayout gamePanelLayout = new javax.swing.GroupLayout(gamePanel);
        gamePanel.setLayout(gamePanelLayout);
        gamePanelLayout.setHorizontalGroup(
            gamePanelLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
            .addGroup(javax.swing.GroupLayout.Alignment.TRAILING, gamePanelLayout.createSequentialGroup()
                .addContainerGap(138, Short.MAX_VALUE)
                .addComponent(jButton1)
                .addGap(147, 147, 147))
        );
        gamePanelLayout.setVerticalGroup(
            gamePanelLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
            .addGroup(javax.swing.GroupLayout.Alignment.TRAILING, gamePanelLayout.createSequentialGroup()
                .addContainerGap(152, Short.MAX_VALUE)
                .addComponent(jButton1)
                .addGap(123, 123, 123))
        );

        containerPanel.add(gamePanel, "card3");

        getContentPane().add(containerPanel, java.awt.BorderLayout.CENTER);

        pack();
    }// </editor-fold>

    private void jButton1ActionPerformed(java.awt.event.ActionEvent evt) {
        CardLayout cl = (CardLayout)(containerPanel.getLayout());
        cl.next(containerPanel);
    }

    private void jButton2ActionPerformed(java.awt.event.ActionEvent evt) {
        CardLayout cl = (CardLayout)(containerPanel.getLayout());
        cl.next(containerPanel);
    }

    /**
     * @param args the command line arguments
     */
    public static void main(String args[]) {
        /* Set the Nimbus look and feel */
        //<editor-fold defaultstate="collapsed" desc=" Look and feel setting code (optional) ">
        /* If Nimbus (introduced in Java SE 6) is not available, stay with the default look and feel.
         * For details see http://download.oracle.com/javase/tutorial/uiswing/lookandfeel/plaf.html 
         */
        try {
            for (javax.swing.UIManager.LookAndFeelInfo info : javax.swing.UIManager.getInstalledLookAndFeels()) {
                if ("Nimbus".equals(info.getName())) {
                    javax.swing.UIManager.setLookAndFeel(info.getClassName());
                    break;
                }
            }
        } catch (ClassNotFoundException ex) {
            java.util.logging.Logger.getLogger(CardLayoutUsage.class.getName()).log(java.util.logging.Level.SEVERE, null, ex);
        } catch (InstantiationException ex) {
            java.util.logging.Logger.getLogger(CardLayoutUsage.class.getName()).log(java.util.logging.Level.SEVERE, null, ex);
        } catch (IllegalAccessException ex) {
            java.util.logging.Logger.getLogger(CardLayoutUsage.class.getName()).log(java.util.logging.Level.SEVERE, null, ex);
        } catch (javax.swing.UnsupportedLookAndFeelException ex) {
            java.util.logging.Logger.getLogger(CardLayoutUsage.class.getName()).log(java.util.logging.Level.SEVERE, null, ex);
        }
        //</editor-fold>

        /* Create and display the form */
        java.awt.EventQueue.invokeLater(new Runnable() {
            public void run() {
                new CardLayoutUsage().setVisible(true);
            }
        });
    }
    // Variables declaration - do not modify
    private javax.swing.JPanel containerPanel;
    private javax.swing.JPanel gamePanel;
    private javax.swing.JButton jButton1;
    private javax.swing.JButton jButton2;
    private javax.swing.JPanel menuPanel;
    // End of variables declaration
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-30T15:55:37.340

不要`CardLayout`用于那个。

相反，从框架的内容窗格中删除菜单面板并添加游戏面板。
也要记住`validate()`框架。像这样的东西：

```
public static final int VIEW_MENU = 0;
public static final int VIEW_GAME = 1;

private static Container content;
...
content = frame.getContentPane();

public static void setView(int view){
    if(view == VIEW_MENU){
        content.remove(menuPanel);
        content.add(gamePanel);
    } else {
        content.remove(gamePanel);
        content.add(menuPanel);
    }
    frame.validate();
} 
```

在我目前正在处理的程序中，我有一个名为*ViewManager*的类，它创建每个视图的静态实例并将它们添加到具有对应于常量字段的索引的数组中。我也有字段来跟踪面包屑/返回的先前视图。这可能是重新发明轮子的情况，但它允许你控制它的一切。而且效率很高。

# opengl - OpenGL中变换矩阵乘法的顺序

> ID：10814756
> 
> 赞同：0
> 
> 时间：2012-05-30T10:47:53.470
> 
> 标签：opengl, matrix, transform

这里我有一个点 P(x,y,z,1)。然后我围绕一个已知的角度和一个向量将 P 旋转到点 P1(x1,y1,z1,1)。并且根据 P1 的坐标，我可以将 P1 平移到点 P2 (0,0,z1,1)。现在我只想得到一个可以直接将 P 转换为 P2 的矩阵所以，我的代码如下：

```
GLfloat P[4] ={5,-0.6,3.8,1};
GLfloat m[16];  //This is the rotation matrix to calculate P1 from P
glMatrixMode(GL_MODELVIEW);
glPushMatrix();
glLoadIdentity();
glRotatef(theta, v1,v2,v3);//theta and (v1,v2,v3) is constant
glGetFloatv(GL_MODELVIEW_MATRIX, m);
glPopMatrix();

//calculate P1 from P and matrix m
GLfloat P1;
P1[0] = P[0]*m[0]+P[1]*m[4]+P[2]*m[8]+m[12];
P1[1] = P[0]*m[1]+P[1]*m[5]+P[2]*m[9]+m[13];
P1[2] = P[0]*m[2]+P[1]*m[6]+P[2]*m[10]+m[14];
P1[3] = P[0]*m[3]+P[1]*m[7]+P[2]*m[11]+m[15];
//after calculation P1 = {0.15,-3.51,-5.24,1}

GLfloat m1[16]; //P multiply m1 can get P2 directly
glMatrixMode(GL_MODELVIEW);
glPushMatrix();
glLoadIdentity();
glRotatef(theta, v1,v2,v3);//theta and (v1,v2,v3) is constant as above
glTranslatef(-P1[0], -P1[1], 0);// after rotation we get P1, then translation to P2  
glGetFloatv(GL_MODELVIEW_MATRIX, m1);
glPopMatrix();

//calculate P2 from P and matrix m1
GLfloat P2[4];
P2[0] = P[0]*m1[0]+P[1]*m1[4]+P[2]*m1[8]+m1[12];
P2[1] = P[0]*m1[1]+P[1]*m1[5]+P[2]*m1[9]+m1[13];
P2[2] = P[0]*m1[2]+P[1]*m1[6]+P[2]*m1[10]+m1[14];
P2[3] = P[0]*m1[3]+P[1]*m1[7]+P[2]*m1[11]+m1[15];
//after this calculation, I expect P2 should be (0,0,-5.24) that is (0,0,p1[2])
//however, the real result is not my expectation! Where I do wrong??? 
```

其实我分析过这个问题。我发现矩阵乘法的顺序很奇怪。在我做 glRotatef(theta, v1,v2,v3) 之后，我得到了矩阵 m。没关系。米是

米[0]米[1]米[2]0

米[4]米[5]米[6]0

米[8]米[9]米[10]0

0 0 0 1

如果我单独执行 glTranslatef(-P1[0], -P1[1], 0)，我会得到平移矩阵 m'。m' 是

1 0 0 0

0 1 0 0

0 0 0 1

-P1[0] -P1[1] 0 1

所以我认为在做glRotatef(theta, v1,v2,v3) 和glTranslatef(-P1[0], -P1[1], 0) 之后，m1 = m*m'，即

米[0]米[1]米[2]0

米[4]米[5]米[6]0

米[8]米[9]米[10]0

-P1[0] -P2[0] 0 1

但是，在实际程序中，m1 = m'*m，所以P2不是我预期的结果！

我知道先进行平移，然后进行旋转才能得到正确的结果，但是为什么我不能先进行旋转呢？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-30T10:50:34.907

旋转和平移是不可交换的。（矩阵乘法一般是不可交换的，但在某些特殊情况下，例如所有平移、所有**2D**旋转、所有缩放、**一次**旋转混合**均匀**缩放，动作/矩阵是可交换的）。

如果先旋转，则平移将沿旋转坐标的方向进行。

例如，平移 (1, 0)，然后旋转 90 度，将在 (1, 0) 处给出原点（假设从单位矩阵开始）。与首先旋转 90 度相反，将在 (0, 1) 处给出原点。

在数学方面，由于这是坐标变换，任何新的变换都将与当前坐标变换矩阵相乘。例如，如果T是一个新的变换动作的矩阵，C是当前的变换矩阵，那么变换后，当前的变换矩阵就变成了TC。

# ios - UITableViewCell 是如何和它的 UITableView 通信的？

> ID：10814757
> 
> 赞同：8
> 
> 时间：2012-05-30T10:47:53.940
> 
> 标签：ios, uitableview, tableview, delegation

我目前正在创建一个自定义网格视图，这意味着我正在创建一个与`UITableView`. 我想要做的一件事是单元格和网格视图的通信。

因此，我想知道表格视图单元格如何与其表格视图对话。例如，单元格如何通知表格视图它的删除按钮被点击并且需要从表格视图中删除单元格？

有几种可能的情况，但我不确定苹果正在使用哪一种，因为标题`UITableView`或`UITableViewCell`揭示了这一点（或者我是否忽略了某些东西）。

最终，目标是让单元格和网格视图私下通信，即不暴露任何公共方法或协议（如果可能的话）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-12T06:13:31.327

现在删除按钮可能是一个糟糕的例子，因为 iOS 有一个内置方法，允许您删除行并通知您的数据源，称为：

```
- (void)tableView:(UITableView *)tableView commitEditingStyle:(UITableViewCellEditingStyle)editingStyle forRowAtIndexPath:(NSIndexPath *)indexPath 
```

但是，为了便于理解，如果您想向 tableview 单元格添加一个按钮并让它执行标准 iOS 库中没有的操作，您将在单元格中创建一个委托并将您的 tableview 的数据源文件设置为委托.

基本上你会像这样子类 UITableViewCell

MyCustomCell.h

```
@protocol MyCustomCellDelegate;
@interface MyCustomCell : UITableViewCell
@property (nonatomic, unsafe_unretained) id <MyCustomCellDelegate> delegate; //Holds a reference to our tableView class so we can call to it. 
@property (nonatomic, retain) NSIndexPath *indexPath; //Holds the indexPath of the cell so we know what cell had their delete button pressed
@end

/* Every class that has <MyCustomCellDelegate> in their .h must have these methods in them */
@protocol MyCustomCellDelegate <NSObject>
- (void)didTapDeleteButton:(MyCustomCell *)cell;
@end 
```

MyCustomCell.m

```
@synthesize delegate = _delegate;
@synthesize indexPath = _indexPath;
- (id)initWithStyle:(UITableViewCellStyle)style reuseIdentifier:(NSString *)reuseIdentifier
{
    self = [super initWithStyle:style reuseIdentifier:reuseIdentifier];
    if (self) 
    {
    /* Create a button and make it call to a method in THIS class called deleteButtonTapped */
    UIButton *button = [UIButton buttonWithType:UIButtonTypeRoundedRect];
    button.frame = CGRectMake(5, 5, 25, 25);
    [button addTarget:self action:@selector(deleteButtonTapped:) forControlEvents:UIControlEventTouchUpInside];

    }
    return self;
}

/**
 * This is the method that is called when the button is clicked.
 * All it does is call to the delegate. (Whatever class we assigned to the 'delegate' property)
 */
- (void)deleteButtonTapped:(id)sender
{
    [self.delegate didTapDeleteButton:self];
} 
```

您的 TableView 的数据源看起来像这样。

我的数据源.h

```
/* We conform to the delegate. Which basically means "Hey you know those methods that we defined in that @protocol I've got them and you can safely call to them" */
@interface MyDataSource : UIViewController <MyCustomCellDelegate, UITableViewDelegate, UITableViewDataSource>
 @property (nonatomic,retain) NSArray *tableData;//We will pretend this is the table data
 @property (nonatomic,retain) UITableView *tableView;// We will pretend this is the tableview

@end 
```

我的数据源.m

```
//We will pretend we synthesized and initialized the properties
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath 
{
    MyCustomCell *cell = [tableView dequeueReusableCellWithIdentifier: @"MyCustomCell"];
    if (!cell) 
        cell = [[DownloadQueueCell alloc] initWithStyle: UITableViewCellStyleDefault reuseIdentifier: @"MyCustomCell"];
    cell.delegate = self;      // Make sure we set the cell delegate property to this file so that it calls to this file when the button is pressed.
    cell.indexPath = indexPath;// Set the indexPath for later use so we know what row had it's button pressed.
    return cell;
}

- (void)didTapDeleteButton:(MyCustomCell *)cell;
{

   // From here we would likely call to the apple API to Delete a row cleanly and animated
   // However, since this example is ignoring the fact that they exist
   // We will remove the object from the tableData array and reload the data
   [self.tableData removeObjectAtIndexPath:cell.indexPath];
   [self.tableView reloadData];

} 
```

基本上，长话短说。对于您的 gridview，您只需创建一个委托方法，告诉用户某个按钮被按下。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-12T00:41:05.110

您可以让您的自定义单元格 UIViews 具有您的网格视图类型的私有属性。将这些单元格添加到 GridView 时，将该属性更新为 gridView。

我有我的自定义网格并这样做。

另一种方法是在您的网格中有一个方法来传递一个单元格，这将返回您的索引。UITableView 也有这些方法。这样，当按下单元格中的按钮时，您所要做的就是获取单元格并将其传递给网格，这将返回一个索引。使用该索引，您可以访问数据...

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-30T10:58:17.397

`UITableViewCell`项目是 的子视图`UITableView`。因此，您可以使用它在单元格和 tableView 之间进行通信。反过来`UITableView`，委托和数据源与其控制器进行通信。这可能会有所帮助。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-11T09:08:28.790

您可以使用[类别](http://developer.apple.com/library/ios/#documentation/cocoa/conceptual/objectivec/chapters/occategories.html)。

您在单独的类别中声明您的私有方法，并将其放置在单独的文件中。在要使用这些私有方法的类的实现文件中，以私有类别导入该文件，并使用私有方法。因此，使用它们的类的 public .h 保持不变。

例子：

MyGridViewCell.h：

```
@interface MyGridViewCell : UIView
// ...
@end 
```

MyGridViewCell.m：

```
@implementation MyGridViewCell : UIView
// ...
@end 
```

现在私有方法类接口：

MyGridViewCellPrivate.h：

```
@interface MyGridViewCell (Private)

- (void) privateMethod1;

@end 
```

和实施：

MyGridViewCellPrivate.m：

```
@implementation MyGridViewCell (Private)

- (void) privateMethod1
{
    // ...
}

@end 
```

标头与以前保持一致：

MyGridView.h：

```
@interface MyGridView : UIView

- (void) publicMethod1;

@end 
```

但实现可能会使用私有 API：

MyGridView.m：

```
#import "MyGridViewCell.h"
#import "MyGridViewCellPrivate.h"

- (void) publicMethod1
{
    // Use privateMethod1
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-05T12:33:59.383

我不确定是否需要私人沟通渠道。

表格视图通过调整表格视图单元格的大小并在开放空间中创建新视图来强制删除与给定单元格相邻的视图。

强制删除视图使用表视图、索引路径和表视图委托进行实例化。删除视图处理触摸并向表视图委托发送消息，包括表视图和索引路径。表格视图委托执行从数据源中删除条目、动画单元格删除和刷新表格视图的工作。刷新时，表格视图会根据数据源重绘所有可见单元格。

# sql-server-2008-r2 - 如何通过 Management Studio 将这些 PDF 文档添加到 SQL Server 数据库？

> ID：10814758
> 
> 赞同：1
> 
> 时间：2012-05-30T10:48:02.520
> 
> 标签：sql-server-2008-r2

我是一名新的 Web 开发人员，我的公司在其服务器中托管基于 Web 的应用程序时使用以下过程：应用程序应位于服务器中，而数据库应位于另一台不同的服务器中。现在，在其中一个没有管理部分的开发系统中，他们希望我在其数据库中添加两个 PDF 文档。

我去了数据库，找到了负责这个问题的表。表设计如下：

**报告**表

```
ID, Category, Title, URL, Date, Hits 
```

在`URL`专栏中，该系统的开发人员插入了这样的数据（`example.pdf`）。我通过系统的源代码查看这些文件是否上传到`Application`应用程序服务器中的文件夹，但我什么都看不到。

那么如何上传这两个文件呢？它们将存储在哪里？

# neo4j - 如何使用 Neo4j 建模家庭关系

> ID：10814760
> 
> 赞同：1
> 
> 时间：2012-05-30T10:48:07.210
> 
> 标签：neo4j

我们正在尝试使用 neo4j 对家庭关系进行建模，并希望了解对此进行建模的最佳方法。注意：我们已经有用户（例如 id、name）驻留在 MySQL 数据库中。

我们有以下样本数据（John Davis 与 Nancy ad 结婚，有 2 个孩子 Joshua 和 Susan）。是否可以在夫妻节点之间建立单一的关系，并进行双向解释。

例如，约翰戴维斯“南希”的丈夫，南希“约翰戴维斯的妻子”。

或者

John Davis “丈夫-妻子-关系” Nancy 因此，如果有人试图读取节点“John Davis”并尝试查找家庭信息，它应该知道 John 是 Nancy 的“丈夫”，并且会以另一种方式读取 Nancy，即是南希是约翰的“妻子”。

鉴于用户信息已作为 MySQL 数据库的一部分存储，那么对此建模的正确方法是什么。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-30T17:35:49.447

MARRIED_TO 关系应该足够了。如果我们严格地谈论男女婚姻，我们可以说这种关系是从男人到女人的，因此外向的 MARRIED_TO 关系在逻辑上意味着“丈夫”，而传入意味着“妻子”。如果你也在模拟男人和女人的婚姻，那么性别可以被编码为每个人节点上的属性，并且这种关系和开始或结束节点的属性的组合会告诉你它的含义。

但是您需要如何对其建模通常取决于您计划如何查询它。

# asp.net-mvc-3 - 在 ASP.NET MVC 中创建自定义 RequestContext

> ID：10814761
> 
> 赞同：1
> 
> 时间：2012-05-30T10:48:08.183
> 
> 标签：asp.net-mvc-3, httpcontext

我正在使用 ASP.NET MVC 创建一个 CMS，根据设计，我决定每个插件（附加组件）在传入的 HTTP 请求中都应该有一个键。因此，我的**主机**应用程序中有这条一般路线：

```
{pluginKey}/{controller}/{action}/{id} 
```

我创建了一个自定义控制器工厂，它实现`IControllerFactory`了，当然，它有一个基于`ReqeustContext`控制器名称创建控制器的方法。但是，我想创建一个人工 HttpContext（以及所有其他相关对象，如 HttpRequest、RequestContext、RouteData 等），以便插件的控制器不会错误地误解这些 URL 段。换句话说，我想剪掉传入 URL 的第一部分，让插件认为他们正在处理这个 URL：

```
{controller}/{action}/{id} 
```

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-06T08:22:47.763

虽然您可以创建所有上下文类的新实现，但这似乎有点矫枉过正。为什么不在返回 HttpHandler 之前使用应用过滤功能的派生路由处理程序？这是一个例子：

```
//  To avoid conflicts with similarly named controllers, I find it to be good practice
//  to create a route constraint with the set of all plugin names.  If you don't have 
//  this function already, you should be able to access it with reflection (one time 
//  per app lifecycle) or you hard-code them.  The point is to have a regex which ensures
//  only valid plugins will get selected
string[] pluginNames = GetPluginNames();
string pluginNameRegex = string.Join("|",pluginNames);

Route pluginRoute = new Route (
    url: "{pluginKey}/{controller}/{action}/{id}",
    defaults: null,
    constraints: new RouteValueDictionary(new { pluginKey = pluginNameRegex }),
    routeHandler: new PluginRouteHandler()
});

//  The custom route handler can modify your route data after receiving the RequestContext 
//  and then send it to the appropriate location.  Here's an example (markdown code/untested)
//  Note: You don't have to inherit from MvcRouteHandler (you could just implement IRouteHandler
//  but I'm assuming you want Mvc functionality as the fallback)
public class PluginRouteHandler : MvcRouteHandler 
{ 
    public PluginRouteHandler(IControllerFactory controllerFactory) 
      : base(controllerFactory)
    {}

    protected override IHttpHandler GetHttpHandler(RequestContext requestContext){
        if(ValidatePluginRoute(requestContext)) 
        {
           //  we are going to remove the pluginKey from the RequestContext, It's probably wise
           //  to go ahead and add it to HttpContext.Items, in case you need the data later
           requestContext.HttpContext.Items["pluginKey"] = requestContext.RouteData.Values["pluginKey"];

           //  now let's get ride of it, so your controller factory will process the 
           //  requestContext as you have described.
           requestContext.Values.Remove("pluginKey");

           //  the route will now be interpreted as described so let the flow go to the MvcRouteHandler's method
        }
        return base.GetHttpHandler(requestContext);
    }
    static bool ValidatePluginRoute(RequestContext requestContext){
        return requestContext.RouteData.ContainsKey("pluginKey");
    }
} 
```

# c# - 泛型协变转换或转换为真实类型

> ID：10814768
> 
> 赞同：2
> 
> 时间：2012-05-30T10:48:38.643
> 
> 标签：c#, generics, reflection, cqrs

试图构建一个 CQRS 解决方案，我有以下代码试图找到一个处理程序，然后调用一个 Handle() 方法。

下面的代码有效，但是当我们知道所有 IHandleCommand<> 都有一个 Handle 方法时使用反射很烦人，这可以在编译时解决，我相信！

我必须以`dynamic`某种方式使用吗？

```
public void SendCommand(Command command)
{
    Type handlerType = typeof(IHandleCommand<>).MakeGenericType(command.GetType());
    object handler = container.Resolve(handlerType);
    handler.GetType().GetMethod("Handle").Invoke(handler, new object[] { command });
} 
```

这是上面使用的其他类型

```
public class Command {}

public class MyCommand : Command {}

public interface IHandleCommand<T>
{
void Handle(T command);
}

public class MyCommandHandler : IHandleCommand<MyCommand>
{
    public void Handle(MyCommand command)   {}
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-30T10:54:37.050

我做了一些类似于我使用容器（在我的例子中是结构映射）来获取处理程序实例的地方。

查看该问题及其答案：[StructureMap register generic types against all possible 具体实现](https://stackoverflow.com/questions/4733424/structuremap-register-generic-types-against-all-possible-concrete-implementation)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-30T12:42:46.427

我使用 Autofac 来解决这个问题。
这是我最终得到的

假设这个接口

```
public interface IHandleCommand<T> where T : Command
{
  void Handle(T command);
} 
```

服务总线会调用这样的东西

```
private readonly IComponentContext container;

public InProcessBus(IComponentContext container)
{
  this.container = container;
}

public void Send<T>(T command) where T : Command
{
  if (command == null) throw new ArgumentNullException("Command");
  container.Resolve<IHandleCommand<T>>().Handle(command);
} 
```

和我的 Autofac CommandsHandlersModule

```
public class CommandsHandlersModule : Autofac.Module
{
  protected override void Load(ContainerBuilder builder)
  {
     builder.RegisterAssemblyTypes(typeof(CartCommandsHandler).Assembly)
       .AsClosedTypesOf(typeof(IHandleCommand<>))
       .SingleInstance();
   }
} 
```

比从您的应用调用

```
ContainerBuilder builder = new ContainerBuilder();
builder.RegisterModule(new CommandsHandlersModule()); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-31T12:01:17.283

在玩了之后，我发现了一些解决方案：

```
dynamic handler = container.Resolve(handlerType);
handler.Handle(command as dynamic); 
```

但是，如果我将命令作为动态发送到通用方法，我将得到命令，因为它是真正的类型，如 T 可以用来做魔术。对 Handle() 的调用也可以在编译时解决。然后就不需要通用协变转换，这从一开始就是问题。

```
public void SendCommand(Command command)
{
    Invoke(command as dynamic);
}

private void Invoke<T>(T command) where T : Command
{
    var handler = container.Resolve<IHandleCommand<T>>();
    handler.Handle(command);
} 
```

这真的很好，但我不会完全采用该解决方案，因为我不注册命令处理程序，我将使用它：

```
private void Invoke<T>(T command) where T : Command
{
    Type handlerType = CommandToHandlerType(command);
    var handler = (IHandleCommand<T>)container.Resolve(handlerType);
    handler.Handle(command);
} 
```

CommandToHandlerType() 只是在程序集中搜索实现 T 的 IHandleCommand 的类型

# java - 如何使用 Jersey WebResource.Builder 发布 JSON？

> ID：10814769
> 
> 赞同：1
> 
> 时间：2012-05-30T10:48:43.400
> 
> 标签：java, json, post, jersey

我想使用带有 WebSresource.Builder 的 Jersey 客户端发布 JSONOject 或地图。

```
WebResource.Builder builder = res.type(mediaType);
uploadResult = builder.post(ClientResponse.class, new HashMap<String, Object>()); 
```

如何以正确的方式将 JSON 传递给 POST 请求？JSON/Map 必须如何转换？

//干杯

# php - PHP WebGUI 控制 CLI 应用程序

> ID：10814773
> 
> 赞同：2
> 
> 时间：2012-05-30T10:48:47.567
> 
> 标签：php, user-interface, embedded, command-line-interface

所以，我有这种情况：

运行 Debian、XAMPP 和一些 CLI 应用程序的嵌入式设备。

这些 CLI 应用程序是交互式的，它们每秒更新一次数据，用户可以向终端输入命令来改变它们的行为。

如何在不使用终端的情况下在 PHP/HTML 启动/停止/交互/读取这些应用程序中的数据中构建 WebGui？我应该使用 proc_open 还是 exec？在不创建 CPU 杀手循环的情况下更新数据的最佳方法是什么？

谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-30T12:33:07.503

交互式应用程序是什么意思？您是通过从 shell 调用（如`user@device$ application --stop`）向他们发送命令，还是他们提供自己的 shell（如 postgres 或 mysql CLI 客户端等）？

使用 exec() 发送命令并读取输出：

```
$ls_output = exec('ls -l'); 
```

您可以通过简单地将其重定向到文件并在加载网页时使用 PHP 从该文件中读取来保存持续的应用程序输出。添加一些 javascript 以自动重新加载页面，例如，每 10 秒一次，它不会占用 CPU。像这样的东西：

```
user@device$ application --do-some-work > application_output 
```

在 PHP 中：

```
$app_output = file_get_contents("application_output"); 
```

甚至使用 GNU CLI 工具和 PHP exec()：

```
$app_output = exec('tail -n 100 application_output | grep FAIL'); 
```

但这似乎更像是发明自行车，因为您可以在 PHP 中过滤输出数据。

# c# - 如何使用 LINQ 将 TypeA 的嵌套数据结构转换为 TypeB

> ID：10814778
> 
> 赞同：1
> 
> 时间：2012-05-30T10:49:06.180
> 
> 标签：c#, linq, algorithm

我有以下类型：

```
class TypeA
{
    public string Name { get; set; }
    public object Value { get; set; } // Holds either a primitive DataType or a List<TypeA>
    public string IrrelevantInformation { get; set; }
}

class TypeB
{
    public string Name { get; set; }
    public object Value { get; set; } //Holds either a primitive DataType or a List<TypeB>
} 
```

我想要的是将 TypeA 的层次结构转换为 TypeB。

我使用传统的递归方法做到了：

```
private TypeB ConvertToTypeB(TypeA Input)
{
    return new TypeB() { Name = Input.Name, Value = ((Input.Value is List<TypeA>) ? ((List<TypeA>)Input.Value).Select(v=>ConvertToTypeB(v)).ToList() : Input.Value) };
} 
```

我的问题是：这可以在没有 ConvertToTypeB 函数的情况下仅使用一个 Linq 查询来完成吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-30T10:56:19.857

要转换分层结构，需要递归调用。没有办法排除 AtoB 方法。

# ruby-on-rails-3 - Rails 3在另一个控制器的视图中同时呈现一个控制器的多个动作的响应

> ID：10814780
> 
> 赞同：0
> 
> 时间：2012-05-30T10:49:13.137
> 
> 标签：ruby-on-rails-3, json, controller, actionmethod

使用**Rails v 3.0.11、Ruby v 1.9.3**

我有一个页面上有链接“报告”，点击它会调用**ReportsController#index**

```
class ReportsController < ApplicationController
  def index
    # Renders index.html.haml
  end
end 
```

现在我有一个已经存在的 JSON API (**如下所示的ReportsDataController**）返回我需要重用的 JSON 响应。

*返回 JSON 响应的控制器（我的 JSON API）*

```
class ReportsDataController < ApplicationController

  respond_to :json

  def users_events_activity
    user_activity_data_obj = find_user_events_activity_per_day
    respond_with user_activity_data_obj
  end

  def users_comments_activity
    user_comments_data_obj = find_user_comments_activity_per_day
    respond_with user_comments_data_obj
  end

end 
```

在我的**app/views/reports/index.html.haml**上，我需要同时呈现由操作**ReportsDataController#users_events_activity**和**ReportsDataController#** users_comments_activity 返回的数据。

*是否有可以实现上述要求的 Rails 标准方式？如果没有，有人可以建议我一些方法来实现同样的目标吗？*

谢谢，

吉涅什

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-31T07:08:35.300

如果您不想发出两个请求，您始终可以创建另一个控制器操作并像这样呈现 JSON：

```
class ReportsDataController < ApplicationController

  respond_to :json

  def users_combined_events_comments_activity
    user_activity_data_obj = find_user_events_activity_per_day
    user_comments_data_obj = find_user_comments_activity_per_day
    respond_with { activities: user_activity_data_obj, comments: user_comments_data_obj }
  end
end 
```

# java-me - 向 LinkedIn 发布应用请求时出现请求错误“启用 cookie”

> ID：10814785
> 
> 赞同：2
> 
> 时间：2012-05-30T10:49:27.193
> 
> 标签：java-me, oauth, linkedin, s60

我在 win 7 上使用 Eclipse pulsar 运行 S60 SDK 5th。

我有 oauth_token 与此网址一起使用[https://www.linkedin.com/uas/oauth/authorize?oauth_token=](https://www.linkedin.com/uas/oauth/authorize?oauth_token=)一起使用。通过LinkedIn获得该授权访问屏幕。

我正在使用 htmlComponent 在 Url 上方加载，并添加 HtmlComponent 以形成并显示它。有时，当我单击“Ok I'll Allow It”按钮时（即按下按钮后），我会收到以下错误消息。

> 很抱歉，您的请求有问题。请确保您已启用 cookie，然后重试。

但是我收到了 oauth_token、oauth_token_secret、oauth_callback_confirmed = true、xoauth_request_auth_url、oauth_expires_in 的响应。

请帮忙。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-30T16:38:36.807

我的猜测是回调发生错误。在 LinkedIn 身份验证页面中单击“确定，我允许”按钮后，用户应该被重定向回您的应用程序。您可以通过笔记本电脑系统为您的手机运行网络，您可以在其中窥探流量以查看正在发生的事情吗？我不熟悉 Windows 7 系统中的 HTTP 侦听功能，但是您可以执行一些日志记录来确定发生了什么。

# php - functions.php上的wordpress内存大小胎儿错误

> ID：10814792
> 
> 赞同：0
> 
> 时间：2012-05-30T10:50:04.657
> 
> 标签：php, string, wordpress, serialization

我为 wordpress 制作了一个插件，但是我的服务器上允许的内存大小有问题，它是 128，它们不允许我在运行时增加内存。

我的插件具有将用户数据导出到 csv 并通过电子邮件发送给用户的功能。我在这个 wordpress 上出现胎儿错误，functions.php 第 252 行

是否有有效的方法来优化以下功能以防止出错

谢谢你

```
function is_serialized( $data ) {
        // if it isn't a string, it isn't serialized
        if ( ! is_string( $data ) )
            return false;
        $data = trim( $data );
        if ( 'N;' == $data )
            return true;
        $length = strlen( $data );
        if ( $length < 4 )
            return false;
        if ( ':' !== $data[1] )
            return false;
        $lastc = $data[$length-1];
        if ( ';' !== $lastc && '}' !== $lastc )
            return false;
        $token = $data[0];
        switch ( $token ) {
            case 's' :
                if ( '"' !== $data[$length-2] )
                    return false;
            case 'a' :
            case 'O' :
                return (bool) preg_match( "/^{$token}:[0-9]+:/s", $data );
            case 'b' :
            case 'i' :
            case 'd' :
                return (bool) preg_match( "/^{$token}:[0-9.E-]+;\$/", $data );
        }
        return false;
    } 
```

我的功能 - 文件是从管理面板动态获取的

```
$outFile = '';
                $blogusers = get_users();

                // retrieve the current options
                $spueIntervall = get_option('spue_intervall');
                //fileds are dynamic
                $spueSeperator = get_option('spue_seperator');
                $spueFields = get_option('spue_fields');

                // Check if the functions is already loaded
                if (!function_exists('get_userdata'))
                    require_once (ABSPATH . 'wp-includes/pluggable.php');

                // Setup the top-line of the file
                foreach ($spueFields AS $fieldKey => $fieldValue)
                {

                    if ($fieldValue == 1)
                    {

                        $outFile .= $fieldKey . $spueSeperator;

                    }

                }

                $outFile .= "\n";

                // Loop to all users
                foreach ($blogusers as $user) 
                {

                    // Get the userdate
                    $user_info = get_userdata($user->ID);

                    // Only output the needed data
                    foreach ($spueFields AS $fieldKey => $fieldValue)
                    {

                        if ($fieldValue == 1)
                        {

                            $outFile .= '"' . $user_info->{$fieldKey} . '"' . $spueSeperator;

                        }

                    }

                    $outFile .= "\n";

                }           

                // Save 
                file_put_contents( dirname(__FILE__) . '\spue-export.csv', utf8_encode($outFile)); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-30T12:07:10.307

知道了

```
foreach ( $blogusers as $user ) {
                $data = array();
                foreach ($spueFields AS $fieldKey => $fieldValue) {
                if ($fieldValue == 1)
                        {
                    $value = isset( $user->{$fieldKey} ) ? $user->{$fieldKey} : '';
                    $value = is_array( $value ) ? serialize( $value ) : $value;
                    $data[] = '"' . str_replace( '"', '""', $value ) . '"';
$outFile.=implode( ',', $data ) . "\n";                 
                } 
```

# c# - URL重写器和动态页面结构

> ID：10814793
> 
> 赞同：1
> 
> 时间：2012-05-30T10:50:12.690
> 
> 标签：c#, asp.net, regex, url-rewriting

我正在开发一个允许用户即时创建和生成自己的页面的系统。

我将它与 URL Rewriter 连接起来，以便我可以通过单个页面访问页面，该页面将通过查询字符串传递页面名称/ID。这是我知道我可以使用的简单部分：

```
<rewrite url="/(.+)/" to="/GenericPage.aspx?PageName=$1" /> 
```

有趣的来了。用户还可以创建具有子页面和/或子文件夹的文件夹。这些文件夹可以有 n 个深度，并且它们的深度没有限制。我主要实现了这一点，因为该结构将生成一个顶级导航，这些文件夹是顶级菜单选项和子文件夹等。

我是否可以使用重写规则来考虑在我需要的页面之前可能有大量文件夹的规则？我不想创建多个规则，因为它看起来很脏并且依赖于最大数量的文件夹。

```
**What I'm trying to avoid**
<rewrite url="/(.+)/(.+)/" to="/GenericPage.aspx?PageName=$2" />
<rewrite url="/(.+)/(.+)/(.+)/" to="/GenericPage.aspx?PageName=$3" />
<rewrite url="/(.+)/(.+)/(.+)/(.+)/" to="/GenericPage.aspx?PageName=$4" />
<rewrite url="/(.+)/(.+)/(.+)/(.+)/(.+)/" to="/GenericPage.aspx?PageName=$5" />
<!-- Where the additional (.+) are representative of folders --> 
```

我似乎被这个难住了（也许我今天有点累）。

如果`take after 2nd last /`URL Rewriter 中有规则就完美了。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-30T12:47:31.363

我不使用 aspx，但如果可以的话，你最好使用类似的东西

```
<rewrite url=".?" to="/RoutingHandler.aspx" /> 
```

这绕过了正则表达式的 URL 重写（以及所有潜在的参数转义问题），以便`RoutingHandler.aspx`您通过服务器变量访问原始请求的 URL。有了它，您可以将正斜杠上的虚拟目录拆分为一个数组。您可以将数组映射到参数、数据库中的页面或任何您想要的。

这`.?`只是最快的匹配每个请求的正则表达式。您可能需要对其进行调整，使其不会劫持静态内容请求。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-30T11:16:54.627

我没有要测试的 URL Rewriter 安装，但以下正则表达式可能会有所帮助：

```
.*/([^/]+?)/ 
```

# c - C extern struct 指针动态分配

> ID：10814797
> 
> 赞同：1
> 
> 时间：2012-05-30T10:50:26.613
> 
> 标签：c, struct, malloc, extern

我试图在 c 中动态分配一个全局结构，但是有些东西使我的 c 文件无法找到对 extern 变量的引用。

日志：

```
main.c:18: undefined reference to `gate_array' 
```

外部文件

```
#ifndef EXTERN_H_
#define EXTERN_H_

typedef struct gate_struct {
    int out;
} gate;

extern gate *gate_array;

#endif /* EXTERN_H_ */ 
```

主.c：

```
#include<stdio.h>
#include<stdlib.h>
#include<string.h>
#include "extern.h"

int main(int argc, char *argv[]){

    gate_array = (gate*) malloc (2* sizeof(gate));

    return 0;
} 
```

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-30T10:53:21.980

`gate_array`由于没有定义`extern`。在这种情况下，您可以删除`extern`限定符。但是，如果`extern.h`在多个翻译单元中使用（`#include`在多个`.c`文件中），那么这种方法会导致多个定义错误。考虑添加另一个`.c`包含`gate_array`（和任何未来变量）定义的文件，确保`gate_array`.

`extern gate *gate_array`告诉编译器有一个名为 的变量，`gate_array`但它是在其他地方定义的。`gate_array`但是发布的代码中没有定义。

* * *

另外，您可能希望阅读 [Do I cast the result of malloc?](https://stackoverflow.com/questions/605845/do-i-cast-the-result-of-malloc)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-30T10:55:59.037

这可能是你的意思：

```
#ifndef EXTERN_H_
#define EXTERN_H_

typedef struct gate_struct {
    int out;
} gate;

typedef gate *gate_array;

#endif /* EXTERN_H_ */ 
```

这`typedefs` `gate *`到`gate_array`. 然后在`main.c`你想要做的事情：

```
#include<stdio.h>
#include<stdlib.h>
#include<string.h>
#include "extern.h"

int main(int argc, char *argv[]){

    gate_array name_of_array = malloc (2* sizeof(gate));
    free(name_of_array);

    return 0;
} 
```

以前您缺少一个变量名。此外，[将`malloc`](https://stackoverflow.com/questions/953112/should-i-explicitly-cast-mallocs-return-value).

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-07-28T06:00:33.557

指向门的指针 ie`gate_array`没有声明 typedef 所以你正在做这样的事情：

```
typedef int *IXX;
IXX = (int*) malloc(2*sizeof(int)); 
```

做这样的事情：

```
IXX ix = (int*) malloc(2*sizeof(int)); 
```

# c# - 模拟属性（或吸气剂）

> ID：10814802
> 
> 赞同：1
> 
> 时间：2012-05-30T10:50:37.203
> 
> 标签：c#, asp.net, entity-framework, nunit, moq

我面临一个我不太明白的问题。

我正在使用实体框架在 C#/ASP.net 中开发应用程序。我正在尝试对其进行一些单元测试，因此我需要模拟其中一个对象，但我似乎无法解决它。

这是我要模拟的课程：http: [//pastebin.com/pMypAM7G](http://pastebin.com/pMypAM7G)

如果当前不存在，则此类返回一个新的 DataSourceContainer，否则返回现有的（需要它以避免具有多个上下文）

这是界面（唯一的目的是允许模拟）： http: [//pastebin.com/LRYVdA9j](http://pastebin.com/LRYVdA9j)

这是我要测试的功能：http: [//pastebin.com/naVsV3FX](http://pastebin.com/naVsV3FX)

这是测试功能：http: [//pastebin.com/dY4ERzSJ](http://pastebin.com/dY4ERzSJ)

当我尝试进行测试时，在 getter 中的 Database 类上出现错误，因为没有 HttpContext （这是合乎逻辑的）。我不明白的是 getter 应该被嘲笑。

我试图在互联网上查找它，但我无法弄清楚我做错了什么，所以如果有人可以帮助我解决这个问题，我将非常感激。谢谢 ！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-30T10:58:26.457

您必须将 Databaseobject 注入到测试方法中。或者最好将其注入到 Userobjects 构造函数中，并可能使其不是静态的，因为它现在似乎是静态的。

使用提供的解决方案，您不会使用模拟对象。您正在 Connexion 函数中创建一个具体对象。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-30T11:00:15.697

您没有正确实现代码以支持单元测试 - 您正在`Database`方法中创建外部对象 ()。另外，您没有使用`IDatabase`接口，而是使用的具体实现`Database`

```
 public static User Connexion(String login, String MotDePasse)
    {
        Database bdd = new Database(); // this is inline, concrete implementation, this cannot be mocked

        User us = bdd._Context.UserSet.FirstOrDefault(u => u.login == login);
        if (us == null)
            throw new Exception("Nom d'utilisateur erroné");
        if (us.password != MotDePasse)
            throw new Exception("Mot de passe erroné");
        else
            return us;
    } 
```

您至少应该阅读有关[Dependency Injection](http://en.wikipedia.org/wiki/Dependency_injection)的内容。

这个简短的示例可以帮助您了解代码中的问题

```
 public static User Connexion(String login, String MotDePasse, IDatabase bdd)
    {
        User us = bdd._Context.UserSet.FirstOrDefault(u => u.login == login);
        if (us == null)
            throw new Exception("Nom d'utilisateur erroné");
        if (us.password != MotDePasse)
            throw new Exception("Mot de passe erroné");
        else
            return us;
    } 
```

这一次，Connexion 松散地绑定到 IDatabase 接口，而不是它的实现。在运行时，您将提供`new Database()`其值，但在测试时，模拟实现。

# python - python关闭奇怪的行为

> ID：10814806
> 
> 赞同：2
> 
> 时间：2012-05-30T10:50:50.927
> 
> 标签：python, closures, lexical-closures

我正在尝试来自 [Python Lexical closures问题中的一段代码](https://stackoverflow.com/questions/233673/lexical-closures-in-python)

```
flist = []
for i in xrange(3):
    def func(x): return x*i
    flist.append(func)

for f in flist:
    print f.func_closure 
```

输出是：

```
None
None
None 
```

不应该吗：

```
(<cell at 0x9222d94: int object at 0x8cabdbc>,)
(<cell at 0x9222d94: int object at 0x8cabdbc>,)
(<cell at 0x9222d94: int object at 0x8cabdbc>,) 
```

我使用以下代码获得了上述输出：

```
flist = []
def actualFact():
    for i in xrange(3):
        def func(x): return x * i
        flist.append(func)

for f in flist:
    print f.func_closure 
```

我正在使用 Python 2.6.6（r266:84292，2010 年 9 月 15 日，15:52:39）。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-30T11:12:21.727

只有在全局（模块）范围之外有要引用的变量时才会引入闭包：

```
>>> def foo():
...     def bar(): pass
...     return bar
...
>>> foo().func_closure is None
True
>>> spam = 'eggs'
>>> def foo():
...     def bar(): return spam
...     return bar
...
>>> foo().func_closure is None
True 
```

只有当内部函数引用周围范围内的变量时，才会生成闭包：

```
>>> def foo():
...     spam = 'eggs'
...     def bar(): return spam
...     return bar
...
>>> foo().func_closure is None
False
>>> foo().func_closure
(<cell at 0x108472718: str object at 0x108471de0>,) 
```

请注意，您实际上必须引用周围范围内的变量。只需忽略范围即可`None`再次为您提供：

```
>>> def foo():
...     spam = 'eggs'
...     def bar(): pass
...     return bar
...
>>> foo().func_closure is None
True 
```

在您的第一个示例中，`i`是一个模块范围变量，只有在您的第二个示例中，您才通过将代码包装在新函数中来引入新范围`actualFact`。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-30T11:09:33.883

[语言参考](http://docs.python.org/reference/datamodel.html)指定为“`func_closure`无或包含函数自由变量绑定的单元格元组”。

现在，请注意您的两个版本之间的区别：在第一个版本`i`中是模块级（即全局）变量。评估每个函数的结果是相同的：

```
>>> [f(2) for f in flist]
[4, 4, 4] 
```

在每个函数中，`i`不是免费的，而是指全局的`i`，所以不，输出不应该是非零长度元组的列表。

在实践中，你可能并不关心 的值`func_closure`，除非你正在做一些相当深刻的魔法。`func_closure`如果您正在做一些魔术，请注意，鉴于规范，如果没有自由变量，似乎没有充分的理由不应该是一个空元组，因此如果您希望您的代码在甚至不同的代码之间可移植，请适当处理这种情况python的点版本。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-30T11:12:33.797

一种无需关闭即可实现此目的的廉价方法

```
for i in xrange(3):
    def func(x, i=i): return x*i
    flist.append(func) 
```

# java - 如何改进 WebDriver ExpectedCondition 的错误消息？

> ID：10814807
> 
> 赞同：2
> 
> 时间：2012-05-30T10:50:56.097
> 
> 标签：java, testing, selenium, webdriver

我有一个这样的实用方法：

```
public void verifyTitle(int secsToWait) {
    new WebDriverWait(driver, secsToWait)
            .until(ExpectedConditions.titleIs(title));
} 
```

当它失败时，消息是：

> org.openqa.selenium.TimeoutException
> 
> 等待标题为 2 秒后超时：此处为某些标题构建信息：版本：'2.2.1'，修订：'16551'，时间：'2012-04-11 21:42:35' 系统信息：os。名称：'Linux'，os.arch：'i386'，os.version：'3.0.0-16-generic'，java.version：'1.7.0_04' 驱动程序信息：driver.version：未知

我找不到提供更好错误消息的 API。我想要的是：

> 等待标题为 2 秒后超时：此处为某个标题（但标题为：其他标题）

我可以使用如下所示的 try/catch 来做到这一点，但也许还有其他选择？

```
public void verifyTitle(int secsToWait) {
    try {
        new WebDriverWait(driver, secsToWait)
                .until(ExpectedConditions.titleIs(title));
    }
    catch (TimeoutException e) {
        throw new AssertionError(String.format("Expected page title [%s] but was [%s]", title, driver.getTitle()));
    }
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-18T16:48:19.850

使用`withMessage()`方法：

```
WebDriverWait wait = new WebDriverWait(driver, timeout);
wait.withMessage("Any message you want");
wait.until(ExpectedConditions.titleIs(title)); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-31T07:28:32.733

您还可以与 JUnit 的**assertEquals**进行比较，这将提供更好的信息

如：

```
org.junit.ComparisonFailure: expected:<[something]> but was:<[differentthing]> 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-05-30T21:08:55.737

当你想通过一个场景时，请调用它。

公共 CustomWebDriverException（字符串消息，WebDriver custWebDriver）{

```
 super(msg);

    this.driver = custWebDriver; 
```

}

遇到问题时调用此构造函数

公共 CustomWebDriverException(Throwable e, WebDriver selenium) {

```
 super(e.getMessage());
    this.driver = selenium;
} 
```

让我更多地了解您的设置和其他东西......比如框架，因为您可以使用 testNg 或 maven 管理的东西很少

# azure - Windows Azure Web 角色 - RoleEnvrironment.Changing 去哪儿了？

> ID：10814808
> 
> 赞同：0
> 
> 时间：2012-05-30T10:50:57.753
> 
> 标签：azure

从 Azure SDK 1.3 版开始，我们必须在我们的 Web 应用程序（例如 global.asax）中设置配置发布者，而不是 webrole.cs。连接`RoleEnvironment.Changed/Changing`事件也是如此吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-30T11:00:02.580

这取决于。您的 Web 应用程序在与 WebRole.cs 不同的进程中运行，这意味着您需要根据用例在其中一个（或两者）中处理它。

一个例子：假设你的 global.asax 中有一个静态属性，它包含一个对象。该对象已使用来自您的服务配置的信息进行了初始化。然后几天后，您在门户中修改此配置（可能是连接字符串）。这将引发 RoleEnvironment.Changing 事件。在这种情况下，您需要在 Web 应用程序 (global.asax) 中处理该事件，以使用新的配置信息重新初始化静态对象。

请注意，Web 应用程序并不总是处于活动状态，它只会在第一个请求后启动（尽管您可以修改它，但这是默认行为）。这意味着在某些情况下，您可能无法处理 Web 应用程序中的事件，因为该进程未处于活动状态。如果处理事件对您至关重要，您应该考虑在 WebRole.cs 中处理它

# objective-c - 以编程方式创建 UIView 和 UIViewController 并链接在一起的正确方法

> ID：10814813
> 
> 赞同：1
> 
> 时间：2012-05-30T10:51:17.690
> 
> 标签：objective-c, ios, uiview, uiviewcontroller, loadview

我是 iOS 开发的新手。为了让我的 iOS 应用程序很好地划分，我想以编程方式创建 UIView 和 UIViewController，并在创建后将它们绑定在一起。

所以，我做了以下事情：在我的视图控制器中，我有这个：

```
-(void)loadView {    
   NSLog(@"HPSMainMenuViewController loadView starting"); 
   HPSMainMenuView* mainmenuView = [[HPSMainMenuView alloc]initWithFrame:CGRectZero];
   self.view = mainmenuView; 
} 
```

在我看来，我有这个：

```
-(id)initWithFrame:(CGRect)frame {
   self = [super initWithFrame:frame];
   if (self) {
      // Initialization code
      NSLog(@"HPSMainMenuView initWithFrame starting");
      [self setup];
   }
   return self; 
}
-(void)setup {

     UIButton* btn = [UIButton buttonWithType:UIButtonTypeRoundedRect];
     btn.tag = E_PROFILE_BUTTON;
     [btn setTitle:@"Option1" forState:UIControlStateNormal];

     [self.view addSubview:btn ];

     btn = [UIButton buttonWithType:UIButtonTypeRoundedRect];
     btn.tag = E_CONTACTS_BUTTON;
     [btn setTitle:@"Option2" forState:UIControlStateNormal];

     [self.view addSubview:btn ];

     self.title = @"Hello"; 
} 
```

这是正确的方法吗（假设我想要完全的程序控制）。在 ViewController 中动态构建视图似乎是错误的，因此我的方法是在实际`UIView`类中构建视图。

最后，我正在使用 loadView；我应该使用`viewDidLoad`吗？如果是这样，为什么？

非常感谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-30T11:04:17.467

What you are doing is correct, and actually good. Many developers keep their view controllers and views heavily tied together but if you want to keep them separate then that's great.

`loadView` is where you should be creating and initializing everything. `viewDidLoad` can be called multiple times if the view is unloaded/reloaded due to memory warnings (for example). So `viewDidLoad` is where you would restore saved state, make your view correctly reflect your model, or any other initialization that you can't do in `loadView`.

# iphone - 清除 UISearchDisplayController 的“数据源”

> ID：10814819
> 
> 赞同：2
> 
> 时间：2012-05-30T10:51:40.880
> 
> 标签：iphone, web-services, uitableview, uisearchdisplaycontroller

我将 UISearchDisplayController 与 Web 服务一起使用。每次搜索栏的文本字段清晰时，我都想清除保存结果的 NSArray，但是当文本清晰时，我没有找到在 UISearchDisplayDelegate 中调用的任何方法。

有什么建议吗？

谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-30T11:19:09.007

您可以使用以下方法：

```
- (BOOL)searchDisplayController:(UISearchDisplayController *)controller shouldReloadTableForSearchString:(NSString *)searchString; 
```

# java - java.util.Set 何时检查重复项

> ID：10814824
> 
> 赞同：12
> 
> 时间：2012-05-30T10:51:52.853
> 
> 标签：java, set, hashset

我有一个非常基本的问题，java.util.Set 何时检查添加的对象是否重复？

因为我有一个模型类如下，它覆盖了equals和hashcode方法

```
public class SampleModel implements Comparable {
    private String name;

    public SampleModel(String name) {
        this.name = name;
    }

    // Setter and Getter omitted
    @Override
    public boolean equals(Object arg0) {
        boolean eq = false;

        if (arg0 instanceof SampleModel
                && this.name.equalsIgnoreCase(((SampleModel) arg0).name)) {
            eq = true;
        }
        return eq;
    }

    @Override
    public int compareTo(Object arg0) {
        return this.name.compareTo(((SampleModel) arg0).name);
    }

    @Override
    public int hashCode() {
        return this.name.length();
    }
} 
```

然后这就是我在 HashSet 中使用模型对象的方式。

```
 SampleModel s1 = new SampleModel("Satya");
    SampleModel s2 = new SampleModel("Katti");

    Set<SampleModel> samSet = new HashSet<SampleModel>();
    System.out.println(samSet.add(s1));
    System.out.println(samSet.add(s2));

    s2.setName("Satya");
    System.out.println(s2.getName());
    System.out.println(s1 + ", " + s2); 
```

根据相等子句，对象相同且相等，但 HashSet 将包含重复项。

是否有任何违规发生在等于或哈希码上？如果这段代码完全没问题，那么有什么方法可以防止添加重复项？

我假设，用于确定 equals 和 hashcode 的任何字段都应该是不可变的？

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-05-30T10:55:08.860

> 我假设，用于确定 equals 和 hashcode 的任何字段都应该是不可变的？

这是正确的。

更准确地说，您问题中的代码违反了[`Set`](http://docs.oracle.com/javase/6/docs/api/java/util/Set.html)合同的以下部分：

> 注意：如果将可变对象用作集合元素，则必须非常小心。如果对象的值以影响等于比较的方式更改，而对象是集合中的一个元素，则不指定集合的​​行为。此禁令的一个特殊情况是不允许集合包含自身作为元素。

一旦您违反合同，所有赌注都将取消。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-09-08T14:07:31.913

## 要理解的示例：

```
import java.util.*;

public class Vector1{

  public static void main(String args[]){

    Set v=new HashSet();
    Student st=new Student("12","naushad");
    Student st1=new Student("12","naushad");
    v.add(st1);
    v.add(st);
    System.out.println(st.hashCode());
    st.sname="shouzia";
    System.out.println(st.hashCode());

    v.add(st);
    v.add(st);
    v.add("naushad");
    v.add("naushad");
    v.add("naushad");

    System.out.println(v);
    }

}

class Student{

    public String sid;
    public String sname;

    Student(String sid,String sname){
        this.sid=sid;
        this.sname=sname;
    }

    public String toString(){

        return sid+"\t"+sname;
    }

} 
```

我已经用相同的数据实例化了两个对象，它将存储在 Set 中，因为它们都包含不同的哈希码，所以这里不需要比较 equals() 方法。

如果 hashcode() 方法返回相同的哈希码，那么它将检查 equals() 方法与对象属性并检查对象属性是否发生了一些变化？根据结果​​，它将将该对象存储在集合中，也可能不存储。

# asp.net-mvc-3 - 我在使用 Razor 显示来自 ViewModel 的值时遇到困难

> ID：10814825
> 
> 赞同：0
> 
> 时间：2012-05-30T10:51:53.477
> 
> 标签：asp.net-mvc-3, linq, razor

我有一个清单：

```
public List<MyModel> MyModels { get; set; } 
```

如何使用 Razor 语法显示来自该列表中一个对象的一条信息？

我想做类似的事情：

```
@Html.Display(MyModel.Select(o => o.objectId = selectedObjectVal).FirstOrDefault().TextThatNeedsDisplayed) 
```

但这不会编译。如何正确显示我想要的信息？

当我使用上面的更新代码（从下面的答案中检索）时，我收到以下错误：CS1061：'int'不包含'grade'的定义，并且没有扩展方法'grade'接受'int'类型的第一个参数可以找到（您是否缺少 using 指令或程序集引用？）。IntelliSense 给了我“比较”“等于”“GetHashCode”等选项。.

* * *

更新：

如果我在末尾执行 .ToString()) 代替“TextThatNeedsDisplayed”（并从 @Html.Display 更改为 @Html.Raw），它将返回它正在搜索的数据 - 字面意思是存储在“o. objectId = selectedObjectVal" 。我不知道这是为什么 - 它不应该试图将整个 MyModel 变成一个字符串吗？仍然没有显示 TextThatNeedsDisplayed。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-30T11:03:44.353

假设您的模型是（视图）模型的列表，您可以通过多种方式访问​​一个模型的属性。

如果列表是您的剃刀视图的模型：

```
@Html.DisplayFor(model => model[0].TextThatNeedsDisplayed) 
```

或者从您的列表中选择一个对象：

```
@Html.Display(MyModel.First().TextThatNeedsDisplayed) 
```

希望我正确理解了您的问题。

# redis - REDIS - 获取多个键的值

> ID：10814828
> 
> 赞同：11
> 
> 时间：2012-05-30T10:52:01.000
> 
> 标签：redis

如何使用排序集从 redis 获取多个键的值？

```
zadd Users 0 David
zadd Users 5 John
zadd Users 15 Linda
zrevrange Users 0 -1 withscores 
```

这将有两个用户。

如何在一个查询中检索键为“David”和“Linda”的用户？

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2014-11-14T13:38:20.353

您可以使用 Redis MGET

```
redis> MGET key1 key2 nonexisting
1) "Hello"
2) "World"
3) (nil) 
```

更多在这里 [http://redis.io/commands/mget](http://redis.io/commands/mget)

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2012-05-30T13:30:14.947

有多种方法可以做到这一点，而无需在 Redis 中引入新命令。

例如，您可以用您感兴趣的名称填充一个临时集，然后计算临时集和 zset 之间的交集：

```
multi
  sadd tmp David Linda ... and more ...
  zinterstore res 2 tmp Users weights 0 1
  zrange res 0 -1 withscores
  del tmp res
exec 
```

使用流水线，这只会生成一次往返，您可以在 tmp.xml 中填充任意数量的输入参数。

使用 Redis 2.6，您还可以将这些行包装到服务器端 Lua 脚本中，以最终获得接受输入列表并返回所需结果的命令：

```
eval "redis.call( 'sadd', 'tmp', unpack(KEYS) );
      redis.call( 'zinterstore', 'res', 2, 'tmp', 'Users', 'weights', 0, 1 );
      local res = redis.call( 'zrange', 'res', 0, -1, 'withscores' );
      redis.call( 'del', 'res', 'tmp' ) ; 
      return res
     " 2 David Linda 
```

如果可以使用脚本轻松实现，您可以放心地假设不会将新命令添加到 Redis。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-31T05:09:38.510

使用排序集是因为您要处理已排序的项目。您要求的是不要将排序集用作排序集。如果您不关心排序顺序，那么排序集可能不是您想要的。您已经可以检索多个键，但不能检索任意键。

如果您的主要目标是检索多个任意键，请使用散列和 hmget。如果您的主要需求是访问排序集，请使用排序集并执行脚本路径或管道一系列 zscore 调用。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-30T11:00:28.450

你不能用一个命令得到它。您可以做的最接近的事情是在一个响应中得到它：

```
MULTI
ZSCORE Users David
ZSCORE Users Linda
EXEC 
```

**编辑**：或者，您可以使用用户分数维护并行哈希，并使用

```
HMGET UserScores David Linda 
```

# php - CSV压缩到TAR.GZ并上传如何读取

> ID：10814829
> 
> 赞同：0
> 
> 时间：2012-05-30T10:52:08.720
> 
> 标签：php, csv, upload, compression, tar

我要上传大的 CSV 文件，所以我决定将其压缩为 tar.gz 并上传并解压缩并读取 CSV

但我无法从我尝试使用的谷歌获得任何帮助

```
$filename = "/usr/local/something.txt.gz";
$zd = gzopen($filename, "r");
$contents = gzread($zd, 10000);
gzclose($zd); 
```

但它并没有给出我期望做的事情。

预先感谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-30T10:58:21.893

您使用的代码只是解析`gzip`编码，而不是实际的`tar`包。

看看 PEARs [File_Archive](http://pear.php.net/package/File_Archive)包，它似乎可以为所欲为。

# android - 如何在 android 布局中创建 webview 和单选按钮？

> ID：10814836
> 
> 赞同：0
> 
> 时间：2012-05-30T10:52:38.127
> 
> 标签：android

我是安卓新手。我想动态创建一个 webview 并在该单选按钮下方。我该如何为此创建android布局？我需要在列表视图中显示这些。帮我...

提前致谢...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-30T11:06:29.500

您可以创建一个`FrameLayout`，您可以在其中创建一个`WebView`和一个`RadioGroup`作为子视图。并将重力设置`RadioGroup`为底部。在这种情况下，两个视图`WebView`都`RadioGroup`将重叠。

但是，如果您不希望它们重叠，请使用`LinearLayout`而不是`FrameLayout`并将其设置`layout_weight="1"`为`WebView`.

希望这会有所帮助。

# javascript - document.addEventListener("touchmove", preventBehavior, false); - 阻止我使用溢出：滚动；- 变通？

> ID：10814838
> 
> 赞同：2
> 
> 时间：2012-05-30T10:52:47.110
> 
> 标签：javascript, ios, cordova, overflow, touchmove

我使用 phonegap 构建一个 ios 应用程序，这样你就不能移动 phonegap 使用的窗口`document.addEventListener("touchmove", preventBehavior, false);`

这很好......但它也阻止我`overflow:scroll`在一段文本上使用 css。

有没有工作可以让这两个仍然工作？有没有办法我可以在 js 之后加载 css 部分，以便它覆盖它？或者我可以只应用`document.addEventListener("touchmove", preventBehavior, false);`到身体而不是它的内容吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-31T16:05:18.943

发现一个phonegap / cordova只能解决dosnt要求您首先使用`document.addEventListener("touchmove", preventBehavior, false);`的问题-进入您的xcode项目.. porject文件>支持文件>cordova.plist然后在顶部将“UIWebViewBounce”更改为NO。

从[这里](http://hankchizljaw.co.uk/tutorials/prevent-window-bounce-phonegap-1-7-ios-tip/13/05/2012/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-31T07:10:48.247

要捕获您可以编写的所有滚动像素

```
document.addEventListener("touchStart",<method>,true/false)
document.addEventListener("touchMove",<method>,true/false)
document.addEventListener("touchEnd",<method>,true/false) 
```

您是否在正文加载功能中添加了 touchEventListener ？如果你写 event.preventDefault(); 它将终止事件行为，这就是您的 overflow:scroll 属性不起作用的原因。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-31T07:17:18.890

我认为您可以在“touchmove”时检测到目标元素：

```
document.addEventListener("touchmove", function(event) {

    if (event.target.tagName != "TEXTAREA") { // Element that you don't want to be prevented default event.

          event.preventDefault();
    }
}); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-24T03:08:27.010

在上一个版本的cordova.plist 中由config.xml 更改，然后设置

“UIWebViewBounce”值=“假”

# javascript - JavaScript 变量范围和 underscore.js

> ID：10814839
> 
> 赞同：1
> 
> 时间：2012-05-30T10:52:47.167
> 
> 标签：javascript

我有一个函数，里面有这个：

```
var fobj = function(){};

var my_obj = fobj.extend({
    test: function(){
        this.year = 1999;  
        my_fmagic.doMagic([
            {
                field: 'year', 
                type: 'function', 
                value: function(data_from_doMagic){

                    console.log(data_from_doMagic, this.year);

                    return data_from_doMagic == this.year;
                }
            }
        ]);
    }
}); 
```

然后，`doMagic`函数：

```
var fmagic = function(){};

var my_fmagic = fmagic.extend({
    doMagic: function( rules ) {
        var data_from_doMagic = 1999;
        _.each(rules, function(rule) { 
            switch(rule.type) {
                case "function":
                    var f = _.wrap(rule.value, function(func){
                        return func( data_from_doMagic );
                    });
                    f();
                    break;
            }
        });
    }
}); 
```

这个想法是：将一组“规则”传递给`doMagic`并让它完成其余的工作。

预期结果：`test()`应该返回`true`（好吧，在这个例子中它不会返回任何东西，很明显，因为没有返回，但`value`规则的字段应该是`true`。）

问题：结果是`true`it's `false`，因为`f()`in中的函数`doMagic`不知道变量`year`是什么，因此它将“1999”与“undefined”进行比较。

如您所见，我知道问题出在哪里，但我想不出任何解决方案。

想法？

问候

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-30T12:19:43.740

您发布到*（原始）*问题的代码与您最终在小提琴中展示的代码***完全不同。***

问题在这里：

```
test: function(){
    this.year = 1999;  // <=== This isn't a variable, as you originally showed
    my_fmagic.doMagic([
        {
            field: 'year', 
            type: 'function', 
            value: function(data_from_doMagic){

                // *** `this` here won't be the same as `this` was above ***

                console.log(data_from_doMagic, this.year);

                return data_from_doMagic == this.year;
            }
        }
    ]);
} 
```

快速修复是：

```
test: function(){
    var self = this;   // <=== Create a variable to close over

    this.year = 1999;

    my_fmagic.doMagic([
        {
            field: 'year', 
            type: 'function', 
            value: function(data_from_doMagic){

                console.log(data_from_doMagic, self.year); // <== And use it here

                return data_from_doMagic == self.year;     // <== And use it here
            }
        }
    ]);
} 
```

[更新的小提琴](http://jsfiddle.net/k2awe/1/)

发生这种情况是因为在 JavaScript 中，`this`完全取决于函数的*调用*方式，而不是定义的位置。当调用你传递的函数时`value`，`this`将是全局对象（`window`浏览器上的 , ），因为代码没有做任何事情来告诉引擎`this`应该是什么。

所以要解决这个问题，简单的答案是在`test`函数调用的上下文中创建一个变量，并将其赋值为`this`; 然后我们使用该变量 ( `self`) 而不是`this`在`value`函数内，因为`value`函数在调用的上下文中关闭`test`。

更多探索*（披露：这些都来自我的博客）*：

*   [*神话方法*](http://blog.niftysnippets.org/2008/03/mythical-methods.html)
*   [*你必须记住`this`*](http://blog.niftysnippets.org/2008/04/you-must-remember-this.html)
*   [*闭包并不复杂*](http://blog.niftysnippets.org/2008/02/closures-are-not-complicated.html)

# c# - console.writeLine(matrix) 二维数组 String[,]

> ID：10814842
> 
> 赞同：1
> 
> 时间：2012-05-30T10:53:02.953
> 
> 标签：c#, matrix, console.writeline

我已经建立了一个如下的矩阵

```
00   node1 node2 node3
node1  0    1     0
node2  1    1     1
node3  0    0     0 
```

我决定用`String[,] matrix`. 我希望下面的代码能给我我想要的矩阵，但是当我编译它时，它只打印出“node i”和“node j”其他任何东西。

```
public AdjMatrix(ArrayList nodeList,ArrayList linkList)
        {
            String[,] matrix = new String [nodeList.Count,nodeList.Count];
            ArrayList result = new ArrayList();

            using (StreamWriter writer = new StreamWriter("C:\\Users\\Martina\\Desktop\\matrix.txt"))
            {
                Console.SetOut(writer);

                //inizializzazione dei nomi delle classi
                for (int i = 0; i < nodeList.Count; i++)
                {
                    if (i == 0)
                    {
                        matrix[i,0]=("");
                    }
                    else
                    {
                        foreach (EA.Element node in nodeList)
                        {
                            matrix[i,0] = node.Name;
                        }
                        Console.WriteLine("la riga della matrice" + matrix[i,0]);
                    }
                }

                 //inizializzazione dei valori della matrice
                for (int j = 0; j < nodeList.Count; j++)
                 {
                    if (j==0)
                    {
                        matrix[0,j]=("");
                    }
                    else
                    {
                        foreach (EA.Element node in nodeList)
                        {
                            matrix[0,j] = node.Name;
                        }
                        Console.WriteLine("la riga della matrice" + matrix[0,j]);
                    }
                }

                //definizione dell'esistenza del link
                foreach (EA.Connector link in linkList)
                {
                    for (int i = 1; i < nodeList.Count; i++)
                    {
                        int supplier = link.SupplierID;
                        int client = link.ClientID;

                        String supplierNode = modelRepository.GetElementByID(supplier).Name;
                        String clientNode = modelRepository.GetElementByID(client).Name;

                        if (supplierNode.Equals((String)matrix[i,0]))
                        {
                            for (int j = 1; j < nodeList.Count; j++)
                            {
                                if (clientNode.Equals((String)matrix[0,j]))
                                {
                                    matrix[i,j] = "1";
                                }
                                else
                                {
                                    matrix[i,j] = "0";
                                }
                            }
                        }
                    }
                }

               Console.WriteLine("matrix : ");
            for (int i = 0; i < nodeList.Count; i++)
            {
                for (int j = 0; j < nodeList.Count; j++)
                    Console.Write(matrix[i, j] + "\t");
                    Console.WriteLine();
            }
            }
         } 
```

为什么它至少不打印节点的名称，我找不到错误，为什么它不起作用。感谢您的帮助。

在*nodeList*中，我得到了字符串节点的名称，并且*linkList*包含连接器元素，因此我可以将客户端元素和供应商元素与我的节点进行比较。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-31T10:11:36.667

好的，再次浏览您的代码，我刚刚意识到您所做的和您想要做的是两件不同的事情。你想要的是一个数组数组。你所拥有的是一个数组数组的数组......

看看你的代码。matrix 是一个 ArrayList 并且为每个节点添加一个新的 ArrayList 到矩阵。此时你已经有二维了。在将每个节点的 ArrayList 添加到矩阵时，您还可以浏览新创建的 ArrayList 并为每个节点添加另一个 ArrayList。所以最后你有 (n2)+1 ArrayLists 其中 n 是节点的数量。我很确定你不想要那个:-)

我再次建议您坚持使用简单的 bool[][] 并从字典中获取节点名称。或者，如果 bools 没有削减它，您可以使用 float[][] 作为加权连接矩阵。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-31T08:18:11.900

因此，如果我理解正确，您有一个包含 ArrayLists 的 ArrayList。将 matrix[i] 的内容转换为字符串是行不通的。尝试将其更改为 matrix[i][0] 对于初学者并告诉会发生什么。

# jstl - 如何在显示标签中给出 c:if 标签

> ID：10814847
> 
> 赞同：1
> 
> 时间：2012-05-30T10:53:35.927
> 
> 标签：jstl, displaytag

我的 jsp 文件中有一个显示标签。就像是..

```
<display:table id="currentRow" name="${ListObj}" requestURI="" sort="page" defaultsort="2"
                    pagesize="5" class="displayTable">
            <display:caption><font color="red">Users List</font></display:caption>

            <display:column property="ID" title="Role" ></display:column>
            <display:column property="Name" title="User Name" sortable="true"></display:column>

            <c:if test="%{currentRow.ID ne '1'}">
                <display:column >
                    <a href="javascript:editUserJS('editUser.jav?id=${currentRow.ID}');"><i>edit</i></a>
                </display:column>

            </c:if> 

        </display:table> 
```

我已经编写了代码`<c:if test="%{currentRow.ID ne '1'}">`，我不想显示 ID 为 1 的用户的编辑链接。但这种情况不起作用。即显示标签中没有行显示编辑链接。但如果我给`<c:if test="%{currentRow.ID eq '1'}">`，编辑链接将被显示。

我怎样才能让它显示除 ID=1 之外的所有行？？？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-30T11:00:04.900

您应该将 if 语句放在`<display:column>`标签内，因为即使标签为空，您也总是希望`<td>`标签呈现在表格中。

```
<display:column >
    <c:if test="%{currentRow.ID ne 1}">
        <a href="javascript:editUserJS('editUser.jav?id=${currentRow.ID}');"><i>edit</i></a>
    </c:if>
</display:column> 
```

如果 id 属性是一个整数，您将希望将其作为 int 执行 equals。

# json - 如何给 JSON 对象命名？

> ID：10814850
> 
> 赞同：3
> 
> 时间：2012-05-30T10:01:42.733
> 
> 标签：json

假设您获得了这个 JSON 对象：

```
{ id: 3, name: 'C' } 
```

你怎么知道它是**维生素对象**还是**编程语言对象**。我清楚了吗？

在类型化语言中，我们只是从名称中理解对象的性质（`Type`对象的）。**每个对象都有一个名称。**我们如何使用 JSON 实现类似的功能？我们如何为 JSON 对象命名？有什么既定的模式吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-30T11:10:51.587

如果您遇到此问题，则表示您的序列化格式未正确定义。您应该始终能够毫无问题地从 JSON 对象反序列化。

有两种选择：

**添加类型字段**：您无法创建类型化对象，因为有多个类型具有相同的字段名称集。通过添加类型字段，对象的底层类型毫无疑问。使用此选项，您将必须在创建真实对象时完成处理类型字段的过程。

**使用上下文来决定对象是什么类型**：如果您提交的查询暗示应该只返回一种类型的对象，那么就没有问题。或者，如果可以返回多种类型，则响应格式应按类型对对象进行分组。

```
{
  "states": [ { id: 3, name: 'New York' } ],
  "cities": [ { id: 4, name: 'New York' } ]
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-30T11:39:09.423

您必须添加一个描述对象类型的字段。这样你就*永远不会*怀疑类型。[以Google 的 Calendar API](https://developers.google.com/google-apps/calendar/v3/reference/)为例。Google 的日历资源都有一个字段“kind”来描述类型。

[日历事件](https://developers.google.com/google-apps/calendar/v3/reference/events)如下所示：

```
{
    "kind": "calendar#event",
    "etag": etag,
    "id": string,
    "created": datetime,
    "updated": datetime,
    "summary": string,
    ...
} 
```

[日历列表条目](https://developers.google.com/google-apps/calendar/v3/reference/calendarList)，如：

```
{
    "kind": "calendar#calendarListEntry",
    "etag": etag,
    "id": string,
    "summary": string,
    "description": string,
    "location": string,
    ...
} 
```

等等

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-30T10:51:35.097

对于从其他地方获取的 JSON，没有办法做到这一点。

如果您可以控制 JSON，那么您可以这样做：

1.  *为每个*对象添加一个“类型”字段。

2.  定制一个 JSON 函数来处理这个问题。这可以通过两种方式完成，一种安全，一种不安全。

### 安全方法

创建一个函数`stringifyJSONType()`。这一个像往常一样字符串化，但动态添加了一个类型参数。

```
 function stringifyJSONType(o){
  o.type=o.constructor.name;
  var s=JSON.stringify(o);
  delete o.type; //To be clean and not modify the object.
  return s;
 } 
```

现在，在“安全”方法中，我们必须为我们期望解析的每种类型创建一个 switch-case。这仅允许某些类型（那些已保存在 switch-case 中的类型）。

```
function parseJSONType(s){
 var o=JSON.parse(s);
 switch(o.type){

  case "String":
   o.__proto__=String;
   break;
  case "Date":
   o.__proto__=Date;
   break;
  case "City": //Your custom object
   o.__proto__=City;
   break;  
  case "State": //Your custom object
   o.__proto__=State;
   break;  
  case "Country": //Your custom object
   o.__proto__=Country;
   break;  

/*.... more stuff... */

  case "Object":
  default:
   o.__proto__=Object;
   break;

 }
delete o.type;
return o;
} 
```

现在，像`JSON.parse()`and一样使用这两种方法`JSON.stringify()`，它就会起作用。但是对于您想要支持的每种新类型，您都必须添加一个额外的`case`.

### 不安全的方法

不是太不安全，只是它使用了邪恶的`eval()`方法。[这不太好。](https://stackoverflow.com/questions/86513/why-is-using-the-javascript-eval-function-a-bad-idea). 只要没有其他人能够`type`向您的 JSON 添加自定义参数，就可以了。

在这里，您使用与`stringifyJSONType()`上面相同的方法，但使用不同的解析方法。

```
 function stringifyJSONType(o){
  o.type=o.constructor.name;
  var s=JSON.stringify(o);
  delete o.type; //To be clean and not modify the object.
  return s;
 }

function parseJSONType(s){
 var o=JSON.parse(s);
 o.__proto__=eval(o.type);
 delete o.type;
 return o;
} 
```

这样做的好处是不需要 switch-case 并且很容易扩展到新类型（不需要更改代码）。

# socket.io - 无效的套接字密钥、soket.io 服务器和 cocoa-websocket 客户端

> ID：10814852
> 
> 赞同：1
> 
> 时间：2012-05-30T10:53:51.173
> 
> 标签：socket.io, asyncsocket

尝试握手时，我在服务器上收到无效的套接字密钥警告。它有时会发生，但并非总是如此。

服务器是 node.js 上的 socket.io，客户端是 cocoa-websocket。

有什么帮助吗？

谢谢。

# objective-c - iOS 4.3.5 上的奇怪崩溃

> ID：10814854
> 
> 赞同：0
> 
> 时间：2012-05-30T10:54:09.697
> 
> 标签：objective-c, ios

SIGSEGV SEGV_ACCERR

这是堆栈跟踪（根据 crittercism）

崩溃的线程：

```
0    libobjc.A.dylib 0x33b75c98 objc_msgSend + 15
1    Foundation 0x34ce5389 -[NSThread main] + 44
2    Foundation 0x34d575cd __NSThread__main__ + 972
3    libsystem_c.dylib 0x34600311 _pthread_start + 248 
```

其他线程：

```
0    libsystem_kernel.dylib 0x345c4c00 mach_msg_trap + 20
1    CoreFoundation 0x368f62bf __CFRunLoopServiceMachPort + 94
2    CoreFoundation 0x368f8569 __CFRunLoopRun + 356
3    CoreFoundation 0x36888ec3 CFRunLoopRunSpecific + 230
4    CoreFoundation 0x36888dcb CFRunLoopRunInMode + 58
5    GraphicsServices 0x3604241f GSEventRunModal + 114
6    GraphicsServices 0x360424cb GSEventRun + 62
7    UIKit 0x35732d69 -[UIApplication _run] + 404
8    UIKit 0x35730807 UIApplicationMain + 670
9    (app name) 0x3b97 main (main.m:8) 
```

主题：未知名称

```
0    libsystem_kernel.dylib 0x345c7fbc kevent + 24
1    libdispatch.dylib 0x33799041 _dispatch_queue_invoke + 92
2    libdispatch.dylib 0x337985f1 _dispatch_worker_thread2 + 192
3    libsystem_c.dylib 0x34601591 _pthread_wqthread + 264 
```

主题：未知名称

```
0    libsystem_kernel.dylib 0x345c4c00 mach_msg_trap + 20
1    CoreFoundation 0x368f62bf __CFRunLoopServiceMachPort + 94
2    CoreFoundation 0x368f8569 __CFRunLoopRun + 356
3    CoreFoundation 0x36888ec3 CFRunLoopRunSpecific + 230
4    CoreFoundation 0x36888dcb CFRunLoopRunInMode + 58
5    WebCore 0x36051285 _ZL12RunWebThreadPv + 388
6    libsystem_c.dylib 0x34600311 _pthread_start + 248 
```

主题：未知名称

```
0    libsystem_kernel.dylib 0x345c4c00 mach_msg_trap + 20
1    CoreFoundation 0x368f62bf __CFRunLoopServiceMachPort + 94
2    CoreFoundation 0x368f8569 __CFRunLoopRun + 356
3    CoreFoundation 0x36888ec3 CFRunLoopRunSpecific + 230
4    CoreFoundation 0x36888dcb CFRunLoopRunInMode + 58
5    Foundation 0x34cf27fd +[NSURLConnection(NSURLConnectionReallyInternal) _resourceLoadLoop:] + 212
6    Foundation 0x34ce5389 -[NSThread main] + 44
7    Foundation 0x34d575cd __NSThread__main__ + 972
8    libsystem_c.dylib 0x34600311 _pthread_start + 248 
```

主题：未知名称

```
0    libsystem_kernel.dylib 0x345c4c00 mach_msg_trap + 20
1    CoreFoundation 0x368f62bf __CFRunLoopServiceMachPort + 94
2    CoreFoundation 0x368f8569 __CFRunLoopRun + 356
3    CoreFoundation 0x36888ec3 CFRunLoopRunSpecific + 230
4    CoreFoundation 0x368cb6d9 CFRunLoopRun + 48
5    (app name) 0x0001e04b +[ASIHTTPRequest runRequests] (ASIHTTPRequest.m:4791)
6    Foundation 0x34ce5389 -[NSThread main] + 44
7    Foundation 0x34d575cd __NSThread__main__ + 972
8    libsystem_c.dylib 0x34600311 _pthread_start + 248 
```

主题：未知名称

```
0    libsystem_kernel.dylib 0x345c6c60 __select + 20
1    libsystem_c.dylib 0x34600311 _pthread_start + 248 
```

主题：未知名称

```
0    libsystem_kernel.dylib 0x345c6d18 __semwait_signal + 24
1    libsystem_c.dylib 0x345ceeb9 pthread_cond_wait + 32
2    CoreMedia 0x313578fb WaitOnCondition + 10
3    CoreMedia 0x31357841 FigSemaphoreWaitRelative + 72
4    MediaToolbox 0x3336ba6b fpa_AsyncMovieControlThread + 54
5    CoreMedia 0x313754e3 figThreadMain + 162
6    libsystem_c.dylib 0x34600311 _pthread_start + 248 
```

主题：未知名称

```
0    libsystem_kernel.dylib 0x345c4c00 mach_msg_trap + 20
1    CoreFoundation 0x368f62bf __CFRunLoopServiceMachPort + 94
2    CoreFoundation 0x368f8569 __CFRunLoopRun + 356
3    CoreFoundation 0x36888ec3 CFRunLoopRunSpecific + 230
4    CoreFoundation 0x36888dcb CFRunLoopRunInMode + 58
5    MapKit 0x313a345d _ZN16TileCachePrivate14runCacheThreadEv + 280
6    MapKit 0x313a3341 _ZL15_runCacheThreadPv + 8
7    libsystem_c.dylib 0x34600311 _pthread_start + 248 
```

主题：未知名称

```
0    libsystem_kernel.dylib 0x345c6d18 __semwait_signal + 24
1    libsystem_c.dylib 0x345ceeb9 pthread_cond_wait + 32
2    QuartzCore 0x30dcb737 _ZN2CA13DispatchGroup6threadEPv + 90
3    QuartzCore 0x30de583d thread_fun + 16
4    libsystem_c.dylib 0x34600311 _pthread_start + 248 
```

主题：未知名称

```
0    libsystem_kernel.dylib 0x345c4c00 mach_msg_trap + 20
1    CoreFoundation 0x368f62bf __CFRunLoopServiceMachPort + 94
2    CoreFoundation 0x368f8569 __CFRunLoopRun + 356
3    CoreFoundation 0x36888ec3 CFRunLoopRunSpecific + 230
4    CoreFoundation 0x36888dcb CFRunLoopRunInMode + 58
5    MapKit 0x313ae215 +[NSThread(MKAdditions) _mapkit_runThread:] + 340
6    Foundation 0x34ce5389 -[NSThread main] + 44
7    Foundation 0x34d575cd __NSThread__main__ + 972
8    libsystem_c.dylib 0x34600311 _pthread_start + 248 
```

主题：未知名称

```
0    libsystem_kernel.dylib 0x345c73ec __workq_kernreturn + 8 
```

主题：未知名称

```
0    libsystem_kernel.dylib 0x345c73ec __workq_kernreturn + 8 
```

对于如何解决此崩溃的任何建议，我们将不胜感激。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-30T12:31:17.807

由于内存泄漏或僵尸对象而发生此崩溃。您正在释放一个稍后在主线程上访问的对象。追踪这一点的最佳方法是使用仪器泄漏检测或 NSZombie。

泄漏可能在您的应用程序中的任何地方，崩溃报告无法为您提供很多帮助。

# javascript - Ruby On Rails - 当我回击时，我只看到 Javascript 代码？

> ID：10814862
> 
> 赞同：2
> 
> 时间：2012-05-30T10:55:05.733
> 
> 标签：javascript, ruby-on-rails, render, reload, back

回到我的最新应用程序时，我只能看到我包含在 assets/javascripts 中的一个 javascript 文件中的代码？

如果我然后尝试重新加载，它会按照我希望的方式呈现页面。

我刚刚注意到，当我继续申请时，也会发生同样的事情。

缓存的东西？

# java - 如何匹配在 AspectJ 中没有特定注释的方法

> ID：10814864
> 
> 赞同：7
> 
> 时间：2012-05-30T10:55:14.920
> 
> 标签：java, annotations, aspectj, pointcut

我有一个名为@Invisible 的自定义注释。现在我想匹配所有调用一个没有@Invisible Annotation 的方法。我怎样才能做到这一点？（带注解风格开发）

我的第一次尝试是：

```
@Pointcut("execution(!@my.package.Invisible * some.other.package.execute(..))") 
```

但这似乎不起作用......

换句话说：如果该方法有 Invisible 注释，我想忽略它。否则我想根据我的建议执行一些代码......

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-31T09:11:33.473

尝试类似的东西`execution(* some.other.package.execute(..)) && !@annotation(my.package.Invisible)`

# mobile - jad 和 jar 大小在 j2me 中不匹配

> ID：10814870
> 
> 赞同：0
> 
> 时间：2012-05-30T10:55:40.450
> 
> 标签：mobile, java-me, midp, jad

我正在为我的应用程序使用 N97 和诺基亚 5530。每当我安装我的应用程序时，都会更频繁。我发现这个错误。我搜索了互联网并找到了多种解决此问题的方法。我确实使用了它们，例如检查 jar 的大小和用 jad 编写的那个并纠正了它，但问题仍然没有解决。

如何在我的构建中删除此错误。非常感谢这方面的任何帮助。

我已经阅读了这些东西——[在 J2ME 应用程序中统一 .jar 和 .jad 文件](https://stackoverflow.com/questions/8869288/unification-of-jar-and-jad-files-in-a-j2me-application)——但是今天的设备和互联网要快得多。我们不能忽略 jad 文件的创建吗？

* * *

编辑

以下是 jad 和 manifest 属性。我正在使用 NetBeans 6.9 和 Nokia S60 第 5 版 SDK 来生成和构建 MIDlet。

jad属性如下

`Backkey: -11
LGE-MIDlet-Height: 400
LGE-MIDlet-Target-LCD-Height: 400
LGE-MIDlet-Target-LCD-Width: 240
LGE-MIDlet-Width: 240
LeftSoftKey: -6
MIDlet-1: MyAppName,/icon.png,com.main.MainMidlet
MIDlet-Jar-Size: 964642
MIDlet-Jar-URL: MyAppName.jar
MIDlet-Name: MyAppName
MIDlet-Permissions: javax.microedition.io.Connector.http
MIDlet-Touch-Support: true
MIDlet-Vendor: www.MyApp.com
MIDlet-Version: 1.4
MicroEdition-Configuration: CLDC-1.1
MicroEdition-Profile: MIDP-2.0
Navi-Key-Hidden: true
Nokia-MIDlet-App-Orientation: portrait
Nokia-MIDlet-On-Screen-Keypad: no
RightSoftKey: -7
UseNativeTextButton: true`

和清单属性是

`Manifest-Version: 1.0
Ant-Version: Apache Ant 1.8.0
Created-By: 1.6.0_21-b06 (Sun Microsystems Inc.)
MIDlet-1: MyAppName,/icon.png,com.main.MainMidlet
MIDlet-Permissions: javax.microedition.io.Connector.http
MIDlet-Vendor: www.MyApp.com
Nokia-MIDlet-App-Orientation: portrait
LGE-MIDlet-Height: 400
Nokia-MIDlet-On-Screen-Keypad: no
MIDlet-Name: MyAppName
Navi-Key-Hidden: true
MIDlet-Touch-Support: true
LGE-MIDlet-Width: 240
MIDlet-Version: 1.4
Backkey: -11
LeftSoftKey: -6
UseNativeTextButton: true
LGE-MIDlet-Target-LCD-Height: 400
RightSoftKey: -7
LGE-MIDlet-Target-LCD-Width: 240
MicroEdition-Configuration: CLDC-1.1
MicroEdition-Profile: MIDP-2.0`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-01T11:29:58.170

我唯一能想到的是我通常`MIDlet-Jar-Size`在清单中看到，而不是在 jad 中。

不幸的是，我从未弄清楚构建系统如何设法将其插入压缩文件（jar 基本上是 zip 文件），而且我不知道如何告诉 Netbeans 将属性从 jad 移动到清单。

我的印象是，如果您要求 Netbeans 生成一个简单的 HelloWorld MIDlet 并且不修改 ant 脚本，`MIDlet-Jar-Size`最终会出现在清单中。

我确实认为该属性与正在签名的 MIDlet 之间存在关系。它可以作为校验和。

# c++ - 在c ++中以一个winform显示多个视频流

> ID：10814873
> 
> 赞同：2
> 
> 时间：2012-05-30T10:55:49.203
> 
> 标签：c++, visual-c++, win32gui

我想用 C++ 开发一个 Windows 应用程序，它可以在一个窗口中绘制来自网络的多个视频流（如视频会议应用程序）。换句话说，我想要一个窗口并将这个窗口分成几个部分，每个部分显示一个视频流。（就像我们在视频会议应用程序中看到的一样，比如 oovoo 或 webex）。

我如何开始学习和女巫重要的主题我在网上谷歌但找不到任何关于这个主题的文章或例子。

请指导我非常感谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-30T11:09:11.590

我做了一个类似的项目，它在窗口中显示了 4 个不同的视频。这些视频来自网络（TCP/IP）连接。我使用 VLC 对视频进行编码。（视频为 mp4 格式。）我还使用 QT 进行 GUI 设计。由于 QT 在 qt 4.5 版之后具有声子框架，我想您可以将 QT 用于编码视频和 gui 设计。

你可以在这里查看：http: [//qt-project.org/doc/qt-4.8/phonon-overview.html](http://qt-project.org/doc/qt-4.8/phonon-overview.html)

# android - 检测 RAZR maxx 与 RAZR

> ID：10814875
> 
> 赞同：2
> 
> 时间：2012-05-30T10:55:53.410
> 
> 标签：android, motorola

**RAZR maxx 上的Build.Model**的值与普通 RAZR 上的值完全相同。它只是说“DROID RAZR”。

我需要检测它是哪一个，但系统值似乎都没有返回任何不同的东西。去哪里寻找不同之处？

当然，我已经尝试过 Build.*（主板等）中的所有内容。他们都是一样的）。

# php - 想要从产品集合中删除 (((price_table_price.value)*1) <

> ID：10814879
> 
> 赞同：0
> 
> 时间：2012-05-30T10:56:05.577
> 
> 标签：php, magento

我对 Magento 很陌生。（确实这是我的第一个任务）。如果您能在这方面帮助我，我将非常高兴。

我正在使用 magento 示例数据库，Magento 版本是 1.3.2。

本地 PC 网址：[http://magento.local/electronics/cell-phones.html?price=4,100](http://magento.local/electronics/cell-phones.html?price=4,100)

类别：Mage_Catalog_Block_Product_List

```
protected function _getProductCollection()
{
    if (is_null($this->_productCollection)) {
        $layer = Mage::getSingleton('catalog/layer');
        /* @var $layer Mage_Catalog_Model_Layer */
        if ($this->getShowRootCategory()) {
            $this->setCategoryId(Mage::app()->getStore()->getRootCategoryId());
        }

        // if this is a product view page
        if (Mage::registry('product')) {
            // get collection of categories this product is associated with
            $categories = Mage::registry('product')->getCategoryCollection()
                ->setPage(1, 1)
                ->load();
            // if the product is associated with any category
            if ($categories->count()) {
                // show products from this category
                $this->setCategoryId(current($categories->getIterator()));
            }
        }

        $origCategory = null;
        if ($this->getCategoryId()) {
            $category = Mage::getModel('catalog/category')->load($this->getCategoryId());
            if ($category->getId()) {
                $origCategory = $layer->getCurrentCategory();
                $layer->setCurrentCategory($category);
            }
        }
        $this->_productCollection = $layer->getProductCollection();

        $this->prepareSortableFieldsByCategory($layer->getCurrentCategory());

        if ($origCategory) {
            $layer->setCurrentCategory($origCategory);
        }
    }        
    return $this->_productCollection;
} 
```

我需要从 $this->_productCollection 中删除 (((price_table_price.value)*1) < 400)。无法弄清楚这是如何以及何时添加到产品集合中的。请帮忙！！！

谢谢！！！！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-31T02:44:24.963

由于没有人帮助我，我自己想出了答案。

首先，我将说明我的任务是什么。

假设我有 10 个价格范围在 100-200 的产品，12 个在 500-600 和 1 个 X 类别的 10000-20000 产品。使用 magento 的默认价格范围，它显示为两个范围，即 0-10000 和 10000-200000，这对客户来说没有多大用处。

我必须将范围设为 100-200,500-600 和 1000<

我会在这里发布我所有的代码。

当我关注其他自定义范围的帖子时，他们中的大多数人只考虑分层导航的显示。但是在这里我已经考虑在单击最终范围（即 1000<）时显示产品

请注意，LMage 是本地->LMage 文件夹，而且我是 Magento 的新蜜蜂；）。

如果您找到更好的方法，请在此处发布。

```
class LMage_CatalogIndex_Model_Mysql4_Price extends Mage_CatalogIndex_Model_Mysql4_Price {
  public function getCount($range, $attribute, $entitySelect) {
    $select = clone $entitySelect;
    $select->reset(Zend_Db_Select::COLUMNS);
    $select->reset(Zend_Db_Select::ORDER);
    $select->reset(Zend_Db_Select::LIMIT_COUNT);
    $select->reset(Zend_Db_Select::LIMIT_OFFSET);

    $select->join(array('price_table' => $this->getMainTable()), 'price_table.entity_id=e.entity_id', array());
    $response = new Varien_Object();
    $response->setAdditionalCalculations(array());

    if ($attribute->getAttributeCode() == 'price') {
        $select->where('price_table.customer_group_id = ?', $this->getCustomerGroupId());
        $args = array(
            'select' => $select,
            'table' => 'price_table',
            'store_id' => $this->getStoreId(),
            'response_object' => $response,
        );
        Mage::dispatchEvent('catalogindex_prepare_price_select', $args);
    }

    $fields = array('count' => 'COUNT(DISTINCT price_table.entity_id)', 'range' => "FLOOR(((price_table.value" . implode('', $response->getAdditionalCalculations()) . ")*{$this->getRate()})/{$range})+1");

    $select->from('', $fields)
            ->group('range')
            ->where('price_table.website_id = ?', $this->getWebsiteId())
            ->where('price_table.attribute_id = ?', $attribute->getId());

    $result = $this->_getReadAdapter()->fetchAll($select);

    $counts = array();
    foreach ($result as $row) {
        if ($row['range'] >= 11) {
            $counts[11] = isset($counts[11])?$row['count']+$counts[11]:$row['count'];
        } else {
            $counts[$row['range']] = $row['count'];
        }
    }

    return $counts;
 }

 public function applyFilterToCollection($collection, $attribute, $range, $index, $tableName = 'price_table') {
    /**
     * Distinct required for removing duplicates in case when we have grouped products
     * which contain multiple rows for one product id
     */
    $collection->getSelect()->distinct(true);
    $tableName = $tableName . '_' . $attribute->getAttributeCode();
    $collection->getSelect()->joinLeft(
            array($tableName => $this->getMainTable()), $tableName . '.entity_id=e.entity_id', array()
    );

    $response = new Varien_Object();
    $response->setAdditionalCalculations(array());

    $collection->getSelect()
            ->where($tableName . '.website_id = ?', $this->getWebsiteId())
            ->where($tableName . '.attribute_id = ?', $attribute->getId());

    if ($attribute->getAttributeCode() == 'price') {
        $collection->getSelect()->where($tableName . '.customer_group_id = ?', $this->getCustomerGroupId());
        $args = array(
            'select' => $collection->getSelect(),
            'table' => $tableName,
            'store_id' => $this->getStoreId(),
            'response_object' => $response,
        );

        Mage::dispatchEvent('catalogindex_prepare_price_select', $args);
    }

    $collection->getSelect()->where("(({$tableName}.value" . implode('', $response->getAdditionalCalculations()) . ")*{$this->getRate()}) >= ?", ($index - 1) * $range);
    if($index<=10){
        $collection->getSelect()->where("(({$tableName}.value" . implode('', $response->getAdditionalCalculations()) . ")*{$this->getRate()}) < ?", $index * $range);
    }

    return $this;
}

public function getCategoryProductPrices($attribute = null, $entitySelect) {
    $select = clone $entitySelect;
    $select->reset(Zend_Db_Select::COLUMNS);
    $select->reset(Zend_Db_Select::ORDER);
    $select->reset(Zend_Db_Select::LIMIT_COUNT);
    $select->reset(Zend_Db_Select::LIMIT_OFFSET);

    $response = new Varien_Object();
    $response->setAdditionalCalculations(array());

    $select->join(array('price_table' => $this->getMainTable()), 'price_table.entity_id=e.entity_id', array());

    if ($attribute->getAttributeCode() == 'price') {
        $select->where('price_table.customer_group_id = ?', $this->getCustomerGroupId());
        $args = array(
            'select' => $select,
            'table' => 'price_table',
            'store_id' => $this->getStoreId(),
            'response_object' => $response,
        );
        Mage::dispatchEvent('catalogindex_prepare_price_select', $args);
    }

    $select
            ->from('', "(price_table.value" . implode('', $response->getAdditionalCalculations()) . ")")
            ->where('price_table.website_id = ?', $this->getWebsiteId())
            ->where('price_table.attribute_id = ?', $attribute->getId());

    return $this->_getReadAdapter()->fetchAll($select);
}
} 
```

* * *

```
class LMage_CatalogIndex_Model_Price extends Mage_CatalogIndex_Model_Price{
public function getCategoryProductPrices($attribute, $entityIdsFilter){
    return $this->_getResource()->getCategoryProductPrices($attribute, $entityIdsFilter);
}    
} 
```

* * *

```
class LMage_Catalog_Model_Layer_Filter_Price extends Mage_Catalog_Model_Layer_Filter_Price {

public function getPriceRange() {
    $range = $this->getData('price_range');
    if (is_null($range)) {
        $productsprice = $this->getCategoryProductPricesArr();
        $maxPrice = $this->getMaxPriceInt();            
        $maxPrice = $this->getMaxPriceOfMaxOccurenceRange($productsprice, $maxPrice);
        $index = 1;
        do {
            $range = pow(10, (strlen(floor($maxPrice)) - $index));
            $items = $this->getRangeItemCounts($range);
            $index++;
        } while ($range > self::MIN_RANGE_POWER && count($items) < 1);            
        $this->setData('price_range', $range);
    }
    return $range;
}

public function getMaxPriceOfMaxOccurenceRange($productsprice, $maxPrice) {
    $rangeArr = array();
    $i = 1;
    $val = 0;
    do {
        $val = self::MIN_RANGE_POWER * $i - 1;
        $rangeArr[$val] = 0;
        $i *= 10;
    } while ($maxPrice > $val);
    foreach ($productsprice as $value) {            
        $rangeArr[pow(10, strlen(floor($value['value']))) - 1]+=1;
    }
    return array_search(max($rangeArr), $rangeArr);
}

public function getCategoryProductPricesArr() {
    $productsprice = $this->getData('products_price_arr');
    if (is_null($productsprice)) {
        $productsprice = Mage::getSingleton('catalogindex/price')->getCategoryProductPrices(
                $this->getAttributeModel(), $this->_getBaseCollectionSql()
        );

        $this->setData('products_price_arr', $productsprice);
    }
    return $productsprice;
}

/**
 * Prepare text of item label
 *
 * @param   int $range
 * @param   float $value
 * @return  string
 */
protected function _renderItemLabel($range, $value) {
    $store = Mage::app()->getStore();

    if ($value > 10) {
        $fromPrice = $store->formatPrice(($value - 1) * $range);
        //$toPrice = $store->formatPrice($value * $range);
        return Mage::helper('catalog')->__('%s < ', $fromPrice);
    }
    $fromPrice = $store->formatPrice(($value - 1) * $range);
    $toPrice = $store->formatPrice($value * $range);        
    return Mage::helper('catalog')->__('%s - %s', $fromPrice, $toPrice);
} 
```

# javascript - 关于方向变化的 JavaScript 警报在 Android 上不断重复

> ID：10814883
> 
> 赞同：1
> 
> 时间：2012-05-30T10:56:18.097
> 
> 标签：javascript, android, device-orientation

当移动设备的方向发生变化时，此代码会创建警报。它适用于我的 iPhone，但在我的 Android 上，警报不断触发，有效地使页面不可用。代码在 dom 就绪上运行。

```
function orientation() {

    alert('orientation change');
    // return false;
}   
window.onorientationchange = orientation; 
```

有人知道为什么会这样吗？万一有一个使用它的解决方案，我在这个网站上使用 jQuery。谢谢

更新 - 这段代码做同样的事情：

```
var supportsOrientationChange = "onorientationchange" in window, orientationEvent =     supportsOrientationChange ? "orientationchange" : "resize";

  window.addEventListener(orientationEvent, function() {
     alert ('orientation changed');
  }, false); 
```

# security - 如何保护果园中匿名用户的内容类型？

> ID：10814884
> 
> 赞同：0
> 
> 时间：2012-05-30T10:56:18.397
> 
> 标签：security, orchardcms

我添加了一个页面，现在应该只有经过身份验证的用户才能访问。

可以做些什么来实现这一目标？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-30T17:05:01.760

这是一个正在添加到 Orchard 1.5 的功能，但您已经可以从 1.x 分支获取该功能。图库还提供了一个模块：http: [//gallery.orchardproject.net/List/Modules/Orchard.Module.Downplay.Quanta](http://gallery.orchardproject.net/List/Modules/Orchard.Module.Downplay.Quanta)

# jsf - 必须按命令按钮两次

> ID：10814888
> 
> 赞同：9
> 
> 时间：2012-05-30T10:56:46.347
> 
> 标签：jsf, primefaces

我正在构建一个网页，现在注意到我必须按两次命令按钮。任何命令按钮都有同样的问题，所以我想我会在其中一个上添加动作监听器，看看我是否能看到一些东西。

```
<h:form id="formP">
    <p:commandButton id="temp" value="photos" actionListener="#{viewBacking.debugBreakpoint()}" action="userPhoto" />
</h:form> 
```

后备豆有

```
public void debugBreakpoint() {
    int i = 0;
    i++;
} 
```

不幸的是，这确实有帮助。它仅在第二次按下后才达到我的断点。我怀疑某处的某个字段没有通过验证，但我想要一些方法来检测到底出了什么问题——为什么我需要第二次推送？有没有可以在 Glassfish 中打开的选项，或者可以查看调试信息转储的其他选项？我可以忽略转储，直到一切稳定，然后在我第一次按下按钮时查看到底发生了什么。

有什么我可以使用的工具吗？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-05-30T13:31:53.190

当给定的父组件`<h:form>`已被另一个命令按钮/链接渲染/更新时，可能会发生这种情况`<f:ajax>`。给定的表单将失去它的视图状态，它只有在第一次提交表单后才能恢复。任何后续提交都将按照通常的方式进行。[这是由JSF 问题 790](http://java.net/jira/browse/JAVASERVERFACES_SPEC_PUBLIC-790)中描述的 JSF JS API 中的错误引起的，该错误在即将发布的 JSF 2.2 中得到修复。

您需要修复另一个命令按钮/链接，`<f:ajax>`以`<h:form>`在`render`.

```
<f:ajax render=":somePanel :formP" /> 
```

另一种方法是用`<f:ajax>`PrimeFaces替换它`<p:commandLink>`，`<p:commandButton>`这样您就不需要显式包含所有表单的客户端 ID。PrimeFaces 自己的 JS API 已包含此修复程序。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-30T10:59:50.827

加上`event="onclick"`你的`p:commandbutton`
，我想这会解决的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-25T06:00:25.340

或者你可以在你的 commandButton 中添加这个 ajax="false" 属性

```
<p:commandButton ajax="false" action="#{userController.create}" value="#{bundle.CreateUserSaveLink}"></p:commandButton> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-09-03T13:47:50.307

我遇到了同样的问题。解决方案很简单，无需同时拥有 actionListener 和操作，只需将 actionListener 方法转换为将字符串返回到您要导航到的位置并将其用作操作的方法（并且没有 actionListener）。

简单来说：**只**使用一个动作（不要在提交表单的 commandButton 上使用 actionListener）。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2015-02-06T10:24:28.153

请检查您与 bean 的绑定。

bean 字段应该是字符串或非原始的。

# magento - Magento 控制器覆盖

> ID：10814891
> 
> 赞同：0
> 
> 时间：2012-05-30T10:57:02.747
> 
> 标签：magento, controller, overriding

我正在尝试覆盖扩展的控制器....即覆盖购物车控制器。

当前覆盖购物车控制器的扩展是：

```
Innoexts/Warehouse/controllers/Checkout/CartController.php 
```

Innoexts 模块中的配置条目是：

```
<frontend>
    <routers>
        <checkout>
            <args>
                <modules>
                    <Innoexts_Warehouse before="Mage_Checkout">Innoexts_Warehouse_Checkout</Innoexts_Warehouse>
                </modules>
            </args>
        </checkout>
    </routers>

...blah...blah...

</frontend> 
```

innoext cartcontroller 文件的顶部是：

```
require_once 'Mage/Checkout/controllers/CartController.php';
class Innoexts_Warehouse_Checkout_CartController extends Mage_Checkout_CartController { 
```

我想用这个控制器覆盖它：

```
Myco/Warehousemod/controllers/Checkout/CartController.php 
```

控制器文件的顶部是：

```
require_once 'Innoexts/Warehouse/controllers/Checkout/CartController.php';
class Myco_Warehousemod_Checkout_CartController extends Innoexts_Warehouse_Checkout_CartController { 
```

我创建的配置条目是：

```
<global>

...blah...blah...

<rewrite>
        <myco_warehousemod_checkout_cart>
            <from><![CDATA[#^/checkout/cart/#]]></from>
            <to>/warehousemod/checkout_cart/</to>
        </myco_warehousemod_checkout_cart>
    </rewrite>

</global>

<frontend>

<routers>
        <checkout>
    <args>
        <modules>
                  <Myco_Warehousemod before="Innoexts_Warehouse_Checkout">Myco_Warehousemod_Checkout</Myco_Warehousemod>
                </modules>
            </args>
        </checkout>
    </routers>

...blah...blah...

</frontend> 
```

我现在收到结帐/购物车 URL 的 404 not found 错误......谁能看到我哪里出错了？在线资源非常不同......而且令人困惑！问题可能出在我试图覆盖覆盖控制器...？？

提前致谢...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-30T11:43:53.787

需要删除第一次重写：

```
<rewrite>
    <myco_warehousemod_checkout_cart>
        <from><![CDATA[#^/checkout/cart/#]]></from>
        <to>/warehousemod/checkout_cart/</to>
    </myco_warehousemod_checkout_cart>
</rewrite> 
```

我认为某些人应该停止编写教程....用他们半途而废的 SEO 努力使网络变得混乱....

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-30T15:17:04.273

这部分用于旧版本的 Magento（我认为是 1.4 之前的版本），但如果你想扩展一个在配置文件中有这样重写的控制器，你必须在你的配置中做同样的事情。

```
<rewrite>
    <myco_warehousemod_checkout_cart>
        <from><![CDATA[#^/checkout/cart/#]]></from>
        <to>/warehousemod/checkout_cart/</to>
    </myco_warehousemod_checkout_cart>
</rewrite> 
```

新版本只使用之前的部分，所以你应该有这样的东西：

```
<routers>
  <checkout>
    <args>
        <modules>
           <Myco_Warehousemod before="Innoexts_Warehouse">Myco_Warehousemod_Checkout</Myco_Warehousemod><!-- just the name of the module Innoexts_Warehouse the overridden folder will be taken from the part after the name of your module so Magento will look in app/local/Myco/Warehousemod/controllers/Checkout/* and load all the controllers from there -->
        </modules>
    </args>
  </checkout>
</routers> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-31T19:29:21.507

对于那些想了解扩展和可能的解决方案之间的冲突（就像上面的案例）的人来说，只是一个附加说明，请参考以下链接：

[http://www.webshopapps.com/blog/2010/11/resolving-magento-extension-conflicts/](http://www.webshopapps.com/blog/2010/11/resolving-magento-extension-conflicts/)

[http://sweettoothrewards.com/wiki/index.php/Resolving_extension_conflicts](http://sweettoothrewards.com/wiki/index.php/Resolving_extension_conflicts)

[http://magebase.com/magento-tutorials/magento-extension-clashes-winners-and-loosers/](http://magebase.com/magento-tutorials/magento-extension-clashes-winners-and-loosers/)

[http://www.magestore.com/blog/2011/12/21/magento-methods-to-resolve-the-module-conflicts-in-magento/](http://www.magestore.com/blog/2011/12/21/magento-methods-to-resolve-the-module-conflicts-in-magento/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-01-23T09:50:00.753

这是关于控制器包含路径的一个小通知。

如果打开**Magento 编译器模式**，此包含路径**可能会导致错误**。

 **```
require_once 'Mage/Checkout/controllers/CartController.php'; 
```

取而代之的是，它**很好用**

```
require_once Mage::getModuleDir('controllers', 'Mage_Checkout').DS.'CartController.php'; 
```

会更安全。**

# sql-server - 在 WHERE 子句中使用可选参数

> ID：10814893
> 
> 赞同：2
> 
> 时间：2012-05-30T10:57:15.223
> 
> 标签：sql-server, tsql, stored-procedures

我有一个SP

```
ALTER PROCEDURE dbo.sp_Compare
    @lst varchar(100),
    @frst varchar(100) = NULL,
    @passportNo varchar(50) = NULL
AS
SELECT * FROM dbo.User
WHERE LastName like '%' + @lst + '%'
    AND (
         FirstName like @frst + ' %'
         OR FirstName like '% ' + @frst + ' %'
         OR FirstName like '% ' + @frst
         OR FirstName = @frst
        )
    OR Passport = @passportNo; 
```

有时`@frs`或`@passportNo`两者都可能无法提供详细信息

所以我想更改上面的查询，以便在未传递可选参数时（即，当其值为空时）不应该考虑对该特定列进行过滤

即，如果`@frst`为 NULL，则不应根据 FirstName 过滤结果，它应该像`FirstName like '%' + @frst + '%'`WHERE 子句中没有条件一样工作。

如何在不针对不同情况重复编写相同逻辑的情况下编写查询？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-05-30T11:00:48.910

```
WHERE (@frst IS NULL OR 
    (
         LastName like '%' + @lst + '%'
         AND (
             FirstName like @frst + ' %'
             OR FirstName like '% ' + @frst + ' %'
             OR FirstName like '% ' + @frst
             OR FirstName = @frst
        )
    )
 )
 AND (@passportNo IS NULL OR
        Passport = @passportNo); 
```

**编辑**：实际上这应该更有效：

```
WHERE ( @frst IS NULL OR FirstName like '%' + @frst + '%' )
AND   ( @lst  IS NULL OR LastName  like '%' + @lst  + '%' )
AND   ( @passportNo IS NULL OR Passport = @passportNo ) 
```

# android - 在 ICS ListView 上不滚动

> ID：10814894
> 
> 赞同：0
> 
> 时间：2012-05-30T10:57:17.393
> 
> 标签：android, android-layout, android-widget

大家好，我正在尝试使用这行代码向上滚动 listView.smoothScrollToPosition(listCustomAdapter.getCount()); . 它适用于具有 2.2 操作系统的三星 Galaxy，但它不适用于 HTC One V 的 ICS。无论如何请指导我为什么它不适用于 ICS传入的文本消息。注意我的 listView 工作用于显示传入的聊天文本消息。任何人都可以指导我如何向上滚动 listView 或我在哪里做这在 ICS 上不可行。谢谢 。.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-30T11:14:49.927

嗨，谢谢我得到了解决方案。现在需要把它工作正常..

```
listview.setTranscriptMode(ListView.TRANSCRIPT_MODE_ALWAYS_SCROLL);
listview.setStackFromBottom(true); 
```

# javascript - 从 textarea 中获取值并将其放置在带有一些添加文本的新 textarea 中

> ID：10814900
> 
> 赞同：0
> 
> 时间：2012-05-30T10:57:39.877
> 
> 标签：javascript, jquery, html, css

1.  我有一个文本区域（txtar1），它将由用户使用 HTML 代码填充。
2.  我有一个“生成”按钮；
3.  单击“生成”按钮时，来自 txtar1 的值将被放置在另一个文本区域 (txtar2) 中。但是添加了一些 CSS 代码。

这是我所做的：

HTML：

```
<table>
<tr>
    <td valign="top"><label>Enter HTML Code : </label></td>
    <td><textarea id="htmlcode_txtarea"></textarea></td>
</tr>
<tr>
    <td>&nbsp;</td>
    <td><input type="button" name="" id="submit_btn" value="Generate" /></td>
</tr>
<tr id="new_html">
    <td><label>New HTML</label></td>
    <td><textarea id="new_htmlcode_txtarea"></textarea></td>
</tr> 
```

javascript/jquery：

```
jQuery('#submit_btn').click(function(){ 
    var newVal = jQuery('#htmlcode_txtarea').attr('value');
    var addVal = "#af-form-1031686823 .af-element{float:left;}" + 
                "#af-form-1031686823 .af-clear{display:none}:" + 
                "#af-form-1031686823 .af-body input.text{width: 150px!important;margin0right:15px!important}" +
                "#af-form-1031686823 .buttonContainer{margin-top:-6px!important}";

    jQuery('#new_html').show();
    jQuery('#new_htmlcode_txtarea').attr('value',newVal);
}); 
```

我该怎么办？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-30T11:00:23.167

简单的wato实现是利用[**`.val()`**](http://api.jquery.com/val/)函数

```
$("#textarea2").val($("#textarea1").val() + "text to append ") 
```

# python - 将项目写入scrapy中的csv文件时如何对列表中的多个项目进行编码

> ID：10814902
> 
> 赞同：0
> 
> 时间：2012-05-30T10:57:42.203
> 
> 标签：python, csv, scrapy, pipeline

我是scrapy的新手，我抓取了一个网站并获取了所有必需的项目，需要将它们写入csv文件。

我的`pipeline.py`代码是

```
import csv

class example2Pipeline(object):

    def __init__(self):
        self.brandCategoryCsv = csv.writer(open('example.csv', 'wb'))
        self.brandCategoryCsv.writerow(['book_name','dimensions'])

    def process_item(self, item, spider):
        self.brandCategoryCsv.writerow([item['book_name'].encode('utf-8'),
                                    item['dimensions'].encode('utf-8'),
                                    ])
        return item 
```

并且上述项目的文件中`xpath`代码的结果是`spider.py`

```
book_name = i.select('div[@class="slickwrap full"]/div[@id="bookstore_detail"]/div[@class="book_listing clearfix"]/div[@class="bookstore_right"]/div[@class="title_and_byline"]/p[@class="book_title"]/text()').extract()
Result : [u'Rahul']

dimensions = i.select('div[@class="slickwrap full"]/div[@id="bookstore_detail"]/div[@id="main_tab_group"]/div[@class="panes slickshadow"]/div[@class="pane clearfix"]/div[@class="clearfix"]/div[@class="about_author"]/div[@id="book_stats"]/p/a/text()')[0:2].extract()
Result: [u'Pocket',u'Science Fiction &amp; Fantasy',u' 26 pgs'] 
```

如果您在上面观察到该`book_name`项目，则列表中只有一项，因此如果我们使用 book_name[0]，我们将能够通过我在`pipeline.py`文件中编写的代码对字符串进行编码

但是对于该 `dimensions`项目，我们在列表中有多个字符串，所以当我运行上面的`pipeline.py`代码时出现以下错误

```
exceptions.AttributeError: 'list' object has no attribute 'encode' 
```

那就是我们无法对列表进行编码，我无法对`pipeline.py`文件中列表中的各个元素进行编码。

我还想将一行中的每列 1 个项目写入 csv 文件，例如

```
book_name  |   dimensions

Pocket         Science Fiction &amp; Fantasy,  26 pgs 
```

如果您想要我的`spider`文件的其他代码，我将粘贴在这里。

任何帮助将不胜感激，在此先感谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-08-20T13:56:18.757

如果列表中只有 unicode 字符串，请尝试 " ".join(somelist)，然后从那里对其进行编码或 str 。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-30T11:14:17.030

试试下面..

```
(item['book_name']).encode('utf-8') ### make sure item['book_name'] is string/unicde becoz they(string/unicode) have encode method not list. 
```

对于换行符，您可以尝试..

```
self.brandCategoryCsv = csv.writer(open('example.csv', 'wb', newline='')) 
```

要对列表中的每个项目进行编码，请使用下面的代码。

```
[i.encode('utf-8') for i in item['dimensions']] 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-08-19T06:17:30.120

试试python的**map函数**

```
 def process_item(self, item, spider):
    self.brandCategoryCsv.writerow([map(lambda x: x.encode('utf-8'), item['book_name']),
                                    map(lambda x: x.encode('utf-8'), item['dimensions']),
                                    ])
    return item 
```

# tomcat - 一个具有多个 servlet 的核心应用程序

> ID：10814904
> 
> 赞同：0
> 
> 时间：2012-05-30T10:57:56.113
> 
> 标签：tomcat, web-applications

我创建了一个 webapp（用 Eclipse 编写，在 Tomcat 中运行），它是一个 Servlet，它在初始化时创建了一个 Runnable 对象。Runnable 对象会加载一些东西并将一些数据存储在内存中，servlet 的存在只是为了向用户呈现对象中的最新数据（没有数据库，我们只关心当前数据）。

问题是，我现在想让另一个 Servlet 访问相同的数据并以不同的方式呈现给用户，这意味着 Servlet 创建 Runnable 对象的模型不再可行。

所以，我的问题是：我如何创建一个应用程序，让一个主类完成所有工作，而一堆 Servlet 与之交谈以获取数据？

作为一种我不太喜欢的解决方法，我刚刚让 doGet() 方法解析请求字符串并根据其内容发送不同的响应，但我宁愿使用单独的 Servlet 来完成。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-30T11:10:52.860

在方法期间创建 Runnable 对象`ServletContextListener.contextInitialized()`并将其设置`ServletContext`为使用`ServletContext.setAttribute()`.

并且，两个 servlet 都可以从中获取 Runabble 对象`ServletContext.getAttribute()`并呈现数据。

# php - PHP / MySQL - 交叉引用 mysql_fetch_array 数据

> ID：10814908
> 
> 赞同：0
> 
> 时间：2012-05-30T10:58:16.783
> 
> 标签：php, mysql, arrays

我正在使用 PHP / MySQL 填充一个表。它显示分类 id 而不是分类名称，因此我需要交叉引用分类表来获取名称。现在我可以通过添加一个 MySQL 查询在循环中为表中的每一行执行此操作，例如`"SELECT classification_name from classifications WHERE classification_id = $row['classification']";`

我觉得这会对 SQL 造成不必要的压力，因为对于大量行，我将初始化大量 SQL 查询。

我可以将分类表带入 PHP 数组并交叉引用它，但是有没有更简单的方法来交叉引用两组 SQL 数据（其中一组在循环之外）。

我认为我很愚蠢，因为我确信我过去使用过一种更简单的方法。

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-30T11:01:43.700

这应该在使用`JOIN`;的查询中完成。使用 PHP 以这种方式获取信息对您的系统来说效率非常低。

# java - 使 JFrame 像对话框一样工作

> ID：10814911
> 
> 赞同：0
> 
> 时间：2012-05-30T10:58:25.650
> 
> 标签：java, swing, jframe, jbutton

我有一个表格供用户填写 JFrame，然后将收集的数据写入不同类的 JTable。

我正在尝试将其配置为当用户选择“提交”时 JFrame 将关闭，但不会关闭程序。我需要什么命令来实现这一点？

提交按钮的代码如下：

```
JButton bMark = new JButton("Submit");
    bMark.addActionListener(new ActionListener() {
        public void actionPerformed(ActionEvent e) {
            String start = tbStart.getText();
            String end = tbEnd.getText();

            String[] marking = {start, end, active, body, dysk, trem, brady};

            //This is just for me to ensure the collected data is correct
            System.out.println(marking[0] + " " +marking[1] + " " +marking[2] + " " + 
                    marking[3] + " " + marking[4] + " " + marking[5] + " " + marking[6]);

            //This is is the class the form data is being sent to
            markTable.main(marking);

            //This is where I would like the close the current window

        }
    });
    bMark.setBounds(308, 191, 86, 23); 
```

类名是createMark，方法是public createMark

感谢任何回复的人，

杰瑞德。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-30T11:02:48.377

> //这是我想关闭当前窗口的地方

有这些方法

*   `JFrame#setVisible(false)`，但不终止当前 JVM，此会话存在直到 PC 重新启动，

*   `JFrame#dispose()`终止当前的 JVM，

*   `System#exit(int);`终止当前的 JVM，

更好的是[JFrame#setDefaultCloseOperation](http://docs.oracle.com/javase/tutorial/uiswing/components/frame.html)

不要提供[JOptionPane](http://docs.oracle.com/javase/tutorial/uiswing/components/dialog.html)，也许直接使用它会更好

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-30T11:03:11.220

您需要在 JFrame 上设置[默认关闭操作](http://docs.oracle.com/javase/6/docs/api/javax/swing/JFrame.html#setDefaultCloseOperation%28int%29)，如下所示：

```
frame.setDefaultCloseOperation(JFrame.HIDE_ON_CLOSE); 
```

这将处理用户使用标题栏关闭窗口或按 Alt+F4 之类的东西的情况。

接下来，只需`setVisible(false)`在按下提交按钮时调用。

# jdbc - SQL PreparedStatement 和自动提交

> ID：10814913
> 
> 赞同：6
> 
> 时间：2012-05-30T10:58:29.427
> 
> 标签：jdbc, prepared-statement, autocommit

如果我使用具有“自动提交关闭”的 JDBC 连接创建准备好的语句，我是否需要调用 commit() 以使事务永久化或仅准备调用就足够了？请注意，我只想准备一个语句并保留它以供以后执行。

非常感谢！

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-05-30T11:05:08.703

答案是：是的，你必须调用 commit。

“准备”步骤不做任何与服务器上的事务处理相关的事情。

您必须调用`executeUpdate()`(or `execute()`) 来启动事务（假设使用的 SQL 实际上确实启动了事务）

使用没有自动提交的 PreparedStatement 需要以下步骤：

1.  准备声明
2.  设置参数值
3.  调用`executeUpdate()`（或`execute()`取决于语句的类型）
4.  称呼`Connection.commit()`

为了让事情更清楚**：**调用`prepareStatement()`不需要.**`commit()`**

# wampserver - Skype 未安装，但 Wampserver(2.2d) 在托盘中保持橙色

> ID：10814918
> 
> 赞同：-2
> 
> 时间：2012-05-30T10:59:04.947
> 
> 标签：wampserver

如题。我正在使用旧笔记本电脑 acer travelmate 529txv，在安装主板驱动程序之前 Wampserver 很好，但安装后它在托盘中保持橙色。这些驱动程序称为“ULi_Integrated220.rar”。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-02T07:11:17.013

我将 apache 从 2.2.21 更改为 2.2.22，现在它可以工作了。

# openwrt - 如何在 OpenWRT buildroot 中选择目标和其他功能？

> ID：10814919
> 
> 赞同：8
> 
> 时间：2012-05-30T10:59:15.867
> 
> 标签：openwrt

我已经成功地从 subversion 存储库克隆了 OpenWRT buildroot，并且我一直在使用它来构建我在 Qemu 上运行的图像。我可以很好地在 Qemu 中运行图像。

现在我尝试为路由器构建一个映像——Linksys WRT54GL——但我在文档中找不到我应该如何选择目标。

我*想*这些是正确的选择：

*   我选择了博通 BCM947xx/953xx

*   在“目标图像”中，我选择了 jffs2 和 squashfs

然后，编译后进入目录`bin/brcm47xx`，发现大量图片：

```
openwrt-brcm47xx-jffs2-128k.trx
openwrt-brcm47xx-jffs2-64k.trx
openwrt-brcm47xx-squashfs.trx
.
.
.
openwrt-wrt54g3g-em-jffs2.bin
openwrt-wrt54g3g-em-squashfs.bin
openwrt-wrt54g3g-jffs2.bin
openwrt-wrt54g3g-squashfs.bin
openwrt-wrt54g3gv2-vf-jffs2.bin
openwrt-wrt54g3gv2-vf-jffs2.noheader.bin
openwrt-wrt54g3gv2-vf-squashfs.bin
openwrt-wrt54g3gv2-vf-squashfs.noheader.bin
openwrt-wrt54g-jffs2.bin
openwrt-wrt54gs-jffs2.bin
openwrt-wrt54g-squashfs.bin
openwrt-wrt54gs-squashfs.bin
openwrt-wrt54gs_v4-jffs2.bin
openwrt-wrt54gs_v4-squashfs.bin
openwrt-wrt610n_v1-jffs2.bin
openwrt-wrt610n_v1-squashfs.bin
openwrt-wrtsl54gs-jffs2.bin
openwrt-wrtsl54gs-squashfs.bin 
```

所以我的问题是：

*   我如何知道在`target system`and中选择什么`target images`？

*   从生成的所有图像中，我如何知道我应该使用哪一张（例如，WRT54GL 不在上面的列表中；如何判断是否可以使用“ `openwrt-wrt54g-jffs2.bin`”？

*   我可以使用什么标准来决定我将使用 jffs 还是 squashfs 图像？

谢谢！

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-06-07T22:46:22.027

> ## 我如何知道在目标系统和目标图像中选择什么？

`Target system`您可以从以下中的 Target/Platform 列推断`Table of Hardware`：

[http://wiki.openwrt.org/toh/start](http://wiki.openwrt.org/toh/start)

`Target images`取决于构建的预期用途，但在最常见的情况下（即放置在路由器上的图像），您需要`squashfs`或`jffs2`. 请参阅下面的*文件系统*链接。

* * *

> ## 从生成的所有图像中，我如何知道我应该使用哪一张（例如，WRT54GL 不在上面的列表中；如何判断是否可以使用“openwrt-wrt54g-jffs2.bin”？

如果您的路由器未在自定义图像中列出，您可能应该使用通用图像，例如：`openwrt-brcm47xx-squashfs.trx`

* * *

> ## 我可以使用什么标准来决定我将使用 jffs 还是 squashfs 图像？

来自[http://wiki.openwrt.org/doc/techref/filesystems](http://wiki.openwrt.org/doc/techref/filesystems)：

**壁球FS**

> `+`占用尽可能少的空间
> 
> `+`允许为恢复执行一个白痴证明FailSafe，因为不可能写入它
> 
> `-`只读
> 
> `-`浪费空间，因为每次修改其中包含的文件时，实际上都会将其副本复制到第二个（JFFS2）分区

**JFFS**

> `+`可写，具有日志和磨损均衡
> 
> `+`很酷
> 
> `-`被压缩，所以程序（尤其是 opkg）无法提前知道一个包将占用多少空间

不要误导只读部分

> 所有的 OpenWrt 固件都包含一个完全可写的根文件系统，它在断电时将保持不变。混淆是由于 squashfs 是一个只读文件系统。所有 OpenWrt 固件还包括一个 jffs2 分区——文件名的 squashfs 部分仅指固件映像中包含的文件系统；附加文件或更改存储在 jffs2 上。
> 
> *   squashfs 分区将始终包含固件随附的所有文件；如果不重新刷新，您将无法更改这些。（见#6）
> *   jffs2 分区只包含您对文件系统的更改；由于 squashfs 仍然包含原始版本，您可以轻松地将文件恢复到原始状态。
> 
> 可以通过安装固件的 jffs2 版本来删除 squashfs 分区，但不建议这样做——它会占用更多空间并且缺少上述故障保护功能。

来源：[https ://forum.openwrt.org/viewtopic.php?pid=36636#p36636](https://forum.openwrt.org/viewtopic.php?pid=36636#p36636)

如果有疑问，请`squashfs`按照[http://wiki.openwrt.org/doc/howto/obtain.firmware.download#filesystem使用](http://wiki.openwrt.org/doc/howto/obtain.firmware.download#filesystem)

# javascript - 如何正确获取 svg 样式并附加到 Raphael？

> ID：10814921
> 
> 赞同：2
> 
> 时间：2012-05-30T10:59:20.713
> 
> 标签：javascript, jquery, svg, raphael

我有一个 svg 文件并使用 Raphael 库。我的 svg 文件包含以下样式：

```
<defs>
  <style type="text/css">
   <![CDATA[
    .fil1 {fill:#2B2A29}
    .fil0 {fill:#009846;fill-opacity:1}
    .fnt0 {font-weight:bold;font-size:10.9996;font-family:'Arial'}
   ]]>
  </style>
  <filter id="Filter" filterUnits="userSpaceOnUse" x="0" y="0" width="660" height="400">
    <feGaussianBlur in="SourceAlpha" stdDeviation="3" result="blur"/>
    <feOffset in="blur" dx="0" dy="3" result="offsetBlur"/>
    <feMerge>
        <feMergeNode in="offsetBlur"/>
        <feMergeNode in="SourceGraphic"/>
    </feMerge>
  </filter>
 </defs> 
```

`Raphael`使用[此](http://readysetraphael.com/)在线工具将此 svg 文件转换为I。这个工具没有插入我的风格。我得到以下标记：

```
<svg height="400" version="1.1" width="660" xmlns="http://www.w3.org/2000/svg" style="overflow: hidden; position: relative;"><desc>Created with RaphaГ«l 2.1.0</desc><defs/><path style="stroke-opacity: 1;" fill="#000000" stroke="#000000" d="M296,116L297,118L343,124L375,105L366,94L339,88L320,98L319,98Z" stroke-width="0" stroke-opacity="1"/> 
```

...

如您所见，`defs`标签为空。

我尝试手动添加样式：

```
$('defs').append('<style type="text/css"><![CDATA[.fil1 {fill:#2B2A29}.fil0 {fill:#009846;fill-opacity:1}.fnt0 {font-weight:bold;font-size:10.9996;font-family:'Arial'}]]></style><filter id="Filter" filterUnits="userSpaceOnUse" x="0" y="0" width="660" height="400"><feGaussianBlur in="SourceAlpha" stdDeviation="3" result="blur"/><feOffset in="blur" dx="0" dy="3" result="offsetBlur"/><feMerge><feMergeNode in="offsetBlur"/><feMergeNode in="SourceGraphic"/></feMerge></filter>'); 
```

但是，我得到错误：

```
missing ) after argument list

...ght:bold;font-size:10.9996;font-family:'Arial'}]]></style><filter id="Filter" fi... 
```

如何正确获取 svg 样式并附加`Raphael`？

# ios - 如何应用 CAGradientLayer 作为另一个 CALayer 的掩码？

> ID：10814922
> 
> 赞同：21
> 
> 时间：2012-05-30T10:59:27.780
> 
> 标签：ios, core-animation, calayer, cagradientlayer

我有一个视图，它有一个 CALayer。当我创建一个 CAGradientLayer 并将其应用为该视图的 CALayer 的掩码时，没有任何反应。为什么？

在 -initWithFrame: 的视图中，我这样做：

```
CAGradientLayer *gradient = [CAGradientLayer layer];
gradient.frame = self.bounds;
gradient.colors = [NSArray arrayWithObjects:(id)[[UIColor blackColor] CGColor], (id)[[UIColor whiteColor] CGColor], nil];
//[self.layer insertSublayer:gradient atIndex:0];
self.layer.mask = gradient; 
```

如果我更换

```
self.layer.mask = gradient; 
```

和

```
[self.layer insertSublayer:gradient atIndex:0]; 
```

然后我看到渐变。是从黑到白。

有什么诀窍？

* * *

## 回答 #1

> 赞同：37
> 
> 时间：2012-05-30T11:43:59.560

CALayer 上的 mask 属性使用遮罩层的*alpha*分量来确定什么应该是可见的，什么是不可见的。由于您的两种颜色（黑色和白色）都是完全不透明的（不透明），因此蒙版无效。要解决此问题，您应该将其中一种颜色更改为清晰的颜色：

```
gradient.colors = [NSArray arrayWithObjects:(id)[[UIColor blackColor] CGColor], 
                                            (id)[[UIColor clearColor] CGColor], nil]; 
```

这就是“诀​​窍”：D

# c# - ObjectDataSource 转换问题 - 异常

> ID：10814923
> 
> 赞同：0
> 
> 时间：2012-05-30T10:59:32.420
> 
> 标签：c#, asp.net, data-binding, objectdatasource

我有一个 Gridview 控件，我想根据页面上的一些控件动态绑定它。除了我试图动态设置 Select 方法以及传递参数的以下代码之外，我已经让一切正常工作。我遇到了一个异常，我尝试了多种创建参数的方法。附上代码：

```
string filterValue = FilterValue.Value; //FilterValue.Value is a HiddenField (Value is definitely populated)

MyObjDataSource.SelectParameters.Add("policynumber",TypeCode.String, filterValue);    
MyObjDataSource.SelectMethod = "GetPolicybyPolicyNumber";    
MyObjDataSource.Select(); 
```

我的选择方法如下所示：

```
public IQueryable GetPolicybyPolicyNumber(Parameter policynumber, string sortExpr, int maximumRows, int startRowIndex)
    {
       //Debugging does not even reach here. I'm just returning null for demo purposes
       return null;
    } 
```

我不断得到的例外是：

System.InvalidOperationException：无法在 System.Web.UI.WebControls.ObjectDataSourceView.ConvertType 中将参数“policynumber”的值从“System.String”转换为“System.Web.UI.WebControls.Parameter”
（对象值，类型类型，字符串参数名称) ....

我也试过这个，它给出了同样的例外：

```
 Parameter param = new Parameter();
    param.Type = TypeCode.String;
    param.DefaultValue = FilterValue.Value;
    MyObjDataSource.SelectParameters.Add(param); 
```

有什么建议吗？发送

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-30T11:19:52.817

将第一个参数数据类型更改为字符串，如下所示

`public IQueryable GetPolicybyPolicyNumber(string policynumber, string sortExpr, int maximumRows, int startRowIndex){...}`

# javascript - 用于按源顺序选择 *all* 元素、文本节点和注释节点的 XPath 表达式

> ID：10814927
> 
> 赞同：5
> 
> 时间：2012-05-30T10:59:55.317
> 
> 标签：javascript, html, dom, xpath

选择*所有*元素、文本节点和注释节点的 XPath 表达式是什么，其顺序与它们在文档中出现的顺序相同？

以下有效地选择所有元素，但不选择文本节点和注释节点：

```
var result = document.evaluate('//*', document, null, XPathResult.ORDERED_NODE_SNAPSHOT_TYPE, null),
    index = -1;
while (++index < result.snapshotLength) {
  console.log(result.snapshotItem(index));
} 
```

是否可以执行以下操作？（注意：这是非功能性伪代码。）

```
document.evaluate('//* and text() and comment()'); 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-30T13:05:00.253

```
//node() 
```

选择作为某事物子节点的每个节点：即所有元素、文本节点、注释和处理指令（但不包括属性、命名空间节点或文档节点）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-30T11:08:30.597

使用 XML 文档中的文本和注释节点进行测试。可能有一种更有效的方法，但这会使用联合按文档顺序返回元素、文本和注释节点：

```
//*|//*/text()|//*/comment() 
```

# c++ - 程序如何获取自身的可执行文件名？

> ID：10814934
> 
> 赞同：5
> 
> 时间：2012-05-30T11:00:06.693
> 
> 标签：c++, windows

> **可能重复：**
> [提取当前可执行文件名](https://stackoverflow.com/questions/10572560/extracting-the-current-executable-name)

我创建了一个从 ini 文件读取配置的程序，该文件的名称应该与可执行文件的名称相同，但当然还有它的扩展名。因此，如果我将其命名`myprogram.exe`为 config `myprogram.ini`，并且如果我在编译后更改 exe 的名称，它应该看起来与它的新名称一致。

我知道可以从中获取程序名称，`argv[0]`但这仅在它从命令行开始时才有效，当在资源管理器中单击它时，该数组为空。

当我在这里阅读答案时，我认为它必须与此功能有关：[https](https://stackoverflow.com/a/10572632/393087) ://stackoverflow.com/a/10572632/393087 - 但我找不到任何使用该功能的好例子，我C++ 的初学者和一般函数定义（如 microsoft 页面上提供的定义）对我来说太难理解了，但是当我得到一个工作示例时，我很容易理解。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-05-30T11:09:33.783

```
#include <windows.h>
#include <Shlwapi.h>
// remember to link against shlwapi.lib
// in VC++ this can be done with
#pragma comment(lib, "Shlwapi.lib")

// ...

TCHAR buffer[MAX_PATH]={0};
TCHAR * out;
DWORD bufSize=sizeof(buffer)/sizeof(*buffer);
// Get the fully-qualified path of the executable
if(GetModuleFileName(NULL, buffer, bufSize)==bufSize)
{
    // the buffer is too small, handle the error somehow
}
// now buffer = "c:\whatever\yourexecutable.exe"

// Go to the beginning of the file name
out = PathFindFileName(buffer);
// now out = "yourexecutable.exe"

// Set the dot before the extension to 0 (terminate the string there)
*(PathFindExtension(out)) = 0;
// now out = "yourexecutable" 
```

现在，您有一个指向可执行文件“基本名称”的指针；请记住，它指向 inside `buffer`，因此`buffer`超出范围时`out`不再有效。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-05-30T11:04:21.110

[`GetModuleFileName(NULL, .....)`](http://msdn.microsoft.com/en-us/library/windows/desktop/ms683197%28v=vs.85%29.aspx)

> 但我找不到任何使用该功能的好例子

[你还不够努力。](http://msdn.microsoft.com/en-us/library/windows/desktop/ms683500%28v=vs.85%29.aspx)[msdn 上“GetModuleFileName”](http://msdn.microsoft.com/en-us/library/windows/desktop/ms683197%28v=vs.85%29.aspx)文章 中的“示例”部分

# asp.net - 循环数组列表？使用 Asp.net？

> ID：10814938
> 
> 赞同：-3
> 
> 时间：2012-05-30T11:00:34.027
> 
> 标签：asp.net

在网络应用程序中，我有一个数组列表，

```
 ArrayList lists = new ArrayList();
        lists.Add("S");
        lists.Add("A");
        lists.Add("S");
        lists.Add("I");
        lists.Add("D");
        lists.Add("H"); 
```

现在我正在尝试删除没有计数的arraylist 项目。这意味着如果我有 count =8 则循环将运行 8 次并删除 arraylist 项，如：

```
 1 2  3  4 5 6 7 8 
   S A  S  I D H S **A**

   A is removing from arraylist

  after that  arraylist is  S S I D H only again

   1 2 3 4 5 6 7 8 
   S  S I D H S S **I**

   I is removing from arraylist

   like this upto single item in arraylist . 
```

我用于条件但没有用。我的代码是

```
 ArrayList lists = new ArrayList();
        lists.Add("S");
        lists.Add("A");
        lists.Add("S");
        lists.Add("I");
        lists.Add("D");
        lists.Add("H");

        int lent =8;

        for (int k = 1; k <= lent; k++)
        {
            if (k == lent)
            {
                if (lists.Count == 1)
                {
                    break;
                }
                else
                {

                    lists.RemoveAt(k-1);                        
                    k = 0;
                }
            }
        } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-30T11:31:23.357

我不确定您要做什么..但是以下代码将简单地遍历数组并删除索引 i 处的每个元素。

```
 ArrayList lists = new ArrayList();
        lists.Add("S");
        lists.Add("A");
        lists.Add("S");
        lists.Add("I");
        lists.Add("D");
        lists.Add("H");

        for (int i = lists.Count - 1 ; i >= 0; i --)
        {
           lists.Remove(lists[i]);
        } 
```

它将开始删除索引 5 处的项目，这意味着“H”将是第一个要删除的项目。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-30T11:16:52.903

在数组列表中的示例中，数组中仅插入了 6 个对象（字符串），但您将 lent 定义为 8，为什么？

你为什么不做lists.lenght

# entity-framework - 如何在 EF 中全局设置 TimeSpan 属性的存储类型？

> ID：10814939
> 
> 赞同：1
> 
> 时间：2012-05-30T11:00:35.290
> 
> 标签：entity-framework, ef-code-first, sql-server-ce, entity-framework-4.3

我有一个`DbContext`类，它在`OnModelCreating`. 此上下文在针对 SQL Server 运行时效果很好，但针对 SQL CE 失败，因为某些实体包含`TimeSpan`属性。

当数据库是 SQL CE 时，是否可以修改配置以将存储类型设置为适当的（例如`nvarchar(30)`） ？`OnModelCreating`

在我的主要应用程序中，我有一个`DbContext`这样的：

```
public class MyDbContext
{
    protected override void OnModelCreating(DbModelBuilder modelBuilder)
    {
        modelBuilder.Configurations.Add(new Entity1Config());
        modelBuilder.Configurations.Add(new Entity2Config());
        modelBuilder.Configurations.Add(new Entity3Config());
        // Lots more entity and complex type configurations here.
    }
} 
```

这`DbContext`针对完整的 SQL Server 运行。在我的测试中，我想针对 SQL CE 而不是 SQL Server Express 运行。理想情况下，我想用约定或显式覆盖来覆盖有问题的配置，如下所示：

```
public class MyTestingDbContext : MyDbContext
{
    protected override void OnModelCreating(DbModelBuilder modelBuilder)
    {
        base.OnModelCreating(modelBuilder);
        modelBuilder.Entity<Entity1>()     
            .Property(x => x.Duration)     
            .HasColumnType("nvarchar(30) not null");
    }
} 
```

需要明确的是，我只对不涉及直接修改原始`DbContext`类或其实体的解决方案感兴趣。

* * *

*注意：似乎有一个约定`ModelBuilder`，已经对`MaxLength`属性进行了特定于 SQL CE 的处理，但它主要是使用内部类实现的。（嘘！）*

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-30T11:06:25.257

您可以通过 Fluent Interface 进行配置，调用[DateTimePropertyConfiguration.HasColumnType 方法](http://msdn.microsoft.com/en-us/library/system.data.entity.modelconfiguration.configuration.datetimepropertyconfiguration.hascolumntype%28v=vs.103%29.aspx)

```
 modelBuilder.Entity<MyEntity>()
            .Property(x=> x.Duration)
            .HasColumnType("Varchar(30) NOT NULL"); 
```

或通过[ColumnAttribute.DbType 属性](http://msdn.microsoft.com/en-us/library/system.data.linq.mapping.columnattribute.dbtype.aspx)

# c# - 如何在不退出和重新加载的情况下重新启动应用程序？

> ID：10814944
> 
> 赞同：0
> 
> 时间：2012-05-30T11:00:50.970
> 
> 标签：c#, winforms, restart

当我在运行附加到自身的整个方法之前单击一个按钮时，我希望该按钮重置整个内容。因此，如果我使用`Application.Restart();`它只会重新启动应用程序，但不会运行其余部分。我将如何解决这个问题？我要重新启动应用程序的原因是变量太多，我想重置所有变量。此重置过程必须通过单击特定按钮来完成。但是，该按钮具有大量功能，`Application.Restart();`可以在此方法的任何位置运行该方法。导致此方法不执行。所以基本上我希望这个方法重新启动所有变量，然后运行其余的（从 开始`enableButtons();`）

```
private void puzzleToolStripMenuItem_Click(object sender, EventArgs e) {
        Application.Restart();
        enableButtons();
        puzzleDataMethod();
        MessageBox.Show... 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-30T11:16:25.730

您应该将所有变量移动到一个容器中。当应用程序需要重新启动时，您将重新初始化它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-30T11:22:47.590

你真的不能这样做。您唯一的做法是在重新启动后将您想要恢复的任何状态持久保存到磁盘，并确保`Application.Restart()`是您方法中的最后一次调用。

它可能就像在隔离存储中的文件中设置一个真/假标志一样简单，它告诉您的应用程序的新实例它正在作为重新启动的结果启动，因此它可以运行您当前正在尝试运行的那些命令打电话给`Application.Restart()`.

# php - Zend Framework 2 和日期选择器

> ID：10814948
> 
> 赞同：0
> 
> 时间：2012-05-30T11:00:54.307
> 
> 标签：php, jquery, zend-form, zend-form-element, zend-framework2

我正在使用 zend 框架 2 并通过扩展 Form 来创建表单。对于日期字段，如何使用 Form 使用数据选择器

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-08T06:48:28.177

如果您可以使用 HTML5，那么您可以使用[Zend\Form\Element中的日期表单元素](http://framework.zend.com/manual/2.0/en/modules/zend.form.elements.html#date)

# bash - 在shell中临时解密文件

> ID：10814952
> 
> 赞同：1
> 
> 时间：2012-05-30T11:01:05.227
> 
> 标签：bash, shell, encryption, openssl

我有很多秘密存储在 中`myfile.txt`，我每天或多或少都必须访问这些秘密。所以我使用它加密它`openssl`并在我需要查看它时解密它：

```
openssl aes-256-cbc -a -d -in myfile.txt.enc 
```

这将在我的终端中显示该文件，但它也会保留在那里 - 有没有办法仅将文件临时解密到我可以查看的缓冲区中，然后安全地擦除该缓冲区？简单是王道，我只想快速从加密文件中获取一些数字。

加分项：如果我必须编辑我的加密文件，这是我使用的脚本 - 这种方法安全吗？

```
openssl aes-256-cbc -a -d -in myfile.txt.enc > /tmp/myfile
vim /tmp/myfile
openssl aes-256-cbc -a -e -in /tmp/myfile -out myfile.txt.enc
shred -zu /tmp/myfile 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-30T11:18:51.907

```
read -sp Password: OPENSSLPASS
OPENSSLPASS=$OPENSSLPASS openssl aes-256-cbc -a -d -in myfile.txt.enc -pass env:OPENSSLPASS | less
unset OPENSSLPASS 
```

不涉及任何临时磁盘存储。您的密码在`less`会话期间临时存储在 shell 环境中（这*可能*会解决，因为它仅在`openssl`执行时需要）。`less`完成后不会将输出留在终端中。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-31T00:37:52.100

数据缓冲在屏幕、终端仿真器中，而不是文件所在的系统中。唯一安全的方法是事后关闭终端。

编辑方法对 root 以外的用户是可以的，它对 root 是不安全的，他可以查看 /tmp 中的文件和你的 vim 交换文件。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-27T06:30:05.270

安全的方法是根本不使用临时文件。

当您使用 VIM 时，vim 可以读取加密的二进制文件，在内存中对其进行解密，然后让您对其进行编辑。它反转了在保存时对其进行加密的过程。

将以下内容添加到您的 .vimrc （或其他相关文件）

```
" OpenSSL encrypted files.
" PBKDF v1.5 (salted) aes-256-cbc encrypted file.  (File magic "Salted__")
augroup ossl
autocmd!
autocmd  BufReadPre,FileReadPre     *.ossl set binary
autocmd  BufReadPre,FileReadPre     *.ossl set history=0 cmdheight=3 viminfo=
autocmd  BufReadPre,FileReadPre     *.ossl set noswapfile nowritebackup
"
autocmd  BufReadPost,FileReadPost   *.ossl set shell=/bin/sh shellredir=>
autocmd  BufReadPost,FileReadPost   *.ossl '[,']!openssl aes-256-cbc -d -salt
autocmd  BufReadPost,FileReadPost   *.ossl set nobinary cmdheight& shell&
autocmd  BufReadPost,FileReadPost   *.ossl let b:encflag=1
autocmd  BufReadPost,FileReadPost   *.ossl exe "doau BufReadPost
".expand("%:r")
autocmd  BufReadPost,FileReadPost   *.ossl redraw!
"
autocmd  BufWritePre,FileWritePre   *.ossl mark z
autocmd  BufWritePre,FileWritePre   *.ossl set binary cmdheight=3
shell=/bin/sh
autocmd  BufWritePre,FileWritePre   *.ossl '[,']!openssl aes-256-cbc -salt
"
autocmd  BufWritePost,FileWritePost *.ossl undo
autocmd  BufWritePost,FileWritePost *.ossl set nobinary cmdheight& shell&
autocmd  BufWritePost,FileWritePost *.ossl 'z
augroup END 
```

现在，如果您编辑任何以 .ossl 后缀结尾的文件，您将被要求输入密码来解密它。当您写入时，系统会要求您输入两次密码以重新加密。

注意：不要单独使用 :wq 使用 :w 和 :q ！

警告：为安全起见，专门关闭交换文件和备份文件。

PS：此系统也适用于 PGP/GPG 文件加密以及编辑 Gzip 文件。它所需要的只是一个加密/解密流式（管道）数据的命令。

有关此和其他 VIM 加密/解密方法的更多信息，请参阅... [http://www.ict.griffith.edu.au/anthony/info/crypto/file_encrypt.hints](http://www.ict.griffith.edu.au/anthony/info/crypto/file_encrypt.hints)

# java - 如何使用异步任务将文件上传到服务器？

> ID：10814957
> 
> 赞同：5
> 
> 时间：2012-05-30T11:01:44.370
> 
> 标签：java, android

下面是我将文件上传到服务器的代码。但即使经过几次尝试，甚至在添加严格模式后，我也会遇到网络异常。

我是 Android 新手，不知道如何使用异步任务，许多人建议这种任务用于此类网络操作。谁能告诉我代码哪里错了，我应该在哪里使用异步任务？

```
package de.fileuploader;

import java.io.BufferedReader;
import java.io.File;
import java.io.InputStreamReader;

import org.apache.http.HttpResponse;
import org.apache.http.client.HttpClient;
import org.apache.http.client.methods.HttpPost;
import org.apache.http.entity.mime.HttpMultipartMode;
import org.apache.http.entity.mime.MultipartEntity;
import org.apache.http.entity.mime.content.ByteArrayBody;
import org.apache.http.entity.mime.content.FileBody;
import org.apache.http.entity.mime.content.StringBody;
import org.apache.http.impl.client.DefaultHttpClient;
import org.apache.http.protocol.BasicHttpContext;
import org.apache.http.protocol.HttpContext;

import android.app.Activity;
import android.app.AlertDialog;
import android.content.DialogInterface;
import android.os.Bundle;
import android.os.StrictMode;
import android.util.Log;
import android.view.View;
import android.widget.Button;
import android.widget.TextView;

@SuppressWarnings("unused")
 public class Android_helloActivity extends Activity {

private String newName = "SMSBackup.txt";
private String uploadFile = "/mnt/sdcard/SMSBackup.txt";
private String actionUrl = "http://192.168.1.8:8080/admin/admin/uploads";
// private String
// actionUrl="http://upload-file.shcloudapi.appspot.com/upload";
private TextView mText1;
private TextView mText2;
private Button mButton;

@Override
public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);
        StrictMode.setThreadPolicy(new StrictMode.ThreadPolicy.Builder()  
        .detectDiskReads()  
        .detectDiskWrites()  
        .detectNetwork()   // or .detectAll() for all detectable problems  
        .penaltyLog()  
        .build());  
       StrictMode.setVmPolicy(new StrictMode.VmPolicy.Builder()  
        .detectLeakedSqlLiteObjects()  
        .detectLeakedClosableObjects()  
        .penaltyLog()  
        .penaltyDeath()  
        .build()); 

        mText1 = (TextView) findViewById(R.id.myText2);
        mText1.setText("Upload\n" + uploadFile);
        mText2 = (TextView) findViewById(R.id.myText3);
        mText2.setText("To Server Location\n" + actionUrl);

        mButton = (Button) findViewById(R.id.myButton);
        mButton.setOnClickListener(new View.OnClickListener() {
                public void onClick(View v) {
                        /* uploadFile(); */
                        try {
                                HttpClient httpClient = new DefaultHttpClient();
                                HttpContext localContext = new BasicHttpContext();
                                HttpPost httpPost = new HttpPost(actionUrl);

                                MultipartEntity entity = new MultipartEntity(
                                                HttpMultipartMode.BROWSER_COMPATIBLE);
                                entity.addPart("name", new StringBody(newName));
                                File file=new File(uploadFile);
                                entity.addPart("file", new FileBody(file));
                                //entity.addPart("file", new
                                ByteArrayBody(data,"myImage.jpg"));
                                entity.addPart("gps", new StringBody("35.6,108.6"));
                                httpPost.setEntity(entity);
                                HttpResponse response = httpClient.execute(httpPost,
                                                localContext);
                                BufferedReader reader = new BufferedReader(
                                                new  
                               InputStreamReader(response.getEntity().getContent(), 
                                 "UTF-8"));

                                String sResponse = reader.readLine();
                                Log.i("info", "test");
                                  } catch (Exception e) {
                                // Log.e("exception", e.printStackTrace());
                                 e.printStackTrace();
                                showDialog("" + e);
                               } 
                               }
                               });
                               }

                          private void showDialog(String mess) {
                new AlertDialog.Builder(Android_helloActivity.this).setTitle("Message")
                         .setMessage(mess)
                        .setNegativeButton("Exit", new  DialogInterface.OnClickListener() {
                                public void onClick(DialogInterface dialog, int which)      {
                                }
                        }).show();
 }
} 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-30T11:08:36.870

```
mButton.setOnClickListener(new View.OnClickListener() {
                public void onClick(View v) {

new UploadImageTask().execute(); // initialize asynchronous task

}});

//Now implement Asynchronous Task

public class Get_User_Data extends AsyncTask<Void, Void, Void> {

            private final ProgressDialog dialog = new ProgressDialog(
            MyActivity.this);

    protected void onPreExecute() {
        this.dialog.setMessage("Loading...");
        this.dialog.setCancelable(false);
        this.dialog.show();
    }
        @Override
        protected Void doInBackground(Void... params) {

                    uploadImage(); // inside the method paste your file uploading code
            return null;
        }

        protected void onPostExecute(Void result) {

            // Here if you wish to do future process for ex. move to another activity do here

            if (dialog.isShowing()) {
                dialog.dismiss();
            }

        }
    } 
```

有关更多信息，请参阅此链接 [http://vikaskanani.wordpress.com/2011/01/29/android-image-upload-activity/](http://vikaskanani.wordpress.com/2011/01/29/android-image-upload-activity/)

* * *

## 回答 #2

> 赞同：-3
> 
> 时间：2014-06-11T09:53:06.873

```
/**
 * *******Async Task for Use this UTILITY CLASS *
 * pass the file which need to upload *
 * Progress dialog commente/ Uncomment according requirment*******/

private class ImageUploaderTask extends AsyncTask<String, Integer, Void> {
    @Override
    protected void onPreExecute(){
        //  simpleWaitDialog = ProgressDialog.show(BlogPostExamplesActivity.this, "Wait", "Uploading Image");
    }
    @Override
    protected Void doInBackground(String... params) {
        new ImageUploadUtility().uploadSingleImage(params[0]);
        return null;
    }
    @Override
    protected void onPostExecute(Void result){
        //  simpleWaitDialog.dismiss();
    }

    /**
     * Method uploads the image using http multipart form data.
     * We are not using the default httpclient coming with android we are using the new from apache
     * they are placed in libs folder of the application
     *
     * @param imageData
     * @param filename
     * @return
     * @throws Exception
     */
    static boolean doUploadinBackground(final byte[] imageData, String filename) throws Exception{
        String responseString = null;
        PostMethod method;
        method = new PostMethod("your url to upload");
        org.apache.commons.httpclient.HttpClient client = new org.apache.commons.httpclient.HttpClient();
        client.getHttpConnectionManager().getParams().setConnectionTimeout(
                                                                           100000);
        FilePart photo = new FilePart("userfile", new ByteArrayPartSource(
                                                                          filename, imageData));
        photo.setContentType("image/jpeg");
        photo.setCharSet(null);
        String s  =  new String(imageData);
        Part[] parts = {
            new StringPart("latitude", "123456"),
            new StringPart("longitude","12.123567"),
            new StringPart("imei","1234567899"),
            new StringPart("to_email","some email"),
            photo
        };
        method.setRequestEntity(new MultipartRequestEntity(parts, method
                                                           .getParams()));
        client.executeMethod(method);
        responseString = method.getResponseBodyAsString();
        method.releaseConnection();
        Log.e("httpPost", "Response status: " + responseString);
        if (responseString.equals("SUCCESS")) {
            return true;
        } else {
            return false;
        }
    }
    /**
     * Simple Reads the image file and converts them to Bytes
     *
     * @param file name of the file
     * @return byte array which is converted from the image
     * @throws IOException
     */
    public static byte[] getBytesFromFile(File file) throws IOException {
        InputStream is = new FileInputStream(file);
        // Get the size of the file
        long length = file.length();
        // You cannot create an array using a long type.
        // It needs to be an int type.
        // Before converting to an int type, check
        // to ensure that file is not larger than Integer.MAX_VALUE.
        if (length > Integer.MAX_VALUE) {
            // File is too large
        }
        // Create the byte array to hold the data
        byte[] bytes = new byte[(int)length];
        // Read in the bytes
        int offset = 0;
        int numRead = 0;
        while (offset < bytes.length
               && (numRead=is.read(bytes, offset, bytes.length-offset)) >= 0) {
            offset += numRead;
        }
        // Ensure all the bytes have been read in
        if (offset < bytes.length) {
            throw new IOException("Could not completely read file "+file.getName());
        }
        // Close the input stream and return bytes
        is.close();
        return bytes;
    }
} 
```

# facebook-like - 修复“点赞”按钮上的“无法提供有效的管理员列表”

> ID：10814958
> 
> 赞同：0
> 
> 时间：2012-05-30T11:01:45.990
> 
> 标签：facebook-like, admin

*我在两个不同网站上的一些*“喜欢”按钮（冰雹，非确定性！）上收到错误“无法提供有效的管理员列表” 。两者都有一个有效的`fb:app_id`元标记，并且在 Open Graph 对象调试器中没有显示错误。

我不喜欢的对象之一： http: [//twizy2night.com/very-bad-cannes-mission-impossible.php](http://twizy2night.com/very-bad-cannes-mission-impossible.php)

我知道有关此[错误](https://stackoverflow.com/questions/8513334/how-to-solve-the-page-failed-to-provide-a-valid-list-of-administrators-error)的[问题](http://facebook.stackoverflow.com/questions/7491111/facebook-like-wont-keep-track-of-likes-after-browser-refresh)[数量](https://webmasters.stackexchange.com/questions/14296/how-do-i-resolve-no-administrators-were-specified-error-with-the-facebook-like)很多，但没有一个答案能解决*我的*问题。

 *这听起来像是 Facebook 方面的错误（或缓存的东西），但我可能会遗漏一些东西，而且我在 Facebook Bug Tracker 上找不到报告的问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-30T12:02:24.653

尝试将`fb:admins`标签添加到您的页面：

`<meta property="fb:admins" content="xxx,yyy,zzz" />`*

# java - 如果 TimeSeries 仅包含一个值，则不显示任何值

> ID：10814960
> 
> 赞同：1
> 
> 时间：2012-05-30T11:02:04.777
> 
> 标签：java, jsp, jfreechart

```
TimeSeries series = new TimeSeries("Year Chart",Month.class);
series.add(cal.getTime,500);
TimeSeriesCollection dataset = new TimeSeriesCollection(series); 
```

即系列只包含一个值，它不能在图表上显示任何内容。

```
TimeSeries series = new TimeSeries("Year Chart",Month.class);
series.add(cal.getTime,100);
series.add(cal.getTime,500);
TimeSeriesCollection dataset = new TimeSeriesCollection(series); 
```

即当它包含多个值时，它会显示在图表上

如果我想显示值，即使系列只包含一个值怎么办？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-30T14:03:55.483

当您只添加一项时，它可能就在那里。您只需使系列形状在渲染器中可见即可查看任何内容。尝试这样的事情。

```
renderer.setBaseShapesVisible(true); 
```

# architecture - 如何应对 DDD 中的可变性挑战

> ID：10814963
> 
> 赞同：0
> 
> 时间：2012-05-30T11:02:22.740
> 
> 标签：architecture, domain-driven-design, immutability

在大学的 SE 课程中，我们学习了 OOAD 和 DDD（使用 Java）并鼓励在我们的项目中使用它。不幸的是，许多由实体的可变性引起的挑战没有被讨论：

*   不适合多线程应用程序
*   它破坏了依赖 equals()、hashCode() 或 compareTo() 的数据结构 (*)
*   很难对实体的状态进行推理

这些问题使我很难使用 DDD，尽管我喜欢它背后的想法，并且许多库和框架（如 ORM、序列化库——基本上所有使用 Java Beans 的东西）都依赖于实体的可变性。结果是，我在做架构决策时充满了疑虑，而且无论我做什么，都对结果不满意。要么我得到一些弗兰肯斯坦的怪物应用程序，其中我有不可变的实体，但是有很多可变的胶水使它工作（生成器，可变 DAO/DTO），或者我有一个完全可变的应用程序，其中充满了 WTF（比如每次都对列表​​进行排序）我使用它而不是使用排序的数据结构，因为实体在添加到列表后可能已更改）。

你如何处理这些问题？怎么走？是否有不需要可变性的 DDD 替代品？

我个人更喜欢完全不可变，但这会使使用一些需要 Java Bean 的库变得非常困难甚至不可能。当然，我可以切换到函数式编程，但我不确定它是否可以很好地替代使用 DDD 的典型项目。

(*) 好吧，只有当你覆盖它们时。但是，如果你不这样做，那么使用集合又有什么意义呢？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-30T15:37:46.027

我不确定您所说的“不可变实体”是什么意思，但这对我来说听起来很矛盾。实体是关于身份的，你应该能够在它们的整个生命周期内识别和跟踪它们，当它们被创建、修改、持久化、再水化时......你可以肯定地跟踪和持久化一些永远不会改变的东西，但我没能做到看到兴趣——身份存在的基本原因正是在变化的事物上贴上固定的标签。

一些领域对象实际上适合不变性，但不是实体，而是值对象，身份无关紧要的对象。您可以轻松地将值对象实例替换为另一个值对象实例，而不会产生任何后果。

如果你想要做的是让每个域对象成为不可变的值对象，那么这肯定不再是 DDD。DDD 是关于面向对象的，而不是纯粹的函数式编程 :)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-31T11:10:24.373

这些都是常见问题。我假设您考虑以下情况：

*   从持久数据构造“订单”对象
*   对“订单”进行一些更改
*   坚持所做的更改。

如果有两个同时请求遍历同一场景，则：

*   *不适合多线程应用程序*：首先，您有两个不同的实例，其次，您在保存数据时会使用乐观/被动锁。
*   *它破坏了依赖于 equals()、hashCode() 或 compareTo() 的数据结构*——如果两个域实体的标识符相等，则它们是相等的（否则你的值类型根据定义是不可变的）。
*   *这使得很难推断实体的状态*- 不知道为什么需要这个。O/RM 自动跟踪数据更新目的，DDD 是存储不感知的。如果更改跟踪是业务逻辑的一部分，那么就需要实施，是的。

# prism - 为什么 MEF 容器在模块中不可用？

> ID：10814964
> 
> 赞同：6
> 
> 时间：2012-05-30T11:02:23.463
> 
> 标签：prism, mef, containers

在我的 Prism 应用程序中，MEF 容器可通过 Container 属性从 Bootstrapper 类中获得。

但它不是来自类模块（IModule）。我只能通过 IServiceLocator 导入容器。

为什么？我认为针对具体技术使用通用接口是有意义的，但 Prism 4.1 指南要求我们不要使用 IServiceLocator（在使用 IServiceLocator 的[注意事项中](http://msdn.microsoft.com/en-us/library/ff921140%28v=pandp.40%29#sec12)）。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-31T04:57:58.877

我认为它不对应于 Prism 或 MEF，而是对应于依赖注入原则和一般的最佳实践。（是的，我认为 MEF 不是 DI 容器，但在这里它几乎用作 DI 容器，所以我想在这里使用相同的做法）。

在 DI 的最佳实践中（[这](http://manning.com/seemann/)本书很酷，我强烈推荐它）在 DI“工作流程”中有这样的步骤是很好的：

*   注册所有必要的类型（在 Prism 中 - 通过 Bootstrapper.ConfigureCatalog() 方法）
*   解析根对象（包含所有嵌套对象。在 Prism 中 - 通过 Bootstrapper.CreateShell() 方法）
*   使用你的根对象
*   释放你的根对象

理想情况下，您不应再使用 DI 容器。你的代码不应该知道 DI 容器的存在（从这方面来说 Unity 是真正的 DI 容器，因为你可以编写不知道使用 DI 容器的代码）。如果您的代码知道它 - 它取决于 DI 容器，这是一件坏事。

PS。如果你想在你的模块中使用 MEF 容器（例如，因为你对 DI 范式不是很熟悉，或者你有一些非常具体的任务），你可以尝试这样的事情：

```
[ModuleExport(typeof(YourModule))]
public class YourModule : IModule
{
    public static CompositionContainer CompositionContainer;

    [ImportingConstructor]
    public void YourModule(CompositionContainer container)
    {
        this.CompositionContainer = container;
    }
} 
```

不要忘记在 Boostrapper 中注册 MEF 容器本身：

```
public class YourBootstrapper: MefBootstrapper
{
    protected override CompositionContainer CreateContainer()
    {
        var container = base.CreateContainer();
        container.ComposeExportedValue(container);
        return container;
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-30T20:05:56.220

请注意，我使用的是旧版本的 Prism，并且我将它与 UnityContainer 一起使用，但同样的原则应该适用。

定义您的 Module 类以在构造函数中获取一个容器。

以下是使用 Unity 的示例：

```
public class Module : IModule
{
    public static IUnityContainer Container;

    public Module(IUnityContainer container)
    {
        Container = container;
    }
} 
```

如果您定义一个带有容器的构造函数，它将被 ApplicationBootstrapper.Run() 方法调用。

我测试了一个默认的无参数构造函数和一个重载构造函数，它接受容器并调用了第二个构造函数。

我还检查了只有默认构造函数，它被调用了。我建议您更改构造函数以添加带有容器的参数。

在模块类中拥有一个容器将允许您在 Initialize 方法中注册类型。

至于 ServiceLocator，这是一种稍微不同的模式，我建议您在由于某种原因无法让容器创建依赖项的情况下使用它。

# mysql - MySQL选择排除特定结果

> ID：10814965
> 
> 赞同：0
> 
> 时间：2012-05-30T11:02:29.923
> 
> 标签：mysql, select, join

也许标题不是很清楚，但我真的无法为它起一个正确的命名。

我正在尝试使用以下表格在表格中选择一个人的所有朋友：

```
Table friends
column name user1
column name user2 
```

我得到了以下查询

```
SELECT users1.username,users2.username FROM friend_request
 JOIN users AS users1 ON friend_request.user1 = users1.id
  INNER JOIN users AS users2 ON friend_request.user2 = users2.id 
```

但是，这显然会返回两个名称。

```
Foobar | Dummy 
```

如何在一个结果中排除/获取有问题的朋友？澄清 user1.username 是否不是我正在寻找的 show users.2username 和 verse visa。

```
Dummy 
```

提前致谢。

编辑：

我不确定两列中的哪一列包含正确的用户。我正在寻找 Dummy，但当我加入他们时，我会得到 Foobar 和 Dummy，但我只想了解 Dummy。因为 foobar 是查找自己的朋友的人。希望这可以帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-30T12:54:31.170

这应该得到你想要的......做一个工会。第一个查询应用了 where 子句，在“user2”字段中预期您开始的人，因此您将加入“其他”人（user1 字段）。然后工会应用反向...寻找第一个位置的主要人员（user1），但在 user2 字段（其他人）上进行连接

```
SELECT 
      u.username
   FROM 
      friend_request fr
         JOIN users u 
            ON fr.user1 = u.id
   where
      fr.user2 = ThePrimaryPerson
UNION
SELECT 
      u.username
   FROM 
      friend_request fr
         JOIN users u 
            ON fr.user2 = u.id
   where
      fr.user1 = ThePrimaryPerson 
```

# node.js - nodejs中实现CPU绑定任务的方法

> ID：10814966
> 
> 赞同：8
> 
> 时间：2012-05-30T11:02:40.097
> 
> 标签：node.js, web-worker, child-process, fibers

我正在将 nodejs 用于 Web 服务器，它解码 GET 参数并以某种编码格式返回数据。解码/编码是使用 nodejs 的 crypto 模块完成的，这似乎是同步的。虽然服务单个请求所花费的时间足够快，但阻塞事件循环使服务在并发性方面表现不佳。

我的要求很简单，在事件循环之外进行编码/解码功能。

1.  独立进程（child_process 或集群）

这可以是仅用于此目的的单独进程，但由于编码/解码将在子进程中阻塞，这将阻止子进程接收新消息，即永远不会出现将两个字符串编码为子进程的情况也将是单线程的。

1.  每个请求的单独线程（threads-a-gogo 或 Fiber 或 node-webworker）

为每个请求创建一个单独的线程来执行编码/解码操作，但似乎没有一个模块按预期工作，即threads-a-gogo没有通过npm安装，fiber没有在运行时创建一个单独的线程(), node-webworker[不工作](https://github.com/pgriess/node-webworker/issues/35)。

是否有人遇到过类似的问题，或者是否有某种方法可以通过简单的消息传递轻松地在 nodejs 中创建线程。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-10T03:56:51.620

这是内置在节点的子进程中的。这里的文档：

[http://nodejs.org/api/child_process.html#child_process_child_send_message_sendhandle](http://nodejs.org/api/child_process.html#child_process_child_send_message_sendhandle)

您还可以使用集群：

[http://nodejs.org/api/cluster.html#cluster_cluster_fork_env](http://nodejs.org/api/cluster.html#cluster_cluster_fork_env)

使用集群，它的工作方式类似于：

```
if (cluster.isMaster) {
  var worker = cluster.fork();
  worker.send('encodeThisString');

} else if (cluster.isWorker) {
  process.on('message', function(msg) {
    var encrypted = crypto.doSomeEncryption(msg);
    process.send(encrypted);
  });
} 
```

# asp.net-mvc-3 - 在 IIS 5.1 下部署 ASP .NET MVC 3 Web 应用程序

> ID：10814968
> 
> 赞同：0
> 
> 时间：2012-05-30T11:02:43.573
> 
> 标签：asp.net-mvc-3, iis, deployment

我使用 ASP .NET MVC 3 框架开发了一个 Web 应用程序。
因此，我有一个 Visual Studio 2010 项目来开发我的 Web 应用程序。
我想在远程机器上的 IIS 5.1 下部署我的 Web 应用程序。

我知道我必须在 IIS 默认网站节点下创建一个虚拟目录。
虚拟目录将链接到远程机器的文件管理系统中的目录。
FMS 目录将包含我的 Web 应用程序的文件。

**问题**：我的 VS2010 项目的哪些文件和文件夹必须存在于 FMS 目录中？

我打算在 FMS 目录中创建一个名为 bin 的文件夹。
bin 文件夹将包含我的 Web 应用程序使用的 DLL，并且不存在于远程计算机的 GAC 中。

**问题**：我必须修改 Web.config 文件吗？

我的 VS2010 项目对应的文件夹也包含一个名为 bin 的文件夹。
bin 文件夹包含一个与我的应用程序同名的 DLL。

**问题**：这个 DLL 是做什么用的？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-30T16:47:05.540

之前在 Stackoverflow 上已经回答了这个问题。[在 IIS 5.1 (Windows XP) 上部署 ASP.NET MVC](https://stackoverflow.com/questions/301359/deploy-asp-net-mvc-on-iis-5-1-windows-xp)。（请注意，接受的答案现在链接到一个页面，该页面将发出网站上存在恶意软件的警告。）

作为一个建议，我会看看你是否可以获得一台运行 IIS7 或更好的机器，而不是处理必须配置路由和在 IIS 本身上设置哪些可执行文件的麻烦。使用 IIS7，您真正需要做的就是在部署站点时对 mvc 特定的 .dll 进行 bin 部署（这是 Visual Studio 中的一个设置，在网站属性下的 package/publish web 下找到）。

*附带说明一下，您应该能够在 Vista 上获得 IIS7，在 Windows 7 上获得 7.5。*

祝你好运，并希望这些信息有助于启动和运行您的应用程序。

# django - 覆盖 delete_selected() 并更新子模型的字段

> ID：10814972
> 
> 赞同：3
> 
> 时间：2012-05-30T11:02:53.893
> 
> 标签：django, model

我正在尝试覆盖名为 Invoice 的模型的删除方法。Model Invoice 由模型 Action 中的 ForeignKey 引用。我想在删除发票时更新模型管理员中名为 billed 的 BooleanField

这篇文章中描述的解决方案：

[如何覆盖模型上的 delete() 并让它仍然与相关的删除一起使用](https://stackoverflow.com/questions/1534986/how-do-i-override-delete-on-a-model-and-have-it-still-work-with-related-delete)

那个答案： [https ://stackoverflow.com/a/1539182](https://stackoverflow.com/a/1539182)

在models.py中对我不起作用：

```
def delete(self):
      Action.objects.filter(invoice=self).update(billed=False) # and tried 0 instead of False
      super(Invoice,self).delete() 
```

也试过：

```
def delete(self):
     actions = Action.objects.filter(invoice=self)
     for action in actions:
        action.billed=False   # and tried 0 instead of False
        action.save()
     super(Invoice,self).delete() 
```

模型操作中的 ForeignKey 字段有一个 on_delete=models.SET_NULL 以避免在删除发票时删除操作。但我还需要将 billed 设置回 False。

```
invoice = models.ForeignKey( Invoice, verbose_name = 'Rechnung', null=True, blank=True,on_delete=models.SET_NULL) 
```

我刚刚在这里读到[https://code.djangoproject.com/ticket/10751](https://code.djangoproject.com/ticket/10751)在管理员中，选择的操作删除不能被 delete() 覆盖

我必须改用 delete_view()

所以我尝试了

```
def delete_selected(self, request, obj, extra_context=None):
    Action.objects.filter(invoice=self).update(billed=False)
    super(InvoiceAdmin, self).delete_view(request, obj, extra_context) 
```

也尝试使用obj而不是self，但不是解决方案

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2014-09-16T16:10:13.393

虽然[此答案](https://stackoverflow.com/a/11224759/3991344)`obj`有效，但如果您在代码中的其他任何位置删除单个，该`delete_model`方法将引发错误。

我推荐这个：

```
actions = ['delete_selected']

def delete_selected(self, request, obj):
    for o in obj.all():
        Action.objects.filter(invoice=o).update(billed=False)
        o.delete()

delete_selected.short_description = 'Ausgewählte Rechnungen löschen' 
```

Just override the `delete_selected` action for the Change List admin page. This way you're not having to completely delete the action, override the `delete_model` method, and as a plus, you can still delete individual items from the Change `<object>` admin page. In the long run it's less code. :)

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-06-27T11:03:38.147

我找到了一个解决方案，postet y Stephane [https://stackoverflow.com/a/4534773/326905](https://stackoverflow.com/a/4534773/326905)并针对我的问题对其进行了编辑。

正确的操作是**delete_selected** 在**InvoiceAdmin**模型下的 admin.py

```
actions = ['delete_model']

def get_actions(self, request):
    actions = super(InvoiceAdmin, self).get_actions(request)
    del actions['delete_selected']
    return actions

def delete_model(self, request, obj):
    for o in obj.all():
        Action.objects.filter(invoice=o).update(billed=False)
        o.delete()

delete_model.short_description = 'Ausgewählte Rechnungen löschen' 
```

# jquery - 如何拖放克隆的 HTML 元素

> ID：10814973
> 
> 赞同：2
> 
> 时间：2012-05-30T11:02:55.490
> 
> 标签：jquery, jquery-ui

我想从元素列表中拖动（`Buttons`, `TextBox`）并将克隆拖放到“表单设计器”`div`中。如何获取原始元素的属性并在该表单设计器中创建新元素`div`？

```
drop: function( event, ui ) 
{
    jQuery('<input/>', 
    { 
        type: 
        value: 
    }
    ).appendTo('#cartContent');                             
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-30T11:18:07.153

在第一种情况下，这允许您将元素拖到表单设计器上并创建项目的副本，如[以下 jsFiddle 演示所示](http://jsfiddle.net/scaillerie/njYqA/)：

```
jQuery(function() {
    jQuery(".component").draggable({
        //  use a helper-clone that is append to 'body' so is not 'contained' by a pane
        helper: function() {
            return jQuery(this).clone().appendTo('body').css({
                'zIndex': 5
            });
        },
        cursor: 'move',
        containment: "document"
    });

    jQuery('.ui-layout-center').droppable({
        activeClass: 'ui-state-hover',
        accept: '.component',
        drop: function(event, ui) {
            if (!ui.draggable.hasClass("dropped"))
                jQuery(this).append(jQuery(ui.draggable).clone().addClass("dropped").draggable());
            }
        });
    });​ 
```

* * *

为了防止设计器 div 中的项目重叠，我使用[了这个演示中显示的](http://jsfiddle.net/htWV3/1/)代码：

```
$('.drop').droppable({
    tolerance: 'fit'
});

$('.drag').draggable({
    revert: 'invalid',
    stop: function(){
        $(this).draggable('option','revert','invalid');
    }
});

$('.drag').droppable({
    greedy: true,
    tolerance: 'touch',
    drop: function(event,ui){
        ui.draggable.draggable('option','revert',true);
    }
});
​ 
```

* * *

# javascript - 我可以限制 Javascript 的 Array.prototype 扩展的范围吗？

> ID：10814975
> 
> 赞同：0
> 
> 时间：2012-05-30T11:03:04.417
> 
> 标签：javascript, arrays, prototype

我想限制扩展 Array 的范围

```
Array.prototype.myExtension = function() { 
// do something;
// return something;
}; 
```

到当前的 JS 模块。这个扩展在其他模块中应该是不可见的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-30T12:24:14.143

解决方法是在另一个范围（iframe 或 web worker）中对 Array 进行沙箱处理，或者一般定义该方法并使用数组对象**调用**它（或**apply ）。**

```
modulenamespace.myExtension = function() { 
// do something;
// return something;
}

modulenamespace.myExtension.call(array) 
```

# visual-studio - 确定 Visual Studio 宏中插入符号下的变量类型

> ID：10814977
> 
> 赞同：2
> 
> 时间：2012-05-30T11:03:18.283
> 
> 标签：visual-studio, visual-studio-macros

是否有一种技术可以确定光标下的类型，`ActiveDocument.Selection`. 我可以`DTE.ExecuteCommand("Edit.GoToDefinition")`用来跳过解决方案，并开始解析文件等，但这似乎有点笨拙。

我试过使用*FileCodeModel*，但我无法从中得到任何有用的东西。我可能使用不当。

例如：

```
void Foo()
{
 int i;
 SomeType st;

 i = 0;
 st = null;
} 
```

如果我将插入符号（或选择）放在 上`i`，我想要*int*作为结果，如果它结束了`st`，我想要*SomeType*，如果它超过了 的声明`SomeType`，我想要*SomeType*作为输出。

想法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-07T08:28:05.973

有一种查找所有引用的方法，请参阅[如何实现查找所有引用？](http://social.msdn.microsoft.com/forums/en-US/vsx/thread/3d85e968-f735-420c-b9c8-d57ed7839d36/)并且您可以测试找到的参考文献（它不是很有效并且可能很耗时）。悬停我没有设法使代码示例工作（可能它应该从扩展运行？）

# iphone - 动态生成饼图的要求

> ID：10814978
> 
> 赞同：-1
> 
> 时间：2012-05-30T11:03:20.243
> 
> 标签：iphone

> **可能重复：**
> [如何在 iphone 中创建饼图？](https://stackoverflow.com/questions/4766766/how-to-create-pie-chart-in-iphone)

根据百分比生成应用程序饼图所需的任何外部资源都在解析中（如 35%、15%、30%、20% 等）。请参阅我在此处引用的参考...

![在此处输入图像描述](../Images/f82b5185a04e1bfd47fe5ac34c060e07.png)

如何从代码开始在应用程序中创建和显示动态饼图？

根据 URL 标记的值，它应该是动态的。

提前感谢您的每一个建议和指导。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-30T12:45:53.507

您可以通过谷歌搜索找到大量解决您的问题的方法。以下是一些有用的资源：

[http://rajeev.name/2009/01/18/drawing-pie-charts-using-iphone-sdk/](http://rajeev.name/2009/01/18/drawing-pie-charts-using-iphone-sdk/)

[http://www.youtube.com/watch?v=MkS6HOuHaBM](http://www.youtube.com/watch?v=MkS6HOuHaBM)

# javascript - 离开页面时将 url 从 HTTPS 更改为 HTTP javascript

> ID：10814979
> 
> 赞同：0
> 
> 时间：2012-05-30T11:03:24.447
> 
> 标签：javascript, jquery, http, ssl

如果 location.procotcol 不是 https，我目前将单个页面更改为安全：

```
 if (location.protocol != "https:")
 {
   location.replace("https://" + window.location.host + window.location.pathname);
 } 
```

这可行，但是当我离开页面时，我的协议仍然是 https，我希望这是 http。

我已经尝试了以下在我离开页面时触发的方法，但它似乎与协议没有区别

```
$(window).unload(function() {
location.replace("http://" + window.location.host + window.location.pathname);
}); 
```

我是否可以在离开页面时将协议更改为 http，但功能来自正在离开的页面。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-30T11:11:05.487

当用户离开页面时，您无法更改位置。这将非常烦人，并且很容易被垃圾邮件发送者利用。

# visual-studio-2010 - Visual Studio 2010 中的 MsTest 忽略来自测试程序集的测试

> ID：10814982
> 
> 赞同：0
> 
> 时间：2012-05-30T11:03:40.010
> 
> 标签：visual-studio-2010, mstest

当我通过按 Ctrl R + C 或 Ctrl R + T 从特定测试程序集中运行测试时，Visual Studio 决定在解决方案中运行所有测试。

当我在解决方案中运行所有测试时，Visual Studio 会运行​​除此特定程序集中的测试之外的所有测试。

有没有办法让 Visual Studio 相信这个程序集的内容实际上是测试并且它应该执行它们？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-30T12:37:17.407

我已经解决了这个问题，原来是因为该项目被标记为 Windows 程序集而不是 Windows 程序集 + 测试项目。[这里记录](https://stackoverflow.com/questions/7009943/how-does-visual-studio-mstest-identify-test-projects)了将普通程序集转换为测试项目的方法

# javascript - 使用 jquery 向子元素添加 2 个内联样式

> ID：10814986
> 
> 赞同：0
> 
> 时间：2012-05-30T11:03:54.807
> 
> 标签：javascript, jquery

我想添加一个基于点击的内联样式：

**CSS：**

```
div#ProductImages > img
{
    opacity:0.4;
    filter:alpha(opacity=40); /* For IE8 and earlier */
}

div#ProductImages > img:hover
{
opacity:1.0;
filter:alpha(opacity=100); /* For IE8 and earlier */
} 
```

因此，当他们单击其中一个子图像图标时，不透明度为 1.0

这是我尝试过的：

```
$("div#ProductImages > img").click('style', 'opacity: 1.0', 'filter:alpha(opacity=100)'); 
```

哪个似乎不起作用？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-30T11:08:52.253

尝试这个：

```
$("div#ProductImages > img").click(function(){
    $(this).addClass('newClassName'); 
}); 
```

和**CSS**是：

```
.newClassName{
   opacity:1.0;
   filter:alpha(opacity=100); 
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-30T11:09:28.370

```
$("div#ProductImages > img").click( function() {
    $(this).css('opacity' , '1.0');
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-30T11:15:47.670

你可以尝试使用这个：

```
$("div#ProductImages > img").click(function(){
    $(this).css({'opacity':'1.0'});
}); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-30T11:16:14.573

正如其他人所建议的那样，最好使用具有所需属性的类，然后在必要时添加/删除它。还值得注意的是，在您的问题中，CSS 指的是`hover`，但 JavaScript 指的是`click`. 对于这个演示，我将使用`hover`jQuery 提供更好的事件处理程序。

## CSS

```
div#ProductImages > img
{
    opacity: 0.4;
    filter: alpha(opacity=40);
}

div#ProductImages > img:hover,
div#ProductImages > img.onHover
{
    opacity: 1.0;
    filter: alpha(opacity=100);
} 
```

## JavaScript（使用 jQuery）

```
$('div#ProductImages > img').hover(function()
{
    $(this).addClass('onHover');
}, function()
{
    $(this).removeClass('onHover');
}); 
```

# ajax - 使用 tinymce (AJAX) 加载页面

> ID：10814988
> 
> 赞同：1
> 
> 时间：2012-05-30T11:04:02.140
> 
> 标签：ajax, tinymce, wysiwyg

我在使用 jQuery 加载页面时没有问题，但是当我使用 textarea 加载页面时，应该不会显示 tinymce。

```
$.ajax({
type: "POST",
url: 'textarea.php',
data: {data: info},
async: false,
beforeSend: function() {
},
complete: function() {
},        
cache: false,
success:  function(result) {
  $('#form-area').html(result);
}
error: function(error) {
alert("Some problems have occured. Please try again later: " + error);
} 
```

});

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-30T11:18:43.547

看起来您应该`tinymce.init`在将 ajax 请求中的 html 代码插入 dom 之后立即调用该函数。您也可以致电

```
tinymce.execCommand('mceAddControl',true,'editor_id'); 
```

您需要记住，如果您想使用 ajax 重新加载编辑器实例，您应该关闭 tinymce 编辑器实例。在这种情况下使用

```
tinymce.execCommand('mceRemoveControl',true,'editor_id'); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-05-24T06:41:25.080

当您使用 ajax 切换页面时，TinyMCE 似乎中断了。为了解决这个问题，我添加了以下代码以在再次初始化之前删除任何现有的 TinyMCE 实例

```
 if(window.tinymce){
    $(window.tinymce.editors).each(function(idx, p) {
    window.tinymce.remove(idx);
    });
  }

  tinyMCE.init({
        selector: "#risksummary",
        menubar: false,
        plugins : "table",
        toolbar: "table"
    }); 
```

# c# - c# - 在没有发生的情况下执行事件

> ID：10814989
> 
> 赞同：0
> 
> 时间：2012-05-30T11:04:04.020
> 
> 标签：c#, events

我怎么能在没有实际发生的情况下执行一个事件？

例如，如何`button1_Click()`在不单击按钮的情况下在代码中执行事件？

问题是我有一个`WebClient`，它下载文件列表。每次完成下载文件时，它都会执行一个`DownloadFileCompleted`事件，然后下载下一个文件。

但是，某些文件没有下载（全部在计划中），因此没有执行该事件。我怎么能执行它？谢谢

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-30T11:07:42.137

只需将事件处理程序中存在的所有代码插入一个单独的函数中，例如

```
private void button1_click(...)
{
    func(...)
}

public void func(...)
{
    //even handler code
} 
```

如果你不知道要引发什么事件，或者不能，只需调用

```
func(...) 
```

我个人反对显式调用事件处理程序，但更喜欢这种方法。**对我来说**似乎更清晰的代码结构。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-30T11:07:46.113

控件通常具有引发事件的能力，例如[Button.PerformClick](http://msdn.microsoft.com/en-us/library/system.windows.forms.button.performclick%28VS.80%29.aspx)在您的情况下

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-30T11:07:01.283

您可以只给它提供空值并像普通函数一样调用它（毕竟，它是一个普通函数，只需要一个发送者和适当的事件参数）。例如

```
button_click(new object(), new System.EventArgs()); 
```

这些是标准 GUI 按钮的正常事件，您的按钮可能需要不同的事件。如果您只需要您的按钮来检测点击并且不想使用事件参数，则此方法有效。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-30T11:07:23.447

button1_Click() 只是一个方法，因此即使将其绑定到事件也可以执行它。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-30T11:09:05.193

您应该将代码从事件处理程序中移出并放入函数中。

然后，您可以从事件和您需要触发它的任何其他方法调用此函数。

所以而不是：

```
private void button1_Click()
{
    //do something
} 
```

你有：

```
private void button1_Click()
{
    doSomething();
}

public void doSomething()
{
    //do something
} 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-05-30T11:10:40.950

如果您的 Button 的名称是*button1*，您可以通过以下代码行引发点击事件：

```
button1.PerformClick(); 
```

希望这可以帮助！

**编辑：**

或者像其他人说的那样，将您的逻辑放在一个单独的方法中，并在需要时调用该方法。

# xcode - 如何使用 XCode 4 根据目标架构有条件地链接库？

> ID：10814991
> 
> 赞同：2
> 
> 时间：2012-05-30T11:04:09.640
> 
> 标签：xcode, xcode4, linker

我的应用程序需要链接不同的库，具体取决于我构建的是 32 位还是 64 位版本。我正在从 Makefile 过渡到 XCode。在我的 Makefile 中，我可以根据目标架构明确列出所有库。

我如何在 XCode 4 中做同样的事情？

我已经在“Link Binary With Libraries”构建阶段添加了所有要链接的库，但是无论我选择“My Mac 32-bit”还是“My Mac 64-bit”作为构建，XCode 都会尝试链接它们目的地。

# python - Python Redis 交互

> ID：10814996
> 
> 赞同：10
> 
> 时间：2012-05-30T11:04:22.753
> 
> 标签：python, redis

我想用python编写使用redis的应用程序。我用谷歌搜索，但我找不到我的问题的任何结果。通常，我这样做：

```
import redis

rs = redis.Redis('localhost') 
```

然后做所有的获取和设置。但是我可以在 redis 中做这样的事情吗：

```
rs1 = redis.Redis('app1')
rs2 = redis.Redis('app2') 
```

我的意思是，我想使用两个或多个实例，每个实例都存储不同的东西（例如 rs1 用于 url，rs2 用于标头等）。而且我还想知道如何删除所有键（例如在 rs1 中删除所有记录）。有什么好的教程，资源吗？注意：我需要使用redis，因为我需要执行快速检查和存储，例如爬虫的url-seen。

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2012-05-30T11:20:45.903

如[文档的入门部分](https://github.com/andymccurdy/redis-py#getting-started) `redis.Redis`所示，`redis.StrictRedis`两者都将整数`db`参数作为构造函数参数。这将为您提供一个有效的孤立实例。

您可以执行以下操作：

```
rs1 = redis.Redis(host="localhost", db=0)
rs2 = redis.Redis(host="localhost", db=1) 
```

`flushdb()`将清除您连接到的数据库的所有键，同时`flushall()`清除每个数据库的所有键。

# c# - 使用部分类而不是外观模式本身是反模式吗？

> ID：10814997
> 
> 赞同：3
> 
> 时间：2012-05-30T11:04:26.173
> 
> 标签：c#, partial-classes, facade

几年前，我被告知在单独的 .cs 文件中实现业务逻辑代码，尽管这些文件包含相同的部分类。因此，可以像这样从业务层调用一种方法：

```
using(FooPartialDisposableClass partialClassInstance = new FooPartialDisposableClass ())
partialClassInstance.BusinessMethod(); 
```

行。所以现在，我只是在使用 Facade 模式时做同样的事情。这个解决方案似乎是一种更好的方法，即使您必须编写更多代码并且它的可维护性较差。

好吧，那么我的问题是……遵循部分类方法是否正确？

PS：我还考虑过接口和依赖注入来将这一层与将使用这些业务逻辑方法的层分离，但考虑到这里的工作方式，这是一个禁忌：S

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-30T11:10:09.590

`Partial classes`不是`OOP`设计功能。它们只是“代码布局”的东西，不能替代任何代码设计。

如果您愿意，它只是代码布局/分发功能。

`Facade`design 与 不同`DI`，如果您认为该`Facade`模式最适合您的项目需求，请继续。

使用部分类以防类的*文件*变得太大，或者您有不同的团队成员可能想要对它的不同部分进行更改`Facade`。在这种情况下，在不同文件之间分配文件（基于团队中的职责分配），以便更轻松地*管理*代码并尽可能避免冲突。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-30T11:17:59.880

我发现将代码与部分代码分开的两个原因。

1.  因此，两个（或更多）开发人员在代码签入期间不会遇到彼此。冲突解决来袭！

2.  生成的代码。我将代码生成到主要部分类中，然后为自定义重载创建另一个部分。完美运行！

我相信将业务逻辑和数据层分离到单独的类中，并且我主要在这些层中使用静态方法。我真的不明白它怎么可能有更多的代码和更少的可维护性。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-10-02T16:57:09.817

我会说让自己远离部分课程。如果您的课程更大，则意味着该课程中发生的事情太多了。意味着这个类违反了单一职责原则，难以维护和理解。始终尝试在一个类中关注一个问题，并在单独的类中提取其他职责，并使用 DI 模式将依赖项注入到高级类中。

这给了你很多好处，比如；1\. 可以单独测试小班。2\. 较小的类易于维护。3\. 易于扩展。4\. 与大脂肪类相比，引入新错误的机会更少。5\. 易于理解等等。

# php - 处理异常时使用 SQL 注入暴露 var 的内容

> ID：10814998
> 
> 赞同：0
> 
> 时间：2012-05-30T11:04:29.173
> 
> 标签：php

如果我有这段代码：

`query.php:`

```
$secret = 'This should not be displayed';
$id = mysql_real_escape_string($_GET['id']);
try {
  mysql_query("SELECT * FROM USERS WHERE USER_ID = '$id'");
  }

catch(Exception $e) {
  echo "Could not execute" . "SELECT * FROM USERS WHERE USER_ID = '$id'";
} 
```

$id 已正确转义，因此没有人可以向我的查询注入任何代码，但是，我想知道我是否会因为异常处理部分中的回显而回显 var`query.php?id=$secret`的内容？`$secret`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-30T14:29:29.750

您可以安全地进行该操作；）

如果你`$id`是整数 put `(int)$id`or `$id + 0`，等等...

祝你好运！

# php - 如何知道数组是否包含空字符串但排除 0

> ID：10814999
> 
> 赞同：1
> 
> 时间：2012-05-30T11:04:42.293
> 
> 标签：php

如何在 PHP 中计算非空数组项但不包括 0。零是一个虚假值，这就是为什么在我使用 array_filter 时它不包含在计数中的原因。在下面的示例中，当我回显时我想要得到的计数是 4，因为数组中有 4 个项目

```
$numbers = array(0,2,4,2);
echo count(array_filter($numbers)); 
```

如果是这样，输出应该是 5，从计数中排除空字符串，但仍然包括 2 个零：

```
$numbers = array(0,2,4,2,'',0);
echo count(array_filter($numbers)); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-30T11:08:37.190

`$numbers`从with中删除不需要的元素[`array_diff()`](http://php.net/array_diff)。

```
echo count(array_diff($numbers, array(0)));  // 3 
```