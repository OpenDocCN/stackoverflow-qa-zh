# StackOverflow 问答 12298000-12298999

# exception - 抛出或捕获异常类（每个可能的异常）是错误的吗？

> ID：12298000
> 
> 赞同：0
> 
> 时间：2012-09-06T10:27:21.750
> 
> 标签：exception, exception-handling

我知道这样的问题可能取决于程序员打算让他的程序做什么，但是在学校里，我们被教导**永远不要**抛出或捕获`Exception`（类），而是要确保它抛出一个更特定于运行时类型的子类我们期望可能发生的错误（例如 IllegalArgumentException）。但是，我现在正在工作，在“现实世界”中，我在我工作的代码中看到了很多场景，以前的程序员`Exception`在方法中抛出了所有东西，或者像这样捕获`Exception`，而不是它的更具体的子类之一。

所以我想知道，像这样抛出和捕获所有东西都可以吗，这样做是不好的编程吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-06T10:48:51.617

这样做并没有错，但它会让你的调试生活变得非常困难。很多人会捕获异常类并记录 Exception.Message。没有足够的细节，特别是如果你在大型系统上工作，你不能总是单步执行实时代码等，这将是一项乏味的任务。

我倾向于捕获特定的异常并相应地处理它们，但我也捕获 Exception 类以确保捕获所有异常（可能会更改对象以在未来的框架版本中包含更多异常）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-06T12:22:14.613

我的想法是，处理异常的方式也应该取决于您正在创建的应用程序的类型。例如，如果您正在开发某种框架或库，您不应该尝试打印错误消息或记录它们，您已经抛出它们，因为使用您的框架/库的其他开发人员将负责处理异常当他们使用你的代码时优雅地。

如果您正在开发某种前端应用程序，那么您应该对异常处理更加敏感。我认为尽可能使用自己的异常类会更好，因为这将帮助您在以后确定应用程序中的错误或运行时问题。当您处理异常时，您应该始终从更具体的异常转向一般异常。最后，您应该处理“Exception”超类的异常，以确保您的应用程序不会崩溃，最好在应用程序的主入口点中有一个 try-catch 块。在处理异常记录错误时发生的事情是一个很好的实践，当它稍后诊断错误时。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-06T10:47:36.627

正如您所学到的，这是不好的做法。

该规则的一个主要例外是顶级异常处理程序（用于捕获未处理的异常） - 这样做的目的是记录异常，以便开发人员稍后可以读取它们并用于修复应用程序（并且通常会重新抛出为了使应用程序崩溃 - 而不是让它处于不一致的状态）。

# html - 禁止 Google 使用 robots.txt 将包含“%2C”（逗号）的链接编入索引

> ID：12298005
> 
> 赞同：1
> 
> 时间：2012-09-06T10:27:31.563
> 
> 标签：html, http, web-crawler, robots.txt

谁能帮我`disallow`在我的文件中添加一条规则，该规则`robots.txt`将阻止爬虫索引任何包含`%2C`逗号`HTML URL encoding`（，）的链接。

如果 robots.txt 文件中存在通配符，我想我正在寻找的是通配符。

到目前为止，我有这个：

```
Disallow: %2C 
```

但似乎看不到它的工作原理。

有什么建议么？干杯

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-07T06:11:56.110

针对搜索引擎测试 robots.txt 时最好的办法是利用它们提供给您的工具。[Google 网站管理员工具](https://www.google.com/webmasters/tools/)在“健康 > 阻止的 URL”下有一个 robots.txt 测试器。如果你使用

```
User-agent: *
Disallow: *,* 
```

[这将阻止对http://example.com/url%2Cpath/](http://example.com/url%2Cpath/)的任何请求。我试过`Disallow: *%2C*`了，但显然这并没有阻止 Googlebot 抓取 HTML 转义路径。我的猜测是 Googlebot 在排队过程中对其进行了编码。

至于 bing，他们显然删除了 robots.txt 验证工具。所以真正测试它的唯一可靠方法是在测试站点上部署 robots.txt，然后使用 Bing 网站管理员工具获取带有“，”的页面。它会在那时告诉你它是否被 robots.txt 阻止。

请记住，使用 robots.txt 时，这不会阻止搜索引擎在搜索结果中显示 URL。它只是阻止他们抓取 URL。如果您只是不希望在搜索结果中出现这些类型的 URL，但不介意它们抓取页面（这意味着您不能使用 robots.txt 阻止这些 URL），您可以添加元标记或 x-robots - 在 http 标头中使用 NOINDEX 值标记，以防止将其添加到搜索结果中。

关于使用“nofollow”标准的其他评论之一。Nofollow 实际上并没有阻止搜索引擎抓取这些 URL。它更被认为是一种拒绝对该链接到目的地的任何认可的方式。Google 和 Bing 建议使用 nofollow 来指示赞助链接或不受信任的 UGC 链接。

# python - 如何不意外地覆盖python中的方法？

> ID：12298010
> 
> 赞同：1
> 
> 时间：2012-09-06T10:27:43.703
> 
> 标签：python, class

我知道那里有很多类似的问题。但我的问题不同。 **我不想做一个不能被覆盖的方法。** 我想保护我新创建的类不会意外覆盖某些东西。

使用下划线作为前缀非常好，但很快我就会得到很多带有很多下划线的方法。在我继承的类的某个地方，我将覆盖祖辈的类方法。

我真正想要的是这样简单的东西：

```
class Cat(Mammal):
    def walk(self):
        if ancestor_has_function('walk'):
            parent.walk();
        do_something_here(); 
```

如果 Cat 的任何祖先（哺乳动物、动物或 LifeForm）具有“walk”方法，则应首先执行父方法。

这有可能在python中做到这一点吗？

**编辑：** 例如，这是我认为不错的答案的简历。希望这对其他人有帮助：

```
class Animal(object):
    pass
    #def walk(self):
    #    print('animal walk')

class Mammal(Animal):
    def walk(self):
        if hasattr(super(Mammal, self), 'walk') and callable(super(Mammal,self).walk):
            super(Mammal, self).walk()
        print('mammal walk')

class Cat(Mammal):
    def walk(self):
        super(Cat, self).walk()
        print('cat walk')

if __name__ == '__main__':
    cat = Cat()
    cat.walk() 
```

这是输出：

> 哺乳动物步行
> 
> 猫步

尝试取消注释 Animal 的 walk 方法，你也会让它工作。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-06T10:45:44.363

一般来说，您可能希望在最通用的超类中至少提供一个存根方法：

```
class Mammal(object):
    def walk(self):
        pass 
```

然后，通过调用在子类中扩展它`super()`：

```
class Cat(Mammal):
    def walk(self):
        super(Cat, self).walk()  # or just super().walk(), in Python 3+
        do_something_here() 
```

使`super()`调用有条件并不难，但这可能是一个坏主意：它冗长、脆弱，并且只会鼓励不良做法。如果你真的，*真的*有充分的理由这样做，你可以`hasattr()`在`super`对象上使用，就像你对任何其他对象一样：

```
class Cat(Mammal):
    def walk(self):
        if hasattr(super(Cat, self), 'walk'):
            super(Cat, self).walk()
        do_something_here() 
```

但是，您只想在不寻常的情况下执行此操作，例如从第三方库子类化类，由于某种原因，您不能依赖某些存在的方法。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-06T10:43:50.690

是的。`hasattr`检查是否存在具有特定名称的属性。并`callable`检查特定属性是否可调用。

```
class Mammal(object):
    def walk(self):
        print "walking"

class Cat(Mammal):
    def walk(self):
        if hasattr(Mammal,'walk') and callable(Mammal.walk):
            Mammal.walk(self);
        print "another walking!" 
```

现在：

```
>>> my_cat = Cat()
>>> my_cat.walk()
walking
another walking! 
```

请注意，您还可以使用`super`这样的方式获取父类：

```
if hasattr(super(Cat, self),'walk'): 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-06T10:41:21.370

您可以使用该`dir()`函数获取为某个模块或类声明的所有名称。在层次结构中较高的类中声明的方法也将包括在内。但是请注意，这也将包括属性，因此请先检查`callable()`。

此外，在 python 中调用父方法看起来有点不同，请参见下面的代码。

```
def walk(self):
    if "walk" in dir(Mammal) and callable(Mammal.walk):
        Mammal.walk(self)
    # do something 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-06T10:37:52.213

您可以将原始方法保留在字段中

```
class MyClass:
    def __method(self):
        pass

    def __init__(self):
        self.method = __method 
```

然后检查身份并调用保存的方法

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-06T10:57:30.487

```
import inspect

class SomeClass():
    def __init__(self):
        ...

    def somefunc(self):
        ....

    def someOtherFunc(self):
        ....

allmembers = inspect.getmembers(SomeClass, predicate=inspect.ismethod) 
```

`getmembers`返回给定类中定义的所有方法的列表，它是包含方法名称和定义的元组列表：

```
[('__init__', <unbound method SomeClass.__init__>),
 ('somefunc', <unbound method SomeClass.somefunc>),
 ('someOtherFunc', <unbound method SomeClass.someOtherFunc>)] 
```

由于元组的第一个元素是字符串，您可以使用基于字符串的方法来过滤基本方法，例如`__init__`

```
allmembers = filter(lambda x: not x.startswith('__'), [x[0] for x in inspect.getmembers(SomeClass, predicate=inspect.ismethod))])

[('somefunc', <unbound method SomeClass.somefunc>),
('someOtherFunc', <unbound method SomeClass.someOtherFunc>)] 
```

您可以获得类中定义的所有方法的列表，并检查您是否有类似名称的方法，因为`getmembers`返回一个未绑定的方法实例，您也可以轻松访问该函数。

# sql - 使用 tSQL 计算多个表中的行数

> ID：12298011
> 
> 赞同：2
> 
> 时间：2012-09-06T10:27:47.650
> 
> 标签：sql, sql-server, sql-server-2008, tsql, count

我需要在 SQL Server 2008 中计算多个表中的行数。我这样做：

```
select count(*) from (select * from tbl1 union all select * from tbl2) 
```

但它给了我一个错误的语法错误靠近）。为什么？

PS。实际表数可以多于 2 个。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-06T10:29:31.533

如果您的表中有不同数量的列，请尝试这种方式

```
 SELECT count(*) 
 FROM (
      SELECT NULL as columnName 
      FROM tbl1 
          UNION ALL
      SELECT NULL 
      FROM tbl2
     ) T 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-06T10:28:40.157

尝试这个：

您必须为派生表命名

```
select count(*) from 
(select * from tbl1 union all select * from tbl2)a 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-06T10:29:11.190

我认为您必须`SELECT`在`FROM`子句中为 the 别名：

```
select count(*) 
from 
(
   select * from tbl1 
   union all 
   select * from tbl2
) AS SUB 
```

您还需要确保`*`在两个表中`tbl1`返回`tbl2`完全相同的列数，并且它们的类型必须匹配。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-06T15:17:47.240

我不喜欢在计数之前先做工会。它为 SQL 优化器提供了选择做更多工作的机会。

AlexK 的（已删除）解决方案很好。你也可以这样做：

```
select (select count(*) from tbl1) + (select count(*) from tbl2) as cnt 
```

# spring - 我可以为长时间运行但不经常执行的任务使用单独的非连接池数据源吗？

> ID：12298012
> 
> 赞同：0
> 
> 时间：2012-09-06T10:27:48.057
> 
> 标签：spring, hibernate, connection-pooling

我的应用程序堆栈由托管在 Apache tomcat 7 上的 Spring MVC、Hibernate 和 MySQL 组成。

我已经设置了 Spring 来管理事务，并且 Hibernate 会话工厂正在利用 tomcat dbcp 连接池支持的数据源来获取连接。

我的应用程序中有一个用例，其中我运行了一个长时间运行的任务，该任务是通过 Web UI 启动的（比如单击按钮）。此任务运行 10 分钟，然后我的连接池开始抛出连接关闭异常。这显然是因为连接池设置，如果连接在特定时间后没有返回池，则将其标记为已放弃并稍后删除。我可以通过修改超时设置并将其增加到足够大的值来解决这个问题。但我可能还有其他几个类似的用例，目前可能不知道这些用例会运行多长时间。

所以我在这里考虑另一种方法。

这个用例不会经常启动，所以我可以使用单独的数据源定义而不使用连接池。当然，我可以在 Spring 中设置两个不同名称的事务管理器“abc”和“xyz”，并使用@Transactional(name=”abc”) 和@Transactional(name=”xyz)”。这两种事务管理器都将使用它们各自的数据源——一种具有连接池以支持常见用例，另一种没有连接池以支持长时间运行的事务。这样我就不必担心更改超时配置。

这将是一个普遍接受的解决方案还是我应该采用超时配置方法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-06T10:46:06.833

如果您没有其他方法来限制应用程序可以启动的连接数，那么避免使用连接池将导致问题。例如（课程的简单示例）如果您要在每次用户单击按钮时启动批处理，请确保限制他们可以执行此任务的时间。

另一种方法是在您的应用程序服务器（jdbc/batchprocess）中定义一个新的 jdbc 资源，并在该资源中配置更长的超时时间。[然后使用动态数据源路由](http://blog.springsource.org/2007/01/23/dynamic-datasource-routing/)从一个更改为另一个。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-06T12:15:28.167

您可以打开 Hibernate 会话，提供您自己的连接：

```
sessionFactory.withOptions().connection( yourConnection ).openSession(); 
```

# c# - 如何在 C# 4.0 中删除指定 xmlnode 的所有子节点？

> ID：12298018
> 
> 赞同：3
> 
> 时间：2012-09-06T10:27:59.060
> 
> 标签：c#, .net, xml, c#-4.0

这是我的xml。

```
<Document>
<page no="1">
  <Paragraph no="1">
    <Line>line1</Line>
  </Paragraph>
  <Paragraph no="2">
    <Line>line2</Line>
  </Paragraph>
</page>
<page no="2">
  <Paragraph no="1">
    <Line>line1</Line>
  </Paragraph>
  <Paragraph no="2">
    <Line>line2</Line>
  </Paragraph>
</page>
</Document> 
```

我的 C# 代码是

```
XmlDocument xd = new XmlDocument();
            xd.Load(@"H:\Sample-8-final.xml");
            XmlNodeList pnodelist = xd.GetElementsByTagName("page");
            XmlNodeList xdChildNodeList = xd.ChildNodes;

            for (int i = 0; i < pnodelist.Count; i++)
            {
                XmlNode pageNode = pnodelist[i];
                foreach (XmlNode xxNode in pageNode.ChildNodes)
                {
                    if (xxNode.Name.ToString().Trim().Equals("Paragraph"))
                    {
                        foreach (XmlNode yyNode in xxNode.ChildNodes)
                        {
                            yyNode.ParentNode.RemoveChild(yyNode);
                        }
                    }
                }
                xd.Save(@"H:\Sample-8-final_1.xml"); 
```

我需要的输出是

```
<Document>
<page no="1">
  <Paragraph no="1">
  </Paragraph>
  <Paragraph no="2">
  </Paragraph>
</page>
<page no="2">
  <Paragraph no="1">
  </Paragraph>
  <Paragraph no="2">
  </Paragraph>
</page>
</Document> 
```

但我的代码产生了错误的结果，如下所示：

```
<Document>
    <page no="1">
      <Paragraph no="1">
      </Paragraph>
      <Paragraph no="2">
        <Line>line2</Line>
      </Paragraph>
    </page>
    <page no="2">
      <Paragraph no="1">
      </Paragraph>
      <Paragraph no="2">
        <Line>line2</Line>
      </Paragraph>
    </page>
    </Document> 
```

请指导我摆脱这个问题......

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-09-06T10:34:39.980

使用 LINQ to XML 删除段落元素的所有后代：

```
XElement root = XElement.Load(@"H:\Sample-8-final_1.xml");
root.Descendants("Paragraph").Descendants().Remove(); 
```

注意：您需要放在`using System.Xml.Linq;`文件的顶部。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-05-10T21:26:50.313

[Chris 解释](https://stackoverflow.com/a/12298154/578288)说，迭代失败是因为您`ChildNodes`在迭代该集合时正在修改（通过删除它们）。他建议[`RemoveAll()`](http://msdn.microsoft.com/en-us/library/system.xml.xmlnode.removeall)改用。但是`RemoveAll()`删除属性以及子元素，这不是我想要的。所以这就是我写的在保留属性的同时安全迭代的内容（在 VB.NET 中）：

```
Private Shared Sub RemoveAllChildren(element As XmlElement)
    ' you can't iterate and delete in the same loop, because you would be modifying .ChildNodes
    Dim childrenList = New ArrayList()
    For Each child In element.ChildNodes
        childrenList.Add(child)
    Next
    For Each child In childrenList
        child.ParentNode.RemoveChild(child)
    Next
End Sub 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-09-06T10:34:55.683

问题是你正在改变你在这些行中迭代的东西：

```
foreach (XmlNode yyNode in xxNode.ChildNodes)
{
    yyNode.ParentNode.RemoveChild(yyNode);
} 
```

`yyNode.ParentNode`如果您要替换为，这更容易发现`xxNode`（保证是这样）。这会导致迭代器感到困惑并跳过一些你不希望它做的事情。

可能更容易虽然只是打电话`xxNode.RemoveAll()`。请参阅文档：http: [//msdn.microsoft.com/en-us/library/system.xml.xmlnode.removeall](http://msdn.microsoft.com/en-us/library/system.xml.xmlnode.removeall)

但是请注意，正如 Mahen 所说，这也会删除您的属性，因此通常不是所需的解决方案（例如，在这种情况下不是）。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-09-06T10:37:35.607

代码没有问题，您只需要准确地使用您的文字即可。它们区分大小写。写“page”而不是“PAGE”和“Paragraph”而不是“PARAGRAPH”，那么代码就可以正常工作了。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2022-01-29T04:12:27.663

```
while (parentNode.ChildNodes.Count > 0) 
{
   parentNode.RemoveChild(parentNode.ChildNodes[0]);
} 
```

也应该工作。

# wpf - 在 XAML 中无限旋转矩形

> ID：12298019
> 
> 赞同：35
> 
> 时间：2012-09-06T10:28:03.033
> 
> 标签：wpf, xaml, animation, autorotate

如何定义 XAML 以无限旋转矩形？

到目前为止，我找到了一个带有代码但没有 xaml 的解决方案：http: [//www.codeproject.com/Articles/23257/Beginner-s-WPF-Animation-Tutorial](http://www.codeproject.com/Articles/23257/Beginner-s-WPF-Animation-Tutorial) 我这样使用：

```
private void Window_Loaded_1(object sender, RoutedEventArgs e)
{
    var doubleAnimation = new DoubleAnimation(360, 0, new Duration(TimeSpan.FromSeconds(1)));
    var rotateTransform = new RotateTransform();

    rect1.RenderTransform = rotateTransform;
    rect1.RenderTransformOrigin = new Point(0.5, 0.5);
    doubleAnimation.RepeatBehavior = RepeatBehavior.Forever;

    rotateTransform.BeginAnimation(RotateTransform.AngleProperty, doubleAnimation);
} 
```

但是我怎样才能只用 XAML 来实现呢？

* * *

## 回答 #1

> 赞同：70
> 
> 时间：2012-09-06T10:43:10.887

像这样的东西

```
<Rectangle x:Name="rect1" RenderTransformOrigin="0.5, 0.5">
  <Rectangle.RenderTransform>
    <!-- giving the transform a name tells the framework not to freeze it -->
    <RotateTransform x:Name="noFreeze" />
  </Rectangle.RenderTransform>
  <Rectangle.Triggers>
    <EventTrigger RoutedEvent="Loaded">
      <BeginStoryboard>
        <Storyboard>
          <DoubleAnimation
            Storyboard.TargetProperty="(Rectangle.RenderTransform).(RotateTransform.Angle)"
            To="-360" Duration="0:0:1" RepeatBehavior="Forever" />
        </Storyboard>
      </BeginStoryboard>
    </EventTrigger>
  </Rectangle.Triggers>
</Rectangle> 
```

当然，您可以随时删除`Loaded`触发器并运行此情节提要。

# android - 所有线程完成后如何正确停止服务

> ID：12298026
> 
> 赞同：1
> 
> 时间：2012-09-06T10:28:26.440
> 
> 标签：android, multithreading, service

我有一个服务，每次调用 onStartCommand 时都会触发一个新的网络线程。当最后一个线程完成时，我必须停止服务。

有什么好的做法来处理这个问题吗？现在我在服务中有一个 HashTable，我在线程启动/结束时添加和删除一个令牌。

每次线程完成时，它都会从哈希表中删除令牌，如果哈希表为空，则我停止服务。这可行，但我知道它不是 100% 安全的，因为旧线程可以在新线程将其令牌插入哈希表之前检查哈希表的大小，因此，当实际上有一个新线程开始时停止服务.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-06T12:15:31.557

您需要互斥锁保护对哈希表的访问，如下所示：（假设 pthreads 和 c++，您必须相应地更改它，但我认为您明白了）

```
int getHashTableSize()
{
    pthread_mutex_lock(&yourMutex);
    int size = yourHashTable.size();
    pthread_mutex_unlock(&yourMutex);

    return size;
}

void addThread(TokenType &token)
{
    pthread_mutex_lock(&yourMutex);
    yourHashTable.addToken(token);
    pthread_mutex_unlock(&yourMutex);
}

void removeThread(TokenType &token)
{
    pthread_mutex_lock(&yourMutex);
    yourHashTable.removeToken(token);
    // check if yourHashTable is empty here, and stop service accordingly
    pthread_mutex_unlock(&yourMutex);
}

onStartCommand()
{
    pthread_mutex_lock(&yourMutex);
    // Logic for wake lock, thread creation, and adding to the hash table here
    // possibly need to consider recursive mutex locking
    pthread_mutex_unlock(&yourMutex);
} 
```

当然，您必须相应地更改类型并将这些方法添加到适当的类中。

另一种常见的做法是通过调用 join 来等待线程完成，如下所示。这当然只有在线程数是“静态的”时才有用。如果您有一个线程创建是动态的应用程序，那么第二种方法可能没有那么有用。

```
for(int i = 0; i < numThreads; i++)
{
    // threadIds is a vector
    pthread_join(threadIds[i], NULL);
}
// At this point, all of your threads are complete 
```

# css - 这个 doctype 有什么问题

> ID：12298038
> 
> 赞同：0
> 
> 时间：2012-09-06T10:28:49.460
> 
> 标签：css, internet-explorer, internet-explorer-9, doctype

我的 WordPress 网站有一些主要的 IE 问题，包括 jQuery、box-shadow 和其他奇怪的 CSS 问题。

我的doctype会受到指责吗？

```
<!DOCTYPE html>
<!--[if IE 6]>
<html id="ie6" dir="ltr" lang="en-US">
<![endif]-->
<!--[if IE 7]>
<html id="ie7" dir="ltr" lang="en-US">
<![endif]-->
<!--[if IE 8]>
<html id="ie8" dir="ltr" lang="en-US">
<![endif]-->
<!--[if !(IE 6) | !(IE 7) | !(IE 8)  ]><!-->
<html dir="ltr" lang="en-US">
<!--<![endif]-->
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width" />
<title>NA-net | NA&#039;s Communication Network</title>
<link rel="profile" href="http://gmpg.org/xfn/11" />
<link rel="stylesheet" type="text/css" media="all" href="http://121.5.7.109/na_comm_new/wp-content/themes/twentyeleven-child/style.css" />
<link rel="pingback" href="http://121.5.7.109/na_comm_new/xmlrpc.php" />
<!--[if lt IE 9]>
<script src="http://121.5.7.109/na_comm_new/wp-content/themes/twentyeleven/js/html5.js" type="text/javascript"></script>
<![endif]-->
<meta name='robots' content='noindex,nofollow' />
<link rel="alternate" type="application/rss+xml" title="NA-net &raquo; Feed" href="http://121.5.7.109/na_comm_new/?feed=rss2" />
<link rel="alternate" type="application/rss+xml" title="NA-net &raquo; Comments Feed" href="http://121.5.7.109/na_comm_new/?feed=comments-rss2" />
<link rel='stylesheet' id='wp_sidebarlogin_css_styles-css'  href='http://121.5.7.109/na_comm_new/wp-content/plugins/sidebar-login/style.css?ver=3.4.1' type='text/css' media='all' />
<link rel='stylesheet' id='bbp-default-bbpress-css'  href='http://121.5.7.109/na_comm_new/wp-content/plugins/bbpress/bbp-theme-compat/css/bbpress.css?ver=2.1.2' type='text/css' media='screen' />
<link rel='stylesheet' id='slider-css'  href='http://121.5.7.109/na_comm_new/wp-content/plugins/easing-slider/css/slider.css?ver=1.2' type='text/css' media='all' />
<script type='text/javascript' src='http://121.5.7.109/na_comm_new/wp-content/plugins/easing-slider/js/jquery.js?ver=1.4.2'></script>
<script type='text/javascript' src='http://121.5.7.109/na_comm_new/wp-content/plugins/sidebar-login/js/blockui.js?ver=1.0'></script>
<script type='text/javascript'> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-06T10:50:21.890

Doctype 没问题，但我建议使用这个：

```
<!DOCTYPE html>
<!--[if lt IE 6]>      <html class="lt-ie9 lt-ie8 lt-ie7 lt-ie6"> <![endif]-->
<!--[if IE 6]>         <html class="lt-ie9 lt-ie8 lt-ie7 ie6"> <![endif]-->   
<!--[if IE 7]>         <html class="lt-ie9 lt-ie8 ie7"> <![endif]-->
<!--[if IE 8]>         <html class="lt-ie9 ie8"> <![endif]-->
<!--[if gt IE 8]><!--> <html class="modern"> <!--<![endif]-->
<head>
... 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-06T10:51:44.557

如果您的代码符合标准，则您的文档类型不太可能导致问题。*（显然，快速检查的方法很简单：将其更改为 HTML4.01 文档类型，看看是否有任何纠正！）* “通用”HTML 文档类型应该在所有现代浏览器中触发标准模式，甚至旧版浏览器也应该切换到完整或在存在*任何*文档类型的情况下接近标准模式。鉴于您在问题中标记了 IE9，您的问题可能是由于 IE9 仅部分符合 CSS 2.1 之后的标准。我建议尝试单独隔离您的问题。

*Box-shadow:* According to [MDN](https://developer.mozilla.org/en-US/docs/CSS/box-shadow#Browser_compatibility), you may need to explicitly set `border-collapse:seperate` for it to work in IE.
*Other:* I see you use conditional comments to sniff out IE6-8\. Perhaps you need to extend this to IE9? Also watch out for any nasty inline CSS hacks...

# java - Maven - 分离部署和项目

> ID：12298046
> 
> 赞同：2
> 
> 时间：2012-09-06T10:29:13.123
> 
> 标签：java, maven, jenkins, hudson, amazon-elastic-beanstalk

将 Maven 部署配置与构建配置分开的“最佳实践”方式是什么？

我有一个`war`项目，由 Jenkins 构建。我希望 Jenkins 将其部署到 Elastic Beanstalk，但是目前可用的最佳解决方案是使用`beanstalk-maven-plugin`.

我不确定 POM.xml 包含有关部署的信息是否有意义；毕竟，在构建时`.war`可能会在任何地方结束。

在这种情况下，是否有某种方法可以使用 Maven 模块将`beanstalk-maven-plugin`配置存储在与实际软件项目不同的 POM 中？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-06T10:37:29.270

我认为你必须解决问题。

1.  只需将`beanstalk-maven-plugin`定义添加到您的常规`pom.xml`. 配置可以存储在单独的属性文件中，也可以通过命令行（`-D`选项）中的系统属性提供。将`beanstalk`目标添加到 Jenkins 中的 maven 命令行。因此，每个构建都将部署在 beanstalk 上。或者，您可以在 Jenkins 中定义另一个项目，无需编译即可运行部署。您可以按计划或通过 Jankins 中的项目依赖项运行此部署项目。
2.  创建另一个 Maven 项目。它只会运行 beanstalk 插件。我个人认为这样做没有太大的优势。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-29T12:33:19.777

我想了三件事：

一种。我不确定（我承认我有点忙于想出 0.2.7-RC7），但我认为Java 支持Elastic Beanstalk 配置*文件。*

所以分开可能是个好主意（我承认在 Beanstalker 中管理配置很无聊）

湾。另一种选择是在 maven-war-plugin 的覆盖功能中使用战争覆盖，并创建一个取决于您的其他战争的战争。

就我个人而言，如果你问的话，我确实在 Maven 中有一个单独的部署配置文件，并且该功能通常会派上用场

# c++ - 为什么我得到没有类型错误的声明 - 链表？

> ID：12298047
> 
> 赞同：0
> 
> 时间：2012-09-06T10:29:13.490
> 
> 标签：c++, templates, linked-list

您好我正在尝试使用模板和 ADT 实现链接列表。目前我有两节课。一个是链表的迭代器，另一个是链表的基类，我将使用它派生链表类。

当尝试实现两个函数时，它们将分别在列表的开头和结尾给我一个迭代器，我得到编译错误，说“ISO C++ 禁止声明没有类型的 'linkedListIterator'”

下面是定义迭代器的代码：

```
#ifndef LINKEDLISTITERATOR_H
#define LINKEDLISTITERATOR_H

#include <stddef.h> //for NULL
#include "nodetype.h"
#include "linkedlisttype.h"

template <class Type>
class linkedListIterator
{
public:
    linkedListIterator();

    linkedListIterator(nodeType<Type> *ptr);

    Type operator*();

    linkedListIterator<Type> operator++();

    bool operator==(const linkedListIterator<Type>& right) const;

    bool operator!=(const linkedListIterator<Type>& right) const;

private:
    nodeType<Type> *current; 
};

#endif // LINKEDLISTITERATOR_H 
```

这是节点类型定义的代码

```
#ifndef NODETYPE_H_INCLUDED
#define NODETYPE_H_INCLUDED

//Definition of the node
template <class Type>
struct nodeType
{
    Type info;
    nodeType<Type> *link;
};

#endif // NODETYPE_H_INCLUDED 
```

下面是链表基类的定义：

```
#ifndef LINKEDLISTTYPE_H
#define LINKEDLISTTYPE_H

#include "nodetype.h"
#include "linkedlistiterator.h"

//Definition of linked list
template <class Type>
class linkedListType
{
public:
    const linkedListType<Type>& operator=
    (const linkedListType<Type>&);

    void initializeList();

    bool isEmptyList() const;

    void print() const;

    int length() const;

    void destroyList();

    Type front() const;

    Type back() const;

    virtual bool search(const Type& searchItem) const = 0;

    virtual void insertFirst(const Type& newItem) = 0;

    virtual void insertLast(const Type& newItem) = 0;

    virtual void deleteNode(const Type& deleteItem) = 0;

    // this is where the error comes    
    linkedListIterator<Type> begin();

    // and here as well
    linkedListIterator<Type> end();

    linkedListType();

    linkedListType(const linkedListType<Type>& otherList);

    ~linkedListType();

protected:
    int count; 
    nodeType<Type> *first; 
    nodeType<Type> *last; 

private:
    void copyList(const linkedListType<Type>& otherList);
};

#endif // LINKEDLISTTYPE_H 
```

我是模板和 ADT 的新手，所以我试图围绕这一点思考。任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-06T10:39:40.967

您有两个标题，每个标题都尝试相互包含。结果是，如果你`#include "linkedlistiterator.h"`， 的定义`linkedListType`出现在`linkedListIterator`;之前。因此由于当时`linkedListIterator`未声明而导致的错误。

在这种情况下，看起来迭代器类型根本不依赖于列表类型，因此您可以简单地删除`#include "linkedlistlype.h"`from `"linkedlistiterator.h"`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-06T10:40:39.093

似乎两者`linkedlisttype.h`兼而有之`linkedlistiterator.h`。

这表明你的想法相当紧密。你可能想要有`LinkedList<T>`类和嵌套`LinkedList<T>::Iterator`类。

# php - 生成带有创建日期的文件名

> ID：12298048
> 
> 赞同：16
> 
> 时间：2012-09-06T10:29:18.010
> 
> 标签：php, datetime, filenames, dompdf

我正在使用 dompdf 创建 PDF 文件并将其邮寄到我的邮件中，同时在服务器上保存一个 .txt 版本。保存文件正在正常工作，但我在使用唯一名称保存文件时遇到了一些麻烦。在这种情况下，我想要类似 date-time.txt ( 06-09-2012_11:43.txt )

甚至更好，如果它可以将文本字段“refnr”中的名称作为名称。

```
<label for="refnr"><b>Referensnummer:</b></label>
<input type="text" name="refnr" id="refnr" class="input" /> 
```

代码如下所示：

```
$html = '/html.php';
$filename = $dir.'/Admin/files/"date here".txt';
$dompdf = new DOMPDF(); 
$dompdf->load_html($html); 
$dompdf->set_paper('a4', 'portrait');
$dompdf->render(); 
file_put_contents($filename, $dompdf->output()); 
```

我试图玩弄，`$name='myfile_'.date('m-d-Y_hia)';`但无法做到这一点，它每次都会在那条线上给出一个错误。所以现在我在这里寻求各位聪明人的指导:)

* * *

## 回答 #1

> 赞同：40
> 
> 时间：2012-09-06T10:30:30.897

您`)`在关闭字符串格式代码之前放置了：

```
$name='myfile_'.date('m-d-Y_hia'); 
```

应该可以正常工作。

正如 Jan1337z 指出的那样，您可能*需要*在文件上添加后缀：

```
$name='myfile_'.date('m-d-Y_hia').'.txt'; 
```

没有后缀不应停止创建文件 - 但拥有它可能有助于使其易于使用。

# objective-c - NSProxy with forwardInvocation with self - 可能吗？

> ID：12298057
> 
> 赞同：1
> 
> 时间：2012-09-06T10:29:55.450
> 
> 标签：objective-c, nsproxy

我已经设置了 NSProxy、forwardInvocation 等来捕获传递给对象的消息 - 一切正常。

我还想做的是捕获 self 传递的消息，例如： [self doSomething] 或 self.myVal = 5;

它似乎不起作用......这可能吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-30T14:10:07.213

`self`通过或另一个指向代理的变量向代理实例发送消息没有什么不同。在后台，每个消息调度都转换为一个[objc_msgSend()](https://developer.apple.com/library/mac/documentation/Cocoa/Reference/ObjCRuntimeRef/Reference/reference.html#//apple_ref/c/func/objc_msgSend)函数调用，将实例的地址作为接收者传递，所以使用 self 或“外部变量”并不重要，只要它们都指向到同一个对象。

为了确保这一点，我通过实现一个 NSProxy 子类 (TestProxy) 将消息转发到一个 NSObject 子类 (TestObject) 来测试这一点。TestObject 有一个自定义方法打印出对象的描述：

```
@interface TestObject : NSObject
- (void)printDescription;
@end 
```

代理覆盖了以下方法（_theObject 是被代理的 TestObject 实例）：

```
- (void)forwardInvocation:(NSInvocation *)anInvocation
{
    SEL selector = [anInvocation selector];

    if ([_testObject respondsToSelector:selector])
        [anInvocation invokeWithTarget:_testObject];
}

- (BOOL)respondsToSelector:(SEL)aSelector
{
    return [_testObject respondsToSelector:aSelector];
}

- (NSMethodSignature*)methodSignatureForSelector:(SEL)selector
{
    return [_testObject methodSignatureForSelector:selector];
} 
```

`self`通过正确地将消息调用转发到 _theObject向代理发送 printDescription 消息：

```
[((id)self) printDescription]; 
```

如果您的问题是当您尝试将消息直接发送到`self`而不将其强制转换为时编译器会给您错误`id`，那么我的猜测是没有办法解决这个问题。由于编译器无法检测到`self`（代理）类的接口中的方法，并且不够聪明，无法确定这实际上是另一个类的代理，所以它会给你错误。

# ajax - JSF 2：在提交之前访问表单中 selectOneMenu 的选定值

> ID：12298064
> 
> 赞同：2
> 
> 时间：2012-09-06T10:30:26.010
> 
> 标签：ajax, jsf, jsf-2, primefaces

**看法**

```
<h:form id="main_form">
    <p:inputText id="title" required="true" label="Title" value="#{myBean.myLink.title}" immediate="true" />

    <p:selectOneMenu id="scope" required="true" label="Scope" value="#{myBean.myLink.scope}" immediate="true" >
        <f:selectItem itemLabel="Please choose" itemValue="" />
        <f:selectItems value="#{myBean.availableScopes}" id="selScope"/>
    </p:selectOneMenu>

    <p:inputText id="link" required="true" label="URL" value="#{myBean.myLink.link}" immediate="true">      
        <p:ajax event="blur" update="msgLink" listener="#{myBean.checkUrl}" />
    </p:inputText>

    ... msgLink and other (required) elements

    ... submit button
</h:form> 
```

**托管豆**

```
@Component("myBean")
@Scope("session")
public class MyBean implements Serializable {

    private Link myLink;
    private Map<String, String> availableScopes;

    public MyBean() {
        this.availableScopes = new HashMap<String, String>();
        this.availableScopes.put("Intranet", "Intranet");
        this.availableScopes.put("Internet", "Internet");   
    }

    // setter/getters etc.

    public void checkUrl() {
        System.out.println(myLink.getTitle());  // works
        System.out.println(myLink.getScope());  // DOES NOT work
        System.out.println(myLink.getLink());   // works
    }

} 
```

*   我想在提交表单**之前根据所选范围检查 URL。**但是被调用的方法可以访问`inputText`对象的值。不是 中选择的值`selectOneMenu`。
*   我已经尝试过了，`getExternalContext().getSessionMap().get("scope")`但当时 SessionMap 为空。

有机会访问组合框的选定值吗？

谢谢吉姆

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-06T10:36:56.840

默认情况下，组件内部的 (and )仅`<p:ajax>`执行/处理**当前**组件 ( )，而不是其他组件。`<f:ajax>``UIInput` **`UIInput``@this`**

 **如果要`UIInput`在调用侦听器方法时执行/处理所有这些组件，则应在`<p:ajax process>`（或`<f:ajax execute>`）属性中指定：

```
<p:inputText id="title" ... />

<p:selectOneMenu id="scope" ... >
    ...
</p:selectOneMenu>

<p:inputText id="link" ...>      
    <p:ajax process="title scope link" ... />
</p:inputText> 
```

* * *

**与具体问题无关**，我想知道所有这些`immediate="true"`属性在这种情况下如何有用。你确定你需要它们吗？**

# c# - 图像源 WPF

> ID：12298072
> 
> 赞同：0
> 
> 时间：2012-09-06T10:30:45.510
> 
> 标签：c#, wpf, image

我的 WPF 应用程序中有 2 个图像控件，我有一个图像列表，我想将列表中的图像分配给多个控件。

```
imgBackground= t.BackgroundImage //Only shows in one component don't work
imgBackground.Source  = t.BackgroundImage.Source ;//don't work 
```

图像未显示在我尝试分配给它的所有图像控件中。我怎样才能解决这个问题？

注意 t.BackgroundImage 和 imgBackground 是 System.Windows.Controls.Image 类型

# jquery - jquery selected plugin - 使用 php 获取数据

> ID：12298073
> 
> 赞同：11
> 
> 时间：2012-09-06T10:30:52.597
> 
> 标签：jquery, post, multi-select, jquery-chosen

我正在使用来自[http://harvesthq.github.com/chosen/](http://harvesthq.github.com/chosen/)**的多选与组**和**多选**

有谁知道如何使用 php 获取提交数据的值？

`$_POST['countries'];`不起作用，只返回一个选定的项目（不是数组）

这是选择标签名称/ID等

```
 <select name="countries" multiple="multiple" class="chzn-select" id="countries" tabindex="6" data-placeholder="Countries"> 
```

PS。我已经检查了[选择的 Jquery 插件 - 获取选定](https://stackoverflow.com/questions/10521315/chosen-jquery-plugin-getting-selected-values)的值，但除了获取值之外不知道该怎么做。有没有不使用事件来更新隐藏字段和提交数据的直接方法？

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-09-06T10:46:28.950

当您使用 a 发布多个值时，`<select>`您需要为其命名，它看起来像`array`.

```
<select name="countries[]">
</select> 
```

这应该是方法。在 上`POST`，该变量应该可以通过以下方式访问：

```
$_POST['countries'] = array(
  [0] => 'India' , // First selected value
  [1] => 'Indiana' , // Second
  [2] => 'USA' // Third
);

// So...
echo $_POST['countries'][1];
// would print "Indiana" 
```

注意：这些值将保存在标准的零索引数组中

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-09-06T10:44:21.420

检查这些链接：[http](http://www.onlinetools.org/tricks/using_multiple_select.php) ://www.onlinetools.org/tricks/using_multiple_select.php和[如何在 php 中获取选择框的多个选定值？](https://stackoverflow.com/questions/2407284/how-to-get-multiple-selected-values-of-select-box-in-php)

选择名称的末尾应该有方括号，所以它会是

`name="countries[]"`

使用`print_r()`PHP 代码查看发布的内容。用于`foreach()`遍历值。

# r - Golub 白血病数据集：与 HUGO 符号（或其他）关联的 ID

> ID：12298074
> 
> 赞同：0
> 
> 时间：2012-09-06T10:30:57.243
> 
> 标签：r, generics, bioinformatics, bioconductor

我很难将 Affy id 转换为其他一些标准符号以进行进一步处理：我正在使用的数据是白血病数据集（Golub 等人，1999 年）。我使用从 Bioconductor 项目中检索到的 golubEsets 数据集。

我尝试了本教程（http://faculty.washington.edu/kenrice/sisg/sisg-sea09-09.pdf）

```
# library for annotation
library("annotate")
library("hgu95av2.db")
library("GO.db")
#library for golub data set
library(golubEsets)
data(Golub_Merge)
geneids <- featureNames(Golub_Merge)
# retrieve something usefull (e.g. gene name)
mget(geneids, hgu95av2GENENAME) 
```

这会产生很多错误，因为在数据库中找不到 Golub 数据集中的大多数 Affy id。特别是对于这个数据集，我在哪里可以找到一些标准符号（HUGO？）——因为我需要它们进行进一步的分析。

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-06T16:42:40.683

Golub 数据集不是由 hgu95av2 affymetrix 芯片生成的。它使用较旧的hu6800。

只需在 R 命令行中键入 Golub_Merge 即可为您提供摘要信息并将 Annotation 字段列为“Annotation: hu6800”

有关正确的注释库，请参阅[http://bioconductor.org/packages/2.6/data/annotation/html/hu6800.db.html](http://bioconductor.org/packages/2.6/data/annotation/html/hu6800.db.html)。

# android - WallpaperServices 的 draw 方法的类似 Invalidate 的方法

> ID：12298075
> 
> 赞同：4
> 
> 时间：2012-09-06T10:31:01.317
> 
> 标签：android, canvas, invalidation

我试图使带有加速度计的移动位图更平滑，并且意外地注意到，当我在方法结束时调用`invalidate();`而`onDraw()`不是在结束时调用它时`onSensorChanged()`，即使我没有任何类型的低通滤波器，我也会得到更平滑的运动. 然后我尝试用我的 LiveWallpaper 做同样的事情，但是你知道在of中没有`onDraw()`方法，但是你必须自己创建一个并调用它，例如使用. 但是即使其余代码与其他程序中的代码相同，这样做也不会产生任何更平滑的结果。`Engine``WallpaperService``Handler`

这是我在非壁纸程序中使用的代码，它运行良好：

```
public void onDraw(Canvas c) {

xPosition += xAcceleration;
yPosition += yAcceleration;

drawable = BitmapFactory.decodeResource(getResources(),R.drawable.ball);
c.drawBitmap(drawable, xPosition,yPosition, paint);

invalidate();

} 
```

所以我去尝试创建我自己的类似无效的解决方案`WallpaperService`并想出了这个：

```
void drawFrame() {
final SurfaceHolder holder = getSurfaceHolder();

Canvas c = null;
try {
c = holder.lockCanvas();
if (c != null) {
xPosition += xAcceleration;
yPosition += yAcceleration;

background = BitmapFactory.decodeResource(getResources(),R.drawable.bg);
drawable = BitmapFactory.decodeResource(getResources(),R.drawable.ball);

c.drawBitmap(background, 0,0, null);
c.drawBitmap(drawable, xPosition,yPosition, null);
}
} catch (Exception ex){
}
holder.unlockCanvasAndPost(c);
drawFrame();
} 
```

所以我正在做的是：

1.  得到`Canvas`。
2.  画上`Canvas`。
3.  解锁`Canvas`并重新开始。

据我了解，这应该给我`invalidate();`类似的行为，但它会尝试显示壁纸，然后它给我 StackOverflowError。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-08T16:28:12.867

好的，我已经解决了这个问题。我所要做的就是将位图初始化移动到`onCreate()`方法中。

# node.js - Mongoose.js v3 中的版本控制

> ID：12298077
> 
> 赞同：1
> 
> 时间：2012-09-06T10:31:11.737
> 
> 标签：node.js, mongodb, mongoose

我知道 Mongoose 中的版本控制主要是为了避免子文档数组的问题。但是，是否也可以利用该功能来避免文档更新冲突？即两个用户同时更新同一个文档。

理想情况下，我想做的是这样的：

1.  使用 find() 检索文档，检查版本是否与预期版本匹配（由客户端在 If-Match 标头中发送）。
2.  如果是这样，请继续更新文档。
3.  在 save() 上，如果版本自 (1) 以来已更改，则失败。

如果我将 setTimeout() 放在 1 和 2 之间，然后直接在 3 之前手动更新**__v**，保存仍然成功。我认为这是因为 Mongoose 认为在这种情况下没有必要在更新中包含版本子句。

我还尝试在 save( **) 之前调用 increment( )。**我认为这会在保存操作期间增加版本，但是似乎它正在增加版本，然后在保存时抱怨它与数据库中的内容不匹配（显然不会）。

我最好使用中间件自己实现版本控制吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-17T06:44:20.257

您可能还想查看 MongoDB 的内部 findAndModify 命令。

[http://www.mongodb.org/display/DOCS/Atomic+Operations#AtomicOperations-FindandModify%28orRemove%29](http://www.mongodb.org/display/DOCS/Atomic+Operations#AtomicOperations-FindandModify%28orRemove%29)

它旨在执行您列出的过程

# jquery - 将所有 td 放入变量中

> ID：12298079
> 
> 赞同：1
> 
> 时间：2012-09-06T10:31:27.430
> 
> 标签：jquery

我如何获得下表变量中的所有第一个 td

```
<table cellpadding="0" cellspacing="0" border="0" width="100%" class="myTable">
         <tr >
        <td>785.1 </td>
        <td>do not pick me</td>
      </tr>
      <tr >
        <td>427.31</td>
        <td>do not pick me</td>
      </tr>
      <tr >
        <td>780.2</td>
        <td>do not pick me</td>
      </tr>
      <tr>
</table> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-06T10:32:33.530

你的意思是这样的吗？

```
var tds = $(".myTable td:first-child"); 
```

**演示：http:** [//jsfiddle.net/S2N5n/](http://jsfiddle.net/S2N5n/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-06T10:34:13.040

你可以这样做

```
var Firsttds = $(".myTable tr td:first-child");
alert(Firsttds.length)​;​ 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-06T10:52:35.900

您可以为您给出的表格选择第一个，如下所示，

```
 var firstTDS    =   $(".myTable tr td:first-child"); 
```

这是每个 first 的列表，您可以通过遍历 firstTDS 来处理它们。例如，要更改每个第一个的背景颜色，您可以这样做，

```
 for(var i in firstTDS)
   {
     $(firstTDS[i]).css('background-color','red');
   } 
```

而已 。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-06T10:33:26.253

您的意思是表中每个 TR 元素的第一个 TD 元素？

```
var fields = $("#myTable>tr>td:first-child"); 
```

# java - Java - 使用 Apache Http 客户端发布 GZIP 文件

> ID：12298087
> 
> 赞同：2
> 
> 时间：2012-09-06T10:31:53.970
> 
> 标签：java, servlets, httpclient

我需要将 tar.gzip 文件从一个 java 应用程序（通过 Servlet）发送到另一个 - 我使用 HTTP 客户端和 MultipartEntity 来实现这一点。

在文件传输过程中，文件的大小似乎翻了一番——好像它正在被解压缩——并且它不再被识别为 tar.gz 或 tar 文件。

下面是发送方法：

```
 HttpClient http = new DefaultHttpClient();
    HttpPost post = new HttpPost(url);

    MultipartEntity multipart = new MultipartEntity();
    ContentBody fileContent = new FileBody(file, "application/octet-stream");
    ContentBody pathContent = new StringBody(file.getAbsolutePath());

    multipart.addPart("package", fileContent);
    multipart.addPart("path", pathContent);

    post.setEntity(multipart);
    HttpResponse response = null;

    try {
        response = http.execute(post);
        StringWriter sw = new StringWriter();
        IOUtils.copy(response.getEntity().getContent(), sw);
    } catch (Exception ex){
        log.error("Unable to POST to ["+url+"].",ex);
    }

    return result; 
```

这是上面代码发布到的 servlet 方法：

```
@Override
protected void doPost(HttpServletRequest req, HttpServletResponse resp) throws ServletException, IOException {
    log.info("File transfer request received, collecting file information and saving to server.");
    Part filePart = req.getPart("package");
    Part filePathPart = req.getPart("path");

    StringWriter sw = new StringWriter();
    IOUtils.copy(filePathPart.getInputStream(), sw);
    String path = sw.getBuffer().toString();

    File outputFile = new File(path);

    FileWriter out = new FileWriter(outputFile);
    IOUtils.copy(filePart.getInputStream(), out);

    log.info("File ["+path+"] has been saved to the server.");

    out.close();
    sw.close();
} 
```

我不是这方面的专家 - 谷歌似乎没有太多帮助......任何帮助都会很棒。

谢谢，皮特

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-07T14:18:44.607

您的具体问题是因为您使用`FileWriter`而不是在`FileOutputStream`这里将传入的字节转换为字符：

```
FileWriter out = new FileWriter(outputFile); 
```

ZIP 文件是二进制文件，由特定的字节序列表示，而不是文本、HTML、XML 等字符文件。通过这种方式将字节转换为字符，您只会破坏原始二进制内容，从而导致文件不是可识别为 ZIP 文件了。你最终得到一个损坏的文件。

如果您`FileOutputStream`改用，那么您的问题将得到解决。完全没有必要用 Commons FileUpload 替换这一切。

### 也可以看看：

*   [如何使用 JSP/Servlet 将文件上传到服务器？](https://stackoverflow.com/questions/2422468/how-to-upload-files-to-server-using-jsp-servlet/2424824#2424824)

* * *

**与具体问题无关**，出于安全原因，在服务器端重用客户端特定的绝对路径并不是一个好主意，但你迟早会发现这一点。而是最多重用文件名，最好结合`File#createTempFile()`自动生成唯一的文件名后缀。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-07T11:04:19.913

我通过使用[Apache commons File Upload](http://commons.apache.org/fileupload/)完成了这项工作：

发送代码：

```
 HttpClient http = new DefaultHttpClient();
    HttpPost post = new HttpPost(url);

    post.addHeader("path", file.getAbsolutePath());       
    MultipartEntity multipart = new MultipartEntity();
    ContentBody fileContent = new FileBody(file); //For tar.gz: "application/x-gzip"
    multipart.addPart("package", fileContent);

    post.setEntity(multipart); 
```

接收代码：

```
@Override
protected void doPost(HttpServletRequest req, HttpServletResponse resp) throws ServletException, IOException {
    log.info("File transfer request received, collecting file information and saving to server.");

    FileItemFactory factory = new DiskFileItemFactory();
    ServletFileUpload upload = new ServletFileUpload(factory);

    try {
        List fileItems = upload.parseRequest(req);
        Iterator iterator = fileItems.iterator();
        if (iterator.hasNext()){
            FileItem fileItem = (FileItem) iterator.next();
            File file = new File(req.getHeader("path"));
            fileItem.write(file);
            log.info("File ["+fileItem.getName()+"] has been saved to the server.");
        }
    } catch (Exception ex) {
        log.error("Unable to retrieve or write file set...",ex);
    }
} 
```

# php - 当 $url 参数包含 :port 时 PHP5 HTTPRequest2 (PEAR) 失败

> ID：12298091
> 
> 赞同：0
> 
> 时间：2012-09-06T10:32:03.873
> 
> 标签：php, httprequest, pear

我对 HTTP_Request2 对象有疑问：当我向不在默认 (80) TCP 端口上提供服务的服务器发出请求时，HTTPRequest2 库会启动以下异常：

```
"Unable to connect to tcp://xxx.xxx.xxx.xxx:8080" 
```

我试图用谷歌搜索 HTTPRequest2 库的使用情况，但到目前为止我还没有找到任何“非 80 端口”场景。

PS 如果配置正确，同一台服务器可以在端口 80 上与此 PEAR 库一起正常工作。

# android - 如何在服务中获取当前焦点视图对象？

> ID：12298093
> 
> 赞同：6
> 
> 时间：2012-09-06T10:32:03.410
> 
> 标签：android, service, focus

如何在我的服务中获取当前焦点视图。

我找到了一些方法来做到这一点，比如 Activity.getCurrentFocus() 和 Windows.getCurrentFocus()。但是这些方法是在一个Activity中使用的。

如果我想使用这些，我必须得到当前的焦点活动。我尝试使用 WindowManager 来获取当前任务。它只能通过这种方式获得当前Activity的类名。不是活动对象。

```
 List<RunningAppProcessInfo> rList =activityManager.getRunningAppProcesses();
            RunningTaskInfo rt = rtList.get(0);
      rt.topActivity.getClassName(); // the class name of the current Activity 
```

如何使用这些方法获取服务中的当前焦点视图？或者还有其他方法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-04-07T14:35:42.770

服务是一项后台工作，因此不依赖于任何 UI。您可以做的是将您的服务绑定到一个 Activity 并在此 Activity 上调用某些方法（通过接口）以返回此 Activity 的焦点视图。

无论如何，你能更好地解释你想要达到的目标吗？通常，服务不适用于使用 UI 做事，所以也许有更好的方法来做你想做的事。

# perl - Perl：Windows 程序中的 Perl 单行器

> ID：12298103
> 
> 赞同：-1
> 
> 时间：2012-09-06T10:32:44.163
> 
> 标签：perl

我的以下 perl 单行程序抛出错误“在连接 (.) 或字符串中使用未初始化的值 $1”

```
`perl -pi.bak -e "if(!/#/){s/ PERFORM ([\\w*-]+)\.?/qq(#  PERFORM $1.\n) . q($hash{$1})/eg;}" TestFinal.txt`; 
```

提前致谢， Faez

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-06T11:11:57.313

你的单行：

```
perl -pi.bak -e "if (!/#/) { 
    s/ PERFORM ([\\w*-]+\.?/   # HERE
        qq(#  PERFORM $1.\n) . q($hash{$1})/eg;}" TestFinal.txt 
```

有以下错误：

*   您缺少标有 HERE 的右括号。
*   `%hash`在这个单行中的任何地方都没有定义。
*   `q($hash{$1})`不会对变量进行插值。`qq()`但是，会的。

你可能会考虑：

*   `/#/`将触发`#`行中的任何位置，您可能会考虑`/^\s*#/`进行更精确的匹配。
*   使用警告：`-we`
*   `\\w`在字符类中表示“反斜杠或 w”，而不是`\w`（字母数字）。

# java - 在创建 PDF 时减少 Java 堆空间消耗

> ID：12298104
> 
> 赞同：4
> 
> 时间：2012-09-06T10:32:45.857
> 
> 标签：java, memory, memory-leaks, itext

我遇到了 iText 的问题。

我正在创建包含大量图像的 PDF，因此 Java 堆空间很容易耗尽。

尝试使用 Eclipse Memory Analyzer 分析 dmp，发现每个图像使用大约 10MB 的堆空间。但他们在 HD 上只有大约 350KB

是否有机会将堆刷新到 HD 并继续创建？

还有其他常见的泄漏吗？

不幸的是，我还没有发现任何有用的东西。

![堆](../Images/02472832e78241d53f343a1ebd2fb4fc.png)

这就是一张图片的堆的样子

一般来说，我认为添加的元素保留在缓存中......我怎样才能把它们拿出来？

[这样](https://stackoverflow.com/a/955769/1300626)的事情可能吗？

**那是我当时使用的代码：**

```
Document document = new Document();
PdfWriter writer = null;
        try {
            writer = PdfWriter.getInstance(document, new FileOutputStream(this.savePath));
        } catch (FileNotFoundException e) {
            e.printStackTrace();
        } catch (DocumentException e) {
            e.printStackTrace();
        }

document.open();

Paragraph pdfTitle = new Paragraph();
pdfTitle.add(new Phrase("Title"));

try {
    document.add(pdfTitle);
    document.add(Chunk.NEWLINE);

} catch (DocumentException e) {
    e.printStackTrace();
}

for(int x = 0; x < 10; x++){
    //chapter
    Paragraph chapterName = new Paragraph("Chapter "+x, FONT[1]);
    ChapterAutoNumber chapter = new ChapterAutoNumber(chapterName);

    try {
    document.add(chapterhapter);
    } catch (DocumentException e) {
        e.printStackTrace();
    }

    for(int y = 0; y < 10; y++){
        //sec
        Paragraph sectionName = new Paragraph("Section "+y, FONT[2]);

        Section section  = chapter.addSection(sectionName);

        for(int z = 0; z < 10; z++){
            //subSec
            Section subSection = null;

            Image image = null;
            try {
            image = Image.getInstance(path);
            } catch (BadElementException e) {
                e.printStackTrace();
            } catch (MalformedURLException e) {
                e.printStackTrace();
            } catch (IOException e) {
                e.printStackTrace();
            }

            image.scalePercent(50);

            image.setCompressionLevel(9);
            Paragraph subDesc = new Paragraph("Desc "+z, FONT[3]);

            subSection = section.addSection(subDesc);

            picSection.add(image);

            try {
                document.add(subSection);
            } catch (DocumentException e) {
                e.printStackTrace();
            }

        }

    }

}

document.close(); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-10T11:45:33.860

我是 iText 的原始开发人员，我对你的问题投了反对票，因为你的代码全错了。

例如：您创建了一个章节对象，但您从未将它添加到文档中。相反，您要添加一个未在任何地方定义的 picSection 对象。

然而，我的主要批评是，您使用的是实现 LargeElement 接口的 ChapterAutoNumber 对象，并抱怨内存使用。这就像在说：*每天我吃一罐蛋黄酱，我都在想：我怎么这么胖？*

你为什么使用章节/章节？如果书签是选择这些对象的主要原因，如果你想减少使用的内存，你应该切换到使用 PdfOutline。因为现在，您通过将它们添加到 Chapter 对象来构建大量对象，而这些对象只能在您将章节添加到文档时释放。在此之前，进行垃圾收集是没有用的，因为垃圾收集器无法丢弃存储在 Chapter 对象中的内容。

如果你沉迷于使用 Chapter 类，可以看看 setComplete() 方法，定期将章节的一小部分添加到文档中，这样对象就可以一点一点的释放出来。第一种方法（不使用 Chapter 类）比第二种方法好得多。

如果我看到更多这样的问题，我可能会决定从 iText 中删除 Chapter/Section 类。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-06T10:39:11.463

这里有一些有用的答案：[Java heap space out of memory](https://stackoverflow.com/questions/6748432/java-heap-space-out-of-memory)

尝试将图像附加到 PDF 后将其设置为空？

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-07T06:36:50.253

我的第一个猜测是搜索 iText 文档以获取某种流媒体支持。有没有办法不将正在创建的整个 PDF 存储在内存中？实时调频。

第二种选择当然是增加应用程序的堆大小，如果你有合适的硬件的话。

而且，以防万一，我应该提到内存泄漏的可能性。尽管在您的情况下似乎不太可能，但如果您需要，可以[使用 Plumbr :)](http://plumbr.eu)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-10T08:02:44.273

100kB 的图像占用这么多内存的原因可能是因为它在磁盘上被压缩而在内存中未压缩（原始）。

Java 应该进行垃圾收集并且能够使用它，除非您同时使用太多并且内存不足。

这个问题涉及清理使用的内存；[Java 堆溢出，强制垃圾回收](https://stackoverflow.com/questions/2429623/java-heap-overflow-forcing-garbage-collection)

有时重用对象会减轻内存使用量。你能重新使用最后一个 PDF/Image 对象并将下一个加载到其中吗？意思而不是创建一个新对象？

# .net - 在 winform 中验证控件（使用 Devexpress）

> ID：12298108
> 
> 赞同：1
> 
> 时间：2012-09-06T10:32:56.560
> 
> 标签：.net, winforms, validation, devexpress

我在 .NET 和 DevExpress 3rd Party Components 中使用 WinForms。如何验证一个表单中多个组件的数据并以自定义的方式对其进行汇总？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-06T10:35:57.057

试试这个代码：

```
using DevExpress.XtraEditors.DXErrorProvider;

// ...
ConditionValidationRule containsValidationRule = new ConditionValidationRule();
containsValidationRule.ConditionOperator = ConditionOperator.Contains;
containsValidationRule.Value1 = '@';
containsValidationRule.ErrorText = "Please enter a valid email";
containsValidationRule.ErrorType = ErrorType.Warning;

CompareAgainstControlValidationRule compValidationRule = 
    new CompareAgainstControlValidationRule();
compValidationRule.Control = notEmptyTextEdit;
compValidationRule.CompareControlOperator = CompareControlOperator.Equals;
compValidationRule.ErrorText = "Please enter a value that equals to the first editor's value";
compValidationRule.CaseSensitive = true;

CustomValidationRule customValidationRule = new CustomValidationRule();
customValidationRule.ErrorText = "Please enter a valid person name";
customValidationRule.ErrorType = ErrorType.Warning;

dxValidationProvider1.SetValidationRule(containsTextEdit, containsValidationRule);
dxValidationProvider1.SetValidationRule(compareTextEdit, compValidationRule);
dxValidationProvider1.SetValidationRule(customTextEdit, customValidationRule);

// Represents a custom validation rule.
public class CustomValidationRule : ValidationRule {
    public override bool Validate(Control control, object value) {
        string str = (string)value;
        string[] values = new string[] { "Dr.", "Mr.", "Mrs.", "Miss", "Ms." };
        bool res = false;
        foreach(string val in values) {
            if(ValidationHelper.Validate(str, ConditionOperator.BeginsWith, 
                val, null, null, false)) {
                string name = str.Substring(val.Length);
                if(name.Trim().Length > 0) res = true;
            }
        }
        return res;
    }
} 
```

来源：[http ://documentation.devexpress.com/#WindowsForms/CustomDocument9481](http://documentation.devexpress.com/#WindowsForms/CustomDocument9481)

# c# - 有人可以解释这种通用语法吗？

> ID：12298112
> 
> 赞同：2
> 
> 时间：2012-09-06T10:33:01.130
> 
> 标签：c#, generics, delegates, action

我对此做了一些谷歌，但没有找到任何解释语法的东西。

因此，我正在使用`Action<T>`生产者消费者`Action<T>`执行消费者操作的位置。我右键单击`Action<T>`-“转到定义”以查看其定义，这就是我看到的

```
public delegate void Action<in T>(T obj); 
```

嗯...我使用泛型已经有一段时间了，从来没有使用过也没有见过`<in T>`

任何人都有一个很好的总结来解释语法及其产生的内容？

谢谢。D

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-06T10:36:08.507

C# 4.0 中引入了泛型类型的[`in`](http://msdn.microsoft.com/en-us/library/dd469484)and[`out`](http://msdn.microsoft.com/en-us/library/dd469487.aspx)变化修饰符，以允许泛型类型的 co 和 contra 变化。

> 对于泛型类型参数，**in**关键字指定类型参数是**逆变**的。
> 
> 对于泛型类型参数，**out**关键字指定类型参数是**covariant**。

* * *

并来自MSDN 上[的通用接口（C# 和 Visual Basic）的差异](http://msdn.microsoft.com/en-us/library/dd233059)：

> 协变允许方法具有比接口的泛型类型参数定义的更派生的返回类型。
> 
> 逆变允许方法具有比接口的泛型参数指定的参数类型更少派生的参数类型。

# excel - 创建具有不同 X 值的折线图

> ID：12298114
> 
> 赞同：2
> 
> 时间：2012-09-06T10:33:10.490
> 
> 标签：excel, graph, charts

我有一定数量的测量值。每个格式如下：

```
Table A:  
|  Time [s] | Value |
|   0.5     |   2.0 |
|  50.3     |  33.7 |
| 100.0     |  25.5 |

Table B:
|  Time [s] | Value |
|   1.3     |  12.7 |
|  27.8     |  25.0 |
|  97.5     |  20.0 |
| 100.0     |   7.1 |

Table C:
... 
```

时间始终相同，从 0.0 秒到 100.0 秒。在示例中看到的测量点不同。

我现在想在一张图表中显示不同的测量值。每个表都有自己的折线图。X 轴将显示时间。

在 Excel 中是否有可能发生这样的事情？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-06T10:50:38.973

通过使用散点图而不是折线图解决了我的问题...