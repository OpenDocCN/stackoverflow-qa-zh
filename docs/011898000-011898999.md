# StackOverflow 问答 11898000-11898999

# sql - SQL - 存在比较

> ID：11898003
> 
> 赞同：1
> 
> 时间：2012-08-10T08:30:43.627
> 
> 标签：sql, db2, exists

我需要为一个国家选择一个经过处理的行并且同一国家存在一个未处理的行。对于下表，我将返回带有`id = 1`.

所以首先我需要检查是否有一行有`TREATED`状态，然后我必须检查是否有一行有`UNTREATED`状态并且与状态相同的国家`TREATED`。

```
 Table example 1
    +----+--------+--------------+
    | id | country| status       |
    +----+--------+--------------+
    | 1  | SE     | TREATED      |
    | 2  | DK     | UNTREATED    |
    | 3  | SE     | UNTREATED    |
    +----+--------+--------------+

    Result of query
    +----+--------+--------------+
    | id | country| status       |
    +----+--------+--------------+
    | 1  | SE     | TREATED      |
    +----+--------+--------------+ 
```

如果不存在未处理的行或国家/地区不同，则我们不应返回任何内容

```
 Table example 2
    +----+--------+--------------+
    | id | country| status       |
    +----+--------+--------------+
    | 1  | SE     | TREATED      |
    | 2  | DK     | UNTREATED    |
    | 3  | US     | UNTREATED    |
    +----+--------+--------------+

    Result of query (empty)
    +----+--------+--------------+
    | id | country| status       |
    +----+--------+--------------+ 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-10T09:18:40.953

以下是其他几个选项：

```
select t1.id,t1.country,t1.status
    from table t1
    join table t2 on t1.country=t2.country and t2.status='UNTREATED'
    where t1.status='TREATED'

 select id,country,status
            from table t1
            where 
                 t1.status='TREATED' and
                 exists (
                      select 1 from table t2 where 
                           t2.country = t1.country and 
                           t2.status = 'UNTREATED'
                 ) 
```

我相信第一个使用连接可能会表现最好。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-10T08:33:34.500

```
Select country
from table
where status in ('treated', 'untreated') -- only needed if there are other statuses
group by country
having count(distinct status) = 2 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-10T08:35:23.347

```
SELECT country  FROM table
WHERE status IN ('treated', 'untreated')
GROUP BY country HAVING count(DISTINCT status)=2; 
```

语法可能因 sql 而异，不确定`db2`.

# ajax - 带有 AJAX 的 Javascript

> ID：11898007
> 
> 赞同：0
> 
> 时间：2012-08-10T08:30:57.793
> 
> 标签：ajax

我正在使用 ajax 将 javascript 中的变量传递给 PHP 操作。但这根本不起作用。

```
function approve(id) {
    var idemail = id;
    $.ajax({
        url: 'http://localhost/feedback/public/index/approve/',
        type: 'POST',
        data: "idemail=" + idemail,
        success: function(data) {
            alert('Approved successfully')
        }
    }) 
```

在 PHP 动作中

```
public function approveAction() {
    $approvemail = $_POST['idemail'];
    echo $approvemail;
} 
```

但是没有成功响应，也没有回显电子邮件。请帮助我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-10T14:30:37.580

你的ajax请求是正确的。您正在调用的 url 似乎不理解 ajax 调用。您能否检查您的应用程序模块是否以不同的方式处理普通和 ajax url。也许您可以尝试调用简单的测试 url`http://localhost/test.php`并检查它是否有效。

# javascript - iOS 4 在 touchstart 上的 event.layerX 和 event.layerY 问题

> ID：11898009
> 
> 赞同：0
> 
> 时间：2012-08-10T08:31:11.857
> 
> 标签：javascript, jquery, cordova, ios4

这段代码：

```
$(doc).on('touchstart touchend', function(ev){
    var or = ev.originalEvent;
    console.log('y: '+or.layerY+' x '+or.layerX);
}); 
```

正在显示我在 iOS 5 中点击的位置的坐标，但在 iOS 4 中，两个坐标都为 0。`doc`是一个包含`contentDocument`iframe 的变量，我使用的是 jQuery 1.7.1。任何想法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-14T07:08:19.737

我最终使用了属性`ev.originalEvent.touches[0].pageX`和`ev.originalEvent.touches[0].pageY`. 不知道为什么`layerX`并且`layerY`不能正常工作，但其他的似乎成功了

# iphone - 增强现实中的 Iphone 标记检测

> ID：11898011
> 
> 赞同：3
> 
> 时间：2012-08-10T08:31:17.653
> 
> 标签：iphone, xcode, augmented-reality, marker

（抱歉英语不好）

大家好，

我对标记检测的架构很好奇，所以我开始用谷歌搜索它。我想要一个 iphone 应用程序（即 xcode 项目），当然还有源代码，关于 AR 中的标记检测。我想要代码，因为我试图在我的 iphone 中执行应用程序，然后我会挖掘代码以了解架构。我在 2 天内一直在搜索这个问题。我找到了一些例子，但他们中的大多数人都对 AR 感兴趣，而不是专门对标记检测感兴趣。顺便说一句，我的一些研究结果是段落的底部。在标记检测中发现 1 或 2 个应用程序，但在应用程序中没有标记，所以我没有尝试。我搜索了github和codes.google。我也在这里搜索，但我没有成功。总而言之，我需要帮助:) 你能帮帮我吗？

谢谢

工具包：ARToolkit NyARToolkit flARToolkit Wikiitude 等。

网页： [http ://www.raywenderlich.com/3997/introduction-to-augmented-reality-on-the-iphone](http://www.raywenderlich.com/3997/introduction-to-augmented-reality-on-the-iphone)

[http://www.morethantechnical.com/2009/07/01/augmented-reality-on-the-iphone-using-nyartoolkit-w-code/](http://www.morethantechnical.com/2009/07/01/augmented-reality-on-the-iphone-using-nyartoolkit-w-code/)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-12T08:07:56.240

查看 Arkit 演示和 Mixare，

[https://github.com/mixare/mixare-iphone](https://github.com/mixare/mixare-iphone)

[https://github.com/zac/iphonearkit/](https://github.com/zac/iphonearkit/)

在 Mixare,AugmentedRealityViewController.你会找到一个方法

*   (void)updateLocations:

您会发现如何检测标记并将其放置在 iPhone 屏幕上。ARKit 中的方法名称也相同。

# knockout.js - 在一页中创建多个淘汰赛网格

> ID：11898012
> 
> 赞同：1
> 
> 时间：2012-08-10T08:31:31.523
> 
> 标签：knockout.js, knockout-2.0

我想在单个页面上使用 KnockOut 框架创建多个表。

例如，在我的页面上，我可能需要显示四个用不同的 .knout 绑定的表`ViewModel`。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-10T12:14:44.783

如果您想在页面中放置多个不同的视图模型，我建议您创建一个额外的视图模型，将视图模型保存在可观察对象中。这样，您只需要应用一次绑定，就可以在需要绑定到不同视图模型的页面元素上使用**with:**绑定，而无需多次绑定到 DOM 中的同一节点的风险。

这是 jsFiddle 的一个简单示例：http: [//jsfiddle.net/2DD5J/](http://jsfiddle.net/2DD5J/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-27T13:02:24.587

您可以通过使用 DIV id 添加多个视图模型来实现此目的：

```
<script type="text/javascript">

    $(document).ready(function () {
        ko.applyBindings(new PagedGridModel(initialData), $("#liveExample")[0]);
        ko.applyBindings(
        ko.applyBindings(new PagedGridModel1(initialData), $("#liveExample1")[0]);
    });

    var initialData = [
                { name: "Well-Travelled Kitten", sales: 352, price: 75.95 },
                { name: "Speedy Coyote", sales: 89, price: 190.00 },
                { name: "Furious Lizard", sales: 152, price: 25.00 },
                { name: "Indifferent Monkey", sales: 1, price: 99.95 },
                { name: "Brooding Dragon", sales: 0, price: 6350 },
                { name: "Ingenious Tadpole", sales: 39450, price: 0.35 },
                { name: "Optimistic Snail", sales: 420, price: 1.50 }
            ];

    var PagedGridModel = function (items) {

        this.items = ko.observableArray(items);

        this.addItem = function () {
        this.items.push({ name: "New item", sales: 0, price: 100 });
        };

        this.sortByName = function () {
            this.items.sort(function (a, b) {
                return a.name < b.name ? -1 : 1;
            });
        };

        this.jumpToFirstPage = function () {
            this.gridViewModel.currentPageIndex(0);
        };

        this.gridViewModel = new ko.simpleGrid.viewModel({
            data: this.items,
            columns: [
        { headerText: "Item Name", rowText: "name" },
        { headerText: "Sales Count", rowText: "sales" },
        { headerText: "Price", rowText: function (item) { return "$" + item.price.toFixed(2) } }
    ],
            pageSize: 4
        });
    };

    var PagedGridModel1 = function (items) {

        this.items = ko.observableArray(items);

        this.addItem = function () {
            this.items.push({ name: "New item", sales: 0, price: 100 });
        };

        this.sortByName = function () {
            this.items.sort(function (a, b) {
                return a.name < b.name ? -1 : 1;
            });
        };

        this.jumpToFirstPage = function () {
            this.gridViewModel1.currentPageIndex(0);
        };

        this.gridViewModel1 = new ko.simpleGrid.viewModel({
            data: this.items,
            columns: [
        { headerText: "Item Name", rowText: "name" },
        { headerText: "Sales Count", rowText: "sales" },
        { headerText: "Price", rowText: function (item) { return "$" + item.price.toFixed(2) } }
    ],
            pageSize: 4
        });
    };
</script>

<div id='liveExample'>
    <div data-bind='simpleGrid: gridViewModel'>
    </div>
    <button data-bind='click: addItem'>
        Add item
    </button>
    <button data-bind='click: sortByName'>
        Sort by name
    </button>
    <button data-bind='click: jumpToFirstPage, enable: gridViewModel.currentPageIndex'>
        Jump to first page
    </button>
</div>
<div id='liveExample1'>
    <div data-bind='simpleGrid: gridViewModel1'>
    </div>
    <button data-bind='click: addItem'>
        Add item
    </button>
    <button data-bind='click: sortByName'>
        Sort by name
    </button>
    <button data-bind='click: jumpToFirstPage, enable: gridViewModel1.currentPageIndex'>
        Jump to first page
    </button>
</div> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-10T10:14:12.530

这可以根据您的需要通过不同的方法完成：

一个视图模型具有四个集合或四个视图模型每个具有一个集合。

这是第一个：

```
 function Item(name) {
            this.name = name;
        }

        function VM() {
            this.collection1 = ko.observableArray();
            this.collection2 = ko.observableArray();
            this.collection3 = ko.observableArray();

            var self = this;

            self.init = function () {
                var c1i1 = new Item("C1 I1");
                var c1i2 = new Item("C1 I1");

                self.collection1([c1i1, c1i2]);

                var c2i1 = new Item("C2 I1");
                var c2i2 = new Item("C2 I1");

                self.collection2([c2i1, c2i2]);

                var c3i1 = new Item("C3 I1");
                var c3i2 = new Item("C3 I1");

                self.collection3([c3i1, c3i2]);
            };

            self.init();
        }

ko.applyBindings(new VM(), document.getElementById('test'));

     <div id="test">
        <div data-bind="foreach:collection1">
            <div data-bind="text:name"></div>
        </div>
        <div data-bind="foreach:collection2">
            <div data-bind="text:name"></div>
        </div>
        <div data-bind="foreach:collection3">
            <div data-bind="text:name"></div>
        </div>
     </div> 
```

然而，如果你想使用四个不同的独立视图模型，你需要创建它们每个都有自己的集合，并通过 id 对它们应用敲除绑定，例如：

```
ko.applyBindings(new VM(), document.getElementById('ViewModel1Container')); 
```

[摆弄](http://jsfiddle.net/QARzK/)第一个例子。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-01-06T13:01:19.647

我在 jsFiddle 的一页上制作了多个淘汰网格的工作示例。[在这里](http://jsfiddle.net/curtisblackwell/Btyg7/1/)。

我确信它可以改进，但这是我现在所拥有的。

# HTML

```
<div id="as">
  <h1>As</h1>
  <div data-bind="foreach: as">
    <input name="a1" id="a1" data-bind="value: a1" /><br />
    <input name="a2" id="a2" data-bind="value: a2" /><br />

    <button data-bind="click: removeA">&times;</button><br />
  </div>

  <button data-bind="click: addA">&plus;</button>
</div>

<div id="bs">
  <h1>Bs</h1>
  <div data-bind="foreach: bs">
    <input name="b1" id="b1" data-bind="value: b1" /><br />
    <input name="b2" id="b2" data-bind="value: b2" /><br />

    <button data-bind="click: removeB">&times;</button><br />
  </div>

  <button data-bind="click: addB">&plus;</button>
</div> 
```

# JS

```
/* First Grid */
function A(a1, a2) {
  var self = this;

  self.a1 = a1;
  self.a2 = a2;
}

function AsVM() {
  var self = this;

  self.as = ko.observableArray([
    new A('', '')
  ]);

  self.addA = function() {
    self.as.push(new A('', ''));
  }
  self.removeA = function(a) {
    self.as.remove(a);
  }
}

/* Second Grid */
function B(b1, b2) {
  var self = this;

  self.b1 = b1;
  self.b2 = b2;
}

function BsVM() {
  var self = this;

  self.bs = ko.observableArray([
    new B('', '')
  ]);

  self.addB = function() {
    self.bs.push(new B('', ''));
  }
  self.removeB = function(b) {
    self.bs.remove(b);
  }
}

ko.applyBindings(AsVM, document.getElementById('as'));
ko.applyBindings(BsVM, document.getElementById('bs')); 
```

# vba - 用于更改列引用的 VLookup 宏

> ID：11898024
> 
> 赞同：1
> 
> 时间：2012-08-10T08:32:02.833
> 
> 标签：vba, excel

我想为 vlookup 创建宏，但在我的情况下，列引用会自动从 1 个条件更改为下一个条件。问题如下：

在一张 Excel 表中，我列出了所有公司和可用产品。

[http://wikisend.com/download/910578/product.jpg](http://wikisend.com/download/910578/product.jpg)

现在我为每家公司准备了一张表格。我想查找每家公司并将可用的产品放在特定的公司表中。新工作表将如下所示。

[http://wikisend.com/download/482612/single comp.png](http://wikisend.com/download/482612/single%20comp.png)

我不能只复制和插入列，因为在每个公司列中已经有产品名称。另外，我希望宏为所有公司执行此操作（每家公司都有一张单独的表格作为 X1）。

感谢您的帮助。

更新代码：

```
Sub UpProd()
    Dim ws As Worksheet
    Dim DataRange As Range, UpdateRange As Range, aCell As Range, bCell As Range
    Dim s As String
    Dim z As Variant
    s = "X1,X2,X3"
    z = VBA.Split(s, ",")
    On Error GoTo Err

    For Each i In z
        Set ws = Worksheets("Sheet5")
        Set UpdateRange = Worksheets(i).Range("A2:A21")
        Set DataRange = ws.Range("A2:A12")
        For Each aCell In UpdateRange
            Set bCell = DataRange.Find(What:=aCell, LookIn:=xlValues, _
                        LookAt:=xlWhole, SearchOrder:=xlByRows, SearchDirection:=xlNext, _
                        MatchCase:=False, SearchFormat:=False)

           If Not aCell Is Nothing Then
                aCell.Offset(, 1) = bCell.Offset(, 1)
            End If
        Next
    Next i
    Exit Sub
Err:
    MsgBox Err.Description
End Sub 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-10T10:52:21.683

很好的主动尝试和解决问题:)。你很亲近！实际上，您必须遍历所有工作表，然后使用 2 `.Finds`。一个用于公司名称，另一个用于产品。

请参阅此代码（**经过尝试和测试**）

请确保您花一点时间阅读我发表的评论。

```
Option Explicit

Sub Sample()
    Dim wsP As Worksheet, ws As Worksheet
    Dim lRow As Long, i As Long
    Dim aCell As Range, bCell As Range

    '~~> Replace below with the name of the sheet which has the products
    Set wsP = Sheets("Product")

    '~~> Loop through every sheet
    For Each ws In ThisWorkbook.Sheets
        '~~> Ensure that we ignore the product sheet
        If ws.Name <> wsP.Name Then
            With ws
                '~~> Get the last row of Col A in ws
                lRow = .Range("A" & .Rows.Count).End(xlUp).Row

                '~~> Check the rows in product sheet to find which column
                '~~> has the Company name I am assuming that the company
                '~~> names are in row 1 unlike row 2 in your screenshot
                '~~> If it is actually 2 then change Rows(1) to Rows(2)
                Set aCell = wsP.Rows(1).Find(What:=ws.Name, LookIn:=xlValues, _
                LookAt:=xlWhole, SearchOrder:=xlByRows, SearchDirection:=xlNext, _
                MatchCase:=False, SearchFormat:=False)

                '~~> Check if company name is found
                If Not aCell Is Nothing Then
                    For i = 2 To lRow

                        '~~> Check Column 1 to find the product
                        Set bCell = wsP.Columns(1).Find(What:=ws.Range("A" & i).Value, _
                        LookIn:=xlValues, LookAt:=xlWhole, SearchOrder:=xlByRows, _
                        SearchDirection:=xlNext, MatchCase:=False, SearchFormat:=False)

                        '~~> If found then pick up the value from the relevant column
                        If Not bCell Is Nothing Then _
                        ws.Range("B" & i).Value = wsP.Cells(bCell.Row, aCell.Column).Value

                    Next i
                Else
                    MsgBox "Company Name not found. Moving on to the next sheet"
                End If
            End With
        End If
    Next ws

    MsgBox "Done"
End Sub 
```

# java - 与货币符号相关的字符编码问题

> ID：11898029
> 
> 赞同：3
> 
> 时间：2012-08-10T08:32:22.053
> 
> 标签：java, spring, tomcat, encoding

我正在创建一个 Web 应用程序。我正在使用 linux（fedora 16）开发应用程序，使用的技术是 spring MVC。它是一个 maven 项目。当我在调试环境中运行应用程序时，应用程序工作正常并且它正确显示特殊字符.Eg我想正确显示货币符号磅（₤）。但是，如果我在 Windows 机器上的 tomcat 6.0.26 或 6.0.35 上部署应用程序，则它无法正确显示货币符号。Egit 将英镑符号显示为“Â£”。所以任何人都可以了解这个问题。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-10T08:49:34.050

在你的 tomcat 服务器的 catalina.sh (catalina.bat) 中添加这样的参数；

```
 set JAVA_OPTS=-Djavax.servlet.request.encoding=UTF-8 -Dfile.encoding=UTF-8 
```

并在 server.xml 中的连接器标记上设置**URIEncoding="UTF-8" 。**看到这个；

```
 <Connector port="8080" protocol="HTTP/1.1"
           connectionTimeout="20000"
           redirectPort="8443" URIEncoding="UTF-8"/> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-10T15:43:52.233

您想要的是使用[CharacterEncodingFilter](http://wiki.apache.org/tomcat/FAQ/CharacterEncoding#Q3)。我建议阅读链接指向的整个常见问题解答。

# javascript - 如果启用了 Javascript，则将提交按钮替换为 onclick 事件

> ID：11898031
> 
> 赞同：0
> 
> 时间：2012-08-10T08:32:35.433
> 
> 标签：javascript, button

秉承渐进式实施的理念，我的页面上有一个简单的页面刷新按钮。如果启用了 javascript，是否有一种优雅的方法可以将该按钮转换为 onclick="ajaxfunction()" 事件？

我想出的只有两个按钮，一个用 CSS 隐藏——这看起来有点笨拙。

请注意，我有 ajax 调用工作，等等 - 我只想让 $%@# 按钮切换......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-10T08:53:41.707

将事件侦听器附加到提交按钮，该按钮侦听`click`事件并取消事件。使用原型它会是这样的：

```
document.observe('dom:loaded', function(){
    $('mysubmitbuttonid').observe('click',function(event){
        new Ajax.Request(...);
        Event.stop(event);
        return false;
    });
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-10T08:54:28.560

假设你有`form`一个`button`类型`submit`：

```
<button id="sbut" type="submit" ...>OK</button> 
```

你可以这样做：

```
function chgButton () {
    var button = document.getElementById('sbut');
    button.type = 'button';
    button.addEventListener('click', ajaxfunction,false);
    return;
}

window.onload = function () {
    chgButton();
    return;
} 
```

# php - 阵列打印

> ID：11898032
> 
> 赞同：-3
> 
> 时间：2012-08-10T08:32:38.557
> 
> 标签：php, arrays, sum

> **可能重复：**
> [阵列打印](https://stackoverflow.com/questions/11896137/printing-of-array)

```
public function computeGHComponents()
{
    error_reporting (E_ALL^ E_NOTICE);          

    $total = null;

    $result=array();

    foreach ($this->transaction as $t){
        $amount = (float) $t['Amount'];

        if (isset($this->totals[ $t['SiteID'] ][ $t['TransactionType'] ])){
           $this->totals[ $t['SiteID'] ][ $t['TransactionType'] ] += (float) $amount;
        } else {
           $this->totals[ $t['SiteID'] ][ $t['TransactionType'] ] = (float) $amount;
        }
    }

    foreach($this->totals as $key => $value)
    {
        $result =            array_merge($result,array($key=>array("Deposit"=>$value['D'],"Redemption"=>$value['W'],"Reload"=>$value['R']))); 
    }

    print_r($result);   

} 
```

关键应该是 SiteID，我该怎么做？

我需要这种输出：

```
array ([147]=>array([Deposit] => "total amount", [Reload]=> "total amount" [Redemption]=> "total amount"))

array ([150]=>array([Deposit] => "total amount", [Reload]=> "total amount" [Redemption]=> "total amount"))

array ([3]=> array([Deposit] => "total amount", [Reload]=> "total amount" [Redemption]=> "total amount")) 
```

键应该是 SiteID。请修改代码:(

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-10T08:51:38.010

这是正常的，因为您使用的是 array_merge()，请查看文档： http: [//php.net/manual/en/function.array-merge.php](http://php.net/manual/en/function.array-merge.php)

> 带有数字键的输入数组中的值将使用从结果数组中的零开始的递增键重新编号。

因此，作为密钥的 SiteID 将被重新编号。

然后，为了保留您的密钥，最好这样做：

```
$result[$key] = array("Deposit"=>$value['D'], "Redemption"=>$value['W'], "Reload"=>$value['R']); 
```

# mysql - 从记分牌中查找玩家的排名

> ID：11898033
> 
> 赞同：1
> 
> 时间：2012-08-10T08:32:38.477
> 
> 标签：mysql

```
ID username score

4 |  x     | 7
7 |  y     | 3
9 |  z     | 6 
```

我想从 MySQL 中了解 y 在记分牌上的位置（即 3.）。我找不到真正的 MySQL 查询，你能帮帮我吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-10T08:34:23.693

```
SELECT * FROM
(SELECT @rank := @rank + 1 AS rank, id,username, score
FROM table , (SELECT @rank := 0) r
ORDER BY score
) k
WHERE k.username = 'y' 
```

# python - 如何将浮点数组格式化为字符串

> ID：11898034
> 
> 赞同：2
> 
> 时间：2012-08-10T08:32:40.260
> 
> 标签：python, format

我有一个非常简单的问题。我有一组花车

```
 a = array([0.01,0.1,10,100,1000]) 
```

我想打印这个数组，以便最终结果看起来像

```
 10$^-2$, 10$^-1$, .... 
```

用`%`命令可以吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-10T08:50:39.120

```
a = [0.01,0.1,10,100,1000]
for x in a:
     base,exp = "{0:.0e}".format(x).split('e')
     print "{0}0$^{1}$".format(base,exp) 
```

**输出：**

```
10$^-02$
10$^-01$
10$^+01$
10$^+02$
10$^+03$ 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-10T08:51:48.340

将数字转换为科学计数法字符串：

```
s = string.format("%.3e",0.001) 
```

然后用乳胶格式替换 e+ 或 e- ：

```
s.replace("e+","$^{")
s.replace("e-","$^{") 
```

然后附加乳胶结束括号：

```
s = s + "}$" 
```

应该输出：

```
"1.000$^{-3}$" 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-10T09:01:27.430

作为单线：

```
["10$^{}$".format(int(math.log10(num))) for num in a] 
```

或更清楚地说：

```
from math import *

def toLatex(powerOf10):
    exponent = int( log10(powerOf10) )
    return "10$^{}$".format(exponent)

nums = [10**-20, 0.01, 0.1, 1, 10, 100, 1000, 10**20]
[(x, toLatex(x)) for x in nums] 
```

```
[(1e-20, '10$^-20$'),
 (0.01, '10$^-2$'),
 (0.1, '10$^-1$'),
 (1, '10$^0$'),
 (10, '10$^1$'),
 (100, '10$^2$'),
 (1000, '10$^3$'),
 (100000000000000000000L, '10$^20$')] 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-10T08:39:02.967

试试这个：

```
for i in str(a):
    print i 
```

输出：

```
0.01
0.1
10.0
100.0
1000.0 
```

如果您更喜欢科学记数法：

```
for i in str(a):
    print '%.3e' % i 
```

输出：

```
1.000e-02
1.000e-01
1.000e+01
1.000e+02
1.000e+03 
```

'%.3e' 中的数字控制小数点右侧的位数。

编辑：如果您想在同一行打印所有内容，请在每个打印语句的末尾添加一个逗号“，”。

# authentication - 如何存储 google api (OAuth 2) 权限？

> ID：11898038
> 
> 赞同：7
> 
> 时间：2012-08-10T08:32:55.457
> 
> 标签：authentication, login, google-api, oauth-2.0

我正在使用“google-api-php-client”-Library (http://code.google.com/p/google-api-php-client/) 中提供的示例来实现我的用户登录和授权带有谷歌服务的网站。除了添加我的 Client-ID 等之外，我没有对示例进行任何更改。

授权本身工作正常：用户可以登录，我可以获取提供的信息。然而，当离开页面时，整个授权过程又被调用；用户不会被记住，需要再次授予权限，这对于我所知道的谷歌登录来说有点烦人且不典型。

例如：在 stackoverflow 上，我使用我的谷歌帐户登录。每当我重新访问此站点时，我都会自动登录，或者（如果已注销）只需再次登录 - 我不必再次确认一般权限。但是，使用我网站上的示例会强制用户在再次访问该网站时允许访问。

使用示例时，我犯了任何错误吗？我该怎么做才能避免一遍又一遍的权限请求？

提前感谢您的任何帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-07-03T14:20:55.993

这对我来说很好。根据考沙尔的回答：

```
<?php 
require_once 'globals.php';
require_once 'google-api-php-client/src/Google_Client.php';
require_once 'google-api-php-client/src/contrib/Google_DriveService.php';

$client = new Google_Client();

// Get your credentials from the APIs Console
$client->setClientId('YOUR_ID');
$client->setClientSecret('YOUR_SECRET');
$client->setRedirectUri('REDIRECT_URI');
$client->setScopes(array('https://www.googleapis.com/auth/drive'));

$service = new Google_DriveService($client);
$client->setUseObjects(true);

//if no token in the session
if ($_SESSION['google_token'] == '') {
    //get stored token from DB
    $sToken = $oDb->getOne("SELECT `google_token` FROM `users` WHERE `u_id` = " . (int)$_SESSION['user_id']);
     //if no stored token in DB
    if ($sToken == '') {
        //autentificate user
        $client->authenticate();
        //get new token
        $token = $client->getAccessToken();
        //set token in session
        $_SESSION['google_token'] = $token;
        // set token in DB
        $oDb->Query("UPDATE `users` SET `google_token`='$token' WHERE `u_id` = " . (int)$_SESSION['user_id']);
    } else {
       $_SESSION['google_token'] = $sToken;
    }
}
$client->setAccessToken($_SESSION['google_token']);

//do what you wanna do with clients drive here
?> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-06-14T08:03:48.607

首次使用此代码检索 access_code 并将其保存到数据库：

```
<?php
    require 'google-api-php-client/src/Google_Client.php';
    require 'google-api-php-client/src/contrib/Google_DriveService.php';
    require 'google-api-php-client/src/contrib/Google_Oauth2Service.php';
    session_start();

    $client = new Google_Client();
    $client->setClientId(CLIENT_ID);
    $client->setClientSecret(CLIENT_SECRET);
    $client->setRedirectUri(REDIRECT_URI);
    $client->setScopes(array(
      'https://www.googleapis.com/auth/drive',
      'https://www.googleapis.com/auth/userinfo.email',
      'https://www.googleapis.com/auth/userinfo.profile'));

    $client->setUseObjects(true);
    $service = new Google_DriveService($client);
          $client->authenticate();
          $_SESSION['token'] = $client->getAccessToken();
          const ACCESS_TOKEN=$_SESSION['token'];
              //code here to save in database
   ?> 
```

一旦 ACCESS_TOKEN 保存在数据库中，将代码更改为：

```
<?php
        require 'google-api-php-client/src/Google_Client.php';
        require 'google-api-php-client/src/contrib/Google_DriveService.php';
        require 'google-api-php-client/src/contrib/Google_Oauth2Service.php';
    session_start();

        $client = new Google_Client();
        $client->setClientId(CLIENT_ID);
        $client->setClientSecret(CLIENT_SECRET);
        $client->setRedirectUri(REDIRECT_URI);
        $client->setScopes(array(
          'https://www.googleapis.com/auth/drive',
          'https://www.googleapis.com/auth/userinfo.email',
          'https://www.googleapis.com/auth/userinfo.profile'));

        $client->setUseObjects(true);
        $service = new Google_DriveService($client);

    //ACCESS_TOKEN is already saved in database, is being saved on first time login.

        $_SESSION['access_token'] = ACCESS_TOKEN;

        if (isset($_SESSION['access_token'])) {
          $client->setAccessToken($_SESSION['access_token']);
        }

        if ($client->getAccessToken()) 
        {
           $userinfo = $service->about->get();
           echo '<script>console.log('.json_encode($userinfo).');</script>';

           $userinfoService = new Google_OAuth2Service($client);
           $user = $userinfoService->userinfo->get();
           echo '<script>console.log('.json_encode($user).');</script>';
        } 
    ?> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-10T16:32:29.487

Google Drive SDK 文档包含一个完整的 PHP 示例应用程序，您可以将其用作入门参考：

[https://developers.google.com/drive/examples/php](https://developers.google.com/drive/examples/php)

基本上，一旦用户登录并且您检索访问令牌和刷新令牌，您将这些凭据存储在数据库中并重复使用它们，而不是每次都要求用户进行身份验证。

# php - 在编码中获得“youâ€™ll”而不是“you're”？

> ID：11898047
> 
> 赞同：1
> 
> 时间：2012-08-10T08:33:39.300
> 
> 标签：php, encoding

我使用 PHP Simple DOM 来获取 URL。当我将 urls 内容打印到屏幕上时，我得到：

```
youâ€™ll 
```

代替：

```
you'll 
```

如果我跑

```
$str = utf8_decode('youâ€™ll');
echo $str; 
```

我得到：

```
you?ll 
```

我显然不了解编码的基础知识。你能告诉我我错过了什么吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-10T08:42:28.863

在执行任何操作之前尝试将编码设置为 UTF-8。用这个启动你的 php 文件：

```
<?php
   header('Content-Type: text/html; charset=UTF-8');
   mb_internal_encoding('UTF-8');
?> 
```

并尝试在没有 utf8_decode 的情况下回显/打印它。

注意：如果您使用的是 mysql (postgesql)，也请使用它：

```
<?php 
   mysql_query("SET CHARACTER SET UTF8");
   mysql_query("SET NAMES UTF8");
?> 
```

编辑：另外，确保以 UTF-8（无 BOM）格式保存 PHP 文件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-10T08:39:51.827

您需要将要输出的文档声明为 UTF-8（假设它实际上*是*UTF-8），以便浏览器知道会发生什么。您*可以*转换编码，但如果您所做的只是在浏览器中显示它，最好将内容保持原样。

在输出任何内容之前将此行添加到您的 PHP 中：

```
header('Content-Type: text/html; charset=utf-8'); 
```

...并将此元标记添加为您**的第一**个子元素`<head>`：

```
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" /> 
```

# python - 退出 python 脚本时在 bash 中创建别名

> ID：11898049
> 
> 赞同：0
> 
> 时间：2012-08-10T08:33:51.080
> 
> 标签：python, bash, alias

我在 python 中编写了一个 shell（使用 cmd 模块），当使用这个 shell 时，有关命令的某些信息会运行等。被输出到一个文本文件。我想编写一段代码来创建一个别名来查看我的 bash shell 中的文本文件（例如，就好像我已经执行了以下命令： `alias latest.trc='less <path to file>` 我目前最好的努力是：

```
x="alias %s = 'less %s'" % (<alias name>, <path>)
y=shlex.split(x)
atexit.register(subprocess.call, y) 
```

这可以在退出时执行一些命令，例如如果 x="echo 'bye'" 但我收到错误

```
OSError: [Errno 2] No such file or directory 
```

我输入的路径当然是有效的，如果我直接从命令行运行 x ，它就可以工作。

任何有关我的代码为什么会遇到错误或达到相同效果的更好方法的帮助将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-10T10:06:46.887

你会得到一个错误，因为`alias`它是一个`bash`命令，而不是一个可执行文件。您必须`subprocess.call`在 a 内运行`shell`：

```
import subprocess                                                              
import atexit                                                                  
import shlex                                                                   

x="alias %s = 'less %s'" % ('a', 'whatever')                                   
y=shlex.split(x)                                                               
atexit.register(lambda args: subprocess.call(args, shell=True), y) 
```

但是，考虑到子进程产生一个新进程的事实，无论对它运行的环境进行什么更改，都会在退出时丢失。

您最好创建一个文件，在其中放置所有这些别名，并在需要使用它们时手动获取它们。

# mysql - 使用不同条件更新

> ID：11898053
> 
> 赞同：0
> 
> 时间：2012-08-10T08:33:59.783
> 
> 标签：mysql

```
SELECT gg.itemid,gi.id,gi.courseid, gg.userid, gg.finalgrade 
FROM pauls_grade_grades gg, pauls_grade_items gi 
WHERE gg.itemid = gi.id AND gg.userid =36 AND gi.courseid = 13 
```

我想要上面相同选择查询的更新查询。

```
UPDATE pauls_grade_grades 
SET pauls_grade_grades.finalgrade = 28 
WHERE usermodified IS NULL AND userid = 36 AND 
       itemid IN (SELECT gi.id 
                  FROM pauls_grade_items gi 
                  WHERE gi.courseid=13) 
```

这是编写 UPDATE 查询的正确方法吗

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-10T08:37:19.607

您为更新编写的查询将正常工作。
让我解释一下您的查询是做什么的。
您正在使用子查询进行更新。首先是子查询

```
SELECT gi.id 
FROM pauls_grade_items gi 
WHERE gi.courseid=13 
```

将被执行。它返回的值将被主查询中的这个子查询替换。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-10T08:43:09.100

查询是正确的

如果您无法更新数据，则表示该行不存在。尝试使用 where 子句并将其添加到 SELECT 语句中，并确保您可以先选择某些内容..例如

```
select * from pauls_grade_grades 
WHERE usermodified IS NULL AND userid = 36 AND itemid IN 
(SELECT gi.id 
FROM pauls_grade_items gi 
WHERE gi.courseid=13) 
```

然后将 where 添加回您的更新语句

```
UPDATE pauls_grade_grades SET finalgrade = 29 WHERE usermodified IS NULL AND userid = 36 AND itemid IN  (SELECT gi.id 
FROM pauls_grade_items gi 
WHERE gi.courseid=13) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-10T08:45:58.690

基本上，您可以使用`SELECT`查询来编写`UPDATE`查询。试试这个：

```
UPDATE pauls_grade_grades gg, pauls_grade_items gi 
SET gg.finalgrade = 28
WHERE gg.itemid = gi.id AND gg.userid =36 AND gi.courseid = 13
    AND usermodified IS NULL 
```

# python - 替换文件中的所有正则表达式匹配

> ID：11898054
> 
> 赞同：2
> 
> 时间：2012-08-10T08:34:10.330
> 
> 标签：python, regex

考虑一个基本的正则表达式，例如`a(.+?)a`. 如何用第一组的内容替换文件中该正则表达式的所有出现？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-10T08:46:20.593

使用可以使用[`re`](http://docs.python.org/howto/regex.html)模块来使用python中的正则表达式和[`fileinput`](http://docs.python.org/library/fileinput.html)模块来简单地替换文件中的文本

* * *

**例子：**

```
import fileinput
import re

fn = "test.txt" # your filename

r = re.compile('a(.+?)a')
for line in fileinput.input(fn, inplace=True):
  match = r.match(line)
  print match.group() if match else line.replace('\n', '') 
```

* * *

**前：**

> 你好这个
> aShouldBeAMatch！！！！！！这应该消失了
> ，你知道 的

**后：**

> 你好，这
> 应该是
> 你知道 的

* * *

注意：这是有效的，因为参数`inplace=True`导致输入文件被移动到备份文件，并且**标准输出被定向到输入文件**，如[*可选就地过滤*](https://docs.python.org/library/fileinput.html#fileinput.FileInput)[下](https://docs.python.org/library/fileinput.html#fileinput.FileInput)*所述。*

 ** * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-10T08:50:48.313

您可以使用版本 >= 6.0 的[Notepad++ 。](http://notepad-plus-plus.org/download/v6.1.5.html)从那时起，它确实支持 PCRE 正则表达式。

然后您可以使用您的正则表达式`a(.+?)a`并替换为`$1`

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2012-08-10T08:38:50.673

### sed

您是否仅限于使用 Python 工具？因为`sed`效果很好。

```
$ sed -i <filename> "s/a(.+?)a/\1/g" 
```

### 维姆

在 Vim 窗口中，给出以下搜索和替换 ex 命令：

```
:%s/\va(.+?)a/\1/g 
```

请注意，许多正则表达式字符在 Vim- `\v`set “非常神奇”模式下被转义，这消除了转义的需要。与“魔术”（默认）相同的命令是`:%s/a\(.\+\?)a/\1/g`

### Python

如果您想在 Python 中执行此操作，BigYellowCactus 的答案非常好（使用`re`模块进行正则表达式，并`fileinput`修改文件）。*

# corba - OMNIORB：读取当前的球体设置

> ID：11898056
> 
> 赞同：0
> 
> 时间：2012-08-10T08:34:16.197
> 
> 标签：corba, omniorb

可以使用 CORBA::ORB_init 为 orb 设置本机代码集。但是，如果在应用程序中以不同的配置检索一个球体，则该球体只会被初始化一次。

“-ORBconfigFile config1.cfg”

```
CORBA::ORB_var orb1 = CORBA::ORB_init(orbInitParams.argc(), orbInitParams.argv()); 
```

“-ORBconfigFile config2.cfg”

```
CORBA::ORB_var orb2 = CORBA::ORB_init(orbInitParams.argc(), orbInitParams.argv()); 
```

但问题是第一个赢了。因此，在第二个 ORB_init 的调用者不知道第一个调用者的大型应用程序中，他将得到配置为 1 的 orb。如果 1\. 使用，这很重要

*   nativeCharCodeSet = ISO-8859-1 而 2 使用
*   nativeCharCodeSet = UTF-8

有没有办法读取 ORB 设置以检查设置是否附加成功？

* * *

**为什么会出现：**我在 dll 中使用 Omniorb（这就是我初始化它的地方）。现在，该应用程序有第二个组件，它首先使用了 omniorb。所以我丢失了我的 UTF-8 配置。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-09T11:09:42.570

使用omniorb，似乎不可能在一个进程中进行orbs，或者可以读取配置。

# django - 如何禁用 django-rest-framework 的管理员风格的可浏览界面？

> ID：11898065
> 
> 赞同：193
> 
> 时间：2012-08-10T08:34:49.880
> 
> 标签：django, django-rest-framework

我正在使用[django-rest-framework](http://django-rest-framework.org/)。它提供了一个很棒的 Django 管理风格的可浏览自文档 API。但是任何人都可以访问这些页面并使用该界面添加数据（POST）。我怎样才能禁用它？

* * *

## 回答 #1

> 赞同：303
> 
> 时间：2012-10-31T10:56:36.537

您只需从视图支持的渲染器列表中删除可浏览的 API 渲染器。

**一般来说：**

```
REST_FRAMEWORK = {
    'DEFAULT_RENDERER_CLASSES': (
        'rest_framework.renderers.JSONRenderer',
    )
} 
```

**每次观看的基础：**

```
class MyView(...):
    renderer_classes = [renderers.JSONRenderer] 
```

**旁白**：

> 在许多情况下，我认为人们在任何情况下都选择禁用可浏览 API 是一种耻辱，因为这对任何使用 API 的开发人员来说都是一个很大的帮助，而且它*并没有给他们更多的权限，否则他们将拥有*. *我可以看到在某些*情况下这样做可能有商业原因，但通常我认为这是一项巨大的资产。**尽管在某些情况下，可能会显示非公共 API 可能不想公开的详细信息（例如自定义操作的名称）。**

有关将可浏览 API 渲染器限制为开发的更多详细信息，另请参阅[下面的答案。](https://stackoverflow.com/questions/11898065/how-to-disable-admin-style-browsable-interface-of-django-rest-framework)

* * *

## 回答 #2

> 赞同：131
> 
> 时间：2018-03-20T22:20:43.193

虽然这个问题的公认答案确实按照措辞回答了这个问题，但我觉得它并不能解决手头的实际问题。

为了这个答案的完整性，禁用可浏览的 HTML api 是通过从渲染器类中删除它来完成的，如下所示：

```
REST_FRAMEWORK = {
    'DEFAULT_RENDERER_CLASSES': (
        'rest_framework.renderers.JSONRenderer',
    )
} 
```

但是，该问题所暗示的实际问题是人们无需身份验证即可发布到 API。虽然删除表单使其不那么明显，但此答案并不能保护 API 端点。

至少，有人发现了这个问题，并希望保护 API 免受未经身份验证或未经授权的 POST 提交；正在寻求更改[API 权限](http://www.django-rest-framework.org/api-guide/permissions/ "API 权限")

以下将所有端点设置为只读，除非用户通过身份验证。

```
REST_FRAMEWORK = {
    'DEFAULT_PERMISSION_CLASSES': (
        'rest_framework.permissions.IsAuthenticatedOrReadOnly',
    )
} 
```

如果您想完全隐藏 API，除非用户登录，您还可以使用`IsAuthenticated`.

仅供参考：这还将在响应权限时从 HTML 可浏览 API 中删除表单。当经过身份验证的用户登录时，表单将再次可用。

**奖金回合**：

仅在 dev 中启用可浏览的 HTML API：

```
DEFAULT_RENDERER_CLASSES = (
    'rest_framework.renderers.JSONRenderer',
)

if DEBUG:
    DEFAULT_RENDERER_CLASSES = DEFAULT_RENDERER_CLASSES + (
        'rest_framework.renderers.BrowsableAPIRenderer',
    )

REST_FRAMEWORK = {
    'DEFAULT_PERMISSION_CLASSES': (
        'rest_framework.permissions.IsAuthenticatedOrReadOnly',
    ),
    'DEFAULT_RENDERER_CLASSES': DEFAULT_RENDERER_CLASSES
} 
```

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2018-08-02T17:22:42.560

```
 # For Production Only
 REST_FRAMEWORK = {
     'DEFAULT_RENDERER_CLASSES': (
         'rest_framework.renderers.JSONRenderer',
     )
 } 
```

只需将其添加到您的 settings.py 即可禁用 Browsable API！

# javascript - Jasmine 不会在每个测试规范后重置间谍

> ID：11898069
> 
> 赞同：4
> 
> 时间：2012-08-10T08:35:22.747
> 
> 标签：javascript, unit-testing, testing, junit, jasmine

我有以下规格。

```
describe("SN.ExitHistory", function() {

    var exitHistory;

    beforeEach(function() {

    SN.Utils = jasmine.createSpy("utils").andCallFake(function() {
        function readSNCookie(cookieName, key) {
            return "google.com";
        }

        function isUndefinedOrNull(param) {
            return (param == null) || (param === "null");
        }

        function createSNCookie(snCookieName, key, value, lifeTime) {

        }

        var me = {
            readSNCookie : readSNCookie,
            isUndefinedOrNull : isUndefinedOrNull,
            createSNCookie : createSNCookie
        };
        return me;

    })();

    exitHistory = SN.ExitHistory();

    });

    it("return last exit link", function() {
        expect(exitHistory.getLastExitLink()).toEqual("google.com");
    });

 }); 
```

`exitHistory.getLastExitLink`内部使用`SN.Utils`.

测试完成后，Jasmine 不会删除间谍对象 utils。在下一个测试套件中，我也可以看到相同的实用程序。每次测试完成后有没有办法重置间谍对象？

如果我为 utils 创建一个新对象，而不是创建间谍，行为是相同的。那么在这种情况下，间谍和实际对象之间有什么区别。

如果我错了，请纠正我。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-10T09:02:56.557

前段时间我遇到了同样的问题，经过几天的努力，我找到了解决方案。如果您使用其他方式重置间谍，请尝试使用

```
spyOn(SN, 'Utils'); 
```

此处描述了间谍： [https ://github.com/pivotal/jasmine/wiki/Spies](https://github.com/pivotal/jasmine/wiki/Spies)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-12-16T18:08:52.187

在规格块内的块内使用`spyOn`和声明您的间谍，当每个规格被拆除时，间谍将被清除。`before``describe`

aSpec.js

```
describe('something', () => {
    beforeAll(() => spyOn(someObject, 'someMethod').and.returnValue('foo'));
    it('is spied on', () => {
       expect(someObject.someMethod()).toEqual('foo');
    });
}); 
```

另一个Spec.js

```
describe('something else', () => {
    beforeAll(() => spyOn(someObject, 'someMethod').and.returnValue('bar'));
    it('is spied on', () => {
       expect(someObject.someMethod()).toEqual('bar');
    });
}); 
```

# python - 如何绘制跟随鼠标光标的十字？

> ID：11898073
> 
> 赞同：2
> 
> 时间：2012-08-10T08:35:48.167
> 
> 标签：python, qt, matplotlib, pyqt

我想在我`paintEvent()`的鼠标上画一个十字。我通过pyqt使用python。

我正在使用下面的代码，但结果并不好。

```
from __future__ import division
import sys
import platform

# Qt4 bindings for core Qt functionalities (non-GUI)
import PyQt4.QtCore as  QtCore

# Python Qt4 bindings for GUI objects
import PyQt4.QtGui as QtGui
from PyQt4.QtGui import *
from PyQt4.QtCore import *
# import the Qt4Agg FigureCanvas object, that binds Figure to
# Qt4Agg backend. It also inherits from QWidget
from matplotlib.backends.backend_qt4agg import FigureCanvasQTAgg as FigureCanvas
# Matplotlib Figure object
from matplotlib.figure import Figure

class C_MplCanvas(FigureCanvas):
    def __init__(self):      
        # setup Matplotlib Figure and Axis
        self.fig = Figure()
        #self.cursor = Cursor()
        self.fig.set_facecolor('black')
        self.fig.set_edgecolor('black')
        #self.ax = self.fig.add_subplot(111)
        #self.ax.patch.set_facecolor('black')
        # initialization of the canvas
        FigureCanvas.__init__(self, self.fig)
        #super(FigureCanvas, self).__init__(self.fig)

        # we define the widget as expandable
        FigureCanvas.setSizePolicy(self,
                                   QtGui.QSizePolicy.Expanding,
                                   QtGui.QSizePolicy.Expanding)
        # notify the system of updated policy
        FigureCanvas.updateGeometry(self)

        self.xx=0
        self.yy=0
        self.justDoubleClicked=False

    def contextMenuEvent(self, event):
        menu = QMenu(self)
        oneAction = menu.addAction("&One")
        twoAction = menu.addAction("&Two")
        self.connect(oneAction, SIGNAL("triggered()"), self.one)
        self.connect(twoAction, SIGNAL("triggered()"), self.two)
        '''
        if not self.message:
            menu.addSeparator()
            threeAction = menu.addAction("Thre&e")
            self.connect(threeAction, SIGNAL("triggered()"),
                         self.three)
        '''
        menu.exec_(event.globalPos())

    def one(self):
        self.message = QString("Menu option One")
        self.update()

    def two(self):
        self.message = QString("Menu option Two")
        self.update()

    def three(self):
        self.message = QString("Menu option Three")
        self.update()

    def paintEvent(self, event):
        painter = QPainter(self)
        painter.setRenderHint(QPainter.TextAntialiasing)
        #painter.drawText(self.rect(), Qt.AlignCenter, text)
        #

        #painter.setPen('red')

        pen=painter.pen()
        painter.setPen(QColor(255, 0, 0))

        painter.drawLine(self.xx-100,self.yy,self.xx+100,self.yy)
        painter.drawLine(self.xx,self.yy-100,self.xx,self.yy+100)
        self.update()

    def mouseReleaseEvent(self, event):
        if self.justDoubleClicked:
            self.justDoubleClicked = False
        else:
            self.setMouseTracking(not self.hasMouseTracking())
            self.update()

    def mouseMoveEvent(self, event):      
        self.xx=event.pos().x()
        self.yy=event.pos().y()
        self.update()

class C_MPL(QWidget):

    def __init__(self, parent = None):
        # initialization of Qt MainWindow widget
        super(C_MPL, self).__init__(parent)
        #QtGui.QWidget.__init__(self, parent)

        # instantiate a widget, it will be the main one
        #self.main_widget = QtGui.QWidget(self)
        #vbl = QtGui.QVBoxLayout(self.main_widget)
        # set the canvas to the Matplotlib widget
        self.canvas = C_MplCanvas()

        # create a vertical box layout
        self.vbl = QtGui.QVBoxLayout()
        # add mpl widget to vertical box
        self.vbl.addWidget(self.canvas)
        # set the layout to th vertical box
        self.setLayout(self.vbl)

if __name__ == "__main__":
    import sys

    '''
    def valueChanged(a, b):
        print a, b
    '''
    app = QApplication(sys.argv)
    form = C_MPL()
    #form.connect(form, SIGNAL("valueChanged"), valueChanged)
    form.setWindowTitle("C_MPL")
    #form.move(0, 0)
    form.show()
    #form.resize(400, 400)
    app.exec_() 
```

@bmu：太好了，就像我想要的那样。现在还有另一个问题：

```
 cid0=self.mpl_connect('axes_enter_event', self.enter_axes)
    cid1=self.mpl_connect('button_press_event', self.onpick)
    cid2=self.mpl_connect('motion_notify_event', self.onmove)
    cid3=self.mpl_connect('draw_event', self.clear)
    cid4=self.mpl_connect('key_press_event',self.press) 
```

奇怪的是“key_press_event”不能被触发，但所有其他事件都可以。有 ra 案例：macosx 后端忽略了多个 mpl_connect() 调用 [https://github.com/matplotlib/matplotlib/pull/585](https://github.com/matplotlib/matplotlib/pull/585)，但我认为这与我不同。我得到了 cid0,1,2,3,4 彼此不同

那么，有什么想法可以分享吗？我现在非常疯狂......以下是我的代码，如果你有同样的问题，你可以测试它：

```
import sys
import platform

from PyQt4 import QtGui, QtCore
from matplotlib.backends.backend_qt4agg import FigureCanvasQTAgg as FigureCanvas
from matplotlib.figure import Figure
import numpy as np
import matplotlib.pyplot as plt
from matplotlib.backends.backend_qt4 import NavigationToolbar2QT as NavigationToolbar
import time
from PyQt4.QtCore import *
from PyQt4.QtGui import *

#Just a test 

class MplCanvas(FigureCanvas):

    def __init__(self):

        # initialization of the canvas
        self.fig=Figure()
        FigureCanvas.__init__(self,self.fig )

        self.ax = self.fig.add_axes([.15, .15, .75, .75])
        self.canvas = self.ax.figure.canvas     

        #my added
        #self.ax = self.fig.add_axes([.15, .15, .75, .75])
        #cursor = C_Cursor(self.LvsT, useblit=True, color='red', linewidth=2 )

        x=np.arange(0,20,0.1)

        self.ax.plot(x,x*x,'o')
        self.ax.set_xlim(-2,2)
        self.ax.set_ylim(-2,2) 

        self.visible = True
        self.horizOn = True
        self.vertOn = True
        self.useblit = True

        #if self.useblit:
            #lineprops['animated'] = True

        self.lineh = self.ax.axhline(self.ax.get_ybound()[0], visible=False)
        self.linev = self.ax.axvline(self.ax.get_xbound()[0], visible=False)

        self.background = None
        self.needclear = False

        self.count = 0

        cid0=self.mpl_connect('axes_enter_event', self.enter_axes)
        cid1=self.mpl_connect('button_press_event', self.onpick)
        cid2=self.mpl_connect('motion_notify_event', self.onmove)
        cid3=self.mpl_connect('draw_event', self.clear)
        cid4=self.mpl_connect('key_press_event',self.press)

        self.draw()

    def clear(self, event):
        'clear the cursor'
        if self.useblit:
            self.background = self.canvas.copy_from_bbox(self.ax.bbox)
        self.linev.set_visible(False)
        self.lineh.set_visible(False)

    def onmove(self, event):
        'on mouse motion draw the cursor if visible'
        print("move")
        if event.inaxes != self.ax:
            self.linev.set_visible(False)
            self.lineh.set_visible(False)

            if self.needclear:
                self.canvas.draw()
                self.needclear = False
            return
        self.needclear = True
        if not self.visible: return
        self.linev.set_xdata((event.xdata, event.xdata))

        self.lineh.set_ydata((event.ydata, event.ydata))
        self.linev.set_visible(self.visible and self.vertOn)
        self.lineh.set_visible(self.visible and self.horizOn)

        self._update()

    def _update(self):

        if self.useblit:
            if self.background is not None:
                self.canvas.restore_region(self.background)
            self.ax.draw_artist(self.linev)
            self.ax.draw_artist(self.lineh)
            self.canvas.blit(self.ax.bbox)
        else:

            self.canvas.draw_idle()

        return False

        #

    def enter_axes(self,event):

        print "Enter"

    def onpick(self,event):
        print "click"
        print 'you pressed', event.canvas

        a = np.arange(10)
        print a
        print self.count

        fig = plt.figure()
        ax = fig.add_subplot(111)
        ax.plot(a)    
        fig.show()

    def press(self,event):
        print ('press', event.key)
        self.fig.canvas.draw()

class MplWidget(QtGui.QWidget):
    def __init__(self, parent = None):
        QtGui.QWidget.__init__(self, parent)        

        self.vbl = QtGui.QVBoxLayout()
        self.canvas = MplCanvas()
        self.vbl.addWidget(self.canvas)
        self.setLayout(self.vbl)

if __name__ == "__main__":

    app = QApplication(sys.argv)
    form = MplWidget()
    form.show()
    #form.resize(400, 400)
    app.exec_() 
```

@all：谢谢。添加后我解决了这个问题：

```
self.canvas.setFocusPolicy( Qt.ClickFocus )
self.canvas.setFocus() 
```

也许这是一个小错误 bcs 我需要明确地集中在 cavans 上，也许如果不是:) 细节你可以检查[https://github.com/matplotlib/matplotlib/issues/707](https://github.com/matplotlib/matplotlib/issues/707)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-12T09:41:39.380

这是一个使用 matplotlib[事件处理](http://matplotlib.sourceforge.net/users/event_handling.html#event-handling-and-picking)的示例（但是我想知道，拥有第二个光标之类的东西是否真的有用）。

```
import numpy as np
import matplotlib.pyplot as plt 

class MouseCross(object):

    def __init__(self, ax, **kwargs):
        self.ax = ax
        self.line, = self.ax.plot([0], [0], visible=False, **kwargs)

    def show_cross(self, event):
        if event.inaxes == self.ax:
            self.line.set_data([event.xdata], [event.ydata])
            self.line.set_visible(True)
        else:
            self.line.set_visible(False)
        plt.draw()

if __name__ == '__main__':
    fig, ax = plt.subplots()
    ax.plot(np.random.random(100) * 10.0)
    # note that not every "normal" matplotlib marker will work
    # math symbols work fine
    cross = MouseCross(ax, marker=r'$\bigoplus$', markersize=30,
                       color='red',)
    fig.canvas.mpl_connect('motion_notify_event', cross.show_cross)
    plt.tight_layout()
    plt.show() 
```

![截屏](../Images/cc135e7cdc8d0cc68cc8abb45538f8c8.png)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-10T20:47:46.897

问题...您是否尝试更改光标在您的小部件上的外观？如果是这样，最简单的方法是完全摆脱 paintEvent，并将 setCursor 添加到您的 init 方法中：

```
class C_MplCanvas(FigureCanva):
    def __init__( self ):
        # setup code
        ...
        self.setCursor(Qt.CrossCursor) 
```

这将告诉 Qt 在鼠标悬停在特定小部件上时使用交叉光标。这实际上将替换箭头（可能是也可能不是您想要的）。如果这不是你想要的，我建议你创建一个你想要的PNG图像，创建一个子QLabel，然后在你的mouseMoveEvent中移动子小部件。

如果您需要更多帮助，请让我知道。

# javascript - 如何使用 slice() 复制数字数组

> ID：11898074
> 
> 赞同：0
> 
> 时间：2012-08-10T08:35:51.197
> 
> 标签：javascript, arrays, splice

我正在尝试用随机游戏块（图像）填充游戏板（8 x 8），但不是整个板都被填满。有些会是空的。为此，我在板上随机生成 x,y 坐标并为其分配一个随机数。由于fillBoard是模块中的私有函数，我将它复制到copyBoard，这是一个公共函数。

这个想法是随机生成一个 x,y 坐标并将其放入 array[x]、array[y] 中。我在复制数组时遇到了麻烦，因为并不是所有的都被定义了。我想知道你是怎么做到的？

这是我到目前为止所得到的。它显示错误，因为 splice() 不能用于未定义的变量。

```
function fillBoard(){
    var x, y;
    monsters=[]; //empty array

    x = Math.floor(Math.random()*cols);
    y = Math.floor(Math.random()*rows);

    monsters[x] = []; /* making x variable an array */
    monsters[x][y] = Math.floor(Math.random() * numMonsterTypes);
}

function copyBoard() {
    var copy = [],
        x;

    for (x = 0; x < cols; x++) {
        if(monsters[x]){
            copy[x] = monsters[x].slice(0); //slice(array) -> returns the selected elements in an array
        };
    };
    return copy;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-10T08:58:43.667

看起来您的问题仅来自初始化的随机数组元素。
您可以遍历所有行和列并仅复制初始化元素
，也
可以将初始化元素的列表/数组存储在其他地方（数组元素 maxRow+1/maxCol+1 ？）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-10T08:59:31.780

这是解决方案：

```
function fillBoard(){
    var x, y;
    monsters=[]; //empty array

    x = Math.floor(Math.random()*cols);
    y = Math.floor(Math.random()*rows);

    monsters[x] = []; /* making x variable an array */
    monsters[x][y] = Math.floor(Math.random() * numMonsterTypes);
}

function copyBoard() {
    var copy = [],
        x;

    for (x = 0; x<cols; x++){
        copy[x] = [];
        if(monsters[x]){
            copy[x] = monsters[x].slice(0);;
        };
    };

    return copy;
} 
```

# dependency-injection - WebBackgrounder + Ninject

> ID：11898076
> 
> 赞同：0
> 
> 时间：2012-08-10T08:36:01.363
> 
> 标签：dependency-injection, ninject

有没有人有使用[WebBackgrounder](https://github.com/NuGet/WebBackgrounder)库的依赖注入的经验？

特别是，我需要从作业中访问我的存储库，它们的生命周期取决于任务的生命周期。最好我想避免属性注入。

这是我在 App_Start 中的 WebBackgrounderSetup：

```
public static class WebBackgrounderSetup
{
    static readonly JobManager _jobManager = CreateJobWorkersManager();

    public static void Start()
    {
        _jobManager.Start();
    }

    public static void Shutdown()
    {
        _jobManager.Dispose();
    }

    private static JobManager CreateJobWorkersManager()
    {
        var jobs = new IJob[]
    {
        new TmdbJob(TimeSpan.FromSeconds(5), TimeSpan.FromSeconds(20))
    };

        var manager = new JobManager(jobs, new SingleServerJobCoordinator());
        manager.Fail(ex => Elmah.ErrorLog.GetDefault(null).Log(new Error(ex)));
        return manager;
    }
} 
```

感谢您的任何意见！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-10T08:56:30.677

我没有使用 WebBackgrounder 的经验，但建议与每个多线程应用程序相同。基本规则是：

*   不要将服务（依赖项）传递给其他线程，因为服务（或可能）依赖于一个线程。
*   相反，在该线程的开头解析一个新的对象图。
*   对于具有特定于 HttpContext 的生命周期或缓存的依赖项（例如每个请求的生活方式），并且需要在后台线程上可用，您需要将其配置为 hibrid 生活方式（每个请求和每个线程） .
*   不要在每个线程上注册这些依赖项，因为允许 ASP.NET 在与启动该请求不同的线程上完成请求。

您可以在此处找到更多信息：[在多线程应用程序中使用依赖注入](http://simpleinjector.codeplex.com/wikipage?title=How-to&referringTitle=Documentation#Multi_Threaded_Applications)。该 Wiki 页面来自不同的 DI 框架，但其中大部分适用于 Ninject。

# android - Android：加载 html/javascript 后，Webview 变成白色。

> ID：11898077
> 
> 赞同：1
> 
> 时间：2012-08-10T08:36:12.203
> 
> 标签：android, android-webview, android-4.0-ice-cream-sandwich, hardware-acceleration, android-hardware

在 Android 4.0 及更高版本的 webview 上工作，在将 html/javascript 页面加载到其上后，会将 webview 颜色设置为白色。

在我转到开发人员选项并取消选中 FORCE GPU RENDERING 之后。在此之后它工作正常。但是当我通过编程方式进行时

```
<application android:hardwareAccelerated="false">
<activity android:hardwareAccelerated="false" /> 
```

在应用程序和活动中。并且还通过`webView.setLayerType(View.LAYER_TYPE_SOFTWARE, null);`

这不能通过代码工作。需要帮助，谢谢

# ssl - Azure 应用程序证书

> ID：11898078
> 
> 赞同：0
> 
> 时间：2012-08-10T08:36:13.630
> 
> 标签：ssl, azure, cname, csr

我正在尝试在我的 azure 应用程序上创建一个 https 端点，但我遇到了问题。我有一条 CNAME 记录（在我们本地 ISP 的名称服务器中），例如 MyApp.MyDomain.com，它映射到 MyApp.cloudapp.net。

Microsoft 文档告诉我，我需要为 MyApp.MyDomain.com 获取证书签名请求 (CSR)。但是，唯一存在的地方是本地 ISP 的名称服务器，他们告诉我他们无法创建此 CSR，因为他们不托管该域。这对我来说没有意义，因为没有人“托管”该域，它只是一个 CNAME。

所以我不知道谁能创建那个 CSR。这是我可以在本地做的事情（即在与该域无关的 IIS 上），还是需要在 Azure 的/本地 ISP 的服务器上完成？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-10T08:59:19.563

您可以在本地执行此操作，然后将其发送给您购买证书的公司（比如说 Comodo）。完成后，他们将发送响应，您需要将其上传到 IIS（在**Server Certificates**，**Complete Certificate Request**下）。

结果将是您将拥有一个 PFX 文件（具有公钥和私钥的文件）。获得此文件后，您需要将其上传到 Windows Azure 门户，并在您的 WebRole 中填写该证书的指纹。

![在此处输入图像描述](../Images/ca971716e40991e1093722b1946cbf01.png)

完成所有这些并部署应用程序后，您将能够通过 HTTPS 访问该网站，并且您会看到证书将被正确使用。

# jquery - Plupload HTML4 添加文件对话框未在 IE 中触发

> ID：11898082
> 
> 赞同：3
> 
> 时间：2012-08-10T08:36:37.530
> 
> 标签：jquery, plupload, html4

我正在为 IE 使用带有 HTML4 的 Plupload（jQuery 版本），由于某种原因，当我按下“添加文件”按钮时，它没有打开“文件对话框”。

Plupload 容器被放置在一个对话框中，我`.pluploadQueue()`每次都在显示对话框之前调用它。

它在 FF 和 Chrome 上运行良好。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-10T08:36:37.530

## 原因

> `.pluploadQueue()`我每次都在显示对话框之前打电话。

* * *

## 解决方案

`display:none`显然，如果 Plupload 容器在评估时被隐藏（），Plupload 似乎不会触发对话框`.pluploadQueue()`

`display:block`在调用之前我必须做一个`.pluploadQueue()`- 因为我不想在我的对话框中淡入直到 Plupload 东西完成之后，我只是设置了容器`opacity:0`

***长话短说***：确保您的 Plupload 容器在您调用时没有隐藏`.pluploadQueue()`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-09-12T02:12:59.660

显示或移动按钮后，调用`uploader.refresh()`以让运行时 shim 更新其位置。

# c - 实现 Com 端口终端的最简单方法。（窗口，C）

> ID：11898085
> 
> 赞同：3
> 
> 时间：2012-08-10T08:36:42.047
> 
> 标签：c, windows, serial-port

我需要编写一个终端来与 COM 端口通信，并且我需要能够同时从 COM 端口以及控制台发送命令。（我想通过两个传感器节点访问计算机，它们彼此无线通信，所以我仍然需要一种从节点向计算机发送内容的方法）

现在，我已经实现了一个非重叠串行通信，但我不确定如何实现“同时发送和接收”-部分，我只有大约 4 天的时间来解决这个问题。那里没有太多信息，所以我欢迎任何关于如何实现最快或最简单方法的指示。

据我所知，重叠的 I/O 通信在时间上并不是很友好。是否可以使用多线程（仅重叠）来做到这一点？我猜在那种情况下我必须每隔几毫秒读取一次缓冲区并为输入创建一个自己的线程？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-10T09:36:58.557

是否使用重叠 I/O 并不是真正的问题：重叠只是为您的程序腾出一些时间。我写过很多这样的程序，结论总是使用一个线程来处理所有的 COM 例程。该线程调用重叠或同步方法的相关性较低，只要线程空闲执行 WaitForMultipleObjects()。

我编写最近的 COM 终端的方式是这样的（伪）：

```
thread()
{
  while not kill the thread event
  {
    WaitForMultipleObjects (open port, close port, kill the thread event)

    if (open port)
    {
      send();
      receive();
      wait_for_send_and_receive();
    }
  }  
}

send()
{
  take COM_port mutex
  if(there is something to send)
  {
    copy send_data to local_data, protect this with mutex
    WriteFileEx(COM_port,
                local_data,
                size,
                some_overlapped_struct_stuff);

    handle errors

  }
  release COM_port mutex
}

receive()
{
  take COM_port mutex

  ReadFileEx(COM_port, ...);

  handle errors

  release COM_port mutex
}

wait_for_send_and_receive()
{
  WaitForMultipleObjects (open port, 
                          close port, 
                          kill the thread event,
                          send done event from send callback routine (overlapped I/O),
                          receive done event from receive callback routine (overlapped I/O)
                         );

} 
```

当然，这是一种过度简化，因为您需要各种功能来打开/关闭 COM 端口、数据混洗等。可能需要几个 mutice。

如果不是公司财产，我会分享真实的，工作的生产代码:( 4 天似乎有点乐观，从我的项目日志来看，我花了几个月的时间将一个工作的 COM 端口终端开发到生产质量水平。仅 COM 端口驱动程序就大约 1k loc，到处都有很多 Win API 调用。

# php - 时间的 PHP 正则表达式

> ID：11898086
> 
> 赞同：1
> 
> 时间：2012-08-10T08:36:46.687
> 
> 标签：php, regex, cakephp

我有时间代表这些可能性：

```
7:15:00 AM
07:15:00 AM

7:15:00 PM
07:15:00 PM 
```

如何调整下面的正则表达式以使上述适合？我需要添加的规则是前面可选的 0 和可选的空格 AM 或空格 PM。

```
/[0-2][0-9]:[0-5][0-9]:[0-5][0-9]/ 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-10T08:39:20.340

使用 ( `?`) 运算符或 `{0,1}`

```
 /[0-2]?[0-9]:[0-5]?[0-9]:[0-5]?[0-9]\s?[AM|PM]/i 
```

**更好**的方法：检查[`strtotime()`](http://php.net/manual/en/function.strtotime.php)

## 编辑：

我认为这是更好的一个，因为我认为`[0-2]?[0-9]`不是有效的正则表达式

```
 /1[012]|0?[1-9]:[0-5]?[0-9]:[0-5]?[0-9]\s?[AM|PM]/i 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-10T08:40:27.237

为什么不直接使用 PHP 的[strtotime](http://php.net/manual/en/function.strtotime.php)函数来完成所有工作呢？

*该函数期望得到一个包含英文日期格式的字符串，并将尝试将该格式解析为 Unix 时间戳（自 1970 年 1 月 1 日 00:00:00 UTC 以来的秒数），相对于现在给出的时间戳，或如果没有提供现在的当前时间。*

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-10T08:41:17.507

也许

```
/[0-1]{0,1}[0-9]:[0-5][0-9]:[0-5][0-9] (AM|PM)/ 
```

# html - 相同的png，相同的xampp，一个透明的？

> ID：11898087
> 
> 赞同：0
> 
> 时间：2012-08-10T08:36:57.390
> 
> 标签：html, png, transparency, alpha

我不知道为什么我有 2 个具有相同 png 的 html 文档，它们都在同一个 xampp 环境中工作，但是新的文档有一个不需要的透明部分。我试过 `opacity:1.0`没有成功。我在 chrome 上，所以没有 IE 奇怪的东西。我检查了css（都是我制作的）并且样式之间没有相关差异。我真的对这个问题发疯了！

# trigger.io - 在 android 和 iphone 上查询音乐库 - trigger.io

> ID：11898090
> 
> 赞同：1
> 
> 时间：2012-08-10T08:36:59.523
> 
> 标签：trigger.io

有没有办法从触发器中的 android 和 iphone 音乐库中获取 id3 标签信息？我需要搜索 android 和 iphone 音乐库。

# android - 如何在android中拨打电话

> ID：11898092
> 
> 赞同：0
> 
> 时间：2012-08-10T08:37:09.027
> 
> 标签：android, call

我正在尝试通过单击图像从我的应用程序进行调用，它是通过这样完成的，但它给了我异常 ActivityNotFoundException 我应该如何处理这个..？

```
 Image.setOnClickListener(new View.OnClickListener() {

                    @Override
                    public void onClick(View v) {
                        if("N/A".equals(Number)){
                            MsgBox(ctx,"Could not call because there is no number ");
                        }
                        else{
                            fnCallMobile("+91"+Number);
                        }
                    }
                }); 
```

我的 fnCallMobile 函数是：

```
public void fnCallMobile(String PhoneNo){
        ConfirmMsgBox(this,"Are you sure you want to call number "+PhoneNo,PhoneNo);
    }
    public void ConfirmMsgBox(Context ctx,String msg,final String sPhoneNo){
        final AlertDialog.Builder dialog=new AlertDialog.Builder(this);
        dialog.setTitle("Emkay Eagle");
        dialog.setMessage(msg);
        dialog.setCancelable(false);
        dialog.setPositiveButton("Yes", new DialogInterface.OnClickListener(){
            public void onClick(DialogInterface dialog, int id) {
                dialog.dismiss();
                fnCall(sPhoneNo);
            }

        });
        dialog.setNegativeButton("No", new DialogInterface.OnClickListener(){
            public void onClick(DialogInterface dialog, int which){
                return;
            }
        });
        AlertDialog alert = dialog.create();
        alert.setIcon(R.drawable.icon);
        alert.show();
        return;
    } 
```

最后是我的 fnCall 函数

```
public void fnCall(String PhoneNo){
        try{
            Intent callIntent=new Intent(Intent.ACTION_CALL);
            callIntent.setData(Uri.parse("Tel:"+PhoneNo));
            startActivity(callIntent);
        }
        catch(ActivityNotFoundException ex){
            sResponse=ex.toString();
        }
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-10T08:41:52.433

```
 Change 

`callIntent.setData(Uri.parse("Tel:"+PhoneNo));` 

 to 

`callIntent.setData(Uri.parse("tel:"+PhoneNo));` 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-10T08:49:05.697

使用方案作为电话：而不是电话：

```
callIntent.setData(Uri.parse("tel:"+PhoneNo)); 
```

这个对我有用。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-10T08:51:18.147

在 URI 中，您应该使用`tel:`代替。`Tel:`因为协议区分大小写。请注意，这是由您的错误提示的，它告诉您您的 URI 错误。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-10T13:34:05.040

```
String uri = "tel:" + number;
Intent intent = new Intent(Intent.ACTION_CALL);
intent.setData(Uri.parse(uri));
startActivity(intent); 
```

# objective-c - UItextfield 密码

> ID：11898093
> 
> 赞同：17
> 
> 时间：2012-08-10T08:37:10.870
> 
> 标签：objective-c, uitextfield

我知道使用以下方法可以使 UITextfield 在密码模式下运行：

```
textfield.secureTextEntry = YES; 
```

这会将用户输入的所有字符更改为“*”。但是，最后输入的字符会闪烁大约半秒钟。我知道这是标准行为。

有什么办法可以阻止这种情况并保持输入的字符完全模糊？

为了实现这一点，我正在考虑子类化`UITextField`然后覆盖`drawTextInRect:rect`

但我欢迎任何其他建议。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-10-09T07:29:18.807

你可以这样做：

*   将 UITextField 设置为常规，而不是秘密。
*   收听事件`UITextFieldTextDidChangeNotification`
*   发生这种情况时，将文本字段的字符替换为“*”并将真实密码存储在属性中。

这段代码有效，但有点难看，但它可能可以优化。

```
- (void)viewDidLoad
{
    [super viewDidLoad];

    [[NSNotificationCenter defaultCenter] addObserver: self selector: @selector(keyPressed:) name: UITextFieldTextDidChangeNotification object: nil];
}

- (void) keyPressed: (NSNotification *) notification {
    if(!self.password)
        self.password = @"";

    NSString* fieldText = [notification.object valueForKey:@"text"];
    NSString* lastChar = [fieldText substringFromIndex:fieldText.length-1];

    if(self.password.length>fieldText.length)
        self.password = [self.password substringToIndex:self.password.length-1];
    else
        self.password = [NSString stringWithFormat:@"%@%@", self.password, lastChar];

    NSString* secret = @"";
    for (int l = 0; l<self.password.length; l++) {
        secret = [secret stringByAppendingString:@"*"];
    }
    self.textField.text = secret;
} 
```

# svn - TortoiseSVN：如何将已修补的构建和功能构建合并到新构建中？

> ID：11898096
> 
> 赞同：1
> 
> 时间：2012-08-10T08:37:18.117
> 
> 标签：svn, build, merge, tortoisesvn, visualsvn-server

这是一个图表来说明这个问题：

![图表。](../Images/7f5b7b366a530954f85f2e1f155c0620.png)

我正在使用 TortoiseSVN 来管理我的存储库，并使用 VisualSVN Server 在专用服务器上远程管理存储库。通过简单地在 Stack Overflow 中搜索，我学会了如何做到这一切。现在我已经到了不知道如何找到这个问题的答案的地步。

如何将带有错误修复的构建和带有新功能的构建合并在一起？如果可能，回答者能否提供一些指示？

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-10T09:51:40.797

我对您的问题的理解是：您有两个分支取自主干/主分支。现在，您要将这两个分支合并回主分支。

如果是这种情况，您可以使用 TortoiseSVN 的合并选项将分支与错误修复合并并解决所有冲突。完成此操作后，您可以将具有新功能的构建合并到主干/主分支。

希望这可以帮助....

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-10T09:14:43.620

使用`merge`TortoiseSVN 中的选项来合并两个构建。
有不同类型的合并选项。

1.  合并一系列修订
2.  重新整合分支
3.  合并两棵不同的树

也许，**重新集成分支**选项对您有用，因为当您从主干创建功能分支并且功能完成后，您希望再次将其集成回主干时使用此选项。

这可能对您有用：

*   [在 TortoiseSVN 中重新集成分支](http://tortoisesvn.net/docs/release/TortoiseSVN_en/tsvn-dug-merge.html#tsvn-dug-merge-reintegrate)（TortoiseSVN 手册），

*   [重新集成分支](http://svnbook.red-bean.com/en/1.7/svn.branchmerge.basicmerging.html#svn.branchemerge.basicmerging.reintegrate)（带有 Subversion 的版本控制，SVNBook）。

# c# - 在 PostScript 中添加表单

> ID：11898100
> 
> 赞同：2
> 
> 时间：2012-08-10T08:37:34.490
> 
> 标签：c#, postscript

我有 ac# 应用程序，我想在 postscript 文件中插入一条消息，所以我创建了一个像

```
%%BeginResource: form myfrm
/myfrm 
<<
/FormType 1
/BBox [ 0 0 771 618] def
/Matrix [1 0 0 1 0 0] def
/PaintProc{pop
..........
}
>> /Form defineresource pop
%%EndResource 
```

当我像这样在页面中插入页面时

```
newpath
gsave
3800 5025 translate
3221.875 2575 scale
myfrm execform
grestore
closepath 
```

当我在 ghostview 中查看时，它给了我错误。任何建议我做错了什么，以前我所做的是从文本创建图像并以 EPS 形式插入它工作得很好，但 ps 文件大小增加了。如果可能的话，我可以在 postscript 中插入一个文本框。

编辑后：-

```
/myfrm 
<<
/FormType 1
/BBox [ 0 0 771 618] 
/Matrix [1 0 0 1 0 0] 
/PaintProc{pop
0 0 moveto
(my name is ali) show
}
>> def

.....
.....
.....
newpath
gsave
3800 5025 translate
3221.875 2575 scale
myfrm execform
grestore
closepath 
```

但没有显示文字

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-10T16:29:55.740

您已经定义了一个 Form 资源的实例，但是在调用 execform 之前您还没有加载该资源。您要么需要：

1）只定义表单字典（但不将其存储为资源）

```
/myfrm <<
/FormType 1
...
>> def
...
myfrm execform 
```

2）在执行之前加载资源

```
/myfrm /Form findresource execform 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-13T16:11:01.700

这个 PostScript 代码对我有用：

```
%!
/C60 {/Courier findfont 60 scalefont setfont 30 700 moveto} def

/myfrm
   <<
     /Matrix [ 2 3 .1  2 0 0 ]  
     /PaintProc
        {
           /Helvetica findfont 24 scalefont setfont
           10 10 moveto
           (Your name is Haider) show
        }
     /BBox [ 0 0 450 100]
     /FormType 1
  >> def

C60 (Page 1) show myfrm execform showpage
C60 (Page 2) show myfrm execform showpage
C60 (Page 3) show myfrm execform showpage 
```

这是你要找的吗？

# javascript - javascripts和struts2 action之间的通信

> ID：11898102
> 
> 赞同：0
> 
> 时间：2012-08-10T08:37:46.697
> 
> 标签：javascript, struts2

我有以下场景：

1.  用户将输入一些值，这些值将根据动作类中 DB 的值进行验证。
2.  如果该值无效，则想向用户显示一个确认框，他是否仍要继续处理无效值。
3.  取决于用户的回答`YES`或`NO,`带回动作类，动作类的过程会有所不同。

对于上述场景，步骤 1 即可。

但是我如何实现将动作类的值带到 javascripts 并获得用户的确认并将值带回动作类？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-10T08:43:07.253

第二种方法可以通过使用 Ajax 来完成。Struts 2 提供了多种使用 Ajax 的方法：

1.  使用[“流”结果类型](http://struts.apache.org/2.3.1/docs/stream-result.html)将数据发送回您的 JS 代码。
2.  使用[JSON 插件](http://struts.apache.org/2.3.1/docs/json-plugin.html)获取 JSON。
3.  考虑[Struts 2 jQuery 插件](http://code.google.com/p/struts2-jquery/)。

[Google 搜索](http://www.google.com/search?q=struts2%20and%20Ajax%20using%20jquery)将为您提供大量示例，说明如何将 Ajax 与 Struts 2 结合使用。

# matlab - 在 Matlab 中安全删除文件，无需担心删除其他文件或执行任意代码

> ID：11898105
> 
> 赞同：1
> 
> 时间：2012-08-10T08:38:03.093
> 
> 标签：matlab, security, file-io, delete-file

如何在 Matlab 中以编程方式安全地删除文件？我所说的“安全”是指：

1.  单个删除语句最多删除一个文件，例如不删除通配符。`delete(a*)`应该删除文件`a*`，仅此而已！
2.  单个删除语句不应有任何可能的副作用，例如 no `system(sprintf('rm -f %s', foo))`where `foo`may be `file;some_command`。

目前，我遇到的代码`system(sprintf('rm -f %s', foo))`有一些`foo`. 我想将其替换为`delete(foo)`，但根据[文档](http://www.mathworks.se/help/techdoc/ref/delete.html)， Matlabs -function`delete`接受通配符，因此不满足要求（1）；如果输入包含`*`，我可能最终会删除许多文件。如何在 Matlab 中安全地删除文件？

当然，一种方法是`foo`通过删除诸如`:=, ()*<>!?%;`. 但首先这是一种迂回的方式，其次不允许我删除包含这些字符的文件。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-10T10:27:11.663

我能想到的最好方法是通过Java。您可能知道，您可以直接从 Matlab 生成 Java 语句。

还要考虑[转义](https://en.wikipedia.org/wiki/Escape_character)特殊字符而不是删除。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-10T16:18:25.243

怎么样：

```
function safe_delete(filename)
    %# listing
    d = dir(filename);
    d([d.isdir]) = [];   %# only files

    %# skip if more than one match or no match
    if isempty(d) || numel(d) > 1, return; end

    %# delete file
    p = fileparts(filename);
    delete( fullfile(p,d(1).name) );
end 
```

这将只删除一个文件。如果有多个匹配项，该函数不会删除任何文件。

### 例子：

```
safe_delete('file.txt')           %# delete file.txt if it exists
safe_delete('/path/to/file.txt')  %# also works with relative/absolute paths
safe_delete('*.txt')              %# doesn't do anything
safe_delete('/path/to')           %# doesn't delete directories only files 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-10T09:05:41.707

*安全删除*是什么意思？如果您想提示询问*您确定要删除...？*好吧，Matlab（如 C、C++、Perl、Python*等*）为您提供了编写函数的工具，该函数可以安全地包装对`delete`. `delete`通过一些字符串操作，您可以编写函数以仅捕获使用通配符调用的尝试

或者也许你正在寻找的`recycle`选项。`delete`

此外，请查看`File | Preferences`并在打开的对话框中查看`Deleting files`底部的选项。

# google-maps - 谷歌地图 v3 设置一个半径可编辑但不是中心的圆

> ID：11898108
> 
> 赞同：7
> 
> 时间：2012-08-10T08:38:20.970
> 
> 标签：google-maps

我设法在地图上放了一个圆圈并使其可编辑：

```
var circle = new google.maps.Circle({
          map: map,
          radius: 1609.344, // 1 mile
          editable: true,
          fillOpacity: 0.25
        });

circle.bindTo('center', marker, 'position'); 
```

但是，这使得半径和中心都可编辑。我只希望半径是可编辑的。我看不到通过`google.maps.Circle`.

我所追求的，几乎就是这里的东西：

[http://www.freemaptools.com/radius-around-point.htm](http://www.freemaptools.com/radius-around-point.htm)

但是我看不到它是如何完成的，因为他们的代码看起来很模糊。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-10T10:24:52.507

您可以尝试监听 center_changed 事件并在它触发时重新定位中心，例如：

全局变量：

```
 var centerPoint = new G.LatLng(45.5, -100.5);
    var ignore = false;
    var poly;
//position the map where the circle is so we can see it.
    map.setCenter(centerPoint);
    map.setZoom(11); 
```

接着：

```
poly = new google.maps.Circle({
    map: map,
    center:centerPoint,
    radius: 1609.344, // 1 mile
    editable: true,
    fillOpacity: 0.25
});

G.event.addListener(poly,'center_changed',function(){
    if (ignore){
        ignore = false;
        return;
    }
    poly.setEditable(false);
    ignore = true;
    poly.setCenter(centerPoint);
    poly.setEditable(true);
}); 
```

唯一的问题是中心标记可能会误导用户。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-10T11:00:22.133

请参阅文档中的[这篇文章](https://web.archive.org/web/20140331075724/https://developers.google.com/maps/articles/mvcfun)（在可编辑对象之前）。如果您执行[第 6 步](https://google-developers.appspot.com/maps/articles/mvcfun/step6)并且不使中心标记可拖动，我认为这就是您想要的。

[小提琴包含来自链接的原始代码](http://jsfiddle.net/geocodezip/s2561wc8/1/)

**代码片段：**

```
/**
 * A distance widget that will display a circle that can be resized and will
 * provide the radius in km.
 *
 * @param {google.maps.Map} map The map to attach to.
 *
 * @constructor
 */
function DistanceWidget(map) {
  this.set('map', map);
  this.set('position', map.getCenter());

  var marker = new google.maps.Marker({
    // draggable: true,  // <-- change to make so position doesn't move
    title: 'Move me!'
  });

  // Bind the marker map property to the DistanceWidget map property
  marker.bindTo('map', this);

  // Bind the marker position property to the DistanceWidget position
  // property
  marker.bindTo('position', this);

  // Create a new radius widget
  var radiusWidget = new RadiusWidget();

  // Bind the radiusWidget map to the DistanceWidget map
  radiusWidget.bindTo('map', this);

  // Bind the radiusWidget center to the DistanceWidget position
  radiusWidget.bindTo('center', this, 'position');

  // Bind to the radiusWidgets' distance property
  this.bindTo('distance', radiusWidget);

  // Bind to the radiusWidgets' bounds property
  this.bindTo('bounds', radiusWidget);
}
DistanceWidget.prototype = new google.maps.MVCObject();

/**
 * A radius widget that add a circle to a map and centers on a marker.
 *
 * @constructor
 */
function RadiusWidget() {
  var circle = new google.maps.Circle({
    strokeWeight: 2
  });

  // Set the distance property value, default to 10km.
  this.set('distance', 10);

  // Bind the RadiusWidget bounds property to the circle bounds property.
  this.bindTo('bounds', circle);

  // Bind the circle center to the RadiusWidget center property
  circle.bindTo('center', this);

  // Bind the circle map to the RadiusWidget map
  circle.bindTo('map', this);

  // Bind the circle radius property to the RadiusWidget radius property
  circle.bindTo('radius', this);

  // Add the sizer marker
  this.addSizer_();
}
RadiusWidget.prototype = new google.maps.MVCObject();

/**
 * Update the radius when the distance has changed.
 */
RadiusWidget.prototype.distance_changed = function() {
  this.set('radius', this.get('distance') * 1000);
};

/**
 * Add the sizer marker to the map.
 *
 * @private
 */
RadiusWidget.prototype.addSizer_ = function() {
  var sizer = new google.maps.Marker({
    draggable: true,
    title: 'Drag me!'
  });

  sizer.bindTo('map', this);
  sizer.bindTo('position', this, 'sizer_position');

  var me = this;
  google.maps.event.addListener(sizer, 'drag', function() {
    // As the sizer is being dragged, its position changes.  Because the
    // RadiusWidget's sizer_position is bound to the sizer's position, it will
    // change as well.
    var min = 0.5;
    var max = 15;
    var pos = me.get('sizer_position');
    var center = me.get('center');
    var distance = google.maps.geometry.spherical.computeDistanceBetween(center, pos) / 1000;
    if (distance < min) {
      me.set('sizer_position', google.maps.geometry.spherical.computeOffset(center, min * 1000, google.maps.geometry.spherical.computeHeading(center, pos)));
    } else if (distance > max) {
      me.set('sizer_position', google.maps.geometry.spherical.computeOffset(center, max * 1000, google.maps.geometry.spherical.computeHeading(center, pos)));
    }
    // Set the circle distance (radius)
    me.setDistance();
  });
};

/**
 * Update the center of the circle and position the sizer back on the line.
 *
 * Position is bound to the DistanceWidget so this is expected to change when
 * the position of the distance widget is changed.
 */
RadiusWidget.prototype.center_changed = function() {
  var bounds = this.get('bounds');

  // Bounds might not always be set so check that it exists first.
  if (bounds) {
    var lng = bounds.getNorthEast().lng();

    // Put the sizer at center, right on the circle.
    var position = new google.maps.LatLng(this.get('center').lat(), lng);
    this.set('sizer_position', position);
  }
};

/**
 * Set the distance of the circle based on the position of the sizer.
 */
RadiusWidget.prototype.setDistance = function() {
  // As the sizer is being dragged, its position changes.  Because the
  // RadiusWidget's sizer_position is bound to the sizer's position, it will
  // change as well.
  var pos = this.get('sizer_position');
  var center = this.get('center');
  var distance = google.maps.geometry.spherical.computeDistanceBetween(center, pos) / 1000;

  // Set the distance property for any objects that are bound to it
  this.set('distance', distance);
};

function init() {
  var mapDiv = document.getElementById('map-canvas');
  var map = new google.maps.Map(mapDiv, {
    center: new google.maps.LatLng(37.790234970864, -122.39031314844),
    zoom: 11,
    mapTypeId: google.maps.MapTypeId.ROADMAP
  });
  var distanceWidget = new DistanceWidget(map);

  google.maps.event.addListener(distanceWidget, 'distance_changed', function() {
    displayInfo(distanceWidget);
  });

  google.maps.event.addListener(distanceWidget, 'position_changed', function() {
    displayInfo(distanceWidget);
  });
}

function displayInfo(widget) {
  var info = document.getElementById('info');
  info.innerHTML = 'Position: ' + widget.get('position') + ', distance: ' +
    widget.get('distance');
}

google.maps.event.addDomListener(window, 'load', init);
```

```
#map-canvas {
  height: 500px;
}
```

```
<script src="https://maps.googleapis.com/maps/api/js?libraries=geometry"></script>
<div id="info"></div>
<div id="map-canvas"></div>
```

[原创文章（链接现已失效）](https://developers.google.com/maps/articles/mvcfun)

# java - 为内部类设置日志级别（在 Glassfish 中）

> ID：11898112
> 
> 赞同：12
> 
> 时间：2012-08-10T08:38:53.087
> 
> 标签：java, logging, glassfish

我正在寻找一种为内部类设置日志级别的方法，假设我有以下类：

```
package mypackage;

class Outer {
   Inner inner = new Inner();

   public void logSomething() {
       Logger.getLogger(Outer.class.getName()).log(Level.FINE, "I'm alive!");
       inner.logSomething();
   } 

   class Inner {
       public void logSomething() {
           Logger.getLogger(Inner.class.getName()).log(Level.FINE, "I'm alive too!");
       }
   }
} 
```

我可以使用 name 设置 Outer 的日志级别`mypackage.Outer`。但是我该如何设置呢`Inner`？我已经测试了以下但没有成功：

*   `mypackage.Outer`
*   `mypackage.Outer.Inner`
*   `mypackage.Outer$Inner`（给出错误）
*   `mypackage.Inner`

有谁知道是否有办法做到这一点？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-28T18:06:35.023

`Inner.class.getName()`正在返回`mypackage.Outer$Inner`不符合[Logger.getLogger()](http://docs.oracle.com/javase/7/docs/api/java/util/logging/Logger.html#getLogger%28java.lang.String%29)参数的预期约定

> `name`- 记录器的名称。**这应该是一个点分隔的名称**，并且通常应该基于子系统的包名或类名，例如 java.net 或 javax.swing

您可以显式使用

```
Logger.getLogger("myPackage.Outer.Inner").log(Level.FINE, "I'm alive too!") 
```

并使用设置级别`myPackage.Outer.Inner`

奇怪的是，消息通过`SimpleFormatter()`使用 $ 作为内部类来格式化，因为它输出的是类名，而不是记录器名

```
28-feb-2013 19:04:16 mypackage.Outer$Inner logSomething
FINE: I'm alive too! 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2021-05-20T08:03:46.013

内部类。[getCanonicalName()](https://docs.oracle.com/javase/8/docs/api/java/lang/Class.html#getCanonicalName--)正在返回 mypackage.Outer.Inner 。所以你可以使用

```
Logger.getLogger(Inner.class.getCanonicalName()).log(Level.FINE, "I'm alive too!") 
```

# java - 用java转义HTML但保留一些字符

> ID：11898113
> 
> 赞同：3
> 
> 时间：2012-08-10T08:38:55.150
> 
> 标签：java, html, escaping

基本上我想要做的是 html 转义一个字符串，而不是转义字符等`åäö`。

我基本上想逃避这些角色。

```
&, <, >, ", ', `, , !, @, $, %, (, ), =, +, {, }, [, and ] 
```

当然，在某些情况下我并不完全安全，但我应该没问题。现在我一直在使用`StringEscapeUtils.escapeJavaScript(StringEscapeUtils.escapeHtml(String))`，但它正在转义`åäö`。

那么我必须使用替换创建自己的函数还是那里有完成的函数？

# matlab - 遍历matlab中的矩阵

> ID：11898115
> 
> 赞同：1
> 
> 时间：2012-08-10T08:39:01.953
> 
> 标签：matlab, loops, matrix

我有以下问题：

当两个矩阵中的条目都为零时，我删除条目。如果我有 i 对这样的矩阵，如何在 matlab 中正确地为循环编写索引？代码：

```
x = [0 0 0 1 1 0 5 0 7 0]
y = [0 2 0 1 1 2 5 2 7 0]

idx = ~(x==0 & y==0);

x2 = x(idx)
y2 = y(idx) 
```

你能帮助我吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-10T08:58:54.673

如果我理解正确，你想匹配 x 和 y 都为零的元素，所以这样的东西应该可以工作（没有 not `~`）：

```
idx = (x==0 & y==0);

x2 = x(~idx)
y2 = y(~idx) 
```

### 编辑

或者更简单地说，正如 mutzmatron 所建议的：

```
idx = (x ~= 0 | y ~= 0);

x2 = x(idx)
y2 = y(idx) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-10T08:58:16.600

也许像这样？

```
x2 = x(find(or((x~=0),(y~=0))))
y2 = y(find(or((x~=0),(y~=0)))) 
```

显然，这些不会进行就地替换，因此`x`不会`y`更改。我还没有想出如何同时在两个阵列上做到这一点。

**编辑**阅读下面@mutzmatron 的评论

# wpf - RibbonApplicationMenuItem 中的 16x16 像素图像被拉伸

> ID：11898118
> 
> 赞同：0
> 
> 时间：2012-08-10T08:39:03.813
> 
> 标签：wpf, ribboncontrolslibrary

我有一个功能区应用程序菜单，如下所示：

```
<ribbon:RibbonWindow>
  <DockPanel>
    <ribbon:Ribbon DockPanel.Dock="Top">
      <ribbon:Ribbon.ApplicationMenu>
        <ribbon:RibbonApplicationMenu>
          <ribbon:RibbonApplicationMenuItem Header="Users"                      
              ImageSource="Users16x16.png"
              Command="{Binding FooBinding}"/>
        </ribbon:RibbonApplicationMenu>
      </ribbon:Ribbon.ApplicationMenu>
    </ribbon:Ribbon>
  </DockPanel>
</ribbon:RibbonWindow> 
```

生成的图像看起来像这样，被拉伸了。

![在此处输入图像描述](../Images/ca96729c7de0e7225c73a187e0bfa26a.png)

那么如何让功能区应用程序菜单项的高度适应图像大小而不是拉伸呢？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-10T08:53:26.253

更改控件模板，如：

```
<ribbon:RibbonApplicationMenuItem Command="{Binding FooBinding}">
  <ribbon:RibbonApplicationMenuItem.Template>
    <ControlTemplate>
      <Grid >
        <Grid.ColumnDefinitions>
          <ColumnDefinition />
          <ColumnDefinition />
        </Grid.ColumnDefinitions>
        <Image Grid.Column="0" Source="Users16x16.png"/>
        <TextBlock Grid.Column="1">Users</TextBlock>
      </Grid>
    </ControlTemplate>
  </ribbon:RibbonApplicationMenuItem.Template>
</ribbon:RibbonApplicationMenuItem> 
```

如果您想在字典中使用控件模板作为样式：

```
<Style x:Key="16x16ImageStyle" TargetType="{x:Type ribbon:RibbonApplicationMenuItem}">
 <Setter Property="Template">
  <Setter.Value>
   <ControlTemplate TargetType="{x:Type ribbon:RibbonApplicationMenuItem}">
    <Grid >
     <Grid.ColumnDefinitions>
      <ColumnDefinition />
      <ColumnDefinition />
     </Grid.ColumnDefinitions>
     <Image  VerticalAlignment="Center"  HorizontalAlignment="Center" Stretch="None"
             Grid.Column="0" Source="{TemplateBinding ImageSource}"/>
     <TextBlock Grid.Column="1" Text="{TemplateBinding Header}"></TextBlock>
    </Grid>
   </ControlTemplate>
  </Setter.Value>
 </Setter>
</Style> 
```

并在您的功能区中回忆它：

```
<ribbon:RibbonApplicationMenuItem Header="Users"                      
          ImageSource="Users16x16.png"
          Command="{Binding FooBinding}" 
          Style="{StaticResource 16x16ImageStyle}"/> 
```

# java - (java)如果枚举是静态的 - 如何在我的代码中创建另一个实例（使用 DB40）？

> ID：11898122
> 
> 赞同：0
> 
> 时间：2012-08-10T08:39:18.047
> 
> 标签：java, enums, db4o

在我的代码中，我有以下枚举

```
public ennum BuySell {
  buy('B', true, RoundingMode.DOWN, 1),
  sell('S', false, RoundingMode.UP, -1 buy);

  BuySell(char c, boolean isBuy, RoundingMode roundingMode, int mult) {
     this.aChar = c;
     this.isBuy = isBuy;
     this.isSell = !isBuy;
     this.roundingMode = roundingMode;
     this.mult = mult;
  }

  BuySell(char c, boolean isBuy, RoundingMode roundingMode, int mult, BuySell   oppositeAction) {
     this(c, isBuy, roundingMode, mult);

     this.opposite = oppositeAction;
     oppositeAction.opposite = this;
  }
} 
```

我通过 DB40 保存包含此枚举的对象，并在我的系统加载时加载这些对象。我看到的是加载的对象包含具有不同对象 id 的 ButSell 。
干得好 ：

![在此处输入图像描述](../Images/85e0fdb4276aaf4fd5e666cebaacf142.png)

您可以看到一个卖出 = 9570，另一个是 9576

我的问题是 - 这个枚举的另一个实例是如何创建的？不是静态的吗？

我怎样才能避免它？
谢谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-10T08:43:31.417

如果你可以获得多个实例

*   您有多个类加载器。
*   您用于`Unsafe`创建 Enum 类的实例。

需要进一步调查以确定如何避免这种情况。例如，您是否设置了类加载器。两个对象的 ClassLoader 是否不同？该库是否使用 Unsafe.allocateInstance ？

顺便说一句：我会使用 BUY 和 SELL 而不是买卖枚举常量。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-10T09:02:26.713

我会使用工厂，并且在 setBuySell 中的对象中通过工厂。我不知道 DB40，所以这是一个疯狂的猜测

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-10T08:51:56.253

您现在有两个枚举实例：`buy`和`sell`. *它们*是静态的。不是你的`BuySell`类型。

# php - PHP：“语法错误，意外的 T_STRING”与 mail()

> ID：11898123
> 
> 赞同：-3
> 
> 时间：2012-08-10T08:39:19.127
> 
> 标签：php, forms, html-email

我有一个简单的脚本，只用 PHP 发送邮件：

```
mail( "$webmaster_email", "RSVP from WC Entry Form",
   "From: $email, \n Name: $firstname $lastname \n 
   Phone Number: $phone \n 
   Address: $postal \n );
header( "Location: $thankyou_page" ); 
```

但我越来越`Parse error: syntax error, unexpected T_STRING`

我不确定这是什么谷歌没有给我任何明确的答案

有人知道为什么会这样吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-10T08:40:42.323

```
mail( "$webmaster_email", "RSVP from WC Entry Form",
   "From: $email, \n Name: $firstname $lastname \n 
   Phone Number: $phone \n 
   Address: $postal \n ");
header( "Location: $thankyou_page" ); 
```

你只是忘记了'"'。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-10T08:40:46.633

将代码更改为

```
mail( "$webmaster_email", "RSVP from WC Entry Form",
   "From: $email, \n Name: $firstname $lastname \n 
   Phone Number: $phone \n 
   Address: $postal \n ");
header( "Location: $thankyou_page" ); 
```

# dhtml - 这个 openlaszlo 代码有什么问题？

> ID：11898125
> 
> 赞同：1
> 
> 时间：2012-08-10T08:39:20.000
> 
> 标签：dhtml, openlaszlo

我想知道这段代码有什么问题

```
<canvas> 
    <view y="50" width="100%" height="300" bgcolor="blue" onmousedown="res.apply()" onmouseup="res.remove()">
        <resizestate name="res"/>
        <dragstate name="drg"/>
        <text width="100%" bgcolor="gray" onmousedown="parent.drg.apply()" onmouseup="parent.drg.remove()">Drag here</text>
        <html id="ht" src="text.html" x="15" y="15" width="${parent.width - 30}" height="${parent.height - 30}"/>
    </view>
</canvas> 
```

代码已编译，但我无法在 swf 版本中看到 html，但我能够在 dhtml 版本中看到 html。我也尝试指定网址仍然没有结果

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-10T09:11:14.963

It looks like the <html> tag functionality is broken in the SWF10 runtime of OpenLaszlo 5.0 (trunk) for some Webkit based browser (Chrome and Safari), but there are other problems as well. I've modified the code a bit to do some testing:

```
<canvas>
  <button text="OpenLaszlo" onclick="ht.setAttribute('src', 'http://www.openlaszlo.org')" />
  <button y="40" text="test.html" onclick="ht.setAttribute('src', 'test.html')" />
  <view y="200" width="100%" height="300" bgcolor="blue" onmousedown="res.apply()" onmouseup="res.remove()">
    <resizestate name="res"/>
    <dragstate name="drg"/>
    <text width="100%" bgcolor="gray" onmousedown="parent.drg.apply()" onmouseup="parent.drg.remove()">Drag here</text>
    <html id="ht" src="http://www.openlaszlo.org" x="15" y="15" width="${parent.width - 30}" height="${parent.height - 30}"/>
  </view>
</canvas> 
```

Here are the results I'm seeing with this code for the SWF10 runtime:

*   InternetExplorer 9, Chromium 18 and Opera 12: Both pages (local test.html and OpenLaszlo) are displayed within the iFrame.
*   Firefox: Remote website OpenLaszlo.org displays, but local test.html is not shown.
*   Safari 5.1 and Chrome 21: Both pages are not shown within the iFrame

I would file an [OpenLaszlo Jira](http://jira.openlaszlo.org/jira/secure/Dashboard.jspa) bug, and send a message to the [laszlo-dev](http://www.openlaszlo.org/mailman/listinfo/laszlo-dev) developer mailing list referring to this discussion.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-14T19:24:28.960

自 2006 年以来，我一直在 OpenLaszlo 中进行开发，我个人尝试在 SWF 运行时下使用 OpenLaszlo <html> 标记的经验是，我加载到其中的一半页面可以正常工作，而其中一半不能。我遇到过即使来自 Google 的简单网页也无法运行的情况，这是一个非常不稳定的类，我不建议使用它。

# string - Antlr 字符串无法匹配

> ID：11898127
> 
> 赞同：1
> 
> 时间：2012-08-10T08:39:28.630
> 
> 标签：string, antlr, antlr3

我正在处理一个小蚂蚁问题。在我的小型自定义 DSL 中，我希望能够在字段之间进行比较操作。我有三个字段类型（字符串、整数、标识符）标识符是一个变量名。我做了一个很大的规范，但我已经将我的问题减少到一个更小的语法。

问题是，当我尝试使用字符串语法符号时，您可以使用 antlrworks 将其添加到语法符号中，我的字符串被视为标识符。这是我的语法：

```
grammar test;

x
    : 'FROM' field_value EOF
    ;

field_value
    : STRING
    | INT
    | identifier
    ;

identifier
    : ID (('.' '`' ID '`')|('.' ID))?
    | '`' ID '`' (('.' '`' ID '`')|('.' ID))?
    ;

ID  :   ('a'..'z'|'A'..'Z'|'_') ('a'..'z'|'A'..'Z'|'0'..'9'|'_')*
    ;

INT :   '0'..'9'+
    ;

STRING
    :  '"' ( ESC_SEQ | ~('\\'|'"') )* '"'
    ;

fragment
HEX_DIGIT : ('0'..'9'|'a'..'f'|'A'..'F') ;

fragment
ESC_SEQ
    :   '\\' ('b'|'t'|'n'|'f'|'r'|'\"'|'\''|'\\')
    |   UNICODE_ESC
    |   OCTAL_ESC
    ;

fragment
OCTAL_ESC
    :   '\\' ('0'..'3') ('0'..'7') ('0'..'7')
    |   '\\' ('0'..'7') ('0'..'7')
    |   '\\' ('0'..'7')
    ;

fragment
UNICODE_ESC
    :   '\\' 'u' HEX_DIGIT HEX_DIGIT HEX_DIGIT HEX_DIGIT
    ; 
```

当我尝试解析以下字符串`FROM "Hello!"`时，它会返回一个像这样的解析树

```
 <grammar test>
             |
             x
             |
----------------------------
 |           |             |
FROM    field_value        !
             |
         identifier
             |
          "Hello 
```

它将我认为应该是一个标识符的字符串解析为一个标识符，我认为我的标识符没有说明双引号，所以它不应该匹配。

此外，我认为我对字符串的定义是错误的，即使 antlrworks 为我生成了它。有人知道为什么会这样吗？

干杯!

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-10T08:49:47.847

你的语法没有问题。让您搞砸的事情很可能是您使用的是 ANTLRWorks 的解释器。不。口译员不好用。

改用 ANTLRWorks 的调试器（在你的语法中，按`CTRL`+ `D`），它就像一个魅力。这是调试器在解析后显示的内容`FROM "Hello!"`：

![在此处输入图像描述](../Images/03f7ba4ac4781d527d5240a5fd20293e.png)

# asp.net - 在模板链接按钮“eval”中设置文本字符串

> ID：11898128
> 
> 赞同：0
> 
> 时间：2012-08-10T08:39:33.137
> 
> 标签：asp.net, eval, settext

我需要将 gridview 列中的 Text 设置为使用以下代码在 gridview 中显示的内容以外的内容：

```
<asp:LinkButton ID="lnkCustomer" runat="server" 
     OnClick="lnkCustomer_Click" Text='<%# Eval("ImgLnk") %>'></asp:LinkButton> 
```

当然显示的是字符串形式的“ImgLnk”的内容，它是一个超链接，即“http://....”我宁愿在 gridview 中说“图片”。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-10T08:43:20.860

```
<asp:LinkButton ID="lnkCustomer" runat="server" Text='Picture'
     CommandName="CustomerLink" CommandArgument='<%# Eval("ImgLnk") %>'></asp:LinkButton> 
```

然后在您的单击/命令事件处理程序中：

```
if (e.CommandName == "CustomerLink")
{
    Response.Redirect(e.CommandArgument);
} 
```

# magento - 想要在 magento 的交叉销售选项卡中添加折扣价字段

> ID：11898129
> 
> 赞同：1
> 
> 时间：2012-08-10T08:39:42.310
> 
> 标签：magento, discount

我想在 magento 管理面板中实现以下要求-

当我将“A”产品添加到购物车时，系统会建议我“B”，“C”.. 具有我已经通过管理面板配置的折扣价的产品。即想要提供选择产品并添加折扣价..像交叉销售标签。

提前致谢...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-15T09:02:46.457

我想我想要同样的......使用magento crosssell功能以正常方式在另一个独特产品的结账时显示特定产品。所需的额外功能是将促销价格或折扣百分比硬编码到交叉销售项目中。如果 sku 123456 在产品视图或类别中，则它具有零售价，但如果在交叉销售中显示，则会显示在产品级别控制的促销折扣价。所以也许这个功能是产品设置的一部分。也许是一个叫做交叉销售价格的新领域？

我已经要求headworks 澄清他们的“结帐促销”扩展的功能。前面的作品扩展似乎是一个横幅，但我会看看他们说什么。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-15T09:38:02.540

这是使用 magento 交叉销售功能以正常方式在另一个独特产品的结账时显示特定产品吗？所需的额外功能是将促销价格或折扣百分比硬编码到交叉销售项目中。如果 sku 123456 在产品视图或类别中，则它具有零售价，但如果在交叉销售中显示，则会显示在产品级别控制的促销折扣价。所以也许这个功能是产品设置的一部分，也许它是一个叫做交叉销售价格的新领域？

我已要求提前工作人员澄清他们的“结帐促销”扩展程序的功能。前面的作品，扩展似乎是一面旗帜，但我会看看他们说什么。

# java - 如何将xml文档中的数据插入postgresql？

> ID：11898131
> 
> 赞同：0
> 
> 时间：2012-08-10T08:39:47.267
> 
> 标签：java, xml, postgresql, xsd

我在 PosgreSQL 中有一个表。我有一个 xml 架构。

我想用这个模式和来自 Postgre 的数据创建一个 xml 文档。

我应该阅读什么才能在 java 中使用 xsd？什么是最好的工具？

**更新**

更具体的问题。我可以使用 xml 模式在 PostgreSql 中创建数据库吗？

**更新 2**

好的。我使用 XMLSpy 从 .xsd 创建数据库。
现在我需要在这个数据库中加载 xml 文档。我要做什么？

**更新 3**

好的。我使用 JiBX 生成 java 类。
现在我想读取 xml 文件并将数据从中写入数据库。我要做什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-10T08:46:44.943

可能最好从 XSD 为 XML 生成 java 类，您可以在此处阅读： [Generate Java classes from .XSD files...?](https://stackoverflow.com/questions/686453/generate-java-classes-from-xsd-files)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-10T10:21:02.307

我对postgreSql一无所知，但我建议你使用jaxb从你的Xsd生成java类，并将这些类用作你的db的域。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-26T06:37:55.950

是的，完成上述任务的最佳方法是生成 java 类并填充您各自的 bean。从那里您可以将您的 bean 值插入到 posgresql 中的相应表中

# android - Android：旋转动画和移动动画组合

> ID：11898137
> 
> 赞同：0
> 
> 时间：2012-08-10T08:40:08.603
> 
> 标签：android, animation, image-rotation

我有一个 ImageView 图像。我需要将此图像向右旋转 90 度，然后将其从左向右移动。我设法做到了。我使用***了 AnimationListener***并在旋转完成后开始***moveAnimation()***。但是在运动图像恢复到原来的样子之前（旋转之前）。

*用于旋转rotation.xml*的xml代码

 *```
<?xml version="1.0" encoding="utf-8"?>
<rotate
  xmlns:android="http://schemas.android.com/apk/res/android"
  android:fromDegrees="0"
  android:interpolator="@android:anim/linear_interpolator"
  android:toDegrees="90"
  android:pivotX="50%"
  android:pivotY="50%"
  android:duration="1000"
  android:startOffset="0"
/> 
```

旋转动画（）

```
 private void rotateAnimation(){

        Animation rotation = AnimationUtils.loadAnimation(getContext(), R.anim.rotate);
        rotation.setRepeatCount(0);
        rotation.setFillAfter(true);

        rotation.setAnimationListener(new AnimationListener() {

        public void onAnimationEnd(Animation animation) {
            moveAnnimation();
        }
    }); 
```

移动动画（）

```
 private void moveAnnimation(){

    TranslateAnimation moveLefttoRight = new TranslateAnimation(0, 2000, 0, 0);
        moveLefttoRight.setDuration(1000);
        moveLefttoRight.setFillAfter(true);

        moveLefttoRight.setAnimationListener(new AnimationListener() {

        public void onAnimationStart(Animation animation) {
            // TODO Auto-generated method stub

        }

        public void onAnimationRepeat(Animation animation) {
            // TODO Auto-generated method stub

        }

        public void onAnimationEnd(Animation animation) {
            // TODO Auto-generated method stub

        }
    });

    image.startAnimation(moveLefttoRight);
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-10T09:20:09.187

您需要`setFillAfter(true)`旋转和平移`Animation`对象。

[Animation.html#setFillAfter(boolean)](http://developer.android.com/reference/android/view/animation/Animation.html#setFillAfter%28boolean%29)

`If fillAfter is true, the transformation that this animation performed will persist when it is finished. Defaults to false if not set. Note that this applies to individual animations and when using an AnimationSet to chain animations.`

以下是我的代码，你需要 AnimationSet 来实现链接动画效果。

```
public class MainActivity extends Activity {

    ImageView image = null;

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);

        image = (ImageView)findViewById(R.id.imageview);

        animateImageView();
    }

    private void animateImageView() {
        AnimationSet set = new AnimationSet(true);
        set.setFillAfter(true);

        Animation rotation = AnimationUtils.loadAnimation(this, R.anim.rotation);
        TranslateAnimation moveLefttoRight = new TranslateAnimation(0, 200, 0, 0);
        moveLefttoRight.setDuration(1000);
        moveLefttoRight.setStartOffset(1000);

        set.addAnimation(rotation);
        set.addAnimation(moveLefttoRight);

        image.startAnimation( set );
    }   
} 
```*

# java - 如何使用三重 DES 加密照片/文件？（将被上传到投递箱）

> ID：11898139
> 
> 赞同：1
> 
> 时间：2012-08-10T08:40:10.923
> 
> 标签：java, android, encryption

我想知道如何加密最终将上传到保管箱的文件或照片。

由于我在网上进行了研究，并且仅设法找到仅加密密码的此代码（粘贴在底部），但我想知道如何加密最终将上传到保管箱中的文件或照片。

那么是否有关于如何编写使用三重 DES 加密文件的 java 编程（将在 Eclipse 软件上使用）的任何参考或帮助或指南？非常感谢。

```
package com.kushal.utils;

import java.security.spec.KeySpec;

import javax.crypto.Cipher;
import javax.crypto.SecretKey;
import javax.crypto.SecretKeyFactory;
import javax.crypto.spec.DESKeySpec;
import sun.misc.BASE64Decoder;
import sun.misc.BASE64Encoder;

public class DESEncryption {

private static final String UNICODE_FORMAT = "UTF8";
public static final String DES_ENCRYPTION_SCHEME = "DES";
private KeySpec myKeySpec;
private SecretKeyFactory mySecretKeyFactory;
private Cipher cipher;
byte[] keyAsBytes;
private String myEncryptionKey;
private String myEncryptionScheme;
SecretKey key;

public DESEncryption() throws Exception
{
    myEncryptionKey = "ThisIsSecretEncryptionKey";
    myEncryptionScheme = DES_ENCRYPTION_SCHEME;
    keyAsBytes = myEncryptionKey.getBytes(UNICODE_FORMAT);
    myKeySpec = new DESKeySpec(keyAsBytes);
    mySecretKeyFactory = SecretKeyFactory.getInstance(myEncryptionScheme);
    cipher = Cipher.getInstance(myEncryptionScheme);
    key = mySecretKeyFactory.generateSecret(myKeySpec);
}

/**
 * Method To Encrypt The String
 */
public String encrypt(String unencryptedString) {
    String encryptedString = null;
    try {
        cipher.init(Cipher.ENCRYPT_MODE, key);
        byte[] plainText = unencryptedString.getBytes(UNICODE_FORMAT);
        byte[] encryptedText = cipher.doFinal(plainText);
        BASE64Encoder base64encoder = new BASE64Encoder();
        encryptedString = base64encoder.encode(encryptedText);
    } catch (Exception e) {
        e.printStackTrace();
    }
    return encryptedString;
}
/**
 * Method To Decrypt An Ecrypted String
 */
public String decrypt(String encryptedString) {
    String decryptedText=null;
    try {
        cipher.init(Cipher.DECRYPT_MODE, key);
        BASE64Decoder base64decoder = new BASE64Decoder();
        byte[] encryptedText = base64decoder.decodeBuffer(encryptedString);
        byte[] plainText = cipher.doFinal(encryptedText);
        decryptedText= bytes2String(plainText);
    } catch (Exception e) {
        e.printStackTrace();
    }
    return decryptedText;
}
/**
 * Returns String From An Array Of Bytes
 */
private static String bytes2String(byte[] bytes) {
    StringBuffer stringBuffer = new StringBuffer();
    for (int i = 0; i &lt; bytes.length; i++) {
        stringBuffer.append((char) bytes[i]);
    }
    return stringBuffer.toString();
}

/**
 * Testing the DES Encryption And Decryption Technique
 */
public static void main(String args []) throws Exception
{
    DESEncryption myEncryptor= new DESEncryption();

    String stringToEncrypt="Sanjaal.com";
    String encrypted=myEncryptor.encrypt(stringToEncrypt);
    String decrypted=myEncryptor.decrypt(encrypted);

    System.out.println("String To Encrypt: "+stringToEncrypt);
    System.out.println("Encrypted Value :" + encrypted);
    System.out.println("Decrypted Value :"+decrypted);

}   

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-10T08:43:05.353

一个文件可能被读取为一串二进制数字（很多 1 和 0）。您可以读取文件，然后使用与密码相同的方式使用 DES 加密字符串，将结果输出到新文件。

解密将以相同的方式工作，读取加密文件，解密并输出到未加密的文件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-10T09:47:43.090

文件读取取自[这里](http://www.exampledepot.com/egs/java.io/file2bytearray.html)

```
public static byte[] encryptFile(String pFilePath, byte[] pKey) throws GeneralSecurityException, IOException
{
    File file = new File(pFilePath);
    long length = file.length();
    InputStream is = new FileInputStream(file);

    // You cannot create an array using a long type.
    // It needs to be an int type.
    // Before converting to an int type, check
    // to ensure that file is not larger than Integer.MAX_VALUE.
    if (length > Integer.MAX_VALUE) {
        // File is too large
    }

    // Create the byte array to hold the data
    byte[] bytes = new byte[(int)length];

    // Read in the bytes
    int offset = 0;
    int numRead = 0;
    while (offset < bytes.length
           && (numRead=is.read(bytes, offset, bytes.length-offset)) >= 0) {
        offset += numRead;
    }

    // Close the input stream and return bytes
    is.close();

    // Ensure all the bytes have been read in
    if (offset < bytes.length) {

        throw new IOException("Could not completely read file "+file.getName());
    }

    SecretKeyFactory lDESedeKeyFactory = SecretKeyFactory.getInstance("DESede");
    SecretKey kA = lDESedeKeyFactory.generateSecret(new DESedeKeySpec(pKey));

    IvParameterSpec lIVSpec = new IvParameterSpec(new byte[8]);
    Cipher desedeCBCCipher = Cipher.getInstance("DESede/CBC/PKCS5Padding");

    desedeCBCCipher.init(Cipher.ENCRYPT_MODE, kA, lIVSpec);
    byte[] encrypted = desedeCBCCipher.doFinal(bytes);

    return encrypted;
} 
```

# visual-studio-2010 - 为什么我不能在我的 edmx 上创建标量属性？

> ID：11898140
> 
> 赞同：0
> 
> 时间：2012-08-10T08:40:22.500
> 
> 标签：visual-studio-2010, edmx

我在 Visual Studio 的 edmx 编辑器中，我有一列要映射到新属性。

所以我右键单击我的实体 -> 添加 -> 新的标量属性。

而不是添加实体，IDE 转到映射详细信息窗口并选择我未映射的列。

你遇到过这种bug吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-04T19:57:01.590

保存您的模型。关闭 Visual Studio。启动 Visual Studio 并打开您的 edmx。

现在它应该可以工作了（为我做了。）

将其视为 Visual Studio 中的错误。

# iphone - 使用 NSURLConnection 时获取打开的端口

> ID：11898149
> 
> 赞同：0
> 
> 时间：2012-08-10T08:40:40.733
> 
> 标签：iphone, objective-c, ios, xcode, ipad

我可以在使用远程连接时获取端口号`NSURLConnection`，比如说远程端口是`HTTP(80)`，我怎么知道我的本地端口对？

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-10T08:47:35.917

这是不可能的。在 iOS 中无法访问 Netstat 信息。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-11T23:20:46.193

我还没有尝试过，但唯一可以帮助您的命令是“lsof -i”，它有时会向您显示应用程序和它们使用的 tcp 端口。

# jquery - 如何修复 jQuery 1.8 “不支持的伪”错误？

> ID：11898152
> 
> 赞同：3
> 
> 时间：2012-08-10T08:40:45.123
> 
> 标签：jquery, jquery-selectors, sizzle, gruntjs

我正在使用的插件依赖于`$(':animated')`，但由于我升级到 jQuery 1.8.0，这会引发错误：

> 未捕获的错误：语法错误，无法识别的表达式：不支持的伪：动画

作为 Sizzle 更改的一部分，jQuery 1.8.0 是否放弃了对这个自定义选择器的支持？我该如何解决？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-10T08:40:45.123

别担心，jQuery 1.8.0 仍然支持[自定义`$(':animated')`选择器](http://api.jquery.com/animated-selector/)。

然而，出乎你的意料，它不是 Sizzle（jQuery 的选择器引擎）的一部分。如果您使用的是自定义构建，请确保您不排除[定义](https://github.com/jquery/jquery/blob/95559f5117c8a21c1b8cc99f4badc320fd3dcbda/src/effects.js#L647-653)[选择器](https://github.com/jquery/jquery/blob/95559f5117c8a21c1b8cc99f4badc320fd3dcbda/src/effects.js#L647-653)`effects`的模块。[`:animated`](https://github.com/jquery/jquery/blob/95559f5117c8a21c1b8cc99f4badc320fd3dcbda/src/effects.js#L647-653)

例如，如果您之前使用此命令创建自定义 jQuery 构建：

```
grunt custom:-ajax,-deprecated,-effects 
```

您需要删除该`-effects`部分，如下所示：

```
grunt custom:-ajax,-deprecated 
```

否则`:animated`将不支持选择器。

# android - 如何将相机活动调用到另一个活动

> ID：11898155
> 
> 赞同：0
> 
> 时间：2012-08-10T08:40:46.903
> 
> 标签：android, eclipse

我正在做一个应用程序，它将让 imageButton 从我的项目中调用相机活动捕获图像并将捕获的图像返回给 imageButton。我的问题是我无法调用它不断收到所有这些错误的相机。

错误：

```
16:29:50.953: D/AndroidRuntime(644): Shutting down VM
08-10 16:29:50.953: W/dalvikvm(644): threadid=1: thread exiting with uncaught exception (group=0x40a13300)
08-10 16:29:51.003: E/AndroidRuntime(644): FATAL EXCEPTION: main
08-10 16:29:51.003: E/AndroidRuntime(644): java.lang.RuntimeException: Unable to start activity ComponentInfo{com.bodapps.kinkytimefree/com.bodapps.kinkytimefree.Player_at_3_Spinner_Menu}: java.lang.ClassCastException: android.widget.ImageView cannot be cast to android.widget.ImageButton
08-10 16:29:51.003: E/AndroidRuntime(644):  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2059)
08-10 16:29:51.003: E/AndroidRuntime(644):  at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2084)
08-10 16:29:51.003: E/AndroidRuntime(644):  at android.app.ActivityThread.access$600(ActivityThread.java:130)
08-10 16:29:51.003: E/AndroidRuntime(644):  at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1195)
08-10 16:29:51.003: E/AndroidRuntime(644):  at android.os.Handler.dispatchMessage(Handler.java:99)
08-10 16:29:51.003: E/AndroidRuntime(644):  at android.os.Looper.loop(Looper.java:137)
08-10 16:29:51.003: E/AndroidRuntime(644):  at android.app.ActivityThread.main(ActivityThread.java:4745)
08-10 16:29:51.003: E/AndroidRuntime(644):  at java.lang.reflect.Method.invokeNative(Native Method)
08-10 16:29:51.003: E/AndroidRuntime(644):  at java.lang.reflect.Method.invoke(Method.java:511)
08-10 16:29:51.003: E/AndroidRuntime(644):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:786)
08-10 16:29:51.003: E/AndroidRuntime(644):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:553)
08-10 16:29:51.003: E/AndroidRuntime(644):  at dalvik.system.NativeStart.main(Native Method)
08-10 16:29:51.003: E/AndroidRuntime(644): Caused by: java.lang.ClassCastException: android.widget.ImageView cannot be cast to android.widget.ImageButton
08-10 16:29:51.003: E/AndroidRuntime(644):  at com.bodapps.kinkytimefree.Player_at_3_Spinner_Menu.onCreate(Player_at_3_Spinner_Menu.java:150)
08-10 16:29:51.003: E/AndroidRuntime(644):  at android.app.Activity.performCreate(Activity.java:5008)
08-10 16:29:51.003: E/AndroidRuntime(644):  at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1079)
08-10 16:29:51.003: E/AndroidRuntime(644):  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2023)
08-10 16:29:51.003: E/AndroidRuntime(644):  ... 11 more
08-10 16:29:55.024: I/Process(644): Sending signal. PID: 644 SIG: 9 
```

代码：

```
package com.bodapps.kinkytimefree;

import android.app.Activity;
import android.content.Intent;
import android.graphics.Color;
import android.graphics.Typeface;
import android.media.MediaPlayer;
import android.os.Bundle;
import android.view.View;
import android.view.View.OnClickListener;
import android.view.animation.Animation;
import android.view.animation.AnimationUtils;
import android.widget.Button;
import android.widget.ImageButton;
import android.widget.ImageView;
import android.widget.TextView;

public class Player_at_3_Spinner_Menu extends Activity 
{

    //Spinners for Players
//  public Spinner spinner_1;
//  public Spinner spinner_2;
//  public Spinner spinner_3;

    //TextView for Players
    public TextView player_1;
    public TextView player_2;
    public TextView list_label;
    public Animation fade;

    //SFX
    public static MediaPlayer game_signal, BG;

    //Intent
    public Intent next_intent;

    //Button to Start
    private Button play_it;

    //For Displaying Text
    public String SUMMON_PICK_UP_1, SUMMON_PICK_UP_2, SUMMON_PICK_UP_3;

    //Integers
    public int waited;

    //Text Response from a Spinner
    public final static String EXTRA_NEXT_MESSAGE_1 = "com.bodapps.kinkytime.LABEL_2_1";
    public final static String EXTRA_NEXT_MESSAGE_2 = "com.bodapps.kinkytime.LABEL_2_2";

    private static final int GET_CODE = 0;

    //public ImageView image1, image2;
    public ImageButton image1, image2;

    @Override
    public void onCreate(Bundle savedInstanceState)
    {

        super.onCreate(savedInstanceState);
        setContentView(R.layout.players_3);

        //Setting the typeface. Put it before finding the ID of the text.
        Typeface type_face = Typeface.createFromAsset(this.getAssets(), "fonts/MA Sexy.ttf");

        //TextView Initialization
        player_1 = (TextView) findViewById(R.id.player_1_spinner);
        player_2 = (TextView) findViewById(R.id.player_2_spinner);
        list_label = (TextView) findViewById(R.id.textView1);
        play_it = (Button) findViewById(R.id.START_GAME);

        //Typeface Settings
        list_label.setTypeface(type_face);
        player_1.setTypeface(null, Typeface.BOLD);
        player_2.setTypeface(null, Typeface.BOLD);

        //Getting proportional size according to the screen resolution to get the right dimension.
        player_1.setTextSize(getResources().getDimension(R.dimen.textsize2));
        player_2.setTextSize(getResources().getDimension(R.dimen.textsize2));
        list_label.setTextSize(getResources().getDimension(R.dimen.textsize3));

        //Set the SFX
        game_signal = MediaPlayer.create(this, R.raw.female_sigh_moan);
        BG = MediaPlayer.create(this, R.raw.chill_out);

        //Play Sequence
        BG.setLooping(true); //No loop.
        BG.setVolume(22, 22); //Sets the loudness L/R.
        //BG.start();

        //Set intent.
        Intent intent = getIntent();
        next_intent = new Intent(Player_at_3_Spinner_Menu.this, Loading_Screen_to_Game.class);

        //Searching for ID... (Button)
        play_it = (Button) findViewById(R.id.START_GAME);

        //Edit Color for Buttons and Text Views
        play_it.setTextColor(Color.MAGENTA);
        play_it.setBackgroundColor(Color.DKGRAY);
        play_it.setTextSize(getResources().getDimension(R.dimen.textsize2));
        list_label.setTextColor(Color.YELLOW);

        //Adding listener to the button(s).
        play_it.setOnClickListener(new trigger_happy_start());

        //Retrieve the message.
        SUMMON_PICK_UP_1 = intent.getStringExtra(from_3_players.EXTRA_MESSAGE_1);
        SUMMON_PICK_UP_2 = intent.getStringExtra(from_3_players.EXTRA_MESSAGE_2);

        //Display the retrieved names.
        set_info_1(SUMMON_PICK_UP_1);
        set_info_2(SUMMON_PICK_UP_2);

        //Set the text for the next activity (KinkyTimeActivity.java).
        String label_2_1 = player_1.getText().toString();
        String label_2_2 = player_2.getText().toString();
        next_intent.putExtra(EXTRA_NEXT_MESSAGE_1, label_2_1);
        next_intent.putExtra(EXTRA_NEXT_MESSAGE_2, label_2_2);

        //Set Animation
        fade = AnimationUtils.loadAnimation(this, R.anim.fader);
        fade.setFillAfter(true);

        //images for the image avatar

        image1 = (ImageButton) findViewById(R.id.imageBoy);
        image2 = (ImageButton) findViewById(R.id.imageGirl);

    }

        public void handleClick(View v){

            Intent intent = new Intent();
            intent.setClass(this, Capture_Main_Activity.class);
            startActivityForResult(intent, GET_CODE);

        }

        public void handleClickOne(View v){
            Intent i = new Intent();
            i.setClass(this, Capture_Main_Activity.class);
            startActivityForResult(i, GET_CODE);
        }

        protected void onActivityResult(int requestCode, int resultCode, Intent data){
            super.onActivityResult(requestCode, resultCode, data);
            if(requestCode == GET_CODE)
            {
                if(resultCode == RESULT_OK)
                {
                    startActivity(getIntent());
                }
            }

        }

    //public void onClick(View v)
        //{

        //Call camera after info has been set

            //switch(v.getId()){

            //case R.id.imageBoy:

                //startActivity(new Intent(Player_at_3_Spinner_Menu.this, Capture_Main_Activity.class));

                //break;

            //case R.id.imageGirl:

                //startActivity(new Intent(Player_at_3_Spinner_Menu.this, Capture_Main_Activity.class));

                //break;
            //}
             //return;

            //}

    //Set for Name of Player 1
    public void set_info_1(String player1)
    {

        player_1.setText(SUMMON_PICK_UP_1);

    }

    //Set for Name of Player 2
    public void set_info_2(String player2)
    {

        player_2.setText(SUMMON_PICK_UP_2);

    }

    private class trigger_happy_start implements OnClickListener
    {

        public void onClick(View v) 
        {
            //BG.stop();

            //Play Sequence
            game_signal.setLooping(false); //No loop.
            game_signal.setVolume(55, 55); //Sets the loudness L/R.
            //game_signal.start();

            //Logo played by the animation.
            player_1.startAnimation(fade);
            player_2.startAnimation(fade);
            list_label.startAnimation(fade);
            play_it.startAnimation(fade);

            Thread entering = new Thread()
            {

                @Override
                public void run()
                {

                    try
                    {
                        waited = 0;

                        while(waited < 3000) //Waits for 3.0 seconds.
                        {
                            sleep(100);
                            waited += 100;
                        }

                    }

                    catch(InterruptedException e)
                    {
                        //Do nothing.
                    }

                    finally
                    {
                        finish();
                        startActivity(next_intent);;
                    }

                }

            };

            entering.start();

        }

    }       
} 
```

XML:

```
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="match_parent" >

    <ImageView
        android:id="@+id/imageGirl"
        android:layout_width="match_parent"
        android:layout_height="match_parent"
        android:src="@drawable/girl_6" />

    <TextView
        android:id="@+id/textView1"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignParentLeft="true"
        android:layout_alignParentTop="true"
        android:layout_marginTop="68dp"
        android:text="List of Players:"
        android:textSize="15sp" />

    <LinearLayout
        android:id="@+id/spinner_layout"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:layout_alignParentLeft="true"
        android:layout_below="@+id/textView1"
        android:layout_marginTop="20dp"
        android:orientation="vertical" >

        <TextView
            android:id="@+id/player_1_spinner"
            android:layout_width="match_parent"
            android:layout_height="wrap_content"
            android:layout_weight="1"
            android:text="empty"
            android:textSize="15sp" />

        <TextView
            android:id="@+id/player_2_spinner"
            android:layout_width="match_parent"
            android:layout_height="wrap_content"
            android:layout_weight="1"
            android:text="empty"
            android:textSize="15sp" />

    </LinearLayout>

    <Button
        android:id="@+id/START_GAME"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignParentBottom="true"
        android:layout_centerHorizontal="true"
        android:layout_marginBottom="51dp"
        android:text="START GAME" />

    <LinearLayout
        android:layout_width="wrap_content"
        android:layout_height="wrap_content" >

    </LinearLayout>

    <ImageButton
        android:id="@+id/imageBoy"
        android:layout_width="66dp"
        android:layout_height="66dp"
        android:layout_alignBottom="@+id/spinner_layout"
        android:layout_alignParentRight="true"
        android:src="@drawable/profilepicboy2" 
        android:onClick="handleClickOne"/>

    <ImageButton
        android:id="@+id/imageGirl"
        android:layout_width="66dp"
        android:layout_height="66dp"
        android:layout_alignParentRight="true"
        android:layout_below="@+id/spinner_layout"
        android:src="@drawable/profilepicboy2"
        android:onClick="handeClick" />

</RelativeLayout> 
```

相机活动代码：

```
package com.bodapps.kinkytimefree;

import java.io.File;
import java.io.FileOutputStream;
import java.util.ArrayList;
import java.util.List;

import android.app.Activity;
import android.app.AlertDialog;
import android.content.ActivityNotFoundException;
import android.content.ComponentName;
import android.content.DialogInterface;
import android.content.Intent;
import android.content.pm.ResolveInfo;
import android.graphics.Bitmap;
import android.graphics.Bitmap.CompressFormat;
import android.graphics.Path;
import android.net.Uri;
import android.os.Bundle;
import android.os.Environment;
import android.provider.MediaStore;
import android.view.View;
import android.widget.ArrayAdapter;
import android.widget.Button;
import android.widget.ImageView;
import android.widget.Toast;

public class Capture_Main_Activity extends Activity 
{

    //Variables needed for the camera capture.
    private Uri mImageCaptureUri;
    private ImageView mImageView;
    private String path;
    private Bitmap bitmap;

    //Camera Status
    private static final int PICK_FROM_CAMERA = 1;
    private static final int CROP_FROM_CAMERA = 2;
    private static final int PICK_FROM_FILE = 3;

    @Override
    public void onCreate(Bundle savedInstanceState) 
    {
        super.onCreate(savedInstanceState);

        setContentView(R.layout.capture_layout);

        //Array for the camera images.
        final String [] items           = new String [] {"Take from camera", "Select from gallery"};                
        ArrayAdapter<String> adapter    = new ArrayAdapter<String> (this, android.R.layout.select_dialog_item,items);
        AlertDialog.Builder builder     = new AlertDialog.Builder(this);

        builder.setTitle("Select Image");
        builder.setAdapter( adapter, new DialogInterface.OnClickListener() 
        {
            public void onClick( DialogInterface dialog, int item ) 
            { 
                //Pick an image taken from the camera.
                if (item == 0) 
                {
                    Intent intent    = new Intent(MediaStore.ACTION_IMAGE_CAPTURE);

                    mImageCaptureUri = Uri.fromFile(new File(Environment.getExternalStorageDirectory(),
                                       "tmp_avatar_" + String.valueOf(System.currentTimeMillis()) + ".jpg"));

                    intent.putExtra(android.provider.MediaStore.EXTRA_OUTPUT, mImageCaptureUri);

                    try {
                        intent.putExtra("return-data", true);

                        startActivityForResult(intent, PICK_FROM_CAMERA);
                    } catch (ActivityNotFoundException e) {
                        e.printStackTrace();
                    }
                } else { //pick from file
                    Intent intent = new Intent();

                    intent.setType("image/*");
                    intent.setAction(Intent.ACTION_GET_CONTENT);

                    startActivityForResult(Intent.createChooser(intent, "Complete action using"), PICK_FROM_FILE);
                }
            }
        } );

        final AlertDialog dialog = builder.create();

        Button button   = (Button) findViewById(R.id.btn_crop);
        mImageView      = (ImageView) findViewById(R.id.iv_photo); //Checking for player one's image.

        button.setOnClickListener(new View.OnClickListener() {  
            public void onClick(View v) {
                dialog.show();
            }
        });
    }

    @Override
    protected void onActivityResult(int requestCode, int resultCode, Intent data) {
        if (resultCode != RESULT_OK) return;

        switch (requestCode) {
            case PICK_FROM_CAMERA:
                doCrop();

                break;

            case PICK_FROM_FILE: 
                mImageCaptureUri = data.getData();

                doCrop();

                break;          

            case CROP_FROM_CAMERA:          
                Bundle extras = data.getExtras();

                if (extras != null) {               
                    Bitmap photo = extras.getParcelable("data");
                    //saveBitmapToFile("/sdcard/bodapps/cropped_img.jpg", photo);

                    //Place player's image here!
                    mImageView.setImageBitmap(photo);
                }

                File f = new File(mImageCaptureUri.getPath());            

                if (f.exists()) f.delete();

                break;

        }
    }

    //private void saveBitmapToFile(String string, Bitmap photo) {

    //  File file = new File(path);
        //boolean res = false; if (!file.exists()) {
        //try {
        //FileOutputStream fos = new FileOutputStream(file); res = bitmap.compress(CompressFormat.JPEG, 100, fos); fos.close();
    //  } catch (Exception e) { }
        //} return;
        //}

    //}

    private void doCrop() 
    {
        final ArrayList<CropOption> cropOptions = new ArrayList<CropOption>();

        Intent intent = new Intent("com.android.camera.action.CROP");
        intent.setType("image/*");

        List<ResolveInfo> list = getPackageManager().queryIntentActivities( intent, 0 );

        int size = list.size();

        if (size == 0) 
        {           
            Toast.makeText(this, "Cannot find image crop app.", Toast.LENGTH_SHORT).show();

            return;
        } 
        else 
        {
            intent.setData(mImageCaptureUri);

            intent.putExtra("outputX", 200);
            intent.putExtra("outputY", 200);
            intent.putExtra("aspectX", 1);
            intent.putExtra("aspectY", 1);
            intent.putExtra("scale", true);
            intent.putExtra("return-data", true);

            if (size == 1) 
            {
                Intent i        = new Intent(intent);
                ResolveInfo res = list.get(0);

                i.setComponent( new ComponentName(res.activityInfo.packageName, res.activityInfo.name));

                startActivityForResult(i, CROP_FROM_CAMERA);
            } 
            else 
            {
                for (ResolveInfo res : list) 
                {
                    final CropOption co = new CropOption();

                    co.title    = getPackageManager().getApplicationLabel(res.activityInfo.applicationInfo);
                    co.icon     = getPackageManager().getApplicationIcon(res.activityInfo.applicationInfo);
                    co.appIntent= new Intent(intent);

                    co.appIntent.setComponent( new ComponentName(res.activityInfo.packageName, res.activityInfo.name));

                    cropOptions.add(co);
                }

                CropOptionAdapter adapter = new CropOptionAdapter(getApplicationContext(), cropOptions);

                AlertDialog.Builder builder = new AlertDialog.Builder(this);
                builder.setTitle("Choose Crop App");

                builder.setAdapter( adapter, new DialogInterface.OnClickListener() 
                {

                    public void onClick( DialogInterface dialog, int item ) 
                    {
                        startActivityForResult( cropOptions.get(item).appIntent, CROP_FROM_CAMERA);
                    }

                });

                builder.setOnCancelListener( new DialogInterface.OnCancelListener() 
                {
                    public void onCancel( DialogInterface dialog ) 
                    {

                        if (mImageCaptureUri != null ) {
                            getContentResolver().delete(mImageCaptureUri, null, null );
                            mImageCaptureUri = null;
                        }

                    }
                } );

                AlertDialog alert = builder.create();

                alert.show();
            }
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-10T09:25:54.773

```
package com.bodapps.kinkytimefree;

import android.app.Activity;
import android.content.Intent;
import android.graphics.Color;
import android.graphics.Typeface;   
import android.media.MediaPlayer;
import android.os.Bundle;
import android.view.View;
import android.view.View.OnClickListener;
import android.view.animation.Animation;
import android.view.animation.AnimationUtils;
import android.widget.Button;
import android.widget.ImageButton;
//import android.widget.ImageView;
import android.widget.TextView;

public class Player_at_3_Spinner_Menu extends Activity 
{

    //Spinners for Players
//  public Spinner spinner_1;
//  public Spinner spinner_2;
//  public Spinner spinner_3;

    //TextView for Players
    public TextView player_1;
    public TextView player_2;
    public TextView list_label;
    public Animation fade;

    //SFX
    public static MediaPlayer game_signal, BG;

    //Intent
    public Intent next_intent;

    //Button to Start
    private Button play_it;

    //For Displaying Text
    public String SUMMON_PICK_UP_1, SUMMON_PICK_UP_2, SUMMON_PICK_UP_3;

    //Integers
    public int waited;

    //Text Response from a Spinner
    public final static String EXTRA_NEXT_MESSAGE_1 = "com.bodapps.kinkytime.LABEL_2_1";
    public final static String EXTRA_NEXT_MESSAGE_2 = "com.bodapps.kinkytime.LABEL_2_2";

    private static final int GET_CODE = 0;

    //public ImageView image1, image2;
    public ImageButton image1, image2;

    @Override
    public void onCreate(Bundle savedInstanceState)
    {

        super.onCreate(savedInstanceState);
        setContentView(R.layout.players_3);

        //Setting the typeface. Put it before finding the ID of the text.
        Typeface type_face = Typeface.createFromAsset(this.getAssets(), "fonts/MA Sexy.ttf");

        //TextView Initialization
        player_1 = (TextView) findViewById(R.id.player_1_spinner);
        player_2 = (TextView) findViewById(R.id.player_2_spinner);
        list_label = (TextView) findViewById(R.id.textView1);
        play_it = (Button) findViewById(R.id.START_GAME);

        //Typeface Settings
        list_label.setTypeface(type_face);
        player_1.setTypeface(null, Typeface.BOLD);
        player_2.setTypeface(null, Typeface.BOLD);

        //Getting proportional size according to the screen resolution to get the right dimension.
        player_1.setTextSize(getResources().getDimension(R.dimen.textsize2));
        player_2.setTextSize(getResources().getDimension(R.dimen.textsize2));
        list_label.setTextSize(getResources().getDimension(R.dimen.textsize3));

        //Set the SFX
        game_signal = MediaPlayer.create(this, R.raw.female_sigh_moan);
        BG = MediaPlayer.create(this, R.raw.chill_out);

        //Play Sequence
        BG.setLooping(true); //No loop.
        BG.setVolume(22, 22); //Sets the loudness L/R.
        //BG.start();

        //Set intent.
        Intent intent = getIntent();
        next_intent = new Intent(Player_at_3_Spinner_Menu.this, Loading_Screen_to_Game.class);

        //Searching for ID... (Button)
        play_it = (Button) findViewById(R.id.START_GAME);

        //Edit Color for Buttons and Text Views
        play_it.setTextColor(Color.MAGENTA);
        play_it.setBackgroundColor(Color.DKGRAY);
        play_it.setTextSize(getResources().getDimension(R.dimen.textsize2));
        list_label.setTextColor(Color.YELLOW);

        //Adding listener to the button(s).
        play_it.setOnClickListener(new trigger_happy_start());

        //Retrieve the message.
        SUMMON_PICK_UP_1 = intent.getStringExtra(from_3_players.EXTRA_MESSAGE_1);
        SUMMON_PICK_UP_2 = intent.getStringExtra(from_3_players.EXTRA_MESSAGE_2);

        //Display the retrieved names.
        set_info_1(SUMMON_PICK_UP_1);
        set_info_2(SUMMON_PICK_UP_2);

        //Set the text for the next activity (KinkyTimeActivity.java).
        String label_2_1 = player_1.getText().toString();
        String label_2_2 = player_2.getText().toString();
        next_intent.putExtra(EXTRA_NEXT_MESSAGE_1, label_2_1);
        next_intent.putExtra(EXTRA_NEXT_MESSAGE_2, label_2_2);

        //Set Animation
        fade = AnimationUtils.loadAnimation(this, R.anim.fader);
        fade.setFillAfter(true);

        //images for the image avatar

        ImageButton image1 = (ImageButton) findViewById(R.id.imageBoy);

        ImageButton image2 = (ImageButton) findViewById(R.id.imageGirl);

    }

        public void handleClick(View v){

            Intent intent = new Intent();
            intent.setClass(this, Capture_Main_Activity.class);
            startActivityForResult(intent, GET_CODE);

        }

        public void handleClickOne(View v){
            Intent i = new Intent();
            i.setClass(this, Capture_Main_Activity.class);
            startActivityForResult(i, GET_CODE);
        }

        protected void onActivityResult(int requestCode, int resultCode, Intent data){
            super.onActivityResult(requestCode, resultCode, data);
            if(requestCode == GET_CODE)
            {
                if(resultCode == RESULT_OK)
                {
                    startActivity(getIntent());
                }
            }

        }

    //public void onClick(View v)
        //{

        //Call camera after info has been set

            //switch(v.getId()){

            //case R.id.imageBoy:

                //startActivity(new Intent(Player_at_3_Spinner_Menu.this, Capture_Main_Activity.class));

                //break;

            //case R.id.imageGirl:

                //startActivity(new Intent(Player_at_3_Spinner_Menu.this, Capture_Main_Activity.class));

                //break;
            //}
             //return;

            //}

    //Set for Name of Player 1
    public void set_info_1(String player1)
    {

        player_1.setText(SUMMON_PICK_UP_1);

    }

    //Set for Name of Player 2
    public void set_info_2(String player2)
    {

        player_2.setText(SUMMON_PICK_UP_2);

    }

    private class trigger_happy_start implements OnClickListener
    {

        public void onClick(View v) 
        {
            //BG.stop();

            //Play Sequence
            game_signal.setLooping(false); //No loop.
            game_signal.setVolume(55, 55); //Sets the loudness L/R.
            //game_signal.start();

            //Logo played by the animation.
            player_1.startAnimation(fade);
            player_2.startAnimation(fade);
            list_label.startAnimation(fade);
            play_it.startAnimation(fade);

            Thread entering = new Thread()
            {

                @Override
                public void run()
                {

                    try
                    {
                        waited = 0;

                        while(waited < 3000) //Waits for 3.0 seconds.
                        {
                            sleep(100);
                            waited += 100;
                        }

                    }

                    catch(InterruptedException e)
                    {
                        //Do nothing.
                    }

                    finally
                    {
                        finish();
                        startActivity(next_intent);;
                    }

                }

            };

            entering.start();

        }

    }

} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-10T08:43:52.983

在您编写的代码部分

```
 image2 = (ImageButton) findViewById(R.id.imageGirl); 
```

但是在您定义的 XML 中

```
<ImageView
    android:id="@+id/imageGirl"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:src="@drawable/girl_6" /> 
```

在这里，您将 ImageView 转换为不允许的 ImageButton 并因此引发异常。

您应该将 XML 中的 ImageView 更改为 ImageButton。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-10T08:44:08.733

问题是您`ImageView`在 xml 和`ImageButton`活动中使用。
该错误告诉您不要强制`ImageView`转换为`ImageButton`.

尝试在 xml 中或在活动中更改它。

# google-chrome - Chrome 不尊重协议相关的 URL 引用？

> ID：11898160
> 
> 赞同：4
> 
> 时间：2012-08-10T08:41:28.660
> 
> 标签：google-chrome, https, protocol-relative

我今天第一次注意到 Chrome（并且只有 Chrome）不关注协议相关的 URL 引用。例如：

```
<img src='//www.example.net/image.png /> 
```

当它出现在 https 页面上时，应该作为 https 来源，当它出现在 http 页面上时，应该作为 http 来源。IE 和 FF 仍在以这种方式工作，但 Chrome 现在仅将其作为

```
//www.example.net/image.png 
```

因此，当它出现在 https 页面上时，该页面变得不安全。最近还有人注意到这个吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-07-04T22:10:36.640

Chrome 确实尊重协议相对 URL，查看您的示例它是格式错误的（您的路径上没有关闭 ' 。

# php - 快速计算每个产品过去 6、3、1 个月的平均月销售额

> ID：11898165
> 
> 赞同：0
> 
> 时间：2012-08-10T08:41:51.533
> 
> 标签：php, mysql, sum, average

我正在使用 PHP/MySQL

我有大约 2,000 种产品。我必须计算每种产品过去 6、3、1 个月的平均月销售额，并立即在页面中显示...

目前我有以下代码（每个产品的循环）：

```
$past_month_sales = $this->SalesPerProduct->getSalesForMonthYear( $acc_code,
                                                                $item_code, $past_month[0],
                                                                $past_month[1] );

$past_two_months_sales = $this->SalesPerProduct->getSalesForMonthYear( $acc_code,
                                                                    $item_code, $past_two_months[0],
                                                                    $past_two_months[1] );

$past_three_months_sales = $this->SalesPerProduct->getSalesForMonthYear( $acc_code,
                                                                    $item_code, $past_three_months[0],
                                                                    $past_three_months[1] );

$past_four_months_sales = $this->SalesPerProduct->getSalesForMonthYear( $acc_code,
                                                                    $item_code, $past_four_months[0],
                                                                    $past_four_months[1] );

$past_five_months_sales = $this->SalesPerProduct->getSalesForMonthYear( $acc_code,
                                                                    $item_code, $past_five_months[0],
                                                                    $past_five_months[1] );

$past_six_months_sales = $this->SalesPerProduct->getSalesForMonthYear( $acc_code,
                                                                    $item_code, $past_six_months[0],
                                                                    $past_six_months[1] );

//for past 3 months
if( $past_month_sales == 0
    || $past_two_months_sales == 0
    || $past_three_months_sales == 0){

    $past_three_sales_ave = "n/a";

}else{

    $past_three_sales_ave = round( ( $past_month_sales 
                        + $past_two_months_sales
                        + $past_three_months_sales )
                        / 3 );
}

//for past 6 months
if( $past_month_sales == 0
    || $past_two_months_sales == 0
    || $past_three_months_sales == 0
    || $past_four_months_sales == 0
    || $past_five_months_sales == 0
    || $past_six_months_sales == 0){

    $past_six_sales_ave = "n/a";

}else{
    $past_six_sales_ave = round( ( $past_month_sales
                        + $past_two_months_sales
                        + $past_three_months_sales
                        + $past_four_months_sales
                        + $past_five_months_sales
                        + $past_six_months_sales )
                        / 6 );
} 
```

但是上面的代码很慢，即使是 100 个产品也需要很长时间才能加载......

我的 getSalesForMonthYear 函数如下所示：

```
function getSalesForMonthYear( $account_code, $item_code, $month, $year ){
    $sql = "select 
                SalesPerProduct.sales_value
            from 
                sales_per_products as SalesPerProduct
            where
                account_code = '{$account_code}' and
                item_code = '{$item_code}' and
                month = '{$month}' and
                year = '{$year}'";

    $val = $this->query($sql);

    if( empty( $val[0]['SalesPerProduct']['sales_value'] ) ){
        $val = 0;
    }else{
        $val = $val[0]['SalesPerProduct']['sales_value'];
    }
    return $val;
} 
```

知道这怎么能快吗？蒂亚！！！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-10T08:51:31.120

您不需要每次点击时都更新数据，因此构建一个缓存表来保存数据并在您想要的每个时间段更新

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-10T08:49:57.207

您应该查看像 AVG 这样的 SQL 命令

[http://www.w3schools.com/sql/sql_func_avg.asp](http://www.w3schools.com/sql/sql_func_avg.asp)

在数据库端进行计算总是更好。您编写的任何代码都不会比在提取之前执行它更快。

看看你有索引你的数据库好，所以它知道做什么和什么时候！

这是你能做的第一个！

我认为它会在这一点上为你解决很多问题。

如果你想再进一步，你可以检查一下。

[http://www.sqlteam.com/article/intro-to-user-defined-functions-updated](http://www.sqlteam.com/article/intro-to-user-defined-functions-updated) http://www.w3schools.com/sql/sql_view.asp

您可以创建一个函数并在一个 sql 查询中提取所有平均调用的视图。无需多个连接。每个连接都会有一些启动开销，等等，您可以通过在数据库端执行所有操作来再次绕过！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-10T08:55:30.270

也许使用一般功能，不要检查每个月。并尝试使用几个月的索引和 sales_value

```
/*
   $account_code - account
   $item_code - item
   $start_month - starting month - NOTE: this is integer: 1,2,....,10,11,12
   $months - number of months to query
   $year - the year
   and SUM to auto calculate the sales_value
*/
function getSalesForMonths( $account_code, $item_code, $start_month, $months, $year ){
    $addQuery = '';
    $finalQuery = '';

    for($i = 1; $i<=$months; $i++){
         $addQuery .= 'month='.($start_month+$i);
         if($i<$months){ $addQuery .= ' OR '; }
    }

    if($months > 1){
        $finalQuery = '('.$addQuery.')';
    } else {
        $finalQuery = $addQuery;
    }

    $sql = "select 
            SUM(SalesPerProduct.sales_value)
        from 
            sales_per_products as SalesPerProduct
        where
            account_code = '{$account_code}' and
            item_code = '{$item_code}' and
            ".$finalQuery." and
            year = '{$year}'";

    $val = $this->query($sql);

    if( empty( $val[0]['SalesPerProduct']['sales_value'] ) ){
        $val = 0;
    }else{
        $val = $val[0]['SalesPerProduct']['sales_value'];
    }
    return $val;
} 
```

# java - 如何在任何其他类构造函数被调用之前调用 Spring setter 方法？

> ID：11898172
> 
> 赞同：2
> 
> 时间：2012-08-10T08:42:07.163
> 
> 标签：java, spring, dependency-injection

我有一个动作类，该类将有一个 BOC 对象，该对象将填充 Spring Dependency Injection。下面显示了示例代码：

```
public class ActionCls {
  private BOC theBoc = null;

  /*** theBoc getter / setter ***/
} 
```

如果我想调用`thefunc`属于构造函数`BOC`内部的成员函数，例如：`ActionCls`

```
public class ActionCls {
   private BOC theBoc = null;

   ActionCls() {
      theBoc.thefunc();
   }
} 
```

将抛出运行时错误，说明`theBoc`为空。我确实尝试`init-method`在这样的弹簧配置中使用：

`<bean id="theBoc" class="com.huahsin68.BOC" init-method="thefunc"></bean>`

无论如何，这无济于事，因为即使`thefunc`首先调用它，但`theBoc`setter 仅在`ActionCls`构造函数之后调用。这是一种调用`theBoc`setter 1st然后只调用`ActionCls`构造函数的方法吗？所以这`theBoc`不是空的，我可以调用`thefunc`.

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-10T08:46:21.400

您不能期望在调用其构造函数之前在类上调用 getter 或 setter。你想要达到的目标是不可能的。您可以更好地创建一个参数化构造函数，在其中使用一些参数初始化 theBoc，使用`constuctor-arg`ActionCls bean 上的参数，然后调用该方法：

```
public class ActionCls {
   private BOC theBoc = null;

   ActionCls(BOC theBoc) {
      this.theBoc = theBoc
      theBoc.thefunc();
   }
} 
```

然后你可以像这样定义你的构造函数arg：

```
<bean id="actionCls" class="foo.bar.ActionCls">
        <constructor-arg ref="boc"/>
</bean> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-10T09:18:21.310

虽然您不能做您要求的事情（在构造函数中调用属性的方法，而属性是通过 mutator 设置的），但您可以使用`@PostConstruct`让 Spring 在您的 bean 上调用一个方法。正确组装。

```
class ActionCls {
  @Inject
  private BOC boc;

  @PostConstruct
  public void postConstruct() {
    boc.func();
  }
} 
```

请参阅[http://docs.oracle.com/javaee/5/api/javax/annotation/PostConstruct.html](http://docs.oracle.com/javaee/5/api/javax/annotation/PostConstruct.html)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-10T09:07:27.817

除了 baba 的回答，您可以使用`init-method`(or `@PostConstruct`) 来解决这个问题，但应该使用 on`ActionCls`而不是 on `BOC`：

```
public class ActionCls {
    ...
    public void init() {
       theBoc.thefunc();
    }
} 
```

.

```
<bean ... class="com.huahsin68.ActionCls" init-method="init">...</bean> 
```

我认为这种方法更优雅，因为 init 方法保证在 bean 完全初始化时执行，因此它不依赖于您用于依赖项的注入类型（setter 或构造函数）。

# mysql - 查询具有不同值的相同列

> ID：11898173
> 
> 赞同：1
> 
> 时间：2012-08-10T08:42:10.823
> 
> 标签：mysql

我只是 MySql 编程的新手，我正在创建一个项目来提高我的技能。我有一个名为`tblRecipe`列的表`RecipeId, RecipeName and Instructions`。另一个表被称为`tblIngredients`具有列`IngredientId,RecipeId, IngredientName`。

现在例如，RecipeOne 需要成分一和成分二来制作，食谱二需要成分一、成分二和成分三来制作。我的程序要求输入的成分名称，所以当我输入成分一和成分二时，它应该给我返回结果食谱一。

这是我的代码

```
Select Recipename,Instructions 
from tblREcipe where RecipeId in 
         (select recipeID 
         from tblIngredients 
         where Ingredientname in('IngredientOne','IngredientTWo')
         ); 
```

我知道 IN 运算符就像说匹配以下任何内容。所以有了这个代码，它给了我两个食谱。我正在寻找相当于 AND 的东西。我尝试了“Ingredientname =ALL(in('IngredientOne','IngredientTwo'))”，但它没有返回任何行。

如果这只是一个练习项目，我愿意接受任何更改，例如重组表格，因为这只是一个练习项目。希望很快收到你们的消息，并提前谢谢你们。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-10T08:47:35.473

您还需要`count`将记录的实例数与成分数相匹配。像下面这个：

```
Select a.Recipename, 
       a.Instructions 
FROM   tblREcipe a INNER JOIN
         (
             SELECT   recipeID,
                      COUNT(IngredientId)
             FROM     tblIngredients 
             WHERE    Ingredientname IN ('IngredientOne', 'IngredientTWo')
             GROUP BY recipeID
             HAVING   COUNT(IngredientId) = 2    -- the number of ingredients
                                                 -- should somehow dynamic
         ) b ON a.recipeID = b.recipeID 
```

# visual-studio - 如何在每次测试运行时重新部署、重新创建数据库

> ID：11898174
> 
> 赞同：6
> 
> 时间：2012-08-10T08:42:12.767
> 
> 标签：visual-studio, mstest, visual-studio-2012, sql-server-2012

目前我正在使用 Visual Studio 2012 RC 和 SQL Server 2012 RTM。

我想知道如何为每次测试运行重新部署/重新创建测试数据库。

请记住，我有一个使用 Visual Studio 2012 模板的数据库的 SQL Server 数据库项目。

实际上我不太确定我的想法，但是**.testsettings**文件有**Setup 和 cleanup scripts**。这是要走的路吗？例如，一个 PowerShell 脚本读取数据库项目生成的脚本并针对数据库执行它？

我想有更好的方法可以做到这一点，它应该是一个开箱即用的解决方案，但我忽略了它，*谷歌*并没有帮助我找到正确的解决方案。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-13T03:06:46.510

如前所述，您可能希望使用 VS 2012 .Local.testsettings > Setup and Cleanup 脚本来创建/拆除 SQL Server 数据库。

![在此处输入图像描述](../Images/57635b1b75e34cecfc5e0d86035b2f94.png)

对于脚本，您可能希望将 powershell 与 .dacpac（而不仅仅是 T-SQL 脚本）一起使用，因为您使用的是 SSDT 项目。这是一些示例代码的[链接](http://blogs.msdn.com/b/managingsql/archive/2010/04/28/dac-powershell-samples.aspx)- 特别是您可能想查看“Deploy-Dac”命令。

如果您不熟悉 .dacpacs 作为 SSDT 创建的数据库项目的（构建）输出，请查看此参考[链接](http://msdn.microsoft.com/en-us/library/ee210546.aspx)。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-10-22T14:48:11.540

编辑：虽然这不能以普通的 SQL Server 方式回答问题，但简单的实体框架方法如下：我发现我可以通过使用 DbContext.Database.CreateIfNotExists() 每次正确地创建和销毁我的数据库和我测试的设置和清理阶段中的 DbContext.Database.Delete() 方法。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-15T17:12:27.667

最快的解决方案虽然有点小技巧，但非常简单。您可以将调试选项卡下的 DB Projects 属性设置为“始终重新创建 DB”。然后单击两次进行测试，进行调试/构建，然后运行所有测试。您应该在 localDB 上获得一个新构建的数据库，供您运行测试。您还可以将调试数据库的目标（同样是数据库项目属性）更改为您想要的任何内容，以便您可以部署到 .dacpac 或现有的 SQL 数据库或任何地方。这意味着分两步进行测试，如果你的构建很长，可能会很烦人，但它确实有效。否则，我相信脚本是您唯一的选择。

# c# - 不使用 [HostType("ASP.NET")] 测试 ASP.NET 网页

> ID：11898181
> 
> 赞同：2
> 
> 时间：2012-08-10T08:42:47.190
> 
> 标签：c#, asp.net, testing, tdd, asp.net-webpages

所以我试图在一个 ASP.NET 网页项目中高效地练习 TDD，并且每次我想运行我的测试时都启动一个服务器，它不是很快。所以我试图找到一种不使用 [HostType("ASP.NET")] 属性来进行测试的方法，但总是会出现一些错误。我们正在为资源文件使用 App_GlobalResources 文件夹，这是问题之一；删除属性时，只保留[TestMethod]（使用MStest），找不到资源。所以我！注意假设它无法找到资源程序集。

那么，以前有人这样做过吗？有什么经验吗？

和评论说“你为什么不直接转换为 MVC”，这只是一个大应用程序和很少的时间。也许它会在几年内发生，也许更多，也许永远不会。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-10T08:52:16.390

我测试 ASP.NET Web 应用程序的经历很痛苦（看起来你也是！）*抵制 MVC 评论*

我最好的建议是每次触摸某个区域时都采取一些小步骤，以使其更易于测试。例如，对于任何代码位，您都可以将其提取到您可以引用的自己的程序集中。

第一个候选人是你的资源文件。然后，您的测试可以引用该卫星程序集，而无需跳过“App_”箍。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-10T10:45:34.843

我采用的方法涉及为每个页面创建一个演示者类。您创建一个界面，该页面使用演示者控制 UI 所需的方法和属性来实现该界面。您的所有逻辑都在演示器中，以及对界面的引用。页面引用演示者并将其自身传入。

您获得的好处是页面现在应该只包含使 UI 工作的代码。演示者完成了大部分工作。因为它可以访问 UI，所以通过接口它可以控制 UI。因为访问是通过接口进行的，所以您可以使用模拟 UI 来测试演示者。

我发现我的页面被大大简化了，支持应用程序逻辑的代码和使 UI 工作的代码之间的差异更大。它还使得引入服务类和 IoC 变得更简单，这对于 webforms 来说并不总是最简单的。

# matrix - 如何在Processing中绘制两个不同的矩阵

> ID：11898183
> 
> 赞同：0
> 
> 时间：2012-08-10T08:42:57.037
> 
> 标签：matrix, drawing, delay, processing

我是处理新手。为什么我没有看到绘制的第一个矩阵？我似乎只看到延迟之后的矩阵，而不是之前的矩阵。我的最终目标是观察矩阵如何随时间步长变化。

```
// Number of columns and rows in the grid 
int[][] myArray = {  {0, 1, 2, 3},
                     {3, 2, 1, 0},
                     {3, 5, 6, 1},
                     {3, 8, 3, 4}  };

void setup() {   
  size(200,200); 
}

void draw() {   
  background(204);   
  for (int i = 0; i < 4; i++) {
    for (int j = 0; j < 4; j++) { 
      rect(20+30*j,30+30*i,3,3);
    }   
  }

  delay(2500);
  background(204);

  for (int i = 0; i < 4; i++) {
    for (int j = 0; j < 4; j++) { 
      rect(40+30*j,50+30*i,7,7);
    }   
  }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-10T19:58:47.157

您的`myArray`变量具有误导性，它似乎没有在任何地方使用。基本上你想在值之间进行动画/插值。您的代码在绘图循环中执行此操作：

```
clear the background
draw 16 squares
wait 2500 ms
clear the background
draw 16 squares 
```

你会在 2500 毫秒后变成小方块，然后就是更大的方块，就是这样。

想要做的事情可以通过多种方式实现，从简单到复杂。幸运的是，Processing 提供了许多方便的功能。

您想将属性（如框的 x 位置）存储在一个变量中，您将随着时间的推移对其进行更新，并使用更新后的值在屏幕上重绘：

```
int x = 20;
int y = 30;
int w = 3;
int h = 3;

void setup() {
  size(200,200);
}

void draw() {   
  //update
  if(x <= 40) x++;
  if(y <= 50) y++;
  if(w <= 7) w++;
  if(h <= 7) h++;
  //draw
  background(204);
  for (int i = 0; i < 4 ; i++) {
    for (int j = 0; j < 4; j++) { 
      rect(x+30*j,y+30*i,w,h);
    }   
  }
} 
```

您还可以将您的值[映射（）](http://processing.org/reference/map_.html)到随时间变化的变量：

```
int x,y,s;
int xmin = 20,xmax = 40;
int ymin = 30,ymax = 50;
int smin =  3,smax =  7;

void setup() {
  size(200,200);
}

void draw() {   
  //update
  x = (int)map(mouseX,0,width,xmin,xmax);
  y = (int)map(mouseX,0,width,ymin,ymax);
  s = (int)map(mouseX,0,width,smin,smax);
  //draw
  background(204);
  for (int i = 0; i < 4 ; i++) {
    for (int j = 0; j < 4; j++) { 
      rect(x+30*j,y+30*i,s,s);
    }   
  }
} 
```

或者使用线性插值（已经实现为[lerp()](http://processing.org/reference/lerp_.html)）：

```
int xmin = 20,xmax = 40;
int ymin = 30,ymax = 50;
int smin =  3,smax =  7;

void setup() {
  size(200,200);
}

void draw() {   
  //update
  float t = (float)mouseX/width;
  //draw
  background(204);
  for (int i = 0; i < 4 ; i++) {
    for (int j = 0; j < 4; j++) { 
      rect(lerp(xmin,xmax,t)+30*j,
           lerp(ymin,ymax,t)+30*i,
           lerp(smin,smax,t)     ,
           lerp(smin,smax,t)     );
    }   
  }
} 
```

您可以根据您喜欢的任何变量更改插值量：

```
int xmin = 20,xmax = 40;
int ymin = 30,ymax = 50;
int smin =  3,smax =  7;

void setup() {
  size(200,200);
}

void draw() {   
  //update
  float t = abs(sin(frameCount * .01));
  //draw
  background(204);
  for (int i = 0; i < 4 ; i++) {
    for (int j = 0; j < 4; j++) { 
      rect(lerp(xmin,xmax,t)+30*j,
           lerp(ymin,ymax,t)+30*i,
           lerp(smin,smax,t)     , 
           lerp(smin,smax,t)     );
    }   
  }
} 
```

高温高压

# java - 在 jsp/servlet 的会话中值是空的

> ID：11898189
> 
> 赞同：0
> 
> 时间：2012-08-10T08:43:10.283
> 
> 标签：java, jsp, session, servlets

我正在尝试按如下方式设置会话值：

```
if (request.getParameter("page") != null) {
                        page = Integer.parseInt(request.getParameter("page").toString());
                    }
                    if (request.getParameter("se_tempcardnumber") != null) {
                        tempcardnumber = request.getParameter("se_tempcardnumber").toString();
                        session.setAttribute("session_tempcardnumber", tempcardnumber);
                    }
                    if (request.getParameter("se_empid") != null) {
                        empid = request.getParameter("se_empid").toString();
                        session.setAttribute("session_empid", empid);
                    }
                    if (request.getParameter("se_issuedate") != null) {
                        issuedate = request.getParameter("se_issuedate").toString();
                        session.setAttribute("session_issuedate",issuedate);
                    }
                    if (request.getParameter("se_cardstatus") != null) {
                        cardstatus = request.getParameter("se_cardstatus").toString();
                        session.setAttribute("session_cardstatus", cardstatus);
                    } 
```

我尝试按如下方式访问会话值：

```
 if(session.getAttribute("session_empid")!=null) {
                     session_empid =(String)session.getAttribute("session_empid");
                    }
                 if(session.getAttribute("session_tempcardnumber")!=null) {
                     session_tempcardnumber =(String)session.getAttribute("session_tempcardnumber");
                    }
                 if(session.getAttribute("session_issuedate")!=null) {
                     session_issuedate =(String)session.getAttribute("session_issuedate");
                 }
                 if(session.getAttribute("session_cardstatus")!=null) {
                     session_cardstatus =(String)session.getAttribute("session_cardstatus");
                     System.out.println("session_cardstatus : "+session_cardstatus);
                 } 
```

出于测试目的，我`System.out.println("session_cardstatus : "+session_cardstatus);`单独设置了值，然后打印了相同的内容。

它是第一次打印，但是第二次打印时该值是空的，尽管我没有在会话中删除那些设置变量的任何地方。

请告诉我该怎么做；

谢谢并恭祝安康

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-10T09:33:48.323

检查在将值设置为会话之前生成的会话 ID

request.getRequestedSessionId() 或 session.getId()

# jquery - 这与其他选择器

> ID：11898191
> 
> 赞同：2
> 
> 时间：2012-08-10T08:43:14.630
> 
> 标签：jquery, html, this

我试图在每个 div 中显示选中复选框的数量，但不知道如何选择`span`。

这`$("input[@type=checkbox]:checked",this).length`很好用，我已经把它放在警报中并且数字是正确的，但我不知道如何`#skills div h3 span`为每个 div 选择。

html

```
<td id="skills" colspan="2">
  <div id="skills_0">
    <h3>IT<span></span></h3>
    <input type="checkbox" name=".." id=".." val=".." /> <label for="..">..</label>
    ...<!-- more inputs -->
  </div>
  ...<!-- more divs -->
</td> 
```

jQuery：

```
$(document).ready( function () {
    $('#skills div').each( function () {
        $("h3 span",this).html($("input[@type=checkbox]:checked",this).length);
    });
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-10T08:48:15.350

尝试这个：

```
/* $(this).find('span').html($("input[@type=checkbox]:checked",this).length); */ 
```

新的更新代码：

```
$(this).find("h3 span").html($("input[@type=checkbox]:checked",this).length); 
```

演示：

[http://jsfiddle.net/ongisnade/VQutV/3/](http://jsfiddle.net/ongisnade/VQutV/3/)

# c# - 从 WPF 应用程序调用 C++ 代码时如何定义变量？

> ID：11898193
> 
> 赞同：0
> 
> 时间：2012-08-10T08:43:22.463
> 
> 标签：c#, c++, wpf

我有一个 C++ 中的 DLL，其功能如下：

莱斯梅斯.hpp

```
bool Sing_For_Me(CInstructment accompaniedBy, string song, string singer); 
```

同时在我的 WPF 应用程序中，我将使用互操作层：

```
[ DllImport( "musicals.dll", EntryPoint="Sing_For_Me", CharSet=CharSet.Ansi )]
public static extern bool SingForMe(???????, string note, string singer); 
```

如何在 WPF 代码中引用*CInstrument ？*

似乎有很多使用字符串的例子，你可以只使用某些预定义的数据类型或其他东西吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-10T15:13:59.320

C++ 类没有任何直接的 P/Invoke 方式，但这就是创建 C++\CLI 的原因。

您应该创建一个 C++\CLI 类项目，在那里您可以包装`CInstrument`成一个 .NET 类，然后在 WPF 中使用它。

有关更多信息，请参阅此[codeproject 文章](http://www.codeproject.com/Articles/19354/Quick-C-CLI-Learn-C-CLI-in-less-than-10-minutes#A8)

本机 C++ 代码只适用于 C++\CLI，有一种叫做 IJW 的东西（它可以正常工作）。另请参阅[这篇文章了解更多信息](http://www.codeproject.com/Articles/10020/Using-managed-code-in-an-unmanaged-application)。

您需要添加一个新项目。选择：

> 其他语言 > Visual C++ > CLR > 类库

![在此处输入图像描述](../Images/fdd541257b14c5cdf5d7673b49b0bb85.png)

您的代码如下所示：

```
//native C++ CInstrument
//cinstrument.cpp
class CInstrument
{
 ..
}

//this is a CLR class
//Compatible with C#/VB.NET
//cinstrumentwrapper.cpp
ref class CInstumentWrapper
{
 private:
 CInstrument* _instrument;//delegate to the native C++ class
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-10T08:49:10.110

CInstructment 是如何定义的？如果它是一个结构，你可以很容易地编组。创建一个新的结构应用 StructLayout(Sequential) 作为属性（请参阅 System.Runtime.InteropServices），然后将其传递给您的互操作。为什么你有一个布尔的返回类型 IntPtr？

您还可以在此处找到更多信息 [http://www.developerfusion.com/article/84519/mastering-structs-in-c/](http://www.developerfusion.com/article/84519/mastering-structs-in-c/)

[http://blogs.msdn.com/b/dsvc/archive/2009/02/18/marshalling-complicated-structures-using-pinvoke.aspx?Redirected=true](http://blogs.msdn.com/b/dsvc/archive/2009/02/18/marshalling-complicated-structures-using-pinvoke.aspx?Redirected=true)

# bash - shell 脚本、子shell、子脚本、管道 - WEIRD (?) CTRL+C 信号传播

> ID：11898208
> 
> 赞同：1
> 
> 时间：2012-08-10T08:44:43.790
> 
> 标签：bash, shell, signals, pipe, subshell

因此，我发现了我觉得奇怪的 bash 脚本的一个行为。

这是一个测试脚本：

```
echo "start of script"

(

echo "start of subshell"

cat > /tmp/$$ << EOF
trap 'exit 99' SIGINT

echo "sleep 10, hit ctrl+c now"
sleep 10
EOF

chmod +x /tmp/$$
/tmp/$$

echo "end of subshell"

#)
) | tee -a /tmp/$$.log

echo "end of script" 
```

因此，如您所见，我使用括号创建子shell 来轻松管道输出以进行日志记录。

在这个子shell 中，我运行一个脚本来捕获 ctrl+c 信号并简单地退出脚本。

因此，根据我是否通过管道传输子shell的输出，在下标（睡眠 10）期间按 ctrl+c 时的行为会有所不同。

与*| tee -a /tmp/$$.log*，输出显示：

```
[/tmp] ./test.sh
start of script
start of subshell
sleep 10, hit ctrl+c now
end of script 
```

没有管道和三通，输出显示：

```
[/tmp] ./test.sh
start of script
start of subshell
sleep 10, hit ctrl+c now
**end of subshell**
end of script 
```

有人可以解释这种行为吗？有没有办法确保下标的结尾不会像管道和三通那样被跳过？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-10T09:07:19.407

尝试使用 tee 选项“-i”。

```
(
#script
) | tee -i -a /tmp/$$.log 
```

# tomcat - 我设置了tomcat的JAVA_OPTS -Xss=128k，然后我得到了这个Spring ERROR

> ID：11898209
> 
> 赞同：1
> 
> 时间：2012-08-10T08:44:51.377
> 
> 标签：tomcat, xss, java-opts

我修改了tomcat(catalina.sh)的init脚本——设置JAVA_OPTS如下：JAVA_OPTS="-server -Xms8g -Xmx8g -Xmn3g -Xss128K -Dj ava.awt.headless=true"。然后我启动了tomcat，它的日志得到了这个Spring ERROR：

“2012-08-10 16:40:20.697 错误上下文初始化失败 java.lang.NoClassDefFoundError: 无法初始化类 org.springframework.beans.factory.BeanCreationException”

但在我设置 JAVA_OPTS 之前，它运行良好。为什么会这样？我应该怎么办？非常感谢。

整个堆栈跟踪是：2012-08-10 16:40:20.697 错误上下文初始化失败 java.lang.NoClassDefFoundError: 无法在 org.springframework.beans.factory.support 初始化类 org.springframework.beans.factory.BeanCreationException。 AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:527) at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:456) at org.springframework.beans.factory.support.AbstractBeanFactory$1.getObject(AbstractBeanFactory.java :294) 在 org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:291) 在 org.springframework.getSingleton(DefaultSingletonBeanRegistry.java:225)。beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:193) at org.springframework.beans.factory.support.DefaultListableBeanFactory.preInstantiateSingletons(DefaultListableBeanFactory.java:585) at org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization( AbstractApplicationContext.java:913) 在 org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:464) 在 org.springframework.web.context.ContextLoader.configureAndRefreshWebApplicationContext(ContextLoader.java:385) 在 org.springframework.web .context.ContextLoader.initWebApplicationContext(ContextLoader.java:284) 在 org.springframework.web.context.ContextLoaderListener.contextInitialized(ContextLoaderListener.java:111) 在 org.apache.catalina.core.StandardContext。listenerStart(StandardContext.java:3972) at org.apache.catalina.core.StandardContext.start(StandardContext.java:4467) at org.apache.catalina.core.ContainerBase.addChildInternal(ContainerBase.java:791) at org.apache .catalina.core.ContainerBase.addChild(ContainerBase.java:771) 在 org.apache.catalina.core.StandardHost.addChild(StandardHost.java:526) 在 org.apache.catalina.startup.HostConfig.deployDirectory(HostConfig.java :1041) org.apache.catalina.startup.HostConfig.deployDirectories(HostConfig.java:964) org.apache.catalina.startup.HostConfig.deployApps(HostConfig.java:502) org.apache.catalina.startup。 HostConfig.start(HostConfig.java:1277) at org.apache.catalina.startup.HostConfig.lifecycleEvent(HostConfig.java:321) at org.apache.catalina.util.LifecycleSupport.fireLifecycleEvent(LifecycleSupport.java:119) 在 org.apache.catalina.core.StandardHost.start(StandardHost.java:722) 在 org.apache.catalina.core.ContainerBase 的 org.apache.catalina.core.ContainerBase.start(ContainerBase.java:1053) .start(ContainerBase.java:1045) 在 org.apache.catalina.core.StandardEngine.start(StandardEngine.java:443) 在 org.apache.catalina.core.StandardService.start(StandardService.java:516) 在 org. apache.catalina.core.StandardServer.start(StandardServer.java:710) 在 org.apache.catalina.startup.Catalina.start(Catalina.java:593) 在 sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method) 在 sun。 reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39) 在 sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25) 在 java.lang.reflect.Method.invoke(Method.java:597) 在 org.apache。catalina.startup.Bootstrap.start(Bootstrap.java:289) 在 org.apache.catalina.startup.Bootstrap.main(Bootstrap.java:414)

JAVA_OPTS 配置是旧配置，不是我写的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-21T02:02:03.303

您显然将线程堆栈大小设置得太小。除非您有充分的理由这样做，否则根本不要修改线程堆栈大小。

# php - 如何获取单击图像的名称并将其与 php 变量进行比较？

> ID：11898212
> 
> 赞同：2
> 
> 时间：2012-08-10T08:45:14.213
> 
> 标签：php, javascript

两张图片，由php放置：

```
echo "<img onclick='test()' src=\"/img/Sun.png."\">";
echo "<img onclick='test()' src=\"/img/Moon.png."\">";
$x = "Sun.png"; 
```

js：

```
function test(){
if (clicked_image_name == $x) ...do something 
```

那么，如何获取点击图像的名称，以及如何将其与 php 变量进行比较？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-10T08:50:48.860

```
echo "<img onclick='test(this.src)' src=\"/img/Sun.png."\">";
echo "<img onclick='test(this.src)' src=\"/img/Moon.png."\">"; 
```

js：

```
function test(img_src){
var clicked_image_name = img_src.substring(5);
if (clicked_image_name == '<?php echo $x;?>') ...do something 
```

上面的代码片段将完成您的工作。
谢谢

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-10T08:53:22.670

你可以做一件事，

您可以通过 php 代码声明一个 javascript 变量及其值：-

```
var imageName = "<?php echo "Sun.png"?>"; 
```

您可以修改 php 代码以将图像 src 名称作为变量传递：

```
echo "<img onclick='test("Sun.png")' src=\"/img/Sun.png."\">"; 
```

然后在 javscription test() 函数中，你可以检查它的值

```
function test(imageSrcName)
{
   if(imageSrcName == imageName)
   {
       alert("both image name are same");
   }
   else
   {
       alert("both image name are different");
   }
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-10T09:02:25.450

您可以简单地向您的 php 页面的 test() 调用添加一个参数，如下所示：

```
echo "<img onclick='test(\"$mysunvariable\")'  src=\"/img/Sun.png."\">";
echo "<img onclick='test(\"$mymoonvariable\")' src=\"/img/Moon.png."\">"; 
```

在你的 JS 中：

```
function test(name){
   if(name == 'Sun.jpg'){
      do something
   }
   other cases..
} 
```

或者，如果您确实需要与 PHP 动态变量进行比较，您应该编写一个 PHP 服务并通过异步 GET 或 POST 调用它（例如使用 AJAX）。

在这种情况下，要获取图像名称，您可以将 name 参数添加到 PHP 页面中的每个图像，如下所示：

```
echo "<img onclick='test(this)' name=\"sun\"  src=\"/img/Sun.png."\">";
echo "<img onclick='test(this)' name=\"moon\" src=\"/img/Moon.png."\">"; 
```

然后修改你的JS函数如下：

```
function test(img){
   var myname = img.name;
   here you do your async stuff
...
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-10T09:05:21.907

将 $x 的值放在隐藏字段中。然后你就可以从javascript中获取价值了

# asp.net - 在同一报告中使用两个数据表

> ID：11898216
> 
> 赞同：0
> 
> 时间：2012-08-10T08:45:24.817
> 
> 标签：asp.net, asp.net-mvc, asp.net-mvc-3, entity-framework, reporting-services

我正在开发一个 MVC .net Web 应用程序，在我的模型中，我有一个名为存在的表，其中包含一个引用另一个表的外键：

*   存在（presence_id，**employee_id**，...）
*   员工（employee_id，employee_name，...）

我想在这些表格的报告中显示数据。是否可以在同一个报告中使用两个数据表？事实上，我想要一份报告，其中包含所有员工的表格以及所有相应的存在。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-10T09:14:32.917

这是很有可能的，因为你有一对一的连接，我会看看[相关数据的延迟、渴望和显式加载](http://www.asp.net/mvc/tutorials/getting-started-with-ef-using-mvc/reading-related-data-with-the-entity-framework-in-an-asp-net-mvc-application)（向下滚动直到你看到那个标题。）

在您只想返回多个不相关的表的其他情况下，您所要做的就是创建一个视图模型（与常规模型相同），如下所示：

```
public class NewViewModel
{ 
    public Presence Presence { get; set; }
    public Employee Employee { get; set; }
} 
```

这将允许您将两个表从控制器传递到视图。我猜，在你的情况下这不是必需的，因为听起来好像`Presence`已经添加到`Employee`. 因此，请查看提供的有关如何加载它的链接，您应该可以`Presence`像这样访问`employee.presence`。

# php - 使用 PHP 发布到用户的墙上

> ID：11898218
> 
> 赞同：2
> 
> 时间：2012-08-10T08:45:35.413
> 
> 标签：php, facebook, facebook-wall

好的，这已经让我忙了 2 天了，我现在正在绞尽脑汁。我已经将它发布在论坛上，询问了朋友，广泛搜索并查看了 stackoverflow。我不是第一个发布这个问题的人，但我在回复中找不到答案，所以这就是我创建这个新问题的原因。

这就是我想要做的： - 我想在 PHP 中将消息作为 Facebook 应用程序发布到用户的墙上。- 我想做这个服务器到服务器，所以没有对话框和任何用户交互（他可能在那一刻修剪草坪） - 这个用户已授予我的应用程序的权限，这些权限是: 1) manage_pages, 2) publish_stream, 3) read_stream - 我正在使用 PHP Facebook SDK - 这是我的代码：

```
/* Facebook */ 
$facebook = new Facebook(array(
    'appId'  => FACEBOOK_APP_ID,
    'secret' => FACEBOOK_APP_SECRET
));
/* string */ 
$accessToken = $facebook->getAccessToken();
/* Array<string> */ 
$postFields = array("message"=>"test2", "access_token"=>$accessToken);

$facebook->api('/{the-id-of-the-facebook-user}/feed','post',$postFields); 
```

这就是问题所在：我不断收到以下错误：（＃200）用户尚未授权应用程序执行此操作。

这是一条废话，因为用户已授权我的应用程序（该用户也恰好是我，我检查了应用程序下的所有权限，它们很好）。

任何建议将不胜感激，因为我不知道去哪里找了。我知道其他人以前发布过这个问题，但答案并不令人满意。提前非常感谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-17T09:59:12.300

我无法弄清楚是什么导致了错误。我尝试了多种角度。在某些情况下，我确实设法在墙上发布了一些内容，因为 api 返回了帖子的 ID，我可以将其输入浏览器以查看帖子（www.facebook.com/{the-id-of-the-post }）。

然而奇怪的是，这篇文章没有出现在时间线上，而是出现在一个单独的页面上。此页面没有像普通 Facebook 页面那样在顶部有用户个人资料。它还在查询字符串中有一个storyID 参数。我不知道我在哪个页面上，为什么它没有出现在时间线上。

我试图发布的 Facebook 页面是公司页面。但它不像通常情况那样附加到（一个人的）“正常”Facebook页面。最终，我确实设法发布到属于“正常”facebookpage 的页面的页面。所以在大多数情况下，我的代码现在可以工作了。[可以说，Facebook SDK、它的文档和http://developers.facebook.com](http://developers.facebook.com)的文档还有很多需要改进的地方。如何执行某些操作还不是很清楚。我曾经在 WP7 应用程序上花了很多时间来实现 Facebook 功能，现在我花了至少 4 天的时间来让它在这个网站上工作。我决定编写自己的 SDK 并在未来对其进行扩展。

感谢大家的时间和帮助。Stackoverflow 摇滚！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-10T11:59:43.027

不允许应用发布到用户的墙上。您只能以用户或不同用户（即用户对用户）的身份发布到墙上。如果你想通知用户某事，你应该使用 app-to-user Requests API 代替。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-08-10T09:28:46.957

如果您要发布的提要来自已授予权限的同一用户，您可以`me`将`{the-id-of-the-facebook-user}`. 我刚试过这个，它奏效了：

```
$facebook->api(
    '/me/feed/',
    'post',
    array(
    'message' => "my message"
)); 
```

无需发布 access_token。而用户给的权限只有publish_actions

# html - 如何在表格中缩进文本，但没有表格？

> ID：11898219
> 
> 赞同：0
> 
> 时间：2012-08-10T08:45:41.823
> 
> 标签：html, css, html-table

所以基本上我想要达到的效果是这样的：

```
 Wrapped Text Wrapped
 Text     Text Wrapped Text
          Wrapped Text 
```

就好像它们在两个单独的 td 中一样，在这种情况下，代码将如下所示：

```
<table>
<tr>
<td>Text</td>
<td style="width: 150px;">Wrapped Text Wrapped Text Wrapped Text Wrapped Text</td>
</tr>
</table> 
```

但我想在没有表格的情况下完成这个效果，而是使用 HTML 和 CSS。这怎么可能？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-10T08:51:37.693

将文本块放在 div 中并浮动它们：

HTML：

```
 <div id="div1">
    Text
 </div>

 <div id="div2">
       Text Wrapped Text
      Wrapped Text
         Wrapped Text Wrapped
 </div> 
```

CSS

```
 #div1, #div2{float:left;width:100px} 
```

在此处查看实际操作：http: [//jsfiddle.net/GyMbS/](http://jsfiddle.net/GyMbS/)

...但是正如 Amberlamps 所指出的，这给您带来了将任一单元格垂直居中的挑战。该解决方案很棘手，并且取决于您的文本要求——它总是单行的吗？细胞的高度会固定吗？有关各种情况下的解决方案，请参阅[使用 CSS 进行垂直居中。](http://www.vertical-align.com/)

**更新-替代**
或者您可以`display:table-cell`在 div 上使用，这使得垂直对齐左单元格变得更加简单：

```
#div1, #div2{display:table-cell;vertical-align:middle;width:100px;}​ 
```

在这里看到这个工作：http: [//jsfiddle.net/GyMbS/1/](http://jsfiddle.net/GyMbS/1/)

**主要警告**：需要 IE8 + 或非 IE 浏览器（参见：[http](http://caniuse.com/#feat=css-table) ://caniuse.com/#feat=css-table ）

# c# - WPF中组合框上的名称

> ID：11898222
> 
> 赞同：1
> 
> 时间：2012-08-10T08:45:54.427
> 
> 标签：c#, wpf

当我在 WPF 中创建一个组合框时，我希望它有一个名称，如“您的选择”，就像它是一个通用按钮一样，当我单击它时，我只希望下拉项目，而不是组合框上的名称再次。我希望你明白我的问题？有没有办法解决这个问题？

在 XAML 中，我将它用于组合框：

```
<ComboBox Height="23" HorizontalAlignment="Left" Margin="110,226,0,0" Name="cmbChangeRoute" VerticalAlignment="Top" Width="156" SelectionChanged="cmbChangeRoute_SelectionChanged" /> 
```

我在 C# 代码中添加项目，如下所示：

```
string[] strChangeRoute = new string[] { "Your choice", "10 deg", "20 deg", "30 deg" };
foreach (string s in strChangeRoute)
     cmbChangeRoute.Items.Add(s);
cmbChangeRoute.SelectedIndex = 0; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-10T09:50:47.737

您想要做的实际上不是配置 ComboBox，而是在其上添加一个装饰器/装饰器，它会在 Combo 关闭时显示一个文本，并且在组合关闭时会隐藏自身。它有时被称为“水印”。

我不会进一步解释它，因为它毫无意义。这是一篇不错的文章：[http](http://pwlodek.blogspot.com/2009/11/watermark-effect-for-wpfs-textbox.html) : //pwlodek.blogspot.com/2009/11/watermark-effect-for-wpfs-textbox.html 还有为组合框加水印所需的所有代码片段。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-10T09:45:05.613

您是否尝试过使用绑定？

在 XAML 中你有类似的东西

```
<ComboBox ... SelectedItem="{Binding ChosenValue,Mode=TwoWay}" ... /> 
```

然后，在您的构造函数中（在代码隐藏中）只需添加该行

```
this.DataContext = this; 
```

这样您的绑定实际上会在代码隐藏中查找依赖属性 ChosenValue。这样，每次更改组合框中的值时，您的道具值都会更新以保存当前选定的项目。

要实现您想要的，只需在构造函数中将道具的值设置为“您的选择”

```
public ClassName()
{
   InitializeComponent();
   this.DataContext = this;
   ChosenValue = "Your Choice";
} 
```

同样，只需将其值设置为您想要的其他任何地方的相同字符串。保存或其他时，只需检查

```
if(!ChosenValue.Equals("Your Choice")
{
   //do logic
}
else
{
   //the user has not selected anything
} 
```

希望这可以帮助！

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-10T09:31:20.420

我会在 ComboBox 上寻找一个 TextBlock，它的可见性将绑定到 ComboBox 的 selectedItem （通过转换器）。

```
<Grid>
    <ComboBox x:Name="myComboBox" />
    <TextBlock  Text="Your choice.." 
                IsHitTestVisible="False"
                Visibility="{Binding ElementName=myComboBox, Path=SelectedItem,
                  Converter={StaticResource yourChoiceLabelVisibilityConverter}}"/>
</Grid>

public class YourChoiceLabelVisibilityConverter : IValueConverter
{
    public object Convert(object value, Type targetType, object parameter,
                          System.Globalization.CultureInfo culture)
    {
        if (value == null)
        {
            return Visibility.Visible;
        }

        return Visibility.Hidden;
    } 
```

或者，更好的解决方案：纯 xaml，使用触发器：

```
 <ContentControl x:Name="myContentControl" Content="{Binding}">
        <ContentControl.ContentTemplate>
            <DataTemplate>
                <Grid>
                    <ComboBox x:Name="myComboBox" ItemsSource="{Binding}"/>
                    <TextBlock x:Name="myTextBlock"
                               Text="Your choice.."
                               IsHitTestVisible="False"
                               Visibility="Hidden"/>
                </Grid>
                <DataTemplate.Triggers>
                    <Trigger SourceName="myComboBox" Property="SelectedItem"
                             Value="{x:Null}">
                        <Setter TargetName="myTextBlock" Property="Visibility
                                Value="Visible"/>
                    </Trigger>
                </DataTemplate.Triggers>
            </DataTemplate>
        </ContentControl.ContentTemplate>
    </ContentControl> 
```

在这种情况下，不要忘记从代码隐藏中设置内容控件的数据上下文：

```
myContentControl.DataContext = Enum.GetValues(typeof([YOUR ENUM])); 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-08-10T09:35:05.100

试试这个，我刚刚测试过

```
<ComboBox Height="23" HorizontalAlignment="Left" Margin="110,226,0,0" Name="cmbChangeRoute" VerticalAlignment="Top" Width="156" IsManipulationEnabled="False" IsEditable="True" Text="Your Choice..." SelectionChanged="cmbChangeRoute_SelectionChanged"> 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-10T10:10:41.393

您可以参考这篇文章， [如何在 WPF 页面加载的组合框中显示默认文本“--Select Team --”？](https://stackoverflow.com/questions/1426050/how-to-display-default-text-select-team-in-combo-box-on-pageload-in-wpf)

我会从这个论坛建议以下解决方案，

您可以使用 IValueConverter 来执行此操作而无需任何代码。

```
<Grid>
   <ComboBox
       x:Name="comboBox1"
       ItemsSource="{Binding MyItemSource}"  />
   <TextBlock
       Visibility="{Binding SelectedItem, ElementName=comboBox1, Converter={StaticResource NullToVisibilityConverter}}"
       IsHitTestVisible="False"
       Text="... Select Team ..." />
</Grid> 
```

在这里，您有可以重用的转换器类。

```
public class NullToVisibilityConverter : IValueConverter
{
    #region Implementation of IValueConverter

    public object Convert(object value, Type targetType, object parameter, CultureInfo culture)
    {
        return value == null ? Visibility.Visible : Visibility.Collapsed;
    }

    public object ConvertBack(object value, Type targetType, object parameter, CultureInfo culture)
    {
        throw new NotImplementedException();
    }

    #endregion
} 
```

最后，您需要在资源部分声明您的转换器。

```
<Converters:NullToVisibilityConverter x:Key="NullToVisibilityConverter" /> 
```

Converters 是您放置转换器类的位置。一个例子是：

```
xmlns:Converters="clr-namespace:MyProject.Resources.Converters" 
```

这种方法的好处是在你的代码中没有重复代码。

# jquery - ajax调用前图像的滚动效果

> ID：11898230
> 
> 赞同：0
> 
> 时间：2012-08-10T08:46:33.697
> 
> 标签：jquery, ajax

我正在开发一个自定义灯箱，其中下一个或上一个图像是通过 ajax 调用加载的。我想在 ajax 调用完成之前实现效果，以便在调用 ajax 并加载下一个图像之前推出当前图像。这是我的ajax代码

```
function loadimgagg(mipic){

var miid=$('#mipicview-overlay-content').attr('vwid')

var dataString = 'mipic='+ mipic+'&miid='+miid;

$.ajax({
type: "POST",
url: "eg.php",
data: dataString,
cache: false,

success: function(html){
$("#eg").html(html);
 }
 }); 
```

谁能帮我这个 ？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-10T08:53:32.887

您可以`beforeSend`在以下位置使用回调`$.ajax`：

```
$.ajax({
type: "POST",
url: "modules/gallery/miloader.php",
data: dataString,
cache: false,
beforeSend: function() {
// something here
},
success: function(html){
    $("#mipicview").html(html);
}
}); 
```

或者您可以在 ajax 调用之前执行效果：

```
function loadimgagg(mipic){
  var miid=$('#mipicview-overlay-content').attr('vwid')

  var dataString = 'mipic='+ mipic+'&miid='+miid;

 $('image').fadeOut( 100, function() { 
 $.ajax({
    type: "POST",
    url: "modules/gallery/miloader.php",
    data: dataString,
    cache: false,

    success: function(html){
        $("#mipicview").html(html);
    }
 });  
}) 
```

# php - 由于彗星的实施，apache没有及时接受其他请求

> ID：11898233
> 
> 赞同：0
> 
> 时间：2012-08-10T08:46:53.510
> 
> 标签：php, apache, comet, long-polling, keep-alive

嗨我已经实现了彗星（长轮询请求）基础应用程序，我的应用程序根据服务器响应更新内容

我的 php 代码如下，我的应用程序使用 zend 框架

```
ini_set('set_time_limit', 300);
//get zend session object
$myNamespace = new Zend_Session_Namespace();
//get zend_auth object
$auth=Zend_Auth::getInstance();
$requestTime=time();
$response=array();
$response["returnvalue"]="invalid";
//check for new event on server for 240 seconds else send response
do{
    //call_function return true or false
    $query=$this->call_function($auth->getIdentity()->user_id,$auth->getIdentity()->lastViewedTime);
//some code here
if(!$query){
    //sleep for some time;
    sleep(60);
}else{
    //send response to server when something new has occured
            $lastViewed=round(microtime(true) * 1000);
            $user=$auth->getStorage()->read();
            $user->lastViewedTime=$lastViewed;
            $auth->getStorage()->write($user);
    $response["returnvalue"]="valid";
    break;
}
}while(true && (time()-$requestTime)<240);
header("Content-Type: application/json");
echo json_encode($response);exit; 
```

我的 JavaScript 代码是

```
var counter = {
'poll' : function() {
    $.ajax({
       type: "GET",
       url: '/long-polling',
       data:"a=b",
       dataType:"json",
       async:true,
       success:function(response){
           counter.update(response);
       },
       error: function(XMLHttpRequest,textStatus){
            alert("This Operation Could not be Completed. Please check your Internet Connection and try Again. If problem persists please contact Support");
        }
    });

},
'update' : function(json) {
    alert(json.data);
    counter.poll();
 }
};
$(document).ready(function(){
  counter.poll();
}); 
```

我的 apache 配置是

```
Timeout 300
KeepAlive On
MaxKeepAliveRequests 100
KeepAliveTimeout 240
MaxClients 150
MaxRequestsPerChild 4 
```

长轮询工作正常，但问题是当浏览器发送其他请求以加载其他元素时，服务器上的图像，服务器直到 5 分钟才回复/阻止请求

有什么建议吗？？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-29T10:07:57.040

session 是我的问题 thanx ，通过添加 Zend_Session::writeClose(true); 解决了它

# sql - 如何使用 HierarchyId 在子树下查找叶节点？

> ID：11898236
> 
> 赞同：1
> 
> 时间：2012-08-10T08:47:12.917
> 
> 标签：sql, sql-server-2008, hierarchyid

我正在使用 SQL Server 2008 HierarchyId 维护树结构。我的表结构是这样的：

```
CREATE TABLE [Employee](
[Id] [int] IDENTITY(1,1) NOT NULL,
[HId] [hierarchyid] NOT NULL,
[Lvl]  AS ([HId].[GetLevel]()) PERSISTED,
[Name] [varchar](200) NOT NULL) 
```

所有叶子数据不在同一级别。我可以找出表的所有叶子记录。但我需要找出任何给定子树的叶子数据。换句话说，我需要“为不管理任何其他员工的任何给定经理找到所有下属”。

样本数据：

```
Id Path Lvl Name 
1 / 0 Emp1 
2 /1/ 1 Emp2 
3 /1/1/ 2 Emp3 
4 /1/1/1/ 3 Emp4 
5 /1/2/ 2 Emp5 
6 /1/2/1/ 3 Emp6 
7 /1/2/1/1/ 4 Emp7 
8 /1/2/1/2/ 4 Emp8 
9 /1/2/2/ 3 Emp9 
10 /1/2/2/1/ 4 Emp10 
11 /1/2/2/2/ 4 Emp11 
12 /1/2/2/3/ 4 Emp12 
13 /1/2/2/4/ 4 Emp13 
14 /1/2/2/5/ 4 Emp14 
25 /1/2/3/ 3 Emp15 
26 /1/2/3/1/ 4 Emp16 
27 /1/2/3/2/ 4 Emp17 
28 /1/2/4/ 3 Emp18 
29 /1/2/4/1/ 4 Emp19 
30 /1/2/4/2/ 4 Emp20 
15 /1/3/ 2 Emp21 
16 /1/3/1/ 3 Emp22 
18 /1/3/1/1/ 4 Emp23 
19 /1/3/1/2/ 4 Emp24 
17 /1/3/2/ 3 Emp25 
20 /1/3/2/1/ 4 Emp26 
21 /1/3/2/2/ 4 Emp27 
22 /1/3/2/3/ 4 Emp28 
23 /1/3/2/4/ 4 Emp29 
24 /1/3/2/5/ 4 Emp3 
```

请帮我找到这个。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-10T09:20:07.487

你想要这个`IsDescendantOf`功能。

例如：

```
declare @manager hierarchyid
select @Manager = HID from employee where --- criteria for given manager

Select *
from employee
where Hid.IsDescendantOf(@manager)=1 
```

要找到那些不管理其他人的人，请添加

```
and Hid.GetDescendant(null,null) is null 
```

# c - C 编程，函数指针

> ID：11898241
> 
> 赞同：0
> 
> 时间：2012-08-10T08:47:53.073
> 
> 标签：c, function, pointers

我给定的代码有一些问题。你它相应地工作，我需要实现“横向”和“横向R”功能。

我也很难理解给定的函数指针的用途：Function pointers => void (*visit)(link)

```
void traverse (link ls, void (*visit)(link)) {
  if (ls == NULL) {
    return;
  }
  (*visit) (ls);
  traverse (ls->next, visit);
  return;
}

void traverseR (link ls, void (*visit)(link)) {
  if (ls == NULL) {
    return;
  }
  traverseR (ls->next, visit);
  (*visit)(ls);
  return;
}

void square (link l) {
  // link tmp = NULL;
  int container = l->item;
  container = SQUARE(container);

  l->item = container;

}

void squareAll (link ls){

  link curr = ls;  
  while (curr != NULL){
    square(curr);
    curr = curr->next;
  }

  ls = curr;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-10T09:07:49.833

除了已经说过的内容之外，较少混淆的语法将使代码更容易理解。

```
typedef void(*visit_t)(link);

void traverse (link ls, visit_t visit) {
  if (ls == NULL) {
    return;
  }

  visit (ls);
  traverse (ls->next, visit);
  return;
}

void traverseR (link ls, visit_t visit) {
  if (ls == NULL) {
    return;
  }

  traverseR (ls->next, visit);
  visit (ls);
  return;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-10T08:56:43.313

这些函数指针允许您在遍历列表时在每个列表项上使用您自己的函数执行一些自定义操作。例如，您可以编写一个减少每个节点数据的函数：

```
void decrease_item(link node)
{
  --node->item;
} 
```

当您可以调用`traverse(list_head, decrease_item)`以减少列表中每个项目的值时。您可以创建一个函数来打印每个元素的项目等。

顺便说一句，在上面的代码中，您可以`squareAll`以更优雅的方式重写函数：

```
void squareAll (link ls){
   traverse(ls, square);
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-10T09:04:21.010

`Also i have trouble understanding what the given function pointers are for: Function pointers => void (*visit)(link)`

您的函数指针可以存储具有以下类型的任何函数的地址：

```
void ()(link) // a function that takes an argument of type 'link' as first
              // parameter and returns void.
              // ex: void random_func(link param) 
```

`visit`只是程序中使用的指针名称。您可以声明、分配和执行函数指针，如下所示：

```
// protoype of an implemented function
int char_to_int(char c);
// your pointer declaration
int (*pointer_name)(char);
// assignment
pointer_name = &char_to_int;
// use of a function pointer
(*pointer_name)(some_character); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-10T09:13:02.043

```
void (*visit)(link) 
```

这是一个函数指针，它采用类型链接并返回一个 void。

例如：

有一个功能`void function1(Link a)`

您可以调用函数遍历，如下所示：

```
traverse (ls, &function1) ; 
```

# javascript - 防止表单提交字段输入键keydown？

> ID：11898242
> 
> 赞同：4
> 
> 时间：2012-08-10T08:47:58.210
> 
> 标签：javascript, forms

我建立了一个监听器来防止表单在特殊情况下提交。

我正在使用谷歌地图自动完成 api，基本上我不想在用户按下回车键并显示“推荐结果框”时提交表单。当用户按下回车键从下拉框中选择一个值而不是提交表单时。

我已经建立了一个正确捕获事件的侦听器，但我不知道如何防止表单被提交。

```
$('body').live('keydown', function(e) {
    if($(".pac-container").is(":visible") && event.keyCode == 13) {
        e.preventDefault(); // Prevent form submission
        }
    }); 
```

我试过 e.preventDefault(); 但它仍然提交表单。表单 ID 为：`updateAccountForm`

我怎样才能防止它发生？

编辑：我必须指出，似乎直接在搜索输入上侦听按键与 Google API 使自动完成功能无效。所以没有`$('input#search')`keydown/keypress是可能的

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-10T09:37:52.057

解决方案实际上非常简单。所有听众似乎都失败了，但添加了：

```
onkeydown="if($('.pac-container').is(':visible') && event.keyCode == 13) {event.preventDefault();}" 
```

直接输入就可以了。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-08-10T08:55:11.817

我认为你应该尝试使用这样的东西......包装检查你的容器的可见性

```
$('body').keypress(function(e) 
{
  if (e.keyCode == '13') {
     e.stopPropagation()

   }
});​ 
```

[这里](http://www.quirksmode.org/js/events_order.html)的文章有很好的解释。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-10T09:23:24.227

试试这个

```
$('body').live('keydown', function(e) {
    if($(".pac-container").is(":visible") && e.keyCode == 13) {
        e.stopPropagation(); // Prevent form submission
    }
}); 
```

请参阅`e`.keyCode 而不是`event`.keyCode 而`e.stopPropagation()`不是`e.preventDefault`

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2015-04-08T13:08:35.927

为了防止输入键在[Google Places API 自动完成的文本字段](https://developers.google.com/maps/documentation/javascript/places-autocomplete#address_forms)上提交表单，我需要一个**keydown**处理程序......

```
$(document).on('keydown', '#my-autocomplete', function(e) {
    if (e.which == 13) {
      $('#my-autocomplete').show();
      return false;
    }
}); 
```

...以及实例化后附加到自动完成的**place_changed侦听器：**

```
var my_autocomplete = new google.maps.places.Autocomplete(/*...*/);
google.maps.event.addListener(my_autocomplete, 'place_changed', function() {
    var place = my_autocomplete.getPlace();
    if (!place.place_id) { return; }
}); 
```

这并不重要，*但它可能会*在 jQuery Mobile Web 应用程序中工作。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-10T08:54:40.850

阻止表单提交

```
 <form method="post">
    <input type="text" id="search">

    </form>
​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​
    <script>
        $('input#search').keypress(function(e) {
          if (e.keyCode == '13') {
             e.preventDefault();

           }
        });​
    </script> 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-07-22T18:56:17.293

相关问题：[Google maps Places API V3 autocomplete - select first option on enter](https://stackoverflow.com/questions/7865446/google-maps-places-api-v3-autocomplete-select-first-option-on-enter/11703018#11703018)

当我使用谷歌地图自动完成框时，我想让“输入”和“标签”选择第一项。我遵循上面链接的@amirnissim 的解决方案，如果从输入元素按下输入/制表符，则模拟向下箭头键按下。

当我对其进行编码时，我没有将这些输入作为表单的一部分。我不知道如何防止表单在输入键上发送（事实上我就是这样发现这个问题的）但是当我使用自动完成时，我的输入不是表单的一部分。

# c# - 将 ClickOnce 应用程序更改为正常？

> ID：11898243
> 
> 赞同：2
> 
> 时间：2012-08-10T08:48:12.527
> 
> 标签：c#, visual-studio, deployment, clickonce

我最近用 c# 编写了一个应用程序，我想知道是否可以在没有 clickonce 的情况下从 ClickOnce 更改为普通的 Windows 应用程序，因为每次程序启动时都会弹出一个恼人的窗口，如下所示： ![在此处输入图像描述](../Images/617bf7353a7dddeb57895388e3e1af8b.png)

编辑：

我忘了提到，当您在程序文件中安装程序时，它会显示为“ClickOnce 应用程序参考”，这也让我很恼火。还有其他方法可以设置文件吗？

例如，如果我要创建一个专业程序并且我不希望用户知道使用了 ClickOnce，而是使用了 Dll 和 Exe，这怎么可能？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-10T09:13:38.567

ClickOnce 是一种部署方式；它本身不会更改您的代码或您的应用程序。从这个意义上说，您不需要“更改”任何东西来使应用程序不点击一次。

您可以完全禁用应用程序的发布设置，只自己分发构建输出，或创建安装程序 - 或禁用 ClickOnce“检查更新”功能，该功能可通过项目属性屏幕访问（发布选项卡，单击“更新”。 ..”）。

# c++ - 如何在 C++ 中隐藏虚拟方法并保留接口？

> ID：11898245
> 
> 赞同：0
> 
> 时间：2012-08-10T08:48:14.947
> 
> 标签：c++, oop, virtual

我想创建一个 SharedInterrupt 类（B），它将在一个中断向量中串联许多对象。但是 SharedInterrupt 类（B）的派生类（C..）必须具有与 SingleInterrupt 类（A）相同的 ISR（）函数（func）。是否可以？

```
class A {
public:
virtual void func() = 0;
};

class B : public A {
private:
void func() // I want to hide this method from derived classes (C, etc.)
{
// some code
}

public:
virtual void func() = 0; // And I want to keep A's interface, but compiler error!

};

class C : public B {
public:
void func() {
// some other code
}

}; 
```

PS 现在我只有一个想法要隐藏，从 B 创建中间子类来隐藏 A::func() 并从中继承 C。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-10T09:20:24.730

组合，而不是继承，是在 C++ 中实现这一点的唯一方法。

此模式使用`IStream`定义接口的抽象基类 ( )。这个问题的一个常见例子是尝试在套接字类和稍后的 SSL 包装器上实现“OnRead”回调时，也许稍后，某种应用层“数据包”已准备好。

一个实现可能看起来像这样 - 请注意，这种方法的额外好处是能够交换可能是可选的链的部分（因此，在呈现的通信类的情况下，可以插入可选的压缩或加密模块）。

```
struct IStream {
  virtual OnRead()=0;
};

class Socket : IStream {
  IStream* _delegate;
protected:
  virtual OnRead(){
    while(ReadBytes())
      _delegate->OnRead();
  }
public:
  Socket(IStream* delegate):_delegate(delegate){}
};

class SSLSocket : IStream {
  Socket* _socket;
  IStream* _delegate;
protected:
  virtual OnRead(){
    while(ReadSslRecord())
      _delegate->OnRead();
  }
 public:
  SslSocket(IStream* delegate):_delegate(delegate),_socket(new Socket(this)){}
};

class AppSocket : IStream {
  IStream* _socket;
public:
  AppSocket(bool useSsl){
    _socket = useSsl?new SslSocket(this):new Socket(this);
  }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-13T05:12:41.617

您可以尝试使用继承访问说明符。如果你不知道它是如何工作的，看看这个：

![http://flylib.com/books/2/253/1/html/2/images/12fig27.jpg](../Images/50709be2b50a023ed4dec71c186b786e.png)

# javascript - fancybox 使用 div 而不是 href

> ID：11898251
> 
> 赞同：0
> 
> 时间：2012-08-10T08:48:33.897
> 
> 标签：javascript, jquery

如何使用 FancyBox 或 JQuery 在一个页面上创建多个使用相同类（无 ID）的弹出式 DIV？例如，我在一个页面上有 50 个产品，它们都有相同的类名。

```
<div class="popup_box"> <!-- OUR PopupBox DIV-->
    <h1>This IS A Cool PopUp 1</h1>
    <div class="closePopup">Close</div> 
</div>
<div class="overlay_box"></div>
<div class="menu_item_container"> <!-- Main Page -->
    <h1 class="container_header">Sample 1</h1>
</div>

<div class="popup_box"> <!-- OUR PopupBox DIV-->
    <h1>This IS A Cool PopUp 2</h1>
    <div class="closePopup">Close</div> 
</div>
<div class="overlay_box"></div>
<div class="menu_item_container"> <!-- Main Page -->
    <h1 class="container_header">Sample 2</h1>
</div>
<div class="popup_box"> <!-- OUR PopupBox DIV-->
    <h1>This IS A Cool PopUp 3</h1>
    <div class="closePopup">Close</div> 
</div>
<div class="overlay_box"></div>
<div class="menu_item_container"> <!-- Main Page -->
    <h1 class="container_header">Sample 3</h1>
</div>

<script src="http://jqueryjs.googlecode.com/files/jquery-1.2.6.min.js" type="text/javascript"></script>

<script type="text/javascript">

    $(document).ready( function() {

        // When site loaded, load the Popupbox First
        $('.container_header').click( function() {          
            loadPopupBox();
        });

    $('.closePopup').click( function(){

            unloadPop()

        });

    });

    function loadPopupBox() {   // To Load the Popupbox
            $('.popup_box').fadeIn("slow");
            $('.overlay_box ').fadeIn("slow");      
        }

        function unloadPop(){

            $('.popup_box').fadeOut("slow");
            $('.overlay_box ').fadeOut("slow");
            }

</script> 
```

CSS

```
<style type="text/css">
/* popup_box DIV-Styles*/
.overlay_box{
    display:none;
    position:fixed;  
    _position:absolute; /* hack for internet explorer 6*/  
    height:100%;  
    width:100%;  
    top:0;  
    left:0;  
    background:#000000;  
    border:1px solid #cecece;  
    z-index:1; 

    }
.popup_box { 
    display:none; /* Hide the DIV */
    position:fixed;  
    _position:absolute; /* hack for internet explorer 6 */  
    height:300px;  
    width:600px;  
    background:#FFFFFF;  
    left: 300px;
    top: 150px;
    z-index:100; /* Layering ( on-top of others), if you have lots of layers: I just maximized, you can change it yourself */
    margin-left: 15px;  

    /* additional features, can be omitted */
    border:2px solid #ff0000;   
    padding:15px;  
    font-size:15px;  
    -moz-box-shadow: 0 0 5px #ff0000;
    -webkit-box-shadow: 0 0 5px #ff0000;
    box-shadow: 0 0 5px #ff0000;

}

.menu_item_container{
    background: #d2d2d2; /*Sample*/
    width:100%;
    height:100%;
}

h1.container_header{  
cursor: pointer;  
} 

/* This is for the positioning of the Close Link */
.closePopup {
    font-size:20px;  
    line-height:15px;  
    right:5px;  
    top:5px;  
    position:absolute;  
    color:#6fa5e2;  
    font-weight:500;    
}
</style> 
```

它应该像这个例子一样工作（请单击产品以测试弹出窗口）：

[http://www.grubhub.com/order.jsp?custId=263838&cityId=5&orderId=18429055&searchable=true&deliverable=true&verified=false&poiSearchTerm=null](http://www.grubhub.com/order.jsp?custId=263838&cityId=5&orderId=18429055&searchable=true&deliverable=true&verified=false&poiSearchTerm=null)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-10T08:59:14.137

你应该这样做：

```
$('.container_header').click( function() {          
    $(this).parent().prev().prev('.popup_box').fadeIn("slow");
});

$('.closePopup').click( function(){
    $('.popup_box').fadeOut("slow");
    $('.overlay_box ').fadeOut("slow");
}); 
```

## [观看演示](http://fiddle.jshell.net/XEW89/show/)（仅限结果）

[**在此处查看代码**](http://jsfiddle.net/XEW89/)

# filtering - 如何使用 XQuery 连接和匹配来自两个 XML 文件的数据？

> ID：11898254
> 
> 赞同：0
> 
> 时间：2012-08-10T08:48:45.457
> 
> 标签：filtering, xquery, match

我需要使用 XQuery 组合来自两个 XML 文件的数据，并使用这些数据创建一个 HTML 表。

第一个文件包含具有属性的元素，该属性标识元素：

```
<element id="x"/>
<element id="x2"/> 
```

第二个文件包含另一个标识符，以及一个交叉引用第一个文件中元素的元素：

```
<2nd-element id="y" xref="x"/>
<2nd-element id="y2" xref="x2"/> 
```

如何过滤数据以便得到以下结果？

```
 <table>
   <tbody>
   <tr><td>x</td><td>y</td></tr>
   <tr><td>x2</td><td>y2</td></tr>
   </tbody>
  </table> 
```

目前，我可以使用第二个文件中的所有**外部参照**属性填充第二列，但是如何过滤掉不需要的数据？

如何包含表达式以过滤用于填充表列的表达式中的数据？

```
{data(2nd-element/@xref)} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-10T11:19:43.140

您遍历第一个文件的 id，匹配第二个文件的 id，并为每一对创建一个表行：

```
<table>
  <tbody>
  {
    for $id1 in $first-file//element/@id
    let $id2 := $second-file//element-2nd[@xref = $id1]/@id
    return <tr><td>{data($id1)}</td><td>{data($id2)}</td></tr>
  }
  </tbody>
</table> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-10T08:58:52.927

我不明白哪些数据是不需要的。您只需插入两个属性`xref`和s 的`id`值。s 不需要仅使用第二个片段来产生所需的输出`2nd-element`。`element`

# php - php中的数字模式检测

> ID：11898260
> 
> 赞同：-1
> 
> 时间：2012-08-10T08:49:14.690
> 
> 标签：php, design-patterns, detection

我正在研究 PHP 中数据的模式检测。数据由间隔为 1 分钟的时间序列和一个值（整数）组成。现在我正在尝试检测其中的模式，例如

*   每 10 分钟就会出现一次峰值。
*   每周的第 7 天会有一次下降。
*   每天晚上 10 点到早上 6 点之间的交通量很少。
*   ...

有谁知道如何做到这一点，以及从哪里开始？

先感谢您！

JSON 样本数据（查看“数据”数组）：

```
{"data":[5,4,4,3,4,12,4,4,4,3,6,4,3,4,4,10,4,4,3,4,6,3,4,4,3,10,4,3,4,4,5,4,4,3,4,11,3,4,4,3,6,4,3,6,4,9,4,4,3,8,6,3,4,4,3,8,4,2,4,8],"trend":[29.111667641538,27.867587040805],"start":"10-08-2012 09:55","stop":"10-08-2012 10:55"} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-10T09:01:09.520

进行模式检测的最佳方法是通过统计分析 - 这允许您将模式表示为数学模型，并且统计分析工具会查看数据以查看该模型是否匹配。

开源统计工具中的父亲是 R -[可以从 PHP 调用它。](https://stackoverflow.com/questions/5118232/is-there-a-statistics-library-for-php)

# php - Php：魔术函数是否像魔术常量：不区分大小写？

> ID：11898262
> 
> 赞同：3
> 
> 时间：2012-08-10T08:49:19.110
> 
> 标签：php, case-insensitive

在官方手册中，您可以阅读魔术常量不区分大小写：

[http://php.net/manual/en/language.constants.predefined.php](http://php.net/manual/en/language.constants.predefined.php)

我已经测试过`__tostring()`并且`__toString()`它是相同的=不区分大小写。

没有关于它的文档。

你知道是否**所有**的魔法函数都像魔法常数 = 不区分大小写吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-10T08:52:28.957

> **注意：**函数名称不区分大小写，尽管在函数声明中出现时调用函数通常是一种很好的形式。

[http://www.php.net/manual/functions.user-defined.php](http://www.php.net/manual/functions.user-defined.php)

这与函数名称在 PHP 内部的存储方式有关。对于某些语言（如土耳其语），这甚至会导致问题：

*   [错误 #18556 - 将语言环境设置为“tr_TR”小写类名](https://bugs.php.net/bug.php?id=18556)

* * *

另一方面，变量名区分大小写：

> 变量名区分大小写。

[http://php.net/manual/language.variables.basics.php](http://php.net/manual/language.variables.basics.php)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-10T08:50:53.223

是的，php 上的所有函数都不区分大小写

# iphone - 取消推送转场

> ID：11898265
> 
> 赞同：0
> 
> 时间：2012-08-10T08:49:31.700
> 
> 标签：iphone, objective-c, xcode, ios5, segue

我有一个使用 UINavigationBarController 的应用程序，我推送到所有 ViewControllers，但在一个 ViewController 中，我希望用户在 PickerView 中选择一个值，如果他们没有选择任何东西，那么当他们点击 Next 按钮时（哪个是下一个视图控制器的推送转场）我希望他们得到一个警报（这已经修复），但也取消转场，所以它不会移动到下一个视图控制器。

在此先感谢，迈克

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-10T09:14:40.343

我的方法是以编程方式更改 uibutton 操作。如果尚未选择日期，则按钮会触发警报。当用户选择日期时，更改“下一步”按钮的操作以执行带有标识符的 segue。

# google-apps-script - Google Apps 上的剪贴板操作？

> ID：11898268
> 
> 赞同：0
> 
> 时间：2012-08-10T08:49:49.160
> 
> 标签：google-apps-script, clipboard, google-apps

无论如何可以访问和操作 Google Docs 文档上的剪贴板吗？

我查看了 Google App Script 文档和博客，但还没有找到解决方法。

这个想法是在复制的文本周围包裹一个固定的文本字符串，所以复制：

AAAAAA 会让用户粘贴：

" AAAAAAA " (appended_text_string) 因此用户可以从给定文档中复制文本引号，并将文本粘贴到 Powerpoint 中，并在其周围附加引号和一些额外的文本数据。

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-10T09:24:41.883

不，没有办法做到这一点。Google Drive 提供了一个网络剪贴板，但无法通过 API 访问。

请参阅[Google Web 剪贴板是否有任何 Web API？](https://stackoverflow.com/questions/10202863/is-there-any-web-api-for-google-web-clipboard)

# sql - Transact SQL - 动态构建列名

> ID：11898272
> 
> 赞同：4
> 
> 时间：2012-08-10T08:50:06.223
> 
> 标签：sql, sql-server-2008, tsql

这对我来说太棘手了...

我在 Microsoft SQL Server 2008 上工作，我有一个包含人名的表。这些人的名字可能会随着时间而改变，因此也有历史信息。

例子：

```
PID Sequence Name
1   0        Michael Hansen
2   0        Ulla Hansen
2   94       Ulla Margrethe Hansen
2   95       Ulla Margrethe Jensen
3   0        Daniella Oldfield
3   95       Daniella Quist 
```

（我还没有建立这个表——所以我不能进去改变数据的存储方式）。PID 为 1 的人称为 Michael Hansen。这是他的当前姓名（序列 0 始终指定当前姓名）并且由于没有其他记录，他一直被命名为 Michael Hansen。

个人 PID 2 当前称为 Ulla Hansen（序列 0）。在此之前，她被称为 Ulla Margrethe Hansen（因为这是下一个序列号），在此之前，她又被称为 Ulla Margrethe Jensen。

我对这张表的了解是当前名称始终是序列 0。我还知道，如果有两个名称，则下一个序列是 95。以及三个历史名称：当前名称：序列 0，在该序列之前 94 和最旧的名称95.

我的数据库包含最多 6 个历史名称的信息（序列 0、91、92、93、94、95）。

现在我被告知要在一个新表中列出所有名称，每人只有一行，例如：

```
PID Name1             Name2                   Name3
1   Michael Hansen
2   Ulla Hansen       Ulla Margrethe Hansen   Ulla Margrethe Jensen
3   Daniella Oldfield Daniella Quist 
```

到目前为止，我有以下几乎可以工作的 SQL：

```
SELECT PID 
  ,MAX(CASE sequence WHEN 0 THEN Name ELSE '' END) AS Name1
  ,MAX(CASE sequence WHEN 91 THEN Name ELSE '' END) AS Name2
  ,MAX(CASE sequence WHEN 92 THEN Name ELSE '' END) AS Name3
  ,MAX(CASE sequence WHEN 93 THEN Name ELSE '' END) AS Name4
  ,MAX(CASE sequence WHEN 94 THEN Name ELSE '' END) AS Name5
  ,MAX(CASE sequence WHEN 95 THEN Name ELSE '' END) AS Name6
FROM tblShipTypeHistory
GROUP BY PID 
```

它在每个 PID 的一行中为我提供了我想要的所有名称。当前名称也始终列在 Name1 下。问题是我需要第二个最新的名字出现在 Name2 列等中。我的情况（当然）只有在一个人有六个名字的情况下才有效。

所以我需要做的是根据 PID 实际拥有的名称动态命名列 Name2 到 Name6。所以我尝试动态地构建我的 SQL（DECLARE @SQL AS NVARCHAR(MAX) 然后将 @SQL = 设置为上面的 SQL 示例）。然后我尝试了类似的东西

```
SET @SQL = 'SELECT ....
,MAX(CASE sequence WHEN 91 THEN Name ELSE '' END) AS Name' + COUNT(PID) - 4 + '
,MAX(CASE sequence WHEN 92 THEN Name ELSE '' END) AS Name' + COUNT(PID) - 3 + '
,MAX(CASE sequence WHEN 93 THEN Name ELSE '' END) AS Name' + COUNT(PID) - 2 + '
,MAX(CASE sequence WHEN 94 THEN Name ELSE '' END) AS Name' + COUNT(PID) - 1 + '
,MAX(CASE sequence WHEN 95 THEN Name ELSE '' END) AS Name' + COUNT(PID) + ' 
```

逻辑上这可以工作（它会给出正确的列名），但不幸的是语法“+ count(PID)”不起作用。

（呸！）那么有谁对此有解决方案吗？

先感谢您。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-10T09:40:45.993

将 RANK() 和 PIVOT() 结合使用。Rank() 找出名称的“年龄”，枢轴获取所有列。

```
create table t(pid int not null, sequence int not null, name nvarchar(50))

INSERT INTO t VALUES
(1,   0,        N'Michael Hansen'),
(2,   0,        N'Ulla Hansen'),
(2,   94,       N'Ulla Margrethe Hansen'),
(2,   95,       N'Ulla Margrethe Jensen'),
(3,   0,        N'Daniella Oldfield'),
(3,   95,       N'Daniella Quist')

SELECT pid, [1] as Name1, [2] as Name2, [3] as Name3, [4] as Name4, [5] as Name5, [6] as Name6
FROM
(
SELECT pid, name, rank() over(partition BY pid ORDER BY sequence) AS name_age
FROM t) SOURCE
PIVOT
(
  max(name)
 FOR [name_age] in ([1], [2], [3], [4], [5], [6])) as pvt 
```

Sql 小提琴：[http ://sqlfiddle.com/#!3/d8301/16](http://sqlfiddle.com/#!3/d8301/16)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-10T09:24:16.843

您的语法错误在于您试图将`COUNT(*)`int 与 NVARCHAR 连接起来。我认为这样的事情对你有用：

```
SET @SQL = 'SELECT ....
,MAX(CASE sequence WHEN 91 THEN Name ELSE '' END) AS Name' + CAST(COUNT(PID) - 4 AS NVARCHAR) + '
,MAX(CASE sequence WHEN 92 THEN Name ELSE '' END) AS Name' + CAST(COUNT(PID) - 3 AS NVARCHAR) + '
,MAX(CASE sequence WHEN 93 THEN Name ELSE '' END) AS Name' + CAST(COUNT(PID) - 2 AS NVARCHAR) + '
,MAX(CASE sequence WHEN 94 THEN Name ELSE '' END) AS Name' + CAST(COUNT(PID) - 1 AS NVARCHAR) + '
,MAX(CASE sequence WHEN 95 THEN Name ELSE '' END) AS Name' + CAST(COUNT(PID) AS NVARCHAR) + ' 
```

但是，这似乎不是很有未来的证据，因为您仍在手动创建 SQL，我不确定为什么您的序列从 0 变为 91，但我假设它们将始终按升序排列，即使存在间隙所以已经使用该`ROW_NUMBER()`函数来获取每个名称的实例：

```
DECLARE @SQL NVARCHAR(MAX) = '',
        @PVT NVARCHAR(MAX) = ''

SELECT  @SQL = @SQL + ', COALESCE(' + QUOTENAME('Name' + RowNum) + ', '''') AS ' +  QUOTENAME('Name' + RowNum),
        @PVT = @PVT + ', ' + QUOTENAME('Name' + RowNum)
FROM    (   SELECT  DISTINCT CONVERT(VARCHAR, ROW_NUMBER() OVER(PARTITION BY PID ORDER BY Sequence)) [RowNum]
            FROM    tblShipTypeHistory
        ) rn

SET @SQL = 'SELECT PID' + @SQL + '
            FROM    (   SELECT  PID, 
                                Name, 
                                ''Name'' + CONVERT(VARCHAR, ROW_NUMBER() OVER(PARTITION BY PID ORDER BY Sequence)) [NameID]
                        FROM    tblShipTypeHistory
                    ) data
                    PIVOT
                    (   MAX(Name)
                        FOR NameID IN (' + STUFF(@PVT, 1, 2, '') + ')
                    ) pvt'

EXECUTE SP_EXECUTESQL @SQL 
```

**[SQL Fiddle 示例](http://www.sqlfiddle.com/#!3/c772f/1)**

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-10T09:48:02.363

```
with names(pid, name, rn) as 
(
  select pid, 
         name, 
         ROW_NUMBER() over (partition by pid order by sequence) 
  from tblShipTypeHistory
)
select pid, 
       [1] as Name1, 
       [2] as Name2, 
       [3] as Name3, 
       [4] as Name4, 
       [5] as Name5, 
       [6] as Name6
from names pivot(max(name) for rn in ([1], [2], [3], [4], [5], [6])) as a; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-10T09:12:10.347

尝试动态 PIVOT [http://beyondrelational.com/modules/2/blogs/70/posts/10840/dynamic-pivot-in-sql-server-2005.aspx](http://beyondrelational.com/modules/2/blogs/70/posts/10840/dynamic-pivot-in-sql-server-2005.aspx)

# google-chrome - Selenium：Chrome 和 contextMenu 项目按下

> ID：11898275
> 
> 赞同：3
> 
> 时间：2012-08-10T08:50:26.937
> 
> 标签：google-chrome, selenium, contextmenu

我想在不同的浏览器中测试从上下文菜单粘贴。

我`new Actions(driver).contextClick(element).perform();`用于调用上下文菜单，它适用于 Firefox 和 Chrome。

在 Firefox 中选择我正在使用`driver.getKeyboard().sendKeys("p");`的菜单项，它也很好。

但我不知道如何在 Chrome 中执行此操作：每次我尝试从驱动程序的键盘输入某些内容时，文本都会出现在文本字段中（在该文本字段中调用了上下文菜单）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-09-24T13:23:04.430

上下文切换的模拟机制存在错误。在 Chromedriver 2.2 中，这个问题得到了解决。如果您想了解有关此问题的更多信息，[请查看此链接](http://code.google.com/p/chromedriver/issues/detail?id=410)。在旧版本的 chromedriver 中，尝试通过 JavaScript 模拟上下文菜单事件。

# jmeter - 运行多组参数Jmeter

> ID：11898278
> 
> 赞同：0
> 
> 时间：2012-08-10T08:50:45.947
> 
> 标签：jmeter

我正在使用 Jmeter 记录表单提交到数据库的响应时间（表单在参数请求中设置）即名称-值。

如果我选择 20 个线程，它将运行相同的参数集 20 次，但是如果我想让每个线程运行不同的参数集怎么办，我将如何实现呢？

有没有人这样做过？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-10T10:51:36.770

在您的情况下，您应该使用[CSV 数据集配置](http://jmeter.apache.org/usermanual/component_reference.html#CSV_Data_Set_Config)元素：

*   对所有线程使用共享模式。
*   将线程数设置为 20 并将迭代设置为您想要的数量，但您需要有足够的数据集。

这将为每个线程提供不同的行，由您正确组织数据。

问候

菲利普

# expect - 如何使用expect登录远程机器？

> ID：11898285
> 
> 赞同：0
> 
> 时间：2012-08-10T08:51:00.337
> 
> 标签：expect

我正在使用期望登录到远程机器。但我真的不知道这个期望到底是什么。通过谷歌搜索，我了解了这些命令。如何保存这些脚本以及如何执行它？

```
spawn telnet 10.123.9.111
expect login {send username\r}
expect password {send password\r} 
```

这个对吗 ？欢迎提出改进此脚本的建议。谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-10T10:36:54.440

Save this to a file `telnet.exp`:

```
#!/usr/bin/expect -f
spawn telnet 10.123.9.111
expect login {send username\r}
expect password {send password\r}
interact  ;# I assume you want to do something on the remote machine here 
```

Make it executable: `chmod 700 telnet.exp` -- you want to use restrictive permissions since you're storing your password in a plain-text file which is not a good idea (you should be using ssh with keys unless the device cannot run ssh)

Run it: `./telnet.exp`

If you want to be able to pass variables to your script:

```
#!/usr/bin/expect -f
lassign $argv ip user passwd
spawn telnet $ip
expect login {send $user\r}
expect password {send $passwd\r}
interact  ;# I assume you want to do something on the remote machine here 
```

Run it: `./telnet.exp 10.123.9.111 username secret`

This is bad too because now the password will show up in a `ps` listing.

# c#-4.0 - 基于颜色名称的颜色代码

> ID：11898291
> 
> 赞同：0
> 
> 时间：2012-08-10T08:51:17.223
> 
> 标签：c#-4.0

我在 C#.Net 中工作。在下拉列表中，我应该加载所有系统颜色。在选定的索引中应该得到选定颜色的颜色代码。这是我的代码。

```
public void PopulateColourDropDown()
{
    System.Drawing.Color c1 = new System.Drawing.Color();
    Type t = c1.GetType();
    foreach (PropertyInfo p1 in t.GetProperties())
    {
        ColorConverter d = new ColorConverter();
        try
        {
            ddlColour.Items.Add(p1.Name);
        }
        catch
        {
        }
    }
} 
```

在选定的索引更改中，我给出了这样的代码..

```
 protected void ddlColour_SelectedIndexChanged(object sender, EventArgs e)
{
    Color c = Color.FromName(ddlColour.SelectedValue);
    string HashCode = Convert.ToString(c.GetHashCode());
    Color color = System.Drawing.ColorTranslator.FromHtml(HashCode);
    string colourCode = color.Name;
    TextBox1.BackColor = c;
} 
```

但我没有得到适当的颜色代码..

怎么得到那个...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-10T08:54:52.107

你可以使用这个：[Color.Fromname](http://msdn.microsoft.com/en-us/library/system.drawing.color.fromname.aspx)

# c# - 如何记录异常信息以进行故障排除？

> ID：11898293
> 
> 赞同：3
> 
> 时间：2012-08-10T08:51:19.813
> 
> 标签：c#, .net, exception, logging

我目前正在对 Windows 服务进行维护，并且在代码中的某些点有一些异常处理（例如，在来自计时器和其他外部事件的回调中）：

```
try {
  ...
}
catch (Exception ex) {
   _logger.Log("Unhandled exception: {0}\r\n{1}", ex.Message, ex.StackTrace);
   Environment.FailFast("Fatal error.");
} 
```

记录异常信息有助于排除故障。但是，有时有趣的信息是内部异常，这使得很难确定问题的根本原因。例如，a`TypeInitializationException`可能很难理解。

是否有更好的方法来记录异常信息以进行故障排除？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-10T08:51:19.813

> 是否有更好的方法来记录异常信息以进行故障排除？

就在这里。不要“聪明”并使用`ex.Message`and `ex.StackTrace`. 只需使用`ex.ToString()`. 它将递归到内部异常（如果需要，可以多级）并显示完整的堆栈跟踪。

```
try {
  ...
}
catch (Exception ex) {
   _logger.Log("Unhandled exception:\r\n{0}", ex);
   Environment.FailFast("Fatal error.");
} 
```

举一个小例子，如果您创建一个在类的静态构造函数中引发异常的类的实例，就会得到这样的结果。这个异常抛出将被包裹在一个`TypeInitializationException`.

前：

```
未处理的异常：“SomeClass”的类型初始化程序引发了异常。
   在 SomeNamespace.SomeClass..ctor()
   在 c:\ExceptionHandlingDemo.cs:line 34 中的 SomeNamespace.Callback()

```

不是很有帮助。很难确定出了什么问题。

后：

```
未处理的异常：
System.TypeInitializationException：“SomeClass”的类型初始化程序引发了异常。---> System.ArgumentException：已添加具有相同键的项目。
   在 System.ThrowHelper.ThrowArgumentException（ExceptionResource 资源）
   在 System.Collections.Generic.Dictionary`2.Insert(TKey key, TValue value, Boolean add)
   在 System.Collections.Generic.Dictionary`2.Add（TKey 键，TValue 值）
   在 c:\ExceptionHandlingDemo.cs:line 43 中的 SomeNamespace.SomeClass..cctor()
   --- 内部异常堆栈跟踪结束 ---
   在 SomeNamespace.SomeClass..ctor()
   在 c:\ExceptionHandlingDemo.cs:line 34 中的 SomeNamespace.Callback()

```

现在您可以很容易地确定问题的根本原因是字典中的重复键，并将其精确定位到源文件中的第 43 行。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-10T10:49:45.197

我不知道这是否会有所帮助，或者它是否太高，但是您知道 Microsoft 的企业库吗？（[http://msdn.microsoft.com/en-us/library/ff648951.aspx](http://msdn.microsoft.com/en-us/library/ff648951.aspx)）。

其中有一个日志记录“应用程序块”，它有点像大锤，但最终非常强大/灵活。在完成了我想要的设置（它全部由配置驱动）的练习之后，这现在是我构建的 exerything 的标准。

特别是在例外情况下，我认为我根本不需要做太多事情来获取有意义的信息。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-22T15:27:59.873

我不确定这是否会有所帮助。我写了这个 Utility 类来记录异常的所有信息，我使用**Exception.Data**和**Exception.Message**来记录信息

这里分享的东西：[https ://stackoverflow.com/a/15005319/1060656](https://stackoverflow.com/a/15005319/1060656)

```
public class ExceptionInfoUtil
{
    public static string GetAllExceptionInfo(Exception ex)
    {
        StringBuilder sbexception = new StringBuilder();

        int i = 1;
        sbexception.Append(GetExceptionInfo(ex, i));

        while (ex.InnerException != null)
        {
            i++;
            ex = ex.InnerException;
            sbexception.Append(GetExceptionInfo(ex, i));
        }

        return sbexception.ToString();
    }

    private static string GetExceptionInfo(Exception ex, int count)
    {
        StringBuilder sbexception = new StringBuilder();
        sbexception.AppendLine(string.Format(""));
        sbexception.AppendLine(string.Format(""));
        sbexception.AppendLine(string.Format("************************************************"));
        sbexception.AppendLine(string.Format("************************************************"));
        sbexception.AppendLine(string.Format(" Inner Exception : No.{0} ", count));
        sbexception.AppendLine(string.Format("************************************************"));
        sbexception.AppendLine(string.Format("=================================================="));
        sbexception.AppendLine(string.Format(" Error Message : {0} ", ex.Message));
        sbexception.AppendLine(string.Format("=================================================="));
        #region Mine Thru data dictionary

        try
        {
            sbexception.AppendLine(string.Format("=================================================="));
            sbexception.AppendLine(string.Format(" Data parameters Count at Source :{0}", ex.Data.Count));
            sbexception.AppendLine(string.Format("=================================================="));

            string skey = string.Empty;
            foreach (object key in ex.Data.Keys)
            {
                try
                {
                    if (key != null)
                    {
                        skey = Convert.ToString(key);
                        sbexception.AppendLine(string.Format(" Key :{0} , Value:{1}", skey, Convert.ToString(ex.Data[key])));
                    }
                    else
                    {
                        sbexception.AppendLine(string.Format(" Key is null"));
                    }
                }
                catch (Exception e1)
                {
                    sbexception.AppendLine(string.Format("**  Exception occurred when writting log *** [{0}] ", e1.Message));
                }
            }
        }
        catch (Exception ex1)
        {
            sbexception.AppendLine(string.Format("**  Exception occurred when writting log *** [{0}] ", ex1.Message));
        }

        #endregion
        sbexception.AppendLine(string.Format("=================================================="));
        sbexception.AppendLine(string.Format(" Source : {0} ", ex.Source));
        sbexception.AppendLine(string.Format("=================================================="));
        sbexception.AppendLine(string.Format(" StackTrace : {0} ", ex.StackTrace));
        sbexception.AppendLine(string.Format("=================================================="));
        sbexception.AppendLine(string.Format(" TargetSite : {0} ", ex.TargetSite));
        sbexception.AppendLine(string.Format("************************************************"));
        sbexception.AppendLine(string.Format(" Finished Writting Exception info :{0} ", count));
        sbexception.AppendLine(string.Format("************************************************"));
        sbexception.AppendLine(string.Format("************************************************"));
        sbexception.AppendLine(string.Format(""));
        sbexception.AppendLine(string.Format(""));

        return sbexception.ToString();

    }
} 
```

下面是使用此实用程序类的示例类

```
[Serializable]
    public class FlatFileItem
    {
        ArrayList errorlist = new ArrayList();

        public FlatFileItem()
        {
            if (errorlist == null) { errorlist = new ArrayList(); }
        }

        //Name of the file
        public string FileName { get; set; }
        public override string ToString()
        {
            return string.Format(@"FlatFileItem (Unzip FTPLineItem) => FileName:{0}",  this.FileName);
        }
    }

public class someclass {
    public void somemethod(){
        try{

              //Throw exception code

        } catch (Exception ex)
                    {
                        ex.Data["flatfile"] = Convert.ToString(flatfile);  //Using data property
                        flatfile.HasErrors = true;  //not there in above example
                        flatfile.Parent.AddErrorInfo(ex); //not there in above example
                        logger.Error(String.Format(ex.Message)); //not there in above example

                        throw ( new Exception ("yourmsg",ex)); //if you want to do this
                    }
    }
} 
```

# c++ - std::vector 的高效初始化

> ID：11898297
> 
> 赞同：2
> 
> 时间：2012-08-10T08:51:34.320
> 
> 标签：c++

std::vector 在内部包含给定类型的连续内存缓冲区，布尔值除外。无论如何都可以通过指定此缓冲区来构造向量，从而不需要处理数据？

我有一个 C api，它为我提供了某种类型的数据缓冲区。我希望能够通过与 std::vector 相关的功能来操作这些数据，例如 std::vector<>::iterator、begin()、end() 等。

也许您对我如何使用这些缓冲区有更好的建议，因为它们很大，我不想复制它们。

api 分配内存并提供一个函数，我调用它来告诉它再次释放它。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-10T09:09:49.103

为什么不将缓冲区包装在一个包含您希望能够使用的功能的简单类中。使用指针是迭代器这一事实，这样的事情可能就足够了。

```
template<typename T>
struct RawBuffer<T>
{
  RawBuffer( T* in_buffer, size_t in_n ) : buffer(in_buffer), n(in_n) {}
  T* buffer;
  size_t n;
  T* begin() { return buffer; }
  T* end() { return buffer+n; }
  const T* begin() const { return buffer; }
  cont T* end() const { return buffer+n; }
  T& operator[](size_t i) { return buffer[i]; }
  const T& operator[](size_t i) const { return buffer[i]; }
}; 
```

现在你可以像使用矢量一样使用它：

```
RawBuffer<MyObject> values( generate_objects(n), n );

//Set an entry
values[1] = MyObject()

//Or use an entry
values[1].do_something();

//Lets use some std functions on the object.
std::for_each( values.begin(), values.end(), my_object_fn );

//Or create a real vector from it
std::vector<MyObject> values_copy( values.begin(), values.end() ); 
```

如果您还想管理缓冲区包含的内存，那么您需要添加一个析构函数并删除默认的复制构造函数和赋值运算符。

# android - 在android中创建渐变颜色边框形状

> ID：11898300
> 
> 赞同：5
> 
> 时间：2012-08-10T08:51:39.423
> 
> 标签：android, colors, shape

在android中，我想`shape`在文件夹中定义一个文件`drawable`：`myShape.xml`如下所示：

```
 <?xml version="1.0" encoding="utf-8"?>
<shape xmlns:android="http://schemas.android.com/apk/res/android" 
      android:shape="rectangle">
    <solid android:color="@color/white"/>
    <corners android:radius="@dimen/corner"/>
    <stroke 
        android:width="5dp"
        android:color="@color/boder_endcall_color"/>
</shape> 
```

我想在 中创建一个渐变边框`<stroke />`，但实际上我不知道如何！所以任何人都可以举一个`shape`用`gradient`颜色创建的例子`stroke`吗？谢谢！

**编辑：**我想要`gradient`从`#F85C5C`（红色）到`#F68282`（红色）的颜色。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-11T07:04:34.860

您最好的选择是使用已将渐变设置为所需颜色的九个补丁图像（我没有看到任何简单的方法可以在 xml drawable 中执行该渐变）。

例如，在这里使用您的颜色是这样的九个补丁（忽略我糟糕的设计技巧）：

![九块图像](../Images/b32e4dcc5ca2cc7baf937d05b2607251.png)

当然，为了获得最佳效果，您应该针对不同的分辨率（ldpi、hdpi 等）使用不同的九个补丁图像

# c - 在 Ubuntu 上创建二进制文件

> ID：11898301
> 
> 赞同：0
> 
> 时间：2012-08-10T08:51:39.453
> 
> 标签：c, binary

我想使用 ubuntu 从 C 文件创建一个二进制文件。我做了类似的事情：

```
gcc -c ArrayError3.c -o ArrayError3\. 
```

这会在我的桌面上创建一个文件 ArrayError3。当我点击它时，ubuntu 告诉我没有为目标文件安装应用程序。我是 C 和 linux 的新手。谁能告诉我如何解决这个问题？非常感谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-10T08:53:40.213

只需放下它，`-c`这样它就不会在制作目标文件后停止。该`-c`选项告诉`gcc`不要运行链接器。如果省略它，gcc 将为您生成一个完整的可执行文件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-10T08:56:19.193

您需要阅读更多关于 GCC 的论点的含义。该`-c`选项告诉 GCC 创建一个*目标文件*，而不是一个可执行文件。需要链接此目标文件以创建可执行文件。

当您有多个源文件需要链接在一起以形成一个可执行文件时，这通常使用。例子：

```
$ gcc source1.c -c -o source1.o
$ gcc source2.c -c -o source2.o
$ gcc source1.o source2.o -o exec 
```

您的解决方案就是不使用该`-c`选项。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-10T09:07:42.763

问题出在

```
gcc -c 
```

-c 开关使 GCC 不会将您的代码链接到实际的可执行文件，只会将其编译为[目标文件](http://en.wikipedia.org/wiki/Object_file)，这不是“完整”格式，它还不能运行。只用

```
gcc ArrayError3.c -o ArrayError3 
```

反而。

# javascript - 无法在 IE8 中读取对象属性

> ID：11898305
> 
> 赞同：0
> 
> 时间：2012-08-10T08:51:49.420
> 
> 标签：javascript, json, internet-explorer

我有以下代码，它在 IE8 中不起作用（在 Firefox 中完美运行）：

```
response = eval('({"success":true,"statuses":[{"title":"Unknown","code":"UNKNOWN","cssClass":"sys_unknown","id":1}]})');

for (var i in response.statuses) {
    status = response.statuses[i];
     if (status.id != undefined) {
        alert('ID = ' + status.id);
     }
} 
```

有人可以告诉你出了什么问题吗？谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-10T09:01:35.137

尝试这个：

```
response = eval('({"success":true,"statuses":[{"title":"Unknown","code":"UNKNOWN","cssClass":"sys_unknown","id":1}]})');

var s = response.statuses;
for (var i=0,len = s.length;i<len;i++) {
    var st = s[i];
     if (typeof st.id != 'undefined') {
        alert('ID = ' + st.id);
     }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-10T09:05:02.313

首先，尝试始终使用`var`关键字声明变量。如果不这样做，它们将成为`window`对象的属性，有效地将它们添加到全局范围。

它不起作用的原因是因为这条线：`status = response.statuses[i];`

您不需要重命名变量，因为您不在全局范围内，只要您使用 var 关键字声明它： `var status = response.statuses[i];`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-10T09:00:04.697

`status`是 IE 中的保留关键字。尝试重命名您的 var。

# node.js - 如何访问 node.js 应用程序的咖啡脚本文件的内部结构？

> ID：11898308
> 
> 赞同：1
> 
> 时间：2012-08-10T08:51:57.940
> 
> 标签：node.js, coffeescript

我有一个基本的 Node.js+socket.io 应用程序，并且想要包含咖啡脚本文件。很容易将文件包含在

```
require('coffee-script');
items = require('./brain/items.coffee'); 
```

它有效 - console.log 抛出调试信息。但我无法从文件中访问变量、函数和其他内容。同样在导入文件的编译版本中，它看起来是这样的：

```
(function() {
  var a,run;
  a = 'ok';
  run = function() {
    return console.log('all-oik!');
  };
}).call(this); 
```

所以它看起来对我来说就像它在自己的范围内运行并且真的无法从其他脚本访问（我错了吗？我对高级 JS 不太擅长）。

我该如何解决这个问题并从主应用程序中获取咖啡内容？

PS：主应用程序是一个普通的 .js 文件，而不是咖啡脚本，如果重要的话。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-10T09:14:18.527

这不是特定于咖啡脚本的问题。您是否尝试过从主文件中的普通 js 文件导入函数？那是怎么回事？

您可以阅读许多方便的介绍之一：http: [//openmymind.net/2012/2/3/Node-Require-and-Exports/](http://openmymind.net/2012/2/3/Node-Require-and-Exports/)

您会发现 node 的 require 使用 commonjs 模块，并且要在模块之外提供某些东西，您需要将其分配给`module.exports`变量。

所以在你的情况下：（在咖啡脚本中）

```
module.exports.a = 'ok'
module.exports.run = () ->
  return console.log 'all-oik!' 
```

# jsf - Websphere 上 JSF 1.2 中的 HTTP 身份验证

> ID：11898311
> 
> 赞同：1
> 
> 时间：2012-08-10T08:52:03.710
> 
> 标签：jsf, jsf-1.2

我在 Webshere 7.0 上使用 JSF 1.2 + Tomahawk 1.1.13

我的 web.xml：

```
<welcome-file-list>
    <welcome-file>/search.faces</welcome-file>
</welcome-file-list>

<security-constraint>
    <display-name>Websphere Security Constraint</display-name>
    <web-resource-collection>
        <web-resource-name>Default</web-resource-name>
        <description />
        <url-pattern>/*</url-pattern>
    </web-resource-collection>
</security-constraint>

<login-config>
    <auth-method>FORM</auth-method>
    <form-login-config>
        <form-login-page>/login.jsp</form-login-page>
        <form-error-page>/login.jsp</form-error-page>
    </form-login-config>
</login-config> 
```

我的登录.jsp：

```
<form method="post" action="j_security_check">

    <jsp:include page="head.jsp" />

    <t:panelGrid columns="2" border="1"
        columnClasses="unfixedCol,fixedCol"
        style="style=text-align:top; margin-top:20px; margin-bottom:20px;">

        <t:panelGroup>
            Login
        </t:panelGroup>
        <t:panelGroup>
            <h:inputText id="j_username" autocomplete="off" size="20" />
        </t:panelGroup>

        <t:panelGroup>
            Password
        </t:panelGroup>
        <t:panelGroup>
            <h:inputSecret id="j_password" autocomplete="off" size="20" />
        </t:panelGroup>

        <f:facet name="footer">
            <t:panelGroup colspan="4"
                style="text-align:right; background-color:#d9e2f2;">
                <h:commandButton type="submit" value="Submit" /> &nbsp; 
                <h:commandButton type="reset" value="Reset" />
            </t:panelGroup>
        </f:facet>

    </t:panelGrid>

    <jsp:include page="foot.jsp" />

</form> 
```

当我访问 /localhost:9080/App/ 并输入正确的凭据时，一切似乎都很好，我登录了，但这有问题：

1.  我可以在没有安全检查的情况下访问应用程序 jsp 页面（我可以在没有检查的情况下访问 /localhost:9080/App/search.jsp，但是当我访问 /localhost:9080/App/ 时 - 有安全检查）。尝试了不同的 url 模式。

2.  当我尝试使用 FacesContext.getCurrentInstance().getExternalContext().getUserPrincipal() 获取 HTTP 会话用户时 - 当我登录 id 时，始终为空。为什么？

检查了所有指南，包括一些 stackowerflow 问题，但没有意识到我的问题在哪里。

感谢帮助

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-15T13:57:31.633

对于我们的应用程序，我们定义如下：

web.xml

```
<security-constraint>
    <display-name>Security Constraint</display-name>
    <web-resource-collection>
        <web-resource-name>Protected Area</web-resource-name>
        <url-pattern>*.jsf</url-pattern>
        <http-method>GET</http-method>
        <http-method>POST</http-method>
    </web-resource-collection>
</security-constraint> 
```

并且由于我们还集成了 LDAP 身份验证，因此我们创建了自定义`application-policy`并在`realm`

```
<login-config>
    <auth-method>FORM</auth-method>
    <realm-name>OUR_AUTH_NAME_DEFINED_IN_login-config.xml</realm-name>
    <form-login-config>
        <form-login-page>/login.jsp</form-login-page>
        <form-error-page>/login.jsp?invalidUser=true</form-error-page>
    </form-login-config>
</login-config> 
```

希望这可以帮助！！！

# c# - GridView 显示包含列表的对象列表中的所有记录

> ID：11898313
> 
> 赞同：0
> 
> 时间：2012-08-10T08:52:06.347
> 
> 标签：c#, wpf, gridview

如果有 2 种类型，A 和 B

```
class A 
{
    public string Name { get; set; }
    public List<B> Children { get; set; }
}

class B
{
    public string Name { get; set; }
    public A Parent { get; set; }
} 
```

在我的视图模型中，我有一个`List<A> Items;`

我想绑定一个网格视图，因此事件 B 有 1 行显示`A.Name`例如

```
A.Name       B.Name
  A1           B1
  A1           B2
  A1           B3
  A2           B1
  A3         {NULL} 
```

但是，就像在 A3 上一样，如果`List<B> Children`为空，我仍然想查看 A 的行。

我唯一能想到的就是拥有第三种类型，例如包含 2 个字符串的 C 并编写代码来制作它们的列表并绑定到它，我只是希望有更好的方法。

我确实认为我可以使用`Items.SelectMany(a => a.B);`然后使用，`Parent.Name`但这不包括 Children 为空的 A 项目。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-10T09:02:26.697

你确定你需要一个 DataGrid 吗？看起来你正在做一些分层的事情，所以我会使用树视图或者你到底想做什么......我想我无法理解你，所以你可以给我一个更好的例子

# php - 如何通过打印机 IP 从 javascript 或 PHP 在 Zebra ZM400 上打印？

> ID：11898314
> 
> 赞同：1
> 
> 时间：2012-08-10T08:52:09.263
> 
> 标签：php, javascript, printing, zebra-printers

我知道有一些几乎相似的线程，但没有一个是相同的，也没有一个对我有帮助。我必须用 Zebra ZM400 打印机打印票，但在过去的两天里我没能做到这一点。由于我没有在网上找到明确且有效的解决方案，我希望你们能给我一个解决方案。我尝试了两种方法：

1.  jZebra：我设置了打印机名称，然后按了打印，但我总是收到错误消息：“打印机不接受作业”。没有得到任何解决方案。而且我认为这将是一个 printover USB 而不是 IP，因为我找不到任何设置来调整打印机的 IP 地址。
2.  我尝试使用以下类进行打印，但即使尝试示例代码也没有任何反应：[http](http://www.phpclasses.org/package/2540-PHP-Abstraction-for-printing-documents.html) ://www.phpclasses.org/package/2540-PHP-Abstraction-for-printing-documents.html 。我收到 PHP 超时错误。连打印机都找不到。

欢迎任何建议。谢谢！

# c - 将变量 ID 与值一起存储的有效方法是什么？

> ID：11898318
> 
> 赞同：0
> 
> 时间：2012-08-10T08:52:23.567
> 
> 标签：c, data-structures

我希望将我的数据存储在允许我有效地执行以下操作的数据结构中：

我有 10 个类型为 1 的数组和 10 个类型为 2 的数组，每个数组有 100 个元素。这些数组中的每一个都存储 100 个变量的值。伴随着这些，我有 20 个包含相应变量 ID 的数组。类型 1 的数组总共存储 1000 个变量的值，类型 2 的数组存储相同 1000 个变量的不同值。

现在，我需要将类型 1 数组中的变量值与类型 2 数组中的变量值进行区分。让 A 成为类型 1 数组中的一个。问题是 A 中的变量每个会分布 10跨越所有 10 个类型 2 的数组。

哈希映射没有用，因为我还需要遍历每个数组中的值。有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-10T09:17:42.277

如果您打算经常执行此类操作，您可能希望在程序启动时构造和索引一次（构造具有`O(n^2)`时间复杂度），然后再参考它。

```
struct LookupEntry {
   A *item1;
   B *item2;
};

std::map< IdType, LookupEntry > index; 
```

这将允许您线性地遍历类型数组并在恒定时间内`A`从类型数组中获取值。`B`您也可以以类似的方式`B`从中减去项目。`A`

或者，您可以浏览索引项目并从另一个项目中减去一个项目。

# linux - 如何应用可能使用 diff -r 命令创建的补丁？

> ID：11898324
> 
> 赞同：2
> 
> 时间：2012-08-10T08:52:56.470
> 
> 标签：linux, diff, patch

到目前为止，我在 Linux 上创建了以下补丁：

```
diff -rupN oldDir newDir > fix.patch 
```

并用这个（来自oldDir）应用它们：

```
patch -p1 < fix.patch 
```

现在，我需要做一个别人创建的补丁，当我尝试这种方法时，我得到：

```
patch: **** Only garbage was found in the patch input. 
```

我不确定这个补丁是如何生成的（它有 .diff 扩展名）。补丁文件的部分内容是：（只是更改了一些文件/文件夹名称）

```
Only in ../oldDir: someFile1.a
diff -r ../oldDir/someFolder1/SomeFile3 ./someFolder1/SomeFile3
10c10
< #someContent1 
---
> #someContent1
Only in ../oldDir/someFolder1/someFolder2: someFile2.a
diff -r ../wfd_oldDir/someFolder1/someFolder2/someFile3 ./someFolder1/someFolder2/someFile3
2c2
< ##### Change the following for your environment: 
---
> ##### Change the following for your environment:
15,16c15,16
< LIBRARY_LINK =        ar cr 
< LIBRARY_LINK_OPTS =   
---
> LIBRARY_LINK =        ar cr
> LIBRARY_LINK_OPTS =
36c36
<   $(C_COMPILER) -c $(C_FLAGS) $<       
---
>   $(C_COMPILER) -c $(C_FLAGS) $< 
```

....... （继续） .......

我怎样才能应用这个补丁？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-10T09:02:06.323

检查 unix/windows 行尾

# javascript - 尝试创建一个简单的画廊滑块

> ID：11898326
> 
> 赞同：0
> 
> 时间：2012-08-10T08:53:10.000
> 
> 标签：javascript, jquery, html, image, image-gallery

每当用户单击滑块中的相应按钮时，我都试图将滑块中图像集合的位置“分流”到左/右。我有这个工作，但代码有点大而且重复，所以我一直试图把它清理一下，这是它的当前状态：

```
$('#btnRight').click(function (e) {
    e.preventDefault();
    if (parseInt(6 + indexx) != 10) {
        indexx++;
        $('#first').attr('src', $('#second').attr('src'));
        $('#second').attr('src', $('#third').attr('src'));
        $('#third').attr('src', $('#fourth').attr('src'));
        $('#fourth').attr('src', $('#fifth').attr('src'));
        $('#fifth').attr('src', $('#sixth').attr('src'));
        $('#sixth').attr('src', '/Content/Images/Gallery/Thumbs/' + parseInt(6 + indexx) + '.png');
    }
}); 
```

您可以看到它是手动选择每个元素并交换源属性以将图像向右移动。

这是我一直在努力改进但不太奏效的代码：

```
$('#btnLeft').click(function (e) {
    e.preventDefault();
    $("#gallerySlider img").each(function (index) {
        $(this).attr("src", $(this).prev().attr("src"));
    });
}); 
```

这将获取当前集合中的第一张图像，并设置所有`#gallerySlider`错误图像的来源。但是，如果我将相同的代码放入警报中，它会正确显示图像并且它是之前的图像，例如输出类似于：

`/Content/Images/Design/Thumbs/10.png Previous Image: /Content/Images/Design/Thumbs/9.png`

所以它正确地选择了图像并给了我权利`src`，但为什么它将滑块中所有图像的来源设置为同一个？当然，它应该通过所有这些，并且：

`$(this).prev().attr("src")`

每个人会不一样吗？

谁能看到我在这里出错的地方？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-10T08:58:38.820

如果您想象图像 1 是“img1.jpg”而图像 2 是“img2.jpg”等。

您放置的代码会将图像 2 设置为“img1.jpg”，然后将图像 3 设置为图像 2 的 src，现在将是“img1.jpg”，该图像最终将成为所有图像的 src . 那有意义吗？

你有没有在网上寻找 jQuery 类型的画廊插件，因为那里有负载可以为你完成这项工作？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-10T09:07:50.680

user1166905 的回答听起来不错。一个解决方案是，如果您想向左移动，则将第一个元素从 div 中取出并在最后将其放回 div 中。如果按右，也是如此。您从列表中取出最后一个元素，将其从 div 中删除，然后再次将其放置在图库 div 的开头。

```
$('#btnLeft').click(function (e) {
     e.preventDefault();
     $('#gallerySlider').append($("#gallerySlider img").first());
}); 

$('#btnRight').click(function (e) {
     e.preventDefault();
     $('#gallerySlider').prepend($("#gallerySlider img").last());
}); 
```

我认为这应该可以解决问题

# javascript - 为什么 VLC 网络插件会自动清除其播放列表？

> ID：11898337
> 
> 赞同：3
> 
> 时间：2012-08-10T08:54:00.383
> 
> 标签：javascript, html, vlc

我遵循[了这个指南](http://wiki.videolan.org/Documentation%3aWebPlugin)，但它没有显示如何动态更改插件的源属性，所以我使用了该`Playlist`对象。

我添加了一些 url，然后在它们之间切换`vlc.playlist.playItem`。显示时它工作正常`wrapper`。

当我打电话时`$('#wrapper').hide()`，`$('#wrapper').show()`我发现播放列表被某种神秘的力量**清空了。**

那么我应该如何正确保留播放列表以及在视频之间切换的正确方法是什么？

```
<div id='wrapper'>
    <embed type='application/x-vlc-plugin' id='vlc' toolbar='false' width='800' height='600' autoplay='false' />
</div>

var vlc = document.getElementById('vlc');
vlc.playlist.add('rtsp://asdfsdaf')
vlc.playlist.add('rtsp://1sfafdfa')
... 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-14T13:02:47.983

我现在正在使用[fbvlc](http://code.google.com/p/fbvlc/)，它修复了 vlc webplugin 的那些错误。

# android - 通过 ffmpeg 修剪 Android 视频

> ID：11898338
> 
> 赞同：7
> 
> 时间：2012-08-10T08:54:06.057
> 
> 标签：android, android-ndk, ffmpeg, java-native-interface

[我已经从此链接](https://github.com/uday-rayala/video-trimmer)从 github 下载了视频修剪代码。

它第一次完美运行，但是当我第二次尝试运行它时，代码毫无例外地崩溃，然后当我尝试在崩溃后第三次运行它时再次运行它！有没有人对这种行为有任何想法？

我还在开发一个具有一个修剪视频模块的应用程序。如果有人可以帮助我，我将不胜感激。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-27T20:26:21.870

[https://lists.ffmpeg.org/pipermail/libav-user/2012-May/001964.html](https://lists.ffmpeg.org/pipermail/libav-user/2012-May/001964.html)

[Activity中调用第三方库的native方法两次导致Android应用关闭](https://stackoverflow.com/questions/10649119/calling-native-method-twice-of-third-party-library-in-an-activity-causes-the-and)

阅读有关“ffmpeg.c”中静态变量的问题...

我敢打赌你有同样的问题，需要做一些事情（3个替代选择）来重置或GC这些变量：

1.  获取加载 lib 的 java 类加载器并对其进行 GC

2.  在 c 层中执行 OP 在上述链接中所做的操作

3.  在每个调用周期中，在第一个库上编写一个使用“dlsym”和“dlclose”的第二个共享库

[github，请参阅此处](https://github.com/jhotovy/android-ffmpeg)的“自述文件”

你遇到的同样的问题

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-09-18T12:56:52.297

只需在您的 ffmpeg.c 中创建一个看起来像这样的方法

```
void exitmycode(){
       ffmpeg_exit(0);

} 
```

`ffmpeg_exit(0)`方法已经存在，`ffmpeg.c`您只需`exitmycode();`在完成视频修剪后从主 C 文件中调用。

现在发生的事情是，当您使用 ffmpeg 修剪视频或其他任何内容时，它不会完全退出，因此下次运行该命令时它会退出，但它也不会运行您的修剪命令。再次如果你第三次运行，命令得到完美执行。所以，我所做的是`ffmpeg_exit(0)`在处理结束时手动调用。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-20T07:59:13.437

我认为您可以在代码中的视频修剪调用之后完成您的活动并重新启动应用程序。

如果在第二次应用程序崩溃并且在第三次工作之后，应用程序可能会在崩溃后初始化并重新启动应用程序。

尝试加载和卸载原生库[链接](https://stackoverflow.com/questions/10649119/calling-native-method-twice-of-third-party-library-in-an-activity-causes-the-and)

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2014-06-09T11:04:22.207

做一件事

如果您已经安装了 ffmpeg4android_os lib，那么您只需要像这样注释 1 行方法 StopTranscoding

```
public void stopTranscoding() {
        Log.d(Prefs.TAG, "stopTranscoding called");
        if (_transcodeBackground != null) {
            //_transcodeBackground.forceCancel();
        }
    } 
```

这一切……

# jquery - JQuery 边框动画 Chrome & Firefox 问题

> ID：11898355
> 
> 赞同：0
> 
> 时间：2012-08-10T08:55:29.897
> 
> 标签：jquery, jquery-ui, firefox, google-chrome, jquery-plugins

我正在尝试将 JQuery 用于彩色动画（使用 jquery-ui 和 jquery.color）。它适用于背景颜色

```
function t1() {
    $('#i1').animate({backgroundColor: '#0f0'}, 1000, t2);
    //$('#i1').animate({borderColor: '#0f0'}, 1000, t2);
}
function t2() {
    $('#i1').animate({backgroundColor: '#00f'}, 1000, t1);
    //$('#i1').animate({borderColor: '#00f'}, 1000, t1);
}

t1(); 
```

但是对于borderColor，相同的代码无法正常工作（似乎jquery在每个动画之前将颜色重置为#fff）。

演示（我希望边框和背景颜色相同）：http: [//jsfiddle.net/xqCNx/](http://jsfiddle.net/xqCNx/)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-13T10:06:51.073

解决方案很简单。只需使用borderLeftColor、borderRightColor、borderTopColor、borderBottomColor 而不是borderColor。

# java - 使用 mvn idea:idea 时无法加载 intellij 模块

> ID：11898360
> 
> 赞同：3
> 
> 时间：2012-08-10T08:55:50.367
> 
> 标签：java, maven, intellij-idea

我正在使用：IntelliJ IDEA 11.1.3（社区版）和 Maven 3.0.4。

该项目包含几个模块，其中一个创建了一个战争文件。当我使用“mvn idea:idea”时，IntelliJ 出于某种原因无法加载此模块。错误消息是：“10:40:04 AM 错误加载项目：无法加载模块”

我可以通过手动导入现有模块来解决这个问题，但这是一个非常烦人的问题。有谁知道为什么会发生这种情况，可能是maven或intellij问题吗？我可以做些什么来修复它吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-10T13:53:04.800

只需通过指向`pom.xml`文件打开项目。跳过`maven-idea-plugin`，它已过时。

自 2008年[`maven-idea-plugin`](http://maven.apache.org/plugins/maven-idea-plugin/)以来一直没有活动。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-08-10T12:58:15.820

`mvn idea:idea`已过时且不应使用，已知它会导致问题。直接从IDEA打开`pom.xml`，它就会导入Maven项目。

要使用更多选项导入，请从外部 Maven 模型创建一个新项目。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-01-18T16:08:40.353

`mvn idea:idea`不再使用。插件使用状态 的官方[页面](http://maven.apache.org/plugins/maven-idea-plugin/usage.html)`Apache Maven IDEA Plugin (RETIRED)`。

您可以直接执行`File -> Import project`并选择`pom.xml`文件。

![在此处输入图像描述](../Images/0ed01e812b321ebf1cfa4e1201dbc071.png)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-11-11T01:57:35.830

我在 Mac 上也遇到了同样的错误（即“错误加载项目：无法加载模块”）。这就是我的固定方式。

1.  用两根手指在 pom.xml 文件上的触控板上点击（有点右键单击）。
2.  在菜单中向下转到“Maven”，然后选择“重新导入”。

这使它对我有用，希望这对你也有帮助:)

![在此处输入图像描述](../Images/b126eb9c07633881dec65d794d4731d3.png)

# ruby-on-rails - 将 Rails 应用程序从 3.2.6 升级到 3.2.8

> ID：11898361
> 
> 赞同：6
> 
> 时间：2012-08-10T08:55:51.640
> 
> 标签：ruby-on-rails, rails-3-upgrade

我有一个使用 Rails 创建的 Rails 应用程序`3.2.6`。现在`3.2.8`已经发布了，我需要做的就是更新应用程序吗？

1.  编辑`Gemfile`，将行更改`gem 'rails', '3.2.6'`为 gem`'rails', '3.2.8'`
2.  跑`bundle update rails`

中的其他 Rails 生成的条目，`Gemfile`例如和呢？`sass-rails``coffee-rails``uglifier`

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-10T14:05:52.977

向 Santiago Pastorino（Rails 核心团队成员）致敬，他确认这就是所有需要的：

1.  编辑`Gemfile`，将行更改`gem 'rails', '3.2.6'`为`gem 'rails', '3.2.8'`
2.  跑`bundle update rails`

[确认推文。](https://twitter.com/spastorino/status/233905112039432193)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-10T11:30:10.593

运行后`$ bundle install`运行`$ rake rails:update`

# javascript - 当使用另一个脚本委托时，Jquery Lightbox Breaks？

> ID：11898363
> 
> 赞同：0
> 
> 时间：2012-08-10T08:55:59.603
> 
> 标签：javascript, jquery, delegates, lightbox, live

如果我发送 URL，它可能会容易得多

[http://isca01.bigwavemedia.info/~staged2b/about/staff](http://isca01.bigwavemedia.info/~staged2b/about/staff)

在使用类别之间的过滤器之前，一切都适用于灯箱脚本。

（单击设计单选，然后单击缩略图，灯箱不起作用）

我相信我需要在灯箱脚本上使用 .delegate 或 .live，但我似乎可以让它工作。

任何人都可以帮助那会很棒:)，

谢谢布伦特

```
$(document).ready(function() {

        $("#various1").fancybox({
            'width'             : '47%',
            'height'            : '50%',    
            'autoScale'         : false,
            'transitionIn'      : 'none',
            'transitionOut'     : 'none',
            'type'              : 'iframe'
        }); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-10T12:11:13.207

尝试将所有脚本放入同一个“匿名”函数 ( `$(function() { });`) 中，如下所示：

```
<script type="text/javascript"> 

 ...

// DOMContentLoaded
$(function() {

  // bind radiobuttons in the form
  var $filterType = $('#filter input[name="type"]');
  var $filterSort = $('#filter input[name="sort"]');

  // get the first collection
  var $applications = $('#applications');

  // clone applications to get a second collection
  var $data = $applications.clone();

  // attempt to call Quicksand on every form change
  $filterType.add($filterSort).change(function(e) {
    if ($($filterType+':checked').val() == 'all') {
      var $filteredData = $data.find('li');
    } else {
      var $filteredData = $data.find('li[data-type=' + $($filterType+":checked").val() + ']');
    }

    // if sorted by size
    if ($('#filter input[name="sort"]:checked').val() == "size") {
      var $sortedData = $filteredData.sorted({
        by: function(v) {
          return parseFloat($(v).find('span[data-type=size]').text());
        }
      });
    } else {
      // if sorted by name
      var $sortedData = $filteredData.sorted({
        by: function(v) {
          return $(v).find('strong').text().toLowerCase();
        }
      });
    }   

    // finally, call quicksand
    $applications.quicksand($sortedData, {
      duration: 800,
      easing: 'easeInOutQuad'
    });

  });
// >>>>>>>>>>>>> TO HERE >>>>>>>>>>>>>
// >>>>>>>>>>>>> TO HERE >>>>>>>>>>>>>
});

    // ----- remove this ---->
</script>
<script type="text/javascript"> 

$(function() {
    // <---- remove this -----
// <<<<<<<<<<<< MOVE THIS <<<<<<<<<<<<
    $(".imgHover")
        .live('mouseenter', function() {
            $(this).children("img").fadeTo(200, 0.85).end().children(".hover").show();
        })
        .live('mouseleave', function() {
            $(this).children("img").fadeTo(200, 1).end().children(".hover").hide();
        });
// <<<<<<<<<<<< MOVE THIS <<<<<<<<<<<<
    // ----- remove this ---->
})(jQuery);
    // <---- remove this -----

</script> 
```

# objective-c - UITableView 中的单元格到新视图 Objective-C

> ID：11898364
> 
> 赞同：0
> 
> 时间：2012-08-10T08:56:12.107
> 
> 标签：objective-c, ios, xcode, uitableview, storyboard

我以编程方式创建了一个 UITableView，其中包含连接到情节提要中其他视图的不同单元格和部分

我想连接我的单元格，我的意思是当用户选择特定行时它应该进入新视图“你可以在故事板视图中看到它们是如何相互连接的”

**我的问题是：**

**如何将这些单元格连接到我为 prepareForSegue:,viewDidLoad,didSelectRowAtIndexPath: 编写代码的视图，并且我知道我应该在 cellForRowAtIndexPath: 方法中编写连接代码，但我不知道该怎么写，请你帮忙我**

提前致谢！

这是我的代码：

```
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{
NSString *key = [[self sectionKeys] objectAtIndex:[indexPath section]];
NSArray *contents = [[self sectionContents] objectForKey:key];
NSString *contentForThisRow = [contents objectAtIndex:[indexPath row]];

static NSString *CellIdentifier = @"CellIdentifier";

UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier];
if (cell == nil)
{
    cell = [[UITableViewCell alloc] initWithStyle:UITableViewCellStyleDefault 
reuseIdentifier:CellIdentifier];
}

[[cell textLabel] setText:contentForThisRow];
return cell;

}

- (void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath
{
_selectedIndex = indexPath.row;
[self.tableView reloadData];
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-10T09:07:20.580

在您的 didSelectRowAtIndexPathMethod 中，您应该检查单击了哪个单元格，然后执行 segue：

```
- (void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath
{
    _selectedIndex = indexPath.row;
    [self.tableView reloadData];
    //maybe you could use a switch/case here, to assign the correct string to the segue identifier.
    switch (indexPath.row){
        case 0:
            [self performSegueWithIdentifier:@"WorkTime" sender:self];
            break;
        case 1:
            [self performSegueWithIdentifier:@"Absence" sender:self];
            break;
        case 2:
            [self performSegueWithIdentifier:@"Compensation" sender:self];
            break;
    }
} 
```

这样，当一个单元格被选中时，它将执行 segue。

# php - Zend 排除没有 Zend Auth 的列

> ID：11898368
> 
> 赞同：0
> 
> 时间：2012-08-10T08:56:20.063
> 
> 标签：php, zend-framework

我正在编写一个函数来使用数据库中的用户详细信息填充会话。我需要**排除密码和盐列**，这样全局会话就不会被它们填充。

这可以在登录时使用：

```
$zendAuth->getResultRowObject(null, array("password", "salt")); 
```

但是，我需要在不使用 $zendAuth 的情况下在其他地方执行此操作。

我有以下内容：

```
$usersTable = new Application_Model_DbTable_Users();

$zendSession = new Zend_Session_Namespace();

$zendSession->userData = $usersTable->fetchRow(
    $usersTable->select()
    ->from("users", array('id', 'first_name', 'last_name', 'email', 'status'))
    ->where("id = ?", $userInsertQuery)->setIntegrityCheck(false)); 
```

我不得不将完整性检查设置为 false，因为我收到有关无法加入 select 语句的错误。

必须有一种更简单的方法来使用 $usersTable 从数据库中获取某些列名

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-10T11:48:04.390

通常，您只需在 DbTable 模型或映射器类中添加一个方法来为您获取此数据。对于您当前的问题，请尝试以下操作：

```
$usersTable = new Application_Model_DbTable_Users();

$zendSession = new Zend_Session_Namespace();
$select  = $usersTable->select();
$select->from($usersTable,array('id', 'first_name', 'last_name', 'email', 'status'))
       ->where("id = ?", $userInsertQuery);
$zendSession->userData = $usersTable->fetchRow($select); 
```

Zend_Db_Select 似乎认为您试图访问多个表，因为您使用了两种不同的方法（*将对象作为表名传递，将字符串作为表名传递*）在同一个查询中访问同一个表。

DbTable 中的方法可能如下所示：

```
public function getUserData($id)
    {
        $select = $this->select();
        $select->from($this, array('id', 'first_name', 'last_name', 'email', 'status'));
        $select->where('id = ?', $id);

        $result = $this->fetchRow($select);
        return $result;
    } 
```

然后在你的控制器中：

```
$usersTable = new Application_Model_DbTable_Users();
$user = $usersTable->getUserData($userInsertQuery);
$zendSession->userData = $user; 
```

毕竟，您可以使用 Zend_Auth_Storage_Session 存储您想要的信息，有点像：

```
 if ($result->isValid()) {
     //store the username, first and last names of the user
      $auth = Zend_Auth::getInstance();
      $storage = $auth->getStorage();
      $storage->write($authAdapter->getResultRowObject(array(
                            'username', 'first_name', 'last_name'
       )));
      //or to save all except
      $storage->write($authAdapter->getResultRowObject(null, array('password', 'salt')); 
  } 
```

然后稍后您可以通过调用调用该信息：

```
$auth = Zend_Auth::getInstance();
       $storage = $auth->getStorage();
       $strorage->read(); 
```

或者您可以使用 Zend_Auth 命名空间直接从 Zend_Session_Namespace 访问相同的信息：

```
$session = new Zend_Session_Namespace('Zend_Auth');
$member = $session->storage; //'storage' is the default. However the namespace and key can be changed. 
```

# javascript - 使用javascript获取数据列表中超链接的ID

> ID：11898371
> 
> 赞同：1
> 
> 时间：2012-08-10T08:56:36.607
> 
> 标签：javascript, jquery, asp.net

我有一个数据列表，里面有一个下拉列表和动态加载的超链接，这意味着如果有一个用户，那么会有一个下拉列表和一个超链接，如果有两个用户，那么会有两个下拉列表和两个超链接。我的要求是当下拉列表中发生 onchange 事件时，我希望超链接的 id 与 javascript 中的下拉列表相关联。任何人都可以帮助我。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-10T09:41:21.653

您可以使用该`Control.ClientIDMode`物业

可能的值：

*   自动识别
*   静止的
*   继承（默认）
*   可预测（在数据绑定场景中使用）这是您应该使用的值

例子：

```
<script type="text/javascript" src="Scripts/jquery-1.7.2.min.js"></script>
<script type="text/javascript">
    function ddlChanged(sender) {
        var senderID = $(sender).attr("id");
        var idSplitted = senderID.split("_");
        var currentHyperLinkID = "dl_hl_" + idSplitted[2];
        var currentHyperLink = $("#" + currentHyperLinkID);

        alert(currentHyperLink.text());
    }
</script>
    <asp:DataList runat="server" ID="dl" ClientIDMode="Predictable" DataSourceID="ods">
        <ItemTemplate>
            <asp:DropDownList runat="server" ID="ddl" onchange="ddlChanged(this);">
                <asp:ListItem Text="text1" />
                <asp:ListItem Text="text2" />
            </asp:DropDownList>
            <br />
            <asp:HyperLink NavigateUrl="http://www.google.com" runat="server" Text='<%# Eval("QuestionText") %>' ID="hl" />
        </ItemTemplate>
    </asp:DataList> 
```

这将导致所有子控件都将使用以下格式生成客户端 ID：

```
 <select name="dl$ctl00$ddl" id="dl_ddl_0" onchange="ddlChanged(this);">
        <option value="text1">text1</option>
        <option value="text2">text2</option>

    </select>
            <br />
            <a id="dl_hl_0" href="http://www.google.com">QuestionText1</a> 
```

例如：

```
dl_hl_0 
```

在哪里：

*   *dl*是名称`DataList`
*   *hl*是`HyperLink`控件的名称
*   ##。这将是为 中的所有绑定控件生成的唯一编号`DataList`，每行中的所有控件都生成相同的编号

注意：您应该考虑使用`ListView`控件而不是`DataList`控件。后者是遗留控件，不具有`ListView`.

例如，有一个名为：的属性`ClientIDRowSuffix`，用于插入主键作为客户端 ID 的一部分。`DataList`该属性在控件中不可用

# java - 使用 HttpURLConnection 时获取本地端口

> ID：11898374
> 
> 赞同：3
> 
> 时间：2012-08-10T08:56:47.637
> 
> 标签：java, android, http, sockets

我正在使用`HttpURLConnection`连接到远程 HTTP 服务器。

是否可以获得此 HTTP 连接的本地开放端口？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-18T14:43:55.940

不，这在没有 root 权限的 Android 手机上使用[Android API是](http://developer.android.com/reference/packages.html)**不可能的。**

# html - 如何从 indexedDB 获取对象存储？

> ID：11898375
> 
> 赞同：2
> 
> 时间：2012-08-10T08:56:49.413
> 
> 标签：html, local-storage, indexeddb, web-storage

我在我的应用程序上为网络存储建立了 indexedDb。

我想从下面的代码中获取商店。

```
var store = myapp.indexedDB.db.transaction(['tree_nodes'],'readwrite').objectStore('tree_nodes'); 
```

它返回错误。我以打开 indexeddb 数据库和更改版本而闻名。

错误是`Uncaught TypeError: Cannot call method 'transaction' of null`

我用断点试过了。在这种情况下，它可以正常工作而没有错误。

我怎样才能得到商店？请帮我。

提前致谢！

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-05-04T21:31:40.013

该错误可能是因为您的 db 变量为空。这几乎总是因为您试图将 db 作为回调的结果存储在全局变量中，然后在单独的函数中访问 db 变量，该函数不能保证仅在设置 db 变量后才执行，这样浏览器发现您正在访问一个未初始化的变量。

解决方案很简单（但令人沮丧）。除非您想了解某些库的承诺和延迟对象的实现，否则您不能以这种方式使用全局变量。相反，看看丹尼给出的答案。使用回调并在回调函数中编写代码，而不是全局变量。'db' 只能从回调 request.onsuccess 函数中访问，并且不是全局的。这就是Deni's会起作用的原因。他的代码只有在保证被初始化（非空）时才会尝试访问 db。

由于您没有发布周围的代码，事实证明这很重要，您需要执行以下操作：

```
// I am an evil global variable that will not work as expected
myapp.indexedDB.db = 'DO NOT USE ME OR YOU WILL GET AN ERROR';

// I am a good function that only accesses an initialized db variable
function doit() {
    var request = window.indexedDB.open(......);
    request.onsuccess = function(event) {
        // Use this db variable, not your global one
        var db = event.target.result;

            // Note that you can also access the db variable using other means
        // here like this.result or request.result, but I like to use event.target
        // for clarity.

        // Now work with the db variable
        var store = db.transaction(['tree_nodes'],'readwrite').objectStore('tree_nodes');
        // do some more stuff with store....
    };
} 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-08-10T14:59:28.693

简而言之，为了从 indexeddb 获取数据，您需要做些什么首先您需要打开数据库以检索数据。

```
var request = indexedDB.open("tree_nodes", v); // first step is opening the database
request.onsuccess = function(e) {
        var db =  e.target.result;
        var trans = db.transaction(["tree_nodes"], 'readwrite'); //second step is opening the object store
        var store = trans.objectStore("tree_nodes");

        var request = store.get(id); //getting single object by id from object store

        request.onsuccess = function(e) {
            showDetails(e.target.result); // data retreived
            db.close();
        };

        request.onerror = function(e) {
                console.log("Error Getting: ", e);
        };
}; 
```

# azure - 在 Windows Azure 中使用动态域映射

> ID：11898378
> 
> 赞同：0
> 
> 时间：2012-08-10T08:57:01.037
> 
> 标签：azure, mapping, dns, cname

我有 SaaS 网站，允许用户创建在线登录页面，并且需要能够让他们选择使用自己的域。我在这里阅读了很多关于在 Windows Azure 上使用自定义域的信息，但都说在为域设置 CNAME 后，我需要转到预览门户并在配置中手动添加域。现在我的 Azure 地址就像

my-site.azurewebsites.net

并且看起来 www.my-site.com 具有 CNAME 记录 my-site.azurewebsites.net 仅获得 404 页面。我在这里找到了需要手动将 www.my-site.com 添加到 Azure 预览门户中的域列表的答案。但是，如果我需要动态添加更改 CNAME 记录的域 www.my-site1.com...www.my-siteN.com 怎么办？为每个域手动添加记录是不可能的。是否可以省略手动域添加到 Azure 门户并让客户使用他们的域仅更改 CNAME，并且我在 Azure 上的代码将分析主机并提供​​适当的内容？

迈克尔

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-10T16:12:55.903

Windows Azure 确实需要知道新的 CNAME。否则它不会知道将流量路由到您的应用程序。

剩下的问题是它是否可以自动化。我找不到网站管理 API 的文档，所以我看不出这是否可以通过编程方式完成。命令行工具*不*公开执行此操作的方法。

# java-me - 在lwiit中申请CustomFonts需要什么代码

> ID：11898379
> 
> 赞同：0
> 
> 时间：2012-08-10T08:57:03.950
> 
> 标签：java-me, lwuit

我已经使用 lwit 中的 resource.jar 文件创建了自定义字体“font.res”文件，现在我想将此自定义字体应用于我的 Textarea 组件，如何应用自定义字体任何示例代码？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-12T12:57:18.937

如果要添加到文本区域，

```
ta.getUnselectedStyle().setFont(Font.getBitmapFont("fontname")); 
```

fontname - 你在 res 文件中给字体的名称

如果没有，您可以
在资源编辑器中打开**主题**，双击要设置字体的组件并选择字体选项卡，
取消勾选**“派生字体”**，勾选“新字体”并选择您的字体，
保存 res 文件并将其添加到您的 j2me 项目中

# python - PyQt：搜索项目 QTableWidget 并获取它的坐标？

> ID：11898382
> 
> 赞同：6
> 
> 时间：2012-08-10T08:57:23.610
> 
> 标签：python, search, pyqt, qtablewidget

所以，我正在使用**Python**和**PyQt**，并创建了一个`QTableWidget`我用数据填充的。

有没有办法搜索一个特定的值，如果程序找到一些东西，它可以返回`coordinated(index)`项目的值吗？

**更新：**
这是代码：

程序2.py：

```
# -*- coding: utf-8 -*-
#imports:
import os
import platform
import sys
from PyQt4 import QtCore, QtGui
from PyQt4.QtCore import *
from PyQt4.QtGui import *
import newchilddlg
from newchilddlg import *
from PyKDE4.kdeui import KDateComboBox
import xlrd
import xlwt

#version:
__version__ = "1.0.0"

#Main Window Class:
class MainWindow(QMainWindow):

    #__init__ function:
    def __init__(self, parent=None):
        super(MainWindow, self).__init__(parent)

        #Window size:
        self.resize(800,600)
        self.centralwidget = QtGui.QWidget(self)
        self.horizontalLayout = QtGui.QHBoxLayout(self.centralwidget)

        #Table Widget:
        self.tableWidget = QtGui.QTableWidget(self.centralwidget)
        self.vBar = self.tableWidget.verticalScrollBar()
        self._vBar_lastVal = self.vBar.value()
        self.horizontalLayout.addWidget(self.tableWidget)
        self.vBar.valueChanged.connect(self.scrollbarChanged)
        self.tableWidget.setGridStyle(QtCore.Qt.SolidLine)
        self.tableWidget.setRowCount(100)
        self.tableWidget.setColumnCount(28)
        item = QtGui.QTableWidgetItem()
        self.tableWidget.setHorizontalHeaderItem(0, item)
        self.tableWidget.horizontalHeader().setDefaultSectionSize(160)
        self.tableWidget.horizontalHeader().setHighlightSections(True)
        self.tableWidget.horizontalHeader().setStretchLastSection(False)
        self.tableWidget.verticalHeader().setDefaultSectionSize(30)
        self.tableWidget.verticalHeader().setStretchLastSection(False)
        self.horizontalLayout.addWidget(self.tableWidget)
        self.setCentralWidget(self.centralwidget)

        #Window Title:
        self.setWindowTitle(QtGui.QApplication.translate("MainWindow", "MainWindow", None, QtGui.QApplication.UnicodeUTF8))
        self.tableWidget.setSortingEnabled(False)

        #Collumns'names:
        item = self.tableWidget.horizontalHeaderItem(0)
        item.setText(QtGui.QApplication.translate("MainWindow", "Α.Μ.", None, QtGui.QApplication.UnicodeUTF8))

        #menubar:
        self.menubar = QtGui.QMenuBar(self)
        self.menubar.setEnabled(True)
        self.menubar.setGeometry(QtCore.QRect(0, 0, 800, 21))
        self.menuFile = self.menubar.addMenu("&File")
        self.menuFile.setSizeIncrement(QtCore.QSize(0, 0))
        self.menuEdit = self.menubar.addMenu("&Edit")
        self.setMenuBar(self.menubar)
        self.menuFile.setTitle(QtGui.QApplication.translate("MainWindow", "File", None, QtGui.QApplication.UnicodeUTF8))
        self.menuEdit.setTitle(QtGui.QApplication.translate("MainWindow", "Edit", None, QtGui.QApplication.UnicodeUTF8)) 

        #Creating Action filenewchild:
        self.filenewchild = self.createAction("&Εισαγωγή Ανηλίκου", self.doupdate, "Ctrl+C", "" ,"Εισαγωγή Δεδομέων Ανηλίκου")
        self.menuFile.addAction(self.filenewchild)
        self.filenewchild.setText(QtGui.QApplication.translate("MainWindow", "Εισαγωγή Ανηλίκου", None, QtGui.QApplication.UnicodeUTF8))

        #Creating Action Open File:
        self.fileopen = self.createAction("& Άνοιγμα Αρχείου", self.openfile, "Ctrl+O", "", "Εισαγωγή Δεδομένων από Αρχείο")
        self.menuFile.addAction(self.fileopen)
        self.fileopen.setText(QtGui.QApplication.translate("MainWindow", "Άνοιγμα Αρχείου", None, QtGui.QApplication.UnicodeUTF8))

        #Creating Action Save File
        self.filesave = self.createAction("& Άνοιγμα Αρχείου", self.savefile, "Ctrl+S", "", "Σώσιμο Δεδομένων σε Αρχείο")
        self.menuFile.addAction(self.filesave)
        self.filesave.setText(QtGui.QApplication.translate("MainWindow", "Σώσιμο Αρχείου", None, QtGui.QApplication.UnicodeUTF8)) 

    #Creating a function that opens an .xls file:
    def openfile(self):
            try:
                filename = unicode(QtGui.QFileDialog.getOpenFileName(self, 'Open File', '', ".xls(*.xls)"))
                wb = xlrd.open_workbook(filename)
                wb.sheet_names()
                self.sh = wb.sheet_by_index(0)
                if self.sh.nrows > self.tableWidget.rowCount():
                    self.tableWidget.setRowCount(self.sh.nrows)
                self.r = 0
                self.a = 0
                for i in range(self.sh.ncols):
                    self.new = self.sh.col_values(self.a)
                    self.add(self.a)
                    self.a += 1
                    self.r = 0
            except IOError:
                pass

    #Creating a function that converts float to integers and then to strings when necessary:                                 
    def add(self, c):
        for i in self.new:
             try:
                newItem = QtGui.QTableWidgetItem(str(int(i)))
             except ValueError:
                newItem = QtGui.QTableWidgetItem(unicode(i))    
             self.tableWidget.setItem(self.r, c, newItem)
             self.r += 1

    #Creating a function that saves to an .xls file:
    def savefile(self):
        try:
            filename = unicode(QtGui.QFileDialog.getSaveFileName(self, 'Save File', '', ".xls(*.xls)"))    
            wbk = xlwt.Workbook()
            self.sheet = wbk.add_sheet("sheet", cell_overwrite_ok=True)
            self.add2()
            wbk.save(filename)    
        except IOError:
            pass

    #Creating a function that puts data into place:
    def add2(self):
        row = 0
        col = 0         
        for i in range(self.tableWidget.columnCount()):
            for x in range(self.tableWidget.rowCount()):
                try:             
                    teext = unicode(self.tableWidget.item(row, col).text())
                    self.sheet.write(row, col, teext)
                    row += 1
                except AttributeError:
                    row += 1
            row = 0
            col += 1                                

    # Growing rows while scrolling down....
    def scrollbarChanged(self, val):
        bar = self.vBar
        minVal, maxVal = bar.minimum(), bar.maximum()
        avg = (minVal+maxVal)/2
        rowCount = self.tableWidget.rowCount()
        if val > self._vBar_lastVal and val >= avg:
            self.tableWidget.insertRow(rowCount)
        elif val < self._vBar_lastVal:
            lastRow = rowCount-30
            empty = True
            for col in xrange(self.tableWidget.columnCount()):
                item = self.tableWidget.item(lastRow, col)
                if item and item.text():
                    empty=False
                    break
            if empty:
                self.tableWidget.removeRow(lastRow)
        self._vBar_lastVal = val    

    #A function to help us create Actions faster:
    def createAction(self,text, slot=None, shortcut=None, icon=None,
                     tip=None, checkable=False, signal="triggered()"):
        action = QAction(text, self)
        if icon is not None:
            action.setIcon(QIcon(":/%s.png" % icon))
        if shortcut is not None:
            action.setShortcut(shortcut)
        if tip is not None:
            action.setToolTip(tip)
        if slot is not None:
            self.connect(action, SIGNAL(signal), slot)
        if checkable:
            action.setCheckable(True)
        return action    

    #A function that updates the table:
    def updatetable(self):
        r = self.tableWidget.currentRow()
        c=0
        for i in self.textlist:
            newItem = QtGui.QTableWidgetItem(i)
            self.tableWidget.setItem(r, c, newItem)
            c += 1
        c = 0        

    #Handles NewChildDlg actions:
    def doupdate(self):
        d = NewChildDlg(self)
        if d.exec_():
            text = d.lineEdit.text()
            text2 = d.lineEdit2.text()
            text3 = d.lineEdit3.text()
            text4 = d.lineEdit4.text()
            text5 = d.kdatecombobox.currentText()
            text6 = d.lineEdit5.text()
            text7 = d.combobox.currentText()
            text8 = d.lineEdit6.text()
            text9 = d.lineEdit7.text()
            text10 = d.lineEdit8.text()
            text11 = d.lineEdit9.text()
            text12 = d.lineEdit10.text()
            text13 = d.kdatecombobox2.currentText()
            text14 = d.lineEdit11.text()
            text15 = d.lineEdit12.text()
            text16 = d.kdatecombobox3.currentText()
            text17 = d.lineEdit13.text()
            text18 = d.combobox2.currentText()
            text19 = d.combobox3.currentText()
            text20 = d.textEdit.toPlainText()
            text21 = d.combobox4.currentText()
            text22 = d.combobox5.currentText()
            text23 = d.lineEdit14.text()
            text24 = d.lineEdit15.text()
            text25 = d.kdatecombobox4.currentText()
            text26 = d.combobox6.currentText()
            text27 = d.textEdit2.toPlainText()
            text28 = d.lineEdit16.text()
            self.textlist = [text, text2, text3, text4, text5, text6, text7, text8, text9, text10, text11,
                             text12, text13, text14, text15, text16, text17, text18, text19, text20, text21, text22,
                             text23, text24, text25, text26, text27, text28]
            self.updatetable()

#Main loop:
if __name__ == '__main__':
    app = QApplication(sys.argv)
    myapp = MainWindow()
    myapp.show()
    sys.exit(app.exec_()) 
```

newchilddlg.py：

```
# -*- coding: utf-8 -*-
#imports:
from PyQt4 import QtCore, QtGui
import sys
from PyKDE4.kdeui import KDateComboBox
from PyQt4.QtCore import *
from PyQt4.QtGui import *
from program2 import *
from finddlg import *

#NewChildDialog Class:
class NewChildDlg(QDialog):

    #__init__ function:
    def __init__(self, parent=None):
       super(NewChildDlg, self).__init__(parent)
       self.resize(800, 600)

       #Add to am:
       self.lineEdit = QtGui.QLineEdit(self)
       self.lineEdit.setGeometry(QtCore.QRect(160, 20, 211, 23))

       #Add to namesurname:
       self.lineEdit2 = QtGui.QLineEdit(self)
       self.lineEdit2.setGeometry(QtCore.QRect(160, 50, 211, 23))
       self.lineEdit2.editingFinished.connect(self.dialog)

       #Add to fathersname:
       self.lineEdit3 = QtGui.QLineEdit(self)
       self.lineEdit3.setGeometry(QtCore.QRect(160, 80, 211, 23))

       #Add to mothersname:
       self.lineEdit4 = QtGui.QLineEdit(self)
       self.lineEdit4.setGeometry(QtCore.QRect(160, 110, 211, 23))

       #Add to birthday:
       self.kdatecombobox = KDateComboBox(self)
       self.kdatecombobox.setGeometry(QtCore.QRect(160, 140, 211, 23))

       #Add to placeofbirth:
       self.lineEdit5 = QtGui.QLineEdit(self)
       self.lineEdit5.setGeometry(QtCore.QRect(160, 170, 211, 23))

       #Add to sex:
       self.combobox = QtGui.QComboBox(self)
       self.combobox.setGeometry(QtCore.QRect(160,200, 211, 23))
       self.combobox.addItem("")
       self.combobox.addItem("")

       #Add to nationality:
       self.lineEdit6 = QtGui.QLineEdit(self)
       self.lineEdit6.setGeometry(QtCore.QRect(160, 230, 211, 23))

       #Add to Address:
       self.lineEdit7 = QtGui.QLineEdit(self)
       self.lineEdit7.setGeometry(QtCore.QRect(160, 260, 211, 23))

       #Add to policedepartment:
       self.lineEdit8 = QtGui.QLineEdit(self)
       self.lineEdit8.setGeometry(QtCore.QRect(160, 290, 211, 23))

       #Add to tel:
       self.lineEdit9 = QtGui.QLineEdit(self)
       self.lineEdit9.setGeometry(QtCore.QRect(160, 320, 211, 23))

       #Add to job:
       self.lineEdit10 = QtGui.QLineEdit(self)
       self.lineEdit10.setGeometry(QtCore.QRect(160, 350, 211, 23))

       #Add to courtdate:       
       self.kdatecombobox2 = KDateComboBox(self)
       self.kdatecombobox2.setGeometry(QtCore.QRect(160, 380, 211, 23))

       #Add to board_number:
       self.lineEdit11 = QtGui.QLineEdit(self)
       self.lineEdit11.setGeometry(QtCore.QRect(160, 410, 211, 23))

       #Add to praxis:
       self.lineEdit12 = QtGui.QLineEdit(self)
       self.lineEdit12.setGeometry(QtCore.QRect(160, 440, 211, 23))

       #Add to dayofdoing:
       self.kdatecombobox3 = KDateComboBox(self)
       self.kdatecombobox3.setGeometry(QtCore.QRect(160, 470, 211, 23))

       #Add to placeofdoing:
       self.lineEdit13 = QtGui.QLineEdit(self)
       self.lineEdit13.setGeometry(QtCore.QRect(160, 500, 211, 23))

      #Add to else_existence:
       self.combobox2 = QtGui.QComboBox(self)
       self.combobox2.setGeometry(QtCore.QRect(570, 20, 211, 23))
       self.combobox2.addItem("")
       self.combobox2.addItem("")

       #Add to admission:
       self.combobox3 = QtGui.QComboBox(self)
       self.combobox3.setGeometry(QtCore.QRect(570 ,50, 211, 23))
       self.combobox3.addItem("")
       self.combobox3.addItem("")

       #Add to praxis_more:
       self.textEdit = QtGui.QTextEdit(self)
       self.textEdit.setGeometry(QtCore.QRect(570, 80, 211, 115))

       #Add to appearance:
       self.combobox4 = QtGui.QComboBox(self)
       self.combobox4.setGeometry(QtCore.QRect(570 ,205, 211, 23))
       self.combobox4.addItem("")
       self.combobox4.addItem("")
       self.combobox4.addItem("")

       #Add to postponement:
       self.combobox5 = QtGui.QComboBox(self)
       self.combobox5.setGeometry(QtCore.QRect(570 ,235, 211, 23))
       self.combobox5.addItem("")
       self.combobox5.addItem("")
       self.combobox5.addItem("")

       #Add to decision:
       self.lineEdit14 = QtGui.QLineEdit(self)
       self.lineEdit14.setGeometry(QtCore.QRect(570, 265, 211, 23))

       #Add to decision_number:
       self.lineEdit15 = QtGui.QLineEdit(self)
       self.lineEdit15.setGeometry(QtCore.QRect(570, 295, 211, 23))

       #Add to decision_date:
       self.kdatecombobox4 = KDateComboBox(self)
       self.kdatecombobox4.setGeometry(QtCore.QRect(570, 325, 211, 23))

       #Add to appear:
       self.combobox6 = QtGui.QComboBox(self)
       self.combobox6.setGeometry(QtCore.QRect(570 ,355, 211, 23))
       self.combobox6.addItem("")
       self.combobox6.addItem("")

       #Add to decisions_past:
       self.textEdit2 = QtGui.QTextEdit(self)
       self.textEdit2.setGeometry(QtCore.QRect(570, 385, 211, 115))

       #Add to trustee:
       self.lineEdit16 = QtGui.QLineEdit(self)
       self.lineEdit16.setGeometry(QtCore.QRect(570, 510, 211, 23))

       #Button accept:
       self.pushButton = QtGui.QPushButton(self)
       self.pushButton.setGeometry(QtCore.QRect(160, 540, 211, 40))
       self.pushButton.clicked.connect(self.accept)

       #Button reject:
       self.pushButton2 = QtGui.QPushButton(self)
       self.pushButton2.setGeometry(QtCore.QRect(570, 540, 211, 40))
       self.pushButton2.clicked.connect(self.reject)

       #self.lineEdit:
       self.label = QtGui.QLabel(self)
       self.label.setGeometry(QtCore.QRect(20, 20, 211, 23))

       #self.lineEdit2:
       self.label2 = QtGui.QLabel(self)
       self.label2.setGeometry(QtCore.QRect(20, 50, 211, 23))

       #self.lineEdit3:
       self.label3 = QtGui.QLabel(self)
       self.label3.setGeometry(QtCore.QRect(20, 80, 211, 23))

       #self.lineEdit4:
       self.label4 = QtGui.QLabel(self)
       self.label4.setGeometry(QtCore.QRect(20, 110, 211, 23))

       #self.kdatecombobox:
       self.label5 = QtGui.QLabel(self)
       self.label5.setGeometry(QtCore.QRect(20, 140, 211, 23))

       #self.lineEdit5:
       self.label6 = QtGui.QLabel(self)
       self.label6.setGeometry(QtCore.QRect(20, 170, 211, 23))

       #self.combobox:
       self.label7 = QtGui.QLabel(self)
       self.label7.setGeometry(QtCore.QRect(20, 200, 211, 23))

       #self.lineEdit6:
       self.label8 = QtGui.QLabel(self)
       self.label8.setGeometry(QtCore.QRect(20, 230, 211, 23))

       #self.lineEdit7:
       self.label9 = QtGui.QLabel(self)
       self.label9.setGeometry(QtCore.QRect(20, 260, 211, 23))

       #self.lineEdit8:
       self.label10 = QtGui.QLabel(self)
       self.label10.setGeometry(QtCore.QRect(20, 290, 211, 23))

       #self.lineEdit9:
       self.label11 = QtGui.QLabel(self)
       self.label11.setGeometry(QtCore.QRect(20, 320, 211, 23))

       #self.lineEdit10:
       self.label12 = QtGui.QLabel(self)
       self.label12.setGeometry(QtCore.QRect(20, 350, 211, 23))

       #self.kdatecombobox2:
       self.label13 = QtGui.QLabel(self)
       self.label13.setGeometry(QtCore.QRect(20, 380, 211, 23))

       #self.lineEdit11:
       self.label14 = QtGui.QLabel(self)
       self.label14.setGeometry(QtCore.QRect(20, 410, 211, 23))

       #self.lineEdit12:
       self.label15 = QtGui.QLabel(self)
       self.label15.setGeometry(QtCore.QRect(20, 440, 211, 23))

       #self.kdatekombobox3:
       self.label16 = QtGui.QLabel(self)
       self.label16.setGeometry(QtCore.QRect(20, 470, 211, 23))

       #self.lineEdit13:
       self.label17 = QtGui.QLabel(self)
       self.label17.setGeometry(QtCore.QRect(20, 500, 211, 23))

       #self.combobox2:
       self.label18 = QtGui.QLabel(self)
       self.label18.setGeometry(QtCore.QRect(420, 20, 211, 23))

       #self.combobox3:
       self.label19 = QtGui.QLabel(self)
       self.label19.setGeometry(QtCore.QRect(420, 50, 211, 23))

       #self.textEdit:
       self.label20 = QtGui.QLabel(self)
       self.label20.setGeometry(QtCore.QRect(420, 120, 211, 23))

       #self.combobox4:
       self.label21 = QtGui.QLabel(self)
       self.label21.setGeometry(QtCore.QRect(420, 205, 211, 23))

       #self.combobox5:
       self.label22 = QtGui.QLabel(self)
       self.label22.setGeometry(QtCore.QRect(420, 235, 211, 23))

       #self.lineEdit14:
       self.label23 = QtGui.QLabel(self)
       self.label23.setGeometry(QtCore.QRect(420, 265, 211, 23))

       #self.lineEdit15:
       self.label24 = QtGui.QLabel(self)
       self.label24.setGeometry(QtCore.QRect(420, 295, 211, 23))

       #self.kdatecombobox4:
       self.label25 = QtGui.QLabel(self)
       self.label25.setGeometry(QtCore.QRect(420, 325, 211, 23))

       #self.combobox6:
       self.label26 = QtGui.QLabel(self)
       self.label26.setGeometry(QtCore.QRect(420, 355, 211, 23))

       #self.textEdit2:
       self.label27 = QtGui.QLabel(self)
       self.label27.setGeometry(QtCore.QRect(420, 425, 211, 23))

       #self.lineEdit16:
       self.label28 = QtGui.QLabel(self)
       self.label28.setGeometry(QtCore.QRect(420, 510, 211, 23))

       self.setWindowTitle(QtGui.QApplication.translate("Form", "Εισαγωγή Ανηλίκου", None, QtGui.QApplication.UnicodeUTF8))
       self.label.setText(QtGui.QApplication.translate("Form", "Α.Μ.:", None, QtGui.QApplication.UnicodeUTF8))
       self.label2.setText(QtGui.QApplication.translate("Form", "Ονοματεπώνυμο:", None, QtGui.QApplication.UnicodeUTF8))
       self.label3.setText(QtGui.QApplication.translate("Form", "Όνομα Πατρός:", None, QtGui.QApplication.UnicodeUTF8))
       self.label4.setText(QtGui.QApplication.translate("Form", "Όνομα Μητρός:", None, QtGui.QApplication.UnicodeUTF8))
       self.label5.setText(QtGui.QApplication.translate("Form", "Ημερομηνία Γέννησης:", None, QtGui.QApplication.UnicodeUTF8))
       self.label6.setText(QtGui.QApplication.translate("Form", "Τόπος Γέννησης:", None, QtGui.QApplication.UnicodeUTF8))
       self.label7.setText(QtGui.QApplication.translate("Form", "Φύλο:", None, QtGui.QApplication.UnicodeUTF8))
       self.combobox.setItemText(0, QtGui.QApplication.translate("Form", "Αγόρι", None, QtGui.QApplication.UnicodeUTF8))
       self.combobox.setItemText(1, QtGui.QApplication.translate("Form", "Κορίτσι", None, QtGui.QApplication.UnicodeUTF8))
       self.label8.setText(QtGui.QApplication.translate("Form", "Εθνικότητα:", None, QtGui.QApplication.UnicodeUTF8))
       self.label9.setText(QtGui.QApplication.translate("Form", "Διεύθυνση Κατοικίας:", None, QtGui.QApplication.UnicodeUTF8))
       self.label10.setText(QtGui.QApplication.translate("Form", "Αστυνομικό Τμήμα:", None, QtGui.QApplication.UnicodeUTF8))
       self.label11.setText(QtGui.QApplication.translate("Form", "Τηλέφωνο:", None, QtGui.QApplication.UnicodeUTF8))
       self.label12.setText(QtGui.QApplication.translate("Form", "Επάγγελμα-Ιδιότητα:", None, QtGui.QApplication.UnicodeUTF8))
       self.label13.setText(QtGui.QApplication.translate("Form", "Ημερομηνία Δικασίμου:", None, QtGui.QApplication.UnicodeUTF8))
       self.label14.setText(QtGui.QApplication.translate("Form", "Αριθμός Πινακίου:", None, QtGui.QApplication.UnicodeUTF8))
       self.label15.setText(QtGui.QApplication.translate("Form", "Πράξη:", None, QtGui.QApplication.UnicodeUTF8))
       self.label16.setText(QtGui.QApplication.translate("Form", "Ημερομηνία Τέλεσης:", None, QtGui.QApplication.UnicodeUTF8))
       self.label17.setText(QtGui.QApplication.translate("Form", "Τόπος Τέλεσης:", None, QtGui.QApplication.UnicodeUTF8))
       self.label18.setText(QtGui.QApplication.translate("Form", "Ύπαρξη Συνενόχων:", None, QtGui.QApplication.UnicodeUTF8))
       self.combobox2.setItemText(0, QtGui.QApplication.translate("Form", "Ναι", None, QtGui.QApplication.UnicodeUTF8))
       self.combobox2.setItemText(1, QtGui.QApplication.translate("Form", "Όχι", None, QtGui.QApplication.UnicodeUTF8))
       self.label19.setText(QtGui.QApplication.translate("Form", "Παραδοχή:", None, QtGui.QApplication.UnicodeUTF8))
       self.combobox3.setItemText(0, QtGui.QApplication.translate("Form", "Ναι", None, QtGui.QApplication.UnicodeUTF8))
       self.combobox3.setItemText(1, QtGui.QApplication.translate("Form", "Όχι", None, QtGui.QApplication.UnicodeUTF8))
       self.label20.setText(QtGui.QApplication.translate("Form", "Περιγραφή Πράξης:", None, QtGui.QApplication.UnicodeUTF8))
       self.label21.setText(QtGui.QApplication.translate("Form", "Εμφάνιση:", None, QtGui.QApplication.UnicodeUTF8))
       self.combobox4.setItemText(0, QtGui.QApplication.translate("Form", "Πρωτοεμφανιζόμενος", None, QtGui.QApplication.UnicodeUTF8))
       self.combobox4.setItemText(1, QtGui.QApplication.translate("Form", "Υπότροπος", None, QtGui.QApplication.UnicodeUTF8))
       self.combobox4.setItemText(2, QtGui.QApplication.translate("Form", "Αναβολή", None, QtGui.QApplication.UnicodeUTF8))
       self.label22.setText(QtGui.QApplication.translate("Form", "Αναβολή:", None, QtGui.QApplication.UnicodeUTF8))
       self.combobox5.setItemText(0, QtGui.QApplication.translate("Form", "Φετινή", None, QtGui.QApplication.UnicodeUTF8))
       self.combobox5.setItemText(1, QtGui.QApplication.translate("Form", "Περισυνή", None, QtGui.QApplication.UnicodeUTF8))
       self.combobox5.setItemText(2, QtGui.QApplication.translate("Form", "---", None, QtGui.QApplication.UnicodeUTF8))
       self.label23.setText(QtGui.QApplication.translate("Form", "Απόφαση:", None, QtGui.QApplication.UnicodeUTF8))
       self.label24.setText(QtGui.QApplication.translate("Form", "Αριθμός Απόφασης:", None, QtGui.QApplication.UnicodeUTF8))
       self.label25.setText(QtGui.QApplication.translate("Form", "Ημερομηνία Απόφασης:", None, QtGui.QApplication.UnicodeUTF8))
       self.label26.setText(QtGui.QApplication.translate("Form", "Παρουσία:", None, QtGui.QApplication.UnicodeUTF8))
       self.combobox6.setItemText(0, QtGui.QApplication.translate("Form", "Παρόν", None, QtGui.QApplication.UnicodeUTF8))
       self.combobox6.setItemText(1, QtGui.QApplication.translate("Form", "Απόν", None, QtGui.QApplication.UnicodeUTF8))
       self.label27.setText(QtGui.QApplication.translate("Form", "Προηγούμενες Αποφάσεις:", None, QtGui.QApplication.UnicodeUTF8))
       self.label28.setText(QtGui.QApplication.translate("Form", "Υπεύθυνος Επιμελητής:", None, QtGui.QApplication.UnicodeUTF8))
       self.pushButton.setText(QtGui.QApplication.translate("Form", "Εισαγωγή", None, QtGui.QApplication.UnicodeUTF8))
       self.pushButton2.setText(QtGui.QApplication.translate("Form", "Άκυρωση", None, QtGui.QApplication.UnicodeUTF8))

    def dialog(self):
       self.texta = str(self.lineEdit2.text())
       main = MainWindow(self)
       item = main.tableWidget.findItems(self.texta, QtCore.Qt.MatchExactly)
       if len(item) > 0:
           f = ChildFound(self)
           f.exec_()

#Main loop:        
def main():
    dialog = NewChildDlg()
    dialog.show()
    dialog.exec_() 
```

你能看出有什么错误吗？很抱歉，但我不确定哪一部分是错的……我剪掉了一些不重要的部分……

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-10T17:33:02.450

用于[`QTableWidget.findItems`](http://doc-snapshot.qt-project.org/4.8/qtablewidget.html#findItems)获取匹配列表，`QTableWidgetItems`然后可以查询它们的坐标。

这是一个简单的演示脚本：

```
from PyQt4 import QtGui, QtCore

class Window(QtGui.QWidget):
    def __init__(self, rows, columns):
        QtGui.QWidget.__init__(self)
        self.table = QtGui.QTableWidget(self)
        self.table.setRowCount(rows)
        self.table.setColumnCount(columns)
        for column in range(columns):
            for row in range(rows):
                item = QtGui.QTableWidgetItem('Text%d' % row)
                self.table.setItem(row, column, item)
        self.edit = QtGui.QLineEdit(self)
        self.button = QtGui.QPushButton('Search', self)
        self.button.clicked.connect(self.handleButton)
        layout = QtGui.QVBoxLayout(self)
        layout.addWidget(self.table)
        layout.addWidget(self.edit)
        layout.addWidget(self.button)

    def handleButton(self):
        items = self.table.findItems(
            self.edit.text(), QtCore.Qt.MatchExactly)
        if items:
            results = '\n'.join(
                'row %d column %d' % (item.row() + 1, item.column() + 1)
                for item in items)
        else:
            results = 'Found Nothing'
        QtGui.QMessageBox.information(self, 'Search Results', results)

if __name__ == '__main__':

    import sys
    app = QtGui.QApplication(sys.argv)
    window = Window(6, 3)
    window.resize(350, 300)
    window.show()
    sys.exit(app.exec_()) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-10T09:23:41.477

如果你在 QTableWidget 中使用 QTableWidgetItems 那么你可以使用这个：

```
for row in xrange(table.rowCount ()):
   for column in xrange(table.columnCount ()):
       item = table.item (row, column )
       if item and item.data (Qt.DisplayRole) == "my_search_value":
           return table.indexFromItem (item)
 return None 
```

# imagemagick - 运行 phpize 显示找不到 config.m4

> ID：11898387
> 
> 赞同：3
> 
> 时间：2012-08-10T08:57:43.403
> 
> 标签：imagemagick, centos

```
tar -zxvf ImageMagick*.tar.gz
cd ImageMagick*
phpize
./configure
make
make install 
```

运行：`phpize` 找不到`config.m4`。确保`'/usr/bin/phpize'`在模块的顶级源目录中运行

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-10T15:42:37.023

那这个呢？也有可能 config.m4 在您运行 phpize 的地方不存在。

```
./configure
phpize
make
make install 
```

# python - 使用 var() 从 dict 键创建属性名称

> ID：11898389
> 
> 赞同：1
> 
> 时间：2012-08-10T08:57:50.360
> 
> 标签：python, object, attributes

我正在使用`vars()`“即时”创建一些对象变量。这似乎不是最干净的操作。但是如果不手动定义它们，我怎么能生成对象的属性名称（在这种情况下，字典相对较短，但这只是一些测试数据）。我知道[这里](https://stackoverflow.com/questions/2320945/python-using-vars-to-assign-a-string-to-a-variable)描述的这种做法带来的问题。

```
class DerivedProf(Prof):
    def __init__(self,profiel, TAG, code_DB):
       Prof.__init__(self, profiel, TAG)
       self.CountCodes(self.attr, code_DB)

def CountCodes(self, attr, code_DB):
    count  = 0 
    for key, value in code_DB.iteritems():
        if value[0].lower() == 'true':
            for i,p in enumerate(attr):
                if int(attr[i].code2) == value[1]:
                    count += 1
                else:
                    continue
            vars(self)[key] = count 

code_DB = {'code_72': ['true',72],
          'code_74': ['true',74],
          'code_76': ['true',76],
          'code_88': ['true',88]} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-10T08:59:16.853

也许您正在寻找[`setattr`](http://docs.python.org/library/functions.html#setattr)and [`getattr`](http://docs.python.org/library/functions.html#getattr)。你可以做`setattr(self, key, count)`然后以后`getattr(self, key)`。

# java - 如何通过 HtmlUnit 设置或延长自动点击提交按钮 (HtmlSubmitInput) 的超时时间？

> ID：11898390
> 
> 赞同：1
> 
> 时间：2012-08-10T08:58:01.063
> 
> 标签：java, htmlunit

我正在使用 HtmlUnit 以编程方式用 Java 填写和提交 Web 表单。这是我的代码：

```
WebClient client = new WebClient();     
client.setThrowExceptionOnScriptError(false); // avoid JavaScript errors
client.setTimeout(120000); // 2 minutes
HtmlPage page;

// load the website
page = client.getPage("http://www.some-website.com");

// represent the page elements in Java objects
// input fields and checkboxes first, then...
HtmlSubmitInput submit = form.getInputByName("submitbutton");

// set "value" attributes of input fields and checkboxes...

// submit the page
System.out.println("Submitting... ");
page = submit.click();
System.out.println("Done!");

// return the resulting HTML for scraping
return page.asXml(); 
```

现在，在这一`submit.click()`部分中，我不断收到以下异常：

```
java.net.SocketTimeoutException: Timeout while fetching: http://www.some-website.com 
```

我知道这是因为我正在尝试检索从 2002 年一直到今天的数据。从我的浏览器加载它，整个过程通常需要大约 6 分钟左右，并返回大约 24,200 行数据。

我计算了从`Submitting...`打印输出到`SocketTimeoutException`抛出的时间，在所有情况下，即使我将`client`超时设置为两分钟，它也总是正好是一分钟。现在，我知道这是最初加载页面（`client.getPage(...)`调用）的超时时间，那么我有什么办法可以设置按钮单击的超时时间并让它等待超过一分钟，也许是十分钟？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-20T16:34:44.983

在撰写本文时，此问题尚无已知解决方案。我最终做的是在页面上发出多个自动请求以分批接收数据。基本上，我先查询 2002，然后查询 2003、2004，依此类推。

# asp.net-mvc - ASP.NET MVC 4 页面上的 Kendo UI 错误

> ID：11898394
> 
> 赞同：0
> 
> 时间：2012-08-10T08:58:14.557
> 
> 标签：asp.net-mvc, kendo-ui

我有一个带有剑道菜单的 ASP.NET MVC 4 页面。一切正常，直到我在 web.config 中设置 debug="false"。这是网页错误：对象不支持属性或方法“kendoMenu”。任何想法？谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-26T01:08:15.497

问题是您拥有的剑道文件只是 .min 文件，可能不是常规的未压缩剑道文件。如果您不想设置 debug=false，请尝试

```
BundleTable.EnableOptimizations = true; 
```

在你的 BundleConfig.cs

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-05T17:24:31.150

KendoUI 团队的官方回答：[http](http://www.kendoui.com/forums/mvc/general-discussions/vs2012-rtm-mvc4-kendo-bundle-not-rendering.aspx) ://www.kendoui.c​​om/forums/mvc/general-discussions/vs2012-rtm-mvc4-kendo-bundle-not-rendering.aspx ：

> 在 ASP.NET MVC 4 RC 中，捆绑包在调试模式下包含缩小的 JavaScript 和 CSS 文件 ()。在 ASP.NET MVC 4 中不再是这种情况 - 在调试模式下会忽略缩小的文件。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-12T12:05:46.123

Microsoft.AspNet.Web.Optimization 包（处理捆绑和缩小）中存在一个错误，即优化器无法在调试模式下包含缩小文件。使用 Kendo 代码，您通常*只有*缩小文件 - 所以 BOOM。您可以按照上面链接中的解决方法，或者如果您有 Kendo 许可证，如果您查看安装文件夹，您会发现非缩小的 js 和 css 文件。将这些包含在您的项目中，您应该没问题。MS 已经承认了这个错误，并且应该在下一个版本的优化器中修复它。

# sql - SQL Server：if...else 基于行数

> ID：11898399
> 
> 赞同：1
> 
> 时间：2012-08-10T08:58:37.507
> 
> 标签：sql, sql-server, tsql, asp-classic

如果 select 语句中没有行，则此语句错误（select top 1...）

```
update tHomePageWorking 
set nColumn = 2, 
    nPosition = ((select top 1 nPosition 
                  from tHomePageWorking 
                  where nColumn = 2 
                  order by nPosition desc) + 1
                 ) 
where nPosition = 1 and nColumn = 1 
```

有没有办法测试这个语句的计数，如果没有找到记录，则默认为 1？

```
select top 1 nPosition 
from tHomePageWorking 
where nColumn = 2 
order by nPosition desc 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-10T09:05:35.730

我认为 COALESCE 功能将解决您的问题。它将返回第一个非空参数：

```
update tHomePageWorking 
set nColumn = 2, 
    nPosition = COALESCE (
                 ((select top 1 nPosition 
                  from tHomePageWorking 
                  where nColumn = 2 
                  order by nPosition desc) + 1
                 ) 
                 ,1)
where nPosition = 1 and nColumn = 1 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-10T09:02:26.950

一种方法是

```
declare @nposition int
set @nposition=(select top 1 nPosition 
                      from tHomePageWorking 
                      where nColumn = 2 
                      order by nPosition desc)
  update tHomePageWorking 
    set nColumn = 2, 
        nPosition = (coalesce(@nposition,0) + 1) 
    where nPosition = 1 and nColumn = 1 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-10T09:05:59.330

```
declare @pos int;
select @pos=(select top 1 nPosition 
                  from tHomePageWorking 
                  where nColumn = 2 
                  order by nPosition desc)
select @pos=ISNULL(@pos,0)+1;

update tHomePageWorking 
set nColumn = 2, 
    nPosition = @pos 
where nPosition = 1 and nColumn = 1 
```

# java - 石英服务器关闭后自动重新安排作业

> ID：11898402
> 
> 赞同：0
> 
> 时间：2012-08-10T08:58:41.707
> 
> 标签：java, quartz-scheduler

要求很简单，假设服务器需要在 01-01 和 01-10 之间将变量 salesOffRatio 设置为 0.8，总共十天。“salesOffRatio = 0.8”是由石英触发器在 01-10 00:00:00 触发的作业。问题是由于电力不足，服务器在 01-05 重新启动，变量 salesOffRatio 将不再是 0.8，它将变为初始值并且触发器不会触发，因为 01-10 00:00:00 已经过去。

有解决此类问题的方法吗？我需要自动重新安排，因为作业需要在很长一段时间内设置一个状态，并且由于维护操作或类似无法避免的事情，服务器必须在该持续时间内重新启动。

jdbcJobStore 失火似乎没问题，设置适当的失火阈值。但它是通用的，在这种情况下，我需要为每个工作设置不同的值（salesOffRatio1，salesOffRatio2 ...）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-13T20:44:07.390

我想出的几个解决方案：

1.  您`salesOffRatio`应该在服务器重新启动后幸存下来。将其存储在数据库、文件等中。不要修改变量，而是在作业中更新您的数据库。

2.  如果您的用例如此简单，为什么不创建一个函数

    ```
    double getSalesOffRatio(Date effectiveDate) 
    ```

    `salesOffRatio`这将根据`effectiveDate`传递返回正确的值？换句话说，只需在`salesOffRatio`每次需要时进行计算。顺便说一句，与读取当前系统时间相比，额外的参数将使测试更容易`getSalesOffRatio()`。

3.  您可以使用 XML 调度插件或其他方式在每次服务器重新启动时重新调度所有作业。默认情况下，作业在触发后被删除（`durable`属性），因此通过仔细配置失火策略，调度程序将在启动时重新触发所有作业。在我看来很脆弱。

最后的想法：谈到失火策略，您是否考虑过如果*在安排作业时*发生重启会发生什么？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-10T09:26:15.407

您可以将“salesOffRatio”的值保存到数据库或文件中，然后将其初始化为存储的值，而不是将其初始化为默认值。

或者，您可以在启动时运行一个程序以重新运行所有石英触发器（或仅在您需要更新这些值的作业组中的那些触发器）。

# android - 可用 Wifi 设备列表

> ID：11898409
> 
> 赞同：2
> 
> 时间：2012-08-10T08:59:17.603
> 
> 标签：android

我想显示可用 Wifi 设备的列表。这是我的代码，我不明白这里有什么错误：

```
wifi = (WifiManager) getSystemService(Context.WIFI_SERVICE);
if (wifi.isWifiEnabled() == false)
   {
Toast.makeText(getApplicationContext(), "wifi is disabled..making it enabled",Toast.LENGTH_LONG).show();
wifi.setWifiEnabled(true);
   }   
String[] str1 = null;
ArrayAdapter<String>adapter=new ArrayAdapter<String>(this,android.R.layout.simple_list_item_1,android.R.id.text1,str1);
 lv.setAdapter(adapter);
 WifiInfo info = wifi.getConnectionInfo();
textStatus.append("\n\nWiFi Status: " + info.toString());
 boolean b=wifi.isWifiEnabled();
if(b){
 wifi.setWifiEnabled(false);
Toast.makeText(getApplicationContext(), "Yes", Toast.LENGTH_SHORT).show();
enter code here 
```

* * *

这是我的代码，我想通过编程方式专门在 Android 中获取启用 Wifi 的设备属性。我怎么能得到那个？

```
 public void onReceive(Context c, Intent intent) 
 {
 results = wifi.getScanResults();
 size = results.size();
 int i = 0;
 str1 = new String[size];
 for (ScanResult result : results){
 str1[i] = result.SSID + " " + result.level;
 i++;
 } 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-10T09:05:04.543

您可以通过以下方式获取可用的 WIFI 扫描结果

```
List<ScanResult> mScanResults = mWifiManager.getScanResults(); 
```

然后迭代`mScanResults`并使用`results.SSID`. 此外，如果您有兴趣获得可`WifiManager.compareSignalLevel(int rssiA, int rssiB)`用于比较两个网络的最佳网络。

```
ScanResult bestResult = null;
for(ScanResult results : mScanResults){
   Log.d("result",results.SSID);
   if(bestResult == null || WifiManager.compareSignalLevel(bestResult.level,
                                                         results.level) < 0){
      bestResult = results;
   }
}
String message = String.format("%s networks found. %s is the strongest.", 
                                           mScanResults.size(), bestResult.SSID);
Log.d("best network",message); 
```

您可以从我的[`repository`](https://github.com/lalit3686/WIFIConnectionListener).

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-10T09:04:43.327

试试这个代码。

```
import java.util.ArrayList;
import java.util.HashMap;    
import java.util.List;    
import android.app.Activity;
import android.content.BroadcastReceiver;
import android.content.Context;    
import android.content.Intent;     
import android.content.IntentFilter;    
import android.net.wifi.ScanResult;    
import android.net.wifi.WifiConfiguration;   
import android.net.wifi.WifiManager;    
import android.os.Bundle;    
import android.util.Log;   
import android.view.View;    
import android.view.View.OnClickListener;    
import android.widget.AdapterView;    
import android.widget.Button;    
import android.widget.ListView;    
import android.widget.SimpleAdapter;    
import android.widget.TextView;    
import android.widget.Toast;

public class WiFiDemo extends Activity implements OnClickListener
 {      
    WifiManager wifi;       
    ListView lv;
    TextView textStatus;
    Button buttonScan;
    int size = 0;
    List<ScanResult> results;

    String ITEM_KEY = "key";
    ArrayList<HashMap<String, String>> arraylist = new ArrayList<HashMap<String, String>>();
    SimpleAdapter adapter;

    /* Called when the activity is first created. */
    @Override
    public void onCreate(Bundle savedInstanceState) 
    {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);

        textStatus = (TextView) findViewById(R.id.textStatus);
        buttonScan = (Button) findViewById(R.id.buttonScan);
        buttonScan.setOnClickListener(this);
        lv = (ListView)findViewById(R.id.list);

        wifi = (WifiManager) getSystemService(Context.WIFI_SERVICE);
        if (wifi.isWifiEnabled() == false)
        {
            Toast.makeText(getApplicationContext(), "wifi is disabled..making it enabled", Toast.LENGTH_LONG).show();
            wifi.setWifiEnabled(true);
        }   
        this.adapter = new SimpleAdapter(WiFiDemo.this, arraylist, R.layout.row, new String[] { ITEM_KEY }, new int[] { R.id.list_value });
        lv.setAdapter(this.adapter);

        registerReceiver(new BroadcastReceiver()
        {
            @Override
            public void onReceive(Context c, Intent intent) 
            {
               results = wifi.getScanResults();
               size = results.size();
            }
        }, new IntentFilter(WifiManager.SCAN_RESULTS_AVAILABLE_ACTION));                    
    }

    public void onClick(View view) 
    {
        arraylist.clear();          
        wifi.startScan();

        Toast.makeText(this, "Scanning...." + size, Toast.LENGTH_SHORT).show();
        try 
        {
            size = size - 1;
            while (size >= 0) 
            {   
                HashMap<String, String> item = new HashMap<String, String>();                       
                item.put(ITEM_KEY, results.get(size).SSID + "  " + results.get(size).capabilities);

                arraylist.add(item);
                size--;
                adapter.notifyDataSetChanged();                 
            } 
        }
        catch (Exception e)
        { }         
    }    
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2020-12-09T12:22:26.670

基于 android 开发者网站，搜索 wifi 列表的最佳方法如下：

```
WifiManager wifiManager = (WifiManager)
                   context.getSystemService(Context.WIFI_SERVICE);

BroadcastReceiver wifiScanReceiver = new BroadcastReceiver() {
  @Override
  public void onReceive(Context c, Intent intent) {
    boolean success = intent.getBooleanExtra(
                       WifiManager.EXTRA_RESULTS_UPDATED, false);
    if (success) {
      scanSuccess();
    } else {
      // scan failure handling
      scanFailure();
    }
  }
};

IntentFilter intentFilter = new IntentFilter();
intentFilter.addAction(WifiManager.SCAN_RESULTS_AVAILABLE_ACTION);
context.registerReceiver(wifiScanReceiver, intentFilter);

boolean success = wifiManager.startScan();
if (!success) {
  // scan failure handling
  scanFailure();
}

....

private void scanSuccess() {
  List<ScanResult> results = wifiManager.getScanResults();
  ... use new scan results ...
}

private void scanFailure() {
  // handle failure: new scan did NOT succeed
  // consider using old scan results: these are the OLD results!
  List<ScanResult> results = wifiManager.getScanResults();
  ... potentially use older scan results ...
} 
```

> 安卓 8.0 和安卓 8.1：

成功调用 WifiManager.getScanResults() 需要以下任一权限：

*   ACCESS_FINE_LOCATION

*   ACCESS_COARSE_LOCATION

*   CHANGE_WIFI_STATE

如果调用应用程序没有任何这些权限，则调用将失败并出现 SecurityException。

或者，在运行 Android 8.0（API 级别 26）及更高版本的设备上，您可以使用 CompanionDeviceManager 代表您的应用执行附近配套设备的扫描，而无需位置权限。

来源：[https ://developer.android.com/guide/topics/connectivity/wifi-scan](https://developer.android.com/guide/topics/connectivity/wifi-scan)

# c++ - 理解多态性设计 (C++)

> ID：11898411
> 
> 赞同：4
> 
> 时间：2012-08-10T08:59:20.210
> 
> 标签：c++, polymorphism

来自我的动态语言背景，我发现我在用静态类型语言（如 C++）表达我的意图时遇到了问题。

我正在为我的应用程序设计一个偏好系统。由于每个首选项都会有一些关联的值（默认值、限制、观察者函数......），我决定将每个首选项封装在它自己的对象中。这是我的初稿：

```
class Preference    // purely abstract class
{
    parseFromString(String s) = 0;
    get() = 0;
    void set(newVal) = 0;
private:
    // internal data
}; 
```

现在我需要创建一些派生类，`IntPreference`例如`FloatPreference`和`StringPreference`。以下是他们的声明的样子：

```
class IntPreference : Preference          class StringPreference : Preference
{                                         {
    int parseFromString(String s);            String parseFromString(String s);
    void set(int newVal);                     void set(String newVal);
    // etc.                                   // etc.
}                                         } 
```

既然该`set()`方法接受了`int`类中的参数和 中`IntPreference`的`String`参数`StringPreference`，则无法在基类中声明此函数。的返回值也是如此`parseFromString()`。我知道这在 C++ 中是不可能的，因为派生类中具有相同名称和不同参数类型的函数只会掩盖而不是覆盖它们的祖先。同样，这就是我用动态语言表达自己的方式，C++ 中的正确模式是什么？

**编辑：**对不起，我忘了提到我需要一个基类将它们全部存储在哈希表中：

```
Hash(const char *name, Preference pref); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-10T09:09:36.900

你现在拥有的是一个糟糕的`boost::any`班级，你也许应该简单地使用它。

你的`parseFromString()`成员函数是可疑的。您使用动态类型来决定从字符串中解析出什么，这总是必须静态知道的。

```
class my_any {
public:
  template<typename T>
  explicit // don't rely on conversions too much
  my_any(const T& t) : x_(t) {}

  // might throw if the cast fails
  template<typename T>
  T& get() { return boost::any_cast<T&>(x_); }

  // also maybe move semantics
  template<typename T>
  set(const T& t) { x_ = t; }
private:
  boost::any x_;
};

// usage:
my_any m;
m.set(23);
try {
  int& x = m.get<int>();
catch(boost::bad_any_cast& ex) {
  // ...
}

// for setting things from string just do 
// the right thing at the call site of set 
```

如果您不喜欢模板，您可以简单地提供一些默认值：

```
my_any::getInt(); my_any::getString(); 
```

**编辑**： 如果`boost::any`对您来说太笼统了，并且您想将构造限制为使用特定的一组值 `boost::variant`。尽管变体对编译时间的影响更大，并且对于初学者来说可能很难使用。

**EDIT2**：哈希表问题：

```
typedef boost::unordered_map<std::string, my_any> preference_table;
preference_table t;
// i added a template constructor to my_any
t.insert(std::make_pair("Foobar", my_any(23))); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-10T09:33:44.450

哇——慢点！你有一个*强类型*语言。这不是一个设计缺陷，而是故意的：它意味着有点限制，因此它可以对程序的正确性进行编译时检查，并生成更快、更清晰的代码。请不要通过创建一些类型不明确的接口来抛弃类型安全！您的问题中没有任何内容表明您有任何需要这样做。

考虑做类似的事情：

```
struct Config
{
    int max_for_whatever_;
    string name_for_whatever_;
    double scaling_factor_for_whatever_else_;
    bool verbose_;
}; 
```

在解析输入时，您可以填充特定的相关成员变量。

现在，有很多好的库可以做到这一点。领先的通用 C++ 3rd-party 库是“boost”，它具有参数解析工具。虽然一些 C++ 编译器附带了这个的增强版本（特别是，GNU C++ 编译器有一个扩展的`getopt`支持“长”选项格式的命令行参数，如“--flag”，而不仅仅是“-f”），但经过尝试和信任UNIX/Linux 工具`getopt()`可用于：

```
int c;
Config config = { 20, "plugins", 29.3, true };
while ((c = getopt(argc, argv, "m:n:s:v")) != EOF)
{
    switch (c)
    {
      case 'm': config.max_for_whatever_ = lexical_cast<int>(optarg); break;
      case 'n': config.name_for_whatever_ = optarg; break;
      case 'd': config.scaling_factor_for_whatever_ = lexical_cast<double>(optarg); break;
      case 'v': config.verbose_ ^= true; break;
      default:
        std::cerr << argv[0] << ": unsupported option '" << c << "' - exiting\n";
        exit(EXIT_FAILURE);
    }
}

// then, use the configuration parameters directly by name... 
```

无论您是从配置文件、命令行参数还是某种注册表中读取，这些概念都是相同的：当您遇到特定的配置值时，请尝试将它们写入特定于它们在代码中导入的正确类型和命名的变量。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-10T09:06:40.093

就我个人而言，我不会为这些东西中的每一个创建单独的分类。它们不可互换，有时您不能提供需要 StringPreference 的 IntPreference ...如果您将抽象“Preference”传递给函数，它将期望它是特定类型以便使用数据.

我根本不会在这里创建子类，我会有一个 Preference 类，它具有单独的函数 getIntValue()、getStringValue() 等。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-10T09:13:57.550

如果您的偏好具有不同类型的值，我认为您不能拥有单一界面。这就是我想到的：

```
class IPreference
{
public:
  virtual ~IPreference() {};
  virtual void Parse( std::istream& s ) = 0;
  virtual void Serialize( std::ostream& s ) = 0;
};

template <typename T>
class Preference : public IPreference
{
public:
  const T& Get() const { return m_value; }
  void Set(const T& value) const { m_value = value; }
private:
  T m_value;
}; 
```

我会尝试将尽可能多的逻辑放在基类中。但是，如果您想避免类型轮询，我认为您可能需要在这里为每种属性类型设置一个类。

再想一想，您可能会假设您的所有属性类型都支持读取/写入 std::streams。然后，您可以使用模板并使用 stringstream（如果您从字符串中读取）。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-08-10T09:14:02.500

您想使用模板：

```
template <typename T>
class ChildPreference
{

    T parseFromString(std::string s) {
        //todo
    }    
    void set(T newVal) {
        //todo
    }                 
    // etc.                                   
}

ChildPreference<int> intObj;
ChildPreference<float> fltObj;
ChildPreference<std::string> strObj; 
```

请注意模板，您必须在适当的位置定义函数。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-08-10T09:55:55.970

*如果 Base 声明了一个成员函数 set(int x)，而 Derived 声明了一个成员函数 set(string c)（同名但参数类型和/或常量不同），那么 Base set(int x) 是“隐藏的”而不是“重载”或“覆盖”（即使 Base set(int x) 是虚拟的）*

您的[答案在此链接中](http://www.parashift.com/c++-faq-lite/hiding-rule.html)

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-08-10T09:10:44.500

正如 Jacob S 的评论中所建议的那样，您可以使用模板。它看起来像这样：

```
template<class T>
class Preference
{
public:
    parseFromString(std::string s) = 0;
    T get() { /* some implementation */ }
    void set(T newValue) { /* some implementation */ }

private:
    T value_;
}; 
```

你会像这样使用它：

```
Preference<int> intPrefs;
Preference<std::string> stringPrefs; 
```

# javascript - 为 html 表单创建可变数量的按钮

> ID：11898414
> 
> 赞同：0
> 
> 时间：2012-08-10T08:59:47.773
> 
> 标签：javascript, html, button, freemarker

我正在尝试对问卷进行一些更改。目前在每个页面上都有一个 html 表单，其中有 3 个提交按钮，其值为“next”、“back”和“home”。按钮的值被传递给控制一切的java，以便它知道接下来要加载哪个页面。

我想要做的是在问卷的每一页底部都有一个按钮 - 但是，这个数字因问卷而异。

某些 freemarker 代码将总页数作为 $(totalNumber) 传递。我是编程新手，所以本能地我想在javascript中编写某种“for”循环，每个循环都会创建一个新按钮并增加一个虚拟变量以获得正确数量的按钮，但我无法解决如何做到这一点（我不确定这是否是正确的方法！）

谢谢你的帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-10T09:21:04.120

假设您`totalPages`至少为 1：

```
<#list 1..totalPages as pageNumber>
   <input type="button" value="${pageNumber}" onclick="goToPage(${pageNumber})" />
</#list> 
```

HTML（使用`input button`,`onclick`等）不是建议的一部分……我只是展示如何使用 FreeMarker。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-09-14T22:10:02.970

我自己有一个非常相似的问题，其他答案对我没有帮助。我刚学Web开发，所以不知道如何动态创建按钮或其他元素。您可以像这样在 JavaScript 函数中动态创建元素：

```
function add() {
    var element = document.createElement("input");
    element.setAttribute("name", "whatever");
    var elementAbove = document.getElementById("elementAbove");
    elementAbove.appendChild(element);
} 
```

您可以在其中创建一个 for 循环，以动态添加您想要的任意数量的元素。

# javascript - jQuery-UI 对话框不会显示按钮

> ID：11898421
> 
> 赞同：1
> 
> 时间：2012-08-10T09:00:33.047
> 
> 标签：javascript, jquery-ui, jquery-ui-dialog

我有一个奇怪的问题，也许解决方案会很简单。

我的对话框正在显示，但没有给定的按钮。请帮我。

我有：

```
 <div id="dialog">Are you sure you want to delete this user?</div>
  <script type="text/javascript">
  function openDialog(usrId){
    $("#dialog").dialog({
        buttons: {
            'Delete': function(){ 
                window.location = '/user/index/remove-user/usrId/'+usrId
            },
            'Cancel': function(){
                $(this).dialog('close')
            }
        }
        }).dialog("open");

    return false;
}
</script> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-10T09:36:03.530

自己找到解决方案：

```
<div id="dialog">Are you sure you want to delete this user?</div>
<script type="text/javascript">
function openDialog(usrId){
    $("#dialog").dialog("option", "buttons",  
            {
                'Delete':function(){ window.location = '/user/index/remove-user/usrId/'+usrId; $(this).dialog("close"); }
            ,
                'Cancel':function(){ $(this).dialog('close') } 
            }
    ).dialog("open");

    return false;
}
</script> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-10T09:21:20.557

您是否包含所有 Jquery Dialog js/css 文件？

# spring - RESTfull Web 服务和客户端设计

> ID：11898422
> 
> 赞同：1
> 
> 时间：2012-08-10T09:00:38.460
> 
> 标签：spring, design-patterns, rest, maven

**技术栈**：Java 1.6、JPA (Hibernate 3)、Spring 3、Oracle 11g、JAX-RS (RESTEasy)、Freemarker、Spring Webflow、jQuery、JBoss5

你好，

目前我正在做一个项目，我们有**两组功能**：

1.  发布一组**Web 服务 (RESTful)**供外部客户端使用。
2.  创建一**组**基本上允许执行管理功能的屏幕（大约 10 个），例如创建 MI 报告、设置新数据、配置和查看过去的数据。

**我的方法是：**

1.  创建服务层
2.  Webflow 和 Freemarker 模板调用此服务层上的方法。

3.  并为 REST (@Path) 创建另一层组件，再次使用相同的服务层。

**现在在一次设计会议上，有人提出了以下建议：**

1.  将层分离为单独的模块（如在 maven 中）
2.  为每个创建一个模块：

    **a2。**RESTful 服务（带有服务层和 javax.ws.rs.Produces）

    **b2。**带有调用模块 a2 中发布的服务的服务层的屏幕。这将使用 org.apache.commons.httpclient。**HttpClient**来调用 a2 服务。

我不确定我是否真的能看到好处，或者这是否是正确的方法。我想也许我不明白建议的方法。

有人可以详细说明哪种方法更好，为什么？

谢谢，阿迪

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-14T08:27:12.243

恕我直言，这没有必要使用 HttpClient 和一切来访问服务层。

这种机制将产生**巨大**且**无用**的CPU 开销（序列化/伪造 http 传输/反序列化消息）以在非常接近的 2 层之间进行通信（在同一战争中）。

如果您确定管理屏幕和 REST 服务将始终部署在一起，请使用直接通信，保持务实。

您应该保留一个 Maven 项目。无需为 10 个屏幕和 5 个 REST 服务创建复杂的项目。把事情简单化。

创建一个处理业务 + 业务的服务层。创建具有 2 个独立实现的传输层：

*   一种用于 REST 服务，直接从服务层调用 java 类
*   一种用于管理，也可以直接从服务层调用java类

如果您真的想创建 maven 模块， - 创建一个模块，将业务服务类捆绑在一个 jar 中 - 创建两个模块，将传输实现捆绑在 2 个单独的 jar 中 - 创建一个模块，捆绑业务 services.jar，这两个传输implementation.jar 及其在战争中的依赖关系

HIH

# php - 正则表达式在匹配中获取字符串的特定部分

> ID：11898423
> 
> 赞同：0
> 
> 时间：2012-08-10T09:00:50.143
> 
> 标签：php, regex, preg-match-all

在文件的源代码中，我有几个“钩子”，我想从我的 PHP 脚本中应用一些额外的变量。钩子应用于源，如：@include_plugin PluginName@

我可以使用`preg_match_all('/@include_plugin .*@/', $sSource, $aPlugins);` 此正则表达式找到它们，它为我提供了我想要的匹配项，但是是否也可以直接获取`PluginName`而不是我的解决方案，然后必须将子字符串应用于匹配项？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-10T09:04:25.010

您需要在正则表达式中使用捕获组。这些是通过在模式的一部分周围放置括号来创建的。

所以我们把你`.*`变成`(.*)`

```
preg_match_all('/@include_plugin (.*)@/', $sSource, $aPlugins);
var_dump($aPlugins); 
```

检查 var 转储的输出，索引 1 处将有一个仅包含插件名称的新子数组。

```
array(2) {
  [0]=>
  array(1) {
    [0]=>
    string(27) "@include_plugin PluginName@"
  }
  [1]=>
  array(1) {
    [0]=>
    string(10) "PluginName"
  }
} 
```

# sql - CASE THEN 子句总是被评估

> ID：11898427
> 
> 赞同：5
> 
> 时间：2012-08-10T09:01:09.817
> 
> 标签：sql, sql-server, formatting, sql-server-2008-r2

我正在做一个`SELECT`用于`CASE`将 nvarchar 值转换为适当类型的方法，如下所示：

```
SELECT CASE 
    WHEN @propType = 'money' THEN convert(money, datavalue)
    [...]
    ELSE datavalue
END
FROM [...] 
```

然而，似乎总是*被*`convert`执行，即使`@propType`不等于金钱。可运行示例：

 *```
declare @proptype nvarchar(50)= 'nvarchar'
declare @val nvarchar(10) = 'test'
select 
    case @proptype
        when 'money' then convert(money, @val)
        else @val
    end 
```

为什么会这样，我该如何解决？MSDN 文档是这样说的：

> CASE 语句按顺序评估其条件并在满足条件的第一个条件处停止。在某些情况下，在 CASE 语句接收表达式结果作为其输入之前计算表达式。评估这些表达式时可能会出错。首先计算出现在 CASE 语句的 WHEN 参数中的聚合表达式，然后将其提供给 CASE 语句。例如，以下查询在生成 MAX 聚合的值时会产生除以零错误。这发生在评估 CASE 表达式之前。

我不确定这是否相关，但是对于非本地人来说，语言有点重，所以也许是这样？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-10T09:13:08.143

请查看以下内容[在 Transact SQL (T-SQL) 中将 CONVERT() 与 CASE 或 IF 函数一起使用时要小心](http://www.fmsinc.com/free/newtips/sql/sqltip10.asp)

> 第一个想法通常是以下之一“由于评估的第一个值是数字，因此将其转换为十进制，并且所有其他数据也应为十进制”或“如果 SQL Server 能够转换任何值到指定的类型，那么所有值都应该是转换后的类型”。但是，这是不正确的（尽管第二个很接近）！
> 
> 真正的问题是，如果您选择在 Case 语句中的任何位置转换值，则您将值转换为的数据类型是所有值的预期类型，无论它们是否属于该类型。此外，即使 NONE 值实际上可以转换（即使 Convert 代码行从不执行），所有值仍应为 Convert 函数指定的类型！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-10-18T16:43:19.630

要清楚正在发生的事情，该`then`子句**没有**被评估。

如果你这样做，你会看到同样的错误

```
SELECT CASE @proptype
         WHEN 'money' THEN $1.0 /*<-- Literal of datatype money*/
         ELSE @val
       END 
```

的文档[`CASE`](http://technet.microsoft.com/en-us/library/ms181765.aspx)解释了返回类型

> `result_expressions`从 in和可选的类型集中返回最高优先级的类型 `else_result_expression`。有关详细信息，请参阅[数据类型优先级 (Transact-SQL)](http://technet.microsoft.com/en-us/library/ms190309.aspx)。

`money`具有更高的数据类型优先级，`nvarchar`因此`else @val`被评估然后被强制转换`money`并失败。

一种可能的解决方法是将其转换为，`sql_variant`因为这具有比两者更高的数据优先级。

```
declare @proptype nvarchar(50)= 'nvarchar'
declare @val nvarchar(10) = 'test'
select 
    case @proptype
        when 'money' then convert(money, @val)
        else cast(@val as SQL_VARIANT)
    end 
```*

# jquery - TinyMCE 和 jstree 冲突（向 textarea 添加内容）

> ID：11898428
> 
> 赞同：1
> 
> 时间：2012-08-10T09:01:15.040
> 
> 标签：jquery, tinymce, jstree

我已经从 jsTree 插件创建了一个 jsTree，所以当一个节点被点击时，内容被加载到旁边的一个 div 中。加载的 div 包含一个带有 TinyMCE 插件的文本区域。第一次加载时一切看起来都很好，但是当我单击另一个节点或再次单击同一个节点时，某些内容会添加到 textarea。

这是在 textarea 中弹出的字符串（因为 TinyMCE 插件，所以是 HTML）

```
<p><ins class="jstree-icon">&nbsp;</ins></p>
<p><ins class="jstree-icon">&nbsp;</ins></p> 
```

下次我重新加载内容时，它会增加 2 个，依此类推..

有谁知道我如何摆脱这个？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-07T12:48:53.323

我有同样的问题。就我而言，它有助于提供整个树（子树）中所有叶子的唯一 ID

```
<ul id="jsTree">
<li id="parent_a">
    <a href="">Name 1</a>
    <ul class="children">
        <li id="unique_id_a_1">...</li>
        <li id="unique_id_a_2">...</li>
        <li id="unique_id_a_n">...</li>
    </ul>
</li>
<li id="parent_b">
    <a href="">Name 2</a>
    <ul class="children">
        <li id="unique_id_b_1">...</li>
        <li id="unique_id_b-2">...</li>
        <li id="unique_id_b_n">...</li>
    </ul>
</li>
</ul> 
```

pzdr

# .net - 知道汇编是64位还是32位

> ID：11898429
> 
> 赞同：0
> 
> 时间：2012-08-10T09:01:17.087
> 
> 标签：.net, x86, assemblies, 64-bit, .net-assembly

我想以编程方式知道 com 程序集是 32 位还是 64 位。我检查了这个论坛，我遇到了`corflags`命令。

收到此错误：

> C:>corflags Interop.FiscPrnSys.dll 'corflags' 不是内部或外部命令、可运行程序或批处理文件。我在 C 中找到了我的程序集我哪里出错了？我的机器是 32 位的。这个命令只能在 64 位下工作吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-10T09:04:20.533

只是它的位置不包含在您的路径环境变量中。

在以下路径中安装 Microsoft SDK 后，您可以找到它

```
-32 bit version (Net 3.5)
C:\Program Files (x86)\Microsoft SDKs\Windows\v7.0A\Bin

-64 bit version (Net 3.5)
C:\Program Files (x86)\Microsoft SDKs\Windows\v7.0A\Bin\x64 
```

此外，安装了 Visual Studio 后，我在以下路径中找到了它（Net 4.0）

```
C:\Program Files (x86)\Microsoft SDKs\Windows\v7.0A\Bin\NETFX 4.0 Tools
C:\Program Files (x86)\Microsoft SDKs\Windows\v7.0A\Bin\NETFX 4.0 Tools\x64 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-10T09:06:50.910

使用 Visual Studio Tools -> Visual Studio Command Prompt，设置使用 VS Tools 的所有路径变量。（您也可以通过 cd 手动查找路径，或者像史蒂夫所说的那样更改路径变量。）

# vbscript - 从输入中列出vbs中组的成员

> ID：11898430
> 
> 赞同：0
> 
> 时间：2012-08-10T09:01:21.070
> 
> 标签：vbscript

好的，所以我想为我在学校的项目编写一个用户管理系统。我选择了 vbs，因为它必须是一种脚本语言。该脚本的功能之一是它可以列出给定组的成员。用户输入要在其中查找组的域，然后在输入框中列出它们。然后用户可以输入一个选定的组，该函数会将这个字符串提供给一个过程。这是不工作的部分。我希望有人可以在这里帮助我，我已经坐了好几个小时了....

```
'Funktion zur Verarbeitung der Gruppenverwaltung
Function gruppenVerwaltung
choice = IB ("Gruppenverwaltung" & vbCr & _
    "1\. Gruppe hinzufügen" & vbCr & _
    "2\. Grupe entfernen" & vbCr & _
    "3\. Gruppen anzeigen" & vbCr & _
    "4\. Lokale Gruppe einer globalen Gruppe zuweisen" & vbCr & _
    "5\. Lokale Gruppe aus einer globalen Gruppe entfernen" & vbCr & _
    "6\. Mitglieder einer Gruppe hinzufügen" & vbCr & _
    "7\. Mitglieder aus einer Gruppe entfernen" & vbCr & _
    "8\. Mitglieder einer Gruppe anzeigen" & vbCr & _
    "9\. Zurück...")

    If choice = 3 Then
        Do
            strDomain = IBText("Domäne eingeben: ", "Input")
        Loop Until strDomain <> ""
        gruppenAnzeigen(strDomain)
    End If

    If choice = 9 Then
        main
    End If

    If choice < 1 Or choice > 9 Then
        MsgBox "Falsche Eingabe! Nochmal..."
        gruppenVerwaltung
    End If

    If choice = 8 Then
    strDomain = IBText("Domäne der Gruppe eingeben: ")
        Set objComputer = GetObject ("WinNT://" & strDomain)
        objComputer.Filter = Array("group")         
        For each objGruppe in objComputer   
            strText = strText & "Name:" & objGruppe.Name & vbCr                         
        Next

        Do
            strGruppe = IBText(strText & vbCr & "Gruppe eingeben: ")
        Loop Until strGruppe <> ""
        strGruppe = "LDAP://CN=" & strGruppe
        mitgliederAnzeigen(strGruppe)
    End If
End Function

'Prozedur zur Anzeige aller Mitglieder einer Gruppe
Sub mitgliederAnzeigen(strGruppe)
/////////////////////////////////////////////////////////////////
Set objGroup = GetObject(strGruppe)   
For Each Member in objGroup.Members 
    WScript.echo Member.cn & " ; " & Member.displayName  
Next
End Sub 
```

所以基本上功能（gruppenVerwaltung）是菜单所在的位置。如果用户选择条目 8，那么他必须输入一个域，然后在列表（输入框）中获取该域中的所有组。然后他可以选择一个组，该组以字符串形式存储。

当该函数随后调用过程 (mitgliederAnzeigen) 时，它会尝试将 GetObject 应用于保存组名的字符串。这是我收到错误“找不到域或无法建立连接”或类似内容的地方（抱歉，错误消息是德语，错误代码是 8007054B）。

我已经在线查看了代码，但用户总是必须在代码中手动更改组（带有“LDAP\cn = groupName”的东西，我尝试过以这种样式格式化字符串，但显然它也不起作用。

谢谢你的帮助！

编辑：好的，现在我将我的电脑升级为域控制器，自升级后出现不同的错误（代码 80072020）。它出现在与以前相同的行中 (Set objGroup = GetObject(strGruppe))

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-23T13:09:27.753

虽然这不使用问题中采用的方法，但 net.exe 实用程序会操纵组。net.exe 可以通过 Run 方法从 vbscript 调用。了解更多信息：

C:> 网络帮助组

NET GROUP 必须在域控制器上运行。

关于在 VBscript 中获取结果，请参见[如何重定向命令行输出](http://support.microsoft.com/kb/278411)

# postgresql - 重命名postgresql数据库中的列名

> ID：11898433
> 
> 赞同：17
> 
> 时间：2012-08-10T09:01:34.343
> 
> 标签：postgresql, plpgsql

我想在 PostgreSQL 数据库中将所有列名重命名为小写，我刚刚编写了一个 sql 函数。下面是代码。

```
CREATE OR REPLACE FUNCTION update_column_names() RETURNS boolean AS $$
DECLARE 
aRow RECORD;
aRow2 RECORD;
tbl_name TEXT;
col_name TEXT;
new_col_name TEXT; 
BEGIN
    FOR aRow IN select table_name from information_schema.tables where table_schema='public' and table_type='BASE TABLE' LOOP
        SELECT aRow.table_name INTO tbl_name from current_catalog;
        FOR aRow2 IN select column_name from information_schema.columns where table_schema='public' and table_name = aRow.table_name LOOP
            SELECT aRow2.column_name INTO col_name from current_catalog;
            new_col_name:=lower(col_name);
            RAISE NOTICE 'Table name:%',tbl_name;
            RAISE NOTICE 'Column name:%',aRow2.column_name;
            RAISE NOTICE 'New column name:%',new_col_name;
            ALTER TABLE tbl_name RENAME COLUMN col_name TO new_col_name;
        END LOOP;
    END LOOP;
    RETURN true;
END;
$$ LANGUAGE plpgsql; 
```

上面的代码给出了关系 tbl_name 不存在。代码有什么问题？

* * *

## 回答 #1

> 赞同：39
> 
> 时间：2012-08-10T09:11:50.667

您需要使用[动态 SQL](http://www.postgresql.org/docs/9.1/static/plpgsql-statements.html#PLPGSQL-STATEMENTS-EXECUTING-DYN)来执行此操作；表名不能是变量。

```
⋮
EXECUTE 'ALTER TABLE ' || quote_ident(tbl_name) || ' RENAME COLUMN '
        || quote_ident(col_name) || ' TO ' || quote_ident(new_col_name);
⋮ 
```

或类似的

# java - 如何知道线程是否被 Reader.read() 阻塞？

> ID：11898436
> 
> 赞同：0
> 
> 时间：2012-08-10T09:01:39.477
> 
> 标签：java, java-io

在它的文件中`Reader.read()`说

> 读取单个字符。此方法将阻塞，直到字符可用、发生 I/O 错误或到达流的末尾。

当`read()`没有从流中得到任何东西时，它将阻塞。但是，这种“阻塞”并没有将线程变成`State.BLOCKED`或- 等待第一个字符时`State.WAITING`线程仍在，因此我不知道线程是否被.`State.RUNNABLE``read()``read()`

那么我怎么知道是否`Reader.read()`阻塞了另一个线程的线程呢？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-10T09:05:05.073

您可以获取 Thread 的堆栈跟踪，并查看它当时正在运行的方法。

或者我所做的是设置读取开始的时间，当读取完成时会更清楚。我有另一个线程检查这个时间并在时间过长时发出警告。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-10T09:07:33.827

你为什么不检查`Reader#ready()`你的阅读是否会被阻止？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-11T02:09:27.383

只需使用 Socket.setSoTimeout() 设置读取超时并捕获 SocketTimeoutException。

# iphone - 为什么每次在 iOS 中滚动时 UITable 行都未选中

> ID：11898438
> 
> 赞同：1
> 
> 时间：2012-08-10T09:02:01.293
> 
> 标签：iphone, ios, uitableview

我设计了一个表格视图，用于选择关注者列表以发送消息，因此我可以在那里选择一些关注者，然后在 Twitter 上向他们发送消息。

> 我正在使用 UITable View 和 UITableViewCellAccessoryCheckmark 来做到这一点。

![在此处输入图像描述](../Images/49e4555d308dbb643d4ff66e58a53b4f.png)

> 但是当我向下滚动表格时，每次都未选中已检查的行。

**我在FollowersListView.h**中为选定的追随者清除了表格视图和数组

 **```
@interface FollowersListView : UIViewController<UITableViewDelegate,UITableViewDataSource>{

IBOutlet UITableView *tableFollowers;

NSMutableArray *listFollowrsName;   
NSMutableArray *listSelectedFollowrsId;
}

@property(nonatomic,retain) NSMutableArray *listFollowrsName;    
@property(nonatomic,retain) NSMutableArray *listSelectedFollowrsId;

@end 
```

**我的 tableview 代码在FollowersListView.m**文件中是这样的

```
- (NSInteger)tableView:(UITableView *)tableView numberOfRowsInSection:(NSInteger)section{

    return [listFollowrsName count];
}

- (UITableViewCell *)tableView:(UITableView *)tv cellForRowAtIndexPath:(NSIndexPath *)indexPath {
    UITableViewCell *cell = [tv dequeueReusableCellWithIdentifier:@"CellWithSwitch"];
    //if (cell == nil) {
    cell = [[[UITableViewCell alloc] initWithStyle:UITableViewCellStyleDefault reuseIdentifier:@"CellWithSwitch"] autorelease];
    cell.selectionStyle = UITableViewCellSelectionStyleNone;
    cell.textLabel.font = [UIFont systemFontOfSize:14];

    //cell.accessoryType = UITableViewCellAccessoryCheckmark;
    cell.accessoryType = UITableViewCellStyleDefault;
    //}

    NSString *cellValue = [listFollowrsName objectAtIndex:indexPath.row];
    cell.textLabel.text = cellValue;    

    return cell;
}

//to select a row
- (void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)path {
    UITableViewCell *cell = [tableView cellForRowAtIndexPath:path];

    if (cell.accessoryType == UITableViewCellAccessoryCheckmark) {
        cell.accessoryType = UITableViewCellAccessoryNone;        
        NSLog(@"row is un-checked %@",[NSNumber numberWithInt:path.row]);
        [listSelectedFollowrsId removeObject:[NSNumber numberWithInt:path.row]];
        NSLog(@"Now selected person are%@",listSelectedFollowrsId);

    } else {
        cell.accessoryType = UITableViewCellAccessoryCheckmark;
        NSLog(@"row is checked %@",[NSNumber numberWithInt:path.row]);
        [listSelectedFollowrsId addObject:[NSNumber numberWithInt:path.row]];       
        NSLog(@"Now selected person are%@",listSelectedFollowrsId);
    }

} 
```

我想我需要根据已经存储的选定列表加载每个单元格，但不知道该怎么做。

任何人都可以指导我做错了什么，任何帮助将不胜感激

**编辑**

@诺瓦格

我已在 .h 文件中将“ *listSelectedFollowrsId ”声明为 NSMutable 数组，并在 viewDidLoad 方法中初始化，然后在***didSelectRowAtIndexPath**方法中添加/删除值以管理选定的行。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-10T09:07:23.860

问题是每次滚动时都会创建一个新单元格。条件必须存在，否则您将`if (cell == nil)`一遍又一遍地重写单元格。

尝试以下操作：

```
- (UITableViewCell *)tableView:(UITableView *)tv cellForRowAtIndexPath:(NSIndexPath *)indexPath {
  UITableViewCell *cell = [tv dequeueReusableCellWithIdentifier:@"CellWithSwitch"];
  if (cell == nil) {
    cell = [[[UITableViewCell alloc] initWithStyle:UITableViewCellStyleDefault reuseIdentifier:@"CellWithSwitch"] autorelease];
    cell.selectionStyle = UITableViewCellSelectionStyleNone;
    cell.textLabel.font = [UIFont systemFontOfSize:14];
    cell.accessoryType = UITableViewCellStyleDefault;
  }
  NSString *cellValue = [listFollowrsName objectAtIndex:indexPath.row];
  cell.textLabel.text = cellValue;    
  return cell;
} 
```

它可能不起作用，我现在使用的是Windows机器，所以现在无法编译代码并自己测试它。

希望能帮助到你

***编辑***

如果它不能解决问题，我还会添加一个变量（可能是一个`NSMutableDictionary`）来记录已“检查”的名称。`return cell;`使用它，您可以在方法之前添加以下内容`cellForRowAtIndexPath:`：

```
if ([[theDictionary objectForKey:/*your key here, can be anything*/]isEqualToString:/*string or whatever, just make sure that the checked ones are different from the unchecked ones*/])
  cell.accessoryType = UITableViewCellAccessoryCheckmark;
else
  cell.accessoryType = UITableViewCellAccessoryNone; 
```

***编辑 2***

这是您应该在之前添加的内容`return cell;`（之前没有看到`listSelectedFollowrsId`数组）：

```
cell.accessoryType = UITableViewCellAccessoryNone;
for (int i = 0; i < [listSelectedFollowrsId count]; i++) {
  if ([[listSelectedFollowrsId objectAtIndex:i]intValue] == indexPath.row) {
    cell.accessoryType = UITableViewCellAccessoryCheckmark;
  }
} 
```

如果该行之前已被点击，这会将附件设置为复选标记。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-10T09:23:29.247

你可以使用这个：

```
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath    
{       

    UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier];
    if (cell == nil)

    {
        cell = [[[UITableViewCell alloc] initWithStyle:UITableViewCellStyleDefault reuseIdentifier:nil] autorelease];        
        cell.backgroundColor=[UIColor clearColor];        
        cell.selectionStyle=UITableViewCellSelectionStyleNone;      
        cell.accessoryType=UITableViewCellAccessoryNone;            
    }
    else
    {
        UIView *subview;
        while ((subview= [[[cell  contentView]subviews]lastObject])!=nil)       
            [subview removeFromSuperview];            
    }

    NSString *cellValue = [listFollowrsName objectAtIndex:indexPath.row];
    cell.textLabel.text = cellValue;    
    return cell;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-10T09:04:28.703

这是因为当您滚动表格时，会调用 cellForRowAtIndexPath。

在此功能中，您将一次又一次地创建单元格。因此，您在 didSelectRowAtIndexPath 中标记的复选标记将被删除。

有关 tableview 的详细示例，请参阅此[链接](http://www.iosdevnotes.com/2011/10/uitableview-tutorial/)。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-10T09:06:21.377

在 cellForRowAtIndexPath 中，您始终将其设置为未选中。您需要测试该行是否在您选择的关注者列表中，如果是，请相应地设置附件。

这完全是由于单元重用以保持较低的内存消耗，即使对于具有数千行的表也是如此。**

# objective-c - 在 iOS 项目中包含其库时，MonkeyTalk 会做什么？

> ID：11898440
> 
> 赞同：2
> 
> 时间：2012-08-10T09:02:11.520
> 
> 标签：objective-c, ios, monkey-testing

我想知道将静态库嵌入 iOS 项目时[MonkeyTalk正在做什么。](http://www.gorillalogic.com/testing-tools/monkeytalk)我试图记录一些自动化的 UI 测试，但在我的应用程序中发现了不良行为。

我需要将可访问性标签添加到自定义 UI 组件，因为 MonkeyTalk 不会自动识别它。当我这样做时，我会得到`nil`一个变量，`nil`当不添加可访问性标签时，该变量永远不会出现。

如果我更改可访问性标签分配，它会在 UI 组件的一些初始化（通过标准 Obj-C 2.0 属性合成的 ivars）之后工作一些行......

这没有按预期运行（从 获取 ivar 时获取 nil `_groupViewController`）：

```
_groupViewController = [[GroupsViewController alloc] init];

[_groupViewController.view setAccessibilityLabel:kAL_Slider];

// Set _groupViewController ivars through non-custom properties 
```

这样做：

```
_groupViewController = [[GroupsViewController alloc] init];

// Set _groupViewController ivars through non-custom properties   

[_groupViewController.view setAccessibilityLabel:kAL_Slider]; 
```

我的问题是，图书馆在内部做什么？它会在运行时修改任何类型的对象内部吗？

# c# - 在 Moq C# 中模拟运算符的行为

> ID：11898447
> 
> 赞同：2
> 
> 时间：2012-08-10T09:02:38.273
> 
> 标签：c#, mocking, moq, moq-3

希望你好。

我正在使用 C# 中的 Moq 创建一些测试。我正在模拟的对象之一已覆盖 ==、> 和 < 运算符。

有谁知道它是否可能，如果可能，如何...配置一个 Mock 对象来复制它。我问的原因是我试图注入一个模拟存根作为我得到的一些遗留代码，这些代码具有深层和肮脏的依赖关系。

感谢您的时间

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-10T09:04:40.783

当您覆盖此类操作时，您还应该提供它们的命名等效项。如果您以这种方式重新编写代码，则模拟它会更容易。

```
public static bool operator ==(SomeType a, SomeType b)
{
    return a.Equals(b);
}

public virtual bool Equals(SomeType b)
{
   // yours logic here
   return base.Equals(b)
} 
```

# python - 在无限循环中停止python脚本

> ID：11898451
> 
> 赞同：3
> 
> 时间：2012-08-10T09:03:29.410
> 
> 标签：python, loops, cron, infinite-loop

我正在编写一个会不断抓取数据的 Python 脚本，但这需要很长时间。有没有一种安全的方法来停止长时间运行的 python 脚本？循环将运行超过 10 分钟，如果我愿意，我需要一种方法来停止它，在它已经运行之后。

如果我从 cron 作业执行它，那么我假设它会一直运行到完成，那么我该如何停止它呢？

另外，如果我从浏览器运行它并调用该文件。我假设停止加载页面会停止它，对吗？

* * *

**这是场景：**
我有一个 python 脚本，它从页面收集信息并将其放入队列中。然后我想要另一个处于无限循环中的 python 脚本，它只检查队列中的新项目。假设我希望无限循环从早上 8 点开始，到晚上 8 点结束。我该如何做到这一点？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-10T09:18:02.450

让我给你一个替代方案。看起来您想要实时更新某种信息。您可以使用发布/订阅接口（发布/订阅）。由于您使用的是 python，因此有很多可能性。

其中之一是使用[Redis](http://redis.io/) pub/sub 功能：[http](http://redis.io/topics/pubsub/) ://redis.io/topics/pubsub/ - 这里是相应的 python 模块：[redis-py](https://github.com/andymccurdy/redis-py/)

-**更新**-

## 例子

这是[dirkk0](https://stackoverflow.com/users/573216/dirkk0)的一个示例（[问题](https://stackoverflow.com/questions/7871526/is-non-blocking-redis-pubsub-possible)/[答案](https://stackoverflow.com/a/8800112/675065)）：

```
import sys
import threading

import cmd

def monitor():
    r = redis.Redis(YOURHOST, YOURPORT, YOURPASSWORD, db=0)

    channel = sys.argv[1]
    p = r.pubsub()

    p.subscribe(channel)

    print 'monitoring channel', channel
    for m in p.listen():
        print m['data']

class my_cmd(cmd.Cmd):
    """Simple command processor example."""

    def do_start(self, line):
        my_thread.start()

    def do_EOF(self, line):
        return True

if __name__ == '__main__':
    if len(sys.argv) == 1:
        print "missing argument! please provide the channel name."
    else:
        my_thread = threading.Thread(target=monitor)
        my_thread.setDaemon(True)

        my_cmd().cmdloop() 
```

-**更新 2** -

另外，看看这个教程：

[http://blog.abourget.net/2011/3/31/new-and-hot-part-6-redis-publish-and-subscribe/](http://blog.abourget.net/2011/3/31/new-and-hot-part-6-redis-publish-and-subscribe/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-10T10:40:35.623

我认为持有浏览器页面并不一定会停止 python 脚本，我建议您使用 FORK 在父进程的控制下启动脚本：

*   例子 ：

导入操作系统、时间、信号

```
def child():
   print 'A new child ',  os.getpid( )
   time.sleep(5)
   os._exit(0)  

def parent():
   while True:
      newpid = os.fork()
      if newpid == 0:
         child()
      else:
         pids = (os.getpid(), newpid)
         print "parent: %d, child: %d" % pids
         print "start counting time for child process...!"
         time1 = time.clock()
         while True:
                  #time.sleep(1)
                  time2 = time.clock()
                  # Check if the execution time for child process exceeds 10 minutes... 
                  if time2-time1 >= 2 :
                           os.kill(int(newpid), signal.SIGKILL)
                           break

      if raw_input( ) == 'q': break

parent() 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-10T09:13:16.507

我想解决这个问题的一种方法是为一个循环运行一个脚本，这将：

1.  检查没有其他脚本实例正在运行
2.  查看队列并处理在那里找到的所有内容

现在，您可以在上午 8 点到晚上 8 点之间每分钟从 cron 运行这个脚本。唯一的缺点是新项目可能需要一些时间来处理。

# google-bigquery - BigQuery 中的列数限制？

> ID：11898453
> 
> 赞同：7
> 
> 时间：2012-08-10T09:03:36.210
> 
> 标签：google-bigquery

BigQuery 中的列数是否有限制？

我正在考虑按照最佳实践的建议准备大量列。 [https://developers.google.com/bigquery/articles/ingestionbestpractices](https://developers.google.com/bigquery/articles/ingestionbestpractices)

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-10T15:30:47.093

限制为 10,000 列。这个限制有点武断，假设没有人拥有超过 10k 列。查看错误日志，确实有人遇到了这个限制并得到了错误。导入时行的总大小（CSV 数据的字节）也有 64k 的限制。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-06-19T17:53:58.930

2013 update: The row size limit has gone from 64k to 1 MB for CSV and 20 MB for JSON data. It's a good idea to keep the number of columns below 10,000.

Check [https://cloud.google.com/bigquery/docs/creating-clustered-tables#limitations](https://cloud.google.com/bigquery/docs/creating-clustered-tables#limitations)

# android - 当 WiFi 和移动设备可用时强制 WiFi 发送数据

> ID：11898455
> 
> 赞同：2
> 
> 时间：2012-08-10T09:03:47.527
> 
> 标签：android, android-networking

在我的应用程序中，我有数据，只有当 wi-fi 可用时我才想发送这些数据。**我可以检查 wi-fi 或移动数据是否可用，但是当 wi-fi 和移动数据都处于活动**状态时，我该如何处理？在这种情况下如何强制使用 wi-fi？

```
private static void logNetworkState() {
    ConnectivityManager connManager = (ConnectivityManager) context.getSystemService(Context.CONNECTIVITY_SERVICE);

    NetworkInfo wifi = connManager.getNetworkInfo(ConnectivityManager.TYPE_WIFI);
    NetworkInfo mobile = connManager.getNetworkInfo(ConnectivityManager.TYPE_MOBILE);

    String logStr = "Network state: ";

    if (wifi.isAvailable()) {
        logStr+= " wi-fi avalibale;";
    }
    if (mobile.isAvailable()) {
        logStr+= " mobile network avaliable";
    }
    log(logStr);
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-10T09:19:08.877

如果默认情况下两者都处于活动状态，则数据通过 WI-FI 路由。但这又取决于底层网络实现。

通常我使用**connectivymanager.startusingnetworkfeature()**来强制它使用移动数据。同样，上述方法的参数是特定于实现的

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-10T10:55:04.347

默认情况下，当您拥有两个数据时，我的经验仅通过 wifi 传输。但是，如果您想反之，则此方法可能会帮助您 **setNetworkPreference**。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-03-06T01:09:18.083

要将所有网络请求从您的应用程序定向到外部 Wi-Fi 设备，请`ConnectivityManager#setProcessDefaultNetwork`在 Lollipop 设备上调用，然后在 Marshmallow 调用上调用`ConnectivityManager#bindProcessToNetwork`，这是直接 API 替代。

检查此博客文章：[https ://android-developers.googleblog.com/2016/07/connecting-your-app-to-wi-fi-device.html](https://android-developers.googleblog.com/2016/07/connecting-your-app-to-wi-fi-device.html)

# c# - 创建和更新 RTF 表单域

> ID：11898459
> 
> 赞同：0
> 
> 时间：2012-08-10T09:04:06.293
> 
> 标签：c#, forms, rtf

我想实现以下目标：用固定位置的新日期更新富文本框中的文本。

假设我有以下文字：“我从**12-01-2012**开始休假，所以我不会......”。此文本中的日期需要根据我的日期选择器中设置的日期进行相应更改。

我使用以下非常基本的代码阅读了文本：

```
// Open OOF template
string filename = @"ooftemplate.rtf";
rtbOOFMsg.LoadFile(filename, RichTextBoxStreamType.RichText); 
```

我想我需要创建一个 RTF 表单字段并以编程方式更新它。但是如何创建/添加 RTF 表单域以及如何更新它？

# iphone - 内存 RAM 中的 NSURL

> ID：11898465
> 
> 赞同：3
> 
> 时间：2012-08-10T09:04:25.850
> 
> 标签：iphone, ios, memory, nsurl, ram

是否可以使用 NSURL 来引用 RAM 中的文件...我的意思不是长期内存 ~16 GB 存储，而是专用 RAM ~512MB？

我看到了以下站点，但它似乎从不同的角度解决了它.. [http://memfrag.se/blog/Memory-Mapped-Files](http://memfrag.se/blog/Memory-Mapped-Files)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-10T11:15:06.640

当然你可以拥有它。URL 用作**通用**资源定位器。

您可以定义一个方案，例如`memory://MEMORY_ADRESS`为内存中的一个文件。

此外，如果您想使用`NSURLRequest`内存映射文件（无论请求应该做什么），您可以`NSURLProtocol`为此方案注册一个实例。

您还可以添加理解URL`NSFileManager`的能力的子类。`memory://`

# php - json格式问题

> ID：11898470
> 
> 赞同：-1
> 
> 时间：2012-08-10T09:04:33.440
> 
> 标签：php, javascript, mysql, json

我正在进行一个项目，必须使用 json 来实现我的目标。我正在使用 mysql 和使用 json_encode() 的 php。我怎么得到这个：

```
{"contacts": [ { "id": "c200","name": "Ravi Tamada","email": "ravi@gmail.com","address": "xx-xx-xxxx,x - street, x - country","gender" : "male","phone": { "mobile": "+91 0000000000","home": "00 000000","office": "00 000000"}},{ "id": "c201","name": "Johnny Depp","email": "johnny_depp@gmail.com","address": "xx-xx-xxxx,x - street, x - country","gender" : "male","phone": {"mobile": "+91 0000000000","home": "00 000000","office": "00 000000"}}, 
```

长成这样？

```
{
"contacts": [
    {
            "id": "c200",
            "name": "Ravi Tamada",
            "email": "ravi@gmail.com",
            "address": "xx-xx-xxxx,x - street, x - country",
            "gender" : "male",
            "phone": {
                "mobile": "+91 0000000000",
                "home": "00 000000",
                "office": "00 000000"
            }
    },
    {
            "id": "c201",
            "name": "Johnny Depp",
            "email": "johnny_depp@gmail.com",
            "address": "xx-xx-xxxx,x - street, x - country",
            "gender" : "male",
            "phone": {
                "mobile": "+91 0000000000",
                "home": "00 000000",
                "office": "00 000000"
            }
    }
            ]
}; 
```

我知道这是可以做到的，因为当多个教程“回显”对象时，json 对象看起来像这样，就像这个[http://api.androidhive.info/contacts/](http://api.androidhive.info/contacts/)。我使用了错误的功能吗？这是我的代码。

```
$employee = array();
while($employee = mysql_fetch_array($result, MYSQL_ASSOC)) {
$employee[] = array('employee'=>$employee);
}

$output = json_encode(array('employee' => $employee));

} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-10T09:07:18.320

将`JSON_PRETTY_PRINT`选项设置为[手册页上的](http://php.net/json_encode)名称。

```
$output = json_encode(array('employee' => $employee), JSON_PRETTY_PRINT); 
```

不过，我不建议将其用于生产：它会增加文件大小。

# drupal - drupal 块不按重量排序

> ID：11898471
> 
> 赞同：1
> 
> 时间：2012-08-10T09:04:35.947
> 
> 标签：drupal, drupal-7, drupal-modules, drupal-views, drupal-theming

我们有额外的内容显示在视图生成的块和块中，出于某种原因，drupal 现在完全无视我们给予基本“主页内容”块的任何权重/顺序

例如，我们总是希望主页内容块位于主要内容区域的顶部，因此我们将其移至顶部/分配了最低权重，但它完全无视这一点，总是在所有其他内容之后呈现块块。

我们通过禁用我们的模板（基于自适应主题构建）排除了任何 css 问题，例如浮动/绝对位置 我们在 localhost 上有一个旧版本的站点，它可以很好地显示块并且以正确的顺序，html 物理地显示主页内容首先渲染，但在他的开发版本中，它的物理渲染是最后一个。

我还检查并禁用了所有我可以使用的模块，除了一些您无法禁用的模块，因为它们包含数据，但这不应该是一个问题，因为该站点已经持续构建了一段时间并且已经一直运作良好。

我已经完成了清除缓存等基础知识，但无济于事。我只是奇怪我们如何遇到与主页内容块和其他自定义块相关的问题。与其他自定义内容块相关的自定义内容块完全尊重赋予它们的权重。

我们的 drupal 安装中的一些额外细节

Web 服务器 Apache/2.2.22 (Unix) mod_ssl/2.2.22 OpenSSL/0.9.8e-fips-rhel5 mod_bwlimited/1.4 PHP/5.2.17 OK cURL Enabled OK PHP 内存限制 128M OK 数据库系统版本 5.0.95-community OK PHP 5.2.17

任何线索表示赞赏

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-10T12:43:46.007

可以通过编写自定义模块函数来完成力权重

```
MYMODULE_block_info_alter(&$blocks, $theme, $code_blocks) { 
  $blocks['system']['main']['weight'] = -9999; 
} 
```

# c - Linux变量存储在进程地址空间-C

> ID：11898478
> 
> 赞同：1
> 
> 时间：2012-08-10T09:04:53.217
> 
> 标签：c, linux, memory, process

这是我正在学习的试卷中出现的一个问题。

“研究下面的代码。画一个图，描绘一个 32 位 Linux 进程地址空间的组织结构。在你的图中标注了大概的位置：a、b、c、*c（即 c 指向的内存）、malloc和主要”

```
int a; int b = 10;
int main()
{
  char *c;
  c = malloc(b);
  return (0);
} 
```

以上是我的看法，如有错误请指正。

a 是一个未初始化的全局变量，因此将被初始化为零并存储在 BSS 中。b 是一个已初始化的全局变量，因此将在数据段上进行。*c 是一个自动变量，因此将存储在堆栈中。c 是动态分配的，所以会放在堆上。Main 是执行代码，因此将存储在文本中。

我不确定 malloc 部分，它只是程序代码也会以文本形式出现，还是作为函数调用在堆栈上？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-10T09:16:24.580

您对变量的看法基本正确。不过只是一个小的修正。**c**指的是指针变量，***c**指的是 c 指向的**内存**。因此 c 是一个自动变量并进入堆栈，而***c**是动态分配的内存，因此它驻留在堆中。

关于 malloc，函数调用可能在堆栈的帮助下进行，即您传递给 malloc 的参数可以使用堆栈传递，但函数（即可执行部分）位于**文本**部分。会发生的是 main() 会在堆栈上为 malloc() 创建参数，设置其值，然后设置**PC=address of malloc()**。malloc 的参数也可能是使用寄存器而不是堆栈传递的，因为只有一个参数，但这可能因编译器和平台而异。

# macos - 安装 pip 时遇到问题（OS X 10.6 / Python 2.6.1）

> ID：11898485
> 
> 赞同：0
> 
> 时间：2012-08-10T09:05:18.533
> 
> 标签：macos, pip, easy-install

我正在开发一台运行 10.6 Snow Leopard 的 iMac（受 IT 政策的限制）。我反复尝试安装`pip`（作为安装的前兆，`csvkit`但对以下错误消息感到困惑：

```
smg-02639:~ matmo$ pip install csvkit
Usage: pip COMMAND [OPTIONS]

pip: error: No command by the name pip install
  (maybe you meant "pip install csvkit") 
```

这应该足以解释我为什么感到委屈。我发现了一个[类似但最终不相关的问题](https://stackoverflow.com/questions/8370215/pip-error-no-command-by-the-name-pip-install-r-requirements-txt-after-runni)。*我在做什么错*？

为了可能不必要的完整性，这里是安装顺序：

```
smg-02639:~ matmo$ sudo easy_install pip
Searching for pip
Best match: pip 1.1
Adding pip 1.1 to easy-install.pth file
Installing pip script to /usr/local/bin
Installing pip-2.6 script to /usr/local/bin

Using /Library/Python/2.6/site-packages
Processing dependencies for pip
Finished processing dependencies for pip
smg-02639:~ matmo$ pip help
Usage: pip COMMAND [OPTIONS]

pip: error: No command by the name pip help
  (maybe you meant "pip help") 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-13T13:10:53.640

看起来好像我一直在遵循过时的指示。

我已成功[按照此处的说明进行操作](http://www.pip-installer.org/en/latest/installing.html)

# canvas - 自动化谷歌足球 2012

> ID：11898491
> 
> 赞同：2
> 
> 时间：2012-08-10T09:05:36.100
> 
> 标签：canvas, selenium, watir, watir-webdriver, browser-automation

我正在尝试自动化[Google Soccer 2012](https://www.google.com/doodles/soccer-2012)，只是为了好玩。[我在自动化其他 Google 游戏](http://filipin.eu/tag/game/)时没有任何问题。

`left`Soccer 的问题在于它对and没有反应`right`，但`space`工作得很好。

这是整个脚本：

```
puts "Go to game."
require "bundler/setup"
require "watir-webdriver"
browser = Watir::Browser.new :chrome
browser.goto "https://www.google.com/doodles/soccer-2012"

sleep 1
puts "Go!"
browser.div(id: "hplogo").frame.div.click

sleep 1
puts "Left!"
browser.send_keys :left

sleep 1
puts "Rigth!"
browser.send_keys :right

sleep 1
puts "Space!"
browser.send_keys :space 
```

[您可以在https://github.com/zeljkofilipin/olympics](https://github.com/zeljkofilipin/olympics)查看足球和其他游戏的代码

有人知道如何获得`left`和`right`工作吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-10T14:47:10.233

如果您多次按箭头键，守门员会稍微移动：

```
100.times{browser.send_keys :left} 
```

这让我觉得你需要一些如何按住箭头键而不是点击它。不幸的是，我找不到按住键的方法（selenium-webdriver 操作生成器 key_down 似乎只允许控制键）。

如果您可以不使用键盘，那么守门员似乎对鼠标反应良好：

```
def move(browser, direction)
    el = browser.driver.find_element(:id, 'hplogo')
    case direction
        when :start
            browser.driver.action.move_to(el).perform
        when :left
            browser.driver.action.move_by(-1, 0).perform
        when :left_fast
            browser.driver.action.move_by(-5, 0).perform            
        when :right
            browser.driver.action.move_by(1, 0).perform
        when :right_fast
            browser.driver.action.move_by(5, 0).perform         
        when :jump
            browser.send_keys :space
    end
end

puts "Go to game."
require "watir-webdriver"
browser = Watir::Browser.new :chrome
browser.goto "https://www.google.com/doodles/soccer-2012"

sleep 1
puts "Go!"
browser.div(id: "hplogo").frame.div.click
move(browser, :start) #Centre mouse

sleep 1
puts "Left!"
80.times{move(browser, :left)}

sleep 1
puts "Right!"
10.times{move(browser, :right_fast)}

sleep 1
puts "Space!"
move(browser, :jump) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-10T09:24:58.217

```
sleep 3
puts "Left!"
browser.send_keys :left 
```

你发送左右键太快了。在动画完成之前，动画似乎没有检测到输入。

# c++ - CORBA 序列内存泄漏

> ID：11898492
> 
> 赞同：1
> 
> 时间：2012-08-10T09:05:36.930
> 
> 标签：c++, memory-leaks, sequence, corba

我对 CORBA 中的序列序列有疑问。我可以用非优雅的解决方案来解决问题（至少对我来说并不优雅）。

产生内存泄漏的（不是真实的）代码如下：

```
{
   IntMatrix m;
   m.lenght(100);
   for (int i = 0; i < 100; i++)
   {
      m[i].lenght(99);
   }
   //Send 'm' matrix and exit from this scope
} 
```

（非优雅）解决方案如下：

```
{
  IntMatrix m;
  m.lenght(100);
  intSeq s;
  s.lenght(99);
  for (int i = 0; i < 100; i++)
  {
      m[i] = s;
  }
  //Send 'm' matrix and exit from this scope
} 
```

我一直在 Internet 上寻找原因，但只能找到有关名为“release”的标志的文本。

有人可以帮助我吗？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-21T13:12:06.900

我假设当您说“发送 m 矩阵”时，您是在客户端。

我认为第一段代码是正确的。如果您有内存泄漏，这可能是由于您正在使用的 ORB 实现中的错误。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-17T00:23:21.560

我假设您正在尝试从服务器实现返回一系列序列。

在这种情况下，IDL 到 C++ 的映射要求您“新建”序列：

尝试这样的事情：

```
IntMatrix_var m = new IntMatrix;
m->length(100);
for (CORBA::ULong i = 0; i < m->length(); ++i)
{
   m[i].length(99);
   for (CORBA::ULong j = 0; j < m[i].length(); ++j)
   {
      m[i][j] = someValue;
   }
}
return m._retn(); 
```

# javascript - 如何在单击超链接时调用同一函数中定义的函数

> ID：11898496
> 
> 赞同：0
> 
> 时间：2012-08-10T09:05:54.297
> 
> 标签：javascript, html

如何在单击超链接时调用同一函数中定义的函数

```
Function A()
{
    var mydiv = document.getElementById("myDiv"); 
    var aTag = document.createElement('a');  
    aTag.setAttribute('href',"yourlink.htm");   
    aTag.innerHTML = "link text"; 
    mydiv.innerHTML=""; 
    mydiv.innerHTML=aTag; 

    Function B()
    {
        // do stuff ---           
    }    
} 
```

单击超链接 aTag 我需要调用函数 B。请建议。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-10T09:07:40.880

```
aTag.onclick = function() {
  //...

}; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-10T09:24:05.783

如果你只想打电话`function B`试试这个：

```
aTag.onclick = function() {
  var a = new A();
  a.B();
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-10T09:11:26.320

你可以这样做：

```
aTag.onclick = function() {

    B();

} 
```

甚至更短：

```
aTag.onclick = B; 
```

# animation - css3动画问题字体渲染

> ID：11898499
> 
> 赞同：4
> 
> 时间：2012-08-10T09:06:13.387
> 
> 标签：animation, css, fonts, transform

我有一个问题问你。我目前正在研究文本动画，但我遇到了一些问题。当我使用 -webkit-transform 之类的属性时，我的字体在动画期间从正常变为更细，并在动画结束时恢复正常。

这是我的动画代码：

```
@-webkit-keyframes flipOne {
    0% {
        -webkit-transform: perspective(40000px) rotateY(0);
        -webkit-animation-timing-function: ease-out;
    }
    100% {
        -webkit-transform: perspective(40000px) rotateY(720deg);
        -webkit-animation-timing-function: ease-in;
    }
} 
```

这是两张图片（动画之前和动画期间）

前 ：

![在此处输入图像描述](../Images/c8c7307e02307860436e381369f68376.png)

后：

![在此处输入图像描述](../Images/ebf7c3789d09dd18efc386fad0a6f6a4.png)

字体的设置完全相同（在动画之前或期间或之后）

那是渲染设置吗？如果是的话，你们能给我一些提示吗？

提前致谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-10T09:24:10.760

这可能与 Safari 所做的字体平滑有关，即对文本应用抗锯齿。我的猜测是动画时没有应用平滑。

我认为设置以下内容将解决问题：

```
-webkit-font-smoothing: none; 
```

但这也可能是一个问题，因为它很可能会一直渲染文本像素化。我现在没有办法测试这个，对不起。

添加类似的东西

```
-webkit-font-smoothing: antialiased; 
```

对于您可能会正确应用平滑的状态。同样，这只是猜测，可能还没有基于 CSS3 的解决方案。在这种情况下，您可能不想将调整大小应用于容器元素（例如缩放）并在字体大小上使用 EM 值。制作一个响应式容器。

如果这也没有帮助，除了在这里应用一些 Javascript 之外别无他法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-09-09T08:40:59.443

我遇到了类似的问题并在此处找到评论。通过添加这个：

```
 -webkit-font-smoothing: antialiased; 
```

似乎解决了我在 Safari 中的问题（但屏幕不是视网膜）。但仔细检查后，我发现该字体似乎比其他浏览器中的字体要苗条一些。所以我把它改成了：

```
-webkit-font-smoothing: subpixel-antialiased; 
```

这完美地解决了我的问题。

在这里留下评论，以防有人遇到同样的问题。

# visual-studio-2010 - WiX 设置：添加对 Visual Studio 项目输出问题的引用

> ID：11898507
> 
> 赞同：14
> 
> 时间：2012-08-10T09:06:55.197
> 
> 标签：visual-studio-2010, wix, wix3.6

我正在尝试学习 WiX，现在使用 Visual Studio 的 WiX 设置项目模板创建示例设置项目。

我有一个包含三个项目的解决方案：

*   .net 类库；
*   .net 应用程序，它使用类库；
*   WiX 设置项目。

当然，我想将前两个项目的输出作为组件添加到 WiX 设置中。

如[here](http://wix.sourceforge.net/manual-wix3/authoring_first_votive_project.htm)和[here](http://wix.tramontana.co.hu/tutorial/com-expression-syntax-miscellanea/components-of-a-different-color)所述（据我所知），在WiX项目中添加引用并将其`Harvest`属性设置为`True`自动添加项目输出的组件。

现在，我想在一些`Feature`描述中引用这个组件。

问题：

*   我应该用`Id`什么`ComponentRef`？
*   这是引用 VS 项目输出的正确方法吗？

我正在使用 VS 2010 和 WiX 3.6 RC。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-08-10T11:21:26.793

目前 Harvesting 引用的项目输出在 Wix3.6 中不起作用，将[在 Wix4.0 中添加](https://github.com/wixtoolset/issues/issues/2639)

现在，您必须自己手动将二进制输出添加到您的项目中（无论如何我个人更喜欢）。对于下面的示例，组件将与其子文件元素（dotNetClass.Output 和 dotNetApp.Output）命名相同。

```
<Component>
    <File Id="dotNetClass.Output"
          Name="$(var.dotNetClass.TargetFileName)"
          Source="$(var.dotNetClass.TargetPath)"
          KeyPath="yes" />
</Component>

<Component>
    <File Id="dotNetApp.Output"
          Name="$(var.dotNetApp.TargetFileName)"
          Source="$(var.dotNetApp.TargetPath)"
          KeyPath="yes" />
</Component> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-09-19T07:52:04.840

作为替代方案，您可以使用[HarvestProject](http://wixtoolset.org/documentation/manual/v3/msbuild/target_reference/harvestprojects.html)、[HeatDirectory](http://wixtoolset.org/documentation/manual/v3/msbuild/task_reference/heatdirectory.html)和[HarvestDirectory](http://wixtoolset.org/documentation/manual/v3/msbuild/target_reference/harvestdirectory.html) MsBuild 任务：

这些需要嵌入到您的 *.wixproj 文件中，或者您可以创建一个单独的 MSBuild 兼容 proj 文件。

# android - 显示 SD 卡中所有文件夹和子文件夹中的 mp3 文件

> ID：11898510
> 
> 赞同：0
> 
> 时间：2012-08-10T09:07:07.713
> 
> 标签：android

我正在尝试为我的闹钟应用程序设置铃声。为此，我需要显示 SD 卡中各种文件夹和子文件夹中存在的所有扩展名为 .mp3 的歌曲。

我只想显示 .mp3 文件，而不是任何文件夹/子文件夹。我已经有一个编码，其中歌曲从 SD 卡显示，而不是从子文件夹中显示。给出的所有编码仅从我不需要的特定文件夹中检索歌曲。我需要 SD 卡中存在的每一首 mp3 歌曲。

```
public class Mp3filterActivity extends Activity{
    final String MEDIA_PATH = new String("/sdcard/");

    public void onCreate(Bundle savedInstanceState){
         super.onCreate(savedInstanceState);
         setContentView(R.layout.main);
         ListView listsong =(ListView)findViewById(R.id.songlist);

        ArrayList<String> mp3list = new ArrayList<String>();
        mp3list=mp3select();
        Toast.makeText(this, "mp3files" +mp3list, Toast.LENGTH_LONG).show();

       ArrayAdapter<String> listAdapter=new ArrayAdapter<String>(Mp3filterActivity.this,android.R.layout.simple_list_item_1,mp3list);
        listsong.setAdapter(listAdapter);

    }

    public ArrayList<String> mp3select(){
        File home = new File(MEDIA_PATH);
        ArrayList<String> list = new ArrayList<String>();
        //if (home.isDirectory())

        if (home.listFiles(new FileExtensionFilter()).length > 0) 
        {
            for (File file : home.listFiles(new FileExtensionFilter())) 
            {
                   list.add(file.getName().substring(0, (file.getName().length() - 4)));        
                }
        }
        return list;
    }

    class FileExtensionFilter implements FilenameFilter 
    {
        public boolean accept(File dir, String name) {
            return (name.endsWith(".mp3") ||name.endsWith(".MP3"));
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-10T09:29:22.417

首先，不要硬编码`/sdcard/`，因为 SD 卡可能未安装在该目录下。请改用[`Environment.getExternalStorageDirectory()`- 方法](http://developer.android.com/reference/android/os/Environment.html#getExternalStorageDirectory%28%29)。另外，请先检查是否有 SD 卡。

* * *

您无需遍历所有这些文件夹即可获取设备上的每个音频文件（外部*和*内部）。Android 公开了以下[`MediaStore`](http://developer.android.com/reference/android/provider/MediaStore.html)内容：

> [...] 包含内部和外部存储设备上所有可用媒体的元数据。

它有一个[`MediaStore.Audio`](http://developer.android.com/reference/android/provider/MediaStore.Audio.html)用于所有音频特定操作的子类。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-10T09:37:18.937

您必须递归地遍历每个文件夹才能实现这一目标。

示例代码如下所示：

```
getMp3s(Arraylist<File> list, File dir){
    File[] files = dir.listFiles();
    for(File file : files){
        if(file.isDirectory()){
            getMp3s(list, file);
        }else{
            //add mp3s to list here
        }
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-10T10:02:15.330

`MediaStore`比扫描 sdcard 更好，因此您可以获得、、、`Albums`等`Artist`，`Path`尽力而为:)

# php - Symfony 1.4 会话与 $_SESSION 问题

> ID：11898511
> 
> 赞同：1
> 
> 时间：2012-08-10T09:07:14.307
> 
> 标签：php, symfony1, symfony-1.4

当我进行开发安装（**Ubuntu 12.04 Firefox**）时，我有一个奇怪的行为。我在 Component Class(..Components.class.php) 中将值存储到我的 Session 中：`$this->getUser()->setAttribute("ns1", myarray(), "globalNameSpace");`

当调用此控制器时，我看到设置了用户会话的调试模式，但未设置全局会话（$_SESSION），然后我无法访问会话，例如使用`$sf_user->getAttribute(...)`. 我应该重新加载整个页面以查看 Globals Session($_SESSION) 更改发生然后`$sf_user->getAttribute(...)`工作。我应该提一下，我在 linux(ubuntu) 下使用了最后一个 Firefox 和 Chrome……我也将两者都用于匿名选项卡……但问题仍然存在。

这是 factory.yml 的设置问题还是只是一个 symfony 错误？

**编辑：**通过ajax调用控制器......也许这也是一个问题......

**Edit2：**我无法设置用户会话。在我的 factory.yml 中，我没有设置会话。所以进入 Dev 我总是无法设置会话值！我认为我的所有会话都受到保护。

# gfortran - 一个循环根本不起作用，为什么？

> ID：11898517
> 
> 赞同：1
> 
> 时间：2012-08-10T09:07:19.823
> 
> 标签：gfortran

我想问是否有人知道为什么我用 Fortran 编写的这个程序的第一个循环根本不起作用。因为`do r = 0, 5, 0.1`只有第一个数字`r`是 read `r=0`。我能做些什么来使它成为可能？

```
implicit none

real , allocatable ::x(:)
real , allocatable ::y(:)
real , allocatable ::h(:)
integer i , n , a , j , d  
real hp1 , s , c , r      
real , allocatable ::T1(:)

open (10,file='point.txt', status='old')
open (6,file='pointr2.txt',status='new') 

read (10,*) n

allocate (x(n))
allocate (y(n))
allocate (h(n)) 
allocate (T1(n))

s=0
d=0
c=0

do r=0.0000 , 5.0000 , 0.1
  do j= 1, n
    if ( j.gt.1 ) goto 39
    do i=1,n
      read (10,*)  x(i), y(i), h(i)
      write (6,*) x(i), y(i), h(i)
    end do

    close (10)
    call highest ( h,n,hp1,a )
    write (6,*) hp1 
    write (6,*) ' The First highest point number' , a  
    write (6,*)  x(a)

    39 if ( j.eq. a ) goto 100

    s=abs((h(j)-h(a))/(x(j)-x(a)))
    d=((x(j)-x(a))**2+(y(j)-y(a))**2+(h(j)-h(a))**2)**0.5
    c=((x(j)-x(a))**2+(y(j)-y(a))**2)
    T1(j)=atan((y(a)-y(j))/(x(a)-x(j)))

    if ( c .eq.r**2 .and. d .ge. 0.0025 .and.s.ge.0.and.s .le. 0.04) then
      T1(j)=  atan((y(a)-y(j))/(x(a)-x(j)))
      write (6,*) 'Group 1' , j  ,T1(j) 
    end if                               
    write (6,*) s, c ,T1(j)  
    100 end do 
  end    
do
end

subroutine highest ( h,n,hp1,a )
  implicit none

  integer i , n ,a 
  real hp1  
  real h(n)  
  hp1=h(1)
  a= 1

  do i=1,n
    if ( h(i) .gt.hp1  ) then
      hp1=h(i) 
      a = i  
    end if 
  end do 
end subroutine 
```

我的输入是：

```
6
0.01     0.02        0.03
0.13     0.14        0.1504
0.04     0.05        0.06
0.07     0.08        0.15  
0.10     0.11        0.12
0.15     0.042020410 0.15 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-13T11:19:31.523

您将在内循环的第一次迭代中关闭单元 10，并且不再打开它：

```
close (10)   <------ HERE
call highest ( h,n,hp1,a )
write (6,*) hp1 
```

因此，在外`do`循环的第二次迭代中，程序试图从一个封闭单元中读取。在大多数编译器中，这会导致`OPEN`在一个名为`fort.10`该文件的文件上发出一个隐式语句，该文件肯定不存在。`gfortran`创建长度为零的此类文件，因此在尝试从中读取时会立即触发 EOF，并且您的程序会失败。

为了防止这种情况，您应该将读取和填充的代码移到`point.txt`循环`x(i)`之外。`y(i)``h(i)`

另请注意，Fortran 95 引入了 DO 循环控制中的所有内容都应为标量`INTEGER`类型的要求，即`do r=0.0000 , 5.0000 , 0.1`F95 及更高版本不允许。如果您提供选项开关`gfortran`，则不会编译您的程序：`-std=f95`

```
do r=0.0000 , 5.0000 , 0.1
   1
Error: Deleted feature: Loop variable at (1) must be integer 
```

# groovy - 带有 Groovy 的 DSL -> 传递参数值

> ID：11898523
> 
> 赞同：5
> 
> 时间：2012-08-10T09:07:35.777
> 
> 标签：groovy, dsl

我是 Groovy 的新手，我正在尝试为某些特定任务编写一个迷你 DSL。为此，我一直在尝试解决如下问题：我想通过调用此代码（不使用括号）打印（和/或返回）5：

```
give me 5 
```

我希望下面这样的定义会起作用：

```
def give = {clos ->  return clos} 
def me = {clos ->  println clos; return clos} 
```

但实际上并没有。您能否帮助我如何定义“give”和“me”以便使用表达式“give me 5”返回值 5，其中*me*必须是一个闭包，*give*也可以是元类、属性等。

提前致谢！Ⅳ

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-10T09:20:17.373

Groovy 1.8+ 需要

```
give me 5 
```

并且解析器有效地尝试做：

```
give( me ).5 
```

因此，如果您这样编写代码，它可以工作：

```
def give = { map ->  map } 
def me = [:].withDefault { it }

a = give me 5

println a 
```

印刷：

```
5 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-10T09:16:17.770

您的关闭是正确的。大括号不见了。试试这个

```
give(me(5)) or 
give me(5) 
```

否则，如果您完全需要消除大括号，请将这些部分分配给一个变量，以便让解析器了解确切需要传递的内容。

```
five = me 5
give five 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-08-10T12:54:20.483

你的方法是什么意思？您已经编写了一个语法要求：

```
give me 5 
```

如果*我*可以是*你*，你需要：

```
give("me", 5)
give "me", 5 //equivalent "DSL" notation
give("you", 7)
give "you", 7 //equivalent "DSL" notation

//or...
def me= "Mickey", you= "Donald"
give(me, 5)
give me, 5 //equivalent "DSL" notation
give(you, 7)
give you, 7 //equivalent "DSL" notation 
```

如果*me*从未改变，则语义最接近：

```
giveMe(5)
giveMe 5 //equivalent "DSL" notation 
```

你已经写了“*我*必须是一个闭包”和“我希望我的规则在没有括号的情况下工作”，从句法约束开始。始终从语义要求开始:-)

# sharepoint - Sharepoint 基于另一列的一列查找

> ID：11898524
> 
> 赞同：0
> 
> 时间：2012-08-10T09:07:38.913
> 
> 标签：sharepoint

在 Sharepoint 列表中，我们可以进行如下配置。

1）一个查找列来选择一个国家。2）一个查找列来选择一个状态。这个 coulmns dorpdown 应该只显示属于所选国家的州。

我已经有两个列表（一个存储所有国家的名称，另一个存储州和相应国家的名称）这些列表用于配置上述两个查找字段。

目前，country coulnm 的下拉列表显示所有 196 个国家名称，而 state 下拉列表列出了所有 3800 多个州名称。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-10T11:22:49.923

您正在寻找`cascading drop down`SharePoint 不提供开箱即用的功能。

我建议查看可用的选项并选择一个。还有其他选项，但 codeplex.com 上有几个可能满足您的需求（[https://www.google.com/search?q=sharepoint+cascading+drop+down+site:codeplex.com](https://www.google.com/search?q=sharepoint%20cascading%20drop%20down%20site%3acodeplex.com)）

如果这些不能满足您的需求并且您不想购买商业产品，那么您将不得不自己构建。如果您有创建自定义字段的经验，这应该不难。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-10T14:28:22.317

这可能正是您正在寻找的 [SP Services Cascade Dropdowns](http://spservices.codeplex.com/wikipage?title=%24%28%29.SPServices.SPCascadeDropdowns&referringTitle=Documentation)

# ruby - Marshal（Ruby）管道：将序列化对象发送到子进程

> ID：11898528
> 
> 赞同：1
> 
> 时间：2012-08-10T09:07:49.257
> 
> 标签：ruby, marshalling, pipe

我需要用 Marshal 序列化 Ruby 中的对象，并通过管道将其发送到子进程。我怎样才能做到这一点？

我的代码如下所示，我的问题在评论中：

```
data = Marshal.dump(data)
#call sub-process
`ruby -r a_lib -e 'a_method'` #### how to send the stdout to the subprocess? 
```

a_method 看起来像：

```
def a_method
  ...
  data = Marshal.load(data) #### how to load the stdout of the parent process?
  ...
end 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-06T19:32:26.313

是的，您可以通过管道在不同的 ruby​​/非 ruby​​ 进程之间发送序列化对象！

让我告诉你我是怎么做的。

在这个例子中，一个主进程启动一个子进程，然后子进程使用 Marshal 序列化传输一个简单的 Hash 对象。

## 大师源代码：

首先，在 Process 类中声明一些帮助方法**run_ruby**会很有用：

```
#encoding: UTF-8
require 'rbconfig'
module Process
  RUBY = RbConfig::CONFIG.values_at('bindir', 'BASERUBY').join('/')
# @param [String] command
# @param [Hash] options
  def Process.run_ruby(command, options)
    spawn("#{Process::RUBY} -- #{command}", options)
  end
end 
```

此代码只是定位 ruby​​ 可执行文件并将完整路径保存到 RUBY 常量中。

> **重要提示**：如果您打算使用**Jruby**或其他一些可执行文件 - 您应该重写此代码并提供执行它的路径！

接下来，我们应该启动子进程。
此时我们可以为新进程覆盖**STDIN**、**STDOUT**和**STDERR**。
让我们创建一个**管道**并将孩子的**STDOUT**重定向到这个管道：

```
 rd, wr = IO.pipe
  Process.run_ruby("./test/pipetest.rb param1 param2", {:out => wr})
  wr.close 
```

请注意选项哈希：**{:out => wr}** - 它告诉 spawn 命令将**STDOUT**重定向到**wr**流描述符。

此外，您可以在命令行中指定参数（请参阅**param1**和**param2 ）。**

请注意，我们调用**wr.close**是因为我们没有在此示例的父进程中使用它。

主人将如何接收对象：

```
message = rd.gets         # read message header with size in bytes
cb = message[5..-1].to_i  # message is in form: "data <byte_size>\n"
data = rd.read(cb)        # read message with binary object
puts "Parent read #{data.length} from #{cb} bytes:"
obj = Marshal::load(data) # unserialize object
puts obj.inspect 
```

## 子源代码：

现在，序列化的对象将如何传输？
首先，孩子将序列化对象，
然后它将以以下形式发送父消息：`"data <byte_size>\n"`
之后它将发送序列化的对象本身。由于我们已指定将此通道用作管道，因此
子进程将向**STDOUT发送对象。**

```
#encoding: UTF-8

# obj is an example Hash object to be transmitted
obj = {
    1 => 'asd',
    'data' => 255,
    0 => 0.55
}

data = Marshal::dump(obj)             # serializing object (obj)
$stdout.puts "data #{data.length}"    # sending message header
$stdout.write data                    # sending message itself
$stdout.flush                         # Important: flush data! 
```

在上面的代码中，子进程简单地输出一个序列化对象并终止。
但是，当然，您可以编写更复杂的行为。
例如，我启动了许多子进程，每个子进程都与**STDOUT**的父进程共享**一个相同的管道**。为了避免两个孩子同时写入管道的问题，我必须使用**系统级互斥锁**（不是 Ruby 互斥锁）来控制对该管道的访问。

 ***** * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-10T11:10:28.863

你可以使用[`IO::pipe`](http://www.ruby-doc.org/core-1.9.3/IO.html#method-c-pipe)方法。

我认为您选择的不是创建子进程的最佳方式。Backticks 在幕后也是如此`fork`，而在幕后也是如此。这意味着您的命令：`exec``ruby``fork``exec`

```
`ruby -r a_lib -e 'a_method'` 
```

执行以下操作：fork 当前进程，将其转换为 shell 进程，fork shell 进程，将其转换为 ruby​​ 进程。

我建议使用`fork`方法：

```
data = Marshal.dump(data)

reader, writer = IO.pipe
reader.close # parent process will be on the writing side of the pipe
writer.puts data

#call sub-process
fork do
  writer.close # child process can only read from the pipe
  data = reader.gets
  # whatever needs to be done with data
end 
```****

# android - 地图未在 Android 设备中显示

> ID：11898529
> 
> 赞同：0
> 
> 时间：2012-08-10T09:07:49.273
> 
> 标签：android, google-maps

在我的应用程序中，我使用了谷歌地图功能。为此，我使用了自己的密钥库并创建了 MD5 指纹。后来我从谷歌获得了基于 MD5 的 xml。

问题：

它在模拟器中工作。但在真实设备中没有显示任何内容。但是网格是可见的。

样本--类

```
public class First extends MapActivity {
private MapController mc;
private MapView mapView;

private static double current_lat;
private static double current_long;
@Override
public void onCreate(Bundle savedInstanceState) {
super.onCreate(savedInstanceState);
setContentView(R.layout.main);
mapView = (MapView) findViewById(R.id.mapview);
mc = mapView.getController();
LocationManager mlocManager = (LocationManager)   getSystemService(Context.LOCATION_SERVICE);
mlocManager.requestLocationUpdates(LocationManager.GPS_PROVIDER, 0, 0, mNetworkListener);

GeoPoint p = new GeoPoint((int)current_lat*(1000000), (int)current_long*(1000000));            
mc.animateTo(p);  

}
private static LocationListener mNetworkListener = new LocationListener() 
{
public void onLocationChanged(Location location) {
makeUseOfNewLocation(location);
}

    public void onProviderDisabled(String provider) {
        // TODO Auto-generated method stub

    }

    public void onProviderEnabled(String provider) {
        // TODO Auto-generated method stub

    }

    public void onStatusChanged(String provider, int status, Bundle extras) {}
         public void makeUseOfNewLocation(Location location) {
             current_lat = location.getLatitude();
             current_long = location.getLongitude();
             System.out.println("*** i'm here"+current_lat);

    }

};
@Override
protected boolean isRouteDisplayed() {
    // TODO Auto-generated method stub
    return false;
} 
```

安卓清单

```
<uses-permission android:name="android.permission.INTERNET"/>
<uses-permission android:name="android.permission.ACCESS_FINE_LOCATION"/>
<uses-permission android:name="android.permission.ACCESS_COARSE_LOCATION"/>

<application
  android:icon="@drawable/ic_launcher"
  android:label="@string/app_name" >

   <activity
     android:name=".First"
     android:label="@string/app_name" >
     <intent-filter>
      <action android:name="android.intent.action.MAIN" />

            <category android:name="android.intent.category.LAUNCHER" />
        </intent-filter>
    </activity>
     <uses-library android:name="com.google.android.maps" />
</application> 
```

主要的

```
 <?xml version="1.0" encoding="utf-8"?>
 <LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
  android:layout_width="fill_parent"
  android:layout_height="fill_parent"
  android:orientation="vertical" >

<com.google.android.maps.MapView
 android:id="@+id/mapview"
 android:layout_width="fill_parent"
 android:layout_height="fill_parent"
 android:apiKey="0wINx0c2YuEd3mkyPwidZyeoz_HiyN3jrts-Q" />

</LinearLayout> 
```

日志猫

```
 08-10 14:27:56.841: W/MapActivity(20815): Recycling dispatcher       android_maps_conflict_avoidance.com.google.googlenav.datarequest.DataRequestDispatcher@405b  9458
 08-10 14:27:56.851: V/MapActivity(20815): Recycling map object.
 08-10 14:27:56.901: I/MapActivity(20815): Handling network change   notification:CONNECTED
 08-10 14:27:56.901: E/MapActivity(20815): Couldn't get connection factory client 
```

任何人都可以弄清楚为什么地图没有显示在设备中。提前谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-10T10:29:28.757

用此替换您的 mapview xml 代码，然后重试。

```
<com.google.android.maps.MapView
    xmlns:android="http://schemas.android.com/apk/res/android"
    android:id="@+id/mapview"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:clickable="true"
    android:apiKey="Your API Key"
/> 
```

还要确保您的设备可以访问 Internet。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-13T04:57:59.097

实际上，我发现的问题是 Mapview 仅在从 android 市场下载应用程序时才会显示，因为我们使用的是签名的 api 密钥。

我认为这就是为什么，它在运行 Eclipse 时没有显示。

# mysql - 是否可以在 MySQL 中的一列上基于 select 插入？

> ID：11898532
> 
> 赞同：9
> 
> 时间：2012-08-10T09:07:56.160
> 
> 标签：mysql, sql

是否基于 MySQL 中可能的列之一上的选择进行插入

```
INSERT INTO student_fees(id, name, fees) 
VALUES(1, SELECT name from students where student_id = 1, 200$) 
```

如果是，那么示例将真正有帮助。

-谢谢

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-08-10T09:10:04.003

尝试`INSERT...SELECT`声明

```
INSERT INTO student_fees(id, name, fees) 
SELECT ... -- put here the SELECT STATEMENT with condition 
```

如果您的列`ID`是`auto incremented`，则不必指定 ，`1`否则会导致错误。

```
INSERT INTO student_fees(name, fees) 
SELECT `name`, '200$' 
FROM students         -- this will select all students on the table
                      -- and add $200 on thier fees. 
```

另一点是，如果你只想从`student`'s 表中插入一列，你需要指定条件，这样你就不会得到约束错误（*假设你的列 ID 是主键*）

```
INSERT INTO student_fees(name, fees) 
SELECT `name`, '200$' 
FROM   students
WHERE  columnName = 'blahBlah' 
```

**更新 1**

看到你的评论，你有这个查询

```
INSERT INTO coupon_allotment (page_id, offer_id, coupon_code, user_id) 
SELECT page_id, 4, 'ABC'        -- number of columns mismatch, right?
FROM pages_discounts_association 
WHERE discount_id = 4 
```

you need **to remove** the `user_id` column above OR you need **to add** an `ID` in your select statement in order to match the number of columns.

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-10T09:09:39.327

只需使用常规`INSERT INTO ... SELECT`语法并选择其他字段作为常量，如下所示：

```
INSERT INTO student_fees(id, name, fees) 
SELECT 1, `name`, '200$' FROM students 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-10T09:09:41.433

试试这个：

```
INSERT INTO student_fees(id, name, fees) 
Select 1, name,'200$' from students 
```

# nservicebus - EDA：“级联”事件还是显式命令？

> ID：11898533
> 
> 赞同：0
> 
> 时间：2012-08-10T09:07:57.787
> 
> 标签：nservicebus, cqrs, event-sourcing, event-driven-design, eda

## 设想

假设我有一个系统的三个主要组件：

1.  **UI** - 收集来自用户的输入并创建通过消息总线发送的*LoginUserCommand 。*然后，用户界面侦听此消息总线以获取*MessageReceivedEvent(s)*。

2.  **用户服务**- 接收*LoginUserCommand*并引发*UserLoggedInEvent*。这里的关键部分是**消息服务**需要被告知开始接收消息。

3.  **消息服务**-为登录用户引发*MessageReceivedEvent(s) 。*

## 选项

我的设计问题是关于**User Service**和**Message Service**之间的交互。

当用户登录时，需要发生许多事情——服务需要协调，以便 UI 开始接收消息。

我是不是该...

*   **用户服务***是否*引发了UserLoggedInEvent并让**消息服务**监听此事件并执行用户接收消息所需的工作？

...或者...

*   **用户服务***是否*引发了一个UserLoggedInEvent但然后创建一个命令 - *StartMessageReceivingCommand*并将其显式发送到**消息服务**？

## 问题

每种方法的优点/缺点是什么？（级联事件与显式命令）。还有其他选择吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-10T09:23:26.780

如果您的服务是真正的服务，只需引发 userloggedinevent 并让“消息服务”决定下一步该做什么。如果用户登录，用户服务应该不知道需要开始接收消息的消息服务。只需引发事件并让每个订阅者自己决定下一步做什么。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-12T08:34:03.497

这对我来说没有多大意义。UI 本身不是一个逻辑服务。

**消息服务**`MessageReceivedEvent`发布的消息是否足够公开，以至于任何 UI 都可以订阅该提要？如果没有，那么也许这些消息根本不应该发布。

 **如果除非用户登录，否则不允许用户处理`MessageReceivedEvent`s，则**用户/安全服务**有责任确保不会发生这种情况。

如果`MessageReceivedEvent`s 确实需要发布，那为什么不在**UI**进程中运行**用户服务呢？**

 **1.  **UI进程订阅（向****消息服务**发送订阅请求）到`MessageReceivedEvent`
2.  **UI**发送一个到**用户服务**`LoginUserCommand`的远程端点并在本地处理**`UserLoggedInReply`**
***   **UI**进程 `MessageReceivedEvent`中有两个处理程序 ***   第一个处理程序属于**用户服务**，如果用户未登录，则调用 bus.DoNotContinueDispatchingCurrentMessageToHandlers()
    *   第二个处理程序属于其他一些实际上对`MessageReceivedEvent`s有用的服务**** 

 ****在步骤 3 中，当用户登录时，第一个处理程序是空操作。如果用户没有登录，第一个处理程序将完全停止其他`MessageReceivedEvent`处理程序的运行。

这里有更多关于指定消息顺序的[信息](https://stackoverflow.com/questions/4096841/nservicebus-specifying-message-order)

希望这可以帮助********

# mfc - MFC 按钮工具提示在按钮单击后不显示

> ID：11898536
> 
> 赞同：1
> 
> 时间：2012-08-10T09:08:13.017
> 
> 标签：mfc, windows-xp, tooltip, windows-messages

我正在使用 MFC CToolTipCtrl 为按钮创建工具提示。现在我在 Windows XP 中运行应用程序时遇到问题。当我将鼠标放在按钮上时，会弹出工具提示，但单击按钮后没有显示工具提示。在 windows 7 中没有这样的问题。我使用以下代码创建工具提示

```
pToolTip->Create(this);

TOOLINFO ToolInfo;
ToolInfo.cbSize     = sizeof(TOOLINFO);
ToolInfo.lpszText   = const_cast<LPTSTR>(szToolTipText);
ToolInfo.hinst      = AfxGetInstanceHandle();
ToolInfo.hwnd       = pButton->m_hWnd;
ToolInfo.uFlags     = TTF_SUBCLASS | TTF_IDISHWND;
ToolInfo.uId        = (UINT)pButton->m_hWnd;

pToolTip->SendMessage(TTM_ADDTOOL, 0, (LPARAM) &ToolInfo); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-25T06:55:57.397

`preTanslateMessage`尝试在函数中调用relayevent 。

来自 MSDN： http: [//msdn.microsoft.com/en-US/library/x61cthdf (v=vs.80).aspx](http://msdn.microsoft.com/en-US/library/x61cthdf(v=vs.80).aspx)

为了通知工具提示控件重要消息，例如 WM_LBUTTONXXX 消息，您必须将消息中继到您的工具提示控件。此中继的最佳方法是在所有者窗口的 PreTranslateMessage 函数中调用 CToolTipCtrl::RelayEvent。

以下示例说明了一种可能的方法（假设工具提示控件称为 m_ToolTip）：

```
if(pMsg->message== WM_LBUTTONDOWN ||
        pMsg->message== WM_LBUTTONUP ||
        pMsg->message== WM_MOUSEMOVE)
m_ToolTip.RelayEvent(pMsg);

return CMyView::PreTranslateMessage(pMsg); 
```

如果你使用上面的VS2010，你可以只使用CMFCButton，它有一个设置工具提示的方法，让生活更轻松。

# firefox - selenium webdriver 在 VMware 上运行 firefox

> ID：11898538
> 
> 赞同：0
> 
> 时间：2012-08-10T09:08:15.237
> 
> 标签：firefox, selenium, nunit, webdriver, selenium-firefoxdriver

我设置了一个虚拟机，我想用它来运行我的日常测试。

但它无法启动 FirefoxDriver。

一开始，我以为是我的代码问题。

但它可以在我的物理机上运行 Firefox 测试。如果我把它改成IE驱动程序，程序就可以在虚拟机中运行了。

火狐版本是10。

我认为这不是版本问题，因为我可以使用相同的版本在物理机上运行测试。

# git - 如何在 NetBeans 中将特定的文件行暂存到 git？

> ID：11898542
> 
> 赞同：5
> 
> 时间：2012-08-10T09:08:24.217
> 
> 标签：git, netbeans, netbeans-7, netbeans-plugins

我对使用 NetBeans 很陌生，今天我遇到了一个问题。我曾经只暂存部分文件以进行更好的提交。

我使用过 vim 和 fugitive 插件，我可以将特定的行从 unstaged 移动到 staged。

我可以通过调用*git add -p*来解决问题，但最好直接从 NetBeans IDE 中执行此操作。

有没有一种神秘的方法可以通过单击某处和舞台特定的线来简单地做到这一点？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-10T09:20:43.530

使用`git add -p`不是一种解决方法，而是一种**方法**。

如果您需要它更舒适，请`git gui`作为[外部工具](http://wiki.netbeans.org/ExternalTools)从 NetBeans 中启动，并使用它来手动暂存线路。

无论您是否以某种方式使其工作：这**正是**我提倡使用**一种工具完成一项任务**而不是试图将所有东西都放在一个中的原因。

在[netbeans 是否忽略了我的 git pre-commit 钩子？](https://stackoverflow.com/questions/11362883/does-netbeans-ignore-my-git-pre-commit-hook)，我讨论过 NetBeans 的 Git 实现远未完成。`git add -p`似乎没有包含在[NetBeans Git 集成计划](http://netbeans.org/projects/versioncontrol/pages/Git_plan)中。

NetBeans 正在使用`jgit`. `jgit`不提供暂存部分文件的方法，只有[`AddCommand`](http://wiki.eclipse.org/JGit/User_Guide#AddCommand_.28git-add.29)提供`addFilepattern()`. 所以你的问题的答案是**否定**的，它不会起作用。

# .net - Visual Studio - 构建了哪些引用？

> ID：11898545
> 
> 赞同：0
> 
> 时间：2012-08-10T09:08:38.570
> 
> 标签：.net, visual-studio-2010

是否有查询解决方案或项目的方法来查询构建中实际使用了哪些 dll 引用？

我知道我可以进入并在“添加参考”对话框中查看项目的参考。我知道我可以查看 BIN 文件夹。但是，不删除引用并尝试构建或删除 dll；是否有一种基于 Using 指令或类似方法在解决方案或项目中进行查询的方法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-10T09:21:42.170

VS2010 或更早版本没有内置任何东西来为 C# 执行此清理操作。您可以在 ILSpy（免费工具）或 Resharper（不记得它是否免费）中打开已编译的程序集并检查参考。如果它们没有出现在 ILSpy 中，您可以安全地从项目中删除它们。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-10T09:25:25.643

对于每个参考，您都可以通过 Resharper 找到依赖于该程序集的代码。因此，如果没有代码依赖于引用，您可以将其从项目引用中删除。

虽然有些参考资料你没有直接在你的代码中使用（记录器库 Elmah 就是一个很好的例子），但它们仍然对你有用，你需要它们。此类引用必须经过双重检查。

# android - SharedPreferences Android中的空指针异常

> ID：11898548
> 
> 赞同：1
> 
> 时间：2012-08-10T09:08:46.760
> 
> 标签：android, nullpointerexception, sharedpreferences

这是我的 SharedPreference 类：

```
public class MySharedPrefs {
private static final String APP_SHARED_PREFS = "com.astroved.Horawatch";
private SharedPreferences appSharedPrefs;
private Editor prefsEditor;

public MySharedPrefs(Context context)
{
    this.appSharedPrefs = context.getSharedPreferences(APP_SHARED_PREFS, Activity.MODE_PRIVATE);
    this.prefsEditor = appSharedPrefs.edit();
}

public String getPrefsValue(String value) {
    return appSharedPrefs.getString(value, "");
}

public void savePrefsValue(String key , String Value) {
    prefsEditor.putString(key, Value);
    prefsEditor.commit();
}

public Boolean checkKey(String Key)
{
    if(appSharedPrefs.contains(Key))
        return true;    
    else
        return false;
} 
```

}

我的功能类：

```
public class Functions_class extends Activity{

AstroVedTime tz,lat,lon;
TimeZone tz1;
protected MySharedPrefs appPrefs;

public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);{
        appPrefs = new MySharedPrefs(Functions_class.this);
    }
    }

public void user_informations(int myear,int mMonth, int mDay){

    int year = myear,month = mMonth+1,day = mDay;
    Moment mn = new Moment(year,month,day,user_device_time());
    //appPrefs = new MySharedPrefs(Functions_class.this);

    if(appPrefs.checkKey("City_name1")){
        TimeZone.setDefault(TimeZone.getTimeZone(appPrefs.getPrefsValue("selected_time_zone")));
        Log.v("LOG_TAG"+"here the error is : ", appPrefs.getPrefsValue("selected_lat")+"");
        Log.v("LOG_TAG", appPrefs.getPrefsValue("selected_longi")+"");
        tz1 = TimeZone.getDefault();
        lat = new AstroVedTime(Double.parseDouble(appPrefs.getPrefsValue("selected_lat")));// Latitude
        lon = new AstroVedTime(Double.parseDouble(appPrefs.getPrefsValue("selected_longi")));// Longitude
    } 
```

这是我的`logcat`：

```
 08-10 14:07:14.947: E/AndroidRuntime(475): FATAL EXCEPTION: Thread-13
08-10 14:07:14.947: E/AndroidRuntime(475): java.lang.NullPointerException
08-10 14:07:14.947: E/AndroidRuntime(475):  at com.astroved.horawatch.Functions_class.user_informations(Functions_class.java:46)
08-10 14:07:14.947: E/AndroidRuntime(475):  at com.astroved.horawatch.HoraWatchActivity$13$1.run(HoraWatchActivity.java:1106)
08-10 14:07:16.628: E/WindowManager(475): Activity com.astroved.horawatch.HoraWatchActivity has leaked window com.android.internal.policy.impl.PhoneWindow$DecorView@407f1950 that was originally added here
08-10 14:07:16.628: E/WindowManager(475): android.view.WindowLeaked: Activity com.astroved.horawatch.HoraWatchActivity has leaked window com.android.internal.policy.impl.PhoneWindow$DecorView@407f1950 that was originally added here
08-10 14:07:16.628: E/WindowManager(475):   at android.view.ViewRoot.<init>(ViewRoot.java:258)
08-10 14:07:16.628: E/WindowManager(475):   at android.view.WindowManagerImpl.addView(WindowManagerImpl.java:148)
08-10 14:07:16.628: E/WindowManager(475):   at android.view.WindowManagerImpl.addView(WindowManagerImpl.java:91)
08-10 14:07:16.628: E/WindowManager(475):   at android.view.Window$LocalWindowManager.addView(Window.java:424)
08-10 14:07:16.628: E/WindowManager(475):   at android.app.Dialog.show(Dialog.java:241)
08-10 14:07:16.628: E/WindowManager(475):   at com.astroved.horawatch.HoraWatchActivity$13.onClick(HoraWatchActivity.java:1103)
08-10 14:07:16.628: E/WindowManager(475):   at android.view.View.performClick(View.java:2485)
08-10 14:07:16.628: E/WindowManager(475):   at android.view.View$PerformClick.run(View.java:9080)
08-10 14:07:16.628: E/WindowManager(475):   at android.os.Handler.handleCallback(Handler.java:587)
08-10 14:07:16.628: E/WindowManager(475):   at android.os.Handler.dispatchMessage(Handler.java:92)
08-10 14:07:16.628: E/WindowManager(475):   at android.os.Looper.loop(Looper.java:123)
08-10 14:07:16.628: E/WindowManager(475):   at android.app.ActivityThread.main(ActivityThread.java:3683)
08-10 14:07:16.628: E/WindowManager(475):   at java.lang.reflect.Method.invokeNative(Native Method)
08-10 14:07:16.628: E/WindowManager(475):   at java.lang.reflect.Method.invoke(Method.java:507)
08-10 14:07:16.628: E/WindowManager(475):   at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:839)
08-10 14:07:16.628: E/WindowManager(475):   at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:597)
08-10 14:07:16.628: E/WindowManager(475):   at dalvik.system.NativeStart.main(Native Method) 
```

我收到上述错误。我在调用这些`SharedPreference`值时犯了一些错误。我无法弄清楚。以前我收到此错误

```
at android.content.contextwrapper.getsharedpreferences contextwrapper.java 146 
```

`SharedPreferences`我通过调用清除了上述错误`OnCreate`。如何清除`Logcat`上面显示的错误。我错在哪里？

我在另一个活动的 onclick 期间调用 MyFunctionClass 中的方法。如下所示

HoraWatch活动：

```
public Functions_class func_cls = new Functions_class();
 private OnClickListener show_panchang_page = new OnClickListener(){

    public void onClick(View v) { 

        pbarDialog = new ProgressDialog( HoraWatchActivity.this );
        pbarDialog.setProgressStyle(ProgressDialog.STYLE_SPINNER);
        pbarDialog.setMessage("Loading Panchang...");
        pbarDialog.show();
               Thread t = new Thread(){
                   public void run(){
                       func_cls.user_informations(mYear, mMonth, mDay); 
                       Message myMessage=new Message();
                       Bundle resBundle = new Bundle();
                       resBundle.putString("status", "SUCCESS"); 
                       myMessage.obj=resBundle;
                       handler.sendMessage(myMessage);
                   }
               };
              t.start();
    }
}; 
```

更快的回复将帮助我很多。谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-10T09:38:07.633

好的，发现问题。问题在于这个变量， `appPrefs`在`user_informations`你的`Function class`. 那时它是空的。

您所做的是，您已经在 onCreate() 中启动了 appPrefs，但是当您执行此类操作时，`public Functions_class func_cls = new Functions_class();`您的 onCreate 不会被调用，这意味着它直接进入方法并返回 null 给您。您必须对现有代码进行一些修改。

试试这个，

1）首先将您的当前活动上下文传递给您的方法，

2）在方法中取消注释这一行`appPrefs = new MySharedPrefs(context);`

```
public void user_informations(int myear,int mMonth, int mDay,Context context){

    int year = myear,month = mMonth+1,day = mDay;
    Moment mn = new Moment(year,month,day,user_device_time());
    appPrefs = new MySharedPrefs(context);

    if(appPrefs.checkKey("City_name1")){
        TimeZone.setDefault(TimeZone.getTimeZone(appPrefs.getPrefsValue("selected_time_zone")));
        Log.v("LOG_TAG"+"here the error is : ", appPrefs.getPrefsValue("selected_lat")+"");
        Log.v("LOG_TAG", appPrefs.getPrefsValue("selected_longi")+"");
        tz1 = TimeZone.getDefault();
        lat = new AstroVedTime(Double.parseDouble(appPrefs.getPrefsValue("selected_lat")));// Latitude
        lon = new AstroVedTime(Double.parseDouble(appPrefs.getPrefsValue("selected_longi")));// Longitude
    } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-10T09:31:47.237

您正在手动实例化活动类 Functions_class。如果您启动活动，框架将处理此问题。即使 Functions_class 没有被用作活动，您也必须手动调用 Functions_class 的 oncreate。那就是初始化 appPrefs 的地方。user_informations 函数中的 appPrefs 为空。初始化它。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-10T09:33:14.833

我认为你的方法是错误的，因为你正在调用一个 Activity 方法（iefunc_cls.user_informations(mYear, mMonth, mDay);)，它不是可见 Activity (HoraWatchActivity.this) 的焦点......并且该函数什么也不做从共享偏好中获取价值。数据检索应在 NonActivity 类中完成。appPrefs 为 null 未初始化。

# asp.net-mvc - 如何使用 Linq + Entity Framework 防止重叠事件

> ID：11898550
> 
> 赞同：1
> 
> 时间：2012-08-10T09:09:24.623
> 
> 标签：asp.net-mvc, linq, entity-framework

我想知道是否有人可以帮助我？我试图防止事件在房间预订系统中重叠。每个事件都有一个开始日期/时间和一个结束日期/时间。我想要发生的是，如果用户尝试在已经存在的事件之间预订事件，它应该会出错。

因此，例如，以下内容重叠时应该出错：-

```
Event 1:
- Start Date/Time: 10/08/2012 09:00
- End Date/Time: 10/08/2012 11:00

Event 2:
- Start Date/Time: 10/08/2012 10:00
- End Date/Time: 10/08/2012 12:00 
```

我正在使用 MVC 和实体框架，所以最好使用 Linq 解决方案。

任何帮助将非常感激 ：）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-10T11:01:48.387

你的意思是这样的：

```
new List<Event>()
{
    new Event() { StartsAt = DateTime.Now.AddHours(-1), EndsAt = DateTime.Now.AddHours(1) } 
};

Event newEvent = new Event() { StartsAt = DateTime.Now.AddHours(-3), EndsAt = DateTime.Now.AddHours(-2) };
bool newEventBookable = !existingsEvents.Any(x => x.StartsAt <= newEvent.EndsAt && x.EndsAt >= newEvent.StartsAt); 
```

然后，如果 newEventBookable 为 false，您就可以抛出错误。

我认为这个逻辑对于之前的、后续的、重叠的和包含的事件是可以的——但我很快就会发现它是否不是！

# python - python sqlAlchemy：更改类位置后得到 InvalidRequestError

> ID：11898551
> 
> 赞同：10
> 
> 时间：2012-08-10T09:09:25.960
> 
> 标签：python, unit-testing, object, orm, sqlalchemy

如果我将`CapacityMin`类和 unittest 类**放在同一个 .py 文件**中，一切都很好。但是在我将 `CapacityMin`类移动到一个单独的文件并运行单元测试之后，我得到了这个错误：

*需要 SQL 表达式、列或映射实体*

**细节：**

```
InvalidRequestError: SQL expression, column, or mapped entity expected - got '<module 'Entities.CapacityMin' from 'D:\trunk\AppService\Common\Entities\CapacityMin.pyc'>' 
```

但这不好。

**最小容量.py**：

```
import sqlalchemy
from sqlalchemy import *
from  sqlalchemy.ext.declarative  import  declarative_base

Base  =  declarative_base()

class  CapacityMin(Base):
    '''

    table definition:
        ID        INT NOT NULL auto_increment,
        Server    VARCHAR (20) NULL,
        FeedID    VARCHAR (10) NULL,
        `DateTime` DATETIME NULL,
        PeakRate  INT NULL,
        BytesRecv INT NULL,
        MsgNoSent INT NULL,
        PRIMARY KEY (ID)
    '''

    __tablename__  =  'capacitymin'

    ID  =  Column(Integer,  primary_key=True)
    Server  =  Column(String)
    FeedID  =  Column(String)
    DateTime  =  Column(sqlalchemy.DateTime)
    PeakRate = Column(Integer)
    BytesRecv = Column(Integer)
    MsgNoSent = Column(Integer)

    def __init__(self, server, feedId, dataTime, peakRate, byteRecv, msgNoSent):
        self.Server = server
        self.FeedID = feedId
        self.DateTime = dataTime
        self.PeakRate = peakRate
        self.BytesRecv = byteRecv
        self.MsgNoSent = msgNoSent

    def __repr__(self):
        return "<CapacityMin('%s','%s','%s','%s','%s','%s')>" % (self.Server, self.FeedID ,
                self.DateTime ,self.PeakRate,
                self.BytesRecv, self.MsgNoSent)

if __name__ == '__main__':
    pass 
```

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-08-10T09:21:39.907

您正在使用模块，而不是模块中的类。

我怀疑你是这样使用它的：

```
from Entities import CapacityMin 
```

当您打算使用时：

```
from Entities.CapacityMin import CapacityMin 
```

这种混淆是[Python 样式指南 (PEP 8)](http://www.python.org/dev/peps/pep-0008/)建议为您的模块使用小写名称的原因之一。您的导入将是：

```
from entities.capacitymin import CapacityMin 
```

你的错误会更容易被发现。

# lighttpd - 为不同的客户端 IP 配置 lighttpd 到不同的主机

> ID：11898552
> 
> 赞同：0
> 
> 时间：2012-08-10T09:09:27.857
> 
> 标签：lighttpd

我有一台运行 lighttp 的服务器。出于测试目的，如果请求来自特定 IP，我想为请求使用不同的主机。例如：

```
$HTTP["host"] =~ "(^|\.)example\.com$" {
    #### for live system
    server.document-root = "/var/www/example.com/http"

    #### for requests from ip xxx
    server.document-root = "/var/www/example.com/testing/http"
    …
} 
```

这可以通过使用配置修改来实现吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-10T10:08:13.547

用于`$HTTP["remoteip"]`此检查：

> `$HTTP["remoteip"]`在远程 IP 或远程网络上匹配（警告：不适用于启用 IPv6）

然后你的配置文件：

```
$HTTP["host"] =~ "(^|\.)example\.com$" {
    #### for live system
    $HTTP["remoteip"] == "10.10.10.10" {
        server.document-root = "/var/www/example.com/http"
    }

    #### for requests from ip xxx
    $HTTP["remoteip"] == "11.11.11.11" {
        server.document-root = "/var/www/example.com/testing/http"
    }
} 
```

您还可以使用`else`：

```
$HTTP["host"] =~ "(^|\.)example\.com$" {
    #### for requests from ip xxx
    $HTTP["remoteip"] == "11.11.11.11" {
        server.document-root = "/var/www/example.com/testing/http"
    }
    #### for live system
    else {
        server.document-root = "/var/www/example.com/http"
    }
} 
```

# asp.net-mvc-3 - 对 FileStreamResult 进行单元测试

> ID：11898553
> 
> 赞同：0
> 
> 时间：2012-08-10T09:09:30.923
> 
> 标签：asp.net-mvc-3, unit-testing, sharpziplib, filestreamresult

我有一个`Controller`返回一个`FileStreamResult`通过`SharpZipLib`（我已经尝试过`DotNetZip`，没有区别）。

```
using (var buffer = new MemoryStream())
{
    using (var zipStream = new ZipOutputStream(buffer))
    {
        zipStream.PutNextEntry(new ZipEntry("The Simpsons"));
        var bart = Encoding.UTF8.GetBytes("Homer <3 donuts");
        zipStream.Write(bart, 0, bart.Length);
        zipStream.IsStreamOwner = false;    
        return File(buffer, MediaTypeNames.Application.Zip, fileName);
    }
} 
```

我正在尝试对此进行单元测试：

```
var controller = new SimpsonsController();
var result = controller.ConfigurationReport(id);
Assert.IsInstanceOf<FileStreamResult>(result);

var streamResult = (FileStreamResult) result;
var zipInputStream = new ZipInputStream(streamResult.FileStream);

Assert.IsNotNull(zipInputStream);

var zipEntry = zipInputStream.GetNextEntry();
Assert.AreEqual("The Simpsons", zipEntry.Name); 
```

现在单元测试失败了：

```
System.ObjectDisposedException : Cannot access a closed Stream.
   at System.IO.__Error.StreamIsClosed()
   at System.IO.MemoryStream.Read(Byte[] buffer, Int32 offset, Int32 count)
   at ICSharpCode.SharpZipLib.Zip.Compression.Streams.InflaterInputBuffer.Fill()
   at ICSharpCode.SharpZipLib.Zip.Compression.Streams.InflaterInputBuffer.ReadLeByte()
   at ICSharpCode.SharpZipLib.Zip.Compression.Streams.InflaterInputBuffer.ReadLeInt()
   at ICSharpCode.SharpZipLib.Zip.ZipInputStream.GetNextEntry() 
```

如果我尝试通过浏览器直接下载具有类似堆栈跟踪的 IIS 500：

```
Cannot access a closed Stream.
System.ObjectDisposedException: Cannot access a closed Stream.
   at System.IO.MemoryStream.Read(Byte[] buffer, Int32 offset, Int32 count)
   at System.Web.Mvc.FileStreamResult.WriteFile(HttpResponseBase response)
   at System.Web.Mvc.ControllerActionInvoker.<>c__DisplayClass1c.<InvokeActionResultWithFilters>b__19()
   at System.Web.Mvc.ControllerActionInvoker.InvokeActionResultFilter(IResultFilter filter, ResultExecutingContext preContext, Func`1 continuation)
   at System.Web.Mvc.ControllerActionInvoker.InvokeActionResultWithFilters(ControllerContext controllerContext, IList`1 filters, ActionResult actionResult)
   at System.Web.Mvc.ControllerActionInvoker.InvokeAction(ControllerContext controllerContext, String actionName) 
```

有没有人测试过这种基于流的文件返回控制器？你是怎么成功的？我应该干脆不处理我的课程吗？真的吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-10T09:23:58.877

试试这个，我认为你的问题是你正在处理正在返回的流。

```
public FileStreamResult PDF()
{
    MemoryStream buffer = new MemoryStream();
    using (var zipStream = new ZipOutputStream(buffer))
    {
        zipStream.PutNextEntry(new ZipEntry("The Simpsons"));
        var bart = Encoding.UTF8.GetBytes("Homer <3 donuts");
        zipStream.Write(bart, 0, bart.Length);
        zipStream.IsStreamOwner = false;
    }
    return File(buffer, MediaTypeNames.Application.Zip, fileName);
} 
```

看看这个[https://stackoverflow.com/a/10891136/985284](https://stackoverflow.com/a/10891136/985284)并关注 Cheeso 的其他帖子以获取更多信息。

# php - 来自 first_link 和 last_link 的 codeigniter 分页问题

> ID：11898555
> 
> 赞同：0
> 
> 时间：2012-08-10T09:09:37.117
> 
> 标签：php, html, codeigniter, pagination

我正在使用 Codeigniter 分页库，它工作正常。但我在第一个和最后一个链接中面临问题。

如果我把

```
 $config['first_link'] = "First";
     $config['last_link']  = "Last";

     //First < 1 2 3 4 ...12 > Last 
```

正在工作，而不是我想为第一个和最后一个链接添加自定义图像，我尝试了这段代码

```
 $config['first_link']  = "<img src='".base_url()."'images/last.png />";
     $config['last_link']   = "<img src='".base_url()."'images/first.png />";

     //image < 1 2 3 4 ...12 > image 
```

它没有加载图像。当我在浏览器中检查元素时，我得到了这段代码

```
<img first.png="" images="" src="http://182.72.141.134/estateace/"> 
```

这里有什么问题？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-10T09:12:28.840

尝试这个：

```
 $config['first_link']  = "<img src='".base_url()."images/last.png' />";
 $config['last_link']   = "<img src='".base_url()."images/first.png' />"; 
```

我认为这与单引号有关

我希望这会有所帮助。

# javascript - IE8 兼容模式 - document.documentMode

> ID：11898559
> 
> 赞同：0
> 
> 时间：2012-08-10T09:09:55.623
> 
> 标签：javascript, jquery, internet-explorer, ie8-compatibility-mode

我需要一个 javascript 代码“document.documentMode”，它在真正的 IE8 模式下的值为 8，在 IE7 模式下的值为 7。

用户代理字符串在这两种情况下都是相同的，并且仍然是 IE8。请注意，此 JavaScript 变量仅在 IE8 中可用。

基本上，我必须检测何时有人在运行 IE8（周二）和 IE8（在兼容模式下）。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-10T12:24:13.000

“基本上，我必须检测何时有人在运行 IE8（周二）和 IE8（在兼容模式下）。”

```
var ie8 = /msie\s+8/i.test(navigator.userAgent);
var mod = document.documentMode;
if (ie8 && mod == 8) {
   alert("found!");
}

// or
var ok = (
    /msie\s+8/i.test(navigator.userAgent) &&
    document.documentMode == 8
);
if (ok) {
    // ... 
```

# c# - MVC4 Razor 显示必填字段

> ID：11898560
> 
> 赞同：0
> 
> 时间：2012-08-10T09:10:00.577
> 
> 标签：c#, razor, asp.net-mvc-4

在具有默认表单验证的表单中，我有例如以下代码：

### 代码：

```
<div class="item">
    @Html.LabelFor(m => m.Contact.LastName, new { @class="l" } )
    <div class="input">@Html.EditorFor(m => m.Contact.LastName, new { @class="i" })</div>
    <div class="marker">@Html.ValidationMessageFor(model => model.Contact.LastName)</div>
    <div class="clear"></div>
</div> 
```

### 输出：

```
<div class="item">
  <label class="l" for="Contact_LastName">Lastname</label>
  <div class="input">
    <input class="i" data-val="true" data-val-length="Required" data-val-length-max="70" data-val-length-min="2" data-val-required="Required" id="Contact_LastName" name="Contact.LastName" type="text" value="" />
  </div>
  <div class="marker">
    <span class="field-validation-valid" data-valmsg-for="Contact.LastName" data-valmsg-replace="true">
    </span>
  </div>
  <div class="clear"></div>
</div> 
```

### 问题：

现在我想在 de 标记中显示一个“*”（星号），当字段出现错误时它应该消失（然后应该显示错误消息），或者当字段正确填写时它应该消失。

### 情况：

所以状态 1 - 姓氏：[.....] *

状态 2（点击提交后） - 姓：[.....]**必填**

状态 3（有效条目） - 姓氏：[doe..]

实现这一目标的最佳方法是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-10T13:29:39.440

我已经为 ValidateMessageFor 类（MVC4）创建了一个重载：

```
 public  static MvcHtmlString ValidationMessageFor<TModel, TProperty>(this HtmlHelper<TModel> htmlHelper, Expression<Func<TModel, TProperty>> expression, bool addRequiredFieldMark)
    {
        return ValidationMessageFor(htmlHelper, expression, null /* validationMessage */, new RouteValueDictionary(), addRequiredFieldMark: addRequiredFieldMark);
    }

    public static MvcHtmlString ValidationMessageFor<TModel, TProperty>(this HtmlHelper<TModel> htmlHelper, Expression<Func<TModel, TProperty>> expression, string validationMessage, IDictionary<string, object> htmlAttributes, bool? addRequiredFieldMark=false)
    {
        return ValidationMessageHelper(htmlHelper,
                                       ModelMetadata.FromLambdaExpression(expression, htmlHelper.ViewData),
                                       ExpressionHelper.GetExpressionText(expression),
                                       validationMessage,
                                       htmlAttributes,
                                       addRequiredFieldMark:addRequiredFieldMark);
    }

    private static MvcHtmlString ValidationMessageHelper(this HtmlHelper htmlHelper, ModelMetadata modelMetadata, string expression, string validationMessage, IDictionary<string, object> htmlAttributes, bool? addRequiredFieldMark = false)
    {
        string modelName = htmlHelper.ViewContext.ViewData.TemplateInfo.GetFullHtmlFieldName(expression);

        //Changed (http://stackoverflow.com/questions/8380988/how-to-customize-html-validationmessagefor-in-asp-mvc).
        //FormContext formContext = htmlHelper.ViewContext.GetFormContextForClientValidation();
        FormContext formContext = htmlHelper.ViewContext.ClientValidationEnabled ? htmlHelper.ViewContext.FormContext : null;

        if (!htmlHelper.ViewData.ModelState.ContainsKey(modelName) && formContext == null)
        {
            return null;
        }

        ModelState modelState = htmlHelper.ViewData.ModelState[modelName];
        ModelErrorCollection modelErrors = (modelState == null) ? null : modelState.Errors;
        ModelError modelError = (((modelErrors == null) || (modelErrors.Count == 0)) ? null : modelErrors.FirstOrDefault(m => !String.IsNullOrEmpty(m.ErrorMessage)) ?? modelErrors[0]);

        if (modelError == null && formContext == null)
        {
            return null;
        }

        TagBuilder builder = new TagBuilder("span");
        builder.MergeAttributes(htmlAttributes);
        builder.AddCssClass((modelError != null) ? HtmlHelper.ValidationMessageCssClassName : HtmlHelper.ValidationMessageValidCssClassName);

        if (!String.IsNullOrEmpty(validationMessage))
        {
            builder.SetInnerText(validationMessage);
        }
        else if (modelError != null)
        {
            builder.SetInnerText(GetUserErrorMessageOrDefault(htmlHelper.ViewContext.HttpContext, modelError, modelState));
        }

        if (formContext != null)
        {
            bool replaceValidationMessageContents = String.IsNullOrEmpty(validationMessage);

            // Addition
            if (modelMetadata != null && modelMetadata.IsRequired && addRequiredFieldMark.HasValue && addRequiredFieldMark.Value)
                builder.SetInnerText("*");

            if (htmlHelper.ViewContext.UnobtrusiveJavaScriptEnabled)
            {
                builder.MergeAttribute("data-valmsg-for", modelName);
                builder.MergeAttribute("data-valmsg-replace", replaceValidationMessageContents.ToString().ToLowerInvariant());
            }
            else
            {
                FieldValidationMetadata fieldMetadata = ApplyFieldValidationMetadata(htmlHelper, modelMetadata, modelName);
                // rules will already have been written to the metadata object
                fieldMetadata.ReplaceValidationMessageContents = replaceValidationMessageContents; // only replace contents if no explicit message was specified

                // client validation always requires an ID
                builder.GenerateId(modelName + "_validationMessage");
                fieldMetadata.ValidationMessageId = builder.Attributes["id"];
            }
        }
        return MvcHtmlString.Create(builder.ToString(TagRenderMode.Normal));
    } 
```

所以这是补充：

```
if (modelMetadata != null && modelMetadata.IsRequired && addRequiredFieldMark.HasValue && addRequiredFieldMark.Value)                 
builder.SetInnerText("*"); 
```

而这个剃须刀/cshtml代码：

```
<div class="item">
    @Html.LabelFor(m => m.Contact.LastName, new { @class="l" } )
    <div class="input">@Html.EditorFor(m => m.Contact.LastName, new { @class="i" })</div>
    <div class="marker">@Html.ValidationMessageFor(model => model.Contact.LastName,true)</div>
    <div class="clear"></div>
</div> 
```

*（注意真正的关键字）*

# android - 如何在 Android 3.2 中最小化操作菜单项的大小？

> ID：11898561
> 
> 赞同：1
> 
> 时间：2012-08-10T09:10:00.933
> 
> 标签：android

我正在为 Android 3.2 开发一个简单的四动作应用程序。我希望所有菜单项都出现在单行的操作菜单中。（目前它们显示为 2x2 网格。我想要一个 1x4 网格。）

为此，我想：

*   删除文本并仅显示图标
    *   我已尝试删除该`android:title`属性，但文本的空白空间仍然存在
*   最小化项目的宽度，使它们都排成一行（这可能不适用于所有屏幕尺寸，但在我的情况下，我可以看到图标图像**可以**适合我的模拟器屏幕）

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-10T10:07:30.527

这只是一个猜测，但这似乎是 android 不支持开箱即用的东西，因为那里有许多不同的屏幕，有些没有足够的空间来放置所有按钮（你有 4 个，但是想象一下希望 10 个代替的人）并且 google 不会喜欢用户在尝试单击微小的操作按钮时会感到沮丧。

如果您愿意，您可以随时创建自己的自定义操作栏，它会具有您希望的任何行为。

# sencha-touch-2 - 如何设置 TabPanel 的选项卡宽度和选项卡高度？

> ID：11898562
> 
> 赞同：0
> 
> 时间：2012-08-10T09:10:01.763
> 
> 标签：sencha-touch-2

如何设置 TabPanel 的选项卡宽度和选项卡高度？

我试过了：

```
var myTabPanel  = Ext.create('Ext.TabPanel', {  
   fullscreen: true,
   tabBarPosition: 'top', 
   resizeTabs: true,
   tabWidth: 300, 
   //minTabWidth: 300
        .... 
```

但它不起作用

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-11T08:44:47.027

这一切都发生在 sencha`css`文件中。你需要在那里修改它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-12-17T05:14:26.393

好消息，

我找到了以编程方式执行此操作的方法。

```
//assuming you are using the MVC structure as suggested
/*In the controller class of your view with the tab panel you must have reference to the tab panel in refs config.
The reference name for this case will be: myTabpanel
*/

//somewhere in the controller class
var tabPanelItems = this.getMyTabpanel().getItems; //get all the items inside the tab panel (if i'm not mistaken this will also return some "extra" item which is not panel
for (var i = 0; i < panels.length; i++) {
  //due to that extra item i mentioned, need to make sure current item is a tab by confirming "tab" property existence
  if (panels.items[i].tab) {
    panels.items[i].setWidth('100px');
    panels.items[i].setHeight('25px');
  }
} 
```

就是这样。关键是它是一个选项卡面板（带面板的选项卡），因此要仅配置选项卡部分，我们首先需要获取选项卡部分，否则我们将默认配置面板部分。

# java - 关于javaagents的教程

> ID：11898566
> 
> 赞同：56
> 
> 时间：2012-08-10T09:10:25.730
> 
> 标签：java, javaagents

我想学习一些关于javaagents的东西，但是研究并不容易。大多数结果是指`JADE`. 我知道 java 代理可能意味着两件事：

1.  用 Java 编程的代理是分布式系统代理概念的化身。
2.  用于增强 JVM 工作的低级软件组件，例如分析器、代码覆盖工具等

我在[这里](https://stackoverflow.com/questions/5468297/java-agent-what-is-it)找到了类似的问题，但不幸的是它也指的是版本 1。

你知道第 2 版中关于 javaagent 的任何文章、初学者教程、示例项目吗？我在[这里找到了一个，](http://dhruba.name/2010/02/07/creation-dynamic-loading-and-instrumentation-with-javaagents/)但我正在寻找更多。

* * *

## 回答 #1

> 赞同：87
> 
> 时间：2012-08-10T09:15:46.337

第二种情况是关于[Java Instrumentation API](http://docs.oracle.com/javase/1.5.0/docs/api/java/lang/instrument/package-summary.html) - 这个链接指向一个 Javadoc，它是相当具有描述性的。

这里是完整的说明和[如何创建 java 检测代理的示例](http://www.javamex.com/tutorials/memory/instrumentation.shtml)。

主要概念是：

1.  实现一个静态`premain`（类似于`main`）方法，如下所示：

    ```
    import java.lang.instrument.Instrumentation;

    class Example {
        public static void premain(String args, Instrumentation inst) {
            ...
        }
    } 
    ```

2.  创建一个清单文件（例如`manifest.txt`），将此类标记为 pre-main 执行。它的内容是：

    ```
    Premain-Class: Example 
    ```

3.  编译该类并将该类打包成一个`JAR`存档：

    ```
    javac Example.java
    jar cmf manifest.txt yourAwesomeAgent.jar *.class 
    ```

4.  使用参数执行 JVM `-javaagent`，如下所示：

    ```
    java -javaagent:yourAwesomeAgent.jar -jar yourApp.jar 
    ```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2017-03-30T08:21:54.530

如第 2 点所述，很少有对 javaagent 有用的资源。

*   [编写 javaagent 的操作指南](https://zeroturnaround.com/rebellabs/how-to-inspect-classes-in-your-jvm/ "编写 javaagent 的操作指南 |  zeroturnaround.com")
*   [驯服 Javaagents - 在 BCN JUG 2015 上的演讲](https://speakerdeck.com/shelajev/taming-javaagents-bcn-jug-2015)
*   [java.lang.instrument 的 API 文档](http://docs.oracle.com/javase/8/docs/api/java/lang/instrument/package-summary.html)

# oracle - 连接同一张表中的行+oracle

> ID：11898569
> 
> 赞同：0
> 
> 时间：2012-08-10T09:10:38.000
> 
> 标签：oracle

```
 I have a table MNO like this:-

 key    open  mode  close     time
   1    112    O             10:15pm
   1           C     200     11:50pm 
```

我希望查询的输出给我这个：-

```
key  open   close   difference  open_time   close_time
1    112     200      88         10:15pm      11:50pm 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-10T09:35:22.200

```
select
 o.key, o.open, c.close, 
 c.close - o.open as difference,
 o.time as open_time,
 c.time as close_time
from 
  mno o
  mno c
where
  o.key = c.key
and o.mode='O'
and c.mode='C'
; 
```

# matlab - 预分配结构matlab

> ID：11898574
> 
> 赞同：0
> 
> 时间：2012-08-10T09:10:51.737
> 
> 标签：matlab, structure

我正在考虑创建一个像 QQQW(1,12).x1...QQQW(1,12).x40 这样的结构，所以我有 12 个 W 字段，每个字段有 40 对：内部字段值（单元格、字符串, 整数）。我想预先分配这个结构。在这种情况下，我已经有一个像这样但带有数据的现有结构，并且根据条件我修改这些数据并保存到我的新结构中，或者只是使用空的预分配结构更进一步。

所以我必须获得一个预先分配维度的结构，就像我的数据结构一样，但这个结构必须是空的。如果不输入所有这些 12 乘以 50 的名称等怎么办？

就像帮助中的 s = struct(obj) 一样，但不应包含 obj 的内容，而是为空。

如果您有任何想法，请帮助

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-10T12:05:25.630

事实上，它似乎不是如何存储数据的最佳选择——由此产生的结构不会是世界上最容易操作的东西。

然而，如果您的客户/客户/任何人希望您返回与您获得的相同的数据结构，那么这是一个合法的用例。

所以，你可以做类似的事情

```
for ii = 1:40               
    Q.Q.Q.W(12).(['x' num2str(ii)]) = [];
end 
```

创建初始结构。

我不太明白你最初想用什么来填充结构——你能澄清一下吗？

# java - SQL 查询中的 java.lang.NullPointerException

> ID：11898576
> 
> 赞同：0
> 
> 时间：2012-08-10T09:10:57.033
> 
> 标签：java, sql, oracle11g

我有将数据插入 Oracle 行的 SQL 查询。当我运行该语句时，我得到了 NPE。

```
public int saveData(int result) throws SQLException, java.text.ParseException, NoSuchAlgorithmException {

    String SqlStatement = null;

    if (ds == null) {
        throw new SQLException();
    }

    Connection conn = ds.getConnection();
    if (conn == null) {
        throw new SQLException();
    }

    PreparedStatement ps = null;

    /*

    CREATE TABLE USERS(
        USERID INTEGER NOT NULL,
        GROUPID INTEGER,
        SPECIALNUMBER VARCHAR2(60 ),
        USERNAME VARCHAR2(50 ),
        PASSWD VARCHAR2(50 ),
        DATETOCHANGEPASSWD DATE,
        ADDRESS VARCHAR2(60 ),
        STATEREGION VARCHAR2(50 ),
        COUNTRY VARCHAR2(50 ),
        USERSTATUS VARCHAR2(30 ),
        TELEPHONE VARCHAR2(50 ),
        DATEUSERADDED DATE,
        USEREXPIREDATE DATE,
        DATEUSERLOCKED CHAR(20 ),
        CITY VARCHAR2(50 ),
        EMAIL VARCHAR2(50 ),
        DESCRIPTION CLOB
    )
   */

    try {
        conn.setAutoCommit(false);
        boolean committed = false;
        try {           
            String getTimeStampTemplateSQL = "(select (select settingvalue from globalsettings where settingname = 'DateFormat') || ' ' ||"
                                             + "(select settingvalue from globalsettings where settingname = 'TimeFormat') from dual)";

            /* insert into Oracle the default system(Linux) time */
            SqlStatement = "INSERT INTO USERS VALUES (?, ?, ?, ?, ?, to_timestamp(?, " 
                    + getTimeStampTemplateSQL + "), ?, ?, ?, ?, ?, SYSTIMESTAMP, to_timestamp(?, " + getTimeStampTemplateSQL +
                    "), ?, ?, ?, ?)";

            ps = conn.prepareStatement(SqlStatement);

            ps.setString(1, formMap.get("USERID"));
            ps.setString(2, formMap.get("GROUPID"));
            ps.setString(3, formMap.get("SPECIALNUMBER"));
            ps.setString(4, formMap.get("USERNAME"));
            ps.setString(5, passwdConvert(formMap.get("PASSWD")));
            ps.setString(6, formMap.get("DATETOCHANGEPASSWD").trim().length() == 0 ? null : formMap.get("DATETOCHANGEPASSWD").trim() + " " + formMap.get("HOURTOCHANGEPASSWD").trim());
            ps.setString(7, formMap.get("ADDRESS"));
            ps.setString(8, formMap.get("STATEREGION"));
            ps.setString(9, formMap.get("COUNTRY"));
            ps.setString(10, formMap.get("USERSTATUS"));

            // If the user set Account Status to Blocked insert SYSTIMESTAMP into DATEUSERLOCKED
            if ((formMap.get("USERSTATUS")!=null) && (formMap.get("USERSTATUS")).equals("Blocked")){
                formMap.put("DATEUSERLOCKED", "SYSTIMESTAMP");
            }               

            ps.setString(11, formMap.get("TELEPHONE"));
            ps.setString(12, formMap.get("USEREXPIREDATE").trim().length() == 0 ? null : formMap.get("USEREXPIREDATE").trim() + " " + formMap.get("USEREXPIREHOUR").trim());

            //ps.setString(13, formMap.get("DATEUSERLOCKED").trim().length() == 0 ? null : formMap.get("DATEUSERLOCKED"));

            ps.setString(13, ((formMap.get("DATEUSERLOCKED")==null) || ((formMap.get("DATEUSERLOCKED")!=null) && (formMap.get("DATEUSERLOCKED").trim().length()==0)))? null : formMap.get("DATEUSERLOCKED"));

            ps.setString(14, formMap.get("CITY"));
            ps.setString(15, formMap.get("EMAIL"));
            ps.setString(16, formMap.get("DESCRIPTION"));

            ps.executeUpdate();

            conn.commit();
            committed = true;
        }
        finally 
        {
            if (!committed) {
                conn.rollback();
            }
        }
    } finally {
        /* Release the resources */
        ps.close();
        conn.close();
    }
    // For JGrown message
    FacesContext context = FacesContext.getCurrentInstance();
context.addMessage(null, new FacesMessage("Successful", "User " + formMap.get("USERID") + " is created!"));

    return result;
} 
```

我收到此错误：

```
javax.faces.FacesException: #{AddAccountController.saveData(1)}: java.sql.SQLDataException: ORA-01858: a non-numeric character was found where a numeric was expected

    at com.sun.faces.application.ActionListenerImpl.processAction(ActionListenerImpl.java:118)
    at javax.faces.component.UICommand.broadcast(UICommand.java:315)
    at javax.faces.component.UIViewRoot.broadcastEvents(UIViewRoot.java:794)
    at javax.faces.component.UIViewRoot.processApplication(UIViewRoot.java:1259)
    at com.sun.faces.lifecycle.InvokeApplicationPhase.execute(InvokeApplicationPhase.java:81)
    at com.sun.faces.lifecycle.Phase.doPhase(Phase.java:101)
    at com.sun.faces.lifecycle.LifecycleImpl.execute(LifecycleImpl.java:118)
    at javax.faces.webapp.FacesServlet.service(FacesServlet.java:593)
    at org.apache.catalina.core.StandardWrapper.service(StandardWrapper.java:1550)
    at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:281)
    at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:175)
    at org.apache.catalina.core.StandardPipeline.doInvoke(StandardPipeline.java:655)
    at org.apache.catalina.core.StandardPipeline.invoke(StandardPipeline.java:595)
    at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:161)
    at org.apache.catalina.connector.CoyoteAdapter.doService(CoyoteAdapter.java:331)
    at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:231)
    at com.sun.enterprise.v3.services.impl.ContainerMapper$AdapterCallable.call(ContainerMapper.java:317)
    at com.sun.enterprise.v3.services.impl.ContainerMapper.service(ContainerMapper.java:195)
    at com.sun.grizzly.http.ProcessorTask.invokeAdapter(ProcessorTask.java:860)
    at com.sun.grizzly.http.ProcessorTask.doProcess(ProcessorTask.java:757)
    at com.sun.grizzly.http.ProcessorTask.process(ProcessorTask.java:1056)
    at com.sun.grizzly.http.DefaultProtocolFilter.execute(DefaultProtocolFilter.java:229)
    at com.sun.grizzly.DefaultProtocolChain.executeProtocolFilter(DefaultProtocolChain.java:137)
    at com.sun.grizzly.DefaultProtocolChain.execute(DefaultProtocolChain.java:104)
    at com.sun.grizzly.DefaultProtocolChain.execute(DefaultProtocolChain.java:90)
    at com.sun.grizzly.http.HttpProtocolChain.execute(HttpProtocolChain.java:79)
    at com.sun.grizzly.ProtocolChainContextTask.doCall(ProtocolChainContextTask.java:54)
    at com.sun.grizzly.SelectionKeyContextTask.call(SelectionKeyContextTask.java:59)
    at com.sun.grizzly.ContextTask.run(ContextTask.java:71)
    at com.sun.grizzly.util.AbstractThreadPool$Worker.doWork(AbstractThreadPool.java:532)
    at com.sun.grizzly.util.AbstractThreadPool$Worker.run(AbstractThreadPool.java:513)
    at java.lang.Thread.run(Thread.java:722)
Caused by: javax.faces.el.EvaluationException: java.sql.SQLDataException: ORA-01858: a non-numeric character was found where a numeric was expected

    at javax.faces.component.MethodBindingMethodExpressionAdapter.invoke(MethodBindingMethodExpressionAdapter.java:102)
    at com.sun.faces.application.ActionListenerImpl.processAction(ActionListenerImpl.java:102)
    ... 31 more
Caused by: java.sql.SQLDataException: ORA-01858: a non-numeric character was found where a numeric was expected

    at oracle.jdbc.driver.T4CTTIoer.processError(T4CTTIoer.java:445)
    at oracle.jdbc.driver.T4CTTIoer.processError(T4CTTIoer.java:396)
    at oracle.jdbc.driver.T4C8Oall.processError(T4C8Oall.java:879)
    at oracle.jdbc.driver.T4CTTIfun.receive(T4CTTIfun.java:450)
    at oracle.jdbc.driver.T4CTTIfun.doRPC(T4CTTIfun.java:192)
    at oracle.jdbc.driver.T4C8Oall.doOALL(T4C8Oall.java:531)
    at oracle.jdbc.driver.T4CPreparedStatement.doOall8(T4CPreparedStatement.java:207)
    at oracle.jdbc.driver.T4CPreparedStatement.executeForRows(T4CPreparedStatement.java:1044)
    at oracle.jdbc.driver.OracleStatement.doExecuteWithTimeout(OracleStatement.java:1329)
    at oracle.jdbc.driver.OraclePreparedStatement.executeInternal(OraclePreparedStatement.java:3584)
    at oracle.jdbc.driver.OraclePreparedStatement.executeUpdate(OraclePreparedStatement.java:3665)
    at oracle.jdbc.driver.OraclePreparedStatementWrapper.executeUpdate(OraclePreparedStatementWrapper.java:1352)
    at com.sun.gjc.spi.base.PreparedStatementWrapper.executeUpdate(PreparedStatementWrapper.java:125)
    at com.DX_57.AC_57.AddAccount.saveData(AddAccount.java:207)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
    at java.lang.reflect.Method.invoke(Method.java:601)
    at javax.el.BeanELResolver.invokeMethod(BeanELResolver.java:779)
    at javax.el.BeanELResolver.invoke(BeanELResolver.java:528)
    at javax.el.CompositeELResolver.invoke(CompositeELResolver.java:257)
    at com.sun.el.parser.AstValue.invoke(AstValue.java:248)
    at com.sun.el.MethodExpressionImpl.invoke(MethodExpressionImpl.java:302)
    at com.sun.faces.facelets.el.TagMethodExpression.invoke(TagMethodExpression.java:105)
    at javax.faces.component.MethodBindingMethodExpressionAdapter.invoke(MethodBindingMethodExpressionAdapter.java:88)
    ... 32 more
|#] 
```

你能帮我解决这个问题吗？也许准备好的语句的顺序不正确？

PS问题出在这里：

```
ps.setString(13, formMap.get("DATEUSERLOCKED").trim().length() == 0 ? null : formMap.get("DATEUSERLOCKED")); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-10T10:05:35.793

异常被抛出

```
AddAccount.java:221 
```

如果你不能直接弄清楚这一行是做什么的（如果你能从这个文件中发布这段代码片段会很好）那么调试程序应该是你发现错误的第一步（这 - 实际上 - 是一个一般规则）。

对您发布的代码的一般评论（这也可能是问题的根本原因）。每当你这样做时，`formMap.get("<key>")`你都不能确定`formMap`会为此返回一个`not-null`对象`<key>`。您只是将此映射返回的值直接分配给准备好的语句的情况可能没有问题，但是当您级联调用该返回对象的其他方法时（例如，如果对象是，`equals`则`trim`可能导致`NPE` **iff**`null`）。

所以考虑改变调用，如：

```
if ((formMap.get("USERSTATUS")).equals("Blocked")){
...
} 
```

类似于：

```
if ((formMap.get("USERSTATUS")!=null) && (formMap.get("USERSTATUS")).equals("Blocked")){
...
} 
```

或者

```
if ("Blocked".equals(formMap.get("USERSTATUS"))){
...
} 
```

在你打电话的地方`trim`和`length`地图上的结果项目上

**编辑**

使用三元运算符 ( `?:`) 进行检查的情况稍微复杂一些`null`：如果项目的长度为 0，则需要分配 null，因此这分解为以下逻辑：

> 如果从 formMap 返回的对象是 null 或者（如果从 formMap 返回的对象不是 NULL 并且它的长度为零）返回 NULL 否则返回对象本身

因此，这导致以下检查：

```
((formMap.get("DATEUSERLOCKED")==null) || ((formMap.get("DATEUSERLOCKED")!=null) && (formMap.get("DATEUSERLOCKED").trim().length()==0)))? null : formMap.get("DATEUSERLOCKED")); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-10T09:15:08.157

（作为一般规则），您可以重写以下行以更安全：

```
if ((formMap.get("USERSTATUS")).equals("Blocked")) { 
```

假设 ，`formMap != null`最好写成：

```
if ("Blocked".equals(formMap.get("USERSTATUS"))) { 
```

在这种情况下，即使 formMap 不包含 key 也是安全的`USERSTATUS`。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-10T09:19:23.617

我能看到 NPE 的唯一机会是当你这样做时

```
formMap.get(...).trim().length() ...
passwdConvert(formMap.get("PASSWD")) 
```

您是否尝试过调试？

我在我的项目中应用的一般规则是：每行一个语句 - 这样 StackTraces 中的 line-nubers 会更有帮助。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-10T11:25:14.077

尝试`null`像这样添加：

```
ps.setString(13, formMap.get("DATEUSERLOCKED").trim().length() == 0 ? 'null' : formMap.get("DATEUSERLOCKED")); 
```

# inno-setup - 在 Inno Setup 中测试通过 /D 命令行开关传递的参数失败

> ID：11898578
> 
> 赞同：1
> 
> 时间：2012-08-10T09:11:05.403
> 
> 标签：inno-setup

我打电话`ISCC /DENABLE_SIGNING=1 MyFile.iss`，在 MyFile.iss 我有：

```
#if ENABLE_SIGNING == 1
SignedUninstaller=yes
SignTool=mysigntool
#endif 
```

ISPP 失败并出现错误，恰好在以下行`#if ENABLE_SIGNING == 1`：

> [ISPP] 运算符不适用于此操作数类型。

但是，如果我在 MyFile.iss 中定义了 ENABLE_SIGNING，那就没问题了。此代码通过没有错误：

```
#define ENABLE_SIGNING 1

#if ENABLE_SIGNING == 1
SignedUninstaller=yes
SignTool=mysigntool
#endif 
```

* * *

**编辑**

此外，还有另一个问题，当我使用 时`/DENABLE_SIGNING=0`，测试`#if ENABLE_SIGNING`成功，而如果我使用`#define ENABLE_SIGNING 0`，则检查失败（意味着评估为假），这是应该的。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-10T09:23:51.560

从我现在运行的一些测试来看，命令行解释预处理器似乎将定义的默认值作为字符串。因此，当您以这种方式修改条件时，它将正常工作：

```
; just for case when you wouldn't run ISCC from command line
#ifndef ENABLE_SIGNING
  #define ENABLE_SIGNING "1"
#endif

[Setup]
AppName=My Program 1
AppVersion=1.5
DefaultDirName={pf}\My Program

#if ENABLE_SIGNING == "1"
  SignedUninstaller=yes
  SignTool=mysigntool
#endif 
```

# java - Why is this URL not opened from Play! Framework 1.2.4?

> ID：11898579
> 
> 赞同：2
> 
> 时间：2012-08-10T09:11:12.767
> 
> 标签：java, playframework, email-attachments, playframework-1.x, apache-commons-email

I have a URL in my Play! app that routes to either HTML or XLSX depending on the extension that is passed in the URL, with a routes line like :-

```
# Calls
GET     /calls.{format}                         Call.index 
```

so calls.html renders the page, calls.xlsx downloads an Excel file (using Play Excel module). All works fine from the browser, a cURL request, etc.

I now want to be able to create an email and have the Excel attached to it, but I cannot pull the attachment. Here's the basic version of what I tried first :-

```
public static void sendReport(List<Object[]> invoicelines, String emailaddress) throws MalformedURLException, URISyntaxException
    {
        setFrom("Telco Analysis <test@test.com>");
        addRecipient(emailaddress);
        setSubject("Telco Analysis report");
        EmailAttachment emailAttachment = new EmailAttachment();
        URL url = new URL("http://localhost:9001/calls.xlsx");

        emailAttachment.setURL(url);
        emailAttachment.setName(url.getFile());
        emailAttachment.setDescription("Test file");
        addAttachment(emailAttachment);
        send(invoicelines);
    } 
```

but it just doesn't pull the URL content, it just sits there without any error messages, with Chrome's page spinner going and ties up the web server (to the point that requests from another browser/machine don't appear to get serviced). If I send the email without the attachment, all is fine, so it's just the pulling of the file that appears to be the problem.

So far I've tried the above method, I've tried Play's WS webservice library, I've tried manually-crafted HttpRequests, etc. If I specify another URL (such as [http://www.google.com](http://www.google.com)) it works just fine.

Anyone able to assist?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-10T11:43:42.677

我假设您正在开发模式下运行。

在开发模式下，您可能会有一个请求执行池，但在发送电子邮件的控制器中，您正在发送第二个请求，该请求将阻塞，直到您的上一个请求完成（它不会因为它正在等待第二个请求响应）...所以....僵局！外部请求正常工作的原因是因为您没有导致 Play 请求池出现死锁。

您的问题的简单答案是增加`play.pool`application.conf 中的值。确保它没有被注释，并选择一个大于 1 的值！

```
# Execution pool
# ~~~~~
# Default to 1 thread in DEV mode or (nb processors + 1) threads in PROD mode.
# Try to keep a low as possible. 1 thread will serialize all requests (very useful for debugging purpose)
play.pool=3 
```

# jstl - 如何在输入标签的值属性内使用 c:when 条件？

> ID：11898583
> 
> 赞同：1
> 
> 时间：2012-08-10T09:11:17.120
> 
> 标签：jstl

如何在输入标签的值属性内使用 c:when 条件？

```
<input id="textid" type="button" value=""> 
```

在“价值”中。我想要的是

```
<c:when test="${texttest == 'Y'}"> Add </c:when>
<c:otherwise> Edit </c:otherwise> 
```

如果 textest 为“Y”，则值应为“Add”，否则为“Edit”

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-15T07:26:59.710

```
<input id="textid" type="button" value="${texttest == 'Y' ? 'Add' : 'Edit'}"> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-10T09:16:52.723

```
<c:choose>
<c:when test="${texttest == 'Y'}">
 Add 
</c:when>
<c:otherwise>
 Edit 
</c:otherwise>
</c:choose> 
```

# linux - 如何使用 BASH 查找文件的元信息

> ID：11898586
> 
> 赞同：22
> 
> 时间：2012-08-10T09:11:28.540
> 
> 标签：linux, bash, metadata

如何在 BASH 中找到文件的元信息？以及如何使用 cut 和 grep 命令分别提取和打印？

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-08-10T10:25:27.357

`ls`而不是使用`cut`/解析输出`grep`，您应该只使用`stat`which 接受`-c`参数来指定输出格式。

```
anthony@Zia:~$ stat -c '%n : %A : %U : %s' afiedt.buf .XCompose 
afiedt.buf : -rw-r--r-- : anthony : 178
.XCompose : lrwxrwxrwx : anthony : 38 
```

您可以随意更改输出格式；查看[stat(1) 手册页](http://linux.die.net/man/1/stat)了解详情。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-08-10T10:03:15.200

我只是在这里猜测，但是您尝试过命令`file`吗？它将尝试识别它是什么类型的文件。

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2012-08-10T10:25:29.637

在文件上执行`stat -l`：

```
[~]$ stat -l test.py
-rw-r--r-- 1 burhan staff 84 Aug  3 01:08:34 2012 test.py 
```

将此信息存储在变量中：

```
[~]$ foo=$(stat -l test.py)
[~]$ echo $foo
-rw-r--r-- 1 burhan staff 84 Aug 3 01:08:34 2012 test.py 
```

仅获取特定信息`man stat`并检查格式说明符。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-10T16:45:04.693

试试 libextractor

[http://www.linuxjournal.com/article/7552?page=0,0](http://www.linuxjournal.com/article/7552?page=0,0)

# android - 当我触摸 TextView 时触摸按钮

> ID：11898587
> 
> 赞同：0
> 
> 时间：2012-08-10T09:11:39.073
> 
> 标签：android, button

我有一个小问题。我旁边有带有 textview 的按钮。我想在触摸textview时触摸按钮（效果：触摸按钮时按钮突出显示）。有一些简单的方法可以做到这一点吗？我找不到任何合适的功能。

编辑：好的，我已经解决了我的问题。这是：

hilfeText.setOnTouchListener(new OnTouchListener() {

```
 public boolean onTouch(View v, MotionEvent me) {
            int action = me.getAction();
            if(action == MotionEvent.ACTION_DOWN) {
                hilfe.setPressed(true);
                return true;
            } else if (action == MotionEvent.ACTION_UP) {
                hilfe.setPressed(false);
                return true;
            }
            return false;
        }
    }); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-10T09:16:43.277

您可以使用inside of调用`performClick()`方法。`Button reference``onClick``TextView`

例子-

```
myTextView.setOnClickListner(){

    public void onClick(){
       myButton.performClick();

        --------------code

    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-10T09:47:18.737

你可以定义一个`button`in`xml`文件的点击和聚焦模式，比如`

```
<item android:drawable="@drawable/recordings_icon" android:state_enabled="false"></item>
<item android:drawable="@drawable/recordings_glow" android:state_enabled="true" android:state_pressed="true"/>
<item android:drawable="@drawable/recordings_shadow" android:state_enabled="true" android:state_focused="true"/>
<item android:drawable="@drawable/recordings_icon" android:state_enabled="true"/> 
```

您可以将此文件放在目录中，名称`drawables` `@drawable/recordings_icon`是图像文件，您只需将此文件名声明为`button`布局 xml 文件 的背景`<Button android:id="@+id/buttonActivate" android:layout_width="wrap_content" android:layout_height="wrap_content" android:background="@drawable/xmlfilename" />`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-10T09:13:17.583

`onClickListener`为您的`Button`and`TextView`和设置一个`onClick()`，让它们都调用相同的函数。简单的。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-10T09:17:40.757

这可能会奏效

```
TextView v = ...;
final Button b = ...;
v.setOnClickListener(new OnClickListener() {
    @Override
    public void onClick(View v) {
       b.setFocusableInTouchMode(true);
       b.requestFocus();
       b.performClick();
    }
}); 
```

# wpf - 如何在代码隐藏文件中设置 ImageSource

> ID：11898588
> 
> 赞同：2
> 
> 时间：2012-08-10T09:11:40.023
> 
> 标签：wpf, image, code-behind, imagesource

我在 UserControl 中有 Property `ImageSource`。如何`ImageSource`在我的资源目录中将我的代码中的图像设置为图像？

我想将图像源绑定到属性`ImageSource`。

```
<Image Source="{Binding Path=ImageSource}" /> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-10T09:40:04.013

为了从代码中的资源文件创建[BitmapImage](http://msdn.microsoft.com/en-us/library/ms619218)（从 ImageSource 派生），您将执行以下操作，前提是该文件`MyImage.jpg`位于以`Images`您的 Visual Studio 项目命名的文件夹中，并且其`Build Action`设置为`Resource`：

```
var uri = new Uri("pack://application:,,,/Images/MyImage.jpg"); 
ImageSource = new BitmapImage(uri); // set the ImageSource property 
```

另请参阅[此答案](https://stackoverflow.com/a/11881612/1136211)。

* * *

您也可以不绑定直接使用图像资源：

```
<Image Source="/Images/MyImage.jpg" /> 
```

# batch-file - 搜索仅包含部分文件名的文件名

> ID：11898589
> 
> 赞同：2
> 
> 时间：2012-08-10T09:11:43.870
> 
> 标签：batch-file

我搜索了整个论坛，但找不到我要找的东西。我在一个文件夹中几乎没有文件，我只知道文件名的一部分。示例`stackoverflow_newuser_6.2.txt`和`stackoverflow_olduser_6.2.txt`。我知道文件名包含 olduser 和 newuser。

如何根据子字符串搜索文件。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-10T09:19:25.413

试试这个，假设窗口：

```
dir /s /b *newuser* 
```

或者，如果您需要对找到的文件名做一些有用的事情：

```
for /R %t in (*newuser*) do echo %~nt 
```

或使用完整路径

```
for /R %t in (*newuser*) do echo %t 
```

# jquery - jQuery - 如果悬停，则更改背景图像

> ID：11898592
> 
> 赞同：1
> 
> 时间：2012-08-10T09:11:51.263
> 
> 标签：jquery, html, css, hover, background-image

当您将鼠标悬停在 div 上时，我有一个 jQuery 代码可以完美运行。

```
$(function() {
    jQuery('#div-to-hover').hover(function(){
        jQuery('#my-background-image').css("background-image", "url(active.png)");
    });
}); 
```

我想更改它，以便当它悬停时，active.png 是背景图像。如果不悬停，则变为 normal.png。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-10T09:14:15.510

```
$(function() {
    jQuery('#div-to-hover').hover(function(){
        jQuery('#my-background-image').css("background-image", "url(active.png)");
    }, function(){
        jQuery('#my-background-image').css("background-image", "url(normal.png)");
    });
}); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-10T09:13:34.887

只需检查事件类型以查看悬停事件是 mouseover 还是 mouseout 事件。

```
$(function() {
    jQuery('#div-to-hover').hover(function(e){
        var path = (e.type == 'mouseover') ? 'active.png' : 'normal.png';
        jQuery('#my-background-image').css("background-image", "url("+path+")");
    });
}); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-10T09:14:26.713

当然，最好将 div 设置为始终具有背景`normal.png`并仅使用您当前的代码，而不是添加更多的 jQuery？

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-10T09:15:02.473

你可以在纯 CSS 中做同样的事情。

```
#my-background-image {
  background-image: url(normal.png);
} 

#div-to-hover:hover #my-background-image {
  background-image: url(active.png);      
} 
```

[http://jsfiddle.net/xyzzy/fjh5z/](http://jsfiddle.net/xyzzy/fjh5z/)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-10T09:25:16.967

完整示例和来源：http: [//jsfiddle.net/maho/6swag/](http://jsfiddle.net/maho/6swag/)

不要使用 javascript 直接内联样式元素。改用类。这样你就可以使用单独的 CSS 来设置它的样式，这要好得多。

# ios - UITableViewCell 框架高度不匹配 tableView:heightForRowAtIndexPath:

> ID：11898596
> 
> 赞同：7
> 
> 时间：2012-08-10T09:12:17.667
> 
> 标签：ios, objective-c, uitableview, reusability, heightforrowatindexpath

我正在构建一个具有可变高度自定义表格单元格的 UITableView，它们的高度由包含的多行 UILabel 的大小决定。我已经`tableView:heightForRowAtIndexPath:`连接了委托方法并使用`sizeWithFont:constrainedToSize:`.

我遇到了一个奇怪的问题：在`tableView:cellForRowAtIndexPath:`调用数据源方法时，已经如上所述确定了正确的每行高度，但是单元格的框架与该高度不匹配。相反，`frame.size.height`单元格的属性是表格视图的默认单元格高度（86 px，正如我在 Interface Builder 中设置的那样，包含的 UILabel 只有一行文本时的正确高度），而不是高度确定`tableView:heightForRowAtIndexPath:`该索引路径的正确性。

我正在`cellForRowAtIndexPath:`使用出队来生产单元格，也就是说，

```
// Using storyboards, this never returns nil, no need to check for it
CustomCell *cell = (CustomCell *)[tableView dequeueReusableCellWithIdentifier:@"SomeIdentifier"];
NSLog(@"%f", cell.frame.size.height); // 86, not correct if the cell contains a multi-line UILabel 
```

那么，无论 iOS 在幕后做什么，出队似乎都没有设置单元格的 frame 属性以匹配计算的高度。这本身并不令人惊讶，出队关注的是单元格实例，而不是它们的几何形状。但是，单元格被正确渲染，因此 height 属性被设置在**某处**，但它发生在`cellForRowAtIndexPath:`.

所以：当我最初填充表格视图时，`cell.frame.size.height`所有单元格都是 86，因为它们在我向下滚动列表时第一次出现。由于正确的几何图形是在`cellForRowAtIndexPath:`每行显示之前的第一个之后的某个时间设置的，因此当我向上滚动时，height 属性对于重用后返回视图的每个单元格都是正确的。

在此之后，我可以随意来回滚动表格视图，并且从那时起，每个单元格的高度属性保持正确。

在任何基于出队的重用发生之前，第一次获得正确单元格高度的正确方法是什么？我需要这个来重新定位表格单元格的子视图。我是否需要手动调用`heightForRowAtIndexPath:`，`cellForRowAtIndexPath:`然后手动设置新创建的 CustomCell 实例的框架以匹配该高度？这似乎是多余的，我需要创建一种机制来检测第一次创建单元时帧高度错误的时间与稍后以正确帧高度出列的时间，以避免这种冗余。

因此，如果有人可以阐明这背后的逻辑，我将不胜感激。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-10T13:12:04.700

As suggested by Flexo, answering this myself is apparently better than adding an edit to the question. So, here's the previous edit as an answer:

* * *

Nevermind, I should read the docs better. I can get the correct frame in the `tableView:willDisplayCell:forRowAtIndexPath:` method of `UITableViewDelegate`, so that is the correct place to do subview customization that relies on the correct frame being set, not `cellForRowAtIndexPath:`.

Interesting that the docs say this, though:

> After the `delegate` returns, the table view sets only the `alpha` and `frame` properties, and then only when animating rows as they slide in or out.

...since the correct frame is already there when this delegate method is called. But anyway, problem solved.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-04-15T07:20:24.957

不要忘记单元格是 a `UIView`，因此覆盖`layoutSubviews`也是获得正确框架和调整子视图大小/位置的有效方法。只是不要忘记打电话`[super layoutSubviews]`。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-04-05T08:19:30.757

`cell.layoutIfNeeded()`我发现最简单的方法就是在对单元进行任何设置之前打电话。这可以确保计算所有布局约束并设置框架。

# php - 与要求相反？

> ID：11898601
> 
> 赞同：2
> 
> 时间：2012-08-10T09:12:41.970
> 
> 标签：php

php 脚本是否有可能知道另一个脚本是否通过 require 或 require_once 调用它？

例如：

```
if scripta.php calls me do xyz;
if scriptb.php calls me do abc; 
```

*编辑：谢谢你们的建议。这更像是一个假设问题，而不是一个实际问题。我意识到我可以设置一个变量 $caller 并在我发出 require 语句时对其进行更新。我只是想知道在被调用的文件中是否有另一种方法可以做到这一点:)*

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-10T09:22:06.797

**如果您只想检查您的文件是否包含在内：**

`$_SERVER['SCRIPT_FILENAME']`将始终返回最初调用的脚本的文件名。（例如“start.php”）

该常量`__FILE__`将始终返回使用它的脚本的真实文件名。（例如“library.inc.php”）

所以你可以做这样的事情：

```
if ($_SERVER['SCRIPT_FILENAME'] !== __FILE__) {
    echo "script was included!";
}
else {
    echo "script was called directly!";
} 
```

**如果要区分文件的包含位置：**

```
$include_from = get_included_files();
if (count($include_from) > 1) {
    $include_from = $include_from[count($include_from)-2];
}
else {
    $include_from = $include_from[0];
}
switch ($include_from) {
    case __FILE__:
        // not included, called directly
        break;
    case "/path/to/scripta.php":
        // do abc
        break;
    case "/path/to/scriptb.php": 
        // do xyz
        break;
    default:
        // do other stuff
        break;
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-10T09:25:18.487

您可以按包含文件的顺序检索文件[`get_included_files()`](http://php.net/get_included_files)（返回文件名数组）。

*   执行的主文件始终是第 0 个元素。
*   如果您正在寻找包含当前文件的文件，那么最后一个元素就是您的候选者。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-10T09:26:47.607

我建议使用[get_included_files](http://fr2.php.net/get_included_files)（或`get_required_files`）：

```
if(in_array($my_file, get_included_files())
{
    // do something
} 
```

替换`$my_file`为您需要检查的文件。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-10T09:14:44.217

您可以使用[debug_backtrace()](http://www.php.net/manual/en/function.debug-backtrace.php)

例子：

如果您在包含的文件上使用 debug_backtrace() ：

```
array(1) {
    [0]=> array(3) {
        ["file"]=> string(71) "/home/index.php"
        ["line"]=> int(3)
        ["function"]=> string(7) "require"
    }
} 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-08-10T09:16:49.503

一种可能性是定义常量。

调用脚本：

```
define("SCRIPT_NAME", "script_a.php"); 
```

在被调用的脚本中：

```
if(defined("SCRIPT_NAME") && SCRIPT_NAME == "script_a.php") {
    // Do stuff
} 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-08-10T09:17:36.633

一个 require 没有别的，然后将代码剪断加载到调用 require 或 require_once 调用的确切位置。

如果您真的想知道确切的文件正在调用它，您可以在调用之前进行相对脏的操作并分配一个变量并在脚本内部检查它具有什么样的值

例如

```
$require_reference = "main.php";
require_once ("some_script.php"); 
```

现在在 some_script.php 你做这样的事情：

```
if (isset($require_reference) && $require_reference == "main.php")
{ 
    // dome something 
} 
```

这会起作用，但它真的很乱。也许你应该尝试重构你的设计

# c# - 在 C++ 中使用 C# 接口或在 C# 中使用 C++ 接口

> ID：11898602
> 
> 赞同：4
> 
> 时间：2012-08-10T09:12:43.230
> 
> 标签：c#, c++, interface, clr

我正在开发一个解决方案，其中我有一个 C++ 解决方案和 C# 解决方案必须使用的接口。我想知道：

在以下之间实现这一目标的最佳方法是什么：

*   我在 C++ 项目中使用的 AC# 接口
*   我将在我的 C# 项目中使用的 C++ 接口

您还可以告诉我我应该如何进行最佳解决方案吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-10T09:18:04.040

你的意思是托管C++？

在托管 c++ 的情况下，这很容易做到，只需将接口放在单独的项目（dll）中并从 c# 中引用它

如果你想对非托管 c++ 做同样的事情，事情就会变得困难

比您需要使用[COM](http://www.microsoft.com/com/default.mspx)、[PInvoke](http://msdn.microsoft.com/en-us/library/aa446536.aspx)或某种服务/套接字通信

希望这可以帮助

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-10T09:29:30.370

我从您的最后评论中看到您正在使用托管 C++，因此它是直截了当的，但我会留下这个回复。

C#（构建 COM 类）：

```
[Guid("69432320-04B6-3233-928F-FD8583232C880")]
public interface MyInterface
{
   [DispId(1)]
   void Method1 (string name);
}

MyInterface myInterface = (MyInterface )new ConcreateClassImplementingInterface (); 
```

本机 C++：

```
MIDL_INTERFACE("69432320-04B6-3233-928F-FD8583232C880") //note: same guid
{
  public:
     virtual Method1 (BSTR name);
} 
```

这绝不是完整的，但希望能让您了解所涉及的内容和一些关键术语。

# java - response.sendRedirect 不跟踪 ip

> ID：11898605
> 
> 赞同：0
> 
> 时间：2012-08-10T09:13:07.303
> 
> 标签：java, jsp, servlets, response.redirect

我使用以下语法将 login.jsp 重定向到 index.jsp：

```
response.sendRedirect("index.jsp"); 
```

当我在 localhost:8080 上访问时，在服务器上测试它工作正常的应用程序。当我从另一台 PC 远程浏览时，我需要重定向的服务器地址（如 xxx.xxx.xxx.xxx:8080）将我发送到 localhost:8080/index.jsp 本地计算机上当然不存在. 如果我写类似

```
response.sendRedirect("xxx.xxx.xxx.xxx:8080/index.jsp"); 
```

然后浏览器会丢失我不想要的会话变​​量。如何解决这个问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-10T09:20:08.310

尝试使用 requestDispatcher.forward() 而不是 response.sendRedirect()..

这将工作...

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-10T09:15:00.097

尝试这个

```
response.sendRedirect("/yourWebContext/index.jsp"); 
```

这会起作用

> xxx.xxx.xxx.xxx:8080/index.jsp

失去会话可能是因为浏览器没有发送它收到的具有不同域名的 cookie

# c# - 从 WCF 服务运行时，我的控制台程序的文本文件在哪里？

> ID：11898608
> 
> 赞同：0
> 
> 时间：2012-08-10T09:13:15.097
> 
> 标签：c#, wcf, process

我需要从我的 WCF REST Web 服务运行一个没有任何源代码（我只有二进制文件）的控制台应用程序。一旦我的服务启动并运行（本地主机，调试），我输入以下代码：

```
Process p = new Process();
p.StartInfo.UseShellExecute = false;
p.StartInfo.RedirectStandardOutput = true;
p.StartInfo.CreateNoWindow = true;
p.StartInfo.FileName = strCommand;
p.StartInfo.Arguments = strCommandParameters;
p.Start();
string output = p.StandardOutput.ReadToEnd();
p.WaitForExit(); 
```

找到了我的**.exe**文件，但没有任何反应。我在这段代码之后放了一个断点，它停在那里，所以代码被执行了。无论命令参数发生什么，控制台应用程序都应该在其目录中至少生成一个**log.txt**文件，但它没有。有任何想法吗？

**编辑：**它*正在*工作......唯一的区别是**log.txt**文件是在正在运行的 Web 应用程序的调试目录中生成的，而不是在控制台应用程序的目录中生成的。因此输出文件的相对路径是相对于服务器 Web 应用程序的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-10T09:17:18.010

我猜您是在 IIS 中托管 WCF 服务，并且控制台应用程序是使用没有足够权限的 AppPool 凭据启动的。您可以尝试使用[ProcessMonitor](http://technet.microsoft.com/en-us/sysinternals/bb896645.aspx)来监控 Service/ConsoleApp 并检查拒绝访问的消息

# c# - 将 SaveFileDialog 与 ClosedXML 一起使用

> ID：11898614
> 
> 赞同：1
> 
> 时间：2012-08-10T09:13:32.097
> 
> 标签：c#, excel, sharepoint-2010, path, savefiledialog

我试着告诉你我的问题。`ClosedXML`我有方法`SaveAs()`，但是当我使用时`SaveAs(string name)`，它会将我的 excel 文档保存到一些奇怪的文件夹中，并带有一些奇怪的路径。所以我决定使用`savefiledialog`让用户可以选择文件夹和文档名称。我该如何`savefiledialog`使用`closedXML`？

`SaveAs()`也有`SaveAs(Path path)`。我可以用吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-10T14:33:56.777

“奇怪”文件夹是您的应用程序运行所在的文件夹（因为您没有指定路径）。

如果需要，可以使用 SaveFileDialog 获取路径并将其传递给 SaveAs 方法。

```
 var saveFileDialog = new SaveFileDialog
                             {
                                 Filter = "Excel files|*.xlsx", 
                                 Title = "Save an Excel File"
                             };

    saveFileDialog.ShowDialog();

    if (!String.IsNullOrWhiteSpace(saveFileDialog.FileName))
        workbook.SaveAs(saveFileDialog.FileName); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-10-10T14:17:08.590

```
var saveFileDialog = new SaveFileDialog();
saveFileDialog.Filter = "Excel files|*.xlsx";

//serialVal is name of a variable, not necessary at all if you don't need a specific file name

saveFileDialog.FileName = serialVal; 
if (saveFileDialog.ShowDialog() == true)
{
    workbook.SaveAs(saveFileDialog.FileName);
    workbook.Dispose();
    return;
} 
```

# c# - EPPlus 生成的 Excel 电子表格

> ID：11898616
> 
> 赞同：2
> 
> 时间：2012-08-10T09:13:34.730
> 
> 标签：c#, epplus

对，这开始让我发疯，我有一个带有复选框的 asp:gridview，用户可以检查他/她想要导出到 excel 的哪些信息，当他们单击按钮时，执行下面的代码，现在你可以看到我在 gridview 等中为每一行做一个

如果选中了一行的复选框，我会去数据库执行一些信息，返回一个数据表，然后尝试将其值添加到 Epplus excel 电子表格中，但`foreach(datacolum)`它`foreach(DataRow)`不允许我使用

```
ws.Cells[1, iColumnCount] = c.ColumnName; as it says its read only? 
```

但是这个excel电子表格可能有1-10个不同的信息位，具体取决于检查了多少个复选框......有人可以帮助我，让我摆脱痛苦...... :(

这是我的完整代码

```
protected void BtnTest_Click(object sender, EventArgs e)
{
    bool ReportGenerated = false;

    FileInfo newFile = new FileInfo("C:\\Users\\Scott.Atkinson\\Desktop\\book1.xls");
    ExcelPackage pck = new ExcelPackage(newFile);
    foreach (GridViewRow row in gvPerformanceResult.Rows)
    {
        object misValue = System.Reflection.Missing.Value;
        CheckBox chkExcel = (CheckBox)row.FindControl("chkExportToExcel");
        if (chkExcel.Checked)
        {

            HyperLink HypCreatedBy = (HyperLink)row.FindControl("HyperCreatedBy"); //Find the name of Sales agent

            string CreatedBy = HypCreatedBy.Text;
            string Fname = HypCreatedBy.Text;
            string[] names = Fname.Split();
            CreatedBy = names[0];
            CreatedBy = CreatedBy + "." + names[1];

            WebUser objUser = new WebUser(CreatedBy, true);

            DataTable DT = new DataTable();
            LeadOpportunities objLeadOpportunities = new LeadOpportunities();
            DT = objLeadOpportunities.LoadPRCDetail("PRC", objUser.ShortAbbr, objUser.CanViewAllLead, ReportCriteria); // Load the information to export to Excel.

            if (DT.Rows.Count > 0)
            {
                ReportGenerated = true;
                //Add the Content sheet
                var ws = pck.Workbook.Worksheets.Add("Content");
                ws.View.ShowGridLines = true;

                int iRowCount = ws.Dimension.Start.Row; //Counts how many rows have been used in the Excel Spreadsheet
                int iColumnCount = ws.Dimension.Start.Column; //Counts how many Columns have been used.

                if (iRowCount > 1)
                    iRowCount = iRowCount + 2;
                else
                    iRowCount = 1;

                iColumnCount = 0;

                foreach (DataColumn c in DT.Columns)
                {
                    iColumnCount++;
                    if (iRowCount == 0)
                        ws.Cells[1, iColumnCount] = c.ColumnName;
                    else
                        ws.Cells[iRowCount, iColumnCount] = c.ColumnName;
                }

                foreach (DataRow r in DT.Rows)
                {
                    iRowCount++;
                    iColumnCount = 0;
                    foreach (DataColumn c in DT.Columns)
                    {
                        iColumnCount++;
                        if (iRowCount == 1)
                            ws.Cells[iRowCount + 1, iColumnCount] = r[c.ColumnName].ToString();
                        else
                            ws.Cells[iRowCount, iColumnCount] = r[c.ColumnName].ToString();

                        WorkSheet.Columns.AutoFit(); //Correct the width of the columns
                    }
                }

                pck.Save();
                System.Diagnostics.Process.Start("C:\\Users\\Scott.Atkinson\\Desktop\\book1.xls");

            }
        }
    }
} 
```

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2016-01-07T19:58:22.257

> 它不允许我使用 `ws.Cells[1, iColumnCount] = c.ColumnName;`

那行应该是：

```
ws.Cells[1,iColumnCount] .Value = c.ColumnName

```

> 但它现在落在 int iRowCount = ws.Dimension.Start.Row; //计算 Excel 电子表格中已使用的行数 int iColumnCount = ws.Dimension.Start.Column; //计算已经使用了多少列。有人可以帮我获取行数/列数吗？

该`.Dimension`属性给出了覆盖左上角单元格到右下角单元格的范围的地址，以便获得我们可以使用的行数：

```
var rowCount = ws.Dimension.End.Row - ws.Dimension.Start.Row + 1; 
```

同样对于列数：

```
var colCount = ws.Dimension.End.Column - ws.Dimension.Start.Column + 1; 
```

# jsf - 具有 Richfaces 和 MyFaces 的 JSF 项目中的 Pom 依赖关系

> ID：11898622
> 
> 赞同：1
> 
> 时间：2012-08-10T09:13:59.920
> 
> 标签：jsf, maven, richfaces, pom.xml, myfaces

我想用 MAVEN 构建一个 JSF 项目。我试图添加我需要的所有依赖项。每次我得到错误。

```
<dependencies>
    <dependency>
        <groupId>org.richfaces</groupId>
        <artifactId>richfaces-bom</artifactId>
        <type>pom</type>
        <version>4.2.2.Final</version>
    </dependency>
    <dependency>
        <groupId>org.apache.myfaces.core</groupId>
        <artifactId>myfaces-impl</artifactId>
        <version>2.0.2</version>
    </dependency>
    <dependency>
        <groupId>org.apache.myfaces.core</groupId>
        <artifactId>myfaces-api</artifactId>
        <version>2.0.2</version>
        <scope>compile</scope>
    </dependency>

</dependencies> 
```

我应该在这个 POM 中添加什么以便我的项目作为一个真正的 JSF 项目工作？

PS我添加了正确的richfaces依赖项。我在 websphere 上遇到了部署问题。

```
Caused by: javax.faces.FacesException: java.lang.UnsupportedOperationException
    at com.sun.faces.config.ConfigureListener.contextInitialized(ConfigureListener.java:387)
    at com.ibm.ws.webcontainer.webapp.WebApp.notifyServletContextCreated(WebApp.java:1651)
    at com.ibm.ws.webcontainer.webapp.WebAppImpl.initialize(WebAppImpl.java:410)
    at com.ibm.ws.webcontainer.webapp.WebGroupImpl.addWebApplication(WebGroupImpl.java:88)
    at com.ibm.ws.webcontainer.VirtualHostImpl.addWebApplication(VirtualHostImpl.java:169)
    ... 17 more
Caused by: java.lang.UnsupportedOperationException
    at com.sun.faces.config.ConfigureListener$ApplicationMap.entrySet(ConfigureListener.java:1948) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-10T09:17:55.507

您正在使用的 Richfaces 依赖项只是一个`bom`- 它列出了一组兼容的“真实”依赖项，应该在`dependencyManagement`您的部分中使用`pom`：

```
 <dependencyManagement>
    <dependencies>
      <dependency>
        <groupId>org.richfaces</groupId>
        <artifactId>richfaces-bom</artifactId>
        <version>4.2.2.Final</version>
        <type>pom</type>
      </dependency>
    </dependencies>
</dependencyManagement> 
```

在依赖项中，您应该有实现，如下所示：

```
<dependencies>
  <dependency>
    <groupId>org.richfaces.ui</groupId>
    <artifactId>richfaces-components-ui</artifactId>
    <!--version>4.2.2.Final</version-->
  </dependency>

  <dependency>
    <groupId>org.richfaces.core</groupId>
    <artifactId>richfaces-core-impl</artifactId>
    <!--version>4.2.2.Final</version-->
  </dependency>
<dependencies> 
```

如果您使用的是`bom`. 您最好删除它，因为您可能不情愿地覆盖该`bom`设置。

**编辑：**你得到的错误对我来说看起来像是一个配置问题。不确定是什么原因造成的。我的建议是从一个有效的 webapp 示例开始，然后添加其他依赖项。我最喜欢的方法是让 maven geneare 成为原型的 webapp：

`mvn archetype:generate`

然后，您将看到一长串可能的原型。尝试其中包含 JSF 的内容，例如`jsf-weld-servlet-webapp`or`weld-jsf-jee`或`richfaces-archetype-simpleapp`。这些都是已知的，您可以`pom`对项目的其余部分进行抽样，以查看可能缺少的内容。

# javascript - 获取域名后的部分 URL //... 通过将 URL 拆分为数组

> ID：11898626
> 
> 赞同：17
> 
> 时间：2012-08-10T09:14:05.750
> 
> 标签：javascript, jquery, arrays

我已经制作了这段代码：

```
var newURL = $(".list-portfolio a").attr("href"),
    pathArray = newURL.split( '/' ),
    secondLevelLocation = pathArray[0];
console.log(pathArray);

    var pathArray = pathArray[3, 4]; 
```

pathArray 值为`["http:", "", "www.mikevierwind.nl", "portfolio", "ruimzicht.html"]`

我怎样才能得到这个数组的最后两项。我希望结果是投资组合/ruimzicht.html。

* * *

## 回答 #1

> 赞同：51
> 
> 时间：2012-08-10T09:34:30.753

您不需要任何这些，您只需要`window.location.pathname`：

```
> window.location.pathname
"/questions/11898626/get-items-of-the-array/11898963" 
```

这将使您将来拥有“portfolio/2012/ruimzicht.html”之类的目录，并将域更改为“www.mikevierwind.???” 无需更改您的代码。

* * *

如果您当前不在域中（并且无法执行上述操作），则可以使用单行符按照自己的方式进行操作：

```
> pathArray.slice(-2).join('/')
"portfolio/ruimzicht.html" 
```

但这不像上面那样是面向未来的。为了使其面向未来，您可以执行以下操作：

```
> url.split(document.domain)[1].slice(1)
"portfolio/2012/ruimzicht.html" 
```

当您当前不在域中时，通常会在外国 URL 上执行此操作，因此无法执行此操作`window.location.pathname`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-10T09:21:33.040

如果您没有固定大小或元素数量，则可以使用数组长度。

```
var path = array[array.length-2]+'/'+array[array.length-1]; 
```

如果您只想要路径，请使用他们在评论中建议的普通 JS 或 jQuery。

```
//Plain JS
var path = window.location.pathname;
//jQuery
$(location).attr('pathname'); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-10T09:17:13.307

你可以试试这个

```
var newURL = $(".list-portfolio a").attr("href"),
    pathArray = newURL.split( '/' ),
    secondLevelLocation = pathArray[0];
console.log(pathArray);

var pathArray = pathArray[3] +'/'+ pathArray[4]; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-10T09:22:50.950

或者可能是这样的

```
var newURL = $(".list-portfolio a").attr("href"),
pathArray = newURL.split( '/' ),
secondLevelLocation = pathArray.shift();

var pathArray = pathArray.join('/'); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2019-11-26T07:53:44.333

尝试这个

```
console.log(new URL(document.URL)); 
```

你会得到 URL 的对象

# python - 简码 SMS 活动 - Python

> ID：11898627
> 
> 赞同：0
> 
> 时间：2012-08-10T09:14:05.973
> 
> 标签：python, sms, shortcode

我已经构建了一个应用程序来处理短号码的传入短信。我们可能同时运行多个广告系列，每个广告系列都有不同的机制和关键字等。

目前我正在使用 Django 来处理这个问题。

我最担心的问题是，正在使用服务的消费者是南非一个非常低的 LSM 市场。短信进来的方式很奇怪，我收到了很多错误的条目。

我试图重新思考解释短信的方式，并想要一些想法。

目前它基本上是这样工作的：

获取短信，我将其拆分为 ' 或 * 然后首先查找关键字。所有广告系列都有关键字，我浏览了一个实时广告系列关键字列表，以查看消息中是否存在匹配项。然后我继续拆分消息并在需要时比较或查找更多单词。我需要根据消息进行回复，例如 KEYWORD 存在，但不是第二个或第三个或任何参数。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2016-04-11T23:59:10.390

来自 Twilio 的梅根在这里。

您可能使用也可能不使用 Twilio[短代码](https://www.twilio.com/help/faq/short-codes/how-can-i-apply-to-migrate-my-live-short-code-to-twilio)。但我认为您的问题与我们关于[如何构建 SMS 关键字响应应用程序](https://www.twilio.com/help/faq/sms/how-do-i-build-a-sms-keyword-response-application)的小指南有关。

该示例在 PHP 中，但您可以在此处开始使用[Python](https://www.twilio.com/docs/python/install)，您的代码可能如下所示：

```
def sms():
  r = twiml.Response()
  body = request.form['Body']

  if KEYWORD in body: 
  //do some action 
```

# php - 封锁IP地址一段时间。

> ID：11898629
> 
> 赞同：1
> 
> 时间：2012-08-10T09:14:15.513
> 
> 标签：php, security, yii

如果 uer 多次验证失败 (15~20) ，我如何在规定的时间限制内阻止用户 IP 地址。这是为了防止暴力攻击而实施的。

我必须在 yii 中实现这一点。我尝试在控制器中使用 php 标头函数实现，但没有成功。另外设置时间限制怎么样，如何设置块的时间限制？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-10T09:18:29.337

我不知道yii，我只是给出基本逻辑。在数据库中保存访问者的 IP 地址，以及他们访问该站点的次数。如果这个 IP 地址访问了 20 次以上，则重定向到某个错误页面。例子

```
$ipaddress=$_SERVER['REMOTE_ADDR'];

$sql="SELECT number_of_tries FROM table where ip_address='$ipaddress'";
//lets say from above query the value comes -
$number_of_tries=20; // this comes from database 
if($number_of_tries>20){
   header("location: forbidden.php");
   exit;
} 
```

您还可以将日期时间与 IP 地址一起保存。并在上面的查询中将当前日期与数据库中的日期进行比较，然后重定向。

希望这可以帮助

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-10T13:38:31.217

正如评论中所建议的那样，我会使用 Yii 的“ [onBeginRequest](http://www.yiiframework.com/doc/api/1.1/CApplication#onBeginRequest-detail) ”事件来启动此检查并在需要时阻止调用者，就像这样（只是一个例子）：

```
'onBeginRequest' => array('YourClass', 'staticMethod'), 
```

这可以通过编辑 main.php 主配置文件来调用类中的静态方法来进行检查并在需要时阻止请求来实现。这就是我在我正在从事的基于 Yii 的项目中执行此操作的方式，以实现我所拥有的一些监控要求。调用此方法时，您可以使用 Yii 的所有内部组件。

如果您需要知道发件人的 IP 地址，我建议使用比 _SERVER['REMOTE_ADDR'] 更强大的东西，例如使用[PcMaxmindGeoIp](http://www.yiiframework.com/extension/pcmaxmindgeoip/)扩展中的*getRemoteIpAddress* () 。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-10T17:51:47.860

你应该试试：

[http://denyhosts.sourceforge.net/](http://denyhosts.sourceforge.net/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-10T09:17:01.973

前言：我不知道yii框架，如果这是错误的树，很高兴删除答案。

为什么不将有问题的 IP 存储在数据库表中（连同一个“过期”时间，表示 IP 在该时间过去之前无法登录），该表在登录时进行检查。成功登录后，您可以删除有问题的 IP 地址。

# android - AndroidHttpClient 中的 SSLException

> ID：11898634
> 
> 赞同：2
> 
> 时间：2012-08-10T09:14:36.083
> 
> 标签：android, sslexception

我正在使用 AndroidHttpClient 通过 https 连接到我的服务器。证书没问题，但有时在互联网连接不佳时会引发异常。网址始终相同。

```
I/ActivityManager(  300): Displayed ru.mw.android/.FavouritesActivity: +387ms
W/System.err( 2045): javax.net.ssl.SSLException: SSL handshake aborted: ssl=0x5c02f980: I/O error during system call, Connection reset by peer
W/System.err( 2045):    at org.apache.harmony.xnet.provider.jsse.NativeCrypto.SSL_do_handshake(Native Method)
W/System.err( 2045):    at org.apache.harmony.xnet.provider.jsse.OpenSSLSocketImpl.startHandshake(OpenSSLSocketImpl.java:395)
W/System.err( 2045):    at android.net.SSLCertificateSocketFactory.verifyHostname(SSLCertificateSocketFactory.java:189)
W/System.err( 2045):    at android.net.SSLCertificateSocketFactory.createSocket(SSLCertificateSocketFactory.java:332)
W/System.err( 2045):    at org.apache.http.conn.ssl.SSLSocketFactory.createSocket(SSLSocketFactory.java:375)
W/System.err( 2045):    at org.apache.http.impl.conn.DefaultClientConnectionOperator.openConnection(DefaultClientConnectionOperator.java:165)
W/System.err( 2045):    at org.apache.http.impl.conn.AbstractPoolEntry.open(AbstractPoolEntry.java:164)
W/System.err( 2045):    at org.apache.http.impl.conn.AbstractPooledConnAdapter.open(AbstractPooledConnAdapter.java:119)
W/System.err( 2045):    at org.apache.http.impl.client.DefaultRequestDirector.execute(DefaultRequestDirector.java:360)
W/System.err( 2045):    at org.apache.http.impl.client.AbstractHttpClient.execute(AbstractHttpClient.java:555)
W/System.err( 2045):    at org.apache.http.impl.client.AbstractHttpClient.execute(AbstractHttpClient.java:487)
W/System.err( 2045):    at org.apache.http.impl.client.AbstractHttpClient.execute(AbstractHttpClient.java:465)
W/System.err( 2045):    at android.net.http.AndroidHttpClient.execute(AndroidHttpClient.java:252) 
```

# python - __LP64__ 在 OSX 上编译 Python.framework 时检查？

> ID：11898635
> 
> 赞同：2
> 
> 时间：2012-08-10T09:14:37.183
> 
> 标签：python, macos, compilation

我正在针对 10.6 SDK 在 MacOSX 上从源代码构建 Python。我正在使用 --with-universal-archs="intel" 和 --enable-framework 应该创建一个与 32 位和 64 位架构兼容的框架。但是，我对照编译的框架检查了 Apple 提供的框架，我有一些不同之处。这个特别是破坏了我正在尝试安装的软件包之一：

我编译的框架中的 pyconfig.h 显示：

```
/* The size of `uintptr_t', as computed by sizeof. */
#define SIZEOF_UINTPTR_T 8 
```

它应该显示以下内容：

```
/* The size of `uintptr_t', as computed by sizeof. */
#ifdef __LP64__
#define SIZEOF_UINTPTR_T 8
#else
#define SIZEOF_UINTPTR_T 4
#endif 
```

关于如何重新创建 Apple 提供的 Python.framework 的任何想法？

# c++ - 在数据库中保存类信息

> ID：11898637
> 
> 赞同：0
> 
> 时间：2012-08-10T09:14:38.767
> 
> 标签：c++, wt

我有几个类（相同的基类），只有一些用户允许实例化一些。我需要为数据库中的用户保留允许的类。

我肯定需要一些建议。因为我认为，我不需要在数据库中将类名列表作为字符串并在字符串比较的条件下实例化它们。我只是觉得不对劲。

典型场景是
1\. 调用 GetAllowedClassesToInstantiate(user) [From Database]
2\. 实例化这些类

你有什么建议吗？

问候， 布拉克

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-10T09:23:02.523

制作这样的数据结构：

```
class BaseClass;

std::map<std::string, std::function<BaseClass*()> Factories; 
```

并按以下方式对其进行初始化：

```
class One : BaseClass { ... }

void init() {
    Factories["One"] = [](){ return new One(); }
} 
```

基本上它将用作查找`ClassName -> Constructor`。

在数据库中保留允许的类名。检索后，将其呈现给用户，当他选择一个选项时，在其中查找正确的构造函数包装函数`Factories`并使用它来实例化所选类。

确保使用 中的条目键使数据库条目保持最新`Factories`。

*（我在代码示例中使用了一些 C++11。您可以在 C++03 中使用更多代码执行相同操作，无需 lambda 表达式和`std::function`，但想法保持不变。）*

# perl - 如何从某个位置的字符串中删除字符？

> ID：11898641
> 
> 赞同：4
> 
> 时间：2012-08-10T09:14:56.543
> 
> 标签：perl, substring

我有变量`$pos`和。我想从这个字符串中删除position 。`$toRemove``$line``$toRemove``$pos`

```
$line = "Hello kitty how are you kitty kitty nice kitty";
$toRemove = "kitty";
$pos = 30; # the 3rd 'kitty' 
```

我想检查位置 30 是否有字符串`kitty`，我想删除这个字符串。

你能给我一个解决方案吗？我可以使用很多循环和变量来做到这一点，但它看起来很奇怪，而且工作起来很慢。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-10T09:20:32.510

```
if (substr($line, $pos, length($toRemove)) eq $toRemove) {
    substr($line, $pos, length($toRemove)) = "";
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-10T09:21:55.553

```
$line = "Hello kitty how are you kitty kitty nice kitty";
$toRemove = "kitty";
$pos = 30; # the 3rd 'kitty'

pos($line) = $pos;
$line =~ s/\G$toRemove//gc;
print $line; 
```

输出：

```
Hello kitty how are you kitty  nice kitty 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-10T10:14:25.627

```
$line =~ s/^.{30}\K$toRemove//; 
```

这使用后向断言来匹配前 30 个字符，而不将它们包含在被替换的模式部分中。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-08-10T09:25:22.523

还有一种方式：

```
$line = "Hello kitty how are you kitty kitty nice kitty";
$toRemove = "kitty";
$pos = 30;

$line =~ s/(.{$pos})$toRemove/$1/;
print $line; 
```

结果：

```
Hello kitty how are you kitty  nice kitty 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-08-12T02:40:01.933

The [`pos`][pos] operator is an lvalue for just this sort of thing:

[pos]:

```
use strict;
use warnings;

my $line = "Hello kitty how are you kitty kitty nice kitty";
my $toRemove = "kitty";
my $pos = 30;

pos($line) = $pos;

$line =~ s/\G$toRemove//;

print $line; 
```

**output**

```
Hello kitty how are you kitty  nice kitty 
```

# android - 将实时视频流式传输到 Android

> ID：11898643
> 
> 赞同：21
> 
> 时间：2012-08-10T09:15:00.410
> 
> 标签：android, video-streaming, http-live-streaming, android-video-player

如何将实时视频流式传输到 Android（2.1 及更高版本），我有两个链接：`m3u8`和`f4m`（据我所知，不支持 f4m）。

从我在 stackoverflow 上看到的内容来看，有一种方法可以使用 vitamio 流式传输 m3u8（但链接不起作用）。

有没有其他方法可以流式传输 m3u8 视频？也许我可以使用其他格式？

谢谢。

* * *

## 回答 #1

> 赞同：37
> 
> 时间：2012-08-11T07:46:31.450

因为没有人回答我的问题，所以我会自己做。

如果您想在 Android 2.1 及更高版本上执行 HLT（HTTP Live Stream），您可以使用 vitamio 库。

网址：（[http://www.vitamio.org/](http://www.vitamio.org/)）。

这是代码示例：主要布局：

```
<?xml version="1.0" encoding="utf-8"?>

<LinearLayout android:id="@+id/LinearLayout01"
            android:layout_height="fill_parent"         xmlns:android="http://schemas.android.com/apk/res/android"
            android:paddingLeft="2px" android:paddingRight="2px"
            android:paddingTop="2px" android:paddingBottom="2px"
            android:layout_width="fill_parent" android:orientation="vertical">

            <io.vov.vitamio.widget.VideoView
                 android:layout_height="fill_parent"
                 android:layout_width="fill_parent" android:id="@+id/VideoView">               
            </io.vov.vitamio.widget.VideoView>
</LinearLayout> 
```

班上：

```
import io.vov.vitamio.widget.MediaController;
import io.vov.vitamio.widget.VideoView;
import android.app.Activity;
import android.content.Intent;
import android.net.Uri;
import android.os.Bundle;

public class LiveStrimingTestActivity extends Activity{

    VideoView videoView;

    private void test_2(){
        String httpLiveUrl = "http://aj.lsops.net/live/aljazeer_en_high.sdp/playlist.m3u8";   
        videoView = (VideoView) findViewById(R.id.VideoView);
        videoView.setVideoURI(Uri.parse(httpLiveUrl));
        MediaController mediaController = new MediaController(this);
        videoView.setMediaController(mediaController);
        videoView.requestFocus();
        videoView.start();
    }

    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);
        test_2();             
    }     
} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-08-28T10:26:55.313

我已经在 OS 2.2、2.3.4 和 4.0.4 的设备上测试了相同的流。此流在我拥有的设备上与常规 VideoView 一起播放得非常好。我不将 MediaController 与实时流一起使用。其余的代码很简单。

```
initializeVideoView();
mVideoView.setVideoURI(Uri.parse("http://aj.lsops.net/live/aljazeer_en_high.sdp/playlist.m3u8"));
mVideoView.setMediaController(null);
mVideoView.start(); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-09-19T09:05:18.290

[KickFlip](https://kickflip.io)是一个开源和免费的视频流库，设置起来非常简单。

```
Kickflip.initWithApiKey(API_KEY, API_SECRET);
Kickflip.startBroadcastActivity(this, mBroadcastListener); 
```

尝试这个。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2018-02-20T09:13:59.727

要将 vitamio 添加到您的项目中，只需添加此依赖项。编译 'me.neavo:vitamio:4.2.2' 然后像@butter 告诉你的那样。快乐编码。祝你好运

# java - 无论操作系统如何，在 Java 中执行计划任务的最佳解决方案是什么？

> ID：11898647
> 
> 赞同：8
> 
> 时间：2012-08-10T09:15:09.630
> 
> 标签：java, service, cron, scheduled-tasks

我想在我的 Java 桌面应用程序上生成警报：

*   使用特定日期/时间设置的警报，可以在 5 分钟或 5 个月内
*   触发警报时，我需要能够创建 SWT 应用程序
*   我需要它才能在任何操作系统上工作。软件用户可能会有 Windows（其中 90%），其余的 Mac OS（包括我）
*   软件许可证必须允许我在商业程序中使用它，而不需要开源它（因此，没有 GPL）
*   我不能要求用户安装 Cygwin，所以实现需要原生于 Windows 和 Unix

我正在使用 Java、Eclipse、SWT 进行开发，我的应用程序是使用 Java Web Start 从我的服务器部署的。我正在使用 Mac OS X.6 进行开发。

* * *

我想我有几个选择：

1.  在启动时运行我的应用程序，并自己处理所有事情；
2.  使用系统服务。
3.  在 Unix 上使用 cron 表，在 Windows 上使用计划任务

* * *

# 在启动时运行

我真的不喜欢这个解决方案，我希望有更优雅的东西。
Refs:[我想在 Mac OS/Windows 上的 System Startup 上运行我的 Java 程序。我怎样才能做到这一点？](https://stackoverflow.com/questions/2949649/i-would-like-to-run-my-java-program-on-system-startup-on-mac-os-windows-how-can)

# 系统服务

如果我将它作为系统服务运行，我可以从中受益，因为操作系统将确保我的软件：

*   一直在运行
*   没有/不需要 GUI
*   失败时重新启动

我研究了一些我可以使用的资源：

*   [run4j](http://winrun4j.sourceforge.net/) — CPL — 仅在 Windows 上运行，似乎是一个有效的候选者
*   [jsvc](http://commons.apache.org/daemon/jsvc.html) — Apache 2.0 — 仅适用于 Unix，似乎是一个有效的候选者
*   [Java Service Wrapper](http://wrapper.tanukisoftware.com/doc/english/licenseOverview.html) — 各种 — 我买不起付费许可证，而免费的是 GPL。因此，我不想/不能使用这个

我在系统服务选项中的问题是：

1.  还有其他选择吗？
2.  我计划的实施是否正确：

    *   在应用程序启动时，检查服务是否存在
    *   如果未安装：
        *   升级用户以安装服务（Unix 上的 root，Windows 上的 UAC）
        *   如果主机操作系统是 Windows，请使用 run4j 注册服务
        *   如果主机操作系统是 Unix，使用 jsvc 注册服务
    *   如果它没有运行，启动它

因此，在第一次运行时，应用程序将安装服务并启动它。当应用程序关闭时，服务仍在运行，并且不再需要该应用程序，除非它未注册。
但是，我想我仍然怀念“启动时运行”功能。

我对吗？我错过了什么吗？

# cron / 任务计划程序

在 Unix 上，我可以轻松地使用 cron 表，而无需应用程序将用户升级为 root。我不需要处理重启、系统日期更改等。看起来不错。

在 Windows 上，我可以使用[Task Scheduler](http://support.microsoft.com/kb/308569)，甚至在命令行中使用[At](http://technet.microsoft.com/en-us/library/bb726974.aspx)或[SchTasks](http://technet.microsoft.com/en-us/library/cc725744.aspx)。这看起来不错，但我需要它从 XP 到 7 兼容，我不能轻易测试它。

* * *

那你会怎么做？我错过了什么？你有什么建议可以帮助我选择最好和最优雅的解决方案吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-01T11:22:27.347

Bicou：太好了，你分享了你的解决方案！

请注意，“schtasks.exe”有一些本地化问题，如果你想用它创建一个每日触发器，在英文 Windows 上你必须使用“daily”，在德文 Windows 上（例如）你有改为使用“täglich”。

为了解决这个问题，我`schtasks.exe`使用`/xml`-option 实现了调用，提供了一个我通过模板创建的临时 xml 文件。

创建此类模板的最简单方法是“手动”创建任务并使用任务管理 GUI 工具中的“导出”功能。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-10T09:44:21.593

在您列出的可用选项中，恕我直言，选项 3 更好。由于您只寻找执行应用程序的外部触发器，因此 CRON 或计划任务是比您列出的其他选项更好的解决方案。通过这种方式，您消除了应用程序的复杂性，并且您的应用程序不需要一直运行。它可以在外部触发，当执行结束时，您的应用程序将停止。因此，避免了不必要的资源消耗。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-16T11:49:58.887

这是我最终实施的：

```
public class AlarmManager {
    public static final String ALARM_CLI_FORMAT = "startalarm:";
    public static SupportedOS currentOS = SupportedOS.UNSUPPORTED_OS;

    public enum SupportedOS {
        UNSUPPORTED_OS,
        MAC_OS,
        WINDOWS,
    }

    public AlarmManager() {
        final String osName = System.getProperty("os.name");
        if (osName == null) {
            L.e("Unable to retrieve OS!");
        } else if ("Mac OS X".equals(osName)) {
            currentOS = SupportedOS.MAC_OS;
        } else if (osName.contains("Windows")) {
            currentOS = SupportedOS.WINDOWS;
        } else {
            L.e("Unsupported OS: "+osName);
        }
    }

    /**
     * Windows only: name of the scheduled task
     */
    private String getAlarmName(final long alarmId) {
        return new StringBuilder("My_Alarm_").append(alarmId).toString();
    }

    /**
     * Gets the command line to trigger an alarm
     * @param alarmId
     * @return
     */
    private String getAlarmCommandLine(final long alarmId) {
        return new StringBuilder("javaws -open ").append(ALARM_CLI_FORMAT).append(alarmId).append(" ").append(G.JNLP_URL).toString();
    }

    /**
     * Adds an alarm to the system list of scheduled tasks
     * @param when
     */
    public void createAlarm(final Calendar when) {
        // Create alarm
        // ... stuff here
        final long alarmId = 42;

        // Schedule alarm
        String[] commandLine;
        Process child;
        final String alarmCL = getAlarmCommandLine(alarmId);
        try {
            switch (currentOS) {
            case MAC_OS:
                final String cron = new SimpleDateFormat("mm HH d M '*' ").format(when.getTime()) + alarmCL;

                commandLine = new String[] {
                        "/bin/sh", "-c",
                        "crontab -l | (cat; echo \"" + cron + "\") | crontab"
                };
                child = Runtime.getRuntime().exec(commandLine);
                break;

            case WINDOWS:
                commandLine = new String[] {
                        "schtasks",
                        "/Create",
                        "/ST "+when.get(Calendar.HOUR_OF_DAY) + ":" + when.get(Calendar.MINUTE),
                        "/SC ONCE",
                        "/SD "+new SimpleDateFormat("dd/MM/yyyy").format(when.getTime()), // careful with locale here! dd/MM/yyyy or MM/dd/yyyy? I'm French! :)
                        "/TR \""+alarmCL+"\"",
                        "/TN \""+getAlarmName(alarmId)+"\"",
                        "/F",
                };
                L.d("create command: "+Util.join(commandLine, " "));
                child = Runtime.getRuntime().exec(commandLine);
                break;
            }
        } catch (final IOException e) {
            L.e("Unable to schedule alarm #"+alarmId, e);
            return;
        }

        L.i("Created alarm #"+alarmId);
    }

    /**
     * Removes an alarm from the system list of scheduled tasks
     * @param alarmId
     */
    public void removeAlarm(final long alarmId) {
        L.i("Removing alarm #"+alarmId);
        String[] commandLine;
        Process child;
        try {
            switch (currentOS) {
            case MAC_OS:
                commandLine = new String[] {
                        "/bin/sh", "-c",
                        "crontab -l | (grep -v \""+ALARM_CLI_FORMAT+"\") | crontab"
                };
                child = Runtime.getRuntime().exec(commandLine);
                break;

            case WINDOWS:
                commandLine = new String[] {
                        "schtasks",
                        "/Delete",
                        "/TN \""+getAlarmName(alarmId)+"\"",
                        "/F",
                };
                child = Runtime.getRuntime().exec(commandLine);
                break;
            }
        } catch (final IOException e) {
            L.e("Unable to remove alarm #"+alarmId, e);
        }
    }

    public void triggerAlarm(final long alarmId) {
        // Do stuff
        //...
        L.i("Hi! I'm alarm #"+alarmId);

        // Remove alarm
        removeAlarm(alarmId);
    }
} 
```

用法很简单。使用以下方法安排新警报：

```
final AlarmManager m = new AlarmManager();
final Calendar cal = new GregorianCalendar();
cal.add(Calendar.MINUTE, 1);
m.createAlarm(cal); 
```

像这样触发警报：

```
public static void main(final String[] args) {
    if (args.length >= 2 && args[1] != null && args[1].contains(AlarmManager.ALARM_CLI_FORMAT)) {
        try {
            final long alarmId = Long.parseLong(args[1].replace(AlarmManager.ALARM_CLI_FORMAT, ""));
            final AlarmManager m = new AlarmManager();
            m.triggerAlarm(alarmId);
        } catch (final NumberFormatException e) {
            L.e("Unable to parse alarm !", e);
        }
    }
} 
```

在 Mac OS X.6 和 Windows Vista 上测试。该类`L`是我的全局常量的助手`System.out.println`并`G`保存我的全局常量（这里，我的服务器上用于启动我的应用程序的 JNLP 文件）。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-10T09:48:10.763

您也可以尝试使用 Quartz [http://quartz-scheduler.org/](http://quartz-scheduler.org/)。它具有类似 CRON 的语法来安排作业。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-10T09:20:30.897

我相信你的情况是正确的。由于服务是系统特定的东西，恕我直言，您不应该使用通用包来涵盖所有服务，而是为每个系统提供特定的机制。

# html - Bootstrap 固定导航栏：padding-top 和 body 100%

> ID：11898648
> 
> 赞同：1
> 
> 时间：2012-08-10T09:15:13.700
> 
> 标签：html, css, twitter-bootstrap

对于客户，我必须做全屏网站，响应式设计。我正在使用带有固定导航栏的 Bootstrap，所以为了放置我的内容，我在正文中添加了一个 60px 的 padding-top。

这是我的问题：滚动条系统显示，因为我的身体有 100% 的高度和 60 像素的填充顶部。我可以使用“溢出：隐藏；”，但是如果我需要滚动页面，我就不能了。

你有解决方案吗 ？

谢谢！

编辑：这是想法： http: [//jsfiddle.net/StFca/](http://jsfiddle.net/StFca/) 在这种情况下，我希望隐藏滚动条，因为不需要它。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-10T10:55:19.360

您可以将属性添加到可以添加到内容的主容器中的新类或 id，而不是向正文添加填充`margin-top: 60px`，因此它看起来像这样：

```
#main-container {
    margin-top: 60px;
} 
```

这样，您可以通过将容器本身推离它而不是文档的主体来容纳您的导航栏，并且滚动条将消失。

# asp.net-mvc-3 - MVC 3 上传文件 - 控制器中的空文件

> ID：11898650
> 
> 赞同：0
> 
> 时间：2012-08-10T09:15:15.733
> 
> 标签：asp.net-mvc-3, c#-4.0, file-upload, asp.net-mvc-controller

我不知道我错过了什么，但我需要使用 C# MVC 3 上传文件。我按照 SO 中的说明进行操作，但文件始终为空。

这是我的实际测试代码：

**HTML**

```
@using (Html.BeginForm("Prc", "Upload", FormMethod.Post, new { enctype = "multipart/form-data" }))
{
   <input type="file" name="file" id="file" />
   <input type="submit" value="submit" />
} 
```

**控制器**

```
[HttpPost]
public ActionResult Prc(HttpPostedFile file)
{
    if (file != null && file.ContentLength > 0)
    {
        var filename = System.IO.Path.GetFileName(file.FileName);
        var path = System.IO.Path.Combine(Server.MapPath("~/Content/Images"), filename);
        file.SaveAs(path);            
     }

     return RedirectToAction("Index");
 } 
```

当我运行 Web 应用程序时，我附加了一个文件，然后单击提交。但是当我到达时`Controller`，`file`对象是`null`。总是`null`。我尝试了一个`XML`文件，一个`JPEG`文件和一个`GIF`文件，但没有一个起作用。

除了这些代码之外*，*我还应该配置其他东西吗？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-01T19:46:06.617

One more thing might trip you up.

Using asp.net mvc 3 razor, I was just surprised to discover that the **name** of the HttpPostedFileBase variable passed to the controller method must match the id and name of the file input tag on the the view. Otherwise asp.net passes null for the HttpPostedFileBase variable.

For example, if your file input looks like this: < input type="file" name="filex" id="filex" />

And your controller method looks like this: public ActionResult Uploadfile(HttpPostedFileBase filey)

You'll get NULL for the "filey" variable. But rename "filey" to "filex" in your controller method and it posts the file successfully.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-10T09:23:46.083

在 MVC 中，您需要使用`HttpPostedFileBase`而不是`HttpPostedFile`：

```
[HttpPost]
public ActionResult Prc(HttpPostedFileBase file)
{
    //...
} 
```

# javascript - 为什么自定义函数引用一直指向旧函数

> ID：11898651
> 
> 赞同：4
> 
> 时间：2012-08-10T09:15:30.193
> 
> 标签：javascript

我在“javascript 设计模式”中找到了这个示例，并与以下代码的行为相混淆

这段代码创建了一个自定义函数：

```
var scareMe = function () {
   alert("Boo!");
   scareMe = function () {
     alert("Double boo!");
  };
}; 
```

现在我们将它引用到另一个变量

```
var prank = scareMe; 
```

令人困惑的部分是，当我打电话给恶作剧时，它应该更新 scareMe，当我打电话给它时，它应该提醒“双重嘘声”，不是吗？

但结果是

```
prank(); // "Boo!"
prank(); // "Boo!" 
```

如果我检查了 scareMe 函数，它确实被重新定义了。

```
scareMe(); // Double boo! 
```

恶作剧只是对scareMe的引用，为什么有区别？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-10T09:23:04.303

`prank`不是对`scareMe`（这在 javascript 中是**不可能**的）的引用，它是对函数对象的引用。这两个变量独立地引用同一个函数。

该函数显式覆盖任何`scareMe`指向的内容。它不会`prank`以任何方式影响。

看这个：

```
scareMe = function() {
    alert("Double boo!");
}; 
```

这没有什么神奇之处，它会重新分配最近的`scareMe`变量，这恰好是全局变量。它不做任何其他事情。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-08-14T07:27:05.403

**`prank`指向原始函数，而不是`scareMe`.**

看这个例子：

```
var scareMe = 1;
var prank = scareMe;

scareMe = 2; 
```

你不会指望改变`scareMe`会改变`prank`，对吧？与功能完全相同。

```
var scareMe = function() { alert( 'Boo' ); };
var prank = scareMe;

scareMe = function() { alert( 'Double boo!' ); }; 
```

在这方面，整数和函数之间没有区别——`prank`保持不变，即使发生`scareMe`变化。`scareMe`从另一个函数内部改变并不会改变这个事实。

混淆可能来自于通常如何使用对象。改变原始函数并不常见，因为您可能会更改对象的属性。

```
var scareMe = { message: 'Boo' };
var prank = scareMe;

scareMe.message = 'Double boo!';

alert( prank.message );  // alerts 'Double boo!' 
```

这不是您在原始示例中对函数所做的事情。将变量更改为指向完全不同的函数不会更改另一个变量中的函数引用。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-10T09:38:58.163

的结果`scareMe();`取决于执行顺序。

如果你之前调用`scareMe();`过`prank();`，它会提醒`Boo!`并分配一个新的功能`scareMe`，所以下次你打电话时`scareMe();`，它会提醒`Double boo!`。

在你的情况下，它是一样的，你打电话`prank();`，它会提醒`Boo!`并分配一个新功能给`scareMe`，所以在那之后，如果你打电话`scareMe();`，它会提醒`Double boo!`。

# jquery - Jquery - 向表中添加额外的表行

> ID：11898654
> 
> 赞同：0
> 
> 时间：2012-08-10T09:15:53.807
> 
> 标签：jquery, html

我一直在尝试学习 JQuery，而这本书中的教程真的让我很难过。我已经稍微简化了它，所以我们正在处理最简单的元素/功能。我有这个表定义

```
<table id ="testtable">
<thead>
<th>Client Name</th>
<th>Appointment Dates</th>
</thead>
    <tbody id="tabledata">
        <tr>
        <td>Joe</td>
        <td>01/01/2012</td>
        </tr>
        <tr>
        <td>Joe</td>
        <td>01/01/2012</td>
        </tr>
        <!--@Html.Action("AppointmentData", new { id = Model })-->
    </tbody>
</table> 
```

我有一个按钮调用定义为的函数

```
<input type="button" value="test" onclick="OnSuccess();" /> 
```

我在这里有我的实​​际 Jquery

```
<script type="text/javascript">
function OnSuccess() {
        $("#tabledata").append("<tr><td>hello</td><td>world</td></tr>");
    }
</script> 
```

真正让我困惑的是无法执行的 Jquery 函数。我可以用 .empty() 清空表，我什至可以执行以下操作：

```
$("#tabledata").append("<td>hello</td><td>world</td>") 
```

它会附加数据，但我一生都无法弄清楚为什么它不会附加一行。我收到的 Chrome 调试器错误消息是**"Uncaught TypeError: object is not a function"**。这仅在我开始添加表格行标签时发生。

**编辑：**

原来我本地的 jQuery 库的行为很奇怪，也许是我不小心修改了它？一旦我引用了谷歌托管库，它就起作用了

```
 <script type="text/javascript" src="//ajax.googleapis.com/ajax/libs/jquery/1.2.6/jquery.min.js"></script>
 <script type="text/javascript">
$(document).ready(function () {
    $('input[name="testButton"]').click(function () {
        alert('hi');
        $("#testtable tbody").append("<tr><td>hello</td><td>world</td></tr>");
    });
}); 
</script> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-10T09:26:50.497

`<td>`s（单元格）必须包裹在`<tr>`（行）中：

```
$("#tabledata").append("<tr><td>hello</td><td>world</td></tr>"); 
```

一些浏览器会为您执行此操作，但无论如何您都应该明确地包装它们。

* * *

如果您使用的是 jQuery，那么您应该真正绑定您的事件，而不是使用内联处理程序。例如，为您的按钮命名并在您的 JS 中引用它：

```
<input type="button" value="test" name="testButton" /> 
```

JavaScript：

```
$(document).ready(function() {
    $('input[name="testButton"]').click(function() {
        $("#tabledata").append("<tr><td>hello</td><td>world</td></tr>");
    });
}); 
```

`alert()`通过在匿名函数中放置一个来确保正在执行处理程序。还要确保你在一个`$(document).ready()`函数中执行你的 jQuery。`$`通过在开发人员控制台中键入内容，确保您实际上包含了 jQuery 。它不应该返回`undefined`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-10T09:25:56.313

好吧，试着写

```
$(tabledata).append("<tr><td>hello</td><td>world</td></tr>"); 
```

代替

```
$("#tabledata").append("<tr><td>hello</td><td>world</td></tr>"); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-10T09:30:46.037

Onclick 有些在 Chrome 中并不总是有效，所以这样做。
试试这个代码 [查看演示](http://codebins.com/bin/4ldqp8k)

```
$("#AddRow").click(function() {
    $("#tabledata").append("<tr><td>hello</td><td>world</td></tr>");
})

<table id ="testtable" border="1">
<thead>
<th>Client Name</th>
<th>Appointment Dates</th>
</thead>
    <tbody id="tabledata">
        <tr>
        <td>Joe</td>
        <td>01/01/2012</td>
        </tr>
        <tr>
        <td>Joe</td>
        <td>01/01/2012</td>
        </tr>
        <!--@Html.Action("AppointmentData", new { id = Model })-->
    </tbody>
</table>

<input type="button" value="test" id="AddRow" /> 
```

# c++ - enable_if 迭代器作为默认模板参数？

> ID：11898657
> 
> 赞同：5
> 
> 时间：2012-08-10T09:16:05.560
> 
> 标签：c++, templates, c++11, sfinae, enable-if

我有一个这样的构造函数：

```
class MyClass
{
    template<class TI> MyClass(TI first, TI last);
};

template<class TI> MyClass::MyClass(TI first, TI last)
{
    ;
} 
```

我只想在 TI 是一个迭代器时启用这个构造函数（这意味着我认为 TI 有一个 iterator_category）。如何在 C++ 2011 中使用 enable_if 作为默认模板参数（在声明和定义中）？

非常感谢。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-08-10T09:41:35.660

这取决于你想要什么。如果没有其他重载，则什么都没有也*可以*。如果传递的类型未提供必要的操作，编译器将产生错误。

如果您真的想将其限制为迭代器，最好使用 a 这样做`static_assert`，因为它会产生一个带有很好的自定义错误消息的错误，而不是“模棱两可的函数调用，这是我能找到的所有海量重载：*跟随无穷列表重载*”或“找不到函数，自己找”。

如果存在另一个冲突的模板化重载，那么您确实需要一些 enable_if 东西。我写了一篇关于[将 enable_if 与 C++11 特性结合使用](https://rmf.io/cxx11/almost-static-if/)的博客文章，以及为什么默认模板参数对此不是很好。我解决了这样的问题：

```
enum class enabler {};

template <typename Condition>
using EnableIf = typename std::enable_if<Condition::value, enabler>::type;

class MyClass
{
    template<class TI, EnableIf<is_iterator<TI>>...> MyClass(TI first, TI last);
};

template<class TI, EnableIf<is_iterator<TI>>...> MyClass::MyClass(TI first, TI last)
{ /* blah */ } 
```

您现在需要的只是测试的特征。我认为测试是否存在`iterator_category`就足够了，但应该使用 来完成`std::iterator_traits`，因为指针是迭代器并且没有嵌套的 typedef。

这可以通过使用 SFINAE 的常用技术来完成。使用 C++11，我执行以下操作：

```
template <typename T>
struct sfinae_true : std::true_type {};

struct is_iterator_tester {
    template <typename T>
    static sfinae_true<typename std::iterator_traits<T>::iterator_category> test(int);

    template <typename>
    static std::false_type test(...);
};

template <typename T>
struct is_iterator : decltype(is_iterator_tester::test<T>(0)) {}; 
```

综上所述，这可以通过使用默认函数参数的传统技术来完成：

```
class MyClass
{
    template<class TI>
    MyClass(TI first, TI last,
            typename std::iterator_traits<T>::iterator_category* = nullptr)
};

template<class TI>
MyClass::MyClass(TI first, TI last,
                 typename std::iterator_traits<T>::iterator_category*)
{ /* blah */ } 
```

# c# - KeyPressEvent 出现错误

> ID：11898660
> 
> 赞同：1
> 
> 时间：2012-08-10T09:16:14.150
> 
> 标签：c#, asp.net

当我使用`KeyPress(object sender,KeyPressEventArgs e)`方法时，它显示以下错误：

> 找不到类型或命名空间名称“KeyPressEventArgs”（您是否缺少 using 指令或程序集引用？）。

它的名称空间是什么

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-10T09:22:11.873

`KeyPressEventArgs`是一`Systems.Windows.Forms`类。它不适用于 Web 应用程序 - Web 文本框控件没有此事件（至少在服务器端）。

如果要处理网页中的按键事件，则需要在客户端的 Web 浏览器中使用 Javascript（或等效）进行此操作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-10T09:22:38.297

右键单击您的项目->**添加引用**，然后选择包含 keyPress 类的 dll。

在您使用该类的 .cs 文件中，您需要在文件顶部使用 using 导入引用的 dll，如下所示：

```
using System.Windows.Forms; 
```

此外，如果您的应用程序是基于 Web 的，您将无法执行此操作。最好为您检查一些 Javascript，看看 jQuery 库。

# php - php 我有一个评论系统将评论移近

> ID：11898661
> 
> 赞同：-1
> 
> 时间：2012-08-10T09:16:14.960
> 
> 标签：php, html, comments, echo, move

我有一个网站，您可以在其中显示您的 twitter 链接，人们可以关注您，我不希望这些帖子靠得更近，因为您可以看到它们相距太远，这是该网站[http://twitterdistrict.comuf.com/索引.php](http://twitterdistrict.comuf.com/index.php)

评论代码是这样的

```
<?php
require('connect.php');
$query=mysql_query("SELECT * FROM comment ORDER BY id DESC");
while($rows=mysql_fetch_assoc($query))
{
     $id=$rows['id'];
     $dname=$rows['name'];
     $dcomment=$rows['comment'];

     echo '<div id="username_word"><font color="red">username:</font></div>' ."<a href='$dname' id = 'name' style='color: #77cde6' STYLE='TEXT-DECORATION: NONE'>$dname</a>"."<div id ='dash'><font color='red'> - </font> </div>"."<div id='comment'>$dcomment</div>" 
  ."<div id='followbtn'><a href='$dname'><img src='http://i45.tinypic.com/2yltzkg.png' width ='30px' height ='30px' border='0' alt='follow'></div></a>" ;    

     }
?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-10T09:47:34.313

我建议代码：

```
<?php
require('connect.php');
$query=mysql_query("SELECT * FROM comment ORDER BY id DESC");
while($rows=mysql_fetch_assoc($query))
{
     $id=$rows['id'];
     $dname=$rows['name'];
     $dcomment=$rows['comment'];
?>
<div id="username_word"><font color="red">username:</font></div><a href="<?php echo $dname; ?>" id="name" style="color: #77cde6" STYLE="TEXT-DECORATION: NONE"><?php echo $dname; ?></a><div id="dash"><font color="red"> - </font> </div><div id="comment"><?php echo $dcomment; ?></div><div id="followbtn"><a href="<?php echo $dname; ?>"><img src="http://i45.tinypic.com/2yltzkg.png" width ="30px" height ="30px" border="0" alt="follow"></div></a>
<?php
 }
?> 
```

我用简单的 HTML 替换了 echo。`echo`通过在 HTML 代码中使用将值插入到 HTML 中。

# java - “log4j：错误找不到键 log4j.appender.SQL_APPENDER 的值”背后的可能原因是什么

> ID：11898663
> 
> 赞同：6
> 
> 时间：2012-08-10T09:16:21.083
> 
> 标签：java, web-applications, log4j, tomcat7, pom.xml

我想知道为什么在部署我的 Web 应用程序时会出现此错误。

```
log4j: Error Could not find value for key log4j.appender.SQL_APPENDER 
```

这是我的`log4j.properties`文件。

```
log4j.rootLogger=error, stdout

log4j.appender.stdout=org.apache.log4j.ConsoleAppender
log4j.appender.stdout.layout=org.apache.log4j.PatternLayout

# Print the date in ISO 8601 format
log4j.appender.stdout.layout.ConversionPattern=%d [%t] %-5p %c - %m%n

log4j.appender.R=org.apache.log4j.RollingFileAppender
log4j.appender.R.File=application.log

log4j.appender.R.MaxFileSize=100KB
# Keep one backup file
log4j.appender.R.MaxBackupIndex=1

log4j.appender.R.layout=org.apache.log4j.PatternLayout
log4j.appender.R.layout.ConversionPattern=%p %t %c - %m%n

log4j.logger.org.hibernate.SQL=DEBUG, SQL_APPENDER
log4j.additivity.org.hibernate.SQL=false 
```

我必须在服务器端进行一些配置吗？我在 Tomcat 7 服务器上运行我的应用程序。我将此依赖项添加到`pom.xml`文件中：

```
<dependency>
    <groupId>log4j</groupId>
    <artifactId>log4j</artifactId>
    <version>1.2.16</version>
</dependency> 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-08-10T09:22:36.157

您需要定义`log.appender.SQL_APPENDER`，因为您在行中分配它

```
 log4j.logger.org.hibernate.SQL=DEBUG, SQL_APPENDER 
```

您正在定义附加程序`R`，但没有`SQL_APPENDER`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-09-19T11:24:43.100

正如 SJuan 提到的，您需要定义

> log.appender.SQL_APPENDER

这样做是这样的：

> log4j.appender.SQL_APPENDER=org.apache.log4j.RollingFileAppender

还不如在您使用时添加这些...

> log4j.appender.SQL_APPENDER.File=c:/EC_sql.log log4j.appender.SQL_APPENDER.MaxFileSize=1000KB log4j.appender.SQL_APPENDER.MaxBackupIndex=62 log4j.appender.SQL_APPENDER.layout=org.apache.log4j.PatternLayout log4j.appender .SQL_APPENDER.layout.ConversionPattern=[%d] %5p [%t] (%F:%L) - %m%n

希望这对某人有帮助！

# sql - SQL WHERE Id IN 拟合所有记录

> ID：11898672
> 
> 赞同：0
> 
> 时间：2012-08-10T09:17:07.427
> 
> 标签：sql, sql-server

一个简单的问题，我在 WEB 中找不到答案，因为它很不寻常，但是：
我如何构建 SQL`WHERE something IN (...)`命令，它像 SQL 一样返回每条记录`something LIKE '%'`？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-10T09:18:21.247

您可以使用

`WHERE something IN (something)`

这将返回每条记录`something is not null`（与 相同的行为`something LIKE '%'`）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-10T09:21:06.010

```
WHERE something like '%value1%'
OR something like '%value2%'
OR something like '%value3%'
etc 
```

# c++ - typename 在这种情况下是什么意思

> ID：11898679
> 
> 赞同：2
> 
> 时间：2012-08-10T09:17:26.583
> 
> 标签：c++, templates, c++11

> **可能重复：**
> [我必须在哪里以及为什么要放置“模板”和“类型名称”关键字？](https://stackoverflow.com/questions/610245/where-and-why-do-i-have-to-put-the-template-and-typename-keywords)

我正在阅读[这篇](http://thbecker.net/articles/rvalue_references/section_01.html)文章，所以我现在正在研究`std::forward`and的实现`std::move`：

```
 // TEMPLATE FUNCTION forward
template<class _Ty> inline
    _Ty&& forward(typename identity<_Ty>::type& _Arg)
    {   // forward _Arg, given explicitly specified type parameter
    return ((_Ty&&)_Arg);
    }

    // TEMPLATE FUNCTION move
template<class _Ty> inline
    typename tr1::_Remove_reference<_Ty>::_Type&&
        move(_Ty&& _Arg)
    {   // forward _Arg as movable
    return ((typename tr1::_Remove_reference<_Ty>::_Type&&)_Arg);
    } 
```

我想我明白了整个故事，但我不明白`typename`模板定义外部的使用（`template<...>`）。在这种情况下是什么意思？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-10T09:22:21.743

它表明这`identity<_Ty>::type&`是一个*类型*，而不是类中的*静态变量*。

这是一个更简单的例子：

```
template<class T> void f() { T::x * p; ... } 
```

你可以认为这`p`是一个指向某个类的指针`T::x`。或者您可以认为这`T::x`是一个静态变量，乘以`p`. 因此，在这种情况下，编译器无法真正知道这段代码是什么意思。

为了避免这种歧义，您应该通过添加来指定这`T::x`是一个类型`typename`：

```
template<class T> void f() { typename T::x * p; ... } 
```

在你的情况下，情况是一样的。

# c++ - C++ 的“yield”关键字，如何从我的函数返回迭代器？

> ID：11898680
> 
> 赞同：20
> 
> 时间：2012-08-10T09:17:31.223
> 
> 标签：c++, iterator, generator, coroutine, yield-keyword

考虑以下代码。

```
std::vector<result_data> do_processing() 
{
    pqxx::result input_data = get_data_from_database();
    return process_data(input_data);
}

std::vector<result_data> process_data(pqxx::result const & input_data)
{
    std::vector<result_data> ret;
    pqxx::result::const_iterator row;
    for (row = input_data.begin(); row != inpupt_data.end(); ++row) 
    {
        // somehow populate output vector
    }
    return ret;
} 
```

当我在考虑是否可以期望返回值优化 (RVO) 发生时，我找到了 Jerry Coffin [强调我的][的答案：](https://stackoverflow.com/a/3134989/1025391)

> 至少在国际海事组织，这通常是一个糟糕的主意，但不是出于效率原因。这是一个糟糕的主意，因为所讨论的函数通常应该编写为**通过迭代器产生其输出的通用算法。**几乎所有接受或返回容器而不是在迭代器上操作的代码都应该被认为是可疑的。
> 
> 不要误解我的意思：有时传递类似集合的对象（例如，字符串）是有意义的，但对于引用的示例，我认为传递或返回向量是一个糟糕的主意。

有一些 Python 背景，我非常喜欢 Generators。实际上，如果它是 Python，我会将上面的函数编写为生成器，即避免在发生其他任何事情之前处理整个数据的必要性。例如像这样：

```
def process_data(input_data):
    for item in input_data:
        # somehow process items
        yield result_data 
```

如果我正确解释了 Jerry Coffins 的注释，这就是他的建议，不是吗？如果是这样，我如何在 C++ 中实现它？

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-08-10T09:26:51.227

不，这不是杰瑞的意思，至少不是直接的意思。

`yield`在 Python 中实现[协程](http://en.wikipedia.org/wiki/Coroutine)。C++ 没有它们（但它们当然可以被模拟，但如果做得干净，那就有点牵扯了）。

但是 Jerry 的意思很简单，你应该传入一个输出迭代器，然后将其写入：

```
template <typename O>
void process_data(pqxx::result const & input_data, O iter) {
    for (row = input_data.begin(); row != inpupt_data.end(); ++row)
        *iter++ = some_value;
} 
```

并称之为：

```
std::vector<result_data> result;
process_data(input, std::back_inserter(result)); 
```

我不相信这通常比只返回向量更好。

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2012-08-10T09:24:20.277

Boost.Asio 的作者 Chris Kohlhoff 有一篇关于此的博客文章：http: [//blog.think-async.com/2009/08/secret-sauce-revealed.html](http://blog.think-async.com/2009/08/secret-sauce-revealed.html)

`yield`他用宏模拟

```
#define yield \
  if ((_coro_value = __LINE__) == 0) \
  { \
    case __LINE__: ; \
    (void)&you_forgot_to_add_the_entry_label; \
  } \
  else \
    for (bool _coro_bool = false;; \
         _coro_bool = !_coro_bool) \
      if (_coro_bool) \
        goto bail_out_of_coroutine; \
      else 
```

这必须与`coroutine`类一起使用。有关更多详细信息，请参阅博客。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2016-08-06T09:12:20.230

当您以递归方式解析某些内容或处理具有状态时，生成器模式可能是一个好主意，并大大简化了代码——那时不能轻易地迭代，通常回调是​​替代方案。我想拥有`yield`，发现[Boost.Coroutine2](http://www.boost.org/doc/libs/release/libs/coroutine2/)现在似乎很好用。

下面的代码是文件的示例`cat`。当然这是没有意义的，直到你想进一步处理文本行：

```
#include <fstream>
#include <functional>
#include <iostream>
#include <string>
#include <boost/coroutine2/all.hpp>

using namespace std;

typedef boost::coroutines2::coroutine<const string&> coro_t;

void cat(coro_t::push_type& yield, int argc, char* argv[])
{
    for (int i = 1; i < argc; ++i) {
        ifstream ifs(argv[i]);
        for (;;) {
            string line;
            if (getline(ifs, line)) {
                yield(line);
            } else {
                break;
            }
        }
    }
}

int main(int argc, char* argv[])
{
    using namespace std::placeholders;
    coro_t::pull_type seq(
            boost::coroutines2::fixedsize_stack(),
            bind(cat, _1, argc, argv));
    for (auto& line : seq) {
        cout << line << endl;
    }
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-15T10:54:43.410

我发现类似 istream 的行为会接近我的想法。考虑以下（未经测试的）代码：

```
struct data_source {
public:
    // for delivering data items
    data_source& operator>>(input_data_t & i) {
        i = input_data.front(); 
        input_data.pop_front(); 
        return *this; 
    }
    // for boolean evaluation
    operator void*() { return input_data.empty() ? 0 : this; }

private:
    std::deque<input_data_t> input_data;

    // appends new data to private input_data
    // potentially asynchronously
    void get_data_from_database();
}; 
```

现在我可以按照以下示例所示进行操作：

```
int main () {
    data_source d;
    input_data_t i;
    while (d >> i) {
        // somehow process items
        result_data_t r(i);
        cout << r << endl;
    }
} 
```

通过这种方式，数据采集以某种方式与处理分离，从而允许延迟/异步发生。也就是说，我可以在物品到达时对其进行处理，而不必像另一个示例中那样等到向量完全填充。

# pascal - ISO帕斯卡和递归

> ID：11898682
> 
> 赞同：2
> 
> 时间：2012-08-10T09:17:39.287
> 
> 标签：pascal

根据 ISO 帕斯卡标准，我无法找出该程序的正确行为。我尝试阅读 ISO 7185 标准文档，但没有找到关于该主题的任何内容。结果 4 或 24 应该是什么？

```
program Undetermined;
var
   n: Integer;

function fact: Integer;
begin
   fact := 1;
   if n > 1 then
   begin
      n := n - 1;
      fact := (n + 1) * fact
   end
end;

begin
   n := 4;
   writeln( fact )
end. 
```

编辑：我意识到我的示例中存在第二个问题。所以考虑新代码：

```
program Undefined;
var
   n: Integer;

function power2: Integer;
begin
   power2 := 1;
   if n > 0 then
   begin
      n := n - 1;
      power2 := 2 * power2
   end
end;

begin
   n := 4;
   writeln( power2 )
end. 
```

结果应该是 16 还是 2（根据我的编译器）？

编辑：如果他们没有解决我的问题，感谢回答事件。我终于在另一个论坛上得到了正确的答案：ISO 标准指定了我期望的行为，但我使用的编译器 (fpc)​​ 在这一点上与默认设置不符合标准。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-10T09:39:53.803

这里有两个单独的问题：

1.  `fact`是表示函数的结果，还是递归调用？
2.  如果它确实表示递归调用，是否`24`定义了结果或实现？

## 1.`fact`是表示函数的结果，还是递归调用？

由于`fact`不会出现在赋值的左边，它不对应于函数的结果，所以它应该递归地调用函数。编译器在这种情况下处理`fact`和`fact()`不同听起来像一个错误。

标准说：

> 在激活中，应用的标签或变量标识符，或局部于激活块的过程标识符或函数标识符的出现应分别表示相应的程序点、变量、过程或函数，该激活的；除了**赋值语句的函数标识符**应在由该函数标识符表示的函数的激活内表示该激活的结果。

## 2\. 如果它确实表示递归调用，是否`24`定义了结果或实现？

即使您忽略与递归相关的问题，并使用`fact()`，您仍然不能期望总是得到`24`结果。

它归结为：“在表达式中首先评估`(n+1)`或评估？`fact()``(n + 1) * fact`

评估的顺序是在这种情况下定义的实现。这意味着遵循标准的不同实现可能会产生不同的结果，并且您不能期望`24`所有这些实现。

引用标准：

> **6.7.2 运算符**
> 
> **6.7.2.1 概述**
> 
> * * *
> 
> 表 3 | 二元算术运算
> 
> ...
> `*`乘法
> ...
> 
> * * *
> 
> 因子、项或简单表达式应指定为操作数。二元运算符的操作数的评估顺序应取决于实现。
> 
> 注意 | 这意味着，例如，操作数可以按文本顺序、逆序或并行进行求值，也可以不同时求值。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-23T00:47:13.923

Free Pascal 的 ISO 方言模式非常年轻（1-2 年），因为 FPC 通常是 Borland 而不是面向 ISO 的编译器。

Mac Pascal 模式经过更多测试，通常非常类似于 ISO。在 macpascal 模式下编译将产生没有 () 的“16”答案。

可能 ISO 模式应该做同样的事情，而不是使用 borland/delphi 之类的返回值是一个伪变量。请提交一个错误。

# shell - 检查 Tomcat 是否通过 shell 脚本运行

> ID：11898686
> 
> 赞同：4
> 
> 时间：2012-08-10T09:17:42.570
> 
> 标签：shell, tomcat

我需要通过 shell 脚本检查 Tomcat 是否在我的系统中运行。如果不是，我需要捕获进程 ID 并杀死 Tomcat。将如何实现？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-04-15T20:29:40.260

为了获得正在运行的进程，我使用了这个命令：

`ps x | grep [full_path_to_tomcat] | grep -v grep | cut -d ' ' -f 1`

不过，你必须小心。它适用于我的设置，但它可能无法在任何地方运行......我有两个 tomcat 安装，一个是 /usr/local/tomcat 端口 8080 和 /usr/local/tomcat_8081 端口 8081。我必须使用 '/ usr/local/tomcat/'（带有最后一个斜杠）作为 full_path，否则如果 tomcat_8081 也在运行，它将返回 2 个不同的 pid。

以下是该命令作用的解释：

1)`ps x`为您提供按 pid、tty、stat、运行时间和命令排序的运行进程列表。

2) 应用`grep [full_path_to_tomcat]`它会在该列表中找到模式 [full_path_to_tomcat]。例如，跑步`ps x | grep /usr/local/tomcat/`可能会得到以下结果：

```
13277 ?        Sl     7:13 /usr/local/java/bin/java -Djava.util.logging.config.fil
e=/usr/local/tomcat/conf/logging.properties [...] -Dcatalina.home=/usr/local/tomca
t [...]
21149 pts/0    S+     0:00 grep /usr/local/tomcat/ 
```

3) 由于`grep /usr/local/tomcat/`匹配模式，我们得到 2 个条目而不是 1 个，让我们删除它。`-v`是 grep 的反转匹配标志，这意味着它将仅选择与模式不匹配的行。因此，在前面的示例中， using`ps -x | grep /usr/local/tomcat/ | grep -v grep`将返回：

```
13277 ?        Sl     7:13 /usr/local/java/bin/java -Djava.util.logging.config.fil
e=/usr/local/tomcat/conf/logging.properties [...] -Dcatalina.home=/usr/local/tomca
t [...] 
```

4) 很酷，现在我们有了我们需要的 pid。尽管如此，我们仍需要剥离所有其余部分。为了做到这一点，让我们使用`cut`. 此命令从 FILE 或标准输出中删除部分。-d 选项是分隔符，-f 是您需要的字段。伟大的。所以我们可以用空格（''）作为分隔符，得到第一个字段，对应pid。运行`ps x | grep /usr/local/tomcat/ | grep -v grep | cut -d ' ' -f 1`将返回：

```
13277 
```

这就是你需要的。要在脚本中使用它，很简单：

```
#replace below with your tomcat path
tomcat_path=/users/tomcat/apache-tomcat-8.0.30
pid=$(ps x | grep "${tomcat_path}" | grep -v grep | cut -d ' ' -f 1)
if [ "${pid}" ]; then
  eval "kill ${pid}"
fi 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2015-06-18T09:51:03.433

一种通过使用 wget 获取服务器地址并检查状态的方法。

在此处查看此链接：

[http://www.velvettools.com/2013/07/shell-script-to-check-tomcat-status-and.html#.VX_jfVz-X1E](http://www.velvettools.com/2013/07/shell-script-to-check-tomcat-status-and.html#.VX_jfVz-X1E)

```
TOMCAT_HOME=/usr/local/tomcat-folder/

is_Running ()
{

        wget -O - http://yourserver.com/ >& /dev/null
 if( test $? -eq 0 ) then
  return 0
 else
  return 1
 fi
}

stop_Tomcat ()
{
 echo "shutting down......"
 $TOMCAT_HOME/bin/shutdown.sh
}

start_Tomcat ()
{
 echo "starting......"
 $TOMCAT_HOME/bin/startup.sh
}

restart ()
{
 stop_Tomcat
 sleep 10
 kill_Hanged_Processes
 start_Tomcat
 sleep 60
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-10-09T08:45:40.873

简单的方法是：

```
 ps -ef | grep tomcat 
```

通过使用此命令，您将获得：

```
user [id-to-kill] Date [tomcat-path] 
```

最后一步是杀死进程

```
sudo kill -9 [id-to-kill] 
```

恭喜，你的进程被杀死了 lOol

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-10T09:39:30.143

Tomcat 的默认端口是 8080。你可以 grep 并在比较循环中使用端口状态。

```
#!/bin/bash
STAT=`netstat -na | grep 8080 | awk '{print $7}'`
if [ "$STAT" = "LISTEN" ]; then
    echo "DEFAULT TOMCAT PORT IS LISTENING, SO ITS OK"
elif [ "$STAT" = "" ]; then 
    echo "8080 PORT IS NOT IN USE SO TOMCAT IS NOT WORKING"
    ## only if you defined CATALINA_HOME in JAVA ENV ##
    cd $CATALINA_HOME/bin
    ./startup.sh
fi
RESULT=`netstat -na | grep 8080 | awk '{print $7}' | wc -l`
if [ "$RESULT" = 0 ]; then
    echo "TOMCAT PORT STILL NOT LISTENING"
elif [ "$RESULT" != 0 ]; then
    echo "TOMCAT PORT IS LISTENINS AND SO TOMCAT WORKING"
fi 
```

这样你可以比较脚本。如果你使用tomcat的默认端口，你可以grep端口8080。这只会检查tomcat是否正在运行。然后您可以使用端口 lsof -i:8080 //如果使用端口 8080 检查进程

如果您想通过杀死使用它的进程来释放端口，请使用此命令 kill 75782 //如果例如 75782 是使用该端口的进程

# jquery - 如何仅替换“独立”匹配？

> ID：11898687
> 
> 赞同：2
> 
> 时间：2012-08-10T09:17:50.547
> 
> 标签：jquery, regex, svg

我在javascript中有这段代码

```
var pts = "0 0, 0 1909, 2559 1909, 2559 0";
pts.replace(/0/g, '2'); 
```

问题是它替换了所有的零！而且我只想替换独立的零，我该如何实现？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-10T09:18:48.393

只需在零周围添加单词边界

```
/\b0\b/g 
```

继续浏览[Regex 教程](http://www.regular-expressions.info/tutorial.html)以获取任何与 regex 相关的查询。

这里有更多关于[单词边界的阅读](http://www.regular-expressions.info/wordboundaries.html)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-10T09:19:27.817

```
pts.replace(/\b0\b/g, '2'); 
```

存在标记词边界的“\b”！

# c# - 在 xml C# 中查找值

> ID：11898694
> 
> 赞同：0
> 
> 时间：2012-08-10T09:17:59.493
> 
> 标签：c#, asp.net, xml

给定这个xml（只是一部分..）

```
 <?xml version="1.0" encoding="utf-8"?>
    <translations>
    <key name="BillOfMaterials">
    <translation culture="en-GB"><![CDATA[Bill of materials]]>
    </translation>
   <translation culture="da-DK"><![CDATA[Materiale liste]]>
    </translation>
    </key>
    <key name="TechnicalDetails">
    <translation culture="en-GB">
    <![CDATA[Technical details
    ]]>
    </translation>
    </key>
    ..
    .. 
```

...我正在寻找最简单的解决方案，例如：

所以

```
string thisTranslation = GetTranslation("BillOfMaterials","en-GB"); //value gets to be "Bill of materials" 
```

我已经尝试过 linq 方式，但是由于迭代次数过多，它变得相当混乱......尤其是当 xslt 中一个简单的 xpath 就足够了......但我似乎不能这样做

提前致谢

编辑： - xml 是物理文件 - 函数可能找不到任何东西.....应该只返回原始键名

```
 /translations/key[@name="BillOfMaterials"]/translation[@culture="en-GB"] 
```

是其他地方可用的xpath..

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-10T09:25:45.360

您可以[`XPathSelectElement`](http://msdn.microsoft.com/en-us/library/system.xml.linq.xdocument.xpathselectelement%28v=vs.90%29)将 XElement 上设置的扩展方法与 XPath 选择器一起使用：

将您的 XML 加载到 XDocument 中：

```
var doc = XDocument.Load("path\to\file"); 
```

然后用 XPath 搜索它：

```
var translation = (string)doc.XPathSelectElement(string.format("/translations/key[@name=\"{0}\"]/translation[@culture=\"{1}\"]", key, culture));
if(string.IsNullOrEmpty(translation))
     translation = key;
return translation; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-10T09:26:47.957

我仍然会使用 LINQ to XML - 绝对没有必要让它变得混乱：

```
XDocument doc = XDocument.Load("test.xml");
string key = "BillOfMaterials";
var element = doc.Root.Elements("key")
                      .Where(key => key.Attribute("name").Value == key)
                      .Elements("translation")
                      .Where(tr => tr.Attribute("culture").Value == "en-GB")
                      .FirstOrDefault();
string result = (string) element ?? key; 
```

就我个人而言，我发现它比使用 XPath 更简洁（尽管 XPath 无疑更短）。它更清楚地分隔查询的每个部分，而且如果您需要任何命名空间处理，使用 LINQ to XML 比使用命名空间管理器要简单得多。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-10T09:23:49.120

获取您的 XML 文档`XmlDocument`类型。你可以这样做：

```
XmlDocument xmlDoc = new XmlDocument();
xmlDoc.Load("<xml>"); // Can be a XML in a string, or filename, etc. 
```

然后你可以使用`XPath`with`SelectNodes()`和`SelectNode()`方法。

喜欢：

```
XmlNodeList xmlNodes = xmlDoc.SelectNodes("/translations/key[@name=\"BillOfMaterials\"]/translation[@culture=\"en-GB\"]"); 
```

# drupal - 在 Drupal 中创建新（自定义）内容与另一个（自定义）内容时如何设置关系

> ID：11898698
> 
> 赞同：0
> 
> 时间：2012-08-10T09:18:09.203
> 
> 标签：drupal, drupal-7, content-type, relationship

前提：我是 Drupal 世界的新手，如果这是一个愚蠢的问题，我很抱歉。

我需要为我创建的一些新内容类型设置一些关系。例如，我创建了“Person”内容类型和“Group”内容类型。使用“关系”模块，我已经定义了“在”关系，但是现在如果我想添加一个字段来在创建时设置关系，则没有可用的编辑小部件。我发现设置关系的唯一方法是使用实​​体收集器：对用户来说太复杂了。

示例：用户创建人员“John”，他希望他设置与组“Drupal Fans”的关系“is in”。因此，在创建此人的过程中，他需要一个选择控件，让他可以从站点中已注册的所有组中进行选择。

简而言之，我需要使用 CRUD 控件、列表等来管理我创建的一些实体，并且我需要从这些实体中设置一些关系。

什么是最好的方法/什么是最好的模块/我该怎么做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-10T19:24:35.583

尝试参考模块：[http ://drupal.org/project/references](http://drupal.org/project/references)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-10T14:06:37.583

您可以在结构 -> 分类中创建您的组的分类列表。此列表可用于创建字段。通过创建字段选择“术语参考”类型，然后选择“自动完成术语小部件”。单击保存并选择您创建的分类列表。希望这是你需要的！

# c++ - 在内联汇编中调用用户定义的 C 函数

> ID：11898699
> 
> 赞同：0
> 
> 时间：2012-08-10T09:18:11.147
> 
> 标签：c++, c, assembly, inline-assembly

假设我有这个：

```
extern "C" {
void foo1();
void foo2();
};
void foo1() 
{
__asm
    {
       ; some stuff

       ; some other 
    }
}

  void foo2() 
  {
    __asm 
        {
              ;some other stuff
              call __foo1

        }
  } 
```

我知道在常规的 .asm 程序中你会被要求说 extrn __fucntionName，但这是内联汇编，可以在内联汇编中这样调用用户定义的函数吗？如何？我用的是VS2008。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-10T11:01:41.223

可以从汇编程序调用 C 函数。此调用的语法取决于您使用的编译器。通常，函数名称在汇编中的外观会有所不同，反之亦然。

# ruby-on-rails - 通过设计会话登录更新用户模型属性

> ID：11898701
> 
> 赞同：1
> 
> 时间：2012-08-10T09:18:14.790
> 
> 标签：ruby-on-rails, ruby-on-rails-3, devise

我正在为 Ruby on Rails 应用程序使用 Devise 身份验证 gem。当用户通过创建新会话登录时，我想更新我的用户模型中的列。最好的方法是什么？

有没有办法拥有一个更新模型的隐藏字段？

```
<%= form_for(resource, :as => resource_name, :url => session_path(resource_name)) do |f| %>
  <div><%= f.label :email %><br />
  <%= f.email_field :email %></div>

  <div><%= f.label :password %><br />
  <%= f.password_field :password %></div>

  <% if devise_mapping.rememberable? -%>
    <div><%= f.check_box :remember_me %> <%= f.label :remember_me %></div>
  <% end -%>

  <% f.hidden_field :field_a, :value => 'test' %>

  <div><%= f.submit "Sign in" %></div>
<% end %> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-10T09:52:03.897

您可以通过覆盖 Devise::SessionsController 创建方法来做到这一点。当用户登录时，它只会对用户进行身份验证，不会更新用户记录。所以在表单中保留隐藏字段是没有用的

像这样试试

```
class Users::SessionsController < Devise::SessionsController

def create
 #do your update here
end

end 
```

否则你可以点击这个链接[http://denmarkin.tumblr.com/post/5194645960/how-to-overwrite-devise-sessions-controller-in-rails-3](http://denmarkin.tumblr.com/post/5194645960/how-to-overwrite-devise-sessions-controller-in-rails-3)

# ipad - jQueryMobile - 在列表视图中过滤并在键盘上按 Go 不会隐藏键盘

> ID：11898707
> 
> 赞同：1
> 
> 时间：2012-08-10T09:18:23.440
> 
> 标签：ipad, jquery-mobile

在 jQuery Mobile 中有过滤的列表视图。将文本输入过滤器后，列表会被过滤，但按 GO 按钮不会隐藏键盘。

用户希望键盘在按下 GO 后会隐藏。有没有办法做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-10T09:36:35.827

您必须使用 Javascript 手动从输入字段中移除焦点，如下所示：

```
$('.ui-listview-filter .ui-input-text').live('keyup', function(event) {
    if (event.keyCode == 13) {
        // 'Go' pressed
        $('.ui-listview-filter .ui-input-text').trigger('blur');
    }
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-10T09:36:20.847

您可能想在按下键后尝试更改焦点。例如：

```
//this will un-select the text box, hiding keyboard
$('#searchInputId').blur();

//this will focus on something else, hiding keyboard
$('#somethingOtherThanTheSearch').focus(); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-01-04T16:54:24.710

Pablo 答案的变体适用于我过时的 jQuery（移动）版本：

```
 // this is here to close the on-screen keyboards of mobile devices when the "go" button is used
  $("input[data-type='search']").on('keyup', function(event) {
    if (event.keyCode == 13) { // Enter or 'Go' pressed
      event.target.blur(); // remove focus on the search field so keyboard goes away
    }
 }); 
```

# asp.net-mvc-3 - 同一页面中的两个 ValidationSummary

> ID：11898715
> 
> 赞同：5
> 
> 时间：2012-08-10T09:18:53.667
> 
> 标签：asp.net-mvc-3, validationsummary

我在页面上有两个表单，每个表单都有自己的`ValidationSummary`. 问题是随后`one form`对`both ValidationSummary`显示验证消息执行服务器端验证。是否可以`ValidationSummary`在同一页面上有两个并`ValidationSummary`为分配给它的每个表单执行？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-10T09:22:22.723

将它传递给您要在第二页上提供的验证摘要的公共类，并将您的**验证组**名称设置为相同的名称。

# html - 移动 div 向左浮动到布局的底部

> ID：11898721
> 
> 赞同：1
> 
> 时间：2012-08-10T09:19:27.347
> 
> 标签：html, css, media-queries

嗨，我有如下所示的布局，在[Fiddle](http://jsfiddle.net/7X4RQ/3/)

```
#divHeader#divHeader#divHeader

#divleftmenu #divContent
#divleftmenu #divContent
#divleftmenu #divContent
#divleftmenu #divContent

#divFooter#divFooter#divFooter 
```

有没有办法使用媒体查询和 CSS 仅将 the 移动`#divleftmenu`到页脚上方的底部？

IE

```
 #divHeader#divHeader#divHeader

 #divContent
 #divContent
 #divContent
 #divContent

 #divleftmenu 
 #divleftmenu 
 #divleftmenu 
 #divleftmenu 

 #divFooter#divFooter 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-10T09:45:58.893

您需要更改源顺序，并停止在断点下浮动侧边栏。只是为了好，我为你重新格式化了你的代码。我有：

*   删除了不必要的声明
*   使用更具描述性的选择器名称
*   清理空白

[这是您的清洁版本](http://jsfiddle.net/7X4RQ/9/)：

```
<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8" />
<title>A much nicer version.</title>
<style type="text/css">
#header {height: 50px; background: yellow;}
#sidebar {float: left; height: 300px; width: 30%; background:blue;}
#content {float: right; height: 300px; width: 70%; background: #ccc;}
#footer {height: 50px; background: grey; clear:both;}

@media only screen and (max-width: 400px) {
    #sidebar, #content {float: none; width: 100%;}
}
</style>
</head>
<body>
<div id="header">Header</div>
<div id="content">Content</div>
<div id="sidebar">Sidebar</div>
<div id="footer">Footer</div>
</body>
</html> 
```

​​​

# java - Java：解析字符串以查找括号的内容

> ID：11898722
> 
> 赞同：1
> 
> 时间：2012-08-10T09:19:27.047
> 
> 标签：java, parsing, split, hashtable, brackets

嗨，我是一个初学者，我一直在努力解决这个问题，我想知道谁能帮帮我。

例如，我有一个字符串

```
The quick <brown> fox jumps over the <lazy> dog 
```

我需要做的是在字符串中搜索每个 < > 括号的内容，并将它们放入哈希表中，但我想不出一种干净的方法来获取每个单词。

任何帮助都会很棒，谢谢

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-10T09:22:27.147

```
String yourString = "The quick <brown> fox jumps over the <lazy> dog";
Pattern pattern = Pattern.compile("<(.*?)>");
Matcher matcher = pattern.matcher(yourString);
while(matcher.find()){
   String word = matcher.group(1);
   // do something with the word (like putting it in your hashtable)
} 
```

# javascript - 在 iOS Webview 中，没有调用 javascript 方法

> ID：11898726
> 
> 赞同：0
> 
> 时间：2012-08-10T09:19:43.467
> 
> 标签：javascript, iphone, ios, ipad, uiwebview

我从加载到视图中的 UIWebview 调用某些 javascript 方法。有一种方法是动态创建并添加到 dom 上的。我无法使用以下代码调用该方法。

```
NSString * isPinCorrect = [webView stringByEvaluatingJavaScriptFromString:@"showErrorStat()"]; 
```

这是将其附加到 dom 的函数

```
function appendToDom() {
        var error_js = document.createElement('script');
        error_js.type = 'text/javascript';
        error_js.innerHTML = "function showErrorStat() { Android.showErrorStat(); return 'false'; }";
        document.body.appendChild(error_js);
        //showErrorStat();
        //alert("error");
} 
```

可能出了什么问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-07T10:05:14.363

我的 webview 参考是零。这就是问题所在。

# jquery - 在带有 UpdatePanels 的 ASP 页面中使用 jQuery 的正确方法

> ID：11898729
> 
> 赞同：0
> 
> 时间：2012-08-10T09:19:52.103
> 
> 标签：jquery, asp.net, jquery-ui

我有一个 ASP 网页（.NET 3.5），上面有 2 个更新面板。
我还使用 jQuery t 显示提示并使用 jQuery UI 创建选项卡。

在我更新 UpdatePanel 的内容之前，网页工作正常。在网上搜索并在我的电脑上做一些事情，我得到了这个解决方案：

在我的页面标题中，我正在链接我的 js 文件：

```
<script type="text/javascript" src="../js/jquery-1.7.2.min.js"> </script>
<script type="text/javascript" src="../js/jquery-ui-1.8.20.custom.min.js"> </script>
<script type="text/javascript" src="../js/jquery.ui.selectmenu.js"></script>
<script type="text/javascript" src="../js/tipsy.js"></script>
<script type="text/javascript" src="scripts.js"></script> 
```

然后我像这样定义我的 ToolkitScriptManager：

```
<asp:ToolkitScriptManager runat="server" EnablePartialRendering="True">
    <Scripts>
        <asp:ScriptReference Path="refresh.js"/>
    </Scripts>
</asp:ToolkitScriptManager> 
```

我的 refresh.js 的内容如下所示：

```
Sys.Application.add_init(AppInit);

function AppInit(sender) {
    Sys.WebForms.PageRequestManager.getInstance().add_endRequest(End);
}

function End(sender, args) {
    initAll();
} 
```

我的 scripts.js 看起来像这样：

```
...
//here I create all my functions
...

function initAll()
{
    //here I call I my functions
    $("#tip1").tipsy({ gravity: 'e', fade: true, offset: 10 });
    initDatePicker();
    $("#tabs").tabs();
    $("#radioset1").buttonset();
    $("#radioset2").buttonset();
    $('select').selectmenu();
    $("input:button, input:submit").button();
    initDatePickers();
    initAutocomplete();
}

$(function() {
    initAll();
});

//this function shows content of my page after jQuery is ready.
$(window).load(function() {
    $("#loading").hide("fast", function() {
        $("div.fullsize").show()
    })
}); 
```

这样，我在加载页面上创建了所有函数，然后当我更新我的 updatePanel 时，它们被“刷新”。

这现在对我有用，但我想知道这是否是正确的方法并进行了优化。当我`initAll`在 updatePanel 刷新后在函数中添加事件侦听器时，它们会再次添加（对吗？）。

**我的问题：**

1.  在 ASP 页面中使用 jQuery 并将其与 updatePanels 一起使用的最佳方法是什么，以便在 updatePanel 更新后 jQuery 代码可以工作。
2.  如何确保在显示我的内容之前加载所有 javascript？够`$(window).load()`了吗？我在我的解决方案中使用了多个 js 文件，我不希望我的网站抛出错误，因为我使用了未加载文件中的函数。

# python - 将matlab程序转换为等效的python代码

> ID：11898736
> 
> 赞同：3
> 
> 时间：2012-08-10T09:20:20.367
> 
> 标签：python, numpy, scipy

想要在 Python 中实现下面列出的 Matlab 命令。我能够找出 Python 中的 Matlab 等效命令，但我没有得到确切的结果。有人可以帮助我实现这一目标。

MATLAB代码：

```
n0 = 3
n1 = 1
n2 = 5
n = [n1:n2]
>> 1 2 3 4 5
x = [(n - n0) == 0]
>> 0 0 1 0 0 
```

蟒蛇代码：

```
import numpy 
n0 = 3
n1 = 1
n2 = 5
n = r_[n1:n2+1]
>> [1 2 3 4 5]
x = r_[(n-n0) == 0]
>> [False False True False False] 
```

所以 x 是我的数组，布尔数据类型为“[array([False, False, True, False False], dtype=bool)]”。如何使我的最后一个命令以 0 或 1 的形式返回结果，以使结果与 Matlab 完全相同。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-10T09:26:04.393

使用列表推导将 bool 转换为 int：

```
[int(val) for val in x] 
```

# java - 如何实现排序类

> ID：11898746
> 
> 赞同：2
> 
> 时间：2012-08-10T09:20:57.007
> 
> 标签：java

```
private class FileType extends Object {
    private String Name;
    private String Type;

    public FileType() {
        Name = null;
        Type = null;
    }

    public void setFileType(String n, String t) {
        Name = n;
        Type = t;
    }   

    public int compareTo(FileType ft) {
        String decodedFileName = null;
        String decodedInputName = null;
        try {
            decodedFileName = URLDecoder.decode(this.Name, "UTF-8");
            decodedInputName = URLDecoder.decode(ft.Name, "UTF-8");
        }
        catch(UnsupportedEncodingException e) {
        }
        return decodedFileName.compareToIgnoreCase(decodedInputName);
    }
} 
```

上面的代码是我为文件列表定义的类。
我已经实现了比较文件名。
类型可能`Folder`或`File`。
但是我要对文件进行排序，第一优先是类型，第二优先是名称。
怎么可能到达呢？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-10T09:26:52.723

您必须实现 Comparable / compareTo 方法。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-10T09:27:09.747

使用`Comparator`接口 from`java.util package`以**不止一种方式进行排序......**

使用`compare(T t1, T t2)`Comparator 的方法， **例如：**

**[这是来自网站http://www.mkyong.com](http://www.mkyong.com)**的示例****

 **```
import java.util.Comparator;

public class Fruit{

    private String fruitName;
    private String fruitDesc;
    private int quantity;

    public Fruit(String fruitName, String fruitDesc, int quantity) {
        super();
        this.fruitName = fruitName;
        this.fruitDesc = fruitDesc;
        this.quantity = quantity;
    }

    public String getFruitName() {
        return fruitName;
    }
    public void setFruitName(String fruitName) {
        this.fruitName = fruitName;
    }
    public String getFruitDesc() {
        return fruitDesc;
    }
    public void setFruitDesc(String fruitDesc) {
        this.fruitDesc = fruitDesc;
    }
    public int getQuantity() {
        return quantity;
    }
    public void setQuantity(int quantity) {
        this.quantity = quantity;
    }

    public static Comparator<Fruit> FruitNameComparator 
                          = new Comparator<Fruit>() {

        public int compare(Fruit fruit1, Fruit fruit2) {

          String fruitName1 = fruit1.getFruitName().toUpperCase();
          String fruitName2 = fruit2.getFruitName().toUpperCase();

          //ascending order
          return fruitName1.compareTo(fruitName2);

          //descending order
          //return fruitName2.compareTo(fruitName1);
        }

    };
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-10T09:28:23.397

比较两种类型。如果比较不为 0，则将其作为结果返回。如果等于 0，则比较名称。

注意：

*   扩展对象是不必要的：它是默认的
*   字段应以小写字母开头：name、type na dnot Name、Type
*   你的班级应该实现`Comparable<FileType>`
*   我会为该类选择另一个名称：它不是文件类型，而是与文件类型关联的文件名
*   我会为文件类型使用枚举而不是字符串，因为您只有两个有效的文件类型实例
*   你永远不应该像你正在做的那样忽略异常。顺便说一句，如果发生此异常，可能会导致 NullPointerException。将异常包装成运行时异常并抛出此运行时异常：

    ```
    catch(UnsupportedEncodingException e) {
        throw new RuntimeException(e);
    } 
    ```

*   您的 compareTo 方法不处理 null 名称，尽管默认构造函数将 null 分配给该名称。修复方法或构造函数。在我看来，文件名永远不应该为空，所以我会修复构造函数。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-10T09:29:10.093

```
if (this.Type.equals(ft.Type)){
  return decodedFileName.compareTo(decodedInputName);
}
else{
  return this.Type.compareTo(ft.Type);

} 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-08-10T09:31:34.943

您首先比较类型，然后比较解码的名称。我直接在类中缓存了decodedFileName的值，防止调用URLDecoder.decode太多。

```
private class FileType extends Object implements Comparable<FileType>{
    private String name;
    private String decodedFileName;
    private String type;
    public FileType(String n, String t) {
        name = n;
        try {
            decodedFileName = URLDecoder.decode(this.name, "UTF-8");
        } catch (UnsupportedEncodingException e) {
            throw new RuntimeException(e);
        }           
        type = t;
    }
    public int compareTo(FileType other) {
        int result = type.compareToIgnoreCase(other.type);
        if (result == 0){
            result = decodedFileName.compareToIgnoreCase(other.decodedFileName);
        }
        return result;
    }
} 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-08-10T09:31:50.857

如果你只有两种类型，为什么不让它们枚举？
然后首先比较 type.ordinal，如果相等则比较名称，并防止将不需要的值放在那里**

# java - 关于如何在 eclipse 上使用 Triple des 加密文件的任何教程？（保管箱）

> ID：11898747
> 
> 赞同：0
> 
> 时间：2012-08-10T09:20:59.687
> 
> 标签：java, android

有没有关于如何在上传到 dropbox 时使用三重DES加密文件的参考或教程？

我将使用 Eclipse 软件来做。那么有没有什么好的教程和很好的解释如何做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-10T09:23:43.443

看看这个[教程](http://sanjaal.com/java/189/java-encryption/tutorial-encryption-and-decryption-using-desede-triple-des-in-java/)。在这里您可以找到用于加密和解密的代码。

加密后，您可以将其上传到保管箱。

使用 Eclipse 或 netbin 都没有关系。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-10T09:23:47.717

这是 Java 三重 DES 的示例： http: [//eternusuk.blogspot.de/2008/09/java-triple-des-example.html](http://eternusuk.blogspot.de/2008/09/java-triple-des-example.html)

如果您使用 Eclipse 并不重要，它是一个 IDE，而不是一个平台。

# mod-rewrite - 下游 404 上的 Apache 重定向

> ID：11898753
> 
> 赞同：2
> 
> 时间：2012-08-10T09:21:15.693
> 
> 标签：mod-rewrite, mobile, apache2, wurfl

我们正在构建一个移动网站，其 url 结构与我们当前的桌面网站相匹配。我们将它们托管在同一个域上，并使用 apache 过滤它们之间的流量，使用 WURFL 来帮助决定哪些代理去哪里。

我们的过滤规则目前如下所示：

```
RewriteCond %{HTTP_COOKIE} "bucket=mobile"
RewriteRule ^(.*)$ http://internal-mobile-pool.ourdomain.com/$1 [P]

RewriteRule ^(.*)$ http://internal-desktop-pool.ourdomain.com/$1 [P] 
```

我们基于 WURFL 的解决方案为我们设置了“桶”cookie。

我们面临的问题是，并非我们桌面网站上的所有网址都已在我们的移动网站上重新实现。理想情况下，我希望应用上述规则，但如果它尝试访问移动服务器并获得 404，它会改为从桌面服务器提供内容。

即，如果移动设备请求 www.ourdomain.com/some_desktop_only_resource.html，并且 internal-mobile-pool.ourdomain.com/some_desktop_only_resource.html 返回 404 - 它返回 desktop-pool.ourdomain.com/some_desktop_only_resource 上的内容.html

用伪代码来描述这个

```
if(isMobile)
   response = getMobileResponse(url)
   if(response.code != 404)
        serveResponse(response)
   else
        serveResponse(getDesktopResponse(url)) 
```

我知道如果我在这个文件中列出所有支持的 url，这是可能的——我想避免这种情况，因为我希望这个平台识别层独立于它所服务的应用程序。我也知道我可以通过从那里重定向来解决移动应用程序本身的问题，但如果可能的话，我希望这个平台识别层是独立的。

这可以使用 mod_rewrite 吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-10T10:23:19.963

不要认为有办法使用 mod_rewrite 来做到这一点。因为您使用`[P]`标志进行代理，所以`RewriteRule`将代理请求交给 mod_proxy 并且甚至不知道它是否通过。如果所有内容都在同一个文档根目录中（或者至少是文档根目录的子目录），您就可以使用`-f`条件检查来查看文件是否存在。

尽管我不知道这是否可行，但您可以尝试做的事情是使用 mod_proxy[`ProxyErrorOverride`和`ErrorDocument`](http://httpd.apache.org/docs/2.2/mod/mod_proxy.html#proxyerroroverride). 如果你`ProxyErrorOverride`打开了，理论上如果代理请求返回错误，mod_proxy 将使用本地错误处理程序而不是代理错误处理程序。然后，您可以使用 a 使用`ErrorDocument 404`php 脚本或其他东西来处理代理的 404，然后通过本地重写引擎将其重新路由回去（可能使用带有特殊查询字符串参数的重定向？），以便它可以被代理到桌面域。

# ios - 为什么 didUpdateLocation 没有运行，但我的 GPS 坐标仍在更新？

> ID：11898765
> 
> 赞同：0
> 
> 时间：2012-08-10T09:22:07.890
> 
> 标签：ios, xcode, core-location

我正在尝试构建一个应用程序，它可以定期提供 GPS 坐标，以便在标签上显示并发送到 Web 服务器，但事实证明这很困难。我已经设法让它给我准确的实时 GPS 坐标，但我必须按下一个按钮才能让标签刷新。

我认为 didUpdateLocation 方法现在是一个不错的地方，但它似乎永远不会运行。我正在通过包含一个 NSLog 帖子来对此进行测试——当我使用 Apple 的 LocateMe 示例应用程序执行此操作时，它会按应有的方式运行。

下面是我的方法：

```
- (void)locationManager:(CLLocationManager *)manager
        didUpdateToLocation:(CLLocation *)newLocation
        fromLocation:(CLLocation *)oldLocation
{
     theLocation = [NSString stringWithFormat:@"latitude: %f
        longitude: %f", locationManager.location.coordinate.latitude,
        locationManager.location.coordinate.longitude];

     NSLog(@"location manager did something!!!");
} 
```

虽然我猜测问题出在上述方法之外。我想我应该包括我的 viewDidLoad 方法，因为那是我 startUpdatingLocation 的地方：

```
- (void)viewDidLoad
{
    [super viewDidLoad];
    locationManager = [[CLLocationManager alloc] init];
    locationManager.distanceFilter = kCLDistanceFilterNone;
    locationManager.desiredAccuracy = kCLLocationAccuracyBest;
    [locationManager startUpdatingLocation];
    [outletLabelData setText:(@"Loaded")];
} 
```

我还尝试在我的按钮操作方法中使用 startUpdatingLocation，甚至让它像一个开关一样工作，您可以在其中启动和停止更新（这应该触发更新事件），但仍然没有成功。

其他详情：

*   **Xcode 4.4**
*   **iOS 5.1**
*   **插入我的 Mac 时**在我的 iPhone 上测试应用程序

 **有人能帮忙吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-10T09:26:44.097

你需要告诉你`CCLocationManager`谁是代表。在您的情况下，它是您当前的控制器。

```
locationManager = [[CLLocationManager alloc] init];
[locationManager setDelegate:self]; 
```

并且显然要确保您的控制器符合`CLLocationManagerDelegate`协议。**

# actionscript-3 - 如何使用 RTMP 进行视频/音频/图像捕获？

> ID：11898766
> 
> 赞同：0
> 
> 时间：2012-08-10T09:22:09.797
> 
> 标签：actionscript-3, flash, apache-flex, flex4.5, recording

在视频/音频/图像捕获上，我们使用网络连接，如 `nc.connect("rtmp://localhost/vmspeak");` 谁能解释这是什么及其用途。在新项目中如何使用？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-10T19:46:12.617

您需要 Adob​​e [Flash 媒体服务器](http://www.adobe.com/go/tryflashmediaserver/)(FMS)。

开发版是免费的（即使用于商业用途）并允许 10 个同时连接。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-10T10:30:23.317

RTMP 代表**实时消息传递协议**。

实时消息传递协议 (RTMP) 最初是 Macromedia 开发的专有协议，用于通过 Internet 在 Flash 播放器和服务器之间传输音频、视频和数据。Macromedia 现在归 Adob​​e 所有，Adobe 发布了供公众使用的协议规范的不完整版本。

# autotools - 如何有条件地在 autotools 项目中编译？

> ID：11898782
> 
> 赞同：4
> 
> 时间：2012-08-10T09:23:07.810
> 
> 标签：autotools, autoconf, automake

我有一个自动工具项目。如果用户在构建过程中进行了配置，我希望从项目中排除一些文件。例如，如果构建配置了 --no-gui ，则与 GUI 相关的文件不会包含在构建中。

1.  autoconf 中此类标志的标准宏是什么？可以使用--disable-gui 之类的配置？

2.  如何在此配置选项和 automake 输入文件之间建立链接？

我这里有 Calcote 的介绍性书籍 Autotools。如果你能指点所涉及的宏，我可以在书上或网上查到。

谢谢，

艾伦。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-08-10T13:40:36.800

根据[autoconf 手册](http://www.gnu.org/software/autoconf/manual/autoconf.html#Package-Options)，正确的方法是`--enable-FEATURE`使用`configure`. 这是使用宏完成的`AC_ARG_ENABLE`。的四个参数`AC_ARG_ENABLE`依次是、`FEATURE`、`HELP-STRING`、。所以在：`ACTION-IF-GIVEN``ACTION-IF-NOT-GIVEN``configure.ac`

```
AC_ARG_ENABLE([gui],
  [AS_HELP_STRING([--disable-gui], [Enable GUI support @<:@check@:>@])],
  [:],
  [enable_gui=check]) 
```

`AS_HELP_STRING`[很好地包装了帮助](http://www.gnu.org/software/autoconf/manual/autoconf.html#Quadrigraphs)字符串，并且`@<:@`和`@:>@`是在. 即使我指定了一个空的,仍将设置为or ，这取决于是否传递了or （这是 的别名）。`[``]``./configure --help``ACTION-IF-GIVEN``configure``enable_gui``yes``no``--enable-gui``--disable-gui``--enable-gui=no`

所以 shell 变量`$enable_gui`将是`yes`,`no`或`check`。这是为了制作分发包的可怜的打包者的利益，因为仅基于检查构建可选支持被认为是一种糟糕的形式。[请参阅有关automagic 依赖项](http://www.gentoo.org/proj/en/qa/automagic.xml)的 gentoo 文章，但打包者宁愿构建失败，也不愿默默地不包含想要的功能。

现在，如果`$enable_gui`是`yes`或`check`，我们要检查依赖关系，如果我们手动启用该功能则失败。由于我不知道您的 gui 依赖于哪个库，所以我将使用它`pkg-config`来检查`gtk+-2.0`. `PKG_CHECK_MODULES`（由包提供）的四个参数`pkg-config`依次是`VARIABLE`、`MODULES`和：`ACTION-IF-FOUND``ACTION-IF-NOT-FOUND`

```
AS_IF([test "$enable_gui" != "no"],
  [PKG_CHECK_MODULES([GTK],
    [gtk+-2.0],
    [enable_gui=yes],
    [AS_IF([test "$enable_gui" = "yes"],
      [AC_MSG_ERROR([gtk+-2.0 required, but not found.])],
      [enable_gui=no])])]) 
```

我们使用`AS_IF`而不是仅仅编写一个普通的 shell`if`表达式的原因是为了`autoconf`扩展一个封闭的宏可能需要的任何东西（这里在`PKG_CHECK_MODULES`内部依赖于像这样的宏`PKG_PROG_PKG_CONFIG`）。您可以通过执行类似`./configure --enable-gui PKG_CONFIG=/bin/false`.

无论如何，我们现在已经解决`enable_gui=check`了`enable_gui=yes`or `enable_gui=no`。现在我们必须将它传递给`automake`. 要使用的宏是[AM_CONDITIONAL](http://www.gnu.org/software/automake/manual/automake.html#Usage-of-Conditionals)。它的参数依次是`CONDITIONAL`（在 中使用的名称`Makefile.am`）和`CONDITION`（要设置的 shell 测试`CONDITIONAL`）：

```
AM_CONDITIONAL([ENABLE_GUI], [test "$enable_gui" = "yes"]) 
```

现在，我们转到`Makefile.am`，我将假设一个带有几个可选源的简单程序：

```
# You probably have something real for these.
AM_CFLAGS =
LDADD =

bin_PROGRAMS = elanprog
elanprog_SOURCES = elanprog.c elanfile.c

if ENABLE_GUI
AM_CFLAGS += $(GTK_CFLAGS)
LDADD += $(GTK_LIBS)
elanprog_SOURCES += elangui.c
endif 
```

# ios - 如何在 iOS 中创建语音识别

> ID：11898786
> 
> 赞同：0
> 
> 时间：2012-08-10T09:23:14.927
> 
> 标签：ios, iphone, ios5, voice-recognition

我想创建基于语音识别的应用程序。iOS 5+ 中是否有任何默认的委托功能或框架？如何进行语音识别？

# javascript - jQuery - before() 和 after() 的不同行为

> ID：11898792
> 
> 赞同：0
> 
> 时间：2012-08-10T09:23:30.120
> 
> 标签：javascript, jquery

我有一个可排序的列表（不是 jQuery UI 可排序的，只需单击按钮即可）。通过右侧排序可以`after()`正常工作，但左侧排序`before()`不起作用。

首先是代码：

*html*

**照片列表：**

```
<ul class="PhotoList">
   <li>
       <div class="ThumbWrapper">
           <img src="images/img_testphoto.jpg" />
       </div>
   </li>
   [...more Elements...]
</ul> 
```

**可选列表：**

（绝对位于照片上方）

```
<ul class="SelectablePolaroids">
  <li>
    <div class="Selectable">
        <div class="Tools">
            <div class="ArrowLeft Tool">
            </div>
            <div class="Delete Tool">
            </div>
            <div class="ArrowRight Tool">
            </div>
        </div>
    </div>
  </li>
  [...more Elements...]
</ul> 
```

*JS*

**绑定函数**

```
jQuery('.SelectablePolaroids .Selectable .ArrowLeft').live('click', function(){sortPolaroid(jQuery(this),0)});
jQuery('.SelectablePolaroids .Selectable .ArrowRight').live('click', function(){sortPolaroid(jQuery(this),1)}); 
```

**功能**

```
function sortPolaroid(elm, right)
{
    var selectitem = elm.parents('li');
    var index = jQuery('.SelectablePolaroids').children().index(selectitem);
    var photo = jQuery('.PhotoList').children().eq(index);
    selectitem.remove();
    photo.remove();
    if(right)
    {
        jQuery('.SelectablePolaroids').children().eq(index).after(selectitem);
        jQuery('.PhotoList').children().eq(index).after(photo);
    }
    else
    {
        console.log(index);
        jQuery('.SelectablePolaroids').children().eq(index).before(selectitem);
        jQuery('.PhotoList').children().eq(index).before(photo);
    }
 } 
```

如果`right`为 true 或被`.ArrowRight`点击，它会按预期工作。该项目被移除并插入到更右侧的位置。如您所见，我登录`index`以检查 else 语句是否完全执行以及索引是否正确。是的，执行 else 语句并且索引也是正确的。是以`before()`其他方式工作`after()`还是我只是对另一个错误视而不见？

**编辑：**

之后我也记录了索引`before()`。

```
//...
else {
   console.log(index);
   jQuery('.SelectablePolaroids').children().eq(index).before(selectitem);
   console.log(jQuery('.SelectablePolaroids').children().index(selectitem));
   jQuery('.PhotoList').children().eq(index).before(photo);
} 
```

它保持不变，根本没有任何变化......但它被删除了，这意味着它被插入到完全相同的位置，因此如果我执行以下操作，它就可以工作 -**我的解决方案**：

```
//...
else {
    jQuery('.SelectablePolaroids').children().eq(index-1).before(selectitem);
    jQuery('.PhotoList').children().eq(index-1).before(photo);
} 
```

但我真的不知道为什么......新元素应该在索引处，之前应该在索引之前插入它......如果有人知道请回答我很乐意接受答案:-)

...

好的，我自己想通了并回答了，对骚动感到抱歉，但也许其他一些人不太了解并且和我有同样的想法:-)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-10T09:33:29.427

`photo.remove();`实际上从树中删除了 dom 元素，所以我认为索引不匹配。尝试在不删除的情况下使用之前/之后，这只会移动元素。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-10T10:02:16.107

通过删除下一个元素而不是前一个元素获取索引，因此它将被插入到相同的位置。它适用，`after()`因为获取新索引的元素处于“正确的方向”，因此它适用于以下内容：

```
//...
else
{
    jQuery('.SelectablePolaroids').children().eq(index-1).before(selectitem);
    jQuery('.PhotoList').children().eq(index-1).before(photo);
} 
```

只是一个逻辑错误......经过适当思考后解决:-)

# node.js - 部署 node.js 应用程序（Windows）

> ID：11898804
> 
> 赞同：-3
> 
> 时间：2012-08-10T09:24:17.140
> 
> 标签：node.js

对于我的一个客户，我正在开发一个 node.js 应用程序。

我想给他一个简单的安装程序，它可以自动处理节点和相关模块的安装，而无需访问网络。

哪种方法是最好和最有效的方法？

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-10T11:32:04.503

只需给他 node.js 安装程序并压缩您的应用程序（带有 node_modules 目录）。他只需要安装 node.js 并解压缩 zip 文件。您可以编写一个启动应用程序的 .bat 文件。这应该很容易。

# php - 移动到服务器后，产品缩略图/数量/价格不显示在“最近添加的项目”上

> ID：11898806
> 
> 赞同：-1
> 
> 时间：2012-08-10T09:24:23.880
> 
> 标签：php, magento, webserver, local, product

将我的 Magento 从本地移动到服务器后，产品缩略图/数量/价格未显示在“最近添加的项目”部分。谁能帮我？非常感谢！

**在本地** ![在此处输入图像描述](../Images/f1b57645e25d60969c74e157381be123.png)

**在服务器上** ![在此处输入图像描述](../Images/adceb50f361b63edda9ca6180d9d1211.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-10T09:49:52.633

确保重新索引所有内容

# iphone - NSThread Sqlite 数据库

> ID：11898809
> 
> 赞同：0
> 
> 时间：2012-08-10T09:24:48.590
> 
> 标签：iphone, sqlite, nsthread

我正在从 web 服务下载大量数据并将数据插入 SQLite 数据库。我正在通过以下方式执行此操作`NSThread`：

```
NSAutoreleasePool *pool = [[NSAutoreleasePool alloc] init];
[NSThread detachNewThreadSelector:@selector(InsertIntoDatabase) toTarget:self withObject:nil]; 
[pool drain]; 
```

第一次运行应用程序时，数据被插入并且工作正常。第二次也插入了数据，但是当我第三次打开应用程序时它崩溃了，我在控制台中得到了这个：

> *** 断言失败 -[AttendeeDetails addData:anddbpath:], /Users/abhisheknaidu/Desktop/EventApp/AttendeeDetails.m:187 2012-08-10 14:53:21.120 EventApp[3020:1a33] ***
> 
> 由于未捕获的异常“NSInternalInconsistencyException”而终止应用程序，原因：“插入数据时出错。'数据库被锁定''

# php - 无法访问从 json_decode 创建的 stdClass 转换的数组中的元素

> ID：11898813
> 
> 赞同：0
> 
> 时间：2012-08-10T09:25:01.527
> 
> 标签：php, json, stdclass

```
$arr = array();
$arr[0] = "2a123";
$arr[1] = "2123";
$arr["other_option"] = "2123";

var_dump($arr);

$arr = json_encode($arr);

$arr = (array)json_decode($arr);

var_dump($arr);

var_dump( $arr[1]);
var_dump( $arr["1"]); 
```

2 last var_dump 的输出是 NULL NULL，如果我们删除第 4 行 $arr["other_option"] = "2123"; 它会正确输出，但我不明白为什么！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-10T09:31:56.190

而不是类型转换为 array ，设置`true`在[`json_encode`](http://in2.php.net/manual/en/function.json-decode.php)

> 当 TRUE 时，返回的对象将被转换为关联数组。

```
$arr = array();
$arr[0] = "2a123";
$arr[1] = "2123";
$arr["other_option"] = "2123";
$arr = json_encode($arr);   
$arr = json_decode($arr,true);
var_dump( $arr['other_option']); // return 2123 
```

[`working DEMO`](http://codepad.viper-7.com/vCe28f)

# php - 将 header('Content-Type: image/png') 放在任何地方

> ID：11898814
> 
> 赞同：3
> 
> 时间：2012-08-10T09:25:03.147
> 
> 标签：php, header, content-type

我想包含具有标题的代码，

是否可以放置

```
header('Content-Type: image/png') 
```

代码中的任何地方都不会出错？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-10T09:25:57.920

不`header()`，必须在有任何输出给用户之前。

从[文档](http://php.net/manual/en/function.header.php)：

请记住，必须在发送任何实际输出之前调用 header()，无论是通过普通 HTML 标记、文件中的空白行还是从 PHP 发送。使用 include 或 require 函数或其他文件访问函数读取代码并在调用 header() 之前输出空格或空行是一个非常常见的错误。使用单个 PHP/HTML 文件时也存在同样的问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-10T09:38:47.003

header() 应该在输出开始之前调用。请注意，在调用 header() 之前，甚至不应允许向浏览器输出空格。否则你会得到一个错误。

```
'<?php
header('Content-type:image/png');

// Business logic here

?>' 
```

希望这可以帮助。

# ios - 使用 RestKit 序列化嵌套集合的正确方法

> ID：11898815
> 
> 赞同：2
> 
> 时间：2012-08-10T09:25:04.753
> 
> 标签：ios, restkit

我正在使用 RestKit 发布我的专辑类和他的嵌套集合 o 歌曲（歌曲类）

我找不到正确的方法来序列化包含专辑歌曲的 NSArray：它将整个集合序列化为一种 NSDictionary 的集合。

我正在使用 v 0.10.0 并使用 NSObjects 而不是 CoreData

这是我的json结构：

```
{"album":
  {"id":12,
  "source":"apple",
  "collection_name":"The Platinum Collection",  
  "artist_name":"Queen",
  "collection_id":"28007467",
  "genre_id":5,
  "thumb":"mythumburl.jpg",
  "creation_user_id":1,
  "songs":[
    {"id":16,
    "track_name":"Bohemian Rhapsody",
    "track_time_millis":353933,
    "disc_number":1,
    "track_number":1,
    "track_time":"00:05:53"},
    ...
  ]
} 
```

这是我的实际映射：

```
RKObjectMapping *songMapping = [RKObjectMapping mappingForClass:[Song class]];

[songMapping mapKeyPath:@"id" toAttribute:@"code"];
[songMapping mapKeyPath:@"source" toAttribute:@"source"];
[songMapping mapKeyPath:@"album_id" toAttribute:@"album_id"];
[songMapping mapKeyPath:@"track_name" toAttribute:@"track_name"];
[songMapping mapKeyPath:@"track_time_millis" toAttribute:@"track_time_millis"];
[songMapping mapKeyPath:@"track_time" toAttribute:@"track_time"];

[songMapping mapKeyPath:@"disc_number" toAttribute:@"disc_number"];
[songMapping mapKeyPath:@"track_number" toAttribute:@"track_number"];
[songMapping mapKeyPath:@"preview_url" toAttribute:@"preview_url"];

[objectManager.mappingProvider setObjectMapping:songMapping forKeyPath:@"song"];
[objectManager.mappingProvider setSerializationMapping:[songMapping inverseMapping] forClass:[Song class]];

RKObjectMapping *albumMapping = [RKObjectMapping mappingForClass:[Album class]];
...
[albumMapping hasMany:@"songs" withMapping:songMapping];

// Setup our object mappings
[objectManager.mappingProvider setObjectMapping:albumMapping forKeyPath:@"album"];

[objectManager.mappingProvider setSerializationMapping:[albumMapping inverseMapping] forClass:[Album class]]; 
```

# windows-phone-7 - Windows 手机上的视频转换器

> ID：11898816
> 
> 赞同：0
> 
> 时间：2012-08-10T09:25:05.343
> 
> 标签：windows-phone-7, video-processing

我想为 windows phone 制作视频转换器。但我找不到用于此目的的库。我使用 ffmpeg 在 linux 和 windows 7 操作系统上做了同样的事情。但是我怎样才能为 Windows Phone 7 做到这一点？请帮忙。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-10T13:32:51.633

我认为这是不可能的，因为我在公共 SDK 中找不到任何关于 API 的内容。

# trace - dyld 是否有 ${LIB} 的等价物？

> ID：11898817
> 
> 赞同：1
> 
> 时间：2012-08-10T09:25:10.370
> 
> 标签：trace, dyld, ld-preload

我正在为跟踪库开发 Mac 启动器 - 通过将库添加到`DYLD_INSERT_LIBRARIES`（Mac 等价于`LD_PRELOAD`）来进行跟踪。然后，随着进一步的进程产生，该`DYLD_INSERT_LIBRARIES`变量由跟踪库传播。

问题是我需要 32 位版本的跟踪库用于 32 位跟踪进程，而 64 位版本用于 64 位跟踪进程。在我拥有的 Linux 启动器中，这是通过使用`${LIB}`in实现的`LD_PRELOAD`- 动态加载器 ( `ld.so`) 然后在加载进程时将其替换为“正确的东西”。

在 Mac 上是否有等效于`ld.so`' 的`${LIB}`变量？[当我查看手册页（ https://developer.apple.com/library/mac/#documentation/Darwin/Reference/ManPages/man1/dyld.1.html](https://developer.apple.com/library/mac/#documentation/Darwin/Reference/ManPages/man1/dyld.1.html)`dyld` ）时，我无法立即看到一个，但我可能会只是读错了。如果没有，请问有没有其他方法可以达到同样的效果？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-27T08:05:00.453

我认为您想要的是将插入的库编译为胖二进制文件（例如，同一二进制文件中的多个体系结构）。这应该允许单个值`DYLD_INSERT_LIBRARIES`适用于各种体系结构的子进程。

# jakarta-ee - 在 Java EE 的条形图中显示 Mysql 数据

> ID：11898818
> 
> 赞同：0
> 
> 时间：2012-08-10T09:25:13.493
> 
> 标签：jakarta-ee, bar-chart

我对Java EE中的数据分析非常陌生图表有什么简单的方法可以在图表中显示数据

提前致谢......

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-10T09:32:34.977

这可能（到目前为止）不是实现这一目标的最简单方法。但是既然您提到了 Java EE，那么您很有可能将 JSF 用于您的前端。

在这种情况下，如果您想要像其他 JSF 组件一样处理的条形图，并且可以很好地与您的 UI 的其余部分集成，请尝试[Primefaces 图表](http://www.primefaces.org/showcase/ui/barChart.jsf)。他们还有一系列其他更复杂的图表，您可能会觉得有帮助

# perl - 当我想打印到哈希键中的句柄时，为什么会出现语法错误？

> ID：11898820
> 
> 赞同：1
> 
> 时间：2012-08-10T09:25:14.307
> 
> 标签：perl, syntax-error, filehandle

我有代码将当前目录中文件的所有文件句柄存储为哈希值。键是文件的名称。

```
my %files_list;    #this is a global variable.
sub create_hash() {
    opendir my $dir, "." or die "Cannot open directory: $!";
    my @files = readdir $dir;
    foreach (@files) {
        if (/.text/) {
            open(PLOT, ">>$_") || die("This file will not open!");
            $files_list{$_} = *PLOT;
        }
    }
} 
```

在我面临一些编译问题的代码中，我正在使用打印语句。

```
my $domain = $_;
opendir my $dir, "." or die "Cannot open directory: $!";
my @files = readdir $dir;
foreach (@files) {
    if (/.text/ && /$subnetwork2/) {
        print $files_list{$_} "$domain";    #this is line 72 where there is error.
    }
}
closedir $dir; 
```

编译错误如下：

```
String found where operator expected at process.pl line 72, near "} "$domain""
        (Missing operator before  "$domain"?)
syntax error at process.pl line 72, near "} "$domain"" 
```

谁能帮我理解错误？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-10T09:47:28.940

第一个问题：运行`create_hash`子程序后，您将`%files_list`填满`*PLOT`所有键。

全部`print {$files_list{$_}} "$domain";`打印到最后打开的文件中。
解决方案：

```
-open(PLOT,">>$_") || die("This file will not open!");
-$files_list{$_}=*PLOT;
+open($files_list{$_},">>$_") || die("This file will not open!"); 
```

第二个问题：在打印到文件描述符之前，您没有检查文件描述符是否存在
解决方案：

```
-if(/.text/ && /$subnetwork2/)
-{
-    print $files_list{$_} "$domain";#this is line 72 where there is error.
+if(/.text/ && /$subnetwork2/ && exists $files_list{$_})
+{
+    print {$files_list{$_}} $domain; 
```

并且不要忘记关闭文件句柄...

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-10T12:30:31.983

也许您应该阅读[print 的文档](http://perldoc.perl.org/functions/print.html)。最后一段说：

> 如果您将句柄存储在数组或散列中，或者通常每当您使用比裸字句柄或普通的、未下标的标量变量更复杂的表达式来检索它时，您将不得不使用返回文件句柄值的块相反，在这种情况下不能省略 LIST：
> 
> ```
> print { $files[$i] } "stuff\n";
> print { $OK ? STDOUT : STDERR } "stuff\n"; 
> ```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-10T09:35:28.143

也许是这样的：

```
print {$files_list{$_}} "$domain"; 
```

# ant - Ant，无法编译来自 jboss.org 的 JBoss Transactions JTA 4.2.3.SP7

> ID：11898825
> 
> 赞同：0
> 
> 时间：2012-08-10T09:25:26.970
> 
> 标签：ant, jboss, transactions

我已经从 jboss.org [http://www.jboss.org/jbosstm/downloads/4-2-3-SP7](http://www.jboss.org/jbosstm/downloads/4-2-3-SP7)下载了 JBoss Transactions JTA 4.2.3.SP7 ，这是第一个链接。它是用 ant 编写的，当我尝试运行它时，我有多个关于缺少文件等的错误。我已经补充了所有这些错误，但是我得到了另一个关于文件中缺少变量等的错误。也许这不是最好的方法修复它，所以我离开了它。

那么，下载这个包后我应该怎么做才能运行它呢？提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-13T07:55:13.013

所以..解决方案是用ant 1.7.x编译它。问候。

# mysql - 如何将mysql从5.1更新到5.5

> ID：11898828
> 
> 赞同：1
> 
> 时间：2012-08-10T09:25:37.627
> 
> 标签：mysql, database, ubuntu, apt-get

我有一个 ubuntu 服务器详细信息如下

```
DISTRIB_ID=Ubuntu
DISTRIB_RELEASE=11.04
DISTRIB_CODENAME=natty
DISTRIB_DESCRIPTION="Ubuntu 11.04" 
```

我想在卸载 mysql 并运行此命令时从 mysql 5.1 升级到 5.5，然后再次安装相同版本的 mysql 服务器。

```
apt-get install mysql-server 
```

我如何使用包管理器安装 mysql 5.5 服务器，为什么 apt-get 没有安装可用的最新版本的 mysql 服务器，并且它有办法安装特定版本的 mysql 服务器

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-10T09:29:53.740

请参阅**[从 MySQL 5.1 升级到 5.5](http://dev.mysql.com/doc/refman/5.5/en/upgrading-from-previous-series.html)**。
不要忘记在安装之前备份您的数据。

# events - 如何编码 itemchanged 事件和数据窗口

> ID：11898839
> 
> 赞同：2
> 
> 时间：2012-08-10T09:26:36.597
> 
> 标签：events, powerbuilder, datawindow

我正在使用 PowerBuilder classic 12.5，在插入、编辑、创建和打印报告时遇到了困难。

我有一个`dw_NewEmployee`带有数据对象的数据窗口，`d_newrecord`它是可更新的。

1.  我应该使用列通过列插入记录还是在窗口对象上创建单行文本
2.  是`itemchanged`在数据对象或单行文本的列和行上使用的事件...我无法弄清楚如何实现验证规则。请给我一个例子来验证员工`ID_Number`

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-10T11:25:33.913

我看到您似乎对数据窗口的使用感到困惑。

我们试着总结一下：

1.  您基于数据库中的 sql 选择创建一个新的数据*窗口* （比如说它是一个网格），比如说。`d_newrecord``select id_number, name from employee`
2.  在数据窗口的*详细信息*区域（将在运行时为每条记录重复，但在设计中只重复一次），您需要为每一列放置一个列对象（在这里您将拥有`id_number`和`name`）这些对象都用于显示现有数据并接收用户输入以编辑数据和插入新记录。
3.  如果您需要使 dw 可更新，请不要忘记设置 Rows / Update 属性。
4.  在数据窗口的*标题*区域中，您可以将静态文本与每一列相关联，该文本只是在这里显示列名，它与表数据无关。
5.  在某些窗口对象中，您放置一个数据窗口*控件* `dw_newemployee`，其中将绘制数据窗口的内容，您将其设置`d_newrecord`为它的*数据对象*。
6.  您需要在某些时候设置 dw 的事务对象，例如在`open()`窗口事件中：

```
dw_newemployee.SetTransObject(sqlca)
dw_newemployee.Retreive() //if you are using some retreival arguments, don't forget to include them here 
```

当您想在表中插入新数据时（例如使用窗口按钮“添加”），`clicked()`如果您调用的按钮`dw_newemployee.InsertRow(0)`在末尾插入。

该`ItemChanged()`事件将在一个单元格被修改后触发，您将获得行、项目（一个 dwobject）和新数据。通过选择事件的返回值，您可以接受或拒绝新数据。

以下是`itemchanged()`事件中的字段验证示例：

```
long ll_return_code = 0
string ls_column
ls_column = lower(dwo.name)
choose case ls_column
    case "id_number"
        if long(data) = 42 THEN
            messagebox("validation error", "You cannot use 42 for the ID")
            ll_return_code = 1 //reject and stay in cell
        end if
    case "name"
        if data = "foobar" then 
            messagebox("validation error", "Do not use dummy value...")
            ll_return_code = 2 //reject but allow to go elsewhere
        end if
end choose

return ll_return_code 
```

# javascript - 404 包括 javascript

> ID：11898841
> 
> 赞同：-1
> 
> 时间：2012-08-10T09:26:45.907
> 
> 标签：javascript, node.js, pug

我有一个 node.js 应用程序，在访问 localhost/user/signup 时会加载一个注册表单：

```
html
  head
    script(type='text/javascript',src='https://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js')
    script(type='text/javascript',src='javascripts/validator.js')
    script(type='text/javascript',src='javascripts/signupValidation.js')
  body
    p(id='error', style='display:none;')#{error}
    form(id='signup',method='post',action='/signup')
      label(for='firstname') Firstname
      input(type='text', name='firstname')
      label(for='lastname') Lastname
      input(type='text', name='lastname')
      label Username
      input(type='text', name='username')
      label Password
      input(type='password', name='password')
      label Password again
      input(type='password', name='password2')
      label Email
      input(type='email', name='email')

      input(type='submit',value='Sign up', onclick="") 
```

但是当我访问该页面时，服务器控制台记录了获取 JavaScript 文件的 404 错误，它工作正常，直到我将要加载的注册页面从以下位置更改`localhost/signup`为`localhost/user/signup`：

```
app.get('/signup',user.signupForm); 
```

到：

```
app.get('/user/signup',user.signupForm); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-10T09:33:55.547

根据您的问题，我假设您没有移动 JavaScript 文件，因此您的目录结构如下所示：

```
localhost
|- user
|-- signup
|- javascripts 
```

在这种情况下，必须更改 JavaScript 文件的相对路径才能指向正确的文件：

```
script(type='text/javascript',src='../javascripts/validator.js')
script(type='text/javascript',src='../javascripts/signupValidation.js') 
```

请记住，如果您不使用绝对路径，则路径始终被视为*相对于当前目录*，因此在您的情况下，系统正在搜索 中的 JavaScript 文件`localhost/user/javascripts/`，该文件不存在，因此会导致 404 错误！

# c# - 防止 SQL 注入

> ID：11898847
> 
> 赞同：0
> 
> 时间：2012-08-10T09:26:50.497
> 
> 标签：c#, asp.net, sql, sql-injection, protection

是否有一个函数接受一个字符串作为参数并返回一个“清理过的”字符串，以支持防止 SQL 注入？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-10T09:30:59.913

您可以使用 AddWithValue 方法添加参数，如下所示：

```
SqlCommand cmd = new SqlCommand("Select * From Test Where TestID = @TestID");
cmd.Parameters.AddWithValue("@TestID", 5); 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-08-10T09:29:04.407

您需要使用参数、[LINQ to SQL](http://en.wikipedia.org/wiki/Language_Integrated_Query#LINQ_to_SQL_.28formerly_called_DLINQ.29)或[实体框架](http://en.wikipedia.org/wiki/ADO.NET_Entity_Framework)。

### LINQ 到 SQL

[http://weblogs.asp.net/scottgu/archive/2007/05/19/using-linq-to-sql-part-1.aspx](http://weblogs.asp.net/scottgu/archive/2007/05/19/using-linq-to-sql-part-1.aspx)

### 实体框架

[http://msdn.microsoft.com/en-us/data/ef.aspx](http://msdn.microsoft.com/en-us/data/ef.aspx)

### SQL 参数

[http://www.dotnetperls.com/sqlparameter](http://www.dotnetperls.com/sqlparameter)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-10T09:29:28.137

没有任何功能是完美的或万无一失的。您应该真正致力于通过其他方式（即存储过程、SQL 参数化等）防止 SQL 注入。

虽然这个功能相当有效:)

```
string CleanString(string s)
{
    return string.Empty;
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-10T09:31:39.007

我认为不存在一个足够聪明的函数来判断是否存在 SQL 注入的可能性。

但最好的办法是避免所有的可能性。例如，使用类型安全的 SQL 参数进行数据访问。

请看一看：

*   *[SQL 注入攻击以及如何预防它们的一些技巧](http://www.codeproject.com/Articles/9378/SQL-Injection-Attacks-and-Some-Tips-on-How-to-Prev)*

*   *[如何在我的 ASP.NET 应用程序中避免 SQL 注入攻击？](https://stackoverflow.com/questions/305044/how-can-i-avoid-sql-injection-attacks-in-my-asp-net-application)*

*   *[如何：防止 ASP.NET 中的 SQL 注入](http://msdn.microsoft.com/en-us/library/ff648339.aspx)*

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-08-10T10:33:49.453

[在 Security Stack Exchange 上查看这个问题](https://security.stackexchange.com/q/1257/485)的答案- 最适合您的路径可能是[OWASP 的 ESAPI](https://www.owasp.org/index.php/Category:OWASP_Enterprise_Security_API) - 他们的 Enterprise Security API，它具有 Java EE、.NET、[ASP Classic](http://en.wikipedia.org/wiki/Active_Server_Pages)、PHP、ColdFusion CFML、Python 的功能， JavaScript、Objective-C、Force com、Ruby、Swingset、C、C++ 和 Perl 是：

> 一个免费的、开源的、Web 应用程序安全控制库，使程序员更容易编写低风险的应用程序。ESAPI 库旨在使程序员更容易将安全性改进到现有应用程序中。ESAPI 库也为新开发奠定了坚实的基础。考虑到特定语言的差异，所有 OWASP ESAPI 版本都具有相同的基本设计：有一组安全控制接口。例如，它们定义了传递给安全控制类型的参数类型。每个安全控制都有一个参考实现。逻辑不是特定于组织的，逻辑也不是特定于应用程序的。一个例子：基于字符串的输入验证。每个安全控制都有可选的您自己的实现。这些类中可能包含由您的组织开发或为您的组织开发的应用程序逻辑。一个例子：企业认证。

并阅读此文档：*[SQL 注入预防备忘单](http://www.owasp.org/index.php/SQL_Injection_Prevention_Cheat_Sheet)*

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-08-10T09:29:51.447

我坚信使用参数来避免 SQL 注入。您可以编写存储过程或参数化查询来避免它。

除了 SQL 注入之外，参数还有很多好处，比如它可以处理很多日期和数字的问题......

# javascript - WP7 中带有 Google Analytics 的 PhoneGap 应用程序，无插件

> ID：11898852
> 
> 赞同：1
> 
> 时间：2012-08-10T09:27:13.627
> 
> 标签：javascript, windows-phone-7, cordova, google-analytics

我开发了集成了 Google Analytics 的 PhoneGap 应用程序。我只使用了“ga.js”javascript 文件。它被编辑，将“file:”字符串替换为“_file:”字符串），并集成到项目中。我使用这样的指令来注册用户操作：

```
window._gaq.push(["_trackEvent", "Application", "start"]);
...
window._gaq.push(["_trackEvent", "Pageview", pagecode]);
...
window._gaq.push(["_trackEvent", "Command", command, optLabel]); 
```

它在 Android 和 iOS 上运行良好。但它在 WP7 中不起作用：我没有收到任何错误，但你能帮帮我吗？

# java - JPA 自动 BigDecimal 转换

> ID：11898855
> 
> 赞同：3
> 
> 时间：2012-08-10T09:27:31.897
> 
> 标签：java, hibernate, jpa, db2, bigdecimal

我们正在使用 MyEclipse 生成我们的 jpa 访问层。之后我们有了生成的模型和数据层访问服务。我们遇到了一些具有定义精度的字段的问题。

实体：

```
@Entity
public class TestEntity{
   @Column(name="DECTEST", scale = 3, precision = 13)
   BigDecimal decTest;

} 
```

现在我们创建一个 bean 并尝试保存它：

```
TestEntity te = new TestEntity();
te.setDecTest(new BigDecimal(1.2));

TestEntityService.save(te); 
```

我们得到以下错误： Caused by: com.ibm.db2.jcc.c.SqlException: [ibm][db2][jcc][t4][1037][11190] BigDecimal 转换期间发生异常。详见附件 Throwable。

```
Caused by: com.ibm.db2.jcc.a.a: [ibm][db2][jcc][converters][608][10994] Overflow occurred during numeric data type conversion of "1.1999999999999999555910790149937383830547332763671875".
at com.ibm.db2.jcc.a.e.a(e.java:61)
at com.ibm.db2.jcc.b.jb.a(jb.java:1772)
... 73 more 
```

问题似乎是我们的 BigDecimals 规模高于数据库中的规模。

一个可行的解决方法是：

```
TestEntity te = new TestEntity();

BigDecimal decTest = new BigDecimal(1.2);

te.setDecTest(decTest.setScale(3,RoundingMode.HALF_UP);

TestEntityService.save(te); 
```

使用此解决方法，我们手动将 BigDecimals 精度降低到数据库之一。

但是，如果数据模型发生变化，我们将不得不手动调整比例。有没有办法让我们的 jpa / hibernate 实现自动为我们进行转换？例如设置属性。在创建 bean 的地方做这件事无论如何都是错误的。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-10T09:39:09.407

您可以使用自定义用户类型，或者您可以像这样简单地实现属性的设置器：

```
public void setDecTest(BigDecimal decTest) {
    this.decTest = decTest.setScale(3, RoundingMode.HALF_UP));
} 
```

这种舍入将因此被封装在实体中。

请注意，使用 double 来初始化 BigDecimal 有点奇怪。如果您想`1.2`存储在 BigDecimal 中，请使用`new BigDecimal("1.2")`，并且您不会使用 初始化 BigDecimal `1.1999999999999999555910790149937383830547332763671875`。

# python - Python检测并检索打开的csv文件的文件名

> ID：11898856
> 
> 赞同：2
> 
> 时间：2012-08-10T09:27:32.930
> 
> 标签：python, csv, filepath

我正在使用 VBA 将 Excel 工作表保存为 CSV 文件。宏将其保存为 CSV，然后在 excel 中打开。我有一个读取文件的python代码，用户选择它（使用tkinter）打开。

有没有办法修改我的 python 代码以检测打开的 csv 文件，以便我可以跳过用户选择阶段？我希望它返回文件路径或读取打开的 csv 文件。这是我的代码的当前版本，如果 csv 文件在 excel 中打开，则可以使用：

```
import numpy as np
from Tkinter import Tk
from tkFileDialog import askopenfilename
tk=Tk()
tk.withdraw()
filename = askopenfilename()
data = np.genfromtxt(filename, dtype=[('x',float),('y',float)],comments='"', delimiter=',',skip_header=1,missing_values=True)
tk.destroy()
x=data['x']
x = x[np.logical_not(np.isnan(x))]
y=data['y']
y = y[np.logical_not(np.isnan(y))]
print x
print y 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-10T09:45:19.060

哪个操作系统？如果是 Windows，请查看[Get name of active Excel workbook from Python](https://stackoverflow.com/questions/2876755/get-name-of-active-excel-workbook-from-python)。问题本身的代码可能会满足您的需求：

```
import win32com.client

xl = win32com.client.Dispatch("Excel.Application")
print(xl.ActiveWorkbook.FullName) 
```

如该问题的答案中所述，这仅打印最近打开的文件的路径，但在您的情况下，听起来宏正在打开文件，所以它可能会起作用吗？否则，看看实际的答案 - 它似乎非常完整。

# android - IntelliJ IDEA 创建签名的最终 apk，没有来自 /assets 的图像

> ID：11898859
> 
> 赞同：0
> 
> 时间：2012-08-10T09:27:43.940
> 
> 标签：android, intellij-idea, google-play

当我发现能够在我的 IntelliJ IDEA 11 中创建发布签名和保护的 apk 时，我感到非常高兴。但是创建的 apk 非常小（6 MB），相对于“production\out\mygame”中所有文件的 33 MB 我猜图像来自 /资产未包含在此最终 apk 中。或者我应该以某种方式将 classes.dex、mygame.apk.res 上传到 GooglePlay？谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-13T13:30:09.387

我能够从[提供的项目中](http://www.k-ct.com/temp/Game3_A.zip)[导出签名的 apk](http://www.jetbrains.com/idea/webhelp/export-signed-android-package-wizard.html)并在我的设备上运行它。尝试禁用 Proguard 选项，它对我不起作用，可能是因为您的项目需要不同的配置进行混淆。

签名的 APK 包含来自`/assets`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-14T10:38:26.810

最后我不对。IntelliJ 工作正常。在设备上安装未签名的 apk 是不可能的（我试图做的）。谢谢

# makefile - libzip makefile 错误：make: *** No rule to make target `/Makefile.common'。停止

> ID：11898860
> 
> 赞同：1
> 
> 时间：2012-08-10T09:27:47.640
> 
> 标签：makefile, zip

我从 github 克隆了 libzip，现在想做 make 但它给出了一个错误 ***No rule to make target '/Makefile.common' Stop。克隆的文件夹（libzip）有 3 个文件（libzip.spec、sources、Makefile）。这是 Makefile，可能是什么问题。

```
# This makefile is downloading any file found in 
# the 'sources' file already existing in this directory
# and validating the sha256sum of the archive against it.
NAME := libzip

define find-common-dir
for d in common ../common ../../common ; do if [ -f $$d/Makefile.common ] ; then echo "$$d"; break ; fi ; done
endef
COMMON_DIR := $(shell $(find-common-dir))

include $(COMMON_DIR)/Makefile.common

SOURCEFILES := $(shell cat sources 2>/dev/null | awk '{ print $$2 }' | awk -F'*' '{ print $$2 }')

sources: $(SOURCEFILES)

$(SOURCEFILES):
    @for sourcefile in $(SOURCEFILES); do \
        $(CLIENT) $(LOOKASIDE_URI)/$(NAME)/$${sourcefile}; \
    done

    sha256sum -c sources || ( echo 'SHA256 check failed' && rm $(SOURCEFILES); exit 1 )

clean:
    rm $(SOURCEFILES) 
```

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-09-02T20:52:32.863

请使用官方的 mercurial 存储库： [http](http://hg.nih.at/libzip/) ://hg.nih.at/libzip/ 如果您仍有问题，请告诉我们。

# facebook-c#-sdk - 无限刷新 - Facebook C# SDK 入门

> ID：11898862
> 
> 赞同：2
> 
> 时间：2012-08-10T09:27:52.023
> 
> 标签：facebook-c#-sdk

我在[http://csharpsdk.org/docs/web/getting-started](http://csharpsdk.org/docs/web/getting-started)中做了这个例子，它可以工作。
但是 javascript 是不断执行的，所以他不断地在服务器上发帖。
总是调用重定向到 About.aspx 的处理程序，并在代码隐藏中读取名称、ID 和其他用户信息。

> form.setAttribute("action", '/FacebookLogin.ashx');

在我的 MasterPage 中，我有 < div id="fb-root"> 和标签 < body> 之后的脚本代码（在正文内）。
在我的 Default.aspx 中，我有登录按钮。

你能帮助我吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-21T16:56:24.500

按照这个例子，我也遇到了同样的问题，我的问题原来是在我的 FacebookLogin.ashx 处理程序页面上，我重定向回原来的 aspx 页面，该页面包含我的 JavaScript 代码。输入此代码后，JavaScript 再次执行我的身份验证，从而使我陷入无限循环。

我最终做的是从[这里](http://www.thomasfrank.se/sessionvars.html)获取一些 JavaScript 的副本，它为您提供 JavaScript 中的持久会话变量。并在提交帖子的代码周围放置一个条件。这样我只打了一次 FacebookLogin.ashx 处理程序，不会让我陷入循环。

这是我正在使用的代码：

```
 FB.Event.subscribe('auth.authResponseChange', function (response) {
            if (response.status === 'connected') {
                // the user is logged in and has authenticated your
                // app, and response.authResponse supplies
                // the user's ID, a valid access token, a signed
                // request, and the time the access token 
                // and signed request each expire
                var uid = response.authResponse.userID;
                var accessToken = response.authResponse.accessToken;

                if (sessvars.fbauthenticated == undefined) {
                    sessvars.fbauthenticated = "1";

                    // Do a post to the server to finish the logon
                    // This is a form post since we don't want to use AJAX
                    var form = document.createElement("form");
                    form.setAttribute("method", 'post');
                    form.setAttribute("action", '/FacebookLogin.ashx');

                    var field = document.createElement("input");
                    field.setAttribute("type", "hidden");
                    field.setAttribute("name", 'accessToken');
                    field.setAttribute("value", accessToken);
                    form.appendChild(field);

                    document.body.appendChild(form);
                    form.submit();
                }

            } else if (response.status === 'not_authorized') {
                // the user is logged in to Facebook, 
                // but has not authenticated your app
            } else {
                // the user isn't logged in to Facebook.
            }
        }); 
```

*if (sessvars.fbauthenticated == undefined) {*的条件行阻止我的代码多次发布到服务器。

希望这可以帮助

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-11T23:48:21.083

[在这里](http://facebooksdk.codeplex.com/wikipage?title=Getting%20Started%20with%20an%20ASP.NET%20MVC%203%20Website%20%28With%20Javascript%20SDK%29&ANCHOR)的另一个演示中，有些人说这是本地主机上的 ie9/chrome 和 cookie 的问题。指向 127.0.0.1 并在 iis 上运行它是否为我解决了这个问题。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-10T23:11:35.057

将您的 AppId 更改为实际的 facebook 应用程序 id，您在注册应用程序后获得

```
FB.init({
  appId      : 'YOUR_APP_ID', // App ID
  status     : true, // check login status
  cookie     : true, // enable cookies to allow the server to access the session
  xfbml      : true  // parse XFBML
}); 
```

//这应该解决你的问题

# php - 多个子查询

> ID：11898863
> 
> 赞同：-1
> 
> 时间：2012-08-10T09:27:52.427
> 
> 标签：php, mysql, subquery

我有 3 个表：Table1、Table2、Table3

我想做一个查询，使用 Table1 的结果作为 Table2 的约束，Table2 的结果作为 Table3 的约束

所以我现在的查询是这样的：

```
SELECT tb3.id 
FROM tb3 
WHERE tb3.tag = (
                   SELECT tb2.num 
                   FROM tb2 
                   WHERE tb2.name = (
                                      SELECT tb1.user 
                                      FROM tb1 
                                      WHERE check = '0'
                                    )
                 ) 
```

例如，

tb1 有项目 'tb1.check', 'tb1.user';

tb2 有项目 'tb2.num', 'tb2.name';

tb3 有项目 'tb3.tag', 'tb3.id';

首先检查 tb1 的数据 where 'tb1.check'= 0 ，然后获取它的 'tb1.user'，

然后检查 tb2 的数据 where 'tb2.name' = 'tb1.user' 并得到 'tb2.num',

因此，检查 tb3 以获取 'tb3.tag' = 'tb2.num' 的数据，然后获取 'tb3.id'

但我得到的都是空的，有什么帮助吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-10T09:30:02.070

使用`INNER JOIN`而不是子查询：

```
SELECT tb3.id 
FROM tb3 
     INNER JOIN tb2  
         ON tb3.tag = tb2.num
     INNER JOIN Invitation inv
         ON tb2.name = inv.user AND
            inv.check = 0; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-10T09:32:34.670

实际上你可以使用`JOIN`

```
SELECT tb3.id 
FROM   tb3 
        INNER JOIN tb2  
            ON tb3.tag = tb2.num
        INNER JOIN Invitation inv
            ON tb2.name = inv.user
WHERE   inv.check = 0 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-10T09:35:54.397

试试这个...

```
SELECT tb3.id 
FROM tb3,tab2,tab1 
WHERE tb3.tag = tb2.num and 
tb2.name = tb1.user and 
tb1.check = '0' 
```

# c++ - 确定模板参数是否为指针

> ID：11898864
> 
> 赞同：2
> 
> 时间：2012-08-10T09:28:03.597
> 
> 标签：c++, pointers, templates, heap-memory, stack-memory

假设我们有模板类

```
template <typename T>
class MyTem{
public:
    bool is_T_Pointer(){
        <...>
    }
};
class Cls : MyTem<Cls>{
    <...>
};
int main(void){
    Cls* classOnHeap = new Cls(); /* T is pointer */
    Cls classOnStack; /* T is not pointer */
    <...>
} 
```

我知道这是一个不好的例子，但如果有人可以帮助我找出 T 是否是来自模板类的指针，那就太好了。

请记住，我们具有与基类相同类的模板的继承。

不必是完整的实现，一个模糊的技术就足够了

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-10T09:47:22.560

您应该在这里使用部分专业化：

```
template<class T>
class A
{
public:
    A() {}
};

template<class T>
class A<T*>
{
public:
    A(int) {}
}; 
```

那么下面的就不会编译了，因为编译器被迫选择模板的指针版本并且没有默认的构造函数：

```
A<char*> a; 
```

这确实编译：

```
A<char> a; 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-10T09:37:09.250

如果编译器支持 C++11，请使用[`std::is_pointer`](http://en.cppreference.com/w/cpp/types/is_pointer)：

```
#include <iostream>
#include <type_traits>

template <typename T>
class MyTem
{
public:
    static const bool IS_POINTER = std::is_pointer<T>::value;
};

int main()
{
    std::cout << MyTem<char*>::IS_POINTER << "\n";
    std::cout << MyTem<char>::IS_POINTER << "\n";
    return 0;
} 
```

请参阅演示[http://ideone.com/Mo394](http://ideone.com/Mo394)。

# java - eclipse juno插件项目中的mysql jdbc连接错误

> ID：11898867
> 
> 赞同：0
> 
> 时间：2012-08-10T09:28:29.563
> 
> 标签：java, mysql, jdbc, eclipse-plugin, eclipse-juno

我正在`mysql-connector-java-5.1.18-bin.jar`从视图中使用数据库连接。JDBC 连接代码已在 Eclipse Helios 中的 3 个 JSP-struts2 项目中使用，并且在那里运行良好。这里是扔

```
***No suitable driver found for jdbc:mysql://localhost:3306/studentinfo***.

***!ENTRY org.eclipse.ui 4 0 2012-08-10 14:45:22.635
!MESSAGE Unhandled event loop exception
!STACK 0
java.lang.NullPointerException
at org.iiitb.studentinfo.CaptureDetails.LoadToDatabase(CaptureDetails.java:50)*** and stack trace goes on. 
```

任何线索为什么会发生？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-10T09:33:14.250

您必须将`mysql-connector-java-5.1.18-bin.jar`文件包含到*构建路径*中或将其复制到`WEB-INF/lib`文件夹中。

# java - 通过代理连接到 FTPS

> ID：11898869
> 
> 赞同：1
> 
> 时间：2012-08-10T09:28:40.153
> 
> 标签：java, ftps

我们遇到的最初问题是，由于服务器证书不受信任，常规 FTP 下载开始失败。这促使我们怀疑证书是否在没有交易对手通知我们的情况下更新，因此我们想下载当前证书并将其与我们在密钥库中的证书进行比较。

这似乎是一个比我们预期的更棘手的问题。通常的嫌疑人（firefox，filezilla，...）似乎无法完成通过 FTP 代理连接到 FTP 服务器的任务，所以出于好奇，我开始尝试使用更底层的 java 方法。我不能为我的生活让它工作。

第一次（过于简单化）java尝试：

```
 // create proxy connection
    SocketFactory plainFactory = SocketFactory.getDefault();
    Socket proxy = plainFactory.createSocket(proxyServer, proxyPort);

    // create ssl connection on top of it?
    SSLSocketFactory sslFactory = getSocketFactory();
    SSLSocket socket = (SSLSocket) sslFactory.createSocket(proxy, server, port, true); 
```

这种方法显然行不通。

接下来我开始使用 ftp4j (http://www.sauronsoftware.it/projects/ftp4j/)，它似乎有一个干净且易于访问的代码库：

```
 FTPClient client = new FTPClient();
    client.setConnector(new FTPProxyConnector(proxyHost, proxyPort));
    client.getConnector().setConnectionTimeout(0);
    client.getConnector().setReadTimeout(0);
    client.setSSLSocketFactory(getSocketFactory());
    // also tried SECURITY_FTPS
    client.setSecurity(FTPClient.SECURITY_FTPES);
    client.connect(server, port); 
```

这输出：

```
REPLY: 220 Blue Coat FTP Service
SEND: USER anonymous
REPLY: 530-User Access denied.
REPLY: 530-
REPLY: 530-Usage: USER username@hostname
REPLY: 331        PASS userpassword
Exception in thread "main" java.io.IOException: Invalid proxy response 
```

代理服务器具有可选的身份验证，在我们的开发服务器上，我们通常使用“user@host”而不使用代理身份验证。因此，我假设用户名、主机名和密码是远程服务器的用户名、主机名和密码？

所以我尝试添加远程参数，这不起作用：

```
REPLY: 220 Blue Coat FTP Service
SEND: USER test@ftps.example.com
Exception in thread "main" java.io.IOException: FTPConnection closed 
```

添加代理用户以匹配 bluecoat 格式似乎也不起作用：

```
USER %u@%h %s
PASS %p
ACCT %w 
```

任何有关这两个问题的帮助都将受到欢迎：

*   如何通过 ftp 代理从 ftps 服务器检索服务器证书
*   如何通过java中的ftp代理连接到ftps服务器

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-08-10T15:11:14.283

您可能想尝试 Apache Net 公共库。

这是一个使用该 Net Commons 库的[类似线程](https://stackoverflow.com/questions/11390681/ftps-client-behind-a-proxy-server-using-apache-commons-net)

Net commons 还有一个功能齐全的 FTP 客户端[示例](http://commons.apache.org/net/examples/ftp/FTPClientExample.java)，因此您可以使用您知道有效的东西进行测试。

# php - 在两个 foreach 圆圈内打印 html

> ID：11898872
> 
> 赞同：0
> 
> 时间：2012-08-10T09:28:52.553
> 
> 标签：php, html

我一直在处理一些日历代码，但我似乎找不到方法..

所以，我有这个日历显示旅行（Y）、月份（X）和每个组合的相应价格。现在我需要添加额外的列，显示每次旅行的天数。我这样做了，效果很好，但我还必须按天数对它们进行排序和分组。

例如，第一列（包含旅行的名称）以标题开头：“1 天旅行”，然后是持续时间为 1 天的旅行。比其他标题：“2 日游”..等等。

为此，我必须创建两个嵌入的“foreach”圈子。主要的“foreach”显示标题“X 天游览”，而嵌入的“foreach”显示正确的游览。现在我的问题是如何打印出 html 代码？？？？这是代码：=>

```
 foreach($tour_durations as $d){ 

    **print "<tr><td colspan="4"><b>Tous of <?php echo $d;?> Days</b></td></tr>"**

    foreach($result->tour as $tour) {
                        if($tour->duration == $d){ ?>
    <tr>
    <td>
    <a href="<?php print $tour->tour_url_tracked; ?>"><?php print $tour->tour_name;?>
    </a></td>
    <?php 
print "<td><span class='month of'>".$tour->duration."</span></td>";?> 
```

<= 由星号包围，是有问题的代码..

显示它的权利方式是什么？怎么了？？

我希望我足够清楚！：/

提前致谢！！！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-10T09:31:16.590

```
echo "<tr><td colspan='4'><b>Tous of ".$d." Days</b></td></tr>"; 
```

代替

```
print "<tr><td colspan="4"><b>Tous of <?php echo $d;?> Days</b></td></tr>" 
```

应该这样做

# mysql - 如果匹配，mysql替换字符串中的最后一个字符

> ID：11898874
> 
> 赞同：9
> 
> 时间：2012-08-10T09:29:00.973
> 
> 标签：mysql, replace, tags

我有一张桌子，上面有一些需要替换的恶意标签

有问题的字符串结束`<tr>`并需要替换为`</table>`

并非所有记录都受到影响，所以我需要找到这些然后替换它们

我们使用 Update Replace Where 的技能是有限的，因为字符在字符串中不是唯一的，但它们的位置是，即最后 4 个字符

尝试过使用

```
UPDATE table
SET field
REPLACE (RIGHT(field,4),</table>) 
```

但怀疑这是过度简化（也失败了）

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-08-10T09:41:13.107

试试这个：

```
UPDATE table
SET field=concat(left(field,length(field) -4),'</table>') 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2016-11-25T13:48:05.090

我遇到了类似的情况，需要从`transaction`数字字段的末尾替换“_”，其中出现了不止一次的`_`in 字段。示例：20161124_C_BGN_5570.77_ & 20161121_C_HRK_1502360000__

**解决方案：**

```
UPDATE temp 
SET transaction = LEFT(transaction, LENGTH(transaction) -1) 
WHERE RIGHT(transaction, 1) = '_'; 
```

// 如果是双下划线 (__)

```
UPDATE temp 
SET transaction = LEFT(transaction, LENGTH(transaction) -2) # WHERE id = xxx WHERE RIGHT(transaction, 2) = '__'; 
```

# php - 在 Magento 观察者声明中使用<args></args>

> ID：11898878
> 
> 赞同：2
> 
> 时间：2012-08-10T09:29:07.270
> 
> 标签：php, arrays, magento, dispatchevent

*这既是一个问题，也是一种答案。但我仍然很想找到一个更好的解决方案，你可能会对此有所了解。*

在 Magento 中创建观察者时，负责调度它并调用在模块的 config.xml 文件中的观察者声明中配置的函数的方法是`Mage_Core_Model_App::dispatchEvent`.

在这种方法中，有一个收集观察者信息的代码位：

```
foreach ($eventConfig->observers->children() as $obsName=>$obsConfig) {
    $observers[$obsName] = array(
        'type'  => (string)$obsConfig->type,
        'model' => $obsConfig->class ? (string)$obsConfig->class : $obsConfig->getClassName(),
        'method'=> (string)$obsConfig->method,
        'args'  => (array)$obsConfig->args,
    );
} 
```

这个代码位意味着可以像这样在观察者中声明一个 <args> 节点：

```
<events>
    <event_to_observe>
        <observers>
            <observer_name>
                <type>singleton</type>
                <class>Namespace_Module_Model_ObserverClass</class>
                <method>observerMethod</method>

                <args>
                    <arg_name>arg_value</arg_name>
                </args>

            </observer_name>
        </observers>
    </event_to_observe>
</events> 
```

在后面`Mage_Core_Model_App::dispatchEvent`，我们可以找到一些代码，负责调用观察者的方法并将`$observer`对象作为参数传递。

但是，如果我是正确的，则没有代码将`$observers[$obsName]['args']`值设置为`$event`对象或`$observer`对象。结果是：观察者声明中的 < args > 节点在观察者的调用方法中不可访问（`Namespace_Module_Model_ObserverClass::observerMethod`在我之前的示例中）。

我的第一个赌注是尝试使用以下方法获取 <args> 节点：

```
$args = (array) Mage::getConfig()->getXpath('//events/' . $observer->getEvent()->getName() . '/observers/' . $observer->getName() . '/args'); 
```

但是，令人失望的是，`$name`变量（也用于`Mage_Core_Model_App::dispatchEvent`分析器）也没有传递给`$observer`对象......所以`$observer->getName()`没有返回任何数据。

所以我最终创建了一个辅助方法，任何 oberver 方法都可以调用它来检索它的 <args> 节点。您可以在此处找到此帮助程序的要点以及如何使用它：

[https://gist.github.com/3312869](https://gist.github.com/3312869)

有这样的东西会更容易`Mage_Core_Model_App::dispatchEvent`： `$observer->setMethodArgs($obs['args'])`允许`$observer->getMethodArgs()`在观察者方法中使用......

或者也许我错过了一些允许我们检索 <args> 节点的东西，但我不确定，通过核心代码搜索，我没有找到任何 <args> 节点，这意味着 Magento 没有在它的核。

所以，现在的问题是......**你有一个简单的 Magento Core 方法来从观察者声明中检索 <args> 吗？**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-10T23:11:04.353

不幸的断开`args`是……不幸的。该`<args>`节点似乎是退化的。但是，如果您有一个方法根据参数执行多种行为之一，则将这些不同的活动包含在不同的方法中可能是合适的。也就是说，虽然您需要为每个想要使用相同方法观察/使用的事件进行单独的总体配置，但您有三个选项：

为每个事件调用相同的方法，并通过使用 测试事件名称来控制观察者方法内部的行为`$observer->getEvent()->getName()`。

在每个事件观察器配置中调用一个不同的方法，并让这些方法在内部调用包含该行为的方法，并简单地传入一个参数来指示哪种行为。

修复您的 xpath 引用以检索 args：

```
Mage::getConfig()->getNode('global/events/'.$observer->getEvent()->getName().'/observers/your_config/args'); 
```

或者

```
Mage::getConfig()->getXpath('global/events/'.$observer->getEvent()->getName().'//args');
$args = $cfg[0]; 
```

请注意，后者`args`将从*任何*全局观察者配置中获取给定事件，其中包含`args`. 您可能希望添加一个节点以在节点内包含您的参数，*然后*`args`将其用作 xpath 的一部分 - 尽管任何其他模块都不太可能*使用* `args`，更不用说传入会影响模块处理的参数了。

# c++ - SPOJ GSS1 WA - 段树

> ID：11898879
> 
> 赞同：0
> 
> 时间：2012-08-10T09:29:08.653
> 
> 标签：c++, segment-tree

我正在尝试使用[段树解决 SPOJ 问题](http://community.topcoder.com/tc?module=Static&d1=tutorials&d2=lowestCommonAncestor#Segment_Trees)[GSS1](http://www.spoj.pl/problems/GSS1/)（你能回答这些查询吗）。我正在使用“init”方法来初始化树，并使用“query”方法来获取范围 [i,j] 中的最大值。

限制 |A[i]| <= 15707 和 1<=N（元素数）<=50000。

```
int A[50500], tree[100500];

void init(int n, int b, int e) // n=1, b=lower, e=end
{
    if(b == e)
    {
        tree[n] = A[b];
        return;
    }
    init(2 * n, b, (b + e) / 2);
    init(2 * n + 1, ((b + e) / 2) + 1, e);

    tree[n] = (tree[2 * n] > tree[2 * n + 1]) ? tree[2 * n] : tree[2 * n + 1];
}

int query(int n, int b, int e, int i, int j) // n=1, b=lower, e=end, [i,j]=range
{
    if(i>e || j<b) 
        return -20000;
    if(b>=i && e<=j)  
        return tree[n];

    int p1 = query(2 * n, b, (b + e) / 2, i, j);
    int p2 = query(2 * n + 1, ((b + e) / 2) + 1, e, i, j);

    return (p1 > p2) ? p1 : p2;
} 
```

程序给出了错误的答案。我调试了大多数情况下的代码（负数、奇数/偶数 N），但我无法弄清楚算法有什么问题。

如果有人能指出我正确的方向，我将不胜感激。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2016-06-15T13:14:38.143

我担心（接受的）答案在这里错过了一个非常重要的点。问题在于代码本身使用的算法。代码说节点的答案是它的子节点值的最大值。但是最大子数组很可能部分位于两个孩子中。例如

-1 -2 3 4 5 6 -5 -10 (n=8)

代码将输出 11 而答案是 18。

您还需要调查这种情况才能击败 WA。（我之所以回答这个问题，是因为接受的答案并不完全正确，也没有正确回答这个问题。）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-10T09:51:28.880

**编辑**：看来你的实现也是正确的，我只是有另一个。我们都误读了问题陈述。

* * *

我猜你`query`用参数调用你的函数

```
query( 1, 0, n-1, x-1, y-1 ); 
```

我相信当您的 n 不是 2 的 pow 时，以这种方式处理分段树是错误的。
我向您提供

1.  将数组扩大`tree`到 131072 个元素（2^17）和`A`65536 个（2^16）；
2.  发现最小的`k`这样不小于`n`并且是2的pow；
3.  将元素从`n`(0-based) 初始化为`k-1`-20000；
4.  `n`等于`k`; _
5.  确保你打电话`init(1,0,n-1);`

希望这能帮助您击败 WA。

# git - git shortlog：如何排除“（从提交中挑选的樱桃）”等等？

> ID：11898882
> 
> 赞同：0
> 
> 时间：2012-08-10T09:29:18.243
> 
> 标签：git, cherry-pick, git-log

`git shortlog`便于制作人类可读的更改摘要。但是，当我从主分支中挑选更改时，我使用该`-x`标志，`git cherry-pick`因为它记录了它选择的提交。这会导致短日志中的一些丑陋：

```
% git shortlog Version-3.5.3..3.5

Dan S (5):
  Fix typo that causes build fail on big-endian archs, thanks Felipe Sateler     (cherry picked from commit 4588258193072cd2fb845f7fb0b4670d6ad5edf2)
  fix build on ARM (where qreal==float); thanks Felipe Sateler     (cherry picked from commit 976d560060185c1e31c9f40660172f0054a4a05c)
  Strip gremlin characters from JITLib wrapForNodeProxy.sc     (cherry picked from commit d0842acae77a90b5eb9811d947ee2dad2282edff)
  choose clipping rather than wraparound for writing integer-format audio     files (libsndfile setting)
  arm build fix: another double->qreal in QcMultiSlider     (cherry picked from commit 548ad319dddf53e4edac1cfa44b3193027eefda2) 
```

有没有一种简单的方法可以告诉`git shortlog`我们不想要那些精选的行（在实际日志中的新行上）？

当然，我知道可以将它们过滤掉，例如使用`git shortlog Version-3.5.3..3.5 | sed 's/[(]cherry picked.*$//g'`. 但似乎git应该知道自己的注释并能够处理它们。我错过了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-10T09:43:42.810

您可以使用 --pretty 参数，如果您需要扫描大量日志，它非常有用：

[http://gitimmersion.com/lab_10.html](http://gitimmersion.com/lab_10.html)

我记得我过去看到过关于它的非常广泛的资源，但我再也找不到了。无论如何，如果这还不够，请进一步搜索。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-10T10:59:18.407

> 有没有一种简单的方法可以告诉 git shortlog 我们不想要那些樱桃挑选行（它们在实际日志中的新行上）？

目前，没有简单的方法可以`git shortlog`单独完成。

这些精选行添加在提交消息的第二行，因此大多数 git 工具将它们视为提交标题的一部分。正如文斯建议的那样，可以尝试为短日志条目提供自定义格式（带有`--format`选项），但是，似乎没有这样的漂亮格式或格式占位符，只会返回主题的第一行。（见`man git log`）

> 但似乎git应该知道自己的注释并能够处理它们。我错过了什么？

`git shortlog`实际上似乎只知道`[PATCH]`前缀（准确地说，就 regexp: 而言`^\s*\[PATCH[^]]*\]`）。

总而言之，我认为最好的办法是留下你的`sed`替补。

# performance - 如何通过 loadRunner 测试 thrift 服务的性能？

> ID：11898887
> 
> 赞同：0
> 
> 时间：2012-08-10T09:29:36.660
> 
> 标签：performance, testing, soa, thrift, performance-testing

我构建了一个使用 thrift 的服务，并通过 TServlet 将其托管在 tomcat 服务器上，协议是 TCompactProtocol

我想通过loadrunner测试服务，但是不知道怎么记录测试脚本

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-11T22:38:19.030

您将为 thrift 接口测试选择什么协议完全取决于您的实现中使用的传输

[http://thrift.apache.org/docs/concepts/](http://thrift.apache.org/docs/concepts/)

如果是原始 TCP，则为 Winsock。如果是 HTTP，那么 Web 虚拟用户（带有 Web_custom_requests() 和记录头）等等......

请注意，并非所有接口都是可录制的。有些你将不得不直接构建代码。使用 Thirft，您~~也许~~ 能够使用 Java 模板虚拟用户类型构建客户端。

如果这是您第一次尝试 Java 虚拟用户类型的套接字，那么您将希望有一位导师陪伴您。否则，它会非常痛苦，而且远不如应有的成果。

# c++ - C++ new 是 64 字节对齐的并且等于缓存行大小

> ID：11898888
> 
> 赞同：1
> 
> 时间：2012-08-10T09:29:39.480
> 
> 标签：c++, caching, pointers

> **可能重复：**
> [C++ 的新操作是否保证地址返回对齐？](https://stackoverflow.com/questions/506518/is-there-any-guarantee-of-alignment-of-address-return-by-cs-new-operation)

在这个程序中，我打印了**new**返回的每个无符号字符的地址。然后最后将它们向后删除。

```
#include "stdafx.h"
#include<stdlib.h>
void func();

int main()
{
    int i=10;
    while(i-->0)printf("loaded %i \n", (new unsigned char));
    getchar();
    unsigned char *p=new unsigned char;printf("last pointer loaded %i \n", p);
    i=10;
    while(i-->0)delete (p-=64);
    getchar();
    p+=640;
    delete p;//nearly forgot to delete this ^^
    return 0;
} 
```

输出：

![在此处输入图像描述](../Images/924995681bbe4ed9202901cd5a2f7598.png)

如您所见，每个**new**返回 64 字节对齐的数据。

**问题：**这个 64 字节等于缓存行大小还是只是一个编译器的东西？

**问题：**我应该让我的结构大多为 64 字节长吗？

**问题：**当我更改我的 cpu、ram、操作系统或编译器时，这会有所不同吗？

奔腾-m, VC++ 2010 express, windows-xp

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-10T22:20:28.080

The implementation choices for a heap manager make a lot more sense when you consider what happens after a large number of allocations and deallocations.

A call to `malloc()` needs to locate a block of unused block of sufficient size to allocate. It could be bigger (in which case, it could either create a free block with the difference - or waste it). A naive strategy of finding the closest size of block is called *best fit*. If it goes onto to create new free blocks, you could alternatively call it *worst leave*.

After use, the best-fit approach results in a large amounts of fragmentation, caused by small blocks that are unlikely to be ever allocated again, and the cost of searching the free blocks becomes high.

Consequently, high performance heap managers don't work like this. Instead they operate as pool allocators for various fixed block-sizes. Schemes in which the blocks are powers of 2 (e.g. `64,128,256,512...`) the norm, although throwing in some intermediates is probably worthwhile too (e.g. `48,96,192...)`. In this scheme, `malloc()` and `free()` are both `O(1)` operations, and the critical sections in allocation are minimal - potentially per pool - which gets important in a multi-threaded environment.

The wasting of memory in small allocations is a much lesser evil than fragmentation, `O(n)` alloc\dealloc complexity and poor MT performance.

缓存行大小的最小块大小是那些经典的工程权衡之一，可以肯定的是，微软做了很多实验来达到`64`他们的最小值。FWIW，我很确定您会发现现代 CPU 的缓存线大小比这更大。

# c# - 使用脚本复制和重命名资源文件

> ID：11898889
> 
> 赞同：0
> 
> 时间：2012-08-10T09:29:45.797
> 
> 标签：c#, visual-studio-2010

我目前正在开发一个具有多种语言选项的项目。我有大量使用我的第一语言的资源文件，并且想要复制这些文件并使用 Visual Studio 中的某种批处理脚本向它们添加一些文本。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-10T09:48:19.190

从VS内部很难实现。有许多独立工具可以单独编辑 .resx 文件（例如[http://resx.sourceforge.net](http://resx.sourceforge.net)或[http://resxmanager.com](http://resxmanager.com)）。翻译 gthe 文件时有很大帮助，但我不知道任何能够编写/批处理工作的能力。

RESX 是简单的 XML 文件，因此我认为您可以更快地编写简单的控制台应用程序来通过标准 C#/Perl/Ruby/Python 库加载 XML、修补文本并将它们写回文件而不是搜索可编写脚本的文件工具，但也许我错了。我也很高兴看到这样的工具！:)

- 编辑：

使用纯 .bat 批处理文件可能会很困难，因为 Windows 控制台只是缺少正确的字符串替换命令，而且您必须使用一些棘手的命令，例如[在此处查看 BAT](https://stackoverflow.com/a/3811991/717732) .. 至少像 grep 或 sed 这样的小工具会很方便，并且脚本将更加灵活 100%。

你可以很容易地使用 PowerShell、CygWin、Ruby 等，甚至是你应该已经随 Windows 一起安装的 JScript/VBScript。[VBS 中的此类脚本请参见此处](https://stackoverflow.com/a/3809876/717732)。它只扫描特定的直接无子文件夹，但您可以轻松地将其与[此示例](http://blogs.msdn.com/b/gstemp/archive/2004/08/10/212113.aspx)混合以获取递归目录遍历。顺便提一句。VBS 保存在此类扩展名的文件中：`myscript.vbs`并且可以简单地双击或简单地运行，就像 .bat 或 .exe 文件一样。

然而，所有这些都更像是典型的编程。如果你有一些复杂的重命名要做，如果你手头没有任何 Python/Ruby/blargh，我建议只用 C# 编写它，因为代码会更友好。

# java - enum.values() 的顺序是否始终相同

> ID：11898900
> 
> 赞同：26
> 
> 时间：2012-08-10T09:30:38.310
> 
> 标签：java, enums

> **可能重复：**
> [enum.values() - 是返回的枚举确定性的顺序](https://stackoverflow.com/questions/3820149/enum-values-is-an-order-of-returned-enums-deterministic)

我有一个类似下面的枚举：-

```
enum Direction {

    EAST,
    WEST,
    NORTH,
    SOUTH
} 
```

如果我`values()`在 Direction 枚举上说，那么值的顺序会一直保持不变。我的意思是值的顺序将始终采用以下格式：

```
EAST,WEST,NORTH,SOUTH 
```

或者订单可以随时更改。

* * *

## 回答 #1

> 赞同：41
> 
> 时间：2012-08-10T09:34:09.320

每种`Enum`类型都有一个静态方法，该方法返回一个数组，该数组**按照声明的顺序**`values`包含枚举类型的所有值。

 **此方法通常与 for-each 循环结合使用，以迭代枚举类型的值。

Java 7 规范文档链接： [http ://docs.oracle.com/javase/specs/jls/se7/html/jls-8.html#jls-8.9.2](http://docs.oracle.com/javase/specs/jls/se7/html/jls-8.html#jls-8.9.2)

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-08-10T09:42:06.613

该方法的行为在[Java 语言规范 #8.9.2](http://docs.oracle.com/javase/specs/jls/se7/html/jls-8.html#jls-8.9.2)中定义：

> 此外，如果 E 是枚举类型的名称，则该类型具有以下隐式声明的静态方法：

```
/**
* Returns an array containing the constants of this enum   
* type, in the order they're declared.  This method may be  
* used to iterate over the constants as follows:  
*  
*    for(E c : E.values())  
*        System.out.println(c);  
*  
* @return an array containing the constants of this enum   
* type, in the order they're declared  
*/  
public static E[] values(); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-10T09:54:25.953

正如前面2个答案所说，顺序是声明的顺序。但是，依赖此顺序（或枚举的序数）并不是一个好习惯。如果有人对声明重新排序或在声明中间添加新元素，则代码的行为可能会发生意外变化。如果有固定的顺序，我会执行`Comparable`.

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-10T09:55:53.920

`Enums`用于将变量的值限制为枚举列表中唯一声明的值之一。

这些值是`public static final`，即（该特定枚举类型的常量对象），**其顺序对于将变量映射到这些对象非常重要。**

`values()`是 a `static method of Enum`，它**总是以相同的顺序返回值。****

# java - Java中的Mysql到Postgresql的转换工具

> ID：11898902
> 
> 赞同：1
> 
> 时间：2012-08-10T09:30:45.217
> 
> 标签：java, mysql, postgresql

是否有可以将 mysql 转储转换为 postgresql 转储的 Java 工具。

谷歌搜索得到了这个，[https://github.com/maxlapshin/mysql2postgres](https://github.com/maxlapshin/mysql2postgres)。这是一颗红宝石。在我当前的开发环境中，不允许安装 Ruby。

使用的版本

*   mysql 5.1
*   Postgres 8.2

注意：`mysqldump --compatible=postgresql` 没用！

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-10T10:25:47.470

首先，PostgreSQL 8.2 是古老且[不受支持](http://www.postgresql.org/support/versioning/)的。紧急升级。阅读每个 .0 版本的发行说明，了解您可能面临的任何兼容性问题。

至于转换，您通常应该分两个阶段进行。转换并加载架构，*然后*转换并加载数据。

通常自动化工具不会很好地转换数据库模式。您应该进行仅模式转储，在其上运行转换工具，然后在将其加载到 PostgreSQL 之前对其进行手动编辑和手动检查。

一旦你有一个看起来正常的模式，从 MySQL 做一个仅数据转储，并尝试将它加载到一个 PostgreSQL 实例中，并在其中加载你转换的模式。`mysqldump --compatible=postgresql`可能会做得更好，尽管您可能还需要额外的标志。

如果您尝试过但仍然没有任何运气，请考虑跟进更多细节。如果您跟进，请报告确切的错误消息，而不仅仅是“不起作用”。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-10T10:34:00.977

考虑下载[高级服务器](http://enterprisedb.com/products-services-training/products/postgres-plus-advanced-server/downloads)并使用内置迁移工具包。

但是，您应该像 Craig 所说的那样 - 升级到受支持的 postgresql 版本。

# python - 我的models.py有什么问题

> ID：11898908
> 
> 赞同：1
> 
> 时间：2012-08-10T09:31:01.660
> 
> 标签：python, django, django-models, django-1.4

我正在使用 Django 1.4 和 PostgreSQL 9.1.4

我的models.py有什么问题

```
class UserProfile(models.Model):
    ROLES_TYPE = (
        ('Employee', 'Employee'),
        ('Employor', 'Employor'),
    )
    user = models.OneToOneField(User, related_name='Profile')
    role = models.CharField(max_length=15, choices=ROLES_TYPE)

class Student(models.Model):
    id = models.AutoField(db_column='studentid', primary_key=True)
    username = models.OneToOneField(UserProfile, related_name='Employee')
    first_name = models.CharField(db_column='fname', max_length=100,
                              null=True, blank=True)
    last_name = models.CharField(db_column='lname', max_length=100,
                             null=True, blank=True) 
```

当我运行 ./manage.py syncdb 时，出现错误

```
Creating tables ...
Creating table Student
Traceback (most recent call last):
  File "manage.py", line 10, in <module>
    execute_from_command_line(sys.argv)
  File "/home/jayapaldharmamani/Projects/jayapal/aplink/aplink_env/local/lib/python2.7/site-packages/django/core/management/__init__.py", line 443, in execute_from_command_line
utility.execute()
  File "/home/jayapaldharmamani/Projects/jayapal/aplink/aplink_env/local/lib/python2.7/site-packages/django/core/management/__init__.py", line 382, in execute
self.fetch_command(subcommand).run_from_argv(self.argv)
  File "/home/jayapaldharmamani/Projects/jayapal/aplink/aplink_env/local/lib/python2.7/site-packages/django/core/management/base.py", line 196, in run_from_argv
    self.execute(*args, **options.__dict__)
  File "/home/jayapaldharmamani/Projects/jayapal/aplink/aplink_env/local/lib/python2.7/site-packages/django/core/management/base.py", line 232, in execute
    output = self.handle(*args, **options)
  File "/home/jayapaldharmamani/Projects/jayapal/aplink/aplink_env/local/lib/python2.7/site-packages/django/core/management/base.py", line 371, in handle
    return self.handle_noargs(**options)
  File "/home/jayapaldharmamani/Projects/jayapal/aplink/aplink_env/local/lib/python2.7/site-packages/django/core/management/commands/syncdb.py", line 102, in handle_noargs
    cursor.execute(statement)
  File "/home/jayapaldharmamani/Projects/jayapal/aplink/aplink_env/local/lib/python2.7/site-packages/django/db/backends/util.py", line 40, in execute
    return self.cursor.execute(sql, params)
  File "/home/jayapaldharmamani/Projects/jayapal/aplink/aplink_env/local/lib/python2.7/site-packages/django/db/backends/postgresql_psycopg2/base.py", line 52, in execute
    return self.cursor.execute(query, args)
django.db.utils.DatabaseError: column "id" referenced in foreign key constraint does not exist 
```

删除相关名称和 ID 字段后的 SQL 查询

> 创建表“admin_userprofile”（
> 
> > ```
> >  "id" serial NOT NULL PRIMARY KEY,
> >        "user_id" integer NOT NULL UNIQUE REFERENCES "auth_user" ("id") DEFERRABLE     INITIALLY DEFERRED,
> >         "role" varchar(15) NOT NULL
> >     ); 
> > ```
> > 
> > 创建表“学生”（
> > 
> > > ```
> > >  "id" serial NOT NULL PRIMARY KEY,
> > >        "username_id" integer NOT NULL UNIQUE REFERENCES "admin_userprofile" ("id") DEFERRABLE INITIALLY DEFERRED
> > >     ); 
> > > ```

请帮我。

谢谢和问候， Jayapal D

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-10T09:41:39.303

尝试`db_column='studentid'`从模型中的`id`列中删除`Student`。

为什么要更改列名？

另外，你为什么不使用自动ID呢？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-10T10:19:52.617

这是由您的数据库而不是 django 本身产生的问题。尝试重新创建您的数据库架构（您可以删除所有相关列并执行`./manage.py syncdb`.

# java - 如何最好地为我的 Java bean 模型实现 save() 和 setDirty()？

> ID：11898912
> 
> 赞同：2
> 
> 时间：2012-08-10T09:31:16.843
> 
> 标签：java, spring, javabeans

我有一个 Java 模型，它实际上是一棵 Java bean 树。我的应用程序的不同区域可以更改模型的不同 bean。完成后，我想保存模型，它应该能够计算出哪些 bean 实际发生了变化，并在那里调用

我知道我可以在所有 bean 中实现 save()、isDirty() 和 setDirty() 方法，并让 setter 检查是否有更改并调用 setDirty()。但理想情况下，我不想以编程方式为每个 setter 执行此操作。我希望能够在没有额外编码的情况下向 bean 添加新属性。

我也知道 PropertyChangeListeners，但是我必须再次以编程方式在每个 setter 中触发更改。

任何人都可以推荐一种模式/方面/注释，我可以用来让我的生活更轻松吗？我不认为我想要实现的一切都是新的或开创性的，所以希望那里有我可以使用的东西。

请注意，我正在使用基本的 Java 进行编码，因此没有可以依赖的花哨的框架（期望 Spring 用于 bean 管理 - 在我的模型之外）。

提前致谢。

# asp.net - Routes.Ignore 不起作用

> ID：11898920
> 
> 赞同：0
> 
> 时间：2012-08-10T09:31:37.030
> 
> 标签：asp.net, routing, url-routing

我正在为我的网站使用 url 路由结构。当我使用 url 路由（尤其是多段）时，我的 css 和 js 文件未加载。我使用了 Route.Ignor 但不起作用。

```
void RouteMap(RouteCollection route)
{
    route.RouteExistingFiles = false;
    route.Ignore("{resource}.axd/{*pathInfo}"); //Not work
    routes.Ignore("{resource}.css/{*pathInfo}"); //Not work
    routes.Ignore("Styles/{*pathInfo}"); //Not work
    routes.Ignore("Styles/"); //Not work

    route.MapPageRoute("", "Guide", "~/Guide.aspx");
    route.MapPageRoute("", "Guide/{key}", "~/Guide.aspx");
    route.MapPageRoute("", "Search/{key}", "~/Search.aspx");
}

void Application_Start(object sender, EventArgs e)
{
    RouteMap(RouteTable.Routes);
}

<link href="~/Styles/Site.css" rel="stylesheet" type="text/css" />
<script src="~/Scripts/jquery.min.js" type="text/javascript"></script> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-11T05:04:57.923

试试这个：

`<link href="/Styles/Site.css" rel="stylesheet" type="text/css" />`

`<script src="/Scripts/jquery.min.js" type="text/javascript"></script>`

你的 CSS 或 JS 文件路径应该以 " / " --> src="* */* *Scripts/jquery.min.js" 开头

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-10T10:05:35.250

如果您使用经典模式，请尝试为您的应用程序使用 IIS 集成应用程序池（供 .NET 运行时处理的 css 文件）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-08-21T15:53:00.523

```
colRoutes.RouteExistingFiles = False

colRoutes.Ignore("{*allaxd}", New With {.allaxd = ".*\.axd(/.*)?"})
colRoutes.Ignore("{*allaspx}", New With {.allaspx = ".*\.aspx(/.*)?"})
colRoutes.Ignore("{*allascx}", New With {.allascx = ".*\.ascx(/.*)?"})
colRoutes.Ignore("{*allashx}", New With {.allashx = ".*\.ashx(/.*)?"})
colRoutes.Ignore("{*allhtm}", New With {.allhtm = ".*\.htm(/.*)?"})
colRoutes.Ignore("{*allhtml}", New With {.allhtml = ".*\.html(/.*)?"})
colRoutes.Ignore("{*allcss}", New With {.allcss = ".*\.css(/.*)?"})
colRoutes.Ignore("{*alljs}", New With {.alljs = ".*\.js(/.*)?"})
colRoutes.Ignore("{*allpng}", New With {.allpng = ".*\.png(/.*)?"})
colRoutes.Ignore("{*allgif}", New With {.allgif = ".*\.gif(/.*)?"})
colRoutes.Ignore("{*alljpg}", New With {.alljpg = ".*\.jpg(/.*)?"})
colRoutes.Ignore("{*alltif}", New With {.alltif = ".*\.tif(/.*)?"})
colRoutes.Ignore("{*allico}", New With {.allico = ".*\.ico(/.*)?"})
colRoutes.Ignore("{*allttf}", New With {.allttf = ".*\.ttf(/.*)?"})
colRoutes.Ignore("{*alleot}", New With {.alleot = ".*\.eot(/.*)?"})
colRoutes.Ignore("{*allsvg}", New With {.allsvg = ".*\.svg(/.*)?"})
colRoutes.Ignore("{*allwoff}", New With {.allwoff = ".*\.woff(/.*)?"}) 
```

# java - 如何将 .txt 转换为 XML

> ID：11898921
> 
> 赞同：0
> 
> 时间：2012-08-10T09:31:37.653
> 
> 标签：java, xml, file-conversion

我想制作一个 java 代码，它接受这个 .txt 并将其输出为 .xml 。XML文件应该是同伴模式，例如

文本文件：

```
数据 rtr Deme_MS_GDA_DRGH R_2LOAM_OML13 R_OML13_OLMUA

LINE R_LG_OML13_2LOAM _LINETYP_20 0.500 0.250 0.000 0.000 0.000 0.000 0.000 0.000 0.000

SHUT MT -1 R_2LOAM_OML13_LSMT -1 e 0.000 NT -1 R_2LOAM_OML13_NTR -1 a 0.000 MT -1 R_2LOAM_OML13_QK R_2LOAM_GG_____GG____ e 0.000

质量 0x0

短路 0x0 -1 -1 -1 -1

```

XML 中的输出应该是这样的：

```
<?xml version="1.0"?>

<Field>
<DATA  feldsimtyp="rtr" feldtoptyp="Deme_MS_GDA_DRGH" feld="R_2LOAM_OML13"  gegenfeld="R_OML13_OLMUA">            
<LINE          name="R_LG_OML13_2LOAM" leitungstyp="_LINETYP_20" leitungslaenge="0.500" grenzstrom="0.250" unsymL1="0.000"  unsymL2="0.000"  unsymL3="0.000" resistanz="0.000" reaktanz="0.000" betriebskapazitaet="0.000" erdkapazitaet="0.000"/ >
<SHUT>
   <SHUT typ="MT" meldung="-1" name="E_AOLM2_OLM14_VSLT" anschlussknoten="-1" einschaltzustand="e" kurzschlussstrom=0.000"/>    
   <SHUT typ="NT" meldung="-1" name="R_2LOAM_OML13_NTR" anschlussknoten="-1" einschaltzustand="a" kurzschlussstrom=0.000"/>
   <SHUT typ="MT" meldung="-1" name="R_2LOAM_OML13_QK" anschlussknoten="R_2LOAM_GG_____GG____" einschaltzustand="e" kurzschlussstrom=0.000"/>   
</SHUT>
  <MASS  bitmsake="0x0">
  </MASS> 
<SHORT  bitmaske="0x0" schalter1="-1" schalter2="-1" schalter3="-1" schalter4="-1"/>
</Field> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-10T09:38:07.767

照原样，我认为没有直接的方法可以做到这一点。

您可以尝试迭代文件，使用一些自定义逻辑自己解析它，然后使用诸如[StAX](http://today.java.net/pub/a/today/2006/07/20/introduction-to-stax.html)之类的东西从头开始构建 XML。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-10T09:44:50.797

似乎是正则表达式的一个案例。这些由 java 通过[Pattern](http://docs.oracle.com/javase/1.4.2/docs/api/java/util/regex/Pattern.html)类支持。

请参阅以下示例并尝试一下。

```
import java.util.regex.Matcher;
import java.util.regex.Pattern;

public class RegexDemo {

public static void main(final String[] args) {
    final String data = "#DATA  rtr Deme_MS_GDA_DRGH R_2LOAM_OML13 R_OML13_OLMUA";
    final Pattern PATTERN = Pattern.compile("^#DATA\\s+(\\w+)\\s+(\\w+)\\s+(\\w+)\\s+(\\w+)$");
    final Matcher matcher = PATTERN.matcher(data);
    if (matcher.matches()) {
        final String xmlData = String.format("<DATA a='%s' b=%s c=%s d=%s />", matcher.group(1), matcher.group(2), matcher.group(3), matcher.group(4));
        System.out.println(xmlData);
    }

} 
```

}

# javascript - Django：在 URL 反向调用中使用 Javascript 变量作为参数

> ID：11898927
> 
> 赞同：8
> 
> 时间：2012-08-10T09:32:01.960
> 
> 标签：javascript, django

有没有办法在 Django 模板 url 反向调用中使用 .js 变量作为参数？下面的方法不起作用，这并不奇怪：

```
"fnRender": function ( o, val ) {
     return '<a href="{% url update_task o.aData[0] %}">' + o.aData[1]  +'</a>';
} 
```

我知道我可以通过 Django 视图传递所需的数据，但不幸的是我必须使用 .js 库中的数据。

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-08-10T09:46:00.960

我通常做的是将某种默认参数传递到模板中的 URL 中，它充当哨兵，然后我可以在 Javascript 中动态替换它。就像是：

```
var url = '{% url update_task "foobarbaz" %}';
url = url.replace('foobarbaz', o.aData[0]);
return '<a href="' + url + '">' + o.aData[1]  +'</a>'; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-02T16:37:11.660

您可以将 url 作为变量传递给您的模块：

```
<script src="{{ STATIC_URL }}js/my-module.js"></script>
<script>
$(function(){
    MyModule.init('{% url my_url %}');
});
</script> 
```

```
// js/my-module.js
var MyModule = {
    init: function(url) {
        doSomething(url);
    }
}; 
```

或与许多

```
<script src="{{ STATIC_URL }}js/my-module.js"></script>
<script>
$(function(){
    MyModule.init({
        my_url: '{% url my_url %}',
        other_url: '{% url other_url "param" %}'
    });
});
</script> 
```

```
// js/my-module.js
var MyModule = {
    init: function(options) {
        var my_url = options.my_url,
            other_url = options.other_url;

        doSomething(my_url);
    }
}; 
```

我对这个解决方案有点不满意，最后我编写了自己的应用程序来使用 django 处理 javascript：[django.js](http://pypi.python.org/pypi/django.js)。有了这个应用程序，我可以：

```
{% load js %}
{% django_js %}
{% js "js/my-module.js" %} 
```

```
// js/my-module.js
var MyModule = {
    init: function() {
        var my_url = Django.url('my_url'),
            other_url = Django.url('other_url','param'),
            my_static_file = Django.file('some-file.json');

            doSomething(my_url);
    },
    other: function(param) {
        $.get(Django.url('other_url', param), {urlParam: 'urlParam'}, function(data) {
            doSomethingElse(data);
        });
};

$(function(){
    MyModule.init();
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-10T09:36:49.817

您将需要[在 JavaScript 中使用字符串格式](http://www.masterdata.se/r/string_format_for_javascript/)将值硬塞到 URL 客户端。在 JavaScript 中使用它之前，不要忘记将其编码为 JSON。

# asp.net - 在 Azure 虚拟机上使用 RavenDb 的 Azure 网站 - 401 未经授权

> ID：11898934
> 
> 赞同：2
> 
> 时间：2012-08-10T09:32:36.233
> 
> 标签：asp.net, iis, azure, cloud, ravendb

我正在尝试在 Windows Azure 上使用 RavenDb 设置网站。

我首先设置了一个虚拟机并在其上启动了 RavenDb。使用 IIS 和 Windows 身份验证进行配置。[我按照这里](http://ravendb.net/docs/server/deployment/as-iis-application)所说的进行了配置，一切正常。我创建了一个端点，并且能够从虚拟机的 url 访问数据库。

接下来，我尝试在 Visual Studio 中运行时从我的应用程序访问数据库。我尝试的连接字符串类似于：

```
<add name="RavenDB" connectionString="Url=http://myRavenApp.cloudapp.net/; 
Database=MyDatabase; Domain=myRavenApp; User=RavenDbUser; Password=password" /> 
```

和

```
<add name="RavenDB" connectionString="Url=http://myRavenApp.cloudapp.net/; 
Database=MyDatabase; User=myRavenApp\RavenDbUser; Password=password" /> 
```

两个连接字符串都有效，我的应用程序就像一个魅力。

然后我在 Azure 中创建了一个网站，并在上面部署了我的应用程序。当我这样做时，我的应用程序开始抛出

```
[Win32Exception (0x80004005): The handle specified is invalid]
System.Net.NTAuthentication.GetOutgoingBlob(Byte[] incomingBlob, Boolean throwOnError, SecurityStatus& statusCode) +6089632
System.Net.NTAuthentication.GetOutgoingBlob(String incomingBlob) +68
System.Net.NegotiateClient.DoAuthenticate(String challenge, WebRequest webRequest, ICredentials credentials, Boolean preAuthenticate) +6176993
System.Net.NegotiateClient.Authenticate(String challenge, WebRequest webRequest, ICredentials credentials) +17
System.Net.AuthenticationManager.Authenticate(String challenge, WebRequest request, ICredentials credentials) +259
System.Net.AuthenticationState.AttemptAuthenticate(HttpWebRequest httpWebRequest, ICredentials authInfo) +159
System.Net.HttpWebRequest.CheckResubmitForAuth() +222
System.Net.HttpWebRequest.CheckResubmit(Exception& e) +223

[WebException: The remote server returned an error: (401) Unauthorized.]
System.Net.HttpWebRequest.GetResponse() +6115603
Raven.Client.Connection.HttpJsonRequest.ReadStringInternal(Func`1 getResponse) +233
Raven.Client.Connection.HttpJsonRequest.ReadResponseString() +776
Raven.Client.Connection.HttpJsonRequest.ExecuteRequest() +29
Raven.Client.Connection.ServerClient.DirectPutIndex(String name, String operationUrl, Boolean overwrite, IndexDefinition definition) +464
Raven.Client.Connection.<>c__DisplayClass3b.<PutIndex>b__3a(String operationUrl) +77
Raven.Client.Connection.ServerClient.TryOperation(Func`2 operation, String operationUrl, Boolean avoidThrowing, T& result) +225
Raven.Client.Connection.ServerClient.ExecuteWithReplication(String method, Func`2 operation) +824
Raven.Client.Connection.ServerClient.PutIndex(String name, IndexDefinition definition, Boolean overwrite) +185
Raven.Client.Indexes.AbstractIndexCreationTask.Execute(IDatabaseCommands databaseCommands, DocumentConvention documentConvention) +101
Raven.Client.Indexes.IndexCreation.CreateIndexes(ExportProvider catalogToGetnIndexingTasksFrom, IDatabaseCommands databaseCommands, DocumentConvention conventions) +154
Raven.Client.Indexes.IndexCreation.CreateIndexes(ExportProvider catalogToGetnIndexingTasksFrom, IDocumentStore documentStore) +71
Raven.Client.Indexes.IndexCreation.CreateIndexes(Assembly assemblyToScanForIndexingTasks, IDocumentStore documentStore) +115
Property.Base.DocumentManager.Initalize() +151
Property.Web.MvcApplication.Application_Start() +177 
```

所以我尝试了上述两个连接字符串和其他一些连接字符串，它总是这样。如果我尝试从 Management Studio 或调试时从我的 Visual Studio 访问服务器，我可以访问服务器，但是当我在 Azure 网站上部署时，我收到此错误。

如果有人知道如何解决这个问题，我将不胜感激。

# rabbitmq - 如何使用 routing_key 和 queues

> ID：11898936
> 
> 赞同：0
> 
> 时间：2012-08-10T09:32:54.607
> 
> 标签：rabbitmq, amqp, pika

我正在设置一个消费者，它将监听来自两个不同来源的消息。我想对来自这两个来源的消息进行不同的回调（尽管欢迎其他解决方案）。

我对 rabbitmq 和 pika 很陌生，我还没有掌握细节。但我想知道的是：

我应该使用不同的队列并设置两个

```
channel.basic_consume(callback_1, ...)
channel.basic_consume(callback_2, ...) 
```

对于我的回调或者我应该用路由键做一些技巧吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-10T10:07:48.790

这取决于您的需求。这真的是关于处理，我最熟悉Java，所以我会告诉你我是如何处理事情的，然后你可以根据它做出决定。

如果我需要让不同的线程处理不同的数据或对数据做不同的事情，我会创建两个不同的队列，每个线程将使用不同的队列。我使用主题交换来确保队列获得正确的消息。如果数据只是略有不同，那么使用路由键我可以用同一个线程以不同的方式处理数据。该决定完全基于我需要的并行性，即我想要处理数据的队列数。

# asp.net - 301 从 webforms 应用程序重定向到 asp.net mvc 3 应用程序

> ID：11898942
> 
> 赞同：1
> 
> 时间：2012-08-10T09:33:19.213
> 
> 标签：asp.net, asp.net-mvc-3, url-routing, http-status-code-301

我想从托管在 IIS6 中的旧 asp.net webforms 网站执行 301 重定向到托管在同一服务器中的 asp.net mvc 3 应用程序。以下是我想重定向到新 url 的 url。

[http://oldsite.com/blog/888-miso-collapsible-origami-tables.aspx](http://oldsite.com/blog/888-miso-collapsible-origami-tables.aspx) => www.somesite.com/postdetails/miso-collapsible-origami-tables

[http://oldsite.com/blog.aspx?tag=art](http://oldsite.com/blog.aspx?tag=art) => www.somesite.com/Blog/TagPosts?tag=art&tagPostType=1

[http://oldsite.com/blog.aspx?month=2012-3&p=2](http://oldsite.com/blog.aspx?month=2012-3&p=2) =>www.somesite.com

我如何为以上设置到新站点的匹配路由并进行 301 重定向。我不知道如何将带有查询字符串的 url 与我的 asp.net mvc 3 webapplication 匹配。路由是什么样的在我的新 mvc 应用程序中，我是否需要在新应用程序的 web.config 中进行更改？

在此先感谢，S。

# matlab - 查找 NaN 值是元胞数组

> ID：11898945
> 
> 赞同：7
> 
> 时间：2012-08-10T09:33:41.310
> 
> 标签：matlab, cells

假设我有以下数组：

```
a = {1; 'abc'; NaN} 
```

现在我想找出其中包含 NaN 的索引，以便我可以用 '' （空字符串）替换它们。

如果我使用`cellfun`with`isnan`我得到一个无用的输出

```
cellfun(@isnan, a, 'UniformOutput', false)

ans = 
[          0]
[1x3 logical]
[          1] 
```

那么我该怎么做呢？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-08-10T09:50:31.217

确实，正如您发现自己的那样，这可以通过

```
a(cellfun(@(x) any(isnan(x)),a)) = {''} 
```

分解：

```
Fx = @(x) any(isnan(x)) 
```

将返回一个*逻辑标量*，无论`x`是标量还是向量。然后在内部使用此功能`cellfun`将消除对`'UniformOutput', false`：

```
>> inds = cellfun(Fx,a)
inds =
     0
     0
     1 
```

这些可以用作原始数组的索引：

```
>> a(inds)
ans = 
    [NaN] 
```

这反过来又允许分配给这些索引：

```
>> a(inds) = {''}
a = 
    [1]
    'abc'
    '' 
```

请注意，必须对元胞数组本身进行分配。如果您不理解这一点，请阅读`a(inds)`和之间的区别`a{inds}`。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-10T09:41:03.087

[我在http://www.mathworks.com/matlabcentral/answers/42273](http://www.mathworks.com/matlabcentral/answers/42273)上找到了答案

```
a(cellfun(@(x) any(isnan(x)),a)) = {''} 
```

不过，没看懂……

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-10T13:10:14.773

*   `a(ind) = []`将从数组中删除条目
*   `a(ind)= {''}`将替换为`NaN`空字符串。

如果要删除条目，请使用`= []`而不是`= {''}`.
如果您想`NaN`用不同的值替换 s，只需使用花括号将其设置为等于该值：

```
a(ind) = {value} 
```

# linux - 我如何并行grep

> ID：11898949
> 
> 赞同：10
> 
> 时间：2012-08-10T09:33:48.517
> 
> 标签：linux, grep

我通常用`grep -rIn pattern_str big_source_code_dir`来找东西。但`grep`不是平行的，我该如何让它平行？我的系统有4个核心，如果`grep`可以使用所有核心，那就更快了。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-08-10T09:39:32.307

如果您使用 HDD 存储您正在搜索的目录，则不会提高速度。硬盘驱动器几乎是单线程访问单元。

但是如果你真的想做并行 grep，那么[这个网站](http://www.commandlinefu.com/commands/view/2887/grep-or-anything-else-many-files-with-multiprocessor-power)给出了两个提示，告诉你如何用`find`和来做`xargs`。例如

```
find . -type f -print0 | xargs -0 -P 4 -n 40 grep -i foobar 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2016-01-06T12:57:23.810

GNU`parallel`命令对此非常有用。

```
sudo apt-get install parallel # if not available on debian based systems 
```

然后，`paralell`手册页提供了一个示例：

```
EXAMPLE: Parallel grep
       grep -r greps recursively through directories. 
       On multicore CPUs GNU parallel can often speed this up.

       find . -type f | parallel -k -j150% -n 1000 -m grep -H -n STRING {}

       This will run 1.5 job per core, and give 1000 arguments to grep. 
```

在您的情况下，它可能是：

```
find big_source_code_dir -type f | parallel -k -j150% -n 1000 -m grep -H -n pattern_str {} 
```

最后，GNU 并行手册页还提供了描述`xargs`与`parallel`命令之间差异的部分，这应该有助于理解为什么并行在您的情况下看起来更好

```
DIFFERENCES BETWEEN xargs AND GNU Parallel
       xargs offer some of the same possibilities as GNU parallel.

       xargs deals badly with special characters (such as space, ' and "). To see the problem try this:

         touch important_file
         touch 'not important_file'
         ls not* | xargs rm
         mkdir -p "My brother's 12\" records"
         ls | xargs rmdir

       You can specify -0 or -d "\n", but many input generators are not optimized for using NUL as separator but are optimized for newline as separator. E.g head, tail, awk, ls, echo, sed, tar -v, perl (-0 and \0 instead of \n),
       locate (requires using -0), find (requires using -print0), grep (requires user to use -z or -Z), sort (requires using -z).

       So GNU parallel's newline separation can be emulated with:

       cat | xargs -d "\n" -n1 command

       xargs can run a given number of jobs in parallel, but has no support for running number-of-cpu-cores jobs in parallel.

       xargs has no support for grouping the output, therefore output may run together, e.g. the first half of a line is from one process and the last half of the line is from another process. The example Parallel grep cannot be
       done reliably with xargs because of this.
       ... 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2017-11-03T12:09:17.930

请注意，您需要转义并行 grep 搜索词中的特殊字符，例如：

`parallel --pipe --block 10M --ungroup LC_ALL=C grep -F 'PostTypeId=\"1\"' < ~/Downloads/Posts.xml > questions.xml`

使用独立的 grep，`grep -F 'PostTypeId="1"'`可以在不转义双引号的情况下工作。我花了一段时间才弄清楚！

还要注意使用`LC_ALL=C`和`-F`标志（如果您只是搜索完整的字符串）以获得额外的加速。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2021-06-04T02:56:17.240

这里有 3 种方法可以做到这一点，但您无法获得其中两种方法的行号。

(1) 对多个文件并行运行 grep，在这种情况下是一个目录及其子目录中的所有文件。添加`/dev/null`强制 grep 将文件名添加到匹配行，因为你会想知道匹配的文件。调整`-P`机器的进程数。

```
find . -type f | xargs -n 1 -P 4 grep -n <grep-args> /dev/null 
```

(2) 对多个文件串行运行 grep 但并行处理 10M 块。调整您的机器和文件的块大小。这里有两种方法可以做到这一点。

```
# for-loop
for filename in `find . -type f`
do 
  parallel --pipepart --block 10M -a $filename -k "grep <grep-args> | awk -v OFS=: '{print \"$filename\",\$0}'"
done

# using xargs
find . -type f | xargs -I filename parallel --pipepart --block 10M -a filename -k "grep <grep-args> | awk -v OFS=: '{print \"filename\",\$0}'" 
```

(3)结合(1)和(2)：对多个文件并行运行grep，并以块的形式并行处理它们的内容。为您的机器调整块大小和 xargs 并行度。

```
find . -type f | xargs -n 1 -P 4 -I filename parallel --pipepart --block 10M -a filename -k "grep <grep-args> | awk -v OFS=: '{print \"filename\",\$0}'" 
```

请注意，（3）可能不是资源的最佳利用方式。

我有一个[更长的文章](https://www.highonscience.com/blog/2021/03/21/parallel-grep/)，但这是基本的想法。

# html - 悬停图像时奇怪的星号？

> ID：11898952
> 
> 赞同：1
> 
> 时间：2012-08-10T09:33:57.050
> 
> 标签：html, css, hover, image

我有一个用于 Magento 的 jcarousel 插件，可以显示特色产品。当您将鼠标悬停在图像上时，它会显示更大版本的图像。`*`在那个更大的版本中，左上角有一个（星号）。

这有点难以解释，您可以在[http://www.dooor.nl/](http://www.dooor.nl/)上将鼠标悬停在页面中间的旋转木马上（新闻通讯上方，移动滑块下方）。

我不知道它是如何到达那里的，它不在原始插件中。问题是我无法使用 firebug 访问它以查看它的来源，因为我无法选择悬停的图像。

编辑：这是原始插件：[http](http://www.hellothemes.com/demo/?theme=hellowear) ://www.hellothemes.com/demo/?theme=hellowear 。你可以看到没有星号。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-10T09:51:27.897

它在你的图像上——如果你在 Photoshop 的左上角看，有一个小的星号形区域是透明的。由于预览的背景是深灰色，因此它穿过图像并且看起来像一个星号。

如果您不想自己修复所有图像，可以将其添加到 CSS 中：

```
#preview img {
    background-color: white;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-10T09:49:30.240

试试这个：

转到这个文件

```
<script type="text/javascript" src="http://www.dooor.nl/skin/frontend/default/tribeca/js/imgpreview.js"></script> 
```

`c`并从此行中删除：

```
jQuery("body").append("<div id='preview'><img src='"+ this.rel +"' alt='Loading' /></div>"); 
```

此外，要使悬停的图像停留在此位置，请在同一文件中注释掉整个部分：

```
jQuery("a.preview").mousemove(function(e){
        jQuery("#preview")
            .css("top",(e.pageY - xOffset) + "px")
            .css("left",(e.pageX + yOffset) + "px");
    }); 
```

这样，您可以将鼠标悬停在图像上并通过 Firebug 检查其 CSS。让我知道你发现了什么

# c# - 如何将对象从一个视图发送到下一个视图

> ID：11898955
> 
> 赞同：0
> 
> 时间：2012-08-10T09:34:07.120
> 
> 标签：c#, windows-phone-7

考虑以下场景：

您在一个包含大量数据的视图中（即一个包含大量`ListBox`项目的视图）。数据已从外部数据源下载，并且包含许多未在当前视图中公开的属性。您想制作详细视图以显示此信息。

当您连接您`ListBoxItem`的 s 以在导航 URL 中使用附加的“id=”导航到新视图时，您可以使用给定的 ID 参数轻松地再次查询数据源（即 REST 服务）以获取数据。但是数据已经在父视图上可用了——那么你怎么能以某种方式将这些数据发送到下一个视图——跳过对数据源的另一个调用并加速你的应用程序呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-10T09:34:07.120

我确信有几种方法可以做到这一点，但这是在不使用任何外部库的情况下完成它的最简单方法。

创建一个实用程序类 - `NavigationUtility`（或其他） - 并实现以下结构：

```
public static class NavigationUtility
{
    // The object to send
    private static object passedObject = null;

    // A method to fetch the object
    public static object GetObject() {
        // implementation below
    }

    // Utility method to check if an object was passed
    public static bool HasObject() 
    {
        return passedObject != null;
    }

    // A method to navigate to a page
    public static void Navigate(string url, object obj = null)
    {
        // implementation below
    }
} 
```

这是您将要实现的接口。它有一个私有变量，可以在视图之间转换时保证您的对象安全，以及用于导航和获取发送的信息的方法。

现在，您需要考虑一些事情才能以正确的方式实现这一点。

1.  您必须只能获取传递的对象一次 - 否则粗心的使用可能会使错误的对象出现在程序的错误部分。
2.  为了使用它而不是在`NavigationService.Navigate(Uri)`整个应用程序中导航的方法，它还必须能够处理不需要发送对象的情况。

那么让我们看看我们接口中的第一个方法`GetObject`——以及它是如何实现的：

```
public static object GetPassedObject() 
{
    var obj = passedObject;
    passedObject = null; 
    return obj;
} 
```

如您所见，我们通过在每次获取属性时将内部传递对象清空来轻松满足需求＃1。这将通过以下方式工作（在接收视图中）：

```
NavigationUtility.HasObject(); // returns true if an object was sent
var data = NavigationUtility.GetObject() as SomeModel; // fetches the object and casts it
NavigationUtility.HasObject(); // returns false always; 
```

现在有趣的一点 - 实现`Navigate`- 方法：

```
public static void Navigate(string url, object obj = null) 
{
    // Saves the object
    passedObject = obj;

    if( url != null && url.length > 0 )
    {
        // Creates the Uri-object
        Uri uri = new Uri(url, UriKind.Relative);

        // Navigates the user (notice the funky syntax - so that this can be used from any project
        (Application.Current.RootVisual as PhoneApplicationFrame).Navigate(uri);
    }
} 
```

就是这样！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-10T09:45:38.300

在使用应用程序对象创建数据的帮助下，当您调用 REST 服务时，您可以轻松地将对象数据导航到另一个视图，确保您的数据也将设置为您的应用程序对象

您还可以使用 json 对象并将其设置为任何全局对象

# c# - C# - SQL - LINQ 查询

> ID：11898957
> 
> 赞同：1
> 
> 时间：2012-08-10T09:34:09.853
> 
> 标签：c#, sql, linq

这个查询有一些问题::

```
var q2 =
    from sd in db.ServerDrives
    where sd.DriveLetter == driveList[i].Name
    select sd;
ServerDrive existingServerDrives = q.First();
existingServerDrives.FreeSpace = driveList[i].FreeSpace;
//..
db.SubmitChanges(); 
```

我的问题是我不知道将 [i] 的引用放在哪里。

[i] 的参考 ::

```
for (int i = 0; i < driveList.Count; i++) 
```

我可以把它放在上面，

```
existingServerDrives.FreeSpace = driveList[i].FreeSpace; 
```

该行可以识别它，但是由于 .（下面的代码），我需要整个查询来识别它。线

```
where sd.DriveLetter == driveList[i].Name; 
```

有谁知道我怎么可能做到这一点？

编辑：完整代码：：

```
class Program
{
    List<DriveInfo> driveList = DriveInfo.GetDrives().Where(x => x.IsReady).ToList<DriveInfo>(); //Get all the drive info
    Server server = new Server();  //Create  the server object
    ServerDrive serverDrives = new ServerDrive();

    public static void Main()
    {
        Program c = new Program();
        c.RealDriveInfo();
        c.WriteInToDB();
    }

    public void RealDriveInfo()
    {

        //Insert information of one server - You will need get information of all servers
        server.ServerID = 0; //Here is necessery put PK key. I recommend doing the SQL server will automatically generate the PK.
        server.ServerName = string.Concat(System.Environment.MachineName);

        //Inserts information in the newServers object
        for (int i = 0; i < driveList.Count; i++)
        {

            //Put here all the information to object Server                
            serverDrives.DriveLetter = driveList[i].Name;
            serverDrives.TotalSpace = driveList[i].TotalSize;
            serverDrives.DriveLabel = driveList[i].VolumeLabel;
            serverDrives.FreeSpace = driveList[i].TotalFreeSpace;
            serverDrives.DriveType = driveList[i].DriveFormat;
            server.ServerDrives.Add(serverDrives);

        }
    }

    public void WriteInToDB()
    {
        //Add the information to an SQL Database using Linq.
        DataClasses1DataContext db = new DataClasses1DataContext(@"sqlserver");
        db.Servers.InsertOnSubmit(server);

        var q2 =
            from s in db.Servers
            where s.ServerName == "LAPTOP-043"
            select s;
        Server existingServers = q2.First();
        for (int i = 0; i < driveList.Count; i++)
            existingServers.ServerName = string.Concat(System.Environment.MachineName);
        //..
        for (int i = 0; i < driveList.Count; i++)
        {
            var q =
                from sd in db.ServerDrives
                where sd.DriveLetter == driveList[i].Name
                select sd;
            ServerDrive existingServerDrives = q.First();
            existingServerDrives.FreeSpace = driveList[i].FreeSpace;
            //..
            db.SubmitChanges(); 
```

我要做的是让查询找到与此计算机上的驱动器 C:\ 相同的“DriveLetter”行。然后，第二部分应该更改 FreeSpace 值并将其替换为从控制台应用程序检索到的新 FreeSpace 值。

任何反馈将不胜感激，在此先感谢:)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-10T09:37:37.660

不知道你想说什么或做什么，但是这个怎么样：

```
for (int i =0; i < driveList.Count; i++)
{
var q2 =
    from sd in db.ServerDrives
    where sd.DriveLetter == driveList[i].Name
    select sd;
ServerDrive existingServerDrives = q2.First();
existingServerDrives.FreeSpace = driveList[i].FreeSpace;
//..
db.SubmitChanges();
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-10T09:41:47.177

Jane Doe 的想法是正确的。只是为了添加一个解释，从您模糊的描述看来，您是这样写的：

```
for (int i = 0; i < driveList.Count; i++)
var q2 =
    from sd in db.ServerDrives
    where sd.DriveLetter == driveList[i].Name
    select sd;
ServerDrive existingServerDrives = q.First();
existingServerDrives.FreeSpace = driveList[i].FreeSpace;
//..
db.SubmitChanges(); 
```

这解释如下：

```
for (int i = 0; i < driveList.Count; i++)
{
    var q2 =
        from sd in db.ServerDrives
        where sd.DriveLetter == driveList[i].Name
        select sd;
}

ServerDrive existingServerDrives = q.First();
existingServerDrives.FreeSpace = driveList[i].FreeSpace;
//..
db.SubmitChanges(); 
```

该变量`i`仅在循环体内有效。解决方案是将花括号放在您希望在循环中运行的所有代码周围，并且您还需要更改`q`为`q2`.

```
for (int i = 0; i < driveList.Count; i++)
{
    var q2 =
        from sd in db.ServerDrives
        where sd.DriveLetter == driveList[i].Name
        select sd;

    ServerDrive existingServerDrives = q2.First();
    existingServerDrives.FreeSpace = driveList[i].FreeSpace;
    //..
    db.SubmitChanges();

} 
```

另请注意，这不是更新多行的最有效方法，因为每次更新执行两个数据库请求。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-10T09:54:18.390

**更新：**有关关闭处理的详细信息，请阅读答案末尾的说明。

第一件事。这段代码：

```
 for (int i = 0; i < driveList.Count; i++)
    {
        var q =
            from sd in db.ServerDrives
            where sd.DriveLetter == driveList[i].Name
            select sd;
        //...
   } 
```

无论花括号如何，都不会工作。原因是关闭`i`（被有趣的 LINQ 语法掩盖了）。修复它的最简单方法是将`i`值（或引用值）存储在单独的变量中。

```
 for (int i = 0; i < driveList.Count; i++)
    {
        var j = i;
        var q =
            from sd in db.ServerDrives
            where sd.DriveLetter == driveList[j].Name
            select sd;
        //...
    } 
```

这会起作用，但它看起来很松散。更好的：

```
 for (int i = 0; i < driveList.Count; i++)
    {
        var drive = driveList[i];
        var q =
            from sd in db.ServerDrives
            where sd.DriveLetter == drive.Name
            select sd;
        ServerDrive existingServerDrives = q.First();
        existingServerDrives.FreeSpace = drive.FreeSpace;
        //..
        db.SubmitChanges();
    } 
```

但是为什么你首先需要循环呢？为什么不`foreach`呢？

```
 foreach (var drive in driveList)
    {
        var q =
            from sd in db.ServerDrives
            where sd.DriveLetter == drive.Name
            select sd;
        ServerDrive existingServerDrives = q.First();
        existingServerDrives.FreeSpace = drive.FreeSpace;
        //..
        db.SubmitChanges();
    } 
```

但这也行不通，要小心。闭包也有同样的问题。解决方法很简单：

```
 foreach (var d in driveList)
    {
        var drive = d;
        var q =
            from sd in db.ServerDrives
            where sd.DriveLetter == drive.Name
            select sd;
        ServerDrive existingServerDrives = q.First();
        existingServerDrives.FreeSpace = drive.FreeSpace;
        //..
        db.SubmitChanges();
    } 
```

但当然，这样的事情对于预测来说会更好：

```
 foreach (var d in driveList.Select(d => new {freeSpace = d.FreeSpace, existingServerDrives = db.ServerDrives.First(sd => sd.DriveLetter == d.Name)}))
    {
        d.existingServerDrives.FreeSpace = d.freeSpace;
        //..
        db.SubmitChanges();
    } 
```

**澄清**：事实上，我对“不起作用”部分并不完全正确。它*会*if `driveList`is `IQueryable`，但它*不会*if it is `IEnumerable`（因为前者使用表达式，而后者 - 代表）。但是因为语法相同，所以很容易犯这个错误，所以你仍然不应该在 lambda 表达式中使用循环变量，而不管它们的真实类型。

# javascript - 从带有书签的 iframe 中获取选择

> ID：11898959
> 
> 赞同：0
> 
> 时间：2012-08-10T09:34:14.427
> 
> 标签：javascript, jquery, bookmarklet

I'm trying to make a bookmarklet that does something with the selected text on any given website, but I'm having trouble when the selected text is in an iframe.

小书签链接如下所示：

```
<a id="bookmarklet" href="javascript:(function(){if(window.myBookmarklet!==undefined)   
{myBookmarklet();}
else{document.body.appendChild(document.createElement('script')).src='http://www.mywebsite.com/bookmarklet.js?';}})();
">Bookmarklet</a> 
```

而且bookmarklet.js 看起来像：

```
(function(){
var v = "1.3.2";
if (window.jQuery === undefined || window.jQuery.fn.jquery < v) {
    var done = false;
    var script = document.createElement("script");
    script.src = "http://ajax.googleapis.com/ajax/libs/jquery/" + v + "/jquery.min.js";
    script.onload = script.onreadystatechange = function(){
        if (!done && (!this.readyState || this.readyState == "loaded" || this.readyState == "complete")) {
            done = true;
            initBookmarklet();
        }
    };
    document.getElementsByTagName("head")[0].appendChild(script);
} else {
    initBookmarklet();
}

function initBookmarklet() {
    (window.myBookmarklet = function() {
        if($('iframe').length > 0) {
            $('iframe').each(function(){
                var iframe = $(this).get(0);
                var win= iframe.contentWindow? iframe.contentWindow : iframe.contentDocument.defaultView;
                alert (win.getSelection().toString());  
            });
        }
    })();
}

})(); 
```

我测试了一些东西——我绝对可以得到框架对象，并返回它的 html，但 getSelection 只是返回空。

它是跨域的吗，因为我的 bookmarklet.js 在其他地方？

更新：作为参考，我专门尝试的页面是这个： [http ://cases.iclr.co.uk/Subscr/search.aspx?path=WLR%20Dailys/WLRD%202011/wlrd2012-246](http://cases.iclr.co.uk/Subscr/search.aspx?path=WLR%20Dailies/WLRD%202011/wlrd2012-246)

# android - 将多个文件上传/下载到服务器的更好方法

> ID：11898962
> 
> 赞同：1
> 
> 时间：2012-08-10T09:34:29.287
> 
> 标签：android, upload

我尝试使用：

```
@Override
    protected String doInBackground(Void... params) {
        // TODO Auto-generated method stub
        String path = "http://192.168.1.112/johnson/learn/android/uploads/";
        String sUrl1 = "productSock";
        String sUrl2 = "productHistory";
        downloadFile(path, sUrl2);
        downloadFile(path, sUrl1);
        return null;
    }

    private boolean downloadFile(String path, String sUrl) {
        // TODO Auto-generated method stub
        try {
            String toUrl = path + sUrl;
            URL url = new URL(toUrl);
            URLConnection connection = url.openConnection();
            connection.connect();
            // this will be useful so that you can show a typical 0-100%
            // progress bar
            int fileLength = connection.getContentLength();

            // download the file
            InputStream input = new BufferedInputStream(url.openStream());
            OutputStream output = new FileOutputStream(Environment
                    .getExternalStorageDirectory().getAbsolutePath()
                    + "/Android/data/com.android.avs.amp.inventory/files/"
                    + sUrl);

            byte data[] = new byte[1024];
            long total = 0;
            int count = 0;
            while ((count = input.read(data)) != -1) {
                total += count;
                // publishing the progress....
                publishProgress((int) (total * 100 / fileLength));
                output.write(data);
            }
            output.flush();
            output.close();
            input.close();
        } catch (Exception e) {
        }
        return true;
    } 
```

当上传第二个文件时它卡在 31% 有时也会卡在第一个文件上 0%

如何更改代码？或任何其他方法？

还有我的上传

```
@Override
    protected Boolean doInBackground(Void... params) {
        // TODO Auto-generated method stub
        uploadFile("productStock");
        uploadFile("productHistory");
        return false;
    }

    private void uploadFile(String path) {
        // TODO Auto-generated method stub
        HttpURLConnection conn = null;
        DataOutputStream dos = null;
        DataInputStream inStream = null;
        String existingFileName = Environment.getExternalStorageDirectory().getAbsolutePath()+ "/Android/data/com.android.avs.amp.inventory/files/"+path;
        String lineEnd = "\r\n";
        String twoHyphens = "--";
        String boundary = "*****";
        int bytesRead, bytesAvailable, bufferSize;
        byte[] buffer;
        int maxBufferSize = 1 * 1024 * 1024;
        String responseFromServer = "";
        String urlString = "http://192.168.1.112/johnson/learn/android/";
        try {
            // ------------------ CLIENT REQUEST
            FileInputStream fileInputStream = new FileInputStream(new File(
                    existingFileName));
            // open a URL connection to the Servlet
            URL url = new URL(urlString);
            // Open a HTTP connection to the URL
            conn = (HttpURLConnection) url.openConnection();
            // Allow Inputs
            conn.setDoInput(true);
            // Allow Outputs
            conn.setDoOutput(true);
            // Don't use a cached copy.
            conn.setUseCaches(false);
            // Use a post method.
            conn.setRequestMethod("POST");
            conn.setRequestProperty("Connection", "Keep-Alive");
            conn.setRequestProperty("Content-Type",
                    "multipart/form-data;boundary=" + boundary);
            dos = new DataOutputStream(conn.getOutputStream());
            dos.writeBytes(twoHyphens + boundary + lineEnd);
            dos.writeBytes("Content-Disposition: form-data; name=\"uploadedfile\";filename=\""
                    + existingFileName + "\"" + lineEnd);
            dos.writeBytes(lineEnd);
            // create a buffer of maximum size
            bytesAvailable = fileInputStream.available();
            bufferSize = Math.min(bytesAvailable, maxBufferSize);
            buffer = new byte[bufferSize];
            // read file and write it into form...
            bytesRead = fileInputStream.read(buffer, 0, bufferSize);
            while (bytesRead > 0) {
                dos.write(buffer, 0, bufferSize);
                bytesAvailable = fileInputStream.available();
                bufferSize = Math.min(bytesAvailable, maxBufferSize);
                bytesRead = fileInputStream.read(buffer, 0, bufferSize);
            }
            // send multipart form data necesssary after file data...
            dos.writeBytes(lineEnd);
            dos.writeBytes(twoHyphens + boundary + twoHyphens + lineEnd);
            // close streams
            fileInputStream.close();
            dos.flush();
            dos.close();
        } catch (MalformedURLException ex) {
            // Log.e("Debug", "error: " + ex.getMessage(), ex);
            mErrorMsg = "error: " + ex.getMessage();
        } catch (IOException ioe) {
            // Log.e("Debug", "error: " + ioe.getMessage(), ioe);
            mErrorMsg = "error: " + ioe.getMessage();
        } 
        // ------------------ read the SERVER RESPONSE
        try {
            inStream = new DataInputStream(conn.getInputStream());
            String str;

            while ((str = inStream.readLine()) != null) {
                // Log.e("Debug", "Server Response " + str);
                mErrorMsg = "Upload Successful";
            }
            inStream.close();

        } catch (IOException ioex) {
            // Log.e("Debug", "error: " + ioex.getMessage(), ioex);
            mErrorMsg = "error: " + ioex.getMessage();
        }
    } 
```

当要上传的文件不存在时，它会卡在进度对话框中或者有没有更好的方法来上传多个文件？

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-10T09:57:00.107

我不确定是什么导致您的代码以一定百分比挂起，但我可以告诉您为什么它会产生损坏的数据。

在上传/下载代码中，您使用此方法写入读取字节：

```
stream.write(buffer, 0, bufferSize); 
```

现在，问题在于，您为[`write(byte[], int, int)`-method](http://docs.oracle.com/javase/6/docs/api/java/io/OutputStream.html#write%28byte%5B%5D,%20int,%20int%29)提供了错误的长度参数。

从流中读取时，[`read()`-方法返回](http://docs.oracle.com/javase/6/docs/api/java/io/InputStream.html#read%28byte%5B%5D,%20int,%20int%29)：

> 返回：**读入缓冲区的总字节数，**如果由于到达流的末尾而没有更多数据，则返回 -1。

这意味着，即使您的`byte[]`数组是`buffer_size`字节长（例如 1024），这并不意味着读取的 1024 字节（它可能会更少，例如缓冲区可能未满）。实际读取的字节数由 - 方法返回`read()`。

因此，您给`write()`-method 写入的字节数错误，这会导致它写入损坏文件的空字节。

正确的实现如下所示：

```
byte data[] = new byte[1024];
int read_count = 0;
while ((read_count = input.read(data, 0, data.length)) != -1) {
    output.write(data, 0, read_count);
} 
```

如果您不上传二进制数据，通常最好使用已经缓冲的写入器实现（如[BufferedWriter](http://docs.oracle.com/javase/6/docs/api/java/io/BufferedWriter.html) / [BufferedReader](http://docs.oracle.com/javase/6/docs/api/java/io/BufferedReader.html)）。

* * *

我在这篇博文中更详细地介绍了这个主题：[工作无缓冲流](http://codeisland.org/2012/working-unbuffered-streams/)

# google-maps - 谷歌地图的缩放看起来很奇怪

> ID：11898973
> 
> 赞同：6
> 
> 时间：2012-08-10T09:35:50.880
> 
> 标签：google-maps, google-maps-api-3

我有一个谷歌地图问题，除了缩放按钮似乎搞砸了，一切似乎都正常

这是地图的图像。 ![在此处输入图像描述](../Images/52bd8b1960697481ba770e08d3b277d1.png)

我猜有些东西是重叠的，但我不太确定。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-05-20T06:59:26.290

看来我来晚了，还是想分享一下我的想法。

编辑库的核心 css 不是一个好主意。相反，我们可以覆盖它

这是我用的。试试这个

```
#mapDiv img{ max-width: none; } 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-08-10T10:04:11.957

首先，您提供的链接无效。

这个问题通常是由于css（我认为它的bootstrap.css），这使得谷歌地图控件搞砸了。检查具有代码的行：`max-width:100%`

您将不得不删除它。

检查它是否有效。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2014-04-10T11:19:34.297

使用最新版本的 google maps api，您需要：

```
<style>
  .gm-style img { max-width: none; }
  .gm-style label { width: auto; display: inline; }
</style> 
```

答案来自：[https ://stackoverflow.com/a/19339767/3041072](https://stackoverflow.com/a/19339767/3041072)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-06-26T15:00:07.380

**Bootstrap.css**实际上有一个名为**google-maps**的类，它将 img 的最大宽度设置为 none。**bootstrap.css**中的代码是

> **`#map_canvas img, .google-maps img{max-width:none}`**

这是 StackOverflow 上问题的链接：[Twitter Bootstrap CSS 影响 Google Maps](https://stackoverflow.com/questions/9141249/twitter-bootstrap-css-affecting-google-maps)

# mysql - 选择时剪切mysql数据

> ID：11898976
> 
> 赞同：1
> 
> 时间：2012-08-10T09:36:13.353
> 
> 标签：mysql

我有一张带有**“***独特***”**值的表格。问题在于，添加这些值的程序还为该值添加了 3 个不同的后缀（值末尾的 2 个字符）。结果，我有三个带有三个后缀的变量。所以我只需要从 bd 获取唯一值 - 以某种方式在没有最后两个字符的情况下对其进行排序。有什么想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-10T12:06:20.097

如果行具有一个“唯一”值但不同的 Camera_id，您应该返回什么 Camera_id（第一个、最后一个、最大、最小？？？）。尝试这样的事情：

```
select 
LEFT(camera_name,LENGTH(camera_name)-2), max(camera_id)
from cameras
where site_id=1
group by LEFT(camera_name,LENGTH(camera_name)-2) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-10T09:39:37.300

你想用`first letter`唯一的值来检索值吗？

```
SELECT   DISTINCT SUBSTRING(ColumnName, 1,1) a
FROM     tablename
ORDER BY a 
```

你能显示样本记录吗？当您提出问题时，它有很大帮助。

# java - 从数据库中获取分组数据并在java中进一步处理

> ID：11898977
> 
> 赞同：0
> 
> 时间：2012-08-10T09:36:14.450
> 
> 标签：java, database, performance, group-by

我有一张桌子，说`A`；现在`A`我有属性`ID`as`string`和`Time`as `DateTime`。

现在的条件是表中的不同条目可以具有相同的内容`ID`，并且必须将它们组合在一起并进一步对其进行一些改进。

我正在使用 java，我编写了 SQL 查询

```
Select * from A group by ID; 
```

现在我在java中的一个巨大的列表中得到这些数据。现在我要做的是

```
Set_ID=NULL;
for(each element in List)
{
  if(Set_ID equals elements `ID` from table)
    Add the element to the same list
  else
    Create new List and add element to the list. Change Set_ID to current `ID`
} 
```

这样我就可以在不同的列表中获得所有具有相同 ID 的条目，并且我可以进一步处理。但这是解决这个问题的有效方法吗？比较每个元素的字符串。

我可以做的任何改变，让它变得更好。谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-10T10:01:59.200

我不是将所有数据读入列表然后将其处理为子列表，而是在您从数据库中提取它们时将它们直接处理为子列表

# tabs - SWT：从标签标题中删除突出显示

> ID：11898978
> 
> 赞同：0
> 
> 时间：2012-08-10T09:36:16.050
> 
> 标签：tabs, swt

如何删除 CTabFolder 中当前活动选项卡周围的突出显示？

提前谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-11T06:45:23.357

好像你不能那样做。但是，您可以使用 CTabFolder 而不是 TabFolder。CTabFolder 有更多的可能性可以使用，而且亮点不会首先出现，所以，这有帮助。

# jquery - JQuery 不验证 struts2 表单

> ID：11898980
> 
> 赞同：3
> 
> 时间：2012-08-10T09:36:33.367
> 
> 标签：jquery, struts2, validation

我正在为我的应用程序使用 struts2 框架。我还使用 jquery 验证来验证客户端的表单输入。但是他们俩都不太好相处。

我有我希望它存在的 UserBean 类。

我正在使用以下 jquery & struts 表单.. 它**不验证表单**

```
 <script type="text/javascript">
        $(document).ready(function(){
            var validator = $("#myform").validate({
                rules: {
                    username: "required",
                    password: "required"
                },
                messages: {
                    username: "Please enter your username",
                    password: "Please enter your password"
                }
            });
        });
    </script> 
```

* * *

```
 <s:form method="POST" action="doLogin" name="myform" id="myform" cssClass="form" theme="simple">
            <s:fielderror theme="simple" >

                    <label class="control-label" for="username">User Name </label>

                        <s:textfield name="userBean.userName" label="USER NAME"/>
                        <s:param>userBean.userName</s:param>

                    <label class="control-label" for="username">Password  </label>

                        <s:password name="userBean.password" label="PASSWORD" />
                        <s:param>userBean.password</s:param>

                <s:submit name="Submit" value="Submit"/>
            </s:fielderror>
        </s:form> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-11T03:31:15.497

您输入的名称是`userBean.userName`，`userBean.password`因此您的脚本声明必须与这些名称匹配才能工作：

```
<script type="text/javascript">
    $(document).ready(function(){
        var validator = $("#myform").validate({
            rules: {
                "userBean.userName": "required",
                "userBean.password": "required"
            },
            messages: {
                "userBean.userName": "Please enter your username",
                "userBean.password": "Please enter your password"
            }
        });
    });
</script> 
```

根据[jQuery Validation on field(s) with a prefix in the name property](https://stackoverflow.com/questions/1703163/jquery-validation-on-fields-with-a-prefix-in-the-name-property)，您需要将名称放在引号中，因为它在名称中包含 a `.`。

# regex - 正则表达式仅匹配第一个实例

> ID：11898985
> 
> 赞同：0
> 
> 时间：2012-08-10T09:36:56.320
> 
> 标签：regex, regex-greedy

出于某种原因，我无法使用惰性匹配。

以下是正文——

```
 806 ?        Ss     0:00 /usr/sbin/apache2 -k start
  823 ?        S      0:00  \_ /usr/sbin/apache2 -k start
  824 ?        S      0:00  \_ /usr/sbin/apache2 -k start
  825 ?        S      0:00  \_ /usr/sbin/apache2 -k start
  826 ?        S      0:00  \_ /usr/sbin/apache2 -k start
  827 ?        S      0:00  \_ /usr/sbin/apache2 -k start 
```

我只想匹配具有“apache2”的第一行，即

```
806 ?        Ss     0:00 /usr/sbin/apache2 -k start 
```

我的正则表达式看起来像这样 -

```
(apache)? 
```

但它似乎没有工作 - 它匹配所有实例。怎么了？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-10T10:31:03.817

您的正则表达式`(apache)?`大约意味着“匹配*apache*或*不匹配 apache* ”，因此它显然会匹配所有内容。

您没有指定您正在使用哪种编程语言或正则表达式风格，但此正则表达式将匹配包含单词*apache*的整行：

```
.*apache.* 
```

这当然会匹配包含单词*apache的***所有**行，因此您可以使用您正在使用的编程语言来获取第一个匹配项。

 *注意：如果您选择的正则表达式风格将换行符与点匹配，那么您可能需要进入多行模式并添加行首和行尾锚点，如下所示：

```
^.*apache.*$ 
```

（然后记得打开多行模式！）*

# workflow-foundation-4 - 如何同步执行 WorkflowApplication

> ID：11898988
> 
> 赞同：4
> 
> 时间：2012-08-10T09:37:06.473
> 
> 标签：workflow-foundation-4

我想在调用线程上同步使用 WorkflowApplication 执行工作流。

链接[http://msmvps.com/blogs/theproblemsolver/archive/2011/01/07/doing-synchronous-workflow-execution-using-the-workflowapplication.aspx](http://msmvps.com/blogs/theproblemsolver/archive/2011/01/07/doing-synchronous-workflow-execution-using-the-workflowapplication.aspx)提供了一个示例，但 Idle 和 Abort 事件仍在单独执行线程。

框架中是否有已经提供完全同步执行的东西，或者我必须编写它？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-10T10:01:57.893

无论您选择何种主机，工作流运行时始终是异步的。除了使用不同的 SynchronizationContext 或阻塞线程直到工作流完成之外，您无能为力。Ron Jacobs 有一个类似的方法，使用 ManualResetEvent 和他的[Workflow Episodes](http://blogs.msdn.com/b/rjacobs/archive/2011/02/08/wf4-workflow-episodes.aspx)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-14T17:07:17.420

两年后...最好的方法是：

```
class SynchronousSynchronizationContext : SynchronizationContext
{
    public override void Post(SendOrPostCallback d, object state)
    {
        this.Send(d, state);
    }
} 
```

# php - 在php中使用onchange事件从下拉列表中选择一个选项后如何在大量数据行上设置分页

> ID：11898989
> 
> 赞同：0
> 
> 时间：2012-08-10T09:37:07.727
> 
> 标签：php, javascript

我有一个 php 页面，上面有一个 ajax 函数 makerequest(serverPage, objID) ，它工作正常它有三个链接它们也工作正常我的内容出现在`<div id=pageId>`. 在此页面中，第三页有一个由 mysql 填充的下拉列表，其中包含 on change 事件。在这个页面中，每个选项都有很多行，所以我必须决定数据通过 php 分页类显示在多个页面上，它也可以正常工作，但是当我点击下一页时，由于重新加载页面而丢失了所有数据并获取下拉列表中的默认值。

部分代码内容如下：

```
<div id="menu">
    <!-- <a href="?id=AllIndiaengineringCollege" What part we want to link to onClick="makerequest('page.php?id=AllIndiaengineringCollege', 'content'); return false;" For AJAX - Load page into the div>AllIndiaengineringCollege</a>-->
    <a href="?id=AllIndiaengineringCollege" onClick="makerequest('id=AllIndiaengineringCollege', 'content'); return false;" style="text-decoration:none;color: #3E5AAB" >All India Engineering College</a>
    <a href="?id=Deemed" onClick="makerequest('page.php?id=Deemed', 'content'); return false;" style="text-decoration:none;color: #3E5AAB">Deemed Universities</a>
    <a href="?id=state" onClick="makerequest('id=state', 'content'); return false;" style="text-decoration:none;color: #3E5AAB">State Engineering College</a>
</div>

</font></div>
<div id='content'style="text-align:left;width:897px; height:auto; background-color:#99CCFF;padding:1px">
    <?PHP
    if (isset($_GET['id'])) {
        $pageId = $_GET['id'];
        if ($pageId == 'AllIndiaengineringCollege') {
            include("/pagination/index.php");
        }
        if ($pageId == 'Deemed') {
            include("/pagination/state.php");
        }
        if ($pageId == 'state') {
            include("/pagination/state.php");
        }
    }
    ?>
</div> 
```

它工作正常我的第三页是

```
<?php
$result = mysql_query("SELECT Id,state FROM state");
echo "<select name=State id='Id' class='select' onchange='showUser(this.value)'>";
while ($nt = mysql_fetch_array($result)) {
    echo ('<option value="' . $nt['Id'] . '" if($State===' . $nt['Id'] . ') echo $sel; >' . $nt['state'] . '</option>');
}
echo "</select>";
?> 
</div>
        <div id="state"><b><center>xxxxxxxx.</center></b> 
```

showUser 函数就像这里

```
function showUser(str) {
    if (str == "") {
        document.getElementById("state").innerHTML = "";
        return;
    }
    if (window.XMLHttpRequest) { // code for IE7+, Firefox, Chrome, Opera, Safari
        xmlhttp = new XMLHttpRequest();
    } else { // code for IE6, IE5
        xmlhttp = new ActiveXObject("Microsoft.XMLHTTP");
    }
    xmlhttp.onreadystatechange = function () {
        if (xmlhttp.readyState == 4 && xmlhttp.status == 200) {
            document.getElementById("state").innerHTML = xmlhttp.responseText;
        }
    }
    xmlhttp.open("GET", "pagination/statelist.php?state=" + str, false);
    xmlhttp.send();
} 
```

分页代码如下：

```
<?php
include('db.php');
include('function.php');

$q          = $_GET["state"];
$page       = (int) (!isset($_GET["page"]) ? 1 : $_GET["page"]);
$limit      = 2;
$statement  = "college where State= '" . $q . "'";
$url        = "BTech.php?id=state&State=" . $q . "&";
$startpoint = ($page * $limit) - $limit;
?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-13T05:10:50.823

我想如果你改正这个就好了

```
while ($nt = mysql_fetch_array($result)) {
    echo ('<option value="' . $nt['Id'] . '" if($State===' . $nt['Id'] . ') echo $sel; >' . $nt['state'] . '</option>');
} 
```

像这样的东西，

```
while ($nt = mysql_fetch_array($result)) {
    echo "<option value=\"{$nt['Id']}\"".(($State===$nt['Id'])?'selected="selected"':"") .">{$nt['state']}</option>";
} 
```

您不能以这种方式评估条件，嵌套`echo`也不起作用。

看看这个以前的SO[问题](https://stackoverflow.com/questions/3507042/if-block-inside-echo-statement)

# javascript - 两个具有相同函数名的jQuery插件之间的冲突

> ID：11898992
> 
> 赞同：8
> 
> 时间：2012-08-10T09:37:16.817
> 
> 标签：javascript, jquery, jquery-ui, autocomplete

我在一个大型站点工作，该站点包含 2 个冲突的 jquery 插件，用于执行 autocmplete。

1）jquery.autocomplete.js（不是jquery ui的一部分）：

```
$.fn.extend({
    autocomplete: function   ... 
```

2) jquery.ui.autocomplete.js（来自最新的 jquery ui 库），它也使用了 autocomplete 关键字。

```
$.widget( "ui.autocomplete", {   ... 
```

有没有办法指定我在调用时只使用第二个 jquery.ui 小部件

```
$( "#tags" ).autocomplete ... 
```

不改变2个文件？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-08-10T11:55:25.357

由于第二个自动完成是使用向`$.Widget`jQuery 注册自身的方法，因此最容易更改内部自动完成的行为。

*如果不对两个脚本加载之间的 jQuery 对象进行某种*更改，您将无法同时加载它们，因为它们只会相互冲突（或覆盖）。

我会试试这个：

```
<script src="jquery.autocomplete.js"> </script>
<script>
    // rename the local copy of $.fn.autocomplete
    $.fn.ourautocomplete = $.fn.autocomplete;
    delete $.fn.autocomplete;
</script>
<script src="jquery-ui.autocomplete.js"> </script> 
```

这将使得：

```
$().autocomplete() 
```

使用 jQuery UI 版本，以及

```
$().ourautocomplete() 
```

使用您的本地版本。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-10T11:46:34.810

我尝试使用 jQuery UI 的选项卡功能来实现它，它应该对您同样有效。一个函数在技术上是一个 js 对象，所以你可以简单地重命名它：

```
 $.fn.tabs2 = $.fn.tabs;
    delete $.fn.tabs;
    $("#tabz").tabs2({}); 
```

希望有帮助！

**编辑**

就像 Alnitak 建议的那样，您还需要删除以前的函数名称。另外，我认为 .fn 是必需的。

# sql - 检索组的随机行

> ID：11898994
> 
> 赞同：2
> 
> 时间：2012-08-10T09:37:22.667
> 
> 标签：sql, sql-server, sql-server-2008, tsql

我有一个包含以下列的表格

```
1\. ID
2\. UserID
3\. ImageUrl 
```

我想为每个 UserID 检索一个随机 ImageUrl。例如，表中有 4 行

```
 1 12251 Winter.jpg
 2 12251 Summer.jpg 
 3 33333 Fall.jpg
 4 33333 Spring.jpg 
```

并且查询检索以下行

```
 1 12251 Winter.jpg
 4 33333 Spring.jpg 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-10T09:46:06.117

```
select userid,picture from
(
select userid, picture, ROW_NUMBER() over (partition by userid order by newid()) rn 
from yourtable
) v
where rn =1
order by xtype 
```

# java - 未找到引用的 xsl 样式表时的默认浏览器 xml 样式表？

> ID：11898996
> 
> 赞同：1
> 
> 时间：2012-08-10T09:37:23.837
> 
> 标签：java, xml, xslt, browser

我希望在浏览器找不到我的样式表时显示原始 XML，这可能吗？

下面我放了我的 XML 文档的标题。

```
<?xml version="1.0" encoding="UTF-8" standalone="no"?><?xml-stylesheet type="text/xsl" href="./my_sheet.xsl" title="relativeRef" alternate="YES"?> 
```

当在我的服务器上找不到样式表时，我返回 404 错误，但这会使浏览器的 XML 解析器停止并显示错误消息。我应该怎么办？这是为样式表提供服务的 servlet 的 JAVA 代码。

```
@Override
protected void doGet(HttpServletRequest req, HttpServletResponse resp)
        throws ServletException, IOException {      

    edamisUtils.log("Serving my_sheet.xsl");

    //If we could not load my_sheet we throw a 404 error.
    if(my_sheet== null){
        edamisUtils.debug(5, "Did not find the my_sheet.xsl, sending a 404 status response.");
        resp.sendError(HttpServletResponse.SC_NOT_FOUND);
        return;
    }

    //Set the MIME type of the response to text/xsl
    resp.setContentType("text/xsl");
    OutputStream os = resp.getOutputStream();
    os.write(my_sheet.array());

} 
```

谢谢大家，祝你有美好的一天！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-19T10:49:39.470

您可以返回 200 和“全部复制”XSL，而不是返回 404。

就像是

```
if(my_sheet == null){
   copy the copy_all XSL in the response output stream;
} 
```

可以在[此处找到复制所有 XSL 示例](https://stackoverflow.com/questions/1141216/xsl-copy-the-entire-xml-except-a-parent-node-but-keep-its-child-node)

# regex - 如何编写匹配非贪婪的正则表达式？

> ID：11898998
> 
> 赞同：438
> 
> 时间：2012-08-10T09:37:40.577
> 
> 标签：regex, regex-greedy, non-greedy

我需要有关与非贪婪选项匹配的正则表达式的帮助。

匹配模式是：

```
<img\s.*> 
```

要匹配的文本是：

```
<html>
<img src="test">
abc
<img
  src="a" src='a' a=b>
</html> 
```

我在[http://regexpal.com上测试](http://regexpal.com)

`<img`此表达式匹配从到最后的所有文本`>`。`>`我需要它与在 initial 之后遇到的第一个匹配`<img`，所以在这里我需要得到两个匹配而不是我得到的一个。

我尝试了所有*non-greedy`?`*的组合，但没有成功。

* * *

## 回答 #1

> 赞同：616
> 
> 时间：2012-08-10T09:42:12.167

非贪婪的`?`工作非常好。只是您需要在您正在测试的正则表达式引擎（*regexpal*，您使用的引擎，也有此选项）中选择**点匹配所有选项。**这是因为，当您使用. 您需要明确告诉他们您也想将换行符与*`.``.`*

 *例如，

```
<img\s.*?> 
```

工作正常！

在此处检查[结果](http://regexr.com?31q13)。

此外，请阅读[**dot**](http://www.regular-expressions.info/dot.html)在各种正则表达式中的[行为](http://www.regular-expressions.info/dot.html)[方式。](http://www.regular-expressions.info/dot.html)

 *** * *

## 回答 #2

> 赞同：119
> 
> 时间：2012-08-10T09:43:05.677

操作数使`?`匹配非贪婪。例如`.*`，是贪婪的，而`.*?`不是贪婪的。所以你可以使用类似的东西`<img.*?>`来匹配整个标签。或`<img[^>]*>`。

但请记住，整套 HTML 并不能真正用正则表达式解析。

* * *

## 回答 #3

> 赞同：24
> 
> 时间：2018-11-19T05:50:56.190

这里的其他答案假定您有一个支持非贪婪匹配的正则表达式引擎，这是 Perl 5 中引入的扩展，并被广泛复制到其他现代语言；但它绝不是无处不在的。

许多旧的或更保守的语言和编辑器只支持传统的正则表达式，它们没有控制重复运算符的贪婪的机制`*`——它总是匹配尽可能长的字符串。

然后，诀窍是首先限制允许匹配的内容。而不是`.*`你似乎在寻找

```
[^>]* 
```

它仍然匹配尽可能多的*东西*；但这个*东西*不仅仅是`.`“任何字符”，而是“任何不是的字符`>`”。

根据您的应用程序，您可能希望也可能不希望启用允许“任何字符”包含换行符的选项。

即使您的正则表达式引擎支持非贪婪匹配，最好还是说明您的实际意思。如果这*就是*您的意思，您可能应该这样说，而不是依赖非贪婪匹配（希望，可能）按我的意思行事。

例如，在通配符 like 后面带有尾随上下文的正则表达式将`.*?><br/>`跳过任何嵌套`>`，直到找到尾随上下文`><br/>`（此处为明确禁止换行符）显然不能也不会这样做。`>``[^>]*><br/>``[^\n>]*><br/>`

当然，如果你需要处理，这仍然不是你想要的`<img title="quoted string with > in it" src="other attributes"> and perhaps <img title="nested tags">`，但到那时，你应该最终放弃使用正则表达式，就像我们一开始就告诉你的那样。***